# StackOverflow 问答 13034000-13034999

# java - 循环中的 BufferedReader

> ID：13034003
> 
> 赞同：1
> 
> 时间：2012-10-23T15:29:27.890
> 
> 标签：java, android, bufferedreader

我目前陷入了Android问题。在一个循环中，我从包含递增 id ( `sensor`) 的 URL 中读取。如果达到最大值，则循环结束（`IOException`因为错误 500）。我的问题涉及`BufferedReader`. 如果我指定大小（例如 8k），我不能读取超过这些 8k，尽管`BufferedReader`在循环的每次运行中都会重新创建（使用不同的 uri）并且我读取的每个文件只包含一行（<8k）。

如果我省略 size 参数，一切正常，但我会收到类似“使用默认缓冲区大小。最好是明确的......”的警告。我究竟做错了什么？这是我的代码：

```
sensor = 0;
while (true) {
            try {
                // adapt uri
                BufferedReader in = new BufferedReader(
                        new InputStreamReader(uri.resolve(String.valueOf(sensor))
                                .toURL().openStream()), 8*1024);

                // read from url
                s = in.readLine();
                in.close();
            } catch (IOException e) {
                break;
            }

            ... // do something with s

            sensor++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:30:12.690

您可能需要考虑在循环中使用您的`s = in.readLine()`调用，如[以下问题所示](https://stackoverflow.com/questions/5594725/reading-inputstream-using-bufferedreader-readline-is-too-slow)。您在这里对代码所做的只是从 BufferedReader 对象中读取一次，并且您最多将获得缓冲区的大小（8k）。如果有可用的数据，后续读取将为您提供更多数据。如果调用的结果是，则意味着没有更多数据可供读取。`while``readLine()``null`

# sql - SQL 正确拆分结果

> ID：13034007
> 
> 赞同：1
> 
> 时间：2012-10-23T15:29:41.020
> 
> 标签：sql, sql-server, sql-server-2008

我有一个请求的结果，它给了我数千行，我想将它拆分为每个 10k 行的小临时表，增量数从 1 到 10 000。假设我有一个 25 000 的大查询行，我想要的是将它分成 2 个 10k 的表和第三个 5k 的表。当然，我不知道我将不得不分成的确切页数。

> 我对所有行的第一个查询被命名为 [#DECLARATION] 并且有一个数字 NumeroDeclaration，第 1 页为 0，第 2 页为 1，等等。到 9。每 10 000 行它从 0 增加到 10 000。

此时我的请求如下所示：

```
 --Page 1
    SELECT * INTO [#PAGE1] FROM [#DECLARATION] WHERE NumeroDeclaration =0 ORDER BY NumeroTransaction;
        --Numerotation
        WITH upd AS (SELECT NumeroDeclaration, ROW_NUMBER() OVER (ORDER BY NumeroTransaction) AS Numtemp FROM [#PAGE1])
        UPDATE upd SET NumeroDeclaration = Numtemp
    --Page 2
    SELECT * INTO [#PAGE2] FROM [#DECLARATION] WHERE NumeroDeclaration =1 ORDER BY NumeroTransaction;
        --Numerotation
        WITH upd AS (SELECT NumeroDeclaration, ROW_NUMBER() OVER (ORDER BY NumeroTransaction) AS Numtemp FROM [#PAGE2])
        UPDATE upd SET NumeroDeclaration = Numtemp
    --Page 3
    --etc.... to Page 10... 
```

**我必须这样做超过 10 页，并且它有效，但是还有另一种*更短*/更经典的方法吗？**

我正在使用 SQL SERVER 2008 感谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:02:08.613

我仍然不确定为什么需要拆分为较小的表，并且不能在单个`[#DECLARATION]`表上使用过滤器。

您的查询暗示该`[#DECLARATION]`表已经通过该`NumeroDeclaration`列分区到页面。

你可以做

```
Declare @recordsPerPage AS int
SELECT @recordsPerPage = 10000;
SELECT
    *,
    ROW_NUMBER() OVER (PARTITION BY NumeroDeclaration ORDER BY NumeroTransaction ASC) AS Tempnum,
    NumeroDeclaration+1 AS Page
FROM numbered 
```

这将带来一个带有嵌入`page`页面列和`Tempnum`列的结果集，该列将为每个页面重置。

希望这可以帮助

# python - 在 Django settings.py 中访问 Heroku 的 url root

> ID：13034013
> 
> 赞同：1
> 
> 时间：2012-10-23T15:30:11.317
> 
> 标签：python, django, heroku

我需要访问我的 Heroku 应用程序的根 url。我有几个用于这个项目的应用程序（例如，登台、生产），我想在我的设置文件中以编程方式设置这个值。我想要的是：

```
URL_ROOT = 'http://silly-name-1234.herokuapp.com' 
```

正如[这里](https://stackoverflow.com/questions/4093999/how-to-use-django-to-get-the-name-for-the-host-server)所建议的，我尝试了以下方法：

```
import socket
HOSTNAME = socket.gethostname()
URL_ROOT = HOSTNAME 
```

但是，这似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:21:56.463

你应该做

`heroku config:add BASE_IRI=http://silly-name-1234.herokuapp.com`在heroku cli

之后`os.environ.get('BASE_IRI', 'localhost')`在你的`settings.py`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T15:53:56.673

尝试`os.environ.get('HOSTNAME')`

# python - Mongoengine 列表过滤

> ID：13034014
> 
> 赞同：2
> 
> 时间：2012-10-23T15:30:12.880
> 
> 标签：python, mongodb-query, mongoengine

我在一些 mongoengine 的文档中有一个所需的权限列表，我想对其进行过滤。

考虑这个文件：

```
class Entry(Document):
    required_perms = ListField(StringField())

e = Entry(required_perms=['create', 'update'])
e.save() 
```

以下是一些用例：

```
all_perms = ['create', 'update', 'delete']

Entry.objects.filter(required_perms__in=all_perms)
[<Entry: Entry object>] # Returned because 'create' OR 'update' are in required_perms

Entry.objects.filter(required_perms__in=['create', 'delete'])
[<Entry: Entry object>] # Returned because 'create' is in required_perms

Entry.objects.filter(required_perms__all=all_perms)
[] # Not returned because 'delete' is not in required_perms 
```

使用 查询时`$in`，我得到`Entry`, 因为至少有一个字符串在列表中。`$all`不满足我的需求，因为根据文档，这与我打算做的相反：*“提供的值列表中的每个项目都在数组中”*；我想：*“数组中的每个项目都在提供的值列表中”*。

所以，我想要求这样的*事情*：

```
Entry.objects.filter(everyoneof__required_perms__in=['create', 'delete']) 
```

我欺骗了这个来清楚地解释它，但这很丑陋，不是动态的，不*应该*使用：

```
Entry.objects(Q(required_perms__0__in=all_perms) & Q(required_perms__1__in=all_perms))
"""
Can be tested with: all_perms = ['create', 'delete'] -> No results
     and: all_perms = ['create', 'update', 'delete'] -> 1 result
""" 
```

有没有办法做这样的事情？也许有一个原始查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:31:18.740

如果您知道订单，则可以直接检查，例如：

```
Entry.objects.filter(required_perms=['create', 'delete']) 
```

如果订单不固定或不知道，那么您可以使用[`$all`](http://docs.mongoengine.org/en/latest/guide/querying.html?highlight=all#query-operators)运算符：

```
Entry.objects.filter(required_perms__all=['create', 'delete']) 
```

## 更新

如果您必须确保列表中的所有元素都符合给定的要求并且它们可能存在也可能不存在 - 这是不支持的。您必须`__in=`在您的应用程序中执行然后过滤。

我不确定这种方法。为什么要担心用户拥有额外的权限？听起来不是很灵活/面向未来。

# php - Form_validation - 如何在 error_list 中显示特定错误

> ID：13034020
> 
> 赞同：0
> 
> 时间：2012-10-23T15:30:33.970
> 
> 标签：php, codeigniter, validation

我目前正在尝试找到一种仅显示错误列表的特定错误的方法。

```
$this->form_validation->set_rules('password', 'lang:user.password', 'trim|required|min_length[6]|max_length[12]|matches[password_confirm]'); 
```

如果该字段为空，例如“缺少某些字段”，我希望能够显示一条消息。但是，如果用户只写一个短于 6 个字符或高于 12 个字符的密码，例如“密码长度必须在 6 到 12 个字符之间”，我想显示一条特定消息

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:42:25.510

我鼓励您阅读[文档](http://codeigniter.com/user_guide/libraries/form_validation.html#settingerrors)。你可以 ：

*   编辑此文件“language/english/form_validation_lang.php”以更改默认错误消息。
*   动态设置错误消息：

    ```
    $this->form_validation->set_message('required', '%s must not be empty.');
    $this->form_validation->set_message('min_length', '%s must be between 6 and 12 characters.');
    $this->form_validation->set_message('max_length', '%s must be between 6 and 12 characters.'); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:09:18.827

制定规则后，您只需确保包括

```
<?php echo validation_errors(); ?> 
```

在你的表格的某个地方。

您还可以使用以下内容显示单个错误：-

```
<?php echo form_error('password'); ?> 
```

更多信息：-[表单验证：CodeIgniter 用户指南](http://codeigniter.com/user_guide/libraries/form_validation.html)

# ios - 使用 UIView 作为控制器

> ID：13034023
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:30:42.163
> 
> 标签：ios, uiview, controller, structure

现在我正在关注我的应用程序的结构。我想子类化 UIView 来制作一个“根视图”，它将作为应用程序主要流程的控制器执行。因此，UIView 的子类将具有例如由子视图调用的方法，这些方法执行显示的内容更改。你会说这是一种糟糕的编程结构（/风格）吗？如果是这样，为什么它不好或不优雅？谢谢你的帮助 ：）

sh4kesbeer

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:33:53.580

看起来像 UIViewController，闻起来像 UIViewController，尝起来像 UIViewController。那么为什么不使用 UIViewController 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:37:45.750

视图必须向用户展示一些东西；控制器必须实现应用程序逻辑。这意味着这是选择必须向用户显示哪个视图的控制器。

如果您想学习更多内容，请查看[苹果文档](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)或[维基百科所说](http://en.wikipedia.org/wiki/Model-View-Controller)的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:54:52.430

除了您没有使用为 UIViewController 设计的所有漂亮模式（如标准回调、navController 集成、tabBarController 支持等）之外，单独使用 UIView 或包装到 UIViewController 中没有逻辑上的区别。还会使您的代码清单更大且更难阅读/理解.

然而，这里的要点是，从 OOP 的角度来看，您也降低了影响消息传递的封装级别。现在遇到杀手：从某些角度来看，您正在制造几乎看不见的东西`C`。`MVC`

根据我的经验，基于视图的项目一开始就很好，然后各种困难都逼近你，迫使你考虑重构，这让你从头开始发明视图控制器。

# java - java可转换枚举

> ID：13034027
> 
> 赞同：1
> 
> 时间：2012-10-23T15:30:48.467
> 
> 标签：java, generics, inheritance, enums

我想创建一个具有值的枚举类型，并且可以从该值转换为反之亦然（基本上，枚举将是该值的类型安全别名，并且会提高代码的可读性）。

我需要这个，因为我正在处理低级、嵌入式的东西，以及写寄存器等等。很多时候，寄存器的几个位具有特殊含义。就像一个寄存器的第 10-11 位是活动的 CYCCNT “00 - CYCCNT_24, 01 - CYCCNT_26, 11 - CYCNT_28”

现在我想做这样的事情：

```
void setActiveCYCCNT(CYCCNT_ENUM newvalue)
{
  Target.writeRegister(ADDRESS, newvalue.value());
}

CYCCNT_ENUM getActiveCYCCNT()
{
  return CYCCNT_ENUM.fromValue(Target.readRegister(ADDRESS));
} 
```

我想做这样的事情（但在许多层面上语法不正确）：

似乎静态成员无法访问 T。我不确定为什么会这样，java 不是为每个引用的泛型类型生成一个新类吗？其次，java似乎不支持泛型枚举？

```
public enum ConvertableEnum<T> {

    private static Map<T, ConvertableEnum<T>> map = new HashMap<T, ConvertableEnum<T>>();
    T value;

    public ConvertableEnum(T t)
    {
        this.value = t;     
        map.put(t, this);
    }

    public static ConvertableEnum<T> fromValue(T t)
    {
        return map.get(t);
    }

  } 
```

在这之后可以做：

```
public enum CYCCNT : ConvertableEnum<int>
{
  CYCCNT_24(0x00), CYCCNT_26(0x01), CYCCNT_28(0x03);
} 
```

并使用它。

我的问题是如何在语法不正确的代码中实现我想要实现的目标？

感谢您的帮助，axos88

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:40:08.460

enum 使用泛型接口没有问题。唯一的问题是枚举不能是通用的。此外，GenericVariables 不能是私有的，所以代码：

```
 public enum CYCCNT implements ConvertableEnum<Integer>
    {
      CYCCNT_24(0x00), 
      CYCCNT_26(0x01), 
      CYCCNT_28(0x03);

      private int value; 

      CYCCNT(int value) {
        this.value = value;
      }

     public Integer getValue() {
        return this.value;
     }   

    private final static HashMap<Integer,CYCCNT> valueOfMap = new HashMap<Integer,CYCCNT>();  

    static {
      for(CYCCNT cyccnt : CYCCNT.values()) {
         valueOfMap.put(cyccnt.getValue(), cyccnt);
      )
     }
    public static CYCCNT valueOf(int value) {
       return valueOfMap.get(value);
    }
  } 
```

应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:37:03.340

我最近做了类似的事情：

```
public enum ReferenceType 
{
    SELECT(true),
    INSERT(false),
    SELECT_INTO(false),
    UPDATE(false),
    DELETE(false),
    CREATE_TABLE(false),
    DROP_TABLE(false),
    PRINT(false),
    FROM(false),
    DECLARE(false);

    private final boolean legalSub;

    ReferenceType(boolean _legalSub)
    {
        this.legalSub = _legalSub;
    }

    public boolean isLegalSubstatement()
    {
        return this.legalSub;
    }
} 
```

因此，ReferenceType ID 为 eg `INSERT`，但关联值（或其中之一）为 false，该值在声明 ( `INSERT(false)`) 中设置，并且可以使用 isLegalSubstatement() 检索。同样，您可以将多个字段与每个 ID 关联，只要将它们分别包含在构造函数中即可。您可以将每个枚举项视为参考数据表中的一行，其中 ID 是表键，其他字段（在括号中）是与该键关联的列。

当然，拥有与枚举键关联的属性是可选的，即枚举可以很简单，没有任何属性。

这是否回答你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:37:51.140

你可以在你的枚举中有一个函数：

```
public enum CYCCNT /* Should use Camel-case names */
{
  CYCCNT_24, CYCCNT_26, CYCCNT_28;

  public static int toValue(CYCCNT e) {
    switch (e) {
      case CYCCNT_24: return 0x0;
      //...
      default: throw new RuntimeException("Enum value not handled");
    }
  }

  public int toValue() {
    return CYCCNT.toValue(this);
  }
} 
```

否则按照建议，您还可以放置一个成员变量来保存实际值。但是我猜这会增加枚举实例的原始大小（虽然不确定）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:38:43.490

枚举只是一种特殊类型的类——例如，枚举可以有成员变量。

因此，只需声明一个枚举类型，每个枚举都有一个关联的地址，以及关联的 getter 和 helper 函数。

```
public enum CYCCNT_ENUM{
    Value1("a"),
    Value2("b");

    private final String address;

    private CYCCNT_ENUM(String address) {
        this.address= address;
    }

    public String getAddress() {
        return address;
    }

    public static CYCCNT_ENUMgetScope(String address) {
        for(CYCCNT_ENUM e : values()){
            if(address.equals(e.getAddress())){
                return e;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:42:02.063

## 直接解决方案

`Enum.class``static <T extends Enum<T>> T valueOf(Class<T> enumType, String name)`有一个方法

> 返回具有指定名称的指定枚举类型的枚举常量。

每个枚举类型都有一个`public static E valueOf(String name)`方法。

因此，通过使用适当的值初始化枚举常量，您就拥有了所需的一切。

## 更好的解决方案

`Item 32: Use EnumSet instead of bit fields`从[Josh Bloch 的 Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)中考虑，即`EnumSet`直接使用类而不是位字段可能会更好。

# c# - 将简单的html“渲染”成字符串

> ID：13034032
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:31:26.400
> 
> 标签：c#, java, javascript, python, language-agnostic

是否有一个库可以将 HTML 解析为 String 对象，可以是 Java、C# 或任何其他编程语言。

这是我的情况：

我有一些来自所见即所得编辑器的文档，其中包含一些基本的 html 标签，例如`<p><br>`：

```
<p>This &nbsp;</p><font>etc</font><br>
<span> and this, etc. 
```

当导出到其他工具时，它会转换为纯文本，使其不可读。我现在正在做的是：“全选”>“另存为 x.html”>“在浏览器中打开”>“全选”>“粘贴”

我知道这可以通过程序自动化。

有图书馆可以做到这一点吗？也就是说，要“渲染”简单的 HTML？最好是一个字符串，我可以把它放到我的剪贴板中。删除 html 标签是不够的，因为我会得到一个很长的行而没有回车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:00:25.687

对于 Python，您可以使用实体 refs 扩展[这个出色的功能](https://stackoverflow.com/a/925630/477878)来做您似乎需要的事情；

```
from HTMLParser import HTMLParser
from htmlentitydefs import name2codepoint

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []
    def handle_data(self, d):
        self.fed.append(d)
    def handle_entityref(self, name):
        self.fed.append(unichr(name2codepoint[name]))
    def get_data(self):
        return ''.join(self.fed)

def strip_tags(html):
    s = MLStripper()
    s.feed(html)
    return s.get_data()

print strip_tags('<html>olle&lt;</br>')
 olle< 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:51:34.417

在java中你可以使用[http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/text/html/parser/DocumentParser.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/text/html/parser/DocumentParser.html)

您可以提供 ParserCallback 来处理文本并忽略标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:15:05.790

有两种方法可以做到：

1.  编写任意复杂的解析器来清理数据。这是其他答案所建议的。如果您的输入不是非常核心，这通常是快速获胜。

2.  但是，如果您有非常复杂的输入并且想要“高保真”，则可以使用“真实”浏览器。

一个非常简单的选择是使用[PhantomJS](http://phantomjs.org/)。这是一个用于从网页中提取文本的[示例：](https://github.com/ariya/phantomjs/wiki/Page-Automation)`innerText`

```
var page = require('webpage').create();
console.log('The default user agent is ' + page.settings.userAgent);
page.settings.userAgent = 'SpecialAgent';
page.open('http://www.httpuseragent.org', function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var ua = page.evaluate(function () {
            return document.getElementById('myagent').innerText;
        });
        console.log(ua);
    }
    phantom.exit();
}); 
```

还有诸如[WebBrowser 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)(MSIE) 或[GeckoFX](https://code.google.com/p/geckofx/)之类的选项。不过，我怀疑沿着这些路径走下去的学习曲线会非常陡峭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:36:42.283

如果我做对了，您想删除所有 html 标签，使用 C# 很容易：

```
var plainText = Regex.Replace(htmlString.Replace("<br>", Environment.NewLine).Replace("&nbsp;", " "), @"<[^>]*>", String.Empty); 
```

# desire2learn - Desire2Learn 更新用户名

> ID：13034035
> 
> 赞同：0
> 
> 时间：2012-10-23T15:31:52.427
> 
> 标签：desire2learn

Desire2Learn Valence API 是否允许您通过[PUT /.../users/(userId)](http://docs.valence.desire2learn.com/res/user.html#put--d2l-api-lp-%28D2LVERSION-version%29-users-%28D2LID-userId%29)调用修改一个人的用户名？

我们有一个用例，其中用户进行了合法的名称更改，并且他们的用户名（格式 = Firstname.Lastname）必须在 D2L 中更新。

我了解 SIS-to-D2L 集成使用用户名作为两个集成键之一（另一个是 OrgDefinedId），因此以这种方式修改一个人的用户名会失败。

那么，PUT /users/(userid) Valence 调用的键是什么，D2L 是否允许您以这种方式修改用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:29:10.073

创建用户时，用户的`UniqueIdentifier`属性将设置为`UserName`您在`CreateUserData`结构中传递的属性。`UniqueIdentifier property`在此之后*无法*通过 API 修改；但是，`UserName`属性是——您可以`UserName`在 D2L LMS 用户记录中更新。就 LMS 而言，`UserId`属性是用户记录中唯一依赖*于其唯一性的部分。*

当您更改`UserName`属性时，服务有一个底层任务会注意到更改并将更改传播到`UniqueIdentfier`属性。目前，由于此传播与更新分开发生，因此通过 API 执行的更新操作（返回更新的用户结构）*可能不会*显示`UniqueIdentifier`与`UserName`. 随后获取该用户的数据（否则按 Id）应该使这两个属性再次同步。

# c# - ASP.NET 自定义绑定

> ID：13034038
> 
> 赞同：0
> 
> 时间：2012-10-23T15:32:00.213
> 
> 标签：c#, asp.net, data-binding

我正在尝试根据匹配的数据库表字段和查询字符串将**Panel.visible绑定为可见：**

```
<asp:Panel ID="Panel2" runat="server" Visible='<%# Eval("Mjr_Id") == Request.QueryString["Mjr_Id"] %>'> ... </asp:Panel> 
```

但它失败了，你知道正确的绑定格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:43:46.340

Eval 函数返回一个对象，而 QueryString 索引器返回一个字符串。将相等运算符应用于对象和字符串将导致引用比较，而您需要值比较。

要使代码正常工作，您需要将对象转换为字符串：

```
Visible='<%# Eval("Mjr_Id", "{0}") == Request.QueryString["Mjr_Id"] %>' 
```

**注意：**这将执行区分大小写的序数比较。如果这不是您想要的，您将需要使用*string.Equals(string, string, StringComparison)*方法。

# django - 在 Django 1.4 的模板中输出提要 url

> ID：13034042
> 
> 赞同：1
> 
> 时间：2012-10-23T15:32:10.113
> 
> 标签：django, django-templates, django-1.4

在升级到 Django 1.4 之前，我在 URL 中定义了一个 feed_dict。上下文处理器拾取了它，因此我可以在模板中循环遍历它并输出我定义的所有提要 URL。

随着 Django 1.4 处理提要 URL 的方式发生变化，我该如何再次执行此操作？

# java - 如何防止 Struts2 中文本框的默认 ID

> ID：13034043
> 
> 赞同：0
> 
> 时间：2012-10-23T15:32:13.883
> 
> 标签：java, jakarta-ee, struts2

我正在使用 struts 迭代器从 arraylist 创建和填充文本框。现在所有生成的文本框都具有相同的“ID”，即使没有为每个元素提供 id。我希望 ID 是唯一的，或者根本没有 ID。

```
<s:iterator value="specificationList" status="status">
    <s:textfield name="specification" />                            
</s:iterator> 
```

**预期产出**

```
<input type="text" value="Test Spec1" name="specification">
<input type="text" value="Test Spec2" name="specification">
<input type="text" value="Test Spec3" name="specification"> 
```

或者

```
<input type="text" id="specification1" value="Test Spec1" name="specification">
<input type="text" id="specification2" value="Test Spec2" name="specification">
<input type="text" id="specification3" value="Test Spec3" name="specification"> 
```

**实际输出**

```
<input type="text" id="specification" value="Test Spec1" name="specification">
<input type="text" id="specification" value="Test Spec2" name="specification">
<input type="text" id="specification" value="Test Spec3" name="specification"> 
```

我还尝试了 s:form theme simple 和 css_xhtml 所有这些为文本框创建 id

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:34:47.520

给它一个id。

（未经测试，但很接近；在我的脑海中。）

```
<s:iterator value="specificationList" status="status">
  <s:textfield name="specification" id="%{#status.count}" />
</s:iterator> 
```

# php - 回拨邮件检查

> ID：13034049
> 
> 赞同：1
> 
> 时间：2012-10-23T15:32:38.917
> 
> 标签：php, codeigniter

尝试设置回调函数，但由于某种原因无法正常工作。不知道我在这里做错了什么。

在下面的控制器中查找 registration() 和 _email_check($str) 函数。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Register extends CI_Controller {

public function __construct() 
{
    parent::__construct();
    $this -> load -> model('user_model');
}

public function index() 
{
    if (($this -> session -> userdata('user_name') != "")) {
        redirect('dashboard');
    } 
    else
    {
        $data['title'] = 'Register';
        $this -> load -> view('shared/header_view', $data);
        $this -> load -> view("registration.php", $data);
        $this -> load -> view('shared/footer_view', $data);
    }
}

public function login() 
{
    $email = $this -> input -> post('email');
    $password = $this -> input -> post('pass');

    $result = $this -> user_model -> login($email, $password);
    if ($result)
        redirect('dashboard');
    else
        $this -> index();
}

public function registration() 
{
    $this -> load -> library('form_validation');
    // field name, error message, validation rules
    $this -> form_validation -> set_rules('user_name', 'User Name', 'trim|required|min_length[4]|xss_clean');
    $this -> form_validation -> set_rules('email_address', 'Your Email', 'trim|required|valid_email', 'callback__email_check');
    $this -> form_validation -> set_rules('password', 'Password', 'trim|required|min_length[4]|max_length[32]');
    $this -> form_validation -> set_rules('con_password', 'Password Confirmation', 'trim|required|matches[password]');

    if ($this -> form_validation -> run() == FALSE) 
    {
        $this -> index();
    } 
    else 
    {
        $this -> user_model -> add_user();

        $email = $this -> input -> post('email');
        $password = $this -> input -> post('pass');            

        $result = $this -> user_model -> login($email, $password);
        if ($result)
        {
            redirect('dashboard');  
        }          
    }        
}

// Checks that Email Address is not in use
public function _email_check($str)
{
    // return true if the address is indeed a new address
    $this -> db -> where('email', $str);
    $found = $this -> db -> get('user') -> num_results(); // this returns the number of rows having the same address.

    if ($found!=0)
    {
        $this -> form_validation -> set_message('email_check', 'Email Address is already in use');
        return false;  // more than 0 rows found. the callback fails.
    }
    else
    {
        return true;   // 0 rows found. callback is ok.
    }
}

public function logout() 
{
    $newdata = array('user_id' => '', 'user_name' => '', 'user_email' => '', 'logged_in' => FALSE, );
    $this -> session -> unset_userdata($newdata);
    $this -> session -> sess_destroy();
    redirect(base_url());
}
} 
```

如果您需要，这是模型：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class User_model extends CI_Model {

public function __construct() {
    parent::__construct();
}

function login($email, $password) 
{
    $this -> db -> where("email", $email);
    $this -> db -> where("password", $password);

    $query = $this -> db -> get("user");
    if ($query -> num_rows() > 0) 
    {
        foreach ($query->result() as $rows) 
        {
            //add all data to session
            $newdata = array(
                'user_id' => $rows -> id,
                'user_name' => $rows -> username,
                'user_email' => $rows -> email,
                'logged_in' => TRUE,
            );
        }
        $this -> session -> set_userdata($newdata);
        return true;
    }
    return false;
}

public function add_user() 
{
    $data = array(
        'username' => $this -> input -> post('user_name'),
        'email' => $this -> input -> post('email_address'),
        'password' => $this -> input -> post('password'),
    );
    $this -> db -> insert('user', $data);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:03:18.250

呃...只是告诉您进行故障排除，问题是您错误地调用了回调。

```
 $this -> form_validation -> set_rules('email_address', 'Your Email', 'trim|required|valid_email|callback__email_check') 
```

# django - 如何在 django 模型中使用 pre_init

> ID：13034051
> 
> 赞同：0
> 
> 时间：2012-10-23T15:32:41.913
> 
> 标签：django, model, signals

我想将模型的 *pre_init* 排序值作为来自具有最大排序值的其他对象的增量值。我写了这样的函数：

```
@receiver(pre_init, sender=Category)
def get_order(instance, **kwargs):    
    previous = Category.objects.all().order_by('-order')[0].order
    instance.order = previous + 1 
```

但是当我运行我的管理面板时，我收到如下错误：

```
Environment:

Request Method: GET Request URL: http://127.0.0.1:8000/admin/catalog/category/add/

Django Version: 1.5 Python Version: 2.7.2 Installed Applications: ('django.contrib.auth',  'django.contrib.contenttypes',  'django.contrib.sessions',  'django.contrib.sites',  'django.contrib.messages',  'django.contrib.staticfiles',  'django.contrib.flatpages',  'django.contrib.admin',  'utils',  'menu',  'contact',  'mediamanager',  'mptt',  'catalog') Installed Middleware: ('django.contrib.sessions.middleware.SessionMiddleware',  'django.middleware.locale.LocaleMiddleware',  'django.middleware.common.CommonMiddleware',  'django.contrib.auth.middleware.AuthenticationMiddleware',  'django.contrib.messages.middleware.MessageMiddleware',  'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

Traceback: File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs) File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in wrapper
  367\.                 return self.admin_site.admin_view(view)(*args, **kwargs) File "C:\Python27\lib\site-packages\django\utils\decorators.py" in
_wrapped_view
  91\.                     response = view_func(request, *args, **kwargs) File "C:\Python27\lib\site-packages\django\views\decorators\cache.py" in
_wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs) File "C:\Python27\lib\site-packages\django\contrib\admin\sites.py" in inner
  202\.             return view(request, *args, **kwargs) File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs) File "C:\Python27\lib\site-packages\django\utils\decorators.py" in
_wrapped_view
  91\.                     response = view_func(request, *args, **kwargs) File "C:\Python27\lib\site-packages\django\utils\decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2) File "C:\Python27\lib\site-packages\django\db\transaction.py" in inner
  208\.                 return func(*args, **kwargs) File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in add_view
  971\.             form = ModelForm(initial=initial) File "C:\Python27\lib\site-packages\django\forms\models.py" in __init__
  235\.             self.instance = opts.model() File "C:\Python27\lib\site-packages\django\db\models\base.py" in __init__
  318\.         signals.pre_init.send(sender=self.__class__, args=args, kwargs=kwargs) File "C:\Python27\lib\site-packages\django\dispatch\dispatcher.py" in send
  167\.             response = receiver(signal=self, sender=sender, **named)

Exception Type: TypeError at /admin/catalog/category/add/ Exception Value: get_order() takes exactly 1 argument (0 given) 
```

有人知道如何解决吗？或者pre_init信号函数应该怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:41:06.987

[对django 文档](https://docs.djangoproject.com/en/dev/ref/signals/)的快速检查表明它`pre_init`不采用实例参数。这就是参数计数不匹配的根源。

从您的示例中，您可能需要一个`post_init`信号处理程序，它确实需要一个实例值。

# visual-studio-2012 - 如何在 VS2012 中控制 SQL Server 数据库项目的构建操作？

> ID：13034054
> 
> 赞同：0
> 
> 时间：2012-10-23T15:32:51.187
> 
> 标签：visual-studio-2012, database-project, sql-server-data-tools

我刚刚将一个包含数据库项目的解决方案从 VS2010 升级到 VS2012。升级向导引导我完成将项目转换为新的“SQL Server 数据库项目”格式的步骤。

一切正常，但是当我构建解决方案时，这个项目每次都会构建，无论是否有任何改变。除非在项目中修改了文件，否则旧的数据库项目不会构建，这是我对任何 VS 项目类型所期望的行为。

数据库项目很大，这大大减慢了开发时间。我在项目属性的构建选项卡上看不到任何可以控制它的设置。

我可以设置一个不构建数据库的新解决方案配置，但这真的是我唯一的办法吗？肯定有更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:22:26.103

我知道这是旧的，我什至不确定这是否是您想要的，但它可能与“复制到输出目录”选项有关。在旧的数据库项目中，您有“如果较新则复制”，现在它更改为“始终复制”...

干杯!

# php - php ssh 检测流结束

> ID：13034055
> 
> 赞同：2
> 
> 时间：2012-10-23T15:33:05.547
> 
> 标签：php, ssh, stream

我无法从 ssh 连接检测流的结束。这是我尝试过的：

```
<pre><?php
if (!function_exists("ssh2_connect")) die("function ssh2_connect doesn't exist");
if(!($con = ssh2_connect("localhost", 22)))
    echo "fail: unable to establish connection\n";
else
    if(!$ssh = ssh2_auth_password($con, "viassh", "sshpass")) {
        echo "fail: unable to authenticate\n";
    } 

        $sshStream = ssh2_shell($con, 'xterm', null, 80, 24, SSH2_TERM_UNIT_CHARS);
        $strCommand = 'cd /var/www/test';
        fwrite($sshStream, $strCommand . PHP_EOL);
        stream_set_blocking($sshStream, true);

        // infinite loop
        #$stderr_stream = fgets(ssh2_fetch_stream($sshStream, SSH2_STREAM_STDERR), 8192);
        #var_dump($stderr_stream);

        // infinite loop
        #var_dump(stream_get_contents($sshStream));

        $ret = "";
        while ($buf = fgets($sshStream)) {
            $ret .= $buf;

            // always false
            #$meta = stream_get_meta_data($sshStream);
            #var_dump($meta['eof']);

            // works
            if(strpos($buf, '$ cd ') !== false) break;
        }
        $strCommand = 'git status';
        fwrite($sshStream, $strCommand . PHP_EOL);
        stream_set_blocking($sshStream, true);
        while ($buf = fgets($sshStream)) {
            $ret .= $buf;
            if (strpos($buf, '-a') !== false) break;
        }
        fclose($sshStream);
        echo $ret;

?> 
```

这给了我正确的输出：

```
Welcome to Ubuntu 12.04.1 LTS (GNU/Linux 3.2.0-32-generic-pae i686)

 * Documentation:  https://help.ubuntu.com/

20 packages can be updated.
0 updates are security updates.

Last login: Tue Oct 23 16:45:20 2012 from localhost

cd /var/www/test
]0;viassh@rcdev: ~viassh@rcdev:~$ cd /var/www/test
git status
]0;viassh@rcdev: /var/www/testviassh@rcdev:/var/www/test$ git status
# On branch develop
# Changes not staged for commit:
#   (use "git add ..." to update what will be committed)
#   (use "git checkout -- ..." to discard changes in working directory)
#
#   modified:   ssh_1.php
#   modified:   ssh_1.php~
#   modified:   ssh_shell.php
#   modified:   ssh_shell.php~
#
# Untracked files:
#   (use "git add ..." to include in what will be committed)
#
#   ssh_stream1.php
#   ssh_stream1.php~
no changes added to commit (use "git add" and/or "git commit -a") 
```

但只是因为我知道流的最后一行。我尝试了 feof()，但也失败了。所以希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:44:00.697

看起来这是已知的行为。[http://php.net/manual/en/function.ssh2-shell.php](http://php.net/manual/en/function.ssh2-shell.php)

你想做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:59:05.310

似乎您可以[使用纯 PHP SSH 实现 phpseclib](http://phpseclib.sourceforge.net/)轻松做到这一点？：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec('git status');
?> 
```

也许我不明白你想做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T21:15:05.473

我知道这是一个老问题，但我想添加我的输入，因为我无法在线找到有效的代码片段。phpseclib 并不总是合适的替代品——尤其是它缺乏一种可靠的方式来按顺序执行命令。我发现 PHP 扩展更可靠，也更易于使用。

我的解决方案如下，这在我们的环境中似乎效果很好。原理很简单：要求系统在输出之前打印一条 BEGIN 消息，在输出之后打印一条 END 消息（base64 用于此，但还有很多其他方式）。该函数在返回标记之间打印到控制台的任何内容之前等待 END。

```
function executeCommand($connection, $command)
    {
        $shell = ssh2_shell($connection, 'xterm');
        sleep(1);
        stream_set_blocking($shell, true);
        printf("Running command: %s\n\n", $command);
        fwrite($shell, 'echo "LS0tLUJFR0lOLS0tLQo=" | base64 --decode;'.$command.';printf "\n";echo "LS0tLUVORC0tLS0K" | base64 --decode;'.PHP_EOL);

        $output = '';
        $output_start = false;
        while (true) {
            $buffer = fgets($shell);
            flush();
            if(strpos($buffer, "----BEGIN----") !== false) {
                $output_start = true;
                continue;
            }
            if(strpos($buffer, "----END----") !== false) {
                break;
            }

            if($output_start) {
                printf("%s\n", $buffer);
                $output .= $buffer."\n";
            }
        }
        print("Finished executing command\n");
        fclose($shell);
        print("Shell closed\n");
        return trim($output);
    } 
```

# algorithm - 这个运行时间多项式是输入大小吗？

> ID：13034058
> 
> 赞同：2
> 
> 时间：2012-10-23T15:33:12.723
> 
> 标签：algorithm, time-complexity

某个算法的输入大小为n^2+n*m。它的运行时间是 O(m*n^3)。运行时间可以被认为是输入大小的多项式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:36:11.513

是的。它运行在`O(max{n,m}^4)`，这是输入的多项式时间，小于`O(max{n^2,n*m}^2)`，这是输入大小的二次方。

注意：这假设输入是 SIZE `n^2+n*m`，而不是这个“大小”的*数字*- 因为数字可以表示为`log(n^2+n*m)`位，这只会得到一个[伪多项式](http://en.wikipedia.org/wiki/Pseudo-polynomial_time)解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:36:55.560

如果 S 中有一个多项式是 T(n,m) 的上界，则运行时间 T(n,m) 被称为输入大小 S(n,m) = n^2+n*m 的多项式.

考虑多项式 S^2(n,m) = (n^2+n*m)^2 = n^4 + 2(n^2)n*m + (n^2)(m^2)。由于 n^4 和 (n^2)(m^2) 是正整数的平方，它们是正数，所以 S^2(n,m) > 2(n^2)n*m > n^3 * m。

由于 T(n,m) 是 O(n^3 * m) 并且 S^2(n,m) > n^3 * m 我们有 T(n,m) 是 O(S^2(n,m) ) 因此运行时间受输入大小的多项式限制。

# java - JXTA 2.7 严重：无法实例化 World Peer Group。

> ID：13034061
> 
> 赞同：1
> 
> 时间：2012-10-23T15:33:19.307
> 
> 标签：java, p2p, jxta

试图运行 JXSE 2.7 的示例文件 // Connecting with OSGI, Edge_Dimitri Sending messages etc, 我得到这个错误

```
PSE Membmership Service started.
Oct 23, 2012 8:20:13 AM net.jxta.impl.peergroup.StdPeerGroup initFirst
SEVERE: Failed to make PSE membership credential 'ready for join'
Oct 23, 2012 8:20:13 AM net.jxta.peergroup.WorldPeerGroupFactory newWorldPeerGroup
SEVERE: World Peer Group could not be instantiated.

net.jxta.exception.PeerGroupException: Failed to login to this group: null. Error=0
at net.jxta.impl.peergroup.StdPeerGroup.initFirst(StdPeerGroup.java:704)
at net.jxta.impl.peergroup.Platform.initFirst(Platform.java:214)
at net.jxta.impl.peergroup.GenericPeerGroup.init(GenericPeerGroup.java:907)
at net.jxta.peergroup.WorldPeerGroupFactory.newWorldPeerGroup(WorldPeerGroupFactory.java:312)
at net.jxta.peergroup.WorldPeerGroupFactory.<init>(WorldPeerGroupFactory.java:182)
at net.jxta.peergroup.NetPeerGroupFactory.<init>(NetPeerGroupFactory.java:203)
at net.jxta.platform.NetworkManager.startNetwork(NetworkManager.java:408)
at Examples.A_JXTA_Connection_And_Local_Configuration._160_Connecting_With_OSGi.main(_160_Connecting_With_OSGi.java:66) 
```

这是我的 Java 构建路径（使用 eclipse）

![构建路径](../Images/b4aa71a4bf03e615c8bed2689af745e2.png)

任何帮助将不胜感激。谢谢

# c++ - 如何在C中获取char数组的前x个元素？提升库是否有改进的方法？

> ID：13034062
> 
> 赞同：1
> 
> 时间：2012-10-23T15:33:22.490
> 
> 标签：c++, c, arrays, boost, memcpy

我的基本任务是将缓冲区数组的一个子集放入另一个缓冲区数组中：

```
char buffer[max_len];

unit8 *pDestBuffer; 
```

我使用了这段代码，因为我想留在 ANSI-C 中：

```
memcpy(pDestBuffer, buffer, 4); 
```

但是 - 一定有问题，因为我没有得到我期望的结果。因为，当我调试缓冲区时，我看到了数组的所有*插槽*- 当我使用 pDestBuffer 执行此操作时，我只得到一个项目 - 但是我可以更改它，例如`memset(pDestBuffer,1,4)`

pDestBuffer 是结构的一部分，除了上面的定义之外，唯一对它的引用是以下几行：

```
requiredMemory = sizeof(Structure) + bufferSize;
pStructure = (Structure *)HostMalloc(requiredMemory);
pStructure->pDestBuffer = ((uint8 *)pStructure)+sizeof(Sturcture); 
```

我知道，这可能是一项相当基本的任务，我自己也在做这个，但是如果有“最佳实践”或者你知道解决方案，请与我分享。

作为一个转折点，我真的很想知道，是否有一种改进的方法，使用 boost-libraries，无论如何我都会使用它来解决其他问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:36:26.993

您的代码正在运行。仅仅因为您的调试器看不到数据并不意味着它不存在。发生的事情是你的代码说`uint8_t * pDestbuffer;`所以你的调试器认为 pDestBuffer 只是一个指向单个字节的指针，所以这就是它所显示的。但是你知道它实际上是一个指向数组的指针。

可能有一些方法可以告诉您的调试器这是一个数组，以便您可以查看所有数据。例如，我知道的一个调试器会让你输入`pStructure->pDestBuffer,4`说给我看四个字节，而不仅仅是一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:38:11.593

我认为“最佳实践”不是混合 C++ 和 C 代码。

```
#include <array>
#include <vector>
#include <algorithm>

std::array<char, len> buffer;
std::size_t n = 5;
std::vector<char> dest; // if n is dynamic
dest.reserve(n); // "performance"
std::copy(begin(buffer), buffer + n, std::back_inserter(dest));

// or even shorter
std::vector<char> dest{begin(buffer), buffer + n}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:39:17.247

boost库是C++。这是 C 还是 C++？

您在标题中说 C 并且您的代码是 C，但 C++ 确实是一种不同的语言，具有不同的写作风格。

“查看所有插槽”是什么意思？如果您指的是 Microsoft IDE，您所称的 unit8* 可能是您的意思`uint8_t *`或类似的意思，它是一个指针，它可能会将其解释为一个以空字符结尾的字符串，但更可能只是一个指针（由于它的符号）并显示它的含义指向而不是数组的开头。

# php - 循环遍历 foreach 中的第一项两次

> ID：13034064
> 
> 赞同：0
> 
> 时间：2012-10-23T15:33:31.353
> 
> 标签：php

我试图找出最干净的方法来循环遍历数组中的第一项两次。我的 foreach 看起来像这样：

```
foreach ($array as $arr) {
    $arr['item'];
} 
```

我问的原因是因为我正在循环并运行需要设置 cookie 的 curl 脚本。在第一个循环中，它没有正确设置，但在所有其他循环中。理想情况下，我想先打两次，然后覆盖我拉的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:38:53.567

如果你需要用第一个元素做两次，你可以这样做

```
$firstItem = true;
foreach ($array as $arr) {
    if ($firstItem) {
       $arr['item'];
       $arr['item'];
       $firstItem = false;
    } else {
       $arr['item'];
    }
} 
```

但与其做两次，也许你应该找出为什么它在第一次不起作用？对先前的评论 +1，您应该解决问题，但不能解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:42:59.477

如果顺序不重要：

```
 array_push($array, reset($array));
  foreach ($array as $arr) {
      ...
  } 
```

如果是这样，最好使用 Elena 的建议。

# javascript - 将当前时间增加 6 小时并显示到页面

> ID：13034067
> 
> 赞同：22
> 
> 时间：2012-10-23T15:33:40.743
> 
> 标签：javascript, time

所以，我正在尝试向图表添加一些标签，并且我想将它们添加到水平轴上的 6、12、18 和 24 小时。

我想为本地（计算机）时区以“hh:mm”格式（例如 23:10、05:10、11:10 和 17:10）编写这些时间？

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-23T15:40:45.127

基于[如何向 JavaScript 日期对象添加 30 分钟？](https://stackoverflow.com/questions/1197928/how-to-add-30-minutes-to-a-javascript-date-object)

```
var d1 = new Date ();
var d2 = new Date ( d1 );
d2.setHours ( d1.getHours() + 6 ); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)将展示如何操作 Date 对象。

添加了您的代码并进行了一些修复。编辑添加第二个document.write

```
<script type="text/javascript"> 
var timer = 24; 
var d1 = new Date(); 
var d2 = new Date();
d1.setHours(+d2.getHours()+(timer/4) ); 
d1.setMinutes(new Date().getMinutes()); 
document.write(d1.toTimeString("hh:mm"));
document.write(d1.getHours()+":"+d1.getMinutes());
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-23T15:51:27.747

试试这个

```
var today = new Date();
alert(today);
today.setHours(today.getHours()+6);
alert(today);
today.setHours(today.getHours()+6);
alert(today);
today.setHours(today.getHours()+6);
alert(today);
today.setHours(today.getHours()+6);
alert(today); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T15:44:55.607

```
var MILLISECS_PER_HOUR = 60 /* min/hour */ * 60 /* sec/min */ * 1000 /* ms/s */;

function sixHoursLater(d) {
  return new Date(+d + 6*MILLISECS_PER_HOUR);
} 
```

日期的数值是每个纪元的毫秒数，因此您只需向其添加毫秒数即可获得更新的数值。

前缀运算符将`+`日期转换为其数值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T15:51:35.457

这有帮助吗？

```
function getDateString(addT){
    var time = new Date();
    time.setHours(time.getHours() + addT );
    return ((time.getHours()<10)?"0":"")+time.getHours() + ':' + time.getMinutes();
} 
```

然后就直接用它在图表上弹出你想要的数据了吗？

IE：

```
for (i=0;i<=24;i+=6){
    yourbox.innerHTML = '<p>'+getDateString(i)+'</p>'; 
} 
```

或类似的东西；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-03T08:17:24.880

我喜欢这样做

```
new Date(new Date().setHours(new Date().getHours() + 6)) 
```

或者

```
new Date(new Date().setHours(new Date().getHours() + 6)).toString() 
```

# ruby-on-rails - 用同名文件更新回形针附件

> ID：13034068
> 
> 赞同：0
> 
> 时间：2012-10-23T15:33:41.540
> 
> 标签：ruby-on-rails, paperclip

我有一个带有回形针附件的模型。当我尝试使用另一个图像更新模型时，一切正常，除非新文件与旧文件具有相同的名称。

我猜回形针不明白这是一个新文件，即使文件名相同。

你有想法让它发挥作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T05:46:59.900

接受的答案确实有效。然而; 我不喜欢它与特定领域的联系，实际上有很多地方我需要这个功能。在大多数情况下，以下问题应该有效（它假设您没有任何在其名称中使用 file_name 的非回形针列）。

```
module AttachmentUpdatable
  extend ActiveSupport::Concern

  included do
    before_save :check_for_and_save_images
  end

  def check_for_and_save_images
    return if self.new_record?
    self.changed_attributes.each do |attr|
      attr_name = attr[0].to_s
      next unless attr_name.include?('file_name') # Yes, this is an assumption
      image_col = attr_name.gsub('_file_name','')
      self.send(image_col).save
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:28:27.473

我无法找到一个优雅的解决方案，但这是我如何让它工作的：

在你的模型上有一个 attr_accessor 布尔标志，当 true 调用 Paperclip 保存方法来强制更新。

```
class MyModel < ActiveRecord::Base
   # paperclip attachment
   has_attached_file :image, { ... }

   attr_accessor :creative_uploaded

   before_save :upload_new_creative_if_necessary

   private

   def upload_new_creative_if_necessary
     if creative_uploaded
       # force update of the creative
       image.save
     end
   end
end 
```

在我的控制器中，当一个文件出现一个帖子时，我设置了该标志：

```
@my_instance = MyModel.new( params[:my_model] )
@my_instance.creative_uploaded if params[:my_model][:image]

# ActiveRecord save/handle validations logic as normal 
```

# java - struts 动作测试中的文件上传问题

> ID：13034078
> 
> 赞同：1
> 
> 时间：2012-10-23T15:34:03.953
> 
> 标签：java, servlets, junit, struts, apache-poi

我想对处理从 Web 表单上传的 Excel 工作表的 struts 操作设置单元测试。我选择了**strutstest**库并将其与**cactus**框架一起使用。Cactus 本身没有多部分请求选项。所以我又使用了一个库，并从仙人掌网站推荐了解决方法。

```
public class ActionTest extends CactusStrutsTestCase {

NVPair[] hdrs = new NVPair[1];
    //this method prepares request
public void beginFileUpload(WebRequest req) {
    NVPair[] opts = { new NVPair("MAX_FILE_SIZE", "20485760") };
    NVPair[] file = { new NVPair("myFile", "D://temp//TEST.xls") };     
    try {
        byte[] data = Codecs.mpFormDataEncode(opts, file, hdrs);
        InputStream i = new ByteArrayInputStream(data);
        req.setUserData(i);
        req.setContentType(hdrs[0].getValue());
        i.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

这里*NVPair*和*Codecs*是推荐库中的类。当文件数据传递到服务器端的 apache POI 框架时，出现以下异常：

```
POIFSFileSystem poifs = new POIFSFileSystem(istTest);
...
java.io.IOException: Invalid header signature; read 0xC8001A0031006C00, expected 0xE11AB1A1E011CFD0 
```

据我了解，文件数据已损坏，因为多部分请求未正确编码。我使用的文件格式很好。我使用**apache commons httpclient**库以不同的方式对其进行了测试：

```
 HttpClient httpclient = new DefaultHttpClient();
   try {
       HttpPost httppost = new HttpPost("http://localhost:9080" +
               "/retrieveData.do?background=yes");

       FileBody bin = new FileBody(new File("D://temp//TEST.xls"));

       //MultipartEntity reqEntity = new MultipartEntity(); this no param constructor also leads to exception 
       MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, "47436622^%2824349", Charset.forName("ISO-8859-1"));
       reqEntity.addPart("bin", bin);
       httppost.setEntity(reqEntity);

       HttpResponse response = httpclient.execute(httppost);
       HttpEntity resEntity = response.getEntity();

       if (resEntity != null) {
           System.out.println("Response content length: " + resEntity.getContentLength());
       }
       EntityUtils.consume(resEntity);
   } finally {
       try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
   } 
```

但是这种方法测试连接。我需要利用仙人掌来评估动作执行结果。任何建议表示赞赏！

# objective-c - 将地图缩放级别与按钮缩放同步

> ID：13034079
> 
> 赞同：0
> 
> 时间：2012-10-23T15:34:07.550
> 
> 标签：objective-c, ios, mapkit

我在地图视图上有一个 MapView 和一个步进按钮，用于放大和缩小，但是当/如果用户使用捏合缩放来放大和缩小地图时，问题就出现了，它与缩放按钮不同步所以在某些情况下，用户可能会按下放大/缩小，地图不会做任何事情。

我如何跟踪地图缩放的位置，以便按钮不会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:51:11.863

您可以使用此 MKMapView 类别：[https ://github.com/jdp-global/MKMapViewZoom](https://github.com/jdp-global/MKMapViewZoom)

# php - 在我的 linux 服务器中，我得到一个 php 错误，但我看不到错误，为什么？

> ID：13034080
> 
> 赞同：0
> 
> 时间：2012-10-23T15:34:12.037
> 
> 标签：php, linux, apache, yii, phpexcel

我的 php 代码（这是一个导出 pdf 和 excel 功能，我正在使用 Yii 框架）在我的本地机器上运行良好。但是当我把代码放在linux服务器上时，我得到了一个错误。我用echo一步步调试，最后发现这一步失败了。$objWriter->save('php://output'); （使用 PHPExcel）。

但我无法看到它是什么错误。

我设置了 display_errors = On，还设置了 error_log。但我仍然无法看到错误信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:35:56.953

确保你有这些设置：

```
error_reporting(E_ALL); // or possibly: E_ALL & ~E_NOTICE
ini_set('display_errors', TRUE);
ini_set('scream.enabled', TRUE); // this overrides the @ operator 
```

如果您希望任何错误停止脚本的执行，请定义一个错误处理函数：

```
function my_error_handler($errno, $errstr, $errfile, $errline, $errcontext) {
    file_put_contents(
        'custom_log_file.log',
        '#'.$errno.' '.$errfile.':'.$errline.' '.$errstr
    );
    // throw new Exception('#'.$errno.' '.$errfile.':'.$errline.' '.$errstr);
    die('#'.$errno.' '.$errfile.':'.$errline.' '.$errstr);
}
set_error_handler('my_error_handler'); 
```

如果您选择从错误处理程序函数中抛出异常（您很可能不会期望捕获它们——它们只是为了调试目的），您可以设置一个异常处理程序。

```
function my_exception_handler() {
     // here you code some nice visuals for your error handling
}
set_exception_handler('my_exception_handler'); 
```

在这两种情况下，您都可以`var_dump(debug_backtrace());`查看发生错误的数据上下文。

如果 PHP 文件是第一次访问的（即它的 URL 在浏览器的地址栏中）并且其中包含语法错误，则无错误报告机制会显示该错误。

您可以使用 linux CLI`php -l filename.php`检查文件中的语法错误。或者您可以创建另一个文件 x.php，其中仅包含一个包含到`filename.php`.

# sql - sql查询通过表值“迭代”和“连接”

> ID：13034082
> 
> 赞同：0
> 
> 时间：2012-10-23T15:34:22.840
> 
> 标签：sql, sql-update, loops, foxpro

我有一张这样的桌子

```
name    group        id

john    employee     1
joe     intern       i1
smith   intern       i2 
```

我想知道是否有一种 sql 技术可以让我将具有相同组类型的行分组以具有如下内容：

```
name               group        id

john               employee     1
joe, smith         intern       i1,i2 
```

我正在寻找纯 sql 中的查询/解决方案，没有专有 sql（例如 sql server、oracle ...） 我不是 sql 专家，所以请原谅我的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:10:53.897

要在 FoxPro 中做到这一点，您必须将 SQL 代码与 Xbase 代码结合起来。没有仅 SQL 的解决方案。

# asp.net-mvc-4 - MVC4 的 DotNetOpenAuth TwitterClient 示例不尊重先前的登录

> ID：13034084
> 
> 赞同：4
> 
> 时间：2012-10-23T15:34:26.813
> 
> 标签：asp.net-mvc-4, twitter-oauth, dotnetopenauth

如果我使用模板创建 ASP.NET MVC 4 Web 应用程序`Internet Application`，它会预先安装使用一系列 OAuth 和 OpenID 提供程序实现身份验证所需的所有组件和配置。只需添加我的 Twitter 消费者密钥和密码即可`AuthConfig.cs`通过 Twitter 激活身份验证。

但是，它似乎没有像我预期的那样工作。

如果我尝试使用 Twitter 进行身份验证，它总是会显示一个 Twitter 登录页面，无论我是否已经登录到 Twitter。它还会让我退出 Twitter，因此我必须在下次浏览器访问 Twitter 时重新进行身份验证。

这是一个错误，还是需要一些额外的配置才能将其转换为更常见的无缝工作流程（这对于像谷歌这样的其他提供商来说可以正常工作）？

提前致谢。

蒂姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T14:24:26.373

万一其他人遇到这个问题，我将在这里展示我的发现（以及一个相当丑陋的解决方法）。

使用 Fiddler 检查`DotNetOpenAuth`和 Twitter 之间的 HTTP 流量，很明显身份验证请求包含`force_login=false`querystring 参数，这表明 DNOA 工作正常。但是，如果我使用 Fiddler 的脚本功能来修改出站请求并`force_login`完全删除参数，那么一切都会开始正常工作。我猜测 Twitter 的实现在这里有问题，将任何`force_login`参数的存在视为等效于`force_login=true`.

由于我不认为 Twitter 可以修改其 API 的行为，因此我调查了是否有更易于访问的解决方案。

查看DNOA代码，我看到该`force_login=false`方法无条件地将参数添加到HTTP请求中`DotNetOpenAuthWebConsumer.RequestAuthentication()`（随后`true`在需要时修改）。

因此，理想的解决方案是让 DNOA 对其身份验证请求参数提供更细粒度的控制，并`TwitterClient`明确删除该`force_login=false`参数。不幸的是，当前的 DNOA 代码库并不直接支持这一点，但可以通过创建两个自定义类来达到相同的效果。

第一个是自定义实现，`IOAuthWebWorker`它是原始`DotNetOpenAuthWebConsumer`类的直接副本，除了将重定向参数字典初始化为空字典的单行更改：

```
using System;
using System.Collections.Generic;
using System.Net;
using DotNetOpenAuth.AspNet.Clients;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth;
using DotNetOpenAuth.OAuth.ChannelElements;
using DotNetOpenAuth.OAuth.Messages;

namespace CustomDotNetOpenAuth
{
    public class CustomDotNetOpenAuthWebConsumer : IOAuthWebWorker, IDisposable
    {
        private readonly WebConsumer _webConsumer;

        public CustomDotNetOpenAuthWebConsumer(ServiceProviderDescription serviceDescription, IConsumerTokenManager tokenManager)
        {
            if (serviceDescription == null) throw new ArgumentNullException("serviceDescription");
            if (tokenManager == null) throw new ArgumentNullException("tokenManager");

            _webConsumer = new WebConsumer(serviceDescription, tokenManager);
        }

        public HttpWebRequest PrepareAuthorizedRequest(MessageReceivingEndpoint profileEndpoint, string accessToken)
        {
            return _webConsumer.PrepareAuthorizedRequest(profileEndpoint, accessToken);
        }

        public AuthorizedTokenResponse ProcessUserAuthorization()
        {
            return _webConsumer.ProcessUserAuthorization();
        }

        public void RequestAuthentication(Uri callback)
        {
            var redirectParameters = new Dictionary<string, string>();
            var request = _webConsumer.PrepareRequestUserAuthorization(callback, null, redirectParameters);

            _webConsumer.Channel.PrepareResponse(request).Send();
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing)
            {
                _webConsumer.Dispose();
            }
        }
    }
} 
```

另一个要求是`OAuthClient`基于原始类的自定义`TwitterClient`类。请注意，这需要比原始`TwitterClient`类更多的代码，因为它还需要复制 DNOA 基类或其他实用程序类内部的几个方法：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Xml;
using System.Xml.Linq;
using DotNetOpenAuth.AspNet;
using DotNetOpenAuth.AspNet.Clients;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth;
using DotNetOpenAuth.OAuth.ChannelElements;
using DotNetOpenAuth.OAuth.Messages;

namespace CustomDotNetOpenAuth
{
    public class CustomTwitterClient : OAuthClient
    {
        private static readonly string[] UriRfc3986CharsToEscape = new[] { "!", "*", "'", "(", ")" };

        public static readonly ServiceProviderDescription TwitterServiceDescription = new ServiceProviderDescription
        {
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/request_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/authenticate", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://api.twitter.com/oauth/access_token", HttpDeliveryMethods.GetRequest | HttpDeliveryMethods.AuthorizationHeaderRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
        };

        public CustomTwitterClient(string consumerKey, string consumerSecret)
            : this(consumerKey, consumerSecret, new AuthenticationOnlyCookieOAuthTokenManager())
        {
        }

        public CustomTwitterClient(string consumerKey, string consumerSecret, IOAuthTokenManager tokenManager)
            : base("twitter", new CustomDotNetOpenAuthWebConsumer(TwitterServiceDescription, new SimpleConsumerTokenManager(consumerKey, consumerSecret, tokenManager)))
        {
        }

        protected override AuthenticationResult VerifyAuthenticationCore(AuthorizedTokenResponse response)
        {
            var accessToken = response.AccessToken;
            var userId = response.ExtraData["user_id"];
            var userName = response.ExtraData["screen_name"];

            var profileRequestUrl = new Uri("https://api.twitter.com/1/users/show.xml?user_id=" + EscapeUriDataStringRfc3986(userId));
            var profileEndpoint = new MessageReceivingEndpoint(profileRequestUrl, HttpDeliveryMethods.GetRequest);
            var request = WebWorker.PrepareAuthorizedRequest(profileEndpoint, accessToken);

            var extraData = new Dictionary<string, string> { { "accesstoken", accessToken } };

            try
            {
                using (var profileResponse = request.GetResponse())
                {
                    using (var responseStream = profileResponse.GetResponseStream())
                    {
                        var document = xLoadXDocumentFromStream(responseStream);

                        AddDataIfNotEmpty(extraData, document, "name");
                        AddDataIfNotEmpty(extraData, document, "location");
                        AddDataIfNotEmpty(extraData, document, "description");
                        AddDataIfNotEmpty(extraData, document, "url");
                    }
                }
            }
            catch
            {
                // At this point, the authentication is already successful. Here we are just trying to get additional data if we can. If it fails, no problem.
            }

            return new AuthenticationResult(true, ProviderName, userId, userName, extraData);
        }

        private static XDocument xLoadXDocumentFromStream(Stream stream)
        {
            const int maxChars = 0x10000; // 64k

            var settings = new XmlReaderSettings
                {
                MaxCharactersInDocument = maxChars
            };

            return XDocument.Load(XmlReader.Create(stream, settings));
        }

        private static void AddDataIfNotEmpty(Dictionary<string, string> dictionary, XDocument document, string elementName)
        {
            var element = document.Root.Element(elementName);

            if (element != null)
            {
                AddItemIfNotEmpty(dictionary, elementName, element.Value);
            }
        }

        private static void AddItemIfNotEmpty(IDictionary<string, string> dictionary, string key, string value)
        {
            if (key == null)
            {
                throw new ArgumentNullException("key");
            }

            if (!string.IsNullOrEmpty(value))
            {
                dictionary[key] = value;
            }
        }

        private static string EscapeUriDataStringRfc3986(string value)
        {
            var escaped = new StringBuilder(Uri.EscapeDataString(value));

            for (var i = 0; i < UriRfc3986CharsToEscape.Length; i++)
            {
                escaped.Replace(UriRfc3986CharsToEscape[i], Uri.HexEscape(UriRfc3986CharsToEscape[i][0]));
            }

            return escaped.ToString();
        }
    }
} 
```

创建了这两个自定义类后，实现只需`CustomTwitterClient`在 MVC4`AuthConfig.cs`文件中注册新类的实例：

```
OAuthWebSecurity.RegisterClient(new CustomTwitterClient("myTwitterApiKey", "myTwitterApiSecret")); 
```

# linux - 有没有办法从源代码中找到包安装中使用的编译选项？

> ID：13034087
> 
> 赞同：1
> 
> 时间：2012-10-23T15:34:35.580
> 
> 标签：linux, package, configure, installation

不久前我从源代码构建了这个包，我需要知道我使用的选项。

我仍然有我运行的目录`./configure`，它没有受到影响。

有没有办法得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:40:30.807

您可能想`config.log`在您运行的目录中搜索`configure`。

您很有可能会在`./configure`其中找到传递给的参数。

# sharepoint - SharePoint 2010 子集列表

> ID：13034095
> 
> 赞同：0
> 
> 时间：2012-10-23T15:34:55.820
> 
> 标签：sharepoint, sharepoint-2010

我在 SharePoint 中有一个包含许多贡献者的长列表，我希望能够通过搜索一个简短的 ID 列表来编辑项目。例如，我的 ID 为 1-1000，我想编辑（在数据表中）项目 1,4,35,36,37,88,497,512,800。有没有办法进行这种过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:22:18.877

如果更容易，您可以将列表与 Excel 文件链接并在 Excel 中进行过滤。否则，可以编写自定义代码，但不是开箱即用。

# python - Mac OS X 上的 libusb -“ValueError：没有可用的后端”

> ID：13034096
> 
> 赞同：4
> 
> 时间：2012-10-23T15:34:57.727
> 
> 标签：python, python-2.7, osx-mountain-lion, libusb, pyusb

我正在运行带有 python 2.7 的 Mac OS X 10.8。我用 MacPorts 安装了 libusb，它确实有效（测试了我的导入 usb.core 和 usb.util）。但是，每次我尝试访问设备时，都会出现以下错误：

```
>>> dev=usb.core.find(idVendor=0x1d50, idProduct=0x6048)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Library/Python/2.7/site-packages/usb/core.py", line 829, in find
raise ValueError('No backend available')
ValueError: No backend available 
```

我已经尝试了其他几件事，例如`import usb.backend`，但我不确定那应该做什么。同样的结果，经过3天的工作。

提前感谢您的帮助！

编辑：这实际上已经改变了。我不确定我修改了哪个文件以及如何修改，但现在以下工作：

```
>>> import usb
>>> usb.core.find(idVendor=0x1d50, idProduct=0x6048)
<usb.core.Device object at 0x10eb2f2d0> 
```

但是，现在当我运行时`sudo rfcat -r`（这是让 libusb 正常工作的真正目的），我仍然会收到以下错误消息：

```
Error in resetup():ValueError('No backend available',) 
```

编辑：似乎问题出在 ipython 上。当我以 root 身份启动 ipython 并导入 usb 时，我无法找到我的设备：

```
In [1]: import usb

In [2]: import usb.util

In [3]: import usb.core

In [4]: usb.core.find(idVendor=0x1d50, idProduct=0x6048)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-7884198c46c2> in <module>()
----> 1 usb.core.find(idVendor=0x1d50, idProduct=0x6048)

/Library/Python/2.7/site-packages/usb/core.pyc in find(find_all, backend, custom_match, **args)
    827                 break
    828         else:
--> 829             raise ValueError('No backend available')
    830 
    831     k, v = args.keys(), args.values()

ValueError: No backend available

In [5]: 
```

编辑：天哪，再一次。如果我启动 python，则运行以下命令：

```
>>> from IPython.frontend.terminal.ipapp import launch_new_instance
>>> launch_new_instance() 
```

我得到一个 ipython 提示。当我在其中导入 USB 并找到我的设备时，没有后端错误。

如果我在 python 中导入 usb，然后执行上面的这些命令以获取 ipython 提示，然后找到我的设备，我会收到“name 'usb' not defined”错误。然后，我导入usb并找到我的设备，然后没有错误。

在这一点上，我非常困惑。上面的命令正是 /usr/local/bin/ipython 包含的内容，所以我应该得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:28:40.677

我已经解决了这个问题。显然，rfcat 和 ipython 二进制文件都指向了错误的 python 二进制文件——而不是 /opt/local/bin/python。在vim中改变了它，一切都运行良好。

现在，问题是 libusb 似乎无法很好地控制设备 - 它无法执行最基本的命令，但这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-07T08:20:49.347

MacPorts 将 libusb 安装在`/opt/local`. 看起来您正在使用安装的 ipython `/usr/local`，我猜它不是通过 MacPorts 安装的。

`/usr/local/bin/ipython`可能会在 MacPorts 安装的位置`/usr/local/include/`而不是在其中查找 libusb 库。`/opt/local/include/`

您可以通过 MacPorts 安装 iPython，因为它可以在 /opt/local 下查找也使用 MacPorts 安装的库，或者正如@Slava 回答的那样，您可以修改 rfcat 和 ipython 以指向`/opt/local/`

# jquery - Jquery esc hide方法不隐藏元素

> ID：13034097
> 
> 赞同：0
> 
> 时间：2012-10-23T15:34:59.073
> 
> 标签：jquery, dom, hide

我正在制作一个灯箱画廊，但这段代码并没有隐藏当我按下*esc*键`div`时应该隐藏的灯箱。

 *```
$(document).keyup(function(e) {
    if(e.keyCode==27) {
        $("#lightbox").hide();
    }
}); 
```

我有这样的 DOM 元素：

```
<div id="lightbox">
    <div id="overlay">
        <div id="imageholder">
            <img name="lightboximage" src="images/demo/940x340.gif" height="600" width="700" align="left" />
            <div id="description">
                <h1><a href="url/cyberkiller.nishchal">Nishchal Gautam</a></h1>
                <p>Description about the image</p>
            </div>
        </div>
    </div>
</div> 
```

我已将脚本放在这些元素下方，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:39:05.033

尝试使用**keypress**事件而不是**keyup** ..

```
$(document).on('keypress' , function(e) {
   var code = (e.keyCode ? e.keyCode : e.which);

   if(code ==27){
      $("#lightbox").hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:52:29.637

您应该简单地使用 e.which，因为并非所有浏览器都支持键码

```
$(document).keyup(function(e) {
  if(e.which==27)
  {
    $("#lightbox").hide();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:47:47.763

它在我的Firefox中运行良好，当我按ESC时，它会隐藏。你在用火狐吗？也许它不适用于其他浏览器。为了兼容性，您最好将其更改为此：

```
$(document).keyup(function(e) {
    var key = e.keyCode || e.which || e.charCode;
    if(key==27)
        $("#lightbox").hide();
}): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:53:25.860

某些键（如 enter、tab、箭头键、Esc 等）需要使用 keypress 事件捕获，因此您最好使用 keypress 事件。

```
$(document).keypress(function(e){
    var key = (e.keyCode ? e.keyCode : e.which);
    if(key ==27){
        $("#lightbox").hide();
    }
}); 
```*

# validation - 在工具提示中显示 Validation.Errors 不起作用

> ID：13034098
> 
> 赞同：0
> 
> 时间：2012-10-23T15:35:04.267
> 
> 标签：validation, datagrid, tooltip, datagridtemplatecolumn

我试图在我的 DataGrid 单元格的工具提示中显示 Validation.error 消息，但没有成功。这是相关列的代码。如果我做错了什么，请告诉我。我确实从[本教程中得到了转换器的想法](http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-validation-rules)

```
 <DataGridTemplateColumn Width="200" Header="Numéro Chassis" >
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding NumeroChassis}">
                                    </TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox ToolTip="{Binding Path=(Validation.Errors),
                             Converter={StaticResource eToMConverter}}">
                                        <TextBox.Text>
                                            <Binding Path="NumeroChassis" >
                                                <Binding.ValidationRules>
                                                    <inf:NoNullValidationRule/>
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>
                                    </TextBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:06:22.250

我确实与 RelativeSource 合作过，它工作得很好，只是替换：

```
<TextBox ToolTip="{Binding Path=(Validation.Errors),
                             Converter={StaticResource eToMConverter}}"> 
```

和 ：
`<TextBox ToolTip="{Binding Path=(Validation.Errors), RelativeSource={RelativeSource Self},Converter={StaticResource eToMConverter}}">`

# routes - 在使用 @Html() 加载的代码中播放 2.0 @routes.Assets.at

> ID：13034100
> 
> 赞同：0
> 
> 时间：2012-10-23T15:35:16.373
> 
> 标签：routes, playframework-2.0, eval, assets

我正在填充一个模型（页面），其中一个字符串属性（内容）包含 Scala 模板代码：

```
<img src="@routes.Assets.at("images/image.gif")" alt="alt text" /> 
```

在我的 Scala 模板中，我传入了模型：

```
@(page: models.Page)
@Html(page.getContent()) 
```

正如预期的那样，@routes.Assets.at 没有解析为资产路径。

1.  Play 2.0 中是否有 eval() 类型的实用程序函数来实现此目的？
2.  或者，我可以从控制器内部导出资产路由表示的实际路径吗？然后我将随后执行字符串替换

编辑 - 提供更多上下文：

控制器代码：

```
ObjectMapper mapper = new ObjectMapper();
Page page = new Page();
// TODO: request().uri() mapping to json resource
File x = Play.current().getFile("/content/index.json");
try {
    page = mapper.readValue(x, Page.class);
} catch (JsonParseException e) {
    e.printStackTrace();
} catch (JsonMappingException e) {
    e.printStackTrace();
} catch (IOException e) {
    return notFound();
} 
```

型号代码：

```
public void setContent(String content) {
    // TODO: replace to resolve assets route
    this.content = StringEscapeUtils.unescapeHtml4(content);
} 
```

感谢任何解决方案或对方法的评论。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:51:03.850

你应该意识到一件基本的事情：你**根本不需要**使用`@routes.Assets.at()`它——它只是一个助手，但没有特殊意义。因此，只需将已解析的路径放入您的代码中：

```
 <img src="/assets/images/image.gif" alt="alt text" /> 
```

如果您真的非常想保持动态路径在代码中使用自己的标记的可能性，您可以轻松地替换`replace()`方法：

```
 <img src="###ASSETS_FOLDER###/images/image.gif" alt="alt text" /> 
```

（当然这是默认位置，如果您有其他位置，请更改它）

# c# - 即使我以管理员身份运行应用程序，也拒绝访问路径？

> ID：13034105
> 
> 赞同：1
> 
> 时间：2012-10-23T15:35:30.297
> 
> 标签：c#, .net

在下面的代码中，我试图从正在运行的应用程序中提取一个 dll 文件并将其保存到 System32 目录：

```
 using System;
  using System.Collections.Generic;
  using System.Text;
  using System.IO;
  using System.Diagnostics;
  using Microsoft.VisualBasic;
  using System.Security.Cryptography;
  using System.Runtime.InteropServices;
  using System.Reflection;
  using System.Windows.Forms;

   namespace ConsoleApplication1
 {
class Program
{

    public static void ExtractSaveResource(String filename, String location)
    {
        //  Assembly assembly = Assembly.GetExecutingAssembly();
        Assembly a = Assembly.GetExecutingAssembly();
        // Stream stream = assembly.GetManifestResourceStream("Installer.Properties.mydll.dll"); // or whatever 
        // string my_namespace = a.GetName().Name.ToString();
        Stream resFilestream = a.GetManifestResourceStream(filename);
        if (resFilestream != null)
        {
            try
            {
                BinaryReader br = new BinaryReader(resFilestream);
                FileStream fs = new FileStream(location, FileMode.Create); // say 
                BinaryWriter bw = new BinaryWriter(fs);
                byte[] ba = new byte[resFilestream.Length];
                resFilestream.Read(ba, 0, ba.Length);
                bw.Write(ba);
                br.Close();
                bw.Close();
                resFilestream.Close();
            }
            catch (Exception E) { MessageBox.Show(E.Message); }
        }
        // this.Close(); 

    }

    static void Main(string[] args)
    {
        string systemDir = Environment.SystemDirectory;
        ExtractSaveResource("MySql.Data.dll",systemDir);

    }
}
} 
```

异常消息：

```
Access to the path C:\Windows\System32 is denied 
```

我试图将文件复制到其他目录，如 D:\ 或 X:\ 但我总是收到此异常消息
如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:41:53.383

您正在使用`Environment.SystemDirectory`，这就是它试图在那里保存的原因。但是，即使您在管理员用户下运行，某些系统文件夹也会受到保护。system32 文件夹就是其中之一。您必须暂时关闭 UAC 才能以编程方式将某些内容保存在那里，这并不是一件好事。

我强烈建议您找到一种不同/更好的方法来做到这一点。

# javascript - Internet Explorer (IE) 不请求外部 JavaScript 和 CSS

> ID：13034106
> 
> 赞同：2
> 
> 时间：2012-10-23T15:35:37.233
> 
> 标签：javascript, html, css

我在网页中包含了几个外部 JavaScript 文件。这些 JavaScript 在除 IE 之外的所有浏览器上都运行良好。在 IE 上，这两个文件不包含在网页中。即使在 F12 开发人员工具的“网络”部分，它现在也显示对两个外部 javascript 文件的请求。另外，我在页面上包含了两个外部 CSS 文件。这些 CSS 文件也没有收到任何请求。

可能是什么问题呢？

页面：[http](http://shapco.plus.printsites.com/templates-download.html) ://shapco.plus.printsites.com/templates-download.html 外部 JavaScript 文件：

```
<script type="text/javascript" src="http://templates.kliqprint.us/js/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="http://templates.kliqprint.us/js/templates.js"></script> 
```

外部 CSS 文件：

```
<link href="http://templates.kliqprint.us/css/colorbox.css" rel="stylesheet" />
<link href="http://templates.kliqprint.us/css/style.css" rel="stylesheet" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:24:50.163

您的 doctype 是 xhtml strict ，它不允许在 head 标记之外进行 css 声明。

也许您应该首先努力使您的文档 xhtml-strict 有效

```
 Result: 18 erreurs / 0 avertissements

    line 73 column 79 - Erreur: there is no attribute "onKeyPress"
    line 79 column 29 - Erreur: an attribute value specification must be an attribute value literal unless SHORTTAG YES is specified
    line 80 column 7 - Erreur: document type does not allow element "tr" here
    line 81 column 20 - Erreur: an attribute value specification must be an attribute value literal unless SHORTTAG YES is specified
    line 83 column 7 - Erreur: end tag for "tr" omitted, but OMITTAG NO was specified
    line 78 column 4 - Info: start tag was here
    line 111 column 216 - Erreur: required attribute "alt" not specified
    line 113 column 9 - Erreur: ID "_mcePaste" already defined
    line 112 column 9 - Info: ID "_mcePaste" first defined here
    line 114 column 9 - Erreur: ID "_mcePaste" already defined
    line 112 column 9 - Info: ID "_mcePaste" first defined here
    line 115 column 9 - Erreur: ID "_mcePaste" already defined
    line 112 column 9 - Info: ID "_mcePaste" first defined here
    line 116 column 9 - Erreur: ID "_mcePaste" already defined
    line 112 column 9 - Info: ID "_mcePaste" first defined here
    line 450 column 17 - Erreur: end tag for "br" omitted, but OMITTAG NO was specified
    line 450 column 8 - Info: start tag was here
    line 453 column 78 - Erreur: document type does not allow element "link" here
    line 454 column 75 - Erreur: document type does not allow element "link" here
    line 458 column 61 - Erreur: document type does not allow element "hr" here; missing one of "object", "applet", "map", "iframe", "button", "ins", "del" start-tag
    line 464 column 42 - Erreur: end tag for "select" which is not finished
    line 473 column 15 - Erreur: end tag for "br" omitted, but OMITTAG NO was specified
    line 473 column 6 - Info: start tag was here
    line 485 column 9 - Erreur: end tag for "br" omitted, but OMITTAG NO was specified
    line 485 - Info: start tag was here
    line 491 column 15 - Erreur: end tag for "div" omitted, but OMITTAG NO was specified
    line 40 - Info: start tag was here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:36:49.177

如果不是拼写错误，则您的第二个`<script>`元素是一个短的结束标签。那绝对行不通。

也可能正因为如此，以下`<link>`元素没有正确加载。

如果这没有帮助，`<link>`则元素不需要结束标记。只是跳过`/`那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:11:10.267

我唯一可以调试的是

`<script type="text/javascript" src="http://templates.kliqprint.us/js/jquery.colorbox-min.js"></script> <script type="text/javascript" src="http://templates.kliqprint.us/js/templates.js"></script><script type="text/javascript"> //Google Analytics </script>`

在正文部分

![在此处输入图像描述](../Images/7df70183015c2bd550aed5ae06e911ca.png)

**你可以修剪它并将其带到标题中吗？当我获取原始 HTML 并复制粘贴到这里时，我得到的屏幕。**

![在此处输入图像描述](../Images/c7bbde02e2dc53956b5df4dab23c810a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:39:28.080

*   您的文档类型错误，请使用`<!doctype html>`
*   你错过了一个结束`</div>`。
    在之前插入一个`</body>`，这应该可以使您的页面正常工作，尽管我没有检查它的关闭位置

我相当确定第二个问题是破坏 IE 的问题，第一个问题可能可以避免。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:12:20.757

该页面有一些 XML 代码，这会在 IE 上产生问题。删除这些 XML 代码后，效果很好。

# objective-c - 未找到读取字典元素的预期方法

> ID：13034110
> 
> 赞同：2
> 
> 时间：2012-10-23T15:35:57.273
> 
> 标签：objective-c, cocoa

我正在更新我的 mac 应用程序以开始通过 xcode 使用 arc 和现代 obj-c 语法来测试它，但是我完成了 obj-c 语法我在构建项目时开始收到此错误。

**在“NSMutableData *”类型的对象上找不到读取字典元素的预期方法**

```
-(void) finishedCall:(id)data {

     NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

     receivedData = [responseString JSONValue];

    NSLog(@"receivedData-->%@",receivedData);

    NSString *serailizeString = receivedData[@"profile_image_url"];  // <-- Error comes up here

    NSLog (@"Serialize Value : %@",serailizeString);

     [qrcodeMainPage genQR:serailizeString];

} 
```

关于从哪里开始的任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:19:15.327

您正在使用新的键控下标语法来尝试访问（编译器认为的）NSData 对象中的某些内容，如错误所示，该对象不起作用。大概您期望 receivedData 成为字典？如果它在运行时确实是一个 NSDictionary，你应该这样声明它。我不知道`-JSONValue`您调用的方法是要返回什么，所以我不能确定 receivedData 是什么或可能是什么。如果它可能是字典，也可能不是字典，您需要编写更多代码来检查其类型和行为是否正确。在任何情况下，该`dictionary[key]`表示法仅适用于作为支持键控下标的类的实例的对象。NSDictionary 就是这些类之一。NSData 不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:45:46.717

您是否缺少包含 JSON 扩展方法的 JSON 类别？

```
http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html 
```

# excel - 用空白单元格上的数据填充一列

> ID：13034114
> 
> 赞同：1
> 
> 时间：2012-10-23T15:36:16.563
> 
> 标签：excel, vba

如何使用VBA从即sheet2复制数据，在sheet1的空白单元格上填充一个范围（1列）

即在 sheet1（-blankcell- = 空白）

```
-blankcell-  
-blankcell-  
-blankcell-
ahjefe
-blankcell-
-blankcell-
23234
***fg4
-blankcell-
8569
-blankcell- 
```

在 sheet2（要在 sheet1 空白单元格上使用的数据）

```
aaa
bbb
ccc 
```

表 1 的 END 结果

```
aaa
bbb
ccc
ahjefe
aaa
bbb
23234
ccc
aaa
8569
bbb <- stopped at before last blank row 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:49:07.993

我有一些空闲时间，所以我在下面为您编写了这段代码。但是，最好在提出问题时始终表现出您的努力。通常人们不只是为你编写代码。

```
Sub FillBlanks()

Dim wks1 As Worksheet, wks2 As Worksheet

Set wks1 = Sheets(1) 'change to your needs; could also be Sheets("Sheet1") format
Set wks2 = Sheets(2) 'change to your needs; could also be Sheets("Sheet1") format

Dim rngLookup As Range

'assume data on sheet2 is on column A
With wk2
    Set rngLookup = .Range(.Range("A1"), .Range("A" & .Rows.Count).End(xlUp))
End With

With wks1

    Dim rngSearch As Range
    'assume blank cells are in column A on sheet 1
    Set rngSearch = .Range(.Range("A1"), .Range("A" & .Rows.Count).End(xlUp))
    Set rngSearch = rngSearch.SpecialCells(xlCellTypeBlanks)

    Dim cel As Range, i As Integer

    i = 1

    For Each cel In rngSearch

        cel.Value = rngLookup.Cells(i, 1)
        If i = rngLookup.Rows.Count Then i = 1 Else: i = i + 1

    Next

End With

End Sub 
```

# c - 指针和整数警告的比较

> ID：13034121
> 
> 赞同：1
> 
> 时间：2012-10-23T15:36:30.680
> 
> 标签：c

当我尝试比较指针数组（最初为 NULL）和 char 指针时：

```
int main(int argc, char **argv){   

    char **list = (char**)malloc(20*sizeof(char)+1);
    char *input = "La li lu le lo";

    if(*list[0] != input[0]) { //or if(list[0][0]!=input[0])
        printf("false: %s", strdict[0]);
    }
} 
```

我经常收到警告：

> 指针与整数的比较

必须做什么才能消除此警告？如果我将其修改为：

```
if(*list[0] != input[0]) 
```

警告被删除，但程序崩溃。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:39:50.493

of 的类型`input[0]`是 a`char`而 of 的类型`list[0]`是 a `char*`。如果您想比较字符串，请使用[`strcmp()`](http://en.cppreference.com/w/c/string/byte/strcmp).

*但是*，`malloc()`不正确，`list`内容未初始化。我*认为*，根据其名称和类型，`list`旨在成为以下列表`char*`：

```
/* No need to cast return value of malloc(). */
char **list = malloc(20 * sizeof(char*)); 
```

然后每个元素都`char*`需要设置为 some `char*`，也可能是`malloc()`d ：

```
list[0] = malloc(20); 
/* Populate list[0] with some characters. */

/* Compare to input. */
if (0 == strcmp(list[0], input))
{
    /* Strings equal. */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:39:08.807

似乎您正在将整数与数组进行比较，因为 List 前面有两颗星。Input[0] 是一个字符，而 List[0] 是一个数组，如果您查看 List[0][0] 那么您将比较两个等效对象。

# jquery - jquery 元素具有与另一个元素相同的类和两个类

> ID：13034129
> 
> 赞同：1
> 
> 时间：2012-10-23T15:36:44.533
> 
> 标签：jquery

嗨，我的网站上有这样的菜单：

```
<div class="menu">
    <p align="left" id="home" class="titolo_menu">home</p>
    <p align="left" id="azienda" class="titolo_menu azienda"><br>azienda</p>
    <p align="left" id="staff" class="titolo_sotto_menu azienda">staff</p>
    <p align="left" id="risorseumane" class="titolo_sotto_menu azienda">risorse umane</p>
    <p align="left" id="servizi" class="titolo_menu servizi"><br>servizi</p>
    <p align="left" id="servizioclienti" class="titolo_sotto_menu servizi">servizio clienti</p>
    <p align="left" id="prodotti" class="titolo_menu prodotti"><br>prodotti</p>
    <p align="left" id="web" class="titolo_sotto_menu prodotti">web</p>
</div> 
```

我想检查当我单击一个元素时是否有一个旧页面的类。我将旧页面的 id 存储在我的 php 会话中，然后在 javascript 中检索。例如我的旧页面 id 是：“azienda”（是`p`我的菜单）。我在我的菜单中搜索 ID 为“azienda”的元素，并且我想与我现在点击的元素（例如员工）进行比较。我想比较我的 id 为“staff”的 p 是否包含类的一部分，在本例中为“azienda”，并点击了旧的 p。在这种情况下匹配。问题是我的 p 中有两个类，如果只有一个没有问题，但有两个我只想比较第二个类。

```
 $('.titolo_sotto_menu').click(function(){
        var id=$(this).attr('id');//staff
        var class=$(this).attr('class');
        var page=id;

        old_page=actual_page;//azienda
        actual_page=page;

        var class_old = $('#'+old_page).attr('class');

        if (class == class_old){
            //do something
        }   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:39:00.390

您可以使用 jQuery 的函数 element.hasClass('classname')。

```
var classes[] = class.split(' ');
for(var i=0; i<classes.length; i++){
if ($('#'+old_page).hasClass(classes[i])){
            //do something
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:46:11.383

如果您确定只需要检查第二个类，那么只需从元素中提取第二个类。

```
var secondClass = $('#idOfElement').attr('class').split(' ')[1] 
```

此外，您可能需要添加检查以查看是否有两个类：

```
var secondClass = $('#idOfElement').attr('class').split(' ').length > 1 
? $('#idOfElement').attr('class').split(' ')[1] 
: $('#idOfElement').attr('class'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T15:46:26.977

[$.data()](http://api.jquery.com/jQuery.data/)可能会有所帮助。让我知道 ：）

# c# - .NET 随机 RGB 颜色

> ID：13034131
> 
> 赞同：5
> 
> 时间：2012-10-23T15:36:58.900
> 
> 标签：c#, .net, math, random, colors

我在这里写了这个 C# 代码片段。这个想法是在 RGB 中生成一个随机的 .NET 颜色，同时将 alpha 保持在 255（即满）

我的问题是这个函数有可能击中 RGB 空间中的每一种颜色吗？我以为我是，但现在我第二次猜测自己。或者有没有更好的方法来做到这一点？

谢谢。

```
const int COLORSPACE = 0xFF * 0xFF * 0xFF;
const int ALPHA = 0xFF << 24;    

Random _rand = new Random();

Color RandomColor
{
    get
    {
        return Color.FromArgb(_rand.Next(COLORSPACE) + ALPHA);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T16:03:45.790

数学包含许多错误。请把 OR 放到 shift hexes NOT MULTIPLE 中！

在 C# 中，颜色的使用既有趣又轻松 :)

常数不是必需的。ALPHA 255 是隐含的 - 简单的：

```
private static readonly Random rand = new Random();

private Color GetRandomColour()
{
    return Color.FromArgb(rand.Next(256), rand.Next(256), rand.Next(256));
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T15:40:32.080

不。（不包括！）上限应该是 0x1000000，而不是 0xFF * 0xFF * 0xFF。

0xFF * 0xFF * 0xFF 只是 0xFD02FF，所以你错过了那个颜色和所有更高的颜色。

# java - 如何使用 CBZip2OutputStream 压缩多个文件

> ID：13034134
> 
> 赞同：1
> 
> 时间：2012-10-23T15:37:06.103
> 
> 标签：java, stream, bzip2

我使用 CBZip2OutputStream 创建一个压缩的 bzip 文件。有用。

但我想在一个 bzip 文件中压缩多个文件，但不使用 tar 存档。

如果我有file1、file2、file3，我希望它们在files.bz2 中而不是在归档files.tar.bz2 中。

有可能的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:48:31.507

[BZip2 仅是单个文件的压缩器，](http://en.wikipedia.org/wiki/Bzip2)因此如果不先将多个文件放入存档文件，就无法将多个文件放入 Bzip2 文件中。

您可以将自己的文件开始和结束标记放入输出流，但最好使用标准存档格式。

[Apache Commons 有`TarArchiveOutputStream`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.html)(and [`TarArchiveInputStream`](http://commons.apache.org/compress/apidocs/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.html)) 在这里会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:08:31.337

我明白了，所以我使用了一个带有 TarOutputStream 类的包：

```
public void makingTarArchive(File[] inFiles, String inPathName) throws IOException{

    StringBuilder stringBuilder = new StringBuilder(inPathName);
    stringBuilder.append(".tar");

    String pathName = stringBuilder.toString() ;

    // Output file stream
    FileOutputStream dest = new FileOutputStream(pathName);

    // Create a TarOutputStream
    TarOutputStream out = new TarOutputStream( new BufferedOutputStream( dest ) );

    for(File f : inFiles){

        out.putNextEntry(new TarEntry(f, f.getName()));
        BufferedInputStream origin = new BufferedInputStream(new FileInputStream( f ));

        int count;
        byte data[] = new byte[2048];
        while((count = origin.read(data)) != -1) {

            out.write(data, 0, count);
        }

        out.flush();
        origin.close();
    }

    out.close();

    dest.close();

    File file = new File(pathName) ;

    createBZipFile(file);

    boolean success = file.delete();

    if (!success) {
        System.out.println("can't delete the .tar file");
    }
} 
```

# regex - 使用正则表达式和排序的 Mongodb 简单前缀查询很慢

> ID：13034140
> 
> 赞同：8
> 
> 时间：2012-10-23T15:37:18.607
> 
> 标签：regex, mongodb, sorting, indexing

我坚持使用这个简单的前缀查询。尽管[Mongo 文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)声明您可以通过使用前缀正则表达式格式 (/^a/) 获得相当不错的性能，但当我尝试对结果进行排序时查询非常慢：

**940 毫**

> db.posts.find({hashtags: /^noticias/ }).limit(15).sort({rank : -1}).hint('hashtags_1_rank_-1').explain()

```
{
"cursor" : "BtreeCursor hashtags_1_rank_-1 multi",
"isMultiKey" : true,
"n" : 15,
"nscannedObjects" : 142691,
"nscanned" : 142692,
"nscannedObjectsAllPlans" : 142691,
"nscannedAllPlans" : 142692,
"scanAndOrder" : true,
"indexOnly" : false,
"nYields" : 1,
"nChunkSkips" : 0,
"millis" : 934,
"indexBounds" : {
    "hashtags" : [
        [
            "noticias",
            "noticiat"
        ],
        [
            /^noticias/,
            /^noticias/
        ]
    ],
    "rank" : [
        [
            {
                "$maxElement" : 1
            },
            {
                "$minElement" : 1
            }
        ]
    ]
},
"server" : "XRTZ048.local:27017"
} 
```

但是，同一查询的未排序版本非常快：

**0 毫秒**

> db.posts.find({hashtags: /^noticias/ }).limit(15).hint('hashtags_1_rank_-1').explain()

```
{
"cursor" : "BtreeCursor hashtags_1_rank_-1 multi",
"isMultiKey" : true,
"n" : 15,
"nscannedObjects" : 15,
"nscanned" : 15,
"nscannedObjectsAllPlans" : 15,
"nscannedAllPlans" : 15,
"scanAndOrder" : false,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 0,
"indexBounds" : {
    "hashtags" : [
        [
            "noticias",
            "noticiat"
        ],
        [
            /^noticias/,
            /^noticias/
        ]
    ],
    "rank" : [
        [
            {
                "$maxElement" : 1
            },
            {
                "$minElement" : 1
            }
        ]
    ]
},
"server" : "XRTZ048.local:27017" 
```

}

如果我删除正则表达式并排序，查询也很快：

**0 毫秒**

> db.posts.find({hashtags: 'noticias' }).limit(15).sort({rank : -1}).hint('hashtags_1_rank_-1').explain()

```
{
"cursor" : "BtreeCursor hashtags_1_rank_-1",
"isMultiKey" : true,
"n" : 15,
"nscannedObjects" : 15,
"nscanned" : 15,
"nscannedObjectsAllPlans" : 15,
"nscannedAllPlans" : 15,
"scanAndOrder" : false,
"indexOnly" : false,
"nYields" : 0,
"nChunkSkips" : 0,
"millis" : 0,
"indexBounds" : {
    "hashtags" : [
        [
            "noticias",
            "noticias"
        ]
    ],
    "rank" : [
        [
            {
                "$maxElement" : 1
            },
            {
                "$minElement" : 1
            }
        ]
    ]
},
"server" : "XRTZ048.local:27017" 
```

}

似乎同时使用正则表达式和排序会使 Mongo 扫描大量记录。但是，如果我不使用正则表达式，排序只会扫描 15 个。这里有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T01:00:39.397

解释输出中的`scanAndOrder: true`表示查询必须检索文档，然后在返回输出之前在内存中对它们进行排序。这是一项昂贵的操作，并且会对查询的性能产生影响。

解释输出中的存在`scanAndOrder: true`以及差异表明查询未使用最佳索引。在这种情况下，它似乎需要进行集合扫描。您可以通过在条件中包含索引键来缓解此问题。根据我的测试：`nscanned``n``sort`

```
db.posts.find({hashtags: /^noticias/ }).limit(15).sort({hashtags:1, rank : -1}).explain() 
```

Does not require a scan and order, and returns `n` and `nscanned` of the number of records you are looking for. This would also mean sorting on the `hashtags` key, which may or may not be useful to you, but should increase the performance of the query.

# powershell - 将输出添加到变量的 PowerShell 脚本

> ID：13034141
> 
> 赞同：0
> 
> 时间：2012-10-23T15:37:19.630
> 
> 标签：powershell

我有以下脚本，但我需要替换`Write-Host`'s 并将输出存储在单个变量中，而不是编写输出。

我想在一个变量中结束所有输出，然后我可以通过电子邮件发送其内容。

`Write-Host $machines2`在循环结束时将每台机器列出到控制台。

```
# Start writing headers to output
write-host "        MACHINE  USER  TAG    EXPIRY DATE"

# Import SQL module for PowerShell
import-module SQLPS -DisableNameChecking

# Run first SQLquery to get machine name & servie tag
$data1 = Invoke-Sqlcmd -ServerInstance SERVER -Database DATABASE -Query “SELECT guid, name, [Serial Number] FROM dbo.wrksta as a inner join Inv_AeX_HW_Serial_Number as b on a.GUID=b._resourceGUID ORDER BY Name”;

# Iterate through results and apply logic to populate list
foreach ($row in $data1)
{
    # Set variables from Query result
    $name = $row.name;
    $serial = $row."Serial Number";

    # Get machine user
    $user = invoke-sqlcmd -ServerInstance SERVER -Database DATABASE -Query “SELECT top 1 [User] FROM dbo.Evt_aex_client_logon WHERE _resourceGuid = (SELECT top 1 Guid FROM dbo.Wrksta WHERE Name='$name' ORDER BY WrkstaID DESC) AND Event = 'logon' AND _eventTime > getdate()-60 GROUP BY [User] ORDER BY count([User]) desc” ;

    # Set machine user without column header
    $user2 = $user.User;

    # Set service tag from query data
    [String]$ServiceTag = $serial;

    Try
    {
        # Function to obtain XML information about a Dell system from a service tag from the Dell xserv site
        $AssetService = New-WebServiceProxy -Uri "http://xserv.dell.com/services/AssetService.asmx?WSDL";
        $ApplicationName = "AssetService";
        $Guid = [Guid]::NewGuid();
        $Asset = $AssetService.GetAssetInformation($Guid, $ApplicationName, $ServiceTag);
        $Writer = New-Object "System.IO.StringWriter";
        $XmlSerializer = New-Object System.Xml.Serialization.XmlSerializer($Asset.GetType());
        $XmlSerializer.Serialize($Writer, $Asset);
        [String]$Date = $Writer.ToString();
        $Writer.Flush();
        $Writer.Close();
    }
    # Required exception block
    Catch
    {
        Write-Host $($_.Exception.Message);
    }

    # Match purchase date from returned data in incorrect format 2012-03-23
    $prog = [regex]::match($Date, '(?<=StartDate>)(.*)(?=T00)').Groups[1].Value

    # Edit the date to replace the - with /
    $prog2 = [System.Text.RegularExpressions.Regex]::Replace($prog, "[-]", "/");

    if ($prog2)
    {
        # Parse the value e.g. 2012/03/23 into a full datetime i.e. 23 March 2012 12:00:00
        $dt = [datetime]::ParseExact($prog2, "yyyy/MM/dd", $null)

        # Now string is in datetime format use the -format command to re-order and trim to our desired date 23/03/2012
        $purchased = Get-Date $dt -Format 'dd/MM/yyyy'

        # Store all variables in a table with relevant column headings
        $machines = New-Object PSObject -Property @{Name = $name; Serial = $Serial; User2 = $user2; purchased = $purchased}

        # Set what the date was 4 years ago today
        $fourYearsAgo = (Get-Date).AddYears(-4)

        # Compare our returned date to the date 4 years ago and see if it is less than or equal too i.e. in warranty
        $tobereplaced = $machines.purchased | Where-Object { (Get-Date $machines.purchased) -le $fourYearsAgo}

        if ($tobereplaced)
        {
            # Parse the date back to a full date/time
            $dt2 = [datetime]::ParseExact($tobereplaced, "dd/MM/yyyy", $null)

            # Add 4 years onto the date
            $replacementdate = (get-date $dt2).AddYears(+4)

            # Trim it back to our desired format
            $tbr = Get-Date $replacementdate -Format 'dd/MM/yyyy'

            # Build our final variable containing our data
            "EXPIRED" + " " + $name + " " + $user2 + " " + $serial + " " + $tbr;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:56:20.227

不要将输出保存到变量中，而是输出到管道中。将您的代码包装到一个函数中，并将返回的任何内容收集到一个变量中，类似于以下内容：

```
function abc()
{
    $string1
    .... #processing block 1
    $string2
    .... #processing block 2
    $string3
    .... #even more processing.
} 
```

如果它是一组字符串，您可以将它们连接在一起并通过电子邮件发送：

```
$mydata = abc;
$myEmailBody = $mydata -join "`n"; 
```

# fortran - How to read a matrix and write certain values to a new file in Fortran

> ID：13034143
> 
> 赞同：0
> 
> 时间：2012-10-23T15:37:25.810
> 
> 标签：fortran, fortran90

I am doing a chemistry research project and presently have a 378 x 378 matrix of zeros and ones in a file called `Connectivity-M.txt`. I am trying to write a simple program to read down each column of the matrix and look for entries with a value of one. Since the matrix is of the format `A(i,j)` I want to program to write the `i`,`j` location for each value of one that it finds to a new file, `Wires.txt`. Here is my code so far:

```
program connectivity_matrixread

IMPLICIT none
integer :: i , j
INTEGER, DIMENSION(378,378) :: A

open(unit = 1 , file = "Connectivity-M.txt")
open(unit = 2 , file = "Wires.txt")

! Read values
do i = 1 , 378
    do j = 1 , 378

        Read(1,*) A(i,j)

        if (A(i,j) .eq. 1) then
            write(2,*) i , j
        endif

    enddo
enddo

end program connectivity_matrixread 
```

The program manages to read the first column where there is only a single entry with a value of 1\. It writes the `i`,`j` position of this entry but otherwise I get an error that reads:

> At line 25 of file conn-read.f90 (unit = 1, file = 'Connectivity-M.txt')
> Fortran runtime error: End of file

After moving the open file statement I am still getting the same error. The line the error refers to contains the read statement.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:30:32.520

Depending on the layout of the contents of your input file and how you open it, you can probably read it in one line, like this:

```
read(1,*) A 
```

and let Fortran take care of the details. If you've got your array stored in row-major order I expect that this quick and easy method will read it in the 'wrong' order, so you may want to transpose the array after reading it. Or you may want to read it row by row rather like this:

```
do ix = 1,nrows
    read(1,*) A(ix,:)
end do 
```

These approaches will only work if there are the right number of integers in each row of the file and the right number of rows.

While I'm writing, a couple of bits of unasked for advice:

*   Don't get into the habit of using single-digit unit identifiers in your programs. It's unusual these days to find identifiers other than 0, 5 and 6 already in use when your program starts, but not completely impossible. If you have a (very) up-to-date compiler use the option `NEWUNIT=UNIT` in your `OPEN` statements, if not use a number with at least 2 digits.
*   It's the 21st Century, you can drop the archaic `.eq.` and use `==` now; it looks like Fortran 95 and later have gained acceptance.

And to answer your question: Yes, the error statement refers to the source line that was executing when the error occurred. The most likely causes of an unexpected end-of-file are that either the file isn't where the program is looking for it (Fortran thinks of non-existent files as being almost the same as empty files) or the file contains less data than you tried to read from it. The cause of this latter error might be either that the file contains less data than you thought, or that your read statement(s) attempted to read more than you thought they did. I can't tell which is the case without seeing your input file. Whatever you do don't post your whole input file, but if you are still having problems post a snippet of it.

To check that a file exists before trying to open it use the `inquire` statement.

I'm made suspicious that you haven't figured out entirely what is going on because you write *The program manages to read the first column* while your code, quite clearly, reads the values into the array row-by-row.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:46:18.423

It may require more adjustment after this, but the first step is to move the open statement up, above the loops, like this:

```
open(unit = 1 , file = "Connectivity-M.txt")

do i = 1 , 378

    do j = 1 , 378 
```

The reason is that the file should be opened only once, then you iterate through it.

Post your result and we'll see what's next.

# zend-framework - Zend & 方法="put"

> ID：13034145
> 
> 赞同：0
> 
> 时间：2012-10-23T15:37:31.303
> 
> 标签：zend-framework, methods, put

我的应用似乎完全忽略了 PUT 操作。我有一个控制器，它使用 REST 进行 GET、POST、PUT 和 DELETE 操作。PUT 和 DELETE 方法似乎都被忽略了。也许这是一个动作和方法语法问题？

无论如何，这里有一些示例代码：

```
public function init()
{
    // Set the method for the display form to PUT
    $this->setMethod('PUT');
    $this->setAction('/article/?update');
} 
```

从控制器：

```
public function putAction()
{
    echo "putAction";exit();
} 
```

在我的 .htaccess 中，我还允许所有 GET POST PUT DELETE

我很困惑，它不起作用。请您帮忙，再次感谢！

这是表格：

```
<form articleid="17" articlename="1" articlecontent="1" topicidfk="1" topicid="1" topicname="Sports" method="put" action="/article?update"><dl class="zend_form">
<dt id="articlename-label"><label for="articlename" class="required">Article Name</label></dt>
<dd id="articlename-element">
<input type="text" name="articlename" id="articlename" value="1" /></dd>
<dt id="articlecontent-label"><label for="articlecontent" class="required">Article Content</label></dt>
<dd id="articlecontent-element">
<textarea name="articlecontent" id="articlecontent" rows="4" cols="80">1</textarea></dd>
<dt id="topicidfk-label">&#160;</dt>
<dd id="topicidfk-element">
<select name="topicidfk" id="topicidfk">
    <option value="0" label="Select One">Select One</option>
    <option value="1" label="Sports" selected="selected">Sports</option>
    <option value="2" label="Finance">Finance</option>
</select></dd>
<dt id="submit-label">&#160;</dt><dd id="submit-element">
<input type="submit" name="submit" id="submit" value="Update Article" /></dd></dl></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:20:32.597

[这篇关于 Zend_Rest_Controller 单元测试](https://stackoverflow.com/questions/6431416/examples-on-zend-rest-controller-unit-testing)的帖子示例- 似乎有所帮助，虽然它看起来有点 hack，但我现在就接受它！

# c++ - 对多个 c++ 项目进行单元测试并将结果导出到 TeamCity

> ID：13034149
> 
> 赞同：2
> 
> 时间：2012-10-23T15:37:33.083
> 
> 标签：c++, unit-testing, teamcity, multiple-projects

我在我的 c++ 项目中使用 Google Tests 引入单元测试。

这些项目被组织在多个解决方案中，每个解决方案都包含一个（主）项目及其依赖项。还有一个构建解决方案，包含所有项目。

每个项目都会将自己的 [project]_test 项目添加到解决方案中。

可以在本地为每个项目、每个解决方案运行单元测试。

必须使用 TeamCity 构建构建解决方案。

**问题：**

Google 测试提供了一个 xml 输出，可以由 TeamCity 导入，以获取测试报告。但是 TeamCity 只能导入单个 xml。

从不同项目的所有报告中生成复合 xml 会更改 TeamCity 预期的格式，因此不再读取 xml。

到目前为止，我一直无法在 TeamCity 中找到能够运行多个 c++ 项目、运行测试和获得测试结果的任何东西。

我有什么选择？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:40:10.693

米哈埃拉

您可以使用[XML Report 处理 Build Feature](http://confluence.jetbrains.net/display/TCD7/XML+Report+Processing)。它可以处理多个xml文件并导入测试结果。您可以在文档中找到更多信息。

所以你不需要复合 xmls 并且可以一次构建所有项目。

# c++ - 如何在数组中的对象上调用 << 运算符？

> ID：13034155
> 
> 赞同：0
> 
> 时间：2012-10-23T15:37:54.377
> 
> 标签：c++, operator-overloading, ostream

我有一个指向对象的指针数组

```
Room *rooms[MAX_ROOMS];

rooms[0] = new Room(101, 1, RT_CLASSIC, 200.00);
rooms[1] = new Room(102, 2, RT_CLASSIC, 280.00);
rooms[2] = new Room(103, 4, RT_FAMILY_SUITE, 360.00); 
```

Class **Room**有一个重载的友元运算符 <<：

```
std::ostream& operator<<(std::ostream &out, const Room &room) {
    return out << room.toString();
} 
```

如何像这样输出**房间**数组：

```
for(int i = 0; i < num_of_rooms; i++) {
    cout << rooms[i] << "\n";
} 
```

因为现在它将地址输出到**Room**对象。我需要它来调用我的**Room** << 操作员。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:38:38.687

像这样：

```
cout << *(rooms[i]) << "\n"; 
```

`rooms[i]`返回指向 a 的指针`Room`，这`cout`就是打印地址的原因。要获取对象本身，您必须取消引用它（如上所示）。

# c# - 在 Silverlight 中滚动结束时触发的事件

> ID：13034156
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:37:55.847
> 
> 标签：c#, silverlight, scroll

我正在为 Windows Phone 7 使用 C#、Silverlight、Visual Studio。

我正在寻找一个在滚动完成滚动时触发的事件。我有兴趣获得某些元素的最终位置。

LayoutUpdated 在滚动期间被触发了几次，但在滚动结束时并不一致。ManipulationCompleted 有时会起作用，但如果用户在滚动条上进行“轻弹”动作，则 ManipulationCompleted 会在滚动条停止移动之前触发。

请注意，我在 Silverlight 中工作，并且像[ScrollChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrollchanged.aspx)这样的滚动事件根本不存在。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:44:42.450

我通过利用 ScrollViewer 的 VisualStateGroup 解决了这个问题。

```
// uie is a UIElement
IEnumerable<ScrollViewer> svList = uie.GetVisualDescendants<ScrollViewer>();
if (svList.Count() > 0)
{
    // Visual States are always on the first child of the control
    FrameworkElement element = VisualTreeHelper.GetChild(svList.First<ScrollViewer>(), 0) as FrameworkElement;
    // getting all the visual state groups
    IList groups = VisualStateManager.GetVisualStateGroups(element);
    foreach (VisualStateGroup group in groups)
    {
        if (group.Name == "ScrollStates")
        {
            group.CurrentStateChanged += new EventHandler<VisualStateChangedEventArgs>(group_CurrentStateChanged);
        }
    }
}

private static void group_CurrentStateChanged(object sender, VisualStateChangedEventArgs e)
{
    if (e.NewState.Name == "NotScrolling")
    {
        isNotScrolling = true;
    }
    else
    {
        isNotScrolling = false;
    }
} 
```

我遇到的唯一问题是 ScrollStates 的状态变化非常缓慢，因此应用程序触发的其他事件将在您的代码甚至注册滚动之前处理。

# mysql - 即使在索引之后，MySQL 连接也很慢

> ID：13034163
> 
> 赞同：2
> 
> 时间：2012-10-23T15:38:21.133
> 
> 标签：mysql, performance, left-join

我有两个表成员和 dep，其描述如下：

```
TABLE members:
+-----------------+------------+------+-----+---------+-------+
| Field           | Type       | Null | Key | Default | Extra |
+-----------------+------------+------+-----+---------+-------+
| MemberID_M      | varchar(8) | YES  | MUL | NULL    |       |
| Age             | varchar(5) | YES  |     | NULL    |       |
| Sex             | varchar(1) | YES  |     | NULL    |       |
| SomeInfo        | int(11)    | YES  |     | NULL    |       |
+-----------------+------------+------+-----+---------+-------+
TABLE dep:
+-----------------+------------+------+-----+---------+-------+
| Field           | Type       | Null | Key | Default | Extra |
+-----------------+------------+------+-----+---------+-------+
| MemberID_t      | int(11)    | YES  | MUL | NULL    |       |
| YEAR            | varchar(2) | NO   |     |         |       |
| Days            | tinyint(4) | YES  |     | NULL    |       |
| train           | bigint(20) | NO   |     | 0       |       |
+-----------------+------------+------+-----+---------+-------+ 
```

我想执行以下查询：

```
CREATE TABLE table2 
SELECT a.*,b.* 
FROM dep AS a LEFT OUTER JOIN members AS b 
          ON  a.MemberID_t = b.Memberid_M; 
```

最初，两个表中的 id 都没有被索引，并且查询没有返回几个小时。现在，即使在建立索引之后，它也需要很多时间。

```
EXPLAIN for the SELECT part of the query is:
+----+-------------+-------+------+---------------+------+---------+------+--------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows   | Extra |
+----+-------------+-------+------+---------------+------+---------+------+--------+-------+
|  1 | SIMPLE      | a     | ALL  | NULL          | NULL | NULL    | NULL | 436689 |       |
|  1 | SIMPLE      | b     | ALL  | memid2        | NULL | NULL    | NULL | 226127 |       |
+----+-------------+-------+------+---------------+------+---------+------+--------+-------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:42:45.707

问题是 MemberID_M 是 varchar 而 MemberID_t 是 INT

这个字段的转换是为什么需要这么长时间

为了获得最佳结果，关键字段必须是相同的类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:42:59.890

您基于不同类型的列加入。一个是 INT，而另一个是 VARCHAR。这可能会导致在转换上花费大量时间（也不确定 MySQL 是否也会忽略基于此的键）。

进一步的小问题，在您的主键中包含 NULL 值是否合乎逻辑？

# iphone - 谁的视图不在窗口层次结构中！（执行Segue 故事板）

> ID：13034164
> 
> 赞同：-2
> 
> 时间：2012-10-23T15:38:21.490
> 
> 标签：iphone, ios

我正在尝试使用以下代码从类中调用 segue

```
[self performSegueWithIdentifier:@"inicio" sender:self]; 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:45:07.600

另一种观点没有被驳回。现在，它起作用了！

# sql - 如何从枢轴聚合值？

> ID：13034169
> 
> 赞同：1
> 
> 时间：2012-10-23T15:38:33.250
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的查询返回如下所示的数据集：

```
+-----------+--------+-----------+-------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+---------+------------+--------+---------+------------+---------+---------+------------+--------+
| CLIENT_ID | count1 | TestFreq1 | stdv1 | count2 | TestFreq2 |  stdv2  | count3 | TestFreq3 |  stdv3  | count4 | TestFreq4 |  stdv4  | count5 | TestFreq5 |  stdv5  | count6 | TestFreq6 |  stdv6  | count7 | TestFreq7 |  stdv7  | count8 | TestFreq8 |  stdv8  | count9 | TestFreq9 |  stdv9  | count10 | TestFreq10 | stdv10 | count11 | TestFreq11 | stdv11  | count12 | TestFreq12 | stdv12 |
+-----------+--------+-----------+-------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+---------+------------+--------+---------+------------+---------+---------+------------+--------+
|    210893 |    136 |         0 |     0 |     81 |        41 | 79.2685 |     19 |        63 | 58.321  |     24 |        21 | 20.4896 |      5 |        25 | 8.228   |      6 |        24 | 24.0638 |      4 |        25 | 24.6103 | 2      | 25        | 2.12132 |      2 |        23 | 21.9203 | 1       | 33         | NULL   |       2 |         29 | 7.77817 | 1       | 38         | NULL   |
|    123321 |     50 |         0 |     0 |      5 |        26 | 7.87401 |     14 |        45 | 51.8002 |      3 |        25 | 14.7422 |      2 |        22 | 17.6777 |      4 |        36 | 21.4942 |      3 |        36 | 22.2711 | NULL   | NULL      | NULL    |      4 |        35 | 9.30949 | NULL    | NULL       | NULL   |       1 |         31 | NULL    | NULL    | NULL       | NULL   |
|    454322 |    232 |         0 |     0 |    173 |        10 | 33.8487 |     36 |        36 | 36.6602 |     32 |        15 | 17.485  |     10 |        38 | 22.4809 |     13 |        23 | 20.0477 |      7 |        18 | 11.4143 | 3      | 32        | 24.5425 |      6 |        25 | 16.8602 | 3       | 28         | 21.166 |       2 |         25 | 4.94975 | 1       | 34         | NULL   |
+-----------+--------+-----------+-------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+--------+-----------+---------+---------+------------+--------+---------+------------+---------+---------+------------+--------+ 
```

**而不是强迫数据出去，`count13, stdv13, testfreq13, ..14..14..14, 15.15.15`我怎样才能在同一个字段中聚合所有 12 及以上的值？**

这是我的查询，非常感谢您的指导：

```
;WITH counted AS (
  SELECT
    client_id,
    COUNT(*) AS TimesTested,
    (datediff(day,MIN(received_date),max(received_date)))
  /COUNT(*) as TestFreq
  FROM f_accession_daily
  GROUP BY
    client_id,
    patient_id
),
counted2 as (
  SELECT
    client_id,
    TimesTested,
    CAST(COUNT(*) AS varchar(30)) AS count,
    CAST(AVG(testfreq) as varchar(30)) as TestFreq,
    CAST(STDEV(TestFreq) as varchar(30)) Stdv
  FROM counted
  GROUP BY
    client_id,
    TimesTested
    )
    ,
unpivoted AS (
  SELECT
    client_id,
    ColumnName + CAST(TimesTested AS varchar(10)) AS ColumnName,
    ColumnValue
  FROM counted2
  UNPIVOT (
    ColumnValue FOR ColumnName IN (count, TestFreq,stdv)
  ) u
),
pivoted AS (
  SELECT
    client_id clientid,
    count1, TestFreq1,stdv1,
    count2, TestFreq2,stdv2,
    count3, TestFreq3,stdv3,
    count4, TestFreq4,stdv4,
    count5, TestFreq5,stdv5,
    count6, TestFreq6,stdv6,
    count7, TestFreq7,stdv7,
    count8, TestFreq8,stdv8,
    count9, TestFreq9,stdv9,
    count10, TestFreq10,stdv10,
    count11, TestFreq11,stdv11,
    count12, TestFreq12,stdv12
  FROM unpivoted
  PIVOT (
    MAX(ColumnValue) FOR ColumnName IN (
      count1,TestFreq1,stdv1,
      count2,TestFreq2,stdv2,
      count3,TestFreq3,stdv3,
      count4,TestFreq4,stdv4,
      count5,TestFreq5,stdv5,
      count6,TestFreq6,stdv6,
      count7,TestFreq7,stdv7,
    count8, TestFreq8,   stdv8,
    count9, TestFreq9,   stdv9,
    count10, TestFreq10,stdv10,
    count11, TestFreq11,stdv11,
    count12, TestFreq12,stdv12
    )
  ) p
)
select * from pivoted 
```

只是为了澄清我想返回相同的确切结果，只是对于最后一列，我想汇总所有属于`12+ bucket`. 除了最后三个字段之外，所有字段都将是相同的，它们将是：

```
+----------+-------------+---------+
| count12+ | TestFreq12+ | stdv12+ |
+----------+-------------+---------+
| 353      | 32423       | NULL    |
| NULL     | NULL        | NULL    |
| 342      | 25324       | NULL    |
+----------+-------------+---------+ 
```

请注意，与其他数字相比，上面的数字要大得多，因为**12+**已汇总。

非常感谢您的指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:09:18.133

似乎做你想做的最快的方法是改变你的`counted2`CTE，所以专栏`TimesTested`考虑了你的逻辑。所以应该是：

```
counted2 as (
  SELECT
    client_id,
    CASE WHEN TimesTested >= 12 THEN 12 ELSE TimesTested END TimesTested,
    CAST(COUNT(*) AS varchar(30)) AS count,
    CAST(AVG(testfreq) as varchar(30)) as TestFreq,
    CAST(STDEV(TestFreq) as varchar(30)) Stdv
  FROM counted
  GROUP BY
    client_id,
    CASE WHEN TimesTested >= 12 THEN 12 ELSE TimesTested END
    ) 
```

# c# - 如何在 Worker 中设置多个线程并向它们发送消息？

> ID：13034170
> 
> 赞同：0
> 
> 时间：2012-10-23T15:38:34.100
> 
> 标签：c#, azure, task-parallel-library

我的系统中有很多长期运行但不受 CPU 限制的“工作”。我想设置一个 Worker 角色来处理这些，但它们具有足够的可扩展性，一个 Worker 角色可以轻松地让 10-20 个线程同时处理一个“作业”。

这里有一些问题建议使用 TPL，我确实有一些有限的经验。然而，我不明白的是如何管理线程以便有最大数量的线程，以及如何在释放线程时调度它们。

稍微复杂的是，我想使用 Ninject 来创建每个“工作”所需的服务。

这是我在脑海中想象它的方式：

```
while (true)
{
    // Don't go unless we have a free slot (how do I implement this?!)
    if (FreeThreadExists)
    {
        // Get the next message
        CloudQueueMessage ThisMessage = Queue.GetMessage(TimeSpan.FromMinutes(3));

        // Get the new job and inject services
        Job MyJob = Kernel.Get<Job>();

        // Start this job
        // Will I need to keep ahold of this Task?
        // And how do I know when it's done so that FreeThreadExists changes?
        Task.Factory.StartNew(() => MyJob.Run(ThisMessage));
    }
    else
    {    
        // Sleep to prevent choking
        Thread.Sleep(500);
    }
} 
```

然后在该线程中删除完成后的消息。基本上，我试图将一个 Worker 拆分为 20 个“实例”，而不会丢失太多 Azure 功能（特别是我想要队列消息超时/重试功能）。

我在.NET线程方面相当缺乏经验，最好的方法是什么？

编辑：哇，我完全忘了补充一点：这需要跨多个工人进行扩展。因此，10 个 Worker 角色，每个角色有 10 个线程，消息由 UI 前端排队，然后由第一个具有空闲线程的 Worker 出列并运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:56:52.473

试试这个伪代码：

```
while (true)
{
    int maxThreadsPerWorkerRole = 3;//assuming each worker role can handle 3 jobs simultaneously
    var messages = Queue.GetMessages(3);//Get 3 messages from the queue
    if (messages != null && messages.Count > 0)//Ensuring there is some work which needs to be done
    {
        var myTasks = new List<Task>();
        for (int i=0; i<messages.Count; i++)
        {
            Job MyJob = Kernel.Get<Job>();//Get the job
            var task = Task.Factory.StartNew(() => MyJob.Run(messages[i])); 
            myTasks.Add(task);
        }
        Task.WaitAll(myTasks.ToArray());//Wait for all tasks to complete.
        for (int i=0; i<messages.Count; i++)
        {
            //Write code to delete the message.
        }
        //Check if the queue is empty or not. If the queue is not empty, then repeat this loop
        //Otherwise simply exit this loop.
        if (Queue.RetrieveApproximateMessageCount() == 0)
        {
            break;
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T23:20:19.447

正如您在代码中提到的，我通常还涉及 TPL。作为 Gaurav 方法的替代方法，请参见下面的代码。下面的伪代码使用 Parallel.For，它控制线程的创建。每个线程启动并运行一个无限循环；如果没有工作，请确保您睡一会儿。

```
// Start 10 threads
Parallel.For(0, 10, (i) =>
{
  while (true)
  {
    // Get message from queue
    var msg = Queue.GetMessage();
    if (msg != null)
    {
      // Do some work here...
      StartSomeJob();

      // Then when you are done, delete the message
      Queue.DeleteMessage(msg);
    }
    // Wait 1 second before fetching next work item from queue
    System.Threading.Thread.Sleep(1000);
  }
}); 
```

# google-maps-api-3 - 如何在具有可变宽度的 div 中居中/对齐 Google 地图

> ID：13034188
> 
> 赞同：8
> 
> 时间：2012-10-23T15:39:18.543
> 
> 标签：google-maps-api-3

我在一个 100% 的页面宽度的 div 中加载了谷歌地图（通过 API）。叠加层位于中心，地图应像这样定位。问题是地图现在向左对齐。

我可以使用与页面宽度相对应的 LatLng 来移动中心，但这对于一项简单的任务来说似乎需要做很多工作。我一直在查看 API 参考，但找不到解决方案。

Maps API (v3) 中是否有任何方法可以将地图定位/对齐到中心？

**编辑：**

在此示例中调整浏览器窗口大小时：

[http://econym.org.uk/gmap/example_fullscreen1.htm](http://econym.org.uk/gmap/example_fullscreen1.htm)

地图与窗口的左上角对齐。

我想要的是地图的中心在调整大小时保持在窗口的中心。

因此，如果窗口宽 200 像素，地图将向右移动 100 像素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T18:33:31.837

通过有两个`div`，一个在另一个内部，即使使用百分比，您也可以将内部的一个居中。
并附加一个事件处理程序以在每个事件上重新居中地图`resize`。

**HTML**

```
<div id="outerdiv">
    <div id="map_go" />
</div> 
```

**JS**

```
$(window).on('resize', function() {
    var currCenter = map.getCenter();
    google.maps.event.trigger(map, 'resize');
    map.setCenter(currCenter);
}) 
```

**CSS**

```
#outerdiv {width: 90%; height: 90%; position:fixed; text-align:center}
#map_go {width: 70%; height: 100%; margin:0px auto; display:inline-block} 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/eXCFw/](http://jsfiddle.net/RASG/eXCFw/)

*用火狐15测试*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-12T20:41:20.143

我试过了，对我来说效果很好

```
#map-canvas { height: 70%; width :50%; margin-left:auto; margin-right:auto;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T17:35:15.140

这应该有帮助： [http ://econym.org.uk/gmap/basic19.htm](http://econym.org.uk/gmap/basic19.htm)

它描述了百分比大小的 div 和地图（需要知道地图的渲染大小）的问题。它来自 Mike Williams 的 Google Maps API v2 教程，但这个概念也适用于 v3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T10:23:13.017

我不明白为什么你需要 2 个 DIV 来实现这一点。

一个 DIV 就足够了：

```
$(window).resize(function() {

    var currCenter = map.getCenter();
    google.maps.event.trigger(map, 'resize');
    map.setCenter(currCenter);
}); 
```

请检查[http://jsfiddle.net/RGUnd/2/](http://jsfiddle.net/RGUnd/2/)

# javascript - 为什么我不能在回调中重用变量名？

> ID：13034194
> 
> 赞同：2
> 
> 时间：2012-10-23T15:39:44.123
> 
> 标签：javascript, node.js, scope

我正在尝试重新使用`user`在以下函数中命名的变量：

```
UserModel.prototype.authenticate = function (doc, callback) {

    // check to see if the username exists
    this.users.findOne({ username: doc.username }, function (err, user) {

        if (err || !user)
            return callback(new Error('username not found'));

        // hash the given password using salt from database
        crypto.pbkdf2(doc.password, user.salt, 1, 32, function (err, derivedKey) {

            if (err || user.password != derivedKey)
                return callback(new Error('password mismatch'));

            // explicitly define the user object
            var user = {

                _id: user._id,
                type: user.type,
                username: user.username,
                displayname: user.displayname

            };

            return callback(err, user);

        });

    });

}; 
```

我尝试重新定义回调函数`user`内部的变量。`pbkdf2`这不像我预期的那样工作。我比较`user.password != derivedKey`中断的行，因为`user`在运行时此处未定义。不应该`user`仍然是`findOne`回调方法参数中的实例吗？如果我将两个`user`变量中的任何一个更改为其他变量，它就会起作用。

我可以重命名变量，但这仍然让我想知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:44:53.037

问题是，您声明了一个`user`在函数上下文中调用的变量：

```
var user = { }; 
```

这将覆盖/重叠`user`由外部函数上下文声明为形式参数的。*在if-statement*之后声明该变量无济于事。由声明的变量`var`和*函数声明*在解析时被提升，所以事实上，该`var user`语句被放置在你的内部函数之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:57:23.067

答案是由于[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)，即使您在其他表达式 () 中使用变量 () 之后`users`声明变量 ( ) ，它也会首先被解析，而原始引用被覆盖。有几个关于在那里[吊装的](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/)[文档](http://thecomputersarewinning.com/post/a-dangerous-example-of-javascript-hoisting/)，对它们进行顶峰可能是个好主意。`var users``user.password != derivedKey``users`

# wpf - wpf围绕中心旋转图像

> ID：13034201
> 
> 赞同：27
> 
> 时间：2012-10-23T15:39:59.517
> 
> 标签：wpf, xaml, animation

我在一个按钮上有一个图像，当用户单击它时我想旋转它。我几乎有它的工作。单击时图像旋转良好，但不会围绕其中心旋转。

如何使图像围绕其中心而不是左上角旋转？

这是我的代码：

```
<Button Name="btnRefreshPortList"
    Grid.Column="1"
    Margin="10 0 0 0"
    Command="{Binding RefreshPortList}">

    <Image Source="Images/refresh.jpg" 
        Height="15">
        <Image.RenderTransform>
            <RotateTransform x:Name="AnimatedRotateTransform" Angle="0" />
        </Image.RenderTransform>
        <Image.Triggers>
            <EventTrigger RoutedEvent="MouseDown">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetName="AnimatedRotateTransform" 
                            Storyboard.TargetProperty="Angle" 
                            By="10"        
                            To="360" 
                            Duration="0:0:0.5" 
                            FillBehavior="Stop" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Image.Triggers>
    </Image>
</Button> 
```

BR FireFly3000

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-23T15:41:16.073

只需`RenderTransformOrigin`在图像上设置为 (0.5, 0.5)

```
<Image Source="Images/refresh.jpg" 
    RenderTransformOrigin=".5,.5"
    Height="15">
... 
```

# ssis - 在 SSIS 中更新 SSAS 分区片

> ID：13034203
> 
> 赞同：1
> 
> 时间：2012-10-23T15:40:01.687
> 
> 标签：ssis, ssas, olap, partitioning, rolap

我有一个 SSAS 多维数据集，它有两个分区，一个在 MOLAP 中，另一个在 ROLAP 中。在我的 ROLAP 分区上，我的切片集包含时间维度的最后 5 个成员。处理多维数据集的每个晚上，我都需要更新我的 ROLAP 分区的切片，以在我的时间维度中包含 5 个最近的成员。

例如，如果我的多维数据集有一个分区切片：

```
 {[Time].[100], [Time].[101], [Time].[102], [Time].[103], [Time].[104]} 
```

处理后，我想将切片更新为

```
 {[Time].[101], [Time].[102], [Time].[103], [Time].[104], [Time].[105]} 
```

这是否可以以编程方式实现这一点，以便可以将其作为我的 SSIS 包中的一个步骤包含在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:54:31.973

执行此操作的最简单方法是将 XMLA 与 ascmd 一起使用。ascmd 与 sqlcmd 类似，因为它是一个命令行工具，也允许使用参数。这样，您可以为 [Time].[xxx] 值指定参数。

# class - 使 Form1 定义的布尔值在类中可访问

> ID：13034206
> 
> 赞同：0
> 
> 时间：2012-10-23T15:40:09.033
> 
> 标签：class, boolean

在课堂上我有蛇：

```
public Snake()
{
  snakeRec = new Rectangle[3];

  if(Form1.diffeasy = true)
  {
    colorid = "Green";
  }
  else if (Form1.diffnormal = true) 
  {
    colorid = "blue";
  }
  else if (Form1.diffhard = true) 
  {
    colorid = "purple";
  }
  else if (Form1.diffextreme = true)
  {
    colorid = "red";
  }

  Sbrush = new SolidBrush(Color.FromName(colorid) 
```

现在 diffextreme, diffeasy,... 在 Form1 中定义为

```
bool diffeasy = false;
bool diffnormal = false;
bool diffhard = false;
bool diffextreme = false; 
```

当用户选择一个难度时，其中一个设置为 true。

我的问题是：如何在蛇类中正确访问这些布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:42:21.970

不需要像这样用布尔变量编写 if 语法

```
if (value = true) // Incorrect Syntax 
```

而不是你可以对

```
if(value) // reason is if takes boolean variable. 
```

你也可以这样写

```
if(value == true). 
```

您可以使用 setter 和 getter 函数来访问和设置布尔运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:42:59.123

`accessor methods`在 Form1 中定义了 getter/setter 方法来访问您的字段，`Form1`例如`diffeasy`：

```
 boolean isDiffeasy (){
       return this.diffeasy;
   }

   void setDiffeasy (boolean diffeasy){
       this.diffeasy = diffeasy ;
   } 
```

`Form1`在`Snake`类中使用此方法：

```
 if(form1.isDiffeasy()) {
       colorid = "Green";
    }

    ....
    form1.setDiffeasy (false); 
```

# python - unittest：测试时增加模块的详细程度

> ID：13034207
> 
> 赞同：3
> 
> 时间：2012-10-23T15:40:10.463
> 
> 标签：python, unit-testing

我有一个模块`mymodule`，我用`unittest`. 当处于*详细模式*（例如`mymodule.set_verbose(True)`）时，模块会记录到标准输出诊断消息，否则保持沉默。我希望当我在主程序中导入模块时，它处于*静默模式*，而`unittest`运行时，它是冗长的。

我试图在 unittest 主循环中破解它，但它不起作用

```
if __name__ == "__main__":
  mymodule.set_verbose( True )
  unittest.main() 
# apparently, modules are loaded on each test separately 
```

[如何增加python unittest中的详细程度？](https://stackoverflow.com/questions/6429577/how-to-increase-verbosity-in-python-unittest)没有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-17T18:10:27.953

```
if __name__ == '__main__':
    unittest.main(verbosity=2) 
```

见：[https ://docs.python.org/2/library/unittest.html](https://docs.python.org/2/library/unittest.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T15:54:59.063

或者，您可以直接使用`unittest.TextTestRunner`来运行您的测试。这允许设置详细级别：

```
suite = unittest.TestLoader().loadTestsFromTestCase(TestCaseClass)
unittest.TextTestRunner(verbosity=2).run(suite) 
```

这将从内部运行所有测试`TestCaseClass`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T15:45:43.970

您可以`set_verbose`从单元测试的`setUp`方法中调用。

# doxygen - 如何在不记录每个成员的情况下使 doxygen 提取枚举值？

> ID：13034209
> 
> 赞同：1
> 
> 时间：2012-10-23T15:40:13.377
> 
> 标签：doxygen

我有一个简单的枚举，不需要记录每个成员。我仍然希望文档中的所有成员都可以看到可能的值。

有没有办法让 doxygen 提取枚举的所有成员而不将其设置为 EXTRACT_ALL？

有问题的枚举：

```
/// \brief This enum holds all normal and special keys
enum Key
{
   KEY_A = 'A',
   KEY_B = 'B',
   // etc
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:46:50.110

查看[成员分组](http://www.doxygen.nl/manual/grouping.html#memgroup)和[`DISTRIBUTE_GROUP_DOC`](http://www.doxygen.nl/manual/config.html#cfg_distribute_group_doc)配置文件选项。

从`DISTRIBUTE_GROUP_DOC`文档中：

> 如果文档中使用了成员分组并且`DISTRIBUTE_GROUP_DOC`标签设置为`YES`，那么 doxygen 将为该组的其他成员重用该组中第一个成员（如果有）的文档。默认情况下，必须明确记录组的所有成员。

另外，记得[有`\file`个地方](https://stackoverflow.com/q/1717941/623518)。

# javascript - 在javascript中转换base64字符串中的图像？

> ID：13034212
> 
> 赞同：2
> 
> 时间：2012-10-23T15:40:21.227
> 
> 标签：javascript, html, base64

我有带有 ENCTYPE="multipart/form-data" 的 html 表单。它只包含从本地框中浏览文件的“文件”类型的文本框。这是文本框代码片段

```
<td>
    <input name="fileNameAttr" id="filePath" size="52" type="file" value="">
</td> 
```

我从本地框中浏览文件一些图像文件。在我选择文件的那一刻，filePath 会填充到文本框中。现在单击某个按钮，我想将图像转换为 javascript 中的 base64 字符串。**我没有使用 HTML5。我可以在javascript中实现它吗？**

我可以在网上看到一些使用 HTML5 的解决方案，但这并不能解决我的目的。如果我需要使用一些第三方实用程序，我可以这样做。

**编辑：-**看起来 jquery 可以帮助 $.base64.encode("this is a test"); 但是如何将它与 type="file" 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:42:46.467

这可以通过 HTML5 来`<canvas>`完成

或者

如果你有 node.js 作为一个选项，那么在 img 中尝试类似的东西

或者`<img src="data:image/png;base64,jkasfhsdjkhsadf" />`

例子

```
var fs = require('fs');
var base64_data = new Buffer(fs.readFileSync('sample.png')).toString('base64');
console.log('<img alt="sample" src="data:image/png;base64,' + base64_data + '">'); 
```

检查这个（也是例子的来源）

[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)

好读

1.  [如何使用 Javascript 编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)//它的图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:44:09.560

如果您可以通过 javascript 访问本地文件系统，什么会阻止您读取密码文件或其他私人数据？

由于显而易见的原因，这是您不能做的，将来也不会被允许！

# c# - 从实体列表中查找实体

> ID：13034214
> 
> 赞同：0
> 
> 时间：2012-10-23T15:40:24.533
> 
> 标签：c#, .net, linq, .net-4.0

我有一个如下实体列表。

```
Entity1 { Id=1, From=01/01/2011, To=31/01/2011, Status=true }
Entity2 { Id=1, From=01/02/2011, To=28/02/2011, Status=false}
Entity2 { Id=2, From=01/02/2011, To=28/02/2011, Status=false}
Entity3 { Id=3, From=01/01/2011, To=31/01/2011, Status=true }
Entity4 { Id=4, From=01/01/2011, To=31/01/2011, Status=true }
Entity5 { Id=1, From=01/03/2011, To=31/03/2011, Status=false}
Entity6 { Id=4, From=31/03/2011, To=10/04/2011, Status=false} 
```

我想找到具有最旧日期和最晚日期的实体。（实体涵盖从日期到至今的全部内容）

**基本上我需要获取与日期不同的实体。此外，起始实体应具有最早的起始日期，最终实体应具有最新的截止日期**

在这种情况下，预期结果是从***01/01/2011***到***10/04/2011***的实体。

**更新**

```
Entity 1 has the oldest from date : 01/01/2011
Entiry 2 which falls under : 01/01/2011 and 10/04/2011
Entity 3 which falls under 01/01/2011 and 10/04/2011(but entity 1 has same from and to date as Entity3 so entity 3 not a valid)
Entity 4 which falls under 01/01/2011 and 10/04/2011(but entity 1 has same from and to date as Entity4 so entity 4 not a valid)
Entity 5 which falls under : 01/01/2011 and 10/04/2011
Entity 6 has the most recent To date : 10/04/2011
So Valid entries are Entity1, Entity2, Entity5, Entity6 
```

我尝试过这样的事情

```
var dates = (EntityList.GroupBy(offer => offer.id)
             .Select(group =>
                 new { offerid = group.Key,
                       offers = group.OrderBy(o => o.From)
                       })
             .OrderBy(g => g.offers.First().From) 
        . FirstOrDefault
 ().offers.First(); 
```

但我认为它应该不分组，但我不太确定

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:01:34.107

你不能使用这样的东西：

```
var selectedEntity = EntityList.OrderBy(e => e.From)
                               .ThenByDescending(e => e.To)
                               .FirstOrDefault(); 
```

更新：

你可以使用 Distinct 方法吗？

```
var selectedEntity = EntityList.OrderBy(e => e.From)
                               .ThenByDescending(e => e.To)
                               .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:46:05.650

```
var dates = from e in EntityList
            orderby e.Id
            group e by new { e.From, e.To } into g
            select g.First(); 
```

查询将仅返回具有相同起始日期的组中的第一个（按 id 排序）实体。

# c# - Sql Server 在插入存储过程后运行更新存储过程

> ID：13034223
> 
> 赞同：2
> 
> 时间：2012-10-23T15:41:03.503
> 
> 标签：c#, .net, tsql, stored-procedures, insert

我有两个存储过程，一个是到`insert`表的一条记录，另一个是到`update`这条记录的一列。

一个首先`insert`运行，然后我将运行一些其他进程（包括用于其他表的存储过程。）最后我将运行`update`存储过程以将记录更新为已完成。

但是，有时`update`找不到匹配项（刚刚插入的那个，我使用一些变量（其中一个是日期时间类型），我传递给`insert`存储过程来查找刚刚插入的记录然后进行更新。我使用了更新触发找到这个原因。）

在运行之前如何确保数据已经在表中`update`？我需要一个`while`循环吗？

**编辑**：我在一个`BackgroundWorker.DoWork`事件处理程序中运行这些

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:03:19.470

这与它的声音不是异步的，因此您不需要让更新脚本等待插入。

也许我是误会了。但是，让我印象深刻的是，您是在说您正在寻找要使用日期时间而不是其身份更新的行。如果您的插入过程返回 SCOPE_IDENTITY，然后将其传递给更新过程...听起来应该可以解决更新找不到正确行的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:58:11.813

在一个事务中运行所有数据库内容。

简单示例：

```
using(TransactionScope scope = new TransactionScope())
{
  // init connection, command etc.

  ...

  insertCommand.ExecuteNonQuery();

  ...

  updateCommand.ExecuteNonQuery();

  scope.Complete();
} 
```

# android - 适用于 Android 的 Android 分析 sdk 不起作用

> ID：13034225
> 
> 赞同：1
> 
> 时间：2012-10-23T15:41:06.550
> 
> 标签：android, google-analytics

我正在尝试在我的 Android 应用中使用 Google 分析。因此，我在我的 Google 分析帐户中创建了一个新的测试应用程序并将我的应用程序链接到它。

这是我用来这样做的代码

在我的活动中

```
tracker = GoogleAnalyticsTracker.getInstance();
tracker.startNewSession("UA-xxxx-yy", 1, this); 
```

在片段（或页面）中

```
((TestActivity)getActivity()).tracker.trackPageView("/blah");// + data.name);
((TestActivity)getActivity()).tracker.trackEvent("stam", "succeed", "yes", 2);
((TestActivity)getActivity()).tracker.dispatch(); 
```

但由于某种原因，我在我的帐户上什么也看不到。我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:00:26.307

检查您的 Google Analytics SDK：libGoogleAnalyticsV2.jar 为我工作（不是 libGoogleAnalytics.jar）。

这是文档[https://developers.google.com/analytics/devguides/collection/android/v2/](https://developers.google.com/analytics/devguides/collection/android/v2/) 根据您应该使用`EasyTracker`或`GoogleAnalytics`代替的文档`GoogleAnalyticsTracker`

```
@Override
public void onStart() {
    super.onStart();
    EasyTracker.getInstance().activityStart(this); 
} 
```

# haskell - 显示单子在组合下未关闭的具体示例（有证据）？

> ID：13034229
> 
> 赞同：86
> 
> 时间：2012-10-23T15:41:20.963
> 
> 标签：haskell, monads, composition, proof

众所周知，应用函子在组合下是封闭的，但单子不是。然而，我一直很难找到一个具体的反例来证明单子并不总是组成。

[这个答案](https://stackoverflow.com/a/7040998/305559)给出`[String -> a]`了一个非单子的例子。在玩了一会儿之后，我直觉地相信它，但这个答案只是说“无法实现加入”而没有真正给出任何理由。我想要更正式的东西。当然 type 有很多函数`[String -> [String -> a]] -> [String -> a]`；必须证明任何这样的功能都不一定满足单子定律。

任何例子（附有证明）都可以；我不一定要特别寻找上述示例的证明。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-24T03:54:21.480

考虑这个与 monad 同构的`(Bool ->)`monad：

```
data Pair a = P a a

instance Functor Pair where
  fmap f (P x y) = P (f x) (f y)

instance Monad Pair where
  return x = P x x
  P a b >>= f = P x y
    where P x _ = f a
          P _ y = f b 
```

并用`Maybe`monad 组合它：

```
newtype Bad a = B (Maybe (Pair a)) 
```

我声称这`Bad`不能是一个单子。

* * *

**部分证明：**

只有一种方法可以定义`fmap`满足`fmap id = id`：

```
instance Functor Bad where
    fmap f (B x) = B $ fmap (fmap f) x 
```

回忆一下单子定律：

```
(1) join (return x) = x 
(2) join (fmap return x) = x
(3) join (join x) = join (fmap join x) 
```

对于 的定义`return x`，我们有两种选择：`B Nothing`或`B (Just (P x x))`。很明显，为了有任何`x`从（1）和（2）返回的希望，我们不能扔掉`x`，所以我们必须选择第二个选项。

```
return' :: a -> Bad a
return' x = B (Just (P x x)) 
```

那叶子`join`。由于只有几个可能的输入，我们可以为每个输入一个案例：

```
join :: Bad (Bad a) -> Bad a
(A) join (B Nothing) = ???
(B) join (B (Just (P (B Nothing)          (B Nothing))))          = ???
(C) join (B (Just (P (B (Just (P x1 x2))) (B Nothing))))          = ???
(D) join (B (Just (P (B Nothing)          (B (Just (P x1 x2)))))) = ???
(E) join (B (Just (P (B (Just (P x1 x2))) (B (Just (P x3 x4)))))) = ??? 
```

由于输出具有类型`Bad a`，因此唯一的选项是`B Nothing`或`B (Just (P y1 y2))`where `y1`，`y2`必须从中选择`x1 ... x4`。

在情况 (A) 和 (B) 中，我们没有 type 的值`a`，因此在这两种情况下我们都被迫返回`B Nothing`。

情况 (E) 由 (1) 和 (2) 单子定律确定：

```
-- apply (1) to (B (Just (P y1 y2)))
join (return' (B (Just (P y1 y2))))
= -- using our definition of return'
join (B (Just (P (B (Just (P y1 y2))) (B (Just (P y1 y2))))))
= -- from (1) this should equal
B (Just (P y1 y2)) 
```

为了`B (Just (P y1 y2))`在情况 (E) 中返回，这意味着我们必须从 or 中选择`y1`一个`x1`，`x3`并且`y2`从`x2`or中选择一个`x4`。

```
-- apply (2) to (B (Just (P y1 y2)))
join (fmap return' (B (Just (P y1 y2))))
= -- def of fmap
join (B (Just (P (return y1) (return y2))))
= -- def of return
join (B (Just (P (B (Just (P y1 y1))) (B (Just (P y2 y2))))))
= -- from (2) this should equal
B (Just (P y1 y2)) 
```

同样，这表示我们必须从 or 中选择`y1`一个`x1`，`x2`并且`y2`从`x3`or中选择一个`x4`。结合两者，我们确定 (E) 的右手边一定是`B (Just (P x1 x4))`。

到目前为止一切都很好，但是当您尝试填写 (C) 和 (D) 的右侧时，问题就来了。

每个有 5 种可能的右手边，并且没有一种组合有效。我对此还没有很好的论据，但我确实有一个程序可以详尽地测试所有组合：

```
{-# LANGUAGE ImpredicativeTypes, ScopedTypeVariables #-}

import Control.Monad (guard)

data Pair a = P a a
  deriving (Eq, Show)

instance Functor Pair where
  fmap f (P x y) = P (f x) (f y)

instance Monad Pair where
  return x = P x x
  P a b >>= f = P x y
    where P x _ = f a
          P _ y = f b

newtype Bad a = B (Maybe (Pair a))
  deriving (Eq, Show)

instance Functor Bad where
  fmap f (B x) = B $ fmap (fmap f) x

-- The only definition that could possibly work.
unit :: a -> Bad a
unit x = B (Just (P x x))

-- Number of possible definitions of join for this type. If this equals zero, no monad for you!
joins :: Integer
joins = sum $ do
  -- Try all possible ways of handling cases 3 and 4 in the definition of join below.
  let ways = [ \_ _ -> B Nothing
             , \a b -> B (Just (P a a))
             , \a b -> B (Just (P a b))
             , \a b -> B (Just (P b a))
             , \a b -> B (Just (P b b)) ] :: [forall a. a -> a -> Bad a]
  c3 :: forall a. a -> a -> Bad a <- ways
  c4 :: forall a. a -> a -> Bad a <- ways

  let join :: forall a. Bad (Bad a) -> Bad a
      join (B Nothing) = B Nothing -- no choice
      join (B (Just (P (B Nothing) (B Nothing)))) = B Nothing -- again, no choice
      join (B (Just (P (B (Just (P x1 x2))) (B Nothing)))) = c3 x1 x2
      join (B (Just (P (B Nothing) (B (Just (P x3 x4)))))) = c4 x3 x4
      join (B (Just (P (B (Just (P x1 x2))) (B (Just (P x3 x4)))))) = B (Just (P x1 x4)) -- derived from monad laws

  -- We've already learnt all we can from these two, but I decided to leave them in anyway.
  guard $ all (\x -> join (unit x) == x) bad1
  guard $ all (\x -> join (fmap unit x) == x) bad1

  -- This is the one that matters
  guard $ all (\x -> join (join x) == join (fmap join x)) bad3

  return 1 

main = putStrLn $ show joins ++ " combinations work."

-- Functions for making all the different forms of Bad values containing distinct Ints.

bad1 :: [Bad Int]
bad1 = map fst (bad1' 1)

bad3 :: [Bad (Bad (Bad Int))]
bad3 = map fst (bad3' 1)

bad1' :: Int -> [(Bad Int, Int)]
bad1' n = [(B Nothing, n), (B (Just (P n (n+1))), n+2)]

bad2' :: Int -> [(Bad (Bad Int), Int)]
bad2' n = (B Nothing, n) : do
  (x, n')  <- bad1' n
  (y, n'') <- bad1' n'
  return (B (Just (P x y)), n'')

bad3' :: Int -> [(Bad (Bad (Bad Int)), Int)]
bad3' n = (B Nothing, n) : do
  (x, n')  <- bad2' n
  (y, n'') <- bad2' n'
  return (B (Just (P x y)), n'') 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-03T12:43:18.307

对于一个小的具体反例，请考虑终端单子。

```
data Thud x = Thud 
```

的`return`and `>>=`just go `Thud`，并且法律是微不足道的。

现在让我们也有 Bool 的 writer monad（比如说，xor-monoid 结构）。

```
data Flip x = Flip Bool x

instance Monad Flip where
   return x = Flip False x
   Flip False x  >>= f = f x
   Flip True x   >>= f = Flip (not b) y where Flip b y = f x 
```

呃，嗯，我们需要作曲

```
newtype (:.:) f g x = C (f (g x)) 
```

现在尝试定义...

```
instance Monad (Flip :.: Thud) where  -- that's effectively the constant `Bool` functor
  return x = C (Flip ??? Thud)
  ... 
```

参数化告诉我们`???`不能以任何有用的方式依赖于`x`，所以它必须是一个常数。因此，`join . return`也必然是一个常数函数，因此该定律

```
join . return = id 
```

无论我们选择什么定义，都必须失败`join`。`return`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-10-24T10:25:22.203

## 构造排中

`(->) r`是每个的单子，`r`并且`Either e`是每个的单子`e`。让我们定义它们的组成（`(->) r`内部，`Either e`外部）：

```
import Control.Monad
newtype Comp r e a = Comp { uncomp :: Either e (r -> a) } 
```

我声称**如果`Comp r e`是每个人的单子`r`，`e`那么我们就可以实现[排中律](https://en.wikipedia.org/wiki/Law_of_excluded_middle)**。[这在作为函数式语言类型系统基础的直觉逻辑](https://en.wikipedia.org/wiki/Intuitionistic_logic)中是不可能的（具有排中律等同于具有[call/cc](https://en.wikipedia.org/wiki/Call-with-current-continuation)运算符）。

假设`Comp`是一个单子。然后我们有

```
join :: Comp r e (Comp r e a) -> Comp r e a 
```

所以我们可以定义

```
swap :: (r -> Either e a) -> Either e (r -> a)
swap = uncomp . join . Comp . return . liftM (Comp . liftM return) 
```

（这只是Brent 提到`swap`的论文*Composing monads*中的函数，第 4.3 节，仅添加了 newtype 的（de）构造函数。请注意，我们不关心它有什么属性，唯一重要的是它是可定义的和完全的.)

现在让我们设置

```
data False -- an empty datatype corresponding to logical false
type Neg a = (a -> False) -- corresponds to logical negation 
```

并专门交换`r = b`, `e = b`, `a = False`:

```
excludedMiddle :: Either b (Neg b)
excludedMiddle = swap Left 
```

**结论：**即使`(->) r`和`Either r`是单子，它们的组成`Comp r r`也不能。

注意：这也反映在如何定义[`ReaderT`](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Reader.html#t%3aReaderT)和[`EitherT`](http://hackage.haskell.org/packages/archive/EitherT/0.2.0/doc/html/Control-Monad-Trans-Either.html)定义上。和*都* 同构于! 没有办法为 dual 定义 monad 。`ReaderT r (Either e)``EitherT e (Reader r)``r -> Either e a``Either e (r -> a)`

* * *

## 逃避`IO`行动

有许多相同的例子涉及`IO`并导致以`IO`某种方式逃脱。例如：

```
newtype Comp r a = Comp { uncomp :: IO (r -> a) }

swap :: (r -> IO a) -> IO (r -> a)
swap = uncomp . join . Comp . return . liftM (Comp . liftM return) 
```

现在让我们有

```
main :: IO ()
main = do
   let foo True  = print "First" >> return 1
       foo False = print "Second" >> return 2
   f <- swap foo
   input <- readLn
   print (f input) 
```

当这个程序运行时会发生什么？有两种可能：

1.  “First” 或 “Second”在我们从控制台读取*后*`input`打印出来，这意味着动作的顺序被*颠倒*了，动作从`foo`转义到 pure `f`。
2.  或`swap`（因此`join`）放弃该`IO`动作，并且从未打印过“第一”或“第二”。但这意味着`join`违反法律

    ```
    join . return = id 
    ```

    因为如果`join`把`IO`动作扔掉，那么

    ```
    foo ≠ (join . return) foo 
    ```

其他类似`IO`的 + monad 组合导致构建

```
swapEither :: IO (Either e a) -> Either e (IO a)
swapWriter :: (Monoid e) => IO (Writer e a) -> Writer e (IO a)
swapState  :: IO (State e a) -> State e (IO a)
... 
```

要么他们的`join`实现必须允许`e`逃脱，`IO`要么他们必须将其丢弃并用其他东西代替，这违反了法律。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-23T21:03:18.930

您的链接引用了此数据类型，因此让我们尝试选择一些特定的实现：`data A3 a = A3 (A1 (A2 a))`

我会随意挑选`A1 = IO, A2 = []`。为了好玩，我们还将它命名为 a`newtype`并给它一个特别尖的名字：

`newtype ListT IO a = ListT (IO [a])`

让我们在该类型中提出一些任意操作，并以两种不同但相同的方式运行它：

```
λ> let v n = ListT $ do {putStr (show n); return [0, 1]}
λ> runListT $ ((v >=> v) >=> v) 0
0010101[0,1,0,1,0,1,0,1]
λ> runListT $ (v >=> (v >=> v)) 0
0001101[0,1,0,1,0,1,0,1] 
```

如您所见，这违反了结合律：`∀x y z. (x >=> y) >=> z == x >=> (y >=> z)`.

事实证明，`ListT m`如果`m`是*可交换*单子，则只是单子。这可以防止一大类 monad 与 组合`[]`，这打破了“组合两个任意 monad 产生一个 monad”的普遍规则。

另请参阅：[https ://stackoverflow.com/a/12617918/1769569](https://stackoverflow.com/a/12617918/1769569)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-04-24T21:54:43.797

单子不构成。不是以通用方式 - 没有构成单子的通用方式。见[https://www.slideshare.net/pjschwarz/monads-do-not-compose](https://www.slideshare.net/pjschwarz/monads-do-not-compose)

# iphone - 如何创建构建阶段脚本以将 CFBundleVersion 设置为 SVN 修订号？

> ID：13034232
> 
> 赞同：1
> 
> 时间：2012-10-23T15:41:35.673
> 
> 标签：iphone, ios, xcode, bash

我在这里看到了一些其他问题，这些问题涉及创建 bash 脚本以更新 Xcode 中的版本和内部版本号，但是我每次构建时都找不到能够成功将 CFBundleVersion 更新为 SVN 修订号的问题.

有人有我可以使用的脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:02:46.987

我做了这个 ![在此处输入图像描述](../Images/ca1e20d4c09570435d17bb33efdae3d9.png)

为了更新 svn 版本号。每次构建应用程序时都会运行该脚本。字符串将被修剪，只留下当前的 svn 修订号，例如 4546。

希望能帮助到你！

PS：这里是代码，所以你不需要从图像中重写它。

```
echo -n ${TARGET_BUILD_DIR}/${INFOPLIST_PATH} \
| xargs -0 /usr/libexec/PlistBuddy -c "Set :CFBundleVersion `svnversion | cut -f 2 -d : | grep -o \"[0-9]*\"`" 
```

# rest - 使用 OAuth 授权自己的移动应用程序的优点和缺点

> ID：13034233
> 
> 赞同：5
> 
> 时间：2012-10-23T15:41:37.140
> 
> 标签：rest, authentication, oauth

通常，当 Web 服务需要授权第 3 方访问安全资源时，会使用 OAuth。

但是，如果我有自己的移动应用程序和自己的 Web 服务，并且在可预见的将来我不会将我的 API 暴露给 3rd 方应用程序，那么是否有任何理由使用 OAuth 来验证用户身份？在这种情况下使用 OAuth 的优缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:21:43.247

以与第 3 方相同的方式使用您自己的 API 的最大优势之一是您正在对自己的系统进行[dogfood 测试。](http://en.wikipedia.org/wiki/Eating_your_own_dog_food)这样做往往会导致整体上更好的产品，因为您通常会更快地消除缺陷和打嗝，因为它们直接影响您并且不仅仅是第 3 方消费者通知您问题。

使用 OAuth 的另一个优点是您不必重新发明轮子，而且它已经是一个非常受支持的机制。用户也相当熟悉它，因此与您走不同的路线相比，您可以保持进入（和维护）的门槛更低。

由于您不希望立即将 API 公开给其他任何人，因此优势是，正如您所怀疑的那样，更小，但是如果您想在路上公开它，那么通过强迫自己使用，您将领先于游戏数英里它就在门口。

一个缺点是 OAuth 比其他可能的身份验证机制更复杂一些，但我仍然认为不重新发明轮子的净收益超过了轻微的额外复杂性。

# angularjs - 将数据从列表视图传递到 angular.js 中的详细视图

> ID：13034236
> 
> 赞同：5
> 
> 时间：2012-10-23T15:41:44.600
> 
> 标签：angularjs

我有一个典型的 CRUD 应用程序，其中包含用于列表视图和详细视图的单独路由和控制器。

列表的数据是使用`$resource`.

目前在我的详细视图控制器中，我使用`$resource`导致额外的 http 请求从服务器获取项目。

相反，由于在我的列表控制器中我已经有了我正在编辑的项目，我想将此项目从列表控制器传递到细节控制器。

但是我不知道怎么做。我可以为两个视图制作一个控制器，但这似乎不对。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:55:14.177

您可以使用服务在控制器之间共享数据：

示例：[https ://groups.google.com/d/msg/angular/IjKY_CRyRno/kP0M_LTzOTkJ](https://groups.google.com/d/msg/angular/IjKY_CRyRno/kP0M_LTzOTkJ)

或者我前段时间写的一个小提琴：http: [//jsfiddle.net/XqDxG/169/](http://jsfiddle.net/XqDxG/169/)

```
myModule.factory('mySharedService', function($rootScope) {
    var sharedService = {};
    sharedService.data = {};
    sharedService.data.message = '';

    return sharedService;
});

function ControllerZero($scope, sharedService) {
    // expose service data to angular scope
    $scope.sharedData = sharedService.data;

    $scope.handleClick = function(msg) {
        sharedService.data.message = msg;            
    };

    $scope.$watch('sharedData.message', function(msg) {
        $scope.message = msg;
    });
}

function ControllerOne($scope, sharedService) {
    $scope.sharedData = sharedService.data;

    $scope.$watch('sharedData.message', function() {
        $scope.message = 'ONE: ' + sharedService.data.message;
    });
} 
```

# performance - OrientDB 和 mmap（性能问题）

> ID：13034247
> 
> 赞同：1
> 
> 时间：2012-10-23T15:42:30.337
> 
> 标签：performance, orientdb

如果我遍历一个集群，使用以下代码：

```
for (ODocument document : m_database.browseCluster(clusterName)) {
    // ...
} 
```

我观察到性能非常差（大约每秒获取 10 条记录），但前提是为 Java 进程分配了足够的内存。如果我将内存限制为 64mb - 一切都运行得非常快。

正如我从分析器中看到的那样，在性能不佳的情况下，OFileMMap.map 经常被调用。并且 channel.map(....) 消耗了大部分时间。

如果我通过设置 file.mmap.strategy=4 完全禁用 mmap - 一切都变得越来越快，但不像 mmap 和受限内存分配那样快。

有任何想法吗？

# java - 在 Java 中强制转换有符号整数常量

> ID：13034249
> 
> 赞同：1
> 
> 时间：2012-10-23T15:42:35.890
> 
> 标签：java

简单的问题，我有一些自定义的 java 允许有 32 位硬件变量。我想为这样的变量分配一个常量 32 位值，但是，此命令在以下情况下失败：

```
HWINTVar a = const.var(toHWint(32), 0xf1234567); 
```

但适用于这种情况：

```
HWINTVar a = const.var(toHWint(32), 0x11234567); 
```

第一种情况的错误消息是常量值中可能会丢失临界数量的位，原因是我传递给此方法的常量已签名。有没有一种简单的方法可以告诉我如何在 Java 中将此常量值解释为无符号值？我试过：

```
 HWINTVar a = const.var(toHWint(32), (unsigned int) 0xf1234567);
 HWINTVar a = const.var(toHWint(32), (unsigned integer) 0xf1234567); 
```

但这显然不能在 Java 中工作，因为它不支持无符号数据类型。知道如何做到这一点吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:02:19.620

正确表示该常量的唯一方法是作为`long`文字，即`0xf1234567L`

假设您能够，更改 的定义，`const.var`使其`long`第二个参数为 a，然后提取底部 32 位以将它们放入您的`HWINTVar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:08:50.007

感谢您的所有反馈，它的工作原理是存储常量，然后为低 32 位使用掩码！

HWINTVar a = const.var(toHWint(32), 0xf1234567l & 0xfffffff);

# multithreading - MongoCursor 在单独的线程中倒带

> ID：13034252
> 
> 赞同：2
> 
> 时间：2012-10-23T15:42:40.977
> 
> 标签：multithreading, mongodb, cursor

我有一种情况，其中几个搜索过程被并行化到不同的线程中。每个线程获取相同的`pymongo.cursor.Cusor`对象来查看其结果，但每个线程执行不同的处理。我创建了一个如下所示的演示程序：

```
class SearchProcedure(Thread):

    weight = 0.1

    def __init__(self,weight=None):
        if weight:
            self.weight = float(weight)
        Thread.__init__(self)

    def start(self,query):
        self.query = query
        Thread.start(self)

    def run(self):
        if hasattr(self,'places'):
            for p in self.places.values():
                print p.name

        if hasattr(self,'posts'):
            for s in self.posts.values():
                s.rewind()
                print [(sh['name'],sh['description']) for sh in s]

    def attach_eligible(self,queue,**kwargs):
        self.queue = queue
        for (name,value) in kwargs.items():
            setattr(self,name,value) 
```

该`attach_eligible`方法是将地点和帖子的属性添加到过程对象的地方。同样，该`posts`属性是一组可以迭代的 mongo 游标。`rewind`如果另一个线程已经解开它，我会在运行结果之前将光标重置为其原始状态。这个想法是每个线程将使用不同的标准来搜索对象，然后将其结果发送到`queue`属性中以在调用/实例化范围内使用。

第一个线程运行良好，但所有后续线程都使用游标输出以下错误：

```
 File "/usr/local/lib/python2.7/dist-packages/pymongo/cursor.py", line 668, in __send_message
    assert response["starting_from"] == self.__retrieved
AssertionError 
```

倒带似乎没有效果。这是因为游标是通过引用传入的吗？它们是否也需要包含在队列中以保持锁定状态？甚至可以用 mongo 游标做这样的事情吗？如果可以的话，那就太好了，因为它会使搜索条件的处理性能更高，以使其同时执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:09:52.593

你不能在线程之间自由地共享任何改变状态的对象，除非它是专门设计来允许的。pymongo`cursor`不是为此而设计的。

您可以做的是克隆游标，然后为每个线程提供其自己的游标克隆副本。见[`cursor.clone`](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.clone)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-03T08:06:50.263

详细说明[@JohnnyHK 的回答](https://stackoverflow.com/a/13034802/13901111)：

根据[this answer](https://stackoverflow.com/a/45077643)，光标位于服务器端。所做的任何递增操作都会反映在服务器端，因此在第二个线程中复制光标（在某种程度上）就像在第二个线程中复制 URL，而不是对象/对象列表。即游标是指向数据库中数据的指针，不能被复制，除非在服务器端复制它。因此，您应该使用前面提到的 cursor.clone。

# .net - 本地化来自 XDocument.Validate() 的验证消息

> ID：13034255
> 
> 赞同：2
> 
> 时间：2012-10-23T15:42:47.993
> 
> 标签：.net, validation, localization, xsd, linq-to-xml

如何本地化从 XDocument.Validate() 返回的消息？它似乎为我返回了英文信息。

下面的代码片段写了消息“未声明'UndeclaredElement'元素。” 但这对非英语用户没有帮助。

```
[Test]
public void Test()
{
    var xDocument = XDocument.Parse("<UndeclaredElement/>");

    var stringReader =
        new StringReader("<xsd:schema xmlns:xsd='http://www.w3.org/2001/XMLSchema'/>");

    var xmlSchema = XmlSchema.Read(XmlReader.Create(stringReader), (o, e) => Console.WriteLine(e.Message));

    var schemaSet = new XmlSchemaSet();
    schemaSet.Add(xmlSchema);

    xDocument.Validate(schemaSet, (o, e) =>
    {
        Console.Out.WriteLine(e.Message);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:37:39.147

要本地化来自 XDocument.Validate() 的消息，必须做两件事：

1.  将当前文化设置为所需的语言：

    ```
    System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("fr-fr");
    System.Threading.Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("fr-fr"); 
    ```

2.  安装 .net 框架语言包（在我的例子中，版本 4 的包位于[此处](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=3324)）

感谢约翰的快速指示..

# git - 跨越多个目录的复杂 SVN

> ID：13034256
> 
> 赞同：2
> 
> 时间：2012-10-23T15:42:52.493
> 
> 标签：git, svn, version-control

我在一家机器制造公司从事编程工作。我们对多轴控制器、PLC、HMI 和其他产品进行编程，但它们都有自己的编程环境，其中大部分最初是为 Windows 95 编写的，此后一直没有真正更新。

一台机器能够拥有多个不同的驱动器，因此可以使用多种语言编写多个不同的程序，并且所有语言的文件结构都特定于该编程环境。

其中一种语言使用安装文件夹中的项目文件，如下所示：

```
c:\MACHSHOP\ <- programming language installation folder
c:\MACHSHOP\PROJECTS\ <- contains a file for each project definition
c:\MACHSHOP\PROJECTS\INTERACT <- Dir containing subdir's of all project's code, with the same name as the project definition file. 
```

另一种语言在安装目录内的 Projects 文件夹中只有一个目录，但不能轻易移动到另一个位置。

```
c:\directsoft\projects <- programs must reside in a subdir in here. 
```

甚至

```
c:\program3\projects <- Each program consists of 4-5 files located in here, no subdirs. 
```

我试图找到一个版本控制软件包，它允许我创建一个项目，然后跨这些目录链接各种项目文件夹和文件。这甚至可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:08:22.303

您可以使用链接到其他 SVN 存储库的[SVN 外部组件](http://svnbook.red-bean.com/en/1.0/ch07s03.html)来执行此类操作。或者，如果您想使用我推荐的分布式版本控制，您可以查看[Git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。在每种情况下，您都有指向其他存储库的链接，这些存储库可以指向不同的版本/分支，从而为您提供很大的灵活性。

# javascript - jQuery Validate 插件 - onLoad 值

> ID：13034263
> 
> 赞同：0
> 
> 时间：2012-10-23T15:43:13.920
> 
> 标签：javascript, jquery, validation

我有一组`input`字段和一组`input[type=checkbox]`字段。我已经成功地为包含这些字段的表单添加了 jQuery 验证。

当已经填充了一些值（加载时）时，问题就出现了。Validate 无法查看加载时的值，并在尝试提交带有这些加载值的表单时抛出错误。

# php - PHP MYSQL：重定向用户错误

> ID：13034264
> 
> 赞同：0
> 
> 时间：2012-10-23T15:43:24.637
> 
> 标签：php, mysql, redirect, header

如果某些条件为真，我试图将用户重定向到一个页面，但无论条件是否为真，它都会继续重定向到第一页。这是我的代码：

```
if($level ="100_level")
{
    header("location:course_reg.php");                      
}else {
    header("location:course_reg_200_level.php");            
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:44:50.253

在条件中，值被分配给`$level`而不是条件检查。在任何情况下，条件都是真实的。

要解决此问题，请将双等号 ( `==`) 置于您的 if 条件中，

```
if($level == "100_level") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:47:26.357

发生这种情况时，这意味着您的状况或代码有问题。首先，请将等号更改为下面。

```
if($level == "100_level") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:54:24.370

如果您有 1 = 符号，则您使水平完全等于符号的右侧。

如果您检查 ==，那么您确保它实际上是“100_level”

别忘了放 exit(); 在您的标头重定向代码之后。

# sql-server-2008 - Entity Framework 和 DateTime 的毫秒精度比较

> ID：13034266
> 
> 赞同：9
> 
> 时间：2012-10-23T15:43:31.007
> 
> 标签：sql-server-2008, entity-framework, datetime, compare, entity-framework-5

关于 DateTime 值的比较，我在 C# 下遇到了实体框架（代码优先）的问题。我使用下面定义的类 Validity（为本示例进行了简化）作为其他实体的超类，这些实体应及时具有定义的有效性。

```
public abstract partial class Validity {
    [Key]
    public int ID { get; set; }

    public DateTime? ValidFrom { get; set; }
    public DateTime? ValidTo { get; set; }

    /**
     * @brief This method builds an IQueryable from another IQueryable,
     * with added restriction on ValidityFrom/To
     *
     * An object's validitiy is defined to
     *   1\. start at timestamp ValidFrom (=inclusive) and
     *   2\. to end before ValidTo (=exclusive).
     *   3\. If ValidFrom or ValidTo is NULL, it means to be "unbounded"
     *      in start or end time (respectively)
     * 
     **/
    public static IQueryable<T> isValidAt<T>(IQueryable<T> query, DateTime time) where T : Validity
    {
        return query.Where<T>(c => 
               (!c.ValidFrom.HasValue || time >= c.ValidFrom)  // If ValidFrom != NULL, the given timestamp must be equal or "after" ValidFrom
            && (!c.ValidTo.HasValue || time < c.ValidTo));     // If ValidTo != NULL, the given timestamp must be "before" ValidTo
    }

    /**
     * @brief Shall invalidate the object at timestamp time (implicitly sets validTo attribute).
     **/
    public void inValidate(DateTime time)
    {
        ValidTo = time;
    }
}

public class Item : Validity {
    public string property { get; set; }
} 
```

在最后三行，您将找到我们将作为示例的“Item”类。让我们看一下这个查询：

```
DateTime requestTime = DateTime.Now;
var items = from n in Validity.isValidAt(db.Items, requestTime)
            select n; 
```

此查询应仅返回在“requestTime”时“有效”的 Item 类的返回对象。请注意，对于 ValidTo == requestTime，项目将被视为“无效”（ValidFrom 到 ValidTo 的时间跨度是 -exclusive-ValidTo；请参阅上面源代码中的注释）。

## 问题

我实际上 - 拥有 - 导致我的结果集“项目”拥有`ValidTo == requestTime`. 我刚刚通过

```
Item i= items.FirstOrDefault();
if ((i.ValidFrom.HasValue && i.ValidFrom > requestTime)
 || (i.ValidTo.HasValue && requestTime >= i.ValidTo)) {

   // ... SOME ERROR OUTPUT ...

} 
```

** 注意：此错误不会很少发生，但几乎在软件中始终如 .inValidate(requestTime); 通常调用来使对象无效。**

我使用 LinQ 生成的 SQL 查询通过 Microsoft SQL Server Management Studio（Microsoft SQL Server 2008 用作后端）手动检查。我必须自己声明/设置@p__linq__0，@p__linq__1（两者都意味着requestTime）......

```
DECLARE @p__linq__0 DATETIME
DECLARE @p__linq__1 DATETIME
SET @p__linq__0 = '2012-10-23 15:15:11.473'
SET @p__linq__1 = '2012-10-23 15:15:11.473' 
```

这实际上按预期工作。但是如果我使用 '2012-10-23 15:15:11' 作为值，我会收到错误的结果（如预期的那样）。它们与我的程序中的相似。所以我想这就是问题所在......

在数据库中，“DateTime”定义了毫秒，ValidFrom/ValidTo 被存储，包括毫秒。但我假设查询不包括时间戳的毫秒部分，出于任何原因......变量 requestTime 如何设置毫秒值。

不幸的是，我不知道如何检查查询中发送的实际值来验证这一点。我只知道如何使用 items.toString()-Method 来输出生成的 SQL，其中包含占位符。

我试过： 1.`db.Log = Console.Out;`由于“db.Log”不会被定义的错误而没有编译（自动完成也没有建议“Log”）。而 db 是从 DbContext 派生的。2\. 也将“项目”转换为 ObjectQuery，然后使用 .ToTraceString() 不起作用，程序在运行时崩溃并显示转换无效的错误消息。

如果这很重要：我使用 .NET 4.0 和 EntityFramework.5.0.0。

## 问题

1.  如何记录/输出完整的 SQL（包括占位符的值）？
2.  如何以优雅的方式解决这个问题？...我并不是说只是从 inValidate() 中分配给“ValidTo”的“时间”中减去一秒的黑客行为！

此致，

斯特凡

## 编辑（发现更多细节）

我通过 SQL 探查器检查了发生的情况，这似乎很好。查询时正确提供具有高（7 位）精度的时间戳。但是：我没有得到导致错误结果的 SELECT 。所以我猜测：它一定是一些缓存。所以我把一个`db.SaveChanges();`直接放在我的 LINQ 查询之前。现在我在探查器中得到了所有查询。

我尝试了以下代码来更改数据库中的数据类型。正如 Slauma 所建议的那样（参见[https://stackoverflow.com/a/8044310/270591](https://stackoverflow.com/a/8044310/270591)）。

```
modelBuilder.Entity<Item>().Property(f => f.ValidFrom)
  .HasColumnType("datetime2").HasPrecision(3);
modelBuilder.Entity<Item>().Property(f => f.ValidTo)
  .HasColumnType("datetime2").HasPrecision(3); 
```

我在重新启动之前删除了整个数据库......

**结果：**使用 HasPrecision(x) 没有成功；其中 x 是 0、3 之一；（直接在前面有或没有 db.SaveChanges()）；但是：x = 7 与 db.SaveChanges() 相当有效；直接在查询之前...

所以，不幸的是，这个问题仍然存在......

## 当前的解决方法

在将其分配给数据库对象属性之前，我将以下方法应用于任何 DateTime 值。它只是将 DateTime 舍入到整秒精度（我在数据库中配置）。这也适用于任何用于比较的 DateTime。

结果：这更像是一个黑客而不是一个解决方案！我需要为所有的 setter 方法编写访问函数，这样直接赋值就不会意外发生。

```
 public static DateTime DateTimeDBRound(DateTime time) {
        DateTime t = time;
        long fraction = (t.Ticks % TimeSpan.TicksPerSecond);
        if (fraction >= TimeSpan.TicksPerSecond / 2)
        {
            t = t.AddTicks(TimeSpan.TicksPerSecond - fraction);
        }
        else
        {
            t = t.AddTicks(-fraction);
        }
        return t;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:59:23.957

问题 1 如何记录/输出完整的 SQL（包括占位符的值）？我认为最好的方法是使用 SQL Server 分析器。它显示所有语句和值。或[http://www.hibernatingrhinos.com/products/EFProf](http://www.hibernatingrhinos.com/products/EFProf)

我知道没有其他方法可以提取执行的命令。

# cakephp-2.0 - 在 View(CakePHP) 中，获取当前控制器的正确方法？

> ID：13034267
> 
> 赞同：35
> 
> 时间：2012-10-23T15:43:32.210
> 
> 标签：cakephp-2.0

在 View 中，我可以使用

```
$this->action 
```

但是，我无法通过

```
$this->controller 
```

在 View 中获取当前控制器的正确方法是什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-24T00:31:45.780

用于`$this->params['controller']`获取当前控制器。

您可以执行 a`debug($this->params)`查看其他可用变量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-18T17:35:17.927

你可以像这样得到控制器：

```
echo "<pre>controller:".$this->request->params['controller']."</pre>"; 
```

虽然`$this->params`更短，`$this->request->params`但对自动完成更友好。您可以从这个问题中检查自动完成选项：[PHPStorm autocomplete for CakePHP custom helpers in view files](https://stackoverflow.com/questions/16905153/phpstorm-autocomplete-for-cakephp-custom-helpers-in-view-files)

有关请求的其他数据可以这样获取：

```
echo "<pre>action:".$this->request->params['action']."</pre>";

echo "<pre>request:"; print_r( $this->request ); echo "</pre>";

echo "<details><summary>this:</summary><pre>"; 
      print_r( $this ); echo "</pre></details>"; 
```

编辑：
从 CakePHP 3 开始，`$this->params`快捷方式已被删除。所以你应该使用`$this->request->params['controller']`CakePHP 3。
[http://book.cakephp.org/3.0/en/appendices/3-0-migration-guide.html#id2](http://book.cakephp.org/3.0/en/appendices/3-0-migration-guide.html#id2)
另请注意控制器的第一个字符是大写的。在 Cakephp 2 中它是小写的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-27T09:20:38.300

`$this->name`也给你控制器的名字。他们的区别`$this->params['controller']`在于它的第一个字母大写

```
debug($this->name);
debug($this->params['controller']); 
```

结果是：

```
 \app\Controller\AppController.php (line 176)

'Users'

\app\Controller\AppController.php (line 177)

'users' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-18T13:44:23.630

要获取当前控制器，请尝试以下操作：`$this->params['controller']`

要获取当前操作，请尝试以下操作：`$this->params['action']`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-19T07:23:01.240

我正在使用 cakephp 3.2

```
$this->params['controller'] - It is not working, showing error message as bellow.. 
```

> 《失踪的帮手》

**以下代码在 cakephp 3.2 中正常工作**

```
$this->request->params['controller'] - Working 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-22T12:32:44.153

对于 cakephp 3.6 及更高版本：

虽然上述解决方案可以工作，但它给出了不推荐使用的警告，并且在 cakephp 4 中不起作用。所以最好使用以下代码来获取控制器名称。它也适用于视图页面和控制器。

```
$this->request->getParam('controller') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-10T05:43:20.483

要获得电流，

*   控制器：`$this->params['controller']`
*   行动：`$this->params['action']`
*   论据：`$this->params['pass']`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-31T21:41:01.950

所有其他解决方案都是获取控制器名称......我需要控制器本身，所以我在`$this->Admin->_getController('MyControllerName')`view.ctp 文件中调用的 AdminHelper.php 中执行了以下函数

```
/******************************************************************
 * 
 ******************************************************************/
function _getController( $pControllerName ){
    if ( ! isset($this->controllersArray[$pControllerName]) ){
        $importRes = App::import('Controller', $pControllerName);// The same as require('controllers/users_controller.php');
        $strToEval = "\$controller = new ".$pControllerName."Controller;";
        $evalRes = eval($strToEval);
        if ( $evalRes === false ){
            throw new AppException("Eval returned an error into ".__FILE__." getController()");
        }
        $controller->constructClasses();// If we want the model associations, components, etc to be loaded
        $this->controllersArray[$pControllerName] = $controller;
    }

    $result = $this->controllersArray[$pControllerName];
    return $result;
} 
```

**注意：**不要忘记将它声明到您将使用的控制器中，例如：

*   人/view.ctp ->`$this->Admin->_getController('MyControllerName')`
*   PeopleController.ctp ->`var $helpers = array('Html', 'Form', 'Admin');`
*   AdminHelper.ctp ->`function _getController(...`

# django - node.js / django 迷你应用

> ID：13034268
> 
> 赞同：0
> 
> 时间：2012-10-23T15:43:34.077
> 
> 标签：django, node.js, express

[peepcode node.js 教程](https://peepcode.com/products/full-stack-nodejs-i)中的小应用程序概念给我留下了深刻的印象。而不是拥有全局文件夹：

```
/site/models
/site/views 
```

您为每个应用程序区域创建另一个级别的分离：

```
/site/login/models
/site/catalog/models 
```

AFAIU 应用领域必须彼此一无所知。这会产生一些关于将共享数据库模型放在哪里的问题，以及如果太多的共享模型意味着进行了错误的迷你应用分离。我试图找到更多关于这个迷你应用概念的材料。网络广播提到它在 django 中很常见。任何人在节点（首选）或 django 中都有关于它的经验或材料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:00:04.137

我还将我的 express.js 结构基于 Django。有两种不同的技术，它们都有局限性，它们都不完全像 Django 应用程序。

我在我的 app.js 文件中使用了这个 api。

```
var app = express();
require('./some-app1').init(app);
require('./some-app2').init(app); 
```

我的子应用目录：

```
 some-app
 - index.js
 - middleware.js 
```

这对于两种技术都是一样的。

接下来是我在我的应用程序不需要专用视图目录时使用的方式。

index.js

```
 var middleware = require('./middleware');

 var subapp = function (app) {
    app.get('/stuff', middleware.handle_stuff);
 }

 module.exports = subapp; 
```

这就是我开始做一些非常基本但效果很好的事情的方式。

对于第二种技术，您需要知道 Express 实际上有一个称为子应用程序的东西。这是一个真正的 Express 对象，您可以将其安装在基础应用程序之上。

index.js

```
 var app = express();

 app.get('/stuff', middleware.handle_stuff);

 var subapp = function (app) {
    app.use(app);
 }

 module.exports = subapp; 
```

在选择第一种或第二种技术之前，我大多只是问自己“我需要为这个应用程序提供一个专用的视图目录吗？”。如果答案是“是”，我会选择第二个。我见过其他人使用第二种技术，因为真正的子应用程序可以自己运行，因此您实际上可以进行隔离的 http 请求进行测试。

# java - Java 泛型类型擦除强制转换

> ID：13034269
> 
> 赞同：1
> 
> 时间：2012-10-23T15:43:36.937
> 
> 标签：java

当由于擦除导致类型信息在运行时不可用时，java 编译器如何知道为泛型集合中的对象提供适当的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:08:42.913

每当您调用 eg`list.get(foo)`并且列表是 an时，*调用者*而不是被调用者`ArrayList<String>`将结果`get`转换为 a 。调用者在编译时知道应该将结果转换为 (a )，因此可以将转换插入那里。`String`*`String`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:44:50.663

按照oracle[教程](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

*   如果类型参数是无界的，则将泛型类型中的所有类型参数替换为其边界或 Object。因此，生成的字节码只包含普通的类、接口和方法。
*   必要时插入类型转换以保持类型安全。
*   生成桥方法以保留扩展泛型类型中的多态性。

因此，您的类文件包含有界类（或）Object 而不是泛型类型。*

# jsf - 立即行动后单选按钮被重置（转换器和 ui:repeat 神秘地涉及）

> ID：13034270
> 
> 赞同：1
> 
> 时间：2012-10-23T15:43:39.353
> 
> 标签：jsf, immediate-attribute

我遇到了一个场景，即当视图从立即操作返回时，一组单选按钮被重置为未选择状态，尽管实际值被正确处理。刷新视图也会显示正确的值。奇怪的是，该行为仅在组件使用转换器且不在内部时才会发生，*我*将`ui:repeat`其缩小到以下示例：

### JSF 页面

```
<ui:repeat value="#{bean.stringList}" var="item" varStatus="iteration">        
    #{item} 
    <h:selectOneRadio value="#{bean.boolValue}" rendered="#{iteration.last}">
        <f:selectItems value="#{bean.boolItemList}" />
        <f:converter converterId="testConverter" />      
    </h:selectOneRadio><br /><br />

</ui:repeat>
<hr /> 
<h:selectOneRadio value="#{bean.stringValue}">
    <f:selectItems value="#{bean.stringItemList}" />                 
</h:selectOneRadio>    

<h:selectOneRadio value="#{bean.boolValue}">
    <f:selectItems value="#{bean.boolItemList}" />
    <f:converter converterId="testConverter" />        
</h:selectOneRadio>

<p>
<h:commandButton value="Submit" type="submit" />
<h:commandButton value="Do nothing, but immediate!" immediate="true" action="#{bean.doNothing}" />
</p>

<p>boolValue is: #{bean.boolValue}</p> 
```

### 支持豆

```
@ManagedBean(name = "bean")
@SessionScoped
public class Bean {

private List<String> stringList;
private List<SelectItem> stringItemList;
private List<SelectItem> boolItemList;
private boolean boolValue;    
private String stringValue;    
private int removeParam;

public Bean() {
    stringList = new ArrayList<String>();
    stringList.add("Test Item One");      
    stringList.add("Test Item Two");  

    stringItemList = new ArrayList<SelectItem>();
    stringItemList.add(new SelectItem("1", "Option One"));
    stringItemList.add(new SelectItem("2", "Option Two"));      

    boolItemList = new ArrayList<SelectItem>();
    boolItemList.add(new SelectItem(Boolean.TRUE, "This is real"));
    boolItemList.add(new SelectItem(Boolean.FALSE, "This is not real"));                                                                    
    }
// + getters and setters

public void doNothing(){
    }
} 
```

### 转换器

```
@FacesConverter("testConverter")
public class TestConverter implements Converter {

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value)
{       
    if (value!= null) {
        if (value.equals("real"))
        { 
        return Boolean.TRUE;          
        }
    }
    return Boolean.FALSE;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    boolean check = (Boolean) value;
    if (check)  return "real";
    else        return "unreal";
    }
} 
```

所以我们有：

*   一组单选按钮，由 的支持 bean 列表构建`SelectItem(String, String)`，保存到字符串。无需转换器。
*   一组单选按钮，由 的支持 bean 列表构建`SelectItem(boolean, String)`，保存为布尔值。提供了一个转换器来将布尔值映射到一些单词（“real”/“unreal”） - 只是为了替换标准转换器（“true”/“false”）
*   提交按钮 + 输出以测试值是否设置正确。
*   一个带有一些即时操作的按钮，除了改变 JSF 生命周期之外什么都不做。

有了这个，人们可以玩耍并观察以下内容：

*   每当页面从即时操作返回时，带有转换器的收音机*不* `ui:repeat`显示任何值，这意味着：没有选择收音机
*   但是，该值实际上在提交期间设置正确。刷新页面将导致正确设置收音机。
*   *内部**相同*的无线电组工作正常，没有转换器的无线电组也可以 *`ui:repeat`*

 *根据更好的知识进行测试，我检查了转换器无线电放在 a`<c:foreach>`中而不是`ui:repeat`显示相同的错误（正如我所预料的那样，因为它只是构建树然后消失），并且将一些标准转换器附加到字符串 -收音机不会让它们坏掉。关于 BalusC 的评论，将 bean 更改为 ViewScoped 不会影响问题 - 只有这样，刷新才会为您提供一个空白的默认初始化页面。

在这里，我的知识已经走到了尽头。我真的不知道如何进一步减少这种情况或为什么它会这样。所以...嗯...想法有人吗？

我从服务器人那里得到的规范：Mojarra JSF API Implementation 2.0.5-FCS、JSF 2.0 和 Facelets，服务器是 Weblogic 11g 10.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:04:27.453

我仍然没有真正理解它为什么会这样，但我找到了两个解决方案。

1)`doNothing()`方法不符合[规范](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/h/commandLink.html)，要求签名必须匹配`java.lang.Object action()`

如果我正确添加返回值以返回同一页面（通过文件名“test.xhtml”或通过`outcome`和`navigation-rule`faces-config 中），一切正常。

2）如果我添加`f:ajax`到按钮来执行和重新渲染页面的一部分，一切都很好。我玩了一会儿，页面的哪一部分被执行/重新渲染似乎并不重要（除了应用值等的正常效果）。

我仍然对最初相当随机的行为（以及 ui:repeat 和转换器如何影响它）感到有些困惑。看来我对 JSF 如何在*没有*显式导航的情况下返回页面的理解是不完整的。这也适用于通过`FacesContext#renderResponse`. 任何帮助表示赞赏（如果合适，我也可以打开一个新问题，然后编辑此答案）*

# internet-explorer - Bootstrap、Less 和 Visual Studio (Chirpy) 导致 IE 过滤器问题

> ID：13034272
> 
> 赞同：0
> 
> 时间：2012-10-23T15:43:43.437
> 
> 标签：internet-explorer, twitter-bootstrap, less, chirpy

我正在使用 Chirpy 为我生成 LESS 文件，但 IE 中使用的过滤器渐变使渲染器保持以下输出，这会导致蓝黑色渐变。如果我删除 alpha 和 () 它工作正常，但没有渐变。编译器有问题吗？

```
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='argb(#0088cc)',endColorstr='argb(#0077b3)',GradientTy 
```

页眉和页脚应具有红色渐变背景。

![页眉和页脚应具有黑色渐变背景。](../Images/797c570c700817621af45e423133cac5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:57:57.807

我在使用不支持 argb 函数的旧版本 dotless（.NET LESS 编译器）时遇到了这个问题。

预期的结果是`argb(#222)`被翻译成`#ff222222`

最新的 dotless 为我解决了这个问题 - 也许有更新版本的 chirpy？

如果没有，您可以尝试从引导程序的 mixins.less 文件中的过滤规则中删除 argb 调用。

正确的过滤器值是这样的：

```
progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff222222', endColorstr='#ff111111', GradientType=0) 
```

# django - django 'tuple' 对象没有属性 'id'

> ID：13034278
> 
> 赞同：1
> 
> 时间：2012-10-23T15:43:59.747
> 
> 标签：django

这是我的观点，我用一种形式来称呼它。当我提交表单时，我得到“'tuple' 对象没有属性 'id'”

```
@login_required
def _login_save(request, form):
    if request.method == 'POST':
        form = LoginSaveForm(request.POST)
        if form.is_valid():
            # Create or get login.
            login1 = login.objects.get_or_create(
                                                 id=1 #this is for testing reasons to get a specific record
                                                )
            login1.name=form.cleaned_data['name']
            login1.loginUrl = form.cleaned_data['url']
            login1.password = form.cleaned_data['password']
            login1.login_username = form.cleaned_data['Login_username']
            login1.notes = form.cleaned_data['notes']
            login1.save()
    return login1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:49:50.230

`get_or_create``(instance, created)`以where is的形式返回一个元组`created`，显然，一个布尔值告诉你它是找到对象还是必须创建它。使用`get_or_create`时最好立即解包：

```
login1, created = login.objects.get_or_create(...) 
```

然后，您可以`login1`按照您的假设使用。

# objective-c - 如何在单元测试（OCUnit）中访问 NSDocumentDirectory

> ID：13034279
> 
> 赞同：2
> 
> 时间：2012-10-23T15:44:00.580
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, ocunit

我正在尝试在 OCUnit 环境中运行我的应用程序。它使用一个 sqlite 数据库，我将它放在应用程序的文档文件夹中。

但是，从测试运行时，数据库的路径设置为：

```
~/Library/Application Support/iPhone Simulator/6.0/Documents/Test.sqlite 
```

虽然相同的代码给了我一条路径

```
~/Library/Application Support/iPhone Simulator/6.0/Applications/34536EFB-005A-44A1-AD99-07D6B9F6888B/Documents/Test.sqlite 
```

当我在模拟器上运行它时。

如何在我的测试中使用 NSDocumentDirectory 并获得我需要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:22:56.850

应用程序目标与测试目标不同，这就是您获得不同路径的原因。

使用 OCUnit 时，您可以`NSBundle`像这样进行测试：

```
NSString *path = [[NSBundle bundleForClass:[self class]] pathForResource:@"myResource" ofType:@"someType"]; 
```

您必须将数据库添加到测试目标的资源中并相应地使用它。

或者您可以像这样构建路径（取自此[OS Answer](https://stackoverflow.com/a/12882131/719656)）：

```
// Test case -> path inside "UnitTests" folder in the project directory
NSString *directory = [[NSFileManager defaultManager] currentDirectoryPath];
NSString *path = [directory stringByAppendingPathComponent:@"UnitTests/"];
path = [path stringByAppendingPathComponent:@"Test.sqlite"]; 
```

# php - 通过 PHP 删除特定的 SQL 列数据

> ID：13034280
> 
> 赞同：0
> 
> 时间：2012-10-23T15:44:01.847
> 
> 标签：php

嗨，我有一个如下的 SQL 表；

```
--------------------------
col1 | col2 | col3 | col4|
--------------------------
 10  |  20  | 30   | 40  |
 15  |  22  | 12   | 21  |
 11  |  40  | 50   | 60  | 
```

我正在尝试从表中删除列特定数据。例如，我想分别删除第 3 列和第 4 列中的 50 和 60。

我使用以下代码，但它也删除了包含 11 和 40 的整行。代码如下。有人可以告诉我如何改变下面的方法吗？谢谢。

```
 $result = mysqli_query($con,"DELETE FROM table1 WHERE col1 ='11'"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:45:58.647

使用 UPDATE 命令将列设置为 null 或 ''（空）。DELETE 删除整行。

```
$result = mysqli_query("UPDATE `table1` SET `col3`=NULL WHERE `col1`='11';"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:45:48.817

你需要`update`行，而不是`delete`像这样，

```
$result = mysqli_query($con,"UPDATE table1 SET col3='', col4='' WHERE col1 ='11'"); 
```

**注意：** `Update`用于更改特定列中的值，保持行不变。`Delete`用于从表中删除/删除整行。

# iphone - SA_OAuthTwitterEngine.m 中的 xcode 标志错误

> ID：13034281
> 
> 赞同：0
> 
> 时间：2012-10-23T15:44:06.377
> 
> 标签：iphone, objective-c, ios, ipad

我在 SA_ 中收到以下错误，`OAuthTwitterEngine.m`如下图所示

![在此处输入图像描述](../Images/53482414478a0e35c8f925cede4c4a4e.png)

我添加了框架和 twitter 文件，但我仍然收到此错误我无法找到解决方案在哪里？

请指导我..

# sql - 带有子句动态 where 参数的 SQL

> ID：13034284
> 
> 赞同：1
> 
> 时间：2012-10-23T15:44:09.007
> 
> 标签：sql, sql-server, tsql

```
`SELECT * FROM [case]
WHERE status  = '0'
and date_rec > '01 January 2012'
and 'ClientFilter' = 
CASE @clientcode 
    WHEN '' THEN 'ClientFilter' 
    ELSE
CASE WHEN client in 
(SELECT ID COLLATE DATABASE_DEFAULT FROM
GREEN.dbo.fnSplitter(@clientcode)) THEN 'ClientFilter' END  END; ` 
```

我想在上面的查询中添加一个额外的过滤器，类似于 clientfilter。有谁知道如何做到这一点。例如应该如下但不起作用。

```
`SELECT * FROM [case]
WHERE status  = '0'
and date_rec > '01 January 2012'
and 'ClientFilter' = 
CASE @clientcode 
    WHEN '' THEN 'ClientFilter' 
    ELSE
CASE WHEN client in 
(SELECT ID COLLATE DATABASE_DEFAULT FROM GREEN.dbo.fnSplitter (@clientcode))
THEN 'ClientFilter' END  END;
and 'SchemeFilter' = 
CASE @schemecode  WHEN '' THEN 'SchemeFilter' 
ELSE
CASE WHEN client in 
(SELECT ID COLLATE DATABASE_DEFAULT FROM GREEN.dbo.fnSplitter(@schemecode))
THEN 'SchemeFilter' END  END; ` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:17:04.060

我找到了解决方案。
这样，可以应用很多条件过滤器：

```
SELECT * FROM [case]
WHERE status  = '0'
AND date_rec > '01 January 2012'
AND 'SchemeFilter' = 
CASE @schemecode 
    WHEN '' THEN 'SchemeFilter' 
    ELSE
    CASE WHEN scheme in (SELECT ID COLLATE DATABASE_DEFAULT FROM GREEN.dbo.fnSplitter  (@schemecode)) THEN 'SchemeFilter' END  END
AND 'ClientFilter' = 
CASE @clientcode 
    WHEN '' THEN 'ClientFilter' 
    ELSE
    CASE WHEN client in (SELECT ID COLLATE DATABASE_DEFAULT FROM GREEN.dbo.fnSplitter(@clientcode)) THEN 'ClientFilter' END  END
AND 'Holderfilter' = 
CASE @holdercode
    WHEN '' THEN 'Holderfilter' 
    ELSE
    CASE WHEN holder in (SELECT ID COLLATE DATABASE_DEFAULT FROM GREEN.dbo.fnSplitter (@holdercode)) THEN 'Holderfilter' END  END
AND 'Officefilter' = 
CASE @officecode
    WHEN '' THEN 'Officefilter' 
    ELSE
    CASE WHEN [current] in (SELECT ID COLLATE DATABASE_DEFAULT FROM  GREEN.dbo.fnSplitter(@officecode)) THEN 'Officefilter' END  END 
```

# javascript - 如何让 js 插件在发布时服务于 ASP.NET javascript 优化

> ID：13034285
> 
> 赞同：2
> 
> 时间：2012-10-23T15:44:08.607
> 
> 标签：javascript, optimization, asp.net-mvc-4

我的 ASP.NET MVC 4 网站中有一个 ckeditor 插件。该插件位于区域的内容文件夹中。

在调试环境中工作时，一切都很好。当我部署到生产服务器时，会启动 js 优化，与我使用的 ClientDependency 框架一起优化 javascript 以提供更少的文件，从而减少与服务器的连接。这很好，除了在我的例子中，像 ckeditor 这样的 javascript 插件在页面上呈现自己时会在内部引用其他 .js 文件。结果，页面的 javascript 请求了一些 .js 文件，就好像它们位于站点的根文件夹中一样（优化的 JS 文件“好像”来自根目录）。但实际上，请求的文件位于文件夹结构的深处。

除了禁用 JS 优化之外，还有更多概念性的解决方法吗？我可以设置一些自定义规则？还是我只是将所需的文件复制到根文件夹而忘记了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:19:33.710

您可以继续使用 CkEditor 进行优化和捆绑。

您只需要为您的 ckeditor 文件夹设置以下全局

```
CKEDITOR_BASEPATH = ApplicationPath + '/scripts/ckeditor/ckeditor_3.5.3/'; 
```

当你初始化一个ckeditor设置baseHref，例如

```
CKEDITOR.replace(editorName, {
      baseHref: CKEDITOR_BASEPATH, 
} 
```

# c# - 您需要做什么才能让 Excel 读取 OpenXML SDK 库创建的文件中的样式？

> ID：13034286
> 
> 赞同：0
> 
> 时间：2012-10-23T15:44:13.927
> 
> 标签：c#, openxml, openxml-sdk

这个库似乎有很多问题——尽管你已经正确地写入了数据，但它似乎经常做错事——是否有任何“神奇”的未记录的事情你只需要知道才能让它工作，或者它只是满满的虫子？！

我遇到了一些我要发布的答案，但其他人发现的任何更多“陷阱”都会很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:48:47.873

到目前为止我发现的事情是：

*   如果在 CellsFormats 中使用自定义元素，则需要添加空白 CellFormat
*   如果使用自定义填充，您需要添加 2 个空白填充
*   您需要 1 个空白 Border 到 Borders 元素（如果使用）

如果您不执行上述操作，则 excel 只会忽略您写入这些位置的样式元素。这可能会非常令人困惑，因为生成的 xml 看起来是正确的，并且您会看到您正确配置并正确应用了边框，但是当您在 excel 中打开它时，它不会做任何事情！

# apache-flex - Flex：滚动时如何为列表设置动画

> ID：13034289
> 
> 赞同：2
> 
> 时间：2012-10-23T15:44:25.820
> 
> 标签：apache-flex, effects, flex-spark

我正在使用`ensureIndexIsVisible`在 Flex 4.5 中滚动我的火花列表。

如何向此滚动添加动画（而不仅仅是跳转到此索引）？

# javascript - JavaScript RegEx.test() 有条件的中止/提前返回函数

> ID：13034295
> 
> 赞同：3
> 
> 时间：2012-10-23T15:44:44.013
> 
> 标签：javascript, regex, forms, submit

我有一个简单的类项目，我正在做一些表单验证。我们必须使用一些基本的正则表达式来验证输入。我在外部 js 文件中有此代码。

我有一个捕获 onsubmit 事件的函数，并返回是否继续回发的验证函数的值。

问题是当我调用 RegEx.test() 方法时，我的验证函数会停止并返回，并且回发会无意中进行。同样奇怪的是，如果我使用“new RegEx()”创建一个正则表达式对象，也会发生同样的事情。我不知道为什么。

这是我的代码：

```
$(document).ready(function() {

    // onsubmit event    
    $('form').submit(
        function() {
            return validation();
        }
        );

    // form validation
    function validation() {

        resetErrors();

        //variables
        var validates = true;
        var errorString = "";
        //var isEmail = new RegEx('^.+@.+\..+$'); // function stops here if line is uncommented and kicks off the postback?
        //alert("harro new regex?"); // does not run if above line is uncommented

        var isEmail = "/^.+@.+\..+$/"; // this doesn't stop the function
        alert("harro isEmail direct regex string assignment"); // runs

        var isZipCode = "/^(\d{5}$)|(^\d{5}-\d{4}$)/"; // this doesn't stop the function
        alert("harro isZipCode direct regex string assignment"); // runs

        //firstname
        if (!$('#firstName').val().trim()) {
            validates = false;
            $('#firstName').addClass('error');
            errorString += "First Name is blank. <br />";
        }
        //lastname
        if (!$('#lastName').val().trim()) {
            validates = false;
            $('#lastName').addClass('error');
            errorString += "Last Name is blank. <br />";
        }
        //email
        if (!$('#email').val().trim()) {
            validates = false;
            errorString += "Email is blank. <br />";
            $('#email').addClass('error');
        }
        // if this runs the test, the function stops here
        else if (!isEmail.test(email.value)) {
            validates = false;
            errorString += "Please enter a valid email address. <br />";
            $('#email').addClass('error');
        }
        alert("harro rest of function after email test?")// does not run if "else if" is ran

        //address
        if (!$('#address').val().trim()) {
            validates = false;
            $('#address').addClass('error');
            errorString += "Address is blank. <br />";
        }

        //zipcode
        if (!$('#zipCode').val().trim()) {
            validates = false;
            $('#zipCode').addClass('error');
            errorString += "Zipcode is blank. <br />";
        }
        // if this runs the test, the function stops here
        else if (!isZipCode.test(zipCode.value)) {
            validates = false;
            $('#zipCode').addClass('error');
            errorString += "Please enter a valide zip code. <br />";
        }
        alert("harro rest of function after zipcide test?")// does not run if "else if" is ran

        if (validates) {
            return true;
        }

        //output error messages
        $('#pageTitle').after("<p id='errorText'>" + errorString + "</p>");

        return false;
    }

    //reset validation errors
    function resetErrors() {

        $('#errorText').remove();
        $('#firstName').removeClass('error');
        $('#lastName').removeClass('error');
        $('#email').removeClass('error');
        $('#address').removeClass('error');
        $('#zipCode').removeClass('error');

    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:54:35.677

你错过了一个“p”，它是正则**表达式**而不是正则表达式

```
var isEmail = new RegExp('^.+@.+\..+$'); 
```

但一般来说，对于这些问题，只需打开 Firebug 或 Chrome 开发人员工具（在 Windows 中按 F12），然后您就会看到错误的原因。如果您在控制台中编写**new Regex()**，它会告诉您**Regex is not defined**，如果您开始编写 RegE...，它将自动为您完成 RegExp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:52:55.333

您可能会检查 JavaScript 控制台以获取错误消息。这些可能会导致您使用 RegExp 而不是 RegEx ！

# java - Java Swing 的 BDD 框架？

> ID：13034299
> 
> 赞同：1
> 
> 时间：2012-10-23T15:44:51.010
> 
> 标签：java, swing, maven, bdd, sonarqube

Java Swing 是否有一些 BDD 框架？像[Cucumber](http://cukes.info/ "黄瓜")这样的东西与 Maven 和 Sonar 一起工作会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:55:19.960

潜在地，您可以为此使用[Cucumber-JVM](https://github.com/cucumber/cucumber-jvm)，这与 Maven 配合得很好。

例如，你可以说，

```
When I click this button
Then this should happen 
```

这可能是可能的，但这取决于您如何设计项目以及是否从业务层抽象出 Swing 接口。不太确定你不想用声纳做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T04:34:28.217

[Ginkgo4j](http://paulcwarren.github.io/ginkgo4j/)是 Ruby 的 RSpec 的一个端口，具有 100% 可在 Java 中表达的优势。因此可用于测试在任何 Java 框架之上编写的任何 Java，并与 maven/surefire/sonar 完全集成。

```
@RunWith(Ginkgo4jRunner.class)
public class MySwingTests {
  {
    Describe("My Swing Tests", () -> {
      Context("when button X is clicked", () -> {
        It("should do this", () -> {
          // assertions
        });
      });
    });
  }
} 
```

# c# - 持续集成 - 测试分类

> ID：13034307
> 
> 赞同：0
> 
> 时间：2012-10-23T15:45:08.630
> 
> 标签：c#, unit-testing, continuous-integration, nunit, finalbuilder

当前设置使用 FinalBuilder 进行持续集成和构建企业范围的 ASP.NET 应用程序和服务套件。

我打算让 NUnit 与 CI 构建过程挂钩。

我最优先的测试类别应该是什么——如果失败了——应该停止这个过程？

我计划与产品负责人一起找出他们离不开的顶级功能。但是从一般的角度来看，什么会/应该被认为足够重要以停止该过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:51:59.520

我喜欢尽可能先运行最新的测试，然后是最常失败的测试，最后是所有剩余的测试。

您的测试需要帮助开发人员/QA 查明问题；他们不只是为了让管理层高兴。产品所有者最喜欢的测试仍然会运行，但为什么要在执行这些测试时让构建的其余部分等待呢？（无论如何，管理层都会将一切作为优先事项＃1）

任何构建杀戮测试都值得一个危险信号。您越快通过任何这些测试，您的团队作为一个整体的生产力就越高。

# c# - WCF 数据服务 - 保存嵌套/相关实体

> ID：13034309
> 
> 赞同：1
> 
> 时间：2012-10-23T15:45:13.520
> 
> 标签：c#, entity-framework-4, wcf-data-services, entity-model

我们正在使用以下系统设置：

*   WCF 数据服务 5.1.0-RC2
*   实体框架 4.0

问题：我们正在尝试使用 WCF 数据服务在客户端创建和保存嵌套/相关实体。如果我们尝试使用以下代码保存：

```
ParentEntity pEntity = context.pEntity;
ChildEntity cEntity = new ChildEntity();
pEntity.childEntities.Add(cEntity);
context.SaveChanges(); 
```

然后它不起作用。数据库中没有保存任何内容，也没有抛出异常。这通常仅适用于实体模型，但不适用于 WCF 数据服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:04:48.330

您是否还可以在 SaveChanges 调用之前调用以下 API：

context.AddRelatedObject("ParentEntitySet", "childEntities", cEntity);

# android - 选择（2）超时的奇怪行为

> ID：13034310
> 
> 赞同：0
> 
> 时间：2012-10-23T15:45:14.393
> 
> 标签：android, android-ndk, pjsip

检查 pjsip 的套接字选择的性能，我发现超时的行为非常奇怪。socket_select.c 中的源代码如下：

```
struct timeval os_timeout, *p_os_timeout;

PJ_CHECK_STACK();

PJ_ASSERT_RETURN(sizeof(pj_fd_set_t)-sizeof(pj_sock_t) >= sizeof(fd_set),
                 PJ_EBUG);

if (timeout) {
os_timeout.tv_sec = timeout->sec;
os_timeout.tv_usec = timeout->msec * 1000;
p_os_timeout = &os_timeout;
} else {
p_os_timeout = NULL;
}

return select(n, PART_FDSET_OR_NULL(readfds), PART_FDSET_OR_NULL(writefds),
      PART_FDSET_OR_NULL(exceptfds), p_os_timeout); 
```

我已经检查过了，传递给 select 函数的所有参数都是正确的，并且超时值总是在选择后重新初始化为正确的值。n 如果还设置为最大使用的文件描述符。

问题是，有时，超时被正确触发并以 0 退出，但有时，它会被阻塞一段随机时间（从几毫秒到几分钟），也返回 0。

我目前正在检查每个 fd_set 中的内容，以防万一，但如果有人知道可能出了什么问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:03:23.927

问题很可能不在 socket_select.c 中。你从哪里调用选择？您是否使用多个线程并从另一个线程调用 select？您可以发布您的代码或提供链接吗？

# .net - 这个用户控件怎么称呼？

> ID：13034311
> 
> 赞同：0
> 
> 时间：2012-10-23T15:45:20.657
> 
> 标签：.net, user-controls

这个用户控件怎么称呼？这是更好的列表框。

![任务管理器](../Images/1b1c9c615dceca6008d6c78aa416c820.png)

**感谢您的回答！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:50:24.283

这是一个[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)。本质上与使用的控件资源管理器相同（至少在较旧的 Windows 版本中）。它允许列、排序、各种视图（例如列表、表格、小图标、大图标）。

# objective-c - 自定义离散手势识别器能够发送多个离散动作并响应 requireGestureRecognizerToFail 要求

> ID：13034312
> 
> 赞同：2
> 
> 时间：2012-10-23T15:45:27.040
> 
> 标签：objective-c, ios, cocoa, uigesturerecognizer, gesture

我在自定义手势识别方面遇到了一些问题。我正在尝试做一些与 UIGestureRecognizer 实现的一般用例略有不同的事情。

## 进一步来说

*   我有离散的手势，但我希望他们在手势期间的特定点发送几条消息（例如，我有一个“循环”手势，我想在`newLoopRecognized`每次有新循环时发送一条消息，并`allLoopsRecognized`在手势结束）
*   我希望能够在一些消息后“重置”手势状态，但允许手势识别器仍然接收事件（并且不必删除所有触摸，并重新开始手势：每次发送`newLoopRecognized`消息时，我希望能够在不抬起手指并重新开始的情况下绘制新的循环，如果我切换到`GestureRecognized`状态，这是不可能的）
*   我想要几个手势可能需要其他手势识别器失败

我的理解是，当你在画一个连续的手势时，动作消息会定期发送到目标对象**，**而不一定是每次你改变你的状态时`StateChanged`再`StateChanged`一次？

因此这在我的情况下不起作用，因为我只想在某个特定事件（新循环的开始）发送事件。

此外，如果我使用连续手势方法，我将无法通过以下方式在每个连续循环之间重置我的状态：

```
...
if( new_loop_detected )
{
    self.state = UIGestureRecognizerStateChanged;
    [self reset];
}
... 
```

因为这会阻止我提取消息中的循环状态（例如速度和幅度），`newLoopRecognized`因为它们在发送消息之前被重置。

我可以使用一种复杂的方法，例如将我的所有状态变量复制到另一个我将在`newLoopRecognized`消息中使用的变量中，但这会很混乱。

我可以简单地在代码中发送我的通知消息，例如：

```
...
if( new_loop_detected )
{
    [self performSelector:actionOnNewLoopRecognized onTarget:target];
}
... 
```

但这会触发这些消息事件，即使我设置`requireGestureRecognizerToFail`了另一个手势识别器以允许这个手势识别器进行检测，而另一个手势识别器还没有时间失败或被识别。

## 可能的设计

如果没有简单的方法来使用常规 UIGestureRecognizer 实现来实现我的设计，我可能不得不扩展离散的手势状态

```
StatePossible -> StateRecognizing -> StateRecognized 
```

过渡到 StateRecognizing 将：

*   发送正确的动作消息（例如，我有一个额外的状态变量，我设置为`MessageIsOnNewLoopRecognized`or `MessageIsOnAllLoopsRecognized`）并在手势识别器上调用 reset
*   排除需要此手势识别器无法进行检测的手势识别器

## 问题

有没有办法使用常规的 UIGestureRecognizer 子类来做我想做的事情，或者我应该重新实现整个手势识别框架？是否有此类实现的合适示例，或者您知道正确的设计是什么？如果我要重新实现完整的手势框架，我希望它能够向后兼容常规手势，以便我无需重新实现即可使用 iOS 手势。

# java - 根据给定格式格式化数字

> ID：13034314
> 
> 赞同：1
> 
> 时间：2012-10-23T15:45:35.417
> 
> 标签：java, regex

我正在尝试将给定的手机号码格式化为给定的格式。号码将作为一个普通的 10 位数字存储在数据库中，并在 UI 中显示，我需要格式化这个号码。

我正在使用 JSTL 在 JSP 端显示它。我打算创建一个自定义函数，它应该接受手机号码/电话号码和所需的格式，并将返回所需格式的号码，如

(xxx) xxx-xxx xxx-xxx-xxx

我试图根据 regExp 拆分给定的电话号码，但不太确定如何执行此操作

```
String phoneNumber="1232345678";
Pattern pattern=Pattern.compile("\\d{3}\\d{3}\\d{4}");
String [] s=pattern.split(phoneNumber); 
```

拆分给定字符串和 den 的另一种方法可以使用连接产生所需的格式。

实现这一目标的最佳方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:18:57.350

你只需要*一行*：

```
String output = phoneNumber.replaceAll("(\\d{3})(\\d{3})(\\d{4})", "($1) $2-$3"); 
```

此代码产生以下效果：

```
1232345678 --> (123) 234-5678 
```

这里的道德是：

*   使用 API（而不是编写自己的代码）
*   不要使事情过于复杂（当有简单的方法可用时，使用它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:01:25.713

看看蛮力解决方案：

只需输入“（xxx）xxx-xxxx”之类的格式，代码就会将x替换为电话号码中的数字。

```
public static String format(String number, String format) {
    char[] arr = new char[format.length()];
    int i = 0;
    for (int j = 0; j < format.length(); j++) {
        if (format.charAt(j) == 'x')
            arr[j] = number.charAt(i++);
        else
            arr[j] = format.charAt(j);
    }

    return new String(arr);
} 
```

# python - 绘制 numpy.ndarray

> ID：13034318
> 
> 赞同：2
> 
> 时间：2012-10-23T15:45:43.903
> 
> 标签：python, numpy

我对矩阵进行 n 次运算，结果输出 n 个 2x1 矩阵。我将它们附加到一个列表中，并希望将它们绘制为具有 x,y 坐标的点。我发现我需要将它们转换为 numpy.array 所以我完成了 nx2 ndarray 并想要绘制`[:0]`和`[:1]`. 当我打印结果时，当我尝试绘制时，一切似乎都是正确的，我以空白图结束，根本没有点。我注意到 ndarrays 由空格而不是逗号分隔，但不知道如何解释它。我的代码如下所示：

```
import numpy as np
import pylab as pl

class GetMat(object):
    def __init__(self):
        self.Posp = np.matrix([[1,1],[1,1]])
        self.Velp = np.matrix([[1],[1]])
    def __call__(self):
        self.Posp = self.Posp*np.random.random()
        self.Velp = self.Velp*np.random.random()
        return self.Posp,self.Velp
    def __repr__(self):
        return "Posp = \n%s \nVelp = \n%s" % (self.Posp,self.Velp)
class Data(object):
    def __init__(self):
        self.x = 0
    def __call__(self,P,V):
        self.x = P*V
        return self.x[0,0], self.x[1,0]
    def __repr__(self):
        return "x = %s" % self.x

def Test():
    Nsamples = np.arange(0,10,1)
    newMat = GetMat()
    dataToPlot = Data()
    Xsaved = []
    for i in range(len(Nsamples)):
        z1,z2 = newMat()
        position, velocity = dataToPlot(z1,z2)
        Xsaved.append([position, velocity])
    print 'Xsaved = %s' % Xsaved
    print 'tyep Xsaved %s' % type(Xsaved)
    XsavedArr = np.array(Xsaved)
    print 'XsavedArr %s' % XsavedArr
    print 'tyep XsavedArr %s' % type(XsavedArr)
    print 'XsavedArr[:,0] = %s' % XsavedArr[:,0]
    print 'XsavedArr[:,1] = %s' % XsavedArr[:,1]
    pl.plot(np.array(XsavedArr[:,0]),np.array(XsavedArr[:,1]), linestyle='x-',label = 'Xsaved')
    pl.show()

if __name__ == '__main__':
    Test() 
```

我希望随机数的正常图不是空白。我找不到如何以 nx2 矩阵的形式绘制 ndarray

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:51:49.667

我不确定您要寻找哪种线条样式，但如果*您*将线条样式更改为：

```
linestyle='-' 
```

或者，如果您希望查看标有 的数据点`x`，只需删除关键字`linestyle`：

```
pl.plot(np.array(XsavedArr[:,0]),np.array(XsavedArr[:,1]),
        'x-',label = 'Xsaved') 
```

# mysql - 如何找到日期之间的平均间隔？

> ID：13034324
> 
> 赞同：0
> 
> 时间：2012-10-23T15:46:08.200
> 
> 标签：mysql, sql

我有项目表，每个项目都有它的开始时间和结束时间。

例如：

```
| id      | item | start      | end        |
+---------+------+------------+------------+
|    2703 | 223  | 2003-12-30 | 2004-01-16 |
|   47029 | 223  | 2004-04-21 | 2005-01-06 |
| 1386593 | 223  | 2005-04-19 | 2005-04-19 |
| 1386739 | 223  | 2005-04-19 | 2006-12-07 |
| 1432862 | 223  | 2006-02-08 | 2006-02-10 | 
```

我想找到项目之间的差距（一个人结束与下一次开始之间的天数）。示例中前两项之间的间隔为 93 天，后两项之间有重叠 302 天，计为零。因此，例如表格的差距是：

```
96
103
0
0 
```

我的目标是找到平均间隔（本例中为 49.75）或间隔天数的总和（199）。

可选目标：最小差距 (0) 和最大差距 (103)。

我现在的解决方案是遍历行并在数据库外部计算它，但我正在寻找快速解决方案（在 MySQL 内部）。我查看了聚合函数，但不知道这是否可能。找到这种平均差距的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:59:00.850

```
select avg(if (diff < 0, 0, diff))
from (
    select datediff(min(t2.start), t1.end) as diff
    from Table1 t1
    inner join Table1 t2 on t1.id < t2.id
    group by t1.end
) a 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/ea718/23)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:52:12.227

SELECT DATEDIFF(start,end) AS average_gap FROM table

@see`DATEDIFF()`来自 MySQL 文档。

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)

返回天数。该方法是减法，因此您需要在 SQL 之外处理负数。否则，你可以做`AVG(DATEDIFF(start, end))`

编辑：

你可以做

```
AVG(GREATEST(DATEDIFF(start,end), 0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:54:42.427

[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff/)和[AVG](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)的组合怎么样？

这样你会做 SELECT AVG(DATEDIFF(start,end)) AS gap

编辑：该死，打一拳！:P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:11:29.673

这不是您将能够仅在 SQL 查询中完成的事情，您将不得不将数据带入您的应用程序并确定这些间隔中的间隙和重叠。

这不会是一段微不足道的代码，但写起来应该很有趣。我建议遍历列表并将所有相交间隔相加，直到剩下一个或多个非相交间隔，您可以使用这些间隔计算间隙。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T16:14:56.150

```
select avg(diff) FROM 
( select @rt:=NULL, 
         @rt := if(datediff(start, @end)<0,0,datediff(start, @end)) diff, 
         @end := end from t) t; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T18:15:12.240

这（在某些情况下）可以仅使用 SQL 来解决。我会使用这个 VIEW 来查找所有的间隔：

```
CREATE VIEW items_intervals AS
SELECT
  items.end,
  min(items_1.start) as start
FROM
  items inner join items items_1 on items_1.id > items.id
GROUP BY
  items.end 
```

现在您所要做的就是聚合数据：

```
SELECT
  min(greatest(0,datediff(start,end))),
  max(greatest(0,datediff(start,end))),
  sum(greatest(0,datediff(start,end))),
  avg(greatest(0,datediff(start,end)))
FROM
  items_intervals 
```

当然，您可以将两个查询组合在一起，但我更喜欢将它们分开，它们更易于阅读。

这些查询仅在使用 id 正确排序记录时才有效，否则不会！

# perl - 使用内联图像和 MIME::LITE 向 gmail 发送电子邮件

> ID：13034327
> 
> 赞同：0
> 
> 时间：2012-10-23T15:46:10.217
> 
> 标签：perl, gmail, email-attachments

我需要向 gmail 发送一封包含一些内联图像的电子邮件。

我使用 perl 和 MIME:LITE，但 Gmail 将我的图像显示为附件，而不是内联。

有什么问题？

这是我的代码，

```
use MIME::Lite;

my $texto = '<html><body>hola <img src="cid:image" /> adios </body></html>';

#
my $msg = MIME::Lite->new(
    Date            => "Xxx, 22 Oct 2012 17:45:00 CET",
    From            => "pruebachunga@aqui.com",
    To              => 'chimpun@forum.chimpun',
    Subject         => "En un lugar de la mancha",
    'Message-ID'    => '123456789012345656789@8888888888888ldkf',
    Type            =>'multipart/related'
);

$msg->attach(
    Type => 'text/html',
    Data => $texto,
    Encoding => 'quoted-printable'
);

$msg->attach(
    Encoding => 'base64',
    Type => 'image/png',
    Path     => "image.png",
    Id => "image"
);

$msg->scrub(['x-mailer', 'Content-Disposition']);

print $msg->as_string; 
```

结果就是这封电子邮件（我剥离了图像部分）

```
Content-Transfer-Encoding: binary
Content-Type: multipart/related; boundary="_----------=_135100636840600"
MIME-Version: 1.0
Date: Xxx, 22 Oct 2012 17:45:00 CET
From: pruebachunga.com
To: chimpun@forum.chimpun
Subject: En un lugar de la mancha
Message-Id: 123456789012345656789@8888888888888ldkf

This is a multi-part message in MIME format.

--_----------=_135100636840600
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html

<html><body>hola <img src=3D"cid:image" /> adios </body></html>=

--_----------=_135100636840600
Content-Id: <image>
Content-Transfer-Encoding: base64
Content-Type: image/png; name="image.png"

iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAAEwO1XwAAAAB3RJTUUH1gYE
...
kmqg1wGgkx35p/KStnLuw2BGhXwIZqT+D8sxTLVK0VpuAAAAAElFTkSuQmCC

--_----------=_135100636840600-- 
```

**编辑**：

在网上阅读后，我认为该图像是附件并且存在称为“图像阻塞”的问题：[https ://www.campaignmonitor.com/resources/guides/image-blocking-in-email/](https://www.campaignmonitor.com/resources/guides/image-blocking-in-email/)

我保留了我的问题，因为人们可能会觉得这个问题很有趣。现在，我认为这段代码是正确的，并且与其他消息，其他ID，其他发送者......这段代码可以运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:24:59.387

您不应该擦洗“内容处置”字段 - 这很重要！

MIME::Lite 默认使用内联内容配置，但您也可以显式设置它

```
$msg->attach(
    Encoding => 'base64',
    Type     => 'image/png',
    Path     => 'image.png',
    Id       => 'image',
    Disposition => 'inline',
); 
```

它应该一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:57:19.903

在网上阅读后，我认为该图像是附件并且存在称为“图像阻塞”的问题：[https ://www.campaignmonitor.com/resources/guides/image-blocking-in-email/](https://www.campaignmonitor.com/resources/guides/image-blocking-in-email/)

我保留了我的问题，因为人们可能会觉得这个问题很有趣。现在，我认为这段代码是正确的，并且与其他消息，其他ID，其他发送者......这段代码可以运行良好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-09T07:55:13.170

我使用**外部**变体。

```
my $mailHTML = new MIME::Lite::HTML
    From    => $i_from,
    To      => $i_to,
    Subject => $i_subj,
    IncludeType => 'extern',
    HTMLCharset => 'utf-8'; 
```

在这种情况下，您需要在 HTML 中指定，例如

```
<img src="http://external_url/to_image"> 
```

http 或 https！

# c# - 加密嵌入在模板字段中的查询字符串？

> ID：13034329
> 
> 赞同：0
> 
> 时间：2012-10-23T15:46:12.000
> 
> 标签：c#, asp.net, gridview, encryption, query-string

我尝试通过以下类加密我的查询字符串：

[加密查询字符串。](http://madskristensen.net/post/HttpModule-for-query-string-encryption.aspx)

问题是：

我的链接在一个`gridview`，我不知道如何通过eval表达式以正确的方式使用加密方法。

这是我尝试过的：

**我的 .aspx**：

```
 <ItemTemplate>
 <a id="btnShowPopup6" runat="server" class="thickbox" href='<%#"PageDetail.aspx?QueryStringModule.Encrypt(code="+Eval("t_code")+"&serial="+Eval("t_Serial")+"&year="+Eval("t_Year")+"&AR=1"+"&TBiframe=true&height=600&width=950)"%>'>
  <asp:Image ID="Image43" runat="server" ToolTip="confirm" ImageUrl="Images/ok-blue.png"
   Width="20" Height="20" />
 </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:53:33.203

在方法后面创建一个代码并传递您要加密的数据..它返回一个链接

调用 ItemTemplate 中的方法

方法可能是这样的……

```
protected string getCode(string t_code, string t_Serial, string t_Year)
    {
        return "<a href=PageDetail.aspx?" + QueryStringModule.Encrypt("code=" + t_code + "&serial=" + t_Serial + "&year=" + t_Year + "&AR=1" + "&TBiframe=true&height=600&width=950") + ">code</a>";
    } 
```

现在像下面这样使用它

```
<asp:TemplateField HeaderText="YOUR LINK NAME">
                <ItemTemplate>
                <%# getCode(Eval("t_code").ToString(), Eval("t_Serial").ToString(), Eval("t_Year").ToString()) %>
                </ItemTemplate>
                </asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:09:14.723

将您的 href= 更改为以下内容，它应该可以工作。

```
<%#"PageDetail.aspx" + QueryStringModule.Encrypt("code="+Eval("t_code")+"&serial="+Eval("t_Serial")+"&year="+Eval("t_Year")+"&AR=1"+"&TBiframe=true&height=600&width=950")%> 
```

顺便说一句，不要将您的加密密钥重新用于此查询字符串模块以外的任何内容。不幸的是，httpmodule 所做的是创建一个*“加密预言机”*，您可以提供任何明文，它会返回给您一个用您的密钥加密的有效密文。因此，例如，如果您访问 pagedetail.aspx?myname=moe，它将为我加密 myname=moe 并给我一个已用您的密钥加密的值。如果您在代码的其他部分使用此值进行某种类型的验证或信息隐藏，我可以随意生成加密字符串。

# c# - 将基类型传递给方法

> ID：13034331
> 
> 赞同：-2
> 
> 时间：2012-10-23T15:46:15.557
> 
> 标签：c#, oop, inheritance

如果我有两个类，它们是从一个基类派生的，我怎么能写一个泛型方法，可以操纵两个类的继承属性，所以我不需要写两个方法......

```
abstract class BaseClass
{
    public int Id { get; set; }
    public string slug { get; set; }
}

public class State:BaseClass
{
    public string StateName{ get; set; }
    public string Description { get; set; }
}

public class City:BaseClass
{
    public string TownName { get; set; }
    public string someOtherProperty{ get; set; }

} 
```

“通用”方法：

```
public string Slugify( ?????BaseClass???? record)
{
    return record.slug = "...return...something...";
} 
```

像这样调用：

```
string a = Slugify(my_State_object); <--- not working
string b = Slugify(my_City_object);  <--- not working 
```

谢谢！

编辑：州和市是 EF-CodeFirst 类。最初两者都有 Id 和 slug - 字段。

然后我把它们变成了一个基类，因为我在两个（和其他）表中都有这些。

我想要一个返回 slug 的方法，例如：

```
public string Slugify(string p, System.Data.Entity.DbSet<Models.BaseRecords> dbSet){ return ...} 
```

叫喜欢

```
Slugify(text, my_State_object); 
```

也

```
Slugify(otherText, my_City_object); 
```

这两个电话都给了我一个“......一些无效的论点......”错误。

对不起，这是从德语 VS2010 翻译过来的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:48:04.830

你已经给出了答案：

```
public string Slugify(BaseClass record)
{
    return record.slug = "...return...something...";
} 
```

问题是您的 BaseClass 应该像它的孩子一样易于访问。将其公开，就可以了：

```
public abstract class BaseClass ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T15:52:13.207

这是因为您的`abstract`基类不是公开的，因此它比它的子类更难访问。将其更改为：

```
public abstract class BaseClass
{
    public int Id { get; set; }
    public string slug { get; set; }
} 
```

其余的代码都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:52:39.117

我假设每种类型生成 slug 的方式都不同。 `State`将基于该`StateName`属性，而`City`将使用该`TownName`属性。

我认为这可能是一个更好的方法：

```
public abstract class BaseClass
{
    public int Id { get; set; }
    public abstract string Slug { get; }
}

public class State:BaseClass
{
    public string StateName{ get; set; }
    public abstract string Slug 
    {
        get 
        {
            return Regex.Replace(StateName, '[^a-zA-Z0-9]', '-');
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T15:53:10.020

是什么让你不能简单地访问基类的属性？

```
Class A
{
    public string Rawr {get; set;}
}

Class B : A
{
    public string Rawr2 { get { return Rawr; } set { Rawr = value; } }
}

var b = new B();
b.Rawr = "asdf"

Console.WriteLine(b.Rawr2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T15:54:21.770

尝试这个：

```
BaseClass baseClass = new BaseClass();
baseClass.slug = "initial value";
Console.WriteLine(baseClass.slug); // displays "initial value"
Slugify(baseClass);
Console.WriteLine(baseClass.slug); // displays "...return...something..."

State state = new State();
state.slug = "initial value";
Console.WriteLine(state.slug); // displays "initial value"
Slugify(state);
Console.WriteLine(state.slug); // displays "...return...something..." 
```

您应该看到您的 Slugify 方法已经可以更改 BaseClass 和 State 类中的属性，只要您去掉问号：

```
public string Slugify(BaseClass record)  
{
    return record.slug = "...return...something...";  
} 
```

# .net - vb.net 参考程序集 WithEvents 不起作用

> ID：13034337
> 
> 赞同：0
> 
> 时间：2012-10-23T15:46:26.930
> 
> 标签：.net, vb.net, visual-studio-2012, .net-assembly, activexobject

我一直在寻找这个并且一直无法找到答案，所以任何帮助将不胜感激！

我最初通过 .asp 页面将此 dll 用作 activeX 控件，并且它运行良好。我现在不得不重写它作为一个班级，因为我的老板也问过我。所以在我的项目中，我右键单击并添加了引用 name.dll。这个文件类型是程序集。

所以我创建了一个变量

`Friend WithEvents scan As name.Integration.ActiveX.ActiveXObject`

有了这个，我可以调用它的方法，并且在这一点上它工作得很好。但是，在我调用一个方法后，它会运行一个进程并开始等待将卡插入扫描仪。当卡片插入扫描仪时，它会抛出一个事件然后开始扫描。

一旦我插入一张卡片，它就会扫描，但我遇到的问题是我的程序没有捕捉到它抛出的 50 个事件中的任何一个。有谁知道如何或为什么？我迫切需要解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:59:55.317

如果我对您的理解正确（并且我在此处的字里行间阅读），您就拥有来自第三方的 ActiveX 控件。您之前的网页使用了此控件。您现在改为引用包含 ActiveX 控件的 dll，因此 VS 会自动在 ActiveX 组件周围创建一个 .net 包装器。那是对的吗？

如果是，请确认您从正确的库中引用了正确的类型。

1.  使用对象浏览器查看 dll 的类型。我想你会发现你有两个与 dll 关联的库。例如，假设您的库被命名为“第三方”。您可能会看到“AxThirdParty”以及“Interop.ThirdParty”。“互操作”库包含大多数类。但是，“Ax...”库是处理事件的关键。您声明事件的对象来自此库。如果您没有看到这个库，您可能需要将控件添加到 Windows .net 表单以让 VS 为您创建它。

2.  不要尝试处理“Ax...”库中隐藏的事件。请注意，处理隐藏事件不会导致编译错误，但也不会引发它们。您是否在“Ax...”库中看到您尝试处理的事件？如果是这样，它是否以浅灰色显示？请注意，VS 将重命名与标准控制事件冲突的任何互操作事件。例如，ActiveX 控件的单击事件被命名为“ClickEvent”，它是您要处理的 ClickEvent 事件，而不是 Click 事件。

请注意，以上适用于 Windows 窗体。我认为 Hans 对消息循环的看法是正确的。

# twitter-bootstrap - Yii Bootstrap Thumbail - 图像钻取

> ID：13034346
> 
> 赞同：3
> 
> 时间：2012-10-23T15:46:57.903
> 
> 标签：twitter-bootstrap, yii, thumbnails, yii-extensions, drilldown

我是 yii 新手（一周前开始），我想使用**yii Bootstrap Thumbnail 网格**来显示一些国家/地区的图像，然后我想在每个国家/地区钻取并显示城市等，而无需重新加载整个屏幕，就在右边。

***创建视图的代码***

```
echo $this->renderPartial('_form', $this); 
```

除此之外，下面的这个视图用于显示图像。它有两个div。一个用于选择与国家/城市相关的图像，另一个显示用户通过单击应该在图片附近的按钮根据城市做出的选择，但仅当用户钻入城市时。

**第一个疑问->**我应该渲染局部吗？我只想刷新屏幕的右侧，即有图像的一侧。考虑到我在前面的代码中渲染了一个部分，而下面的其他部分。这甚至可能吗？

```
$this->renderPartial('_formCountry', $this); 
```

***该视图负责加载小部件***

```
$dataProvider = new CActiveDataProvider('Country');

$this->widget('bootstrap.widgets.TbThumbnails', array(
    'id' => 'countryThumbId',
    'dataProvider' => $dataProvider,
    'template' => "{items}\n{pager}",
    'itemView' => '_countryThumb',
)); 
```

***下面的视图用国家的图像填充它，并通过 post 发送 Country 的 id。***

**第二个疑问->我如何向下钻取单击图像**，而不是使用按钮来执行此操作？？？

```
echo $this->createUrl('city/view', array('id' => $data['id']));

        $this->widget('bootstrap.widgets.TbButton', array(
            'label' => 'cidades',
            'buttonType' => 'ajaxButton',
            'type' => 'primary', // null, 'primary', 'info', 'success', 'warning', 'danger' or 'inverse'
            'size' => 'mini', // null, 'large', 'small' or 'mini'
            'url' => Yii::app()->createUrl("tripDetail/showCities"),
            'ajaxOptions' =>
                    array('data' =>
                        array(
                            'id' => $data['id'],
                        ),
                        'type' => 'POST',
                    )
                )
        ); 
```

***此操作在按钮单击时触发，并根据用户选择的国家/地区获取新的 dataProvider***

**第三个疑问->**可以嵌套多少个renderPartials？？？？

```
public function actionShowCities()
        {
            $cityId = $_POST['id'];

            $dataProvider = $this->getCities($cityId);

            $this->renderPartial('_formCity', array('dProvider'=>$dataProvider));

        } 
```

***上面的动作启动了这个视图 _formCity，它又调用了 _cityThumb***

```
$this->widget('bootstrap.widgets.TbThumbnails', array(
    'id' => 'countryThumbId',
    'dataProvider' => $dProvider,
    'template' => "{items}\n{pager}",
    'itemView' => '_cityThumb',
)); 
```

* **_cityThumb***

**第四个疑问->**城市是唯一呈现的屏幕，当我单击按钮向我显示城市时，什么也没发生，为什么？？？？

```
echo $this->createUrl('place/view', array('id' => $data['id'])); 
```

很抱歉这么长的帖子和这么多的疑问，但这是我第一次使用 php 框架......而且 yii 并不那么容易，至少一开始是这样。:-[

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:00:46.593

> 问：我应该渲染局部吗？Q. 可以嵌套多少个 renderPartial？

你绝对应该[`renderPartial`做](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail "http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail")这些事情：

> > 它不会将布局应用于渲染结果。因此，它主要用于渲染局部视图或 AJAX 响应。

而且你可以嵌套任意数量，只要记住分离这些视图文件应该是有目的的。

* * *

> 问：我怎样才能深入单击图像，而不是使用按钮来执行此操作？

只需对图像使用 javascript 点击处理程序。一个jQuery示例：

```
<!-- sample image element -->
<img src="xyz.jpg" id="some_id" class="some-class" alt="Image not loaded"/>
<?php
    // in yii it's good to use registerScript to add a javascript snippet to generated html
    Yii::app()->clientScript->registerScript('script-name','
        $("#some_id").click(function(){
            // here make the ajax call
        });
    '); 
```

为图像添加点击处理程序的方法有很多，最好的方法取决于您如何使用视图添加图像标签。

* * *

> 问：城市是唯一呈现的屏幕，当我单击按钮向我显示城市时，什么也没发生，为什么？

这将需要在您的最后进行调试。我能给你的唯一提示是使用[Firebug](http://getfirebug.com/ "http://getfirebug.com/")检查 http 调用是否正在发生（或不发生） 。

# javascript - 如何在 JQuery 自动完成中使用 JSON 数组

> ID：13034347
> 
> 赞同：0
> 
> 时间：2012-10-23T15:47:01.040
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我有一个 JSON 数组，如下所示：

```
[{"country":"FR","id":2,"latitude":-34.27175846153846,"longitude":54.16125384615385,"postcode":"00000","region1":"DOM-TOM","region2":"Terres australes et antarctiques","region3":"Crozet","region4":"","version":null},{"country":"FR","id":3,"latitude":46.203635000000006,"longitude":5.20772,"postcode":"01000","region1":"Rhône-Alpes","region2":"Ain","region3":"Bourg-en-Bresse","region4":"Bourg-en-Bresse","version":null}, ... 
```

我正在尝试将此数组用作 JQuery 自动完成的源。这是我尝试的：

```
$(function() {
    $("#postcode").autocomplete({
        source : function(request, response) {
            var firstChars = $("#postcode").attr("value");
            $.getJSON("/kadjoukor/geolocations", {
                postcodeFirstChars : firstChars
            }, function(data) {
                console.log(data.postcode);
                response(data.postcode);
            });
        },
        minLength : 3,
    });
}); 
```

这是html：

```
<input type="text" name="member.geolocation.postcode" value="" id="postcode" placeholder="Code postal" /> 
```

我想显示这个 JSon 数组中的邮政编码变量。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:56:59.713

您应该将结果数组转换为标签值对。在你的情况下可以像

```
source : function(request, response) {
        var firstChars = $("#postcode").attr("value");
        $.getJSON("/kadjoukor/geolocations", {
            postcodeFirstChars : firstChars
        }, function(data) {
            console.log(data.postcode);
            response($.map(data, function (item) {
                    return {
                        label: item.postcode,
                        value: item.postcode
                    };
                }));
        });
    }, 
```

# ruby-on-rails - 将百分比存储在rails中时应该从10％转换为0.1？

> ID：13034350
> 
> 赞同：0
> 
> 时间：2012-10-23T15:47:17.900
> 
> 标签：ruby-on-rails, activerecord, percentage

我有`progress`十进制类型的列。我希望它存储某事的进度百分比。我想使用的格式是 0.1 表示 10%，因为它使使用该列的计算更容易。

我希望用户输入为 10%，所以我的问题是什么时候应该完成从 10% 到 0.1 的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:17:43.050

对于 MVC 模式，模型应该负责数据的操作，而控制器应该只通知模型用户的输入。

因此，我的目标是通过回调来操作模型中的数据：

```
before_save { |project| project.progress = project.progress.convert_percent_to_decimal } 
```

# c# - Web 部署到 2 个单独的 Web 服务器？

> ID：13034355
> 
> 赞同：2
> 
> 时间：2012-10-23T15:47:34.837
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio-2010, webdeploy

我有一个 MVC3 应用程序，我使用 Visual Studio 中的“Web 发布”功能部署到 IIS 7.5。我需要设置第二台服务器，该服务器将进行硬件负载平衡，并将镜像第一台服务器上的设置。

我知道 Web Farm Framework，这是一个选项，但是我不喜欢控制器服务器是链中最薄弱的环节的想法。我想我宁愿只使用硬件负载均衡器来引导流量。

是否可以编写一个手动 Web 部署脚本，每次运行时都针对 2 个单独的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T17:49:58.450

以下是我使用 TFS 执行此操作的方法：

1.  创建您的解决方案配置。选择构建 -> 配置管理器。在 Active Solution Configuration 下拉列表中，选择 New 并输入值（DEV1、DEV2 等）。确保项目上下文中的配置列是 DEV1 用于 DEV1 配置等。

2.  创建发布配置文件（构建 -> 发布）。为您的每台服务器（例如，DEV1 和 DEV2）创建配置文件。在 Connections 选项卡中，选择 Web Deploy 并输入服务器地址（使用 /msdeploy.axd）。此服务器必须安装 Web 部署（我使用的是 Web 部署 3.5）。验证您的连接以确保一切都在连接，然后下一步，然后关闭。不要按发布。保存此文件后，将在项目中的 Properties > Publishing Profile 下创建一个新文件，名称类似于 DEV1.pubxml。此 XML 文件包含所需的所有信息。

3.  为转换创建 Web 配置文件（右键单击 web.config 并选择添加配置转换）。这将允许您根据您执行的部署类型拥有不同的 Web 配置值。例如，您可以在发布到 PROD 时用不同的值替换连接字符串等。您可以[在此处阅读有关此内容的更多信息](https://msdn.microsoft.com/en-us/library/dd465326%28v=vs.110%29.aspx)

4.  在文本编辑器中打开项目文件（我使用的是 c#，所以我的项目文件是 .csproj）。如本例所示，搜索 DEV1。您将遇到一条包含 DEV1|AnyCPU 的行。这将是 PropertyGroup 标记的属性中的一个条件。在它下面，添加一个 PublishProfile 标记。下面是一个屏幕截图：

![添加对发布配置文件的引用](../Images/1126d0578deb719b3bad90d0c7efb375.png)

现在你已经设置好了。我使用了 TFS Build，在 Build 定义文件中您唯一需要记住的是在 Items to Build 下（在 Process 选项卡下）设置正确的配置。

![TFS 中构建定义中的构建项目设置](../Images/8466f1060961749acda04bc799ac3b22.png)

您无需在 MSBuild Arguments 字段中设置要构建的目标，因为这些值将从发布配置文件中获取。

现在一切都已设置好，可以运行构建了。如果您在构建时遇到问题（给您关于配置不正确的错误），我已经在这里回答了：[TFS 2012 Build Definition for web deployments ignores defined in project files](https://stackoverflow.com/questions/18219713/tfs-2012-build-definition-for-web-deployment-ignores-parameters-defined-in-proje/28483851#28483851)

# css - 如何在 ul 标签中使用 nth-of-type 设置样式？

> ID：13034357
> 
> 赞同：0
> 
> 时间：2012-10-23T15:47:43.670
> 
> 标签：css, css-selectors

如何在 a的元素中包含的元素`nth-of-type`上使用 css 选择器？`<span>``<li>``<ul>`

我会期待`span:nth-of-type(odd)`并`span:nth-of-type(even)`工作，但他们没有。

```
span:nth-of-type(even) {
  background-color: grey;
}

span:nth-of-type(odd) {
  background-color: blue;
}
```

```
<ul>
  <li>
    <span>Test 1</span>
  </li>
  <li>
    <span> 2 Test</span>
  </li>
</ul>

<br>
Should look like this:
<br>
<span>Test 1</span>
<br>
<span> 2 Test</span>
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:49:26.660

你必须这样做：

```
li:nth-of-type(odd) > span {}
li:nth-of-type(even) > span {} 
```

选择器`nth-of-type`（还有`first-child`,`last-child`或`nth-child`）指的是他们的父母。在这种情况下，父级是`<li>`-tag。所以两个`<span>`s 都是*奇数元素*，因为它们都是*第一个子元素*。两者都以您定义 CSS 规则的方式被选中。这里的 CSS 规则选择他们的父母，因为他们可以交替并相应地为孩子设置样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:56:03.550

`nth`您要计算的元素是元素，`<li>`而*不是*`<span>`元素。没有理由使用`nth-of-type`over `nth-child`，因为`<ul>`元素只能包含`<li>`子元素：

```
li:nth-child(even) > span {
    background-color: gray;
}
li:nth-child(odd) > span {
    background-color: blue;
} 
```

# c# - 使用 ProtoBuf-Net 处理父子关系的最佳方法是什么

> ID：13034362
> 
> 赞同：3
> 
> 时间：2012-10-23T15:48:04.997
> 
> 标签：c#, protobuf-net

这个异常是在我的测试应用程序中抛出的，用于使用 ProtoBuf 进行序列化。

```
SceneryFile:temp.ad2
ProtoBuf.ProtoException: Possible recursion detected (offset: 2 level(s): SceneryFile: temp.ad2
at ProtoBuf.ProtoWriter.CheckRecursionStackAndPush(Object instance( in c:\protbuf-net\protobuf-net\ProtoWriter.sc:line321 
```

我发现了这些其他问题

[protobuf-net：检测到可能的递归](https://stackoverflow.com/questions/10070710/protobuf-net-possible-recursion-detected)

[检测到 Protobuf-net 可能的递归：序列化孩子和父母](https://stackoverflow.com/questions/12142969/protobuf-net-possible-recursion-detected-serialize-children-and-parents)

我的树的深度只有 4。我查看是否可以更改，`ProtoBuf.ProtoWriter.RecursionCheckDepth` 但我找不到在我的代码中执行此操作的方法。

根据 Marc 对最后一个问题的回答，我认为这意味着通过引用再次引用同一个对象实例 - 所以在我的情况下，SceneryFile 是指自己或被引用到其他地方（实际上它是基类）。从某种意义上说，所有的直系子代都持有对它的引用。这里的答案似乎表明这可能是问题所在：

根据上面第二个问题的发现，我将父级从序列化中删除，这确实解决了这个问题。

有什么方法可以让我在序列化中保持对父级的引用，还是我需要做一些事情，比如为父级使用索引，然后在反编译时重建图形？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:08:52.273

“递归检查深度”只是一个优化细节**：**为了避免不断检查每个对象的递归开销，它只检查深度是否高于此。什么是/无效没有区别。

这里有两种方法。我的首选是仅序列化“子”关系，并使用反序列化后回调，然后循环遍历子级并设置其父属性。这是通过回调属性完成的，通常是 5 行代码。

另一种是告诉 protobuf-net 尊重引用（在成员上将 AsReference 设置为 true）。这会改变布局，如果您想与不同的（非 protobuf-net）实现互操作，则不合适。

我也可以添加两个 ir 的示例，但不能在电话上！

# database - Oracle 选择语句性能

> ID：13034367
> 
> 赞同：0
> 
> 时间：2012-10-23T15:48:14.523
> 
> 标签：database, oracle

我有以下选择语句：

> ```
> (
>   SELECT CAL_DATE,BUS_DAY
>   FROM risk_mart.vw_calendar_t5
>   WHERE type = 'RPC'
>   AND BUS_DAY BETWEEN 0 AND 1
> ) CAL
>  WHERE t.cal_date         = cal.cal_date 
> ```

它选择所有日期，然后过滤它们`between`0 和 1（仅显示两个日期，例如 '22-OCT-12'、'19-OCT-12'）。

现在，我可以手动将其重写为

> WHERE t.cal_date in ('22-OCT-12','19-OCT-12')

区别在于性能。第一个例子我在 90 秒内得到回报，第二个例子我在 10 秒内得到它。为什么？。

我如何改进第一个语句/重写它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:06:06.183

```
FROM
(
  SELECT CAL_DATE,BUS_DAY
  FROM risk_mart.vw_calendar_t5
  WHERE type = 'RPC'
  AND BUS_DAY BETWEEN 0 AND 1
) CAL --inner view
 WHERE t.cal_date         = cal.cal_date --join of table t and CAL 
```

现在，这是您的第一个查询。在此您首先将记录检索到内部视图 CAL 中，这需要一些时间。然后您加入`t.cal_date = cal.cal_date`将再次需要一些时间（总计 90 秒）。

现在，这是第二个查询。

```
FROM T
WHERE t.cal_date      IN ('22-OCT-12','19-OCT-12'); 
```

在这种情况下，您使用内部视图，因此您以某种方式设法`dates`直接获取并在您的 where 条件（*硬编码*）中使用它。这是您减少了内部视图（CAL）的处理时间和加入带有表 t 的 CAL 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:48:02.160

让我们像这样重写你的代码？

```
 Case 1:
    from
        Cal
    Inner join 
    t on cal.cal_date = t.cal.date

    case 2:
      from t
      where t.cal_date in (....) 
```

Select 语句的第一步始终是“FROM”子句。在案例 2 中，第一步始终是 FROM 子句。在您的情况下，这非常简单，因为只有一个表，并且不需要担心任何复杂的连接。

在案例 1 中，一个带有连接的查询，在第一步中评估这些。组合连接以确定要检索哪些行，其中 ON 子句条件是决定从每个表中连接哪些行的标准。FROM 子句的结果是中间结果。您可以将其视为一个临时表，由满足所有连接条件的组合行组成。

这就是案例 1 比案例 2 花费更长的时间的原因。

# java - OAuth 令牌 invalid_grant

> ID：13034368
> 
> 赞同：1
> 
> 时间：2012-10-23T15:48:19.760
> 
> 标签：java, oauth, oauth-2.0

我正在尝试将 Google Plus API 集成到我的 Web 应用程序中。

我能够通过 Google 进行身份验证并获得代码。当我尝试`access_token`使用 using时会出现问题`HttpClient`。

这是一些代码：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost post = new HttpPost(
                "https://accounts.google.com/o/oauth2/token");
        post.addHeader("accept", "application/json");
        post.addHeader("Content-Type", "application/x-www-form-urlencoded");

        List<NameValuePair> nvps = new ArrayList<NameValuePair>();
        nvps.add(new BasicNameValuePair("code", myCode));
        nvps.add(new BasicNameValuePair("client_id",
                "my_client_id"));
        nvps.add(new BasicNameValuePair("redirect_uri",
                "http://localhost:8080/test/gplus.do"));
        nvps.add(new BasicNameValuePair("client_secret",
                "my_client_secret"));
        nvps.add(new BasicNameValuePair("grant_type", "authorization_code"));
        post.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

        HttpResponse response = httpClient.execute(post);

        BufferedReader br = new BufferedReader(new InputStreamReader(
                (response.getEntity().getContent())));

        String output;
        while ((output = br.readLine()) != null) {
            res = res + output;
        } 
```

我之前曾多次设法在我的模拟应用程序中获得令牌，但现在它似乎由于某种未知原因而失败。我得到的只是`error:invalid_grant`。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:04:02.907

你确定你以前用这种方式拿到过令牌吗？AFAIK，在 oAuth 中，您首先调用 /authorize 以获取授权码，然后使用此代码调用 /token 以获取访问令牌。

ps 您可以将包用作[oAuth 的 Spring](https://github.com/SpringSource/spring-security-oauth/wiki/oauth2)，因此它制作了所有“幕后”的东西，您所要做的就是配置 XML。

# ios - 使用多个 iOS 开发者帐户

> ID：13034369
> 
> 赞同：0
> 
> 时间：2012-10-23T15:48:24.300
> 
> 标签：ios, certificate, provisioning

场景如下：我们公司最近购买了一个企业开发者帐户。我们已经有一个标准的开发者帐户。

现在，当我尝试进行存档构建时，我收到以下消息：

```
Certificate identity 'iPhone Distribution: <Company Name>' appears more than once in the keychain. The codesign tool requires there only be one. 
```

既不使用自动配置文件选择器，也不通过明确设置正确的配置文件，我得到了应用程序的签名。两个证书都有相同的名称，这可能是问题吗？

有没有什么方法可以处理多个证书而不必从钥匙串中临时删除密钥（正如你们中的许多人可能知道的那样，由于这些密钥“神奇地”重新出现，所以效果并不好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:37:02.907

使用不同的公司名称来区分 Enterprise 和 Commercial/Standard，否则会出现命名冲突。

有关如何操作的更多信息：[https ://developer.apple.com/support/ios/account-management.html](https://developer.apple.com/support/ios/account-management.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T07:50:21.727

首先检查您的苹果帐户是否包含多个分发证书。如果它包含多个，则删除不必要的一个，使其仅包含一个分发证书。

*   从重复的钥匙串中删除旧证书。

*   现在转到 xcode 管理器并从那里删除使用已删除证书或旧证书创建的配置文件。

*   如果未安装，请安装新证书和配置文件。

*   确保 Apple 帐户包含单个分发证书，并且新创建的配置文件指向您在 Apple 帐户中删除的证书。

现在开心！！！，问题：“证书身份'iPhone Distribution：'在钥匙串中出现不止一次”可能会解决。

# c# - 检索字符串中括号内的键

> ID：13034371
> 
> 赞同：1
> 
> 时间：2012-10-23T15:48:39.650
> 
> 标签：c#, .net, regex, string

我有以下带有 SQL 命令的字符串：

```
string sql = "select [x] from table where field = [y] order by [w], [z]"; 
```

我想获得`[brackets]`(x, y, w, z, etc...) 中的键，我怎么能用 C# 做到这一点？有没有办法用正则表达式（不是必需的）来做到这一点？

我尝试用`while`语句做一些事情，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:51:01.393

使用正则表达式：

```
@"\[(.)]" 
```

这将`[]`在使用 的`Matches`方法时捕获 中的字母`Regex`。

由于括号内可能有[*单词*](https://stackoverflow.com/questions/13034371/retrive-keys-inside-the-brackets-in-a-string/13034421#comment17695048_13034421)，因此正则表达式要复杂一些。

我将假设这些永远不会包含转义`]`- 所以以下应该有效：

```
@"\[([^\]]+)]" 
```

用法：

```
var matches = Regex.Matches("select [x] from table where field = [yy] order by [w], [z]", @"\[([^\]]+)]");

foreach(Match match in matches)
{
  foreach(Group group in match.Groups)
  {
     Console.WriteLine(group.Value);
  }
} 
```

请注意， 中有一个默认组`match.Groups`，因此您将获得重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:14:10.010

```
string sql = "select [x] from table where field = [jkjlh] order by [w], [z]";
var matches = Regex.Matches(sql,@"\[(.*?)\]");
var result = Enumerable.Cast<Match>(matches).Select(m => m.Groups[1].Value).ToList(); 
```

结果将包含带有键的字符串列表。

# rpm - 如何让厨师检查 RPM 包然后安装？

> ID：13034372
> 
> 赞同：10
> 
> 时间：2012-10-23T15:48:39.280
> 
> 标签：rpm, chef-infra

我目前正在使用 chef 来安装 RPM JDK 包，但问题是即使已经下载并安装了包，它每次都会这样做。我尝试在安装前找到一个检查选项，但没有。有没有办法解决这个问题，我可以跳过已经安装的包？Debian 的包管理默认会跳过已安装的包，但 RPM 包管理器似乎没有这样做。

```
[Tue, 23 Oct 2012 10:34:32 -0500] INFO: Processing remote_file[/var/chef/cache/jdk-1.6-u30-linux-amd64.rpm] action create_if_missing (sun_java::default line 18)
[Tue, 23 Oct 2012 10:34:36 -0500] INFO: Processing package[jdk-1.6-u30-linux-amd64.rpm] action upgrade (sun_java::default line 25)
[Tue, 23 Oct 2012 10:37:15 -0500] INFO: Processing bash[update-alternatives java] action nothing (sun_java::default line 40) 
```

配方如下所示：

```
 urlVersion = "1."+node["sun_java"]["version"].sub(/[u]/, "-u")
    node.default["sun_java"]["rpm_url"] = "http://***/#{urlVersion}/jdk-#{urlVersion}-linux-#{node["sun_java"]["arch"]}.rpm"

    #Check that we are using the .rpm file because of the recent change
    if File.extname(File.basename(node["sun_java"]["rpm_url"]))!=".rpm"
      raise "You must use the jdk*.rpm file to install the Sun JDK. You can get it from the jdk*-rpm.bin file by running the command './jdk*-rpm.bin -x'"
    end

    javaRPM = File.basename(node["sun_java"]["rpm_url"])

    remote_file "#{Chef::Config[:file_cache_path]}/#{javaRPM}" do
      action :create_if_missing
      source node["sun_java"]["rpm_url"]
      mode "0755"
      backup false
    end

    package javaRPM do
      action :install
      source "#{Chef::Config[:file_cache_path]}/#{javaRPM}"
      options "--nogpgcheck" # sun/oracle doesn't sign their RPMs o_O
      notifies :run, "bash[update-alternatives java]", :immediately
    end

    javaHomeFolder = "/usr/java/jdk1.#{node["sun_java"]["version"].sub(/[u]/, ".0_")}"
    jdkFolder = "#{javaHomeFolder}/bin"
    slaveString = ""

    node["sun_java"]["update_slaves"].each do |java_bin|
      slaveString = slaveString + "--slave \"/usr/bin/#{java_bin}\" \"#{java_bin}\" \"#{jdkFolder}/#{java_bin}\" "
    end

    bash "update-alternatives java" do
      action :nothing
      code <<-EOH
        update-alternatives --install "/usr/bin/java" "java" "#{jdkFolder}/java" 1 #{slaveString}
        update-alternatives --set java #{jdkFolder}/java
      EOH
    end

    #Remove old environment then notify new environment to be created
    ruby_block "delete_environement" do
            block do
                editBashrc = Chef::Util::FileEdit.new("/etc/profile")
                    editBashrc.search_file_delete_line(/^.*#JAVA_HOME environment settings.*$/)
                    editBashrc.search_file_delete_line(/^.*#Auto-generated by Chef Cookbook sun_java.*$/)
                    editBashrc.search_file_delete_line(/^.*export JAVA_HOME=.*$/)
                    editBashrc.write_file 
            end
            action :create
    end

    #create environment of root user
    execute "create_environment" do
      user "root"
      command "echo -e '#JAVA_HOME environment settings\n#Auto-generated by Chef Cookbook sun_java\nexport JAVA_HOME=#{javaHomeFolder}' >> /etc/profile"
    end 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-09T17:30:05.747

我知道这是旧的，但我相信你想要：

```
remote_file "your-remote-file" do
  ...
  not_if "rpm -qa | grep -qx 'your-package'"
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T08:02:44.563

我对 RPM 不熟悉，但您可以查看[Chef 如何了解软件包是否已安装](https://github.com/opscode/chef/blob/master/lib/chef/provider/package/rpm.rb)（load_current_resource 方法）。你可以在你的配方中实现类似的东西，并将这个条件添加到 remote_file：

```
remote_file "#{Chef::Config[:file_cache_path]}/#{javaRPM}" do
  not_if { [your_code_that_checks_if_package_installed] }
  ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T17:17:57.467

Chef 为[rpm_packages](http://docs.opscode.com/resource_rpm_package.html)提供了资源。你可以找到很多例子来展示[厨师如何验证](http://docs.opscode.com/chef/resources.html)是否安装了一个包

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-14T00:17:47.550

您可以先删除软件包使用`ignore_failure`然后安装它

```
package 'package_name'
  ignore_failure true
  action         :remove
end 
```

然后抓取文件

```
remote_file localPath do
    source packageUrl
    mode 0644
    checksum checkSum
end 
```

然后安装包

```
package packageName do
      source localPath
      action :install
      allow_downgrade true
end 
```

这适用于任何包类型。理想情况下，对于 rpm，您不需要删除该软件包。`allow_downgrade`应该管用。但这对我不起作用。

用于校验和`curl packageUrl | shasum -a 256`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-05T19:55:21.977

**not_if**还有另一种方法，请参见下面的示例

```
execute 'yum -y install ntp' do
  not_if "rpm -qa | grep 'ntp'"
end 
```

# actionscript-3 - 是否可以通过 Flash Builder 中的 file:// 调试 ExternalInterface？

> ID：13034375
> 
> 赞同：2
> 
> 时间：2012-10-23T15:48:47.947
> 
> 标签：actionscript-3, flash, externalinterface

我有一个使用 Adob​​e Flash Builder 4.5 用 ActionScript 3 编写的项目。它在 中注册了几个函数`ExternalInterface`，以便可以从 JavaScript 调用它们。

例如，如果我访问服务器上的 Flash 文档`http://localhost/`，我可以成功调用定义的函数。如果我只是直接（通过`file:///`协议）在浏览器中打开文件，它将失败并出现如下错误：

```
*** Security Sandbox Violation ***
SecurityDomain 'null' tried to access incompatible context 'file:///Users/foo/src/bar/baz/bin-debug/app.swf' 
```

一个合理的安全限制，但它有一个矛盾的后果：我无法调试使用，`ExternalInterface`因为 Flash Builder 调试器通过`file:`.

这么重要的功能不能正常调试，这似乎太荒谬了。

如何使用调试器`ExternalInterface`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:30:01.690

有两种方法可以解决这个问题：

*   通过设置`use-network=false`编译器标志（参见：[http](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html) ://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html ctrl-f use-network）
*   将 Flash Builder 调试器配置为在调试时启动 HTTP URL。为此，请单击：运行 -> 调试配置，然后在“要启动的 URL 或路径”下，输入（比如说）“http://localhost/”

我一般更喜欢后者。

# java - 使用 GAE appcfg 工具获取 OAuth 令牌时出错

> ID：13034378
> 
> 赞同：2
> 
> 时间：2012-10-23T15:48:51.990
> 
> 标签：java, google-app-engine, oauth

我正在尝试将 GAE 项目挂接到我们的 CI/自动构建过程中。

我在使用 appcfg 时遇到了问题——我[在这里](https://developers.google.com/appengine/docs/java/tools/uploadinganapp#Passwordless_Login_with_OAuth2)阅读了文档，说可以创建一个永久令牌来使用 --oauth2 标志进行部署。我试过这个，我得到以下错误：

> C:\dwinq-ci\dependencies\appengine-java-sdk-1.7.2.1\bin>appcfg.cmd --oauth2 update C:/TeamCity/buildAgent/work/fd63022f430f2b8c/war 输入的代码无效或令牌无效撤销。

如果我再次尝试该命令，则会收到不同的错误：

> C:\dwinq-ci\dependencies\appengine-java-sdk-1.7.2.1\bin>appcfg.cmd --oauth2 update C:/TeamCity/buildAgent/work/fd63022f430f2b8c/war 错误参数：找不到 JSON 输入用法：AppCfg [选项] [] []

通过删除在我的用户目录下创建的名为 .appcfg_oauth2_tokens_java 的文件来更正此错误

删除文件只会导致第一个错误再次发生。

非常感谢您对此提供帮助。现在，我唯一的选择是手动转到 CI 服务器并定期重新创建临时令牌。这不是一个好的长期解决方案。

# playframework - 是否有自动生成 Anorm 解析器组合器的工具？

> ID：13034383
> 
> 赞同：12
> 
> 时间：2012-10-23T15:49:06.783
> 
> 标签：playframework, anorm

我刚刚开始使用 Anorm 和解析器组合器。似乎有很多样板代码。例如，我有

```
case class Model(
    id:Int,
    field1:String,
    field2:Int,
    // a bunch of fields omitted
)

val ModelParser:RowParser[RegdataStudentClass] = {
  int("id") ~
  str("field1") ~
  int("field2") ~
  // a bunch of fields omitted
  map {
    case id ~ field1 ~ field2 //more omissions
        => Model(id, field1, field2, // still more omissions
           )
  }
} 
```

在定义整个事物之前，每个数据库字段都会重复四次（！）。似乎解析器应该能够从案例类中半自动推导出来。有什么工具或其他技术可以建议减少这里涉及的工作吗？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:22:38.067

这是我最终开发的解决方案。我目前在我的 Play 项目中将此作为课程；它可以（应该！）变成一个独立的工具。要使用它，请将`tableName`val 更改为表的名称。然后使用`main`类底部的 运行它。它将打印案例类和解析器组合器的骨架。大多数时候，这些骨架只需要很少的调整。

拜伦

```
package tools

import scala.sys.process._
import anorm._

/**
 * Generate a parser combinator for a specified table in the database.
 * Right now it's just specified with the val "tableName" a few lines
 * down.  
 * 
 * 20121024 bwbecker
 */
object ParserGenerator {

  val tableName = "uwdata.uwdir_person_by_student_id"

  /** 
   * Convert the sql type to an equivalent Scala type.
   */
  def fieldType(field:MetaDataItem):String = {
    val t = field.clazz match {
      case "java.lang.String" => "String"
      case "java.lang.Boolean" => "Boolean"
      case "java.lang.Integer" => "Int"
      case "java.math.BigDecimal" => "BigDecimal"
      case other => other
    }

    if (field.nullable) "Option[%s]" format (t)
    else t
  }

  /**
   * Drop the schema name from a string (tablename or fieldname)
   */
  def dropSchemaName(str:String):String = 
    str.dropWhile(c => c != '.').drop(1)

  def formatField(field:MetaDataItem):String = {
    "\t" + dropSchemaName(field.column) + " : " + fieldType(field)
  }

  /** 
   * Derive the class name from the table name:  drop the schema,
   * remove the underscores, and capitalize the leading letter of each word.
   */
  def deriveClassName(tableName:String) = 
    dropSchemaName(tableName).split("_").map(w => w.head.toUpper + w.tail).mkString

  /** 
   * Query the database to get the metadata for the given table.
   */
  def getFieldList(tableName:String):List[MetaDataItem] = {
      val sql = SQL("""select * from %s limit 1""" format (tableName))

      val results:Stream[SqlRow] = util.Util.DB.withConnection { implicit connection => sql()  }

      results.head.metaData.ms
    }

  /**
   * Generate a case class definition with one data member for each field in
   * the database table.
   */
  def genClassDef(className:String, fields:List[MetaDataItem]):String = {
    val fieldList = fields.map(formatField(_)).mkString(",\n")

    """    case class %s (
    %s
    )
    """ format (className, fieldList )
  }

  /**
   * Generate a parser for the table. 
   */
  def genParser(className:String, fields:List[MetaDataItem]):String = {

    val header:String = "val " + className.take(1).toLowerCase() + className.drop(1) + 
    "Parser:RowParser[" + className + "] = {\n"

    val getters = fields.map(f => 
      "\tget[" + fieldType(f) + "](\"" + dropSchemaName(f.column) + "\")"
    ).mkString(" ~ \n") 

    val mapper = " map {\n      case " + fields.map(f => dropSchemaName(f.column)).mkString(" ~ ") +
        " =>\n\t" + className + "(" + fields.map(f => dropSchemaName(f.column)).mkString(", ") + ")\n\t}\n}"

    header + getters + mapper
  }

  def main(args:Array[String]) = {

    val className = deriveClassName(tableName)
    val fields = getFieldList(tableName)

    println( genClassDef(className, fields) )

    println( genParser(className, fields))
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T16:06:08.040

好吧，你实际上根本不需要重复任何事情。您可以使用`flatten`创建一个元组，然后从该元组创建模型实例：

```
(int("id") ~ str("field1") ~ int("field2"))
  .map(flatten)
  .map { tuple => (Model apply _).tupled(tuple) } 
```

但是，如果您需要进行一些进一步的转换，则需要以某种方式修改元组：

```
(int("id") ~ str("field1") ~ int("field2"))
  .map(flatten)
  .map { tuple => (Model apply _).tupled(tuple.copy(_1=..., _2=....) } 
```

# android - 用户撤销应用访问权限时的 Facebook 共享

> ID：13034387
> 
> 赞同：0
> 
> 时间：2012-10-23T15:49:21.320
> 
> 标签：android, facebook

当用户通过 Facebook 设置页面撤销对我的应用程序的访问权限时，我正在尝试处理共享到 Facebook 时可能导致的错误。

Facebook 文档说：

> 但是，请注意，这并不考虑用户可能已撤销对您的应用程序的访问权限或用户已更改其密码的情况。您需要始终注意无效的 access_token 并重定向用户以重新授权您的应用程序。对于无效的访问令牌，在 onComplete() 方法的 'response' 参数中返回以下错误：

我的代码：

```
facebook.dialog(activity, "feed", params, new DialogListener()
{

    @Override
    public void onFacebookError(FacebookError e)
    {
        Log.printMethod();
        showErrorToast(activity, e);
    }

    @Override
    public void onError(DialogError e)
    {
        Log.printMethod();
        showErrorToast(activity, e);
    }

    @Override
    public void onComplete(Bundle values)
    {
        Log.printMethod();
    }

    @Override
    public void onCancel()
    {   
        Log.printMethod();
    }
}); 
```

**问题是这些方法中的任何一个都不会被调用**，所以我无法知道用户已经撤销了权限，我需要让他再次授权。

相反，用户会在 webview 中看到类似的内容。有任何想法吗？ ![在此处输入图像描述](../Images/4f6f8e829ce7bd9321563ec86d7030e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T21:07:43.617

首先检查用户的权限： [https ://developers.facebook.com/docs/facebook-login/permissions/#checking](https://developers.facebook.com/docs/facebook-login/permissions/#checking)

休息：

> [https://graph.facebook.com/USER_ID/permissions?access_token=APP_TOKEN](https://graph.facebook.com/USER_ID/permissions?access_token=APP_TOKEN) [https://graph.facebook.com/me/permissions?access_token=USER_TOKEN](https://graph.facebook.com/me/permissions?access_token=USER_TOKEN)

JS：

```
FB.api('/me/permissions', function(response) {
    var perms = response.data[0];
    if ('publish_actions' in perms && perms.publish_actions === 1) {
        // send
    }
} 
```

示例响应：

```
{
    "data": [
        {
            "installed": 1,
            "basic_info": 1,
            "email": 1,
            "publish_actions": 1,
            "user_friends": 1
        }
    ]
} 
```

# python - 通过 Macports 安装 Python 3.3 后 Python 版本消失了

> ID：13034391
> 
> 赞同：4
> 
> 时间：2012-10-23T15:49:30.903
> 
> 标签：python, macos, macports

所以我通过 Macports 安装了 Python 3.3，使用`port install python33`

（使用 OSX 10.8.2 ML）

一切正常（至少它最后没有发出任何错误消息）

因此，在此之后，我想通过端口选择选择这个特定的 python 版本，并且首先想要现在拥有所有可用版本的列表：

`port select --list python`

现在这只给了我3个选项的列表：

```
Available versions for python:
    None
    python27 (active)
    python33 
```

在我安装 python33 之前，我还列出了 python 的苹果版本：

```
Available versions for python:
    none
    python25-apple
    python26-apple
    python27 (active)
    python27-apple 
```

Apple 版本仍然存在（位于：/System/Library/Frameworks/Python.framework/Versions），只是不再列出。

有谁知道如何处理这个？（另外，当我`python`在shell中使用该命令时，它仍然使用python27-apple版本。之前我想更改版本时，出现错误。但那将是另一个问题。）

**编辑（2012 年 10 月 24 日）：**

与此同时，我发现了这个命令：

```
port contents python_select 
```

这给出了：

```
Port python_select contains:
    /opt/local/etc/select/python/base
    /opt/local/etc/select/python/none 
```

除了此处列出的内容外，该文件夹还包含以下文件：

```
drwxr-xr-x  8 admin  272 24 Okt 09:50 .
drwxr-xr-x  5 admin  170  4 Okt 15:05 ..
-rw-r--r--  1 wheel  363 23 Okt 17:18 base
lrwxr-xr-x  1 admin    8 23 Okt 18:05 current -> python27
-rw-r--r--  1 wheel   26 23 Okt 17:18 none
-rw-r--r--  1 wheel  398 23 Okt 23:27 python27
-rw-r--r--  1 wheel  384 23 Okt 17:21 python33 
```

python27和33文件是一个简单的文本文件，内容相同（版本号不同）：

```
bin/python2.7
bin/pythonw2.7
bin/python2.7-config
bin/idle2.7
bin/pydoc2.7
bin/smtpd2.7.py
bin/2to3-2.7
share/man/man1/python2.7.1
-
/opt/local/Library/Frameworks/Python.framework/Versions/2.7
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/Headers
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/Resources
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/Python 
```

但就是这样。我不知道我能用这些信息做什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T09:40:46.603

> （另外，当我在shell中使用python命令时，它仍然使用python27-apple版本。当我之前想更改版本时，出现错误。但那将是另一个问题。）

这听起来像您的搜索路径不正确。编辑您的`~/.bashrc`并在最后放入：

```
export PATH=/opt/local/bin:$PATH 
```

如果您想在系统范围内拥有此功能，请编辑`/etc/bash.rc`并将`PATH`定义放入其中。你想把它放在接近结尾的某个地方，因为 bash 资源往往会重新定义`PATH`有时（所以如果你把它放在开头，那么剩下的配置很可能会改变它）。

无论如何，在下一次终端启动后，该命令`python`应该在 中解析`/opt/local/bin/`，并且`python`可执行文件应该有一个符号链接到您选择的任何端口版本。

更新：您可以使用以下命令测试您的 shell 将选择哪个 Python 版本，具体取决于您的`PATH`设置：

```
which python 
```

这应该打印

```
/opt/local/bin/python 
```

# c# - C# WPF - 字符串（存储在数据库中）From/To RichTextBox

> ID：13034392
> 
> 赞同：1
> 
> 时间：2012-10-23T15:49:30.933
> 
> 标签：c#, database, xaml, binding, richtextbox

我花了一天的时间在互联网上搜索我的问题的解决方案但没有成功......这在理论上似乎很简单。

我在 XAML 中有一个 RichTextBox。我的数据库中有一个名为“内容”的字段，类型为“LongText”

我只希望我的数据库以简单的样式（粗体、斜体、下划线）保存 RichTextBox 的内容，并且我可以调用我的数据库，填充存储在我的数据库中的 RichTextBox 内容，同时保持文本的样式。

在那之后，我必须将这些数据显示为博客，但是......必须已经成功保存和加载数据。

XAML：

```
<RichTextBox x:Name="nameTextEditor" TabIndex="2" Grid.Row="2" SpellCheck.IsEnabled="True"> 
```

C＃

```
FlowDocument doc = new FlowDocument();
        StringReader sr = new StringReader(monArticle.Content);
        XmlReader xmlReader = XmlReader.Create(sr);
        Section sec = XamlReader.Parse(monArticle.Content) as Section;
        while (sec.Blocks.Count > 0)
        {
            var block = sec.Blocks.FirstBlock;
            sec.Blocks.Remove(block);
            doc.Blocks.Add(block);
        }
        nameTextEditor.Document = doc; 
```

不要处理错误：“Exception XamlParseException”“Données non valides au niveau racine。Ligne 1，位置 1。”

这不是我尝试过的唯一代码，但我一个字都不懂就测试了……为什么“获取 RichTextBox 的内容”和“发送到我的数据库”并不那么容易？！

感谢所有帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:54:41.380

```
 var doc = rtb.Document;
    var range = new TextRange(doc.ContentStart, doc.ContentEnd);
    var ms = new MemoryStream();
    range.Save(ms, DataFormats.Rtf);
    ms.Seek(0, SeekOrigin.Begin);

    var rtfString=new StreamReader(ms).ReadToEnd(); 
```

现在将 rtfString 发送到数据库。要在富文本框中重新显示它：

```
var doc = rtb.Document;
var range = new TextRange(doc.ContentStart, doc.ContentEnd);
var ms = new MemoryStream();
var sw = new StreamWriter(ms);
sw.Write(rtfString);
sw.Flush();
ms.Seek(0, SeekOrigin.Begin);
range.Load(ms, DataFormats.Rtf); 
```

# c++ - C++/Linux：动态分配产生两种不同的错误信息

> ID：13034393
> 
> 赞同：0
> 
> 时间：2012-10-23T15:49:36.670
> 
> 标签：c++, linux, segmentation-fault

这是一个简单的 C++ 程序，它接受一个大小参数并分配一个该大小的整数数组。程序是在 Linux 下使用 g++ 编译的，运行在 32 位架构的虚拟机上。当使用高于 1073741823* 的参数（数组大小）调用应用程序时，我得到

> 分段错误（核心转储）

错误，并且值略小于我得到的值。

> 在抛出 'std::bad_alloc'
> what() 的实例后调用终止：std::bad_alloc Aborted (core dumped)

这是代码：

```
/* dynamicAlloc.cpp */
#include <iostream> 
#include <stdlib.h> //for atoi
#include <cstdlib> // for rand() and srand()
#include <ctime> // for time()

using namespace std;
#define STR_LEN 256

int main(int argc, char* argv[])
{
    srand(time(0)); 

    unsigned int iArraySize = 1;
    if(argc < 2)
        return -1;

    iArraySize = atoi(argv[1]);

    int *pnValue = new int[iArraySize];
    if(pnValue == NULL)
    {
        cout << "cannot allocate array" << endl;
        return -2;
    }

    for(unsigned int iCounter = 0; iCounter < iArraySize; iCounter++)
    {
        pnValue[iCounter] = rand(); 
    }

    delete[] pnValue; 
    return 0;
} 
```

为什么我得到两个不同的错误？

另外，如果我有一个非常大的数据，需要处理/按摩数十亿的数据，我是否必须使用数据库来处理如此大量的数据，或者是否有另一种处理大型数据集的方法？

谢谢你的阅读

*1073741823 = (2 ^ 32(位地址)) / 4(int size in byte)) - 1

# 更新

ulimit -a 的输出是：

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 3808
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 3808
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

Ram 大小配置为 512MB。我想既然每个程序都有它自己的虚拟页面（对于 32 位架构，我认为它是 4GB），那么我可以使用所有的虚拟内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:02:45.983

使用 32 位系统，您可以寻址 4 GiB。如果您尝试分配更多，则会从系统中获得分段错误。当您分配少于 4 GiB 时，`new`会引发异常，因为它无法分配这么多。还有静态数据和堆栈，它们占用了 4 GiB 地址空间中的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:56:20.910

您可以尝试`ulimit -a`查看当前堆大小是多少，也许还可以`ulimit -s unlimited`检查您的程序是否开始表现得更好？还有多少 RAM 专用于虚拟机？

另外，为什么您认为您可以占用所有 32 位地址空间？您确实在内存中加载了内核和其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:08:05.687

在 32 位机器上，您没有 4 GB 的可用内存。你总共有 4 个演出。您的程序可以访问的内容少于此。

因为您正在创建一个非法地址，所以您会得到一个具有巨大价值的段错误。底层机器甚至没有机会尝试分配该内存。它甚至在尝试进行分配之前就开始了。

使用稍小的值，地址是有效的，但有些东西阻止您分配这么大的内存块。你可能没有那么多内存，或者你可能有一个限制，阻止你占用那么多内存。如果是软限制，您可以提高它。如果是硬限制，则需要系统管理员权限才能提高它。

# c# - 如何在 Windows 8 应用程序的 sqlite 中执行具有不同关键字的查询？

> ID：13034394
> 
> 赞同：1
> 
> 时间：2012-10-23T15:49:38.590
> 
> 标签：c#, sqlite, linq-to-sql, windows-8

我想从我的表中获取不同的数据，但我无法将 distinct 关键字与以下语句一起使用。

```
var query = conn.Table<taxi_fares>() 
```

请指导我如何在 C# 中编写此查询。

# android - Android库存相机app源码，为什么没有AndroidManifest.xml？

> ID：13034395
> 
> 赞同：5
> 
> 时间：2012-10-23T15:49:41.070
> 
> 标签：android, camera

我想查看库存 Android 相机应用程序的来源，以了解如何处理我在自己的应用程序中看到的一些间歇性错误。我已经导入了最新版本的[Git 存储库](https://github.com/android/platform_packages_apps_camera)，但 AndroidManifest.xml 似乎丢失了。

查看了 LegacyCamera 存储库，它也没有清单。[Cyanogen Mod 相机应用程序](https://github.com/CyanogenMod/android_packages_apps_Camera)也是如此。

能够构建应用程序会很有帮助，但是手动重构清单听起来并不有趣。

我是不是找错地方了，还是有这个原因？如果三个 repo 都没有一个，这当然不是疏忽。现在觉得自己好傻。

# bash - 如何从bash的输出中减去一个单词

> ID：13034404
> 
> 赞同：3
> 
> 时间：2012-10-23T15:50:02.640
> 
> 标签：bash

我制作了一个简单的 bash 脚本来将电影从 .avi 转换为 .mp4，但现在我想做两件事。

1.  让输出文件只有 *.mp4 而不是 *.avi.mp4
2.  转换完成后删除旧文件。

这是我的脚本。

```
#!/bin/bash

avconv -i "$1" -c:v libx264 -c:a copy -sn -crf 24 "$1".mp4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:53:47.423

1.  你应该这样做`${1%.avi}.mp4`，我们告诉 bash 打印删除后缀的内容`$1`，`.avi`然后附加`.mp4`后缀。
2.  我建议运行`aconv ... && rm "$1"`，以便仅在转换成功时删除，因为`&&`如果前一个命令成功，操作员只会执行其后面的命令。

最终版本：

```
#!/bin/bash

avconv -i "$1" -c:v libx264 -c:a copy -sn -crf 24 "${1%.avi}.mp4" && rm "$1" 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:56:56.170

怎么样：

```
avconv -i "$1" -c:v libx264 -c:a copy -sn -crf 24 "${1/.avi/.mp4}" && rm "$1" 
```

### 更新

针对评论，搜索和替换的语法是：

```
${1/oldstring/newstring} 
```

因此，您可以随心所欲地使用它。

# ruby-on-rails - Ruby on Rails 3.4 嵌套表单 - fields_for 在 DB 中创建多个条目

> ID：13034406
> 
> 赞同：1
> 
> 时间：2012-10-23T15:50:10.303
> 
> 标签：ruby-on-rails, ruby, forms, nested

我对 Rails 将嵌套表单存储在数据库中的方式有​​疑问。我正在设计一个食谱网站（爱好），为此我创建了三个模型食谱、成分和成分食谱（代码如下）。成分可通过 has_many 和 Recipe 访问。所以菜谱可以有很多成分，成分可以属于很多菜谱。此外，IngredientRecipe 模型保存了每种配方和成分组合所独有的数量。

我的问题不是创建用于输入数据的嵌套表单，而是它存储在数据库中的方式。使用我当前的代码，每个新条目都会在 IngredienRecipe 模型中生成两行，一行用于配方和数量的组合，另一行用于配方成分关系。但是，我试图以一种方式对其进行设置，即每个条目在成分食谱表中恰好生成一行，将配方、成分和数量的独特组合链接在一起。

任何提示或代码片段都非常感谢，因为我已经被这个问题困扰了几天了:-(

这是我目前的模型：

```
class Recipe < ActiveRecord::Base
      attr_accessible :description, :name
      attr_accessible :ingredients_attributes, :ingredient_recipes_attributes

      has_many :ingredient_recipes
      has_many :ingredients, :through => :ingredient_recipes

      accepts_nested_attributes_for :ingredients
      accepts_nested_attributes_for :ingredient_recipes
  end

class Ingredient < ActiveRecord::Base
      attr_accessible :name, :unit

      has_many :ingredient_recipes
      has_many :recipes, :through => :ingredient_recipes
     end

class IngredientRecipe < ActiveRecord::Base
      attr_accessible :quantity

      belongs_to :recipe
      belongs_to :ingredient
end 
```

修改后的配方控制器：

```
 #Modified controller function
    def new
        @recipe = Recipe.new
        @ingredients = @recipe.ingredients.build
        @ingredient_recipes = @recipe.ingredient_recipes.build

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @recipe }
        end
      end 
```

和 form_for 视图文件

```
<%= form_for @recipe do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>

<%=f.fields_for :ingredients do |ff|%>
   <div class="field">
    <%= ff.label :name %><br />
    <%= ff.text_field :name %>
  </div>

     <%= f.fields_for :ingredient_recipes do |fff| %>
         <div class="field">
           <%= fff.label :quantity%><br />
           <%= fff.text_field :quantity %>
         </div>
  <% end -%>   

  <div class="field">
    <%= ff.label :unit %><br />
    <%= ff.text_field :unit %>
  </div>
  <% end -%>

  <div class="actions">
   <%= f.submit %>
  </div>
   <% end %> 
```

好的，在多次检查我的代码之后，我终于想出了一个更好的解决我的问题的方法。诀窍在于通过Recipe --> Ingredient --> JOIN table将模型相互嵌套。我当前的解决方案还没有动态添加 fields_for，但是这个版本不需要对 recipes_controller 进行任何更改。如果其他人也在为此苦苦挣扎，这是我的代码：

```
 class Recipe < ActiveRecord::Base
  attr_accessible :description, :name, :ingredients_attributes

  has_many :unique_recipes
  has_many :ingredients, :through => :unique_recipes

  accepts_nested_attributes_for :ingredients

end

class UniqueRecipe < ActiveRecord::Base
  attr_accessible :quantity, :recipe_id, :ingredient_id

    belongs_to :recipe
    belongs_to :ingredient

end

class Ingredient < ActiveRecord::Base
  attr_accessible :name, :unit, :unique_recipes_attributes

  has_many :unique_recipes
  has_many :recipes, :through => :unique_recipes

  accepts_nested_attributes_for :unique_recipes, allow_destroy: true

end

<%= form_for @recipe, :html => { :class => 'form-horizontal' } do |f| %>
    <%= f.label :name, :class => %>
      <%= f.text_field :name, :class => 'text_field' %>
    <%= f.label :description, :class => 'control-label' %>
      <%= f.text_area :description, :class => 'text_area' %>

<%= f.fields_for :ingredients do |ff| %>
    <%= ff.label :name, :class => %>
      <%= ff.text_field :name, :class => 'text_field' %>
    <%= ff.label :unit, :class => %>
      <%= ff.text_field :unit, :class => 'text_field' %>
  <%= ff.fields_for :unique_recipes do |fff| %>
    <%= fff.label :quantity, :class => %>
      <%= fff.text_field :quantity, :class => 'text_field' %>
<% end -%>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                recipes_path, :class => 'btn' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:10:12.283

这是我当前的工作解决方案，用于嵌套表单字段，通过关联具有 has_many 和动态添加字段的茧宝石。我仍在为这个特定场景进行一些茧调整，但模型和关联确实有效。

型号：

```
class Recipe < ActiveRecord::Base
  attr_accessible :description, :name, :ingredients_attributes

  has_many :unique_recipes
  has_many :ingredients, :through => :unique_recipes

  accepts_nested_attributes_for :ingredients

end

class UniqueRecipe < ActiveRecord::Base
  attr_accessible :quantity, :recipe_id, :ingredient_id

    belongs_to :recipe
    belongs_to :ingredient

end

class Ingredient < ActiveRecord::Base
  attr_accessible :name, :unit, :unique_recipes_attributes

  has_many :unique_recipes
  has_many :recipes, :through => :unique_recipes

  accepts_nested_attributes_for :unique_recipes, allow_destroy: true

end 
```

Twitter引导程序中混合了一些表单字段：

```
 <%= form_for @recipe, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :description, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :description, :class => 'text_area' %>
    </div>
  </div>

<%= f.fields_for :ingredients do |ff| %>
<%= render 'ingredient_fields', f: ff %>

<% end -%>

  <div class="form-actions">
    <%= link_to_add_association 'Add an Ingredient', f, :ingredients, :class => 'btn btn-  primary'%>
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                recipes_path, :class => 'btn' %>
  </div>
<% end %> 
```

和匹配的部分 _ingredient_fields.html.erb

```
 <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :unit, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :unit, :class => 'text_field' %>
    </div>
  </div>
  <%=link_to_remove_association "Remove Ingredient", f%>

  <%= render 'quantity_fields', f: ff %>
<% end -%> 
```

recipes_controller 没有变化。如果您希望能够动态添加和删除嵌套表单元素，我强烈推荐 cocoon gem (http://github.com/nathanvda/cocoon)。

干杯!

# xpath - XPath中基于Uncle的过滤

> ID：13034413
> 
> 赞同：0
> 
> 时间：2012-10-23T15:50:38.677
> 
> 标签：xpath, scrapy

假设我有一个包含以下行的 HTML 表，

```
...
<tr>
  <th title="Library of Quintessential Memes">LQM:</th>
  <td>
    <a href="docs/lqm.html"><b>Intro</b></a>
    <a href="P/P79/">79</a>
    <a href="P/P80/">80</a>
    <a href="P/P81/">81</a>
    <a href="P/P82/">82</a>
  </td>
</tr>
<tr>
  <th title="Library of Boring Books">LBB:</th>
  <td>
    <a href="docs/lbb.html"><b>Intro</b></a>
    <a href="R/R80/">80</a>
    <a href="R/R81/">81</a>
    <a href="R/R82/">82</a>
    <a href="R/R83/">83</a>
    <a href="R/R84/">84</a>
  </td>
</tr>
... 
```

我想选择一个元素`<a>`中的所有元素，`<td>`其关联`<th>`的文本位于一小组固定标题（例如 LQM、LBR 和 RTT）中。如何将其表述为 XPath 查询？

编辑：我正在使用 Scrapy，一个 Python 抓取工具包，所以如果更容易将此查询表述为一组较小的查询，我会非常乐意使用它。例如，如果我可以选择`<tr>`第一`<th>`个子元素与正则表达式匹配的所有元素，然后选择`<a>`剩余元素的所有后代`<tr>`，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:00:28.377

以下 XPath 将起作用：

```
//a[contains(',LQM:,LBR:,RTT:,',
             concat(',', ancestor::td/preceding-sibling::th, ','))] 
```

从理论上讲，这可能会产生一些误报（如果您的代码包含逗号）。

更严格的说法是：

```
//a[ancestor::td/preceding-sibling::th[.='LQM:']]
|//a[ancestor::td/preceding-sibling::th[.='LBR:']]
|//a[ancestor::td/preceding-sibling::th[.='RTT:']] 
```

我通过`<table>`在您的输入周围添加标签并应用以下 XSL 转换来测试这一点：

```
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <xsl:for-each select="//a[ancestor::td/preceding-sibling::th[.='LQM:']]
                                  |//a[ancestor::td/preceding-sibling::th[.='LBR:']]
                                  |//a[ancestor::td/preceding-sibling::th[.='RTT:']]">
            <xsl:text>
</xsl:text>
            <xsl:copy-of select="."/>
        </xsl:for-each>
    </xsl:template>

</xsl:transform> 
```

它产生以下输出：

```
<a href="docs/lqm.html"><b>Intro</b></a>
<a href="P/P79/">79</a>
<a href="P/P80/">80</a>
<a href="P/P81/">81</a>
<a href="P/P82/">82</a> 
```

当然，如果您使用的是 XSL，那么您可能会发现这种结构更具可读性：

```
<xsl:for-each select="//a">
    <xsl:variable name="header" select="ancestor::td/preceding-sibling::th"/>

    <xsl:if test="$header='LQM:' or $header = 'LBR:' or $header = 'RTT:'">
        <xsl:text>
        </xsl:text>
        <xsl:copy-of select="."/>

    </xsl:if>
</xsl:for-each> 
```

# list - 使用 foldr 反转列表

> ID：13034414
> 
> 赞同：0
> 
> 时间：2012-10-23T15:50:43.580
> 
> 标签：list, scheme, fold

如何定义一个函数来将列表反转为仅对 foldr 的一次调用？

它应该看起来像这样

```
(define (rev l)
    (foldr ___________________________ 
```

这是一道练习题，老师决定不回答-.-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:10:08.260

如果您先阅读[文档](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._foldr%29%29)，那将非常容易。你会发现`foldr`接收三个参数：

*   要调用的过程，接收作为参数（按该顺序）从输入列表中处理的当前元素和到目前为止的累积答案
*   一个初始化值
*   要处理的列表

现在想一想。如果我们要从头开始构建一个新列表，初始值可能是多少？我们将如何构建列表，可以使用什么程序将元素粘在一起？当然，最后一个参数是输入列表。

唯一棘手的部分是定义过程。鉴于您收到了一个元素和到目前为止累积的答案，您如何将该元素放在累加器的末尾？提示：这是程序的一般结构，请填写缺失的部分：

```
(lambda (element accumulator) <???>) 
```

额外提示：通过阅读文档，您将了解`foldr`从左到右处理输入列表。要查看这一点，`cons`请将其作为第一个参数传递给`foldr`，您会看到它只是按原样复制输入列表。与此相反`foldl`，它似乎从右到左处理列表 - 如果您`cons`作为第一个参数传递`foldl`给新创建的列表，则将被反转。

# python - Celeryd 运行多个守护进程

> ID：13034419
> 
> 赞同：1
> 
> 时间：2012-10-23T15:50:55.587
> 
> 标签：python, django, rabbitmq, django-celery, celeryd

我正在尝试使用带有 RabbitMQ 后端的[Celery](http://celeryproject.org/)在 Fedora 上运行异步后台任务，但我发现它令人沮丧地不可靠。最大的问题是它偶尔会多次运行相同的任务，我无法诊断原因。

我认为我的代码不会多次触发任务，因为我已经通过手动启动任务（创建数据库记录）一次进行了测试，并看到创建了两个相同的记录。如果我从 Django shell 运行代码，只会创建一条记录，所以问题肯定是 Celery。

我有 3 台服务器，每台运行 celeryd，只有第一个运行 rabbitmq，所有 3 台服务器共享同一个数据库。我的第一个问题是我的 celery 设置存在问题，导致每台服务器上的 celeryd 检索并执行相同的任务。但是，芹菜文档中似乎没有任何东西可以区分单主机和多主机设置，因此假设我在我的 settings.py 中为每个服务器指定了正确的 BROKER_HOST/PORT/USER/PASSWORD/VHOST，它应该“只是与多个主机一起工作”。它是否正确？

我的另一个想法是我可能会以某种方式运行 celeryd 的多个实例，尽管我不确定如何检查这一点。两台服务器正在运行 Fedora 13，当我运行时，`ps aux | grep .*.py`我得到：

```
root     24806  0.1  1.8  51404 31328 ?        Sl   Oct19   9:25 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler
root     24900  0.1  1.6  51404 28592 ?        S    Oct19   6:02 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler
root     24901  0.3  9.4 183232 161948 ?       S    Oct19  22:32 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler 
```

这是否表明正在运行 3 个单独的 celeryd 实例？如果是这样，这是一个错误，我应该杀死其中的 2 个吗？

我的第三台服务器运行 Fedora 17，它具有不同的服务框架。当我跑步时，`systemctl status celeryd.service`我得到：

```
celeryd.service - LSB: celery task worker daemon
      Loaded: loaded (/etc/rc.d/init.d/celeryd)
      Active: active (exited) since Fri, 19 Oct 2012 10:59:38 -0400; 4 days ago
     Process: 732 ExecStop=/etc/rc.d/init.d/celeryd stop (code=exited, status=0/SUCCESS)
     Process: 738 ExecStart=/etc/rc.d/init.d/celeryd start (code=exited, status=0/SUCCESS)
      CGroup: name=systemd:/system/celeryd.service 
```

我不确定如何解释这一点。“活动”通常表示它正在运行，但“退出”通常意味着它没有运行。当我跑步时，`ps aux | grep .*celery.*`我只得到：

```
root     25142  0.0  0.0 109400   932 pts/0    S+   11:28   0:00 grep --color=auto .*celery.* 
```

那么这是否意味着 celeryd 没有运行，还是我应该寻找其他东西？

编辑：基于[这个](https://stackoverflow.com/questions/11756020/does-the-number-of-celeryd-processes-depend-on-the-concurrency-setting)答案，我认为这 3 个进程可能是默认的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:16:30.613

我在评论中发布了，但我确信这是您的问题，请参见此处：

```
root     24806  0.1  1.8  51404 31328 ?        Sl   Oct19   9:25 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler
root     24900  0.1  1.6  51404 28592 ?        S    Oct19   6:02 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler
root     24901  0.3  9.4 183232 161948 ?       S    Oct19  22:32 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler 
```

你跑步的 celeryd 连拍了三下。因此，您发送了 3 次节拍消息。

您应该只打开一个带有 beat 的实例，或者（最好）自己运行 celerybeat 并从 celeryd 实例中删除 -B

# c - 为什么函数中的花括号在 C 风格语言中不是可选的？

> ID：13034423
> 
> 赞同：19
> 
> 时间：2012-10-23T15:51:05.297
> 
> 标签：c

语言设计者选择在以下场景中使用花括号：

```
if (a)
    b
while (a)
    b
... 
```

为什么在函数中不允许相同，像这样？

```
int add(int a, int b)
    return a + b; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-23T16:00:25.877

我敢肯定这会弄乱语法。例如，这个空函数定义之间没有区别......

```
void empty()
{
    ;
} 
```

...和这个函数声明：

```
void empty(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T15:55:12.593

我不确定他们是否“选择”了这个。相反，省略花括号 for if、while、for 等的能力是它们指定语法的方式的自然结果。语法禁止它用于函数可能是因为旧式函数声明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T15:58:12.300

没有与函数定义相关的固定关键字。使用`if`/ `else`/ `for`/ `while`/`switch`有一个这样的关键字，标志着逻辑控制结构的开始。

尽管上下文允许我们人类辨别`int some_name (some_expression) some_other_expressions;`函数是如何产生的 - 在编程实践中（尽管明确可行）需要大量回溯才能确保令牌流中前面的 3-4-6 个符号没有任何改变函数声明的情况到别的东西。

编程语言解析器可以通过它的解析方法进行分类，要么它获取令牌列表中的当前令牌并检查下一个令牌是否确认“这是一个 if”或“这是一个函数”，或者它需要最大的查找 -提前标记（2-3-6？）并确认“这可能是一个函数”，“现在我看到第 5 个标记这肯定是一个函数”，或者它使用带有可变前瞻方法的回溯根据需要在令牌列表中，以确保我们正在研究的构造不是别的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T15:53:53.177

如果我推测，我会说这是因为一个函数通常包含多个语句，而 if 或 while 语句通常只包含一个语句。此外，它被证明是有远见的，因为在 C++ 中允许省略 {} 会导致成员函数中的歧义。例如：

```
struct s
{
     void f() const int i; //does const refer to int i or the function?
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T20:28:20.227

花括号不是“if”和“if-else”控制语句的可选组件。“if”控制语句的语法产生式允许一个非终结符跟在表达式后面。“if-else”控制语句的语法产生式允许一个非终结符跟在表达式之后，一个非终结符跟在“else”终结符之后。该非终结符的名称是 <statement>。

在控制结构（又名控制语句）的上下文中，花括号属于称为 <compound-statement>（有时称为 <block>）的语言非终结符符号。非终结符 <compound-statement> 出现在 <statement> 语法产生式的右侧，这就是为什么花括号可以与“if”和“if-else”控制语句一起使用（即，复合语句**是一个**语句）。

```
<statement> ::= <if-then-statement> | 
                <if-then-else-statement> | 
                <for-statement> |
                <do-while-statement> |
                ...
                <compound-statement>

<statement-list> ::=  <statement> | <statement-list> <statement> 

<if-then-statement> ::= "if" "(" <expression> ")" <statement> 

<if-then-else statement> ::= "if" "(" <expression> ")" <statement> 'else' <statement>

<compound-statement> ::= "{" <statement-list> "}" 
```

对于函数声明，<compound-statement> 非终结符是 <function-declaration> 语法产生式右侧的最后一个非终结符。

PS 所有非终结符都是语法产生。所有语法产生式都简化为一个或多个非终结符号和/或终结符号。终端符号是语言关键字。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-04T03:28:12.703

我知道这就像一个 7 年的颠簸，但以上所有答案都不正确；尽管罗伯特库珀说这会破坏语法是正确的。

真正的问题与 C 的原始版本的外观有关：

```
main(argc, argv)
    char *argv[];
{
    puts("hello world!");
} 
```

默认情况下，C 中的所有内容都是 int，因此可以省略很多类型注释。Modern C 完全向后兼容，因为人们不想丢弃或更新一堆现有代码。

请注意，函数参数列表之后的类型注释看起来与普通变量声明完全一样。这是故意这样做的，可能是为了简化原始语法，但这意味着尝试定义一个没有花括号的函数，就像在你的例子中那样，将是完全模棱两可的。

基本上，它不能工作，因为解析器无法区分声明语句和类型注释之间的区别。

# java - 在@Pattern 中组合两个“模式”

> ID：13034431
> 
> 赞同：0
> 
> 时间：2012-10-23T15:51:31.880
> 
> 标签：java, design-patterns

我目前有一个：

> @Pattern(regexp="\p{Alpha}+", message="只允许字母字符")

这限制了用户只能使用字母字符。但我也试图让用户使用“空间”。

我发现空间的“模式”是：

> \\p{空白}

但我需要帮助将两者结合起来，这样您就可以同时编写字母字符和空格。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:55:30.740

您可以使用字符类`[...]`：

```
@Pattern(regexp="[\\p{Alpha}\\p{Blank}]+",
         message="Only Alphabetic and Blank chars allowed") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:54:36.263

使用`@Pattern(regexp="\p[{Alpha}{Blank}]+"...`甚至简化如下：

`@Pattern(regexp="\p(\w|\s)+")`

# hibernate - 休眠：java.lang.NoSuchMethodError：org.objectweb.asm.ClassWriter.(Z)V

> ID：13034439
> 
> 赞同：0
> 
> 时间：2012-10-23T15:51:44.657
> 
> 标签：hibernate, struts2

当我访问我的应用程序登录页面时，该页面已加载。但是我输入登录名和密码来访问另一个页面我有一个例外：

```
Struts has detected an unhandled exception:
Messages:   
org.objectweb.asm.ClassWriter.(Z)V
File:   net/sf/cglib/core/DebuggingClassWriter.java
Line number:    47
Stacktraces
java.lang.reflect.InvocationTargetException

    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Thread.java:662)

java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.(Z)V

    net.sf.cglib.core.DebuggingClassWriter.(DebuggingClassWriter.java:47)
    net.sf.cglib.core.DefaultGeneratorStrategy.getClassWriter(DefaultGeneratorStrategy.java:30)
    net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:24)
    net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
    net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:145)
    net.sf.cglib.core.KeyFactory.create(KeyFactory.java:117)
    net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
    net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
    net.sf.cglib.proxy.Enhancer.(Enhancer.java:69)
    org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxyFactory(CGLIBLazyInitializer.java:111)
    org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.postInstantiate(CGLIBProxyFactory.java:43)
    org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:162)
    org.hibernate.tuple.entity.AbstractEntityTuplizer.(AbstractEntityTuplizer.java:135)
    org.hibernate.tuple.entity.PojoEntityTuplizer.(PojoEntityTuplizer.java:55)
    org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.(EntityEntityModeToTuplizerMapping.java:56)
    org.hibernate.tuple.entity.EntityMetamodel.(EntityMetamodel.java:269)
    org.hibernate.persister.entity.AbstractEntityPersister.(AbstractEntityPersister.java:425)
    org.hibernate.persister.entity.SingleTableEntityPersister.(SingleTableEntityPersister.java:109)
    org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:55)
    org.hibernate.impl.SessionFactoryImpl.(SessionFactoryImpl.java:226)
    org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1218)
    fr.si2m.occ.dao.sessions.HibernateFactory.(HibernateFactory.java:56)
    fr.si2m.occ.dao.interfaces.AbstractDAO.(AbstractDAO.java:26)
    fr.si2m.occ.dao.impl.MessageDAOImpl.(MessageDAOImpl.java:19)
    fr.si2m.occ.utils.MessageUtils.listMessages(MessageUtils.java:22)
    fr.si2m.occ.web.actions.LoginAction.execute(LoginAction.java:128)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Thread.java:662) 
```

我想我有冲突，但我不知道是哪一个。这是我的 pom 文件：

```
<dependencies>
      <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.1</version>
      </dependency>
      <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>1.7</version>
      </dependency>
      <dependency>
        <groupId>com.sas</groupId>
        <artifactId>sas.core</artifactId>
        <version>902000</version>
        <scope>provided</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>asm</groupId>
      <artifactId>asm</artifactId>
      <version>3.3.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>cglib</groupId>
      <artifactId>cglib-nodep</artifactId>
      <version>2.1_3</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.6.6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.17</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>jmxtools</artifactId>
          <groupId>com.sun.jdmk</groupId>
        </exclusion>
        <exclusion>
          <artifactId>jmxri</artifactId>
          <groupId>com.sun.jmx</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>javax.transaction</groupId>
      <artifactId>jta</artifactId>
      <version>1.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate</artifactId>
      <version>3.2.0.ga</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>commons-logging</artifactId>
          <groupId>commons-logging</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-annotations</artifactId>
      <version>3.2.0.ga</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.21</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.sas</groupId>
      <artifactId>sas.core</artifactId>
      <version>902300</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>com.sas</groupId>
      <artifactId>sas.svc.connection</artifactId>
      <version>902300</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.struts</groupId>
      <artifactId>struts2-core</artifactId>
      <version>2.3.4.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>javassist</groupId>
      <artifactId>javassist</artifactId>
      <version>3.8.0.GA</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>jstl</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.struts</groupId>
      <artifactId>struts2-tiles-plugin</artifactId>
      <version>2.3.4.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.tiles</groupId>
      <artifactId>tiles-jsp</artifactId>
      <version>2.0.6</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>xml-apis</artifactId>
          <groupId>xml-apis</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.apache.tiles</groupId>
      <artifactId>tiles-core</artifactId>
      <version>2.0.6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.tiles</groupId>
      <artifactId>tiles-api</artifactId>
      <version>2.0.6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-beanutils</groupId>
      <artifactId>commons-beanutils</artifactId>
      <version>1.8.3</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>commons-logging</artifactId>
          <groupId>commons-logging</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.0</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.struts</groupId>
      <artifactId>struts2-json-plugin</artifactId>
      <version>2.3.4.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.jgeppert.struts2.jquery</groupId>
      <artifactId>struts2-jquery-plugin</artifactId>
      <version>3.3.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.jsoup</groupId>
      <artifactId>jsoup</artifactId>
      <version>1.3.3</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.lowagie</groupId>
      <artifactId>itext</artifactId>
      <version>2.1.7</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>net.sf.jasperreports</groupId>
      <artifactId>jasperreports</artifactId>
      <version>4.1.2</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>xml-apis</artifactId>
          <groupId>xml-apis</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.eclipse.jdt</groupId>
      <artifactId>core</artifactId>
      <version>3.3.0-v_771</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.struts</groupId>
      <artifactId>struts2-jasperreports-plugin</artifactId>
      <version>2.2.1.1</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-fileupload</groupId>
      <artifactId>commons-fileupload</artifactId>
      <version>1.2.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.4</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.freemarker</groupId>
      <artifactId>freemarker</artifactId>
      <version>2.3.19</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.xhtmlrenderer</groupId>
      <artifactId>core-renderer</artifactId>
      <version>R8pre2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.mentaframework</groupId>
      <artifactId>mentawai</artifactId>
      <version>1.13</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>xalan</groupId>
      <artifactId>xalan</artifactId>
      <version>2.7.1</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <artifactId>xml-apis</artifactId>
          <groupId>xml-apis</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>com.google.collections</groupId>
      <artifactId>google-collections</artifactId>
      <version>1.0</version>
      <scope>compile</scope>
    </dependency>
  </dependencies> 
```

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:24:10.613

您可以删除 asm 依赖项：

```
<dependency>
      <groupId>asm</groupId>
      <artifactId>asm</artifactId>
      <version>3.3.1</version>
      <scope>compile</scope>
    </dependency> 
```

来自你的 pom。

Hibernate 会将它传递到您的项目中（以正确的版本），因此无需将其包含在您的 pom.xml 中。添加不必要的依赖项通常会导致包含错误版本的所需 jar。

# ios - 只允许带有标签栏和 UInavigationcontrollers 的orientationPortrait？

> ID：13034440
> 
> 赞同：1
> 
> 时间：2012-10-23T15:51:48.067
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uiinterfaceorientation

在我的应用程序中，我希望它的一些幻灯片只允许orientationPortrait。问题是我根本无法在 Xcode 中禁用横向模式。我在下面尝试了以下操作，并在幻灯片的情节提要中设置了肖像。我的理解是，如果你的类连接到标签栏和导航控制器，它可能不会听“标准命令”？在这种情况下，我该怎么做才能禁用除纵向之外的所有方向？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:04:26.083

如果您想限制旋转给定视图控制器的能力，您可以使用 shouldAutoroateToInterfaceOrientation 在正确的轨道上。我个人更喜欢更简洁的 UIInterfaceOrientationIsPortrait() 方法而不是直接比较，尽管我从本质上看不出你所做的有什么问题。

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

要记住的事情，我认为可能的问题是，您需要在要限制旋转的每个视图控制器中都有此方法。我将创建一个包含上述代码的主视图控制器类，并将其子类化程序来解决这个问题。

但是，这不会阻止程序以横向模式启动。为此，您需要进入 Info.plist 文件并将“初始界面方向”值更改为纵向。让我知道这是否解决了您的问题，或者似乎是其他原因导致了问题。

# web-services - 如何使用 QualityCentral SOAP 服务进行身份验证？

> ID：13034454
> 
> 赞同：2
> 
> 时间：2012-10-23T15:52:14.037
> 
> 标签：web-services, delphi

在 SOAP 服务的 Web 服务描述中（位于[http://qc.embarcadero.com/qc/coBugCGI.exe?intf=ICDSReportPublicInterface](http://qc.embarcadero.com/qc/coBugCGI.exe?intf=ICDSReportPublicInterface)），登录方法具有以下签名：

```
base64Binary    Login(string EMail, string Passcode, string ClientID, string BDN) 
```

电子邮件和密码很容易理解，我猜客户端可能会提供客户端定义的标识符并将其作为第三个参数传递。

名称为 BDN 的最后一个参数是什么？

# grails - 如何禁止访问grails中的视图或控制器

> ID：13034457
> 
> 赞同：1
> 
> 时间：2012-10-23T15:52:21.990
> 
> 标签：grails, spring-security

我有一个这样的控制器

```
class MyController {

    def index() {    }
    def list(Integer max) {      }
    def create() {     }
} 
```

我有不同的角色，如“管理员”、“用户”，我希望只有“管理员”才能看到“创建”视图。知道我使用 Spring Security

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:59:19.340

该[文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)非常清楚地说明了如何解决此问题。通过数据库使用 Requestmap 来锁定 URL 或使用注释。

如果您使用的是 Requestmap，您只需锁定一组特定角色的 URL。如果您想锁定 MyController，其中创建视图仅对管理员可用，它将是

```
configAttribute: ROLE_ADMIN   url: /myController/create/** 
```

如果使用注释，它将是

```
class MyController {
    @Secured(['ROLE_ADMIN'])
    def create() { }
} 
```

阅读写得很好的[文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)以获取更多信息。

# iphone - 当 UIDevice 方向改变时停止自动调整大小

> ID：13034458
> 
> 赞同：0
> 
> 时间：2012-10-23T15:52:26.857
> 
> 标签：iphone, cocoa-touch, ios6, orientation, uideviceorientation

我在使用 iOS 6.0 时遇到了一个非常烦人的问题。每次 IUDevice 方向改变一些子视图时，即使不需要，也会自动调整大小。在我的特殊情况下，唯一自动调整大小的是 UIButton，那么我能做些什么来停止这个自动调整大小，如果可能的话禁用所有自动调整大小？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:40:13.693

从所有子视图中删除自动调整大小

@按代码

```
[subView setAutoresizingMask:UIViewAutoresizingNone]; 
```

@By 接口生成器

![在此处输入图像描述](../Images/44a9541de560dfbeb7a27b521f6d565d.png)

# c - 我们什么时候说两个标识符具有相同的范围？

> ID：13034459
> 
> 赞同：2
> 
> 时间：2012-10-23T15:52:27.550
> 
> 标签：c

C 标准定义两个标识符具有相同的范围当且仅当它们的范围终止于同一点。并进一步指出：

> 结构、联合和枚举标记的范围紧随标记出现在声明标记的类型说明符中之后开始。每个枚举常量的作用域都在其定义枚举数出现在枚举数列表中之后开始。任何其他标识符的范围都在其声明符完成后开始。

这是否意味着两个标识符被正式调用为具有相同的范围，即使它们的范围的开头不匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:57:58.700

是的，这是一种合理的思考方式。否则没有两个标识符将具有相同的范围！

```
{
    int a;
    int b;
} 
```

在上面， 和 的范围`a`开始`b`于不同的点，但我们当然希望将它们视为在同一个范围内！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-21T15:50:05.573

你感到困惑是可以理解的。然而，这实际上只是一个定义问题。在[C99 标准的最新委员会草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)第 6.2.1 段中：

第 2 项：

> 对于标识符指定的每个不同实体，标识符仅在称为其范围的程序文本区域内可见（即，可以使用）。

第 6 项：

> 当且仅当它们的作用域在同一点终止时，两个标识符具有*相同的作用域。*

因此，正如您所看到的，术语*“相同范围”*是一个定义问题，并不意味着范围从同一位置开始，或者对象所在的程序区域完全相同。因此，也如上一个答案所述：

```
{
    int a;
    int b;
} 
```

总结一下：是的，变量 a 和 b 的作用域从不同的点开始，但是因为它们的作用域在同一点结束，所以它们根据 C 标准定义被称为*“相同的作用域”*。

# c++ - 非二叉树 C++

> ID：13034465
> 
> 赞同：0
> 
> 时间：2012-10-23T15:52:58.013
> 
> 标签：c++, pointers, tree, binary-tree

我想创建一个非二叉树。我想到了一个带有指针指针的这种类型的结构

```
struct tree{
    string name;
    int sonc;
    tree** son;
}; 
```

我为两个大条目崩溃

```
void insertSon(tree* &a, string n){

if (a->sonc==0){
    a->son= new tree*;}

a->son[a->sonc]= new tree;
a->son[a->sonc]->name=n;
a->son[a->sonc]->sonc=0;
a->sonc++;} 
```

但也在取消

```
void deleteTree(tree* &a){
for (int i=0;i<(a->sonc);++i){
    deleteTree(a->son[i]);
}
delete a;} 
```

具有树种群的主要 cpp

```
tree *tree1;
tree1=new tree;

tree1->name="C:\\TEMP";
tree1->sonc=0;
insertSon(tree1,"C:\\TEMP\\aadvfdbdsbdfgfile1.txt");
insertSon(tree1,"C:\\TEMP\\aadvfdbdsbdfgfile2.txt");
insertSon(tree1,"C:\\TEMP\\FOLDER1");

tree *lastf1=tree1->son[tree1->sonc-1];
insertSon(lastf1,"C:\\TEMP\\FOLDER1\\aadvfdbdsbdfgfile3.txt");
insertSon(lastf1,"C:\\TEMP\\FOLDER1\\aadvfdbdsbdfgfile4.txt");
insertSon(lastf1,"C:\\TEMP\\FOLDER1\\FOLDER2");

tree *lastf2=lastf1->son[lastf1->sonc-1];
for (int i=0;i<100;++i){
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfile5.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfile6.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfile7.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfile8.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfile9.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfileA.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfileB.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfileC.txt");
insertSon(lastf2,"C:\\TEMP\\FOLDER1\\FOLDER2\\aadvfdbdsbdfgfileD.txt");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:06:00.507

您的代码错误在于这一行：

```
a->son= new tree*; 
```

只分配一个指针，但您试图将其用作指针数组。

与其乱用数组，不如使用向量。你可以有

```
std::vector< tree * > son; 
```

当然，您仍然需要注意向量中的指针。您可以使用`shared_ptr<tree>`或`unique_ptr<tree>`如果可用于儿童。

```
std::vector< shared_ptr< tree > > son; 
```

或者

```
std::vector< unique_ptr< tree > > son; 
```

（在或中带有`shared_ptr`和）`unique_ptr``namespace std``namespace boost`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:57:59.660

您永远不会在 分配一个数组`son`，而只是一个`tree`.

您正在`std::vector`完全复制的功能。使用`std::vector`而不是自己管理阵列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:36:44.597

谢谢大家

适用于这些更改

```
struct tree{
    string name;
    int sonc;
    vector< tree* > son;
}; 
```

和插入过程

```
void insertSon(tree* &a, string n){
tree *atmp;
atmp = new tree;
atmp->name=n;
atmp->sonc=0;
(a->son).push_back(atmp);
a->sonc++;} 
```

shared_ptr 和 unique_ptr 的优点是什么？

# c# - 无法将 Int 转换为 int fo 组合

> ID：13034467
> 
> 赞同：3
> 
> 时间：2012-10-23T15:53:04.243
> 
> 标签：c#, .net

我有这个组合框

```
BindingSource srd = new BindingSource();
srd.DataSource = llenar.Tables["cnae"];
CmbCnaePrin.DataSource = srd;
CmbCnaePrin.DisplayMember = "cnae_descricao";
CmbCnaePrin.ValueMember = "cnae_id"; 
```

我想加载这个

```
int cnaepr;
DataTable dt3 = new DataTable();
dt3 = ifd.cnaeclas(cnaepr);
txtCnaeC.Text = dt3.Rows[0][2].ToString();
txtCnaeSC.Text = dt3.Rows[0][3].ToString(); 
```

但我无法转换

```
 cnaepr=Convert.ToInt32(CmbCnaePrin.SelectedValue) 
```

返回此错误无法将“System.Data.DataRowView”类型的对象转换为“System.IConvertible”类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:57:45.220

尝试在 SelectedValue 属性上调用 ToString()：

```
cnaepr=Convert.ToInt32(CmbCnaePrin.SelectedValue.ToString()); 
```

错误几乎就是它所说的。SelectedValue 属性被设计为非常通用，因此它可以是您可以在 DataTable 中找到的任何内容。大多数可能不是“可转换”类型（实现 IConvertible）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:24:09.277

我能够通过一个简单的测试应用程序重现您的问题，我可以向您推荐两种可能的解决方案。

您可以删除`BindingSource`实际上只是 和 之间的代理`DataTable`的对象`ComboBox`。

应用此解决方案，代码应如下所示：

```
CmbCnaePrin.DataSource = llenar.Tables["cnae"];
CmbCnaePrin.DisplayMember = "cnae_descricao";
CmbCnaePrin.ValueMember = "cnae_id"; 
```

其余的可以不变，你应该`String`在`CmbCnaePrin.SelectedValue`.

**替代解决方案（更新）**

或者，您可以使用 BindingSource，但`DataRowView`在 中返回句柄`CmbCnaePrin.SelectedValue`，以及当您直接获取值时的情况。

应用此解决方案，代码应如下所示：

```
DataRowView selectedValue = (CmbCnaePrin.SelectedValue as DataRowView);
if (selectedValue != null)
{
    cnaepr = Convert.ToInt32(selectedValue.Row["cnae_id"]);
}
else
{
    cnaepr = Convert.ToInt32(CmbCnaePrin.SelectedValue);
} 
```

其余的可以保持不变。

让我知道这是否解决了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:54:58.257

在分配 DataSource 之前尝试设置组合框 DisplayMember 和 ValueMember。

```
CmbCnaePrin.DisplayMember = "cnae_descricao";
CmbCnaePrin.ValueMember = "cnae_id";
CmbCnaePrin.DataSource = srd; 
```

我认为在设置 DataSource 之后分配这些意味着组合框正在尝试使用 DataTable 的默认迭代器，它是 DataRow （或在这种情况下 DataView 上的 DataRowView ）。因此，它会在分配之前自行设置 ValueMember 和 DisplayMember。

# javascript - 如何向 jQuery File Upload Plugin 发送附加数据？

> ID：13034468
> 
> 赞同：4
> 
> 时间：2012-10-23T15:53:04.617
> 
> 标签：javascript, jquery, jquery-plugins

这看起来很愚蠢，但我似乎无法理解文档。我说的是[这个](https://github.com/blueimp/jQuery-File-Upload)文件上传插件。

现在根据文档有一个选项：

> **表单数据**
> 
> 可以使用此选项设置与文件上传一起发送的其他表单数据，该选项接受具有名称和值属性的对象数组、返回此类数组的函数、FormData 对象（用于 XHR 文件上传）或简单的目的。第一个 fileInput 的形式作为函数的参数给出。
> 
> **注意**：当 multipart 选项设置为 false 时，将忽略其他表单数据。
> 
> 类型：数组、对象、函数或 FormData 默认值：将表单字段作为序列化数组返回的函数：
> 
> ```
> function (form) {
>     return form.serializeArray();
> } 
> ```
> 
> **例子：**
> 
> [{名称：'a'，值：1}，{名称：'b'，值：2}]

我不明白我应该做什么。

这就是我初始化插件的方式：

```
$('#add_image_upload').fileupload({
            dataType: 'json',
    sequentialUploads: true,
    formData : getDate
}); 
```

这是我对该功能的尝试：

```
 function getDate(){

//if user didn't selected a date
if(!selectedDate || selectedDate=="undefined"){
selectedDate = "1/1/"+$('#timeline').html();
}
var date= new Array(selectedDate);
return date;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:02:16.357

尝试将您的数据转换为对象 - 使用他们在示例中显示的内容

```
$('#add_image_upload').fileupload({
            dataType: 'json',
    sequentialUploads: true,
    formData : {name:'thedate',value:getDate}
}); 
```

然后添加更多参数

```
 //name of param  // value
formData : [{name:'thedate',value:getDate},{name:'thedate2',value:'seconddate'},etc..] 
```

> 例子：
> 
> [{名称：'a'，值：1}，{名称：'b'，值：2}]

`thedate`用任何你想命名的参数来改变

虽然听起来像一个简单的对象应该可以正常工作

```
 //name:value
formData : {thedate:getDate} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:59:13.647

你在表格上`multipart`设置了吗？`false`此外，请确保您发回的格式是可接受的。

尝试硬编码以下行并发送回信息：

```
new dateobject = { "date": "1/1/2012" } 
```

# java - 输入按钮抛出空指针异常

> ID：13034471
> 
> 赞同：0
> 
> 时间：2012-10-23T15:53:22.547
> 
> 标签：java, swing, nullpointerexception, jbutton, actionlistener

我是 Java 新手，我得到一个空指针异常。我知道它发生在哪里，但无法确定原因。它在下面的代码部分。该代码正在验证时间工资以及工资和时间的格式。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javagui.enterButtonActionPerformed(javagui.java:167)
    at javagui$1.actionPerformed(javagui.java:86)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

这是代码： -

```
import java.awt.Component;
import java.text.DecimalFormat;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Andy
 */
public class javagui extends javax.swing.JPanel {

private JLabel tutorTimeLabel;
private JLabel paymentLabel;
private JScrollPane jScrollPane1;
private JTextArea reportTextArea;
private JTextField tutorTime;
private JTextField payment;
private JButton enterButton;
private JButton reportButton;
private JButton quitButton;
private Component paymentText;
private Component tutorTimeText;
//2d array
double[][] timeWage;
//position in array
int timeWageIndex = 0;
//minimum wage
double minimumWage = 6.55;
static final String lineSeparator = System.getProperty("line.separator");

/** Creates new form GUI */
public javagui() {
    initComponents();

}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    tutorTimeLabel = new javax.swing.JLabel();
    paymentLabel = new javax.swing.JLabel();
    jScrollPane1 = new javax.swing.JScrollPane();
    reportTextArea = new javax.swing.JTextArea();
    tutorTimeText = new javax.swing.JTextField();
    paymentText = new javax.swing.JTextField();
    enterButton = new javax.swing.JButton();
    reportButton = new javax.swing.JButton();
    quitButton = new javax.swing.JButton();

    tutorTimeLabel.setText("Enter total tutoring time in minutes:");

    paymentLabel.setText("Enter total amount earned this session:");

    reportTextArea.setColumns(20);
    reportTextArea.setRows(5);
    jScrollPane1.setViewportView(reportTextArea);

    enterButton.setText("Enter");
    enterButton.addActionListener(new java.awt.event.ActionListener() {

        @Override
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            enterButtonActionPerformed(evt);
        }
    });

    reportButton.setText("Report");
    reportButton.addActionListener(new java.awt.event.ActionListener() {
        @Override
    public void actionPerformed(java.awt.event.ActionEvent evt) {
            reportButtonActionPerformed(evt);
        }
    });

    quitButton.setText("Quit");
    quitButton.addActionListener(new java.awt.event.ActionListener() {
        @Override
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            quitButtonActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(23, 23, 23)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 434, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(enterButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(reportButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(quitButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGroup(layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(tutorTimeLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(paymentLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(paymentText)
                        .addComponent(tutorTimeText, javax.swing.GroupLayout.DEFAULT_SIZE, 120, Short.MAX_VALUE))))
            .addContainerGap(58, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(tutorTimeText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                    .addGap(24, 24, 24)
                    .addComponent(tutorTimeLabel)))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(paymentLabel)
                .addComponent(paymentText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(enterButton)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addComponent(reportButton)
                    .addGap(18, 18, 18)
                    .addComponent(quitButton)
                    .addContainerGap(320, Short.MAX_VALUE))
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 426, Short.MAX_VALUE)))
    );
}// </editor-fold>

public void quitButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    //select to close the Calculator
    System.exit(0);

}                                          

public void reportButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    // TODO add your handling code here:

    reportTextArea.setText(""); // clear previous report
        String newline = "\n";
        double timeTotal = 0;
        double wageTotal = 0;

        //Loops through each entry
        for(int i = 0; i<=timeWageIndex-1; i++){
            //Gets current entry time
            double time = timeWage[i][0];
            //Gets current entry wage
            double wage = timeWage[i][1];
            //Adds to sums
            timeTotal += time;
            wageTotal += wage;

            reportTextArea.append("Minutes = " + time + "    Earnings = $" + wage + newline);
        }

        DecimalFormat df = new DecimalFormat("#.##");
        double average = wageTotal / (timeTotal/60);
        //Displays report
        reportTextArea.append(newline + newline + "*****************************" + newline + newline + newline);
        reportTextArea.append("Report of your wages to Date:" + newline + newline);
        reportTextArea.append("Total Minutes Spent Tutoring = " + timeTotal + newline);
        reportTextArea.append("Total Earnings = $" + wageTotal + newline);
        reportTextArea.append("Average Per Hour Wage = $" + df.format(average) + newline + newline);
        reportTextArea.append("Minimum Wage is currently: $" + minimumWage + newline);

    if(average<minimumWage) {
                    reportTextArea.append("Your average wages are less than average");
                }
        else if(average>minimumWage && average < minimumWage*2.0) {
                    reportTextArea.append("Your average wages are average");
                }
        else if(average >= minimumWage*2.0) {
                    reportTextArea.append("Your average wages are above average");
                }
    }

   public void enterButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
    // TODO add your handling code here:

    //Code Exception error messages when data keyed incorrectly for both textfields
                    double time = 0;
        double wage = 0;

                    //Validates time
        try {
            time = Double.parseDouble(tutorTime.getText());
        } catch (NumberFormatException e1) {
            JOptionPane.showMessageDialog(null, "The time must be a decimal number", "Invalid Input",JOptionPane.ERROR_MESSAGE);
        }

        //Validate wage
        try {
            wage = Double.parseDouble(payment.getText());
        } catch (NumberFormatException e1) {
            JOptionPane.showMessageDialog(null, "The wage must be a decimal number", "Invalid Input",JOptionPane.ERROR_MESSAGE);
        }

        //Time greater than 0 and less than 4 hours
        if(time<=0 || time>240){
            JOptionPane.showMessageDialog(null, "The time must greater than 0 and less than or equal to 4 hours (240 min)", 
                    "Invalid Input",JOptionPane.ERROR_MESSAGE);
        }
        else{
            //Wage greater than 0
            if(wage<=0){
                JOptionPane.showMessageDialog(null, "The wage must greater than 0", 
                        "Invalid Input",JOptionPane.ERROR_MESSAGE);
            }
            else{
                //update array values
                timeWage[timeWageIndex][0] = time;
                timeWage[timeWageIndex][1] = wage;

                //increment index
                timeWageIndex++; 

                //Reset text for user entry
                tutorTime.setText("");
                payment.setText("");
            }
                    } 
   } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:24:05.373

定义了这两个文本字段：

```
private JTextField tutorTime;
private JTextField payment; 
```

但是，它们没有被初始化，而是这两个被初始化并在面板中使用：

```
private Component paymentText;
private Component tutorTimeText; 
```

尽管如此，还是`enterButtonActionPerformed`有一个引用`tutorTime`和`payment`which are`null`并且这些调用导致`NullPointerException`. 两个修复，将引用替换`tutorTime`为`tutorTimeText`。对`payment`. 不知道为什么这些字段被定义为`Component`，所以你需要转换为`JTextField`，即：

```
time = Double.parseDouble(((JTextField) tutorTimeText).getText()); 
```

另请注意，`timeWage`数组也未初始化，接下来您将不得不处理另一个`NullPointerException`.

# pdf - PDF_label.php 在不同的计算机、mac 和 pc 上打印不一样

> ID：13034472
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:53:23.567
> 
> 标签：pdf, label

我正在使用 PDF_Label.php 从 mysql 数据库打印标签。该数据库位于不同用户和计算机使用的办公网络上。有些是pc，一个是Mac。计算机之间的标签打印不一样。mac 将字体从 Ariel 更改为 Helvetica 并调整所有间距。有谁知道问题是什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:13:55.873

并非所有计算机上都有相同的字体。要解决此问题，请确保所有计算机上都有相同的字体（Arial、Helvetica 等），或者更改程序以使用所有计算机上都存在的字体。

# android - AChartEngine 不会显示第二个系列

> ID：13034474
> 
> 赞同：1
> 
> 时间：2012-10-23T15:53:33.943
> 
> 标签：android, achartengine

我在使用 AChartEngine 的 Android 应用程序中有一个图表。我遇到了第二个系列没有显示在 XY 图表上的问题。我没有看到我在哪里出错了。我已经确认所有系列数据都在那里。第一个系列显示数周内的数据。第二个系列应该是特定周的垂直线。这是代码：

```
 XYSeries seriesStat = new XYSeries("Standards");
    XYSeries seriesSelect = new XYSeries("Specific");
    for (dbBirdData bird : data)
    {
        seriesStat.add(bird.getage(), bird.getvalue());
        seriesSelect.add(age, bird.getvalue());
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();    
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    XYSeriesRenderer renderer2 = new XYSeriesRenderer();

    dataset.addSeries(seriesStat);                  
    renderer.setColor(Color.YELLOW);
    mRenderer.addSeriesRenderer(renderer);

    dataset.addSeries(seriesSelect);        
    renderer2.setColor(Color.RED);      
    mRenderer.addSeriesRenderer(renderer2);

    mRenderer.setBackgroundColor(Color.BLACK);
    mRenderer.setChartTitle(title);
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setYLabelsAlign(Align.LEFT);      
    mRenderer.setXTitle("Week");
    mRenderer.setYTitle("Standard Value");
    mRenderer.setShowLegend(false);
    mRenderer.setXAxisMin(17);
    mRenderer.setXAxisMax(90.0);    

    return ChartFactory.getLineChartView(context, dataset, mRenderer); 
```

任何帮助都会很棒，并在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:00:23.730

你的代码不完整，但我想我知道垂直线系列有什么问题。您可能正在添加具有相同 X 值的多个点。这在 AChartEngine 中不受支持。当您需要这样做时，只需在`X`轴上添加非常接近的数字，但不完全相同。例：`10, 10.000000001`等等。

# asp.net-mvc - 使用 Application_Start 到 CurrentUiCulture 的 ASP.NET MVC 本地化似乎不起作用？

> ID：13034476
> 
> 赞同：1
> 
> 时间：2012-10-23T15:53:34.653
> 
> 标签：asp.net-mvc

我写了一个小的 asp.net mvc 3 应用程序，我的 UI 似乎没有改变，我在 Application_Start 中设置了这个，但它从来没有用过。

```
 const string culture = "en-US";
        CultureInfo ci = CultureInfo.GetCultureInfo(culture);

        Thread.CurrentThread.CurrentCulture = ci;
        Thread.CurrentThread.CurrentUICulture = ci; 
```

但是，如果我在控制器的 Initialize 方法中设置相同，那么它就可以工作。

但我不想覆盖所有控制器。

它不适用于 Applicaiton_Start 吗？

我已经设置了一个断点，我可以看到它通过它。

但在我看来，我愿意

```
 @Index.Test 
```

如果通过 Application_Start 设置，那么我总是得到一个非英文版本（在我的情况下是默认的）

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:05:22.960

`Application_Start`只会被调用一次。你必须在`Application_BeginRequest`事件中设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T09:50:29.927

请在下面的配置文件中使用以下设置

全球化文化="auto:DefaultCulture" uiculture="auto:DefaultCulture"

# c# - 使用 prism 委托命令从密码框进行多重绑定

> ID：13034478
> 
> 赞同：0
> 
> 时间：2012-10-23T15:53:38.043
> 
> 标签：c#, .net, mvvm, prism

使用密码框或任何形式的常规文本控件时，我似乎无法访问这些属性。我已经设置了一个值转换器，它会在更新时正确返回值，但是一旦为我的按钮触发命令，参数似乎被重置为 null。

**XAML**

```
<Button x:Name="RegisterButton" Content="register" Height="28" Margin="0,0,8,8" VerticalAlignment="Bottom" Background="#FF005D99" BorderBrush="White" Foreground="White" FontSize="13.333" TextOptions.TextFormattingMode="Display" FontFamily="/Agile Project Management Tool 2012;component/Fonts/#Segoe UI" Padding="1,0,1,1" HorizontalAlignment="Right" Width="90" Command="{Binding RegisterCommand}">
        <Button.CommandParameter>
            <MultiBinding Converter="{StaticResource ParamConverter}">
                <Binding ElementName="EmailTextInput" Path="Text"/>
                <Binding ElementName="PhoneTextInput" Path="Text"/>
            </MultiBinding>
        </Button.CommandParameter>
    </Button> 
```

**值转换器**

```
 class TwoParamConverter : IMultiValueConverter
  {
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return values;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
  } 
```

**查看模型**

```
 public ResigtrationViewModel()
    {
        _browsePicturesCommand = new DelegateCommand(OnBrowsePicturesCommand);
        _registerCommand = new DelegateCommand<object>(OnRegisterCommand);
    }

    private void OnRegisterCommand(object paramaters)
    {
        var values = (object[])paramaters;
        var a = (string)values[0];
        var b = (string)values[1];

        MessageBox.Show(a);
        MessageBox.Show(b);
    } 
```

但是，当我在 OnRegisterCommand 调用中检查参数时，它们似乎为空。

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:58:09.373

尝试这个

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    //any checks and such things you can add yourself :)
    return new Tuple<string,string>((string)values[0],(string)values[1]);

    //or 
    //return values.ToArray()
} 
```

# sql - 使用变量附加字段参数

> ID：13034479
> 
> 赞同：5
> 
> 时间：2012-10-23T15:53:40.727
> 
> 标签：sql, parameters, append, ado

交叉张贴在这里：

[http://www.vbforums.com/showthread.php?696163-Use-variable-to-append-field-parameter&p=4264077#post4264077](http://www.vbforums.com/showthread.php?696163-Use-variable-to-append-field-parameter&p=4264077#post4264077)

我正在使用 ADO 将 MS Access 中的数据检索到 Excel 中，并且我想将 Iif 语句附加到查询的 SELECT 部分。我的 SQL 字符串存储在一个文本文件中，所有参数都通过 ADO 附加。

我知道如何在 WHERE 子句中附加参数，甚至可以在 SELECT 语句中附加参数，如下所示：

```
SELECT BA, Iif(QA=[@somestring],[@somestring2], [@somestring3])
FROM myData
WHERE BA = 'some person' 
```

但我想要完成的是将占位符 [@somestring] 转换为可变长度的 Iif 语句，例如：

```
SELECT BA, [@somestring] 
```

占位符转换为我使用函数构建的字符串：

```
Iif(QA='Jon Doe', 'Jon', Iif(QA='Jane Doe', 'Jane', 'Nobody')). 
```

现在，我得到的结果是我传递给填充整个字段的参数的文字字符串。所以 Iif 语句是为每条记录写出的，而不是由 SQL 评估的。

我正在尝试做的事情是否可能，或者 SQL 是否需要在初始命令中预定义的 Iif 语句的字段？

即，Iif(QA=[@somestring], [@sometstring2], [@somestring3])

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:32:34.230

这是来自 VBForums 的直接剪切和粘贴。它是一个社区 wiki，只打算从“没有答案”中删除这个问题。可酌情删除或修改。

* * *

来自：[http ://www.vbforums.com/showthread.php?696163-Use-variable-to-append-field-parameter&p=4264077#post4264077](http://www.vbforums.com/showthread.php?696163-Use-variable-to-append-field-parameter&p=4264077#post4264077)

BY: si_the_geek

> 这是不可能的，你只能使用参数来设置值，你不能用它们做其他事情（比如字段/表名、函数等）。
> 
> 如果要更改查询的其他部分，则需要使用其他方法（例如字符串构建）。在帖子末尾的示例中，您应该将其添加到查询字符串中，并通过参数添加值。

# hibernate - javax.faces.FacesException：#{loginBean.authenticate}：java.lang.NullPointerException

> ID：13034480
> 
> 赞同：0
> 
> 时间：2012-10-23T15:53:45.253
> 
> 标签：hibernate, jpa

在我使用 JPA + hibernate 的应用程序中。但是，当我尝试访问数据库时，出现以下错误：

```
 java.lang.NullPointerException: javax.faces.FacesException:
#{loginBean.authenticate}: java.lang.NullPointerException 
```

当我执行该行时发生异常：`EntityManager em = emf.createEntityManager();`

下面你会看到完整的服务器日志。

```
18:21:48,174 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (http--0.0.0.0-8080-1) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory

18:21:48,177 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (http--0.0.0.0-8080-1) HHH000397: Using ASTQueryTranslatorFactory

18:21:48,189 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000228: Running hbm2ddl schema update

18:21:48,191 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000102: Fetching database metadata

18:21:48,193 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000396: Updating schema

18:21:48,195 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000232: Schema update complete

18:22:08,153 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http--0.0.0.0-8080-1) #{loginBean.authenticate}: java.lang.NullPointerException: javax.faces.FacesException: #{loginBean.authenticate}: java.lang.NullPointerException

    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]

    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]

    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]

    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]

    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]

    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]

    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]

    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]

    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]

    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]

    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]

    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]

    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_32]

Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException

    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]

    ... 21 more

Caused by: java.lang.NullPointerException

    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.getStatus(JtaStatusHelper.java:73) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.isActive(JtaStatusHelper.java:115) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.engine.transaction.internal.jta.CMTTransaction.join(CMTTransaction.java:149) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.ejb.AbstractEntityManagerImpl.joinTransaction(AbstractEntityManagerImpl.java:1207) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.ejb.AbstractEntityManagerImpl.postInit(AbstractEntityManagerImpl.java:176) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.ejb.EntityManagerImpl.<init>(EntityManagerImpl.java:89) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:125) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]

    at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:120) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]

    at org.Handlers.UserHandler.getAllUsers(UserHandler.java:32) [classes:]

    at org.tutorial.LoginBean.authenticate(LoginBean.java:50) [classes:]

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_32]

    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_32]

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_32]

    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_32]

    at org.apache.el.parser.AstValue.invoke(AstValue.java:262) [jbossweb-7.0.13.Final.jar:]

    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.13.Final.jar:]

    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]

    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]

    ... 22 more 
```

我的猜测是，出于某种原因，它与实体管理器有关。我对使用 hibernate 和 JPA 真的很陌生。我还附上了一个课程，向您展示我如何访问数据库。有人能弄清楚我做错了什么吗？

```
public class ProjectHandler {

    public void create(Project project) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("ResearchManagement.Data");

        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();
        em.persist(project);
        em.getTransaction().commit();
        em.close();
    }

    public List<Project> getAllProjects() {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("ResearchManagement.Data");

        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();

        Query query = em.createQuery("SELECT p FROM Project p");
        List<Project> projects = query.getResultList();
        em.getTransaction().commit();
        em.close();
        return projects;
    }

    public int deleteByProjectName(String projectName) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("ResearchManagement.Data");

        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();

        Query q = em.createQuery("DELETE FROM Project p WHERE p.projectName = :u");
        q.setParameter("u", projectName );    
        int deleted = q.executeUpdate();
        em.getTransaction().commit();
        em.close();
        return deleted;
    }

} 
```

* * *

谢谢你的回答和关于我的代码的提示。但是，我调试了我的应用程序，发现 emf 不是 null 。我仍然在该行收到错误：EntityManager em = emf.createEntityManager();

所以我的猜测是 emf 返回一个 null entityManager。还是不明白为什么

当我运行应用程序时，我注意到并且看起来很奇怪的服务器日志。它读取 pesistence 单元并连接到读取 corerclty 所有表的数据库：

12:02:06,094 INFO [org.hibernate.validator.util.Version]（MSC 服务线程 1-3）Hibernate Validator 4.2.0.Final

12:02:06,328 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate]（MSC 服务线程 1-3）HHH000228：运行 hbm2ddl 模式更新

12:02:06,328 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate]（MSC 服务线程 1-3）HHH000102：获取数据库元数据

12:02:06,328 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate]（MSC 服务线程 1-3）HHH000396：更新模式

12:02:06,343 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.departments

12:02:06,343 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[电话号码、部门 ID、姓名、城市]

12:02:06,343 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[]

12:02:06,343 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[主要]

12:02:06,359 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.employees

12:02:06,359 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[电话号码、部门 ID、雇员 ID、姓氏、名字]

12:02:06,359 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[fk9d39ef85d77ba982]

12:02:06,359 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[fk9d39ef85d77ba982，主要]

12:02:06,374 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.partners

12:02:06,374 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[partnerid、name、contactmail、city]

12:02:06,374 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[]

12:02:06,374 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[主要]

12:02:06,374 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.projects

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[部门 ID、持续时间、描述、项目名称、项目 ID]

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[fkc479187ad77ba982]

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[primary，fkc479187ad77ba982]

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.projects_has_employees

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[projects_projectid, employees_employeeid]

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[fk294f111bcd3ec025，fk294f111b92772ef4]

12:02:06,390 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[fk294f111bcd3ec025，primary，fk294f111b92772ef4]

12:02:06,406 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.projects_has_partners

12:02:06,406 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[partners_partnerid，projects_projectid]

12:02:06,406 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[fk8d741055cd3ec025，fk8d7410555290eb4]

12:02:06,406 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[fk8d741055cd3ec025，fk8d7410555290eb4，主要]

12:02:06,421 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.users

12:02:06,421 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[用户名、用户 ID、密码]

12:02:06,421 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[]

12:02:06,421 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[主要]

12:02:06,421 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000261：找到的表：researchprojects.hibernate_sequence

12:02:06,437 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000037：列：[next_val]

12:02:06,437 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000108：外键：[]

12:02:06,437 INFO [org.hibernate.tool.hbm2ddl.TableMetadata]（MSC 服务线程 1-3）HHH000126：索引：[]

12:02:06,437 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate]（MSC 服务线程 1-3）HHH000232：架构更新完成

但是，当我尝试读取用户表 (getallUsers() ) 时，它会创建 emf 并在日志中看到：

12:03:53,346 信息 [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] ​​(http--0.0.0.0-8080-1) HHH000397：使用 ASTQueryTranslatorFactory

12:03:53,347 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000228：运行 hbm2ddl 架构更新

12:03:53,347 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000102：获取数据库元数据

12:03:53,347 信息 [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000396：更新架构

12:03:53,347 INFO [org.hibernate.tool.hbm2ddl.SchemaUpdate] (http--0.0.0.0-8080-1) HHH000232：架构更新完成

这意味着它不能再读取表格了。这对你来说意味着什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:33:39.000

该错误是由 Hibernate 内部结构引起的，位于 org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.getStatus(JtaStatusHelper.java:73) 这可能意味着您的 JTA 配置或类有问题。由于您稍后尝试启动用户事务，因此您可能错误地将其标记为 JTA 而不是 resource_local。

这不是一个完整的答案，因为我不熟悉代码，但希望它有助于指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:45:44.460

根据`NullPointerException`你所说的和线，它被抛出：

```
EntityManager em = emf.createEntityManager(); 
```

我还假设它位于：

```
org.tutorial.LoginBean.authenticate(LoginBean.java:50). 
```

你`emf`的很可能是空的。根据您提供的代码，您每次需要 EntityManager 时都会创建 EntityManagerFactory。你不应该那样做。本质上这是一项昂贵的操作，您需要在应用程序启动期间执行一次，然后在整个应用程序中重复使用它。您可以查看[获取 EntityManagerFactory 的最佳实践以](https://stackoverflow.com/questions/7862700/best-practice-to-get-entitymanagerfactory)了解如何解决该问题。

* * *

虽然我有你在这里，但我想就你提供的代码给你一些建议。它并没有真正做它应该做的一切。您至少应该有一个 try-finally 块来处理事务并在必要时回滚。以您的 create 方法为例：

```
public void create(Project project) {
        EntityManagerFactory emf =Persistence.createEntityManagerFactory("ResearchManagement.Data");

        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = em.getTransaction();
        try {
            //start the transaction
            tx.begin();
            em.persist(project);
            //commit it the transaction
            tx.commit();
        } finally {
            //if the transaction is still active then
            //than something bad happened, so we need to
            //roll it back
            if (tx.isActive()) {
               tx.rollback();
            }
            //close out the entity manager instance, we are
            //done with it here
            em.close();
        }
    } 
```

最后一件事没有那么大，它更多的是关于格式化，老实说，它可能只是你复制粘贴到你的问题中的方式导致了它。但是，如果你的代码中确实有这么多的白人节奏，那会让事情变得更难掌握。使用空白从本质上使事情更容易阅读。太多了，滚动起来很痛苦，太少了，一切都被挤在一起，更难处理。

* * *

**编辑：**您评论说：

> 谢谢你的回答和关于我的代码的提示。但是，我调试了我的应用程序，发现 emf 不是 null 。我仍然在该行收到错误：EntityManager em = emf.createEntityManager();
> 
> 所以我的猜测是 emf 返回一个 null entityManager。还是不明白为什么

如果`emf.createEntityManager()`只返回一个 null `EntityManager`，那么您将不会有指向该特定行的堆栈跟踪，而是指向在实例`em`本身上调用方法的行（例如 may `em.getTransaction()`）。所以要么`emf`是空的，要么不应该为空的东西`emf.createEntityManager()`是空的。只有两个选择。

# ember.js - 为什么我们的嵌套操作在 Ember 中不能正常工作？

> ID：13034484
> 
> 赞同：1
> 
> 时间：2012-10-23T15:53:48.650
> 
> 标签：ember.js

我们正在构建一个 Ember 应用程序并使用大量嵌套视图，到目前为止，除了一个问题外，一切都在解决。当我们尝试在其中一个嵌套视图中执行操作时，事情就会出错。

有问题的观点是：

```
App.TodoView = Ember.View.extend({
  templateName: 'app/templates/todo' 
});

App.Todo_entriesView = Ember.View.extend({
  templateName: 'app/templates/todo_entries'
});

App.Todo_entryView = Ember.View.extend({
  templateName: 'app/templates/todo_entry',
}); 
```

模板是：

```
/templates/todo.hbs

<article>
  <h1>{{title}}</h1>  
  {{outlet}}
</article>

/templates/todo_entries.hbs

{{#if isLoading}}
  <p>Loading...</p>
{{else}}
  <ul class="list">
    {{collection contentBinding="content" itemViewClass="App.Todo_entryView"}}
  </ul>
{{/if}}

/templates/todo_entry.hbs

<li>
{{#if isLoading}}
  Loading...
{{else}}
  {{view.content.id}}) {{view.content.title}}
  <a {{action deleteRecord href="true" target="controller"}}>Delete</a>
{{/if}}
</li> 
```

控制器是：

```
App.TodoController = Ember.ObjectController.extend({
  deleteRecord: function() {
    this.get('content').deleteRecord();
    this.transaction.commit();
    App.router.transitionTo('todo');
  }
});

App.Todo_entriesController = Ember.ArrayController.extend();

App.Todo_entryController = Ember.ObjectController.extend({
  deleteRecord: function() {
    this.get('content').deleteRecord();
    this.transaction.commit();
    App.router.transitionTo('todo');
  }
}); 
```

当单击删除按钮时，我们得到一个错误，即 deleteRecord 方法不存在于 Todo_entriesController（即视图的父级）上，而不是我们期望的 Todo_entryController 上。

有谁知道我们如何在 Todo_entry 模板中获取 deleteRecord 操作以正确调用 Todo_entryController deleteRecord 方法？还是有更好的方法来完全做到这一点？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:28:33.683

由于 App.Todo_entryView 是在不使用 connectOutlet 的情况下创建的，因此它不会自动绑定到 App.Todo_entryController，而是使用其 parentView 控制器。

也许解决方法可能是覆盖 App.Todo_entryView 的 init 方法并手动实例化控制器。就像是：

```
App.Todo_entryView = Ember.View.extend({
  templateName: 'app/templates/todo_entry',
  init: function(){
    this._super();
    this.set(
      'controller',
      App.Todo_entryController.create({ content: this.get('content') })
    );
  }
}); 
```

# jquery - jquery问题和更新css背景图像未在chrome中加载

> ID：13034493
> 
> 赞同：0
> 
> 时间：2012-10-23T15:54:16.757
> 
> 标签：jquery, css, dom, web-inspector

我正在尝试用 jquery 替换元素上的背景图像。代码看起来是正确的，如果我停止执行页面并检查元素，它就是正确的元素。但是，将鼠标悬停在元素上时，它不会显示在 chrome 中或元素预览中。

我在这里遇到了似乎完全相同的问题[CSS 背景图像未加载](https://stackoverflow.com/questions/12227716/css-background-images-not-loading)但提供的修复不起作用。

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:59:32.753

当您更改背景图像时，元素的宽度和高度会从 CSS 样式中消失。

尝试添加

```
overflow: hidden;
border: none;
width: 125px;
height: 25px;
margin-top: 4px; 
```

回到 CSS 样式`.products-grid li.item .select-pack-container.pleasewait, .catalog-product-view .select-pack-container.pleasewait`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:35:32.107

我通过添加第二个 'pleasewait' div 并默认隐藏它来修复它。然后我隐藏/删除 go div 并显示 pleasewait div ... 工作正常。仍然不确定 chrome 中的背景图像替换发生了什么。对我来说似乎是一个错误。所有其他浏览器都运行良好。

# python - 在文件之间使用全局变量？

> ID：13034496
> 
> 赞同：289
> 
> 时间：2012-10-23T15:54:30.880
> 
> 标签：python, share, globals

我对全局变量的工作方式有点困惑。我有一个大项目，大约有 50 个文件，我需要为所有这些文件定义全局变量。

我所做的是在我的项目`main.py`文件中定义它们，如下所示：

```
# ../myproject/main.py

# Define global myList
global myList
myList = []

# Imports
import subfile

# Do something
subfile.stuff()
print(myList[0]) 
```

我正在尝试使用`myList`in `subfile.py`，如下所示

```
# ../myproject/subfile.py

# Save "hey" into myList
def stuff():
    globals()["myList"].append("hey") 
```

**我尝试了另一种方法，但也没有用**

```
# ../myproject/main.py

# Import globfile    
import globfile

# Save myList into globfile
globfile.myList = []

# Import subfile
import subfile

# Do something
subfile.stuff()
print(globfile.myList[0]) 
```

在里面`subfile.py`我有这个：

```
# ../myproject/subfile.py

# Import globfile
import globfile

# Save "hey" into myList
def stuff():
    globfile.myList.append("hey") 
```

但同样，它没有用。我应该如何实现这个？我知道它不能那样工作，当这两个文件并不真正了解对方（以及子文件不知道主文件），但我想不出如何做到这一点，而不使用 io 写入或泡菜，哪个我不想做。

* * *

## 回答 #1

> 赞同：420
> 
> 时间：2012-10-23T16:16:48.337

问题是您从 定义`myList`的`main.py`，但`subfile.py`需要使用它。这是解决此问题的一种简洁方法：将所有全局变量移动到一个文件中，我称之为这个文件`settings.py`。该文件负责定义全局变量并初始化它们：

```
# settings.py

def init():
    global myList
    myList = [] 
```

接下来，您`subfile`可以导入全局变量：

```
# subfile.py

import settings

def stuff():
    settings.myList.append('hey') 
```

请注意，`subfile`不调用`init()`- 该任务属于`main.py`：

```
# main.py

import settings
import subfile

settings.init()          # Call only once
subfile.stuff()         # Do stuff with global var
print settings.myList[0] # Check the result 
```

这样，您就可以实现目标，同时避免多次初始化全局变量。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2017-08-12T04:24:47.673

请参阅 Python 的关于[跨模块共享全局变量](https://docs.python.org/3/faq/programming.html#how-do-i-share-global-variables-across-modules)的文档：

> 在单个程序中跨模块共享信息的规范方法是创建一个特殊模块（通常称为 config 或 cfg）。
> 
> 配置文件：
> 
> ```
> x = 0   # Default value of the 'x' configuration setting 
> ```
> 
> 在应用程序的所有模块中导入配置模块；然后该模块可作为全局名称使用。
> 
> 主要.py：
> 
> ```
> import config
> print (config.x) 
> ```

* * *

> 一般来说，**不要使用**from *modulename import **。这样做会使导入器的命名空间变得混乱，并使 linter 更难检测未定义的名称。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-23T16:04:31.520

您可以将 Python 全局变量视为“模块”变量——因此它们比 C 中的传统“全局变量”有用得多。

全局变量实际上是在模块中定义的`__dict__`，并且可以作为模块属性从该模块外部访问。

因此，在您的示例中：

```
# ../myproject/main.py

# Define global myList
# global myList  - there is no "global" declaration at module level. Just inside
# function and methods
myList = []

# Imports
import subfile

# Do something
subfile.stuff()
print(myList[0]) 
```

和：

```
# ../myproject/subfile.py

# Save "hey" into myList
def stuff():
     # You have to make the module main available for the 
     # code here.
     # Placing the import inside the function body will
     # usually avoid import cycles - 
     # unless you happen to call this function from 
     # either main or subfile's body (i.e. not from inside a function or method)
     import main
     main.mylist.append("hey") 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-23T15:59:49.400

使用`from your_file import *`应该可以解决您的问题。它定义了所有内容，以便全局可用（当然，导入中的局部变量除外）。

例如：

```
##test.py:

from pytest import *

print hello_world 
```

和：

```
##pytest.py

hello_world="hello world!" 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-12-23T09:23:58.137

Hai Vu 的回答效果很好，只有一条评论：

如果您在其他模块中使用了全局并且您想动态设置全局，请注意在设置全局变量后导入其他模块，例如：

```
# settings.py
def init(arg):
    global myList
    myList = []
    mylist.append(arg)

# subfile.py
import settings

def print():
    settings.myList[0]

# main.py
import settings
settings.init("1st")     # global init before used in other imported modules
                         # Or else they will be undefined

import subfile    
subfile.print()          # global usage 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-23T16:08:42.443

您的第二次尝试将完美运行，并且实际上是处理您希望全局可用的变量名称的一种非常好的方法。但是你在最后一行有一个名称错误。应该是这样的：

```
# ../myproject/main.py

# Import globfile    
import globfile

# Save myList into globfile
globfile.myList = []

# Import subfile
import subfile

# Do something
subfile.stuff()
print(globfile.myList[0]) 
```

看到最后一行了吗？myList 是 globfile 的属性，而不是子文件。这将按您的意愿工作。

麦克风

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-07T00:05:03.087

基于上面的答案和链接，我创建了一个名为的新模块`global_variables.py`：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

# ==============================================================================
#
#       global_variables.py - Global variables shared by all modules.
#
# ==============================================================================

USER = None                 # User ID, Name, GUID varies by platform

def init():
    """ This should only be called once by the main module
        Child modules will inherit values. For example if they contain

            import global_variables as g

        Later on they can reference 'g.USER' to get the user ID.
    """
    global USER

    import getpass
    USER = getpass.getuser()

# End of global_variables.py 
```

然后在我的主模块中我使用这个：

```
import global_variables as g
g.init() 
```

在另一个子导入模块中，我可以使用：

```
import global_variables as g
# hundreds of lines later....
print(g.USER) 
```

我只花了几分钟在两个不同的 python 多模块程序中进行了测试，但到目前为止它运行良好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-28T18:04:31.500

刚看到这个帖子，想发一下我的解决方案，以防万一有人和我有同样的情况，开发的程序中有很多文件，你没有时间考虑整个模块的导入顺序（如果您从一开始就没有正确地考虑到这一点，例如我所做的）。

在这种情况下，在您启动全局的脚本中，只需编写一个如下所示的类：

```
class My_Globals:
  def __init__(self):
    self.global1 = "initial_value_1"
    self.global2 = "initial_value_2"
    ... 
```

然后使用，而不是脚本中您启动全局变量的行，而不是

```
global1 = "initial_value_1" 
```

采用

```
globals = My_Globals() 
```

然后我能够通过以下方式检索/更改任何这些全局变量的值

```
globals.desired_global 
```

在任何脚本中，这些更改也会自动应用于使用它们的所有其他脚本。由于本文/讨论here中提到的问题，所有现在都可以使用以前失败的完全相同的导入语句。与简单的全局变量导入相比，我只是认为全局对象的属性动态变化而无需考虑/更改任何导入逻辑，这绝对是解决此类问题的最快和最简单（供以后访问）的方法为了我。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-12T20:38:37.553

当你这样做时，命名空间噩梦就会出现`from config import mySharedThing`。怎么强调都不过分。

用`from`在其他地方没问题。

您甚至可以拥有一个完全为空的配置模块。

```
# my_config.py
pass 
```

```
# my_other_module.py
import my_config

def doSomething():
    print(my_config.mySharedThing.message) 
```

```
# main.py
from dataclasses import dataclass
from my_other_module import doSomething
import my_config

@dataclass
class Thing:
    message: str

my_config.mySharedThing = Thing('Hey everybody!')
doSomething() 
```

结果：

```
$ python3 main.py
Hey everybody! 
```

但是使用你拉进来的物体会让`from`你感到沮丧。

```
# my_other_module.py
from my_config import mySharedThing

def doSomething():
    print(mySharedThing.message) 
```

结果：

```
$ python3 main.py
ImportError: cannot import name 'mySharedThing' from 'my_config' (my_config.py) 
```

也许你会尝试像这样修复它：

```
# my_config.py
mySharedThing = None 
```

结果：

```
$ python3 main.py
AttributeError: 'NoneType' object has no attribute 'message' 
```

然后也许你会找到这个页面并尝试通过添加一个 init() 方法来解决它。

但整个问题是`from`.

# sharepoint - 从另一个列表中查找 SharePoint 人员

> ID：13034504
> 
> 赞同：1
> 
> 时间：2012-10-23T15:54:43.893
> 
> 标签：sharepoint, lookup

我在 SharePoint Online 上托管了一个网站集。在网站集的根目录中，我有一个名为“员工列表”的列表。每个员工都有一个包含一些附加列的联系人记录，本次讨论的两个重要列是“员工姓名”和“报告给”。并非所有员工都是 SharePoint 上的用户，因此没有登录名。管理全部在 SharePoint 上，因此“报告对象”列是“个人”或“组”类型。我创建了一个站点列，它是对名为“Employee Lookup”的“Employee Name”列的查找。我在其他列表中使用此网站栏将项目附加到员工。

我遇到的问题是子网站上财务报告列表的工作流程（从根向下两级）。当员工上交 Excel 电子表格时，秘书会将其放入 MFR（财务报告）列表中。此列表使用其中包含“员工查找”网站栏的内容类型。我想要做的是有一个工作流在添加文档时自动启动，该文档看起来是员工列表中已连接员工上的“报告给”字段，并以“报告给”作为要批准的人启动审批流程它。

当我尝试创建工作流时，员工列表不是可用源，因为它不是同一子网站上的列表，它位于网站集的根目录上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:13:14.650

开箱即用您无法从其他网站（根网站、父网站或子网站）访问列表数据。您将需要编写一个自定义活动或构建一个 Web 服务，为您提供“报告至”值。

# c - 如何编写测试应用程序以完全加载 CPU？

> ID：13034505
> 
> 赞同：3
> 
> 时间：2012-10-23T15:54:50.647
> 
> 标签：c, linux, benchmarking, cpu-usage

CPU被设计为在可以节省电力和保持凉爽的情况下进入低功耗模式，我想制作一个程序来防止这种情况发生。

我正在开发几个不同的嵌入式平台（飞思卡尔 Coldfire 8052、TI Sitara AM3359，可能还有其他一些正在开发中的平台），所以我想制作一个应用程序，让 CPU 保持满载以进行基准测试。我想自己写，因为交叉编译会更容易，然后为每个目标寻找解决方案。

我最初的想法是：

```
while(1); 
```

**问题 1：**
但我是否过度简化了这个？top 显示该程序占用了大约 99.4% 的 CPU 使用率，所以我猜它正在工作，但它似乎不应该那么简单。:) 任何人都知道是否应该有更多的东西？

**问题 2：**
如果我想扩展它以执行不同的负载（例如，50%、75% 或其他），我该怎么做？我设法通过以下方式获得 18~20% 的 CPU 使用率：

```
while(1){usleep(1);} 
```

有没有比仅仅猜测和检查睡眠值更科学的方法？无论如何，我认为每个目标都会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:00:14.967

`while(1);`会耗尽你所有的 CPU 周期，但不会锻炼你的大部分 CPU（更不用说 GPU）了。大多数现代 CPU 能够在不使用时选择性地关闭单个执行单元：防止它的唯一方法是：

1.  告诉 CPU/SoC 驱动程序禁用省电
2.  锻炼你的 CPU/GPU/芯片组的所有单元和诸如此类的东西（这将是一项艰巨的任务，所以你可能最好使用 (1)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:03:50.383

因此，我将尝试将其发布为答案。如果您查看[usleep](http://pubs.opengroup.org/onlinepubs/7908799/xsh/usleep.html)的规格，您会注意到以下行：

> usleep() 函数将导致调用线程暂停执行...

这意味着 18~20% 的 CPU 使用实际上是在上下文切换期间花费的时间。您的代码中的 while(1) 将使用 CPU 周期，因为它已被调度，但不会充分利用 CPU。C 程序有很多选项会尝试使用 100% CPU。他们中的大多数使用与基于数学的应用程序混合的多个线程。

有关许多示例，请参见此[线程](https://stackoverflow.com/questions/9244481/how-to-get-100-cpu-usage-from-a-c-program)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:03:55.093

一会儿（1）；循环很可能在操作系统不做其他事情（如处理中断或运行守护程序）时一直在运行。您遇到的问题是 top 实际上并没有显示您的程序实际运行了多少时间，而是用于内部调度计算的相当粗略的估计。在某些系统上，您可能会因为数学有点偏离而最终获得超过 100% 的 cpu 使用率。

当涉及到正确加载你的 CPU 时，这取决于你想要做什么。触摸cpu的每个部分？最大用电量？这不是一个简单的问题，尤其是当您可能不知道问题实际上是什么时。

# sql - 从选择查询的列数据中删除特定字符

> ID：13034510
> 
> 赞同：4
> 
> 时间：2012-10-23T15:54:53.570
> 
> 标签：sql, sql-server-2005, join, trim

我已经搜索并搜索了我的问题的解决方案，即使我找到了一些可能有帮助的方法，但我不确定这是否是满足我需要的正确方法。请记住，我正在学习并且对 SQL 相当陌生。但是我有两个要使用内部联接查询的表。

两个表中都有一个列`CAVITY`，但它们以不同的格式保存值。一个表将值保存为 H02，而另一个表将值保存为 2。

我想使用 H02 格式在此列上进行内部连接，但不想更新将值保存为单个数字的表（用于数据输入目的）。因此，例如，如果一个表列有 H02 而另一个有 2，我希望它被加入。如果一个表有 H13 和另一个 13，我希望它也是一个连接。所以基本上，我想删除 H 和 0（但前提是有一个 0 直接跟在 H 之后）。除非有办法做相反的事情并从另一个表的结果中添加 H / H0。

```
example data
table1.cavity   table2.cavity
     H01      =    1
     H02      =    2
     H10      =    10
     H12      =    12 
```

我的查询结果是不是H0版本对我来说并不重要；我只需要加入工作；我最终可以适应任何一个结果。

我正在使用 SQL Server 2005

我有其余的查询，它工作正常；我只需要添加这个额外的连接。请帮忙！任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:58:26.823

`REPLACE(REPLACE(cavity,'H0',''),'H','')`

第一个删除 H0：

`REPLACE(cavity,'H0','')`

然后第二个替换任何剩余的 H：

`REPLACE(output_of_previous,'H','')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:01:32.473

您可以这样做的一种方法如下：

```
 from table1 join
      table2
      on cast(substring(table1.cavity, 2, 100) as int) = table2.cavity 
```

（这是假设`2`table2.cavity 存储为整数的意思。

不过，这是一个很大的警告。您需要注意查询计划。在编写这样的查询时，很容易得到一个使用嵌套循环连接的计划。如果你的桌子很小，这没什么大不了的。然而，即使是中等大小的表也可能产生非常低效的查询计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T22:17:36.897

```
CREATE FUNCTION [dbo].[RemoveAlphaCharacters](@Temp VarChar( 1000))
RETURNS int
AS
BEGIN
  WHILE PatIndex ('%[^0-9]%', @Temp) > 0
  SET @Temp = Stuff(@Temp, PatIndex('%[^0-9]%', @Temp), 1, '')
  RETURN @Temp
END 
```

可以在这样的连接子句中使用

```
SELECT a.col1 a, b.col1 b
FROM tablea a JOIN tableb b ON dbo.RemoveAlphaCharacters(a.col1) = b.col1 
```

# java - 如何在applicationContext中从Spring中排除一个类？

> ID：13034515
> 
> 赞同：7
> 
> 时间：2012-10-23T15:55:10.443
> 
> 标签：java, spring

这里我们只想从某个类路径中排除一个类，比如

`com.abc.projectA.service.orderService.sectionA.orderService.class`

但是，还有另一个具有相同名称但在不同类路径中的类

`com.abc.projectA.service.orderService.sectionB.orderService.class`

这样只有按类名的文件管理器不起作用。

但我尝试了以下方法：

```
<context:component-scan base-package="com.abc">
    <!--other filters-->
    <!--.......-->
    <context:exclude-filter expression="projectA\.service\.orderService\.sectionA\.orderService" type="regex" />
</context:component-scan> 
```

它不起作用。所以我打赌`<context:exclude-filter>`唯一有效的包级别但不适用于特定类？如果是这样，如何从 bean 注入中排除一个类，以便我们可以选择类以使用相同的类名连接？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T16:03:27.563

不，排除应该可以工作，您遇到的问题可能是您假设正则表达式中的路径将预先添加不正确的基本包..所以只需指定完整包

```
<context:component-scan base-package="com.abc">
    <!--other filters-->
    <!--.......-->
    <context:exclude-filter expression="com\.abc\.projectA\.service\.orderService\.sectionA\.orderService" type="regex" />
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T15:58:29.150

当您设置 bean 时，您应该包括类的完整包位置，这样具有重复名称的类就不会成为问题。例如：

```
<bean id="orderServiceA" class="com.foo.bar.a.OrderService">

<bean id="orderServiceB" class="com.foo.barr.b.OrderService"> 
```

现在你可以两者兼得，不会遇到任何问题。也许我遗漏了一些东西，但我不明白为什么你需要消除一个类，因为它与不同包中的另一个类具有相同的名称。我的意思是 Java SDK 有多个名为 List 的类，它永远不会引起问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:03:02.800

在我看来，您试图打破[Java Spec: section 7.7](http://docs.oracle.com/javase/specs/jls/se5.0/html/packages.html#7.7)中描述的唯一包名称约定。

或者您是否尝试加载相同类的不同版本？您的类加载器可能无法消除歧义。

# javascript - Backbone：构造函数在文件中的位置

> ID：13034517
> 
> 赞同：0
> 
> 时间：2012-10-23T15:55:14.437
> 
> 标签：javascript, backbone.js

我有一个非常基本的 Backbone 应用程序，它使用路由器来实例化视图和集合。在玩这个应用程序时，我注意到如果我把这行代码实例化路由器

```
 router = new DocsRouter(); 
```

在 application.js 文件的顶部，然后该应用程序无法运行；它必须在文件的底部。然而，这对我来说没有意义。为什么这行代码的位置很重要，因为启动应用程序的所有重要事情都发生在路由器内部？我不应该能够从任何地方触发路由器吗？

```
 window.DocsRouter = Backbone.Router.extend({

        initialize : function() {

            this.docs = new Docs();

            this.docs.fetch();

            this.docFormView = new DocFormView({ collection : this.docs });
            this.docsView = new DocsCollectionViewTempo({ collection : this.docs });
            this.docsView.render();

            this.route("doc/:id", "doc", function(id){
                console.log(id, this.docs.get(id).toJSON());
            });
        },

        routes : {
            "" : "root",
            "about" : "about",
            "doc/:id" : "doc"
        },

        root : function() { console.log('Vous êtes à la racine');},
        about : function() { console.log('A propos : ceci est un tutorial BackBone');},
        doc : function(id) { console.log(id, this.docs.get(id).toJSON()); }
    });

 router = new DocsRouter();
 Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:45:52.477

不可以。在声明 DocRouter 之前，您不能创建 DocRouter 的实例。

```
window.DocsRouter = Backbone.Router.extend({..});
router = new DocsRouter(); 
```

这两行的顺序必须是这样。在第一行之前 DocRouter 不存在，因此您无法实例化它。

# ruby - 将字符串转换为现有的类实例

> ID：13034520
> 
> 赞同：3
> 
> 时间：2012-10-23T15:55:18.833
> 
> 标签：ruby

给定一个类实例和一个字符串，如何将字符串转换为引用该实例？

```
class Room
  def enter
    puts "Welcome!"
  end
end

# Rooms are predefined
lounge = Room.new
kitchen = Room.new
study = Room.new

puts "Which room would you like to go to?"
print "> "
room = gets.strip

# User types "lounge"

room.enter # => undefined method `enter' for "lounge":String (NoMethodError) 
```

我理解为什么我会收到 NoMethodError，但我无法弄清楚如何将`room`字符串转换为引用 Room 的现有实例 named `lounge`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:55:28.510

```
class Room
  attr_reader :name

  def initialize(name)
    @name = name
  end

  def enter
    puts "Welcome to #{@name}!"
  end
end

# Rooms are predefined
rooms = ["lounge", "kitchen", "study"].map(&Room.method(:new))

puts "Which room would you like to go to?"
print "> "
name = gets.strip

# Just an example (not using find to avoid nil.enter)
p rooms.select{ |room| room.name == name }.map(&:enter) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:04:59.977

```
room_name = gets.strip.capitalize
room = Kernel.const_get(room_name)
room.enter 
```

如果您`require "active_support/all"`（Rails 的一部分）可以这样做：

```
room = gets.strip.camelize.constantize
room.new.enter 
```

**编辑：**

正如铁皮人指出的那样，`require "active_support/core_ext/string/inflections"`效率会更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:01:18.807

也许试图映射房间并通过密钥获取它们？

```
class Room

  def enter
    puts "Welcome!"
  end
end

# Rooms are predefined
rooms = %w[lounge kitchen study].inject({}) { |f,c| f.update c => Room.new }

puts "Which room would you like to go to?"
print "> "
if room = rooms[gets.strip]
  room.enter
end 
```

或者更简单：

```
class Room

  def initialize room_type
    @room_type = room_type
  end

  def enter
    return puts 'Unsupported room type' unless %w[
      lounge kitchen study
    ].include?(@room_type)
    puts "Welcome to #{@room_type}!"
  end

end

puts "Which room would you like to go to?"
print "> "
room = Room.new(gets.strip)
room.enter 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:01:30.260

您可以使用`eval`方法来动态执行一段 ruby​​ 脚本。在这种情况下`eval(room)`会给你房间实例。

然而，这是一种非常危险的方法，因为它允许最终用户执行代码。为了防止代码执行，您最好验证它是定义的房间变量之一：

```
eval(room).enter if local_variables.include?(room.to_sym) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T06:47:08.640

我最终在初始化时将每个 Room 对象作为类变量存储在哈希中。这使您可以通过哈希引用每个实例：

```
class Room
  @@rooms = {}

  def initialize(name)
    @@rooms.store name, self
  end

  def rooms
    @@rooms
  end

  def enter
    puts "Welcome!"
  end
end

# Rooms are predefined
lounge = Room.new('lounge')
kitchen = Room.new('kitchen')
study = Room.new('study')

puts "Which room would you like to go to?"
print "> "
new_room = gets.strip

lounge.rooms[new_room].enter if lounge.rooms.has_key? new_room 
```

# jquery - JQuery设置z-index不起作用

> ID：13034523
> 
> 赞同：0
> 
> 时间：2012-10-23T15:55:22.033
> 
> 标签：jquery, css

我遇到了 JQuery 拒绝设置元素的 z-index 的问题。不仅仅是一定数量，而是任何数量！我在通过 JQuery 构建元素时设置它（但这只是在附加代码中），然后尝试在交换图像的函数中再次设置它。但是当它进行第 9 次迭代时，它应该将 z-index 设置为 0，而不会，并且会忽略它。我已经坐下来尝试了各种不同的事情，但都无济于事，如果有人可以提供帮助，那就太好了。

所有这些的代码都在这个页面上：http: [//www.prideoftameside.co.uk/default-redesign.htm](http://www.prideoftameside.co.uk/default-redesign.htm)。

您需要查看的具体部分是：

```
function loadImage(number) {
 if (number) {
    imagecount = number;
}

if (imagecount == 1) {
    $('#introimages > img:nth-child(1)').css({'z-index' : 9 });
}

$('#introimages > img:nth-child(' + imagecount + ')').animate({'opacity' : 0 }, 2000)

$('#introimages > img:nth-child(' + (imagecount + 1) + ')').css({'opacity' : 1 });

if (imagecount == 9) {
    $('#introimages > img:nth-child(1)').css({'opacity' : 1, 'z-index' : 0 });
    imagecount = 0;
}

imagecount += 1;
} 
```

通过第 246 行的 SetInterval 调用。

提前致谢。

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:19:19.463

看了一眼你的脚本文件...

您的 z-index 设置逻辑工作正常（在 Chrome Dev 中单独测试），看起来更像是逻辑所在的函数永远不会被调用（周围的断点从未被触发。）

我建议使用 Chrome 的内置调试工具仔细查看您的脚本。 [https://developer.chrome.com/extensions/tut_debugging.html#debug](https://developer.chrome.com/extensions/tut_debugging.html#debug)

[如果有帮助，请标记。:)]

# xaml - 在 Contextmenu 上找不到 RelativeSource 属性

> ID：13034529
> 
> 赞同：0
> 
> 时间：2012-10-23T15:55:48.557
> 
> 标签：xaml, contextmenu, relativesource

我的 xaml 中有以下 ContextMenu：

```
<ContextMenu ItemsSource="{Binding RSPContextMenuCommands}">
                        <ContextMenu.ItemContainerStyle>
                            <Style TargetType="{x:Type MenuItem}">
                                <Setter Property="CommandParameter" Value="{Binding}" />
                                <Setter Property="Command" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.ShowASPCommand}" />
                                <Style.Triggers>                          
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding SpName}" Value="ASP">
                                        <Setter Property="Header" Value="Show Additional Service Providers" />
                                        <Setter Property="Command" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.TransferCommand}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContextMenu.ItemContainerStyle>
                        <ContextMenu.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Margin="5,0,0,0" Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=PhoneNumber, PresentationTraceSources.TraceLevel=High}" />
                                </StackPanel>
                            </DataTemplate>
                        </ContextMenu.ItemTemplate>
                    </ContextMenu> 
```

其中，**RSPContextMenuCommands**是 Schedule(class) 类型的集合。Schedule 中有**PhoneNumber**属性。**TransferCommand**与声明 RSPContextMenuCommands 的级别相同。我得到 ShowASPCommand 和 TransferCommand 但不是**PhoneNumber**。我尝试了各种 RelativeSource 组合，但没有奏效。什么应该是它的正确RelativeSource。也试过`RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}, Path=PhoneNumber`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:02:45.603

解决方法。我将**ItemTemplate移到****ItemContainerStyle**上方。

```
<ContextMenu ItemsSource="{Binding RSPContextMenuCommands}">
                        <ContextMenu.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding PhoneNumber}" />
                                </StackPanel>
                            </DataTemplate>
                        </ContextMenu.ItemTemplate>
                        <ContextMenu.ItemContainerStyle>
                            <Style TargetType="{x:Type MenuItem}">
                                Setter Property="Command" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.ShowASPCommand, PresentationTraceSources.TraceLevel=High}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SpName}" Value="ASP">
                                     <Setter Property="Command" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.TransferCommand}" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </ContextMenu.ItemContainerStyle>
                    </ContextMenu> 
```

但是，如果任何人都可以为我提供有关**RelativeSource**方法的适当文档。我真的很感激。:-)

# iphone - 以编程方式指定 UISegmentedControl 的位置

> ID：13034532
> 
> 赞同：1
> 
> 时间：2012-10-23T15:55:55.943
> 
> 标签：iphone, uikit, uisegmentedcontrol

如何以编程方式指定 a 的位置`UISegmentedControl`？设置框架什么都不做。它似乎`mySegmentedControl.frame`返回按钮的框架而不是“边界矩形”。

我应该注意到我正在使用的分段控件是通过界面生成器添加的。

**编辑-更多信息**：所以我刚刚了解到分段控件通常位于类似`UIToolbar`. 因此，我创建了`IBOutlet`对故事板为我创建的工具栏的引用。当我记录此工具栏的位置时，我可以看到 y 位置偏离了我想要的位置。但是，设置此工具栏的框架似乎并没有移动它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:07:09.420

设置框架是正确的方法。您的项目中还有其他问题。您可以使用带有 UIButton 和 UISegmentedControl 的简单单视图项目对此进行测试：

```
- (IBAction)buttonTapped:(id)sender {
    self.segmentedControl.frame = ((UIButton*)sender).frame;
    ((UIButton*)sender).hidden = YES;
} 
```

这会将分段控件设置为与按钮相同的位置和大小，然后隐藏按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T23:41:26.577

奇怪的是，你不能只改变 x 或 y 值，你必须改变整个帧。

我在应用程序中使用合成声音并且在声音播放之前有延迟。如果在低于 iOS7 上运行，我会隐藏分段控件和标签。但这在屏幕上留下了一个空白，原来是控件所在的位置。此代码将下一个分段控件移动到原始控件所在的位置。

```
if ( SYSTEM_VERSION_LESS_THAN_OR_EQUAL_TO(@"7.0") ) {

            // Hide the delay control
            self.chooseDelaySegmentedControl.hidden = YES;
            self.targetSoundDelayText.text = @"";

            // Move the segmented control up
            CGRect scoringTypeFrame = self.chooseScoringTypeSegmentedControl.frame;
            scoringTypeFrame.origin.y = scoringTypeFrame.origin.y - 70.0f;
            self.chooseScoringTypeSegmentedControl.frame = scoringTypeFrame;

            CGRect scoringTypeTextFrame = self.scoringChoiceText.frame;
            scoringTypeTextFrame.origin.y = scoringTypeTextFrame.origin.y - 70.0f;
            self.scoringChoiceText.frame = scoringTypeTextFrame;

} 
```

# c# - 如何在 C# 中通过带有反射的 ProgID 调用 COM 对象

> ID：13034533
> 
> 赞同：2
> 
> 时间：2012-10-23T15:55:56.610
> 
> 标签：c#, .net-4.0

```
class Device{
    private object device;
    public Device(string ProgID)
    {
        if (ProgID == "") ProgID = "ScopeSim.Telescope";
        device = Activator.CreateInstance(Type.GetTypeFromProgID(ProgID));
        Console.WriteLine("Connected");
    }
    public object Invoke(string Name, object[] args)
    {
        var v1 = device.GetType(); //this is a com object in debug
        var v2 = v1.GetMethod(Name);
        var v3 = v2.Invoke(device,args); //throws exception, v2 is null
        return v3;
    }
}
//somwhere else in another method in another class that has this in a field...
Console.WriteLine(new Device("").Invoke("A Method Name that is a string but is not known and could be anything, for testing, the name is 'Unpark'", object[] args)); 
```

这会抛出一个`NullReferenceException`. Unpark 方法确实存在，但它没有返回类型，但它确实存在。此外，当它停止调试（异常）时，构造函数中的 ProgID 字段为空。我会认为这是正常的，对吧？它应该已经运行了。有谁知道它为什么会抛出它？如果我将设备声明为`dynamic`，则表示它不能在运行时绑定到空对象（基本上是同一件事）。

**对第一个答案的回应：**我认为反射需要将变量作为对象数组。是的，Unpark 是用大写的 U 编写的。ProgID 的事情显然似乎无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:03:39.103

好吧，如果 ProgID 是`null`，则不会设置它，因为您只检查字符串是否为空。我总是使用`string.IsNullOrEmpty(s)`而不是`s == ""`.

检查这个：

*   Unpark Method真的是用大写的U写的吗？
*   它是否需要 object[] 参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:29:11.803

好吧，我想我终于弄明白了，感谢这个答案：[https](https://stackoverflow.com/a/3199919/258482) ://stackoverflow.com/a/3199919/258482 。问题是您必须使用`InvokeMember`对 COM 对象执行任何操作。

# objective-c - 如何在 Objective C 中构建多维对象数组

> ID：13034534
> 
> 赞同：3
> 
> 时间：2012-10-23T15:55:59.713
> 
> 标签：objective-c, multidimensional-array

> **可能重复：**
> [如何创建多维数组？](https://stackoverflow.com/questions/10950044/how-do-i-create-a-multidimensional-array)

我是编程和目标 C 的新手，所以虽然我在这里找到了一些讨论多维数组的问题，但我并没有完全了解我需要做什么才能构建和使用我自己的。

我需要制作一个有 16 行和 3 列的数组。数组需要接受字符串对象。我不知道如何创建、填充或访问其内容。有人愿意为我分解它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T16:02:06.367

我建议您使用 C 数组，因为`NSArray`它不支持多维。您可以像这样声明您描述的数组：

```
NSString *stringArray[16][3]; 
```

设置和访问该数组的任何字符串都非常简单：

```
stringArray[7][1] = @"Stringstringstring";

NSString *string = stringArray[3][0]; 
```

但是，您*可以*使用`NSArray`（或`NSMutableArray`），但这会不太优雅：

```
NSArray *stringArray = [NSArray arrayWithObjects:
                        [NSMutableArray array],
                        [NSMutableArray array],
                        [NSMutableArray array], nil]; 
```

这三个`NSMutableArray`s 将是您的二维数组的三列。

**编辑**

使用`NSArray`，使用循环来填充它可能更容易：

```
NSMutableArray *stringArray = [NSMutableArray array];

for (int column = 0; column < 3; column++)
{
    NSMutableArray *columnArray = [NSMutableArray array];

    for (int row = 0; row < 16; row++)
        [columnArray addObject:[NSString stringWithFormat:@"Row %i, column %i", row, column]];

    [stringArray addObject:columnArray];
} 
```

# php - 如何从原始维基百科请求中导出数据？

> ID：13034537
> 
> 赞同：-1
> 
> 时间：2012-10-23T15:56:09.910
> 
> 标签：php, html, wikipedia

我有这个请求[http://en.wikipedia.org/w/index.php?action=raw&title=Greece](http://en.wikipedia.org/w/index.php?action=raw&title=Greece) 并且我试图从中获取一些信息：语言、货币、long/lat 等。有没有简单的用php获取这些数据的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:04:45.517

你可以用 PHP 解析文件，但我找到了一个可以做到这一点的项目。

[PHP-维基百科-语法分析器](https://github.com/donwilson/PHP-Wikipedia-Syntax-Parser)

有一些例子。

**编辑：**

对于 URL，打开 URL

```
$wikiString = file_get_contents('http://url.de'); 
```

然后你就有了结果，你可以使用它。

# html - 粗体字使宽度改变

> ID：13034542
> 
> 赞同：1
> 
> 时间：2012-10-23T15:56:22.657
> 
> 标签：html, css

我有一个 div，里面有一些文本和一个边框。

```
<div><span>This is my div</span></div>​ 
```

当我将鼠标悬停在该 div 上时，我希望字体为粗体。

```
div{
    border: 1px solid black;
    display:inline-block;
    padding:20px;
}

span{ 
    padding:20px;

}

div:hover{
    font-weight:bold;
} 
```

​</p>

这使我的 div 有点宽 - 这会导致烦人的闪烁。

[JSFiddle](http://jsfiddle.net/P3vHW/)上的示例

我该如何解决这个问题？

编辑：

div 的宽度必须随内容增长，而不是随重量增长。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T15:57:12.963

您的 div`inline-block`没有明确的宽度，因此它会收缩包装内容。该字体是[比例字体](http://en.wikipedia.org/wiki/Proportional_fonts#Proportion)，因此当它变粗时它会变得更粗（并占用更多的水平空间）。

给 div 一个固定的宽度，将其设置为`block`，或使用等宽字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-09T11:42:25.367

您可以使用文本阴影模拟粗体效果。所以你会有

```
div:hover { 
text-shadow: 0 0 1px black, 0 0 1px black;
} 
```

您可以通过将 1px 更改为更高或更低的数字来控制影响。您还需要根据文本颜色更改阴影的颜色。在此处查看有关此解决方案的整篇文章： [https ://www.sitepoint.com/quick-tip-fixing-font-weight-problem-hover-states/](https://www.sitepoint.com/quick-tip-fixing-font-weight-problem-hover-states/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T15:47:12.053

我通过玩 letter-spacing 非常接近：

[http://jsfiddle.net/thezver/U56R6/1/](http://jsfiddle.net/thezver/U56R6/1/)

```
<div>Asdf</div>
<div>ab acRsery</div>
<div>abc f</div>
<div>aMdNhjkl</div>
<div>1</div> 
```

CSS：

```
div{
    display:inline-block;
    font-family:'Open Sans';
    font-size: 16px;
    padding:5px 10px;
    border:1px solid gray;
    letter-spacing: 0.5px;
}

div:hover{
    font-weight:bold;
    letter-spacing:-0.1px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:02:50.627

您可以将您的 div 设置为固定宽度并居中对齐您的文本以保持整洁

```
div{
    border: 1px solid black;
    display:inline-block;
    padding:20px;
    width: 150px;
    text-align: center;
}

span{
    padding:20px;
}

div:hover{ 
    font-weight:bold; 
} 
```

[来自 jsFiddle 的工作示例](http://jsfiddle.net/Bmbcb/)

希望这可以帮助

# ios - 使用 Time Profiler 识别表视图中的问题区域

> ID：13034543
> 
> 赞同：1
> 
> 时间：2012-10-23T15:56:24.700
> 
> 标签：ios, uitableview, instruments

在使用 Instruments 的 Time Profiler 来识别口吃表视图中的问题区域时，我应该遵循哪些步骤？不幸的是，我似乎在网上找不到太多关于此的信息。

当我双击该`UITableViewCell`行以拉出代码时，它以橙色突出显示 5 个不同的图像视图，旁边有 20%。但是我那里也有一堆 UILabel/UIButton，它们根本没有突出显示。这是否意味着标签/按钮不会占用太多处理时间，我不必担心它们？

# makefile - makefile：隐式规则：相同的目标不同的先决条件

> ID：13034544
> 
> 赞同：2
> 
> 时间：2012-10-23T15:56:27.383
> 
> 标签：makefile, gnu-make

我有以下生成文件：

```
all: DIR/0/a.txt DIR/1/b.txt DIR/2/c.txt DIR/3/abc.txt

DIR/%/abc.txt: DIR/%/def.xtx # rule #1
    mkdir -p $(@D)
    touch $@

DIR/%.txt: # rule #2
    mkdir -p $(@D)
    touch $@

DIR/%.xtx:
    touch $@ 
```

我想在生成`DIR/%/def.xtx`时`DIR/%/abc.txt`生成；否则只生成`DIR/%.txt`.

但是，在 GNU Make 3.81 中使用上面的 makefile，只会`DIR/3/abc.txt`生成`DIR/%/def.xtx`而不生成。

遵循 GNU make 用户手册中的“隐式规则搜索算法”，我们得到：

> (1) 将 t 拆分为目录部分，称为 d，其余部分称为 n。例如，如果 t 是 'src/foo.o'，则 d 是 'src/' 而 n 是 'foo.o'。

对于`DIR/3/abc.txt`,`d = DIR/3`和`n = abc.txt`.

> (2) 列出其目标与 t 或 n 匹配的所有模式规则。如果目标模式包含斜杠，则匹配 t；否则，反对 n。

规则#1 和#2 匹配。

> (3) 如果该列表中的任何规则不是 match-anything 规则，则从列表中删除所有非终结 match-anything 规则。

不确定：没有从列表中删除任何规则。

> (4) 从列表中删除所有没有配方的规则。

没有删除任何规则。

> (5) 对于列表中的每个模式规则：
> 
> (5.a) 找到词干 s，它是目标模式中与 '%' 匹配的 t 或 n 的非空部分。

对于规则 #1 `s = 3`，. 对于规则 #2，`s = 3/abc`

> (5.b) 通过将 s 替换为 '%' 来计算先决条件名称；如果目标模式不包含斜杠，则将 d 附加到每个先决条件名称的前面。

对于规则 #1，它变为：`DIR/3/abc.txt: DIR/3/def.xtx` 规则 #2 没有先决条件。

> (5.c) 测试所有先决条件是否存在或应该存在。（如果在 makefile 中将文件名作为目标或明确的先决条件提到，那么我们说它应该存在。）

NOT SURE:`DIR/3/def.xtx`被规则提及`DIR/%.xtx:`。

经过这么长时间的解释，我的观点是我在（5.c）中可能是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:47:35.530

从[手册](http://www.gnu.org/software/make/manual/make.html#Pattern-Match)中，

> 其先决条件实际存在或被提及的规则始终优先于具有必须通过链接其他隐式规则建立的先决条件的规则。

您的规则 #1 需要链接，您的规则 #2 没有先决条件，因此 Make 在尝试构建时会选择 #2 而不是 #1 `DIR/3/abc.txt`。

**编辑：**

如果您可以忍受目录列表：

```
DIRS := DIR/0 DIR/1 DIR/2 DIR/3 
```

那么你可以使用[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)来做到这一点：

```
all: DIR/0/a.txt DIR/1/b.txt DIR/2/c.txt DIR/3/abc.txt

ABC_TXT := $(addsuffix /abc.txt, $(DIRS))

$(ABC_TXT): DIR/%/abc.txt : DIR/%/def.xtx

DIR/%.txt:
    mkdir -p $(@D)
    touch $@

DIR/%.xtx:
    touch $@ 
```

（它也避免了规则的重复`.txt`！）

# c# - 使用反射的 Wcf 动态托管

> ID：13034546
> 
> 赞同：4
> 
> 时间：2012-10-23T15:56:33.563
> 
> 标签：c#, wcf, reflection, self-hosting

我的目标是创建一个能够解析多个程序集、检测合同并托管服务的主机应用程序。

为了加载服务，我们通常需要对 servicehost 实例化进行硬编码。尽管不是我正在寻找的行为，但以下代码仍在工作。

```
ServiceHost wService1Host = new ServiceHost(typeof(Service1));
wService1Host.Open();

ServiceHost wService2Host = new ServiceHost(typeof(Service2));
wService2Host.Open(); 
```

但是，这意味着我提前知道服务是什么。我不介意引用包含服务的程序集。我只是希望主机不知道程序集中包含哪些服务。例如，如果我向其中一个程序集添加新服务，则不需要在主机端进行任何更改。

[这与这个问题](https://stackoverflow.com/questions/5993563/can-i-automatically-host-all-services-in-app-config-when-using-selfhosting?lq=1)非常相似，但由于上述原因而增加了复杂性。

这是到目前为止我提供的主机代码。我现在不介意管理服务，我只是希望它们能够正确加载。

```
class Program
  {
    static void Main(string[] args)
    {

      // find currently executing assembly
      Assembly curr = Assembly.GetExecutingAssembly();

      // get the directory where this app is running in
      string currentLocation = Path.GetDirectoryName(curr.Location);

      // find all assemblies inside that directory
      string[] assemblies = Directory.GetFiles(currentLocation, "*.dll");

      // enumerate over those assemblies
      foreach (string assemblyName in assemblies)
      {
        // load assembly just for inspection
        Assembly assemblyToInspect = Assembly.ReflectionOnlyLoadFrom(assemblyName);

        // I've hardcoded the name of the assembly containing the services only to ease debugging
        if (assemblyToInspect != null && assemblyToInspect.GetName().Name == "WcfServices")
        {
          // find all types
          Type[] types = assemblyToInspect.GetTypes();

          // enumerate types and determine if this assembly contains any types of interest
          // you could e.g. put a "marker" interface on those (service implementation)
          // types of interest, or you could use a specific naming convention (all types
          // like "SomeThingOrAnotherService" - ending in "Service" - are your services)
          // or some kind of a lookup table (e.g. the list of types you need to find from
          // parsing the app.config file)
          foreach (Type ty in types)
          {
            Assembly implementationAssembly = Assembly.GetAssembly(ty);
            // When loading the type for the service, load it from the implementing assembly.
            Type implementation = implementationAssembly.GetType(ty.FullName);

            ServiceHost wServiceHost = new ServiceHost(implementation); // FAIL
            wServiceHost.Open();
          }
        }
      }
      Console.WriteLine("Service are up and running.");
      Console.WriteLine("Press <Enter> to stop services...");
      Console.ReadLine();
    }
  } 
```

尝试创建 serviceHost 时出现以下错误：

```
"It is illegal to reflect on the custom attributes of a Type loaded via ReflectionOnlyGetType (see Assembly.ReflectionOnly) -- use CustomAttributeData instead." 
```

在上面给出的链接中，这个人似乎已经使用 typeof 解决了它的问题，因为他事先知道他想要公开什么服务。不幸的是，这不是我的情况。

注意：对于托管部分，我实际上有 3 个项目。第一个是主机应用程序（见上文），第二个是包含我所有服务合同（接口）的程序集，最后一个程序集包含服务实现。

这是我实际用于托管服务的 app.config。包含实现的程序集被命名为“WcfServices”并包含 2 个服务。一个是公开回调，另一个是基本服务。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>    
    <behaviors>
      <serviceBehaviors>  
        <behavior name="metadataBehavior">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>        
      </serviceBehaviors>  
    </behaviors>
    <services>
      <service name="WcfServices.Service1"
               behaviorConfiguration="metadataBehavior">

        <endpoint address="Service1Service"
                  binding="basicHttpBinding"
                  contract="WcfServices.IService1"
                  name="basicHttp"/>

        <endpoint binding="mexHttpBinding"
                  contract="IMetadataExchange"
                  name="metadataExchange"/>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/Service1"/>
          </baseAddresses>
        </host>        
      </service>

      <service name="WcfServices.Service2"
               behaviorConfiguration="metadataBehavior">

        <endpoint address="Service2Service"
                  binding="wsDualHttpBinding"
                  contract="WcfServices.IService2"/>

        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"/>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/Service2"/>
          </baseAddresses>
        </host>
      </service>

    </services>    
  </system.serviceModel>
</configuration> 
```

所以，要清楚，这就是我要找的：
1\. 在当前应用程序目录中加载程序集
2\. 查看其中是否有任何合同实现
3\. 如果有，实例化这些服务（暂时使用 app.config )

首先，这甚至可能吗？（我的猜测是因为一个名为 wcfstorm 的应用程序似乎已经这样做了）
显然，我怎样才能使上面的代码工作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:16:30.033

这就是我最终做的事情：

```
private static void LoadServices()
{
  // find currently executing assembly
  Assembly Wcurr = Assembly.GetExecutingAssembly();

  // get the directory where this app is running in
  string wCurrentLocation = Path.GetDirectoryName(Wcurr.Location);

  // enumerate over those assemblies
  foreach (string wAssemblyName in mAssemblies)
  {
    // load assembly just for inspection
    Assembly wAssemblyToInspect = null;
    try
    {
      wAssemblyToInspect = Assembly.LoadFrom(wCurrentLocation + "\\" + wAssemblyName);
    }
    catch (System.Exception ex)
    {
      Console.WriteLine("Unable to load assembly : {0}", wAssemblyName);
    }

    if (wAssemblyToInspect != null)
    {
      // find all types with the HostService attribute
      IEnumerable<Type> wTypes = wAssemblyToInspect.GetTypes().Where(t => Attribute.IsDefined(t, typeof(HostService), false));

      foreach (Type wType in wTypes)
      {
        ServiceHost wServiceHost = new ServiceHost(wType);
        wServiceHost.Open();
        mServices.Add(wServiceHost);
        Console.WriteLine("New Service Hosted : {0}", wType.Name);
      }
    }
  }

  Console.WriteLine("Services are up and running.");
} 
```

注意：此方法要求“宿主”项目引用程序集。

注意 2：为了加速程序集解析，我已经硬编码了要在“mAssemblies”中加载哪些程序集。

# c# - 有没有办法检查 Central Admin 以获取已安装/激活的 iFilter 列表？

> ID：13034550
> 
> 赞同：2
> 
> 时间：2012-10-23T15:56:37.760
> 
> 标签：c#, sharepoint, sharepoint-2010

我目前正在寻找一种方法来验证是否在 SharePoint 网站上安装/激活了 iFilter。我有一个小应用程序可以检查盒子上是否安装了 Adob​​e PDF iFilter 9 或 10（通过注册表查找），但我想知道是否有办法检查 SharePoint 本身？

原因是我也希望能够检查其他 3rd 方 iFilter，并且执行大量硬编码值是不切实际的。

我在搜索方面还没有多少运气，但如果有人知道通过服务应用程序或其他方式检查 SharePoint 的方法，我将不胜感激！

**编辑：** 我目前正在调查`ContentSource`并`SharePointContentSource`查看是否可以从那里抓取任何对我正在尝试做的事情有用的物体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:17:42.783

搜索引擎本身不理解文档的格式。因此，它会在 Windows 注册表中查找合适的 IFilter 并找到它。IFilter 了解文档格式并将文档中的文本提取回搜索引擎。

有这个应用程序在注册表中查找其他第 3 方 iFilter：http: [//blog.nirsoft.net/2010/02/13/view-the-list-of-installed-ifilter-components-of-windows-search /](http://blog.nirsoft.net/2010/02/13/view-the-list-of-installed-ifilter-components-of-windows-search/)

我不知道有任何方法可以在 SharePoint 本身中找到 iFilter 列表。

# c# - 如何发送异步电子邮件？

> ID：13034551
> 
> 赞同：0
> 
> 时间：2012-10-23T15:56:44.377
> 
> 标签：c#, asp.net, web-services, email, asynchronous

我正在尝试向已请求在可用时通过电子邮件发送库存更新的用户发送库存更新。该系统是一个P2P系统。用户将添加他们的库存，当发生这种情况时，我想触发电子邮件发送。

我希望在用户不必等待这些电子邮件发送的情况下完成此过程。我希望这是火然后忘记。添加库存的客户不需要知道电子邮件已发送，他所在的页面也不需要知道电子邮件已成功发送

我所看到的任何解决方案都需要我设置一个 Web 服务来处理这个问题。这是真的？如果是这样，有人可以向我发送正确的方向，告诉我在哪里学习如何编写 Web 服务以及它的界面是这样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:17:06.890

这并不完全是您问题的答案，但发送电子邮件是一个非常快速的过程，即使 SMTP 服务器不是本地的。我之前做过同样的事情，但没有做异步过程，延迟并不明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:01:38.517

您可以只使用线程来发送电子邮件。

```
using System.Threading;

Thread t = new Thread(()=>{ 
//put code here that would send your email
 });
t.IsBackground = true;
t.Start(); //this actually will startup the thread and run your code. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:01:41.210

什么版本的.NET？

难道你不能在一个新线程中启动一个进程来构建和发送电子邮件吗？

用户不必等待...

# java - 结合使用java和C++的Android项目

> ID：13034552
> 
> 赞同：1
> 
> 时间：2012-10-23T15:56:45.813
> 
> 标签：java, android, c++

任何人都有一个同时使用 C++ 和 Java 的 android 项目示例，例如，一个在 eclipse 上构建的普通 android 项目并在其中添加一个 cpp 类并在 java 类上使用这个 cpp 类...

说我有一个关于 C++ 的类 Foo

```
class Foo{
...
} 
```

我有一个关于 Java 的 MyActivity 类

```
public class MyActivity extends Activity{
...
} 
```

如何在 MyActivity 类上实例化 Foo 类？...

非常感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:26:18.027

首先，您必须使用 build_ndk.sh 创建一个 .so 的 c++ 类

在 C++ 方面，您必须声明您的 JNI 方法

```
JNIEXPORT void JNICALL 
Java_org_your_ackage_someFunction(JNIEnv * env, jobject  obj)
{} 
```

在Java方面

```
public class YourActivity extends Activity {
    // Load Native Libary
    static {
        System.loadLibrary("your_lib_name");
    }

    public native void someFunction();
} 
```

然后像在 java 中那样使用该函数。

你应该看看这个不错的[教程](http://code.google.com/p/awesomeguy/wiki/JNITutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:19:20.710

如果您只是想学习如何使用 NDK，请查看 NDK 目录中的文档和示例。

我建议从`hello-jni`非常容易理解的示例开始。它展示了如何从 Java 调用 C/C++ 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:38:36.807

你可以在下面找到很多 Android NDK 示例`path/to/<android-ndk-folder>/samples`。`docs`文件夹和[官方网站](http://developer.android.com/guide/practices/jni.html)上也有很多有用的信息。

# scala - 如何使用 monad reader 在迭代器对象上仅返回函数应用程序的最新结果

> ID：13034559
> 
> 赞同：0
> 
> 时间：2012-10-23T15:57:15.967
> 
> 标签：scala, functional-programming, iterator, monads, reader-monad

我在这个“过于简单”的小例子中翻译了我的问题。目标是仅返回基于对迭代器对象的每个元素的简单函数执行的最新计算。

```
val l = List(1,2,3,4).toIterator
def myPersonnalMultiply(number:Int) = number * 2 
```

对于这个列表，我希望我的迭代器评估返回 '8'

我开始尝试使用 a `yield`，但似乎我无法计算这样的两件事：

```
val result = for (
  e <- l
  computation = myPersonnalMultiply(e)
if ((l.hasNext) == false) yield computation 
```

因此，有一个解决方案是`map`只`slice`保留最新评估的元素，但在与同事讨论后，这似乎不是真正*漂亮的功能代码*兼容，并且有更好的方法来做到这一点（真的吗？）。

基于此，我想在列表的所有元素上迭代和计算我的函数，但只返回最新的计算。

**编辑：我的例子是“过于简单化”，对不起这个错误。**

实际上，等效于 myPersonallMultiply 函数等于执行可能需要当前状态或要计算的先前状态的模拟。

我的模拟器的 states 函数返回 state 的迭代器：

```
 def states(implicit aprng: Random = new Random): Iterator[State] = {

    // Initial State loaded from file
    val loadedState = initState(this.getClass.getClassLoader.getResourceAsStream("init-situation.txt"))
    val territory = computeTerritory(loadedState)

    def simulationStep(state: State): State = {
        // 3b - Apply on each city the function evolveCity() which contain the sequence of action for each city
        // and return a list of tuple (city, exchange) which represent a new state at time t+1 for these cities
        val evolved =
          state.cities.map {
            city => evolveCity(city.id, state.cities, territory(city.id), state.date)
          }

        // 4 - take only the first object (cities) in the list "evolved"
        new State {
          val cities = evolved.map { case(city, _) => city }
          val date = state.date + 1
        }        
    }

    def ended(state: State) = {
      val maxInnov = maxInnovation(state.cities)
      val maxCity = maxCities(state.cities)

      // 3a - Break the simulation loop if one of these conditions is true
      state.date >= 4000 || /*maxPop > 70.0 || */ maxInnov > maxInnovation
    }

    // 1 - Launch the recursive simulation loop with initial loaded step, a the date 1
    val initialState: State = new State {
      val cities = loadedState
      val date = 1
    }

    Iterator.iterate(initialState)(simulationStep).takeWhile(s => !ended(s))
  } 
```

当您计算每个状态（我的模拟步骤 = 1 个状态）时，您需要在任何地方存储/写入结果，因此我将模拟运行封装到一个 Writer 类中，这里是一个“CSVwriter”。

```
class CSVWriter(path: String, idExp:Int, seed:Long) {

  def apply(s: Simulation)(implicit aprng: Random) = {
    val writer = new BufferedWriter(new FileWriter(new File(path)))

    // TODO: Reader Nomad ? http://mergeconflict.com/reading-your-future/
    // Run stepWriter on each state, and write the result
    // Actually this code run the writer but don't return the final state ...

    try {
      writer.append("v_idn, v_exp, v_ticks, v_seed, v_pop" + "\n")
      s.states.foreach(stepWriter(_, writer))
    } finally writer.close
   }

  def stepWriter(dataToWrite: State, writer: Writer) = {
    writer.synchronized {
      val cities = dataToWrite.cities
      val year = dataToWrite.date
      cities.map {
        c => writer.append(List[Any](c.id.toInt, idExp.toInt, year.toInt, seed, c.population).map{_.toString}.mkString(",") + "\n")
      }
    }
  }

} 
```

1 - 正如你所看到的，在这里，每一步都不需要先前的状态，但*在不久的将来*，情况就是这样：例如，要在我们的模拟状态 T 中计算我们的城市之间的新交换，我们需要访问在先前状态 T-1 创建的交换器

2 - 我需要返回最后一个状态来为我的模拟计算一些分数，所以我需要 CSVWriter 类写入 s.states 返回的每个状态，并返回计算的最后一个状态。

3 我认为可以为这个问题创建一个更好、更通用的解决方案：也许`reader monad`可以帮助我为状态迭代器的这种复杂的写入器行为创建一个更好的接口，但也许我错了？

我希望我的问题更清楚。

经过一些研究，我发现了`monad reader`功能模式，但是如果我在全球范围内了解这种方法的兴趣，我不明白如何翻译我在网上阅读的不同示例（就像这里的第一个示例[http://mergeconflict.com /reading-your-future/](http://mergeconflict.com/reading-your-future/)）解决这个简单的问题。我此时尝试不同的代码但没有成功：/

你有一些简单的解释或指示来帮助我理解“单子阅读器”吗？

或者也许我完全错了，我无法用这种方法解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:10:43.250

您可以简单地（ab）使用 foldLeft：

```
val myDefaultValue = 0
l.foldLeft(myDefaultValue){ (_,x) => myPersonnalMultiply(x) } 
```

where`myDefaultValue`是在列表为空的情况下返回的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:39:17.137

也许您过于简化了您的情况，但是如果您需要单独处理所有元素（这意味着对 ith -element 的操作*不需要**对*ith *+1* -element 进行操作），则不需要 monad。

 **您可以简单地对所有元素进行操作（甚至是并行操作！），将结果放回去并获得最后一个

```
def doAndGetLast[A, B](input: List[A])(computation: A => B): B = 
    (input.par map computation).seq.last

val inputs = List(1,2,3,4)

def myMul(n: Int) = n * 2

val withInputs: (Int => Int) => Int = doAndGetLast(inputs) _

val result = withInputs(myMul) // or directly doAndGetLast(inputs)(myMul) 
```**

# http - 是否可以有一个不使用 https 的 SSL 站点？

> ID：13034561
> 
> 赞同：1
> 
> 时间：2012-10-23T15:57:18.943
> 
> 标签：http, sharepoint, ssl

我最近开发了一个依赖于 http referrer tracking 的网站（别无选择）。这个想法是客户会在他们的共享点站点上发布一些东西，它会链接到新站点——我们会检查引荐来源并将其用作身份验证来查看页面。

不是一个很好的策略，但当时最好的策略 - 如果推荐人不匹配，我们将拒绝访问。

客户端的 Intranet 不使用 https 前缀，也不使用标准顶级域 - 我知道 Web 浏览器在从 https 到 http 站点时不会发送引荐来源信息 - Sharepoint 站点实际上可能使用 SSL，即使它不使用 https 前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:00:39.610

安全超文本传输​​协议 (HTTPS) 是一种广泛使用的通信协议，用于在计算机网络上进行安全通信，尤其是在 Internet 上的广泛部署。

从技术上讲，它本身并不是一个协议。相反，它是在 SSL/TLS 协议之上简单地分层超文本传输​​协议 (HTTP) 的结果，从而将 SSL/TLS 的安全功能添加到标准 HTTP 通信中。

如果您想要 SSL，那么 URL 将以 HTTPS:// 开头，所以简短的回答是：不，不可能。

# c# - 如何将 URL 与保留的查询字符串部分结合起来？

> ID：13034568
> 
> 赞同：6
> 
> 时间：2012-10-23T15:57:52.780
> 
> 标签：c#, url

我正在编写一个需要调用 web 应用程序的 C# 应用程序。我正在尝试使用`System.Uri`组合两个 URL：一个基本 URL 和我需要的 webapp 的特定服务（或许多）的相对路径。我有一个名为`webappBackendURL`我想在一个地方定义的类成员，所有调用都是从它构建的（`webappBackendURL`没有像我的示例说明的那样接近定义）。

```
System.Uri webappBackendURL = new System.Uri("http://example.com/");
System.Uri rpcURL           = new System.Uri(webappBackendURL,"rpc/import");
// Result: http://example.com/rpc/import 
```

但是，如果`webappBackendURL`包含查询字符串，则它不会被保留。

```
System.Uri webappBackendURL = new System.Uri("http://example.com/?authtoken=0x0x0");
System.Uri rpcURL           = new System.Uri(webappBackendURL,"rpc/import");
// Result: http://example.com/rpc/import <-- (query string lost) 
```

有没有更好的方法结合 URL？.NET 库非常广泛，所以我想我可能只是忽略了一种处理此问题的内置方法。理想情况下，我希望能够像这样组合 URL：

```
System.Uri webappBackendURL = new System.Uri("http://example.com/?authtoken=0x0x0");
System.Uri rpcURL           = new System.Uri(webappBackendURL,"rpc/import?method=overwrite&runhooks=true");
// Result: http://example.com/rpc/import?authtoken=0x0x0&method=overwrite&runhooks=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:04:27.823

你可以这样做：

```
System.Uri webappBackendURL = 
  new System.Uri("http://example.com/?authtoken=0x0x0");
System.Uri rpcURL = new System.Uri(webappBackendURL,
  "rpc/import?ethod=overwrite&runhooks=true" 
  + webappBackendURL.Query.Replace("?", "&")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:14:14.793

```
System.Uri webappBackendURL = new System.Uri("http://example.com/?authtoken=0x0x0");
System.Uri rpcURL           = new System.Uri(webappBackendURL,string.Format("rpc/import?{0}method=overwrite&runhooks=true", string.IsNullOrWhiteSpace(webappBackendURL.Query) ? "":webappBackendURL.Query + "&")); 
```

尽管我可能会创建一个采用两个 URI 并在那里进行处理的方法，以使其看起来更干净一些。

```
public static Uri MergerUri(Uri uri1, Uri uri2)
    {
        if (!string.IsNullOrWhiteSpace(uri1.Query))
        {
            string[] split = uri2.ToString().Split('?');

            return new Uri(uri1, split[0] + uri1.Query + "&" + split[1]);
        }
        else return new Uri(uri1, uri2.ToString());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:15:48.587

尝试`UriTemplate`：

```
Uri baseUrl = new Uri("http://www.example.com");
UriTemplate template = new UriTemplate("/{path}/?authtoken=0x0x0");
Uri boundUri = template.BindByName(
    baseUrl,
    new NameValueCollection {{"path", "rpc/import"}}); 
```

`System.UriTemplate`已经在不同版本的 .NET 之间移动。您需要确定哪个程序集引用对您的项目是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-07T07:40:33.457

```
var originalUri = new Uri("http://example.com?param1=1&param2=2");
var resultUri = new Uri(new Uri(originalUri, "/something"), originalUri.Query); 
```

resultUri：[http ://example.com/something?param1=1¶m2=2](http://example.com/something?param1=1&param2=2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T18:42:33.557

使用收到的答案中的想法和片段，我编写了一个包装器方法，它完全实现了我正在寻找的东西。我希望核心 .NET 类可以处理这个问题，但看起来他们不能。

此方法将采用完整的 URL ( `http://example.com?path?query=string`) 并将相对 URL（字符串）以 的形式组合`relative/path?query=string&with=arguemnts`到其中。

```
private static System.Uri ExtendURL(System.Uri baseURL, string relURL)
{
    string[] parts = relURL.Split("?".ToCharArray(), 2);
    if (parts.Length < 1)
    {
        return null;
    }
    else if (parts.Length == 1)
    {
        // No query string included with the relative URL:
        return new System.Uri(baseURL,
                              parts[0] + baseURL.Query);
    }
    else
    {
        // Query string included with the relative URL:
        return new System.Uri(baseURL,
                              parts[0] + (String.IsNullOrWhiteSpace(baseURL.Query) ? "?" : baseURL.Query + "&") + parts[1]);
    }
}

ExtendURL(new System.Uri("http://example.com/?authtoken=0x0x0"),"rpc/import?method=overwrite&runhooks=true");
// Result: http://example.com/rpc/import?authtoken=0x0x0&method=overwrite&runhooks=true 
```

感谢所有做出贡献的人！我赞成你所有的答案。

# android - Android：在片段中使用 .setOnClick

> ID：13034576
> 
> 赞同：1
> 
> 时间：2012-10-23T15:58:15.903
> 
> 标签：android, fragment

如何在[https://stackoverflow.com/a/7808223/1766169](https://stackoverflow.com/a/7808223/1766169)中提到的片段中使用 .setOnClick ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:07:29.917

写该答案的人大概意味着调用`setOnClickListener()`小`Button`部件：

```
 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup parent,
                           Bundle savedInstanceState) {
    View result=inflater.inflate(R.layout.main, parent, false);

    b=(Button)result.findViewById(R.id.button);
    b.setOnClickListener(this);

    return(result);
  } 
```

# mysql - 计算另一个角色中具有相同值的角色

> ID：13034578
> 
> 赞同：1
> 
> 时间：2012-10-23T15:58:17.790
> 
> 标签：mysql, database

如何为制片人、作家、作家选择具有相同角色值的标题数量？

Take看起来像这样，

```
title | year | person | role(actor, director, producer or writer) 
```

推理应该沿着这条线，

```
SELECT COUNT(title) 
FROM movie_table 
WHERE role(writer,director, producer)= same person 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:02:27.563

尝试

```
SELECT COUNT(title) 
from movie_table
WHERE role in ('producer', 'writer')
and movie_person is not null
group by title
having count(distinct role) = 2
and count(distinct movie_person) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:57:19.607

使用带有可选连接条件的自连接（不在同一行）：

```
SELECT COUNT(t1.title)
FROM movie_table t1
JOIN movie_table t2 ON t1.id != t2.id 
    AND (t1.writer = t2.writer
      OR t1.director = t2.director
      OR t1.producer = t2.producer) 
```

# sql-server-2008 - PATINDEX 和 CHARINDEX 返回不同的答案 SQL Server 2008

> ID：13034584
> 
> 赞同：4
> 
> 时间：2012-10-23T15:58:34.237
> 
> 标签：sql-server-2008, tsql

我有一个表，我希望在其中找到字符串字段中`0`最后**一个字符的所有实例。**我通过使用两种方法进行了尝试，它们都返回了不同的结果。

这第一个查询似乎实际上返回了正确的答案

```
select * from icd
    where CHARINDEX('0',icd,LEN(icd)) =LEN(icd) 
```

这个没有抓住所有的答案

```
select * from icd
    where PATINDEX('%0%',icd) = LEN(icd) 
```

使用

```
select t.ICD as theCharIndex,x.ICD as thePatIndex from
(

select * from icd
    where CHARINDEX('0',icd,LEN(icd)) =LEN(icd) 
) t
left join
(
select * from icd
    where PATINDEX('%0%',icd) = LEN(icd)
) x on x.ICD=t.ICD
where x.ICD is null 
```

我发现收集到的数据集`CHARINDEX`没有`PATINDEX`。我什至做了

```
update icd
set ICD=RTRIM(icd) 
```

为什么会`PATINDEX`不加选择地遗漏一些行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:02:45.550

因为你在结束之前的某个地方有一个 0 。更改`PATINDEX('%0%',icd)`为`PATINDEX('%0',icd)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:03:59.103

不会`PATINDEX`返回字符串中的第一个“0”，因此如果字符串有多个零`PATINDEX('%0%',icd) = LEN(icd)`，即使最后还有另一个零也是假的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:05:48.523

没有一些数据很难说，但我认为因为你告诉 CHARINDEX 从字符串的最后一个位置开始，所以它只会考虑最后一个字符（这似乎是你想要做的）但是 PATINDEX 正在考虑所有细绳。

仅供参考，我认为使用 SUBSTRING 功能实现您想要的效果会更好

```
where SUBSTRING(icd, len(icd),1) 
```

# c++ - 如何将 fstream 读入 LPSAFEARRAY？

> ID：13034585
> 
> 赞同：2
> 
> 时间：2012-10-23T15:58:37.793
> 
> 标签：c++, winapi, com, fstream, safearray

我正在尝试在 C++ 中调用托管 dll 上的方法。其中一个参数是字节数组，库导入将其转换为 LPSAFEARRAY。字节数组/LPSAFEARRAY 旨在成为文件的内容。如何将文件读入 LPSAFEARRAY 以传递给方法？

这是生成的库头文件中的函数签名：

```
virtual HRESULT STDMETHODCALLTYPE AlterDocument(
   LPSAFEARRAY document/*[in]*/, 
   LPSAFEARRAY* pRetVal/*[out,retval]*/) = 0; 
```

第二个参数是另一个字节数组，当它从方法返回时我需要使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:03:41.387

您最初`SAFEARRAYBOUND`可以像 C 数组一样创建并初始化它，例如`SAFEARRAYBOUND sabdBounds[2] = { {10, 0}, {20, 0\} };`，然后使用`SafeArrayCreate`(http://msdn.microsoft.com/en-us/library/windows/desktop/ms221234(v=vs.85).aspx)获得所需的适当类型和尺寸`LPSAFEARRAY`。

**更新：**

这是一段显示如何创建的代码`LPSAFEARRAY`，如您所见，我在创建数组之前找到了文件的大小，这样我就可以直接将数据读入其中，您还可以将文件内容存储在一些中间缓冲区，然后创建`SAFEARRAYBOUND`后者：

```
 #include <Windows.h>
    #include <fstream>
    #include <cstdlib>

    int main(int argc, char** argv)
    {
        std::streampos fileSize = 0;
        std::ifstream inputFile("file.bin", std::ios::binary);
        fileSize = inputFile.tellg();
        inputFile.seekg( 0, std::ios::end );
        fileSize = inputFile.tellg() - fileSize;
        SAFEARRAYBOUND arrayBounds[1] = { {fileSize, 0}}; // You have one dimension, with fileSize bytes
        LPSAFEARRAY safeArray = SafeArrayCreate(VT_I1, 1, arrayBounds);
        SafeArrayLock(safeArray);
        char* pData = reinterpret_cast<char*>(safeArray->pvData); // This should be the pointer to the first element in the array, fill in the data as needed
        // Do your stuff
        SafeArrayUnlock(safeArray);
        SafeArrayDestroy(safeArray);
        inputFile.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:13:50.740

如果您有 ATL：

```
ifstream in(...);
CComSafeArray<BYTE> fileContents;

for (ifstream::traits_type::int_type ch = in.get(); ch != ifstream::traits_type::eof(); ch = in.get())
    fileContents.Add(ch);

managedObject->AlterDocument(fileContents, ...); 
```

如果您没有 ATL，则必须在没有 CComSafeArray 包装器的情况下直接操作 SAFEARRAY。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:33:48.573

一个选项可能是获取`ifstream`大小，然后创建一个`SAFEARRAY`具有适当大小的文件来存储整个文件内容，然后`read()`将文件内容存储到`SAFEARRAY`内存中。

代码可能是这样的（在方便的[`ATL::CComSafeArray`](http://msdn.microsoft.com/en-us/library/3xzbsee8%28v=vs.90%29.aspx)包装器的帮助下）：

```
// Open the file
ifstream inFile;
inFile.open("<<filename>>", ios::binary);
if (! inFile.is_open())
   // ... error

// Get length of file
inFile.seekg(0, ios::end);
const int length = inFile.tellg();
inFile.seekg(0, ios::beg);

// Allocate SAFEARRAY of proper size.
// ATL::CComSafeArray<T> is a convenient C++ wrapper on raw SAFEARRAY structure.
CComSafeArray<BYTE> sa;
HRESULT hr = sa.Create(length);
if (FAILED(hr))
  // ... error

// Read data into the safe array
BYTE * dest = &(sa.GetAt(0));
inFile.read(reinterpret_cast<char*>(dest), length);

// Close the stream 
// (or let the destructor automatically close it when inFile goes out of scope...)
inFile.close(); 
```

# compiler-construction - 如何使用 LLVM C Api/llvm-fs 绑定添加元数据节点

> ID：13034586
> 
> 赞同：1
> 
> 时间：2012-10-23T15:58:38.417
> 
> 标签：compiler-construction, f#, code-generation, llvm, llvm-fs

我正在尝试将元数据节点添加到程序中，无论是添加到指令中还是作为全局元数据。如何使用 LLVM C API 做到这一点？它现在提供了一个功能[`LLVMAddNamedMetadataOperand`](http://llvm.org/docs/doxygen/html/Core_8cpp_source.html#l00601)（从[这个问题](https://stackoverflow.com/questions/7998367/how-do-i-create-named-metadata-via-the-llvm-c-api)中找到），但我似乎看不到如何使用它。这`addNamedMetadataOperand`在[llvm-fs](https://github.com/keithshep/llvm-fs)绑定中绑定。我试过这个：

```
addNamedMetadataOperand myModule "foobar" (mDString "cat" 3u) 
```

期望它调用一些元数据节点`foobar`但它不起作用 - 抱怨转换错误。我想也许你应该`addNamedMetadataOperand`在指令上使用，所以我尝试了：

```
let ret = buildRet bldr (constInt i32 0UL)
addNamedMetadataOperand myModule "foobar" ret 
```

但它也不喜欢这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:10:00.540

[我在这个提交](https://github.com/keithshep/llvm-fs/commit/1b8c7c6726094112b45c1fdc78f68364b96037fe)中添加了两个新的“F# 友好函数”：mdNode 和 mdNodeInContext 。通过该提交，我可以将您的示例代码修改为：

```
open LLVM.Core
open LLVM.Generated.Core
open LLVM.Generated.BitWriter

let i32 = int32Type ()
let i32zero = constInt i32 0UL false

[<EntryPoint>]
let main argv =
    // Set up the module/function
    let module_ = moduleCreateWithName "foobar"
    //let context = getModuleContext module_
    let funcTy = functionType i32 [||]
    let func = addFunction module_ "main" funcTy
    let bldr = createBuilder ()

    let entry = appendBasicBlock func "entry"
    positionBuilderAtEnd bldr entry

    // Make a Metadata node and try and attach it to a ret
    //let mdnode = mDStringInContext context "bazquux" 7u
    let mdstring = mDString "bazquux" 7u
    let ret = buildRet bldr i32zero
    // From http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html
    // MD_dbg = 0, MD_tbaa = 1, MD_prof = 2, MD_fpmath = 3, MD_range = 4, MD_tbaa_struct = 5
    // Fails here
    //setMetadata ret 0u mdnode
    let myMDName = "my_MD_kind"
    setMetadata ret (getMDKindID myMDName (uint32 myMDName.Length)) (mdNode [|mdstring|])

    // Save bitcode to file
    writeBitcodeToFile module_ "metadatatest.bc" 
```

这给出了位码：

```
; ModuleID = 'metadatatest.bc'

define i32 @main() {
entry:
  ret i32 0, !my_MD_kind !0
}

!0 = metadata !{metadata !"bazquux"} 
```

我使用 getMDKindID 而不是一种预定义的 MD 类型，因为当我使用 0u 时，我没有得到元数据输出。我没有深入研究原因，但从查看[http://llvm.org/docs/LangRef.html#metadata](http://llvm.org/docs/LangRef.html#metadata)看来，预定义的元数据类型有一些限制，它所应用的指令没有满足。无论如何，如果您发现更多问题，请告诉我。它不是我目前正在使用的 API 的一部分，但我确实希望它尽可能好地工作。

# android - 来自类属性的 android 设置

> ID：13034588
> 
> 赞同：0
> 
> 时间：2012-10-23T15:58:48.403
> 
> 标签：android, settings, android-preferences

我在试图弄清楚这一点时遇到了一些问题：我有一组处理单个练习的抽象类 (Exercise) 的实例，以及一组包含特定练习的其他类 (Traning Class) 的实例。

我的应用程序选择一个随机培训课程，然后从中运行一个随机练习。从设置中，我希望能够从随机选择中选择例如要使用的培训课程和练习

这是我的代码

```
/** Common interface for all exercises */ 
public interface Exercise {

  public Exercise run();
}

  public abstract class ExerciseClass implements Exercise {
private int mWaitingTime = 3;   //seconds to wait before answer is shown
private String mQuestion = "";
private String mAnswer = "";
private String mHint = "";
        /*Getters and setters follow*/
} 
```

这是特定培训课程的示例，其中添加了练习

```
public class MatheMagic extends TrainingClass {

 public MatheMagic() {

     class TwoDigitsX11 extends ExerciseClass {

            public ExerciseClass run() {
                  String[] aRes = new String[3];

                  /*Choose a two digit number*/
                  int aRand = RandInt(100,11); 
                  String aQuestion = aRand + " x 11";
                  String aAnswer = String.valueOf(aRand * 11);
                  String aHint = "To multiply by 11, take the first digit and the last digit, and put in the middle the sum of the two. I.E. 36 x 11 = 3 (3+6) 6 -> 396";

                  this.setQuestion(aQuestion);
                  this.setAnswer(aAnswer);
                  this.setHint(aHint);

                  return this;
            }

        }

 //Set specific waiting times
     TwoDigitsX11 aTwoDigitsX11 = new TwoDigitsX11();
     aTwoDigitsX11.setWaitingTime(5);

 //Add exercises to training class
        mExerciseTypes.add(aTwoDigitsX11);
                     //these are other examples of exercises, whose code I’ve now not included
        mExerciseTypes.add(aMultiplicationTables);
        mExerciseTypes.add(new SquareTwoDigitsEndingFive ());
 }

} 
```

现在，在我的主要活动中，我有：

```
private ArrayList<TrainingClass> mTrainingClasses ;

    mMathMag = new MatheMagic();
    mMnemonics = new Mnemonics();

    mTrainingClasses = new ArrayList<TrainingClass>();
    mTrainingClasses.add(mMathMag);
    mTrainingClasses.add(mMnemonics); 
```

然后，正如我所说，我有一个函数 runRandomExercise，它从 mTrainingClasses 中选择一个随机元素，然后从其中的 ExerciseClass 数组列表中选择一个随机元素

从我的设置中，我希望能够 1) 动态更改 ArrayList（例如，告诉我想从 mMnemonics 中选择而不是 mMathMag） 2) 从特定 TraningClass 中选择哪个练习。设置，例如，mMathMag 是否可以选择练习类型 TwoDigitsX11 3) 更改特定练习的等待时间（访问函数 setWaitingTime() ）

我的问题是我无法制作一组特定的变量来处理这个问题，因为我希望能够添加或删除特定的培训课程和练习，所以理想情况下，应用程序应该能够从设置页面访问 mTrainingClasses 元素并处理它。

如何才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:15:52.777

这个问题的回答相当广泛，所以这里只回答*如何从偏好中阅读*：

您**实际上并不需要为此**使用 android 设置。您可以使用一个活动来保存用户的选择并将结果与​​练习一起返回给活动。但是，如果您想保留这些数据，则需要实现数据持久性 (dB)。**这是设计问题**

要使用 android 的设置来做到这一点，请考虑以下主要活动：

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView myText = new TextView(this);
        SharedPreferences mySharedPref = PreferenceManager.getDefaultSharedPreferences(this);

        String text = ((Boolean)mySharedPref.getBoolean("checkbox1", true)).toString()+" <- checkbox 1";
        myText.setText(text);
        setContentView(myText);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.add(0, 0,0, R.string.hello_world); 
        return true;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) {

        Intent i = new Intent("com.example.testdialogfragment.SettingsActivity");
        startActivity(i); // <------ Call settings as an activity
        return super.onMenuItemSelected(featureId, item);   
    }

} 
```

请注意如何调用设置活动以及如何读取其值，在这种情况下，它是 onCreate 中的 checkbox1（一个布尔值）。为了能够解决这样的意图，您需要在清单中声明设置活动：

```
 //.... all the manifest..    
    <activity
                android:name=".SettingsActivity" 
                android:label="settings" 
                android:theme="@android:style/Theme.Black">
                <intent-filter>
                    <action android:name="com.example.testdialogfragment.SettingsActivity" />
                    <category android:name="android.intent.category.DEFAULT" />
                </intent-filter>
    </activity> 
```

偏好活动如下所示：

```
public class SettingsActivity extends PreferenceActivity {

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);

    }

} 
```

最后，**最重要**的是您的偏好 xml 必须被分类，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
     <PreferenceCategory 
        android:title="Exercise Category1"
        android:key="pref_key_storage_settings">
        <CheckBoxPreference
            android:key="checkbox1"
            android:title="checkbox1"
            android:summary="summary"
            android:defaultValue="true" />
        <CheckBoxPreference
            android:key="checkbox2"
            android:title="checkbox1"
            android:summary="summary"
            android:defaultValue="true" />
    </PreferenceCategory>
    <PreferenceCategory 
        android:title="Exercise Category2"
        android:key="pref_key_storage_settings">
        <CheckBoxPreference
            android:key="checkbox3"
            android:title="checkbox3"
            android:summary="summary"
            android:defaultValue="true" />
    </PreferenceCategory>

</PreferenceScreen> 
```

您可以保存的不仅仅是布尔值，只需阅读有关偏好[的 android 指南。](http://developer.android.com/guide/topics/ui/settings.html)请注意，您可以在此处对元素进行分类，这样您就可以将 MatheMagic、助记符和所有您的东西作为类别。

顺便说一句，这是**整个代码**。因为这个答案展示了如何使用 android 首选项，所以您可以在将其附加到您的应用程序之前对其进行测试。最后，我会考虑以下方面的偏好：

*   哪个视图更容易自定义活动的首选项或布局？
*   如果您想为您的应用添加实际偏好，例如：“启用声音”，您必须将它们全部打包在一起。[阅读此处](http://developer.android.com/design/patterns/settings.html)发布的图表

不赞成使用是因为您“应该”使用片段，但首先尝试不使用。从这里，只需在您的 mainactivity 中读取首选项（onCreate）并动态生成练习。

希望能帮助到你

# architecture - 节点如何加入分布式哈希表 (DHT) 集群？

> ID：13034593
> 
> 赞同：10
> 
> 时间：2012-10-23T15:59:12.520
> 
> 标签：architecture, theory, p2p, distributed-computing

我正在尝试了解[分布式哈希表 (DHT)](http://en.wikipedia.org/wiki/Distributed_hash_table)范式，因为它适合 P2P 或完全分布式计算架构。从理论的角度来看，一旦集群建立起来，它如何管理集群数据和分配工作就很有意义了。

对我来说最有趣的部分是该架构从不需要某种集中式控制器或协调器（没有单点故障）。但是，我仍在努力理解这个概念的实际执行，特别是集群是如何形成的。如果它是一个完全分布式的系统，节点如何知道如何“加入”已经建立的集群？

在一个简单的例子中：

*   假设我正在创建一个基于 DHT 模型的 P2P 应用程序
*   应用程序分布在互联网上（也就是不在同一个网络中），任何公共客户端都可以连接到集群
*   连接到集群的客户端可以看到集群中的一些（但不一定是全部）其他客户端
*   未连接的客户端在集群中没有任何地址或客户端名称。

那么，如果没有任何集中式服务器充当信标，或者提供将新客户端引入集群的手段，那么新客户端将如何“连接”呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T04:07:17.697

这是我在论文中提到的一个问题，但我从未找到满意的解决方案。问题是在加入网络之前，您只需要一些关于其他对等点的信息，获得第一个地址是困难的。

我想出了一些想法：

*   鼓励同行发布他们的地址，这样您就可以获得可公开访问的已知 IP 列表
*   运行几个“众所周知的”引导对等点
*   [暴力破解地址空间](http://grothoff.org/christian/dasp2p.pdf)

最后一种选择是唯一真正去中心化的方法。三者的结合可能是最好的。

一旦你被引导到一个网络断开连接后重新建立连接并不难，只需保存网络中已经长期存在的数千个节点的地址，至少其中一个下次仍然在线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-29T02:41:33.973

据我所知，您可以为 DHT 节点网络创建代理服务器，并为该代理服务器设置影子服务器以实现可靠性。

任何试图加入 DHT 网络的新节点，都与代理对话，代理让它进入完全 P2P 的 DHT 网络。

这样，只有代理服务器必须是公共的，所有其他 DHT 节点都可以拥有它们的私有 IP。

由于应用程序分布在 Internet 上，这可能会给您带来障碍，但​​您始终可以通过代理进行交谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T21:08:45.240

事实上，维护分布式哈希表（DHT）源主干的一方是该 DHT 实例的[上帝](https://www.youtube.com/watch?v=ZKpFFD7aX3c)，因此是[主要](https://firstlook.org/theintercept/article/2014/03/20/inside-nsa-secret-efforts-hunt-hack-system-administrators/)的单点故障。如果 DHT 从具有已硬编码到 DHT 源中的地址的匿名网络（[Tor](https://www.torproject.org/)、[GNUnet](https://gnunet.org/)、[Chimera](http://current.cs.ucsb.edu/projects/chimera/)等）[节点](https://www.torproject.org/docs/hidden-services.html.en)（以下简称：anonnodes）引导，那么该 DHT 被一些[“No-Such-代理”](https://firstlook.org/theintercept/article/2014/02/10/new-photos-of-nsa-and-others/)不应增加。如果与[torsocks](https://superuser.com/questions/404732/how-to-use-wget-with-tor-bundle-in-linux)结合使用，经典的 wget 可用于 Tor 网络地址。一个例子：

```
torsocks wget http://xmh57jrzrnw6insl.onion/ 
```

为了降低 DHT 通过劫持其一些引导节点而被劫持的风险，可以使用自动投票过程。这个想法是引导节点从硬编码的匿名节点获取地址列表，并且仅从大多数列表中存在的节点引导。如果某些无节点比其他节点更“可信”，那么与其使用每个无节点拥有一票的系统，“更可信”的无节点可以拥有多于一票。

在过去，当计算机不可靠时，投票系统以一种形式使用，而不是不同的投票计算机，同一台计算机在同一组汇编程序命令上运行多次。计算结果进行了比较。最常见的答案被认为是正确的。可能在分布式哈希表的情况下，可能会使用相同的方法：在某个“更长”时间段内多次通过不同的 Tor 会话向不同的引导节点询问相同的问题、已知 DHT 节点的列表。

截至 2014_07_xx，我尚未测试这些想法，但我希望我目前的评论有所帮助。

# spring-mvc - 如何使用 Spring 3.1 将对象置于会话中？

> ID：13034594
> 
> 赞同：0
> 
> 时间：2012-10-23T15:59:15.640
> 
> 标签：spring-mvc, annotations

我有两个控制器，比如控制器 A 和控制器 B。ControllerA 有一个咨询对象，我需要将其发送到咨询 jsp。我正在使用返回转发：咨询。但是，在我到达 jsp 之后，如果用户按下确认按钮，我需要该 jsp 和在另一个控制器中使用的咨询对象。

我尝试了@SessionAttributes，发现它仅适用于第一个控制器A。然后我尝试使用 flashAttributes，但我无法验证重定向是否有效，因为 jsp 中的表单在第一次加载时需要为空白，并且引发错误：预期会话属性“咨询”。

```
redirectAttrs.addFlashAttribute("AttributeName", value);
    return "redirect:consultation"; 
```

我最终使用 HttpSession 作为解决方法。所以在这种情况下，这是正确的方法还是我没有设置正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:19:15.927

显然，在我的情况下，这是正确的方法。

我将对象放在会话中，当用户在 jsp 页面上时，控制器会从提交按钮触发。然后我需要的一切都在会话中，我检索它。

# sql-server-2008 - 使用 charindex 进行 sql 插入

> ID：13034596
> 
> 赞同：0
> 
> 时间：2012-10-23T15:59:20.697
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008

我有这个 INSERT 语句

```
INSERT INTO [dbo].[TempSequences]
(Title, Sequence, FileTrackingTag)
SELECT Title, Sequence, FileTrackingTag
FROM   [dbo].[MasterSequence]
WHERE  charindex(',' + FileTrackingTag + ',', ',' + @filetag + ',') > 0; 
```

其中 FileTrackingTag 与所述标题和序列相关联。但是我给了它一串这些标签

IE

```
 'tag1,tag2,tag3,tag4' 
```

我怎样才能把正确的标签放在那里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:12:33.720

如果您的意思是只想通过参数而不是整个序列放置一个提供的标签，那么：

```
INSERT INTO [dbo].[TempSequences] 
(Title, Sequence, FileTrackingTag) 
SELECT Title, Sequence, @filetag  
FROM   [dbo].[MasterSequence] 
WHERE  charindex(',' + FileTrackingTag + ',', ',' + @filetag + ',') > 0; 
```

# php - 解析错误：语法错误，第 6 行出现意外的 T_STRING

> ID：13034600
> 
> 赞同：0
> 
> 时间：2012-10-23T15:59:40.147
> 
> 标签：php, sql, parsing

我不断得到一个

```
Parse error: syntax error, unexpected T_STRING in /newref-exec.php on line 6 
```

我已经阅读了许多针对此问题的不同解决方案，但似乎都不起作用

```
<?php
// connect to database
 require($DOCUMENT_ROOT . "connect.php");
// check for blank entries
if ($_POST[doi2] == "NULL"){
    echo "No Data to add";
    }
    else
    {
    $sql="INSERT INTO ref (uid, date, doi, title, year, journal)
    VALUES 
    ('1','CURDATE ()','$_POST[doi2]','$_POST[title2]','$_POST[year2]','$_POST[journal2]')";
    if (!mysqli_query($link,$sql,$con))
        {
        die('The Reference could not be added, beacuse of SQL Error:' . mysql_error());
        }
        echo "New Reference Added";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:01:33.113

这一行，key需要有引号，

```
if ($_POST['doi2'] == "NULL"){ 
```

此外，如果你想检查`empty`条目，你可能需要这样做，

```
if ($_POST['doi2'] == ""){ //checking "NULL", checks for a string 'NULL' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:06:15.080

用下面的方式重写代码。

```
<?php
// connect to database
 require($DOCUMENT_ROOT . "connect.php");
// check for blank entries
if ($_POST['doi2'] == null){
    echo "No Data to add";
} else {
        $doi2 = $_POST['doi2'];
        $title2 = $_POST['title2'];
        $year2 = $_POST['year2'];
        $journal2 = $_POST['journal2'];

        $sql="INSERT INTO ref(uid, date, doi, title, year, journal) VALUES('1', 'CURDATE()', '$doi2', '$title2', '$year2', '$journal2')";
        if (!mysqli_query($link, $sql, $con))
        {
            die('The Reference could not be added, beacuse of SQL Error:' . mysql_error());
        }
        echo "New Reference Added";
}
?> 
```

# css - Custom fonts not rendering in Chrome/Safari

> ID：13034601
> 
> 赞同：0
> 
> 时间：2012-10-23T15:59:41.820
> 
> 标签：css, fonts, webkit

I'm using the CSS method to render fonts from fonts.com by using the font name in a CSS class like

```
 .myFont h3 {
   background-color: #FFFFFF;
   color: #000000;
   font-family: "ReformaGroteskW01-Mediu";
   font-size: 40px;
   font-weight: normal;
   letter-spacing: 0.04em;
   margin: 0 auto;
   padding: 0 7px;
   text-transform: uppercase;
   width: 105px; 
```

}

And the font is linked using this link tag provided by fonts.com, this works for Firefox but not for chome and Safari, seems like the webkit browser doesn't link something here, I would as the support at fonts.com but I have found their support to be very slow in the past.

```
<link type="text/css" rel="stylesheet" href="http://fast.fonts.com/cssapi/11386172-45ea-43f5-93bd-d795e60c00af.css"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T15:59:38.960

I realize this comment comes several months after the discussion on this issue; however, I just ran into this problem myself, and was looking for a solution, and landed here. The fonts served up by font.com were resolving correctly in Firefox but not in Chrome or Safari. I ultimately solved the problem by specifying both www.domainname.com AND domainname.com in font.com's domain configuration. Turns out both Chrome and Safari are sensitive to this. (Evidently font.com's domain configuration is less flexible than typekit's, where entering *.domainname.com automatically includes domain.com and www.domainname.com.) Hope this helps someone!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:46:15.373

We're sorry you're having difficulty! Looking at your Fonts.com Web Fonts project, it appears that it has been published with some changes only a few hours ago (approximately four hours prior to this response, several hours after your StackOverflow post). Currently, when loading your sample link (http://www.fabricproperty.com/) in a few browsers on some of our test machines, your project's fonts are loading and displaying correctly. I will also be following up with your Fonts.com support ticket regarding this issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:03:15.717

Why don't you download the font you like and put it in your files? That's way better and might solve your problem too.

Besides, don't use `font-family` and `font-size` apart. Put them together in the `font` tag.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T18:51:04.867

You did not describe in which sense it does not work for Chrome, but it seems that you are referring to minor rendering issues: on Chrome, the font is rendered with somewhat thicker strokes. This is something that you should discuss with the provider of the font service.

The font has been loaded and is used in Chrome, as you can see by editing the CSS code by removing `font-family:"ReformaGroteskW01-Mediu"`. So it’s a quality of font implementation issue.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T21:46:48.793

If you want fonts from fonts.com to work locally (no 403 errors) without needing to configure anything, you should view your site using the 'localhost' hostname which fonts.com supports by default:

[http://www.fonts.com/support/faq/local-host-support](http://www.fonts.com/support/faq/local-host-support)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T13:45:15.777

I noticed the webfonts only loads when I enter EdgeCast IP (68.232.35.182) in Add & Edit Domains. Perhaps fast.fonts.net is using EdgeCast CDN and the domain check gets the CDN address instead of the origin request address.

# java - 使用相同 onMessage 的多个 MessageListener 的线程安全？

> ID：13034605
> 
> 赞同：1
> 
> 时间：2012-10-23T15:59:54.347
> 
> 标签：java, spring, jms, spring-jms

如何确保两个 Listener 容器：

```
<bean id="listenerContainer"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="messageListener" ref="MessageListener" />
    <property name="connectionFactory" ref="tcf" />
    <property name="destinationName" value="${jms-topic}" />
    <property name="pubSubDomain" value="true" />
</bean>

<bean id="listenerContainer-2"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="messageListener" ref="MessageListener" />
    <property name="connectionFactory" ref="tcf" />
    <property name="destinationName" value="${jms-topic-2}" />
    <property name="pubSubDomain" value="true" />
</bean>

<bean id="MessageListener" class="com.my.url.jms.listener.DefaultMessageListener">
    <property name="transformer" ref="transformer" />
    <property name="publisher" ref="publisher" />
</bean> 
```

接收来自不同主题的消息。线程安全吗？

如您所见，它们使用相同的消息侦听器，该消息侦听器也依赖于其他一些 Spring bean。所有消息都将由同一个类中的同一个 onMessage 方法接收。

```
public class SomeKlass implements MessageListener {

    public void onMessage(Message message) {        
            //Do some work
    }

} 
```

有人可以建议我解决此类问题的最佳做法。来自两个主题的消息需要以相同的方式处理，所以我只需要一个 MessageListener。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T19:23:36.937

是的，这绝对没问题，只要你没有任何`SomeKlass`你似乎没有的状态。

# java - JavaFX 动画旋转线

> ID：13034606
> 
> 赞同：1
> 
> 时间：2012-10-23T15:59:56.433
> 
> 标签：java, javafx-2

如何在 JavaFX 中制作带有动画的旋转线？如您所知，如果这是在 C 或 C++ 中完成的，它只是循环 goto (x,y)，而不是睡眠。但是，在 JavaFX 中，我在循环中画了一条线，但在它运行时没有任何反应。有人可以帮助我吗？

```
package javafxapplication1;

import javafx.stage.Stage;
import java.util.*;
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.paint.Color;
import javafx.scene.shape.Ellipse;
import javafx.scene.shape.EllipseBuilder;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.stage.Stage;
import javafx.scene.text.Text;
import javafx.scene.shape.*;

public class JavaFXApplication1 extends Application { 

  public static void main(String[] args) {
    launch(args);
  }

  public class Canvas
  {
   private int width;
   private int height;
   private int stride;
   private byte[] im;
   private com.sun.prism.Image pimage;

   public Canvas(int width, int height)
   {
      this.width = width;
      this.height = height;
      this.stride = width*3;
      im = new byte[stride*height];
   } 
}

  @Override
  public void start(Stage primaryStage) {
      Group root = new Group();
      Scene scene = new Scene(root, 800, 600, Color.WHITE);

  Ellipse lingkaran = EllipseBuilder.create()
    .centerX(400)
    .centerY(300)
    .radiusX(210)
    .radiusY(210)
    .strokeWidth(3)
    .build();

  Path path = new Path();      

  MoveTo moveTo = new MoveTo();
  moveTo.setX(400);
  moveTo.setY(300);

  LineTo lineTo = new LineTo();
  lineTo.setX(400);
  lineTo.setY(100);

  path.getElements().add(moveTo);
  path.getElements().add(lineTo);
  path.setStrokeWidth(3);
  path.setStroke(Color.BLACK);

  int x1 = 400;
  int y1 = 300;
  int x2 = 400;
  int y2 = 100;
  double rr = 0;
  double dx, temp1;
  double dy, temp2;

  temp1 = x2;
  temp2 = y2;
  //root.getChildren().add(lingkaran);

  for(int i = 0; i < 500; i++){              
      Line line = new Line();
      Ellipse ellipse = new Ellipse();

      ellipse.setCenterX(400);
      ellipse.setCenterY(300);
      ellipse.setRadiusX(210);
      ellipse.setRadiusY(210);
      ellipse.setStroke(Color.BLACK);
      ellipse.setFill(Color.WHITE);

      line.setStartX(x1);
      line.setStartY(y1);          

      line.setStroke(Color.RED);          

      dx = ((x2-x1)*Math.cos(rr)) - ((y2-y1)*Math.sin(rr)) +x1;
      dy = ((x2-x1)*Math.sin(rr)) + ((y2-y1)*Math.cos(rr)) +y1;

      temp1 = dx;
      temp2 = dy;

      line.setEndX(dx);
      line.setEndY(dy);

      rr = rr + 0.05;

      root.getChildren().add(ellipse); 

      root.getChildren().add(line);  
  }    

   primaryStage.setScene(scene);
   primaryStage.show();

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:49:08.207

改为使用带有关键帧的[RotateTransition](http://docs.oracle.com/javafx/2/api/javafx/animation/RotateTransition.html)或动画时间轴。

请参阅[如何使用 JavaFX 2 绘制时钟？](https://stackoverflow.com/questions/10541738/how-to-draw-a-clock-with-javafx-2)有关使用 JavaFX 旋转一行的说明和示例代码。

您的代码不起作用，因为您必须将控制权交还给 JavaFX 系统，以便它可以执行实际的渲染。此外，不建议在代码中直接引用 com.sun 类，因为这些类可能会在未来的 JavaFX 版本中更改 API，从而损害代码的兼容性。

# javascript - 使用 jQuery 捕获当前（不是上一个）选中的单选按钮的值

> ID：13034607
> 
> 赞同：0
> 
> 时间：2012-10-23T15:59:56.373
> 
> 标签：javascript, jquery, onclick, radio-button

我希望能够在捕获单击单选按钮时获得*刚刚选择的值。*下面的一小段代码返回以前的值，但是如果我单击“男性”，那么我想捕获它，然后对`gender`var 执行其他操作。

```
$(document).ready(function() {

     $('input[name=gender]').click(function() {
          var gender = $('input[name=gender]:checked').val(); 
     });

});

<input type="radio" name="gender" value="male" />Male 
<input type="radio" name="gender" value="female" />Female 
```

这可能看起来像一个小问题，很可能是，但我可能会错过树上的木头，因为它是在一天的晚些时候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:01:21.413

使用`$(this).val()`，它将为您提供当前单击的单选按钮。您的代码也可以正常工作，但您使用的需要更少的选择器。[在此处](http://jsfiddle.net/vMpn9/1/)查看您的代码演示

**[现场演示](http://jsfiddle.net/vMpn9/)**

```
$(document).ready(function() {

     $('input[name=gender]').click(function() {
          var gender = $(this).val(); 
     });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:10:36.870

尝试更改事件，这是更好的解决方案，然后单击

[http://jsbin.com/arohuk/1/edit](http://jsbin.com/arohuk/1/edit)

# java - 是否有可以将 C# Linq 语句转换为 java 的工具？

> ID：13034608
> 
> 赞同：4
> 
> 时间：2012-10-23T15:59:57.660
> 
> 标签：java, linq

我知道 Java 没有等效的 LINQ，但是是否有一个工具（最好是免费的）可以就如何将 C# LINQ 语句转换为 Java 语句提出建议？

这个问题的目的不是要找到LINQ 的*替代方案*，而是要找到一个可以就如何将 LINQ 语句转换为 Java提出*建议的工具。*

对替代品的讨论已经在 SO 上被彻底解决了，所以 SO 不需要另一个与替代品相关的问题。然而，在我的研究中，我找不到任何可以简化 LINQ 到 Java 转换的工具。

# execcommand - 在选择颜色时保持文本选择处于活动状态

> ID：13034610
> 
> 赞同：1
> 
> 时间：2012-10-23T16:00:07.193
> 
> 标签：execcommand, jscolor

因此，我使用[JSColor 选择器](http://jscolor.com/)结合[document.execCommand](http://msdn.microsoft.com/en-us/library/ms536419%28v=vs.85%29.aspx)方法更改所选文本的前景，您可以在其中发送命令，如下所示：

```
<input maxlength="5" class="color {required:false}" onchange="fmtEdit('Icontent','ForeColor',this.color)"> 
```

fmtEdit 函数如下所示：

```
function fmtEdit(I,command, optn, evnt){
 if((command=='forecolor') || (command=='hilitecolor')){
  this.getPallete(command, optn, evnt);
 }else{
  if($(I).contentWindow.document.queryCommandEnabled(command)){
   $(I).contentWindow.document.execCommand(command, false, optn);
   return true;
  }else return false;
 }
 $(I).contentWindow.focus();
} 
```

如果我从带有 onClick 事件的按钮或图像发送命令，则代码可以正常工作，例如：

```
<img alt="Bold" title="Bold" class="butClass" src="bold.png" onClick="fmtEdit('Icontent','bold','')"> 
```

但是，一旦我单击颜色选择器字段以选择颜色，所选文本就会失去焦点。

当我点击颜色选择器时，有没有办法保持对所选文本的选择？

非常感谢！加布斯特。

# maven - dummy:dummy:jar:1.0、surefire-junit4、maven 和 Nexus

> ID：13034611
> 
> 赞同：11
> 
> 时间：2012-10-23T16:00:13.643
> 
> 标签：maven, nexus, surefire

所以我们最近为我们的 Maven 存储库管理器实现了一个 Nexus 服务器。我们代理了大约 30 个外部存储库，并将它们全部集中到一个组中，我们在 settings.xml 中的镜像中用 *.xml 指向它们。

在那之前，我们没有这个问题……现在我们有了。令我沮丧的是，关于这个虚拟 jar 的信息很少，它来自哪里，或者我可以从哪里得到它来阻止这些故障。我已经研究了几天，但一无所获。我希望社区可以提供帮助。

```
18-Oct-2012 22:50:31 [ERROR] BUILD ERROR 
18-Oct-2012 22:50:31 [INFO] ------------------------------------------------------------------------ 
18-Oct-2012 22:50:31 [INFO] Unable to generate classpath: org.apache.maven.artifact.resolver.ArtifactResolutionException: Unable to get dependency information: Unable to read the metadata file for artifact 'org.apache.maven.surefire:surefire-junit4:jar': Cannot find parent: org.apache.maven.surefire:surefire-providers for project: null:surefire-junit4:jar:null for project null:surefire-junit4:jar:null 
18-Oct-2012 22:50:31 org.apache.maven.surefire:surefire-junit4:jar:2.12 
18-Oct-2012 22:50:31 
18-Oct-2012 22:50:31 from the specified remote repositories: 
18-Oct-2012 22:50:31 central (http://repo1.maven.org/maven2), 
18-Oct-2012 22:50:31 JavaNet-mirror (http://maven:8081/nexus/content/repositories/Java.net/), 
18-Oct-2012 22:50:31 Releases (https://nexus:8443/nexus/content/repositories/releases/) 
18-Oct-2012 22:50:31 
18-Oct-2012 22:50:31 Path to dependency: 
18-Oct-2012 22:50:31 1) dummy:dummy:jar:1.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T11:40:00.587

我们有一个类似的问题，开发人员在测试层次结构中放置了一个名为“TestUtil”的类，而该类实际上与单元测试根本不相关。将类重命名为不包含 Test 前缀的东西为我们解决了这个问题。虽然不知道它是关于什么的。

AFAIK dummy.jar 是surefire插件内部使用的东西，但通常不会暴露给最终用户。“dummy.jar”可以在surefire插件源代码（[example1](https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L2304)和[example2](https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/SurefireDependencyResolver.java#L124)）中看到

所以在我们的例子中，“TestUtil”类导致问题出现，导致类似的情况，但为了验证它不是更合乎逻辑的事情，总是运行一个带有`-X`调试日志标志的 maven。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T14:45:21.893

这听起来像一个网络问题。

有什么东西阻止了互联网访问（防火墙或防病毒软件，只需暂时禁用它以下载依赖项）。

或者 jar 太大，需要从[http://maven.apache.org/wagon/wagon-providers/wagon-http-lightweight/下载](http://maven.apache.org/wagon/wagon-providers/wagon-http-lightweight/)

> 已知限制：
> 
> 主要限制是您不能下载不完全适合内存的数据。

解决此问题的方法是增加 Maven 的内存：

```
export MAVEN_OPTS="-Xmx1024m" 
```

请参阅：[Maven 无法下载 jar 依赖项](https://stackoverflow.com/questions/7074040/maven-failing-to-download-jar-dependencies)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T16:32:44.913

我遇到了同样的问题，并检查了我们在我们的关系中可用的surefire-junit4 版本。它是 2.12，我为我的 maven-surefire-plugin 声明了 2.17 版本。我认为这又取决于surefire-junit4 2.17版，它无法从我们的关系中获得。不管是什么，都非常令人沮丧，但是当我将surefire插件版本降级到2.12时，它就消失了，可以从我们的nexus下载正确的surefire-junit4依赖项，然后一切都很好而且花花公子。

好像你没有可用的 2.12，所以也许你必须回到你的关系中可用的任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-26T06:41:30.087

我的问题是通过在 ubuntu 上从 java-oracle 清除并重新安装 ca 证书来解决的，我只是按照答案

[https://stackoverflow.com/a/33440168/9827406](https://stackoverflow.com/a/33440168/9827406)

```
$ sudo dpkg --purge --force-depends ca-certificates-java
$ sudo apt-get install ca-certificates-java 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-28T17:20:22.200

就我而言，我没有指定surefire插件的版本。例如：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <includes>
                    <include>**/*_UT.java</include>
                    <include>**/*_FT.java</include>
                </includes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

...效果很好。但后来**我升级了我的 Maven 命令行客户端**并得到了这个。解决方案因您想要做的事情而异（将缺少的工件添加到您的公司回购，硬编码肯定版本，降级 Maven），但理解*为什么*对我来说很重要。

希望这可以帮助那里的人。

# jquery - 如何在不有时在后台播放音频的情况下关闭 html5 视频和 Flash 替代品？

> ID：13034618
> 
> 赞同：1
> 
> 时间：2012-10-23T16:00:35.953
> 
> 标签：jquery, video

有时当我单击“关闭”按钮（在视频加载之前）时，视频的音频仍然在后台播放？我正在使用以下代码关闭视频：

```
$(document).ready(function() {          
    var a = $
    a("img").click(function() {
    a("#trailer").fadeOut(300)
        a("video").remove(); 
```

更多代码：

```
<div id="trailer">
<img id="close" src="images/close.png" alt="close" />
<div id="video">
<video controls  autoplay="autoplay" poster="video/trailer.jpg" width="600"  onclick="if(/Android/.test(navigator.userAgent))this.play();">
<source src="video/trailer.mp4" type="video/mp4" />
<source src="video/trailer.webm" type="video/webm" />
<source src="video/trailer.ogv" type="video/ogg" />
<embed src="video/flashfox.swf" width="600" height="480"  flashVars="autoplay=true&amp;controls=true&amp;loop=true&amp;src=trailer.mp4" allowFullScreen="true" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_en" />
</video>
</div>
</div> 
```

谢谢！

编辑

代码在此段中不起作用。

```
 a("#trailerb").click(function() {
        a("video")[0].pause().remove();
        a("#trailer").show("50");
        a("#video").load("video.html"); 
```

应该发生的是单击任何正在播放的视频，暂停并从视图中删除，然后从 .load 方法中弹出一个新视频：这是 video.html 中的代码

```
<video controls="controls"  autoplay="autoplay" poster="video/trailer.jpg" width="600"  height=""  onclick="if(/Android/.test(navigator.userAgent))this.play();">
<source src="video/trailer.mp4" type="video/mp4" />
<source src="video/trailer.webm" type="video/webm" />
<source src="video/trailer.ogv" type="video/ogg" />
<embed src="video/flashfox.swf" width="600" height="480"  flashVars="autoplay=true&amp;controls=true&amp;loop=true&amp;src=trailer.mp4" allowFullScreen="true" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_en" />
</video> 
```

目前点击“#trailerb”只会暂停任何视频播放，而不执行：

```
a("#trailer").show("50");
a("#video").load("video.html"); 
```

谢谢你的时间！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:09:24.717

你可以做：

对于所有视频： a("video").each(function () { this.pause() });

或者

对于特定实例： a('video')[0].pause();

在 remove() 操作之前插入。

根据我的评论：

您正在尝试将新视频加载到 - 尝试：

```
$('#video video').load(); 
```

或 javascript:

```
video.src = 'video/trailer.mp4';
video.load();
video.play(); 
```

# jquery - 如何使用jquery获取生成的html表单

> ID：13034619
> 
> 赞同：2
> 
> 时间：2012-10-23T16:00:38.183
> 
> 标签：jquery, forms, dynamically-generated

我有这个表格

```
<form id="myForm">
<input name="foo" value=""  />
<input name="bar" value=""  />
... other dynamic input generated by jquery
</form> 
```

如何获取所有的html，包括“foo”和“bar”的值以及其他输入值？

我不需要这些值，而是所有生成的 html，包括用户输入的值。

```
$ ('#myform').html() 
```

返回表单的html，没有用户输入的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:11:58.067

您可以像这样手动设置值属性：

```
$('#myForm input').each(function(){ 
    $(this).attr('value', $(this).val());
});
console.log($('#myForm').html()); 
```

工作小提琴：http: [//jsfiddle.net/7g6CP/1/](http://jsfiddle.net/7g6CP/1/)

但是，请小心处理此操作，您可能会面临一些安全问题。

# php - Wordpress 插件错误

> ID：13034621
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:00:45.137
> 
> 标签：php, facebook, wordpress, plugins, comments

我升级了我的插件，现在我的网站上有错误。它显示了这一点：

警告：call_user_func_array() 期望参数 1 是有效的回调，未找到函数“模式”或 /home/dojkimk/public_html/wp-includes/plugin.php 第 170 行中的无效函数名称 xmlns:fb="http:/ /ogp.me/ns/fb#">

我不知道是哪个插件导致了这个问题。我正在使用这个 facebook 插件：[http ://wordpress.org/extend/plugins/facebook-comments-plugin/](http://wordpress.org/extend/plugins/facebook-comments-plugin/)

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:08:19.207

它是 Facebook 评论插件。更新到 2.0 版本后，我也遇到了同样的错误。暂时停用它。当作者找到修复它时，您始终可以激活它。

# javascript - Jquery加载方法将带有脚本标签的html加载到div中

> ID：13034622
> 
> 赞同：0
> 
> 时间：2012-10-23T16:00:50.020
> 
> 标签：javascript, jquery

> **可能重复：**
> [带有脚本标签的 Jquery 加载](https://stackoverflow.com/questions/5952123/jquery-load-with-script-tags)

使用 Jquery 我试图在单击选项卡时将 html 加载到 div 持有者中。HTML 完美加载到 div 中。问题是 html 中存在的脚本标记不起作用。

我只是想使用 Jquery 将[http://jsfiddle.net/meetravi/UbFcu/](http://jsfiddle.net/meetravi/UbFcu/)中的代码加载到我的 div 中。

```
$('#content-holder').load("graph.html");
<div id="content-holder"></div> 
```

现在，在 graph.html 中没有脚本标记的情况下执行此代码时，我可以看到 html 正在加载。当我添加脚本标签时，它不会加载到 div 中。我的要求是我不想在父 html 中加载脚本标签。

# c - 使用链表读取输入，如何开始

> ID：13034623
> 
> 赞同：-2
> 
> 时间：2012-10-23T16:00:49.910
> 
> 标签：c, arrays, linked-list

嗨，我正在编写这段代码，它需要 3 个字段，将其存储到结构中，但我不知道如何创建节点，函数 print_planet_list() 应该遍历链表并打印输出。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/* the struct */
typedef struct{
  char name[128];
  double dist;
  char description[1024];
} planet_t;

/* have to write a definition here */
typedef struct planet_node {
  ???;              /* what to write here? */
} planet_node;

/* Print a list of planets pointed to by ptr */
void print_planet_list(planet_node *ptr){
  while(ptr != NULL){
    printf("%15s %10.2f %s\n",
        new[i].name,
        new[i].dist,
        new[i].description);/* not sure if its correct */
  }
  printf("\n");
}

int main(){
  char buf[64];
  planet_node *head = NULL;
  int quit = 0;

  do {
    printf("Enter planet name (q quits): ");
    scanf("%s",buf);
    if((strcmp(buf,"q")==0)){
      quit = 1;
    }
    else{
      planet_node *new = (planet_t *) malloc(sizeof(planet_t)*? );      
      strcpy(???);          
      printf("Enter distance and description: ");
      scanf(" %lf ", new[i].dist); 
      gets(new[i].description);    
      ptr->head;           /* Link new node to head */
      ???;         /* Set the head to the new node */
    }
  } while(!quit);

  printf("Final list of planets:\n");
  print_planet_list(head);

  while(head != NULL){
    planet_node *remove = head;
    head = (*head).next;
    free(remove);
       }
    } 
```

我想要的输入是：
输入行星名称（q 退出）：地球输入距离和描述：0.9 友好和好客输入行星名称（q 退出）：火星输入距离和描述：1.05 非常国际化

输出：

火星 1.05 非常国际化 地球 0.90 友善好客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:06:24.503

```
typedef struct planet_node {
  char name[128];
  double dist;
  char description[1024];
  struct planet_node *next;

} planet_node; 
```

我认为这就是你应该如何声明存储下一个节点地址的`planet_node`结构的方式。`next`

# c++ - MFC 对话框应用程序未关闭

> ID：13034624
> 
> 赞同：3
> 
> 时间：2012-10-23T16:00:51.753
> 
> 标签：c++, mfc

我正在尝试关闭基于 CDialog 的应用程序。我调用 CWnd::OnClose() 然后调试器进入 Windows 系统文件。在调试器输出窗口中，我无限期地得到这些循环行。

线程“Win32 线程”(0x1040) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x2fa4) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x1ca0) 已退出，代码为 0 (0x0)。'LifescanDatabaseApplication.exe': 卸载'C:\Windows\SysWOW64\davclnt.dll' 'LifescanDatabaseApplication.exe': 卸载'C:\Windows\SysWOW64\davhlpr.dll' 'LifescanDatabaseApplication.exe': 加载'C:\Windows \SysWOW64\davclnt.dll'，找不到或打开 PDB 文件 'LifescanDatabaseApplication.exe'：已加载 'C:\Windows\SysWOW64\davhlpr.dll'，找不到或打开 PDB 文件

有什么想法我打破了或我应该如何追踪它？谢谢，詹姆斯

编辑对话框的函数 OnClose() 显示在这里；

```
void CApplicationDlg::OnClose()
{
    UpdateData(TRUE);
    if(AfxMessageBox(_T("Are you sure you want to close? If so, no more updates will be issued"),MB_YESNO)==IDYES)
    {
    Logger * instance = Logger::Instance();
    if(instance!=nullptr)
    {
      instance->writeToLogFile("Application shutdown.");
    }
        CWnd::OnClose();
    }
} 
```

我已经通过 Cwnd::OnClose() 命令使用调试器跟踪了这一点。问题是，代码没有回到调用对话框来运行 EndDialog 的部分。我想我在对话框代码的其他地方改变了一些东西，阻止了这个工作。

编辑 2：用 this->EndDialog(0) 替换 CWnd::OnClose() 似乎可以解决问题，但这令人担忧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:19:39.993

[您应该在http://msdn.microsoft.com/en-us/library/866bc849(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/866bc849(v=vs.80).aspx)的文档中查看 CWnd::OnClose 。您将看到它是一个响应事件发生而被调用的函数：窗口*接收*到 WM_CLOSE 消息，指示窗口应该关闭。简单地调用它不会关闭窗口。

[您应该使用适当的返回码http://msdn.microsoft.com/en-us/library/wddd3ztw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/wddd3ztw%28v=vs.80%29.aspx)调用 EndDialog 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:54:46.260

真正的问题是按钮上的 id 出现了一些混乱，这意味着正在调用处理程序，导致方法运行需要很长时间才能完成。

解决了这个问题，一切正常。谢谢你的帮助

# javascript - 如何在 JS 文件中为 EL 表达式做 console.log

> ID：13034625
> 
> 赞同：2
> 
> 时间：2012-10-23T16:00:52.860
> 
> 标签：javascript, jquery, jsp, el

如何在 JS 文件中为 EL 表达式做 console.log

```
jQuery(document).ready(function() {

    $('.js-bbCheckbox').click(function(event) {
        var bbck = '${tagOne}';
        console.log (bbck);
        console.log (${tagTwo});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T16:04:25.253

首先，您需要了解 JSP（以及 JSTL 和 EL）基本上**生成**HTML（以及 CSS 和 JS）代码。它不与 JavaScript 代码同步运行。如果您在 webbrowser 中右键单击 JSP 页面并执行*查看源代码*，那么您将看到它。

我认为您的具体问题是由于`${tagTwo}`返回一个普通的香草字符串而引起的，而该字符串又被 JS 解释为变量名，因为它没有用引号引起来。

您需要让 JSP 打印一个完整的 JS 字符串而不是变量名。

```
console.log('${tagTwo}'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T22:12:21.297

@Shoaib Ud-Din，如果您不介意一些内联代码，这应该适用于在 DOM 中加载的任何包含的 .js 文件：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>

<c:set var="tagOne" value="Hello World" scope="session" />
<script>
    var bbck = "<c:out value="${tagOne}" />";
    console.info("<c:out value="${tagOne}" />");
</script> 
```

# ruby-on-rails - 即使在安装 activemerchant 和 mechanize (2.5.1) 之后，Ruby on Rails activemerchant.rb 也需要错误

> ID：13034632
> 
> 赞同：0
> 
> 时间：2012-10-23T16:01:09.977
> 
> 标签：ruby-on-rails, activemerchant

完全错误：

```
.rvm/gems/ruby-1.9.3-p194/gems/activemerchant-1.9.4/lib/active_merchant.rb:29:in `require': cannot load such file -- active_support/core_ext/class/inheritable_attributes (LoadError) 
```

嗨，我是第一次尝试使用 activemerchant。即使在 gem install 和 bundle install 之后，如果我运行任何命令，它也会给我同样的错误。

我的 bundle install 命令给了我一个大列表，包括

```
Using activemerchant (1.9.4)  
Using mechanize (2.5.1) 
```

我的宝石文件

```
source 'https://rubygems.org'

gem 'activemerchant'
gem 'mechanize'
...............# more gems 
```

可能是什么问题以及如何解决它。我是 Ruby 新手，所以也许这是一个白痴问题，但我坚持下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:15:08.070

错误消息是关于缺少的[`activesupport`宝石](http://rubygems.org/gems/activesupport)

当您运行`bundle install`或`gem install activemerchant`下载一个版本的`activesupport`gem 时。确保您的安装中有兼容版本的`activesupport`gem。

[`activemerchant gem version 1.9.4`](http://rubygems.org/gems/activemerchant/versions/1.9.4)取决于`activesupport gem version >= 2.3.2.`

此版本的 gem很可能`activesupport`不支持更高版本的`activemerchant`gem。

# javascript - 使用向上/向下箭头键调用函数（并传递参数）

> ID：13034633
> 
> 赞同：0
> 
> 时间：2012-10-23T16:01:13.703
> 
> 标签：javascript, jquery

我有一个调查，其中有许多文本输入采用数值，每个输入都有一对递增/递减按钮。我有一个工作功能如下：

HTML：

```
<div class="text-input-wrapper">
    <input type="text" />
    <div class="buttons inc-dec">
        <button class="increment">Increment</button>
        <button class="decrement">Decrement</button>
    </div>
</div>

function incDec(btnClass)   {

    var input       = $(this).closest('.text-input-wrapper').find('input');
    var inputVal    = $(this).closest('.text-input-wrapper').find('input').val();

    if ($(this).hasClass('increment')) {
        if (inputVal.length == 0) {
            ($(input).val('1'));
        }
        else {
            inputVal++;
            $(input).val(inputVal);
        }
    } // increment

    else if ($(this).hasClass('decrement')) {
        if (inputVal.length == 0) {
            ($(input).val('0'));
        }
        else {
            inputVal--;
            $(input).val(inputVal);
        }
    } // decrement

    return false;

} // function incDec 
```

现在我需要使用向上和向下键启用递增和递减值；我对以下内容进行了尝试，但没有任何乐趣：

```
$(document).keydown( function(eventObject) {
    // UP arrow
    if(eventObject.which==38) {
        var btnClass = "increment";
    } else

    // DOWN arrow
    if(eventObject.which==40) {
        var btnClass = "decrement";
    }
    incDec(btnClass); 
```

我非常感谢有关如何使用向上/向下键触发递增/递减的一些说明，

提前谢谢了，

svs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:11:23.750

您的问题是您的`incDec`函数并非旨在将类作为输入参数 - 它使用调用事件的对象（即按钮上的单击事件）。

这有点hacky，但是像下面这样的东西怎么样？您将单击处理程序分配给每个按钮，然后调用相关按钮的单击事件。

```
$( function ( ) {
    $('button').click( incDec );

    $('input').keydown( function(eventObject) {

        // UP arrow
        if(eventObject.which==38) {
            var btnClass = "increment";
        } else

        // DOWN arrow
        if(eventObject.which==40) {
            var btnClass = "decrement";
        }

        // Invoke the click event for the inc/dec button inside the containing div.
        $('button.'+btnClass, $(this).parent( )).click( );
    });
}); 
```

这是一个带有两个这样的盒子的jsfiddle。当您在文本框中使用向上/向下箭头键时，它会正确递增/递减。[http://jsfiddle.net/zJBEN/](http://jsfiddle.net/zJBEN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:11:10.663

试试这个：

```
$(document).keypress( function(eventObject) {
    var key = (eventObject.keyCode ? eventObject.keyCode : eventObject.which);
    if(key==38) {
        var btnClass = "increment";
    } else
    // DOWN arrow
    if(key==40) {
        var btnClass = "decrement";
    }
    incDec(btnClass);
}); 
```

# javascript - GA // 通过生成唯一输出的类跟踪 onClick 事件？

> ID：13034634
> 
> 赞同：0
> 
> 时间：2012-10-23T16:01:15.987
> 
> 标签：javascript, jquery, google-analytics

下面是我一直在尝试的代码；我基本上只是想用它来跟踪 General GA 的页面；然后分配一个类来跟踪类别中的 onClick 事件并在文件名末尾自动生成 1,2,3。我本质上只是想简化在网站内跟踪我的 onClick 文件；我不想继续手动将 onClick 代码添加到我试图在页面上跟踪的每个文件。**我下面的代码有什么问题？**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35609953-1']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackEvent', 'Downloads', 'JPG', '/downloads/img/LowRes01.jpg']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- GA track all onClicks -->

<script>
$(function(){
    $('.downloadsmall a').attr("onclick", function(i){
        var x='LowRes0'+(i+1)+'.jpg';
        return "_gaq.push(['_trackPageview', '/downloads/img/"+x+"'])";
        return "_gaq.push(['_trackEvent', 'Downloads', 'JPG', '/downloads/img/"+x+"'])";

    });
});​
</script>

<!-- End GA track all onClicks -->

<style>

#wrap {
    width: 940px;
    margin-left: 0 auto;
}

#left {
    width: 50%;
    float: left;
}

#right {
    width: 50%;
    float: right;
}

.downloadsmall {
height: 50px;
width: 200px;
border: 3px dotted #333;
}

</style>

</head>

<body>

    <div id="wrap"><!-- Wrap -->

    <div id="left">

<p class="downloadsmall">
    download: <a href="http://www.google.com">Low Res</a>
</p>

    </div>

  <div id="right">

<p class="downloadsmall">
    download: <a href="http://www.yahoo.com">Low Res</a>
</p>

    </div>
    </div><!-- Wrap --> 
```

**更新 - -**

*以下是根据 Jasper 的响应更新的代码；（谢谢！）我有它，正在等待看看它是如何解决的。*

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<!-- GA track all onClicks -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35609953-1']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackEvent', 'Downloads', 'JPG', '/downloads/img/"+x+"']);

$(function(){
    $('.downloadsmall a').on("click", function(){
        var theHREF = $(this).attr('href'),
            myGAQ   = _gaq || [];
        myGAQ.push(['_trackPageview', theHREF]);
        myGAQ.push(['_trackEvent', 'Downloads', 'JPG', theHREF]);

    });
});

</script>

<!-- End GA track all onClicks --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:06:43.253

您正在从事件处理程序返回一个字符串，它实际上不会做任何事情。相反，只需正常运行代码即可。此外，一旦你`return`从一个函数中获得某些东西，该函数就会停止执行，所以你的第二个`return`甚至都没有运行。

尝试这个：

```
$(function(){
    $('.downloadsmall a').on("click", function(i){
        var x     = 'LowRes0'+(i+1)+'.jpg',
            myGAQ = _gaq || [];
        myGAQ.push(['_trackPageview', '/downloads/img/' + x]);
        myGAQ.push(['_trackEvent', 'Downloads', 'JPG', '/downloads/img/' + x]);

    });
});​ 
```

这段代码实际上是在访问 GA`_gaq`对象并要求它创建一个页面视图和一个事件跟踪信标。

代码仍然不应该工作，因为`i`你的事件处理程序中的参数实际上是`event`对象，而不是索引（我假设它是你想要的）。您可以获得链接的实际 HREF 并将其用作您的跟踪数据：

```
$(function(){
    $('.downloadsmall a').on("click", function(){
        var theHREF = $(this).attr('href'),
            myGAQ   = _gaq || [];
        myGAQ.push(['_trackPageview', theHREF]);
        myGAQ.push(['_trackEvent', 'Downloads', 'JPG', theHREF]);

    });
});​ 
```

# opengl - OpenGL 2D不是矩形区域裁剪

> ID：13034638
> 
> 赞同：6
> 
> 时间：2012-10-23T16:01:27.747
> 
> 标签：opengl, 2d, shader, clipping

我正在使用 OpenGL 编写我自己的 2D GUI 库，我正处于我有一个容器控件的步骤，该控件可以包含图形元素*（如圆角矩形或星形）*和其他子控件......等等......我尝试将子控件和图形元素的呈现剪辑到父控件中。因此，如果子控件溢出容器边界，它不会被渲染。

我的第一个想法是在搜索网络时发现它后使用“剪刀测试”。但问题是我被限制为矩形剪辑，我希望能够在任意区域中剪辑内容，如星形多边形。

我有个主意...

当需要绘制控件及其图形元素时，我会查看我的控件是否必须剪切其内容。如果是，我会在屏幕外纹理的黑色背景上用统一的白色绘制它。然后我将它发送到着色器程序。因此，我在激活着色器的情况下渲染每个子项*（控件和图形元素）*。在这个片段着色器中，对于每个片段，我认为在前面传递的特殊纹理中查看相同的坐标。如果特殊纹理中的片段是白色的，我可以渲染这个片段，因为它在可见区域中。

你认为它可以工作吗？这是一个好主意还是有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:10:36.387

根据您的需要，可以通过多种方式完成。渲染到纹理或模板缓冲区可能是最好的选择。此链接包含更多信息，可帮助您入门：

[OpenGL 裁剪](https://stackoverflow.com/questions/7538270/opengl-clipping)

# cordova - 在 Android 上嵌入 Cordova WebView

> ID：13034644
> 
> 赞同：4
> 
> 时间：2012-10-23T16:01:38.467
> 
> 标签：cordova

我正在使用带有 Android SDK 15 的 phonegap “2.0”，我只想在 Android 项目上嵌入 Cordova WebView，我逐步使用了指南[链接](http://docs.phonegap.com/en/2.1.0/guide_cordova-webview_android.md.html#Embedding%20Cordova%20WebView%20on%20Android)，也是 github [Links](https://github.com/stevengill/CordovaActionView)中的另一个示例， 当我运行时，我的应用程序崩溃并自动停止。日志错误：

```
android.view.InflateException: Binary XML file line #6: Error inflating class org.apache.cordova.CordovaWebView 
```

我的 xml 文件“main.xml”：

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent">
    <org.apache.cordova.CordovaWebView android:id="@+id/phoneGapView" android:layout_width="fill_parent" android:layout_height="fill_parent" />
</LinearLayout > 
```

提前谢谢.. :)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T21:56:24.830

你可能有和我一样的错误。一旦我在我的活动中实现了从 CordovaInterface 派生的方法，特别是 getActivity 方法，应用程序就可以正常启动了。

```
@Override
public Activity getActivity() {
  return this;
} 
```

请注意，默认实现返回 null 而 CordovaWebView 很可能需要适当的 Activity 实例进行初始化。

注意：我使用的是 PhoneGap 2.1.0

# php - plesk 服务器上的 PHP Cron 作业，无法加载 mssql.so

> ID：13034646
> 
> 赞同：0
> 
> 时间：2012-10-23T16:01:40.040
> 
> 标签：php, cron, plesk

我已经在运行 plesk 的新服务器上设置了我的第一个 cron。该脚本无法访问数据库，只会抛出此错误：

*PHP 警告：PHP 启动：无法加载动态库 '/usr/lib64/php/modules/mssql.so' - /usr/lib64/php/modules/mssql.so：无法打开共享对象文件：没有这样的文件或目录在第 0 行的未知中*

我使用以下设置来运行 cron 作业：

`php /path/to/my/script.php`

并且还尝试过：

`/usr/bin/php /path/to/my/script.php`

脚本中没有问题，我手动测试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:06:57.843

服务器可能没有安装 mssql 模块。

```
zipp@zeratul:~$ sudo apt-cache search php5 mssql
php5-sybase - Sybase / MS SQL Server module for php5 
```

# php - 使用分页时，PHP 联系表单错误消息显示在同一页面上

> ID：13034650
> 
> 赞同：0
> 
> 时间：2012-10-23T16:01:41.277
> 
> 标签：php, url, action

我有一个联系表格，当您单击“完成订单”时，它会检查某些字段是否为空。它应该刷新页面并显示错误消息。

但是我使用页面重命名（一些简单的方法来重命名页面并在同一个php页面上有多个页面）

所以我把联系表格放在 order.php?action=order

这是代码：

```
<?php
if(isset($_GET['action']) && $_GET['action'] != '') {
   $action = $_GET['action'];
} else {

}
?>
<?php
if(isset($action)) {
  if($action == 'order') {
?>
<div class="container">

            <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" id="contactform">
                <fieldset>

                    <?php if(isset($hasError)) { //If errors are found ?>
                        <p class="alert-message error">Opps! Looks like you forgot to fill some specify field, please <b>go back</p> and fill the empty field.</p>

                    <?php  } ?>

                    <?php if(isset($emailSent) && $emailSent == true) { //If email is sent ?>
                        <div class="alert-message success">
                            <p style="color: white;" ><strong>Your Order has been Successfully Sent!</strong></p>
                            <p style="color: white;" >Thank you for submitting your order, <strong><?php echo $pname;?></strong>! Please check your Private Messages folder at <strong><?php echo $forum;?></strong>, as we will get back to you soon. You will redirect back to homepage in less than 5 seconds.<meta HTTP-EQUIV="REFRESH" content="5; url=http://justxp.plutohost.net/jonydesigns/index.php"></p>
                        </div>
                    <?php } ?>
                        <div class="formwarp">
                        <div class="tos1">
<input type="checkbox" id="new_info_yes" class="box1"> I agree to the <a href="#" style="color: #4fc5cf;" >Terms of Service</a>.
    </div><br />
<div id="new_info_form">
                    <div class="clearfix">
                        <label for="subject">
                            <span class="coloring">Forums Name:</span>
                        </label>

                                            <div class="input">
                            <select name="forumn" id="forumn" class="span6 required" role="select" aria-required="true">
                                <option value="slct">Please select a forum</option>
                                <option value="hackforums">Hackforums</option>
                                <option value="sythe">Sythe</option>
                                <option value="rune-server">Rune-Server</option>
                            </select>
                        </div>
                    <br />
<div id="slct" class="colors">You haven't selected any forum.</div>
<div id="hackforums" class="colors" style="display:none"> <span id="brdr">HackForums:</span> Discount Percent: <font color="green">10%</font> </div>
<div id="sythe" class="colors" style="display:none"> <span id="brdr">Sythe:</span> Discount Percent: <font color="green">15%</font> </div>
<div id="rune-server" class="colors" style="display:none"> <span id="brdr">Rune-Server:</span> Discount Percent: <font color="green">15%</font> </div>
<script type="text/javascript">
    $(function() {
        $('#forumn').change(function(){
            $('.colors').hide();
            $('#' + $(this).val()).show();
        });
    });
    </script> </div>
<br />
                    <div class="clearfix">
                        <label for="name">
                            <span class="coloring">Forums Username:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="forumuser" id="forumuser" value="" class="span6 required" role="input" aria-required="true" />
                        </div>
                    </div>

                    <div class="clearfix">
                        <label for="phone">
                            <span class="coloring">Personal Name:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="pname" id="pname" value="" class="span6 required" role="input" aria-required="true" />
                        </div>
                    </div>

                    <div class="clearfix">
                        <label for="email">
                            <span class="coloring">Email Address:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="email" id="email" value="" class="span6 required email" role="input" aria-required="true" />
                        </div>
                    </div>
                                        <div class="clearfix">
                        <label for="email">
                            <span class="coloring">PayPal Email Address:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="ppemail" id="ppemail" value="" class="span6 required email" role="input" aria-required="true" />
                        </div>
                    </div>

                    <div class="clearfix">
                        <label for="subject">
                            <span class="coloring">Product Type</span>
                        </label>
                        <div class="input">
                            <select name="product" id="product" class="span6 required" role="select" aria-required="true">
                                <option>Please select a product\project</option>
                                <option>PSD to HTML</option>
                                <option>Web Design</option>
                                <option>Thread Design</option>
                                <option>Logo Design</option>
                                <option>Banner Design</option>
                                <option>Thread design + Signature</option>
                                <option>Other (Please type in additional information field)</option>
                            </select>
                        </div>
                    </div><br />
<div style="margin-left: -13%;" id="line"></div><br />
                    <div class="clearfix">
                        <span class="coloring">Information</span>
                        <div class="input">
                            <textarea rows="8" name="message" id="message" class="span10 required" role="textbox" aria-required="true"></textarea>
                        </div>
                    </div>
                    <div class="clearfix">
                        <span class="coloring">View Information</span>
                        <div class="input">
                            <textarea rows="8" name="messageview" id="messageview" class="span10 required" role="textbox" aria-required="true"></textarea>
                        </div>
                    </div>
                    <div class="clearfix">
                        <label for="phone">
                            <span class="coloring">Additional Information:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="additional" id="additional" value="Additional information regarding the product" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;" class="span6 required" role="input" aria-required="true" />
                        </div>
                    </div>
                    <div class="clearfix">
                        <label for="phone">
                            <span class="coloring">PSD link:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="psd" id="psd" value="PSD link here" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;" class="span6 required" role="input" aria-required="true" />
                        </div>
                    </div>
                    <div class="clearfix">
                        <label for="phone">
                            <span class="coloring">Your Budget:</span>
                        </label>
                        <div class="input">
                            <input type="text" name="money" id="money" value="$0.00 Enter your budget" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;" class="span6 required" role="input" aria-required="true" />
                        </div>
                    </div>
                    <div class="actionss">
                        <input type="submit" value="Complete Order" name="submit" id="submitButton" title="Click here to submit your message!" />
                    </div>
                </fieldset>
            </form>
            </div>
</div>
</div>
<script type="text/javascript">
$(document).ready(function(){

    $('input#upload_yes').change(function(){
        if($(this).is(':checked')) {
            $("#upload_form").show();
        } else {
            $("#upload_form").hide();
        }
    });

    $('input#new_info_yes').change(function(){
         if($(this).is(':checked')) {
                $("#new_info_form").slideDown(500);
        } else {
                $("#new_info_form").delay(300).slideUp(500);;
        }   
    });

    //Trigger the change event so the divs are initially shown or hidden.
    $('input[type=checkbox]').trigger('change');

});
</script>
<?php
  } 
  elseif($action == 'contact') {
  ?>
 <!-- action=contact info here -->
<?php
  }
}
?> 
```

这将启动页面 ?action=order

```
<?php
if(isset($action)) {
  if($action == 'order') {
?> 
```

它显示表单并且一切正常。但是当您填写所有内容并单击完成订单时，它会重定向到 order.php 并且它不显示任何警报，如果订单已发送，它应该显示此警报：

```
 <?php if(isset($emailSent) && $emailSent == true) { //If email is sent ?>
                    <div class="alert-message success">
                        <p style="color: white;" ><strong>Your Order has been Successfully Sent!</strong></p>
                        <p style="color: white;" >Thank you for submitting your order, <strong><?php echo $pname;?></strong>! Please check your Private Messages folder at <strong><?php echo $forum;?></strong>, as we will get back to you soon. You will redirect back to homepage in less than 5 seconds.<meta HTTP-EQUIV="REFRESH" content="5; url=http://justxp.plutohost.net/jonydesigns/index.php"></p>
                    </div>
                <?php } ?> 
```

如果某些内容为空，则应显示此错误：

```
 <?php if(isset($hasError)) { //If errors are found ?>
                    <p class="alert-message error">Opps! Looks like you forgot to fill some specify field, please <b>go back</p> and fill the empty field.</p>

                <?php  } ?> 
```

但它根本不显示错误，它所做的只是将您重定向到 order.php 页面，但如果成功，它只会发送电子邮件但不会显示任何警报。

我该如何解决它或导致它发生的原因？

[http://justxp.plutohost.net/jonydesigns/order.php?action=order](http://justxp.plutohost.net/jonydesigns/order.php?action=order)

抱歉，代码很大，我只是不知道如何更清楚地问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:05:52.933

当该错误发生时，您不会停止脚本执行，因此无论如何代码的测试仍在继续。

这不是一个理想的解决方案，但你的代码的编写方式......

你可以在这里放一个 die() 函数来停止它：

```
<?php if(isset($hasError)) { //If errors are found ?>
  <p class="alert-message error">Opps! Looks like you forgot to fill some specify field, please <b>go back</p> and fill the empty field.</p>
  die(); //See me here!
<?php  } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:28:00.153

一个权利，我解决了它，

我将错误部分移出页面，放在开头，现在它检查是否有错误，如果是，它将显示错误或警报。

不好意思发这么简单的问题^^

# java - 尝试使用此代码将 char 数组转换为 Java 中的整数数组

> ID：13034652
> 
> 赞同：1
> 
> 时间：2012-10-23T16:01:55.083
> 
> 标签：java

我正在尝试将字符数组转换为整数，因此我可以获得 ascii 代码，但我拥有的代码似乎不起作用。

```
import javax.swing.*;
import java.text.*;
import java.util.*;
import java.lang.*;

public class Encrypt {

public static void main(String[] args) {

String phrase = JOptionPane.showInputDialog(null, "Enter phrase to be messed with ");
char[] charArray = phrase.toCharArray();

for (int count = 0; count < charArray.length; count++) {
int digit = ((int)charArray[count]);

System.out.println(digit[count]);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:02:47.543

`digit`是一个`int`类型原始变量不能被视为一个数组

```
digit[count]) 
```

只需使用

```
digit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:03:46.480

您不需要显式转换它。您可以简单地将其分配给 int。参见[5.1.2。扩大基元转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)

例子：

```
 char[] charArray = "test".toCharArray();

        for (int count = 0; count < charArray.length; count++) {
            int digit = charArray[count];

            System.out.println(digit);

        } 
```

输出：

```
116
101
115
116 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:16:43.823

试试这个方法...

```
char[] charArray = phrase.toCharArray();

int[] intArray = new int[charArray.length];

int i=0;

for (char c : charArray){

      intArray[i] = c;
      i++;

} 
```

# templates - G ++：从模板调用函数：未定义的符号

> ID：13034655
> 
> 赞同：2
> 
> 时间：2012-10-23T16:02:11.460
> 
> 标签：templates, g++

我无法使用 Comeau 和 G++ 编译器在 C++ 中编译小代码。我认为我的代码有问题。这里是：

```
template < typename T > void f(T t) { g(t); }
void g(int){}
int main() {
    int a = 0;
    f(a);
    return 0;
} 
```

`g()`编译器找不到此处的函数。但是如果我使用用户定义的类型（不是`int`），它编译OK：

```
template < typename T > void f(T t) { g(t); }
struct A {};
void g(A a) {}
int main() {
    A a;
    f(a);
    return 0;
} 
```

谁能帮我用int（double，char等）编译这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:25:45.257

也许不相关，但在 VC++ 2012 中，这会为行中的 a 提供未初始化的变量警告`int a`。第二个示例（由于缺少后面的大括号而*无法*`void g(A a)`编译）创建一个具有默认构造函数的结构，因此不会发生错误。尝试在顶部代码中初始化您的 int 变量，看看是否仍然出现错误。

# c++ - 空指针检查线程安全

> ID：13034669
> 
> 赞同：0
> 
> 时间：2012-10-23T16:03:13.507
> 
> 标签：c++, multithreading, pointers, thread-safety

我正在使用互斥锁保护指针，以进行已经这样的写入

```
// thread1
if(pointer)
{
   boost::mutex::scoped_lock lock(pointer_mutex);
   if(pointer)
      pointer->DoStuff();
}

// thread2
if(pointer)
{
   boost::mutex::scoped_lock lock(pointer_mutex);
   if(pointer)
      pointer = anotherPointer;
}

// thread3
if(pointer)
{
   boost::mutex::scoped_lock lock(pointer_mutex);
   pointer = 0;
} 
```

我不想把那个互斥锁放在块之外，因为指针在 99.999 的时候是空的。

这工作正常，没有崩溃，但我没有足够的经验声明它是线程安全的。

我的问题是：

if(pointer) 指针 = 0; 指针 = 另一个指针；原子？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:11:32.470

这不安全，“双重检查锁定”也不安全。请**务必**阅读[本文](http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:05:14.173

这在形式上是非法的，因为您正在引入数据竞赛。而且我不只是在谈论一些微妙的非原子读取，而是非常简单的另一个线程可能已经在你的检查和获取你的锁之间操纵指针。

但是，这里有一种方法可以让您对这种暴行至少感觉好一点：

```
if (pointer)  // dirty read, eek
{
    boost::mutex::scoped_lock lock(pointer_mutex);
    if (pointer) { pointer = 0; }  // reliable
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:13:10.987

我会将互斥锁放在块之外。

我不知道 boost::mutex 的内部结构，但我认为它是以理智的方式编写的。一个互斥锁/解锁可以在大约 10 个周期内实现。总是锁定它真的不会是那么大的性能问题。

对于多线程，您真的希望您的系统在 100% 的时间里都是线程安全的。很多时候，在测试中，MT 系统看起来 100% 都运行良好，但使用模式略有不同或负载量不同，问题开始发生。而且 MT 崩溃可能真的很难调试，因为错误可能发生在一个线程中，但会导致另一个线程崩溃。

@edit：您是否希望多个线程能够使用指针，但一次只有一个线程能够更改它？如果是这样，请使用读/写锁。多个线程可以读取，但只有一个线程可以写入，并且会排除读者。

读/写锁的开销比单纯的互斥锁要大一点，但多线程可以“doStuff”这一事实弥补了这一点。并将读写锁放在块外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T16:14:45.083

（最初OP在获得互斥锁后没有再次检查thread1中的指针，这意味着它可能已被thread3变为null）。

然而，即使有修复，编译器也有可能过度优化并“缓存”它在检查中看到的值。（双重检查锁定问题）。

关于这个问题，C++11 中会有原子版本。

```
if( pointer )
    pointer == 0; 
```

不是原子的。指针可以在这些调用之间改变。

这样做的问题

```
if( pointer )
{
     mutex_lock lock( mutex );
     if( pointer )
     {
         pointer = 0;
     }
} 
```

更多的是告诉编译器不要“优化”并认识到指针可能在你第一次检查它和你第二次检查它之间发生了变化。

您可以通过多种方式尝试智取编译器。最明显的方法是使用`volatile`关键字，尽管遗憾的是标准并没有强制编译器遵守它。您可以使用返回指针的函数并使该函数成为虚拟函数或类似的东西，以防止编译器内联它。

或者你可以在这种情况下使用汇编的极端路径。

顺便说一句，如果情况需要，请使用`boost::once`.

# ruby-on-rails - 运行faye服务器时的运行时错误eventmachine

> ID：13034673
> 
> 赞同：1
> 
> 时间：2012-10-23T16:03:19.027
> 
> 标签：ruby-on-rails, eventmachine, faye

在 Rails 应用程序上运行 faye 服务器时出现此错误。我已经安装了 eventmachine gem，并且还需要在 faye 的初始化文件中使用 eventmachine。

```
/Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/eventmachine-1.0.0/lib/eventmachine.rb:664:in `connect_server': eventmachine not initialized: evma_connect_to_server (RuntimeError)
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/eventmachine-1.0.0/lib/eventmachine.rb:664:in `bind_connect'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/eventmachine-1.0.0/lib/eventmachine.rb:640:in `connect'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-websocket-0.4.6/lib/faye/websocket/client.rb:19:in `initialize'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/web_socket.rb:51:in `new'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/web_socket.rb:51:in `connect'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/web_socket.rb:26:in `usable?'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/web_socket.rb:11:in `usable?'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/transport.rb:82:in `block in get'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:103:in `call'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:103:in `block in async_each'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:110:in `call'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:110:in `block in async_each'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:117:in `call'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:117:in `block in async_each'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:119:in `call'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye.rb:119:in `async_each'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/transport/transport.rb:97:in `get'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/protocol/client.rb:311:in `select_transport'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/faye-0.8.6/lib/faye/protocol/client.rb:35:in `initialize'
from /Users/vivekvivek/website/faye.ru:38:in `new'
from /Users/vivekvivek/website/faye.ru:38:in `block in <main>'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
from /Users/vivekvivek/website/faye.ru:1:in `new'
from /Users/vivekvivek/website/faye.ru:1:in `<main>'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:137:in `start'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/bin/rackup:4:in `<top (required)>'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/bin/rackup:19:in `load'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/bin/rackup:19:in `<main>'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/vivekvivek/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我突然收到这个错误，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:15:47.503

```
require 'faye'
require 'eventmachine'

EM.run do
  client = Faye::Client.new('http://localhost:9292/faye')
  publication = client.publish("/faye/new_chats", {
      "user" => "ruby-logger",
      "message" => "Got your message!"
  })
  publication.callback do
    puts "[PUBLISH SUCCEEDED]"
  end
  publication.errback do |error|
    puts "[PUBLISH FAILED] #{error.inspect}"
  end
end 
```

# php - 如何通过检查 group1 中的单选按钮来检查 group2 中的单选按钮？

> ID：13034684
> 
> 赞同：0
> 
> 时间：2012-10-23T16:03:52.710
> 
> 标签：php, javascript, jquery

我有两个广播组。代码示例如下：

```
<form name="form" method="post" action="">
<label><input type="radio" name="RadioGroup1" value="radio" id="Radio1">Radio 1</label><br>
<label><input type="radio" name="RadioGroup1" value="radio" id="Radio2">Radio 2</label><br>
<label><input type="radio" name="RadioGroup2" value="radio" id="Radio3">Radio 3</label><br>
<label><input type="radio" name="RadioGroup2" value="radio" id="Radio4">Radio 4</label>
</form> 
```

我不想做的是，当我选中 Radio 1 时，Radio 3 也被自动选中，当我选择 Radio 2 时，Radio 4 被选中。因此，如果选择 Radio 1，则选中 Radio 1 和 Radio 3，如果选择 Radio 2，则选中 Radio 2 和 Radio 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:08:11.947

您可以为 radio1 和 radio2 执行快速 jQuery 单击处理程序，以分别设置 radio3 和 radio4 的 .checked 属性。请注意，我使用 $("#radio3")[0].checked 上的 [0] 索引来引用 html 元素而不是 jQuery 对象。还要注意使用 this 而不是 $(this) 来引用当前单击的 html 元素。

```
$("#radio1").click(function(){
    $("#radio3")[0].checked = this.checked
});

$("#radio2").click(function(){
    $("#radio4")[0].checked = this.checked
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:10:52.423

您可以这样做，在一个处理程序中处理两个单选按钮：

```
$('input[name=RadioGroup1]').click(function(){
    var i = parseInt(this.id.slice(-1), 10)+2;
    $('#Radio'+i).attr('checked', 'checked');
});​ 
```

[示范](http://jsfiddle.net/yXxfn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:07:24.880

```
$('#Radio1').on('change',function() {
    var val = $(this).is(':checked');
    $('#Radio3').prop('checked',val);
}); 
```

# objective-c - iOS - 如何设计出现在所有视图中的组件？

> ID：13034686
> 
> 赞同：4
> 
> 时间：2012-10-23T16:03:57.280
> 
> 标签：objective-c, ios, design-patterns, cocoa-design-patterns

假设 iOS 应用程序显示一个元素，当单击该元素时，该元素会调用该元素的操作菜单（例如 UIActionSheet）。需要注意的是，*许多*可点击元素（例如这个元素）可能出现在应用程序的每个视图中，因此在任何情况下也必须处理操作菜单及其代表。

例如，可点击元素可能是某个产品的照片（带有图像背景的 UIButton），它可能会出现在许多不同的屏幕中，并且当点击时，会向用户呈现诸如“购买”、“查看详情”等选项在。

您将如何以模块化和可重用的方式设计/实现具有相关行为的此类组件？

将功能保存在一组独立的类中很重要，这些类可以轻松地单独测试并在需要时打开/关闭，并且不需要将代码插入到可能使用该功能的每个控制器中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:16:45.983

如果您正在实现一个可以出现在多个视图中的应用程序范围的 UI 元素，我会将您的 UIViewController 子类化（即 ABCViewController）。我通常在每个项目开始时这样做，以防我需要在应用程序范围内实现某些东西，并且我的所有视图都是该视图控制器的子类，除了头文件中的一个单词之外没有任何代码更改。然后在你的 ABCViewController 中实现一个函数来显示菜单和一个函数来关闭它。与 Singleton 类相比，我发现内存管理对象和回调 ViewController 更容易，而无需处理委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:17:12.777

创建一个代表您想要的功能的单例类怎么样？然后，您每次都可以调用单例对象。

```
@interface MyClickableButtonWithImage : NSObject {
    UIButton *aButton;
}
+(MyClickableButtonWithImage)getInstance;
-(IBAction)buttonClicked:(id)sender;
@property (nonatomic, strong) IBOutlet UIButton *aButton;

@end

// In your .m files, this will get the singleton object
MyClickableButtonWithImage *myCBWI = [MyClickableButtonWithImage getInstance]; 
```

# c# - 如何使用 Bing 地图在 Windows 商店应用程序中实现多个新图钉的方法

> ID：13034689
> 
> 赞同：1
> 
> 时间：2012-10-23T16:04:00.637
> 
> 标签：c#, windows-8, bing-maps, windows-store-apps, pushpin

我正在使用 C# 制作一个 Windows 应用商店应用程序，并且需要一些帮助来了解当点击地图上的图钉时的方法。到目前为止，我创建了一个名为 currentPin 的 Pushpin，它是在 XAML 代码中创建的。我还为这里的 Tapped 事件提供了一个参考，称为 pushpin_Tapped。

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <bm:Map x:Name="MyMap" Credentials="{StaticResource BingMapsApiKey}" Holding="map_Held">

            <bm:Map.Children>
                <bm:Pushpin x:Name="pin" Tapped="pushpinTapped">

                </bm:Pushpin>
            </bm:Map.Children>
        </bm:Map>
    </Grid> 
```

然后，我将 currentPin 放在 MainPage.xaml.cs 代码中 OnNavigatedTo 方法中的当前位置。我还创建了点击此图钉时的方法。在这种方法中，我显示了一个对话框，用于显示点击 currentPin 的时间。

```
private async void pushpinTapped(object sender, Windows.UI.Xaml.Input.TappedRoutedEventArgs e)
            {

                var x = MapLayer.GetPosition(pin);
                MessageDialog dialog = new MessageDialog("You are here " + x.Latitude + " " + x.Longitude);
                await dialog.ShowAsync();
            } 
```

然后，我有一种方法可以在用户持有地图时在某个位置放置一个新的图钉，代码如下：

```
private void map_Held(object sender, HoldingRoutedEventArgs e)        
{            
    Debug.WriteLine("You held at" + DateTime.Now.ToString() + "" + e.GetPosition(MyMap));            
    var pos = e.GetPosition(MyMap);            
    Location location;            
    MyMap.TryPixelToLocation(pos, out location);                          
    Pushpin pin = new Pushpin();            
    MyMap.Children.Add(pin);                        
    MapLayer.SetPosition(pin, location);                       
} 
```

我知道它可能正盯着我看，但我对如何获取消息框或对话框或点击每个新引脚时发生的任何事情一无所知。有人可以解释一下吗？谢谢，艾梅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:09:55.033

```
private void map_Held(object sender, HoldingRoutedEventArgs e)        
{            
    Debug.WriteLine("You held at" + DateTime.Now.ToString() + "" + e.GetPosition(MyMap));            
    var pos = e.GetPosition(MyMap);            
    Location location;            
    MyMap.TryPixelToLocation(pos, out location);                          
    Pushpin pin = new Pushpin();
    pin.Tapped += pushpinTapped;  // <<<<<<=====LOOK AT THIS
    MyMap.Children.Add(pin);                        
    MapLayer.SetPosition(pin, location);                       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:31:32.207

在 Map_Held 中，为点击的事件添加处理程序...

```
private void map_Held(object sender, HoldingRoutedEventArgs e)        
{            
    Debug.WriteLine("You held at" + DateTime.Now.ToString() + "" + e.GetPosition(MyMap));            
    var pos = e.GetPosition(MyMap);            
    Location location;            
    MyMap.TryPixelToLocation(pos, out location);                          
    Pushpin newpin = new Pushpin();            
    newpin.Tapped += pushpin_Tapped;
    MyMap.Children.Add(newpin);                        
    MapLayer.SetPosition(newpin, location);                       
} 
```

并在您点击的事件处理程序中，将对您的 pin 的引用从`pin`以下更改。

```
private async void pushpinTapped(object sender, Windows.UI.Xaml.Input.TappedRoutedEventArgs e)
{
    PushPin tappedpin = sender as PushPin;  // gets the pin that was tapped
    if(null == tappedpin) return;           // null check to prevent bad stuff if it wasn't a pin.
    var x = MapLayer.GetPosition(tappedpin);
    MessageDialog dialog = new MessageDialog("You are here " + x.Latitude + " " + x.Longitude);
    await dialog.ShowAsync();
} 
```

# php - PHP“文件意外结束...”语法错误

> ID：13034694
> 
> 赞同：0
> 
> 时间：2012-10-23T16:04:26.787
> 
> 标签：php

我已经下载了一个 php web 应用程序（Studip）。当我转到 index.php 时，我收到以下错误：

`Parse error: syntax error, unexpected end of file in /var/www/html/studip/public/index.php on line 248`

我检查了语法，没有语法错误。还有其他导致此错误的原因吗？

这是文件：

```
<?php
# Lifter002: TODO
# Lifter007: TODO
# Lifter003: TODO
# Lifter010: TODO
/**
 * index.php - Startseite von Stud.IP (anhaengig vom Status)
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of
 * the License, or (at your option) any later version.
 *
 * @author      Stefan Suchi <suchi@gmx.de>
 * @author      Ralf Stockmann <rstockm@gwdg.de>
 * @license     http://www.gnu.org/licenses/gpl-2.0.html GPL version 2
 * @category    Stud.IP
 */

require '../lib/bootstrap.php';

unregister_globals();

page_open(array('sess' => 'Seminar_Session', 'auth' => 'Seminar_Default_Auth', 'perm' => 'Seminar_Perm', 'user' => 'Seminar_User'));

$auth->login_if(Request::get('again') && ($auth->auth['uid'] == 'nobody'));

// database object
$db=new DB_Seminar;

// evaluate language clicks
// has to be done before seminar_open to get switching back to german (no init of i18n at all))
if (Request::get('set_language')) {
    if(array_key_exists(Request::get('set_language'), $GLOBALS['INSTALLED_LANGUAGES'])) {
        $_SESSION['forced_language'] = Request::get('set_language');
        $_SESSION['_language'] = Request::get('set_language');
    }
}

// store  user-specific language preference
if ($auth->is_authenticated() && $user->id != 'nobody') {
    // store last language click
    if (strlen($_SESSION['forced_language'])) {
        $db->query("UPDATE user_info SET preferred_language = '".$_SESSION['forced_language']."' WHERE user_id='$user->id'");
        $_SESSION['_language'] = $_SESSION['forced_language'];
    }
    $_SESSION['forced_language'] = null;
}

include 'lib/seminar_open.php'; // initialise Stud.IP-Session
require_once 'config.inc.php';
require_once 'lib/functions.php';
require_once 'lib/visual.inc.php';
require_once 'lib/classes/MessageBox.class.php';
include_once 'lib/classes/RSSFeed.class.php';
// -- hier muessen Seiten-Initialisierungen passieren --

// -- wir sind jetzt definitiv in keinem Seminar, also... --
closeObject();

if (get_config('NEWS_RSS_EXPORT_ENABLE') && ($auth->is_authenticated() && $user->id != 'nobody')){
    $rss_id = StudipNews::GetRssIdFromRangeId('studip');
    if ($rss_id) {
        PageLayout::addHeadElement('link', array('rel'   => 'alternate',
                                                 'type'  => 'application/rss+xml',
                                                 'title' => 'RSS',
                                                 'href'  => 'rss.php?id='.$rss_id));
    }
}

PageLayout::setHelpKeyword("Basis.Startseite"); // set keyword for new help
PageLayout::setTitle(_("Startseite"));
Navigation::activateItem('/start');
PageLayout::setTabNavigation(NULL); // disable display of tabs

// Start of Output
include 'lib/include/html_head.inc.php'; // Output of html head
include 'lib/include/header.php';

// only for authenticated users
if ($auth->is_authenticated() && $user->id != 'nobody') {

    UrlHelper::bindLinkParam('index_data', $index_data);

    //Auf und Zuklappen News
    require_once 'lib/showNews.inc.php';
    process_news_commands($index_data);

    // Auf- und Zuklappen Termine
    if (Request::get('dopen')) {
        $index_data['dopen'] = Request::option('dopen');
    }
    if (Request::get('dclose')) {
        unset($index_data['dopen']);
    }

    if ($perm->have_perm('root')) { // root
        $ueberschrift = _("Startseite f�r Root bei Stud.IP");
    } elseif ($perm->have_perm('admin')) { // admin
        $ueberschrift = _("Startseite f�r AdministratorInnen bei Stud.IP");
    } elseif ($perm->have_perm('dozent')) { // dozent
        $ueberschrift = _("Startseite f�r DozentInnen bei Stud.IP");
    } else { // user, autor, tutor
        $ueberschrift = _("Ihre pers�nliche Startseite bei Stud.IP");
    }

    // Warning for Users
    $help_url = format_help_url("Basis.AnmeldungMail");

    // Display banner ad
    if (get_config('BANNER_ADS_ENABLE')) {
        require_once 'lib/banner_show.inc.php';
        banner_show();
    }

    // add skip link
    SkipLinks::addIndex(_("Navigation Startseite"), 'index_navigation');

// display menue
?>
    <div class="index_container">
        <table class="index_box">
            <tr>
                <td class="topic" style="font-weight: bold;" colspan="2">
                    <?= Assets::img('icons/16/white/home.png', array('class' => 'middle')) ?>
                    <?= htmlReady($ueberschrift) ?>
                </td>
            </tr>
            <? if ($perm->get_perm() == 'user') : ?>
            <tr>
                <td class="blank" style="padding: 1em 1em 0em 1em;" colspan="2">
                    <?= MessageBox::info(sprintf(_('Sie haben noch nicht auf Ihre %s Best�tigungsmail %s geantwortet.'), '<a href="'.$help_url.'" target="_blank">', '</a>'),
                            array(_('Bitte holen Sie dies nach, um Stud.IP Funktionen wie das Belegen von Veranstaltungen nutzen zu k�nnen.'),
                                sprintf(_('Bei Problemen wenden Sie sich an: %s'), '<a href="mailto:'.$GLOBALS['UNI_CONTACT'].'">'.$GLOBALS['UNI_CONTACT'].'</a>'))) ?>
                </td>
            </tr>
            <? endif ?>
            <tr>
                <td class="blank" valign="top" style="padding-left:25px; width:80%;" id="index_navigation">
                <? foreach (Navigation::getItem('/start') as $nav) : ?>
                    <? if ($nav->isVisible()) : ?>
                        <div class="mainmenu">
                        <? if (is_internal_url($url = $nav->getURL())) : ?>
                            <a href="<?= URLHelper::getLink($url) ?>">
                        <? else : ?>
                            <a href="<?= htmlspecialchars($url) ?>" target="_blank">
                        <? endif ?>
                        <?= htmlReady($nav->getTitle()) ?></a>
                        <? $pos = 0 ?>
                        <? foreach ($nav as $subnav) : ?>
                            <? if ($subnav->isVisible()) : ?>
                                <font size="-1">
                                <?= $pos++ ? ' / ' : '<br>' ?>
                                <? if (is_internal_url($url = $subnav->getURL())) : ?>
                                    <a href="<?= URLHelper::getLink($url) ?>">
                                <? else : ?>
                                    <a href="<?= htmlspecialchars($url) ?>" target="_blank">
                                <? endif ?>
                                <?= htmlReady($subnav->getTitle()) ?></a>
                                </font>
                            <? endif ?>
                        <? endforeach ?>
                        </div>
                    <? endif ?>
                <? endforeach ?>
                </td>
                <td class="indexpage" align="right" valign="top"><img src="<?=$GLOBALS['ASSETS_URL']?>images/blank.gif" width="390" height="100" alt=""></td>
            </tr>
        </table>
<?

    // display news
    show_news('studip', $perm->have_perm('root'), 0, $index_data['nopen'], "", null, $index_data);

    // display dates
    if (!$perm->have_perm('admin')) { // only dozent, tutor, autor, user
        include 'lib/show_dates.inc.php';
        $start = time();
        $end = $start + 60 * 60 * 24 * 7;
        if (get_config('CALENDAR_ENABLE')) {
            show_all_dates($start, $end, TRUE, FALSE, $index_data['dopen']);
        } else {
            show_dates($start, $end, $index_data['dopen']);
        }
    }

    // display votes
    if (get_config('VOTE_ENABLE')) {
        include 'lib/vote/vote_show.inc.php';
        show_votes('studip', $auth->auth['uid'], $perm);
    }
} else { //displaymodul for nobody
    $index_nobody_template = $GLOBALS['template_factory']->open('index_nobody');
    $db->query("SELECT count(*) from seminare");
    $db->next_record();
    $index_nobody_template->set_attribute('num_active_courses', $db->f(0));
    $db->query("SELECT count(*) from auth_user_md5");
    $db->next_record();
    $index_nobody_template->set_attribute('num_registered_users', $db->f(0));
    $index_nobody_template->set_attribute('num_online_users', get_users_online_count(10));

    if ($_REQUEST['logout'])
    {
        $index_nobody_template->set_attribute('logout', true);
    }

    echo '<div class="index_container" style="width: 750px; margin: 0 auto !important;">';
    echo $index_nobody_template->render();
}

$layout = $GLOBALS['template_factory']->open('shared/index_box');

// Pr�fen, ob PortalPlugins vorhanden sind.
$portalplugins = PluginEngine::getPlugins('PortalPlugin');

foreach ($portalplugins as $portalplugin) {
    $template = $portalplugin->getPortalTemplate();

    if ($template) {
        echo $template->render(NULL, $layout);
        $layout->clear_attributes();
    }
}

page_close();

if (is_object($user) && $user->id != 'nobody') {
    $db->query(sprintf("SELECT * FROM rss_feeds WHERE user_id='%s' AND hidden=0 ORDER BY priority",$auth->auth["uid"]));
    while ($db->next_record()) {
        if ($db->f("name")!="" && $db->f("url")!="") {
            $feed = new RSSFeed($db->f("url"));
            if ($db->f('fetch_title') && $feed->ausgabe->channel['title']) {
                $feedtitle = $feed->ausgabe->channel['title'];
            } else {
                $feedtitle = $db->f("name");
            }

            ob_start();
            $feed->rssfeed_start();
            echo $layout->render(array('title' => $feedtitle, 'icon_url' => 'icons/16/white/rss.png', 'admin_url' => 'edit_about.php?view=rss', 'content_for_layout' => ob_get_clean()));
        }
    }
}

echo '</div>';

include 'lib/include/html_end.inc.php'; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T16:40:08.387

您的服务器是否支持短开放标签？检查你的ini。如果没有，请启用它们。如果你不能然后替换`<?`为`<?php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T17:00:12.323

您可能需要更改`<?`为`<?php` （特别是如果您使用的是 localhost）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T13:08:25.547

这对我来说很好。它避免了 xml 标签并准备好替换。

**正则表达式**：`(<\?[^(php|xml)])`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T17:40:47.920

第 170 行的 php open 标记似乎没有结束。

```
 <?

    // display news show_news('studip', $perm->have_perm('root'), 0,$index_data['nopen'], "", null, $index_data);
     ..... ..... ....
     include 'lib/include/html_end.inc.php'; 
```

所以它可能你需要一个结束标签。

# ruby-on-rails - 如何根据来自 3rd 方 API 的请求在 Rails 应用程序中重定向浏览器

> ID：13034698
> 
> 赞同：0
> 
> 时间：2012-10-23T16:04:27.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, twilio

我正在尝试将我的 Rails 应用程序与第 3 方 API (Twilio) 集成。用户通过按下浏览器上的按钮发起呼叫，他们遵循电话上的呼叫逻辑，然后当呼叫终止时，我希望浏览器被重定向到不同的页面。但是，我在处理两个不同用户代理（浏览器和 Twilio API）的响应时遇到了困难。

使用以下控制器操作启动调用（并且由于请求来自浏览器，因此渲染操作可以正常工作）：

```
def set_up
@client = Twilio::REST::Client.new ACCOUNT_SID, AUTH_TOKEN
data = {
  from:   FROM,
  to:   params[:number],
  url:  candidate_begin_url(@candidate),
  method: 'get',
  timeout: 10
}
@client.account.calls.create data
render 'candidates/interview_in_progress'
end 
```

在调用结束时，一旦用户准备好终止，Twilio API 就会向以下控制器发出 GET 请求。目的是要发生两件事：

1.  控制器应使用 XML 指令响应 Twilio API 以挂断呼叫
2.  控制器应该将用户的浏览器重定向到一个新的 url

    ```
    def finalize_call      
     response = Twilio::TwiML::Response.new do |r|
      r.Hangup
     end.text
     respond_to do |format|
      format.html { redirect_to candidate_complete_voice_interview_path(@candidate) }
      format.xml {  render xml: response }
     end
    end 
    ```

但是，似乎因为请求来自 Twilio API 用户代理，所以我无法使用浏览器执行任何操作。因此，虽然在日志中我看到新页面已呈现状态 200 OK，但浏览器没有任何变化。

我的问题是，如何指示浏览器根据来自不同用户代理的请求进行重定向，在这种情况下是 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:20:01.597

您可以使用 sidekiq 或 resque 进行异步调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:45:25.603

当用户访问您的站点时，您的站点会为该用户创建一个会话。当 Twilio 直接向您的站点发送请求时，会创建一个单独的会话。这两个会话是完全独立的。因此，当 Twilio 向您的服务器发送 GET 请求时，您的服务器会通过呈现请求的页面并将*其发送回 Twilio*来做出响应。

您的服务器无法发送推送更新，它必须接收请求并发送响应。因此，您看到的任何似乎自动更新的网站通常都在进行某种 javascript 轮询，其中浏览器向服务器发送定期请求 (ajax) 以检查是否有任何更改。

不过，在沿着这条路走下去之前，我会问您是否不能在您的网站上发布某种通知，上面写着“当您完成通话时，请单击此处”。否则，您将不得不将来自 Twilio 的响应存储在数据库（或某处）中，然后让用户的浏览器每隔 x 秒发送一个 ajax 请求以查看响应是否已到达。

# windows-8 - Windows 8 上预装的 .NET 框架

> ID：13034701
> 
> 赞同：7
> 
> 时间：2012-10-23T16:04:33.103
> 
> 标签：windows-8

Windows 8 是否会预装对 .NET Framework 2.0 的支持？如果没有，“开箱即用”的最低支持是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T16:09:28.217

Windows 8 预装了 .NET Framework 2.0；但是，默认情况下不启用它。要启用 .NET Framework 2.0，请转到控制面板 - 程序 - 打开或关闭 Windows 功能并标记 .NET Framework 3.5 复选框。请注意，.NET Framework 3.5 包括 .NET Framework 2.0。

```
.NET Framework 1.1: Windows Server 2003 
.NET Framework 2.0: Windows Server 2003 R2 
.NET Framework 3.0: Windows Vista, Windows Server 2008
.NET Framework 3.5 SP1: Windows 7, Windows Server 2008 R2
.NET Framework 4.0: Windows 8
.NET Framework 4.5: Windows 8
.NET Compact Framework 1.0 (SP2): Windows Mobile 5.0 
.NET Compact Framework 2.0: Windows Mobile 6.0 
 Mono 1.1.13.6: Ubuntu Dapper (6.06 LTS)
 Mono 1.2.6: Ubuntu Hardy (8.04 LTS)
 Mono 2.4.2.3: Ubuntu Karmic (9.10)
 Mono 2.4 branch snapshot: Ubuntu Lucid (10.04 LTS)
 Mono 2.6.7: Ubuntu Maverick (10.10), Ubuntu Natty (11.04) 
```

检查此链接：- [http://msdn.microsoft.com/en-us/library/ms973853.aspx](http://msdn.microsoft.com/en-us/library/ms973853.aspx)

检查此[链接](http://www.febooti.com/downloads/automation-workshop/net/)以安装 2.0 框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:08:22.380

[Windows 不是 .NET Framework 交付工具](http://blogs.msdn.com/b/oldnewthing/archive/2011/04/04/10149346.aspx)。您必须为您需要的 .NET Framework 版本尚未安装的情况做好准备。

# google-maps - Google 地图 KML：8 位十六进制代码

> ID：13034702
> 
> 赞同：16
> 
> 时间：2012-10-23T16:04:43.573
> 
> 标签：google-maps, google-maps-api-3

我是谷歌地图和 KML 的新手。我有我的 KML 文件在我的地图上渲染多边形，但我想更改 polygon 上的填充颜色和多边形的线条颜色。

问题是我无法以 8 位十六进制创建颜色。每次我认为我的颜色正确时，它都不会像我想的那样渲染。我似乎无法在任何地方找到可以让我生成所需的 8 位十六进制代码的颜色编辑器。

你们知道这样的编辑器（Paint.NET 似乎不支持 8 位）或其他一些轻松生成 8 位代码的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-23T17:28:39.733

这就是我使用的： [http ://www.zonums.com/gmaps/kml_color/](http://www.zonums.com/gmaps/kml_color/)

（[此页面](http://www.zonums.com/online/color_converter/)可让您输入代码）

最难的部分是记住片段的顺序（[来自规范](https://developers.google.com/kml/documentation/kmlreference#color)）：

```
The order of expression is aabbggrr, where aa=alpha (00 to ff); bb=blue (00 to ff); gg=green (00 to ff); rr=red (00 to ff). 
```

前两位数字（aabbggrr 中的“aa”/alpha）表示不透明度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-30T15:39:23.293

您可以对最后六个字符使用反向的 6 位十六进制代码。前两个字符表示透明度，可以设置从不可见的 00 到不透明的 ff。

# php - 用于反向 DNS 的 PHP 电子邮件标头

> ID：13034705
> 
> 赞同：0
> 
> 时间：2012-10-23T16:04:54.907
> 
> 标签：php, email-headers, reverse-dns

# 语境：

我最近让我的主机设置了反向 DNS（和 PTR），以防止我的 PHP 生成的电子邮件被解释为垃圾邮件。

# 我的问题：

1.  我应该使用特定的 PHP 邮件头来使反向 DNS 生效吗？
2.  反向 DNS 是否依赖于启用的 DKIM 和 SPF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:32:28.230

1.  不。反向 DNS 与邮件标头无关，与发送邮件的 IP 地址有关。

2.  不，但是设置这些也会对您有所帮助。

# ios - 委托可以为 2 个委托使用单一方法吗？

> ID：13034711
> 
> 赞同：1
> 
> 时间：2012-10-23T16:05:24.360
> 
> 标签：ios, delegates

问题是这样的：

我有一个视图控制器**Controller 1**，它是其他 2 个控制器**Controller 2**和**Controller 3**的代表。

**控制器 2**有一个名为“FOO”的委托方法，**控制器 3**具有相同的方法。

如果两个“FOO”方法都告诉委托做同样的事情，我可以在**控制器 1**中实现一个“FOO”方法 吗？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:19:40.073

良好的委托设计意味着方法不应具有相同的名称。例如，如果我有两个名为`FooA`and的类`FooB`，它们都执行委托操作`foobar:(BOOL)force`，那么委托方法名称应如下所示：

```
- (void)fooA:(FooA*)foo foobar:(BOOL)force;
- (void)fooB:(FooB*)foo foobar:(BOOL)force; 
```

这样，您的“控制器 1”将能够区分两种委托方法。您会在其他代表身上注意到这一点，例如`UITableView`：

```
- (BOOL)tableView:(UITableView *)tableView shouldHighlightRowAtIndexPath:(NSIndexPath *)indexPath 
```

您可以区分是否`shouldHighlightRowAtIndexPath`来自一个`UITableView`或不同的类。

这么说来，完全有可能在两个委托之间共享一个方法名，只是委托不能确定委托的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:20:00.597

你能做这个吗？是的。你应该这样做吗？绝对没有。假设您的每个视图控制器都定义了一个协议，那么所有协议中的方法都应该被唯一命名。换句话说，如果**控制器 2**中的协议和**控制器 3**中的协议都有一个简单命名的方法，`foo`那么你做错了。你应该有`controller1foo:`和`controller2foo:`。

这就是为什么 - 虽然在**控制器 1**中您可能希望同时处理这两个，但在另一个控制器中您可能需要以不同方式处理它们。或者将来您可能会决定**控制器 1**需要以不同的方式处理它们。如果两个协议都定义了相同的方法，就没有办法以不同的方式处理它们。

这是正确的解决方案。给每个协议方法一个唯一的名称。然后在**Controller 1**中，实现两个委托方法。但是这两种委托方法的实现都将调用一个执行实际工作的通用方法。

在**控制器 1**中：

```
- (void)doTheCommonWork {
    // This method does the common processing of the delegate calls
}

#pragma mark Controller 2 methods
- (void)controller2foo:(Controller2 *)controller {
    [self doTheCommonWork];
}

#pragma mark Controller 3 methods
- (void)controller3foo:(Controller3 *)controller {
    [self doTheCommonWork];
} 
```

这种方法使您可以对两种委托方法执行相同的操作，同时仍然可以在需要时选择执行不同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:29:29.223

控制器 2 和 3 是该类的实例吗？

所以让我们假设控制器 2 是一个 DoSomethingController，而控制器 3 是一个 DoSomethingElseController，在这种情况下，您需要两个不同的委托方法。

相反，如果控制器 2 和 3 属于同一类，或者如果控制器的类之一是另一个类的子类，那么这也是可以的。示例：`UITableView`的子类`UITableView`可以与一个委托对象（控制器 1）共享`tableView:cellForRowAtIndexPath:`委托方法，这样就可以了。

# javascript - 将 innerHTML 设置为 Javascript 代码，然后运行它/动态加载广告调用

> ID：13034715
> 
> 赞同：1
> 
> 时间：2012-10-23T16:05:34.290
> 
> 标签：javascript, banner-ads

我有一个带有横幅广告的网站。我需要做的是轮换这些广告 - 即您停留在主页上（无需重新加载），并且每 10 秒显示一个新广告（来自一组 3 或 4 个）。

我所做的是有一个 Javascript 函数，它将我的广告代码放入一个数组中，并每 10 秒循环一次数组并执行此操作（仅显示与我的问题相关的一行代码）：

```
document.getElementById(DivID).innerHTML = AdText; 
```

DivID 是 HTML 中 a 的名称，AdText 是显示广告的 HTML 代码。

这适用于广告调用基本上只是一个`<img>`标签或 Flash/SWF 对象嵌入的图像的广告

但是，有些广告是由第三方广告代理提供的 JS 代码，例如：

```
<script language='javascript1.1' src="http://example.net/adj/b4207992.2;sz=468x60;ord=[timestamp]?"></script> 
```

所以，基本上我说的是 document.getElementById(DivID).innerHTML = "THE ABOVE JS CODE"

什么都没有显示，我有 Firebug 的 FF 并且没有显示错误。

我的猜测是`document.getElementById(DivID).innerHTML`该代码设置正确（因为我有额外的代码来调用 1x1 图像来跟踪印象，这是记录印象），但它只是没有执行，也许 JS 需要一些事件，比如页面加载开始它？

有什么想法或替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:09:19.100

原因是新内容没有被解释。如果您使用 jQuery， .html() 应该可以解决您的问题。这个链接解释得更好：[Difference between innerHTML and .html() from jQuery](https://stackoverflow.com/questions/5390542/difference-between-innerhtml-and-html-from-jquery)

# sorting - jQuery Isotope：基于主动排序的自定义布局

> ID：13034717
> 
> 赞同：3
> 
> 时间：2012-10-23T16:05:41.170
> 
> 标签：sorting, layout, jquery-isotope

我正在使用[同位素](http://isotope.metafizzy.co/)并想知道这种情况是否可能：

**例子：**

投资组合中有三个类别可供排序：品牌 (B)、身份 (I) 和网站 (W)。列最多可达五宽。

最初，所有内容都以随机顺序显示（这很好）：

```
B B I B W
I W I W B
W I I 
```

选择排序顺序时，会发生以下情况（比如我选择品牌 (B)）：

```
B B B B I
W I W I W
W I I 
```

同位素中是否有允许在选定排序选项后发生“中断”的选项？例如：

```
B B B B
I W I W I
W W I I 
```

因此，对于上面的示例，B 将在他们自己的行组中，之后是其他所有内容。

Category Row 的自定义布局模式似乎提供了一个大致的方向，但我不确定一种方法来调用所选项目，然后只是其他所有内容。

# c - 使用 OpenMP 任务的生产者-消费者

> ID：13034718
> 
> 赞同：5
> 
> 时间：2012-10-23T16:05:42.587
> 
> 标签：c, multithreading, task, openmp

我正在尝试使用 OpenMP 中的任务来实现并行算法。并行编程模式是基于生产者-消费者的思想，但是由于消费者进程比生产者慢，所以我想用几个生产者和几个消费者。主要思想是创建与生产者一样多的操作系统线程，然后每个线程将创建要并行完成的任务（由消费者）。每个生产者都将与一定数量的消费者相关联（即 numCheckers/numSeekers）。我在英特尔双芯片服务器上运行算法，每个芯片有 6 个内核。问题是，当我只使用一个生产者（搜索者）和越来越多的消费者（检查者）时，性能会随着消费者数量的增加而迅速下降（见下表），即使正确数量的内核正在以100%。另一方面，如果我增加生产者的数量，平均时间会减少或至少保持稳定，即使消费者数量成比例。在我看来，所有的改进都是通过生产者之间的投入分配来实现的，而任务只是窃听而已。但同样，我对一位制片人的行为没有任何解释。我在 OpenMP-Task 逻辑中遗漏了什么吗？难道我做错了什么？

```
-------------------------------------------------------------------------
|   producers   |   consumers   |   time        |
-------------------------------------------------------------------------
|       1       |       1       |   0.642935    |
|       1       |       2       |   3.004023    |
|       1       |       3       |   5.332524    |
|       1       |       4       |   7.222009    |
|       1       |       5       |   9.472093    |
|       1       |       6       |   10.372389   |
|       1       |       7       |   12.671839   |
|       1       |       8       |   14.631013   |
|       1       |       9       |   14.500603   |
|       1       |      10       |   18.034931   |
|       1       |      11       |   17.835978   |
-------------------------------------------------------------------------
|       2       |       2       |   0.357881    |
|       2       |       4       |   0.361383    |
|       2       |       6       |   0.362556    |
|       2       |       8       |   0.359722    |
|       2       |      10       |   0.358816    |
------------------------------------------------------------------------- 
```

我的代码的主要部分是休闲：

```
int main( int argc, char** argv) {

  // ... process the input (read from file, etc...)

  const char *buffer_start[numSeekers];
  int buffer_len[numSeekers];

  //populate these arrays dividing the input
  //I need to do this because I need to overlap the buffers for
  //correctness, so I simple parallel-for it's not enough 

  //Here is where I create the producers
  int num = 0;
  #pragma omp parallel for num_threads(numSeekers) reduction(+:num)
  for (int i = 0; i < numSeekers; i++) {
      num += seek(buffer_start[i], buffer_len[i]);
  }

  return (int*)num;
}

int seek(const char* buffer, int n){

  int num = 0;

  //asign the same number of consumers for each producer 
  #pragma omp parallel num_threads(numCheckers/numSeekers) shared(num)
  {
    //only one time for every producer
    #pragma omp single
    {
      for(int pos = 0; pos < n; pos += STEP){
    if (condition(buffer[pos])){
      #pragma omp task shared(num)
      {
        //check() is a sequential function
        num += check(buffer[pos]);
      }
    }
      }
      #pragma omp taskwait
    }
  return num;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:13:40.190

观察到的行为是由于您没有`parallel`启用嵌套区域这一事实。发生的情况是，在第一种情况下，您实际上正在经历 OpenMP 任务的巨大开销。这很可能是由于与`check()`OpenMP 运行时引入的开销相比，没有做足够的工作。为什么它对 1 个和 2 个生产者的行为如此？

当仅使用一个生产者运行时，外部`parallel`区域仅使用一个线程执行。根据 OpenMP API 规范，这些`parallel`区域是非*活动*的，它们只是串行执行内部代码（唯一的开销是额外的函数调用和通过指针访问共享变量）。`parallel`在这种情况下，尽管在禁用嵌套并行性的情况下嵌套了内部区域，但它变得*活跃*并刺激了许多任务。任务引入了相对较高的开销，并且这种开销随着线程数的增加而增加。对于 1 个消费者，内部`parallel`区域也*处于非活动状态*，因此可以连续运行而没有任务开销。

当与两个生产者一起运行时，外部`parallel`区域*处于活动状态*，因此内部`parallel`区域*处于非活动状态*（请记住 - 没有启用嵌套并行），因此根本没有创建任何任务 -`seek()`只是串行运行。没有任务开销，代码运行速度几乎是 1 个生产者/1 个消费者案例的两倍。运行时间不依赖于消费者的数量，因为无论指定多少线程，内部`parallel`区域始终*处于非活动状态。*

任务分配和对共享变量的协同访问引入的开销有多大？我创建了一个执行以下代码的简单综合基准测试：

```
for (int i = 0; i < 10000000; i++) {
   ssum += sin(i*0.001);
} 
```

在默认优化级别为 GCC 4.7.2 的 Westmere CPU 上连续执行不到一秒。然后我介绍了使用简单`atomic`结构的任务来保护对共享变量的访问`ssum`：

```
#pragma omp parallel
{
   #pragma omp single
   for (int i = 0; i < 10000000; i++) {
      #pragma omp task
      {
         #pragma omp atomic
         ssum += sin(i*0.001);
      }
   }
} 
```

（这里不需要，`taskwait`因为在区域末端的隐式屏障有一个调度点`parallel`）

我还创建了一个更复杂的变体，它执行缩减的方式与 Massimiliano 提出的相同：

```
#define STRIDE 8

#pragma omp parallel
{
   #pragma omp single
   for (int i = 0; i < 10000000; i++) {
      #pragma omp task
      {
         const int idx = omp_get_thread_num();
         ssumt[idx*STRIDE] += sin(i*0.001);
      }
   }
   #pragma omp taskwait

   const int idx = omp_get_thread_num();
   #pragma omp atomic
   ssum += ssumt[idx*STRIDE];
} 
```

代码是用 GCC 4.7.2 编译的，例如：

```
g++ -fopenmp -o test.exe test.cc 
```

在双插槽 Westmere 系统（总共 12 个内核）上以批处理模式运行它（因此没有其他进程可以干预），具有不同数量的线程和不同的线程放置在插槽上，一个获得以下两个代码的运行时间：

```
Configuration   ATOMIC       Reduction    ATOMIC slowdown
2 + 0            2,79 ±0,15   2,74 ±0,19   1,8%
1 + 1            2,72 ±0,21   2,51 ±0,22   8,4% <-----
6 + 0           10,14 ±0,01  10,12 ±0,01   0,2%
3 + 3           22,60 ±0,24  22,69 ±0,33  -0,4%
6 + 6           37,85 ±0,67  38,90 ±0,89  -2,7% 
```

（运行时间以秒为单位，由 测量`omp_get_wtime()`，平均超过 10 次运行/标准偏差也显示/；`x + y`列中`Configuration`表示`x`第一个插槽`y`上的线程和第二个插槽上的线程）

如您所见，任务的开销是巨大的。它比使用`atomic`而不是对线程私有累加器应用归约的开销要高得多。`atomic`此外， with的赋值部分`+=`编译为锁定的比较和交换指令 ( `LOCK CMPXCHG`) - 不会比`omp_get_thread_num()`每次调用高多少。

还应注意，双插槽 Westmere 系统是 NUMA，因为每个 CPU 都有自己的内存，并且对另一个 CPU 内存的访问通过 QPI 链接，因此延迟增加（并且可能带宽降低）。由于`ssum`在这种情况下变量是共享的，因此`atomic`在第二个处理器上运行的线程实际上是在发出远程请求。尽管如此，两种代码之间的差异仍然可以忽略不计（除了标记的双线程情况 - 我必须调查原因），并且`atomic`当线程数量增加时，代码甚至开始优于减少的代码。

在多尺度 NUMA 系统上，该方法中的同步`atomic`可能会成为更多的负担，因为它增加了已经较慢的远程访问的锁定开销。一个这样的系统是我们的 BCS 耦合节点之一。BCS (Bull Coherence Switch) 是 Bull 的专有解决方案，它使用 XQPI (eXternal QPI) 将多个 Nehalem-EX 板连接到一个系统中，引入了三个级别的 NUMA（本地内存；同一板上的远程内存） ; 远程板上的远程内存）。当在一个这样的系统上运行时，由 4 个板子组成，每个板子有 4 个八核 Nehalem-EX CPU（总共 128 个内核），`atomic`可执行文件运行 1036 秒（！！），而缩减方法运行 1047 秒，即两者仍然执行大约在同一时间（我之前的声明是`atomic`方法慢 21.5% 是由于测量期间操作系统服务抖动）。这两个数字都来自单次运行，因此不太具有代表性。请注意，在此系统上，XQPI 链接为板间 QPI 消息引入了非常高的延迟，因此锁定非常昂贵，但并不*那么*昂贵。使用归约可以消除部分开销，但必须正确实施。首先，reduction 变量的本地副本也应该是线程执行的 NUMA 节点的本地副本，其次，应该找到一种不调用`omp_get_thread_num()`. 这两个可以通过许多不同的方式实现，但最简单的一种就是使用`threadprivate`变量：

```
static double ssumt;
#pragma omp threadprivate(ssumt)

#pragma omp parallel
{
   ssumt = 0.0;

   #pragma omp single
   for (int i = 0; i < 10000000; i++) {
      #pragma omp task
      {
         ssumt += sin(i*0.001);
      }
   }
   #pragma omp taskwait

   #pragma omp atomic
   ssum += ssumt;
} 
```

访问`ssumt`不需要保护，因为两个任务很少在同一个线程中同时执行（必须进一步调查这是否符合 OpenMP 规范）。此版本的代码执行时间为 972 秒。再一次，这距离 1036 秒并不远，并且仅来自一次测量（即它可能只是一个统计波动），但理论上它应该更快。

带回家的教训：

*   阅读有关嵌套`parallel`区域的 OpenMP 规范。通过将环境变量设置`OMP_NESTED`为`true`或调用来启用嵌套并行`omp_set_nested(1);`。如果启用，则活动嵌套的级别可以`OMP_MAX_ACTIVE_LEVELS`由 Massimiliano 指出的 控制。
*   寻找数据竞争并尝试使用最简单的方法来防止它们。并非每次使用更复杂的方法都能为您带来更好的性能。
*   特殊系统通常需要特殊编程。
*   如有疑问，请使用线程检查器工具（如果有）。Intel 有一个（商业），Oracle 的 Solaris Studio（以前称为 Sun Studio）也有一个（免费；尽管产品名称有 Linux 版本）。
*   注意开销！尝试将作业分成足够大的块，以便创建数百万个任务的开销不会抵消获得的并行增益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:03:05.277

正如 Hristo 在评论中已经建议的那样，您应该启用嵌套并行性。这是通过设置环境变量完成的：

*   `OMP_NESTED`（启用或禁用嵌套并行）
*   `OMP_MAX_ACTIVE_LEVELS`（控制嵌套活动并行区域的最大数量）

另一方面`atomic`，我建议采用以下策略，而不是用构造来保护积累：

```
...
// Create a local buffer to accumulate partial results
const int nthreads = numCheckers/numSeekers;
const int stride   = 32; // Choose a value that avoids false sharing
int numt[stride*nthreads];
// Initialize to zero as we are reducing on + operator
for (int ii = 0; ii < stride*nthreads; ii++)    
  numt[ii] = 0;

#pragma omp parallel num_threads(numCheckers/numSeekers)
{

  //only one time for every producer
  #pragma omp single
  {
    for(int pos = 0; pos < n; pos += STEP){
      if (condition(buffer[pos])){
      #pragma omp task
      {
        //check() is a sequential function
        const int idx = omp_get_thread_num();
        numt[idx*stride] += check(buffer[pos]);
      }
    }
  }
  #pragma omp taskwait

  // Accumulate partial results
  const int idx = omp_get_thread_num();
  #pragma atomic
  num += numt[stride*idx];
} 
```

这应该可以防止由于同时请求写入同一内​​存位置而导致的潜在减速。

请注意，答案的先前版本表明`reduction` 在最里面的并行区域中使用 是错误的，因为：

> 出现在最里面的封闭工作共享或并行构造的缩减子句中的列表项可能无法在显式任务中访问

OpenMP 3.1 规范的 §2.9.3.6 不允许。

# php - 获取新创建的工作表的 ID？

> ID：13034719
> 
> 赞同：1
> 
> 时间：2012-10-23T16:05:44.890
> 
> 标签：php, phpexcel

我正在使用[PHPExcel 库](http://phpexcel.codeplex.com/)打开**现有的 Excel 电子表格**，然后**在其中创建一个新的工作表**。

我正在使用的代码（不包括所有初始化/保存等，因为它们都可以正常工作）如下：

```
#======================================================#
#  OPEN EXISTING EXCEL SPREADSHEET                     #
#======================================================#

    if (!file_exists( CURRENT_FILE )) {
        exit("Please run " . CURRENT_FILE . " first." . EOL);
    }

    echo date('H:i:s') , " Load from Excel2007 file" , EOL;
    $objPHPExcel = PHPExcel_IOFactory::load( CURRENT_FILE );

#======================================================#

#======================================================#
#  SET UP WORKSHEETS                                   #
#======================================================#

    echo date('H:i:s') , " Create new worksheet for month" , EOL;
    $objPHPExcel->createSheet();
    $objPHPExcel->getActiveSheet()->setTitle( date("d M", strtotime( $weeks[1] ) ) . ' - ' . date("d M", strtotime( $weeks[4] ) ) );

#======================================================# 
```

我**想做**的是：

*   打开现有的 Excel 文件（其中可能已经有 1 个或多个工作表）
*   创建新工作表
*   设置新工作表的标题
*   将内容添加到新工作表

然而，**似乎正在发生的事情**是这样的：

*   打开现有的 Excel 文件
*   创建一个新工作表
*   将第一个工作表的标题设置为我设置的日期
*   将内容添加到 FIRST 工作表

![PHP Excel 工作表](../Images/9a4cd6809903fa236ead1b23a25dce9b.png)

所以，我认为我需要做的是：

*   打开现有的 Excel 文件
*   添加新工作表
*   获取新增工作表的 ID（类似 的命令`mysql_insert_id()`）
*   将活动工作表设置为该 ID
*   设置活动工作表的标题
*   将内容添加到活动工作表

但是，我似乎在 PHPExcel 文档中找不到这样的命令。一个存在吗？如果没有，是否有任何可行的解决方法？我不想覆盖本文档中的现有工作表。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:18:47.803

您可以利用 createSheet() 方法实际上返回您的新工作表这一事实。

```
$newMonthSheet = $objPHPExcel->createSheet();
$newMonthSheet->setTitle( date("d M", strtotime( $weeks[1] ) ) . ' - ' . date("d M", strtotime( $weeks[4] ) ) ); 
```

# nsstring - NSString 到 NSNumber 用于大数字

> ID：13034726
> 
> 赞同：0
> 
> 时间：2012-10-23T16:05:56.890
> 
> 标签：nsstring, nsnumber, nsnumberformatter

我有一个 NSString 包含一个非常大的数字。我需要将其转换为 NSNumber，但它总是以科学格式返回 NSNumber，这不好（我在谓词中使用数字来搜索具有此 MPMediaEntityPropertyPersistentID 的音乐曲目）。

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSString *str = @"14881035034468747982";
DLog(@"before: %@", str);
NSNumber *nmb = [numberFormatter numberFromString:str];
DLog(@"after: %@", nmb); 
```

印刷：

```
<AppDelegate.m:199> before: 14881035034468747982
<AppDelegate.m:201> after: 1.488103503446875e+19 
```

如果我使用此号码搜索 iPod 库，则不会返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:22:51.150

恐怕我问这个问题有点太快了。一旦我发现有问题的数字是 unsigned long long，找到答案并不难。

```
unsigned long long ullvalue = strtoull([str UTF8String], NULL, 0);
NSNumber *nmb = @(ullvalue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:00:48.400

在提取我存储在本地**sqLite3数据库中的****MPMediaEntityPropertyPersistentID**时遇到了类似的问题。认为另一个代码片段可以帮助某人：

 **```
// convert the uniqueId for the track into an NSNumber 

NSString *longString = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 11)];
unsigned long long ullvalue = strtoull([longString UTF8String], NULL, 0);
NSNumber *UniqueId = [NSNumber numberWithUnsignedLongLong:ullvalue]; 
```**

# c - 加载 DLL 库

> ID：13034728
> 
> 赞同：4
> 
> 时间：2012-10-23T16:06:00.533
> 
> 标签：c, winapi, gcc, dll, codeblocks

是否可以使用 C 加载 DLL 并使用其功能？

我是 C 新手，我正在尝试在互联网上搜索一些好的参考资料；但我找不到。

任何帮助，将不胜感激！

我在 Windows 7、64 位的 Code::Blocks 中使用 GNU GCC。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T16:08:13.160

[`HMODULE hModule = LoadLibrary(<dll file name>)`](https://msdn.microsoft.com/en-us/library/ms684175.aspx)接下来[`GetProcAddress(hModule, <function name>)`](http://msdn.microsoft.com/en-us/library/ms683212.aspx)将使用 WinAPI 完成这项工作。

[可以在这里找到一个例子。](http://msdn.microsoft.com/en-us/library/ms683212.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:10:34.090

我认为您应该调查该`LoadLibrary`功能。

[http://msdn.microsoft.com/en-us/library/ms684175.aspx](http://msdn.microsoft.com/en-us/library/ms684175.aspx)

将指定的模块加载到调用进程的地址空间中。指定的模块可能会导致加载其他模块。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-23T16:17:28.610

使用 MinGW 构建 DLL，这里有一些说明：

首先，您需要将函数标记为导出，以便 DLL 的调用者可以使用它们。为此，请修改它们，使它们看起来像（例如）

```
__declspec( dllexport ) int add2(int num){
   return num + 2;
} 
```

然后，假设您的函数位于名为 funcs.c 的文件中，您可以编译它们：

`gcc -shared -o mylib.dll funcs.c` -shared 标志告诉 gcc 创建一个 DLL。

对于一个免费的 IDE，它将自动化构建 DLL 所需的所有标志等，看看优秀的 Code::Blocks，它与 MinGW 配合得很好。

此外，请参阅 MinGW Wiki 上的文章创建用于 Visual Basic 的 MinGW DLL。

# php - 我是一个初学者，我遇到了一个奇怪的事情

> ID：13034733
> 
> 赞同：0
> 
> 时间：2012-10-23T16:06:21.880
> 
> 标签：php

我已经编写了以下 html 和 php 文件

.html 文件：

```
 <!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"href="main.css">
</head>
<body>
<span>
</span>
<form id="login"action="login.php"method="post">
<input type="text"name="user">
<input type="submit"value="submit">
</form>
</body>
</html> 
```

.php 文件：

```
<?php
if(isset($_POST[‘user’]))
{
echo 'true';
}
else
{
echo "false";
}
?> 
```

即使有一个值显示为假，请提供帮助。我不知道为什么。感谢所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:09:37.853

改变：

```
isset($_POST[‘user’]) 
```

至：

```
isset($_POST["user"]) 
```

或者：

```
isset($_POST['user']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:10:19.850

```
<?php
if(!empty($_POST['user']))
{
echo 'true';
}
else
{
echo 'false';
}
?> 
```

并且使用`!empty`更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:09:20.283

1.  在属性之间放置一个空格
2.  在字符串周围使用撇号或引号，而不是刻度：`$_POST[‘user’]`应该是`$_POST['user']`

# symfony - 运行 symfony2 时 apache 服务器挂起

> ID：13034735
> 
> 赞同：0
> 
> 时间：2012-10-23T16:06:33.217
> 
> 标签：symfony

我是 symfony2.1 的新手。我正在使用 wamp 服务器（apache 2.2.22 和 php 5.3.13）。我已经为 symfony2.1 正确配置了一切。但是当我尝试从数据库中检索数据或提交时会出现问题。有时它工作正常，但有时它不工作并挂断服务器。比我必须重新启动服务器。

为了解决这个问题，我分别安装了 apache、php 和 mysql。但我仍然面临同样的问题。

请给我一个解决方案。

# c# - 缩短 foreach 索引

> ID：13034736
> 
> 赞同：0
> 
> 时间：2012-10-23T16:06:34.580
> 
> 标签：c#, foreach

编写这个程序是为了让用户输入一个从 0 到 10 的数字列表，然后程序确定输入了多少值并输出不同条目的列表以及该条目出现次数的计数。

我正在寻找一种缩短 foreach 索引的方法。

```
 static void Main(string[] args)
    {
        int [] emptyArray = new int [100];
        string inPut;
        int count= 0;

        Console.WriteLine("Please enter intergers between 0-10: " + "((00 to exit)) ", count + 1);
        inPut= Console.ReadLine();

        while(inPut !="00")
        {
            emptyArray[count]= Convert.ToInt32(inPut);
            ++count;
            Console.WriteLine("Please enter intergers between 0-10: " + "((00 to exit)) ", count + 1);
            inPut= Console.ReadLine();
        }

            int a = 0;
            foreach (int value in emptyArray)
            if (value == 1) ++a;
            Console.WriteLine("The number of times ONE was inputed was {0}",a);

            int b = 0;
            foreach (int value in emptyArray)
            if (value == 2) ++b;
            Console.WriteLine("The number of times TWO was inputed was {0}", b);

            int c = 0;
            foreach (int value in emptyArray)
            if (value == 3) ++c;
            Console.WriteLine("The number of times THREE was inputed was {0}", c);

            int d = 0;
            foreach (int value in emptyArray)
            if (value == 4) ++d;
            Console.WriteLine("The number of times FOUR was inputed was {0}", d);

            int e = 0;
            foreach (int value in emptyArray)
            if (value == 5) ++e;
            Console.WriteLine("The number of times FIVE was inputed was {0}", e);

            int f = 0;
            foreach (int value in emptyArray)
            if (value == 6) ++f;
            Console.WriteLine("The number of times SIX was inputed was {0}", f);

            int g = 0;
            foreach (int value in emptyArray)
            if (value == 7) ++g;
            Console.WriteLine("The number of times SEVEN was inputed was {0}", g);

            int h = 0;
            foreach (int value in emptyArray)
            if (value ==8) ++h;
            Console.WriteLine("The number of times EIGHT was inputed was {0}", h);

            int i = 0;
            foreach (int value in emptyArray)
            if (value == 9) ++i;
            Console.WriteLine("The number of times NINE was inputed was {0}", i);

            Console.Read();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:15:21.253

使用查找：

```
var lookup = emptyArray.ToLookup(i => i);

Console.WriteLine("The number of times ONE was inputed was {0}", lookup[1].Count());
Console.WriteLine("The number of times TWO was inputed was {0}", lookup[2].Count());
/// etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:18:08.730

```
var counts = emptyArray.GroupBy(x => x)
                       .Select(x => new {Key = x.Key, Count = x.Count()});

foreach (var p in counts)
{
    Console.WriteLine("The number of times {0} was inputed was {1}", 
                      p.Key.AsWord(), p.Count);
} 
```

扩展方法 AsWord 在这里定义：

```
public static class Extensions
{
    public static string AsWord(this int num)
    {
        switch (num) 
        {
            case 1: return "ONE";  
            case 2: return "TWO";
            // ...
            default: throw new ArgumentException("num");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T16:09:28.180

## 解决方案#1

使用字典计算输入的频率：

```
string[] digits = new string[]{"ZERO", "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE"};

Dictionary<int, int> frequencyMap = new Dictionary<int,int>();

int [] emptyArray = new int[100]; 
```

获得输入并填充“emptyArray”后，您可以映射频率：

```
//... blah blah 
foreach(int value in emptyArray)
{
    if(!frequencyMap.ContainsKey(value))
    {
        frequencyMap.Add(value, 0);
    }
    frequencyMap[value]+=1;
}

// Now print the frequencies
foreach(int key in frequencyMap.Keys)
{
    Console.WriteLine("The number of times {0} was inputed was {1}", digits[key], frequencyMap[key]);
} 
```

## 解决方案#2

上述解决方案非常强大，如果您不必打印数字，那么您将能够计算任何数字输入，而不必担心打印它。如果您严格落在 0-9 的范围内，那么您可以跳过字典并直接使用数组：

```
int[] frequencyMap = new int[10];
for(int i = 0; i < frequencyMap.Length; i++)
{
    frequencyMap[i] = 0;
}

foreach(int value in emptyArray)
{
    if(value>0 && value <10)
    {
        frequencyMap[value]+=1;
    }
}

// Now print the frequencies
foreach(int key in frequencyMap)
{
    Console.WriteLine("The number of times {0} was inputed was {1}", digits[key], frequencyMap[key]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:15:52.367

也许您想要 a`List<int>`而不是`int[100]`-`List<int>`将根据实际添加到其中的项目数进行调整，因此`foreach`将仅返回用户实际输入的项目数。

这闻起来有点像家庭作业，因此您可能需要使用数组。如果这是正确的，我不会给出完整的解决方案，而只是建议您应该使用`for`循环而不是`foreach`循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T16:33:49.010

我想有很多方法可以做到这一点。你会被宠坏的选择:) 这是我的

```
var l = emptyArray.ToLookup (a => a);
var nums = new string[]{"zero","one","two","three","four","five","six","seven","eight","nine"};
foreach (var element in l)
{
    Console.WriteLine ("The number of times " + nums[element.Key] + " was inputed was " + element.Count ());          
} 
```

# cocoa-touch - Storyboard 和 xib 在视图外观过程中的不一致

> ID：13034737
> 
> 赞同：3
> 
> 时间：2012-10-23T16:06:36.900
> 
> 标签：cocoa-touch, storyboard

我不明白什么时候在视图外观链中询问 a 的框架`UIView`和/或与 Storyboard 与传统 xib 相关的差异是安全的。

`UIViewController`我在 Xcode 4.5.1 中创建了两个不同的、非常简单的单个项目；在第一个中，我使用带有 xib 的标准单视图模板，在第二个中，我使用了 Storyboard。`ViewController.m`下面给出了两个项目相同的源代码。在 IB 中，我拖入 a`UIScrollView`并将其适当地连接到我的控制器插座。

正如您将在源代码中注意到的那样，我正在视图外观链中的不同点注销滚动视图的框架。我不明白为什么它们不同和/或什么时候我可以安全地查询 UIScrollView 框架，因为它在`viewDidLoad`.

## 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@end

@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"viewDidLoad scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
- (void)viewWillLayoutSubviews {
    NSLog(@"viewWillLayoutSubviews scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);    
}
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"viewWillAppear scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);

}
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    NSLog(@"viewDidAppear scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
@end 
```

## 使用 xib 的结果

```
2012-10-23 11:49:48.316 ScrollTest[83262:c07] viewDidLoad scrollView.frame = (320,548)
2012-10-23 11:49:48.318 ScrollTest[83262:c07] viewWillAppear scrollView.frame = (320,548)
2012-10-23 11:49:48.321 ScrollTest[83262:c07] viewWillLayoutSubviews scrollView.frame = (320,548)
2012-10-23 11:49:48.328 ScrollTest[83262:c07] viewDidAppear scrollView.frame = (320,460) 
```

## 情节提要的结果

```
2012-10-23 11:49:58.762 ScrollTestStoryboard[83308:c07] viewDidLoad scrollView.frame = (  0,  0)
2012-10-23 11:49:58.763 ScrollTestStoryboard[83308:c07] viewWillAppear scrollView.frame = (  0,  0)
2012-10-23 11:49:58.765 ScrollTestStoryboard[83308:c07] viewWillLayoutSubviews scrollView.frame = (  0,  0)
2012-10-23 11:49:58.772 ScrollTestStoryboard[83308:c07] viewDidAppear scrollView.frame = (320,460) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:20:31.623

答案是`viewDidLayoutSubviews`。希望我在大约 20 分钟前看到。下面是更新的源代码和日志输出。

## 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()
@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@end

@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"viewDidLoad scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"viewWillAppear scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);

}
- (void)viewWillLayoutSubviews {
    NSLog(@"viewWillLayoutSubviews scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
- (void)viewDidLayoutSubviews {
    NSLog(@"viewDidLayoutSubviews scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    NSLog(@"viewDidAppear scrollView.frame = (%3.0f,%3.0f)",self.scrollView.frame.size.width,self.scrollView.frame.size.height);
}
@end 
```

## 故事板输出

```
2012-10-23 12:12:35.597 ScrollTestStoryboard[87593:c07] viewDidLoad scrollView.frame = (  0,  0)
2012-10-23 12:12:35.599 ScrollTestStoryboard[87593:c07] viewWillAppear scrollView.frame = (  0,  0)
2012-10-23 12:12:35.601 ScrollTestStoryboard[87593:c07] viewWillLayoutSubviews scrollView.frame = (  0,  0)
2012-10-23 12:12:35.602 ScrollTestStoryboard[87593:c07] viewDidLayoutSubviews scrollView.frame = (320,460)
2012-10-23 12:12:35.609 ScrollTestStoryboard[87593:c07] viewDidAppear scrollView.frame = (320,460) 
```

# html - £ 符号在 utf-8 字符集 (HTML5) 中不起作用

> ID：13034739
> 
> 赞同：1
> 
> 时间：2012-10-23T16:06:47.163
> 
> 标签：html, utf-8

我最近更新了一个我正在使用 HTML 5 处理的页面。由于某种原因，当我更改标题时，所有价格中包含的 £ 符号不再被识别并显示为白色“？” 在黑色钻石中。

谁能解释如何解决这个问题？我觉得这与`<meta charset="utf-8">`我脑海中的线条有关，但可能是错误的。

任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:12:24.670

您实际上需要用 UTF-8 对 HTML 文档进行编码。`<meta charset="utf-8">`告诉浏览器该文档应该是用 UTF-8 编码的，并且浏览器应该这样对待它。UTF-8 替换字符 � 表示此时发现了无效的 UTF-8 字节序列，这意味着您的文档实际上并未以 UTF-8 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:21:23.833

如果您告诉浏览器它是 UTF-8，那么您发送的必须是 UTF-8。听起来您没有发送有效的 UTF-8 序列。您可以通过执行以下操作**之一**来解决此问题：

*   确保在编辑器中将脚本保存为 UTF-8。（推荐的）
*   将脚本保存为 ISO-8859-1，并用于`utf8_encode()`任何输出。

# java - 如果我在 XML 布局中声明一个片段，我如何将它传递给 Bundle？

> ID：13034746
> 
> 赞同：76
> 
> 时间：2012-10-23T16:07:03.473
> 
> 标签：java, android, xml, fragment

我有一个用片段替换的活动。该活动采用了一个 Intent，该 Intent 包含有关该活动应该显示哪些数据的一些额外信息。

现在我的 Activity 只是一个片段的包装器，它做同样的工作，如果我用标签在 XML 中声明片段，我如何将该包获取到片段？

如果我要使用 FragmentTransaction 将 Fragment 放入 ViewGroup，我将有机会在 Fragment 构造函数中传递此信息，但我想知道在 XML 中定义片段的情况。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-23T16:10:32.690

> 现在我的 Activity 只是一个片段的包装器，它做同样的工作，如果我用标签在 XML 中声明片段，我如何将该包获取到片段？

你不能。

但是，欢迎您调用`findFragmentById()`您`FragmentManager`来检索片段后膨胀，然后在片段上调用一些方法以将数据与其关联。虽然显然不可能`setArguments()`，但您的片段可以安排通过其他方式（ 、 等）在配置更改之后保留数据`onSaveInstanceState()`本身`setRetainInstance(true)`。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-01-05T11:58:20.530

这不是一种封装的方式，但我最终从父活动中“拉”了包：

```
Bundle bundle = getActivity().getIntent().getExtras(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-13T07:42:58.963

您不能传递 Bundle（除非您以编程方式而不是通过 XML 膨胀片段），但您可以通过 XML 将参数（或更确切地说是属性）传递给片段。

该过程类似于[您定义 View 自定义属性](https://developer.android.com/training/custom-views/create-view#customattr)的方式。除了 AndroidStudio（当前）在此过程中不为您提供帮助。

假设这是您使用参数的片段（我将使用 kotlin，但它也完全适用于 Java）：

```
class MyFragment: Fragment() {

    // your fragment parameter, a string
    private var screenName: String? = null

    override fun onAttach(context: Context?) {
        super.onAttach(context)
        if (screenName == null) {
            screenName = arguments?.getString("screen_name")
        }
    }
} 
```

你想做这样的事情：

```
<fragment
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/myFragment"
    android:name="com.example.MyFragment"
    app:screen_name="@string/screen_a"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/> 
```

注意`app:screen_name="@string/screen_a"`

要使其正常工作，只需将其添加到值文件中（`fragment_attrs.xml`或选择您想要的任何名称）：

```
<!-- define your attribute name and type -->
<attr name="screen_name" format="string|reference"/>

<!-- define a bunch of constants you wanna use -->
<string name="screen_a" translatable="false">ScreenA</string>
<string name="screen_b" translatable="false">ScreeenB</string>

<!-- now define which arguments your fragment is gonna have (can be more then one) -->
<!-- the convention is "FragmentClassName_MembersInjector" -->
<declare-styleable name="MyFragment_MembersInjector">
    <attr name="screen_name"/>
</declare-styleable> 
```

差不多完成了，你只需要在你的片段中阅读它，所以添加方法：

```
override fun onInflate(context: Context?, attrs: AttributeSet?, savedInstanceState: Bundle?) {
    super.onInflate(context, attrs, savedInstanceState)
    if (context != null && attrs != null && screenName == null) {
        val ta = context.obtainStyledAttributes(attrs, R.styleable.MyFragment_MembersInjector)
        if (ta.hasValue(R.styleable.MyFragment_MembersInjector_screen_name)) {
            screenName = ta.getString(R.styleable.MyFragment_MembersInjector_screen_name)
        }
        ta.recycle()
    }
} 
```

etvoilá，您的片段中的 XML 属性 :)

限制：

*   Android Studio（截至目前）不会在布局 XML 中自动完成此类参数
*   您不能通过`Parcelable`，但只能通过可以定义为 Android 属性的内容

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-12-21T03:24:20.370

另一种选择是不在 XML 中声明片段。我知道这不是你想要做的。但是，您可以在视图中声明一个简单的布局，如下所示：

```
 <LinearLayout
        android:id="@+id/fragment_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" /> 
```

然后在您的`Activity`课程中，您以编程方式使用片段膨胀布局。这样您就可以使用 args 传递参数。

```
FragmentManager fragmentManager = getSupportFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
MyFragment fragment = MyFragment.newInstance();
Bundle args = new Bundle();
args.putInt(Global.INTENT_INT_ROLE, 1);
fragment.setArguments(args);
fragmentTransaction.add(R.id.fragment_container, fragment, "MyActivity");
fragmentTransaction.commit(); 
```

在片段中，

```
if (getArguments() != null) {
   int role = getArguments().getInt(Global.INTENT_INT_ROLE); } 
```

这种方法不像在 xml 中声明它那样干净和简单，但是我已经转移到它，因为它使您可以更好地控制片段。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-11-07T08:03:21.923

我知道答案为时已晚，但我认为有人需要这个:)

只是在活动覆盖`onAttachFragment()`

```
@Override
public void onAttachFragment(Fragment fragment)
{
    super.onAttachFragment(fragment);

    if (fragment.getId() == R.id.frgBlank)
    {
        Bundle b = new Bundle();
        b.putString("msg", "Message");

        fragment.setArguments(b);
    }
} 
```

并在片段 onCreateView 方法中

```
Bundle b = getArguments();
if (b != null)
{
    Toast.makeText(getBaseContext(), b.getString("msg"), Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-17T14:10:01.010

我看到的唯一解决方案是不使用参数作为数据交换通道。相反，让您的片段从其他地方获取必要的信息。回调以获取正确的活动，查阅临时存储内存、Singleton 对象等。

另一个可能有用的解决方案是使用允许不相关对象通过 Mediator 设计模式交换消息的框架，例如[Otto](http://square.github.io/otto/)。

# objective-c - 在 ios6 中工作的按钮在 ios5 中停止工作

> ID：13034747
> 
> 赞同：0
> 
> 时间：2012-10-23T16:07:04.410
> 
> 标签：objective-c, ios5, ios6, nib

1.  我从 NIB 的一个视图中加载了两个按钮。
2.  我将此视图设置为`self.navigationItem.rightBarButtonItem`当前视图控制器
3.  我为这些按钮设置了动作

结果：

按钮在 ios6 下工作 - 模拟器和设备，而不是在 ios5 设备上工作。有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:37:28.287

我通过在“尺寸检查器”中设置“自动调整”来修复它，就像这张照片一样。

（在我的情况下，问题来自将 iPhone5 调整为 iPhone4）

[http://image.ohozaa.com/i/fd6/TRJDR3.png](http://image.ohozaa.com/i/fd6/TRJDR3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:19:32.933

The problem is now solved. This was caused by setting UIViews objects in IB and then setting its class to UIButton. It should have no effect on buttons behaviour, but it had. The more wired was that it did work on iOS 6 and did not in iOS 5.

# android - 在 Android 上编码数据矩阵

> ID：13034748
> 
> 赞同：0
> 
> 时间：2012-10-23T16:07:04.183
> 
> 标签：android, matrix

是否有任何可用于 Android 的开源（和非 GPL）数据矩阵编码器？我只能找到商业的。在 Stack Overflow 上，我没有找到这个问题的任何答案。

# php - Symfony2 表单生成器：$form->bindRequest($request) 失败？如果有空字段

> ID：13034753
> 
> 赞同：0
> 
> 时间：2012-10-23T16:07:14.583
> 
> 标签：php, forms, symfony

Orm/Yaml

```
Subject:
    type: entity
    repositoryClass: My\SampleBundle\Repository\SubjectRepository
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        body:
            type: text
    oneToMany:
        choices:
            targetEntity: Choice
            mappedBy: subject
            cascade: ["persist", "remove"]
Choice:
    type: entity
    repositoryClass: My\SampleBundle\Repository\ChoiceRepository
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        choice:
            type: text
    manyToOne:
        subject:
            targetEntity: Subject
            inversedBy: choices
            joinColumn:
                name: subject_id
                referencedColumnName: id 
```

看法

```
<form action="{{ path('path_create or path_edit', {'id': id}) }}" method="post" {{ form_enctype(form) }}>

    // ...

    <ul id="choice-list" data-prototype="{{ form_widget(form.choices.vars.prototype.choice) | e }}">
        {% for choice in form.choices %}
            <li>
                <div class="errors">
                    {{ form_errors(choice.choice) }}
                </div>
                {{ form_widget(choice.choice) }}
            </li>
        {% endfor %}
    </ul>

    <!-- ## The field can be added by JavaScript. -->
    <span class="add-another-choice">Add another choice</span>
    {{ form_rest(form) }}
    <input type="submit" class="_button" />
</form> 
```

形式/类型

```
class SubjectType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('body', 'textarea');
        $builder->add('choices', 'collection', array(
            'type' => new ChoiceType(),
            'options' => array(
                'required'  => false
            ),
            'allow_add' => true,
            'by_reference' => false,
            'allow_delete' => true,
            'prototype' => true
        ));
    }

    // ...
}

class ChoiceType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('choice', 'textarea');
    }

    // ...
} 
```

验证

```
Subject:
    properties:
        body:
            - NotBlank: ~
            - MinLength: 8
        choices:
            - Valid: ~
Choice:
    properties:
        choice:
            - NotBlank: ~ 
```

控制器

```
public function createAction(Request $request, $id)
{
    $em = $this->get('doctrine')->getEntityManager();

    $subject = new Subject();
    $subject->getChoices()->add(new Choice());

    $form = $this->createForm(new SubjectType(), $subject);

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);           //<= error on this point. Why?
                                                // if there is the empty field.
        if ($form->isValid()) {
            return // ...
        }
    }

    return $this->render('MySampleBundle:Subject:create.html.twig', array(
        'form' => $form->createView(),
    ));
} 
```

* * *

我尝试 symfony2 的集合形式。
但是，当通过Javascript增加字段时，如果有空字段，它将失败。
当字段增加时，它在执行验证之前并成为错误。（可捕获的致命错误:)）

我怎样才能做到这一点？

* * *

编辑：

如果设置了该值，则两个或多个注册将成功。
如果有一个项目没有设置值，两个或多个注册会出错。
bindRequest 函数失败。
如果只有部分空值添加实体，则成功。
但是，这似乎不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:35:45.010

从选择表单字段中删除 required=false 或将 nullable=true 添加到架构选择字段

# android - Android上的本地数据库同步到后端服务器？有什么选择？

> ID：13034754
> 
> 赞同：1
> 
> 时间：2012-10-23T16:07:17.760
> 
> 标签：android, nosql, couchdb, cloudant

本地数据库始终同步到远程服务器听起来是个好主意，因为您可以获得使用本地数据库的响应能力，而且还可以获得跨设备的同步。

但是任何人都可以谈谈他们在 Android 上使用 couchbase 的经验吗？

[https://github.com/couchbase/Android-Couchbase/](https://github.com/couchbase/Android-Couchbase/)

还有哪些其他选择？云量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:13:34.657

看看[Touch-DB Android](https://github.com/couchbaselabs/TouchDB-Android)。它比 Android-Couchbase 更紧凑，并且仍然定期更新和维护（我相信主要贡献者正在开发一个大版本，这就是我们两个月前的最后一次更新的原因）。该框架建立在[Ektorp](http://ektorp.org/)之上，并在您的 Android 设备上模拟 CouchDB 数据库。

与远程数据库之间的复制相当直观且易于设置。

我使用 CloudAnt 作为我的 Android 游戏的远程后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:09:28.990

我可以告诉你，总的来说，它是有效的。例如，我有一个与 iriscouch.com 同步的 android 应用程序。但是您可能想问一个更具体的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T12:17:21.260

iBoxDB 是另一种选择。它是一个用于 java 的轻量级数据库。您可以自定义复制。

[https://github.com/iboxdb/forjava](https://github.com/iboxdb/forjava)

# html - 为什么这个绝对定位的元素不相对于它的容器定位？

> ID：13034755
> 
> 赞同：0
> 
> 时间：2012-10-23T16:07:18.780
> 
> 标签：html, css, positioning, css-position

我有这个简单的代码来`div #container`并排放置两个元素。在其中的每一个中，都有一个`div #child`我想相对于其父级 ( `div #container`) 定位的子级。

```
<style>
.container {
    float:left;
    margin-right: 10px;
}

.child {
    position: absolute;
    left: 0.2ex;
}
</style>

<div class="container">a<br/>
    <div class="child">b</div>
</div>
<div class="container">c<br/>
    <div class="child">d</div>
</div>​ 
```

然而，与我期望的结果不同——“d”位于“c”下方但略微向右推，而“d”则位于“b”上方并略微向右。换句话说，绝对位置是相对于页面而不是其包含元素呈现的。

1.  为什么会这样？我在这里对绝对定位有什么误解？
2.  我怎样才能得到我期望的行为？

看到这个[jsFiddle](http://jsfiddle.net/JnMvS/9/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:11:12.890

绝对定位元素相对于其*包含块*的边缘进行定位，该包含块被定义为不是的第一个祖先`position: static`。

所有祖先元素都不是`position: static`，因此它是相对于视口的初始位置而言的。

如果您真的想绝对定位元素，请`position: relative`设置元素。`.container`

也就是说，看起来你最好这样做：

```
.child {
    margin-left: 0.2ex;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:09:25.720

要相对于其父级定位子级，只需添加`position:relative`到 PARENT'S 样式 - 然后所有具有 position:absolute 的子级将相对于父级是绝对的。

```
.container {
    float:left;
    margin-right: 10px;
    position:relative;
} 
```

# apache - 如何设置通配符 301 重定向，该重定向将从 index.php 中删除 URL 参数

> ID：13034759
> 
> 赞同：0
> 
> 时间：2012-10-23T16:07:41.913
> 
> 标签：apache, wildcard, http-status-code-301

好的，我以前在设置通配符重定向以从旧的 url 格式中去除对我们的根不友好的参数时遇到了一些问题。在 stackoverflow 的帮助下，我们已经对其进行了纠正和工作，但现在我遇到了 index.php 的问题？

我在使用这种 url 格式 index.php?cPath=# 的引擎中看到大量重复的 url，而 Google 正在向我强调，因为他们认为它的重复索引页面。

我尝试在我们的 htaccess 中设置此重定向，但没有成功。它不会删除参数或重定向它只是复制具有有效 200 响应的页面。

重写规则 ^index.php/.*$ /? [R=301,NE,NC,L]

我想将 index.php?cPath=# 的任何内容重定向到我们的根域。关于如何使用 apache 上的 mod_rewrite 处理这个 301 重定向的任何想法？

我还刚刚注意到我们的网站在这种 url 格式方面存在另一个问题：domain.com/?cPath=#...

所以现在我还需要重写 domain.com/?cPath=# 我不知道这个是从哪里弹出的，但我可以看到它会导致问题，因此它给出了有效的 200 响应代码。引擎真的会因为这个而爱我。

# php - 从 mysql 数据库查询中使用 php 时加快 csv 导出

> ID：13034765
> 
> 赞同：3
> 
> 时间：2012-10-23T16:08:09.430
> 
> 标签：php, mysql, codeigniter, csv

好的，所以我有一个网络系统（基于 codeigniter 并在 mysql 上运行），它允许人们通过在一系列表单中进行选择来查询邮政地址数据的数据库，直到他们到达想要的选择，非常标准的东西. 然后他们可以购买该信息并通过该系统下载。

查询运行得非常快，但是在将查询应用到数据库并将其导出到 csv 时，一旦数据集达到 30,000 条记录标记（每行大约有 40 列，其中大约 20 列全部填充每个单元格平均 20 个字符的数据）导出到 csv 可能需要 5 分钟左右。

所以，我的问题是，缓慢的主要原因是什么？是不是查询的数据结果集太大了，以至于遇到了内存问题？因此，我应该为该过程留出更多内存吗？或者，有没有更有效的方法从我没有做的 mysql 查询导出到 csv？我应该将查询的内容保存到临时表并简单地将临时表导出到 csv 吗？还是我要解决这一切都错了？此外，由于它存储结果集的方式，我正在使用 Codeigniters Active Record 进行这种禁止吗？

伪代码：

```
$query = $this->db->select('field1, field2, field3')->where_in('field1',$values_array)->get('tablename');
$data = $this->dbutil->csv_from_result($download_query, $delimiter, $newline); // the some code to save the file
$this->load->helper('download');
force_download($filename, $filedata); 
```

欢迎任何建议！感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:33:26.913

暂时忽略 Codeigniter，您基本上有三个使用 PHP 导出 CSV 的选项：

*   到磁盘 - 通常是最慢的选项
*   记忆 - 通常是最快的选择
*   直接进入浏览器

在您的情况下，我会跳过任何内置的 Codeigniter CSV 函数并尝试直接流式传输到浏览器（完整示例请参见上面的链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:57:32.707

30,000 条记录 * 40 列 * 20 字节 = 24,000,000 字节

如果这是一个繁忙的共享服务器，那么我可以想象这是一个磁盘 I/O 瓶颈。如果它是基于 Windows 的服务器，那么可能还会发生一些分页以减慢它的速度。

尝试跳过磁盘并直接写入网络。

# mysql - 如何使用 MySQL UPDATE 删除连字符？

> ID：13034769
> 
> 赞同：11
> 
> 时间：2012-10-23T16:08:12.833
> 
> 标签：mysql, sql

> **可能重复：**
> [如何使用 mySQL replace() 替换多条记录中的字符串？](https://stackoverflow.com/questions/4271186/how-can-i-use-mysql-replace-to-replace-strings-in-multiple-records)
> [MySQL搜索忽略连字符](https://stackoverflow.com/questions/4925791/mysql-search-to-ignore-hyphens)

使用没有 php 的 mysql UPDATE 从字段中删除连字符的最佳方法是什么？

```
field: 211-555-1212 > 2115551212 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-23T16:10:57.513

您可以使用该[`REPLACE()`](http://dev.mysql.com/doc/refman/5.0/en/replace.html)功能，对于`UPDATE`

```
UPDATE yourtable
SET field = replace(field, '-', '') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/367954/1)

对于`SELECT`：

```
SELECT replace(field, '-', '') field
FROM yourtable 
```

# javascript - 如何禁用 jQuery-UI 按钮集中的一个按钮？

> ID：13034775
> 
> 赞同：2
> 
> 时间：2012-10-23T16:08:27.903
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-button, jqueryi-ui-buttonset

这里的例子：

[http://jsfiddle.net/UVHtu/19/](http://jsfiddle.net/UVHtu/19/)

我需要填空：

**HTML：**

```
<div id="options">
    <input type="radio" id="op_a" name="op" value="a" />
    <label for="op_a">Option A</label>
    <input type="radio" id="op_b" name="op" value="b" />
    <label for="op_b">Option B</label>
    <input type="radio" id="op_c" name="op" value="c" />
    <label for="op_c">Option C</label>
</div>
<input type="button" id="disable_button" value="Disable Option B" />
​ 
```

**JavaScript：**

```
$("#options").buttonset();

$("#disable_button").click(function(){
    // What goes here to disable option B?
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T16:14:10.363

```
$("#options").buttonset();

$("#disable_button").click(function(){
    // What goes here?
    $('#op_b').attr("disabled", "disabled");
    $("#options").buttonset("refresh");
}); 
```

# php - 添加记录后刷新 div

> ID：13034782
> 
> 赞同：0
> 
> 时间：2012-10-23T16:08:47.933
> 
> 标签：php, jquery, ajax

我之前也发过同样的问题，但没有得到任何反馈！但是，我仍然无法解决这个问题。所以我有一个 index.php，它在我的数据库中显示用户。我正在使用 jquery UI 对话框表单来添加新用户。问题是我想在添加新用户时显示一条消息，并将其显示在显示该用户的表中。我成功地将记录添加到数据库中，但是我必须刷新整个页面才能使添加的新项目在表中可见。这是我的桌子：

```
<div id="users">
    <tr>
        <td>//users's informations</td>
    </tr>
</div> 
```

添加用户的jquery代码：

```
//some vars
dataString = //dataString
$.ajax({
    type: "POST",
    url: "create.php",
    data: dataString,
    success: function () {
        $(#users).load("index.php", function () {
            display_message("user added");)
        };
    }
});
$(this).dialog("close");
return false; 
```

所以当我点击创建一个新用户时，它只会显示一个 index.php 加载的空白页面。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:13:39.493

您忘记`"`在选择器周围放置

```
 success: function() {
                 $("#users").load("index.php", function() {
-------------------^
                      display_message("user added");
                      )};
               } 
```

编辑：

> 但我必须刷新整个页面才能使添加的新项目在表格中可见。

如果您想在成功回调中或对话框关闭后刷新整个页面，请输入此行

```
location.reload(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:17:07.233

假设您正在从您的 ajax 请求中检索用户信息：

```
success: function(userinfos) {
                 $("#users").append($('<tr><td>'+userinfos+'</td></tr>'))
                 display_message("user added");
               } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:17:12.583

在您的 create.php 中，使用 html 格式化 div。确保此 html 打印在页面中，而不是存储在变量中。

这是您要在 index.php 中显示的格式。然后在你的成功函数上以下面的方式编写它。

```
$.ajax({
type: "POST",
url: "create.php",
data: dataString,
success: function (data) {
        $("#users tr td").html(data);
    }
}); 
```

# java - 渲染 Play Framework 2 视图

> ID：13034793
> 
> 赞同：0
> 
> 时间：2012-10-23T16:09:26.653
> 
> 标签：java, scala, playframework, playframework-2.0

当谈到游戏框架时，我只是有点困惑。我已经弄清楚了大部分事情，但似乎每天都有新的东西出现。

无论如何，今天的事情是这样的：我的 scala 模板代码在我渲染的文档中显示为纯文本。也许它的语法错误，也许它的 play 1.0 语法，我不知道。模板如下所示：

```
@(model : models.Menu)

@main("Bearings") {

<div id="bearings_container">

    <div id="menu">
    <ul id="firstLevel">
    #{list items:model.items,as:'menuItem'}
        <li id="${menuItem.name}" class="firstLevel">${menuItem.name}</li>
        <ul id="${menuItem.name}- submenu">
        #{list items: menuItem.subMenu, as:'subMenuItem'}
            <li id="${subMenuItem.name}" class="secondLevel">${subMenuItem.name}</li>
            <ul id="${subMenuItem.name}- submenu">
            #{list items: subMenuItem.subMenu, as:'subSubMenuItem'}
            <li id="${subSubMenuItem.name}" class="thirdlevel">${subSubMenuItem.name}</li>
            #{/li}
            </ul>
        #{/li}
        </ul>
    #{/li}
    </ul>
    </div>
</div>
} 
```

我确定这很简单。有任何想法吗？

编辑：这是控制器动作：

```
public static Result bearings()
{
    Menu menu = BuildMenu();
    return ok(views.html.bearings.render(menu));
} 
```

结果就是上面代码的直接 HTML 结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T16:37:50.070

这就是[Play 1.0 模板语法](http://www.playframework.org/documentation/1.0/templates#syntax)。Play 2 中的模板语法[完全不同](http://www.playframework.org/documentation/2.0.4/ScalaTemplates)。

公平地说，play 文档确实使这种混淆变得容易。在我意识到 URL 显示为 1.0 之前，我发现自己阅读了一个 Play 1.0 文档页面，我通过 Google 搜索获得了一段时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:29:16.853

如果输出看起来像纯 HTML，我会尝试检查`@main`. 请提供`main`模板来源。

# c++ - 在cpp中定义模板专业化？

> ID：13034799
> 
> 赞同：16
> 
> 时间：2012-10-23T16:09:41.430
> 
> 标签：c++, visual-studio, templates, template-specialization

我可以像这样在cpp中定义一个专门的函数......

// 标题

```
template<typename T>
void func(T){}

template<>
void func<int>(int); 
```

// cpp

```
template<>
void func<int>(int)
{} 
```

如何在 cpp 的专用类中定义方法？像这样（这不起作用，我明白`error C2910: 'A<int>::func' : cannot be explicitly specialized`了）......

// 标题

```
template<typename T>
struct A
{
    static void func(T){}
};

template<>
struct A<int>
{
    static void func(int);
}; 
```

// cpp

```
template<>
void A<int>::func(int)
{} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:28:51.927

`.cpp`在您的文件中使用以下语法：

```
void A<int>::func(int)
{
} 
```

这是 Visual C++ 的一种特性。

有关详细信息，请参阅[MSDN C2910 错误描述](http://msdn.microsoft.com/en-us/library/cx7k7hcf%28v=vs.80%29.aspx)：

> 由于在 Visual Studio .NET 2003 中完成的编译器一致性工作，也会生成此错误：。对于将在 Visual Studio .NET 2003 和 Visual Studio .NET 版本的 Visual C++ 中有效的代码，**删除模板 <>**。

# vb.net - 打开记事本（日志文件）时如何在文本末尾设置光标位置？

> ID：13034800
> 
> 赞同：0
> 
> 时间：2012-10-23T16:09:41.703
> 
> 标签：vb.net, winforms

在我的应用程序中，我在记事本中添加/附加异常日志，现在日志太大了，所以为了方便用户，我决定将光标位置设置在日志文件文本的末尾，这样当用户从应用程序单击“查看日志”按钮时/他可以显示最近的日志。所以为了避免滚动我想最后设置光标。

目前我只是使用 :`Process.Start("notepad.exe",Path)`打开日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:18:41.487

1.  记事本启动后，找到它的窗口。您可以使用[`user32.dll.FindWindow`](http://social.msdn.microsoft.com/Forums/da-DK/csharpgeneral/thread/c9ae6163-b31a-407f-88ba-e290a14a60ee).
2.  用于`SendMessage`将带参数的[WM_VSCROLL](http://msdn.microsoft.com/en-us/library/bb787577%28VS.85%29.aspx)`SB_BOTTOM`发送到此窗口。

# javascript - 这是 jquery data() 的可接受用法吗？

> ID：13034801
> 
> 赞同：1
> 
> 时间：2012-10-23T16:09:47.250
> 
> 标签：javascript, jquery

我正在使用 jquery data() 来附加我想在单击另一个 div ( `.panel_button`) 时显示的 div 的名称。当文档准备好时，我正在将此 div 的 id 附加到按钮上。这是一种可行的方法吗？还是它太耗费资源且看起来不专业？

```
$(document).ready(function(){

    $('#sample_button').data('panel', 'sample_kit_container');
    $('#mail_button').data('panel', 'mail_container');
    $('#mbillboard_button').data('panel', 'mbillboard_container');

    $('.panel_button').on('click', function(){

        $('.secondary_panel').hide();
        var panel = $(this).data('panel');
        $('#' + panel).show();

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:13:17.320

是的，那应该工作得很好。作为替代方案，您可以存储实际元素本身（假设它已经存在）而不是每次都找到它：

```
$('#sample_button').data('panel', $('#sample_kit_container'));
$('#mail_button').data('panel', $('#mail_container'));
$('#mbillboard_button').data('panel', $('#mbillboard_container'));

$('.panel_button').on('click', function(){

    $('.secondary_panel').hide();
    var panel = $(this).data('panel');
    panel.show();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:13:53.050

另一种选择是将实际的 jQuery 元素存储在 data 属性中，因此无需进行第二次选择：

```
$(function(){

   $('#sample_button').data('panel', $('#sample_kit_container'));
   $('#mail_button').data('panel', $('#mail_container'));
   $('#mbillboard_button').data('panel', $('#mbillboard_container'));

    $('.panel_button').on('click', function(){

        $('.secondary_panel').hide();
        var panel = $(this).data('panel');
        panel.show();

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:18:26.870

@thomas，在我看来，您的解决方案实际上比其他答案中的解决方案更好。

在 data 属性中包含整个对象可能并不总是有效。例如，如果`$('#sample_kit_container')`对象在加载时不存在，而是在 ajax 加载时不存在怎么办。

...

只有一条小评论！为什么不调用数据对象：panelId。它会更直观一些。

# ocaml - 代码完成不适用于 typerex 中的 js_of_ocaml

> ID：13034806
> 
> 赞同：2
> 
> 时间：2012-10-23T16:10:00.863
> 
> 标签：ocaml, typerex, js-of-ocaml

是否可以在 Typerex 中为外部模块启用类型完成？特别是我正在尝试使用 js_of_ocaml。

我可以在代码完成中看到本地标识符，所以它肯定是启用的，但是当我输入（例如）时，`Dom_html.`我没有得到模块内容的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:44:24.067

TypeRex 版本 1 不提供对具有语法扩展名的文件的补全，除非您使用 camlp4 玩一些技巧。

TypeRex 版本 2 会更好地工作，因为它将基于 OCaml 的宽松语法，并且通常大多数标准语法扩展都与这种宽松语法兼容。

版本 2 尚未发布，但您仍然可以在`typerex2`存储库的分支中试用。

# android - 从 onWindowFocusChanged 调用成员函数时不可能出现空指针异常

> ID：13034811
> 
> 赞同：2
> 
> 时间：2012-10-23T16:10:24.263
> 
> 标签：android, nullpointerexception

请帮助理解一个奇怪的空指针异常，它似乎只发生在特定设备上（目前仅从不同的平板电脑报告，例如：Nexus-7、华硕......）。

从其他成员函数调用当前活动的成员函数时发生空指针异常：

```
10-22 13:50:09.190 E/AndroidRuntime(4445): FATAL EXCEPTION: main
10-22 13:50:09.190 E/AndroidRuntime(4445): java.lang.NullPointerException
10-22 13:50:09.190 E/AndroidRuntime(4445): at com.plasmobit.CosmicPatrol.ActLogBook.onWindowFocusChanged(SourceFile:194)
10-22 13:50:09.190 E/AndroidRuntime(4445): at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2366)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.view.View.dispatchWindowFocusChanged(View.java:5740)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:851)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2557)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.os.Looper.loop(Looper.java:137)
10-22 13:50:09.190 E/AndroidRuntime(4445): at android.app.ActivityThread.main(ActivityThread.java:4424)
10-22 13:50:09.190 E/AndroidRuntime(4445): at java.lang.reflect.Method.invokeNative(Native Method)
10-22 13:50:09.190 E/AndroidRuntime(4445): at java.lang.reflect.Method.invoke(Method.java:511)
10-22 13:50:09.190 E/AndroidRuntime(4445): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-22 13:50:09.190 E/AndroidRuntime(4445): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-22 13:50:09.190 E/AndroidRuntime(4445): at dalvik.system.NativeStart.main(Native Method) 
```

第 194 行的代码是被覆盖的 onWindowFocusChange 活动接口的一部分。它只是一个无参数成员函数的调用：

```
@Override
public void onWindowFocusChanged(boolean hasFocus)
{
    ...
    doSomeStuff();  // Line: 194
    ...
}

private void doSomeStuff()
{
    ....
} 
```

因为我们在 onWindowFocusChange 函数内部，所以 ActLogBook 活动实例的 this 指针应该是有效的，那么**这里的空指针异常怎么可能呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T10:46:58.923

不知道你有没有想过这个。我刚刚遇到了类似的问题，因为这是唯一相关的谷歌搜索，我想我会分享我的发现，以防它对某人有帮助。

我在同一个实例上对另一个方法的无参数方法调用抛出了一个可重现的 NPE。最终我想尝试在没有 Proguard 的情况下构建我的 apk。突然，堆栈跟踪在似乎正在抛出 NPE 的方法内部的顶部可见另一条线。然后它变得更有意义了。

所以再试一次，但在调试过程中不要使用 Proguard。我想一定有一些错误使 Proguard 有时会省略堆栈跟踪顶部的行。

# c# - 模拟读卡器

> ID：13034814
> 
> 赞同：3
> 
> 时间：2012-10-23T16:10:34.533
> 
> 标签：c#, winapi, c#-4.0, pcsc, winscard

我正在 C# 中使用 winscard.dll 与智能卡进行通信。现在我没有可以测试的读卡器，所以我现在正在处理基本的 PInvoke 层，但我无法测试它，因为我没有运行智能卡服务。现在的问题是：

有没有办法在 Windows 上模拟智能卡（读卡器），以便从 winscard api 中看到？

# jquery - 如何仅突出显示顶级下拉菜单上的 LINK 并触发动画，而不是整个 Li 类？

> ID：13034828
> 
> 赞同：0
> 
> 时间：2012-10-23T16:11:01.790
> 
> 标签：jquery, animation, drop-down-menu, highlight

我正在使用一个简单的 Jquery 下拉菜单，在这里可以找到[http://wabism.com/jquery-drop-down-menu-tutorial/](http://wabism.com/jquery-drop-down-menu-tutorial/)

我只是想知道如何让链接触发菜单保持突出显示，同时将鼠标悬停在下拉列表中的链接上。另外，只让顶级菜单的链接触发动画而不是整个 li 类......

有人帮我修复了禁用动画重复的代码。所以我用这个替换了默认插件代码//

```
$('body').ready(function() {
$('.dropdown').hover(function() {
if ($(this).find('.sub_navigation').is(":visible")) {
$(this).find('.sub_navigation').slideUp();} else {
$(this).find('.sub_navigation').slideDown();}
});
}); 
```

这是一个小提琴// [http://jsfiddle.net/tUYfw/90/](http://jsfiddle.net/tUYfw/90/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:36:10.143

> 我只是想知道如何让链接触发菜单保持突出显示，同时将鼠标悬停在下拉列表中的链接上。

```
.dropdown:hover > a {
  background-color: #ccc;
} 
```

由于`.dropdown`列表项包含整个下拉菜单，因此只要光标与下拉菜单交互，它将始终悬停在上方。但是我们不希望整个列表项都有灰色背景，只有链接。所以我们使用直接子选择器来设置父链接的样式。

> 另外，只让顶级菜单的链接触发动画而不是整个 li 类......

这有点棘手，因为悬停在整个父列表项上的行为是允许下拉菜单保持打开状态的原因。

为什么只需要链接来激活菜单？如果你解释你的推理，也许我们可以建议一个更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:14:49.800

```
$('body').ready(function() {
    $('.dropdown a').bind('onmouseover',function() {
        $this = $(this).closest('.dropdown');
        $this.find('.sub_navigation').slideDown();
    });
});​ 
```

[http://jsfiddle.net/mblase75/T6mhX/](http://jsfiddle.net/mblase75/T6mhX/)

[http://api.jquery.com/closest](http://api.jquery.com/closest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:16:19.913

您可以更改选择器以选择锚标记，然后修改 jQuery 代码以改用 parentNode。

```
$('body').ready(function() {
    $('.dropdown a').hover(function() {
        if ($(this.parentNode).find('.sub_navigation').is(":visible")) {
            $(this.parentNode).find('.sub_navigation').slideUp();
        } else {
            $(this.parentNode).find('.sub_navigation').slideDown();
        }
    });
});​ 
```

更新了 jsfiddle：http: [//jsfiddle.net/tUYfw/93/](http://jsfiddle.net/tUYfw/93/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:24:06.960

如果所有 .dropdowns 都是等效的，则可以使用第一个子选择器仅对第一个选择器执行某些操作

```
$('.dropdown:first-child').hover(function() {... 
```

[http://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)

# objective-c - 同一个 NSManagedObjects 之间的多个关系

> ID：13034831
> 
> 赞同：1
> 
> 时间：2012-10-23T16:11:11.290
> 
> 标签：objective-c, ios, cocoa, core-data, nssortdescriptor

An`Author`有多个`Books`，两者都`NSManagedObjects`使用 Core Data 建模为一对多关系。20% 的时间我只需要知道作者写了多少本书，所以我检查了`author.books`.

40% 的时间我需要这些数据按发布日期的顺序排列，40% 的时间我需要它按标题排序。多个类将要访问这些有序列表。

**问题 1**

添加两个额外的方法是否合理`Author : NSManagedObject`？由于我需要从多个地方请求它们，因此它似乎比每次在发出请求的类中对 NSSet 进行排序更聪明。IE：

```
@property NSSet *books; //core data generated - just returns the unordered set
- (NSArray *)booksByDate //applies an NSSortDescriptor to self.books, returns an NSArray
- (NSArray *)booksByTitle //applies an NSSortDescriptor to self.books, returns an NSArray 
```

**问题2**

事实证明，使用`NSSortDescriptor`它的成本很高，并且会影响 UI 性能。理想情况下，我想尝试使用 new(ish)`NSOrderedSet`按顺序对关系建模，看看是否有性能优势。但我真的不能选择哪种方式来安排关系，因为无论我选择哪种方式（按日期或按标题），40 多岁的时间都是非最佳的。更不用说我以后可能想添加更多排序的变体。

有什么方法可以两全其美，并在我的核心数据模型中存储 3 次关系？一次用于无序关系 ( `NSSet`)，一次用于有序关系 ( `NSOrderedSet`)。如果保持所有三个属性彼此一致可以是自动的，我只会考虑这一点 - 也许通过调整`NSManagedObject`添加/删除/更新其书籍的方式。例如，我想以某种方式自定义`author.addBook`也将同一本书（在正确的位置）插入到`author.booksByDate`and`author.booksByTitle`中。并且可能隐藏

这样的事情可能吗？建议？请记住，我的主要目标是加快有序列表的检索速度——我愿意为插入/更新/删除牺牲写入时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:22:02.017

我建议在请求排序书籍时尝试进行排序。如果你在 UITableView 或类似的界面元素上展示这个列表，你可以使用 NSFetchedResultsController 和它的缓存系统来缓存你的排序书籍列表。这意味着当您尝试访问按日期/标题排序的书籍时，确定书籍顺序的计算已被缓存，您的列表将生成更快。[我在这里](https://stackoverflow.com/questions/13016624/fetched-property-in-core-data/13018036#comment17669164_13018036)为类似问题提供了类似的解决方案。

# r - 对齐 R 中的两个图（plot + image.plot）

> ID：13034833
> 
> 赞同：0
> 
> 时间：2012-10-23T16:11:23.547
> 
> 标签：r

我有一个由两个图组成的图，一个线图和一个图像图。[这](http://ubuntuone.com/7YYXEzDs9tkIsh9UoD5XNW)是一个例子

我的问题是图像（底部）未与顶部图中的 x 轴对齐。鉴于图像是线条的投影，我想对齐它们。

有任何想法吗？

编辑：我正在使用基本的东西，这是简化的代码，

```
layout(matrix(seq(1,2), ncol = 1, byrow=T)) #,heights=c(0.5,0.25,0.25))
par(mar=c(5, 5, 3, 3), cex=mycex)

plot.default(X,Y,type=typ,pch=pc,col="black",axes=F,xlab="",ylab="",main="",xlim=c(0,P),ylim=c(0,max(Y)))
#other lines and polygons of top plot
axis(1); axis(2); title(xlab=xtitle,ylab="mean Y",main="")
image.plot(t(as.matrix(Y1)), col=jet.colors, axes=F, main="") 
```

# android - Android - 出于测试目的强制 ANR

> ID：13034837
> 
> 赞同：9
> 
> 时间：2012-10-23T16:11:41.440
> 
> 标签：android, android-anr-dialog

为什么我不能使用此代码强制 Android [ANR ？](http://developer.android.com/guide/practices/responsiveness.html)没有日志消息或弹出。该应用程序只是延迟启动。

[更新]

我什至连 View.setOnClickListener 或 BroadcastReceiver.onReceive 都睡不着！

有诀窍吗？

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            Log.e("Test", "", e);
        }
    }
} 
```

> 我正在使用带有库存 Android 3.2 的三星 GT-6200L

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T16:58:39.087

在 onTouchEvent 中尝试一下。在 onCreate 你的活动没有完全运行

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d(TAG,"onTouchEvent");  
    while(true) {}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T10:48:00.803

我昨天遇到了同样的问题，我发现使用简单的调试构建 ANR 对话框根本不会出现。（虽然 UI 线程完全挂起。）

但在导出并正确签署应用程序后，对话框正确弹出（在上述每种情况下）。但是我仍然不确定是什么真正阻止了弹出 ANR 消息，也许其他人可以稍后澄清这一点......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T16:23:29.037

尝试使用：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    int a=0;
    while(true) {
        a++;
    }       
} 
```

您的代码可能无法正常工作，因为它设置得太早了，并且 Activity 可能还没有完全初始化和创建。使用上面的代码，启动活动并在屏幕上触摸/滑动，然后等待 ANR 对话框弹出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-09T09:55:54.570

[ANR-WatchDog 项目](https://github.com/SalomonBrys/ANR-WatchDog)有一个[测试应用程序](https://github.com/SalomonBrys/ANR-WatchDog/tree/master/testapp)，它以可靠的方式生成 ANR（与 ANR 一样可靠）：应用程序由于死锁而挂起。

它的要点：

1.  在您的活动中准备一个锁定对象作为私有字段： `final Object mutex = new Object();`

2.  有一个线程在关键部分执行一些工作，并且`android.os.Handler`发布工作取决于相同的锁。

    ```
    new Thread(new Runnable() {
      @Override
      public void run() {
        synchronized (mutex) {
          while (true) {
            try {
               Thread.sleep(60000);
            }
            catch (InterruptedException e) {
              e.printStackTrace();
            }
          }
        }
      }
    }).start();

    new Handler().postDelayed(new Runnable() {
      @Override
      public void run() {
        synchronized (mutex) {
          // Shouldn't happen
          throw new IllegalStateException();
        }
      }
    }, 1000); 
    ```

例如，将上面的代码片段放在按钮单击处理程序中应该可以解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T16:59:37.817

在您的活动中制作一个按钮。

```
public void onBtn1(View v) {
   int a = 0;
   while(true) {
      a++;
   }
} 
```

让按钮执行上面的代码。垃圾邮件用手指点击按钮 =)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T08:02:51.453

我将此代码用于强制 ANR

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void force(View view){
        while(true) {}
    } 
```

我刚刚在 xml 文件中创建了一个简单的按钮并设置`android:onClick=force`

# app-store - 如果取决于其他交互，如何将应用程序发送到 AppStore 进行审批

> ID：13034838
> 
> 赞同：1
> 
> 时间：2012-10-23T16:11:46.700
> 
> 标签：app-store, appstore-approval

我有一个类似于叫出租车的应用程序。这取决于其他人回答用户请求。鉴于除非有人在计算机前回答请求，否则无法看到响应功能，我应该如何将其提交给苹果。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:20:55.967

[当您在iTunes Connect](https://itunesconnect.apple.com)中上传您的应用程序二进制文件时，您可以将此类信息放在应用程序的“审阅者注释”部分中，以向 Apple 解释他们需要做什么和/或他们将或不能自我测试的内容。

# java - 固定定时器和随机方向

> ID：13034841
> 
> 赞同：0
> 
> 时间：2012-10-23T16:12:04.287
> 
> 标签：java, random, timer

您好，作为一名初级 Java 程序员，我正忙着在 Java 中创建一个简单的 Pacman 游戏只是为了锻炼，我已经创建了一个让幽灵随机水平或垂直移动的方法，但我有一些问题我不知道如何强制它是左右或上下（所以不是同时）我现在的幽灵代码如下：

```
 public void moveUp() {

 }

 public void moveLeft() {

     if (g1x >= 500) { g1x = 500; g1r = false; }
     else if (g1x <= 0) { g1x = 0; g1r = true; }

 }

 public void moveRight() {

     if (g1x >= 500) { g1x = 500; g1r = false; }
     else if (g1x <= 0) { g1x = 0; g1r = true; }

 }

 public void moveDown() {

 }

public void paintComponent(Graphics g) {

    super.paintComponent(g);
    // pacman movement
    diameter = 25;   
    pacman.drawPacMan(g, getHorPlaats(), getVerPlaats(), diameter, getView(), Color.yellow);

    // ghosts movement
    g1x += ghostSpeed * (Math.random() > 0.5? 1 : -1); // random direction

     Random randomGen = new Random();
     // generate a random number, between 0 - 3
     int randomize = randomGen.nextInt(4);

    switch(randomize) {
     case 0:
         moveUp();
         System.out.println("up");
         break;
     case 1:
         moveLeft();
         System.out.println("Left");
         break;
     case 2:
         moveRight();
         System.out.println("Right");
         break;
     case 3:
         moveDown();
         System.out.println("down");
         break;
    }

    ghost.drawGhost(g, randomize, 40, diameter, Color.red);

} 
```

如您所见，我已将随机变量用于方向，并且水平位置是硬编码的，但水平位置也由随机化表示，但如果我同时使用它，它会产生一些奇怪的对角线运动

下一个问题是我在我的结构中使用了一个计时器，就像这样

```
 public PacMan() {

    // create timer and start timer
            javax.swing.Timer autoKlik = new javax.swing.Timer(WACHTTIJD, this);

            autoKlik.start();
} 
```

所以方向的随机值正在变为快速（500ms）但速度也配置了游戏速度所以我认为我犯了一个逻辑错误但我不知道如何解决这个问题..我是否必须分开动作？或者有没有更简单的方法来实现这一点，请与我分享你的技能，我有动力学习:)，如果你可能需要更多代码，我可以在这里发布或提供我的 github 帐户的链接，以便你查看:)

提前致谢！

完整源链接：[pacman 游戏源](https://github.com/reshadf/Java/tree/master/DeBasis/src/h04PacMan)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:29:36.827

我建议将关注点分开：

*   一组模拟模拟的类只包含实体和逻辑
*   一组绘制 pacman 的图形类
*   一个控制器来处理动作并将它们委托给模型，由摇摆类触发

在paint() 方法中，出于性能原因，只进行绘画，从不“新建”，也不要调用复杂的方法。框架经常调用 Paint。

# google-apps-script - 将电子表格分成两个或更多电子表格？

> ID：13034844
> 
> 赞同：1
> 
> 时间：2012-10-23T16:12:21.113
> 
> 标签：google-apps-script, spreadsheet

如何在 google-apps-script 中将 google 电子表格（大约 100 张）分成两个（或更多）电子表格（每个大约 50 张）？

唉，由于谷歌错误（参见[https://productforums.google.com/d/topic/docs/H2ZakBguOgk/discussion](https://productforums.google.com/d/topic/docs/H2ZakBguOgk/discussion)），我无法复制整个电子表格文件并删除每个电子表格中的一些工作表。

我只能在另一个电子表格上一张一张地复制工作表，如果复制成功，则删除原始工作表。

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:54:08.367

这是一个应该做你想做的代码片段，我没有测试它，所以也许你必须调整一些细节，但总体思路就在那里......

**编辑：**我测试并进行了更正以使其正常工作......*对于第一个版本中的拼写错误感到抱歉*

```
function splitSS() {
var oldFileID = 'original ss Id'
var newFile = DocsList.getFileById(oldFileID).makeCopy()
var newFileID = newFile.getId()
var ss = SpreadsheetApp.openById(newFileID);
Logger.log(ss.getNumSheets())
var todel = parseInt((ss.getNumSheets())/2);
Logger.log(todel)
var tokeep = ss.getNumSheets()-todel
Logger.log(tokeep)
    for (pa=ss.getNumSheets()-1;pa>tokeep;--pa){ 
      ss.setActiveSheet(ss.getSheets()[pa]);
      var delsheet = ss.deleteActiveSheet(); // delete sheets begining with the last one
      Utilities.sleep(400);
    }
var ssold = SpreadsheetApp.openById(oldFileID);
    for (pa=todel;pa>1;--pa){ 
      ssold.setActiveSheet(ssold.getSheets()[pa]);
      var delsheet = ssold.deleteActiveSheet(); // delete sheets begining with the last one
      Utilities.sleep(400);
    }
} 
```

# c# - 如何在 Windows 窗体中拖动绘制的形状

> ID：13034847
> 
> 赞同：4
> 
> 时间：2012-10-23T16:12:51.557
> 
> 标签：c#, winforms, gdi+

我有一个用 C#/WindowsForms 编写的程序，它在面板上绘制圆圈（图形的节点）。我想将一个圆圈拖到另一个地方。

我有一本字典

```
Dictionary NodeMap<Node,Point>; 
```

所以从这个和 MouseDown 事件我可以找出我正在拖动哪个节点。

问题是目前它没有拖动节点，只是在新位置重新绘制它，所以我必须点击几次才能移动它。

我这部分的代码是：

```
private void pnlCanvas_MouseDown(object sender, MouseEventArgs e)
    {
        Node grabbedNode = new Node("-1");

        Point loc = e.Location;
        loc.X = (int) (loc.X * 1000.0 / pnlCanvas.ClientSize.Width);
        loc.Y = (int) (loc.Y * 1000.0 / pnlCanvas.ClientSize.Height);

        foreach (var n in NodeMap)
        {
            if ((Math.Abs(n.Value.X - loc.X) < (sldNodeSize.Value)) && (Math.Abs(n.Value.Y - loc.Y) < (sldNodeSize.Value)))
            {
                grabbedNode = n.Key;
                break;
            }
        }

        if (grabbedNode.Id != "-1")
        {
            NodeMap.Remove(grabbedNode);
            NodeMap.Add(grabbedNode, loc);
            DrawGraph((short)sldNodeSize.Value);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T13:26:36.003

正如 John Arlen 在评论中提到的，我不得不移动设置新位置并重新绘制到 MouseMove，只留下 MouseDown 用于检测节点。然后，在全局 Node 对象和 isDraggingNode 布尔变量的帮助下，我能够实现我的目标。谢谢！- 拉克钦

# php - 获取正则表达式

> ID：13034849
> 
> 赞同：0
> 
> 时间：2012-10-23T16:13:05.283
> 
> 标签：php, regex

我如何`https://domain.com/gamer?hid=.115f12756a8641`从下面的字符串中提取，即从**url**

`rrth:'http://www.google.co',cctp:'323',url:'https://domain.com/gamer?hid=.115f12756a8641',rrth:'https://another.com'`

Ps：我是正则表达式的新手，我正在学习。但是上面的字符串似乎是格式化的..所以必须有某种快捷方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:15:31.717

如果您的输入字符串被调用`$str`：

```
preg_match('/url:\'(.*?)\'/', $str, $matches);
$url = $matches[1]; 
```

`(.*?)`捕获`url:'`和之间的所有内容，`'`以后可以使用`$matches[1]`.

`?`尤其重要。它使重复变得不贪婪，否则它将消耗一切直到最后`'`。

如果您的实际输入字符串包含多个`url:'...'`部分，请`preg_match_all`改用。`$matches[1]`然后将是所有必需值的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:22:40.127

简单的正则表达式：

```
preg_match('/url\s*\:\s*\'([^\']+)/i',$theString,$match);
echo $match[1];//should be the url 
```

这个怎么运作：

`/url\s*\:\s*`: 匹配`url`+ [任意数量的空格] + `:`(冒号)+ [任意数量的空格]
但是我们不需要这个，这就是第二部分的来源
`\'([^\']+)/i`：匹配`'`，然后括号 ( `()`) 创建一个*组*，这将是单独存储在`$matches`数组中。将匹配的是`[^']+`：任何字符，除了撇号（`[]`创建一个字符类，`^`意思是：排除这些字符）。所以这个类将匹配任何字符，直到它到达结束/定界撇号为止。
`/i`：如果字符串可能包含`URL:'http://www.foo.bar'`，我添加了 that `i`，这是不区分大小写的标志。

就是这样。
[也许你可以在这里闻](http://www.regular-expressions.info)一闻以更好地理解正则表达式

*注意：*我不得不转义单引号，因为模式字符串使用单引号作为分隔符：`"/url\s*\:\s*'([^']+)/i"`同样有效。如果您不知道天气，您将处理单引号或双引号，您可以将引号替换为另一个 char 类：

```
preg_match('/url\s*\:\s*[\'"]([^\'"]+)/i',$string,$match); 
```

显然，在这种情况下，您必须转义用于模式字符串的分隔符......

# f# - F# 查询表达式“未定义字段、构造函数或成员‘包含’”

> ID：13034851
> 
> 赞同：6
> 
> 时间：2012-10-23T16:13:13.457
> 
> 标签：f#, query-expressions

我正在尝试从查询表达式页面中获取此示例。我已经完成了数据库设置，并且编写了许多小代码。

```
 let idQuery = query { for id in [1; 2; 5; 10] do
                  select id }

    query { 
       for student in db.Student do
       where (idQuery.Contains(student.StudentID))
       select student
    } 
```

但我得到的只是错误：

> 未定义字段、构造函数或成员“包含”

我错过了什么？我还有其他例子可以工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T16:16:09.743

我需要`System.Linq`导入命名空间。

# windows - 通过 windows sendto 的脚本因超过 20 项而失败

> ID：13034853
> 
> 赞同：1
> 
> 时间：2012-10-23T16:13:21.723
> 
> 标签：windows, batch-file, sendto

我制作了一个小脚本，这样我就可以在资源管理器（在 Windows XP 上）中选择一些文件，右键单击，然后发送到。该脚本最多可处理 20 个文件，但在选择 21 个或更多文件时会失败。为什么以及如何解决这个问题？

```
:Loop
If "%~dpn1"=="" Goto :EOF
convert "%~dpn1.jpg" "%~dpn1_dvr_hires.tif"
convert "%~dpn1.jpg" -scale 150 -density 72 "%~dpn1_dvr_hires_renamed.jpg"
Shift 
Goto Loop 
```

当我拖放或使用 sendto 菜单时：<20 个文件，并且命令按预期运行正常，但 >20 并且我得到“Windows 无法访问指定的设备、路径或文件。您可能没有适当的权限访问该项目。” 我已经检查并更改了权限，权限似乎不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:42:41.917

发送到使用与拖放相同的机制。构建了一个命令行，其中包含每个文件名的完整路径作为参数。最大行长度为 8191 字节。我想您有可能仅使用 21 个文件就达到了该限制，但这不太可能。

更有可能的情况是您可能遇到包含`&`和/或`^`字符的文件名。“拖放”/“发送到”存在一个错误，无法正确引用包含`&`or的文件名`^`。这是令人沮丧的，因为包含空格的名称被正确引用。

有关更多信息和可能的解决方案，请参阅[“Droplet”批处理脚本 - 包含 & 符号的文件名。](https://stackoverflow.com/a/8550398/1012053)

# list - 如何连接两个 Snoc 列表？

> ID：13034856
> 
> 赞同：4
> 
> 时间：2012-10-23T16:13:31.583
> 
> 标签：list, haskell, algebraic-data-types

我必须构建一个Snoc列表，与Cons相反。我已经完成了向前添加一个元素我不知道如何连接两个列表。现在的情况是这样的：

```
module Tsil where

data Tsil a = Lin
            | Snoc (Tsil a, a)
            deriving (Eq, Ord, Show, Read)

empty :: Tsil a
empty = Lin

infixr 2 |: 
(|:) :: a -> Tsil a -> Tsil a
(|:) a t = Snoc (t, a)

infixr 5 |++
(|++) :: Tsil a -> Tsil a -> Tsil a 
(|++) a Lin = a
(|++) Lin a = a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:40:38.053

```
(|++) l (Snoc (t,x)) = Snoc (l |++ t,x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:49:34.500

您的列表类型与 Haskell 的相同，因此只需将其设为 Haskell 列表，连接，转换回来。Haskell 中的可重用性万岁 ;-)

```
toList Lin = []
toList (Snoc (xs, x)) = x : toList xs

toTsil [] = Lin
toTsil (x:xs) = Snoc (toTsil xs, x)

a (|++) b = toTsil $ toList a ++ toList b 
```

# arrays - 重新排列旋转的排序数组

> ID：13034859
> 
> 赞同：0
> 
> 时间：2012-10-23T16:13:40.803
> 
> 标签：arrays, rotation, sorting

我见过几个与*旋转排序数组*相关的问题，例如搜索枢轴元素或搜索此类数组中的元素。

但是，我没有发现任何与在**不使用排序的情况下将此类数组重新排列为其原始形式有关的问题。**

所以我的问题是：*有没有一种有效的方法或技巧，可以在不使用额外内存的情况下将旋转的排序数组重新排列为原始形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:36:52.053

这是我要做的事情。我会使用二进制搜索的变体找到起始元素。

一旦找到，如果你可以使用外部存储器，它可以在 O(n) 中完成所以总时间是 O(lgn) + O(n) 即 O(n)

具体到轮换：看到 ajay 的评论，我同意既然我们必须就地轮换，最好的选择是冒泡排序。这是 O(n*m) 其中 m 是旋转的元素数。

但是，如果我们可以使用一些存储来保存起始元素两侧的元素，基本上，如果我们可以使用外部存储器，那么只需将每个元素放在新数组中的正确位置即可。

# r - 在 R 中有效地复制矩阵

> ID：13034861
> 
> 赞同：16
> 
> 时间：2012-10-23T16:13:46.473
> 
> 标签：r, matrix, replication

我有一个矩阵并寻找一种有效的方法来复制它 n 次（其中 n 是数据集中的观察数）。例如，如果我有一个矩阵 A

`A <- matrix(1:15, nrow=3)`

然后我想要表单的输出

`rbind(A, A, A, ...) #n times`.

显然，有很多方法可以构建如此大的矩阵，例如使用`for`循环`apply`或类似函数。但是，对“矩阵复制函数”的调用发生在我的优化算法的核心中，在我的程序一次运行期间它被调用了数万次。因此，循环、应用类型的函数和任何类似的东西都不够有效。（这样的解决方案基本上意味着在 n 上执行了数万次循环，这显然是低效的。）我已经尝试使用普通`rep`函数，但还没有找到将输出安排`rep`在矩阵中的方法所需的格式。

该解决方案 `do.call("rbind", replicate(n, A, simplify=F))` 也太低效，因为`rbind`在这种情况下使用得太频繁了。（然后，我的程序总运行时间的大约 30% 用于执行 rbind。）

有谁知道更好的解决方案？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T16:53:40.923

还有两个解决方案：

首先是对问题中示例的修改

```
do.call("rbind", rep(list(A), n)) 
```

第二个涉及展开矩阵、复制它并重新组装它。

```
matrix(rep(t(A),n), ncol=ncol(A), byrow=TRUE) 
```

由于效率是所要求的，因此必须进行基准测试

```
library("rbenchmark")
A <- matrix(1:15, nrow=3)
n <- 10

benchmark(rbind(A, A, A, A, A, A, A, A, A, A),
          do.call("rbind", replicate(n, A, simplify=FALSE)),
          do.call("rbind", rep(list(A), n)),
          apply(A, 2, rep, n),
          matrix(rep(t(A),n), ncol=ncol(A), byrow=TRUE),
          order="relative", replications=100000) 
```

这使：

```
 test replications elapsed
1                 rbind(A, A, A, A, A, A, A, A, A, A)       100000    0.91
3                   do.call("rbind", rep(list(A), n))       100000    1.42
5  matrix(rep(t(A), n), ncol = ncol(A), byrow = TRUE)       100000    2.20
2 do.call("rbind", replicate(n, A, simplify = FALSE))       100000    3.03
4                                 apply(A, 2, rep, n)       100000    7.75
  relative user.self sys.self user.child sys.child
1    1.000      0.91        0         NA        NA
3    1.560      1.42        0         NA        NA
5    2.418      2.19        0         NA        NA
2    3.330      3.03        0         NA        NA
4    8.516      7.73        0         NA        NA 
```

所以最快的是原始`rbind`调用，但假设`n`是固定的并且提前知道。如果`n`不固定，那么最快的是`do.call("rbind", rep(list(A), n)`. 这些是针对 3x5 矩阵和 10 次复制的。不同大小的矩阵可能会给出不同的排序。

编辑：

对于 n=600，结果的顺序不同（省略显式`rbind`版本）：

```
A <- matrix(1:15, nrow=3)
n <- 600

benchmark(do.call("rbind", replicate(n, A, simplify=FALSE)),
          do.call("rbind", rep(list(A), n)),
          apply(A, 2, rep, n),
          matrix(rep(t(A),n), ncol=ncol(A), byrow=TRUE),
          order="relative", replications=10000) 
```

给予

```
 test replications elapsed
4  matrix(rep(t(A), n), ncol = ncol(A), byrow = TRUE)        10000    1.74
3                                 apply(A, 2, rep, n)        10000    2.57
2                   do.call("rbind", rep(list(A), n))        10000    2.79
1 do.call("rbind", replicate(n, A, simplify = FALSE))        10000    6.68
  relative user.self sys.self user.child sys.child
4    1.000      1.75        0         NA        NA
3    1.477      2.54        0         NA        NA
2    1.603      2.79        0         NA        NA
1    3.839      6.65        0         NA        NA 
```

如果包含显式`rbind`版本，它会比`do.call("rbind", rep(list(A), n))`版本稍快，但不会快很多，并且比`apply`or`matrix`版本慢。因此，在这种情况下，对任意的泛化`n`不需要损失速度。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-23T16:19:07.417

可能这更有效：

```
apply(A, 2, rep, n) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-01T22:37:18.403

还有这种方式：

```
rep(1, n) %x% A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-01T22:48:31.067

您可以使用索引

```
A[rep(seq(nrow(A)), n), ] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-04T21:49:15.283

我出于与原始海报相同的原因来到这里，并最终更新了@Brian Diggs 比较以包括所有其他发布的答案。希望我正确地做到了这一点：

```
#install.packages("rbenchmark")
library("rbenchmark")
A <- matrix(1:15, nrow=3)
n <- 600

benchmark(do.call("rbind", replicate(n, A, simplify=FALSE)),
          do.call("rbind", rep(list(A), n)),
          apply(A, 2, rep, n),
          matrix(rep(t(A),n), ncol=ncol(A), byrow=TRUE),
          A[rep(seq(nrow(A)), n), ],
          rep(1, n) %x% A,
          apply(A, 2, rep, n),
          matrix(rep(as.integer(t(A)),n),nrow=nrow(A)*n,byrow=TRUE),
     order="relative", replications=10000)

#                                                                test replications elapsed relative user.self sys.self user.child sys.child
#5                                          A[rep(seq(nrow(A)), n), ]        10000    0.32    1.000      0.33     0.00         NA        NA
#8 matrix(rep(as.integer(t(A)), n), nrow = nrow(A) * n, byrow = TRUE)        10000    0.36    1.125      0.35     0.02         NA        NA
#4                 matrix(rep(t(A), n), ncol = ncol(A), byrow = TRUE)        10000    0.38    1.188      0.37     0.00         NA        NA
#3                                                apply(A, 2, rep, n)        10000    0.59    1.844      0.56     0.03         NA        NA
#7                                                apply(A, 2, rep, n)        10000    0.61    1.906      0.58     0.03         NA        NA
#6                                                    rep(1, n) %x% A        10000    1.44    4.500      1.42     0.02         NA        NA
#2                                  do.call("rbind", rep(list(A), n))        10000    1.67    5.219      1.67     0.00         NA        NA
#1                do.call("rbind", replicate(n, A, simplify = FALSE))        10000    5.03   15.719      5.02     0.01         NA        NA 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T16:23:32.690

将其转换为数组，复制内容并使用更新的行数创建一个新矩阵怎么样？

```
A <- matrix(...)
n = 2 # just a test

a = as.integer(A)
multi.a = rep(a,n)
multi.A = matrix(multi.a,nrow=nrow(A)*n,byrow=T) 
```

# android - 将对象保存到 sqlite - android

> ID：13034862
> 
> 赞同：1
> 
> 时间：2012-10-23T16:13:48.677
> 
> 标签：android, sqlite, persistence

我有一个对象，比如 mUser，它在 - mUser.name、mUser.gender 等中有一些值。此外，我还有另一个对象，比如 mUser 内部的 mUser.personalInfo（对不起，我不知道我应该特别提到它）。在个人信息中，还有一些项目。

IE。mUser.personalInfo.age 将返回 33。

我需要将此对象及其所有属性和子项保存到 sqlite 数据库。

程序将如何？谁能告诉我要遵循的步骤。像 - 1\. 创建表，2\. 对对象做一些事情，3\. 传递此代码.. 如果需要，可以使用一些伪代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:22:57.993

创建两个表 - 一个用于高级 UserInfo，例如 User。另一个名为 UserPersonalInfo。在第二个表中，您将有一列引用用户表中的记录。让我们称之为 user_id。它被称为外键。您应该首先存储用户信息，保留它的 id，然后将 PersonalInfo 保存在另一个表中，其中 user_id 链接到 User 表。检索时，您必须连接 User.id=UserPersonalInfo.user_id 上的两个表。现在这个连接表中的年龄列将直接指向 mUser.personalInfo.age。文字很多，希望对你有帮助。

# asp.net - 使用 Salesforce 作为第三方应用程序的身份验证服务和权利引擎

> ID：13034866
> 
> 赞同：0
> 
> 时间：2012-10-23T16:13:52.907
> 
> 标签：asp.net, salesforce

我是基于 Web 的应用程序的首席工程师，我们希望与 salesforce 紧密集成。具体来说，我们希望：

*   保存电子邮件、哈希密码/盐与联系人记录，并实现基本身份验证服务
*   将权利信息保存为联系人记录的一部分

基本上，我们希望将 salesforce 用作身份验证/权利服务。一旦联系人被“转换”为我们系统的成熟用户，我们希望能够将用户凭据添加到联系人对象，并构建一个顶点远程调用，我们的系统将使用它来验证用户身份。此外，我们还希望根据配置为联系人记录一部分的权利启用/禁用我们网站上的某些功能。

我已经阅读了有关使用 salesforce 作为身份提供者的信息，但我认为这不是我们想要的。联系人记录不允许 salesforce 登录。

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:10:46.010

他们可能需要成为客户门户或合作伙伴门户用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:32:45.563

您不需要客户门户或合作伙伴门户，有一组工具可帮助您将 Salesforce 与第三方应用程序集成，请参见此处： [http ://wiki.developerforce.com/page/Integration](http://wiki.developerforce.com/page/Integration)

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T07:30:56.020

我相信你想做的事情可能会绕过顺丰对用户的条款。如果您想通过 salesforce 对用户进行身份验证，我相信您需要为每个用户提供一个用户许可证（但是对于大量用户，有一些便宜的许可证，请联系 salesforce）。

如果您希望基于联系人对象进行访问，您可以将联系人映射到门户用户，这会创建一个额外的用户对象。从那以后，我确实认为他们正在构建的 Salesforce 身份可能是您想要的？

[http://www.salesforce.com/company/news-press/press-releases/2012/09/120919-7.jsp](http://www.salesforce.com/company/news-press/press-releases/2012/09/120919-7.jsp)

# php - 在数据库中插入数据的表单有效，但不显示成功页面

> ID：13034868
> 
> 赞同：0
> 
> 时间：2012-10-23T16:13:57.353
> 
> 标签：php, forms

我的网站上有一个简单的订单。如果我单击提交按钮，表单会将数据发送到我的数据库。这行得通。但它没有显示success.php - 它只再次显示start.php。所以肯定有误会。在我以前的主机上它有效。但现在我有了一个新的。

这是我的 php 脚本（start.php）：

```
<?php
$con = mysql_connect("localhost", "user", "pw") or die ("No connection to db possible"); 
mysql_select_db("db", $con) or die ("No connection to db possible");
mysql_query("SET NAMES 'utf8'");

if (isset($_POST['button']))
{
foreach ($_POST AS $key => $postvar)
    $_POST[$key] = stripslashes($postvar);

$_POST['name'] = mysql_real_escape_string($_POST['name']);
$_POST['strasse'] = mysql_real_escape_string($_POST['strasse']);
$_POST['plz'] = mysql_real_escape_string($_POST['plz']);
$_POST['ort'] = mysql_real_escape_string($_POST['ort']);
$_POST['mail'] = mysql_real_escape_string($_POST['mail']);
$_POST['anzahl'] = mysql_real_escape_string($_POST['anzahl']);

$sql = "INSERT INTO `bestellungen` (`name`,`strasse`,`plz`,`ort`,`mail`,`anzahl`,`datetime`)
                VALUES ('".$_POST['name']."', '".$_POST['strasse']."', '".$_POST['plz']."', '".$_POST['ort']."', '".$_POST['mail']."', '".$_POST['anzahl']."', '".date("Y-m-d H:i:s")."');";

$result = mysql_query($sql,$con);
if (!$result) echo mysql_error();
mysql_close($con);

?> 

<?php Header("Location: success.php");
exit();
?>

<?php

} else { ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:16:41.087

那是行不通的，因为`header('Location: success.php')`需要在您向浏览器输出任何内容之前发生。在调用之前，您似乎有间隙。

```
$result = mysql_query($sql,$con);
if (!$result) echo mysql_error();
mysql_close($con);

// Now its time for the header!
header("Location: success.php");
exit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:19:42.253

在 header() 重定向之前不能有任何输出。

检查您的脚本是否存在可能的错误、警告或通知，其中任何一个都会输出文本，并且不会发生重定向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T16:26:44.497

到目前为止，每当我发现这种问题时；我经常这样做肯定有两个原因。要么我在标头函数之前打印任何 html 代码，要么我没有意识到我的 success.php 也重定向到 start.php。

也许您可以检查代码中是否存在这两个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:24:43.923

以这种方式格式化。

```
$result = mysql_query($sql,$con);
if (!$result) { 

    echo mysql_error();

} else {

   Header("Location: success.php");
}

mysql_close($con);

?> 
```

# c# - 在 ASP.NET MVC 3 中使用 ASP.NET Membership e Profile

> ID：13034869
> 
> 赞同：2
> 
> 时间：2012-10-23T16:13:58.287
> 
> 标签：c#, asp.net-mvc, security, asp.net-membership

我在我的 ASP.NET MVC 3 应用程序中使用经典的 ASP.NET Membership Provider。当我通过 Membership.Validate() 方法验证用户时，我在 FormsAuthentication.SetAuthCookie() 中设置了在网站导航期间持久登录的值，但是当我尝试调用 HttpContext.User.Identify.Name 时，我得到一个字符串 空值。问题出在哪里？

PS 过去，我使用 ASP.NET Web 窗体访问控制来完成这项工作，使这种机制自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:46:17.460

你在刷新页面吗？（即 RedirectToAction？）

身份验证 cookie 将在发生完整页面刷新之后才有效。如果您在验证用户并设置 cookie 后立即检查 HttpContext.User.Identity.Name，则该值将为空。

# java - ClientBundle.enableInlining 和 ClientBundle.enableRenaming？

> ID：13034870
> 
> 赞同：1
> 
> 时间：2012-10-23T16:14:01.123
> 
> 标签：java, gwt, clientbundle

我最近在杠杆和旋钮部分阅读了这篇*文章*[，](http://code.google.com/p/google-web-toolkit/wiki/ClientBundle)请参阅以下两个条目：`ClientBundle`

 **   ClientBundle.enableInlining 是一个延迟绑定属性，可用于禁用数据：浏览器中的 URL，否则将支持将资源数据内联到已编译的 JS 中。
*   ClientBundle.enableRenaming 是一个配置属性，它将禁用强命名缓存文件的使用。

我很难将这些在行动中可视化并理解它们的作用。你在哪里设置这些属性？为什么要设置它们（即，我什么时候想要“禁用数据的使用”或“禁用强命名缓存文件的使用”）？有人可以为我提供一个真实的用例和一些代码片段吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:04:27.500

> 你在哪里设置这些属性？

延迟绑定属性在您的`gwt.xml`with中设置`<set-property>`。
请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)

> 为什么要设置它们（即，我什么时候想要“禁用数据的使用”或“禁用强命名缓存文件的使用”）？

对于调试，或者如果它们应该为您的应用程序带来的性能提升实际上弊大于利（`enableInlining'), or if you need/want to share the resources with other scripts/apps (`enableRenaming ）。

> 有人可以为我提供一个真实的用例和一些代码片段吗？

当你需要它们时，你会知道的。在此之前，请忽略它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T22:18:45.793

如果这仍然有用，我有一个需要禁用内联的真实示例。

但首先，只是为了澄清需要它的代码；

`<set-property name="ClientBundle.enableInlining" value="false" />`

在您的 XML 中禁用 DataURL 并改用图像条

我必须在我的代码中这样做，因为我的项目需要动画图像。即使是只有几帧的基本精灵在使用 DataURL 时性能也很差。浏览器只是努力在接近合理帧率的任何地方更新和显示图像。

相比之下，图像条的使用大大提高了性能。浏览器只需要改变裁剪。事实上，鉴于浏览器对动画 PNG 的支持乏善可陈，如果您需要动画图像，这可能是目前最好的方法。*

# model-checking - UPPAAL 取模示例

> ID：13034871
> 
> 赞同：1
> 
> 时间：2012-10-23T16:14:03.693
> 
> 标签：model-checking

我想将边缘的防护配置为：

```
(turn % 4) == me 
```

其中 turn 是一个时钟变量，而 me 是一个表示进程的 int。

请给我一个如何为上述谓词制作守卫的例子。

谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:45:32.330

我的答案不完全完整（所以我不会将其标记为完整）。

但是，如果您有一个“时钟 x”，并且希望时钟从 n --> 0 开始环绕，那么您可以将此保护添加到边缘。

```
if (x == n) ? 0 : x 
```

# spring - spring mvc:annotation-driven java.lang.NoClassDefFoundError: javax/servlet/AsyncListener

> ID：13034875
> 
> 赞同：1
> 
> 时间：2012-10-23T16:14:12.323
> 
> 标签：spring, spring-3

我开发了一个带有 spring 3.0 的应用程序，它运行良好。

我需要使用一些功能，`<mvc:annotation-driven/>`当我将它包含在配置文件中时，我收到错误。

以下是我使用的代码和错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context" 
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd 
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <mvc:annotation-driven />
......
</beans> 
```

**堆栈跟踪：**

```
java.lang.NoClassDefFoundError: javax/servlet/AsyncListener
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2527)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1010)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1483)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1361)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:104)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:622)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:634)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:591)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:648)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:511)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:452)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4187)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4496)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException: javax.servlet.AsyncListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1516)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1361)
    ... 42 more
Oct 23, 2012 9:24:23 PM org.apache.catalina.core.StandardContext loadOnStartup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:40:24.797

如果您使用**context:component-scan** " 尝试更改它。添加到 base-package **".*"** 作为示例：

```
"<context:component-scan base-package="controller.*/>" 
```

# vbscript - VBScript 错误 - 未找到路径；代码：800A004C，运行 QTP 的驱动程序脚本时

> ID：13034878
> 
> 赞同：0
> 
> 时间：2012-10-23T16:14:27.253
> 
> 标签：vbscript, qtp

我正在通过 VBScript 运行 QTP 的驱动程序脚本，直到最近我才遇到问题。我在虚拟机上运行它，直到最近我才收到这个错误：找不到路径，代码：800A004c，它出现在第 58 行，第 15 行，这是我正在使用的变量 strBaseFunctionPath。

我在一个单独的虚拟机上使用这个完全相同的脚本，没有任何问题。我对 VBScripting 有点陌生。我读到这与找不到文件有关，但一切都在那里，因为它创建了文件并从单独的脚本中提取。这再次在上周起作用。有任何想法吗？

```
 strEnvironment = "QA" 'QA,QA2,FEDP,STAGE,PROD,FO,TEMP
    strBuildNumber = "Build_12_44"
strProject = "HAL"
strSuite = "Full" 'Custom,Full,Smoke
bolTimeStampDate = True
bolAppendMode = False

'<-><-><-><-><-><-><-><-><-><-><-><-><-><-> TEST SUITE TESTS <-><-><-><-><-><-><-><-><-><-><-><-><-><-><->
strTestString = "C:\Quicktest\HAL\Scripts\Helper\Clear Cache and Cookies" &_
"C:\Quicktest\HAL\Scripts\HAL Travel Agent HQ\LILO Travel Agent HQ" &_
"C:\Quicktest\HAL\Scripts\HAL Academy\LILO HAL Academy" &_
"C:\Quicktest\HAL\Scripts\HAL\FE-BE Testing\Online Check-in" &_
"C:\Quicktest\HAL\Scripts\HAL\FE-BE Testing\Book A Shore Excursion" &_
"C:\Quicktest\HAL\Scripts\HAL\FE-BE Testing\Book A Cruise Tour" &_
"C:\Quicktest\HAL\Scripts\HAL\FE-BE Testing\Book A Cruise" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Find Cruises\Find Cruises - All Currencies - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Find Tours\Find Tours - All Currencies - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Contact Us\Validate Contact Us - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Special Offers\Validate Special Offers - All Currencies - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\X-Forward-For Modified\Validate Currency - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Change Email - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Change Password - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Update Account Info - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Password Email Reset - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Registration\Register New User - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Site Navigation\Site Navigation - EN" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Find Cruises\Find Cruises - All Currencies - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Find Tours\Find Tours - All Currencies - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Contact Us\Validate Contact Us - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\Special Offers\Validate Special Offers - All Currencies - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Locality\X-Forward-For Modified\Validate Currency - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Change Email - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Change Password - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Update Account Info - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\My Account\Password Email Reset - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Registration\Register New User - NL" &_
"C:\Quicktest\HAL\Scripts\HAL\Site Navigation\Site Navigation - NL"

testArray = Split (strTestString,"C:\Quicktest\")
'<-><-><-><-><-><-><-><-><-><-><-><-><-><-> END TEST SUITE TESTS <-><-><-><-><-><-><-><-><-><-><-><-><-><-><->

'<-><-><-><-><-><-><-><-><-><-><-><-><-><-> TEST SUITE CONTROLLER <-><-><-><-><-><-><-><-><-><-><-><-><->
intBeginScript = 1
intEndScript = 29
'<-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><->

'<-><-><-><-><-><-><-><-><-><-><-><-><-><-> TEST RESOURCE PATHS <-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><->
strBasePath = "C:\Quicktest\"
strBaseProjectPath = strBasePath & strProject
strBaseFunctionPath =  strBaseProjectPath & "\QTP_Runner\Functions\Runner.vbs"
'<-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-<-><-><-><-><-><-><-><-><-><-><-><-><-><->

'<-><-><-><-><-><-><-><-><-><-><-><-><-><-> OPEN FUNCTIONS FILE <-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><-><->
Dim fsObj : Set fsObj = CreateObject("Scripting.FileSystemObject")
Dim vbsFile : Set vbsFile = fsObj.OpenTextFile(strBaseFunctionPath, 1, False)
Dim myOtherScript : myOtherScript = vbsFile.ReadAll
vbsFile.Close
Set vbsFile = Nothing
Set fsObj = Nothing
ExecuteGlobal myOtherScript
RunTestSuite 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:35:43.453

在您发布的第 58 行代码中`Set vbsFile = Nothing`，我猜给您错误的行是第 55 行

```
Dim vbsFile : Set vbsFile = fsObj.OpenTextFile(strBaseFunctionPath, 1, False) 
```

我建议`print`退出`strBaseFunctionPath`并确保文件存在。

顺便说一句：下一次说哪一行产生错误而不是转储整个文件并给出文件号会更有帮助。

# login - Magento 自动登录偶尔会失败

> ID：13034880
> 
> 赞同：0
> 
> 时间：2012-10-23T16:14:32.673
> 
> 标签：login, magento-1.4

在将产品添加到购物车之前，我们使用下面的代码自动将用户登录到 Magento。

有时，下面的代码可以工作，但产品没有被添加到购物车，因为登录没有“粘住”。似乎会话是问题所在。如果我们让我们的网络服务器长时间不重启，Magento 似乎会“忘记”它创建的会话，并且下面的代码会失败，因为产品没有向购物车添加任何东西。

```
// This call is actually in a class called Login_model, function called dual_login
// It is shown below.
$lm = new Login_model();
$ret = $lm ->dual_login($Username, $Password);
if ($ret['result'] = 'SUCCESS') {
    $product_id = Mage::getModel("catalog/product") -> getIdBySku("$sku");
    $product = Mage::getModel("catalog/product") -> load($product_id);          
    $session = Mage::getSingleton("core/session", array("name" => "frontend"));
    $cart = Mage::helper("checkout/cart") -> getCart();
    $cart -> addProduct($product, 1);
    $session -> setLastAddedProductId($product -> getId());
    $session -> setCartWasUpdated(true);
    $cart -> save();          
    $cart_url = $site_url_https . "store/checkout/cart";
    header("Location: " . $cart_url);
}

// 
// dual_login code below
// 
Mage::getSingleton('core/session', array('name'=>'frontend'));
$customer = Mage::getModel('customer/customer');
$customer->setWebsiteId(Mage::app()->getWebsite()->getId());
$customer->loadByEmail($Email);
$session = Mage::getSingleton('customer/session');
$session->login($Email,$Password);
$session->setCustomerAsLoggedIn($session->getCustomer());
// 
// How can I determine here if the login was actually successful
// and the product can be added to the cart?
// 
$ret['result'] = 'SUCCESS'; 
```

如果我添加对 $session->isLoggedIn() 的调用，它会返回 true，但产品仍未添加到购物车中。

什么会导致 Magento 这样做，我将如何对其进行测试，以便我可以得到它正在发生的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:23:45.663

您的代码中的唯一线索是您正在填充客户模型，但您没有使用它来填充会话单例。你真的应该这样做吗

```
$session->setCustomerAsLoggedIn($session->getCustomer()); 
```

并不是

```
$session->setCustomerAsLoggedIn($customer); 
```

?

# svn - Subversion - 提交重新格式化的文件

> ID：13034883
> 
> 赞同：1
> 
> 时间：2012-10-23T16:14:53.030
> 
> 标签：svn, version-control, versioning, blame

我首先会说这完全有可能*是*不可能的——如果不是，那很好（好吧，这很糟糕，但我会活下去）。我知道可能会有一些“好吧，那无论如何会如何工作？” 围墙在做我想做的事，但是嘿嘿。

我想做的是在不更改任何所有权数据的情况下重新格式化 Subversion 存储库中的大量文件，或者将其变为：

```
username   | commit number
------------------------------------------------
john_smith | 1 | <?php
john_smith | 1 | echo 'Hello world';
joe_bloggs | 2 | if (isset($user)) {
john_doe   | 3 |   echo ', and hello ' . $user;
joe_bloggs | 2 | } 
```

进入这个（新行是无主的）：

```
username   | commit number
------------------------------------------------
john_smith | 1 | <?php
           |   |
john_smith | 1 | echo 'Hello world';
joe_bloggs | 2 | if (isset($user))
           |   | {
john_doe   | 3 |   echo ', and hello ' . $user;
joe_bloggs | 2 | } 
```

或者这个（新行归我所有，但更改的行不是）：

```
username   | commit number
------------------------------------------------
john_smith | 1 | <?php
mr_man     | 4 |
john_smith | 1 | echo 'Hello world';
joe_bloggs | 2 | if (isset($user))
mr_man     | 4 | {
john_doe   | 3 |   echo ', and hello ' . $user;
joe_bloggs | 2 | } 
```

或任何其他排列。

我想这样做，因为存储库中有很多格式错误的代码，我想在不拥有（几乎）整个事情的所有权的情况下清理它，因为能够很方便地击中 Blame在文件的一侧，查看每一行的最后更改，以及这些更改的原因。**使用**提交消息和所有权重新格式化将删除存储库的大部分内容，并迫使我们在日志中查找真实的人，然后对其进行比较以确保。

如果有人能想出另一种方法来重新格式化代码而不破坏 Blame，我也愿意就此提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:30:44.487

你能做到吗？不会。文件中的任何更改都会创建另一个修订版。因此，您将在`svn blame`每一行中获得一个新的修订号。毕竟，即使是无害的更改也可能导致问题。如果您的重新格式化操作更改了破坏应用程序的数据怎么办。仔细格式化该数据的开发人员不希望发现自己因此受到指责。这就是为什么即使格式更改也会更改修订。

如果需要，您可以做一些事情：修订的所有者是`svn:author`. 如果更改该修订属性，则可以更改执行提交的用户的名称。

有点限制：

*   每个提交只有一个作者，因此您必须安排提交以完成特定作者的所有文件。
*   默认情况下，Subversion 不允许您更改修订属性。您必须创建一个预修订更改挂钩以允许您更改该属性。
*   所有行都将在 中显示为该作者，`blame`并且显示的修订版将是您进行更改时的修订版。

* * *

我的建议：不要这样做。如果没有经过彻底测试，您可能会破坏某些东西。我建议使用[Jenkins 之](http://jenkins-ci.org)类的东西。我意识到 PHP 文件不需要像 Java 或 C 代码那样*编译，但您可以对文件运行语法检查器并在 Jenkins 中显示结果。*

您也许可以将[phpcheckstyle](http://code.google.com/p/phpcheckstyle/)应用程序与 Jenkins Checkstyle 插件一起使用。然后使用 cigame 插件挑战开发人员修复代码本身的格式。

每个已修复的 checkstyle 违规都会给开发人员在 cigame 插件中的积分。这将鼓励开发人员自己修复格式问题。如果您不是开发人员，则不应接触代码。否则，Finger o' Blame 可能会从创建错误代码的开发人员那里指向您，因为您更改了它——即使它只是格式化。

# ssrs-2008 - SSRS 负载测试和纯性能

> ID：13034891
> 
> 赞同：0
> 
> 时间：2012-10-23T16:15:21.017
> 
> 标签：ssrs-2008

我正在使用 SSRS 报告进行负载测试，并且对它越来越失望。我需要专家意见是否有办法提高性能。

环境设置：

1.  SSRS Report 调用从具有 5000 行的表中选择的存储过程，运行时间为 3 毫秒。
2.  基于输入参数的 C# 应用程序创建线程并并行调用 SSRS 报告。
3.  SSRS 通过`POST`对 URL 的请求在一个 NT 用户下访问。

统计：

*   MSSM Studio 中的存储过程运行 3 毫秒
*   IE 中的 SSRS 报告运行 50 毫秒
*   具有单线程的 C# 应用程序在 157 - 239 毫秒内返回结果
*   同一报告的 4 个线程平均 500 毫秒
*   8 个线程：同一报告需要 800 毫秒。
*   16 个线程：同一份报告需要 1300 毫秒。

是否有任何配置或设置可以更改，以便 SSRS 更好地处理并发调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:41:50.023

显然，RS 服务每个 CPU 只有 2 个线程可用。我在网上的各种论坛上看到过这个数字，[这里是一个](http://social.msdn.microsoft.com/Forums/br/sqlreportingservices/thread/83c32b84-88a4-433e-83a8-60dacbee7267)。

您可能会发现您尝试启动的线程实际上阻碍了性能，有效地“重载”了 RS 线程。您可以检查您的日志文件，以查看线程是否[根据 this](http://performancepointblog.com/2008/06/sql-reporting-services-what-does-that-thread-pool-pressure-warning-mean/)受到压力，并声明您可以在日志中预期以下类型的错误：

> 警告：线程池压力。将当前线程用于工作项

也许您可以查看将您正在创建的最大并发线程数与`number of CPUs the RS service has access to * 2`

# c - 如何获取字符串中的第一个单词并转换为int

> ID：13034898
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:15:59.210
> 
> 标签：c

我有一个 char 数组，我想从中获取第一个数字。

例如，如果我的 char 数组是 34 400 43 33。我想要 int 中的 34。

```
int FirstInt(char chars[])
{
    return atoi(chars.substr(0, bursts.find(' ')));
} 
```

我在想这样的事情，但它是无效的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:18:07.373

```
int FirstInt(char chars[])
{
    int x;
    sscanf(chars, "%d", &x);
    return x;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T16:21:08.057

如果您想要的只是第一个数字，则不需要标记字符串或使用 sscanf ：

```
return atoi(str); 
```

**从手册页**

> atoi() 函数将 nptr 指向的字符串的初始部分转换为 int

这意味着它会在找到非数字字符（如空格）时停止。

**编辑**：请注意，使用 atoi 检测错误是不可能的，因为它在某些实现中返回 0 错误并且不设置 errno (AFAIK)，因此使用*strtol*可能会更好， 请参阅此链接[Converting Strings to Numbers](http://www.iso-9899.info/wiki/Converting)

# xquery - 将运算符分配给xquery中的变量

> ID：13034903
> 
> 赞同：2
> 
> 时间：2012-10-23T16:16:21.847
> 
> 标签：xquery

有没有办法将数字运算符分配给 Xquery 中的变量？

我必须根据节点标签对给定的一对值执行算术表达式。

我已经设法做到这一点，但它导致了很多重复的代码。我想简化查询，而不是：

*添加功能*

*如果代码重复 - 这会调用其他函数但仍然重复*

$价值1 + $价值2

*减号函数*

*如果代码重复*

$value1 - $value2

*等用于乘法，div 等*

我想设置一个函数并向其发送一个变量，类似于以下内容：

$value1 $运营商 $value2

有没有一种简单的方法可以在 xquery 中做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:28:22.913

如果您的查询处理器支持[*XQuery 3.0*](http://www.w3.org/TR/xquery-30/)，您可以为此使用[*函数项*](http://docs.basex.org/wiki/XQuery_3.0#Function_Items)：

```
declare function local:foo($operator, $x, $y) {
  let $result := $operator($x, $y)
  return 2 * $result
}; 
```

`local:foo(...)`然后可以这样调用：

```
let $plus := function($a, $b) { $a + $b },
    $mult := function($a, $b) { $a * $b }
return (
  local:foo($plus, 1, 2),
  local:foo($mult, 3, 4)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:35:13.260

为什么不使用简单的 if-else 构造？例如

```
if (repeated code says you should add) then
  $value1 + $value2
else
  $value1 - $value2 
```

您也可以简单地将*重复的代码*放在另一个函数中，而不是复制代码。

# c# - 鼠标滚轮水平滚动

> ID：13034909
> 
> 赞同：2
> 
> 时间：2012-10-23T16:16:49.787
> 
> 标签：c#, focus, panel, mousewheel

我有一个面板`AutoScroll = true;`

我可以使用滚动条滚动面板。

我还通过以下方式找到带有“鼠标”滚轮的鼠标滚轮“垂直滚动”：

```
void panelInner_MouseWheel(object sender, System.Windows.Forms.MouseEventArgs e)
{
    panelInner.Focus();
} 
```

但是，我也想通过“鼠标滚轮+ shift”水平滚动。

我需要做什么才能发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:19:30.097

在您的设计器文件中，您需要手动添加 MouseWheel 事件委托。

```
this.panelInner.MouseWheel += new System.Windows.Forms.MouseEventHandler(this.panelInner_MouseWheel); 
```

然后，在您后面的代码中，您可以添加以下内容。

```
 private const int WM_SCROLL = 276; // Horizontal scroll 
    private const int SB_LINELEFT = 0; // Scrolls one cell left 
    private const int SB_LINERIGHT = 1; // Scrolls one line right

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern int SendMessage(IntPtr hWnd, int wMsg, IntPtr wParam, IntPtr lParam); 

    private void panelInner_MouseWheel(object sender, MouseEventArgs e)
    {
        if (ModifierKeys == Keys.Shift)
        {
            var direction = e.Delta > 0 ? SB_LINELEFT : SB_LINERIGHT;

            SendMessage(this.panelInner.Handle, WM_SCROLL, (IntPtr)direction, IntPtr.Zero);
        }
    } 
```

参考：

1.  [Shift + 鼠标滚轮水平滚动](https://stackoverflow.com/questions/7828121/shift-mouse-wheel-horizontal-scrolling)
2.  [C#中的鼠标倾斜轮水平滚动](http://www.philosophicalgeek.com/2007/07/27/mouse-tilt-wheel-horizontal-scrolling-in-c/)

# c++ - 如何访问从参数传递的*fcmp

> ID：13034910
> 
> 赞同：1
> 
> 时间：2012-10-23T16:16:58.410
> 
> 标签：c++

目前，我正在我的班级中进行合并排序项目，并坚持如何访问和利用此函数头的最后一个参数：

```
void Mergesort(ItemType* item, size_t nelem, int **(*fcmp) (const ItemType& e1, const ItemType& e2))** 
```

知道比较的结果将是*-1*、*0*或*1*但由于参数本身没有名称，我不知道如何显式调用函数的指针。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:20:16.013

它是一个指向函数的指针，所以你可以像普通函数一样调用它。例如：

```
fcmp(item[0], item[1]); 
```

# c# - 在 WPF 中创建控件实例

> ID：13034911
> 
> 赞同：0
> 
> 时间：2012-10-23T16:16:59.947
> 
> 标签：c#, wpf, xaml, custom-controls, instance

我想在包装面板中加载多个图像，对于每个图像，我都会使用此代码显示缩略图和一些图像细节

```
<Border BorderThickness="1" BorderBrush="#FFD0D1D7" Padding="5" Margin="10,10,0,0">
    <StackPanel Orientation="Horizontal">
        <!--image and dimensions-->
        <Grid Width="88" Height="55">
            <Image Source="C:\img1.jpg" Width="88" Height="55"/>
            <TextBlock Background="#B2000000" Foreground="White" Height="16" TextAlignment="Center" VerticalAlignment="Bottom">1280x1024</TextBlock>
        </Grid>
        <!--name, type and size-->
        <StackPanel Orientation="Vertical" Margin="5,0,0,0" VerticalAlignment="Center">
            <TextBlock Margin="1" Foreground="#FF787878">img13.jpg</TextBlock>
            <TextBlock Margin="1" Foreground="#FF787878">Type: JPEG</TextBlock>
            <TextBlock Margin="1" Foreground="#FF787878">Size: 321 KB</TextBlock>
        </StackPanel>
    </StackPanel>
</Border> 
```

但是图像是在运行时加载的，我需要一些方法来创建上述代码的实例来显示图像、尺寸、名称、类型和大小

我试过这个解决方案[https://stackoverflow.com/a/4991028/962284](https://stackoverflow.com/a/4991028/962284)

```
StringBuilder sb = new StringBuilder();
// use xaml to declare a button as string containing xaml
sb.Append(@"<Border BorderThickness='1' BorderBrush='#FFD0D1D7' Padding='5' Margin='10,10,0,0'>
            <StackPanel Orientation='Horizontal'>
                <!--image and dimensions-->
                <Grid Width='88' Height='55'>
                    <Image Source='C:\img1.jpg' Width='88' Height='55'/>
                    <TextBlock Background='#B2000000' Foreground='White' Height='16' TextAlignment='Center' VerticalAlignment='Bottom'>1280x1024</TextBlock>
                </Grid>
                <!--name, type and size-->
                <StackPanel Orientation='Vertical' Margin='5,0,0,0' VerticalAlignment='Center'>
                    <TextBlock Margin='1' Foreground='#FF787878'>img13.jpg</TextBlock>
                    <TextBlock Margin='1' Foreground='#FF787878'>Type: JPEG</TextBlock>
                    <TextBlock Margin='1' Foreground='#FF787878'>Size: 321 KB</TextBlock>
                </StackPanel>
            </StackPanel>
        </Border>");

FrameworkElement thumb = (FrameworkElement)System.Windows.Markup.XamlReader.Parse(sb.ToString());
ThumbnailContainer.Children.Add(thumb); 
```

但我收到以下错误 ![System.Windows.Markup.XamlParseException](../Images/ab53b9feae4d10e737aa39acdb140655.png)

我也尝试了样式，但样式不支持多个参数（指定文本块：尺寸、大小、名称、类型和大小）只是“模板绑定标签”为 1 个值

我可以做些什么来创建第一个代码的实例以在运行时显示多个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:05:32.800

哇。所以看起来很难做事。是时候拥抱 WPF 和 XAML 了。

我有一篇关于这个完全相同的事情的帖子还没有完成。我花时间为你完成它。我什至在示例中使用了您的 XAML 片段（嗯，它的修改版本），仅供您参考。

[http://www.wpfsharp.com/2012/10/23/displaying-images-from-a-folder-with-details-in-wpf/](http://www.wpfsharp.com/2012/10/23/displaying-images-from-a-folder-with-details-in-wpf/)

Clemens 在他的评论中使用 ItemsControl 是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:13:28.357

是的，您的方法是错误的，您应该以其他方式执行此操作，但要让您的代码片段正常工作，请尝试在您正在构建的字符串中添加`xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"`您的`Border`元素。我怀疑这是错误。

# eclipse - Eclipse javadoc 配置（用于自己的项目）

> ID：13034918
> 
> 赞同：0
> 
> 时间：2012-10-23T16:17:20.790
> 
> 标签：eclipse, javadoc

**我们可以通过以下方式在 Eclipse 的项目中配置库的（jar）javadoc：**
- 打开 Preferences 窗口
- 选择 Java Build Path（菜单）
- 打开 Libraries 选项卡
- 选择一个 jar 并编辑 Javadoc 位置。

如果您在从特定库中选择对象时打开了 Javadoc 视图（在 Eclipse 中），您将能够在窗口内显示 Javadoc 内容。我觉得它很有用。

**我的问题是：**
如果您生成项目的javadoc，是否可以在项目中配置其位置并显示内容（与上面提到的相同）？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:23:35.313

我想一旦您在 Eclipse 中为您的项目生成了 Javadoc。来自选定对象的任何 Javadoc 内容都将出现在 Javadoc 视图中。

# django - 将曲线存储在 Django 模型中吗？

> ID：13034922
> 
> 赞同：0
> 
> 时间：2012-10-23T16:17:33.363
> 
> 标签：django, models, relationship, curve, manytomanyfield

我有一个产品列表（比如二极管），它们有一条与之相关的曲线。例如，

*   二极管 1：曲线 1：[(0,1),(1,3),(2,10), ...., (100,0.5)]
*   二极管 2：曲线 2：[(0,2),(1,4),(2.1,19), ..., (100,0)]

因此，对于每个产品，都有一条曲线（具有相同的 x 轴值`range(1,100)`）但不同的 y 轴值。

我的问题是存储此类数据（使用 Django + PostgreSql）的最佳实践是什么，因为我想稍后在视图中用它计算事物（比如曲线下的区域，或者曲线与另一个曲线相乘等）。我还将绘制图表，因此视图必须提取值。

我的第一次尝试有各种限制：

*   *天真的尝试 1*

    ```
     # model.py
     for i in range(101):
         name_sects = ["x", str(i+1)]
         attrs["".join(name_sects)] = models.DecimalField(_("".join([str(i+1),' A'])), max_digits=6)

     attrs['intensity'] = model.DecimalField(_('Diode Intensity'))

     Diode = type('Diode', (models.Model,), attrs) 
    ```

好的，这为每个“x”、x1、x2、...等创建了一个字段，我可以在管理员中填写每个“y”...但是如何在视图或模板中操作它并不明显。（显然，要填写很痛苦）

*   *天真的尝试 2*

    ```
    #model.py
    class Curve(models.Model)
        x_axis = models.PositiveIntegerField( ...)
        y_axis = models.DecimalField( ...)

    class Diode(models.Model)
        name = blah, blah
        intensity = model.DecimalField(_('Diode Intensity'), blah, blah)
        characteristic_curve = model.ManyToManyField(Curve) 
    ```

多对多是前进的方向吗？即使每个二极管对应一条曲线？（但很多点，可能两个二极管共享同一个点）。

非常感谢任何建议、提示或工具链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:23:50.110

如果你想提高速度（因为每个产品有 100 个条目，它真的很大，如果你必须获取 100 个产品和他们的积分会很慢），我会使用 pickle 模块并将你的元组列表存储在 TextField 中（或者如果字符串的长度没有改变，则可能是 CharField）。

```
>>> a = [(1,2),(3,4),(5,6),(7,8)]
>>> pickle.dumps(a)
'(lp0\n(I1\nI2\ntp1\na(I3\nI4\ntp2\na(I5\nI6\ntp3\na(I7\nI8\ntp4\na.'
>>> b = pickle.dumps(a)
>>> pickle.loads(b)
[(1, 2), (3, 4), (5, 6), (7, 8)] 
```

只需将 b 存储在您的 TextField 中，您就可以非常轻松地取回您的列表。

甚至更好，正如罗伯特史密斯所说，使用[http://pypi.python.org/pypi/django-picklefield](http://pypi.python.org/pypi/django-picklefield)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:24:26.433

我喜欢你的第二种方法，但只是一个小建议。

```
class Plot(models.Model):
    x_axis = models.PositiveIntegerField( ...)
    y_axis = models.DecimalField( ...)

class Curve(models.Model)
   plots = models.ManyToManyField(Plot)

class Diode(models.Model)
    name = blah, blah
    intensity = model.DecimalField(_('Diode Intensity'), blah, blah)
    curve = models.ForeignKey(Curve) 
```

只是对灵活性的一个小建议

# jquery - 解析 Jquery XML 的问题

> ID：13034923
> 
> 赞同：1
> 
> 时间：2012-10-23T16:17:38.850
> 
> 标签：jquery, xml

我正在尝试从我的 XML 表中提取数据，这是我第一次这样做，仅供参考。

这是我的 jQuery。

```
 $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "desk.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('desk').each(function(){
                    var id = $(this).attr('id');
                    var desknum = $(this).find('desk#').text();
                    var phonenum = $(this).find('phone#').text();
                    var emailinfo = $(this).find('email').text();
                    $('<div class="desks" id="desk_'+id+'"></div>').html().appendTo('#page-wrap');
                        $('<div class="desknum"></div>').html(desknum).appendTo('#desk_'+id);
                        $('<div class="phonenum"></div>').html(phonenum).appendTo('#desk_'+id);
                        $('<div class="emailinfo"></div>').html(emailinfo).appendTo('#desk_'+id);
                });
            }
        });
    }); 
```

这是我的 XML

```
<?xml version="1.0" encoding="iso-8859-1"?>
 <location>
   <desk id="1">
      <desk#>Camaron</desk#>
   <computer#>COR9838L</computer#>
<phone#>111.111.1111</phone#>
<email#>camaron@yahoo.com</email#>
<picture></picture>
  </desk>
  <desk id="2">
   <desk#>Greg</desk#>
<computer#>COR9838L</computer#>
<phone#>111.111.1111</phone#>
<email>camaron@yahoo.com</email>
<picture></picture>
  </desk>
  <desk id="3">
<desk#>Cesar</desk#>
<computer#>COR9838L</computer#>
<phone#>111.111.1111</phone#>
<email#>camaron@yahoo.com</email#>
<picture></picture>
   </desk>
  <desk id="4">
   <desk#>Tracy</desk#>
<computer#>COR9838L</computer#>
<phone#>111.111.1111</phone#>
<email#>camaron@yahoo.com</email#>
<picture></picture>
  </desk>
</location> 
```

我还在这里设置了一个 jsfiddle [http://jsfiddle.net/cornelas/Re6Nv/](http://jsfiddle.net/cornelas/Re6Nv/)

不知道为什么它不工作。

此外，我不想创建一个 div id，而是希望我的 xml 数据加载到正确的 div id。只是为了让您了解我的计划是什么，我正在构建一种基于位置的格式，每张桌子在地图上都有一个 id，xml 应该指向地图上的位置并正确放置数据。这是一个大项目，因此非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:29:36.130

您的 desk.xml 返回 500 Internal Server Error，我也建议您在 XML 文件可访问后使用此代码。

```
$.get('http://www.designsbycamaron.net/desk.xml', function(data){

    $(data).find('desk').each(function(){

        var $desk = $(this); 
        var id = $desk.attr("id");
        var desknum = $desk.find('desk#').text();
        var phonenum = $desk.find('phone#').text();
        var emailinfo = $desk.find('email').text();

        var html = '<div class="desks" id="desk_' + id + '">';
        html += '<div class="desknum">' + desknum + '</div>';
        html += '<div class="phonenum">' + phonenum + '</div>'; 
        html += '<div class="emailinfo">' + emailinfo + '</div></div>'; 

        $('#page-wrap').append($(html));

    });

});​ 
```

[http://jsfiddle.net/Re6Nv/6/](http://jsfiddle.net/Re6Nv/6/)

# c# - 将构造函数参数传递给 StructureMap 命名实例时出错

> ID：13034928
> 
> 赞同：1
> 
> 时间：2012-10-23T16:17:57.000
> 
> 标签：c#, inversion-of-control, structuremap

我有一个对象：

```
public class TestEvent : IEvent
{
    private string _id;

    public TestEvent()
    {
    }

    public TestEvent(string eventId)
    {
        _id = eventId;
    }
} 
```

我有一个 StructureMap 注册表：

```
public class TheRegistry : Registry
{
    public TheRegistry()
    {
        Scan(_ =>
            {
                _.TheCallingAssembly();
                _.AddAllTypesOf<IEvent>().NameBy(t => t.Name.ToUpper());
            });
    }
} 
```

我正在尝试使用 StructureMap 容器获取 IEvent 的命名实例并传入“eventId”的构造函数参数：

```
var id = "TESTEVENT";
var args = new ExplicitArguments();
args.SetArg("eventId", id);
var eventInstance = _container.GetInstance<IEvent>(args, id); 
```

我*认为*文档建议它应该可以工作，但是我收到了 ArgumentNullException：

> {"正在尝试查找 MyProject.IEvent 类型的实例，MyProject，版本=1.0.0.0，文化=中性，publicKeyToken=null\r\n参数名称：实例"}

如果我删除第二个构造函数，所有代码都可以正常工作，并且只获取命名实例。

**更新：**

在 Kirk 的调查之后，我已经能够通过创建一个简单的对象来保存任何所需的参数来解决这个“问题”。现在可以了。

```
public class EventArguments
{
    public string EventId { get; set; }
}

...

var eventName = Context.Parameters.EventTypeName.ToString().ToUpper();
var args = new ExplicitArguments();
args.SetArg("args", new EventArguments { EventId = eventName });
var eventInstance = _container.GetInstance<IEvent>(args, eventName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:29:50.463

全面披露：我以前从未使用过 StructureMap，所以我可能会误解它的用途。但据我所知，StructureMap 故意不支持这个用例，或者它是一个错误。

但首先，你有一个错误；您需要修复您的电话`id`以匹配您的`.ToUpper`电话（即应该是`var id = "TESTEVENT";`，不是`var id = "TestEvent";`）。

但是，一旦你这样做了，它仍然不起作用。检查源代码，很清楚为什么。检查类型的构造函数（在本例中为`TestEvent`），如果任何构造函数声明了类型为“简单”的参数（即原语、字符串等），则该构造函数将被断然取消参与该`.GetInstance`行为的资格。

具体来说，如果您检查`StructureMap.Graph.PluginFamily.discoverImplicitInstances()`：

```
private void discoverImplicitInstances()
{
    _pluggedTypes.Each((key, plugin) =>
    {
        if (!plugin.CanBeAutoFilled) return;

        if (hasInstanceWithPluggedType(plugin)) return;

        ConfiguredInstance instance = new ConfiguredInstance(plugin.PluggedType).WithName(key);
        FillInstance(instance);
    });
} 
```

罪魁祸首是 lambda 中的第一行：

```
if (!plugin.CanBeAutoFilled) return; 
```

那是取消您的构造函数（以及您的类型）资格的行。字符串不能“自动填充”，因为您不能只新建一个，并且它们不会被注册用于注入。

如果你注释掉那一行，你的代码现在就可以工作了。让我感到困惑的是，虽然我理解为什么不能*隐式创建您的构造函数，但当您传递**显式*参数时，编写的代码似乎也使代码无法工作。

也许对 StructureMap 有更多经验的人能够提供更多的专家指导，但希望这总比没有好。

# php - 获取目录名称上有空格的文件的 HTML 内容

> ID：13034929
> 
> 赞同：0
> 
> 时间：2012-10-23T16:17:57.397
> 
> 标签：php, curl

帮助，

如果文件的目录/文件夹名称中有空格，我在获取文件的 html 内容时会遇到问题。

我正在使用 CURL 来获取 html 内容。这是我正在访问以获取 html 代码的链接示例

```
http://dev24oct20part2.globalbizcloud.com/admin/content/module_templates/templates/products/all_prods/Product temP/index.html 
```

如您所见，包含我的 index.html 的目录中有一个空格，这会导致错误并禁止我抓取内容。

```
/Product temP/index.html 
```

这是我的代码：

```
 $template = $this->mod_template_link.$this->module_category.'/'.$this->module_unique_key.'/'.$this->module_template.'/index.html';
    //value of this variable is the link above..

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $template);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $contents = curl_exec ($ch);
    curl_close ($ch);

    return $this->translate_template($contents); 
```

如果文件夹名称中不存在空格，则可以正常工作。

任何意见或建议将不胜感激..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:21:57.467

您必须针对您的情况对特殊字符（如空格）进行 url 编码，将空格替换为`%20`，如下所示：

```
http://dev24oct20part2.globalbizcloud.com/admin/content/module_templates/templates/products/all_prods/Product%20temP/index.html 
```

正确的解决方案是通过 PHP [urlencode()](http://php.net/manual/en/function.urlencode.php)传递 url ，使其转义以在 cURL 中使用。所以替换你的以下行：

```
curl_setopt($ch, CURLOPT_URL, $template); 
```

对于这个：

```
curl_setopt($ch, CURLOPT_URL, urlencode($template) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:22:17.413

尝试用`%20`

```
http://dev24oct20part2.globalbizcloud.com/admin/content/module_templates/templates/products/all_prods/Product%20temP/index.html 
```

# java - 存储反转字符串

> ID：13034930
> 
> 赞同：-4
> 
> 时间：2012-10-23T16:18:00.310
> 
> 标签：java

我想在没有任何功能的情况下将反转的字符串 a 存储在 b 中。

> 公共静态无效主要（字符串参数[]）{
> 
> ```
>  BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
>   String a=br.readLine();
>   String b;
>   for(int x=0,y=a.length()-1;x<a.length();x++,y--)
>   {
>              b.charAt(x)=a.charAt(y);
>   } 
> ```

但我得到这个错误：

> ```
>  b.charAt(x)=a.charAt(y);
>                            ^ 
> ```
> 
> 必需：变量
> 
> 发现：值
> 
> 1 个错误

你能解释一下并帮我解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T16:19:23.840

在 = 符号左侧，您必须有一个变量名，而不是表达式。

但是您不能这样做，因为字符串是不可变的：您应该使用字符串以外的其他结构，例如[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)，它专门设计用于允许有效地附加字符串构建：

```
 StringBuilder b = new StringBuilder();
  for(int x=0,y=a.length()-1;x<a.length();x++,y--) {
         b.append(a.charAt(y));
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T16:29:27.883

反转字符串的最简单方法是使用字符串缓冲区，因为它具有内置的反转方法。然后要存储字符串缓冲区，您可以将其保存到这样的变量中。

```
StringBuffer sb = new StringBuffer(a.reverse());

sb.toString(); //if you want the result as a string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:23:06.203

`b`在开头初始化为：`String b = "";`

然后简单地替换

```
b.charAt(x)=a.charAt(y); 
```

和

```
 b= b+ a.charAt(y); 
```

这将在`b`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:23:51.547

你可以做

```
String a = "hello"; // the String to be reversed
String b = ""; // the String to store the reversed String
for (int i = a.length()-1; i >= 0; i--) {
    b = b+a.charAt(i);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T16:28:29.803

您还可以反转它的 char 数组，如下所示：

```
char[] chars = input.toCharArray();

for(int i=0; i<chars.length/2; i++) {
    char temp = chars[i];
    chars[i] = chars[chars.length - i - 1];
    chars[chars.length - i - 1] = temp;
}

String reversed = String.valueOf(chars); 
```

但请注意，无论您选择什么，您都不会修改字符串本身，因为字符串是不可变的，正如@dystroy 建议的那样。

# c - 绑定时间和 C 赋值语句

> ID：13034935
> 
> 赞同：1
> 
> 时间：2012-10-23T16:18:15.407
> 
> 标签：c, variable-assignment, language-design

给定以下 C 赋值语句：

c = d * 120；

什么是绑定时间：

一个。变量c的类型？

湾。写变量的约定规则？

C。变量c的地址？

d。运算符*的含义？

e. operator * 的两个操作数的加载顺序是什么？

我知道有 6 种可能的绑定时间：语言设计时间、语言实现时间、编译时间、加载时间、链接时间、运行时间。

我对以上问题的回答：

一个。编译时间

湾。语言设计时间

C。加载时间

d。编译时间

e. 语言设计时间

你能检查我的答案是否正确吗？谢谢 ：） 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T17:45:51.573

A. 编译时间。

B. 什么是“写变量的约定规则”？在这种情况下，“约定”是什么意思？

C. 特定答案的信息不足。在现代平台上，变量的“地址”由它在进程的[虚拟]地址空间中的位置决定。对于全局/静态变量，它是在编译时或链接时确定的（取决于您如何解释问题）以及变量的链接。对于自动变量，绝对地址是在运行时确定的，而堆栈帧内的相对地址在编译时是已知的。您没有提供有关变量的具体信息（全局？本地？），因此无法回答这个问题。

D. 编译时间或语言设计时间，取决于这里“运算符的含义”的真正含义。算术运算符的数学含义由语言设计决定。重载运算符的特定版本（例如`int * int`vs `double * double`）在编译时选择。

E. 这个问题比看起来更模糊。代码中加载指令的顺序将在编译时确定。但是，现代处理器可以在运行时重新排列实际的物理负载。“加载顺序”的问题是什么意思：列表中加载指令的顺序或传输数据的物理运行时行为的顺序？

# ruby-on-rails-3 - 使用 Act_as_taggable_on 获取标签计数不起作用

> ID：13034936
> 
> 赞同：0
> 
> 时间：2012-10-23T16:18:19.570
> 
> 标签：ruby-on-rails-3, acts-as-taggable-on

我已经实现了acts_as_taggable_on gem，我可以在数据库标签表上看到我有哪些标签。

我正在标记模型卡，当我这样做时`Card.tag_counts`

我得到的只是

```
 [#<ActsAsTaggableOn::Tag id: 1, name: "test4">, #<ActsAsTaggableOn::Tag id: 2, name: "you">, #<ActsAsTaggableOn::Tag id: 3, name: "test">, #<ActsAsTaggableOn::Tag id: 4, name: "tyy">, #<ActsAsTaggableOn::Tag id: 5, name: "tetes">] 
```

即使我有一些标签相同的卡片

我已经通过以下方式验证了这一点 `Card.all.map{|c| c.tags}`

并得到

```
[#<ActsAsTaggableOn::Tag id: 1, name: "test4">], [#<ActsAsTaggableOn::Tag id: 2, name: "you">,  #ActsAsTaggableOn::Tag id: 1, name: "test4">], [#<ActsAsTaggableOn::Tag id: 3, name: "test">,  #ActsAsTaggableOn::Tag id: 2, name: "you">], [#<ActsAsTaggableOn::Tag id: 4, name: "tyy">], [#ActsAsTaggableOn::Tag id: 5, name: "tetes">], [#<ActsAsTaggableOn::Tag id: 2, name: "you">], [#ActsAsTaggableOn::Tag id: 2, name: "you">], [#<ActsAsTaggableOn::Tag id: 2, name: "you">]] 
```

很明显，我有不止一次卡片的标签。

为什么不`Card.tag_counts`向我显示计数，如果不是这样，我如何获得 tag_count？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:35:15.687

您需要实际调用`.count`返回的 Tag 对象。

ActsAsTaggableOn 使用自定义选择来返回计数，当这样做时，所选值（在本例中为计数）是可访问的，但不会出现在检查中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:34:08.117

根据[https://github.com/mbleigh/acts-as-taggable-on/issues/185](https://github.com/mbleigh/acts-as-taggable-on/issues/185)

为了获得所有标签计数，您必须执行类似的操作

```
Card.tag_count.map{|x| [x.name,x.count]} 
```

这很丑陋...

# c# - 从 xmlNode 中删除所有 HTML 标签

> ID：13034940
> 
> 赞同：0
> 
> 时间：2012-10-23T16:18:30.853
> 
> 标签：c#, xmlnode

我有一个 xml 节点：

```
<description>
<p>Results of a national survey of 18-35 year old Americans revealed that the next generation of homebuyers are more knowledgeable, responsible and savvy.</p> <p>The Better Homes and Gardens Real Estate survey showed that the housing market positively impacted Generation X and Y, which accounts for an estimated 103 million Americans. Seventy-seven percent of the Generation X and Y Americans who were surveyed reported that they have become increasingly knowledgeable about homeownership as a result of increased media coverage that has highlighted real estate topics over the past six years.</p> <p>&quot;Every generation faces defining economic events that alter their collective perspective,&quot; said Sherry Chris, president and CEO of Better Homes and Gardens Real Estate LLC. &quot;&#39;The Greatest Generation&#39; was shaped by the Great Depression and Baby Boomers were impacted by the oil crises throughout the 1970s. Gen X and Gen Y experienced their &#39;coming of age&#39; moment during the largest housing market downturn in American history.&quot;</p> <p>According to the survey, the two younger generations of potential homebuyers aren&#39;t discouraged from buying homes as a result of the financial turmoil the country has went through in the past several years. The two generations reported that they have become more knowledgeable about homeownership not being something they deserve, but it&#39;s something they must earn.</p> <p>The survey also showed that close to all of those surveyed were willing to adjust their lifestyles in order to save up for a home by eating out less, working a second job or even moving back home with their parents.</p> <p>The housing market is on the rise, despite President Obama&#39;s claims that congressional Republicans have held up legislation proposed to lower lending rates for millions of borrowers.</p>
</description> 
```

我想删除所有的 html 标签。我只想作为纯文本。

**注意**我不想将此 xml 用作 rssFeeds 但谷歌阅读器将所有标签显示`<p>`为文本而不是 HTML**任何 IEDA 为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:29:12.663

`Html`里面`xml`可以使您的xml无效。

`xml`是`strict`，但是`html`是`not strict`因为`html`可以有一些没有 a 的标签，`closing tag`这是`xml`.

如果你只想替换标签，你可以使用`regex`而不是`html parser`

```
foreach(var elm in doc.Elements(description))
{
elm.Value=Regex.Replace(elm.Value,"<.*?>","");
}

doc.Save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:32:45.753

要使您的`HTML`节目在 Google 阅读器中格式化，您应该`<![CDATA[ ]]>`在`desription`.

```
 <description>
         <![CDATA[
                <p>Results of a national survey of 18-35 year old Americans revealed that the next generation of homebuyers are more knowledgeable, responsible and savvy.</p> <p>The Better Homes and Gardens Real Estate survey showed that the housing market positively impacted Generation X and Y, which accounts for an estimated 103 million Americans. Seventy-seven percent of the Generation X and Y Americans who were surveyed reported that they have become increasingly knowledgeable about homeownership as a result of increased media coverage that has highlighted real estate topics over the past six years.</p> <p>&quot;Every generation faces defining economic events that alter their collective perspective,&quot; said Sherry Chris, president and CEO of Better Homes and Gardens Real Estate LLC. &quot;&#39;The Greatest Generation&#39; was shaped by the Great Depression and Baby Boomers were impacted by the oil crises throughout the 1970s. Gen X and Gen Y experienced their &#39;coming of age&#39; moment during the largest housing market downturn in American history.&quot;</p> <p>According to the survey, the two younger generations of potential homebuyers aren&#39;t discouraged from buying homes as a result of the financial turmoil the country has went through in the past several years. The two generations reported that they have become more knowledgeable about homeownership not being something they deserve, but it&#39;s something they must earn.</p> <p>The survey also showed that close to all of those surveyed were willing to adjust their lifestyles in order to save up for a home by eating out less, working a second job or even moving back home with their parents.</p> <p>The housing market is on the rise, despite President Obama&#39;s claims that congressional Republicans have held up legislation proposed to lower lending rates for millions of borrowers.</p>
        ]]>
    </description> 
```

**不加注释地回答**

如果要转换`HTML`为`Text`. 使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，您可以将其作为[NuGet 包](http://nuget.org/packages/HtmlAgilityPack)获取。然后，您可以使用`ConvertHtml`Agility Pack 为您提供的方法。

```
var plainText = HtmlToText.ConvertHtml(htmlNodeText); 
```

# django - Django - 在测试中获取用户对象

> ID：13034946
> 
> 赞同：1
> 
> 时间：2012-10-23T16:19:06.233
> 
> 标签：django, unit-testing, testing

我有一个这样的models.py：

```
from django.db import models
from django.contrib.auth.models import User

# everything has a colour...
class Colour(models.Model):
    colour = models.CharField(max_length=100)

    def __unicode__(self):
        return self.colour

# a thing can have a colour...
class Thing(models.Model):
    name = models.CharField(max_length=155)
    colour = models.ForeignKey(Colour)
    description = models.CharField(max_length=255)

    def __unicode__(self):
        return self.name

# a user can save his choices
class UserLikes(models.Model):
    user = models.ForeignKey(User)
    colour = models.ForeignKey(Colour)
    thing = models.ForeignKey(Thing)

    class Meta:
        verbose_name_plural = "User Likes"

    def __unicode__(self):
        return '%d - %s' % (self.pk, self.user) 
```

在我看来：

```
def ThingPicker(request):
    if request.method == 'POST':
        form = ThingForm(request.POST)
        if form.is_valid():
            colour = form.cleaned_data['colour']
            thing = form.cleaned_data['thing']
            likes = UserLikes(user=request.user, colour=colour, thing=thing)
            likes.save()
            return HttpResponseRedirect('/profile/')
        else:
            return render_to_response('thing_picker.html', {
                'form': form,
            }, RequestContext(request))
    else:
        form = ThingForm()
        return render_to_response('thing_picker.html', {
            'form': form,
        }, RequestContext(request)) 
```

在我的 tests.py 中，我想做这样的事情（已**编辑**）：

```
class ViewTests(TestCase):
    def setUp(self):
        self.client = Client()      

    def test_thingpicker(self):
        User.objects.create_superuser('foo', 'myemail@test.com', 'bar')
        self.client.login(username='foo', password='bar') # request.user is now user foo

        response = self.client.post('/colours/things/', {'colour': 1, 'thing': 2})
        userlike = UserLikes.objects.get(pk=1)
        self.assertEqual(userlike.colour_id, 1) 
```

我收到一个错误：

```
DoesNotExist: UserLikes matching query does not exist. 
```

如果我尝试在 shell 中使用测试客户端：

```
>>>  c = Client()
>>>  user1 = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')
>>>  c.login(username='foo', password='bar')
>>>  c.post('/colours/things/', {'user': user1, 'colour': 1, 'thing': 2})
>>>  userlike = UserLikes.objects.get(pk=1)
>>>  userlike.colour_id
1L 
```

我得到了预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:38:28.247

您的视图代码有些奇怪（意外剪切和粘贴？），但来自以下代码行：

```
likes = UserLikes(user=request.user, colour=colour, thing=thing) 
```

我猜你正在获取当前登录的用户。要从测试用例中正确获取新创建的超级用户，您应该这样做：

```
def test_thingpicker(self):
    user1 = User.objects.create_user('foo', 'myemail@test.com', 'bar')

    self.client.login(username='foo', password='bar') # request.user is now user foo

    response = self.client.post('/colours/things/', {'colour': 1, 'thing': 2})
    userlike = UserLikes.objects.get(user=user1, color=1, thing=2) 
```

此外，您应该注意 request.user 可能是 AnonymousUser （请参阅[https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.AnonymousUser](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.AnonymousUser)），因此您应该检查用户在创建 UserLikes 之前是否已登录。

您可以通过使用`@login_required`装饰器（[https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)）或手动检查`request.user.is_authenticated()`（[https://docs.djangoproject.com/ en/dev/topics/auth/#django.contrib.auth.models.AbstractBaseUser.is_anonymous](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.AbstractBaseUser.is_anonymous)）。

**为什么没有创建 UserLikes**

从观点来看：

```
colour = form.cleaned_data['colour']
thing = form.cleaned_data['thing']
likes = UserLikes(user=request.user, colour=colour, thing=thing) 
```

请注意，UserLikes 的模型定义对 Color 和 Thing 使用 ForeignKey。我猜`colour`and`thing`的形式是 an `IntegerField`，所以你需要检索实际的 Color 和 Thing 对象。

```
color = Colour.objects.get(pk=form.cleaned_data['colour'])
thing = Thing.objects.get(pk=form.cleaned_data['thing'])
likes = UserLikes(user=request.user, colour=colour, thing=thing) 
```

当然，您需要确保之前已经创建了 Color 和 Thing 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:57:26.703

最终有效的代码：

**测试.py：**

```
class ViewTests(TestCase):
    """
    Run before each test in class
    """
    def setUp(self):
        self.client = Client()
        self.user = User.objects.create_superuser(
            'foo',
            'myemail@test.com',
            'pass'
        )
        self.colour = Colour.objects.create(colour='Green')
        self.thing = Thing.objects.create(
            name='Leaf',
            colour=self.colour,
            description='leafy'
        )
        self.logged_in = self.client.login(
            username='foo',
            password='pass'
        )

    """
    Test whether user can login and post choice
    to db and then check if data can be retreived.
    """
    def test_thingpicker(self):
        # check new User object created
        self.assertEqual(User.objects.count(), 1)
        # check use is logged in
        self.assertEqual(self.logged_in, True)  # check login success

        # post some data
        response = self.client.post(
            '/colours/things/', {
            'colour': self.colour.pk,
            'thing': self.thing.pk
            })
        self.assertEqual(response.status_code, 200)

        # check object
        self.assertEqual(UserLikes.objects.count(), 1)
        userlikes = UserLikes.objects.get(
            user=self.user,
            colour_id=self.colour.pk,
            thing=self.thing.pk
        )
        self.assertEqual(userlikes.colour_id, self.colour.pk) 
```

# javascript - 双引号和单引号的区别

> ID：13034954
> 
> 赞同：-1
> 
> 时间：2012-10-23T16:19:30.800
> 
> 标签：javascript, model-view-controller

我有一个 MVC 应用程序，我在其中使用 jQuery 将一些文本插入到 DOM 中。

如果我使用：

```
$("#toggle").text('<%: translated.Show %>'); 
```

文本被渲染。

如果我使用：

```
$("#toggle").text("<%: translated.Show %>"); 
```

如果资源字符串用双引号括起来，则会引发 JavaScript 错误，请注意单引号括起工作版本，双引号括起错误版本。

谁能解释为什么，我认为 Javascript 中的单引号和双引号几乎没有区别。

'translated.Show' 字符串不包含引号，只是纯文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:21:33.700

JS中双引号和单引号的唯一区别是，在单引号内，单引号必须被转义，而在双引号内，双引号必须被转义。

问题很可能是其中的数据`translated.Show`包含双引号（尽管您保证它不...引号字符*被*视为纯文本的一部分）。

确保您遵循[规则 3：JavaScript Escape Before Inserting Untrusted Data into JavaScript Data](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#RULE_.233_-_JavaScript_Escape_Before_Inserting_Untrusted_Data_into_JavaScript_Data_Values)

# php - 查询字符串以“.php”结尾时的Apache2 + fcgid下载脚本

> ID：13034956
> 
> 赞同：1
> 
> 时间：2012-10-23T16:19:36.573
> 
> 标签：php, apache2, debian, mod-fcgid

我正在将 apache2+php 服务器迁移到 mod_fcgid，当我尝试访问以“.php”结尾的链接时，服务器会打印出 php 源。

```
GET: http://host/?inc=test.php
Does download of the index.php script 
```

但是当我修复 index.php 时。

```
GET: http://host/index.php?inc=test.php
Show the correct page content 
```

在我的站点配置中：

```
Options Indexes FollowSymLinks MultiViews +ExecCGI
AllowOverride AuthConfig FileInfo Limit
AddHandler fcgid-script .php
FcgidWrapper /var/www/cgi-bin/fcgi-starter .php 
```

其中 fcgi-starter 是一个自定义 sh 来包装 /etc/php5/cgi

```
#!/bin/sh
PHPRC=/etc/php5/cgi/
export PHPRC
export PHP_FCGI_MAX_REQUESTS=5000
export PHP_FCGI_CHILDREN=8
exec /usr/lib/cgi-bin/php 
```

如何更改配置以忽略查询字符串？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:32:17.683

我认为这个问题对 ServerFault 更好。但我觉得

```
?inc=test.php 
```

不是很好的解决方案。我希望您已经防止远程包含入侵您的站点并从您的服务器读取文件。

当你现在，你的包含文件每次都是一个 php 文件，然后从你的 url 中删除**.php**并将它们添加到你的脚本中。

但是当您在脚本中定义它时会更好，那么您就不会遇到任何问题。

```
$incFile = false;

switch($_GET['inc']):
    case 'test':
        $incFile = 'test.php';
    break;
default:
    $incFile = 'nofile.php'; 
```

# php - PHP cURL 在返回的页面中检索旧的链接文件

> ID：13034963
> 
> 赞同：0
> 
> 时间：2012-10-23T16:20:02.350
> 
> 标签：php, curl

我有一个 PHP cURL 请求，它在我的域上获取另一个页面。正在检索的页面具有链接文件，例如`.css`. 当我**更新**其中一个`.css`文件并将其上传到域，然后再次请求相同的页面时，它会返回相同版本的`.css`文件，而没有我刚刚所做的任何更新。然后我检查域上的链接文件，看看它是否上传正常（确实如此）以及返回页面中链接文件的 url（指向正确的文件）。

*我什至删除了所有临时浏览器文件以强制它查找链接文件的新版本，但这并没有什么不同。*

请求**成功完成**，**没有错误**。我认为它可能来自缓存或类似的东西。大约一个小时后，当再次请求页面时，在`.css`返回的页面中返回文件的正确版本。

我的 cURL 请求如下：

```
$curl_handle=curl_init();
curl_setopt($curl_handle, CURLOPT_URL, $host . $requestURL);
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($curl_handle, CURLOPT_AUTOREFERER, TRUE);
curl_setopt($curl_handle, CURLOPT_FRESH_CONNECT, TRUE);
curl_setopt($curl_handle, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($curl_handle, CURLOPT_MAXREDIRS, 10);
curl_setopt($curl_handle, CURLOPT_DNS_USE_GLOBAL_CACHE, FALSE);
curl_setopt($curl_handle, CURLOPT_FORBID_REUSE, TRUE);
$content = curl_exec($curl_handle);
curl_close($curl_handle);
echo $content; 
```

这真的让我很困惑，因为我似乎无法“强制”获取最新版本的链接文件。

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:22:31.600

问题是您正在获取 css 文件的缓存副本。我相信您可以使用一个标头来解决此问题，但如果您不想这样做，`whatever.css?x=$random`请在您请求的 URL 中添加类似的内容，以强制重新拉取文件。不是最好的方法，但它可能会奏效。

# php - 多检查 PHP Codeigniter 上的 Ajax

> ID：13034966
> 
> 赞同：1
> 
> 时间：2012-10-23T16:20:23.390
> 
> 标签：php, jquery, html, ajax, codeigniter

我想使用 ajax 发送到 saveKrs 并保存到数据库。我正在使用codeigniter，当我点击提交按钮时，没有任何事件。请帮我

```
form_checkbox('checkKrs[]',$row->id, FALSE, 'id=checkKrs')

      <script type="text/javascript">
            $('#save_krs').click(function(){
                 var id_student= $('#id_student').val();
                 var id_semester = $('#id_semester').val();
                    var checkKrs = new Array();
                        $("input:checked").each(function() {
                           data['checkKrs[]'].push($(this).val());
                        })

                         var data = {
                                checkKrs:checkKrs,
                                id_semester:id_semester,
                                id_mahasiswa:id_mahasiswa,
                                is_ajax: '1'
                            };

                        $.ajax({
                            url: "saveKrs",
                            type: 'POST',
                            data: data,
                            beforeSend : fnLoadStart,
                            complete : fnLoadStop,
                            success: function(msg) {
                                //$('#form_data').hide();
                                $('#form_data').html(msg);
                                //$('#report').show();
                            }
                        });
                    alert('Pengisian KRS tidak boleh kosong');
                    return false;
            });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:32:04.170

确保您拥有正确的控制器，并且如果您匹配它。

# objective-c - MPMoviePlayerLoadStateDidChangeNotification 适用于 iOS 5 但不适用于 iOS 6

> ID：13034970
> 
> 赞同：1
> 
> 时间：2012-10-23T16:20:30.927
> 
> 标签：objective-c, notifications, mpmovieplayercontroller

我想用 MPMoviePlayerViewController 播放视频。所以在我的视图控制器中，我注册为`MPMoviePlayerLoadStateDidChangeNotification`.

然后我初始化 MPMoviePlayerViewController：

```
self.mPlayerVC = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"<videoURL>"]]; 
```

并等待通知到达。当它执行此代码时：

```
MPMoviePlayerController* playerController = notification.object;

if ([playerController loadState] & MPMovieLoadStatePlayable) {
    if (self.mPlayerVC) {
        [self presentMoviePlayerViewControllerAnimated:self.mPlayerVC];
    }
} 
```

任何人都知道为什么这适用于 iOS 5 但不适用于 iOS 6？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:47:48.850

iOS 6 的 MediaPlayer.framework 中似乎存在错误。为了让视频播放，我`prepareToPlay`在初始化 MPMoviePlayerViewController 后调用

```
self.mPlayerVC = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:@"<videoURL>"]];
[self.mPlayerVC.moviePlayer prepareToPlay]; 
```

现在通知再次出现，但是当我调用`[self presentMoviePlayerViewControllerAnimated:self.mPlayerVC];`为`MPMoviePlayerLoadStateDidChangeNotification`.

为防止崩溃更换

```
[self presentMoviePlayerViewControllerAnimated:self.mPlayerVC]; 
```

有类似的东西

```
if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
[self presentViewController:self.mPlayerVC animated:YES completion:nil];
}
else if ([self respondsToSelector:@selector(presentModalViewController:animated:)]) {
[self presentModalViewController:self.mPlayerVC animated:YES];
} 
```

# python - 哪种 python 设置更便携？

> ID：13034971
> 
> 赞同：2
> 
> 时间：2012-10-23T16:20:31.680
> 
> 标签：python, deployment, static-libraries, virtualenv, static-linking

我想知道并思考要使用什么 python 设置。就 Windows 中的 Portable Python 而言是可移植的（但我需要 Linux）。

我正在开发具有很多依赖项的 python 项目，包括 C/C++ 库，重用一些 perl 脚本，甚至 Java Tika lib 来解析多种文档类型。我想将它们全部放在本地文件夹中并捆绑它，这样当我要在不同的服务器（具有不同的 Linux Distro、Gentoo、Ubuntu 和 Redhat）上进行设置时，它们就不必重新安装。

我不会使用发行版提供的 python，因为它会引起很多麻烦。

从四处学习，这些是我得到的选择：

1 - VirtualENV（但它违背了我的目的，因为它不是为了重新定位而设计的）。

2 - 静态编译 Python（不确定它是如何工作的，我没有看到很多成功案例）

3 - 本地（手动）编译 Python（不能在不同的 Libc 版本上工作，对吧？）

还有其他选择吗？请告诉我..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:51:46.263

`virtualenv`是有问题的，因为它需要计算机中的库。因为现在大多数 linux 发行版都默认安装了 python，唯一会出现问题的情况是计算机上安装的版本与您使用的版本不同。

但是，我相信您可以通过将`PYTHONPATH`本地安装中的所有库复制到该`virtualenv`文件夹​​来解决此问题。

我不知道 2 或 3，但您也可以尝试[手动](http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2)将 python 编译到您的 USB 磁盘并 pip 您的库。

# python - 解析包含 ascii 代码的字符串以浮动

> ID：13034972
> 
> 赞同：0
> 
> 时间：2012-10-23T16:20:35.673
> 
> 标签：python, floating-point, visa, gpib

我正在使用[pyvisa](http://pyvisa.sourceforge.net/)来控制信号恢复 sr7225 锁定放大器。几乎一切都按预期工作。只有一个问题，当查询的值正好是零并且一个在浮点模式下查询时返回以下

```
>>>import visa
>>>lockin = visa.instrument('GPIB::08')
>>>lockin.ask('X.') # Query X value in floating point mode
0.0E+00\x00 
```

一个 ascii 值附加到响应字符串。我猜附加的 ascii 值`\x00`是一个错误，但这意味着我不能`float()`用来将字符串响应转换为浮点数。你会怎么处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T16:22:54.837

简单地

`float(x.strip('\x00'))`?

# javascript - 获取 iframe 的 src 即 url 以便父页面可以使用它？

> ID：13034974
> 
> 赞同：1
> 
> 时间：2012-10-23T16:20:41.663
> 
> 标签：javascript, jquery, iframe, cross-domain, same-origin-policy

可能，我已经知道答案，我无法读取 iframe 的 DOM 值以便 Parent 可以使用它。

我花了很多时间研究它，但找不到任何方法，因此在这里发布。

约束：

不同的域，无法控制 iframe url。它可以是用户提供的任何 URL。

到目前为止我尝试了什么：

我需要 url 的值，即`window.frames['iframename'].location.href`，但我被拒绝，因为它违反了同源策略。

即使它们是跨域的，HTML5 Post 消息 api 也不会工作，因为我们可以控制 iframe 页面。

easyXSD 也假设与我想的相同。

有可能吗？

注意：用户将从 iframe 本身更改 SRC。所以我使用`onload`方法做某事但无法访问`location.href`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:24:05.017

如果您无法控制 iframe，那么这是不可能的，因为它存在安全风险。请注意，您可以设置 iframe/窗口的位置/url，但您无法读取它（如果它是跨域的）。

如果您可以控制 iframe，则可以使用解决方法（使用 postMessage、worker 或其他）。

# seo - 将首页重定向到分页版本

> ID：13034979
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:10.020
> 
> 标签：seo, pagination

这里有一个理论问题，

如果我的网站上有一个分页部分并且 URL 是

```
website.com/news 
```

此页面有多个页面。

我应该自动将访问者重定向`/news`到`/news/page/1`

如果我将其保留为两者`/news`，`/news/page/1`根据谷歌这将是重复的内容。或者谷歌是否足够聪明，可以判断它是否是第一页？

解决此问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:39:26.547

您只需要正确标记您的页面，以便 Google 了解这是分页内容，并且不会因重复内容而惩罚您。

使用 rel="next" 和 rel="prev" 标记您的分页链接，然后将每个分页页面 rel="canonical" 标记为完整的非分页版本。当然，对于真实用户，您永远不会重定向到非分页内容。

如果您这样做，Google 会将每个分页页面视为一个巨大的非分页页面。

[http://googlewebmastercentral.blogspot.com/2012/03/video-about-pagination-with-relnext-and.html](http://googlewebmastercentral.blogspot.com/2012/03/video-about-pagination-with-relnext-and.html)

# php - 为什么我收到此 $_SESSION 变量的未定义索引错误

> ID：13034980
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:16.610
> 
> 标签：php, pdo, mysqli

我不知道为什么会收到此错误，但它一直说我有一个未定义的索引：AudioFile on line 35 in line 35 in below code：

```
<?php

 ini_set('display_errors',1); 

session_start();

?>

<body>

<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  unlink("AudioFiles/" . $_SESSION['AudioFile']);  

$delete = $mysqli->prepare('DELETE FROM Audio WHERE AudioId = ?'); 
$delete->bind_param("i",$_SESSION['lastAudioID']); 
$delete->execute(); 

$deleteaud = $mysqli->prepare('DELETE FROM Audio_Question WHERE AudioId = ?'); 
$deleteaud->bind_param("i",$_SESSION['lastAudioID']); 
$deleteaud->execute(); 

?>

</body>
</html> 
```

我不太明白为什么会收到此索引错误。有谁知道我为什么收到这个错误？

我在下面的 audioupload.php 页面中定义了 $_SESSION 变量

```
 <?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

session_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
<?php
 ini_set('display_errors',1); 
 error_reporting(E_ALL);

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

$result = 0;

    if ((($_FILES["fileAudio"]["type"] == "audio/wav")
|| ($_FILES["fileAudio"]["type"] == "audio/wma")
|| ($_FILES["fileAudio"]["type"] == "audio/mp3")
|| ($_FILES["fileAudio"]["type"] == "audio/m3u")
|| ($_FILES["fileAudio"]["type"] == "audio/iff")
|| ($_FILES["fileAudio"]["type"] == "audio/mid")
|| ($_FILES["fileAudio"]["type"] == "audio/m4a")
|| ($_FILES["fileAudio"]["type"] == "audio/mpa")
|| ($_FILES["fileAudio"]["type"] == "audio/aif")
|| ($_FILES["fileAudio"]["type"] == "audio/wa"))
&& ($_FILES['fileAudio']['size'] > 0))
  {

if( file_exists("AudioFiles/".$_FILES['fileAudio']['name'])) {
    $parts = explode(".",$_FILES['fileAudio']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("AudioFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileAudio']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
    "AudioFiles/" . $_FILES["fileAudio"]["name"]);
    $result = 1; 

}
    else
      {
      move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
      "AudioFiles/" . $_FILES["fileAudio"]["name"]);
      $result = 1;

  }

    $audiosql = "INSERT INTO Audio (AudioFile) 
    VALUES (?)";

        if (!$insert = $mysqli->prepare($audiosql)) {
      // Handle errors with prepare operation here
    }

        //Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$aud);

//Assign the variable
$aud = 'AudioFiles/'.$_FILES['fileAudio']['name'];

 $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

 $lastAudioID = $mysqli->insert_id;   

$_SESSION['lastAudioID'] = $lastAudioID; 
$_SESSION['AudioFile'] = $_FILES["fileAudio"]["name"]; 

 $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');         

$sessionquery = "SELECT SessionId FROM Session WHERE (SessionName = ?)";

    if (!$sessionstmt = $mysqli->prepare($sessionquery)) {
  // Handle errors with prepare operation here
  echo __LINE__.': '.$mysqli->error;
}

// Bind parameter for statement
$sessionstmt->bind_param("s", $sessid);

// Execute the statement
$sessionstmt->execute();

            if ($sessionstmt->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$sessionstmt->error;
                break 1;
            }

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$sessionstmt->bind_result($sessionid);

// This populates $optionid
$sessionstmt->fetch();

    $sessionstmt->close();      

 $audioquestionsql = "INSERT INTO Audio_Question (AudioId, SessionId, QuestionId)  
    VALUES (?, ?, ?)"; 

     if (!$insertaudioquestion = $mysqli->prepare($audioquestionsql)) { 
      // Handle errors with prepare operation here 
       echo "Prepare statement err audioquestion"; 
    } 

$qnum = (int)$_POST['numaudio'];

$insertaudioquestion->bind_param("iii",$lastAudioID, $sessionid, $qnum); 

    $insertaudioquestion->execute(); 

                if ($insertaudioquestion->errno) { 
          // Handle query error here 
        } 

        $insertaudioquestion->close(); 

      }

?>

  <script language="javascript" type="text/javascript">window.top.stopAudioUpload(<?php echo $result; ?>, '<?php echo $_FILES['fileAudio']['name'] ?>');</script>  

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:24:05.827

未定义的索引意味着 $_SESSION 中不存在键“lastAudioID”。您可以通过以下方式检查：

```
if(array_key_exists('lastAudioID', $_SESSION)) {
  // Key exists
} 
```

似乎您没有在代码中设置密钥（或不正确）。

编辑：这可能是因为您在已经输出了一些东西之后包含了您的文件。在输出任何内容之前尝试包含该文件。我很确定就是这样。

# iphone - 是否可以向标注 MKMapView 添加隐藏字段？

> ID：13034981
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:18.513
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我的地图视图上有多个图钉和标注。当我按下详细信息按钮时，我希望它转到详细信息页面。我想在标注中添加一个隐藏的 id，这样我就知道要将用户发送到哪个详细信息页面。

这可能吗/还有另一种方法吗？

如果有帮助，这是我的[代码。](http://pastebin.com/CQkLun53)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:24:34.373

您的 MKAnnotationView 具有对生成视图的注释的引用。该值是一个符合 MKAnnotation 协议的对象，您可以使用它来查找与 pin 视图关联的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:40:47.570

这里有一些很棒的[信息](https://stackoverflow.com/questions/6495419/mkannotation-simple-example)，已经在 stackoverflow 上。示例和答案描述了 mkannotation 协议。苹果对此的文档也非常好。这是苹果关于[协议的信息，以及苹果对](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html)[mapkit](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)的整体文档。

基本上你所做的是创建你自己的类，确保它符合协议，你很好。

# sql - 使用多个 OR 语句最大化数据库视图

> ID：13034983
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:22.070
> 
> 标签：sql, join, view, oracle10g

我正在尝试编写一个从 2 个表中进行选择的数据库视图。这是一个例子：

```
USER_TABLE
- ID
- USER_NAME

FAMILY_TABLE
- ID
- FAMILY_NAME
- FATHER_USER_NAME
- MOTHER_USER_NAME
- GRANDFATHER_1_USER_NAME
... (multiple user name columns) 
```

（表格作者由于某种原因没有通过 ID 关联）

我基本上需要创建一个视图，列出每个用户，以及他们所属的家庭的名称。我尝试了很多事情，但似乎每件事都失败了。

我首先尝试合并`SELECT`来自 的声明`FAMILY_TABLE`，但这需要很长时间（请参阅[我以前的帖子](https://stackoverflow.com/questions/12827525/any-quicker-option-than-oracle-database-union)）。

然后我尝试做一个“或加入”：

```
SELECT ut.USER_NAME, ft.FAMILY_NAME
FROM USER_TABLE ut
LEFT OUTER JOIN FAMILY_TABLE ft ON
(
    UPPER(ut.USER_NAME) = UPPER(ft.FATHER_USER_NAME)
    OR
    UPPER(ut.USER_NAME) = UPPER(ft.MOTHER_USER_NAME)
    ... (etc)
) 
```

但这也需要很长时间（仅 FATHER_USER_NAME 和 MOTHER_USER_NAME 需要 22 秒）。

谁能建议为我需要的视图编写查询的最有效方法？我不知道如何使它快速。

仅供参考：使用 Oracle 10g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:50:43.933

在 UPPER(USER_NAME) 和 UPPER(FATHER_USER_NAME)、UPPER(ft.MOTHER_USER_NAME) 上添加基于函数的索引 ...

这应该可以解决您的问题。

你能粘贴你的执行计划吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:58:13.267

这显然工作得很快（大约 500 毫秒）：

```
SELECT ut.USER_NAME, familyInfo.FAMILY_NAME
FROM USER_TABLE ut
LEFT OUTER JOIN
(
    SELECT
    (
        UPPER(ft.FATHER_USER_NAME) || ',' || 
        UPPER(ft.MOTHER_USER_NAME) || ',' || 
        ... (etc)
    ) AS MEMBERS,
    ft.*
    FROM FAMILY_TABLE ft
) familtyInfo
ON familyInfo.MEMBERS LIKE ('%' || UPPER(ut.USER_NAME) || '%'); 
```

# java - System.out.println 语句在哪里打印在 websphere App Server 中

> ID：13034987
> 
> 赞同：1
> 
> 时间：2012-10-23T16:21:32.953
> 
> 标签：java, jakarta-ee, log4j, websphere, websphere-6

我有一个在`IBM WebSphere 6.0`版本上配置的应用程序。

1.  在那个应用程序中，无论`System.out.printlN()`报表在哪里，它们是在哪里打印的？我的意思是哪些日志文件会打印出来？在独立中，我可以在控制台中检查，该应用程序部署在 Windows 服务器框中

2.  如何识别所有 log.debug、log.info 语句从应用程序打印到服务器框的位置。我尝试签入`log4j.properties`，但没有找到任何有用的信息。

背景，我们有一个 Websphere 应用程序服务器，我们在其中配置了 2 个节点，我正在节点 01 中部署，我的更改并尝试调试，但没有帮助。

请指导是否有人有过去的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:56:10.953

我最近没有使用 WebSphere 6。在较新的版本中，您有一个配置文件目录和一个日志文件所在的日志目录。

第二个选项是进入 WAS 管理控制台并转到“故障排除 > 日志和跟踪 > server_name”，您可以直接查看日志。[WAS 6.0](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Futrb_logtrace.html)也记录了这种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:28:20.520

正如其他人所暗示的那样，默认情况下`SystemOut.log`和`SystemErr.log`文件位于每个节点的`profiles/<profileName>/<serverName>/logs`目录中。（可以在管理控制台中覆盖这些位置和文件名。）

log4j 日志将取决于 log4j 配置中的附加程序（可能是 log4j.properties 或 log4j.xml 文件），但也可能受到应用程序中是否有任何内容使用 Jakarta Commons Logging 的影响。如果是这样，[您可能会发现所有 log4j 日志记录也会转到 SystemOut.log](https://stackoverflow.com/questions/8131529/websphere-all-logs-are-going-to-systemout-log/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-23T16:58:35.727

它应该登录 Program files/IBM/SDP/profiles/runtimes/baseV6...

像这样的东西。目前在家里，我没有确切的路径。但是在配置文件目录中搜索。

您应该始终在应用程序 logging.xml 中为附加程序定义自己的路径，而不是使用 WAS 的默认路径。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-25T09:14:32.900

日志文件位于 C:\Program Files\IBM\SDP\runtimes\base_v7\profiles\was70profile1\logs\server1

# c# - 如何在asp.net中更改实现背后的代码

> ID：13034989
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:35.843
> 
> 标签：c#, asp.net, code-generation, roslyn

我正在探索 roslyn 框架作为 asp.net 的动态代码生成器的可能实现。到目前为止，它看起来很神奇。目前我被困在为 asp.net 页面（Web 应用程序）的实现背后生成代码。我设法创建了一个程序集，其中包含 page.design.cs 和 page.aspx.cs 代码，但我不知道如何将结果链接到现有的 .aspx 页面（当我设置代码时，这种情况效果很好在我的项目中的（一个）单独的类后面，并且在`Inherit`属性中我将 namespace.class_name 设置为它）。我已经改变了`Inhertit`属性指向类，这是roslyn代码生成的结果。但是，这似乎不起作用，因为（我猜）.aspx 页面期望实例后面的代码在编译时可用，但我试图在运行时提供此定义。

有什么办法可以欺骗 .aspx 使其认为它具有定义背后的代码，我可以在运行时提供这些代码，以及如何将我的自定义代码后面的类与 .aspx 页面链接？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:31:43.770

在对 ASP.NET 中的类似可能性进行了小型研究之后，似乎使用 MVC 控制器和视图执行此任务要容易得多，而不是使用普通 ASP.NET 类后面的代码。这是关于这个主题的一个有趣的[链接](http://blog.davidebbo.com/2011/10/using-roslyn-to-implement-mvc-razor.html)，结果证明这是我的问题的答案。如果有人对 ASP.NET 有任何建议，我将非常乐意听到。

# php - json_encode($array) 我的 php 数组的逆序

> ID：13034990
> 
> 赞同：-2
> 
> 时间：2012-10-23T16:21:55.217
> 
> 标签：php, jquery, json

我有`json_encode($array)`它在谷歌浏览器上以不同的顺序给了我一个列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-30T11:25:22.017

**array_reverse：**用于返回一个元素以相反顺序排列的数组，例如：

```
$array = array_reverse($array);
echo json_encode($array,JSON_UNESCAPED_UNICODE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T16:26:31.467

编码由 PHP 在后端完成，因此 Google Chrome 与此问题无关。

在编码之前检查您的数组顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T16:24:44.540

检查`$array`使用中的值`var_dump`以确保这是您想要的顺序。

**编辑：**查看[手册中的第三个示例](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T04:59:57.007

您的 JSON 数据是什么样的？如果：

```
{1,2,3} 
```

您的浏览器不一定会保留订单。但如果格式化为 JSON 数组：

```
[1,2,3] 
```

然后订单将被保留。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-11T07:09:16.113

如果您的数组是关联的，但由整数索引（如`$arr1 = ['3' => 'x', '2' => 'a', '1' => 'b'];`），则浏览器（在解析 JSON 时）假定数组的键指示值的存储顺序（如在经典的非关联数组中 - 类似`$arr2 = ['x','a','b'];`） .

自己看看 - 比较解析从这两个关联数组生成的 JSON 的结果 - 一个由非整数字符串索引 (A)，另一个由整数索引（即使它们在 PHP 中是字符串类型）（B ）。

对于这两个示例，PHP 中的值都是按顺序存储的：`'x', 'a', 'b'`，只有键不同。

**A)**关联数组，**由字符串索引**

```
<?php
$arr1 = [
    'foo' => 'x', 
    'bar' => 'a', 
    'baz' => 'b'
];
$json = json_encode($arr1); // $json is now a string: '{"foo":"x","bar":"a","baz":"b"}' 
```

然后，在浏览器中：

```
var jsonData = JSON.parse('{"foo":"x","bar":"a","baz":"b"}');
console.log(jsonData); 
// prints {foo: "x", bar: "a", baz: "b"} -  the keys are in different order then expected! 
```

**B)**关联数组，**由整数索引（即使它们是 PHP 中的字符串！）**

```
<?php
$arr1 = [
    '3' => 'x', 
    '2' => 'a', 
    '1' => 'b'
];
$json = json_encode($arr1); // $json is now a string: '"{"3":"x","2":"a","1":"b"}"' 
```

然后，在浏览器中：

```
var jsonData = JSON.parse('"{"3":"x","2":"a","1":"b"}"');
console.log(jsonData); 
// prints {1: "b", 2: "a", 3: "x"} -  the keys are in different order then expected! 
```

> 如您所见 - 当索引为整数时，JSON 解析器假定一个经典数组。

因此，如果您需要保持顺序，我建议切换到经典数组，并可能在 JSON 中添加一个 order/key 字段（用于排序目的 - 如果您需要它）：

```
$arr1 = [
    '3' => 'x', 
    '2' => 'a', 
    '1' => 'b'
];
$json = json_encode(array_values($arr1)); // note the array_values() here - but this way you loose the index keys 
```

另一种方式：

```
$arr1 = [
    '3' => [ 'key' => '3', 'value' => 'x'], 
    '2' => [ 'key' => '2', 'value' => 'a'],
    '1' => [ 'key' => '1', 'value' => 'b'],
];
$json = json_encode(array_values($arr1)); 
        // this way you have both values and keys, 
        // and the parsed JSON will be in the exact order you want it to be 
```

# python - Python 3 解释器是否具有 JIT 功能？

> ID：13034991
> 
> 赞同：86
> 
> 时间：2012-10-23T16:21:56.030
> 
> 标签：python, python-3.x, jit

我发现当我向 Python 提出更多要求时，python 并没有 100% 使用我的机器资源，而且速度不是很快，与许多其他解释语言相比它很快，但与编译语言相比，我认为区别在于真的很了不起。

是否可以在 Python 3 中使用即时 (JIT) 编译器来加快速度？

通常，JIT 编译器是唯一可以提高解释语言性能的东西，所以我指的是这个，如果有其他解决方案可用，我很乐意接受新的答案。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-23T16:36:56.210

首先，Python 3(.x) 是一种语言，可以有任意数量的实现。好的，直到今天，除了 CPython 之外，没有任何实现实际上实现了这些版本的语言。但这会改变（PyPy 正在迎头赶上）。

回答您要问的问题：CPython、3.x 或其他版本不包含 JIT 编译器，从来没有，也可能永远不会。其他一些 Python 实现（原生的 PyPy、Jython 和 IronPython，通过为它们构建的虚拟机重新使用 JIT 编译器）确实具有 JIT 编译器。当他们添加 Python 3 支持时，他们的 JIT 编译器没有理由停止工作。

但是，当我在这里时，也让我解决一个误解：

> 通常，JIT 编译器是唯一可以提高解释语言性能的东西

这是不正确的。JIT 编译器最基本的形式只是消除了解释器开销，这解释了你看到的一些速度变慢，但不是大多数。一个*好的*JIT 编译器还会执行许多优化，这些优化通常消除了实现大量 Python 特性所需的开销（通过检测允许更有效实现的特殊情况），突出的例子是动态类型、多态性和各种内省特性。

仅仅实现*一个*编译器并没有帮助。您需要非常聪明的优化，其中大部分仅在非常特定的情况下和有限的时间窗口内有效。JIT 编译器在这里很容易，因为它们可以在运行时生成专门的代码（这是它们的重点），可以通过在运行时观察程序来更容易（更准确地）分析程序，并且可以在优化无效时撤消优化。与提前编译器不同，它们还可以与解释器交互，并且经常这样做是因为这是一个明智的设计决策。我想这就是为什么它们与人们心目中的解释器联系在一起的原因，尽管它们可以并且确实独立存在。

除了优化解释器的代码本身之外，还有其他方法可以使 Python 实现更快——例如，HotPy (2) 项目。但这些目前处于研究或实验阶段，尚未显示出它们在真实代码中的有效性（和成熟度）。

当然，特定程序的性能取决于程序本身，而不是语言实现。语言实现只为您可以进行一系列操作的速度设置上限。通常，您可以通过避免不必要的工作（即优化程序）来更好地提高程序的性能。无论您是通过解释器、JIT 编译器还是提前编译器运行程序，这都是正确的。如果您想要快速的东西，请不要竭尽全力获得更快的语言实现。有些应用程序由于解释和动态性的开销是不可行的，但它们并不像您想象的那么普遍（并且通常通过有选择地调用机器代码编译的代码来解决）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-23T16:35:21.570

唯一具有 JIT 的 Python 实现是[PyPy](http://pypy.org/)。Byt - PyPy 既是 Python 2 实现又是 Python 3 实现。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-23T16:57:38.020

Numba 项目应该可以在 Python 3 上运行。虽然它不是您所要求的，但您可能想尝试一下： [https ://github.com/numba/numba/blob/master/docs/source/doc/userguide .rs](https://github.com/numba/numba/blob/master/docs/source/doc/userguide.rst) .

它目前不支持所有 Python 语法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-23T16:32:31.210

你可以试试[pypy py3 分支](https://bitbucket.org/pypy/pypy/src/py3k)，它[或多或少](http://pypy.org/compat.html)兼容 python，但是官方的 CPython 实现没有 JIT。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-23T16:35:22.847

这个网站上的一些杰出的 Python 开发人员将最好地回答这个问题。

仍然我想评论：在讨论解释语言的速度时，我只想指出在[这个位置托管的一个项目：计算机语言基准游戏](http://benchmarksgame.alioth.debian.org)

这是一个专门用于运行基准测试的网站。有指定的任务要做。任何人都可以用他/她的首选语言提交解决方案，然后测试比较每个解决方案的运行时间。解决方案可以进行同行评审，通常由其他人进一步改进，并根据规范检查结果。从长远来看，这是比较不同语言的最公平的基准测试系统。

[从像这样的指示性摘要](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html)中可以看出，与解释语言相比，编译语言的速度相当快。然而，差异可能并不在于编译的确切类型，而是 Python（以及图中的其他比 Python 慢的）是完全动态的。可以即时修改对象。可以即时修改类型。所以一些类型检查必须推迟到运行时，而不是编译时。

因此，尽管您可以争论编译器的好处，但您必须考虑到不同语言中存在不同的功能。这些功能可能会以内在的价格出现。

最后，在谈到速度时：大多数情况下，导致问题的不是语言和语言的感知速度，而是一个糟糕的算法。我从来不用切换语言，因为一种语言太慢了：当我的代码出现速度问题时，我会修复算法。但是，如果您的代码中有耗时的、计算密集型的循环，那么重新编译这些循环通常*是*值得的。一个突出的例子是脚本语言使用的用 C 编码的库（Perl XS 库，例如 Python 的 numpy/scipy，lapack/blas 是可用于许多脚本语言绑定的库的示例）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-23T16:35:31.383

如果您指的是即时编译器中的 JIT 到字节码表示，那么它具有这样的功能（自 2.2 起）。如果您的意思是 JIT 到机器代码，那么不会。然而，编译成字节码提供了很多性能改进。如果您希望它编译为机器代码，那么 Pypy 就是您正在寻找的实现。

注意：pypy 不适用于 Python 3.x

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T18:52:24.067

如果您正在寻找代码块中的速度改进，那么您可能想看看[rpythonic](http://code.google.com/p/rpythonic "rpythonic")，它使用 pypy 编译为 C。它使用装饰器将其转换为 Python 的 JIT。

# trigger.io - 使用催化剂调试 trigger.io 应用程序似乎只连接一次

> ID：13034994
> 
> 赞同：0
> 
> 时间：2012-10-23T16:21:58.960
> 
> 标签：trigger.io

我一直在使用带有 Windows 7 的 android 模拟器为 trigger.io 开发天气应用程序演示。我遇到了一个问题，一旦运行它，它将不再连接到 Catalyst。我尝试刷新[https://trigger.io/catalyst/](https://trigger.io/catalyst/)页面以获取新 ID，重建并重新运行，它有时但并非总是有效。在客户端下，我将看到 127.0.0.1 一次以粗体显示，在其下方的另一个实例不是粗体，但目标列表为空。有什么建议么？

HTML：

```
 <!DOCTYPE html>
<html>
    <head>
        <script src="https://trigger.io/catalyst/target/target-script-min.js#BE2EEEE8-3796-4249-8C00-04CE67A969FD"></script>
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
        <script type="text/javascript" src="js/mustache.js"></script>       
        <script type="text/javascript" src="js/weather.js"></script>        
    </head>
    <body>
        <script type="x-mustache-template" id="forecast_information_tmpl">
            <h1>Forecast for {{display_location.full}}</h1>
            <p>{{observation_time}}</p>
        </script>

        <script type="x-mustache-template" id="current_conditions_tmpl">
            <table>
                <tr>
                    <td><img src="{{icon_url}}" /></td>
                    <td>
                        <div>{{weather}}</div>
                        <div>{{temp_f}}&deg;F</div>
                        <div>Humidity: {{relative_humidity}}</div>
                        <div>Wind: {{wind_string}}</div>
                    </td>
                </tr>
            </table>
        </script>

        <script type="x-mustache-template" id="forecast_conditions_tmpl">
            {{#forecastday}}
            <td>
                <h2>{{date.weekday_short}}</h2>
                <img src="{{icon_url}}">
                <div>{{conditions}}</div>
                <div>Low: {{low.fahrenheit}}&deg;F</div>
                <div>High: {{high.fahrenheit}}&deg;F</div>
            </td>
            {{/forecastday}}
        </script>

        <header id="forecast_information"></header>

        <section id="current_conditions"></section>

        <section id="forecast_conditions">
            <table>
                <tr>
                </tr>
            </table>
        </section>

   </body>
</html> 
```

天气.js

```
window.forge.enableDebug();

var weather = {
    "current_observation": {
        "display_location": {
            "full": "San Francisco, CA"
        },
        "observation_time":"Last Updated on September 20, 3:50 AM PDT",
        "weather": "Mostly Cloudy",
        "temp_f": 54.4,
        "temp_c": 12.4,
        "relative_humidity":"89%",
        "wind_string":"From the WNW at 4.0 MPH",
        "icon_url":"http://icons-ak.wxug.com/i/c/k/nt_mostlycloudy.gif"
    },
    "forecast": {
        "simpleforecast": {
            "forecastday": [
                { "date": { "weekday_short": "Thu" },
                  "period": 1,
                  "high": { "fahrenheit": "64", "celsius": "18" },
                  "low": { "fahrenheit": "54", "celsius": "12" },
                  "conditions": "Partly Cloudy",
                  "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif" },
                { "date": { "weekday_short": "Fri" },
                  "period": 2,
                  "high": { "fahrenheit": "70", "celsius": "21" },
                  "low": { "fahrenheit": "54", "celsius": "12" },
                  "conditions": "Mostly Cloudy",
                  "icon_url":"http://icons-ak.wxug.com/i/c/k/mostlycloudy.gif" },
                { "date": { "weekday_short": "Sat" },
                  "period": 3,
                  "high": { "fahrenheit": "70", "celsius": "21" },
                  "low": { "fahrenheit": "52", "celsius": "11" },
                  "conditions": "Partly Cloudy",
                  "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif" }
            ]
        }
    }
};

forge.logging.info(JSON.stringify(weather));

function populateWeatherConditions (weather) {
    var tmpl, output;
    forge.logging.log("[populateWeatherConditions] beginning populating weather conditions");

    tmpl = $("#forecast_information_tmpl").html();
    output = Mustache.to_html(tmpl, weather.current_observation);
    $("#forecast_information").append(output);
    forge.logging.log("[populateWeatherConditions] finished populating forecast information");

    tmpl = $("#current_conditions_tmpl").html();
    output = Mustache.to_html(tmpl, weather.current_observation);
    $("#current_conditions").append(output);
    forge.logging.log("[populateWeatherConditions] finished populating current conditions");

    tmpl = $("#forecast_conditions_tmpl").html();
    output = Mustache.to_html(tmpl, weather.forecast.simpleforecast);
    $("#forecast_conditions table tr").append(output);
    forge.logging.log("[populateWeatherConditions] finished populating forecast conditions");

    forge.logging.log("[populateWeatherConditions] finished populating weather conditions");
};

$(function () {
    populateWeatherConditions(weather);
}); 
```

谢谢！

# httpclient - HttpClient 没有重复使用我的连接，不断创建新的连接

> ID：13034998
> 
> 赞同：5
> 
> 时间：2012-10-23T16:22:02.443
> 
> 标签：httpclient, apache-httpclient-4.x

来自 netstat -anp | grep 我在两个不同的时间，我可以看到 HttpClient 没有重新使用我的连接。我每次都使用不同的网址连接到同一主机，例如

*   [https://myhost.com/postkey12345](https://myhost.com/postkey12345)
*   [https://myhost.com/postkey54321](https://myhost.com/postkey54321)

为什么 HttpClient 不只是每次都重新使用与 myhost.com 的相同连接？

我有以下代码用于初始化传递给 HttpClient 的池...

```
PoolingClientConnectionManager mgr = new PoolingClientConnectionManager();
mgr.setDefaultMaxPerRoute(30);
mgr.setMaxTotal(30); 
```

我看到他们正在使用 HttpRoute 并且在 equals 中有 localAddress ，这看起来很奇怪，因为 HttpRoute 在主机名和架构（https/http）上应该是相等的，就是这样，对吧？这有关系吗？这是一个错误吗？性能非常糟糕，每次都必须重新建立 https 套接字！！！！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T12:22:03.800

我强烈怀疑您的应用程序建立的 SSL 连接是有状态的。也就是说，服务器请求客户端使用私有证书进行身份验证，使它们特定于安全上下文。HttpClient 检测到这一点并阻止这些连接被租给具有不同安全上下文的调用者。实际上，HttpClient 通过为每个请求强制建立新连接而不是冒着将持久 SSL 连接租用给错误用户的风险来确保安全。

你可以在这里做两件事

*   [禁用连接状态跟踪](https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html#disableConnectionState())
*   确保所有逻辑相关的请求共享相同的上下文（推荐）

[有关详细信息，请参阅HttpClient 教程](https://hc.apache.org/httpcomponents-client-4.5.x/current/tutorial/html/advanced.html#stateful_conn)的这一部分

# java - 有哪些适用于 Android 的优秀 Java IDE？

> ID：13034999
> 
> 赞同：-4
> 
> 时间：2012-10-23T16:22:09.173
> 
> 标签：java, android, ide, game-engine

我想要一些好的安卓IDE。Eclipse 对我的机器来说太慢了。我很快就会进入游戏开发领域，所以我也想知道一些好的 2d 游戏引擎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:23:40.280

我使用[IntelliJ IDEA](http://www.jetbrains.com/idea/)。没关系。他们现在在免费的社区版中支持 Android。