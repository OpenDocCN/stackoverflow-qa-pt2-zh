# StackOverflow 问答 14705000-14705999

# java - Java 1.7 xml 解析错误上的 Restlet 客户端“FEATURE_SECURE_PROCESSING：当存在安全管理器时，无法将该功能设置为 false。”

> ID：14705003
> 
> 赞同：0
> 
> 时间：2013-02-05T10:13:44.467
> 
> 标签：java, security, restlet, xerces

**编辑：2014 年 10 月 31 日[此问题的修复程序现在](https://github.com/restlet/restlet-framework-java/issues/785)在 Restlet 2.2 和 master（未来 2.3）分支中都可用**

我们的 Netbeans Platform Restlet 客户端应用程序在 Java 1.6 上运行良好，但在 1.7.0_11 上，我得到了安全运行时错误。

有没有简单的方法来防止这种情况？

```
WARN org.restlet.log():241 - Unable to unmarshal the XML representation
javax.xml.bind.JAXBException: Unable to create customized SAX source
 - with linked exception:
[javax.xml.parsers.ParserConfigurationException: FEATURE_SECURE_PROCESSING: Cannot set the feature to false when security manager is present.]
            at org.restlet.ext.jaxb.internal.Unmarshaller.unmarshal(Unmarshaller.java:201)
            at org.restlet.ext.jaxb.JaxbRepresentation.getObject(JaxbRepresentation.java:417)
            at org.restlet.ext.jaxb.JaxbConverter.toObject(JaxbConverter.java:172)
            at org.restlet.service.ConverterService.toObject(ConverterService.java:167)
            at org.restlet.resource.Resource.toObject(Resource.java:828)
            at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:240)
            <SNIP>
Caused by: javax.xml.parsers.ParserConfigurationException: FEATURE_SECURE_PROCESSING: Cannot set the feature to false when security manager is present.
            at com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:122)
            at org.restlet.ext.jaxb.internal.Unmarshaller.unmarshal(Unmarshaller.java:190)
            ... 23 more 
```

在两个 java 运行时中，我的 System.getSecurityManager() 是 org.netbeans.TopSecurityManager 的一个实例

## 编辑 1

在对 Simon Lehmann 的回答中提到的 Restlet 源进行了更多研究之后，我看到了`JaxbConverter.java`调用

```
new JaxbRepresentation<T>(Representation source, Class<T> target).getObject(); 
```

然后 ...

```
public JaxbRepresentation(Representation xmlRepresentation, Class<T> type) { ...} 
```

然后 ...

```
public JaxbRepresentation(Representation xmlRepresentation, String contextPath, ValidationEventHandler validationHandler, ClassLoader classLoader) {
    super((xmlRepresentation == null) ? null : xmlRepresentation
            .getMediaType());
    this.classLoader = classLoader;
    this.contextPath = contextPath;
    this.object = null;
    this.validationEventHandler = validationHandler;
    this.xmlRepresentation = xmlRepresentation;
} 
```

在这个特定的构造函数中，`this.secureProcessing`始终保持为假，因此如果存在任何安全管理器，那么稍后我们会收到 XML 解析器的 Java 7 安全处理功能的错误。

不确定这是restlet中的错误还是我做错了什么？

## 编辑 2（简单的 Java 7 应用程序与一个完整的应用程序）

我在 1.7.0_11 上编写了小型 restlet 客户端测试程序，它适用于我们的服务器。我猜在我的完整客户端应用程序中，类路径中有一些“坏”的东西？

在小型应用程序和完整应用程序中，我[打印工厂](https://stackoverflow.com/questions/1798366/how-do-i-find-out-which-jaxp-implementation-is-in-use-and-where-it-was-loaded-fr)，两者都是相同的：

```
 [exec] DocumentBuilderFactory implementation: com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl loaded from: Java Runtime
 [exec] XPathFactory implementation: com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl loaded from: Java Runtime
 [exec] TransformerFactory implementation: com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl loaded from: Java Runtime
 [exec] SAXParserFactory implementation: com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl loaded from: Java Runtime 
```

我通过 System.setProperty("jaxp.debug", "true"); 打开额外的 JAXP 日志记录 并看到它在每个方面都不同：

* * *

小型工作应用程序

```
[junit] JAXP: find factoryId =javax.xml.datatype.DatatypeFactory
[junit] JAXP: loaded from fallback value: com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl
[junit] JAXP: created new instance of class com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl using ClassLoader: null

[junit] JAXP: find factoryId =javax.xml.datatype.DatatypeFactory
[junit] JAXP: loaded from fallback value: com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl
[junit] JAXP: created new instance of class com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl using ClassLoader: null
[junit] JAXP: using thread context class loader (sun.misc.Launcher$AppClassLoader@6c5bdfae) for search
[junit] JAXP: Looking up system property 'javax.xml.xpath.XPathFactory:http://java.sun.com/jaxp/xpath/dom'
[junit] JAXP: The property is undefined.
[junit] JAXP: found null in $java.home/jaxp.properties
[junit] JAXP: no META-INF/services/javax.xml.xpath.XPathFactory file was found
[junit] JAXP: attempting to use the platform default W3C DOM XPath lib
[junit] JAXP: createInstance(com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl)
[junit] JAXP: loaded com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl from jar:file:/Library/Java/JavaVirtualMachines/jdk1.7.0_11.jdk/Contents/Home/jre/lib/rt.jar!/com/sun/org/apache/xpath/internal/jaxp/XPathFactoryImpl.class
[junit] JAXP: factory 'com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl' was found for http://java.sun.com/jaxp/xpath/dom

[junit] JAXP: find factoryId =javax.xml.transform.TransformerFactory
[junit] JAXP: loaded from fallback value: com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl
[junit] JAXP: created new instance of class com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl using ClassLoader: null 
```

* * *

完整的 Netbeans 应用程序（失败）

```
 [exec] JAXP: using thread context class loader (SystemClassLoader[420 modules]) for search
 [exec] JAXP: Looking up system property 'javax.xml.xpath.XPathFactory:http://java.sun.com/jaxp/xpath/dom'
 [exec] JAXP: The property is undefined.
 [exec] JAXP: found null in $java.home/jaxp.properties
 [exec] JAXP: no META-INF/services/javax.xml.xpath.XPathFactory file was found
 [exec] JAXP: attempting to use the platform default W3C DOM XPath lib
 [exec] JAXP: createInstance(com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl)
 [exec] JAXP: loaded com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl from jar:file:/Library/Java/JavaVirtualMachines/jdk1.7.0_11.jdk/Contents/Home/jre/lib/rt.jar!/com/sun/org/apache/xpath/internal/jaxp/XPathFactoryImpl.class
 [exec] JAXP: factory 'com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl' was found for http://java.sun.com/jaxp/xpath/dom
 [exec] JAXP: find factoryId =javax.xml.transform.TransformerFactory
 [exec] JAXP: found jar resource=META-INF/services/javax.xml.transform.TransformerFactory using ClassLoader: SystemClassLoader[420 modules]
 [exec] JAXP: loaded from fallback value: com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl
 [exec] JAXP: created new instance of class com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl using ClassLoader: null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:01:24.787

看起来，JDK 7（Oracle 以及 OpenJDK/IcedTea）添加了一项检查，以防止在存在任何安全管理器时禁用 XML 解析器的所谓[安全处理功能。](http://jaxp.java.net/1.4/JAXP-Compatibility.html#JAXP_security)此功能旨在防止拒绝服务攻击，例如通过提供具有深度嵌套实体定义的 SOAP 消息。不幸的是，他们通常选择在找到安全管理器时[禁用对此功能的控制，](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/org/apache/xerces/internal/jaxp/SAXParserFactoryImpl.java?av=f#113)而不是允许您通过[安全权限](http://docs.oracle.com/javase/7/docs/technotes/guides/security/permissions.html)对其进行配置。

但是，[尝试将此功能设置为 false 的 restlet 代码](https://github.com/restlet/restlet-framework-java/blob/master/modules/org.restlet.ext.jaxb/src/org/restlet/ext/jaxb/internal/Unmarshaller.java#L190)实际上是使用[`secureProcessing`JaxbRepresentation 的属性，](https://github.com/restlet/restlet-framework-java/blob/master/modules/org.restlet.ext.jaxb/src/org/restlet/ext/jaxb/JaxbRepresentation.java#L499)默认情况下应将其设置为 true，因此不应导致任何异常。

所以我能给你的唯一建议是尝试更新 restlet 库，因为可能默认设置或与此相关的其他内容已更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T16:32:23.620

当我从在 Java 6 上运行的 restlet 2.2m1 升级到在 Java 7 上运行的 restlet 2.2m5 时，我遇到了同样的问题。

我采用的解决方案是将您提到的 JaxbRepresentation 构造函数中的secureProcessor标志初始化为true（并重建restlet代码）。这为我解决了问题。目前尚不清楚该构造函数中缺少 secureProcessing 标志的初始化是故意的还是疏忽。

我提交了一个关于它的错误： [https ://github.com/restlet/restlet-framework-java/issues/785](https://github.com/restlet/restlet-framework-java/issues/785)

# java - 拆分后无法显示字符串值

> ID：14705006
> 
> 赞同：0
> 
> 时间：2013-02-05T10:13:57.727
> 
> 标签：java

我正在编写一个示例代码，它根据分隔符拆分给定的字符串并显示最终的字符串集。这是我的代码-

```
 String[] arr = null;
        String[] newArr = null;
        String strArr = "adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$";
        for (int i = 0; i < strArr.length(); i++) {
            newArr = strArr.split("\\$\\$\\$\\$");
            for (int j = 0; j < newArr.length; j++) {
                arr = newArr[j].split("\\$\\$");
            }
        }
        System.out.println(strArr);
        System.out.println(newArr[0]);
        System.out.println(arr[0]);
        System.out.println(arr[1]); // throwing exception here
        System.out.println(arr[2]);
        System.out.println(arr[3]); 
```

这是我得到的输出-

```
adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$
adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
    at ArraySplit.main(ArraySplit.java:20) 
```

这是我期待的输出 -

```
$adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$
$adg$dgsd$$brr$dhr$$ce$twt$$dttgdf$gdfg
$adg$dgsd
$brr$dhr
$ce$twt
$dttgdf$gdfg$ 
```

我观察到的是，如果有 2 个 $ 符号，因为它与分隔符模式相同，它工作正常。但由于中间有 3 个 $ 符号，我无法显示其余的 String 对象。关于如何解决这个问题的任何想法？（额外信息：我实际上将其用作在 PostGreSQL 中将部分字符串作为密码传递的一部分）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:32:25.430

> adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$

原始数组。

> adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg

$$$$ 作为分隔符，因此 newArray 的元素将是： adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg 和 $（您的字符串中有 5 $）

> $

在最后一个循环中，newArr[j] 将是 $，拆分将生成一个单元素数组，其中包含一个 $。所以 arr[0] 是 $。

> $
> 
> $
> 
> $

和上面一样。显然是 OutOfBoundsException。

我认为这个问题的关键是理解[String#split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)本身。看看文档。

以下代码将生成与您的预期结果类似的输出：

```
String strArr = "$adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$";
//Print out the string
System.out.println(strArr);
String newArr = strArr.replaceAll("\\$\\$\\$\\$\\$", "");
System.out.println(newArr);
String[] arr = newArr.split("\\$\\$");
for (int i = 0; i < arr.length; i++) {
    System.out.println(arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:19:38.513

可以看到的结果是**最后一次循环运行后**`arr`s的状态。

 **也许您想**在循环**中打印它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:24:52.827

```
String text = "$adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$";
String toArray = text.replaceAll("[\\$]{4}", "");
String[] result = toArray.split("[\\$]{2}");

// just printing
System.out.println(text);
System.out.println(toArray);
for (int i = 0; i < result.length; i++) {
    System.out.println(result[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:49:09.970

$ 符号保留用于匹配行尾。您正在使用 \$ 表达式搜索文字 '$'。所以你的表达式会将字符串分成几部分：

```
adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg$$$$$ =  "adg$dgsd$$$brr$dhr$$$ce$twt$$$dttgdf$gdfg" + "$" 
```

因发生**$$$$而分裂**

第二个循环将覆盖所有 arr0,arr1,arr2,arr3 到 $，第二个拆分字符串。显然，您的替换调用不会做任何事情，因为在第二个拆分字符串中没有匹配 $$ 。**

# iphone - 如何设置框架 UITableviewCell 图像大小？

> ID：14705008
> 
> 赞同：-2
> 
> 时间：2013-02-05T10:13:59.680
> 
> 标签：iphone, ios, objective-c, uitableview

我使用较小的图像尺寸，例如 26*27、15*28、...但是图像被拉伸，如何避免和设置所有图像对齐都是中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:51:35.997

您可以使用将图像设置为图像中心`UIViewContentModeCenter`

使用代码

```
imageView.contentMode=UIViewContentModeCenter; 
```

使用笔尖

![在此处输入图像描述](../Images/214709b5efc3e54ef7bfee5e13e2ef3b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:18:06.510

我想你想要：

```
imageView.contentMode = UIViewContentModeScaleAspectFill; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:25:23.413

使用以下方法指定图像的高度和宽度

```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回`NewImage`，具有您指定的特定大小

# jquery-ui - Jquery：如何在 Ajax 调用后使 Slider 工作？

> ID：14705011
> 
> 赞同：0
> 
> 时间：2013-02-05T10:14:07.787
> 
> 标签：jquery-ui, jquery, jquery-slider

**你好！**

我有一个非常好的过滤器插件，我用 Jquery UI Slider 制作，这是完整的代码和工作示例：

[http://jsbin.com/epikam/1/edit](http://jsbin.com/epikam/1/edit)

它工作得很好，唯一的问题是在 Ajax 调用之后它不会更改项目..

**这是 Ajax 调用：**

```
$.ajax({
     url: "search.php",
     dataType: 'json',
     type: 'GET',
     data: "q="+value+"&category="+cat+"&country="+country+"&page="+page,
         success: function(data){
            globalRequest = 0;
            resultContainer.fadeOut('fast', function() {
    resultContainer.html('');
        for (var x in data) {                   
    var html = '<li class="item" data-type="league2" data-id="id-'+x+'" style="position: relative;">';
    html += '<label class="title"><a href="'+data[x].url+'" target="_blank">'+data[x].Title+'</a></label>';
    html += '<img src="'+data[x].img+'">';
    html += '<label class="price">New Price: '+data[x].newprice+'</label>';
        html += '</li>';

        resultContainer.append(html);
        }

    resultContainer.fadeIn('fast');
            });
              }
            }); 
```

我尝试使用 .live 和 .delegate 没有成功（我不确定如何\在哪里使用它）

**有什么建议么？？**

非常感谢！！！

伊兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:15:11.000

两件事情：

首先，检查成功函数是否`console.log(data);`在`success:`回调中被调用，并且没有错误阻止 Ajax 调用成功完成。在 JavaScript 控制台中，检查变量`data`是否已正确填充并包含您希望它包含的数据。

其次，在 ajax 成功调用中使用 JQuery 选择器而不是全局变量。例如使用`$("#resultContainer")`（假设 div 有一个 id `resultContainer`）而不是变量 resultContainer。

# magento - 在管理网格 Magento 中显示另一个模型数据

> ID：14705013
> 
> 赞同：0
> 
> 时间：2013-02-05T10:14:09.453
> 
> 标签：magento

我正在开发客户订阅促销的扩展程序，当客户订阅时，我将保存用户 ID、产品 ID。

在订阅者模块中，我必须显示客户名称和产品名称。

所以我的问题是我们如何在网格中显示另一个模型数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:31:17.950

如果您的扩展使用扩展的网格`Mage_Adminhtml_Block_Widget_Grid`，您可以修改该`_prepareCollection()`函数以包含来自其他源的数据（通过连接）。此外，您还必须在网格中添加新列，这可以在 function 中完成`__prepareColumns()`。

例如，查看`Mage_Newsletter`模块[Mage_Adminhtml_Block_Newsletter_Subscriber_Grid的网格块](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Adminhtml/Block/Newsletter/Subscriber/Grid.php)

# ios - iOS - 使用我的应用程序用户界面在应用程序中嵌入视频

> ID：14705014
> 
> 赞同：0
> 
> 时间：2013-02-05T10:14:09.533
> 
> 标签：ios, animation, user-interface, media-player, movie

我正在开发一个可以播放一些动画短片的应用程序。此时我唯一的选择是嵌入动画帧。它工作得很好。但我只是想知道是否有另一种方法可以将动画文件直接嵌入为影片剪辑，以避免导入大量帧。也许图像压缩会更好。

在这方面，我知道这些替代方案：MediaPlayer 框架、MPMoviePlayerController 在这里展示了[http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/](http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/)以及其他一些技术在这里展示了[http://www.raywenderlich。 com/13418/how-to-play-record-edit-videos-in-ios](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

然而，这意味着使用 Apple 的 UI。相反，我想创建一个使用我自己的应用程序 UI 的更集成的体验。

有图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:31:52.983

看看 AVPlayer 类参考 [https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)。
和 AVPlayerLayer 类参考 [http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerLayer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerLayer_Class/Reference/Reference.html)
它有能力做你需要的。您也可以像其他 CALayers 一样为图层设置动画

# php - 如何使 SEO 友好的 url

> ID：14705015
> 
> 赞同：-5
> 
> 时间：2013-02-05T10:14:11.377
> 
> 标签：php, html, mysql, .htaccess

我的动态网址是

```
http://www.example.com/hamlyn/page.php?id=14 
```

我怎样才能使这个网址简短或搜索引擎友好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:18:31.720

.htaccess

```
RewriteEngine on
RewriteRule ^page/([0-9]+)$ page.php?id=$1 
```

以上将帮助您获得如下网址：

```
http://www.example.com/hamlyn/page/14 
```

这将映射到

```
http://www.example.com/hamlyn/page.php?id=14 
```

希望能帮助到你。

# jquery - 清除列表，除了特定的孩子

> ID：14705019
> 
> 赞同：1
> 
> 时间：2013-02-05T10:14:20.923
> 
> 标签：jquery, html, jquery-mobile

我正在处理一个动态添加和删除内容的列表。但是`li`，应该保留一个孩子，因为它包含一个将孩子添加到其父母的表单。我的问题是调用`empty()`列表也会清除表单子项。我试过`:not`在表单子类上使用：这种工作，实际`li`项目仍然存在，但所有表单 html 都被删除。

**JavaScript**

```
$('.singleList li:not(.newWish)').empty();
// Alternate version (same result)
$('.singleList li:not(.newWish):not(.newwishList)').empty(); 
```

**HTML**

```
<div class="singleListWrapper" style="display: none;">
    <ul data-role="listview" data-inset="true" data-theme="a" data-divider-theme="a"
    class="singleList">
        <!-- Other children will be dynamically added here -->
        <!-- Everything from here .... -->
        <li class="newWish">
            <div data-role="collapsible" data-theme="b" data-content-theme="c">
                    <h2>Legg til ønske</h2>

                <ul data-role="listview" class="newwishList">
                    <li data-role="fieldcontain" data-theme="a">
                        <label for="name">Ønskets navn:</label>
                        <input type="text" name="name" id="name" class="newWishName"
                        value="" />
                    </li>
                    <li data-role="fieldcontain" data-theme="a">
                        <label for="slider">Antall:</label>
                        <input type="range" name="slider" id="slider" data-theme="a"
                        class="newWishAmount" value="0" min="0" max="100" />
                    </li>
                    <li data-role="fieldcontain" data-theme="a">
                        <label for="price">Pris:</label>
                        <input type="text" name="name" id="price" class="newWishPrice"
                        value="" />
                    </li>
                </ul>
            </div>
        </li>
        <!-- ... To here should remain after empty() -->
    </ul>
</div> 
```

**.empty() 之后的 HTML**

（抱歉，由于所有 jQm 添加的类，格式不好。重要的是结构）

```
<li class="newWish ui-li ui-li-static ui-btn-up-a ui-last-child">
    <div data-role="collapsible" data-theme="b" data-content-theme="c" class="ui-collapsible  ui-collapsible-inset ui-corner-all ui-collapsible-themed-content">
        <h2 class="ui-collapsible-heading ui-li-heading"><a href="#" class="ui-collapsible-heading-toggle ui-btn ui-fullsize ui-btn-icon-left ui-btn-up-b" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="plus" data-iconpos="left" data-theme="b" data-mini="false"><span class="ui-btn-inner"><span class="ui-btn-text">Legg til ønske<span class="ui-collapsible-heading-status"> click to collapse contents</span></span><span class="ui-icon ui-icon-shadow ui-icon-minus">&nbsp;</span></span></a></h2>
        <div class="ui-collapsible-content ui-body-c" aria-hidden="false">
            <ul data-role="listview" class="newwishList ui-listview">
                <li data-role="fieldcontain" data-theme="a" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-btn-up-a ui-first-child"></li>
                <li data-role="fieldcontain" data-theme="a" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-btn-up-a"></li>
                <li data-role="fieldcontain" data-theme="a" class="ui-field-contain ui-body ui-br ui-li ui-li-static ui-btn-up-a ui-last-child"></li>
            </ul>
        </div>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:31:05.897

这是因为 的`li`项目`newwishList`也是 jQuery 的选择器的子项，`.singleList`也被 jQuery 的选择器选中，因为它们没有 of 的类`newWish`并且被清空。

除了添加类，您还可以使用它：

```
$(".singleList li:not(.newWish):not([data-theme=a])").remove(); 
```

[演示用小提琴](http://jsfiddle.net/CvDZQ/1/)

你可以使用`:not`伪类。

# django - Django - 如何自定义表单中的复选框？

> ID：14705021
> 
> 赞同：2
> 
> 时间：2013-02-05T10:14:30.090
> 
> 标签：django, django-forms

我没有关于如何使用复选框自定义表单的线索。基本上我只需要在查询集中选择一个列表的两个选项，我尝试使用“filter(pk=2, pk=3)”但它不起作用。我还必须选中“pk=2”选项且不可编辑，而“pk=3”选项可编辑且默认不选中。

我的表格（不起作用，过滤器（pk=2，pk=3）无效）：

```
class PrimaryCategoryForm(forms.ModelForm):
    primarycategorytype = forms.ModelMultipleChoiceField(queryset=PrimaryAdCategoryType.objects.filter(pk=2, pk=3), required=True, widget=forms.CheckboxSelectMultiple) 
```

关于如何实现这一目标的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:15:08.277

尝试使用 pythons union 运算符构建您的查询集 -

```
class PrimaryCategoryForm(forms.ModelForm):
    set_1 = PrimaryAdCategoryType.objects.filter(pk=2)
    set_2 = PrimaryAdCategoryType.objects.filter(pk=3)
    qs = set_1 | set_2
    primarycategorytype = forms.ModelMultipleChoiceField(queryset=qs, 
                                                        required=True,
                                                        widget=forms.CheckboxSelectMultiple) 
```

`|`操作员正在创建一个新集合，其中包含来自 的所有项目和来自 的所有`set_1`项目`set_2`。

更新

虽然上述方法将支持创建复杂的集合。如果你只是想挑几个pk的话，Martin在评论中的建议可能就足够了——

```
class PrimaryCategoryForm(forms.ModelForm):
    qs=PrimaryAdCategoryType.objects.filter(pk__in=[2,3])
    primarycategorytype = forms.ModelMultipleChoiceField(queryset=qs, 
                                                        required=True,
                                                        widget=forms.CheckboxSelectMultiple) 
```

可编辑的复选框

我认为在使复选框可编辑和预选时，您可能需要使用 javascript。也许[将数据属性添加到小部件](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)，然后创建一个基于数据属性操作复选框的 jquery 函数。就像是 -

```
attrs = {'data-selected-value': 2, 'data-readonly-value': 2}
primarycateogrytype = forms.ModelMultipleChoiceField(attrs=attrs) 
```

然后在javascript中 -

```
var readonlyCheckboxValue = $('#your_mulliplecheckboxselect).data('selected-value');
var $readonlyCheckbox = $('#your_multiplecheckboxselect .input[value=readonlyCheckboxValue]');
$readonlyCheckbox.attr('readonly', true); 
```

我没有测试过这段代码，但它应该让你了解我的建议。[如果您还没有遇到过数据属性](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)，请查看它 - 它非常棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:21:07.827

您可能需要表单本质上是动态的。您需要覆盖`__init__`该类的方法。

这里有这样的东西：[如何修改 ModelMultipleChoiceField 的选择](https://stackoverflow.com/questions/738301/how-to-modify-choices-of-modelmultiplechoicefield)

一个例子：

```
class ServiceStartForm(forms.Form):
    serviceList = service.models.Service.objects.all()
    print serviceList.count()
    b = {}
    for aService in serviceList:
        b[aService.id] = aService.name
    c = b.items()
    print "Within the form, ", serviceList.count()
    serviceChoice = forms.ChoiceField(choices=c, widget=forms.Select())
    input_directory = forms.CharField(max_length=200)
    output_directory = forms.CharField(max_length=200)

    def __init__(self, *args, **kwargs):
        super(ServiceStartForm, self).__init__(*args, **kwargs)
        serviceList = service.models.Service.objects.all()
        b = {}
        for aService in serviceList:
            b[aService.id] = aService.name
        c = b.items()
        self.fields["serviceChoice"].choices = c 
```

# css - 背景大小 100% 在 IE8 和 IE7 中不起作用

> ID：14705025
> 
> 赞同：3
> 
> 时间：2013-02-05T10:14:39.910
> 
> 标签：css, internet-explorer, cross-browser

我有一个空 div，其中包含大于容器大小的背景图像。`background-image`我用值 (100% 100%)修复了这个属性。这很好，直到您在 IE8 和 IE7 中打开示例。任何解决方案，甚至是 javascript 脚本或 jquery 插件？

即：http: [//jsbin.com/imirer/1/edit](http://jsbin.com/imirer/1/edit)

即：http: [//jsfiddle.net/bPTzE/](http://jsfiddle.net/bPTzE/)

HTML：

```
<div class="container">
    <div class="background"></div>
</div> 
```

CSS：

```
.container {
    /* an example width for responsive perpose */
    width: 500px;
}

.background {
    height: 27px;
    background: url("http://s18.postimage.org/jhbol7zu1/image.png") no-repeat scroll 100% 100% transparent;

    /* not working in IE8 and IE7 */
    background-size: 100% 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:23:37.470

因为 background-size 是 CSS3 特定的，IE 不支持你必须做这样的事情才能在 IE 中工作

将您的 html 和正文设置为

```
html {overflow-y:hidden}
body {overflow-y:auto} 
```

用 div #page-background 包裹你想要全屏显示的图像

```
#page-background {position:absolute; z-index:-1} 
```

然后把它放在你的html文件中

```
<div id="page-background">
  <img src="/path/to/your/image" width="100%" height="100%">
</div> 
```

** 你将不得不使用某种重置来删除边距和填充，像这样

```
html, body {height:100%; margin:0; padding:0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:23:14.870

ie7 和 ie8 不支持背景大小。

您可以在 div 标签中使用 put 'tag' 并为其添加宽度 100% 的替代方法。它是完全可扩展的。

试试这个代码：

```
<div class="container">
    <img src="http://s18.postimage.org/jhbol7zu1/image.png" width="100%" />
</div> 
```

或者

html:

```
<div class="container">
    <img src="http://s18.postimage.org/jhbol7zu1/image.png" />
</div> 
```

CSS：

```
.container img {
     width:100%
 } 
```

# youtube-api - 尝试使用 accesstoken 检索服务帐户执行时，Youtube api 返回错误

> ID：14705027
> 
> 赞同：1
> 
> 时间：2013-02-05T10:14:47.210
> 
> 标签：youtube-api, service-accounts

我能够使用 Google 服务帐户检索访问令牌，当我尝试使用与 Youtube API 相同的访问令牌时，我收到如下所述的错误：

```
<HTML>
<HEAD>
<TITLE>NoLinkedYouTubeAccount</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>NoLinkedYouTubeAccount</H1>
<H2>Error 401</H2>
</BODY>
</HTML> 
```

在通过服务帐户检索访问令牌时，我使用范围值作为“ [http://gdata.youtube.com](http://gdata.youtube.com) ”，并且我能够获取访问令牌，但在用于访问 youtube 用户配置文件 api 时使用相同的访问令牌，即“ [http:// gdata.youtube.com/feeds/api/users/default?v=2](http://gdata.youtube.com/feeds/api/users/default?v=2) " 上面提到的错误被抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:28:22.433

我认为问题在于您使用的是未链接的 Google 帐户和 API v2.0

[http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html](http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html)

*API v2.0 支持对拥有 YouTube 帐户的用户进行所有经过身份验证的操作，也可以称为关联的 Google 帐户，但不支持对未关联的 Google 帐户进行任何经过身份验证的操作。如果 v2.0 API 请求的身份验证令牌识别出未关联的 Google 帐户，API 将返回 401 NoLinkedYouTubeAccount 错误。*

# c# - 这是将多维字节数组转换为字节数组列表的最佳方法吗？

> ID：14705033
> 
> 赞同：0
> 
> 时间：2013-02-05T10:15:08.730
> 
> 标签：c#

我有一个必须返回字节列表的方法，如下所示：

```
 public List<byte[]> ExportXYZ(IPAddress ipAddress, WebCredential cred) 
```

在上面的方法中，我调用了返回多维字节数组的第三方方法：

```
 byte[][] tempBytes = xyzProxy.ExportCertificates(); 
```

所以现在我需要转换`byte[][]`为`List<byte[]>`.

我写了下面的代码

```
private List<byte[]> ConvertToSigleDimensional(byte[][] source)
{
    List<byte[]> listBytes = null;

    for(int item=0;item < source.Length;item++)
    {
        listBytes.Add(source[i][0]);
    }

    return listBytes;
} 
```

我觉得这不是一个好的编码方式。谁能帮我为转换编写正确的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:20:39.460

您的方法不返回一个列表`byte`- 它返回一个`byte[]`, 字节数组的列表。

由于您的输入是一个字节数组的数组，您可能可以简单地从一个转换为另一个。

使用 LINQ：

```
 byte[][] arr = ...;
  List<byte[]> list = arr.ToList(); 
```

没有 LINQ：

```
 byte[][] arr = ...;
  List<byte[]> list = new List<byte[]>(arr); 
```

# c++ - 无法使用 MySQL Connector/C++ 从 C++ 程序连接到 MySQL 数据库：抛出异常

> ID：14705034
> 
> 赞同：3
> 
> 时间：2013-02-05T10:15:09.733
> 
> 标签：c++, mysql, exception, database-connection, mysql-connector

我有一个从 C++ 程序到 MySQL 数据库的连接问题：

```
std::string server, user, password;
SetParams(server, user, password);
boost::shared_ptr<sql::Connection> conn;
sql::Driver *driver = get_driver_instance();

if(driver == 0) { /* error; never reached */ }

try {
    conn.reset(driver->connect(server, user, password));

    assert(conn != 0);

    if(!conn->isClosed())    // <-- exception thrown
    {
        // Connection established
    }
    else {
        // Connection failed
    }
}
catch (sql::SQLException &e)
{
    cerr << e.what << e.getErrorCode() << e.getSQLState() << endl;
} 
```

该`sql::Connection::isClosed()`函数抛出此异常：

```
SQLException: Connection has been closed  
MySQL error code: 0  
SQLState: HY000 
```

服务器、用户和密码的值是正确的（它们可以从 MySQL-Workbench 连接），数据库已启动并正在运行。

我不知道在哪里看...
谢谢。

平台：
Linux - OpenSuse 11.4
MySQL 5.x
MySQL Connector/C++ 1.0.5

* * *

更新：
由于我在某处读到 MySQL Connector/C++ 和 Boost 之间可能存在的冲突，因此我尝试使用普通指针而不是 boost::shared_ptr。没有改变。

* * *

更新2：
将此代码隔离在主程序之外，连接成功。
我必须看大局...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:57:28.647

检查此链接[http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html#test](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html#test)

问题在于您使用数据库创建的连接

```
 driver = get_driver_instance();
    /* create a database connection using the Driver */
    con = driver -> connect(url, user, password);
    /* alternate syntax using auto_ptr to create the db connection */
    //auto_ptr  con (driver -> connect(url, user, password));
    /* turn off the autocommit */
    con -> setAutoCommit(0);
    cout << "\nDatabase connection\'s autocommit mode = " << con -> getAutoCommit() << endl;
    /* select appropriate database schema */
    con -> setSchema(database); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:06:02.463

剪切并粘贴代码以在新的测试项目中访问数据库，一切正常。
不产生异常并建立连接。

这意味着我必须看看项目的其余部分会发生什么。

# c# - 如何使用 C# 登录 ftp 帐户？

> ID：14705035
> 
> 赞同：-4
> 
> 时间：2013-02-05T10:15:09.820
> 
> 标签：c#, winforms, ftp

我想登录一个**ftp 帐户**并在文件视图控件中显示文件或目录。

最好的方法是什么？

我可以做到，但是会出现一些安全问题，例如如果您在**URL**中使用您的用户名和密码，文件的位置也会显示您提供的凭据。

我想在出现的登录对话框中连接文件视图而不登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:27:35.770

你可以看看这个 FTP 客户端 + 控件：

[http://www.blackbeltcoder.com/Articles/client/an-ftpclient-class-and-winform-control](http://www.blackbeltcoder.com/Articles/client/an-ftpclient-class-and-winform-control)

# magento - Magento 管理属性集加载空页面

> ID：14705036
> 
> 赞同：2
> 
> 时间：2013-02-05T10:15:11.483
> 
> 标签：magento, attributes, e-commerce

当我单击一个属性集来编辑/配置它时，Magento 会加载一个空页面。我在这里和谷歌上搜索了一个解决方案，并尝试更改 memory_limit 和 max_execution_time 但没有成功。

我看到的页面有 Magento 管理面板页眉/页脚和所有 CSS，但中间是空的。

我也尝试过刷新缓存等。

我正在使用 Magento 1.7 社区版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:02:01.253

看起来像那样吗？[http://www.magentocommerce.com/?ACT=25&fid=10915&aid=26491_ZqIJgFakZKbxKEik4Iby&board_id=1](http://www.magentocommerce.com/?ACT=25&fid=10915&aid=26491_ZqIJgFakZKbxKEik4Iby&board_id=1)

在我的情况下，法语翻译导致了问题（一个字符串被错误地转义并导致 Javascript 错误）。也许尝试使用管理区域左下角的下拉菜单切换到英语。

我刚刚安装了[新的语言包](http://connect20.magentocommerce.com/community%20Mage_Locale_fr_FR)，现在它又可以用法语工作了。

```
./mage install http://connect20.magentocommerce.com/community Mage_Locale_fr_FR --force 
```

# gcc - 如何用cmake构建包？

> ID：14705038
> 
> 赞同：3
> 
> 时间：2013-02-05T10:15:17.390
> 
> 标签：gcc, makefile, cmake

我想为 ubuntu 构建包 uci。

我下载了源码包，发现里面有`C`文件，`header`文件和`CMakeLists.txt`

如何用cmake构建uci项目？

**CMakeLists.txt**：

```
cmake_minimum_required(VERSION 2.6)

PROJECT(uci C)

SET(CMAKE_INSTALL_PREFIX /usr)

ADD_DEFINITIONS(-Os -Wall -Werror --std=gnu99 -g3 -I. -DUCI_PREFIX="${CMAKE_INSTALL_PREFIX}")

OPTION(UCI_PLUGIN_SUPPORT "plugin support" ON)
OPTION(UCI_DEBUG "debugging support" OFF)
OPTION(UCI_DEBUG_TYPECAST "typecast debugging support" OFF)
OPTION(BUILD_LUA "build Lua plugin" ON)

CONFIGURE_FILE( ${CMAKE_SOURCE_DIR}/uci_config.h.in ${CMAKE_SOURCE_DIR}/uci_config.h )

SET(LIB_SOURCES libuci.c file.c util.c delta.c parse.c)

ADD_LIBRARY(uci-shared SHARED ${LIB_SOURCES})
SET_TARGET_PROPERTIES(uci-shared PROPERTIES OUTPUT_NAME uci)
TARGET_LINK_LIBRARIES(uci-shared dl)

ADD_LIBRARY(uci-static STATIC ${LIB_SOURCES})
SET_TARGET_PROPERTIES(uci-static PROPERTIES OUTPUT_NAME uci)

ADD_EXECUTABLE(cli cli.c)
SET_TARGET_PROPERTIES(cli PROPERTIES OUTPUT_NAME uci)
TARGET_LINK_LIBRARIES(cli uci-shared dl)

ADD_EXECUTABLE(cli-static cli.c)
SET_TARGET_PROPERTIES(cli-static PROPERTIES OUTPUT_NAME uci-static)
TARGET_LINK_LIBRARIES(cli-static uci-static dl)

ADD_LIBRARY(ucimap STATIC ucimap.c)

ADD_EXECUTABLE(ucimap-example ucimap-example.c)
TARGET_LINK_LIBRARIES(ucimap-example uci-static ucimap dl)

ADD_SUBDIRECTORY(lua)

INSTALL(FILES uci.h uci_config.h ucimap.h
    DESTINATION include
)

INSTALL(TARGETS uci-shared uci-static cli cli-static
    ARCHIVE DESTINATION lib
    LIBRARY DESTINATION lib
    RUNTIME DESTINATION bin
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:17:41.723

我不知道这种特殊情况，但 CMake 的通用操作模式如下。假设您解压缩了包源，以便 CMakeList 位于`/some/path/to/source/CMakeLists.txt`. 然后：

```
> cd /path/where/you/want/to/build
> mkdir package_name
> cd package_name
> cmake /some/path/to/source 
```

接下来，如果需要，启动（控制台）GUI 以编辑选项的可选步骤：

```
> ccmake 
```

对设置满意后：

```
> make
> make install 
```

CMake 也有一个非控制台 GUI，但我从未在 Unix 上使用过它，所以我不能在那里发表评论。不过基本思路是一样的：设置一个构建目录，将 GUI 指向源目录（包含 CMakeLists.txt 的目录），配置、修改 uptions 并根据需要重新配置，生成 Makefile，退出 GUI 并运行`make`.

# java - eclipselink和netbeans java桌面应用程序jdialog没有启动

> ID：14705039
> 
> 赞同：1
> 
> 时间：2013-02-05T10:15:20.423
> 
> 标签：java

我在 netbeans 中开发了一个小型工资单应用程序，当我运行它时它似乎工作正常，我清理并构建了它，现在我在 dist 文件夹和 eclipselink 库中拥有 jar 文件，derby 以及 lib 文件夹中的所有内容。我的问题是一个连接到实体管理器的特定 jdialog，它让我查看一些数据库条目没有启动，我已经尝试了两个 netbeans 数据库应用程序，但它也不起作用。但它在 IDE 中启动很好，可能是什么错误？没有任何堆栈轨道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:43:30.110

Netbeans 是一个工具，它自动将所需的 jarfile 添加到您的主应用程序的 classpat 中。但是当您尝试手动运行时，您会错过运行主应用程序所需的类路径。

您需要编写一个 .bat 文件，在 bat 文件中设置您的类路径，最后运行您的主程序。

# jquery - 在 Visual Studio 中使用最新的 jQuery 文件

> ID：14705042
> 
> 赞同：2
> 
> 时间：2013-02-05T10:15:26.853
> 
> 标签：jquery, visual-studio-2012, nuget

当我在 Visual Studio 2012 中使用 Web 模板（如 MVC 4）时，脚本文件夹中已经填充了 jQuery 文件。这一切都很好，除了每次使用不是最新的版本。然后我必须手动引入最新的 jQuery 文件或使用 NuGet。

在 Visual Studio 中创建项目时，有没有办法自动获取最新的 jQuery 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:39:20.410

您可以直接更改模板文件以对所有新项目执行此操作。更多详情请点击[此链接。](http://www.xavierdecoster.com/update-project-template-to-latest-nuget-packages)

*注意：我建议您创建自己的项目模板，这样您就可以随时恢复到默认模板，以防您或其他人将事情搞砸*

**所有 Visual Studio (2012) 项目模板都可以在这里找到：**

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\ 
```

如果您想创建一些自定义项目模板，我建议您在此处创建它们：

```
%USERPROFILE%\Documents\Visual Studio 2012\Templates\ProjectTemplates 
```

对于 MVC4 CSHTML 项目模板。你可以在这里找到它：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\CSharp\Web\1033\MvcWebApplicationProjectTemplatev4.0.cshtml\ 
```

要修改文件，您必须以管理员身份对其进行编辑。

更新下面提到的部分，默认情况下将依赖项更新到版本 1.8.2。

```
<WizardData>
        <packages repository="registry" keyName="AspNetMvc4VS11" isPreunzipped="true">
            <package id="EntityFramework" version="5.0.0" skipAssemblyReferences="true" />
            <package id="jQuery" version="1.8.2" />
... 
```

# php - 使用 PHP 将 HTML 页面与 MySQL 连接

> ID：14705049
> 
> 赞同：0
> 
> 时间：2013-02-05T07:11:17.440
> 
> 标签：php, html, mysql

这是我将页面连接到数据库（MySQL）的代码：

```
<html>
<body>
<title>Home</title>

<script language="javascript">

function checkTextField(field) {
    if (field.value == '') {
        alert("Field is empty");
    }
}

function a(id) {
    var ay = document.getElementById(id).value;

var pattern = /\d{4}-\d{2,4}/;

    if(pattern.test(ay))

    {

    ay.style.backgroundColor="#52F40C";
    return true;
        } 
    else 
    {
     window.alert ("Enter in YYYY-YY or YYYY-YYYY format");
    ay.style.backgroundColor="red";
     ay.focus();
         ay.value="";        
     return false;

    }
}

function c()
{

    var n=document.getElementById("name");

    var re=/^[a-zA-Z]+ ?[a-zA-Z]*$/;

    if(re.test(n.value))
    {

               n.style.backgroundColor="#52F40C";
    }
    else
    {
        window.alert("Invalid place name");
               n.style.backgroundColor="#F40C0C";
               n.focus();
               n.value="";

    }
}

function d()
{
 var n= document.getElementById("date");
 var re=/^(?:(0[1-9]|1[012])[\- \/.](0[1-9]|[12][0-9]|3[01])[\- \/.](19|20)[0-9]{2})$/;
  if (re.test(n.value))
  {
     n.style.backgroundColor="#52F40C";

  }
  else
  {
    window.alert("enter in MM DD YYYY format");
               n.style.backgroundColor="#F40C0C";
               n.focus();
               n.value="";

  }
}

</script>
<body style="background-color:#708090;">

<?php

if (isset($_POST['submit']))
{

    $mysqli= new mysqli("localhost","admin","admin", "nba" );

    if($mysqli === false)
    {
        die("could not connect:" . mysqli_connect_error());
    }

    if ($inputError != true && empty($_POST['ayear']) )
    {
        echo 'ERROR: Please enter a valid year';
        $inputError = true;
    }
    else
    {
        $ayear = $mysqli-> escape_string($_POST['ayear']);
    }

    if ($inputError != true && empty($_POST['fyear']) )
    {
        echo 'ERROR: Please enter a valid year';
        $inputError = true;
    }
    else
    {
        $fyear = $mysqli->  escape_string($_POST['fyear']);
    }   

    if ($inputError != true)
    {
        $sql="INSERT INTO year VALUES ('$ayear','$fyear')";
        if ($mysqli-> query($sql)==true)
        {
            echo'Added';
        }
        else
        {
            echo"ERROR: Could not execute query : $sql. " . $mysqli-> error;
        }
    }

    $mysqli-> close();

}
?> 

<h1 style="font-family:Verdana;text-align:center;">National Board of Accrediation <br>of<br> Programme</h1>
<br>

<div id="menu" style="background-color:#800000;height:25px;width:1000px">
<b><font "style="font-family:Verdana"><a href="part1.html" title="Institutional Summary"style="color: #000000">Part I</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part2.html"title="Departmental/Program Summary"style="color: #000000">Part II</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part3.html"title="Curricula,Syllabi,PEOs and POs"style="color: #000000">Part III</a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href="part4.html" title="List of Documents to be made available during the visit"style="color: #000000">Part IV</a></font></b>
</div>

</p>

<h4 style="font-family:Verdana;text-align:center;"><b><u>Declaration</u></b></h4>

<form method="post" action="home.html">

<p> (<input type="text" size="9"  name="ayear" id="ayear" onChange="a('ayear');" onBlur="checkTextField(this);">)  (<input type="text" size="9"  name="fyear" id="fyear" onChange="a('fyear');" onBlur="checkTextField(this);">).</p>

<p>Place:<input type="text" size="20" name="name" id="name" onChange="c();" onBlur="checkTextField(this);"></p>

<p>Date:<input type="text" size="10" name="date" id="date" onChange="d();" onBlur="checkTextField(this);">

<input type="submit" name="submit" value="Submit"/>
</form>
</body>
</html> 
```

数据库连接不工作。我怎样才能解决这个问题？代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:20:43.990

除非您将 HTML 设置为像 PHP 代码一样执行，否则您的任何动态代码都不会工作。

`.php`使用扩展名保存该文件的副本并测试它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:23:07.113

将文件扩展名更改为 .php

此外，在您的表单操作中还包括一个 PHP 扩展。像下面

```
<form method="post" action="home.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T17:31:25.047

为什么你试图在 保存你的文件扩展名中执行你的`php`代码肯定会起作用。`HTMl``.php`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:32:52.697

除了其他建议之外，我看到您在 -> 几个位置之后放置了一个“空格”；

例如

```
$mysqli-> escape_string($_POST['ayear']); 
```

应该

```
$mysqli->escape_string($_POST['ayear']); 
```

# xslt - Sharepoint 2010 xslt dataview：修改表结构以显示列表项

> ID：14705054
> 
> 赞同：0
> 
> 时间：2013-02-05T10:15:56.207
> 
> 标签：xslt, sharepoint

我有一个要显示的图像列表。SharePoint 中的标准模板，每个项目将使用 xsl:for-each 循环并在表格中显示为单行，如下面的示例

```
 __________   
|          |  
|  image   |  
|__________|  
 __________   
|          |  
|  image   |  
|__________| 
 __________
|          |  
|  image   |  
|__________|  
 __________   
|          |  
|  image   |  
|__________| 
```

简单的代码：

```
<xsl:for-each select="$Rows">
   <tr>
      <td><xsl:value-of ......./> </td>
   </tr>
</xsl:for-each> 
```

我需要做的是在每行中显示 3 个项目，如下面的示例

```
 __________     __________     __________
|          |   |          |   |          |
|  image   |   |  image   |   |  image   |
|__________|   |__________|   |__________|
 __________     __________     __________
|          |   |          |   |          |
|  image   |   |  image   |   |  image   |
|__________|   |__________|   |__________| 
```

如何使用循环在 xslt 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:42:41.753

我通常不建议`for-each`在 XSL 中使用嵌套的 es，但为了避免过多地使用 XSLT，如何：

```
<xsl:for-each select="$Rows[position() mod 3 = 1]">
   <tr>
      <!-- Select the (0-based) position within this iteration -->
      <xsl:variable name="i" select="position() - 1" />
      <xsl:for-each select="$Rows[(position() &gt; ($i * 3)) and
                                  (position() &lt;= (($i + 1) * 3))]">
         <td><xsl:value-of ......./> </td>
      </xsl:for-each>
   </tr>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:26:02.413

另一种方法是使用`<li>`而不是表格单元格。这正确地设置了基础数据的表示。使用适当的 CSS，您可以根据 webpart(?) 的可用宽度来包装列表项。

```
<style>
.imagelist li { float: left; }
</style> 
```

然后...

```
<ul class="imagelist">
<xsl:for-each select="$Rows">
      <li><xsl:value-of ......./> </li>
</xsl:for-each>
</ul> 
```

当然，您可能需要在列表的 web 部件/容器中添加“宽度”样式规则 - 这取决于图像的宽度。

# javascript - 单击了使用元素运行的 Javascript 的调试

> ID：14705058
> 
> 赞同：2
> 
> 时间：2013-02-05T10:16:13.667
> 
> 标签：javascript, debugging, firebug

`<img id='hitMe' />`考虑一个在 jQuery 函数中被引用的元素，`$('#hitme').click()`或者`$(document).on('click', '#hitme')`. 除了 grepping 字符串之外，如何在 Javascript 源代码中找到这些函数`hitme`？考虑到 grepping 是不可行的，因为字符串可能有任意大量的引用，并且可能有大量导入的 Javascript 文件。

也许有一种方法可以让 Firebug 进入在页面加载后逐行运行的 Javascript 函数？考虑到我不知道在哪里设置断点，因为我不知道运行哪个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:21:21.250

Chrome 或 Chromium 可以在这方面为您提供帮助。右键单击您要探索的元素，选择“检查元素”，查看以“计算样式”、“样式”开头的右侧面板......在它的底部你会找到该部分“事件侦听器”，它为您提供有关侦听哪些事件以及在代码中附加它的位置的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:35:54.810

我推荐 Visual Event 小书签。接下来是该网站的无耻复制粘贴：

Visual Event 是一个开源 Javascript 小书签，它提供有关已附加到 DOM 元素的事件的调试信息。视觉事件显示：

*   哪些元素附加了事件
*   附加到元素的事件类型
*   将与事件一起运行的代码被触发
*   定义附加函数的源文件和行号（仅限 Webkit 浏览器和 Opera）

[http://www.sprymedia.co.uk/article/Visual+Event+2](http://www.sprymedia.co.uk/article/Visual+Event+2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T12:12:08.807

尝试以下操作（我正在使用 Chrome/Chrome 开发工具）：

1.  用类似的东西覆盖 jQuery 的 on/click 函数：

    `var old = $.fn.on; $.fn.on = function() { console.log('called on'); debugger; old.apply(this, arguments);}`

2.  现在，对 .on() 的每个调用都应该通过您（同步）并在“调试器”处暂停；陈述。

3.  暂停后，在“调用堆栈”下查找并找到您要查找的函数（例如调用 .on() 的函数）。您还可以在上面的覆盖函数中添加一些条件，以确保不是每次调用 .on() 都会暂停。

![Chrome 开发工具 - 脚本已暂停](../Images/410dcc8aa81c6263163f5c18bb264967.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-08T08:39:02.510

这是一个捕获事件触发（调度）的时刻而不是添加侦听器的时刻（on/click）的解决方案。

它可以通过覆盖来完成`jQuery.event.dispatch`。例如：

```
(function($){
    var old = $.event.dispatch;
    $.event.dispatch = function(event){
        if(event.type=='click'){
            var handlers = ( $._data( this, "events" ) || {} )[ event.type ] || [];
            console.log('handlers', handlers[0]);
        }
        old.apply(this, arguments);
    };
})(jQuery); 
```

在此示例中，我选择将函数的内容打印到控制台，但也可以像 [Omri Sivan](https://stackoverflow.com/users/1263595/omri-sivan)建议的那样调试它，使用`debugger;`. 使用 Chrome，您应该能够右键单击该功能以“显示功能定义”。

# android - 从 Android 应用程序的 Rss 链接标签获取内容

> ID：14705061
> 
> 赞同：0
> 
> 时间：2013-02-05T10:16:35.847
> 
> 标签：android, xml-parsing, rss

由于我是开发 Android 应用程序的新手，因此我在这里寻求有关为特定网站创建应用程序的一些帮助。任务是为新闻制作应用程序：应该有包含商业、娱乐、体育等类别的菜单，其中包含标题列表和 pubDates 例如（listView），当您单击该项目时，整个新闻将打开（标题，日期、图像、内容或类似内容）。

网站的 RSS 结构如下：

```
 <?xml version="1.0" encoding="utf-8"?><rss xmlns:a10="http://www.w3.org/2005/Atom"         version="2.0">
    <channel>

    <item>
    <guid isPermaLink="true">http://www.balkanmagazin.net/novosti-i-politika/cid128-57413/putin-i-kiril-cvrsto-zajedno</guid>
    <link>http://www.balkanmagazin.net/novosti-i-politika/cid128-57413/putin-i-kiril-cvrsto-zajedno</link>
    <category>Novosti i politika</category>
    <title>Putin i Kiril čvrsto zajedno</title>
    <description>&lt;img alt="" style=""  src="/Storage/Global/DynamicImage/cid-57413-        455-253-Kiril-Putin-ilu61cc0f32-1ea0-4049-9455-259d70fda69d.jpg" /&gt;
    &lt;p&gt;Važnije od ljudskih prava su vera, moral, svetinje i otadžbina, smatra Ruska pravoslavna crkva, ušančena u rovu odbrane Rusije od Zapada zajedno s Kremljom&lt;br/&gt;(foto: patrijarh Kiril i predsednik Putin)&lt;/p&gt;
    </description>
    <pubDate>Tue, 05 Feb 2013 01:12:12 +0100</pubDate>
    </item>

    ...
    </channel> 
```

我在问这些标签是否足以提供文章中的内容和图像？有没有办法从描述或链接标签或 RSS 提要中获取它们必须有内容标签？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:40:46.560

您想熟悉使用**Sax Parser**来读取数据。

我个人用于**Sax Parsing**的一个很好的教程[在这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/)。

您将能够轻松地从 Rss 提要中提取不同的字段，并使用**Sax Parsing**将它们添加到自定义对象中。

您可以获取链接标签，您可以发起 Http 请求以下载 URL 的实际内容，然后以类似的方式单独显示/解析它。（HTML 解析可能比 RSS/XML 更复杂，但仍有可能）。

为了从描述中提取图像等，您正在寻找一个更棘手的解决方案，但是您可以例如搜索您为描述提取的字符串并查找`"src="`标签，然后使用文本，`String.subString()`直到您到达末尾标签。

希望这可以帮助您上路。

# python - 在 matplotlib 图中绘制平滑曲线

> ID：14705062
> 
> 赞同：13
> 
> 时间：2013-02-05T10:16:36.463
> 
> 标签：python, matplotlib, netcdf, smoothing

我正在使用 python 读取 netcdf 文件，需要使用 python 中的 matplotlib 库绘制图形。netcdf 文件包含 3 个变量：`u` `v`和`w`组件。我必须在垂直比例上绘制这 3 个组件。因为这些数据将用于天气预报雷达。我需要用拐角处的平滑曲线绘制这些图表。现在情节看起来![喜欢](../Images/849b3643e9cb1eac21cdace09447e872.png) **和代码是......**

```
from netCDF4 import Dataset
from pylab import *
import numpy  
from scipy import interpolate
from scipy.interpolate import spline

#passing the filename

root_grp=Dataset('C:\\Python27\\MyPrograms\\nnt206rwpuvw.nc')

#getting values of u component
temp1 = root_grp.variables['ucomponent']
data1 = temp1[:]
u=data1[0]

#getting values of v component
temp2 = root_grp.variables['wcomponent']
data2 = temp2[:]
v=data2[0]
#getting values of w component
temp3 = root_grp.variables['wcomponent']
data3 = temp3[:]
w=data3[0]
#creating a new array
array=0.15*numpy.arange(1,55).reshape(1,54)
#aliasing
y=array[0]
#sub-plots
f, (ax1, ax2, ax3) = plt.subplots(1,3, sharey=True)
ax1.plot(u,y,'r')
ax2.plot(v,y,'g')
ax3.plot(w,y,'b')
#texts
ax1.set_title('u component',fontsize=16,color='r')
ax2.set_title('v component',fontsize=16,color='g')
ax3.set_title('w component',fontsize=16,color='b')
show() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T10:33:59.190

一个简单的解决方案是使用样条线进行插值，如一个[不错的 Scipy 教程](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)中所述。

这是一个例子：

![在此处输入图像描述](../Images/9d32330f30bbbff2bfa76d24e9eb6a79.png)

# mysql - 无需api将城市和街道读入数据库

> ID：14705063
> 
> 赞同：0
> 
> 时间：2013-02-05T10:16:37.347
> 
> 标签：mysql, openstreetmap

我设法将 osm 文件下载并提取到 mysql 数据库中，例如：

渗透 --read-xml myfile.osm --write-apidb dbType="mysql" host="localhost" database="osm" user="osm"

我现在需要的是一种仅将城市及其街道放入数据库并进行查询的方法。那么如何将从 osm 文件传递​​到数据库的数据限制在城市和街道上呢？我不需要任何额外的数据。

我不想只使用任何 API 或服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:23:29.417

[Osmosis](http://wiki.openstreetmap.org/wiki/Osmosis)支持所谓的[数据操作任务](http://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage#Data_Manipulation_Tasks)，可用于过滤特定数据。为了只获得城市和街道，过滤[地点](http://wiki.openstreetmap.org/wiki/Key%3aplace)和[高速公路](http://wiki.openstreetmap.org/wiki/Key%3ahighway)标签（节点和区域）就足够了。所需的参数似乎是，`--tf accept-ways place=* --tf accept-nodes place=* --tf accept-ways highway=* --tf accept-nodes highway=*`但我自己从未使用过渗透。

# c# - 使用自动映射器将一个源类映射到多个派生类

> ID：14705064
> 
> 赞同：35
> 
> 时间：2013-02-05T10:16:39.130
> 
> 标签：c#, automapper, automapper-2

假设我有一个源类：

```
public class Source
{
    //Several properties that can be mapped to DerivedBase and its subclasses
} 
```

还有一些目的地类别：

```
public class DestinationBase
{
     //Several properties
}

public class DestinationDerived1 : DestinationBase
{
     //Several properties
}

public class DestinationDerived2 : DestinationBase
{
     //Several properties
} 
```

然后我希望派生的目标类继承基类的自动映射器配置，因为我不想重复它，有没有办法实现这一点？

```
Mapper.CreateMap<Source, DestinationBase>()
    .ForMember(...)
    // Many more specific configurations that should not have to be repeated for the derived classes
    .ForMember(...);

Mapper.CreateMap<Source, DestinationDerived1 >()
    .ForMember(...);
Mapper.CreateMap<Source, DestinationDerived2 >()
    .ForMember(...); 
```

当我这样写它时，它根本不使用基本映射，并且 include 似乎对我没有帮助。

编辑：这就是我得到的：

```
public class Source
{
    public string Test { get; set; }
    public string Test2 { get; set; }
}

public class DestinationBase
{
    public string Test3 { get; set; }
}

public class DestinationDerived1 : DestinationBase
{
    public string Test4 { get; set; }
}

public class DestinationDerived2 : DestinationBase
{
    public string Test5 { get; set; }
} 
```

* * *

```
Mapper.CreateMap<Source, DestinationBase>()
              .ForMember(d => d.Test3, e => e.MapFrom(s => s.Test))
              .Include<Source, DestinationDerived1>()
              .Include<Source, DestinationDerived2>();

        Mapper.CreateMap<Source, DestinationDerived1>()
              .ForMember(d => d.Test4, e => e.MapFrom(s => s.Test2));

        Mapper.CreateMap<Source, DestinationDerived2>()
              .ForMember(d => d.Test5, e => e.MapFrom(s => s.Test2)); 
```

AutoMapper.AutoMapperConfigurationException ：找到未映射的成员。查看下面的类型和成员。

# 添加自定义映射表达式、忽略、添加自定义解析器或修改源/目标类型

## Source -> DestinationDerived1（目标成员列表）

测试3

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-05T10:23:29.327

将派生映射包含到基本映射中：

```
Mapper.CreateMap<Source, DestinationBase>()
    .ForMember(d => d.Id, op => op.MapFrom(s => s.Id)) // you can remove this
    .Include<Source, DestinationDerived1>()
    .Include<Source, DestinationDerived2>();

Mapper.CreateMap<Source, DestinationDerived1>()
    .ForMember(d => d.Name, op => op.MapFrom(s => s.Text))
    .ForMember(d => d.Value2, op => op.MapFrom(s => s.Amount));

Mapper.CreateMap<Source, DestinationDerived2>()
    .ForMember(d => d.Value, op => op.MapFrom(s => s.Amount)); 
```

用法：

```
Mapper.AssertConfigurationIsValid();
var s = new Source() { Id = 2, Amount = 10M, Text = "foo" };
var d1 = Mapper.Map<DestinationDerived1>(s);
var d2 = Mapper.Map<DestinationDerived2>(s); 
```

请参阅AutoMapper wiki 上的[映射继承。](https://github.com/AutoMapper/AutoMapper/wiki/Mapping-inheritance)

* * *

更新：这是完整的类代码，可以正常工作。

```
public class Source
{
    public int Id { get; set; }
    public string Text { get; set; }
    public decimal Amount { get; set; }
}

public class DestinationBase
{
    public int Id { get; set; }
}

public class DestinationDerived1 : DestinationBase
{
    public string Name { get; set; }
    public decimal Value2 { get; set; }
}

public class DestinationDerived2 : DestinationBase
{
    public decimal Value { get; set; }
} 
```

* * *

更新（AutoMapper 错误的解决方法）：

```
public static class Extensions
{
    public static IMappingExpression<Source, TDestination> MapBase<TDestination>(
        this IMappingExpression<Source, TDestination> mapping)
        where TDestination: DestinationBase
    {
        // all base class mappings goes here
        return mapping.ForMember(d => d.Test3, e => e.MapFrom(s => s.Test));
    }
} 
```

和所有映射：

```
 Mapper.CreateMap<Source, DestinationBase>()
          .Include<Source, DestinationDerived1>()
          .Include<Source, DestinationDerived2>()
          .MapBase();

    Mapper.CreateMap<Source, DestinationDerived1>()
          .MapBase()
          .ForMember(d => d.Test4, e => e.MapFrom(s => s.Test2));

    Mapper.CreateMap<Source, DestinationDerived2>()
          .MapBase()
          .ForMember(d => d.Test5, e => e.MapFrom(s => s.Test2)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-18T14:05:15.737

**对于 Automapper 8.0**。
当前版本具有新方法[IncludeAllDerived](http://docs.automapper.org/en/stable/Mapping-inheritance.html#mapping-inheritance)
这是工作示例：

```
 var config = new MapperConfiguration(cfg =>
        {
            cfg.CreateMap<Source, DestinationBase>()
                .ForMember(dest => dest.Test3, opt => opt.MapFrom(src => src.Test))
                .IncludeAllDerived();

            cfg.CreateMap<Source, DestinationDerived1>()
                .ForMember(dest => dest.Test4, opt => opt.MapFrom(src => src.Test2));

            cfg.CreateMap<Source, DestinationDerived2>()
                  .ForMember(dest => dest.Test5, opt => opt.MapFrom(src => src.Test2));
        });

        var mapper = config.CreateMapper();

        var source = new Source { Test = "SourceTestProperty", Test2 = "SourceTest2Property" };
        var d1 = mapper.Map<DestinationDerived1>(source);
        var d2 = mapper.Map<DestinationDerived2>(source);

        Assert.Equal("SourceTestProperty", d1.Test3);
        Assert.Equal("SourceTest2Property", d1.Test4);

        Assert.Equal("SourceTestProperty", d2.Test3);
        Assert.Equal("SourceTest2Property", d2.Test5); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-06T10:57:04.010

注意！对于那些对派生接口有问题的人。AutoMapper 不支持注册派生接口。只处理类。

要使其工作，您必须将 CreateMap 的类型引用更改为类而不是接口。

例子：

```
interface Interface1 {}
class Class1: Interface1 {}
interface Interface2: Interface1 {}
class Class2: Class1, Interface2 {}

CreateMap<OtherClass, Interface1>().IncludeAllDerived();
CreateMap<OtherClass, Interface2>(); 
```

任何针对 Interface2 的映射将只使用第一个 CreateMap。您必须将第二个标识为

```
CreateMap<OtherClass, Class2>(); 
```

# ios - 从另一个控制器返回后 IOS 方向没有改变

> ID：14705065
> 
> 赞同：0
> 
> 时间：2013-02-05T10:16:40.103
> 
> 标签：ios, uiimage, orientation

我是 IOS 开发的新手，这是我第一个在 iPad 和 iPhone 上处理不同方向的应用程序..

这是场景，我实现了这个函数来处理方向，它对我来说很好。

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

但是当我转到另一个页面并更改方向（例如：横向）然后再次返回到第一页（例如：仍处于横向模式）时，UIImage 的背景不再改变..

我真的很感激任何答案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:21:20.067

*   (NSInteger)supportedInterfaceOrientations { [self performSelector:@selector(setImageFrame)];

    返回 UIInterfaceOrientationMaskAll；}

*   (BOOL)shouldAutorotate { [self performSelector:@selector(setImageFrame)];

    返回是；}

*   (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation { [self performSelector:@selector(setImageFrame)];

    返回是；}

或者如果使用 xib 或设置所有喜欢 lbltitle.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | 则只需检查自动调整掩码 UIViewAutoresizingFlexibleWidth ....

# delphi - 方法指针的 RTTI 信息

> ID：14705071
> 
> 赞同：3
> 
> 时间：2013-02-05T10:16:55.690
> 
> 标签：delphi, delphi-xe2, rtti

是否可以获得有关 a 的 RTTI 信息`TMethod`？

我可以通过

```
Instance := TObject(Method.Data); 
```

所以我可以得到实例的 RTTI 类型，但我怎样才能得到正确的`TRttiMethod`？我想检查使用方法指针传入的方法的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:36:47.780

这种方法在理论上有效，并且有一个很好的改变它会在实践中有效，但是有一些事情可能会阻止你掌握`TRttiMethod`.

*   `TMethod`记录说，`Data: Pointer`不是`TObject`。这意味着可能有其他的东西而不是`TObject`作为`Data`！这是一个严重的问题，因为如果`Data`不是`TObject`，那么尝试从中提取 RTTI 将导致运行时错误。
*   并非所有方法都有 RTTI。默认情况下，私有区域中的方法没有 RTTI，也可以使用`{$RTTI}`停止为公共或已发布成员生成 RTTI。

这两个问题对于我们在 Delphi 中的通常类型的事件实现来说不是问题（在 Object Inspector 中双击事件的名称并填写代码），但是我不认为你是谈论“vanila”实现。没有多少人会用属性来装饰默认事件处理程序！

演示以上所有内容的代码：

```
program Project15;

{$APPTYPE CONSOLE}

uses
  SysUtils, RTTI;

type
  // Closure/Event type
  TEventType = procedure of object;

  // An object that has a method compatible with the declaration above
  TImplementation = class
  private
    procedure PrivateImplementation;
  public
    procedure HasRtti;

    procedure GetPrivateImpEvent(out Ev:TEventType);
  end;

  TRecord = record
    procedure RecordProc;
  end;

  // an object that has a compatible method but provides no RTTI
  {$RTTI EXPLICIT METHODS([])}
  TNoRttiImplementation = class
  public
    procedure NoRttiAvailable;
  end;

procedure TImplementation.GetPrivateImpEvent(out Ev:TEventType);
begin
  Ev := PrivateImplementation;
end;

procedure TImplementation.HasRtti;
begin
  WriteLn('HasRtti');
end;

procedure TNoRttiImplementation.NoRttiAvailable;
begin
  WriteLn('No RTTI Available');
end;

procedure TRecord.RecordProc;
begin
  WriteLn('This is written from TRecord.RecordProc');
end;

procedure TImplementation.PrivateImplementation;
begin
  WriteLn('PrivateImplementation');
end;

procedure TotalyFakeImplementation(Instance:Pointer);
begin
  WriteLn('Totaly fake implementation, TMethod.Data is nil');
end;

procedure SomethingAboutMethod(X: TEventType);
var Ctx: TRttiContext;
    Typ: TRttiType;
    Method: TRttiMethod;
    Found: Boolean;
begin
  WriteLn('Invoke the method to prove it works:');
  X;
  // Try extract information about the event
  Ctx := TRttiContext.Create;
  try
    Typ := Ctx.GetType(TObject(TMethod(X).Data).ClassType);
    Found := False;
    for Method in Typ.GetMethods do
      if Method.CodeAddress = TMethod(X).Code then
      begin
        // Got the Method!
        WriteLn('Found method: ' + Typ.Name + '.' + Method.Name);
        Found := True;
      end;
    if not Found then
      WriteLn('Method not found.');
  finally Ctx.Free;
  end;
end;

var Ev: TEventType;
    R: TRecord;

begin
  try
    try
      WriteLn('First test, using a method that has RTTI available:');
      SomethingAboutMethod(TImplementation.Create.HasRtti);
      WriteLn;

      WriteLn('Second test, using a method that has NO rtti available:');
      SomethingAboutMethod(TNoRttiImplementation.Create.NoRttiAvailable);
      WriteLn;

      WriteLn('Third test, private method, default settings:');
      TImplementation.Create.GetPrivateImpEvent(Ev);
      SomethingAboutMethod(Ev);
      WriteLn;

      WriteLn('Assign event handler using handler from a record');
      try
        SomethingAboutMethod(R.RecordProc);
      except on E:Exception do WriteLn(E.Message);
      end;
      WriteLn;

      WriteLn('Assign event handler using static procedure');
      try
        TMethod(Ev).Data := nil;
        TMethod(Ev).Code := @TotalyFakeImplementation;
        SomethingAboutMethod(Ev);
      except on E:Exception do WriteLn(E.Message);
      end;
      WriteLn;

    except
      on E: Exception do Writeln(E.ClassName, ': ', E.Message);
    end;
  finally ReadLn;
  end;
end. 
```

# javascript - HTML5 地理定位问题

> ID：14705074
> 
> 赞同：1
> 
> 时间：2013-02-05T10:17:08.170
> 
> 标签：javascript, html

我正在为 HTML 5 地理定位编写 Java 脚本，但它似乎不起作用，当我尝试在另一个范围内输出内容时，它显示未定义。下面是代码。

```
<script>
var lat;
var lng;
function getLocation()
  {
  if (navigator.geolocation)
    {
    navigator.geolocation.getCurrentPosition(showPosition);
    }
  else{}
  }
function showPosition(position)
  {
     lat = position.coords.latitude;
     lng = position.coords.longitude;
     document.write(lat); // Doesnt output anything
  }

</script>

    <script type="text/javascript">
          document.write(lat);      // It says undefined
        $(document).ready(function()
        {
             //some scripts here

         }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:27:08.997

只有当 html 页面托管在 Web 服务器上而不是本地主机上时，才会调用成功回调函数。你是在本地测试还是在网络服务器上测试？

# sql - SQL中两个日期之间的确切小时数差异

> ID：14705075
> 
> 赞同：9
> 
> 时间：2013-02-05T10:17:13.223
> 
> 标签：sql, sql-server, sql-server-2008

我想计算两个日期时间变量之间的确切小时差。小时差异应该是这样的：

```
1.5
2
6.25 
```

任何人请帮忙..提前谢谢...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-05T10:23:02.960

您可以使用[`DATEDIFF`](http://msdn.microsoft.com/en-gb/library/ms189794.aspx)以分钟为单位找出差异并将其转换为小时：

```
select datediff(mi, startdate, enddate) 
```

假设 1.5 表示 1 小时 30 分钟，您可以简单地将结果除以 60：

```
select datediff(mi, startdate, enddate) / 60.0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T13:30:02.103

把事情简单化：

```
declare @date1 datetime
declare @date2 datetime

select @date1 = GETDATE();
select @date2 = '2013-02-02 14:05'

select DATEDIFF(hh, @date2, @date1)

Results
-----------
71

(1 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T10:25:18.780

它会帮助你....

```
 Declare @Date1 dateTime
  Declare @Date2 dateTime 
  Set @Date1 = '22:30:00'   
  Set @Date2 = '00:00:00'
  Select Cast((@Date1 - @Date2) as Float) * 24.0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-17T10:21:17.713

要获得 HH:MM 中的精确时差，请在 MS-SQL 中尝试以下代码

```
 Declare @InTime datetime='2017-11-27 10:00:00',
 @OutTime datetime='2017-11-27 11:15:00'

 SELECT CONVERT(varchar(5),DATEADD(minute,DATEDIFF(minute,@InTime,@OutTime),0), 114)
 -----------
 Result
 01:15 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T11:03:06.463

请试试：

```
declare @dt1 datetime, @dt2 datetime, @Seconds int
select @dt1='2013-02-05 14:05:55.113', @dt2 =getdate()
set @Seconds=datediff(second, @dt1, @dt2)

    declare @Hour nvarchar(50)
    declare @Min nvarchar(50)
    declare @MinTemp int        
    if @Seconds >0 
    begin
    set @Hour=cast((@Seconds / 3600) as nvarchar(20)) +' Hrs '
    set @MinTemp= (@Seconds % 3600) / 60
    set @Min=cast(@MinTemp as nvarchar(20))
    if  @MinTemp<10 
        select @Hour+'0'+@Min +' Min'
    else
        select @Hour+@Min +' Min'
    end
    else 
    select '00 Hrs 00 Min' 
```

# php - 无法登录我的哈希密码，但有一个用户可以登录

> ID：14705076
> 
> 赞同：1
> 
> 时间：2013-02-05T10:17:22.320
> 
> 标签：php, mysql, encryption, hash, sha512

晕那里，

我在登录我的注册用户时遇到问题，我已经对密码进行了哈希处理，当我登录我的表单时拒绝，所以我真的不知道是什么问题，因为我直接使用 sql 命令注册的用户实际上可以在下面登录是我的登录脚本...

```
<?php
    include 'db_connect.php';
    include 'functions.php';
    sec_session_start(); // Our custom secure way of starting a php session. 

    if(isset($_POST['email'], $_POST['p'])) { 
        $email = $_POST['email'];
        $password = $_POST['p']; // The hashed password.
        if(login($email, $password, $mysqli) == true) {
            // Login success
            echo 'Success: You have been logged in!';
            echo '<a href="javascript:window.close();">Close window</a>';
        } else {
            // Login failed
            header('Location: ./login.php?error=1');
        }
    } else { 
        // The correct POST variables were not sent to this page.
        echo 'Invalid Request';
    }
?> 
```

下面是我在 Function.php 文件上的登录功能

```
function login($email, $password, $mysqli) {

    if ($stmt = $mysqli->prepare(
        "SELECT id, username, password, salt 
         FROM members 
         WHERE email = ? 
         LIMIT 1"
    )) { 
        $stmt->bind_param('s', $email); 
        $stmt->execute(); // Execute the prepared query.
        $stmt->store_result();
        $stmt->bind_result($user_id, $username, $db_password, $salt); 
        $stmt->fetch();
        $password = hash('sha512', $password.$salt); // hash the password with the unique salt.

        if($stmt->num_rows == 1) {
            if(checkbrute($user_id, $mysqli) == true) { 
                return false;
            } else {
                if($db_password == $password) {
                    $ip_address = $_SERVER['REMOTE_ADDR']; 
                    $user_browser = $_SERVER['HTTP_USER_AGENT']; 

                    $user_id = preg_replace("/[^0-9]+/", "", $user_id); // XSS protection as we might print this value
                    $_SESSION['user_id'] = $user_id; 
                    $username = preg_replace("/[^a-zA-Z0-9_\-]+/", "", $username); 
                    $_SESSION['username'] = $username;
                    $_SESSION['login_string'] = hash('sha512',  $password.$ip_address.$user_browser);
                    // Login successful.
                    return true;    
                } else {

                    $now = time();
                    $mysqli->query(
                        "INSERT INTO login_attempts (user_id, time) 
                         VALUES ('$user_id', '$now')"
                    );
                    return false;
                }
            }
        } else {
            // No user exists. 
            return false;
        }
    }
} 
```

下面是我如何将用户注册到数据库

```
<?php
    include 'db_connect.php';
    include 'functions.php';

    $password = $_POST['p']; 
    $username = $_POST['username']; 
    $email = $_POST['email']; 

    $random_salt = hash('sha512', uniqid(mt_rand(1, mt_getrandmax()), true));

    $password = hash('sha512', $password.$random_salt);

    if ($insert_stmt = $mysqli->prepare(
        "INSERT INTO members (username,email,password,salt) 
         VALUES (?, ?, ?, ?)"
    )) {    
        $insert_stmt->bind_param('ssss', $username, $email, $password, $random_salt); 
        // Execute the prepared query.
        $insert_stmt->execute();
        echo 'Member Succesfully added to the Website list';
    } else {
        echo 'Error couldnt add the user, Try again';
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:21:18.327

我猜你要么以某种方式随机更改了密码，当你注册时---sha512（$password）和登录应该是相同的，以便在查询数据时匹配它---$Salt 有点令人困惑?

```
 Login
    $_POST['password'] = stripslashes($_POST['password']);
    $password = mysql_real_escape_string(sha512($_POST['password']));
    Signup
    $_POST['password'] = stripslashes($_POST['password']);
    $password = mysql_real_escape_string(sha512($_POST['password'])); 
```

# seo - 谷歌如何索引和排名指向同一主机的两个域

> ID：14705077
> 
> 赞同：0
> 
> 时间：2013-02-05T10:17:23.070
> 
> 标签：seo

如果我有两个域`A.com`，并且`B.com`两个主题都指向同一个主机，那么：

```
A.com/page.html 
```

将显示与以下内容完全相同的结果：

```
B.com/page.html 
```

谷歌将如何索引和排名这两个网站？预期的行为是什么？请注意，此处未应用重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:02:07.210

谷歌在索引具有相同主机的网站方面没有问题。如果您的两个网站都有不同的内容和结构，那么 Google 肯定会连续索引您的网页。

但是，当涉及到排名时，它有一个关于您的 IP 地址的问题。共享主机有一个 C 类 IP 地址，它不为每个域提供唯一的 IP 地址。因此，它是共享主机的重要排名因素之一。

# css - 引导响应导航栏和填充到容器流体

> ID：14705080
> 
> 赞同：0
> 
> 时间：2013-02-05T10:17:29.210
> 
> 标签：css, twitter-bootstrap

请参阅以下小提琴：http: [//jsfiddle.net/HXzPj/6/](http://jsfiddle.net/HXzPj/6/)

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" />
    </head>
    <body>
        <div class="navbar" style="position:absolute; top:0; width:100%;">
            <div class="navbar-inner"> <a href="#" class="brand">KB</a>

                <ul class="nav">
                    <li class="active"><a href="#">Home</a>

                    </li>
                    <li><a href="#">Create page</a>

                    </li>
                </ul>
                <ul class="nav pull-right">
                    <li>
                        <p class="navbar-text">user@email.com</p>
                    </li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Upload</a>

                    </li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Manage</a>

                    </li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Password</a>

                    </li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Sign Out</a>

                    </li>
                </ul>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid columns">
                <div class="span2 article-tree">Article-tree</div>
                <div class="span10 content-area">Content-area</div>
            </div>
            <div class="footer">footer</div>
        </div>
    </body>

</html> 
```

和 CSS：

```
 html, body {
    height: 100%;
}
.container-fluid {
    margin: 0 auto;
    height: 100%;
    padding-top: 62px;
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}
.columns {
    background-color: #C9E6FF;
    height: 100%;
}
.content-area, .article-tree {
    background: #bada55;
    height: 100%;
}
.footer {
    background: red;
    height: 20px;
} 
```

当屏幕宽度足够宽以显示导航栏的所有元素时，一切正常。当宽度减小时，导航栏堆叠得很好，但文章树和内容区域保持在它们的固定位置，因此部分隐藏在导航栏后面。

如何获取它以便在堆叠时将内容推到导航栏下方？我必须为此使用`@media`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:57:32.197

通过重新处理整个混乱来解决问题。如果有人对此感兴趣，这里是代码：

HTML

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
    </head>
    <body>
        <div class="navbar">
            <div class="navbar-inner"> <a href="#" class="brand">KB</a>
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">Create page</a></li>
                </ul>
                <ul class="nav pull-right">
                    <li><p class="navbar-text">user@email.com</p></li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Upload</a></li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Manage</a></li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Password</a></li>
                    <li class="divider-vertical"></li>
                    <li><a href="#">Sign Out</a></li>
                </ul>
            </div>
        </div>

        <div class="container-fluid container-height">
            <div class="row-fluid full-height">
                <div class="span2 article-tree">Article-tree</div>
                <div class="span10 content-area full-height"><div id='paragraphs' data-lorem='5'></div></div>
            </div>

        </div>
        <div class="container-fluid footer">
            <div class="footer">footer</div>        
        </div>
    </body>

</html> 
```

CSS

```
html, body {
    height: 100%;
}
.full-height {
    height: 100%;
}
.content-area {
    background: green;
    color: white;
}

.article-tree {
    background: blue;
    color: white;
}
.footer {
    background: red;
}

.container-height {
    margin: 0 auto;
    min-height: 88%;
    height: auto;    
} 
```

见 jsfiddle：http: [//jsfiddle.net/pCut6/](http://jsfiddle.net/pCut6/)

它可以通过更具响应性的设计等做得更好，但这应该给某人一个想法，如果他们像我一样被卡住并且需要一个例子。

# android - Android-Reflection：在运行时拦截 TelephonyManager.getDeviceId 函数

> ID：14705081
> 
> 赞同：0
> 
> 时间：2013-02-05T10:17:31.167
> 
> 标签：android, reflection

我购买的库中的一些功能`getDeviceId()`需要`READ_PHONE_STATE`许可。大多数用户不希望他们的电话号码被读取，所以我不想请求这个权限。

所以我需要`android.telephony.TelephonyManager.getDeviceId()`在运行时用我自己的函数进行拦截。我想它可能使用反射，但我找不到任何优雅的解决方案。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:24:25.000

```
 String deviceId = Secure.getString(this.getContentResolver(),Secure.ANDROID_ID); 
```

# regular-language - 为常规语言抽取引理

> ID：14705091
> 
> 赞同：6
> 
> 时间：2013-02-05T10:18:06.120
> 
> 标签：regular-language, dfa, computation-theory, pumping-lemma

在检查给定语言是否使用抽引引理时，我有点困惑。

假设我们必须检查是否：

> **L.** 是否接受偶数个`0`正则的语言？

我们知道它是有规律的，因为我们可以为 L 构造一个 DFA。但我想用泵引理来证明这一点。

现在假设，我接受一个 String `w= "0000"`：

现在将字符串划分为`x = 0`、`y = 0`和`z = 00`。现在在为 应用抽引理时`i = 2`，我将得到字符串`"00000"`，它在我的语言中*不*存在，因此通过抽引引理证明该语言不规则。但它被 DFA 接受了吗？

任何帮助将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T13:27:35.140

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-11T18:22:19.287

Although the accepted answer is complete in its own way, I had to add a few things. I have a very playful way to exploit the pumping lemma to be able to prove that a given language is not a Regular language. Just to have a context to talk about, let me state the lemma:

**Pumping Lemma for Regular Languages:**

> For any regular language L, there exists an integer k.
> 
> Such that for all x ∈ L with |x| ≥ k, there exists u, v, w ∈ Σ∗, such that x = uvw, and
> 
> (1) |uv| ≤ k
> 
> (2) |v| ≥ 1
> 
> (3) for all i ≥ 0: u(v^i)w ∈ L

The k is called the `Pumping lemma constant`. Let me come straight to the point and show you how to go about proving a language L is not regular.

Now to start the game you need two players here. One is the Reader(`R`) and the other is the Adversary(`A`).

Input: A language L

The Goal of `R`: Somehow prove the language L is not regular by some contradiction.

The Goal of `A`: Somehow be prepared enough to face the arguments of `R` and do not let him/her create a contradiction.

Now let us start the argument.

`A`: The language L is not Irregular because none could show the contradiction using pumping lemma with a certain pumping constant k. (Each language is mapped to only one integer k)

`R`: Let me assume what you say. If language L is regular then it must satisfy the conditions of the pumping lemma. So, let me choose a suitable string x ∈ L (|x| >= k), such that it helps me create a contradiction later.

`A`: Challenged by the `R`, `A` tries its best to find at least one suitable partitioning u, v and w of the string x, such that

```
x = uvw  and |uv| <= k and |v| > 0 
```

`R`: With any possible partition given by `A`, wins the the argument if able to show an integer i >= 0 such that

```
u(v^i)w ∉ L 
```

Because now the `R` has shown that the Language L has at least one string x which doesn't have any partition(u, v, w) such that it satisfies the pumping lemma. The contradiction happened because our assumption that L is regular is `FALSE`. Therefore the language L is proven to be not regular.

If the `R` is not able to show the above, this is not a Proof of the language being Regular. It just means that L can be a Regular or Irregular language which just happens to satisfy the pumping lemma conditions.

Always remember, the pumping lemma is `if`(`L` is regular), `then` Statements. The vice-versa is not necessarily `TRUE`. Although it might be `TRUE` in some cases.

Therefore the pumping lemma is useful only if you want to prove that a language is not regular.

(Source: [Theory of Computation(NPTEL): Prof. Somenath Biswas(IIT Kanpur)](https://www.youtube.com/watch?v=al4AK6ruRek&list=PLbMVogVj5nJSd25WnSU144ZyGmsqjuKr3)

# java - ArrayList 的 Java 转换

> ID：14705098
> 
> 赞同：0
> 
> 时间：2013-02-05T10:18:18.703
> 
> 标签：java, casting, arraylist

很抱歉，我对 Java 不是很有经验。我正在使用 Eclipse 作为 IDE。Eclispe 抱怨我无法理解的未经检查的演员表。请参考代码片段。一般如何做到这一点？

```
public Liberty2Server(ArrayList<Map<String,String>> libertySourceFiles , String basePath) throws FileNotFoundException , IllegalArgumentException {
    // check input file path
    for( Object map : libertySourceFiles) {
        Map<String,String> mp = (Map<String,String>) map ;  // <==Eclipse complains here: Unchecked cast from Object to Map<String,String> 
```

欢迎任何提示

罗尔夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:19:36.290

您可以更改 for 循环并使用集合中的显式类型：

```
for(Map<String,String> map : libertySourceFiles) {
    Map<String,String> mp = map; //probably not needed any more
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:20:59.647

这意味着您正在执行编译器无法检查是否安全的强制转换。

它警告您必须检查它是否安全。

更好的解决方案是通过使用消除对演员表的需要

```
for(Map<String, String> mp : libertySourceFiles) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:21:34.433

Eclipse 抱怨，因为你想将`Object`一个`Map<String, String>`. 将运行变量的类型更改`map`为`Map<String, String>`，一切都会好起来的。那时你甚至不需要这个变量`mp`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:22:10.403

这里的问题是您向上转换`ArrayList<Map<String,String>>`元素 do`Object`然后将其向下转换为泛型类型。解决方案很简单：

```
public Liberty2Server(ArrayList<Map<String,String>> libertySourceFiles , String basePath) throws FileNotFoundException , IllegalArgumentException {
    // check input file path
    for(  Map<String,String> mp : libertySourceFiles) {
      //  Map<String,String> mp = (Map<String,String>) map ; Not needed anymore
      .... 
```

# neo4j - 如何将正则表达式应用于 Neo4j 中的字符串数组？

> ID：14705101
> 
> 赞同：2
> 
> 时间：2013-02-05T10:18:29.797
> 
> 标签：neo4j, cypher

我正在使用以下类映射为 Neo4j 节点：

```
public class Item
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string[] Synonyms { get; set; }
} 
```

这个想法是数据库搜索应该匹配**Name**属性，或者**Synonyms**数组中的任何项目：

以下搜索执行**区分大小写的**匹配（为简洁起见已剪辑）：

```
START (...) WHERE item.Name = "searchTerm") OR ("searchTerm" IN item.Synonyms!) RETURN item; 
```

我正在尝试执行**不区分大小写的**匹配，但仅此而已：

```
START (...) WHERE item.Name =~ '(?i)searchTerm') OR ("searchTerm" IN item.Synonyms!) RETURN item; 
```

**是否可以对Synonyms**字符串数组执行不区分大小写的匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:11:30.757

我求助于这个，这似乎可以解决问题：

```
WHERE item.Name =~ '(?i)searchTerm') OR (ANY(s IN item.Synonyms! WHERE s =~ '(?i)searchTerm') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:13:28.017

您可以使用以下`str()`功能：

```
WHERE str(item.Synonyms) =~ '(?).*whatever.*' 
```

# wpf - 访问 DataTemplate 中的文本框

> ID：14705102
> 
> 赞同：0
> 
> 时间：2013-02-05T10:18:30.380
> 
> 标签：wpf, data-binding

我知道与此类似的问题在 SO 中已多次提出。但他们都没有解决我的问题，并且在理解这些答案时遇到了一些困难。这是我的情况；我有一个`ItemsControl`我已经使用`ItemTemplate`并绑定了一些数据。

```
<Window.Resources>        
    <DataTemplate x:Key="AdditionalFieldTemlate">
        <Grid>
            <TextBlock Text="{Binding InfoName}"/>
            <TextBox Text="{Binding InfoValue,Mode=TwoWay}" Name="CustomValue"/>
        </Grid>
    </DataTemplate>
</Window.Resources>
<Grid>
    <ItemsControl ItemsSource="{Binding AdditionalInformation}" x:Name="additionalInfo" ItemTemplate="{DynamicResource AdditionalFieldTemlate}"/>
</Grid> 
```

`TextBox`单击`Button`. _ 不知道如何访问这些文本框。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:26:29.453

您通常不会访问 TextBoxes（外观）......您访问的是绑定的数据。

因此，您可以按如下方式更改集合中的“数据”：

```
foreach (var item in AdditionalInformation)
{
    item.InfoValue = "";
} 
```

然后将清空“文本框”。

确保您已在 ....`INotifyPropertyChanged`使用的类上实现，`AdditionalInformation`以便在`InfoValue`更改属性时会引发通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:36:55.823

文本框中的文本数据绑定到类的 InfoValue 属性。像这样实现类和属性：

```
class InfoClass: INotifyPropertyChanged
{
    private string _infoValue;

    ...

    public string InfoValue
    {
        get { return _infoValue; }
        set
        {
            _infoValue = value;
            OnNotifyPropertyChanged("InfoValue")
        }
    }

    ...

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

然后按照 colinsmith 在您的按钮单击处理程序（或命令，如果您使用 MVVM 方法）中的建议进行操作。绑定将被通知更改并且视图将被更新。

# xml - MsXMl selectNodes 返回多余的节点

> ID：14705109
> 
> 赞同：1
> 
> 时间：2013-02-05T10:19:02.673
> 
> 标签：xml, excel, vba, msxml, selectnodes

我有我正在编写的这个 VBA 脚本来自动化自动化结果的表格。我试图解析的节点示例如下：

```
> <test id="41">
>           <name>7.1.1.4_BandI_PS</name>
>           <ttcnTestCaseName>7.1.1.4</ttcnTestCaseName>
>           <numberOfIterations>1</numberOfIterations>
>           <failureAction selected="Continue"/>
>           <runMode>Normal</runMode>
>           <testPicsPixitDeviation>
>             <picsPixitDeviationTag>BandI</picsPixitDeviationTag>
>             <picsPixitDeviationTag>PS</picsPixitDeviationTag>
>             <picsPixitDeviationTag>NonCipher</picsPixitDeviationTag>
>         </testPicsPixitDeviation>
>           <comment/>
>           <result iterationIndex="0" repeatIndex="0">
>             <status>
>               <status>Passed</status>
>             </status>
>             <resultLocation>C:\result_arch\MAC_D12wk47_v10-tc_7_1_1_4_2013-01-07_15.18.27</resultLocation>
>             <startTime>2013-01-07_15.18.26</startTime>
>             <executionDuration>120</executionDuration>
>             <ptsIpAddress>127.0.0.1</ptsIpAddress>
>           </result>
>         </test>
>         <test id="42">
>           <name>7.1.1.8_BandI_CS</name>
>           <ttcnTestCaseName>7.1.1.8</ttcnTestCaseName>
>           <numberOfIterations>1</numberOfIterations>
>           <failureAction selected="Continue"/>
>           <runMode>Normal</runMode>
>           <testPicsPixitDeviation>
>             <picsPixitDeviationTag>BandI</picsPixitDeviationTag>
>             <picsPixitDeviationTag>CS</picsPixitDeviationTag>
>             <picsPixitDeviationTag>NonCipher</picsPixitDeviationTag>
>         </testPicsPixitDeviation>
>           <comment/>
>           <result iterationIndex="0" repeatIndex="0">
>             <status>
>               <status>Passed</status>
>             </status>
>             <resultLocation>C:\result_arch\MAC_D12wk47_v10-tc_7_1_1_8_2013-01-07_15.20.27</resultLocation>
>             <startTime>2013-01-07_15.20.27</startTime>
>             <executionDuration>104</executionDuration>
>             <ptsIpAddress>127.0.0.1</ptsIpAddress>
>           </result>
>         </test> 
```

从上面可以看出，一个测试节点可以有尽可能多的结果，具体取决于迭代次数。我使用 selectNodes 方法来解析文件中的所有节点，这会恢复正确数量的元素。对于我返回的列表中的每个测试用例，我会解析以查看有多少，并在每个节点的嵌套列表中返回。问题不是返回嵌套在 each 中，而是返回文本文件中不应该返回的所有内容。我的代码如下。

```
Dim testCase As MSXML2.IXMLDOMNode
For Each testCase In testCaseNamesList
    Dim passed, failed, error, totalRunTime, iterationCount As Integer
    Dim passPcnt, failPcnt, errorPcnt, averageRunTime As Double
    Dim testCaseName As String
    Dim testCaseResultList As MSXML2.IXMLDOMNodeList

    Set testCaseResultList = testCase.SelectNodes("//result")
    MsgBox (testCaseResultList.Length)

    testCaseName = testCase.FirstChild.Text
    iterationCount = CInt(testCase.SelectSingleNode("//numberOfIterations").Text)

    Dim testCaseResult As MSXML2.IXMLDOMNode
    For Each testCaseResult In testCaseResultList 
```

一切正常，但变量 testCaseResultList 应该返回包含在每个节点中的列表，而是从其他节点返回。我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:22:49.610

尝试要么`.//result`返回上下文节点（`testCase`指向的节点）的所有“结果”后代，要么返回上下文节点的`result`所有“结果”子节点（但不会返回孙子、曾孙等）

使用`//result`返回文档根的所有“结果”后代，这将返回文档中的每个“结果”节点

类似地`//numberOfIterations`（返回文档根的所有“numberOfIterations”后代）应该替换为或者替换`.//numberOfIterations`为`numberOfIterations`

有关详细信息，请参阅[http://www.w3.org/TR/xpath/#path-abbrev](http://www.w3.org/TR/xpath/#path-abbrev)上的缩写语法指南

# python - 在 Python 中：在多行文件中从给定点替换到行尾

> ID：14705110
> 
> 赞同：0
> 
> 时间：2013-02-05T10:19:02.600
> 
> 标签：python, replace, eol

Python 中的新功能（几乎在编程中）。

我有一个包含一些行的文件，例如

```
...
dr=%%dr
mkl=%%mkl
... 
```

例如，我想用零替换 %%dr 和 %%mkl

```
...
dr=0
mkl=0
... 
```

但是我事先不知道我会有哪些名字（无论是 dr、mkl 还是其他一些奇怪的名字），所以我想编写一个找到任何“%%”的代码并将其替换为该行的其余部分带 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:23:48.567

我相信您正在使用正则表达式寻找与此类似的东西。

请注意，在 regex`"%%.*$"`中，匹配从`%%`行尾到行尾的所有内容。根据您的要求，如本例所示，您的模式的多个实例将不会被视为第一个模式将被替换，直到 eol。

```
>>> st="""new in Python (and almost in programming).

I have a file with some lines, for example

...

dr=%%dr

mkl=%%mkl

...

I want to replace the %%dr and %%mkl with zeroes in order to have, for example

..."""
>>> lines = (re.sub("%%.*$","0",line) for line in st.splitlines())
>>> print '\n'.join(lines)
new in Python (and almost in programming).

I have a file with some lines, for example

...

dr=0

mkl=0

...

I want to replace the 0

...
>>> 
```

# jquery - 在 jQuery 中创建自定义动画函数

> ID：14705111
> 
> 赞同：0
> 
> 时间：2013-02-05T10:19:06.033
> 
> 标签：jquery, animation

我想创建一个轻量级的动画函数来帮助阻止我到处重复代码。代码只是一个`animation({})`带有特定参数的调用，所以编写一个插件似乎有点矫枉过正，所以我怎样才能创建一个自定义的 jQuery 函数，这样我就可以像调用它一样调用它`.slideUp`，而不必编写一个完整的插件来做到这一点？

这就是我的动画所做的

```
$("#id").css({opacity:0,"margin-top":"10px"})
    .animate({opacity:1,"margin-top":"0px"},'slow'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:22:06.953

你的意思是这样吗？

```
 $.fn.slide = function(){
    $(this).css({opacity:0,"margin-top":"10px"}).animate({opacity:1,"margin-top":"0px"},'slow');
}

   $('#id').slide() 
```

# sql - WP_Query() 和订购项目

> ID：14705118
> 
> 赞同：1
> 
> 时间：2013-02-05T10:19:24.037
> 
> 标签：sql, database, wordpress

我必须通过他们的 menu_order（仅限页面）从 wp_post 订购项目。我写了这一行：

```
$query = new WP_Query();
$all = $query -> query(array('post_type' => 'page', 'posts_per_page' => -1, 'orderby' => 'menu_order', 'order' => 'DESC'));
$children = get_page_children($id, $all);
foreach ($children as $child) {
 if ($child -> ID == get_the_id()) {
      echo '<li class="active"><a href="' . get_permalink($child -> ID) . '">' . $id . $child -> post_title . '</a></li>'; 
```

我看到了这些物品，但它们没有被订购。

谢谢。自由区

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:29:25.860

我想说这个问题与您在循环使用对象之前传递`$all`对象的事实有关。`get_page_children`

您为什么不忘记 get_page_children 并将“post_parent”添加到您的 WP_Query 参数列表中？

```
$all = $query->query(array('post_type' => 'page', 'post_parent' => $id, 'posts_per_page' => -1, 'orderby' => 'menu_order', 'order' => 'DESC')) 
```

Wordpress Stack Exchange 上的一个有用线程；

[https://wordpress.stackexchange.com/questions/35123/wp-get-all-the-sub-pages-of-the-parent-using-wp-query](https://wordpress.stackexchange.com/questions/35123/wp-get-all-the-sub-pages-of-the-parent-using-wp-query)

**编辑。**

扩展评论。有时对 menu_order 有混淆——它与 wp_nav_menus 无关，而是与 Page Attributes Order 输入框有关，如下所示；

![在此处输入图像描述](../Images/c2ce14c0664adc3d279150f8f7dd57c8.png)

# xpages - CLFAD0111W 这是什么意思？

> ID：14705119
> 
> 赞同：2
> 
> 时间：2013-02-05T10:19:33.400
> 
> 标签：xpages

今天在使用 XPage 时，我在日志中收到了这个错误。

CLFAD0111W: PropertyMap 处于无效状态。在 saveState 阶段之前，evaluateValueBindings 已启用但未禁用。

有谁知道是什么意思？

这是来自日志

```
<CommonBaseEvent creationTime="2013-02-05T14:22:52.738+01:00" globalInstanceId="ELc0a85e0a00013ca95661f6000000ca" msg="CLFAD0111W: The PropertyMap was in an invalid state. evaluateValueBindings was enabled but not disabled before the saveState phase." severity="30" version="1.0.1">
<extendedDataElements name="CommonBaseEventLogRecord:level" type="noValue">
    <children name="CommonBaseEventLogRecord:name" type="string"> 
        <values>VARNING</values>
    </children>
</extendedDataElements>
<extendedDataElements name="CommonBaseEventLogRecord:sourceClassName" type="string">
    <values>com.ibm.xsp.binding.PropertyMap</values>
</extendedDataElements>
<extendedDataElements name="CommonBaseEventLogRecord:sourceMethodName" type="string">
    <values>saveRoot</values>
</extendedDataElements>
<sourceComponentId component="Expeditor 6.2" componentIdType="ProductName" instanceId="" location="qner" locationType="Hostname" subComponent="" threadId="18" componentType="http://www.w3.org/2001/XMLSchema-instance"/>
<situation categoryName="ReportSituation">
    <situationType xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ReportSituation" reasoningScope="INTERNAL" reportCategory="LOG"/>
</situation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:39:20.327

该错误是指 UI 序列化程序 API 的 saveRoot 期间出现问题。

您将需要生成 HTTP 线程日志并将它们与错误发生的时间相匹配，以查看导致问题的 XPage。

这是有关如何执行此操作的相关技术说明。

[http://www-01.ibm.com/support/docview.wss?uid=swg27003598](http://www-01.ibm.com/support/docview.wss?uid=swg27003598)

我还建议设置 DEBUG_THREADID=1 以便您可以在控制台日志中映射线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:12:53.083

谢谢大家的帮助。

经过大量的故障排除后，我找到了错误的原因。

一个错误的函数，应该为旧的 Domino 表单重新加载 JS 客户端并在 XPages 上刷新面板。但在这种情况下，这两个地方都执行了，这导致了问题。

# ruby-on-rails - 使用 Ember.js & Ember-data & Rails 创建记录并处理记录列表

> ID：14705124
> 
> 赞同：18
> 
> 时间：2013-02-05T10:19:47.927
> 
> 标签：ruby-on-rails, ember.js, ember-data

我正在构建一个具有如下布局的应用程序。

![预览](../Images/54377a4ec30943849a9386c73afb8223.png)

我想创建一个新帖子，所以我按下了“新帖子按钮”，它把我带到了“帖子/新”路线。

我的 PostsNewRoute 如下所示（我按照[这里](https://darthdeus.github.io/blog/2013/02/02/using-transactions-in-ember-data/)描述的方法）

```
 App.PostsNewRoute = Ember.Route.extend({
     model: function() {

           // create a separate transaction, 

           var transaction = this.get('store').transaction();

           // create a record using that transaction

           var post = transaction.createRecord(App.Post, {
                title: 'default placeholder title',
                body: 'default placeholder body'
           });

          return post;
     } 
 }); 
```

它会立即创建一条新记录，更新帖子列表，并显示新帖子的表单。

[![预览](../Images/9824576f35b52b889d8eec2b58ebde2e.png)](https://i.stack.imgur.com/hVQY9.png)
[(来源: [sununderground.kr](http://sunshineunderground.kr/problem-02.png) )]

**现在我有两个问题。**

**一是帖子列表的顺序。**

我预计新帖子会在列表的顶部，但它在列表的底部。

我使用 rails 作为后端，并将 Post 模型顺序设置为

```
 default_scope order('created_at DESC') 
```

所以旧帖子位于现有帖子的下方。但新创建的不是。（尚未提交到后端）

**另一个是当我单击列表中的已创建帖子时**

我可以在帖子列表中单击我新创建的帖子。它把我带到了一个带有 URL 的帖子页面

```
 /posts/null 
```

这是我必须防止的非常奇怪的行为。

我认为会有两种解决方案。

1.  当我单击“新帖子按钮”创建记录并立即提交到服务器时，当服务器成功保存我的新记录时，刷新帖子列表并进入新创建帖子的编辑模式。

2.  或最初将 Route 的模型设置为 null 并在我单击 PostsNewView 中的“提交”按钮时创建一条记录。

3.  或 show 仅显示属性为

    ```
     'isNew' = false, 'isDirty' = false, 
    ```

在列表中..

但可悲的是，我不知道从哪里开始……

对于解决方案 1，我完全迷路了。

对于解决方案 2，我不知道如何将输入表单中的数据与尚不存在的模型绑定。

对于解决方案 3，我完全迷路了。

请帮我！这将是 ember 的预期方式？

（我听说 Ember 打算为每个开发人员使用相同的解决方案）

**更新**

现在我正在使用解决方案 3，但仍然有订购问题。这是我的帖子模板代码。

```
 <div class="tools">
        {{#linkTo posts.new }}new post button{{/linkTo}}
    </div>
    <ul class="post-list">
        {{#each post in filteredContent}}
        <li>
            {{#linkTo post post }}
                <h3>{{ post.title }}</h3>
                <p class="date">2013/01/13</p>
                <div class="arrow"></div>
            {{/linkTo}}
        </li>
        {{/each}}
    </ul>
    {{outlet}} 
```

**更新**

我通过过滤“arrangedContent”而不是“content”解决了这个问题

```
 App.PostsController = Ember.ArrayController.extend({
   sortProperties: ['id'],
   sortAscending: false,
   filteredContent: (function() {

     var content = this.get('arrangedContent');

     return content.filter(function(item, index) {
       return !(item.get('isDirty'));
     });
   }).property('content.@each')

 }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T11:05:48.090

我们在应用程序的几个地方使用了解决方案 3 的变体。恕我直言，它是 3 中最干净的，因为您不必担心服务器端的设置/拆卸这是我们实现它的方式：

```
App.PostsController = Ember.ArrayController.extend({
  sortProperties: ['id'],
  sortAscending: true,
  filteredContent: (function() {
    return this.get('content').filter(function(item, index) {
      return !(item.get('isDirty'));
    });
  }).property('content.@each')
}); 
```

然后在您的帖子模板中，您循环通过 controller.filteredContent 而不是 controller.content。

对于解决方案 1，有多种可能性。您可以定义以下事件：

```
 createPost: function() {
    var post,
      _this = this;
    post = App.Post.createRecord({});
    post.one('didCreate', function() {
      return Ember.run.next(_this, function() {
        return this.transitionTo("posts.edit", post);
      });
    });
    return post.get("store").commit();
  } 
```

它创建帖子，然后设置一个承诺，一旦“didCreate”在帖子上触发，该承诺将被执行。这个promise只有在它从服务器返回后才会转换到post的路由，所以它会有正确的ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T16:44:49.240

确实，写的很好。谢谢。

您`filteredContent`不必使用`isNew`状态 io `isDirty`，否则正在编辑的**帖子**将不可见。在任何一种情况下，该`filteredContent`属性都不适用于我的情况。我还注意到，由于我使用图像作为每个元素的一部分，因此所有图像都会在`filteredContent`更改时刷新。这意味着我看到了对每张图片的请求。

我使用稍微不同的方法。我遍历内容并决定是否在模板中显示**帖子：**

```
# posts.handlebars
<ul class='posts'>
  {{#each controller}}
    {{#unless isNew}}
      <li>
        <h3>{{#linkTo post this}}{{title}}{{/linkTo}}</h3>
        <img {{bindAttr src="imageUrl"}}/>
        <a {{action deletePost}} class="delete-post tiny button">Delete</a>
      </li>
    {{/unless}}
  {{/each}}
</ul> 
```

这只会在保存*后显示***Post**对象。H3-tag 中的 url 还包含新创建的对象 io *posts/null*的 id 。

 **我在您的问题中注意到的另一件事：您可以在模型本身上使用 defaultValues 属性，而不是将默认值传递给 createRecord：

所以，而不是：

```
# App.PostsNewRoute
var post = transaction.createRecord(App.Post, {
            title: 'default placeholder title',
            body: 'default placeholder body'
       }); 
```

你可以这样做：

```
# App.Post
App.Post = DS.Model.extend({
  title: DS.attr('string', {
    defaultValue: "default placeholder title"
  }),
  body: DS.attr('string', {
    defaultValue: "default placeholder body"
  })
});

# App.PostsNewRoute
var post = transaction.createRecord(App.Post); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:24:22.540

我实际上写了一个函数来反转内容数组：

[http://andymatthews.net/read/2012/03/20/Reversing-the-output-of-an-Ember.js-content-array](http://andymatthews.net/read/2012/03/20/Reversing-the-output-of-an-Ember.js-content-array)

那是一篇相当老的文章，差不多一年了，所以它可能无法按原样工作，但框架就在那里......

你可以在我写的这个迷你应用程序中看到它的实际效果：

[http://andymatthews.net/code/emberTweets/](http://andymatthews.net/code/emberTweets/)

在顶部的输入字段中搜索用户，并观察左侧按从最新到最旧（而不是最旧到最新）的顺序显示。**

# c# - 如何在c#.net中动态创建的按钮上执行点击事件

> ID：14705126
> 
> 赞同：3
> 
> 时间：2013-02-05T10:19:49.210
> 
> 标签：c#, winforms, button

我正在尝试构建一个应用程序，用户可以在其中选择类别并根据它显示其子类别，这些子类别是按钮，它们是动态创建的。

现在，由于按钮是动态创建的，所以我很困惑如何在 button_click 事件下编写代码，因为我不知道有多少子类别。

那么有什么方法可以执行特定按钮的单击事件，以便执行某些命令？

**已编辑**

这是我尝试过的代码

```
Button btnDynamicButton = new Button();

private void btnclick_Click(object sender, EventArgs e)
{
label2.Text = btnDynamicButton.Text;
}
private void btnappetizer_Click(object sender, EventArgs e)
{
 groupBox2.Visible =false;
 DataTable dt = new DataTable();
 dt = itemmasterbl.SelectallrecordFromtblItem(btnappetizer.Text);
 for (int i = 0; i < dt.Rows.Count; i++)
 {
  string name = "Appetizer" + DynamicButtonCount;
  Button btnDynamicButton1 = new Button();
  btnDynamicButton1.Name = name;
  btnDynamicButton1.Text = name;
  btnDynamicButton1.Size =
  new System.Drawing.Size(150, 30);
  btnDynamicButton1.Location =
  new System.Drawing.Point(180, DynamicButtonCount * 30);
  btnDynamicButton1.Click +=new EventHandler(btnclick_Click);<br>
  Controls.Add(btnDynamicButton1);
  DynamicButtonCount++;
  btnDynamicButton = btnDynamicButton1;
  }
 } 
```

一旦我这样做了，它会根据开胃菜下 itemmaster DB 中的值的数量创建三个按钮，但是一旦我点击三个按钮中的任何一个，标签只会显示最后一个按钮文本，因为在最后一行我有：

> btnDynamicButton = btnDynamicButton1;

哪个将持续按钮信息，但我想要按下哪个按钮，标签应该显示相应的文本。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:35:04.293

您可以将所有逻辑放入一个处理程序中：

```
System.Windows.Forms.Button b = new System.Windows.Forms.Button();
b.Click += new EventHandler(b_Click);
//finally insert the button where it needs to be inserted.
...

void b_Click(object sender, EventArgs e)
{
    MessageBox.Show(((System.Windows.Forms.Button)sender).Name + " clicked");
} 
```

对您的编辑：

您将按钮的引用存储在 Field`btnDynamicButton`中。因此，它总是被您创建的最新按钮覆盖。您不应*使用*字段来引用按钮。click-handler的`sender`参数包含被点击的按钮元素。看上面的代码：简单的`sender`转换到`Button`你就知道点击了哪个按钮：

```
private void btnclick_Click(object sender, EventArgs e)
{
   Button btn = (Button)sender
   label2.Text = btn.Text;
} 
```

# video - 自动将两个（或更多）视频放在一起的技术/方法

> ID：14705128
> 
> 赞同：-2
> 
> 时间：2013-02-05T10:20:00.863
> 
> 标签：video, editing

我正在做一个项目，我们希望能够获取多个视频源，记录它们并从中制作一个视频。

您知道可以处理此任务的任何图书馆甚至在线服务吗？在项目的这种状态下，编写库的语言无关紧要。

需要明确的是：视频获取部分不是问题。它只是将录制的视频放在一起。

谢谢大家，乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:37:59.130

一个合适的解决方案是集成视频解码/编码库，如[ffmpeg](http://www.ffmpeg.org/)或[libav](http://libav.org/) 但它们是用 c 编写的，不容易处理。

或者，您可以远程控制一些视频编辑程序，如后效或开源替代方案，生成项目/脚本文件并让它们通过命令行调用完成工作。

第三个想法是简单地生成仅引用源视频的苹果容器 MOV。那将是最简单的解决方案，但那些容器 MOV 不会到处运行。

# iphone - 如何在不使用 ios 中的 GPS 的情况下使用 wifi 或蜂窝获取当前位置信息

> ID：14705130
> 
> 赞同：2
> 
> 时间：2013-02-05T10:20:04.140
> 
> 标签：iphone, ios, objective-c, cocoa-touch, ios5

目前我在一个项目中工作，它的要求是使用wifi网络或蜂窝网络在不使用gps的情况下每200m间隔获取当前位置信息，特别是纬度和经度值，因为它会消耗更多的电池寿命。

这在 ios 最新版本中是否可行。

如果哪位有什么想法，请分享给我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:29:48.720

看看`CLLocationManager`，那将能够告诉您用户所在的位置。

。H

```
#import <CoreLocation/CoreLocation.h>
@property(nonatomic,retain) CLLocationManager *locationManager; 
```

.m

```
- (void)viewDidLoad
{
        locationManager = [[CLLocationManager alloc] init];
        locationManager.delegate = self;

        //let the user know the purpose
        locationManager.purpose = @"Enable location services";
        locationManager.distanceFilter = kCLDistanceFilterNone;
        locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
        NSLog(@"User latitude: %f",locationManager.location.coordinate.latitude);
        NSLog(@"User longitude: %f",locationManager.location.coordinate.longitude);

        [locationManager startUpdatingLocation];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:31:49.623

获取每 200m 位置信息的唯一方法是 CLLocationManager 的 startUpdatingLocation。但它消耗大量电池。

但是，当位置发生变化时，有一些不同的方法可以获取您的位置。

CLLocationManager 的 startMonitoringSignificantLocationChanges。

这是一个[链接](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:26:44.013

**位置管理器协议参考**

[https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)

1.在Appdelegate中

```
#import <CoreLocation/CoreLocation.h> 
```

在@interface 文件中

```
CLLocationManager *locationManager;
@property (nonatomic, retain) CLLocationManager *locationManager; 
```

并添加协议**CLLocationManagerDelegate**协议。

2.在.m中实现这些功能。

```
@synthesize locationManager;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{   
    self.locationManager = [[[CLLocationManager alloc] init] autorelease];  
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.locationManager.distanceFilter = 1.0;
    [self.locationManager startUpdatingLocation];
}
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
{
  // Show an alert or otherwise notify the user
}
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
{
}
- (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(CLRegion *)region withError:(NSError *)error
{
} 
```

**注意**：如果要调试首先在模拟器中设置当前位置在**调试--->位置--->自定义位置。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:17:23.670

您必须`startMonitoringSignificantLocationChanges`使用仅使用 wifi 或蜂窝网络的核心定位方法！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:53:54.760

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

[locationManager stopUpdatingLocation];
[locationManager stopMonitoringSignificantLocationChanges];    
[self performSelector:@selector(stopUpadateLocation)];

CLLocation *location = [locationManager location];
CLLocationCoordinate2D coord;
coord=[location coordinate];
NSLog(@"coord %f %f", coord.latitude, coord.longitude);
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%f,%f&output=json", newLocation.coordinate.latitude, newLocation.coordinate.longitude];

NSURL *url = [NSURL URLWithString:urlString];
NSString *locationString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

NSDictionary *dic=[locationString JSONValue];
NSLog(@"locationString:%@",locationString );
[strAddr setString:[AppUtility removeNull:[NSString stringWithFormat:@"%@",[[[dic valueForKey:@"Placemark"] objectAtIndex:0] valueForKey:@"address"]]]];
[txtNear setText:strAddr]; 
```

}

```
- (void)startUpdateLocation{
[locationManager startUpdatingLocation]; 
```

}

```
- (void)stopUpadateLocation{
[locationManager stopUpdatingLocation];
[locationManager stopMonitoringSignificantLocationChanges]; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T10:35:27.583

> 它的要求是在不使用gps的情况下，使用wifi网络或蜂窝网络以每200m间隔获取当前位置信息，特别是纬度和经度值，因为它会消耗更多的电池寿命

的文档[`CLLocationManager`](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/cl/CLLocationManager)有关于距离和 GPS 硬件的说明：

> ... 将位置事件的所需精度设置为一公里，使位置管理器能够灵活地关闭 GPS 硬件并仅依赖 WiFi 或蜂窝无线电。

对于不到 200 米的距离，您可能需要在这里推出自己的解决方案。

# jquery - 输入 keyCode 返回 13 和未定义

> ID：14705137
> 
> 赞同：0
> 
> 时间：2013-02-05T10:20:37.893
> 
> 标签：jquery

我有这个代码

```
(function() {
    $('.chkBtn').click(function() {
        check();            
    });

    $(".chkTxt").bind("keyup change", function(e) {
        var keyCode = (window.event) ? e.which : e.keyCode;
        console.log(keyCode);
        if (keyCode == 13) {
            check();
        }
    });
})(); 
```

如果您键入“enter”并按 enter 进入输入，控制台会显示下一个 keyCodes：

```
108 
69 
78 
84 
69 
82 
undefined 
13 
```

未定义，按回车时返回 13。

为什么此代码返回“未定义”结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:23:09.393

`ENTER`按下时，`change`事件在之前触发`keyup`。因为该事件`keyCode`是`undefined`因为该事件未绑定到键盘（它可以简单地触发，例如通过使用鼠标将焦点赋予其他一些控件），所以您可以`undefined`在控制台中看到。

之后`keyup`事件触发并产生预期的输出`13`。

您可以通过在输出中打印事件名称来验证这一点：

```
console.log(e.type + " gives the code " + keyCode); 
```

# powershell-3.0 - 如何在powershell数组中找到一个对象？

> ID：14705144
> 
> 赞同：0
> 
> 时间：2013-02-05T10:21:03.207
> 
> 标签：powershell-3.0

我第一次尝试在 Powershell (v3) 中使用数组，所以我的词汇量和正直需要一些帮助。

我想知道什么代码可以让我说：如果我的“子网”值是“1921683”，那么我的“笔记本电脑”值是多少？（我当然希望得到答案 LT3）

我只是通过 csv 文件导入数组（我认为这是一个数组）。

```
subnet,ou,laptop,desktop
1921681,MyOU1,LT1,DT1
1921682,MyOU2,LT2,DT2
1921683,MyOU3,LT3,DT3
1921684,MyOU4,LT4,DT4
1921685,MyOU5,LT5,DT5
1921686,MyOU6,LT6,DT6 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:25:34.490

使用 convertfrom-csv 将您的 csv 转换为对象，然后用户选择 cmdlet：

```
PS>$c=get-content myfile.csv |ConvertFrom-Csv

subnet                  ou                      laptop                  desktop
------                  --                      ------                  -------
1921681                 MyOU1                   LT1                     DT1
1921682                 MyOU2                   LT2                     DT2
1921683                 MyOU3                   LT3                     DT3
1921684                 MyOU4                   LT4                     DT4
1921685                 MyOU5                   LT5                     DT5
1921686                 MyOU6                   LT6                     DT6

PS>$c |ConvertFrom-Csv |where subnet -eq 1921683 |select laptop

laptop
------
LT3 
```

# javascript - IE8 上的 jQuery 选择器路径错误

> ID：14705150
> 
> 赞同：0
> 
> 时间：2013-02-05T10:21:27.403
> 
> 标签：javascript, jquery

在 IE8 上，jQuery 版本 1.4.2 为以下选择器路径返回 0（当检查长度时），但对于 1.9.1 版本，它返回 1。

```
selectorPath = 'DIV#header + DIV > TABLE:first-child > TBODY:first-child > 
                TR:first-child > TD:first-child > TABLE:first-child > 
                TBODY:first-child > TR:first-child > TD:first-child > 
                TABLE:first-child > TBODY:first-child > TR:first-child > 
                TD:first-child > DIV:first-child + P + P + P + P + P + P 
                + P + P + P + P + P + P + P + P + P + P + P + P + P + P + 
                P + P + P + P + P + P + P + P + P + P + P + P + P + P + P 
                + P + P + P + P + P + P + H2 + P + P + P + P + P + P + P + 
                P + P';

$_1_4_2(selectorPath).length //returns 0

$_1_9_1(seelctorPath).length //returns 1 
```

有人可以指出涵盖此问题的确切错误，或者至少列出 1.4.2 版本上可能相关的选择器路径错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:29:46.030

试着把它分成几块..

```
selectorPath = 'DIV#header + DIV > TABLE:first-child > TBODY:first-child > 
                    TR:first-child > TD:first-child > TABLE:first-child > 
                    TBODY:first-child > TR:first-child > TD:first-child > 
                    TABLE:first-child > TBODY:first-child > TR:first-child > 
                    TD:first-child > DIV:first-child + P + P + P + P + P + P 
                    + P + P + P + P + P + P + P + P + P + P + P + P + P + P + 
                    P + P + P + P + P + P + P + P + P + P + P + P + P + P + P 
                    + P + P + P + P + P + P + H2 + P + P + P + P + P + P + P + 
                    P + P';

    var half_len = Math.floor(selectorPath.length/2)                
    var first_part = selectorPath.substring(0, half_len);
    var second_part = selectorPath.substring(half_len, selectorPath.length);

    $_1_4_2(first_part).filter(second_part).length 
```

# c# - 如何在 C# 中获取 HKEY_USERS 的子文件夹名称？

> ID：14705151
> 
> 赞同：2
> 
> 时间：2013-02-05T10:21:31.767
> 
> 标签：c#, directory, registry

我正在尝试在此注册表项中获取已安装的应用程序。

> HKEY_USERS\S-1-5-21-xxxxxx-xxxxxx-xxxxxx-1000\SOFTWARE\Microsoft\Win‌​dows\CurrentVersion\Uninstall

如果您将 registry_Key 的第一部分（x 所在的位置）替换为您的文件夹名称，则以下代码有效。但是我怎样才能获得该文件夹名称，以便我可以在任何计算机上使用此代码，因为该文件夹名称在每台电脑上都不同？

换句话说，我将如何得到这部分字符串**S-1-5-21-xxxxxx-xxxxxx-xxxxxx-1000**

```
 registry_key = @"> HKEY_USERS\S-1-5-21-xxxxxx-xxxxxx-xxxxxx-1000\SOFTWARE\Microsoft\Win‌​dows\CurrentVersion\Uninstall";
            using (Microsoft.Win32.RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key))
            {
                foreach (string subkey_name in key.GetSubKeyNames())
                {
                    using (RegistryKey subkey = key.OpenSubKey(subkey_name))
                    {
                        textBox2.Text += subkey.GetValue("DisplayName") + "\r\n";
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:46:20.367

如果您想要一个可用的 USER 配置文件列表来遍历 HKEY_USERS 注册表配置单元上的注册表，您可以读取并过滤

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList 
```

但是，您需要有权打开与当前用户不同的用户的注册表配置单元（我认为是管理员，从未做过）。
如果您只需要检查 CURRENT_USER 注册表，直接使用密钥会更容易

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\Win‌​dows\CurrentVersion\Uninstall 
```

# node.js - 来自图形魔术师的缩略图，无需放大

> ID：14705152
> 
> 赞同：3
> 
> 时间：2013-02-05T10:21:33.967
> 
> 标签：node.js, graphicsmagick

我在 nodejs 中使用[图形魔法包装器，并使用以下代码创建方形缩略图：](http://aheckmann.github.com/gm/)

```
var size = {width: 200, height: 200};
gm(sourcePath)
  .resize(size.width * 2, (size.height * 2) + '')
  .thumbnail(size.width, size.height + '^')
  .gravity('center')
  .extent(size.width, size.height)
  .profile('*')
  .write(outputPath, function (error) {
    if (error) console.log('Error - ', error);
  }); 
```

这很好用，直到我的缩略图大小大于输入图像。在这种情况下，我希望缩略图是规定的大小，但是图像要放在它的中心而不是调整大小。

有没有办法用一组命令来做到这一点，还是我必须编写一些单独的逻辑来确定？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T14:44:49.460

我最终使用以下命令直接使用 GM：

```
gm convert inputPath -resize "200x200>" -gravity center -extent 200x200 outputPath 
```

这将创建一个 200x200 的图像，其中输入图像居中，它们 -resize 200x200> 部分（注意 >）意味着仅将其调整为更小而不是更大

在 node 中使用 gm 模块的等效命令是：

```
var size = {width: 200, height: 200};
gm(sourcePath)
  .resize(size.width, size.height + ">")
  .gravity('Center')
  .extent(size.width, size.height)
  .write(outputPath, function (error) {
    if (error) console.log('Error - ', error);
  }); 
```

# c# - 如何检查 X509 证书是否打开了“扩展验证”？

> ID：14705157
> 
> 赞同：20
> 
> 时间：2013-02-05T10:21:46.627
> 
> 标签：c#, ssl, x509certificate

我正在努力寻找一种可靠的方法来从我的 C# (.Net 4.0) 应用程序中检查 X509Certificate（或 X509Certificate2）是否设置了“扩展验证”（EV）标志。有谁知道最好的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T10:27:25.360

您可以检查是否`X509Certificate`包含这些[OId](http://en.wikipedia.org/wiki/Extended_Validation_Certificate#Extended_Validation_certificate_identification)之一。此外，您可以查看 Chromium 的 Source 以获取已实施 OId 的列表。您可以在[此处](https://chromium.googlesource.com/chromium/src/net/+/master/cert/ev_root_ca_metadata.cc)找到源代码。如果您想坚持使用 Firefox，可以在[此处](http://hg.mozilla.org/mozilla-central/file/tip/security/certverifier/ExtendedValidation.cpp)获取实现。

我现在更新了我的源代码并对其进行了测试。我编写了一个小方法来验证`X509Certificate2`来自 Wikipedia/Chromium 的 OId 列表。在这种方法中，我使用的是 Wikipedia-List，最好使用 Chromium-List。

* * *

## OId是如何保存的？

每个`CA`都有一个或多个 ObjectIds `OId`。正如您可能猜到的那样，它们*不会*保存为扩展，而是保存为策略扩展中的条目。要获得确切的扩展名，建议使用其`Policy Extension`自身的 Oid 而不是使用友好名称。策略扩展的 OId 是`2.5.29.32`。

## 提取信息

要获取 Policy Extensions 的内部内容，我们可以使用`System.Security.Cryptography.AsnEncodedData`将其转换为可读的`string`. 字符串本身包含我们需要匹配的策略，`string[]`以确保它是否包含一个`EV Certificate`.

## 来源

```
 /// <summary>
    /// Checks if a X509Certificate2 contains Oids for EV
    /// </summary>
    /// <param name="certificate"></param>
    /// <returns></returns>
    private static bool IsCertificateEV(X509Certificate2 certificate)
    {
        // List of valid EV Oids
        // You can find correct values here:
        // http://code.google.com/searchframe#OAMlx_jo-ck/src/net/base/ev_root_ca_metadata.cc&exact_package=chromium
        // or in Wikipedia
        string[] extendedValidationOids = 
        {
            "1.3.6.1.4.1.34697.2.1",
            "1.3.6.1.4.1.34697.2.2",
            "1.3.6.1.4.1.34697.2.1", 
            "1.3.6.1.4.1.34697.2.3", 
            "1.3.6.1.4.1.34697.2.4",
            "1.2.40.0.17.1.22",
            "2.16.578.1.26.1.3.3",
            "1.3.6.1.4.1.17326.10.14.2.1.2", 
            "1.3.6.1.4.1.17326.10.8.12.1.2",
            "1.3.6.1.4.1.6449.1.2.1.5.1",
            "2.16.840.1.114412.2.1",
            "2.16.528.1.1001.1.1.1.12.6.1.1.1",
            "2.16.840.1.114028.10.1.2",
            "1.3.6.1.4.1.14370.1.6",
            "1.3.6.1.4.1.4146.1.1",
            "2.16.840.1.114413.1.7.23.3",
            "1.3.6.1.4.1.14777.6.1.1", 
            "1.3.6.1.4.1.14777.6.1.2",
            "1.3.6.1.4.1.22234.2.5.2.3.1",
            "1.3.6.1.4.1.782.1.2.1.8.1",
            "1.3.6.1.4.1.8024.0.2.100.1.2",
            "1.2.392.200091.100.721.1",
            "2.16.840.1.114414.1.7.23.3",
            "1.3.6.1.4.1.23223.2", 
            "1.3.6.1.4.1.23223.1.1.1", 
            "1.3.6.1.5.5.7.1.1",
            "2.16.756.1.89.1.2.1.1",
            "2.16.840.1.113733.1.7.48.1",
            "2.16.840.1.114404.1.1.2.4.1",
            "2.16.840.1.113733.1.7.23.6",
            "1.3.6.1.4.1.6334.1.100.1",
        };

        // Logic:
        // Locate Certificate Policy Extension
        // Convert to AsnEncodedData (String)
        // Check if any of the EV Oids exist
        return (
                from X509Extension ext in certificate.Extensions 
                where ext.Oid.Value == "2.5.29.32" 
                select new AsnEncodedData(ext.Oid, ext.RawData).Format(true))
                .Any(asnConvertedData => extendedValidationOids.Where(asnConvertedData.Contains).Any()
            );
    } 
```

如果您需要一些资源来开始：

```
 static void Main(string[] args)
    {
        // Create Delegate for analysis of X509Certificate
        ServicePointManager.ServerCertificateValidationCallback = ValidateServerCertificate;

        // Make sample request to EV-Website to get Certificate
        var wc = new WebClient();
        wc.DownloadString("https://startssl.com");  // EV
        wc.DownloadString("https://petrasch.biz");  // Not EV
        Console.ReadLine();
    }

    public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        var cert = (X509Certificate2) certificate;
        Console.WriteLine("Certificate: " + cert.GetNameInfo(X509NameType.SimpleName, true) + " -> " + IsCertificateEV(cert));
        return true;
    } 
```

如果有人知道实现此目标的更好方法，请告诉我们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-21T21:16:31.417

我想我会发布一个更完整的答案，即使这个问题已经很老了。我不会背弃现有的答案，这样这个答案就完成了。

EV 证书需要通过一些检查，以便浏览器认为该证书是 EV。

1.  证书具有已知为 EV 策略的策略标识符。
2.  证书的根指纹与固定的策略标识符匹配。
3.  证书必须通过在线吊销检查。
4.  如果证书的 notBefore（颁发日期）在 2015 年 1 月 1 日之后，则证书必须支持证书透明度。
5.  证书必须由受信任的根颁发。
6.  如果有多个信任路径，则所有链都是有效的。

让我们剖析其中的每一个。

### 策略标识符

证书有一个称为策略标识符的扩展。可以从`X509Certificate2.Extensions`属性访问扩展。策略标识符扩展的对象标识符（“OID”）为`2.5.29.32`. 因此，我们可以使用如下方式获取原始扩展：

```
var extension = certificate.Extensions["2.5.29.32"] 
```

如果这返回 null，意味着根本没有策略，您可以立即假设这不是 EV 证书。

尽管证书有某种政策，但更有可能。在这种情况下，您需要对数据进行解码。该属性将以原始 ASN.1 形式提供给您，我们需要理解它。

不幸的是，.NET 中没有任何东西可以开箱即用。但是[`CryptDecodeObjectEx`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa379912(v=vs.85).aspx)，如果您使用平台调用，则可以这样做。这样做的细节我会省略，但是有很多信息可以展示如何调用这个函数。您需要在将 lpszStructType 参数设置为值的情况下调用它`(IntPtr)16`。这将为您返回一个[`CERT_POLICIES_INFO`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa377223(v=vs.85).aspx)结构，该结构具有计数和指向结构数组的指针`CERT_POLICY_INFO`。该结构上有一个名为 的字段`pszPolicyIdentifier`。我们感兴趣的是这个策略 OID。

每个证书颁发机构都有一个或多个 OID，用于将证书制作为 EV。每个 CA 都会在其政策页面上记录它们。但是，获得最新列表的最佳位置可能是[Chromium 的 Source Code](https://code.google.com/p/chromium/codesearch#chromium/src/net/cert/ev_root_ca_metadata.cc)。

如果证书具有与其中一个 OID 匹配的策略，那么我们可以继续进行下一个检查。

### 根指纹

如果您查看上述链接中的 Chromium Source，您会看到除了策略标识符之外，它还保留了根的 SHA256 指纹。

这是因为除了具有正确 OID 的证书之外，它还必须由其指纹匹配的 CA 颁发。在 Chromium 源代码中，我们看到如下内容：

```
{{0x06, 0x3e, 0x4a, 0xfa, 0xc4, 0x91, 0xdf, 0xd3, 0x32, 0xf3, 0x08,
      0x9b, 0x85, 0x42, 0xe9, 0x46, 0x17, 0xd8, 0x93, 0xd7, 0xfe, 0x94,
      0x4e, 0x10, 0xa7, 0x93, 0x7e, 0xe2, 0x9d, 0x96, 0x93, 0xc0}},
    {
        // AC Camerfirma uses the last two arcs to track how the private key
        // is managed - the effective verification policy is the same.
        "1.3.6.1.4.1.17326.10.14.2.1.2", "1.3.6.1.4.1.17326.10.14.2.2.2",
    } 
```

因此证书必须具有“1.3.6.1.4.1.17326.10.14.2.1.2”或“1.3.6.1.4.1.17326.10.14.2.2.2”策略标识符，但根必须具有上面看到的二进制文件的 SHA1 指纹.

这可以防止恶意 CA 使用它不拥有的策略 ID。

### 撤销检查

如果浏览器无法检查证书是否被吊销，则不会被视为 EV 证书。必须进行*在线撤销检查，尽管客户端可能会缓存结果。*

`X509Chain.Build`您可以通过在调用之前在链上设置适当的标志来执行撤销检查`Build`。

### 证书透明度

这个有点难检查，但谷歌在[Certificate Transparency 网站](https://www.certificate-transparency.org/ev-ct-plan)上有相应的文档。如果证书是在 2015 年 1 月 1 日之后颁发的，则需要证书透明度。[如Chromium Project Page](https://sites.google.com/a/chromium.org/dev/Home/chromium-security/certificate-transparency/log-policy)所示，Chrome 还将某些证书列入白名单。

### 可信根

这个相当简单，但证书必须属于受信任的根。如果证书是自签名的，则不能是 EV。这可以在调用时再次检查`X509Chain.Build()`。

### 多个信任路径

证书可能具有多个信任路径，例如证书是否由交叉签名的根颁发。如果有多个信任路径，则所有路径都必须有效。同样，必须对所有路径进行吊销检查。如果任何路径显示证书已被吊销，则证书无效。

不幸的是，据我所知，.NET 甚至 Win32 都没有很好的方法来检查所有证书链，甚至无法获得多个证书链。

综合所有这些，如果都通过了，那么该证书可以被认为是EV证书。

# html - Firefox中的滚动条样式？

> ID：14705160
> 
> 赞同：1
> 
> 时间：2013-02-05T10:21:53.467
> 
> 标签：html, firefox, css

在 Opera 和 IE 中，我可以使用 scrollbar-face/arrow/track/shadow...-color cssvalues 来更改滚动条的外观。在 chrome/safari (webkit) 中有 ::-webkit-scrollbar ::-webkit-scrollbar-button ::-webkit-scrollbar-track 等... css 值。

所以在 IE、Chrome、Opera 和 Safari 中，我知道如何自定义滚动条。但是如何在Firefox中管理它？有没有办法使用 CSS 自定义 Firefox 中的滚动条？

提前致谢，

# javascript - 删除 this.class 函数 Javascript

> ID：14705163
> 
> 赞同：0
> 
> 时间：2013-02-05T10:22:12.740
> 
> 标签：javascript

我有一个连接到一个类的函数，它可以让我通过类名删除它。我遇到的问题是当我有两个具有相同类名的元素时。该函数关闭两个类，而不仅仅是选择的类。

我认为我使用了一个 element.this 函数，但是当我尝试它时，没有一个类被删除。

有任何想法吗 ？

```
 function CloseEvent(){
        var CloseEvent = "close";
        var addClassArr= document.getElementsByClassName(CloseEvent);
        for(var i=0; i<addClassArr.length; i++){
            var addClass = addClassArr[i];
            addClass.addEventListener("click", closebutton, true);
        }       
        function closebutton() {

        var classToRemove = "dice-window-wrapper";
            var elems = document.getElementsByClassName(classToRemove);
            for (var i = 0;  i < elems.length; i--) {
                elems[i].parentNode.removeChild(elems[i])

            }
        } 

    }
    CloseEvent(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:29:11.263

> 该函数关闭两个类，而不仅仅是选择的类。

这是错误的，因为通过`document.getElementsByClassName`- 选择了多个，并且所有这些都被正确删除。

不要按类名选择元素，而是选择[触发事件的那个](http://quirksmode.org/js/events_properties.html#target)。

```
function closebutton(e) {
    var elem = e.target; // or just the "this" keyword
    // elem is the <div class="close" />
    var wrapper = elem.parentNode.parentNode;
    // wrapper is the <div class="dice-window-wrapper" />
    wrapper.parentNode.removeChild(wrapper);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:38:58.070

更新了 html 代码以反映您网站上使用的 html。

```
<div class="dice-window-wrapper">
    <div class="dice-menubar-wrapper">
        <div class="close">
            close one
        </div>
    </div>
</div>
<div class="dice-window-wrapper">
    <div class="dice-menubar-wrapper">
        <div class="close">
            close one
        </div>
    </div>
</div> 
```

那么这里是如何删除点击的元素：

```
function CloseEvent(){
        var CloseEvent = "close";
        var addClassArr= document.getElementsByClassName(CloseEvent);
        for(var i=0; i<addClassArr.length; i++){
            var addClass = addClassArr[i];
            addClass.addEventListener("click", closebutton, true);
        }       
        function closebutton(e) {
            var classToRemove = " "+"dice-window-wrapper"+" ";
            var obj=e.target;
            while((" "+obj.className+" ").indexOf(classToRemove)==-1){ 
                obj=obj.parentNode;
            }
            if(obj.tagName.toLowerCase()!="div"){
                console.log("something wrong in closebutton");
                return;
            }
            obj.parentNode.removeChild(obj);
        } 
    } 
```

请注意，这在 IE8 中根本不起作用，因为不支持 getElementsByClassName 不是以这种方式传递的事件，并且 addEventListner 可能存在问题。这就是我通常使用 jQuery 的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:28:39.233

您应该能够通过使用`this`识别触发元素来识别调用 JS 函数的对象，例如

```
function closebutton() {
    this.parentNode.removeChild(this);
} 
```

例如删除 SO 标志！

```
function notSO(){this.parentNode.removeChild(this);}
document.getElementById("hlogo").addEventListener("mouseover", notSO, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:31:45.400

这是您修改后的代码：

```
 function CloseEvent(){
    var CloseEvent = "close";
    var addClassArr= document.getElementsByClassName(CloseEvent);
    for(var i=0; i<addClassArr.length; i++){
        var addClass = addClassArr[i];
        addClass.addEventListener("click", function(){ closebutton(this) }, true);
    }       
    function closebutton( elem ) {

    var classToRemove = "dice-window-wrapper";
        //var elems = document.getElementsByClassName(classToRemove);
        //for (var i = 0;  i < elems.length; i--) {
        //    elems[i].parentNode.removeChild(elems[i])
        //}
        // you have passed the element to be removed, directly remove it
        elem.parentNode.removeChild(elem);
    } 
}
CloseEvent(); 
```

# cordova - 如何修复 PhoneGap 构建错误？“InvokeScriptCallback 中的异常”

> ID：14705165
> 
> 赞同：0
> 
> 时间：2013-02-05T10:22:15.863
> 
> 标签：cordova, cordova-2.0.0

我正在尝试构建基于 PhoneGap 的 Wondows Phone 7 应用程序，但我不断收到以下两个错误：

```
 GapBrowser_Navigated :: /app/www/page2.html
    Der Thread '<Kein Name>' (0x16660ac6) hat mit Code 0 (0x0) geendet.
    Der Thread '<Kein Name>' (0x16000752) hat mit Code 0 (0x0) geendet.
    "UI Task" (Verwaltet): "System.SR.dll" geladen
    Eine Ausnahme (erste Chance) des Typs "System.ArgumentException" ist in mscorlib.dll aufgetreten.
    Eine Ausnahme (erste Chance) des Typs "System.SystemException" ist in Microsoft.Phone.Interop.dll aufgetreten.
    ERROR: Exception in InvokeScriptCallback :: An unknown error has occurred. Error: 800A1393.
    INFO: AppDeactivated
    Der Thread '<Kein Name>' (0x126a0b7a) hat mit Code 0 (0x0) geendet.
    Der Thread '<Kein Name>' (0x177306ea) hat mit Code 0 (0x0) geendet. 
```

# android - 如何使用反射在 Android 4.2 上连接配对的蓝牙 A2dp 设备？

> ID：14705167
> 
> 赞同：3
> 
> 时间：2013-02-05T10:22:18.800
> 
> 标签：android, reflection, bluetooth, device

我需要通过简单的按下按钮来连接定义的 BT 设备。
要求是用户不应像使用标准套接字方法那样收到任何通知对话框。
在我的项目中，我使用[了这个解决方案](https://stackoverflow.com/a/6168831/965226)。接下来是代码：

```
/**
 * Return system service to work with A2DP
 *
 * @return bluetooth interface
 */
private static IBluetoothA2dp getIBluetoothA2dp() {
    IBluetoothA2dp ibta = null;
    try {
        final Class serviceManager = Class.forName("android.os.ServiceManager");
        final Method getService = serviceManager.getDeclaredMethod("getService", String.class);
        final IBinder iBinder = (IBinder) getService.invoke(null, "bluetooth_a2dp");
        final Class iBluetoothA2dp = Class.forName("android.bluetooth.IBluetoothA2dp");
        final Class[] declaredClasses = iBluetoothA2dp.getDeclaredClasses();
        final Class c = declaredClasses[0];
        final Method asInterface = c.getDeclaredMethod("asInterface", IBinder.class);

        asInterface.setAccessible(true);
        ibta = (IBluetoothA2dp) asInterface.invoke(null, iBinder);
    } catch (final Exception e) {
        Log.e("Error " + e.getMessage());
    }
    return ibta;
} 
```

在我在 Android 4.2 上启动我的应用程序之前，它运行良好。现在我无法获得 IBluetoothA2dp 接口，因为 getService() 方法没有返回带有“bluetooth_a2dp”键的 IBinder。

有人能帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:25:56.443

终于在4.2上运行了。在此处查看详细信息：[http ://code.google.com/p/a2dp-connect2/](http://code.google.com/p/a2dp-connect2/)

它与 4.1 及之前的版本完全不同。

首先调用 connect 到这样的接口：

```
 public static void getIBluetoothA2dp(Context context) {

    Intent i = new Intent(IBluetoothA2dp.class.getName());

    if (context.bindService(i, mConnection, Context.BIND_AUTO_CREATE)) {

    } else {
        // Log.e(TAG, "Could not bind to Bluetooth A2DP Service");
    }

} 
```

当接口返回时，它会回调这个：

```
 public static ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {

        ibta2 = IBluetoothA2dp.Stub.asInterface(service);
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub

    }

}; 
```

上面的ibta2是IBluetoothA2dp接口。

在相关的说明中，IBluetooth 界面也发生了变化。我使用它来获取设备别名（用户可以编辑的别名）。这个 getRemoteAlias() 函数之前需要 mac 地址。现在它需要一个蓝牙设备。

请记住，使用这些隐藏的界面是有风险的，因为它们可以而且经常会随着新的 Android 版本而改变。我已经被它咬了好几次了。你真的需要保持领先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T00:28:17.817

如果有人需要与自动配对相关的问题的答案，可以在这里查看我的答案。 [https://stackoverflow.com/a/30362554/3920157](https://stackoverflow.com/a/30362554/3920157)

# symfony-2.1 - 仪表板外的奏鸣曲管理块

> ID：14705172
> 
> 赞同：1
> 
> 时间：2013-02-05T10:22:39.697
> 
> 标签：symfony-2.1, sonata-admin

我正在将 sf2 与奏鸣曲管理包一起使用，我想在实体的显示路线中添加一个块，但我找不到任何方法来做到这一点。我已经在仪表板上添加了一个块，所以我知道如何制作一个，我只是不知道如何将它添加到不同的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:20:04.363

您可以使用 twig 方法“sonata_block_render”渲染任何模板中的任何块

以下是来自 sonatablockbundle 文档的示例：

```
{{ sonata_block_render({
    'type': 'sonata.block.service.rss',
    'settings': {
        'title': 'Sonata Project\'s Feeds',
        'url': 'http://sonata-project.org/blog/archive.rss'
    }
}) }} 
```

看

[http://sonata-project.org/bundles/block/master/doc/reference/twig_helpers.html](http://sonata-project.org/bundles/block/master/doc/reference/twig_helpers.html)

# linux - 使用连续内存分配器 (CMA) Linux 设备驱动程序开发分配内存的问题

> ID：14705173
> 
> 赞同：0
> 
> 时间：2013-02-05T10:22:44.880
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我正在尝试测试 DMA 映射框架的连续内存分配器。我已经编译了支持 CMA 的内核 3.5.7，我知道它是实验性的，但它应该可以工作。我的目标是在内核模块中为没有分散/收集功能的设备分配几个 32MB 物理上连续的内存块。

我正在使用 Barry Song 的测试补丁测试我的系统：http: [//thread.gmane.org/gmane.linux.kernel/1263136](http://thread.gmane.org/gmane.linux.kernel/1263136)

但是当我尝试使用`echo 1024 > /dev/cma_test`. 我明白了`bash: echo: write error: No space left on device`。在 dmesg 中：`misc cma_test: no mem in CMA area`

可能是什么问题呢？我错过了什么？系统刚刚重新启动，应该有至少 350mb 的可用连续内存，因为内核 3.2 上的 bigphysarea 补丁能够在类似系统上分配该数量。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T13:24:12.613

最后我决定使用内核 3.5 和 bigphysarea 补丁（从 3.2 开始）。这很容易，而且效果很好。

CMA 也是不错的选择，但使用调试有点困难（CMA 需要实际设备）。我已经用尽了我所有的技能来找出问题所在。内核代码中的 Printk 是调试此代码的唯一可能性。

# mongodb - Mongodb 代理中的清除任务

> ID：14705175
> 
> 赞同：0
> 
> 时间：2013-02-05T10:22:52.087
> 
> 标签：mongodb, celery

我正在使用 celery 3.0.13 并使用 mongodb 作为代理。

我正在尝试清除自定义队列中的任务。我停止了所有工作人员，并尝试使用“celery purge”命令清除自定义队列中的等待任务，但该命令报告没有清除任何任务。我重新检查了即使在运行命令（使用花）之后任务仍在队列中。

我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:10:06.053

可能与这个问题有关：

[https://github.com/celery/celery/issues/1047](https://github.com/celery/celery/issues/1047)

# android - Android不同ABI兼容性

> ID：14705185
> 
> 赞同：2
> 
> 时间：2013-02-05T10:23:16.067
> 
> 标签：android, android-ndk

例如，让构建名为“some”的静态库。

**LibSome Android.mk**

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := some
LOCAL_SRC_FILES := some.c
include $(BUILD_STATIC_LIBRARY) 
```

**LibSome 应用程序.mk**

```
APP_MODULES := somelib
APP_OPTIM  := release 
```

*并在LibSome/obj/local/armeabi/libsome.a*中获取我们的 lib 的 armeabi 版本

 *所以现在我们需要将我们的 lib 放到 mainProject jni 文件夹并使用它

**主项目 Android.mk**

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := some
LOCAL_SRC_FILES := libsome.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/some
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := mainProject
LOCAL_SRC_FILES := mainProject.c
LOCAL_STATIC_LIBRARIES := some
include $(BUILD_SHARED_LIBRARY) 
```

但是有不同的 ABI，比如 mips、x86、armeabi-v7a，我们可以通过当前的 ndk 获得所有支持的 somelib 版本，只需添加

```
APP_ABI:= all 
```

到 SomeLib Application.mk，所以我们得到*LibSome/obj/local/armeabi-v7a/libsome.a*，*LibSome/obj/local/x86/libsome.a*等

**主要问题**- 我真的需要考虑不同的 ABI 并为每个受支持的 ABI 创建项目，如 mainProjectx86、mainProjectMIPS 和不同的 ABI 构建库吗？

次要问题是：

如果我为 armeabi ABI 构建项目（默认），将削减多少设备？armeabi-v7a ABI 设备可以运行 armeabi ABI 应用程序吗？

如果有一种方法可以让一个项目具有不同的预构建库集？因此，如果您为 ameabi-v7a 构建 mainProject，它将使用 armeabi-v7a 库等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:13:21.377

好的，首先，如果您使用标准 C 调用而没有嵌入任何特定于体系结构的汇编语言，那么使用`APP_ABI := all`. 这将允许**gcc**为所有架构创建库，并且您的应用程序运行不会出现问题。

但是，如果您使用的是 ARM 特定的东西，例如 NEON 架构要求优化数学或 Intel x86 SSE3 要求优化数学，那么 APP_ABI := all 可能不是一个好主意。这可能会导致非常难以理解的运行时错误。然后，您可能需要为不同的架构维护不同的项目。

进入第二个问题：1.大多数最新设备都是armeabi-v7a，因此只会删除旧设备。并行 x86 和 MIPS 设备也将被删除。但由于三星、HTC 和索尼等大多数旗舰产品都配备了 ARM，因此您的应用程序将获得很大比例。

关于第二个暂时没有太多线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T19:54:05.810

所有 ARM 设备都运行 armeabi。较旧和较慢的使用 ARMv6，不能使用 armeabi-v7a 库。但是可以在一个应用程序中混合使用 armeabi 和 ameabi-v7a 共享库。如果您有一个庞大的本机库并且不想分两份发布，并且还有一些非常具体的功能是性能瓶颈，可能会通过 NEON 优化大大加速，这可能会很有用。所以，最后你的项目文件夹中有以下结构：

```
libs/
    armeabi/
            libhuge.so
            libslow.so
    armeabi-v7a/
            libfast.so 
```*

# c - 为什么要在驱动程序代码中注册 struct cdev

> ID：14705189
> 
> 赞同：9
> 
> 时间：2013-02-05T10:23:21.780
> 
> 标签：c, linux, linux-kernel, linux-device-driver

这可能是一个新手问题，但请帮助我理解它。

为什么我们需要在字符驱动程序中注册 struct cdev？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-05T18:16:44.057

`struct cdev`表示内核中的字符设备。

所有流设备（*例如：uart、keyboard*）都属于字符设备类别，并且在用户空间中作为**设备节点文件**（*例如：/dev/ttyS0*）可用。用户应用程序使用标准文件 I/O 操作访问设备。

![在此处输入图像描述](../Images/586f35816fed30865b3898f76e2f473b.png)

在内核内部，字符驱动程序位于设备文件和流设备之间，该驱动程序层负责将文件 I/O 操作转换为设备操作，反之亦然。

在字符设备驱动程序开发`struct file_operations`中使用的最重要的数据结构。此结构用于实现基本文件 i/o - *open()、read()、write()、close()、ioctl() 等...*设备的功能。

`struct cdev`结构封装`file_operations`结构和一些其他重要的驱动信息（主要/次要没有）。它是向内核注册字符驱动程序的新方法。

内核通过以下 API 访问 cdev 结构：

```
cdev_init() - used to initialize struct cdev with the defined file_operations
cdev_add()  - used to add a character device to the system. 
cdev_del()  - used to remove a character device from the system 
```

调用 后`cdev_add()`，您的设备立即启动。可以调用您定义的所有函数（通过 file_operations 结构）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-05T11:20:06.057

根据我对您问题的理解，您似乎在询问`struct cdev`. `struct cdev`是`inode`结构的要素之一。您可能已经知道，`inode`内核内部使用一个结构来表示文件。`struct cdev`是表示字符设备的内核内部结构。所以`cdev* i_cdev`field of`struct inode`是一个指向 cdev 结构的指针，而 the`inode`是指 char 设备文件。因此，如果内核必须调用字符设备，它必须注册一个`cdev`类型的结构。

# android - 如何在列表视图中设置字符串值？

> ID：14705193
> 
> 赞同：0
> 
> 时间：2013-02-05T10:23:29.810
> 
> 标签：android, android-listview, assets

我在资产文件夹中使用数据存储，如“reader.txt”，此数据使用“InputStream”获取字符串值，如在 textview 中设置为字符串值。我的问题是如何在列表视图中存储字符串？

这是我的代码：

```
try {
        InputStream is = getAssets().open("reader.txt");

        int size = is.available();

        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();

        // Convert the buffer into a string.
        String text = new String(buffer);

        TextView tv = (TextView) findViewById(R.id.list);
        tv.setText(text);

    } catch (IOException e) {
        // Should never happen!
        throw new RuntimeException(e);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:33:07.980

有两种方法可以在 listView 中存储字符串。您可以使用`android:entries`将数组或对象资源作为输入，或者您可以使用 ArrayAdapter 在 listView 中设置条目。我将向您展示一个示例。

```
 String[] values={""}//whatever values you have shown in the TextView
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
       android.R.layout.simple_list_item_1, android.R.id.text1, values);

     // Assign adapter to ListView
     listView.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:32:28.110

您可以从文件中读取文本，然后将其存储到`String[]`然后使用`ListAdapter`例如.`ArrayAdapter<String>``ListView`

```
ListView list = (ListView) findViewById(R.id.someId);
your work with file ...
list.setAdapter(new ArrayAdapter<String>(Context, Layout, data)); 
// data is String[] 
```

这是类似的例子：

*   [Android中的ArrayAdapter示例程序](http://www.java-samples.com/showtutorial.php?tutorialid=1516)

与您的不同之处在于您`String[]`将由文件动态生成。因此，首先您将从文件中准备数据，将它们存储到适配器中并将它们`String[]`设置为适配器。

# scala - SLICK 如何定义双向一对多关系以在案例类中使用

> ID：14705194
> 
> 赞同：15
> 
> 时间：2013-02-05T10:23:34.197
> 
> 标签：scala, slick

我正在使用 SLICK 1.0.0-RC2。我定义了以下两个表 Directorate 和 ServiceArea，其中 Directorate 与 ServiceArea 具有一对多关系

```
case class Directorate(dirCode: String, name: String)

object Directorates extends Table[Directorate]("DIRECTORATES") {

  def dirCode = column[String]("DIRECTORATE_CODE", O.PrimaryKey)

  def name = column[String]("NAME")

  def * = dirCode ~ name  <> (Directorate, Directorate.unapply _) 
}

case class ServiceArea(areaCode: String, dirCode: String, name: String)

object ServiceAreas extends Table[ServiceArea]("SERVICE_AREAS") {

  def areaCode = column[String]("AREAE_CODE", O.PrimaryKey)

  def dirCode = column[String]("DIRECTORATE_CODE")

  def name = column[String]("NAME")

  def directorate = foreignKey("DIR_FK", dirCode, Directorates)(_.dirCode)

  def * = areaCode ~ dirCode ~ name <> (ServiceArea, ServiceArea.unapply _)
} 
```

为了使 Directorate 案例类在我的 Play 应用程序表单中有用，我尝试重新定义 Directorate 案例类以具有与该 Directorate 相关的 ServiceAreas*序列*。

```
case class Directorate(dirCode: String, name: String, serviceAreas: Seq[ServiceArea]) 
```

我的问题现在与理事会表投影有关。我试图在 Directorates 中创建一个方法：

```
def serviceAreas = (for { a <- ServiceAreas
                         if (a.dirCode === dirCode)
                    } yield (a)).list map {
                      case t: ServiceArea => t
                    } 
```

这样我就可以尝试类似

```
def * = dirCode ~ name  ~ serviceAreas <> (Directorate, Directorate.unapply _) 
```

但这不能行不通，因为 serviceAreas 只有一种方式。

在我看来，Directorate 案例类是一个有用的域对象，它应该能够包含相关的 ServiceAreas，这似乎是合理的。

我想知道我应该如何遍历反向关系，以便理事会表投影能够工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T12:22:42.157

我确信有一个更优雅的解决方案，但这应该可以解决问题：

```
import scala.slick.driver.H2Driver.simple._
import Database.threadLocalSession

object SlickExperiments2 {

  Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver") withSession {

    (Directorates.ddl ++ ServiceAreas.ddl).create

    case class Directorate(dirCode: String, name: String) {
      def serviceAreas: Seq[ServiceArea] = (for {
        a <- ServiceAreas
        if (a.dirCode === dirCode)
      } yield (a)).list
    }

    object Directorates extends Table[Directorate]("DIRECTORATES") {

      def dirCode = column[String]("DIRECTORATE_CODE", O.PrimaryKey)

      def name = column[String]("NAME")

      def * = dirCode ~ name <> (Directorate, Directorate.unapply _)
    }

    case class ServiceArea(areaCode: String, dirCode: String, name: String)

    object ServiceAreas extends Table[ServiceArea]("SERVICE_AREAS") {

      def areaCode = column[String]("AREAE_CODE", O.PrimaryKey)

      def dirCode = column[String]("DIRECTORATE_CODE")

      def name = column[String]("NAME")

      def directorate = foreignKey("DIR_FK", dirCode, Directorates)(_.dirCode)

      def * = areaCode ~ dirCode ~ name <> (ServiceArea, ServiceArea.unapply _)
    }

    Directorates.insert(Directorate("Dircode", "Dirname"))

    ServiceAreas.insertAll(ServiceArea("a", "Dircode", "A"), ServiceArea("b", "Dircode", "B"))

    val sa = (for{
    d <- Directorates
    } yield d).list map { case t: Directorate => t.serviceAreas}

    println(sa)
  }                                              
 //> List(List(ServiceArea(a,Dircode,A), ServiceArea(b,Dircode,B)))
} 
```

# windows-phone-8 - 反编译 WP8 程序集

> ID：14705197
> 
> 赞同：2
> 
> 时间：2013-02-05T10:23:37.663
> 
> 标签：windows-phone-8, decompiling, .net-reflector, dotpeek

任何人都有线索，如何从 Microsoft.Phone.dll [Windows Phone 8] 查看源代码。我用 .Net reflector 和 JetBrains dot peek 试过这个，不幸的是它没有反编译程序集。任何帮助非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T15:27:45.060

您需要 WP8 Phone 转储并从 WP8Dump\3\Windows\System32 中提取 System.Windows.dll。将该文件作为程序集加载到 .Net 反射器中，您就在路上。转储在这里在线[xda 开发人员](http://forum.xda-developers.com/showthread.php?t=1972146)，如果您找到新的，请发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T03:39:57.840

你试过 Telerik JustDecompile 吗？[可以在这里](http://www.telerik.com/products/decompiler.aspx)免费下载。

**注意：**我回答是为了帮助您，但我不会宽恕您尝试对 DLL 代码执行的任何操作。我不确定你想要代码做什么，或者即使反编译它是否合法。

# c# - 将 NavigationService 传递给 Usercontrol windows phone 7

> ID：14705200
> 
> 赞同：1
> 
> 时间：2013-02-05T10:23:40.450
> 
> 标签：c#, windows-phone-7

我想将导航服务传递给我的用户控件。在我的应用程序方面

```
<myControl:Test  NavigationService="{Binding NavigationService}"/>/> 
```

在我的 Usercontrol CS 端

```
 public NavigationService NavigationService { get; set; } 
```

但它似乎有效，应用程序一加载就崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:47:32.747

这真的很苛刻......好吧，你没有提到这一点，但我想，你试图解决从 UserControl 导航到其他页面/uc 的问题（是真的吗？）。

几个编辑：

1.  首先，您不需要*类的对象*来使用 NavigationService。
2.  其次， NavigationService 最常与*pages*一起使用。

如果您确实*想*将它与 UserControl 一起使用，您应该将页面实例转移到控件。但是，根据我的经验，通常这不是必需的。我宁愿建议这样做：

在您的 UserControl 中，您肯定会拥有带有点击/单击事件的控件。无需在用户控件类中描述它们的逻辑。当您将用户控件添加到页面时，您应该在那里声明它。像：

```
someUserControl.buttonNavigate.MouseLeftButtonUp += new MouseButtonEventHandler(buttonNavigate_Click); 
```

然后你就可以使用导航服务了。

```
NavigationService.Navigate(new Uri(...)); 
```

这是最简单的解决方案。希望能帮助到你。

还有其他的，但我希望这个能解决问题。

# ios - 移除XIB，应用有时会崩溃

> ID：14705201
> 
> 赞同：2
> 
> 时间：2013-02-05T10:23:40.823
> 
> 标签：ios, xcode, interface-builder, ios-simulator

我正面临一个我无法解决的非常烦人的问题。

我的一个 ViewController`.xib`有几个。`IBOutlets`然后我删除了`.xib`并`IBOutlets`选择自己负责定位视图。

现在应用程序在尝试加载 ViewController 时会崩溃，并出现以下错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<IntroViewController 0x20192480> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key logo.' 
```

这让我觉得某处有记忆，`.xib`因此它试图加载它。但是我已经删除了`.xib`并运行了一个`grep 'logo' ./*`以查看它是否在某个地方，但没有积极的结果。我还在“复制捆绑资源”中检查了该文件，但当然它不存在。

我注意到，如果我从模拟器中删除该应用程序，问题就会消失，但我无法在我的 iPod Touch 中修复它，甚至无法删除该应用程序。整个项目使用 git 进行版本控制。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:10:02.600

尝试在项目管理器中删除快照，清理、关闭 xcode、模拟器并重新运行。

# xhtml - 推杆 在我的标签 标签？

> ID：14705203
> 
> 赞同：0
> 
> 时间：2013-02-05T10:23:44.197
> 
> 标签：xhtml, tags

我只是在学习 xhtml，我们的老师想要在我们的段落标签之间引用这个引用：

`"Definition lists are lists of terms and their definitions. They are a little different than ordered and unordered lists in that the items are listed in pairs. The dl and dl surround the list. The name of the term appears between dt and dt, and the definition is between dd and dd."`

但是当我放入标签时，我的输出看起来像下面的输出。我怎样才能把 <> 放在周围而不让它解释为定义标签？

`"Definition lists are lists of terms and their definitions. They are a little different than ordered and unordered lists in that the items are listed in pairs. The <dl> and </dl> surround the list. The name of the term appears between<dt> and </dt>, and the definition is between <dd> and </dd>."`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:20:44.597

尝试这个：

"定义列表是术语及其定义的列表。它们与有序列表和无序列表有一点不同，因为它们是成对列出的。<dl> 和 <dl> 包围列表。术语的名称出现在 < dt> 和 <dt>，定义在 <dd> 和 <dd> 之间。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:15:31.283

如您所知，字符`<`、`>`和`&`在 (X)HTML 中具有特殊含义。您可以（并且应该）分别通过编写`&lt;`、`&gt;`和来逃避它们`&amp;`。

另请参阅[这篇文章](http://www.w3.org/International/questions/qa-escapes)，“何时使用转义”部分。

# oracle - Oracle 过程 - 加入子查询

> ID：14705207
> 
> 赞同：0
> 
> 时间：2013-02-05T10:23:52.883
> 
> 标签：oracle, stored-procedures, alias, outer-join

我需要一些帮助来完成这个过程。问题是如何为不同的 SELECT 设置别名，以便我可以在 RIGHT OUTER JOIN 上匹配它们。传统的 AS 不起作用。有任何想法吗？

```
PROCEDURE "GetProcessedEvents"
(
"In_OccurredFrom" TIMESTAMP,
"In_OccurredTo" TIMESTAMP,
"In_Interval" DECIMAL,
"Out_Cursor" OUT "Ref_Cursor"
)
IS
BEGIN    
OPEN "Out_Cursor" FOR      
  SELECT
    COUNT("Id") AS "ProcessedEvents",
    TO_TIMESTAMP('1900-01-01 00:00:00.000000', 'YYYY-MM-DD HH24:MI:SS.FF') + NUMTODSINTERVAL(FLOOR(DATEDIFF('MI', '1900-01-01', "ProcessedDate")/"In_Interval")*"In_Interval", 'MINUTE') AS "EventDts"
  FROM "Dat_ScheduledEvent"
  RIGHT OUTER JOIN
    (SELECT "Dts" FROM TABLE("F_GetDateIntervalTable"("In_OccurredTo", "In_OccurredFrom", "In_Interval")))
  ON "EventDts" = "Dts"
  WHERE
    "ProcessedDate" BETWEEN "In_OccurredFrom" AND "In_OccurredTo"
  GROUP BY
    TO_TIMESTAMP('1900-01-01 00:00:00.000000', 'YYYY-MM-DD HH24:MI:SS.FF') + NUMTODSINTERVAL(FLOOR(DATEDIFF('MI', '1900-01-01', "ProcessedDate")/"In_Interval")*"In_Interval", 'MINUTE');
END "GetProcessedEvents"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:43:41.323

`AS`在给列取别名时是可选的，但在给表（包括子查询）取别名时，Oracle 根本不允许。所以给子查询一个名字，只是不要包含`AS`关键字：

```
 FROM "Dat_ScheduledEvent" alias1
  RIGHT OUTER JOIN (
    SELECT "Dts"
    FROM TABLE("F_GetDateIntervalTable"("In_OccurredTo", "In_OccurredFrom",
      "In_Interval"))
  ) alias2 
```

但是你还有一些其他的问题。首先，创建带有必须用双引号括起来的标识符的对象是很痛苦的；混合大小写标识符真的值得吗？其次，它看起来`EventDts`只是一个派生字段，列别名不能用于查询中除`order by`子句之外的任何其他地方，因此您可能也需要将其设为子查询 - 这意味着您也可以`group by`在. 第三，`DATEDIFF`不是内置的 Oracle 函数——除非你自己创建了它，否则你需要使用其他东西。

```
 SELECT
    COUNT(alias1."Id") AS "ProcessedEvents",
    alias1."EventDts"        
  FROM (
    SELECT "Id",
      TO_TIMESTAMP('1900-01-01 00:00:00.000000', 'YYYY-MM-DD HH24:MI:SS.FF')
        + NUMTODSINTERVAL(FLOOR(DATEDIFF('MI', '1900-01-01', "ProcessedDate")
          /"In_Interval")*"In_Interval", 'MINUTE') AS "EventDts"
    FROM "Dat_ScheduledEvent"
    WHERE "ProcessedDate" BETWEEN "In_OccurredFrom" AND "In_OccurredTo"
  ) alias1
  RIGHT OUTER JOIN (
    SELECT "Dts"
    FROM TABLE("F_GetDateIntervalTable"("In_OccurredTo", "In_OccurredFrom",
      "In_Interval"))
  ) alias2
  ON alias1."EventDts" = alias2."Dts"
  GROUP BY alias2."EventDts"; 
```

`DATEDIFF`仍然需要更换，但我不太确定你在做什么。如果`F_GetDateIntervalTable`生成合适的间隔，我不确定你为什么需要这样做；您不想`ProcessedDate`在区间内查找值，即`>=`Dt `and <`Dt`+ InInterval`吗？当然，这取决于`InInterval`实际代表的内容。

* * *

假设`F_GetDateIntervalTable`给你感兴趣的时期内每个间隔的开始，你可以做这样的事情：

```
PROCEDURE "GetProcessedEvents"
(
"In_OccurredFrom" TIMESTAMP,
"In_OccurredTo" TIMESTAMP,
"In_Interval" DECIMAL,
"Out_Cursor" OUT "Ref_Cursor"
)
IS
BEGIN    
OPEN "Out_Cursor" FOR
  SELECT
    COUNT(Event."Id") AS "ProcessedEvents",
    DateInt."Dts"
  FROM (
    SELECT "Dts", COALESCE(LEAD("Dts")
      OVER (ORDER BY "Dts"), "In_OccurredTo") as "NextDts"
    FROM TABLE("F_GetDateIntervalTable"("In_OccurredTo", "In_OccurredFrom",
      "In_Interval"))
  ) DateInt
  LEFT JOIN "Dat_ScheduledEvent" Event
  ON Event."ProcessedDate" >= DateInt."Dts"
  AND Event."ProcessedDate" < DateInt."NextDts"
  GROUP BY DateInt."Dts"
  ORDER BY DateInt."Dts";
END "GetProcessedEvents";
/ 
```

让`LEAD()`您可以查看下一个结果，以便子查询将时间戳列表转换为从时间戳到到时间戳的列表（最后一个以 结尾`In_OccurredTo`），这允许您在数据表中查找匹配的记录落在这些范围内 - 不需要操作`ProcessedDate`。

使用一些虚假数据：

```
create table "Dat_ScheduledEvent" ("Id" number, "ProcessedDate" timestamp);

insert into "Dat_ScheduledEvent" ("Id", "ProcessedDate")
  values (1, to_timestamp('2013-02-06 09:45', 'YYYY-MM-DD HH24:MI'));
insert into "Dat_ScheduledEvent" ("Id", "ProcessedDate")
  values (1, to_timestamp('2013-02-06 09:50', 'YYYY-MM-DD HH24:MI'));
insert into "Dat_ScheduledEvent" ("Id", "ProcessedDate")
  values (1, to_timestamp('2013-02-06 10:15', 'YYYY-MM-DD HH24:MI')); 
```

...并从 SQL*Plus 调用该过程：

```
var r refcursor;
alter session set nls_date_format = 'YYYY-MM-DD HH24:MI';
exec "GetProcessedEvents"(to_date('2013-02-06 08:00'), to_date('2013-02-06 12:00'), 1/24, :r);
print :r 
```

...我得到：

```
ProcessedEvents        Dts                       
---------------------- ------------------------- 
0                      06-FEB-13 08.00.00.000000000 
2                      06-FEB-13 09.00.00.000000000 
1                      06-FEB-13 10.00.00.000000000 
0                      06-FEB-13 11.00.00.000000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:42:58.553

是的，我有一些想法。 **using** `WITH`子句可能很有用，它允许您将复杂的 SELECT 语句分解为子查询，从而极大地改善代码结构，当然您可以通过别名引用它们（子查询）。

下面是一个供您使用的小例子：

```
WITH subquery AS (SELECT sysdate FROM dual)
-- Here goes main query where subquery must be used
SELECT *
FROM subquery

OPEN "Out_Cursor" FOR     
WITH Q AS (SELECT "Dts" FROM TABLE("F_GetDateIntervalTable"("In_OccurredTo", "In_OccurredFrom", "In_Interval")))

SELECT
    COUNT("Id") AS "ProcessedEvents",
    TO_TIMESTAMP('1900-01-01 00:00:00.000000', 'YYYY-MM-DD HH24:MI:SS.FF') + NUMTODSINTERVAL(FLOOR(DATEDIFF('MI', '1900-01-01', "ProcessedDate")/"In_Interval")*"In_Interval", 'MINUTE') AS "EventDts"
  FROM "Dat_ScheduledEvent"
  RIGHT OUTER JOIN
    Q
  ON "EventDts" = "Dts"
  WHERE
    "ProcessedDate" BETWEEN "In_OccurredFrom" AND "In_OccurredTo"
  GROUP BY
    TO_TIMESTAMP('1900-01-01 00:00:00.000000', 'YYYY-MM-DD HH24:MI:SS.FF') + NUMTODSINTERVAL(FLOOR(DATEDIFF('MI', '1900-01-01', "ProcessedDate")/"In_Interval")*"In_Interval", 'MINUTE');
END "GetProcessedEvents"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:53:42.073

尝试删除变量名周围的双引号，除非语法要求它们。这可能会使解析器感到困惑。

# c# - .NET 如何重命名我的嵌入式资源？

> ID：14705211
> 
> 赞同：14
> 
> 时间：2013-02-05T10:24:12.170
> 
> 标签：c#, .net, visual-studio

当我将文件构建为“嵌入式资源”时，Visual Studio 会根据其在项目中的路径在程序集中为其命名。例如。我的文件`cases/2013.1/colours.xml`被赋予了一个带有零星下划线的资源名称，例如`cases._2013._1.colours.xml`.

我的问题是 - 这个名字是如何确定的？规则是否记录在案？Visual Studio 使用的方法在哪里？

编辑：我问是因为我正在处理大量这些事情，并且能够从文件路径中推断出资源名称会很有帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-11T13:33:55.097

如 MSDN Library 文章所述，Resgen.exe 使用[StronglyTypedResourceBuilder.VerifyResourceName() 方法](http://msdn.microsoft.com/en-us/library/ms145952.aspx)实现的规则。我将复制 MSDN 库所说的内容：

> 如果 key 参数为空字符串 ("")，则返回由单个下划线字符 (_) 组成的字符串。如果 key 参数不是空字符串，VerifyResourceName 方法会根据 provider 参数指定的语言将字符串中的每个字符与一组无效标记进行比较。字符串中的任何无效字符都将替换为下划线字符。将被下划线替换的字符如下：
> 
> ' ' (空格), U+00A0 (不间断空格), '.' (句号), ',' (逗号), ';' (分号)、'|'、'~'、'@'、'#'、'%'、'^'、'&'、'*'、'+'、'-'、'/'、'\ ', '<', '>', '?', '[', ']', '(', ')', '{', '}', '"' (引号), ''' (撇号）， '：'， 和 '！'。
> 
> **注意**
> 强类型资源不允许使用语言关键字（例如 if、for 等）作为资源键名。但是，System.CodeDom 设计模式允许通过在关键字前面加上下划线字符来使用语言关键字。VerifyResourceName 方法调用 CreateValidIdentifier 方法来强制执行此设计。例如，如果您使用与语言关键字相同的资源名称，例如 for，则该名称在生成的强类型资源类中显示为 _for。

查看 StronglyTypedResourceBuilder 类的源代码，文档是准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:40:33.080

我不知道任何有关 Visual Studio 本身如何生成名称的文档，但我通常会假设它与 resgen.exe 用于独立构建的算法兼容，[此处](http://msdn.microsoft.com/en-us/library/ccec7sz1.aspx)记录了该算法。但是，所描述的算法不适用于您的示例（除非我误解了它，否则它会产生一个类名`cases._013._.colours`），因此 VS 不正确地实现它，或者 resgen 文档对于您描述的特定情况不准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T13:04:42.090

您可以应用于您的示例的简单规则是......

```
cases/2013.1/colours.xml 
```

1）将“/”替换为“。”

```
cases.2013.1.colours.xml 
```

2) 对于点分隔字符串中的每个项目，如果项目以数字开头，则在其前面加上下划线。

```
cases => cases
2013 => _2013
1 => _1
colours => colours
xml => xml 
```

3）重新组装字符串，用点分隔。

```
cases._2013._1.colours.xml 
```

# mysql - 如何使用 ORDER BY 在 SQL/MySQL 中查找行

> ID：14705215
> 
> 赞同：0
> 
> 时间：2013-02-05T10:24:24.037
> 
> 标签：mysql, sql, row, sql-order-by

我有一个表*用户*

```
Name     | Poin 
================== 
user1    | 20 
user2    | 30 
user3    | 80 
user4    | 60 
user5    | 10 
user6    | 85 
```

我有 SQL 查询

```
SELECT * 
FROM user 
ORDER BY poin 
```

看起来，数据序列基于点。

但是我需要的是这样的数据（比如我是user1）：

```
Position 1 : user6 - 85 point 
Position 2 : user3 - 80 point 
Position 3 : user4 - 60 point 
```

你是`position 5 : user1 - 20 point`

# 更新

我用这个 sql

> SELECT x.name, x.position
> FROM (SELECT t.user,
>             @rownum := @rownum + 1 AS position
>             FROM user t
>            JOIN (SELECT @rownum := 0) r
>            ORDER BY t.poin DESC) x
> WHERE x.user ='用户1'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:31:41.000

这将给出当前排名`user1`：

```
SELECT count(*) AS rank
FROM user
WHERE poin >= (SELECT poin FROM user WHERE name = 'user1') 
```

这个查询的小问题是，如果另一个用户有相同的分数，它将被分配相同的排名——它是否正确，这是值得怀疑的。

如果您只想为每个用户添加排名，请使用以下命令：

```
SELECT
    @rank:=@rank+1 AS rank,
    name,
    poin
FROM user,
    (SELECT @rank:=0) r
ORDER BY poin DESC 
```

您可以使用此查询的小变化来获取单个用户的排名，但避免出现相同的排名歧义问题：

```
SELECT *
FROM (
    SELECT
        @rank:=@rank+1 AS rank,
        name,
        poin
    FROM user,
        (SELECT @rank:=0) r
    ORDER BY poin DESC
) x
WHERE name = 'user1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:28:15.833

`select * from user order by poin desc`

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:22:57.097

以下代码：

```
SELECT count(*) AS rank 
FROM user 
WHERE poin >= (SELECT poin FROM user  WHERE name = 'user1') 
```

当 is 在不同的行中有双点时有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:31:40.500

```
SELECT  Name, 
        Poin, 
        @rowNum := @rowNum + 1 AS position
FROM    user
JOIN    (SELECT @rowNum := 0) r
ORDER BY poin; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:28:29.750

```
SELECT * FROM user ORDER BY poin DESC 
```

`ORDER`BY 关键字用于按指定列对结果集进行排序。

默认情况下，`ORDER BY`关键字按升序对记录进行排序。

如果要按降序对记录进行排序，可以使用`DESC`关键字。

### SQL ORDER BY 语法

```
SELECT column_name(s)
FROM table_name
ORDER BY column_name(s) ASC|DESC 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-05T10:28:34.160

```
SELECT  Name, 
        Poin, 
        @rowNum := @rowNum + 1 AS position
FROM    user
JOIN    (SELECT @rowNum := 0) r
ORDER BY poin DESC; 
```

# php - 可捕获的致命错误：stdClass 类的对象无法转换为字符串

> ID：14705218
> 
> 赞同：4
> 
> 时间：2013-02-05T10:24:29.377
> 
> 标签：php, json

我正在将数组从 php 转换为 json `json_encode()`。如果我为一个数组编码它，我可以解码它，但是当它是这样的时候：`array('a'=>array(0=>array(),1=>array()))`它返回`{"a":[[],[]]}`

当我解码它时，我收到以下错误

```
Catchable fatal error: Object of class stdClass could not be converted to string 
```

json源

json在[这里](http://pastebin.com/rLw4ABwS)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T10:28:01.397

用作`true`第二个参数`json_decode`

```
$arr = json_decode($your_array,true); // it will create array 
```

工作示例[http://codepad.viper-7.com/0Dxxm8](http://codepad.viper-7.com/0Dxxm8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:20:02.837

这是有效的 json 并且也可以工作它已经是一个 json 所以不需要解析这个 json

```
var json={};//copy json from http://pastebin.com/rLw4ABwS

console.log(json); 
```

在小提琴[http://jsfiddle.net/rRNSN/上测试代码](http://jsfiddle.net/rRNSN/)

在控制台中检查它作为对象返回意味着它是有效的 json，如果它将是一个字符串，那么它需要使用`JSON.parse()`或 by进行解析`jquery.parseJSON()`。

# azure - 如何：通过 Windows 虚拟机连接到 Windows Azure SQL Server 数据库

> ID：14705220
> 
> 赞同：1
> 
> 时间：2013-02-05T10:24:32.507
> 
> 标签：azure, windows-authentication, azure-storage, azure-connect

嗨，大家好，

我在 Windows azure 中创建了 sql server 数据库。在我将此数据库与我的应用程序集成后，它工作正常。我想移动我的应用程序也是 Windows azure 虚拟机。我为此创建了所需的环境（意味着安装 java 和 tomcat）。并且还允许 azure sql server 数据库中的 IP 地址.但它显示 **`Connect open connection error`**

在连接数据库时。我还允许在有线墙设置中使用端口号，但我仍然无法连接数据库。

请提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:40:18.580

从您的问题来看，您使用的是哪个数据库有点不清楚-

如果您使用“Windows Azure SQL 数据库”（即 PaaS 版本），则需要确保通过 Windows Azure 管理门户将服务器的防火墙配置为允许 Windows Azure 服务，然后，当然，您需要尝试连接时使用服务器的完全限定名称（即`ABCD.database.windows.net`）

如果您已将 SQL Server 部署为 IaaS 上的 VM，则有两个选择 - 为 VM 定义一个端点以向外界打开端口 1433（或任何其他映射到 1433 的端口），然后使用云服务的 DNS条目以连接到数据库或定义一个虚拟网络，您将在其上部署数据库 VM 和应用程序 VM。如果你做后者，你将能够使用它的私有 IP 来引用数据库。

[这](http://yossidahan.wordpress.com/2012/06/07/connecting-to-sql-server-on-an-azure-virtual-machine/)可能有点用

# php - PHP 编辑 mp4 文件元数据以将标题移动到开头，因此流从开头开始

> ID：14705221
> 
> 赞同：0
> 
> 时间：2013-02-05T10:24:35.410
> 
> 标签：php, metadata, mp4

我有很多 mp4 文件需要由网络播放器完全加载，才能开始播放。这些 mp4 文件的元数据可能不是在开始时，而是在编码时结束。

有没有办法通过php解决这个问题？移动元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:34:08.607

您可以使用[qt-faststart](http://multimedia.cx/eggs/improving-qt-faststart/) ( [google search](https://www.google.com/search?q=qt-faststart) ) 实用程序来调整您的 MPEG-4 文件。此实用程序将元信息从文件末尾移动到开头。此实用程序“修复”的 MPEG-4 文件几乎立即启动，无需基于媒体播放器/插件/闪存的播放器首先寻找文件结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T09:28:42.443

我正在使用：

```
$qtConvRes = shell_exec("qt-faststart " . escapeshellcmd($ffmpegFullConv["fullNewFilename"]) . "-t.mp4 " . escapeshellcmd($ffmpegFullConv["fullNewFilename"]) . ".mp4"); 
```

尝试。

# java - 打印矢量

> ID：14705223
> 
> 赞同：0
> 
> 时间：2013-02-05T10:24:40.247
> 
> 标签：java, vector

我的 Vector 打印有问题：我有这个 Vector：

```
Vector<StructRicetta> Ricetta=new Vector<StructRicetta>(); 
```

StructRicetta 类：

```
public class StructRicetta {
    String nomeric;
    int n;
    Vector<String> ingrediente=new Vector<String>();
    Vector<String> quantita=new Vector<String>();
    Vector<Boolean> facoltativo=new Vector<Boolean>();
    String preparazione;
} 
```

我从文件中读取了这个结构的值。在阅读器函数中，我返回一个 StructRicetta 类型并将其添加到向量中：

```
Ricetta.add(Myclass.reader()); 
```

现在我如何打印结果？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:27:16.007

您将不得不向您的类添加一个[toString()](https://stackoverflow.com/questions/3615721/how-to-use-the-tostring-method-in-java)方法，然后遍历`Vector`s.

也许迭代并将每个条目添加到[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)，并使用逗号或类似的分隔？[Apache Commons StringUtils.join()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#join%28java.util.Collection,%20java.lang.String%29)将在一次调用中为您完成此操作。

笔记。`Vector`这些天基本上不推荐使用（`synchronised`默认情况下它的方法，这有点浪费），你应该看看[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)或类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:28:00.733

一般来说，如果你想从一个对象而不是内存地址打印出有用的东西，你需要覆盖 public String toString() 函数，然后使用 System.out.println(that object) 来查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:37:52.050

请注意，Vector 实现了 List，并遵循 List 的 toString 规则。在编写迭代 Vector 的代码之前，首先测试它的 toString 是否满足您的要求。

为了让它有用，你需要给 StructRicetta 一个好的 toString 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:29:16.840

首先我会覆盖`toString`你的 tructRicetta 类的方法，而不是像这样迭代你的 Vector：

```
for( StructRicetta rec: Ricetta){
     System.out.println(rec);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:28:45.813

你可以在你的类中添加一个`toString()`方法`StructRicetta`，然后调用

```
System.out.println(Ricetta); 
```

将 Vector 的内容打印到控制台。

# sql - 插入 CLOB 非常非常慢

> ID：14705224
> 
> 赞同：3
> 
> 时间：2013-02-05T10:24:40.217
> 
> 标签：sql, oracle, plsql, clob, varchar2

`'TinyString'`与 VARCHAR2 相比，在将字符串（只是示例字符串）插入存储在行 CLOB 中时，我遇到了显着的性能下降。我的理解是，在启用了 STORAGE IN ROW 的情况下，将 < 4000 字节的数据存储到 CLOB 中时，数据的存储方式与 VARCHAR2 相同（除非它“溢出”4000 字节），并且性能不会显着下降。但是，我的基准测试程序* 表明将相同的数据插入 CLOB比插入 VARCHAR2**慢 15 倍。**

看看下面的代码：

我有许多表，每个表都有一个类似于下面的 COMPOUND TRIGGER：

```
CREATE OR REPLACE TRIGGER mdhl_basic_trigger_compound
  FOR INSERT OR UPDATE OR DELETE ON target_table

  COMPOUND TRIGGER TYPE EVENTS_HIST IS TABLE OF log_table%ROWTYPE INDEX BY PLS_INTEGER;
                                                coll_events_hist EVENTS_HIST;
                                                ctr PLS_INTEGER := 0;
                                                my_bgroup VARCHAR2(3);

  BEFORE EACH ROW IS    
    BEGIN

      IF INSERTING OR UPDATING THEN
        my_bgroup  := :NEW.BGROUP;
      ELSE
        my_bgroup  := :OLD.BGROUP;
      END IF;

      ctr := ctr + 1;
      coll_events_hist(ctr).BGROUP := my_bgroup;
      coll_events_hist(ctr).TABLE_NAME := 'BASIC_MDHL';
      coll_events_hist(ctr).EVENT_TS := current_timestamp;         
      coll_events_hist(ctr).EVENT_RAW := 'TinyString';

  END BEFORE EACH ROW;

  AFTER STATEMENT IS 
    BEGIN
      FORALL counter IN 1 .. coll_events_hist.count() 
           INSERT INTO log_table VALUES coll_events_hist(counter); 
  END AFTER STATEMENT; 
END mdhl_basic_trigger_compound; 
```

在对 进行任何操作时`target_table`，上述触发器会将`coll_events_hist`类型中填充的数据存储到`log_table`中，其定义方式如下：

```
CREATE TABLE "USERNAME"."LOG_TABLE" 
   (  "BGROUP" VARCHAR2(3) NOT NULL ENABLE, 
        "TABLE_NAME" VARCHAR2(255) NOT NULL ENABLE, 
      "EVENT_TS" TIMESTAMP (7) DEFAULT current_timestamp, 
      "EVENT_RAW" CLOB
   ) 
  SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("EVENT_RAW") STORE AS BASICFILE "EV_RAW_SEG"(
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 16384 PCTVERSION 5
  CACHE 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
```

我的设置是：Windows 7 SP1，Oracle 11g

*我的基准测试程序迭代 10 次，每次迭代更新 target_table 上的 21k 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:38:12.127

在您的情况下，“tinystring”总是<32767？

您的时间将浪费在 FORALL 部分查找您制作的所有临时吊球。

您会发现在 for each row 部分中插入会获得更好的性能：

例如在我的测试系统上使用你的 lob 触发器：

```
SQL> insert into target_Table select 'ABC' from dual connect by level <= 10000;

10000 rows created.

Elapsed: 00:00:10.49 
```

与触发器为：

```
SQL> CREATE OR REPLACE TRIGGER mdhl_basic_trigger
  2    before INSERT OR UPDATE OR DELETE ON target_table for each row
  3  declare
  4
  5  my_bgroup VARCHAR2(3);
  6
  7    v_timer2 number := 0;
  8    v_timer number;
  9  BEGIN
 10
 11        IF INSERTING OR UPDATING THEN
 12          my_bgroup  := :NEW.BGROUP;
 13        ELSE
 14          my_bgroup  := :OLD.BGROUP;
 15        END IF;
 16
 17        INSERT INTO log_table VALUES(my_bgroup, 'BASIC_MDHL', current_timestamp, 'TinyString');
 18
 19  END mdhl_basic_trigger;
 20  /

SQL> insert into target_Table select 'ABC' from dual connect by level <= 10000;

10000 rows created.

Elapsed: 00:00:01.18 
```

如果你知道你的弦总是<32k，你可以保持forall来获得速度提升，如果你创建你的触发器：

```
SQL> CREATE OR REPLACE TRIGGER mdhl_basic_trigger_compound
  2    FOR INSERT OR UPDATE OR DELETE ON target_table
  3
  4     COMPOUND TRIGGER
  5
  6     type events_rec is record (BGROUP VARCHAR2(3),
  7          TABLE_NAME VARCHAR2(255) ,
  8        EVENT_TS TIMESTAMP (7),
  9        EVENT_RAW varchar2(32767));
 10     TYPE EVENTS_HIST IS TABLE OF events_rec INDEX BY PLS_INTEGER;
 11     coll_events_hist EVENTS_HIST;
 12     ctr PLS_INTEGER := 0;
 13     my_bgroup VARCHAR2(3);
 14
 15  v_timer2 number := 0;
 16  v_timer number;
 17    BEFORE EACH ROW IS
 18      BEGIN
 19
 20        IF INSERTING OR UPDATING THEN
 21          my_bgroup  := :NEW.BGROUP;
 22        ELSE
 23          my_bgroup  := :OLD.BGROUP;
 24        END IF;
 25
 26        ctr := ctr + 1;
 27        coll_events_hist(ctr).BGROUP := my_bgroup;
 28        coll_events_hist(ctr).TABLE_NAME := 'BASIC_MDHL';
 29        coll_events_hist(ctr).EVENT_TS := current_timestamp;
 30        coll_events_hist(ctr).EVENT_RAW := 'TinyString';
 31
 32    END BEFORE EACH ROW;
 33
 34    AFTER STATEMENT IS
 35      BEGIN
 36  v_timer := dbms_utility.get_time;
 37        FORALL counter IN 1 .. coll_events_hist.count()
 38             INSERT INTO log_table VALUES coll_events_hist(counter);
 39  v_timer2 := v_timer2 + (dbms_utility.get_time - v_timer);
 40             dbms_output.put_line(v_timer2/100);
 41    END AFTER STATEMENT;
 42  END mdhl_basic_trigger_compound;
 43  /
SQL> insert into target_Table select 'ABC' from dual connect by level <= 10000;

10000 rows created.

Elapsed: 00:00:00.39 
```

即推迟 lob 操作直到插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:55:34.613

即使 a`CLOB`是内联存储的，与标准相比也存在一些开销`VARCHAR2`，如[LOB 性能指南的附录 C 中所述](http://www.oracle.com/technetwork/articles/lob-performance-guidelines-128437.pdf)。

当 a 的长度`LOB`小于 3964 字节时，它将与 36 字节的标头内联存储。长度为 X的 A`VARCHAR2`将存储为 X 字节的数据，并额外增加一到两个字节的开销。

我认为这种开销会进入内存，这意味着 PLSQL`CLOB`对象的效率将低于`VARCHAR2`同等大小的对象。

34-35 个额外字节将加起来，如以下脚本所示：

```
SQL> create table test_var(a varchar2(4000));

Table created

SQL> create table test_clob(a clob);

Table created

SQL> SET SERVEROUTPUT ON
SQL> DECLARE
  2    l_time TIMESTAMP := systimestamp;
  3  BEGIN
  4    FOR i IN 1..100000 LOOP
  5      INSERT INTO test_var VALUES (rpad('x', 1000, 'x'));
  6    END LOOP;
  7    dbms_output.put_line(systimestamp - l_time);
  8  END;
  9  /
+000000000 00:00:16.180299000

SQL> DECLARE
  2    l_time TIMESTAMP := systimestamp;
  3  BEGIN
  4    FOR i IN 1..100000 LOOP
  5      INSERT INTO test_clob VALUES (rpad('x', 1000, 'x'));
  6    END LOOP;
  7    dbms_output.put_line(systimestamp - l_time);
  8  END;
  9  /
+000000000 00:00:27.180716000 
```

插入 CLOB 需要更多时间，这可以通过消耗的额外空间来解释：

```
SQL> EXEC dbms_stats.gather_table_stats(USER, 'TEST_VAR');

PL/SQL procedure successfully completed.

SQL> EXEC dbms_stats.gather_table_stats(USER, 'TEST_CLOB');

PL/SQL procedure successfully completed.

SQL> select blocks, table_name from user_tables where table_name like 'TEST_%';

    BLOCKS TABLE_NAME
---------- ------------------------------
     33335 TEST_CLOB
     28572 TEST_VAR 
```

当我们插入较小的字符串时，问题会更加严重：

```
-- after TRUNCATE tables
SQL> DECLARE
  2    l_time TIMESTAMP := systimestamp;
  3  BEGIN
  4    FOR i IN 1..1000000 LOOP
  5      INSERT INTO test_var VALUES (rpad('x', 10, 'x'));
  6    END LOOP;
  7    dbms_output.put_line(systimestamp - l_time);
  8  END;
  9  /

+000000000 00:00:51.916675000

SQL> DECLARE
  2    l_time TIMESTAMP := systimestamp;
  3  BEGIN
  4    FOR i IN 1..1000000 LOOP
  5      INSERT INTO test_clob VALUES (rpad('x', 10, 'x'));
  6    END LOOP;
  7    dbms_output.put_line(systimestamp - l_time);
  8  END;
  9  /

+000000000 00:01:57.377676000

-- Gather statistics

SQL> select blocks, table_name from user_tables where table_name like 'TEST_%';

    BLOCKS TABLE_NAME
---------- ------------------------------
      7198 TEST_CLOB
      2206 TEST_VAR 
```

# ruby - 自己的 RubyGems：内部路径

> ID：14705239
> 
> 赞同：0
> 
> 时间：2013-02-05T10:25:28.400
> 
> 标签：ruby, path, rubygems, gem

我实际上正在编写自己的 RubyGem。

如何获得 RubyGem 的路径，即要求？

```
require "./mygeminternally.rb"
# => the path (actually "./") must be the path to the internals of the gem while it is being compiled 
```

只是`Dir.getwd`吗？我需要一种方法来为我提供 gem 的路径，以便我可以使用内部模板。请注意，在编译 gem 时必须访问模板或配置文件，这是否像选择正确的路径一样容易？

你的，

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:36:34.153

在 gem 中，您应该始终使用相对于您的`lib`目录的路径，并且永远不要尝试评估绝对路径，因为这可能会在某些极端情况下导致问题。

当我说`lib`我实际上是指添加到文件中的目录之一时`require_paths`，`.gemspec`但在几乎所有情况下，这都设置为`['lib']`.

这一切都在[RubyGems 指南](http://guides.rubygems.org/patterns/#loading-code)中进行了详细描述（正如@an4rco 在他的评论中提到的那样——给他一个赞成票）。

# cocoa - 在可可应用程序中检测 Enter/Return 键的最佳方法？

> ID：14705240
> 
> 赞同：3
> 
> 时间：2013-02-05T10:25:32.977
> 
> 标签：cocoa, nsview, nstextview, nsevent

在我的可可应用程序中，我需要检查输入/返回键。为此我使用了下面的代码

```
if ((event.keyCode == 36) || (event.keyCode == 76) || (event.keyCode == 13))
{
// Some code after checking Enter key
} 
```

有人可以建议这是正确的方法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T22:26:00.067

不太正确的方法-您将键码与字符码混淆了。正如 Peter Hosey 在他的评论中指出的那样，13 是 W 键的**键**码。

也就是说，`if ((event.keyCode == 36) || (event.keyCode == 76))`检查**键**代码是否是 Return 或 Enter 键。

如果您想检查**字符**代码，那么您可以执行以下操作：

```
NSString *chars = event.charactersIgnoringModifiers;
unichar aChar = [chars characterAtIndex: 0];
if (aChar == 13 || aChar == 3) 
```

......你会得到同样的效果。

# ruby-on-rails - 是否应该为 Rails 中的关联制作表格

> ID：14705243
> 
> 赞同：0
> 
> 时间：2013-02-05T10:25:35.533
> 
> 标签：ruby-on-rails, models, rails-migrations

我是 Rails 新手，有一个非常基本的问题。

在创建模型时，例如。我必须存储食谱及其步骤。现在我应该制作食谱表、步骤表和食谱步骤表，还是应该有食谱、步骤表并在食谱模型中定义 has_many :steps？

任何帮助都会很棒。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:37:30.783

您的数据库中始终需要有 3 个表。正如你所说`recipes` `steps`和`recipe_steps`

然后，您的模型有两个解决方案。第一个有 3 个模型：

```
class Recipe
  has_many :recipe_steps
  has_many :steps, through: :recipe_steps
end

class Step
  has_many :recipe_steps
  has_many :recipes, through: :recipe_steps
end

class RecipeStep
  belongs_to :step
  belongs_to :recipe
end 
```

第二个只有两个模型：

```
class Recipe
  has_and_belongs_to_many :steps
end

class Step
  has_and_belongs_to_many :recipes
end 
```

如果您不想管理`recipe_steps`表中的数据，您将使用第二种解决方案。但是如果你想在这个表中添加一些信息（例如价格或数量），你必须使用第一个解决方案。

在所有情况下，您都必须创建 3 个表。

您可以在此处找到更多信息：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

我希望这有帮助

# backbone.js - 在 BackboneJS 中从一个文件触发另一个文件的点击事件

> ID：14705244
> 
> 赞同：1
> 
> 时间：2013-02-05T10:25:42.650
> 
> 标签：backbone.js

在我的项目中，我无法从另一个主干视图触发在一个主干视图中注册的点击事件。实际上我有一个文件类型输入对用户隐藏，我需要触发文件类型输入。

```
var FileView = Backbone.View.extend({
 ....
 events : {
  "click .delete-image" : "deleteFile",
 }
 ....
});

var FilesView = Backbone.View.extend({
 ....
 events : {
  "click #attach" : "attachFile",
 },

 attachFile : function() {
  this.fileView.trigger("click .delete-image");
 }
 ....
}); 
```

但我试过这样事件没有被触发。这怎么可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:01:19.527

`events`散列附加到表示视图的 jquery 元素，而不是主干视图本身。所以你很可能不得不做这样的事情：

```
attachFile : function() {
  $('.delete-image', this.fileView.$el).trigger("click");
} 
```

但我不鼓励这种非模式，而是努力使用我们称之为事件聚合模式的东西。接下来，您可以找到一系列非常好的 SO 解决方案：

*   [在主干中从一个视图触发事件到另一个视图](https://stackoverflow.com/questions/7843278/fire-an-event-from-one-view-to-another-in-backbone)
*   [Backbone.js 全局事件](https://stackoverflow.com/questions/10042124/backbone-js-global-events)
*   [使用backbone.js在同一页面上的多个视图](https://stackoverflow.com/questions/9517234/multiple-view-on-same-page-with-backbone-js)

# python - django中的静态url路径设置

> ID：14705245
> 
> 赞同：2
> 
> 时间：2013-02-05T10:25:44.323
> 
> 标签：python, css, django, django-cms

我是 django 的新手，目前我正在学习并尝试使用 django-cms 构建一个基本站点。下面是我的项目文件夹结构和代码文件

```
project_folder
    manage.py 
    main_folder 
         static
             css
                new-styles.css
             js
                new-styles.js
         templates                      
             base.html
             home.html
         media
             pic_1.gif 
             .....
         settings.py
         urls.py
         ....... 
```

**设置.py**

```
import os
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__))
DEBUG = True
MEDIA_ROOT = os.path.join(PROJECT_DIR,'media')
MEDIA_URL = '/media/'
STATIC_ROOT = os.path.join(PROJECT_DIR,'static')
STATIC_URL = '/static/'
TEMPLATE_DIRS = (os.path.join(PROJECT_DIR,'templates'))
TEMPLATE_CONTEXT_PROCESSORS = (
       'django.contrib.auth.context_processors.auth',
       'django.core.context_processors.i18n',
       'django.core.context_processors.request',
       'django.core.context_processors.media',
       'django.core.context_processors.static',
       'django.core.context_processors.debug',
       'django.contrib.messages.context_processors.messages',
       'cms.context_processors.media',
       'sekizai.context_processors.sekizai',
)
......
....... 
```

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf import settings

urlpatterns = patterns('',
            url(r'^admin/', include(admin.site.urls)),
            url(r'^$', ...........),               
)

if settings.DEBUG:
    urlpatterns = patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
    url(r'', include('django.contrib.staticfiles.urls')),
) + urlpatterns 
```

**base.html**

```
{% load cms_tags sekizai_tags menu_tags %}
<html>
  <head>
    <title>{%block "title" %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/new-styles.css">
  {% render_block "css" %}
  </head> 
  <body>
  {% cms_toolbar %}
    {% block "base_content" %}
    {% endblock %}
  {% render_block "js" %}  
  </body>
</html> 
```

**主页.html**

```
{% extends "base.html" %}
{% load cms_tags %}
{% block "title" %}Welcome to Services{% endblock %}
{% block "base_content" %}
  <p>Hi this is paragraph</p>
  <img src="{{ MEDIA_URL }}images/promo3.jpg" />
 {% placeholder "number_one" %} 
 {% endblock %} 
```

**新样式.css**

```
body {  
    padding:0px; margin:0px; margin-top:40px;
        background-color:#b0c4de;
     }
p {
      background-color:#e0ffff;
  } 
```

以上是我完整的项目结构和代码文件，但我的实际问题是`new-styles.css`文件无法正常工作，即使我在文件中编写了一些 css 代码，它也没有链接到模板，所以任何人都可以告诉我有什么问题吗？为什么`base.html`模板文件无法访问该`new-styles.css`文件，是`link`标签中给出的路径错误还是标签中的路径设置`settings.py`错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:41:20.073

**网址.py**

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

from project_name import settings

admin.autodiscover()

urlpatterns = patterns('',
    .....................
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns() 
```

# python - 在保持上下文的同时使用 iterparse 的最佳实践？

> ID：14705249
> 
> 赞同：0
> 
> 时间：2013-02-05T10:25:49.730
> 
> 标签：python, xml, xml-parsing, iterparse

在[我提出关于 iterparse 一般用法的问题](https://stackoverflow.com/questions/14670792/iterparse-fails-to-parse-a-field-while-other-similar-ones-are-fine)（以及[JF Sebastian](https://stackoverflow.com/users/4279/j-f-sebastian)的回答）之后，我将重新组织我的代码以解析 nessus XML 结果文件。引用前面的问题，文件结构是

```
<ReportHost host="host1">
  <ReportItem id="100">
    <foo>9.3</foo>
    <bar>hello</bar>
  </ReportItem>
  <ReportItem id="200">
     <foo>10.0</foo>
     <bar>world</bar>
</ReportHost>
<ReportHost host="host2">
   ...
</ReportHost> 
```

换句话说，很多主机（`ReportHost`）有很多要报告的项目（`ReportItem`），而后者有几个特征（`foo`，`bar`）。我将着眼于为每个项目生成一行，其特点是：

```
host1,id="100",foo="9.3",bar="hello"
host1,id="200"foo="10.0",bar="world"
host2,... 
```

我了解如何从 XML 文件中提取给定的文件（这实质上是我之前问题的答案）。我需要将这些提取的字段保留在上下文中（= 我需要知道它们`ReportHost`与哪些`ReportItem`相关）。我的想法是使用一个标记，一个变量会告诉我我是在 a`ReportHost`还是`ReportItem`block 中并从那里决定 ( `if inReportHost: ...`) - 不过，我担心这不是使用 iterparse 导航 XML 的正确方法。

是否有“最佳实践”文件可以参考？

**编辑**：改进后的评论示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:27:28.710

当通过 遍历项目`etree.iterparse()`并通过 检测它们时`end`，您必须保留中间元素才能显示它们属于哪个主机。

在您的示例中，前两个解析的元素是`<ReportItem id="100">`and `<ReportItem id="200">`。`<ReportHost host="host1">`接下来。这应该是您连接保留的中间信息并`ReportHost`立即打印详细信息的地方。

另一种方法是解析文档两次，第一次用于收集`ReportHost`数据，第二次 - 打印每个`ReportItem`细节。

您可以分析这些方法以找到最适合您的方法。

# c++ - 在 LineEdit C++ Qt 设计器中显示文本

> ID：14705250
> 
> 赞同：0
> 
> 时间：2013-02-05T10:26:08.407
> 
> 标签：c++, qt-designer, qlineedit

我在 Qt Designer 中有两个窗口，我想用文本打开一个 .txt 文件。此代码属于第二个窗口（pacientes.ui）

![pacientes.ui](../Images/26e906e8e2c339c09b0c651c09b483d4.png)

我想在第一个窗口（ventana.ui）中显示三个 LineEdit 中的三行文本（文件 .txt 它有三行文本）。

![主窗口](../Images/a899fdd08906516e158f5be9d92668c4.png)

```
pacientes::pacientes(QWidget *parent)
: QDialog(parent),
ui(new Ui::pacientes)
{
ui->setupUi(this);
QDir path("C:/Users/Jaime/Desktop/interfaz/pacientes");
QStringList files = path.entryList(QDir::Files);

QComboBox comb;
qDebug()<<files;

ui->pacienteLista->addItems(files);
connect(this, SIGNAL( customSignalSetText(QString)), /*How I can put the variable?*/, SLOT(      customSlotSetText(QString)) ); 
}

pacientes::~pacientes()
{
   delete ui;
} 
```

Venatana1 和 Pacientes 在 QtDesigner 中定义

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:01:02.300

你应该打电话

```
ui->nameEdit->setText(texto); //here it is the problem
ui->diagEdit->setText(names);
ui->dateEdit->setDate(fechas); 
```

在第一个窗口（ventana）中，但现在您在 pacientes 内调用它。因此，您必须将文件的路径从 pacientes 发送到 ventana 并在 ventana 中设置文本。

在 pacientes 你应该有这样的东西：

```
void pacientes::on_pacienteAceptar_clicked()
{
    QString pathToDirectory = "C://Users//Jaime//Desktop//interfaz//pacientes";
    QString currentFileName = ui->pacienteLista->currentText();
    QString pathToFile = QString("%1//%2").arg(pathToDirectory, currentFileName);
    emit customSignalSetText( pathToFile );
} 
```

在ventana 中，您创建了一个可以完成所有工作的自定义插槽：

```
void ventana::customSlotSetText( QString const & text )
{
    if(!text.isEmpty())
    {
        QFile file(text);
        ...
    }
} 
```

在您拥有 pacientes 和 ventana 的应用程序中，您可以将来自 pacientes 的自定义信号连接到 ventana 中的自定义插槽。

编辑：此信号槽连接必须发生在您可以访问 pacientes 实例和 ventana 实例的地方。

EDIT2：`connect`也必须发生在`QObject`.

```
int main(...)
{
    ...
    ventana1 w;
    w.show();
    pacientes pacientesObj(w);
    ...
} 
```

在的构造函数中`pacientes`：

```
pacientes::pacientes( ventana1 receiver, QWidget* parent )
{
    ...
    connect( this, SIGNAL( customSignalSetText( QString ) ), &receiver, SLOT( customSlotSetText( QString ) ) );
} 
```

请注意，您不能在类之间连接信号和插槽，只能在这些类的实例之间连接。

至于发出信号，看[这里](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。它可能是以下情况之一：（1）您没有使用`Q_OBJECT`宏或（2）您没有正确声明信号（使用`signals:`）。如果是第一次，您将不得不`qmake`再次运行。

# git - DesGit - 合并分支所需的来源

> ID：14705253
> 
> 赞同：0
> 
> 时间：2013-02-05T10:26:20.910
> 
> 标签：git

我正在尝试将分支合并到我创建的功能分支中。

掌握 -`featureBranchCurrent`

发展 -`featureBranchDesired`

所以我试图`featuredBranchDesired`融入`featuredBranchCurrent`

开启时`featureBranchCurrent`：

git 合并`featureBranchDesired`

但是 git 要求我使用 git merge

```
origin/featureBranchDesired 
```

这是正确的，如果是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:33:17.200

你有没有在`featureBranchDesired`本地检查过？

如果没有，则没有具有该名称的本地分支，因此您需要先创建它（通过使用 签出`git checkout featureBranchDesired`），或者说您要从具有该名称的远程分支合并，即`origin/featureBranchDesired`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:32:40.870

你只需要使用：

```
git merge origin/featureBranchCurrent 
```

如果您从远程位置提取 featureBranchCurrent。

如果你想将你的 featureBranchDesired 分支合并到你的 featureBranchCurrent 中，那么你需要这样做：

```
git checkout featureBranchCurrent
git merge featureBranchDesired 
```

此时，您的 featureBranchCurrent 将合并到 featureBranchDesired 的更改中。

# json - 在 solr 中从 JSON 导入数据

> ID：14705258
> 
> 赞同：9
> 
> 时间：2013-02-05T10:26:38.683
> 
> 标签：json, solr

目前我在 solr 中使用 XML 文件。我使用 DataimportHandler 和 XPathentityProcessor 索引 xml 文件的数据。

现在我想从 json 文件中导入数据。

有什么例子吗？

问候， 萨加尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T10:41:59.247

你需要的是类似

```
curl 'http://localhost:8983/solr/update/json?commit=true' --data-binary @books.json -H 'Content-type:application/json' 
```

取自示例。

来源：[https ://wiki.apache.org/solr/UpdateJSON](https://wiki.apache.org/solr/UpdateJSON)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T12:07:05.457

DataImportHandler 不允许您使用 JSON 作为源。唯一的方法是使用可以本地处理 JSON 的更新处理程序。但这必须在[Solr 期望的 JSON 结构](https://wiki.apache.org/solr/UpdateJSON)中（散列数组或命令/散列的散列）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T08:07:53.307

如果您不想使用 curl 命令，可以直接在浏览器上触发命令并获得所需的结果：

`http://localhost:8983/solr/update/json?commit=true --data-binary @books.json -H 'Content-type:application/json'`

将 json 文件放在 /example/exampledocs 文件夹中。这是 solr 中的默认目录路径。如果您使用的是 java 或 php 等，那么您可以使用几个类和方法，然后您就不需要提及上面的整个命令。这是您要求的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-14T18:14:51.940

您还可以通过在 curl 命令的 url 中包含 ?commit=true 语句来更新您的文档，就像这样。

```
curl -X POST -H "Content-Type: application/json" -u "{usernamne}":"{password}" "https://your_host/solr/your_collection/update/json?commit=true" --data-binary @/path/to/your/data/your_data.json 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-20T10:31:25.207

如果您想从 json 格式导入部分或整个集合，那么还有另一种选择。

我写了一个java工具：[https ://github.com/freedev/solr-import-export-json](https://github.com/freedev/solr-import-export-json)

这是一个 java 应用程序，它使用`SolrJ`. 每个文档都必须是一个 json 对象，并且在您要导入的文件中，您必须有一个行列表，而每行都是一个 json 对象。

```
{ "id": 1, "date": "20160101T00:00:00", "text": "some text" } 
{ "id": 2, "date": "20160102T00:00:00", "text": "some text" } 
{ "id": 3, "date": "20160103T00:00:00", "text": "some text" } 
```

嵌套文档我没试过，json文档的key应该就是solr字段的名字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-05T14:43:13.743

您可以使用 REST api 将数据发送到 Solr。请使用此路径：

```
localhost:8983/solr/simple2/update?commit=true
//(simple2 is the core name and localhost:8983 is server path.) 
```

你必须定义

```
:content_type => 'application/json' 
```

在请求标头中。连同它，您可以使用 post 请求将 json 文件/数据发送到 solr。

有关更多信息，您可以访问[http://geekdirt.com/blog/indexing-in-solr-using-json-and-rest-apis/](http://geekdirt.com/blog/indexing-in-solr-using-json-and-rest-apis/)

# canvas - 扩展或增加水平滚动条宽度

> ID：14705264
> 
> 赞同：0
> 
> 时间：2013-02-05T10:26:52.940
> 
> 标签：canvas, eclipse-plugin, swt, scrollbar, eclipse-rcp

我使用下面的代码来组合两个画布。

```
public static void main(String[] args) {
final Display display = new Display();
final Shell shell = new Shell(display);
shell.setLayout(new FillLayout());
shell.setText("Canvas Test");

Composite mainComp = new Composite(shell, SWT.NONE);
GridLayout layout = new GridLayout(2, false);

layout.horizontalSpacing = 0;

mainComp.setLayout(layout);
mainComp.setLayoutData(new GridData(SWT.BEGINNING, SWT.TOP, true, true));

final Canvas hwCanvas = new Canvas(mainComp, SWT.NO_REDRAW_RESIZE | SWT.V_SCROLL);
hwCanvas.setForeground(display.getSystemColor(SWT.COLOR_WHITE));
hwCanvas.setBackground(display.getSystemColor(SWT.COLOR_BLACK));
hwCanvas.setLayoutData(new GridData(SWT.BEGINNING, SWT.TOP, false, true));
hwCanvas.getVerticalBar().setVisible(false);

final Canvas traceCanvas = new Canvas(mainComp, SWT.NO_REDRAW_RESIZE | SWT.H_SCROLL | SWT.V_SCROLL);
traceCanvas.setForeground(display.getSystemColor(SWT.COLOR_WHITE));
traceCanvas.setBackground(display.getSystemColor(SWT.COLOR_BLACK));
traceCanvas.setLayoutData(new GridData(SWT.BEGINNING, SWT.TOP, true, true));

shell.open();
while (!shell.isDisposed()) {
    if (!display.readAndDispatch()) {
    display.sleep();
    }
}
display.dispose(); 
```

}

是否可以增加水平滚动条的宽度（长度），如此处所示 [快照](https://docs.google.com/file/d/0B3pxBGD-v-ycVjRYVjBYVnhBMTQ/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:41:00.787

尝试将滚动条移动到包含两个画布组件的组件上，这样您的水平滚动条就可以控制它们的总宽度：

```
Composite mainComp = new Composite(shell, SWT.H_SCROLL | SWT.V_SCROLL);
:
final Canvas hwCanvas = new Canvas(mainComp, SWT.NO_REDRAW_RESIZE);
:
final Canvas traceCanvas = new Canvas(mainComp, SWT.NO_REDRAW_RESIZE); 
```

# c# - 从文本字段插入表格 - 空字段

> ID：14705266
> 
> 赞同：0
> 
> 时间：2013-02-05T10:26:56.723
> 
> 标签：c#, asp.net, sql-server-express

我有一些问题：下面的代码用新行更新了表格，但是这一行中的所有字段都是空的。我想将文本字段中的输入数据放入成员表中的新行中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Web.Configuration;

public partial class Default4 : System.Web.UI.Page
{
   protected void Page_Load(object sender, EventArgs e)
    {
        txtFirstName.Text = "";
        txtLastName.Text = "";
        txtAdress.Text = "";
        txtResidence.Text = "";
        txtEmail.Text = "";
    }
    protected void btnRegister_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(
            WebConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand("INSERT INTO Members(FirstName, LastName, Adress, Residence, Email) VALUES (@txtFirstName, @txtLastName, @txtAdress, @txtResidence, @txtEmail)", con);
        cmd.Parameters.AddWithValue("@txtFirstName", txtFirstName.Text);
        cmd.Parameters.AddWithValue("@txtLastName", txtLastName.Text);
        cmd.Parameters.AddWithValue("@txtAdress", txtAdress.Text);
        cmd.Parameters.AddWithValue("@txtResidence", txtResidence.Text);
        cmd.Parameters.AddWithValue("@txtEmail", txtEmail.Text);

        try
        {
            con.Open();
            cmd.ExecuteNonQuery();

            lblConfirm.Text = "Database updated, insert confirmed!";

            txtFirstName.Text = "";
            txtLastName.Text = "";
            txtAdress.Text = "";
            txtResidence.Text = "";
            txtEmail.Text = "";
        }
        finally
        {
            con.Close();
        }
    }
} 
```

如果我改变这一行：

```
SqlCommand cmd = new SqlCommand("INSERT INTO Members(FirstName, LastName, Adress, Residence, Email) VALUES (@txtFirstName, @txtLastName, @txtAdress, @txtResidence, @txtEmail)", con); 
```

对于这样的事情：

```
SqlCommand cmd = new SqlCommand("INSERT INTO Members(FirstName, LastName, Adress, Residence, Email) VALUES ('@txtFirstName', '@txtLastName', @txtAdress, @txtResidence, @txtEmail)", con); 
```

它会打印出一行这样的字段：| @txt名字 | @txt姓氏| [空] | [空] | [空] |

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:35:22.397

每次按下注册按钮时，都会`Page_Load`执行，清空文本框，然后`btnRegister_Click`执行。此时您的文本框是空白的。

您需要在 Page_Load 事件中添加一个检查

```
 if(!IsPostBack)
   {
      ... // code to empty the textboxes
   } 
```

[MSDN 上的 Page.IsPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:46:38.567

这里的问题....

```
 try
    {
        con.Open();
        cmd.ExecuteNonQuery();

        lblConfirm.Text = "Database updated, insert confirmed!";

        txtFirstName.Text = "";
        txtLastName.Text = "";
        txtAdress.Text = "";
        txtResidence.Text = "";
        txtEmail.Text = "";
    } 
```

^^^^^^ 重置这里的所有字段不会有任何区别。它会在每次回发后发生。

试试这个

```
if(!IsPostBack)
   {
            txtFirstName.Text = "";
            txtLastName.Text = "";
            txtAdress.Text = "";
            txtResidence.Text = "";
            txtEmail.Text = "";
   } 
```

因此，用户输入不会在按钮单击时重置为空。

这里有更好的方法来实现你的目标......

# django - 如何编写具有许多关系的模型类？

> ID：14705268
> 
> 赞同：1
> 
> 时间：2013-02-05T10:27:03.937
> 
> 标签：django, django-models

我有类人：

```
class Person(models.Model):
    name = ...
    [etc]
    client = models.BooleanField(default=True)
    image = models.ForeignKey(ImageData, null=True) 
```

此类包含人员数据和卖家数据。我有类图像。该模型包含客户图像数据和卖家图像数据。当卖家创建图像字段创建者必须是与该卖家的人员关系：

```
class ImageData(models.Model):
    creator = models.ForeignKey(Person)
    [etc] 
```

这些类定义在一个文件 models.py 中。当 ImageData 类首先是 manage.py 时说：

```
NameError: name 'Person' is not defined 
```

当类 Person 是第一个时：

```
NameError: name 'ImageData' is not defined 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:32:57.800

如果模型尚未定义，您可以将名称作为字符串，这样就不会出现此类错误。因此，将您的定义更新为

```
image = models.ForeignKey('ImageData', null=True) 
```

IE。报价`ImageData`。

从这里的文档[ForiegnKey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)

*如果需要在尚未定义的模型上创建关系，可以使用模型的名称，而不是模型对象本身：*

```
class Car(models.Model):
    manufacturer = models.ForeignKey('Manufacturer')
    # ...

class Manufacturer(models.Model):
    # ... 
```

# android - Activity 生命周期的可靠性（onPause 到 onDestory）

> ID：14705271
> 
> 赞同：5
> 
> 时间：2013-02-05T10:27:06.597
> 
> 标签：android, lifecycle

在多年信任生命周期之后，我做了一点挖掘。现在我不开心了。

我知道并阅读了很多关于`onStop`不能保证被调用的内容等。

我创建了一个带有 2 个 Activites 和一个自定义应用程序类的简单应用程序。我在每个可以找到的回调中都放了一个 Log.d()，并在带有 4.1 的 Galaxy S2 上播放。Activity A 在启动时启动，并在`onResume`它启动 Activity B 时启动。Activity B 有一个创建 Nullpointer 的 Button，否则它什么也不做。

现在让我担心/困惑的事情：

*   如果我在 buttonclick 上创建一个空指针，则应用程序崩溃并且在这两个活动中都不会发生回调

*   如果我按下电源按钮并关闭屏幕，如果活动的显示模式（纵向或横向）与设备的本机方向不匹配，活动将重新启动。我确实知道这一点以及如何覆盖它，但如果它破坏并重新启动我的活动，它会调用`onPause`并`isFinishing()`返回 false，但活动正在完成并重新启动。

*   如果上面没有发生，`onPause`即使应用程序不再可见，也只会被调用

*   在 A 中启动另一个活动调用`onPause`，然后创建 B 到`onResume`然后调用`onStop`A。现在我在 .App 类中跟踪我的活动，如果我在 A 中取消注册`onPause`并在 B 中注册 B `onResume`，将有一个毫秒的时间间隔没有注册活动. 如果我想在没有活动时关闭某些服务，它会一直发生。但是，如果我取消注册它`onStop`（所以它们会重叠），当用户点击电源按钮并且服务（或线程或其他）继续运行并耗尽电池电量时，它将永远不会被取消注册。

我现在使用 android 已经有一段时间了，我正在尝试实现一个相当复杂的设计，或者说是防弹设计。但是几乎不可能跟踪我的活动发生了什么。

*   必须通过 Intent.ACTION_SCREEN_OFF 检测到断电，但这会在它已经关闭时发生。在那之前唯一的事情就是onPause。

*   主页按钮... onUserInteraction 和暂停/停止的某种组合

很难简单地确定我的应用程序（不仅仅是一个活动）何时不再被使用并置于后台，何时它只是在活动之间转换或何时被系统关闭。因为 .App 类没有终止回调，因为`onTerminate()`仅在模拟器中使用，所以文档说。

也许我只是没有看到树林中的森林......我们将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:40:23.073

Android 生命周期可能非常混乱，到目前为止，我发现只有一种方法可以让您对周围发生的事情有一个不错的了解。

你设计你的应用程序的方式总是假设你可以在任何时刻被杀死而没有像`onDestroy()`被调用这样的回调，因为不能保证它们会被调用。

检查一个活动是否进入后台的一种简单方法是使用一个简单的标志：

```
boolean movingInApp = false;
....
movingInApp = true;
Intent intent...
.....
public void onPause() {
    if(movingInApp) {
        //Called because we're moving to another Activity in our own app
    }
}

public void onResume() {
    movingInApp = false;

} 
```

通过在启动任何意图等之前将值设置为`movingInApp`，`true`您可以跟踪`onPause()`调用的原因。请记住`false`稍后在您的`onResume()`方法中再次将其设置为。如果系统让您的应用程序进入后台，这将是错误的，并且您知道您的应用程序是由其他人而不是您移动到后台的。

至于发生异常时不调用任何内容，只要有未捕获的异常，Android 就会简单地杀死您的整个 App 进程。您的应用程序只是停止运行，例如当您强制退出计算机上的程序时。系统杀戮是完全没有任何警告的。不再执行任何代码。

# google-maps - 在 Windows 8 Metro 应用程序上实现谷歌地图

> ID：14705274
> 
> 赞同：0
> 
> 时间：2013-02-05T10:27:15.627
> 
> 标签：google-maps, windows-phone-8

[Windows 手机上的谷歌地图](http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/)

上述链接使开发人员能够在 Windows 8 Metro 应用程序上实现 Google 地图，但通过新项目>已安装>模板>JavaScript>商店

而我希望在 Visual C# >Windows Store 中也能同样工作

知道如何将上述链接中的项目实施到我的商店应用程序中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:44:00.273

您可以简单地编写一个 C# 类库项目并将 dll 文件导入您的 javascript 项目。您只需从 javascript 您的入口点开始。

这就是我从 microsoft hellas windows store head 那里得到的答案。

# vba - Excel 在一个单元格中捕获更改并在另一个工作表中复制更改

> ID：14705280
> 
> 赞同：0
> 
> 时间：2013-02-05T10:27:32.680
> 
> 标签：vba, excel

我的工作簿中有多张工作表。每张纸的单元格（A1）具有完全相同的文本“（月）（年）报告”。每个月只有月份和年份值发生变化。例如：对于 2 月，文本将是“2013 年 2 月报告”。如何在一张纸上进行更改并将相同的更改复制到剩余的纸上？我知道如何复制单元格，但这样代码就会变得冗长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:36:36.267

您可以轻松地迭代所有工作表

假设您已经为当前工作表完成了它

```
Sub copyAOne()
    Dim ws As Worksheet
    Dim newValue As Range
    set newValue = ActiveSheet.Range("A1")
    For Each ws In Worksheets
        ws.Range("A1") = newValue
    Next ws
**PS** Please provide the code you tried in your question, and see if we can optimize it as well
end sub 
```

# haskell - haskell，如何将 POSIXTime 类型转换为字符串

> ID：14705282
> 
> 赞同：1
> 
> 时间：2013-02-05T10:27:36.607
> 
> 标签：haskell, types

```
Prelude> import Data.Time.Clock.POSIX (getPOSIXTime)
Prelude Data.Time.Clock.POSIX> ptime <- getPOSIXTime
Prelude Data.Time.Clock.POSIX> ptime
1360059876.245525s
Prelude Data.Time.Clock.POSIX> :t ptime
ptime :: Data.Time.Clock.POSIX.POSIXTime
Prelude Data.Time.Clock.POSIX> 
```

我想将 ptime 转换为字符串类型，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:32:39.060

`posixSecondsToUTCTime`在 Data.Time.Clock.POSIX 中也使用将 转换`POSIXTime`为`UTCTime`; 然后[`formatTime`](http://www.haskell.org/ghc/docs/latest/html/libraries/time-1.4.0.1/Data-Time-Format.html#v%3aformatTime)从 Data.Time.Format 将其格式化`UTCTime`为`String`.

例如

```
formatTime defaultTimeLocale "%FT%T" (posixSecondsToUTCTime ptime)
-- ^ ISO 8601
formatTime defaultTimeLocale "%s%Qs" (posixSecondsToUTCTime ptime)
-- ^ fractional seconds since the epoch (but see caveat noted in documentation) 
```

（`defaultTimeLocale`来自 System.Locale。）

# c# - 在运行时以编程方式更改 Xml Build Action 属性？

> ID：14705283
> 
> 赞同：1
> 
> 时间：2013-02-05T10:27:38.720
> 
> 标签：c#, asp.net, xml, xml-parsing

我必须使用 c# 动态生成 XML 文件。

我遇到的问题是 XML 文件提供了属性“**构建操作**”作为“**内容**”。

我想从“**内容**”中动态更改为“**嵌入式资源”。**

 **有谁知道这一点，请在 C# 中以编程方式应用一些基本的 XML 格式？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:50:13.323

你可以在这里得到解决方案

1.  在 Visual Studio 的解决方案资源管理器窗口中，单击要修改的文件。
2.  在 Properties 窗口中，将 Build Action 更改为 Embedded Resource。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:57:33.713

我通过将 xml 文件属性更改为 Embedded Resource 解决了这个问题。我通过使用以下代码将动态生成的 .hbm.xml 强制执行到 NHibernate。然后我可以动态绑定此映射文件。

```
 Configuration cfg = new Configuration();
         cfg.Configure();
         string   file="@\\mappingfilesPath \\DynamicMappingfiles.hbm.xml";
         cfg.AddFile(new FileInfo(file));
         cfg.AddAssembly(this.GetType().Assembly); 
```**

# html - div 是否也为自己占用空间？

> ID：14705284
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:27:40.807
> 
> 标签：html, for-loop, space

`div`我在这三个不同的`div`标签下使用标签进行了划分

IE

```
<div id="content">
     <div id="div1">
     </div>
     <div id="div2">
     </div>
     <div id="div3">
     </div>
</div> 
```

我为它做了一个CSS

```
#content
{
   width:960px;
}
#div1,div2,div3
{
 width:318px;
 border-radius:10px;
 border:1px solid;
 float:left;
 margin-left:2px
} 
```

现在我的问题是我`div`没有排成一行，如果我将宽度更改为`315px`of `div1`，`div2`那么`div3`它将出现在单行上

即一个接一个。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:36:40.277

不要忘记边框（+2px）、边距和内边距。有边框的 div 是 320px 宽，所以除了边距或填充外，它还会溢出容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:32:06.580

你试过改变吗

```
#div1,div2,div3 
```

至

```
#div1,#div2,#div3 
```

? 在我看来，它们出现在单行上。

# events - GWT 取消 RichTextBox 中的按键事件

> ID：14705286
> 
> 赞同：0
> 
> 时间：2013-02-05T10:27:54.270
> 
> 标签：events, gwt, richtextbox, keypress

我想取消 RichTextBox 中的特定按键事件。

[这里](https://stackoverflow.com/questions/4872009/cancel-a-keypress-event-in-gwt)描述了如何在常规*TextBox*中执行此操作，但它在*RichTextArea*中不起作用，因为它没有 cancelKey() 方法。

这是我的代码：

```
 RichTextArea richTextArea = new RichTextArea();
   ...
   richTextArea.addKeyPressHandler(new KeyPressHandler() {

        @Override
        public void onKeyPress(KeyPressEvent arg0) {
            if (arg0.getNativeEvent().getKeyCode() == KeyCodes.KEY_ENTER) {
                // Here is where I would like to prevent the ENTER key from going to the richTextBox
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:11:40.123

试试这个对我来说很好......

```
 RichTextArea richTextArea = new RichTextArea();
       richTextArea.addKeyPressHandler(new KeyPressHandler() {

            @Override
            public void onKeyPress(KeyPressEvent arg0) {
                if (arg0.getNativeEvent().getKeyCode() == KeyCodes.KEY_ENTER) {
                    arg0.getNativeEvent().preventDefault();
                }
            }
        }); 
```

# html - iPad 播放视频文件

> ID：14705288
> 
> 赞同：4
> 
> 时间：2013-02-05T10:27:57.373
> 
> 标签：html, ipad, xpages, mp4

我目前正在构建一个用作视频库的 xpage 应用程序。除了 Ipad / Iphone 设备外，一切都运行良好。该应用程序使用注释文档来存储描述、摘要以及要显示的 mp4 文件。

为了显示信息，我们使用了闪光灯控制。由于这在 ipad 上不起作用，当然我使用的是 html 5 视频标签。现在我们遇到了视频文件无法在 ipad 上正确播放的问题。

当我使用 $file url 时，例如

[http://www.mytesterver.com/database.nsf/.SysAllByUniversalId/5931A35AD3249395C1257AC900587627/$File/test.mp4](http://www.mytesterver.com/database.nsf/.SysAllByUniversalId/5931A35AD3249395C1257AC900587627/) _

ipad 不接受该 url，因此视频不会播放。现在，当我检查其他浏览器时，这个 url 可以完美运行。当我将视频文件作为文件资源上传并在 ipad 上以这种方式访问​​文件时

[http://www.mytestserver.com/database.nsf/test.mp4](http://www.mytesterver.com/database.nsf/test.mp4)

视频在所有系统上都能流畅播放。现在我当然可以更改代码，以便生成文件资源。但我想将所有文件、文本等放在一个文档中。有没有人可以向我解释为什么以及如何解决这个问题？我认为这与标头发送不正确有关，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:12:37.943

这两个请求之间的区别在于，如果您打开附件，则未设置*Accept-Ranges: bytes* HTTP 标头。Safari 需要此标头。

> 托管 iOS 媒体文件的 HTTP 服务器必须支持字节范围请求

[来源：Safari 开发者库]

如果您将视频作为文件资源打开，则会从 domino 服务器正确添加标头。

链接：[iPhone/iPad Safari 是否需要视频的“Accept-Ranges”标头？](https://stackoverflow.com/questions/3397241/does-iphone-ipad-safari-require-accept-ranges-header-for-video)

**编辑：**

作为一种可能的解决方法，您可以使用这样的 servlet：http: [//balusc.blogspot.de/2009/02/fileservlet-supporting-resume-and.html](http://balusc.blogspot.de/2009/02/fileservlet-supporting-resume-and.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:44:05.340

除了 mime 类型之外，还可以尝试一些事情：

1.  去除 ”。” 在您的 URL 中的 .nsf/ 之后。iPad 可能认为这是一个相对 URL。
2.  `?OpenElement`在网址末尾添加
3.  将文件保存到*domino/html*文件夹（然后每个人都可以访问）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T19:16:14.543

我在这里聚会迟到了，但是我在使用带有 XPages 的 Projekktor 项目方面取得了一些成功。 [http://www.projekktor.com/](http://www.projekktor.com/)

这可能是一个不错的选择。projeckktor 有很多功能。这真是个好东西。

在 XPages 媒体库模板中，我有一个在 OpenNTF 上使用的旧粗略示例。有一些问题我需要改进，但它确实有效。长期以来，它也是 XPages.TV 背后的玩家。

值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T23:18:41.757

我在这个讨论上有点晚了，但我遇到了同样的问题，并注意到如果使用任何压缩方法压缩视频附件，即使它可以在其他平台上运行，它也不会在 Ipad 上运行。

要验证这一点，请使用 notes 客户端将视频文件添加到富文本中，并在附加文件时，在选择要附加的文件并尝试使用 ipad 观看视频时取消选中对话框底部的“压缩”选项它应该工作！

如果多米诺服务器处理带有压缩附件的字节范围 http 请求，就像它处理没有压缩附件的方式一样，那就太好了。

不好的一面是，如果您想在 Lotus 脚本或 Java 中使用后台代理附加视频文件，您不能使用参数说“不要压缩附件”... :-(

在我的情况下，我必须将文件链接到富文本，所以，我发现的唯一解决方案是使用 lotusscript 中的“标准”API 附加它以附加富文本中的文件，然后搜索 $file 字段以查找视频文件（使用文件名），删除它，然后使用 C API 在文档中重新插入“$File”字段，而不使用压缩。

我现在没有此代码，但如果您有兴趣，可以稍后发布。

如果您不需要将文件包含在特定字段中，则只能使用 C API 将文件附加到文档中而不进行压缩。

希望这个对你有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T08:32:08.947

只是一个快速的镜头。如果 url 中的 $-character 是问题（我不知道这是一个问题吗？？）您可以通过在 Domino 目录中为相关的 Internet 站点创建 Web 替换规则来轻松解决它，ei 允许例如，“外部”网址[http://www.mytesterver.com/database.nsf/.SysAllByUniversalId/5931A35AD3249395C1257AC900587627/files/test.mp4](http://www.mytesterver.com/database.nsf/.SysAllByUniversalId/5931A35AD3249395C1257AC900587627/files/test.mp4)

...我刚刚偶然发现了这个您可能也感兴趣的新 openNTF 项目：[http ://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-94NGJX](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-94NGJX)

它是关于通过 WebDAV 访问文件附件 ;-)

/约翰

# dynamics-ax-2009 - 如何在 AX [X++] 中获取扩展数据类型

> ID：14705289
> 
> 赞同：1
> 
> 时间：2013-02-05T10:27:58.193
> 
> 标签：dynamics-ax-2009, x++

我正在使用以下代码来获取字段的类型。如何获得“扩展类型”

```
tID = dict.tableName2Id('CustTable');
dt = new DictTable(tID);
if (dt)
{
    fId = dt.fieldName2Id('CustGroup');
    df = dt.fieldObject(fId);
    if (df)
    {
        t = df.type(); // Need to get extended data type
        print enum2str(t);
        pause;
    }

} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:33:28.937

使用`typeId()`而不是`type()`获取扩展数据类型的 ID。`extendedTypeId2Name()`然后你可以找到它的名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:26:12.040

如果您真的想对扩展数据类型进行“反思”，那么正确的类是 DictType：http: [//msdn.microsoft.com/en-us/library/gg804354.aspx](http://msdn.microsoft.com/en-us/library/gg804354.aspx)

# cxf - Camel - 尝试使用 JIBX 编组参数并将其发送到 CXF-CAMEL 端点

> ID：14705290
> 
> 赞同：0
> 
> 时间：2013-02-05T10:27:58.347
> 
> 标签：cxf, apache-camel, jibx

Basiaclly 我有要发送的 XML-d 对象，感谢 JIBX，我有 WSDL 端点。我只是想把东西送到那个端点。这对我来说非常困难。

我想使用 POJO 模式，因为它看起来比其他模式简单得多，不涉及弄乱 SOAP-Headers 等等

POJO 模式似乎默认调用 JAXB，但我想使用 JIBX - 因为我正在与之交互的项目已经 JIBX 注释并且

我想用我的 JIBX 交换 POJO 自动 JAXB，或者让我自己进行编组（我可以成功）并传递我的 xml 消息

```
from( "A" )
  .marshall().jibx() // works fine, and gives byte[] of marshalled object in In.body
  .process() {
      exchange.getIn().setHeader( CxfConstants.OPERATION_NAME, OPERATION);    
   }
   .to("cxf://SERVICE"
     + "?serviceClass=SERVICE_CLASS"
     + "&wsdlURL=SERVICE?wsdl"
     + "&dataFormat=POJO" ); 
```

然后它尝试在消息体上调用 Jaxb 并死掉。

我尝试将字节 [] 包装为字符串，并包装在列表中并使用 dataformat=MESSAGE 发送，但我似乎无法得到我想要做的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:49:31.817

用户1958722,

我建议您查看 JiBX 网站和我的博客[blog.tourgeek.com上的一些示例](http://blog.tourgeek.com)

JiBX 具有包含在 CXF 中的数据连接器。这意味着您所要做的就是在 spring bean.xml 文件中指定 jibx 数据连接器，然后 JiBX 会自动执行编组/解组。

尽管 CXF 对于 SOAP 服务器来说是一个很好的工具，但我发现它对于 SOAP 客户端有点难以使用。您可以使用 JiBX 客户端库为自己节省大量时间。它非常轻量级，因为它使用 javax.xml.ws.soap 包将您的消息打包到一个 SOAP 容器中。

我建议阅读我关于[创建 SOAP 客户端](http://blog.tourgeek.com/2012/11/opentravel-web-services-client-test.html)的文章并查看[我们存储库中的一些示例客户端代码](https://github.com/jibx/schema-library/blob/master/org.opentravel/_2012A/opentravel-ws/opentravel-hotel-ws-test-client/src/main/java/org/jibx/schema/org/opentravel/_2012A/hotel/ws/test/client/HotelClientTest.java)。

[JiBX 模式库](http://jibx.sourceforge.net/schema-library/index.html)有一些很棒的Web[服务客户端](http://jibx.sourceforge.net/schema-library/client.html)和[服务器示例](http://jibx.sourceforge.net/schema-library/service.html)。

如果您正在处理公共消息集，请考虑将您的绑定捐赠给 JiBX 模式库。

我希望这有帮助！

大学教师

# python - Python、WMI、注册表和奇怪的结果

> ID：14705293
> 
> 赞同：2
> 
> 时间：2013-02-05T10:28:03.027
> 
> 标签：python, windows, registry, wmi, pywin32

我需要创建一个 python 脚本来遍历每个键的内容`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`并返回`DisplayName`。

我以此为起点（在另一个堆栈溢出帖子中找到）

```
import _winreg
import wmi

c = wmi.WMI(namespace="default").StdRegProv

result, value = c.GetStringValue (
    hDefKey=_winreg.HKEY_LOCAL_MACHINE,
    sSubKeyName="SYSTEM\ControlSet001\Services\MRxDAV",
    sValueName="ImagePath"
)
print value 
```

这样可行。它返回：

```
\SystemRoot\system32\drivers\mrxdav.sys 
```

但是，如果我将`sSubKeyName`and `sValueName`（更改为有效值），它似乎非常不稳定，`None`经常返回。

例如：

```
c = wmi.WMI(namespace="default").StdRegProv

result, value = c.GetStringValue (
    hDefKey=_winreg.HKEY_LOCAL_MACHINE,
    sSubKeyName="SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{0E5D76AD-A3FB-48D5-8400-8903B10317D3}",
    sValueName="DisplayName"
)
print value 
```

这导致`None`被打印。

然而，

```
result, value = c.GetStringValue (
    hDefKey=_winreg.HKEY_LOCAL_MACHINE,
    sSubKeyName="SOFTWARE\Microsoft\Windows\CurrentVersion\Installer",
    sValueName="InstallerLocation"
)
print value 
```

返回正确的值，

```
C:\Windows\SysWOW64\ 
```

如果我们再尝试：

```
result, value = c.GetStringValue (
    hDefKey=_winreg.HKEY_LOCAL_MACHINE,
    sSubKeyName="SOFTWARE\Microsoft\Windows\CurrentVersion\OptimalLayout",
    sValueName="LayoutFilePath"
)
print value 
```

退货`None`

我尝试过原始字符串并转义斜杠，但都没有奏效。我也试过这个`GetExpandedString()`方法，它的行为是一样的。

它似乎因更长的`sSubKeyName`值而失败，但这只是一种直觉。

**编辑**

[Y__](https://stackoverflow.com/users/667433/y)发布的代码的稍微干净的版本

```
key = _winreg.OpenKey(
    _winreg.HKEY_LOCAL_MACHINE,
    "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{90140000-001F-040C-1000-0000000FF1CE}",
    0, _winreg.KEY_READ | _winreg.KEY_WOW64_64KEY)

name = _winreg.QueryValueEx(key, "DisplayName")
print name[0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:12:24.473

我查看了您的代码，并注意到当它失败时，返回代码是`2`什么意思`ERROR_FILE_NOT_FOUND`（参考：http: [//msdn.microsoft.com/en-us/library/ms681382%28v=3Dvs.%2085%29\. .aspx](http://msdn.microsoft.com/en-us/library/ms681382%28v=3Dvs.%2085%29.aspx) )

事实上，出于某种原因，我看到的使用`regedit`和我看到的这段代码片段是不一致的：

```
err_code, results = c.EnumKey (
    hDefKey=_winreg.HKEY_LOCAL_MACHINE,
    sSubKeyName="SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall"
)
print err_code
for r in results:
    print result 
```

我正在寻找对此行为的适当解释。

希望能帮助到你，

最好的

**编辑**

[由于这篇文章（ http://mail.python.org/pipermail/python-win32/2009-February/008865.html](http://mail.python.org/pipermail/python-win32/2009-February/008865.html)），我认为我找到了罪魁祸首。

因此，如果您使用 Python API 打开密钥，您可以根据需要获取数据。这是一个应该可以解决问题的小（丑陋）代码：

```
key = _winreg.OpenKey(
    _winreg.HKEY_LOCAL_MACHINE, 
"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{0E5D76AD-A3FB-48D5-8400-8903B10317D3}" ,
     0,
    _winreg.KEY_READ | _winreg.KEY_WOW64_64KEY

i = 0
while True:
    try:
        name, val, key_type = _winreg.EnumValue(key, i)
        if name == "DisplayName":
            print "%s => %s" % (name, val)
        except:
            # No more indices
            break
        i += 1 
```

附加参考： http: [//msdn.microsoft.com/en-us/library/aa384129 (v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa384129(v=VS.85).aspx)

**编辑 2**

在您发表评论之后，这是一个代码片段，应该可以满足您的要求：

```
import _winreg

def getKeys(hKey, sSubKey):
    with _winreg.OpenKey(hKey, sSubKey, 0, _winreg.KEY_READ | _winreg.KEY_WOW64_64KEY)     as key:
        idx = 0
        while True:
            try:
                yield _winreg.EnumKey(key, idx)
            except:
                # No more indices
                break
            idx += 1

hKey = _winreg.HKEY_LOCAL_MACHINE
sSubKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\"
for keyName in getKeys(hKey, sSubKey):
    with _winreg.OpenKey(hKey, "\\".join([sSubKey, keyName]) , 0, _winreg.KEY_READ |     _winreg.KEY_WOW64_64KEY) as key:
        i = 0
        while True:
            try:
                name, val, key_type = _winreg.EnumValue(key, i)
                if name == "DisplayName":
                    print "%s\\%s => %s" % (keyName, name, val)
                    break
            except:
                break

            i += 1 
```

# javafx-2 - 将父级绑定到可观察列表

> ID：14705295
> 
> 赞同：4
> 
> 时间：2013-02-05T10:28:20.570
> 
> 标签：javafx-2, javafx

我想将 绑定`VBox.getChildren()` `ObservableList`到我自己的`ObservableList`. 这样，当我的进程检测到图像时，它就会被添加到我的列表中，而列表又会自动添加到 VBox 中。

```
 Bindings.bindContentBidirectional(myList,vbox.getChildren()); 
```

它抛出以下异常：

> 线程“Thread-3”中的异常 java.lang.UnsupportedOperationException

还有其他方法吗？上面的问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T12:32:53.693

绑定不是问题，您的方法是正确的。您可能会`UnsupportedOperationException`因为旧版本的 FX 而得到。

例如，下一个示例适用于我使用 JavaFX 2.2：

```
public void start(Stage primaryStage) {
    ObservableList<Node> list = FXCollections.<Node>observableArrayList();
    VBox root = new VBox();

    Bindings.bindContentBidirectional(list, root.getChildren());
    list.add(new Button("Test"));

    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
} 
```

# java - java中是否有像微软同步框架这样的同步框架或算法

> ID：14705296
> 
> 赞同：1
> 
> 时间：2013-02-05T10:28:21.950
> 
> 标签：java, cloud, microsoft-sync-framework

java中是否有同步框架或算法。同步完成的频率。我正在用 java 开发一个自定义应用程序，我需要支持从多个来源通过云同步数据。Microsoft 同步框架是一个非常全面的框架，是为 .net 世界开发的。我对某些功能子集感到满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:52:13.123

我认为没有直接的等价物。

如果您想要消息传递，您可以采用存储和转发方法。您可以在应用程序中运行嵌入的[ActiveMQ](https://activemq.apache.org/)，当发送消息时，它会在本地保存，直到与主要代理建立连接，然后才被传递。

您还可以使用[Hazelcast](http://www.hazelcast.com/)将数据存储在地图中，这些地图会自动复制到集群中的其他节点。

# sql - 使用 TSQL 遍历大型网络

> ID：14705302
> 
> 赞同：0
> 
> 时间：2013-02-05T10:28:38.577
> 
> 标签：sql, sql-server, tsql

我有一个包含个人及其一些详细信息的大型数据集。该数据集包含大量重复项，并且大量记录基于它们的特征之一相互“关联”。为确保链接正确的记录，3 个要素中有 2 个的匹配项将被计为一个链接。每个人都需要链接到所有可能的记录，并且每个记录都将被分配一个 clusterId。

我有以下数据集结构：

```
+--+----+----+----+
|id|col1|col2|col3|
+--+----+----+----+
|1 |A   |B   |C   |
+--+----+----+----+
|2 |A   |B   |D   |
+--+----+----+----+
|3 |A   |Z   |D   |
+--+----+----+----+ 
```

id 1 将链接到 id 2（因为 col1 和 col2 相同），id 2 将链接到 id 3（因为 col1 和 col3 相同）。链接 id 1 和 2 为这个“集群”添加了更多信息，并且在建立链接之后，id 3 应该属于该集群。

数据集非常大（2800 万条记录），我没有一个好主意可以让我在合理的时间范围内建立这些关系。

任何想法解决这个问题的最快和最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:27:19.870

有了这么多数据，创建关系可能会很慢，但是如果您的列被索引并且您有一个快速的服务器，那么它可能不会太糟糕。创建一个表来存储关系。此 SQL 应填充关系。

```
CREATE TABLE RelationshipTable
    ([id1] int, [id2] int,[cluster] int);   

INSERT INTO RelationshipTable
    SELECT a.id,b.id,NULL
    FROM TestTable a
    LEFT JOIN TestTable b ON a.id<>b.id AND (
        (
                    ((a.col1 is null and b.col1 is null) or a.col1=b.col1)
                and ((a.col2 is null and b.col2 is null) or a.col2=b.col2)
        )
        OR
        (
                    ((a.col1 is null and b.col1 is null) or a.col1=b.col1)
                and ((a.col3 is null and b.col3 is null) or a.col3=b.col3)
        )
        OR
        (
                    ((a.col2 is null and b.col2 is null) or a.col2=b.col2)
                and ((a.col3 is null and b.col3 is null) or a.col3=b.col3)
        )
    )

DECLARE @UpdateId INT
DECLARE @ClusterId INT
SET @ClusterId=0

WHILE EXISTS(
    SELECT *
    FROM RelationshipTable
    WHERE [cluster] IS NULL
)
BEGIN
  SET @ClusterId=@ClusterId+1

  SELECT
    @UpdateId=[id1]
  FROM RelationshipTable
  WHERE [cluster] IS NULL

  UPDATE RelationshipTable
  SET [cluster]=@ClusterId
  WHERE ID1=@UpdateId
  OR ID2=@UpdateId

  WHILE @@Rowcount>0
  BEGIN
    UPDATE RelationshipTable
    SET [cluster]=@ClusterId
    WHERE [cluster] IS NULL
    AND
    (
      ID1 IN (
           SELECT ID1
           FROM RelationshipTable
           WHERE [cluster]=@ClusterId
           UNION
           SELECT ID2
           FROM RelationshipTable
           WHERE [cluster]=@ClusterId
      )
      OR ID2 IN (
           SELECT ID1
           FROM RelationshipTable
           WHERE [cluster]=@ClusterId
           UNION
           SELECT ID2
           FROM RelationshipTable
           WHERE [cluster]=@ClusterId
      )
    )
  END
END

select * from RelationshipTable 
```

# tsql - 使用级联字符串更新字段，具体取决于其他字段

> ID：14705307
> 
> 赞同：1
> 
> 时间：2013-02-05T10:28:53.167
> 
> 标签：tsql, sql-update, sql-server-2012

我有以下 SQL 查询（简化）：

```
UPDATE myTable
SET Phone1 = 049
    ,Phone2 = 123
    ,Class = --???
WHERE Project = 'ABC' 
```

所以我只想为每个项目“ABC”设置一些默认值。对于 Class 字段，我想要以下内容：表中有 5 个其他字段，Class1 到 Class5，每个字段包含 1 或 0。如果 Class1 为 1，则 Class 应包含“C1”。如果 Class1 和 Class3 包含 1，则 Class 应为“C1 + C3”。如果所有 ClassN 字段都包含 1，则应为“C1 + C2 + C3 + C4 + C5”，依此类推。

现在这也不太难：

```
DECLARE @Class NVARCHAR(100)
DECLARE @Class1 INT = 0
DECLARE @Class2 INT = 0
DECLARE @Class3 INT = 0
DECLARE @Class4 INT = 0
DECLARE @Class5 INT = 0

SET @Class = CASE 
        WHEN ISNULL(@Class1, 0) = 1
            THEN 'C1 + '
        ELSE ''
        END
SET @Class = ISNULL(@Class, '') + CASE 
        WHEN ISNULL(@Class2, 0) = 1
            THEN 'C2 + '
        ELSE ''
        END
SET @Class = ISNULL(@Class, '') + CASE 
        WHEN ISNULL(@Class3, 0) = 1
            THEN 'C3 + '
        ELSE ''
        END
SET @Class = ISNULL(@Class, '') + CASE 
        WHEN ISNULL(@Class4, 0) = 1
            THEN 'C4 + '
        ELSE ''
        END
SET @Class = ISNULL(@Class, '') + CASE 
        WHEN ISNULL(@Class5, 0) = 1
            THEN 'C5 + '
        ELSE ''
        END

-- Remove last +
IF (LEN(@Class) > 0)
    SET @Class = LEFT(ISNULL(@Class, ''), LEN(@Class) - 2)

SELECT @Class 
```

但现在我只是不确定如何以最好的方式将这两件事结合起来。我怎样才能以最好的方式将它们结合起来？

我现在最好的想法是创建一个标量值函数并返回字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:50:35.497

这个怎么样？

```
UPDATE myTable
SET Phone1 = 049
    ,Phone2 = 123
    ,Class = 
CASE WHEN 1 IN (Class1, Class2, Class3, Class4, Class5) THEN
LEFT(
CONCAT(
CASE WHEN ISNULL(Class1, 0) = 1 THEN 'C1 + ' ELSE '' END,
CASE WHEN ISNULL(Class2, 0) = 1 THEN 'C2 + ' ELSE '' END,
CASE WHEN ISNULL(Class3, 0) = 1 THEN 'C3 + ' ELSE '' END,
CASE WHEN ISNULL(Class4, 0) = 1 THEN 'C4 + ' ELSE '' END,
CASE WHEN ISNULL(Class5, 0) = 1 THEN 'C5 + ' ELSE '' END
)
, LEN(
CONCAT(
CASE WHEN ISNULL(Class1, 0) = 1 THEN 'C1 + ' ELSE '' END,
CASE WHEN ISNULL(Class2, 0) = 1 THEN 'C2 + ' ELSE '' END,
CASE WHEN ISNULL(Class3, 0) = 1 THEN 'C3 + ' ELSE '' END,
CASE WHEN ISNULL(Class4, 0) = 1 THEN 'C4 + ' ELSE '' END,
CASE WHEN ISNULL(Class5, 0) = 1 THEN 'C5 + ' ELSE '' END
)
) - 2)
ELSE '' END 
WHERE Project = 'ABC' 
```

# encryption - 在 Bouncy Castle 中这是什么级别的加密

> ID：14705309
> 
> 赞同：2
> 
> 时间：2013-02-05T10:29:00.087
> 
> 标签：encryption, bouncycastle

我遇到了一些使用 Bouncy Castle 加密数据的代码，但我找不到任何文档来说明正在使用哪种算法来加密数据或密钥使用了多少位。我也找不到 Bouncy Castle 的讨论论坛。有谁知道这是使用什么算法以及密钥有多少位？

```
BlowfishEngine blowfishEngine = new BlowfishEngine();
CBCBlockCipher cbcBlockCipher = new CBCBlockCipher(blowfishEngine); 

KeyParameter key = new KeyParameter(key);

BufferedBlockCipher cipher = new PaddedBlockCipher(cbcBlockCipher);

cipher.init(true, key);

int size = cipher.getOutputSize(data.length);
byte[] result = new byte[size];
int olen = cipher.processBytes(data, 0, data.length, result, 0);
olen += cipher.doFinal(result, olen);

if (olen < size)
{
  byte[] tmp = new byte[olen];
  System.arraycopy(result, 0, tmp, 0, olen);
  result = tmp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:33:29.463

该算法是[Blowfish](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)，在[密码块链接](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)操作模式下运行。Blowfish 允许从 32 位到 448 位的各种密钥大小。也就是说，它使用 64 位块大小（它可以在一个段中加密的数据量），它不如 AES 等密码中的 128 位块大小安全。否则，Blowfish 是一种非常安全的密码，只要您使用 128 位或更大的密钥大小。

也就是说，在重新加密操作时，它的性能不是很好（重新加密需要很长时间，这就是为什么它的密钥调度是 bcrypt 的基础）。您最好的选择是使用 AES-256（换成`BlowfishEngine`）`AESEngine`。

就密钥大小而言，根据您的评论，您似乎正在尝试直接使用密码作为加密密钥。这是一个非常糟糕的做法，并且很容易暴力破解你的加密。您应该改为使用密码来驱动像 PBKDF2 这样的密钥派生函数，这将为您提供更安全、更长的密钥。查看[此答案](https://stackoverflow.com/questions/8674018/pbkdf2-with-bouncycastle-in-java)，了解在 java 中使用 BouncyCastle 执行此操作的好方法。

# iphone - 如何使用蓝牙获取 iPhone 的手机号码？

> ID：14705314
> 
> 赞同：0
> 
> 时间：2013-02-05T10:29:16.793
> 
> 标签：iphone, ios, bluetooth, sony-smartwatch

我想将来电者手机号码转发到蓝牙设备（类似于元手表，手机号码在智能手表上可见，而蓝牙设备不是 ios 设备）

[https://itunes.apple.com/us/app/metawatch-manager-for-ios/id557219641?mt=8](https://itunes.apple.com/us/app/metawatch-manager-for-ios/id557219641?mt=8)

上面的链接提到了来电显示通知。

在问这个问题之前，我已经浏览了以下链接。

[如何在 iOS 设备中获取用户来电电话号码](https://stackoverflow.com/questions/13681449/how-to-get-user-incoming-call-phone-number-in-ios-device?rq=1)

[从日志中获取手机号码到应用程序](https://stackoverflow.com/questions/7255267/getting-mobile-number-from-log-to-the-app?rq=1)

[如何从 iphone sdk 中从呼叫中心返回的呼叫的 callID（呼叫标识符）获取电话号码？](https://stackoverflow.com/questions/5297206/how-to-get-the-phone-number-from-the-callidcall-identifier-of-call-which-retur?rq=1)

所有问题的答案都是不可能的。我认为应该有某种方法可以使用蓝牙获取来电者的手机号码。任何建议或任何指示。是否可以使用 MFi 或任何其他方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T03:05:38.123

蓝牙配件可以通过多种方式获取来电者的手机号码。最直接的：

*   如果您的蓝牙配件使用 LE：为 iOS 的 Apple 通知中心服务 (ANCS) 实现客户端，这是 iOS 7 及更高版本附带的 GATT 服务器。请参阅[https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/AppleNotificationCenterServiceSpecification/Introduction/Introduction.html](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/AppleNotificationCenterServiceSpecification/Introduction/Introduction.html)

*   如果您的蓝牙配件使用 BR/EDR：实现免提配置文件 (HFP) 的“免提单元”一侧。iOS 很早以前就带有此配置文件的“音频网关”端。请参阅[https://developer.bluetooth.org/TechnologyOverview/Pages/HFP.aspx](https://developer.bluetooth.org/TechnologyOverview/Pages/HFP.aspx)

另请参阅 Apple 的蓝牙开发人员页面，这是了解更多信息的良好起点：[https ://developer.apple.com/bluetooth/](https://developer.apple.com/bluetooth/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T11:42:21.640

有几种方法可以做到这一点。

1 > 每当来电时，通过蓝牙串口配置文件将信息流式传输到远程蓝牙设备[假设远程设备支持蓝牙串口配置文件]

2> 根据远程设备的蓝牙功能[配置文件支持]，您可以决定需要使用哪些配置文件来传输数据。

直接回答您的问题：无法直接回答，因为远程蓝牙设备的功能尚不清楚。

以下链接可以帮助您了解更多关于 iPhone 中的蓝牙交互

[在 iPhone 上实现蓝牙数据传输](https://stackoverflow.com/questions/6706954/implementing-bluetooth-data-transfer-on-the-iphone)

# jquery - 使用 Symfony 设置 jquery

> ID：14705319
> 
> 赞同：0
> 
> 时间：2013-02-05T10:29:38.890
> 
> 标签：jquery, symfony

我正在尝试为我的 symfony 平台设置一个简单的 jquery。只是试图实现这个[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_hide_p](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_hide_p)看看是否一切正常。

base.html.twig

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>{% block title %}TEST JQUERY{% endblock %}</title>
    {% block stylesheets %}{% endblock %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
</head>
<body>
    {% block body %}{% endblock %}
    {% block javascripts %}{% endblock %}
</body>
</html> 
```

index.html.twig

```
{% extends '::base.html.twig' %}

{% block body %}

    <script type="text/javascript">
        $(document).ready(function(){
            $("button").click(function(){
                $("p").hide();
            });
        });
    </script>

<h2>This is a heading</h2>
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<button>Click me</button>

{% endblock %} 
```

当我在页面上查看源代码时，结构似乎很好，但 jquery 没有被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:37:51.997

google 的 CDN 上不存在您包含的 jQuery

改为使用`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>`。

如果您想要版本，请通过[此链接](http://code.jquery.com/jquery-1.9.1.min.js)`1.9.1`从[jquery.com](http://jquery.com/download/)获取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:33:29.320

更改 jquery 函数并尝试以下操作：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("button").live('click', function(){
            $("p").hide();
        });
    });
</script> 
```

## 更新

作为**rrikesh**指针，因为 live 在 v1.7 之后被弃用，你可能想要使用这个：

```
<script type="text/javascript">
    $(document).on("click", "button", function (){
        $("p").hide();
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T23:23:09.407

这可能是一个更好的解决方案：

```
<script src="{{ asset('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js') }}"></script>
<script><window.jQuery || document.write('<script src=\"\{\{ asset(\'../app/Resources/public/js/vendor/jquery-1.9.1.min.js\') \}\}\"><\/script>')</script> 
```

并将文件下载`jquery-1.9.1.min.js`到您的`app/Resources/public/js/vendor/`目录。

这样，客户端总是得到源。

# html - Safari中的文件字段文本问题

> ID：14705322
> 
> 赞同：3
> 
> 时间：2013-02-05T10:29:50.280
> 
> 标签：html, css

我需要更改**Safari 浏览**`"no file selected" to "No file selected"`器。它在 chrome 和 Firefox 中很好用。如何解决这个问题。请看我的截图。 .**![在此处输入图像描述](../Images/cc28d7fcfe5d911f9893365c4c69a4d3.png)**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:41:52.440

*如果它没有损坏，请不要修复。*

这里没有什么需要解决的。它按设计工作：控件显示浏览器供应商的意图以及该浏览器的用户期望什么。 *用他们喜欢的语言。* 不要试图弄乱它。HTML 不是给你你想要的，而是给你用户需要的。到目前为止，CSS 也只能为您提供帮助。

您可以使用客户端脚本隐藏控件并基于它构建您自己的控件。但我强烈建议不要这样做，因为它可能无法可靠地工作，如果有的话。我试过了。

那么你还必须做 i18n——你会说所有目标用户的首选语言吗？**

# java - 使用 Eclipse 为 java 6 编译 java 7

> ID：14705324
> 
> 赞同：0
> 
> 时间：2013-02-05T10:29:54.783
> 
> 标签：java, eclipse, compilation, java-7, java-6

我需要为 Java 6 编译一个项目以与 java 6 或 7 一起使用（我无法升级我生命中的所有计算机）。我一直在搜索并找到了一些[有用的](https://stackoverflow.com/questions/8869869/is-there-a-java-7-to-java-6-converter) [东西](https://stackoverflow.com/questions/7661980/compiling-java-7-to-java-6)，但我对 java 还很陌生——我不太了解如何使用所提供的替代方案（ant-build、M​​aven、javac）。

我的程序没有使用 Java 6 中不可用的任何 API 方法，但它确实使用了另一个外部 .JAR 的 API（它是示例程序的基本插件）

有没有一种简单的方法可以使用 Eclipse 的导出功能来做到这一点，还是我需要使用其他一些程序/方法？

如果我需要使用 Eclipse 以外的其他东西，对于依赖于另一个外部 .jar 的 API 的多类、多包文件，我最好如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:35:47.710

在 Eclipse 中右键单击您的项目并打开`project properties`.

然后导航到`Java compiler`合规级别并将其设置为 1.6。

![在此处输入图像描述](../Images/e9491b0bf9a3311262dee8e01d3bce26.png)

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:36:19.930

在 Eclipse Juno SR1 中：右键单击您的项目 -> 属性 -> Java 编译器 -> 编译器合规级别。

将其设置为 1.6，您就完成了。您可能需要启用项目特定设置并禁用与执行环境的合规性 - 同一窗口中的 2 个复选框。

# java - java小程序日志记录7u13

> ID：14705326
> 
> 赞同：3
> 
> 时间：2013-02-05T10:30:09.760
> 
> 标签：java, logging, applet

我刚刚安装了新的 JDK7u13，但是日志小程序不起作用。我在控制台中看不到任何日志消息。该小程序在 7u11 中运行良好。我试过一个简单的程序（不是小程序），它可以工作。当然，我重新编译了applet，修改了logging.properties。我必须在新的 JRE 更新中配置新参数吗？

一个例子：

## 同学们好：

```
import java.applet.Applet;
import java.util.logging.*;

public class Hello extends Applet {

      private static final Logger log = Logger.getLogger("Hello");

   @Override
   public void init() {
      log.info("Hello!!");
      System.out.println("mmmhhhh....");
   }
   // TODO overwrite start(), stop() and destroy() methods
} 
```

## 安慰：

```
Java Plugin 10.13.2.20
Usando versión de JRE 1.7.0_13-b20 Java HotSpot(TM) Client VM
Directorio raíz del usuario = C:\Documents and Settings\commander
----------------------------------------------------
c:   borrar ventana de consola
f:   finalizar objetos en la cola de finalización
g:   recopilación de basura
h:   mostrar este mensaje de ayuda
l:   volcar lista de classloader
m:   imprimir uso de memoria
o:   disparar registro
q:   ocultar consola
r:   recargar configuración de política
s:   volcar propiedades del sistema y de despliegue
t:   volcar lista de threads
v:   volcar pila de threads
x:   borrar caché de classloader
0-5: definir nivel de rastreo en <n>
----------------------------------------------------
mmmhhhh.... 
```

信息消息“你好！！”在哪里？

在 JRE1.6（例如）中，相同的小程序产生：

```
Java Plug-in 1.6.0_07
Usar versión JRE 1.6.0_07 Java HotSpot(TM) Client VM
Directorio local del usuario = C:\Documents and Settings\commander
----------------------------------------------------
c:   borrar ventana de consola
f:   finalizar objetos en la cola de finalización
g:   liberación de recursos
h:   presentar este mensaje de ayuda
l:   volcar lista del cargador de clases
m:   imprimir sintaxis de memoria
o:   activar registro
p:   recargar configuración de proxy
q:   ocultar consola
r:   recargar configuración de norma
s:   volcar propiedades del sistema y de despliegue
t:   volcar lista de subprocesos
v:   volcar pila de subprocesos
x:   borrar antememoria del cargador de clases
0-5: establecer nivel de rastreo en <n>
----------------------------------------------------
05-feb-2013 11:18:50 Hello init
INFO: Hello!!
mmmhhhh.... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:33:25.377

```
import java.applet.Applet;
import java.util.logging.*;

public class Hello extends Applet {

      private static final Logger log = Logger.getLogger("Hello");

   @Override
   public void init() {
      log.addHandler(new ConsoleHandler()); // ADD THIS LINE TO YOUR CODE
      log.info("Hello!!");
      System.out.println("mmmhhhh....");
   }
   // TODO overwrite start(), stop() and destroy() methods
} 
```

出于任何原因，LogManager 没有读取属性文件的*处理程序*值，因此要解决您的问题，您只需添加处理程序，如我在上面的代码中所示。我会尝试多调试一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:12:26.410

我将您的小程序代码与 jdk1.7.0_09 与此 logging.properties 一起使用：

```
handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=INFO
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter 
```

我在控制台中得到了这个输出：

2013 年 2 月 5 日 12:08:35 PM 你好初始化信息：你好！嗯嗯嗯……

# asp.net - 如何测试起订量无效方法

> ID：14705327
> 
> 赞同：1
> 
> 时间：2013-02-05T10:30:11.257
> 
> 标签：asp.net, unit-testing, moq, mstest

我想检查是否执行`Update`了对对象方法的调用`RealtyObjectEntityRepository`。我的服务中有以下方法：

```
public void UpdateRealtyObject(RealtyObjectDTO realtyObject)
    {
        List<Tuple<string, string>> changedItems = new List<Tuple<string, string>>();
        RealtyObject before = this.unit.RealtyObjectRepository.GetById(realtyObject.RealtyObjectId);
        var realtyObjectEntity = Converter.FromDTO(realtyObject);
        this.unit.RealtyObjectRepository.Update(realtyObjectEntity);
    } 
```

如果方法被调用，我已经编写了测试来测试 if 方法：

```
[TestMethod]
    public void UpdateRealtyObject()
    {
        IWindsorContainer container = new WindsorContainer();
        var originalObject = new RealtyObject() { RealtyObjectId = 1, Description = "W", KOATUUId = "495857566455" };
        var updatedObject = new RealtyObject() { RealtyObjectId = 1, Description = "Wa", KOATUUId = "495857566456" };
        var mock = new Mock<RealtyObjectEntityRepository>();
        mock.Setup<RealtyObject>(x => x.GetById(originalObject.RealtyObjectId)).Returns(originalObject);
        container.Register(Component.For<IRepository<RealtyObject>>().Instance(mock.Object).LifeStyle.Transient);
        var service = new RealEstateService(container);
        service.UpdateRealtyObject(updatedObject.ToDTO());
        mock.Verify(m=>m.Update(updatedObject));

    } 
```

但是我有一个例外

> 对模拟的预期调用至少一次，但从未执行过：m => m.Update(.updatedObject)。未配置任何设置。

有人可以建议我这里有什么问题吗？

# c# - obj 中的 InDesign COM 引用，但不在 bin 目录中

> ID：14705328
> 
> 赞同：2
> 
> 时间：2013-02-05T10:30:13.617
> 
> 标签：c#, visual-studio-2010, com, adobe-indesign

我的应用程序（C#、.NET 4.0、VS2010）引用了一个 COM dll（Adobe InDesign CS6 类型库）。当我构建应用程序时，tlibimp 正在生成“interop.indesign.dll”并出现在 obj\x86\release 中。但是，它不会出现在 bin\x86\release 中。

只有两个选项可供参考。Embed Interop-types 设置为 true（false 会导致错误），Isolated 设置为 false。

现在问题来了。该应用程序以前使用 InDesign CS4 类型库。根据客户的要求，它被提升到 CS6。如果在 PC 上安装了 InDesign CS4 和 CS6，则该应用程序可以工作。它不适用于仅安装 CS6 的情况。看起来仍然有对 CS4 的引用，但我 100% 确定，我删除了所有内容。所有引用都指向 CS6 类型库，检查 .csproj 文件没有显示任何不需要的东西。

除了从头开始重建整个项目文件夹之外，还有什么方法可以解决这个问题？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:23:08.513

经过更多研究，我找到了解决问题的方法。InDesign CS6 类型库未正确注册。我认为 InDesign 安装程序（或 InDesign 本身）是这里的罪魁祸首。

要解决此问题，请从命令行运行以下命令：

C:\Windows\Microsoft.NET\Framework\v4.0.30319\regtlibv12.exe "C:\ProgramData\Adobe\InDesign\Version 8.0\de_DE\Scripting Support\8.0\Resources for Visual Basic.tlb"

之后，类型库被正确注册，应用程序按预期工作。

# phantomjs - 只有带有 Phantomjs 1.7/1.8/1.9 的 Courier-Fonts，也许是 CSS 特定的

> ID：14705330
> 
> 赞同：2
> 
> 时间：2013-02-05T10:30:24.043
> 
> 标签：phantomjs

自从更新到 OpenSuse 12.2 我不能再使用 phantomjs（从 1.5 更新到 1.8.1 64 位版本）来创建屏幕截图。问题是缺少对 serif/sansserif 字体的字体支持。仅使用类似 courier/monospace 的字体。

此外，phantomjs 的渲染速度真的很慢（5 秒以上**--> 已解决**）。

我尝试安装 google-droid-fonts、free-ttf-fonts、bitstream-vera-fonts、freetype、font-config 等软件包——但唯一的结果是使用了其他一些难看的字体。

有谁知道如何配置 OpenSuse 12.2 以启用一些可用的字体（如 googles droid 字体）作为 phantomjs 的后备？还是我错过了安装重要的字体渲染库（渲染缓慢）？

**更新**

*   从源头构建解决了性能问题
*   安装“Arial”等 Microsoft Core 字体并没有帮助
*   "fc-match" 返回正确的结果
*   “strace -e open”显示，phantomjs 可以访问 /etc/fonts 下的配置

**更新 2**

*   问题似乎起源于我项目的 CSS。尝试不同的站点，大多数都很好。
*   经过测试的 PhantomJS 1.9 版本具有相同的结果
*   重现错误的公共 URL：[http ://www.berlin.de/kennedy/](http://www.berlin.de/kennedy/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:25:24.590

我有一个类似的问题，安装 urw-fonts 包为我解决了它。

在我的情况下，根本没有渲染字体，所以这可能不是你的解决方案，但值得一试：

> yum 安装 urw-fonts

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T08:06:21.613

一些主要的 CSS 重写解决了这个问题，包括 Twitter Bootstrap 的更新。在某种程度上，一些 CSS 规则干扰了正确的渲染。

对于较新的操作系统版本，我也无法重现该错误。

# z3 - z3 和 muZ 用于计算程序不变量

> ID：14705331
> 
> 赞同：0
> 
> 时间：2013-02-05T10:30:23.873
> 
> 标签：z3

我正在尝试使用 z3 (muZ) 的定点求解器，以找到程序不变量。但是，在某些时候，查询回答 unsat 但我不知道为什么，因为代码是可以访问的：

```
(declare-rel b1 (Int) interval_relation bound_relation)
(declare-rel b2 (Int) interval_relation bound_relation)
(declare-rel b3 (Int Int) interval_relation bound_relation)
(declare-rel b4 (Int Int) interval_relation bound_relation)
(declare-rel b5 (Int Int) interval_relation bound_relation)
(declare-rel b6 (Int) interval_relation bound_relation)

(declare-var i Int)
(declare-var j Int)

(rule (b1 0))
(rule (=> (and (b1 i) (< i 50)) (b2 i)))
(rule (=> (b2 i) (b3 i 0)))
(rule (=> (and (b3 i j) (< j 50)) (b4 i j)))
(rule (=> (b4 i j) (b3 (+ i 1) (+ j 1))))
(rule (=> (and (b3 i j) (>= j 50)) (b5 i j)))
(rule (=> (b5 i j) (b1 (+ 1 (- i j)))))
(rule (=> (and (b1 i) (>= i 50)) (b6 i)))

(query (b3 i j)
  :compile-with-widening true
  :unbound-compressor false
  :engine datalog
  :print-answer true
)
 ; answers unsat

(query (b4 i j)
  :compile-with-widening true
  :unbound-compressor false
  :engine datalog
  :print-answer true
)
; answers sat
; (and (<= 0 (:var 1)) (<= (:var 1) 49))
; this invariant is correct

; corresponding C program:
; int f() {
;   int i = 0;
;   int j = 0;
; 
;   while (i < 50) {  // b1
;       j = 0;
;       while (j < 50) {  // b3
;           i++;
;           j++;
;       }
;       i = i-j+1;
;   }
;   return i;
; } 
```

有人能解释一下为什么它返回“unsat”吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:16:25.920

这是当前 Z3 版本（muZ 部分）中的一个错误。当与区间和边界域一起应用时，它会影响数据记录引擎。它现在已在本地（不稳定）分支中修复。该修复程序将在下一个版本中提供。

# c# - 在运行时设置 ScaffoldColumn(false)

> ID：14705334
> 
> 赞同：0
> 
> 时间：2013-02-05T10:30:42.477
> 
> 标签：c#, asp.net-mvc-4

我正在使用`@Html.EditorFor(model => model.MyModel)`并且我想在我的模型中添加或设置 Id 属性作为隐藏字段。这可以通过使用代码来完成，`ScaffoldColumnAttribute`但我想在运行时执行此操作。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:29:03.410

如果你想实现的是在调用时隐藏实体的`ID`字段，那么你可以使用.`MyModel``EditorFor(m => m.MyModel)``EditorTemplate`

在您的`Views/Shared`文件夹中，创建一个名为`EditorTemplates`. 在该文件夹中创建一个新视图，名为`MyModel.cshtml`其内容将是这样的：

```
@model ***.MyModel

@if (Model != null) {
    @Html.HiddenFor(m => m.ID)
}

@Html.LabelFor(m => m.Property1);
@Html.EditorFor(m => m.Property1); 
```

模型是否存在的测试就是在这里处理`Create`视图。

最后，要处理这种`DisplayFor`情况，您还必须为此添加一个模板，命名为`Views/Shared/DisplayTemplates/MyModel.cshtml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:05:50.450

假设这是您想要的，您可以使用`@Html.HiddenFor(s=>s....)`

# android - 如何通过在 android 中使用移动后退按钮来完成 Acitivity？

> ID：14705335
> 
> 赞同：0
> 
> 时间：2013-02-05T10:30:43.553
> 
> 标签：android

在我的示例应用程序中，我有两个名为`FirstActivity`和的活动`SecondActivity`。从`SecondActivity`我想通过使用移动后退按钮通过意图传递一些数据，在这里我也想完成`SecondActivity`，但是当我按下我的后退按钮时`SecondActivity`，它让我回到我的`FirstActivity`，但它没有完成`SecondActivity`。请帮助我，我怎样才能完成`SecondActivity`.

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
     {
         if ((keyCode == KeyEvent.KEYCODE_BACK))
         {  
             Intent intent = new Intent(SecondActivity.this,FirstActivity.class);
             //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

             intent.putExtra("Data1", data1);
             intent.putExtra("Data2", data2);

             startActivity(intent);
             finish();   
         }
         return true;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:41:25.823

在第一个活动中使用`startActivityForResult`，在完成第二个活动之前，使用`setResult`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:41:50.773

```
@Override
public void onBackPressed() {
        super.onBackPressed();
        this.finish();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:42:49.270

您应该查看[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)的文档，这是执行您正在做的事情的正确方法。

但是，是的，在上面的例子中，`SecondActivity.this.finish()`应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T12:30:03.200

也许这有效：

```
// Back Button Press
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Intent intent = new Intent(SecondActivity.this,FirstActivity.class);
                //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                intent.putExtra("Data1", data1);
                intent.putExtra("Data2", data2);

                startActivity(intent);
                SecondActivity.this.finish();  
                return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

# java - 我的 Java Web 应用程序的类似 Facebook 的聊天

> ID：14705336
> 
> 赞同：3
> 
> 时间：2013-02-05T10:30:50.150
> 
> 标签：java, javascript, jquery, seam2, livechat

我正在为我的 Java Web 应用程序创建类似 Facebook 的聊天。但它不起作用，我跟着

以下链接[http://www.javacodegeeks.com/2012/10/cometd-facebook-similar-chat-for-your.html](http://www.javacodegeeks.com/2012/10/cometd-facebook-similar-chat-for-your.html)

是否有任何其他聊天 API 可用于为我的 Java Seam Web 应用程序创建聊天？

此功能出错

在这个函数上，我在 if 条件下得到了错误

```
_metaHandshake: function (message) {
            // getting false :(
            if (message.successful) {
                $.cometChat._connectionInitialized();
            }
        }, 
```

如果它正在使用接缝，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T05:13:46.037

facebook 使用单独的 XMPP 服务器来处理聊天功能。如果可以尝试，请使用 openfire xmppserver 和 strophejs javascript 库。您需要自己设计界面并学习 xmpp 消息。

[http://strophe.im/strophejs/](http://strophe.im/strophejs/)

[http://www.igniterealtime.org/projects/openfire/](http://www.igniterealtime.org/projects/openfire/)

# php - PHP 使文件仅在代码中可用

> ID：14705338
> 
> 赞同：1
> 
> 时间：2013-02-05T10:30:50.860
> 
> 标签：php, html, security

您知道是否可以通过单击代码中的链接来使文件仅可供下载，并通过尝试通过复制/粘贴地址栏中的 URL 来访问文件来限制访问？

例子：

我以 PDF 格式生成发票，并且我想让它们仅可用于已登录的客户，并且仅可用于为该特定客户生成的发票。客户 A 不能查看客户 B 的发票，反之亦然。

现在我将这些发票保存在这里：www.mydomain.com/invoices/

客户 A 的发票类似于：www.mydomain.com/invoice/20130202_120045.pdf

现在我想让客户在我在 HTML 中添加这样的链接时只能看到这个 PDF：

```
<a href="http://www.mydomain.com/invoice/20130202_120045.pdf">See invoice</a> 
```

但不应通过在地址栏中直接输入 www.mydomain.com/invoice/20130202_120045.pdf 来访问 PDF。

这在某种程度上可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:36:39.290

有多种方法，但我想说这是最简单的一种：

*   将实际的 PDF 存储在只能由 PHP 访问的目录中（`.htaccess`例如，在您的 Web 根目录之外或被阻止）。
*   验证 PHP 脚本中的访问权限。
*   让下载通过 PHP 脚本进行，使用标头`Content-disposition`设置文件名并使用`readfile()`输出文件内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:37:22.017

当然 - 最简单的方法是使用**[.htaccess](http://en.wikipedia.org/wiki/.htaccess)**。您可以将所有不应通过 URL 下载的文件存储在一个文件夹中，然后将它们全部重定向到 PHP 脚本。

这样，当一个人尝试下载时`http://www.mydomain.com/invoice/20130202_120045.pdf`，他们将（在后台，通过 .htaccess）重定向到某个地方的 PHP 脚本。

然后，该 PHP 脚本可以***验证***此人是否已获得授权（通过会话、cookie...），并且仅在授权时输出原始文件（如果不是，则输出错误消息）。

您可以使用**[fgets()](http://www.php.net/manual/en/function.fgets.php)**函数部分输出文件，以确保不会使服务器上的内存过载。

这种方法的一个缺点可能是可扩展性，因为用户下载的文件越多，需要运行的 PHP 脚本就越多，并且在某些时候可能会使 Apache 过载。***但如果代码写得好（即使用fgets()***等），这不太可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:13:15.357

使用[`mod_xsendfile`](https://tn123.org/mod_xsendfile/)它非常容易。您将文件粘贴到文档根目录之外并发出一个特殊的标头，告诉 Apache 代表您发送文件：

设置好之后，代码就这么简单：

```
<?php
...
if ($user->isLoggedIn())
{
    header("X-Sendfile: $path_to_somefile");
    header("Content-Type: application/octet-stream");
    header("Content-Disposition: attachment; filename=\"$somefile\"");
    exit;
}
?>
<h1>Permission denied</h1>
<p>Login first!</p> 
```

*源代码取自模块页面本身。*

# css - CSS 中图像 URL 上的缓存破坏器是否会导致额外的请求？

> ID：14705340
> 
> 赞同：2
> 
> 时间：2013-02-05T10:30:54.020
> 
> 标签：css, caching, optimization, browser-cache

如果我在我的 CSS 中的一条规则中将缓存破坏器添加到图像 URL

```
background: url(../img/sprite.png?version=20130205) no-repeat -75px -208px; 
```

但相同的 CSS 有其他版本的 URL，没有缓存破坏器

```
background: url(../img/sprite.png) no-repeat 0 0; 
```

这会导致对 sprite.png 的另一个请求吗？

此外，如果浏览器首先解析非缓存破坏的 URL，我会假设它显示缓存的图像，如果它有一个，但是当涉及到缓存破坏的版本时会请求图像的新版本 - 我得到了对的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:37:53.203

是的，它将导致对图像的新请求。如果是`?`图像将重新加载。

如果您不想`#`在示例中提出新请求，请使用

```
background: url(../img/sprite.png#version=20130205) no-repeat -75px -208px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:34:20.013

是的，你没看错。所有点。当后面的部分不同时`?`，它总是重新加载。

# iphone - NSDateFormatter 格式不正确

> ID：14705345
> 
> 赞同：0
> 
> 时间：2013-02-05T10:31:05.093
> 
> 标签：iphone, ios, objective-c, nsdate, nsdateformatter

我认为我以错误的方式使用 NSDateFormatter。我有一个 UIDatePicker。当我选择一个日期时，我的日标签、月标签、年标签和时间标签被设置。

当我单击保存按钮时，我会使用此标签建立一个日期并将其发送到我的服务器。我这样做。

```
 NSString *dateStringBegin = [NSString stringWithFormat:@"%@ %@ %@ %@",lblBeginDay.text,lblBeginMonth.text,lblBeginYear.text,lblBeginTime.text];

//LOG dateStringBegin =  7 februari 2013 11:21 
```

但我的服务器只接受一个看起来像这样的字符串`2013-02-07 11:21`

现在我正在代码中执行此操作。

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"d MMMM YYYY hh:mm"];
    NSDate* date = [dateFormat dateFromString:dateStringBegin];

    NSDateFormatter *dateFormat2 = [[NSDateFormatter alloc] init];
    [dateFormat2 setDateFormat:@"YYYY-MM-dd HH:mm"];
    NSString *dateStringBegin2 =  [dateFormat2 stringFromDate:date]; 
```

现在，当我查看我的 dateStringBegin2 的样子时，我看到了这一点。

```
//LOG dateStringBegin2 = 2013-12-28 11:21 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:34:52.113

改变 ：

```
[dateFormat setDateFormat:@"d MMMM YYYY hh:mm"];
[dateFormat2 setDateFormat:@"YYYY-MM-dd HH:mm"]; 
```

至 ：

```
[dateFormat setDateFormat:@"d MMMM yyyy hh:mm"];
[dateFormat2 setDateFormat:@"yyyy-MM-dd HH:mm"]; 
```

这里的问题是，yyyy 用于指定年份组件。一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:35:48.670

检查此代码：-

```
NSString *dateStringBegin = @"7 february 2013 11:21";
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd MMMM yyyy hh:mm"];
    NSDate* date = [dateFormat dateFromString:dateStringBegin];

    NSDateFormatter *dateFormat2 = [[NSDateFormatter alloc] init];
    [dateFormat2 setDateFormat:@"yyyy-MM-dd HH:mm"];
    NSString *dateStringBegin2 =  [dateFormat2 stringFromDate:date];
    NSLog(@"Date : %@",dateStringBegin2); 
```

希望对你有帮助。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:35:53.563

将您的日期格式更改为

```
[dateFormat2 setDateFormat:@"yyyy-MM-dd HH:mm"]; 
```

# ios - 在 Instruments 中查找内存泄漏线

> ID：14705349
> 
> 赞同：5
> 
> 时间：2013-02-05T10:31:18.110
> 
> 标签：ios, ios6, xcode-instruments

我是 iOS 中 Instruments 的新手。我正在尝试查找仪器中的内存泄漏并使用 Xcode 4.5.2 并遵循本教程：[http ://soulwithmobiletechnology.blogspot.sg/2011/04/how-to-check-memory-leaks-in-xcode-4 .html](http://soulwithmobiletechnology.blogspot.sg/2011/04/how-to-check-memory-leaks-in-xcode-4.html)。

我能够找到内存泄漏并能够按箭头转到内存泄漏项的历史记录。但是当我双击它们中的任何一个时，它不会显示导致内存泄漏的行。

图像是这样的：

![在此处输入图像描述](../Images/9702d2e5c3f1ea52f2b97062789e416a.png)

我究竟做错了什么？需要一些指导...谢谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T13:31:25.977

我一开始也很难找到它。就是这样：

1.  选择泄漏仪器（显然）。
2.  通过单击从右侧切换工具栏中的图标来显示“扩展详细信息”窗格。
3.  从列表中选择您泄露的项目。
4.  双击那里的条目，您会看到您的应用程序名称和/或您的一个类，它旁边有一个用户图标，可将您带到有问题的代码。（可能不止一个）

![在此处输入图像描述](../Images/e0ad39fd1f1d8f26bcf2c12ff7f92ea6.png)

双击 (4)，将直接带您进入文件和相关代码行：

![在此处输入图像描述](../Images/3a7e823637df38ed34bacd40ca3ad049.png)

# ios - 如何获取时区名称的本地化城市和国家/地区名称

> ID：14705353
> 
> 赞同：3
> 
> 时间：2013-02-05T10:31:30.243
> 
> 标签：ios, localization, nsdateformatter, nslocalizedstring, nstimezone

如何从时区获取城市名称和国家名称？例如，我可以看到所有 knownTimeZoneNames 数组，并且我想在标签“欧洲/莫斯科”中以几种语言显示为“莫斯科，俄罗斯”。我怎样才能得到这个字符串？实际上我需要本地化列表，如 iPhone 中的 Clock.app。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:42:41.010

您可以像这样从城市名称中获取国家/地区名称：

首先导入Core Location框架

```
CLGeocoder *gc = [[CLGeocoder alloc] init]; 
[gc geocodeAddressString:@"Moscow" 
    completionHandler:^(NSArray *placemarks, NSError *error) 
    { CLPlacemark *placeMark = [[CLPlacemark alloc] initWithPlacemark:(CLPlacemark *)[placemarks objectAtIndex:0]]; NSLog(@"placeMark.country: %@", placeMark.country); 
    }
]; 
```

# ruby-on-rails - 格式化结果

> ID：14705358
> 
> 赞同：0
> 
> 时间：2013-02-05T10:31:40.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想将从以下格式返回的字符串更改为显示自上次从客户下订单以来的几个月天数的日期，我在页面上有以下代码来获取结果 -

```
<% @lastorder = Order.select("DateCreated").where("customer_id == ?", customer.id).order("Datecreated desc").find(:all, :limit => 1) %> 
```

但这会返回以下格式 -

```
 [#<Order DateCreated: "2013-01-09 00:00:00">] 
```

可能有更好的方法来做到这一点，但我目前不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:36:47.847

我会这样重写你的查询：

```
@last_order = Order
  .where(customer_id: customer.id) # No need to use prepared statement here
  .order('DateCreated DESC')
  .pluck('DateCreated')            # Directly select 1 column
  .first()                         # Only select the first record 
```

如果你想用文字显示时间距离，你应该使用 rails helper ：`distance_of_time_in_words_to_now(@last_order)`

信息：只要发现 than`distance_of_time_in_words_to_now`是 的别名`time_ago_in_words`，更短。

# android - 如何通过按下按钮在第二个片段的 TextView 中设置文本

> ID：14705359
> 
> 赞同：3
> 
> 时间：2013-02-05T10:31:40.300
> 
> 标签：android, android-fragmentactivity

我在 Android 应用程序中有 1 个带有 2 个片段的活动。在第一个片段上，我确实放了一个按钮（btnA）。第二次我放了一个 TextView (txtB)。

如何通过按下第一个活动上的按钮在第二个片段的 TextView 中设置文本？

谢谢，我是android应用程序开发的新手

约斯克XP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:28:42.580

遵循[此处](http://developer.android.com/training/basics/fragments/communicating.html)描述的 Android 最佳实践。

这比 Graeme 的解决方案稍微冗长，但允许重用您的片段。（您可以在另一个屏幕中使用 FragmentWithButton，并且该按钮可以执行不同的操作）

你有两个片段（`FragmentWithButton`和`FragmentWithText`）和一个活动（`MyActivity`）

1.  在中创建一个**接口** ：`FragmentWithButtonHost``FragmentWithButton`

    ```
    public class FragmentWithButton extends Fragment {

        FragmentWithButtonHost host;

        public interface FragmentWithButtonHost{
            public void onMyButtonClicked(View v);
        }

        @Override
        public void onAttach(Activity activity) {
            super.onAttach(activity);

            try {
                host = (FragmentWithButtonHost) activity;
            }
            catch (ClassCastException e) {
                // TODO Handle exception
            }
        }

        /**
         * Click handler for MyButton
         */
        public void onMyButtonClick(View v) {
            host.onMyButtonClicked(v);
        }
    } 
    ```

2.  在 Activity 中创建一个**公共**方法`FragmentWithText`来设置文本：

    ```
    public class FragmentWithText extends Fragment{

          ...

          public void setText(String text) {
               // Set text displayed on the fragment
          }
    } 
    ```

3.  确保您的活动实现了`FragmentWithButtonHost`接口，并调用该`setText`方法：

    ```
    public MyActivity implements FragmentWithButtonHost {

        ...

        @Override
        public void onMyButtonClicked(View v) {
            getFragmentWithText().setText("TEST");
        }

        public FragmentWithText getFragmentWithText() {
            // Helper method to get current instance of FragmentWithText, 
            // or create a new one if there isn't any
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:37:56.683

那么你可以做这样的事情：

在您的活动中，提供两个片段的公共链接：

```
public FragmentNumberOne getFragmentOne() {
    return fragOne;
}

public FragmentNumberTwo getFragmentTwo() {
    return fragTwo;
} 
```

然后在片段一`TextView`的`Fragment`类中提供访问器：

```
public TextView getTextView() {
    return mTextView;
} 
```

然后在您的原件中`Fragment`您可以使用：

```
((MyActivity)getActivity()).getFragmentOne().getTextView().setText("Hello"); 
```

# java - 来自使用 Apache CXF 的 Web 服务的响应显示“没有绑定操作信息..”

> ID：14705362
> 
> 赞同：16
> 
> 时间：2013-02-05T10:31:46.327
> 
> 标签：java, eclipse, web-services, cxf

问题描述可能很长。由于我是 Web 服务的新手，请耐心等待并提供任何帮助。

**我所做的：** 我使用 Apache CXF RI 在 Java 中创建了一个 Web 服务。我只是创建了一个类并使用自下而上的开发方法来生成 SEI、WSDL 和 XML 文件。

**问题是什么：** 现在，如果我请求“ ”，它会***在调用参数未知的未知方法时***`http://localhost:8084/DeepThoughtWS/services/DeepThoughtPort/whatIsTheAnswer`产生输出为无绑定操作信息。 响应如下：

 *```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <soap:Fault>
      <faultcode>soap:Server</faultcode>
      <faultstring>No binding operation info while invoking unknown
      method with params unknown.</faultstring>
    </soap:Fault>
  </soap:Body>
</soap:Envelope> 
```

生成`WSDL`的是：

```
<wsdl:definitions xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:tns="http://ws.service.com/"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
name="DeepThoughtService" targetNamespace="http://ws.service.com/">
  <wsdl:types>
    <schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:tns="http://ws.service.com/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="http://ws.service.com/"
      schemaLocation="http://localhost:8084/DeepThoughtWS/services/DeepThoughtPort?xsd=deepthought_schema1.xsd" />
    </schema>
  </wsdl:types>
  <wsdl:message name="whatIsTheAnswerResponse">
    <wsdl:part element="tns:whatIsTheAnswerResponse"
    name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="whatIsTheAnswer">
    <wsdl:part element="tns:whatIsTheAnswer" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="DeepThought">
    <wsdl:operation name="whatIsTheAnswer">
      <wsdl:input message="tns:whatIsTheAnswer"
      name="whatIsTheAnswer"></wsdl:input>
      <wsdl:output message="tns:whatIsTheAnswerResponse"
      name="whatIsTheAnswerResponse"></wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="DeepThoughtServiceSoapBinding"
  type="tns:DeepThought">
    <soap:binding style="document"
    transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="whatIsTheAnswer">
      <soap:operation soapAction="" style="document" />
      <wsdl:input name="whatIsTheAnswer">
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output name="whatIsTheAnswerResponse">
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="DeepThoughtService">
    <wsdl:port binding="tns:DeepThoughtServiceSoapBinding"
    name="DeepThoughtPort">
      <soap:address location="http://localhost:8084/DeepThoughtWS/services/DeepThoughtPort" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

该`DeepThought`课程包括：

```
@WebService(targetNamespace = "http://ws.service.com/", portName = "DeepThoughtPort", serviceName = "DeepThoughtService")
public class DeepThought {
    public String whatIsTheAnswer(@WebParam(name = "arg0") String interviewer) {
        return ("The answer " + interviewer);
    }
} 
```

请求时的控制台输出也显示了一些错误：

```
Feb 05, 2013 3:59:14 PM org.apache.cxf.service.invoker.AbstractInvoker invoke
SEVERE: Invocation without a binding operation.
Feb 05, 2013 3:59:14 PM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
WARNING: Interceptor for {http://ws.service.com/}DeepThoughtService has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: No binding operation info while invoking unknown method with params unknown.
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:59)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:107)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:239)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:218)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:163)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:137)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:158)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:243)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(AbstractHTTPServlet.java:168)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:219)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Feb 05, 2013 3:59:14 PM org.apache.cxf.services.DeepThoughtService.DeepThoughtPort.DeepThought
INFO: Outbound Message
---------------------------
ID: 5
Response-Code: 500
Encoding: UTF-8
Content-Type: text/xml
Headers: {}
Payload: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>No binding operation info while invoking unknown method with params unknown.</faultstring></soap:Fault></soap:Body></soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T12:07:50.060

> 通常，如果传入的 soap 方法与 WSDL 不正确匹配，通常会发生此异常。在这种情况下，soap 消息无法映射到服务上的适当方法。CXF 只是不知道该怎么做。仔细检查传入的肥皂消息。

[以上解释的来源。](http://mail-archives.apache.org/mod_mbox/cxf-users/201111.mbox/%3C2519604.d0hMIHgkpf@dilbert.dankulp.com%3E)

可能的解决方案：

```
@WebService(targetNamespace = "http://ws.service.com/",
        portName = "DeepThoughtPort",
        serviceName = "DeepThoughtService",
        endpointInterface = "your.pck.DeepThoughtService",
        wsdlLocation = "WEB-INF/wsdl/DeepThoughtService.wsdl")
public class DeepThought {

    @WebMethod(action = "whatIsTheAnswer")
    public String whatIsTheAnswer(@WebParam(name = "arg0") String interviewer) {
        return ("The answer " + interviewer);
    }
} 
```

我要做的是将 WSDL 位置和 endpointInterface 添加到您的`@WebService`. 此外，您正在使用 Java-First 方法，因此您的方法应使用`@WebMethod(action = "whatIsTheAnswer")`. 因此，如果该方法没有注释`CXF`“理解”您的 Web 服务根本不包含任何方法并说：`No binding operation info while invoking unknown method with params unknown.`

**也可以看看：**

*   [使用 JAX-WS 开发服务](http://cxf.apache.org/docs/developing-a-service.html#DevelopingaService-DevelopingaServiceusingJAXWS)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-27T15:03:53.767

我有同样的问题。使用 cxf 2.6 2.7 像 chrome 或 firefox 这样的网络浏览器发出的这个请求没有奏效。我尝试使用 cxf 中的客户端，它可以工作！您的 Web 服务正在运行，但您无法通过 Web 浏览器发出请求，您需要一个客户端，因为客户端知道 XML 的要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-11T06:13:57.320

您应该在 url 末尾使用 wsdl（例如添加 ?wsdl）进行查询，以检查您的 Web 服务实现是否有效。浏览器不能作为soap 客户端发送任何soap 请求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-09T12:04:50.637

有人打电话给您`SOAP WebService`请求`GET`，但`SOAP WebServices`无法收到`GET`请求。你应该对他/她说不要打电话给我`SOAP WebService`的请求，或者用[这里描述](http://mywebservice.net/myapp/services/myservicepost01?wsdl)的请求`GET`打电话给我的网络服务。`GET`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-06T10:20:14.427

是的，已经回答您不能直接在浏览器 url 中访问该服务。您需要这样的客户端代码

```
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.interceptor.LoggingOutInterceptor;
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
import org.junit.Test;

@Test
public void testWhatIsTheAnswer() {

    JaxWsProxyFactoryBean factoryBean = new JaxWsProxyFactoryBean();

    factoryBean.getInInterceptors().add(new LoggingInInterceptor());
    factoryBean.getOutInterceptors().add(new LoggingOutInterceptor());
    factoryBean.setServiceClass(DeepThought.class);
    factoryBean.setAddress("http://localhost:8084/DeepThoughtWS/services/DeepThoughtPort");

    DeepThought service = (DeepThought) factoryBean.create();

    service.whatIsTheAnswer("some answer");

} 
```*

# sql - 基于两列的不同记录

> ID：14705364
> 
> 赞同：0
> 
> 时间：2013-02-05T10:31:47.017
> 
> 标签：sql, oracle, distinct

我有一个`testing`包含两个字段`name`和`com_date`. 表中的值如下所示。日期格式是`mm/dd/yyyy`

```
Name | Com_Date

MC  |  2/1/2013
MC  |  2/2/2013
MC  |  2/5/2013
MR  |  2/4/2013
MR  |  2/5/2013
MU  |  2/1/2013
MU  |  2/2/2013 
```

我需要根据不同的名称和最新日期查询记录。最新记录优先和基于名称的不同记录。喜欢：

```
MC  |  2/5/2013
MR  |  2/5/2013
MU  |  2/2/2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:33:20.773

您将需要使用具有以下功能的聚合`Max()`函数`GROUP BY`：

```
select name, max(com_date) MaxCom_Date
from yourtable
group by name 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/e389e/4)。

这也可以写成`row_number() over(partition by...)`：

```
select name, com_date
from
(
  select name, 
    com_date,
    row_number() over(partition by name order by com_date desc) rn
  from yourtable
) 
where rn =1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/e389e/3)

两者的结果是：

```
| NAME | MaxCom_Date |
---------------------
|   MC | 02/05/2013  |
|   MR | 02/05/2013  |
|   MU | 02/02/2013  | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:34:05.797

```
SELECT name, MAX(date)
 FROM table
 GROUP BY name
 ORDER BY 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:38:18.060

如果您的 com_date 列是日期格式，您可以执行以下操作：

```
SELECT name, TO_CHAR(MAX(com_date), MM/DD/YYYY) FROM testing GROUP BY name ORDER BY name ASC; 
```

如果您的日期不是日期格式，则需要在将其粘贴到 MAX() 之前对其进行转换

# ruby-on-rails - Gemset：此系统上当前未安装 Rails。

> ID：14705373
> 
> 赞同：2
> 
> 时间：2013-02-05T10:32:13.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gemset

```
macbook$ rvm gemset list_all

gemsets for ruby-1.9.2-p320 (found in /Users/macbook/.rvm/gems/ruby-1.9.2-p320)
   global

gemsets for ruby-1.9.3-p194 (found in /Users/macbook/.rvm/gems/ruby-1.9.3-p194)
   nice
   global     

macbook$ rvm use ruby-1.9.3-p194@nice
Using /Users/macbook/.rvm/gems/ruby-1.9.3-p194@nice with gemset global
macbook$ rails --version
Rails is not currently installed on this system. To get the latest version, simply type:

    $ sudo gem install rails

You can then rerun your "rails" command.

macbook$ sudo gem install rails
1 gem successfully installed.
macbook$ rails --version
Rails is not currently installed on this system. To get the latest version, simply type:

    $ sudo gem install rails

You can then rerun your "rails" command. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:32:13.333

```
macbook$ rvm use ruby-1.9.3-p194
Using /Users/macbook/.rvm/gems/ruby-1.9.3-p194
macbook$ rails --version
Rails 3.2.11 
```

# ios - 我可以限制要在 Core Data 中迁移的数据数量吗？

> ID：14705378
> 
> 赞同：0
> 
> 时间：2013-02-05T10:32:24.210
> 
> 标签：ios, core-data, database-migration

我只想问是否可以限制我将在新数据库版本上迁移的数据数量。例如，如果我的 Food 表中有 100 个对象，我只想将其中的 10 个迁移到新数据库中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:07:07.483

如果您使用*轻量级迁移*，则没有规定限制迁移的记录数量。这意味着您无法*自动*将其包含在架构迁移中。

但是，您当然可以跟踪您的用户正在使用哪个版本（非常简单地使用`NSUserPreferences`），然后如果检测到版本更改，只需删除您不想要的记录。只需获取这些记录（使用谓词过滤，或使用`fetchLimit`您的获取请求限制它们），遍历结果，`deleteObject:`然后`save:`.

# java - 如何取消退出 JFrame？

> ID：14705387
> 
> 赞同：0
> 
> 时间：2013-02-05T10:32:45.873
> 
> 标签：java, swing, jframe, windowlistener

> **可能重复：**
> [Java：如何取消应用程序退出](https://stackoverflow.com/questions/9249596/java-how-to-cancel-application-exit)

我为关闭 JFrame 设置了一个监听器：

```
addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        System.out.println("exit");
    }
}); 
```

但我想显示确认对话框，如果需要，取消关闭。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:38:25.110

```
JFrame frame = new JFrame ();
frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
frame.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent e) {
        if (confirmClose ())
            e.getWindow().dispose(); // Or even System.exit() here
    }
}); 
```

# php - Eclipse 的 PHP 混乱检测器

> ID：14705389
> 
> 赞同：68
> 
> 时间：2013-02-05T10:32:51.670
> 
> 标签：php, eclipse, unit-testing, phpmd

我安装了 PTI Eclipse 插件。

有可能改变`PDepend`，`CodeSniffer`并且`UnitTest`

当我尝试右键单击任何文件时，我也有一个`Mess Detector`选项，但单击它时没有任何反应。在搜索了所有配置选项后，我找不到`PHPMD`.

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T20:31:14.773

老问题，但似乎仍然对它感兴趣......我刚刚安装了 PTI 插件，没有提到 PHPMD，所以我想知道你从哪里得到“Mess Detection”菜单项？

对我来说，实际上 PTI 没有任何东西可以与 Eclipse Kepler SR2 一起使用。无论我尝试什么都没有发生。

我建议您使用 MakeGood 在 Eclipse 中运行 PHPUnit 测试并为您的项目设置 Jenkins（包括 PHPMD），这需要一些时间来设置，但一旦运行它就很棒：[Template for Jenkins Jobs for PHP Projects](http://jenkins-php.org/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-29T09:44:04.397

当 PHPMD 运行时，它首先搜索一个必须存在的**默认**PHP 可执行文件，这**不是**在“PHP 工具”中设置的，而是在“PHP”中设置的：

```
Window > Preferences > PHP > PHP Executables > (choose one) > [SET DEFAULT] 
```

但如果你没有这样做，你就会得到一个错误。

此时 PHPMD 运行，并将其输出放置在 PHPMD 视图中（而不是在控制台视图中），该视图通常显示在底部。如果它根本没有出现，它可能已被关闭或忽略。所以：

```
Window > Show View > PHP Tools (Others?) > PHPMD 
```

可能发生的另一件事是 PHPMD 什么也没检测到（视图出现但它是空的）。在这种情况下，您可以检查控制台视图以查看发生了什么。否则，您*可以*尝试修改由 PTI 运行的 phpmd.php 脚本，以便它记录它正在做的事情（例如，您可以将主例程包装在 try/catch 中），或者通过标准输出或在某处打开临时文件在您的系统上。

# razor - HtmlHelper 和 css 类的奇怪行为

> ID：14705393
> 
> 赞同：1
> 
> 时间：2013-02-05T10:32:59.150
> 
> 标签：razor, asp.net-mvc-4

我只是在研究 MVC 视图，遇到了一些奇怪的行为。

在我看来，我有以下几点：

```
@Html.EditorFor(model => model.Uprn, new { @class = "hidden"} ) 
```

输出是

```
<input class="text-box single-line" data-val="true" data-val-required="You must select an address" id="Uprn" name="Uprn" type="text" value=""> 
```

当我改变我的看法

```
@Html.TextBoxFor(model => model.Uprn, new { @class = "hidden"} ) 
```

输出是

```
<input class="hidden" data-val="true" data-val-required="You must select an address" id="Uprn" name="Uprn" type="text" value=""> 
```

正如您在第一个实例中看到的那样，它忽略了元素的类名，但在第二个实例中它没有！

有没有其他人注意到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:04:50.213

这是预期的行为。您必须使用模板将 HTML 属性分配给 EditorFor，但您可以使用给定的语法分配给 TextBoxFor。

# java - 隐藏收藏中的项目

> ID：14705401
> 
> 赞同：0
> 
> 时间：2013-02-05T10:33:17.127
> 
> 标签：java, hibernate, hibernate-criteria

我有两节课；

```
 User {
        private String name;
        private Set<Role> roles;
    }

Role {
    private String name;
    private boolean disabled;
} 
```

在我的应用程序中，用户可以获得分配的多个角色，这些角色存储在角色集中。可能会发生角色被禁用并且用户不再可以查看的情况。

我正在使用 Hibernate Criteria 来查询表；

```
Criteria criteria = session.createCriteria(User.class);
criteria.add(Restrictions.eq("name", name)); 
```

有没有办法查询用户表并使用此查询从他/她的角色集中“隐藏”禁用的角色，我应该在运行查询后处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:38:47.197

您可以使用 HQL执行[内部联接。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)

**高品质**

```
SELECT u FROM User u JOIN u.roles r WHERE r.disabled = 0 
```

这假设您已设置`boolean`映射到类型的列`Number(1)`

[在默认情况下使用 Oracle 数据库时，Hibernate 将布尔数据类型映射到什么？](https://stackoverflow.com/questions/1710198/what-does-hibernate-map-a-boolean-datatype-to-when-using-an-oracle-database-by-d)

**休眠标准**

```
List users = sess.createCriteria(User.class)
    .createCriteria("roles")
        .add( Restrictions.like("disabled", new Integer(0)))
    .list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:47:29.517

Simplest way, you can use [@Where](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection) annotation. It is Hibernate proprietary annotation and I don't like proprietary annotations, but it fits your case.

Sorry for the old links, but in the latest manual of Hibernate I don't find a good explanation for this annotation, though it is still valid.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:41:30.020

1.  您应该通过将角色的访问器方法实现到`User`类中来封装它。此方法将仅返回启用的角色。这解决了隐藏禁用角色的问题。

2.  其他问题是从所有用户的角色列表中禁用角色后删除角色。您可以按以下方式进行。创建负责用户/角色相关操作的特殊服务/经理。实现执行`disableRole()`以下操作的方法：禁用角色，然后遍历所有用户并从其角色列表中删除角色。但要小心：在这种情况下，角色一旦再次启用就不会自动出现在用户列表中。所以，我只会实现第一个想法（见上文）。

# java - 无法在 zk 中设置 listbox Mold="select" 中的选定值

> ID：14705404
> 
> 赞同：1
> 
> 时间：2013-02-05T10:33:22.270
> 
> 标签：java, gwt, extjs, zk

我正在使用 zk 6.5 并遵循 MVVM 模式，我在使用列表框 Mold="select" 时遇到了问题这是我的代码

这是我的 .zul 页面

```
<listbox style="width:70px" id="lstGrpNames" selectedItem="@bind(vmmodel.selSearchGroup)" mold="select" tabindex="0">

                    </listbox> 
```

//这是我的控制器代码

```
@Wire("#lstGrp")
    private Listbox lstGrp;

@AfterCompose(superclass=true)
    public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {
        Selectors.wireComponents(view, this, false);

        if (lstGrp != null) {

            lstGrp.setSelectedItem(lstGrp
                    .appendItem("--Select--", "")); //i want this to be the selected option while page is loaded

            if (this.groups != null && this.groups.size() > 0) {
                for (Group groupObj : this.groups) {
                    lstGrp.appendChild(new Listitem(groupObj.getName(),
                            groupObj));
                }
            }
            lstGrp.setSelectedItem(lstGrp.getItemAtIndex(0));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:11:08.320

这是你可以做到的方式..

演示代码的 ZUL 文件..

```
 <listbox model="@bind(vm.dataList)"  >
        <listhead>
            <listheader value="A"></listheader>
            <listheader value="B"></listheader>
            <listheader value="C"></listheader>

        </listhead>
        <template name="model" var="mymodel">
            <listitem>
                <listcell>

                    <textbox value="@bind(mymodel.a)" />
                </listcell>
                <listcell>
                    <label value="@bind(mymodel.b)" />

                </listcell>
                <listcell>
                    <label value="@bind(mymodel.c)" />

                </listcell>
            </listitem>
        </template>
    </listbox>
</window> 
```

演示代码的Java代码...

```
package com.team;

import java.util.ArrayList;
import java.util.List;

import org.zkoss.bind.annotation.AfterCompose;
import org.zkoss.bind.annotation.Command;
import org.zkoss.bind.annotation.ContextParam;
import org.zkoss.bind.annotation.ContextType;
import org.zkoss.bind.annotation.NotifyChange;
import org.zkoss.zhtml.Messagebox;
import org.zkoss.zk.ui.Component;
import org.zkoss.zul.ListModelList;

public class MyListbox  {

    private ListModelList<Data> dataList;

    @AfterCompose
    public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {
        try {
            dataList = new ListModelList<Data>();
            Data data;
            data = new Data("a1", "b1", "c1");
            dataList.add(data);
            data = new Data("a2", "b2", "c2");
            dataList.add(data);
            data = new Data("a3", "b3", "c3");
            dataList.add(data);
            dataList.addToSelection(dataList.get(0));

        } catch (Exception e) {

        }
    }

    @Command
    public void ctrlKeyClick(@org.zkoss.bind.annotation.BindingParam("item") String ctekKeyCode ){
         int keyCode =Integer.parseInt(ctekKeyCode);
         String s = "";
         switch(keyCode){
             case 65: s = "Ctrl+A";break;
             case 119: s = "F8";break;
             case 83:s="Ctrl+S";break;
             case 68:s="Ctrl+D";break;
         }
         Messagebox.show(s+" is pressed", "CtrlKey",
                 Messagebox.OK, Messagebox.EXCLAMATION);
        System.out.println("I am clicked");
    }

    @Command
    @NotifyChange("dataList")
    public void addNewItem(){
        Data data = new Data("", "", "");
        dataList.add(data);
    }

    public ListModelList<Data> getDataList() {
        return dataList;
    }

    public void setDataList(ListModelList<Data> dataList) {
        this.dataList = dataList;
    }

    public class Data {
        String a;
        String b;
        String c;
        public String getA() {
            return a;
        }
        public String getB() {
            return b;
        }
        public String getC() {
            return c;
        }
        public void setA(String a) {
            this.a = a;
        }
        public void setB(String b) {
            this.b = b;
        }
        public void setC(String c) {
            this.c = c;
        }
        public Data(String a, String b, String c) {
            super();
            this.a = a;
            this.b = b;
            this.c = c;
        }

    }
} 
```

在这里你可以检查这行代码..

```
dataList.addToSelection(dataList.get(0)); 
```

这将向您显示所选项目

# macros - 音频单元动态注册

> ID：14705405
> 
> 赞同：0
> 
> 时间：2013-02-05T10:33:25.183
> 
> 标签：macros, core-audio, sandbox, audiounit

我们开发了自定义音频单元和音频单元托管应用程序。我们正在尝试从应用程序动态注册自定义音频单元。下面的代码片段用于动态注册音频单元。（此代码片段在 Apple 技术说明 Technical Note TN2247 中提及）

```
#include <AudioUnit/AudioComponent.h>
extern AudioComponentPlugInInterface*
                MyExampleAUFactoryFunction(const AudioComponentDescription *inDesc);

OSStatus RegisterMyExampleAudioUnit()
{
    //  fill out the version number for the AU
    UInt32 theVersion = 0x00010000;

    //  fill out the AudioComponentDescription
    AudioComponentDescription theDescription;
    theDescription.componentType = kAudioUnitType_Effect;
    theDescription.componentSubType = 'EXAU';
    theDescription.componentManufacturer = 'MYCO';
    theDescription.componentFlagsMask = 0;

    //  Use the flag to indicate that this AudioComponent is Sandbox Safe
    theDescription.componentFlags = kAudioComponentFlag_SandboxSafe;

    //  call AudioComponentRegister()
    return AudioComponentRegister(&theDescription, CFSTR("My Company: MyExampleAU"),
                            theVersion, MyExampleAUFactoryFunction); 
```

在编译音频单元托管应用程序时，我们遇到了链接器错误。

> 架构 i386 的未定义符号：
> “_MyExampleAUFactoryFunction”，引用自：

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-31T10:24:46.257

我也遇到了这个问题，我的项目只有 C 和 Objective-C 代码。它有助于创建单个 cpp 类并将其也添加到项目中。我不知道链接器内部的更深层原因是什么。

# c# - linq 在 groupby 之后对分组元素进行排序

> ID：14705406
> 
> 赞同：1
> 
> 时间：2013-02-05T10:33:25.560
> 
> 标签：c#, linq, linq-to-sql

我有一个看起来像这样的表：

```
| FruitID | BasketID | FruitKind | HarvestTime |
|   23    |    2     |    6      |  1/13/2013  |
|   24    |    2     |    3      |  1/19/2013  |
|   25    |    5     |    4      |  1/21/2013  |
|   26    |    5     |    3      |  1/31/2013  |
|   27    |    5     |    6      |  2/3/2013   | 
```

我想查询某个列表中的所有水果，`BasketID`将结果分组`BasketID`，并在每个组中，查看最后一个`HarvestTime`并返回所有`BasketIDs`包含`FruitKind`3 或 4 水果的列表（FruitKind 可以有值1 到 8 之间）。例如，如果我们传入`BasketID`2 和 5，2`BasketID`会返回，因为它最新`FruitID`的 24 的 a`FruitKind`为 3，但`BasketID`5 的`FruitID`27 的类型为 6。

这就是我卡住的地方：

```
var TheQuery = (from a in MyDC.TableFruits
                where TheListOfBasketIDs.Contains(a.BasketID)
                group a by a.BasketID into g

                where .... "latest FruitID has FruitKind == to 3 || 4"

                select g.Key).ToList(); 
```

我需要在每个组中订购 HarvestTime，以便我可以测试最新水果的 FruitKind。感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:38:52.407

如果我理解正确，那么

```
var TheQuery = (from a in MyDC.TableFruits
                where TheListOfBasketIDs.Contains(a.BasketID)
                group a by a.BasketID into g
                let lastFruitKind = g.OrderByDescending(x => x.HarvestTime)
                                     .First().FruitKind
                where lastFruitKind == 3 ||
                      lastFruitKind == 4 
                select g.Key).ToList(); 
```

# iphone - iOS：在 App 内查找手机的服务提供商

> ID：14705410
> 
> 赞同：4
> 
> 时间：2013-02-05T10:33:32.780
> 
> 标签：iphone, ios, service-provider

我最近要求从**iOS App中找到移动设备的****服务提供商**。我不太确定这是否可能。

 **有人可以帮我解决这个问题。

另外，如果可能的话，请让我知道它是否会清除 AppStore Review。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:46:55.547

您可以使用 CTTelephonyNetworkInfo 和 CTCarrier 类获取服务提供商。只需执行以下操作：

添加此标题：

```
#import <CoreTelephony/CTCarrier.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h> 
```

并获取服务提供商名称：

```
CTTelephonyNetworkInfo *networkInfo = [[[CTTelephonyNetworkInfo alloc] init] autorelease];
NSString *serviceProvider = networkInfo.subscriberCellularProvider.carrierName; 
```

这是一个公共 API，您可以在应用商店的应用上使用它。

PS：不要忘记在您的目标中链接 CoreTelephony 框架。**

# java - Eclipse 向导：如何添加复选框列表？

> ID：14705432
> 
> 赞同：2
> 
> 时间：2013-02-05T10:34:11.843
> 
> 标签：java, eclipse, wizard, jcheckbox

我尝试创建一个带有复选框列表的 Eclipse 向导页面。

首先，我使用 JCheckBoxes 创建了一个 JList ：

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;

public class CheckBoxList extends JList<JCheckBox> {

private static final long serialVersionUID = 1L;
protected static Border noFocusBorder = new EmptyBorder(1, 1, 1, 1);

public CheckBoxList() {
    setCellRenderer(new CellRenderer());

    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            int index = locationToIndex(e.getPoint());

            if (index != -1) {
                JCheckBox checkbox = (JCheckBox) getModel().getElementAt(
                        index);
                checkbox.setSelected(!checkbox.isSelected());
                repaint();
            }
        }
    });

    setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
}

protected class CellRenderer implements ListCellRenderer<JCheckBox> {
    public Component getListCellRendererComponent(
            JList<? extends JCheckBox> list, JCheckBox value, int index,
            boolean isSelected, boolean cellHasFocus) {
        JCheckBox checkbox = value;
        checkbox.setBackground(isSelected ? getSelectionBackground()
                : getBackground());
        checkbox.setForeground(isSelected ? getSelectionForeground()
                : getForeground());
        checkbox.setEnabled(isEnabled());
        checkbox.setFont(getFont());
        checkbox.setFocusPainted(false);
        checkbox.setBorderPainted(true);
        checkbox.setBorder(isSelected ? UIManager
                .getBorder("List.focusCellHighlightBorder") : noFocusBorder);
        return checkbox;
    }

}
} 
```

然后我尝试在向导页面上查看它：

```
SashForm sashForm = new SashForm(parent, SWT.HORIZONTAL | SWT.NULL);  

TableViewer tableViewer = new TableViewer(sashForm, SWT.V_SCROLL | SWT.WRAP);
tableViewer.setContentProvider(ArrayContentProvider.getInstance()); 
Table table = tableViewer.getTable();
table.setLinesVisible(true);

CheckBoxList cbl = new CheckBoxList();
cbl.add(new JCheckBox("Box1"));
cbl.add(new JCheckBox("Box2"));

tableViewer.setInput(cbl); 
```

但我看到的只是一个空的白盒子。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:13:19.247

正如预期和不同帖子中建议的那样，有更简单的解决方案。

将标志 SWT.CHECK 添加到 TableViewer 会从 ArrayList 中创建一个带有复选框项目的列表。

因此不再需要带有 CheckBoxList 的包装器。

# php - 是否可以使用正则表达式编辑字符串？

> ID：14705441
> 
> 赞同：2
> 
> 时间：2013-02-05T10:34:34.590
> 
> 标签：php, regex

我想像下面的例子一样编辑字符串：

```
$str = '$variable$123' 
```

转换成

```
$str = '$variable$*123' 
```

我尝试了以下代码：

```
<?php

$str = '$variable$123';
$str= preg_replace('/(\$\w*\$.[0-9]*)+/i', '$1*$2', $str);
echo $str;

?> 
```

但是没有得到我想要的...

请帮忙.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:40:12.957

```
$str = preg_replace('/(\$\w+\$)(\d+)/', '$1*$2', $str); 
```

可能适合评论中给出的示例的另一个（更简单）版本

```
$str = preg_replace('/(\$\w+\$)/', '$1*', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:11:25.540

我得到了答案。

```
<?

$str1 = '$variable$123$variable2$';    
echo replace($str1);

$str2 = '$variable$123';
echo replace($str2);

function replace($str)
{
    $str = preg_replace('/(\$\w*\$)(\d+)/i', '$1*$2', $str);
    $str = preg_replace('/(\d+)(\$\w*\$)/i', '$1*$2', $str);        
    return $str
}

?> 
```

**输出**：

`$variable$*123*$variable2$`

`$variable$*123`

# javascript - Javascript/Jquery 代码跳过调试器中的整个函数

> ID：14705447
> 
> 赞同：0
> 
> 时间：2013-02-05T10:34:55.110
> 
> 标签：javascript, jquery, debugging, function

```
function bet() {
    $('table img').css('cursor', 'pointer');
    $('table img').click(function () {
        yourBetNumber = $(this).slice(0, -1);       
        $('#item' + yourBetNumber).clone().appendTo('#yourbet');
        $('table').hide();
        $('table img').css('cursor', 'pointer');
    });
} 
```

我有一个显示的项目表，每个项目都是不同的图像，并且在 html 中具有唯一的 ID。我想要做的是让用户点击他们想要投注的项目，并且应该将其注册为他们的投注号码。我还不确定切片部分是否正确，但这不是重点——即使我在代码中调用了该函数，它也根本没有执行。当我尝试进入下一行（尝试使用断点等）时，调试器也会完全跳过它。

知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:41:57.623

您需要`bet()`在`document.ready` Try this内调用

```
$('document').ready(function () {
    bet();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:48:12.150

```
function bet(el) {
    var yourBetNumber = $(el).slice(0, -1);
    $('#item' + yourBetNumber).clone().appendTo('#yourbet');
    $('table img').hide();
}

//Setting the CSS
$(document).ready(function () {
    $('table img').css('cursor', 'pointer');
});

//AddEventHandler
$('table img').click(function () {
    bet($(this)); //Call Function "bet" with the jQuery-Object
}); 
```

# iphone - UIViewAnimationOptionRepeat 在两个动画之间暂停

> ID：14705450
> 
> 赞同：1
> 
> 时间：2013-02-05T10:35:09.277
> 
> 标签：iphone, ios, animation

我想实现像 ECG（心跳监测器）一样的连续脉冲效果。目前我正在使用两个动画块。

```
[UIView animateWithDuration: 2.0f delay: 0.0f options: UIViewAnimationOptionRepeat  | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionTransitionNone | UIViewAnimationOptionOverrideInheritedDuration
                 animations:^{ [image1 setFrame:CGRectMake(0,200,320,70)];}
                 completion:^(BOOL finished){[image1 setFrame:CGRectMake(-320,200,320,70)];}];

[UIView animateWithDuration:2.0f delay:0.0f options:UIViewAnimationOptionRepeat | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionTransitionNone | UIViewAnimationOptionOverrideInheritedDuration
                 animations:^{ [image2 setFrame:CGRectMake(320,200,320,70)];}
                 completion:^(BOOL finished){[image2 setFrame:CGRectMake(0,200,320,70)];}];
[UIView setAnimationCurve:UIViewAnimationCurveLinear];

[UIView commitAnimations]; 
```

此动画在完成后重复，但在再次凝视之前需要稍作停顿。我想消除中间的停顿并实现连续流畅的动画。

![如果我不清楚你，我想达到这种效果..](../Images/629b5aa18612209b18d13998aa2d96e5.png)

任何 hep 将不胜感激..

提前致谢..

只是让你知道我也尝试过 UIViewAnimationCurveEaseInOut.. 但它仍然暂停..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T05:47:57.703

最后我发现......我使用下面的代码来实现流畅和非暂停的动画。

```
[UIView animateWithDuration:2.5f delay:0.0f options:UIViewAnimationOptionRepeat | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionCurveLinear
                 animations:^{ [image1 setFrame:CGRectMake(0,200,320,70)];}
                 completion:^(BOOL finished){}];

[UIView animateWithDuration:2.5f delay:0.0f options:UIViewAnimationOptionRepeat | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionCurveLinear
                 animations:^{ [image2 setFrame:CGRectMake(320,200,320,70)];}
                 completion:^(BOOL finished){}]; 
```

重要的变化是我不得不用**UIViewAnimationOptionCurveLinear**替换**UIViewAnimationCurveLinear**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:04:54.100

这对我有用，没有停顿。

您只更改位置，没有大小，因此更改中心而不是框架可能会更好

```
float originalX = image1.center.x;
[UIView animateWithDuration: 2.0f delay: 0.0f options: UIViewAnimationCurveLinear | UIViewAnimationOptionRepeat  | UIViewAnimationOptionAllowUserInteraction                         
          animations:^{ image1.center = CGPointMake(originalX + 320, image1.center.y);}
                         completion:^(BOOL finished){}]; 
```

您真的不需要在完成块中设置原始位置，“重复”选项会为您完成

# java - 如何获取正在运行的应用程序的 Java 调用堆栈

> ID：14705451
> 
> 赞同：17
> 
> 时间：2013-02-05T10:35:13.700
> 
> 标签：java, debugging, callstack

我正在开发非常庞大的基于 Java Web 的应用程序。由于在开发过程中没有进行适当的日志记录，因此我很难设置断点并调试应用程序，因为我不知道执行顺序。执行某些操作后，是否有任何机制可以获取正在运行的 java 应用程序的完整调用堆栈。

我在网上搜索了很长时间，但无法得出具体的解决方案。如果有什么适合的，请建议我。谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T10:44:44.843

方法 1：从命令行（JDK 发行版的一部分）使用 jstack 实用程序。

方法 2：向 java 进程发送信号 3，它将在 stdout 上转储堆栈跟踪。

方法 3：从应用程序内部调用 Thread.getAllStackTraces()：

```
public class StackTraceDumper
{
    public static dumpAllStackTraces ()
    {
        for (Map.Entry <Thread, StackTraceElement []> entry: 
            Thread.getAllStackTraces().entrySet ())
        {
            System.out.println (entry.getKey ().getName () + ":");
            for (StackTraceElement element: entry.getValue ())
                System.out.println ("\t" + element);
        }
    }
} 
```

然后`StackTraceDumper.dumpAllStackTraces()`在需要转储堆栈跟踪的地方使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T10:38:44.500

`Thread.dumpStack()` 将当前线程的堆栈跟踪打印到标准错误流。 `Thread.getAllStackTraces()` 返回所有活动线程的堆栈跟踪映射。 `Thread.getStackTrace()` 返回表示此线程的堆栈转储的堆栈跟踪元素数组。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-05T10:37:09.787

看看[`Throwable.getStackTrace()`](https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html#getStackTrace%28%29)。只需创建一个新的`Throwable`；你实际上不必这样做`throw`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T10:36:27.423

*您可以通过按Ctrl+Break*或发送信号 3（在基于 Unix 的系统上）触发堆栈转储。请注意，您将获得*每个线程*的堆栈跟踪。这将进入*标准错误*，因此请确保您的日志记录正在捕获它。

您可以通过编程方式执行此操作

```
Map<Thread, StackTraceElement[]> m = Thread.getAllStackTraces(); 
```

这是有关获取和分析堆栈跟踪的[更多信息。](http://weblogs.java.net/blog/synodinos/archive/2007/08/the_taming_of_t.html)

正如您所指出的，BTrace 是另一种可能性。这是一个关于使用它[的答案。](https://stackoverflow.com/a/4683514/12960)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-16T14:35:28.550

为什么不使用像 AspectJ 这样的 AOP 工具来捕获这些值并记录下来？您可以将 execution() 切入点与 after() 建议一起使用。对于非生产部署，您可以记录所有方法调用以及传递的值和返回值。对于生产环境来说，这将是太多的开销。为此，您可以将传递的值（在 AspectJ 建议中获得的 Object args[] ）存储在局部变量中，并且仅在出现异常时记录它。但即使在这种情况下，也会有一些性能损失，因为原始值将被装箱以作为 Object[] 传递给您的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T10:41:58.807

有一些选项：

*   在调试器中运行它，并暂停所有线程，然后你可以检查它们
*   使用 VisualVM 连接到正在运行的进程并触发线程转储。它随 JDK 一起提供。
*   在命令行上使用 jstack 来转储线程。

在您的代码中添加一些基本的日志记录：

```
new RuntimeException().printStackTrace(); 
```

这会将静态跟踪发送到 stderr

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T07:13:56.810

以防万一人们正在阅读这篇文章以了解如何获取当前线程堆栈的一个或多个类：

```
StackTraceElement[] stack = Thread.currentThread().getStackTrace();
String smallStack = "Calling classes: " + System.lineSeparator() + stack[2] + System.lineSeparator() + stack[3]; 
```

这将获取当前线程的堆栈。

*   `stack[0]`将是 getStackTrace 调用本身。
*   `stack[1]`将是您正在工作的代码行。
*   第一个“有趣”的堆栈元素也是`stack[2]`如此。`stack[3]`

# html - 密码学 - 如何让用户轻松的想法

> ID：14705455
> 
> 赞同：1
> 
> 时间：2013-02-05T10:35:25.243
> 
> 标签：html, cryptography, rsa

我正在考虑在 HTML 中构建一个类似 whatsapp 的服务（只是为了练习我的技能）。这个想法是以一种对用户来说容易的方式加密对话。我考虑过 RSA 加密，但用户必须向朋友提供密码或其他东西。还有哪些其他方法？我从来没有使用过加密，所以这真的更多是关于研究......

谢谢你的想法， Stiller_leser

PS：我知道stackoverflow不太喜欢讨论（至少他们说），但我真的需要一个起点:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:49:56.093

您可以在两个用户端自动生成公钥/私钥对。然后，用户不必在身体上给自己任何东西。我认为有几个图书馆可以做到这一点。

# android - 通过条目的第一个字母查询 sqllite 数据库

> ID：14705456
> 
> 赞同：0
> 
> 时间：2013-02-05T10:35:26.123
> 
> 标签：android, regex, sqlite

我创建了一个 TabLayout，我想通过所选选项卡显示我的数据库条目。这是带有查询的代码片段：

```
public Cursor filteredItems(int tabPosition) throws SQLException {
        Log.d(TAG, "filteredItems called, Parameter: "+tabPosition); 

        String filter = ""; 
        if(tabPosition == 0){
            filter = "[a-cA-C]%";
        }else if(tabPosition == 1){
            filter = "[d-fD-F]%";
        }else{
            Log.d(TAG, "default tab"); 
            filter = "[a-zA-Z]%";
        }

        Cursor cursor = null;
        try{
            open();
            String query ="SELECT _id, surname, prename, street, zipcode, telephone, email FROM "+Database.getMyDbTable()+" " +
                    "WHERE surname LIKE '"+filter+"';";
            Log.d(TAG,"Query "+query);
            cursor = database.rawQuery(query, null);
        }catch(Exception ex){
            Log.e(TAG, "Could not get list");
            CharSequence text = dataNotFound;
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        }

        return cursor;
    } 
```

不幸的是，过滤器不起作用——查询的结果总是空的（表不为空——我已经检查过了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:45:57.053

首先，LIKE 运算符不采用正则表达式。不幸的是，执行此操作的 REGEXP 运算符在 Android 中不受支持。

解决方案：将 LIKE 与逻辑 OR 一起使用。

```
String query ="SELECT _id, surname, prename, street, zipcode, telephone, email FROM "+Database.getMyDbTable()+" WHERE surname LIKE 'a%' OR surname LIKE 'b%' OR surname LIKE 'c%';"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:38:07.457

为此，您需要使用通配符。阅读[http://sqlite.awardspace.info/syntax/sqlitepg03.htm](http://sqlite.awardspace.info/syntax/sqlitepg03.htm)

尝试

```
SELECT _id, surname, prename, street, zipcode, telephone, email FROM table WHERE surname LIKE '<your letter(s)>%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:44:35.977

尝试类似：

```
"SELECT _id, surname, prename, street, zipcode, telephone, email FROM " + Database.getMyDbTable() + " WHERE substr(" + Database.getMyDbTable()  +",1) LIKE " + <yourletter> 
```

通过使用`substr`，您只比较第一个字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T13:19:49.767

`LIKE`不能与字符集匹配。

由于您只关心第一个字母，因此您可以使用`BETWEEN`：

```
SELECT ... FROM MyTable WHERE surname BETWEEN 'A' AND 'Czzzz' 
```

要同时处理大写和小写，请使用两个条件，或更改排序规则：

```
SELECT ... FROM MyTable WHERE surname BETWEEN 'A' AND 'Czzzz'
                           OR surname BETWEEN 'a' AND 'czzzz'

SELECT ... FROM MyTable WHERE surname COLLATION UNICODE BETWEEN 'A' AND 'Czzzz' 
```

仅当列或索引已使用相同的排序规则声明时，后者才能使用索引。

# ruby-on-rails - Rails 和 PostgreSQL 的双主键索引

> ID：14705459
> 
> 赞同：1
> 
> 时间：2013-02-05T10:35:29.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-activerecord

我在我的表中使用 UUID 作为主键，以这种方式创建：

**移民：**

```
class CreateAccounts < ActiveRecord::Migration
  def change
    create_table :accounts, :id => false do |t|
      t.uuid :uuid, :null => false
      t.timestamps
    end
    execute "ALTER TABLE accounts ADD PRIMARY KEY (uuid);"
    add_index :accounts, :uuid, :unique => true
  end
end 
```

**模型：**

```
class Account < ActiveRecord::Base  
    primary_key = :uuid
    base.default_value_for(:uuid, :allows_nil => false) { UUIDTools::UUID.random_create.to_s }
end 
```

但我现在看到我在主键 UUID 列上有双索引：

![主键上的双索引](../Images/f409008084548b04b4d151d83b0914f0.png)

**（1）**我猜这来自`ADD PRIMARY KEY`创建“XXX_pkey”索引，我可以安全地`add_index :accounts, :uuid, :unique => true`在这个迁移和正在运行的数据库中删除？

**(2)**可以看到只使用了手动添加的索引，没有使用自动添加的。这是随机的吗？

**(3)**这些索引中的哪些应该被删除，以及通过 Rails 的迁移在生产中做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:51:49.477

它们不是主索引，如何有一个索引主索引（由执行添加）和一个唯一索引（由 add_index 添加）。主键和唯一索引是有区别的。主键在唯一的地方不接受 NULL。如果您需要删除索引，只需创建一个将删除索引的迁移：

`remove_index(table_name, :column => column_name): Removes the index specified by column_name`.

来源：[http ://api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:05:39.443

定义为主键的列（根据定义）是唯一的。PostgreSQL（实际上是每个 DBMS）会自动创建一个唯一索引来确保这一点。

因此无需手动创建额外的唯一索引。

所以你应该删除你手动创建的那个（我不知道 Ruby，在普通 SQL 中这很简单`drop index ...`）

# javascript - 使用 Javascript 在 JSP 中动态分配重定向 href

> ID：14705463
> 
> 赞同：0
> 
> 时间：2013-02-05T10:35:54.330
> 
> 标签：javascript, jsp

这可能是一个愚蠢的问题，但我真的在那里停留了很长时间。希望有人可以帮忙并在这里解释根本原因。谢谢。

在我的处理 JSP 中，我有以下代码来调用 Javascript 函数。所有值都是通过 POST 动作从前端 JSP 获取的：

```
<a onclick="loadPredecessorPage(${param.predecessorName})" href="javascript:;">
   ${param.predecessorTitle}
</a> 
```

同时，在其上面的标题中，我有以下 javascript 函数：

```
<script language="javascript">
      function loadPredecessorPage(predecessorName)
      {
           var url = predecessorName +".jsp";
           document.location.href = url;
      }
</script> 
```

我用萤火虫来观察这些值。他们在价值观上是正确的。实际上，previousName 变量只是我自己的 MVC 设计中的模型类的名称。如果程序正在运行，用户应该能够单击链接并访问特定模型类的相应前端视图 JSP。

有人可以指出我在上面的代码中犯的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:14:52.763

如果您只想打开一个静态 URL，您可以简单地将完整的 URL`href`通过 JSP 传递给您的链接：

```
<a href="${param.predecessorName}.jsp">
   ${param.predecessorTitle}
</a> 
```

如果您仍然想在 JavaScript 函数中打开页面，请继续阅读。
您应该使用`window.location`代替`document.location`（请参见[此处](https://stackoverflow.com/questions/7857878/window-location-vs-document-location)）。如果您想以 HTML 格式传递 URL，您应该在相应的`data-`属性中执行此操作。此外，建议您在运行时通过 JavaScript 添加侦听器。

示例 HTML：

```
<a id="loadPage" href="#" data-url="http://stackoverflow.com">Load Page</a> 
```

jQuery代码：

```
$('#loadPage').on('click',function() {
    var url = $(this).data('url');
    window.location.href = url;
}); 
```

# grails - 在grails中，我的HTTPBuilder调用返回gsp页面的一个rest URL。如何显示gsp页面？

> ID：14705465
> 
> 赞同：0
> 
> 时间：2013-02-05T10:35:57.587
> 
> 标签：grails, groovy, httpbuilder

我有两个 grails 应用程序是 application1 和 application2。application1 使用 HTTPBuilder 调用返回一个模板（gsp 页面）的 application2。如何在我的应用程序中显示 gsp 页面（响应）1.我得到状态代码 200。之后我将如何显示页面？如何返回该响应？

```
static def users(String akey,String userName){
        try {
           def ret = null
           def http = new HTTPBuilder("http://192.168.1.7:8080/Play0.1/main/userGroup")
           http.request(Method.POST, ContentType.HTML) {
               uri.query = [ aKey:aKey, userName:userName]
               headers.'User-Agent' = 'Mozilla/5.0 Ubuntu/8.10 Firefox/3.0.4'
               response.success = { resp,html -> println resp.status

                 }
               response.failure = { resp -> println "Unexpected error: ${resp.status} : ${resp.statusLine.reasonPhrase}" }
           }
           return ret
       } catch (groovyx.net.http.HttpResponseException ex) {
           ex.printStackTrace()
           return null
       } catch (java.net.ConnectException ex) {
           ex.printStackTrace()
           return null
       }
   } 
```

该用户操作返回一个 gsp 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:23:36.317

正如维基百科中所说：

```
HTTP/1.1 302 Found
Location: http://www.iana.org/domains/example/ 
```

您应该按照`Location`标题获取内容。

您可以检查您的`application2`重定向与否，并考虑实施 REST 设计`application2`以避免 Web 服务中的重定向。

# jquery - 获取单击的 ActionLink id 并将其作为函数参数传递

> ID：14705466
> 
> 赞同：0
> 
> 时间：2013-02-05T10:35:59.510
> 
> 标签：jquery, ajax, asp.net-mvc, actionlink

已经为此苦苦挣扎了一天多，我如何将 actionlink id 传递给 jquery ajax 调用以启用部分页面更新。

```
<li>@Html.ActionLink(@item.strCountry, "Index", "Weather", new { id = Regex.Replace(@item.strCountry, " ", "-") }, new { @class = "getCities" })</li> 
```

jQuery

```
<script>
 $(function () {
     $(".getCities").click(function () {
         $.ajax({
             //url: this.href,
             url: '@Url.Action("pvDisplayListOfWeatherCities", "Weather")',
             type: 'GET',
             data: { id: $('#id').val() },
             dataType: 'Json',
             success: function (result) {
                 alert(result.test);
             },
             error: function () {
                 alert("error");
             }
         });
         return false;
     });
 });
</script> 
```

谢谢

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:48:13.103

将参数添加为 HTML 属性

```
<li>@Html.ActionLink(@item.strCountry, "Index", "Weather", 
    new { id = Regex.Replace(@item.strCountry, " ", "-") }, 
    new { @class = "getCities", data_param1 = Regex.Replace(@item.strCountry, " ", "-") })</li> 
```

这将呈现：

```
<li><a class="getCities" href="/Weather/Index/val" data-param1="val">country</a></li> 
```

然后使用jQuery`.attr()`方法：

```
<script>
 $(function () {
     $(".getCities").click(function () {
         $.ajax({
             //url: this.href,
             url: '@Url.Action("pvDisplayListOfWeatherCities", "Weather")',
             type: 'GET',
             data: { id: $(this).attr("data-param1") }, // <-- param1 etc.
             dataType: 'json',
             success: function (result) {
                 alert(result.test);
             },
             error: function () {
                 alert("error");
             }
         });
         return false;
     });
 });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:40:08.303

如果我正确理解了这个问题，那么你会改变：

`data: { id: $('#id').val() },`

至

`data: { id: $(this).attr('id') },`

**编辑**- 你所需要的只是`data: { id: $(this).text() },`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:05:14.960

您没有`id`为此链接设置属性，您只是设置用作参数来构建链接本身的 id。您应该简单地`id`为此标签添加属性

```
<li>@Html.ActionLink(@item.strCountry, "Index", "Weather", 
    new { id = Regex.Replace(@item.strCountry, " ", "-") }, 
    new { @class = "getCities", @id = Regex.Replace(@item.strCountry, " ", "-")})</li> 
```

如果您希望它与链接中的参数相同`id`。然后更新这个

```
data: { id: $('#id').val() }, 
```

对此

```
data: { id: $(this).attr('id') }, 
```

获取`id`此 HTML 标记的实际属性。

# arrays - 将 listeof 字母数组分配给数字数组列表

> ID：14705468
> 
> 赞同：1
> 
> 时间：2013-02-05T10:36:08.090
> 
> 标签：arrays, list, python-3.x

我是新手，我的问题很简单。我有两个数组列表，如下所示：

```
Grade = ["A","A-","B+","B","B-","C+","C","C-","D","F"]
GPA = [4,3.75,3.25,3,2.75,2.25,2,1.75,1,0] 
```

如何从列表中分配 A = 4、A- = 3.75 等等。

请帮忙！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:40:22.460

只需使用以下`zip`功能：

```
grade_gpa = zip(Grade, GPA)
for pair in grade_gpa:
    print(pair)
>>>
('A', 4)
('A-', 3.75)
('B+', 3.25)
('B', 3)
('B-', 2.75)
('C+', 2.25)
('C', 2)
('C-', 1.75)
('D', 1)
('F', 0) 
```

此外，您可以从 zip 对象构建字典：

```
grade_gpa_dict = dict(grade_gpa)
print(grade_gpa_dict['A'])
>>> 4 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T12:35:26.127

使用内置的 map/reduce：

```
import functools

a = map(lambda x,y : {x:y}, Grade, GPA)
b = functools.reduce(lambda x,y: dict(x.items() + y.items()), a)

b["A"] => 4 
```

# java - Windows 7 中的 Java 7 文件删除

> ID：14705473
> 
> 赞同：2
> 
> 时间：2013-02-05T10:36:24.387
> 
> 标签：java, windows-7

```
 Path path = Paths.get("D:/tmp/a/aa/aaa");
    Files.delete(path);
    path = Paths.get("D:/tmp/a/aa");
    Files.delete(path); 
```

这是我得到的例外：

```
Exception in thread "main" java.nio.file.DirectoryNotEmptyException: D:\tmp\a\aa
  at sun.nio.fs.WindowsFileSystemProvider.implDelete(WindowsFileSystemProvider.java:264)
  at sun.nio.fs.AbstractFileSystemProvider.delete(AbstractFileSystemProvider.java:103)
  at java.nio.file.Files.delete(Files.java:1077)
  at test.Test.main(Test.java:44) 
```

虽然文件夹内没有文件/文件`aa`夹。

`aa`当我使用 Windows 资源管理器（此处）访问文件夹并移动到`D:\`根目录时，会观察到这种行为。

如果我关闭资源管理器寡妇，该程序运行正常。

我知道 Windows 有时会锁定文件夹，即使在这种情况下异常消息`java.nio.file.DirectoryNotEmptyException: D:\tmp\a\aa`似乎是错误的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:43:39.883

是的，错误消息是错误的，但 Windows 不会让文件或文件夹被删除，因为另一个进程打开了一个句柄。这无法从 Java 中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:46:59.693

另一个提示，使用“/”而不是“\\”，因为 Java 应该是独立于平台的，而“/”在 linux 和 windows 上都可以识别。

# jquery - jQuery click 只工作一次

> ID：14705476
> 
> 赞同：2
> 
> 时间：2013-02-05T10:36:28.380
> 
> 标签：jquery, lightbox

我正在使用[http://buckwilson.me/lightboxme/](http://buckwilson.me/lightboxme/)脚本。

这是HTML（页面上有多个`.team-member`）：

```
<div class="team-member">
    <div class="featured-photo"></div>
        <h3></h3>
        <h4></h4>
    <div class="member-info">
        <h5></h5>
        <p class="member-photo"></p>
    </div>
</div> 
```

这是我的 JS：

```
<script>
jQuery('.team-member').click(function() {
    jQuery(this).children('.member-info').lightbox_me({
        centered: true
    });
});
</script> 
```

我可以单击每个`.team-member`，当我单击页面时，灯箱会弹出并消失......就像它应该做的那样，但是我只能这样做一次。如果我再次单击，灯箱不会再次弹出。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:18:39.690

发生这种情况是因为 lightbox_me 正在将 DOM 元素从其初始位置移出并在应用其样式之前将其附加到主体。如果您熟悉的话，这类似于 jQuery 对话框的行为方式。

因为选择依赖于父级层次结构，所以下次点击事件发生时，`jQuery(this).children('.member-info')`不会返回匹配的对象，并且对 lightbox_me 的调用失败。

您可以通过在灯箱化之前克隆对象然后将**destroyOnClose**标志设置为 true 来解决此问题。

```
jQuery('.team-member').click(function() {
    jQuery(this).children('.member-info').clone().lightbox_me({
        centered: true,
        destroyOnClose: true
    });
}); 
```

[jsfiddle](http://jsfiddle.net/QpK7G/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:05:24.447

由于您没有提供任何小提琴链接，我不确定，但您可以尝试以下操作，看看它是否有效

```
jQuery('.team-member').live('click',function() {
    jQuery(this).children('.member-info').lightbox_me({
        centered: true
    });
}); 
```

# java - XML 保留前导空格，但不保留尾随空格

> ID：14705478
> 
> 赞同：0
> 
> 时间：2013-02-05T10:36:31.010
> 
> 标签：java, xml, whitespace

假设我有这个：

```
<value> Some value</value> 
```

尝试通过以下方式读取值：

```
value=someParent.getElementsByTagName("value").item(0).getTextContent().trim(); 
```

给了我`"Some value"` ，但实际的文字是`" Some value"`。

我知道`trim()`省略了前导和尾随空格，但是是否有现有的方法（除了实际上添加一些代码行来特别处理这种特定情况）以便只消除尾随空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:40:06.853

正则表达式可以帮助您：

```
s = s.replaceAll("\\s+$", ""); 
```

在你的例子`replaceAll()`中实际上可以代替：`trim()`

```
value=someParent.getElementsByTagName("value").item(0).getTextContent().replaceAll("\\s+$", ""); 
```

但我肯定会尝试使它更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:44:10.200

您可以尝试使用 Apache commons StringUtils 中的方法：http: [//commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html)

他们有`strip`- 方法，您可以在其中查看源代码，例如根据您的需要调整 stripEnd 方法。

# dll - 如何在 QTP vbscript 中使用 PDFbox dll

> ID：14705483
> 
> 赞同：0
> 
> 时间：2013-02-05T10:36:44.530
> 
> 标签：dll, vbscript, qtp, pdfbox

我需要在 QTP vbscript 中使用 PDFbox dll ，最初我尝试在 ikvmbin-7.2.4630.5 的帮助下将 PDFbox jar 转换为相应的 PDFbox dll，它成功了，这样我就可以在 c# 和 VB.NET 中使用 pdfbox.dll 类似我需要与 vbscript - QTP 一起使用。最初尝试使用 DotNetFactory.CreateInstance 访问转换后的 PDFbox.dll

```
Set TestPDFDoc = DotNetFactory.CreateInstance("org.apache.pdfbox.pdmodel.PDDocument","D:\\PDF\\PDF\\pdfbox-1.7.1.dll") 
```

在执行它时会抛出我，但它会抛出我在任何加载的程序集中找不到类型'org.apache.pdfbox.pdmodel.PDDocument'

谁能帮帮我谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:10:14.553

我认为您不需要转义反斜杠，即使用`\\`而不仅仅是`\`? 我不知道 QTP，但在 VBScript 中，您不需要转义反斜杠。

即尝试

```
Set TestPDFDoc = _
    DotNetFactory.CreateInstance("org.apache.pdfbox.pdmodel.PDDocument", _
                                 "D:\PDF\PDF\pdfbox-1.7.1.dll") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:28:41.240

最有可能的原因是找不到您的 .dll 引用的一个或多个程序集。使用[.NET 依赖项查看器工具](https://stackoverflow.com/q/227886/113116)（例如，开源[ILSpy](http://ilspy.net/)）确定引用的程序集并将它们放置到与*pdfbox-1.7.1.dll*相同的文件夹中。我猜你需要在你的 .dll 旁边放置一些 IKVM.NET 程序集。

# php - 无法读取从 PHP 返回的 JSON 对象

> ID：14705486
> 
> 赞同：0
> 
> 时间：2013-02-05T10:36:48.380
> 
> 标签：php, jquery, ajax, json

我将 JSON 对象发送到 PHP 文件，PHP 进行一些操作并返回 JSON 字符串：

```
$('button#indexOpener').on('click', function() {
    var aUsername = $('input#edUsername').val();    
    var aPassword = $('input#edPassword').val();

    if (($.trim(aUsername) != '') && ($.trim(aPassword) != '')) {
        var str = $("#form_login :input").serializeArray();
        $.post("<?php echo URL; ?>ajax/checklogin", str, function(data) {
            alert(data.edUsername); 
        }); 
    }
    else {
        alert('Please insert a valid username and password');
        alert("<?php echo URL; ?>/ajax");   
    }
}); 
```

PHP 回显一个 JSON 对象：

```
echo json_encode($_POST); 
```

但是当我尝试用 jQuery 提醒数据时：

```
function(data) {
  alert(data.edUsername);   
} 
```

正在显示未定义的消息。我确信这是愚蠢的，但我看不出我做错了什么，你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:56:30.293

我没有看到为`$.post()`. jQuery 将尝试识别返回的内容类型，但您需要设置正确的标题。所以，你需要添加：

```
header("Content-Type: application/json"); 
```

之前`echo json_encode`，或者你应该在JS代码中设置dataType：“json”（的第四个参数`$.post()`）：

```
$.post("<?php echo URL; ?>ajax/checklogin", str, function(data) {
    alert(data.edUsername); 
}, "json"); 
```

这样，jQuery 就会知道返回的数据是 JSON 格式并且应该被解析。没有它，jQuery 将检查`Content-Type`标题并根据它应用解析器。假设如果没有设置自定义内容类型标头，它将以 HTML 形式返回返回数据。实际上，这是一个常见的字符串。

> 如果我只是 alert(data) 返回 {"edUsername":"qqq" "edPassword":"qqq"} 但如果我提醒 alert(data.edUsername); 我得到“未定义”？

JSON 是一个常规字符串，应该在客户端进行解析。jQuery 将您的响应检测为纯文本或 HTML，并且不会将 JSON 解析为 Javascript 对象。如果数据是对象，您将在警报窗口中获得 [object Object]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:01:01.190

我认为这应该是这样使用`$.getJSON()`：

```
var str = $("#form_login").serialize();

$.getJSON("<?php echo URL; ?>ajax/checklogin", {data:str}, function(data){
     alert(data.edUsername); 
}); 
```

# extjs - 在javascript中从另一个页面刷新页面

> ID：14705489
> 
> 赞同：1
> 
> 时间：2013-02-05T10:36:56.710
> 
> 标签：extjs, page-refresh

我站在一页。我单击了一个按钮，它在另一个选项卡中打开了一个新页面。在新选项卡中完成该过程后，它将被关闭。在新选项卡中输入的数据也应在旧选项卡中更新。那么如何刷新旧页面呢？
目前，新选项卡在该过程后刚刚关闭。现在可以看到旧页面了吗？直到刷新数据才更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:45:29.300

尝试从弹出窗口内部调用此 javascript：

```
self.opener.location.reload(); 
```

或者

```
window.opener.location.reload(); 
```

并将其包装在一个卸载函数中，如

```
window.onunload = function(){ ... }; 
```

应该以这种方式工作（但尚未测试）。

# c# - 从 C# 打开的 Outlook 新邮件窗口似乎有焦点，但我的应用程序仍然有它

> ID：14705494
> 
> 赞同：3
> 
> 时间：2013-02-05T10:37:17.137
> 
> 标签：c#, outlook, office-interop, office-automation

我有一个问题，我已经尝试解决好几天了，但没有运气！

在我的 Windows 窗体应用程序中，我有一个网格。一列包含一个电子邮件地址。当用户双击此列时，我想通过 Outlook 自动化打开一个新的电子邮件窗口。此窗口应具有焦点并允许用户立即键入。

一切正常，当：

*   我正在从 Visual Studio 运行我的应用程序。
*   或者我的应用程序有焦点。

但是，当我运行我的 .exe**并且**双击该列时 Outlook 具有焦点时，会发生以下情况：

*   新的邮件窗口按预期打开
*   光标在新邮件窗口中闪烁（如预期的那样）
*   当用户开始输入时，光标在 Outlook 中仍然闪烁，**但**输入的文本出现在我的应用程序的网格中，而不是在 Outlook 中。

我能够用一个上面有一个文本框的简单表单来重现这个问题。

我使用以下代码：

```
private void textBox1_MouseDoubleClick(object sender, MouseEventArgs e)
{
 OpenOutlookMail(textBox1.Text);
}

private void OpenOutlookMail(string to)
{
  MailItem item = OutlookApp.CreateItem(OlItemType.olMailItem) as MailItem;
  item.To = to;
  item.Subject = string.Empty;
  item.Body = string.Empty;

  item.Display();
}

protected Application OutlookApp
{
    get
    {
        if (mOutlookApp == null)
        {
            mOutlookApp = new Application();

        }
        return mOutlookApp;
     }
  } 
```

我已经尝试过的是

*   在调用 OpenOutlookMail 之前通过 this.Activate() 激活我当前的表单
*   激活 MailItem 检查器对象
*   通过自动化激活 Outlook 的 ActiveWindow 和 ActiveExplorer
*   如此处所述使用 AutoIt[与 MSDN 论坛上的 MS Word 类似的问题](http://social.msdn.microsoft.com/Forums/en-US/worddev/thread/58b5f15c-a637-4d96-b7b7-05378107eb17)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:01:46.310

您可以尝试在 textBox1_MouseDoubleClick(...) 方法中使用具有低优先级的 Dispatcher.BeginInvoke(...) 来调用 OpenOutlookMail()。它通常有助于解决像这样的焦点管理问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T07:58:00.190

我前段时间写过关于聚焦背景窗口的文章：

[http://blog.sebastianbrand.com/2010/02/activate-form-in-background.html](http://blog.sebastianbrand.com/2010/02/activate-form-in-background.html)

```
private void label1_Click(object sender, EventArgs e)
{
  // mainform.BringToFront(); // doesn't work
  BeginInvoke(new VoidHandler(OtherFormToFront));
}

delegate void VoidHandler();

private void OtherFormToFront()
{
  mainform.BringToFront(); // works
} 
```

如果您确实有坏窗口的句柄，请尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:11:51.430

我无法用您的代码重现问题。我使用了 Microsoft.Office.Interop.Outlook 版本 14.0.0.0，并且在每次测试中我都完成了邮件窗口的焦点。

正如你所说，

> 在以下情况下一切正常： •我从 Visual Studio 运行我的应用程序。•<strong>或者我的应用程序具有焦点。

也许在打开邮件窗口之前尝试集中您的表单和/或让您的应用程序休眠会起作用

```
private void textBox1_MouseDoubleClick(object sender, MouseEventArgs e)
{
    this.Focus();
    System.Threading.Thread.Sleep(500);
    OpenOutlookMail(textBox1.Text);
} 
```

互操作通常有奇怪的行为。：秒

# jsf - 存放计数器

> ID：14705499
> 
> 赞同：1
> 
> 时间：2013-02-05T10:37:37.057
> 
> 标签：jsf

在一个 JSF 应用程序中，我有一个会话范围的 bean，它具有多个网页的各种 getter 和 setter，当访问者单击“提交”按钮时，页面中输入的值被发送到输出文件，以便稍后与另一个应用程序处理.

我希望跟踪特定日期数据写入文件的次数，尽管我最终可能会使用数据库，但我希望将计数器存储在所有访问该文件的人都会更新的地方页。我的理解是，如果我将它作为静态 int 存储在托管 bean 中，则该值将不会保留在不同的会话中。我有一个非 bean 类，它存储一些实用方法，例如处理日期，我的问题是，非 bean 类是否会存储一个可以从任何会话访问的静态变量，并用于跟踪信息，比如计算提交？

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:42:38.303

> *我的理解是，如果我将它作为静态 int 存储在托管 bean 中，则该值将不会保留在不同的会话中。*

这是不正确的。静态变量是应用程序范围的。它们不依赖于实例，而是依赖于类。一个类在应用程序的生命周期中只加载一次。你自己也可以通过一个相当简单的实验来解决这个问题。

您唯一关心的可能是线程安全。使用[`AtomicInteger`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)or[`AtomicLong`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html)代替，`int`这样您就不会在增量期间冒竞争条件的风险。

### 也可以看看：

*   [基本 Java 教程 - 了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:43:03.397

只要您不重新启动服务器，任何静态字段都将实现您的目标，即使是会话范围内托管 bean 中的那个。静态变量属于类，而不是实例，并且托管 bean 的类仅由 JVM 加载一次。由于您可能会从多个线程访问该静态变量，因此您需要在修改其值时进行同步。

# oracle-adf - 如何找出 Oracle ADF 移动应用程序中的错误

> ID：14705503
> 
> 赞同：0
> 
> 时间：2013-02-05T10:37:46.203
> 
> 标签：oracle-adf, jdeveloper

正如我尝试使用 Oracle ADF-Mobile 教程[http://docs.oracle.com/cd/E18941_01/tutorials/BuildingMobileApps/ADFMobileTutorial_2.html中的示例应用程序项目](http://docs.oracle.com/cd/E18941_01/tutorials/BuildingMobileApps/ADFMobileTutorial_2.html)

但我面临一些错误弹出窗口，显示在应用程序中![在此处输入图像描述](../Images/77462db16d4f2b5f9539a58fa2be61f5.png)

如何调试或跟踪默认弹出的错误？因为我认为 Web 服务调用可能会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:08:39.377

调试您的应用程序。请参阅：[http ://docs.oracle.com/cd/E35521_01/doc.111230/e24475/debugging.htm](http://docs.oracle.com/cd/E35521_01/doc.111230/e24475/debugging.htm)

或者检查您的 system.log，但我不建议您这样做，因为您只能获得非常有限的信息。

# c# - 如何在 Linq 查询中使用我自己的函数？

> ID：14705512
> 
> 赞同：1
> 
> 时间：2013-02-05T10:38:05.830
> 
> 标签：c#, asp.net-mvc, linq, filter

我想通过使用我的自定义函数检查它们来获取一些元素。

我有人员表：

```
public class Person
{
        public int Id { get; set; }
        public DateTime BirthDay { get; set; }
        public string Name { get; set; }
        ...
} 
```

我应该使用我的`GetAge()` **和其他功能**来过滤人员列表。我的以下代码不起作用：

```
public List<Person> FilterPersons(int ageFrom, int ageTo...etc..) 
{
    var all = Database.Persons.AsQueryable(); 

    all = from item in all
          where GetAge(item.BirthDay) > ageFrom
          select item;

    all = from item in all
          where GetAge(item.BirthDay) < ageTo
          select item;

    // other operations
    ...
} 
```

我想我可以这样写。在执行此操作的每个步骤中：

```
List<Person> newList = new List<Person>();
foreach (var item in all)
{
   var itemAge = Common.GetAge(item.BirthDay);
   if (itemAge > AgeFrom)
   {
       newList.Add(item);
   }
}
all = newList.List(); 
```

但这不是我认为的最佳方式，因为我应该按许多标准进行过滤。它将以低速工作。

如何在 Linq 查询中使用我的函数？

**编辑：** 例如，我展示了 GetAge() 函数。我有很多这样的功能。我想知道如何使用我的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:40:48.960

好吧，你不能。

如果您想在 SQL 查询的 Where 子句中使用条件，则需要将它们直接编写为 linq.Expression 以便实体可以解析它并将其转换为 SQL，而不是外部函数。

像这样的作品：

```
DateTime date = DateTime.Now.AddDays(ageFrom);
all = from item in all
      where item.BirthDay > date
      select item; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:48:10.087

[查询表达式](http://msdn.microsoft.com/en-gb/library/bb397676.aspx)内置于 C# 编译器中，因此，它只理解内置于编译器中的表达式。

例如，当您使用`where`关键字时，它会将其转换为对方法的调用[`Where<TSource>(this IQueryable<TSource> source, Func<TSource, bool> predicate)`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)。

Linq To Objects 和 Linq To SQL 也是如此。更重要的是，使用 Linq To SQL，编译器必须将查询表达式转换为 SQL，这无法知道您的`GetAge`方法的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:48:40.353

或者您可以使用以下语法：

```
DateTime date = DateTime.Now.AddDays(ageFrom);
all = item.Where(x => x.BirthDay > date).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:59:14.140

为什么不使用`List<Person>.FindAll()`方法并传入方法过滤器作为谓词？你会使用这样的方法。

```
List<Person> filteredPersons = allPersons.FindAll(FilterPersons); 
```

以下是您将用作过滤器的示例方法。

```
bool FilterPersons(Person p)
{
    if(//enter criteria here to determine if you want to select the person)
        return true;
    else
        return false;
} 
```

做你想做的这可能是你需要的代码。

```
bool FilterPersons(Person p)
{
    var itemAge = Common.GetAge(item.BirthDay);

    if( itemAge > AgeFrom )
        return true;
    else
        return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:01:46.833

假设您可以对结果应用过滤器：

您可以应用普通过滤器（在`linq`表达式中），然后将您的函数应用于结果。当然，你需要`refactor`你的方法。

像这样的东西：

```
var result= Users.Where(s=>s.Name).ToList();
result= MyFilter(result); 
```

# c - grep 或在 Android 上查找

> ID：14705515
> 
> 赞同：2
> 
> 时间：2013-02-05T10:38:22.927
> 
> 标签：c, linux, android-ndk

这些默认情况下没有安装在 Android 4.2.1 上，所以是否可以交叉编译例如[GNU](http://ftp.gnu.org/gnu/grep/) `grep`的源代码或者`find`让它在 Android 上运行？（最好**不必root设备或在**[PLAY](https://play.google.com/store)之外安装一些应用程序，例如busybox。）是否有任何缺失的依赖项会阻止这种情况？我正在 Ubuntu 10.0.04 上开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:44:02.320

这不是一个完整的答案，因为我没有尝试构建`grep`或`find`. 然而，一般来说，为 Android 构建 GNU 实用程序是完全可能的。为此，最好的选择是：

1.  下载安卓原生开发包
2.  [参考](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)[NDK](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)构建 Android独立工具链[`docs/STANDALONE-TOOLCHAIN.html`](http://www.kandroid.org/ndk/docs/STANDALONE-TOOLCHAIN.html)
3.  只需使用正常`./configure && make`机制构建相关的 GNU 实用程序。

然后，您需要将生成的二进制文件复制到您的 Android 设备上，您可以使用`adb push`. 您可能需要安排将它们放入`/data/`某个地方，因为它们`/mnt/sdcard`通常被标记为不可执行。

## 缺少依赖项

在实际构建过程中您会发现的主要问题是 Android 不使用标准 GNU `libc`(glibc)。相反，它使用自己的，称为仿生。这确实错过了某些重要的 API - 例如，宽字符串支持。

我发现对于一些 GNU 实用程序来说这是可以的，并且可以通过最少的源代码更改来编译它们。

但是，如果遇到麻烦，最好使用这些实用程序的其他版本，这些实用程序通常设计用于在底层 libc 方面具有更大的灵活性。具体来说，之前关于使用的建议`busybox`非常好。如果您不想从 Android 市场安装它，可以在[此处](http://code.google.com/p/busybox-android/)找到源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:42:18.730

奇怪的。我有他们`/system/xbin/*`。可能更幸运的是busybox。`busybox find` `busybox grep`不确定是否在 Android 4.2 上默认安装了busybox，但它是一个非常常见的二进制文件。

# joomla - Joomla：如何检查另一个用户（不是当前用户）是否在线

> ID：14705518
> 
> 赞同：1
> 
> 时间：2013-02-05T10:38:43.673
> 
> 标签：joomla, joomla-component

这可能真的很简单，但我已经绕着圈子试图让它工作。我的强项是 HTML/CSS 而不是 PHP。

我有一个 3rd 方组件，我正在自定义它以在发布广告的用户在线时显示。到目前为止，我还无法让它工作。

我一直在将从组件获得的用户 ID 传递给 Joomla 用户对象。

```
$user =& JFactory::getUser($var_from_component); 
```

然后我尝试检查是否设置了来宾标志，因为我知道如果用户登录它将为零，但如果用户没有登录则为空。

```
if($user->guest==0) {
  echo "User is online";
 } else {
  echo "User is offline";
 } 
```

我还尝试了三个等号，因为我想检查该值实际上设置为零而不是空值，所以基本上我一直在弄乱这种方法的变体太久了。如果有人知道更好的检查方法，请说。我还尝试检查会话表中的用户 ID，但我对 mySQL 查询并不那么精通。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:29:36.697

您可以查询会话表以检查用户是否登录 -

```
$db     =& JFactory::getDBO();
$query      = 'SELECT COUNT(userid) FROM #__session AS s WHERE s.userid = '.(int)$userid;
$db->setQuery($query);
$loggedin   = $db->loadResult();
if($loggedin){
    //echo 'User is logged in';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:16:44.077

试试这个，

你可以检查像

```
$user = &JFactory::getUser($user_id);
//print_r($user);
if(isset($user->guest))
    echo "Online";
else
    echo "Offline"; 
```

希望这可以帮助你..

# javascript - 使用 jQuery 执行 post 请求并显示下一页

> ID：14705525
> 
> 赞同：0
> 
> 时间：2013-02-05T10:38:53.197
> 
> 标签：javascript, jquery, ajax

我已经为使用 POST 方法的预订引擎设置了预订引擎 - 我使用了 XDate 库（效果很好）我的问题是预订引擎应该在执行 POST 后显示预订引擎网站上的新页面。

我添加了一个 jsbin 链接来说明代码 [http://jsbin.com/ikowuk/1/](http://jsbin.com/ikowuk/1/)

我正在尝试实现类似于此站点的 synxis 预订引擎（尽管使用 jQuery） [http://www.stoneaston.co.uk/](http://www.stoneaston.co.uk/)

```
function booking_engine(bookingObj)
{
  $.post('https://gc.synxis.com/rez.aspx', {
    'Chain': bookingObj.chain_id,
    'lang': '1',
    'locale': 'en-GB',
    'step': '1',
    'altdest': 'Country',
    'Hotel': bookingObj.booking_id,
    'arrive': bookingObj.start_date.uk_date,
    'depart': bookingObj.end_date.uk_date,
    'adult': bookingObj.adults,
    'child': bookingObj.child,
    'rooms': bookingObj.rooms
  }, function(data) {
    console.log(data);
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:59:09.897

根据我的评论，只是一个选项：您可以制作带有`hidden`属性集的表单。

`<form id="form1" action="https://gc.synxis.com/rez.aspx" method="POST" style="display: none;"><input id="submit" type="submit" value="Submit"></form>` *（或替代隐藏）*

* * *

`$.post()`然后，您可以将表单的隐藏元素设置为您希望发布的值，而不是执行 jQuery 。因此，对于您的示例，添加到表单中的隐藏元素之一可能是：

`$('#form1').append('<input name="booking_id" type="text" value="'+bookingObj.booking_id+'">');`

一旦您创建了所有隐藏元素并将它们附加到隐藏表单中，您就可以提交该表单：

`$('#submit').trigger('click');`

* * *

一旦你触发了那个点击，你所有的数据就会被发布到你的 rez.aspx 页面，你也“跟着它走”。

# javascript - jQuery - 为每个父母分别选择孩子

> ID：14705527
> 
> 赞同：0
> 
> 时间：2013-02-05T10:38:57.100
> 
> 标签：javascript, jquery, jquery-selectors

看看这个例子[http://jsfiddle.net/hKASH/](http://jsfiddle.net/hKASH/)

```
 <div id="a">
    <div class="parent">
        <span>one</span>
        <span>two</span>
        <span>three</span>
    </div>
    <div class="parent">
        <span>one</span>
        <span>two</span>
    </div>
</div>

$('#a .parent').children().slice(1).css('float', 'right'); 
```

我想为每个父母分别选择孩子组，“一个”必须留在左边，其他人必须向右。

现在看起来我有包含 5 个元素的 children()，我想要 2 个包含 3 个和 2 个元素的组。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:40:50.663

您必须分两步完成：

```
$('#a .parent').each ( function () {
  $(this).children().slice(1).css('float', 'right');
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:42:01.947

您必须为**每个**父元素执行此操作。

```
$('#a .parent').each(function (i, item) {
    $(this).children().slice(1).css('float', 'right');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:42:17.687

```
var children;
$.each('.parent',function(i,v){children[i] = $(v).children('span')}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:43:00.127

使用[each()](http://api.jquery.com/jQuery.each/)函数循环遍历每个父级

试试这个

```
 $('#a .parent').each(function(){
   $(this).children().slice(1).css('float', 'right');
 }); 
```

[在这里摆弄](http://jsfiddle.net/bipen/7SvDC/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:52:48.913

我试过这个，它似乎工作：

```
$('.parent').each(function(){
    $(this).find('span:first').css('float', 'right');
}); 
```

但是，是的，您将需要每个..

# php - Mysql 'where' 条件不适用于 SQL 查询？

> ID：14705537
> 
> 赞同：0
> 
> 时间：2013-02-05T10:39:37.093
> 
> 标签：php, mysql, phpmyadmin

```
$sql="select last_logged_out_at from `users`";
$sql.="WHERE xxxxxxx = '11112000'";
$rslt=mysql_query($sql);
$row=mysql_fetch_array($rslt);
print_r($row); 
```

不工作的“条件”；如果我删除 where 然后它从表中获取数据并且如果我将条件更改为表中的其他值，那么它也可以工作。特定列“xxxxxxx”此查询不起作用请帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:41:09.887

在第一行的结尾和第二行的开头之间没有空格：

`$sql.=" WHERE xxxxxxx = '11112000'";`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:42:28.683

我认为这是因为“用户”和“WHERE”之间没有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T10:49:06.360

因为 db 列`"xxxxxxx"`（您在`WHERE`子句中使用）是 MySQL 关键字。所以，使用：

```
WHERE `xxxxxxx` = '11112000' 
```

代替

```
WHERE xxxxxxx = '11112000' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:45:44.090

您还可以在单​​个 sql 中编写查询。

```
$sql="select last_logged_out_at from users WHERE xxxxxxx = '11112000'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:49:49.297

```
$sql="select last_logged_out_at from `users` "; //enter a space after `users`
$sql.=" WHERE xxxxxxx = '11112000'"; // or enter a space before WHERE 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T11:19:56.520

更改数据库中的列名。名称包括像'_'这样的符号，所以它不会冲突。

# mobile - 黑莓入门指南

> ID：14705541
> 
> 赞同：0
> 
> 时间：2013-02-05T10:40:03.397
> 
> 标签：mobile, blackberry, blackberry-webworks, blackberry-playbook

我主要在 iOS 和 android 上开发应用程序，现在我想从黑莓开发开始。我可以看到有许多可用于黑莓开发的平台。

谁能告诉我应该选择哪一个来开始开发？

我正在考虑 Webworks 框架。使用 Webworks，该应用程序是否可以作为本机工作？或者我应该和其他一些平台一起去。我想针对所有三个设备平台 bb10、bb 智能手机和平板电脑。

对我来说更容易的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T13:56:02.520

> > 谁能告诉我应该选择哪一个来开始开发。

RIM 有一个不错的网页，您可以在其中选择最适合您的技术：

[黑莓开发者 :: 平台选择](https://developer.blackberry.com/develop/platform_choice/index.html)

如果您想支持所有东西：BB5-6-7、BB10 和平板电脑，唯一的解决方案是使用[WebWorks](https://developer.blackberry.com/html5/documentation/getting_started_with_webworks.html)。

> > 使用 Webworks，该应用程序是否可以作为本机工作？

不，不会的。WebWorks 使用浏览器作为应用程序和智能手机功能之间的容器和桥梁。

> > 对我来说更容易的是什么？

如果您开发“商务风格”的应用程序，没有花哨的图形、效果和过渡，那么 WebWorks 应该可以解决问题。

不过，您应该在 BB6/7、BB10、PlayBook 上彻底测试您的应用程序。因为一些 API在 WebWorks 的较新版本中[发生了变化。](https://developer.blackberry.com/html5/documentation/porting_apps_playbook_tablet_os_blackberry_webworks.html)

为了让您的开发更轻松，您可以尝试使用一些[社区 HTML5 框架，例如：bbUI](https://developer.blackberry.com/html5/documentation/using_javascript_libraries_frameworks_in_webworks.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:52:01.377

您将不得不考虑您的需求，但听起来像 HTML5 将是您的路线。看看[Appcelerator](http://www.appcelerator.com/)和[PhoneGap](http://phonegap.com/)。

不过，我会对 OS5 设备提出警告——那些浏览器不是基于 WebKit，因此可能会出现这样的结果……嗯……foobar 会浮现在脑海中。你的应用程序越简单，你就越有可能让所有东西都能正常工作。

还要考虑到 RIM（呃，对不起，“黑莓”，或“以前称为 RIM 的公司”）正在推动 OS10 HARD，所以较低的 OS 版本还会存在多久是一个争论的问题；）

# cuda - CUDA 每个块的不同线程用于不同的功能

> ID：14705545
> 
> 赞同：0
> 
> 时间：2013-02-05T10:40:06.970
> 
> 标签：cuda

我制作了一个 CUDA 程序，但遇到了一个问题。我有两个功能：

1.  `__global__ void cal_freq_pl(float *, char *, char *, int *, int *)`
2.  `__global__ void cal_sum_vfreq_pl(float *, float *, char *, char *, int *)`

我这样调用第一个函数： `cal_freq_pl<<<M,512>>>( ... );` M 是一个大约 15 的数字，所以我并不担心。512 是我的 GPU 上每个块的最大线程数。这工作正常，并为所有 M*512 值提供了预期的输出。

但是当我以类似的方式调用第二个函数时： `cal_sum_vfreq_pl<<<M,512>>>( ... );` 它不起作用。在调试了那个函数的废话之后，我终于发现它以这些尺寸运行：`cal_sum_vfreq_pl<<<M,384>>>( ... );`，比 512 少 128。它显示 512 没有错误，但结果不正确。

我目前只能访问 Compute1.0 arch 并且在 Windows 64 位机器上拥有 Nvidia Quadro FX4600 显卡。

我不知道为什么会发生这种行为，我确信第一个函数正在运行 512 个线程，而第二个函数只运行 384 个（或更少）。

有人可以建议一些可能的解决方案吗？

提前致谢...

编辑：这是内核代码：

```
__global__ void cal_sum_vfreq_pl(float *freq, float *v_freq_vectors, char *wstrings, char *vstrings, int *k){
    int index = threadIdx.x;
    int m = blockIdx.x;
    int block_dim = blockDim.x;
    int kv = *k; int vv = kv-1; int wv = kv-2;
    int woffset = index*wv;
    int no_vstrings = pow_pl(4, vv);
    float temppp=0;
    char wI[20], Iw[20]; int Iwi, wIi;
    for(int i=0;i<wv;i++) Iw[i+1] = wI[i] = wstrings[woffset + i];
    for(int l=0;l<4;l++){
            Iw[0] = get_nucleotide_pl(l);
            wI[vv-1] = get_nucleotide_pl(l);
            Iwi = binary_search_pl(vstrings, Iw, vv);
            wIi = binary_search_pl(vstrings, wI, vv);
            temppp = temppp + v_freq_vectors[m*no_vstrings + Iwi] + v_freq_vectors[m*no_vstrings + wIi];
    }
    freq[index + m*block_dim] = 0.5*temppp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:22:35.580

看来您在第二个内核中分配了很多寄存器。由于硬件资源限制（例如每个块的寄存器数量），您不能总是达到每个块的最大线程数。

CUDA 提供了一个工具来帮助计算每个块的正确线程数。

[http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls](http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls)

您还可以在 CUDA 安装目录中找到此 .xls 文件。

# url - 重写 url，但用于不同的域

> ID：14705553
> 
> 赞同：2
> 
> 时间：2013-02-05T10:40:28.647
> 
> 标签：url, rewrite

我们需要重写我们网站中的一些 url（我们使用 NGINX），以便它们显示为不同的域。

例如，我们希望 www.mydomain.com/category 变为 www.newdomain.com

任何相关的网址也应遵循相同的路径

例如，

www.mydomain.com/category/news 变为 www.newdomain.com/news

这在服务器端是否可行，如果可以，我们该怎么做？

重要通知： mydomain.com/category 是一个“虚拟”文件夹，我的意思是服务器中没有包含文件的目录，但它是从脚本自动创建的。

此致

# iphone - 更改图像亮度时应用程序变慢

> ID：14705554
> 
> 赞同：0
> 
> 时间：2013-02-05T10:40:31.923
> 
> 标签：iphone

设置我正在使用的 UIImage 的亮度

```
CGFloat brightness = 2.0;

UIGraphicsBeginImageContext(self.Input_Image.size);
CGRect imageRect = CGRectMake(0, 0, self.Input_Image.size.width, self.Input_Image.size.height);
CGContextRef context = UIGraphicsGetCurrentContext();

// Original image
[self.Input_Image drawInRect:imageRect]; 

// Brightness overlay
CGContextSetFillColorWithColor(context, [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:brightness].CGColor);
CGContextAddRect(context, imageRect);
CGContextFillPath(context);

UIImage* resultImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是大图像的应用程序变得很慢......任何人都可以帮助我吗？提前致谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:04:54.070

您可以使用仪器来查看性能落后的地方。哪个功能负责它。尝试使用仪器。

# facebook - Facebook 移动 iframe 应用

> ID：14705559
> 
> 赞同：0
> 
> 时间：2013-02-05T10:40:49.057
> 
> 标签：facebook, mobile, facebook-apps, facebook-iframe

快速提问。我为 Facebook 创建了许多 iframe 应用程序，这些应用程序在 PC、Mac 等设备上运行良好，但在移动设备上却不行。当您访问该页面时，该图标不会显示。我认为这是因为我没有定义移动网站 URL。我现在已经这样做了，但我仍然没有看到图标。我错过了重点吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:33:02.907

你的意思是什么图标？如果您正确定义了您的移动网站网址，您的应用程序将显示在搜索字段中。如果您在谈论页面选项卡，则根本不可能。移动本机应用程序不支持此功能。但您始终可以在新闻源中链接到您的移动网站网址！

# java - Java 时区：为什么需要偏移

> ID：14705561
> 
> 赞同：1
> 
> 时间：2013-02-05T10:40:54.763
> 
> 标签：java

我的要求是这样的：

我在数据库和时区中以毫秒为单位节省时间。例如，以毫秒为单位的时间为 `1223123123232`long 而时区为`Asia/Calcutta`. 我必须将其转换`Africa/Asmara`为时区。

```
long l = 1223123123232l;
TimeZone tz = TimeZone.getTimeZone("Asia/Calcutta");
long tzOff = tz.getOffset(l);
java.util.Date d = new Date(l-tzOff);   // WHY THIS??
DateFormat df = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");
df.setTimeZone(TimeZone.getTimeZone("Africa/Asmara"));// required timezone
String s = df.format(d);
System.out.println(s); 
```

要检查我指的是这个：[链接](http://www.timezoneconverter.com/cgi-bin/tzc.tzc)

我的问题是：

1.  如果时区只是不同格式的时间表示（地理区域从 GMT 偏移），为什么我需要从实际时间中减去偏移时间`(l-tzOff)`？
2.  为什么我不能忽略保存在数据库中的时区，而只考虑我想要转换日期的时区？

就像是：

```
long l = 1223123123232l;
java.util.Date d = new Date(l);
DateFormat df = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");
df.setTimeZone(TimeZone.getTimeZone("Africa/Asmara"));// required timezone
String s = df.format(d);
System.out.println(s); 
```

**我的系统时区是`Asia/Calcutta`，我想将`Africa/Bujumbura`时区中的日期转换为时`Europe/Vatican`区。上面的代码在这种情况下不起作用？为什么会这样？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:50:02.560

[Java 日期不知道时区](http://tshikatshikaaa.blogspot.nl/2012/09/about-java-timezone-and-calendar-caveats.html)。因此，如果我在 New-York 保存 14H00，它将与 Paris 中的 14H00 不同，尽管毫秒值是相同的。您需要使用唯一的参考来保存日期。人们经常选择GMT+0。

如果需要跨时区查看当地时间，可以使用我[在这里](http://yourworldclocks.juplo.com/)开发的工具。

要回答您的问题：

1.  时区不是时间的表示，它是时间的本地化。减去偏移量的原因是确保所有时间都是根据相同的参考定义的。
2.  因为你会得到错误的结果和错误的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:50:32.673

[`new Date(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)**采用自GMT**纪元以来的毫秒数。由于在您的情况下`l`是自其他某个时间点（即 1970 年 1 月 1 日，亚洲/加尔各答 00:00:00）以来的毫秒数，您必须先将其转换为 GMT。这是通过减去相关的时区偏移量来完成的。

# iphone - 我们如何使用 HID 键盘按键来截取 iphone/ipad 设备的屏幕截图？

> ID：14705564
> 
> 赞同：0
> 
> 时间：2013-02-05T10:41:09.403
> 
> 标签：iphone, ios5, xcode4.5

我想创建一个应用程序来帮助我们使用 HID 键盘按键进行屏幕截图，但我不知道如何检测 HID 键盘按键。请帮助我并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:55:55.403

i dont know about that special keyboard but using of this code you can take a scree shot from your application. You can put this code in button action and check it's working but about your keyboard i have no idea.

```
UIGraphicsBeginImageContext(self.window.bounds.size);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * data = UIImagePNGRepresentation(image);
[data writeToFile:@"foo.png" atomically:YES]; 
```

UPDATE April 2011: for retina display, change the first line into this:

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
UIGraphicsBeginImageContext(self.window.bounds.size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:33:55.910

您可以使用`Keyboard notification`

```
#pragma mark - Keyboard notification
- (void)registerForKeyboardNotifications
{    
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeShown:)
                                                 name:UIKeyboardWillShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];
}

-(void)keyboardWillBeShown:(NSNotification*)aNotification
{

}
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{

} 
```

# mysql - 投票网络应用程序的数据库结构建议

> ID：14705569
> 
> 赞同：0
> 
> 时间：2013-02-05T10:41:35.063
> 
> 标签：mysql, sql

我正在设计一个民意调查应用程序，用户可以在其中创建一个或多个民意调查，其中包含问题和每个问题的预定义答案，到目前为止没问题，我认为最简单的方法是使用 3 个表格：

投票表：

```
id title description 
```

问题表：

```
id poll_id question 
```

答案表：

> id question_id 答案

问题是，用户可能会在民意调查的提问流程中选择不同的行为，例如，正常的民意调查将从问题 1 转到问题 N（最后一个问题是 N），但在我的情况下，用户可能想要用户选择问题 4 的答案 2 以跳转到问题 7 并忽略它们之间的其余部分。

我对如何在数据库中存储这种行为有点困惑，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:33:02.297

看起来你需要类似的东西：

![在此处输入图像描述](../Images/143981791d4bca6b1c542eff3398e48d.png)

看看这里的键的构造：

*   QUESTION 用于[识别](https://stackoverflow.com/a/10658665/533120)与 POLL 的关系，生成的自然键不仅提供唯一性，还提供排序：QUESTION_NO 可以单调增加，同时保持相同的 POLL_ID。
*   POSSIBLE_ANSWER 中的 ANSWER_NO 实现等效效果。
*   对于任何给定的问题，用户最多可以选择一个答案。这就是 ANSWER_NO在 ACTUAL_ANSWER 主键**之外的原因。**
*   另一方面，USER_ID 保存在 ACTUAL_ANSWER PK 中，以允许多个用户选择相同的答案。
*   理论上，{POLL_ID, QUESTION_TEXT} 上的 QUESTION_TABLE 中应该有一个键，以防止两个不同的问题在同一个投票中具有相同的文本。但是，QUESTION_TEXT 可能很长，并且可能以 BLOB 的形式实现，大多数 DBMS 无法索引或通过键进行约束。POSSIBLE_ANSWER.ANSWER_TEXT 也存在类似的困境。

如果用户跳过一个问题，只需省略相应的 ACTUAL_ANSWER。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:56:56.127

```
Answer > NextQuestion table    

AnswerID    NextQuestionID 
```

根据您的回答，下一个问题在这里定义

# android - runonuithread 在android中不起作用

> ID：14705570
> 
> 赞同：0
> 
> 时间：2013-02-05T10:41:37.780
> 
> 标签：android

我的工作任务是读取 sd 卡文件，我想在 textview 上显示所有带有位置的 sdcard 文件，但是，我的代码正在成功读取，但是，当我找到解决方案 runonuithread 后读取文件不起作用时，我无法更新 textview 文本但是，它也不起作用。我的代码如下所示：

```
public void scan (final File path) {

            try
            {
                for (final File f : path.listFiles()) {
                    if (f.isFile()) {
                      scannedfiles=scannedfiles+1;
                      progresspercentage=scannedfiles*100/FilesCount;   

                      MainActivity.this.runOnUiThread(new Runnable() {

                          @Override
                          public void run() {
                              lbl_scan.setText("SCANING:"+f.getAbsolutePath());\\first time only change text after didn't change
                              Toast.makeText(getApplicationContext(),"Files:"+f.getAbsolutePath(),Toast.LENGTH_SHORT).show(); 
                          }
                      });

                    }
                    else {
                        if(!f.getName().equals("Android"))
                        {
                            scan(f);
                        }
                    }
                }

            }
            catch (Exception e) 
            {

            }
        } 
```

我在代码下面调用扫描功能：

```
 File root = new File (Environment.getExternalStorageDirectory().getAbsolutePath());
 scan(root); 
```

任何人都可以帮助我不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:48:51.507

您可能正在 UI 线程上调用扫描！如果整个 UI 在操作期间被阻塞，这应该很明显。

尝试：

```
new Thread() {
    public void run() {
        scan(root);
    }
}.start(); 
```

# java - Netbeans 7.2 启动时报错

> ID：14705578
> 
> 赞同：0
> 
> 时间：2013-02-05T10:41:55.547
> 
> 标签：java, netbeans, netbeans-7

当我启动 Netbeans 时，它显示以下消息：

> 警告 - 无法安装某些模块：编辑器宏 - 在实现版本“19”中请求了模块编辑器库，但只找到了“20”。IDE 平台 - 需要名为 org.netbeans.modules.editor.macros/0-1 的模块，但未找到。Spring Web MVC - 需要名为 org.netbeans.modules.spring.beans/0-1 的模块，但未找到。由于上述问题，无法安装另外 22 个模块。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:48:11.697

一些方面：

*   删除或重命名您的 netbeans 用户目录（有关其位置，请参见[此处](http://wiki.netbeans.org/FaqWhatIsUserdir)）。这将使 NB 就像安装后一样。
*   你有当前版本的spring插件吗？
*   您是否从以前的 NB 安装中导入了任何插件？
*   如果您在 Vista 上运行，请在通过更新中心安装/更新时关闭*用户帐户控制（请参见*[此处](http://wiki.netbeans.org/FaqInstallPluginVista)）
*   [错误 218373（已修复）](http://netbeans.org/bugzilla/show_bug.cgi?id=218373)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T17:09:33.810

即使我在安装 gwt4nb 模块时也遇到了这个问题。只需卸载 netbeans 7.2 并安装 Netbeans 7.3。问题会解决的！！！

# asp.net-mvc-3 - 脚手架模板使用cshtml

> ID：14705585
> 
> 赞同：6
> 
> 时间：2013-02-05T10:42:02.763
> 
> 标签：asp.net-mvc-3, t4, scaffolding

当我使用以下命令生成控制器和视图时

```
scaffold controller <Entity> -force -repository -DbContextType "XXX" -Area YYY 
```

它生成 .aspx（Web 表单）页面而不是 .cshtml（剃刀）

如何更改此默认行为。我想当我第一次创建一个新项目时，它要求我选择默认视图引擎，而我选择了错误的一个（webforms）。

还有任何用于 MVC 3 的免费或便宜的 T4 模板可以生成更好、更实用的视图。即使用 webgrid / jQUery 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:12.820

解决方案范围的脚手架配置存储在`scaffolding.config`与解决方案文件位于同一文件夹中的位置。

在安装阶段`MvcScaffolding`包启动`init.ps`脚本（您可以在`<packages folder>\MvcScaffolding.<version>\tools`目录中找到它）。脚本计数`aspx`和视图`cshtml`以及`vbhtml`基于这些数字决定将使用哪个视图脚手架。这是这个逻辑的一部分：

```
function InferPreferredViewEngine() {
    # Assume you want Razor except if you already have some ASPX views and no Razor ones
    if ((CountSolutionFilesByExtension aspx) -eq 0) { return "razor" }
    if (((CountSolutionFilesByExtension cshtml) -gt 0) -or ((CountSolutionFilesByExtension vbhtml) -gt 0)) { return "razor" }
    return "aspx"
}

# Infer which view engine you're using based on the files in your project
$viewScaffolder = if ([string](InferPreferredViewEngine) -eq 'aspx') { "MvcScaffolding.AspxView" } else { "MvcScaffolding.RazorView" }
Set-DefaultScaffolder -Name View -Scaffolder $viewScaffolder -SolutionWide -DoNotOverwriteExistingSetting 
```

因此，您可以使用以下命令切换视图脚手架：

```
Set-DefaultScaffolder -Name View -Scaffolder "MvcScaffolding.RazorView" -SolutionWide
Set-DefaultScaffolder -Name View -Scaffolder "MvcScaffolding.AspxView" -SolutionWide 
```

或者您可以手动编辑`scaffolding.config`文件并替换`ScaffolderName`标签中属性的值：

```
<Default DefaultName="View" ScaffolderName="put here either MvcScaffolding.RazorView or MvcScaffolding.AspxView" /> 
```

# asp.net - 从 ASP.Net Web 表单中的另一个下拉选择中填充下拉列表

> ID：14705589
> 
> 赞同：0
> 
> 时间：2013-02-05T10:42:19.587
> 
> 标签：asp.net, sqldatasource

从 CountryDropDownList 中选择国家后，我试图将数据填充到 Company DropDownList 中。完整的 ASP.Net Web 表单新手。所以请见识少见。

我一直在尝试仅在 .aspx 页面上执行此操作，但我不完全确定是否可以执行此操作。我的代码如下，它根本不填充 CompanyDropDownList 上的任何内容。问题是我一直在编写查看不同来源的代码，但我想我不完全确定问题出在哪里以及我做错了什么。如果有人可以解释一下并发现我的错误，那将非常有帮助。

```
 <asp:DropDownList 
                        ID="CompanyDropDownList" 
                        runat="server" 
                        OnSelectedIndexChanged="CompanyDropDownList_SelectedIndexChanged"
                        DataSourceID="CompanyNameSqlDataSource" 
                        DataTextField="CompanyName" 
                        DataValueField="CompanyID" 
                        AppendDataBoundItems="True" 
                        AutoPostBack="True">
                    </asp:DropDownList>
                    <asp:SqlDataSource 
                        ID="CompanyNameSqlDataSource" 
                        runat="server" 
                        ConnectionString="<%$ ConnectionStrings:BIGroupCostConnectionString %>"
                        OnSelecting="CountryNameSqlDataSource_Selecting" 
                        SelectCommand="SELECT CompanyName, countryID FROM Company Where CompanyID = @CompanyID">
                        <SelectParameters>
                            <asp:ControlParameter 
                                Name="CountryID"
                                ControlID="CountryDropDownList" 
                                PropertyName="SelectedValue"
                                Type= "String"/>
                            <asp:Parameter Name="CountryID" />
                        </SelectParameters>
                     </asp:SqlDataSource> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:55:43.600

我认为问题在于您将公司下拉列表作为参数而不是您提到的国家/地区。

```
 <SelectParameters>
   <asp:ControlParameter Name="CompanyID" ControlID="CompanyDropDownList" 
    PropertyName="SelectedValue" Type= "String"/>
 <asp:Parameter Name="CompanyID" /> 
```

不应该是你的国家控制吗？

阿德马尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:18:34.730

发现了问题。问题是以下代码行。删除该行正确显示了数据。

```
<asp:Parameter Name="CountryID" /> 
```

# google-plus - 尝试使用使用 Google 服务帐户检索的访问令牌进行访问时，GooglePlus userProfile API 返回错误

> ID：14705590
> 
> 赞同：2
> 
> 时间：2013-02-05T10:42:20.493
> 
> 标签：google-plus, service-accounts

我能够使用 Google 服务帐户检索访问令牌，但是当我尝试使用相同的访问令牌来检索 GooglePlus 用户配置文件 API 时，我收到了下面提到的错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

我在使用 Google 服务帐户检索访问令牌时使用了范围值，`https://www.googleapis.com/auth/plus.me`并且我能够获取访问令牌，但是如果我尝试使用相同的访问令牌来请求用户配置文件 API-即 `https://www.googleapis.com/plus/v1/people/me?prettyprint=true`我得到上面的错误。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:38:04.263

这很可能是因为已完成身份验证的帐户没有 Google+ 帐户/个人资料。对于测试，您可能希望将“我”替换为相关的配置文件 ID 以验证这一点。当然，在生产中，您应该发现此错误并指出他们没有 Google+ 个人资料。

如果您需要检查 Google 登录，即使他们没有 Google+ 个人资料，您也可以使用`https://www.googleapis.com/auth/userinfo.profile`范围。有关更多详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)。

# html - JavaScript 不能调用内容脚本 JS 函数

> ID：14705593
> 
> 赞同：1
> 
> 时间：2013-02-05T10:42:35.857
> 
> 标签：html, google-chrome, google-chrome-extension, google-chrome-devtools

我正在开发 chrome 扩展。我成功加载了 JavaScript 文件，但问题是外部 JavaScript（我已经加载）无法调用内容脚本文件的功能，我的代码如下。

```
$(document).ready(function() {
$('.main_list').click(function()
{
    $('.sub_list') .hide();
    $(this) .parent() .children('.sub_list') .slideToggle("normal");
});

$('#click') .click(function()
{
    $('.sub_list') .hide();
    $(this) .parent() .parent() .children('.sub_list').slideToggle("normal");
});

$('#btnnewtask').click(function()
{
    showdialog('http://localhost:51967/task.aspx');
});
$('#linknewtask').click(function()
{
    showdialog('http://localhost:51967/task.aspx');
});
$('#btnnewcall').click(function()
{
    showdialog('http://localhost:51967/call.aspx');
});
$('#linknewcall').click(function()
{
    showdialog("http://localhost:51967/call.aspx");
});
$('#btnnewmeeting').click(function()
{
    showdialog("http://localhost:51967/meeting.aspx");
});
$('#linknewmeeting').click(function()
{
    showdialog("http://localhost:51967/meeting.aspx");
});
}); 
```

Showdialog() 是内容脚本中的函数。如下

```
function showdialog(url)
{
var xhr=new XMLHttpRequest();
xhr.onreadystatechange=function()
{
    if (xhr.readyState==4 && xhr.status==200)
        {
        xmldoc=xhr.responseXML;
        var js=getfile(getjavascript(xmldoc));
        for(i=0;i<js.length;i++)
        {
            loadjscssfile(js[i],"js");
        }
        var css=getfile(getstylesheet(xmldoc))
        for(i=0;i<css.length;i++)
        {
            loadjscssfile(css[i],"css");
        }
document.file.push(
{"url":url,"css":css,"js":js});
document.getElementById("dialogcontainer3").
innerHTML=gethtmldocument(xmldoc);
        document.getElementById("blacklayer").style.display="block";
        document.getElementById("dialogcontainer3").style.display=
"inline-block";
        document.getElementById("dialogcontainer2").style.display="block";
        document.getElementById("dialogcontainer1").style.display="block";
        }
}
xhr.open("GET",url,true);
xhr.send();
} 
```

但它给出了错误

```
Uncaught ReferenceError: showdialog is not defined (program):1
(anonymous function) (program):1
b.event.dispatch (program):3
v.handle (program):3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T11:21:09.750

> 内容脚本在称为孤立世界的特殊环境中执行。他们可以访问被注入页面的 DOM，但不能访问页面创建的任何 JavaScript 变量或函数。它查看每个内容脚本，就好像它正在运行的页面上没有执行其他 JavaScript。反过来也是如此：在页面上运行的 JavaScript 不能调用任何函数或访问由内容脚本定义的任何变量。

请参阅[http://developer.chrome.com/extensions/content_scripts.html#execution-environment](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)

我建议尝试共享 DOM[在内容脚本和页面](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)或[消息传递](http://developer.chrome.com/extensions/messaging.html)之间进行通信。

页面上的代码示例如下：

```
function showDialog(url) {
    window.postMessage({
        type: "FROM_PAGE",
        text: url
    }, "*");
} 
```

在内容脚本中：

```
// This function will NOT collide with showDialog of the page:
function showDialog(url) {
    /* ... */
}

window.addEventListener("message", function (event) {
    // We only accept messages from ourselves
    if (event.source != window) { return; }

    // Make sure we're looking at the correct event:
    if (event.data.type && (event.data.type == "FROM_PAGE")) {
        showDialog(event.data.text);
    }
}, false); 
```

我没有测试过上面的，所以请认为它是伪代码。此处提供了一个类似的示例：http: [//developer.chrome.com/extensions/content_scripts.html#host-page-communication](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)

# ios - iOs OpenGL ES 2.0 与设备和模拟器上的着色器混合

> ID：14705598
> 
> 赞同：1
> 
> 时间：2013-02-05T10:42:48.713
> 
> 标签：ios, opengl-es, shader, blending

这是片段着色器代码的片段（我需要在着色器中进行混合）：

```
float a = texture2D(tMask, texCoords).x; // opacity of current pixel from mask texture.
if ( a == 0.0)
    discard;
else {
    vec4 dst_clr = texture2D(tBkgText, posCoords); // color of current pixel in current framebuffer.
    vec4 src_clr = vec4(vColor.rgb, sOpacity);
    gl_FragColor = src_clr * a + dst_clr * (1.0 - a);
} 
```

以下是混合函数和方程：

```
glBlendFunc(GL_ONE, GL_ZERO);
glBlendEquation(GL_FUNC_ADD); 
```

以下是设备（左）和模拟器（右）上的结果：

![在设备上](../Images/68b8ae0f151ce16413e46ee00b5744d8.png) ![在模拟器上](../Images/04ea62e3a7346bd5ef2cc568de575e96.png)

如何使它像在模拟器上一样工作？

**更新：**

我已删除`discard`：

```
float a = texture2D(tMask, texCoords).x; // opacity of current pixel from mask texture.
vec4 dst_clr = texture2D(tBkgText, posCoords); // color of current pixel in current framebuffer.
vec4 src_clr = vec4(vColor.rgb, sOpacity);
gl_FragColor = src_clr * a + dst_clr * (1.0 - a); 
```

现在设备上的结果如下所示：

![在没有的设备上](../Images/0d09a49d9610eb739c24a1a34f9cf1e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:34:23.230

我通过添加`glFlush`after解决了这个问题`glDrawArrays`。问题是在其关联的帧缓冲区中进行绘制时纹理没有更新。

# java - 带有 eclipselink jpa 的 java 桌面应用程序 jdialog 窗口。不启动

> ID：14705603
> 
> 赞同：1
> 
> 时间：2013-02-05T10:42:59.503
> 
> 标签：java, jpa, netbeans

我使用 eclipselink 作为持久性 api 设计了一个 java 桌面应用程序，我有一个 jdialog 窗口，它显示输入到数据库的值，因为 entitymanager 拉出一个结果列表，我的问题是，在 IDE 中。我可以查看这个 jdialog ，但是当我清理它时将它构建为一个。Jar文件，它不启动或做任何事情，请帮助

# excel - 从单元格字符串中删除 HTML 标记：excel 公式

> ID：14705605
> 
> 赞同：8
> 
> 时间：2013-02-05T10:43:01.833
> 
> 标签：excel, excel-formula

我在 excel 表中有一个带有 HTML 标签的数据，如下所示：

```
<b>This is test data<br>Nice
<div> Go on this is next Cell
Very goood <b>.....</b> 
```

所以，基本上我想在excel表中删除或替换所有带有空格的html标签。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-05T10:59:48.867

应用`Replace All`模式`<*>`：

![替换标签模式](../Images/c8efacb0694ab2d94316f80e3d93ff4d.png)

要打开它，请转到功能区`Home > Find & Select > Replace...`或只需按`CTRL`+ `H`。

可以使用`TRIM`函数进一步删除多余的空格。祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-18T15:21:08.973

在 Excel 中打开 VBA（Alt +F11），在右侧的项目资源管理器中单击项目名称（电子表格名称）。插入 -> 新模块。将下面的用户定义函数粘贴到模块窗口中。另存为允许宏的 .XLSM。

假设您的数据位于单元格 A2 中，请键入函数“=StripHTML(A2)”。您还可以在此处下载一个工作示例：

[http://jfrancisconsulting.com/how-to-strip-html-tags-in-excel/](http://jfrancisconsulting.com/how-to-strip-html-tags-in-excel/)

```
Function StripHTML(cell As Range) As String
    Dim RegEx As Object
    Set RegEx = CreateObject("vbscript.regexp")
    Dim sInput As String
    Dim sOut As String
    sInput = cell.Text

    sInput = Replace(sInput, "\x0D\x0A", Chr(10))
    sInput = Replace(sInput, "\x00", Chr(10))

    'replace HTML breaks and end of paragraphs with line breaks
    sInput = Replace(sInput, "</P>", Chr(10) & Chr(10))
    sInput = Replace(sInput, "<BR>", Chr(10))

    'replace bullets with dashes
    sInput = Replace(sInput, "<li>", "-")

    'add back all of the special characters
    sInput = Replace(sInput, "&ndash;", "–")
    sInput = Replace(sInput, "&mdash;", "—")
    sInput = Replace(sInput, "&iexcl;", "¡")
    sInput = Replace(sInput, "&iquest;", "¿")
    sInput = Replace(sInput, "&quot;", "")
    sInput = Replace(sInput, "&ldquo;", "")
    sInput = Replace(sInput, "&rdquo;", "")
    sInput = Replace(sInput, "", "'")
    sInput = Replace(sInput, "&lsquo;", "'")
    sInput = Replace(sInput, "&rsquo;", "’")
    sInput = Replace(sInput, "&laquo;", "«")
    sInput = Replace(sInput, "&raquo;", "»")
    sInput = Replace(sInput, "&nbsp;", " ")
    sInput = Replace(sInput, "&amp;", "&")
    sInput = Replace(sInput, "&cent;", "¢")
    sInput = Replace(sInput, "&copy;", "©")
    sInput = Replace(sInput, "&divide;", "÷")
    sInput = Replace(sInput, "&gt;", ">")
    sInput = Replace(sInput, "&lt;", "<")
    sInput = Replace(sInput, "&micro;", "µ")
    sInput = Replace(sInput, "&middot;", "·")
    sInput = Replace(sInput, "&para;", "¶")
    sInput = Replace(sInput, "&plusmn;", "±")
    sInput = Replace(sInput, "&euro;", "€")
    sInput = Replace(sInput, "&pound;", "£")
    sInput = Replace(sInput, "&reg;", "®")
    sInput = Replace(sInput, "&sect;", "§")
    sInput = Replace(sInput, "&trade;", "™")
    sInput = Replace(sInput, "&yen;", "¥")
    sInput = Replace(sInput, "&aacute;", "á")
    sInput = Replace(sInput, "&Aacute;", "Á")
    sInput = Replace(sInput, "&agrave;", "à")
    sInput = Replace(sInput, "&Agrave;", "À")
    sInput = Replace(sInput, "&acirc;", "â")
    sInput = Replace(sInput, "&Acirc;", "Â")
    sInput = Replace(sInput, "&aring;", "å")
    sInput = Replace(sInput, "&Aring;", "Å")
    sInput = Replace(sInput, "&atilde;", "ã")
    sInput = Replace(sInput, "&Atilde;", "Ã")
    sInput = Replace(sInput, "&auml;", "ä")
    sInput = Replace(sInput, "&Auml;", "Ä")
    sInput = Replace(sInput, "&aelig;", "æ")
    sInput = Replace(sInput, "&AElig;", "Æ")
    sInput = Replace(sInput, "&ccedil;", "ç")
    sInput = Replace(sInput, "&Ccedil;", "Ç")
    sInput = Replace(sInput, "&eacute;", "é")
    sInput = Replace(sInput, "&Eacute;", "É")
    sInput = Replace(sInput, "&egrave;", "è")
    sInput = Replace(sInput, "&Egrave;", "È")
    sInput = Replace(sInput, "&ecirc;", "ê")
    sInput = Replace(sInput, "&Ecirc;", "Ê")
    sInput = Replace(sInput, "&euml;", "ë")
    sInput = Replace(sInput, "&Euml;", "Ë")
    sInput = Replace(sInput, "&iacute;", "í")
    sInput = Replace(sInput, "&Iacute;", "Í")
    sInput = Replace(sInput, "&igrave;", "ì")
    sInput = Replace(sInput, "&Igrave;", "Ì")
    sInput = Replace(sInput, "&icirc;", "î")
    sInput = Replace(sInput, "&Icirc;", "Î")
    sInput = Replace(sInput, "&iuml;", "ï")
    sInput = Replace(sInput, "&Iuml;", "Ï")
    sInput = Replace(sInput, "&ntilde;", "ñ")
    sInput = Replace(sInput, "&Ntilde;", "Ñ")
    sInput = Replace(sInput, "&oacute;", "ó")
    sInput = Replace(sInput, "&Oacute;", "Ó")
    sInput = Replace(sInput, "&ograve;", "ò")
    sInput = Replace(sInput, "&Ograve;", "Ò")
    sInput = Replace(sInput, "&ocirc;", "ô")
    sInput = Replace(sInput, "&Ocirc;", "Ô")
    sInput = Replace(sInput, "&oslash;", "ø")
    sInput = Replace(sInput, "&Oslash;", "Ø")
    sInput = Replace(sInput, "&otilde;", "õ")
    sInput = Replace(sInput, "&Otilde;", "Õ")
    sInput = Replace(sInput, "&ouml;", "ö")
    sInput = Replace(sInput, "&Ouml;", "Ö")
    sInput = Replace(sInput, "&szlig;", "ß")
    sInput = Replace(sInput, "&uacute;", "ú")
    sInput = Replace(sInput, "&Uacute;", "Ú")
    sInput = Replace(sInput, "&ugrave;", "ù")
    sInput = Replace(sInput, "&Ugrave;", "Ù")
    sInput = Replace(sInput, "&ucirc;", "û")
    sInput = Replace(sInput, "&Ucirc;", "Û")
    sInput = Replace(sInput, "&uuml;", "ü")
    sInput = Replace(sInput, "&Uuml;", "Ü")
    sInput = Replace(sInput, "&yuml;", "ÿ")
    sInput = Replace(sInput, "", "´")
    sInput = Replace(sInput, "", "`")

    'replace all the remaining HTML Tags
    With RegEx
    .Global = True
    .IgnoreCase = True
    .MultiLine = True
    .Pattern = "<[^>]+>" 'Regular Expression for HTML Tags.

    End With
    sOut = RegEx.Replace(sInput, "")
    StripHTML = sOut
    Set RegEx = Nothing
    End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T08:02:12.163

由于上面的宏对我不起作用，我自己修复了它。这是我的第一个脚本，如果你们可以改进它，让它更快，添加更多，那么你就更受欢迎了！

好的，伙计们，我以前没有编程经验（除了 6 年前的一些非常基本的 Java），但在一些帮助下，很多猜测（实际上是几个小时）我设法制作了这个脚本，它就像一个魅力来删除大部分和8#text 但它不替换`<BR>`为换行符（您可以通过按 CTRL + H 来执行此操作，“查找：`<br>`”“替换：（现在按住 ALT 并在数字键盘上使用类型 0010。替换中的小点应该闪烁窗口，然后点击“全部替换”）。

将下面的代码粘贴到用户模块中（alt +f11，右键Sheet1->insert->Module->paste code）

并通过文件->选项->自定义功能区->选中开发人员复选框来制作一个按钮。然后转到开发人员选项卡->插入->按钮->然后放置按钮并右键单击->分配宏->选择RemoveTags。

```
Sub RemoveTags()
    Dim r As Range

    Selection.NumberFormat = "@"  'set cells to text numberformat

    With CreateObject("vbscript.regexp")
      .Pattern = "\<.*?\>"
      .Global = True

      For Each r In Selection
        r.Value = Replace(.Replace(r.Value, ""), "&#8217;", " ")
        r.Value2 = Replace(.Replace(r.Value2, ""), "&#8211;", " ")
      Next r

      For Each r In Selection
        r.Value = Replace(.Replace(r.Value, ""), "&#8216;", " ")
        r.Value2 = Replace(.Replace(r.Value2, ""), "&#8232;", " ")
      Next r

      For Each r In Selection
        r.Value = Replace(.Replace(r.Value, ""), "&#8233;", " ")
        r.Value2 = Replace(.Replace(r.Value2, ""), "&#146;s", " ")
      Next r
    End With
End Sub

Private Sub CommandButton1_Click()

End Sub 
```

# javascript - 具有三个级别的 jQuery 手风琴

> ID：14705606
> 
> 赞同：0
> 
> 时间：2013-02-05T10:43:04.067
> 
> 标签：javascript, jquery, html

我们已经创建了一个具有三个级别的 jQuery 手风琴。

一切都很好，除了当你打开一个 2 级项目时，所有其他 2 级项目都在关闭。我们必须改变什么才能只影响 1 级项目？

我们的 HTML 标记如下：

```
<ul>
    <li><a href="#">Level 1</a>
        <ul>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Level 1</a>
        <ul>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
            <li><a href="#">Level 2</a>
                <ul>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                    <li><a href="#">Level 3</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我们的 jQuery 标记如下：

```
$this.find("li a").click(function() {
    if($(this).parent().find("ul").size() != 0){
        if(opts.accordion){
            //Do nothing when the list is open
            if(!$(this).parent().find("ul").is(':visible')){
                parents = $(this).parent().parents("ul");
                visible = $this.find("ul:visible");
                visible.each(function(visibleIndex){
                    var close = true;
                    parents.each(function(parentIndex){
                        if(parents[parentIndex] == visible[visibleIndex]){
                            close = false;
                            return false;
                        }
                    });
                    if(close){
                        if($(this).parent().find("ul") != visible[visibleIndex]){
                            $(visible[visibleIndex]).slideUp(opts.speed, function(){
                                $(this).parent("li").find("span:first").html(opts.closedSign);
                            });                                     
                        }
                    }
                });
            }
        }

    $(this).parent().children("ul").slideDown(opts.speed, function(){
        $(this).parent("li").find("span:first").delay(opts.speed).html(opts.openedSign);
    });

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:01:27.880

通过更改修复：

```
parents = $(this).parent().parents("ul"); 
```

到：

```
parents = $(this).parent().parents().children("ul"); 
```

# linux - “rpm -qf file_name”给出了包名，尽管该文件已被删除

> ID：14705612
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:43:21.217
> 
> 标签：linux, rpm

假设，我已经安装了一个包含文件 file1、file2 和 file3 的包。安装后我删除了file3。

但是“rpm -qf file3”给出了包名，即使 file3 也不存在。而且“rpm -ql package”也显示了所有 3 个文件。

当使用“rpm -ql”查询时，如何更新有关该软件包的 rpm 以仅显示可用文件，即 file1 和 file2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:50:11.067

好吧，如果您物理删除文件，它不会在包管理中产生任何影响（您没有删除包，只是删除了一些文件）。如果要删除已安装的软件包，请使用`yum`或`rpm`命令

例如

```
 yum erase firefox 
```

或者

```
 rpm -e firefox 
```

# google-maps - Google Maps API v3：使用 IP 地址多个 LatLng 的 Geocoder.geocode

> ID：14705613
> 
> 赞同：1
> 
> 时间：2013-02-05T10:43:26.047
> 
> 标签：google-maps, google-maps-api-3, geolocation, ip-geolocation

我正在使用`geocoder.geocode(address: <ip_address>, function(results, status){//do something})`获取提供的 IP 地址的 LatLng。输出在“结果”中显示了一组 LatLngs。要访问我正在使用的 LatLng `results[i].geometry.location`。我的问题是为什么输出包含单个 IP 地址的多个 LatLng 值，它们是什么意思？这些 LatLng 值之间似乎存在很大差异（地图上的距离）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T17:21:51.647

不幸的是，Google 不提供与 IP 地址一起使用的公共地理编码 API。

请参阅此[相关问题和答案](https://stackoverflow.com/questions/3232516/geocode-an-ip-address)以获取一些指示。

# php - zend 项目是否有可能在没有虚拟主机的情况下在 localhost 上工作？

> ID：14705618
> 
> 赞同：1
> 
> 时间：2013-02-05T10:43:43.103
> 
> 标签：php, .htaccess, zend-framework

我已经研究了很多只是在我的zend应用程序中显示'Hello World'。我仍然得到一个空白页面。我想在不设置虚拟主机的情况下在localhost中运行代码。请为此提出解决方案或配置。我有本地主机/演示项目中的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:27:33.643

如果您可以让您的应用程序在虚拟主机上运行，​​那么您的问题的简单答案就是。

用作`localhost/demoproject/public/`网址。默认 Zend 项目有它们的`index.php`文件，`project/public/index.php`因此您需要使用上面的 url 来运行 index.php，它是您的框架的网关。

如果您遇到其他错误，请确保为开发环境打开错误显示或检查错误日志中的错误消息并将其发布在此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:50:30.020

你应该把你的 zend 文件放在项目的库文件夹中......

并转到 System Var 并设置此文件夹的路径。

# php - 上传到文件夹后删除图片

> ID：14705619
> 
> 赞同：0
> 
> 时间：2013-02-05T10:43:44.313
> 
> 标签：php, codeigniter

我想在上传后从文件夹中删除图像。

我首先在文件夹中上传调整大小的图像，然后使用调整大小的图像裁剪图像并保存在其他文件夹中。

所以裁剪后我想从调整大小文件夹中删除图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:45:07.193

使用`unlink()`. 此功能删除图像。

[这](http://php.net/manual/en/function.unlink.php)是官方文档页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:46:20.283

简单使用 unlink('你的图片物理路径/图片名称');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:45:39.633

您可以使用 unlink 删除图像。

```
$file = "images/*.jpg"
unlink($file); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:01:43.457

使用`unlink()`. 此功能删除图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:06:22.253

$myFile = "testFile.txt"; 取消链接（$myFile）；

# java - 春天的你好世界

> ID：14705620
> 
> 赞同：-1
> 
> 时间：2013-02-05T10:43:48.433
> 
> 标签：java, eclipse, spring

我正在尝试在 Eclipse 上创建一个带有 spring 的你好世界。但我得到下一个错误：

```
INFO: Loading XML bean definitions from class path resource  
[src/com/spr/main/contextApplication.xml]
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [src/com/spr/main/contextApplication.xml]; nested exception is java.io.FileNotFoundException: class path resource [src/com/spr/main/contextApplication.xml] cannot be opened because it does not exist
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:341)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:73)
at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:61)
at com.spr.main.Main.main(Main.java:15)
Caused by: java.io.FileNotFoundException: class path resource [src/com/spr/main/contextApplication.xml] cannot be opened because it does not exist
at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:141)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
... 4 more 
```

我试过了 ：

```
XmlBeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("\\src\\com\\spr\\main\\contextApplication.xml")); 
```

和

```
XmlBeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("\\src\\com\\spr\\main\\contextApplication.xml")); 
```

并且 contextApplication.xml 路径是 src/com/spr/main/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:50:55.230

更改您的声明

```
XmlBeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("\\src\\com\\spr\\main\\contextApplication.xml")); 
```

到

```
XmlBeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("com\\spr\\main\\contextApplication.xml")); 
```

不要忘记检查文件名。

# django - 用于以下 sql 查询的 Django ORM 表单

> ID：14705622
> 
> 赞同：0
> 
> 时间：2013-02-05T10:43:49.383
> 
> 标签：django

我想知道如何将以下内容构建到 Django ORM 表单中：

```
SELECT name,mobile_number,COUNT(*) as count, created FROM core_user,core_useractivity  WHERE core_user.id = core_useractivity.user_id GROUP BY user_id ORDER BY count DESC; 
```

其中 name、mobile number 是 core_user 表或 USER 模型中的列，created 是 core_useractivity 中的列，其模型是 UserActivity 。这两个表在 user_id 上连接。此外，我按 user_id 对行进行分组，以降序显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:11:16.963

尝试使用用户活动计数来注释用户。

```
from django.db.models import Count
User.objects.annotate(num_activities=Count('useractivity')).order_by('num_activities') 
```

这将返回一个用户查询集，每个用户都有一个属性`num_activities`。有关更多信息，请参阅[注释文档。](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset)

# cuda - 使用 cuda driverAPI 函数执行矢量添加代码失败

> ID：14705626
> 
> 赞同：0
> 
> 时间：2013-02-05T10:43:54.727
> 
> 标签：cuda

我正在使用驱动程序版本 5.0 并使用 cuda 5.0 的 GPU 设备上运行。当我使用驱动程序 API 函数完全执行 vecAdd 时，我遇到了错误。我正在处理的代码发布在下面。谁能帮我解决错误？

```
#include <stdio.h>
#include <stdlib.h>

#include "timer.h"

#include "vecAdd-kernel.ptx.h"
#include</opt/apps/cuda/5.0/include/cuda.h>
#include</opt/apps/cuda/5.0/include/cuda_runtime_api.h>

void compute_vec_add(int N, float *a, float* b, float *c);

int main(int argc,char** argv) {

   static CUcontext ctx;
  CUdevice dev;

  CUdeviceptr d_a, d_b, d_c;
  float *h_a, *h_b, *h_c, *h_temp;
  int i;
  int N = 1024 * 1024*8;

  struct stopwatch_t* timer = NULL;
  long double t_pcie_htd, t_pcie_dth, t_kernel, t_cpu;

  /* Setup timers */
  stopwatch_init ();
  timer = stopwatch_create ();

  /*
    Create the vectors
  */
  h_a = (float *) malloc(sizeof(float) * N);
  h_b = (float *) malloc(sizeof(float) * N);
  h_c = (float *) malloc(sizeof(float) * N);

  /*
    Set the initial values of h_a, h_b, and h_c
  */
  for (i=0; i < N; i++) {
    h_a[i] = (float) (rand() % 100) / 10.0;
    h_b[i] = (float) (rand() % 100) / 10.0;
    h_c[i] = (float) 0.0;
  }

  stopwatch_start (timer);
  CUmodule mod;
  CUfunction vecAddFunc;

     cuInit(0);

     cuDeviceGet(&dev, 0);
     cuCtxCreate(&ctx, 0, dev);

   cuModuleLoadData(&mod, (char *) imageBytes);
   cuModuleGetFunction(&vecAddFunc, mod, "vecAdd");

  size_t offset = 0;

   cuMemAlloc(&d_a,sizeof(float) * N); 
   cuMemAlloc(&d_b,sizeof(float) * N); 
   cuMemAlloc(&d_c,sizeof(float) * N); 

   cuMemcpyHtoD(d_a,h_a,sizeof(float) * N);
   cuMemcpyHtoD(d_b,h_b,sizeof(float) * N);
   cuMemcpyHtoD(d_c,h_c,sizeof(float) * N);

  cuParamSetv(vecAddFunc, offset, &d_a, sizeof(d_a));
  offset += sizeof(d_a);

  cuParamSetv(vecAddFunc, offset, &d_b, sizeof(d_b));
  offset += sizeof(d_b);

  cuParamSetv(vecAddFunc, offset, &d_c, sizeof(d_c));
  offset += sizeof(d_c);

  cuParamSetSize(vecAddFunc, offset);

  cuFuncSetBlockShape (vecAddFunc, 256, 1, 1);

  cuLaunchGrid(vecAddFunc, N/256, 1);
  cuStreamSynchronize(0);

  cuMemcpyDtoH(h_c,d_c,sizeof(float) * N);

  t_kernel = stopwatch_stop (timer);
  fprintf (stderr, "Time to execute GPU kernel: %Lg secs\n",t_kernel);

  /*
    Double check errors
  */
  h_temp = (float *) malloc(sizeof(float) * N);
  stopwatch_start (timer);
  compute_vec_add (N, h_a, h_b, h_temp);
  t_cpu = stopwatch_stop (timer);
  fprintf (stderr, "Time to execute CPU program: %Lg secs\n",
           t_cpu);

  int cnt = 0;
  for(int i = 0; i < N; i++) {
    if(abs(h_temp[i] - h_c[i]) > 1e-5) cnt++;
  }
  fprintf(stderr, "number of errors: %d out of %d\n", cnt, N);

  /*
    Free the host memory
  */
  free(h_a);
  free(h_b);
  free(h_c);

   cuMemFree(d_a);
   cuMemFree(d_b);
   cuMemFree(d_c);
   cuCtxDestroy(ctx);

  /*
    Free timer
  */
  stopwatch_destroy (timer);

  if(cnt == 0) {
    printf("\n\nSuccess\n");
  }
}

void
compute_vec_add(int N, float *a, float* b, float *c) {
  int i;
  for (i=0;i<N;i++)
    c[i]=a[i]+b[i];
} 
```

当我使用 cuda-gdb 查找错误时，输出为：

计时器：gettimeofday 计时器分辨率：~ 1 us (?) [新线程 0x40200940 (LWP 32058)] [在设备 0 上创建上下文 0x645a80 的上下文] 警告：检测到 Cuda API 错误：返回 cuModuleLoadData (0xd1)

警告：检测到 Cuda API 错误：返回 cuModuleGetFunction (0x190)

警告：检测到 Cuda API 错误：返回 cuParamSetv (0x190)

警告：检测到 Cuda API 错误：返回 cuParamSetv (0x190)

警告：检测到 Cuda API 错误：返回 cuParamSetv (0x190)

警告：检测到 Cuda API 错误：返回 cuParamSetSize (0x190)

警告：检测到 Cuda API 错误：返回 cuFuncSetBlockShape (0x190)

程序收到信号 SIGSEGV，分段错误。0x00002aaaaadab756 在?? () 来自 /usr/lib64/libcuda.so.1

谁能建议我为什么会遇到错误并帮助我解决它？

我正在使用的内核代码是

```
/*
 * **CUDA KERNEL**
 *
 * Compute the sum of two vectors
 *   C[i] = A[i] + B[i]
 *
 */

extern "C" {

  __global__ void vecAdd(float* a, float* b, float* c)
  {
    /* Calculate index for this thread */
    int i = blockIdx.x * blockDim.x + threadIdx.x;

    /* Compute the element of C */
    c[i] = a[i] + b[i];
  }

} 
```

我使用的编译命令是

```
LDFLAGS = -I/usr/local/cuda/include \
          -L/usr/local/cuda/lib64 \

vecAdd-dummy: vecAdd-dummy.cu timer.o vecAdd-kernel.ptx.h
        nvcc -o vecAdd-dummy -arch=sm_20 vecAdd-dummy.cu timer.c ${LDFLAGS} -lcuda -g -G 

vecAdd-kernel.ptx : vecAdd-kernel.cu
        nvcc -arch=sm_20 -ptx $^ -o $@

vecAdd-kernel.ptx.h : vecAdd-kernel.ptx
        bin2c -t "char" $^ > $@ 
```

我使用的 GPU 设备是 Tesla M2090

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:16:35.080

检测到 Cuda API 错误：返回 cuModuleLoadData (0xd1)

```
/**
 * This indicates that there is no kernel image available that is suitable
 * for the device. This can occur when a user specifies code generation
 * options for a particular CUDA source file that do not include the
 * corresponding device configuration.
 */
CUDA_ERROR_NO_BINARY_FOR_GPU              = 209, 
```

其余错误是由于加载模块失败造成的。

函数 cuParamSet* 和 cuFuncSetBlockShaper 在 CUDA 4.0 中已弃用。修复模块加载问题后，我建议您查看函数 cuLaunchKernel。

# ruby-on-rails - ActionController::RoutingError (没有路由匹配 [PUT] "/welcome"):

> ID：14705629
> 
> 赞同：1
> 
> 时间：2013-02-05T10:44:03.187
> 
> 标签：ruby-on-rails, ajax, routes

我想要下一件事：单击按钮时，我想打印`params[:id]`.`welcome controller`

这是我的java脚本代码：

```
$(".btn_skip").click(function() {
    $.ajax({
        url: '/welcome',
        type: 'PUT',
        data: {show_msg: $("#mycheckbox").is(":checked")}
    });
}); 
```

这是我的`welcome_controller.rb`：

```
class WelcomeController < ApplicationController
def update
    @user = User.find(params[:id])
    puts params[:id]
    end
end 
```

当我跑：`rails s`并按下按钮（btn_skip）时，我得到：

```
Started PUT "/welcome" for 127.0.0.1 at 2013-02-05 12:18:26 +0200

ActionController::RoutingError (No route matches [PUT] "/welcome"): 
```

路线.rb：

```
resources :welcome 
```

`rake routes`：

```
welcome_index GET    /welcome(.:format)          welcome#index
              POST   /welcome(.:format)          welcome#create
new_welcome   GET    /welcome/new(.:format)      welcome#new
edit_welcome  GET    /welcome/:id/edit(.:format) welcome#edit
welcome       GET    /welcome/:id(.:format)      welcome#show
              PUT    /welcome/:id(.:format)      welcome#update
              DELETE /welcome/:id(.:format)      welcome#destroy 
```

也许，我应该传递 id`url: '/welcome'`吗？

如果是这样，我怎样才能得到身份证？也许是：url：'/welcome/#{:id}'？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:53:05.417

如果您使用 html.erb 模板生成 Javascript，那么您将使用内置的 url 生成器。例如

这是我的 Index.html.erb

```
<% @device_layouts.each do |device_layout| %>
  <tr>
    <td><%= link_to 'Show', device_layout %></td>
    <td><%= link_to 'Edit', edit_device_layout_path(device_layout) %></td>
    <td><%= link_to 'Destroy', device_layout, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %> 
```

where`edit_device_layout_path(device_layout)`会自动为我形成 URL。

因此，假设我实际上正在使用 javascript，并且上面的每个项目都有多个编辑按钮，那么代码可能如下所示：

```
 <% @device_layouts.each do |device_layout| %>
      <tr>
        <td><%= link_to 'Show', device_layout %></td>
        <td>
 <script type="text/javascript">
    $(".btn_edit").click(function() {
        $.ajax({
            url: '/welcome/<%=device_layout.id%>',
            type: 'PUT',
            data: {show_msg: $("#mycheckbox").is(":checked")}
        });
    });
</script>
<div class="btn_edit">Edit Me</div>
</td>
        <td><%= link_to 'Destroy', device_layout, confirm: 'Are you sure?', method: :delete %></td>
      </tr>
    <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:58:47.677

我建议您使用 rails form helper 而不是纯 html。不管怎样，这是您的选择，使用当前的实现，您可以向表单添加隐藏字段。我假设您想传递 current_user 的 id 来更新操作。

```
<input type="hidden" id="current_user" value="<%= current_user.id %>" /> 
```

现在在您的 javascript 代码中：

```
$("#submit").click(function() {
  user_id = $('#current_user').val();
  $.ajax({
    ## the url is the controller
    url: '/welcome' + user_id,
    type: 'PUT',
    data: {show_msg: $("#mycheckbox").is(":checked")}
  });
}); 
```

就是这样！它将获取用户 ID 并自动神奇地传递给更新操作。:)

# google-maps - 将多个图表添加到 Google 地图信息窗口中

> ID：14705632
> 
> 赞同：1
> 
> 时间：2013-02-05T10:44:14.327
> 
> 标签：google-maps, google-visualization, infowindow

我真的很难将谷歌图表添加到谷歌地图信息窗口。所以，我在下面的帖子中从 Molle 博士（再次感谢伙伴）那里找到了非常宝贵的帮助。

[使用 google maps api 将 google chart 添加到 infowindow](https://stackoverflow.com/questions/14668202/add-a-google-chart-to-a-infowindow-using-google-maps-api)

我现在的斗争是在信息窗口中添加多个图表。我已经设法通过其 innerHTML 连接每个容器并且它工作得很好，除了图表失去其功能的事实（不能使用鼠标悬停选项）。

这是我想出的使用 innerHTML 添加的代码，我想知道是否有办法保留图表功能。

```
 function drawChart(marker,map) {

    // Create the data table.
    var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Orange', 80],
      ['Apple', 55],
      ['Watermelon', 68]
    ]);

    var options = {
      width: 300, height: 150,
      redFrom: 0, redTo: 25,
      yellowFrom:26, yellowTo: 50,
      greenFrom:51, greenTo: 100,
      minorTicks: 5
    };

    var nodeGauge   = document.createElement('chart_div'),
        infoWindow  = new google.maps.InfoWindow(),
        nodeCol    = document.createElement('col_div');
        chart      = new google.visualization.Gauge(nodeGauge);
        colChart   =  new google.visualization.ColumnChart(nodeCol);

        colChart.draw(data,{});
        chart.draw(data, options);

        infoWindow.setContent(nodeGauge.innerHTML + nodeTab.innerHTML);
        infoWindow.open(map,marker);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:46:28.747

我认为您可以`<div>`为每个图表创建一个，将它们都附加到另一个 div 标签，并将其设置为`InfoWindow`的内容。

```
var nodeGauge   = document.createElement('div'),
    infoWindow  = new google.maps.InfoWindow(),
    nodeCol    = document.createElement('div'),
    parentDiv  = document.createElement('div');
    chart      = new google.visualization.Gauge(nodeGauge);
    colChart   =  new google.visualization.ColumnChart(nodeCol);

parentDiv.appendChild(nodeGauge);
parentDiv.appendChild(nodeCol);

colChart.draw(data,{});
chart.draw(data, options);

infoWindow.setContent(parentDiv);
infoWindow.open(map,marker); 
```

# c++ - 使用 x86 汇编器访问 2D 数组

> ID：14705634
> 
> 赞同：0
> 
> 时间：2013-02-05T10:44:28.820
> 
> 标签：c++, assembly, x86

我目前正在测试使用 x86 汇编器加速我的代码的各种方法。我过去能够访问一维数组，但二维数组似乎完全不同！

我正在使用我在汇编中创建的两个 for 循环，并将“x”移动到 ECX 寄存器中，将“y”移动到 EDX 寄存器中。

我还使用以下方法将数组的有效地址加载到 EBX 中：

```
lea ebx,dword ptr [slimeTrail] 
```

现在我想做的是使用循环来隔离一个字符并将其移动到 AL 寄存器中，方法是：

```
movsx al,byte ptr [ebx + (ecx * sizeX) + edx] 
```

其中 sizeX 是宽度。

但是，我得到的错误是

`error C2404: 'edx' : illegal register in 'second operand'`

和

`error C2425: '*' : non-constant expression in 'second operand'`

我已经检查了英特尔手册，但似乎没有到达那里。我错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:10:50.620

您需要学习内存操作数的寻址。

在 32 位模式下，您通常只能在单条指令中使用以下之一作为内存操作数的地址：

*   登记
*   位移（常数）
*   寄存器+位移
*   寄存器 1 + 寄存器 2 * 比例 + 位移（比例是常数：1、2、4 或 8）

你`ebx + (ecx * sizeX) + edx`的不是以上两种。

如果`sizeX`不是 1、2、4 和 8，则必须`ecx`使用`mul`or`imul`或其他等效操作（由多条指令组成）乘以它，然后将乘积添加到`ebx`or`edx`之后，您可以执行`mov al,byte ptr [ebx + edx]`.

顺便说一句，`movsx al, ...`没有意义可能是无效的。一个简单的`mov`就可以了。

# ssis - 当数据库列定义为 VARCHAR(MAX) 时如何使用 SSIS 传输数据？

> ID：14705639
> 
> 赞同：29
> 
> 时间：2013-02-05T10:44:41.780
> 
> 标签：ssis

我在执行包时收到以下消息。

> 文本被截断或目标代码页中的一个或多个字符不匹配。

我正在从具有`task_teammember`数据类型的字段名称的 SQL 表中获取数据`VARCHAR(MAX)`。包执行在源头失败。我输入了执行包的列`task_teammber`，*`VARCHAR(8000)`*没有任何错误消息。但是，目标仅接收**8000 个**字符，而源表中有超过**8000 个**字符。

当列定义为时，如何使用 SSIS 将所有数据从源表传输到目标表`VARCHAR(MAX)`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-05T11:08:00.037

您需要使用 SSIS 数据类型**`text stream [DT_TEXT]`**从数据类型的 SQL Server 表列中获取数据*`varchar(MAX)`*

这是一个简单的示例，说明了 SSIS 如何从源中自动推断数据类型。该示例使用 SQL Server 2008 R2 数据库和 SSIS 2008 R2

在 SQL Server 数据库中创建以下表以存储源文本并使用目标插入使用 SSIS 包的文本。

```
CREATE TABLE [dbo].[SourceTable](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [SourceText] [varchar](max) NOT NULL
) ON [PRIMARY]

CREATE TABLE [dbo].[DestinationTable](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [DestinationText] [varchar](max) NOT NULL
) ON [PRIMARY] 
```

将大长度的文本插入源表。执行打包前可以看到源表中的数据超过10000个字符，目的表为空。

![前](../Images/39ac5e9fa95da7be6f722eb58a6ba081.png)

创建一个带有数据库连接管理器的 SSIS 包。在控制流任务上放置一个数据流任务。在数据流任务中，放置一个 OLE DB Source 和 OLE DB Destination 以将数据从 传输`dbo.SourceTable`到`dbo.DestinationTable`。这里的屏幕截图显示了包的执行状态。

![执行](../Images/59627009d416ff7756ffa7a93bdfccd7.png)

如果再次运行查询，您将看到使用 SSIS 包使用源表中的文本填充目标表，而不会出现任何截断错误。

![后](../Images/f57efe99c5bacf8342085b2c5a69201a.png)

返回包的数据流任务选项卡并右键单击`OLE DB Source`然后单击`Show Advanced Editor...`

![高级编辑器](../Images/d96b8f89f3c5e3e9c6c0c16a7b940baf.png)

在 上`Advanced Editor for OLE DB Source`，单击输入和输出属性选项卡。展开`External Columns`并选择`SourceText`。您会注意到 SSIS根据源表上定义`stream [DT_TEXT]`的数据类型将列数据类型设置为文本。`VARCHAR(MAX)`

![数据类型](../Images/e62d1c45f41709a1d935d24c5d16108f.png)

以下是 SSIS 中 SQL Server 数据类型 VARCHAR(MAX) 和 NVARCHAR(MAX) 的映射。

### VARCHAR(MAX) ---> 文本流 [DT_TEXT]

### NVARCHAR(MAX) ---> Unicode 文本流 [DT_NTEXT]

**[在MSDN 集成服务数据类型](http://msdn.microsoft.com/en-us/library/ms141036.aspx)**上阅读有关它的更多信息

希望有帮助。

# java - 是否可以在辅助方法中使用日志？

> ID：14705640
> 
> 赞同：-2
> 
> 时间：2013-02-05T10:44:43.970
> 
> 标签：java, jakarta-ee, spring-security

嗨，我很长时间以来一直怀疑是否在下面的方法（通常是辅助方法）中有一个记录器。

我们是否可以在方法中打印它，或者在调用方法的地方打印响应。

```
 public String getAddNewUserUrl()
    {
        String url             =   null;
        try
        {
            String mode        =   new ModeUtil().getMode();
            String urlToGet    =   ("local".equalsIgnoreCase(mode) ||"staging".equalsIgnoreCase(mode)) ? "staging.url" : "live.url"
            url                =   ResourceBundle.getBundle("ApplicationResources").getString(urlToGet);
            log.info("The url is  : " + url);  // Can we use logs like this
        }
        catch(Exception e)
        {
            log.log( java.util.logging.Level.SEVERE  , e.getMessage() ,  e );
            log.error("Exception in the method getMode ::"+e.getMessage());
        }
        return url;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:48:08.663

当然可以。

在您认为有用的地方使用日志。只需正确使用不同的级别来对日志进行逻辑分组，避免将非常具体的日志与一般日志混为一谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:47:42.240

这完全取决于您想要多少信息。但是，我会将异常记录为错误，并将用户数据记录为调试甚至跟踪。

# batch-file - 在聊天机器人的批处理文件脚本中需要帮助

> ID：14705642
> 
> 赞同：0
> 
> 时间：2013-02-05T10:44:46.043
> 
> 标签：batch-file, batch-processing, chatbot

嗨，我是新手，需要帮助在 bat 脚本中创建聊天机器人。

你能帮我一些想法添加更多脚本来制作这个更好的聊天机器人，因为我缺乏关于 bat 脚本的知识。

**示例：**我希望将聊天结果存储在`conversations.txt`那些曾经是聊天机器人的基本知识的结果中，以便下次对话时回答问题。

谁能帮我添加更多脚本

这是那个脚本：

```
@echo off
title STILL BLACK chatbot

:early
color 1b

:start
echo hi, how are you ??!
set /p how=
echo oh %how% doing the same with me!
pause
echo My Name STILL BLACK !!! Who's your name ?
set /p name=
echo Nice to meet you echo %name%!
pause
echo how old are you %name% ?
set /p age=
echo hmmm ... %age% !
pause
echo where do you live ?
set /p live=
echo exactly where is %live% that place?
set /p exactly=
echo wow %exactly% I rather not be there?!?
goto start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:48:36.380

`>>`您可以使用`echo`'s将转换存储到文件中

```
echo oh %how% doing the same with me! >>conversation.txt 
```

除此之外，您需要提供更多有关您正在尝试做的事情的详细信息**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T17:09:21.750

我也试着做一个这样的“聊天机器人”，但是写信给他当然不好玩。以这种风格将所有答案和问题放在一个 txt 文件中会更好：

```
user input:output
other user input:other output 
```

使用 for /f 和 findstr 您可以在 txt 中搜索代码并显示正确答案

用户输入可以通过使用保存在 txt 文件中

```
%input%>>conversations.txt 
```

或者你把它写在数据库中，例如

```
age:42
live:Germany 
```

（与`%art%:%wert%>>database.dat`：）

很抱歉这个很晚的答案，但今天在这里看到并想完整回答，当您有问题时请告诉我

问候，蒂姆

# adsense - DFP“在非 JavaScript 环境中投放广告”

> ID：14705645
> 
> 赞同：4
> 
> 时间：2013-02-05T10:44:54.960
> 
> 标签：adsense, google-dfp

我在以下网址阅读了该指南： http: [//support.google.com/dfp_premium/bin/answer.py](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1638620) ?hl=en&answer=1638620 但我无法实施。

我尝试使用此 src 获取图像，但看到空白页：[http ://pubads.g.doubleclick.net/gampad/ad?iu=/4767628/TomsBlog_Home_ATF_300x250&sz=300x250&c=1803379939](http://pubads.g.doubleclick.net/gampad/ad?iu=/4767628/TomsBlog_Home_ATF_300x250&sz=300x250&c=1803379939)

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:40:54.800

空白页似乎是 DFP 和 Outlook 与非 IE 默认浏览器的不兼容。

实施了一个电子邮件活动并收到一封带有广告的电子邮件到 Outlook 中，当我将默认浏览器设置为 IE 时，点击有效，但如果我将其设置为 Chrome，则点击无效。

这篇文章表明它与 cookie 有关：[电子邮件中的 Google DFP 广告行为异常](https://stackoverflow.com/questions/12697866/google-dfp-ads-in-email-behaving-strangely)

更新：我昨天看到的问题（使用 Outlook + 非 IE 时电子邮件中的广告链接进入空白页面）已经消失。不确定是临时中断还是间歇性问题）

# http - 在 Host 标头不匹配的虚拟主机环境中返回 400

> ID：14705659
> 
> 赞同：3
> 
> 时间：2013-02-05T10:45:47.247
> 
> 标签：http

考虑一个提供三个虚拟主机的 Web 服务器：

*   mysite.com
*   myothersite.com
*   imnotcreative.com

现在假设服务器接收到以下原始请求消息（代码格式化删除了终止`\r\n`序列）：

```
GET / HTTP/1.1
Host: nothostedhere.com 
```

我在 RFC 2616 中没有看到任何关于如何响应当前服务器上不存在的主机名的请求的指南（也许我错过了？）。例如，Apache 将简单地将其配置中定义的第一个虚拟主机用作“主主机”，并假装客户端请求该主机。显然这比返回`400 Bad Request`响应更健壮，并保证客户端总是看到*一些*表示。

**所以我的问题是...**

除了“健壮性与正确性”论点之外，任何人都可以提供其他理由来阻止我`400`在使用 HTTP/1.1 协议时客户端请求不存在的主机时使用（或其他错误代码）响应吗？

* * *

请注意，所有 HTTP/1.1 请求*必须*根据 RFC 2616指定`Host:`标头。对于 HTTP/1.0 请求，唯一真正的选择是提供“主要”主机结果。这个问题专门针对 HTTP/1.1 协议请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T12:46:36.117

在这种情况下，400 并不是真正语义正确的响应代码。

[10.4.1 400 错误请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1)

> **由于语法错误**，服务器无法理解该请求。

这不是已经发生的事情。该请求在语法上是有效的，并且当您的服务器到达路由阶段（当您检查标头的值时）时，这已经确定了。

我会说这里正确的响应代码是 403：

[10.4.4 403 禁止](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)

> 服务器理解请求，但拒绝执行。

这更准确地描述了发生的事情。服务器拒绝完成请求，因为它无法完成，并且可以在消息实体中提供更详细的错误消息。

还有一个论点是 404 是可以接受/正确的，因为找不到满足请求的合适文档，但我个人认为这不是正确的选择，因为 404 指出：

[10.4.5 404 未找到](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)

> 服务器没有找到任何与 Request-URI 匹配的东西

这明确提到了 Request-URI 的问题，并且在路由阶段的早期阶段，您可能对 URI 不感兴趣，因为您首先需要将请求分配给主机，然后才能确定它是否具有合适的文档处理 URI 路径。

In HTTP/1.1 `Host:` headers are mandatory. If a client states that it is using version 1.1 and does not supply a `Host:` header then 400 is definitely the correct response code. If the client states that it is using version 1.0 then it is not required to supply a host header and this should be handled gracefully - and this scenario amounts to the same situation as an unrecognised domain.

Really you have two options in this event: route the request to a default virtual host container, or respond with an error. As outlined above, if you are going to respond with an error, I believe the error should be 403.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:10:02.783

我想说这在很大程度上取决于您希望使用您的服务的客户类型以及您提供的服务类型。

*   对于一般网站：
    假设请求是从用户的浏览器触发的，这是相当安全的，在这种情况下，对于`Host:`标题的缺失或不正确，我会更加宽容。我什至会说 Apache 处理这种情况的方式（即回退到第一个适当的 VHost）非常好。毕竟，您不想吓跑您的客户。

*   对于 API/RPC 类型的服务：
    这是完全不同的情况。您应该期望任何/谁使用您的服务来遵守您的规范。所以，如果这些要求消费者传递一个有效的`Host:`标头而消费者没有这样做，你应该返回一个合理的响应（`400 Bad Request`对我来说似乎很好）。

# angularjs - 如何在角度模板中使用特定类更新元素

> ID：14705661
> 
> 赞同：0
> 
> 时间：2013-02-05T10:45:53.933
> 
> 标签：angularjs, angular-ui

我刚刚开始我的第一个 Angular 项目，我正在使用 Angular UI 来传递 Jquery UI 可选。让模板中的一个元素仅更新当前选择的元素（例如，具有“ui.selected”类的元素）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:12:29.840

我已经通过使用指令解决了这个问题。

在 app.js...

```
mymodule.directive('hotlink', function () {

    return function (scope, element, attrs) {

        scope.$watch(attrs.hotlink, function (value) {
            if(element.parent().hasClass('ui-selected')){
                scope.obj[attrs.hotlink] = value;
                element.val(value);
            }
        });
    }
}); 
```

并在部分.html ...

```
<div class="row" ng-controller="workspaceCtrl">
<div class="editor four columns">
    <input type="text" placeholder="title" ng-model="title" />
    <textarea placeholder="description" ng-model="description"></textarea>
</div>
<div class="eight columns">
    <ul class="fileObjects" ui-jq="selectable" ui-options="selectOptions">
        <span ui-jq="sortable">
            <li class="item" ng-repeat="obj in fileObjects">
                <input type="text" val="{{obj.title}}" placeholder="title" hotlink="title"/>
                <textarea placeholder="description" hotlink="description">{{obj.description}}</textarea>
            </li>
        </span>
    </ul>

</div>
</div> 
```

现在我有一个条件绑定，即元素只有在当前被选中时才从模型中获取更新。

# c# - 使用 C# 在特定行上的 GridView Col Span

> ID：14705665
> 
> 赞同：0
> 
> 时间：2013-02-05T10:46:02.980
> 
> 标签：c#, asp.net, visual-studio-2010

我想在特定行中合并 GridView 控件的两列..

例如，我有一个 GridView，其中有 5 列和 5 行。

我只想合并第二行的第二列和第三列..

数据来自存储在数据库中的表。

请帮忙..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:52:54.577

您将不得不自定义绘制有问题的单元格。

就像是：

```
private void datagridview1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    if (e.RowIndex == 2)
    {
       // Draw the cells yourself without a border between them
       e.Graphics.DrawString("Hello" ... );

       e.handled = true;
    }
} 
```

我相信这只会让你绘制每个单元格，所以如果你想更深入，你将不得不使用 Paint 事件来绘制整个控件。

# javascript - 如何使用 jQuery 删除类？

> ID：14705667
> 
> 赞同：1
> 
> 时间：2013-02-05T10:46:07.163
> 
> 标签：javascript, jquery

如何使用 jQuery 删除类？

我有这个正在处理的“模板”，我想要一个左侧的“设置”框，用户可以在其中更改导航的“配色方案”。

我有 5-10 种颜色，但我无法让它工作。

```
$(".color-orange").click(function () {
  $("#nav").addClass("color-orange");
}); 
```

如果有人点击绿色，我该如何删除“color-orange”类并添加一个新类？

好吧我用这个..

```
$(".color-green").click(function () {
      $("#nav").removeClass("color-orange");
      $("#nav").addClass("green");
    }); 
```

但这只会带走橙色。如果您单击另一种颜色，将无法正常工作。对不起我的英语，是的。这是我第一次来这里:)

亲切的问候/阿尔宾

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T10:47:36.373

尝试这个：

```
$("#nav").removeClass().addClass("green"); 
```

如果没有参数[removeClass](http://api.jquery.com/removeClass/)将删除所有类。

也不要一次又一次地重新选择`$("#nav")`，使用方法链接，这会提高性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T10:49:21.640

下面的代码将简单地将现有类覆盖为您设置的任何内容（在本例中为“绿色”）。

```
$("#nav").attr("class", "green"); 
```

既然这已经获得了足够多的支持，我会告诉你为什么这是比上述答案更好的答案。带有 的那个`removeClass()`。

首先，您获得所需的元素，即`$("#nav")`.

然后，调用 JQuery 的一个属性，`removeClass()`.

然后，您再次调用 JQuery 的另一个属性`addClass()`.

在我建议的解决方案中：

首先，你得到元素，然后调用属性`attr()`，就是这样。

所以，它小了一步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T10:51:42.410

这个怎么样

```
$('[class^="color-"]').each(function() {
  $("#nav").removeClass().addClass($(this).attr("class"));
} 
```

或者正如 xFortyFourx 指出的那样：

```
$('[class^="color-"]').each(function() {
  $("#nav").attr("class",$(this).attr("class"));
} 
```

* * *

替代方案 - 如果我假设你有

```
.green { color:green; .... } /* for the nav */
.color-green { color:green; .... } /* for the settings */ 
```

你可以做

```
$('[class^="color-"]').each(function() {
  $("#nav").attr("class",$(this).attr("class").replace("color-",""));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T10:48:47.777

使用`removeClass`并且不传递任何类`removeClass`，它将删除该元素具有的所有类。

```
$(".color-green").click(function () {
  $("#nav").removeClass().addClass("green");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T10:48:35.600

```
$(".color-green").click(function () {
      $("#nav").removeClass("color-orange");
      $("#nav").removeClass("next-color");
      $("#nav").removeClass("another-color");
      $("#nav").removeClass("yet-another-color-but-green");
      $("#nav").addClass("green");
}); 
```

# c# - 在 IQueryable 中搜索

> ID：14705672
> 
> 赞同：1
> 
> 时间：2013-02-05T10:46:26.887
> 
> 标签：c#, linq, iqueryable

我通过下面的这一行从数据库中提取一些数据：

```
IQueryable<user> UserList = DatabaseContext.Users.GetAll(); 
```

我想在 UserList 中搜索一些东西，例如：

```
foreach (var User in UserList)
{
    if (User.type == (int)UserType.SuperUser)
    {
        IsRecordFound = true;
        break;
    }
} 
```

然后我根据国旗的状态做一些事情：

```
if (!IsRecordFound)
{
    AesCrypto aesCrypto = new AesCrypto();
    user newuser = new user();
    newuser.username = DEFAULT_SUPER_USER_NAME;
    newuser.password = aesCrypto.Encrypt(DEFAULT_SUPER_USER_PASSWORD);
    newuser.type = (int)UserType.SuperUser;
    newuser.create_date = DateTime.Now;
    newuser.last_login = newuser.create_date;
    newuser.email_address = DEFAULT_SUPER_USER_EMAIL_ADDR;
    newuser.login_count = 1;

    DatabaseContext.Users.Add(newuser);
    if (!DatabaseContext.Save())
        return false;
} 
```

是否有任何简单或实用的方法可以通过使用 LINQ 或其他方式在 IQueryable 接口中进行搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:49:36.593

```
if (!UserList.Any(x => x.Type == (int)UserType.SuperUser))
{
    AesCrypto aesCrypto = new AesCrypto();
    user newuser = new user();
    newuser.username = DEFAULT_SUPER_USER_NAME;
    newuser.password = aesCrypto.Encrypt(DEFAULT_SUPER_USER_PASSWORD);
    newuser.type = (int)UserType.SuperUser;
    newuser.create_date = DateTime.Now;
    newuser.last_login = newuser.create_date;
    newuser.email_address = DEFAULT_SUPER_USER_EMAIL_ADDR;
    newuser.login_count = 1;

    DatabaseContext.Users.Add(newuser);
    if (!DatabaseContext.Save())
        return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:49:41.483

你可以这样做

```
bool isSuperUser =  UserList.Any(a=>a.type==a.SuperUser) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:52:46.153

要搜索 IQueryable，请使用`where`

```
var foundUsers = UserList.Where( usr => usr.Type == (int)UserTypes.SuperUser );

if( foundUsers == null && foundUsers.Count() == 0 ) // only one of these is required.. I forget which though :s
{
    AesCrypto aesCrypto = new AesCrypto();
    user newuser = new user();
    newuser.username = DEFAULT_SUPER_USER_NAME;
    newuser.password = aesCrypto.Encrypt(DEFAULT_SUPER_USER_PASSWORD);
    newuser.type = (int)UserType.SuperUser;
    newuser.create_date = DateTime.Now;
    newuser.last_login = newuser.create_date;
    newuser.email_address = DEFAULT_SUPER_USER_EMAIL_ADDR;
    newuser.login_count = 1;

    DatabaseContext.Users.Add(newuser);
    if (!DatabaseContext.Save())
        return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:53:14.730

```
UserList .Where(user => user.Type== (int)UserType.SuperUser); 
```

# eclipse - SVN 的麻烦。如何将最近的两个提交移动到分支？

> ID：14705674
> 
> 赞同：3
> 
> 时间：2013-02-05T10:46:37.130
> 
> 标签：eclipse, svn, visualsvn-server

基本上，

我在上个月提交了两次原型代码。（是的，我知道，永远不要向树干提交任何不工作的东西）。但由于我是唯一一个在做这件事的人，所以它更像是一种备份。

问题是我必须进行必要的更改。

为此，我必须在添加之前检查版本。并做出了改变。

我现在要做的是提交之前的代码，并对主干进行新的更改。但是那里没有原型代码..又将其移动到它所属的分支。

所以基本上，我正在寻找一种**将最新的两个提交移到一个分支**的方法，这样我就可以提交这个新代码。

我正在使用visualSVN 服务器和eclipse svn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:49:40.197

我实际上投票关闭，因为我认为这是题外话，但以防万一，这是我要做的：将当前主干分支到新分支。在进行原型更改之前检查上一次修订的主干，进行您真正想要的更改，然后将其提交回主干。

# c# - 获取 Facebook 电子邮件 C# SDK -> 嵌套 JSON

> ID：14705679
> 
> 赞同：0
> 
> 时间：2013-02-05T10:46:47.943
> 
> 标签：c#, facebook, json

我正在使用 Json 将 facebook 用户的信息获取到我的应用程序，但我需要他们的电子邮件，这可能吗？

我正在使用这段代码：

```
var result = (IDictionary<string, object>)AccessToken.getclient().Get("me"); 
```

但我只能获取 id、name、first_name、link...，而且我需要电子邮件用户！我怎么才能得到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:00:20.183

您需要电子邮件权限，然后您可以读出用户的邮件

[https://developers.facebook.com/docs/reference/login/#permissions](https://developers.facebook.com/docs/reference/login/#permissions)

# servlets - servlet web.xml 映射

> ID：14705683
> 
> 赞同：0
> 
> 时间：2013-02-05T10:47:06.863
> 
> 标签：servlets, mapping, web.xml

> 我正在使用 Servlet 和 Jsp 开发简单的 Web 应用程序。但是我在处理 web.xml 时遇到了一个问题。例如，我可以对许多 servlet 类使用相同的 url 模式吗

jsp页面的代码

```
<form action="Answer" method="get">
                    <input id="foo" type="text" name="question"/> 
                    <input type="reset" value="Clear" />  
                    <br/>
                    <input type="submit" value="Submit"/>
                    <input type="submit" value="Back"/>
                </form> 
```

来自 web.xml 的代码

```
 <servlet>
        <servlet-name>Answer</servlet-name>
        <servlet-class>RemoveAbbr</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Answer</servlet-name>
        <url-pattern>/Answer</url-pattern>
    </servlet-mapping>
 <servlet>
        <servlet-name>Answer</servlet-name>
        <servlet-class>Preprocess</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Answer</servlet-name>
        <url-pattern>/Answer</url-pattern>
    </servlet-mapping> 
```

> 所以，我的问题是以下选项的真实条件是什么 1）如果我点击提交按钮，它可以映射到 RemoveAbbr 2）如果我点击后退按钮，它可以映射到预处理 3）因为相同的 url 模式（表单操作来自jsp) 不能用于不同的 servlet 类名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:57:43.813

每个都`<servlet>`需要有一个唯一的`<servlet-name>`，所以你需要重命名一个。此外，`<url-pattern>`'s 应该不同，以便 servlet 容器知道如何处理请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T19:05:58.477

您需要使用唯一的`<servlet-name>`. 例如：

```
<servlet>
    <servlet-name>FirstServlet</servlet-name>
    <servlet-class>com.myapp.FirstServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>SecondServlet</servlet-name>
    <servlet-class>com.myapp.SecondServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>FirstServlet</servlet-name>
    <url-pattern>/first.do</url-pattern>
</servlet-mapping>
   <servlet-mapping>
    <servlet-name>SecondServlet</servlet-name>
    <url-pattern>/second.do</url-pattern>
</servlet-mapping> 
```

查看本[教程](http://www.ibm.com/developerworks/java/library/j-hangman-app/index.html/?cm_mmc=developerWorks-_-dW%20CloudOE%20content-_-j-hangman-app-_-article)，我找到了一个编辑 web.xml 文件并添加 servlet 的示例。源代码也可用，所以它对我很有用。

# java - 在图像中放置标记

> ID：14705684
> 
> 赞同：1
> 
> 时间：2013-02-05T10:47:09.947
> 
> 标签：java, swing, markers

我编写了一个在选项卡式窗格中显示图像的代码。我的代码看起来像这样

```
 class tracker extends JPanel 
  {
       String imageFile = "areal view.JPG";
       public tracker()
       {
          super();
       }

       public tracker(String image)
        {
             super();
              this.imageFile = image;
        }
       public tracker(LayoutManager layout)
           {
              super(layout);
            }
       public void paintComponent(Graphics g)
            {
                             /*create image icon to get image*/
               ImageIcon imageicon = new ImageIcon(getClass().getResource(imageFile));
               Image image = imageicon.getImage();

                             /*Draw image on the panel*/
                super.paintComponent(g);

                 if (image != null)
                     g.drawImage(image, 100, 50, 700, 600, this);
                   //g.drawImage(image, 100, 50, getWidth(), getHeight(), this);
            }
  } 
```

那么我需要在图像的某个位置放置一个标记..如何在上面放置一个标记..？

我尝试用谷歌搜索它，但后来知道它只适用于 Android 和 Web 应用程序。是真的吗？？

我不相信它，就像Java一样！！！！！！！...

一旦我提出了这个`BufferedImage`概念，但它不起作用..

欢迎任何关于在图像中放置标记的帮助......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T10:58:49.257

您可以尝试在`Graphics`.

您不应该在`paint`方法中加载图像，这只会减慢重绘并可能消耗更多资源。加载一次图像并保持对它的引用。

```
class Tracker extends JPanel 
{
   String imageFile = "areal view.JPG";
   private Image image;

   public Tracker()
   {
      super();
      init();
   }

   public Tracker(String image)
   {
       super();
       this.imageFile = image;
       init();
   }

   public Tracker(LayoutManager layout)
   {
       super(layout);
       init();
   }

   protected void init() {
       ImageIcon imageicon = new ImageIcon(getClass().getResource(imageFile));
       image = imageicon.getImage();
   }

   public void paintComponent(Graphics g)
   {
       super.paintComponent(g);
       if (image != null) {
           g.drawImage(image, 100, 50, 700, 600, this);
           g.setColor(Color.RED);
           g.fillOval(290, 215, 20, 20);
       }                  
    }
} 
```

我建议你看看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/) and [2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)

**更新其他示例**

根据您的评论，我建议使用[`JLayeredPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html). 它将允许您将自定义组件放置在图像上的任意位置。

![在此处输入图像描述](../Images/6c2f828a6a99b1a4397cac1409dc13c9.png)

```
public class Tracker {

    public static void main(String[] args) {
        new Tracker();
    }

    public Tracker() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                // 247x178

                MapPane mapPane = new MapPane();
                Marker marker = new Marker();
                marker.setToolTipText(
                                "<html><table><tr><td valign=top><img src='" + getClass().getResource("/Earth.png") + "'>" +
                                "</td><td valign=top><b>Earth</b><br>Mostly Harmless</td></tr></table></html>"
                                );

                marker.setSize(marker.getPreferredSize());
                marker.setLocation(237, 188 - marker.getHeight());
                mapPane.add(marker);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(mapPane);
                frame.setResizable(false);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class Marker extends JLabel {

        public Marker() {
            try {
                setIcon(new ImageIcon(ImageIO.read(getClass().getResource("/Marker.png"))));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }

    public class MapPane extends JLayeredPane {

        private BufferedImage map;

        public MapPane() {
            try {
                map = ImageIO.read(getClass().getResource("/SolarSystem.jpg"));
            } catch (Exception e) {
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return map == null ? super.getPreferredSize() : new Dimension(map.getWidth(), map.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (map != null) {
                g.drawImage(map, 0, 0, this);
            }
        }

    }

} 
```

# c# - 一组字母之间的文本框自定义空间（用于电话号码）

> ID：14705685
> 
> 赞同：1
> 
> 时间：2013-02-05T10:47:15.663
> 
> 标签：c#, string, windows-phone-7, textbox

我有这个：

```
<TextBox x:Name="txbPhone" Text="+420" 
         InputScope="TelephoneNumber" Margin="9,0,9,0"/> 
```

现在我想让用户写下他的电话号码，比如： `+420123456789`我想在 TextBox 中显示它，就像`+420 123 456 789` 我想在用户更改 TextBox 的值时通过在代码中手动添加空格来创建它一样。然后当我使用它时，我只需删除字符串中的所有空格。但我认为这是一个“肮脏”的解决方案。有没有办法为此设置一些模板？谢谢

**编辑：** 我创建转换器作为评论中的提及`Frederik Winstrup Johansen`。所以我创建了我的类（它需要向 ConvertBack 方法添加代码）：

```
public class PhoneNumberConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var str = (string)value;
        string result;
        if (str[0] == '+')
            result = String.Format("{0:+### ### ### ###}", System.Convert.ToInt64(value));
        else
            result = String.Format("{0:### ### ### ###}", (Int64)value);
        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value;
    }
} 
```

并将我的 TextBox 更改为：

```
<TextBox x:Name="txbPhone" Text="{Binding Path=Phone, Converter={StaticResource phoneNumberConverter}, Mode=TwoWay}" 
                 InputScope="TelephoneNumber" Margin="9,0,9,0" TextChanged="txbPhone_TextChanged"/> 
```

这是我的绑定：

```
 viewModel = new PhonePageViewModel();
        viewModel.Phone = "+420123456";
        this.DataContext = viewModel; 
```

转换器正在工作，但当我添加一些数字时它不会改变文本。不再调用 Convert 方法。我怎样才能做到这一点？每次我在 TextBox 调用转换器中更改字母时？

我的视图模型类：

```
namespace SpeedCarsWP.ViewModels
{
    public class PhonePageViewModel : INotifyPropertyChanged
    {
        private string phone;
        public event PropertyChangedEventHandler PropertyChanged;

        public string Phone
        {
            get { return phone; }
            set
            {
                phone = value;
                OnPropertyChanged("Phone");
            }
        }

        public PhonePageViewModel()
        {
        }

        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:09:00.633

如果您想使用带有数据绑定 + 转换器的解决方案，请实现它，它将为您工作。（我试过了，它奏效了。）

**首先**，在 View the XAML-Part 中：

```
 <TextBox Height="23" HorizontalAlignment="Left" Margin="78,60,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" 
             Text="{Binding MyProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource MyConverter}}" 
             TextChanged="textBox1_TextChanged" /> 
```

**UpdateSourceTrigger**代表逐个字符地格式化文本。

**二**、ViewModel-Part：

通过 VM 中的 MyProperty，您需要使用**NotifyPropertyChanged**来触发更新。（如果你不这样做，转换器的 Convert-Method 将只运行一次，仅在第一次运行。）

**三**、转换器部分：

您可以实现一个转换器主体，如：

```
 if (value != null)
        {
            string str = value.ToString();
            string result = str;

            if (str.Length == 1)
            {
                result = str.Insert(0, "+");
            }
            if (str.Length == 5 || (str.Length > 5 && (str.Length -1) % 4 == 0))
            {
                result = str.Insert(str.Length-1, " ");
            }

            return result;
        }
        return value; 
```

如果这样做，文本框光标将不在文本末尾，因此您需要从 View 的代码隐藏中更正它。

```
 private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
    {
        textBox1.Select(textBox1.Text.Length, 0);
    } 
```

这只是使用 Converter 解决方案中的一种快速实现思维，但我希望它可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:14:31.447

> 转换器正在工作，但当我添加一些数字时它不会改变文本。不再调用 Convert 方法。我怎样才能做到这一点？每次我在 TextBox 调用转换器中更改字母时？

转换器应自动更新。

你确定你`PhonePageViewModel`实现了`INotifyPropertyChanged`吗？您是否在setter中
引发`PropertyChanged`事件？`PhonePageViewModel.Phone`

你有绑定错误吗？（调试时检查 Visual Studio 中的输出窗格）。

# haskell - 模式匹配上的 mzero

> ID：14705686
> 
> 赞同：1
> 
> 时间：2013-02-05T10:47:23.500
> 
> 标签：haskell

> **可能重复：**
> [Haskell 中 case 语句中的模式匹配变量](https://stackoverflow.com/questions/3479116/pattern-matching-variables-in-a-case-statement-in-haskell)

我有以下简化代码（实际代码确实实现了一些有意义的东西）：

```
import Data.Char
import Data.Maybe
import Control.Monad
import Control.Applicative

testA :: [Int] -> Maybe Int -> Maybe Int
testA [] _       = Nothing
testA _  Nothing = Nothing
testA (x:xs) v = case x of
  1         -> (+) <$> v <*> return x
  otherwise -> testA xs v

testB :: (MonadPlus m, Applicative m) => [Int] -> m Int -> m Int
testB [] _     = mzero
testB _  mzero = mzero
testB (x:xs) v = case x of
  1         -> (+) <$> v <*> return x
  otherwise -> testB xs v

main = do
  let xpto = testA [1,2,3,1,5] (Just 5)
  print xpto
  let ypto = testB [1,2,3,1,5] (Just 5)
  print ypto 
```

我的理解是 testA 和 testB 在使用 Maybe Monad 时应该表现相同，这意味着 mzero 应该转换为 Nothing。

然而，在测试 B ghc 实际上给出了一个警告：

```
Pattern match(es) are overlapped
In an equation for `testB': testB (x : xs) v = .. 
```

并且输出不同：

```
Just 6 (correct)
Just 5 (incorrect) 
```

我不确定我可能会丢失什么，为什么 mzero 不等于模式匹配中的任何内容？

# ios - 未关闭标签上的 XPATH 问题

> ID：14705695
> 
> 赞同：0
> 
> 时间：2013-02-05T10:47:46.787
> 
> 标签：ios, tags, hpple

我在 IOS 上使用 tfhpple 来获取一些数据 feom web。我有这段代码：

```
<tr class="odd">
<td class="datet t1360260000-6-1-0-0">
07/02
<br>
19:00
</td>
<td>
....................
</td>
</tr> 
```

我要获取的部分是 07/02 和 19:00（如果可能，请连接）。但我不仅有未封闭`<br>`标签的问题，还有第一个值的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:02:24.913

您可以尝试从字符串替换方法替换标签，然后尝试提取值。

```
[strHTML stringByReplacingOccurrencesOfString:@"<br>" withString:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:33:11.360

嗯......很奇怪......这就是我完成你的答案的方式，但仍然没有得到我想要的：

```
NSURL *URL = [NSURL URLWithString:@"http://www.site.com"];
NSString *string= [NSString stringWithContentsOfURL:URL encoding:NSUTF8StringEncoding error:nil];
NSString *replacedBRFinal = [string stringByReplacingOccurrencesOfString:@"<br>" withString:@""];
NSData *data= [replacedBRFinal dataUsingEncoding:NSUTF8StringEncoding];
.......
TFHpple *parser = [TFHpple hppleWithHTMLData:data];
.......
// Query
NSString *query = @"//tr[@class='odd']/td[@class][1]"; 
```

我只得到“-”。如果我查看源代码也是一样，但在 Firebug（Firefox 扩展）中，我可以从我的问题中看到代码......

# .net - 如何在向安全站点发出请求的 WCF 服务中创建身份验证 cookie？

> ID：14705696
> 
> 赞同：1
> 
> 时间：2013-02-05T10:47:48.843
> 
> 标签：.net, asp.net-mvc-3, wcf, cookies, forms-authentication

我有一个 .NET MVC3 应用程序和一个 WCF 服务。该应用程序要求所有用户都经过身份验证。

现在，我想从我的 WCF 服务中使用 WebClient 获取一个安全页面的内容。

服务和 Web 应用程序都运行在同一台服务器上，使用相同的 CNAME（不同的端口）。

我认为我可以创建一个这样的cookie：

```
Dim ticket = New FormsAuthenticationTicket(1, adAccount, DateTime.Now, DateTime.Now.AddMinutes(30), False, Nothing, FormsAuthentication.FormsCookiePath)

' Encrypt the ticket using the machine key
Dim encryptedTicket = FormsAuthentication.Encrypt(ticket)

' Add the cookie to the request to save it
Dim cookie = New HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket) 
```

我将 cookie 添加到请求中，但我仍然没有获得内容，因为我未经授权。

我认为可能是 FormsAuthentication 类属性设置不正确，所以我尝试`"/"`了代替`FormsAuthentication.FormsCookiePath`和`"".ASPXAUTH""`代替`FormsAuthentication.FormsCookieName`. 它仍然不起作用。

有谁知道如何在我的 WCF 服务中创建一个有效的 cookie，以便我可以请求需要授权的 Web 应用程序的安全页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:59:36.260

我做了

`Dim ticket = New FormsAuthenticationTicket(adAccount, False, 20)`

反而

`Dim ticket = New FormsAuthenticationTicket(1, adAccount, DateTime.Now, DateTime.Now.AddMinutes(30), False, Nothing, FormsAuthentication.FormsCookiePath)`

它现在可以工作了......

# laravel - 从父控制器重定向

> ID：14705697
> 
> 赞同：0
> 
> 时间：2013-02-05T10:47:49.860
> 
> 标签：laravel

我正在为 Laravel 应用程序实现一些访问控制逻辑。如果用户无权查看该资源，我想重定向到“未授权”页面。

我正在为我的网址使用控制器/方法逻辑。

我可以从被调用的控制器/方法重定向，但为了使我的代码更具可扩展性，我想检查父控制器中的 ACL 逻辑，可能是 Base_controller，并在 URI 控制器/方法之前从那里重定向访问。

我试图将重定向添加到构造，或在重定向的构造中调用另一个方法，但无济于事。

所以，我想知道这是否可行，因为'Redirect::to' 似乎只能在 url 中指定的控制器/方法中工作，而在其他任何地方都不起作用 - 对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:59:19.217

您需要“返回”重定向。您可以在任何地方执行此操作：

```
return Redirect::to('login') 
```

但是您应该在过滤器中运行逻辑：

```
public function __construct()
{
    $this->beforeFilter('acl');
} 
```

然后在filters.php

```
Route::filter('acl', function()
{
    if ($something)
    {
          return Redirect::to('somewhere');
    }
}); 
```

# python - 了解 PyDict_Check 行为

> ID：14705700
> 
> 赞同：2
> 
> 时间：2013-02-05T10:48:01.067
> 
> 标签：python, cpython

我一直在玩 Python C API 一段时间。我非常喜欢它，但今天我遇到了障碍。我有一个 Python 扩展，它有一个函数，它需要一个或两个字典作为参数。我担心我可能误解了如何`PyDict_Check`或如何`PyArg_ParseTuple`工作。这是一个愚蠢的例子：

```
static PyObject * doStuffToOtherStuff(MyCustomPyObject *self, PyObject *args) {
  char const *fmt = "OO";
  PyObject dict1, dict2;

  if (!PyArg_ParseTuple(args, fmt, &dict1, &dict2))
    return NULL;

  int hasDict1 = PyDict_Check(&dict1);
  int hasDict2 = PyDict_Check(&dict2);

  printf("%d %d\n");

  Py_INCREF(Py_None);
  return Py_None;
} 
```

在构建和导入时，我这样称呼它，例如：

```
myClass.doStuffToOtherStuff(dict(), None) 
```

我希望这会打印 `1 0` ，但它实际上会打印 `1 1` . 也是如此： myClass.doStuffToOtherStuff(None, None) myClass.doStuffToOtherStuff(None, dict()) myClass.doStuffToOtherStuff({}, None) #etc...

如果我改为`PyDict_Check`打印`PyDict_CheckExact`，`0 0`无论我作为参数传递什么。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:57:59.617

`PyArg_ParseTuple`with `O`arguments 需要一个指向 a 的指针`PyObject *`，而不是指向 a 的指针`PyObject`（即可变参数应该是 type `PyObject **`）。

所以你的代码应该是：

```
 char const *fmt = "OO";
  PyObject *dict1, *dict2;

  if (!PyArg_ParseTuple(args, fmt, &dict1, &dict2))
    return NULL;

  int hasDict1 = PyDict_Check(dict1);
  int hasDict2 = PyDict_Check(dict2);

  // ... 
```

# msbuild - 我可以让 Visual Studio 调用 MSBuild.exe 进行构建吗？

> ID：14705702
> 
> 赞同：0
> 
> 时间：2013-02-05T10:48:05.030
> 
> 标签：msbuild, visual-studio-2012

在 Visual Studio 中触发生成时，它使用 MSBuild 库来运行生成。但是，如果构建挂起（有时会挂起），这意味着我必须杀死`devenv.exe`.

有什么方法可以让 Visual Studio 调用`MSBuild.exe`（以便我可以杀死它），而不是以编程方式使用 MSBuild？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:04:24.260

构建挂起并不常见。恕我直言，您应该在尝试绕过问题之前检查一下。无论如何，您可以使用 MSBuild 作为外部工具：

工具 -> 外部工具 -> 添加

用这些值填写表格：

*   标题 - MSBuild
*   命令 - C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe
*   参数 - $(SolutionName)
*   初始目录 - $(SolutionDir)

选中“使用输出窗口”。

然后您可以调用“工具”菜单中的命令。

# ios - iOS 浏览器数据->Phonegap 应用程序/会话的缓存和 Cookie？

> ID：14705707
> 
> 赞同：1
> 
> 时间：2013-02-05T10:48:13.433
> 
> 标签：ios, session, cordova, browser-cache, phonegap-build

我正在制作一个半原生半基于网络的 phonegap 应用程序。

当用户需要将数据上传到服务器时，webView（或者至少我相信这是它的名字）加载一个外部网页......

现在这是问题所在。当我加载应用程序（从 iPad 上清除的软重置和烹饪和存储数据）时，我得到这个屏幕

[细小的登录栏 - 功能与普通网络浏览器不同 http://carbonyzed.co.uk/3.png](http://carbonyzed.co.uk/3.png)

但是，如果我在打开看起来像这个宽登录栏的应用程序之前进入网络浏览器 [- 网络浏览器中的功能是正常的 http://carbonyzed.co.uk/1.png](http://carbonyzed.co.uk/1.png)然后我去重新启动/打开应用程序，我明白了

[宽登录栏 - 功能与普通网络浏览器一样 http://carbonyzed.co.uk/2.png](http://carbonyzed.co.uk/2.png)

那么应用程序中的功能也正常，就像模仿网络浏览器一样。这似乎持续存在“会话”或只要应用程序保持打开/最小化但未退出。

这似乎很奇怪，我无法解决这个问题？

任何想法都会很棒。

哦顺便说一句，它出现在使用 build.phonegap.com 的 2.1 和 2.2 phonegap 构建中

亨利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T08:42:20.180

我最终实际上走了一条不同的路线。这个特定的问题实际上是服务器处理来自不同设备类型的访问的方式，而不是应用程序设计/开发的方式。但是，我确实发现在以后的版本中使用子浏览器要稳定得多。

# html - HTML正文背景图片不覆盖所有页面

> ID：14705710
> 
> 赞同：0
> 
> 时间：2013-02-05T10:48:27.120
> 
> 标签：html, css

我正在尝试将背景图像设置为整个 html 页面，但每次都失败。它没有拉伸。这是我的 css 和 html 代码：

**CSS代码：**

```
body {
    background-image:url(body_background.png);
    background-repeat: no-repeat;
    background-size: 100% 100%;
    width:1200px;
    margin:0 auto;
}

#main_container_div {
    padding: 0px;
    width: 1000px;
    margin-top: 30px;
    margin-left: 150px;
}

#div2 {
    float: left;
    width: 250px;
    height: 600px;
    margin-top: 0px;
    margin-right: 0px;
    background-repeat: no-repeat;
}
#div3 {
    position: relative;
    float: left;
    width: 750px;
    height: 500px;
    margin-top: 50px;
    overflow: hidden;
} 
```

**html正文：**

```
<body>    
    <div id="main_container_div">
        <div id="div3">
        </div>
        <div id="div2">
        </div>
    </div>
</body> 
```

* * *

您可以尝试使用 1366x768 大小的图像。我也在 1366x768 分辨率上尝试这个。请注意，这个问题在这个或更高的分辨率上是可见的。谢谢你的帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:54:20.297

尝试 background-size: 覆盖你的 CSS

```
background-size:cover; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T11:56:04.547

不要在体内使用它。像这样在 html 元素上尝试：

```
html
{
  background-image: url('your url');
  background-repeat: no-repeat;
  min-height:100%;
}

<html>
  <!--bg is applied here instead -->
  <body>
    ...
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:16:36.867

```
background: url(body_background.png) 100% 100% no-repeat;
background-size: cover; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T12:08:15.630

```
background-size:cover; 
```

确实有效，但它不支持所有浏览器类型。这是我过去使用的代码，

```
section#background { 
    background: url('../img/background/feature.jpg') no-repeat center center; 
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img/background/feature.jpg',sizingMethod='scale'); 
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='img/background/feature.jpg',sizingMethod='scale')"; 
    -webkit-background-size: cover; 
    -moz-background-size: cover; 
    background-size: cover; } 
```

这是 jsfiddler 链接

[http://jsfiddle.net/Raver0124/3AwHa/1/](http://jsfiddle.net/Raver0124/3AwHa/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-03T11:47:30.917

我刚刚遇到了同样的问题，您可以通过拉伸图像来解决它：

```
html{
    min-height: 100%;
} 
```

或保持相同的比例，您可以这样做：

```
body{
    background-size: cover;
    background-attachement: fixed;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-13T23:00:07.360

这通常对我有用，因为我通常用 html 而不是 body 来做。这有效，因为它需要网络浏览器的整个页面。附言。我知道这是旧的，认为它会有所帮助。

```
html { 
    background: url(images/bg.jpg or whatever link or img here) no-repeat center fixed; 
    background-size:cover;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-01T16:20:42.927

就我而言，我通过设置解决了它

```
height: auto 
```

这样，如果内容比竖屏大，它会一直增长，直到把它全部包裹起来。但你也必须设置

```
min-height: 100vh 
```

因此，如果内容小于它，背景将增长到占据所有可见的垂直屏幕。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-05T10:50:54.710

如果要全页显示背景，则需要将背景设置为重复。

```
background-repeat: no-repeat; 
```

至

```
background-repeat: repeat-x; 
```

或者

```
background-repeat: repeat-y; 
```

# java - 优化：通过java中的集合进行双循环

> ID：14705714
> 
> 赞同：0
> 
> 时间：2013-02-05T10:48:39.093
> 
> 标签：java, loops, optimization, collections

此代码需要 9 分钟才能运行一组 5,600 个对象：

```
public Set<UnDirectedPair<T>> getAllUndirectedPairs(Set<T> setObjects) {
    Set<T> setObjectsProcessed = new TreeSet();
    Set<UnDirectedPair<T>> setPairs;
    setPairs = new TreeSet();
    Iterator<T> setObjectsIteratorA = setObjects.iterator();
    Iterator<T> setObjectsIteratorB;
    T currTA;
    T currTB;
    while (setObjectsIteratorA.hasNext()) {
        currTA = setObjectsIteratorA.next();
        setObjectsProcessed.add(currTA);
        setObjectsIteratorB = setObjects.iterator();
        while (setObjectsIteratorB.hasNext()) {
            currTB = setObjectsIteratorB.next();
            if (!setObjectsProcessed.contains(currTB) && !currTA.equals(currTB)) {
                setPairs.add(new UnDirectedPair(currTA, currTB));
            }
        }
        setObjectsProcessed.add(currTA);
    }
    return setPairs;

} 
```

寻找一种方法来显着减少运行时间......想法？

[背景] 该集合包含人物。集合中有重复项（相同的人，但属性略有不同，因为输入时出现错误）。我有需要 2 人并进行必要更正的方法。因此，作为初步步骤，我需要创建一组 (Person, Person) 对，这些对将被提供给这些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:47:46.993

我建议的一个技巧是保持外循环和内循环的计数器。

```
int outerCount=0;
while (setObjectsIteratorA.hasNext()) {
    currTA = setObjectsIteratorA.next();
    setObjectsProcessed.add(currTA);
    setObjectsIteratorB = setObjects.iterator();
    int innerCount=0;
    while (setObjectsIteratorB.hasNext()) {
        currTB = setObjectsIteratorB.next();
        if (innerCount++>outerCount && !currTA.equals(currTB)) {
            setPairs.add(new UnDirectedPair(currTA, currTB));
        }
    }
 outerCount++;
    setObjectsProcessed.add(currTA);
}
return setPairs; 
```

这将保存最后包含一个 logN 的操作。

背后的逻辑是：由于两个Iterator在同一个集合上，而ObjectProcessedSet的唯一目的是维护处理过的Object的记录，可以实现相同的比较索引。

例子

```
 Set1={1,1,2,4,5}
  Iterator1 iteratorOuter=Set1.Iterator();

  int outerCount=0;
  while(iteratorOuter.hasNext()){
           Iterator2 iteratorInner=Set1.Iterator();
           int currA=iteratorOuter.next();
      while(iteratorInner.hasNext()){
           int CurrB=iteratorInner.next();
           //Now here if CurraA=4 and CurrB=2 it is obvious it has been processed
          //If currB =5 it is obviously has not been processed.
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:59:07.110

一个应该给你一个很好的加速的解决方案是首先对集合进行排序，然后只比较集合中的相邻条目。

当然，这意味着您需要为每一个拥有一个可比较的键`Person`（例如，它的名称），并且该键对于所有重复项都必须相同。

然后你的代码可能看起来像这样：

```
SortedSet<Person> persons = new TreeSet<>(...);
Person last = null;
for (Person current : persons) {
  if (last != null) {
    setPairs.add(new UnDirectedPair(last, current));
  }
  last = current;
} 
```

如果`Person`没有实现`Comparable`（或通过错误的字段进行比较），您可以`Comparator`在创建`TreeSet`.

该解决方案在 O(n*log n) 中运行，之后您只有 O(n) 对可以处理。对于只有 5600 人来说，这应该非常快。

在这种情况下，您也可以制作`setPairs`a`List`以获得更多性能（尽管很少）。或者您根本不创建这组对，而只是`Person`直接在循环中调用您的方法来纠正对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:41:21.480

谢谢你的好建议。

基本障碍是我的课`UnDirectedPair`，它有昂贵的方法`equals`和`compareTo`方法。我用剥离的裸 Pair 类替换它。这使代码在大约 10 秒内运行。

尽管如此，在集合上使用操作似乎代价高昂。对@mawia 的建议稍作修改后，集合可以完全排除在外。最终代码在**2 秒内**而不是 900 万 40 秒内运行 - 返回一个包含 19,471,920 个 Pair 对象的列表！

```
public List<Pair<T>> getAllUndirectedPairsAsList(Set<T> setObjects) {
    List<T> listObjects = new ArrayList();
    listObjects.addAll(setObjects);

    List<Pair<T>> listPairs = new ArrayList();
    Iterator<T> listIterator1 = listObjects.listIterator();
    Iterator<T> listIterator2;
    int count = 1;
    T object1;
    while (listIterator1.hasNext()) {
        object1 = listIterator1.next();
        listIterator2 = listObjects.listIterator(count++);
        while (listIterator2.hasNext()) {
            listPairs.add(new Pair(object1, listIterator2.next()));
        }
    }
    return listPairs;
} 
```

# java - 如何在基于角色的访问控制上实现默认角色

> ID：14705717
> 
> 赞同：0
> 
> 时间：2013-02-05T10:48:45.787
> 
> 标签：java, mysql, rbac

我正在实施基于角色的访问控制系统。

用户拥有角色（多对多）
角色拥有权限（多对多）
角色拥有特权（多对多）
角色`belongs`对客户

我想要 2 个默认**角色**：*管理员*和*普通*。问题是，角色**给**`belong`客户。所以这意味着我需要为每个客户定义这个默认角色。

如何避免为每个客户定义相同的 2 个角色？

（我想出的第一个想法是让这些默认角色的所有者保持 NULL ，但这会增加很多额外的控制权并分叉我的授权方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:13:32.450

不确定我是否正确，但角色不应该依赖于用户......

**DB级别**的一般解决方案是使用一个连接表，即一张USER表、一张ROLE表和一张USER_ROLE表，其中两个外键分别指向USER和ROLE表。

**JPA 级别**的解决方案（我假设您使用它是因为您添加了“Java”标签）是使用 @ManyToMany 标记对表示关联的集合进行注释，框架将处理其余部分。

# ajax - Github API 和 Access-Control-Allow-Origin

> ID：14705726
> 
> 赞同：13
> 
> 时间：2013-02-05T10:49:18.717
> 
> 标签：ajax, github, cors, github-api

这可能是一个简单的（一系列）问题，但我无法理解它。

我正在尝试从我网站上托管的网络应用程序访问 github api。简而言之，这是代码：

```
<!DOCTYPE html>
<html>
<head>
  <style>p { color:red; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script>
  $(document).ready(function () {

$.ajax( {url :'https://api.github.com/repos/janesconference/kievIIPlugins/commits', dataType: "json", cache: false, success: function (data, textStatus, jqXHR)
        {
            var lastCommitSha = data[0].sha;
            $("p").text("Last commit SHA: " + lastCommitSha);
        }
    });
});
  </script>

</head>
<body>
  <p>Ajax request not (yet) executed.</p>

</body>
</html> 
```

如果我将浏览器指向上传[到我的 Dropbox 帐户](http://dl.dropbox.com/u/6767816/ghapi.html)的这个简单页面，一切正常。相反，如果我将浏览器指向[我网站上上传的](http://bitterspring.net/ghapi.html)这个简单页面，我会得到臭名昭著的`Access-Control-Allow-Origin`异常：

```
XMLHttpRequest cannot load https://api.github.com/repos/janesconference/kievIIPlugins/commits?_=1360060011783\. Origin http://bitterspring.net is not allowed by Access-Control-Allow-Origin. 
```

所以，问题：

*   为什么它可以在 Dropbox 上运行？
*   我知道使用 CORS 甚至可以在网站上使用。这是放置`Access-Control-Allow-Origin: *.github.com`我的 Apache 配置或类似的东西的问题。但是，正如 en.wiki 所引用的，

> 但是，这可能不适用于需要考虑安全性的情况

*   有没有办法在不更改 Apache 配置的情况下做到这一点？可能，我无法触摸托管站点的 Apache conf，并且总是存在安全问题。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T14:29:34.390

为了让 CORS 为您的站点工作（例如[http://example.com](http://example.com)），您必须通过在此处创建 GitHub OAuth 应用程序来启用它：[https ://github.com/settings/applications](https://github.com/settings/applications)

由于您使用 GitHub 应用程序来使 CORS 工作（不使用它来启用 OAuth 本身），您只需在“创建应用程序表单”的所有三个字段中输入您的站点的 URL：

*   名称：[http ://example.com](http://example.com)
*   网址：[http ://example.com](http://example.com)
*   回调地址：[http ://example.com](http://example.com)

请注意，如果您打算使用 OAuth 功能，则需要以不同的方式设置回调 URL。

在此之后，您应该能够从您的站点[http://example.com](http://example.com)向 GitHub API 发送 AJAX 请求。

# php - 使用没有 Ghostscript 的 ImageMagick 将 pdf 转换为 jpg

> ID：14705727
> 
> 赞同：8
> 
> 时间：2013-02-05T10:49:21.017
> 
> 标签：php, imagemagick, ghostscript, imagemagick-convert

我正在尝试使用 ImageMagick php 将 pdf 转换为 jpg。似乎 ImageMagick 需要 Ghostscript 来处理 pdf，但是我的共享托管服务提供商不允许安装 Ghostscript，因为它使用`shell_exec()`和`exec()`.

所以我的问题是。我可以在没有 Ghostscript 的情况下使用 ImageMagick 将 pdf 转换为 jpg。如果没有，是否有替代方案。我正在使用 wordpress 平台 fyi 执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:49:10.510

PDF 不是光栅图像格式，它是一种描述图像的特殊语言。因此，要将其转换为光栅格式，您需要一个[RIP（光栅图像处理器）](http://en.wikipedia.org/wiki/Raster_image_processor)。

ImageMagick 为此使用 GhsotScript。所以你不能在没有 GhostScript 的情况下使用 ImageMagick 来做到这一点。您可以使用 GhostScript 从运行 gswin32.exe（[即使没有 ImageMagic](https://stackoverflow.com/questions/502/get-a-preview-jpeg-of-a-pdf-on-windows)）的命令行或使用 gsdll32.dll 的软件将 PDF 渲染为 JPG。

另一种方法是使用软件中的 Adob​​e ActiveX 组件。通常它已经用 Adob​​e Acrobat 安装在 Windows 上。

[这是一个很好的解释和许多渲染PDF的方法](https://stackoverflow.com/questions/518878/how-to-render-pdfs-using-c-sharp/555735#555735)

# ruby-on-rails - Rails3 + Rspec2 + Factorygirl 协会

> ID：14705739
> 
> 赞同：0
> 
> 时间：2013-02-05T10:49:46.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, rspec2, factory-bot

我有以下型号

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
        :recoverable, :rememberable, :trackable, :validatable

     attr_accessible :email, :password, :password_confirmation, :remember_me, :company_id
end

 class Company < ActiveRecord::Base
   attr_accessible :email, :name
 end

#test/factories/companies.rb
FactoryGirl.define do
  factory :company do
    name "sample company"
    email "sample@company.com"
  end
end

#test/factories/users.rb
FactoryGirl.define do
 factory :user do |u|
   u.email 'sameera@sample.com'
   u.password 'welcome'
   u.password_confirmation 'welcome'
   u.association :company, :factory => :company
 end
end

#spec/models/user_spec.rb
require 'spec_helper'

describe User do
   describe "Validations" do
     it "should validate the email" do
       user = FactoryGirl.build(:user, :email => nil)
       user.should have(1).error_on(:email)
     end
   end
end 
```

但我收到了这个错误，有警卫（即使在重新启动警卫之后）

```
15:47:35 - INFO - Running: spec/models/user_spec.rb
Running tests with args ["--drb", "-f", "progress", "-r", "/home/sameera/.rvm/gems/ruby-1.9.2-p290/gems/guard-rspec-2.4.0/lib/guard/rspec/formatter.rb", "-f", "Guard::RSpec::Formatter", "--failure-exit-code", "2", "spec/models/user_spec.rb"]...
F

Failures:

  1) User Validations should validate the email
     Failure/Error: user = FactoryGirl.build(:user, :email => nil)
     NoMethodError:
       undefined method `company=' for #<User:0x00000004dcee08>
     # ./spec/models/user_spec.rb:6:in `block (3 levels) in <top (required)>'

Finished in 0.16308 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/models/user_spec.rb:5 # User Validations should validate the email

Randomized with seed 26095

Done. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:57:47.433

您的`User`模型没有像您工厂假设的那样声明 belongs_to 关联：

你应该添加它：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
        :recoverable, :rememberable, :trackable, :validatable

     attr_accessible :email, :password, :password_confirmation, :remember_me, :company_id
  belongs_to :company
end 
```

当然，这假设您的用户表有一个`company_id`列（但我猜您已经添加了它，因为您在 attr_accessible 中列出了它）

# java - 如何将字符串中的一个字符与另一个字符串进行比较

> ID：14705747
> 
> 赞同：3
> 
> 时间：2013-02-05T10:50:05.350
> 
> 标签：java, string, hex, decimal

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我对Java相当陌生，为了练习，我正在尝试创建一个十六进制到十进制数字转换器，因为我已经成功地制作了一个二进制到十进制转换器。

我遇到的问题基本上是将字符串中的给定字符与另一个字符串进行比较。这就是我定义要比较的当前字符的方式：

```
String current = String.valueOf(hex.charAt(i)); 
```

这就是我尝试比较角色的方式：

```
else if (current == "b") 
   dec += 10 * (int)Math.pow(16, power); 
```

当我尝试通过仅输入数字（例如 12）来运行代码时，它可以工作，但是当我尝试使用“b”时，我得到了一个奇怪的错误。这是运行程序的整个结果：

```
run:
Hello! Please enter a hexadecimal number.
2b
For input string: "b" // this is the weird error I don't understand
BUILD SUCCESSFUL (total time: 1 second) 
```

这是一个仅通过数字转换成功运行程序的示例：

```
run:
Hello! Please enter a hexadecimal number.
22
22 in decimal: 34 // works fine
BUILD SUCCESSFUL (total time: 3 seconds) 
```

对此的任何帮助将不胜感激，谢谢。

**编辑：**我认为如果我把整个方法放在这里会很有用。

**编辑 2：已解决！**我不知道我应该接受谁的回答，因为他们都很好而且乐于助人。好矛盾啊

```
for (int i = hex.length() - 1; i >= 0; i--) {
        String lowercaseHex = hex.toLowerCase();
        char currentChar = lowercaseHex.charAt(i);

        // if numbers, multiply them by 16^current power
        if (currentChar == '0' || 
                currentChar == '1' || 
                currentChar == '2' || 
                currentChar == '3' || 
                currentChar == '4' || 
                currentChar == '5' || 
                currentChar == '6' || 
                currentChar == '7' || 
                currentChar == '8' || 
                currentChar == '9')
            // turn each number into a string then an integer, then multiply it by
            // 16 to the current power.
            dec += Integer.valueOf(String.valueOf((currentChar))) * (int)Math.pow(16, power);

        // check for letters and multiply their values by 16^current power
        else if (currentChar == 'a') 
            dec += 10 * (int)Math.pow(16, power);
        else if (currentChar == 'b') 
            dec += 11 * (int)Math.pow(16, power);
        else if (currentChar == 'c') 
            dec += 12 * (int)Math.pow(16, power);
        else if (currentChar == 'd') 
            dec += 13 * (int)Math.pow(16, power);
        else if (currentChar == 'e') 
            dec += 14 * (int)Math.pow(16, power);
        else if (currentChar == 'f') 
            dec += 15 * (int)Math.pow(16, power);
        else
            return 0;
        power++; // increment the power
    }

    return dec; // return decimal form
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T10:54:06.087

尝试将 char 初始化为`char`返回的值`charAt()`

```
char current = hex.charAt(i); 
```

然后在您的条件中使用文字字符：

```
else if (current == 'b') 
```

由于`char`它是一个原语，您可以使用`==`运算符对其进行比较。在前面的代码中，您正在比较 a `String`using `==`，因为 a`String`是 an`Object`代码正在检查它们是否相同，`Object`而不是它们是否具有与方法相同的值`String.equals()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:23:53.217

没有完整的代码很难确定，但“for input string:xx”形式通常是与 NumberFormatException 关联的消息。您是否偶然使用 Integer.valueOf()、Integer.parseInt() 或类似方法将字符串（部分）转换为数字？

如果是这种情况，为了让他们接受一个十六进制数字 (af)，您需要通过调用接受基数第二个参数的方法来明确声明您正在传递一个 16 进制数字 - 例如 Integer.valueOf(字符串，16）。

此外，正如其他人已经指出的那样，比较字符串的正确方法是使用 equals 方法，因为 == 运算符仅在两个引用指向完全相同的对象时才返回 true，而不管其值（内容）如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:54:10.267

您需要使用 equals 方法比较字符串

```
else if ("b".equals(current)) 
```

你可以在这里找到更多细节：[http ://www.javabeginner.com/learn-java/java-string-comparison](http://www.javabeginner.com/learn-java/java-string-comparison)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:58:09.333

将您的字符串更改为 char。char 当前 = hex.charAt(i);

然后在你的 else 如果你需要检查'b'和'B'

否则 if (current == 'b' || current == 'B') { }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T10:58:40.940

使用 .equals() 比较字符串。当您使用 == 时，我认为它会检查它们是否都引用相同的东西。

希望有帮助。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T12:34:01.337

实际上，有一种非常简单而优雅的方法：

```
int result = Integer.parseInt(hex, 16); 
```

# jquery - ios 上的 CSS 悬停仅在分配了事件侦听器时才有效

> ID：14705751
> 
> 赞同：1
> 
> 时间：2013-02-05T10:50:12.013
> 
> 标签：jquery, ios, css, hover, event-listener

我面临一个奇怪的问题。我已经使用 js 从选择下拉表单元素中创建了一个 CSS 下拉菜单。它似乎在大多数浏览器中都可以正常工作，但 ios 设备除外。当我悬停下拉 div 时；css 悬停事件不会在 ios 设备中触发，但如果我将事件侦听器添加到下拉元素而侦听器中没有任何操作，则悬停事件开始工作。

这是我要编辑的代码： http: [//codepen.io/kuldeepdaftary/pen/jKeDi](http://codepen.io/kuldeepdaftary/pen/jKeDi)

测试：[http ://codepen.io/kuldeepdaftary/full/jKeDi](http://codepen.io/kuldeepdaftary/full/jKeDi)

尝试在 JS 中注释以下代码段：

```
 $('.dropdown').click(function(){}); 
```

一旦你评论了上面的部分！Css hover 将不再在 iphone/ipads 中工作，但只要你取消注释它，它就会正常工作。

由于 clickevent 侦听器功能为空白！我不明白解决问题的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:54:19.363

ios 设备上没有悬停事件。首先，将显示和隐藏下拉菜单的逻辑隔离到它自己的函数中。然后，您应该根据浏览器中可用的功能来解决此问题。

```
if ('ontouchstart' in document.documentElement) {
  $(".dropdown").click(hoverFunction);
} else {
  $(".dropdown").hover(hoverFunction);
} 
```

可能值得注意的是，您可以仅使用 CSS 实现下拉功能，在这种情况下，这里有一个解决方案： [基于触摸的设备上的下拉菜单](https://stackoverflow.com/questions/11669735/drop-down-menu-on-touch-based-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T10:32:20.817

OP 被证明是在 iOS 上实现“触摸触发：悬停”的可行解决方案。

我大约在同一时间发现的另一种方法是将目标包装在 a[href=trivial] 中。然后，目标的 :hover 伪类在 iOS 中在触摸时更可靠地触发。

# google-chrome-extension - 打包的应用程序和 mailto 链接和默认电子邮件客户端

> ID：14705754
> 
> 赞同：0
> 
> 时间：2013-02-05T10:50:13.417
> 
> 标签：google-chrome-extension

只是想知道当默认电子邮件客户端不是 gmail 时，是否可以从 Chrome 打包应用程序内部打开一个 mailto 链接，而无需显示浏览器。

目前，我做一个 window.open(myMailtoLink) 显示 Chrome 并打开一个新标签并启动 Thunderbird。

我只想启动 Thunderbird 或 Gmail 客户端的 web 视图。

我的目的是从打包的应用程序内部获得与使用`java.awt.Desktop.getDesktop().browse("mailto:....")`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:01:06.097

您可以尝试使用`window.location`而不是`window.open`.

# android - 找到edittext自定义列表视图

> ID：14705756
> 
> 赞同：1
> 
> 时间：2013-02-05T10:50:21.177
> 
> 标签：android, android-listview

我正在使用自定义 Listview，并且在 listview_row.xml 中使用 EditText。我想对更改 Edittext 值执行一些操作，但是我如何找到焦点编辑文本，并且还想在焦点所在的行中显示输出。我如何找到和编辑文本并对文本更改执行我的操作，请帮助我，我很困惑，在此先感谢....

QuckAccess.java

```
public class QuickAcess extends Activity {

private ListViewAdapter mAdapter;
   private ArrayList<String> Header;
   private ArrayList<Integer> close;
   private ArrayList<String> From;
   private ArrayList<String> To;
   private ArrayList<String> Value;
   private ListView listView;
   EditText editText;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quickaccess);

        fillSave();
        mAdapter = new ListViewAdapter(this, Header, From, To, Value, close);
        listView = (ListView) findViewById(R.id.SavedList);
        listView.setAdapter(mAdapter);

        listView.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {

            }
        });    
}
public void fillSave() {
    // TODO Auto-generated method stub

     close = new ArrayList<Integer>();
     close.add(R.drawable.close);
     close.add(R.drawable.close);
     close.add(R.drawable.close);

     Header = new ArrayList<String>();
     Header.add("Temperature" + "  :");
     Header.add("Length");
     Header.add("Mass");

     From = new ArrayList<String>();
     From.add("a" + "  ");
     From.add("b" + "  ");
     From.add("c" + "  ");

     To = new ArrayList<String>();
     To.add("x");
     To.add("y");
     To.add("z");

     Value = new ArrayList<String>();
     Value.add("1");
     Value.add("2");
     Value.add("3");

} 
```

listview_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tvHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Header  :  " />

    <TextView
        android:id="@+id/tvfrom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="From   " />

    <ImageView
        android:id="@+id/imgExchange"
        android:layout_width="44dp"
        android:layout_height="36dp"
        android:src="@drawable/swap" />

    <TextView
        android:id="@+id/tvto"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="To" />

    <ImageButton
        android:id="@+id/ibclose"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/close" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/etValue"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:inputType="number" >
    </EditText>

    <TextView
        android:id="@+id/tvResult"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
</LinearLayout> 
```

ListViewAdapter.java

```
public class ListViewAdapter extends BaseAdapter {
 private ArrayList<String> Header;
 private ArrayList<Integer> close;
 private ArrayList<String> From;
 private ArrayList<String> To;
 private ArrayList<String> Value;
 private Activity activity;

 public ListViewAdapter(Activity activity,ArrayList<String> Header, ArrayList<String> From,ArrayList<String> To,ArrayList<String> Value,ArrayList<Integer> close) {
 super();
       this.Header = Header;
       this.From = From;
       this.close = close;
       this.activity = activity;
       this.To = To;
       this.Value = Value;

}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 3;
}

@Override
public Object getItem(int paramInt) {
    // TODO Auto-generated method stub
    return close.size();
}

@Override
public long getItemId(int paramInt) {
    // TODO Auto-generated method stub
    return 0;
}
 public static class ViewHolder
   {
       public ImageView imgViewFlag;
       public TextView header,from,to;
       public EditText value;
   }

@Override
public View getView(int paramInt, View paramView, ViewGroup paramViewGroup) {
    // TODO Auto-generated method stub

    ViewHolder view;
     LayoutInflater inflator = activity.getLayoutInflater();
     if(paramView==null)
       {
           view = new ViewHolder();
           paramView = inflator.inflate(R.layout.listview_row, null);

           view.header = (TextView) paramView.findViewById(R.id.tvHeader);
           view.from = (TextView) paramView.findViewById(R.id.tvfrom);
           view.to = (TextView) paramView.findViewById(R.id.tvto);
           view.value = (EditText) paramView.findViewById(R.id.etValue);
           view.imgViewFlag = (ImageView) paramView.findViewById(R.id.ibclose);
           paramView.setTag(view);
       }
     else
       {
           view = (ViewHolder) paramView.getTag();
       }
     view.header.setText(Header.get(paramInt));
     view.from.setText(From.get(paramInt));
     view.to.setText(To.get(paramInt));
     view.value.setText(Value.get(paramInt));
     view.imgViewFlag.setImageResource(close.get(paramInt));

    return paramView;
}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:57:16.147

您可以从此处获取索引或行。

```
@Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {

                rowIndex = position;

        } 
```

您还可以在此处为每个 EditText 字段设置标签

```
public View getView(int paramInt, View paramView, ViewGroup paramViewGroup) {
// TODO Auto-generated method stub

ViewHolder view;
 LayoutInflater inflator = activity.getLayoutInflater();
 if(paramView==null)
   {
       view = new ViewHolder();
       paramView = inflator.inflate(R.layout.listview_row, null);

       view.header = (TextView) paramView.findViewById(R.id.tvHeader);
       view.from = (TextView) paramView.findViewById(R.id.tvfrom);
       view.to = (TextView) paramView.findViewById(R.id.tvto);
       view.value = (EditText) paramView.findViewById(R.id.etValue);

       view.value.setTag("myThisEditText");

       view.imgViewFlag = (ImageView) paramView.findViewById(R.id.ibclose);
       paramView.setTag(view);
   }
 else
   {
       view = (ViewHolder) paramView.getTag();
   }
 view.header.setText(Header.get(paramInt));
 view.from.setText(From.get(paramInt));
 view.to.setText(To.get(paramInt));
 view.value.setText(Value.get(paramInt));
 view.imgViewFlag.setImageResource(close.get(paramInt));

return paramView; 
```

}

您可以在 onCClickListener 获取此标签

喜欢

```
arg1.getTag(); 
```

您可以对每个索引进行任何自定义。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:03:50.330

为列表视图创建一些数组列表。在“ `AddTextChangeListener`”上，您可以搜索列表中的类似项目并`arraylist`为搜索到的文本加载一个新项目...

```
edittext.addTextChangedListener(new TextWatcher(){
public void afterTextChanged(Editable s) {
     //search for the keyword and add the items to a new arraylist
} 
```

# java - Change an AbstractAction name

> ID：14705767
> 
> 赞同：2
> 
> 时间：2013-02-05T10:51:10.523
> 
> 标签：java, swing, label, jmenuitem, abstract-action

I have a JMenuItem bounded to an Action that I can get using `item.getAction()`. The action name is set when constructing the Action, e.g. using anonymous `new AbstractAction(String text, ...)`. The text field is set according to a ResourceBundle and localization information. Now if I want to change localization, I would like to change the Action.NAME field so that it displays the proper localized name. I can only get the name, e.g. using `item.getAction().NAME` but cannot change the field as it is final.

How could I change it's name?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T11:01:21.823

The final field is actually the key for the name property of the action. Change the name property using `putValue()`

```
action.putValue(Action.NAME, newName); 
```

# vb.net - IList 和 SortableBindingList

> ID：14705772
> 
> 赞同：1
> 
> 时间：2013-02-05T10:51:23.983
> 
> 标签：vb.net, generics, jquery-ui-sortable, ilist

是否可以从 IList 以通用方式创建可排序列表？

我有

```
Private Class DTO
        Public Property text1 As Integer
        Public Property text2 As String
        Public Property text3 As String
        Public Property text4 As DateTime
    End Class

    Private Function getList() As List(Of DTO)
        Dim l As New List(Of DTO)
        l.Add(New DTO With {.text1 = 1, .text2 = Nothing})
        l.Add(New DTO With {.text1 = 2, .text2 = "xxx"})
        l.Add(New DTO With {.text1 = 3, .text2 = "yyy"})

        For i = 1 To 2000
            l.Add(New DTO With {.text1 = i, .text2 = "a_" & (2000 - i).ToString, .text3 = "test" & i, .text4 = DateTime.Now})
        Next
        Return l
    End Function

 Private Sub fillListSearch(Of T)(lst As SortableBindingList(Of T))
        fillWithList(lst)
    End Sub

    Private Sub fillWithList(ByRef pr_list As IList)
        '--> create a SortableBindingList of this list
        grd.DataSource = pr_list
    End Sub 
```

我需要将功能从 fillListSearch 移到 fillWithList 螺母中，我不知道如何将该 IList 转换为 SortableBindingList(Of T)。

有什么提示吗？这可以通过反射来完成吗？

_谢谢

**更新**：设法让这个工作

```
Private Sub fillWithList(ByRef pr_list As IList)

     Dim tList As System.Type = pr_list.GetType()
            Dim typeIntern = tList.GetGenericArguments()(0)
            Dim typeSortList As Type = GetType(SortableBindingList(Of ))
            Dim typeArgs() As Type = {typeIntern}
            Dim constructed As Type = typeSortList.MakeGenericType(typeArgs)
            Dim sortedList As Object = Activator.CreateInstance(constructed, pr_list) 
            grd.DataSource = sortedList 
```

# mysql - 从 Datagrid MDI 更新/保存信息到 MySQL 数据库

> ID：14705775
> 
> 赞同：0
> 
> 时间：2013-02-05T10:51:39.413
> 
> 标签：mysql, sql, vb.net, datagridview, mdi

我有点奇怪，我一直在网上寻找，但找不到任何特定于我的问题的东西。希望有人可以帮助我。

我有一个从 MySQL 读取信息的 VB.Net 2012 应用程序。读数很好，并且填充正确，但我无法弄清楚如何保存更改。

信息从 DataTable 显示到 DataGridView。该应用程序是一个 MDI 应用程序，在任何时候都可能有多个 TableEditor 表单作为子项打开。

这是我的信息加载功能：

```
 Public Function get_SQL(ByVal SQLquery As String) As DataTable
    Try
        Dim myCommand As New MySqlCommand
        Dim myAdapter As New MySqlDataAdapter
        Dim myData As New DataTable
        Dim MysqlConn As New MySqlConnection

        MysqlConn.ConnectionString = "server=" & sqlServer & ";" _
            & "user id=" & sqlUsername & ";" _
            & "password=" & sqlPassword & ";" _
            & "database=" & sqlDatabase

        MysqlConn.Open()
        myCommand.Connection = MysqlConn
        myCommand.CommandText = SQLquery
        myAdapter.SelectCommand = myCommand
        myAdapter.Fill(myData)
        MysqlConn.Close()
        MysqlConn.Dispose()
        Return (myData)
    Catch ex As Exception
        Main.lblStatus.Text = "SQL Connection Error"
        errMsg = ex.ToString
        errForm = "SQL Connection"
        errWrite()
    End Try
End Function 
```

并且信息在加载时加载到子表单中，如下所示：

```
 Private Sub SQLeditor_Load(sender As Object, e As EventArgs) Handles Me.Load
    ToolStrip1.Visible = False
    Select Case sqlclick
        Case Is = "Office Details"
            SQLdata = get_SQL(qryOffice)
        Case Is = "School Details"
            SQLdata = get_SQL(qrySchools)
        Case Is = "ICT Staff"
            SQLdata = get_SQL(qryITstaff)
        Case Else
            ToolStrip1.Visible = True
    End Select
    dgvEditor.DataSource = SQLdata
End Sub 
```

SQLdata 是一个全局变量“Public SQLdata As DataTable”

所以我想创建一个新函数，它将所有更改保存回 SQL 数据库。由于我使用相同的全局变量来填充具有多个可以同时存在的实例的单个表单，因此我需要弄清楚如何从 DataGridView 传递信息或类似的东西，但我被卡住了。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:41:03.493

我最终设法找到了解决方案，并认为我会发布它，以防其他人遇到同样的问题。

我最终决定使用如下代码一次只打开一个可编辑的窗口：

```
Public sqlEditForm As SQLeditor
If issql = True Then
            If sqlEditForm Is Nothing OrElse sqlEditForm.IsDisposed Then
                sqlEditForm = New SQLeditor
                sqlEditForm.MdiParent = Main
                sqlEditForm.Show()
            Else
                Dim reply As DialogResult
                reply = MsgBox("An existing edit window is already active, do you want to close the existing instance and create a new one?" & vbCrLf & "Any unsaved changes will be lost?", MsgBoxStyle.YesNoCancel, "Existing Window Detected")
                Select Case reply
                    Case Is = vbYes
                        sqlEditForm.Close()
                        sqlEditForm = New SQLeditor
                        sqlEditForm.MdiParent = Main
                        sqlEditForm.Show()
                    Case Is = vbNo
                        sqlEditForm.Show()
                    Case Is = vbCancel

                End Select
            End If 
```

然后只保存来自数据适配器的数据的单个实例。

```
 Public Sub save_SQL()
    Try
        Dim myAdapter As New MySqlDataAdapter
        Dim MysqlConn As New MySqlConnection
        Dim cmdb = New MySqlCommandBuilder(myAdapter)

        MysqlConn.ConnectionString = "server=" & sqlServer & ";" _
            & "user id=" & sqlUsername & ";" _
            & "password=" & sqlPassword & ";" _
            & "database=" & sqlDatabase

        MysqlConn.Open()

        Select Case sqlclick
            Case Is = "Office Details"
                myAdapter.SelectCommand = New MySqlCommand(qryOffice, MysqlConn)
            Case Is = "School Details"
                myAdapter.SelectCommand = New MySqlCommand(qrySchools, MysqlConn)
            Case Is = "ICT Staff"
                myAdapter.SelectCommand = New MySqlCommand(qryITstaff, MysqlConn)
            Case Is = "SQL Editor"
                myAdapter.SelectCommand = New MySqlCommand(qrycustom, MysqlConn)
            Case Else
        End Select
        myAdapter.Update(SQLdata)

        MysqlConn.Close()
        MysqlConn.Dispose()
    Catch ex As Exception
        Main.lblStatus.Text = "SQL Connection Error"
        errMsg = ex.ToString
        errForm = "SQL Connection"
        errWrite()
    End Try
End Sub 
```

将同一个系统适应多 MDI 模型应该不难，但我认为我不需要它。

# php - 在wordpress中添加浏览器检查代码

> ID：14705776
> 
> 赞同：0
> 
> 时间：2013-02-05T10:51:39.820
> 
> 标签：php, css, wordpress, mobile, styles

我正在 Wordpress 代码中寻找可以对浏览器类型（是否为移动设备）进行简单检查的位置，并包括（如果存在）相应的 mobile.style.css 而不是 style.css。

我在哪里放这样的代码？我浏览了代码并将其放入 get_stylesheet_directory 函数中，但这似乎不起作用。

**编辑：** 为什么不媒体查询？因为它们的效果不如预期。我的 Galaxy Nexus 上也需要一个移动布局，其分辨率为 1280x720。所以这个关于如何编写移动 css 查询的教程对我不起作用。

所以这很糟糕，因为任何时候发布新的怪物分辨率平板电脑/智能手机 - android，我都在看着你！- 我必须更改代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:00:23.637

您以错误的方式处理此问题。您应该使用功能检测 ( [http://modernizr.com/](http://modernizr.com/) ) 和媒体查询来根据设备大小和功能提供不同的内容。

# r - 在不指定开始和结束日期的情况下将 .xts 强制转换为 .ts

> ID：14705783
> 
> 赞同：2
> 
> 时间：2013-02-05T10:52:08.900
> 
> 标签：r, xts

可重现的代码：

```
library(quantmod)
getSymbols('SPY', from = '1950-01-01')
Y <- Cl(to.monthly(SPY))
start <- c(1993, 1)
end <- c(2013, 2)
y <- ts(log(Y), start = start, end = end, frequency = 12) 
```

我希望`start`并且`end`设置为等于`start(Y)`且不`end(Y)`“手动”创建它们。

是否可以？

这是我想在不指定`start`和`end`变量的情况下得到的：

```
> y
          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
1993 3.782825 3.793465 3.810876 3.784871 3.811539 3.807995 3.803101 3.840742
1994 3.875774 3.846097 3.797510 3.808660 3.824502 3.794815 3.826683 3.864092
1995 3.852061 3.892228 3.914221 3.943328 3.982295 3.996548 4.028205 4.032646
1996 4.153713 4.157006 4.169607 4.180369 4.202750 4.206333 4.160288 4.179451
1997 4.361951 4.371471 4.322409 4.383151 4.444532 4.480853 4.557135 4.503912
1998 4.588126 4.655103 4.699935 4.712589 4.691623 4.730127 4.716533 4.564348
1999 4.849370 4.816727 4.854995 4.892227 4.869072 4.919981 4.888468 4.883256
2000 4.938495 4.923187 5.013165 4.977354 4.961515 4.978663 4.962845 5.026115
2001 4.920127 4.819878 4.759521 4.841506 4.835885 4.808927 4.798679 4.737513
2002 4.728979 4.710881 4.740749 4.680834 4.674883 4.594716 4.512616 4.519394
2003 4.455045 4.441474 4.439588 4.520810 4.574195 4.581185 4.599052 4.619467
2004 4.731627 4.745106 4.728272 4.709170 4.726148 4.740837 4.708088 4.710521
2005 4.772040 4.792728 4.770346 4.751433 4.783149 4.780635 4.818183 4.808764
2006 4.848116 4.853826 4.866226 4.878779 4.848195 4.846389 4.850858 4.872445
2007 4.968076 4.948263 4.955827 4.999170 5.032527 5.013498 4.981687 4.994438
2008 4.922678 4.896496 4.882575 4.929136 4.944139 4.851874 4.842848 4.858183
2009 4.416790 4.303119 4.376009 4.470724 4.527533 4.521245 4.593199 4.629472
2010 4.676467 4.707185 4.762174 4.777526 4.694737 4.636863 4.702932 4.656908
2011 4.857329 4.891476 4.887262 4.915812 4.904534 4.882575 4.862367 4.805823
2012 4.877637 4.920127 4.947411 4.940713 4.878779 4.913390 4.925150 4.949894
2013 5.008633 5.007564                                                      
          Sep      Oct      Nov      Dec
1993 3.827336 3.846738 3.836006 3.841386
1994 3.832330 3.860309 3.819688 3.819030
1995 4.068685 4.065774 4.109397 4.118712
1996 4.228584 4.260424 4.330996 4.301901
1997 4.547223 4.522441 4.560382 4.575329
1998 4.622519 4.700480 4.754624 4.814702
1999 4.857873 4.919981 4.936486 4.989616
2000 4.967241 4.962495 4.884921 4.876647
2001 4.648613 4.661551 4.736637 4.738827
2002 4.404155 4.483229 4.543082 4.479947
2003 4.604670 4.656813 4.667675 4.712050
2004 4.716354 4.729156 4.769752 4.794716
2005 4.812510 4.788574 4.831588 4.824386
2006 4.894701 4.925731 4.945421 4.953147
2007 5.027689 5.041164 5.001662 4.985044
2008 4.753504 4.572957 4.500809 4.502473
2009 4.659564 4.640151 4.699935 4.713486
2010 4.737338 4.774829 4.774829 4.834296
2011 4.728714 4.832306 4.828234 4.832306
2012 4.969605 4.951239 4.956883 4.958710
2013 
```

我正在添加这些文本行，因为 SO 告诉我我没有使用足够数量的解释文本词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:02:09.177

尝试以下操作：

```
as.ts(log(Y), start = head(index(Y), 1), end = tail(index(Y), 1)) 
```

这利用了`index`xts 对象中存在的日期。

正如@Arun 在评论中提到的那样，以下选项更加直接：

```
ts(log(Y), start = start(Y), end = end(Y), frequency = 12)
as.ts(log(Y), start = start(Y), end = end(Y)) 
```

* * *

我会建议这种`ts(log(Y)...`方法，因为`attributes`也保留了。比较：

```
ytest1 <- as.ts(log(Y), start = start(Y), end = end(Y))
ytest2 <- ts(log(Y), start = start(Y), end = end(Y), frequency = 12)

identical(y, ytest1)
# [1] FALSE
all.equal(y, ytest1, check.attributes = FALSE)
# [1] TRUE
identical(y, ytest2)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-21T00:43:24.123

我建议使用以下辅助功能 - 您可以调整`freq`以设置周期性：

```
xts.to.ts <- function(X, freq = 12L) {
    ts(as.numeric(X), 
          start = c(.indexyear(X)[1] + 1900, .indexmon(X)[1] + 1),
          freq = freq)
} 
```

然后`X_ts <- xts.to.ts(X)`

# java - HandlerInterceptorAdapter，响应的JSON编码和后处理

> ID：14705787
> 
> 赞同：3
> 
> 时间：2013-02-05T10:52:30.863
> 
> 标签：java, spring, rest, spring-mvc

## 以前的设计

我有一个如下构建的 Spring 控制器：

```
@RequestMapping(value = "/rest/funf/{datatype}", method = RequestMethod.GET)
public ModelAndView getFunfData(@PathVariable("datatype") String dataType,
        WebRequest request) throws HttpException { 
```

我还有一个`HandlerInterceptorAdapter`执行预处理和后处理（根据策略修改返回的模型）。后处理处理程序的签名如下

```
@Override
public void postHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler,
        ModelAndView modelAndView) throws Exception { 
```

它实际上运作良好。REST API 返回了一个结构不完善的 JSON 有效负载，但至少拦截器（一个策略执行点）能够从模型中匿名（剥离用户个人数据）并替换它。

关键是，使用旧设计，我能够在将响应发送到输出之前检索响应，对其进行修改并将其重新注入到`ModelAndView`实例中。为简洁起见，无需发布代码。

## 新设计

现在我发现了一种新设计，可以帮助我克服响应结构中的缺陷。

当我有`return new ModelAndView(jacksonView_instance, "data", dataToConvertToJson)`它的结构像

```
{
    "data": {
        "myAttr1":"myVal1"
     }
} 
```

当接收程序想要将有效负载转换为 JSON 时，这很糟糕。所以我发现

```
@RequestMapping(value = "/rest/funf/{datatype}", method = RequestMethod.GET, produces = { "application/json" })
    public @ResponseBody
    Object[] getFunfData(@PathVariable("datatype") String dataType,
            WebRequest request) throws HttpException { 
```

这个简化的代码有点，最重要**的是使响应结构良好**，比如

```
{
    "myAttr1":"myVal1"
} 
```

REST 设计合同完全可以，但是

## 问题

现在 HandlerInterceptor 将无法再检索模型以及我从 API 返回的对象（它是一个与[FUNF](http://www.funf.org)相关的 API，用于处理记录在移动设备上的个人数据，甚至是敏感数据）。

所以如果我需要匿名记录，我不能像以前那样在拦截器中做到这一点

## 解决方法

我意识到我可以杀死拦截器并在 API 中执行策略执行权，但这不是一个很好的设计，即使在当前执行授权`preHandle`和义务执行的 PEP`postHandle`是自动实例化的 Spring 对象。在处理多个 API 以及中期更改/扩展 PEP 实现的可能性时，在 API 中复制和粘贴代码是一个坏主意。

无论如何，让我们在充分解释上下文之后提出一个直截了当的问题

# 问题是

给定一个通用 Spring MVC API，它返回一个由内容协商器处理的对象

```
@RequestMapping(value = "/path/{variable}", method = RequestMethod.GET)
public @ResponseBody Object api() { 
```

如何在外部类中**拦截返回的对象以对其进行修改？**（例如，替换为要返回给客户端的新对象实例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:28:08.620

Looks like this is **not** possible in Spring MVC. I have just seen the code in a debug session.

When you use `ModelAndView`, Spring MVC stores the MaV in a variable that lives till `postHandle` and then is written in response body.

Instead, when you use `@ResponseBody` and return value that value is handled directly in the invocation cycle, using a `MessageConverter` to be written to the response.

Since the response is a one-way network stream, it's too late for intercepting it.

The solution should be based on a different approach than the handlers, like AOP **interceptors** applied directly to controller methods.

# c# - ASP.net Web API 中 MVC 的 DefaultModelBinder 的等价物是什么？

> ID：14705794
> 
> 赞同：23
> 
> 时间：2013-02-05T10:52:54.217
> 
> 标签：c#, rest, asp.net-web-api, model-binding

我想在 ASP.Net Web API 中创建一个自定义模型绑定器。有很多关于如何从头开始执行此操作的资源，但我想利用现有功能。

我在 codeplex 上查看了源代码，可以看到那里有很多模型绑定器，但大多数都是密封的……即使这样，我也无法确定在哪种情况下使用哪个模型绑定器。

这是我的api方法头：

```
public async Task<HttpResponseMessage> Post(long appId, [FromBody]Field field) 
```

我想要做的基本上是在填充了所有基本属性之后拦截模型绑定器，然后根据我将在客户端设置的 http 请求标头设置一些额外的值。

正如我所说，我很乐意创建自定义模型绑定器和模型绑定器提供者并将它们连接起来，我遇到的问题是尝试重用提供的现有功能。

谢谢，皮特

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T11:09:56.050

在此处查看[WebApi](http://www.microsoft.com/en-us/download/details.aspx?id=36476&utm_source=feedburner&utm_medium=twitter&utm_campaign=Feed%3a%20MicrosoftDownloadCenter%20%28Microsoft%20Download%20Center%29#tm)的扩展点。

`DefaultModelBinder`WebApi中的 MVC 没有完全等价的。

如果您正在使用该`[FromBody]`属性，[`FormatterParameterBinding`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.Http/ModelBinding/FormatterParameterBinding.cs)则将调用 a`MediaTypeFormatter`并使用 a 来构建您的模型。

URI 路径和 Url（查询参数）的模型绑定器将调用[`ModelBinderParameterBinding`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.Http/ModelBinding/ModelBinderParameterBinding.cs)，它们将传递给 a`IValueProvider`或 a `IModelBinder`...

所以...

在您的示例`Field`中（取决于内容类型协商的结果）将使用以下之一`XmlMediaTypeFormatter`：`JsonMediaTypeFormatter`或`FormUrlEncodedMediaTypeFormatter`. 因此，您可以使用它们各自的设置（例如 JSON.NET 设置）自定义它们的序列化行为……或者实现您自己的或包装的 MediaTypeFormatter。

在您的示例中，`appId`可能会将其传递给`IValueProvider`...，例如[ElementalValueProvider](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.Http/ValueProviders/Providers/ElementalValueProvider.cs)。

# ruby-on-rails - 如何在邮件程序辅助方法上设置 should_receive 期望？

> ID：14705797
> 
> 赞同：2
> 
> 时间：2013-02-05T10:53:08.447
> 
> 标签：ruby-on-rails, ruby, rspec

我将一个模块混合到一个邮件程序中并将其添加为一个帮助程序，以便在视图中访问它。我需要测试是否从视图中调用了正确的辅助方法（以便跟踪像素包含在电子邮件中），但 Rspec 似乎不起作用：

```
require "spec_helper"

describe DeviseOverrideMailer do

  before :each do
    # Make the helper accessible.

    # This approach does not work
    # class MixpanelExposer; include MixpanelFacade end
    # @mixpanel = MixpanelExposer.new

    # This approach also does not seem to work, but was recommended here: http://stackoverflow.com/questions/10537932/unable-to-stub-helper-method-with-rspec
    @mixpanel = Object.new.extend MixpanelFacade
  end

  describe "confirmation instructions" do
    it "tells Mixpanel" do
      # Neither of these work.
      # DeviseOverrideMailer.stub(:track_confirmation_email).and_return('') 
      @mixpanel.should_receive(:track_confirmation_email).and_return('')

      @sender = create(:confirmed_user)
      @email = DeviseOverrideMailer.confirmation_instructions(@sender).deliver

    end
  end
end 
```

邮递员：

```
class DeviseOverrideMailer < Devise::Mailer
  include MixpanelFacade
  helper MixpanelFacade
end 
```

模块：

```
class MixpanelFacade
  def track_confirmation_email
    # Stuff to initialise a Mixpanel connection
    # Stuff to add the pixel
  end
end 
```

邮件视图（HAML）：

```
-# Other HTML content

-# Mixpanel pixel based event tracking
- if should_send_pixel_to_mixpanel?
  = track_confirmation_email @resource 
```

错误：它抱怨它无法正确初始化 Mixpanel 连接（因为缺少请求助手），这表明 .should_receive() 没有正确地存根 track_confirmation_email() 方法。我怎样才能让它正确地存根？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:14:45.603

Rails 通过不公开 Mailer 的实例使这变得困难。请注意我们如何在 Mailers 上定义实例方法，例如，`def confirmation_instructions(sender) ...`但我们将它们称为类方法，如下所示`DeviseOverrideMailer.confirmation_instructions(@sender)`：这可以通过一些`method_missing`魔法来实现：

```
# actionmailer-3.2.11/lib/action_mailer/base.rb 
module ActionMailer
  #...
  class Base < AbstractController::Base
    #...
    class << self
      #...
      #line 437
      def method_missing(method, *args) #:nodoc:
        return super unless respond_to?(method)
        new(method, *args).message
      end 
```

注意由创建的一次性实例`new(...).message`。我们的 Mailer 被实例化、使用和丢弃，让我们没有简单的方法从我们的规范中拦截它以进行模拟/存根。

我唯一可以建议的是将要存根的行为提取到单独的类方法中并存根。

```
# in the helper:
module MixpanelFacade
  def track_confirmation_email
    Utils.track_confirmation_email(@some_state)
  end

  module Utils
    def self.track_confirmation_email(some_param)
      # Stuff to initialise a Mixpanel connection
      # Stuff to add the pixel
    end
  end
end

# in the spec
it "tells Mixpanel" do
  MaxpanelFacade::Utils.stub(:track_confirmation_email).and_return('') 
  @sender = create(:confirmed_user)
  @email = DeviseOverrideMailer.confirmation_instructions(@sender).deliver
end 
```

这当然是一个 hack——我们提取了一个不必要的类方法，以便我们可以将它存根——但我还没有遇到任何其他方法来做到这一点。如果您还没有解决这个问题，那么值得在 rspec 邮件列表中询问（请让我知道他们说了什么：）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T19:56:29.430

因此，如果您使用更高版本的 rspec，我会找到更好的解决方案。

您只需修改邮件程序对象的 any_instance_of 并存根您想要存根的特定方法。

any_instance_of(DeviseOverrideMailer) 做 |mailer| //你应该收到这里结束

# macos - 在 mac 中打开 mkb (marmalade) 文件时出错

> ID：14705798
> 
> 赞同：2
> 
> 时间：2013-02-05T10:53:14.427
> 
> 标签：macos, marmalade

我是 Marmalade 的新手，在 Mac 中打开文件时需要帮助。当我尝试打开果酱的 .mkb 文件时，我在终端中收到如下错误消息：

```
running mkb using app from /Developer/Marmalade/6.2/s3e/bin ...  
(<type 'exceptions.IOError'>, IOError(2, 'No such file or directory'), <traceback object 
at 0x1fe738>)  
Error opening mkb file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T07:12:54.247

[正如果酱网站上](https://devnet.madewithmarmalade.com/questions/8351/problems-in-running-mkb-on-mac.html)的回答，文件夹名称似乎存在问题。

如果包含您的 Marmalade 项目的文件夹（或者可能是整个路径）中有任何空格（“”），请尝试删除它们。或者将项目文件夹移动到路径中没有空格的地方。

我有同样的问题，删除空格解决了它。

# eclipse - Ant 在 Eclipse Indigo Service Release 2 中不工作

> ID：14705800
> 
> 赞同：0
> 
> 时间：2013-02-05T10:53:16.427
> 
> 标签：eclipse, ant, java, tools.jar

我的问题是我的简单构建脚本只会打印一条消息在 Eclipse Indigo Service Release 2 中不起作用。脚本如下 -

```
<target name="greetings">
<echo>
         Eclipse!
</echo>       
</target> 
```

当我尝试执行此脚本时，它没有给我任何错误，但没有打印消息“Eclipse！”。它也没有终止脚本，它一直处于运行模式，我必须手动停止它。我的项目指向'JDK1.6.0_32'而不是JRE。像“tools.jar”这样的所有必要的罐子都在那里。请让我知道为什么会这样。

* * *

您好，谢谢大家的回复。是的，它在那里，完整的脚本是-

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Test" default="greetings" basedir="."> 
<target name="greetings"> 
<echo> Eclipse! </echo> 
</target> 
</project> 
```

但仍然是同样的问题。它没有显示任何东西。可能问题出在配置中的其他地方。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:38:28.580

您的 Eclipse 版本和操作系统是什么？您使用 Eclipse 附带的 ant 版本还是通过 编辑 Ant_HOME 设置
`Window | Preferences | Ant | Runtime | Ant Home Entries`？

像这样的简单脚本应该可以开箱即用：

```
<project>
 <echo>Howdie :-)</echo>
</project> 
```

请检查您的`workspace/.metadata/.log`文件是否有错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:03:23.677

*   ANT 脚本应包含**根元素** `<project/>`。
*   `<project/>`包含一个名为的属性，该属性`default`指向要执行的默认目标。
*   `default`属性不是必须的。但必须至少有一个目标。你的脚本应该是这样的。

    ```
    <project default="greetings">
    <target name="greetings">
    <echo>
    Eclipse!
    </echo>       
    </target>
    </project> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:48:24.543

我有完全相同的问题，没有错误输出并且没有运行。

我所做的是在“External Tools Configuration...”中玩了一下JRE配置，有“Run in the same JRE as the workspace”、“Execution environment”和“Separate JRE”三个选项。

将其从“执行环境”更改为“在与工作区相同的 JRE 中运行”解决了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:07:59.070

我正在使用版本：Indigo Service Release 2 Build id：20120216-1857

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="asdc" default="greetings" basedir=".">
    <target name="greetings">
     <echo>
     Eclipse!
     </echo>       
    </target>
</project> 
```

它运行良好。

# scala - 具有相同变量名的Scala类继承

> ID：14705801
> 
> 赞同：3
> 
> 时间：2013-02-05T10:53:22.513
> 
> 标签：scala, inheritance

为什么 scala 抱怨下面的代码？

```
scala> class Http(var status: Int)
defined class Http

scala> case class Post(url: String, data: String, status: Int) extends Http(status)
<console>:8: error: overriding variable status in class Http of type Int;
 value status needs `override' modifier
       case class Post(url: String, data: String, status: Int) extends Http(status)
                                                  ^

scala> case class Post(url: String, data: String, sta: Int) extends Http(sta)
defined class Post 
```

但这运行良好。

```
scala> class C(boo:Int)
defined class C

scala> case class D(far:Int, boo:Int) extends C(boo)
defined class D 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:07:23.440

`var status: Int`将创建访问器方法，例如

```
def status() = this.status
def status(status: Int) {this.status = status} 
```

case 类默认创建这些方法，因此您有两个具有相同签名的方法，而 scala 要求您`override`在覆盖方法时添加关键字。

没有`var`你只创建类字段，它们不会被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:01:14.510

我认为 Http 类必须有一个状态值

所以 ：

```
scala> class Http(val status: Int)
defined class Http

scala> case class Post(url: String, data: String, override val status: Int) extends Http(status)
defined class Post 
```

# c# - C# 异步文件传输 - 在继续循环之前等待

> ID：14705803
> 
> 赞同：5
> 
> 时间：2013-02-05T10:53:25.077
> 
> 标签：c#, .net, asynchronous, .net-4.5, async-await

我试图了解 .NET 4.5 中的变化，主要是异步功能。为了解决这个问题，我想我会创建一个小应用程序来归档我的大量照片集。通过这样做，我学得最好，该应用程序具有双重目的。

我已经阅读了很多关于使用异步的 MSDN 文章，但我认为我对它的理解不够好（因为它不起作用）。我的意图是将源文件夹中的每张照片根据拍摄日期复制到目标文件夹（或者如果拍摄的元数据丢失则创建）。同时将其重命名为标准命名约定，并在图像框中存档图像时显示图像。我希望应用程序在工作期间保持响应，这就是异步的用武之地。现在应用程序的目的并不重要，重点是让我的头脑围绕异步。

实际发生的是应用程序无响应，按预期归档所有图像，但图像框仅显示最终图片。异步开始文件传输然后继续下一个图像，开始传输然后继续等等等等，所以我最终得到了数百个打开的文件流，而不是等待每个文件关闭。

任何我出错的地方都将不胜感激。我对使用任务的理解是不稳定的，返回任务有什么用？

imgMain 是 XAML 文件中的图像框。async/await 在存档方法中，但显示所有可能相关的代码。

```
using System;
using System.Drawing.Imaging;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Media.Imaging;
using System.Windows.Forms;
using System.IO;

namespace PhotoArchive
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    private string Source 
    {
        get { return txtSource.Text; }
        set { txtSource.Text = value; }
    }

    private string Destination
    {
        get { return txtDestination.Text; }
        set { txtDestination.Text = value; }
    }

    public MainWindow()
    {
        InitializeComponent();

    }

    private void btnBrowseDataSource_Click(object sender, RoutedEventArgs e)
    {
        var dialogue = new FolderBrowserDialog();
        dialogue.ShowDialog();
        Source = dialogue.SelectedPath;

    }

    private void btnBrowseDestination_Click(object sender, RoutedEventArgs e)
    {
        var dialogue = new FolderBrowserDialog();
        dialogue.ShowDialog();
        Destination= dialogue.SelectedPath;
    }

    private void btnSort_Click(object sender, RoutedEventArgs e)
    {
        var files = Directory.GetFiles(Source, "*.*", SearchOption.AllDirectories);
        var result = from i in files
                     where i.ToLower().Contains(".jpg") || i.ToLower().Contains(".jpeg") || i.ToLower().Contains(".png")
                     select i;

        foreach (string f in result)
        {
            DateTime dest = GetDateTakenFromImage(f);
            Archive(f, Destination, dest);
        }

    }

    private async void Archive(string file, string destination, DateTime taken)
    {

        //Find Destination Path
        var sb = new StringBuilder();
        sb.Append(destination);
        sb.Append("\\");
        sb.Append(taken.ToString("yyyy"));
        sb.Append("\\");
        sb.Append(taken.ToString("MM"));
        sb.Append("\\");

        if (! Directory.Exists(sb.ToString()))
        {
            Directory.CreateDirectory(sb.ToString());
        }

        sb.Append(taken.ToString("dd_MM_yyyy_H_mm_ss_"));
        sb.Append((Directory.GetFiles(destination, "*.*", SearchOption.AllDirectories).Count()));
        string[] extension = file.Split('.');
        sb.Append("." + extension[extension.Length-1]);

        using (FileStream fs = File.Open(file, FileMode.Open))
        using (FileStream ds = File.Create(sb.ToString())) 
        {
            await fs.CopyToAsync(ds);
            fs.Close();
            File.Delete(file);
        }

        ImgMain.Source = new BitmapImage(new Uri(sb.ToString()));
    }

    //get date info
    private static Regex r = new Regex(":");

    public static DateTime GetDateTakenFromImage(string path)
    {
        using (var fs = new FileStream(path, FileMode.Open, FileAccess.Read))
        {
            using (System.Drawing.Image img = System.Drawing.Image.FromStream(fs, false, false))
            {
                PropertyItem prop;

                try
                {

                    prop = img.GetPropertyItem(36867);

                }
                catch (Exception)
                {
                    prop = img.GetPropertyItem(306);
                }

                string dateTaken = r.Replace(Encoding.UTF8.GetString(prop.Value), "-", 2);
                return DateTime.Parse(dateTaken);
            }
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:35:50.813

> 我对使用任务的理解是不稳定的，返回任务有什么用？

这`Task`是异步操作的表示。当`Task`完成时，表示操作完成。你可以`await`，`Task`这意味着你将异步等待它完成（不阻塞 UI 线程）。

但是如果你让你的方法`async void`，没有办法等待操作完成。当方法返回时，您知道异步操作已启动，但仅此而已。

您需要做的是更改`Archive()`为返回 a `Task`，以便您可以在事件处理程序中等待它完成。将`Task`自动返回，您不需要（或可以）添加任何`return`s。

因此，将签名更改`Archive()`为：

```
private async Task Archive(string file, string destination, DateTime taken) 
```

然后`await`它在您的事件处理程序中（您还需要更改为`async`）：

```
private async void btnSort_Click(object sender, RoutedEventArgs e)
{
    // snip

    foreach (string f in result)
    {
        DateTime dest = GetDateTakenFromImage(f);
        await Archive(f, Destination, dest);
    }
} 
```

一般来说，`async void`方法应该*只*用于事件处理程序。所有其他`async`方法都应该是`async Task`（或者`async Task<SomeType>`如果它们返回一些值），以便您可以使用`await`它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:09:45.283

您需要等待该`Archive`方法，因为您只希望该方法的单个实例`Archive`在任何单个时间点运行。请注意，在您的实现中，您启动了很多`Archive`实例，并没有真正释放 UI 线程。

修改您的代码：

*   添加`async`到`btnSort_Click`
*   将返回类型添加`Task`到`Archive`
*   等待`Archive`_`btnSort_Click`

提示：如果调用的第一个方法（在您的情况下`btnSort_Click`）不是异步的，则它不会被视为“从外部”异步，即您的窗口和 UI 线程。

# curl - 无法通过浏览器连接到 VM，但可以通过 curl？

> ID：14705804
> 
> 赞同：1
> 
> 时间：2013-02-05T10:53:26.783
> 
> 标签：curl

我有一个正在运行的虚拟机，我可以通过 ping、telnet 和 curl（端口 80）从主机连接，但无法通过浏览器（任何浏览器）连接。

发生了什么事，我该如何解决这个问题？

（VM 在 192.168.100.100 上有一个仅限主机的网络连接）。

**[更新1：更多细节]**

该虚拟机是一个 VirtualBox 虚拟机，Ubuntu 12.04，运行 Nginx。Django 在后台运行（使用 Gunicorn），在端口 5000 上从 Nginx 转发，但这不是这里的问题 - 问题是端口 80 完全没有响应 - 只是默认浏览器（特定于浏览器）'这网页不可用”页面。

卷曲命令是：

```
curl 192.168.100.100 -i 
```

回应是：

```
$ curl 192.168.100.100 -i
HTTP/1.1 301 Moved Permanently
Server: nginx/1.1.19
Date: Tue, 05 Feb 2013 11:49:43 GMT
Content-Type: text/html
Content-Length: 185
Connection: keep-alive
Location: https://192.168.100.100/

<html>
<head><title>301 Moved Permanently</title></head>
<body bgcolor="white">
<center><h1>301 Moved Permanently</h1></center>
<hr><center>nginx/1.1.19</center>
</body>
</html> 
```

这是我所期望的（因为需要一些 SSL 重定向）。如果我`curl https://192.168.100.100 -k`获得了实际端点后重定向的 HTML，那么我知道这是有效的。

**[更新 2：更多信息]**

问题是间歇性的。我做了一个完整的`vagrant destroy`往返`vagrant up`从头开始重新启动，突然它起作用了。然后十分钟后它停止工作 - 所以我尝试更新 DHCP 租约以“重新获取”我的网络设置，这使它再次工作。所以它看起来像网络级别的一些干扰。

无论如何 - 我现在有一个解决方案（更新 DHCP），但希望有任何诊断帮助以供将来参考。

# java - 如何将 testng-results.xml 文件保存到 test-output 文件夹以外的不同文件夹？

> ID：14705807
> 
> 赞同：2
> 
> 时间：2013-02-05T10:53:46.993
> 
> 标签：java, unit-testing, testng

我需要帮助将 testng-results.xml（自动创建）保存到我的文件夹中 [文件夹名称（当前日期）：outputfolder_11-11-2013]

这就是我运行 testng.xml 的方式：

```
1\. I use eclipse
2\. right click on testng.xml > Run as > TestNg Suite
3\. I added a "-usedefaultlisteners false" in the Arguments box of the 
   "Run Configurations" 
```

当我使用上述设置运行我的 testng.xml 时，它不会创建 testng-results.xml。

我希望从我在 Eclipse 中的配置中完成以下两件事：
**1\. 我希望创建 testng-results.xml 并将其保存在我的（给定）文件夹“outputfolder_11-11-2013_13-10-02”中，这是使用当前系统时间动态创建的文件夹（outputfolder_DD-MM-YYYY_HH-MM-SS）**

或者

**2\. 我想通过在我的本地文件夹“TESTOUTPUT”中附加当前日期和时间来保存 testng-results.xml。我应该能够识别带有时间戳的结果文件。我的 test-results.xml 应该是这样的“testng-results_11-11-2013_13-56-34.xml (testng-results_DD-MM-YYYY_HH-MM-SS.xml)**

我将如何通过配置 eclipse 来实现这一点？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:05:57.827

您需要重新配置 XML Reporter：[http ://testng.org/doc/documentation-main.html#logging-xml-reports](http://testng.org/doc/documentation-main.html#logging-xml-reports)

# ios - AVAudioPlayer 音量条件未正确返回

> ID：14705808
> 
> 赞同：1
> 
> 时间：2013-02-05T10:53:47.880
> 
> 标签：ios, objective-c, operators, avaudioplayer

我有两个 AVAudioPlayer，分别称为“节点”和“区域”。他们有时会同时演奏。发生这种情况时，我需要将“区域”的音量降至 0.2。当“节点”完成时，我需要将“区域”返回到它的原始卷（从数组中拉入）。我有一个 adjustPlayerVolume 方法和另一个在节点完成时将“nodeIsPlaying”变量设置为 false 的方法。这两个工作正常。

以下代码用于检测音量是否需要上升或下降或保持原样。只要应用程序正在运行，它就会在一个循环中运行。

```
 NSLog(@"Zone Volume = %f", zonePlayer.volume);

            if ((nodeIsPlaying == false) && (zonePlayer.volume <= 0.200000)) {
                float maxVolume = [[[locationArray objectAtIndex:1] valueForKey:@"volume"] floatValue];
                [self adjustZoneVolume:maxVolume];
                NSLog(@"adjustZoneVolume called, node isn't playing and zonePlayer volume needs to be raised");
            }

            if ((nodeIsPlaying == true) && (zonePlayer.volume != 0.200000)) {

                float maxVolume = 0.2;
                [self adjustZoneVolume:maxVolume];
                NSLog(@"adjustZoneVolume called, node is playing and zonePlayer volume needs to be lowered");

            } 
```

顶部的日志始终将 0.200000 的卷打印到控制台。

当 nodeIsPlaying 设置为 true 时，返回底部条件，即使 NOT 运算符应该防止这种情况发生。

当 nodeIsPlaying 设置为 false 时，没有任何反应。

所以 <= 和 != 操作有问题。

大概是真的很蠢的事情……

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:09:08.983

看起来像一个浮点精度问题。运行一个简单的测试脚本：

```
int main (int argc, char const *argv[])
{
    float pointTwo = 0.2;

    if(pointTwo == 0.200000)
    {
         NSLog(@"Equal");
    }
    else NSLog(@"not equal");

   return 0; 
```

}

我得到“不相等”。我的建议是避免 != 而是测试 zonePlayer.volume 是否在 0.2 范围内 -/+ 一些小的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:22:50.670

对于精度操作，使用 NSDecimalNumber 类。

```
NSDecimalNumber *number = [NSDecimalNumber decimalNumberWithDecimal:[[NSNumber numberWithFloat:zonePlayer.volume] decimalValue]];
NSDecimalNumber *number2 = [NSDecimalNumber decimalNumberWithDecimal:[[NSNumber numberWithFloat:0.2f] decimalValue]];
NSComparisonResult comparisonResult = [number compare:number2];

if ((nodeIsPlaying == false) && (comparisonResult == NSOrderedSame || comparisonResult == NSOrderedDescending)) {

} 
```

# javascript - jquery中的太阳能系统

> ID：14705809
> 
> 赞同：4
> 
> 时间：2013-02-05T10:53:50.823
> 
> 标签：javascript, jquery, settimeout

我正在尝试在 jQuery 中创建一个太阳能系统。我有 5 个在椭圆路径上移动的图像行星。当一颗行星到达起点时，它应该重新开始。我不能做，因为有 5 个行星必须移动，浏览器将被阻止。我必须在一段时间后再次调用该函数（比如 8 秒来制作一个 cicle）。一段时间（几分钟）后，行星移动缓慢。有更好的方法吗？

```
$(window).load(function() {
    solar(10, 1, "#i1", getDim($("#i1")));
    solar(200, 1, "#i2", getDim($("#i2")));
    solar(400, 1, "#i3", getDim($("#i3")));
    solar(400, 0, "#i4", getDim($("#i4")));
    solar(200, 0, "#i5", getDim($("#i5")));
});

function solar(start, dir, id, dim) {
    var nr = 0;
    var i = start;
    while (nr != 2) {
        if (dir == 1) {
            i += step;
            if (Math.abs(i - 2*aa) < step) 
                dir = 1- dir;
        } else {
            i -= step;
            if (Math.abs(i) < step) 
                dir = 1- dir;
        }
        if (Math.abs(i - start) < step) {
            nr++;
        }
        p = getElipsePoint(p, dim);
        $(id).animate(
            {"left": p.x, "top": p.y}, 
            { duration:1 }
        );
    }   
    window.setTimeout(function() { solar(start, dir, id, dim) }, 8000);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:58:29.080

您可以使用回调确定动画何时完成。像这样的东西：

```
$(id).animate(
            {"left": p.x, "top": p.y}, 
            { duration:1 }, function () { console.log("Begin animation again"); }
        ); 
```

# android - 带有 BaseAdapter 的 ListView 没有响应 OnLongClickListener

> ID：14705813
> 
> 赞同：0
> 
> 时间：2013-02-05T10:53:59.380
> 
> 标签：android, listview, android-listview, baseadapter

我知道有一些话题讨论了这种行为，但我还没有看到可以使用的解决方案。

问题如下，我有一个使用实现 OnLongClickListener 的 BaseAdapter 的列表视图。在 GetView 方法中，我将每个视图的 onLongClickListener 设置为此 - 但根本没有捕获长点击。此外，我将每个项目 onClickListener 设置为实现 OnClickListener 的不同项目，并且它确实捕获了单击事件，当我尝试对 longClick 事件执行相同操作时，它仍然没有捕获长单击事件。

一点代码：

```
public class ListOfCustomersAdapter extends BaseAdapter implements OnLongClickListener
 {

...

public View getView(int position, final View convertView, ViewGroup parent) {

    vi.setOnClickListener(item); // works
    vi.setOnLongClickListener(this); // doesn't works
}

} 
```

该项目是实现 OnClickListener 的类的实例

编辑1：

视图 vi 是一个 FrameLayout，它包含几个视图：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/selector_item"
android:descendantFocusability="blocksDescendants" >

<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <include
        android:id="@+id/details_container"
        layout="@layout/list_message_my_details"
        android:paddingRight="6dp" />

    <include
        android:id="@+id/details_container"
        layout="@layout/list_message_responder_details" />

    <LinearLayout
        android:id="@+id/text_container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/list_message_margin_left"
        android:layout_marginRight="@dimen/list_message_margin_right"
        android:orientation="vertical"
        android:paddingTop="55dp" >

        <TextView
            android:id="@+id/message_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:background="@color/white"
     android:paddingBottom="@dimen/message_with_attached_channel_item_bottom_minus_padding"
               android:paddingTop="@dimen/message_with_attached_channel_item_bottom_minus_padding"
            android:textColor="@color/mobli_dark" />

        <FrameLayout
            android:id="@+id/text_seperator"
            android:layout_width="fill_parent"
            android:layout_height="1px"
            android:background="@color/mobli_dark_20"
            android:visibility="gone" >
        </FrameLayout>
    </LinearLayout>
</FrameLayout> 
```

编辑2：

public View getView(int position, final View convertView, ViewGroup parent) {

```
 View vi = convertView;
    ItemType item = items.get(position);

    if (item.getType() == null)
        vi = new TextItemType(context, item);
    else if (item.getType() == 1)
        vi = new ColorItemType(context, item);
    else if (item.getType() == 2)
        vi = new BoldItemType(context, item);
    else if (item.getType() == 3)
        vi = new FlatItemType(context, item);

    vi.setTag(item.getId());
    vi.setOnLongClickListener(this); //doesn't work
    vi.setOnClickListener(item); // work
    return vi;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T18:05:14.570

最好添加 listView.setOnItemLongClickListener(this); 在你的 mainActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:11:02.493

您的适配器是否与任何活动相关联？尝试在您的活动中实现侦听器，而不是在适配器中。

# ios - UIWebView 方向问题

> ID：14705817
> 
> 赞同：0
> 
> 时间：2013-02-05T10:54:07.013
> 
> 标签：ios, uiwebview, storyboard

我正在研究一个具有分屏 Web 视图的应用程序以进行比较。有没有办法保持这些的大小和位置，并在改变方向时让内容旋转？

例如，两张相互叠放的照片在纵向时占据屏幕的一半，然后当转向横向时，这些照片会并排放置，再次占据一半的屏幕。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:14:15.607

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    } 
```

上述功能可帮助您以所需的方式设置方向，但这不会布局您的 UIObject，因此，如果您希望图像在纵向和横向模式下正确显示，您应该在两种模式下相应地设置其**框架**，它将解决您的问题问题。

# caching - 在 L2 逐出时从 L1 缓存中逐出缓存

> ID：14705840
> 
> 赞同：6
> 
> 时间：2013-02-05T10:55:45.893
> 
> 标签：caching, computer-architecture, memory-size

我有一个关于内存系统遵循的政策的基本问题。

考虑一个具有私有 L1 和 L2 缓存的内核。在 L2 高速缓存之后，我们有一条运行相干流量的总线。现在，如果从 L2 缓存中逐出地址（X）的缓存行，是否有必要从 L1 缓存中逐出该地址？

驱逐的原因可能是它有助于保持一致性协议的不变性[如果 l2 中的一行显示无效，此核心不包含此地址]。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T10:58:36.437

共有[三种不同的设计](http://en.wikipedia.org/wiki/CPU_cache#Exclusive_versus_inclusive)，并且全部使用。

1.  独占：L1 缓存中的数据永远不会在 L2 缓存中。L2 缓存中的数据永远不会在 L1 缓存中。

2.  包含：L1 缓存中的数据也必须在 L2 缓存中。

3.  两者都不是：L1 缓存中的数据可能在也可能不在 L2 缓存中。

这些中的每一个都有优点和缺点。包容性方案允许缓存一致性协议忽略 L1 缓存——如果数据不在 L2 缓存中，则它不在 L1 缓存中。但是独占方案最有效地利用了宝贵的高速缓存。

包容性设计正变得越来越流行，因为更快的内核间同步变得比拥有稍大的有效缓存大小更重要。

# math - 使数字变为 1、2、4、8、16 等的简单数学公式

> ID：14705841
> 
> 赞同：-2
> 
> 时间：2013-02-05T10:55:47.803
> 
> 标签：math, equation

数学不是我最强的一面，所以请有人帮我解决这个公式：我有一个上升的变量 y，它趋于无穷大。

什么时候：

```
y < 100 I want x = 1,
100 >= y < 200 I want x = 2,
200 >= y < 300 I want x = 4,
300 >= y < 400 I want x = 8
400 >= y < 500 I want x = 16 
```

等等。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:57:07.883

```
x = 2 ^ (y / 100) 
```

或者如果 y 不是整数（相当于整数除法）。

```
x = 2 ^ Floor(y / 100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T10:57:17.470

这个怎么样：

```
 2 ^ ( y / 100 ) 
```

请注意，这使用整数除法。所以`250 / 100 == 2`。

# python - 从 .csv 下载包含 url 的 .doc 文件，然后将它们批量转换为纯文本

> ID：14705843
> 
> 赞同：0
> 
> 时间：2013-02-05T10:56:02.867
> 
> 标签：python, url, csv, .doc

我有一个 .csv 文件，其中包含一个包含 .doc 文件 URL 的列，我需要保存所有这些文件，然后在本地将这些 .doc 文件批量转换为 .text，目的是最终编写一些代码来添加包含的文本在这些文件中返回原始 .csv 文件/数据库。我有超过 3000 个 .doc 文件要下载，但它们都小于 100kb。我不擅长python，但我正在努力学习，所以对此的任何帮助将不胜感激。

到目前为止，我有这个代码：

```
import os
import sys
import csv

def get_urls(path):
    reader=csv.reader(open(path,'U'),delimiter=',')
    reader.next()
    return [row[0] for row in reader]

url_file_path='urllist.csv'
urllist=get_urls(url_file_path) 
```

这是最好的方法吗，即将 url 提取为列表，然后使用 urllib 下载它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:42:23.523

看一下

[链接.py](https://github.com/niccokunzmann/maglev-wiki-pictures/blob/master/links.py)

我下载png文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:47:27.463

我决定通过这些开始步骤远离 python，所以使用 wget 下载文件，然后使用 antiword 将所有 .doc 文件转换为 .txt。

谢谢

# javascript - Javascript 正则表达式组多个

> ID：14705844
> 
> 赞同：0
> 
> 时间：2013-02-05T10:56:08.163
> 
> 标签：javascript, regex

如何获得正则表达式匹配的所有组？

```
var str = "adam peter james sylvester sarah";
var regex = /what should my regex be t capture all names that has the letter a in them/
var match = regex.exec( text );
console.log(match) 
```

我在这里想要的是每个名称中都包含字母 a... 我希望能够最好同时捕获**多个名称。**

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:05:52.010

试试我在[Rubular上的例子](http://rubular.com/r/rCgqOLahWm)

```
var str = "adam peter james sylvester sarah";
var match = str.match(/[a-z]*a[a-z]*/gi)
console.log(match) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:01:07.067

对于这种情况，正则表达式可能是矫枉过正。`.split()`我认为这样会更`.indexOf()`简单

```
var names = str.split(" ");
for ( var i=0; i < names.length; i++ ) {
    if ( names[i].indexOf("a") >= 0 ) console.log(names[i]);
} 
```

# visual-studio-2010 - 无法打开登录请求的数据库“database.mdf”。登录失败。用户 'IIS APPPOOL\general' 登录失败

> ID：14705848
> 
> 赞同：0
> 
> 时间：2013-02-05T10:56:21.253
> 
> 标签：visual-studio-2010, sql-server-2008, iis, database-connection, connection-string

当我看到我面临的几个类似问题时，我遇到了一些不同的问题。我的连接字符串是

`Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\inetpub\wwwroot\aspnet_new\App_Data\database.mdf;Integrated Security=True;Connect Timeout=30" providerName="System.Data.SqlClient"`

我的应用程序在 .Net Framework 4.0 下运行，托管流水线模式是经典的，身份是 ApplicationPoolIdentity

该网站运行良好，但是当我打开 Visual Studio 并扩展我的数据库以添加/编辑表时，当 Visual Studio 与数据库建立连接时，IIS 停止工作并显示此错误。

`Cannot open database "database.mdf" requested by the login. The login failed. Login failed for user 'IIS APPPOOL\general`

因此，我在我的 Visual Studio 中关闭了连接，并在我的浏览器中刷新了同一页面，网站再次运行。我希望网站在 Visual Studio 中访问我的数据库以添加/编辑表时同时运行。

我没有使用 SQL Server Management Studio。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:03:39.470

尝试将您的应用程序池标识更改为运行`Network Service`

# android - 如何将意图函数用于列表活动中的选项卡活动？

> ID：14705851
> 
> 赞同：0
> 
> 时间：2013-02-05T10:56:30.923
> 
> 标签：android

*在我的应用程序中，我使用的是 listview 活动，它使用了一个意图函数，它必须转到 tabactivity。ReleaselistActivity.java

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Cursor Release = mDbHelper.fetchRelease(id);        
    String Releasename = Release.getString(Release.getColumnIndexOrThrow(ProjectsDbAdapter.KEY_TITLE));
    Release.close();
    Intent i1= new Intent(this, TabLayout.class);
    i1.putExtra(ProjectsDbAdapter.KEY_ROWID_REL, id); 
    i1.putExtra("project", gprojectName); 
    i1.putExtra("release", Releasename); 
    startActivity(i1);

} 
```

我无法进入 tabactivity，如果我单击列表视图，它显示我的应用程序已停止。

# android - 在自定义列表视图中保持透明度

> ID：14705854
> 
> 赞同：1
> 
> 时间：2013-02-05T10:56:51.587
> 
> 标签：android, android-listview

我正在使用自定义列表视图来制作 3d 列表视图。但是使用的时候

```
Bitmap bitmap = child.getDrawingCache(); 
```

在`drawChild`函数内部，视图的透明度丢失，透明像素为黑色。如果我为每个创建一个新的位图，`drawChild`列表视图会变慢并且不流畅。有什么方法可以在使用该`getDrawingCache()`功能时保持透明度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:10:33.400

好的，我找到了答案。为了保持透明度，我们必须重写`getDrawingCache()`View 的方法。

# c - flex 'yyval' 未声明

> ID：14705855
> 
> 赞同：1
> 
> 时间：2013-02-05T10:56:55.563
> 
> 标签：c, bison, yacc, flex-lexer

所以，我对 flex/bison 很陌生，但我需要编写这个解析器来识别一个简单的整数计算器，我在让 flex 和 bison 相互交谈时遇到了麻烦。

Flex 应该和所有返回标记值一样，但我不能完全让它实际返回语义值。这是我的弹性文件：

```
 %option noyywrap
            %{
                #include "test_Calc_Answer.tab.h"
                #include <malloc.h>
                #include <process.h>
                #define fileno _fileno
            %}
            NUM    [0-9]
            %%
            "{"[\^{}}]*"}"

            [ \t]+

            [\n]        {
                            return (int)'\n';
                        }

            "+"         {
                            return (int)'+';
                        }

            "-"         {
                            return (int)'-';
                        }

            "*"         {
                            return (int)'*';
                        }

            "/"         {
                            return (int)'/';
                        }

            {NUM}+      {
                            int i, value = 0;

                            for(i = yyleng-1; i>=0; i--)
                                value = 10*value + ( yytext[i] - '0' );
                            yyval = value;

                            return DIGIT;
                        }
            %% 
```

当我尝试编译生成的代码时，我收到“yyval undeclared”错误。我注意到它是在 *.tab.h 文件中声明的，所以我无法理解问题可能是什么。告诉我是否需要提供其他信息...

谢谢，对不起我的菜鸟或者我重新问了一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:54:49.100

词法值的变量通常称为**yylval**而不是**yyval**，因此几乎可以肯定 *.tab.h 中的变量被称为。

# hadoop - 在 Hive 表中使用 JSON-SerDe

> ID：14705858
> 
> 赞同：6
> 
> 时间：2013-02-05T10:57:02.737
> 
> 标签：hadoop, hive

我正在从下面的链接 [http://code.google.com/p/hive-json-serde/wiki/GettingStarted](http://code.google.com/p/hive-json-serde/wiki/GettingStarted)尝试 JSON-SerDe 。

```
 CREATE TABLE my_table (field1 string, field2 int, 
                                     field3 string, field4 double)
         ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.JsonSerde' ; 
```

我已将 Json-SerDe jar 添加为

```
 ADD JAR /path-to/hive-json-serde.jar; 
```

并将数据加载为

```
LOAD DATA LOCAL INPATH  '/home/hduser/pradi/Test.json' INTO TABLE my_table; 
```

并成功加载数据。

但是当查询数据为

*从 my_table 中选择 **；

我从表中只得到一行

*数据1 100 更多数据1 123.001*

Test.json 包含

```
{"field1":"data1","field2":100,"field3":"more data1","field4":123.001} 

{"field1":"data2","field2":200,"field3":"more data2","field4":123.002} 

{"field1":"data3","field2":300,"field3":"more data3","field4":123.003} 

{"field1":"data4","field2":400,"field3":"more data4","field4":123.004} 
```

哪里有问题？为什么当我查询表格时只有一行而不是 4 行。在 */user/hive/warehouse/my_table*中包含所有 4 行！

* * *

```
hive> add jar /home/hduser/pradeep/hive-json-serde-0.2.jar;
Added /home/hduser/pradeep/hive-json-serde-0.2.jar to class path
Added resource: /home/hduser/pradeep/hive-json-serde-0.2.jar

hive> CREATE EXTERNAL TABLE my_table (field1 string, field2 int,
>                                 field3 string, field4 double)
> ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.JsonSerde'
> WITH SERDEPROPERTIES (
>   "field1"="$.field1",
>   "field2"="$.field2",
>   "field3"="$.field3",
>   "field4"="$.field4"
> );
OK
Time taken: 0.088 seconds

hive> LOAD DATA LOCAL INPATH  '/home/hduser/pradi/test.json' INTO TABLE my_table;
Copying data from file:/home/hduser/pradi/test.json
Copying file: file:/home/hduser/pradi/test.json
Loading data to table default.my_table
OK
Time taken: 0.426 seconds

hive> select * from my_table;
OK
data1   100     more data1      123.001
Time taken: 0.17 seconds 
```

我已经发布了 test.json 文件的内容。所以你可以看到查询只产生一行

```
data1   100     more data1      123.001 
```

* * *

我已将 json 文件更改为 employee.json，其中包含

{ “firstName”：“Mike”，“lastName”：“Chepesky”，“employeeNumber”：1840192 }

并更改了表，但是当我查询表时它显示空值

```
hive> add jar /home/hduser/pradi/hive-json-serde-0.2.jar;
Added /home/hduser/pradi/hive-json-serde-0.2.jar to class path
Added resource: /home/hduser/pradi/hive-json-serde-0.2.jar

hive> create EXTERNAL table employees_json (firstName string, lastName string,        employeeNumber int )
> ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.JsonSerde';
OK
Time taken: 0.297 seconds

hive> load data local inpath '/home/hduser/pradi/employees.json' into table     employees_json;
Copying data from file:/home/hduser/pradi/employees.json
Copying file: file:/home/hduser/pradi/employees.json
Loading data to table default.employees_json
OK
Time taken: 0.293 seconds

 hive>select * from employees_json;
  OK
  NULL    NULL    NULL
  NULL    NULL    NULL
  NULL    NULL    NULL
  NULL    NULL    NULL
  NULL    NULL    NULL
  NULL    NULL    NULL
Time taken: 0.194 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:43:41.813

如果有疑问，如果没有日志，有点难以判断发生了什么（请参阅[入门](https://cwiki.apache.org/Hive/gettingstarted.html#GettingStarted-ErrorLogs)）。只是一个快速的想法 - 你可以试试它是否可以这样工作`WITH SERDEPROPERTIES`：

```
CREATE EXTERNAL TABLE my_table (field1 string, field2 int, 
                                field3 string, field4 double)
ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.JsonSerde'
WITH SERDEPROPERTIES (
  "field1"="$.field1",
  "field2"="$.field2",
  "field3"="$.field3",
  "field4"="$.field4" 
); 
```

您可能还想尝试一下 ThinkBigAnalytics的[分叉。](https://github.com/thinkbiganalytics/hive-json-serde)

更新：原来 Test.json 中的输入是无效的 JSON，因此记录被折叠。

有关详细信息，请参阅答案[https://stackoverflow.com/a/11707993/396567](https://stackoverflow.com/a/11707993/396567)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T22:34:37.017

1.  首先，您必须在[http://jsonlint.com/](http://jsonlint.com/)上验证您的 json 文件， 然后将您的文件设为每行一行并删除 [ ]。行尾的逗号是强制性的。

    [{"field1":"data1","field2":100,"field3":"更多数据1","field4":123.001}, {"field1":"data2","field2":200,"field3" :"more data2","field4":123.002}, {"field1":"data3","field2":300,"field3":"more data3","field4":123.003}, {"field1":" data4","field2":400,"field3":"更多数据4","field4":123.004}]

2.  在我的测试中，我从 hadoop cluster 添加了 hive-json-serde-0.2.jar ，我认为 hive-json-serde-0.1.jar 应该没问题。

    添加 JAR hive-json-serde-0.2.jar；

3.  创建你的表

    CREATE TABLE my_table (field1 string, field2 int, field3 string, field4 double) ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.JsonSerde' ;

4.  加载你的 Json 数据文件，这里我从 hadoop 集群加载它而不是从本地加载

    将数据输入路径“Test2.json”加载到表 my_table 中；

[我的测试](https://i.stack.imgur.com/70lC8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T09:26:35.783

对于基于 cwiki/confluence 的 json 解析，我们需要遵循一些步骤

1.  需要下载 hive-hcatalog-core.jar

2.  hive> 添加 jar /path/hive-hcatalog-core.jar

3.  创建表 tablename(colname1 datatype,.....) 行 formatserde'org.apache.hive.hcatalog.data.JsonSerDe' 存储为 ORCFILE；

4.  创建表中的 colname 和 test.json 中的 colname 必须相同，否则它将显示空值 希望它会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T13:07:46.690

我解决了类似的问题-

1.  我从 - [ [http://www.congiu.net/hive-json-serde/1.3.8/hdp23/json-serde-1.3.8-jar-with-dependencies.jar]](http://www.congiu.net/hive-json-serde/1.3.8/hdp23/json-serde-1.3.8-jar-with-dependencies.jar])

2.  在 Hive CLI 中运行命令 - 添加 jar /path/to/jar

3.  使用创建的表 -

```
create table messages (
    id int,
    creation_date string,
    text string,
    loggedInUser STRUCT<id:INT, name: STRING>
)
row format serde "org.openx.data.jsonserde.JsonSerDe"; 
```

4.  这是我的 JSON 数据 -

```
{"id": 1,"creation_date": "2020-03-01","text": "I am on cotroller","loggedInUser":{"id":1,"name":"API"}}
{"id": 2,"creation_date": "2020-04-01","text": "I am on service","loggedInUser":{"id":1,"name":"API"}} 
```

5.  使用 - 在表中加载数据 -

```
LOAD DATA LOCAL INPATH '${env:HOME}/path-to-json'
OVERWRITE INTO TABLE messages; 
```

6.  `select * from messages;`

```
1   2020-03-01    I am on cotroller   {"id":1,"name:"API"}
2   2020-04-01    I am on service     {"id":1,"name:"API"} 
```

# android - 将可序列化对象列表保存到 sharedPreferences

> ID：14705860
> 
> 赞同：18
> 
> 时间：2013-02-05T10:57:04.010
> 
> 标签：android

谁能告诉我如何将自定义 `Serializable`对象列表保存到中`SharedPreference`？我是 Android 新手，我想将一个保存`ArrayList<Contact> list`到共享首选项中。

```
public class MainActivity extends SherlockFragmentActivity {
PlaceSlidesFragmentAdapter mAdapter;
ViewPager mPager;
PageIndicator mIndicator;

public static final String TAG = "detailsFragment";

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.main,
            container, false);

    mAdapter = new PlaceSlidesFragmentAdapter(getActivity()
            .getSupportFragmentManager());

    mPager = (ViewPager) view.findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    ((CirclePageIndicator) mIndicator).setSnap(true);

    mIndicator
            .setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    Toast.makeText(MainActivity.this.getActivity(),
                            "Changed to page " + position,
                            Toast.LENGTH_SHORT).show();
                }

                @Override
                public void onPageScrolled(int position,
                        float positionOffset, int positionOffsetPixels) {
                }

                @Override
                public void onPageScrollStateChanged(int state) {
                }
            });
    return view;
    }

} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-17T11:31:59.147

另一个好的解决方案是使用 GSON。这是一个例子：

```
private static final String MAP = "map";    
private static final Type MAP_TYPE = new TypeToken<Map<MyObjA, MyObjB>>() {}.getType();

private static SharedPreferences prefs = MyApplication.getContext().getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);

private static Map<MyObjA, MyObjB> myMap;

public static void saveMap (Map<MyObjA, MyObjB> map) {
    SharedPreferences.Editor editor = prefs.edit();

    editor.putString(MAP, new Gson().toJson(map));
    editor.commit();
    myMap = map;
}

public static Map<MyObjA, MyObjB> loadMap() {
    if (myMap == null) {
        myMap = new Gson().fromJson(prefs.getString(MAP, null), MAP_TYPE);
    }
    return myMap;
} 
```

有关 gson 的更多信息，请访问[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

很简单吧？;)
保重

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T11:15:37.040

您可以使用**JSON**格式序列化您的`ArrayList`和它包含的对象，然后将`String`结果存储到`SharedPreferences`.

当您想取回数据时，检索字符串并使用 a`JSONArray`检索每个对象并将其添加到新的 ArrayList 中。

否则，您可以简单地使用`Object(Input/Output)Stream`类并使用（用于写入）将其写入不同的文件

```
FileOutputStream fos = this.openFileOutput(fileName, MODE_PRIVATE);
final OutputStreamWriter osw = new OutputStreamWriter(fos);
JSONArray array = new JSONArray();

// Add your objects to the array

osw.write(array.toString());
osw.flush();
osw.close(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T11:10:33.990

最简单的出路？

转换`JSON`并保存为`String`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:01:45.900

如果它已经序列化，那么你可以把它放进去。这篇文章中接受的答案将为你指明方向：[将 ArrayList 保存到 SharedPreferences](https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-12T10:29:27.337

试试这个，对我有用：

```
implementation 'com.google.code.gson:gson:2.7' 
```

**数据列表.java：**

```
import java.util.List;

public class DataList {
    List<Data> dataList;

    public List<Data> getDataList() {
        return dataList;
    }

    public void setDataList(List<Data> dataList) {
        this.dataList = dataList;
    }
} 
```

**MainActivity.java ：**

```
 List<Data> fetchLog = new ArrayList<Data>();
    DataList dataList = null;

    dataList = new DataList();
    Gson gson = new Gson();

    //SAVE List As SharedPreferences
    Data data = new Data("ali",20);
    fetchLog.add(data);
    dataList.setDataList(fetchLog);
    Gson gson = new Gson();
    String json = gson.toJson(dataList);

    utils.setPref("logs", json);// function to set SharedPreferences

    // read List from SharedPreferences
        String json = utils.getPref("logs");// function to read SharedPreferences
        if (! json.equals("")) {
            dataList = gson.fromJson(json, DataList.class);
            fetchLog = dataList.getDataList();
        } 
```

# php - 获取浏览器 500 错误消息而不是 codeigniter 的自定义页面

> ID：14705863
> 
> 赞同：0
> 
> 时间：2013-02-05T10:57:14.763
> 
> 标签：php, apache, codeigniter, imagick

我的代码抛出浏览器的 500 HTTP 错误页面。当我在 codeigniter 中编写代码时，为什么不呈现 codeigniter 的自定义 500 错误页面？

虽然我可以并且会纠正手头的问题，但目前我怎样才能显示 codeigniter 的错误页面？？？

我也尝试过 ErrorDocument 但这不起作用。

**编辑**

实际上，它会抛出致命错误。Codeigniter 不会拦截它并显示它自己的 500 错误消息吗？

# delphi - loadfromfile 函数的进度条

> ID：14705871
> 
> 赞同：2
> 
> 时间：2013-02-05T10:57:32.193
> 
> 标签：delphi, progress-bar, blob

我使用 Delphi LoadFromFile 函数插入 Table1BLOBFIELD.LoadFromFile ('C:\xxx.avi') 和 SaveToFile 命令来检索。这种插入/检索相当耗时（几分钟）。如果我可以显示一种进度条（而不仅仅是沙漏形光标），那就太好了。使用 SaveToFile 时，我也许可以使用计时器并检查文件大小（尽管这似乎在没有线程的情况下不起作用）。但这不是 LoadFromFile 的解决方案。有没有人有一个特定的解决方案，一个提示，......？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T18:48:21.597

这里有一个简单的例子，说明如何子类化`TFileStream`以及如何向其中添加`OnProgress`事件：

```
unit Unit1;

interface

uses
  SysUtils, Classes, Controls, Forms, XPMan, Db, ComCtrls, StdCtrls, AdoDB;

type
  TStreamProgressEvent = procedure(Sender: TObject;
    Percentage: Single) of object;

  TProgressFileStream = class(TFileStream)
  private
    FOnProgress: TStreamProgressEvent;
    FProcessed: Int64;
    FSize: Int64;
  public
    procedure InitProgressCounter(ASize: Int64);
    function Read(var Buffer; Count: Integer): Integer; override;
    function Write(const Buffer; Count: Integer): Integer; override;
    property OnProgress: TStreamProgressEvent read FOnProgress
      write FOnProgress;
  end;

  TForm1 = class(TForm)
    ADOQuery1: TADOQuery;
    ADOQuery1ID: TAutoIncField;
    ADOQuery1Blob: TBlobField;
    Button1: TButton;
    ProgressBar: TProgressBar;
    procedure Button1Click(Sender: TObject);
  private
    procedure StreamProgress(Sender: TObject; Percentage: Single);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TProgressFileStream }

procedure TProgressFileStream.InitProgressCounter(ASize: Int64);
begin
  FProcessed := 0;
  if ASize <= 0 then
    FSize := 1
  else
    FSize := ASize;
  if Assigned(FOnProgress) then
    FOnProgress(Self, 0);
end;

function TProgressFileStream.Read(var Buffer; Count: Integer): Integer;
begin
  Result := inherited Read(Buffer, Count);
  Inc(FProcessed, Result);
  if Assigned(FOnProgress) then
    FOnProgress(Self, FProcessed / FSize);
end;

function TProgressFileStream.Write(const Buffer; Count: Integer): Integer;
begin
  Result := inherited Write(Buffer, Count);
  Inc(FProcessed, Result);
  if Assigned(FOnProgress) then
    FOnProgress(Self, FProcessed / FSize);
end;

{ TForm1 }

procedure TForm1.Button1Click(Sender: TObject);
var
  Stream: TProgressFileStream;
begin
  ADOQuery1.Open;
  Stream := TProgressFileStream.Create('H:\Delphi\Blobtest.docx', fmOpenRead);
  try
    Stream.OnProgress := StreamProgress;
    Stream.InitProgressCounter(Stream.Size);
    ADOQuery1.Append;
    ADOQuery1Blob.LoadFromStream(Stream);
    ADOQuery1.Post;
  finally
    Stream.Free;
  end;
  Stream := TProgressFileStream.Create('H:\Delphi\Blobtest2.docx', fmCreate);
  try
    ADOQuery1.Last;
    Stream.OnProgress := StreamProgress;
    Stream.InitProgressCounter(ADOQuery1Blob.BlobSize);
    ADOQuery1Blob.SaveToStream(Stream);
  finally
    Stream.Free;
  end;
end;

procedure TForm1.StreamProgress(Sender: TObject; Percentage: Single);
begin
  ProgressBar.Position := Round(Percentage * ProgressBar.Max);
end;

end. 
```

虽然这个`OnProgress`事件是在进程的文件端实现的，但它所代表的实际进度是整个进程，包括数据库通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:10:49.527

我认为延迟不是为了读取文件，而是为了数据库中的记录。我相信您可以根据文件大小和使用“TTimer”的项目进度进行估计，但是对于这个读取文件应该在一个线程中完成，以便应用程序的其余部分（主线程）锁定

# android - android中的捆绑ID

> ID：14705874
> 
> 赞同：36
> 
> 时间：2013-02-05T10:57:45.137
> 
> 标签：android

**android中的bundle ID**是什么意思，它的用途是什么，两个android应用程序可以有相同的bundle ID吗？如果是，那为什么？如果不是，那么为什么

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-05T11:05:22.433

捆绑 ID 在 Android 中也称为**包**，是所有 Android 应用程序的唯一标识符。它必须是唯一的，因为当您将其上传到 Google Play 时，它会使用包名称作为唯一的应用标识来识别和发布您的应用。

实际上，它是唯一需要识别您的应用程序的东西，通常它有 3 个部分：

com.example.testapp

其中**example**通常是公司/出版商名称，而**testapp**是应用程序名称。

您将无法将 APK 上传到与商店中已存在的另一个应用程序具有相同包的商店。

如果您需要在 Eclipse 中更改包名称，请执行以下操作：

右键单击项目 > Android 工具 > 重命名应用程序包...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-29T15:41:00.550

BundleID 是用于在 Google Play 商店中识别您的应用的唯一标识符。您可以注意，对于 Google Play 上的每个应用程序，如下所示：

> **[https://play.google.com/store/apps/details?id](https://play.google.com/store/apps/details?id) =** **com.yourdomain.appname**

您不能为多个 App 分配相同的 BundleId。这是因为 Google Play 使用您的 BundleID 作为您应用的唯一标识符。

因此，您可以通过在应用级别 gradle 中编辑**applicationId**属性来在 Android Studio 中配置您的 BundleID，如下所示：

```
android {
    compileSdkVersion 27
    defaultConfig {
        //Edit the applicationId for changing your BundeID.
        applicationId "com.yourdomainname.yourappname"
        minSdkVersion 15
        targetSdkVersion 27
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
} 
```

# ruby - 添加内联附件时，Gmail 中缺少电子邮件正文

> ID：14705880
> 
> 赞同：2
> 
> 时间：2013-02-05T10:58:08.290
> 
> 标签：ruby, ruby-on-rails-3, email, ruby-on-rails-3.2, actionmailer

我`UserMailer`有一个导出方法，可以将电子邮件发送到一个地址。这封电子邮件有一个 CSV 附件和一些内嵌的 PNG 附件。这是发送电子邮件的操作：

```
 # user - the user to send the email to.
  # csv_files - an array of hashes which represent CSV files to attach to the email.
  # export_type - the name of the model being exported (either "customer" or "invoice").
  #
  # Examples
  #
  #   UserMailer.export_email(current_user, files, "customer")
  #
  # Returns an email instance.

  def export_email(user, csv_files, export_type)
    @user = user

    from_addy = %|'Exports' <exports@example.com>|
    subject = "Your #{export_type} export files."

    csv_files.each do |file|
      # file[:content] will just be a big CSV string.
      opts = { mime_type: 'text/plain', content: file[:content] }
      attachments[file[:name]] = opts
    end

    # export_email_images is an array of hashes of image information defined elsewhere
    # in the UserMailer class. These images are used in the email body.
    # If I comment out this line and remove the images from my email body
    # then everything works fine.
    export_email_images.each { |opts| attachments.inline[opts[:name]] = opts }

    # I have app/views/user_mailer/customer_export_email view files in both
    # .html.erb and .text.erb formats.
    mail(to: user.email, subject: subject, from: from_addy,
        template_name: "#{export_type}_export_email")
  end 
```

但是，当我在生产环境中将电子邮件发送到 Gmail 时，缺少正文：

![Gmail 缺少电子邮件正文](../Images/e132d5c050b2747f88ba76798dd039a4.png)

删除内联附件解决了问题，并且电子邮件正文正确呈现（显然没有内联图像）。这里有什么问题？

# java - JBoss 战争文件部署问题

> ID：14705882
> 
> 赞同：1
> 
> 时间：2013-02-05T10:58:10.397
> 
> 标签：java, jakarta-ee, jboss, jboss6.x

我正在尝试在 jboss 服务器上部署一个 KM.war 文件。它得到以下错误跟踪。

```
16:12:07,680 ERROR [AbstractKernelController] Error installing to PostClassLoader: name=vfs:///F:/software/servers/jboss-6.0.0.Final/server/default/deploy/OpenKM.war state=ClassLoader mode=Manual requiredState=PostClassLoader: org.jboss.deployers.spi.DeploymentException: Error during deploy: vfs:///F:/software/servers/jboss-6.0.0.Final/server/defau
lt/deploy/KM.war
        at org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentException(DeploymentException.java:49) [:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:185) [:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832) [:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550) [:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491) [:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983) [:2.2.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076) [:2.2.0.GA]
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679) [:2.2.0.GA]
        at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.process(MainDeployerPlugin.java:106) [:6.0.0.Final]
        at org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.process(ProfileControllerContext.java:143) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileDeployAction.deploy(ProfileDeployAction.java:151) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileDeployAction.installActionInternal(ProfileDeployAction.java:94) [:0.2.2]
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.GA]
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
        at org.jboss.profileservice.dependency.ProfileActivationWrapper$BasicProfileActivation.start(ProfileActivationWrapper.java:190) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationWrapper.start(ProfileActivationWrapper.java:87) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationService.activateProfile(ProfileActivationService.java:215) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationService.activate(ProfileActivationService.java:159) [:0.2.2]
        at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.activate(AbstractProfileServiceBootstrap.java:112) [:0.2.2]
        at org.jboss.profileservice.resolver.BasicResolverFactory$ProfileResolverFacade.deploy(BasicResolverFactory.java:87) [:0.2.2]
        at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.start(AbstractProfileServiceBootstrap.java:91) [:0.2.2]
        at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:132) [:6.0.0.Final]
        at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:56) [:6.0.0.Final]
        at org.jboss.bootstrap.impl.base.server.AbstractServer.startBootstraps(AbstractServer.java:827) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-5]
        at org.jboss.bootstrap.impl.base.server.AbstractServer$StartServerTask.run(AbstractServer.java:417) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-5]
        at java.lang.Thread.run(Thread.java:662) [:1.6.0_35]
Caused by: java.lang.Error: Error visiting "/F:/software/servers/jboss-6.0.0.Final/server/default/deploy/OpenKM.war/WEB-INF/lib/cxf-common-utilities-2.5.1.jar/org/apache/cxf/common/util/ReflectionUtil$6.class"
        at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:268) [jboss-classloading-vfs.jar:2.2.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:408) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:396) [jboss-vfs.jar:3.0.0.GA]
        at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:102) [jboss-classloading-vfs.jar:2.2.0.GA]
        at org.jboss.deployers.vfs.plugins.classloader.VFSDeploymentClassLoaderPolicyModule.visit(VFSDeploymentClassLoaderPolicyModule.java:181) [:2.2.0.GA]
        at org.jboss.scanning.plugins.DeploymentUnitScanner.scan(DeploymentUnitScanner.java:111) [:1.0.0.GA]
        at org.jboss.scanning.spi.helpers.UrlScanner.scan(UrlScanner.java:96) [:1.0.0.GA]
        at org.jboss.scanning.deployers.ScanningDeployer.deploy(ScanningDeployer.java:95) [:1.0.0.GA]
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.GA]
        ... 43 more
Caused by: java.lang.RuntimeException: Error visiting resource: VFSResourceContext @ org/apache/cxf/common/util/ReflectionUtil$6.class / BaseClassLoader@eb9464{vfs:///F:/software/servers/jboss-6.0.0.Final/server/default/deploy/OpenKM.war}, visitor: org.jboss.scanning.annotations.plugins.GenericAnnotationVisitor@6e1c9a
        at org.jboss.scanning.plugins.visitor.IgnoreSetErrorHandler.handleError(IgnoreSetErrorHandler.java:56) [:1.0.0.GA]
        at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.visit(ReflectResourceVisitor.java:91) [:1.0.0.GA]
        at org.jboss.scanning.annotations.plugins.AnnotationsScanningPlugin.visit(AnnotationsScanningPlugin.java:89) [:1.0.0.GA]
        at org.jboss.scanning.spi.helpers.ScanningPluginWrapper.visit(ScanningPluginWrapper.java:112) [:1.0.0.GA]
        at org.jboss.classloading.plugins.visitor.FederatedResourceVisitor.visit(FederatedResourceVisitor.java:101) [jboss-classloading.jar:2.2.0.GA]
        at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:264) [jboss-classloading-vfs.jar:2.2.0.GA]
        ... 56 more
Caused by: java.lang.InternalError: Enclosing method not found
        at java.lang.Class.getEnclosingMethod(Class.java:922) [:1.6.0_35]
        at sun.reflect.generics.scope.ClassScope.computeEnclosingScope(ClassScope.java:32) [:1.6.0_35]
        at sun.reflect.generics.scope.AbstractScope.getEnclosingScope(AbstractScope.java:56) [:1.6.0_35]
        at sun.reflect.generics.scope.AbstractScope.lookup(AbstractScope.java:72) [:1.6.0_35]
        at sun.reflect.generics.scope.AbstractScope.lookup(AbstractScope.java:72) [:1.6.0_35]
        at sun.reflect.generics.factory.CoreReflectionFactory.findTypeVariable(CoreReflectionFactory.java:91) [:1.6.0_35]
        at sun.reflect.generics.visitor.Reifier.visitTypeVariableSignature(Reifier.java:147) [:1.6.0_35]
        at sun.reflect.generics.tree.TypeVariableSignature.accept(TypeVariableSignature.java:25) [:1.6.0_35]
        at sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:50) [:1.6.0_35]
        at java.lang.reflect.Method.getGenericReturnType(Method.java:236) [:1.6.0_35]
        at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl$2.run(IntrospectionTypeInfoFactoryImpl.java:230) [jboss-reflect.jar:2.2.0.GA]
        at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl$2.run(IntrospectionTypeInfoFactoryImpl.java:218) [jboss-reflect.jar:2.2.0.GA]
        at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_35]
        at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.getMethods(IntrospectionTypeInfoFactoryImpl.java:217) [jboss-reflect.jar:2.2.0.GA]
        at org.jboss.reflect.plugins.ClassInfoImpl.getDeclaredMethods(ClassInfoImpl.java:416) [jboss-reflect.jar:2.2.0.GA]
        at org.jboss.scanning.plugins.visitor.ClassHierarchyResourceVisitor.handleClass(ClassHierarchyResourceVisitor.java:80) [:1.0.0.GA]
        at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.doVisit(ReflectResourceVisitor.java:108) [:1.0.0.GA]
        at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.visit(ReflectResourceVisitor.java:86) [:1.0.0.GA]
        ... 60 more

16:12:11,581 WARNING [FileConfigurationParser] AIO wasn't located on this platform, it will fall back to using pure Java NIO. If your platform is Linux, install LibAIO to enable 
```

*   视窗环境，
*   jboss-6.0.0.Final
*   战争文件大小为 99MB

war文件是一个基于hibernates、spring security和mvc框架的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:23:12.610

JBOSS 6.0 使用 JBOSS WS-CXF 3.1.4。此版本的 JBoss Web 服务 - Stack CXF 基于 Apache CXF 2.3.1。而您正在使用 cxf-common-utilities-2.5.1.jar。删除此 jar 并重新部署应用程序。

# php - 如何在Adminer中将表的一部分导出为SQL？

> ID：14705886
> 
> 赞同：6
> 
> 时间：2013-02-05T10:58:21.587
> 
> 标签：php, mysql, database, export, adminer

在 Adminer 中，我可以使用“导出”菜单选项导出整个表格。当我输入查询时，我可以将结果导出为 .CSV 或 .TSV，但不能导出为 SQL。

有什么选择吗？插件还是配置开关？

![在此处输入图像描述](../Images/8691b1dc13a2502a69c9f4ff38f36c53.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T01:00:05.643

Adminer 不提供一般 SQL 查询的 SQL 导出，因为该查询可能会连接更多无法导出到 SQL 的表。

要导出单个表中的行子集，请转到该表的“选择”视图，根据需要过滤结果并检查要导出的行（或选中“整个结果”以导出结果中的所有行）。然后使用表格下方的导出按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:03:48.640

如果您单击导出，那么在该页面上会看到一个名为 的单选按钮`dump`。放置您想要提取的行数并开始记录索引号。那么你会得到你预期的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T13:18:58.883

在当前版本中，可以使用搜索

1.  选择列
2.  选择**SQL**作为标记
3.  进入值字段填充子查询**IN (SELECT id FROM ...)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T06:28:41.867

我是这样做的：

1.  转到`Adminer`-> 单击`Dump`左上角的。
2.  `Output`-> 检查`save`单选按钮
3.  `Format`-> 检查`SQL`单选按钮
4.  转到下面的`Export`按钮
5.  标记复选框`Tables`（如果要数据，则标记为选中`Data`）
6.  如果您想要 1 个表格，请标记表格的一个复选框。
7.  点击`Export`按钮。

我们走吧 :)，酷 ;)

# php - phpExcel多个工作簿内存性能

> ID：14705896
> 
> 赞同：0
> 
> 时间：2013-02-05T10:59:00.677
> 
> 标签：php, memory-management, report, phpexcel

我有一个使用 PHPexcel 生成的报告。它的报告相当大，总共有 8 个工作簿/标签。正如您可以想象的那样，它占用了相当多的内存，并且我开始遇到问题。

我想知道哪些选项最适合我来减少生成此报告所需的内存负载。

我的想法是用 8 个空工作表创建电子表格。保存文件，然后使用

```
$objReader->setLoadSheetsOnly($sheetname); 
```

我不确定我是否朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:07:50.393

开始的最佳选择是查看显式编写以减少内存使用的单元缓存选项。这些在开发人员文档的第 4.2.1 节中进行了描述

# android - android.permission.INTERNET？

> ID：14705899
> 
> 赞同：7
> 
> 时间：2013-02-05T10:59:12.090
> 
> 标签：android

我在我的应用程序中使用了三个按钮 1）反馈按钮：它允许用户通过任何邮件应用程序发送反馈 2）一个使用共享意图的共享按钮 3）一个“评分应用程序”按钮，它在应用商店

所有 3 个按钮都使用其他应用程序访问互联网。

我需要在清单文件中添加 android.permission.INTERNET 权限吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T11:05:21.340

在这种情况下，答案是不，在这种情况下不需要权限，正如 Dipendra 在他的回答中指出的那样，因为应用程序通过外部应用程序将其请求作为 Intent 发送，而不是从内部直接请求网络他的申请。

**一点背景：**

了解是否需要许可的最简单方法是在测试设备上使用您的应用程序。它是否按您的预期工作？未经许可，您是否会遇到任何错误`INTERNET`？

如果你这样做了，那么很明显你需要它！如果不是（并且在这个问题的情况下），您不需要`INTERNET`许可。

权限是作为安全功能存在的。

有问题的许可是：

> 公共静态最终字符串互联网
> 
> 允许应用程序打开网络套接字。
> 
> 常量值：“android.permission.INTERNET”

如果您的应用程序需要网络套接字，那么您的应用程序需要获得使用它们的权限。就那么简单。

如果您需要权限，请将以下行添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

那里的权限是为了保护用户，所以它是关于预先并清楚你的应用程序意图是什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T11:09:51.300

不，您不需要访问互联网的权限。因为，您所有与互联网相关的任务都交给了其他应用程序。

# matplotlib - matplotlib 刻度厚度

> ID：14705904
> 
> 赞同：35
> 
> 时间：2013-02-05T10:59:40.053
> 
> 标签：matplotlib

有没有一种方法可以增加 matplotlib 中刻度的厚度和大小，而不必编写像这样的长代码：

```
for line in ax1.yaxis.get_ticklines():
    line.set_markersize(25)
    line.set_markeredgewidth(3) 
```

这段代码的问题在于它使用了一个循环，这通常会消耗大量的 CPU 使用率。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-05T16:56:13.313

更简单的方法是使用对象的`set_tick_params`功能`axis`：

```
ax.xaxis.set_tick_params(width=5)
ax.yaxis.set_tick_params(width=5) 
```

这样做意味着您可以在每个轴的基础上进行更改，而无需担心全局状态，也无需对 mpl 对象的内部结构做出任何假设。

如果您想为轴中的*所有*刻度设置此项，

```
ax = plt.gca()
ax.tick_params(width=5,...) 
```

看看[`set_tick_params`](http://matplotlib.org/api/axis_api.html#matplotlib.axis.Axis.set_tick_params)doc 和 [tick_params 有效关键字](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-05T11:44:28.003

您可以使用like in更改所有`matplotlib`默认值`rcParams`

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt

# set tick width
mpl.rcParams['xtick.major.size'] = 20
mpl.rcParams['xtick.major.width'] = 4
mpl.rcParams['xtick.minor.size'] = 10
mpl.rcParams['xtick.minor.width'] = 2

x = np.linspace(0., 10.)
plt.plot(x, np.sin(x))

plt.show() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T14:13:05.827

您可以使用[matplotlib.pyplot.setp](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.setp)

```
plt.setp(ax.yaxis.get_ticklines(), 'markersize', 25)
plt.setp(ax.yaxis.get_ticklines(), 'markeredgewidth', 3) 
```

您也可以使用列表推导，虽然没有返回值可能没有多大意义，除了减少代码中的行数[参见例如here](http://blog.cdleary.com/2010/04/efficiency-of-list-comprehensions/)

```
[line.set_markersize(25) for line in ax1.yaxis.get_ticklines()]
[line.set_markeredgewidth(3) for line in ax1.yaxis.get_ticklines()] 
```

# python - 请帮我将shell脚本转换为python

> ID：14705905
> 
> 赞同：1
> 
> 时间：2013-02-05T10:59:39.693
> 
> 标签：python, file, list, dir

我想让 python-script 在目录中按模式搜索文件并显示结果。在 shell 中它很容易，并且是在一个小时内完成的。

```
date=`date +%F`
path=/root/bkp
for i in $(ls $path)
do
str=`find $path/$i -name “*$date*.txt”`
if [$str]
    then
        echo “File in $i is OK”
    else
        echo “File in $i is not found”
fi
done 
```

在 Python 中

```
import subprocess,os,datetime,fnmatch
path='/root/bkp'
date=datetime.date.today()
pattern=str('%s' %date)
def find_file():
    obj=re.compile(pattern)
    for root,dirs,files in os.walk(path):
        for f in files:
        match=obj.search(f)
            if match:
                print ‘File in ??? is OK’ ===== # need directory mention
            else:
                print ‘no file’
find_file() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:32:43.507

我对这个问题有点困惑，但如果你只是在寻找文件名中是否有模式，那么你已经在那里了。

编辑：递归遍历每个目录

```
import os,datetime
path = "C:\\Temp"
date=datetime.date.today()
pattern=str('%s' %date)
filefound = False
def find_file(currpath):
    for dirname, dirnames, filenames in os.walk(currpath):
        for files in filenames:
            if pattern in files:
                print("File found in " + currpath)
                global filefound
                filefound = True
                return
        for directory in dirnames:
           find_file(path+"\\"+directory)
find_file(path)
if filefound == False:
    print("File containing " + pattern + " not found in " + path) 
```

# wordpress - 创建 Wordpress 网站的移动版本

> ID：14705910
> 
> 赞同：0
> 
> 时间：2013-02-05T10:59:52.063
> 
> 标签：wordpress, mobile, tablet

如何创建现有 Wordpress 网站的移动版本？

我知道我可以使用特定于移动设备的样式表，但是如何调整实际的模板文件，以便有两个版本，一个用于桌面，一个用于移动？

这不是让网站响应的情况，因为它只使用相同信息的一部分。此外，该网站比仅使用各种 Wordpress 移动插件更复杂。

有没有办法加载模板的不同部分，具体取决于它是移动设备还是桌面设备？所以它将使用相同的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:03:35.233

有点过时，但这解释了如何使用 WPtouch [https://wordpress.stackexchange.com/questions/3875/how-to-detect-mobile-devices-and-present-them-a-specific-theme](https://wordpress.stackexchange.com/questions/3875/how-to-detect-mobile-devices-and-present-them-a-specific-theme)

比您可以基于移动浏览器加载样式表/主题（尽管这将使用不同的模板或 CSS 文件等）

```
if ( strpos( $_SERVER['REQUEST_URI'], '/wp-admin' ) === false ) {
    add_filter( 'stylesheet', array(&$this, 'get_stylesheet') );
    add_filter( 'theme_root', array(&$this, 'theme_root') );
    add_filter( 'theme_root_uri', array(&$this, 'theme_root_uri') );
    add_filter( 'template', array(&$this, 'get_template') );       
} 
```

# dom - 如何使用 org.w3c.Dom 将元素添加到根

> ID：14705911
> 
> 赞同：0
> 
> 时间：2013-02-05T10:59:55.040
> 
> 标签：dom

我正在使用 Org.W3c.dom 在我的应用程序中生成和解析 XML 文件。

在这里我被卡住了，因为我找不到向 Root 元素添加更多元素的方法。

我想生成如下 Xml：

```
<root>
       <siteDesc>abc</siteDesc>
       <respCode>false</respCode>
       <respMsg>Done</respMsg>
  </root> 
```

这是我用来生成 XML 文件的代码...

```
private final DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
Element responseElement = document.createElementNS(NAMESPACE_URI, "root");
responseElement.appendChild("TODO") // Confused Here .. How to append elements with their names 
```

任何人都可以建议我，在上面的代码中.. 将元素添加到 roor 节点需要进行哪些更改？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:02:46.973

你想要

1.  创建一个节点并将其添加到您的文档 ( `responseElement`)
2.  进一步创建`Elements`并将它们添加到您的`responseElement`（再次，使用`appendChild()`）
3.  对于其中的每一个，创建一个`TextNode`并将它们添加到您的`Elements`

在上面，元素创建与添加到文档不同。

# c# - 下载 zip 或 pdf 在 IE8 上不起作用

> ID：14705913
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:03.777
> 
> 标签：c#, asp.net, internet-explorer-8, download

我在我的项目中遇到了一个问题。我的页面中有两个按钮，一个用于下载 pdf，一个用于下载 zip。这些下载适用于除 IE8 之外的所有浏览器（IE9 有效）。

在 IE8 中，有一条消息说“为了帮助保护您的安全，...”。当我单击“下载此文件”时，浏览器刷新页面，我丢失了我所做的一切。但是当我再次尝试下载文件时，浏览器让我这样做。

有一个截图：

![截屏](../Images/7510e34574dc0e9122314fcb17db8767.png)

这是我的代码：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    if (IsPostBack)
        return;

    if (Request.QueryString["outputpdf"] == "1" && !string.IsNullOrEmpty(PdfReportFilePath))
    {
        OutputPdfFile(PdfReportFilePath);
        PdfReportFilePath = string.Empty;
        Response.End();
    }

    if (Request.QueryString["outputexport"] == "1" && !string.IsNullOrEmpty(RxMapSession.ExportedFilePath))
    {
        OutputExport(RxMapSession.ExportedFilePath);
        RxMapSession.ExportedFilePath = RxMapSession.ExportedFileName = string.Empty;
        Response.End();
    }

    initChart();
}

private void OutputExport(string exportedFilePath)
{
    Response.ContentType = "application/zip";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + Path.GetFileName(exportedFilePath));
    Response.WriteFile(exportedFilePath);
}

private void OutputPdfFile(string reportFullPath)
{
    string fileName = reportFullPath.Split('\\').Last();
    Response.ContentType = "application/pdf";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + fileName);
    Response.WriteFile(reportFullPath);
    Response.End();
} 
```

你知道为什么我在 IE8 上会出现这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:37:49.040

尝试这个

1.  转到工具 → Internet 选项

2.  转到高级选项卡

3.  选中“允许活动内容在我的电脑上的文件中运行”。

4.  保存设置并关闭所有 IE 窗口并重新启动 IE。

或者

1.  转到工具 → Internet 选项

2.  单击安全选项卡，然后单击安全区域受信任的站点。

3.  单击站点。

4.  该网站应显示在将此网站添加到区域字段中。

5.  单击添加。

6.  单击关闭，然后单击确定。

7.  关闭所有 IE 窗口并重新启动 IE。

# python - GAE Python 数据建模/查询：引用实体的属性

> ID：14705914
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:05.117
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个与此类似的场景，我正在尝试找到最佳/最常见的解决方案：

```
class Car(db.Model):
  peopleCapacity = db.IntegerProperty()

class Wheel(db.Model):
  car = db.ReferenceProperty(reference_class=Car, collection_name='wheels')
  diameter = db.IntegerProperty() 
```

我想要这种查询的结果：

```
smallWheelsForBigCars = db.GqlQuery(
  'SELECT * FROM Wheel WHERE diameter < 10 AND car.peopleCapacity > 6'        
)
# returns 0 entities as properties like 'car.peopleCapacity' are apparently not supported 
```

我考虑过的一些（hacky）解决方案：

*   分别对 Wheel 和 Car 进行约束并手动检查交叉口（慢！）
*   使用 computedProperty 将 car.peopleCapacity 的副本存储在 Wheel 中。（不好，因为当汽车的 peopleCapacity 发生变化时，我需要更新连接到汽车的所有车轮。是的，在我的实际情况下，“peopleCapacity”会改变）

我的两个问题是：
为什么 car.peopleCapacity 在查询中不起作用？
有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:32:32.577

您的结论是正确的，数据存储区没有子属性查询能力（您可以使用 StructureProperty 实现这一点，但不是您正在寻找的方式）。
您应该对模型进行非规范化并将所有内容放在大实体上，更新会很痛苦，但检索结果会更容易和更快。

# wpf - Visual Studio WPF 项目构建输出路径

> ID：14705916
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:11.247
> 
> 标签：wpf, build, visual-studio-2012

我有一个包含 3 个项目的解决方案。
1 个 Windows 应用程序和 2 个类库。

我光盘上的文件夹结构树如下：
\projects\CurrentProject\test\\
projects\CurrentProject\build\

解决方案文件位于：
/projects/CurrentProject/

所有 3 个项目都位于 \projects\CurrentProject\test\

我需要所有项目（1.exe 和 2 个 dll）的所有**构建输出**都在 \projects\CurrentProject\build\ ...
所以在每个项目上，我转到“项目属性”，同时选择调试/发布输出路径为：“....\build”，但在这样做之后，我在类库项目的 /obj 上有文件。

为什么是这样 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:08:03.833

要将 obj 文件夹移动到其他位置，您可以使用[`BaseIntermediateOutputPath`](http://msdn.microsoft.com/en-us/library/bb629394.aspx)项目文件（`.csproj`文件）中的属性自定义构建配置。

去做吧：

1.  `.csproj file`在文本编辑器中打开（`.csproj`文件是 XML 文件）
2.  编辑元素 BaseIntermediateOutputPath 的值或将其添加到所需的`PropertyGroup`. （要修改或添加的行如下所示`<BaseIntermediateOutputPath>..\build\obj</BaseIntermediateOutputPath>`）
3.  保存文件
4.  在 Visual Studio 中重新打开您的项目。

# iphone - 如何创建自定义 UIDatePicker 控件

> ID：14705917
> 
> 赞同：6
> 
> 时间：2013-02-05T11:00:11.557
> 
> 标签：iphone, ios, xcode, ipad

我需要创建`UIDatePicker`仅显示星期几、小时、分钟和时间格式（上午、下午）的自定义控件。我刚刚开始`iOS`开发，所以没有太多的想法。任何见解或参考表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:17:44.123

看`datePickerMode`属性`UIDatePicker`

不同的可用模式是：

```
typedef enum {
   UIDatePickerModeTime,
   UIDatePickerModeDate,
   UIDatePickerModeDateAndTime,
   UIDatePickerModeCountDownTimer
} UIDatePickerMode; 
```

如果您需要一周中的几天，您将需要实现一个基本的 UIPickerView 并在其上添加您自己的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:26:28.547

您需要使用`UIPickerView`. 如果我们想使用`UIDatepicker`,

需要使用日期选择器模式`UIDatePickerModeDateAndTime`，我们需要覆盖其他不必要的数据。

# c - 如何将数组作为参数传递给可变参数函数？

> ID：14705920
> 
> 赞同：10
> 
> 时间：2013-02-05T11:00:17.007
> 
> 标签：c, variadic-functions

我有一些看起来像这样的代码：

```
uint8_t activities[8];
uint8_t numActivities = 0;
...
activities[numActivities++] = someValue;
...
activities[numActivities++] = someOtherValue;
...
switch (numActivities)
{
   0 : break;
   1 : LogEvent(1, activities[0]);  break;
   2 : LogEvent(1, activities[0], activities[1]);  break;
   3 : LogEvent(1, activities[0], activities[1], activities[2]);  break;
   // and so on
} 
```

其中 LogEvent() 是一个可变参数函数。

有没有更优雅的方法来做到这一点？

* * *

[更新] 向@0x69 等人致歉。我没有说 LogEvent() 在很多情况下不能将数组作为参数。对不起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:04:25.913

没有标准的方法来构造或操作`va_args`参数，甚至将它们传递给另一个函数（[操作可变参数的标准方法？](https://stackoverflow.com/questions/2210379/standard-way-to-manipulate-variadic-arguments?rq=1)，[C 编程：转发变量参数列表](https://stackoverflow.com/questions/1719784/c-programming-forward-variable-argument-list)）。你最好看看你是否可以访问`LogEvent`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:15:53.747

将指针传递给整数数组和一些整数

```
#include <stdio.h>

void logevent(int n, int num, int *l) {
    int i;
    for (i=0; i<num; i++) {
        printf("%d %d\n",n,*(l++));
    }
    }

int main() {

    int activities[8];
    activities[0]=2;
    activities[1]=3;
    activities[2]=4;
    int num=3;
    int n=1;
    logevent(n,num, activities);
    printf("=========\n");
    n=2;
    activities[3]=5;
    num=4;
    logevent(n,num, activities);

} 
```

# javascript - 在 for 循环中创建 GeoJSON

> ID：14705923
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:28.847
> 
> 标签：javascript, flickr, mapbox

我正在尝试创建[geoJson](http://www.geojson.org)对象，用于使用[mapbox.js](http://mapbox.com)和 flickr-api 在地图上显示 flickr 图像。

我无法以某种方式获得正确的格式，缺少各种引号，有人可以帮忙吗？我已经在下面发布了我需要创建的循环和 JSON 类型。

```
var data = [];

window.jsonFlickrApi = function(rsp) {

  var photos = rsp.photos.photo;
  for (var i = 0; i < photos.length; i++) {
    var p = photos[i];
    var url = [ 'http://farm', p.farm, '.static.flickr.com/', p.server, '/', p.id, '_', p.secret, '_s.jpg' ].join('');    

    data.push({"geometry":{
                    "type": "Point", 
                    "coordinates": [p.latitude, p.longitude]},
                "properties":{
                    "url": url, 
                    "image": url, 
                    "name":p.title, 
                    "description": "something"}
                });
  }
}

console.debug(data); 
```

这是我要创建的 JSON 类型：

```
{ "type": "feature collection",

"features":[
{
    "geometry": { "type": "Point", "coordinates": [5.123699,52.071039]},
    "properties": {
        "image": "https://lh4.googleusercontent.com/-YDA7Borc-K8/S2vU_zk9GKI/AAAAAAAAAQ0/4rn5myADmdE/s912/pavello.jpg",
        "url": "http://timcastelijn.nl",
        "name": "pavello",
        "description": "paviljoentje voor hergebruik",
     }

}, {

    "geometry": { "type": "Point", "coordinates": [5.117997,52.085776]},
    "properties": {
      "image": "http://farm9.staticflickr.com/8363/8376204495_61d75a7f10.jpg",
      "url": "http://timcastelijn.nl",
      "name": "hout en bank",
      "description": "houten bedframe en puntgave tweezitter",
     }

}, {
"geometry": { "type": "Point", "coordinates": [5.08, 52.08]},
    "properties": {    
      "image": "http://1.bp.blogspot.com/_aq9-5vIIz5s/TNbBtAJLaJI/AAAAAAAAANs/92_6emkfm8s/s1600/hout.jpg",
      "url": "http://timcastelijn.nl",
      "name": "boomstammen",
      "description": "30 stammetjes van ca 1m lang",
     }
}, {
    "geometry": { "type": "Point", "coordinates": [5.12, 52.11]},    
    "properties": {
      "image": "http://www.deouderust.nl/wp-content/uploads/2011/09/kast-%E2%82%AC2200-.jpg",
      "url": "http://timcastelijn.nl",
      "name": "oude kast",
      "description": "kast, uit hardhout onderdelen",
    }
  }]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T18:29:45.827

至于这一点：`"coordinates": [p.latitude, p.longitude]`- GeoJSON 坐标按经度、纬度顺序排列 - 反之亦然。

# javascript - Knockout.js hasfocus 导致在节流期到期之前失去焦点时重置值

> ID：14705924
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:36.220
> 
> 标签：javascript, knockout.js, javascript-framework

这是一个说明我的问题的小示例代码：http: [//jsfiddle.net/wsytR/2/](http://jsfiddle.net/wsytR/2/)

如果您更改输入中的文本，然后按 Tab 使其模糊，则该值将变回旧值。如果您在`throttle`期间结束之前切换焦点，就会发生这种情况。在我看来，observable 并没有以这种方式发生变化。

我发现[了这个问题](https://stackoverflow.com/questions/12384096/knockout-js-changing-the-hasfocus-value-does-not-update-binding-value)，并从中得到了[这个问题](https://github.com/SteveSanderson/knockout/issues/321)。我重新排序了绑定，所以这`hasfocus`是第一个，但没有运气。

此外，如果不是按 Tab 键切换焦点，而是按 Escape 或单击页面上的其他位置，旧值会再次恢复，但在节流期到期后，可观察值会更新并且值再次更改，这次是新值一。tab 和 Escape/click 可能会触发不同类型的事件。

有没有办法通过淘汰赛来处理这个问题？我是否试图做错事或不应该在淘汰赛中发挥作用的事情？

## 编辑：

原来我没有正确地提出我的问题。我需要从我的模型中设置焦点，因此限制`hasfocus`绑定并不能解决我的问题。如果您只需要在离开元素后正确更新它但仍然保持油门，那效果很好。

我的目标是在失去焦点时立即更新，否则会在输入前限制绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:28:06.813

淘汰赛中的内置油门扩展器就像它的名字所说的那样：它限制更新。看来我想做点别的。在模糊字段时立即更新值，但在键入时会限制输入。

我最终想出的解决方案是调整内置油门扩展器并将其添加为自定义扩展器：

```
ko.extenders.smart_throttle = function(target, timeout) {
    target['throttleEvaluation'] = timeout;
    target['lastUpdatedValue'] = null;

    var writeTimeoutInstance = null;
    return ko.computed({
        'read': target,
        'write': function(value) {
            if (value == target()) {
                clearTimeout(writeTimeoutInstance);
                target(target['lastUpdatedValue']);
                return;
            }

            clearTimeout(writeTimeoutInstance);
            target['lastUpdatedValue'] = value;
            writeTimeoutInstance = setTimeout(function() {
                target(value);
            }, timeout);
        }
    });
} 
```

Akshat 的回答仍然是我最初问题的完美解决方案。很抱歉没有正确地制定它。

# javascript - 如何测试 document.write() 是否成功

> ID：14705926
> 
> 赞同：1
> 
> 时间：2013-02-05T11:00:41.457
> 
> 标签：javascript

我在我的应用程序中包含了一些第 3 方代码，我看到它使用了包含在 try..catch 语句中的 document.write() 代码。document.write() 不返回任何内容，所以我想知道是否有办法测试 document.write() 是否成功，以便我可以测试捕获错误。例如，我尝试包含此脚本异步，但这停止了 document.write() 部分的执行，但它没有运行 catch() 部分中的代码。

示例代码：

```
try {
   document.write('<script type="text/javascript" src="/plugin.js">');
   console.log('OK');
} catch (e) {
   console.log('ERROR');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:04:06.880

您可以将 id 添加到 script 标签，然后通过 id 从 DOM 中获取它：

```
document.write('<script type="text/javascript" src="/plugin.js" id="myscript"></script>');
if (document.getElementById('myscript')) {
    console.info('success');
} else {
    console.error('failure');
} 
```

或者，如果您不想更改任何内容，可以尝试在页面上的所有脚本中找到它：

```
document.write('<script type="text/javascript" src="/plugin.js"></script>');
(function () {
    var scripts = document.getElementsByTagName('script'),
        l = scripts.length - 1;
    // If you'll check that just after document.write then it should be last script
    // in the other case you would need to check all scripts.
    // From src I'm removing domain - at least Safari is returning full URL here
    if (scripts.length && scripts[l - 1].src && scripts[l - 1].src.replace(/^([a-z]+:\/\/[^\/]*)/i, '') == '/plugin.js') {
        console.info('success');
    } else {
        console.error('failure');
    }
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:03:16.397

你可以在 plugin.js 中添加一个临时变量，或者简单地记下一个现有的变量，然后在控制台中输入这个变量。如果它存在，它会打印它的值，否则它会打印'undefined' - 是否有任何迹象表明它没有工作？

# java - 寻求 JDBC 驱动程序必须实现的接口（类和函数）的简明规范

> ID：14705930
> 
> 赞同：3
> 
> 时间：2013-02-05T11:01:01.170
> 
> 标签：java, jdbc, driver

我被要求编写一个包装非 SQL 3rd-party 数据 API 的 JDBC 驱动程序。

为了了解我的自定义 JDBC 驱动程序必须实现什么接口（类和函数），我做了以下工作：

*   试图从[Oracle 的 JDK 文档中查找 JDBC 驱动程序](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/index.html)*开发人员*（不是用户）的信息，但该文档没有明确说明 JDBC 驱动程序开发人员规范的位置 - 它专注于JDBC 的*用户*（据我所知）

**   在jdk1.7.0_09安装源代码的/java/sql目录下查看。但是，在这个目录下的几十个源代码文件中，并不清楚哪些实际上代表了必须实现的所需接口

    *   找到如下示例 JDBC 驱动：[CsvJdbc](http://csvjdbc.sourceforge.net/)，并下载了该项目的源代码作为示例代码使用；但是，不清楚哪些文件实现了所需的 JDBC 驱动程序功能，哪些文件是特定于该 JDBC 驱动程序的

    *   找到以下示例 JDBC 驱动程序：[JDBC File Driver](http://sourceforge.net/projects/jdbcfiledriver/)，并尝试下载该项目的源代码以用作示例代码；但是，似乎只有 .class 文件可用* 

 *是否有一组简明的规范来描述最小和/或推荐的 JDBC 驱动程序必须实现的接口（类和函数）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:06:55.857

您需要 JDBC 规范。它在 JCP 站点上以[JSR221](http://jcp.org/aboutJava/communityprocess/final/jsr221/index.html)的形式提供。点击链接并单击“如果您打算构建规范的实现......”段落下方。它将带您进入实施者的下载页面。*

# pointers - 堆栈指针

> ID：14705936
> 
> 赞同：1
> 
> 时间：2013-02-05T11:01:14.510
> 
> 标签：pointers, memory, stack

很抱歉，我不能用一些代码来支持我的问题（我不明白如何构造它，所以它会在这里被接受），但我还是尝试了。

如果我理解正确，则引用相同类型的结构的结构需要使用包含的指针来执行此操作以供参考。这个指针可以引用堆栈（而不是堆）上分配的空间而不产生分段错误吗？-

这应该如何声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:18:04.023

你没有说你正在使用什么语言，所以现在从你的问题的措辞中假设 C ......以下代码是完全有效的：

```
typedef struct str_t_tag {
   int foo;
   int bar;
   struct str_t_tag *pNext;
} str_t;

str_t str1;
str_t str2;
str1.pNext = &str2; 
```

在此示例中，str1 和 str2 都在堆栈上，但如果其中一个或两个都在堆上，这也可以工作。您唯一需要注意的是堆栈变量超出范围时将被删除，因此如果您已动态分配 str1 并将其从函数中传回，您将不希望 str1->pNext 指向该函数中堆栈上的东西。

换句话说，不要这样做：

```
typedef struct str_t_tag {
   int foo;
   int bar;
   struct str_t_tag *pNext;
} str_t;

str_t *func(void)
{
    str_t *pStr1 = malloc(sizeof(*pStr1));
    str_t str2;
    pStr1->pNext = &str2;

    return pStr1; /* NO!! pStr1->pNext will point to invalid memory after this */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:18:06.493

是的，您可以使用指向堆栈上变量的指针，但前提是提供该堆栈帧的方法尚未返回。例如，这将起作用：

```
typedef struct
{
    int a;
    float b;
} s;

void printStruct(const s *s)
{
    printf("a=%d, b=%f\n", s->a, s->b);
}

void test()
{
    s s;
    s.a = 12;
    s.b = 34.5f;
    printStruct(&s);
} 
```

然而，这将导致错误，因为堆栈帧会消失：

```
s *bad()
{
    s s;
    s.a = 12;
    s.b = 34.5f;
    return &s;
} 
```

**编辑**：好吧，我说它会导致错误，但是在调用该代码时：

```
int main()
{
    test();
    s *s = bad();
    printStruct(s);
    return 0;
} 
```

我在编译期间收到警告：

```
s.c:27:5: warning: function returns address of local variable [enabled by default] 
```

并且该程序似乎运行良好：

```
$ ./s
a=12, b=34.500000
a=12, b=34.500000 
```

但事实上，它已经坏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:18:28.530

不确定这是否是一个专门的 C/C++ 问题，但无论如何我都会以 C/C++ 代码为例。

你可以声明它的唯一方法：（有细微的变化）

```
typedef struct abc
{
  struct abc *other;
} abc; 
```

`other`可以指向堆栈上的一个对象，如下所示：

```
abc a, b; // stack objects
b.other = &a; 
```

这不是关于范围的问题，因此我将跳过对执行上述操作可能出现的问题的评论。

但是，如果您想将其分配给动态创建的对象，则该对象不可能在堆栈上。

```
abc b;
b.other = malloc(sizeof(abc)); // on the heap 
```

# ruby-on-rails - 将车把模板编译到 Rails 中

> ID：14705940
> 
> 赞同：1
> 
> 时间：2013-02-05T11:01:26.753
> 
> 标签：ruby-on-rails, ember.js, handlebars.js

当我正在努力让 ember 运行时，我现在无法让我的车把模板通过资产管道加载。我正在使用 handlebars_assets gem，当我点击服务器时，我得到了下面的内容，我验证了路径是正确的，但不确定如何解决这个问题。当我需要 handlebars.runtime 时：

```
couldn't find file 'handlebars.runtime'
  (in /Users/tspore/Rails/Active/tombfinder/app/assets/javascripts/app/ember_app.js:1)

Cache read: sprockets/6f42a4ba0f2b80167ce50f9f306427fa
Compiled app/ember_app.js  (5ms)  (pid 9791)
Cache read: sprockets/764613d8100bb6d8e6072701f79183c1
Completed 500 Internal Server Error in 141ms

ActionView::Template::Error (can't convert nil into String
  (in /Users/tspore/Rails/Active/tombfinder/app/assets/javascripts/app/templates/records/index.hbs)):
    26:   <% end %>
    27: 
    28: 
    29:   <%= javascript_include_tag 'app/ember_app' %>
    30: </head>
    31: <body class="<%= @class %>">
    32: <div id="center">
  app/views/layouts/js.html.erb:29:in `_app_views_layouts_js_html_erb__854441834177334479_70351597254240'
  app/controllers/js/js_controller.rb:3:in `index'

Rendered /Users/tspore/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.10/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.9ms)
Rendered /Users/tspore/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.10/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms)
Rendered /Users/tspore/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.10/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (3.0ms) 
```

编辑：在使用 Github 版本并从 :assets 中删除 gem 之后 - 它似乎有效。但是现在我收到了这个错误-

Uncaught ReferenceError: HandlebarsTemplates is not defined records_view.js:4 Uncaught Error: assertion failed: Unable to find view at path 'App.listRecordsView'

我的应用程序看起来像这样 -

```
App.listRecordsView = Ember.View.extend({
   templateName: HandlebarsTemplates['records/index'](context)
}); 
```

使用 ember-rails gem，我得到了要编译的 gem，所以现在我有一个名为 layout.js 的脚本，它看起来像这样：

```
Ember.TEMPLATES["app/templates/controller/layout"] = Ember.Handlebars.template(function anonymous(Handlebars, depth0, helpers, partials, data) { helpers = helpers || Ember.Handlebars.helpers; data = data || {};
  var buffer = '', stack1, hashTypes, escapeExpression=this.escapeExpression;    
  data.buffer.push("<h1>from template</h1>\n");
  stack1 = {};
  hashTypes = {};
  stack1 = helpers._triageMustache.call(depth0, "outlet", {hash:stack1,contexts:[depth0],types:["ID"],hashTypes:hashTypes,data:data});
  data.buffer.push(escapeExpression(stack1) + "\n");
  return buffer;
}); 
```

如何在 Ember 应用程序中调用此模板？它没有名称空间可以说： templateName: 'layout'

# javascript - Socket.io - Access-Control-Allow-Origin 不允许的来源

> ID：14705941
> 
> 赞同：4
> 
> 时间：2013-02-05T11:01:36.180
> 
> 标签：javascript, node.js, socket.io, cors

我知道在 SO 上对此主题进行了一些讨论，但我找不到我的问题的答案。我在 localhost:8020 上使用 Aptana 在服务器上运行了一个网页。页面上的 javascript 正在访问我在 localhost:1337 上运行的节点服务器。这是节点代码：

```
var io = require('socket.io');
var http = require('http');
var sys = require('sys');
var json = [];
var server = http.createServer(function (req, res) {

  var headers = {};
  headers["Access-Control-Allow-Origin"] = "*";
  headers["Access-Control-Allow-Methods"] = "POST, GET, PUT, DELETE, OPTIONS";
  headers["Access-Control-Allow-Credentials"] = true;
  headers["Access-Control-Max-Age"] = '86400'; // 24 hours
  headers["Access-Control-Allow-Headers"] = "X-Requested-With, Access-Control-Allow-Origin, X-HTTP-Method-Override, Content-Type, Authorization, Accept";
  res.writeHead(200, headers);
  res.end();
});
server.listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');
var socket = io.listen(server);
socket.on('connection', function(){
  console.log("Connected");
}); 
```

我通过更改标头来处理 cors 请求，我一直这样做。我的客户端代码通常是 socket.io 初学者的东西。这是我的代码中的标签：

```
<script src="http://cdn.socket.io/stable/socket.io.js"></script>
    <script>

        // Create SocketIO instance
        var socket = new io.Socket('localhost',{
            port: 1337
        });
        socket.connect();

        // Add a connect listener
        socket.on('connect',function() {
            log('<span style="color:green;">Client has connected to the server!</span>');
        });
        // Add a connect listener
        socket.on('message',function(data) {
            log('Received a message from the server:  ' + data);
        });
        // Add a disconnect listener
        socket.on('disconnect',function() {
            log('<span style="color:red;">The client has disconnected!</span>');
        });

        // Sends a message to the server via sockets
        function sendMessageToServer(message) {
            socket.send(message);
            log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
        }

        // Outputs to console and list
        function log(message) {
            var li = document.createElement('li');
            li.innerHTML = message;
            document.getElementById('message-list').appendChild(li);
        } 
```

当我运行代码时，我不断收到“XMLHTTPRequest ... Origin is not allowed by Access-Control-Allow-Origin”错误。我的浏览器是chrome。1\. 为什么我的浏览器使用的是 XMLHTTPRequest 而不是 Websocket？2\. 为什么我在更改标题时收到访问控制错误？感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-14T16:48:58.347

根据 socket.io 文档，您应该能够设置传输的优先级（如果它产生问题，可能会跳过一个）并直接配置 socket.io 来源。

```
io.set('transports', ['websocket', 'xhr-polling', 'jsonp-polling', 'htmlfile', 'flashsocket']);
io.set('origins', '*:*'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:12:32.297

您的自定义标头实际上永远不会为与 socket.io 相关的请求编写。

Socket.IO 覆盖了 http 服务器的一些方法。其中之一是触发“请求”处理程序。Socket.IO 只允许自己成为所有请求的主要处理程序。然后它测试请求是否真的是 socket.io 请求（基于请求的路径的前缀）。如果它确定它不应该处理给定的请求，它会触发其他“请求”处理程序。

您可以通过在 writeHead 调用之前放置一个 console.log 语句来看到这一点，您会看到 stdout 中没有任何内容。

阅读[源代码](https://github.com/LearnBoost/socket.io/blob/develop/lib/transports/websocket.js#L75)，似乎socket.io自动设置了一个`Access-Control-Allow-Origin`带有请求标头值的`origin`标头。我假设也有一种方法可以在客户端上设置这样的标头。

所以，要澄清事情：

**1**您的浏览器回退到 xhr-polling，因为它不支持 websockets 或 websocket 传输静默失败

**2**您在 httpServer`request`事件中自己设置的标头永远不会被发送，因此它们对源策略没有任何操作。

**解决方案：**找到一种`origin`在请求上设置标头的方法。在浏览客户端代码后，我没有发现任何证据表明这可以轻松完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:59:36.343

需要注意的一件事是，当 Access-Control-Allow-Credentials 为 true 时，不能在 Access-Control-Allow-Origin 标头中使用“*”值。删除 Access-Control-Allow-Credentials 标头，或将 Access-Control-Allow-Origin 设置为请求 Origin 标头的值。

# xml - 如何编写 XSLT 转换来更新 .csdef 文件

> ID：14705942
> 
> 赞同：0
> 
> 时间：2013-02-05T11:01:37.023
> 
> 标签：xml, xslt

我有一个 azure 服务定义文件，我需要通过在末尾添加一个值来更新一些`"physicalDirectory"`属性 ( `where @ph != 'EmptyFolder'`) 。`'\Deploy\'`

我认为查询的内容`xPath's`是这样的

```
//x:Site[@physicalDirectory != 'EmptyFolder']/@physicalDirectory
//x:VirtualApplication/@physicalDirectory 
```

所以最终结果是这样的：

```
<vApp name="main" physicalDirectory="..\blahblahblah\Deploy\" /> 
```

你能帮我做吗？

这是一个示例文件

```
<ServiceDefinition name="Platform.Services.Azure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
  <WorkerRole name="WorkflowService.Worker" vmsize="ExtraSmall">
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
    </Imports>
    <Certificates>
      <Certificate name="ThreeSeventyCertificate" storeLocation="LocalMachine" storeName="My" />
    </Certificates>
  </WorkerRole>
  <WebRole name="WebService.Web" vmsize="ExtraSmall" enableNativeCodeExecution="true">
     <Sites>
      <Site name="Web" physicalDirectory="EmptyFolder">
        <VirtualDirectory name="api" physicalDirectory="EmptyFolder">
          <VirtualApplication name="main" physicalDirectory="..\Platform.Services.AccountService.Web\" />
          <VirtualApplication name="v1.0" physicalDirectory="..\..\_releases\V1.0\Platform.Services.AccountService.Web\" />
        </VirtualDirectory>
        <VirtualDirectory name="docs" physicalDirectory="EmptyFolder">
          <VirtualApplication name="main" physicalDirectory="..\AccountService.Documentation\" />
          <VirtualApplication name="v1.0" physicalDirectory="..\..\_releases\V1.0\AccountService.Documentation\" />
        </VirtualDirectory>
        <VirtualApplication name="reports" physicalDirectory="..\Platform.Services.ReportService.Web\" />
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
      <Site name="internal" physicalDirectory="..\InternalService.Web\">
        <Bindings>
          <Binding name="internal" endpointName="internal" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="https" port="443" certificate="ThreeSeventy" />
      <InternalEndpoint name="internal" protocol="http">
      </InternalEndpoint>
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
    </Imports>
    <Certificates>
      <Certificate name="ThreeSeventy" storeLocation="LocalMachine" storeName="My" />
    </Certificates>
    <ConfigurationSettings>
      <Setting name="TransportServiceEntities" />
      <Setting name="ReportServiceEntities" />
      <Setting name="AccountServiceEntities" />
      <Setting name="ThreeSeventyEntitiesMembership" />
    </ConfigurationSettings>
  </WebRole>
  <WorkerRole name="ChannelService.Worker" vmsize="ExtraSmall">
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
      <Import moduleName="RemoteForwarder" />
    </Imports>
    <ConfigurationSettings>
      <Setting name="EngineEnabled" />
      <Setting name="PlatFormAPIConnectionString" />
    </ConfigurationSettings>
    <Certificates>
      <Certificate name="ThreeSeventyCertificate" storeLocation="LocalMachine" storeName="My" />
    </Certificates>
  </WorkerRole>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:57:39.067

How's this:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@physicalDirectory[. != 'EmptyFolder']">
    <xsl:attribute name="{name()}">
      <xsl:value-of select="concat(., 'Deploy\')"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

When run on your sample input, `physicalDirectory` attributes with the value "EmptyFolder" are left alone:

```
 <Site name="Web" physicalDirectory="EmptyFolder">
    <VirtualDirectory name="api" physicalDirectory="EmptyFolder"> 
```

And all others have `Deploy\' appended to the end:

```
 <VirtualApplication name="main" physicalDirectory="..\Platform.Services.AccountService.Web\Deploy\" />
  <VirtualApplication name="v1.0" physicalDirectory="..\..\_releases\V1.0\Platform.Services.AccountService.Web\Deploy\" /> 
```

# python - 关于如何在 gensim 中实现 tf-idf 模型的一点困惑

> ID：14705944
> 
> 赞同：2
> 
> 时间：2013-02-05T11:01:37.083
> 
> 标签：python, nlp, tf-idf, gensim

我正在研究 tf-idf 模型。我对这个模型是如何实现的没有什么困惑。现在，当我尝试打印模型时，我已经构建了模型，它为同一术语提供了不同的值。以下两个术语给出了这些结果：

```
doc_bow = [(0, 1), (1, 1)]
val1= tf_idf_corpus[doc_bow] 

doc_bow = [(0,1)]
val2=tf_idf_corpus[doc_bow] 
```

结果如下：

```
val1= [(0, 0.56486634414605663), (1, 0.82518241210720711)]
val2=[(0, 1.0)] 
```

我只是想知道，为什么术语 0 的 tf-idf 值在 val1 中为 0.5648，在 val2 中为 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T22:09:11.603

该文档可能有助于消除您的困惑：[http ://radimrehurek.com/gensim/models/tfidfmodel.html](http://radimrehurek.com/gensim/models/tfidfmodel.html)

> 我只是想知道，为什么术语 0 的 tf-idf 值在 val1 中为 0.5648，在 val2 中为 1.0。

输出向量被归一化为单位（欧几里得）长度。`normalize`您可以使用构造函数参数将其关闭。

# php - 如何检查复选框是否被选中以及上传的文件是否具有特定的文件名

> ID：14705947
> 
> 赞同：0
> 
> 时间：2013-02-05T11:01:44.617
> 
> 标签：php, javascript, html

我有下面的代码。这是一种允许用户上传文件的表单。如果他们上传的文件与列出的文件相对应，我已经包含了用户应该勾选的复选框。然后我想检查正在上传的文件是否具有与从列表中选择的复选框相对应的文件名：

```
<!--SCRIPT 2 ensures that text fields are not left blank on Project form-->
    <!--SCRIPT 2 START-->
    <script type="text/javascript">
        function validateproject()
        {
            valid = true;
            if (document.input.bhu_no.value == "")
                {
                alert ("Please enter a BHU #")
                valid = false;
                }
            else if (document.input.projectname.value == "")
                {
                alert ("Please enter a Project Name")
                valid = false;
                }       
            else if (document.input.projectlead.value == "")
                {
                alert ("Please enter a the Project Lead Name")
                valid = false;
                }   
            else if (document.input.projectgoal.value == "")
                {
                alert ("Please enter a Project Goal Description")
                valid = false;
                }   
            else if (document.input.projectstartdate.value == "")
                {
                alert ("Please enter a Project Start Date")
                valid = false;
                }   
            else if (document.input.projectenddate.value == "")
                {
                alert ("Please enter a Project End Date")
                valid = false;
                }
            /*else if (document.input.brd.value == "BRD")
                {
                alert ("Please upload a BRD with BRD in the title")
                valid = false;
                }   */
            else if(document.getElementById("uploaded").value == "")
                {
                alert ("Please attach a file to be uploaded")
                valid = false;
                }                       
            return valid;
        }   
    </script>
    <!--SCRIPT 2 END-->
    <head>
<body id="wrapper">
    <script type='text/JavaScript' src='calendarwidget.js'></script>
<!--////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                    PROJECT FORM START
    \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
-->         
            <center><a href="#" class="show_hide"><input style="font-size:16px;" type="button" value="Rules for Uploading Files" /></a></center>
            <div class="slidingDiv">
                <ul>
                    <li type="1">
                        Creation of folders manually without filling out upload forms should not be done
                    </li>
                    <br />
                    <li type="1">
                        File names should be descriptive and give information about what is contained within the file
                    </li>
                    <br />
                    <li type="1">
                        Files uploaded must be in either Read or Read/Write property otherwise others will not be able to view the files
                    </li>
                    <br />
                    <li type="1">
                        Fill out text fields on upload forms fully and to the best of your knowledge
                    </li>
                    <br />
                    <li type="1">
                        Try and have the most recent document on the server at all times. If you want to keep many versions of a document on the server the 
                        file name must end with underscore ‘_’ , capital ‘V’ and the version number (e.g. ‘KB How-to_V4.key’).
                    </li>
                    <br />
                    <li type="1">
                        At the end of a project upload all files related to the project onto the Knowledge Base
                    </li>
                    <br />
                    <li type="1">
                        Documents uploaded to the server can not be edited, if you wish to edit a document contact the uploader of the document
                    </li>
                    <br />
                    <li type="1">
                        When you have completed mass uploading files to the server ensure you ‘Eject’ the server
                    </li> 
                </ul>
            </div>

            <div id="selectproject">    
            <br />
            <br />      
                <form name="input" action="uploadproject.php" enctype="multipart/form-data" method="post" onsubmit="return validateproject();">
                    <table class="bordered">
                        <tr>
                            <th>
                                BHU #
                            </th>
                            <td>
                                <input class="uploadform" type="text" name="bhu_no" maxlength="4" size="4"/>
                                <a style='font-size:12px;' href="https://biweb3.corp.apple.com/compliance/index.php/concept/search" target="_blank"><i>Search for BHU #</i></a>
                            </td>
                        </tr>
                        <tr>    
                            <th>
                                Project Name
                            </th>
                            <td>
                                <input class="uploadform" size="50" type="text" name="projectname" onkeyup="valid(this)" onblur="valid(this)" />
                            </td>
                        </tr>
                        <tr>    
                            <th>
                                Project Lead
                            </th>
                            <td>
                                <input class="uploadform" size="18" type="text" name="projectlead"/>
                            </td>
                        </tr>
                            <tr>    
                            <th>
                                Project Wiki
                            </th>
                            <td>
                                <input class="uploadform" size="50" type="text" name="projectwiki"/>
                            </td>
                        </tr>
                        <tr>
                            <th>
                                BPR Track
                            </th>
                            <td>
                                <select name="bprtrack">
                                    <option value="">
                                        --BLANK--
                                    </option>   
                                    <option value="Manufacturing">
                                        Manufacturing
                                    </option>
                                    <option value="Logistics">
                                        Logistics
                                    </option>
                                    <option value="Supply Chain">
                                        Supply Chain
                                    </option>
                                    <option value="AOS">
                                        AOS                                     
                                    </option>
                                    <option value="Supply/Demand Management">
                                        Supply/Demand Management                                        
                                    </option>
                                    <option value="Procurement">
                                        Procurement                                     
                                    </option>
                                    <option value="BI">
                                        BI                                      
                                    </option>
                                    <option value="Emerging Markets">
                                        Emerging Markets
                                    </option>                                   
                                </select>
                            </td>   
                        </tr>
                        <tr>    
                            <th>
                                Project Goal
                            </th>
                            <td>
                                <textarea class="uploadform" rows="7" cols="50" name="projectgoal"></textarea>
                            </td>
                        </tr>   
                        <tr>    
                            <th>
                                Date Start
                            </th>
                            <td>
                                <INPUT TYPE='text' class="uploadform" id="projectstartdate" name="projectstartdate" SIZE='12' maxlength="10" />
                                <img src='Images/scw.gif' title='Click Here' alt='Click Here' onclick="scwShow(scwID('projectstartdate'),event);" />
                            </td>
                        </tr>
                        <tr>    
                            <th>
                                Date End
                            </th>
                            <td>
                                <input type="text" class="uploadform" id="projectenddate" name="projectenddate" SIZE='12' maxlength="10" />
                                <img src='Images/scw.gif' title='Click Here' alt='Click Here' onclick="scwShow(scwID('projectenddate'),event);" />
                            </td>
                        </tr>
                        <tr>    
                            <th>
                                Process(es) Effected<br />
                                <i style='font-size:12px;'>(User Inputted, not required)</i>
                            </th>
                            <td>
                            <div class='container'>
                                <?php

                                    $Results = mysql_query("SELECT processname FROM Knowledge.Process");

                                    while($Loadingrow = mysql_fetch_array($Results)) 
                                    {               
                                    echo "<input type='checkbox' value='$Loadingrow[processname]*' name='processname[]'>";
                                    echo $Loadingrow['processname'];
                                    echo "<br />";
                                    };
                                ?>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>Files Uploaded</th>
                            <td>
                                <input class="uploadform" type="checkbox" name="brd" value="BRD"/>BRD<br />
                                <input class="uploadform" type="checkbox" name="playback" value="playback"/>Playback Doc.<br />
                                <input class="uploadform" type="checkbox" name="function" value="function"/>Functional Spec.<br />
                                <input class="uploadform" type="checkbox" name="work" value="work"/>Work Instruction<br />
                                <input class="uploadform" type="checkbox" name="processf" value="processf"/>Process Flow<br />
                            </td>
                            </tr>                           
                            <tr>    
                            <th>
                                Upload File
                            </th>
                            <td>
                                <input type="file" name="uploaded" />
                            </td>
                        </tr>
                </table>
                <br />  
                <input style='font-size:2em;' type="submit" value="Upload All" name="upload"/>
        </form>
        </div>
</body> 
```

我想知道如何检查是否选中了“brd”复选框以及正在上传的文件是否具有特定名称。如果文件名正确，则应完成上传，否则应抛出错误消息。我不知道如何在页面发布之前检查复选框，我也不知道如何检查正在上传的文件的文件名......有人可以指导我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:09:45.340

要检查一个复选框是否在 Javascript 中被选中，你需要这样做。

```
if(document.input.projectstatus.checked == true) {

    // CODE GOES HERE

} 
```

假设`projectstatus`是一个复选框名称。

然后检查上传的文件是否有特定的名称，试试这个。

```
<?php

   if($_FILES["file"]["name"] == "specificname") {

            // CODE GOES HERE

   }

?> 
```

假设`file`是表单中的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:11:46.887

在您的 JS 中，您已编写

```
document.getElementById("uploaded") 
```

而在您的 HTML 中，您有

```
<input type="file" name="uploaded" /> 
```

请添加**ID="已上传"**

# c# - 单元测试 NotifyPropertyChanged()

> ID：14705953
> 
> 赞同：2
> 
> 时间：2013-02-05T11:01:56.133
> 
> 标签：c#, unit-testing

测试此属性的最佳方法是什么：

```
 public string ThreadId {
        get { return _threadId; }
        set {
            _threadId = value;
            NotifyPropertyChanged();
        }
    } 
```

到目前为止我有这个测试：

```
 [Fact]
    public void ThreadIdTest() {
        compassLogData.ThreadId = "[11]";
        const string expected = "[11]";
        string actual = compassLogData.ThreadId;
        Assert.Equal(expected, actual);
    } 
```

但我需要一个去测试 `NotifyPropertyChanged()`哪个用于更新 UI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:08:49.490

一个简单的方法是这样做：

```
var notified = false;
compassLogData.PropertyChanged += (s, e) =>
{
    if(e.PropertyName == "ThreadId")
        notified = true;
};

compassLogData.ThreadId = "[11]";
Assert.True(notified); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:13:04.800

在测试事件时，我使用这种模式：

```
[Test]
public void PropertyChangeTest()
{
    var viewModel = new ViewModel();
    var args = new List<PropertyChangedEventArgs>();
    viewModel.PropertyChanged += (o, e) => args.Add(e);
    viewModel.ThreadId = "[11]";
    Assert.AreEqual("ThreadId",args.Single().PropertyName);
} 
```

将 eventargses 添加到列表中可以检查它被触发的次数等。

通常我真的看不出测试那个小逻辑的意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:11:10.993

您必须处理属性更改事件，并检查是否为正确的属性触发。

```
[Fact]
public void ThreadIdTest() {
    compassLogData.ThreadId = "[11]";
    var previousValue = compassLogData.ThreadId; // Question: how is this object set?
    bool propertyWasUpdated = false;
    compassLogData.PropertyChanged += (s, e) => {
        if (e.PropertyName == "ThreadId") {
            propertyWasUpdated = true;
        }
    };

    const string expected = "[12]";
    compassLogData.ThreadId = expected;
    string actual = compassLogData.ThreadId;

    Assert.Equal(expected, actual);
    ASsert.IsTrue(propertyWasUpdated);
} 
```

另外，您应该仅在值实际更改时触发事件。我通常是这样实现的：

```
public string ThreadId {
    get { return _threadId; }
    set {
        if (value != _threadId) {
            _threadId = value;
            NotifyPropertyChanged();
        }
    }
} 
```

# iphone - UIManagedDocument 和核心数据

> ID：14705959
> 
> 赞同：5
> 
> 时间：2013-02-05T11:02:13.433
> 
> 标签：iphone, ios, core-data, uimanageddocument

我找到了这些斯坦福教程[https://itunes.apple.com/us/course/ipad-iphone-app-development/id495052415](https://itunes.apple.com/us/course/ipad-iphone-app-development/id495052415)，并且一直在听关于核心数据的讲座，这真的很棒。

它显示了如何通过`UIManagedDocument`...访问核心数据...唯一的事情我不明白`UIManagedDocument`它应该使用哪个模型，因为我没有看到它在任何地方设置？

总结一下，使用`UIManagedDocument`时如何定义要使用的数据库模型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T12:42:45.227

我找到了答案：

'UIManagedDocument' 从应用程序的主包中获取所有模型，并将这些模型合并。如果您只有一个模型，则使用该模型。

这可以通过覆盖“UIManagedDocument”类来改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:19:37.190

加载数据模型 在某些情况下，您不必编写任何代码来加载模型。如果您在 OS X 上使用基于文档的应用程序，NSPersistentDocument 会为您管理查找和加载应用程序模型的任务。如果您使用 Xcode 创建使用 Core Data（对于 OS X 或 iOS）的非文档应用程序，则应用程序委托包含用于检索模型的代码。模型的名称（由用于将其存储在磁盘上的文件名表示）在运行时不相关。一旦模型被 Core Data 加载，文件名是没有意义的，没有任何用处，所以你可以随意命名模型文件。

如果您想自己加载模型，可以使用两种机制：

您可以使用实例方法 initWithContentsOfURL: 从特定 URL 加载单个模型。这是通常首选的技术。通常，应用程序只有一个模型，使用这种方法可以确保只加载该模型。您还可以通过 URL 加载单个模型，然后使用 modelByMergingModels: 统一它们，然后用它们实例化协调器。

在您拥有多个模型的情况下——特别是在模型代表同一模式的不同版本的情况下——知道要加载哪个模型是必不可少的（在运行时将具有相同实体的模型合并到一个集合中会导致命名冲突和错误）。如果您想将模型存储在应用程序的包之外，此方法也很有用，因此需要通过文件系统 URL 引用它。

您可以使用类方法mergedModelFromBundles: 从特定的bundle 集合创建合并模型。这种方法在模型分离不重要的情况下可能很有用——例如，您可能知道您的应用程序和它链接到的框架都有您需要或想要加载的模型。类方法允许您轻松地一次加载所有模型，而无需考虑名称是什么，或者放入专门的初始化代码以确保找到所有模型。

**在运行时访问和使用托管对象模型**

```
 NSManagedObjectModel *model = <#Get a model#>;
NSFetchRequest *requestTemplate = [[NSFetchRequest alloc] init];
NSEntityDescription *publicationEntity =
    [[model entitiesByName] objectForKey:@"Publication"];
[requestTemplate setEntity:publicationEntity];

NSPredicate *predicateTemplate = [NSPredicate predicateWithFormat:
    @"(mainAuthor.firstName like[cd] $FIRST_NAME) AND \
        (mainAuthor.lastName like[cd] $LAST_NAME) AND \
        (publicationDate > $DATE)"];
[requestTemplate setPredicate:predicateTemplate];

[model setFetchRequestTemplate:requestTemplate
    forName:@"PublicationsForAuthorSinceDate"]; 
```

**使用获取请求模板**

```
NSManagedObjectModel *model = <#Get a model#>;
NSError *error = nil;
NSDictionary *substitutionDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
    @"Fiona", @"FIRST_NAME", @"Verde", @"LAST_NAME",
    [NSDate dateWithTimeIntervalSinceNow:-31356000], @"DATE", nil];
NSFetchRequest *fetchRequest =
    [model fetchRequestFromTemplateWithName:@"PublicationsForAuthorSinceDate"
            substitutionVariables:substitutionDictionary];
NSArray *results =
    [aManagedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

# android - 意图在不同活动之间切换时无法正常工作

> ID：14705964
> 
> 赞同：0
> 
> 时间：2013-02-05T11:02:45.180
> 
> 标签：android, android-intent, toggle, togglebutton

我制作了一个包含 5 个活动的应用程序-calculator1.java、calculator2.java、deposit.java、calculator3.java、calculator4.java，在活动 1 中有一个切换按钮和一个下一步按钮，所有其他活动都包含一个下一个按钮，现在我想要的是当按下切换按钮并按下下一个按钮时，它应该转到calculator2.java，然后从calculator2.java，当我按下下一个按钮时，如果calculator.java的“toggleButton”是“on”它应该去 deposit.java 否则去calculator3.java，

**我的代码如下：（点击下一个按钮）：**

**Calculator1.java**

```
btn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 Intent intent = new Intent(Calculator_1Activity.this, Calculator2.class);
                    intent.putExtra("toggleBtn", tg.isChecked());
                    startActivity(intent);
            }
        }); 
```

**Calculator2.java**

```
 btn2.setOnClickListener(new OnClickListener() {
             final boolean val= getIntent().getExtras().getBoolean("tg");
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 if(val==true){
                        Intent iq=new Intent(Calculator2.this,Deposit.class);
                        startActivity(iq);
                    }
                    else{
                        Intent ir= new Intent(Calculator2.this,Calculator_3Activity.class);
                        startActivity(ir);
                    }

            }
        }); 
```

**存款.java**

```
btn2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
Intent iy = new Intent(Deposit.this,Calculator_3Activity.class);
startActivity(iy);

    }
}); 
```

**Calculator3.java**

```
 btn2.setOnClickListener(new OnClickListener() {
            // final boolean  val= getIntent().getExtras().getBoolean("tg");
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i1=new Intent(Calculator_3Activity.this ,Calculator_4Activity.class);
                startActivity(i1);
                //finish();
            }
        }); 
```

![在此处输入图像描述](../Images/96d49369ee267c8de323891f69829487.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:04:28.797

由于**Calculator1.java**有

```
intent.putExtra("toggleBtn", tg.isChecked()); 
```

在 **Calculator2.java中**

```
final boolean val= getIntent().getExtras().getBoolean("toggleBtn"); 
```

代替`final boolean val= getIntent().getExtras().getBoolean("tg");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:06:56.233

**Calculator1.java**

```
btn2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             Intent intent = new Intent(Calculator_1Activity.this, Calculator2.class);
                intent.putExtra("toggleBtn", tg.isChecked());
                startActivity(intent);
        }
    }); 
```

**Calculator3.java**

```
final boolean val= getIntent().getExtras().getBoolean(**"toggleBtn"**); 
```

# forms - 访问表单阻止鼠标从下拉列表中选择值，强制 keyb 输入

> ID：14705967
> 
> 赞同：0
> 
> 时间：2013-02-05T11:03:05.100
> 
> 标签：forms, ms-access, mouse, dropdownbox

我有一个数据输入表格。它的正确标签索引等，并且有三个下拉菜单，它们会随着输入事件自动展开。

无论我给用户多少关于使用 tab 键和 keboard 以及检查他们刚刚输入的内容的建议。他们仍然坚持使用鼠标从下拉菜单中选择值，问题是他们在匆忙中经常因使用鼠标而出错。

我希望能够强制用户使用键盘输入这些字段。

下拉列表对于用户查看字段的适当值是必要的，因为这些值会根据之前的选择而有所不同。

我已经尝试过尝试 onclick 事件，但无济于事。有没有办法我可以做到这一点？

我正在使用 access 2007 很多用户都有 access 2003。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:46:09.320

根据您的评论，我将采取两种不同方法中的一种。

如果您的用户对代码*真的很*满意，并且根据他们之前的选择知道他们应该使用哪些代码，那么只需**使用文本框而不是组合框**。您仍然可以在 Form_BeforeUpdate 事件或单个控件的 _BeforeUpdate 事件中放置一些验证代码。

如果用户不是很舒服，那么我建议您**在组合框中的第一个字段是代码的描述，而不是代码本身**。因此，他们不是从 101、102、103 中进行选择，而是从“小”、“中”、“大”或这些代码实际适用的任何代码中进行选择。如果您仍想显示代码本身，您可以使用单独的禁用文本框来实现。

* * *

现在回答你的实际问题。作为记录，我强烈建议*不要*使用这种方法。我可以阻止用户使用鼠标选择组合框的最简单方法是添加一个覆盖组合框的透明按钮。

为此，请在组合上绘制一个常规命令按钮。设置透明 = 是，可见 = 是，启用 = 是，制表位 = 否。

当用户现在单击组合时，他们实际上将单击透明按钮，并且不会发生任何事情。他们能够进入控件的唯一方法是从相邻控件中按标签或使用热键（通过附加标签中的“&”）。

一旦他们通过 Tab 进入控件并且您的代码强制下拉，他们仍然可以使用鼠标选择一个选项。但是通过强迫他们最初使用键盘，这将使他们更有可能只是坚持使用键盘。

再一次——我不能强调这一点——我认为这是一个可怕的、可怕的、不好的主意。请不要使用这种方法。但是你问了一个技术问题，这个网站就是提供技术答案，所以你去...

# c# - 如何将处理程序添加到 Excel 使用 ExcelDNA 计算事件

> ID：14705970
> 
> 赞同：0
> 
> 时间：2013-02-05T11:03:13.300
> 
> 标签：c#, excel-dna

我希望能够从我的 ExcelDNA 插件中收听 Excel 中所有工作表的 BeginCalculate 和 EndCalculate 事件，并执行一些初始化代码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:47:46.540

这里有一些关于[Excel-DNA Google 组](http://groups.google.com/group/exceldna)的讨论：[https](https://groups.google.com/group/exceldna/browse_frm/thread/58da470968d6658b) : //groups.google.com/group/exceldna/browse_frm/thread/58da470968d6658b 这显示了如何处理 C API ON.RECALC 事件，该事件在重新计算后触发.

您还可以通过调用来获取 Excel 应用程序 COM 对象`ExcelDnaUtil.Application`，然后为应用程序事件注册您的事件处理程序。应用程序事件记录在此处：http: [//msdn.microsoft.com/en-us/library/office/jj734018.aspx](http://msdn.microsoft.com/en-us/library/office/jj734018.aspx)，您可能对`AfterCalculate`.

我不知道在重新计算*之前*触发的任何 Excel 事件。

# c# - 使用 Google 图表 API 生成图表

> ID：14705971
> 
> 赞同：0
> 
> 时间：2013-02-05T11:03:14.863
> 
> 标签：c#, android

我正在尝试生成一个像这样的图表：`http://chartpart.com/`但我不知道该怎么做。我需要手动制作生成图表的字符串还是需要将数据发送到谷歌服务器并接收字符串？（如果是这样，我如何发送数据？） PS：我想在 C# 中完成所有这些并通过 Web 服务发送结果字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:01:27.147

显然你需要自己生成字符串。我就是这样做的，并通过网络服务将结果发送到 android。

```
 [WebMethod]
        public ChartsClass GetChart(string UserId)
        {
            ChartsClass chart = new ChartsClass();
            DataSet1TableAdapters.WS_ChartIndicatorsTableAdapter adapter  =  new DataSet1TableAdapters.WS_ChartIndicatorsTableAdapter();
            DataSet1.WS_ChartIndicatorsDataTable table = adapter.GetChartIndicators(UserId);

            StringBuilder sbDescriptions = new StringBuilder();
            StringBuilder sbValues = new StringBuilder();

            for(int i= 0 ;i< table.Rows.Count ;i++)
            {
                DataSet1.WS_ChartIndicatorsRow chartRow = (table.Rows[i] as DataSet1.WS_ChartIndicatorsRow);
                if (i > 0)
                {
                    sbDescriptions.Append("|");
                    sbValues.Append(",");
                }

                sbDescriptions.Append(chartRow.SectorId + " - " + chartRow.SectorDescription );
                sbValues.Append(chartRow.NetSaleValue.ToString());
            }

            chart.ChartString = String.Format("http://chart.apis.google.com/chart?cht=p3&chtt={0}&chd=t:{1}&chs=480x200&chl={2}&chco=ff0000,0000ff",
              "Live Sales", sbValues.ToString(), sbDescriptions.ToString());

            return chart;
        } 
```

在 android 中，您可以在 web 视图中加载结果。

```
 chartView  = (WebView)findViewById(R.id.activity_chart_view);
 ChartsClass chart = new ChartsClass(soapObject);
 chartView.loadUrl(chart.chartStringSource); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-24T15:31:20.973

如果您尝试使用用户输入创建图表，该 wikiHow 链接上有一个 wikiHow：http: [//www.wikihow.com/Make-a-Google-Chart-with-User-Input](http://www.wikihow.com/Make-a-Google-Chart-with-User-Input)

此 wikiHow 创建的图表与本网站上的相同： 网站链接：[http ://www.quickcompromise.com/index.html](http://www.quickcompromise.com/index.html)

# android - Android getActivity() 未定义

> ID：14705973
> 
> 赞同：28
> 
> 时间：2013-02-05T11:03:20.563
> 
> 标签：android

我的班级 MainActivity 中有错误。

**错误：** `The method getActivity() is undefined for the type MainActivity`

```
public class MainActivity extends SherlockFragmentActivity{
    PlaceSlidesFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    public static final String TAG = "detailsFragment";

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.main,
                container, false);

        mAdapter = new PlaceSlidesFragmentAdapter(getActivity()
                .getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        ((CirclePageIndicator) mIndicator).setSnap(true);

        mIndicator
                .setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        Toast.makeText(MainActivity.this.getActivity(),
                                "Changed to page " + position,
                                Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onPageScrolled(int position,
                            float positionOffset, int positionOffsetPixels) {
                    }

                    @Override
                    public void onPageScrollStateChanged(int state) {
                    }
                });
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-05T11:06:04.667

这是因为您在`getActivity()`内部类中使用。尝试使用：

`SherlockFragmentActivity.this.getActivity()`

相反，虽然这部分确实没有必要`getActivity()`。在你的情况下， `SherlockFragmentActivity .this`应该足够了。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-05T11:05:47.283

如果你想调用你的活动，只需使用**this**。当您在片段中时，您使用 getActivity 方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-05T11:14:20.853

你想`getActivity()`在你的班级里。最好用

```
yourclassname.this.getActivity() 
```

尝试这个。这对你很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T08:45:51.710

在我的应用程序中，使用以下内容就足够了：

我的类名.this

# drupal - 带有图像描述和选项卡的 Drupal 内容

> ID：14705976
> 
> 赞同：-5
> 
> 时间：2013-02-05T11:03:31.513
> 
> 标签：drupal, content-type

我为 drupal 网站创建了一个内容类型，如下所示：

![内容类型](../Images/46da8a8350bf42b5959b620a5bbc202f.png)

**是否有任何类似于此的内置模块或任何教程链接可以帮助我开始制作这种内容类型** 提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:11:14.673

首先，您需要 CCK 将自定义字段添加到您的内容类型（图像、描述、标题、规格、应用程序、设计功能） [http://drupal.org/project/cck](http://drupal.org/project/cck)

您需要进行一些分类来标记每个节点创建分类后，创建自定义字段（分类术语参考）

Drupal 快速选项卡将有助于为底部选项卡区域创建“外观” [http://drupal.org/project/quicktabs](http://drupal.org/project/quicktabs)

您很可能也需要 Views [http://drupal.org/project/views](http://drupal.org/project/views)

# java - 以特定大小打印 Bufferedimage 对象

> ID：14705981
> 
> 赞同：1
> 
> 时间：2013-02-05T11:03:45.660
> 
> 标签：java, swing, printing, bufferedimage, java-2d

我创建了一个具有特定像素大小的缓冲图像，我试图将它发送到打印机对话框，但是当我将它发送到打印机时，尺寸对于我的目标来说太大了（卡片打印机）

这是我的对象：

```
BufferedImage bi 
```

这是我迄今为止尝试过的，包括我的对象：

[在 Java 中打印 BufferedImage](https://stackoverflow.com/questions/5283860/printing-a-bufferedimage-in-java)

[http://docs.oracle.com/javase/tutorial/2d/printing/dialog.html](http://docs.oracle.com/javase/tutorial/2d/printing/dialog.html)

还有一些例子，我找不到答案

我正在寻找一种简单的方法，可以将我的缓冲图像发送到打印对话框，其高度/宽度适用于我的卡片打印机。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:08:09.130

> 我创建了一个具有特定像素大小的缓冲图像，并尝试将其发送到打印机对话框，但是当我将其发送到打印机时，尺寸对于我的目标来说太大了（卡片打印机）

*   看看[public Image getScaledInstance(int width, int height, int hints)](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)，在那里你可以设置所需的像素比率

*   通知`ScaledInstance`是异步的，

*   `flush()`在某些情况下必须调用，当`XxxImage`, `Icon`,`ImageIcon`放置在`JLabel`

# jquery - 如何使用jquery获取表格行中的列数据onchange of checkbox

> ID：14705985
> 
> 赞同：0
> 
> 时间：2013-02-05T11:04:18.877
> 
> 标签：jquery, checkbox

我有一个表，最后有复选框列。

**HTML**

```
<table border="1">
    <thead>
        <tr>
            <td>Name</td>
            <td>Amount</td>
            <td>Selected Rows</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Item 1</td>
            <td>5.0</td>
            <td><input type="checkbox" checked="checked"/></td>
        </tr>
        <tr>
            <td>Item 2</td>
            <td>3.0</td>
            <td><input type="checkbox" checked="checked"/></td>
        </tr>
        <tr>
            <td>Item 3</td>
            <td>4.0</td>
            <td><input type="checkbox" checked="checked"/></td>
        </tr>
    </tbody>
</table>
Total : $<input type="text" value="12.0" /> 
```

**jQuery**

```
$('input[type=checkbox]').change(function(){
   alert($(this).parent().parent().text());
}); 
```

我想根据使用复选框选择的行计算总值。该代码`$(this).parent().parent().text();`给出了整行的文本值。如何单独获取金额列的值？

[JSFIDDLE](http://jsfiddle.net/gMVVR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:09:28.657

您需要遍历行并汇总检查的值。试试这个：

```
$('input[type=checkbox]').change(function () {
    var total = 0;
    $('table tbody tr').each(function () {
        if ($('input:checked', this).length) {
            total += parseFloat($(this).find('td:eq(1)').text());
        }
    });
    $('#total').val(total.toFixed(1));
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/gMVVR/3/)

可以通过添加一些类或 id 属性来改进 DOM 遍历以使其更具体到表/输入，但用于计算总数的模式在任何情况下都可以工作。

# django - Django - 每个页面都有不同的 html/css/js 代码

> ID：14705986
> 
> 赞同：1
> 
> 时间：2013-02-05T11:04:18.830
> 
> 标签：django

我创建了一个图书应用程序 - 每本书包含几个部分，每个部分包含几个子部分。

该应用程序运行良好，每个子部分在正确的页面上“显示”其内容等。问题是我希望每个子部分都有不同的 html/css/js 代码和效果。

这是一些 URLS.PY 代码：

```
 url(r'^admin/', include(admin.site.urls)),
 (r'^$', direct_to_template, {'template': 'index.html'}),
 (r'^book/$','book.views.BookAll'),
 (r'^book/$','book.views.BookAll'),

 (r'^book/(?P<slug>[-\w]+)/$','book.views.Ssection_specific'),
 (r'^book/info/(?P<slug>[-\w]+)/$','book.views.Ssection_details'), 
```

)

一些views.py代码：

```
def Ssection_specific(request, slug): #display according to specified section object.
    try:
            section = Section.objects.get(slug=slug)
    except Section.DoesNotExist:
            raise Http404        
    ssection = SSection.objects.filter(section = section).order_by('subject')
context = {'ssection' : ssection,'section' : section}
    return render_to_response('section_display.html', context, context_instance = RequestContext(request))# creates

def Ssection_details(request, slug):
    try:
            ssection = SSection.objects.get(slug = slug)
    except SSection.DoesNotExist:
            raise Http404
    context = {'ssection' : ssection}
    return render_to_response('info/ssection_disp.html', context, context_in) 
```

如您所见，每个子部分的页面由 slug 确定。当然，他们每个人都有相同的模板，这是我的问题。我想为每个页面制作不同的 css/js 效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:36:33.420

创建 base.html

**base.html**

```
<html>
   <head>
       <title>{% block title %}{% endblock %}</title>

       {% block css %}{% endblock %}
       {% block js %}{% endblock %}
   </head>

   <body>
        {% block content %}{% endblock %}
   </body>
</html> 
```

**page1.html**

```
{% extends "base.html" %}

{% block title %}{{block.super}}"title here"{% endblock %}

{% block css %}{{block.super}}
     "css here"
{% endblock %}

{% block js %}{{block.super}}
     "js here"
{% endblock %}

{% block content %}
     content here
{% endblock %} 
```

在其他页面中遵循此模式，您现在可以根据需要使用不同的 css/js

# javascript - 没有应用 ID 的分享按钮

> ID：14705990
> 
> 赞同：3
> 
> 时间：2013-02-05T11:04:33.270
> 
> 标签：javascript, facebook

我可以有一个没有应用程序 ID 的 Facebook 分享按钮吗？我有一个 facebook 页面，不是一个应用程序，也没有关联的应用程序。

我有一个 div

```
<div class="fb"></div> 
```

和js文件

```
$('.op-blackfb').click(postToFeed);

var postToFeed = function() {
    var share = {
      method: 'feed',
      u: 'http://mylink.goes/here'
    };
    FB.ui(share, function callback(response) {

        document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    });

  } 
```

这曾经可以工作，但现在它在弹出对话框中失败并出现错误，我猜是在 facebook 更改了 API 之后。有谁知道这个的解决方法？我想要一个自定义分享按钮？我有正常的 fb 分享按钮，但我想要一个不会破坏设计的图像。

这可以在没有应用程序 ID 的情况下使用，但具有标准的 fb 按钮

```
 <script>(function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk')); 
```

```
 <div id="fb-root"></div>
 <p id='msg'></p>
 <fb:share-button type="button" style="display:inline-block;" share_url="http://my.link/here"></fb:share-button> 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:11:21.873

模态 iframe 怎么样？您可以使用 Facebook 共享器。您可以使用任何想要打开对话框的按钮。问题是这使用了一个 facebook 页面，所以你必须使用一些 iframe 将它合并到你的设计中，或者你必须使用一个弹出窗口

```
https://www.facebook.com/sharer/sharer.php?u=[the-link-you-want-to-share] 
```

facebooks文档也做得很好

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# scala - Json 在 Play 框架中读取

> ID：14705998
> 
> 赞同：1
> 
> 时间：2013-02-05T11:04:51.523
> 
> 标签：scala, playframework-2.0

如本文所述，我一直在尝试在 Play 中使用 Reads[A]。

[在 Play Framework 2.0 Scala 中处理 JSON 请求](https://stackoverflow.com/questions/13426752/handling-json-requests-in-play-framework-2-0-scala)

但是，当我尝试做类似的事情时，我最终得到了这个错误。

对象创建不可能，因为方法读取特征读取类型 (json: play.api.libs.json.JsValue)models.SomeObject.AnotherObject 未定义

我目前有：

```
package models

object SomeObject {
  case class AnotherObject(val name: String)
  implicit object AnotherObjectReads extends Reads[AnotherObject] {
    def read(json: JsValue) =
      AnotherObject((json \ "name").as[String])
  }
} 
```

我以以下方式使用它：

```
def callFunc = Action(BodyParsers.parse.json) { request =>
  request.body.asOpt[SomeObject.AnotherObject].map {
    //Logic
  }.getOrElse(BadRequest)
} 
```

我在我的代码中做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:55:43.273

我想你拼错了。该方法称为**读取**未读取

[http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.libs.json.Reads](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.libs.json.Reads)