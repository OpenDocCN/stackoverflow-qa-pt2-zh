# StackOverflow 问答 15072000-15072999

# ubuntu - Ubuntu - python2和python3共存 - 安装库

> ID：15072003
> 
> 赞同：0
> 
> 时间：2013-02-25T16:48:51.453
> 
> 标签：ubuntu, python-3.x, python-2.x, coexistence

我有一个愚蠢的问题。我用 Python3 编写了一个简单的应用程序。我只在我的本地机器上用 Windows 和 Python3 测试它，所以当我安装 psutil 时一切正常。但是，当我将它发送到目标系统时，Ubuntu 问题开始了。这台机器上有两个 python 实例：2.7 和 3.2.3。我尝试安装 psutil `sudo apt-get install python-psutil`，它只安装了 2.7 版。我也尝试以某种方式使用easy_install，但它声称它已经安装在p2.7中。如何让它在 python3 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:22:05.110

好的，我找到了解决方案。因此，要为 python3 安装 psutil，您应该：

1.  [从http://code.google.com/p/psutil/downloads/list](http://code.google.com/p/psutil/downloads/list)下载 psutil 源
2.  在某个 tmp 目录中提取 tar 文件
3.  打开终端并转到此目录
4.  类型`sudo apt-get install python3-dev`
5.  类型`python3 setup.py install`

我相信当系统上有多个 python 时，这种方法也适用于其他库。希望有人能节省一些时间:)

# python - 在熊猫中保留/切片特定列

> ID：15072005
> 
> 赞同：17
> 
> 时间：2013-02-25T16:48:56.673
> 
> 标签：python, pandas

我知道这些列切片方法：

`df2 = df[["col1", "col2", "col3"]]`和`df2 = df.ix[:,0:2]`

但我想知道是否有一种方法可以在同一个切片中从数据帧的前/中/端切分列，而无需专门列出每个列。

例如，具有以下列的数据`df`框：col1、col2、col3、col4、col5 和 col6。

有没有办法做这样的事情？

`df2 = df.ix[:, [0:2, "col5"]]`

我的情况是，我有数百个列，并且经常需要针对不同的请求对特定的列进行切片。我已经检查了文档，还没有看到这样的东西。我忽略了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T18:37:44.927

IIUC，我能想到的最简单的方法是这样的：

```
>>> import pandas as pd
>>> import numpy as np
>>> df = pd.DataFrame(np.random.randn(5, 10))
>>> df[list(df.columns[:2]) + [7]]
          0         1         7
0  0.210139  0.533249  1.780426
1  0.382136  0.083999 -0.392809
2 -0.237868  0.493646 -1.208330
3  1.242077 -0.781558  2.369851
4  1.910740 -0.643370  0.982876 
```

调用`list`不是可选的，否则`Index`对象将尝试将自身矢量添加到 7.

有可能像 numpy's`r_`这样的特殊情况

```
df[col_[:2, "col5", 3:6]] 
```

会工作，虽然我不知道这是否值得麻烦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T08:35:37.573

如果您的列名包含可以过滤的信息，则可以使用 df.filter(regex='name*')。我正在使用它在从 a1_01 到 b3_21 的 189 个数据通道之间进行过滤，并且效果很好。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T17:37:46.093

不确定你在问什么。如果您想要特定列的第一行和最后 5 行，您可以执行以下操作

```
df = pd.DataFrame({'col1': np.random.randint(0,3,1000),
               'col2': np.random.rand(1000),
               'col5': np.random.rand(1000)}) 
In [36]: df['col5']
Out[36]: 
0     0.566218
1     0.305987
2     0.852257
3     0.932764
4     0.185677
...
996    0.268700
997    0.036250
998    0.470009
999    0.361089
Name: col5, Length: 1000 
In [38]: df['col5'][(df.index < 5) | (df.index > (len(df) - 5))]
Out[38]: 
0      0.566218
1      0.305987
2      0.852257
3      0.932764
4      0.185677
996    0.268700
997    0.036250
998    0.470009
999    0.361089
Name: col5 
```

或者，更一般地说，您可以编写一个函数

```
In [41]: def head_and_tail(df, n=5):
    ...:     return df[(df.index < n) | (df.index > (len(df) - n))] 
In [44]: head_and_tail(df, 7)
Out[44]: 
     col1      col2      col5
0       0  0.489944  0.566218
1       1  0.639213  0.305987
2       1  0.000690  0.852257
3       2  0.620568  0.932764
4       0  0.310816  0.185677
5       0  0.930496  0.678504
6       2  0.165250  0.440811
994     2  0.842181  0.636472
995     0  0.899453  0.830839
996     0  0.418264  0.268700
997     0  0.228304  0.036250
998     2  0.031277  0.470009
999     1  0.542502  0.361089 
```

# asp.net-mvc-4 - EF 代码优先多对多关系，不生成列表框

> ID：15072007
> 
> 赞同：0
> 
> 时间：2013-02-25T16:49:08.013
> 
> 标签：asp.net-mvc-4, entity-framework-5

我有3个模型：

*   生成的 AccountModels
*   文章
*   标签

```
 public UsersContext()
    : base("DefaultConnection") {} `public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Article> Articles { get; set; }
    public DbSet<Tag> Tags { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public virtual ICollection<Article> Articles { get; set; }
}

...

public class Article
{
    public int Id { get; set; }
    public string Title { get; set; }
    public int UserProfileUserId { get; set; }
    public UserProfile UserProfile { get; set; }
    public ICollection<Tag> Tags { get; set; }
}

...

public class Tag
{
    public int Id { get; set; }
    public string name { get; set; }
    public ICollection<Article> Articles { get; set; }
}` 

我正在使用这样的“添加控制器”搭建脚手架

![添加标签控制器](../Images/d82cfc819be92d2c2e883632207c3645.png)
![添加文章控制器](../Images/1af163312f8712c0fe2d26326c91a60b.png)

EF 创造的东西乍看之下是令人满意的

![数据库模式](../Images/5fd51ca008bf9747b077ec0738e2a13f.png)

我可以轻松选择文章所属的用户

![文章创建](../Images/b91ab6df6320981b15806aa02bfba489.png)

但是标签呢？为什么 EF 没有生成任何包含可用标签的列表框？我对 EF 的要求太高还是在模型中声明了错误？

```

# c# - PasswordDeriveBytes 函数

> ID：15072010
> 
> 赞同：2
> 
> 时间：2013-02-25T16:49:10.283
> 
> 标签：c#, .net, encryption

我正在使用 AES (Rijndael) 对称密钥算法来加密-解密数据。我正在使用 System.Security.Cryptography。PasswordDeriveBytes 函数；

```
 PasswordDeriveBytes password = new PasswordDeriveBytes(
                                                        passPhrase,
                                                        saltValueBytes,
                                                        hashAlgorithm,
                                                        passwordIterations); 
```

在 MSDN 等上查看此函数，它并没有明确告诉您“hashAlgoritm”可以采用哪些参数。互联网上有使用 SHA1 和 SHA256 的示例。我对此进行了实验，发现它可以采用 SHA512。但是没有文档，我不知道 SHA512 是否真的比 SHA256 或 SHA1 甚至 MD5 更好。任何人都可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:14:27.670

散列方法的安全性对于密钥派生函数来说不太重要。最好选择与所需密钥大小匹配的密钥，尽管通常不鼓励使用 MD5。其他应用程序可能只使用 SHA-1 。

请注意，它`PasswordDeriveBytes`已被弃用，当然不应该用于大于散列大小的输出。改为使用 PBKDF2，请参阅[`Rfc2898DeriveBytes`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx).

# azure - Azure 网站 .json 扩展处理程序映射

> ID：15072012
> 
> 赞同：1
> 
> 时间：2013-02-25T16:49:11.947
> 
> 标签：azure, web, mapping

我在 Windows Azure 的门户中设置了一个网站，但它不会提供以 .json 结尾的文件，因为我猜该文件类型没有关联的处理程序。其他文本类型文件也会发生这种情况。

我只是想把它作为一个没有处理的文本文件提供服务，我需要在配置页面中输入什么处理程序映射？

我需要扩展（我假设 *.json）和脚本处理器路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T01:23:41.467

实际上，您可以在没有任何管理门户 GUI 交互的情况下做到这一点。
您所要做的就是将以下内容添加到 web.config：

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".json" mimeType="text/plain" />
  </staticContent>
</system.webServer> 
```

如果您已经拥有“system.webServer”部分，只需将其添加到此部分。

# python - 具有多个模型的 Flask 应用程序的结构.py

> ID：15072013
> 
> 赞同：2
> 
> 时间：2013-02-25T16:49:11.837
> 
> 标签：python, flask

我目前有一个具有以下结构的 Flask 应用程序：

```
deploy/
api/
  customer/
    models.py
  contact/
    models.py
  campaign/
    models.py
  activity/
    models.py
  __init__.py
  database.py
tests/
  test_api.py 
```

因为我有这么多模型，所以我将它们拆分为单独的文件，这在我尝试初始化数据库时会引起问题。

在我的每个模型中，我执行以下操作以使 Flask-SQLAlchemy 的模型调用可用：

```
from flask.ext.sqlalchemy import SQLAlchemy
db = SQLAlchemy()

class User(db.Model):
... 
```

这样做意味着`db`每个模型都有一个不同的对象，这使得我无法正确初始化我的应用程序。

如何构建我的项目，以便我可以拥有一个可供我`db`的所有模型、测试和`create_app()`函数使用的对象`__init__.py`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:59:26.680

这是一种方法：

```
  我的应用程序/
    __init__.py
    数据库.py
    应用程序.py
    型号1/
      __init__.py
      模型.py
    型号2/
      __init__.py
      模型.py

```

在 database.py 中：

```
from flask.ext.sqlalchemy import SQLAlchemy
db = SQLAlchemy() 
```

在各种 models.py 文件中：

```
from ..database import db

class User(db.Model):
    ... 
```

这利用了[显式的相对导入](http://docs.python.org/2/tutorial/modules.html#intra-package-references)

# javascript - 在我的下划线模板中插入随机 unicode

> ID：15072014
> 
> 赞同：0
> 
> 时间：2013-02-25T16:49:13.090
> 
> 标签：javascript, html, templates, unicode, underscore.js

所以在我的模板中插入了一些 unicode，导致我的 iframe src 失败。

该字符串似乎`http://sand-dynamic.adpinr.com/social_stream/p_unit/1204042`在 javascript 变量中，但变成

```
http://sand-dynamic.adpinr.com%e2%80%ac/social_stream/p_unit/1204042 
```

显然，但我不知道为什么。我试图对变量执行此操作：

```
obj.URL = unescape(JSON.parse('"' + TL.getURL() + '/social_stream/p_unit/' + obj.id + '"'); 
```

但这似乎没有帮助。我的模板只是这样称呼它

```
<iframe frameborder="0" width="<%= width %>" height="<%= height %>" marginheight="0" marginwidth="0" target="_blank" scrolling="no" src="<%= URL %>"></iframe> 
```

关于如何摆脱多余的 unicode 有什么想法吗？它阻止我访问浏览器中的 URL，它只是用谷歌搜索它。我希望它动态删除任何额外的 unicode，因为我不知道该 unicode 是如何到达那里的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:55:37.267

`%e2%80%ac`是[U+202C](http://www.charbase.com/202c-unicode-pop-directional-formatting)。不知何故，那个字符进入了你的 URL 变量。该字符是不可见的，这就是为什么在打印出变量的值时看不到它，但在字符串被 URL 编码时看到它的原因。您需要编辑字符串以删除该字符。我无法提供更多信息，因为我不知道该值来自何处。

如果你真的想删除非 ASCII 范围字符，你总是可以这样做：

```
var url = ...
var strippedURL = '';
for (var i = 0, l = url.length; i < l; i++){
  if (url.charCodeAt(i) < 256) strippedURL += url[i];
}
return strippedURL; 
```

不过，这不是解决这个问题的好方法。如果您不知道该字符的来源，那么这只是表明您的代码中的其他地方存在需要修复的错误。

# android - Android 4.2.2 使操作栏图标和标题可点击，就好像同一个按钮的一部分

> ID：15072016
> 
> 赞同：10
> 
> 时间：2013-02-25T16:49:26.550
> 
> 标签：android, android-actionbar

在 4.2.2 之前，只有 logo 是可点击的。

从 4.2.2 开始，actionbar 的标题与 logo 一起是可点击的——**两者都好像是同一个 button 的一部分**。

您可以在 Google 阅读器应用程序中看到此行为的示例 - 如果您有 4.2.2 设备（请参阅随附的屏幕截图）。

**如何禁用此行为并启用仅单击图标？**也许这是一个错误？

请参阅示例代码片段：

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setDisplayHomeAsUpEnabled(true);
        getActionBar().setHomeButtonEnabled(true);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                Intent intent = new Intent(this, MainActivity.class);
                startActivity(intent);
                finish();
                return true;
        }
        return false;
    }
} 
```

![单击徽标会将标题设置为也被单击](../Images/679fa084aa3e9bc5f7de5633c1f43b8f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T10:02:14.743

这个答案似乎相关：[https ://stackoverflow.com/a/16216966/596531](https://stackoverflow.com/a/16216966/596531)

我自己还没有尝试过，因为它充其量只是一种解决方法并且使我的代码复杂化，但是通过隐藏真正的标题它应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T09:46:49.843

这不是错误，这是正常的系统行为！我认为他们更改了它，以便用户可以在该按钮上获得更大的可点击目标区域。

除非您实现自己的 ActionBar（也许通过扩展 ActionBar Sherlock），否则您无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-14T22:33:31.793

摆脱：

```
getActionBar().setHomeButtonEnabled(true); 
```

和（或）

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

这使得文本和图标无需使用即可点击

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

**除了**在这里使用上面的代码 ^^ 在图标或文本旁边显示一个小箭头

# 编辑

你可以尝试使用这个

```
getActionBar().setHomeButtonEnabled(true); 
```

并摆脱操作栏文本，我猜......但这不是你想要的：/但它只是使图标可点击

# web-applications - Spring 安全性和多个登录表单

> ID：15072018
> 
> 赞同：1
> 
> 时间：2013-02-25T16:49:31.917
> 
> 标签：web-applications, spring-security

我有一个使用 Spring Security 的 Web 应用程序来管理身份验证。我的客户有 2 个登录表单，我的 spring 安全配置如下：

```
<http auto-config="true" use-expressions="true" create-session="always">
        <intercept-url pattern="/**"  access="permitAll" />

        <form-login login-processing-url="/user/login" login-page="/user/login/unauthorized" 
            default-target-url="/user/firstLogin" authentication-failure-url="/user/login/failure" />

        <form-login login-processing-url="/user/relogin" login-page="/user/login/unauthorized" 
            default-target-url="/user/reLoginFromClient" authentication-failure-url="/user/login/failure" />

        <logout logout-url="/user/logout/spring" logout-success-url="/user/logout/success" />
        <access-denied-handler ref="accessDeniedHandler"/>
    </http> 
```

第一个表单登录元素工作正常，即我能够从`/user/login`URL 登录。但是，当我尝试从第二个 url 登录时`/user/relogin`，我从服务器收到 415:unsupported media type 响应。

请注意，如果我切换这两个元素，则顶部的元素可以正常工作，而底部的元素会导致 415 响应。

我按照所选答案中的建议做了，我的配置现在如下所示：

```
<http auto-config="true" use-expressions="true" create-session="always" authentication-manager-ref="authenticationManager">
        <intercept-url pattern="/**"  access="permitAll" />
        <custom-filter after="SECURITY_CONTEXT_FILTER" ref="reLoginFilter"/>
        <form-login login-processing-url="/user/login" login-page="/user/login/unauthorized" 
            default-target-url="/user/firstLogin" authentication-failure-url="/user/login/failure" />
        <logout logout-url="/user/logout/spring" logout-success-url="/user/logout/success" />
        <access-denied-handler ref="accessDeniedHandler"/>  
    </http>

    <beans:bean id="reLoginFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
        <beans:property name="authenticationManager" ref="authenticationManager"/>
        <beans:property name="filterProcessesUrl" value="/user/relogin"/>
        <beans:property name="authenticationSuccessHandler" ref="authenticationSuccessHandler" />
        <beans:property name="authenticationFailureHandler" ref="authenticationFailHandler" />
    </beans:bean> 

    <beans:bean id="authenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
        <beans:property name="defaultTargetUrl" value="/user/relogin/success"/>
    </beans:bean>

    <beans:bean id="authenticationFailHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <beans:property name="defaultFailureUrl" value="/user/login/failure"/>
    </beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:56:40.463

您不能`<form-login>`在单个元素中使用多个元素`<http>`。

相反，您可以使用一个并通过定义一个bean 并使用元素`UsernamePasswordAuthenticationFilter`插入它来添加第二个。`custom-filter`

您还应该删除`auto-config`. 也很少需要为每个请求创建一个会话，所以我也会删除该`create-session`属性，除非您确定需要它。

# compiler-construction - flex 中的问号 (?)

> ID：15072020
> 
> 赞同：1
> 
> 时间：2013-02-25T16:49:42.413
> 
> 标签：compiler-construction, flex-lexer, lexical-analysis

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:52:52.787

`?`不是特定于 flex 它是大多数正则表达式引擎的一部分。它基本上意味着任何出现在 the 之前的`?`都是*optional*，所以它实际上不必在那里。

具体来说，它的意思是“零或前面的元素之一”。

例子：

```
Nov(ember)?              // matches November or Nov
Feb(ruary)? 23(rd)?      // matches Feb 23 or February 23 or February 23rd or Feb 23rd
colou?r                  // matches color or colour 
```

# c - C如何在不使用图形库或任何其他库函数的情况下绘制点/设置像素

> ID：15072025
> 
> 赞同：7
> 
> 时间：2013-02-25T16:49:51.607
> 
> 标签：c

我试图了解如何在不使用库函数的情况下绘制一组点（/设置像素）形成一个圆。

现在，在给定半径的情况下获取点的 (x,y) 坐标很简单。

```
 for (x=-r; x <r; x=x+0.1) {
         y = sqrt(r*r - x*x);
         draw(x,y, 0, 0);
     } 
```

但是一旦我有了要点，你实际上是如何画圆的，这让我很困惑。我可以使用图形库，但我想了解如何在不使用图形库的情况下做到这一点

```
 void draw(float x, float y, float center_x, float center_y) {
          //logic to set pixel given x, y and circle's center_x and center_y
          // basically print x and y on the screen say print as a dot .
          // u 'd need some sort of a 2d char array but how do you translate x and y
          // to pixel positions
    } 
```

有人可以分享任何链接/参考或解释这是如何工作的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:06:45.990

```
char display[80][26];

void clearDisplay(void) {
   memset(display, ' ', sizeof(display));
}

void printDisplay(void) {
  for (short row=0; row<26; row++) {
    for (short col=0; col<80; col++) {
      printf("%c", display[col][row]);
    }
    printf("\n");
  }
}

void draw(float x, float y, float center_x, float center_y) {
  if (visible(x,y)) {
    display[normalize(x)][normalize(y)] = '.';
  }
} 
```

**伊迪丝：** 你改变了你的评论，加入了更多你的问题，所以我会扩大我的答案。

你有两组坐标：

*   世界坐标（如世界地图上的经度和纬度或电磁显微镜上的飞米）这些主要是您的 x 和 y
*   显示坐标：这些是显示设备（如 Nexus 7 或 Nexus 10 平板电脑）及其物理尺寸（每英寸像素或像素或点）的表示

您需要一个度量，将您的世界坐标转换为显示坐标。为了让事情变得更复杂，你需要一个窗口（你想向用户展示的世界的一部分）来剪辑你不能展示的东西（比如非洲，当你想展示欧洲时）。你可能想缩放你的世界坐标以匹配你的显示坐标（你想显示多少欧洲）

这些度量和剪裁是简单的代数变换

*   将世界坐标缩放到显示坐标： display-x = world-x * factor (femtometer or km to pixel)
*   将世界中心转换为显示中心：显示-X + 调整

等等。只是“代数变换”或“几何”的维基百科

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T19:09:20.667

这是一个棘手的问题，因为从技术上讲，C 没有任何内置的输入/输出功能。即使写入文件也需要一个库。在某些系统上，如实模式 DOS，您可以直接访问视频内存并通过将值写入该内存来设置像素，但现代操作系统确实阻碍了这样做。您可以尝试编写引导加载程序以在没有操作系统的情况下以更宽松的 CPU 模式启动程序，但这是一个巨大的蠕虫罐头。

因此，使用最简单的 stdio 库，您可以使用 ascii 图形写入标准输出，如另一个答案所示，或者您可以输出简单的图形格式，如[xbm](http://en.wikipedia.org/wiki/XBM)可以使用单独的图像查看程序查看。更好的选择可能是[netpbm](/questions/tagged/netpbm "显示标记为“netpbm”的问题")格式。

对于画圆部分，看一下经典的[Bresenham 算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)。或者，对于太多信息，Jim Blinn 的[*A Trip Down the Graphics Pipeline*](https://rads.stackoverflow.com/amzn/click/com/1558603875)的第 1 章描述了*15*种不同的画圆算法！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-18T23:03:50.617

我有一个利用 unicode 盲文的文件。

```
#include <stdio.h>
#include <wchar.h>
#include <locale.h>

#define PIXEL_TRUE 1
#define PIXEL_FALSE 0

// Core Function.
void drawBraille(int type) {
  if(type > 255) {
    return;
  }
  setlocale(LC_CTYPE, "");
  wchar_t c = 0x2800 + type;
  wprintf(L"%lc", c);
}

/*
  Pixel Array.
  0x01, 0x08,
  0x02, 0x10,
  0x04, 0x20,
  0x40, 0x80,
*/

int pixelArr[8] = {
  0x01, 0x08,
  0x02, 0x10,
  0x04, 0x20,
  0x40, 0x80
};

typedef int cell[8];

void drawCell(cell cell) {
  int total;
  for(int i = 0; i < 8; i++) {
    if(cell[i] == 1) {
      total += pixelArr[i];
    }
  }
  drawBraille(total);
}

// Main.
int main(void) {
  cell a = {
    0, 1,
    0, 0, 
    1, 1,
    0, 1
  };
  drawCell(a);
return 0;
} 
```

别客气！

# c# - 尽管似乎已填充，但 DropDownList 没有显示任何值

> ID：15072031
> 
> 赞同：0
> 
> 时间：2013-02-25T16:50:13.723
> 
> 标签：c#, asp.net

我正在从 XML 文档中读取设置，将其转​​换为字符串数组，然后循环遍历每个字符串并将它们添加到`DropDownList`. 一切*似乎*都运行良好，直到我真正去看看`DropDownList`它本身。无论我做什么`DropDownList`都是空的，即使当我通过我的代码进行调试时，一切似乎都完美地添加了自己。如果有人能解释一下为什么尽管从代码的角度来看它正在被填充，但什么都没有显示，我将不胜感激。

我的代码可以在下面找到（请注意，我也尝试通过数据绑定填充它，但我仍然遇到同样的问题。）：

```
public class InstrumentDropDownList : DropDownList
{
   public InstrumentDropDownList()
    {
        PopulateDropDown();
    }

    public void PopulateDropDown()
    {
        string unsplitList = Fabric.SettingsProvider.ReadSetting<string>("Setting.Location");
        string[] instrumentList = unsplitList.Split(',');

        DropDownList instrumentsDropDown = new DropDownList();

        if (instrumentList.Length > 0)
        {
            foreach (string instrument in instrumentList)
            {
                instrumentsDropDown.Items.Add(instrument);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:12:02.780

当您从同一个类继承时，为什么要创建 DropDownList 的新实例。你不应该做类似的事情。base.Items.Add() ??

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:43:10.687

您正在创建一个新的 DropDownList 并向其中添加项目。问题是，您没有对您创建的新 DropDownList 做任何事情。您只是将项目添加到错误的列表中。

```
 public void PopulateDropDown()
    {
        string unsplitList = Fabric.SettingsProvider.ReadSetting<string>("Setting.Location");
        string[] instrumentList = unsplitList.Split(',');

        if (instrumentList.Length > 0)
        {
            foreach (string instrument in instrumentList)
            {
                this.Items.Add(instrument);
            }
        }
    } 
```

作为替代方案，您也应该能够做到这一点。您显然希望进行更多验证，但这只是为了表明您可以使用 DataSource/DataBind

```
public void PopulateDropDown()
{
    this.DataSource = fabric.SettingsProvider.ReadSetting<string>("Setting.Location").Split(',');
    this.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:58:10.970

你需要`instrumentsDropDown.DataBind`在`foreach`声明后打电话..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:03:20.530

```
public class InstrumentDropDownList : DropDownList
{
   public InstrumentDropDownList()
    {
        PopulateDropDown();
    }

    public void PopulateDropDown()
    {
        string unsplitList = Fabric.SettingsProvider.ReadSetting<string>("Setting.Location");
        string[] instrumentList = unsplitList.Split(',');

        DropDownList instrumentsDropDown = new DropDownList();

        if (instrumentList.Length > 0)
        {
            foreach (string instrument in instrumentList)
            {
                instrumentsDropDown.Items.Add(instrument);
            }
            instrumentsDropDown.DataBind();
        }
    }
} 
```

# enthought - EPD Matplotlib 错误：无法在 OS X 上打开人脸文件

> ID：15072033
> 
> 赞同：0
> 
> 时间：2013-02-25T16:50:23.007
> 
> 标签：enthought

我正在尝试在 OS X 上的 EPD 7.3-2（64 位）中运行以下示例代码：

```
import numpy as np
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
mu, sigma = 100, 15
x = mu + sigma*np.random.randn(10000)
n, bins, patches = plt.hist(x, 50, normed=1, alpha=0.75)
y = mlab.normpdf( bins, mu, sigma)
l = plt.plot(bins, y, 'r--', linewidth=1)
plt.xlabel('Smarts')
plt.ylabel('Probability')
plt.title(r'$\mathrm{Histogram\ of\ IQ:}\ \mu=100,\ \sigma=15$')
plt.axis([40, 160, 0, 0.03])
plt.grid(True)
plt.show() 
```

最后一行给了我一个错误：

RuntimeError：无法打开面部文件/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/matplotlib/mpl-data/fonts/ttf/Vera.ttf；Cannot_Open_Resource

有两点我不明白。首先，那个 Vera.ttf 文件是在指定的位置，所以我不知道为什么 Python 打不开它。

其次，我完全不明白它为什么会出现在那里。我的 EPD matplotlib 安装在 /Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib。为什么它不在那里寻找 Vera.ttf？它确实存在于 /Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/matplotlib/mpl-data/fonts/ttf 中。sys.path 中没有列出 2.6 目录，那里只列出了预期的 EPD 2.7 目录。最后，我的PATH环境变量是/Library/Frameworks/EPD64.framework/Versions/Current/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/垃圾桶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:27:39.723

这听起来像是 Matplotlib 字体缓存的问题。你能试试这个相关帖子中的建议吗：[https ://stackoverflow.com/a/4956933/260303](https://stackoverflow.com/a/4956933/260303)

简而言之，只需删除 config 目录中的字体缓存：`rm ~/.matplotlib/fontList.cache`.

# php - 使用一种 PHP 表单在 MySQL 中插入多条记录

> ID：15072036
> 
> 赞同：1
> 
> 时间：2013-02-25T16:50:27.407
> 
> 标签：php, mysql, bulkinsert

使用一个 PHP 表单在 MySQL 中插入多条记录。

简单的模式

```
<form action="process.php" method="post">
<p><label>Beamline ID</label>
<input type="text" name="bline_id[][bline_id]" />
<label>Flow</label>
<input type="text" name="flow[][flow]" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[][bline_id]" />
<label>Flow</label>
<input type="text" name="flow[][flow]" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[][bline_id]" />
<label>Flow</label>
<input type="text" name="flow[][flow]" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[][bline_id]" />
<label>Flow</label>
<input type="text" name="flow[][flow]" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[][bline_id]" />
<label>Flow</label>
<input type="text" name="flow[][flow]" />
</p>
<input name="Submit" type="submit" />
</form> 
```

//进程.php

```
<?php
// connect to the database
include('connect-db.php');

$cnt = count($_POST['bline_id']);
$cnt2 = count($_POST['flow']);

if ($cnt > 0 && $cnt == $cnt2) {
    $insertArr = array();
    for ($i=0; $i<$cnt; $i++) {
        $insertArr[] = "('" . mysql_real_escape_string($_POST['bline_id'][$i]) . "', '" . mysql_real_escape_string($_POST['flow'][$i]) . "')";
}

 $query = "INSERT INTO bltest (bline_id, flow) VALUES " . implode(", ", $insertArr);
 mysql_query($query) or trigger_error("Insert failed: " . mysql_error());
}

echo("<pre>\n");
print_r($_POST);
echo("</pre>\n");

mysql_close($connection);
?> 
```

数组结果

```
 Array
 (
 [bline_id] => Array
    (
        [0] => Array
            (
                [bline_id] => 1
            )

        [1] => Array
            (
                [bline_id] => 2
            )

        [2] => Array
            (
                [bline_id] => 3
            )

        [3] => Array
            (
                [bline_id] => 4
            )

        [4] => Array
            (
                [bline_id] => 5
            )

    )

[flow] => Array
    (
        [0] => Array
            (
                [flow] => 11
            )

        [1] => Array
            (
                [flow] => 22
            )

        [2] => Array
            (
                [flow] => 33
            )

        [3] => Array
            (
                [flow] => 44
            )

        [4] => Array
            (
                [flow] => 55
            )

    )

[Submit] => Submit Query
) 
```

INSERT 结果当然是 5 行，但没有为 $bline_id 或 $flow 插入数据。但看看数组，那是正确的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:57:11.977

改用 PDO 或 Mysqli，这些扩展具有准备选项，因此您只需要传递一次查询，并使用 while 循环来更改数据！

```
<?php

// pdo example

$sql = 'INSERT INTO `table` (field1, field2, field3) VALUES (:value1, :value2, :value3)';

// $dbh is pdo connection
$insertTable = $dbh->prepare($sql);

$countArray = count($array);
$i = 0;

while ($i < $countArray) {
   $insertTable->bindParam(':value1', $array[1][$i], PDO::PARAM_INT); // if value is int
   $insertTable->bindParam(':value2', $array[2][$i], PDO::PARAM_STR); // if value is str
   $insertTable->bindParam(':value3', $array[3][$i], PDO::PARAM_STR);
   $insertTable->execute();

   $i++;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:23:59.763

好的。鉴于你告诉我的，这是我想出的解决方案。我不会给你代码；它破坏了你写它的意义。

我会让用户在两个输入文本字段“bline_id”和“flow”中输入一些值。

当他们点击提交按钮时，这些值将添加到PHP 代码中的[数组中。](http://php.net/manual/en/language.types.array.php)

然后将数组[序列](http://php.net/manual/en/function.serialize.php)化为字符串，并存储为[会话 cookie](http://php.net/manual/en/function.setcookie.php)。

输入每个值时，您将反[序列化](http://php.net/manual/en/function.unserialize.php)cookie 以便将其转换为数组，将新值添加到数组中，然后重复。

当用户点击另一个按钮时，“存储在数据库中”。此选项将反序列化 cookie，[遍历](http://php.net/manual/en/control-structures.foreach.php)数组中的每个元素，并将每个值[存储](http://php.net/manual/en/book.pdo.php)在数据库中。

还要记住，您有两个值，bline_id 和 flow。这些可以存储在两个数组中并存储为两个 cookie。这意味着您正在为两个不同的数组而不是一个数组执行此过程。

最后，您应该使用 PDO 对象。我已经通过“商店”链接将您链接到它。这是推荐的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:56:00.593

我的天啊！！！！我终于明白了！这是我愚蠢的形式！

更正如下--------

```
<form action="process.php" method="post">
<p><label>Beamline ID</label>
<input type="text" name="bline_id[]" value="<?php echo $bline_id; ?>" />
<label>Flow</label>
<input type="text" name="flow[]"  value="<?php echo $flow; ?>" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[]" value="<?php echo $bline_id; ?>" />
<label>Flow</label>
<input type="text" name="flow[]"  value="<?php echo $flow; ?>" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[]"  value="<?php echo $bline_id; ?>"/>
<label>Flow</label>
<input type="text" name="flow[]" value="<?php echo $flow; ?>" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[]" value="<?php echo $bline_id; ?>" />
<label>Flow</label>
<input type="text" name="flow[]" value="<?php echo $flow; ?>" />
</p>
<p><label>Beamline ID</label>
<input type="text" name="bline_id[]" value="<?php echo $bline_id; ?>" />
<label>Flow</label>
<input type="text" name="flow[]" value="<?php echo $flow; ?>" />
</p>
<input name="Submit" type="submit" />
</form> 
```

# excel - 根据用户表单隐藏行复选框

> ID：15072038
> 
> 赞同：1
> 
> 时间：2013-02-25T16:50:34.190
> 
> 标签：excel, sorting, checkbox, userform, vba

大家，早安，

我有一个要对数据进行排序的宏。我的工作簿中的一个按钮调用一个带有 10 个复选框的小用户窗体。用户应该选择他想要查看的类别并单击排序。我想要的结果仅适用于他选择显示的类别，但我从附加的宏中得到了全有或全无的结果。下面是支持表单/按钮对类别进行排序的宏。我搜索了谷歌和其他几个论坛，但找不到与我的问题相关的答案！您能提供的任何帮助将不胜感激。

谢谢！

```
Private Sub cmdSort_Click()

LastRow = Range("A" & Rows.Count).End(xlUp).Row

If chkFE = True Then
    For Each cell In Range("BC4:BC" & LastRow)
        If UCase(cell.Value) <> "Fire Extinguishers" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkChem = True Then
    For Each cell In Range("BD4:BD" & LastRow)
        If UCase(cell.Value) <> "Chem" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkFL = True Then
    For Each cell In Range("BE4:BE" & LastRow)
        If UCase(cell.Value) <> "FL" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkElec = True Then
    For Each cell In Range("BF4:BF" & LastRow)
        If UCase(cell.Value) <> "Elec" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkFP = True Then
    For Each cell In Range("BG4:BG" & LastRow)
        If UCase(cell.Value) <> "FP" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkLift = True Then
    For Each cell In Range("BH4:BH" & LastRow)
        If UCase(cell.Value) <> "Lift" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkPPE = True Then
    For Each cell In Range("BI4:BI" & LastRow)
        If UCase(cell.Value) <> "PPE" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkPS = True Then
    For Each cell In Range("BJ4:BJ" & LastRow)
        If UCase(cell.Value) <> "PS" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkSTF = True Then
    For Each cell In Range("BK4:BK" & LastRow)
        If UCase(cell.Value) <> "STF" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

If chkErgonomics = True Then
    For Each cell In Range("BL4:BL" & LastRow)
        If UCase(cell.Value) <> "Ergonomics" Then
        cell.EntireRow.Hidden = True
        End If
    Next

End If

Unload frmSort

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:38:14.783

您实际上是在过滤，而不是排序。这就提出了一个问题，为什么不让用户使用 Excel 的`Filter`按钮和对话框呢？

`Checkbox`要回答您的问题，您的代码只有在被选中的情况下才会起作用。对于每个选中的复选框，您的代码都隐藏了所有其他类别的行。所以只有最后一个 Checkbox 的类别才会显示行

你可以试着颠倒你的逻辑。从隐藏所有行开始，并`Hidden = False`为单击其类别的任何行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:39:17.907

我想分享@AlphaFrog 为我提供的解决方案，它非常有效：

```
Private Sub cmdSort_Click() 

Dim i As Long, rng As Range, arrCriteria As Variant 

Set rng = Rows(3) 'Headers
arrCriteria = Array("Fire Extinguishers", "Chem", "FL", "Elec", "FP", _ 
"Lift", "PPE", "PS", "STF", "Ergonomics") 

Application.ScreenUpdating = False 
Rows.Hidden = False 
With Range("BC3:BL" & Range("A" & Rows.Count).End(xlUp).Row) 
    For i = 1 To 10 
        If Me.Controls("CheckBox" & i) Then 
            .AutoFilter i, arrCriteria(i - 1) 
            Set rng = Union(rng, .SpecialCells(xlCellTypeVisible).EntireRow) 
            .AutoFilter 
        End If 
    Next i 
    .Parent.AutoFilterMode = False 
    .EntireRow.Hidden = True 
    rng.EntireRow.Hidden = False 
End With 
Application.ScreenUpdating = True 

Unload frmSort 

End Sub 
```

链接到原始答案： [http ://www.ozgrid.com/forum/showthread.php?t=175539](http://www.ozgrid.com/forum/showthread.php?t=175539)

# c# - 如何将 POST 请求内容保存为 .NET 中的文件

> ID：15072040
> 
> 赞同：7
> 
> 时间：2013-02-25T16:50:38.607
> 
> 标签：c#, asp.net, .net, vb.net, http

我有一个客户端应用程序发出 `POST`请求`asp.net URL`（它用于将文件上传到`.NET`）。

如何让asp.net页面接收到这个请求并将其保存为文件？

@ Darin Dimitrov 我已经尝试过您的代码，但我`500 internal server error`知道如何跟踪它？！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T16:51:32.777

如果客户端使用`multipart/form-data`请求编码（这是上传文件的标准），您可以从`Request.Files`集合中检索上传的文件。例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    foreach (HttpPostedFile file in Request.Files)
    {
        var fileName = Path.GetFileName(file.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
        file.SaveAs(path);
    }
} 
```

或者如果您知道客户端使用的名称，您可以直接访问它：

```
HttpPostedFile file = Request.Files["file"]; 
```

另一方面，如果客户端不对请求使用标准编码，您可能需要从`Request.InputStream`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T16:55:48.523

您还可以使用保存整个请求

```
HttpContext.Current.Request.SaveAs(filename,includeHeaders) 
```

假设数据没有作为 multipart/form-data 上传

# php - Magento 新订单模板订单日期未创建

> ID：15072045
> 
> 赞同：0
> 
> 时间：2013-02-25T16:50:53.500
> 
> 标签：php, magento

我正在将新用户订单保存在 Magneto 中并发送订单电子邮件。一切正常，但订单日期没有出现在模板中。order_new.phtml 中的变量是 {{var order.getCreatedAtFormated('long')}}，它正在生成异常“No date part in ''”，因此订单电子邮件正文为空白。有人可以建议我这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:21:50.723

我不知道你说的 long 是什么意思，但试试这个 {{var order.created_at}} 它会给你这个输出：2013-02-25 17:19:50。在 1.7.2 版本上测试。

问候，

# mysql - 如何获得品牌名称？

> ID：15072056
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:51:27.297
> 
> 标签：mysql, sql

我有三张桌子：

```
products:id,name,brand_id
variants:id,name,product_id
brands:id,name 
```

我获取品牌名称的 sql 查询是：

```
SELECT brands.`name`
FROM brands b
     LEFT JOIN products p ON p.brand_id=b.id
     LEFT JOIN variants v ON p.id=v.product_id AND v.name='test'; 
```

可以吗？

```
cause [error]: Unknown column 'brands.name' in 'field list' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:54:38.300

使用您为`brands`表指定的别名：

```
SELECT b.`name` 
```

# python - 将文件路径参数传递给 CherryPy

> ID：15072062
> 
> 赞同：1
> 
> 时间：2013-02-25T16:51:42.383
> 
> 标签：python, url, cherrypy

在 CherryPy 中，如何通过 URL 传递文件路径（即 /abc/def/ghi）之类的参数？我想做类似的事情`http://...../filepath="abc/def/ghi"`。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-23T06:08:14.677

好吧，`.../a/b/x=y`无论它是否是文件名，发送值的方式都是错误的。正确的方法是`.../a/b?x=y` or `.../a/b/?x=y`which would make `x`a standard query parameter and cherrypy 会这样对待它。此后，是否有斜线的价值`x`将是没有实际意义的。他们会很好地访问您的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T17:33:48.190

使用 ~ 作为分隔符然后将字符串中的 ~ 替换为 /...

```
http://...../filepath=abc~def~ghi

def SomePage(self, filepath=None):
    filepath.replace('~', '/')
    return 'HelloWorld' 
```

希望这可以帮助，

安德鲁

# matlab - WiX 3.7 和 MATLAB 2012a MCR

> ID：15072064
> 
> 赞同：1
> 
> 时间：2013-02-25T16:51:46.860
> 
> 标签：matlab, wix, windows-installer

是否有创建[WiX](http://en.wikipedia.org/wiki/WiX)安装程序的教程，可以检查 MCR 是否已经安装，如果没有可以安装它？

我正在使用[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:13:00.367

这是我对 MCR 2012a 和 .NET 4.5 的解决方案，如果有更好的方法，请发表评论：这是用于文档

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
     xmlns:netfx='http://schemas.microsoft.com/wix/NetFxExtension'>

    <Bundle Name="MYAPP"
            Version="0.6"
            Manufacturer="MY Corporation"
            UpgradeCode="f380ae43-5df1-4cfe-9297-526e3e638e57">
        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
        <Chain>
            <!-- TODO: Define the list of chained packages. -->
            <PackageGroupRef
                Id="Netfx45FullPackage"/>
        </Chain>
    </Bundle>

    <Fragment>
        <util:RegistrySearch
            Id="MatlabPath"
            Variable="UniqueId"
            Root="HKLM"
            Key="SOFTWARE\Matworks\MATLAB\4.17\"
            Result="exists"/>
        <PackageGroup Id="Netfx45FullPackage">
            <ExePackage
                Id="Netfx45Xxx"
                Cache="no"
                Compressed="no"
                PerMachine="yes"
                Permanent="yes"
                Vital="no"
                InstallCommand="/q"
                SourceFile="..\SetupProject\dotnetfx45_full_x86_x64.exe"
                DetectCondition="(Netfx4FullVersion=&quot;4.5.50709&quot;) AND (NOT VersionNT64 OR (Netfx4x64FullVersion=&quot;4.5.50709&quot;))"
                InstallCondition="(VersionNT >= v6.0 OR VersionNT64 >= v6.0) AND (NOT (Netfx4FullVersion=&quot;4.5.50709&quot; OR Netfx4x64FullVersion=&quot;4.5.50709&quot;))"/>
            <ExePackage
                Id="MatlabMCR2012a64"
                Cache="no"
                Compressed="no"
                PerMachine="yes"
                Permanent="yes"
                Vital="no" 
                InstallCommand="/q"
                SourceFile="..\SetupProject\MCR_R2012a_win64_installer.exe"
                InstallCondition="(NOT MatlabPath)"/>
        <MsiPackage
            Id="MYAPP"
            Cache="no"
            Compressed="no"
            Vital="yes"
            SourceFile="..\SetupProject\bin\Release\MYAPPSetup.msi"/>
        </PackageGroup>
    </Fragment>
</Wix> 
```

# oracle - Oracle 10G 搜索视图、作业、程序的文本字符串

> ID：15072065
> 
> 赞同：2
> 
> 时间：2013-02-25T16:51:53.617
> 
> 标签：oracle, oracle10g

我们的 Oracle DBLink 正在更改，我需要搜索对旧位置的引用，以便我们可以更新它们以指向新位置。我需要能够搜索整个九码的视图、程序、工作。视图太多了，一次只看一个。

使用 TOAD 或 SQL Developer，我如何在数据库中查询字符串文本？我找到了可以让我搜索对象的查询，但我需要进行更深入的搜索。

TIA

甲骨文10G

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:02:42.423

程序和工作相对容易搜索：

```
select * from dba_source where upper(text) like '%@MY_LINK%';
select * from dba_jobs where upper(what) like '%@MY_LINK%';
select * from dba_scheduler_jobs where upper(job_action) like '%@MY_LINK%'; 
```

但观点很难：

```
select * from dba_views where upper(text) like '%@MY_LINK%';
ORA-00932: inconsistent datatypes: expected NUMBER got LONG 
```

有几种使用 LONG 的方法。最简单的方法是使用 PL/SQL，并选择每个 text `...into v_varchar2_32767...`。但是这种方法不是很容易修改。

您可能想查看[Dictionary Long Application](http://www.oracle-developer.net/display.php?id=430#c05bc)，它将 LONG 转换为 CLOB。然后你可以使用这样的查询：

```
select *
from table(dla_pkg.query_view('select * from dba_views'))
where upper(text) like '%@MY_LINK%'; 
```

# c# - 从 Form 2 更新 Form1（主窗体）以显示处理后的图像

> ID：15072067
> 
> 赞同：0
> 
> 时间：2013-02-25T16:51:59.313
> 
> 标签：c#, winforms

我有两个表单，Form1（主表单）和 Form2。Form 1 显示图像文件、pdf 转换等。但如果用户想要查看 Zip 文件，则调用 Form2 显示 listView 上所有可用 Zip 文件的预览。如果用户在 Form2 上选择一个特定的 Zip 文件，该文件将被解压缩并将图像文件发送到 Form2。但我不知道如何从 Form1 刷新 Form2。顺便说一句，Form2 中的所有图像现在都出现在 Form 的变量列表中！要显示，但表单没有更新。

表格2代码：

```
 private void btn_read_Click(object sender, EventArgs e)
    {

        Form1 f1 = new Form1();
        f1.ReadArchives(Filepath);  //this function creates the image files on Form1
       this.Close(); //close form2

       for (int index = Application.OpenForms.Count - 1; index >= 0; index--)
        {
            if (Application.OpenForms[index].Name == "Form1")
            {
                //Application.OpenForms[index].Close();//EFFECTIVE BUT CLOSES THE WHOLE APPLICATION
               Application.OpenForms[index].Invalidate(); //no effect
                 Application.OpenForms[index].Refresh();//no effect
                Application.OpenForms[index].Update();//no effect
                Application.OpenForms[index].Show();//no effect
            }
        }            

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:00:41.860

您正在代码中实例化 new `Form1`- 这**与**`Form1`您已经拥有的 (main) 不同。这就是表单没有更新的原因。

在我的[回答](https://stackoverflow.com/questions/15028077/get-text-from-a-textbox-in-one-form-and-insert-it-in-a-textbox-from-other-form/15028734#15028734)中，我展示了基于事件的方法来在不同形式之间共享变量/对象 - 它可以轻松调整以传输对象集合。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:17:38.863

因此，当您希望父表单在子表单上发生某些事情时执行某些操作时，适当的机制是使用事件。在这种情况下，当我们希望传递信息时，子表单正在关闭，因此我们可以重新使用该`FormClosed`事件。

这使得编写子表单*非常*简单：

```
public partial class Form2 : Form
{
    public string Filepath {get;set;}

    private void btn_read_Click(object sender, EventArgs e)
    {
        Close();
    }
} 
```

然后父表单可以使用适当的事件来处理其余的：

```
public partial class Form1 : Form
{
    private void button1_Click(object sender, EventArgs args)
    {
        Form2 child = new Form2();
        child.FormClosing += (_, arg) => ReadArchives(child.Filepath);
        child.Show();
    }

    private void ReadArchives(string filepath)
    {
        throw new NotImplementedException();
    }
} 
```

# dart - 流相当于 Observable.Throttle？

> ID：15072071
> 
> 赞同：5
> 
> 时间：2013-02-25T16:52:24.537
> 
> 标签：dart, dart-async

是否有等效于[Observable.Throttle](http://msdn.microsoft.com/en-us/library/hh229298%28v=vs.103%29.aspx)的 Streams ？如果没有 - 是否有任何相当优雅的方式来实现类似的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:02:36.973

目前在流上没有这样的方法。已提交增强请求，您可以在[问题 8492](http://dartbug.com/8492)中加注星标。

但是，您可以使用[where](http://api.dartlang.org/docs/bleeding_edge/dart_async/Stream.html#where)方法来做到这一点。在以下示例中，我定义了一个`ThrottleFilter`在给定持续时间内忽略事件的类：

```
import 'dart:async';

class ThrottleFilter<T> {
  DateTime lastEventDateTime = null;
  final Duration duration;

  ThrottleFilter(this.duration);

  bool call(T e) {
    final now = new DateTime.now();
    if (lastEventDateTime == null ||
        now.difference(lastEventDateTime) > duration) {
      lastEventDateTime = now;
      return true;
    }
    return false;
  }
}

main() {
  final sc = new StreamController<int>();
  final stream = sc.stream;

  // filter stream with ThrottleFilter
  stream.where(new ThrottleFilter<int>(const Duration(seconds: 10)).call)
    .listen(print);

  // send ints to stream every second, but ThrottleFilter will give only one int
  // every 10 sec.
  int i = 0;
  new Timer.repeating(const Duration(seconds:1), (t) { sc.add(i++); });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T13:32:34.820

[rate_limit 包](https://pub.dartlang.org/packages/rate_limit)提供流的节流和去抖动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T14:38:54.070

以下版本更接近于 Observable.Throttle 所做的：

```
class Throttle extends StreamEventTransformer {
  final duration;
  Timer lastTimer;

  Throttle(millis) :
    duration = new Duration(milliseconds : millis);

  void handleData(event, EventSink<int> sink) {
    if(lastTimer != null){
      lastTimer.cancel();
    }
    lastTimer = new Timer(duration, () => sink.add(event));
  }
}

main(){
  //...
  stream.transform(new Throttle(500)).listen((_) => print(_));
  //..
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-11T18:31:24.217

@Victor Savkin 的回答很好，但我总是尽量避免重新发明轮子。所以除非你真的只需要那个油门，否则我建议使用[RxDart](https://pub.dev/packages/rxdart)包。由于您正在处理 Streams 和其他反应性对象，[RxDart](https://pub.dev/packages/rxdart)除了节流之外还有很多不错的东西可以提供。

我们可以通过以下几种方式实现 500 毫秒的节流：

1.  `ThrottleExtensions<T>` `Stream<T>`扩展的[节流](https://pub.dev/documentation/rxdart/latest/rx/ThrottleExtensions/throttleTime.html)时间：`stream.throttleTime(Duration(milliseconds: 500)).listen(print);`
2.  将[ThrottleStreamTransformer](https://pub.dev/documentation/rxdart/latest/rx/ThrottleStreamTransformer-class.html)与[TimerStream](https://pub.dev/documentation/rxdart/latest/rx/TimerStream-class.html)结合使用：`stream.transform(ThrottleStreamTransformer((_) => TimerStream(true, const Duration(milliseconds: 500)))).listen(print);`
3.  使用[Debounce Extensions](https://pub.dev/documentation/rxdart/latest/rx/DebounceExtensions.html) / [DebounceStreamTransformer](https://pub.dev/documentation/rxdart/latest/rx/DebounceStreamTransformer-class.html)：`stream.debounceTime(Duration(milliseconds: 500)).listen(print);`

关于延迟有一些细微的差异，但它们都会受到限制。作为一个关于`throttleTime`vs的示例，`debounceTime`请参阅[RxJS 中的throttleTime 与 debounceTime 之间有什么区别以及何时选择哪个？](https://stackoverflow.com/questions/56460436/what-is-the-difference-between-throttletime-vs-debouncetime-in-rxjs-and-when-to)

# windows - 批处理脚本：如果比较未按预期工作

> ID：15072073
> 
> 赞同：0
> 
> 时间：2013-02-25T16:52:26.910
> 
> 标签：windows, scripting, batch-file

```
FOR /F "tokens=*" %%A IN ('gpresult /r ^| FIND "string"') DO SET Result=%%A  
if '%Result%'=='this is where the word string shows up'  
echo Success > %homepath%\Desktop\Success.txt 
```

即使字符串匹配，也不会实际将文件写入桌面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:24:05.537

尝试在您的代码中使用 setlocal enabledelayedexpansion。然后使用“！变量！”访问您的变量 而不是“%variable%”。还要确保 %%A 是否正在获取所需的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:56:32.447

你需要

```
setlocal enabledelayedexpansion 
```

在批处理文件的顶部，然后代替

```
'%Result%'=='this is where the word string shows up' 
```

你需要

```
'!Result!'=='this is where the word string shows up' 
```

- 注意！代替 ％。否则，在第一次解析批处理文件时会扩展 %Result%，此时 Result 变量不包含任何内容。这些变化意味着它会延迟解析它，直到它在 for 循环中，此时它将被适当地填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:41:44.727

`echo`应该与:位于同一`if`行

```
if '%Result%'=='this is where the word string shows up' echo Success > %homepath%\Desktop\Success.txt 
```

或在其周围加上括号：

```
if '%Result%'=='this is where the word string shows up' (
    echo Success > %homepath%\Desktop\Success.txt
) 
```

# c# - windows服务奇怪的行为

> ID：15072075
> 
> 赞同：2
> 
> 时间：2013-02-25T16:52:27.547
> 
> 标签：c#, .net, windows-services

我实现了 windows 服务，`eventLog`它`FileSystemWatcher`查找特定目录中的更改并将消息写入`MyLog`.

**奇怪的事情 1：**
我通过 installUtil.exe 安装它（因为 VS2012 没有安装程序模板），在某些情况下，当我转到“服务”并启动我得到的服务时：

本地计算机上的 [服务名称] 服务启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。

我已经看过[这个问题了](https://stackoverflow.com/questions/538925/windows-service-stops-automatically)。这篇文章的 2 个答案为什么会这样：

1）方法中没有线程启动`OnStart()`。
我使用设计器并在“属性”窗口中设置了大部分属性，并且我从未手动启动任何线程，但在某些情况下一切正常，所以我认为情况并非如此。

2）方法发生异常`OnStart()`。我认为情况并非如此，因为我没有更改代码。我只是卸载、构建并再次安装相同的服务，在某些情况下它运行，在某些情况下不运行。

当我被这个东西卡住了 2 个小时时，我注意到它的`Source`属性`eventLog`太长了：“FilesMonitoringServices”。我将其更改为“MonitorSource”，一切都开始工作了。比我重新安装它几次并得到与上述相同的警告。我`Source`再次更改了属性，现在服务运行了。
这是第一个奇怪的事情。

**怪事2：**更糟。即使它只运行它的日志`OnStart()`和`OnStop()`方法，我的意思是 fileSystemWatcher 事件处理程序永远不会执行。这很奇怪，因为今天我重新安装了这个服务 mabby 一百次和 3 次它正在工作，但是在我再次重新安装它之后它停止了。而且我根本没有更改重新安装之间的代码。

这是我的类（MonitoringService）中继承的方法和构造函数`ServiceBase`：

```
public MonitoringService()
    {
        InitializeComponent();

        if (!EventLog.SourceExists(eventLog.Source))
        {
            EventLog.CreateEventSource(eventLog.Source, eventLog.Log);
        }
        // haven't changed it between the reinstallations
        fileWatcher.Path = @"path";                
    }

protected override void OnStart(string[] args)
    {
        fileWatcher.EnableRaisingEvents = true;
        eventLog.WriteEntry("start", EventLogEntryType.Information);
        base.OnStart(args);
    }

    protected override void OnStop()
    {
        fileWatcher.EnableRaisingEvents = false;
        fileWatcher.Dispose();
        eventLog.WriteEntry("stop", EventLogEntryType.Information);
        base.OnStop();
    } 
```

和文件系统观察者事件处理程序：

```
private void fileSystemWatcher1_Changed(object sender, FileSystemEventArgs e)
    {
        using (var conn = new SqlConnection(GetConnectionString()))
        {
            conn.Open();
            var productId = Convert.ToInt32(Regex.Match(e.Name, @"\d+").Value);
            const string cmd = "UPDATE Products SET ImageModifiedDate=@date WHERE ProductId=@productId";
            using (var command = new SqlCommand(cmd, conn))
            {
                command.Parameters.AddWithValue("@productId", productId);
                command.Parameters.AddWithValue("@date", DateTime.Now);
                command.ExecuteNonQuery();
            }                   
        }
        eventLog.WriteEntry(string.Format("{0} has been changed: {1}", e.Name, DateTime.Now), EventLogEntryType.Information);             
    } 
```

**问题：**在我看来，这种行为不是由我的代码引起的，而是由操作系统设置引起的。可以吗？

****编辑：刚刚发现了更具体的东西：**

1）如果它显示消息（当我想启动服务时）：

```
The [service name] service on local computer started and then stopped. .... 
```

我需要更改、重建和重新安装`Source`的属性。`eventLog`并且此消息不会出现；mabby 下次再来。

2）我有以下文件夹层次结构：`images/prod-images`. `images`和`prod-images`目录都包含图像文件。当服务正在运行并且我从`prod-images`文件夹更改图像时，消息会按照我的需要写入日志并更新数据库。但在此事件发生后，服务停止！（我检查了 3 次）。当我重新启动它并再次重复几次时，它会更新数据库，写入日志并在我得到的 3d 时间

```
The [service name] service on local computer started and then stopped. .... 
```

但这不是最好的部分）如果我更改`images`目录中的图像，我可以多次执行并且服务不会停止。（只有来自`images/prod-images`的图像绑定到数据库中的条目）。

那么，mabbe 这个特性在某种程度上是指数据库访问吗？

**编辑 2：**在 Visual Studio 中我`DEBUG -> Attach to Process`用来调试服务。我设置了断点并更改了图像。事件处理程序第一次完美执行：更新数据库并写入日志消息。但是我继续按 F11（Step Into），这个事件处理程序第二次执行。在线上

```
var productId = Convert.ToInt32(Regex.Match(e.Name, @"\d+").Value); 
```

我得到“`FormatException`未处理”。在此之后我停止调试并且服务停止！就是这样：异常发生在事件处理程序中。

你知道它为什么第二次执行吗？谢谢！

**PS**我已经提交了 Davut Gürbüz 的答案，因为他为我指出了正确的方向。
**无论如何，请查看我自己解释实际问题的答案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:02:21.893

如果你得到启动-停止错误，这意味着你在构造函数中有错误。

在你的ctor中放一个try catch。您可以将错误记录到 catch 块中的 eventlog 中。

除此之外，我创建了一个 main 方法并将 win 服务作为控制台应用程序启动。如果我在我的主要方法中获得一个服务实例，我也可以调试它。

```
//You should select Console Application from Application properties
static void Main(string[] args)
    {
        MyWindowsService service = new MyWindowsService();

        if (Environment.UserInteractive)
        {
            service.OnStart(args);
            Console.WriteLine("Press any key to stop program");
            Console.Read();
            service.OnStop();
        }
        else
        {
            ServiceBase.Run(service);
        }

    } 
```

希望有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:12:38.407

`fileSystemWatcher1_Changed`事件处理程序方法执行两次的原因是因为我正在监视文件`images`夹包含的子目录。这个事件处理程序正在监视所有`LastWrite`事件。

因此，当我更改`images/prod-images`目录中的图像时，此处理程序会对图像更改以及文件夹更改做出反应。

在这种情况下，我可以在更新数据库时更改监视路径`prod-images`或插入`if`语句。

这样一个愚蠢的错误花了我几天时间才发现））

# paypal - 如何在使用 PayPal 购买和重定向后使用 IPN/PDT 显示收据和数字和/或可下载产品

> ID：15072076
> 
> 赞同：0
> 
> 时间：2013-02-25T16:52:28.820
> 
> 标签：paypal, paypal-ipn, eclipse-pdt

我有一个网上商店：energyshop.se，我已经成功地在 PayPal 上设置了一个沙盒帐户，并创建了一个买家和一个卖家帐户，创建了一个按钮，我在我的网站上（从卖家帐户）实现了这个按钮，我设法使通过我的买家帐户付款，并被重定向到 energyshop.se/tack。

到目前为止一切顺利，现在我想知道如何在用户被重定向时到达 IPN/PDT 发送的“产品 ID”？如何使用该支架显示文件以供下载或仅用于播放/收听？保存收据信息的持有人/变量是什么？我想说例如当返回 /tack 以显示收据，然后显示可下载的项目。

任何帮助都是非常受欢迎的，我已经在这个网站上工作了很长时间，只是希望它完成，它也是为客户服务的。

我试图做这样的事情（我在我的thankyoupage上使用wordpress）：

```
<div id="receiptform">
<form method=post action="https://www.paypal.com/cgi-bin/webscr"> 
<input type="hidden" name="cmd" value="_notify-synch"> 
<input type="hidden" name="tx" value="TransactionID"> 
<input type="hidden" name="at" value="P0d7_HmQSAuXh9r-7hG1Rzf_npI2LaFgYHQJyWUsjQHg7WhZARqs3sq6IW4"> 
<input type="submit" value="PDT"> 
</form>
</div> 
```

但这只是显示一个按钮 PDT，单击时显示 FAIL ERROR: 4002 如何编辑它以在 tx 中很好地显示内容？

另外，我可以说“它”在工作，因为在地址字段中，当重定向到感谢页面时，它会显示：[http ://energyshop.se/tack/?tx=9LJ24270G46097059&st=Completed&amt=10.00&cc=USD&cm=&item_number =1](http://energyshop.se/tack/?tx=9LJ24270G46097059&st=Completed&amt=10.00&cc=USD&cm=&item_number=1)这让我认为它 A) 已完成并且 B) 得到了我需要的信息。现在的问题是我如何呈现这些数据？我应该做些什么？我...的 php 脚本？我似乎找不到任何例子，只是 IPN/PDT 变量的定义，但如果我不知道在哪里放置或使用它，这对我没有帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:27:53.867

您可能希望按原样使用 PDT。当您收到 tx 变量等返回时，您必须发回 PayPal 以验证所有信息。然后，一旦您验证了帖子，PayPal 就会将所有变量发送回您的脚本。[您可以在https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNPDTAnAlternativetoIPN)找到更多关于 PDT 如何工作的信息。该站点上还有一些示例脚本以及[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216627](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216627)和[https://paypaltech.com/PDTGen/](https://paypaltech.com/PDTGen/)

# ios - 从顶部的 HeaderView 部分获取 NSString

> ID：15072079
> 
> 赞同：1
> 
> 时间：2013-02-25T16:52:38.977
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我想从那一刻顶部的 HeaderView 表中获取一个 NSString 。因为我想在 ScrollViewDidScroll 中实现它，所以当标题视图发生变化时，一个标签会发生变化。

在网上没有找到任何线索如何做到这一点

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:25:50.843

没有预定义的方法可以让您获得顶部。有一个技巧可以实现它。首先获取所有可见单元格的 indexPath。

```
NSArray *visible = [tableView indexPathsForVisibleRows];

NSIndexPath *indexpath = (NSIndexPath*)[visible objectAtIndex:0]; 
```

现在您可以通过 indexpath.section 获取节值。获取此部分后，您可以从数据数组中获取此部分的字符串。

# qt - 无法构建 C++ 项目

> ID：15072080
> 
> 赞同：5
> 
> 时间：2013-02-25T16:52:40.853
> 
> 标签：qt, visual-c++, msbuild, qt4, qt5

我正在构建一个从以前的开发人员那里获得的 C++ 项目。当我尝试编译它时，我收到了这个错误（我使用的是 VS2012 Professional）：

```
 \bin\rcc.exe -name resources resources.qrc -o debug\qrc_resources.cpp
 1>  Moc'ing aboutdialog.h...
 1>  The system cannot find the path specified.
 1>  Moc'ing action.h...
 1>  UIC aboutdialog.ui
 1>  The system cannot find the path specified.
 1>  UIC mainwindow.ui
 1>  The system cannot find the path specified.
 1>  RCC resources.qrc
 1>  The system cannot find the path specified.
 1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.CppCommon.targets(172,5): error MSB6006: "cmd.exe" exited with code 3.
 1>Done executing task "CustomBuild" -- FAILED.
 1>Done building target "CustomBuild" in project "sv.vcxproj" -- FAILED. 
```

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:58:52.503

The project is using Custom Build Steps that depend on the Qt library and its tools. You need to at least download and install Qt (most likely version 4.8, Qt 5 was just released), and maybe also the Qt add-on that is available for Visual C++.

[http://qt-project.org/downloads](http://qt-project.org/downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T18:53:25.243

我有同样的问题，但我的情况有点不同：

1.  VS2015（已安装QT插件）
2.  QT SDK 安装和配置

这个问题发生在我身上，因为我在我的解决方案文件夹上做了一个“git clean -fdx”，这删除了所有的 moc 文件，因为它们被添加到了 gitignore。

要重新生成 MOC 文件，我必须：

1.  关闭VS2015
2.  重新打开解决方案
3.  重建

完成此操作后，moc 文件重新生成，我可以正确构建，但应用程序无法启动。

# mysql - 对 WHERE 语句中的 OR 进行全表扫描

> ID：15072093
> 
> 赞同：2
> 
> 时间：2013-02-25T16:53:19.820
> 
> 标签：mysql, sql, database, explain

所以我有这个查询

```
EXPLAIN SELECT r.* FROM r_table r
        LEFT JOIN f_table f ON f.id = r.fid
        LEFT JOIN f_table ff ON r.fid = 0 AND r.type = 'f' AND r.id = ff.id
      WHERE (r.fid = 0 AND ff.cid = 421563) OR (r.fid <> 0 AND f.cid = 421563); 
```

它正在对表 r 执行全表扫描

解释输出：

```
1   SIMPLE      r   ALL Index1              2314    Using where
1   SIMPLE      f   eq_ref  PRIMARY PRIMARY 4   r.fid   1   Using where
1   SIMPLE      ff  eq_ref  PRIMARY PRIMARY 4   r.id    1   Using where 
```

如何修改此查询以使其不执行全表扫描？我知道我可能可以使用 UNION ，但除非必要，否则我宁愿不使用 UNION 。

## 编辑

将查询重写为 UNION 确实有效……这是 UNION 查询

```
EXPLAIN SELECT r.* FROM r_table r
        LEFT JOIN f_table f ON r.fid <> 0 AND f.id = r.fid
      WHERE f.cid = 421563
UNION SELECT r.* FROM r_table r
        LEFT JOIN f_table ff ON r.fid = 0 AND r.obj_type = 'f' AND r.obj_id = ff.id
      WHERE ff.cid = 421563; 
```

并解释输出

```
'2', 'UNION', 'ff', 'ref', 'PRIMARY,cid', 'cid', '4', 'const', '2', 'Using where; Using index'
'2', 'UNION', 'r', 'ref', 'Index1,obj_id_type', 'Index1', '13', 'const,const,ff.id', '1', 'Using where'
'1', 'PRIMARY', 'f', 'ref', 'PRIMARY,cid', 'cid', '4', 'const', '2', 'Using where; Using index'
'1', 'PRIMARY', 'r', 'ref', 'Index1', 'Index1', '4', 'f.id', '1', ''
NULL, 'UNION RESULT', '<union1,2>', 'ALL', NULL, NULL, NULL, NULL, NULL, '' 
```

但是再一次，我宁愿不为此做一个 UNION

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:31:19.810

只需将 ff.cid 和 f.cid 上的过滤器从 where 子句移动到连接。事实上，由于您正在执行左连接，因此无论如何您都必须这样做。

# excel - 在 Excel VBA 中保存单个工作表

> ID：15072098
> 
> 赞同：1
> 
> 时间：2013-02-25T16:53:34.097
> 
> 标签：excel, vba

目前我们有一个 Excel VBA 应用程序，它由 25-30 个 Excel 表格组成（所有这些表格都隐藏起来，我们对其进行后台处理并将其显示到 VBA 表单 UI），并且我们已经使用 VB 表单开发了一个 UI。但是我们面临的问题是每当我们使用以下代码单击保存按钮时：

`ThisWorkbook.Save`

但这会保存整个工作簿而不是单个工作表，因此即使我们在单个工作表中进行更改，它也会保存整个工作簿，并且这种保存处理会非常慢（因为它需要保存所有包含大量数据的 Excel 工作表，即使没有变化）。

我的问题是有什么方法可以保存“在特定的 excel 表中只保存一个表”而不是整个 excel 文件？

**注意：**我是一名 Java 开发人员，之前我曾在 VBA 上工作过，但那是几年前的事了，我已经忘记了一点。任何指导将不胜感激。或任何有关如何处理这种情况的指示将不胜感激。如果您需要更多信息，请告诉我，我可以编辑这个问题。

**我已经尝试过什么？**我从昨天开始做了很多研究，我在以前的问题中搜索了 SO，但没有得到任何有用的信息。根据我的研究，它说我们不能这样做。我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:01:28.580

最简洁的答案是不。您不能一次保存一个工作表。

您可能想尝试减少工作簿中的数据量。尝试将数据存储在多个工作簿中，并在需要时打开该特定工作簿，进行所需的更改，然后将其关闭。

如果有必要一次访问所有数据，请考虑使用 access 或其他数据库。

工作表也可能具有“空白数据”。不包含任何内容但 excel 认为他们这样做的单元格在保存时会尝试保存超出需要的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:07:09.920

假设它是您要保存的活动工作表，那么您可以执行以下操作：

```
ActiveSheet.Copy
ActiveWorkbook.Close True, "path" 
```

这会复制活动工作表，从而创建一个新工作簿，该工作簿将成为活动工作簿。然后只需调用它的 close 方法并给它一个文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T23:06:10.200

我认为您应该考虑将您的应用程序拆分为多个工作簿：

1.  包含所有逻辑、用户表单和编程代码的工作簿。该工作簿处理所有其他工作簿以及它的显示。潜在地，这甚至可能是一个“应用程序特定插件”，它保持休眠状态，但一旦打开它的任何后续工作簿就会激活。对于这种架构方法，请查看[此链接](http://www.tebyan.net/newindex.aspx?pid=31159&BookID=22107&PageIndex=21&Language=3)中的“应用程序特定插件”部分。

    此工作簿/加载项还可以隐藏其他工作簿，以便用户不会注意到它是多个工作簿。
2.  一个或多个数据工作簿：根据数据相互关联的程度，您可以将其分开，例如在包含大型数据库的“销售数据”工作簿中，作为包含所有较小数据（例如产品或商店）的“基础数据”工作簿表）。

这样，您可以减少对“相关”工作表的保存。然而，这当然需要大量的重新编程——但值得付出努力，例如它还允许提供更新/错误修复，而无需在版本之间传输数据，因为您只需要通过编程分发文件逻辑。:-)

# javascript - 如何在 Javascript Rows, Cols 中添加小数点。变量

> ID：15072100
> 
> 赞同：0
> 
> 时间：2013-02-25T16:53:35.133
> 
> 标签：javascript

嗨，我有这个 javascript 表，我想知道是否有人可以帮助解释如何在其中添加小数点 (2)。任何帮助都感激不尽。

```
//Total Expenditure - Total
document.write ('<tr align="center"><td>' + row14col1var + '<\/td><td>' + row14col2var + '<\/td><td>' + row14col3var + '<\/td><td>' + row14col4var + '<\/td><td>' + row14col5var + '<\/td><td>' + row14col6var + '<\/td><td>' + row14col7var + '<\/td><td>' + row14col8var +'<\/td><td>' + row14col9var + '<\/td><td>' + row14col10var + '<\/td><td>' + row14col11var + '<\/td><td>' + row14col12var + '<\/td><td>' + row14col13var + '<\/td><td>' + row14col14var +'<\/td><\/tr>');

var row14col1var = '<b>Total Expenditure</b>';

var row14col2var = ( Number(row4col2var) + Number(row5col2var) + Number(row6col2var)+   Number(row7col2var)+ Number(row10col2var)+ Number(row11col2var)+ Number(row13col2var));

var row14col3var = ( Number(row4col3var) + Number(row5col3var) + Number(row6col3var) + Number(row7col3var)+ Number(row10col3var)+ Number(row11col3var)+ Number(row13col3var));

var row14col4var = ( Number(row4col4var) + Number(row5col4var) + Number(row6col4var)+ Number(row7col4var)+ Number(row10col4var)+ Number(row11col4var)+ Number(row13col4var));

var row14col5var = ( Number(row4col5var) + Number(row5col5var) + Number(row6col5var)+ Number(row7col5var)+ Number(row10col5var)+ Number(row11col5var)+ Number(row13col5var));

var row14col6var = ( Number(row4col6var) + Number(row5col6var) + Number(row6col6var)+ Number(row7col6var)+ Number(row10col6var)+ Number(row11col6var)+ Number(row13col6var));

var row14col7var = ( Number(row4col7var) + Number(row5col7var) + Number(row6col7var)+ Number(row7col7var)+ Number(row10col7var)+ Number(row11col7var)+ Number(row13col7var));

var row14col8var = ( Number(row4col8var) + Number(row5col8var) + Number(row6col8var)+ Number(row7col8var)+ Number(row10col8var)+ Number(row11col8var)+ Number(row13col8var));

var row14col9var = ( Number(row4col9var) + Number(row5col9var) + Number(row6col9var)+ Number(row7col9var)+ Number(row10col9var)+ Number(row11col9var)+ Number(row13col9var));

var row14col10var = ( Number(row4col10var) + Number(row5col10var) + Number(row6col10var)+ Number(row7col10var)+ Number(row10col10var)+ Number(row11col10var)+ Number(row13col10var));

var row14col11var = ( Number(row4col11var) + Number(row5col11var) + Number(row6col11var)+ Number(row7col11var)+ Number(row10col11var)+ Number(row11col11var)+ Number(row13col11var));

var row14col12var = ( Number(row4col12var) + Number(row5col12var) + Number(row6col12var)+ Number(row7col12var)+ Number(row10col12var)+ Number(row11col12var)+ Number(row13col12var));

var row14col13var = ( Number(row4col13var) + Number(row5col13var) + Number(row6col13var)+ Number(row7col13var)+ Number(row10col13var)+ Number(row11col13var)+ Number(row13col13var));

var row14col14var = ( Number(row4col14var) + Number(row5col14var) + Number(row6col14var)+ Number(row7col14var)+ Number(row10col14var)+ Number(row11col14var)+ Number(row13col14var)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:23:52.590

我将忽略您的代码中的众多设计问题并回答您的问题。如果要在每个数字的最后两位前添加小数点，只需使用`toFixed(2)`：

```
var row14col2var = (Number(row4col2var) + ... snip ...).toFixed(2); 
```

# ios - 自定义对象初始化返回null

> ID：15072102
> 
> 赞同：1
> 
> 时间：2013-02-25T16:53:35.750
> 
> 标签：ios, objective-c, xcode, ipad, ios6

这是我的自定义类：

类A.h

```
@interface ClassA : NSObject<RKRequestDelegate>{
    NSString *uri;
    NSString *folderUri;
    NSInteger idFolder;
    NSString *kind;
    bool isMine;

    CustomUser *owner;

    NSMutableArray *usersAdministrators;
    NSMutableArray *usersContributors;
    NSMutableArray *usersReaders;

    NSString *visibility;
    NSString *name;
    NSString *description;

    NSMutableArray *comments;
}

@property (nonatomic,copy) NSString *uri;
@property (nonatomic,copy) NSString *folderUri;
@property (nonatomic,assign) NSInteger idFolder;
@property (nonatomic,copy) NSString *kind;
@property (nonatomic,assign) bool isMine;

@property (retain) DMIUser *owner;

@property (nonatomic,copy) NSMutableArray *usersAdministrators;
@property (nonatomic,copy) NSMutableArray *usersContributors;
@property (nonatomic,copy) NSMutableArray *usersReaders;

@property (nonatomic,copy) NSString *visibility;
@property (nonatomic,copy) NSString *name;
@property (nonatomic,copy) NSString *description;

@property (nonatomic,copy) NSMutableArray *comments;

@end 
```

类A.m

```
@implementation ClassA
@synthesize uri,folderUri,idFolder,kind,isMine,owner,usersAdministrators,usersContributors,usersReaders,visibility,name,description,comments;

-(NSString*)description {
    return @"ClassA";
}

@end 
```

非常简单。但是当我尝试创建这个的新实例时，像这样：

```
datas = [NSMutableArray array]; // Tried with [[NSMutableArray alloc] init] => same thing
ClassA *classA = [[ClassA alloc] init];
[datas addObject:classA];
NSLog(@"classA = %@",classA);
NSLog(@"datas = %@",datas); 
```

第一个 NSLog 返回“ClassA”。第二个 NSLog 返回“datas = ()”

这里有什么问题？我总是创建这样的课程，我从来没有遇到过这样的问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:33:34.513

好的，伙计，我发现了问题。这是我的属性：

```
NSString *description; 
```

似乎 iOs 不喜欢那样。它与 NSObject 中的 -description 方法冲突......之后，我在这里发现了一个类似的问题： [Why can't I use "description" as an attribute name for a Core Data entity?](https://stackoverflow.com/questions/4717519/why-cant-i-use-description-as-an-attribute-name-for-a-core-data-entity)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:57:10.730

如果您想在 ClassA 中返回一些值实现方法描述

```
- (NSString *)description {

     return @"ClassA";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:02:38.973

你有你需要的一切。您确定要分配的变量不是弱变量吗？所有委托属性都很弱，因此不保留对象。我的猜测是你正在做这样的事情

```
someObject.delegate = [[ClassA alloc] init];
NSLog(@"%@", someObject.delegate); 
```

因为委托属性是`weak`它不保留变量。

编辑：整个答案假设您使用的是 ARC。如果没有，请忽略。

# google-apps-script - 使用 Google Apps 脚本对跨域访问的联系人 API 进行授权

> ID：15072106
> 
> 赞同：1
> 
> 时间：2013-02-25T16:53:45.517
> 
> 标签：google-apps-script, google-api, google-contacts-api

我正在使用 Contacts API v3 在 Google Apps Script Web 应用程序中工作，以访问域内所有用户的联系人。

到目前为止，我对联系人 API 请求没有任何问题，但我还不知道如何获得跨域的授权以访问任何用户的联系人（除了我）。

我已经尝试过来自 cpanel 的 OAuth 域密钥 - 高级工具，但到目前为止没有任何结果。与域内的其他用户一起尝试时，我收到“请求返回代码 403（禁止）失败”

在此先感谢，福斯托

EDIT-1（3 月 5 日）我现在更近了，但需要一些帮助

我已将 2LO（2 腿 OAuth）与 oauth_signature 和签名请求结合起来，但仍然收到错误 401（客户端错误）！！1。这是我现在正在使用的示例代码。

```
function test_xOAuth() {
  // OAUTH_CONSUMER_SECRET from GApps: control panel > advanced tools > Manage OAuth domain key 
  var domain = Session.getEffectiveUser().getEmail().split("@")[1];
  var xuser = 'fausto@thexs.ca';
  var method = "GET";
  var baseUrl = "https://www.google.com/m8/feeds/groups/default/full";
  var timestamp = getTimestamp();
  var paramsJson = {
    oauth_consumer_key : domain,
    oauth_nonce : getNonce(timestamp),
    oauth_signature_method : "HMAC-SHA1",
    oauth_timestamp : timestamp,
    oauth_version : "1.0"
  };
  var paramsStringArray =  [];
  for (var k in paramsJson) paramsStringArray.push(k + '="' + paramsJson[k] + '"');
  var paramsString = paramsStringArray.join("&") + '&xoauth_requestor_id=' + xuser;
  var signatureBaseString = method +"&"+ encodeURIComponent(baseUrl) +"&"+ encodeURIComponent(paramsString);
  var signatureBytes = Utilities.computeHmacSha256Signature(signatureBaseString, OAUTH_CONSUMER_SECRET);
  var signature = Utilities.base64Encode(signatureBytes);
  var xoauthString = 'OAuth ' + paramsStringArray.join(",") + ',oauth_signature="' + signature + '"';
  var options = {
    method : method,
    headers : {"Authorization" : xoauthString}
  }
  var url = baseUrl + '?xoauth_requestor_id=' + 'fausto@thexs.ca';
  var response = UrlFetchApp.fetch(url, options);
  var responseHeader = response.getHeaders();
  var responseText = response.getContentText();
  return HtmlService.createHtmlOutput(responseText);
}

var getTimestamp = function(){
  return (Math.floor((new Date()).getTime() / 1000)).toString()
}

var getNonce = function(timestamp){
  return timestamp + Math.floor( Math.random() * 100000000)
} 
```

提前感谢您的帮助！福斯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:55:07.223

首先，您应该在计算签名之前正确地对所有参数进行 URL 编码。其次，去掉引号，你真的不需要它们，尤其是在基本字符串中。第三，您应该使用您指定的签名方法，即 HMAC-SHA1。最后但同样重要的是，尽管您没有使用 OAuth 令牌，但您仍然需要在加密密钥中包含“&”。

这是正常工作的代码：

```
 var OAUTH_CONSUMER_SECRET = 'you secret goes here';
  var domain = 'domain.tld';
  var username = 'test.user';
  var xuser = encodeURIComponent(username+'@'+domain);
  var method = "GET";
  var baseUrl = "https://www.google.com/m8/feeds/groups/default/full";
  var timestamp = Math.round(new Date().getTime() / 1000);
  var paramsJson = {
    oauth_consumer_key : domain,
    oauth_nonce : timestamp,
    oauth_signature_method : "HMAC-SHA1",
    oauth_timestamp : timestamp,
    oauth_version : "1.0"
  };
  var paramsStringArray =  [];
  for (var k in paramsJson) paramsStringArray.push(k + '=' + encodeURIComponent(paramsJson[k]));
  var paramsString = paramsStringArray.join("&") + "&xoauth_requestor_id="+xuser;
  var signatureBaseString = method +"&"+ encodeURIComponent(baseUrl) +"&"+ encodeURIComponent(paramsString);
  var signatureBytes = Utilities.computeHmacSignature(Utilities.MacAlgorithm.HMAC_SHA_1, signatureBaseString, OAUTH_CONSUMER_SECRET+'&');

  var signature = encodeURIComponent(Utilities.base64Encode(signatureBytes));
  var xoauthString = 'OAuth ' + paramsStringArray.join(", ") + ', oauth_signature="' + signature + '"';

  var options = {
    method : method,
    headers : {authorization: xoauthString}
  }
  var url = baseUrl + '?xoauth_requestor_id=' + xuser;
  var response = UrlFetchApp.fetch(url, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:48:26.713

我没有像您在这里提到的那样执行对联系人的访问，但我已经设法执行类似的操作来充当域用户并访问用户 Google 驱动器，对此的一个限制因素是能够做你是什么尝试做的是您必须成为您 Google 域的超级管理员，并且我必须使用的访问级别是通过 URL 请求和 REST API，您可能还需要查看[Google Domain Shared Contacts API](https://developers.google.com/google-apps/domain-shared-contacts/)才能管理您在 Google 域中的共享联系人，并将每个人的个人联系人留给他们自己管理

# javafx - 应用程序 javafx 的视图

> ID：15072108
> 
> 赞同：1
> 
> 时间：2013-02-25T16:53:51.910
> 
> 标签：javafx, stage, dimension, scene

我在谷歌搜索了几个小时，但我仍然找不到正确的答案，所以我有最后一次机会来这里询问。

我正在制作学年 JAVA FX 项目。我正在使用 NetBeans。

我有一点可以在我拥有的应用程序上看到。问题是：我想要一张大地图（背景），我需要能够随着我的视线移动。例如向右移动 50 (x)。

我有使用 Stage、Scene、StackPane 的应用程序。

我听说过一些关于 Java 中的Dimensions，但我不能在javafx 应用程序中使用它。有没有类似的东西，我可以在我的应用程序中使用什么？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:24:32.970

我认为您要求的是在背景中`Scene`带有地图（表示为`Image`）和分层在地图顶部的控件以允许在某些位置与地图进行交互。你的问题有点不清楚，所以我不确定这是否是你要问的。

如果是这样，这里有一些[示例代码](https://gist.github.com/jewelsea/5032398)来实现它。

```
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

/** Constructs a scene with a pannable Map background. */
public class PannableView extends Application {
  private Image backgroundImage;

  @Override public void init() {
    backgroundImage = new Image("https://www.narniaweb.com/wp-content/uploads/2009/08/NarniaMap.jpg");
  }

  @Override public void start(Stage stage) {
    stage.setTitle("Drag the mouse to pan the map");

    // construct the scene contents over a stacked background.
    StackPane layout = new StackPane();
    layout.getChildren().setAll(
      new ImageView(backgroundImage),
      createKillButton()
    );

    // wrap the scene contents in a pannable scroll pane.
    ScrollPane scroll = createScrollPane(layout);

    // show the scene.
    Scene scene = new Scene(scroll);
    stage.setScene(scene);
    stage.show();

    // bind the preferred size of the scroll area to the size of the scene.
    scroll.prefWidthProperty().bind(scene.widthProperty());
    scroll.prefHeightProperty().bind(scene.widthProperty());

    // center the scroll contents.
    scroll.setHvalue(scroll.getHmin() + (scroll.getHmax() - scroll.getHmin()) / 2);
    scroll.setVvalue(scroll.getVmin() + (scroll.getVmax() - scroll.getVmin()) / 2);
  }

  /** @return a control to place on the scene. */
  private Button createKillButton() {
    final Button killButton = new Button("Kill the evil witch");
    killButton.setStyle("-fx-base: firebrick;");
    killButton.setTranslateX(65);
    killButton.setTranslateY(-130);
    killButton.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        killButton.setStyle("-fx-base: forestgreen;");
        killButton.setText("Ding-Dong! The Witch is Dead");
      }
    });
    return killButton;
  }

  /** @return a ScrollPane which scrolls the layout. */
  private ScrollPane createScrollPane(Pane layout) {
    ScrollPane scroll = new ScrollPane();
    scroll.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);
    scroll.setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);
    scroll.setPannable(true);
    scroll.setPrefSize(800, 600);
    scroll.setContent(layout);
    return scroll;
  }

  public static void main(String[] args) { launch(args); }  
} 
```

![可平移](../Images/ffa41f0f6e6c00519e17530c09403794.png)

例如，使用鼠标（或者可能是触摸命令或触控板滚动手势——尽管我没有触摸屏或触控板来测试它）来拖动地图。点击按钮“杀死邪恶的女巫”。

该解决方案通过以下方式起作用：

1.  创建一个`ImageView`来保存背景图。
2.  `StackPane`在堆叠的背景中构建场景内容`ImageView`。
3.  将场景包裹在场景`ScrollPane`大小的范围内。
4.  在 上设置属性`ScrollPane`以使其可平移。

# java - Google App Engine 和 Android（OAuth、C2DM 或云消息传递）

> ID：15072114
> 
> 赞同：5
> 
> 时间：2013-02-25T16:54:02.713
> 
> 标签：java, android, google-app-engine, google-cloud-endpoints

该板的许多用户都想开发一个以 Google App Engine 作为后端服务器的 Android 应用程序。我需要用户使用他/她的 Google 帐户登录并将图像上传到 GAE 服务器。这是我到目前为止所做的：

首先，我找到[了这个](https://developers.google.com/eclipse/docs/appengine_connected_android)关于 Android、GAE 和**C2DM 消息传递**的网站。我努力遵循教程，学习了开发 android 应用程序以及如何在 GAE 中创建 Java 服务器，但事实证明 C2DM 现在已被弃用！

然后我开始学习带有**OAuth**授权的 Java 后端和一个名为**Cloud Endpoints**的 GAE“实验性”功能，它应该让我在处理 Android + Google App Engine 时更轻松。

我的问题是：**将 Android 与 GAE、授权和 blobstore 上传功能连接起来的最佳方式是什么？**使用 OAuth + Cloud Endpoints、C2DM 消息传递或我未提及的任何其他接口技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T21:15:20.413

正如您提到的，Google Endpoints 是要走的路，C2DM 已被弃用 Cloud Endpoints 使得创建 Android api 与 Android 客户端通信变得非常容易。您实际上不必对云端点做太多事情，只需按照此[oAuth 教程编写应用程序即可](https://developers.google.com/appengine/docs/java/oauth/overview)

准备好应用程序后，只需注释代码或使用 eclipse 插件自动完成即可。

从[文档](https://developers.google.com/appengine/docs/java/endpoints/overviewEngine%20backend%20via%20the%20Endpoint.)中引用开发过程如下：

**使用 Endpoints 开发应用程序的一般工作流程是：**

1.  首先编写您的 App Engine 后端代码。
2.  注释您的 App Engine 后端代码，以便可以从中生成类和客户端库。（或者，使用 Google Plugin for Eclipse，它会为您自动注释。）
3.  使用 endpoints.sh 实用程序生成客户端库。（或者，使用 Google Plugin for Eclipse 生成客户端库。）
4.  通过 Endpoint 调用 App Engine 后端时，使用客户端库编写您的 android 客户端应用程序。

这是github 上的一个[有效的 java 示例。](https://github.com/GoogleCloudPlatform/appengine-endpoints-tictactoe-java)

另请记住，Endpoints 是一项实验性功能，这意味着它处于最前沿，因此在构建应用程序时请记住这一点。

希望这会有所帮助，祝你好运！

# .htaccess - Htaccess 和 htpasswd 身份验证失败

> ID：15072121
> 
> 赞同：0
> 
> 时间：2013-02-25T16:54:39.790
> 
> 标签：.htaccess, .htpasswd

我有以下代码来保护我的应用程序：

.ht 访问：

```
AuthType Basic
AuthName "My Protected Area"
AuthUserFile .htpasswd
Require valid-user 
```

.htpasswd：

```
username:$apr1$Am/5PMEt$JofEYwKBM8rhEnsoLndir/ 
```

.htpasswd 文件与 .htaccess 文件位于同一目录中。

它确实要求我进行身份验证，但随后给了我一个 500 服务器错误。我刚刚使用[了这个工具](http://www.htaccesstools.com/htaccess-authentication/)，所以我想知道我可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:10:43.257

尝试更改 .htpasswd 以使用从 / 开始的完整路径，并改用此工具：[http ://www.askapache.com/online-tools/htpasswd-generator/](http://www.askapache.com/online-tools/htpasswd-generator/)

```
AuthType Basic
AuthName "My Protected Area"
AuthUserFile /var/www/public_html/full/path/to/.htpasswd
Require valid-user
Satisfy All 
```

否则听起来错误是由其他问题引起的。可能 1 的 2:

1.  .htaccess 或 .htpasswd 文件的权限不正确
2.  还有一些其他错误，例如重写或 .htaccess 或 php 错误中的某些内容

您需要使此错误再次发生，然后查看您的 /var/log/httpd/error_log 文件（或类似的名称），它将告诉您 500 错误的原因。

# java - 发布进度？

> ID：15072123
> 
> 赞同：1
> 
> 时间：2013-02-25T16:54:53.177
> 
> 标签：java, android, eclipse

为什么根据eclipse这无效：

```
 protected String doInBackground(String... arg0) {

            publishProgress(10);  

            if(true){
                //validate with DB
            }else{
                //send to registration screen
            }

            return null;
        }

        //Update Progress       
        protected void onProgressUpdate(Integer... values) {

            mProgress.setProgress(values[0]);

        } 
```

Eclipse 是这样说的：

```
publishProgress(10);  <<publishProgress(Void) is not acceptable for type publishProgress(Int) 
```

然而，这里的其他问题显示它以这种确切的方式使用。是 API 的变化吗？我真的很想给 publishProgress 传递一个字符串和整数。这可能吗：

```
publishProgress("Starting Validation", 10); 
```

TIA

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T16:57:35.630

确保您在泛型参数中声明了正确的类型，例如：

```
new AsyncTask()<Void, Integer, Void>{ ... 
```

* * *

[`AsyncTask<Params, Progress, Result>`](http://developer.android.com/reference/android/os/AsyncTask.html)：

*   **Params：**[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground(Params...)) 's 和[`execute()`](http://developer.android.com/reference/android/os/AsyncTask.html#execute(Params...))var-args 参数的类型。
*   **进度：**[`publishProgress()`](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress(Progress...)) 's 和[`onProgressUpdate()`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate(Progress...))' 的 var-args 参数的类型。
*   **结果：**[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground(Params...)) '返回值的类型， [`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute(Result))'参数，[`onCancelled()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground(Params...))'参数，[`get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get())'返回值。

# linux - “git add”返回“致命：外部存储库”错误

> ID：15072125
> 
> 赞同：33
> 
> 时间：2013-02-25T16:54:54.937
> 
> 标签：linux, git, repository

我刚刚进入了美妙的 git 世界。我必须提交我对我的程序所做的一系列更改，这些更改位于一个名为`/var/www/myapp`.

我创建了一个新目录`/home/mylogin/gitclone`。从这个目录中，我`git clone`对公共回购做了一个，我能够得到最新的副本。

我现在正试图弄清楚如何将我的工作文件夹 ( `/var/www/myapp`) 中的所有文件“签入”到主存储库。

从`/home/mylogin/gitclone`，我尝试过，`git add /var/www/myapp`但我收到一个错误，即我尝试添加的文件夹位于存储库之外。

你能给我一些关于我做错了什么的指示吗？另外，我想添加所有内容，无论它是否与主人不同。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T16:57:55.007

首先在克隆文件夹中你可以创建一个分支（所以主人保持不变）

```
git branch [branch_name] 
```

之后，只需将您想要的文件从旧文件夹复制到克隆文件夹。

完成后，只需添加/提交您的更改并将[您的分支合并](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)到“主”分支。它看起来像这样：

```
git add .
git commit -m "Comments"
git checkout master
git merge [new_branch] 
```

[从 GitHub](http://try.github.com/levels/1/challenges/1)尝试本教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T16:59:09.100

您必须将所有文件从 /var/www/myapp 移动到 /home/mylogin/gitclone ，然后`git add .`执行`git commit -m "Your message"`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T17:01:48.980

要将某些文件或文件夹添加到您的存储库，它们必须位于您使用`git clone`. 因此，将您的应用程序复制/粘贴到您的本地 git 文件夹中，然后进入它并执行`git add *`，然后您将能够提交到服务器`git commit -m 'message'`并最终将更改推送到服务器`git push`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-05T14:37:19.270

当升级到 git 版本 2.12.2 出现该错误时，我注意到我添加了具有完整路径的文件，例如：

```
git add c:\develop\project\file.text 
```

删除完整路径后，它开始工作，例如：

```
git add file.text 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T16:57:55.980

那是因为您正在对里面的东西进行版本控制，*而*`/home/mylogin/gitclone`git 会跟踪该文件夹中的所有内容。您无法跟踪此存储库之外的其他文件夹。

 *一个解决方案可能是创建一个子模块，或者使用符号链接使用`ln -s`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-23T03:24:14.920

好的，这个错误出现在我身上，因为**我将项目从一台计算机移动到另一台计算机**。
所以 git 无法计算出我的全局 git`user.name`和`user.email`

我打开命令提示符并从以前的计算机中指定了我的旧 git user.name 和 user.email。请运行以下命令，它应该被修复。

```
cd pathToMyProjectDirectory
git config user.name "myName" 
git config user.email "myEmail" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-25T17:56:49.547

Git 只跟踪根文件夹中的文件和文件夹，包括 .git 目录和根文件夹中的子文件夹。您尝试添加的文件夹不在 git 的范围内。

您真正想做的是首先`git checkout -b myapp`根据您克隆的存储库的主分支创建并签出一个新分支。然后，您实际上会复制所有文件并使用`git commit -a -m "Short descriptive name about what you did"`. `-a`您传递给的参数`git commit`用于包含对存储库所做的所有更改，`-m`并将提交消息包含在实际命令中。之后，如果您对主存储库具有写入权限，您可以`push`返回主存储库，也可以将其推送到您自己的公共存储库，或者根本不推送它。

我上面描述的几乎是 git 的基础知识。尝试阅读这[本书](http://git-scm.com/book)，它的描述性很强。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-04T12:50:28.437

也许有人遇到了和我一样的麻烦：在我的情况下，这个错误是在使用 husky（提交钩子）时抛出的[https://github.com/typicode/husky](https://github.com/typicode/husky)

由于编码，这只是一个错误。我的源位于包含特殊字符（“ö”）的目录中

似乎哈士奇使用“git add”和源的绝对路径在这一点上以某种方式失败

我重命名了路径，它运行良好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-03T16:43:43.033

当 .gitignore 文件中列出文件名时，也会出现此消息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-08T04:06:31.853

我的情况是 git 存储库的路径具有符号链接，当将文件添加到“/home/abc/GIT_REPO/my_dir/my_file”时，git 会抛出此错误。而“/home”实际上是一个指向“/devhome”的软链接。

当我尝试调试这个案例时，[code ninja给了我一些启发。](https://stackoverflow.com/a/15072199/1754879)

`readlink -f /home/abc/GIT_REPO`所以我尝试在运行添加命令之前使用命令获取目标目录。

然后一切都像魅力一样！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-18T06:57:20.130

[我在带有maven-release-plugin](https://maven.apache.org/maven-release/maven-release-plugin/index.html)的 Windows 框中遇到了这个问题。该插件尝试使用绝对路径添加文件，我注意到 Git add 命令中的路径以大写开头，`D:`而`Working directory:`日志行中的路径以小写开头`d:`

我已添加`core.ignorecase = true`到 Git 设置，问题就消失了。*

# jsf-2 - Primefaces裁剪转换器错误

> ID：15072129
> 
> 赞同：0
> 
> 时间：2013-02-25T16:55:03.067
> 
> 标签：jsf-2, primefaces

我正在使用以下代码并尝试裁剪从 bean 获取其值的图像：

```
 <p:panelGrid columns="2">
            <p:row>
                <p:column>
                    <p:imageCropper id="imageCropperId" value="#{imageCropperBean.croppedImage}"
                        image="#{imageCropperBean.newImageName}">
                    </p:imageCropper>
                </p:column>
                <p:column>Bild innerhalb des Rahmens positionieren</p:column>
                <p:column>
                    <p:graphicImage id="localCroppedImage" value="#{imageCropperBean.newImageName}" />
                </p:column>
            </p:row>
            <p:row>
                <p:column colspan="3">
                    <p:commandButton value="Crop" actionListener="#{imageCropperBean.crop}"
                        update=":growl imageCropperId localCroppedImage" />
                </p:column>
            </p:row>
        </p:panelGrid> 
```

我总是收到错误：**{0}：发生转换错误。**内部咆哮，由于：

```
value="#{imageCropperBean.croppedImage}" 
```

声明中的转换器属性说：

> 为组件定义转换器的 el 表达式或文字文本。当它是一个 EL 表达式时，它被解析为一个转换器实例。如果它是静态文本，则必须引用转换器 ID。

但是 EL 表达式是在 String 处计算的。我该怎么办？如果我把一个普通的字符串指向一个现有的图像，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:46:26.423

我已经设法解决了这个错误。

对于那些会遇到同样问题的人，基本上会发生这种情况

*   Either errors are being thrown during cropping phase (e.g. files not found or if the *cropped image is not relative to the original one*)
*   Either the value which is evaluated from EL `image="#{imageCropperBean.newImageName}"` is evaluated to null, while trying to skip the cropping (I couldn't suceed with required="true" so I used rendering="someCondition")

# javascript - Sinon中如何过滤请求

> ID：15072136
> 
> 赞同：9
> 
> 时间：2013-02-25T16:55:21.760
> 
> 标签：javascript, jasmine, sinon

我正在 Jasmine 中为 Backbone 应用程序编写单元测试。当然，我在测试中使用了 Sinon。但现在我有问题。我正在为登录屏幕编写测试，我需要模拟服务器响应 - 因为服务器工作得非常糟糕。现在我的代码看起来：

```
describe('Login', function(){
     it('Should simulate server response', function(){
        server = sinon.fakeServer.create();
        server.respondWith("GET", "http:\\example.com", [200, {"Content-Type": "application/json"}, '{"Body:""asd"}'])
     })
     $('body').find('button#login').trigger('click');
     server.respond();
     server.restore()
     console.log(server.requests);
}) 
```

这段代码工作正常，但我在控制台中看到伪造所有请求，但在登录期间我还有其他请求，我不需要为它们使用假服务器。这是对下一个屏幕的请求。可能存在对特殊请求进行过滤或使用虚假响应的方法。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T21:50:35.240

[诀窍是在服务器的FakeXMLHttpRequest](http://sinonjs.org/docs/#FakeXMLHttpRequest)对象上使用过滤器。那么只有你过滤掉的请求才会使用假服务器：

```
server = sinon.fakeServer.create();
server.xhr.useFilters = true;

server.xhr.addFilter(function(method, url) {
  //whenever the this returns true the request will not faked
  return !url.match(/example.com/);
});

server.respondWith("GET", "http:\\example.com", [200, {"Content-Type": "application/json"}, '{"Body:""asd"}']) 
```

# compiler-errors - 为什么会出现此错误？：“ ??? 下标分配维度不匹配

> ID：15072138
> 
> 赞同：0
> 
> 时间：2013-02-25T16:55:31.340
> 
> 标签：compiler-errors

为什么我会收到此错误？：

`" ???`下标分配尺寸不匹配。

```
Error in ==> Untitled2 at 6 C(i,1) = B(67:74); " 
```

**我的代码是：**

```
C = zeros(1230,1);
for i=1:1230
    B = A(i,1);
    B = char(B);
    C(i,1) = B(67:74);
end 
```

A 是一个 1230*1 的单元格，每个单元格中都有一个文本！我也像这样检查了我的代码并且它有效！

```
for i=1:1230
    B = A(i,1);
    B = char(B);
    Z = B(67:74);
end 
```

但我想将所有 1230 个项目保存在一个矩阵中！谢谢

# mercurial - 多变的导致多个不需要的头部的原因

> ID：15072139
> 
> 赞同：0
> 
> 时间：2013-02-25T16:55:35.843
> 
> 标签：mercurial

我正在与另一位程序员一起工作，他不断地在 mercurial 中创建多个头，却不知道它是如何发生的。我似乎无法（远程）调试问题，所以我想知道是什么导致了第二个头的自动和静默创建。

hg merge 解决了这个问题，但我想停止这个。

他在windows机器上，我在linux上，我激活了EolExtension。

我们正在使用中央回购，但它似乎没有参与。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:03:58.437

当从不是提示的修订（或您正在处理的任何分支的最后修订，如果使用多个命名分支）执行提交时，可能会发生这些情况。这会创建必须合并的匿名分支。这并不少见，并不意味着任何东西都一定会坏掉。如果这些来自分支上方的提交是有意的，那么您只需要习惯合并头部即可。为了避免创建多个头，`hg pull -u`请在提交之前执行（尽管您可能仍需要进行一些合并或同步）。

# javascript - JS高度调整应该工作

> ID：15072140
> 
> 赞同：0
> 
> 时间：2013-02-25T16:55:36.077
> 
> 标签：javascript, jquery

当幻灯片由于屏幕尺寸而变小时，我正在使用一些 JS 代码来自动调整按钮的高度。它在 Chrome 控制台中使用时有效，但在插入站点时失败。

网站： http: [//www.incensu.co.uk/](http://www.incensu.co.uk/)

您可以看到我将代码放在哪里，因为它在 /js/main.js 的底部被注释掉了，这里供参考：

```
var homeTopMain = $('#homeTopMain');
if (homeTopMain) {
  var btnHeight = (homeTopMain.height()+20)/3-20; // 20px at bottom, 3 buttons, 20px between.
  $('.btnFlapsBodyWrapper').height(btnHeight);
  $('.btnFlapsRed').height(btnHeight);
  $('.btnFlapsGrey').height(btnHeight);
} 
```

我在想这可能是代码的时间或范围问题，但由于某种原因我没有看到它。也许头脑清晰的人可以发现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:37:38.610

Zak 的提示为我指明了正确的方向。在 DOM 中将其移到上方并不能保证一个 ready() 会在另一个完成后发生。正确的解决方案是从 $(document).ready() 块中删除代码并将其放在 $(window).load() 块中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T17:17:13.107

您可以在 DOM 准备好时调整按钮的大小，也可以在调整窗口大小时执行。

```
$(document).ready(function()
{
    function ResizeButton()
    {
        var homeTopMain = $('#homeTopMain');
        if (homeTopMain) {
          var btnHeight = (homeTopMain.height()+20)/3-20; // 20px at bottom, 3 buttons, 20px between.
          $('.btnFlapsBodyWrapper').height(btnHeight);
          $('.btnFlapsRed').height(btnHeight);
          $('.btnFlapsGrey').height(btnHeight);
        }
    }
    ResizeButton();
    $(window).resize(ResizeButton);
}); 
```

# sql-server - 关于列绑定的 SSAS 多维数据集处理错误

> ID：15072150
> 
> 赞同：6
> 
> 时间：2013-02-25T16:56:03.330
> 
> 标签：sql-server, ssas, sql-server-2012, cube

这是我在处理 SSIS Cube 后收到的错误消息

`Errors in the back-end database access module. The size specified for a binding was too small, resulting in one or more column values being truncated.`

但是，它没有告诉我哪些列绑定太小。

我该如何调试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-19T19:17:51.783

这个错误信息已经让我发疯了好几个小时。我已经发现哪一列增加了它的长度并更新了源中的数据表，它现在显示了正确的长度。但错误只是不断弹出。事实证明，该字段用于多维数据集的“维度使用”选项卡上的事实到维度链接。并且当您刷新源时，为该链接创建的绑定不会刷新。解决方法是删除（将关系类型更改为“无关系”）并重新创建该链接。

**更新**：由于该答案似乎仍然相关，我想我会添加一个屏幕截图，显示您可能遇到此问题的区域。如果出于某种原因您将字符串用于 Dimension-to-Fact 链接，则它可能会受到大小增加的影响。解决方案如上所述。这是维度属性上的键、名称和值列问题的补充。 [![维度使用屏幕](../Images/9a2852f1cfdd7f87fa847d915b6d693f.png)](https://i.stack.imgur.com/Ta4i6.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-19T01:49:53.290

[ESC](https://stackoverflow.com/users/1807838/esc)是正确的。从 CodePlex 安装 BIDS Helper。右键单击Dimensions 文件夹并运行Data Discrepancy Check。

[维度数据类型差异检查](http://bidshelper.codeplex.com/wikipage?title=Dimension%20Data%20Type%20Discrepancy%20Check)

这解决了我的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:31:00.610

1.  使用 SQL Server Data Tools 打开您的 SSAS 数据库。
2.  打开 SSAS 数据库的数据源视图。
3.  右键单击空白区域，然后单击`Refresh`
4.  将打开一个窗口并显示对基础数据模型的所有更改。

[文档](http://msdn.microsoft.com/en-us/library/ms176133%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-28T19:48:24.863

备用修复 #1 - SQL Server 2008 R2（在 2012 上没有尝试过，但假设这会起作用）。

1.  更新/刷新您的 DSV。 **记下任何更改的列**，以便您查看。
2.  打开使用更改的列的每个维度。找到相关属性并展开属性**KeyColumns**、**NameColumn**和**ValueColumn**。
3.  查看每个属性的 DataSize 属性，如果这些属性与 DSV 中的值不匹配，请进行相应的编辑。 [![属性表](../Images/fe260eb62d533ffc132162318892f647.png)](https://i.stack.imgur.com/rwuFS.png)

备用修复 #2

1.  打开受影响的 *.dim 文件并搜索您的列名/绑定。
2.  更改数据大小元素：`<DataSize>100</DataSize>`

正如 Esc 所指出的，列大小更新会影响多维数据集本身的维度使用情况。您可以按照 Esc 的建议进行操作，也可以直接编辑 *.cube 文件 - 搜索更新的属性和相关的数据大小元素：`<DataSize>100</DataSize>`

当列大小发生变化时，我已经尝试了这两种修复方法，并且它们都有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T12:55:49.323

In my case the problem was working on the cube on live server. If you are working on the cube live, connecting to the server this error message pops up. But when you are working on the cube as a solution saved on the computer you do not get the error message. So work on the cube locally and deploy after making changes.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T20:19:52.463

在我的特定情况下，问题是因为我的查询是从 Oracle 读取的，并且硬编码的列有一个尾随空格（我的错误）。

我删除了尾随空格，为了更好地衡量，将硬编码值转换为`CAST ('MasterSystem' as VarChar2(100)) as SOURCE`

这解决了我的特定问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-12T15:57:48.743

首先尝试简单的事情 - 这些年来我已经发生过几次这种情况。

1.  转到数据源视图并刷新（它可能看起来没有发生任何事情，但这是一个好习惯）
2.  编辑维度。删除问题属性，然后从数据源视图列表中再次将其拖过来。
3.  重新处理满。

正如其他人所提到的，带有尾随空格的数据也可能是原因。检查它们：`SELECT col FROM tbl WHERE col LIKE '% '`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-20T11:32:49.800

遇到同样的问题，[Esc](https://stackoverflow.com/users/1807838/esc)的答案也可以是一个解决方案。原因更“隐藏”，更明显的解决方案“刷新”和“数据类型差异检查”在我的情况下没有任何好处。

我没有找到“调试”这个问题的正确方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-04T09:25:50.253

我遇到了这个问题。通过删除前导和尾随空格以及函数**rtrim**和**ltrim 来**决定问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-05T21:20:31.280

我也遇到了同样的问题，刷新数据源也没用。我有一个事实分区的物化引用维度，这给了我错误。在我的 DEV 环境中，我**取消选中 Materialize**并处理了没有错误的分区。
奇怪的是，现在我可以为相同的关系启用物化，它仍然可以毫无问题地处理。

# javascript - 输入模型在更改时从 Integer 更改为 String

> ID：15072152
> 
> 赞同：37
> 
> 时间：2013-02-25T16:56:14.500
> 
> 标签：javascript, angularjs, integer

具有一种基于输入模型的价格范围/评级功能。在加载时，当它从后端设置时，它以一个整数开始，但是当你输入它时，它会变成一个字符串。Angular 中有什么方法可以将输入的值声明为整数？

HTML：

```
<input type="text" name="sellPrice" id="sellPrice" class="sell-price" data-ng-model="menu.totalPrice" data-ng-change="updateMenuPriceRange()"required> 
```

JS：

```
$scope.updateAggregatePricing();

if ($scope.menu.totalPrice === 0) {
    $scope.menuPriceRange = "";
} else if ($scope.menu.totalPrice < 10) {
    $scope.menuPriceRange = "$";
} else if ($scope.menu.totalPrice >= 10 && $scope.menu.totalPrice <= 12.50) {
    $scope.menuPriceRange = "$$";
} else if ($scope.menu.totalPrice >= 12.51 && $scope.menu.totalPrice < 15) {
    $scope.menuPriceRange = "$$$";
} if ($scope.menu.totalPrice >= 15) {
    $scope.menuPriceRange = "$$$$";
} else {
    $scope.menuPriceRange = "";
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-24T08:31:39.743

我知道我迟到了，但我想我会发布这个答案，因为其他人可能仍在寻找替代品。

你可以通过使用 AngularJS 指令链接函数来解决这个问题。编码：

```
var myMod = angular.module('myModule', []);

myMod.directive('integer', function(){
    return {
        require: 'ngModel',
        link: function(scope, ele, attr, ctrl){
            ctrl.$parsers.unshift(function(viewValue){
                return parseInt(viewValue, 10);
            });
        }
    };
}); 
```

然后，您将在输入元素上使用此指令，以确保您输入的任何值都被解析为整数。*（显然这个例子没有验证输入以确保输入的内容实际上是一个整数，但是您可以使用正则表达式轻松实现这一点）*

```
<input type="text" ng-model="model.value" integer /> 
```

有关此主题的更多信息可以在表单上的 AngularJS 文档中找到，就在“自定义验证”部分附近：http: [//docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)。

**编辑：**`parseInt()`按照 adam0101 的建议，更新了包含基数 10 的调用

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-25T17:06:32.087

是的，使用输入类型`number`：

```
<input type="number" name="sellPrice" ...> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-25T17:15:12.633

最终在我的条件之前将模型解析为整数。

```
$scope.menu.totalPrice = parseInt($scope.menu.totalPrice, 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T18:34:29.247

与 Yanik 接受的答案非常相似，除了我尝试过但没有用。[不过，AngularJS 文档中的这个版本](https://docs.angularjs.org/error/ngModel/numfmt)对我来说非常适合。

```
.directive('stringToNumber', function() {
    return {
        require: 'ngModel',
        link: function(scope, element, attrs, ngModel) {
          ngModel.$parsers.push(function(value) {
            return '' + value;
          });
          ngModel.$formatters.push(function(value) {
            return parseFloat(value);
          });
        }
      };
    }); 
```

# vbscript - 删除超过特定年龄的文件夹

> ID：15072155
> 
> 赞同：2
> 
> 时间：2013-02-25T16:56:23.110
> 
> 标签：vbscript

这是我的功能不起作用。它永远不会到达 delete 调用，因为 if 语句永远不会评估 true，我不知道为什么。

```
Function DeleteOldFolders(root, maxAgeInDays)

    Dim fso, ofolder, subFolders
    Set fso = CreateObject ("Scripting.FileSystemObject")

    If fso.FolderExists(root) Then

        Set ofolder = fso.GetFolder(root)
        Set subFolders = ofolder.SubFolders

        For Each folder in subFolders
            createdDate = FormatDateTime(folder.DateCreated, "2")

            If (DateDiff("d", createdDate, Date) > maxAgeInDays) Then

                objFSO.DeleteFolder folder, True

            End If
        Next

    End If

    Set objFSO = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:27:11.637

什么都没有被删除的原因可能是你定义的`fso`

```
Set fso = CreateObject ("Scripting.FileSystemObject") 
```

但随后使用`objFSO`

```
objFSO.DeleteFolder folder, True 
```

并且在你的脚本中有一个`On Error Resume Next`其他地方（永远不要**使用**它，除非你**确切地**知道你在做什么**并且**有合理的错误处理代码）。

一些旁注（与实际问题无关，但值得考虑）：

*   始终使用`Option Explicit`. 没有例外。
*   可以`folder.DateCreated`直接在`DateDiff()`. 无需格式化值。
*   你的函数不返回任何东西，所以你最好把它变成一个过程。

您的程序的简化版本可能如下所示。

```
Sub DeleteOldFolders(root, maxAgeInDays)
  Dim fso, folder

  Set fso = CreateObject("Scripting.FileSystemObject")

  If fso.FolderExists(root) Then
    For Each folder in fso.GetFolder(root).SubFolders
      If DateDiff("d", folder.DateCreated, Date) > maxAgeInDays Then
        folder.Delete True
      End If
    Next
  End If

  Set fso = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:21:54.357

你的陈述

```
createdDate = FormatDateTime(folder.DateCreated, "2") 
```

是错误的、有风险的和不必要的。第二个参数——

> 命名格式 可选。表示使用的日期/时间格式的数值。如果省略，则使用 vbGeneralDate。

是**数字**，应该通过预定义的常量`vbGeneralDate`, ... 给出。

结果**字符串**是否正确转换为所需的**日期**`DateDiff()`是一个悬而未决的问题。所以使用一致的类型

```
If (DateDiff("d", folder.DateCreated, Date) > maxAgeInDays) Then 
```

问题的另一个可能原因是`DateDiff()'`语义：

> 如果 date1 指的是比 date2 更晚的时间点，则 DateDiff 函数返回一个负数。

你以什么身份通过`maxAgeInDays`？

# c# - 在应用程序根目录之外存储部分视图

> ID：15072161
> 
> 赞同：0
> 
> 时间：2013-02-25T16:56:34.297
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我想知道是否有办法将部分视图存储在应用程序的根文件夹之外。优点是所有应用程序都可以使用这些部分，并且可以在一个位置进行 HTML 更新，而无需为每个应用程序重新部署新的 .bin。

```
@Html.Partial("../../../../../../../../PartialTest/PartialTest.cshtml") 
```

这给了我错误：

> *不能使用前导 .. 退出顶级目录。*

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:04:55.610

> 我想知道是否有办法将部分视图存储在应用程序的根文件夹之外。

如果您想支持它，您将不得不编写一个自定义虚拟路径提供程序。例如，您可以查看[`following question`](https://stackoverflow.com/questions/7746253/using-custom-virtualpathprovider-to-load-embedded-resource-partial-views)此类自定义提供程序从嵌入式资源读取视图的示例。您可以调整它以从您想要的任何位置读取视图。

# c++ - poll() 是边缘触发函数吗？

> ID：15072165
> 
> 赞同：4
> 
> 时间：2013-02-25T16:56:50.587
> 
> 标签：c++, linux, networking

我负责通过 TCP 连接导出数据的服务器。对于服务器传输的每条数据记录，它都要求客户端发回一个简短的“\n”确认消息。我有一个客户声称他发送的确认不是从 Web 服务器读取的。以下是我在套接字上用于 I/O 的代码：

```
bool can_send = true;
char tx_buff[1024];
char rx_buff[1024];
struct pollfd poll_descriptor;
int rcd;

poll_descriptor.fd = socket_handle;
poll_descriptor.events = POLLIN | POLLOUT;
poll_descriptor.revents = 0;
while(!should_quit && is_connected)
{
   // if we know that data can be written, we need to do this before we poll the OS for
   // events.  This will prevent the 100 msec latency that would otherwise occur
   fill_write_buffer(write_buffer);
   while(can_send && !should_quit && !write_buffer.empty())
   {
      uint4 tx_len = write_buffer.copy(tx_buff, sizeof(tx_buff));
      rcd = ::send(
         socket_handle,
         tx_buff,
         tx_len,
         0);
      if(rcd == -1 && errno != EINTR)
         throw SocketException("socket write failure");
      write_buffer.pop(rcd);
      if(rcd > 0)
         on_low_level_write(tx_buff, rcd);
      if(rcd < tx_len)
         can_send = false;
   }

   // we will use poll for up to 100 msec to determine whether the socket can be read or
   // written
   if(!can_send)
      poll_descriptor.events = POLLIN | POLLOUT;
   else
      poll_descriptor.events = POLLIN;
   poll(&poll_descriptor, 1, 100);

   // check to see if an error has occurred
   if((poll_descriptor.revents & POLLERR) != 0 ||
      (poll_descriptor.revents & POLLHUP) != 0 ||
      (poll_descriptor.revents & POLLNVAL) != 0)
      throw SocketException("socket hung up or socket error");

   // check to see if anything can be written
   if((poll_descriptor.revents & POLLOUT) != 0)
      can_send = true;

   // check to see if anything can be read
   if((poll_descriptor.revents & POLLIN) != 0)
   {
      ssize_t bytes_read;
      ssize_t total_bytes_read = 0;
      int bytes_remaining = 0;
      do
      {
         bytes_read = ::recv(
            socket_handle,
            rx_buff,
            sizeof(rx_buff),
            0);
         if(bytes_read > 0)
         {
            total_bytes_read += bytes_read;
            on_low_level_read(rx_buff,bytes_read);
         }
         else if(bytes_read == -1)
            throw SocketException("read failure");
         ioctl(
            socket_handle,
            FIONREAD,
            &bytes_remaining);
      }
      while(bytes_remaining != 0);

      // recv() will return 0 if the socket has been closed
      if(total_bytes_read > 0)
         read_event::cpost(this);
      else
      {
         is_connected = false;
         closed_event::cpost(this);
      }
   }
} 
```

我基于 poll() 是一个级别触发函数的假设编写了这段代码，只要有数据要从套接字读取，就会立即解除阻塞。我读过的一切似乎都支持这个假设。是否有我可能错过的原因会导致上述代码错过读取事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:08:10.617

它不是边沿触发的。它始终是水平触发的。不过，我将不得不阅读您的代码来回答您的实际问题。但这回答了标题中的问题。:-)

我在您的代码中看不到为什么您可能会看到您所看到的行为的明确原因。但是您的问题范围比您提供的代码要大得多，我不能假装这是一个完整的问题诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T01:02:24.827

它是电平触发的。如果轮询时套接字接收缓冲区中有数据，则 POLLIN 触发，如果套接字发送缓冲区中有空间（几乎总是有空间），则 POLLOUT 触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:18:59.230

根据您自己对问题的评估（即，您在`poll`预期能够阅读确认时被阻止），那么您最终将获得超时。

如果客户的机器距离您的服务器超过 50 毫秒，那么您将始终在收到确认之前连接超时，因为您只等待 100 毫秒。这是因为数据至少需要 50 毫秒才能到达客户手中，而确认返回至少需要 50 毫秒。

# pdf - 在 Ubuntu 中将 Times New Roman 添加到 Ghostscript

> ID：15072166
> 
> 赞同：4
> 
> 时间：2013-02-25T16:56:53.300
> 
> 标签：pdf, fonts, ghostscript, truetype

在 Ubuntu 中使用 Ghostscript 8.71，但无法读取所有页面上都有 Times new roman 字体的 PDF 文件。

我下载了 msttcorefonts 包并为 Ghostscript 创建了一个 Fontmap 文件，但这似乎不起作用。

我的 Fontmap 文件如下所示：

```
/Times (/usr/share/fonts/truetype/msttcorefonts/times.ttf);
/Times-Roman (/usr/share/fonts/truetype/msttcorefonts/times.ttf);
/Times-Bold (/usr/share/fonts/truetype/msttcorefonts/timesbd.ttf);
/Times-BoldItalic (/usr/share/fonts/truetype/msttcorefonts/timesbi.ttf);
/Times-Italic (/usr/share/fonts/truetype/msttcorefonts/timesi.ttf); 
```

我使用的 Ghostscript 命令：

```
gs -sFONTMAP=/usr/share/ghostscript/8.71/Fontmap bad.pdf -o good.pdf 
```

这是我得到的错误：

```
GPL Ghostscript 8.71 (2010-02-10)
Copyright (C) 2010 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 3.
Page 1
Error: /undefined in --run--
Operand stack:
   --dict:5/14(L)--   F2   11.0   FontObject   --dict:8/8(L)--   --dict:8/8(L)--   397   --dict:8/8(L)--
Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1878   1   3   %oparray_pop   1877   1   3   %oparray_pop   1861   1   3   %oparray_pop   --nostringval--   --nostringval--   2   1   3   --nostringval--   %for_pos_int_continue   --nostringval--   --nostringval--   --nostringval--   --nostringval--   %array_continue   --nostringval--   false   1   %stopped_push   --nostringval--   %loop_continue   --nostringval--   --nostringval--   --nostringval--   --nostringval--   --nostringval--   --nostringval--   --nostringval--
Dictionary stack:
   --dict:1151/1684(ro)(G)--   --dict:1/20(G)--   --dict:75/200(L)--   --dict:75/200(L)--   --dict:108/127(ro)(G)--   --dict:288/300(ro)(G)--   --dict:22/25(L)--   --dict:6/8(L)--   --dict:25/40(L)--   --dict:1151/1684(ro)(G)--   --dict:10/10(L)--
Current allocation mode is local
Last OS error: 2
GPL Ghostscript 8.71: Unrecoverable error, exit code 1 
```

有人可以帮我吗？我觉得我已经用尽了我能想到的所有可能性。

这是我试图通过 Ghostscript 运行的 PDF 文件：[bad.pdf](http://www.asmeengineering.co.uk/bad.pdf)

如果我像这样加载所有字体：

```
gs -c 'loadallfonts quit' 
```

那么对 Times New Roman 字体的唯一引用是：

```
Loading TimesNewRomanPS-BoldItalicMT font from /usr/share/fonts/truetype/msttcorefonts/timesbi.ttf... 4310316 2923512 4001304 2206507 1 done. 
```

阅读附件 PDF 的属性，我可以看到它真正想要的字体是**TimesNewRomainPSMT**。为什么 gs 没有加载 msttcorefonts 文件夹中的所有字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-17T21:57:04.757

这是`pdffonts`实用程序报告的内容`bad.pdf`：

```
pdffonts bad.pdf
名称 类型 编码 emb sub uni 对象 ID
--------------------------------------- ----- ------ ---------- --- --- --- ---------
Times-Roman Type 1 WinAnsi no no no 12 0
DejaVuSerifCondensed Type 1 WinAnsi 是 否 否 13 0
DejaVuSansCondensed Type 1 WinAnsi 是 否 否 16 0
DejaVuSansCondensed-Bold Type 1 WinAnsi 是 否 否 19 0

```

这意味着以下内容：

1.  未嵌入的字体名称是`Times-Roman`，不是`TimesNewRomanPSMT`您想的那样。（我猜你使用 Adob​​e Acrobat/Reader 的*“文件属性”*对话框来查看字体属性？在那里你看到这个字体名称被标记为*“实际字体”*或类似的？这意味着 Acrobat 正在使用这个命名`TimesNewRomanPSMT`为***替代***字体，因为它没有自己命名的字体`Times-Roman`！）

2.  该`DejaVu`系列嵌入了 3 种字体。这些不是子集，而是作为完整字体嵌入。

到目前为止，一切都很好...

或者？

现在看看如果我尝试让从当前 Git 源编译的最新 Ghostscript 版本处理这个会发生什么`bad.pdf`：

```
    gs -o new.pdf -sDEVICE=pdfwrite bad.pdf

 GPL Ghostscript GIT PRERELEASE 9.16 (2014-09-22)
 版权所有 (C) 2014 Artifex Software, Inc. 保留所有权利。
 此软件不提供任何担保：有关详细信息，请参阅文件 PUBLIC。
 处理第 1 页到第 3 页。
 第 1 页
   **** 警告：无法处理字体流，按名称加载字体。
 将字体 Helvetica-Narrow 替换为 DejaVuSerifCondensed。
 从 %rom%Resource/Font/NimbusSanL-ReguCond 加载 NimbusSanL-ReguCond 字体... 4671296 3041958 2433440 1055875 3 完成。
 从 %rom%Resource/Font/NimbusRomNo9L-Regu 加载 NimbusRomNo9L-Regu 字体... 4688240 3115971 2494016 1110728 3 完成。
 第2页
   **** 警告：无法处理字体流，按名称加载字体。
 将字体 Helvetica-Narrow 替换为 DejaVuSerifCondensed。
 第 3 页
   **** 警告：无法处理字体流，按名称加载字体。
 将字体 Helvetica-Narrow 替换为 DejaVuSerifCondensed。

   **** 此文件包含已修复或忽略的错误。
   **** 该文件的制作者：
   **** ====== mPDF 4.6 ======
   **** 请通知产生此软件的作者
   **** 文件不符合 Adob​​e 发布的 PDF
   **** 规格。

```

Ghostscript 无法处理您的***嵌入字体。***

***这个特定的 PDF 似乎比您想象的要错误得多。***

# objective-c - 不同情况下相同操作的 Switch 语句语法

> ID：15072171
> 
> 赞同：4
> 
> 时间：2013-02-25T16:57:04.000
> 
> 标签：objective-c, c, switch-statement

两个常量 (1+2) 共享相同的 case 语句。我不想加倍代码。

执行此操作的正确语法是什么？

```
switch (expression) {
        case 0:
            [self taskA];
            break;
        case 1:
            [self taskB];
            break;
        case 2:
            [self taskB]
            break;
        default:
            break;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T17:01:08.363

采用 ：

```
switch (expression) {
    case 0:
        [self taskA];
        break;
    case 1:
    case 2:
        [self taskB];
        break;
    default:
        break;
} 
```

编辑1：

在`switch`我们说一个叫做**fall-through**的术语。每当控制到达一个标签时说它`case 0:`下降直到`break`被发现。On`break`控制被发送到`switch`.

如果`break`没有遇到，它会`case`像`case`then一样进入下一个`case 2`。所以在上面`case 1`并`case 2`分享一个`break`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:38:36.023

如果在 case 结束时没有使用 break 或 return，则多个 case 标签可以引用同一个语句。如果在 case 1 中不使用 break 语句，则执行流向 case 2。

# c# - 从具有 FaultException 的 WCF Web 服务中消除 tempuri

> ID：15072179
> 
> 赞同：1
> 
> 时间：2013-02-25T16:57:22.483
> 
> 标签：c#, wcf, .net-4.0, wsdl

背景：

我最近添加了对 Web 服务的用户请求的内部身份验证，并在身份验证失败的情况下引发自定义 FaultException。

FaultException 自定义类型已被标记：

```
[DataContract(Namespace = ConstantConfig.ServiceNamespace, Name = "AuthenticationError")]
public class AuthenticationError 
```

服务接口方法已被标记：

```
[OperationContract]
[FaultContract(typeof(AuthenticationError), Namespace = ConstantConfig.ServiceNamespace)]
ClientReport GetClientReport(DateTime from, DateTime to); 
```

接口本身已被标记：

```
[ServiceContract(Namespace = ConstantConfig.ServiceNamespace)]
public interface IClientReportService 
```

接口的实现已经标注：

```
[ServiceBehavior(Namespace = ConstantConfig.ServiceNamespace)]
public class ClientReportService : IClientReportService 
```

web.config 和 app.config 都指向复制/粘贴的服务命名空间。

然而，尽管如此，我仍然会生成一个 tempuri.wsdl。以下是 wsdl 的代表性摘录：

主要的：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:tns="http://webservice.company.com/ClientReportService" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:i0="http://tempuri.org/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="ClientReportService" targetNamespace="http://webservice.company.com/ClientReportService" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<wsdl:import namespace="http://tempuri.org/" location="http://localhost:4319/ClientReportService.svc?wsdl=wsdl0" />
<wsdl:types>
<xsd:schema targetNamespace="http://webservice.company.com/ClientReportService/Imports">
    <xsd:import schemaLocation="http://localhost:4319/ClientReportService.svc?xsd=xsd0" namespace="http://webservice.company.com/ClientReportService" />
    <xsd:import schemaLocation="http://localhost:4319/ClientReportService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/" />
</xsd:schema>
</wsdl:types> 
```

天妇罗：

```
<wsdl:operation name="GetClientReport">
  <soap:operation soapAction="http://webservice.company.com/ClientReportService/IClientReportService/GetClientReport" style="document" />
  <wsdl:input>
    <soap:body use="literal" />
  </wsdl:input>
  <wsdl:output>
    <soap:body use="literal" />
  </wsdl:output>
  <wsdl:fault name="AuthenticationErrorFault">
    <soap:fault use="literal" name="AuthenticationErrorFault" namespace="" />
  </wsdl:fault>
</wsdl:operation> 
```

我猜有些东西我没有标记或标记不正确，但我找不到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:01:01.483

尝试这个

```
<endpoint address=""
                          binding="basicHttpBinding"
                          bindingNamespace="http://my.namespace.com"
                          contract=""/>
            </service> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:37:44.173

事实证明，这个错误完全是我的。

在 Web 配置中，服务名称与实际服务上的服务名称不匹配。

实际服务（在 .svc 文件的标记内）：

```
Service="Company.Client.Framework.ReportService.ClientReportService" 
```

损坏的网络配置

```
<service name="Company.Client.ReportService.ReportService"> 
```

更正的网络配置：

```
<service name="Company.Client.ReportService.ClientReportService"> 
```

在我更正此问题并重新生成 WSDL 后，tempuri 消失了。

# typescript - 更新方法中 rightDown 的范围问题

> ID：15072180
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:24.060
> 
> 标签：typescript

我这里有一些奇怪的行为，在渲染的 JS 中，update 方法中 this 的值是 window，但它应该是 Game（如在 onKeyDown 方法中）。你如何纠正这个？

```
class Game {

    //for the key events
    rightDown: bool = false;

    constructor() {

    }

    onKeyDown(evt) {
        if (evt.keyCode == 39) this.rightDown = true;
        else if (evt.keyCode == 37) this.leftDown = true;
        if (evt.keyCode == 32) {
            this.space = true;
            var bullet = new GameObjects.GameObjects.Bullet(10);
            this.addProjectile(bullet);
        };
    }

    update(elapsed: number) {

   if (this.rightDown) {
            console.log(this.rightDown);
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:35:35.847

你在其他地方写过这样的东西：

```
setupAnimationTimer(myGame.update); // Maybe window.requestAnimationFrame ? 
```

请注意，您只是传递`update`from`Game`的原型——没有指向实际`myGame`实例的指针，因此执行回调的人无法使用正确的指针正确调用您的`update`方法。`this`

如果您四处搜索，有很多关于`this`绑定如何丢失或保留的博客文章；这里有两种可能的解决方案：

```
// Create a new closure
setupAnimationTimer(() => myGame.update()); 
```

或者

```
// Create a new function object that always invokes with the given 'this' value
setupAnimationTimer(myGame.update.bind(myGame)); 
```

# opencv - OpenCv 中的线性代数

> ID：15072181
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:26.020
> 
> 标签：opencv

我是计算科学专业的第一年本科生，参加了两门微积分课程，而不是另一门线性代数。我的问题与 OpenCv 有关，我是否需要先学习线性代数才能有效地使用它。如果是这样，它需要完整的线性代数还是只需要基础知识（所以我可以去图书馆）。

额外信息：我加入了一个自主机器人团队，他们让我选择 3 个选项，机器人视觉、导航和模拟。我选择了机器人视觉，因为它让我很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:09:42.687

简而言之，它不需要实用的线性代数知识。微积分 2 会更有优势，即使线性代数技能可能会派上用场。但最后，大多数变换函数已经创建，例如透视变换只需要提供两对 4 点，每对：(A,B,C,D) 假设形成另一个 4 点对象（A'，B'，C'，D'）。你做零计算并得到最终结果。

# ruby - 将 HTML 格式化为 CSV

> ID：15072184
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:30.487
> 
> 标签：ruby, csv, nokogiri

我正在使用 Ruby 和 Nokogiri 抓取一个网站。

此脚本创建一个本地文本文件，打开一个 URL，并在满足表达式时写入文件`tr td`。它工作正常。

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

DOC_URL_FILE = "doc.csv" 

url = "http://www.SuperSecretWebSite.com"

data = Nokogiri::HTML(open(url))

all_data = data.xpath('//tr/td').text

File.open(DOC_URL_FILE, 'w'){|file| file.write all_data} 
```

每行有五个字段，我想水平运行，然后在填充五个单元格后转到下一行。数据都在那里，但不可用。

我希望从知道如何创建 CSV 格式代码的人那里学习或获取代码：

1.  在脚本读取代码时，将每个新的 td /td x5 水平转储到其自己的单元格中。
2.  转到下一行等。

HTML的布局是：

```
<tr>
    <td>John Smith</td>
    <td>I live here 123</td>
    <td>phone ###</td>
    <td>Birthday</td>
    <td>Other Data</td>
</tr> 
```

最终产品应该是什么样子。

```
http://picpaste.com/pics/Screenshot-KRnqRGrP.1361813552.png 
```

电流输出

```
 john Smith      I live here 123  phone ### Birthday Other Data, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:17:58.587

这是遍历表格并将其单元格提取到数组数组中的非常标准的代码。此时您对数据的处理取决于您，但将其传递给 CSV 非常容易。

```
require 'nokogiri'
require 'pp'

doc = Nokogiri::HTML(<<EOT)
<table>
  <tr>
    <td>John Smith</td>
    <td>I live here 123</td>
    <td>phone ###</td>
    <td>Birthday</td>
    <td>Other Data</td>
  </tr>
  <tr>
    <td>John Smyth</td>
    <td>I live here 456</td>
    <td>phone ###</td>
    <td>Birthday</td>
    <td>Other Data</td>
  </tr>
</table>
EOT

data = []
doc.at('table').search('tr').each do |tr|
  data << tr.search('td').map(&:text)
end

pp data 
```

哪个输出：

```
[["John Smith", "I live here 123", "phone ###", "Birthday", "Other Data"],
["John Smyth", "I live here 456", "phone ###", "Birthday", "Other Data"]] 
```

代码用于`at`定位第一个`<table>`，然后遍历每个`<tr>`using `search`。对于每一行，它遍历单元格并提取它们的文本。

Nokogiri`at`找到第一次出现的东西，并返回一个节点。`search`查找所有匹配项并返回一个 NodeSet，它的作用类似于一个数组。为简单起见，我使用 CSS 访问器而不是 XPath。

* * *

仅供参考：

```
File.open(DOC_URL_FILE, 'w'){|file| file.write all_data} 
```

可以更简洁地写成：

```
File.write(DOC_URL_FILE, all_data) 
```

* * *

> 我一直在研究这个问题一段时间。你能给我更多的帮助吗？

*叹...*

您是否阅读过 CSV 文档，尤其是示例？如果我们不定义`data = []`而是将其替换为：

```
CSV.open("path/to/file.csv", "wb") do |data| 
```

并用 CSV 块包装循环，例如：

```
CSV.open("path/to/file.csv", "wb") do |data|
  doc.at('table').search('tr').each do |tr|
    data << tr.search('td').map(&:text)
  end
end 
```

这没有经过测试，但它真的很简单。去摆弄那个。

# html - nav>button - 在预期流内容的地方表达内容

> ID：15072188
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:37.463
> 
> 标签：html

正如我从规范中了解到的那样，可以使用[按钮元素，其中需要措辞内容。](http://www.w3.org/TR/html5/forms.html#the-button-element)[nav 元素](http://www.w3.org/TR/html5/sections.html#the-nav-element)的内容模型是流式内容。那么为什么下面的标记是有效的呢？

```
<nav>
    <button class="prev"></button>
    <button class="next"></button>
</nav> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:09:07.380

因为[流内容](http://www.w3.org/TR/html5/dom.html#flow-content-1)包括短语内容；该定义明确包括`button`元素。

在 HTML 4（甚至 HTML 2）中，“严格”版本要求将文本级内容包装在块级容器中，而“文本级”的含义与短语内容大致相同。但是 HTML5 中没有这样的要求。

# ruby-on-rails - 通过登录持久化表单输入

> ID：15072189
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:39.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session

我有这个应用程序，用户可以在其中为学校写评论。用户必须使用 Facebook 登录才能保存评论。问题是，如果用户未签名并撰写评论，然后使用 Facebook 登录，他们必须再次撰写相同的评论。

我试图通过将评论数据表单存储在会话中来解决这个问题，但我无法让它发挥作用。

什么是正确的 rails 方法来做到这一点？

**审核表：**

```
<%= form_for [@school, Review.new] do |f| %>
 <%= f.text_area :content %>
    <% if current_user %>
      <%= f.submit 'Save my review', :class => "btn" %>
    <% else %>
      <%= f.submit 'Save my review and sign me into facebook', :class => "btn" %>
    <% end %>
<%end %> 
```

**审查控制器**

```
class ReviewsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]

    def create
        @school = School.find(params[:school_id])
        @review = @school.reviews.new(params[:review])

        @review.user_id = current_user.id

        if @review.save
            redirect_to @review.school, notice: "Review has been created."
        else
            render :new
        end
    end

    def new
        @school = School.find_by_id(params[:school_id])
        @review = Review.new
    end

    def save_review(school, review, rating)
        Review.create(:content => review, :school_id => school, 
                       :user_id => current_user, :rating => rating)
    end

    private 
    def signed_in?
        !current_user.nil?
    end

    def signed_in_user
        unless signed_in?
            # Save review data into sessions
            session[:school] = School.find(params[:school_id])
            session[:review] = params[:review]
            session[:rating] = params[:rating] 
            # Login the user to facebook
            redirect_to "/auth/facebook"
            # After login save review data for user
            save_review(session[:school], session[:review], session[:rating])
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:06:16.930

我的理解是，除了像用户令牌等非常小的东西之外，在会话中存储东西不是“Rails 方式”。你可以在 Obie Fernandez 的 The Rails 3 Way 中阅读更多关于这个想法的信息。

我建议您从一开始就将评论存储在数据库中，并且仅在评论连接到 Facebook 身份验证用户后“显示”评论。如果您对如何实现这一点有任何好奇，我很乐意详细说明。

**编辑**：这里有一些示例代码。首先，我会负责将用户与评论相关联，以实现“永久”存储。您可以将 a 添加`user_id`到`review`表中，但这可能是`null`大多数时候，这对我来说似乎很草率：

```
$ rails g model UserReview review_id:references, user_id:references 
```

然后我会用 a和 a创建一个`user_session_review`表。这是用于“临时”存储：`review_id``user_session_token`

```
$ rails g model UserSessionReview review_id:integer, user_session_token:string 
```

然后，当用户注册时，将任何“临时”评论与该用户相关联：

```
class User
  has_many :user_reviews
  has_many :reviews, through: :user_reviews
  has_many :user_session_reviews

  def associate_reviews_from_token(user_session_token)
    temp_reviews = UserSessionReview.find_all_by_user_session_token(user_session_token)
    temp_reviews.each do |temp_review|
      user_reviews.create!(review_id: temp_review.review_id)
      temp_review.destroy
    end
  end
end 
```

所以在你的控制器中，你可能会这样做

```
class UsersController < ApplicationController
  def create
    # some stuff
    @user.associate_reviews_from_token(cookies[:user_session_token])
  end
end 
```

当然，您必须在字里行间稍加阅读，但我认为这应该可以让您继续前进。

**编辑2**：要删除旧的废弃评论，我会这样做：

```
class UserSessionReview
  scope :old, -> { where('created_at < ?', Time.zone.now - 1.month) }
end 
```

然后，在 cron 作业中：

```
UserSessionReview.old.destroy_all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T09:09:17.170

您应该将评论保存在创建会话操作中（不包含在您的问题中）。假设您使用的是omniauth，您可以在处理回调的操作上添加一些内容

```
# review controller
def signed_in_user
  unless signed_in?
    # Save review data into sessions
    session[:school] = School.find(params[:school_id])
    session[:review] = params[:review]
    session[:rating] = params[:rating]

    # Login the user to facebook
    redirect_to "/auth/facebook"   
  end
end

# callback to login the user
def handle_callback
  # do your thing here to login the user
  # once you have the user logged in
  if signed_in?
    if session[:school] && session[:review] && session[:rating] # or just 1 check
      Review.create(
        content: session.delete(:review),
        school_id: session.delete(:school), 
        user_id: current_user.id,
        rating: session.delete(:rating)
      )
      #redirect_to somewhere
    end
  end
end 
```

我使用了删除，因此会话将清除这些值。

更新：因为您使用的是会话控制器

```
class SessionsController < ApplicationController
  def create
    if user = User.from_omniauth(env["omniauth.auth"])
      session[:user_id] = user.id 

      if session[:school] && session[:review] && session[:rating] # or just 1 check
        review = Review.new
        review.content = session.delete(:review)
        review.school_id = session.delete(:school)
        review.user_id = user.id
        review.rating = session.delete(:rating)
        review.save
      end
    end

    redirect_to :back
  end 
```

# javascript - Jasmine：忽略测试中的页面重定向

> ID：15072191
> 
> 赞同：3
> 
> 时间：2013-02-25T16:57:42.930
> 
> 标签：javascript, jasmine

我有一个与此类似的 Javascript 设置：

```
function a()
{
    // some logic...
    b();
};

function b()
{
    window.location = "anotherPage"
}; 
```

在我的 Jasmine 测试中，我想进行测试`a()`，但我不希望发生重定向。

我试过了：

```
spyOn(instance, 'b').andCallFake(function() { }); 
```

但这仍然导致重定向。或许是因为`a()`是在召唤`b()`而不是茉莉在召唤`b()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:36:26.133

只需在测试中创建 spy **b**函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:35:38.523

不确定您的情况是什么。假设函数 b 是在全局上下文中。窗口，像这样创建间谍：

```
spyOn(window, 'b'); 
```

# c# - 将这行 vb 代码转换为 C# 时遇到问题

> ID：15072192
> 
> 赞同：1
> 
> 时间：2013-02-25T16:57:42.327
> 
> 标签：c#, vb.net, preprocessor-directive

我有一个正在尝试转换为 C# 的 vb.net 项目。我有一个名为 MyWebExtension.vb 的文件，其中有这行代码`#If _MyType <> "Empty" Then`

我试图转换成 C#`#if (_MyType != "Empty")`

当我运行应用程序时，我收到以下错误：

> 无效的预处理器表达式。

我的转换做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:07:54.707

`#define`在 C# 中只能指定“标志”，而不是 VB 允许的常量值。

在 C# 中，您可以拥有：

```
#define _MyType

#If _MyType 
```

或者：

```
#if ! _MyType 
```

但在 VB 中，您可以拥有：

```
#Const _MyType = "SomeType"

#If _MyType = "SomeType" 
```

对此没有很好的解决方法 - 您可以使用常量，但当然只能从类中引用这些常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:02:59.203

来自**[编译器错误 CS1517](http://msdn.microsoft.com/en-us/library/ey1471zb%28v=vs.90%29.aspx)**

以下示例显示了一些有效和无效的预处理器表达式：

```
#if symbol      // OK
#endif
#if !symbol     // OK
#endif
#if (symbol)    // OK
#endif
#if true        // OK
#endif
#if false       // OK
#endif
#if 1           // CS1517
#endif
#if ~symbol     // CS1517
#endif
#if *           // CS1517
#endif

class x
{
   public static void Main()
   {
   }
} 
```

所以我认为你可以这样使用；

```
#define _MyType

#If _MyType 
```

来自**[#if](http://msdn.microsoft.com/en-us/library/4y6tbswk%28v=vs.90%29.aspx)**

> 当 C# 编译器遇到 #if 指令，最后是 #endif 指令时，它只会在**定义了指定符号的情况下**编译指令之间的代码。与 C 和 C++ 不同，您不能将数值分配给符号。C# 中的#if 语句是布尔值，仅测试符号是否已定义。

```
#define DEBUG
// ...
#if DEBUG
    Console.WriteLine("Debug version");
#endif 
```

> **您只能使用运算符 ==（相等）、!=（不等）来测试 true 或 false 。True 表示符号已定义**。语句 -#if DEBUG 与 #if (DEBUG == true) 具有相同的含义。运算符 && (and) 和 || > (or) 可用于评估是否已定义多个符号。您还可以使用括号对符号和运算符进行分组。

# c - 为什么无法在 ubuntu 上链接 64 位静态 libgcc

> ID：15072196
> 
> 赞同：4
> 
> 时间：2013-02-25T16:57:44.910
> 
> 标签：c, gcc, ubuntu, static

我有问题将 libgcc 链接到静态链接的 .so

仅在将 64 位模块与`-m64`

Ubuntu 64 位 12.10 gcc 4.7

在 Ubuntu 64bit 12.04 gcc 4.6 上也失败了

32位没问题

```
$gcc -fPIC -c -o hello.o hello.c -m32
$gcc -shared -m32 hello.o -o libhello.so -static-libgcc -Wl,-Bstatic  -lc
$ ldd libhello.so 
    statically linked 
```

64位失败

```
$ make
gcc -fPIC -c -o hello.o hello.c
gcc -shared -m64 hello.o -o libhello.so -static-libgcc -Wl,-Bstatic  -lc
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/libc.a(iofclose.o): relocation R_X86_64_32 against `__gcc_personality_v0' can not be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../x86_64-linux-gnu/libc.a: could not read symbols: Bad value
collect2: error: ld returned 1 exit status
make: *** [libhello.so] Error 1 
```

你好ç

```
#include <stdio.h>

int f(){

FILE *out = fopen("/tmp/x.log", "wb");
fclose(out);

return 1;
} 
```

生成文件

```
all: libhello.so

libhello.so: hello.o
    gcc -shared -m64 hello.o -o libhello.so -static-libgcc -Wl,-Bstatic  -lc

hello.o: hello.c
    gcc -fPIC -c -o hello.o hello.c

clean: 
    rm -f hello.o libhello.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:03:00.210

答案基本上是“你不能那样做”。您正在尝试将非 PIC 代码链接到共享库，这在 x86_64 (amd64) 架构上根本不可能。您需要一个静态但 PIC 版本的 libgcc，我怀疑这只是您的问题的开始。

通常共享 libgcc 的原因之一是给定的运行可执行文件必须具有 libgcc 维护的某些关键数据结构的一个且只有一个副本。静态链接对于最终的可执行文件是有意义的，因为只有一个副本将是静态链接到可执行文件的副本，但动态对象的全部意义在于将其加载到另一个可执行文件中（而后者又将拥有自己的副本libgcc，无论是共享的还是静态的）。

# session - Javamail - 无法在 Web 应用程序中获得新会话

> ID：15072197
> 
> 赞同：0
> 
> 时间：2013-02-25T16:57:52.157
> 
> 标签：session, web-applications, properties, jakarta-mail

我有一个返回会话的方法。我的目标是在调用该方法时它总是应该返回一个新会话。我有一个网络应用程序，当我单击“开始”或“发送”时，它总是连接并发送邮件。

**我有以下情况：**

1.  我 connect() 到需要我自己的自定义信任库的服务器。
2.  如果我连接到这个服务器，我应该从下拉框中选择 truststorename.jks。它应该工作。如果我没有选择我的信任库，那么应该抛出一个异常。
3.  如果我连接到另一个不需要我自己的自定义信任库的服务器，那么我可以选择“无”。所以java采用默认配置。

应该抛出的异常是 javamail 的 Transport.connect() 方法：

```
java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

**问题：**

现在，当我启动或重新启动 Web 应用程序时 - 它只在第一次工作。

因此，如果我选择自己的信任库，它毫无例外地工作。但是后来我从下拉框中选择“无”或“无”，但它仍然成功发送而不是抛出异常。所以我认为旧会话仍然存在，只有在我重新部署网络应用程序时才会创建一个新会话。也许与系统属性有冲突？还是码头？

```
 private Session connect(SMTPTask task) {

    log.debug("Connecting to SMTP");
    Properties props = new Properties();
    Properties systemProps = System.getProperties();

    if (task.getKeyStorePath().contains("None")) {
        systemProps.remove("javax.net.ssl.trustStore");
        systemProps.remove("javax.net.ssl.trustStorePassword");
        System.setProperties(systemProps);
        props.remove("mail.smtp.ssl.socketFactory");
    } else {

        systemProps.put("javax.net.ssl.trustStore", "src/main/resources/stores/" + task.getKeyStorePath());
        systemProps.put("javax.net.ssl.trustStorePassword", "changeit");
        System.setProperties(systemProps);

        SSLSocketFactory factory = null;
        try {
            SSLContext ctx;
            KeyManagerFactory kmf;
            KeyStore ks;
            char[] passphrase = "changeit".toCharArray();

            ctx = SSLContext.getInstance("TLS");
            kmf = KeyManagerFactory.getInstance("SunX509");
            ks = KeyStore.getInstance("JKS");

            URL resource = this.getClass().getResource("/stores/" + task.getKeyStorePath());
            File file = new File(resource.toURI());

            FileInputStream fis = new FileInputStream(file);
            ks.load(fis, passphrase);
            fis.close();
            kmf.init(ks, passphrase);
            ctx.init(kmf.getKeyManagers(), null, null);

            factory = ctx.getSocketFactory();

            props.put("mail.smtp.ssl.socketFactory", factory);
        } catch (Exception e) {
            log.error("Error with SSLFactory", e);
        }
    }

    String host = task.getHost();
    String port = String.valueOf(task.getPort());

    props.put("mail.smtps.host", host);
    props.put("mail.smtps.port", port);
    props.put("mail.smtps.auth", "true");
    props.put("mail.imaps.fetchsize", "22020096");

    return Session.geInstance(props);
    } 
```

我在其他地方做：

```
public void send() {
   ...
   Session s = connect(task);
   ...
} 
```

**编辑：**

我不想用 MailSSLFactory 来做：

```
private Session connect(SMTPTask task) {

    ...

        try {
            MailSSLSocketFactory factory = new MailSSLSocketFactory();
            KeyManagerFactory kmf= KeyManagerFactory.getInstance("SunX509");
            KeyStore ks = KeyStore.getInstance("JKS");
            char[] passphrase = "changeit".toCharArray();

            URL resource = this.getClass().getResource("/stores/" + task.getKeyStorePath());
            File file = new File(resource.toURI());

            FileInputStream fis = new FileInputStream(file);
            ks.load(fis, passphrase);
            fis.close();
            kmf.init(ks,passphrase);
            factory.setKeyManagers(kmf.getKeyManagers());
       factory.setTrustAllHosts(true);

            props.put("mail.smtp.ssl.socketFactory", factory);
        } catch (Exception e) {
            log.error("Error with SSLFactory", e);
        }
    }

    props.put("mail.smtps.host", host);
    props.put("mail.smtps.port", port);
    props.put("mail.smtps.auth", "true");
    props.put("mail.imaps.fetchsize", "22020096");

    return Session.getInstance(props);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:06:01.347

当您选择“无”时，您希望抛出什么异常？当然 Session.getInstance 不会抛出异常。也许您为 Session 配置的属性实际上不会起作用，但是直到您尝试使用它连接到您的邮件服务器时才会发现它。

# php - 未定义变量：不显示数据

> ID：15072205
> 
> 赞同：0
> 
> 时间：2013-02-25T16:58:19.173
> 
> 标签：php

基本上试图从通过 POST 发送的 ID 中过滤掉记录。

下面是我正在运行的功能。

```
 function displayinvoice($supid){
    $result = mysql_query("SELECT * FROM companies WHERE compID = " . $supid);
    $row = mysql_fetch_array( $result );
    return $row; 
```

这是页面上的代码

```
include '../inc/functions-jams.php';

$dropid = $_POST['cmyid'];

displayinvoice($dropid); 
```

我在文档的正文中有这个

```
<? echo $row['compName'];?> 
```

现在 $dropid 正在接收，因为我已经在页面上回显了它，但是正文代码正在返回此错误。

注意：未定义变量：第 59 行 C:\xampp\htdocs\yourwedding\backend\sup-invoices-02.php 中的行

现在已经做了几个小时了，却一无所获。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:59:47.657

您没有得到返回值：

```
$row = displayinvoice($dropid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:59:56.227

好的，除了 SQL 注入问题...

尝试

```
$row = displayinvoice($dropid);

<? echo $row['compName'];?> 
```

# android - ContactsContract 编辑器忽略电子邮件、电话意图数据

> ID：15072206
> 
> 赞同：0
> 
> 时间：2013-02-25T16:58:20.590
> 
> 标签：android, android-intent, contactscontract

**（代码段已修改 - 现在工作）**

根据 Android 参考 [http://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html](http://developer.android.com/reference/android/provider/ContactsContract.Intents.Insert.html) 应该可以将一组电子邮件和电话号码传递给联系人编辑器。有人在这方面取得成功吗？

经过大量的研究和实验，似乎没有任何效果 - 它只是忽略了参数，正如编辑器打开时只填写名称字段所证明的那样。这是在运行 Android 4.2.1 的 Nexus 7 上。通讯录应用程序版本为 4.2.1-533553。

这是我的代码（“表单”在其他地方声明和填写）：

```
Intent intent = new Intent();
intent.setAction (Intent.ACTION_INSERT);
intent.setData (ContactsContract.Contacts.CONTENT_URI);
intent.putExtra (ContactsContract.Intents.Insert.NAME, form.name);

ArrayList<ContentValues> parcels = new ArrayList<ContentValues>();

for (int i = 0;  i < form.phones.length;  i++)
{
  ContentValues row = new ContentValues();
  row.put (Data.MIMETYPE, CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
  row.put (CommonDataKinds.Phone.NUMBER, form.phones[i]);
  row.put (CommonDataKinds.Phone.TYPE, form.phoneIds[i]);
  parcels.add (row);
}

for (int i = 0;  i < form.emails.length;  i++)
{
  ContentValues row = new ContentValues();
  row.put (Data.MIMETYPE, CommonDataKinds.Email.CONTENT_ITEM_TYPE);
  row.put (CommonDataKinds.Email.ADDRESS, form.emails[i]);
  row.put (CommonDataKinds.Email.TYPE, form.emailIds[i]);
  parcels.add (row);
}

intent.putParcelableArrayListExtra (ContactsContract.Intents.Insert.DATA, parcels);
startActivityForResult (intent, ACTIVITY_REQUEST_FULL_EDIT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:05:12.950

您是否尝试在每次填充一行时添加phones.add(row) 和emails.add(row)？

# actionscript-3 - 调用函数与调度事件

> ID：15072207
> 
> 赞同：2
> 
> 时间：2013-02-25T16:58:25.950
> 
> 标签：actionscript-3, oop, events, design-patterns, observer-pattern

当您可以直接调用函数时，创建这样的自己的事件有什么用。

例如

```
var customEvent:Event = new Event("ev");
_myObject.addEventListener("ev", handler);

private function handler(e:Event):void
{
    //Do something
}

//And then dispatching the event else where like this
_myObject.dispatchEvent(customEvent); 
```

当您可以像这样直接调用函数时

```
handler();
private function handler():void
{
//do something
} 
```

自定义事件到底有什么意义？在这种情况下，我应该使用哪一个来提高效率和最少的资源消耗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T17:14:33.993

在调度事件的情况下，“调度员”不需要了解任何关于侦听器的信息。甚至可能不存在听众。

在直接调用函数的情况下，它必须知道函数的名称，它必须具有对实现该函数的对象的引用，等等。它使代码更难重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:17:40.503

就效率而言，在我看来，可维护性，您应该更喜欢直接方法调用。

事件更通用，通常用于[发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)模式。您可以使用任何语言相当容易地创建基于事件的系统，并且需要为每个可以分派的事件维护一个订阅者列表。必须检查并遍历此列表以调用所有订阅者，这通常可以使用字典或其他数据结构相当有效地完成。

如果您坚持一致的消息传递模式，那么事件可能有助于从 GUI 表示中抽象逻辑。许多语言使用事件与 GUI 系统集成，包括 C#、AS3、Objective-C。

一般来说，随着项目规模的增加，消息系统可能会变得更难维护，因为您会失去编译时间检查以支持更通用的动态调度机制。

# algorithm - 具有一组有序航点对的路线规划

> ID：15072208
> 
> 赞同：0
> 
> 时间：2013-02-25T16:58:29.337
> 
> 标签：algorithm, sorting, optimization, shortest-path

我有一组节点。从一个节点到连接节点的旅行成本始终为 1，但并非所有节点都直接连接。也就是说，从节点 A 到 C 的旅行可能需要经过节点 B，它的总旅行成本为 2。

然后我有一组有序的对航路点。每个航路点对包含一个起点节点和终点节点，必须按顺序访问。

有序对本身不必以任何特定顺序被访问，也不必紧跟在源节点之后访问目标节点。

一个节点可能会被访问​​两次，如果那是为了优化整个路线。它永远不需要访问三次。

如何订购我的节点以实现最低旅行成本并确保访问包含在一个航点中的所有节点，并遵守上面的有序对规则？

我用这个把头撞在墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:20:12.503

不是一个完整的答案，只是大声思考，一种贪婪的方法：

1.  计算图的最短距离矩阵，
2.  找到最短路线最长的一对航路点。
3.  将该路线附加到最终结果。
4.  从尚未处理的航路点集合中删除该路线中出现的任何航路点对。
5.  对剩余的航路点从 2 开始重复，直到没有航路点为止。

如果您遇到一对以相反顺序出现在路线中的航点，则需要想出一种“有效”的方式来反向遍历路线。

另一个想法：

找到图的最小生成树并从左到右和从右到左遍历它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:03:56.847

不幸的是，这是一个 NP-Hard 问题，因为它减少了（公制）旅行商问题。

这意味着在一般情况下，它不能在多项式时间内完成。您可以采取几种方法

*   接受超多项式运行时间
*   放宽要求，不再是NP Complete
*   使用近似算法
*   将您的图限制为可以有效求解的集合（例如有界分支宽度图）

或者您可以使用多种方法的组合。例如，使用可以快速解决常见情况的精确算法，并在病理情况下回退到近似算法。

# sql-server-2008 - SSRS - 仅允许参数中的货币值

> ID：15072210
> 
> 赞同：0
> 
> 时间：2013-02-25T16:58:42.430
> 
> 标签：sql-server-2008, tsql, ssrs-2008

我正在创建一个 SSRS 包，它要求我的最终用户在参数中输入货币值。有没有办法让他们只能输入数字？还有一种方法可以使我默认的值显示为 0.00？每次我尝试输入它默认为 0 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T13:08:18.447

如果您将参数的数据类型设置为“整数”![在此处输入图像描述](../Images/2855c49dc4995dcbe5424ef973c2abe4.png)

然后，您可以使用函数添加默认值![在此处输入图像描述](../Images/88fc5d4f8a38fc09dda99d9d4d3ca324.png)

```
=FormatCurrency(Fields!SomeField.Value, "C") 
```

希望有帮助

# .net - 获取 Windows 凭据以用作 CRM 的 ClientCredentials (System.ServiceModel.ClientCredentials)

> ID：15072213
> 
> 赞同：1
> 
> 时间：2013-02-25T16:58:46.660
> 
> 标签：.net, windows, crm, credentials

我正在制作一个 Web 表单，它将简化一些 CRM 帐户数据操作。我希望我的用户能够使用他们的 Windows 登录名连接到 CRM，而无需输入。

**有没有办法使用 .NET Web 应用程序获取用户的 Windows 凭据以用于 CRM 身份验证？**

现在我正在使用以下内容：

```
ClientCredentials Credentials = new ClientCredentials();
Credentials.UserName.UserName = "hardcoded username";
Credentials.UserName.Password = "hardcoded password"; 
```

但我想自动化这个。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:13:00.710

尝试这个：

```
service.Credentials = System.Net.CredentialsCache.DefaultNetworkCredentials; 
```

您的 Web 应用程序必须配置为 Windows 身份验证。

# javascript - 谷歌图表未在 IE8 中呈现

> ID：15072215
> 
> 赞同：3
> 
> 时间：2013-02-25T16:58:58.100
> 
> 标签：javascript, internet-explorer-8, google-visualization

有谁知道为什么这个谷歌图表不会在 IE 8 中呈现？它在其他浏览器中运行良好

```
$(function () {
        var trendChartWidth = 670;
             var data = new google.visualization.DataTable();
            data.addColumn('string', '');
            data.addColumn('number', '');
            data.addRows([
                ['Group 1', 168],
                ['Group 2', 83],
                ['Group 3', 1680]
            ]);
            var options = {
                'title': 'Stuff (Last 30 Days)',
                    'width': 210,
                    'height': 170, 
                    'backgroundColor': '#F2F2F2', 
                     colors: ['#94b709', '#4f4840', '#bcbcbc'], 
                     chartArea: { left: 10, top: 30, width: '100%', height: '75%' }, 
                     legend: { position: 'none' }
                };
                var chart = new google.visualization.PieChart(document.getElementById('chartTest'));
                chart.draw(data, options);
        }); 
```

这是我的图表 div：

```
<div id="chartTest" style="width:300px;height:300px;border:1px solid red;"></div> 
```

[http://jsfiddle.net/dmaXc/6/](http://jsfiddle.net/dmaXc/6/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-09T10:48:19.000

“宽度”：210，“高度”：170，“背景颜色”：“#F2F2F2”，

不要在宽度和高度以及背景颜色中放置单个代码。使用如下语法

宽度：210，高度：170，背景颜色：'#F2F2F2'，

# javascript - Firefox 插件访问配置

> ID：15072221
> 
> 赞同：0
> 
> 时间：2013-02-25T16:59:16.590
> 
> 标签：javascript, firefox, components, xul, firefox-addon-sdk

我想编写一个简单的 Firefox 插件来保护我的搜索引擎，因为每次重新启动 Firefox 时，搜索引擎和关键字.URL 都设置为 u-search。

我尝试了插件 BrowserProtect 但它不保护keyword.URL！所以我首先在 builder.addons.mozilla.org 上创建了一个插件，因为它看起来很容易使用。

我的代码看起来像这样（从代码片段中添加在一起）：

```
var Widget = require("widget").Widget;
var tabs = require('tabs');

exports.main = function() {

    new Widget({
        id: "searchengineprotect",
        label: "SearchEngineProtect",
        contentURL: "http://www.mozilla.org/favicon.ico",

        onClick: function(event) {
            var {Cc, Ci} = require("chrome");
            var prefs = Cc["@mozilla.org/cookieService;1"].getService(Ci.nsIPrefBranch);
            prefs.setCharPref("keyworld.URL", "http://google.de/search?q=");
        }
    });
}; 
```

我只是更改了“onClick”函数中的代码。

但是当我点击 Firefox 中的小按钮时，控制台会报告此错误：

```
Fehler: searchengineprotect: An exception occurred.
NS_ERROR_XPC_GS_RETURNED_FAILURE: Component returned failure code: 0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE) [nsIJSCID.getService]
undefined 35
Traceback (most recent call last):
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/searchengineprotect/lib/main.js", line 35, in exports.main/<.onClick
    var prefs = Cc["@mozilla.org/cookieService;1"].getService(Ci.nsIPrefBranch);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/deprecated/events.js", line 153, in _emitOnObject
    listener.apply(targetObj, params);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/deprecated/events.js", line 123, in _emit
    return this._emitOnObject.apply(this, args);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/widget.js", line 282, in _onEvent
    this._emit(type, eventData);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/widget.js", line 431, in WidgetView__onEvent
    this._baseWidget._onEvent(type, this._public);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/widget.js", line 850, in WC_addEventHandlers/listener/<
    self._widget._onEvent(EVENTS[e.type], null, self.node);
  File "resource://jid0-zg1n2skgq7y6lrq6hbl96hno8ke-at-jetpack/addon-sdk/lib/sdk/timers.js", line 31, in notify
    callback.apply(null, args); 
```

因此，如果您知道如何修复该错误，甚至知道如何阻止 firefox 更改搜索引擎……那就太棒了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T08:04:16.360

在评论之后 - 这是一个拼写错误的问题。
使用keyword.URL 而不是keyworld.URL（没有“L”）

# asp.net - 发布的数据丢失

> ID：15072222
> 
> 赞同：0
> 
> 时间：2013-02-25T16:59:22.970
> 
> 标签：asp.net, iis, iis-7

我正在从 IIS6 迁移到 IIS7（集成模式）。我遇到了很多问题，但现在几乎所有问题都可以正常工作：当我在“/”或“/test/”等 url 上发布数据时，会显示 Default.aspx，但 HttpRequest 对象上缺少发布的数据。如果我发布到“/Default.aspx”或“/test/Default.aspx”没有问题。在我的其他服务器（IIS7 也是）或我的本地服务器（IIS8）上都没有问题。我试图比较两台服务器上的处理程序配置，但没有发现任何差异。

这是我的测试页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <form method="POST" action="">
        <p>
            <input type="text" name="text"/>
            <input type="submit" value="send" name="button"/>
        </p>
        <p>
            method: <%=Request.HttpMethod %>
            <br/>
            post: <%=HttpUtility.HtmlEncode(Request.Form.ToString()) %>
        </p>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:03:56.247

我在将旧站点从 IIS6 迁移到 IIS7 时遇到了类似的问题，我很确定这是一个 web.config 问题。

最快的解决方法是设置

```
<validation validateIntegratedModeConfiguration="true" /> 
```

它会抛出异常，直到你有一个有效的 web.config 用于集成模式。

很多时候，对于 IIS6 有效的配置值未迁移到 IIS7 并隐藏

仔细检查模块和处理程序定义，它们必须位于不同的位置：

在 IIS6 中，它们属于`<system.web>`元素

在 IIS7 中，它们属于`<system.webServer>`元素

# php - 从所有输入元素中获取 id 和 value 并通过 ajax 传递它们

> ID：15072224
> 
> 赞同：1
> 
> 时间：2013-02-25T16:59:31.697
> 
> 标签：php, javascript, arrays

我有一堆输入文本框，我想将它们放入一个数组（id 和 value）中并通过 ajax 传递。将其传递给我的 php 代码后，我需要遍历它并将 id 和 value 保存在数据库中。（每个 ID 1 行）

```
$("input").each(function() {
    values[$(this).attr("id")] = $(this).val();
}); 
```

我用它来获取值并创建一个数组，这就是它的样子 {"1":"new","2":"edit","3":"save","4":"delete"}

然后我通过 ajax 传递它，但是如何遍历这些值并保存它们？

```
$taal = $mysqli->real_escape_string($_POST['taal']);
$arr = $_POST['values'];
foreach ($arr as $key => $value) {
    $query = "INSERT INTO words (taal_id, number, word) VALUES ('" . $taal . "','" . $key . "','" . $value . "')";
    $result = $mysqli->query($query) OR die(mysql_error());
} 
```

这就是我尝试使用的，但它不起作用

ajax 请求

```
$.ajax( {
    url: "javascript/ajax/taal.php?wat=saveWoorden",
    type: "POST",
    data: {values : values, taal : $('#talen').val()}
}).success(function() {
    $('.talenInfo').html('success');
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:09:22.790

而不是发送单独的插入语句更好地发送准备好的插入语句或发布可以在数据库端处理以进行批量插入的 XML 数据。

您可以像这样准备 xml 或批量插入语句

```
var query = 'INSERT INTO words (taal_id, word)   ';
$("input").each(function () {
    query += 'Select  ' + $(this).attr("id") + ',' + $(this).val() + '  UNION ALL  ';
});

alert(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:29:25.460

我不确定...我能够完全复制您的问题，但我已尝试这样做

```
<?php
unset($_POST['data'][0]);
print_r($_POST);
?>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript></script>

<script type='text/javascript'>

  $(document).ready(function()
  {
     $('#submit').click(function(){
     var values = [];

      $("input").each(function() {
      values[$(this).attr("id")] = $(this).val();
      });     

     $.ajax({
     url      : 'try.php',
     data     : {data:values},
     type     : 'POST',
     success  :function(data){alert(success)}
    });
   });}); 
         </script>
               <html>
               <body>
                <form method='post'>
               <input id='1' value='text1'  type='text'/>
              <input id='2' value='text2' type='text'/>
              <input type='button' id='submit' value='submit'/>
             </form>
              </body>
               </html> 
```

我发现值数组中的索引 0 得到空值，所以我必须取消设置它。确保您也没有遇到同样的问题，因为它可能违反数据库约束。

调试提示：打印查询以检查正在发生的值并尝试直接在 phpmyadmin 中运行查询。您可能会知道错误是什么。

您可以检查 firebug 控制台以获取正在发布的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T17:11:16.547

**HTML：**

```
<input type="text" name="" id="one">
<input type="text" name="" id="two">
<input type="text" name="" id="three">
<input type="submit" value="Submit" id="submit"> 
```

**JS**

```
var values = {};
$('#submit').click(function(){
$("input").each(function() {
    values[$(this).attr("id")] = $(this).val();

});
    console.log(JSON.stringify(values));

    }); 
```

您可以将对象的字符串化传递给 php，然后使用 JSON 库进行解析。检查 [http://jsfiddle.net/wmrqk/](http://jsfiddle.net/wmrqk/)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T18:46:10.913

获取所有输入的值和 id 并将它们放入一个数组中，然后将它们字符串化

```
var values = {};
$("input").each(function() {
    values[$(this).attr("id")] = $(this).val();
});
values = JSON.stringify(values); 
```

在 php 中使用 json_decode 和一个 foreach 循环

```
$arr = json_decode($_POST['values']);
$result = $mysqli->query("delete from woorden where taal_id = " . $taal);
foreach ($arr as $key => $value) {
    $query = "INSERT INTO woorden (taal_id, nummer, woord) VALUES ('" . $taal . "','" . $key . "','" . $value . "')";
    $result = $mysqli->query($query) OR die(mysql_error());
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T17:05:59.810

从您的代码中，我了解到您只是将查询存储在变量中而不是执行它。您需要在每次循环迭代中执行 SQL 查询。如果你使用 mysql，你可以这样做：

```
mysql_query($query); 
```

但请确保您首先初始化了数据库连接。

# javascript - 自定义 C++ 类型到 QJSEngine：成员函数返回值始终是 QVariant

> ID：15072226
> 
> 赞同：2
> 
> 时间：2013-02-25T16:59:39.343
> 
> 标签：javascript, qt5, qjsengine

我有一组基于 QJSEngine 的 Qt 5 中暴露给 javascript 的 C++ 类（因为 Qt 脚本似乎已被弃用）。

我的 QObject 派生类 A 和 B 有 Q_OBJECT 宏并且也使用 Q_DECLARE_METATYPE 宏。

我已经为我的类公开了工厂函数，这些函数允许我从 javascript 内部创建新实例。以下所有工作正常：

```
a = namespace.createNewA(); // QJSEngine reports a type A object
b = namespace.createNewB(); // QJSEngine reports a type B object
b.SetParent(a); // SetParent is a slot of B taking a const A& parameter, gets called correctly
// But now.
b.GetParent(); // Reports QVariant(A), even though this is a slot: A GetParent() const 
```

有没有办法让我确保 javascript 中的 GetParent 被识别为实际的 A 类对象，而不是 QVariant？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:39:22.013

我发现了原始代码的问题：

1.  在一般情况下，使用带有返回值的 Qt 槽可能不是一个好主意（参见例如[Qt：槽返回值的含义？](https://stackoverflow.com/questions/112861/qt-meaning-of-slot-return-value)）。我将函数更改为 Q_INVOKABLE，这实际上并没有改变结果，但它似乎是一个更安全的地方继续。
2.  *对于脚本/包装来说，按值*返回似乎也不是一个好主意。用调试器挖掘代码，我发现 QVariant cast-to-qobject 失败，这使得灯泡熄灭：按值可能会破坏试图查找 QObject 派生类型的 qobject_cast。我更改了调用以返回指向 QObject 的指针，现在 QJSEngine 将该对象报告为正确的类型。

这需要对我的代码设置进行一些更改，因为返回的值曾经是一个临时值，但我可以忍受。

# linux - Linux从文件中删除文本

> ID：15072227
> 
> 赞同：1
> 
> 时间：2013-02-25T16:59:40.110
> 
> 标签：linux, shell, unix, grep

我想编写一个命令，从这样的文件中删除一个项目`.todolist`：

```
path="$HOME/.todolist"
if [ "$task" == "- " ];
then 
    exit 1
fi 
cat $path | grep -v $1 > $path 
```

当我`cat $path | grep -v $1`一切正常时，但是当我尝试写回文件时，它使文件为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:06:29.450

这可能更简单：

```
sed -ie "/$1/d" $path 
```

这将删除文件中包含 $1 中的值的任何行。-i 选项告诉 sed 在适当的位置编辑文件（不是真的，但它就像它一样工作）。如果 $1 包含 /s 你会得到一个错误，但如果你需要，你可以使用其他分隔符：

```
sed -ie "\%$1%d" $path 
```

请注意，使用备用分隔符时，您必须使用“\”转义第一个分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:25:52.253

就如此容易-

```
path="$HOME/.todolist"
grep -v $1 $path | sponge $path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:04:58.823

```
path="$HOME/.todolist"
if [ "$task" == "- " ];
then 
    exit 1
fi 
a=$1
export a

perl -pi -e 'undef $_ if(/$ENV{a}/)' $path 
```

# css - CSV数据以列格式显示？

> ID：15072231
> 
> 赞同：0
> 
> 时间：2013-02-25T16:59:50.237
> 
> 标签：css, csv

我有一个从 txt 文件中提取的简单 csv 行。该行默认显示为一个简单的行，如下所示：

> 125922 1 1 1 4.613 4.985 16.164 27.618 4.990 16.169

我需要在列上显示这个，像这样：

> 125922
> 1
> 1
> 1 4.613 4.985
> 16.164 27.618 4.990 16.169

有人有想法吗？

我的想法是使用 css，或者一个简单的 php 代码 o javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:01:27.757

[`str_replace()`](http://www.php.net/manual/en/function.str-replace.php)可能会成功，因为您只是为新行切换标签：

```
echo str_replace("\t", "\n", "125922 1 1 1 4.613 4.985 16.164 27.618 4.990 16.169"); 
```

如果将其输出到 Web 浏览器，请使用：

```
echo str_replace("\t", "<br>", "125922 1 1 1 4.613 4.985 16.164 27.618 4.990 16.169"); 
```

# playframework-2.0 - play framework 2.10 自动测试

> ID：15072232
> 
> 赞同：0
> 
> 时间：2013-02-25T16:59:50.160
> 
> 标签：playframework-2.0

我已经看到有/曾经有一个`play auto-test`命令。但是，我的 play 2.10 版本没有显示它`play help`并且它不起作用。但我找不到任何关于它被删除的信息。

这个命令仍然可用还是有替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:01:31.977

如文档中[所述](http://www.playframework.com/documentation/2.1.0/PlayConsole)`~ test`，每次修改源文件时，您都可以在 Play 控制台中持续测试您的项目。

# android - 如何处理 Adsense API - Android

> ID：15072242
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:16.790
> 
> 标签：android, oauth, adsense

我想制作一个应用程序来读取我在 Adsense 上的收入。我在 Google 上制作了一个应用程序，并生成了一个 URL 来登录该应用程序。

```
https://accounts.google.com/o/oauth2/auth?from_login=0&response_type=code&scope=https://www.googleapis.com/auth/adsense&redirect_uri=xxxxxxxx&access_type=offline&as=-415b671ff3966dc2&pli=1&client_id=xxxxxxxxxxx&authuser=0&hl=en 
```

但是当用户登录应用程序并单击“允许”时，输出没有访问令牌只有“代码”。我还想知道是否有在 android 上使用 google OAuth api 的示例，因为我尝试使用它但失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T09:50:48.120

有一个适用于 Android 的 AdSense 管理 API 示例： [https ://github.com/googleads/googleads-adsense-examples/tree/master/android](https://github.com/googleads/googleads-adsense-examples/tree/master/android)

它使用 Google Play 服务来获取设备上的帐户列表，并使用 Java 的 Google 客户端库来发出请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T10:40:36.320

是的，在调用任何 Google 的 API 之前，您需要先进行 OAuth 身份验证，从而获得有效的令牌。

检查一下以了解如何：

[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

# git - 带有开发、暂存和生产分支的 git

> ID：15072243
> 
> 赞同：84
> 
> 时间：2013-02-25T17:00:17.987
> 
> 标签：git

这篇文章听起来很有趣，但我很确定图表是错误的。 [http://guides.beanstalkapp.com/version-control/branching-best-practices.html](http://guides.beanstalkapp.com/version-control/branching-best-practices.html)

不应该是`DEVELOPMENT`> `STAGING`>`PRODUCTION`吗？

> 合并应该只流向一个方向：从在自己的分支或开发中完成的功能和错误修复到测试阶段。测试后，您可以将这些更改从开发合并到生产中。

在这里我有点困惑。所以我将 Staging 合并到 Master 或 Master 到 Staging？

我正在使用一个名为 SmartGit 的客户端，我对这一点感到困惑。通常我为一个特性创建一个分支，提交它，然后切换到 master 并将其合并到分支（转发）。因此，在这个包含 Staging 和 Production 的新工作流程中，我创建了这两个额外的分支，然后从 master（又名 dev）为我的功能创建一个分支。提交它，然后切换到暂存并合并（转发）到我的功能分支？这听起来正确吗？

* * *

实际上让这件事如此令人困惑的是 Beanstalk 人支持他们非常不标准地使用 Staging（在他们的图表中它出现在开发之前，这不是一个错误！ [https://twitter.com/Beanstalkapp/status/306129447885631488](https://twitter.com/Beanstalkapp/status/306129447885631488)

已经决定忘记 Beanstalk，直接使用 Github。

* * *

自从我发布了这篇文章后，Beanstalk 的人接受了我的提示，并重新命名了他们的阶段，现在将 Development 称为“Stable”。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-25T17:02:59.250

这里的思考过程是您将大部分时间花在`development`. 在开发中，您创建一个`feature`分支（关闭`development`），完成功能，然后合并回`development`. 然后可以通过合并将其添加到最终生产版本中`production`。

有关此方法的更多详细信息，请参阅[成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T20:16:17.160

我们做的不同。恕我直言，我们以更简单的方式做到这一点：`master`我们正在开发下一个主要版本。

每个较大的功能都有自己的分支（从 master 派生），并且将由开发人员定期在 master 之上重新定位（+强制推送）。仅当单个开发人员使用此功能时，重新定基才能正常工作。如果功能完成，它将重新基于主节点，然后主节点快速转发到最新的功能提交。

为了避免变基/强制推送，还可以定期将主更改合并到功能分支，如果完成，将功能分支合并到主分支（正常合并或壁球合并）。但是恕我直言，这使功能分支变得不那么清晰，并使重新排序/清理提交变得更加困难。

如果新版本即将发布，我们会在 master 之外创建一个侧分支，例如`release-5`只修复错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T19:12:16.390

实际上，让这变得如此混乱的是 Beanstalk 人支持他们非常不标准地使用 Staging（在他们的图表中它出现在开发之前，这不是一个错误！

[https://twitter.com/Beanstalkapp/status/306129447885631488](https://twitter.com/Beanstalkapp/status/306129447885631488)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T23:50:47.830

关于 git 最好的事情之一是您可以更改最适合您的工作流程.. 我大部分时间都使用[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)但是您可以使用任何适合您需求的工作流程

# java - Amazon.com 学生最终成绩

> ID：15072245
> 
> 赞同：3
> 
> 时间：2013-02-25T17:00:30.797
> 
> 标签：java, algorithm, sorting, amazon, complexity-theory

这个问题是在 Amazon.com 面试的在线测试中。确切的问题是：

> 给定一个测试结果列表（每个都有测试日期、学生 ID 和学生的分数），返回每个学生的最终分数。学生的最终分数是他/她的 5 个最高考试分数的平均值。您可以假设每个学生至少有 5 个考试成绩。
> 
> 为您的解决方案使用以下框架

```
class TestResult{
   int studentId;
   Date testDate;
   int testScore;
}

public Map<Integer, Double> getFinalScores(List<TestResult> resultList){
   return null;
} 
```

我的解决方案是这样的：

*   我创建了一个`HashMap<Integer, SortedSet<TestResult>`名为 studentIdToResultSet。
*   Comparator 将比较结果中的 testScore，并为较高的分数返回 1，以便从高到低排序。
*   遍历给定的结果列表并将所有测试结果放入映射中（检查条目是否存在，如果存在：添加到集合，如果不存在：使用新集合创建条目并将结果添加到列表中。
*   遍历 HashMap，对于每个条目，我遍历前 5 个集合条目并获得平均值，然后将其放入另一个 HashMap，我最终将其返回。

现在这是我的问题：

1.  我不知道我的解决方案的复杂性（O）是什么。我最好的猜测是它是 O(n+n)，但我不确定。
2.  这个问题有更优化的解决方案吗？
3.  如果我在问题中添加一个约束条件，即返回的地图必须按照学生排名的顺序进行迭代，该怎么办？

PS 之前看到有人问过这个问题@[计算平均值？](https://stackoverflow.com/questions/14973073/calculating-the-average)但他不清楚，也没有提供骷髅。如果这违反了发布规则，我提前道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:07:05.370

使用`minHeap`大小为 5 的 a。

复杂性：O(klogn)，k =5 ==> O(logn)。和 O(n+m) ，通常 = O(max(n,m) 。在你的情况下它的 O(n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:14:54.070

您的算法似乎具有 O(nLog (n)) 时间复杂度。您的树可以有任何大小，包括最坏情况下的 n。您可以使用每个学生 ID 的最小堆，而不是使用树。每次向其中添加第六个项目时，删除最小值，以便它始终保持最好的 5 个分数。

正如 Droider 解释的那样，这样你就可以保证 n 中的线性时间。

# sql - 按 CharIndex() 排序的 SQL

> ID：15072246
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:33.687
> 
> 标签：sql, asp-classic, sql-order-by

我正在运行一个相当长的 SQL 查询，其核心是非常基本的：

```
SELECT * FROM documents WHERE doc_id IN (995,941,940,954,953,973) 
```

这个查询的目标结果是按照它们在 IN 子句中设置的顺序显示文档。但是，我还没有找到一个干净的解决方案。

我想我可以使用 charindex() 来处理这个问题。

```
ORDER BY charindex('995,941,940,954,953,973',doc_id) 
```

ORDER BY 的结果只是按照默认的 ASC 顺序对 doc_ids 进行排序。

关于如何具体定义此查询的结果顺序的任何指导？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:03:01.630

您的 charindex 是向后的：

```
order by charindex(doc_id, '995,941,940,954,953,973') 
```

如果`doc_id`存储为数字，则需要进行强制转换：

```
order by chardindex(cast(doc_id as varchar(255)),  '995,941,940,954,953,973') 
```

而且，您可以考虑将文档 ID 放在一个列表中。然后可以在整个查询中使用它们：

```
with doclist as (
      select 1 as ordering, '995' as docid union all
      select 2 , '941' union all
      . . .
)
select . . .
from . . .
     left outer join
     doclist dl
     on docid = dl.docid
order by dl.ordering 
```

# javascript - 是否有使用与 PlayFramework 1.x 中相同语法的 javascript 模板库？

> ID：15072247
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:35.147
> 
> 标签：javascript, playframework, template-engine, playframework-1.x

我正在寻找一个与 Play 1.x 模板语言的语法完全匹配的 javascript 模板库，因此我可以在客户端-服务器环境中共享模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:40:23.183

据我所知不是。

但是 Play 1.x 有一个[Mustache 模块](https://github.com/murz/play-mustache)，根据模块主页，它允许您*“定义可在 Play 视图中的服务器端以及 JavaScript 中的客户端使用的无逻辑模板片段” 。*

# php - 在oracle SQL developer中从查询列名中查找表

> ID：15072248
> 
> 赞同：5
> 
> 时间：2013-02-25T17:00:36.027
> 
> 标签：php, sql, oracle, coldfusion, oracle-sqldeveloper

我想在不知道表名的情况下查询数据库的列名来查找表（有大量的表）

我目前正在使用一个庞大的数据库，并试图根据 CFML 代码和有问题的页面的 URL 找到网站从哪里检索信息。我是 ColdFusion 的新手，但是我可以看到 URL 包含一些带有列名的 ID 引用。有些我很容易找到，有些我不知道，因为列名很模糊，例如“NTASKID”。

我的计划是尝试使用列名查询数据库，但谷歌向我展示了需要知道我没有的表名的查询。我猜这些例子可能对非规范化表更有用（？）。

如果有人知道这样的查询，那就太好了。此外，有人可以评论我是否在这里进行正确的调查吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T17:40:38.333

有效的查询是

```
SELECT * FROM ALL_TAB_COLUMNS 
WHERE COLUMN_NAME LIKE '%TASK%' 
AND owner = 'database_name'; 
```

这是我以前不知道的“所有者”部分。每个回答的人都为进一步的谷歌搜索开辟了道路。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T09:49:31.870

IDE 本身有一个功能，View > Find DB Obect

这是[一个 20 秒的视频](https://www.youtube.com/watch?v=z1S3BjLc4tQ&list=UUdzrhKSHU3Tf8QDOuM7EF9g)显示它，在行动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:20:47.657

如果您需要查找表名，则“juergen d”回答了您的问题。如果您需要查找列名，则使用 user_tab_columns/all_tab_columns 选择列名，其中 table='YOUR_TABLE' - 必须大写以及列名。

# jquery - 为什么我必须为这个 jQuery 链使用匿名包装器？

> ID：15072250
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:42.000
> 
> 标签：jquery

我有：

```
$('p').fadeOut(300, function() { $(this).remove(); }); 
```

但为什么我不能做这些？：

```
$('p').fadeOut(300, $.fn.remove);
$('p').fadeOut(300, $().remove);
var p = $('p'); p.fadeOut(300, p.remove); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:02:53.543

`$('p').fadeOut(300, $.fn.remove);`

`$.fn.remove`在没有上下文的情况下传递。`$.proxy($.fn.remove, $("p"))`会在这里工作

```
$('p').fadeOut(300, $().remove); 
```

在没有上下文的情况下通过。 `$.proxy($().remove, $("p"))`会在这里工作

```
p.fadeOut(300, p.remove); 
```

在没有上下文的情况下通过。`$.proxy(p.remove, p)`会在这里工作

所以修复代码：

```
$('p').fadeOut(300, $.proxy($.fn.remove, $("p")));
$('p').fadeOut(300, $.proxy($().remove, $("p")));
var p = $('p'); p.fadeOut(300, $.proxy(p.remove, p)); 
```

[http://jsfiddle.net/gtv85/](http://jsfiddle.net/gtv85/)

# android - 在清单中将整个应用程序置于横向模式

> ID：15072252
> 
> 赞同：1
> 
> 时间：2013-02-25T17:00:50.527
> 
> 标签：android

清单文件中每个活动中的行`android:screenOrientation="landscape"`都会将该活动置于横向。有没有办法将整个应用程序放在清单中？我把它放在应用程序领域，但没有用。我有一个只使用横向模式的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:06:29.807

没有。您可能会在启动活动之前以某种方式将其嵌入代码中，但总的来说，活动规范必须具有该设置。[在此处](http://developer.android.com/guide/topics/manifest/activity-element.html)和[此处](http://developer.android.com/guide/topics/manifest/application-element.html)查看规范。

# c# - 即使处理了 Mvc.sitemap，DefaultSiteMapProvider 也会返回空站点地图

> ID：15072254
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:52.307
> 
> 标签：c#, asp.net-mvc, mvcsitemapprovider

[我的MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider/)项目有问题：我的站点地图总是空的。

我已经设置了一个`Mvc.sitemap`，设置了`web.config`条目。通过调试`DefaultSiteMapProvider`显示我已读取并正确处理了 .sitemap 文件。但是，返回的站点地图基本上是空的：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>
            http://localhost:59933/
        </loc>
    </url>
</urlset> 
```

然而，在单步执行代码时会发生一件奇怪的事情。`root`我单步执行 DefaultSiteMapProvider 并观察变量中的根节点。在方法快结束时，根节点在设置`isBuildingSiteMap = false`. 我不知道这可能如何影响设置根节点，但它在我的项目中始终如一地发生。

任何帮助如何防止`root`节点被覆盖表示赞赏。:)

* * *

DefaultSiteMapProvider 的注释摘录，靠近`BuildSiteMap`方法的最后（ll. 660 ff.）：

```
HttpContext.Current.Cache.Add(/*...*/); // At this point the root node is correct
isBuildingSiteMap = false; // after executing this line, `root` gets reset to an empty node.
siteMapXml = null; 
```

Mvc.站点地图：

```
<mvcSiteMap [...]>
  <mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="Test" controller="Listing" action="Index">
  </mvcSiteMapNode>
</mvcSiteMap> 
```

该`web.config`条目直接来自[文档页面](https://github.com/maartenba/MvcSiteMapProvider/wiki/Registering-the-provider)，仅针对站点地图名称进行了调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:32:47.007

我犯的错误与将 DefaultNamespaces 添加到 ControllerBuilder 有关。虚线是：

```
ControllerBuilder.Current.DefaultNamespaces.Add("My.Framework.Web"); 
```

应该是：

```
ControllerBuilder.Current.DefaultNamespaces.Add("My.Framework.Web.Controllers"); 
```

MVC 从未抱怨过这一点，并且很高兴地找到了我的控制器。

然而，一旦站点地图的构建完成，DefaultSiteMapProvider 的行为会有所不同，因为 IsAccessibleForUser() 突然成为确定子节点的一个因素。默认提供程序检查是否可以找到节点的控制器并且不在子命名空间中查找（除非命名空间以 结尾`.*`，参见`MvcSiteMapProvider.DefaultControllerTypeResolver.IsNamespaceMatch(string requestedNamespace, string targetNamespace)`）。

因为我没有使用通配符，但假设 MVC 工作时站点地图可以工作，所以它咬了我一口。

# android - 我的数据库不会添加值。我有代码

> ID：15072255
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:53.733
> 
> 标签：android, database, sqlite

我的代码有问题吗？setStatus 总是返回 -1。一直在跟踪代码是否有错误，但我找不到。也许你们这里可以。非常令人沮丧。

这就是我调用数据库的方式：

```
SQLDatabaseLevelOne sql;

        sql = new SQLDatabaseLevelOne(MainActivity.this);
        sql.open();
        sql.setStatus("1");
        sql.close(); 
```

这来自我的 SQLDatabaseLevelOne.class：

```
public static final String KEY_ID = "_id";
    public static final String KEY_QUESTION_STATUS = "_STATUS";
    public static final String KEY_SCORE = "_SCORE";
    //public static final String KEY_INDEX = "_INDEX";

    private static final String DATABASE_NAME = "passworddb";
    private static final String DATABASE_TABLE = "passwordtable";
    private static final int DATABASE_VERSION = 1;
    //private int index_score;

    private DbHelper dbHelper;
    private final Context dbContext;
    private SQLiteDatabase sqlDatabase;

    private static class DbHelper extends SQLiteOpenHelper {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            /*database.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_QUESTION_STATUS + " TEXT NOT NULL, " +
                    KEY_SCORE + " TEXT NOT NULL, " +
                    KEY_INDEX + " TEXT NOT NULL);");*/
            database.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_QUESTION_STATUS + " TEXT NOT NULL, " +
                    KEY_SCORE + " TEXT NOT NULL);");
        }

        @Override
        public void onUpgrade(SQLiteDatabase database, int arg1, int arg2) {
            database.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(database);
        }
    }

        public SQLDatabaseLevelOne(Context context) {
            dbContext = context;
        }

        public long setStatus (String status) {         
            ContentValues dbContentValues = new ContentValues();
            dbContentValues.put(KEY_QUESTION_STATUS, status);
            //dbContentValues.put(KEY_SCORE, score);
            return sqlDatabase.insert(DATABASE_TABLE, null, dbContentValues);
        }

public void open() {
            dbHelper = new DbHelper(dbContext);
            sqlDatabase = dbHelper.getWritableDatabase();
            return;
        }

        public void close() {
            dbHelper.close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:05:57.610

将您的表创建查询更改为

```
 database.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_QUESTION_STATUS + " TEXT NOT NULL, " +
                    KEY_SCORE + " TEXT);"); 
```

因为您正在创建`KEY_SCORE` ，所以您必须为列`TEXT NOT NULL`传递值 `KEY_SCORE`

**注意：**更改表结构后，您需要更改数据库版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:04:48.187

在`setStatus()`，调用`sqlDatabase.insert()`返回`-1`。这意味着您的数据无法插入。

尝试将其更改为`sqlDatabase.insertOrThrow()`；这将在失败时抛出异常，这将更容易找出实际出了什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:05:35.720

您还没有发布任何 LogCat 错误，因此可能还有其他问题。*但是您必须为两者* 设置一个值`KEY_QUESTION_STATUS`，`KEY_SCORE`因为您指定它们不能`null`在表的定义中：

```
KEY_QUESTION_STATUS + " TEXT NOT NULL, " +
KEY_SCORE + " TEXT NOT NULL);"); 
```

* * *

当你尝试这个时会发生什么？

```
public long setStatus (String status) {         
    ContentValues dbContentValues = new ContentValues();
    dbContentValues.put(KEY_QUESTION_STATUS, status);
    dbContentValues.put(KEY_SCORE, "something");
    return sqlDatabase.insert(DATABASE_TABLE, null, dbContentValues);
} 
```

# php - PHP：为什么我的 `set_include_path()` 在指向一个目录时不起作用？

> ID：15072256
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:59.910
> 
> 标签：php, require-once, set-include-path

我正在尝试将一个小库插入到我的项目中。这个库有一些跨类的包含和要求，所以我试图为所有这些设置一个包含路径。

当试图设置一个兄弟分支的包含路径时，我遇到了一个小问题。

作为参考点，`require('/../my/test.php')`工作正常。

也一样

```
set_include_path('/../');
require_once('my/test.php'); 
```

但是一旦我尝试

```
set_include_path('/../my/');
require_once('test.php'); 
```

我得到：

> 警告：require_once(one.php)：打开流失败：...中没有这样的文件或目录

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:06:40.157

开始你的路径`/`意味着查看根目录，从`/../`技术上讲，根目录*上方*的一个目录也是如此。

要将包含路径设置为当前位置的父目录，您只需要`../`. 为了使代码更具可移植性，我建议将其与`dirname(__FILE__)`获取当前目录的绝对路径结合使用。

IE：

```
set_include_path(dirname(__FILE__) . '/../my/'); 
```

`/`请注意，该示例中需要前面的内容，因为`dirname()`不返回斜杠

# asp.net-mvc-4 - 使用 identityServer 时如何选择退出身份验证？

> ID：15072257
> 
> 赞同：0
> 
> 时间：2013-02-25T17:00:59.497
> 
> 标签：asp.net-mvc-4, wif

我正在尝试 WIF 并使用 identityServer。我的问题是如何选择在控制器或控制器方法（ASP.NET MVC 4）上要求身份验证。我以前使用过 [AllowAnonymous] 属性。任何人都有如何做到这一点的任何样本？此代码仍重定向到 identityServer 以进行登录。

```
public class HomeController : Controller
{
    //
    // GET: /Home/
    [AllowAnonymous]
    public ActionResult Index()
    {
        return View();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:03:03.377

> 此代码仍重定向到 identityServer 以进行登录。

我希望您没有在 web.config 中添加以下内容，对吗：

```
<authorization>
    <deny users="?" />
</authorization> 
```

大多数 WIF 教程都显示了这一点，但如果您正在编写 ASP.NET MVC 应用程序，您应该使用`[Authorize]`和`[AllowAnonymous]`属性控制授权。

# ruby-on-rails - 在 Rails 中自定义产品规格

> ID：15072262
> 
> 赞同：0
> 
> 时间：2013-02-25T17:01:11.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, raphael

我在一家窗户制造公司工作，希望在网站中添加功能，以便客户在向订单添加零件时能够在线定制产品，并提供视觉表示。

因此，我的问题确实是在选择零件时是否可以通过Ajax或Raphael构建SVG图像？

这些部分将是：

1.  宽度
2.  高度
3.  颜色
4.  玻璃类型
5.  玻璃外面的网格等等

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:43:30.303

我会用精心制作的图像来做到这一点。您可以轻松地放大/缩小图像，隐藏/显示图像，并在客户端上使用 javascript 覆盖它们（保持透明度）。

我不会用 AJAX 来做，而是加载所有图像并根据需要显示、隐藏或覆盖（假设选项数量在合理范围内）。

# php - RedBeanPHP：Find 中的值不起作用

> ID：15072264
> 
> 赞同：1
> 
> 时间：2013-02-25T17:01:26.220
> 
> 标签：php, orm, redbean

我使用下面的示例对表中的结果进行排序，但是 orderby 变量似乎不会影响结果的顺序。我无法访问底层 SQL 查询以查看 RedBean 正在做什么，我已经检查过 $sortorder 和 $sort 是正确的值。

```
$needles = R::find('needle',
    ' haystack = :haystack ORDER BY :sortorder :sort', 
        array( 
            ':sort' => $sort
            ':sortorder'=>$sortorder, 
            ':haystack'=>$haystack 
        )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:22:09.450

参数绑定用于值，order-by 子句使用列和 SQL 语句。

RedBeanPHP 依赖于 PDO 参数绑定，这对于（除其他外）防止 SQL 注入非常有用。

这里是关于 PHP 中 PDO 参数绑定限制的讨论： [为什么 ORDER BY 子句中的绑定参数不对结果进行排序？](https://stackoverflow.com/questions/2907687/why-doesnt-binding-parameter-in-order-by-clause-order-the-results)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T06:56:19.907

但是，您可以在之前轻松准备查询字符串：

```
$query = sprintf('ORDER BY %s %s LIMIT :size', $column, $sortOrder);

$items = R::find(
    'item',
    $query,
    array(
        'size' => (int) $size
    )
); 
```

# c - 在 C 中计算任意函数 1 到 10 的函数

> ID：15072265
> 
> 赞同：0
> 
> 时间：2013-02-25T17:01:26.050
> 
> 标签：c, recursion, accumulator

如何编写具有输入函数（对任何函数都是目标）、输入数字数组和输入数组长度的函数？

功能：

```
double accumulator(double (*function)(double, double), double array[], int length) 
```

主要的：

```
int main(){
   double array[10];

   for (int i=0; i<10; i++)
      array[i] = i+1;

   printf("Sum is: %g\n", accumulator(sum,array,10));
   printf("Product is: %g\n", accumulator(product,array,10));

   return 0;
} 
```

例如 sum 应该是 55 (1 + 2 + .... + 10) 和 product 362880 (1 * 2 * ... * 10)。我猜这个函数应该是递归的，但我仍然无法得到正确的结果：/

我有这个非递归解决方案，但它当然只适用于总和......

```
double accumulator(double (*function)(double, double), double array[], int length)
{
    int temp = 0;
    for (int i = 0;i<length;i++)
    {
        temp = (*function)(temp, array[i]);

    }
    return temp;
} 
```

当然最重要的是：

```
double sum(double x, double y){
    return x+y;
}
double product(double x, double y){
    return x*y;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:06:38.983

出什么问题了：

```
double multiplicator(double (*function)(double, double), double array[], int length)
{
    int temp = 1;
    for (int i = 0;i<length;i++)
    {
        temp = (*function)(temp, array[i]);

    }
    return temp;
} 
```

要么是不同的函数，要么您需要为操作提供中性元素（0 表示求和，1 表示乘积）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:08:13.280

它不适用于乘法，因为将任何东西乘以`0`给出，嗯`0`

您需要使用第一个元素作为初始值

```
double accumulator(double (*function)(double, double), double array[], int length)
{
    int temp = array[0]; 
    for (int i = 1; i < length;i++) // start from #1
    {
        temp = (*function)(temp, array[i]);

    }
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:07:33.107

两个想法：

1.  您应该使用`double temp`而不是`int temp`.

2.  加法和乘法需要不同的起始值。总和应该从 开始`temp = 0`，但产品应该从 开始`temp = 1`。否则产品将始终为 0。

    您可以添加另一个初始值参数：

    ```
    double accumulator(double (*function)(double, double), double array[], int length, double initial) 
    ```

    或者您使用第一个数组元素作为起始值（但是您需要检查数组为空的特殊情况）：

    ```
    double temp = array[0]; 
    ```

对于它的价值，您的“累加器”函数在[其他](http://www.gnu.org/software/mit-scheme/documentation/mit-scheme-ref/Reduction-of-Lists.html)函数式编程上下文中也称为[“减少” 。](http://docs.python.org/2/library/functions.html#reduce)如果您想在 Google 上搜索该术语，这可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T17:08:12.893

如果您设置`temp = array[0]`并开始循环，您的解决方案几乎就在那里，`i = 1`而不是`i = 0`.

# visual-studio-2010 - VS2010：调试的启动动作

> ID：15072271
> 
> 赞同：1
> 
> 时间：2013-02-25T17:01:45.923
> 
> 标签：visual-studio-2010, debugging

我正在尝试更改 VS2010 (C-) 项目中调试的启动操作以运行 .bat 文件。

我在 MSDNA 上找到了[How to: Change the Start Action for Application Debugging](http://msdn.microsoft.com/en-us/library/vstudio/68c8335t%28v=vs.100%29.aspx)来了解如何做到这一点。不幸的是，虽然我使用的是 VS2010（没有快速版本），但我找不到提到的“开始操作”。在选择“本地Windows调试器”时，我可以编辑一个“命令”字段。我试图在那里输入我的 .bat 文件的完整路径，但这不起作用，因为“文件无法识别或不受支持的二进制格式”。

你知道a）为什么我没有“开始动作”，b）为什么“命令”字段中的bat文件不会运行吗？

*编辑*这是它的样子： ![在此处输入图像描述](../Images/4555ee9e609f452b5bd8eba558f2dce8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:21:45.097

刚刚在 vs2010 中创建了“控制台应用程序”并找到了“开始操作”。你有什么样的项目？

![在此处输入图像描述](../Images/9c7efeed0470ea8201aef00d649b8818.png)

**编辑：**

a) “开始行动”仅适用于 .net 项目

b) 您的 .bat 文件可能有问题。我刚刚创建了一个空的 cpp 项目并将简单的 .bat 文件设置为命令。一切都按预期工作。

这是我的 .bat 文件

```
@echo on
pause 
```

尝试使用简单的 .bat 并在此处发布结果

# vb.net - 在严格模式 VB.NET 中替换“If object = Nothing Then”

> ID：15072273
> 
> 赞同：1
> 
> 时间：2013-02-25T17:01:47.410
> 
> 标签：vb.net, nothing

我有一个函数，它有一个“object”类型的 selectedID 参数。

如果我的参数是基础类型的默认值：即整数默认值为零，我希望执行一些操作。

没有“严格”，我可以使用：

```
If selectedID = Nothing Then
    'Do Something
End If 
```

我是否必须做类似的事情：

```
If (TypeOf selectedID Is Integer AndAlso selectedID.Equals(0)) _
OrElse (TypeOf selectedID Is String AndAlso selectedID.Equals(Nothing)) _
OrElse .. other types go here .. Then
    'Do something
End If 
```

还是我缺少一种更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:28:39.830

I eventually implemented Neolisk's suggestion, which had the advantage of being short, all-encompassing and very re-usable:

```
Public Function IsDefaultObject(obj As Object) As Boolean
    Return obj.Equals(GetDefaultValue(obj.GetType()))
End Function

Public Function GetDefaultValue(t As Type) As Object
    If (t.IsValueType) Then Return Activator.CreateInstance(t)
    Return Nothing
End Function 
```

I originally went with the solution of creating a function IsDefaultObject(obj) which tells me if an object has had a default value assigned. I planned to add to it as more types got noticed.

```
Private Function IsDefaultObject(obj As Object) As Boolean
    If obj Is Nothing Then Return True
    If String.IsNullOrEmpty(obj.ToString()) Then Return True
    If obj.Equals(0) Then Return True
    If obj.Equals(New Date()) Then Return True
    Return False
End Function 
```

Of course, I could have used the solution in Hans Passant's comment:

```
Private Function IsDefaultObject(obj As Object) As Boolean
    Return Microsoft.VisualBasic.CompilerServices.Operators.
        ConditionalCompareObjectEqual(obj, Nothing, False)
End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T13:21:05.373

您也可以为此使用可为空的类型。

```
Dim selectedID As Integer? = nothing

...

if selectedID isnot nothing then

    dim value as integer = selectedID.value
    ...

end if 
```

另一种检查可空类型是否已被赋值的方法。

```
if selectedID.hasValue = true then

   dim value as integer = selectedID.value
   ...

end if 
```

# machine.fakes - 如何使用 Machine.Fakes.Moq 来验证方法是否被调用？

> ID：15072274
> 
> 赞同：0
> 
> 时间：2013-02-25T17:01:48.157
> 
> 标签：machine.fakes

我正在使用 Machine.Fakes.Moq 并且我想验证是否调用了接口的方法。验证它的正确方法是什么。我想验证是否使用特定类型的参数调用了该方法，比如说字符串。

谁能告诉我它的语法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:04:48.293

好吧想通了，

这是语法

```
Object.WasToldTo(s => s.MethodName(Param.IsAny<String>())); 
```

# ember.js - EmberJS：有可能脱离 forEach 吗？

> ID：15072278
> 
> 赞同：7
> 
> 时间：2013-02-25T17:01:56.203
> 
> 标签：ember.js

有没有办法打破 Ember 中的 forEach 迭代器？

我试图在回调（a la jQuery）中返回 false，但它不起作用。

谢谢！PJ

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T20:17:57.273

您可以使用[`Array#some`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/some)或[`Array#every`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/every)

```
[1,2,3].some(function(element) {
    return true; // Break the loop
});

[1,2,3].every(function(element) {
    return false; // Break the loop
}); 
```

更多信息[`here`](https://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T18:29:48.853

如果可用， Ember 使用本机`Array.prototype.forEach`，如果不可用，则模拟它。请参阅[https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-metal/lib/array.js#L45](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-metal/lib/array.js#L45)。

JavaScript`forEach`不支持中断。请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:37:56.137

不，我不这么认为 cfr James，查看[foreach](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-runtime/lib/mixins/enumerable.js#L192)代码，您可以看到它在引擎盖下使用了 for 循环。您可以抛出异常，但这就像编写意大利面条代码一样。但有可能，您可以在 github 上提出功能请求？或者编写您自己的实现来中断 for 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T03:24:47.277

使用`toArray`可能会删除数组的顺序，这有点违背了目的。您可以使用普通的 for 循环，但使用`objectAt`它来使其适合您。

```
var emberArray = [ ... Array of Ember objects ... ],
    min = 3,
    max = emberArray.get('length'),
    targetObject;

for( var i = min; i < max; i++ ){
    targetObject = emberArray.objectAt( i );

    if( targetObject.get('breakHere') ) {
        break;
    }
} 
```

这有一个额外的好处是允许您从某个索引开始，因此您可以循环遍历最少数量的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T19:48:07.183

使用[Array#find](http://emberjs.com/api/classes/Ember.ArrayProxy.html#method_find)并返回 true 以跳出循环。

# php - 使用 json 编码数组循环谷歌地图标记

> ID：15072281
> 
> 赞同：0
> 
> 时间：2013-02-25T17:02:13.417
> 
> 标签：php, google-maps, json

这里真的需要帮助。我用 json_encode 转换了一个数组，以便能够在下面的谷歌地图中循环遍历搜索结果的纬度/经度。如果我只使用普通标记，则地图加载正常，并且如果我回显 json 编码数组，我会得到：

```
["55.7171, 13.2354","55.6411, 13.2122"] 
```

下面的 PHP 代码（忽略除标记部分之外的大部分代码，只是让您了解它的使用方式）。

```
<?php
    if (isset($search_result)) {

        $markers = array();

        // Looping through the results and displaying appropriate data.
        foreach ($search_result as $result) {
            ?>
            <li><?= $result['first_name']; ?></li>
            <li><?= $result['last_name']; ?></li>
            <li><?= $result['address']; ?></li>
            <li><img width="80" height="80" src="<?php echo file_exists($result['profile_picture'])? $result['profile_picture'] : $img_profile_def; ?>"></li>
            <li><a href="profile.php?userid=<?= $result['id']; ?>">View This User</a></li><br><br>
    <?php
        $markers[] = $result['latitude'] . ', ' . $result['longitude'];
        }
    }
?> 
```

脚本底部的 Javascript 初始化地图等。我得到一个带有此代码但没有标记的地图。

```
<script type="text/javascript">
function initialize() {
    var markers = <?php echo json_encode($markers); ?>;

    var myLatLng = new google.maps.LatLng( <?php echo $area_coords; ?> );

    var mapOptions = {
        center:myLatLng,
        zoom:15,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

    for (i = 0; i < markers.length; i++) {

    var position = new google.maps.LatLng(markers[i]);

    var marker = new google.maps.Marker({

        map:map,
        position:position

    });
    }
}

initialize(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:11:01.693

我认为这是因为您将字符串作为 LatLng 参数而不是两个浮点数传递...也许您可以将 JSON 更改为： [[lat,lng],[lat,lng]...] 像这样：

```
$markers[] = [$result['latitude'],$result['longitude']]; 
```

接着

```
var position = new google.maps.LatLng(markers[i][0],markers[i][1]); 
```

# magento - Magento：如何实现这个连接？

> ID：15072286
> 
> 赞同：1
> 
> 时间：2013-02-25T17:02:38.100
> 
> 标签：magento, join

这是我的查询：

```
select * from sales_flat_order sfo join sales_flat_order_payment sfop on sfo.entity_id = sfop.parent_id and sfo.status = 'some status' and sfop.method = 'some method' 
```

我尝试按照官方教程（[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)）进行操作，但未能使其正常工作。

任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:10:01.847

这应该有效：

```
/** @var $orderCollection Mage_Sales_Model_Resource_Order_Collection */
$orderCollection = Mage::getResourceModel('sales/order_collection');
$orderCollection->join(array('p' => 'sales/order_payment'), 'main_table.entity_id=p.parent_id')
                ->addFieldToFilter('p.method', 'some method')
                ->addFieldToFilter('main_table.status', 'some status'); 
```

# jquery - 使用 jquery 选择最后一个孩子，但有 2 个实例

> ID：15072288
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:02:41.167
> 
> 标签：jquery, jquery-selectors, parent-child

我有 2 个包含 DL DT DD 的 div，我想选择 div 的每个最后一个 DT。但它仅从最后一个 DIV 中选择 DT。

HTML：

```
<div class=pack>
<dl>
<dt>Photos</dt>
<dd>asd</dd>

<dt>Videos</dt>
<dd>asd</dd>

<dt>Infographics</dt>
<dd>ads</dd>
</dl>
</div>

<div class=pack>
<dl>
<dt>Photos</dt>
<dd>asd</dd>

<dt>Videos</dt>
<dd>asd</dd>

<dt>Infographics</dt>
<dd>ads</dd>
</dl>
</div> 
```

jQuery：

```
$('.pack dl').find('dt').last().css({"background" : "none" }); 
```

问题是，jquery 只从第二个 DIV class=pack 中选择最后一个 DT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:04:40.650

```
$('.pack ul').each(function(){
    $(this).find('li').last().css({"background" : "none" });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:23:12.940

感谢@Brad M，每种方法都有效。

```
$('.pack dl').each(function(){
        $(this).find('dt').last().css({"background" : "none" });
    }); 
```

# vb.net - 列表视图项目居中但选择时左对齐

> ID：15072289
> 
> 赞同：0
> 
> 时间：2013-02-25T17:02:43.357
> 
> 标签：vb.net, winforms, listview

我有一个列表视图，其中有一列，每行的值都居中。我只是想找出每次使用鼠标或键盘选择其中一个条目时导致条目被推到列左侧的原因。

谢谢！

# java - 文本编辑器的数据结构以高级语言存在于何处？

> ID：15072301
> 
> 赞同：3
> 
> 时间：2013-02-25T17:03:14.220
> 
> 标签：java, swing, data-structures, textbox, text-editor

我读过数据结构在文本编辑器中被大量使用。但正如我所看到的，如果我正在用高级语言编写一个简单的文本编辑器，那么**我**就不需要使用任何数据结构。

例如，在 Java 中，我可以使用 Swing`JTextArea`和`getText()`方法将我拥有的字符串保存到文件中。基本上，我有一个没有数据结构的简单文本编辑器。

我猜编辑的数据结构`JTextArea`本身就是实现的。它是否正确？或者数据结构是否更低；也就是说，操作系统在哪里接受来自键盘的数据到缓冲区？那么有人可以帮助我理解数据结构是在什么抽象级别实现的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T21:11:06.410

文本编辑器中的关键数据结构是保存文本的结构。 [本文](http://www.cs.unm.edu/~crowley/papers/sds/sds.html)很好地总结了人们为文本编辑器选择的结构类型。这篇文章很旧，但今天仍然非常重要。

非常简单的数据结构（如字符数组）对于某些类型的操作往往太慢，例如在已经很长的文档的开头插入一个字符，因为您最终会移动或复制大量数据. 大多数数据结构通过巧妙地将文档分成块来减少或限制移动的数据量。我链接的文章有详细信息。

使用一些更高级的数据结构的另一个原因是更容易实现撤消和重做等功能。一些数据结构可以很容易地保留已删除的文本，以便通过更改一些指针或偏移量来轻松地将文档恢复到以前的状态。

额外的数据结构可以帮助格式化文本，但这些数据结构通常更适用于文档编辑器（如 Word），而不是文本编辑器。

JTextArea（以及其他平台中的类似功能）本质上是文本编辑器，它们可能使用我链接到的文章中的一种数据结构。

如果您想在该级别编写文本编辑器而不是使用现有的，则需要实现几种类型的功能：

1.  将文本从文件加载到数据结构并再次保存。
2.  响应修改文本的按键。例如，如果用户键入一个字母键，您需要将该字母插入到当前位置的文本数据结构中。如果他们按退格键，您需要删除一个字符。等等。
3.  在屏幕上显示文档。您必须经常将窗口坐标映射到文本序列中的某个点，反之亦然。例如，如果用户单击鼠标，您需要将单击的 (x,y) 坐标转换为文本序列中的某个位置。根据您的布局的复杂程度，您可能能够即时计算它，但它通常有助于拥有一个额外的数据结构，作为文本序列和窗口坐标之间的映射。当然，如果文本更改或窗口大小调整，您必须更新该数据结构。

# javascript - 带有字符串和 int 的 Javascript 警报语句

> ID：15072302
> 
> 赞同：5
> 
> 时间：2013-02-25T17:03:14.407
> 
> 标签：javascript

我是 Javascript 的新手并试图调试一个简单的 js 函数。我需要通过警报语句获取 x 的值，但它不能正确显示。如何在这种情况下连接字符串和 int 。

```
<html>
    <head>
    </head>
    <body>
        <script>
            function displaydate()  
            {
                document.getElementById("test").innerHTML='first line changed';
                document.getElementById("test1").innerHTML='second line changed';
                var x = 5;
                alert("Value of x" + String.valueOf(x));
            }
        </script>
        <p id="test">this is the 1st line</p>
        <p id="test1">this is the 2nd line</p>
        <button type="button" onclick="displaydate()">clickme!</button>

    <body>
</html> 
```

新代码：

```
<html>
    <head>
    </head>
    <body>
        <script>
            function displaydate()  
            {
                document.getElementById("test").innerHTML='first line changed';
                document.getElementById("test1").innerHTML='second line changed';
                var x = 5;
                alert("Value of x=" + x);
                var cars=new Array();
                cars[0]='car';
                cars[1]='Volvo';
                alert("Value of arrary 1 var=' + cars[0]);
                //alert("Value of arrary 2 var='+cars[1]);
            }
        </script>
        <p id="test">this is the 1st line</p>
        <p id="test1">this is the 2nd line</p>
        <button type="button" onclick="displaydate()">clickme!</button>

    <body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T17:05:10.480

```
alert("Value of x" + x); 
```

JavaScript 是一种动态语言。转换会自动为您完成。当您执行“var x = string + int”之类的操作时

**更新**

您的警报现在失败的原因是您以双引号开始警报，并以单引号结束警报的字符串部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T17:04:14.127

你可以这样做：

```
alert("Value of x - " + x); 
```

无需调用`valueOf`转换将是自动的（隐式）。

# php - 下拉列表在php中保留以前选择的值

> ID：15072305
> 
> 赞同：3
> 
> 时间：2013-02-25T17:03:20.957
> 
> 标签：php

我在 php 中创建了一个个人资料页面，用户使用 html 下拉列表选择性别。

html代码如下：

```
Gender<select name="gender"> 
    <option value=" "> EMPTY </option> 
    <option value="Male">Male</option> 
    <option value="Female">Female</option> 
</select> 
```

用户选择性别后，表单发送并将数据保存到数据库中。我想要的是，下次用户访问个人资料页面时，下拉列表会保留用户之前选择的值。例如，如果用户在下拉列表中选择“男性”，下次他访问个人资料页面进行更改时，下拉列表必须将“男性”显示为选定值（与上次保持一致）。知道如何在 PHP 中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T04:26:06.140

如果您使用表单，有一种非常简单的方法可以做到这一点。此外，您可能希望使用 isset() 以防他们第一次访问该页面。

```
<select name="gender">
    <option value="male" <?php echo isset($_GET["gender"]) && $_GET["gender"] == "male" ? "selected" : "" ?>>Male</option>
    <option value="female" <?php echo isset($_GET["gender"]) && $_GET["gender"] == "female" ? "selected" : "" ?>>Female</option>
</select> 
```

如果设置了 $_GET 变量并且最后一个是该特定选项，那么所有这一切都是在选项标记中插入“选定”。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:11:55.967

您需要做的是将`selected`属性赋予选项。假设您将配置文件信息存储在会话中并在服务器上启用了短标签，您可以执行以下操作：

```
Gender: <select name="gender"> 
    <option value=" "> Not Selected </option> 
    <option value="Male"<?=$_SESSION['gender'] == "Male" ? ' selected="selected"' : ''?>>Male</option> 
    <option value="Female"<?=$_SESSION['gender'] == "Female" ? ' selected="selected"' : ''?>>Female</option> 
</select> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T17:08:07.393

您必须阅读数据库并添加一个 php 脚本，例如：

```
<option value="Male" <?php
if ($gender == "Male") { echo " selected"; }
?>>Male</option>
<option value="Female" <?php
if ($gender == "Female") { echo " selected"; }
?>>Female</option> 
```

# php - 电子邮件问题中的 Phpmailer 图像

> ID：15072307
> 
> 赞同：2
> 
> 时间：2013-02-25T17:03:22.617
> 
> 标签：php, macos, email, phpmailer

我不知道为什么在 MAC OS X (Mail 6.2) 的邮件客户端中，图像显示如下：

![在此处输入图像描述](../Images/6b23e20218544c485b4ac3215a8fd22d.png)

和其他邮件客户端，如 gmail、outlook 或 private 图像是正确的，看起来像这样：

![在此处输入图像描述](../Images/bd6f9121859d84668174dd9add21539b.png)

**phpmailer**

```
require_once 'phpmailer/class.phpmailer.php';
$mail = new PHPMailer(true);
$mail->IsSMTP(); 

try {
    $mail->SMTPDebug  = 1;
    $mail->SMTPAuth   = true;
    $mail->Host       = "mail.com.mx";
    $mail->Port       = 587;
    $mail->CharSet    = "UTF-8";
    $mail->Username   = "soldier@mail.com.mx";
    $mail->Password   = "password?";
    $mail->SetFrom('no-reply@mail.com.mx', 'MA Consulting');
    $mail->Subject = 'Subject';
    $message = '<div style="border:solid 1px #427696;font-family:Arial;width:650px">
                <table style="background:#799db4;border-bottom:solid 1px #427696;width:650px; padding:5px;">
                    <tbody>
                        <tr>
                            <td>
                                <div style="padding:30px 30px 0;font-size:30px; height: 65px;">
                                    <a style="text-decoration: none; color: #FFF;" href="iq.com.mx/iq" target="_blank">MA Consulting</a> 
                                </div>
                            </td>
                            <td style="vertical-align:middle;text-align:right;padding-right:30px">
                                <img src="../media/Logo-MA.gif" width="120px" height="93px"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- more code -->';

    $mail->MsgHTML($message);
    $mail->AddAddress($email, $name);
    $mail->Send();
} catch (phpmailerException $e) {
    echo $e->errorMessage();
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:07:51.147

我只是猜测，因为它很难测试，但我不`width`认为`height`应该`<img>`包含`px`.

尝试删除它们：

```
<img src="../media/Logo-MA.gif" width="120" height="93"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:09:04.193

问题在这里：

```
width="120px" height="93px" 
```

您正在指定`px`and`width`属性`height`。该语法仅在 CSS 中相关；旧样式 HTML 属性始终以像素（或`%`）为单位，`px`不应指定。

# c - Sscanf 和自定义中断

> ID：15072308
> 
> 赞同：3
> 
> 时间：2013-02-25T17:03:23.893
> 
> 标签：c, string, scanf, strstr

我有一个包含空格和标签的字符串，例如：

```
<note label="description">sp|P02671|FIBA_HUMAN Fibrinogen alpha chain OS=Homo sapiens GN=FGA PE=1 SV=2</note> 
```

我只想捕获描述标记之后和'OS ='之前的部分，并且想知道使用自定义符号使用sscanf是否有意义（请参阅页面底部我当前正在进行的工作）或者是否更好使用第二个 strstr 用于解析 OS。

提前致谢

- 附加信息 -

```
if ( (p_str = (char*) strstr(buffer,"\"description\">")) ) {
  sscanf(p_str+14,"%[^OS]",(file+teller)->description);
} 
```

PS： %[^OS] 在第一次出现“O”时打破字符串，我很想知道如何输入一组字符（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:17:49.773

我宁愿使用`strstr`两次，如下：

```
#include <assert.h>
#include <stdlib.h>
#include <string.h>

char *f (const char *s) {
#define START_SYM   "\"description\""
#define END_SYM     "OS="

    char *dst   = NULL;
    char *start = strstr(s, START_SYM);
    char *end   = strstr(s, END_SYM);

    if (start != NULL && end != NULL) {
        ptrdiff_t diff = end - start;

        assert(diff > 0);
        dst = malloc(diff + 1);

        if (dst != NULL) {
            memcpy(dst, start + sizeof START_SYM, diff);
            dst[diff] = '\0';
        }
    }

    return dst;
} 
```

# google-fusion-tables - 嵌入 iframe 的 Fusion Tables 映射中的 X-Frame-Options 标头无效

> ID：15072310
> 
> 赞同：0
> 
> 时间：2013-02-25T17:03:27.417
> 
> 标签：google-fusion-tables

加载嵌入在 iframe 中的 FT 地图时，我在 Chrome javascript 控制台中看到了这一点：

[加载“ https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col4%3E%3E0+f](https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col4%3E%3E0+f) …%3E0+%3D+'Y'&h=时遇到无效的“X-Frame-Options”标头false&lat=40.0&lng=-100.0&z=4&t=1&l=col4%3E%3E0&y=2&tmplt=3': '' 不是公认的指令。标题将被忽略。

该页面在这里： http: [//new.oto-usa.org/wordpress/locations/](http://new.oto-usa.org/wordpress/locations/)

有人知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:43:06.903

这里只是猜测。我没用过embedviz。但是您的单引号 iframe src 中有一个单引号。寻找 +'Y'

# internet-explorer - ie9 symfony 和子域

> ID：15072313
> 
> 赞同：1
> 
> 时间：2013-02-25T17:03:43.710
> 
> 标签：internet-explorer, cookies, symfony1, subdomain

*   浏览器：IE 9
*   框架：Symfony 1.2
*   插件：sfguard

例子：

*   主域：domain.com
*   子域：subdomain.domain.com

当您打开 ie 时，转到 mainDomain，登录，然后转到子域，您已经登录，我不希望这样，我已经修复了它，将会话保存在不同的位置（session_save_path）。所以这是我的主要问题：

第一种情况：打开即进入主域（用户未登录），然后打开一个新选项卡，进入子域。

第二种情况：打开ie，转到subdoamin，然后打开一个新选项卡，转到mainDomain。

当用户尝试使用子域登录时： 第一种情况：用户无法登录，应用程序重定向到登录页面。第二种情况：用户可以登录。

我使用 Fiddler 看到的是：第一个场景：域：

```
**Response** sent xxx bytes of Cookie data:
    Set-Cookie: symfony=drub66g3jlv16ukp1vf00hei42; path=/ 
```

子域：

```
**Request** sent xxx bytes of Cookie data:
symfony=drub66g3jlv16ukp1vf00hei42; 
```

尝试登录时：

```
Response sent xxx bytes of Cookie data:
    Set-Cookie: symfony=9r0bqkmb29gqbe8pnhmae1rsj6; path=/ 
```

重定向到主页：

```
Request sent xxx bytes of Cookie data:

symfony=drub66g3jlv16ukp1vf00hei42;
symfony=9r0bqkmb29gqbe8pnhmae1rsj6; 
```

**请注意，最后一个请求是两次发送相同的 cookie！其中一个对应于主域！！！好像 mainDomain cookie 正在覆盖子域 cookie ！！！**

但在第二种情况下，cookie 是按以下顺序发送的：请求发送 xxx 个字节的 Cookie 数据：

```
symfony=9r0bqkmb29gqbe8pnhmae1rsj6;
symfony=drub66g3jlv16ukp1vf00hei42; 
```

**看起来这很有效，因为首先发送了子域 cookie！**

我已经看到 ie 在子域中存在下划线问题，但这不是我的情况，我还设置 ie 接受所有 cookie，并且对于我所做的每个测试，首先我清除所有 cookie 和缓存。

我知道 symfony 1.2 很旧，但现在我无法迁移到 symfony 2，我认为这不是 symfony 的问题，而是 ie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T20:17:25.897

我在 Silex（它使用 symfony 会话组件）中遇到了类似的问题，快速修复只是以不同的方式命名两个会话 cookie。似乎 IE 对域不同级别的 cookie 的处理方式与其他客户端不同。

# jquery - On() 未将处理程序附加到动态插入的元素

> ID：15072316
> 
> 赞同：0
> 
> 时间：2013-02-25T17:03:56.253
> 
> 标签：jquery

我调用一个将表格注入页面的服务：

```
$('.lobSelect').click(function (e) {
        e.stopPropagation();
        var yOffset = $(this).position().top + $(this).height() + 'px';
        var xOffset = $(this).position().left + 'px';

        $('<div class="dropdown-wrapper"></div>')
            .css('top', yOffset)
            .css('left', xOffset)
            .html('foo')
            .prependTo('body');

        $.ajax({
            url: 'http://localhost:15485/api/lineofbusiness',
            type: 'get',
            dataType: 'json'
        })
        .done(function (data) {
            var table = '<table class="multi-column-table">'
            data.forEach(function (item) {
                table += '<tr>';
                table += '<td data-target-class="lobSelect">' + item.LOB_Code + '</td>';
                table += '<td data-target-class="">' + item.LOB_Name + '</td>';
                table += '</tr>';
            });
            $('.dropdown-wrapper').html(table);
        })
        .fail(function (jqXHR, textStatus, errorThrown) {
            alert(errorThrown);
        });
    }); 
```

为什么这会附加一个处理程序：

```
$('body').on('click', '.multi-column-table tr', function () {
        //do stuff
    }); 
```

但不是这个：

```
$('.multi-column-table tr').on('click', function () {
        //do stuff
    }); 
```

**编辑**

我曾认为 On() 允许您将处理程序绑定到将来注入的元素。有没有更好的方法可以在不使用 $('body') 的情况下做我正在尝试的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:07:58.087

第一个将处理程序附加到“主体”，当附加处理程序时存在。只有当目标匹配选择器（.multi-column-table tr）时，Body 才会调用处理程序。

第二个尝试将处理程序附加到尚未在 DOM 中的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:09:29.140

因为*在您调用选择*器时给出了与选择器匹配的所有元素`$('.multi-column-table tr')`的静态列表。它不会随着与该选择器匹配的新元素添加到页面而更新。`<tr>`

 *这就是使用的全部要点`on()`- 您可以将事件附加到*容器*元素，并且由于事件冒泡，您可以侦听子/后代元素上的事件，包括动态添加的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:09:45.703

请参阅第一个将事件`body`附加到需要附加事件的元素之前存在的事件。

第二个不起作用，因为附加事件时它也不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:08:52.693

添加表格时，我会附加处理程序。

```
// untested
.done(function (data) {
    var $table = $('<table class="multi-column-table">');
    data.forEach(function (item) {
        var $tr = $('<tr>').appendTo($table);
        var $td = $('<td data-target-class="lobSelect">').text(item.LOB_Code);
        var $td2 = $('<td data-target-class="">').text(item.LOB_Name);
        $tr.append($td);
        $tr.append($td2);
        $tr.on('click', function () {
            // do stuff
        });
    });

    $('.dropdown-wrapper').html($table);
 }) 
```

正如我在评论中提到的那样，`$('.multi-column-table tr')`它不起作用，因为当您设置事件处理程序时它不在 DOM 中，而是`$('body')`在 DOM 中（并且有效）。*

# gwt - GWT 中带有选项的 Nativ 弹出窗口

> ID：15072318
> 
> 赞同：0
> 
> 时间：2013-02-25T17:03:56.880
> 
> 标签：gwt, popup, native

我目前正在为我的 GWT 应用程序构建移动界面，我注意到使用`Window.alert("message")`调用的手机本机弹出面板。我想知道是否可以做到这一点，但在弹出窗口中有不同的按钮（而不仅仅是“好的”）？这比编写单独的弹出面板要简单得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:37:31.450

您无法更改本机弹出行为。您必须为此使用[PopUpPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/PopupPanel.html)和[DialogBox](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/DialogBox.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T21:33:03.047

如果使用（或） ，则可以有`OK`和按钮。本机弹出窗口没有其他选项。`Cancel``Window.confirm()``Window.prompt()`

# sql-server-2008 - 不使用动态 SQL 的 T-SQL 动态别名

> ID：15072322
> 
> 赞同：0
> 
> 时间：2013-02-25T17:04:06.107
> 
> 标签：sql-server-2008, tsql

我需要根据场景命名列别名

```
declare @testing as varchar(max)
set @testing = 'choice'

select 1 as case when @testing = 'choice' then 'chose' else 'didntChoose' end 
```

因此，如果@testing = 'choice'，结果将如下所示：

```
chose
1 
```

别的：

```
didntChoose
1 
```

**没有动态 SQL**是否可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:07:06.790

不，除非您使用动态 SQL，否则您无法根据值更改别名的名称。

选择列时，每列只能有一个名称/别名。

如果你想要不同的列名，那么你可以使用类似下面的一些使用不同的选择语句：

```
IF @testing = 'choice'
    select 1 as 'Chose'
ELSE 
    select 1 as 'didntChoose' 
```

或者您可以返回两个单独的列：

```
select 
    case when @testing = 'choice' then 1 else 0 end Chose,
    case when @testing <> 'choice' then 1 else 0 end DidNotChose 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-14T06:57:03.917

这是我写的达到目标的东西，但这不是我做过的最优雅的作品。

不同的客户希望显示与其资源关联的属性的不同值。因此，存在一个通用表，允许每个客户为每个资源分配不同的值。

让我们首先创建结构并填充它们。没什么太花哨的：

```
create table CustResource (
CustId int,
Attr1 varchar(50),
Attr2 varchar(50),
Attr3 varchar(50),
Attr4 varchar(50),
Attr5 varchar(50))

insert into CustResource (CustId, attr1, attr2, attr3, attr4) values (1, 'Div','Dept','Machine Type','Main Usage')

/* What just happened above is that the customer assigned display values to the first 4 attributes only */

create table PortalResource (
ResourceId int,
custId     int,
ResourceName varchar(50),
Attr1 varchar(50),
Attr2 varchar(50),
Attr3 varchar(50),
Attr4 varchar(50),
Attr5 varchar(50))

insert into PortalResource (ResourceId, CustId, ResourceName, attr1, attr2, attr3, attr4) 
   values (10,1,'abcd1234','Local Government','State Emergency Services','File Server','Production')
insert into PortalResource (ResourceId, CustId, ResourceName, attr1, attr2, attr3, attr4) 
   values (11,1,'bcde2345','Local Government','State Emergency Services','Database Server','Production')
insert into PortalResource (ResourceId, CustId, ResourceName, attr1, attr2, attr3, attr4) 
   values (12,1,'bcde2346','Local Government','Department of Education','Domain Controller','Production')

/* Notice in the above that attr5 is not populated. This is deliberate! */

/* OK, now we want to accept the customer Id (I have hard-coded it here for quick reference, but you get the point) */

declare @SQLString varchar(1000)
    , @attr1 varchar (50)
    , @attr2 varchar(50)
    , @attr3 varchar(50)
    , @attr4 varchar(50)
    , @attr5 varchar(50)
    , @CustId varchar(10)

set @CustId = 1
select @attr1 = upper(attr1)
     , @attr2 = upper(attr2)
     , @attr3 = upper(attr3)
     , @attr4 = upper(attr4 )
     , @attr5 = UPPER(attr5)
     , @CustId = convert(varchar,custId)
from CustResource where custid = @CustId

set @SQLString = 'Select '  + @CustId + 'as CustomerID'
If @attr1  is not null set @SQLString = @SQLString  + 
              ' , attr1 as '   + '"' + @attr1 + '"' 
If @attr2  is not null set @SQLString = @SQLString  + 
              ' , attr2 as ' + '"' + @attr2 + '"' 
If @attr3  is not null set @SQLString = @SQLString  + 
              ' , attr3 as ' + '"' + @attr3 + '"' 
If @attr4  is not null set @SQLString = @SQLString  + 
              ' , attr4 as ' + '"' + @attr4 + '"' 
If @attr5  is not null set @SQLString = @SQLString  + 
              ' , attr5 as ' + '"' + @attr5 + '"' 
Set @SQLString = @SQLString + ' from PortalResource where CustId = ' + @CustId 

print @SQLString

exec (@SQLString) 
```

这很有魅力，但它是超级 ugleeeeee ！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:10:37.493

我将把它留在这里[http://www.sommarskog.se/dynamic_sql.html#columnalias](http://www.sommarskog.se/dynamic_sql.html#columnalias)

> 您首先将数据放入临时表中，然后使用 sp_rename 根据需要重命名列。（您需要使用 tempdb 限定 sp_rename 以使其在该数据库中运行。）

如果您经常处理动态 SQL，请阅读他的网站，如果您不小心的话，有很多方法会让您自责...

# html - 创建全宽下拉菜单

> ID：15072332
> 
> 赞同：0
> 
> 时间：2013-02-25T17:04:42.617
> 
> 标签：html, css, wordpress

我想用这个结构制作一个全宽下拉菜单（我以前从未做过）[http://jsfiddle.net/cstEv/](http://jsfiddle.net/cstEv/)

使用我目前拥有的 css，我无法将 subnav 居中，`ul`因为`ul`定位原点是 parent的原点`li`。有谁知道如何让div`ul` `.children`下的中心？`#menu`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:15:36.130

我进行了以下更改：

从：

```
.children {
            display: none;
            width: 560px;
            min-height: 30px;
            position: absolute;
            left: -244px;
            top: 48px;
            text-align: left;
            background-color: #c7c7c7;
        }
.children  li {
            position: relative;
            float: left;
            margin-left: 20px;
        } 
```

到：

```
.children{
            display: none;
            min-height: 30px;
            position: relative;
            text-align: left;
            top: 10px;
        }
        li:nth-child(3) .children{
            right: 252px;
        }
        li:last-child .children{
            right: 502px;
        }
        li:nth-child(3) .children  li {
            position: relative;
            float: left;
            width: 628px !important;
        }

        li:last-child .children li{
            position: relative;
            float: left;
            width: 628px !important;
        } 
```

看看[更新的小提琴](http://jsfiddle.net/hkpy5/3/)

# c# - Unity3D 运行时错误

> ID：15072337
> 
> 赞同：0
> 
> 时间：2013-02-25T17:04:55.010
> 
> 标签：c#, unity3d

目前我已经在 Unity 中设置了一个双摄像头场景。我为我的相机创建了一个空的游戏对象来继承并将一些第一人称控制器脚本附加到这个空的游戏对象。

当我在编辑器中运行程序时，它运行良好。当我构建项目时，游戏崩溃了，我的相机对象掉到了地上。我以前在 Unity 中从未经历过这样的事情。附件是我当前 fps 设置值的副本。

在图片中，你会看到我已经关闭了重力（设置为 0），但是当我运行构建的程序时它仍然会掉下来。

![在此处输入图像描述](../Images/214fa3be2c1911d641f4fb8484548021.png)

有没有人遇到过这样的事情？我花了一整天的时间试图解决这个问题，但我无处可去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:57:46.110

当我的父对象（我通常使用胶囊来“携带”相机，因为玩家的头部距离地面 1.70m）设置为低时，我遇到了这样的问题......如果你将你的相机家伙与游戏对象向上一米？（这样当你开始时他会跌倒在表面上）。

编辑器构建和发布构建之间的某些关系可能存在差异。

或者，如果这不是解决方案，请再次检查相关对象的空间位置。坠落地形通常是由放错位置的参考对象造成的。（我有时会*在相机下面挂一个载体对象，*而不是把*相机挂在载体对象*下面。）

正如您所说，它在编辑器构建中有效，我假设您已经为相关对象激活了*碰撞*。

# eclipse - 如何清理 GIT 冲突到一个用户的版本而忽略其余的

> ID：15072345
> 
> 赞同：0
> 
> 时间：2013-02-25T17:05:16.233
> 
> 标签：eclipse, git

我们有两个开发人员正在使用 GIT 开发一个项目。

现在我们有一个版本，用户 A 一切正常，用户 B 进行了所有可以忽略的修改。

但是用户 A 和用户 B 提交了更改...

我们如何重置情况，以便我们只使用用户 A 的版本而忽略所有用户 B 的更改？

我们正在使用 Eclipse 开发 Android 项目，并且是 GIT 的新手......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:28:26.667

从它的声音来看，您都在提交到同一个远程存储库，并且可能直接提交到`master`. 所以我假设你的历史看起来像：

```
A1    B1    A2    A3    B2
o-----o-----o-----o-----o 
```

您必须对`revert`用户 B 提交的更改：

```
git revert <hash> 
```

这将为每个还原添加一个额外的提交：

```
A1    B1    A2    A3    B2    B1r   B2r
o-----o-----o-----o-----o-----o-----o 
```

如果远程上有多个分支，请告诉我，我会更新这些细节。

旁注：如果您的所有开发人员都提交到同一个远程存储库，那么您正在使用`git`like `svn`. 每个开发人员也应该有自己的遥控器，他们可以`commit`，`branch`等等。然后，当变更集被批准时，它会被合并到中央仓库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:28:27.737

```
User A-> C1--C3--C4--C5--C6--C7--C2&7
                \              /
                 User B->C1--C2 
```

从您的问题中，我知道您想回到 C3 吗？如果是这样，您可以获得 C3 的 SHA，然后执行`git reset SHAofC3`

但无论如何，要回到特定的提交，你总是想要`git reset (--hard|--mixed|--soft) CommitSHA`. While`--hard`将清除所有更改`--soft`，并且`--mixed`只会回退提交，但不会删除更改。

虽然上述将导致非 ff 因此如果您要推送到公共存储库，您应该考虑`git revert SHAofCommit`哪个将创建一个提交，该提交将还原该提交所做的所有更改。

# tomcat - Apache SOLR 4.1 类加载器问题与 lucene 实现

> ID：15072349
> 
> 赞同：1
> 
> 时间：2013-02-25T17:05:31.483
> 
> 标签：tomcat, solr, classloader

我最近在将 Apache SOLR 4.1 战争文件部署到我们的 tomcat 6 服务器时遇到了问题。在服务器库 ($CATALINA_HOME/lib) 中，我们有一个旧的 lucene 实现库 (2.9+) 用于一些遗留搜索应用程序。SOLR 在其 .war 文件 WEB-INF/lib 中有较新的 4.1 lucene 实现 jar 文件。通过检查 Tomcat 6 文档，SOLR 库似乎应该首先加载；但是，根据经验，情况并非如此：如果我将其部署到正在运行的服务器，管理仪表板会显示它正在加载 2.9.0 lucene 实现。

添加另一个转折点：如果我停止并重新启动 Tomcat 服务器，则会切换到 4.1！正如你可能想象的那样，这让我对从属复制感到悲痛；因为我相信我的初始索引是通过 2.9 lucene 构建的，所以在某些时候重新启动了容器，使用当时加载的 4.1 进行了更新，并尝试复制到 2.9 lucene 实现的从属服务器，导致它们全部失败。

欢迎在这里提出任何建议。我尝试从 SOLR war 文件中删除 4.1 库，但它无法加载，因为某些依赖项似乎需要它们（尽管类加载器在部署后选择了“公共库”lucene 实现！）更新所有遗留文件是不可行的这些服务器上的软件到 lucene 4，因为会涉及到大量的重写。知道为什么类加载器会以这种方式执行吗？

编辑：更复杂的是，如果我在新启动的 Tomcat 上有 SOLR，显示 4.1.0 lucene 实现，然后重新加载核心或通过 Tomcat 管理器重新加载 webapp，它会回到 2.9.0！这显然是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:43:43.040

在给定的场景中，我会选择在另一个 Web 容器中运行 Solr（可能是**像 jetty 这样的轻量级**容器）。但我不确定您的架构是否具有这种灵活性，或者您可能担心这些容器的可维护性。如果您不受这些问题的影响，您可以继续使用这种方法。

另一种选择是要求您的 Tomcat 使用您的 WEB-INF 库 (WEB-INF/lib) 来进行 Solr 和服务器库 ($CATALINA_HOME/lib) 使用 lucene 进行遗留搜索。

您可以通过参数在 Web-logic Server 中实现这一点，

```
<container-descriptor>
    <prefer-web-inf-classes>true</prefer-web-inf-classes>
</container-descriptor> 
```

在 Solr web-app 的“weblogic.xml”中。

希望也有在 Tomcat 中执行此操作的选项！

# ios - 渲染音频单元时 iOS Accurate AudioTimeStamp

> ID：15072350
> 
> 赞同：2
> 
> 时间：2013-02-25T17:05:35.237
> 
> 标签：ios, objective-c, timestamp, core-audio

在我的 AudioInputRenderCallback 中，我希望捕获某些音频事件的准确时间戳。为了测试我的代码，我输入了一个点击轨道@120BPM 或每 500 毫秒（点击是准确的，我检查过，并仔细检查过）。我首先得到每个样本的分贝，并检查它是否超过阈值，这按预期工作。然后我从 AudioTimeStamp 中获取 hostTime，并将其转换为毫秒。第一次点击被分配给该静态时间戳，第二次通过计算间隔，然后重新分配给静态时间戳。我预计会看到 500 个区间。为了能够正确计算点击次数，我必须在 5 毫秒内完成。这些数字似乎在 510 和 489 之间来回反弹。我知道这不是 RTOS，但 iOS 能这么准确吗？使用 AudioUnitTimeStamp 的 mach_absolute_time 成员有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:31:09.737

音频单元是基于缓冲区的。iOS 音频单元缓冲区的最小长度似乎约为 6 毫秒。因此，如果您使用缓冲区回调的时间戳，您的时间分辨率或时间采样抖动将约为 +- 6 毫秒。

如果您查看音频单元缓冲区内的实际原始 PCM 样本并且模式匹配“攻击”瞬态（通过阈值或自相关等），您可能可以获得亚毫秒级的分辨率。

# c# - MVC在数据库中查找行不使用主键

> ID：15072352
> 
> 赞同：4
> 
> 时间：2013-02-25T17:05:39.717
> 
> 标签：c#, linq, entity-framework

假设我有以下课程：

* * *

```
public class Item

{
     [Key]
     public int itemID {get; set;}
     public int typeID {get; set;}
} 
```

* * *

我知道在数据库中查找记录通常是通过主键，例如

```
Item item = db.Item.Find(id); 
```

如何通过另一列找到记录？即在哪里找到所有记录`typeID = 1`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:19:32.370

```
Item item = db.Items.FirstOrDefault(i => i.typeID == 1); 
```

请记住，如果您不使用主键，则可能有多个项目与您的查询匹配。您可以使用`FirstOrDefault`上面的示例来获取与查询匹配的第一个（如果有）项目。

要获取具有指定类型 id 的所有项目，请使用`Where`：

```
var items = db.Items.Where(i => i.typeID == 1); 
```

# google-maps - 如何减小 wicket-stuff gmap3 库中的信息窗口大小？

> ID：15072355
> 
> 赞同：0
> 
> 时间：2013-02-25T17:05:44.957
> 
> 标签：google-maps, wicket, wicketstuff

我写页面，显示二手商品的卖家。地图上有许多简短的信息元素，包括价格、物品状态和卖家可用时间。我想减少信息窗口的可用空间，以便更多信息窗口适合屏幕。我在 wicket-stuff gmap3 的 6.5.0 中尝试了新功能 - “信息窗口内的面板”，但没有运气 - 图片显示了 css 的结果：

```
border : 1px solid black ;
margin : 0;
padding : 0; 
```

如何最小化信息 winfo 窗口的可用空间并使其适合内容？

PS如果我可以用指针制作可点击的数字组，那将是最好的。但是信息窗口不可点击，所以有标记。想法 - 用户首先根据信息窗口中显示的主要属性做出选择，然后单击他的选择并完成页面其他位置显示的信息。

PPS 嗯，我现在还有一个想法——我不需要带状态的数字。我只能用不同的颜色绘制信息（绿色=“像新的”，蓝色=“用得很辛苦，但可以用”，红色=“垃圾”）:)。

![在此处输入图像描述](../Images/a48579131ee9bd7c2d1a2b9f762d8185.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:50:50.320

又快又脏

```
var infowindow = new google.maps.InfoWindow({
  content: '<div id="iw_content"><a href="/" style="color:#f00">3434</a> <a href="/" style="color:#00f">4</a> <a href="/" style="color:#0f0">18-9</a></div>'
});

google.maps.event.addListener(infowindow,'domready',function(){
  var el = document.getElementById('iw_content');
  //* Get and set a class for the main content containers container
  el = el.parentNode.parentNode;
  el.setAttribute('class','iw_content_container_container');
  //* Get and set a class for the div containing the close window image
  closeEl = (el.previousElementSibling)?el.previousElementSibling:el.previousSibling;
  closeEl.setAttribute('class','closeInfoWindow');
  //* Get and set a class for the div containing the close and main content
  el = el.parentNode;
  el.setAttribute('class','closeInfoWindowContainer');
  //* Get and hide the troublesome background
  el = (el.previousElementSibling)?el.previousElementSibling:el.previousSibling;
  el.style.display = "none";
  //* Get and hide the top image of the arrow
  el = (el.previousElementSibling)?el.previousElementSibling:el.previousSibling;
  el.style.display = 'none';
  //* Get and hide the shadow (hiding commented out for now as not strictly requested)
  el = el.parentNode.parentNode;
  el = (el.previousElementSibling)?el.previousElementSibling.previousElementSibling:el.previousSibling.previousSibling;
  //el.style.display = 'none';
}); 
```

这可能对您有用，可以在代码中放置一些钩子，然后您可以使用 css 处理这些钩子

```
#iw_content{background:#fff}
.iw_content_container_container{height:auto!important;text-align:center}
.closeInfoWindow {top:22px!important;right:22px!important}
.closeInfoWindowContainer{position:absolute;top:52px;height:auto!important} 
```

您可能想弄乱 .closeInfoWindowContainer 的最高值，因为这取决于文本的数量。基本上只用你的那一行测试过。

我实际上尝试在代码本身中删除宽度和高度（因此在 javascript 中添加/更改），但地图有一个令人讨厌的习惯，即根据加载时光标的状态和位置将它们重新放回。

...

信息窗口是可点击的。它们只是页面中的普通 div 元素，可以这样对待。我在您的示例超链接中设置了各种值来显示这一点。

抱歉，这不是 wicketstuff，但我认为我仍然应该发布解决方案。

# html - 自定义列表样式的“子弹”或透明地获取列表编号

> ID：15072356
> 
> 赞同：0
> 
> 时间：2013-02-25T17:05:49.110
> 
> 标签：html, css

我有一个非常简单的清单

```
<ol>
    <li>item 1</li>
    <li>item 2</li>
</ol> 
```

我需要从每个列表开始`Step X:`。我当然可以手动写出来，但我更喜欢它是由 CSS 自动构建的。就像是：

```
ol li:before {
    content: "Step $";
} 
```

...它可以获取列表位置并将其插入到`$`. 理想情况下，它也应该是这样的：

* * *

### 第十步

步骤的内容。此行上方没有额外的换行符

* * *

...但我最需要的是“Step X”来获得正确的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:10:18.537

[CSS2.1 中的计数器](http://www.w3.org/TR/CSS21/generate.html#counters)：

```
ol {
    counter-reset: step;
}

ol li:before {
    counter-increment: step;
    content: "Step " counter(step);
    /* You may need to add : and/or space, e.g. "Step " counter(step) ": "; */
} 
```

不错的浏览器支持（IE8+ 和所有其他主流浏览器），您仍然可以`:before`单独设置伪元素（Step X 文本）的样式。除非您显示为块，否则不会出现换行符，`:before`并且`:after`伪元素默认显示为内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:13:26.920

你是说柜台吗？

像这样？

```
Step 1 bla bla bla
Step 2 bla bla bla 
```

如果是这样...

```
<body>
    <ol>
        <li></li>
        <li></li>
    </ol>
</body> 
```

和 CSS：

```
body 
{
    counter-reset: stepx;
}
li:before
{
    counter-increment: stepx;
    content: "Step "counter(stepx);
} 
```

**IE8 仅在指定了 !DOCTYPE 时才支持这些属性。**

# python - 使用 argparse 折叠多个选项

> ID：15072359
> 
> 赞同：1
> 
> 时间：2013-02-25T17:06:06.953
> 
> 标签：python, argparse

我正在寻找一种优雅的方式来折叠 argparse 中布尔切换的帮助消息。例如这个：

```
import argparse

parser = argparse.ArgumentParser("booleans")

parser.add_argument('--no-store', action='store_false',
                    help="Don't do it'")
parser.add_argument('--store', action='store_true',
                    help="Do it")

parser.print_help() 
```

印刷：

```
usage: booleans [-h] [--no-store] [--store]

optional arguments:
  -h, --help      show this help message and exit
  --no-store      Don't do it'
  --store         Do it 
```

但是我有一大堆布尔标志，我真正想要的是能够以一种使其打印的方式编写它：

```
usage: booleans [-h] [--[no-]store]

optional arguments:
  -h, --help      show this help message and exit
  --[no-]store    Do or don't do it. 
```

我有什么好方法可以折叠参数并提供自定义帮助文本和选项名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T07:53:50.963

您可以指定`usage`参数`ArgumentParser`并编写自己的语法行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T20:50:44.593

```
usage = ['booleans [-h]']
parser = argparse.ArgumentParser("booleans",usage=usage[0],
    formatter_class=argparse.RawDescriptionHelpFormatter)

grp1 = parser.add_argument_group(title='Boolean arguments',description='')
def foo(group, name, help):
     # create a pair of arguments, with one 'help' line
     group.add_argument('--no-'+name, action='store_false', help=argparse.SUPPRESS)
     group.add_argument('--'+name, action='store_true', help=argparse.SUPPRESS)
     usage.append(' [--[no-]%s]'%name)
     group.description += "[--[no-]%s]\t%s.\n"%(name,help)
foo(grp1, 'store', "Do or don't do it",)
foo(grp1, 'remove', "Do or don't do it",)
parser.usage = ''.join(usage)
parser.print_help() 
```

生产

```
usage: booleans [-h] [--[no-]store] [--[no-]remove]

optional arguments:
  -h, --help  show this help message and exit

Boolean arguments:
  [--[no-]store]    Do or don't do it.
  [--[no-]remove]   Do or don't do it. 
```

我`RawDescriptionHelpFormatter`用来允许使用`\t`. 它还允许多行描述（其他参数对）。

有了 ，参数是否在或`SUPPRESS`中真的无关紧要。`grp1``parser`

# python - vtk python上的实时方向跟踪器

> ID：15072368
> 
> 赞同：1
> 
> 时间：2013-02-25T17:06:32.303
> 
> 标签：python, pyqt, vtk

我想使用 vtk 和 PyQt 制作一个简单的程序，它可以跟踪和可视化 IMU 传感器的方向，例如 Razor IMU 9 DOF 传感器棒，仅实时准确地用于陀螺仪传感器，因此稍后 vtk 上的 3D 对象将旋转基于来自该传感器的值在 3 轴上。我的问题是，我应该如何在 vtk 和 PyQt 上实现它？我是 vtk 和 PyQt 的新手。如果你能在这方面帮助我，那将是我的荣幸。谢谢..

# ruby-on-rails - 未定义的方法“update_attributes”

> ID：15072370
> 
> 赞同：0
> 
> 时间：2013-02-25T17:06:39.630
> 
> 标签：ruby-on-rails

我环顾四周，我不确定如何解决这个问题。我有一个未定义的方法“update_attributes”。我在想这是因为 @user 没有定义。因此，如果我能够定义 @user 它应该能够修复它。问题是我不知道如何定义@user 来修复它。如果有人能指出我正确的方向，那就太好了。

用户.controller.rb：

```
 def edit
      @user = User.find(params[:id])
end

  def update
     @user.update_attributes(params[:id])
      flash[:success] = "Account updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:11:29.603

如果您为资源使用宁静的路径，那么更新操作应该是这样的：

```
def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
end 
```

我们本质上是首先通过 params[:id] 找到用户记录，然后更新用户字段。

# php - 使用php的动态页面

> ID：15072376
> 
> 赞同：0
> 
> 时间：2013-02-25T17:06:51.513
> 
> 标签：php, dynamic

我正在尝试在我的网站上创建动态页面，但它失败了。当我尝试它的代码时，`Xampp`它工作得很好。还有一点我不明白。它将捕获 id，但不会捕获标题或数据库中包含字符的任何内容。当我尝试`$title = $_GET['title'];`它不会工作。它仅适用于`$_GET['id'];`
任何帮助？

这是代码：

**索引.php**

```
<?php
    include('inc/code.inc.php');

    $fetch = mysql_query("SELECT * FROM `star` ORDER BY `title`");
    while ($output = mysql_fetch_assoc($fetch))
    {
        echo '<a href = "run.inc.php?id='. $output['id'] .'">'. $output['title'] .'</a><br />';
    }
?> 
```

**运行.inc.php**

```
<?php
include_once('inc/code.inc.php');

$newID = $_GET['id'];

$fetch = mysql_query("SELECT * FROM `star` WHERE `id` = $newID");

while ($output = mysql_fetch_assoc($fetch))
{
    echo $output['title'] . '<br />' . $output['explain'];
}
?> 
```

* * *

这是不起作用的代码：

**索引.php**

```
<?php
    include('inc/code.inc.php');

    $fetch = mysql_query("SELECT * FROM `star` ORDER BY `title`");
    while ($output = mysql_fetch_assoc($fetch))
    {
        echo '<a href = "run.inc.php?title='. $output['title'] .'">'. $output['title'] .'</a><br />';
    }
?> 
```

**运行.inc.php**

```
<?php
include_once('inc/code.inc.php');

$newID = $_GET['title'];

$fetch = mysql_query("SELECT * FROM `star` WHERE `title` = $newID");

while ($output = mysql_fetch_assoc($fetch))
{
    echo $output['title'] . '<br />' . $output['explain'];
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:16:01.220

请为您的 URL GET 参数添加标题..就像您添加了 ID

```
<?php
include('inc/code.inc.php');

$fetch = mysql_query("SELECT * FROM `star` ORDER BY `title`");
while ($output = mysql_fetch_assoc($fetch))
{
    echo '<a href = "run.inc.php?id='. $output['id'] .'"'.'?title='. $output['title'] .'</a><br />';
} 
```

?>

请根据您的需要修改网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:26:21.937

如果您将字符串`$_GET['title']`与列进行比较，则需要对其进行转义（与不需要转义的数字 ID 相反）。

试试这个**run.inc.php**

```
$newID = $_GET['title'];

$fetch = mysql_query("SELECT * FROM `star` WHERE `title` = '$newID'");

while ($output = mysql_fetch_assoc($fetch))
{
    echo $output['title'] . '<br />' . $output['explain'];
}

?> 
```

# ios - IOS：从 URL 打开 sqlite

> ID：15072383
> 
> 赞同：2
> 
> 时间：2013-02-25T17:07:15.850
> 
> 标签：ios, sqlite, nsdata

我想打开一个 sqlite 数据库，但它不在我的 mainBundle 中，而是在服务器中，然后我没有这个

```
NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"info.sqlite"]; 
```

但是我有

```
NSString *filePath = @"http://serverAddress/info.sqlite";
NSURL *url = [NSURL URLWithString:filePath];
NSData *myData = [NSData dataWithContentsOfURL:url]; 
```

当我读到这个数据库时，我能做什么？如果我的数据库在 mainBundle 内，我会这样做：

```
if (sqlite3_open([filePath UTF8String], &database) == SQLITE_OK) {

        const char *sql = "select id, one, two from TABLE";
        sqlite3_stmt *selectstmt;

        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                idNum = [NSNumber numberWithInt:(int)sqlite3_column_int(selectstmt, 0)];
                ...
                ... 
```

但如果我有一个 NSData？你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:24:34.137

SQLite 是“无服务器”的，您无法从您的设备访问托管在服务器中的 SQLite 文件。如果是只读数据库，可以先下载，也可以使用不同的数据库服务器（和客户端）

要将文件保存到文档目录并稍后读取它，请添加以下代码：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSString* filePath = [documentsDirectory stringByAppendingPathComponent:@"database.sqlite"];

[data writeToFile:filePath atomically:NO]; 
```

最好的办法可能是围绕数据库发布一个精简的 Web 服务包装器。使用 Web 服务而不是直接远程数据库访问有更多优点，请查看此[博客文章](http://www.agile-code.com/blog/direct-sql-access-vs-web-service/)以获得进一步的解释。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T17:29:49.453

我猜你想在发布应用程序时下载最新的数据库包而不是捆绑它，所以现在你已经下载了数据库文件并且它以`NSData`格式可用。

如果是这样，解决方案很简单，您可以简单地将`NSData`to 文件保存到您的文档目录中（[请参阅如何将 NSData 保存到文件](https://stackoverflow.com/questions/679104/the-easiest-way-to-write-nsdata-to-a-file)），然后以正常方式继续加载您的包。像这样，

```
NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"info.sqlite"]; 
```

请记住，在加载文件“info.sqlite”之前，您需要从 NSData 保存到文件。我没有尝试过，但它应该可以工作:)

快乐编码！！！

# android - 将意图过滤器从 Android 移植到 Blackberry

> ID：15072392
> 
> 赞同：1
> 
> 时间：2013-02-25T17:07:35.147
> 
> 标签：android, porting, blackberry-10, intentfilter

我正在将我的 Android 应用程序移植到 BlackBerry Playbook。

我的应用程序使用这样的意图过滤器：

```
<intent-filter>
    <action android:name="android.intent.action.GET_CONTENT" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
    </intent-filter>

<intent-filter>
<action android:name="android.intent.action.PICK" />
<category android:name="android.intent.category.DEFAULT" />
<data android:mimeType="image/*" />
</intent-filter> 
```

但它不适用于黑莓

我该如何解决？

谢谢

# css - 通过继承 css 覆盖 css 元素

> ID：15072394
> 
> 赞同：0
> 
> 时间：2013-02-25T17:07:39.953
> 
> 标签：css

我有一个具有以下 css 元素的 css 文件：

```
.ms-webpart-chrome {
    background-color: white;
} 
```

我想让它透明而不是白色，同时我想让这个 css 元素就像它一样，因为它是一个全局 css 并且一些页面正在使用它。

所以我在想我可以使用继承它。

这就是它在 html 中的外观，并且这个 div 类是自动生成的，这意味着我无法更改或做任何事情。

```
<div class="ms-searchCenter-main">
            <div class="ms-webpart-zone ms-fullWidth">
        <div id="MSOZoneCell_WebPartWPQ1" class="s4-wpcell-plain ms-webpartzone-cell ms-webpart-cell-vertical ms-fullWidth ">
            <div class="ms-webpart-chrome ms-webpart-chrome-vertical ms-webpart-chrome-fullWidth "> 
```

所以基本上我需要像它一样拥有这个，因为我不想更改或删除它：

```
.ms-webpart-chrome {
    background-color: white;
} 
```

我需要创建一个新的并将 !important 与继承一起使用。

任何形式的帮助表示赞赏

注意：我尝试了以下操作：

```
.ms-searchCenter-main .ms-webpart-chrome
{
background-color: transparent !important;
} 
```

但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T06:15:34.720

您当然可以将背景颜色指定为“透明”，因为这是 CSS 规范中的默认值（请参阅[w3schools.com 上的参考页面](http://www.w3schools.com/CSSref/pr_background-color.asp)）。

如果您的目标是使背景颜色在所有具有“ms-webpart-chrome”类的元素中透明，请尝试添加更多选择器以增加新规则的权重：

```
body div.ms-webpart-chrome {
    background-color: transparent !important;
} 
```

设置“背景：无；” 也是一种选择。您可以尝试同时添加两者。

如果您的新规则遵循另一条规则会更好（不是直接，而是按顺序紧随其后）。此外，检查是否有任何子元素正在拾取背景。

虽然 IE 有开发者工具，但我强烈推荐 Firefox + Firebug + DOM Inspector + Web Developer Toolbar 作为标准测试套件。您可以轻松地遍历 DOM 以查看是否有任何子元素应用了背景，以及在页面上实时测试不同的 CSS 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:09:57.920

您不能将背景颜色指定为透明，因为透明不是颜色。但是，您可以使用`background: none !important;`. 默认情况下，元素没有背景颜色，因此只需将其恢复为默认值（无），它将是透明的。

在此处查看此[演示](http://jsfiddle.net/nGZaa/1/)。我已经在顶部将背景设置为红色，但随后用`background: none;`下部覆盖它。这使它变得透明。红色边框显示元素所在的位置

# linux - 负责虚拟内存的内核代码

> ID：15072400
> 
> 赞同：0
> 
> 时间：2013-02-25T17:08:00.263
> 
> 标签：linux, kernel

我知道“即使是单个进程也可以拥有大于系统物理内存的虚拟地址空间”，所以只想知道哪个内核代码负责创建大于物理内存的虚拟内存？

第二件事是，我可以更改代码以使其变大吗？如果我更改代码以扩展虚拟内存，是否有任何性能优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:26:26.337

涉及所有内存管理（和[地址空间](http://en.wikipedia.org/wiki/Address_space)）管理代码。

从应用程序的角度来看，您应该了解更多的[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)（内核控制[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)并处理[页面错误](http://en.wikipedia.org/wiki/Page_fault)），尤其是[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)、[mprotect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)、[madvise(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/madvise.2.html)、[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)系统调用。应用程序使用这些系统调用更改其地址空间。您可以使用[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)文件系统来查询它。例如`cat /proc/self/maps`显示正在执行的进程的地址空间`cat`

另请阅读[高级 Linux 编程](http://advancedlinuxprogramming.com)。了解更多关于[VDSO](http://en.wikipedia.org/wiki/VDSO)和[ASLR](http://en.wikipedia.org/wiki/ASLR)的信息。

在内核中，相关的源代码主要是它的[mm/](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=tree;f=mm;hb=HEAD)子目录（但几乎每个文件系统都有`mmap`特定的代码，页面错误也与调度等有关......）

# php - 如何允许上传其他图像格式

> ID：15072402
> 
> 赞同：2
> 
> 时间：2013-02-25T17:08:02.387
> 
> 标签：php

这是上传用户徽标的代码，我想知道是否有人可以帮助我。我也希望能够允许用户上传 .png 和 .gif 文件。

对不起，如果这是一个简单的修复，但我对 php 很陌生。

```
<?
//edit logo

function resize_image ($image) {
    $imgsize = getimagesize($image);
    //check for gallery type to determine thumbnail size

    $size_x = 150;      
    $ratio = 150 / $imgsize[0];
    $size_y = $imgsize[1] * $ratio;

    $srcimage         = ImageCreateFromjpeg ($image);
    $newimage         = ImageCreateTrueColor($size_x,$size_y);  
    //$newimage        = imagecreate ($size_x, $size_y);
    imagecopyresized ($newimage, $srcimage, 0, 0, 0, 0, $size_x, $size_y,
    imagesx($srcimage), imagesy($srcimage));
    return $newimage;
}

$myrepairer = new repairer;

//resize and upload image

$file =  $_FILES['logo']['tmp_name'];
$file_name =  $_FILES['logo']['name'];

//upload the image followed by a db update.
if ($file != 'none') {
if (copy($file,'logos/'.$_REQUEST['id'].'.jpg')) {
    unlink($file);
}
$myrepairer->updatelogo($_REQUEST['id'],$_REQUEST['id']);   
$thumbnail = resize_image('logos/'.$_REQUEST['id'].'.jpg');
unlink('logos/'.$_REQUEST['id'].'.jpg');
ImageJPEG($thumbnail,'logos/'.$_REQUEST['id'].'.jpg');
}

$resultmessage = '<div align="center" class="GreenText">Logo Updated</div>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:12:59.367

您可以获取文件扩展名并使用它而不是“.jpg”。

```
$ext = pathinfo($_FILES['logo']['name'], PATHINFO_EXTENSION); 
```

所以，它会是这样的：

```
$ext = pathinfo($_FILES['logo']['name'], PATHINFO_EXTENSION);

//upload the image followed by a db update.
if ($file != 'none') {
if (copy($file,'logos/'.$_REQUEST['id'].'.'.$ext)) {
    unlink($file);
}
$myrepairer->updatelogo($_REQUEST['id'],$_REQUEST['id']);   
$thumbnail = resize_image('logos/'.$_REQUEST['id'].'.'.$ext);
unlink('logos/'.$_REQUEST['id'].'.'.$ext);
ImageJPEG($thumbnail,'logos/'.$_REQUEST['id'].'.'.$ext); 
```

# python - Python：将嵌套列表的副本附加到列表

> ID：15072405
> 
> 赞同：0
> 
> 时间：2013-02-25T17:08:12.437
> 
> 标签：python, arrays, list, append, nested

在我的代码中，我有嵌套列表`gamelist`，定义为

```
gamelist = [['3'], ['2'], ['1']] 
```

该程序的目的是将内部列表视为堆栈，将较小的元素附加到包含较大元素的堆栈或空堆栈，向上和向下扫描列表并且不重复移动。理论上这个游戏应该去：

```
[['3'], ['2'], ['1']]
[['3'], ['2', '1'], []]
[['3', '1'], ['2'], []]
[['3', '1'], [], ['2']] 
```

以此类推，直到列表从小到大排序。

为了检查当前的移动与以前的移动，我创建了，它在每次移动后都附加了`pastmoves`一个副本。`gamelist`

```
pastmoves.append(gamelist[:]) 
```

所以`pastmoves`应该读

```
[[['3'], ['2'], ['1']]]
[[['3'], ['2'], ['1'], [['3'], ['2', '1'], []]] 
```

在每次连续移动之后依此类推。

我的问题是，当游戏列表被复制时，嵌套在其中的列表不是，并且`pastmoves`在两次移动后看起来像这样：

```
[[['3'], ['2', '1'], []], [['3'], ['2', '1'], []]] 
```

我想这样做，以便所有底层值也是副本，并在`gamelist`更改时保持静态。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:10:23.397

```
from copy import deepcopy

pastmoves.append(deepcopy(gamelist)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:10:34.687

最简单的方法就是使用`copy.deepcopy()`对嵌套列表进行深度复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:11:55.300

作为 的替代方法`copy.deepcopy()`，您可以使用列表理解来执行此操作：

```
pastmoves.append([inner[:] for inner in gamelist]) 
```

请注意，这仅适用于一级嵌套，如果您有任意嵌套列表，那么`copy.deepcopy()`绝对是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:13:47.603

简单的：`pastmoves.append( list(gamelist[:]) )`

现在每次都会生成新对象

# html - 具有相同设置比率的嵌套 div 列在稍微不同的高度渲染

> ID：15072409
> 
> 赞同：2
> 
> 时间：2013-02-25T17:08:15.750
> 
> 标签：html, css, page-layout

我已经将我的页面分成两个垂直的 div，每个都包含许多嵌套的 div，以便它们调整大小以保持设定的比例。这很好用——但由于某种原因，左边的 div 最终比右边的 div*短！*CSS是一致的，但有些东西不是......

您可以在此处看到左侧列的底部出现一个间隙：

[http://jsfiddle.net/VsJLs/](http://jsfiddle.net/VsJLs/)

清楚有什么问题吗？感谢您的关注！

```
<head>
<style type="text/css">
.break {
padding-top: 25px;
}
.leftcol {
width: 50%;
position: absolute;
top: 0px;
left: 25px;
}
.leftpad {
padding-right: 38px;
}
.rightcol {
width: 50%;
position: absolute;
top: 0px;
right: 25px;
}
.rightpad {
padding-left: 37px;
}
.wrapper {
width: 100%;
display: inline-block;
position: relative;
}
.wrapper:after {
padding-top: 161.3%;
display: block;
background-color: red;
content: '';
}
</style>
</head>

<body>

<div class="leftcol">
<div class="leftpad">
<div class="break"></div>
<div class="wrapper"></div>
<div class="break"></div>
<div class="wrapper"></div>
<div class="break"></div>
<div class="wrapper"></div>
</div>
</div>

<div class="rightcol">
<div class="rightpad">
<div class="break"></div>
<div class="wrapper"></div>
<div class="break"></div>
<div class="wrapper"></div>
<div class="break"></div>
<div class="wrapper"></div>
</div>
</div>

</body>
</html> 
```

我已经尝试按照下面的建议将边距归零，但这并没有改善。看来问题可能出在`padding-top: 161.3%;`财产上。更改`%`以`px`修复缓慢的错位 - 但我需要将其保留为百分比！有人能弄清楚吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:10:29.513

该问题是由于边距边框引起的；在所有方面将其设置为 0 或相同：

```
MARGIN
{BORDER=0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:44:19.263

我想通了-我的意思是：我知道问题所在，但我仍然不确定*为什么*...我创建的排水沟不均匀分裂：

```
.leftpad {
padding-right: 38px;
} 
```

和

```
.rightpad {
padding-right: 37px;
} 
```

如果两者相等（[http://jsfiddle.net/VsJLs/1/](http://jsfiddle.net/VsJLs/1/)），那么就没有滑倒。现在我担心以这种方式创建列 - 这是另一个问题......

# android - Phonegap如何使用谷歌Play商店密钥签署应用程序

> ID：15072414
> 
> 赞同：1
> 
> 时间：2013-02-25T17:08:50.540
> 
> 标签：android, html, css, cordova

好的，我用 phonegap 构建了一个 android 应用程序，现在我想签署我的应用程序。问题是 google play 商店给了我一个许可证密钥，但我不知道如何使用它。因为 Phonegap 要求我提供“标题”“别名”和密钥库文件。Dut 是指别名和密钥库文件的标题？我的意思是我只有一个应该像钥匙一样工作的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:10:45.420

Google Play 商店为您提供的密钥用于他们的许可证验证和应用购买库。要发布您的应用程序，您需要使用密钥库文件，如此[处](http://developer.android.com/tools/publishing/app-signing.html)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T15:07:19.690

这就是我所做的，使用 Windows 系统。

1) 在此处下载适用于 Windows 的 Java[链接](https://www.java.com/en/download)

2) 设置计算机的环境变量，使其具有 keytool.exe 的路径，例如 C:\Program Files\Java\jre1.8.0_121\bin;%path%

3) 运行以下命令，将方括号中的项目替换为适当的名称，例如 MyApp 和 MyAppAlias

```
keytool -genkey -v -keystore [keystore_name].keystore -alias [alias_name] -keyalg RSA -keysize 2048 -validity 10000 
```

4) 输入密码并回答问题。在安全的地方写下密码。

5) 我正在使用 build.phonegap，所以我在我的帐户中上传了 .keystore 文件并使用密码来解锁它。然后我可以在构建时选择它。

# java - 如何使用我的 persistence.xml 创建 EntityManagerFactory 的实例？

> ID：15072415
> 
> 赞同：2
> 
> 时间：2013-02-25T17:08:50.773
> 
> 标签：java, spring, hibernate, jpa, intellij-idea

我正在使用 Spring、Hibernate 和 JPA 创建一个后端应用程序。目前应用程序测试通过但我收到警告：WARN: HHH000436: Entity manager factory name (JpaPersistenceUnit) 已注册。

我认为这样做的原因是我在 persistence.xml 中定义了我的 JpaPersistenceUnit，并且我还在我的 dao 类中创建了一个。如果是这种情况，我需要找到一种方法从 persistence.xml 获取我的 JpaPersistenceUnit 而无需（再次）创建它。但是我不知道怎么...

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
<persistence-unit name="JpaPersistenceUnit"
                  transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.archive.autodetection" value="class, hbm"/>
        <property name="hibernate.show_sql" value="true"/>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.password" value="groepD"/>
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost/groepd"/>
        <property name="hibernate.connection.username" value="groepD"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>

</persistence-unit>
</persistence> 
```

这是我的通用 dao 类：

```
public interface GenericDao<E, ID extends Serializable> {
EntityManagerFactory emf = Persistence.createEntityManagerFactory("JpaPersistenceUnit");
public void add(E entity);
public void remove(E entity);
public void update(E entity);
public E findById(ID id);
public List<E> findAll();
} 
```

这是具体的 dao 类：

```
public interface TripDao  extends GenericDao<Trip,Integer> {
} 
```

这是 dao 类的实现：

```
@Repository
public class TripDaoImpl implements TripDao {

protected EntityManager entityManager;

public TripDaoImpl() {
    entityManager = emf.createEntityManager();
}

@Override
@Transactional
public void add(Trip entity) {
    entityManager.getTransaction().begin();
    entityManager.persist(entity);
    entityManager.getTransaction().commit();
}

....
} 
```

这是实体：

```
@Entity
@Table(name = "T_TRIP")
public class Trip {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id;

@NotNull
private String name;

@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name="T_TRIP_ADMINS",
        joinColumns={@JoinColumn(name="tripId")},
        inverseJoinColumns={@JoinColumn(name="userId")})
private Set<User> admins;

@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name="T_TRIP_PARTICIPANT",
        joinColumns={@JoinColumn(name="tripId")},
        inverseJoinColumns={@JoinColumn(name="userId")})
private Set<User> invitedUsers;

@NotNull
private Boolean privateTrip;

@NotNull
private Boolean published;

@Enumerated(EnumType.STRING)
private TripType type;

@NotNull
private Integer nrDays;

@NotNull
private Integer nrHours;

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name = "tripId")
private Set<Stop> stops;

public Trip(){
    initLists();
}

private void initLists(){
    this.admins = new HashSet<User>();
    this.invitedUsers = new HashSet<User>();
    this.stops = new HashSet<Stop>();
}

public void addStop(Stop stop) {
    stops.add(stop);
}

public boolean removeStop(Stop stop) {
    if (stops.size() > 1 && stops.contains(stop)) {
        stops.remove(stop);
        return true;
    } else {
        return false;
    }
}
...More getters and setters...
} 
```

如果有人能告诉我如何修复警告，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:26:35.003

首先：（在你的applicationContext.xml中）

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"> 
    <property name="dataSource" ref="dataSource"/> 
    <property name="persistenceXmlLocation"  
        value="classpath:persistence.xml">   
    </property>   
    <property name="jpaVendorAdapter">        
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">     
        <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />  
      </bean> 
    </property>
    <property name="loadTimeWeaver"> <!-- 运行时植入 -->
      <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
</bean> 
```

下一个：（更新您的代码）删除：EntityManagerFactory emf = Persistence.createEntityManagerFactory("JpaPersistenceUnit");

next：可以通过这个@PersistenceContext protected EntityManager entityManager 获取类EntityManager；

ps：对不起，我的英文太差了，希望对你有帮助！

# javascript - 禁用带有 Cookie 的 Fancybox 弹出窗口

> ID：15072423
> 
> 赞同：0
> 
> 时间：2013-02-25T17:09:13.770
> 
> 标签：javascript, jquery, cookies, fancybox

我在我的 Wordpress 的任何页面上设置了一个延迟弹出的 Fancybox，我希望在用户在提供的输入中提交某些内容后将其禁用，或者如果它在给定的时间内不显示用户点击绕过链接。我已经尝试了在该站点周围找到的一些脚本，但似乎没有任何效果，这是我目前设置的。

```
function openFancybox() {
        setTimeout( function() {$('.pop').trigger('click'); },20000);
    }
    $(document).ready(function() {
        var visited = $.cookie('visited');
        if (visited == 'yes') {
            return false;
        } else {
            openFancybox();
        }
        $.cookie('visited', 'yes', { expires: 7 });
        $('.pop').fancybox();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:32:35.613

请尝试以下方法，看看是否有帮助。

```
openFancybox = function{
   setTimeout( function() {$('.pop').trigger('click'); },20000);
}

$(document).ready(function() {
   //Declare your cookie.
   $.cookie('visited','no', { expires: 7 });

   //Test to see if your cookie equals 'no', if true then run the fancy box.
   if ($.cookie('visited') == 'no') {
           openFancybox();
   }

   //Your Input or click to stop the fancy box
   $('#StopFancyBox').on('click',function(){
       $.cookie('visited', 'yes');
   });
}); 
```

正如@Brad 提到的，您可以使用 Web 开发人员工具进行测试，以了解您的 cookie 值在各个阶段是什么。只需转到 web.console 并回电`$.cookie('visited')`

**错误**

```
jquery.cookie.jsGET http://www.coreytegeler.com/bolivares/wp-content/themes/max-magazine/source/cookies/jquery.cookie.js 404 (Not Found) 
```

以上似乎是因为 jquery.cookie.js 文件没有引用正确的位置。

```
/bolivares/:72SyntaxError: Expected token '(' 
```

以上实际上是我的错:)对不起。在声明函数 openFancybox 时，我错过了 ()。所以应该是`openFancybox = function(){`。

```
jquery-plugins.min.js:13TypeError: 'undefined' is not an object (evaluating 'e.browser.msie')
superfish.js:123TypeError: 'undefined' is not a function (evaluating 'jQuery('ul.nav').superfish()')
woocommerce.min.js:1TypeError: 'undefined' is not a function (evaluating 'e(".plus").live') 
```

以上分别是与插件 jquery-plugins.min.js、superfish.js 和 woocommerce.min.js 的冲突。很抱歉，我无法对这些提供太多指导。

```
/bolivares/:259ReferenceError: Can't find variable: myLoop 
```

您在主 html 页面的第 259 行回调 myLoop(i)。但是搜索你所有的脚本，这并没有在任何地方声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T05:56:37.183

是的，您可以完美地编辑它，您所要做的就是创建一个 settimeout 值，以便花式框在一段时间后弹出，然后像这样编写程序

```
 <script type="text/javascript">
function openFancybox() {
    setTimeout( function() {$('#fancybox-manual-b').trigger('click'); },5000);
}
$(document).ready(function() {
    var visited = $.cookie('visited');
    $.cookie('visited', 'yes', { expires: 7 }); /*write this first*/
    if (visited == 'yes') {
        function callback(a){
                return function(){
                alert("Hello " + a);
                                    }
                                    }
                var a = "world";
                setTimeout(callback(a), 2000); /*let the page load first*/
                a = "subscriber";
    } else {
        openFancybox();
    }
    $('#fancybox-manual-b').fancybox();
});
</script> 
```

如果你愿意，你可以更改（我写这个是为了检查 cookie 是否正常工作）

```
if (visited == 'yes') {
        function callback(a){
                return function(){
                alert("Hello " + a);
                                    }
                                    }
                var a = "world";
                setTimeout(callback(a), 2000);
                a = "idiotteen";
    } 
```

至

```
if (visited == 'yes') {
return false;
} 
```

让我知道这是否对您有帮助

# c# - 不兼容的协议版本有什么影响吗？

> ID：15072430
> 
> 赞同：0
> 
> 时间：2013-02-25T17:09:38.837
> 
> 标签：c#, asp.net, signalr, signalr.client

我正在为我的 iOS 和 Android Signalr 客户端使用第 3 方库。客户端有一个 alpha-2 版本的 SignalR，服务器使用的是最新的 1.0.0 版本，因此面临协议版本不兼容的错误。如果我在客户端代码中绕过此协议匹配检查，则可以毫无问题地连接。但这会导致任何功能失败吗？

客户端无法接收我从 SignalR 服务器发送的任何数据，可能是协议不兼容的原因吗？如果是这样，那么我该如何解决这个不兼容的协议版本问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:46:23.617

它有很大的影响是的！当协议发生变化时，这意味着服务器将发送只有具有正确协议版本的客户端才能读取的数据。

例如，当我们开始压缩消息 ID（用于确定客户端收到了哪些消息）时，我们更新了协议版本。无法识别更新的消息 Id 格式的旧客户端将无法与服务器正确通信。

我建议您将 SignalR 服务器降级为 alpha-2 版本，直到第三方客户端成功更新到 1.0.0 版本。

# java - 制作一个字符串数组显示每个值，后跟一个整数数组及其值：JAVA

> ID：15072435
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:09:47.383
> 
> 标签：java

我想知道如何打印出一个字符串“Hello index:”，然后在每一行打印出 array2 中的一个值，从值 1 开始，然后在每个索引增加 1 时将 5 添加到每个索引上。 ..如果有人可以提供帮助，将不胜感激。我是java初学者，但我知道数组的基础知识。我在做数组之前学习了对象和使用对象。我的问题是如何从每个数组中获取值以打印出来。以及如何设置我的 println 来打印这些值。太感谢了！

```
public class tuna {
private String[] array1;
private int[] array2;

public tuna(String[] array1, int[] array2){
this.array1 = array1;
this.array2 = array2;
}
int i, k;
public String[] getArray1(){
    return array1;
}
public int[] getArray2(){
    return array2;
}
}

public static void main(String[] args) {
    String[] array1 = new String[10];
    int[] array2 = new int[10];
    array2[0] = 1;
    tuna me = new tuna(array1, array2);

    for(int i = 0; i < array1.length; i++){
        array1[i] = "Hello index: ";
    }

    for(int x = 1; x<array2.length - 1; x++){
                    change(array2);
        array2[x] = array2[x-1]; 
        if(array2[x+1] > array2.length)
            array2[x+1] = array2[x];

    }

            me.getArray1();
            me.getArray2(); 
```

???System.out.println();.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:23:04.807

我不确定你的意思，但如果你想从你的字符串数组中打印出一个值，你可以这样做：

```
public class New {

    public static void main(String[] args) {
       //makes array, and 10 is how many slots it will have
       String[] array1 = new String[10];
       //sets slot 1 to "Hello"
       array1[1] = "Hello";
       //prints out slot 1
       System.out.println(array1[1]);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:26:34.433

```
public class tuna
{
    private String[] array1;
    private int[] array2;

    public tuna(String[] array1, int[] array2)
    {
        this.array1 = array1;
        this.array2 = array2;
    }

    public String[] getArray1()
    {
        return array1;
    }
    public int[] getArray2()
    {
        return array2;
    }
}

public static void main(String[] args)
{
    String[] array1 = new String[10];
    int[] array2 = new int[10];
    array2[0] = 1;
    tuna me = new tuna(array1, array2);

    for(int i = 0; i < array1.length; i++)
    {
        array1[i] = "Hello index: ";
    }

    for(int i = 1; i < array2.length; i++)
    {
        change(array2);
        array2[i] = array2[i-1] + 5;
    }

    for(int i = 0; i < array2.length; i++)
    {
        System.out.println (array1[i] + array2[i]);
    }
} 
```

但是请注意，对于同一条消息，您不需要 String 数组，即 Hello 索引：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:28:39.407

> “我的问题是如何从每个数组中获取值以打印出来。我将如何设置我的 println 来打印这些值”

要打印数组中的值：

```
public static void main(String args[]) {
    String[] array1 = ..init array //Your code to initialise the array here

    for(String s : array1) {
        System.out.println(s);
    }

} 
```

# sql - SQL Server 2012 错误：FAIL_PAGE_ALLOCATION 1

> ID：15072440
> 
> 赞同：2
> 
> 时间：2013-02-25T17:10:01.127
> 
> 标签：sql

我在运行 MS SQL Server 2012 64 位标准的网络服务器机器上遇到了一些系列问题。我不断收到此错误：

2013 年 2 月 23 日 21:49:17，spid54，未知，资源池“内部”中的系统内存不足，无法运行此查询。
2013 年 2 月 23 日 21:49:17，spid54，未知，错误：701 严重性：17 状态：130。

当我阅读 MS SQL 日志文件时，这个问题总是从这个条目开始：

2013 年 2 月 23 日 21:49:16，spid57，未知，分配页面失败：FAIL_PAGE_ALLOCATION 1

**系统规格**：Windows Server 2008 R2 x64，5GB RAM，2 x Intel Xeon Dual-Core

大约每 5 天，SQL Server 就会因此内存错误而崩溃。我已经尝试升级到 Cumulative Update 5，据说它包含一个针对此内存错误的修补程序。我尝试将最大内存设置为 2600mb（因为这台机器也是我的网络服务器）。我无法弄清楚是什么导致了这个错误，或者为什么如果发生错误，MS SQL 不会自行重置——它实际上会一直尝试运行查询，直到服务器的内存用完为止。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T05:09:34.337

当遇到错误 701 时，检查你的 SQL 日志（对象资源管理器 > 管理 > Sql server 日志），你应该会发现这些东西：

```
2014-01-14 14:19:42.25 spid97
CACHESTORE_SQLCP (Total)
VM Reserved = 0 KB
......
SinglePage Allocator = xxx KB
Multipage Allocator = 0 KB ...... 
```

在您粘贴的日志上方。701日志是在申请页面时产生的。如果*xxx*足够大，**CACHESTORE_SQLCP**，这个 Memory Clerk 占用太多了。你应该检查你的客户。SQL Server 无法解决此类错误。您应该改进应用程序的行为。

试试SqlDiag，路径：C:\Program Files\Microsoft SQL Server\110\Tools\Binn\Sqldiag.exe

# html - 为什么这个 div 不能正确居中？

> ID：15072444
> 
> 赞同：0
> 
> 时间：2013-02-25T17:10:20.133
> 
> 标签：html, css, layout, tumblr

开始我的第一个 Tumblr 布局。出于某种原因，这些列都向左一点，而不是在#content 中居中。

不知道我做错了什么......任何帮助将不胜感激。

另外......如果任何人看到这个有任何建议或看到做这些专栏的更好方法，我很想听听。

谢谢山姆

代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
body {
    text-align: center;
}
#wrap {
    height: auto px;
    width: 920px;
    margin: 15px auto;
    border: 1px black solid;
}
#header {
    margin: 10px;
}
#content {
}
#column1 {
}
#column2 {
}
#column3 {
}
#footer {
}
.title {
    font-size:25px;
}
.subtitle {
    font-size:16px;
}
.column {
    width: 300px;
    float: left;

}
</style>
<title>{title}</title>
</head>
<body>
<div id="wrap">
<div id="header">
<div class="title">
{title}</div>
<div class="subtitle">
{description}</div>
</div>
<div id="content">
<div id="column1" class="column">
column1
</div>
<div id="column2" class="column">
column2
</div>
<div id="column3" class="column">
column3
</div>
</div>
<div id="footer" class="subtittle">
copyright {copyrightYears} {title}
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:25:15.710

您的容器宽度超过 900 像素（300 像素 x 3）。

将列宽设置为 33.3%（足够接近容器宽度的 1/3）。

```
.column {
    width:33.3%;
    float: left;
} 
```

[http://jsfiddle.net/CZ9Lw/](http://jsfiddle.net/CZ9Lw/)

# sql-server - 递归识别对象依赖关系的查询

> ID：15072445
> 
> 赞同：8
> 
> 时间：2013-02-25T17:10:23.547
> 
> 标签：sql-server, dependencies, common-table-expression

我有一个复杂的查询，其中包含多个表、视图和函数。函数和视图拆分为更多视图和函数，这些视图和函数可能在其中拆分为更多视图和函数。

此查询存在性能问题，因此我想获得一个清晰简洁的列表，其中列出了我的查询中引用的所有对象，这样我就有了调查的基础。如何获取此对象列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-06T20:37:51.810

**描述**

写了这个存储过程，下面**递归**地列出了所有依赖的子对象和孩子的依赖对象和孩子的孩子......等。输入参数可以是 Stored Proc、User Function、View。可以轻松更改以获得第 5 列的唯一列表，无论对象被调用的级别以及深度和对象如何。

**列**

1.  **UsedByObjectId** - 使用依赖对象的父对象
2.  **UsedByObjectName** - 父对象的名称
3.  **UsedByObjectType** - 父对象的类型 (P,V,FN)
4.  **DependentObjectId** - 父对象使用的子对象
5.  **DependentObjectName** - 子对象的名称
6.  **DependentObjectType** - 依赖子对象的类型（P、V、FN、U）
7.  **级别**- 使用对象的嵌套递归级别有多深

**编码**

```
--=========================================================================
--=========================================================================
--== utlGetAllDependentObjectsRecursive - Uses recursive common table
--==     expression to recursively get all the dependent objects as well
--==     as the child objects and child's child objects of a 
--==     Stored Procedure or View or Function.  can be easily modified to 
--==     include all other types of Objects
--=========================================================================
--=========================================================================
CREATE PROCEDURE utlGetAllDependentObjectsRecursive
(
   -- Supports Stored Proc, View, User Function, User Table
   @PARAM_OBJECT_NAME VARCHAR(500)
)
AS
BEGIN
    WITH CTE_DependentObjects AS
    (
        SELECT DISTINCT 
        b.object_id AS UsedByObjectId, 
        b.name AS UsedByObjectName, b.type AS UsedByObjectType, 
        c.object_id AS DependentObjectId, 
        c.name AS DependentObjectName , c.type AS DependenObjectType
        FROM  sys.sysdepends a
        INNER JOIN sys.objects b ON a.id = b.object_id
        INNER JOIN sys.objects c ON a.depid = c.object_id
        WHERE b.type IN ('P','V', 'FN') AND c.type IN ('U', 'P', 'V', 'FN') 
    ),
    CTE_DependentObjects2 AS
    (
       SELECT 
          UsedByObjectId, UsedByObjectName, UsedByObjectType,
          DependentObjectId, DependentObjectName, DependenObjectType, 
          1 AS Level
       FROM CTE_DependentObjects a
       WHERE a.UsedByObjectName = @PARAM_OBJECT_NAME
       UNION ALL 
       SELECT 
          a.UsedByObjectId, a.UsedByObjectName, a.UsedByObjectType,
          a.DependentObjectId, a.DependentObjectName, a.DependenObjectType, 
          (b.Level + 1) AS Level
       FROM CTE_DependentObjects a
       INNER JOIN  CTE_DependentObjects2 b 
          ON a.UsedByObjectName = b.DependentObjectName
    )
    SELECT DISTINCT * FROM CTE_DependentObjects2 
    ORDER BY Level, DependentObjectName    
END 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T17:10:23.547

我看到这篇[文章](https://stackoverflow.com/questions/14989166/is-there-a-method-to-list-all-objects-such-as-views-that-use-a-synonym/14989334#comment21051500_14989334)来识别引用特定同义词的所有对象，并在递归 CTE 的答案中使用基本逻辑来识别与正在执行的顶级查询中的对象的逗号分隔列表相关的所有对象。

```
Declare @baseObjects Nvarchar(1000) = '[Schema].[Table],[Schema].[View],[Schema].[Function],[Schema].[StoredProc]',
        @SQL Nvarchar(Max);

Declare @objects Table (SchemaName Varchar(512), TableName Varchar(512), ID Int, xtype Varchar(10));

Set     @SQL = 'Select  ss.name As SchemaName,
                        so.name As TableName,
                        so.id,
                        so.xtype
                From    sysobjects so
                Join    sys.schemas ss
                        On  so.uid = ss.schema_id
                Where   so.id In (Object_ID(''' + Replace(@baseObjects,',','''),Object_ID(''') + '''))';

Insert  @objects
Exec    sp_executeSQL @SQL;

With    test As
(
        Select  ss.name As SchemaName,
                so.name As TableName,
                so.id,
                so.xtype
        From    sys.sql_expression_dependencies sed
        Join    @objects vo
                On  sed.referencing_id = vo.ID
        Join    sysobjects so
                On  sed.referenced_id = so.id
        Join    sys.schemas ss
                On  so.uid = ss.schema_id
        Union   All
        Select  ss.name As SchemaName,
                so.name As TableName,
                so.id,
                so.xtype
        From    test
        Join    sys.sql_expression_dependencies sed
                On  sed.referencing_id = test.id
                And sed.referencing_id <> sed.referenced_id
        Join    sysobjects so
                On  sed. referenced_id = so.id
        Join    sys.schemas ss
                On  so.uid = ss.schema_id
)
Select  Distinct *
From    test
Union
Select  *
From    @objects; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-13T11:15:59.370

选中此项，您将获得所有递归对象。

```
 WITH Refobjects 
(referencing_object_name,referencing_object_type_desc) 
    AS 
    (
        SELECT
        o.name AS referencing_object_name,
        o.type_desc AS referencing_object_type_desc
        FROM
        sys.sql_expression_dependencies sed
        INNER JOIN
        sys.objects o ON sed.referencing_id = o.[object_id]
        WHERE
        sed.referenced_entity_name = 'Your Object Name'
      UNION ALL 

        SELECT
            o.name AS referencing_object_name,
            o.type_desc AS referencing_object_type_desc
        FROM
            sys.sql_expression_dependencies sed
            INNER JOIN
            sys.objects o ON sed.referencing_id = o.[object_id]
            INNER JOIN Refobjects ON sed.referenced_entity_name = Refobjects.referencing_object_name 
    )
    SELECT distinct * FROM Refobjects
    Order by 2 desc,1 ; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-25T06:52:29.697

在 SQL Server 2008 中，引入了两个新的动态管理函数来跟踪对象依赖关系：[sys.dm_sql_referenced_entities](http://sqlhint.com/sqlserver/how-to/tsql/object-table-dependencies)和[sys.dm_sql_referenced_entities](http://sqlhint.com/sqlserver/how-to/tsql/object-table-dependencies)：

*1/ 返回引用给定实体的实体：*

```
SELECT
        referencing_schema_name, referencing_entity_name, 
        referencing_class_desc, is_caller_dependent
FROM sys.dm_sql_referencing_entities ('<TableName>', 'OBJECT') 
```

*2/ 返回对象引用的实体：*

```
SELECT
        referenced_schema_name, referenced_entity_name, referenced_minor_name, 
        referenced_class_desc, is_caller_dependent, is_ambiguous
FROM sys.dm_sql_referenced_entities ('<StoredProcedureName>', 'OBJECT'); 
```

另一种选择是使用 Red Gate 的一个非常有用的工具，称为[SQL Dependency Tracker](http://www.red-gate.com/products/sql-development/sql-dependency-tracker)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T11:50:48.533

基于上面[@Raju Chavan 的](https://stackoverflow.com/a/41119741/1501497)回答，效果很好。然而...

我添加了对**schemas**的支持，以及返回（和排序）**递归级别，因此可以使用**[sp_refreshsqlmodule](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-refreshsqlmodule-transact-sql)轻松将其转换为脚本以正确顺序刷新引用对象（请参见下面的第 3 点）。

```
WITH 
  cRefobjects AS (

      SELECT o.name, s.name AS sch, o.type_desc, 1 AS level
      FROM sys.sql_expression_dependencies sed
        INNER JOIN sys.objects o ON o.object_id = sed.referencing_id
        INNER JOIN sys.schemas AS s ON s.schema_id = o.schema_id
      WHERE (sed.referenced_schema_name = '<your schema>' OR sed.referenced_schema_name IS NULL)
      AND  sed.referenced_entity_name = '<your object name>'

    UNION ALL 

      SELECT o.name, s.name AS sch, o.type_desc, cRefobjects.level + 1 AS level
      FROM
        sys.sql_expression_dependencies AS sed
        INNER JOIN sys.objects o ON o.object_id = sed.referencing_id
        INNER JOIN sys.schemas AS s ON s.schema_id = o.schema_id
        INNER JOIN cRefobjects ON sed.referenced_entity_name = cRefobjects.name
                               AND sed.referenced_schema_name = cRefobjects.sch
  )

SELECT DISTINCT name, sch, type_desc, level 
FROM cRefobjects
ORDER BY level, type_desc DESC, name; 
```

有几点需要考虑：

1.  将 <your schema> 和 <your object> 替换为您需要的内容。
2.  当被引用对象在**引用对象**中没有模式前缀时，模式实际上是未知的，因此上面的谓词`OR sed.referenced_schema_name IS NULL`。如果您没有在数据库对象中遵循最佳实践，这可能会得到错误的引用对象。
3.  [我寻求和找到这个答案的目标是编写一个脚本，在编辑视图后使用sp_refreshsqlmodule](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-refreshsqlmodule-transact-sql)自动刷新数据库中的引用对象。为此，只需将上面显示的 CTE 包装如下。这将打印以正确顺序刷新引用对象所需的 SQL：

```
DECLARE @SQL NVARCHAR(4000); SET @SQL = '';
WITH 
  cRefobjects AS (
    ...
  )
--SELECT DISTINCT name, sch, type_desc, level 
SELECT @SQL = @SQL + 'EXEC sys.sp_refreshsqlmodule ''' + sch + '.' + name + '''' + CHAR(13)+CHAR(10)
FROM cRefobjects
ORDER BY level, type_desc DESC, name;

PRINT @SQL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T18:09:10.947

我已经改进了上述答案，因为没有一个对我有用。我需要一种通过 sp_refreshsqlmodule 类型刷新复杂嵌套对象的方法。您需要将 <TYPE_NAME> 更新为您自己的。

以下方法对我有用：

```
WITH cRefobjects AS (

  SELECT o.name, s.name AS sch, o.type, 1 AS level
  FROM sys.sql_expression_dependencies sed
    INNER JOIN sys.objects o ON o.object_id = sed.referencing_id
    INNER JOIN sys.schemas AS s ON s.schema_id = o.schema_id
  WHERE (sed.referenced_schema_name = '<SCHEMA>' OR sed.referenced_schema_name IS NULL)
  AND  sed.referenced_entity_name = '<TYPE_NAME>'

UNION ALL 

  SELECT o.name, s.name AS sch, o.type, cRefobjects.level + 1 AS level
  FROM
    sys.sql_expression_dependencies AS sed
    INNER JOIN sys.objects o ON o.object_id = sed.referencing_id
    INNER JOIN sys.schemas AS s ON s.schema_id = o.schema_id
    INNER JOIN cRefobjects ON sed.referenced_entity_name = cRefobjects.name
                           AND sed.referenced_schema_name = cRefobjects.sch
  )

    SELECT name, MAX(level) as level,  'EXEC sys.sp_refreshsqlmodule @name = ''' + sch + '.' + name + '''', type
    FROM cRefobjects
    GROUP BY name, sch, type
    ORDER BY level, type, name; 
```

# sql-server-2008-r2 - 设置具有多个 int 值的变量并将 IN 与整数列一起使用

> ID：15072450
> 
> 赞同：3
> 
> 时间：2013-02-25T17:10:28.663
> 
> 标签：sql-server-2008-r2

在 SQL Server 中，我想做一些事情来达到这个效果......

```
DECLARE @Values varchar(1000)
SET @Values = '1, 2, 3'

SELECT blah  
FROM foo
WHERE IntegerColumn IN (@Values) 
```

# android - Android - 滚动 ListView 时微调器选择消失

> ID：15072456
> 
> 赞同：2
> 
> 时间：2013-02-25T17:10:39.660
> 
> 标签：android

我有一个包含一堆微调器的列表视图，但是当我滚动列表视图时，微调器的值被重置。有没有办法解决这个问题？这就是我的 ArrayAdapter 类的样子。

公共类 ProductArrayAdapter 扩展 ArrayAdapter { 私有最终上下文上下文；

```
private final List<Product> values;

public ProductArrayAdapter( Context context, List<Product> values ) {
  super( context, R.layout.product_item, values );
  this.context = context;
  this.values = values;
}

@Override
public View getView( int position, View convertView, ViewGroup parent ) {
  LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
  View rowView = inflater.inflate( R.layout.product_item, parent, false );
  Product availableProduct = values.get( position );

  ((TextView) rowView.findViewById( R.id.productCode )).setText( Product.getProductName( availableProduct.getProductCode( ) ) );

  ((Spinner) rowView.findViewById( R.id.count )).setAdapter( productCounts );

  return rowView;
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:58:46.240

我能够让它工作，但由于没有人回答我的问题，我将自己发布解决方案。

我创建了一个`HashMap<Integer,Integer>`名为 selectedItems 来存储 ArrayAdapter 的值，并将它们设置在 onItemSelected 侦听器中。并根据HashMap设置Spinner的当前选中项。

```
 if ( selectedItems.get( position ) != null ) {
    ((Spinner) rowView.findViewById( R.id.count )).setSelection( selectedItems.get( position ) );
  }

  ((Spinner) rowView.findViewById( R.id.count )).setOnItemSelectedListener( new OnItemSelectedListener( ) {

    public void onItemSelected( AdapterView<?> parent, View view,
        int pos, long id ) {
      selectedItems.put( position, pos );
    } 
```

希望这对将来遇到同样问题的其他人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T19:09:57.400

以防万一它对任何人都有帮助，我在 listView 有一个`editText`和 one时遇到了同样`spinner`的问题，而且我对这两个视图都有问题。一旦我`editText`通过使用`onFocusChangeListener`而不是解决了问题`onTextChangeListener`（[请参阅此处的解决方案](https://stackoverflow.com/questions/9328301/android-edittext-loses-content-on-scroll-in-listview)- 请参阅 defpillz 中的问题），微调器的问题就消失了。

# sql - 2 SQl 查询中同一列的条件

> ID：15072463
> 
> 赞同：0
> 
> 时间：2013-02-25T17:11:05.377
> 
> 标签：sql, sql-server

如何在 R.TypeofDayID = 2 的表中获取不同的日期，并且它不应该包含 R.TypeofDayID = 1 的日期

我可以使用以下查询获取 R.TypeofDayID = 2 的所有不同日期，但我不确定如何添加条件来获取 TypeofDayID = 2 的日期，并且日期在任何行中都不应该有 TypeofDayID = 1。

```
Select count(distinct(R.Date)) from RepInfo R   
where R.TypeofDayID = 2 and Month(R.Date) = 2 and Year(R.Date) = 2013 
```

我希望我很清楚。这是在 SQL Server 2005 中。提前谢谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:13:27.003

```
Select R.Date, count(*) as cnt
from RepInfo R   
where Month(R.Date) = 2 and Year(R.Date) = 2013
group by R.Date
having sum(case when TypeofDayID <> 2 then 1 else 0 end) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:16:46.680

如果您希望输出是不同日期的列表，为什么要在 select 语句中使用 COUNT() 函数？您是否会通过将您的选择更改为以下内容来获得所需的结果：

选择不同的（R.Date）

# php - 在php中获取Internet网络上计算机的唯一IP地址

> ID：15072464
> 
> 赞同：0
> 
> 时间：2013-02-25T17:11:11.440
> 
> 标签：php, ip, visitors

我正在尝试通过获取他们的 IP 来建立一个数据库，其中包含对我网站上特定页面的唯一访问者的记录。

下面的代码获取访问者的 IP：

```
$getip = $_SERVER['REMOTE_ADDR'];
echo "<b>IP Address: $getip</b>"; 
```

但是我意识到，如果不同的互联网用户在一个特定的互联网网络上并且他们都使用不同的计算机共享相同的 IP 地址（如公共网吧或见下面的示例），这是非常不可靠和不准确的。

例子：

**XYZ Ltd 使用特定的互联网连接，如果 XYZ Ltd 的所有员工都通过公司互联网连接连接到互联网，并且 XYZ Ltd 的 IP 地址是 69.18.107.24。如果 XYZ 的某些员工访问我的页面，上面的代码不会给我用户计算机的唯一 IP 地址，而是我会不断获取公司 IP 地址 (69.18.107.24)，这是不准确且具有欺骗性的，因为应用程序会看到它是同一个访问者，而有不同的访问者使用互联网连接 IP。**

无论他们是否共享相同的互联网连接，我如何才能根据用户的计算机获取唯一的用户 IP。

我不想使用 PHP cookie，因为有些浏览器不支持它，而有些用户禁用它或其他东西。

非常感谢获得帮助...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:18:43.640

你不能。IP 地址是一种数据包传送机制。没有什么可以保证特定网络中的 IP 地址对于一台特定的机器是唯一的，根本不存在这种相关性。机器在其网络中有一个唯一的地址，但这个地址可能不是全球唯一的（而且你无论如何也无法获得这个 IP）。共享代理的公共 IP 在公共互联网上是唯一的，但没有规定它必须对应于一台物理机器。

IPs != 机器，忍受它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:34:29.533

无法获取共享连接后面的计算机的本地 IP。即使你能得到它们，它们也不会是独一无二的，因为它们被重复使用——这就是[NAT](https://en.wikipedia.org/wiki/Network_address_translation)的全部意义所在。你会有很多人使用`192.168.1.1`或类似的地址。

如果您想区分共享相同 IP 地址的多台机器，您可以添加另一个因素，例如往往不同的[用户代理字符串。](https://en.wikipedia.org/wiki/User_agent)

例如：

```
<?php
md5(
    $_SERVER['REMOTE_ADDR'] .
    $_SERVER['HTTP_USER_AGENT']
);
// 80b567b7c7ccfbda75a9712f16ca4429 
```

只会在两个用户共享相同的 IP 地址并具有相同的浏览器和操作系统版本时才会给您一个相同的哈希值。

访问[Panopticlick](https://panopticlick.eff.org/)以了解有关“浏览器指纹识别”的更多信息。令人惊讶的是，浏览器的配置组合几乎是独一无二的。如果您使用 Javascript 进行客户端分析，您可以在其中访问显示分辨率、安装的插件版本和其他详细信息，您可以轻松区分具有共享 IP 的用户。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T17:24:01.187

这是您的问题的答案：

```
<?php

echo "IP address".$_SERVER["REMOTE_ADDR"]

echo "LAN Address".$_SERVER["HTTP_X_FORWARDED_FOR"] 
?> 
```

这不是获得唯一访问者的可靠方法。LAN地址很容易被欺骗。此外，许多公司使用 DHCP 服务器，每天都会提供新的 LAN IP。Cookie 将是“唯一”真正的检查方式。

# r - 将 2 个直方图与聚合数据一起绘制

> ID：15072468
> 
> 赞同：0
> 
> 时间：2013-02-25T17:11:23.480
> 
> 标签：r, histogram

我正在使用 R 为具有拟合正态分布线的患病和健康个体创建大小频率直方图。我有 2 个问题正在寻求建议。

1.  如何从聚合数据创建直方图？下面的示例表汇总了每种尺寸内患病和健康个体的数量。

输入（数据）

```
'structure(list(Size = c(25L, 28L, 31L, 45L, 60L), diseased = c(0L, 
22L, 10L, 5L, 2L), healthy = c(55L, 40L, 15L, 7L, 2L)), .Names = c("Size", 
"diseased", "healthy"), class = "data.frame", row.names = c(NA, 
-5L))' 
```

2.如何将两个直方图叠加到一个带有拟合正态分布线的图形中。

我已经为聚合数据 ggplot(data,aes(x=Size,y=diseased))+geom_bar(stat='identity') 尝试了以下代码，效果很好，但我不知道如何添加直方图对于健康的人。

我还尝试使用以下文本将汇总数据（称为“数据”）恢复为原始原始格式： raw <- data[rep(1:data, times=data$diseased), "Size", drop=FALSE ]

我收到以下错误消息：rep(1:data, times=data$diseased) 中的错误：'times' 参数无效。从之前的评论来看，rep 函数似乎无法处理“0”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:20:29.783

所以，我很着急，我把正常曲线拼凑在一起，但你可以用它来绘制两个“直方图风格”的图。

当然，如果我们拥有完整的数据集而不仅仅是摘要，那么获得曲线会更容易。我有点捏造了它们，但我认为这足以在这里得到大致的想法。

我不完全清楚你为什么*要这样做*，但你可以......

```
library(SDMTools) # Use this to get weighted means

testdata <- structure(list(Size=c(25L, 28L, 31L, 45L, 60L),
                           diseased=c(0L, 22L, 10L, 5L, 2L),
                           healthy=c(55L, 40L, 15L, 7L, 2L)),
                      .Names = c("Size", "diseased", "healthy"),
                      class = "data.frame",
                      row.names = c(NA, -5L))

barplot(testdata$healthy,
        names.arg=paste("                 ",testdata$Size),
        col="light blue",
        border="blue",
        xlim=c(0,6),
        ylim=c(0,70),
        width=0.5,
        space=1)
par(new=TRUE)
barplot(testdata$diseased,
        col="pink",
        border="red",
        xlim=c(0,6),
        ylim=c(0,70),
        width=0.5,
        space=c(2,1,1,1,1))

healthy_mean <- wt.mean(x=testdata$healthy,wt=testdata$Size)
healthy_sd <- wt.sd(x=testdata$healthy,wt=testdata$Size)
diseased_mean <- wt.mean(x=testdata$diseased,wt=testdata$Size)
diseased_sd <- wt.sd(x=testdata$diseased,wt=testdata$Size)

yfit_healthy <- as.data.frame(dnorm(0:max(testdata$healthy),
                              mean=healthy_mean,sd=healthy_sd))
names(yfit_healthy) <- "y"
yfit_diseased <- as.data.frame(dnorm(0:max(testdata$diseased),
                               mean=diseased_mean,sd=diseased_sd))
names(yfit_diseased) <- "y"

yfit_healthy$x <- seq(0,6,length.out=length(yfit_healthy$y))
yfit_diseased$x <- seq(0,6,length.out=length(yfit_diseased$y))

lines(yfit_healthy$x,
      (max(testdata$healthy)*yfit_healthy$y)/max(yfit_healthy$y),
      col="blue",lwd=2)

lines(yfit_diseased$x,
      (max(testdata$diseased)*yfit_diseased$y)/max(yfit_diseased$y),
      col="red",lwd=2) 
```

这段代码让我：

![不完全是我最好的图表](../Images/5dc4066b262c8efd698c2cbfbf1b34b9.png)

# c# - Azure 服务总线上的多个客户端，接收单独的消息

> ID：15072476
> 
> 赞同：2
> 
> 时间：2013-02-25T17:11:55.700
> 
> 标签：c#, .net, azure, azure-servicebusrelay

如何从 Azure 服务总线中继将单个消息提取到多个客户端，而不必为每个客户端都有一个命名空间？

背景：

我有一个 Web 服务，它有多个用户，它们是企业。数量不是很大，而是几百个。用户大多在 NAT 和防火墙后面，所以我创建了一个 Windows 服务来安装在用户本地计算机上，该服务监听 Azure 服务总线中继服务。

如何通过服务总线中继向这些用户/客户端传递单独的消息？我是否必须在服务总线上为每个用户创建一个新的命名空间？或者有什么比我能做的更聪明的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:20:04.277

这在 MSDN 上的 Windows Azure 论坛上得到了很好的回答：

[http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/235c1515-d507-4b78-9d84-9e04a49e038b](http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/235c1515-d507-4b78-9d84-9e04a49e038b)

# c++ - std::condition_variable 虚假阻塞

> ID：15072479
> 
> 赞同：6
> 
> 时间：2013-02-25T17:11:57.000
> 
> 标签：c++, c++11, condition-variable

如您所知，应循环调用条件变量以避免虚假唤醒。像这样：

```
while (not condition)
    condvar.wait(); 
```

如果另一个线程想要唤醒等待线程，它必须将条件标志设置为真。例如：

```
condition = true;
condvar.notify_one(); 
```

我想知道，这种情况是否有可能阻止条件变量：

1）等待线程检查条件标志，发现它等于FALSE，所以，它要进入`condvar.wait()`例程。

2）但就在此之前（但在条件标志检查之后）等待线程被内核抢占（例如，由于时隙到期）。

3）此时，另一个线程想要通知等待线程条件。它将条件标志设置为 TRUE 并调用`condvar.notify_one();`

4）当内核调度器再次运行第一个线程时，它进入`condvar.wait()`例程，但已经错过了通知。

因此，尽管条件标志设置为 TRUE，但等待线程无法退出`condvar.wait()`，因为不再有唤醒通知。

是否可以？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T17:25:35.507

这正是条件变量必须与互斥锁一起使用的原因，以便以原子方式更新状态并发出更改信号。完整的代码看起来更像：

```
unique_lock<mutex> lock(mutex);
while (not condition)
    condvar.wait(lock); 
```

对于另一个线程：

```
lock_guard<mutex> lock(mutex);
condition = true;
condvar.notify_one(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:21:29.083

您的示例缺少一小部分，但这解释了为什么如果正确完成这是不可能的：

```
while (not condition) // when you check condition mutex is locked
    condvar.wait( mutex ); // when you wait mutex is unlocked 
```

所以如果在同一个互斥锁下将condition改为true，就不会出现这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T07:29:57.873

Mike Seymour 他的回答是不完整的，因为有一个比赛条件最终导致唤醒丢失。正确的方法是（现在使用 c++11）如下：

线程1：

```
std::unique_lock<std::mutex> lck(myMutex);
condvar.wait(lck, []{ return condition; }); // prevent spurious wakeup
// Process data 
```

线程2：

```
{
    std::lock_guard<std::mutex> lck(myMutex);
    condition = true;
} // unlock here! prevent wakeup lost
condvar.notify_one(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-25T17:21:24.603

是的（我在 2012 年 12 月对此进行了测试），不久前我想出了一个解决方案。“Flare”类：请注意，它使用自旋锁，但在此花费的时间很少。

声明（hpp）：

```
class Flare
{
public:
/**
\brief Flare's constructor.
\param fall_through_first, will skip the first wait() if true.
*/
Flare(bool fall_through_first = false);

/**
\brief Flare's destructor.

Takes care of removing the object of this class.
*/
~Flare();

/**
\brief Notifies the same object of availability.

Any thread waiting on this object will be freed,
and if the thread was not waiting, it will skip
wait when it iterates over it.
*/
void notify();

/**
\brief Wait until the next notification.

If a notification was sent whilst not being
inside wait, then wait will simply be skipped.
*/
void wait();

private:
    std::mutex m_mx; // Used in the unique_lock,
    std::unique_lock<std::mutex> m_lk; // Used in the cnd_var
    std::condition_variable m_cndvar;

    std::mutex m_in_function, n_mx; // protection of re-iteration.
    bool m_notifications;

}; 
```

实施/定义（cpp）：

```
#include "Flare.hpp"

// PUBLIC:

Flare::Flare(bool fall_through_first)
:
m_lk(m_mx),
m_notifications(!fall_through_first)
{}

Flare::~Flare()
{}

void Flare::notify()
{
    if (m_in_function.try_lock() == true)
    {
        m_notifications = false;
        m_in_function.unlock();
    }
    else // Function is waiting.
    {
        n_mx.lock();
        do
        {
            m_notifications = false;
            m_cndvar.notify_one();
        }
        while (m_in_function.try_lock() == false);
        n_mx.unlock();
        m_in_function.unlock();
    }
}

void Flare::wait()
{
    m_in_function.lock();
    while (m_notifications)
        m_cndvar.wait(m_lk);
    m_in_function.unlock();
    n_mx.lock();
    m_notifications = true;
    n_mx.unlock();
} 
```

# mdx - MDX：使用 LastPeriods 分组依据，蒙德里安模式：levelType hours

> ID：15072480
> 
> 赞同：2
> 
> 时间：2013-02-25T17:12:02.300
> 
> 标签：mdx, cube, mondrian

我是 MDX 和 Mondrian 的新手，有两个与时间相关的问题：

**1.)**

MDX 命令

```
SELECT NON EMPTY {[Country].[Country].Members} ON COLUMNS, [Time].[2012].[Q1 2012].[2].[2012-02-08]:[Time].[2012].[Q4 2012].[11].[2012-11-08] ON ROWS FROM [MyCube] WHERE {[Measures].[Sales]} 
```

打印按天分组的结果：

```
2012-02-08 | 2873 | 9829 | ...
2012-02-09 | ... 
```

**但我想以天为单位定义日期范围并获得按月分组的结果**：

```
2012-02 | 34298| ...
2012-03 | ... 
```

**2.)**

Mondrian 模式文档列出了时间级别类型*TimeYears*、*TimeQuarters*、*TimeMonths*和*TimeDays*。**是否也可以定义小时数？**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:23:56.747

1) MDX 中的[范围函数](http://www.iccube.com/support/documentation/mdx/Range.html)返回您正在使用的级别的成员。在你的情况下：

```
 [Time].[2012].[Q1 2012].[2].[2012-02-08]:[Time].[2012].[Q4 2012].[11].[2012-11-08] 
```

您正在使用天数，这就是您获得所有天数的原因。在 range 函数中使用月而不是天。如果您不想要 8 号之前的数据，可以选择使用子选择来过滤：

```
 SELECT
    NON EMPTY {[Country].[Country].Members} ON COLUMNS,
    [Time].[Your month level].members} ON ROWS
 FROM (
     SELECT 
        {[Measures].[Sales]} ON 0,
        [Time].[2012].[Q1 2012].[2].[2012-02-08]:[Time].[2012].[Q4 2012].[11].[2012-11-08] ON 1,
     FROM [MyCube] ) 
```

2）不知道蒙德里安，但无论如何您都可以根据“现有”表创建时间维度

# javascript - Javascript将窗口大小调整为原始纵横比

> ID：15072485
> 
> 赞同：0
> 
> 时间：2013-02-25T17:12:17.357
> 
> 标签：javascript, resize, window, aspect-ratio

所以我打开的窗口如下所示：

```
<a href="javascript:openNamedWindow('/test/test.do', 'test',600,640);">test</a> 
```

该页面打开一个登录页面，该页面要求最小宽度为 800，高度为 600 才能查看所有内容。

然而，一旦他们登录，它就会将他们带到一个信息页面，但纵横比需要保持与打开它的原始窗口相同 (600,640)。

有没有办法让javascript调整窗口大小，但保持原始纵横比，只要它大于800x600，如果不调整到刚刚超过该尺寸的比例？（我不想指定原始启动大小，因为我想在网站上的此类弹出窗口中全局使用此代码）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:19:01.563

这通常是您使用适当的模板/样式表修复的问题。

您可以更改模板以允许任何纵横比吗？

用于水平`margin: auto`居中`div`s。

这应该消除所有窗口大小的要求。

# xml - 工作簿设置中的 XML 错误 原因：标签过多

> ID：15072486
> 
> 赞同：5
> 
> 时间：2013-02-25T17:12:19.367
> 
> 标签：xml, plsql, export-to-excel, oracle-apex

我创建了一个 PL/SQL 过程来生成可从 Oracle Application Express (Apex) 下载的 excel 电子表格（XML 格式）。

然而，

当第一个文件仍然在 Excel 中打开时生成第二个文件时，它会收到以下错误消息：

```
XML ERROR in Workbook Setting
REASON: Too many tags
FILE:   C:\...
GROUP:  Workbook
TAG:    Worksheet
ATTRIB: Name
VALUE:  Sheet1

XML ERROR in Workbook Setting
REASON: Too many tags
FILE:   C:\...
TAG:    Worksheet
ATTRIB: Name
VALUE:  Sheet2

XML ERROR in Workbook Setting
REASON: Too many tags
FILE:   C:\....
GROUP:  Workbook
TAG:    Worksheet
ATTRIB: Name
VALUE:  Sheet3 
```

我认为它与“工作表”标签有关。然而，这个问题不能总是被复制。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-15T11:00:03.250

确保您没有尝试命名多个具有相同名称的工作表。

在文本编辑器中打开 xml 文档并搜索（例如）“Sheet1”，如果您找到该行

```
 <Worksheet ss:Name='Sheet1'> 
```

在不止一个地方，您的程序正在生成重复的工作表名称。

# c++ - 是否可以在字符中返回“奇怪”字符？

> ID：15072489
> 
> 赞同：2
> 
> 时间：2013-02-25T17:12:28.307
> 
> 标签：c++, char

我想知道是否可以返回“奇怪”字符，或者更确切地说是对语言很重要的字符
例如： \ ; '
我想知道，因为我需要通过一个检查文本键的 unicode 值的函数返回它们，并通过它的数字返回字符，所以我也需要这些。
我收到 356|error: missing terminating ' 字符
第 356 行如下所示

```
return '\'; 
```

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:14:18.560

反斜杠是特殊字符的转义。如果你想要一个文字反斜杠，你必须用另一个反斜杠来转义它。尝试：

```
return '\\'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:16:26.493

这里唯一的问题是反斜杠用于转义文字中的字符。例如`\n`是一个新行，`\t`是一个水平制表符。在您的情况下，编译器看到`\'`并认为您的意思是一个`'`字符（这样您就可以拥有这样的`'`字符：）`'\''`。你只需要逃避你的反斜杠：

```
return '\\'; 
```

尽管这看起来像一个包含两个字符的字符文字，但它不是。`\\`是一个转义序列，表示单个反斜杠。

同样，要返回 a `'`，您将执行以下操作：

```
return '\''; 
```

表 7 给出了可用的转义序列列表：

![在此处输入图像描述](../Images/f5d8ef789247bb36b6b6fdc21a6480c5.png)

您可以有一个字符文字，其中包含执行字符集中的任何字符，结果`char`将具有该字符的值。但是，如果该值不适合 a `char`，它将具有实现定义的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:16:40.520

可以返回任何字符。

然而对于其中一些，你必须使用`backslash`:来逃避它`\`。

所以要返回反斜杠，你必须返回：

```
return '\\'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:21:15.653

要获得一个简单的反斜杠，请使用`'\\'`.

在 C 中，以下字符使用反斜杠表示：

*   \a 或 \A ：铃铛
*   \b 或 \B ：退格键
*   \f 或 \F ：换页符
*   \n 或 \N ：换行
*   \r 或 \R ：回车
*   \t 或 \T ：水平制表符
*   \v 或 \V ：垂直制表符
*   \xhh 或 \Xhh ：十六进制位模式
*   \ooo ：八进制位模式
*   \0 : 一个空字符
*   \“ ： 性格
*   \' ： 性格
*   \\ : 反斜杠 (\)

一个普通的反斜杠会使系统感到困惑，因为它期望一个字符跟随它。因此，您需要“逃避”它。八进制/十六进制位模式起初可能看起来不太有用，但它们让您可以使用[ANSI 转义码](https://en.wikipedia.org/wiki/ANSI_escape_code)。

如果反斜杠后面的字符没有指定合法的转义序列，如上所示，结果是实现定义的，但反斜杠后面的字符通常按字面意思理解，就好像转义不存在一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T17:24:42.947

如果您必须多次返回此类字符（“，'，\，{，] ...等），您应该编写一个转义该字符的函数。我编写了一次该函数，它是：

```
function  EscapeSpecialChars (_data) {
            try {
                if (!GUI_HELPER.NOU(_data)) {
                    return _data;
                }
                if (typeof (_data) != typeof (Array)) {
                    return _data;
                }
                while (_data.indexOf("&#x0D;") > 0) {
                    _data = _data.replace("&#x0D;", "");
                }
                while (_data.indexOf("\n") > 0) {
                    _data = _data.replace("\n", "\\n");
                }
                while (_data.indexOf("\r") > 0) {
                    _data = _data.replace("\r", "\\r");
                }
                while (_data.indexOf("\t") > 0) {
                    _data = _data.replace("\t", "\\t");
                }
                while (_data.indexOf("\b") > 0) {
                    _data = _data.replace("\b", "\\b");
                }
                while (_data.indexOf("\f") > 0) {
                    _data = _data.replace("\f", "\\f");
                }
                return _data;
            } catch (err) {
               alert(err);
            }

        }, 
```

然后像这样使用它：

```
return EscapeSpecialChars("\'"{[}]"); 
```

你应该改进这个功能。它对我有用，但它并没有转义所有特殊字符。

# asp.net-mvc - 无法使用实体框架脚手架模板创建新控制器

> ID：15072492
> 
> 赞同：2
> 
> 时间：2013-02-25T17:12:30.583
> 
> 标签：asp.net-mvc, entity-framework

我将 Code First 与 Entity Framework 4 一起使用。

当我尝试通过选择脚手架选项 **“MVC 控制器读/写操作和视图，使用实体框架”**来创建新控制器时，我收到以下错误消息：

> 不支持使用相同的 DbCompiledModel 检索“Myproject.Models.example”的元数据来针对不同类型的数据服务器创建上下文。而是为正在使用的每种类型的服务器创建一个单独的 DbCompiledModel。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T02:23:09.460

我通过在我的类中注释掉构造函数来解决这个问题`DbContext`，遵循[这个答案](https://stackoverflow.com/a/12165320/1397117)。

# scala - Play 2.1 中的私有资产

> ID：15072493
> 
> 赞同：4
> 
> 时间：2013-02-25T17:12:32.857
> 
> 标签：scala, playframework-2.1

在 Play 2.1 应用程序中，存储私有资产的合适位置在哪里？

“私有资产”是指应用程序使用但用户无法访问的数据文件。

例如，如果我有一个文本文件 ( `Foo.json`)，其中包含每次应用程序启动时都会解析的示例数据，那么项目中存储它的正确目录是什么？

`Foo.json`需要包含在部署中，并且需要在开发和生产中都可以从代码中统一访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:55:58.077

一些选项：

1.  通常文件进入`conf`文件夹。IE：`conf/privatefiles/Foo.json`
2.  如果它们经常更改，您可以考虑将`application.conf`路径添加到文件系统中某个位置的外部文件夹（完整路径），在这种情况下，您无需重新部署应用程序即可轻松编辑内容：`/home/scrapdog/privatefiles/Foo.json`
3.  您也可以将它们存储在数据库中，好处与以前的选项相同 - 易于编辑。

在所有情况下，请考虑使用内存缓存来避免每次需要时从文件系统/数据库中读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T04:39:19.157

You can do what I did, I got the answer from @Marius Soutier [here](https://stackoverflow.com/questions/26206759/playframework-were-to-put-files-that-get-rendered-in-views/26216144#26216144). Please upvote his answer there if you like it:

You can put "internal" documents in the `conf` folder, it's the equivalent to `resources` in standard sbt projects.

Basically create a dir under `conf` called `json` and to access it, you'd use `Play.resourceAsStream()`. Note that this gives you a `java.io.InputStream` because your file will be part of the JAR created by `activator dist`.

My example is using it in a view but you can modify it as you want.

```
Play.resourceAsStream("json/Foo.json") map { inputStream =>
  Ok(views.html.xxx(XXX.do_something_with_stream(inputStream)))
} getOrElse (InternalServerError) 
```

You can also use `Play.resource()`, this will give you a `java.net.URL`, you can use `getFile()` to get the `java.io.File` out of it.

```
Play.resource("json/Foo.json") map { fileURL =>
  Ok(views.html.xxx(XXX.do_something_with_file(fileURL.getFile())))
} getOrElse (InternalServerError) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:03:35.760

我只是使用`data`在应用程序根目录中调用的文件夹。您可以使用您想要的名称或更好的名称，将实际名称存储在配置文件中。

要解析其路径，我使用以下代码段：

```
 lazy val rootPath = {
    import play.api.Play.current
    play.api.Play.application.path.getPath
  }
  lazy val dataPath = rootPath + "/data/" 
```

# vb.net - DevExpress 中是否有类似上下文菜单的控件？

> ID：15072495
> 
> 赞同：0
> 
> 时间：2013-02-25T17:12:38.403
> 
> 标签：vb.net, controls, devexpress, toolbox, contextmenu

我正在使用 DevExpress 中的控件在 VB.NET 中开发桌面应用程序。现在，我也想从 DevExpress 添加上下文菜单。但我在工具箱中找不到这样的控件。它是否仅在我的版本中丢失或 DevExpress 尚未开发此类上下文菜单？

*   先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:53:56.510

XtraBars Suite 允许您创建多用途弹出菜单。这些菜单可用作工具栏或功能区按钮的下拉列表

[http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/context_menu.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/context_menu.xml)

还

[http://documentation.devexpress.com/#WPF/CustomDocument6587](http://documentation.devexpress.com/#WPF/CustomDocument6587)

# php - 从文本区域获取反馈的选项有哪些？

> ID：15072498
> 
> 赞同：-2
> 
> 时间：2013-02-25T17:12:51.257
> 
> 标签：php, javascript, textarea, user-feedback

我的页面有一个文本区域和一个提交按钮，我想从页面用户那里获得反馈。我有哪些选择？我能想到两个：

*   将文本区域的内容作为电子邮件发送。（太多的努力和联系）。
*   将内容保存到本地 txt 文件。（似乎是合法的）。

为此目的还有其他有用的方法吗？如果有，它们是什么？您能否提供一个链接来解释如何实施这些解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:17:15.277

我可能会将 textarea 的结果保存到您的数据库中，而不是文本文件或电子邮件中。您可以编写一个简单的管理脚本来在需要时读取结果。如果您不熟悉读取/写入 dbs [http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#，这里有一个教程。 USuc76Wsh8E](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.USuc76Wsh8E)

# java - IOIO 未连接到 PC，“等待握手”

> ID：15072500
> 
> 赞同：2
> 
> 时间：2013-02-25T17:12:57.853
> 
> 标签：java, handshake, ioio

我和其他许多人一样，在从 Eclipse 构建时，IOIO OTG 与 PC 连接时遇到了问题。

我们正在使用 ADT 版本的 eclipse，所有库都正确导入。运行`HelloIOIOConsole`程序时，控制台开始连接，但挂起连接。最后一个控制台消息是`[console]: waiting for handshake`，并且没有抛出错误。程序将构建，但 IOIO 不会连接到 PC。

是什么原因造成的，我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:12:57.853

我们发现了问题：我们没有指定 COM 端口。

我们可以通过进入 eclipse ADT，在`Run`>>选项卡下，并将XX 是 IOIO 连接到的 COM 端口的行添加到`Run Configuration`框中来解决这个问题。`variables``-Dioio.SerialPorts=COMXX``VM variables`

添加后`-Dioio.SerialPorts=COMXX`，它不再检查每个单独的 COM 端口，这导致程序跳过正确的端口。

当我们使用`COM16`USB 端口时，我们添加了`-Dioio.SerialPorts=COM16`消除所有连接问题并能够完美运行程序的行。

# c# - C#在字段列表的字符串中按名称设置属性

> ID：15072505
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:13:08.667
> 
> 标签：c#, reflection, properties

我使用以下代码获取所有对象实例：

```
 Type type = this.GetType();
 FieldInfo[] fields = type.GetFields(BindingFlags.NonPublic |
                                     BindingFlags.Instance); 
```

但我无法更改`Enabled`按钮等属性，因为`SetValue`获取实例类的目标而我没有这个。我只有班级的名称和类型。现在如何更改字段中存在的对象的属性（启用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:30:51.000

尝试稍微修改您的反射代码。一方面，您必须同时引用对象和`property`您特别想要的对象。记住，`Property`不一样`Field`。

```
MyObject.GetType().GetProperty("Enabled").SetValue(MyObject, bEnabled, null); 
```

您使用任何类型，无论`MyObject`是按钮还是表单或其他...然后您通过 name 引用该属性`Enabled`，然后将其设置回`MyObject`.

如果您想事先获取属性，您可以将实例存储在变量中，但请再次记住属性不是字段。

```
PropertyInfo[] piSet = MyObject.GetType().GetProperties(); 
```

您可以使用`this`来获取属性集，但如果`this`与`Type`您尝试启用/禁用的控件不同，则不建议使用。

**添加编辑**

在重新阅读了这个问题后，我从中得到了这个：你似乎想要的是多层反射和泛型。您正在寻找的控件是附加到“this”的字段。你能做的就是沿着这些思路。

```
Type theType = this.GetType();
FieldInfo[] fi = theType.GetFields(BindingFlags.NonPublic | BindingFlags.Instance);
foreach ( FieldInfo f in fi)
{
    //Do your own object identity check
    //if (f is what im looking for)
    {
        Control c = f.GetValue(this) as Control;
        c.Enabled = bEnabled;
    }
    //Note: both sets of code do the same thing
    //OR you could use pure reflection
    {
        f.GetValue(this).GetType().GetProperty("Enabled").SetValue(f.GetValue(this), bEnabled, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:31:20.260

首先，您实际上是在使用对象的字段。如果你真的想要可写属性，那么你想要这样的东西：

```
PropertyInfo[] properties = type.GetProperties(Public | SetProperty | Instance); 
```

一旦你有了它，你的 enabled 属性可能会这样设置：

```
myenabledPropertyInfo.SetValue(targetObject, value, null); 
```

其中 targetobject 是我们感兴趣的 Enabled 属性的对象，而 value 是我们希望分配的值（在这种情况下，大概是一个布尔值......）

希望有帮助...

# php - Cakephp $this->request->data 返回选择字段的 id 而不是需要并显示在选择字段中的值

> ID：15072507
> 
> 赞同：0
> 
> 时间：2013-02-25T17:13:12.443
> 
> 标签：php, list, cakephp, view, controller

我有一个像这样的 CakePHP 控制器：

```
$this->loadModel('Project');

$list2 = $this->Project->find( 'list', array(
    'fields'     => array('Project.project'),
    'conditions'    => array('Project.user_id' => $userId)
));

$this->set($list2, 'list2');

$this->loadModel('Distance');

if(!empty($this->request->data)){    
    $this->Distance->create();
    if ($this->Distance->save($this->request->data)) {
        $this->Session->setFlash('Saved.');
        //  $this->redirect(array('action' => 'index'));
    } else {
        $this->Session->setFlash('FAILED');
    }
}else{
    //  $this->Session->setFlash('test');
} 
```

和这样的视图：

```
echo $this->Form->input('Distance.project', array('options' => $list2, 'label' => false, 'empty' => '(choose one)'  ; 
```

但是我将项目的 id 而不是项目名称插入到数据库中。我在使用这些字段时从来没有遇到过这样的问题 - 只是使用数据列表。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:35:33.937

这很正常......它的 $list2 和数组......以及选项的值是该数组的索引。

如果只想插入项目名称，则需要将 $list2 更改为 $list2['project_name']。您需要删除或替换 $list2 的索引。

LE：以iexiak为例。他还为您更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:34:49.740

```
 $list2 = $this->Project->find( 'list', array(

                    'fields'     => array('Project.project'),
                     'conditions'    => array('Project.user_id' => $userId)
                 )

         ); 
```

这是因为 $list2 会自动创建一个 ID => project; 的列表。当您将其用作表单的输入时，它会自动创建下拉列表以反映这一点。这通常是最佳实践，链接到 ID 而不是描述，因为 ID 不会经常更改。下面应该可以得到你想要的东西：

```
 $list2 = $this->Project->find( 'list', array(

                    'fields'     => array('Project.project','Project.project'),
                     'conditions'    => array('Project.user_id' => $userId)
                 )

         ); 
```

# python - Python子进程Exec格式错误

> ID：15072508
> 
> 赞同：2
> 
> 时间：2013-02-25T17:13:13.777
> 
> 标签：python, bash, ubuntu, subprocess

对不起，如果这个问题很愚蠢。我正在使用 python`subprocess`语句在 Ubuntu（Natty 11.04）中调用 .bat 文件，但是，我收到了错误消息：

```
Traceback (most recent call last):
  File "pfam_picloud.py", line 40, in <module>
    a=subprocess.Popen(src2, shell=0)
  File "/usr/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1213, in _execute_child
    raise child_exception 
```

### 运行这个 python 文件

```
$python pfam_picloud.py 
```

### Python 代码 (pfam_picloud.py)

```
#!/usr/bin/python
#
met="wTest.dvf"
run="run_pfam.bat"
inp="pfam_input.PFA"
import os
import stat
import shutil
import subprocess
import string
import random
# Generate a random ID for file save
def id_generator(size=6, chars=string.ascii_uppercase + string.digits):
    return ''.join(random.choice(chars) for x in range(size))
name_temp=id_generator()
cwd=os.getcwd()
src=cwd
src1=cwd+'/'+name_temp
if not os.path.exists(src1):
    os.makedirs(src1)
else:
    shutil.rmtree(src1)
    os.makedirs(src1)
##
shutil.copy(src+"/"+run,src1)
shutil.copy(src+"/"+met,src1)
shutil.copy(cwd+"/pfam_pi.exe",src1)
shutil.copy(src+"/"+inp,src1)
#
src2=src1+"/run_pfam.bat"
os.chdir(src1)
a=subprocess.Popen(src2, shell=0)
a.wait() 
```

### bash 文件 (run_pfam.bat)

```
#!/bin/sh
./pfam_pi.exe pfam_input.PFA 
```

我可以在 Ubuntu 中成功运行这个 bash 文件。所以我想，我在我的 Python 脚本中搞砸了一些东西。谁能给我一些建议？感谢您的任何意见。

### 编辑

该文件`pfam_pi.exe`是 Linux 可执行文件。我在 Ubuntu 中编译它。对困惑感到抱歉。

### 更新

好吧，我现在遇到了不同类型的错误。1\. 用`#!/bin/sh`，它说`No such file or directory`。2\. 用`/bin/sh`，它说`exec format error`。3\. 如果我将所有内容作为参数发送`a=subprocess.Popen(['./pfam_pi.exe', 'inp', 'src1'], shell=0)`，它会说`end of line symbol error`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T12:48:43.863

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

@Ellioh：感谢您的评论。我发现一旦我更改了 shell=1，问题就解决了。——淘红

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:32:46.817

尝试运行`wine`（您应该安装它）并将`pfam_pi.exe`其作为参数传递给它。也许`pfam_pi.exe`不是 Linux 可执行文件。:-) 当然，可执行文件扩展名在 Linux 上没有意义，但可能它真的是一个 Windows 程序，否则我很难想象它命名为`pfam_pi.exe`.

但是，如果它是 Linux 可执行文件，则 note`subprocess.Popen`接受 args 列表（第一个元素是程序本身），而不是命令行：

```
>>> import shlex, subprocess
>>> command_line = raw_input()
/bin/vikings -input eggs.txt -output "spam spam.txt" -cmd "echo '$MONEY'"
>>> args = shlex.split(command_line)
>>> print args
['/bin/vikings', '-input', 'eggs.txt', '-output', 'spam spam.txt', '-cmd', "echo '$MONEY'"]
>>> p = subprocess.Popen(args) # Success! 
```

# python - Matplotlib 3d散点图缺少颜色图

> ID：15072509
> 
> 赞同：1
> 
> 时间：2013-02-25T17:13:15.063
> 
> 标签：python, matplotlib, color-mapping

我之前发布了一个程序，我试图在 3d 散点图上绘制四维数据（xyz 坐标和电压），其颜色图取决于电压的大小。

我能够毫无错误地运行我的程序（表明我没有丢失任何包），尽管我的数据点总是显示为蓝色，这表明颜色映射没有正确应用。任何人都可以看到问题是什么？如果是这样，我将非常感激。

```
from pylab import *
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

x = array([-4,-4,   -4,-4,-4,-4,-4,-4,-4,-4,-4,-4,-4,-4,-4,-4,0,0,0,0,0,0,0,0,0,0,  0,0,0,0,0,0,4,4,    4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  4,  -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, 2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  -5, -4.5,   -4, -3.5,   -3, -2.5,   -2, -1.5,   -1, -0.5,   0,  0.5,    1,  1.5,    2,  2.5,    3,  3.5,    4,  4.5,    5,  5.5,    6,  6.5,    -6.5,   -6, -5.5,
    ])
y = array([-0.1,    3.95,   5.8,4.4,0.1,-4,-5.8,-4,1,2.4,3.2,   1.6,-0.8,-2.6,-3.3,-1.4,-0.1,3.95,  5.8,4.4,0.1,-4,-5.8,-4,1,2.4,   3.2,    1.6,    -0.8,   -2.6,   -3.3,   -1.4,   -0.1,   3.95,   5.8,    4.4,    0.1,    -4, -5.8,   -4, 1,  2.4,    3.2,    1.6,    -0.8,   -2.6,   -3.3,   -1.4,   -0.1,   3.95,   5.8,    4.4,    0.1,    -4, -5.8,   -4, 1,  2.4,    3.2,    1.6,    -0.8,   -2.6,   -3.3,   -1.4,   -0.1,   3.95,   5.8,    4.4,    0.1,    -4, -5.8,   -4, 1,  2.4,    3.2,    1.6,    -0.8,   -2.6,   -3.3,   -1.4,   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    ])
z = array([5.85,    4, 0.2,-3.8,-5.85,-4.1,-0.15,4,2.75,1.4,-0.3,   -2.6,   -2.75,-2.7, 1.2,    3.2,5.85,4, 0.2,-3.8,-5.85,-4.1,-0.15,  4,  2.75,   1.4,    -0.3,   -2.6,   -2.75,  -2.7,   1.2,    3.2,    5.85,   4,  0.2,    -3.8,   -5.85,  -4.1,   -0.15,  4,  2.75,   1.4,    -0.3,   -2.6,   -2.75,  -2.7,   1.2,    3.2,    5.85,   4,  0.2,    -3.8,   -5.85,  -4.1,   -0.15,  4,  2.75,   1.4,    -0.3,   -2.6,   -2.75,  -2.7,   1.2,    3.2,    5.85,   4,  0.2,    -3.8,   -5.85,  -4.1,   -0.15,  4,  2.75,   1.4,    -0.3,   -2.6,   -2.75,  -2.7,   1.2,    3.2,    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    ])
v = array([0.29,    0.32,   0.3,    0.27,   0.3,    0.28,   0.31,   0.28,   0.19,   0.18,   0.19,   0.18,   0.19,   0.19,   0.2,    0.19,   0.12,   0.12,   0.11,   0.1,    0.11,   0.15,   0.14,   0.13,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.32,   0.31,   0.3,    0.31,   0.29,   0.3,    0.32,   0.31,   0.2,    0.21,   0.19,   0.19,   0.19,   0.19,   0.19,   0.2,    0.13,   0.12,   0.14,   0.14,   0.17,   0.17,   0.16,   0.14,   0.18,   0.18,   0.18,   0.19,   0.19,   0.19,   0.19,   0.18,   0.16,   0.18,   0.2,    0.19,   0.18,   0.15,   0.16,   0.18,   0.18,   0.18,   0.18,   0.17,   0.17,   0.17,   0.18,   0.18,   0.13,   0.14,   0.15,   0.16,   0.17,   0.17,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.18,   0.17,   0.17,   0.16,   0.15,   0.14,   0.12,   0.08,   0.09,   0.11,   0.09,   0.1,    0.11,
    ])

c = abs(v)
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
cmhot = plt.get_cmap("hot")
cax = ax.scatter(x, y, z, v, s=50, c = c, cmap = cmhot)
plt.show() 
```

非常感谢任何愿意为我看看这个的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:42:06.583

```
from pylab import *
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

th = np.linspace(0, 2 * pi, 100)
x = cos(th)
y = sin(th)
z = th
v = cos(th) * sin(th)
c = abs(v)
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
cmhot = plt.get_cmap("hot")
cax = ax.scatter(x, y, z, v, s=50, c = c, cmap = cmhot)
plt.show() 
```

生产![示例图像](../Images/b71fba85ce82a6efc9d1b5267e1c241c.png)

请参阅此[Matplotlib 3D 散点颜色在重绘后丢失](https://stackoverflow.com/questions/8971309/matplotlib-3d-scatter-color-lost-after-redraw)，报告版本 1.1.0 中的相同内容（并且有解决方法）。这是 mpl 中的一个旧错误，已在更高版本中修复（[此处](https://github.com/matplotlib/matplotlib/pull/762)为 PR ）

# git - Tracked Ignored 和 --assume-unchanged 如何进行合并

> ID：15072513
> 
> 赞同：2
> 
> 时间：2013-02-25T17:13:27.120
> 
> 标签：git

在我的 Git 存储库中，有一个配置文件我希望与主共享存储库保持不同（它必须保持跟踪），因此更改不会填充给其他开发人员。但是，“--assume-unchanged”可以很好地将我的更改保存在本地，同时将代码推送到其他存储库。问题就变成了，当我需要获取最新代码并且我从共享仓库中提取或合并到我的本地时，我会收到错误消息：

```
error: Your local changes to the following files would be overwritten by merge:
    app/grails-app/conf/BuildConfig.groovy
Please, commit your changes or stash them before you can merge.
Aborting 
```

该错误是有道理的，因为我的配置文件与我要合并的共享仓库中的配置文件不同。但是如何在保持此配置不同的同时获取拉（合并）最新代码。我想避免变通：

```
git update-index --no-assume-unchanged app/grails-app/conf/BuildConfig.groovy
git stash save "config file" 
```

然后在合并后取回我更改的配置：

```
git stash apply 
```

如何避免这些额外的存储和索引步骤 - 假设不变？有没有办法提取除一个文件之外的所有内容？对于所描述的问题还有其他解决方案吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:40:25.130

据我了解，您想在本地忽略文件（意味着其他开发人员仍将跟踪该文件）因此`.gitignore`对您没有帮助，因为它的影响是全局的。

但是，如果您将文件添加到`.git/info/exclude`，它将在本地被忽略。

这句话来自[.gitignore](http://git-scm.com/docs/gitignore)：

> 特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存在于存储库中但特定于一个用户工作流的辅助文件）应该进入 $GIT_DIR/info/exclude 文件

# iphone - 字典项存在，但也显示为（null）？

> ID：15072515
> 
> 赞同：-3
> 
> 时间：2013-02-25T17:13:30.697
> 
> 标签：iphone, ios, objective-c, nsdictionary

我有这样的定义：

```
#define MessageType @"MessageType" 
```

这在代码中使用了一个名为 NSDictionary 的代码`message`：

```
NSLog(@"mesage...: %@", message);
NSLog(@"message type: %@", [message objectForKey:MessageType]); 
```

这个 NSLog 返回：

```
message...: {
1 = MessageType;
}
message type: (null) 
```

我不确定为什么它显然是一个对象时将其返回为（null）。如果我使用我的原始代码，这也不起作用：

```
if (!message objectForKey:type) {
return;
} 
```

所以我需要检查它是否是一个对象，但是这段代码同样没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:15:19.047

您的键是*1*并且您的对象是*MessageType*。

你正在检查其他地方！作为`[message objectForKey:MessageType]`

使用`#define MessageType @"1"`或`[message objectForKey:@"1"];`

# android - 在android中播放具有给定Audio_id的歌曲

> ID：15072519
> 
> 赞同：2
> 
> 时间：2013-02-25T17:14:03.873
> 
> 标签：android, playlist

我正在尝试从播放列表中获取歌曲，然后在 android 中播放。

我能找到的所有答案都依赖于

```
MediaStore.MediaColumn.DATA 
```

找到文件路径，然后将其提供给 MediaPlayer。

但是当我尝试这样做时，我不断收到“invalid column _data”异常。我仍然可以查询有关这首歌的其他内容，例如“AUDIO_ID”。所以我的问题是，是否可以只播放已知“AUDIO_ID”的歌曲？如何？或者我是否缺少“数据”的东西，因为其他人都可以使用它。

这是我获取播放列表的代码。

```
private Cursor getPlaylistCursor() {
    String[] proj = { MediaStore.Audio.Playlists._ID,MediaStore.Audio.Playlists.NAME };
    Uri playlistUri = Uri.parse("content://com.google.android.music.MusicConten/playlists");
    Cursor playlistCursor = getContentResolver().query(playlistUri, proj,null, null, null);
    playlistCursor.moveToFirst();
    return playlistCursor;
} 
```

这就是我正在为获取歌曲所做的工作，正如我所说，我无法查询“数据”，如果将“数据”参数添加到投影中，我会遇到异常。

```
private void getSongListCursor(Long playlistID) {
    String[] proj2 = { MediaStore.Audio.Playlists.Members.TITLE,
            MediaStore.Audio.Playlists.Members.AUDIO_ID };
    String playListRef = "content://com.google.android.music.MusicContent/playlists/"
            + playlistID + "/members";
    Uri songUri = Uri.parse(playListRef);
    Cursor songCursor = getContentResolver().query(songUri, proj2, null,
            null, null);
} 
```

所以现在，我有歌曲的音频 ID，我该如何播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:15:36.707

一切皆有可能 ;-）

我的做法是使用 Google Play 音乐服务器获取所选歌曲 ID 对应的流媒体 URL。如果您需要身份验证方面的帮助并开始使用 Google Play 音乐的非官方 API，请告诉我。

# java - 多线程 Java 小程序弹跳球

> ID：15072520
> 
> 赞同：1
> 
> 时间：2013-02-25T17:14:09.013
> 
> 标签：java, multithreading, applet

我正在尝试创建一个 Java 小程序，它在一个小程序窗口内反弹几个球，每个球都有自己的线程。使用下面的代码，所有球都被绘制，但只有第一个移动。我究竟做错了什么？

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import static java.awt.Color.*;

public class BouncingBalls extends Applet implements Runnable {

    List<Ball> ballList = new ArrayList(); // holds Ball objects

    Color[] colors = new Color[]{BLACK, GRAY, WHITE, PINK, RED, ORANGE, YELLOW,
            GREEN, BLUE, CYAN}; // array holding available colors

    static int width, height; // variables for applet dimensions

    int ballCount; // number of balls to be created, set by html parameter

    Random random = new Random(); // random number generator

    public void init() {

        // get window dimensions
        width = getSize().width;
        height = getSize().height;

        //get number of balls from html
        String ballCountString = this.getParameter("ballCount");

        try {
            ballCount = Integer.parseInt(ballCountString);
        } catch (NumberFormatException e) {
            ballCount = 10; // set to 10 by default
        }

        for (int i = 0; i < ballCount; i++) {

            // randomly assign ballDiameter between 1 and 20
            int ballDiameter = random.nextInt(20) + 1;

            // create and add balls to ballList
            ballList.add(new Ball(
                    random.nextInt(width - ballDiameter), // set x coordinate
                    random.nextInt(height - ballDiameter), // set y coordinate
                    ballDiameter, // set ballDiameter
                    random.nextInt(ballDiameter) + 1, // deltaX <= ballDiameter
                    random.nextInt(ballDiameter) + 1, // deltaY <= ballDiameter
                    colors[i % 10] // use remainder to choose colors[] element
                    )
            );

        } // end for

    } // end init

    public void start() {

        for (Ball ball: ballList) {

            Thread t;
            t = new Thread(this);
            t.start();

        } // end for

    } // end start

    public void run() {

        for (Ball ball : ballList) {

            // infinite loop: ball moves until applet is closed
            while (true) {

                ball.move();

                repaint(); // call paint method to draw circle in new location

                // set ball repaint delay using Thread sleep method
                try {
                    Thread.sleep(20); // wait 20 msec before continuing
                } catch (InterruptedException e) {
                    return;
                }

            } // end while

        } // end for

    } // end run

    public void paint(Graphics g) {

        super.paint(g);

        for (Ball ball : ballList) {

            // set current color
            g.setColor(ball.ballColor);

            // draw filled oval using current x and y coordinates and diameter
            g.fillOval(ball.x, ball.y, ball.diameter, ball.diameter);

        } // end for

    } // end paint
}

class Ball {

    int x, y, // coordinates of upper-left corner of circle
        diameter, // circle diameter
        deltaX, deltaY; // number of pixels ball moves each time it's repainted
    Color ballColor;

    public Ball(int x, int y, int diameter, int deltaX, int deltaY,
                Color ballColor) {

        this.x = x;
        this.y = y;
        this.diameter = diameter;
        this.deltaX = deltaX;
        this.deltaY = deltaY;
        this.ballColor = ballColor;

    } // end Ball constructor

    public void move() {

        // update x and y coordinates using delta values
        x += deltaX;
        y += deltaY;

        // reverse x direction when ball reaches boundary
        if (x >= BouncingBalls.width - diameter || x <= 0){
            deltaX = -deltaX;
        } // end if

        // reverse y direction when ball reaches boundary
        if (y >= BouncingBalls.height - diameter || y <= 0) {
            deltaY = -deltaY;
        } // end if

    } // end move

} // end BouncingBalls 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:18:06.493

你`while(true)`应该在 for 循环之外。它位于从迭代器返回的第一个球上。

话虽这么说，您可能想检查一下每线程一个球的逻辑。它实际上似乎创建了 N 个线程（N 是球的数量），其中每个线程将移动所有的球，而不仅仅是一个。

编辑以解决我的第二点：

假设你有 10 个球。您启动 10 个线程，每个线程迭代所有球。

例如：

```
Thread 1:
public void run(){
   for(Ball b : ballList){
      b.move();
      b.repaint();
   }
}

Thread 2:
public void run(){
   for(Ball b : ballList){
      b.move();
      b.repaint();
   }
}

Thread N:
public void run(){
   for(Ball b : ballList){
      b.move();
      b.repaint();
   }
} 
```

`this`之所以这样做，是因为您使用迭代每个球的相同可运行实例创建线程。

```
 public void start() {

        for (Ball ball: ballList) {

            Thread t;
            t = new Thread(this);
            t.start();

        } // end for

    } // end start 
```

所以我想，如果每个球应该每 20 毫秒移动 1 个单位。您最终应该看到每 20 毫秒移动 N*1 个单位，在这种情况下每 20 毫秒移动 10 个单位。

编辑 - 关于建议。

`this`您应该从类中删除 Runnable 的实现，并创建一个新的 Runnable ，而不是将其设置为可运行`this`对象，并将单个 Ball 作为参数。

```
private static class MovingRunnable implements Runnable{
   private final Ball b;
   private MovingRunnable(Ball b){this.b=b;}
   public void run(){
      for(;;){
         b.move(); 
         b.repaint();
         Thread.sleep(20);
      }
   }
} 
```

**稍后在您的启动方法中**

```
public void start() {
        for (Ball ball: ballList) {
            Thread t;
            t = new Thread(new MovingRunnable(ball));
            t.start();
        } // end for

    } // end start 
```

所以这里每个 Ball 都有自己的线程和自己的 Runnable。`move`现在，每个球每 20 毫秒每个线程只会调用一次。

但它仍然不是完美的，因为`repaint`应该只由 UI 线程调用，让每个线程调用它可能会导致不同的问题（尽管您可能没有注意到任何问题，但值得一提）。

# visual-studio-sdk - 如何从 VS 扩展程序打开 Web 浏览器窗口？

> ID：15072524
> 
> 赞同：1
> 
> 时间：2013-02-25T17:14:25.977
> 
> 标签：visual-studio-sdk

当用户在 Visual Studio 中打开解决方案时，我想打开 Web 浏览器窗口，指向特定页面。

在我的扩展程序中，我已经成功挂钩了该`OnAfterOpenSolution`事件，现在我想打开 Web 浏览器窗口。

我怎么做？

（注意，我指的不是用户的默认浏览器；我指的是集成在 VS 中的浏览器窗口）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T10:59:35.527

```
DTE dte = (DTE)GetService(typeof(DTE));
dte.ItemOperations.Navigate("http://www.google.fr",
     vsNavigateOptions.vsNavigateOptionsDefault); 
```

# android - 如何设置列表视图中所有项目的 alpha？

> ID：15072529
> 
> 赞同：0
> 
> 时间：2013-02-25T17:14:37.247
> 
> 标签：android, android-listview

因为我正在为 API 级别 7 及更高级别进行开发，所以我`setAlpha(float)`无法使用。因此，我已经实现了一个遍历给定的所有子元素的方法，`ViewGroup`并尝试找到一种方法来设置 alpha 以使元素几乎是透明的。不幸的是，我无法想出一种方法来使其`ListView`及其项目透明。我该如何进行？

我的方法：

```
public void enableDisableViewGroup(ViewGroup viewGroup, boolean enabled) {
    int childCount = viewGroup.getChildCount();
    for (int i = 0; i < childCount; i++) {
        View view = viewGroup.getChildAt(i);

        view.setEnabled(enabled);
        if (!enabled) {
            if (view instanceof TextView) {
                int curColor = ((TextView) view).getCurrentTextColor();
                int myColor = Color.argb(ALPHA_NUM, Color.red(curColor),
                        Color.green(curColor),
                        Color.blue(curColor));

                ((TextView) view).setTextColor(myColor);
            } else if (view instanceof ImageView) {
                ((ImageView) view).setAlpha(ALPHA_NUM);
            } else if (view instanceof ListView) {
                // How do I set the text color of the subitems in this listview?
            } else {
                try {
                    Paint currentBackgroundPaint =
                            ((PaintDrawable) view.getBackground()).getPaint();
                    int curColor = currentBackgroundPaint.getColor();
                    int myColor = Color.argb(ALPHA_NUM, Color.red(curColor),
                            Color.green(curColor), Color.blue(curColor));
                    view.setBackgroundColor(myColor);
                } catch (NullPointerException e) {
                    Log.d("viewNotFound", "View " + view.getId() + " not found..");
                    e.getStackTrace();
                }
            }
            if (view instanceof ViewGroup) {
                enableDisableViewGroup((ViewGroup) view, enabled);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:39:45.623

是否可以选择直接在 XML 中为您的`ListView`行设置它？

例如，如果您的布局是`LinearLayout`

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent">

    <!-- stuff -->
</LinearLayout> 
```

我不确定你的设置，但如果你真的希望你`ListView`是透明的，你可以像这样以编程方式设置它。

```
ListView listView = (ListView) view;
listView.setBackgroundColor(android.R.color.transparent); 
```

默认颜色`android.R.color.transparent`等于：

```
<!-- Fully transparent, equivalent to 0x00000000 -->
<color name="transparent">#00000000</color> 
```

在这种情况下，无论如何您都需要将`ListView`行设置为在 XML 中是透明的。

如果您想控制行`View`内 s的透明度`ListView`，最好的办法是创建一个自定义`ArrayAdapter`并在那里处理。

# symfony - 当存在不可为空的实体关系时，如何在 Symfony 中处理数据夹具？

> ID：15072530
> 
> 赞同：2
> 
> 时间：2013-02-25T17:14:40.240
> 
> 标签：symfony, fixtures

我正在 Symfony 中开发一个应用程序，但还没有设置一些数据固定装置——我认为是时候开始做这件事了，所以设置一个新的开发副本会更快。:-)

使用下面的示例，我将如何处理将博客上的“类别”属性设置为类别？假设与类别实体存在多对一关系。

```
$blog1 = new Blog();
$blog1->setTitle('A day with Symfony2');
$blog1->setImage('beach.jpg');
$blog1->setAuthor('dsyph3r');
$manager->persist($blog1); 
```

我从 Symblog 教程中收集到，在我的文件中包含 AbstractFixture 和 Category 实体，但肯定需要在博客之前创建类别才能使其正常工作吗？如何确保在运行我的 fixtures 命令时发生这种情况？

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:26:44.453

您需要[在订购的灯具之间共享对象](http://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html#sharing-objects-between-fixtures)——让类别灯具在帖子灯具之前运行。

# c# - C# 中的 XmlSchemaElement 排序顺序

> ID：15072531
> 
> 赞同：0
> 
> 时间：2013-02-25T17:14:46.753
> 
> 标签：c#, xsd

我正在比较基于相同 XMLSchema 的两个 XML。XML 中的每个元素都有一个 id（id 没有说明顺序 - 最旧的 xmlElement 具有最低的 id 等等）。我的目标是在两个 XMLS 之间取得某种一致。

举一个非常简单的例子。让有两个xml。第一个看起来像这样：

```
<EleType>
    <Ele id="1"/>
    <Name id="2"/>
    <Description id="100"/>
    <UnknownOrderEle1 id="3"/>
</EleType> 
```

第二个是这样的：

```
<EleType>
    <Ele id="1"/>
    <Name id="2"/>
    <Description id="100"/>
    <UnknownOrderEle2 id="4"/>
</EleType> 
```

我的结果应该是 ids 的映射。它将以 1:1、2:2、100:100 很好地开始。此时我遇到了两个名称不同的 xml 元素。我知道它们可能不匹配，因此两种可能的解决方案是采用 3:* （其中 * = 符号表示不匹配）然后 *:4 或采用*:4 然后 3:*。但是只有一种方法是正确的解决方案，因为架构说 UnknownOrderEle2 (id=4) 应该在 UnknownOrderEle1 (id=3.

所以我在 XmlSchema 类中寻找任何东西，`XmlSchemaInfo`, `XmlSchemaElement`,... 告诉我有关元素顺序的任何信息。我发现的仅有的两种可能性对我来说没有真正的解决方案，因为它们要么太耗时，要么不干净。一种是比较（可能是不洁的）的`LineNumber`和`LinePosition`内的。`XmlSchemaObject`另一种是从两个 xml 中构造一个 xml 并对其进行验证。如果它引发验证异常，我知道我选择的顺序是错误的（肯定很耗时）。

如果有人知道更好的解决方案，我将很高兴获得任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:49:38.317

与您的示例对应的架构应包含以下内容：

```
<xs:element name="EleType">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Ele">
        . . .
      </xs:element>
      <xs:element name="Name">
        . . .
      </xs:element>
      <xs:element name="Description">
        . . .
      </xs:element>
      <xs:element name="UnknownOrderEle1">
        . . .
      </xs:element>
      <xs:element name="UnknownOrderEle2">
        . . .
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

加载后，您可以使用如下代码获取相应的`XmlSchemaElement`对象，然后获取其子元素的顺序：

```
XmlSchemaElement element = schema.Elements[new XmlQualifiedName("EleType")];
XmlSchemaType complexType = (XmlSchemaComplexType)element.ElementSchemaType;
XmlSchemaSequence sequence = (XmlSchemaSequence)complexType.Particle;
XmlSchemaObjectCollection childElements = sequence.Items; 
```

`childElements`是按正确顺序排列的有效子元素`Ele`、`Name`、`Description`、`UnknownOrderEle1`、的列表。`UnknownOrderEle2`

只要您的模式很简单，它就可以工作，但是如果类型的定义不是简单的序列而是更复杂的 - with `choice`, groups 等等，它就会变得更加复杂，以至于创建 XML 文件的另一种方法并尝试验证它可能会变得更好。

# jquery - 根据查询字符串值显示/隐藏多个元素

> ID：15072532
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:14:52.860
> 
> 标签：jquery, show-hide

我发现这篇关于设置查询以在页面上 **[显示/隐藏元素的帖子：基于查询字符串值显示/隐藏元素](https://stackoverflow.com/questions/13852056/show-hide-elements-based-on-query-string-value)**

如何扩展它以显示/隐藏多个元素？

例如......假设我在一个页面上有六个元素，它们具有以下类：.a、.b、.c、.d、.e、.f

通过一个查询，我隐藏：.b、.d、.f 和另一个隐藏：.a、.c、.e

可以处理隐藏多个元素的两个不同查询。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:18:37.320

`$('.b,.d,.f').hide();`

`$('.a, .c, .e').hide();`

# caching - Grails 不会加载静态资源中所做的更改（重启时除外）

> ID：15072535
> 
> 赞同：10
> 
> 时间：2013-02-25T17:14:59.480
> 
> 标签：caching, grails

我的新 grails 应用程序有一个烦人的问题。我正在尝试为我将要制作的网站模拟一个设计，但每当我在我的 css 中进行更改时，它都不会影响正在运行的应用程序。无论我做了多大的更改，我都必须停止应用程序然后再次运行它。

这非常令人沮丧，我已经在 Chrome 中关闭了缓存，即使我转到特定文档，资源仍然是旧的。我能做些什么来解决这个问题？我可以在我的`gsp`文件中进行更改，这些更改会出现但不会出现在我的 CSS 中。

我目前正在这样的布局文件中加载资源：

```
<link rel="stylesheet" href="${resource(dir: 'css', file: 'app.css')}" type="text/css"> 
```

如果您需要我提供更多信息，请尽管询问。我正在使用 grails 2.2.0。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T17:24:53.243

将此添加到您的 Config.groovy（可能仅用于开发）

```
grails.resources.debug = true 
```

阅读[文档](http://grails-plugins.github.com/grails-resources/guide/9.%20Configuration.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T17:58:59.830

看起来 Gregg 的答案不适用于 1.3.7（也许这是 2.x 中添加的东西？）。我发现可以快速更新 CSS 的一种方法是在页眉中包含一个单独的 GSP 作为模板。

也就是说，在与视图文件相同的目录中创建一个名为“_css.gsp”的文件（需要下划线前缀），用标准的 css 填充它，并用 html 样式标签包围，然后在布局标题或页面中包含以下内容：

```
<g:render template="css" /> 
```

有了这些，_css.gsp 的内容就会被注入到页面中。而且我可以对 _css.gsp 进行更改，它们会在页面刷新后立即反映出来，而无需重新启动 Grails。希望这可以帮助 Grails pre-2.x 中的某个人！

# c# - 表单动作和文件上传，提交按钮总是转到表单动作

> ID：15072537
> 
> 赞同：0
> 
> 时间：2013-02-25T17:15:03.570
> 
> 标签：c#, asp.net, .net

我有这个表单提交的问题，在按钮上点击这个表单直接进入它的动作，但首先我想验证文件上传并保存上传的文件..但是只要我点击提交按钮表单就会进入动作页面..你有什么想法为什么？
这是代码：

```
<form action="" id="form2" class="appForm">
                      <asp:Repeater ID="Repeater1" runat="server">
                        <ItemTemplate>
                              <table class="jobTitleTbl" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <tr>
                                    <th>Job Title</th>
                                    <th>Job Posting Reference</th>
                                    <th>Type of Job</th>
                                    <th>Job Department</th>
                                </tr>
                            </thead>
                            <ul class="jobHeadings">
                                <li class="jobPos"><%# Eval("JobPosition") %></li>
                                <li class="jobCat"><%# Eval("JobCategory") %></li>
                                <li class="jobDate"><%# Eval("Posted", "{0:MMMM d, yyyy}")%></li>
                                <li class="jobApplyDate"><%# Eval("ApplyBy", "{0:MMMM d, yyyy}")%></li>
                                </ul>
                           <%-- <tbody>
                                    <td class="lftBorder"><%# Eval("JobPosition") %></td>
                                    <td><%# Eval("JobCategory") %></td>
                                    <td></td>
                                    <td><%# Eval("ApplyBy") %></td>
                                </tr>
                            </tbody>--%>
                        </table>
                        </ItemTemplate>
                      </asp:Repeater> 

                     <fieldset>     
                        <legend>Salary</legend>   
                        <div class="formFieldsLft">
                            <asp:TextBox ID="txtBoxCurSalary" runat="server" value="" placeholder="Current Salary" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>
                        <div class="formFieldsLft">
                            <asp:TextBox ID="txtBoxExpSalary" runat="server" placeholder="Expected Salary" value="" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>  
                    </fieldset>
                    <fieldset>     
                        <legend>Notice Period</legend>   
                        <div class="formFieldsLft">
                            <asp:TextBox runat="server" ID="txtboxNoticePeriod" value="Notice Period Required for Joining" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>
                        <div class="formFieldsLft">
                            <asp:TextBox runat="server" ID="txtBoxExpecjoinDate" value="Expected Date of Joining" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>  
                    </fieldset>
                    <fieldset>
                        <legend>Personal Details</legend>

                        <div class="formFieldsLft">
                            <asp:TextBox runat="server" ID="txtBoxPerName" value="Name" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>
                        <div class="formFieldsLft">
                            <asp:TextBox runat="server"  ID="TxtBoxFatherName" value="Father's Name" onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>

                        <div class="formFieldsLft">
                            <label class="idCardLbl floatLft">CNIC#</label><asp:TextBox runat="server" class="" id="txtBoxidCard" type="text" value="99999-9999999-9" />
                        </div>
                        <div class="formFieldsLft">
                            <asp:TextBox runat="server" class="" type="text" value="Family Code" maxlength="6"  onblur="onBlur(this)" onfocus="onFocus(this)" />
                        </div>

                        <div class="formFldsFull">

                                <asp:TextBox runat="server" class="smallFld" ID="txtBoxPhone" value="Phone" onblur="onBlur(this)" onfocus="onFocus(this)" /> 
                                <asp:TextBox runat="server" class="smallFld" ID="txtBoxMobile" value="Mobile" onblur="onBlur(this)" onfocus="onFocus(this)" />                       
                                <asp:TextBox runat="server" class="smallFld" ID="txtBoxEmail" value="Email" onblur="onBlur(this)" onfocus="onFocus(this)" />
                         </div>
<hr class="formDivider" />
                           <h3 class=" fullwidth">Upload Your CV</h3>
                           <div class="formFldsFull">                                 
                                  <input type="file" />
                            </div>

<asp:Button runat="server" ID="ButtonSubmit" CommandName="Apply" Class="btns btnRed floatLft" 
                                    Text="Submit"
                                    oncommand="ButtonSubmit_Command" UseSubmitBehavior="False" />

</form> 
```

# tsql - 如何从多个表中选择一条记录

> ID：15072540
> 
> 赞同：0
> 
> 时间：2013-02-25T17:15:18.070
> 
> 标签：tsql

如果有人能告诉我如何从 12 个表中选择记录，我会很高兴。

主要问题是我为每个科目都有一个表格来存储学生获得的分数。

每个科目表都有以下列：StudentId、RegId、AcademicYear、Term、Form、ClassScore、ExamScore、Total、Grade。

`studentDetails.Students`包含学生人口统计记录的表以`StudentId` 列作为其主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:20:39.117

使用联合查询的示例：

```
SELECT au_lname FROM authors
UNION ALL
SELECT lname FROM Employee
ORDER BY au_lname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:25:40.733

有几种不同的方法可以返回数据。

您可以在表和所有表`JOIN`之间使用 a ：`students``subjects`

```
select *  -- replace this with the columns you want to return
from Students s
left join subject1 s1
    on s.studentid = s1.studentid
left join subject2 s2
    on s.studentid = s2.studentid
left join subject3 s3
    on s.studentid = s3.studentid
left join subject4 s4
    on s.studentid = s4.studentid; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/17489/7)

或者您可以使用类似下面的方法将表与在每个表之间`students`使用 a 的子查询连接起来：`UNION ALL``subject`

```
select s.StudentId, S.StudentName, S.Photo,
   sb.StudentId, sb.RegId, sb.AcademicYear, 
   sb.Term, sb.Form, sb.ClassScore, sb.ExamScore, sb.Total, sb.Grade
from students s
inner join
(
    select s1.StudentId, s1.RegId, s1.AcademicYear, 
          s1.Term, s1.Form, s1.ClassScore, s1.ExamScore, s1.Total, s1.Grade, 
          'Subject1' as src
    from subject1 s1
    union all
    select s2.StudentId, s2.RegId, s2.AcademicYear, 
          s2.Term, s2.Form, s2.ClassScore, s2.ExamScore, s2.Total, s2.Grade, 
          'Subject2' as src
    from subject2 s2
    union all
    select s3.StudentId, s3.RegId, s3.AcademicYear, 
          s3.Term, s3.Form, s3.ClassScore, s3.ExamScore, s3.Total, s3.Grade, 
          'Subject3' as src
    from subject3 s3
) sb
    on s.studentid = sb.studentid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/17489/5)

如果您有另一个要加入的表，那么您将使用：

```
select s.StudentId, S.StudentName, S.Photo,
   sb.StudentId, sb.RegId, sb.AcademicYear, 
   sb.Term, sb.Form, sb.ClassScore, sb.ExamScore, sb.Total, sb.Grade,
   r.programofstudy
from students s
inner join
(
    select s1.StudentId, s1.RegId, s1.AcademicYear, 
          s1.Term, s1.Form, s1.ClassScore, s1.ExamScore, s1.Total, s1.Grade, 
          'Subject1' as src
    from subject1 s1
    union all
    select s2.StudentId, s2.RegId, s2.AcademicYear, 
          s2.Term, s2.Form, s2.ClassScore, s2.ExamScore, s2.Total, s2.Grade, 
          'Subject2' as src
    from subject2 s2
    union all
    select s3.StudentId, s3.RegId, s3.AcademicYear, 
          s3.Term, s3.Form, s3.ClassScore, s3.ExamScore, s3.Total, s3.Grade, 
          'Subject3' as src
    from subject3 s3
) sb
    on s.studentid = sb.studentid
left join Registration r
    on s.studentid = r.studentid 
    and sb.regid = r.regid 
```

# php - .htaccess 导致 $_GET 返回 NULL

> ID：15072543
> 
> 赞同：0
> 
> 时间：2013-02-25T17:15:25.963
> 
> 标签：php, .htaccess, url, get

我正在尝试通过我的 url 将变量从一个页面传递到另一个页面。url 的结构如下所示`http://localhost:8888/test_portfolio?location=ignite_rockford`。

`.htaccess`这是我文件中的相关信息：

```
Options -MultiViews
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ %{REQUEST_FILENAME}.php?/$1?$1=$1
</IfModule></code> 
```

问题似乎出在这一行：`RewriteRule ^(.*)$ %{REQUEST_FILENAME}.php?/$1?$1=$1`，但我不知道该怎么做。如果我`.php`在 test_portfolio 之后添加，那么它可以工作，但是当我转储时，`$_GET['location']`我会得到`NULL`.

哦，是的，我正在检索`$_GET`.`$location = $_GET["location"];`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:20:45.823

如果您只是想删除`.php`，您可以添加它并复制带有`[QSA]`标签的查询字符串：

```
RewriteRule ^(.*)$ $1.php [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:22:35.070

您的网址将来自：

`/test``/test.php?/test?test=test`你确定这是你想要的吗？（除其他外，它看起来格式不正确）

通常你会写一个像这样的路由器：

```
RewriteRule ^(.*)$ router.php?__url=$1 [QSA] 
```

这将为您提供带有原始路径的`GET`参数。将允许您仍然接受所有原始查询参数，例如.`__url``[QSA]``location`

# mysql - MySQL在一个视图中组合多个表

> ID：15072544
> 
> 赞同：0
> 
> 时间：2013-02-25T17:15:31.603
> 
> 标签：mysql, view, sql-view

我有 3 个表希望能够在视图中组合：

```
tblContent:
strTitle        | txtContent
content 1 title | content 1 content
content 2 title | content 2 content
content 3 title | content 3 content 

tblNews
news_title      | news_content
news 1 title    | news 1 content
news 2 title    | news 2 content

tblTradeMembers
company_title   | company_content
trade 1 title   | trade 1 content
trade 2 title   | trade 2 content
trade 3 title   | trade 3 content
trade 4 title   | trade 4 content 
```

所以基本上，我想将这些表中的每一个的内容映射到我的单个结果视图，然后我可以查询如下：

```
title           | content             | from
content 1 title | content 1 content   | tblContent
content 2 title | content 2 content   | tblContent
content 3 title | content 3 content   | tblContent
news 1 title    | news 1 content      | tblNews
news 2 title    | news 2 content      | tblNews
trade 1 title   | trade 1 content     | tblTradeMembers
trade 2 title   | trade 2 content     | tblTradeMembers
trade 3 title   | trade 3 content     | tblTradeMembers
trade 4 title   | trade 4 content     | tblTradeMembers 
```

所以我可以这样做：

```
select * from custom_view WHERE content LIKE "%3%" 
```

这是可以实现的，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:21:45.943

尝试这个

```
 SELECT strTitle AS 'TITLE', txtContent AS 'Content', 'tblContent' AS 'From'
 UNION     
 SELECT news_title AS 'TITLE', news_content AS 'Content', 'tblNews' AS 'From'
 UNION
 SELECT company_title AS 'TITLE', company_content AS 'Content', 'tblTradeMembers' AS 'From' 
```

这将包含您视图中的所有记录

# sql - SQL Server - 从表中删除不必要的零

> ID：15072549
> 
> 赞同：0
> 
> 时间：2013-02-25T17:15:44.637
> 
> 标签：sql, sql-server-2008

我想在显示此表时删除不必要的零

```
Produit | Prix
---------------
   A    | 1000.65400
   B    | 1200.654000
   C    | 2540.6540000
   D    | 1000.25000
   E    | 224000.6540000000 
```

我想得到这个结果：

```
Produit | Prix
---------------
   A    | 1000.654
   B    | 1200.654
   C    | 2540.654
   D    | 1000.25
   E    | 224000.654 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:26:39.903

修剪前导和尾随不需要的 0：

```
UPDATE yourTable
SET Prix = CASE
  WHEN Prix LIKE '%.%[1-9]%' THEN -- has a non-0 after the decimal point
    REPLACE(RTRIM(LTRIM(REPLACE(Prix, '0', ' '))), ' ', '0')
  WHEN Prix LIKE '%.%' THEN -- only 0's after the decimal point, remove point
    REPLACE(REPLACE(RTRIM(LTRIM(REPLACE(Prix, '0', ' '))), ' ', '0'), '.', '')
  ELSE -- has no decimal point, only trim leading 0's
    REPLACE(LTRIM(REPLACE(Prix, '0', ' ')), ' ', '0')
  END 
```

如果您只想修剪尾随：

```
UPDATE yourTable
SET Prix = CASE
  WHEN Prix LIKE '%.%[1-9]%' THEN -- has a non-0 after the decimal point
    REPLACE(RTRIM(LTRIM(REPLACE(Prix, '0', ' '))), ' ', '0')
  ELSE -- only 0's after the decimal point, remove point
    REPLACE(REPLACE(RTRIM(LTRIM(REPLACE(Prix, '0', ' '))), ' ', '0'), '.', '')
  END
WHERE Prix LIKE '%.%' -- make sure it's decimal 
```

上面用空格替换所有`0`s，使用内置的trim函数修剪空格，然后`0`再次用s替换空格。

# c# - 仅在需要时使用科学记数法

> ID：15072552
> 
> 赞同：5
> 
> 时间：2013-02-25T17:15:46.500
> 
> 标签：c#, string-formatting, number-formatting

我想将一个`double`值解析为`string`. 我希望我的号码具有指定的位数（直到运行时我才知道）。如果这个数字可以用位数的非零值表示，这就是我想要的。如果这个数字是这样的零，我希望它用科学计数法表示。

一些例子会让这一点更清楚，这假设我想要 3 位数字：

**值：** .2367**输出：** “0.23”

**值：** .00367**输出：** “3.67E-3”

**值：** 22.3**输出：** “22.3”

**值：** 3364.0**输出：** “3.36E3”

我的解决方案将使用[ToString()](http://msdn.microsoft.com/en-us/library/3hfd35ad.aspx)方法和`N` [数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)，如果它导致零恢复为`E`格式字符串，但这感觉就像在重新发明轮子。有谁知道是否有内置方法可以做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T17:21:48.163

你看过使用[通用数字格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k%28v=vs.100%29.aspx#GFormatString)吗？

> 通用（“G”）格式说明符将数字转换为最紧凑的定点或科学记数法，具体取决于数字的类型以及是否存在精度说明符。

文档中的一些示例：

```
double number;

number = .0023;
Console.WriteLine(number.ToString("G", CultureInfo.InvariantCulture));
// Displays 0.0023

number = 1234;
Console.WriteLine(number.ToString("G2", CultureInfo.InvariantCulture));
// Displays 1.2E+03

number = Math.PI;
Console.WriteLine(number.ToString("G5", CultureInfo.InvariantCulture));
// Displays 3.1416 
```

# android - 错误：“无法从类型 Activity 对非静态方法 findViewById(int) 进行静态引用”

> ID：15072555
> 
> 赞同：8
> 
> 时间：2013-02-25T17:15:54.803
> 
> 标签：android

我是 Java 新手，正在尝试使用 EditText 创建活动。创建时，它会加载当前日期，当用户选择 EditText 时，它会显示 DatePicker。用户选择日期后，我需要将结果放入 EditText。但是，我目前收到以下错误：

> 无法从类型 Activity 对非静态方法 findViewById(int) 进行静态引用

我知道我不能对非静态方法进行静态引用。我试图删除所有静态引用，但这给了我其他错误。我的代码如下。

你能帮我提供一些如何使这项工作的示例代码吗？错误出现在我尝试将结果放入 EditText 时。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Get Current Date and assign to EditText Begin
    Calendar c = Calendar.getInstance();
    System.out.println("Current time => " + c.getTime());

    SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy", Locale.US);
    String formattedDate = df.format(c.getTime());

    EditText ShowDate = (EditText) findViewById(R.id.editTextToShowDate);
    ShowDate.setText(formattedDate);
    //Get Current Date and assign to EditText End
}

//Date Picker Start
@TargetApi(Build.VERSION_CODES.HONEYCOMB) public void showDatePickerDialog(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getFragmentManager(), "datePicker");
}    

@TargetApi(Build.VERSION_CODES.HONEYCOMB) public static class DatePickerFragment extends DialogFragment
implements DatePickerDialog.OnDateSetListener {

@TargetApi(Build.VERSION_CODES.HONEYCOMB) @Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
// Use the current date as the default date in the picker
final Calendar c = Calendar.getInstance();
int year = c.get(Calendar.YEAR);
int month = c.get(Calendar.MONTH);
int day = c.get(Calendar.DAY_OF_MONTH);

// Create a new instance of DatePickerDialog and return it
return new DatePickerDialog(getActivity(), this, year, month, day);
}

public void onDateSet(DatePicker view, int year, int month, int day) {
// Do something with the date chosen by the user
    String sToDate = createStringFromDateElements(year, month, day);
    EditText ShowDate = (EditText) findViewById(R.id.editTextToShowDate);  //I get the error here
    ShowDate.setText(sToDate);  
}

private String createStringFromDateElements(int year, int month, int day) {
    // TODO Auto-generated method stub
    return null;
}
}
//Date Picker End

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T17:21:54.870

编辑：

```
EditText ShowDate = (EditText)getActivity(). findViewById(R.id.editTextToShowDate); 
```

这将工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T19:25:44.763

# c# - 将 XML 文件保存在项目文件夹中

> ID：15072557
> 
> 赞同：3
> 
> 时间：2013-02-25T17:16:07.823
> 
> 标签：c#, asp.net, xml, entity-framework

```
try
{
    XElement contactsFromFile = XElement.Load("App_Data/EmployeeFinList.xml");
    var xEle = new XElement("Employees",
        from emp in ListFromBasicPay
        select new XElement("Employee",
            new XAttribute("EmpID", emp.employee_personal_id),
            new XElement("GrandTotal", emp.grandTotal),
            new XElement("Housing", emp.housing),
            new XElement("BasePay", emp.base_pay),
            new XElement("XchangeRate", emp.Exchange_rate)));

    xEle.Save("..\\changesetDB.xml");

    Debug.WriteLine("Converted to XML");
}
catch (Exception ex)
{
    Debug.WriteLine(ex.Message);
} 
```

我想将 xml 文件保存在我在项目中创建的文件夹中。然后，我将使用在我的文件夹中创建的那个 xml 文件并从中读取和写入。知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:43:16.100

使用 `System.Reflection.Assembly.GetExecutingAssembly().Location` 要获取程序集的完整路径，请将其与`System.IO.Path.GetDirectoryName()`.

那将是：

```
String path = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);

xEle.Save(path + @"\myfilename.xml"); 
```

尽管您应该注意，例如，如果您的应用程序安装在 C:\Program Files 中，您将需要某种提升权限才能在其中写入，具体取决于您的应用程序部署所在机器的安全设置。最好始终在其他位置（例如（应用程序数据））有一个工作目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T10:14:16.317

使用 Red Serpent 的答案来获取您的项目文件夹：

```
 String path = System.IO.Path.GetDirectoryName
  (System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

然后使用：

```
 string mySavePath = Path.Combine(path, myFolder);

   string myXMLPath = Path.Combine(SavePath,"changesetDB.xml"); 
```

然后，您可以使用**myXMLPath**读取和写入刚刚创建的 XML 文件。

# c - 在同一个 system() 调用中连接两个命令

> ID：15072558
> 
> 赞同：2
> 
> 时间：2013-02-25T17:16:20.490
> 
> 标签：c, windows

```
int main()
{
  // system("start cd i:");            //1\. changing to I: but again going back to c:
     system(" dir i: >>d:\txt.txt");   //2\. "Access denied."
     getch();
return 0;
} 
```

有人可以在语句一和二中解释此代码生成的输出吗？并请建议如何在同一个`system()`调用中连接这两个命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T17:20:37.700

```
system(" dir i: >>d:\txt.txt"); 
```

应该

```
system(" dir i: >>d:\\txt.txt"); 
```

否则，您尝试创建一个文件“tab”，后跟“xt.txt”，这是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:28:32.180

您可以将两个命令与`&`.

```
system("cd i: &  dir i: >>d:\\txt.txt"); 
```

另请注意，您需要`\\`而不是`\`在您的路径中-`\`需要转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:24:40.233

该`cd`命令是更改**当前**驱动器的目录。

要更改驱动器，只需发出驱动器号本身，后跟`:`.

所以要切换到 drive `I:`，发出：

```
I: 
```

命令解释器允许使用 a 连接两个命令`&`：

```
system("command1 & command2"); 
```

在你的情况下会变成：

```
system("I: & dir >>d:\\txt.txt") 
```

* * *

或者，您可以将希望由命令处理器执行的每个命令添加到文本文件中，每行一个命令，而不是将文件命名为`something.bat`并从命令行调用它。然后每行将由命令处理器执行。

进一步阅读：[http ://en.wikipedia.org/wiki/Batch_file](http://en.wikipedia.org/wiki/Batch_file)

# cluster-computing - 在两台主机上运行 MPI

> ID：15072563
> 
> 赞同：1
> 
> 时间：2013-02-25T17:16:46.087
> 
> 标签：cluster-computing, mpi

我浏览了很多例子，但我仍然感到困惑。我从[这里](https://computing.llnl.gov/tutorials/mpi/samples/C/mpi_latency.c)编译了一个简单的延迟检查程序，它可以在一台主机上完美运行，但是当我尝试在两台主机上运行它时它会挂起。但是，运行类似的东西`hostname`运行良好：

```
[hamiltont@4 latency]$ mpirun --report-bindings --hostfile hostfile --rankfile rankfile -np 2 hostname
[4:16622] [[5908,0],0] odls:default:fork binding child [[5908,1],0] to slot_list 0
4
[5:12661] [[5908,0],1] odls:default:fork binding child [[5908,1],1] to slot_list 0
5 
```

但这里是编译的延迟程序：

```
[hamiltont@4 latency]$ mpirun --report-bindings --hostfile hostfile --rankfile rankfile -np 2 latency 
[4:16543] [[5989,0],0] odls:default:fork binding child [[5989,1],0] to slot_list 0
[5:12582] [[5989,0],1] odls:default:fork binding child [[5989,1],1] to slot_list 0
[4][[5989,1],0][btl_tcp_endpoint.c:638:mca_btl_tcp_endpoint_complete_connect] connect() to 10.0.2.5 failed: Connection timed out (110) 
```

我目前的猜测是我的防火墙规则有问题（例如主机名不在主机之间通信，但延迟程序可以）。

```
[hamiltont@4 latency]$ cat rankfile
rank 0=10.0.2.4 slot=0
rank 1=10.0.2.5 slot=0
[hamiltont@4 latency]$ cat hostfile 
10.0.2.4 slots=2
10.0.2.5 slots=2 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T18:21:54.403

运行 Open MPI 作业涉及两种通信。首先必须启动作业。Open MPI 使用一个特殊的框架来支持多种启动，您可能正在使用`rsh`通过 SSH 的远程登录启动机制。显然，您的防火墙已正确设置为允许 SSH 连接。

当启动 Open MPI 作业并且进程是真正的 MPI 程序时，它们会连接回`mpirun`生成作业的进程并了解作业中的所有其他进程，最重要的是每个进程的可用网络端点。这条信息：

```
[4][[5989,1],0][btl_tcp_endpoint.c:638:mca_btl_tcp_endpoint_complete_connect] connect() to 10.0.2.5 failed: Connection timed out (110) 
```

表示在 host 上运行的进程`4`无法打开与在 host 上运行的进程的 TCP 连接`5`。最常见的原因是防火墙的存在，它限制了入站连接。所以检查你的防火墙是第一件事。

另一个常见原因是，如果在两个节点上都配置了额外的网络接口，并且具有兼容的网络地址，但无法在它们之间建立连接。这通常发生在较新的 Linux 设置上，默认情况下会启动各种虚拟和/或隧道接口。`btl_tcp_if_exclude`可以通过在MCA 参数中列出这些接口（作为接口名称或 CIDR 网络地址）来指示 Open MPI 跳过这些接口，例如：

```
$ mpirun --mca btl_tcp_if_exclude "127.0.0.1/8,tun0" ... 
```

（如果设置总是必须添加环回接口`btl_tcp_if_exclude`）

`btl_tcp_if_include`或者可以通过在MCA 参数中列出它们来明确指定用于通信的接口：

```
$ mpirun --mca btl_tcp_if_include eth0 ... 
```

由于错误消息中的 IP 地址与主机文件中的第二个主机的地址匹配，因此问题一定来自活动的防火墙规则。

# javascript - 使用 jQuery 在用户悬停时动画工具提示

> ID：15072566
> 
> 赞同：0
> 
> 时间：2013-02-25T17:16:51.597
> 
> 标签：javascript, jquery

我试图让我的工具提示在鼠标悬停时反弹，

我有以下适用于零星结果的内容，如工具提示快速反弹 3 秒 ro 所以，然后慢 3 秒等...我还需要在鼠标悬停时停止此功能，有人可以看到我哪里出错得到弹跳速度的变化？

```
// Tooltip title
$('.male').mouseover(function(e) { 

    var tiptitle = $(this).find('.highlight');

    setInterval(function(){
              tiptitle.animate({top:'-85px'}, 100, function() {
              tiptitle.animate({top:'-75px'}, 100);
        });
    },200);
}).mouseout(function() {

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:22:25.980

如果您选择使用效果插件反弹效果的路线，请使用此代码，然后在 mouseout 上使用 stop()

```
$('.male').mouseover(function(e) {     
    var tiptitle = $(this).find('.highlight');    
    tiptitle.effect("bounce", { times:3 }, 300);
}).mouseout(function() {
    $(this).find('.highlight').stop();
 }); 
```

否则，我相信你会得到零星的反弹速度，因为 -85px 和 -75px 都在 100

# oracle - ORA-00907: 缺少右括号，从 {function} 中选择 *

> ID：15072567
> 
> 赞同：1
> 
> 时间：2013-02-25T17:16:54.310
> 
> 标签：oracle, oracle11g

我正在尝试运行以下查询。
``select * from table(PK_ADMIN_REPORT.FN_GET_APPS_RECIEVED_OFFER(:CATALOG_YEAR IN NUMBER));``
但它说'ORA-00907：缺少右括号'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:25:14.763

`FN_GET_APPS_RECIEVED_OFFER(:CATALOG_YEAR IN NUMBER)`看起来像一个[函数声明](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/parameter_declaration.htm#CJAJDGCC)；您在传入参数时不包括参数的方向和类型。所以它可能应该是：

```
select * from table(PK_ADMIN_REPORT.FN_GET_APPS_RECIEVED_OFFER(:CATALOG_YEAR)); 
```

ORA-00907 错误并不一定意味着缺少括号，它通常（或通常）表示一些通用语法错误。在这种情况下，它期望在`)`之后立即有一个结束符或逗号`(:CATALOG_YEAR`，但它*在那个时候*`IN NUMBER`看到了。这不是括号的数量，而是它们抱怨的位置。

# c - 两个函数之间的 Malloc 可访问性

> ID：15072569
> 
> 赞同：1
> 
> 时间：2013-02-25T17:17:08.803
> 
> 标签：c, thread-safety, malloc

我正在用多线程编写生产者-消费者问题的变体。我正在尝试使用队列来存储“生产”的项目，直到它们稍后被“消费”。我的问题是，当消费者线程运行时，它只处理添加到队列中的最新项目（而不是队列中最旧的项目）。此外，它会重复处理该项目（直到队列本身的项目数量）。

我认为我的问题可能是当我将一个项目推入队列时我需要分配一些内存（虽然不确定）。但是，当该项目即将被消耗时，我需要一种方法来引用此内存。

无论如何，这是我的程序的配对版本。我意识到我在这里发布的内容是不完整的（这是一个无限循环），但我只是想展示与这个问题相关的部分。queue_push() 和 queue_pop() 函数都经过了很好的测试，所以我认为问题不在于那里。如果需要，我会发布更多。

谁能看到为什么我的消费者线程只处理最新的队列项？谢谢！

```
sem_t mutex;
queue q;

FILE* inputFPtr[10];

char host_in[BUFFERSIZE];
char host_out[BUFFERSIZE];

void* p(void* inputFile) {

    while (fscanf(inputFile, INPUTFS, host_in) > 0) 
    {
        sem_wait(&mutex);
        queue_push(&q, host_in); //this function pushes the hostname onto the back of the queue   
        fprintf(stdout, "Produced: %d) %s\n", i, host_in);
        sem_post(&mutex);        
     }

    fclose (inputFile);
}

void* c() {

    while (TRUE)
    {        
        sem_wait(&mutex);
        sprintf(hostname_out, "%s", (char *) queue_pop(&q));
        printf("%s\n", host_out);
        sem_post(&mutex);
    }

}

int main (int argc, char* argv[]) {

    int i;
    pthread_t *th_in[argc-2];
    pthread_t *th_out[2];

    for (i = 0; i < (argc-2); i++) {
        th_in[i] = (pthread_t *) malloc(sizeof(pthread_t)); 
        inputFPtr[i] = fopen(argv[i+1], "r");
        pthread_create (th_in[i], NULL, p, inputFPtr[i]);
    }

    for (i = 0; i < 2; i++) {
        th_out[i] = (pthread_t *) malloc(sizeof(pthread_t));
        pthread_create (th_out[i], NULL, c, null);
    }

    for (i = 0; i < (argc - 2); i++) {
        pthread_join(*th_in[i], 0);
        free(th_in[i]);
    }

    for (i = 0; i < (2); i++) {
        pthread_join(*th_out[i], 0);
        free(th_out[i]);
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:50:09.923

你忘了发布你的代码。但是根据您的描述，似乎所有队列成员都指向同一个内存块。这就是为什么你所有的 pop 结果都是同一个项目。你的问题的答案是肯定的。您需要为每个项目分配内存并在“消耗”后释放它。

尝试发布一些代码以获得更具体的答案...

# ruby-on-rails - 如何使用 squeel 在结果中包含连接的记录

> ID：15072572
> 
> 赞同：0
> 
> 时间：2013-02-25T17:17:14.620
> 
> 标签：ruby-on-rails, activerecord, squeel

```
st = 'pen'
ak = '123123'
agreements = Client.where{authentication_key == ak}.first.agreements
products = Product.joins{agreements}.where{agreements.id.in(a) & (short_description.like(st) | long_description.like( st))} 
```

我正在尝试上述方法，但我的结果集中也需要匹配的协议..

因为这

```
class Product < ActiveRecord::Base
  has_and_belongs_to_many :agreements, uniq: true 
```

我不能使用 products.first.agreement.first.... 这可能是不同的协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:15:34.077

我不确定这是否正是您所需要的，但希望它会是：

```
client = Client.where { authentication_key == ak }.first
products = Client.agreements.joins { products }.where { (short_description.like(st) | long_description.like(st) } 
```

这将返回与协议相关联的产品，而这些协议又与您的客户相关联。如果您需要获得一个客户的产品协议，您可以编写一个范围：

```
class Product < ActiveRecord::Base
  #...
  def self.agreements_for_client(id)
    joins { agreements }.where { client_id.eq(id) }
  end
end 
```

并称之为：

```
client = Client.where { authentication_key == ak }.first
Product.first.agreements_for_client(client.id) 
```

我希望这有帮助。

# java - 我可以在切换到 myBatis 时将 iBatis 和 Mybatis 保持在同一个应用程序中吗？

> ID：15072575
> 
> 赞同：5
> 
> 时间：2013-02-25T17:17:24.993
> 
> 标签：java, conflict, ibatis, mybatis

问题是标题之一。以下是简要说明。

我有一个使用 iBatis 2 的应用程序，我想迁移到最新版本的 myBatis（撰写本文时为 3.2.0）。由于我没有足够的时间来开始和完成工作而不必在该应用程序上执行其他任务，并且考虑到创建分支最终需要痛苦的合并，我想知道我是否可以介绍 myBatis 然后见面我的目标逐渐。最终 iBatis 将被完全删除。

我会在途中遇到一些冲突吗？或者说，iBatis 2.3 和 MyBatis 3.2 可以共存吗？也许你们中的一些人面临同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:39:11.113

我认为迁移过程根本不是很复杂，这是您可以在几个小时内完成的任务。

大部分工作是更改包名称。看看这个[文档](http://code.google.com/p/mybatis/wiki/DocUpgrade3)。

无论如何，由于 iBatis 和 myBatis 使用不同的包，因此同时使用它们应该没有任何问题。

# c++ - 提升精神获得匹配的位置

> ID：15072576
> 
> 赞同：1
> 
> 时间：2013-02-25T17:17:25.373
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我已经定义了自己的语法，我想解析一个 cstring（技术上转换为 char* 的映射文件）。我可以对我的语法中的每一个匹配项做出反应（我已经为有趣的匹配项定义了一个动作）并且它工作正常，但我不知道如何将每个匹配项与其在输入 cstring 中的位置结合起来。我必须对每个部分匹配做出反应，其中每个部分都定义为独立的 qi::rule。

我发现了一些教程如何在解析过程中获取错误位置，但没有涵盖该主题。

例子：

```
class MyGrammar : public qi::grammar<iterator_t, std::string()>
{
public:
  MyGrammar(): base_type(main)
  {
    main = *(qi::as_string
          [qi::raw
        [
          (some_rule >> another_rule)
        ]
          ][boost::bind(&MyGrammar::match, this, _1)])
  }
  match(const std::string &match)
  {
    //I'd like to have an position of match inside a passed iterator
  }
private:
  qi::rule<iterator_t, std::string()> main;
}; 
```

# jquery - 使用 appendTo 添加内容时如何应用效果？

> ID：15072577
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:17:29.643
> 
> 标签：jquery

使用 appendTo 添加内容时如何应用效果？

```
$.ajax({
    url: "AddComment.php",
    type: 'post',
    data: {
        comments: value1,
        sect1: value2,
        pid: value3,
        usid: value4

    },
    success: function(data) {
        $("#txtHint").append(data);         
        $("#ta1").val('');      
    },
    error: function() {
        alert(data);
        return false;
    }
}); 
```

上面的代码是有效的。但我想知道如何为附加的文本添加效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:25:00.437

基本思想是隐藏内容，将其添加到 DOM，然后使用效果显示内容。

使用您的代码，将您的成功回调更改为以下内容：

```
success: function(data) {
    $data = $(data);
    $data.hide();
    $data.appendTo("#txtHint");
    $data.show("slow");
} 
```

您可以将`.show("slow")`部件更改为任何将显示动画内容的部件。

# java - 字符串获取/设置线程安全吗？

> ID：15072578
> 
> 赞同：9
> 
> 时间：2013-02-25T17:17:32.827
> 
> 标签：java, thread-safety, immutability

假设我有以下内容，

```
public class Foo{
    private String bar;

    public String getBar(){
        return bar;
    }

    public void setBar(String bar){
        this.bar = bar;
    }
} 
```

由于类的不可变特性，这些方法是自动线程安全的`String`，还是需要一些锁定机制？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T17:18:56.123

不，这不是线程安全的。`Foo`是可变的，所以如果你想确保不同的线程看到相同的值`bar`——即**一致性**——或者：

*   制作`bar` `volatile`, 或
*   制定方法`synchronized`，或
*   使用`AtomicReference<String>`.

的读写`bar`本身是原子的，但原子性不是线程安全的。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

* * *

如需深入了解 Java 并发，请获取[Java Concurrency in Practice (aka JCIP)](https://rads.stackoverflow.com/amzn/click/com/0321349601)的副本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T17:19:30.077

您正在设置引用，因此`String`' 的不变性不会发挥作用。您不会影响`String`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-25T17:18:50.447

不，不安全。

这是 Foo 可变行为；String 的不变性不属于 Foo。

```
public class Foo{
    private String bar;

    public synchronized String getBar(){
        return bar;
    }

    public synchronized void setBar(String bar){
        this.bar = bar;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T17:23:17.737

不，它不是线程安全的。

虽然`String`是不可变的，但问题来自`Foo`. 为了使这一点更明显，例如考虑一个方法，其工作是*附加*（而不是替换） 的值`bar`。当从多个线程调用它时，一些写入可能会丢失。即使在这种情况下最初并不明显，您的简单设置器也可能发生相同的（丢失的写入）。

# wpf - 从代码后面添加转换器到页面资源

> ID：15072581
> 
> 赞同：2
> 
> 时间：2013-02-25T17:17:41.000
> 
> 标签：wpf, binding, ivalueconverter

我想将一个类的特定实例添加到页面的资源中，然后将该类用作转换器，所以在我的页面构造函数中我输入：

```
this.Resources.Add("converterASD", new ASDConverter()); 
```

然后像这样绑定到它：

```
<ListBox ItemsSource="{Binding Converter={StaticResource converterASD}}"/> 
```

但我不断收到此异常：

> 在“System.Windows.Markup.StaticResourceHolder”上提供值引发了异常。

我对 WPF 有点陌生，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:55:45.323

我们可以使用异常中的更多信息。

两个建议：

1.  确保在调用 InitializeComponent() 之前添加资源。
2.  尝试将其切换为动态资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:25:24.510

您可以在页面的资源部分中声明要使用的转换器，如下例所示。（我建议您在 XAML 中而不是在代码隐藏中声明转换器）

**例子：**

```
<UserControl x:Class="Views.ConverterExample"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" d:DesignHeight="300"
        d:DesignWidth="300">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </UserControl.Resources>
    <Grid>
        <CheckBox x:Name="VisibilityController" IsThreeState="False" />
        <ListBox
            Visibility="{Binding ElementName=VisibilityController, Path=IsChecked,Converter={StaticResource BoolToVisibilityConverter}}"
            Height="100" Width="100" BorderBrush="Red" BorderThickness="1" />
    </Grid>
</UserControl> 
```

# android - 为什么要使用 ActionbarSherlock？

> ID：15072588
> 
> 赞同：1
> 
> 时间：2013-02-25T17:18:10.123
> 
> 标签：android, user-interface, actionbarsherlock, native, android-support-library

我已经看到了大量与 ActionbarSherlock 使用相关的答案。即使我使用了几个月我仍然没有答案为什么我应该真正使用它？它比常规的 Android 支持库提供了什么？我可以使用支持库来获得相同的视觉外观。我知道它根据正在运行的 android 版本使用支持或本机实现，但这有什么实际好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T17:26:39.703

> 它比常规的 Android 支持库提供了什么？我可以使用支持库来获得相同的视觉外观。

支持库中**没有**支持 ActionBar。ABS 是 ActionBar 的唯一后向端口。因此，如果您想在 ore HC 设备上使用 ActionBar，那么这是唯一的方法。

**编辑：** 现在支持库
中提供了一个官方的后端端口。`ActionBar`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:31:42.677

`ActionBarSherlock`基本上提供了 android 支持库 -v4 不提供的 BACKWARD COMPATIBILITY。正是因为这个库`HoloEveryWhere`，用户可以在他们的旧手机（froyo、姜饼等）上享受类似 ICS 的 UI。如果您的目标是 Honeycomb/ICS/JB，只需使用本机 ActionBar。希望这是有道理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T17:26:46.533

它适用于较旧的平台。像安卓2.0。

# ios - 修改按钮样式 iOS

> ID：15072593
> 
> 赞同：0
> 
> 时间：2013-02-25T17:18:18.490
> 
> 标签：ios, button

我有一个默认的 iOS UIButton（在故事板中）。

我想更改它（删除边框半径，添加实心边框，更改背景等）。我应该在哪里写代码？我应该使用哪种方法？我应该导入哪些类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:25:29.563

`custom`您可以通过在 Interface Builder 中选择按钮类型来完成大部分（如果不是全部） 。如果这不能完成所有事情，您可以通过代码设置所有这些：

确保你`#import <QuartzCore/QuartzCore.h>`的`.m`文件中有。

设置属性（[此 SO 答案](https://stackoverflow.com/a/8162518/620197)中的基础）：

```
float borderWidth = ...;
UIColor *borderColor = ...; // create the color you want

[[myButton layer] setBorderWidth:borderWidth];
[[myButton layer] setBorderColor:borderColor.CGColor]; 
```

您可以以类似的方式浏览所有您想要的按钮属性。(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:29:11.103

您需要将您的属性定义更改为：

```
@property (nonatomic, strong) IBOutlet UIButton *rssButton; 
```

并将您的 UIButton 对象从情节提要连接到此属性，然后您将能够通过代码随意更改对象（假设您在同一个控制器中执行此操作）

如果您的故事板中已经定义了该按钮，则删除您在视图中添加该按钮的最后一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:25:17.380

在我的简单代码中，我有这样的东西：

```
@property (nonatomic, strong) UIButton *rssButton; 
```

然后我在实现中定义这个按钮：

```
- (UIButton *)rssButton {
    if(_rssButton == nil) {
        _rssButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        _rssButton.frame = CGRectMake(60, 200, 200, 40);
        [_rssButton setTitle:@"Get newest RSS article" forState:UIControlStateNormal];
        _rssButton.titleLabel.textColor = [UIColor colorWithRed:0.294 green:0.553 blue:0.886 alpha:1];
        _rssButton.backgroundColor = [UIColor whiteColor];

        _rssButton.layer.borderColor = [UIColor blackColor].CGColor;
        _rssButton.layer.borderWidth = 0.5f;
        _rssButton.layer.cornerRadius = 10.0f;

        [_rssButton addTarget:self action:@selector(getDataFromRSS) forControlEvents:UIControlEventTouchUpInside];
    }
    return _rssButton;
} 
```

然后在你的主视图中添加：

```
[self.view addSubview:self.rssButton]; 
```

# paypal - PayflowPro 定期计费 - 如何更新订阅配置文件中的付款信息

> ID：15072601
> 
> 赞同：0
> 
> 时间：2013-02-25T17:18:51.940
> 
> 标签：paypal, paypal-subscriptions, paypal-nvp

使用 PayPal Advanced 时，API 允许通过转换单笔付款来创建订阅配置文件（使用 PNREF 作为 ORIGID）。我们正在使用嵌入式 IFRAME 进行测试，以捕获 CC 信息。（沙盒和测试帐户）。现在，在 PayflowPro Recurring billing API - 2012 年 12 月文档中，解释了“修改”操作。我们已经针对大多数订阅参数测试了此 (MODIFY) 操作。
无论出于何种原因，我们如何更新 PAYMENT 信息，比如用户想要使用差异 CC。由于原始信息是由 PP 使用嵌入式 IFRAME 捕获的，因此我们不会在我们的系统中记录付款信息。使用 PP-Advanced 的一个原因是我们不必在我们的服务器上捕获敏感信息。MODIFY 动作 (NVP) 支持直接更新（敏感）CC 信息。这有点违背了使用 PayPal Advanced 的目的。

问题：我们如何更新（使用 API）使用“转换”方法转换的现有订阅配置文件的付款信息。将 PAYPAL ADVANCED 与 RECURRING BILLING 选项一起使用。

谢谢，周一，2013 年 2 月 25 日 - 10:59

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:19:31.637

不幸的是，没有办法使用 PayPal 的托管页面来做到这一点。这可能是将来可用的东西，但目前还不是。此时您唯一的选择是使用 API 并从您的网站执行更新（不使用托管页面），或取消配置文件并通过注册流程将其发回以在他们的信息 (信用卡信息）更改或过期。

# regex - 在 RS 中打印出找到的正则表达式结果

> ID：15072604
> 
> 赞同：0
> 
> 时间：2013-02-25T17:19:03.637
> 
> 标签：regex, printing, awk, record, separator

大家好，你能帮我打印出 RS 中正则表达式的结果吗？

```
awk 'BEGIN {RS="--[0-9a-zA-Z]+--"} /pattern/' awk-test.txt 
```

pattern="--[0-9a-zA-Z]+--" 可以等于 --95700e1b-- 或 --0dcaf754-- 否则 awk 打印出 RS 之间的文本块，我如何也打印找到的 RS ?

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:33:58.297

由于`RS`在可移植脚本中只能是单个字符`awk`，我假设您使用的是`gawk`. 在这种情况下，您可以引用`RT`，它将包含与 中指定的正则表达式匹配的文本`RS`。(`RT`是记录终止符，因此它是匹配`RS`当前记录末尾而不是开头的文本值。)

# javascript - Jquery 测试一个 url 是否已经包含一个参数

> ID：15072606
> 
> 赞同：2
> 
> 时间：2013-02-25T17:19:06.497
> 
> 标签：javascript, jquery, url-rewriting

我知道有很多关于这个的问题，但我没有找到我需要的东西

这是我的js

```
$j('.showCategory li a').each(function() {
    var catId = $j(this).attr("data-id");
    this.href += (/\?/.test(this.href) ? '&' : '?') + 'filter_category='+ catId;
}); 
```

这很好用，因为它使用我想要的参数生成我的 url。问题是，如果我点击多次（这个过滤器在所有页面上都可用），它会一遍又一遍地添加相同的参数，生成这样的 url：

[http://www.blabla.com/search?search=cat&filter_duration=short&filter_duration=medium&filter_duration=long](http://www.blabla.com/search?search=cat&filter_duration=short&filter_duration=medium&filter_duration=long)

我尝试通过添加一个条件来解决这个问题

```
$j('.showCategory li a').each(function() {
    if(this.href.indexOf('filter_category') == -1) {
        var catId = $j(this).attr("data-id");
        this.href += (/\?/.test(this.href) ? '&' : '?') + 'filter_category='+ catId;
    } else {
        ????
    }
}); 
```

但在这种情况下，它不会添加任何参数，但不会替换值。请问我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:41:07.177

使用此模式使用正则表达式进行就地替换：

```
} else {
this.href = this.href.replace(/filter_duration=(.+?)(&|$.*)()/, "filter_duration=" + catId + "$2"
} 
```

这使用捕获组来查找现有的 filter_duration 元素查询参数，并将现有值替换为新值（在本例中为 catId）。无论它是否是字符串中的最后一个查询参数，这都应该有效。

也就是说，我不会将此解决方案视为最佳解决方案，并且您可能最好将您想要的值存储在客户端 javascript 对象中的 url 中，然后每当有人更改时每次从头开始重建 url类别。这样，您就不必担心替换出现问题以及客户端进入不良状态的难以测试的案例。

# android - ViewPager 和 Fragments 的示例/教程

> ID：15072612
> 
> 赞同：0
> 
> 时间：2013-02-25T17:19:50.597
> 
> 标签：android, android-viewpager

我正在寻找一个通过 ViewPager/PageIndicator 使用片段的简短示例。我发现的所有教程/示例都提供了带有生成文本或图像的精美解释，这些文本或图像传递给一个片段。

有没有人可以提供一个只有 2 个单独的片段（包括 xml-layout-part）的简短示例。

一个示例或教程的链接也可以！:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:55:18.037

在将承载片段的 MainActivity 中，您需要创建一个片段适配器类，在 getItem() 方法中，您将返回片段的一个新实例。看看这个例子：

```
public class MainActivity extends FragmentActivity {

static int numberOfPages = 2;
ViewPager myViewPager;
MyFragmentPagerAdapter myFragmentPagerAdapter;
    String text = "test";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    myViewPager = (ViewPager) findViewById(R.id.view_pager);
    myFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
    myViewPager.setAdapter(myFragmentPagerAdapter);
}

// Adapters
private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {
    public MyFragmentPagerAdapter(FragmentManager fm)   {
        super(fm);
    }

    @Override
    public Fragment getItem(int index) {

        return PageFragment.newInstance(text);
    }

    @Override
    public int getCount() {
        return numberOfPages;
    }
} 
```

}

// 片段类

```
public class PageFragment extends Fragment {

TextView tv;

public static PageFragment newInstance(String text) {
    PageFragment pageFragment = new PageFragment();
    Bundle bundle = new Bundle();
    bundle.putString("test", text);
    pageFragment.setArguments(bundle);

    return pageFragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)   {
    View view = inflater.inflate(R.layout.fragment, container, false);
    tv = (TextView) view.findViewById(R.id.tv);
    tv.setText(getArguments().getString("test");        

    return view;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:41:05.960

打开 Eclipse --> 新建 Android 应用程序项目 --> 按 Next --> 输入应用程序名称并在最小 sdk 中选择高于 4.0 的任何内容 --> 按 Next 3 次

在导航类型中的新空白活动中，选择“滑动视图 + 标题条”-> 完成

这是 ViewPager 的一个非常漂亮和简单的示例。

# internet-explorer - URI 方案重定向

> ID：15072613
> 
> 赞同：2
> 
> 时间：2013-02-25T17:20:03.437
> 
> 标签：internet-explorer, google-chrome, windows-7, uri, google-chrome-frame

如何创建特殊的 URI 方案以从 Google Chrome 打开 Internet Explorer 中的链接？

例如，如果我`ie:google.com`在 Chrome 中执行，则会在 IE 中打开一个带有 Google 主页的新窗口。我已经按照“[将应用程序注册到 URI 方案](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)”中的步骤进行操作，但是它确实将字符串传递`ie:google.com`给了 IE，而 IE 不知道该怎么做。

本质上，我需要删除传递给 IE 的协议，或者在注册表中`ie:`设置某种协议重定向。`http:`甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:21:51.950

由于这是一个内部应用程序，我可以在我的内部应用程序中创建一个代理来去除“ie：”协议。注册表看起来像这样...

```
HKEY_CLASSES_ROOT/
  ie/
    shell/
      open/
        command/
          (Default) "PathToExecutableIE" "ProxyLink?url=%1" 
```

然后，我的 ProxyLink 是一个静态 VB.Net 页面，它去掉了字符串的“ie:”部分，并进行了重定向。

# php - 仅选择列表中的某些行

> ID：15072615
> 
> 赞同：0
> 
> 时间：2013-02-25T17:20:07.570
> 
> 标签：php

我有一个下拉选择表单，它基于一个“品牌”表，该表有 150 多个品牌名称和相应的品牌标识。

正如您在下面的代码中看到的，我所有的品牌/行都将出现在下拉表单中。我想知道是否有办法排除某些品牌（不从表中删除它们；例如：它们暂时缺货）。而不仅仅是 LIMIT 1 到 7。

例如，如果我希望品牌名称为 9、27、50 等的品牌名称不出现在选择选项中，该怎么做？是否有某种 EXCEPT() 函数？

```
<?php

echo "<form action=\"chosen_brand.php\" method=\"get\">\n";

echo "<select name=\"brand_name\">\n";

$stmt = mysqli_stmt_init($link);
if($stmt=mysqli_prepare($link,"SELECT `brandid`,`brand ` FROM `brand ` WHERE `brandid`"))
{
mysqli_stmt_bind_param($stmt,"i", $brandid);

mysqli_stmt_execute($stmt);

mysqli_stmt_bind_result($stmt,$brandid, $brand_name);

while(mysqli_stmt_fetch($stmt))   
      {
            echo "<option value=\"$brandid\"> $brand_name </option>";     
      }     
      echo "</select>\n";
      echo "<input name=\"submit\" type=\"submit\" id=\"brandid\" value=\"submit\" />\n";
      echo "</form> \n";

mysqli_stmt_close($stmt);

mysqli_free_result($result);
}

?> 
```

谢谢，珍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:38:25.377

`WHERE brandid NOT IN (9,25,50,etc)`

如果您实际上没有存储库存水平，但有一个缺货品牌列表

也许

`WHERE stock_level > 0`

如果您有每个品牌的单个库存水平

# sql - 在 SQL 中的两个日期之间获取月份的开始日期和结束日期？

> ID：15072616
> 
> 赞同：2
> 
> 时间：2013-02-25T17:20:08.273
> 
> 标签：sql, sql-server

我有以下函数，它应该返回两个月之间月份的开始和结束日期，但问题是，由于本月是 28 天，因此该函数以 28 天为基础计算所有即将到来的月份，因此返回以下错误值。

```
StartDate   EndDate
-----------------------   
2013-02-01  2013-02-28 
2013-03-01  2013-03-28 
2013-04-01  2013-04-28 

declare @sDate datetime,
        @eDate datetime;

select  @sDate = '2013-02-25',
        @eDate = '2013-04-25';

;with months as
(
  select DATEADD(mm,DATEDIFF(mm,0,@sDate),0) StartDate, 
  DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@sDate)+1,0)) EndDate

  union all
  select dateadd(mm, 1, StartDate),
    dateadd(mm, 1, EndDate)
  from months
  where dateadd(mm, 1, StartDate)<=  @eDate
)

select * from months 
```

如何修改它以返回正确的日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T18:14:09.037

尝试这个;

```
declare @sDate datetime,
        @eDate datetime

select  @sDate = '2013-02-25',
        @eDate = '2013-04-25'

;with cte as (
  select convert(date,left(convert(varchar,@sdate,112),6) + '01') startDate,
         month(@sdate) n
  union all
  select dateadd(month,n,convert(date,convert(varchar,year(@sdate)) + '0101')) startDate,
        (n+1) n
  from cte
  where n < month(@sdate) + datediff(month,@sdate,@edate)
)
select startdate, dateadd(day,-1,dateadd(month,1,startdate)) enddate
from cte 
```

[小提琴演示](http://sqlfiddle.com/#!3/d41d8/9592)

```
|  STARTDATE |    ENDDATE |
---------------------------
| 2013-02-01 | 2013-02-28 |
| 2013-03-01 | 2013-03-31 |
| 2013-04-01 | 2013-04-30 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:27:51.950

如果你能得到当月的第一天，用`dateadd`两次得到最后一天。

首先，加 1 个月，然后减 1 天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T09:37:31.673

试试这个：这是一个表函数。返回包含部分日期的月份开始和结束日期表。

```
 CREATE FUNCTION [dbo].[Fun_GetFirstAndLastDateOfeachMonth] (
          @StartDate  DATE,
          @EndDate DATE
    )

    RETURNS @Items TABLE (
          StartDate DATE ,EndDate DATE,MonthNumber INT,YearNumber INT
    )

    AS
    BEGIN
            ;WITH cte AS (
              SELECT CONVERT(DATE,LEFT(CONVERT(VARCHAR,@StartDate,112),6) + '01') startDate,
                     MONTH(@StartDate) n
              UNION ALL
              SELECT DATEADD(MONTH,N,CONVERT(DATE,CONVERT(VARCHAR,YEAR(@StartDate)) + '0101')) startDate,
                    (n+1) n
              FROM cte
              WHERE n < MONTH(@StartDate) + DATEDIFF(MONTH,@StartDate,@EndDate)
            )
            INSERT INTO @Items
            SELECT  CASE WHEN  MONTH(startdate) = MONTH(@StartDate) THEN @StartDate ELSE startdate END AS StartDate, 
            CASE WHEN  MONTH(startdate) = MONTH(@EndDate) THEN @EndDate ELSE DATEADD(DAY,-1,DATEADD(MONTH,1,startdate)) END AS  enddate,
            MONTH(startDate) AS MonthNumner,YEAR(startDate) AS YearNumber
            FROM cte

          RETURN

    END -- End Function 
```

创建函数后执行

```
SELECT * From [EDDSDBO].[Fun_GetFirstAndLastDateOfeachMonth] ('2019-02-25','2019-05-20') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-04T19:22:00.347

您可以使用下面的代码

```
create FUNCTION [dbo].fn_getfirstandenddate (
      @StartDate  DATE,
      @EndDate DATE
)
RETURNS @Items TABLE (
      StartDate DATE ,EndDate DATE
)AS
BEGIN
insert into @ItemsSELECT case when @startdate > DATEADD(DAY,1,EOMONTH((DATEADD(MONTH, x.number, @StartDate)),-1)) then @startdate else DATEADD(DAY,1,EOMONTH((DATEADD(MONTH, x.number, @StartDate)),-1)) end startDay,case when @enddate < eomonth(DATEADD(MONTH, x.number, @StartDate)) then @enddate else eomonth(DATEADD(MONTH, x.number, @StartDate)) end endDate FROM    master.dbo.spt_values x WHERE   x.type = 'P'AND     x.number <= DATEDIFF(MONTH, @StartDate, @EndDate);

      RETURN

END 
```

# javascript - Backbone.js 访问另一个视图函数

> ID：15072618
> 
> 赞同：3
> 
> 时间：2013-02-25T17:20:19.893
> 
> 标签：javascript, backbone.js

我正在使用 Backbone.js 开发一个应用程序

我有 2 个视图，我想使用在其他视图中定义的函数：

```
var FormView = Backbone.View.extend({
  initialize: function(){
    resultsView.myFunction();
  }

})

var resultsView = Backbone.View.extend({
  myFunction: function(){
    alert('test')
  }
}) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:32:56.263

你正在做相反的事情。您可以执行`base view`其他视图可以扩展和实现的操作，例如：

```
/** Any Views that inherit from this View can use the myFunction() */
var BaseView = Backbone.View ({
  myFunction : function(param) {
      alert(param);
  }
});

/** Inherit from the base view above */
var ChildView = BaseView.extend({
  initialize : function(){
      this.myFunction('test');
  }
});

var instanceView = new ChildView({}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:16:48.120

为什么不使用事件？

[路由和事件聚合器协调](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:34:28.103

当您使用 时`Backbone.View.extend`，您正在创建一个`class`. 为了使用该类，您需要创建一个`instance`using`new`运算符。按照惯例，类名以大写字母开头，实例变量名以小写字母开头，因此我将在以下示例中使用该命名约定：

```
//declare view class
var ResultsView = Backbone.View.extend({
  myFunction: function(){
    alert('test')
  }
}); 
```

创建该类的一个实例，并将其传递给您的`FormView`：

```
var resultsView = new ResultsView();
var formView = new FormView({ resultsView: resultsView }); 
```

访问传递的参数`FormView.initialize`：

```
var FormView = Backbone.View.extend({
  initialize: function(options){
    options.resultsView.myFunction();
  }
}); 
```

# visual-studio-2010 - TFS 映射根路径

> ID：15072621
> 
> 赞同：0
> 
> 时间：2013-02-25T17:20:33.543
> 
> 标签：visual-studio-2010, tfs, msbuild-task, csproj

我遇到了下一个问题：

我正在尝试从 .csproj 文件调用自定义 msbuild 任务，我需要设置一个参数（类似于**$(ProjectDir)**），指示项目已映射的 TFS 路径。

我不知道这是否可能；我在此链接中找不到任何宏：http: [//msdn.microsoft.com/en-us/library/c02as0cs (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/c02as0cs(v=vs.80).aspx)

以防万一，这是从 .csproj 文件到我的自定义任务的调用：

```
<UsingTask TaskName="MyTask" 
         AssemblyFile="MyTask.dll"  />
<Target Name="AfterBuild" Condition=" '$(Configuration)' == 'Test' ">
    <DbBuildTask ConfigFile="$(ProjectDir)config\properties.config"
                 XPath="/configuration/properties/nhConnectionString" 
                 PathTfs="........" />
</Target> 
```

有任何想法吗？

提前致谢！

# python - 将组 ID 返回到 pandas 数据帧

> ID：15072626
> 
> 赞同：28
> 
> 时间：2013-02-25T17:20:46.357
> 
> 标签：python, pandas, group-by

对于数据框

```
In [2]: df = pd.DataFrame({'Name': ['foo', 'bar'] * 3,
   ...:                    'Rank': np.random.randint(0,3,6),
   ...:                    'Val': np.random.rand(6)})
   ...: df
Out[2]: 
  Name  Rank       Val
0  foo     0  0.299397
1  bar     0  0.909228
2  foo     0  0.517700
3  bar     0  0.929863
4  foo     1  0.209324
5  bar     2  0.381515 
```

我有兴趣按名称和排名进行分组，并可能获得汇总值

```
In [3]: group = df.groupby(['Name', 'Rank'])
In [4]: agg = group.agg(sum)
In [5]: agg
Out[5]: 
                Val
Name Rank          
bar  0     1.839091
     2     0.381515
foo  0     0.817097
     1     0.209324 
```

但我想在原始字段中获取`df`包含该行的组号的字段，例如

```
In [13]: df['Group_id'] = [2, 0, 2, 0, 3, 1]
In [14]: df
Out[14]: 
  Name  Rank       Val  Group_id
0  foo     0  0.299397         2
1  bar     0  0.909228         0
2  foo     0  0.517700         2
3  bar     0  0.929863         0
4  foo     1  0.209324         3
5  bar     2  0.381515         1 
```

有没有在熊猫中做到这一点的好方法？

我可以用python得到它，

```
In [16]: from itertools import count
In [17]: c = count()
In [22]: group.transform(lambda x: c.next())
Out[22]: 
   Val
0    2
1    0
2    2
3    0
4    3
5    1 
```

但是在大型数据帧上它非常慢，所以我认为可能有更好的内置 pandas 方式来做到这一点。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-25T19:00:54.073

很多方便的东西都存储在`DataFrameGroupBy.grouper`对象中。例如：

```
>>> df = pd.DataFrame({'Name': ['foo', 'bar'] * 3,
                   'Rank': np.random.randint(0,3,6),
                   'Val': np.random.rand(6)})
>>> grouped = df.groupby(["Name", "Rank"])
>>> grouped.grouper.
grouped.grouper.agg_series        grouped.grouper.indices
grouped.grouper.aggregate         grouped.grouper.labels
grouped.grouper.apply             grouped.grouper.levels
grouped.grouper.axis              grouped.grouper.names
grouped.grouper.compressed        grouped.grouper.ngroups
grouped.grouper.get_group_levels  grouped.grouper.nkeys
grouped.grouper.get_iterator      grouped.grouper.result_index
grouped.grouper.group_info        grouped.grouper.shape
grouped.grouper.group_keys        grouped.grouper.size
grouped.grouper.groupings         grouped.grouper.sort
grouped.grouper.groups 
```

所以：

```
>>> df["GroupId"] = df.groupby(["Name", "Rank"]).grouper.group_info[0]
>>> df
  Name  Rank       Val  GroupId
0  foo     0  0.302482        2
1  bar     0  0.375193        0
2  foo     2  0.965763        4
3  bar     2  0.166417        1
4  foo     1  0.495124        3
5  bar     2  0.728776        1 
```

`grouper.group_info[0]`潜伏在某个地方可能有一个更好的别名，但无论如何这应该有效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-04-27T06:41:18.157

[`GroupBy.ngroup`](http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.ngroup.html)从熊猫 0.20.2+ 开始使用：

```
df["GroupId"] = df.groupby(["Name", "Rank"]).ngroup()
print (df)
  Name  Rank       Val  GroupId
0  foo     2  0.451724        4
1  bar     0  0.944676        0
2  foo     0  0.822390        2
3  bar     2  0.063603        1
4  foo     1  0.938892        3
5  bar     2  0.332454        1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-29T19:15:49.990

正确的解决方案是使用`grouper.label_info`：

```
df["GroupId"] = df.groupby(["Name", "Rank"]).grouper.label_info 
```

它会自动将数据框中的每一行`df`与相应的组标签相关联。

# javascript - 实现跨域通信

> ID：15072630
> 
> 赞同：1
> 
> 时间：2013-02-25T17:20:57.257
> 
> 标签：javascript, typescript

[使用 TypeScript 我正在尝试实现此线程](https://stackoverflow.com/q/9153445/1014822)中提到的跨域通信

我的代码如下：

```
 var iframeElement = document.getElementById("myIframe");
 iframeElement.document.contentWindow.postMessage('hello', '*'); 
```

但是在文档之后的第二行中，我没有得到`contentwindow`.

有人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:33:23.840

如果您所说的“句柄”是指您没有获得代码完成，那是因为`contentWindow`它是 的属性，而`iframeElement`不是文档的属性（顺便说一下，因为结果`document.getElementById`是通用的`HtmlElement`，而不是 iframe）。

尝试这个：

```
// Cast the result of getElementById, so you get an iframe and not a generic HtmlElement:
var iframeElement:HTMLIFrameElement = <HTMLIFrameElement>document.getElementById("myIframe");
// Then reference the contentWindow property of the iframe element
iframeElement.contentWindow.postMessage('hello', '*'); 
```

# postgresql - 使用 SQL 表旋转轴

> ID：15072632
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:21:04.277
> 
> 标签：postgresql

我有一张桌子：

```
product   asset    count
 foo        x        1
 bar        x        0
 foo        y        2
 bar        y        1 
```

这是一个缩写版本。大约有 80 种资产和数百种产品。

是否可以使用 SQL 将这张表变成这样的东西？

```
product   asset x   asset y
foo          1         2
bar          0         1 
```

请记住，此数据来自三个表`products`，`assets`和`assets_products`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:53:32.870

你想做的是`crosstab`。

为此，您可以使用[`tablefunc`contrib](http://www.postgresql.org/docs/current/static/tablefunc.html)和以下查询：

```
SELECT * FROM crosstab(
    'SELECT product, asset, count FROM <your_table> ORDER BY 1, 2')
    AS (product text, asset_x int, asset_y int); 
```

# operating-system - 操作系统开发工具：需要的建议

> ID：15072635
> 
> 赞同：2
> 
> 时间：2013-02-25T17:21:19.020
> 
> 标签：operating-system

所以我在圣诞节买了一台新电脑，它预装了 Windows 8。现在，在同一驱动器上运行 Linux Ubuntu 和 W8 时，我遇到了很多麻烦。具有单个硬盘驱动器的 2 个操作系统需要对驱动器进行分区，以便 2 个操作系统不会相互冲突。现在有一个名为*Mini Partition Tool Wizard*的程序在 Windows 8 中运行（还有一个类似的 Linux 程序称为 gparted），它允许您创建和调整硬盘分区的大小，只要您不覆盖您的操作系统'目前正在使用。

长话短说：我想编写自己的迷你操作系统，专门用于启动控制和硬盘管理。也就是说，一旦我将它写入、调试并编译成可执行代码，我会将它放在 USB 记忆棒上，我可以从 BIOS 菜单中启动它，然后直接设置硬盘分区，甚至在必要时格式化我的硬盘. 我很惊讶 BIOS 没有用户自己做的选项。

所以我的问题是：我可以只使用 C/C++ 的工具来做到这一点吗？还是我需要有内联汇编代码？或者也许编写一个在 C++ 程序中使用的汇编代码模块。很确定迷你分区工具向导不是开源的（Windows 也不是）。以前从来没有写过操作系统，所以我对此并不陌生，但愿意并且能够花时间学习它是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:56:19.430

> 我可以只使用 C/C++ 的工具来做到这一点吗？还是我需要有内联汇编代码？

您将需要一些程序集而不是内联类型。您编译的 C/C++ 代码需要设置和配置一些东西（例如 CPU 的 32 位保护模式、堆栈、各种 CPU 寄存器的值、设备驱动程序、中断、C/C++ 内存管理器等），而 BIOS 只是从磁盘加载一个 512 字节长的扇区并将控制权转移给它，而无需进行任何设置，而 CPU 仍处于 16 位模式。

因此，您需要编写一些汇编代码来：

*   从磁盘加载更多内容，您不会认为所有内容都适合 512 字节，是吗？
*   将 CPU 切换到 32 位保护模式
*   重新配置中断控制器，使中断不会映射到与保护模式异常相同的中断向量上（嗯，这个小部分可以在 C 中完成）
*   编写异常处理程序
*   为定时器和键盘之类的基本东西编写中断处理程序（如果精心设计，您可能只需要在汇编中完成其中的一小部分，其余的可以在 C 中完成）

然后您需要为其他所有内容编写 32 位 I/O 设备驱动程序，因为切换后您将无法使用 BIOS。或者，您可以实现一个虚拟 8086 机器（使用虚拟 8086 模式），以便将这些东西委托给 BIOS，这也不是一件小事。其中大部分可以在 C 中完成，但仍然需要一些汇编代码的知识或使用。

您还需要重新实现 C (C++) 标准库的某些部分，因此/ `malloc()`、`new`、`putch()`、`getchar()`等使用您的低级 API 而不是 Windows 或 Linux。`fopen()``time()`

准备好花费几年的时间，从一无所有、缺乏知识和经验到工作。

是的，您确实可以在[osdev.org](http://osdev.org/)开始学习。还有一些有用的新闻组：[comp.lang.asm.x86](http://groups.google.com/group/comp.lang.asm.x86)和[alt.os.development](http://groups.google.com/group/alt.os.development)。

# c# - 这个静态变量线程在 ASP.net c# 中是否安全

> ID：15072636
> 
> 赞同：-1
> 
> 时间：2013-02-25T17:21:19.827
> 
> 标签：c#, asp.net, data-binding, thread-safety

我知道这种事情已经在这里被问过很多次了，但我仍然没有完全理解 ASP 中的线程安全。

C#：其中 Util 是一个静态类，而 theList 是一个静态列表。

```
Util.theList= new List<Object>();
 Util.theList.Add(someObject); 
```

页面加载一次，然后一秒钟后（回发后 1 秒）填充 Util.theList 并重新加载页面以绑定新填充的列表数据：

```
this.Repeater.DataSource = Util.theList;
            this.Repeater.DataBind(); 
```

每次填充列表时，它都会被实例化：

```
Util.theList= new List<Object>(); 
```

如果这不是线程安全的，我怎样才能使它成为线程安全的？我不能让列表非静态并且在同一页面上，因为有一个单独的问题，即数据仅在每次绑定到 page_load 时才绑定： [OnDataBind 仅在第一次回发时触发](https://stackoverflow.com/questions/15058541/ondatabind-only-fires-on-first-postback)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:25:57.973

这显然是不安全的，因为静态变量在请求之间共享。将列表移动到某个特定请求所独有的位置，例如页面实例字段。

如果您需要在回发之间传递状态，请使用 ViewState 或其他一些非全局机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:40:56.387

最好避免一起使用静态变量。静态变量不太适合单元测试。静态类和变量不能被存根或模拟。

但是，在您的实例中，静态变量不是线程安全的。

# jquery - jquery 防止其他链接切换

> ID：15072641
> 
> 赞同：0
> 
> 时间：2013-02-25T17:21:31.463
> 
> 标签：jquery, toggle

我做了一个简单的切换：

```
<script>
$(document).ready(function(){
    $("#tog1").click(function(){
        $("#rel1").slideToggle();
  })

$("#tog2").click(function(){
        $("#rel2").slideToggle();
  })

......

})
<script>

<ul>
<li><a id="tog1" href="#">اتصل بالعضو</a></li>
<li><a id="tog2" href="#">أعماله السابقه</a></li>
<li><a id="tog3" href="#">مواضيع العضو</a></li>
<li><a id="tog4" href="#">ردود العضو </a></li>
</ul>
</div>

<div id="rel1"></div>
<div id="rel2"></div>
<div id="rel3"></div>
<div id="rel4"></div> 
```

我想阻止或禁用当我按下一个链接时切换其他链接并且只允许切换一个链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:26:51.813

首先，我会[`data-`](http://api.jquery.com/data)为所有这些链接添加一个类和一个属性：

```
<li><a id="tog1" class="tog" data-rel="rel1" href="#">اتصل بالعضو</a></li> 
```

现在我们可以为它们制作一键式处理程序。从 中提取 div 的 ID `this`，并[`.siblings()`](http://api.jquery.com/siblings)在打开时将其关闭：

```
$(".tog").click(function(){
    var $div = $('#'+$(this).data('rel'));
    $div.slideToggle().siblings('div').slideUp();
}) 
```

[http://jsfiddle.net/mblase75/HVNbB/](http://jsfiddle.net/mblase75/HVNbB/)

# c++ - 在调试版本 C++ 中无法获取调用堆栈

> ID：15072643
> 
> 赞同：1
> 
> 时间：2013-02-25T16:27:35.273
> 
> 标签：c++, debugging

我有一个奇怪的情况。我的游戏肯定是用调试信息构建的，我可以愉快地打断点和单步执行代码，并查看数据。没有设置异常。我已经排除了多线程问题。当我有一个实际的错误和一个合法的崩溃时，我没有得到调用堆栈。一个典型的崩溃错误将是

```
First-chance exception at 0x004678da in Democracy3Debug.exe: 0xC0000005: Access violation reading location 0x0000004c.
Unhandled exception at 0x774015de in Democracy3Debug.exe: 0xC0000005: Access violation reading location 0x0000004c. 
```

调用堆栈只是 ntdll 和一些反汇编。我一定在某处改变了一些选项，但无法想象是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:25:56.117

这些错误表示硬件异常，因为您尝试访问您的进程无法读取或写入的内存。特别是，您似乎直接或间接地尝试从某个指针所指的地址访问某个元素的 76 字节，但该指针实际上为空（因此访问冲突读取位置 0x0000004c）。

您的调试信息可能不会以任何方式无效，您可能只是合法地位于 nt.dll 内的某些代码中——例如，如果您将空指针传递给不允许它们的 Windows API 函数。如果您没有为 nt.dll 加载符号，您将不会获得有用的调用堆栈。

访问冲突也可能来自您传递的错误指针，该指针在 Windows API 调用某些回调之前未使用，这可能解释了为什么您在堆栈帧中的*任何地方都看不到代码。*

在 VS IDE 中启用 break-on-throw（调试 -> 异常，选中相关异常类型的复选框）可以帮助您在发生这种情况时更早地中断，但如果问题不是直接来自您的代码，则可能无助于诊断问题。

您还可以使用[结构化异常处理](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx)来集成这些异常和 C++ 的异常以进行捕获。您可能还想研究使用[符号服务器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680693%28v=vs.85%29.aspx)来获取 Windows DLL 的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:45:07.320

您的异常没有被捕获，因此它将调用堆栈一直向上移动到 main 并终止您的应用程序。

MSDN：

> 如果找不到当前异常的匹配处理程序（或省略号捕获处理程序），则调用预定义的终止运行时函数。

通常有一个选项允许您在抛出异常时暂停调试。

[如何：抛出异常时中断 (Visual Studio 2012)](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)

您还可以在顶层有一个 catch 语句，并在捕获异常时检查异常（.what() 通常给出描述）。

更新：您很可能无法捕获此异常，因为它是访问冲突（不是 C++ 异常，但暂停应该仍然有效）。如果你在 Windows 上，你可以使用 SEH 来捕捉它。

# php - jquery colorbox + hybridAuth 社交登录

> ID：15072645
> 
> 赞同：1
> 
> 时间：2013-02-25T17:21:41.457
> 
> 标签：php, login, colorbox, social, hybridauth

我尝试在我的网站中加入社交登录，所以我选择了可​​以正常工作的[hybridAuth](http://hybridauth.sourceforge.net/)。问题是我为弹出登录页面使用了颜色框，而当用户未登录社交网络时，hybridAuth 不会将社交网络（例如 facebook）的登录页面重定向到颜色框弹出窗口中。我用这个[脚本](http://hybridauth.sourceforge.net/userguide/Integrating_HybridAuth_SignIn.html)

因此，如果我不使用颜色框，则身份验证工作正常，用户将被重定向到社交登录页面，然后返回网站，当我尝试在颜色框中执行此操作时，它看起来就像所有东西都在堆栈。

# jquery - 如何将jquery ui手风琴默认图标全局更改为加号图标

> ID：15072648
> 
> 赞同：1
> 
> 时间：2013-02-25T17:21:46.703
> 
> 标签：jquery, css, ruby-on-rails, jquery-ui

我`Jquery UI Accordion`在我的rails项目中使用。将用作默认值`accordion`。`arrow images`我需要将该箭头图标更改`Plus icon`为默认值。我应该在哪里编辑以`Plus and minus icon`默认更改所有站点。我在很多页面中使用手风琴？

我在其他帖子中看到了更多相关的这个问题。就我而言，是在 ruby​​-on-rails 项目中。我想全局更改图标以在整个项目中生效。

我在每一页中添加了以下行，以使其按我想要的方式工作。我觉得它不是 DRY 原则。我需要像这样全局设置以处理整个站点中的所有页面。

```
<script>
  $(function() {
    $( "#accordion" ).accordion({
      heightStyle: "content"
    });
    /* Change the accordion image to Plus and minus */
    $("#accordion").accordion("option", "icons", 
        { 'header': 'ui-icon-plus', 'headerSelected': 'ui-icon-minus' });
  });
</script> 
```

任何建议和帮助将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:24:28.317

jQuery UI 为其小部件提供了大量文档。[去这里](http://api.jqueryui.com/accordion/#option-icons)查看手风琴的文档（特别是用于更改图标）。

有关这些文档中提到的 CSS 框架的进一步阅读，请[点击此处](http://docs.jquery.com/UI/Theming/API#Icons)。

例如，如果您访问 jQuery UI 的[Themeroller](http://jqueryui.com/themeroller/)，您可以查看图标的大网格，找到您喜欢的图标，将鼠标悬停在上面查看类名，然后在我的第一个链接中的文档中使用该名称进行配置您的手风琴菜单以使用您选择的图标。如果您查看第一个链接中的文档，该示例实际上分别使用加号和减号图标来表示内容何时折叠/展开。

# macos - 在全屏应用上禁用 Cmd-Opt-Escape

> ID：15072652
> 
> 赞同：2
> 
> 时间：2013-02-25T17:21:52.553
> 
> 标签：macos, cocoa, events, key, quit

我在用：

```
 if (CGCaptureAllDisplays() != kCGErrorSuccess) { 
```

在用户离开时捕获显示并保护我的应用程序，但用户已报告，并且我已确认按下只是强制退出我的应用程序。

我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:00:44.870

我相信你想要的是一个信息亭环境；请参阅[Apple 的技术说明 TN2062：创建信息亭](http://developer.apple.com/library/mac/#technotes/tn2062/_index.html)。

具体来说，您需要使用`-[NSApplication setPresentationOptions:]`; 请参阅`NSApplicationPresentationOptions` [此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html)了解可能的值。

# macos - 在 mac os x 10.8.2 中更新 /etc/authorization 文件会产生什么影响

> ID：15072653
> 
> 赞同：3
> 
> 时间：2013-02-25T17:21:54.210
> 
> 标签：macos, instruments, ui-automation

我们在项目中使用 Bamboo 进行 CI 和 UIAutomation 测试。为此，我们使用构建 xcode 项目的脚本，创建 .app 文件，然后启动 Instruments 以运行自动化测试。在我们用于运行自动化脚本的脚本中，我们收到以下错误：“无法授权权限 (0x2)，状态为：-60007。” 我搜索了这个错误，我得到的解决方案是在“etc/authorization”文件中更新“system.privilege.taskport”以允许root 将解决问题。实际上它确实解决了我的问题。但是，在那之后，当系统被破坏时。我的意思是，我试图重新启动它，但它没有启动。我没有更改系统中的任何内容。恢复机器的唯一方法是重新安装它。

现在，在我的新机器上，脚本再次出现相同的错误。谁能帮我解决它。无需更改系统文件中的任何内容。任何人都可以确认更改“etc/authorization”文件的影响

# php - mongodb：查找列的最高数值

> ID：15072658
> 
> 赞同：7
> 
> 时间：2013-02-25T17:22:07.617
> 
> 标签：php, mongodb, find

我有包含多个字段的 MongoDB 文档集合。列/字段之一应仅为数字，但其中一些字段包含非数字（损坏）数据作为字符串值。我应该找到该列的最高数值，不包括损坏的非数值数据。我知道[Get the high value of a column in MongoDB](https://stackoverflow.com/questions/4762980/getting-the-highest-value-of-a-column-in-mongodb)的问题，但是 AFAIK，这个扩展案例没有被涵盖。

下面的示例描述了该问题。对于最高值，`"age": 70`应返回带有的文档：

```
[
{
    "id": "aa001",
    "age": "90"
},
{
    "id": "bb002",
    "age": 70
},
{
    "id": "cc003",
    "age": 20,
}
] 
```

为 find() / findOne() 查询提供一个 PHP 示例会很有帮助。非常感谢！

JohnnyHK 想出了完美的解决方案。这是工作的PHP代码：

```
$cursor = $collection->find(array('age' => array('$not' => array('$type' => 2))), array('age' => 1));
$cursor->sort(array('age' => -1))->limit(1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T17:34:08.150

您可以在查询中使用[`$type`](http://docs.mongodb.org/manual/reference/operator/type/#_S_type)运算符 with来排除字符串[`$not`](http://docs.mongodb.org/manual/reference/operator/not/#_S_not)在哪里的文档。`age`在 shell 中，您的查询将如下所示：

```
db.test.find({age: {$not: {$type: 2}}}).sort({age: -1}).limit(1) 
```

或者来自 Martti 的 PHP：

```
$cursor = $collection->find(array('age' => array('$not' => array('$type' => 2))), array('age' => 1));
$cursor->sort(array('price' => -1))->limit(1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-20T20:00:14.863

 **使用**PHP 驱动程序（mongodb）**`findOne()`**

 **```
$filter=[];
$options = ['sort' => ['age' => -1]]; // -1 is for DESC
$result = $collection->findOne(filter, $options);
$maxAge = $result['age'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T11:13:28.947

您可以使用聚合函数从这样的集合中获取最大数量。

```
$data=$collection->aggregate(array
                    ( '$group'=> 
                        array('_id'=>'',
                            'age'=>array('$max'=>'$age'.)
                        )
                    )
            ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-03T08:43:29.410

这对我有用

```
$options = ['limit' => 100,'skip' => 0, 'projection' => ['score' => ['$meta' => 'textScore']], 'sort' => ['score' => ['$meta' => 'textScore']]]; 
```**

# game-physics - 球和椭圆碰撞

> ID：15072661
> 
> 赞同：0
> 
> 时间：2013-02-25T17:22:15.430
> 
> 标签：game-physics

作为一项练习，我正在尝试实现类似乒乓球的游戏，并尝试使用椭圆形作为球拍。有人可以帮我计算球和桨碰撞后球的方向吗？

![我想做的事](../Images/bcc8fbeba7ff20bfd360d501bb81190d.png)
我对计算的数学部分感兴趣，而不是可以为我计算它的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:29:19.717

设`n`为在接触点处垂直于椭圆表面的单位矢量。（你可以找到如何计算这样一个向量，例如[在这里](http://mathhelpforum.com/calculus/5378-normal-vector-point-sphere-ellipsoid.html)。）假设`v`是一个向量，球沿着它接近；它会沿着向量离开

```
u = v - 2(v.n)n 
```

`.`点积在哪里。

# java - 当我包含 java.lang.NoClassDefFoundError 到 web.xml java

> ID：15072666
> 
> 赞同：1
> 
> 时间：2013-02-25T17:22:43.853
> 
> 标签：java, jboss6.x

拜托，我找不到这个错误的原因。

我创建了一个类 LogoutListener.java，它实现了 HttpSessionListener，它有两个抽象方法：sessionCreated 和 sessionDestroyed。我在 web.xml 中添加了相应的监听器标签：

...更多代码

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.seam</url-pattern>
</servlet-mapping>

<!-- Listeners used by application -->

<listener>
     <listener-class>com.akson.encuesta.session.helper.LogoutListener</listener-class>
</listener>

<security-constraint>
    <display-name>Restrict raw XHTML Documents</display-name>
    <web-resource-collection>
        <web-resource-name>XHTML</web-resource-name>
        <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint />
</security-constraint> 
```

...更多代码

当我删除标签时，服务器不会出现错误，但是当标签在 web.xml 中时，服务器会出现错误（下一个是日志的一部分）：

```
 EjbSynchronizations/local - EJB3.x Default Local Business Interface
        EjbSynchronizations/local-org.jboss.seam.transaction.LocalEjbSynchroniza
tions - EJB3.x Local Business Interface

12:16:12,550 INFO  [SessionSpecContainer] Starting jboss.j2ee:jar=demoencuesta06
.war,name=TimerServiceDispatcher,service=EJB3
12:16:12,551 INFO  [EJBContainer] STARTED EJB: org.jboss.seam.async.TimerService
Dispatcher ejbName: TimerServiceDispatcher
12:16:12,557 INFO  [JndiSessionRegistrarBase] Binding the following Entries in G
lobal JNDI:

        TimerServiceDispatcher/local - EJB3.x Default Local Business Interface
        TimerServiceDispatcher/local-org.jboss.seam.async.LocalTimerServiceDispa
tcher - EJB3.x Local Business Interface

12:16:12,559 WARN  [TimerServiceContainer] EJBTHREE-2193: using deprecated Timer
ServiceFactory for restoring timers
12:16:12,763 INFO  [TomcatDeployment] deploy, ctxPath=/demoencuesta06
12:16:12,806 ERROR [[/demoencuesta06]] Error configurando escuchador de aplicaci
¾n de clase com.akson.encuesta.session.helper.LogoutListener: java.lang.ClassNot
FoundException: com.akson.encuesta.session.helper.LogoutListener
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202) [:1.6.0_33]
        at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_33
]
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190) [:1.6.0_33
]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306) [:1.6.0_33]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) [:1.6.0_33]
        at org.jboss.web.tomcat.service.TomcatInjectionContainer.newInstance(Tom
catInjectionContainer.java:278) [:6.1.0.Final]
        at org.jboss.web.tomcat.service.TomcatInjectionContainer.newInstance(Tom
catInjectionContainer.java:264) [:6.1.0.Final]
        at org.apache.catalina.core.StandardContext.contextListenerStart(Standar
dContext.java:3319) [:6.1.0.Final]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3
828) [:6.1.0.Final]
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
Internal(TomcatDeployment.java:294) [:6.1.0.Final]
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
(TomcatDeployment.java:146) [:6.1.0.Final]
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeploy
ment.java:476) [:6.1.0.Final]
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118) [:6
.1.0.Final]
        at org.jboss.web.deployers.WebModule.start(WebModule.java:95) [:6.1.0.Fi
nal]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_3
3]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39) [:1.6.0_33]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25) [:1.6.0_33]
        at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_33]
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatch
er.java:157) [:6.0.0.GA]
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) [:6.0.0.G
A]
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) [:6.0.0.GA]

        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.
java:271) [:6.0.0.GA]
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670)
[:6.0.0.GA]
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java
:206) [:2.2.0.SP2]
        at $Proxy41.start(Unknown Source)       at org.jboss.system.microcontain
er.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:53) [:2.
2.0.SP2]
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installActio
n(StartStopLifecycleAction.java:41) [:2.2.0.SP2]
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.sim
pleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.
2.0.SP2]
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.ins
tall(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install
(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.system.microcontainer.ServiceControllerContext.install(Serv
iceControllerContext.java:301) [:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:2044) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.executeOrIncrementSta
teDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:939) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:654) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.system.ServiceController.doChange(ServiceController.java:67
1) [:6.1.0.Final (Build SVNTag:JBoss_6.1.0.Final date: 20110816)]
        at org.jboss.system.ServiceController.start(ServiceController.java:443)
[:6.1.0.Final (Build SVNTag:JBoss_6.1.0.Final date: 20110816)]
        at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java
:189) [:6.1.0.Final]
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:102) [:6.1.0.Final]
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.jav
a:49) [:6.1.0.Final]
        at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.i
nternalDeploy(AbstractSimpleRealDeployer.java:63) [:2.2.2.GA]
        at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(
AbstractRealDeployer.java:55) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(Deployer
Wrapper.java:179) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(Deployer
sImpl.java:1832) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1550) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFi
rst(DeployersImpl.java:1571) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(Deployers
Impl.java:1491) [:2.2.2.GA]
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:2044) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.executeOrIncrementSta
teDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:939) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:654) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersI
mpl.java:1983) [:2.2.2.GA]
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(Deployers
Impl.java:1076) [:2.2.2.GA]
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeploye
rImpl.java:679) [:2.2.2.GA]
        at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.p
rocess(MainDeployerPlugin.java:106) [:6.1.0.Final]
        at org.jboss.profileservice.dependency.ProfileControllerContext$Delegate
Deployer.process(ProfileControllerContext.java:143) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileDeployAction.deploy(Profil
eDeployAction.java:151) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileDeployAction.installAction
Internal(ProfileDeployAction.java:94) [:0.2.2]
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction
(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.SP2]
        at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction
(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.sim
pleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.
2.0.SP2]
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.ins
tall(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install
(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractControllerContext.install(Abstra
ctControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.install(AbstractContr
oller.java:2044) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.incrementState(Abstra
ctController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.executeOrIncrementSta
teDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(Abstr
actController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:939) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.dependency.plugins.AbstractController.change(AbstractContro
ller.java:654) [jboss-dependency.jar:2.2.0.SP2]
        at org.jboss.profileservice.dependency.ProfileActivationWrapper$BasicPro
fileActivation.start(ProfileActivationWrapper.java:190) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationWrapper.start(Pr
ofileActivationWrapper.java:87) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationService.activate
Profile(ProfileActivationService.java:215) [:0.2.2]
        at org.jboss.profileservice.dependency.ProfileActivationService.activate
(ProfileActivationService.java:159) [:0.2.2]
        at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.ac
tivate(AbstractProfileServiceBootstrap.java:112) [:0.2.2]
        at org.jboss.profileservice.resolver.BasicResolverFactory$ProfileResolve
rFacade.deploy(BasicResolverFactory.java:87) [:0.2.2]
        at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.st
art(AbstractProfileServiceBootstrap.java:91) [:0.2.2]
        at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceB
ootstrap.start(BasicProfileServiceBootstrap.java:132) [:6.1.0.Final]
        at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceB
ootstrap.start(BasicProfileServiceBootstrap.java:56) [:6.1.0.Final]
        at org.jboss.bootstrap.impl.base.server.AbstractServer.startBootstraps(A
bstractServer.java:827) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
        at org.jboss.bootstrap.impl.base.server.AbstractServer$StartServerTask.r
un(AbstractServer.java:417) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
        at java.lang.Thread.run(Thread.java:662) [:1.6.0_33]

12:16:12,899 ERROR [[/demoencuesta06]] Se ha saltado la instalaci¾n de escuchado
res de aplicaci¾n debido a error(es) previo(s)
12:16:12,900 ERROR [StandardContext] Error listenerStart
12:16:12,900 ERROR [StandardContext] Fall¾ en arranque del Contexto [/demoencues
ta06] debido a errores previos
12:16:12,917 ERROR [AbstractKernelController] Error installing to Start: name=jb
oss.web.deployment:war=/demoencuesta06 state=Create mode=Manual requiredState=In
stalled: org.jboss.deployers.spi.DeploymentException: URL file:/D:/jboss-6.1.0.F
inal/server/default/deploy/demoencuesta06.war/ deployment failed
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy
Internal(TomcatDeployment.java:325) [:6.1.0.Final]
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy 
```

我使用 Eclipse Indigo、Jboss、Seam、RichFaces

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:24:21.973

出现此错误是因为您的类路径中没有类文件`com.akson.encuesta.session.helper.LogoutListener`。检查`.jar`项目中的 s 是否有此文件，如果没有，请添加它。

如果这是您项目中自己的类，请尝试在 Eclipse 中重新编译该项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:26:28.613

您需要确保它`com.akson.encuesta.session.helper.LogoutListener`位于应用程序的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:27:29.187

A`ClassNotFoundException`表示给定类的完全限定名称不是有效引用（简而言之：类加载器未找到该类）。您应该检查几件事：

*   你的项目中有这个类吗？
*   完全限定名称是否正确？（确保：*右键单击*>*复制限定名称*）
*   是否正确引用了正确的罐子？
*   构建路径中是否有任何错误？
*   如果您在作为库的 jar 中提供类，它是否正确添加到项目中？
*   如果你把所有东西都打包在一个 EAR 中，这个项目（模块）是它的一部分吗？您是否检查了部署程序集以确保正确加载罐子？是否为 EAR 中的每个模块提供了正确的共享库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:35:06.180

您需要检查部署应用程序的部署目录。检查您的类是否存在于 WEB-INF/classes 中，或者至少存在于 WEB-INF/lib 文件夹中的任何 jar 中。如果您使用 eclipse WTP 插件来部署您的应用程序，您必须检查您的应用程序文件是否正确部署。有时运行时无法与项目输出文件正确同步。

# javascript - ajaxStart() 只调用了一次，但是 ajaxComplete() 调用了多次

> ID：15072669
> 
> 赞同：5
> 
> 时间：2013-02-25T17:22:53.893
> 
> 标签：javascript, jquery

我想对我页面上的每个 AJAX 请求的调用做一些事情。

我在 [这里](http://docs.jquery.com/Ajax_Events)读到

> ## ajaxStart（全局事件）
> 
> 如果启动了 Ajax 请求并且当前没有其他 Ajax 请求正在运行，则广播此事件。

和

> ## ajaxComplete（全局事件）
> 
> 此事件的行为与 complete 事件相同，并且将在每次 Ajax 请求完成时触发。

这意味着我只能跟踪一个 ajax 事件的开始，而不是每个单独的请求？

```
$(document).ajaxStart(function () {
    var t = new Date(),
        h = t.getHours(),
        m = t.getMinutes(),
        s = t.getSeconds(),
        ms = t.getMilliseconds();
    console.log("Triggered ajaxStart handler   at " + h + ":" + m + ":" + s + ":" + ms);
});

$(document).ajaxComplete(function () {
    var t = new Date(),
        h = t.getHours(),
        m = t.getMinutes(),
        s = t.getSeconds(),
        ms = t.getMilliseconds();
    console.log("Triggered ajaxComplete handler at " + h + ":" + m + ":" + s + ":" + ms);
}); 
```

给我

```
Triggered ajaxStart handler    at 11:14:33:409 
Triggered ajaxComplete handler at 11:14:33:480 
Triggered ajaxComplete handler at 11:14:33:489 
Triggered ajaxComplete handler at 11:14:33:491 
Triggered ajaxComplete handler at 11:14:33:492 
Triggered ajaxComplete handler at 11:14:33:535 
Triggered ajaxComplete handler at 11:14:33:539 
Triggered ajaxComplete handler at 11:14:33:567 
Triggered ajaxComplete handler at 11:14:33:569 
```

有什么方法可以记录每个 ajax 启动，以便我可以将偶数附加到每个单个 ajax 事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T17:25:15.990

您需要针对*每个*[`.ajaxSend`](http://api.jquery.com/ajaxSend/)AJAX 请求发送的事件，而不仅仅是第一个未完成的请求。

# ruby-on-rails - Rails 元搜索：检查是否设置了过滤器

> ID：15072671
> 
> 赞同：0
> 
> 时间：2013-02-25T17:23:02.640
> 
> 标签：ruby-on-rails, view, filter, meta-search

是否可以检查是否设置了来自 rails gem 元搜索的搜索对象的过滤器？我的控制器中有这段代码：

```
@search = Tree.search(params[:search]) 
```

我什么时候做@search.search_attributes.empty？如果我从未发送过表格，那我就知道了。但是，如果我发送表格，即使它是空白的，我也会得到错误（这是逻辑）

如果没有过滤器处于活动状态，检查（从视图中）的最佳解决方案是什么？

我希望有人可以帮助我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:20:48.617

您可以使用 present 来检查，而不是空的。

@search.search_attributes.present？

# ffmpeg - 未找到 avcodec 符号

> ID：15072677
> 
> 赞同：1
> 
> 时间：2013-02-25T17:23:17.490
> 
> 标签：ffmpeg, osx-snow-leopard

我正在尝试在 FFMPEG 库中构建示例代码我在我的项目中添加 libavcode.h 、 libavcode.a 并将标题搜索 usr/local/include 和库搜索设置为 usr/local/lib

当我编译示例时，我得到了这个错误......（所有这些都与 avcodec 库有关）

{

```
Undefined symbols:
 "avcodec_find_encoder(CodecID)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  "avcodec_open2(AVCodecContext*, AVCodec*, AVDictionary**)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_decode_example(char const*, char const*)in main.o
  "av_init_packet(AVPacket*)", referenced from:
  video_decode_example(char const*, char const*)in main.o
  "av_free(void*)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_encode_example(char const*, CodecID)in main.o
  video_encode_example(char const*, CodecID)in main.o
  video_decode_example(char const*, char const*)in main.o
  video_decode_example(char const*, char const*)in main.o
  "avcodec_alloc_context3(AVCodec*)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_decode_example(char const*, char const*)in main.o
  "av_opt_set(void*, char const*, char const*, int)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  "av_image_alloc(unsigned char**, int*, int, int, PixelFormat, int)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  "avcodec_encode_video(AVCodecContext*, unsigned char*, int, AVFrame const*)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_encode_example(char const*, CodecID)in main.o
  "avcodec_register_all()", referenced from:
  _main in main.o
  "avcodec_find_decoder(CodecID)", referenced from:
  video_decode_example(char const*, char const*)in main.o
  "avcodec_decode_video2(AVCodecContext*, AVFrame*, int*, AVPacket const*)", referenced from:
  video_decode_example(char const*, char const*)in main.o
  video_decode_example(char const*, char const*)in main.o
  "avcodec_close(AVCodecContext*)", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_decode_example(char const*, char const*)in main.o
  "avcodec_alloc_frame()", referenced from:
  video_encode_example(char const*, CodecID)in main.o
  video_decode_example(char const*, char const*)in main.o
 ld: symbol(s) not found
 collect2: ld returned 1 exit status 
```

你知道我为什么会遇到这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T03:20:37.723

解决方案是将其添加到标题中，因为 FFMPEG 是用 C 编写的，我猜

```
extern "C"
{
#ifndef __STDC_CONSTANT_MACROS
#define __STDC_CONSTANT_MACROS
#endif
#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>
#include "avassert.h"
#include "avutil.h"
#include "intreadwrite.h"
#include "mem.h"
 } 
```

# cmd - 执行命令控制台 cmd 时出错

> ID：15072679
> 
> 赞同：0
> 
> 时间：2013-02-25T17:23:41.157
> 
> 标签：cmd

我正在尝试将文件夹从本地资源复制到文件中的外部资源。Cmd 并正在使用以下命令行

//I：是我的外置驱动器（DD）

//C:是本地磁盘

我正在使用带有 Windows Server 2008 的服务器

```
@ echo off
0f Color
ECHO Start Copying Folders.

if exist I:\CapasClientes (
RD /S /Q I:\CapasClientes ROBOCOPY C:\AZ\MM\CapasClientes I:\CapasClientes *. * / E) else (
ROBOCOPY C:\AZ\MM \CapasClientes I:\CapasClientes *. * / E)
ECHO Folder CapasClientes copied correctly ..

pause

Exit 
```

发生的情况是，我已经测试将驱动器（I:) 更改为本地代码可以正常工作，但是当我离开驱动器（I:) 时出现错误，提示它无法识别备份子目录的命令“e”我要复制的文件夹。

PDT == 我在另一台服务器上做了同样的程序，从本地驱动器复制到外面的同一个单元时没有留下任何错误。

感谢您的合作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T06:22:49.937

更简单 ：

```
@echo off
robocopy "C:\AZ\MM\CapasClientes" "I:\CapasClientes" /ZB /COPYALL /MIR
if errorlevel 8 echo FAIL
pause
exit 
```

使用的参数：

*   /ZB ：使用可重启模式；如果访问被拒绝，请使用备份模式。
*   /COPYALL ：复制所有文件信息。
*   /MIR : 镜像目录树。

更多信息请访问[SS64.com](http://ss64.com/nt/robocopy.html)

# asp.net - css活动功能不起作用

> ID：15072680
> 
> 赞同：0
> 
> 时间：2013-02-25T17:23:45.000
> 
> 标签：asp.net, html, css

我有下面的菜单栏，我想在选择页面后将 css 类更改为激活 html 代码。因此，当用户选择查看所述页面时，我想设置已设置的活动类

HTML 代码

```
<div id="main-nav">
    <ul>
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">One</a></li>
        <li><a href="#">Two</a></li>
        <li><a href="#">Three</a></li>
        <li><a href="#">Four</a></li>
    </ul>
    <div class="clear-both">&nbsp;</div>
</div> 
```

CSS 代码

```
#main-nav{
    height:29px;
    float:left;
    background-image:url(../Styles/images/nav-bg.gif);
    background-repeat:repeat-x;
    background-position:top left;
    width:100%;
}

#main-nav ul,
#main-nav li{
    padding:0px;
    margin:0px;
    list-style-type:none;
}

#main-nav ul{
    height:29px;
    line-height:29px;
    background-image:url(../Styles/images/nav-bar.gif);
    background-position:right;
    background-repeat:no-repeat;
    float:left;
    padding:0px 1px 0px 0px;
    margin:0px 0px 0px 10px;
}

#main-nav li{
    height:29px;
    line-height:29px;
    display:inline;
    position:relative;
    float:left;
    width:80px;
    text-align:center;
}

#main-nav li a{
    height:29px;
    width:80px;
    text-align:center;
    float:left;
    background-image:url(../Styles/images/nav-bar.gif);
    background-position:left;
    background-repeat:no-repeat;
}

#main-nav li a:link,
#main-nav li a:visited{
    color:#FFFFFF;
    text-decoration:none;
}

#main-nav li.active a,
#main-nav li a:hover{
    background-image:url(../Styles/images/active.gif);
    background-repeat:no-repeat;
    background-position:left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:29:59.963

制作基于列表的菜单的关键：

1.  不要对列表进行样式设置（除了显示、位置和浮动以及清除边距和填充之外）
2.  使用`display:block`并将所有样式放在`A`-tag 上（这包括您的悬停和活动状态）。

另外，选择`display:inline-block`或`float:left`，不要同时选择。

# mysql - 在 Ado.Net 的两列中加入具有相同值的两行

> ID：15072681
> 
> 赞同：2
> 
> 时间：2013-02-25T17:23:45.780
> 
> 标签：mysql, winforms, ado.net, group-concat

对于这个问题，感谢 Jim [，将两列中具有相同值的两行连接起来。](https://stackoverflow.com/questions/14677081/join-two-rows-which-have-same-value-in-two-column)但是我没有在 windows 窗体应用程序中使用下面的代码，连接没有实现。这是MySQL代码：

```
 SELECT MIN(id),
       fikraNo,
       maddeNo,
       GROUP_CONCAT(icerik ORDER BY id DESC SEPARATOR ' ')
FROM `table`
GROUP BY fikraNo, maddeNo 
```

这是我使用 MySQL 的搜索方法：

```
public static DataTable Results(string table, string columns, string words)
{
    var sb = new StringBuilder();
    //var pm = new SqlParameter();

    sb.Append("SELECT MIN(id) AS minID, name, surname, GROUP_CONCAT(events ORDER BY id ASC SEPARATOR ' ') AS allEvents FROM " + table + " ");
    if (!string.IsNullOrEmpty(words))
    {
        var column = columns.Split('+');
        for (var i = 0; i < column.Length; i++)
        {
            if (i == 0)
            {
                var word = words.Split(',');
                for (var j = 0; j < word.Length; j++)
                {
                    if (j == 0)
                    {
                        // one column, one word...
                        sb.Append("WHERE " + column[i].Trim() + " LIKE '%" + Strip(word[j].Trim()) + "%'");
                        //pm = new SqlParameter("@word", "%" + word[j].Trim() + "%");
                    }
                    else
                    {
                        // one column, more words..
                        sb.Append(" OR " + column[i].Trim() + " LIKE '%" + Strip(word[j].Trim()) + "%'");
                        //pm = new SqlParameter("@word", "%" + word[j].Trim() + "%");
                    }

                }
            }
            else
            {
                var word = words.Split(',');
                for (var j = 0; j < word.Length; j++)
                {
                    if (j == 0)
                    {
                        // more columns, one word...
                        sb.Append(" OR " + column[i].Trim() + " LIKE '%" + Strip(word[j].Trim()) + "%'");
                        //pm = new SqlParameter("@word", "%" + word[j].Trim() + "%");
                    }
                    else
                    {
                        // more columns, more words...
                        sb.Append(" OR " + column[i].Trim() + " LIKE '%" + Strip(word[j].Trim()) + "%'");
                        //pm = new SqlParameter("@word", "%" + word[j].Trim() + "%");
                    }

                }
            }
        }
    }
    sb.Append(" GROUP BY name, surname");

    var dt = SetDataset(CommandType.Text, sb.ToString(), null).Tables[0];
    return dt;
} 
```

但是，不幸的是我的方法只带来了第一行。你能帮我吗，我该如何管理它？国王问候。

# ruby-on-rails - HAML 中的 if-else (ruby on rails)

> ID：15072695
> 
> 赞同：0
> 
> 时间：2013-02-25T17:24:30.143
> 
> 标签：ruby-on-rails, paperclip

如果“用户”没有头像，我正在尝试使用 if-else 呈现一些默认图像（作为用户的头像）。（这是为了避免令人沮丧的missing.png图像）。但到目前为止它还没有工作。

这是我的观点（view.html.haml 文件）：

```
...
.user_avatar
 -img_path = defined?(@user.avatar.url) ? "@{user.avatar.default_url}" : "@user.avatar.url"
 %img{:src => img_path}
... 
```

这是我的模型：

```
...
attr_accessible :name, :avatar

has_attached_file :avatar :default_url => "assets/images/default_icon.png"
... 
```

请注意，如果我`@user.avatar.icon.url`在`img`标签中使用，它将起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:26:48.570

问题是您只是生成一个字符串，而不是评估代码。当你这样做时：

```
"@{user.avatar.default_url}" 
```

你得到的正是那个字符串。你可能打算做的是：

```
@user.avatar.default_url 
```

不是作为字符串。通过这种方式，它实际上得到了评估。同样的事情也适用`"@user.avatar.url"`。

**编辑**

改变：

```
-img_path = defined?(@user.avatar.url) ? @user.avatar.default_url : @user.avatar.url 
```

到：

```
-img_path = defined?(@user.avatar.url) ? @user.avatar.url : @user.avatar.default_url 
```

换句话说，如果用户有定义的头像 URL，则使用它，*否则*使用默认 URL。

另外，考虑将其放入用户的方法中，例如`User#avatar_url`，它可以自己执行此`if/else`逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:45:10.227

我想你追求的是：

```
.user_avatar
 -img_path = defined?(@user.avatar.url) ? @user.avatar.url : @user.avatar.default_url
 %img{:src => img_path} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:45:53.223

首先，请检查您的默认图片的 url 是否正确，如果图片在`app/assets/images`文件夹中，`default_icon.png`则作为 url 就足够了。

其次，不要手动编写`%img`标签，而是考虑使用帮助器：

```
= image_tag @user.avatar.url 
```

第三，虽然我现在无法测试它，但我很确定`default_url`在回形针中定义 a 的目的是能够调用`@user.avatar.url`并让它在没有头像的情况下自动返回默认 url。

换句话说：像你的提议那样做有点违背了目的。

我的五分钱是你提供的图片网址是错误的，一旦你有正确的网址，我上面的代码就足够了。

# xpages - NotesViewNavigator 中的回收和 GetNextDocument / GetNextCategory？

> ID：15072703
> 
> 赞同：0
> 
> 时间：2013-02-25T17:24:57.893
> 
> 标签：xpages, xpages-ssjs

如何在 NotesViewNavigator 中回收 GetNextDocument 或 GetNextCategory？两者都没有参数，因此您不能像在视图中那样使用使用临时变量的传统方法来预先获取下一个文档。

我想解决方案是只使用带有 argmenumnt 的 getNext，但 GetNextDocument / GetNextCategory 仍然可以使用吗？

我得到的错误在第 20 行。没有回收，代码运行良好。据我了解，回收会破坏对象，因此我可以理解错误的原因。我的问题是是否有其他方法可以解决这个问题？

[TypeError] 调用方法 NotesViewNavigator.getNextDocument() 发生异常，第 20 行发生 null

```
 1: var viewName = "vwParticipantsProjectIDEquipmentIDUsername";  
 2: 
 3: 
 4: var v:NotesView = database.getView(viewName);
 5: var nav:NotesViewNavigator = v.createViewNavFromCategory(sessionScope.get("ExportProjectID"));
 6: 
 7: 
 8: var viewEnt:NotesViewEntry = nav.getFirstDocument();
 9: 
 10: while (viewEnt != null)
 11: {  
 12: 
 13:    if (viewEnt.isDocument())
 14:    {
 15:        
 16:        var doc:NotesDocument = viewEnt.getDocument();
 17:    }       
 18: 
 19:    viewEnt.recycle();
 20:    viewEnt = nav.getNextDocument();
 21: } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:25:51.500

这是我倾向于使用的模式：

```
var documentEntry = nav.getFirstDocument();
while( documentEntry != null ){
  var nextDocumentEntry = nav.getNextDocument();
  // do stuff
  documentEntry.recycle();
  documentEntry = nextDocumentEntry;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:14:02.410

你为什么不尝试像这样应用旧模式：

```
var viewName = "vwParticipantsProjectIDEquipmentIDUsername",
    v:NotesView = database.getView(viewName),
    nav:NotesViewNavigator = v.createViewNavFromCategory(sessionScope.get("ExportProjectID")),
    viewEnt:NotesViewEntry = nav.getFirstDocument(),
    tmp:NotesViewEntry;
while (viewEnt !== null)
{  
    if (viewEnt.isDocument())
    {
        var doc:NotesDocument = viewEnt.getDocument();
    }
    tmp = viewEnt;
    viewEnt = nav.getNextDocument();
    tmp.recycle();
} 
```

我没有测试它，但我想这有效......

# api - 如何检测用户是否在 Yahoo Messenger 上不可见

> ID：15072705
> 
> 赞同：1
> 
> 时间：2013-02-25T17:25:01.963
> 
> 标签：api, yahoo-messenger

有一些现有的在线服务（比如[这个](http://detectinvisible.com/)），你可以在其中输入一个雅虎用户，它会告诉你用户是在线、隐形还是离线。

有没有办法我可以做到这一点？（使用一些雅虎 API？或使用一些技巧？）

**注意：**编程语言并不重要。它可以是 Python、C# 等。

# ruby-on-rails - Ruby on Rails，无法让 cancan 工作

> ID：15072706
> 
> 赞同：1
> 
> 时间：2013-02-25T17:25:04.993
> 
> 标签：ruby-on-rails, cancan

我一直在努力让康康舞一整天都在工作。我已经使用不同的教程重新开始了几次，但我不断收到相同的错误。

这很简单，我有一个用户帐户（使用 Devise 创建），它可以有一个角色，管理员或用户。这是能力等级：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    if user.role? :admin
      can :manage, :all
    end
  end
end 
```

在配置文件控制器中，我有一行`load_and_authorize_resource`，用户包含的类`ROLES = %w[admin user]`。要去`http://localhost:3000/profiles/`给我错误

`wrong number of arguments (2 for 1)`在`app/models/ability.rb:6:in`初始化'`

使用替代方法`user.admin?`给出

```
undefined method `admin?' for #<User:0x5b34c10> 
```

谷歌搜索上面的错误会得到很多结果，所以我不是唯一遇到这个问题的人，但没有一个解决方案对我有用。

是的，我已将角色列添加到用户表

```
class AddRoleToUsers < ActiveRecord::Migration
  def change
    add_column :users, :role, :string
  end
end 
```

添加 Gem，运行 bundle install 并重新启动服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:19:56.300

如果你有以下这应该工作：

**能力.rb**

```
class Ability
  include CanCan::Ability
  def initialize(user)
    user ||= User.new # guest user
   # raise user.role?(:administrator).inspect
    if user.role? :administrator

      can :manage, :all
      can :manage, User

    elsif user.role? :user
      can :read, :all

    end

  end
end 
```

**角色用户.rb**

```
class RoleUser < ActiveRecord::Base
  # attr_accessible :title, :body
  belongs_to :user
  belongs_to :role

end 
```

**角色**

```
class Role < ActiveRecord::Base
  attr_accessible :name

  has_and_belongs_to_many :users
end 
```

**用户.rb**

```
 class User < ActiveRecord::Base

 has_and_belongs_to_many :roles

  def role?(role)
    self.roles.find_by_name(role.to_s.camelize)
  end 
```

在定义角色、查找角色、将角色转换为字符串并将其骆驼化时，您需要这个。

**种子.rb**

```
%w(Employee Administrator).each { |role| Role.create!(:name => role)} 
```

创建一个数组`User`和`Administrator`.

如果您正确遵循这些步骤，您应该可以正常工作。并确保您具有以下迁移：

```
class UsersHaveAndBelongsToManyRoles < ActiveRecord::Migration
  def self.up
    create_table :roles_users, :id => false do |t|
      t.references :role, :user
    end
  end

  def self.down
    drop_table :roles_users
  end
end 
```

然后在您看来，您应该`can?`通过执行类似的操作来使用

```
<% if can? :manage, User %> 
  .......
    ....
  ...
<% end %> 
```

# assembly - 寻找将 ASM 指令显示为二进制代码的程序

> ID：15072711
> 
> 赞同：1
> 
> 时间：2013-02-25T17:25:17.987
> 
> 标签：assembly, opcode

我正在寻找可以**快速方便地**向我展示（英特尔）汇编指令的十六进制等效项的程序（首选 Linux/FOSS）或网站

例如我输入：

```
test al, al 
```

它输出

```
84 c0 
```

用 C 编写内联汇编并检查它编译成的内容并*没有*那么快速和方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:35:49.140

为此，我总是使用 as from binutils 。例如：

```
$ echo -e "MOV DWORD PTR [RSP+4], 0x12345678" | as -o /dev/null -64 -al -msyntax=intel -mnaked-reg
GAS LISTING             page 1

   1 0000 C7442404  MOV DWORD PTR [RSP+4],0x12345678
   1      78563412 

$ echo -e "push eax" | as -o /dev/null -32 -al -msyntax=intel -mnaked-reg
GAS LISTING             page 1

   1 0000 50        push eax 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:29:46.807

您可以将 NASM 与 NDISASM 结合使用，例如：

`test.asm`这是带有您的指令的程序集文件（例如，命名为）：

```
bits 32
test al, al 
```

你组装它：

```
nasm -f bin test.asm -o test.bin 
```

然后你拆开它：

```
ndisasm -b 32 test.bin 
```

这就是你得到的：

```
00000000  84C0              test al,al 
```

**另一种方法**是在组装时生成列表文件：

```
nasm -f bin test.asm -o test.bin -l test.lst 
```

这就是你得到的`test.lst`：

```
 1                                  bits 32
 2 00000000 84C0                    test al, al 
```

# javascript - 如何使用带有 sloth.js 的 javascript 生成器？

> ID：15072715
> 
> 赞同：1
> 
> 时间：2013-02-25T17:25:23.633
> 
> 标签：javascript

这个问题需要了解位于此处的 javascript**树懒库：** [https ://github.com/rfw/sloth.js](https://github.com/rfw/sloth.js)

如果我有这个 javascript 生成器。

```
function fibonacci(){
  var fn1 = 1;
  var fn2 = 1;

  while (1){
    var current = fn2;
    fn2 = fn1;
    fn1 = fn1 + current;
    yield current;
  }
} 
```

使用树懒库，我可以将其变成适合与树懒库一起使用的迭代器。

```
var iter = sloth.iterNextable(fibonacci()); 
```

上述 URL 中的树懒文档展示了使用 take() 函数从树懒友好的迭代器中获取 n 个元素的示例：

```
sloth.ify([1, 2, 3]).take(2).force();
[ 1, 2 ] 
```

问题：如何从我的 fibonacci() 生成器到一个我可以调用 take() 的树懒对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:56:57.630

解决了。我发布问题的原因是这个

```
sloth.ify(iter).take(5) 
```

回来

```
[object Object] 
```

所以我以为我做错了什么。该对象是需要评估的惰性对象。这就是 force() 的用武之地：

```
sloth.ify(iter).take(5).force() 
```

返回

```
1,1,2,3,5 
```

# ember.js - 我应该如何遍历 emberjs 中的数组并更新路由以反映更改？

> ID：15072718
> 
> 赞同：1
> 
> 时间：2013-02-25T17:25:28.657
> 
> 标签：ember.js

我正在尝试使用下一个/上一个按钮制作图像幻灯片，但我不明白我应该如何让它一起工作。有人可以帮我把碎片粘起来吗？

这是数据的样子：

```
{
  "newsitems": [
    {
      "id": "1",
      "title": "Amai het wordt bangelijk!",
      "mediaitems": [
        {
          "id": "AEOpX8tmiUI",
          "newsitem_id": "1",
          "value": "AEOpX8tmiUI"
        },
        {
          "id": "kxopViU98Xo",
          "newsitem_id": "1",
          "value": "kxopViU98Xo"
        },
        {
          "id": "1",
          "newsitem_id": "1",
          "value": "1276468632.JPG"
        },
        {
          "id": "3",
          "newsitem_id": "1",
          "value": "1278286227.jpg"
        }
      ]
    }
  ]
} 
```

我想让用户迭代 mediaitems 数组。因此，当用户输入路线时：

```
http://domain.com/#!/newsitems/1/overlay/kxopViU98Xo 
```

该项目应该位于屏幕的中心，并且下一个/上一个按钮应该将用户带到数组中的下一个或上一个项目。

这就是我的路线的样子：

```
App.MediaitemRoute = Ember.Route.extend({
  model: function(params) {
    return App.Mediaitem.find(params.mediaitem_id);
  },

  setupController: function(controller, model) {
    this.controllerFor('overlay').set('content', model);
  },

  renderTemplate: function(controller, model) {
    this.render('overlay', { into: 'application', outlet: 'overlay', controller: 'overlay'});
  }
}); 
```

这是叠加层的 ObjectController：

```
App.OverlayController = Ember.ObjectController.extend({
  prev: function(){
    var mediaitems = this.get('model').get('newsitem.mediaitems');
    var currentMediaItemID = this.get('model').get('id');

    var currentIndex = 0;
    var i = 0;

    mediaitems.forEach(function(object){
      if(object.get('id') == currentMediaItemID) currentIndex = i;
      i++;
    });

    // How should I transition to the next object?
  }
}); 
```

该路由呈现一个名为“overlay”的模板，该模板有两个操作：“prev”和“next”（我只在控制器中显示 prev 以保持整洁）。

我的两个担忧是：在数组中查找当前项的代码（以及获取下一个或上一个对象的代码）只是感觉“错误”或过于“复杂”。

我不知道如何更新路线并重定向到下一个/上一个项目。

一些更有用的东西：

车把模板：

```
<script type="text/x-handlebars" data-template-name="overlay">
  <div class="overlay">
    <a {{action "prev" target="controller"}}>PREV</a>
    <a {{action "next" target="controller"}}>NEXT</a>
  </div>
</script> 
```

我的模型：

```
App.Newsitem = DS.Model.extend({
  title: DS.attr('string'),

  mediaitems: DS.hasMany('App.Mediaitem')
});

App.Mediaitem = DS.Model.extend({
  value: DS.attr('string'),

  newsitem: DS.belongsTo('App.Newsitem')
}); 
```

我的路线：

```
App.Router.map(function(){
  this.resource('newsitems', function(){
    this.resource('newsitem', {path:':newsitem_id'}, function(){
      this.resource('mediaitem', {path:'/overlay/:mediaitem_id'});
    });
  });
}); 
```

# random - 简单的真正随机数生成器

> ID：15072723
> 
> 赞同：0
> 
> 时间：2013-02-25T17:25:39.687
> 
> 标签：random, von-neumann

有很多关于生成“真正的”随机数的研究正在进行中。

有一种很简单的方法，很久以前就发明了。该方法归功于冯诺依曼[[1]](http://www.drdobbs.com/parallel/algorithm-alley-unbiasing-random-bits/184405028)。

在最简单的形式中，它可以被认为是从 0 或 1 的偏置源中生成随机位。鉴于序列 01 的概率与 10 相同，可以使用 01 - 将真正随机的“0”和 10 表示为真正随机的“1”位（简单地丢弃 00 和 11 的组合）。

很简单。谁能指出为什么这种方法不会生成随机序列（从而解决了在计算机上生成随机数的问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-18T07:34:48.920

让我解释一下“随机”和“真正随机”的含义。“随机”仅仅意味着数字是*相同分布*的，并且*独立*于其他所有事物（即数字是独立同分布的）选择。而“真正随机”仅仅意味着 iid 和统一（另见 Frauchiger 等人 2013。）

如果输入位的来源是独立同分布但有偏差，那么冯诺依曼方法将消除这种偏差——数字保持独立同分布，但现在无偏差，即每个数字将以相等的概率为 0 或 1。一般来说，如果源数字不是 iid（更具体地说，是*可交换*的 [Peres 1992]），von Neumann 方法不会使这些数字“真正随机”；甚至 von Neumann (1951) 也假设“连续抛硬币是独立的”。von Neumann 方法是众多可用的随机提取器之一（我讨论[了其中的一些](https://peteroupc.github.io/randextract.html)），这个讨论与 von Neumann 方法一样适用于这些其他提取器。

无论如何，“伪随机”和“真正随机”数字之间的区别并不是应用程序所关心的（而且您并没有真正指定您所考虑的应用程序类型）。相反，一般来说：

*   安全应用程序关心数字是否难以猜测；在这种情况下，只有加密的 RNG 才能实现这一要求（即使是依赖于伪随机数生成器的 RNG）。Python 示例是`secrets`模块或`random.SystemRandom`.
*   科学模拟关心这些数字是否表现得像独立的均匀随机数，并且经常关心这些数字在以后是否可重现。Python 示例是`numpy.random.Generator`.

参考：

*   Frauchiger, D.、Renner, R.、Troyer, M.，“真实量子设备的真实随机性”，2013 年。
*   von Neumann, J.，“与随机数字相关的各种技术”，1951 年。
*   Peres, Y.，“[迭代 von Neumann 提取随机位的过程](https://projecteuclid.org/euclid.aos/1176348543)”，统计年鉴 1992,20,1, p。590-597。

# javascript - Javascript中的数组到字符串的转换

> ID：15072727
> 
> 赞同：0
> 
> 时间：2013-02-25T17:25:48.423
> 
> 标签：javascript, arrays, string

附件是有问题的代码。

```
var http = require("http");
var i = 0;

var hostNames = ['www.1800autoland.com','www.youtube.com','www.1800contacts.com'];

for(i;i<hostNames.length;i++){
    var options = {
        host: hostNames[i],
        path: '/'
    };
    http.get(options, function(res){
        console.log("url: " + hostNames[i]);
        console.log("status: " + res.statusCode);

        for(var item in res.headers){
            if(item == "server"){
                console.log(item + ": " + res.headers[item]);
            }
            if(item == "x-powered-by"){
                console.log(item + ": " + res.headers[item]);
            }
            if(item == "x-aspnet-version"){
                console.log(item + ": " + res.headers[item]);
            }
        }
        console.log("\n");
    })
}; 
```

我有一个 URL 数组，我来咨询该站点的问题是，在我的代码中，hostNames[i] 没有将第 n 个（或在这种情况下为“i”）索引显示为字符串。控制台中的输出总是“未定义”。我尝试过 String()、toString() 和许多不同的方法，但均无济于事。有人能指出我正确的方向吗？我需要做什么转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:30:11.197

这是由于异步而发生的典型**闭包问题。**当您的回调触发时， 的值`i`将始终为`hostNames.length`.

要在 的值*附近*修复它`i`：

```
http.get(options, (function(res) { // '(' before function is optional, I use it to indicate immediate invocation
    return function (i) {   // this is the closed value for i
        console.log("url: " + hostNames[i]);
        console.log("status: " + res.statusCode);
        // .. etc
    };
}(i))); // immediate invocation with i 
```

意识到使用这样的闭包的重要一点是，您正在创建许多匿名函数，而不仅仅是一个。每个函数都绑定到它自己的值`i`。

* * *

避免编写这些奇怪代码的最简单方法是不`for`直接使用循环，而是使用`map`函数。像：

```
function array_map(array, callback) {
    var i, len = array.length;
    for (i = 0; i < len; i += 1) {
        callback(i, array[i]);
    }
} 
```

这使得您可以自动关闭 的值`i`。您的循环将如下所示：

```
array_map(hostNames, function(i, hostname) { // i and hostname have the closed value
    // .. etc
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:35:32.050

这是[关闭](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)问题，试试这个：

```
(function (i) {
http.get(options, function(res){
    console.log("url: " + hostNames[i]);
    console.log("status: " + res.statusCode);

    for(var item in res.headers){
        if(item == "server"){
            console.log(item + ": " + res.headers[item]);
        }
        if(item == "x-powered-by"){
            console.log(item + ": " + res.headers[item]);
        }
        if(item == "x-aspnet-version"){
            console.log(item + ": " + res.headers[item]);
        }
    }
    console.log("\n");
})
})(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:26:56.603

您应该使用 .get(i) 方法来检索项目。正如其他人所说，您不需要初始化数组中的计数器。

# apache - 将 Apache 锁定到 localhost

> ID：15072734
> 
> 赞同：4
> 
> 时间：2013-02-25T17:26:03.797
> 
> 标签：apache

最近从 Win XP (x86) 迁移到 Win 7 (x64)，我还不得不重新安装 Apache。我已经安装了 64 位版本的 Apache (2.4.3) 和 PHP (2.4)。

我将它安装到 c:\Apache24。

我已经启动并运行它，但现在我需要将它锁定到我的本地 PC 上。

如果我有：

```
<Directory "c:/Apache24/htdocs">
Options Indexes FollowSymLinks

AllowOverride None

Order allow,deny
Allow from all
# New directive needed in Apache 2.4.3 apparently: 
Require all granted
</Directory> 
```

这很好用，但是如果我将其更改为：

```
<Directory "c:/Apache24/htdocs">
Options Indexes FollowSymLinks

AllowOverride None

Order allow,deny
Allow from 127.0.0.1
# New directive needed in Apache 2.4.3 apparently: 
Require all granted
</Directory> 
```

（或“本地主机允许”或“192.xyz 允许”）

我收到拒绝访问错误。我怎样才能绕过这个？

一切都是使用我的登录名安装的，它具有完全的本地管理员权限。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-10-24T21:22:21.977

代替

```
Order allow,deny
Allow from all
Require all granted 
```

只是

```
Require local 
```

更多：[http ://httpd.apache.org/docs/2.4/en/mod/mod_authz_host.html](http://httpd.apache.org/docs/2.4/en/mod/mod_authz_host.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-01T04:43:31.747

一种方法是[添加`Listen`到 httpd.conf](https://serverfault.com/a/276968/314731)：

```
Listen 127.0.0.1:80 
```

`Listen`如果有其他指令，请记住删除其他指令。

请注意，这将锁定整个服务器，因此它只响应来自 localhost 的请求。如果您需要逐个目录微调权限，请使用以下`<Directory>`语法：

```
<Directory /var/www/secure>
    Require local
</Directory> 
```

以上适用于 Apache 2.4，其中[`Order`、`Allow`和`Deny`已弃用](https://httpd.apache.org/docs/2.4/howto/access.html)。

# sql - 在 SQL Server 中舍入数字时出错

> ID：15072735
> 
> 赞同：0
> 
> 时间：2013-02-25T17:26:17.220
> 
> 标签：sql, sql-server, tsql

我正在使用 SQL Server 2008 R2 和 SQL Server 2012 尝试以下操作，并且在两者中都得到了相同的结果。

如果我写以下语句：

```
select round(4.005, 2) 
```

我得到了预期的结果：4.01

但是，如果我写以下语句：

```
declare @result float
select @result = 4.005
select round(@result, 2) 
```

我得到了一个意想不到的结果：4

但是，如果我在前面的语句中将**float**替换为**real ：**

```
declare @result real
select @result = 4.005
select round(@result, 2) 
```

我得到了预期的结果。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:29:59.030

因为您没有指定用于以科学计数法存储浮点数尾数的位数，请试试这个，

```
declare @result float(5)
select @result = 4.005
select round(@result, 2) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!6/d41d8/2823)
*   [浮点数和实数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173773.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:10:36.660

这与 float 是一种近似数据类型有关。

见：[http ://technet.microsoft.com/en-us/library/ms187912(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms187912(v=sql.105).aspx)

> 浮点数和实数数据类型称为近似数据类型。float 和 real 的行为遵循关于近似数值数据类型的 IEEE 754 规范。近似数字数据类型不存储为许多数字指定的确切值；它们存储的值非常接近。对于许多应用程序，指定值和存储的近似值之间的微小差异并不明显。但有时，差异会变得很明显。由于浮点数和实数数据类型的近似性质，**当需要精确的数值行为时，不要使用这些数据类型，例如在金融应用程序中、在涉及舍入的操作中或在相等性检查中。**相反，请使用整数、小数、货币或 smallmoney 数据类型。避免在 WHERE 子句搜索条件中使用浮点或实列，尤其是 = 和 <> 运算符。最好将浮点数和实数列限制为 > 或 < 比较。
> 
> IEEE 754 规范提供了四种舍入模式：四舍五入、向上舍入、向下舍入和舍入为零。Microsoft SQL Server 使用四舍五入。所有都准确到保证的精度，但可能导致浮点值略有不同。**因为浮点数的二进制表示可能使用许多合法的舍入方案之一，所以不可能可靠地量化浮点值。**

# python - 在 Python、OpenCV 中使用切片从图像中提取区域

> ID：15072736
> 
> 赞同：61
> 
> 时间：2013-02-25T17:26:20.953
> 
> 标签：python, opencv, image-processing

我有一张图片，我想从中提取一个区域。我有这个区域的左上角和右下角的坐标。在灰度中，我这样做：

```
I = cv2.imread("lena.png")
I = cv2.cvtColor(I, cv2.COLOR_RGB2GRAY)
region = I[248:280,245:288]
tools.show_1_image_pylab(region) 
```

我无法弄清楚如何在颜色上做到这一点。我想提取每个通道R，G，B；从每个通道中切出该区域并将它们重新合并在一起，但必须有更短的方法。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-02-25T19:21:15.583

OpenCV 和 Matplotlib 中的像素排序略有不同。

OpenCV 遵循 BGR 顺序，而 matplotlib 可能遵循 RGB 顺序。

因此，当您使用 pylab 函数显示在 OpenCV 中加载的图像时，您可能需要将其转换为 RGB 模式。（我不确定是否有任何简单的方法）。下面的方法演示它：

```
import cv2
import numpy as np
import matplotlib.pyplot as plt

img = cv2.imread('messi4.jpg')
b,g,r = cv2.split(img)
img2 = cv2.merge([r,g,b])
plt.subplot(121);plt.imshow(img) # expects distorted color
plt.subplot(122);plt.imshow(img2) # expect true color
plt.show()

cv2.imshow('bgr image',img) # expects true color
cv2.imshow('rgb image',img2) # expects distorted color
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

**注意：请查看下面@Amro 的评论以获得更好的 BGR 和 RGB 之间的转换方法。`img2 = img[:,:,::-1]`. 非常简单。**

运行此代码并自己查看结果的差异。以下是我得到的：

**使用 Matplotlib：**

![在此处输入图像描述](../Images/157de4f400d8e422d2fac0d4f874979c.png)

**使用 OpenCV：**

![在此处输入图像描述](../Images/7876539b238713e07eb3520d2dca0a48.png)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-03-01T22:46:46.153

还有2个未提及的选项：

```
img[..., ::-1] # same as the mentioned img[:, :, ::-1] but slightly shorter 
```

和多才多艺的

```
cv2.cvtColor(img, cv2.COLOR_BGR2RGB) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-26T17:34:27.660

最好的方法是使用：-
`img2 = cv2.cvtColor(img , cv2.COLOR_BGR2RGB)`

这会将 BGR 'img' 数组转换为 RGB 'img2' 数组。现在您可以将 img2 数组用于 matplotlib 的 imshow() 函数。

参考链接：- [cvtColor](https://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)

# cuda - 使用 CUDA 求解 Ax=b，适用于小于 128x128 的矩阵大小

> ID：15072737
> 
> 赞同：0
> 
> 时间：2013-02-25T17:26:22.153
> 
> 标签：cuda, linear-algebra

我编写了一个使用 GPU 进行正向求解的代码（从 A = LU 获取 U 矩阵，其中 U 的对角线条目未设置为单位）。我的代码适用于尺寸小于 128x128 的矩阵，这是块大小的一个因素，即 16。我很困惑为什么更大的矩阵会给我错误的结果。最后一行块出现问题。

------------ gaussian.h --------

```
// Thread block size
#define BLOCK_SIZE 16   //for forward solve A = LU
#define BLOCK_SIZE2 32  //for finding the pivot factor
// A[i,j] = A[i,j] - A[k,j] / A[k,k] * A[i,k]
// pivot factor = A[k,j] / A[k,k] 
```

///////////////////////////////////////// /////////////////////////////////

------------ gaussian.cu --------

```
// includes, system
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <sys/time.h>
#include <cuda.h>
#include "gaussian_kernel.cu"

#define OUTPUT

void runTest(int argc, char** argv);

double gettime() {
    struct timeval t;
    gettimeofday(&t,NULL);
    return t.tv_sec+t.tv_usec*1e-6;
}

int main(int argc, char** argv)
{
    runTest(argc, argv);
}

void runTest(int argc, char** argv)
{
    int dim;

    if (argc == 2)
    {
        dim = atoi(argv[1]);
    }
    else{
        printf("Wrong Usage\n");
        exit(1);
    }

    // Note: A is a square matrix of size NxN where N % BLOCK_SIZE = 0
    //       Every row of A has a pivot column
    //       It is known that all the arithmetic operations involved for 
    //       Gaussian Elimination are of type int (not float)

    // allocate host memory for matrix A augmented with vector b (Ax=b)
    unsigned int size_A = dim * (dim + BLOCK_SIZE);  
    unsigned int mem_size_A = sizeof(int) * size_A;
    int* h_A = (int*) malloc(mem_size_A);

    // initialize host memory, generate a test case such as below
    // augmented matrix A with padding to make the size evenly divisible by BLOCK_SIZE
    //   ----A----- | b --padding--
    //   1 1 1 1 .. | 0 * * * ..
    //   1 2 2 2 .. | 1 * * * ..
    //   1 2 3 3 .. | 2 * * * ..
    //   1 2 3 4 .. | 3 * * * ..
    //   .......... | ...
    // * means uninitialized entry

    // A is size NxN
    // Augmented matrix with padding is size Nx(N+BLOCK_SIZE)
    int dimRow = dim;  
    int dimCol = dim + BLOCK_SIZE; 

    for(int i = 0; i < dim; i++)
    {       
        h_A[(i + 1) * dimCol - BLOCK_SIZE] = i;  // b vector stored in (N+1)th column 
        // of augmented matrix
        for (int j = 0; j < dimRow - i; j++)
        {
            h_A[j + i + i * dimCol] = i + 1;            // A[i][j] entry
            h_A[j * dimCol + i + i * dimCol] = i + 1;   // A[j][i] entry
        }
    }

    //display the test case  [ A | b ]
    for ( int m = 0 ; m < dimRow; m++)
    {
        for ( int n = 0 ; n <= dimRow; n++)
            //for ( int n = 0 ; n < dimCol; n++)
        {
            printf("%d ", h_A[m * dimCol + n]);
        }
        printf("\n");
    }

    // allocate device memory for the augmented matrix A
    int* d_A;
    cudaMalloc(&d_A, mem_size_A);

    // start timer
    double timer1 = gettime();

    // copy host memory to device
    cudaMemcpy(d_A, h_A, mem_size_A, cudaMemcpyHostToDevice);

    // setup execution parameters for obtaining the pivot factor
    int gridP = (dimRow / BLOCK_SIZE2) + ( (dimRow % BLOCK_SIZE2) == 0 ? 0 : 1 ); 
    // add 1 if dimRow/BLOCK_SIZE2 is not evenly divisible

    // setup execution parameters for the forward solve (Gaussian Elimination)
    dim3 threads(BLOCK_SIZE, BLOCK_SIZE);
    dim3 grid(dimCol / threads.x, dimRow / threads.y);

    // execute the kernel
    for ( int i = 0 ; i < dim; i++)
    {
        Gaussian_Pivot_CUDA<<< gridP, BLOCK_SIZE2 >>>(d_A, dimCol, i);
        Gaussian_Elim_CUDA<<< grid, threads >>>(d_A, dimCol, i);
    }

    // copy result from device to host
    cudaMemcpy(h_A, d_A, mem_size_A, cudaMemcpyDeviceToHost);

    // stop timer
    double timer2 = gettime();
    printf("GPU time = %lf\n",(timer2-timer1)*1000);

    // Back substitution 
    int X[dimRow];
    for (int row = dimRow - 1; row >= 0; row--) 
    {
        X[row] = h_A[(row + 1) * dimCol - BLOCK_SIZE];  // b[row] entry
        for (int col = dimRow - 1; col > row; col--) 
        {
            X[row] -= h_A[row * dimCol + col] * X[col];
        }
        X[row] /= h_A[row * dimCol + row];
        printf("X[%d] = %d\t",row,X[row]);
    }
    printf("\n");

#ifdef OUTPUT

    // result of Gaussian Elimination 
    //   ----A----- | b --padding--
    //   1 1 1 1 .. | 0 * * * ..
    //   0 1 1 1 .. | 1 * * * ..
    //   0 0 1 1 .. | 1 * * * ..
    //   0 0 0 1 .. | 1 * * * ..
    //   .......... | ...
    // * means garbage entry 
    for ( int m = 0 ; m < dimRow; m++)
    {
        for ( int n = 0 ; n <= dimRow; n++)
        {
            printf("%d ", h_A[m * dimCol + n]);
        }
        printf("\n");
    }

#endif

    free(h_A);
    cudaFree(d_A);
} 
```

///////////////////////////////////////// /////////////////////////

------------ gaussian_kernel.cu --------

```
#include "gaussian.h"

__global__ 
void Gaussian_Pivot_CUDA(int* A, int widthA, int Pcol)
{
    // find the pivot factor 
    // A[i,j] = A[i,j] - A[k,j] / A[k,k] * A[i,k]
    // pivot factor = A[k,j] / A[k,k]

    int bx = blockIdx.x;
    int tx = threadIdx.x;

    int index_row = BLOCK_SIZE2 * bx + tx;
    int index_rowA = index_row * widthA;

    __shared__ int A_RowRow; 
    if (tx == 0)
    {
        A_RowRow = A[Pcol * widthA + Pcol];  // get A[k,k] where k is the pivot column
        // for this problem pivot column = pivot row
    }       
    __syncthreads();

    A[index_rowA - 1] = A[index_rowA + Pcol] / A_RowRow;  
    // INVALID WRITE HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    // store pivot factor at A[dimCol - 1][row]
}

__global__
void Gaussian_Elim_CUDA(int* A, int widthA, int Pcol)
{
    // Block index
    int bx = blockIdx.x;
    int by = blockIdx.y;

    // Thread index
    int tx = threadIdx.x;
    int ty = threadIdx.y;

    int index_col = BLOCK_SIZE * bx + tx;
    int index_row = BLOCK_SIZE * by + ty;

    int index = widthA * index_row + index_col; 
    //  d_A[index] "=" d_A[index_row][index_col]

    // store pivot factor for rows that we are working on in this block 
    __shared__ int pivotFactor[BLOCK_SIZE];

    if ( ty == 0 ) // use ty instead of tx for coalesced accesses
    {
        pivotFactor[tx] = A[(index_row + tx) * widthA - 1];  
        // INVALID WRITE HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    }
    __syncthreads();

    // implement the gaussian elimination for the current row
    if ( index_row > Pcol ) 
    {
        A[index] -= A[Pcol * widthA + index_col] * pivotFactor[ty];
        // A[i,j] = A[i,j] - A[k,j] / A[k,k] * A[i,k]
        // pivot factor = A[k,j] / A[k,k]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:28:09.330

`cuda-memcheck`告诉我，我正在阅读和写作超出范围的东西。

我的索引关闭了。在`Gaussian_Pivot_CUDA`中，最后一行应该是`A[widthA*(index_row+1)-1)]=...`

在`Gaussian_Elim_CUDA`，写作时，`pivotFactor`我必须更改`ty`为`tx`并阅读`A[widthA*(index_row+1)-1)]`。

谢谢@尤金！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:58:31.217

如果`sizeof(int)==2`，则当 dim 为 128 时，此数组索引将溢出：

```
h_A[j * dimCol + i + i * dimCol] = i + 1;   // A[j][i] entry 
```

(127*144)+127+(127*144) = 36703 > 32767。

# cakephp - 缺少数据源

> ID：15072740
> 
> 赞同：0
> 
> 时间：2013-02-25T17:26:34.163
> 
> 标签：cakephp

我在本地主机上运行我的 CakePHP 项目。当我填写表格时，单击提交按钮后显示以下错误：

> 缺少数据源配置
> 
> 错误：在 database.php 中找不到数据源配置数组。

我实际上配置了一个数据源，它看起来像：

类 DATABASE_CONFIG {

```
public $default = array(
        'datasource' => 'Database/Postgres',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'arwinder',
        'password' => 'root',
        'database' => 'sh_db',
        'prefix' => '',
        //'encoding' => 'utf8',
);

public $test = array(
        'datasource' => 'Database/Postgres',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'arwinder',
        'password' => 'root',
        'database' => 'sh_db',
        'prefix' => '',
        //'encoding' => 'utf8',
); 
```

} ...但它被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T21:05:09.953

在尝试使用数据清理时，我遇到了类似的问题（这是一个奇怪的用例，我能说什么）。

[sanitize::escape](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html#Sanitize::escape)的文档说，

> “引用字符串的*数据库名称，如您的 app/Config/database.php 文件中所命名。”*

事实上，它并没有使用数据库的名称，例如。'mydatabase' 也不接受主机，例如。“本地主机”，**也不接受“数据源”，例如。'数据库/Mysql'**。当给出这些值中的任何一个时，您会得到问题中提到的错误。

您真正需要的是要使用的“数据源”的名称。同样，“数据源”的文档无法回答这个话题。

我被难住了。所以我搜索了那个错误并找到了这个未答复的帖子。

我终于找到了一个彻底的解决方案，因为这个帖子仍然是谷歌上这个错误的最高结果，所以我回来回答它。

您实际需要的是上面提到的配置文件中列出的变量名（键而不是值）。例如。$default 或 $test 或 $what_have_you。然后根据主机名提供“默认”、“测试”或“what_have_you”。

这是最让我难以置信的。如果数据源从“生产”更改为“测试”以及“本地开发”，则知道在任何给定时间正在使用哪个数据源对于使 Sanitise:escape() 工作至关重要。

但是等一下......如果你这样做，你基本上使用构造函数方法将数据源设置为 $default如此处[记录的](https://stackoverflow.com/questions/6382826/cakephp-database-config-based-on-url)所以实际上，这个神秘的“数据源”几乎总是“默认” ' 除非它是在您的模型中动态设置的，作为覆盖，无论如何在您为手动查询进行清理时都会知道。

事实上，这个参数的默认值确实是'default'。它根本不是必需的参数，但由于文档没有将其列为可选参数或提供已定义的默认参数（在该特定页面上），因此人们可能会认为它是必需的。

无论如何，答案是不提供 $datasource 除非您已经使用[$useDBConfig](http://book.cakephp.org/2.0/en/models/model-attributes.html#usedbconfig)在模型中指定不同的数据源。

# java - 在 Main 方法中以编程方式运行 testng？

> ID：15072750
> 
> 赞同：0
> 
> 时间：2013-02-25T17:26:57.143
> 
> 标签：java, jsf, testng

我一直在寻找如何以编程方式运行 testng，但我不太确定，但您必须创建一个 testng 实例并在主方法或静态方法中执行“运行”方法..

我遵循了一个使用 main 方法的示例……但事情就是这样……我正在尝试在 jsf 应用程序中以编程方式运行 testng……是否可以在 jsf 应用程序中执行 main 方法？

当我尝试在任何其他非静态方法中创建 testng 实例时，我会遇到很多异常......当我尝试在 main 方法中执行它时，它起作用了......

编辑：这是我试图做的，但没有成功：

```
public class ExecTestSuite {

    private TestNG myTestNG;
    private XmlSuite myXmlSuite;
    private List<String> arquivos;

    public ExecTestSuite()
    {
        myTestNG = new TestNG();                            
        files = new ArrayList<String>();
        files.add("C:\\Users\\jmartins\\Desktop\\XML.xml");

        myTestNG.setTestSuites(files);                                   
    }           

    public void executarSuite(){
        this.myTestNG.run();
    }
} 
```

这是我所拥有的：

```
javax.faces.el.EvaluationException: java.lang.NoClassDefFoundError: org/testng/TestNG
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:787)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1252)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/testng/TestNG
    at br.pcg.testes.entidades.ExecTestSuite.<init>(ExecTestSuite.java:22)
    at br.pcg.testes.controller.ExecucaoxmlBean.executar(ExecucaoxmlBean.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 24 more
Caused by: java.lang.ClassNotFoundException: org.testng.TestNG
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 34 more

Fev 19, 2013 10:19:02 AM com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: #{execucaoxmlBean.executar}: java.lang.NoClassDefFoundError: org/testng/TestNG
javax.faces.FacesException: #{execucaoxmlBean.executar}: java.lang.NoClassDefFoundError: org/testng/TestNG
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:787)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1252)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.faces.el.EvaluationException: java.lang.NoClassDefFoundError: org/testng/TestNG
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 23 more
Caused by: java.lang.NoClassDefFoundError: org/testng/TestNG
    at br.pcg.testes.entidades.ExecTestSuite.<init>(ExecTestSuite.java:22)
    at br.pcg.testes.controller.ExecucaoxmlBean.executar(ExecucaoxmlBean.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 24 more
Caused by: java.lang.ClassNotFoundException: org.testng.TestNG
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 34 more

javax.faces.FacesException: #{execucaoxmlBean.executar}: java.lang.NoClassDefFoundError: org/testng/TestNG
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:89)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.faces.FacesException: #{execucaoxmlBean.executar}: java.lang.NoClassDefFoundError: org/testng/TestNG
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:787)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1252)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    ... 19 more
Caused by: javax.faces.el.EvaluationException: java.lang.NoClassDefFoundError: org/testng/TestNG
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 23 more
Caused by: java.lang.NoClassDefFoundError: org/testng/TestNG
    at br.pcg.testes.entidades.ExecTestSuite.<init>(ExecTestSuite.java:22)
    at br.pcg.testes.controller.ExecucaoxmlBean.executar(ExecucaoxmlBean.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 24 more
Caused by: java.lang.ClassNotFoundException: org.testng.TestNG
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 34 more 
```

我唯一做的就是在会话范围内的 ManagedBean（我正在处理 jsf 项目）中创建“ExecTestSuite”实例。当我尝试调试我的代码时，它表明当创建 testng 实例（新命令）时会引发异常。但是当我尝试在主要方法中创建它时，它起作用了。

# c - 编译后如何在linux中执行程序？

> ID：15072753
> 
> 赞同：3
> 
> 时间：2013-02-25T17:27:33.010
> 
> 标签：c, linux

我正在使用以下命令在 linux 中编译 C 代码：

```
gcc -o myprogram myprogram.c

```

如果我没有给它命名，我可以简单地编写命令`./a.out`来执行它。但是现在，要执行程序，我只需将“myprogram”写入命令行，但它显示“找不到命令”。我能做些什么来执行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:30:17.517

当前目录 (" `.`") 可能不在您的`PATH`. （您可以通过键入来检查`echo $PATH`，这是一个以“”分隔的目录列表`:`。如果您想在当前目录中运行某些东西，“ `.`”应该在列表中。）

如果当前目录不在您的`PATH`.，您需要输入`./myprogram`（或任何正确的路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:28:13.433

```
./myprogram 
```

应该做的伎俩。

（但真的......你有没有在编译程序“无名”后查看目录的内容？或者你认为`./a.out`是 Bash 识别的魔法序列？）

# oauth-2.0 - 作为 OAuth 服务器，我应该如何生成和存储 OAuth 2.0 令牌？

> ID：15072754
> 
> 赞同：3
> 
> 时间：2013-02-25T17:27:33.383
> 
> 标签：oauth-2.0, security

OAuth 2 令牌只是随机的 blob。我已经看到 OAuth 服务器的实现似乎建议将此随机字符串直接存储在数据库中并进行查找。

这违背了我更好的判断。

令牌本质上是用户的另一个密码。将这些令牌以纯文本形式存储在数据库中——即使这些密码是随机生成的——似乎是个**坏主意**。这是因为如果数据库遭到破坏，那么攻击者所要做的就是通过`auth_token=code`并冒充任何具有有效令牌的用户。

为 OAuth 2 生成和存储授权令牌的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:27:33.383

就像拥有一个易于撤销的不透明令牌的想法一样。但我想保持 O(1) 查找时间。

假设关键查找是 O(1) 我认为以下方案应该有效。

```
 Client Auth Code Issued = Url64(ENC(random_index||secretkey) || HMAC)
 Database Record         = {KEY: random_index , VALUE: scrypt(secretkey)} 
```

**解释：**

**发行**

1.  生成 2 个随机字符串，a`random_index`和`secret_key`
2.  散列使`secret_key`​​用密码散列最佳实践并将其存储`random_index`在数据库中。
3.  加密`random_index`and`secret_key`并将其作为`auth_code`

**验证**

1.  将客户端解密`auth_code`成组件`random_index``secret_key`
2.  `random_index`在数据库中查找令牌
3.  验证`secret_key`发行期间使用散列方法。

我认为以上解决了问题，但我欢迎任何其他解决方案。

**注意**：我会将其他元数据与密钥（到期、权限等）一起存储，但这对于回答问题并不重要。

**注意 2**：我也可以使用 SHA2 或其他快速散列算法而不是`scrypt`或者`bcrypt`因为我控制`secret_key`.

# c# - 使用 UTF-8 编码的 XML 反序列化

> ID：15072758
> 
> 赞同：3
> 
> 时间：2013-02-25T17:27:45.943
> 
> 标签：c#, serialization, utf-8, xml-serialization

我今天已经对此进行了很多搜索，但找不到如何使用 UTF-8 编码进行反序列化。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <AvailabilityRequestV2 xmlns="" xmlns:xsi="http://www.w3.org/2001/XMLSchema- instance"
 siteid="0000"
 apikey="0000"
 async="false" waittime="0">
 <Type>4</Type>
 <Id>159266</Id>
 <Radius>0</Radius>
 <Latitude>0</Latitude>
 <Longitude>0</Longitude>
 </AvailabilityRequestV2> 
```

如果我试试这个

```
 string xmlString = File above;         
 XmlSerializer serializer = new XmlSerializer(typeof(AvailabilityRequestV2));
 AvailabilityRequestV2 request = (AvailabilityRequestV2)serializer.Deserialize(
     new MemoryStream(Encoding.UTF8.GetBytes(xmlString))); 
```

如果我将鼠标置于调试模式下请求我得到这个：

```
 {<?xml version="1.0" encoding="utf-16"?><AvailabilityRequestV2 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      .................. 
```

我怎样才能强制成为 UTF-8 ？

我只看到序列化，但反序列化我没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T17:31:41.030

您可以使用 a`StreamReader`并指定 UTF-8，也可以告诉它使用 BOM（如果存在）：

```
using (StreamReader reader = new StreamReader("my.xml",Encoding.UTF8,true)) {
    XmlSerializer serializer = new XmlSerializer(typeof(SomeType));

    object result = serializer.Deserialize(reader);
} 
```

我不确定当 XML 阅读器遇到 XML 中的`encoding="utf-16"`指令时会发生什么，它可能会切换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:46:30.213

一旦您将文件的内容转换为 .Net/CLR 字符串，它就会采用 UTF-16 编码：它已从其原始源编码转换。CLR 在内部使用 UTF-16——因此`char`是 16 位的原因。

因此，文档的 [原始] XML 声明中指定的编码现在与文档的实际编码不一致。

最好`StreamReader`按照上面@Lloyd 的建议通过a。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-22T21:40:13.933

我认为@Lloyd 的示例需要`new`关键字：

```
using (StreamReader reader = new StreamReader("my.xml",Encoding.UTF8,true)) { 
```

# javascript - Kendo UI Mobile Listview 数据项在第二次搜索时未定义

> ID：15072763
> 
> 赞同：0
> 
> 时间：2013-02-25T17:27:56.787
> 
> 标签：javascript, jquery, html, ajax, kendo-ui

我正在使用 Kendo Mobile Listview 来显示 json 文件的内容。第一次搜索效果很好，在单击事件上，我可以查看绑定到该列表项的数据项。然而，在第二次搜索之后，数据项变得未定义。我可以想到很多方法来解决这个问题，但是没有理由这个当前的方法不能工作。是因为列表视图不应该再次定义它的数据源吗？任何见解都值得赞赏。谢谢你。HTML

```
<span id="search">
                <input id="inputSearch" type="text" placeholder="Search" class="k-textbox"/>
                <a id="btnSearch" class="k-button" type="submit"><span class="k-icon k-i-search" >...</span></a>
            </span> 
```

*   请细化您的搜索

这是js片段：

```
 $.ajax({
                       cache:false,
                       type:"GET",
                       dataType: "json",
                       url: "http://"+host+"/Api"+requestController+queryString,
                       headers: {"AuthToken":cookie},
                       success:
                           function (data) {
                               var val = data.data;                                       
                                    if(val.length!=0) {
                                        $("#customerList").data
                                        var customerDataSource = new kendo.data.DataSource({ data: val });
                                        customerDataSource.read();
                                        $("#customerList").kendoMobileListView({
                                            dataSource: customerDataSource,
                                            template: '<a>${Company}<span class="k-status-text"> <br />${CustNo}</span></a>',
                                            dataType:"json",
                                            style: "inset",
                                            click: function(e){    
//!!!! EXCEPTION OCCURS HERE ON SECOND SEARCH. DATAITEM UNDEFINED                                                
                                                alert(e.dataItem.CustNo);
                                                // redirect to
                                                app.navigate("#overview-customer");

                                            }
                                        });
                                    } else {
                                        $("#customerList").append('<li>' +'<div class="k-block k-info-colored">'+
                                            'Please refine your search'+'</div>' + '</li>');
                                    }

                           }
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:52:00.737

每次搜索时您都在重新创建列表视图

```
$("#customerList").kendoMobileListView({ 
```

这是一项昂贵的操作，尤其是对于移动设备。更好地初始化（创建）移动列表视图一次并使用**[dataSource.data()](http://docs.kendoui.com/api/framework/datasource#data)**方法更改它使用的数据。这也将确保您不会遇到您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:41:36.737

根据 Petur 的回答，列表视图应该像这样绑定。每次点击都实例化列表视图很费力，并且与 Kendo 的脚本不兼容。

```
 var customerDataSource = new kendo.data.DataSource({ });
    // Mobile listview
     $("#customerList").kendoMobileListView({
                                            dataSource: customerDataSource,
                                            template: '<a>${Company}<span class="k-status-text"> <br />${CustNo}</span></a>',
                                            dataType:"json",
                                            style: "inset",
                                            click: function(e){
                                                var index = $(e.item).index();
                                                var text= $(e.item).index();
                                                alert(e.dataItem.CustNo);
                                                // redirect to
                                                app.navigate("#overview-customer");

                                            },
                                            dataBound: function(e){
                                                alert("Ive been bound");
                                            }
                                        });

      $('#search a').click(function () {
          var searchstr = $('#search input').val();
          var requestController = "/Customers";
          var queryString= "?filtercriteria=custno-"+searchstr+"&company-"+searchstr;
                    $.ajax({
                       cache:false,
                       type:"GET",
                       dataType: "json",
                       url: "http://"+host+"/Api"+requestController+queryString,
                       headers: {"AuthToken":cookie},
                       success:
                           function (data) {
                               var val = data.data;
                                    if(val.length!=0) {
                                        var ds = [{ data: val }];
                                        customerDataSource.data(val);

                                    } else {
                                        $("#customerList").append('<li>' +'<div class="k-block k-info-colored">'+
                                            'Please refine your search'+'</div>' + '</li>');
                                    }

                           }
                    });
            }); 
```

# jquery - android chrome 上用于响应式画廊的奇怪线条（Flexslider，bootstrap.js）

> ID：15072765
> 
> 赞同：0
> 
> 时间：2013-02-25T17:28:03.663
> 
> 标签：jquery, css, twitter-bootstrap, responsive-design, flexslider

看看我正在尝试设置的这个响应式布局：

[http://www.marcopragliola.com/sites/exp/layout.php](http://www.marcopragliola.com/sites/exp/layout.php)

我已经实现了响应式 bootstrap.js 和响应式网络画廊 (FlexSlider)。

我的问题是，当我使用 Chrome 在 Android 手机和平板电脑上显示或滚动画廊时，画廊中出现奇怪的水平线。在任何大小的桌面浏览器上都可以。对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:33:43.187

在触控设备上是正常的。像这样定义你的CSS。

```
.removeOutline{
 -webkit-tap-highlight-color:rgba(0,0,0,0);
} 
```

并像这样将此类添加到您的画廊中。

```
<div class=".removeOutline">
    <a href="#">Any text</a>
</div> 
```

您可以使用

```
-webkit-tap-highlight-color:transparent; 
```

但它只适用于 iOS 设备。希望它会帮助你。

# c# - 使用 Xamarin 的简单 2D 游戏

> ID：15072769
> 
> 赞同：5
> 
> 时间：2013-02-25T17:28:18.557
> 
> 标签：c#, android, mono, xamarin

我刚刚下载了 Xamarin。首先，我决定为我的 Android 设备创建一个简单的 2D 游戏。奇怪的是，谷歌没有为 Xamarin 提供 2D 游戏引擎的任何结果。我唯一能找到的是 MonoGame，但这似乎不适用于 Xamarin（仅支持 Visual Studio 和 MonoDevelop）。

谁能给我建议我可以在 Xamarin 中使用什么引擎/框架？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-11T18:32:17.740

Monogame 非常适用于 Xamarin：

设置：

我知道为时已晚，但我只是加入了 monogame 并找到了解决方案：要使其正常工作，请按照以下步骤操作：

*   **从http://xamarin.com/studio**安装最新的 xamarin studio
***   **接下来从https://monogame.codeplex.com/releases/view/102870**下载 monogame 文件***   在 mac 上选择 xamarin 版本

    *   接下来通过打开 xamarin studio 安装模板。接下来单击顶部 Mac 菜单“Xamarin Studio”Addin Manger 并选择从文件安装并选择您下载的文件...

    *   到目前为止一切顺利，但您的 png 文件将不会从这里加载...所以请按照以下步骤解决此问题：从 monogame 访问 git 页面并下载它：**https ://github.com/mono/MonoGame**

    *   下载并解压 zip 文件后，进入文件夹并使用 xamarin studio **MonoGame.Framework.MacOS.sln打开以下文件**

    *   现在 Xamarin 工作室应该开放并包括 2 个项目：Lidgren。...和 ​​Monogame.Framework.MacOS

    *   在 Xamarin 工作室的顶部（除了播放按钮，您应该看到**Debug**单击它并将其更改为**Release***   现在右键单击 Monogame.Framework.MacOS 项目并新建它*   这应该在没有任何错误的情况下完成，但您可能会收到警告......我们不注意它们：D*   接下来，您是否需要再次转到打开 **MonoGame.Framework.MacOS.sln**项目的下载 Monogame 文件夹。*   但是这一次你需要更深入地研究文件夹结构：查找以下文件夹 --> MonoGame.Framework/bin/MacOS/Release*   发布文件夹中的文件现在是您的新库...*   您可以将这些库复制到您想要的任何位置，但您应该知道它们的位置，因为您需要将它们添加到您的新 monogame 项目中。*   接下来打开 Xamarin 工作室并使用已经安装的模板创建一个新的 Monogame 项目......*   选择 Monogame Mac 应用程序模板****

 ****我们现在差不多完成了：

*   查找引用“Xamarin Studio 内项目树中的文件夹”并右键单击 Monogame 以删除引用...
*   现在您需要通过右键单击参考来添加新参考。
*   访问 .Net-Assemblies 并从 MonoGame.Framework/bin/MacOS/Release/- 文件夹添加文件（确保添加所有文件）

现在的最后一步是在 Xamarin Studio 中展开 Content 文件夹，然后左键单击 logo.png 文件。在 IDE 的左侧，您可以找到属性。在属性中将第三个从顶部更改为内容而不是无。如果您现在运行模板，则应该可以毫无问题地加载图形：D

享受问候 Schreda

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T02:51:49.460

Xamarin 最近才发布 Xamarin Studio。它曾经被称为 MonoDevelop，因此可以解释为什么您在 google 中找不到搜索结果。

好消息是它确实有效，我目前正在使用新的 Xamarin Studio 使用 MonoGame 制作游戏。它并不完美，它们是他们目前正在整理的一些错误，但它绝对是可用的。

这是我在 Xamarin Studio 发布后完成的一款游戏，以证明它运行良好： [https ://play.google.com/store/apps/details?id=com.craftworkgames.rockrun](https://play.google.com/store/apps/details?id=com.craftworkgames.rockrun)

所以是的，MonoGame 正在经历一个过渡阶段，但一切都很好。****

# asp.net - 如何使用 linq 获取最新创建的子目录？

> ID：15072770
> 
> 赞同：1
> 
> 时间：2013-02-25T17:28:21.200
> 
> 标签：asp.net, linq, directory

我对 Linq 很陌生。但我正在尝试编写一个函数来使用`Directory.GetDirectories(rootPath).Where(...)`. 有可能吗？我该如何继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:31:22.880

```
var info = new DirectoryInfo(rootPath);    
var latestDirectory = info.GetDirectories()
                          .OrderByDescending(d => d.CreationTime)
                          .FirstOrDefault(); 
```

您可以轻松更改`DirectoryInfo`要排序的类属性的名称。

[`DirectoryInfo.GetDirectories Method`](http://msdn.microsoft.com/en-us/library/f3e2f6e5.aspx)返回数组`System.IO.DirectoryInfo`，因此您可以轻松地对目录进行排序`CreationTime`并返回第一个。

**VB.NET 解决方案：**

```
Dim info As New DirectoryInfo(rootPath)
Dim latestDirectory As DirectoryInfo = info.GetDirectories() _
                                           .OrderByDescending(Function(d) d.CreationTime) _
                                           .FirstOrDefault() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:34:21.917

您需要获取特定的 DirectoryInfo 信息来确定创建时间。试试这个。

```
DirectoryInfo di = new DirectoryInfo(rootPath);
var directory = di.GetDirectories()
                  .OrderByDescending(d => d.CreationTime)
                  .FirstOrDefault(); 
```

# c# - 如何将上下文指示器添加到翻转视图

> ID：15072784
> 
> 赞同：3
> 
> 时间：2013-02-25T17:29:01.793
> 
> 标签：c#, image, xaml, windows-8, gallery

我创建了一个带有单页和翻转视图的简单 Windows 8 应用程序。我的目标是浏览一组图像。Microsoft 建议对具有大量图像的图像库使用上下文指示器（我有 25 张照片）。

所以对于初学者来说：我希望 Flipview 是满足我需求的正确工具？

以及如何将上下文指示器添加到现有的翻转视图？到目前为止，我将翻转视图添加到 xaml 文件中：

```
<FlipView x:Name="flipView"  Grid.Row="1" VerticalAlignment="Top" Background="Black"/> 
```

我还在 C# 中添加了一些图像：

```
ImageBrush brush1 = new ImageBrush();
brush1.ImageSource = new BitmapImage(new Uri("ms-appx:///Assets/gallery/IMG_0001.jpg"));

FlipViewItem flipvw1 = new FlipViewItem();
flipvw1.Background = brush1;

flipView.Items.Add(flipvw1); 
```

ETC...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T21:47:38.330

查看这篇描述如何实现的博客文章：

[http://blogs.u2u.be/diederik/post/2012/08/24/A-CXAML-FlipView-Context-Indicator-for-Windows-8.aspx](http://blogs.u2u.be/diederik/post/2012/08/24/A-CXAML-FlipView-Context-Indicator-for-Windows-8.aspx)

Callisto 还包括您可以从 NuGet 获取的实现：

[https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/FlipViewIndicator/FlipViewIndicator.cs](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/FlipViewIndicator/FlipViewIndicator.cs)

# jquery - 如何在取消时抑制 jquery 验证？

> ID：15072790
> 
> 赞同：2
> 
> 时间：2013-02-25T17:29:19.050
> 
> 标签：jquery, jquery-validate

我正在使用 jquery validate 插件进行表单验证。我看到取消功能有些奇怪。我有一个带有一个电子邮件字段、一个提交按钮和一个取消按钮的表单。当我在电子邮件字段中输入一个不完整的地址，然后在没有单击页面上任何其他位置的情况下单击取消，验证器会检查电子邮件字段，在该字段旁边显示无效消息，并终止取消操作。

我在这里找到了一个相关的问题：[jQuery Validation plugin: disable validation for specified submit buttons](https://stackoverflow.com/questions/203844/jquery-validation-plugin-disable-validation-for-specified-submit-buttons)。它看起来和我需要的完全一样。然而它不起作用！我在取消按钮中添加了“取消”css 类，但没有任何效果。

此示例代码演示了我看到的问题。我在 FF 和 Chrome 中都看到了这种行为。

在此示例中，当我在文本输入中键入无效的电子邮件地址，然后在单击其他任何内容之前单击取消按钮时，验证器会在文本输入旁边显示一条消息，并且取消操作永远不会发生。如果我然后再次单击取消，页面将按预期重新加载。这意味着要取消页面，我实际上必须单击两次取消。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#myForm").validate()

        $(".cancel").click(function () {
            location.reload(true)
        })

    })
</script>

<div>
    <form name="myForm" id="myForm" action="index.html">
        <input type="text" class="required email" id="myField" name="myField"/>
        <input type="submit" value="Submit"/>
        <input type="submit" value="Cancel" class="cancel"/>
    </form>
</div> 
```

也很有趣：我尝试运行在 jquery 验证文档 ( [http://docs.jquery.com/Plugins/Validation/Reference#Skipping_validation_on_submit](http://docs.jquery.com/Plugins/Validation/Reference#Skipping_validation_on_submit) ) 中找到的演示。当我运行演示时，我无法判断验证是否有效——电子邮件字段永远不会被标记为无效，即使我输入 gobbledygook 并单击提交按钮也是如此。我所得到的只是一个简单的警报，该警报已添加到表单的 submitHandler 中。并且取消按钮的行为方式相同，所以我无法判断添加取消类是否有效。

我正在使用 FF 和 Chrome 运行它。我正在使用 jquery 1.9.1 和 jquery-validate 1.11.4。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T18:02:39.357

[根据您引用的问题的公认答案](https://stackoverflow.com/a/203989/594235)，添加一个`cancel`类只会“抑制”验证。[正如您在此演示中所见](http://jsfiddle.net/2Prhy)，取消按钮的行为与另一个提交按钮完全相同，只是绕过了验证。请准确描述单击取消按钮时您希望看到的情况。

否则，也许这就是你想要的：http: [//jsfiddle.net/25XBT/](http://jsfiddle.net/25XBT/)

**jQuery** :

```
$(document).ready(function () {

    var validate = $('#myform').validate({
        // your rules & options
    });

    $('#cancel').on('click', function (e) {
        e.preventDefault();
        validate.resetForm();
        $('form').get(0).reset();
    });

}); 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="myfield" />
    <input type="submit" />
    <input type="submit" id="cancel" class="cancel" value="cancel" />
</form> 
```

请参阅： [http ://docs.jquery.com/Plugins/Validation/Validator/resetForm](http://docs.jquery.com/Plugins/Validation/Validator/resetForm)

**编辑**： `class="cancel"`此后已被弃用以支持该`formnovalidate`属性。

```
<input type="submit" id="cancel" formnovalidate="formnovalidate" value="cancel" /> 
```

# iphone - 检测 UILabel 中显示的字符总数

> ID：15072794
> 
> 赞同：0
> 
> 时间：2013-02-25T17:29:37.523
> 
> 标签：iphone, xcode

有没有办法检测 UIlabel 中显示的字符总数。uilabels 文本来自 NSString。uilabel 是一个出口。任何帮助和示例将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:33:07.323

`yourOutletName.text.length`将给出字符总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:34:40.297

你也可以用这个

```
NSString *myString=@"Sample";
NSUInteger characterCount = [myString length]; 
```

# linux - bash - 解析文件中的参数列表

> ID：15072795
> 
> 赞同：3
> 
> 时间：2013-02-25T17:29:38.873
> 
> 标签：linux, bash, shell

我有一个名为 foo.sh 的脚本，其中包含类似

```
exec myapp -o size=100m -f 
```

知道如何创建另一个脚本来解析 foo.sh 并检索 的值`size`吗？可以假设 myapp 在 foo.sh 中只出现一次，但`size`参数的顺序可以出现在参数列表中的任何位置

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:34:34.937

在外壳中使用[grep ：](/questions/tagged/grep "显示标记为“grep”的问题")

```
$ grep -oP 'myapp.*?size=\K\d+m' foo.sh
100m 
```

在外壳中使用[awk ：](/questions/tagged/awk "显示标记为“awk”的问题")

```
$ awk -F'size='  '{sub(/ -f/, "");print $2}' foo.sh
100m 
```

或者

```
$ awk '{print gensub(/.*size=([0-9]+m).*/, "\\1", $0)}' foo.sh
100m 
```

在 shell 中使用[perl ：](/questions/tagged/perl "显示标记为“perl”的问题")

```
$ perl -lne 'print $1 if /exec.*?size=(\d+m)/' foo.sh
100m 
```

或使用 shell 有趣的技巧：

```
$ declare $(grep -oP "\b\w+=\w+\b" foo.sh)
$ echo $size
100m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:34:26.643

```
cat foo.sh | egrep -o 'size=[[:digit:]]+' | awk -F= '{print $2}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:16:41.150

sed 方法的一种变体。一旦找到线路，这个就会短路。如果文件很长并且目标可能接近开头，则很有用。

```
sed  -ne '/exec myapp -o size=/{s/[^0-9]*\([m0-9]*\).*/\1/;p;q;}' 
```

一旦找到正确的行，它就会提取大小值，打印它，然后退出。

# scala - 使用 ClassTag 缩小范围

> ID：15072796
> 
> 赞同：0
> 
> 时间：2013-02-25T17:29:42.850
> 
> 标签：scala, scala-2.10

我正在尝试缩小泛型类型。它可以编译，但结果不是预期的 (Container(A), Container(B) ..) 而不是 (Container(A),Container(A))。我究竟做错了什么？

```
sealed trait Base
case class A() extends Base 
case class B() extends Base
case class Container[+T](item: Base)

object Test {
  import scala.reflect.ClassTag

  def narrowContainer[T <: Base](list: List[Container[Base]])(implicit tag: ClassTag[T]): List[Container[T]] = {
      list.collect{ case t: Container[T] => t }
  }  

  def testNarrowContainer(){
       val li = List(A(),B(),A(),B()).map(Container(_))
       println(narrowContainer[A](li))  
       println(narrowContainer[B](li)) 
  }

  def main(args: Array[String]){
      testNarrowContainer()
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:08:41.530

在这个表达式中`T`被删除，所以实际检查的所有案例`t`都是一个容器

```
{ case t: Container[T] => t } 
```

我认为您可以添加一个警卫明确检查`t`反对的内容`tag`（对不起，现在不知道正确的语法）

# c++ - Bison在错误的行之后输出字符串

> ID：15072799
> 
> 赞同：1
> 
> 时间：2013-02-25T17:29:51.633
> 
> 标签：c++, linux, bison, flex-lexer

输入

```
 1  -- Narrowing Variable Initialization  
 2  
 3  function main a: integer returns integer;  
 4      b: integer is a * 2.;  
 5  begin  
 6      if a <= 0 then  
 7          b + 3;  
 8      else  
 9          b * 4;  
10      endif;  
11  end; 
```

正在产生输出

```
 1  -- Narrowing Variable Initialization
  2  
  3  function main a: integer returns integer;
  4      b: integer is a * 2.;
  5  begin
Narrowing Variable Initialization
  6      if a <= 0 then
  7          b + 3;
  8      else
  9          b * 4;
 10      endif;
 11  end; 
```

而不是将该错误消息放在实际发生错误的第 4 行下。我已经看了几个小时，无法弄清楚。

```
%union
{
    char* ident;
    Types types;
}

%token <ident> IDENTIFIER
%token <types> INTEGER_LITERAL
%token <types> REAL_LITERAL
%token  BEGIN_
%token  FUNCTION
%token  IS
%token  <types> INTEGER
%token  <types> REAL
%token  RETURNS

%type  <types> expression
%type  <types> factor
%type  <types> literal
%type  <types> term
%type  <types> statement
%type  <types> type
%type  <types> variable

%%

program:
    /* empty */ |
    functions ;

functions:
    function_header_recovery body ; |
    function_header_recovery body functions ;

function_header_recovery:
    function_header ';' |
    error ';' ;

function_header:
    FUNCTION {locals = new Locals();} IDENTIFIER optional_parameters RETURNS type {globals->insert($3,locals->tList);} ;

optional_parameters:
    /* empty */ |
    parameters;

parameters:
    IDENTIFIER ':' type {locals->insert($1, $3); locals->tList.push_back($3); } |
    IDENTIFIER ':' type {locals->insert($1, $3); locals->tList.push_back($3); } "," parameters;

type:
    INTEGER | REAL ;

body:
    optional_variables BEGIN_ statement END ';' ;

optional_variables:
    /* empty */ |
    variables ;

variables:
    variable IS statement {checkTypes($1, $3, 2);} |
    variable IS statement {checkTypes($1, $3, 2);} variables ;

variable:
    IDENTIFIER ':' type {locals->insert($1, $3);} {$$ = $3;} ;

statement:
    expression ';' |

...

Types checkTypes(Types left, Types right, int flag)
{
    if (left == right)
    {
        return left;
    }
    if (flag == 1)
    {
        Listing::appendError("Conditional Expression Type Mismatch", Listing::SEMANTIC);
    }
    else if (flag == 2)
    {
        if (left < right)
        {
            Listing::appendError("Narrowing Variable Initialization", Listing::SEMANTIC);
        }
    }
    return REAL_TYPE;
} 
```

打印由以下人员处理：

```
void Listing::nextLine()
{
printf("\n");
if (error == "")
{
    lineNo++;
    printf("%4d%s",lineNo,"  ");
}
else
{
    printf("%s", error.c_str());
error = "";
nextLine();
}
}

void Listing::appendError(const char* errText, int errEnum)
{
error = error + errText;

if (errEnum == 997)
{
    lexErrCount++;
}
else if (errEnum == 998)
{
    synErrCount++;
}
else if (errEnum == 999)
{
    semErrCount++;
}
}

void Listing::display()
{
printf( "\b\b\b\b\b\b    " );

if (lexErrCount + synErrCount + semErrCount > 0)
{
    printf("\n\n%s%d","Lexical Errors ",lexErrCount);
    printf("\n%s%d","Syntax Errors ",synErrCount);
    printf("\n%s%d\n","Semantic Errors ",semErrCount);
}
else
{
    printf("\nCompiled Successfully\n");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:18:40.560

这就是工作方式`bison`。*它会生成一个单令牌前瞻解析器，因此在它读取生成后的令牌之前*不会触发您的生产操作。因此，`begin`必须在与相关的操作`variables`发生之前阅读。（`bison`从不尝试组合动作，即使它们在文本上是相同的。所以在`variables`看到以下标记之前，它真的无法知道哪个生产适用以及要执行哪个动作。）

有多种方法可以将行号和/或列位置与每个标记相关联，并在要生成错误消息时使用该信息。通常，在输入文本中散布错误和/或警告需要缓冲输入；对于语法错误，您只需要缓冲到下一个标记，但这不是一般的解决方案；在某些情况下，例如，您可能希望将错误与运算符相关联，但是在解析运算符的尾随参数之前不会检测到错误。

正确地将错误/警告与源代码散布的一种简单技术是将所有错误/警告写入临时文件，将文件偏移量放在每个错误的前面。然后可以对该文件进行排序，然后可以重新读取输入，在适当的点插入错误消息。这个策略的好处是它避免了为每个错误维护行号，这明显减慢了词法分析。当然，如果您允许像 C's 这样的构造，它不会那么容易工作`#include`。

因为生成好的错误消息很难，甚至跟踪位置也会使解析速度变慢，所以我有时会使用在检测到错误时解析输入两次的策略。第一次解析只检测错误，如果不能做更合理的事情，就会提前失败；如果检测到错误，则使用更精细的解析器重新解析输入，该解析器会仔细跟踪文件位置，甚至可能使用缩进深度等启发式方法来尝试生成更好的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:47:58.233

正如 rici 所指出的，bison 生成一个 LALR(1) 解析器，因此它使用一个前瞻标记来知道要采取什么行动。但是，它并不总是使用前瞻标记——在某些情况下（无论前瞻如何，只有一种可能性），它使用默认缩减，可以缩减规则（并运行相关操作）而无需前瞻。

在你的情况下，如果你真的需要，你可以利用它来让动作在没有前瞻的情况下运行。有问题的特定规则（触发前瞻要求）是：

```
variables:
    variable IS statement {checkTypes($1, $3, 2);} |
    variable IS statement {checkTypes($1, $3, 2);} variables ; 
```

在这种情况下，在看到 a 之后`variable IS statement`，它需要查看下一个标记来决定是否有更多的变量声明，以便知道要运行哪个动作（第一个或第二个）。但是由于这两个动作实际上是相同的，您可以将它们组合成一个动作：

```
variables: vardecl | vardecl variables ;
vardecl: variable IS statement {checkTypes($1, $3, 2);} 
```

这将最终使用默认减少，因为它不需要前瞻来决定两个减少/操作之间。

请注意，上述内容取决于能够在`statement`没有前瞻的情况下找到 a 的结尾，只要所有语句都以 a 明确结束就应该是这种情况`;`

# facebook - 调试 Facebook 支付回调

> ID：15072801
> 
> 赞同：0
> 
> 时间：2013-02-25T17:29:57.657
> 
> 标签：facebook, debugging, payment, facebook-credits

我无法确定调试 Facebook 支付回调 PHP 文件的最佳方式。客户端没有请求该脚本，因此我不确定如何将任何“真实”值传递给脚本以在本地运行它。该主题似乎没有包含在任何 Facebook 文档中，我也无法在 Google 上找到它（除了[这个先前提出的问题](http://facebook.stackoverflow.com/questions/7329977/how-to-debug-facebook-credits-api-callback)，它试图在完全没有互联网连接的情况下调试脚本），所以希望答案就是那么明显和简单。到目前为止，我仅有的两个“解决方案”是让脚本输出一个包含任何调试输出的文本文件，或者盲目地修改代码，直到模糊的客户端 API 错误消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:01:33.850

还有另一种选择。将输出邮寄给自己。我发现它比阅读文本文件更方便。

```
ob_start();
//the contents of your file
$output = ob_get_clean();
mail(
    'youremail@email.com', 
    'fb_payments', 
    $output,
    'From: noreply@misite.com' . "\r\n".'X-Mailer: PHP/' . phpversion()
);
echo $output; 
```

此外，您还可以捕获从 Facebook 获得的 $_POST 信息，并通过表单/javascript 将其发送到本地文件。然后你不必让 Facebook ping 它，你可以在浏览器中看到错误。

# elasticsearch - ElasticSearch 获取突出显示的片段的偏移量

> ID：15072806
> 
> 赞同：30
> 
> 时间：2013-02-25T17:30:07.287
> 
> 标签：elasticsearch

是否可以获得每个突出显示的片段的字符位置？我需要将突出显示的文本与源文档匹配，并且具有字符位置将使其成为可能。

例如：

```
curl "localhost:9200/twitter/tweet/_search?pretty=true" -d '{
    "query": {
        "query_string": {
            "query": "foo"
        }
    },
    "highlight": {
        "fields": {
            "message": {"number_of_fragments": 20}
        }
    }    
}' 
```

返回此亮点：

```
"highlight" : {
    "message" : [ "some <em>foo</em> text" ]
 } 
```

如果匹配文档中的字段消息是：

```
"Here is some foo text" 
```

有没有办法知道片段从匹配字段的 char 8 开始并在 char 21 结束？

**知道匹配令牌**的开始/结束偏移量对我也有好处 - 也许有一种方法可以使用 script_fields 访问该信息？（这个[问题](https://stackoverflow.com/questions/13178550/elasticsearch-return-the-tokens-of-a-field)显示了如何获取令牌，而不是偏移量）。

“消息”字段具有：

```
"term_vector" : "with_positions_offsets",
"index_options" : "positions" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-15T04:04:52.173

客户端方法实际上是标准做法。

我们已经讨论过添加偏移量，但担心它会导致更多的混乱。提供的偏移量特定于 Java 的 UTF-16 字符串编码，虽然它们在技术上可用于计算来自 $LANG 的片段，但为您指定的分隔符解析响应文本更为直接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-20T11:04:48.397

我们最终像这样扩展了原始文本：

> 一些[1] 文本[2] 我们[3] 索引[4]

然后我们定义一个自定义分析器：

```
"char_filter": {
        "remove_tags": {
          "type": "pattern_replace",
          "pattern": "\\[[0-9]+\\]",
          "replacement": "" 
```

现在，在突出显示的片段中，我们获得了位置标签，并且我们知道它们出现在文本中的什么位置。丑陋，但有效！

[我在这里](https://stackoverflow.com/questions/30820827/elasticsearch-location-of-fragments-in-a-document)给出了更全面的答案

# android - 如何从 values\arrays.xml 文件中获取“人类可读”部分

> ID：15072812
> 
> 赞同：1
> 
> 时间：2013-02-25T17:30:34.427
> 
> 标签：android

我只是不知道如何完成以下工作；

我想显示“人类可读形式”（`refresh_interval_entries`），例如在 a 中`Log.d()`，对应于在 中选择的内容`refresh_interval_values`。

*   我在中定义了两个数组`values\arrays.xml`：

    ```
    <string-array name="refresh_interval_entries" translatable="false">
        <item>1 minute</item>
        <item>2 minutes</item>
        <item>3 minutes</item>
    </string-array>
    <string-array name="refresh_interval_values" translatable="false">
       <item>60</item>
       <item>120</item>
       <item>180</item>
    </string-array> 
    ```

*   我将选定的值保存`refresh_interval_values`在 ListPreference 中。

首先，我正在考虑做类似的事情；

```
String[] mEntries = getResources().getStringArray(R.array.refresh_interval_entries); 
```

但我不认为这会起作用，因为我无法获得正确的索引`mEntries[index]`，因为我无法使用`refresh_interval_values`.

我**不想**在扩展的 Activity 中显示它`PreferenceActivity`，只是在普通 Activity 中显示。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:44:34.523

如何在您的应用程序开始时`HashMap`，从两者中做出选择`arrays`：

```
HashMap<String, String> dictionary = new HashMap<String, String>(); 
String[] mEntries = getResources().getStringArray(R.array.refresh_interval_entries);
String[] mValues = getResources().getStringArray(R.array.refresh_interval_values);

for (int i = 0; i < mEntries.length; i++) {
    dictionary.put(mValues[i], mEntries[i]);
} 
```

并像这样使用它：

```
String entry = dictionary.get("60"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:25:27.720

做这样的事情：

```
 {
        ... 
        String[] mEntries = getResources().getStringArray(R.array.refresh_interval_entries);
        String[] mValues = getResources().getStringArray(R.array.refresh_interval_values);
        Log.d(TAG, "120=" + getEntryFromValue("120", mEntries, mValues));
    }

private String getEntryFromValue(String value, String[] mEntries, String[] mValues) {
    for (int i=0; i < mValues.length; i++) {
        if (value.equals(mValues[i])) {
            // check mEntries length
            return mEntries[i];
        }
    }
    return "NOT FOUND";
} 
```

# python - 如何列出 dir(object) 的每一项？

> ID：15072814
> 
> 赞同：0
> 
> 时间：2013-02-25T17:30:40.087
> 
> 标签：python

在 Python 中，要查找所有属性，有：

```
dir(object)

object.__dict__.keys() 
```

但我想要的是列出第二个分支中的内容，而不仅仅是第一个分支，它是一种递归操作？

怎么做？

就像是

```
dir(dir(x) for x in dir(math)) 
```

尝试了这个，仍然得到相同的重复结果：

```
>>> for i in dir(math):
...     for j in i:
...         print dir(j) 
```

所有的结果都是方法`str`

更新：似乎`dir()`命令返回了一个列表`str`，这是一个简单的 hack；我试图排除`reserved names`，看看我是否走得更远，但结果只是`str`

```
[i for i in dir(math) if i[0]!="_"]

[type(i) for i in dir(math) if i[0]!="_"] 
```

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:31:54.307

```
object.__dict__.keys()   # Just keys
object.__dict__.values() # Just values
object.__dict__.items()  # Key-value pairs 
```

**编辑**等等！我想我误解了。你想列出一个对象的属性，以及那些属性的属性等等？尝试这样的事情：

```
def discover(object):
    for key in dir(object):
        value = getattr(object, key)
        print key, value
        discover(value) 
```

这很粗糙，但这是我认为您正在寻找的递归。请注意，您必须在某些时候手动停止它。底部没有乌龟，它一直在继续。

# htmlpurifier - HTMLPurifier 将 £ 转换回 £

> ID：15072818
> 
> 赞同：1
> 
> 时间：2013-02-25T17:30:48.800
> 
> 标签：htmlpurifier

我遇到了 HTMLPurifier 的问题，它似乎正在转换

```
&pound; 
```

回到

```
£ 
```

我目前的配置是：

```
$config = \HTMLPurifier_Config::createDefault();
$config->set('HTML.Doctype', 'XHTML 1.0 Transitional');
$config->set('Core.Encoding', 'UTF-8');
$config->set('Attr.AllowedFrameTargets', array('_blank'));
$config->set('HTML.Trusted', true);
$config->set('CSS.Trusted', true);
$config->set('Attr.EnableID', true);

$def = $config->getHTMLDefinition(true);
$def->addAttribute('a', 'href*', 'URI');
$def->addAttribute('a', 'rel', 'CDATA');

$objPurifier = new HTMLPurifier($config);
$string = $objPurifier->purify($string); 
```

首先我只是简单地传递了 £ 符号，它似乎被忽略并且没有被转换为`&pound;`所以我决定在将 $string 传递给净化器之前运行 str_replace() ，但这会将它转换回 £ 符号 - 所以我真的迷路了，如果有人知道什么配置设置可能会改变这种行为，我将不胜感激。

我现在在净化后运行 str_replace() ，但必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:21:30.963

这是设计使然；此处发生的规范化有助于 HTML Purifier 避免某些类型的 XSS 错误。 [http://htmlpurifier.org/docs/enduser-utf8.html](http://htmlpurifier.org/docs/enduser-utf8.html)值得一读。

# ruby-on-rails - 使用工头从网络设置独角兽工人的数量与从独角兽本身

> ID：15072821
> 
> 赞同：2
> 
> 时间：2013-02-25T17:30:52.807
> 
> 标签：ruby-on-rails, unicorn, foreman

我有点卡在从工头设置中设置独角兽工人的数量之间

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

然后在运行时`foreman start -c web=16`

或独角兽只需设置`worker_processes 16`

如果我在设置`foreman start -c web=8`时设置这是否`worker_process=2`意味着它将总共运行 16

这只是一个偏好还是有什么我不明白的？有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:08:44.380

foreman start -c web=16 将启动 16 个主 unicorn 进程，每个分叉但是默认设置许多工作进程。

foreman start -c web=1 将 worker_processes 设置为 16 将启动一个主 unicorn 进程，该进程将分叉 16 个工作进程。

主要区别在于您让谁来控制流程。unicorn master 进程是围绕跟踪它的分叉进程并知道它们何时被挂起等以进行清理和重新启动的想法而构建的。工头进程只知道主 unicorn 进程，而不知道主 unicorn 进程派生的任何进程。

独角兽机架服务器专门用于替换运行多个进程（例如 4 个瘦服务器），而是运行单个主进程并让它处理分叉工作进程的管理。这允许单个进程知道服务于机架应用程序的所有其他进程。

简而言之 - 运行一个独角兽进程并在配置文件中添加工人数。不要让工头做。

# xml - 为什么这不从 XML 提要返回结果？

> ID：15072831
> 
> 赞同：0
> 
> 时间：2013-02-25T17:31:26.867
> 
> 标签：xml, windows-phone-7

所以我有这个提要，我缩小了不需要的节点。

```
<ArrayOfService xmlns="http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<Service z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
<EntityKey z:Id="i2" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
  <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
  <a:EntityKeyValues>
    <a:EntityKeyMember>
      <a:Key>serviceId</a:Key>
      <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1149</a:Value>
    </a:EntityKeyMember>
  </a:EntityKeyValues>
  <a:EntitySetName>ServiceSet</a:EntitySetName>
</EntityKey>
<client z:Id="i3">
  <EntityKey z:Id="i4" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
    <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
    <a:EntityKeyValues>
      <a:EntityKeyMember>
        <a:Key>clientId</a:Key>
        <a:Value i:type="b:string" xmlns:b="http://www.w3.org/2001/XMLSchema"></a:Value>
      </a:EntityKeyMember>
    </a:EntityKeyValues>
    <a:EntitySetName>ClientSet</a:EntitySetName>
  </EntityKey>
  <OnlineOrdersEmailAddress></OnlineOrdersEmailAddress>
  <SiriEndPointUrl>/DataBroker/</SiriEndPointUrl>
  <clientId>brightonbuses</clientId>
  <clientName>brightonbuses</clientName>
  <clientRole />
  <customers />
  <emailDistributionList />
  <emailNewsletter />
  <emailTemplate />
  <facebookAccessToken>226218420727119|9fab190dcc99dc2750006a31.3-642660078|191977440844064|WaOZ-7z6_ih2OwHmerQ95uz0nFU</facebookAccessToken>
  <facebookId>191977440844064</facebookId>
  <fareMatrix />
  <newsCategory />
  <newsletter />
  <password />
  <pdfDirectoryPath>C:\buscms\wwwroot\operators\\data-files\pdfs</pdfDirectoryPath>
  <pdfDirectoryUrl>http:///uploadedfiles</pdfDirectoryUrl>
  <primaryEmailAddress>info@buses.co.uk</primaryEmailAddress>
  <primaryWebAddress>http://www.buses.co.uk</primaryWebAddress>
  <realtimeUrl>http://buses.citytransport.org.uk/smartinfo/service/jsp?stName=#gpsStopName#&amp;olifServerId=182&amp;autorefresh=0&amp;default_autorefresh=20&amp;routeId=182%2F#serviceName#&amp;stopId=#gpsStopName#&amp;optDir=#destination#&amp;nRows=10&amp;showArrivals=n&amp;optTime=now&amp;time=&amp;allLines=#allLines#</realtimeUrl>
  <services>
    <Service z:Ref="i1" />
    <Service z:Id="i5">
      <EntityKey z:Id="i6" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
        <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
        <a:EntityKeyValues>
          <a:EntityKeyMember>
            <a:Key>serviceId</a:Key>
            <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1150</a:Value>
          </a:EntityKeyMember>
        </a:EntityKeyValues>
        <a:EntitySetName>ServiceSet</a:EntitySetName>
      </EntityKey>
      <client z:Ref="i3" />
      <clientReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
        <a:EntityKey z:Ref="i4" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
      </clientReference>
      <journeyPreferredService />
      <newsArticles />
      <place />
      <primaryUrl>http://www.buses.co.uk/1A</primaryUrl>
      <relativePosition>2</relativePosition>
      <routes>
        <Route z:Id="i7">
          <EntityKey z:Id="i8" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
            <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
            <a:EntityKeyValues>
              <a:EntityKeyMember>
                <a:Key>routeId</a:Key>
                <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1236</a:Value>
              </a:EntityKeyMember>
            </a:EntityKeyValues>
            <a:EntitySetName>RouteSet</a:EntitySetName>
          </EntityKey>
          <POI />
          <POILines />
          <dateEffectiveFrom i:nil="true" />
          <dateEffectiveTo i:nil="true" />
          <isLive>true</isLive>
          <relativePosition>0</relativePosition>
          <routeDescription />
          <routeId>1236</routeId>
          <routeMap />
          <routeName>1A Mile Oak - Whitehawk</routeName>
          <route_stop />
          <route_stop_stop />
          <route_stop_timetable_stop />
          <service z:Ref="i5" />
          <serviceReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
            <a:EntityKey z:Ref="i6" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
          </serviceReference>
          <timetables />
          <validDestination>Whitehawk</validDestination>
        </Route>
        <Route z:Id="i9">
          <EntityKey z:Id="i10" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
            <a:EntityContainerName>busExpressEntities</a:EntityContainerName>
            <a:EntityKeyValues>
              <a:EntityKeyMember>
                <a:Key>routeId</a:Key>
                <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">1232</a:Value>
              </a:EntityKeyMember>
            </a:EntityKeyValues>
            <a:EntitySetName>RouteSet</a:EntitySetName>
          </EntityKey>
          <POI />
          <POILines />
          <dateEffectiveFrom i:nil="true" />
          <dateEffectiveTo i:nil="true" />
          <isLive>true</isLive>
          <relativePosition>0</relativePosition>
          <routeDescription />
          <routeId>1232</routeId>
          <routeMap />
          <routeName>1A Whitehawk - Mile Oak</routeName>
          <route_stop />
          <route_stop_stop />
          <route_stop_timetable_stop />
          <service z:Ref="i5" />
          <serviceReference xmlns:a="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
            <a:EntityKey z:Ref="i6" xmlns:b="http://schemas.datacontract.org/2004/07/System.Data" />
          </serviceReference>
          <timetables />
          <validDestination>Mile Oak</validDestination>
        </Route>
      </routes>
      <serviceAbbreviatedName />
      <serviceDescription>Whitehawk - County Hospital - City Centre - Hove - Portslade - Mile Oak</serviceDescription>
      <serviceIconUrl>http://www.buscms.com/uploadedFiles/brightonbuses/service-icons/1A.png</serviceIconUrl>
      <serviceId>1150</serviceId>
      <serviceName>1A</serviceName>
      <serviceNotes />
      <serviceText>Whitehawk - Mile Oak</serviceText>
      <serviceUrls />
    </Service> 
```

服务会重复。

然后我有这个代码来获取数据：

```
 void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) 
{ 
    if (e.Error == null) 
    { 
        if (e.Result != null) 
        { 
            XDocument doc = XDocument.Parse(e.Result); 
            XNamespace ns = "http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary";
            var routeNames = (from n in doc.Descendants(ns + "ArrayOfService") 
                             select new RootContainer

                             {

                                 Stops = (from s in n.Elements(ns + "Service").Elements(ns + "client").Elements(ns + "services").Elements(ns + "Service").Elements(ns + "Service")

                                          select new Stops

                                          {
                                              StopName = s.Element(ns + "serviceDescription").Value,
                                              serviceIconUrl = s.Element(ns + "Service").Element(ns + "serviceIconUrl").Value,
                                            //  NaptanCode = s.Element(ns + "Service").Element(ns + "serviceIconUrl").Value,

                                             // StopId = s.Element(ns + "stop").Element(ns + "stopId").Value 

                                          }).ToList() 
                             }).Single();

            listBox1.ItemsSource = routeNames.Stops; 
```

它在 xmal 页面中的绑定是这样的：

```
 <ListBox x:Name="listBox1"  ScrollViewer.VerticalScrollBarVisibility="Disabled"  Foreground="Red" Height="160" VerticalAlignment="Bottom" Margin="-10,0,10,377" Grid.Row="1">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <!-- <TextBlock Text="Bus Stops: "/>-->
                    <TextBlock Text="{Binding StopName}"/>
                    <!--   <TextBlock Text="Timetables: "/>-->
                      <TextBlock Text="{Binding serviceIconUrl}"/>                       
                   <!--   <TextBlock Text="{Binding StopId}"/>-->
                    <TextBlock Text=" "/>
                </StackPanel>
            </DataTemplate>

        </ListBox.ItemTemplate>
    </ListBox> 
```

为什么我没有得到回应？我知道这很简单，只是找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:20:07.733

您的 LINQ 查询最后包含太多`Service`元素，无法找到。

目前是：

```
n.Elements(ns + "Service")
 .Elements(ns + "client")
 .Elements(ns + "services")
 .Elements(ns + "Service")
 .Elements(ns + "Service") 
```

它应该是：

```
n.Elements(ns + "Service")
 .Elements(ns + "client")
 .Elements(ns + "services")
 .Elements(ns + "Service") 
```

# javascript - Web应用煎茶触摸错误

> ID：15072835
> 
> 赞同：0
> 
> 时间：2013-02-25T17:31:42.803
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我在 Sencha Touch 中这部分 JavaScript 代码有一些问题，不知道如何解决。

```
new Ext.application({
  name: 'TouchStart',
  launch: function() {    
    this.viewport = new Ext.Panel({
      fullscreen: true,
      bodyPadding: 5,
      dockedItems: [            {
        dock : 'top',
        xtype: 'toolbar',
        title: 'Touch Start'
      }, {
        dock : 'top',
        xtype: 'toolbar',
        items: [{
            text: 'Hello Button'
        }]
      }],    
      html: 'Hello Panel'
    });
  }
}); 
```

控制台显示：

```
This.viewport = new Ext.Panel({
> Uncaught TypeError: undefined is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:48:53.447

萨拉姆，您必须将代码更改`Ext.Panel`为 `Ext.create('Ext.Panel',...........`

# internationalization - AngularJS：i18n 和复数

> ID：15072841
> 
> 赞同：0
> 
> 时间：2013-02-25T17:31:58.467
> 
> 标签：internationalization, angularjs

[在这里查看](https://github.com/angular/angular.js/blob/master/src/ngLocale/angular-locale_ca-es.js)西班牙语中的复数部分，例如：

我看到 var PLURAL_CATEGORY = {ZERO: "zero", ONE: "one", TWO: "two", FEW: "few", MANY: "many", OTHER: "other"}; 显然，一切都是英文的

谁能解释这是否是一个错误？

非常感谢

里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T23:24:27.763

这是我做 i18n 工作的方式，它似乎工作得很好！它基于一组在运行时初始化的本地化资源文件。底部是我如何使用这种方法处理多元化。

### I18n 模块保存字符串 id 映射和参数插入

```
.factory('I18n', ['$http', 'User', function($http, User) {
    // Resource File
    var LANG_FILE;

    // Fetch Resource File
    function init() {
        return $http.get('resources/locales/' + User.locale + '.json')
            .then(function(response) {
                LANG_FILE = response.data;
            });
    }

    function lang(stringId, params) {
        var string = LANG_FILE[stringId] || stringId;

        if (params && params.length) {
            for (var i = 0; i < params.length; i++) {
                string = string.replace('%' + (i + 1), params[i]);
            }
        }

        return string;
    }

    return {
        init: init,
        lang: lang
    };

}]); 
```

这可以使用 .run 块初始化

```
.run(['I18n', function(I18n) {
    I18n.init();
}]); 
```

并在任何地方使用来翻译这样的字符串

```
.controller(['$scope', 'I18n', function($scope, I18n) {
    $scope.title = I18n.lang(some_string_id);
}]); 
```

### 自定义 i18n 指令来处理一次性翻译

```
.directive('i18n', ['I18n', function(I18n) {
    return {
        restrict: 'A',
        scope: {},
        link: function(scope, $el, attrs) {
            $el[0].innerHTML = I18n.lang(attrs.i18n);
        }
    };
}]); 
```

哪个可以这样使用。

```
<div i18n="some_string_id"></div> 
```

### 自定义 PLUALIZE 指令，匹配资源文件中的字符串 ID，并将计数作为参数。

```
.directive('pluralize', ['I18n', function(I18n) {
    return {
        restrict: 'A',
        scope: {
            count: '='
        },
        link: function($scope, $el, attrs) {
            var when  = JSON.parse(attrs.when)
              , param = [$scope.count];
            if (when[$scope.count]) {
                $el[0].innerHTML = I18n.lang(when[$scope.count], param);
            } else {
                $el[0].innerHTML = I18n.lang(when['other'], param);
            }
        }
    };
}]); 
```

并且可以这样使用。

```
<div pluralize count="{{obj.count}}" when="{1:'single_item','other': 'multiple_item'}"></div> 
```

### 字符串资源文件将位于 resources/locales/en-US.json，看起来像这样。

```
{
    some_string_id: 'This is in English',
    single_item: '%1 item',
    multiple_item: '%1 items'
} 
```

其他语言环境将具有相同的字符串 ID，但具有不同的翻译文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:42:28.207

通过浏览代码，我可以看到它是一组简单的复数规则。[每个语言环境](https://github.com/angular/angular.js/blob/master/src/ngLocale/angular-locale_fr-fr.js)都有这个常数。所以不，这不是一个错误。

# php - Virtuemart 2 - 将产品图片添加到“添加到购物车”-弹出窗口

> ID：15072842
> 
> 赞同：0
> 
> 时间：2013-02-25T17:32:01.080
> 
> 标签：php, javascript, joomla, virtuemart

我现在到处都在寻找这个；）

我想将产品图片添加到弹出窗口中，但我不知道如何实现这一点！我一直在寻找几个小时和几个小时，然后尝试自己编写代码，但它不起作用。

所以现在我正在寻求帮助......如果有人对此有一些想法，请告诉我。Afaik 网上有更多的人希望看到“添加到购物车”弹出窗口，其中提供了更多信息。

真诚的托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:06:40.443

我最近自己在一个网站上自定义了添加到购物车弹出窗口。您需要编辑的文件是 components/com_virtuemart/controllers/cart.php （如果我没记错的话，该函数称为 addJS）。

您可以在此处找到 VirtueMart 的 API 文档：http://docs.virtuemart.net/api-vm2/[但是](http://docs.virtuemart.net/api-vm2/)我编写了自己的插件来获取 VM 数据。然后，您可以只使用标准 PHP，而不是深入了解 VM API。

如果你决定按照我的方式来做，你可以从你的插件中调用自定义类并像这样输出图像：

```
$cart_image = plgMyCoolPlugin::_getImage($this->product->virtuemart_product_id);
echo '<img src='.$cart_image.'/>'; 
```

请记住，如果您不将其设为系统插件，则需要导入您的插件类型：

```
JPluginHelper::importPlugin( 'mynewplugintype' ); 
```

这是我在插件中使用的功能：

```
 function _getImage($id)
    {       
        $db   =& JFactory::getDBO();    
        $sql  = "   SELECT
                            b.`file_url`
                    FROM
                            ".$db->nameQuote('#__virtuemart_product_medias')." AS a
                    INNER JOIN 
                            ".$db->nameQuote('#__virtuemart_medias')." AS b ON a.`virtuemart_media_id` = b.`virtuemart_media_id`  
                    WHERE
                            a.".$db->nameQuote('virtuemart_product_id')." = ".$id."
                    AND
                            b.".$db->nameQuote('file_mimetype')." = 'image/jpeg'
                    AND
                            b.".$db->nameQuote('file_type')." = 'product'
                    AND
                            b.".$db->nameQuote('file_is_forSale')." = '0'";

        $query = $db->setQuery($sql);
        $row  = $db->loadResultArray();
        if($db->getErrorNum()) {
            JError::raiseError( 500, $db->stderr());
        }
        if(empty($row)) $row[] = JURI::base().'images/defaultimage.jpg';
        return $row;
    } 
```

希望这可以帮助 ：）

# file - resolveLocalFileSystemURI 错误代码 5 windows phone 7 phonegap

> ID：15072843
> 
> 赞同：5
> 
> 时间：2013-02-25T17:32:04.940
> 
> 标签：file, cordova, windows-phone-7, camera, uri

我已经尝试实现这项工作 1.**拍摄照片** 2.**从保存的地方获取照片** 3.将照片**读取为 base64**

我遵循了这种方法：

```
var cameraOptions = {};
function capturePhoto() {
    console.log("capture photo");
    cameraOptions = { quality: 70, destinationType: Camera.DestinationType.FILE_URI, sourceType: Camera.PictureSourceType.CAMERA, saveToPhotoAlbum: true };
    doIt();
}
function doIt() {
    navigator.camera.getPicture(onCameraSuccess, onCameraFail, cameraOptions);
}
function onCameraSuccess(imageURI) {
    console.log("Camera Success");

    $('#MokhalfaPhotoLocation').val(imageURI);
    console.log("Image URI: " + imageURI);
    window.resolveLocalFileSystemURI(imageURI, onResolveImageSuccess, onFail); //get the file from the physical path...
}
  function onResolveImageSuccess(fileEntry) {
    fileEntry.file(gotFile, onFail);
}
function gotFile(file) {
    readDataUrl(file);
}
function readDataUrl(file) {
    console.log("read file as dataUrl");
    var reader = new FileReader();
    reader.onloadend = function (evt) {
        console.log("Read as data URL");
        window.localStorage.setItem("mokhalfaPhotoURL", evt.target.result);
 };
    reader.readAsDataURL(file);
} 
```

这条链在 CameraSuccess 之前工作正常，然后它就失败了

```
window.resolveLocalFileSystemURI(imageURI, onResolveImageSuccess, onFail); 
```

它进入了 onFail 事件，错误代码 = 5

顺便说一句，这段代码在 Android 上运行良好，但问题出在 Windows Phone 7 上，有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T23:34:46.110

我最近遇到了这个错误。解决方案非常简单:)

```
function onCameraSuccess(imageURI) {
    console.log("Camera Success");

    $('#MokhalfaPhotoLocation').val(imageURI);
    console.log("Image URI: " + imageURI);
    window.resolveLocalFileSystemURI("//" + imageURI, onResolveImageSuccess, onFail); //get the file from the physical path...
} 
```

如果您提醒 imageURI，它应该看起来像 (/CachedImagePath/etcetc/)，因此 window.resolveLocalFileSystemURI 不知道在哪里解析，因此通过在 URI 前面添加 // 它会在正确的路径中查找。

干杯，我会将此问题发布到他们的错误跟踪器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T12:48:45.923

此问题已解决。请参阅“ [https://issues.apache.org/jira/browse/CB-2736](https://issues.apache.org/jira/browse/CB-2736) ”。但是，在我的 Windows 8 Phone 上，我无法访问要在 HTML IMG 标记中显示的照片文件。我已经尝试过 fileEntry.fullPath、fileEntry.toURL() 和 fileEntry.toNativeURL()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T06:18:59.627

你应该尝试这样的事情

```
$window.resolveLocalFileSystemURL("file://" + videoURI, function (fileEntry) {
   console.log('Success: '+fileEntry.name);
   fileEntry.getMetadata(function(metadata) {
      if(metadata.size>20971520){
          $ionicPopup.alert({
              template: '<h5>Lo sentimos <i class="icon ion-sad-outline"></i> , el video sobre pasa el limite de peso</h5>',
              title: 'Limite de peso',
          });
       }else{

       }
    });
}, function (err) {
      console.log(err);
}); 
```

# emacs - 流浪模式下的emacs错误

> ID：15072845
> 
> 赞同：3
> 
> 时间：2013-02-25T17:32:17.163
> 
> 标签：emacs, tramp

我已经使用 emacs 设置了流浪模式，一直在使用该模式一段时间，最近我开始出现以下错误，我无法打开任何文件。

```
Loading /etc/emacs/site-start.d/50sml-mode.el (source)...done [3 times]
For information about GNU Emacs and the GNU system, type C-h C-a.
Tramp: Opening connection for toolserver using scp...
Tramp: Sending command `exec ssh   -e none toolserver'

Tramp: Waiting for prompts from remote shell
Tramp: Sending command `exec ssh   -e none toolserver'
Tramp: Found remote shell prompt on `toolserver'
Tramp: Opening connection for toolserver using scp...done
byte-code: Couldn't find exit status of `test -e /home/FILE_NAME.py' 
```

我已将实际文件重命名为`FILE_NAME.py`

**所采取的行动：**

我删除了 .tramp_history 文件，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T15:13:51.337

*   尝试改用`scpx`or`sshx`协议。
*   尝试`(setq tramp-verbose 6)`检查输出缓冲区以查看实际发生的情况（`C-h v tramp-verbose`查看级别），然后从那里继续。
*   有时，是因为我`ssh-agent`的死了。重新启动它可以解决问题。
*   有时是因为 TRAMP 仍然认为该连接在不可用时仍然可用。发生这种情况时，我会`M-x ibuffer * * D RET`杀死所有 TRAMP 缓冲区，以便重新开始。

如果这些都不起作用，请尝试使用 melpa 的最新 TRAMP 或重新安装它。TRAMP 开箱即用，效果很好，也许您调整了一些破坏它的东西？

# ruby-on-rails - 服务器已经在 Rails 中运行

> ID：15072846
> 
> 赞同：159
> 
> 时间：2013-02-25T17:32:26.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, command-prompt, webrick

当我使用`rails s`命令启动 Rails 服务器时，它显示`A server is already running. Check C:/Sites/folder/Pids/Server.pids`

当我打开文件时，它只输出一个 4 位数字，那么我该如何解决这个问题？

**供参考**

1.  这次没有运行 Rails cmd 的其他实例。
2.  检查任务管理器，但只`cmd.exe`显示没有其他进程正在运行。（使用 Windows）。

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-04-18T06:26:14.293

**TL;DR 只需运行此命令即可杀死它**

```
sudo kill -9 $(lsof -i :3000 -t) 
```

**根本原因：** 因为 PID 被锁定在一个文件中，并且 Web 服务器认为如果该文件存在则意味着它已经在运行。通常，当 Web 服务器关闭时，该文件会被删除，但在某些情况下，不会发生正确删除，因此您必须手动删除该文件 **新解决方案**

当你运行**rails s**

=> 启动 WEBrick

=> Rails 4.0.4 应用程序开始开发`http://0.0.0.0:3000`

=> 运行`rails server -h`以获得更多启动选项

=> Ctrl-C 关闭服务器

**服务器已经在运行。检查 /your_project_path/tmp/pids/server.pid。** 退出

所以把你的路径放在这里 /your_project_path/tmp/pids/server.pid

并删除此**server.pid**文件：

```
rm /your_project_path/tmp/pids/server.pid 
```

**或如果您的服务器已分离，请遵循以下准则：**

如果您使用命令“rails -d”分离了您的rails服务器，那么，

使用命令删除 rails detached server

```
ps -aef | grep rails 
```

**或通过此命令**

```
sudo lsof -wni tcp:3000 
```

然后

```
kill -9 pID 
```

**或使用此命令**

通过正在运行该程序的端口名称查找并终止进程。对于 3000 替换您的程序正在运行的端口。

```
sudo kill -9 $(lsof -i :3000 -t) 
```

**旧解决方案：**

```
rails s -p 4000 -P tmp/pids/server2.pid 
```

您还可以找到这篇文章以获取更多选项 [Rails Update to 3.2.11 中断运行多个服务器](https://stackoverflow.com/questions/14329370/rails-update-to-3-2-11-breaks-running-multiple-servers)

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2013-02-25T17:34:00.127

删除文件：C:/Sites/folder/Pids/Server.pids

*解释* 至少在 UNIX 领域，我们通常在 server.pid 之类的文件中跟踪进程 ID (pid)。我认为这在这里做同样的事情。该文件可能是崩溃遗留下来的。

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2014-03-13T18:58:22.760

```
lsof -wni tcp:3000 
```

然后你应该看到 ruby​​ 进程，你可以运行

```
kill -9 processid 
```

你现在应该很好地运行这个过程

```
rails s thin 
```

运行多个进程似乎不是一个好主意，从我读过的内容来看，很多人都同意。不幸的是，我注意到许多内存泄漏与rails，所以我无法想象有两个进程在运行。我知道随着时间的推移，我的页面刷新速度越来越慢，因为数据存储在内存中。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2015-02-24T12:26:24.230

```
kill -9 $(lsof -i tcp:3000 -t) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-03-27T13:38:00.663

你可以通过杀死它来摆脱它：

```
kill -9 $(lsof -i tcp:3000 -t) 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-06-08T03:05:23.147

```
$ lsof -wni tcp:3000

# Kill the running process
$ kill -9 5946

$ rm tmp/server.pids 
```

工头启动等启动服务

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-11-16T11:51:50.263

`gem install shutup`

然后进入 Rails 项目的当前文件夹并运行

`shutup`# 这将杀死当前正在运行的 Rails 进程

您可以随时使用命令“shutup”

免责声明：我是这颗宝石的创造者

注意：如果您使用的是 rvm，请全局安装 gem

```
rvm @global do gem install shutup 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-08-28T11:19:55.770

当您终止服务器进程并且 pid 文件未更新时，就会发生这种情况。最好的解决方案是删除文件**Server.pid**。

使用命令

> `rm <path to file Server.pid>`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-20T03:24:07.610

可能您通过以下方式暂停了服务器：`^Z`。

输出的四个数字`vim C:/Sites/folder/Pids/Server.pids`是进程ID。

您应该`kill -9 processid`将进程 ID 替换为 vim（或其他编辑器）输出的 4 个数字。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-09-17T23:48:41.710

在 Windows Rails 5.2 上，删除此文件

```
c:/Sites/<your_folder>/tmp/pids/server.pid 
```

并运行

```
rails s 
```

再次。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-11-03T08:18:37.517

如果您在 Windows 上，您只需执行 ***“rails restart”***一步 ，然后再次输入 ***“rails s”*** 即可。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-01-16T08:31:39.257

跑：

在 Ubuntu/Linux 中

```
 sudo rm /var/www/html/rails/WBPOCTEST/tmp/pids/server.pid 
```

或者

```
 pkill -9 ruby 
```

或者

```
lsof -wni tcp:3000

kill -9 pid 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-09-06T23:20:32.877

**跑：** `fuser -k -n tcp 3000`

这将终止在默认端口 3000 上运行的进程。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-11-28T03:49:22.727

> 只需打开那个 C:/Sites/folder/Pids/Server.pids 并复制那个 4 位数的值。那个 4 位数的值只不过是一个 PID，你需要杀死它来停止已经运行的进程。

*然后停止进程使用下面的命令*

```
 kill -9 <pid> 
```

once that already running process get stopped then hit

`rails s` to start the rails server

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-28T21:58:01.797

我刚刚遇到这个问题并尝试将其设置为不同的端口，但我唯一需要做的就是删除我的`[app_directory]/tmp/pids/server.pid`，一切都很好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-10T10:12:47.557

On Ubuntu :- `sudo kill -9 $(lsof -i :3000 -t)`

where, `3000 is port number`

Works for me....

For older versions :-

`rails s -p 3000 -P tmp/pids/server2.pid`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-07T09:21:41.867

my docker container has no `lsof`. Try `sudo kill -9 $(netstat -ano -p tcp | grep :3000 | awk '{ print $7 }' | grep -Po '^[\d]+')`

# jquery - 我似乎无法通过 id[array] 选择动态生成的 tr

> ID：15072849
> 
> 赞同：1
> 
> 时间：2013-02-25T17:32:34.860
> 
> 标签：jquery, select, dynamic

我有一组由 ajax 调用 php 脚本生成的元素。

```
<tr id="rem[313]">...</tr>
<tr id="rem[345]">...</tr> 
```

我的一个功能需要通过 id 删除某个 tr。

我已经尝试了一切，但似乎无法选择该死的东西

```
function remove_it(x){
$('#rem['+x+']').remove();
$(this).closest('tr').remove; // this i fire from the button click
} 
```

测试我正在使用的选择 .length 并且它都返回零

```
function remove_it(x){
alert($('#rem['+x+']').live().length;
alert($('#rem['+x+']').length);
alert($('#rem['+x+']').on().length);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:35:20.537

要选择此元素：

```
<tr id="rem[313]">...</tr> 
```

采用：

```
$('#rem\\[' + x + '\\]') 
```

[简单的 JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/9ATd3/2)。

或者，您可以简单地使用：

```
$('tr[id^="rem"][id*="' + x + '"]'); 
```

[简单的 JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/9ATd3/1/)。

# c# - 由于“不允许与派生类进行用户定义的转换”，在我的情况下是否有一个不错的选择？

> ID：15072851
> 
> 赞同：2
> 
> 时间：2013-02-25T17:32:36.783
> 
> 标签：c#, .net

我的测量应用程序有一个继承自 Matrix 类的 Vector 类，它公开了适用于 1D 矢量类型矩阵的操作。可以预见，即使底层数组不是一维的，也有人会尝试将矩阵向下转换为向量。然后他们不会知道有问题，直到在其中一个 Vector 操作中发生异常。但是，如果我尝试实施演员表，即：

```
public static explicit operator Vector3(Matrix m)
{
   if (m.Array.GetLength(0) != 3 && m.Array.GetLength(1) != 1)
       throw new InvalidCastException("The matrix dimensions are invalid.");
   return new Vector3(m[0, 0], m[1, 0], m[2, 0]);
} 
```

我得到了标题的例外。有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:44:27.647

您的类型层次结构有问题。`Vector`不应该从`Matrix`一开始就继承——这是对经典[圆/椭圆问题](http://en.wikipedia.org/wiki/Circle-ellipse_problem)的另一种看法。

此外，在当前层次结构上将a 强制转换`Matrix`为 a是向下强制转换。`Vector`向下转换永远不能保证安全，因此您的用户应该*预料*到转换可能会失败。你不应该试图掩盖这一点，即使你可以做到。

最后，没有什么能阻止您提供一种`AsVector3()`方法来完全执行建议的转换运算符所做的事情。

# logging - 在内部库中进行日志记录的 log4j 最佳实践（双重日志记录）

> ID：15072855
> 
> 赞同：0
> 
> 时间：2013-02-25T17:32:53.673
> 
> 标签：logging, spring-mvc, log4j

这是我的设置：

*   WEBAPP：Spring MVC Web 应用程序
*   LIBRARY：我在 WEBAPP 中使用的内部库

在 WEBAPP 中，我在“基本”控制器中定义了一个异常处理程序，如下所示：

```
@ExceptionHandler(Exception.class)
@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
public final ModelAndView handleException(
        final Exception e,
        final HttpServletRequest request)
{
    // some stuff...
    LOG.error(message, e);
    // some more stuff...
} 
```

其中 LOG 是我在类中静态定义的 log4j 记录器。

在 LIBRARY 中，我将任何异常记录为错误，然后将它们重新抛出给客户端。在这种情况下，客户端是WEBAPP。现在，如您所见，每次发生错误时，我都有 2 个日志条目！一个用于 LIBRARY，一个用于 WEBAPP。

我不想删除 WEBAPP 的异常处理程序，因为异常可以在 LIBRARY 之外引发，我想在向 WEBAPP 客户端返回 500 之前记录它们。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:47:41.193

我采取的方法是，如果你打算在那个地方做一些事情，你应该只捕获一个异常。记录异常没有做任何事情。我的建议是不要登录您的图书馆。只需让异常正常冒泡，因为听起来您并没有尝试在库中做任何特别的事情。

# algorithm - 在将新边添加到图中后查找新的最小生成树

> ID：15072856
> 
> 赞同：7
> 
> 时间：2013-02-25T17:32:54.357
> 
> 标签：algorithm, graph-algorithm, minimum-spanning-tree, kruskals-algorithm

令 G = (V, E) 为加权、连通且无向图，令 T 为最小生成树。令 e 为不在 E 中的任何边（并且具有权重 W(e)）。证明或反证：TU {e} 是一个边集，包含 G' = (V, EU {e}) 的最小生成树。

好吧，这对我来说听起来很真实，所以我决定证明这一点，但我每次都卡住了......

例如，如果 e 是具有最小权重的新边，谁能向我们保证 T 中的边没有以错误的方式选择，这会阻止我们在没有 E 中其他边的“帮助”的情况下获得新的最小权重-T？

我会很感激任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:18:00.613

让*[a(1), a(2), ..., a(n-1)]*是从*E中选择的边序列，以通过 Kruskal 算法构造**G*的MST （按照它们被选择的顺序 -*权重（a (i)) <= 重量(a(i + 1))* )。

现在让我们考虑一下 Kruskal 算法在输入*E' = EU {e}*时的表现。让*i = min{i: weight(e) < weight(a(i))}*。首先算法决定选择边*[a(1), ..., a(i - 1)]*（*e*还没有被处理，所以它的行为是一样的）。然后它需要决定*e* - 如果*e*被删除，*E' 的*解决方案将与*E*相同。所以让我们假设算法选择的前*i*个边是*[a(1), ..., a(i - 1), e]* - 我将把这个新序列*称为 a'*。算法继续 - 只要其以下选择（对于 j > i）满足*a'(j) = a(j - 1)*我们很酷。有两种情况会打破如此大的连胜（假设在索引*k + 1*处出现连胜）：

1) 算法选择一些不在*T*中的边 e' ，并且*weight(e') < weight(a(k+1))*。现在*一个'*序列是：

*[a(1), ..., a(i-1), e, a(i), a(i+1), ..., a(k-1), a(k), e']*

但是，如果可以将*e'*附加到此列表，则也可以将其附加到*[a(1), ..., a(k-1), a(k)]*。*但是 Kruskal 的算法在为G*寻找 MST 时并没有这样做。这导致矛盾。

2）礼貌选择的算法：

*[a(1), ..., a(i-1), e, a(i), a(i+1), ..., a(k-1), a(k)]*

但决定放弃边缘*a(k+1)*。但是如果*e*不存在于列表中，算法将决定附加*a(k+1)*。这意味着在图*(V, {a(1), ..., a(k)}) 中，*边*a(k+1)将连接与边**e*相同的组件。这意味着在考虑*G*和*G'的算法边**a(k + 1)*之后，划分为连通分量（由一组选定边确定）是相同的。因此，在处理后，*a(k+1)*算法在两种情况下都将以相同的方式进行。

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:46:05.910

当将一条边添加到图中而不添加节点时，该边会在图的最小生成树中创建一个循环，循环长度可能从 2 到 n 变化，其中 n = 图中的节点数。T = G 的最小生成树现在要找到 (T + added edge) 的 MST，我们只需从该循环中删除一条边 .. 所以删除具有最大权重的边。

所以 T' 总是来自 TU {e}。

如果您认为这并不能证明新的 MST 将是 TU {e} 的边集，那么请分析 Kruskal 算法以获取新图。即，如果 e 具有最小权重，则必须根据 Kruskal 算法为 MST 选择它，如果它是最小的，则不能从循环中删除。***

# ssl - 将 Mailchimp 嵌入表单与 SSL 网站集成

> ID：15072858
> 
> 赞同：6
> 
> 时间：2013-02-25T17:32:57.387
> 
> 标签：ssl, mailchimp

我正在尝试将 Mailchimp 注册表单与我的网站集成。我在 Mailchimp 中生成了表单并将嵌入代码复制到我的站点。问题是我的网站有一个 SSL 证书，当我的潜在客户尝试注册我的邮件列表时，它会给他们一个安全警告（在 Firefox 中）说：

“尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。

您确定要继续发送此信息吗？”

有什么办法可以避免收到此警告？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-24T07:00:54.720

使用 mailchimp 提供的默认嵌入代码时，我也面临同样的问题，但这不适用于 SSL 站点。

所以在谷歌搜索解决方案后，我找到了这个链接：

阻止 MailChimp 表单破坏您的 SSL

[https://www.ostraining.com/blog/coding/mailchimp-forms-ssl/](https://www.ostraining.com/blog/coding/mailchimp-forms-ssl/)

这不是一个大问题，只需将 url 从 list-manage1.com 更改为“list-manage.com”

只需在从 list-manage1.com 中删除 1 后进行测试，然后它就可以正常工作了。

它也适用于 post-json 嵌入 url。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T17:35:07.140

简短的回答。不

更长的答案。不，你被那个警告困住了。您正在从安全站点发布到不安全站点，用户将收到此通知。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-09T19:58:46.757

它比简单的嵌入工作更多，但您可以使用支持 SSL 的 MailChimp API 来完成此操作。请参阅API 文档中标题为[HTTPS / 安全连接的部分。](http://apidocs.mailchimp.com/api/2.0/#https-secure-connections)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-29T11:34:43.360

您可以编辑 Mailchimp 提供的嵌入表单，以便它在操作 url 中使用 https 而不是 http。

# javascript - 显示动画 GIF 后显示消息

> ID：15072859
> 
> 赞同：0
> 
> 时间：2013-02-25T17:32:59.190
> 
> 标签：javascript, onclick, gif, animated

以下是我的代码，我已经可以使用动画 GIF，但是当 GIF 被禁用时，我需要在 5 秒后显示一条消息或另一张图片。提前致谢

**JavaScript**

```
<script type= "text/javascript">
function show() {
  document.getElementById("processing").style.display="block";
  setTimeout("hide()", 5000);  // 5 seconds
}

function hide() {
  document.getElementById("processing").style.display="none";
}
</script> 
```

**HTML**

```
<p>
  <input type="button"  id = "submit" value="Make Transfer" class="submit_button" onclick= "show()" />
</p>
 <div id="processing" style="display:none;"><img src="images/processing.gif" id= "processing" alt="Processing transaction!" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:48:32.570

[http://jsfiddle.net/V4UU2/4](http://jsfiddle.net/V4UU2/4)

```
<style>
#processing, #message {
    display: none;
}
</style>

<p>
    <input type="button" id="submit" value="Make Transfer" class="submit_button" onclick="show()" />
</p>

<div>
    <img src="http://placehold.it/150x150" id="processing" alt="Processing transaction!"
    />
    <div id="message">My message.</div>
</div>

<script>
  function hide() {
    document.getElementById("processing").style.display = "none";
    document.getElementById("message").style.display = "block";
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:49:39.410

首先，您有两个具有相同 id 的项目`processing`。更改图像中的 id，并添加一个带有消息的 div

```
<p>
  <input type="button"  id = "submit" value="Make Transfer" class="submit_button" onclick= "show()" />
</p>
<div id="processing" style="display:none;">
  <img src="images/processing.gif" id="processing-img" alt="Processing transaction!" />
  <div id="processed-msg" style="display:none">Finished processing </div>
</div>

function hide() {
  document.getElementById("processing-img").style.display="none";
  document.getElementById("processing-msg").style.display="block";
} 
```

# sql - 使用 GETDATE() 的前周一/周日日期的标准语法

> ID：15072862
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:07.433
> 
> 标签：sql, sql-server-2012

这些看起来有点冗长，而且可能过于复杂。我可以简化和/或使它们更具可读性吗？

他们返回前一周的星期一和星期日的日期（作为整数类型）。

```
declare @sDate int = CONVERT(CHAR(8),DATEADD(wk, DATEDIFF(wk,0,GETDATE())-1, 0),112),
    @edate int = CONVERT(CHAR(8),DATEADD(wk, DATEDIFF(wk,0,GETDATE()), -1),112); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:38:30.313

根据我的经验，如果您出于演示以外的任何原因将日期转换为字符，那么您就犯了一个错误。此外 - 如果您调用 GetDate 两次，您应该期待不同的答案。

```
DECLARE
  @Now datetime,
  @WeekStart datetime,
  @LastWeekStart datetime,
  @LastWeekEnd datetime

SET @Now = GetDate()
SET @WeekStart = DateAdd(wk, DateDiff(wk, 0, @Now), 0) --standard time trimmer
SET @LastWeekStart = DateAdd(wk, -1, @WeekStart)
SET @LastWeekEnd = DateAdd(dd, -1, @WeekStart)

SELECT @Now, @WeekStart, @LastWeekStart, @LastWeekEnd 
```

另请注意，有一个 sql 设置控制 sql server 认为一周从哪里开始，因此根据该设置，此代码可能不会给出星期一->星期日。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:40:35.507

最*简单*的方法是使用[日历表](https://stackoverflow.com/a/5030686/562459)。日历表可能会将您的查询简化为这些方面的内容。

```
-- Select the previous Sunday. The right inequality operator depends
-- on exactly what *you* mean by "previous".
select max(calendar_date)
from calendar
where calendar_date < current_date
  and calendar_day_of_week = 'Sun'; 
```

# php - AJAX 重新提交整个页面但没有结果

> ID：15072864
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:10.290
> 
> 标签：php, javascript, ajax

首先让我说我是使用 AJAX 的新手，昨天才开始。

这是我的代码：

```
<?php

    if (isset($_POST['number1'],$_POST['operation'],$_POST['number2'])) {
        $number1    = trim(strip_tags($_POST['number1'])); 
        $number2    = trim(strip_tags($_POST['number2'])); 
        $operation  = $_POST['operation']; 

        if ($operation == "plus") {
            $answer = $number1 + $number2;
            $operation = "+";
        } 

        if ($operation == "minus") {
            $answer = $number1 - $number2;
            $operation = "&#8211;";
        } 

        if ($operation == "multiply") { 
            $answer = $number1 * $number2;
            $operation = "&#215;";
        } 

        if ($operation == "divide") { 
            $answer = $number1 / $number2;
            $operation = "&#247;";

        }

        $output = '<br /><center><div id="success"><span style="color: orange; font-size:   20px;">'.number_format($number1).'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; font-size: 24px; font-weight:bold;">'.$operation.'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: orange; font-size: 20px;">'.number_format($number2).'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: blue; font-size: 24px; font-weight:bold;">=</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: purple; font-size: 20px;">'.number_format($answer).'</span></div>
        ';

        echo $output;

        die();
    }

?>

    <form method="POST" id='calculatorForm'>
        <input type="number" name="number1" id="url" placeholder="Enter your first number" autofocus required />

        <br />

        <select name="operation" id="url" style="width:100%;">
            <option value="operation">Select A Operation:</option>
            <option value="plus">Plus</option> 
            <option value="minus">Minus</option> 
            <option value="multiply">Multiply</option> 
            <option value="divide">Divide</option> 
        </select>

        <br />

        <input type="number" name="number2" id="url" placeholder="Enter your second number" required />

        <input type="submit" class="enter" id="submit" name="submit" value="Calculate!">

        <br />

        <span style="font-size:40px;color: purple;font-wight: bold;">Result: <span id='result'>0</span></span>
    </form>

    <script>
        $('#calculatorForm').submit(function(){
            var num1 = $('input[name="number1"]').val();
            var oper = $('select[name="operation"]').val();
            var num2 = $('input[name="number2"]').val();
            $.ajax({
                type: "post",
                data: {number1: num1, operation: oper, number2: num2},
                success: function(data){
                    $('#result').html(data);
                }
            });
            return false;
        });
    </script> 
```

当我尝试使用表单提交在我的页面上运行此代码时，它会在我的表单下再次给我整个页面，并且没有计算我输入的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:49:46.630

发生这种情况是因为您正在使用 AJAX 再次抓取整个页面（在 ajax 请求中没有提供 URL）。

一种解决方案可能是将 PHP 分离到一个单独的文件中。然后使用ajax请求来获取...

JavaScript：

```
$.ajax({
    url: 'calc.php',
    type: 'post',
    data: {number1: num1, operation oper, number2: num2},
    success: function(data) {
        $('#result').html(data);
    }
}); 
```

仅将表单保留在其所在页面上。

制作一个单独的 PHP 页面，名为 calc.php（或其他），上面有 PHP 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:41:46.403

Ajax 函数应该是这样的

```
 var data= $('#calculatorForm').serialize();    
   $.ajax({
        url:"Page.php",
        type: "post",
        data: data,
        success: function(data){
            $('#result').html(data);
        }
    });` 
```

你错过了网址

# javascript - 知道为什么导航属性为空

> ID：15072865
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:20.750
> 
> 标签：javascript, breeze

假设我有可能有也可能没有订单行的订单实体（导航集合）。

当我点击一个订单时，会显示订单行。

有没有办法知道订单行的导航集合是空的，因为没有订单行还是因为它们不在缓存中（它们从未从数据库中获取）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T20:03:31.640

从 Breeze 1.4.16 开始，添加了两个新方法：*EntityAspect.isNavigationPropertyLoaded*和*EntityAspect.markNavigationPropertyLoaded。* 这些都记录在微风 api 文档中。您正在寻找的具体方法记录在这里：

[http://www.breezejs.com/sites/all/apidocs/classes/EntityAspect.html#method_isNavigationPropertyLoaded](http://www.breezejs.com/sites/all/apidocs/classes/EntityAspect.html#method_isNavigationPropertyLoaded)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:15:50.863

这是一个很好的问题，但我们还没有很好的答案。我们正在考虑为微风添加一些机制，以允许您询问给定实体上的给定导航属性是否已经加载。

但就目前而言，最好的办法是通过将自己的属性添加到记录加载了哪些 navProperties 的 entityAspect 来自己跟踪这一点。您将在每次查询后执行承诺解析回调期间更新此属性。可以通过检查刚刚执行的查询来确定涉及哪些属性的上下文。（查询在回调中可用）。

一旦我们有**更好**的答案，我会回复。

# tsql - 无法绑定多部分标识符“...”

> ID：15072866
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:21.687
> 
> 标签：tsql, subquery, identifier

运行此查询时出现错误（无法绑定多部分标识符“f.FormID”。）：

```
select f.FormID, f.Title, fv.UserName
    from Forms f join (
        SELECT        FormID
            FROM            Reports
            WHERE        (ReportID = @ReportID)
        UNION 
        SELECT        FormRelations.ForigenFormID
        FROM            FormRelations INNER JOIN
                                    Forms ON FormRelations.ForigenFormID = Forms.FormID
        WHERE        (FormRelations.PrimaryFormID =
                            (SELECT        FormID
                            FROM            Reports
                            WHERE        (ReportID = @ReportID)))
        ) ids
        on f.FormID = ids.FormID

    LEFT OUTER JOIN (select top 1 UserName, FormID from FormValues where FormID = f.FormID and UserName = @UserName) fv
        ON f.FormID = fv.FormID 
```

请有人帮助我:(

@蓝脚：

我想要这样的结果：

```
01304636-FABE-4A3E-9487-A14B012F9A61    item_1  1234567890
C0455E97-788A-4305-876A-A15000CFE928    item_2  1234567890
7719F37E-7021-4ABD-91ED-A15301830324    item_3  1234567890 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:39:09.963

如果您需要像这样在子查询中使用别名，您可能需要查看使用`APPLY`运算符：

```
select f.FormID, f.Title, fv.UserName
from Forms f 
join 
(
    SELECT        FormID
    FROM            Reports
    WHERE        (ReportID = @ReportID)
    UNION 
    SELECT        FormRelations.ForigenFormID
    FROM            FormRelations 
    INNER JOIN Forms 
        ON FormRelations.ForigenFormID = Forms.FormID
    WHERE        (FormRelations.PrimaryFormID = (SELECT        FormID
                                                 FROM            Reports
                                                 WHERE        (ReportID = @ReportID)))
) ids
    on f.FormID = ids.FormID
CROSS APPLY
(
    select top 1 UserName, FormID 
    from FormValues 
    where FormID = f.FormID 
        and UserName = @UserName
) fv 
```

或者您可以使用`row_number()`：

```
select f.FormID, f.Title, fv.UserName
from Forms f 
join 
(
    SELECT        FormID
    FROM            Reports
    WHERE        (ReportID = @ReportID)
    UNION 
    SELECT        FormRelations.ForigenFormID
    FROM            FormRelations 
    INNER JOIN Forms 
        ON FormRelations.ForigenFormID = Forms.FormID
    WHERE        (FormRelations.PrimaryFormID = (SELECT        FormID
                                                 FROM            Reports
                                                 WHERE        (ReportID = @ReportID)))
) ids
    on f.FormID = ids.FormID
LEFT JOIN
(
    select UserName, FormID,
        ROW_NUMBER() over(PARTITION by FormID, UserName order by FormID) rn  
    from FormValues 
    where UserName = @UserName
) fv
    on f.FormID = fv.FormID
    and fv.rn = 1 
```

# android - 可滚动绝对定位 div 中的相对定位元素在滚动时“落后”

> ID：15072867
> 
> 赞同：16
> 
> 时间：2013-02-25T17:33:22.633
> 
> 标签：android, html, css, cordova, mobile

我有一个 PhoneGap 应用程序，它显示一个很长的文本，其中包含我正在 Android 上测试的标题、表格和图像。

除了带有样式的元素之外，一切正常。`position:relative` 这些元素在滚动时“滞后”，这意味着如果我滚动页面，那么这些元素会在大约四分之一秒后开始和结束滚动。

将绝对 div 与相对子代以及子代与`overflow:auto`. 删除这些东西中的任何一个都可以修复错误，但我更愿意将它留在里面。尽管如果必须的话，我愿意删除表格并单独显示（如在对话框中）。

该错误仅出现在标准的 Android 浏览器（当然还有我的 PhoneGap 应用程序）上。到目前为止，我已经使用以下设备对其进行了测试：

> *   三星 Galaxy Nexus (4.1.1)
> *   三星盖乐世 S III (4.1.2)

任何帮助表示赞赏，但我更喜欢 HTML 和功能不变（或不太多）的解决方案。

![快速滚动后](../Images/305895986217f2def492ef4a146c1c20.png)

我创建了一个显示错误的[最小示例。](http://www.pnn.ch/temp/android-browser-bug.html)只需在您的 Android 上打开它并开始滚动，您应该会立即看到问题：

```
<!doctype html>
<html>
<head><meta name="viewport" content="initial-scale=1.0"></head>
<body style="margin:0">

<div style="position:absolute;overflow:auto;top:100px;bottom:100px;width:100%">

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a quam arcu. Duis ultrices mollis nibh ut hendrerit. Etiam a interdum metus. Integer volutpat, nibh laoreet euismod suscipit, libero sem iaculis lorem, ut hendrerit magna orci eu elit. Nulla eu ultricies libero. Nulla facilisi. Maecenas nec turpis vitae magna lobortis ornare sit amet ut lacus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc vestibulum lobortis orci, sit amet ornare dui congue nec. Morbi id magna at turpis auctor ultricies. Ut rhoncus quam augue, ut consectetur risus.</p>
  <div style="position:relative;background:red;">relative box<br>moves slower than the other text</div>
  <p>Fusce congue orci a nunc gravida sed pretium lorem convallis. Etiam hendrerit, ligula eget lobortis vestibulum, arcu sapien pharetra magna, auctor suscipit nisl tellus quis lacus. Cras id elit at ante mollis venenatis. Donec eu sollicitudin odio. Aliquam erat volutpat. Cras et tortor sed mi faucibus sagittis non quis metus. Morbi mauris ante, posuere vel rutrum id, mattis id enim. Morbi purus quam, euismod facilisis blandit quis, commodo at justo. Aliquam in fermentum nibh. Curabitur pharetra blandit risus sit amet tristique. Suspendisse potenti. Curabitur interdum eleifend justo, et dapibus justo volutpat sed.</p>          
  <div style="overflow:auto">
    <table>
      <tr><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th></tr>
      <tr><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td></tr>
    </table>
  </div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-06T17:01:10.183

简而言之，你所遭受的疾病是常见的并且有记录的。`overflow:auto`在桌面和移动浏览器中存在或`overflow:scroll`遭受绘制/重排/渲染问题的元素。更复杂的是，移动浏览器（iOS 和 Android 上的 webkit）中存在的问题是，如果它们“离屏”，则不渲染相对和绝对元素。当它们在屏幕上滚动时，这可能会导致延迟。

您可以应用一些“hack”垫片：

```
element {
    -webkit-overflow-scrolling: touch;
}

element > * {
    -webkit-transform: translateZ(0px);
}

element > * {
    -webkit-transform: translate3d(0,0,0);
} 
```

给你一些阅读：

*   [http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/](http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/) [http://developersday.wordpress.com/2012/08/07/scrollable-divs-rendering-问题-with-css-overflow-auto-or-scroll-iosandroid/](http://developersday.wordpress.com/2012/08/07/scrollable-divs-rendering-issues-with-css-overflow-auto-or-scroll-iosandroid/)

还有一个我从某处复制到笔记中的片段，现在找不到来源：

> 尤其是在严重依赖滚动的网站上，您可能会发现您的主要内容依赖于溢出：滚动。这是一个真正的挑战，因为这种滚动不会以任何方式进行 GPU 加速，因此每当用户滚动时都会重新绘制内容。您可以使用正常的页面滚动（溢出：可见）和位置：固定来解决此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T06:18:38.023

我认为您有两个要解决的问题。滑到下面的文字和滞后的滚动速度？

我不确定你想用版权符号做什么，但我不会有一个`line-height`小于`1`或`1em`。尝试使用父元素并设置跨度的样式。您可能可以`display:inline-block; vertical-align: middle;`在跨度上使用以获得所需的效果。

```
<p><span>&copy;</span>Some text</p> 
```

滚动它取决于你在做什么。移动浏览器等待`300ms`标签`<a>`来查看您是否在滚动或单击链接。可能与此有关。如果是这样，我会结帐`Google FastClick`。

移动浏览器加速了 body 上的页面滚动。因此，使用嵌套的 div 或`position:absolute`可能会阻止您获得更快的滚动速度。在较新的版本中`Android`，`iOS`您可以使用 -webkit-overflow-scrolling: touch 来提供帮助，但这对旧手机没有任何作用。我会尽量不使用绝对位置，因为根据您的示例，它看起来不像是必需的，而且使用滚动的嵌套 div 需要一些用户在 div 内使用两个手指来滚动内容。我也会尽量避免这种情况，并用更适合移动设备的设计模式替换设计，比如向下扩展内容的链接。

许多滚动问题在尝试支持`position:fixed`移动设备时暴露出来，如果您认为这可能导致它并且您想阅读它：[http ://bradfrostweb.com/blog/mobile/fixed-position/](http://bradfrostweb.com/blog/mobile/fixed-position/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:42:20.057

删除`position:absolute`and `position:relative`，此布局绝对不需要它们，它们会导致您的所有问题。

`margin-top`如果你愿意，你可以在你的身体里添加一些。

`PhoneGap`会产生一些这样的 html 垃圾，我希望你对 CSS 有很好的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T08:08:42.550

实际上有一个简单的 CSS 修复，添加`position:relative`到您的段落中可以解决问题。

试试这个：

```
<!doctype html>
<html>
<head><meta name="viewport" content="initial-scale=1.0">
<style>
p{ position:relative;}
</style>
</head>
<body style="margin:0">

<div style="position:absolute;overflow:auto;top:100px;bottom:100px;width:100%">

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam a quam arcu. Duis ultrices mollis nibh ut hendrerit. Etiam a interdum metus. Integer volutpat, nibh laoreet euismod suscipit, libero sem iaculis lorem, ut hendrerit magna orci eu elit. Nulla eu ultricies libero. Nulla facilisi. Maecenas nec turpis vitae magna lobortis ornare sit amet ut lacus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nunc vestibulum lobortis orci, sit amet ornare dui congue nec. Morbi id magna at turpis auctor ultricies. Ut rhoncus quam augue, ut consectetur risus.</p>
  <div style="position:relative;background:red;">relative box<br>moves slower than the other text</div>
  <p>Fusce congue orci a nunc gravida sed pretium lorem convallis. Etiam hendrerit, ligula eget lobortis vestibulum, arcu sapien pharetra magna, auctor suscipit nisl tellus quis lacus. Cras id elit at ante mollis venenatis. Donec eu sollicitudin odio. Aliquam erat volutpat. Cras et tortor sed mi faucibus sagittis non quis metus. Morbi mauris ante, posuere vel rutrum id, mattis id enim. Morbi purus quam, euismod facilisis blandit quis, commodo at justo. Aliquam in fermentum nibh. Curabitur pharetra blandit risus sit amet tristique. Suspendisse potenti. Curabitur interdum eleifend justo, et dapibus justo volutpat sed.</p>          
  <div style="overflow:auto">
    <table>
      <tr><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th>    <th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th><th>test</th>    <th>test</th><th>test</th><th>test</th><th>test</th><th>test</th></tr>
      <tr><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td>    <td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td><td>test</td>    <td>test</td><td>test</td><td>test</td><td>test</td><td>test</td></tr>
    </table>
  </div>

</div>
</body>
</html> 
```

# postgresql - 在 PostgreSQL 中插入多个 ENUM 值

> ID：15072869
> 
> 赞同：7
> 
> 时间：2013-02-25T17:33:24.267
> 
> 标签：postgresql, insert, enums

`ENUM`是否可以在 postgres 的列中插入多个值？

例如在Mysql 中，我可以做到。

```
create table 'foo'(
    'foo_id' smallint(5) unsigned NOT NULL AUTO_INCREMENT,
    `foo_enum` enum('foo','bar','dummy') DEFAULT 'foo',
);

insert into 'foo' ('foo_id', 'foo_enum') values (1, 'foo, bar') 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T18:06:17.133

您可以使用[`CREATE TYPE`](http://www.postgresql.org/docs/9.2/static/datatype-enum.html)声明您的枚举：

```
CREATE TYPE tfoo AS ENUM('foo','bar','dummy'); 
```

并使用它的[数组](http://www.postgresql.org/docs/9.2/static/arrays.html)来存储值：

```
CREATE TABLE foo (foo_id serial, foo_enum tfoo[]); 
```

插入：

```
INSERT INTO foo(foo_enum) VALUES('{foo,bar}'); 
```

或者

```
INSERT INTO foo(foo_enum) VALUES(ARRAY['foo','bar']::tfoo[]); 
```

另一种方法是使用另一个表来存储枚举和 foo 表的外键。例子：

```
CREATE TABLE foo (foo_id serial primary key);
CREATE TABLE foo_enums (foo_id integer references foo(foo_id), value tfoo); 
```

他们将多个值插入`foo_enums`：

```
INSERT INTO foo(foo_id) VALUES(nextval('foo_id_seq'));
INSERT INTO foo_enums(foo_id, value) VALUES
    (currval('foo_id_seq'), 'foo'),
    (currval('foo_id_seq'), 'bar'); 
```

# javascript - 用于水平和垂直移动的嵌套滑块？

> ID：15072873
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:34.570
> 
> 标签：javascript, jquery, image, slider, touch

我想了解是否有一个 jQuery 或 JavaScript 包允许在一个嵌套滑块中同时水平和垂直滑动图像/数据？

我很难找到一个允许它有效工作的包。

它需要有向上、向下、向左和向右的按钮，以及在与触摸屏一起使用时使用手指手势滑动的能力（可选）。此外，例如，当在幻灯片 1c 上时，选择下一个时转到幻灯片 2a 而不是 2c。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:45:09.963

查看 ankkit.com。它是我一个朋友的投资组合。他做了你想做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T11:41:36.403

您是否尝试过[iDangerous Swiper](http://www.idangero.us/sliders/swiper/)插件？我想这就是你要找的。

# bash - 插入 sed n 个重复字符

> ID：15072875
> 
> 赞同：1
> 
> 时间：2013-02-25T17:33:36.887
> 
> 标签：bash, sed

从 mysql 查询创建打印输出文件，我在每个 TOTAL 字符串后插入一个分隔线：

```
sed -i /^TOTAL/i'-------------------------------------------------- ' file.txt 
```

有没有更优雅的方式来重复 n 个“-”字符而不是键入它们？

例如，如果我必须在不查找/插入的情况下简单地生成一行，我会使用：

```
echo -$-{1..50} | tr -d ' ' 
```

但不知道如何将 sed 放入文件中。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:37:27.803

只需将两者结合起来：

```
sed -i /^TOTAL/i"$(echo -$___{1..50} | tr -d ' ')" file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T22:39:53.243

使用内置`printf`和 bash*大括号扩展*的另一种方法：

```
sed -i "/^TOTAL/i $(printf '%.0s-' {0..50})" file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T17:38:29.537

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")，您可以重复一个字符 N 次，请参阅：

```
perl -pe 's/^TOTAL.*/"-"x50 . "\n$&"/e' file.txt 
```

或者 ：

```
perl -pe 's/^TOTAL.*/sprintf("%s\n%s", "-"x50, $&)/e' file.txt 
```

并且您的语法接近`sed`.

# python - 在搜索索引中包含使用 sphinx.ext.viewcode 创建的模块 html 文件

> ID：15072881
> 
> 赞同：1
> 
> 时间：2013-02-25T17:33:48.180
> 
> 标签：python, python-sphinx

我正在使用 sphinx.ext.viewcode 扩展来构建指向特定项目中源代码的链接。它工作得很好，并为第一个源中引用的每个模块创建了一个源代码 html 文件。但是，这些模块 html 文件不包含在 Sphinx 搜索索引中。

我可以在每个模块文档页面的底部执行一个 literalinclude 指令并使源代码可搜索，但这样我就会失去指向 sphinx.ext.viewcode 扩展提供的源的链接，除非我同时使用 literalinclude 和 sphinx.ext .viewcode。那么有没有办法让 sphinx.ext.viewcode 创建的源代码 html 文件被包含在搜索索引中呢？

# python - 查找所有元音的单词数

> ID：15072883
> 
> 赞同：0
> 
> 时间：2013-02-25T17:33:52.050
> 
> 标签：python, python-2.7

我得到了一个文本文件，它存储在一个名为的列表中`words_list`：

```
if __name__ = "__main__":
    words_file = open('words.txt')

    words_list = []
    for w in words_file:
        w = w.strip().strip('\n')
        words_list.append(w) 
```

这就是字符串列表的样子（这是一个非常非常长的单词列表）

我必须找到所有元音的“所有单词”；到目前为止，我有：

```
def all_vowel(words_list):
    count = 0
    for w in words_list:
        if all_five_vowels(w):   # this function just returns true
            count = count + 1
    if count == 0
        print '<None found>'
    else 
        print count 
```

这样做的问题是`count`每次看到元音时都会加 1，而我希望它*仅*在*整个单词*包含所有元音时才加 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T17:53:07.523

只需测试您的任何单词是否是元音集的子集：

```
vowels = set('aeiou')

with open('words.txt') as words_file:
    for word in words_file:
        word = word.strip()
        if vowels.issubset(word):
            print word 
```

[`set.issubset()`](http://docs.python.org/2/library/stdtypes.html#set.issubset)适用于任何序列（包括字符串）：

```
>>> set('aeiou').issubset('word')
False
>>> set('aeiou').issubset('education')
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:46:13.917

假设 word_list 变量是一个实际的列表，可能你的“all_five_vowels”函数是错误的。

这可能是另一种实现：

```
def all_five_vowels(word):
    vowels = ['a','e','o','i','u']
    for letter in word:
        if letter in vowels:
            vowels.remove(letter)
            if len(vowels) == 0:
                return True
    return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:20:07.203

@Martijn Peters 已经发布了一个解决方案，它可能是 Python 中最快的解决方案。为了完整起见，这是在 Python 中解决此问题的另一种好方法：

```
vowels = set('aeiou')

with open('words.txt') as words_file:
    for word in words_file:
        word = word.strip()
        if all(ch in vowels for ch in word):
            print word 
```

这使用带有生成器表达式的内置函数`all()`，这是一个方便学习的模式。这读作“如果单词中的所有字符都是元音，则打印该单词。” Python 还具有`any()`可用于检查“如果单词中的任何字符是元音，则打印该单词”之类的检查。

更多关于这里的讨论： Python`any()`中的[“exists”关键字？](https://stackoverflow.com/questions/10958874/exists-keyword-in-python/10958885#10958885)`all()`

# asp.net - PackageManager 安装包更改默认文件夹

> ID：15072888
> 
> 赞同：0
> 
> 时间：2013-02-25T17:34:02.387
> 
> 标签：asp.net, .net, asp.net-mvc-4, visual-studio-2012

有没有办法将包管理器安装 jquery 脚本的默认文件夹更改为名称为 JavaScript 的文件夹，而不是 MVC 项目中的 Scripts 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:49:09.417

看来包作者需要为我们提供此功能。来源 - [http://forums.asp.net/t/1885579.aspx/1?PackageManager+install+package+change+default+folder](http://forums.asp.net/t/1885579.aspx/1?PackageManager+install+package+change+default+folder)

# php - 将 html 作为选项添加到变量

> ID：15072889
> 
> 赞同：-2
> 
> 时间：2013-02-25T17:34:02.653
> 
> 标签：php, joomla, joomla2.5

我有这个代码：

```
$variable_name = bla bla bla; 
```

我想将此代码添加到此变量：

```
<a class="screenshot" rel="<?php echo $baseurl.$this->row->image; ?>" >
<div class="photo"></div>
</a> 
```

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:40:33.417

您将其分配给您的变量，就像任何其他字符串一样。但是，由于您已经处于 php 模式，因此您必须删除`<?php ?>`，并使用字符串连接运算符`.`来包含`$baseurl.$this->row->image`

```
$variable_name = '<a class="screenshot" rel="' . $baseurl.$this->row->image . '" >
<div class="photo"></div>
</a>'; 
```

# asp.net - ASP.net MVC3 使用 DropDownList 在 Veiw 中选择外键

> ID：15072890
> 
> 赞同：0
> 
> 时间：2013-02-25T17:34:05.030
> 
> 标签：asp.net, asp.net-mvc-3, html.dropdownlistfor, html-select

首先，很抱歉再次提出这个话题，这个话题之前在这个网站上已经讨论过很多次了——尽管我尽力了，但我就是无法让我的代码正常工作。

我有以下模型类：

```
public class ProjectsTable {
  public int ID {get; set;}
  public String ProjectName {get; set;}
  ...
  public virtual Manager Manager_Id {get; set;}  // Stores foreign key of Manager
}

public class Manager {
  public int ID {get; set;}
  public String ManagerName {get; set;}
  ...
  public virtual ICollection<ProjectsTable> Projects {get; set;}
} 
```

ProjectsTable 控制器类包含以下方法来兼作显示和编辑页面：

```
private SynthContext db = new SynthContext();
...

// GET: /ProjectsTable/Parameters/5
public ActionResult Parameters(int id) {
  ProjectsTable projectstable = db.ProjectsTable.Find(id);
  ViewBag.Manager_Id = new SelectList(db.Manager, "ID", "ManagerName");
  return View(projectstable);
}

// POST: /ProjectsTable/Parameters/5
public ActionResult Parameters(ProjectsTable projectstable) {
  if(ModelState.IsValid) {
    db.Entry(projectstable).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Parameters");
  }
  ViewBag.Manager_Id = new SelectList(db.Manager, "ID", "ManagerName");
  return View(projectstable);
} 
```

最后，Parameters.cshtml 包含以下代码来显示下拉菜单

```
@model Synth.Models.ProjectsTable
...
<fieldset>
...
  <div class="editor-lable">
    @Html.LabelFor(model => model.Manager_ID)
  </div>
  <div class="editor-field">
    @HTML.DropDownList("Manager_ID", String.Empty)
  </div>
  <input type="submit" value="Update">
</fieldset> 
```

`/ProjectsTable/Parameters/x`当我测试代码时，我可以毫无问题地导航到；下拉列表正确生成，其中包含经理名称列表。但是，当我单击“更新”按钮时，Manager_ID 以红色突出显示，表示更改尚未注册。`/ProjectsTable/list`我可以通过导航到我发现没有任何更改生效的位置来确认更改尚未注册。

我试过添加`@Html.ValidationMessageFor(Model.Manager_ID)`，结果总是“值'x'无效”，其中x是一个有效的ID值（我已经对照数据库检查过）。

我查看了生成的 HTML 源代码，也没有发现任何错误。

我怀疑我需要替换`@HTML.DropDownList`为`@HTML.DropDownListFor`，但我无法弄清楚它需要哪些参数才能使其正常工作。 **编辑 - 我现在已经设法开始`DropDownListFor`工作，但问题仍然存在。帮助我解决此问题的一个相关问题可能是如何查看发送回服务器的发布数据。**

任何帮助将非常感激。

先谢谢大家了。。。

乔波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:46:44.537

我认为您自己很困惑，因为您有一个模型属性`Manager_Id`和一个 viewBag 对象`Manager_Id`。您的 modelState 错误指的是模型属性，而不是下拉列表中绑定到 viewBag 对象的任何值。我建议重新命名您的 ViewBag 以避免混淆（或者，更好的是，根本不使用 ViewBag），并为模型属性添加一个隐藏字段：

```
@Html.HiddenFor(m => m.Manager_Id) 
```

作为旁注，根据您对上述故障排除工作的描述，我还建议您在 Visual Studio 中进行调试、设置断点和检查值。从长远来看，这将使您的生活变得更加轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:59:14.160

所以我终于找到了问题所在。它与视图或控制器无关。显然我没有正确地编写模型：外键应该存储为`int?`以及指向相关模型的指针。

```
public class ProjectsTable {
  public int ID {get; set;}
  public String ProjectName {get; set;}
  ...

  public int? ManagerID {get; set;}  // Stores foreign key of Manager
  public virtual Manager Manager // I have no idea if this line does anything
}

public class Manager {
  public int ID {get; set;}
  public String ManagerName {get; set;}
  ...
  public virtual ICollection<ProjectsTable> Projects {get; set;}
} 
```

虽然不是必需的，但 View 也受益于使用该功能：

```
Html.DropDownListFor(model => model.Manager_ID, ViewBag.Manager_Id as SelectList, String.Empty) 
```

该函数`@HTML.DropDownList("ManagerID", String.Empty)`也可以工作，但是为了让它这样做，从控制器 ( `ManagerID`) 传递的 ViewBag 对象的名称必须与模型的外键完全匹配。这对我的口味来说令人费解和困惑。我更喜欢强类型的方法。

为了完整起见，我包含了完全更正的代码：

控制器：

```
private SynthContext db = new SynthContext();
...

// GET: /ProjectsTable/Parameters/5
public ActionResult Parameters(int id) {
  ProjectsTable projectstable = db.ProjectsTable.Find(id);
  // The following line has been amended, but this change is not strictly necessary
  ViewBag.m_id = new SelectList(db.Manager, "ID", "ManagerName", projectstable.ManagerID);
  return View(projectstable);
}

// POST: /ProjectsTable/Parameters/5
public ActionResult Parameters(ProjectsTable projectstable) {
  if(ModelState.IsValid) {
    db.Entry(projectstable).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Parameters");
  }
  ViewBag.m_id = new SelectList(db.Manager, "ID", "ManagerName", projectstable.ManagerID);
  return View(projectstable);
} 
```

看法：

```
@model Synth.Models.ProjectsTable
...
<fieldset>
...
  <div class="editor-lable">
    @Html.LabelFor(model => model.ManagerID)
  </div>
  <div class="editor-field">
    Html.DropDownListFor(model => model.ManagerID, ViewBag.m_id as SelectList, String.Empty)
    @Html.ValidationMessageFor(model => model.ManagerID)
  </div>
  <input type="submit" value="Update">
</fieldset> 
```

# php - 我如何从 MySQL 数据库中渲染 PHP 代码？

> ID：15072892
> 
> 赞同：1
> 
> 时间：2013-02-25T17:34:14.577
> 
> 标签：php, mysql, security, rendering

我正在创建某种自定义 CMS（家庭自动化）。好吧，我不是 PHP 开发人员 - 只是业余爱好者。

我想要实现的是：

在我的 index.php 页面中，我有类似的内容：

```
"<?php echo $pageBody; ?>   " 
```

PageBody 我从数据库中获取，它适用于 HTML、JS。但它不适用于 PHP 代码源。

我做了一些研究，我认为这与 PHP 安全限制有关。

我的问题：是否有人能够提供安全的样品（找不到任何这样的样品） - 我应该如何做到这一点。

我正在尝试插入一些 php 代码并最终通过浏览器呈现它：

```
 <div id="outer">
        <div id="inner">
                    ***PHP Code should go here***       
        </div>
    </div> 
```

此刻 - 它被呈现为文本。但是我可以正确呈现 HTML 和 JS。

我更喜欢的方式是 - 尽可能安全。

非常感谢伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:51:20.780

当您从数据库文本字段中检索 PHP 代码时，PHP 解释器并不“知道”它应该将数据解析为 PHP 脚本。对于 PHP 解释器，该字段中的数据与任何其他数据没有什么不同——它都是没有任何特殊意义的字符串。

**如果您正在处理纯 PHP 脚本，**您可以使用`eval`( [docs](http://php.net/manual/en/function.eval.php) ) 来完成此操作。预先警告：被认为是“邪恶的”，因为使用它会带来风险，特别是如果您的用户对数据库的内容有任何输入。**`eval`**

 **在您的情况下，听起来您想要解析存储在数据库字段中的混合 PHP 和 HTML。为了做到这一点，您需要将数据库数据写入一个文件，然后`include`PHP 解释器才能完成它的工作。您应该在此过程中实现某种缓存机制，否则它可能会在您的服务器上有很多用户时变得很重。您可能还想使用输出缓冲 ( [docs](http://php.net/manual/en/book.outcontrol.php) ) 来捕获输出，而不是立即将其发送出去。

简而言之，你想做这样的事情：

```
$content_from_db = "<h1>Hello <?php print 'Clarisse'; ?></h1>";
$identifier_from_db = '12'; // like the primary key from the table

$file_handle = fopen('cached_content/CACHE_'.$identifier_from_db.'.php', 'w');
fwrite($file_handle, $content_from_db);
fclose($file_handle);

// here is where you'd start output buffering, if you're going to do that (optional)

include('cached_content/CACHE_'.$identifier_from_db.'.php');

// and then here you retrieve the output buffer's content (optional) 
```

请注意，这不是包含动态内容的“传统”方式，并且上面的代码**不是生产就绪的**。在不知道您的用例的情况下，我不能肯定地说，但是这种将 PHP 代码存储在数据库中的想法是一种相当不寻常的方法。

滚动自己的另一种替代方法是 smarty 模板库。在这里查看：[http](http://www.smarty.net) ://www.smarty.net 。使用 smarty，您可以编写一个资源插件来从数据库中提取模板。它看起来像上面的代码（[更多信息](http://www.smarty.net/docsv2/en/template.resources.tpl)）

**文档**

*   `fwrite`- [http://php.net/manual/en/function.fwrite.php](http://php.net/manual/en/function.fwrite.php)
*   `include`- [http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)
*   *theopensourcery.com 上的*PHP 基础-* [http://theopensourcery.com/phpbasics.htm](http://theopensourcery.com/phpbasics.htm)*
**   *维基百科上的服务器端脚本*- [http://en.wikipedia.org/wiki/Server-side_scripting](http://en.wikipedia.org/wiki/Server-side_scripting)*   `eval`- [http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)*   输出控制（缓冲） - [http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)*   Smarty - [http://www.smarty.net](http://www.smarty.net)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:38:21.247

要执行存储在字符串（或数据库）中的 PHP，您可以使用[eval 函数](http://www.php.net/manual/en/function.eval.php)，但要小心它可能有些危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:39:01.857

您不能在浏览器中呈现（可能您的意思是执行）php 代码，因为 php 脚本在服务器上执行，然后将输出发送到浏览器。当浏览器收到响应时，脚本已经执行完毕。

您可以从数据库中获取代码并在发送输出之前使用 eval()。但是您必须意识到这种方法的缺点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T17:52:39.750

浏览器无法呈现（执行）PHP 代码。PHP 是服务器执行并作为纯 HTML 发送到浏览器以显示的东西。

出于测试目的，您可以下载并安装 WAMP，这是最轻松的一站式开发解决方案。

链接：[http ://www.wampserver.com/en/](http://www.wampserver.com/en/)***

# php - 删除所有同名不同路径的cookie

> ID：15072897
> 
> 赞同：1
> 
> 时间：2013-02-25T17:34:22.777
> 
> 标签：php, codeigniter, cookies

我正在使用codeigniter，我有这样的所有路线

```
 www.example.com/path1/
 www.example.com/path1/path_/ 
```

在每个页面中，如果设置了 SESSION['lang']，我都会进行控制。如果设置了，我还设置了 Cookie

```
setcookie("lang", $_SESSION["LANG"], time() + (60* 60 * 24 * 30 *12 *20),  "./"); 
```

但我有一个问题......当我从管理区域注销时，我必须删除会话以及 cookie。但是如果我以这种方式删除 cookie

```
setcookie("lang",'', time() - (60* 60 * 24 * 30 *12 *20),  "./"); 
```

它只会删除一个cookie lang。我必须删除所有不同路径的cookie“lang”。

有人可以帮助我吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-07T11:18:57.340

要为整个站点设置一个全局 cookie，路径应该是不带点的“/”。

“/”表示网站的根目录。

“./”表示当前目录。

在您的情况下，设置全局 cookie 它应该是：

```
setcookie("lang", $_SESSION["LANG"], time() + (60* 60 * 24 * 30 *12 *20),  "/"); 
```

要删除全局 cookie：

```
setcookie("lang",'', 1,  "/"); 
```

关于您的实际问题，“删除所有具有相同名称和不同路径的 cookie”，没有官方记录的方法可以做到这一点。有一个 hack 使用 $_SERVER['HTTP_COOKIE'] 变量，就像[这里](https://stackoverflow.com/questions/27146196/how-to-delete-all-cookies-with-the-same-name?rq=1)一样。但是这个变量没有记录，在某些服务器上可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:05:33.667

您用于设置 cookie 的方式为您访问的每个页面/URL 存储一个单独的 cookie，因为：

```
setcookie(..., ..., ..., "./"); // the 4th parameter means "this directory" 
```

因此，如果脚本在每个页面上都执行，那么您访问的每个目录和子目录都会获得一个单独的 cookie。但是，如果您想为整个域设置“lang”参数，则不需要这样做。

如果您将其更改为“/foo/”之类的内容，则此 cookie 将对任何[http://www.example.com/foo/](http://www.example.com/foo/)和 www.example.com/foo/ 的任何子目录有效，请参阅[http:// php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)：

> **小路**
> 
> cookie 可用的服务器上的路径。如果设置为“/”，cookie 将在整个域中可用。如果设置为**'/foo/'**，cookie 将仅在**/foo/ 目录和所有子目录（例如 domain 的 /foo/bar/ ）中**可用。默认值是设置 cookie 的当前目录。

因为这将只为整个域存储一个 cookie，所以您可以使用更改了第 4 个参数的代码轻松地使其无效：

```
setcookie(..., ..., ...,  "/foo/"); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:02:44.937

Codeigniter 有一种删除 cookie 的方法

```
delete_cookie() 
```

允许您删除 cookie。除非您设置了自定义路径或其他值，否则只需要 cookie 的名称：

```
delete_cookie("name"); 
```

此函数在其他方面与 set_cookie() 相同，只是它没有 value 和 expire 参数。您可以在第一个参数中提交一组值，也可以设置离散参数。

```
delete_cookie($name, $domain, $path, $prefix) 
```

使用此功能，您可以删除任何路径或域的 cookie。也许您需要多次编写此函数，因为您拥有的“域/路径”

[http://ellislab.com/codeigniter/user-guide/helpers/cookie_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/cookie_helper.html)

# c++ - Win32 C++ 从元素中获取文本

> ID：15072898
> 
> 赞同：0
> 
> 时间：2013-02-25T17:34:25.343
> 
> 标签：c++, winapi, selectlist

虽然这个问题之前可能已经被问过一千次（我很确定我已经阅读了一千个答案）。我还是不明白。

假设我有一个函数可以创建一个像这样的 ComboBox：

```
 scopeComboSelector=CreateCombobox(hwnd,
                                    GetModuleHandle(0),
                                    CBS_DROPDOWNLIST,
                                    re,
                                    IDCC_DROPDOWNLIST_SCOPE_SELECTOR,
                                    _T("Scopes")); 
```

其中“re”是一个定位矩形。而 IDCC_DROPDOWNLIST_SCOPE_SELECTOR（很长的名字）是组合框的 id。现在的重点是，我实际上可以填写这个“下拉选择列表”，但我不知道如何简单地将当前选定的值作为字符串获取。

我已经看到了大约 10 种方法来做到这一点，它们都会立即产生错误（需要转换为 LPWSTR -> 修复会导致更多的恐惧）。

也许我只是习惯了 Java，可以简单地说：

```
 textfield.getText(); 
```

如何在 Win32 C++ (microsoft visual studio) 中实现这一点？

**编辑**

我用过的代码：

```
 char userName[_MAX_PATH+1];
  GetDlgItemTextW(scopeComboSelector,
                  IDCC_DROPDOWNLIST_SCOPE_SELECTOR,
                 (LPWSTR)userName,
                  200); 
```

返回：用户名 == 空

**更新**

现在使用：GetDlgItemText()。调试器告诉我 userName = "" 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:07:07.973

该[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/hh298364%28v=vs.85%29.aspx)有一个 C 风格的 Windows 9x 代码示例。

您只需将 C 替换为 C++ 和 Windows 9x 愚蠢的 T 宏`wchar_t`和朋友。

阅读文档总是一个好主意。

# facebook - Facebook - 点击赞按钮不会增加赞数

> ID：15072905
> 
> 赞同：1
> 
> 时间：2013-02-25T17:34:34.260
> 
> 标签：facebook, facebook-like

在搜索了互联网并对这个主题进行了自己的研究之后，我仍然找不到我的问题的答案，所以就在这里。

当我点击点赞按钮（点赞我的网站[http://openarchitecture.cz](http://openarchitecture.cz)）时，点赞数不会增加。

在客户端（在 Chrome 中）调试 FB javascript 代码并检查单击“Like”按钮后从 FB 服务器发回的 ajax 响应，显示 FB 指示 Like 按钮“断开连接”，导致行为如下面所描述的。

术语“断开连接”是一个严格的 FB 术语（在某种 javascript 代码的意义上），这意味着在客户端将使用一个“插件”，该插件将执行某些操作，从而导致类似按钮的“不活动”。从技术上讲，当插件“断开连接”被识别为 ajax 响应的一部分时，会有一组预定义的操作（函数）将被依次调用。

现在为问题的重现性。

1.  转到[http://developers.facebook.com/docs/reference/plugins/like并使用](http://developers.facebook.com/docs/reference/plugins/like)[http://openarchitecture.cz](http://openarchitecture.cz) url 填写“喜欢的 URL”字段。
2.  单击“获取代码”，然后在弹出的窗口中单击“确定”，最后单击右侧的“喜欢”按钮。
3.  点赞数应该会增加。相反，会出现一个弹出窗口（大约）1 秒。然后弹出窗口消失。现在我的状态和点击点赞按钮之前一样，即点赞数没有增加。

我在 SO 上发现了类似的问题，但似乎没有一个最终解决了这个问题。

关于 SO 的相关问题是：
1\. [http://facebook.stackoverflow.com/questions/5195183/facebook-like-button-flashing-on-then-off/12958474#12958474](http://facebook.stackoverflow.com/questions/5195183/facebook-like-button-flashing-on-then-off/12958474#12958474)
2\. [Facebook Like 按钮不起作用一个网站？](https://stackoverflow.com/questions/11325005/facebook-like-button-does-not-work-on-one-website)

其中一个建议是，这实际上是一个 FB 错误。我发现了一个（最近创建的）错误，在 FB 错误跟踪系统中报告。该错误位于此处： http: [//developers.facebook.com/bugs/268340209965207 ?browse=search_512b8e0bed9724580954683](http://developers.facebook.com/bugs/268340209965207?browse=search_512b8e0bed9724580954683)

但是，该错误具有“低”优先级，到目前为止似乎尚未解决（它甚至可能作为非 FB 问题返回，我不确定这种可能性是否仍然存在）。

所以对于所有对此感兴趣的人。

1.  这是一个真正的FB错误吗？
2.  你是怎么处理的？
3.  会不会是我的网站出于某种原因在 FB 垃圾邮件/黑色/“任何讨厌的”列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:25:33.500

出色地。这将像其他帖子一样结束，即这里没有吸取任何教训。

[本文后面使用的术语“页面”代表[http://openarchitecture.cz](http://openarchitecture.cz)页面]

我今天刚刚尝试通过 FB 生成的点赞按钮再次点赞该页面（在[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)上）再次点赞该页面，结果现在可以了。所以点赞按钮后，点赞数会增加。

在检查与 FB 服务器的请求交换时，我观察到的不同之处在于，这次通信已经通过 iframe 完成（默认情况下，即使用 XFBML 版本的 like 按钮），而不是直接 ajax 调用（就像过去一样XFBML）。

我不知道是什么原因（我之前尝试过类似按钮的纯 iframe 版本）但是由于提到的 iframe 请求而返回的响应现在是正确的，即。FB 发回响应，指示客户端浏览器中的 javascript 使用“连接”插件而不是“断开”插件。

还有一件事。一个月前，我创建了一个 FB 个人资料（[http://www.facebook.com/pages/Openarchitecture/125515934292877](http://www.facebook.com/pages/Openarchitecture/125515934292877)），并对这个个人资料进行了一些更新。因此，也许 FB 决定该页面（从 FB 个人资料中引用）现在已经赢得了“喜欢”的特权。

就像我一开始说的。问题解决了，但没有吸取教训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:43:55.420

对我来说，问题（就像弹出窗口在一秒钟后消失；“插件”，“断开连接”响应）发生在点赞按钮 URL 重定向到另一个 URL 时。

修复方法是添加 og:type、og:url 和 og:title（根据[https://developers.facebook.com/docs/reference/opengraph/object-type/website](https://developers.facebook.com/docs/reference/opengraph/object-type/website)需要），然后通过 Facebook 运行 URL调试器清除缓存（[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)）。

更多信息请访问[https://stackoverflow.com/a/16597060/2391566](https://stackoverflow.com/a/16597060/2391566)。

# if-statement - 计划的批处理文件备份

> ID：15072908
> 
> 赞同：2
> 
> 时间：2013-02-25T17:34:41.087
> 
> 标签：if-statement, batch-file, error-handling, scheduled-tasks, wake-on-lan

我一直在写这个备份脚本。该脚本的目标是：

1.  唤醒 LAN 上的睡眠 PC

2.  运行 Microsofts Synctoy（cmd 版本）以同步我设置的所有配对文件夹并将结果输出到日志文件。

3.  如果出现错误，它应该将其写入日志文件，然后通过 mailsend.exe 向我发送电子邮件。

批处理文件设置为每晚使用 Windows 7 的计划任务运行。

批处理文件内容：

```
 @ECHO OFF
    SET /a RETRY=0
    SET /a RETRIES=5
    SET MAC=000c76******
    SET IP=192.168.0.8
    SET SUBNET=255.255.255.0
    SET PORT=7

    ECHO %date% - %time% - Started sync.

    :CHECK
    PING -n 1 %IP% | find "bytes=">NUL
    IF %ERRORLEVEL%==0 (
    GOTO SYNC
    )
    IF %ERRORLEVEL%==1 (
    GOTO WAKE
    )

    :WAKE
    SET /a RETRY=%RETRY%+1
    IF %RETRY% GEQ 6 (
    SET ERR_VAL=RETRY
    GOTO ERROR
    )
    ECHO Waking up \\NAS Attempt %RETRY%\5...
    START C:\sync\wolcmd.exe %MAC% %IP% %SUBNET% %PORT%
    timeout /T 30 /NOBREAK>NUL
    GOTO CHECK

    :SYNC
    ECHO SyncToy is running...
    "C:\Program Files\SyncToy 2.1\SyncToyCmd.exe" -R>C:\sync\synctoy_log.txt
    IF %ERRORLEVEL% == 0 (
    ECHO %date% - %time% - Success: Sync completed.>>C:\sync\synctoy_error_log.txt
    GOTO END
    ) ELSE (
    SET ERR_LEV=%ERRORLEVEL%
    SET ERR_VAL=SYNC
    GOTO ERROR
    )

    :ERROR
    IF %ERR_VAL%==RETRY (
    ECHO Error: Failed to sync, retries exceeded.
    ECHO %date% - %time% - Error: Failed to sync, retries exceeded.>>C:\sync\synctoy_error_log.txt
    )
    IF %ERR_VAL%==SYNC (
    ECHO Error: SyncToy error (%ERR_LEV%).
    ECHO %date% - %time% - Error: SyncToy error (%ERR_LEV%).>>C:\sync\synctoy_error_log.txt
    )
    START C:\sync\mailsend.exe -to example.email@googlemail.com -from example.email@gmail.com -ssl -attach synctoy_error_log.txt,text/plain,i -smtp smtp.googlemail.com -port 465 -sub SyncToy_log +cc +bc -v -auth-login -user example.email@gmail.com -pass examplepass
    GOTO END

    :END
    EXIT 
```

synctoy_error_log.txt 的内容

```
 18/02/2013 -  6:02:16.40 - Success: Sync completed.
    20/02/2013 -  6:05:25.71 - Success: Sync completed.
    21/02/2013 -  6:07:14.27 - Success: Sync completed.
    22/02/2013 -  6:02:56.34 - Success: Sync completed.
    24/02/2013 -  6:01:49.97 - Success: Sync completed.
    25/02/2013 -  6:01:35.14 - Success: Sync completed. 
```

如您所见，有几天没有写入日志。正在运行计划任务的 PC 和我要唤醒的 PC，此时应该已经可以访问了。

在我的错误检查中我做错了什么吗？

我也没有收到一封电子邮件说有问题，但是如果我断开睡眠 PC 与 LAN 的连接并强制脚本启动，我确实收到一封电子邮件说它无法唤醒它。

感谢您给我的任何建议，这非常感谢。我知道这不是最有效的脚本，但我一直在努力争取一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:39:34.450

脚本在什么帐户下作为计划任务运行？通常nt帐户系统无法使用任何网络共享，请尝试在允许在secpol中作为批处理任务登录的用户帐户下运行。

# ruby-on-rails - 使用 AR 创建方法创建时传递空值的轨道

> ID：15072909
> 
> 赞同：0
> 
> 时间：2013-02-25T17:34:43.420
> 
> 标签：ruby-on-rails, octopus

在我的 rails 应用程序中，我有一个按钮，单击该按钮时，会从一个数据库复制数据并将其插入另一个数据库。

我正在使用章鱼 gem 将我的应用程序链接到 2 个数据库。

要将记录从 db_A 复制到 db_B，我使用以下代码：

```
Octopus.using(:shard_B) do
    @book_new_live = Book.create(
      :BK_SUB_FK => @book.BK_SUB_FK,
      :BK_TITLE => @book.BK_TITLE,
      :BK_SOURCE => "",
      :BK_PUB => "",
      :BK_COVER => "",
      :BK_LABEL_PRODUCT => @book.BK_LABEL_PRODUCT,
      :BK_FINAL_LABEL => "",
      :BK_VISUAL_METHOD => @book.PRB_VISUAL_METHOD,
      :BK_DB => "",
      :BK_COVERED_REGION => "",
      :BK_VERSION_NO => @book.BK_VERSION_NO,
      :BK_SEQ_FILE => "",
      )do |primary|
      primary.BK_ID = @book.BK_ID
    end
end 
```

复制数据的数据库“db_b”不接受空值，列不能为空，默认值为“NONE”。

此外，我不允许修改数据库的结构，以便它可以接受空值。

如果我使用下面的简化代码，我会收到一条错误消息，通知我列“BK_SOURCE”、“BK_PUB”、“BK_COVER”...不能为空。默认情况下，rails 将 null 传递给这些列。

所以我必须将空字符串传递给不能为空的列。

```
Octopus.using(:shard_B) do
    @book_new_live = Book.create(
      :BK_SUB_FK => @book.BK_SUB_FK,
      :BK_TITLE => @book.BK_TITLE,
      :BK_LABEL_PRODUCT => @book.BK_LABEL_PRODUCT,
      :BK_VISUAL_METHOD => @book.PRB_VISUAL_METHOD,
      :BK_VERSION_NO => @book.BK_VERSION_NO,
      )do |primary|
      primary.BK_ID = @book.BK_ID
    end
end 
```

有没有办法防止rails将空值传递给上面代码中没有提到的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:44:18.320

如果我理解正确，您可以使用`or`运算符发送您的值，如下所示：

```
Octopus.using(:shard_B) do
  @book_new_live = Book.create(
    :BK_SUB_FK => @book.BK_SUB_FK,
    :BK_TITLE => @book.BK_TITLE,
    :BK_SOURCE => @book.BK_SOURCE || "NONE",
    :BK_PUB => @book.BK_PUB || "NONE",
    :BK_COVER => @book.BK_COVER || "NONE",
    :BK_LABEL_PRODUCT => @book.BK_LABEL_PRODUCT,
    :BK_FINAL_LABEL => "",
    :BK_VISUAL_METHOD => @book.PRB_VISUAL_METHOD,
    :BK_DB => "",
    :BK_COVERED_REGION => "",
    :BK_VERSION_NO => @book.BK_VERSION_NO,
    :BK_SEQ_FILE => "",
    )do |primary|
    primary.BK_ID = @book.BK_ID
  end
end 
```

通过说要传递的值是`@book.BK_SOURCE || "NONE"`，如果属性是`nil`，则改为传递字符串`NONE`。

**编辑**

```
hash = {
  :BK_SUB_FK => @book.BK_SUB_FK,
  :BK_TITLE => @book.BK_TITLE,
  :BK_SOURCE => @book.BK_SOURCE,
  :BK_PUB => @book.BK_PUB,
  :BK_COVER => @book.BK_COVER,
  :BK_LABEL_PRODUCT => @book.BK_LABEL_PRODUCT,
  :BK_FINAL_LABEL => @book.BK_FINAL_LABEL,
  :BK_VISUAL_METHOD => @book.PRB_VISUAL_METHOD,
  :BK_DB => @book.BK_DB,
  :BK_VERSION_NO => @book.BK_VERSION_NO
}
hash = hash.delete_if { |k, v| v.nil? }
Octopus.using(:shard_B) do
  @book_new_live = Book.create(hash)do |primary|
    primary.BK_ID = @book.BK_ID
  end
end 
```

试试看。

# c# - ImageResizer 不适用于标签

> ID：15072910
> 
> 赞同：1
> 
> 时间：2013-02-25T17:34:43.867
> 
> 标签：c#, asp.net, imageresizer

我正在使用 ImageResizing.net 中的[ImageResizer](http://imageresizing.net/)。

通过我的代码，我可以使用以下代码以编程方式使用插件：

```
img.Attributes.Add("src", RemoteReaderPlugin.Current.CreateSignedUrl("http://i.minus.com/iNQ7wK2opRJT1.gif",
                                                                             new ResizeSettings(
                                                                                 "width=233&format=png"))); 
```

但是，当我尝试直接使用带有`<img />`标签的插件时，例如：

`<img id="img" alt="" src="http://i.minus.com/iNQ7wK2opRJT1.gif?width=90" />`

它只是渲染全尺寸图像。通过这两种方法，我只是添加`src`到图像中，然后是查询字符串。

有谁知道如何解决这一问题？

**编辑：**我正在使用皮肤，但它们根本没有弄乱`<img />`。
**编辑 2：**我有[RemoteReader 插件](http://imageresizing.net/plugins/remotereader)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:37:02.170

ImageResizer 只能处理它收到的 HTTP 请求；它不会为您神奇地修改您的 HTML。指向不同服务器的 URL...转到该服务器。

RemoteReader 插件提供了一种替代的人工可写语法，但您必须按照[RemoteReader 文档](http://imageresizing.net/plugins/remotereader)中的指定将域列入白名单。

例子：

```
<img id="img" alt="" src="/remote/i.minus.com/iNQ7wK2opRJT1.gif?width=90" /> 
```

# java - 将 FileItem 转换为文件

> ID：15072917
> 
> 赞同：3
> 
> 时间：2013-02-25T17:35:08.680
> 
> 标签：java, file, servlets, filestream, fileitem

我正在尝试使用简单的上传 html 表单上传 XML 文件（text.xml），定期将其作为 servlet 中的 FileItem 读取，然后获取 ACTUAL 文件（text.xml），以便我可以打印、保存等。有没有任何受过教育的方法可以简单地做到这一点？有人告诉我使用 FileItem 的属性 getInputStream .. 有什么例子吗？没有更短的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:51:02.143

只需使用[`FileItem#write()`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html#write%28java.io.File%29)方法，正如[Apache Commons FileUpload的](http://commons.apache.org/fileupload)[用户指南](http://commons.apache.org/fileupload/using.html)中所展示的那样。

```
File file = new File("/path/to/text.xml");
fileItem.write(file); 
```

就这样。

### 也可以看看：

*   [如何使用 Commons FileUpload 设置用于存储文件上传的文件夹](https://stackoverflow.com/questions/13528081/how-do-i-set-the-folder-for-storing-file-uploads-using-commons-fileupload/13532453#13532453)
*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# ios - 无法在不同的类 ios 中设置属性？

> ID：15072918
> 
> 赞同：0
> 
> 时间：2013-02-25T17:35:08.887
> 
> 标签：ios, objective-c, ios6

在我的第一堂课（Secen1ViewController.h）中，我有财产：

```
@property (nonatomic) BOOL myBoolean; 
```

在我的第二堂课（Secen2ViewController.m）中，我导入了 Secen1ViewController.h 并声明了属性：

```
@property (strong) Secen1ViewController *parent; 
```

我还在 ViewDidLoad 中初始化了属性：

```
 _parent = [[Secen1ViewController alloc] init]; 
```

然后当按下按钮时我设置属性：

```
 self.parent.myBoolean=YES; 
```

没有显示错误，但 Scene1 中的 myBoolean 未设置为 yes。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:35:54.177

尝试替换此代码：

```
_parent = [[Secen1ViewController alloc] init]; 
```

使用此代码：

```
self.parent = [[Secen1ViewController alloc] init]; 
```

并确保您综合了所有属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:41:20.123

首先添加`@class Secen1ViewController (.h)`和`#import Secen1ViewController in (.m)`

将您的 myBoolean 属性设置为

```
@property (assign,nonatomic) BOOL myBoolean; 
```

并`@synthesize it in (.m)`在你身上使用它`Secen1ViewController`

```
self.parent = [[Secen1ViewController alloc] init];
self.parent.myBoolean = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:53:39.697

你合成你的布尔变量了吗？显然你可能没有申报

```
@synthesize myBoolean = _myBoolean; 
```

在你的实现文件中。

# android - 如何使此代码输出第二个节点？

> ID：15072921
> 
> 赞同：0
> 
> 时间：2013-02-25T17:35:19.937
> 
> 标签：android, xml-serialization

如何让它输出第二个节点？目前它似乎正好在旧数据之上。我的教练说它应该工作，但它没有。

```
protected void ModifyXMLFile(String sName, String sClue1, String sClue2,
                String sClue3, String sAnswer, String sLocation, String sPoints) {
            // Write Data to a File in XML Format

            try {
                FileOutputStream mOutput = openFileOutput(FILENAME, Activity.MODE_PRIVATE);
                //we create a XmlSerializer in order to write xml data

                XmlSerializer serializer = Xml.newSerializer();

                try {

                    //we set the FileOutputStream as output for the serialize, using UTF-8 encoding

                    serializer.setOutput(mOutput, "UTF-8");

                    //Write <?xml declaration with encoding (if encoding not null) and stand alone flag (if stand alone not null)

                    serializer.startDocument(null, Boolean.valueOf(true));

                    //set indentation option

                    serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);

                    //start a tag called "root"
                    serializer.startTag(null, "Items");

                    //i indent code just to have a view similar to xml-tree
                    serializer.startTag(null, "Treasure");

                        serializer.startTag(null, "Name");
                        serializer.attribute(null, "Name", sName);
                        serializer.endTag(null, "Name");

                        serializer.startTag(null, "Clue1");
                        serializer.attribute(null, "Clue1", sClue1);
                        serializer.endTag(null, "Clue1");

                        serializer.startTag(null, "Clue2");
                        serializer.attribute(null, "Clue2", sClue2);
                        serializer.endTag(null, "Clue2");

                        serializer.startTag(null, "Clue3");
                        serializer.attribute(null, "Clue3", sClue3);
                        serializer.endTag(null, "Clue3");

                        serializer.startTag(null, "Answer");
                        serializer.attribute(null, "Answer", sAnswer);
                        serializer.endTag(null, "Answer");

                        serializer.startTag(null, "Location");
                        serializer.attribute(null, "Location", sLocation);
                        serializer.endTag(null, "Location");

                        serializer.startTag(null, "Points");
                        serializer.attribute(null, "Points", sPoints);
                        serializer.endTag(null, "Points");

                    serializer.endTag(null, "Treasure");

                serializer.endTag(null, "Items");

                serializer.endDocument();

                //write xml data into the FileOutputStream

                serializer.flush();

                //finally we close the file stream

                mOutput.close();

                } catch (Exception e) {

                Log.e("Exception","error occurred while creating xml file");

                }

             //   mOutput.write(data.getBytes());
             //   mOutput.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            } 
```

当前输出如下所示。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<Items>
  <Treasure>
    <Name Name="p" />
    <Clue1 Clue1="l" />
    <Clue2 Clue2="m" />
    <Clue3 Clue3="o" />
    <Answer Answer="k" />
    <Location Location="n" />
    <Points Points="i" />
  </Treasure>
</Items> 
```

第二次通过后它应该看起来像这样。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<Items>
  <Treasure>
    <Name Name="Treasure 1" />
    <Clue1 Clue1="l" />
    <Clue2 Clue2="m" />
    <Clue3 Clue3="o" />
    <Answer Answer="k" />
    <Location Location="n" />
    <Points Points="i" />
  </Treasure>
 <Treasure>
    <Name Name="Treasure 2" />
    <Clue1 Clue1="b" />
    <Clue2 Clue2="c" />
    <Clue3 Clue3="d" />
    <Answer Answer="e" />
    <Location Location="f" />
    <Points Points="g" />
  </Treasure>
</Items> 
```

好的，我添加了以下更改

```
FileOutputStream mOutput = openFileOutput(FILENAME, Activity.MODE_APPEND); 
```

我还添加了这一行，因为它似乎丢失了。

```
StringWriter writer = new StringWriter(); 
```

当我开始这个时，我得到了同样的东西。一定有更好的方法。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<Items>
  <Treasure>
    <Name Name="quit" />
    <Clue1 Clue1="was" />
    <Clue2 Clue2="each" />
    <Clue3 Clue3="race" />
    <Answer Answer="the" />
    <Location Location="life" />
    <Points Points="35" />
  </Treasure>
</Items><?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<Items>
  <Treasure>
    <Name Name="zone" />
    <Clue1 Clue1="Xbox" />
    <Clue2 Clue2="city" />
    <Clue3 Clue3="very" />
    <Answer Answer="but" />
    <Location Location="new" />
    <Points Points="12" />
  </Treasure>
</Items> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:16.927

这是代码。

```
protected void ModifyXMLFile(String sName, String sClue1, String sClue2,
        String sClue3, String sAnswer, String sLocation, String sPoints) {

    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = null;

        File file = getFileStreamPath(FILENAME);
        if(!file.exists()) {
            // Create an empty xml file
            FileOutputStream mOutput = openFileOutput(FILENAME, Activity.MODE_PRIVATE);
            XmlSerializer serializer = Xml.newSerializer();
            serializer.setOutput(mOutput, "UTF-8");
            serializer.startDocument(null, Boolean.valueOf(true));
            serializer.startTag(null, "Items");
            serializer.endTag(null, "Items");
            serializer.endDocument();
            serializer.flush();
            mOutput.close();    
        }

        // Parse the existing xml file
        FileInputStream fis = openFileInput(FILENAME);
        doc = db.parse(fis);
        fis.close();

        // Append new Treasure
        Element treasure = doc.createElement("Treasure");
        treasure.appendChild(createChild(doc, "Name", sName));
        treasure.appendChild(createChild(doc, "Clue1", sClue1));
        treasure.appendChild(createChild(doc, "Clue2", sClue2));
        treasure.appendChild(createChild(doc, "Clue3", sClue3));
        treasure.appendChild(createChild(doc, "Answer", sAnswer));
        treasure.appendChild(createChild(doc, "Location", sLocation));
        treasure.appendChild(createChild(doc, "Points", sPoints));

        Element items = doc.getDocumentElement();
        items.appendChild(treasure);

        // Write the xml file
        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer t = tf.newTransformer();
        t.setOutputProperty(OutputKeys.INDENT, "yes");
        t.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
        FileOutputStream fos = openFileOutput(FILENAME, MODE_PRIVATE);
        t.transform(new DOMSource(doc), new StreamResult(fos));
        fos.close();

    } catch (Exception e) {
        e.printStackTrace();
    }       
}

private Element createChild(Document doc, String name, String value) {
    Element child = doc.createElement(name);
    child.setAttribute(name, value);
    return child;       
} 
```

# spring - javax.el.PropertyNotFoundException：在类型 java.lang.String 上找不到属性“名称”

> ID：15072924
> 
> 赞同：6
> 
> 时间：2013-02-25T17:35:22.723
> 
> 标签：spring, jsp

我收到上面的错误。

我正在尝试做的是编写一个应用程序，它接收未知数量的名称，然后在新页面上打印出来。这应该是一个保龄球得分应用程序，但现在我只想得到一个名字列表。这个想法是让每个名字进入一个播放器对象，然后依次存储在播放器数组列表中。如果有人可以提供帮助，我将不胜感激。

这是我的控制器代码：

```
package multiplayergame;

import java.util.ArrayList;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.servlet.ModelAndView;

@Controller
@SessionAttributes
public class MultiplayerController {

int score;
int roll;
Game game = new Game();
GameProperties gameProps = new GameProperties();
int playerNo = 0;

ArrayList<PlayerGame> players = new ArrayList<>();
PlayerGame player;

@RequestMapping(value = "/home", method = RequestMethod.GET)
public ModelAndView home() {

    return new ModelAndView("home", "command", gameProps);      
}

@RequestMapping(value = "/nextName", method = { RequestMethod.POST, RequestMethod.GET})
public ModelAndView homeNext(MContact mcontact, BindingResult result) {     
    player = new PlayerGame();

    player.setName(mcontact.getName());
    players.add(player);
    gameProps.setPlayers(players);
    playerNo++;
    return new ModelAndView("home", "command", gameProps);      
}

@RequestMapping(value = "/test", method = RequestMethod.POST)
public ModelAndView playNext(GameProperties gameProps2, ModelMap model) {

    model.addAttribute("players", gameProps.getPlayers());
    model.addAttribute("name", gameProps.getPlayers().get(playerNo).getName());

    return new ModelAndView("test", "players", gameProps2);

}
} 
```

这包含每个玩家的详细信息：

```
package multiplayergame;

public class PlayerGame {
private int score;
private int pins;
private String name;
private int roll;
private int nOfPlayers;
private int playerNo;

Game game = new Game();

public Game getGame() {
    return game;
}
public void setGame(Game game) {
    this.game = game;
}   
public int getScore() {
    return score;
}
public void setScore(int score) {
    this.score = score;
}
public int getPins() {
    return pins;
}
public void setPins(int pins) {
    this.pins = pins;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}   
public int getRoll() {
    return roll;
}
public void setRoll(int roll) {
    this.roll = roll;
}
public int getnOfPlayers() {
    return nOfPlayers;
}
public void setnOfPlayers(int nOfPlayers) {
    this.nOfPlayers = nOfPlayers;
}
public int getPlayerNo() {
    return playerNo;
}
public void setPlayerNo(int playerNo) {
    this.playerNo = playerNo;
}
} 
```

这是所有游戏属性的代码，例如得分等。

```
package multiplayergame;

import java.util.ArrayList;

public class GameProperties {

private int score;
private int pins;
private String name;
private int roll;
private int nOfPlayers;
PlayerGame player;
private ArrayList<PlayerGame> players;
private int playerNo;

public int getScore() {
    return score;
}   
public void setScore(int score) {
    this.score = score;
}   
public int getPins() {
    return pins;
}
public void setPins(int pins) {
    this.pins = pins;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public int getRoll() {
    return roll;
}
public void setRoll(int roll) {
    this.roll = roll;
}
public int getnOfPlayers() {
    return nOfPlayers;
}
public void setnOfPlayers(int nOfPlayers) {
    this.nOfPlayers = nOfPlayers;
}
public ArrayList<PlayerGame> getPlayers() {
    return players;
}
public void setPlayers(ArrayList<PlayerGame> players) {
    this.players = players;
}
public int getPlayerNo() {
    return playerNo;
}
public void setPlayerNo(int playerNo) {
    this.playerNo = playerNo;
}   
} 
```

以下是我的 JSP 文件，输出优先：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<html>
<head>
<title>Test output</title>
</head>
<body>

<h2>Test Roll</h2>

<c:forEach var="player" items="players">
Name <c:out value="${player.name}"/><p>
</c:forEach>

</body>
</html> 
```

这是主页：

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<head>
<title>Bowling</title>
</head>
<body>
<h2>Welcome players!</h2>

<h2>Please enter your names.</h2>

<form:form method="post" action="/multiplayergame/nextName">

<table>
<tr>
    <td><form:label path="name">Name</form:label></td>
    <td><form:input path="name" /></td>
</tr>
<tr>
    <td colspan="2">
        <input type="submit" name = "button" value="Next Player"/>
    </td>
</tr>
</table>     
</form:form>
<form:form method="post" action="/multiplayergame/test">
<tr>
    <td colspan="2">
        <input type="submit" name = "button" value="Play"/>
    </td>
</tr>
</form:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-25T18:03:53.280

将此更改`<c:forEach var="player" items="players">`为`<c:forEach var="player" items="${players}">`

作为您所指的“玩家”字符串。它试图在字符串中查找属性名称。

# c - TCP服务器通过多线程发送和接收多个客户端的数据

> ID：15072926
> 
> 赞同：2
> 
> 时间：2013-02-25T17:35:29.147
> 
> 标签：c, multithreading, sockets, network-programming

我想设计一个监听 x 客户端的 TCP 服务器。X 很小，比如大约 10 并且它是固定的。客户可以随时连接。一旦建立连接（`accept()`成功），我为每个客户端生成一个线程并处理它们。

在这个`handle()`函数中，我想向客户端发送命令并相应地接收数据。

**问题：** 一旦从服务器发送命令，客户端就会通过连续发送数据来响应。如何将命令发送回客户端以停止它？与当前代码一样，我正在循环接收来自客户端的数据。

1.  我不知道如何在接收过程中从服务器线程发送命令，比如一旦建立连接，我是否需要另一个线程（发送 cmds）？
2.  如何不断地从客户端接收数据并同时发送命令？根据用户输入向每个客户端发送命令。（假设用户希望 client1 开始发送数据，那么我必须向 client1 发送 START。并且用户希望停止 client1 发送，所以我需要向 client1 发送 STOP 如果用户希望将 data3 cmd 发送到客户端 4 然后发送命令 DATA3 到 client4 等，这种情况下如何识别客户端？基本上形成一个小协议**

下面的代码在我可以监听套接字和客户端连接并发送数据的地方工作。我不确定如何将用户输入的命令发送到正确的客户端（比如 client4）并同时接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:50:30.533

如果您想要**真正连续**地流式传输数据**并同时**想要交换命令，您将无法绕过额外的连接来建立命令通道。替代方案将是某种多路复用。流式传输一大块数据，检查命令，流式传输下一个块，再次检查命令... - 由于流不断中断，因此复杂且容易出错...

古老的 ftp 协议做了类似的事情：[http](http://en.wikipedia.org/wiki/Ftp) ://en.wikipedia.org/wiki/Ftp和[https://www.rfc-editor.org/rfc/rfc959](https://www.rfc-editor.org/rfc/rfc959)（参见第 2.3 章中的 ascii 艺术）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:42:54.497

过去，我为无法同时通信的低级设备设计了自己的双向协议，这让我很开心。您可以使用的一种方法是相互让步：建立一种在客户端和服务器之间传递消息的机制。流式传输您需要发送的任何命令或消息，然后将流传输到另一端。然后另一方将流式传输任何消息或命令，然后将流传递给原始侧。这种机制的唯一问题是它对于高 ping 连接非常滞后，例如国际互联网连接。

这已经提到过，但我不妨重新讨论一下。计算机已经在其网络硬件中内置了多路复用，因此您可以进行“并发”发送/接收调用。只需为每个连接运行一对线程：一个接收线程和一个发送线程。这应该是最稳健的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:18:46.747

假设您想让另一个线程发起发送命令的请求，您可以使用标准异步 i/o 完成您想要的操作，添加另一个通道 - 管道 - 以接​​收来自另一个线程的命令。伪代码：

```
Master thread:
while(1) {
    newsocket = accept(listen socket)
    pipefds = pipe()
    new thread(Receiver, newsocket, pipefds.read)
}

Receiver thread:
while(1) {
    readfds = [ pipefds.read, newsocket ]
    poll( readfds )  // wait for there to be data on one of the fds
    if (data ready on newsocket) {
           read (newsocket)
           process data
    }
    if (data ready on pipefds.read) {
           read (pipefds.read)
           send command
    }
}

Commander thread:
write (pipefds.write, command) 
```

`select`只要套接字上有要读取的数据，或者另一个线程发送了需要发送到远程连接的命令，主接收器循环就会唤醒。

查找信息的关键系统调用是`poll`（或`select`），和`pipe`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:45:30.297

呜呼！我的朋友，你决定深入研究一个**非常棘手的主题。**

让我首先重新表述您的问题：您的程序**一次只能等待一件事**。如果它正在等待`receive`，它就不能等待`send`。所以你不能同时发送和接收。

这是通过**多路复用**解决的：等待多个事物。

1.  谷歌搜索关键字：`io`, `multiplexing`, `select`, `poll`.
2.  SO相关问题：[使用select读写同一个套接字（TCP）](https://stackoverflow.com/questions/2063366/read-and-write-to-same-socket-tcp-using-select)

另一种方法是进入一个`nonblocking-read -> nonblocking-write -> sleep`循环。这显然不是最佳的，但对于您的情况可能就足够了。

# nagios - 监控远程主机时控制 Nagios 登录频率

> ID：15072931
> 
> 赞同：1
> 
> 时间：2013-02-25T17:35:38.860
> 
> 标签：nagios

我已经构建了一个 Nagios 远程主机监控设置（非 NRPE），它功能强大且有用，除了：

不知何故，我发现 Nagios 主机登录到各种远程主机，只是在一秒钟后（如果不是在同一秒内）注销，每 3 分钟左右一次；它多久执行一次似乎不是确定性的。这些登录与我定义的任何检查周期不一致。

从我的远程主机阵列的 auth.log 的任意成员：

```
Feb 25 10:51:11 MACHINE sshd[3590]: Accepted publickey for nagios from 10.1.2.110 port 54069 ssh2
Feb 25 10:51:11 MACHINE sshd[3590]: pam_unix(sshd:session): session opened for user nagios by (uid=0)
Feb 25 10:51:11 MACHINE sshd[3599]: Received disconnect from 10.1.2.110: 11: disconnected by user
Feb 25 10:51:11 MACHINE sshd[3590]: pam_unix(sshd:session): session closed for user nagios 
```

然后，三分钟后：

```
Feb 25 10:54:10 MACHINE sshd[3632]: Accepted publickey for nagios from 10.1.2.110 port 54176 ssh2
Feb 25 10:54:10 MACHINE sshd[3632]: pam_unix(sshd:session): session opened for user nagios by (uid=0)
Feb 25 10:54:10 MACHINE sshd[3642]: Received disconnect from 10.1.2.110: 11: disconnected by user
Feb 25 10:54:10 MACHINE sshd[3632]: pam_unix(sshd:session): session closed for user nagios 
```

我想不通。我的服务遵循通用服务模板，我已对其进行了修改，以延长检查间隔和最大检查尝试次数。为什么 Nagios 在这个串行登录狂潮中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:20:15.897

你检查过你的主机定义吗？你用什么'检查主机'？如果它“通过”NRPE 检查（而不是类似于“本地”检查 ping）执行检查，那么它也可能正在登录。

您还可以检查 Nagios 日志文件以查看实际执行了哪些检查。我通常执行 'tail -f nagios.log | grep [IP_ADDRESS_of_target_host]' 将结果缩小到特定机器。

如果那里没有显示任何内容，在最后的努力中，您可以启用调试并检查 Nagios 调试文件 - Nagios 所做的一切都会进入该文件。由于调试文件往往滚动得非常快（至少在我们的安装中 - > 6.8K 检查），您可能必须使用 'grep' 来找到您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T14:10:01.880

如果检查返回 CRITICAL/WARNING 状态，则可能是您`retry_interval`的设置为 3 分钟，我认为这是默认设置。仔细检查您的服务模板`nagios/etc/objects/templates`

# javascript - 使用 cocoon 和 rails3-jquery-autocomplete 动态添加预填充的嵌套表单

> ID：15072932
> 
> 赞同：1
> 
> 时间：2013-02-25T17:35:40.437
> 
> 标签：javascript, jquery, ruby-on-rails-3, simple-form, cocoon-gem

谢谢你的时间。

我正在使用 rails 3.2 并且正在使用 gems [simple_form](https://github.com/plataformatec/simple_form)、[cocoon](https://github.com/nathanvda/cocoon)和[rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)。

我有以下模型**Machine、Part、PartUsage、MachineCosting 和 PartCosting**

具有多对多关联的机器和零件模型。

```
 class Machine < ActiveRecord::Base
      attr_accessible :name

      has_many :part_usages
      has_many :parts, :through => :part_usage
    end

    class Part < ActiveRecord::Base
      attr_accessible :name
    end

    class PartUsage < ActiveRecord::Base
      attr_accessible :machine_id, 
                      :part_id
      belongs_to :part
      belongs_to :machine
    end 
```

具有一对多关联的 MachineCosting 和 PartCosting 模型。

```
 class MachineCosting < ActiveRecord::Base

       attr_accessible :machine_id,
                       :total_cost,
                       :machine_name,
                       :part_costings_attributes

       attr_accessor :machine_name                

       has_many :part_costings, :dependent => :destroy

       accepts_nested_attributes_for :part_costings, :allow_destroy => true    

       def machine_name
         self.machine.try(:name)
       end

    end

    class PartCosting < ActiveRecord::Base
      attr_accessible :part_id,
                      :part_name,
                      :cost

      attr_accessor :part_name

      belongs_to :machine_costing
      belongs_to :part

      def part_name
        self.part.try(:name)
      end
    end 
```

机器成本核算表格

意见/machine_costings/_form.html.erb

```
 <%= simple_form_for(@machine_costing, :html => {:multipart => true}) do |f| %>

     <%= f.input :machine_id, :url => autocomplete_machine_id_machines_path, 
            :as => :autocomplete %>

        <!-- HERE, WHENEVER I SELECT A MACHINE, I WANT TO ADD NESTED-FORMS FOR 
     PARTCOSTINGS CORRESPONDING TO ALL THE PARTS OF THE MACHINE I JUST SELECTED.-->

        <%= f.simple_fields_for :part_costings do |part_costing|%>   
          <%= render 'part_costings/part_costing_fields', :f => part_costing %>
        <% end %>

   <% end %> 
```

请建议我如何在字段中选择 machine_id 后使用 javascript 填充和动态添加 PartCostings 的固定字段数。

我很乐意提供更多信息。

再次感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:38:01.327

首先，总结一下我的方法。

*   在 MachineCosting 表单中，使用“rails3-jquery-autopopulate”gem 按名称搜索机器。
*   Hack MachineController 还可以将“零件信息”与匹配的机器一起以 json 形式发送。
*   当用户选择一台机器时，使用 javascript 为 PartCostings 添加nested_forms，并使用以 json 形式接收的数据部分填充它们。

现在这是我的做法（代码部分）。

意见/machine_costings/_form.html.erb

```
 <%= simple_form_for(@machine_costing, :html => {:multipart => true}) do |f| %>
        <%= f.error_notification %>

        <%= f.input :machine_name, :url => autocomplete_machine_name_machines_path, 
                  :as => :autocomplete, :input_html => { :id_element   =>  "#machine_costing_machine_id"} %>

        <%= f.association :machine, :as => :hidden %>

        <div id='part_costings'>
          <%= f.simple_fields_for(:part_costings) do |part_costing|%>   
            <%= render 'part_costings/part_costing_fields', :f => part_costing %>
          <% end %> 

          <div class="links hidden">
            <%= link_to_add_association 'Add part costings', f, :part_costings, 
              :partial => 'part_costings/part_costing_fields' %>
          </div>
        </div>

        <%= f.button :submit%>
    <% end %> 
```

意见/part_costings/_part_costing_fields.html.erb

```
 <div class= 'nested-fields'>    
            <!-- DO NOT CHANGE THE ORDER OF ATTRIBUTES ELSE machine_costing.js WILL FAIL -->
           <%= f.input :part_id, :as=> :hidden %>
           <%= f.text_field :part_name, :disabled => 'disabled' %>           
           <%= f.input :cost %>
           <%= link_to_remove_association '<i class="icon-remove"></i>'.html_safe, f ,:class =>"part_costing_remove" %>
    </div> 
```

控制器/machines_controller.rb

```
 class MachinesController < ApplicationController

      # OVER RIDING THIS BY OWN METHOD
      # autocomplete :machine, :name, :full=> true, :extra_data => [:machine_id]

      def autocomplete_machine_name
        respond_to do |format|
          format.json {
            @machines = Machine.where("name ilike ?", "%#{params[:term]}%")

            render json: json_for_autocomplete_machines(@machines)
          }
        end
      end

      def json_for_autocomplete_machines(machines)
        machines.collect do |machine|

          parts = Hash.new
          unless machine.part_usages.empty?
            machine.part_usages.each do |part_usage|
              parts[part_usage.part.id] = part_usage.part.name
            end
          end

          hash = {"id" => machine.id.to_s, "value" => machine.name,
                            "parts" => parts} 

          hash
        end
      end 

      #
      #
      #

    end 
```

这是javascript部分。

评估/javascripts/machine_costings.js

```
 $(function() {

      // Part Costings
      var part_id;
      var part_name;

      $('#machine_costing_machine_name').bind('railsAutocomplete.select', function(event, data){
        console.debug("Machine selected...");
        parts = data.item.parts;
        console.debug("Removing existing part_costings...");
        $('.part_costing_remove').click();
        console.debug("Adding part_costings...");
        for(var id in parts) {
         part_id = id;
         part_name = parts[id];
         $('.add_fields').click();
        }
        console.debug("Done adding all part_costings...");
      });

      $('#part_costings').bind('cocoon:after-insert', function(e, part_costing) {
        part_costing[0].getElementsByTagName('input')[0].value = part_id;
        part_costing[0].getElementsByTagName('input')[1].value = part_name;
        console.debug("Added part_costing...");
      });

    }); 
```

路线.rb

```
 resources :machines  do
      get :autocomplete_machine_name, :on => :collection
  end 
```

javascript解决方案的关键点是......

1.  rail3-jquery-autocomplete gem 中的方法“bind('railsAutocomplete.select', function(event, data)”。

2.  来自 cocoon gem 的方法“bind('cocoon:after-insert', function(e, part_costing)”。

就这样。如果您有任何建议，请告诉我。谢谢 ：）

# r - 重新编码错误

> ID：15072936
> 
> 赞同：0
> 
> 时间：2013-02-25T17:35:52.180
> 
> 标签：r

尝试将我的缺失值重新编码到`NA`包中`R`，`epicalc`我收到以下错误：

```
 recode(trstlglR, 99 , NA, dataFrame=ESSround5)
 Error in search()[[pos]] : attempt to select more than one element 
```

尽管该命令似乎做了我想做的事，但我担心我遗漏了一些东西。数据框太大，无法检查每个值。有人对此有经验吗？

可复制的例子：

```
structure(list(trstlglR = c(0L, 0L, 0L, 1L, NA, NA, NA, NA, 0L, 
0L), trstplcR = c(0L, 0L, 0L, 0L, 0L, NA, NA, 0L, 0L, 0L), plcarcrR = c(0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, NA, NA)), .Names = c("trstlglR", 
"trstplcR", "plcarcrR"), row.names = c(1L, 2L, 3L, 5714L, 2450L, 
2980L, 3837L, 6136L, 2197L, 2198L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:50:49.680

如果您查看`?recode`，示例首先执行以下操作：

```
use(.data) 
```

在运行之前`recode`。现在，如果您阅读什么是`?use`，那么您会发现：

> “使用”从 Dbase (.dbf)、Stata (.dta)、SPSS(.sav)、EpiInfo(.rec) 和逗号分隔值 (.csv) 格式以及 R 数据帧中读取数据集。目标数据框保存在内存中，默认为“.data”，并自动附加到搜索路径。**此设置是 'epicalc' 的其他命令的基础，包括 'des'、'summ'、'recode'、'label.var' 等。**

所以你需要做的是：

```
set.seed(45)
df <- data.frame(x=sample(1:3, 20, replace=T), y=sample(20))

use(df) # first to copy this to .data and attach.
recode(x, 2, NA, df) # not it should work without errors

#     x  y
# 1  NA 15
# 2  NA  6
# 3  NA  3
# 4   3  8
# 5  NA  1
# 6  NA 16
# 7   3  5
# 8   3  9
# 9   1 10
# 10  3 20
# 11 NA 11
# 12  1  4
# 13 NA  2
# 14 NA 12
# 15  1 13
# 16  3 17
# 17 NA 18
# 18  3 19
# 19  1  7
# 20  1 14 
```

# android - Facebook SDK for Android - 以编程方式设置应用程序 ID

> ID：15072937
> 
> 赞同：12
> 
> 时间：2013-02-25T17:35:56.947
> 
> 标签：android, facebook-android-sdk

我有一个本机 Android 应用程序，它需要根据可以在运行时更改的应用程序设置连接到不同的 Facebook 应用程序（不同的应用程序 ID）。

想象一下，可以将应用程序设置为指向 DEV、TEST 或 PROD。当指向 DEV 时，FB 应用程序 ID 应为“1”。当指向 TEST 时，FB 应用程序 ID 应为“2”。等等

问题是来自 Facebook SDK 的 UiLifecycleHelper 在 onCreate 阶段自动从 AndroidManifest.xml 读取“com.facebook.sdk.ApplicationId”。似乎没有办法以编程方式设置它。

是否可以在运行时使用 UiLifecycleHelper 并指向不同的应用程序 ID，或者我是否必须退回到手动管理会话？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-14T08:32:56.597

你好，我知道上面的答案是正确的`older sdk version`，但是`facebook sdk 4`没有`Session`课程

您可以使用以下单行代码简单地做到这一点：

```
FacebookSdk.setApplicationId(APP_ID); 
```

谢谢！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-10T02:16:16.713

这是我用来以编程方式设置应用程序 ID 的内容

```
 private Session.StatusCallback statusCallback = new SessionStatusCallback();

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String s=""+R.string.app_id;

    Session session = new Session.Builder(getBaseContext()).setApplicationId(s).build();

    Session.setActiveSession(session);

    if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    }
}

private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        // TODO Auto-generated method stub
        if(session.isOpened()){
            //Do your task
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T22:58:28.760

是的，您可以通过编程方式进行设置。使用 Sessions$Builder 类，它允许您构建会话而无需使用私有构造函数之一。

```
Session session = new Session.Builder(context).setApplicationId(applicationId).build(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T06:39:26.503

我决定在 GitHub 上 fork facebook-android-sdk 项目并进行必要的更改。如果有人感兴趣，我已经提交了包含我的更改的拉取请求，[https://github.com/facebook/facebook-android-sdk/pull/294](https://github.com/facebook/facebook-android-sdk/pull/294)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-12T16:14:20.477

我认为有一种更简单的方法可以做到这一点，只需调用静态方法 setApplicationId`com.facebook.Settings.setApplicationId(facebookID);`

你可以走了。无需使用 Builder 手动创建会话并将其设置为活动会话！

**缺陷详情：**

您在设置类中设置的 facebookID 将通过以下`getMetadataApplicationId`方法使用`com.facebook.internal.Utility`

```
public static String getMetadataApplicationId(Context context) {
        Validate.notNull(context, "context");

        Settings.loadDefaultsFromMetadata(context);

        return Settings.getApplicationId();
    } 
```

所有调用都将使用它来创建会话：

```
Session(Context context, String applicationId, TokenCachingStrategy tokenCachingStrategy,
            boolean loadTokenFromCache) {
        // if the application ID passed in is null, try to get it from the
        // meta-data in the manifest.
        if ((context != null) && (applicationId == null)) {
            applicationId = Utility.getMetadataApplicationId(context);
        }

        Validate.notNull(applicationId, "applicationId");
.
.
.
} 
```

干杯。

# c# - 为什么 SSIS 脚本任务无法评估表达式？

> ID：15072939
> 
> 赞同：0
> 
> 时间：2013-02-25T17:36:06.660
> 
> 标签：c#, sql-server, ssis, etl, business-intelligence

### SSIS 脚本任务错误

我有一个包含目录和文件名的表，然后我想将其用作到/来自文本文件的连接字符串。

我使用 foreach 循环从分配给变量的表中获取值，而不是我有一个表达式变量，它是源 Dir + 源文件名的组合，并且因为没有其他方法可以检查文件是否仅存在于 SSIS有一个脚本任务，我这样做了

```
public void chkIfExist()
{
    if (File.Exists(Dts.Variables["User::srcFull"].Value.ToString()))
    {
        Dts.TaskResult = (int)ScriptResults.Success;    
    }
    else
    {
        Dts.TaskResult = (int)ScriptResults.Failure;
    }
} 
```

注意：`User::srcFull`是一个可验证的表达式`@[User::srcPath] + @[User::srcFile]`

它一直在我身上崩溃，所以我在运行时在脚本中放置了一个手表，`Dts.Variables["User::srcFull"].Value.ToString()`我得到并且函数评估超时。

我试图弄清楚发生了什么，我得出的结论是，由于这些值来自原始集，这就是脚本组件无法评估它的原因......

为什么表达式无法在脚本任务中正确计算？有谁如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:21:06.163

### 可能的选项：

您可以使用*`Execute SQL Task`*来获取记录集，而不是使用*`Data Flow Task`*.

### SSIS 2012 包说明了示例：

让我们假设`dbo.FileNames`您的数据数据库中有一个表，其中包含一些示例行。

### 创建和填充表脚本：

```
CREATE TABLE dbo.FileNames(
    srcPath nvarchar(255) NULL,
    srcName nvarchar(60) NULL
);

GO

INSERT INTO dbo.FileNames (srcPath, srcName) VALUES
        ('C:\temp', 'File_1.txt')
    ,   ('C:\temp', 'File_2.txt')
    ,   ('C:\temp', 'File_3.txt')
    ;
GO 
```

如下所示配置*控制流选项卡。*放置一个*`Execute SQL Task`*以读取表数据并将其存储在对象数据类型中。将 a`Foreach Loop Container`放在 Execute SQL Task 之后，并将 a*`Script Task`*放在*Foreach 循环容器中*

![控制流选项卡](../Images/488904c8c715268cbf269c0c83c95489.png)

创建以下变量。建议`@[User::srcPath] + "\\" + @[User::srcFile]`在变量上使用表达式，*`srcFull`*这样如果路径缺少尾部反斜杠，它将相应地添加到路径和文件名之间。

```
Variable name  Scope         Data type  Expression
-------------- ------------- ---------- -----------
FileNames      SO_15072939   Object
srcFile        SO_15072939   String
srcFull        SO_15072939   String     @[User::srcPath] + "\\" + @[User::srcFile]
srcPath        SO_15072939   String 
```

![变量](../Images/fbf132eabe26eb9d8ded5fb074f5589a.png)

配置*执行 SQL 任务*以针对连接管理器运行以下查询以读取文件路径和名称信息。

```
SELECT srcPath, srcName FROM dbo.FileNames 
```

![执行 SQL 任务 - 常规](../Images/48d16b60106697269670a09babc6443d.png)

查询返回的结果集应该存储到*`FileNames`*数据类型的变量中*`Object`*。

![执行 SQL 任务 - 结果集](../Images/28d5b413faceff5e86b1efe48cc05bac.png)

配置以使用*`Foreach Loop Container`*读取变量*FileNames**`Foreach ADO Enumerator`*。

![Foreach 循环容器 - 集合](../Images/448f7afdf19815a433b558d7250752c5.png)

配置两个包变量以在循环遍历结果集时存储列值。

![Foreach 循环容器 - 变量映射](../Images/52c803439444818a445cf75cf9a686a9.png)

配置*脚本任务编辑器*以读取变量**`srcFull`**

![脚本任务编辑器](../Images/38f7e9b571ccd6f86da103e8ae30befc.png)

将以下代码添加到脚本任务。

### 用于 SSIS 2008 及更高版本的 C# 脚本任务代码：

```
#region Namespaces
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.IO;
#endregion

namespace ST_f1d7b6ab42e24ad5b5531684ecdcae87
{
    [Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {
        public void Main()
        {
            string filePath = Dts.Variables["User::srcFull"].Value.ToString();

            MessageBox.Show(filePath);

            Dts.TaskResult = File.Exists(filePath)
                                ? (int)ScriptResults.Success
                                : (int)ScriptResults.Failure;
        }

        #region ScriptResults declaration
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion
    }
} 
```

![脚本任务代码](../Images/a6de22409c276d1390cc08d89d3f5405.png)

执行包将显示变量值在*`MessageBox`*.

![包执行](../Images/325ab8c9649b7db4e93e4f61f45bd7dc.png)

此示例中的包将失败，因为路径**`C:\temp\File_1.txt`**不存在。

![包裹失败](../Images/19adbf35ae7f1fde3ddb54362f8437bd.png)

### 回复 OP 的评论：

> 我做了你在这里展示给我的事情，似乎我的问题是因为 User::srcFile 变量作为 ReadWriteVariables 添加到脚本任务中（因为我需要在同一个脚本中用它做一些事情）它有点被锁定所以定义为 @[User::srcPath] + @[User::srcFile] 的 User::srcFull 变量无法计算。

我在*脚本任务编辑器*上将变量*`srcFull`*从*`ReadOnlyVariables`*更改为，并且表达式仍然正确评估。我在示例输入中创建了这三个文件，并且包在消息框中正确显示了每个路径并成功完成了执行。**`ReadWriteVariables`**

 *将变量添加*`srcPath`*到脚本任务编辑*`srcFile`*器**`ReadWriteVariables`**部分只会导致冲突，因为现在*脚本任务*和*Foreach 循环容器*都在尝试更新相同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:19:22.563

对于初学者，我会在调用之前使用所有三个变量引发信息事件`File.Exists`：

```
public void chkIfExist()
{
    bool fireAgain = true;
    Dts.Events.FireInformation(0,
        "MyScriptTask",
        String.Format("srcPath is \"{0}\"", Dts.Variables["User::srcPath"].Value),
        "",
        0,
        ref fireAgain);
    Dts.Events.FireInformation(0,
        "MyScriptTask",
        String.Format("srcFile is \"{0}\"", Dts.Variables["User::srcFile"].Value),
        "",
        0,
        ref fireAgain);
    Dts.Events.FireInformation(0,
        "MyScriptTask",
        String.Format("srcFull is \"{0}\"", Dts.Variables["User::srcFull"].Value),
        "",
        0,
        ref fireAgain);
    string fullPath = Dts.Variables["User::srcFull"].Value.ToString();
    if (System.IO.File.Exists(fullPath))
    {
        Dts.TaskResult = (int)ScriptResults.Success;
    }
    else
    {
        Dts.TaskResult = (int)ScriptResults.Failure;
    }
} 
```

此处的目的是更好地了解失败记录的外观。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-06T18:46:26.783

您需要传递该`ReadOnlyVariables`部分中的所有变量，以便 scriptTask 评估它们。在你的情况下，我认为你的 ReadOnlyVariables 应该是`srcPath, srcFile, srcFull`*

# ios - 检查不是我的 IOS 的应用程序的 Web 视图

> ID：15072941
> 
> 赞同：1
> 
> 时间：2013-02-25T17:36:14.330
> 
> 标签：ios, webview, web-inspector

我刚刚从应用商店下载了一个应用，并且我看到了一些我想检查的有趣的网络内容。我无法在桌面上的 Safari 中做到这一点，可能是因为该应用程序不是我的。

有没有办法做到这一点？如果需要，我可以越狱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T01:26:29.983

您应该能够使用调试代理服务器（例如 Fiddler）来实现此目的

在这里查看有关同时配置 Fiddler 和 iOS 的信息

[http://fiddler2.com/documentation/Configure-Fiddler/Tasks/ConfigureForiOS](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/ConfigureForiOS)

# azure - Azure 上未触发的按钮事件代码

> ID：15072942
> 
> 赞同：1
> 
> 时间：2013-02-25T17:36:22.267
> 
> 标签：azure, azure-table-storage, azure-web-app-service

我有一个相当简单的单页 Web 应用程序，我已经在本地进行了全面测试。此应用程序是一个简单的表单提交，数据存储在 Azure 表存储容器中。我有一个用于提交按钮的代码隐藏函数，我正在执行服务器端验证，并在弹出窗口中显示消息。

在我的本地机器上一切正常，包括所有数据存储和检索回 Azure。将站点发布到 Azure 后，代码隐藏将不会触发，并且站点本身也不会出现任何错误。有任何想法吗？

布赖恩

请查看以下所有代码：

```
<form id="form1" runat="server">
    <telerik:RadWindowManager ID="DefaultWindowMgr" runat="server"></telerik:RadWindowManager>
    <telerik:RadScriptManager ID="RadScriptManager1" runat="server"></telerik:RadScriptManager>

    <div id="main" style="width:1024px; height:650px; margin-left:auto; margin-right:auto; background-image:url(../Images/earthBG.png);">
        <div id="left" style="width:500px;float:left;left:5px;margin-left:auto;margin-right:auto;">
            <asp:Image ID="Image1" runat="server" ImageAlign="Middle" ImageUrl="~/Images/TRACLogo.png" />
            <asp:Image ID="Image2" runat="server" ImageUrl="~/Images/dashboardGlobe.png" ImageAlign="Middle" />
        </div>
        <div id="right" style="width:500px;float:right;top:75px;position:relative;">
            <p>Some kind of Welcome Text needs to go here.</p>
            <table id="RiskFormTable" style="width:100%;padding:5px;">
                <tr>
                    <td style="text-align:right"><asp:Label ID="LblCompany" runat="server" Text="Company Name:"></asp:Label></td>
                    <td style="text-align:left"><telerik:RadTextBox ID="TxtCompany" runat="server" Width="220px"></telerik:RadTextBox></td>
                </tr>
                <tr>
                    <td style="text-align:right"><asp:Label ID="LblEmail" runat="server" Text="Email Address of POC:"></asp:Label></td>
                    <td style="text-align:left"><telerik:RadTextBox ID="TxtEmail" runat="server" Width="220px"></telerik:RadTextBox></td>
                </tr>
                <tr>
                    <td style="text-align:right"><asp:Label ID="LblCountries" runat="server" Text="What countries do you do business in?"></asp:Label></td>
                    <td style="text-align:left">
                        <telerik:RadListBox ID="LstCountries" runat="server" DataSortField="name" DataSourceID="XMLCountriesSource" DataTextField="name" DataValueField="score" Height="118px" SelectionMode="Multiple" Sort="Ascending" Width="220px" CausesValidation="False"></telerik:RadListBox>
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right"><asp:Label ID="LblPrimary" runat="server" Text="What is your primary customer segment?"></asp:Label></td>
                    <td style="text-align:left">
                        <telerik:RadComboBox ID="DDLPrimary" runat="server" Width="220px" DataSourceID="XMLSegmentsSource" DataTextField="name" DataValueField="value" CausesValidation="False"></telerik:RadComboBox>
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right"><asp:Label ID="LblSecondary" runat="server" Text="What is your secondary customer segment?"></asp:Label></td>
                    <td style="text-align:left">
                        <telerik:RadComboBox ID="DDLSecondary" runat="server" Width="220px" DataSourceID="XMLSegmentsSource" DataTextField="name" DataValueField="value" CausesValidation="False"></telerik:RadComboBox>
                    </td>
                </tr>
                <tr>
                    <td style="text-align:right" colspan="2">
                        <telerik:RadButton ID="BtnSubmit" runat="server" Text="Submit" SingleClick="true" OnClick="BtnSubmit_Click" CausesValidation="False"></telerik:RadButton>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    </form> 
```

这是后面的代码：

```
using System;
using System.Configuration;
using TRACERiskLibrary.Entities;
using TRACERiskLibrary.Managers;

namespace TRACERisk
{
    public partial class Default2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        /// <summary>
        /// This function will get fired when a user submits the Risk Assessment data. It will verify that all of the 
        /// data is accurate and then will save the entry to the Azure Table that is found within the web.config file.
        /// If any of the data is inaccurate or there is a problem with the saving of the data, the error will be
        /// displayed to the user within the RadWindowManager Alert window.
        /// </summary>
        protected void BtnSubmit_Click(object sender, EventArgs e)
        {
            String azureconn = ConfigurationManager.ConnectionStrings["traceRiskAzure"].ConnectionString;
            String azuretable = ConfigurationManager.AppSettings["AzureTable"];

            if (TxtEmail.Text.CompareTo("") == 0 || TxtEmail.Text.IndexOf('@') < 0 || TxtEmail.Text.IndexOf('.') < 0)
            {
                DefaultWindowMgr.RadAlert("You must enter in a valid Email Address for this submission to be valid. Please try again.", 400, 250, "Risk Survey Submission Error", "");
                return;
            }

            DellRiskEntity entity = new DellRiskEntity(TxtEmail.Text);

            if (TxtCompany.Text.CompareTo("") == 0)
            {
                DefaultWindowMgr.RadAlert("You must enter in a Company Name for this submission to be valid. Please try again.", 400, 250, "Risk Survey Submission Error", "");
                return;
            }
            else
                entity.Company = TxtCompany.Text;

            entity.PrimaryBus = DDLPrimary.SelectedItem.Text;
            entity.PrimaryScore = (Int32) Decimal.Parse(DDLPrimary.SelectedValue);
            entity.SecondaryBus = DDLSecondary.SelectedItem.Text;
            entity.SecondaryScore = (Int32) Decimal.Parse(DDLSecondary.SelectedValue);

            // Verify that the user entered in at least one country of business, if not throw up an error message and stop processing. 
            Int32 countryscore = 0;
            if (LstCountries.SelectedItems.Count == 0)
            {
                DefaultWindowMgr.RadAlert("Please select one or more Countries for which you do business before submitting.", 400, 250, "Risk Survey Submission Error", "");
                return;
            }
            else
            {
                for (int i = 0; i < LstCountries.SelectedItems.Count; i++)
                {
                    entity.Countries.Add(LstCountries.SelectedItems[i].Text);
                    if (Int32.Parse(LstCountries.SelectedItems[i].Value) > countryscore)
                        countryscore = Int32.Parse(LstCountries.SelectedItems[i].Value);
                }
            }
            entity.CountryScore = countryscore;
            entity.TotalScore = entity.PrimaryScore + entity.SecondaryScore + entity.CountryScore;

            if (entity.TotalScore < 11)
                entity.TierLevel = "Tier 1";
            else if (entity.TotalScore < 21)
                entity.TierLevel = "Tier 2";
            else
                entity.TierLevel = "Tier 3";

            // Process the actual saving of the Risk Assessment within the Azure Table
            if (RiskManager.SaveEntry(entity, azureconn, azuretable))
                DefaultWindowMgr.RadAlert("Your Risk Assessment has been Successfully submitted.", 400, 250, "Risk Survey Submitted", "");
            else
                DefaultWindowMgr.RadAlert("There is a record within the Risk Assessment associated with this email address. Please enter new Risk Assessment Data.", 400, 250, "Risk Survey Submission Error", "");
        }
    }
} 
```

# mysql - MySQL 触发器（插入前）

> ID：15072946
> 
> 赞同：0
> 
> 时间：2013-02-25T17:36:43.977
> 
> 标签：mysql, triggers

我有两个表`inspect`，有列`inspect_id (pk), inspect_loc` 和`duplicate_inspect`有列`inspect_id, inspect_loc`。我需要一个 MySQL 触发器，仅当插入的数据已经可用`duplicate_inspect`时才将数据插入。`inspect`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:00:06.497

例如 ..

```
CREATE TRIGGER duplicate 
BEFORE INSERT ON duplicate_inspect
FOR EACH ROW
BEGIN
  IF new.inspect_id = inspect_id THEN
    INSERT INTO duplicate_inspect (inspect_id,inspect_loc) values('','');
  END IF;
END 
```

我现在无法测试，但您需要这些值。（我认为所有代码都可以）。

# php - PHP搜索引擎注意事项：未定义索引：类别

> ID：15072949
> 
> 赞同：1
> 
> 时间：2013-02-25T17:37:09.563
> 
> 标签：php, search-engine

大家好，我已经在一些帮助下制作了一个脚本，他们在一个类别中浏览示例：我们有下一个类别 PCgames、All 和 Documents。X 用户正在 PCgames 中搜索 Y 游戏。脚本在 PCgames 中搜索 Y 游戏并显示所有结果。但是当用户单击搜索按钮时，服务器显示下一个错误注意：未定义索引：第 5 行 HTML 代码上 search.php 中的类别

```
 <form action="search.php" method="POST">
<p><br />
<input name="q" type="hidden" />
<font color="black">Hunt Data:</font>
<input type="text" style="width: 180px" name="qfront" id="name" />
<select name="category">
<option value="0" id="all">All</option>
<option value="1" id="PCgames">PC-Games</option>
<option value="2" id="Console">Console</option>
<option value="3" id="Movies">Movies</option>
<option value="4" id="Music">Music</option>
<option value="5" id="XXX">XXX</option>
<option value="6" id="Windows">Windows</option>
<option value="7" id="Linux">Linux</option>
<option value="8" id="Software">Software</option>
<option value="9" id="Documents">Documents</option>
</select>
<input type="submit" value="Search" />
</p>
</form> 
```

search.php 文件

```
 <?php
//define each directory here, the index starts with 0 == all and so on.
$categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Documents/');
//if option selected and its valid number
if($_POST['category'] && ctype_digit($_POST['category'])){    //line 5
 if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])){
   $handle = opendir($categorydir[$_POST['category']]);
 }else{
   echo 'target directory not found';
 }
}else{
 //please enter an option
}
?> 
```

注意事项的一些帮助：未定义的索引：第 5 行的 search.php 中的类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:50:06.553

```
if(isset($_POST['category']) {
 if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']])){

 }
} 
```

和你的阵列

```
 $categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Documents/'); 
```

有 3 个条目，尽管您的表单有 10 只猫。

# eclipse - 如何在 Eclipse 中使用 subclipse

> ID：15072951
> 
> 赞同：2
> 
> 时间：2013-02-25T17:37:21.210
> 
> 标签：eclipse, subclipse

我想使用带有 Eclipse 的 subclipse 下载 android-pdf 项目。我已经在 Eclipse 上安装了 subclipse 并重新启动了 Eclipse。我尝试过文件>导入，但虽然有 CVS 选项，但我看不到 SVN 选项。该项目位于 Google Project Hosting 上，我从 Eclipse 任务栏中单击了“导入 Google 托管项目”-显示“选择 Google 托管项目”，但未显示任何项目。我希望有人能够帮助我下载这个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T11:31:41.557

这个问题很久以前就发布了，但我正在回复访问此链接的人。也可以检查[此链接](http://pallandri.blogspot.com/2014/01/using-subclipse-with-eclipse-and.html)。这是安装和连接到谷歌代码的完整分步过程：

转到 Eclipse 帮助菜单并单击“安装新软件”安装 Subclipse：为 subclipse 添加以下站点 [http://subclipse.tigris.org/update_1.10.x/](http://subclipse.tigris.org/update%5f1.10.x/) 从名称中选择“Subclipse”和“SVNKit”添加subclipse链接后出现点击下一步，接受条件并让eclipse下载并安装subclipse 现在安装后重新启动Eclipse Subclipse现在可以使用了 转到windows菜单下的“preferences” 转到左侧菜单中的“Team”然后选择“SVN”子菜单 在“General SVN Setting”中选择 Team 和“SVN”子菜单 在“SVN interface”下拉菜单中选择 SVNKit (Pure Java)--- 下一步是连接子剪辑用谷歌代码

首先我们要创建一个项目。创建项目的说明可以在 Google Code 上创建项目中找到

在 Google 代码上创建项目后，必须将 Subclipse 连接到该项目。

转到 Eclipse，点击“Windows”菜单，“显示视图”并选择“其他”选择“SVN”和“SVN 存储库”并单击确定。右键单击“SVN 存储库”选项卡并选择“新建”-“存储库”位置”“添加 SVN 存储库”窗口打开。对于位置 URL，请提供您的 URL，该 URL 应类似于 [https://your_url.googlecode.com/svn/trunk](https://your%5furl.googlecode.com/svn/trunk) 在我的情况下，该 URL 是“ [https://agent-desktop。 googlecode.com/svn/trunk](https://agent-desktop.googlecode.com/svn/trunk)" 对于在 Google 代码上创建项目帖子中创建的项目。在提供 URL 后单击完成 完成后您将被要求输入用户名和密码，此密码可以在 SVN 选项卡下的项目主页上找到。搜索链接 googlecode.com 密码 在 Source -> Checkout 下，点击链接（googlecode.com 密码）并保存生成的密码。现在 Subclipse 已连接到 Google 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:45:52.533

如果您在“文件”>“导入”对话框中没有看到“SVN”组，则表示未安装 Subclipse。如果安装了它，就没有任何东西可以阻止显示该分组。

我通常会建议打开 SVN 存储库透视图并添加存储库。但我猜你也看不到。

# c# - 使用对象序列化器序列化列表

> ID：15072953
> 
> 赞同：1
> 
> 时间：2013-02-25T17:37:29.010
> 
> 标签：c#, xml

我正在使用[此博客条目](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)`SerializableDictionary`中定义的内容来存储数据并将其传递给/从 WCF 服务传递。如果我使用值类型作为值，这很好用，因为它们可以很容易地装箱成为s。但是，如果我使用类似的东西`<string, object>``object`

`new List<int>() { 5, 10 }`，我得到一个例外：

> 类型 System.Collections.Generic.List`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] 不能在此上下文中使用。

根据[这里](https://stackoverflow.com/questions/2434534/serialize-an-object-to-string)的讨论，我应该使用`value.GetType()`初始化`XmlSerializer`；但是，虽然这让我可以序列化，但我不知道如何以一般方式反序列化回我的`SerializableDictionary`.

我不确定是否有办法干净地更改它同时仍然允许`<string, object>`作为我的类型参数 - 我可以将值序列化为二进制而不是 XML 并以这种方式传输它（相同的代码正在序列化和反序列化，所以我不是担心互操作性），但如果可能的话，我希望拥有 XML。

**编辑**

完整代码示例：

```
XmlSerializer serializer = new XmlSerializer(typeof(SerializableDictionary<string, object>));
SerializableDictionary<string, object> dic = new SerializableDictionary<string, object>();
dic["test"] = new List<int>() { 5, 10 };
StringBuilder sb = new StringBuilder();
XmlWriter writer = XmlWriter.Create(sb);
serializer.Serialize(writer, dic);
string ser = sb.ToString(); 
```

**解决方案**

感谢**Nico Schertler**给了我正确的答案。我在这里发布我的最终代码，以防有人需要。这与第一个链接中的原始代码向后兼容，因此由该代码序列化的任何内容都可以由下面的反序列化。

```
[XmlRoot("dictionary")]
public class SerializableDictionary<TKey, TValue> : Dictionary<TKey, TValue>, IXmlSerializable
{

    #region " IXmlSerializable Members "

    #region " WriteXml "

    public void WriteXml(XmlWriter writer)
    {
        // Base types
        string baseKeyType = typeof(TKey).AssemblyQualifiedName;
        string baseValueType = typeof(TValue).AssemblyQualifiedName;
        writer.WriteAttributeString("keyType", baseKeyType);
        writer.WriteAttributeString("valueType", baseValueType);

        foreach (TKey key in this.Keys)
        {
            // Start
            writer.WriteStartElement("item");

            // Key
            Type keyType = key.GetType();
            XmlSerializer keySerializer = GetTypeSerializer(keyType.AssemblyQualifiedName);

            writer.WriteStartElement("key");
            if (keyType != typeof(TKey)) { writer.WriteAttributeString("type", keyType.AssemblyQualifiedName); }
            keySerializer.Serialize(writer, key);
            writer.WriteEndElement();

            // Value
            TValue value = this[key];
            Type valueType = value.GetType();
            XmlSerializer valueSerializer = GetTypeSerializer(valueType.AssemblyQualifiedName);

            writer.WriteStartElement("value");
            if (valueType != typeof(TValue)) { writer.WriteAttributeString("type", valueType.AssemblyQualifiedName); }
            valueSerializer.Serialize(writer, value);
            writer.WriteEndElement();

            // End
            writer.WriteEndElement();
        }
    }

    #endregion

    #region " ReadXml "

    public void ReadXml(XmlReader reader)
    {
        bool wasEmpty = reader.IsEmptyElement;
        reader.Read();

        if (wasEmpty)
        {
            return;
        }

        // Base types
        string baseKeyType = typeof(TKey).AssemblyQualifiedName;
        string baseValueType = typeof(TValue).AssemblyQualifiedName;

        while (reader.NodeType != XmlNodeType.EndElement)
        {
            // Start
            reader.ReadStartElement("item");

            // Key
            XmlSerializer keySerializer = GetTypeSerializer(reader["type"] ?? baseKeyType);
            reader.ReadStartElement("key");
            TKey key = (TKey)keySerializer.Deserialize(reader);
            reader.ReadEndElement();

            // Value
            XmlSerializer valueSerializer = GetTypeSerializer(reader["type"] ?? baseValueType);
            reader.ReadStartElement("value");
            TValue value = (TValue)valueSerializer.Deserialize(reader);
            reader.ReadEndElement();

            // Store
            this.Add(key, value);

            // End
            reader.ReadEndElement();
            reader.MoveToContent();
        }
        reader.ReadEndElement();
    }

    #endregion

    #region " GetSchema "

    public XmlSchema GetSchema()
    {
        return null;
    }

    #endregion

    #endregion

    #region " GetTypeSerializer "

    private static readonly Dictionary<string, XmlSerializer> _serializers = new Dictionary<string, XmlSerializer>();
    private static readonly object _deadbolt = new object();
    private XmlSerializer GetTypeSerializer(string type)
    {
        if (!_serializers.ContainsKey(type))
        {
            lock (_deadbolt)
            {
                if (!_serializers.ContainsKey(type))
                {
                    _serializers.Add(type, new XmlSerializer(Type.GetType(type)));
                }
            }
        }
        return _serializers[type];
    }

    #endregion

} 
```

我只写出与基本类型不同的类型，以降低 XML 的长度，并且我保留`XmlSerializer`s 的静态列表，以防止到处实例化它们。我确实必须在开始时写出提供的类型，以便能够防止写出每个节点上的类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:38:39.980

序列化的问题在于（反）序列化器需要知道如何处理对象。的序列化程序`object`不知道如何序列化`List<int>`.

对于序列化，您已经在问题中给出了答案。用于`value.GetType()`确定值的类型。此外，您必须保存类型本身。这可以通过类型 ( `type.AssemblyQualifiedName`) 的字符串表示轻松实现。

```
TValue value = this[key];

var type = value.GetType();
XmlSerializer valueSerializer = new XmlSerializer(type);

writer.WriteStartElement("type");
writer.WriteString(type.AssemblyQualifiedName); 
//you can use FullName if you don't need to address external libraries
writer.WriteEndElement();

writer.WriteStartElement("content");
valueSerializer.Serialize(writer, value);
writer.WriteEndElement(); 
```

对于反序列化，您需要读取类型并反序列化值：

```
reader.ReadStartElement("value");

reader.ReadStartElement("type");
var typename = reader.ReadContentAsString();
reader.ReadEndElement();
var type = Type.GetType(typename);
XmlSerializer valueSerializer = new XmlSerializer(type);

reader.ReadStartElement("content");
TValue value = (TValue)valueSerializer.Deserialize(reader);
reader.ReadEndElement();

reader.ReadEndElement(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:48:26.183

在您在链接中引用的课程中，执行以下操作

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.Collections;

namespace sampleLogin
{

    [XmlRoot("dictionary")]
    public class SerializableDictionary<TKey, TValue> : Dictionary<TKey, TValue>, IXmlSerializable
    {
        #region IXmlSerializable Members

        public System.Xml.Schema.XmlSchema GetSchema()
        {
            return null;
        }

        public void ReadXml(System.Xml.XmlReader reader)
        {
            XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
            XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));
            bool wasEmpty = reader.IsEmptyElement;

            reader.Read();
            if (wasEmpty)
            {
                return;
            }

            while (reader.NodeType != System.Xml.XmlNodeType.EndElement)
            {
                reader.ReadStartElement("item");
                reader.ReadStartElement("key");
                TKey key = (TKey)keySerializer.Deserialize(reader);
                reader.ReadEndElement();
                reader.ReadStartElement("value");
                TValue value = (TValue)valueSerializer.Deserialize(reader);
                reader.ReadEndElement();
                this.Add(key, value);
                reader.ReadEndElement();
                reader.MoveToContent();
            }
            reader.ReadEndElement();
        }

        public void WriteXml(System.Xml.XmlWriter writer)
        {
            XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
            XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));

            foreach (TKey key in this.Keys)
            {
                writer.WriteStartElement("item");
                writer.WriteStartElement("key");
                keySerializer.Serialize(writer, key);
                writer.WriteEndElement();
                writer.WriteStartElement("value");
                TValue value = this[key];
                var type = value.GetType();//new line added here
                valueSerializer = new XmlSerializer(type);//New line added here 
                valueSerializer.Serialize(writer, value);
                writer.WriteEndElement();
                writer.WriteEndElement();
            }
        }
        #endregion
    } 
```

# r - as.Date，日期格式为 R 中的 m/d/y

> ID：15072955
> 
> 赞同：4
> 
> 时间：2013-02-25T17:37:31.610
> 
> 标签：r, date, r-faq

一位客户向我发送了一个 Excel 文件，其日期格式为 2012 年 3 月 15 日，日期为 3 月 15 日。我将其保存为 .csv 文件，然后使用

```
camm$Date <- as.Date(camm$Date, "%m/%d/%y") 
```

但这给了我从 2020 年开始的价值！

我试图重新格式化原始 csv 文件中的日期，以便它们例如 2013 年 3 月 14 日，但无法这样做。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T17:39:42.210

改为使用资本`Y`。`as.Date`这应该可以解决问题：

```
> as.Date("3/15/2012", "%m/%d/%Y")
[1] "2012-03-15" 
```

从帮助文件的示例中，您可以意识到当年份已满时，您应该使用`%Y`其他方式`%y`，例如：

```
> dates <- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
> as.Date(dates, "%m/%d/%y")
[1] "1992-02-27" "1992-02-27" "1992-01-14" "1992-02-28" "1992-02-01" 
```

您可以看到，在您的示例中，年份格式是 2012，那么您应该使用`%Y`，而在另一个示例中（取自`as.Date`帮助文件）年份格式是 92，那么使用`%y`是正确的方法。有关详细信息，请参阅`as.Date`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:56:19.470

`lubridate`如果你不想处理象形文字，你也可以试试这个包:)

```
> library(lubridate)
> parse_date_time('3/15/2012', 'mdy')
 1 parsed with %m/%d/%Y
[1] "2012-03-15 UTC" 
```

* * *

PS：当然我不鼓励任何人使用任何额外的依赖项，这个答案只是作为替代（并且快速记住）解决方案发布在这里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-26T10:49:56.543

我们可以`mdy`使用`lubridate`

```
lubridate::mdy('3/15/2012')
#[1] "2012-03-15" 
```

或`parse_date`从中`readr`使用相同的格式`as.Date`

```
readr::parse_date('3/15/2012', '%m/%d/%Y')
#[1] "2012-03-15" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-05T18:14:55.267

为了完成这幅图，您还可以尝试最近推出的 (2016-09) 包`anytime`，该包利用了`Boost`C++ 库：

```
anytime::anytime("3/15/2012")
#[1] "2012-03-15 CET" 
```

# java - Java Assert 语句使用，考试认证 1Z0-851

> ID：15072956
> 
> 赞同：6
> 
> 时间：2013-02-25T17:37:38.750
> 
> 标签：java

我正在学习 1Z0-851 Oracla Java SE 1.6 认证，我看到了这个问题：

![来自测试的问题](../Images/a048631890504dea2fd0a59970cf5b1d.png)

我将第一个选项标记为正确的选项，但失败了！“所有的断言语句都被适当地使用了”，答案说第一个`assert(x > 0);`是不正确的..问题是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:18:59.520

正确答案是这样

**恰当和不恰当地使用断言**

*您可以将断言放置在您不希望正常到达的任何位置。断言可用于验证传递给私有方法的参数。但是，不应使用断言来验证传递给公共方法的参数，因为无论是否启用断言，公共方法都必须检查其参数。但是，您可以在公共和非公共方法中使用断言来测试后置条件。此外，断言不应以任何方式改变程序的状态。*

源：[http ://www.freejavaguide.com/java-scjp-part1.pdf](http://www.freejavaguide.com/java-scjp-part1.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:45:57.603

第 12 行是多余的。

如果删除它，第 15 行的断言将涵盖以下情况`x <= 0`

老实说，这是一个措辞奇怪的问题，但这就是我所能看到的。我不确定适当的意思是什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:44:10.923

如果您只阅读了第一个 assert 语句——由于它的位置，它应该被解释为“先决条件”——这意味着该函数应该在任何正 int 值下正常工作，这是不正确的。因此，这种说法具有误导性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:46:18.270

从 开始`go2`，很容易理解断言。
该方法什么都不做，它只是断言您的期望，即`x < 0`.

`go`另一方面，该方法具有`switch`. 如果您**绝对**不希望您的程序属于该子句，则
最好使用`assert false`该子句，*即*，在正常情况下，其中一个s 必须是正确的。`default`***`case`***

 ***唯一的情况是`switch`期望`x`是**完全** `2`的。
~~因此，总而言之，您不期望`x`大于`0`，正如第一个断言所说，您期望大于 ，`x`仅此`2`而已。因此，断言没有被适当地使用。~~

但是，正如[Jeff](https://stackoverflow.com/users/1435657/jeff)所指出的，`case`没有`break`，这意味着`default`将始终执行，在每种情况下都会导致`assert false`。

**结论：**该`go`方法应该总是导致错误，`assert false`正确使用，而`assert x > 0`根本不正确。***

# php - 在 XAMPP 中遇到 PHP 错误

> ID：15072958
> 
> 赞同：0
> 
> 时间：2013-02-25T17:37:41.647
> 
> 标签：php, xampp

我正在使用[此](https://github.com/robertmain/Treasure-Hunt)代码来实现“寻宝”。我对我正在使用的代码知之甚少。我想做的一件事是让代码在我的 PC 上与 XAMPP 一起工作。**每当我尝试导航到localhost/treasurehunt/admin/login**时，我都能够修复遇到的数据库错误。我做的是这个——

*   为整个“事物”设置根用户名和密码
    （使用**localhost/security/xamppsecurity.php**）

*   使用适当的用户名和密码（“root”的那个）编辑了 database.php 文件。

*   创建了一个数据库（使用**localhost/phpmyadmin**）并相应地更改了 database.php 。

现在，当我尝试导航到**localhost/treasurehunt/admin/login**页面时，出现错误。我从最近两天开始尝试解决这个问题（通过在各种论坛上搜索），但没有“太多”的帮助。错误如下 -

```
A PHP Error was encountered
Severity: Notice

Message: Undefined property: CI_Loader::$agent

Filename: core/Loader.php(829) : eval()'d code

Line Number: 9

Fatal error: Call to a member function is_mobile() on a non-object in  
C:\xampp-portable\htdocs\treasurehunt\system\core\Loader.php(829) : eval()'d code on  
line 9 
```

有什么办法可以解决这个问题。请告诉我你们需要哪些文件中的所有代码示例才能准确理解问题。我会将代码添加到我的问题中。

提前致谢 。

# intuit-partner-platform - 尝试使用 IPP.NET 插入 QBO 发票

> ID：15072963
> 
> 赞同：1
> 
> 时间：2013-02-25T17:38:12.133
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在尝试使用 IPP.NET 将发票插入 Quickbooks Online。问题似乎在于设置项目。

这是我的第一行的VB代码片段，它工作正常......

```
Dim qboInvoiceLine1 as new intuit.ipp.data.qbo.invoiceline
qboInvoiceline1.desc="Desc1"
qboInvoiceLine1.amount=10
qboInvoiceLine1.AmountSpecified=True 
```

如果我添加以下代码来设置项目，我会收到形成 XML 的错误...

```
Dim items1 as List(Of Intuit.Ipp.Data.Qbo.Item)=New List(Of Intuit.Ipp.Data.Qbo.Item)
Dim item1 as new intuit.ipp.data.qbo.item
item1.id=new intuit.ipp.data.qbo.idtype
item1.id.value="1"
items1.add(item1)
qboInvoiceLine1.Items=items1.ToArray 
```

我什至不明白为什么项目 ID 似乎是某种数组或项目列表。一个文档来源表明发票行有一个 itemID 属性，但情况似乎并非如此。谁能给我设置发票行的 itemID 的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:07:38.847

```
ItemsChoiceType2[] invoiceItemAttributes = { ItemsChoiceType2.ItemId, ItemsChoiceType2.UnitPrice,ItemsChoiceType2.Qty  };
object[] invoiceItemValues = { new IdType() { idDomain = idDomainEnum.QB, Value = "5" }, new decimal(33), new decimal(2) };
var invoiceLine = new InvoiceLine();
invoiceLine.Amount = 66;
invoiceLine.AmountSpecified = true;
invoiceLine.Desc = "test " + DateTime.Now.ToShortDateString();
invoiceLine.ItemsElementName = invoiceItemAttributes;
invoiceLine.Items = invoiceItemValues;
invoiceLine.ServiceDate = DateTime.Now;
invoiceLine.ServiceDateSpecified = true;
listLine.Add(invoiceLine); 
```

# php - PHPUnit - 抛出、捕获和处理自定义异常

> ID：15072964
> 
> 赞同：2
> 
> 时间：2013-02-25T17:38:12.183
> 
> 标签：php, exception-handling, phpunit

我正在尝试在 PHP 中测试捕获和处理自定义异常。

我用一些额外的属性和方法扩展了基本异常类型。

我存根的类之一可能会引发异常，我希望能够测试我是否正确捕获并处理了该异常（在这种情况下，这意味着构建一个响应对象以从调用中返回）。

例如

```
try {

    $objectBeingStubbed->doSomething();

} catch (\Exception $ex) {

    if ($ex instanceof CustomExceptionType) {

        $this->_errorResponse->error->message = $exception->getMessage();
        $this->_errorResponse->error->code = $exception->getCode();
        $this->_errorResponse->error->data = $exception->getData();

    } else {

        throw $ex;

    }

} 
```

我试图模拟抛出的异常：

```
$objectStub->expects($this->any())
           ->method('doSomething')
           ->will($this->throwException(new CustomExceptionType())); 
```

但是当异常到达我正在测试的类时，它现在是“Mock_ErrorResponse_????”的一个实例 这不会扩展我的自定义异常。我的异常包含在 Mock_ErrorResponse 的“$exception”属性中。

有什么方法可以处理这个问题而不会被迫做一些可怕的事情，比如：

```
if ($ex instanceof PHPUnit_Framework_MockObject_Stub_Exception) {
    $ex = $ex->exception;
}

if ($ex instanceof CustomExceptionType) {
... 
```

在我正在测试的班级内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:55:57.033

首先，改为：

```
} catch (\Exception $ex) {
    if ($ex instanceof CustomExceptionType) { 
```

你应该使用 try/catch 结构：

```
 // (...)
} catch (CustomExceptionType $e) {
    // (...)
} catch (\Exception $e) {
    // (...)
} 
```

所以，回答你的问题，基本上可能你做错了。因为当存根方法抛出异常时，它应该完全抛出您使用`throwException`方法设置的异常。

我不知道你是如何构建你的存根的（也许有什么东西坏了，也许是命名空间），但请考虑下面的一个例子，它工作得很好。

```
class Unit
{
    public function foo()
    {
        throw new \InvalidArgumentException();
    }

    public function bar()
    {
        try {
            $this->foo();
        } catch (\InvalidArgumentException $e) {
            return true;
        } catch (\Exception $e) {
            return false;
        }

        return false;
    }
}

class UnitTest extends \PHPUnit_Framework_TestCase
{
    public function testBar()
    {
        $sut = $this->getMock('Unit', array('foo'));
        $sut->expects($this->any())
            ->method('foo')
            ->will($this->throwException(new \InvalidArgumentException()));

        $this->assertTrue($sut->bar());
    }
} 
```

当然，您可以`InvalidArgumentException`用自己的实现异常替换，这仍然应该有效。如果您仍然无法弄清楚代码有什么问题，请发布更完整的示例（例如，如何构建存根）。也许那时我可以提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-30T01:06:42.227

现在您可以使用 PHPUnit 中内置的 @expectedException php-doc 注释：[https ://phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.exceptions)

```
/**
 * @expectedException InvalidArgumentException
 */
public function testBar()
{
    $sut = $this->getMock('Unit', array('foo'));
    $sut->expects($this->any())
        ->method('foo')
        ->will($this->throwException(new \InvalidArgumentException()));
} 
```

# c++ - 使用 Cygwin 编译时出现 fstream 错误

> ID：15072971
> 
> 赞同：1
> 
> 时间：2013-02-25T17:38:29.757
> 
> 标签：c++, cygwin, fstream

我正在开发一个程序，当我尝试使用 Cygwin 进行编译时遇到了一些奇怪的编译器错误。该程序使用 Visual Studio C++ Express 编译和运行得很好，所以它似乎与 Cygwin 有关。所有错误似乎都是同一类型。这是一个代码示例：

```
int count_records(void)
{
EMPL_TYPE empl_rec;
fstream empl_infile;
empl_infile.open(filepath, ios::in|ios::binary);
int count = 0;
empl_infile.read((char *) &empl_rec, sizeof(empl_rec));
while (!empl_infile.eof())
{
    count++;

    empl_infile.read((char *) &empl_rec, sizeof(empl_rec));
}
empl_infile.close();
cout << "Records Counted: " << count << endl;
return count;
} 
```

这是与该部分相关的错误：

Assignment2.cpp：在函数`int count_records()': Assignment2.cpp:34: error: no matching function for call to`std::basic_fstream >::open(const std::string&, std::_Ios_Openmode)' /usr/lib/gcc/i686-pc-cygwin/3.4.4/include/c++/fstream: 819：注意：候选人是： void std::basic_fstream<_CharT, _Traits>::open(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits]

同样，在使用 Visual Studio 编译时，仅使用 Cygwin 时我没有收到此错误。如果有人有任何想法，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:42:01.650

令人惊讶的是，文件流的 open() 方法只接受 C 风格的字符串，直到 C++11 标准出来。将您的 open 语句替换为`empl_infile.open(filepath.c_str(), ios::in|ios::binary);`（注意`.c_str()`对文件路径的调用）或将 -std=c++11 添加到 Cygwin 中的编译行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:43:43.627

可能是您在 VS 上支持 C++11，而不是在 Cygwin 上。该[`fstream::open`](http://en.cppreference.com/w/cpp/io/basic_fstream/open)方法`const char*`在 C++03 中将 a 作为第一个参数。C++11 提供了一个采用`const std::string&`.

你可以像这样修复它

```
mpl_infile.open(filepath.c_str(), ios::in|ios::binary); 
```

# ios - 弱 IBOutleCollection 始终为零

> ID：15072974
> 
> 赞同：11
> 
> 时间：2013-02-25T17:38:31.140
> 
> 标签：ios, memory-management, interface-builder, storyboard, automatic-ref-counting

我的问题是为什么弱 IBOutletCollection 总是为零？如果将弱变强我所有的按钮都在那里，那真的很奇怪。我试图理解苹果的逻辑，我看不出单个按钮和一组按钮在内存管理方面没有区别。我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T17:59:03.863

绝不是完整的，但简单的答案：

使用 IB 创建的单个`UIButton`视图会自动成为其他一些 UIView 的子视图（至少是您的 .view `UIViewController`），因此被强烈指向。

An`IBOutletCollection`是`NSArray`or `NSMutableArray`，不是在`UIView`任何地方显示的，并且 UIView 显然没有指向 Outlet(Collection) 的属性指向它们，所以没有任何东西指向 IBOutletcollections。你必须自己做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T17:42:45.290

来自 Apple 的[资源编程指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)：

> 每次您要求 NSBundle 或 NSNib 类加载 nib 文件时，底层代码都会在该文件中创建对象的新副本并将它们返回给您。（nib 加载代码不会从先前的加载尝试中回收 nib 文件对象。）您需要确保在必要时维护新的对象图，并在完成后放弃它。您通常需要对顶级对象的强引用以确保它们不会被释放；您不需要对图中较低的对象进行强引用，因为它们归其父对象所有，并且您应该将创建强引用循环的风险降至最低。
> 
> 从实际的角度来看，在 iOS 和 OS X 中的 outlet 应该被定义为声明的属性。出口通常应该是弱的，除了从文件所有者到 nib 文件中的顶级对象（或者，在 iOS 中，故事板场景）应该是强的。因此，您创建的 Outlets 通常应该很弱，因为：
> 
> 例如，您为视图控制器的视图或窗口控制器的窗口的子视图创建的出口是对象之间的任意引用，并不暗示所有权。强插座经常由框架类指定（例如，UIViewController 的视图插座，或 NSWindowController 的窗口插座）。

```
@property (weak) IBOutlet MyView *viewContainerSubview;
@property (strong) IBOutlet MyOtherClass *topLevelObject; 
```

在页面下方：

> 当插座应被视为拥有引用的对象时，插座应更改为强：
> 
> *   如前所述，文件所有者经常出现这种情况——nib 文件中的顶级对象通常被认为归文件所有者所有。
> *   在某些情况下，您可能需要 nib 文件中的对象存在于其原始容器之外。例如，您可能有一个视图的出口，可以暂时从其初始视图层次结构中删除，因此必须独立维护。

# python - 使用 SQLAlchemy 将字符串文字作为“like”运算符的左侧参数

> ID：15072976
> 
> 赞同：1
> 
> 时间：2013-02-25T17:38:38.560
> 
> 标签：python, sql, sqlalchemy

我试图使用 SQLAlchemy 构造一个查询，它产生类似（在 oracle 中）的东西：

```
select * from users u where 'john' like u.name || '%' 
```

得到像'j'，'jo'，'joh'等这样的名字。

我想有类似的东西：

```
session.query(Users).filter(XXX('john').like(Users.name + '%')).all() 
```

我应该用什么代替XXX？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:55:19.590

使用[`literal`](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.literal)构造：

```
session.query(Users).filter(literal('john').startswith(Users.name)).all() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T18:38:35.440

我认为它是这样的？

```
Users.query.filter(Users.name.like("%john%")).all() 
```

# html - 使用 commandButton 进行某些操作后的重定向

> ID：15072978
> 
> 赞同：0
> 
> 时间：2013-02-25T17:38:45.737
> 
> 标签：html, jsf, navigation

我有一个命令按钮：

```
<h:commandButton value="button" action="#{bean.button}" /> 
```

我需要在操作结束后执行重定向。

我所做的是返回一个带有页面名称的字符串。

结果是所需的页面，但 URL 是前一页的。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:10:54.093

为了更新浏览器的 url，您需要[告诉 jsf 执行重定向](http://www.mkyong.com/jsf2/jsf-page-forward-vs-page-redirect/)。基本上你需要附加`?faces-redirect=true`到你的结果值。

# knockout.js - 我升级到了 knockoutjs 2.2.1 和 jquery 1.9，koExtenalTemplates 坏了

> ID：15072983
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:06.767
> 
> 标签：knockout.js, hottowel

我可以看到注入器加载模板并将其设置在可观察的模板中，但渲染不会发生。它只显示“正在加载”，但它调用 afterRender 方法。模板就像

```
<button>Refresh</button>
<nav>
  <ul data-bind='template:externalTemplate,foreach:DataArray,afterRender:callMe'></ul>
</nav> 
```

当模板加载时，数组中已经有很少的可观察对象。但不会被渲染。但是如果单击刷新按钮并清理并重新加载阵列。它表现得很好。

这在 ko 2.2.0 和 jquery 1.8 上运行良好... KoExternalTemplate 是否因此更新而损坏？

编辑：重现步骤：

1.  使用 HotTowel SPA 模板开始一个新项目（如果您还没有，请在 google 中搜索此模板）
2.  通过 NuGet 添加 koExternalTemplate，它还将安装交通警察和 infiser。
3.  更新 BundleConfig.cs 以添加 TrafficCop、infuser 和 koExternalTemplate
4.  在项目的根目录下创建一个文件夹名称 Templates 添加一个模板文件。使用注入器配置更新主 js 以指向模板和文件模式（如果你知道一点 koExternalTemplate 你知道我在说什么）。
5.  在 home/details html 中包含模板并启动应用程序。

结果：您只会看到“正在加载...”代替您的模板，并且模板不会被渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:18:09.197

Dhana – 最好的选择是使用 Durandal 的`compose`绑定与该视图。像这样：

```
<div data-bind="compose: { view: 'templates/_sample.tmpl.html', activate: true }">      
</div> 
```

并将模板文件夹移动到视图文件夹（约定）下。

# user-interface - 如何统一使用 GUI 按钮

> ID：15072985
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:13.753
> 
> 标签：user-interface, unity3d, unityscript

我想通过 unity3d unityscript 中的 GUI 按钮获取用户输入。我已经编写了这个脚本来通过键盘获取用户输入

```
var f_hor : float = Input.GetAxis("Horizontal");
//Get Vertical move - move forward or backward
var f_ver : float = Input.GetAxis("Vertical");
if (f_ver < 0) {
b_isBackward = true;
} else {
b_isBackward = false;
} 
```

它工作正常，并相应地给我 0 和 1..但我希望通过 GUI 按钮执行相同的操作。就像我有四个 GUI 按钮..它们的工作方式与此相同......我可以在 ONGUI 功能中制作 GUI 按钮..但是我怎样才能实现这个功能...任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:46:14.423

虽然我不知道这是否是最好的方法（Unity 的 gui 元素不是游戏 HUD 或菜单的最佳选择），但这应该可以完成工作：

```
private bool buttonPressed = false;

public void Update()
{
    if (buttonPressed)
    {
         //do what you want

         buttonPressed = false;
    }
} 
```

抱歉使用`C#`代码，但我不知道`JS`。翻译起来应该很容易。

```
public void OnGui()
{
    Rect rect = new Rect(...); //your button dimension

    if (GUI.Button(rect, "AButton")
    {
        buttonPressed = true;
    }
} 
```

* * *

编辑：

如果您想手动处理来自鼠标的输入，您可以使用[MonoBehavior](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.html)的方法，例如[OnMouseDown](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnMouseDown.html)或[OnMouseUp](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnMouseUp.html)。

或者，您可以从内部检查`Update`是否发生鼠标事件，查看[Input.GetMouseButton](http://docs.unity3d.com/Documentation/ScriptReference/Input.GetMouseButton.html)或类似的`Input`类方法。

# shell - 如何使用 KornShell 运行程序并解析输出

> ID：15072987
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:18.530
> 
> 标签：shell, unix, scripting, ksh

我对 KornShell (ksh) 很陌生。我有一个项目需要用 ksh 完成。问题是：

> 请编写一个 ksh 脚本，该脚本将运行“bonnie”基准实用程序并解析输出以获取块写入、块读取和随机搜索/秒的值。还要考虑如何使用这些值与之前测试的结果进行比较。出于本次测试的目的，请限制自己使用标准 GNU 实用程序（sed、awk、grep、cut 等）。
> 
> 这是“bonnie”实用程序的输出：

```
# bonnie -s 50M -d /tmp        
File '/tmp/Bonnie.2001096837', size: 52428800
Writing with putc()...done
Rewriting...done
Writing intelligently...done
Reading with getc()...done
Reading intelligently...done
Seeker 1.S.e.eker 2.S.e.eker 3...start 'em...done...done...done...
              -------Sequential Output-------- ---Sequential Input-- --Random--
              -Per Char- --Block--- -Rewrite-- -Per Char- --Block--- --Seeks---
Machine    MB K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU K/sec  %CPU /sec  %CPU
         50.0 36112 34.1 138026  1.9 179048  7.0 51361 51.1 312242  4.3 15211.4 10.3 
```

任何有关如何编写此脚本的建议将不胜感激。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:17:19.097

刚刚在 Shellter 的帮助下得到了答案！

```
bonnie++\ 
```

| awk '/机器/ {f=1;next}f{

```
 print "#dbg: line_needed=" $0
   printf("blkWrt=%s\t blkRd=%s\t RandSks=%s\n", $4, $8, $12);exit 
```

}'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:50:14.343

这是一个简单的实验解决方案，假设最后一行将始终包含您想要的数据：

```
 #              -Per Char- --Block--- -Rewrite-- -Per Char- --Block--- --Seeks---
 # Machine    MB K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU K/sec  %CPU /sec  %CPU
 #            50.0 36112 34.1 138026  1.9 179048  7.0 51361 51.1 312242  4.3 15211.4 10.3 
 #                block write, block read and random seeks/s
 bonnie++ \
 | awk '
       {line=$0} 
        END{
          # print "#dbg:last_line=" $line
          split(line, lineArr)
          printf ("blkWrt=%s\tblkRd=%s\tRandSks=%s\n", lineArr[4], lineArr[8], lineArr[12])
        }' # > bonnieOutput
  # ------^^ remove # to write output to file 
```

（请注意，`\`bonnie++ 之后的字符必须是该行的最后一个字符，不允许有空格或制表符！！！（否则会爆炸！）;-)）

awk 读取通过管道传递的所有输入行。当您在 awk 的 END{} 块中时，将读取的最后一行放入 lineArr[]，然后使用数据中字段的索引号从该行中打印出您想要的元素，所以`lineArr[4]`将返回最后一行数据中的第 4 个字段、`lineArr[12]`第 12 个字段等。您可能需要调整使用的索引号来获取要显示的数据。（你必须弄清楚这一点！;-)

要将数据保存到文件，请通过取消注释来使用 shell 重定向（删除 和 之间的字符`#`。将字符保留在原位，直到获得所需的输出，然后您可以将其重定向到文件。`}'``> bonnieOutput``#`

不用说，我使用的标签`printf`大多`blkWrt=`是用于调试的。一旦您确定需要捕获哪些数据，并且每次都可靠地出现在同一位置，那么您可以删除这些标签，然后您将拥有一个可以与其他程序一起处理的干净数据文件。

请记住，几乎所有 Unix 工具箱实用程序都是面向行的，也就是说，它们希望一次处理 1 行数据，并且通常有一些技巧可以查看正在处理的内容。请注意我在 END{} 块顶部包含的#dbg 行。您必须删除“#”才能取消注释以查看调试输出。

可以做的还有很多，但是如果您想使用 awk 学习 ksh/unix 工具箱，您将不得不花时间了解这些功能是什么。如果您已经阅读了包含您正在处理的问题的章节，并且不了解如何开始解决这个问题，那么您最好再阅读一遍，好吗？;-)

**编辑**

请注意，在 中`awk`，变量`$0`包含当前行中的所有文本（由`RS`变量值定义，通常是 Unix 行结束字符，`\n`）。其他编号的值，即`$1`,`$2`表示当前行 ( `$0`) 上的第一个或第二个“字段”。

根据您在下面评论中的新理解，您希望从包含文本“延迟”的行中提取值。这甚至更容易处理。基本模式将是

```
 bonnie++ \
 | awk '
       /Latency/{ 
          # print "#dbg:latency_line=" $0
          printf ("blkWrt=%s\tblkRd=%s\tRandSks=%s\n", $4, $8, $12)
        }' # > bonnieOutput 
```

所以这段代码说，通过管道将 bonnie++ 的所有输出读入 awk，当您找到包含文本“延迟”的行时，使用 printf 格式字符串打印在第 4、第 8 和第 12 字段中找到的值包含自描述标签，如 blkWrt 等。您必须更改 $4 等以正确匹配当前行中每个数据元素的数字。IE 可能是 5 美元、9 美元、13 美元，还是 3 美元、9 美元、24 美元？好的？

请注意，/Latency/ 区分大小写，如果输出中还有其他地方出现该单词，那么我们将不得不修改用于过滤输出的 reg-exp “规则”。

作为一个学习练习，并且作为一个任何 Unix 人每天都在使用的非常基本的工具，跳过 awk，看看你有什么`bonnie++| grep 'Latency'`收获。

IHTH

# c# - 如何将 ac# 对象发布到视图中的操作？

> ID：15072988
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:22.270
> 
> 标签：c#, asp.net-mvc, jquery

我有一个通过调用动作呈现的视图，我将视图模型传递给它，例如 Vm1，然后填充一些下拉列表。

在这个视图中，我有一个带有一些文本框和一个“过滤器”按钮的“过滤器”部分，我想调用另一个操作来传递文本框的值，然后在 div 内的页面上部分呈现第二个视图.

所以我已经这样做了，当单击“过滤器”按钮时，我的操作如下所示，由 ajax 调用：

```
ActionResult ActionName (string inputText1, string inputText2, string inputText3, ...) 
```

因为我有大约 10 个文本框，所以我想创建一个新的 c# 对象并将该对象传递给这个动作，看起来像这样更简单：

```
ActionResult ActionName(MyActionFilters myFilters) 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:08:03.833

你可以有一个模型如下

```
public class MyActionFilters
{
  public string Property1{get;set;}
  public string Property2{get;set;} 
  public string[] Property3{get;set;} 

  // add any number of properties....
} 
```

您可以在 Get Action 方法中传递空模型

```
ActionResult ActionName()
{
  MyActionFilters myEmptyActionFilers= new MyActionFilters();
  View(myEmptyActionFilers)
} 
```

在表格中

```
Html.TextBoxFor(model => model.Property1)
Html.TextBoxFor(model => model.Property2) 
```

然后在 post 方法中，您可以访问以我已删除先前代码的形式填充的模型。新代码在编辑标签之后:)

编辑：对不起，我不在。使用 AJAX 可以轻松实现这种功能:)

它如下所示。

```
[HttpPost]
PartialViewResult ActionName(MyActionFilters myActionFilers)// this is magic
{
  /*you can access the properties here like myActionFilers.Property1 and pass the 
    same object after any manipulation. Or if you decided have a model which contains 
    a variable to hold the search results as well. That is good.*/

   return PartialView(myActionFilers);
} 
```

到目前为止[，这](http://mvc3only.blogspot.com/2012/04/aspnet-mvc3-ajax-form-submission-simple.html)是一个很好的例子。

并且不要忘记将`jquery.unobtrusive-ajax.js`脚本引用添加到您的视图中。如果不是 Ajax 将不会影响。在给定的示例中，他已经在 _Layout 中完成了，如您所见。

PS：明智地选择将要传递给视图的模型的属性并享受 Ajax！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:48:02.140

您需要将表单输入名称设置为 ViewModel 的属性，然后 MVC 会做一些魔术例如：

```
public class FormViewModel {
    public string input1 {get;set;}
    public string input2 {get;set;}
    // and so on
} 
```

然后在您的操作上：

```
public ActionResult FormPost(FormViewModel model) {
    // you'll have access to model.input1, model.input2, etc
} 
```

最后，例如，在您想要创建的 HTML 表单上：

```
<input type="text" name="input1" />
<input type="text" name="input2" /> 
```

或者您可以使用`Html.TextBoxFor(model => model.Input1)`，助手将正确命名所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:49:46.807

输入标签的名称属性，应以对象名称（“MyActionFilters”）为前缀

例如：

```
<input type="text" name="MyActionFilters.YOUR_PROPERTY_NAME" /> 
```

顺便说一句，您的操作方法应使用 HttpPost 属性进行注释。

[HttpPost] ActionResult ActionName(MyActionFilters myFilters)

# ios - 大容量核心数据搜索或其他替代方案？

> ID：15072989
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:24.120
> 
> 标签：ios, objective-c, cocoa, core-data, nspredicate

我们需要在给定日期范围内搜索产品、渠道、地区的不同组合的产品信息。

数据量约为 1,46,000（即 146000）条记录。每条记录由productId、channelId、regionId、date和AUMValue组成。

我们可以使用 Core Data 以有效的方式使用谓词进行搜索吗？相反，您能否建议任何其他替代方法来有效地搜索如此大量的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:09:13.167

根据我的经验，Core Data 将是实现类似模型的正确选择。

显然，您应该在底层采用 SQL 存储类型，因为它具有更好的性能。

如果您以正确的方式创建谓词，您将能够提高搜索期间的性能。您还可以考虑索引您的存储（即表中的某些列，而不是所有列，因为它们使对 sql 存储的访问更慢）以加快搜​​索速度。

我认为如果您需要在商店中导入大量元素，可能会出现问题。在这种情况下，后台任务将需要不冻结主线程。

希望有帮助。

# php - 代码没有意义——PHP 中的两个条件尝试

> ID：15072990
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:26.297
> 
> 标签：php

我继承了一个没有做它应该做的事情的应用程序。我已将问题与未正确附加的数据库隔离开来。程序员编写了这个函数，似乎是为了评估是否附加了数据库，如果没有，则调用“attachPaymentDatabase()”函数来附加它。

```
function attachPaymentDatabaseIfNotDoneAlready()
{
global $db;
global $hasPaymentDatabaseAttached;
// Determine if we have attached the payment tables, and if not, add them.
$hasPaymentDatabaseAttached = false;
try { 
    // this new way should work the best-- looking for PAY.
    $alldb = queryall($db, "PRAGMA database_list;");
    for ($i = 0; $i < count($alldb); $i++)
        {
        $alldb[$i] = array_change_key_case($alldb[$i], CASE_LOWER);
        if (strtolower($alldb[$i]['name']) == 'pay')
            {
            debugEmail("condition 1 worked.");
            $hasPaymentDatabaseAttached = true;
            break;
            }
        }
    // if its name changed this will also work
    if (!$hasPaymentDatabaseAttached)
        {
        $r = @$db->querySingle("SELECT * FROM PAY_PARAMETER;"); 

        $hasPaymentDatabaseAttached = true;
        debugEmail("condition 2 worked.");
        }
    } 
catch(Exception $e) 
    { 
    }
if (!$hasPaymentDatabaseAttached)
    {
    debugEmail("nothing worked.");
    attachPaymentDatabase();
    }
} 
```

我编写了一个 debugEmail() 函数，该函数通过电子邮件向我发送带有上述时间戳的已定义消息。从应用程序执行代码时，我可以看到“条件 2 有效”。在“没有任何效果。”前一秒被调用。

我不明白这怎么可能。如果 debugEmail("条件 2 有效。"); 正在执行，那么也应该如此 $hasPaymentDatabaseAttached = true; 在这种情况下不应该执行：

```
 if (!$hasPaymentDatabaseAttached)
    {
    debugEmail("nothing worked.");
    attachPaymentDatabase();
    } 
```

但它显然是。

这里发生了什么？！？！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:41:51.380

不，不应该，因为在第一个条件下`$hasPaymentDatabaseAttached`设置为。`true`仍然是胡说八道，但它的工作原理与描述的一样。

# java - 费马分解方法不起作用

> ID：15072992
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:33.527
> 
> 标签：java, factorization

我正在开发一个程序来比较大整数分解的不同算法。我在比较中包括的一种算法是费马分解方法。该算法似乎适用于小数字，但当我得到更大的数字时，我会得到奇怪的结果。

这是我的代码：

```
public void fermat(long n)
{
    ArrayList<Long> factors = new ArrayList<Long>();
    a = (long)Math.ceil(Math.sqrt(n));
    b = a*a - n;
    b_root = (long)(Math.sqrt(b)+0.5);
    while(b_root*b_root != b)
    {
        a++;
        b = a*a - n;
        b_root = (long)(Math.sqrt(b)+0.5);
    }
    factors.add(a-b_root);
    factors.add(a+b_root);
} 
```

现在，当我尝试*分解*42139523531366663 时，我得到了结果因子*6194235479*和*2984853201*，这是不正确的，因为**6194235479 * 2984853201 = 18488883597240918279**。我认为我得到了这个结果是因为在算法的某个地方，我到达了一个数字变得太大或类似的点，所以算法因此有点混乱。我添加了一个检查，计算两个因子的乘积并与输入值进行比较，以便在分解错误时收到警报：

 ****```
long x,y;
x = factors.get(0);
y = factors.get(1);
if(x*y!=n)
    System.out.println("Faulty factorization."); 
```

有趣的是，支票通过了，我没有收到警报。我尝试只打印乘法的结果，这实际上导致了输入值。所以我的问题是为什么我的程序会这样，我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:44:43.033

看起来`long`某处有溢出，因为 long 有 64 位和

```
42139523531366663 + 2^64 = 18488883597240918279 
```

对于足够大的数字，您可能需要切换到使用[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:44:36.163

是不是因为大数相乘也有错误？

这可能是一个足够正当的理由。这就是使程序认为它的因式分解是正确的原因，但是当您在不使用程序的情况下实际乘以数字时，您会发现错误。****

# sharepoint - 将自定义文本添加到 Sharepoint 电子邮件警报

> ID：15072998
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:48.593
> 
> 标签：sharepoint, sharepoint-list

我们为共享点列表设置了警报，但我想在警报电子邮件中添加一些自定义文本。我们无权访问 SPD 或 sharepoint 服务器，只能对 sharepoint 客户端进行更改。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:10:54.550

发送电子邮件的代码通过 Timer Job 在 SharePoint 服务器上运行。由于您无权对服务器进行任何操作，因此**您绝对没有机会**修改内置的警报电子邮件。

*你能用javascript做到这一点吗？*

您不能直接使用 JavaScript 发送电子邮件。[您可以使用 mailto 链接在用户默认电子邮件客户端中](https://stackoverflow.com/questions/7381150/send-email-with-javascript)打开草稿电子邮件，但这不会达到您想要的效果，因为用户仍然需要对其进行编辑。

我想，您可以使用内容编辑器 Web 部件（无需 SPD 即可）将一些 javascript 放到编辑页面上，以便更改对[单独的 Web 服务器进行 AJAX 调用以进行实际发送。](https://stackoverflow.com/questions/1415205/how-to-send-email-by-using-javascript-or-jquery)

# php - 无法在对象中增加 PHP 数组变量

> ID：15072999
> 
> 赞同：0
> 
> 时间：2013-02-25T17:39:51.493
> 
> 标签：php, arrays, shopping-cart

我添加到我的购物车是这样的：

```
function addItem($id, $qty="1"){
    if (($this->isInCart($id))  == false){ 
        $this->cart[] = array( 'id' => $id, 'qty' => $qty);
    } else{
        $this->cart[$id]['qty']++;
    }
} 
```

如果一个项目已经在我的购物车中，我只需告诉该方法将当前 $id 加一，但这似乎不适用于这些调用：

```
$basket->addItem('monkey','200');
$basket->addItem('dog', '10');
$basket->addItem('dog'); 
```

在第二次添加狗项时，以下函数仅报告我的篮子中只有 10 条狗：

```
function numberOfProduct($id){
    unset($number);
    foreach($this->cart as $n ){
        if ($n['id'] == $id){           
            $number = $number + $n['qty'];
        }
    }
    return $number;
} 
```

我确定问题在于我在 addToBasket 方法中递增数组，但是当我在程序编码中使用完全相同的方法时，它可以正常工作。

我真的很卡。

编辑：按要求在购物车方法中

```
function isInCart($id){
    $inCart=false;
    $itemsInCart=count($this->cart);
    if ($itemsInCart > 0){
        foreach($this->cart as $cart){
            if ($cart['id']==$id){
                return $inCart=true;
                break;
            }
        }
    }   
    return $inCart;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:41:07.403

当您将其添加到数组时，您使用的是数字键而不是您的 ID 值：

```
$this->cart[] = array( 'id' => $id, 'qty' => $qty); 
```

将其更改为：

```
$this->cart[$id] = array( 'id' => $id, 'qty' => $qty); 
```

将此更改纳入您的`isInCart()`方法中，您应该会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:12:15.313

```
function addItem($id, $qty="1"){
...
    $this->cart[$id]['qty']++;
... 
```

您将函数的第二个参数设置为字符串。当您再次调用函数时，您传入了一个字符串。

```
$basket->addItem('monkey','200');
$basket->addItem('dog', '10');
$basket->addItem('dog'); 
```

如果我有一些字符串`$string = "123"`并且我尝试用 增加它`$string++`，我不会增加它的数值。从数字中删除引号，它应该按预期工作

```
function addItem($id, $qty=1){
if (($this->isInCart($id))  == false){ 
    $this->cart[] = array( 'id' => $id, 'qty' => $qty);
} else{
    $this->cart[$id]['qty']++;
}
} 
```

并像这样调用函数

```
$basket->addItem('monkey',200);
$basket->addItem('dog', 10);
$basket->addItem('dog'); 
```

如果您需要一个数字，最好只使用一个数字。如果来自用户输入，我可以理解使用字符串`$qty`，但如果是这种情况，您需要使用`$qty = intval($qty)`它来获取它的数字版本。