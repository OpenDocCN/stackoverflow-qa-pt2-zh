# StackOverflow 问答 12532000-12532999

# java - 如何为具有多个数据源的 grails 2.X 应用程序配置 c3p0？

> ID：12532003
> 
> 赞同：3
> 
> 时间：2012-09-21T13:57:38.637
> 
> 标签：java, grails, connection-pooling, c3p0

我试图找到一个易于遵循的解决方案（可能是这个问题的答案），用于在具有多个数据源的 grails 2.X Web 应用程序上配置 c3p0 连接池。我无法通过谷歌搜索找到任何明确而简单的帮助。

我正在寻找的答案将说明以下内容：

1）需要什么罐子

2）需要修改哪些grails文件

3) 在这些 grails 文件中放入内容的示例，包括导入语句和示例代码。

假设我的应用中有两个数据源，dataSource 和 dataSource_A 在 DataSource.groovy 中配置。

**如何在 grails 2.X Web 应用程序中为多个数据源配置 c3p0 连接池？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-17T10:57:40.813

**datasource.groovy / 外部配置文件**

```
 dataSource {
    pooled = true
    dbCreate = "create-drop"
    url = "jdbc:mysql://<ip address>/test1"
    driverClassName = "com.mysql.jdbc.Driver"
    username = "test"
    password = "test123" 
   }

   dataSource_A {
      pooled = true
      dbCreate = "create-drop"
      url = "jdbc:mysql://<ip address>/test2"
      driverClassName = "com.mysql.jdbc.Driver"
      username = "test"
      password = "test123" 
  } 
```

**资源.groovy**

```
 dataSource(ComboPooledDataSource) { bean ->
    idleConnectionTestPeriod = 1 * 60 * 60
    testConnectionOnCheckin = true
    bean.destroyMethod = 'close'
    user = grailsApplication.config.dataSource.username
    password = grailsApplication.config.dataSource.password
    driverClass = grailsApplication.config.dataSource.driverClassName
    jdbcUrl = grailsApplication.config.dataSource.url
}

dataSource_A(ComboPooledDataSource) { bean ->

    idleConnectionTestPeriod = 1 * 60 * 60
    testConnectionOnCheckin = true
    bean.destroyMethod = 'close'
    user = grailsApplication.config.dataSource_A.username
    password = grailsApplication.config.dataSource_A.password
    driverClass = grailsApplication.config.dataSource_A.driverClassName
    jdbcUrl = grailsApplication.config.dataSource_A.url

} 
```

**c3p0.jar**在项目的 lib 文件夹中。

这些是唯一需要的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:57:03.220

这是[相应的文档](http://grails.org/doc/2.0.0.M2/guide/conf.html#multipleDatasources)。该博客[提供了一个代码示例](http://burtbeckwith.com/blog/?p=312)，如何在 Grails 中延迟创建 DataSource ......并且可以在这样的代码中使用 C3P0。

由于 Grails 默认附带 DBCP，当可以将配置委托`DataSource`和池化配置到底层容器（例如 Tomcat 或老板。所以我推荐这种方式，这里是一个[如何为 Tomcat DataSource 设置 C3P0](https://stackoverflow.com/questions/5246874/using-c3p0-connection-pooling-in-a-tomcat-spring-based-app)的示例，只需将其 jar 添加到`lib`目录中。

现在，在配置多个数据源时，您应该注意 Grails 中缺少两阶段提交支持的部分。

如果您希望对来自两个 DataSource 的连接所做的操作包含在单个事务中（如果成功则同时提交，如果失败则回滚），则必须使用 XA 事务管理器。

在这种情况下，我建议您在 JBoss 中部署[并在 JBoss 本身中配置 DataSources 和 pooling](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)，JDBC 驱动程序必须安装在 JBoss 库中。

您将获得附带的 XA 事务管理器的好处。在 Grails 方面，DataSource 被配置为查询在您的 WAR 文件中`resource-ref`声明的 JNDI 条目`WEB-INF/web.xml`和`WEB-INF/jboss-web.xml`文件。

```
dataSource {
    jndiName = "java:comp/env/myDataSource"
} 
```

# javafx-2 - 具有preferedViewportWidth 的ScrollPane 与内容的preferedWidth 匹配

> ID：12532005
> 
> 赞同：0
> 
> 时间：2012-09-21T13:57:40.143
> 
> 标签：javafx-2

我有一堆具有特定preferedWidth 集的[区域。](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html)这些区域是拖放 UI 中重用的可视化组件。

我想创建这些区域的容器，并尝试使用带有嵌入式 VBox 的 ScrollPane 来完成此操作。我希望滚动窗格足够宽以容纳 VBox 而无需水平滚动。

我可以手动计算出 VBox 的宽度并对滚动条宽度进行硬编码，但我更喜欢动态解决方案，以便稍后设置 vbox 的样式。不幸的是，vbox 的首选宽度为 -1，即使它的子项设置了首选宽度。

此外，如果我尝试将滚动窗格的preferedViewportWidth 设置为我的区域的宽度，我会得到取决于 hbarPolicy 的混合结果。如果此政策设置为 AS_NEEDED，则滚动条的宽度将被忽略，并且滚动条出现时会出现在我的区域上方。

任何想法我如何获得足够宽的 SrollPane 以适合我的区域有和没有垂直滚动条和可能的填充样式等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:19:29.260

`prefViewportWidthProperty()`通过将 ScrollPane 绑定到子项的 width 属性解决了我的问题。

# javascript - 从回发 onkeypress 事件停止页面

> ID：12532008
> 
> 赞同：0
> 
> 时间：2012-09-21T13:57:49.503
> 
> 标签：javascript, asp.net, firefox, postback, onkeypress

我有一个单页 asp.net 4.0 表单，在 div 中有几个文本框，我以编程方式显示/隐藏。在我的表单上的一个特定文本框上，onkeypressevent 定义如下

```
<fieldset>
    <div class="WizardStepDiv">
        <label for="MobileNumber">
            Please enter your mobile number</label>
        <%--<asp:TextBox name="vmobilenumber" ID="vmobilenumber" runat="server" Style="width: 150px"></asp:TextBox>--%>
        <input type="text" name="vmobilenumber" id="vmobilenumber" runat="server" style="width: 150px"
            onkeypress="javascript: return searchKeyPress(event);" />
    </div>
    <div class="navigationArrows">
        <div style="margin-left: 35%; width: 165px;">
            <div class="previousbutton" style="float: left; padding: 3px 0 0 6px">
                <a href="#" onclick="NavigatetoPreviousScreen()">
                    <img src="image/left_arrow.png" width="18" height="25" alt="navigateprevious" style="background-image: url(image/arrow_box.png)" />
                </a>
            </div>
            <div class="nextbutton" style="float: right; padding: 3px 0 0 6px">
                <a href="#" id="searchMobileNumber" onclick="NavigatetoNextScreen()">
                    <img src="image/right_arrow.png" width="18" height="25" alt="navigatenext" style="background-image: url(image/arrow_box.png)" />
                </a>
            </div>
        </div>
    </div>
</fieldset> 
```

searchKeyPress(event) 是这样定义的

```
function searchKeyPress(e) {
// look searchcheckoutKeyPress for window.event in case event isn't passed in
if (typeof e == 'undefined' && window.event) { e = window.event; }
if (e.keyCode == 13) {
    document.getElementById('searchMobileNumber').click();
    if (e.stopPropagation) {
        e.stopPropagation();
    } else {
        e.cancelBubble = true;
    }
  (event.preventDefault) ? event.preventDefault() : event.returnValue = false;
} 
```

}

NavigatetoNextScreen() 函数验证 mobilenumber 文本框是否为空，如果它通过验证，它会像这样进行 ajax 调用（部分在下面剪掉）

```
 var mobilenumber = $.trim($("#vmobilenumber").val());
        if (mobilenumber == "" || !isNumber(mobilenumber)) {
            error += "<span>Please enter a valid mobile number to proceed to the next step</span></br>";

        }
        if (error == "") {
            $("#errormessage").hide();
            methodName = "GetVistorByMobileNumber";
            $.support.cors = true;
            $.ajax({
                type: 'GET',); 
```

当出现验证错误时，页面不会回发，但是在 ajax 调用上返回成功或错误（在两种情况下都处理完之后）我不想要的网页回发。

此行为仅在 Firefox、Chrome 和 IE**上不回发**。可能是什么问题？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:07:50.613

```
<a href="#" id="searchMobileNumber" onclick="NavigatetoNextScreen()"> 
```

在此函数中传递事件对象`YouNavigatetoNextScreen(evt)`并调用 evt.preventDefault();

```
function YouNavigatetoNextScreen(){
   //... your code
   evt.preventDefault();
} 
```

# ruby - 匹配Treetop中的复数词

> ID：12532010
> 
> 赞同：1
> 
> 时间：2012-09-21T13:57:52.397
> 
> 标签：ruby, parsing, nlp, treetop, peg

有没有办法使用 Treetop 以编程方式匹配复数单词。Linguistics gem 会将一个单词复数，但是如何将它插入到解析器中。

这是我正在尝试做的一个例子：

```
#!/usr/bin/env ruby
require 'treetop'
require 'linguistics'
include Linguistics::EN
Treetop.load_from_string DATA.read

parser = RecipeParser.new

p parser.parse('cans')

__END__
grammar Recipe
   rule units
      unit &{|s| plural(s[0].text_value) }  
   end
   rule unit
      'can'
   end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T00:05:30.623

一般来说，语言学 gem 不能复数任意 Treetop 规则定义——它们不是字符串。

使用语义谓词，您的`recipe.treetop`文件可以`unit`在数组中定义所有有效的单数字符串，将它们复数，然后创建一个规则，将相关标记与每个复数单元进行比较：

```
require "linguistics"

grammar Recipe
  rule units
    [a-zA-Z\-]+ &{ |u|
      Linguistics.use(:en)
      singular_units = [ "can" ]

      singular_units.
        map(&:en).
        map(&:plural).
        include?(u[0].text_value)
    }
  end
end 
```

# symfony - FR3DLdapBundle 配置错误

> ID：12532018
> 
> 赞同：1
> 
> 时间：2012-09-21T13:58:12.817
> 
> 标签：symfony, ldap, fosuserbundle, fr3dldapbundle

我将 fr3dLdapBundle 与 fosUserBundle 一起使用。

```
Symfony - version=v2.0.9
fosUserBundle - version=1.2.0 
```

我已经按照安装文档中的内容完成了所有操作。但我发现了一个错误。

```
ErrorException: Notice: Undefined offset: 0 in ...\vendor\bundles\FR3D\LdapBundle\Ldap\LdapManager.php line 27 
```

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:50:44.647

用于识别单个条目的 Ldap 字段不是设置的默认值或不是配置中的第一个值。

在 config.yml

```
attributes:
       - { ldap_attr: uid,  user_method: setUsername } 
```

手段`uid`将是用于通过登录表单中的用户名来识别用户的 Ldap 属性。

此条目必须与您的 Ldap 属性匹配，并且必须是列表中的第一个`attributes`

# php - ajax 用 php javascript 打破 wordpress 主题

> ID：12532021
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:21.727
> 
> 标签：php, javascript, jquery, ajax, wordpress

我正在尝试使用一个使用 ajax 的插件来帮助“ajaxify”一个 wordpress 主题。该插件几乎适用于所有页面。

它的工作方式是替换您指定的容器 div 中的内容。在我的例子中，它是“#newwrap”。这样做就可以了，唯一的问题是在重新加载内容中的 javascript/jquery 函数时必须再次调用。

在插件中有一个地方可以指示要重新加载的内容。我已经让大部分其他部分正常工作，但这个是让我难过的部分。

我在主题中有一个使用 php 过滤器的页面。当我单击该特定页面时，该页面看起来像是在 css 等中呈现，除了没有显示并且过滤器不起作用。我用firebug查看了它背后的html，内容只是没有显示出来。

这是该网站的链接：http: [//nex.vyralmedia.com](http://nex.vyralmedia.com)

在那里，请点击投资组合>图像投资组合

如果您单击该页面，它将加载并仅显示过滤器，但它们将不起作用并且内容将不会显示。如果您刷新该页面，您将看到它在不使用 ajax 的情况下应该是什么样子。

这是 wordpress 插件的链接：[http ://wordpress.org/extend/plugins/advanced-ajax-page-loader/](http://wordpress.org/extend/plugins/advanced-ajax-page-loader/)

所以在这种情况下，我正在寻找我应该使用的重新加载代码，或者只是让该部分正常工作的某种方式。

任何帮助将不胜感激。

这是它的模板页面代码：

```
<?php
/*
The template that is used to render pages that are targeted by the multiple portfolio behavior of Prime.
*/
get_header(); ?>
<div id="newwrap">
<?php roots_content_before(); ?>

<?php roots_main_before(); ?>

<?php
global $prime_portfolio;
$portfolio_instance = get_option(PRIME_OPTIONS_KEY);
$show_filter = false;
$page = get_queried_object();
foreach ($portfolio_instance['portfolio_instance_slider'] as $p) {
    if(key_exists('portfolio_show_filters', $p) && $p['portfolio_show_filters'][0] == 'Yes' && $p['portfolio_page'] == $page->ID) {
        $show_filter = true;
    }
}
?>

<div class="main portfolio-main <?php if($show_filter) { echo 'show-filter'; } else { echo 'no-filter'; }?>" role="main">
    <div class="subheader-wrapper">
        <div class="container_12">
            <div class="grid_12">
                <div id="subheader">
                    <?php
                    global $post;
                    global $prime_frontend;
                    $prime_frontend->prime_title_and_subtitle();
                    ?>
                    <?php if($show_filter) {  ?>
                        <div class="table select-table">
                            <select class="filter">
                               <option data-filter="*"><?php echo get_portfolio_all_filter_text(); ?></option>
                            <?php
                               global $prime_portfolio;
                               $prime_portfolio->render_all_filter_list_item();
                               $page = get_queried_object();

                                $portfolio_instance = get_option(PRIME_OPTIONS_KEY);
                                $filters = NULL;
                                foreach ($portfolio_instance['portfolio_instance_slider'] as $p) {
                                    if ($p['portfolio_page'] == $page->ID) {
                                        $filters = isset($p['portfolio_filters']) ? $p['portfolio_filters'] : NULL;
                                        break;
                                    }
                                }

                               if (!empty($filters)) {
                                   foreach ($filters as $fil) {
                                       $f = get_term($fil, 'portfolio_filter');
                                       ?>
                                       <option data-filter='article[data-filters*="<?php echo $f->slug; ?>"]'>
                                           <?php echo $f->name; ?>
                                       </option>
                                       <?php

                                   }
                               }

                               ?>
                           </select>
                        </div>
                    <?php } ?>
                </div>  
            </div>
        </div>
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <div class="content-wrapper">
        <div class="overlay-divider"></div>

            <?php if($show_filter) { ?>
                <div class="filter-wrapper">
                    <div class="table">
                        <ul id="filters">
                            <?php
                            $prime_portfolio->render_all_filter_list_item();
                            $page = get_queried_object();

                            $portfolio_instance = get_option(PRIME_OPTIONS_KEY);
                            $filters = NULL;
                            foreach ($portfolio_instance['portfolio_instance_slider'] as $p) {
                                if ($p['portfolio_page'] == $page->ID) {
                                    $filters = isset($p['portfolio_filters']) ? $p['portfolio_filters'] : NULL;
                                    break;
                                }
                            }

                            if (!empty($filters)) {
                                foreach ($filters as $fil) {
                                    $f = get_term($fil, 'portfolio_filter');
                                    $prime_portfolio->render_filter_list_item($f);
                                }
                            }
                            ?>
                        </ul>
                    </div>
                    <div class="overlay-divider bottom"></div>
                    <div class="clear"></div>
                </div>          
            <?php } ?>      

<?php
    $page = get_queried_object();
    $page_portfolio_properties = $prime_portfolio->get_portfolio_options($page->ID);

    global $wp_query;
    $temp_query = $wp_query;

    $orig_query_vars = $temp_query->query_vars;

    $args = $prime_portfolio->get_portfolio_item_args_for($page->ID);

    $posts_per_page = -1;
    if (isset($page_portfolio_properties['portfolio_posts_per_page'])) {
        $posts_per_page = $page_portfolio_properties['portfolio_posts_per_page'];
        $posts_per_page = empty($posts_per_page) ? -1 : intval($posts_per_page);
    }
    $args['posts_per_page'] = $posts_per_page;

    if (!empty($orig_query_vars['paged'])) {
        $args['paged'] = intval($orig_query_vars['paged']);
    }
    else if (!empty($orig_query_vars['page'])) {
        $args['paged'] = intval($orig_query_vars['page']);
    }

    $wp_query = new WP_Query($args);

    $paginated = $wp_query->max_num_pages > 1 ? 'paginated' : '';
    ?>

    <div class="portfolio-wrapper">
        <div class="row-fluid clearfix page-container">
            <div class="span12">
                <!--PAGE CONTENT-->
                <div class="prime-page prime-full-width prime-portfolio <?php echo $paginated; ?>">
                    <div id="masonry-container">
                        <?php get_template_part('loop', 'portfolio'); ?>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
    <?php get_footer(); ?>
</div>

<?php roots_main_after(); ?>
<?php roots_content_after(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:15:12.833

`opacity``style.css`您的文章项目在第 4293 行设置为 0 ：

```
article.item {
  opacity: 0;
} 
```

您应该删除该规则，或修改您的 js 代码以在 ajax 加载后正确设置不透明度。

# javascript - 怪癖模式，道场图表/图例不一直显示，Internet Explorer

> ID：12532023
> 
> 赞同：1
> 
> 时间：2012-09-21T13:58:25.177
> 
> 标签：javascript, internet-explorer, charts, dojo, quirks-mode

我有一个页面可以在 Firefox 和 IE7/IE8 标准中显示，但不能在 Quirks 模式或 IE9 中显示。我还需要它来正确显示 Quirks。问题是不显示 Dojo 图表和图例“图像”（图例标签在那里，只是没有线条颜色的图标）。我尝试过使用这些样式，但还没有找到可以显示这两个项目的样式。我现在的风格有问题吗？我的问题与 Dojo 或 Quirks 模式有关吗？我正在使用 Dojo 1.5.2。

我注意到的一些奇怪的事情是，如果我打开 IE 开发工具栏并取消选中任何样式框（宽度、填充、位置等），那么图像就会显示出来。我取消勾选哪个框似乎并不重要，如果我再次勾选它，或者我选择的样式是否甚至适用于 chartDiv。图像将显示，直到我刷新页面。我不确定这意味着什么或如何在页面首次加载时模拟这种效果。

```
var chartContainer = dojo.create("div", {id:"HistoryChart", style:{}}, document.getElementById("HistoryChart"));
var overalChartDiv = dojo.create("div", {style:{clear:"both",width:"850px",height:"300px", margin:"15px 0 0 0"}}, chartContainer);
var chartLabelDiv = dojo.create("div", {style:{float:"left", margin:"75px 0 0 0"}}, overalChartDiv);
var chartDiv = dojo.create("div", {style:{width:"800px", height:"300px", float:"left", margin:"0 0 0 0"}}, overalChartDiv);

    dojo.create("img", {src:"images/label.gif",style:{}}, chartLabelDiv);

    //Create line chart
    var lineChart = new dojox.charting.Chart2D(chartDiv);
    lineChart.addAxis("x", xAxisTheme);
    lineChart.addAxis("y", yAxisTheme);
    lineChart.addPlot("default", {type: "Lines", lines:true, markers:true});
    lineChart.addPlot("grid", {type: "Grid", hMajorLines: true, hMinorLines:false, vMajorLines: false, vMinorLines: false});
    lineChart.addSeries('Avg', avgValues, {legend:"Avg", color:"green"});
    lineChart.addSeries('Max', maxValues, {legend:"Max", color:"red"});
    lineChart.addSeries('Min', minValues, {legend:"Min", color:"blue"});
    var valueTip = new dojox.charting.action2d.Tooltip(lineChart,"default");
    lineChart.render();

    // Create legend
    var legend = dojo.create("div", {style:{}}, chartContainer);
    var led = new dojox.charting.widget.Legend({chart: lineChart, outline: true, horizontal:true, outline:true, style:{margin:"0px 400px"}}, legend); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:20:16.347

我在 Dojo 1.5.2 中进行了测试，但在最近的版本中似乎运行良好。请参阅：http: [//archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_legend.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/charting/tests/test_legend.html)此测试在 Quirks 模式下使用 IE7/8 加载良好。不知道这里发生了什么。

# oracle - Jboss 7 - Oracle 数据源不工作

> ID：12532024
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:32.510
> 
> 标签：oracle, persistence, datasource, jboss7.x, ojdbc

我正在开发一个只有一个 WAR 项目的 Web 应用程序。它使用 JPA 并且有一个我需要配置为在**JBOSS 7**上运行的数据源。数据库是**Oracle**。

我收到此错误：

```
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB 
```

我已按照说明在 Jboss 上使用 dataSource。所以我有这些配置：

**{JBOSS_HOME}/modules/com/oracle/ojdbc6/main/module.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.oracle.ojdbc6">
    <resources>
        <resource-root path="ojdbc6.jar"/>
    </resources>
    <dependencies>
        <module name="javax.api" />
        <module name="javax.transaction.api"/>
        <module name="javax.servlet.api" optional="true"/>
    </dependencies>
</module> 
```

ojdbc6.jar 存在且名称正确。

**独立的.xml**

```
<datasources>

                <datasource jndi-name="java:jboss/jdbc/batchAdminDB" pool-name="batchAdminDB" enabled="true" use-java-context="true">
                    <connection-url>jdbc:oracle:thin:@HOST:PORT/xe</connection-url>
                    <driver>oracle</driver>
                    <security>
                        <user-name>USER</user-name>
                        <password>PASSW</password>
                    </security>
                </datasource>
                <drivers>
                    <driver name="oracle" module="com.oracle.ojdbc6">
                        <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
                        <xa-datasource-class>oracle.jdbc.xa.client.OracleXADataSource</xa-datasource-class>
                    </driver>
                </drivers>
            </datasources> 
```

在应用程序上：META-INF/ **persistence.xml：**

```
<persistence-unit name="batchAdminEM" transaction-type="JTA">
    <jta-data-source>java:jboss/jdbc/batchAdminDB</jta-data-source>

    <class>...</class>
 ...</persistence-unit> 
```

当 Jboss 启动（没有应用程序）时，它会读取（绑定）数据源。当我尝试部署应用程序时出现错误，它没有运行。

更多 StackTrace 的帮助：

```
15:57:46,888 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) JBAS010400: Bound data source [java:jboss/jdbc/batchAdminDB]
...
15:57:52,356 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-2) HHH000204: Processing PersistenceUnitInfo [
    name: batchAdminEM
    ...]
15:57:53,649 ERROR [org.jboss.as] (MSC service thread 1-1) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 13255ms - Started 325 of 568 services (165 services failed or missing dependencies, 76 services are passive or on-demand)
15:57:53,861 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "BatchAdmin.war" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDBMissing[jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB]"]}
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB (missing) dependents: [service jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDB] 

15:57:53,934 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDBMissing[jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB]"]}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:22:25.350

您使用了错误的连接 URL 格式。使用`xe`as SID，您必须使用：

```
jdbc:oracle:thin:@HOST:PORT:xe 
```

或者

```
jdbc:oracle:thin:@//HOST:PORT/xe 
```

[在这里](http://www.orafaq.com/wiki/JDBC)查看更多信息。

添加

您还必须以这种方式更改 module.xml 文件中的一行：

```
<module xmlns="urn:jboss:module:1.0" name="com.oracle.ojdbc6"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:35:36.380

找了好久才发现问题所在。

**web.xml**包含之前在 Tomcat 上使用的配置。

```
<resource-ref>
  <description>DB Connection</description>
  <res-ref-name>jboss/jdbc/batchAdminDB</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
 </resource-ref> 
```

这种配置可能让 Jboss 感到困惑。不再需要了。

解决方案：
只需评论或删除该部分（resource-ref）。

一个有用的链接（葡萄牙语）：
[http ://www.guj.com.br/java/256103-resolvido-seam-3--hibernate-4--jbossas7-erro-de-datasource](http://www.guj.com.br/java/256103-resolvido-seam-3--hibernate-4--jbossas7-erro-de-datasource)

# android - 仅在任务后显示的进度对话框圈

> ID：12532025
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:34.350
> 
> 标签：android, android-asynctask, progressdialog

我有一个设置在 AsyncTask 内的进度圈。当 asynctask 正在执行时，它会显示大约一秒钟，然后消失。一旦任务完成，如果我按下后退按钮，圆圈会显示很长时间。为什么是这样？

```
private class AsyncGetRota extends AsyncTask<String, Void, Void> {

        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute()
        {
            progressDialog= ProgressDialog.show(NfcscannerActivity.this, 
                    "Connecting to Server"," retrieving rota...", true);

            //do initialization of required objects objects here                
        };      

        @Override
        protected Void doInBackground(String... params) {

            try {
                Log.e(TAG, "inside doInBackground");
                rotaArray = nfcscannerapplication.loginWebservice.getRota(params[0], params[1]);

                cancel(true);

            } catch (Exception e) {
               e.printStackTrace();
            }
            return null;

        }

        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            progressDialog.dismiss();
        };

    } 
```

[更新]

```
getRota.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.e(TAG, "onclicked getRota");

                    String[] params = new String[]{"36", "18-09-2012"}; 
                    AsyncGetRota agr = new AsyncGetRota();
                    agr.execute(params);

                    for(int i = 0; i < 60; i++){

                        if(agr.isCancelled() == true){
                            Log.e(TAG, "asyncTask is finished");
                            break;
                        }

                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }//end of for loop

                    Intent intent = new Intent(NfcscannerActivity.this,
                            GetRota.class);

                    Bundle b = new Bundle();
                    b.putSerializable("rotaArray", rotaArray);

                    intent.putExtra("rotaArrayBundle", b);
                    startActivity(intent);

                }// end of onclick
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:17:30.000

```
...
new MyAsyncTask().execute(string);
...
}

class MyAsyncTask extends AsyncTask<String, Void, Whatever > {
    ...
    @Override
    protected Whatever doInBackground(String... params) {

       Log.e(TAG, "inside doInBackground");
       rotaArray = nfcscannerapplication.loginWebservice.getRota(params[0],       params[1]);
       return rotaArray;
    }

    @Override
    protected void onPostExecute(Whatever result)
    {
        super.onPostExecute(result);
        if(progressDialog != null)
        progressDialog.dismiss();

        Intent intent = new Intent(NfcscannerActivity.this, GetRota.class);
        Bundle b = new Bundle();
        b.putSerializable("rotaArray", result);

        intent.putExtra("rotaArrayBundle", b);
        startActivity(intent);
    }
} 
```

启动 AsyncTask 后，您应该让执行继续，而不是使用某些循环或其他东西阻止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:07:46.163

尝试像这样实现它：

```
protected void onPreExecute() {
   dialog = new ProgressDialog(activity);
   dialog.setMessage("Processing...");
   dialog.show();
}

protected void onPostExecute(Void result) {
   if (dialog.isShowing()) {
       dialog.dismiss();
   } 
}; 
```

这总是对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:14:35.793

这里有几个问题，你不初始化 ProgressDialog，初始化一个像这样初始化 ProgressDialog 的构造函数......

```
 public AsyncGetRota(Activity activity) {
        this.activity = activity;
        dialog = new ProgressDialog(activity);
    } 
```

然后在 onPostExecute 检查你的 ProgressDialog 是否为空，像这样

```
@Override
    protected void onPostExecute(Void result)
    {
        super.onPostExecute(result);
        if(progressDialog != null)
        progressDialog.dismiss();
    } 
```

# django - Django基本的url slugifying问题

> ID：12532026
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:37.433
> 
> 标签：django, django-urls

我想在我的 Django 应用程序中处理我的网址。我已经阅读了很多文件，但我仍然不确定如何做得更好。我有两个问题：

1.  如何为两个不同的网址调用相同的视图？我想调用 www.mysite.com 和 www.mysite.com/index.html 的主页视图

    ```
    (r'^$', 'myapp.main.views.home')
    (r'([-\w]+)$', 'myapp.main.views.home') 
    ```

    上面的代码听起来不错，但当然会引发错误，因为主视图需要 1 个参数，但给出了 2 个参数。我该如何解决这个问题？

2.  我有很多应用程序，它们都有自己的 urls.py 文件。我将它们处理为将它们的 urls 文件包含到根 urls.py 为

    ```
     (r'^warehouse/', include('myapp.warehouse.urls')), 
    ```

这样，url 看起来像 www.mysite.com/warehouse/blabla/ 但是，我想将它们作为 www.mysite.com/warehouse_blabla.html 进行 slugifying 并不难，但我如何解析这样的 url 并将其重定向到仓库应用程序中的blabla视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:04:45.217

关于第一个问题，您最好使用`index.html`URL 重定向（更适合 SEO 等）

```
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',
    url(r'^$', 'myapp.main.views.home')
    url(r'^index.html$', redirect_to, {'url': '/'}),
) 
```

关于第二个问题，您的`urls.py`文件只是一组正则表达式，因此您可以控制要使用的 URL 方案：

```
urlpatterns = patterns('',
    url(r'^warehouse_(?P<slug>[_w]+).html$', 'warehouse.views.warehouse_detail'),
) 
```

也就是说，我认为你最好坚持通常的斜线约定

# c# - 例外：使用 FileStream 时拒绝访问

> ID：12532027
> 
> 赞同：4
> 
> 时间：2012-09-21T13:58:39.463
> 
> 标签：c#, exception, administrator

以下行引发异常。我不知道为什么。

```
using (var output = new FileStream(sftpFile.Name, FileMode.Create,FileAccess.ReadWrite)) 
```

例外是：

```
Error: System.UnauthorizedAccessException: Access to the path 'C:\Users\roberth\
Programming_Projects\Common\UI\bin\Debug' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, 
Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions 
options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, 
Boolean useLongPath, Boolean checkHost)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
   at CWD.Networking.DownloadFromSftp(String hostname, String user, String passw
ord, Int32 port, String localPath, String remotePath, String filename) in c:\Use
rs\roberth\Programming_Projects\Common\Common\Common.cs:line 566 
```

第 566 行是上面的 using 语句。

任何人都可以解释为什么我可能会触发错误吗？我对该目录拥有完全权限，没有编译问题，我也可以在该目录中手动创建新文件和文件夹。

- 编辑 -

我尝试按照建议以管理员身份运行 VS，但没有解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:09:49.233

`UnauthorizedAccessException`错误消息告诉您要打开的文件是什么：

```
C:\Users\roberth\Programming_Projects\Common\UI\bin\Debug 
```

这看起来像一个目录名称：您不能将目录作为文件打开。

您可能忘记附加文件名：

```
string filename = Path.Combine(sftpFile.Name, "SomeFile.dat");
using (var output = new FileStream(filename,...)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T18:11:15.150

您需要使用类似于以下内容的内容：

```
private bool EnviarArchivoSFTP(string PuertoSFTP, string UrlFTP, string CarpetaFTP, string UsuarioFTP, string PasswordFTP, string FicheroFTP, string nombreArchivo)
{
    bool archivoEnviado = false;

    using (var client = new SftpClient(UrlFTP, int.Parse(PuertoSFTP), UsuarioFTP, PasswordFTP))
    {
        client.ConnectionInfo.Timeout = TimeSpan.FromSeconds(1);
        client.OperationTimeout = TimeSpan.FromSeconds(1);
        client.Connect();
        client.ChangeDirectory(CarpetaFTP);

        string dataPath = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);
        string appFile = Path.Combine(dataPath, FicheroFTP, nombreArchivo);//Se brindan permisos full sobre la carpeta

        using (var fileStream = new FileStream(appFile, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
            client.BufferSize = 4 * 1024; // bypass Payload error large files
            client.UploadFile(fileStream, Path.GetFileName(nombreArchivo));
            archivoEnviado = true;
        }
    }
    return archivoEnviado;
} 
```

# c# - 全局“类对象”或全局“服务器对象”

> ID：12532028
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:49.587
> 
> 标签：c#

我正在做一个包括自定义 OPC 客户端的项目。Main 类表示 WPF 应用程序中的 MainWindow。私有字段`_opcServer`将保存一个对象以供进一步使用。`_opcServer`任何时候都只允许一个对象。我想出了这个（这都是示例代码并且工作正常）

```
// "Main" Class --> it's a WPF Window
public class Main
{
// the "global" server object
private OpcServer _opcServer = new OpcServer();

public Main() {}

private void connectOpcServer()
{
    if(this._opcServer == null)
    {
        // the "global" server object
        this._opcServer = this.opcClientFactory().connectOpcServer("someOpcServer");

        if(this._opcServer != null)
        {
            // we made the connection
        }
        else
        {
            // connection failed
        }           
    }
}

private void disconnectOpcServer()
{
    if(this._opcServer != null)
    {           
        if(this.opcClientFactory().disconnectOpcServer(this._opcServer))
        {
            // disconnected
            this._opcServer = null;
        }
        else
        {
            // something went wrong
        }
    }
}

private OpcClient ocpClientFactory()
{
    OpcClient opcClient = new opcClient();
    return opcClient;
}
   }

// Client Class
public class OpcClient     
{
// the server object
private OpcServer _opcServer = new OpcServer(); 

public OpcClient() {}

public OpcServer connectOpcServer(string progID)
{
    bool madeConnection = this._opcServer.Connect(progID);

    if(madeConnection)
    {
        return this._opcServer;
    }
    else
    {
        return null;
    }
}

public bool disconnectOpcServer(OpcServer opcServer)
{
    this._opcServer = opcServer;

    if(this._opcServer.disconnect())
    {
        this._opcServer = null;
        return true;
    }       
    return false;
}       
  } 
```

代码中没有太多注释，但我认为您明白了。每次通过用户操作触发连接或断开连接时，都会创建一个新的 OPC 客户端对象，并以一个或另一个方向传递服务器对象。将会有更多这样的方法（如读取标签等），但由于用户应该每天只使用一次或两次，我认为创建新对象并在它们之间传递一些东西没有问题。

但是，如果有一个真正有趣的用户认为他必须一直使用这些东西（连接/断开/等）怎么办。然后我将最终创建许多对象！

我想了想，想出了这个。

```
public class Main
{
// the client object
private OpcClient _opcClient = OpcClient.Instance;

public Main(){}

private void connectOpcServer()
{
    if(this._opcClient.connectOpcServer("someOpcServer"))
    {
        // we made the connection and can now use 
        // this._opcClient.opcServer
    }
    else
    {
        // connection failed
    }
}

private void disconnectOpcServer()
{
    if(this._opcClient.disconnect())
    {
        // disconnected
    }
    else
    {
        // something went wrong
    }
}
 }

public class OpcClient
{
private static OpcClient _instance;

public static OpcClient Instance
{
    get
    {
        if(instance == null)
        {
            _instance = new OpcClient();
        }           
        return _instance;
    }
}

private OpcClient()
{
    this.opcServer = new OpcServer();
}

public OpcServer opcServer
{
    get;
    private set;
}

public bool connectOpcServer(string progID)
{   
    return this.opcServer.Connect(progID);
}

public bool disconnectOpcServer()
{
    return this.opcServer.disconnect();
}

 } 
```

现在我创建一个 OPC 客户端的单例并将其传递给主类。现在只会创建一个对象，用户可以整天单击连接/断开连接。

在这里进行的最佳方式是什么？

1.  将服务器对象存储在主类中
2.  将类对象存储在主类中
3.  要看
4.  两者都是坏主意（如果是这样，为什么？我能做些什么呢？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:47:35.573

我选择第二个选项。通过选择单例方法，我可以确保只有一个服务器对象。这个非常重要。

# image - 如何在 OpenStack 中将拆分 vmdk 添加到 Glance？

> ID：12532029
> 
> 赞同：0
> 
> 时间：2012-09-21T13:58:49.970
> 
> 标签：image, virtualization, openstack

我在 OpenStack 中虚拟化了一些服务器。我已经将虚拟机创建为 VMDK 格式 (VMWare)，但虚拟磁盘被拆分为 2GB 的文件。将文件复制到 OpenStack 后，我意识到 Glance（OpenStack 的图像管理服务）只添加了我指向的特定文件的图像。

这让我想到了我现在的问题。有没有办法将拆分的 VMDK 添加到 Glance？

我必须将其合并回一张图像吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:35:56.510

无论如何我都没有找到将分割文件虚拟机添加到 OpenStack 的方法，但我确实发现我可以将虚拟机文件合并为一个。尽管管理 200GB 文件有些不便，但它仍然是一个可行的解决方案。

[http://www.mahmoudthoughts.com/2009/07/merge-2gb-vmdk-files-to-one-single-vmdk.html](http://www.mahmoudthoughts.com/2009/07/merge-2gb-vmdk-files-to-one-single-vmdk.html)

# c++ - 方法作为回调

> ID：12532030
> 
> 赞同：1
> 
> 时间：2012-09-21T13:58:54.890
> 
> 标签：c++, templates, callback

我已经用接口实现了我的回调..

```
struct ICallback
{
  virtual bool operator()() const = 0;
}; 
```

和添加回调的函数

```
void addCallback(const ICallback* callback) { .... } 
```

并使用，回调在某个类中

```
class BusImplemantation{
public:
    struct Foo : ICallback
    {
       virtual bool operator()() const { return true;}
    }foo;
    void OtherMethod();
    int OtherMember;       
}; 
```

但是因为回调是类（不是函数/方法），所以我不能在回调中访问 OtherMethod 和 OtherMember。如果回调不是类，而只是可能的方法。（内部类与方法）

**我不能将 OtherMethod 和 OtherMember 作为参数传递给回调。**

有没有更好的解决方案？也许有模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:19:29.673

使用`std::function`：

```
void addCallback(const std::function<bool()>) { .... }

class BusImplemantation{
public:
    bool Callback() { return true; }
    void OtherMethod();
    int OtherMember;       
};

BusImplemantation obj;
addCallback(std::bind(&BusImplemantation::Callback, obj)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:09:58.640

你能做这样的事情吗：

```
typedef std::function<bool()> CallbackFunc;
void addCallback(const CallbackFunc callback) { .... }

class BusImplemantation{
public:
    struct Foo
    {
       Foo(member) : OtherMember(member) { }

       bool operator()() const { return true; }

       void OtherMethod();
       int OtherMember;       
    }foo;
}; 
```

不要让你的回调成为一个接口，而是让它使用 std::function 使它成为一个函数对象（一个 Functor），并且你的 functor 需要的任何额外数据或方法都可以成为 functor 类的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:37:09.300

使用回调对象而不是自由函数的全部意义在于您可以将任意状态与它们关联：

```
class BusImplemantation{
public:
    struct Foo : ICallback
    {
       explicit Foo(BusImplementation &p) : parent(p) {} 
       virtual bool operator()() const;

    private:
       BusImplementation &parent;
    } foo;

    BusImplementation() : foo(*this)
    {
        addCallback(&foo)
    }

    void OtherMethod();
    int OtherMember;       
};

bool BusImplementation::Foo::operator() () const
{
    if (parent.OtherMember == 0) {
        parent.OtherMethod();
        return false;
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T14:04:19.907

查看[boost::bind](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)以获取有关如何实现此功能的一系列替代方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T14:30:41.237

我认为您的`ICallback`接口必须具有指向具有基接口的受控类的指针，假设它`BusImplemantation`和内部回调使用此指针。

```
struct ICallback
{
  virtual bool operator()() const = 0;
  void setControlObject(BusImplemantation* o)
  {
    obj = o;
  }
  BusImplemantation* obj;
};

class BusImplemantation
{
public:
    void addCallback(const ICallback* callback)
    { 
       callback->setControlObject(this);
    }
    void OtherMethod();
    int OtherMember;       
}; 
```

并使用：

```
class SomeCb : ICallback
{
   bool operator()
   {
       obj->OtherMethod();
       return true;
   }
} 
```

# javascript - 测试：“大于”不在 qoutes 中

> ID：12532032
> 
> 赞同：1
> 
> 时间：2012-09-21T13:58:59.143
> 
> 标签：javascript, regex, match

我试图匹配每一个`>`而`>>`不是被单引号或双引号包围。

```
var a = 'hello > you'; // true
var b = 'hello >> you'; // true
var c = '"hello > you"'; // false
var d = '"hello > you" >> you'; // true
var e = "'hello' > you"; // true
var f = "'hello > you'"; // false 
```

我已经工作了一段时间，但没有提供任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:06:16.430

如果你只是想检查字符串是否匹配，你可以使用这样的东西：

```
var regex = /^(?:"[^"]*"|'[^']*'|[^"'>]*)*>/; 
```

这将检查以确保从一开始，字符串有一个带引号的部分（单引号或双引号）或其他不是引号或大于号的字符，后跟一个大于号。

这不适用于嵌套引号（在字符串内），但它应该适用于字符串内的一层引号。

# macos - fslogger：ioctl 错误：错误地址

> ID：12532033
> 
> 赞同：2
> 
> 时间：2012-09-21T13:59:01.333
> 
> 标签：macos, osx-lion, osx-mountain-lion, ioctl, fsevents

我正在使用这个 fslogger.c 在我的 Mac 中获取文件系统通知。但它仅适用于 Leopard 和 SnowLeopard，不适用于 Lion 或 Mountain Lion。

[http://osxbook.com/software/fslogger/download/fslogger.c](http://osxbook.com/software/fslogger/download/fslogger.c)

当尝试使用 ioctl 克隆 /dev/fsevents 时，它返回错误号 14（错误地址）。我已经尝试修复它，我认为这可能是 ioctl 函数参数中的一些问题。所以我尝试修改它，但根本没有用。我根本无法解决这个问题。任何想法如何使它适用于狮子和山狮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:48:05.340

从 Lion 开始，安全性有所提高。所以我必须用第三个参数“S_IROTH”打开文件。这将允许访问 /dev/fsevents 设备流。希望这对像我这样的人有帮助。

# c# - Windows 8 C# Store 应用程序 - 链接到商店和评论

> ID：12532034
> 
> 赞同：15
> 
> 时间：2012-09-21T13:59:01.520
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我们即将提交一个包含两个版本的 Windows 8 游戏：

*   广告支持的免费版本，包含 3 个级别
*   完整的游戏

所以在支持广告的版本上，我们需要一个按钮来链接到完整版的商店。

在这两个版本中，我们还希望放置一个按钮来链接到商店以查看每个应用程序。

这两种情况在 Windows 8 中是如何处理的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-08T22:05:24.210

感谢创建 Physamajig 的可爱人们，他们不仅解决了这个问题，而且还在他们的博客上分享了信息！以下是您可以直接链接到您的评论页面的方法：

```
Windows.System.Launcher.LaunchUriAsync(new Uri("ms-windows-store:REVIEW?PFN=MY_PACKAGE_FAMILY_NAME")); 
```

将 MY_PACKAGE_FAMILY_NAME 替换为包清单中的那个。

查看完整详情：[http ://andybeaulieu.com/Home/tabid/67/EntryID/227/Default.aspx](http://andybeaulieu.com/Home/tabid/67/EntryID/227/Default.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T14:05:05.083

```
var storeURI = new Uri("ms-windows-store:PDP?PFN=<Your package family name from the manifest>");
await Windows.System.Launcher.LaunchUriAsync(storeURI); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T16:57:36.147

我们今天询问了直接链接到 AEL 的评论页面的问题。一旦您的应用进入商店，设置魅力中的评分和评论链接会自动添加。无需编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T09:31:00.737

您可以在点击事件中直接使用以下代码：

```
MarketplaceReviewTask marketplaceReviewTask = new MarketplaceReviewTask();

marketplaceReviewTask.Show(); 
```

您将需要添加

```
using Microsoft.Phone.Tasks; 
```

还。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-24T05:42:21.677

用这个：-

```
private async void Rate_Click(object sender, RoutedEventArgs e)
    {
        String pfn = Package.Current.Id.FamilyName;
        await Windows.System.Launcher.LaunchUriAsync(new Uri("ms-windows-store:REVIEW?PFN=" + pfn + ""));
    } 
```

[你可以在这里](http://windevlab.blogspot.com/2014/08/add-rate-and-review-button-in-windows-8.html)找到详细的解决方案。

# flash - 开发模式下的flash外部接口

> ID：12532038
> 
> 赞同：1
> 
> 时间：2012-09-21T13:59:11.683
> 
> 标签：flash, actionscript

我有一个使用外部接口（AS 3）通过 JS 与网页进行通信的 Flash 应用程序。一切正常。

我的开发是在 Flash Pro CS6 及其 AS 编辑器中进行的。想知道是否有一种方法可以在开发界面中模拟来回传递信息？我已经添加了额外的按钮来单击等，以查看代码是否正常工作。但是，这始终取决于仅模拟外部接口并添加以后必须删除的内容。然后总是必须在 html 页面上测试新编译的 swf 并来回走动以使事情正确。

由于flash开发接口是独立的，我怀疑有没有办法做到这一点；但是，认为值得提出这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:53:19.273

我以前用过这样的东西：

```
if (Capabilities.playerType == 'External' || Capabilities.playerType == "StandAlone")
{
    // run some code that should happen during the development environment
    // it will also run if you double click a .swf or .exe projector file
    // ie. Jump straight to what happens when ExternalInterface call is successful
}
else
{
    // run code for when the .swf is embedded in a webpage
    // ie. Actually use ExternalInterface
} 
```

它并不能完美地解决问题，但是当您需要“通过”应用程序的一部分时，我发现它很有帮助。您可以使用它来跳过和模拟 ExternalInterface 调用，并只返回一些您可以继续使用的示例数据。这比为分发/开发来回重建要容易。

看看[这个](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#playerType)以获取更多信息：

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:23:23.077

据我所知，Flash Pro CS6 没有办法。
在任何其他 Flash 开发环境中都可能有可能……例如，在 Flash Builder（或 FDT）中，您可以轻松自定义调试时启动的 URL 或路径（例如`http://localhost/test.html`，等等……）。

# android - 如何解决由于无效的APK文件导致安装失败？

> ID：12532044
> 
> 赞同：4
> 
> 时间：2012-09-21T13:59:23.487
> 
> 标签：android, eclipse, apk

我正在尝试构建 Dolphin Player，但我得到了他的错误：

```
[2012-09-21 09:46:23 - DolphinPlayer] Installation failed due to invalid APK file!
[2012-09-21 09:46:23 - DolphinPlayer] Please check logcat output for more details.
[2012-09-21 09:46:23 - DolphinPlayer] Launch canceled!

09-21 09:32:15.460: W/PackageParser(52): Unknown element under <application>: intent-filter at /data/app/vmdl30455.tmp Binary XML file line #31
09-21 09:32:17.360: E/PackageManager(52): Package com.broov.player has mismatched uid: 10031 on disk, 10035 in settings
09-21 09:32:17.370: I/PackageManager(52): /data/app/vmdl30455.tmp changed; unpacking
09-21 09:32:17.390: W/PackageManager(52): Native ABI mismatch from package file
09-21 09:32:17.400: W/PackageManager(52): Package couldn't be installed in /data/app/com.broov.player.apk
09-21 09:32:17.460: D/AndroidRuntime(833): Shutting down VM
09-21 09:32:17.460: D/dalvikvm(833): DestroyJavaVM waiting for non-daemon threads to exit
09-21 09:32:17.460: D/dalvikvm(833): DestroyJavaVM shutting VM down
09-21 09:32:17.460: D/dalvikvm(833): HeapWorker thread shutting down
09-21 09:32:17.460: D/dalvikvm(833): HeapWorker thread has shut down
09-21 09:32:17.470: D/jdwp(833): JDWP shutting down net...
09-21 09:32:17.470: I/dalvikvm(833): Debugger has detached; object registry had 1 entries
09-21 09:32:17.480: D/dalvikvm(833): VM cleaning up
09-21 09:32:17.480: E/AndroidRuntime(833): ERROR: thread attach failed
09-21 09:32:17.490: D/dalvikvm(833): LinearAlloc 0x0 used 631172 of 5242880 (12%)
09-21 09:32:17.669: D/dalvikvm(52): GC freed 8681 objects / 526608 bytes in 239ms
: E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:01:43.403

看起来您的 AndroidManifest.xml 文件中出现了问题。一个意图过滤器可能在错误的地方？我认为它需要在 <activity> 标签内，而不是在 <application> 标签内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-30T15:06:28.957

我在运行应用程序时遇到了同样的错误，然后**我删除了 bin 文件夹** **并清理了项目**并再次运行，它再次创建了 bin 文件夹并运行没有任何错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:10:42.087

可能是两种情况。

1.  AndroidManifest.xml
2.  包含的 .jar 文件也可能是导致此问题的原因。

欲了解更多信息，请查看

[由于 APK 文件无效，Eclipse 安装失败？](https://stackoverflow.com/questions/7998101/eclipse-installation-failed-due-to-invalid-apk-file)

或者

[APK文件无效导致安装失败？](https://stackoverflow.com/questions/7230757/installation-failed-due-to-invalid-apk-file)

或者

[由于 APK 文件无效，安装失败！- 安卓](https://stackoverflow.com/questions/11530097/installation-failed-due-to-invalid-apk-file-android)

或者

[安装失败 - 无效的 apk 文件 - android_opencv_library](https://stackoverflow.com/questions/6760027/installation-failed-invalid-apk-file-android-opencv-library)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-03T16:15:01.787

构建>重建项目..为我解决了这个问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-06T04:15:59.550

*   **第 1 步**：就我而言，我删除了...\android\app\build\outputs\apk\debug 文件夹中的**app-debug.apk**。

*   **第2步**：然后再次运行。这对我有用。

**祝你好运。永不放弃！！！**

# sql - JPQL (SQL) in 子句和顺序

> ID：12532049
> 
> 赞同：0
> 
> 时间：2012-09-21T14:00:01.000
> 
> 标签：sql, jpql

我们有一系列对象，每个对象都有一个唯一的 id ( `dbId`)。给定一个 DBID 列表，我们想要检索相应的对象。

我们尝试了（JPQL）：

```
SELECT myObject FROM MyObject WHERE myObject.dbId IN ( listOfDbIds ) 
```

我们得到了对象列表，但查询（如预期的那样）不保留顺序。

我们真的必须按照原始列表的顺序对结果进行排序还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:10:22.783

我没有看到任何其他方式。在这种情况下， Guava 的[显式排序](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Ordering.html#explicit%28java.util.List%29)会有所帮助。

# bash - -XX:OnOutOfMemoryError=" " 给出错误：无法找到或加载主类

> ID：12532051
> 
> 赞同：0
> 
> 时间：2012-09-21T14:00:05.773
> 
> 标签：bash, shell, jvm, quotes

我已将 JAVA_OPTS 设置为

```
export JAVA_OPTS="$JAVA_OPTS -server -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log  -Dcom.sun.management.jmxremote.ssl=false -Xms100m -Xmx100m -XX:MaxPermSize=5M -XX:ReservedCodeCacheSize=100m -Xss100k -XX:NewRatio=2 -XX:+UseParallelOldGC -XX:+UseParallelGC -XX:CompileThreshold=100  -XX:HeapDumpPath=/usr/share/$package -XX:-HeapDumpOnOutOfMemoryError -XX:OnError=$TEMP_CMD -XX:OnOutOfMemoryError=$TEMP_CMD" 
```

然后运行命令“trinidad -p”

在 $TEMP_CMD 中，如果我使用不带任何参数的命令，则会发生 OutOfMemoryError 并且 $TMP_CMD 命令也会运行。但是，如果我在命令中使用任何参数，则会显示以下输出

```
Error: Could not find or load main class <arg> 
```

arg 是参数

谁能给我解决方案？

在 trinidad.yml 或任何其他 cofig 文件中是否有任何更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:31:39.207

尝试

`export JAVA_OPTS="... \"-XX:OnError=$TEMP_CMD\" ..."`

或者

`export JAVA_OPTS='... "-XX:OnError=$TEMP_CMD" ...'`

请参阅[Bash 嵌套引号和 eval](https://stackoverflow.com/questions/9510362/bash-nested-quotes-and-eval)以及[http://www.grymoire.com/Unix/Quote.html](http://www.grymoire.com/Unix/Quote.html)。

**更新**

经过测试，以上似乎仍然无法正常工作。

测试.sh

```
JAVA_OPTS="$JAVA_OPTS -Xmx32m '-XX:OnOutOfMemoryError=echo %p'"
java $JAVA_OPTS Test 
```

给

```
$ bash -x ./test.sh
+ JAVA_OPTS=' -Xmx32m '\''-XX:OnOutOfMemoryError=echo %p'\'''
+ java -Xmx32m ''\''-XX:OnOutOfMemoryError=echo' '%p'\''' Test
Exception in thread "main" java.lang.NoClassDefFoundError: '-XX:OnOutOfMemoryError=echo 
```

失败。

```
JAVA_OPTS="$JAVA_OPTS -Xmx32m -XX:OnOutOfMemoryError=\"echo %p\""
java $JAVA_OPTS Test 
```

给

```
$ bash -x ./test.sh
+ JAVA_OPTS=' -Xmx32m -XX:OnOutOfMemoryError="echo %p"'
+ java -Xmx32m '-XX:OnOutOfMemoryError="echo' '%p"' Test
Exception in thread "main" java.lang.NoClassDefFoundError: %p" 
```

失败。

使用 bash 选项进行诊断`-x`有助于谷歌搜索问题的根源在于 bash 变量替换和分词规则的奇怪组合：http: [//mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)。

有几种可能的解决方法。

1）使用帮助脚本摆脱顽固的空间

```
JAVA_OPTS+=" -Xmx32m -XX:OnOutOfMemoryError=/usr/tmp/test/oom.sh"
java $JAVA_OPTS Test 
```

2)`OnOutOfMemoryError`移出变量

```
JAVA_OPTS="$JAVA_OPTS -Xmx32m"
java $JAVA_OPTS -XX:OnOutOfMemoryError="echo %p" Test 
```

给

```
$ bash -x ./test.sh
+ JAVA_OPTS=' -Xmx32m'
+ /usr/java/jdk1.6.0_16/bin/java -Xmx32m '-XX:OnOutOfMemoryError=echo %p' Test
#
# java.lang.OutOfMemoryError: Java heap space
# -XX:OnOutOfMemoryError="echo %p"
#   Executing /bin/sh -c "echo 1639"...
1639 
```

# java - java中的梵文i18n

> ID：12532056
> 
> 赞同：7
> 
> 时间：2012-09-21T14:00:11.410
> 
> 标签：java, internationalization, indic

我正在尝试使用来自互联网的示例 ttf 文件在 java 中将 i18n 用于梵文/印地语。

我能够加载资源包条目并加载 ttf 并设置字体，但它不会按需要呈现 jlabel。它显示块代替字符。如果我在 Eclipse 中调试，我可以将鼠标悬停在 unicode 变量上，它甚至会呈现梵文。以下是供参考的代码和资源包。

```
package i18n;

import java.awt.Font;
import java.awt.GridLayout;
import java.io.InputStream;
import java.util.Locale;
import java.util.ResourceBundle;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class MyNumbers extends JFrame {
    private ResourceBundle rb;
    private Font devanagariFont;

    public MyNumbers (String language, String fontFile) {
        loadResourceBundle(language);
        loadFont(fontFile);
        display();
    }

    private void display() {
        String unicode = null;

        JPanel labels = new JPanel(new GridLayout(0,2));
        JLabel uni = null;
        for(int i=0; i<=10; i++) {
            unicode = rb.getString("" +i);
            labels.add(new JLabel("" + i));
            labels.add(uni = new JLabel(unicode));
            uni.setFont(devanagariFont);
        }
        getContentPane().add(labels);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        pack();
        setVisible(true);
    }

    private void loadFont(String fontFile) {
        try {
            InputStream input = getClass().getResourceAsStream(fontFile);
            Font b = Font.createFont(Font.TRUETYPE_FONT, input);
            devanagariFont = b.deriveFont(Font.PLAIN, 11);

        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    private void loadResourceBundle(String language) {
        String base = getClass().getName() + "rb";
        rb = ResourceBundle.getBundle(base, new Locale(language));

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        new MyNumbers("hi", "Devnew.ttf");
    }

} 
```

这是我创建的 MyNumbersrb_hi.properties 的资源包。

```
Default properties in Devnagari
0=\u0915\u0916\u0917:
1=\u090f\u0915:
2=\u0926\u094b:
3=\u0924\u0940\u0907:
4=\u091a\u093e\u0930:
5=\u092a\u093e\u091a:
6=\u091b\u0947:
7=\u0938\u093e\u0924:
8=\u0906\u093e\u0920:
9=\u0928\u094c:
10=\u0926\u0938:
random=Random
title=Key in numbers to match the words 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:35:48.707

尝试使用这个[https://stackoverflow.com/a/6995374/466250](https://stackoverflow.com/a/6995374/466250) ，因为原始问题说属性文件默认为 ISO-8859-1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:54:40.910

只是不要在标签上为 unicode 设置字体，默认字体能够很好地呈现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:18:24.720

尝试运行 SymbolText 小程序，选择 900 范围，然后选择您尝试使用的字体。将结果与选择标准字体（如 Devanagari MT）进行比较。您的字体版本与 JVM 上的 TrueType 实现之间可能存在不兼容。

尝试调用 getFontName()、getNumGlyphs()、canDisplay() 和 canDisplayUpTo() 来验证您加载的字体是否符合您的预期。

由于您知道 Eclipse 可以呈现梵文，因此如有必要，请尝试识别和使用 Eclipse 使用的字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T07:45:52.383

使用 utf-8 加载资源

ResourceBundle messages=ResourceBundle.getBundle("resources/MenuBarResources",locale,new UTF8Control());

```
public class UTF8Control extends Control {
public ResourceBundle newBundle
    (String baseName, Locale locale, String format, ClassLoader loader, boolean reload)
        throws IllegalAccessException, InstantiationException, IOException
{
    // The below is a copy of the default implementation.
    String bundleName = toBundleName(baseName, locale);
    String resourceName = toResourceName(bundleName, "properties");
    ResourceBundle bundle = null;
    InputStream stream = null;
    if (reload) {
        URL url = loader.getResource(resourceName);
        if (url != null) {
            URLConnection connection = url.openConnection();
            if (connection != null) {
                connection.setUseCaches(false);
                stream = connection.getInputStream();
            }
        }
    } else {
        stream = loader.getResourceAsStream(resourceName);
    }
    if (stream != null) {
        try {
            // Only this line is changed to make it to read properties files as UTF-8.
            bundle = new PropertyResourceBundle(new InputStreamReader(stream, "UTF-8"));
        } finally {
            stream.close();
        }
    }
    return bundle;
}
} 
```

# jquery - jQuery css：在“top”属性中放置一个变量

> ID：12532057
> 
> 赞同：0
> 
> 时间：2012-09-21T14:00:13.487
> 
> 标签：jquery

我正在寻找一种方法来判断与窗口顶部的距离，并在用户进行滚动时使用 jQuery 更改 css。我尝试了这样的事情并且不起作用：

```
var topDistance = $('div').offset().top; // distance of the div relative to the top of the window
$('div').css({position: 'absolute',top:topDistance, right:'0px'}); 
```

有没有办法将变量放在 jQuery css 的“顶部”属性中？我尝试了上面的代码，它似乎不起作用。有谁知道如何改进代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:01:52.560

您可以使用[`offset()`](http://api.jquery.com/offset/)从网页顶部获取偏移量的值。我用它来滚动菜单（当他们向下滚动页面时跟随用户）。

要更改 CSS，您需要使用[`scroll()`](http://api.jquery.com/scroll/)窗口上的事件。这是我用于在用户滚动时将元素（例如菜单）向下移动的代码。希望这会对您有所帮助：

```
var scrollTimer;

jQuery(document).ready(function($){
    // this will set a callback on the scroll event for the window
    $(window).scroll(function(e){
        // i'm using a timer so that the menu "catches up" once the user has scrolled and finished scrolling
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(function(){
            scrollSidebar();
        }, 200);
    });
});

// this function will animate the object down
function scrollSidebar(){
    // get the scroll location of the body 
    var scrollTop = $('body').scrollTop();

    // offset of the menu I want to follow as you scroll
    var offset = $('#scroll-menu').offset();

    // get the margin-top to see if its already scrolled down at all
    var margintop = $('#scroll-menu').css('margin-top');

    // this just checks if the user has scrolled down so the top of the menu element is now off the screen (e.g. if they have scrolled too far then the menu should follow the scroll amount, if the top of the element is in view then it needs to revert to the top again)
    if(scrollTop > (offset.top-parseInt(margintop))){
        $('#scroll-menu').animate({'margin-top':(scrollTop-(offset.top-parseInt(margintop)))+'px'}, "fast"); // 20 px extra padding
    }
    else {
        $('#scroll-menu').animate({'margin-top':'0px'});
    }
} 
```

# java - 支持快速第k大元素查找的队列数据结构

> ID：12532060
> 
> 赞同：21
> 
> 时间：2012-09-21T14:00:19.050
> 
> 标签：java, c++, algorithm, data-structures

我面临一个问题，它需要一个支持快速第 k 个最大元素查找的队列数据结构。

该数据结构的要求如下：

1.  队列中的元素不一定是整数，但它们必须是相互可比的，即我们可以通过比较两个元素来判断哪个更大（它们也可以相等）。

2.  数据结构必须支持入队（添加尾部元素）和出队（删除头部元素）。

3.  它可以快速找到队列中第 k 个最大的元素，请注意 k 不是常数。

4.  您可以假设操作 enqueue 、 dequeue 和第 k 个最大元素查找都以相同的频率发生。

![在此处输入图像描述](../Images/648d2ec1ad2fb086c1507f483d28478b.png)

我的想法是使用修改后的平衡二叉搜索树。该树与普通平衡二叉搜索树相同，只是每个节点[i]都增加了另一个字段 n [i]，n [i]表示具有根节点[i]的子树中包含的节点数。支持上述操作如下：

为简单起见，假设所有元素都是不同的。

**Enqueue(x)**：首先将 x 插入树中，假设对应的节点是节点[t]，我们将 pair(x,pointer to node [t] ) 附加到队列中。

**出队**：假设（e1，节点[1]）是头部的元素，节点[1]是指向与e1对应的树的指针。我们从树中删除节点[1]并从队列中删除 (e1, node [1 )。]

**K-th最大元素查找**：假设根节点是节点[root]，它的两个子节点是节点[left]和节点[right]（假设它们都存在），我们将K与n[根]进行比较，可能会发生三种情况：

1.  如果 K< n [left我们在 n] [root]的左子树中找到第 K 个最大的元素；

2.  如果 K>n [root] -n [right我们在 n] [root]的右子树中找到 (Kn [root] +n [right] )-th 最大的元素；

3.  否则 n [root]是我们想要的节点。

所有三个操作的时间复杂度都是 O(log [N] ) ，其中 N 是当前队列中的元素数。

如何加快上述操作？使用什么数据结构以及如何使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T15:21:06.117

注意 - 你不可能比`O(logn)`所有人都做得更好，充其量你需要“选择”你最关心的操作。（否则，您可以`O(n)`通过将数组提供给 DS 并查询第一个、第二个、第三个、...第 n 个元素来进行排序）

*   使用[跳过列表](http://en.wikipedia.org/wiki/Skip_list)而不是平衡 BST 作为排序结构可以**将出队**复杂度降低到`O(1)` *平均情况*。它不会影响任何其他操作的复杂性。
    要从跳过列表中删除 - 您需要做的就是使用队列头部的指针到达元素，然后沿着链接向上并删除每个链接。需要删除的预期节点数为 1 + 1/2 + 1/4 + ... = 2。
*   **find Kth 可以`O(logK)`**通过从最左边的节点（而不是根节点）开始并一直向上直到您发现“需要更多的儿子”来实现，然后将刚刚找到的节点视为根节点，就像算法一样这个问题。虽然它在渐近复杂性方面更好 - 常数因子是两倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:29:44.037

我发现了一篇有趣的论文：

Sliding-Window Top-k Queries on Uncertain Streams 发表于 VLDB 2008 并被 71 引用。

[https://www.cse.ust.hk/~yike/wtopk.pdf](https://www.cse.ust.hk/~yike/wtopk.pdf)

VLDB是数据库研究领域最好的会议，引用次数证明数据结构确实有效。

这篇论文看起来很难，但是如果你真的需要改进你的数据结构，我建议你阅读这篇论文或者这篇论文参考页面中的论文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T04:55:07.000

您也可以使用[手指树](http://en.wikipedia.org/wiki/Finger_tree)。

> 例如，优先级队列可以通过在树中通过其子节点的最小优先级标记内部节点来实现，或者可以通过通过其子节点中的叶子计数来标记节点来实现索引列表/数组。手指树可以提供摊销的O(1) cons、reversing、cdr、O(log n) append和split；并且可以适应索引或有序序列。

另请注意，作为纯粹的功能结构，这使其成为并发使用的不错选择。

# php - DirectoryIterator 和 FileSystemIterator 的区别

> ID：12532064
> 
> 赞同：54
> 
> 时间：2012-09-21T14:00:33.800
> 
> 标签：php, spl

PHP 5 引入了[DirectoryIterator](http://us.php.net/manual/en/class.directoryiterator.php)，PHP 5.3 引入了[FileSystemIterator](http://us.php.net/manual/en/class.filesystemiterator.php)。

`FileSystemIterator`extends `DirectoryIterator`，但文档没有说明它带来了哪些额外的功能。

你能说出 和 之间的区别`DirectoryIterator`吗`FileSystemIterator`？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-21T14:38:31.640

这超出了我的想象，我有点陷入了 PHP 5.3 之前的更改中，这些更改将在 5.3 及更高版本中更改，涉及 SPL（StandardPHPLibrary）和将被移至 (可怕）PECL 扩展。

自 5.3 以来发生的主要变化是 SPL 成为无法再禁用的扩展，请参阅 5.3 的[更改日志](http://php.net/ChangeLog-5.php#5.3.0)，并指出

*   将 SPL 添加到无法禁用的标准扩展列表中。（马库斯）

所以像 DirectoryIterator 或 SPLDoublyLinkedList 这样的花哨的类现在都是 PHP 5.3 附带的一组修复类。

有很多讨论表明 DirectoryIterator 在迭代文件/目录以及从不够匿名的行为到正在使用的文件系统方面仍然非常笨拙。因为根据文件系统（Windows NTFS / *nix EXTx），迭代器返回的结果与另一个不同，在`*nix`默认情况下，环境总是将点和双点目录（`.`和`..`）作为有效目录。然后可以使用该`isDot()`方法在循环中过滤这些点目录。

```
$it = new DirectoryIterator(__DIR__);
foreach ($it as $fileinfo) {
  if (!$fileinfo->isDot())
    var_dump($fileinfo->getFilename());
} 
```

因此`FilesystemIterator`成为 PHP 5.3 中的新父类，在其发布之前是`DirectoryIterator`（其中`FilesystemIterator`扩展`DirectoryIterator`以默认实现这种*可互换行为*）。然后，行为或产生的结果`FilesystemIterator`将等于所有不同的文件系统并且可以互换，而无需循环中的任何开销

```
$it = new FilesystemIterator(__DIR__);
foreach ($it as $fileinfo) {
  echo $fileinfo->getFilename() . "\n";
} 
```

这是一个很好的问题，为什么他们没有更新文档以通知用户实际上`FilesystemIterator`在`DirectoryIterator`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-21T14:21:35.710

`DirectoryIterator` 是的延伸`SplFileInfo`

尽管

`FilesystemIterator`是的延伸`DirectoryIterator`

和两个工具

`Iterator , Traversable , SeekableIterator`

`FilesystemIterator`有标志会影响其在处理哪些文件时的行为，这些文件可能非常有用`FOLLOW_SYMLINKS , SKIP_DOTS etc`，这使得它的大部分不同。

[您可以在FilesystemIterator 预定义常量](http://us.php.net/manual/en/class.filesystemiterator.php#filesystemiterator.constants)中看到完整标志

例子

```
$iterator = new DirectoryIterator(dirname(__FILE__));
foreach ( $iterator as $fileinfo ) {
    var_dump($fileinfo->current()); // would return object(DirectoryIterator)
} 
```

示例 2

```
$iterator = new FilesystemIterator(__DIR__, FilesystemIterator::CURRENT_AS_PATHNAME);
foreach ( $iterator as $fileinfo ) {
    var_dump($iterator->current()) . "\n"; // Would return full path eg /www/examples/example.php
} 
```

# android - 如何重新定位 VideoView 及其父级？

> ID：12532067
> 
> 赞同：1
> 
> 时间：2012-09-21T14:00:49.783
> 
> 标签：android, android-fragments, android-animation, android-view, android-video-player

我有一个`Fragment`内一个`FrameLayout`。其中`Fragment`包含一个`VideoView`。如果我修改`FrameLayout`的左侧位置（通过调用它的`layout(...)`方法），`FrameLayout`包括其中的`Fragment`显示会正确地重新定位自己，除了`VideoView`，它有时会重新定位自己，但通常会保持不变。任何人都知道为什么它可能`VideoView`不会与其父级一起重新定位，以及我如何能够让它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:18:39.363

尝试为您的 VideoView 使用此源代码。

```
public class CustomMediaController extends FrameLayout {

    /**
     * Public interface to handle FullScreenRequest. User can implement this
     * interface to make the VideoPlayer Change to FullScreen. The user must
     * handle show/hide of views. If the user do not add a Handler the
     * FullScreen control button will be hided.
     *
     * @author Anis
     *
     */
    public interface FullScreenMediaPlayer {
        /**
         * Event callback when the MediaPlayer request the FullScreen.
         */
        public void onFullScreenRequest();

        /**
         * Event callback when the MediaPlayer request the go back to normal
         * size.
         */
        public void onStreatchScreenRequest();

        /**
         * CallBackEvent when the MediaPlayer is Playing
         */
        public void onPlaying();

    }

    private MediaPlayerControl    mPlayer;
    private final Context         mContext;
    private View                  mAnchor;
    private View                  mRoot;
    private View                  mDecor;
    private ProgressBar           mProgress;
    private TextView              mEndTime, mCurrentTime;
    private boolean               mShowing;
    private boolean               mDragging;
    private static final int      sDefaultTimeout = 3000;
    private static final int      FADE_OUT        = 1;
    private static final int      SHOW_PROGRESS   = 2;
    private final boolean         mUseFastForward;
    private boolean               mFromXml;
    private boolean               mListenersSet;
    private View.OnClickListener  mNextListener, mPrevListener;
    StringBuilder                 mFormatBuilder;
    Formatter                     mFormatter;
    private ImageButton           mPauseButton;
    private ImageButton           mFfwdButton;
    private ImageButton           mRewButton;
    private ImageButton           mNextButton;
    private ImageButton           mPrevButton;

    // Add Streach colomn
    private ImageButton           mFullScreenButton;
    private boolean               isFullSreen;
    private FullScreenMediaPlayer fullScreenListener;

    public CustomMediaController(Context context, AttributeSet attrs) {
        super(context, attrs);
        mRoot = this;
        mContext = context;
        mUseFastForward = true;
        mFromXml = true;
        isFullSreen = false;

    }

    @Override
    public void onFinishInflate() {
        if (mRoot != null)
            initControllerView(mRoot);
    }

    public CustomMediaController(Context context, boolean useFastForward) {
        super(context);
        mContext = context;
        mUseFastForward = useFastForward;
        initFloatingWindow();
    }

    public CustomMediaController(Context context) {
        super(context);
        mContext = context;
        mUseFastForward = true;
        initFloatingWindow();
    }

    private void initFloatingWindow() {

        mDecor = this;
        mDecor.setOnTouchListener(mTouchListener);
        setFocusable(true);
        setFocusableInTouchMode(true);
        setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        requestFocus();
    }

    private final OnTouchListener mTouchListener = new OnTouchListener() {
                                                     @Override
                                                     public boolean onTouch(View v, MotionEvent event) {
                                                         if (event.getAction() == MotionEvent.ACTION_DOWN) {
                                                             if (mShowing) {
                                                                 hide();
                                                             }
                                                         }
                                                         return false;
                                                     }
                                                 };

    public void setMediaPlayer(MediaPlayerControl player) {
        mPlayer = player;
        updatePausePlay();
    }

    /**
     * Set the view that acts as the anchor for the control view. This can for
     * example be a VideoView, or your Activity's main view.
     *
     * @param view
     *            The view to which to anchor the controller when it is visible.
     */
    public void setAnchorView(View view) {
        mAnchor = view;

        FrameLayout.LayoutParams frameParams = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.FILL_PARENT);

        removeAllViews();
        View v = makeControllerView();
        addView(v, frameParams);
    }

    /**
     * Create the view that holds the widgets that control playback. Derived
     * classes can override this to create their own.
     *
     * @return The controller view.
     * @hide This doesn't work as advertised
     */
    protected View makeControllerView() {
        LayoutInflater inflate = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mRoot = inflate.inflate(R.layout.media_controller, null);
        initControllerView(mRoot);

        return mRoot;
    }

    private void initControllerView(View v) {
        mPauseButton = (ImageButton) v.findViewById(R.id.pause);
        if (mPauseButton != null) {
            mPauseButton.requestFocus();
            mPauseButton.setOnClickListener(mPauseListener);
        }

        mFfwdButton = (ImageButton) v.findViewById(R.id.ffwd);
        if (mFfwdButton != null) {
            mFfwdButton.setOnClickListener(mFfwdListener);
            if (!mFromXml) {
                mFfwdButton.setVisibility(mUseFastForward ? View.VISIBLE : View.GONE);
            }
        }

        mRewButton = (ImageButton) v.findViewById(R.id.rew);
        if (mRewButton != null) {
            mRewButton.setOnClickListener(mRewListener);
            if (!mFromXml) {
                mRewButton.setVisibility(mUseFastForward ? View.VISIBLE : View.GONE);
            }
        }

        // By default these are hidden. They will be enabled when
        // setPrevNextListeners() is called
        mNextButton = (ImageButton) v.findViewById(R.id.next);
        if (mNextButton != null && !mFromXml && !mListenersSet) {
            mNextButton.setVisibility(View.GONE);
        }
        mPrevButton = (ImageButton) v.findViewById(R.id.prev);
        if (mPrevButton != null && !mFromXml && !mListenersSet) {
            mPrevButton.setVisibility(View.GONE);
        }

        mProgress = (ProgressBar) v.findViewById(R.id.mediacontroller_progress);
        if (mProgress != null) {
            if (mProgress instanceof SeekBar) {
                SeekBar seeker = (SeekBar) mProgress;
                seeker.setOnSeekBarChangeListener(mSeekListener);
            }
            mProgress.setMax(1000);
        }

        mEndTime = (TextView) v.findViewById(R.id.time);
        mCurrentTime = (TextView) v.findViewById(R.id.time_current);
        mFormatBuilder = new StringBuilder();
        mFormatter = new Formatter(mFormatBuilder, Locale.getDefault());

        mFullScreenButton = (ImageButton) v.findViewById(R.id.video_fullscreen);
        installFullScreenListener();
        installPrevNextListeners();
    }

    /**
     * Show the controller on screen. It will go away automatically after 3
     * seconds of inactivity.
     */
    public void show() {
        show(sDefaultTimeout);
    }

    /**
     * Show the controller on screen. It will go away automatically after
     * 'timeout' milliseconds of inactivity.
     *
     * @param timeout
     *            The timeout in milliseconds. Use 0 to show the controller
     *            until hide() is called.
     */
    public void show(int timeout) {

        if (!mShowing && mAnchor != null) {
            setProgress();

            addToFrameAncherLayout();
            mShowing = true;

        }
        updatePausePlay();

        // cause the progress bar to be updated even if mShowing
        // was already true. This happens, for example, if we're
        // paused with the progress bar showing the user hits play.
        mHandler.sendEmptyMessage(SHOW_PROGRESS);

        Message msg = mHandler.obtainMessage(FADE_OUT);
        if (timeout != 0) {
            mHandler.removeMessages(FADE_OUT);
            mHandler.sendMessageDelayed(msg, timeout);
        }
    }

    private void addToFrameAncherLayout() {

        if ((mDecor != null) && (mDecor.getParent() == null)) {

            if (mAnchor instanceof FrameLayout) {
                FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT,
                        FrameLayout.LayoutParams.WRAP_CONTENT);
                params.gravity = Gravity.BOTTOM;
                ((FrameLayout) mAnchor).addView(mDecor, params);
                mDecor.setVisibility(View.VISIBLE);
            } else {
                // int[] anchorpos = new int[2];
                // mAnchor.getLocationOnScreen(anchorpos);
                //
                // WindowManager.LayoutParams p = new
                // WindowManager.LayoutParams();
                // p.gravity = Gravity.TOP;
                // p.width = mAnchor.getWidth();
                // p.height = LayoutParams.WRAP_CONTENT;
                // p.x = anchorpos[0];
                // p.y = anchorpos[1] + mAnchor.getHeight() -
                // mDecor.getHeight();
                // p.format = PixelFormat.TRANSLUCENT;
                // p.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL;
                // p.flags |= WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM;
                // p.token = null;
                // p.windowAnimations = 0; //
                // android.R.style.DropDownAnimationDown;
                // mWindowManager.addView(mDecor, p);
                // Logger.e("Ancher is not a Frame Layout usinf a Blocking Window");
            }
        }
        mDecor.setVisibility(View.VISIBLE);
    }

    public boolean isShowing() {
        return mShowing;
    }

    /**
     * Remove the controller from the screen.
     */
    public void hide() {
        if (mAnchor == null)
            return;

        if (mShowing) {
            try {
                mHandler.removeMessages(SHOW_PROGRESS);
                // TODO must be a New View
                if (mDecor != null) {

                    if (mAnchor instanceof FrameLayout) {

                        // ((FrameLayout) mAnchor).removeView(mDecor);
                        mDecor.setVisibility(View.GONE);
                    } else {
                        // mWindowManager.removeView(mRoot);
                    }
                }

            } catch (IllegalArgumentException ex) {
                Log.w("MediaController", "already removed");
            }
            mShowing = false;
        }
    }

    static class ProgressHandler extends Handler {
        WeakReference<CustomMediaController> mediaControllerReference;

        ProgressHandler(CustomMediaController mediaController) {
            mediaControllerReference = new WeakReference<CustomMediaController>(mediaController);
        }

        @Override
        public void handleMessage(Message msg) {
            CustomMediaController mediaController = mediaControllerReference.get();
            if (mediaController != null) {

                int pos;
                switch (msg.what) {
                    case FADE_OUT:
                        mediaController.hide();
                        break;
                    case SHOW_PROGRESS:
                        pos = mediaController.setProgress();
                        if (!mediaController.mDragging && mediaController.mShowing
                            && mediaController.mPlayer.isPlaying()) {
                            msg = obtainMessage(SHOW_PROGRESS);
                            sendMessageDelayed(msg, 1000 - (pos % 1000));
                        }
                        break;
                }
            }
        }
    }

    private final Handler mHandler = new ProgressHandler(this);

    private String stringForTime(int timeMs) {
        int totalSeconds = timeMs / 1000;

        int seconds = totalSeconds % 60;
        int minutes = (totalSeconds / 60) % 60;
        int hours = totalSeconds / 3600;

        mFormatBuilder.setLength(0);
        if (hours > 0) {
            return mFormatter.format("%d:%02d:%02d", hours, minutes, seconds).toString();
        } else {
            return mFormatter.format("%02d:%02d", minutes, seconds).toString();
        }
    }

    private int setProgress() {
        if (mPlayer == null || mDragging) {
            return 0;
        }
        int position = mPlayer.getCurrentPosition();
        int duration = mPlayer.getDuration();
        if (mProgress != null) {
            if (duration > 0) {
                // use long to avoid overflow
                long pos = 1000L * position / duration;
                mProgress.setProgress((int) pos);
            }
            int percent = mPlayer.getBufferPercentage();
            mProgress.setSecondaryProgress(percent * 10);
        }

        if (mEndTime != null)
            mEndTime.setText(stringForTime(duration));
        if (mCurrentTime != null)
            mCurrentTime.setText(stringForTime(position));

        return position;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        show(sDefaultTimeout);
        return true;
    }

    @Override
    public boolean onTrackballEvent(MotionEvent ev) {
        show(sDefaultTimeout);
        return false;
    }

    @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        int keyCode = event.getKeyCode();
        if (event.getRepeatCount() == 0
            && (keyCode == KeyEvent.KEYCODE_HEADSETHOOK || keyCode == KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE || keyCode == KeyEvent.KEYCODE_SPACE)) {
            doPauseResume();
            show(sDefaultTimeout);
            return true;
        } else if (keyCode == KeyEvent.KEYCODE_MEDIA_STOP) {
            if (mPlayer.isPlaying()) {
                mPlayer.pause();
                updatePausePlay();
            }
            return true;
        } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN || keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
            // don't show the controls for volume adjustment
            return super.dispatchKeyEvent(event);
        } else if (keyCode == KeyEvent.KEYCODE_BACK || keyCode == KeyEvent.KEYCODE_MENU) {
            hide();

            return true;
        } else {
            show(sDefaultTimeout);
        }
        return super.dispatchKeyEvent(event);
    }

    private final View.OnClickListener mPauseListener = new View.OnClickListener() {
                                                          @Override
                                                          public void onClick(View v) {
                                                              doPauseResume();
                                                              show(sDefaultTimeout);
                                                          }
                                                      };

    private void updatePausePlay() {
        if (mRoot == null)
            return;

        ImageButton button = (ImageButton) mRoot.findViewById(R.id.pause);
        if (button == null)
            return;

        if (mPlayer.isPlaying()) {
            button.setImageResource(R.drawable.ic_media_pause);
        } else {
            button.setImageResource(R.drawable.ic_media_play);
        }
    }

    private void doPauseResume() {
        if (mPlayer.isPlaying()) {
            mPlayer.pause();
        } else {
            mPlayer.start();
        }
        updatePausePlay();
    }

    private final OnSeekBarChangeListener mSeekListener = new OnSeekBarChangeListener() {
                                                            long duration;

                                                            @Override
                                                            public void onStartTrackingTouch(SeekBar bar) {
                                                                show(3600000);
                                                                duration = mPlayer.getDuration();
                                                            }

                                                            @Override
                                                            public void onProgressChanged(SeekBar bar, int progress,
                                                                                          boolean fromtouch) {
                                                                if (fromtouch) {
                                                                    mDragging = true;
                                                                    duration = mPlayer.getDuration();
                                                                    long newposition = (duration * progress) / 1000L;
                                                                    mPlayer.seekTo((int) newposition);
                                                                    if (mCurrentTime != null)
                                                                        mCurrentTime
                                                                                .setText(stringForTime((int) newposition));
                                                                } else {
                                                                    if ((fullScreenListener != null) && (progress > 0)) {
                                                                        fullScreenListener.onPlaying();
                                                                    }
                                                                }
                                                            }

                                                            @Override
                                                            public void onStopTrackingTouch(SeekBar bar) {
                                                                mDragging = false;
                                                                setProgress();
                                                                updatePausePlay();
                                                                show(sDefaultTimeout);
                                                            }
                                                        };

    @Override
    public void setEnabled(boolean enabled) {
        if (mPauseButton != null) {
            mPauseButton.setEnabled(enabled);
        }
        if (mFfwdButton != null) {
            mFfwdButton.setEnabled(enabled);
        }
        if (mRewButton != null) {
            mRewButton.setEnabled(enabled);
        }
        if (mNextButton != null) {
            mNextButton.setEnabled(enabled && mNextListener != null);
        }
        if (mPrevButton != null) {
            mPrevButton.setEnabled(enabled && mPrevListener != null);
        }
        if (mProgress != null) {
            mProgress.setEnabled(enabled);
        }

        super.setEnabled(enabled);
    }

    private final View.OnClickListener mRewListener  = new View.OnClickListener() {
                                                         @Override
                                                         public void onClick(View v) {
                                                             int pos = mPlayer.getCurrentPosition();
                                                             pos -= 5000; // milliseconds
                                                             mPlayer.seekTo(pos);
                                                             setProgress();

                                                             show(sDefaultTimeout);
                                                         }
                                                     };

    private final View.OnClickListener mFfwdListener = new View.OnClickListener() {
                                                         @Override
                                                         public void onClick(View v) {
                                                             int pos = mPlayer.getCurrentPosition();
                                                             pos += 15000; // milliseconds
                                                             mPlayer.seekTo(pos);
                                                             setProgress();

                                                             show(sDefaultTimeout);
                                                         }
                                                     };

    private void installPrevNextListeners() {
        if (mNextButton != null) {
            mNextButton.setOnClickListener(mNextListener);
            mNextButton.setEnabled(mNextListener != null);
        }

        if (mPrevButton != null) {
            mPrevButton.setOnClickListener(mPrevListener);
            mPrevButton.setEnabled(mPrevListener != null);
        }
    }

    private void installFullScreenListener() {
        if (mFullScreenButton != null) {
            mFullScreenButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View aView) {
                    Preconditions.checkNotNull(fullScreenListener,
                            "IllegalStateExeption, FullScreen Button pressed with a nullable Listener");

                    if (isFullSreen) {
                        // send the request to handle normal size;
                        fullScreenListener.onStreatchScreenRequest();
                        isFullSreen = false;
                        updateFullScreenButton();
                    } else {
                        // Send request to go FullScreen
                        fullScreenListener.onFullScreenRequest();
                        isFullSreen = true;
                        updateFullScreenButton();

                    }

                }
            });

            if (fullScreenListener == null) {

                mFullScreenButton.setVisibility(View.GONE);

            } else {

                mFullScreenButton.setVisibility(View.VISIBLE);
            }

        }
    }

    /**
     * Toggle the Full Screen Buttons
     */
    private void updateFullScreenButton() {

        if (isFullSreen) {
            mFullScreenButton.setImageResource(R.drawable.windowmin);
        } else {
            mFullScreenButton.setImageResource(R.drawable.windowmax);
        }

    }

    public void setPrevNextListeners(View.OnClickListener next, View.OnClickListener prev) {
        mNextListener = next;
        mPrevListener = prev;
        mListenersSet = true;

        if (mRoot != null) {
            installPrevNextListeners();

            if (mNextButton != null && !mFromXml) {
                mNextButton.setVisibility(View.VISIBLE);
            }
            if (mPrevButton != null && !mFromXml) {
                mPrevButton.setVisibility(View.VISIBLE);
            }
        }
    }

    public MediaPlayerControl getmPlayer() {
        return mPlayer;
    }

    public void setmPlayer(MediaPlayerControl mPlayer) {
        this.mPlayer = mPlayer;
    }

    @Override
    public void dispatchWindowVisibilityChanged(int visibility) {

        hide();
    }

    /**
     * @return the fullScreenListener or null if any Listener is registred.
     */
    public FullScreenMediaPlayer getFullScreenListener() {

        return fullScreenListener;
    }

    /**
     * @param aFullScreenListener
     *            the fullScreenListener.
     */
    public void registerFullScreenListener(FullScreenMediaPlayer aFullScreenListener) {
        Preconditions.checkNotNull(aFullScreenListener, "FullScreenListener cannot be null ");

        fullScreenListener = aFullScreenListener;
        installFullScreenListener();

    }

    public void removeFullScreenListerer() {
        fullScreenListener = null;
        installFullScreenListener();
    }

    /*
     * (non-Javadoc)
     *
     * @see android.view.View#onDetachedFromWindow()
     */
    @Override
    protected void onDetachedFromWindow() {

        super.onDetachedFromWindow();
        hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:58:41.683

最后放弃了。`VideoView`重新定位 a或任何解决方法似乎都不是一个简单的解决方法。我现在正在做的是在新活动中全屏播放视频。

# java - GZIPOutputStream 在单独的线程中进行压缩

> ID：12532073
> 
> 赞同：4
> 
> 时间：2012-09-21T14:01:06.013
> 
> 标签：java, multithreading, compression, gzipoutputstream

是否有 GZIPOutputStream 的实现可以在单独的线程中完成繁重的工作（压缩+写入磁盘）？

我们不断写入大量 GZIP 压缩数据。我正在寻找一个可以代替 GZIPOutputStream 的替代品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:10:50.920

您可以写入 PipedOutputStream 并拥有一个线程来读取 PipedInputStream 并将其复制到您喜欢的任何流中。

这是一个通用的实现。您给它一个 OutputStream 来写入，它返回一个 OutputStream 供您写入。

```
public static OutputStream asyncOutputStream(final OutputStream out) throws IOException {
    PipedOutputStream pos = new PipedOutputStream();
    final PipedInputStream pis = new PipedInputStream(pos);
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                byte[] bytes = new byte[8192];
                for(int len; (len = pis.read(bytes)) > 0;)
                    out.write(bytes, 0, len);
            } catch(IOException ioe) {
                ioe.printStackTrace();
            } finally {
                close(pis);
                close(out);
            }
        }
    }, "async-output-stream").start();
    return pos;
}

static void close(Closeable closeable) {
    if (closeable != null) try {
        closeable.close();
    } catch (IOException ignored) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-27T05:03:58.887

我发布了一些完全符合您要求的代码。让我感到沮丧的是，Java 不会自动跨多个线程进行这样的管道调用，以便重叠计算、压缩和磁盘 I/O：

[https://github.com/lukehutch/PipelinedOutputStream](https://github.com/lukehutch/PipelinedOutputStream)

此类将写入 a 拆分`OutputStream`为单独的生产者和消费者线程（实际上，为消费者启动一个新线程），并在它们之间插入一个阻塞的有界缓冲区。缓冲区之间有一些数据复制，但这是尽可能高效地完成的。

您甚至可以将其分层两次，以便在 gzip 压缩之外的单独线程中进行磁盘写入，如`README.md`.

# excel - Excel：格式化条件

> ID：12532077
> 
> 赞同：0
> 
> 时间：2012-09-21T14:01:19.523
> 
> 标签：excel, formatting

如何使用个人和复数大小写格式化单元格？我需要： 1 个 unidade 或 2 个 unidades 3 个 unidades

格式单元格中的单数和复数。 ![在此处输入图像描述](../Images/d35be9b926b98c99a92c1050e03dd8c8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:05:35.137

用于`[=1]`应用条件 &`;`与备用格式字符串组合；

```
 [=1]0 "unidade";0 "unidades" 
```

# latex - 将图形的标题拆分为两条相等的行

> ID：12532081
> 
> 赞同：3
> 
> 时间：2012-09-21T14:01:30.257
> 
> 标签：latex

我想拆分例如短语：

> 每个用户与用户数量的下限、上限和模拟吞吐量

它出现在图的标题中，分成两行，以使每行的长度几乎相等。类似于以下内容：

> 每个用户与用户数量的下限、上限和模拟吞吐量

我怎样才能做到这一点？我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T06:31:12.623

您可以将内容包装在宽度足够大的`varwidth`环境中（来自类似名称的[`varwidth`package](http://ctan.org/pkg/varwidth)）。`varwidth`将缩小它以适应该自然内容：

![在此处输入图像描述](../Images/c85d6fb4ebef2756cafe8e14828b9d3a.png)

```
\documentclass{article}
\usepackage{graphicx}% http://ctan.org/pkg/graphicx
\usepackage{varwidth}% http://ctan.org/pkg/varwidth
\begin{document}
\listoffigures
\begin{figure}
  \centering
  \includegraphics[scale=.5]{example-image-a}% Image
  \caption[Lower, upper and simulation throughput per user \textit{vs.}\ number of users]
    {\begin{varwidth}[t]{\linewidth}Lower, upper and simulation \\ throughput per user \textit{vs.}\ number of users\end{varwidth}}
\end{figure}
\end{document} 
```

两次指定标题的原因（一次在选项参数中`[]`，一次作为强制参数的一部分`{}`）是因为向 ToC 发送受框约束的一段文本看起来不太好。因此，这将两个文档组件之间的格式分开。根据您使用的文档类，也可以将此作为常规标签设置要求的一部分。

该[`caption`软件包](http://ctan.org/pkg/caption)还提供`format=hang`了`justification=raggedright`似乎与您的要求重复的内容。但是，您必须使用边距才能充分获得您所追求的输出。

# asp.net - 如何在 SQL 中搜索关键字的快速表列？

> ID：12532089
> 
> 赞同：0
> 
> 时间：2012-09-21T14:02:04.843
> 
> 标签：asp.net, sql, c#-4.0, entity-framework-4

我有一个关于如何在 SQL 中搜索特定关键字的快速表列的问题。

我有 3 张桌子。

例子

```
Table 1 has Makes

MakeID MakeName

Table 2 has Models

ModelID MakeID ModelName

Table 3 has Cars and Relationship to Table 1 and Table 2

CarID MakeID ModelID 
```

这个想法是最终用户将关键字放在“本田”等搜索字段中。它应该返回表 3 中 MakeName 和 ModelName 包含单词 honda 的所有汽车。

```
What I do is I select from Table 3 and join on Table 1 and Table 2 Where clause MakeName or ModelName like '%' + keyword + '%', also tables have indexes. 
```

不确定这是否是最有效的方法。因为表 3 包含 300K 辆汽车，所以搜索所有表需要时间。

有没有办法加快搜索速度？任何改进搜索的想法都受到高度赞赏。也许将部分（仅搜索返回的数据）信息镜像到另一个表并查询它而不是主表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:15:36.160

**简单的方法：**

1.  确保你有索引
2.  分别在表 1 和表 2 上进行搜索，以有限数量的结果作为 ID
3.  查询表3为： `select * from Table3 where modelId in (list of id's) or makeId in (list of Id's)`

换句话说 - 避免连接

**进阶方式：** 设置全文索引

# mysql - 在另一列的下一个值上重新启动自动增量

> ID：12532094
> 
> 赞同：0
> 
> 时间：2012-09-21T14:02:16.903
> 
> 标签：mysql, sql, database

我想以这样的方式做到这一点：

> 主要 | 我想在新的主要值上重置的列
> 
> ```
> 1   | 100
> 1   | 101
> 1   | 102
> 1   | 103
> 1   | 104
> 2   | 100
> 2   | 101 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:18:02.747

您可以使用 MyIsam 引擎来实现这一点 -

```
CREATE TABLE table1(
  id1 INT(11) NOT NULL,
  id2 INT(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id1, id2)
);

INSERT INTO table1 VALUES (1, NULL);
INSERT INTO table1 VALUES (1, NULL);
INSERT INTO table1 VALUES (2, NULL);
INSERT INTO table1 VALUES (2, NULL);

SELECT * FROM table1;
+-----+-----+
| id1 | id2 |
+-----+-----+
|   1 |   1 |
|   1 |   2 |
|   2 |   1 |
|   2 |   2 |
+-----+-----+ 
```

# node.js - 如何在 node.js 中将 CP852 解码为 UTF-8？

> ID：12532097
> 
> 赞同：3
> 
> 时间：2012-09-21T14:02:22.987
> 
> 标签：node.js, utf-8, decode

有没有办法在节点或客户端网页中将文本从 CP852 转换为 UTF-8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:16:27.993

应该可以[`iconv`](https://npmjs.org/package/iconv)：

```
var iconv = require('iconv');
var cp852 = new iconv.Iconv('CP852', 'UTF-8');

// based on http://en.wikipedia.org/wiki/Code_page_852
// Ç (U+00C7), É (U+00C9), á (U+00E1), and ░ (U+2591)
var input = new Buffer([ 128, 144, 160, 176 ]);

console.log(cp852.convert(input)); 
```

或者您可以尝试[`iconv-lite`](https://npmjs.org/package/iconv-lite)：

```
var iconv = require('iconv-lite');

var input = new Buffer([ 128, 144, 160, 176 ]);

console.log(iconv.decode(input, 'cp852')); 
```

# c# - 与 Tibco spotfire 集成的系统

> ID：12532105
> 
> 赞同：3
> 
> 时间：2012-09-21T14:02:34.203
> 
> 标签：c#, asp.net, spotfire

我想开发一个与 Tibco Spotfire 集成的系统，并且能够检索 Spotfire 呈现的可视化并将它们公开以进行所见即所得的操作。这可能吗？如果有人请提供指导。我想使用 C# 和 ASP.NET

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T12:00:52.283

1.  首先加载用于处理客户端交互的 javascriptapi

    ```
    <script type="text/javascript" src="http://domainname/SpotfireWeb/GetJavaScriptApi.ashx?Version=3.1" > </script> 
    ```

2.  添加用于将 spotfire 模板添加到网页的代码 在您的项目中使用以下代码创建一个 javascript 文件：

    ```
    function addPlayer()
    {
        var fileInfo = new FileInformation(SpotfireVisualizationPath,SpotfireVisualizationName,SpotfireParameter, '');

        var customization = new spotfire.webPlayer.Customization();
        customization.showCustomizableHeader = false;
        customization.showToolBar = false;
        customization.showClose = false;
        customization.showTopHeader = false;

        if (app != null)
        {
            app.close();
        }

        app = new spotfire.webPlayer.Application(SpotfireWebPlayerURL, customization);
        app.open(fileInfo.path, 'SpotfireContainer', fileInfo.parameters);

    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:01:39.377

Spotfire Web Player（我假设您指的是）不是以这种方式构建的 - 在其当前实现中，它更像是桌面 Spotfire 应用程序的远程桌面会话（如果您将远程桌面技术替换为 html 和 javascript）。

它根本不是为了能够抓取 UI 的片段以便在其他上下文中重用。您可以做的最接近的做法是将整个网络播放器 UI 托管在 iframe 中，并使用[javascript API](http://stn.spotfire.com/stn/API.aspx?API=wpl%2fhtml%2fN_spotfire_webPlayer.htm)进行客户端交互。通过创建单一可视化页面并删除所有 chrome（工具栏等），您可以获得页面上看似单一可视化的内容，但这实际上只是一个 hack。

# clojure - 无法加载新的 clojure 库

> ID：12532111
> 
> 赞同：10
> 
> 时间：2012-09-21T14:02:50.113
> 
> 标签：clojure, classpath, require, leiningen

我在第二天尝试使用clojure，但我几乎什么都不懂。我正在使用 Programming Clojure 第二版。我被图书馆困住了。

我有 Leiningen 并且正在运行 REPL。本书首先告诉读者运行一个简单的

```
(require 'clojure.java.io) 
```

效果很好（我得到一个零）。然后它想通过运行另一个简单的文件来加载一个名为 Introduction.clj 的文件

```
(require 'examples.introduction) 
```

我在哪里收到错误消息

```
FileNotFoundException Could not locate clojure/java/introduction__init.class
or clojure/java/introduction.clj on classpath:   clojure.lang.RT.load (RT.java:432) 
```

我下载了 Introduction.clj 文件并查看了我应该把它放在哪里。该错误和书中说该命令将在我的类路径中搜索，但我不知道那是在哪里或是什么（在搜索和阅读 1 小时后我仍然不明白，抱歉）。我运行了一些命令，列出了许多类路径（其中没有一个包含 clojure/java/io.clj）。

所以我尝试了另一种方法 - 在我的磁盘上找到 io.clj 文件，然后简单地将文件复制到那里并使用命令运行它

```
(require 'clojure.java.introduction) 
```

这似乎也不起作用。顺便说一句，我找到的 io.clj 文件位于“C:\Program Files\clojure\src\clj\clojure\java”中。我尝试从 java 文件夹以及 clojure 文件夹中运行其他几个 .clj 文件，例如 javadoc.clj 或 inspector.clj ，并且似乎都可以使用上述命令正常工作。只有新文件似乎没有以这种方式加载。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:23:25.650

Clojure 在 Java 虚拟机上运行，​​因此您需要了解一些关于 PATH 和 CLASSPATH 概念的知识：

请参阅：[http ://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

关于错误消息，Clojure 运行时期望`introduction.clj`在目录中找到`clojure\java\example\introduction.clj`（而不是它真正应该在的位置 - 见下文）。

Clojure 命名空间的约定是最后一个组件是文件名，而任何前面的组件都是父目录。所以

```
clojure.java.introduction 
```

必须在目录中（相对于您的源“根”或类路径）

```
clojure\java\introduction.clj 
```

（lein REPL 会自动将您的源根目录添加到类路径中）。

您需要了解的另一个概念是源代码的“根”所在的位置。对于 Leiningen（您正在使用的构建工具），默认值为“src”或“src/main/clojure” - 如[GitHub 上的 Leiningen 示例项目文件](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)中所述）。

最后，如果你真的卡住了，这本书的完整项目似乎[可以在 GitHub 上找到](https://github.com/stuarthalloway/programming-clojure)。

查看项目，我发现您实际上应该将文件放在`src\examples\introduction.clj`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T14:10:32.587

你在读《Programming Clojure》这本书吗？

我遇到了同样的问题。禁止如下：

1.  如果用java启动clojure：我在windows下工作，clojure.jar放在D:\backup\clojure-1.5.1，《Programming Clojure》一书的源码放在D:\study\clojure \shcloj-代码\代码。您应该首先删除文件夹 D:\study\clojure\shcloj-code\code 中的 user.clj 文件。

java -cp d:\backup\clojure-1.5.1\clojure-1.5.1.jar;d:\study\clojure\shcloj-code\code clojure.main -r

如果您在 linux 中工作，请替换“;” 和 ”：”

1.  如果你通过 lein 启动 clojure 你应该先 cd 到 D:\study\clojure\shcloj-code\code 文件夹，然后

莱因雷普

您还应该删除文件夹 D:\study\clojure\shcloj-code\code 中的 user.clj 文件。

# php - 在php中获取当前域+目录

> ID：12532112
> 
> 赞同：5
> 
> 时间：2012-09-21T14:02:53.953
> 
> 标签：php, html

所以，我找到了一种方法来获取当前目录，`dirname(__FILE__)`并使用`$_SERVER['HTTP_HOST']`. 虽然这两个都很好，但它们并不是我所需要的。

例如，如果我有一个关于 的脚本`http://mydomain.com/scripts/myscript.php`，我想获得`http://mydomain.com/scripts/`. 我觉得应该有一个简单的方法来做到这一点，而且我不知何故忽略了一些东西。

顺便说一句，我目前在云共享托管环境中使用该脚本，因此目录结构有些奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:14:14.557

尝试：

```
<?php
     echo $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']); 
```

唯一的问题是 dirname 返回父目录，因此如果您直接访问[http://domain.com/scripts/](http://domain.com/scripts/)，您将只获得[http://domain.com/](http://domain.com/)而没有脚本。[http://domain.com/scripts/script.php](http://domain.com/scripts/script.php)虽然正确解析为[http://domain.com/scripts/ 。](http://domain.com/scripts/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:06:34.183

尝试：

```
<?php
    echo $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-08T12:08:54.983

```
function url_part(){
   $http=isset($_SERVER['HTTPS']) ? 'https://' : 'http://';

   $part=rtrim($_SERVER['SCRIPT_NAME'],basename($_SERVER['SCRIPT_NAME']));

   $domain=$_SERVER['SERVER_NAME'];

    return "$http"."$domain"."$part";

}

echo url_part;//htts://www.example.net/test 
```

# mysql - 按 X 分组并计算同一列中的 NULLS

> ID：12532114
> 
> 赞同：0
> 
> 时间：2012-09-21T14:02:59.887
> 
> 标签：mysql

这是我的查询：

```
SELECT 
    CONCAT( YEAR( prm.fromdt ) , '|', MONTH( prm.fromdt ) ) AS k, 
    CONCAT( YEAR( prm.fromdt ) , ' - ', MONTH( prm.fromdt ) ) AS v,
FROM prm
GROUP BY k
ORDER BY `k` DESC 
```

返回：

```
K       V
2009|7  2009 - 7
2009|6  2009 - 6
NULL    NULL 
```

有没有办法`NULL NULL`让我有多少空值？就像是

```
K       V
2009|7  2009 - 7
2009|6  2009 - 6
Nulls   6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:17:05.793

你可以这样做：

```
SELECT CONCAT( YEAR( prm.fromdt ) , '|', MONTH( prm.fromdt ) ) AS k, 
       coalesce(CONCAT( YEAR( prm.fromdt ) , ' - ', MONTH( prm.fromdt ) ), cast(count(*) as varchar(255)) AS v   
FROM prm
GROUP BY k
ORDER BY `k` DESC 
```

我不喜欢在一列中混合不同类型的数据。但是，这可能会满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:06:23.247

添加一个`COUNT()`

```
SELECT 
    CONCAT( YEAR( prm.fromdt ) , '|', MONTH( prm.fromdt ) ) AS k, 
    CONCAT( YEAR( prm.fromdt ) , ' - ', MONTH( prm.fromdt ) ) AS v,
    COUNT(*) AS c
FROM prm
GROUP BY k
ORDER BY `k` DESC 
```

哪个应该返回

```
k              v             c
2009|7  2009 - 7    {count of this group}
2009|6  2009 - 6    {count of this group}
NULL    NULL         6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:11:55.910

基于 xdazz 的答案：

```
select k, case when v is null then c else v end as v
from
(
SELECT 
    CONCAT( YEAR( prm.fromdt ) , '|', MONTH( prm.fromdt ) ) AS k, 
    CONCAT( YEAR( prm.fromdt ) , ' - ', MONTH( prm.fromdt ) ) AS v,
    COUNT(*) AS c
FROM prm
GROUP BY k
) x
ORDER BY `k` DESC 
```

但正如 dazz 指出的那样，您正在混合列类型。您可以轻松地将计数转换为字符串值，但这并不能解决消费者在 column 中隐式获取混合数据类型的事实`v`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:06:42.990

基本的 SQL 是：

```
COUNT(somefield) WHERE prm.fromdt IS NULL 
```

但是如何实际使用它取决于您到底在做什么。听起来您想要的与您对日期所做的不同。如果将两者混为一谈，很可能会很乱。

# python - 在 Python 中重新投影卫星图像

> ID：12532115
> 
> 赞同：0
> 
> 时间：2012-09-21T14:03:01.910
> 
> 标签：python, image, gdal, coordinate

我正在寻找 Python 中的命令来重新投影图像。我知道它可以在 Windows 的命令行中使用 GDAWARP 完成，并且可以使用 os 模块从 Python 中调用，但我想知道是否有一个本机 python 命令。

谢谢你，法尔津

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:15:59.237

您可以使用[Python Imaging Library](http://www.pythonware.com/products/pil/)进行[任意仿射变换](http://www.pythonware.com/library/pil/handbook/image.htm#Image.transform)。据我所知，没有用于图像处理的核心 Python 模块。如果您已经习惯使用`GDALWARP`我会坚持下去，就个人而言。

# ajax - 如何在 Primefaces 中生成页面的静态快照？

> ID：12532117
> 
> 赞同：1
> 
> 时间：2012-09-21T14:03:05.167
> 
> 标签：ajax, primefaces

我有一个以 Primefaces 作为前端的网站。因此，我想为我的所有页面制作静态 HTML 快照，因为据我所知，Google 无法解释基于 AJAX 的网站。是否有任何现成的工作流程用于此目的？

# javascript - 无法访问 HTML5 事件流 (Node.js)

> ID：12532120
> 
> 赞同：1
> 
> 时间：2012-09-21T14:03:18.390
> 
> 标签：javascript, html, node.js, event-stream

好的，这就去。我制作了一个使用 Node.js 和 HTML5 Event-Streams 的简单聊天服务器，但由于某种原因，Event-Stream 无法工作，客户端页面在 textarea 中不显示任何应该保存来自 Event-Stream 的消息的内容. 我无法确定原因，我想知道是否有人可以帮助解决这个问题。

下面是我的 Javascript 文件：

请注意，另一个服务器文件采用传递给 /chat 的任何参数并将其作为 params 变量传递。例如：

> /chat?room=testroom&nick=用户名&message=message1

将被解析为：

> var params = { room : "testroom", nick : "username", message : "message1" };

* * *

聊天.js

```
var debug = require("./debug");

exports.rooms = { };

exports.chat = function(params, response)
{
    var rooms = this.rooms;
    if (params.room !== undefined)
    {
        if (rooms[params.room] === undefined)
        {   // create room
            debug.log("Creating room: " + params.room);
            rooms[params.room] = { };
            rooms[params.room].response = response;
            rooms[params.room].response.id = (new Date()).toLocaleTimeString();
            rooms[params.room].stack = { };
            rooms[params.room].stack.id = "[ROOM]";
            rooms[params.room].stack.message = "Welcome to " + params.room + "!";
            rooms[params.room].stackcount = 0;
            rooms[params.room].stream = function ()
            {
                    rooms[params.room].response.write("data: " + this.stack.id + ":" + this.stack.message + "\n\n");
                    debug.debug("[id|" + rooms[params.room].response.id + "]" + this.stack.id + ":" + this.stack.message);
            };
            debug.debug("Room created, sending: " + rooms[params.room].stack.id + ":" + rooms[params.room].stack.message);
            rooms[params.room].stream();
        }
        else
        {   // get room messages --or-- add message
            if (params.length == 1)
            {
                rooms[params.room].stream();
            }
            else
            {
                if (params.nick !== undefined && params.message !== undefined)
                {
                    //this.stackcount++;
                    rooms[params.room].stack.id = (new Date()).toLocaleTimeString();
                    rooms[params.room].stack.message = params.nick + ": " + params.message;
                    rooms[params.room].stream();
                }
            }
        }
    }
    else
    {
        var ret = "";
        ret = ret + '<html><head><script type="text/javascript">\
        function sendmsg()\
        {\
            var tmp = document.createElement("img");\
            tmp.src = "/chat?room=testroom&nick=" + document.getElementById("nick").value + "&message=" + document.getElementById("message").value;\
            return false;\
        }\
        </script>\
        </head><body>\
        <script>\
            var source = new EventSource("/chat?room=testroom");\
            source.onmessage = function(e)\
            {\
                document.getElementById("chatspace").innerHTML += e.data + "\\n";\
            };\
        </script>\
        <form action="javascript:sendmsg();" >\
            <input name=room type=hidden value="testroom"></input>\
            <input id=nick name=nick type=text placeholder="Your name" autocomplete=off><br />\
            <textarea id=chatspace rows=10 readonly></textarea><br />\
            <input id=message name=message type=text placeholder="Message" autocomplete=off><br />\
            <input type=submit value="Send"></input>\
        </form>\
        </body></html>';
        response.writeHead(200, {"Content-Type": "text/html"});
        response.write(ret);
        response.end();
    }
}; 
```

* * *

这是控制台输出：

```
[FATAL] Server up: 2012/8/21 @ 9:54:15
  [LOG] Request: /chat
  [LOG] Request: /chat?room=testroom
  [LOG] Creating room: testroom
[DEBUG] Room created, sending: [ROOM]:Welcome to testroom!
[DEBUG] [id|09:54:24][ROOM]:Welcome to testroom!
  [LOG] Request: /favicon.ico
  [LOG] Request: /chat?room=testroom&nick=username&message=message1
[DEBUG] [id|09:54:24]09:54:34:username: message1
  [LOG] Request: /chat?room=testroom&nick=username&message=message2
[DEBUG] [id|09:54:24]09:54:37:username: message2
  [LOG] Request: /chat?room=testroom&nick=username&message=message3
[DEBUG] [id|09:54:24]09:54:38:username: message3 
```

# file - 通过控制台应用程序 asp.net 上传文件

> ID：12532121
> 
> 赞同：2
> 
> 时间：2012-09-21T14:03:30.613
> 
> 标签：file, upload, web, console, httpwebrequest

我已经搜索了如何使用控制台应用程序将文件上传到网站，我找到了一些方法，似乎是正确的方法，但我没有成功。所以我需要一些帮助！

首先，我建立的解决方案如下：

```
class Program
{
    static void Main(string[] args)
    {
        //Program.Test1();
        Program.Test3();
        Console.ReadLine();
    }

    public static void Test3()
    {
        //Set this to dont get an Invalid Request Exception
        System.Net.ServicePointManager.Expect100Continue = false;

        //Set a real page for this test
        string url = "http://www.toledorocket.com/perftest/uploadtest/fileselect.asp";
        string[] files = { "C:\\Documents and Settings\\wkurten\\Desktop\\fogao.txt" }; //Put some real file
        NameValueCollection nvc = new NameValueCollection();
        nvc.Add("FILE1", "fogao.txt");

        string boundary = "----------------------------" +
        DateTime.Now.Ticks.ToString("x");

        HttpWebRequest httpWebRequest2 = (HttpWebRequest)WebRequest.Create(url);
        httpWebRequest2.ContentType = "multipart/form-data; boundary=" +
        boundary;
        httpWebRequest2.Method = "POST";
        httpWebRequest2.KeepAlive = true;
        httpWebRequest2.Credentials =
        System.Net.CredentialCache.DefaultCredentials;

        //Is you have an connection with proxy, uncomment and set the values bellow:
        /*NetworkCredential localNetworkCredential = new NetworkCredential("user", "pass", "domain");
        httpWebRequest2.Proxy = new WebProxy("server:port", false);
        httpWebRequest2.Proxy.Credentials = localNetworkCredential;*/

        Stream memStream = new System.IO.MemoryStream();

        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" +
        boundary + "\r\n");

        string formdataTemplate = "\r\n--" + boundary +
        "\r\nContent-Disposition: form-data; name=\"{0}\";\r\n\r\n{1}";

        foreach (string key in nvc.Keys)
        {
            string formitem = string.Format(formdataTemplate, key, nvc[key]);
            byte[] formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
            memStream.Write(formitembytes, 0, formitembytes.Length);
        }

        memStream.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\n Content-Type: application/octet-stream\r\n\r\n";

        for (int i = 0; i < files.Length; i++)
        {
            string header = string.Format(headerTemplate, "file" + i, files[i]);
            //string header = string.Format(headerTemplate, "uplTheFile", files[i]);

            byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);

            memStream.Write(headerbytes, 0, headerbytes.Length);

            FileStream fileStream = new FileStream(files[i], FileMode.Open,
            FileAccess.Read);
            byte[] buffer = new byte[1024];

            int bytesRead = 0;

            while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                memStream.Write(buffer, 0, bytesRead);

            }

            memStream.Write(boundarybytes, 0, boundarybytes.Length);

            fileStream.Close();
        }

        httpWebRequest2.ContentLength = memStream.Length;

        Stream requestStream = httpWebRequest2.GetRequestStream();

        memStream.Position = 0;
        byte[] tempBuffer = new byte[memStream.Length];
        memStream.Read(tempBuffer, 0, tempBuffer.Length);
        memStream.Close();
        requestStream.Write(tempBuffer, 0, tempBuffer.Length);
        requestStream.Close();

        //Gets the response
        WebResponse webResponse2 = httpWebRequest2.GetResponse();

        Stream stream2 = webResponse2.GetResponseStream();
        StreamReader reader2 = new StreamReader(stream2);

        //Retrieve the html from response
        string htmlResponse = reader2.ReadToEnd();

        webResponse2.Close();
        httpWebRequest2 = null;
        webResponse2 = null;
    }

} 
```

我在使用此解决方案时遇到的问题是，当我上传文件并检索 WebResponse 时，我得到的页面是带有上传表单的页面，而不是上传后出现的页面，该页面成功信息。

在我尝试上传文件的页面上，我有这个 html/form：

```
<FORM METHOD="POST" ENCTYPE="multipart/form-data" ACTION="uploadstatus.asp">
  <INPUT TYPE="FILE" SIZE="40" NAME="FILE1"> <INPUT TYPE=SUBMIT VALUE="Upload!">
</FORM> 
```

当我运行我的代码时，我每次都会得到相同的表单，好像我从来没有发布任何东西......有人知道发生了什么吗？

# asp.net - 保存 ASP ListView 中包含的 CheckBox 的选中状态

> ID：12532124
> 
> 赞同：0
> 
> 时间：2012-09-21T14:03:42.890
> 
> 标签：asp.net, vb.net, listview, checkbox, addhandler

我知道关于这个问题有类似的问题（例如，[here](https://stackoverflow.com/questions/3946285/event-handler-not-firing-using-addhandler)和[here](https://stackoverflow.com/questions/463398/assign-an-event-to-a-custom-control-inside-a-repeater-control/463582#463582)），但没有人对我的问题有帮助。

我有一个 ListView 控件，显示在数据库中注册的所有用户，如果用户被批准，每个用户都会显示一个 CheckBox，我想在 CheckBox 的 Checked 属性更改时直接保存更改。

我知道在 ListView_ItemDataBound 上添加事件处理程序是不正确的，因为在 CheckBox 的 AutoPostback 之后没有新的绑定，因此事件处理程序会丢失。另一方面，我不能直接在 ASPX 文件上附加该方法，因为这样我就无法知道哪个用户受到更改的影响（至少，我认为我不能）。

有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:08:24.990

你有几个选择。

该`ListView.ItemCommand`事件可能会触发。不过，我不确定，因为文档只指定了按钮。你可能想尝试一下。

另一种选择是利用该`ListView.ItemCreated`命令。我相信这总是运行，无论 ListView 是否绑定，因为始终必须创建项目，即使它来自 ViewState。您在该事件的事件处理程序中要做的是将事件处理程序附加到`CheckBox Click`or`CheckChanged`事件（我忘记了 CheckBox 状态更改事件的服务器端名称是什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:12:49.140

所以我遇到了同样的问题。我很好奇，在您的页面加载时，您是否检查它是否是回发？

```
if(!Post.IsPostBack){
//normal page load
} 
```

如果您没有该检查，它将调用您的页面加载逻辑，在我的情况下，它每次都使用我的数据对象重置复选框。

# asp.net-mvc-3 - 在 Asp.net WebApi 中使用 AD 组的 Windows 身份验证不起作用

> ID：12532125
> 
> 赞同：1
> 
> 时间：2012-09-21T14:03:51.143
> 
> 标签：asp.net-mvc-3, asp.net-web-api, windows-authentication

我使用 Asp.net WebAPI 开发了一个 Restful webservice，并在 web.config 文件中使用了 windows 身份验证。此 WebService 由内部网络中的内部 windows 应用程序调用。现在的问题是，当我将请求从 IE 浏览器发送到 webService 时，它​​的身份验证和授权工作正常。但是当我通过寡妇应用程序发送请求时，用户没有经过身份验证。场景：当我使用以下配置时，来自网络浏览器的请求已正确验证，但来自 Windows 应用程序的请求未经过验证，即使用户位于具有正确角色的正确 AD 组中。

```
 <authentication mode="Windows"/>
    <authorization>
       <allow roles = "someGroup1"/>
       <allow roles = "Somegroup2"/>
       <deny users="*" />
    </authorization> 
```

可能是什么问题，请提供任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:01:19.357

我发现了问题，Windows 客户端没有将用户信息发送到 Web 主机，因此身份验证和授权失败。由于我使用的是 NTML 身份验证，因此要解决此问题，我必须向 restClient 添加一个身份验证器，如下所示：

```
var client = new RestClient();
     client.BaseUrl = ServiceUrl;
     client.RemoveHandler("application/json");
     client.RemoveHandler("text/json");
     **client.Authenticator = new NtlmAuthenticator();** 
```

# apache - .htaccess 或 cPanel 重定向。将文件夹中的页面名重定向到子域/页面名（所有文件夹内容）

> ID：12532128
> 
> 赞同：0
> 
> 时间：2012-09-21T14:04:06.930
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, cpanel

我正在尝试为我的网站设置重定向。我有三个我使用的**子域**

1) (www.)mysite.com

2) sub.mysite.com

3) anothersub.mysite.com

我最初没有使用子域，并且我的所有页面都采用了一种`www.mysite.com/*.php`格式。

我正在尝试添加重定向以使`/myfolder/`文件夹下的所有页面都重定向到`sub.mysite.Com/`（NB sub 在我的网站上与 myfolder 文件夹的名称相同）

我曾尝试通过 cPanel 设置重定向，但所有组合在我尝试时都会导致 404 错误。我还尝试了各种`.htaccess`导致许多 404 错误的方法。

我在 cPanel 中添加了一个简单的重定向并获得以下信息

例如

```
www.mysite.com/myfolder/myfolder_mypagename.php 
```

应该重定向到

```
sub.mysite.Com/myfolder_mypagename.php 
```

但相反，它重定向到

`sub.mysite.com/_mypagename.php`（错过了页面名称的“myfolder”部分）

你能帮我做这件事吗？这让我发疯，我的托管公司说这是不可能的（我很难相信！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:15:51.513

这个答案是假设您面临的问题是，当通过 cpanel 创建子域并将其指向所需的目录时，某些部分的 url 会被条带化。

通过 cpanel 创建您的子域，并使其指向根目录（就像 www.mysite.com 一样），然后在您的 htaccess 中使用它：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$
RewriteRule ^myfolder/(.*)$ http://sub.mysite.com/$1 [L,QSA,R=301]

RewriteCond %{HTTP_HOST} ^sub\.mysite\.com$
RewriteRule ^(.*)$ myfolder/$1 [L,QSA] 
```

# .net - 有什么方法可以提高 Automapper 的性能？

> ID：12532129
> 
> 赞同：5
> 
> 时间：2012-09-21T14:04:07.930
> 
> 标签：.net, asp.net-mvc, performance, mapping, automapper

我是 AutoMapper 的忠实粉丝。我现在在许多项目中使用它来映射不同域之间的实体，例如从 wcf 服务模型到业务模型。

在一个示例网站中进行了一些负载测试（使用 VS Profiler）后，我发现 AutoMapper 是导致 CPU 消耗高的原因。

我为这种行为做了一些单元：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

namespace AutoMapper.Tests
{
    [TestClass]
    public class UnitTest
    {
        public class ClassSource
        {
            public string PropertyA { get; set; }
            public int PropertyB { get; set; }
            public NestedClassSource PropertyC { get; set; }
        }

        public class NestedClassSource
        {
            public string PropertyD { get; set; }
            public DateTime PropertyE { get; set; }
            public List<int> PropertyF { get; set; }
        }

        public class ClassDestination
        {
            public string PropertyA { get; set; }
            public int PropertyB { get; set; }
            public NestedClassDestination PropertyC { get; set; }
        }

        public class NestedClassDestination
        {
            public string PropertyD { get; set; }
            public DateTime PropertyE { get; set; }
            public List<int> PropertyF { get; set; }
        }

        [TestMethod]
        public void MappingPerfTests()
        {
            Mapper.Initialize(a =>
            {
                a.CreateMap<ClassSource, ClassDestination>();
                a.CreateMap<NestedClassSource, NestedClassDestination>();

            });
            Mapper.AssertConfigurationIsValid();

            IList<ClassSource> items = GenerateRandomSources(nbItems: 500);

            //automapper
            MicroBench(() =>
            {
                var res = Mapper.Map<IList<ClassSource>, IList<ClassDestination>>(items);
            }, nbIterations: 10);
            // will take nearly 30 ms per test
            // total : 300 ms

            //manual mapper
            MicroBench(() =>
            {
                var res = new List<ClassDestination>(items.Count);
                foreach (var source in items)
                {
                    res.Add(new ClassDestination()
                    {
                        PropertyA = source.PropertyA,
                        PropertyB = source.PropertyB,
                        PropertyC = new NestedClassDestination()
                        {
                            PropertyD = source.PropertyC.PropertyD,
                            PropertyE = source.PropertyC.PropertyE,
                            PropertyF = new List<int>(source.PropertyC.PropertyF)
                        }

                    });
                }
            }, nbIterations: 10);
            // will take nearly 0 ms per test
            // total : 1 ms

        }

        private IList<ClassSource> GenerateRandomSources(int nbItems = 1000)
        {
            IList<ClassSource> res = new List<ClassSource>(100);
            foreach (var i in Enumerable.Range(1, nbItems))
            {
                ClassSource item = new ClassSource()
                {
                    PropertyA = "PropertyA",
                    PropertyB = i,
                    PropertyC = new NestedClassSource() { PropertyD = "PropertyD", PropertyE = DateTime.Now, PropertyF = Enumerable.Range(1, 10).ToList() }
                };
                res.Add(item);
            }
            return res;
        }

        private void MicroBench(Action action, int nbIterations = 1000)
        {
            long totalElapsed = 0L;

            foreach (var i in Enumerable.Range(1, nbIterations))
            {
                Stopwatch watcher = Stopwatch.StartNew();

                action();

                watcher.Stop();
                Console.WriteLine("test : {0} ms", watcher.ElapsedMilliseconds);
                totalElapsed += watcher.ElapsedMilliseconds;
            }

            Console.WriteLine("total : {0} ms", totalElapsed);
            Console.WriteLine("avg : {0} ms", totalElapsed / nbIterations);

        }
    }
} 
```

最后，AutoMapper 似乎很慢：平均每次测试需要 30 毫秒，而手动映射需要不到 1 毫秒。我“仅”映射 500 个“简单”对象！也许对于 MVC ViewModel，这种情况很少发生，但其他映射它可能会很频繁。

30 毫秒似乎很快，但真正的麻烦是这 30 毫秒（白费）是**Web 服务器上的 CPU 时间 服务器**如何处理重负载（100 个并发用户）？事实上不好，这就是我们的负载测试引发警告的原因。

我创建了一种使用 Mapper.CreateMapExpression 生成 linq 表达式的方法，但不幸的是，该表达式不包含嵌套类型或选项。

那么，有没有什么办法可以提高 AutoMapper 的性能呢？有最佳实践吗？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T14:47:42.713

查看本文以了解有关 AutoMapper、其替代品以及性能指标的一些见解。我认为它会给你更全面的观点，你不会那么关心性能。

[哪个更快：AutoMapper、Valuinjector 或手动映射？每个速度快到什么程度？](https://stackoverflow.com/questions/8122334/which-is-faster-automapper-valuinjector-or-manual-mapping-to-what-degree-is)

我的意见将是相似的 - 您的问题没有正确答案（您在帖子中并没有真正提出问题:)）。您在 CPU 时间与人工时间（维护）之间取得平衡，您无法将两者进行比较。但是这个恕我直言应该是决定性因素，但显然取决于您采取什么方法。

**编辑**

试试看这里，看看你是否找到了一些与你的情况相关的线索：[需要加速自动映射器……做 113 个对象需要 32 秒](https://stackoverflow.com/questions/5208550/need-to-speed-up-automapper-it-takes-32-seconds-to-do-113-objects)

还有另一个链接（虽然从 2009 年开始），但可能仍然相关...... [分析 AutoMapper 性能](http://lostechies.com/jimmybogard/2009/08/05/analyzing-automapper-performance/)

谢谢，希望这会有所帮助。

# jquery - jquery validate，需要基于下拉值的字段

> ID：12532132
> 
> 赞同：1
> 
> 时间：2012-09-21T14:04:14.037
> 
> 标签：jquery, validation

我有一个下拉列表，其中列出了用户可以生成的报告类型，一旦他们选择了报告类型，它将显示另一个下拉列表，如此屏幕截图所示。![在此处输入图像描述](../Images/94805625bdebb9e17ecd6dcfd1af940a.png)

```
<select name="type_of_report" id="type_of_report">
<option value="" selected="selected"></option>
<option value="all_students">All students</option>
<option value="state">State</option>
<option value="sport_id">Sport</option>
<option value="major_id">Interest of Study</option>
<option value="graduation_year">High School Graduation Year</option>
<option value="recruitment_place_id">Where they heard about us</option>
</select> 
```

如果他们选择状态，我想要求状态字段。

理论上，这是我想做的：

```
$("#type_of_report").live("change", function() {
 var report_selected = $("#type_of_report").val();
});

$("form").validate({
 rules: {

  if(report_selected != '') {
    report_selected: { required: true },
  }

  type_of_report: { required: true }
 }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:45:28.137

我最近做了一个非常复杂的动态表单，其中包含用户可以添加的许多字段。这些是新创建的输入元素，而不是隐藏的。我只是在创建新字段`required`时使用 jQuery将类添加`addClass`到新字段中。

```
$("#myNewInput").addClass("required"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:10:04.203

像这样的东西？

```
$("form").submit(function() {
 var report_selected = $("#type_of_report").val();
 if(report_selected != '' && $('#other_select').val() == '') {
    alert('selected a report, but not the 2nd one');
    return false;
 }
 return true;
}); 
```

# http-post - 使用 HttpClient.PostAsJsonAsync 发布标量数据类型

> ID：12532133
> 
> 赞同：1
> 
> 时间：2012-09-21T14:04:18.587
> 
> 标签：http-post, using, dotnet-httpclient

我正在使用 HttpClient 调用 ASP .Net Web API 并成功调用操作。我也可以将自定义对象发布到行动中。

现在我面临的问题是，无法发布标量数据类型，如整数、字符串等......

下面是我的控制器和调用动作的应用程序代码

// 测试调用的应用程序

```
[Test]
        public void RemoveCategory()
        {
            HttpClient client = new HttpClient();

            HttpRequestMessage request = new HttpRequestMessage();

            HttpResponseMessage response = client.PostAsJsonAsync<string>("http://localhost:49931/api/Supplier/RemoveCategory/", "9").Result;

            Console.WriteLine(response.Content.ReadAsStringAsync().Result);
        } 
```

// Web API 中的控制器和动作

```
public class SupplierController : ApiController
   {
    NorthwindEntities context = new NorthwindEntities();

    [HttpPost]
    public HttpResponseMessage RemoveCategory(string CategoryID)
    {
    try
    {
    int CatId= Convert.ToInt32(CategoryID);
    var category = context.Categories.Where(c => c.CategoryID == CatId).FirstOrDefault();
    if (category != null)
    {
    context.Categories.DeleteObject(category);
    context.SaveChanges();
    return Request.CreateResponse(HttpStatusCode.OK, "Delete successfully CategoryID = "     +     CategoryID);
    }
    else
    {
    return Request.CreateResponse(HttpStatusCode.InternalServerError, "Invalid     CategoryID");
    }
    }
    catch (Exception _Exception)
    {
    return Request.CreateResponse(HttpStatusCode.InternalServerError, _Exception.Message);
    }
    } 
```

当我在 Northwind 数据库中发布代表“类别”表的客户对象时，所有事情都正常工作，但我无法发布像整数和字符串这样的标量数据

当我发布字符串数据类型时，出现以下异常

> **{"Message":"没有找到与请求 URI ' [http://localhost:49931/api/Supplier/RemoveCategory/](http://localhost:49931/api/Supplier/RemoveCategory/) '匹配的 HTTP 资源。","MessageDetail":"在控制器 'Supplier' 上没有找到任何操作匹配请求。"}**

谁能指导我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T04:43:32.380

您必须将 CategoryID 参数标记为 [FromBody]：

```
[HttpPost]
public HttpResponseMessage RemoveCategory([FromBody] string CategoryID)
{ ... } 
```

默认情况下，简单类型（如字符串）将从 URI 绑定到模型。

# c# - 如何从 IEnumerable 获取元数据 in ASP .NET MVC? I have custom html helper which getting IEnumerable model from view and generates html table with headers and body please advice how can get matadata from this model thanks 问问题 问问题 2012-09-21T14:04:39.990 1418 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have custom html helper which getting IEnumerable model from view and generates html table with headers and body please advice how can get matadata from this model thanks To get properties: YourModel.GetType().GetProperties(); To get the name of a property: property.Name; To get the value of a property: var result = YourModel.GetType().InvokeMember("NameOfProperty", BindingFlags.GetProperty, null, YourModel, null); Some more well developed examples can be found in this file on GitHub: https://github.com/jamestharpe/Rolcore/blob/master/src/Rolcore/Reflection/ObjectExtensions.cs c#asp.netasp.net-mvcmetadatahtml-helper 4 2 回答 2 This answer is useful 1 If I'm understanding what you are trying to do correctly the below should work with minimal reflection: public static MvcHtmlString MakeTable<tmodel, tvalue="">(this HtmlHelper <tmodel>html, IEnumerable <tvalue>table) { var modelMetaData = ModelMetadataProviders.Current.GetMetadataForType(null, typeof(TValue)); foreach (TValue row in table) { //write out table } } 于 2012-09-21T14:21:34.273 回答 This answer is useful -1 获取属性： YourModel.GetType().GetProperties(); 要获取属性的名称： property.Name; 要获取属性的值： var result = YourModel.GetType().InvokeMember("NameOfProperty", BindingFlags.GetProperty, null, YourModel, null); 可以在 GitHub 上的此文件中找到一些更完善的示例：https ://github.com/jamestharpe/Rolcore/blob/master/src/Rolcore/Reflection/ObjectExtensions.cs 于 2012-09-21T14:14:14.807 回答 Related 3 sql - 多个表的sql连接查询 1 css - 如何在 Firefox 中创建带有可选溢出的 div 1 java-server - 从本地机器到服务器的 Java 应用程序 2 javascript - 使用立体主义的历史数据 2 javascript - nodejs中的异步和递归 2 css - IE8 在 responsive.css 处于活动状态时冻结 // 某些类在 FF chrome 中不再工作 2 c# - 检查列表中是否存在以下项目 1 c# - 为什么“签署 ClickOnce 清单”复选框一直默认为在构建时选中？ 5 java - 带有简单 UPDATE 查询的“不支持 DML 操作” 1 c++ - QT 有这样的过滤器生成器吗 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</tvalue></tmodel></tmodel,>

> ID：12532137
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, asp.net, asp.net-mvc, metadata, html-helper

I have custom html helper which getting IEnumerable model from view and generates html table with headers and body

please advice how can get matadata from this model

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:21:34.273

If I'm understanding what you are trying to do correctly the below should work with minimal reflection:

```
public static MvcHtmlString MakeTable<TModel, TValue>(this HtmlHelper<TModel> html, IEnumerable<TValue> table)
{
    var modelMetaData = ModelMetadataProviders.Current.GetMetadataForType(null, typeof(TValue));

    foreach (TValue row in table)
    {
        //write out table
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T14:14:14.807

获取属性：

```
YourModel.GetType().GetProperties(); 
```

要获取属性的名称：

```
property.Name; 
```

要获取属性的值：

```
var result = YourModel.GetType().InvokeMember("NameOfProperty", BindingFlags.GetProperty, null, YourModel, null); 
```

可以在 GitHub 上的此文件中找到一些更完善的示例：[https ://github.com/jamestharpe/Rolcore/blob/master/src/Rolcore/Reflection/ObjectExtensions.cs](https://github.com/jamestharpe/Rolcore/blob/master/src/Rolcore/Reflection/ObjectExtensions.cs)

# java - 使用 Spring 在 OSGi 中创建具有范围原型的对象的不同实例

> ID：12532150
> 
> 赞同：0
> 
> 时间：2012-09-21T14:06:16.237
> 
> 标签：java, spring, jetty, osgi, apache-karaf

这是一个复杂的问题，所以我会尽可能清楚地解释它。我有三个`OSGi`捆绑包`A`,`B`部署`C`到`Apache Karaf`. 我还有一个安全捆绑包，这些`A`捆绑包使用它`B`。`C`

每个`A`,`B`和`C`bundles 都包含以下内容：

```
<osgi:reference id="basicAuthHandlerFactory" interface="com.groupgti.security.handler.basicauth.BasicAuthHandlerFactory"/>

<bean id="securityHandler" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="basicAuthHandlerFactory"/>
    <property name="targetMethod" value="createSecurityHandler"/>
    <property name="arguments">
        <list>
            <value type="java.lang.String">A.realm</value> <!-- The realm is depending on a bundle, A.realm, B.realm, C.realm -->
        </list>
    </property>
</bean> 
```

`Spring`从安全包中获取安全处理程序的代码片段。安全包中的此处理程序作为`OSGi`服务公开并在安全包中创建，如下所示：

```
<bean id="securityHandler" class="org.eclipse.jetty.security.ConstraintSecurityHandler" scope="prototype">
    <property name="authenticator">
        <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/>
    </property>
    <property name="constraintMappings">
        <list>
            <ref bean="constraintMapping"/>
        </list>
    </property>
    <property name="strict" value="false"/>
    <property name="identityService" ref="identityService"/>
</bean>

<bean id="basicAuthSecurityHandler" class="com.groupgti.security.handler.basicauth.BasicAuthFactoryHandlerImpl"/>
<osgi:service ref="basicAuthSecurityHandler" interface="com.groupgti.security.handler.basicauth.BasicAuthHandlerFactory"/> 
```

`BasicAuthFactoryHandlerImpl#createSecurityHandler(String realm)`用于为每个捆绑包创建不同的安全处理程序实例。如上面的代码所示，当`createSecurityHandler`方法被调用时，领域由包传递。`Spring` `MethodInvokingFactoryBean`

`securityHandler` `Spring`bean 有一个原型，在这种`scope`情况下，每次调用该方法时，都会`getBean`返回一个新创建的对象。

我为安全处理程序设置的领域是这样的：

```
public class BasicAuthFactoryHandlerImpl implements BeanFactoryAware, BasicAuthHandlerFactory {

    private static final Logger LOGGER = LoggerFactory.getLogger(BasicAuthFactoryHandlerImpl.class);

    private BeanFactory factory;

    @Override
    public ConstraintSecurityHandler createSecurityHandler(String realm) {
        ConstraintSecurityHandler handler = (ConstraintSecurityHandler) factory.getBean("securityHandler");
        handler.setUserRealm(realm);
        LOGGER.debug("Security handler created. Got realm: {}", realm);
        return handler;
    }

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        this.factory = beanFactory;
    }
} 
```

创建每个捆绑包的处理程序，一切都很好。但问题是所有捆绑包的领域在某种程度上与从第一个启动捆绑包传递的领域相同。我确信我`Spring`在不同捆绑包中的每个配置中传递了不同的领域，但领域总是来自第一个启动的捆绑包并且它无法正常工作。

有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:15:02.807

问题是您从 beanFactory 获得了单个“securityHandler”。所以只有一个共享实例。在 createSecurityHandler 中，您应该创建一个新对象并返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:21:14.670

我能够弄清楚为什么同一个实例在应用程序之间共享的问题。我所有的 bundle和`A`，都使用了这个：`B``C`

```
<httpj:engine-factory bus="cxf">
    <httpj:engine port="8020">
        <httpj:threadingParameters minThreads="5" maxThreads="15"/>
        <httpj:handlers>
            <ref bean="securityHandler"/>
            <ref bean="ipFilteringHandler"/>
        </httpj:handlers>
        <httpj:sessionSupport>true</httpj:sessionSupport>
    </httpj:engine>
</httpj:engine-factory> 
```

创建安全处理程序并为所有这些处理程序`Jetty`使用相同的端口`8020`。而且它无法处理同一端口上的不同处理程序。如果我将端口更改为完全不同，则一切正常。但这不是我的解决方案。解决方案是让所有捆绑软件都使用一个领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:38:56.773

AFAIR 这里的问题更多地是spring进行代理的方式。因为代理是针对服务参考而不是服务完成的。您可能需要正确配置它以使用正确的代理。

我认为以下内容可能会有所帮助：

```
ServiceReference nativeReference = ((ServiceReferenceProxy)serviceReference).getTargetServiceReference() 
```

# c# - windows8开发中是否有MasterPage

> ID：12532155
> 
> 赞同：1
> 
> 时间：2012-09-21T14:06:35.063
> 
> 标签：c#, windows-8, microsoft-metro

我在win8应用中有一些页面，大部分都有类似的布局，我`Frame.Navigate`用来切换页面。只是想知道`MasterPage`在 asp.net webform/mvc 中是否有类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:14:30.693

只需使用您想要的布局创建一个页面，然后使用模板为特定视图自定义它。您可以拥有一个主视图 .xaml 文件，然后为您使用它的每种不同方式创建一个资源字典文件（用于分隔目的）。

编辑：我发现有人为 wpf 制作了“母版页”。见[这里](http://www.software-architects.com/TechnicalArticles/WPFMasterPages/tabid/80/Default.aspx)。你可以为地铁做类似的事情。

# c# - 如何将 Windows 窗体转换为 PDF，包括文本框的值

> ID：12532156
> 
> 赞同：1
> 
> 时间：2012-09-21T14:06:37.143
> 
> 标签：c#, pdf, textbox, visual-studio-2005, pdfsharp

我在 Visual Studio 2005 中创建了一个 Windows 应用程序。在此应用程序中，用户能够将当前活动表单导出为 PDF 文件。

问题是如何使用文本框的值保存它？当我把它们留空时，没有问题。然后我给出一些输入并在文本框中获得输出，我单击导出，我收到一条消息“GDI+ 中发生一般错误”。在 Visual Studio 的输出窗口中：

```
A first chance exception of type 'System.FormatException' occurred in mscorlib.dll
A first chance exception of type 'System.Runtime.InteropServices.ExternalException' occurred in System.Drawing.dll 
```

这是我的代码：

对于捕获活动屏幕：

```
try
{
    Rectangle bounds = this.Bounds;
    using (Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height))
    {
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.CopyFromScreen(new Point(bounds.Left, bounds.Top), Point.Empty, bounds.Size);
        }
        bitmap.Save("C://Rectangle.bmp", ImageFormat.Bmp);
    }
}
catch(Exception e)
{
    MessageBox.Show(e.Message.ToString());
} 
```

对于导出为 pdf：

```
captureScreen();

PdfDocument doc = new PdfDocument();

PdfPage oPage = new PdfPage();

doc.Pages.Add(oPage);
oPage.Rotate = 90;
XGraphics xgr = XGraphics.FromPdfPage(oPage);
XImage img = XImage.FromFile(@"C://Rectangle.bmp");

xgr.DrawImage(img, 0, 0);

doc.Save("C://RectangleDocument.pdf");
doc.Close(); 
```

请帮助我将表单导出为 pdf，包括文本框的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:31:32.663

我假设当您尝试调用 CopyFromScreen 时会引发此异常？我之前写过非常相似的代码，没有任何问题，但是有一些细微的差别。

我看到的第一件事是 Bounds 属性返回一个点作为相对位置，但 CopyFromScreen 方法期望该点作为绝对位置。在调用 CopyFromScreen 之前，您可能需要调用 this.PointToScreen 以获取该点的绝对屏幕位置。

其次，它应该“正常工作”，但为了我自己的理智，我通常在 CopyFromScreen 调用中使用 CopyPixelOption.SourceCopy。

我不确定 CopyFromScreen 和 Bitmap.Save 的实现，但您可能希望移动 Save 调用，以便在处理图形对象之前发生。这*可能*不是必需的，但如果有任何类型的延迟计算正在进行，可能会给您带来问题。

# eclipse - Eclipse - CDT - 锁定形式

> ID：12532157
> 
> 赞同：0
> 
> 时间：2012-09-21T14:06:42.123
> 
> 标签：eclipse, settings, eclipse-cdt

在项目属性中，我有一个锁定的表单：![https://dl.dropbox.com/u/25397982/eclipseerror.png](../Images/6f980ea52b135f3cb55f59289567bbf9.png) 如何更改此设置或解锁表单？

# eclipse - Eclipse JUnit runner 在双击时找不到 ScalaTest 方法

> ID：12532160
> 
> 赞同：6
> 
> 时间：2012-09-21T14:06:49.177
> 
> 标签：eclipse, scala, junit, scalatest

我正在上 Martin Odersky Coursera 课程，作业使用 ScalaTest。Eclipse 无法在 JUnit 运行器中双击或右键单击“Go to File”找到测试方法，这很烦人。

双击后，“找不到方法' *xxx '。打开测试类。”* 弹出对话框。

是否存在配置问题或者这是 ScalaTest 错误/限制？

这是该类的示例 ScalaTest：

```
package recfun

import org.scalatest.FunSuite

import org.junit.runner.RunWith
import org.scalatest.junit.JUnitRunner

@RunWith(classOf[JUnitRunner])
class CountChangeSuite extends FunSuite {
  import Main.countChange
  test("manual") {
    assert(countChange(4,List(1,2)) === 3)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:05:43.090

是的，这是 Eclipse 的 JUnit 插件中的一个已知错误。这也很难解决（对于 jun it 插件）。

基本上，Eclipse junit 插件期望有一个方法，所有 java JUnit 测试都会有这个方法，但 ScalaTest 测试不一定是这种情况，尤其是 Suites & Specs。

但是，您可以试用[Eclipse 的 Scalatest 插件](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T08:17:30.777

您可以将 ScalaTest Eclipse 插件与 ScalaTest 1.8 一起使用。但是当你运行你的测试时，它会弹出一个 GUI。有用，但不如 ScalaTest 2.0 集成那么好。我认为您使用的是 Coursera 课程 1.8。

您在使用 JUnit 时遇到的实际问题是我们试图在 ScalaTest 中解决的问题。JUnit 不仅是一个测试框架，它还是一个测试平台，您可以通过它的 @RunWith 注解运行其他框架。在这种情况下，您通过 JUnit 运行 ScalaTest。但是您没有通过 @RunWith 注释获得完整的 IDE 支持，您只是获得了运行的能力。这确实是 JUnit 的一个限制。您希望通过 JUnit（在本例中为 ScalaTest）运行的测试框架也获得 IDE 支持。使用 JUnit 做到这一点的唯一方法是为您的测试框架编写 IDE 插件，这需要大量工作。

作为 ScalaTest 项目的一部分，我们一直在努力，制作插件或帮助制作为 ScalaTest 用户提供完整 IDE 支持的插件。但作为这项工作的一部分，我们还提出了“Finder”的概念，当其他测试框架通过 ScalaTest 运行时，它可用于为其他测试框架提供完整的 IDE 支持。（即，正如您可以通过 JUnit 运行其他测试框架一样，您也可以通过 ScalaTest 运行其他测试框架。）您可以在本视频的末尾（视频大约 10 分钟）看到一些 Finders 提供 IDE 支持的示例：

[http://skillsmatter.com/podcast/scala/scalatest-scalamock-subcut](http://skillsmatter.com/podcast/scala/scalatest-scalamock-subcut)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T13:00:24.550

这对我有用：

1-在您的文件夹项目中打开一个控制台并执行“sbt”。

2-（不退出“sbt”）执行“eclipse”命令。

[![在此处输入图像描述](../Images/adc8219bcc236a9f00474b36eb379a43.png)](https://i.stack.imgur.com/gHVUm.png)

# ios - NSMutableArray 发生变化

> ID：12532161
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:06:50.067
> 
> 标签：ios

我有一个 NSMutableArray (detailsMA) 有 100 个字符串，如 @"True"。我将该数组存储在已分配的 NSMutableDictionary 中。

```
 NSArray *array1 = [[NSArray alloc] initWithArray:detailsMA];
            [detailsDictionary setObject: array1 forKey:@"detailsMA"]; 
```

现在我更改了 detailsMA 的值，例如将字符串替换为 @"False"，然后检索原始数组值，

```
 [detailsMA removeAllObjects];
            [detailsMA addObjectsFromArray:[detailsDictionary objectForKey:@"detailsMA"]]; 
```

这里得到的是修改后的值，而不是原始值。我需要原始值。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:10:30.347

您应该复制数组。

```
NSArray *array1 = [[NSArray alloc] initWithArray:detailsMA copyItems:YES]; 
```

不要忘记在要复制的对象的类中实现 NSCopying 协议

编辑：

再次添加对象时，请在添加前进行复制。

```
[detailsMA addObjectsFromArray:[[NSArray alloc] initWithArray:[detailsDictionary objectForKey:@"detailsMA"] copyItems:YES]]; 
```

# crystal-reports - Crystal Reports：用于过滤子字符串值的多值参数

> ID：12532162
> 
> 赞同：1
> 
> 时间：2012-09-21T14:06:52.220
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个带有接受多个值的字符串参数的 Crystal Reports 2008 文件。我需要在记录选择中使用它。我知道通常你可以做类似的事情

```
{MyTable.MyField} In Join( {?MyParam}, "," ) 
```

但我需要用户输入可能出现在更长字段值中的值，即通过子字符串。我试过了

```
NumberVar index;
For index := 1 To UBound( {?MyParam} ) Do (
    {?MyParam}[index] In {MyTable.MyField}
) 
```

虽然它不会引发错误，但它似乎对记录选择没有任何影响（也就是说，报告显示相同数量的记录无论如何）。

更具体地说，say`MyTable`有三个记录，分别`MyField`包含文本和。使用该参数，用户应该能够键入值并过滤到第一条和第三条记录。`Red Blue Green``Green Yellow Purple``Red Yellow Orange``red``blue`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:46:38.750

创建一个自定义公式来比较两个数组的重叠值：

```
//Array_Overlap
Function (Stringvar Array a0, Stringvar Array a1)

    Local Numbervar i;
    Local Numbervar j;
    Local Booleanvar found:=false;

    For i := 1 To Ubound(a0) Do (
        For j := 1 To Ubound(a1) Do (
            If a0[i]=a1[j] Then (
                found:=true;
                Exit For;
            )
        )
    );

    found; 
```

在您的记录选择公式 (RSF) 中引用它：

```
// space delimited
AND Array_Overlap( Split({MyTable.MyField}, " "), {?MyParam} ) = TRUE 
```

# ruby-on-rails - Rails：ActiveRecord 的 Base 和 Relation - 为什么有两个类？

> ID：12532166
> 
> 赞同：3
> 
> 时间：2012-09-21T14:07:04.483
> 
> 标签：ruby-on-rails, activerecord

我[读过](http://m.onkey.org/active-record-query-interface)“当涉及到主要的 CRUD 方法时，关系就像模型一样嘎嘎作响。”

为什么 Relation 不能完成所有工作，让 Base 实例化然后返回 Relation 有什么意义，这显然与它有同样的[担忧](http://en.wikipedia.org/wiki/Separation_of_concerns)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:38:54.127

在 Rails 3 中，数据库行为被分解为不同的混入。这样，某些东西就可以进行验证，而不必从 ActiveRecord::Base 继承。ActiveRecord::Base 类引入了执行数据库操作所需的所有混入。

此外，关系实际上不是记录或记录集。它可以保留为查询的萌芽，因此可以将其链接起来，直到链中的某些内容返回记录或记录集。

因此， where 方法返回一个 Relation 对象。该对象可以调用 where 以在查询中返回另一个带有另一个过滤器的 Relation 对象。依此类推，直到调用 all, first, count 或其他方法以使返回的对象成为查询的结果。

# php - Codeigniter中分页的默认值？

> ID：12532168
> 
> 赞同：1
> 
> 时间：2012-09-21T14:07:06.260
> 
> 标签：php, codeigniter, pagination

我想知道是否有一种方法可以为 Codeigniter 中的分页设置默认值。例如，当您输入“第 2 页”时，它会发送一个帖子数据，但如果我输入“第 1 页”，则它不会发送任何帖子数据。那么，我可以改变这个吗？所以它会为第一页发送一个默认值？

任何回应表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T14:31:18.790

是的，您可以更改整个项目的默认分页选项。无需在每个控制器中工作。 `site/system/libraries/Pagination.php`看这里第 29-62 行都是默认选项，您可以从这里更改。

警告：未来版本的任何升级都会影响它

# silverlight - Silverlight - 将值传递给样式元素

> ID：12532173
> 
> 赞同：0
> 
> 时间：2012-09-21T14:07:38.340
> 
> 标签：silverlight, silverlight-5.0

所以我一直在玩 Silverlight 的按钮样式，个人感觉你必须付出多少努力才能完成一个简单的开/关状态，我想知道是否有人能告诉我如何改变我所拥有的到目前为止，我可以将任何图像用于打开和关闭状态，并且每个按钮都没有 7 x 60 行的 XAML。

```
<UserControl x:Class="Reader.LanguageSelection"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="800" d:DesignWidth="1280">
<UserControl.Resources>
    <Style x:Key="btnLangStyle" TargetType="Button">
        <Setter Property="Background" Value="#FF1F3B53"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="Padding" Value="3"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFA3AEB9" Offset="0"/>
                    <GradientStop Color="#FF8399A9" Offset="0.375"/>
                    <GradientStop Color="#FF718597" Offset="0.375"/>
                    <GradientStop Color="#FF617584" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="btnLangEn_off" d:IsOptimized="True"/>
                                        <DoubleAnimation Duration="0" To="-28" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="btnLangEn_off" d:IsOptimized="True"/>
                                        <DoubleAnimation Duration="0" To="-25" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="btnLangEn_off" d:IsOptimized="True"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="btnLang_en" d:IsOptimized="True"/>
                                        <DoubleAnimation Duration="0" To="-30" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="btnLang_en" d:IsOptimized="True"/>
                                        <DoubleAnimation Duration="0" To="-20" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="btnLang_en" d:IsOptimized="True"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Image x:Name="btnLangEn_off" Margin="27,24,-27,-24" Opacity="0" Source="Resources/Images/btnLangEn_off.png" Stretch="Fill" RenderTransformOrigin="0.5,0.5">
                            <Image.RenderTransform>
                                <CompositeTransform/>
                            </Image.RenderTransform>
                        </Image>
                        <Image x:Name="btnLangEn_on" Margin="33,23,-33,-23" Opacity="0" Source="Resources/Images/btnLangEn_off.png" Stretch="Fill" RenderTransformOrigin="0.5,0.5">
                            <Image.RenderTransform>
                                <CompositeTransform/>
                            </Image.RenderTransform>
                        </Image>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot">
    <Canvas Width="1280" Height="800">
        <Button x:Name="btnLangEn" Width="93" Height="63" Click="btnLangEn_Click" Canvas.Left="417" Canvas.Top="463" Style="{StaticResource btnLangStyle}" />
        <Button x:Name="btnLangEs" Width="93" Height="63" Content="Español" Click="btnLangEs_Click" Canvas.Left="503" Canvas.Top="576" />
        <Button x:Name="btnLangDe" Width="93" Height="63" Content="Deutsch" Click="btnLangDe_Click" Canvas.Left="768" Canvas.Top="463" />
        <Button x:Name="btnLangFr" Width="93" Height="63" Content="French" Click="btnLangFr_Click" Canvas.Left="593" Canvas.Top="463" />
        <Button x:Name="btnLangIt" Width="93" Height="63" Content="Italian" Click="btnLangIt_Click" Canvas.Left="682" Canvas.Top="576" />
        <Button x:Name="btnLangDa" Width="93" Height="63" Content="Danish" Click="btnLangDa_Click" Canvas.Left="593" Canvas.Top="686" />
    </Canvas>
</Grid> 
```

名为 btnLangEn_off 和 btnLangEn_on 的图像显然特定于一种类型的按钮，但我需要一种将这种样式应用到所有按钮的方法，告诉样式要为每个状态呈现哪些图像。

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:10:43.877

根据我的评论，这里是我研究的一个例子。请注意，我尚未对此进行测试，因此它可能无法完美运行，但您应该了解总体思路。

代码隐藏

```
public partial class CustomButton : Button
{
    public static readonly DependencyProperty OnImageProperty =
        DependencyProperty.Register("OnImageSource",
                                    typeof (ImageSource),
                                    typeof (CustomButton),
                                    new PropertyMetadata(null));

    public static readonly DependencyProperty OffImageProperty =
        DependencyProperty.Register("OffImageSource",
                                    typeof (ImageSource),
                                    typeof (CustomButton),
                                    new PropertyMetadata(null));

    public CustomButton()
    {
        InitializeComponent();

        Binding offBinding = new Binding
                                 {
                                     Source = this,
                                     Path = new PropertyPath(OffImageProperty)
                                 };
        OffImage.SetBinding(Image.SourceProperty, offBinding);

        Binding onBinding = new Binding
                                {
                                    Source = this,
                                    Path = new PropertyPath(OffImageProperty)
                                };

        OnImage.SetBinding(Image.SourceProperty, onBinding);
    }

    public ImageSource OffImageSource
    {
        get { return (ImageSource) GetValue(OffImageProperty); }
        set { SetValue(OffImageProperty, value); }
    }

    public ImageSource OnImageSource
    {
        get { return (ImageSource) GetValue(OnImageProperty); }
        set { SetValue(OnImageProperty, value); }
    }
} 
```

XAML

```
<Button x:Class="CustomButton"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        d:DesignHeight="300"
        d:DesignWidth="400">
    <Button.Resources>
        <Image x:Name="OffImage"
               Margin="27,24,-27,-24"
               Opacity="0"
               Stretch="Fill"
               RenderTransformOrigin="0.5,0.5">
            <Image.RenderTransform>
                <CompositeTransform />
            </Image.RenderTransform>
        </Image>
        <Image x:Name="OnImage"
               Margin="33,23,-33,-23"
               Opacity="0"
               Stretch="Fill"
               RenderTransformOrigin="0.5,0.5">
            <Image.RenderTransform>
                <CompositeTransform />
            </Image.RenderTransform>
        </Image>
    </Button.Resources>
    <Button.Style>
        <Style TargetType="Button">
            <Setter Property="Background"
                    Value="#FF1F3B53" />
            <Setter Property="Foreground"
                    Value="#FF000000" />
            <Setter Property="Padding"
                    Value="3" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1"
                                         StartPoint="0.5,0">
                        <GradientStop Color="#FFA3AEB9"
                                      Offset="0" />
                        <GradientStop Color="#FF8399A9"
                                      Offset="0.375" />
                        <GradientStop Color="#FF718597"
                                      Offset="0.375" />
                        <GradientStop Color="#FF617584"
                                      Offset="1" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                             To="1"
                                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                                             Storyboard.TargetName="OffImage"
                                                             d:IsOptimized="True" />
                                            <DoubleAnimation Duration="0"
                                                             To="-28"
                                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                                                             Storyboard.TargetName="OffImage"
                                                             d:IsOptimized="True" />
                                            <DoubleAnimation Duration="0"
                                                             To="-25"
                                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                                                             Storyboard.TargetName="OffImage"
                                                             d:IsOptimized="True" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0"
                                                             To="1"
                                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                                             Storyboard.TargetName="OnImage"
                                                             d:IsOptimized="True" />
                                            <DoubleAnimation Duration="0"
                                                             To="-30"
                                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)"
                                                             Storyboard.TargetName="OnImage"
                                                             d:IsOptimized="True" />
                                            <DoubleAnimation Duration="0"
                                                             To="-20"
                                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)"
                                                             Storyboard.TargetName="OnImage"
                                                             d:IsOptimized="True" />
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled" />
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused" />
                                    <VisualState x:Name="Unfocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Button.Style>
</Button> 
```

# python - 绘图软件的 PIL 和 Tkinter

> ID：12532185
> 
> 赞同：1
> 
> 时间：2012-09-21T14:08:26.097
> 
> 标签：python, tkinter, python-imaging-library, draw, paint

我正在尝试编写一个代码，该代码将在鼠标坐标处放置一个点/线/任何东西，也就是 Paint。我正在使用 PIL 和 Tkinter。问题是我不明白如何实现画布更新。

```
window = Tk(className ='Window')
image = Image.new('RGB', (800,600),"#ffffff")

image_tk = PhotoImage(image)

canvas = Canvas(window,width = 800, height = 600)
canvas.create_image(400 ,300,image = image_tk)
canvas.pack()

draw = ImageDraw.Draw(image)

def mouseclick(event):
    draw.point((event.x,event.y),fill=128)
    print event.x,event.y

canvas.bind("<Button-1>", mouseclick)
mainloop() 
```

应该添加什么？也许还有其他更好的模块可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:20:13.827

这将是昂贵的，你需要创建一个新`PhotoImage`的来反映你的修改。或者，考虑在不使用图像的情况下绘制到画布。如果您需要保存在画布中绘制的内容，您可以轻松选择将其导出到 postscript，或者更难的选择是存储绘制的内容并复制它。

目前，这里有一个示例可以调整您的代码，使其按您的预期工作（尽管我建议您选择在画布中绘图）：

```
import Tkinter
from PIL import Image, ImageDraw, ImageTk

def paint_img(event, canvas):
    x, y = event.x, event.y
    image_draw.ellipse((x-5, y-5, x+5, y+5), fill='black')
    canvas._image_tk = ImageTk.PhotoImage(image)
    canvas.itemconfigure(canvas._image_id, image=canvas._image_tk)

root = Tkinter.Tk()

width, height = 800, 600
canvas = Tkinter.Canvas(width=width, height=height)
canvas.pack()

image = Image.new('RGB', (width, height), '#cdcdcd')
image_draw = ImageDraw.Draw(image)
canvas._image_tk = ImageTk.PhotoImage(image)
canvas._image_id = canvas.create_image(0, 0, image=canvas._image_tk, anchor='nw')
canvas.tag_bind(canvas._image_id, "<Button-1>", lambda e: paint_img(e, canvas))

root.mainloop() 
```

# c - C中的组合信号量和自旋锁？

> ID：12532186
> 
> 赞同：1
> 
> 时间：2012-09-21T14:08:31.183
> 
> 标签：c, concurrency, semaphore, spinlock

是否可以在 C 中构建一种组合的信号量/自旋锁？

也就是说，我想要一个支持的线程控制结构：

*   定期唤醒线程以检查某些变量的状态。（像自旋锁）
*   如果结构的状态被另一个线程（如 sem_wait/sem_post）更改，则自动提前唤醒线程。

例如在这样的程序中：

家长：

```
while(something){
    //do some stuff here.
    sem_post(child_sem);
    sem_wait(parent_sem);
} 
```

孩子：

```
while(something_else){
    sem_wait(child_sem);
    //do some other stuff here.
    sem_post(parent_sem);

} 
```

如果孩子未能在 5 秒内设置 parent_sem，我希望父母解除阻塞，但如果孩子提前设置了 parent_sem，我也希望在 5 秒过去之前解除阻塞，同时最大限度地减少检查和重新检查状态所花费的 CPU 周期数在这 5 秒内的 parent_sem。我知道我可以使用自旋锁来做到这一点，但是将等待时间设置为高（即 1 秒）意味着大部分时间浪费了将近 1 秒。将其设置为低（例如 100 毫秒）意味着在孩子超时的情况下进行 50 次检查。这些都不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:15:22.887

这正是定时锁的用途。根据您的图书馆，它们可能可用也可能不可用。

你的例子：

家长：

```
while(something){
    //do some stuff here.
    sem_post(child_sem);
    while (sem_timed_wait(parent_sem, MAX_WAIT_TIME) == TIMEOUT)
        // check whether you should still continue waiting
} 
```

孩子：

```
while(something_else){
    while (sem_timed_wait(child_sem, MAX_WAIT_TIME) == TIMEOUT)
        // check whether you should still continue waiting
    //do some other stuff here.
    sem_post(parent_sem);
} 
```

我已经使用这种方法来增加我的线程的健壮性。也就是说，您不希望您的线程被无限期地阻塞，因为可能会出现错误并且您想终止它们，或者您可能只是想要求它们退出。另一方面，您希望尽快醒来。

该解决方案满足这两个条件。

# c++ - 从注册表中删除 COM 服务器的铭文会在 HKEY_CLASSES_ROOT\TypeLib 中留下密钥

> ID：12532188
> 
> 赞同：1
> 
> 时间：2012-09-21T14:08:40.017
> 
> 标签：c++, com

我们正在淘汰一些旧的 C++ COM 服务器，并用 VB.NET 等效替换它们。我们要清理注册表。我们发现使用`/u`or`/Unregserver`将不起作用或产生问题，因此我们选择使用 VBS 脚本删除密钥。为了获得要删除的密钥列表，我们在注册 C++ 服务器时使用 Process Monitor 来监控密钥创建活动。

到目前为止一切顺利，但`HKEY_CLASSES_ROOT\TypeLib`文件夹中仍然存在一些密钥。我想知道这个文件夹是什么以及他们是如何到达那里的。如果我从那里手动删除我的 COM 服务器 GUID，当我重新注册旧组件时它不会重新创建？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T14:10:29.890

如果您只在几台机器上执行此操作，我建议您使用免费的注册表清洁器。试图自己解决这个问题的风险太大。

# regex - 在 ColdFusion 中使用带有 String.replaceAll 的函数

> ID：12532189
> 
> 赞同：2
> 
> 时间：2012-09-21T14:08:48.660
> 
> 标签：regex, coldfusion, coldfusion-9

```
<cffunction name="foo">
     <cfargument name="default">
     <cfoutput>#ARGUMENTS.default#</cfoutput>
     <cfreturn ARGUMENTS.default />
</cffunction>

<cfset LOCAL.derp = "((bar))" />
<cfset LOCAL.derp = LOCAL.derp.replaceAll("\(\((.*)\)\)", foo('$1')) />
<cfoutput>#LOCAL.derp#</cfoutput> 
```

我期待的输出是`bar bar`我得到的`$1 bar`。如何在 ColdFusion9 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:19:32.310

首先评估 foo 函数，该函数的字符串结果是随后传递给 replaceAll 的结果，replaceAll 不知道它的输入是通过函数提供的。

[String.replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)是一种接受正则表达式模式字符串和替换字符串的 Java 方法 - 您不能直接传入回调函数。

一个解决方案是使用我创建的[cfRegex 库——它有](http://cfregex.net)[一个 Replace 函数](http://docs.cfregex.net/Replace.html)，可以让你传入一个函数来针对每个匹配项执行。

这可以像这样使用：

```
<cfset Local.Derp = RegexReplace
    ( Pattern     = '\(\((.*)\)\)'
    , Text        = Local.Derp
    , Replacement = replaceWithG1AndOutput
    ) />

<cffunction name="replaceWithG1AndOutput" returntype="String" output=true>
    <!---
        Use Arguments.Match for "((bar))"
        or Arguments.Groups[1].Match for "bar"
    --->
    <cfoutput>#Arguments.Groups[1].Match#</cfoutput>
    <cfreturn Arguments.Groups[1].Match />
</cffunction> 
```

# ios - IOS音频会话可行性

> ID：12532190
> 
> 赞同：1
> 
> 时间：2012-09-21T14:08:58.733
> 
> 标签：ios, audio

我想制作一个应用程序，它有一些音量控制设置选项。当任何应用程序开始播放任何声音甚至电话时，音量将取决于我的应用程序的音量。我想在原生 iOS 平台上制作它。有可能吗？如果可能，那么任何想法或资源如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T16:05:26.940

iOS 安全沙箱将阻止您的应用更改任何其他应用使用的音频设置（包括音量）。

# php - 在 PHP 会话期间存储用户“关注”

> ID：12532191
> 
> 赞同：0
> 
> 时间：2012-09-21T14:09:06.833
> 
> 标签：php, javascript

我在我的应用程序中设置了一个简单的关注者/关注系统。

在会话期间存储完整的“用户关注”数组的最佳方法是什么，这样我就不必在整个过程中多次查询数据库。

澄清一下：当用户在获得授权后登录时，我会查询数据库，获取登录用户关注的用户的完整列表，并最终将其存储为 JavaScript 变量。这样在整个站点中，当用户四处导航时，我可以不断地检查他们可能遇到的任何其他用户的以下状态。

此查询仅在用户加载整个页面时执行一次，而不会重复浏览它。

这适用于 javascript 生成的内容，即用户悬停卡等...

但是，我想将此数组（仅包含用户 ID）存储在 PHP 本身中，以便在生成需要执行“关注者/关注者”检查的内容服务器端时防止进一步查询下表。

最好的方法是什么？

请记住，结果缓存在 memcached 中，但如果我可以完全避免任何查找并有一个一致的数组来检查，那就太好了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:14:03.327

所以让我来做对了，你想存储这个列表，这样就不会在每个页面上查询它？

首先，我建议您仅在需要此数据的页面上执行此查询，其次我会说在这些页面上您不要尝试此操作。

想象一个用户停止关注或开始关注。一些复杂的缓存计算器或事件起泡器编程到您自己的 PHP 应用程序中以清除外部会话数据（这很糟糕，用户可以访问不属于他们自己的数据，会话事实）可能会与安全性和性能相关。

更好的做法是对每个新页面再次执行查询。这会更容易，可能更高效，并且不会进行微优化。

## 编辑

如果您在一页上选择 10k 行，那么您可能做错了什么。你可能从错误的角度看待它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:27:58.047

想到的两种方法是每次只编写带有良好放置索引的连接，您说过您不想这样做，并且只是会话中的一个简单数组，可能看起来像这样：

```
if (!isset($_SESSION['following']) {
    $following = $user->getFollowingIds(); //some query in here to get an array of ids
    $_SESSION['following'] = $following;
    $_SESSION['following_str'] = implode(',', $following);
} 
```

然后，每当您想为关注的人提取所有状态时，`$user`您都可以编写一个查询，如下所示：

```
$query('SELECT status.* FROM status WHERE user_id IN (' . $_SESSION['following_str'] . ')'); //not sanitized or safe but you get the idea 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:12:27.830

将其存储在会话变量中。

*   [http://php.about.com/od/advancedphp/ss/php_sessions.htm](http://php.about.com/od/advancedphp/ss/php_sessions.htm)
*   [https://www.google.se/search?q=learning+sessions+php](https://www.google.se/search?q=learning+sessions+php)

**更新**

将当前用户存储在会话中并将其添加到您已经在执行的查询中以获取弹出信息并添加它测试弹出用户是否跟随当前用户。

# asp.net-mvc-3 - Asp MVC 3 下载压缩文件

> ID：12532192
> 
> 赞同：2
> 
> 时间：2012-09-21T14:09:10.940
> 
> 标签：asp.net-mvc-3

我有一个带有生成按钮的视图。当我单击它时，我正在`Generate`使用 ajax 调用导航到控制器的方法。

```
generate = function () {  
        $.ajax({
            url: "/franchise/Generate",
            type: "POST",
            data: { id: omega.franchiseInfo.Id(), imagesPath: omega.franchiseInfo.ImagesPath() },

        });
    } 
```

这是我的`Generate`方法：

```
public ActionResult Generate(int id, string imagesPath)
        {
            // some logic here
            var zipFileName = @"D:\FranchiseGeneration\MyZipFile.zip";
            using (var zip = new ZipFile())
            {
                zip.AddDirectory(@"D:\FranchiseGeneration\Test", "Generation");
                zip.Save(zipFileName);
            }
            return File(zipFileName, "application/zip", "MyZipFile.zip"); 
        } 
```

MyZipFile.zip 按指定在我的硬盘驱动器上创建。我希望用户被提示下载压缩文件......但没有任何反应。我对 Mvc3 很陌生，我不确定我做错了什么。欢迎任何带有代码示例的建议。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:14:11.353

这是一个 ajax 调用，在 ajax 调用中返回一个文件没有意义...... ajax 代表异步 JavaScript 和 XML.. 可以使用 json 广告和其他一些基于文本的东西，但是要使用二进制文件，你会需要一些额外的作品。在您的情况下，我认为最好的办法（最简单的）是执行正常的回发，而不是 ajax（甚至简单的 GET 也可以）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:10:56.723

不可能通过这样的 ajax 请求触发文件下载。

不过，还有其他方法可以让类似的事情发生。

[http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)

# asp.net - 用于部署的 Web 配置设置

> ID：12532199
> 
> 赞同：1
> 
> 时间：2012-09-21T14:09:42.493
> 
> 标签：asp.net, visual-studio-2010, web-config

在我的 web.config 文件中，我有一个连接字符串来连接我的开发数据库。

```
 <connectionStrings>
<add name="MembershipDB" connectionString="Data Source=DebugSQL;Initial Catalog=PortalAccess;Integrated Security=True;Application" providerName="System.Data.SqlClient"/> 
```

当我将网站发布到我的生产服务器时，我只需更改数据源名称。当我测试它时，我再次切换它，它是愚蠢的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:19:16.977

这是一种非常常见的方法，并且可以很好地工作。

显然，如果您在以这种方式手动维护细节时弄错了细节，您可能会遇到问题。

您还可以查看 web.config 转换：这是一种编写主 web.config 文件，然后编写单独的文件来更改原始文件的方法，具体取决于您运行的构建配置。

一些资源：

*   [StackOverflow 上的相关问题；](https://stackoverflow.com/questions/2990384/vs-2010-web-config-transformations-for-debugging)
*   [Asp.Net 教程；](http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-introduction-1-of-12)
*   [VS 2010 的 MSDN 视频。](http://msdn.microsoft.com/en-us/vstudio/ff801895.aspx)

# grails - 在控制器中渲染 Grails 标签

> ID：12532202
> 
> 赞同：4
> 
> 时间：2012-09-21T14:09:55.893
> 
> 标签：grails, controller, gsp

我必须在调用控制器函数时呈现选择。

```
class FormController {
    def document() {
        render """<g:select name="tipo" from="${['','one','two']}" />"""
    }
} 
```

它不起作用..当我用这个函数替换一个 div 时，在 html 中什么也没有出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:25:51.880

改为使用[标记作为方法调用](http://grails.org/doc/latest/guide/theWebLayer.html#tagsAsMethodCalls)语法：

```
render g.select(name:"tipo" from:['','one','two']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T11:35:41.450

```
//Build your output string as the next:
def output = g.select(name:"tipo" from:['','one','two'])
//And add any other string or tag if you need
output = "Tipo: " + output
render (text: output) 
```

# android - 在 Galaxy S3 上打开音乐播放器

> ID：12532207
> 
> 赞同：0
> 
> 时间：2012-09-21T14:10:06.940
> 
> 标签：android, android-intent

以下代码适用于任何 android 设备（api >= 8），但不适用于三星 Galaxy S3（未找到音乐播放器）。

```
try {
    String name;
    try {
        name = (String) MediaStore.class.getDeclaredField("INTENT_ACTION_MUSIC_PLAYER").get(null);
    } catch(Exception e) {
        name = (String) Intent.class.getDeclaredField("CATEGORY_APP_MUSIC").get(null);
    }
    startActivity(new Intent(name));
} catch(Exception e) {
    // music player not found
} 
```

三星构造函数层是什么东西呢？有没有人有办法在 Galaxy S3 上打开媒体播放器？

作为更新，我改变了我的错误，但我仍然没有在 Galaxy S3 上获得媒体播放器：

```
try {
    try {
        // 8 <= API < 15
        String action = (String) MediaStore.class.getDeclaredField("INTENT_ACTION_MUSIC_PLAYER").get(null);
        Intent intent = new Intent(action);
        startActivity(intent);
    } catch(Exception e) {
        // 15 <= API
        String category = (String) Intent.class.getDeclaredField("CATEGORY_APP_MUSIC").get(null);
        Method method = Intent.class.getMethod("makeMainSelectorActivity", String.class, String.class);
        Intent intent = (Intent) method.invoke(null, Intent.ACTION_MAIN, category);
        startActivity(intent);
    }
catch(Exception e) {
    // music player not found
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:55:50.993

CATEGORY_APP_MUSIC 是一个类别。直接对此打开意图是行不通的。

根据文档：

> 公共静态最终字符串 CATEGORY_APP_MUSIC
> 
> 自：API 级别 15 与 ACTION_MAIN 一起用于启动音乐应用程序。Activity 应该能够播放、浏览或操作存储在设备上的音乐文件。
> 
> 注意：这不应用作 Intent 的主键，因为它不会导致应用程序以正确的操作和类别启动。相反，将此与 makeMainSelectorActivity(String, String) 一起使用以在选择器中生成具有此类别的主 Intent

您需要使用操作 MAIN 打开它并将类别设置为 CATEGORY_APP_MUSIC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:34:15.820

我终于通过以下步骤找到了我的问题的解决方案：

*   我从 Android Market 安装了“包名称”应用程序
*   我找到了名为“com.sec.android.app.music”的音乐播放器包
*   我使用 PackageManager 中的“getLaunchIntentForPackage”方法创建了一个 Intent
*   我用这个 Intent 开始活动，找到了音乐播放器

此生成的 Intent 转换为 String 返回：

```
Intent {
    act=android.intent.action.MAIN
    cat=[android.intent.category.LAUNCHER]
    flg=0x10000000
    pkg=com.sec.android.app.music
    cmp=com.sec.android.app.music/.MusicActionTabActivity
} 
```

我不明白为什么“CATEGORY_APP_MUSIC”不能只在 GS3 上工作......

启动音乐播放器的代码：

```
try {
    String pkgname = "com.sec.android.app.music";
    PackageManager pkgmanager = getPackageManager();
    Intent intent = pkgmanager.getLaunchIntentForPackage(pkgname);
    startActivity(intent);
} catch(Exception e) {
    // music player not found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:20:05.570

这可能会帮助你

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
 intent.setDataAndType(Uri.fromFile(new File(mpath + "/" + filename)), "audio/"+extension);
 try {
   startActivity(intent);
 } catch ( Exception e ) {
   e.printStackTrace();
 } 
```

或者

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
 try {
       startActivity(intent);
     } catch ( Exception e ) {
       e.printStackTrace();
     } 
```

# oracle - dbms_output.put() 的缓冲是否与 dbms_output.put_line() 不同？

> ID：12532211
> 
> 赞同：4
> 
> 时间：2012-09-21T14:10:26.353
> 
> 标签：oracle, plsql, oracle10g, dbms-output

我使用 Aqua Data Studio 通过分散输出语句来调试存储过程。

我在包中有一个违反完整性约束的删除语句：

```
DELETE FROM x WHERE x.ID = an_x_with_children; 
```

正如预期的那样，我的 proc 在这一行出现 ORA-02292 失败。我想查看`an_x_with_children`变量的值。所以我用这样的输出换行：

```
dbms_output.put('Attempting to delete x: ' || an_x_with_children);
DELETE FROM x WHERE x.ID = an_x_with_children;
dbms_output.put(' Success'); 
```

并期望在违反完整性约束错误消息之前将消息视为消息控制台中的最后一件事。 **但它不打印！**

现在，如果我更改输出以使用如下`put_line()`过程：

```
dbms_output.put_line('Attempting to delete x: ' || an_x_with_children);
DELETE FROM x WHERE x.ID = an_x_with_children;
dbms_output.put_line(' Success'); 
```

我在 proc 出错之前立即看到消息“尝试删除 x：123”。

包的[文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm)`dbms_output`没有提到`put`和`put_line`过程在这方面的行为有任何不同。例如，它说

> 您使用 PUT 或 PUT_LINE 创建的输出被缓冲。

因此，我希望在 proc 错误时两者都显示输出，或者都不显示输出。

有人可以向我解释这种行为是怎么回事吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:39:06.450

这是一个显示您所看到的行为的示例：

```
SQL> exec dbms_output.put_line('hello')
hello

PL/SQL procedure successfully completed.

SQL> exec dbms_output.put('hello again')

PL/SQL procedure successfully completed.

SQL> exec dbms_output.put(' and again')

PL/SQL procedure successfully completed.

SQL> exec dbms_output.new_line
hello again and again

PL/SQL procedure successfully completed. 
```

[文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm)说“ SQL*Plus 在发出 SQL 语句或匿名 PL/SQL 调用后调用 GET_LINES”。

并且过程 GET_LINES 说“这个过程从缓冲区中检索一个行数组。”

使用 PUT，您还没有完成您的线路。所以它不打印。

NEW_LINE 过程也提到了这一点：“这个过程放置了一个行尾标记。GET_LINE 过程和 GET_LINES 过程返回由“换行符”分隔的“行”。每次调用 PUT_LINE 过程或 NEW_LINE 过程都会生成一行由 GET_LINE(S) 返回。”

问候，
罗布。

# odbc - 使用 SAS 连接到 Salesforce

> ID：12532213
> 
> 赞同：0
> 
> 时间：2012-09-21T14:10:28.663
> 
> 标签：odbc, salesforce, sas

我有一个销售人员企业版的客户。我需要使用 Base SAS 连接并提取 salesforce 数据（SAS/Access for ODBC 已获得许可）。

如何做到这一点？是否可以使用 ODBC 引擎映射 libname，或者是否有必要使用 Web API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:17:04.857

不知道 Salesforce 对 ODBC 的支持，但肯定可以使用 ODBC 映射 libname。

[http://support.sas.com/documentation/onlinedoc/91pdf/sasdoc_91/access_odbc_7365.pdf](http://support.sas.com/documentation/onlinedoc/91pdf/sasdoc_91/access_odbc_7365.pdf) 有例子 - 基本上是

```
libname <name> odbc <connection options>; 
```

Salesforce 特定的 SAS 产品：http: [//support.sas.com/documentation/cdl/en/bidsag/61236/HTML/default/viewer.htm#a003279102.htm](http://support.sas.com/documentation/cdl/en/bidsag/61236/HTML/default/viewer.htm#a003279102.htm)

当然，这需要的不仅仅是基本 SAS，但如果 SAS BI 是一个选项，它似乎很容易配置。

另一个不是免费的选项（嗯，它似乎是免费的 15 天）：http: [//blogs.datadirect.com/2012/02/sas-access-to-salesforce-crm-for-superior-odbc-integration -with-sas.html](http://blogs.datadirect.com/2012/02/sas-access-to-salesforce-crm-for-superior-odbc-integration-with-sas.html)

不过，Salesforce 似乎没有免费的 ODBC 驱动程序，除非有所改变——例如，[http:](http://success.salesforce.com/ideaView?id=08730000000Bqqu) //success.salesforce.com/ideaView?id=08730000000Bqqu似乎表明这是需要但不可用的东西。

因此，对于免费解决方案，您可能需要使用 Web API ...

# javascript - 使用javascript评估/更改Gridview中的显示值

> ID：12532217
> 
> 赞同：0
> 
> 时间：2012-09-21T14:10:35.503
> 
> 标签：javascript, asp.net, data-binding, gridview, binding

使用 javascript，在 asp.net 网格视图中，将显示的布尔值切换为字符串，如下所示

```
<asp:Label ID="Correct" Text='<%# Eval("Correct").ToString().Equals("true") ? " Correct " : " Wrong " %>'  runat="server"/></td> 
```

如果数据类型为 int 且值为 1,2 和 3 以分别显示低、中和高，有什么方法可以切换 3 个不同的值。我已经尝试如下但它不工作

```
<asp:Label ID="Difficulty" Text='<%# Eval("Difficulty").ToString().Equals("1") ? " low" : (("Difficulty").ToString().Equals("2") ? " medium " : " high ") %>'  runat="server"/></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:17:38.040

即使这可以通过三元运算符来完成 - 它也非常难以阅读。我想说你最好的选择是在类后面的相应代码中定义一个函数：

```
protected string GetDifficultyText(object difficultyObj)
{
    string difficultyId = difficultyObj as string;

    if (string.IsNullOrWhiteSpace(difficultyId))
    {
        return string.Empty; //or throw exception
    }

    switch (difficultyId)
    {
        case "1":
            return " low";
        case "2":
            return " medium";
        case "3":
            return " high";
        default:
            return string.Empty; //or throw exception
    }
} 
```

然后在标记中调用它：

```
<asp:Label ID="Difficulty"
           Text='<%# GetDifficultyText(Eval("Difficulty")) %>'
           runat="server"/> 
```

# php - Symfony 1.4 不会为数字前下划线的字段创建 getter

> ID：12532224
> 
> 赞同：0
> 
> 时间：2012-09-21T14:10:59.420
> 
> 标签：php, symfony1, symfony-1.4, getter, getter-setter

我有一个数据库表，其中包含名为 xx_yy_1、xx_yy_2 等的字段。不幸的是，Doctrine 没有为这些字段生成 getter/setter。我想这只会发生在数字前面有下划线的情况下。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:58:54.123

这是教义中不一致的行为。您可以访问类似`$record->getXxYy_1()`或的字段`$record->get('xx_yy_1')`。生成的基础模型类顶部的 DocBlock 是错误的，因此自动完成可能会为这些字段提供错误的方法名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T15:17:14.707

这是一个教义问题。您应该在没有下划线+数字的情况下命名列，例如：

**xx_yy1**而不是**xx_yy_1。**

所以，方法总是 ->getXxyy1(); 或 ->get('xx_yy1')

# javascript - 选择所有具有较高索引的兄弟姐妹的最有效方法是什么？

> ID：12532225
> 
> 赞同：2
> 
> 时间：2012-09-21T14:11:09.920
> 
> 标签：javascript, jquery

我有一个 HTML 元素 myElement。我需要选择所有具有相同父元素并且在该元素之后的元素。

我坚持

```
var index = $myElement.index();
var followingSiblings = $myElement.parent().children(":gt(" + index + ")"); 
```

这可行，但看起来很笨拙且性能不佳。

**问：**有没有更优雅、更优雅、更漂亮、更聪明、更厉害的方式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:12:22.027

```
var followingSiblings = $myElement.nextAll(); 
```

[**小提琴**](http://jsfiddle.net/TsBJF/)

[参考](http://api.jquery.com/nextAll/)

# arrays - 如何在处理中使用 ArrayList？

> ID：12532228
> 
> 赞同：1
> 
> 时间：2012-09-21T14:11:15.083
> 
> 标签：arrays, arraylist, processing

官方解释在这里：[Arr​​ayList](http://processing.org/reference/ArrayList.html)

但是，它使用迭代并使我感到困惑。

我正在尝试制作一支绘图笔，但这里出了点问题：

```
drawings.get(i) = drawing.get(i-1); 
```

* * *

```
 ArrayList <Drawing> drawings = new ArrayList <Drawing>();

   void setup(){
    size(400,400);
    background(255);
    colorMode(HSB);
   }

   void draw(){}

   void mouseDragged(){

     drawings.add(new Drawing(mouseX,mouseY));

     for(int i = drawings.size()-1;i>0;i--){
       drawings.get(i) = drawing.get(i-1);
      }

     for(int i=0;i<drawings.size;i++){
       fill(c,100);
       drawings.get(i).display();}
  }

  class Drawing{
     float x,y,r;
     color c;

   Drawing(float ax,float ay){
     x=as;
     y=ay;
     r=random(2,20);
     c=color(random(100,200),255,255);
    }  

   void display(){
     fill(c,100);
     ellipse(drawing[i],r,r);}

  } 
```

我仍然不知道如何使用 ArrayList。有人知道吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:52:30.837

您提到迭代使您感到困惑。这是一个简单的 for 循环。如果您在理解这些方面有困难，与其他语句相比，它们看起来更难，但这只是因为循环一次执行 3 件事：

1.  初始化一个计数器
2.  将当前计数器值与限制进行比较（布尔表达式）
3.  增加一个计数器

在您的代码中，有两个循环：

```
 for(int i = drawings.size()-1;i>0;i--) 
```

和

```
for(int i=0;i<drawings.size();i++) 
```

第一个循环倒数，因此：

1.  计数器被初始化为最大值 ( `i = drawings.size()`)
2.  极限是 1 ( `i>0`)
3.  计数器递减 ( `i--`) （或者如果你愿意，递增 -1）

drawing.size() 简单地检索数组列表的大小（类似于数组的长度属性）。所以简单来说，第一个循环从添加到列表中的最后一个元素开始（最近的），谁的索引等于列表大小 -1，它停止在第二个元素，谁的索引是 1（因为数组/数组列表从 0 开始索引）。

第二个循环更简单，因为它从 0 计数到数组列表的大小，基本上是列表中的所有元素按照它们的存储顺序（从最旧到最新）。

在第一个循环中，您似乎将除第一个之外的所有元素都移动了一个。你应该这样尝试：

```
 for (int i = drawings.size()-1;i>0;i--) {
    Drawing current  = drawings.get(i);//store the current drawing
    Drawing previous = drawings.get(i-1);//store the previous drawing
    current  = previous;//point the current to the previous
  } 
```

这是您修复了错误的代码清单：

```
ArrayList <Drawing> drawings = new ArrayList <Drawing>();
color c = color(0,0,192);

void setup() {
  size(400, 400);
  background(255);
  colorMode(HSB);
}

void draw() {
}

void mouseDragged() {

  drawings.add(new Drawing(mouseX, mouseY));

  for (int i = drawings.size()-1;i>0;i--) {
    Drawing current  = drawings.get(i);//store the current drawing
    Drawing previous = drawings.get(i-1);//store the previous drawing
    current  = previous;//point the current to the previous
    //drawings.get(i) = drawing.get(i-1);
  }

  for (int i=0;i<drawings.size();i++) {
    fill(c, 100);
    drawings.get(i).display();
  }
}

class Drawing {
  float x, y, r;
  color c;

  Drawing(float ax, float ay) {
    x=ax;
    y=ay;
    r=random(2, 20);
    c=color(random(100, 200), 255, 255);
  }  

  void display() {
    fill(c, 100);
//    ellipse(drawing[i], r, r);
    ellipse(x,y,r,r);
  }
} 
```

**更新**

由于反向循环，我假设您需要存储绘图列表并对其进行偏移，如下所示：

```
ArrayList <Drawing> drawings = new ArrayList <Drawing>();

void setup() {
  size(400, 400);
  smooth();
  noStroke();
  colorMode(HSB);
}

void draw() {
  background(0,0,255);
  for (int i=0;i<drawings.size();i++){
    drawings.get(i).display();
  }
}

void mouseDragged() {

  for (int i = drawings.size()-1;i>0;i--) {
    drawings.get(i).copy(drawings.get(i-1));
  }
  drawings.add(0,new Drawing(mouseX, mouseY));

}

class Drawing {
  float x, y, r;
  color c;

  void copy(Drawing copyFrom){
    x = copyFrom.x;
    y = copyFrom.y;
    r = copyFrom.r;
    c = copyFrom.c;
  }

  Drawing(float ax, float ay) {
    x=ax;
    y=ay;
    r=random(2, 20);
    c=color(random(100, 200), 255, 255);
  }  

  void display() {
    fill(c, 100);
    ellipse(x,y,r,r);
  }
} 
```

如果您只是想根据距离在绘图对象之间画一条线，则可以在没有反向循环的情况下进行：

```
ArrayList <Drawing> drawings = new ArrayList <Drawing>();

void setup() {
  size(400, 400);
  background(255);
  colorMode(HSB);
}

void draw() {
}

void mouseDragged() {

  drawings.add(new Drawing(mouseX, mouseY));

  for (int i=0;i<drawings.size();i++) {
    Drawing curr  = drawings.get(i);
    if(i > 0){                                    //if the current index is greather than 0
      Drawing prev = drawings.get(i-1);           //we can access the previous
      if(dist(curr.x,curr.y,prev.x,prev.y) < 20) {//check the distance, if it's within a certain threshold
        line(curr.x,curr.y,prev.x,prev.y);        //draw the line
      }
    }
    curr.display();
  }
}

class Drawing {
  float x, y, r;
  color c;

  Drawing(float ax, float ay) {
    x=ax;
    y=ay;
    r=random(2, 20);
    c=color(random(100, 200), 255, 255);
  }  

  void display() {
    fill(c, 100);
    ellipse(x,y,r,r);
  }
} 
```

实际上，由于您没有清除背景，因此根本不需要列表。您所需要的只是对上一个绘图对象的引用，以便您可以检查距离并绘制一条线：

```
Drawing prev;//variable to store the previous drawing

void setup() {
  size(400, 400);
  background(255);
  colorMode(HSB);
}

void draw() {
}

void mouseDragged() {

  Drawing curr = new Drawing(mouseX, mouseY);//create a new drawing
  curr.display();//display it
  if(prev != null){//check if there was a previous one
    if(dist(curr.x,curr.y,prev.x,prev.y) < 20) {//if so, check if the distance is within the threshold
       line(curr.x,curr.y,prev.x,prev.y);//then simply draw a line
    }
  }
  prev = curr;

}

class Drawing {
  float x, y, r;
  color c;

  Drawing(float ax, float ay) {
    x=ax;
    y=ay;
    r=random(2, 20);
    c=color(random(100, 200), 255, 255);
  }  

  void display() {
    fill(c, 100);
    ellipse(x,y,r,r);
  }
} 
```

高温高压

# django - base.html 中的动态变量 - Django

> ID：12532231
> 
> 赞同：0
> 
> 时间：2012-09-21T14:11:33.460
> 
> 标签：django, django-templates, django-views

我有一个 base.html，其中包括一些用户个人资料数据，例如电子邮件、网站等。

我需要将此 base.html 扩展到我的 index.html。我可以在 index.html 中显示这些数据。因为在索引页面的视图中，我有用户名参数 [也在 url 中]。

我该如何处理？这是我在索引视图中的 objects.get 代码：

```
def user_index(username,request):
    user = Profile.objects.filter(owner__username=username)
    ..... 
```

和我相关的网址部分：

```
url(r'^blog/(?P<username>[-\w]+)/$',view='user_index', name='user_index'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:25:07.250

你可以做

> 索引.html

```
{% extends 'base.html' %}

{% block content %}

{% endblock content %} 
```

并且在

> base.html

```
<doctype ...>
...

{% block content %}
{% endblock content %}

... 
```

在这里，index.html 将从 base.html 扩展（继承），并将内容呈现在`{% block content %}`

# android - Android Maven 编译失败

> ID：12532232
> 
> 赞同：3
> 
> 时间：2012-09-21T14:11:55.240
> 
> 标签：android, maven, android-maven-plugin

我已经为此苦苦挣扎了好几个小时......我有一个 maven Android lib 项目，编译它失败并显示以下调试输出：

```
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-compiler-plugin:2.4:compile from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-compiler-plugin:2.4, parent: sun.misc.Launcher$AppClassLoader@77cde100]
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.4:compile' with basic configurator -->
[DEBUG]   (f) basedir = D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera
[DEBUG]   (f) buildDirectory = D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target
[DEBUG]   (f) classpathElements = [D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-module-manager\0.0.1\nu-art-module-manager-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-exception-handling\0.0.1\nu-art-exception-handling-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-reflection\0.0.1\nu-art-reflection-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-core\0.0.1\nu-art-core-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-tools\0.0.1\nu-art-tools-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\org\jdom\jdom\1.1\jdom-1.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\rexml\0.0.1\rexml-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\nu\art\software\cyborg\cyborg\0.0.1\cyborg-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\android\framework\android-intermediate-package\0.0.1\android-intermediate-package-0.0.1.jar, C:\Users\TacB0sS\.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar]
[DEBUG]   (f) compileSourceRoots = [D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java, D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\extracted-dependencies\src\main\java, D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\r, D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\aidl]
[DEBUG]   (f) compilerId = javac
[DEBUG]   (f) debug = true
[DEBUG]   (f) encoding = UTF-8
[DEBUG]   (f) failOnError = true
[DEBUG]   (f) fork = false
[DEBUG]   (f) generatedSourcesDirectory = D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\annotations
[DEBUG]   (f) optimize = false
[DEBUG]   (f) outputDirectory = D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes
[DEBUG]   (f) outputFileName = cyborg-module-camera-0.0.1
[DEBUG]   (f) projectArtifact = com.nu.art.software.cyborg:cyborg-module-camera:apklib:0.0.1
[DEBUG]   (f) session = org.apache.maven.execution.MavenSession@201d592a
[DEBUG]   (f) showDeprecation = false
[DEBUG]   (f) showWarnings = false
[DEBUG]   (f) source = 1.6
[DEBUG]   (f) staleMillis = 0
[DEBUG]   (f) target = 1.6
[DEBUG]   (f) verbose = false
[DEBUG] -- end configuration --
[DEBUG] Using compiler 'javac'.
[DEBUG] Source directories: [D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java
 D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\r
 D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\aidl]
[DEBUG] Classpath: [D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-module-manager\0.0.1\nu-art-module-manager-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-exception-handling\0.0.1\nu-art-exception-handling-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-reflection\0.0.1\nu-art-reflection-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-core\0.0.1\nu-art-core-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-tools\0.0.1\nu-art-tools-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\org\jdom\jdom\1.1\jdom-1.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\rexml\0.0.1\rexml-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\nu\art\software\cyborg\cyborg\0.0.1\cyborg-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\android\framework\android-intermediate-package\0.0.1\android-intermediate-package-0.0.1.jar
 C:\Users\TacB0sS\.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar]
[DEBUG] Output directory: D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes
[DEBUG] Classpath:
[DEBUG]  D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-module-manager\0.0.1\nu-art-module-manager-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-exception-handling\0.0.1\nu-art-exception-handling-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-reflection\0.0.1\nu-art-reflection-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-core\0.0.1\nu-art-core-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-tools\0.0.1\nu-art-tools-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\org\jdom\jdom\1.1\jdom-1.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\rexml\0.0.1\rexml-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\nu\art\software\cyborg\cyborg\0.0.1\cyborg-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\android\framework\android-intermediate-package\0.0.1\android-intermediate-package-0.0.1.jar
[DEBUG]  C:\Users\TacB0sS\.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar
[DEBUG] Source roots:
[DEBUG]  D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java
[DEBUG]  D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\extracted-dependencies\src\main\java
[DEBUG]  D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\r
[DEBUG]  D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\aidl
[DEBUG] Command line options:
[DEBUG] -d D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes -classpath D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-module-manager\0.0.1\nu-art-module-manager-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-exception-handling\0.0.1\nu-art-exception-handling-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-reflection\0.0.1\nu-art-reflection-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-core\0.0.1\nu-art-core-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\nu-art-tools\0.0.1\nu-art-tools-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\org\jdom\jdom\1.1\jdom-1.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\rexml\0.0.1\rexml-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\nu\art\software\cyborg\cyborg\0.0.1\cyborg-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\android\framework\android-intermediate-package\0.0.1\android-intermediate-package-0.0.1.jar;C:\Users\TacB0sS\.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar; -sourcepath D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java;D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\r;D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\aidl; D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraLayer.java D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraException.java -s D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\generated-sources\annotations -g -nowarn -target 1.6 -source 1.6 -encoding UTF-8
[INFO] Compiling 3 source files to D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraLayer.java:[79,80] cannot find symbol
symbol  : method getRotation()
location: class android.view.Display
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[50,23] cannot find symbol
symbol  : method getNumberOfCameras()
location: class android.hardware.Camera
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[66,26] cannot find symbol
symbol  : class CameraInfo
location: class android.hardware.Camera
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[66,78] cannot find symbol
symbol  : class CameraInfo
location: class android.hardware.Camera
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[88,19] open() in android.hardware.Camera cannot be applied to (int)
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[109,26] cannot find symbol
symbol  : class CameraInfo
location: class android.hardware.Camera
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[109,78] cannot find symbol
symbol  : class CameraInfo
location: class android.hardware.Camera
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraModule.java:[124,8] cannot find symbol
symbol  : method setDisplayOrientation(int)
location: class android.hardware.Camera
[INFO] 8 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------ 
```

请注意，类路径变量之一是：C:\Users\TacB0sS.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar

我已经两次和三次检查了这个，我确定这些方法和类在上面的 jar 中，在 Eclipse 中我在标准构建路径中使用相同的 jar，它编译得很好，浏览它也显示了对象和方法包括在内。

我错过了什么？

更新：

一些有效的pom：

```
<properties>
    <owner>Adam Zehavi</owner>
    <android.version>3.2_r1</android.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <android.sdk>13</android.sdk>
    <company.name>Nu-Art Software</company.name>
    <nickname>TacB0sS</nickname>
    <android.emulator.name>emulator1</android.emulator.name>
</properties>
...
...
<dependencies>
    <dependency>
        <groupId>com.nu.art.software.cyborg</groupId>
        <artifactId>cyborg</artifactId>
        <version>0.0.1</version>
        <type>apklib</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.nu.art.software.cyborg</groupId>
        <artifactId>cyborg</artifactId>
        <version>0.0.1</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>3.2_r1</version>
        <scope>provided</scope>
    </dependency>
</dependencies>
...
...
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.4</version>
    <executions>
        <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </execution>
        <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
                <goal>compile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </execution>
    </executions>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:58:45.900

我认为问题在于 android-maven-plugin 中的 sdk 级别错误

```
 <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.1.1</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>                    
                <sdk>
                    <platform>13</platform> <!-- or ${android.sdk} in your case -->
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:42:32.357

首先，错误消息表明您的依赖项不正确，因为您缺少所需的类（库）..

```
[ERROR] D:\Development\Java\Projects\Frameworks\Cyborg\Cyborg Module - Camera\src\main\java\com\nu\art\software\cyborg\modules\camera\core\CameraLayer.java:[79,80] cannot find symbol
symbol  : method getRotation()
location: class android.view.Display 
```

问题是你从哪里得到你正在使用的 jar (C:\Users\TacB0sS.m2\repository\com\google\android\android\3.2_r1\android-3.2_r1.jar)。如果我在找到一个 jar 后通过谷歌搜索，但这个 jar 不包含给定的类....此外，似乎有一些关于[问题的提示（见问题）。](https://github.com/mosabua/maven-android-sdk-deployer)

此外，我建议不要在 Maven 中定义约定已经涵盖的内容

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.4</version>
    <executions>
        <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </execution>
        <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
                <goal>compile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </execution>
    </executions>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

以上可以简化为（注意使用最新版本的 maven-compiler-plugin current: 2.5.1）。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

# c# - 在同一个 DLL 的两个类之间传递信息，但没有全局、公共变量

> ID：12532234
> 
> 赞同：0
> 
> 时间：2012-09-21T14:11:59.577
> 
> 标签：c#

当一个对话框显示在我的表单中时，可以从两个不同的调用堆栈打开它，或者从右键单击菜单选项或从菜单命令。而且它们是不同的（一个是创建一个新的报表字段，另一个是显示当前报表字段的属性）所以我在该表单的字段中填充的数据是不同的，但在某种程度上，它们也使用了一些常用方法. 所以我想要一种将信息传递给方法的`PopulateFields()`方法，以便它知道它是从属性窗口的右键单击还是从插入菜单选项调用的。

因此，在最低级别的类中，我创建了一个像这样的公共枚举，以知道它是从哪里调用的，所以最后`PopulateFields()`知道如何根据它的来源来填充字段，正如您看到的调用堆栈转到不同的类所以我不得不将我的枚举定义为公开的。那么公共全局变量？嗯！这就是我想改变的，所以它不会再公开了。什么是更好的解决方案？也许我可以为这个枚举创建一个单独的类，而不是在那个类中定义它？那个更好吗？

```
public enum FieldDialogSource
{
    FromPropertiesWindow,
    FromInsertMenu
}

public FieldDialogSource FieldDialogLaunchSource { get; set; }

MyLibrary.FieldDlgController.PopulateFields()
MyLibrary.frmMyForm.Init()
MyLibrary.frmMyForm.ShowForm()
MyLibrary.FieldDlgController.ShowForm()
MyLibrary.Controller.FiledProperties() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:23:41.650

您可以在表单类中定义枚举（因为它确实属于表单）

另一方面，传递“从哪里”打开表单可能不是好的做法。如果您突然允许您的用户也可以使用右键单击以不同的状态打开表单，或者如果需要添加第三个源来打开表单（在现有的两种状态之一）怎么办......

也许你可以重载你的构造函数：

*   无参数构造函数：我们需要以“创建模式”打开表单。
*   带数据的构造函数：以“查看模式”打开表单并显示属性。

您仍然可以在表单中将枚举和属性用作私有，以便所有方法都知道调用了哪个构造函数（因此我们是创建新报表还是查看现有报表）
然后可以将枚举定义为（例如）：

```
private enum FormState
{
    Insert,
    ViewData
} 
```

这将比“来源”更通用。

# zend-framework - zend 表单的相同字段检查无法正常工作

> ID：12532235
> 
> 赞同：0
> 
> 时间：2012-09-21T14:12:01.730
> 
> 标签：zend-framework, zend-form

我创建了一个 zend 表单，我在其中输入了密码并确认密码。我使用相同的表单来添加和更新/编辑数据库。当我想添加新密码时，我的代码工作正常，但当我想编辑已经存在的密码时，我的代码不起作用。

我的表格：

```
 $password = new Zend_Form_Element_Password('password');
    $password->setRequired(true)
    ->addFilter('StringTrim')
    ->addFilter('StripTags')
    ->addValidator('NotEmpty', false, array('messages'=>'password cannot be empty'))
    ->addValidator('StringLength', false, array(5, 25, 'messages'=>'password must be 5-30 character'))
    ->setLabel('Password:');
    $this->addElement($password);

    $confirmPassword = new Zend_Form_Element_Password('confirmPassword');
    $confirmPassword->setRequired(true)
    ->addFilter('StringTrim')
    ->addFilter('StripTags')
    ->addValidator('NotEmpty', false, array('messages'=>'password don\'t match'))
    ->addValidator(new School_Validate_PasswordConfirmation())
    ->setLabel('Confirm Password');
    $this->addElement($confirmPassword); 
```

我的 School_Validate_PasswordConfirmation 类：

```
class School_Validate_PasswordConfirmation extends Zend_Validate_Abstract
{
     const NOT_MATCH = 'notMatch';

     protected $_messageTemplates = array(
     self::NOT_MATCH => 'Password confirmation does not match'
     );

     public function isValid($value, $context = null)
     {
         $value = (string) $value;
         $this->_setValue($value);

         if (is_array($context)) {
            if (isset($context['password'])&& ($value == $context['password']))
            {
                return true;
            }
         } elseif (is_string($context) && ($value == $context)) {
                return true;
           }

         $this->_error(self::NOT_MATCH);
         return false;
     }
} 
```

当我想编辑密码以外的其他字段时，它会给出以下错误消息。但是只有当我第一次输入用户时才会显示此消息。

错误：

```
password cannot be empty
password don't match 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:31:51.923

当表单处于编辑模式时，只需从元素中删除验证器。

```
public function someAction()
{
    $form = new Application_Form_YourForm();

    if ('in edit mode') {
        $form->getElement('password')->clearValidators();
        $form->getElement('confirmPassword')->clearValidators();
    }

    if ($this->getRequest()->isPost()) {
        $valid = $form->isValid($this->getRequest()->getPost());

        if ($valid) {
            // ...
        } else {
            // ...
        }
    }
} 
```

如果您允许某人通过填写这些字段来更改密码，请添加额外的检查以查看在编辑模式下是否在密码字段中输入了任何内容。如果他们填写了密码，则离开验证者，否则将其删除。

希望有帮助。

# javascript - 对 API 和 Web 使用统一身份验证

> ID：12532238
> 
> 赞同：2
> 
> 时间：2012-09-21T14:12:11.660
> 
> 标签：javascript, ruby-on-rails, api, authentication, backbone.js

技术栈

*   Ruby on Rails
*   RESTful JSON API
*   Backbone + Handlebar 模板 + 下划线 + JQuery
*   OAuth2

我正在开发一个 web 应用程序，我希望浏览器和控制器之间通过 JSON RESTful API 进行所有通信。我还想为不同的客户端应用程序（如移动应用程序和桌面应用程序）使用相同的 API。

我正在考虑 API 的 OAuth 身份验证机制。这与桌面和移动应用程序完美契合。但是，如果我也将 OAuth 用于前端；那么这基本上意味着最终用户将获得一个 access_token 并用于发出后续请求。

是否有一种干净的方法可以仅在 webapp 中处理会话超时，同时使用相同的 oauth 令牌策略进行身份验证，而不必用单独的持久会话包装它？

是否有任何好的实践或框架允许我们为客户端和 webapp 消费公开 API，同时满足每个人的特定细微差别？

我知道 Foursquare 目前对客户端和 Web 都使用 OAuth API；但好奇他们如何处理身份验证？

任何有关想法和实施的帮助将不胜感激。

# php - 在不知道内容是否存在的情况下浏览数组

> ID：12532244
> 
> 赞同：0
> 
> 时间：2012-09-21T14:12:35.583
> 
> 标签：php, arrays

所以，à 要做的是尝试显示数组的第 3 个元素。总是 3。但是，并不总是至少有 3 个元素。

所以，我所做的是使用 if ：

```
<?php for ($i = 0; $i <= 2; $i++) { ?>
  <?php if($post["Project"]["Post"][$i]){ ?>
    ...
  <?php } ?>
<?php } ?> 
```

但是，当至少没有 3 个条目时，我一直有“未定义的偏移量”错误。有解决方案的人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:15:42.730

```
foreach (array_slice($array, 0, 3) as $item) {
    echo $item;
    ...
} 
```

或者：

```
$i = 1;
foreach ($array as $item) {
    ...

    if ($i++ >= 3) {
        break;
    }
} 
```

`foreach`迭代数组总是更可取，正是因为您无法访问任何不存在的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:14:00.417

尝试以下操作：

```
<?php for ($i = 0; $i <= 2; $i++) {
   if(isset($post["Project"]["Post"][$i])){ ?>
   ...
<?php }} ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:14:06.720

用于`isset()`检查密钥是否存在。

```
<?php if(isset($post["Project"]["Post"][$i])){ ?> 
```

或者你可以使用：

```
$posts = $post["Project"]["Post"];
foreach ($posts as $i => $post) {
   //...
   if ($i === 2) break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:14:23.347

将其更改为`if (isset($post ...`

或者：

```
foreach (array_slice($post["Project"]["Post"], 0, 3)) { ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T14:14:28.410

```
 <?php for ($i = 0; $i <= 2; $i++) { 
  if( isset($post["Project"]["Post"][$i] )){ 
  ...
 } 
}   ?> 
```

您不需要`<?php...?>`为每一行添加标签。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T14:14:48.580

试试ifset。

```
<?php for ($i = 0; $i <= 2; $i++) { ?>
  <?php if(isset($post["Project"]["Post"][$i])){ ?>
    ...
  <?php } ?>
<?php } ?> 
```

或者，先进行计数也可能是一种方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T14:15:06.140

之前计算，首先满足哪个条件（数组的实际大小或最大数量 - 在您的情况下为 3），然后遍历这些元素：

```
$min = min( 3, count( $post["Project"]["Post"] ) );
for ($i = 0; $i < $min; $i++) {
 if($post["Project"]["Post"][$i]){
    ...
 }
} 
```

# android - Android 视图选项 - 直接绘制到画布或使用视图

> ID：12532252
> 
> 赞同：0
> 
> 时间：2012-09-21T14:12:53.007
> 
> 标签：android, android-layout

我正在将很久以前在 AIR 中编写的项目转换为原生 Android。在 AIR 中，在 x,y 坐标系中定位视图相当容易。虽然使用本机 Android，但我试图以正确的方式解决这个问题，但我不确定如何处理。

我的视图将由背景中的两个圆圈组成，这些圆圈内的小物体可以滚动。将在圆圈顶部绘制另一个视图，以使其看起来像是在圆圈上方有玻璃，将小物体困住。小物体被绑定到背景圆圈。

我想我真正要问的是画布是这里最好的方法，还是基于视图的布局也可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:21:27.523

听起来您最好的选择是使用`SurfaceView`. 这基本上是一个硬件加速画布。好处之一是您可以根据需要将标准小部件覆盖在其之上，以便您可以混合和匹配自定义和标准组件。 [这是一个](http://android-coding.blogspot.com/2011/05/drawing-on-surfaceview.html)网站链接，可引导您完成`SurfaceView`启动和运行

# c# - 具有自定义键类型的 Json.Net 序列化/反序列化字典类成员

> ID：12532254
> 
> 赞同：3
> 
> 时间：2012-09-21T14:13:02.213
> 
> 标签：c#, json.net

我在尝试使用内部字典正确序列化/反序列化对象时遇到问题。Dictionary 有一些自定义类型`PairIntKey` 作为键。

代码如下：

```
public class MyClassWithDictionary
    {
        private Dictionary<PairIntKey, List<int>> _myDictionary = new Dictionary<PairIntKey, List<int>>();

        public Dictionary<PairIntKey, List<int>> MyDictionary
        {
            set { _myDictionary = value; }
        }

        public void AddElementsToMyDictionary(PairIntKey key, List<int> value)
        {
            _myDictionary.Add(key, value);
        }
    }

    public class PairIntKey : IEquatable<PairIntKey>
    {
        private int _value1;

        private int _value2;

        public int Value1
        {
            get { return _value1; }
        }

        public int Value2
        {
            get { return _value2; }
        }

        public PairIntKey(int value1, int value2)
        {
            _value1 = value1;
            _value2 = value2;
        }

        public override int GetHashCode()
        {
            return _value1 + 29 * _value2;
        }

        public bool Equals(PairIntKey other)
        {
            if (this == other) return true;
            if (other == null) return false;
            if (_value1 != other._value1) return false;
            if (_value2 != other._value2) return false;
            return true;
        }

        public override string ToString()
        {
            return String.Format("({0},{1})", _value1, _value2);
        }

    } 
```

我这样序列化

```
public void SerializeAndDeserializeMyObject()
        {
            var myObject = new MyClassWithDictionary();
            myObject.AddElementsToMyDictionary(new PairIntKey(1, 1), new List<int> {5});

            var contractResolver = new DefaultContractResolver();
            contractResolver.DefaultMembersSearchFlags |= BindingFlags.NonPublic;

            string serializedItem = JsonConvert.SerializeObject(myObject,
                                                                Formatting.Indented,
                                                                new JsonSerializerSettings()
                                                                    {
                                                                        ContractResolver = contractResolver,

                                                                    });

            var deserializedItem = JsonConvert.DeserializeObject(serializedItem, typeof(MyClassWithDictionary),                                                                 new JsonSerializerSettings()
                                                                    {
                                                                        ContractResolver = contractResolver,

                                                                    });

            } 
```

`serializedItem`好像

```
{
  "_myDictionary": {
    "(1,1)": [
      5
    ]
  }
} 
```

问题是`deserializedItem`有空`MyDictionary`成员。一旦 Json.Net 不知道如何将字符串“（1,1）”转换为`PairIntKey`类实例，它就很明显了。如何为这种情况做一个合适的转换器？或者它不应该是转换器？

# java - 使用spring存储过程调用oracle存储过程

> ID：12532256
> 
> 赞同：3
> 
> 时间：2012-09-21T14:13:11.103
> 
> 标签：java, spring, stored-procedures, oracle9i, java-ee-5

我一直在尝试获取一段代码，它使用带有参数的 spring 和 oracle 存储过程，但发现它很难运行。指定的存储过程预期需要三个参数，但在出现错误时它需要四个参数。第四个参数是要返回的游标。

这是我的 Oracle(9i) 包规范：

```
CREATE OR REPLACE PACKAGE  pkg_data_load AS
procedure sp_atm_withdrawal(p_catermid IN VARCHAR2,
p_start_date IN VARCHAR2,p_end_date IN VARCHAR2,p_out out sys_refcursor);
END; 
```

下面是包体：

```
CREATE OR REPLACE PACKAGE BODY pkg_data_load
AS  
procedure sp_atm_withdrawal
(
p_catermid IN VARCHAR2,
p_start_date IN VARCHAR2,
p_end_date IN VARCHAR2,
p_out out sys_refcursor 
) as
v_start_date date := to_date(p_start_date,'yyyy/mm/dd');
v_end_date date := to_date(p_end_date,'yyyy/mm/dd');
begin
open p_out for select 
b.nam_branch BRANCH_NAME
, a.bcode brn_Code
, a.acct_no Acct_no
from table a, table b where b.cod_Cc_brn= a.cod_org_brn 
and a.cod_reply=0 
and b.flg_mnt_status='A' 
and a.cod_proc not in ( 312000, 382000, 311000, 381000) 
and a.cod_txn_literal<>'SCD' 
and a.ca_term_id in (
select ca_term_id from tablec where flg_mnt_status='A')
and a.dat_post_stl between v_start_date and  v_end_date
and a.ca_term_id = p_catermid;
end sp_atm_withdrawal;
END pkg_data_load; 
```

这是我的过程类的片段

```
public class AtmStoredProcedures extends StoredProcedure {
public AtmStoredProcedures(JdbcTemplate jdbcTemplate, String procedure)
{
super(jdbcTemplate,procedure);
AtmRowMapper rowMapper = new AtmRowMapper();
declareParameter(new SqlOutParameter("sys_refcursor",OracleTypes.CURSOR, rowMapper));
declareParameter(new SqlParameter("branch", Types.VARCHAR));
declareParameter(new SqlParameter("startDate", Types.VARCHAR));
declareParameter(new SqlParameter("endDate", Types.VARCHAR));
compile();
}
public Map getCashWithdrawals(String branch, String startDate, String endDate)
{
Map inParam = new HashMap();
inParam.put("branch", branch);
inParam.put("startDate", startDate);
inParam.put("endDate", endDate);
Map out = execute(inParam); // Call on parent class
return out;
}
} 
```

下面是我的DAO实现方法

```
public List<Atm> loadWithdrawal(String branch, String startDate, String endDate) {
if (this.jdbcTemplate == null) {
System.out.print("JDBC TEMPLATE IS NULL");
}
List<Atm> withdrawals = null;
try
{
AtmStoredProcedures st = new  AtmStoredProcedures(jdbcTemplate,"pkg_data_load.sp_atm_withdrawal");
Map results = st.getCashWithdrawals(branch, startDate, endDate);
withdrawals = (List<Atm>) results.get("sys_refcursor");
} catch (DataAccessException ex) {
System.out.print(ex.getMessage());
}
return withdrawals;
} 
```

成功编译后，我在运行时收到以下错误

```
CallableStatementCallback; bad SQL grammar 
[{call pkg_data_load.sp_atm_withdrawal(?, ?, ?, ?)}]; 
nested exception is java.sql.SQLException: 
ORA-06550: line 1, column 7: PLS-00306: wrong number or 
types of arguments in call to 'SP_ATM_WITHDRAWAL'ORA-06550: 
line 1, column 7: PLS-00306: wrong number or types of arguments 
in call to 'SP_ATM_WITHDRAWAL'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:44:14.853

您对 declareParameter() 的调用必须与 Oracle 存储过程的顺序相同。试试这个：

```
declareParameter(new SqlParameter("branch", Types.VARCHAR)); 
declareParameter(new SqlParameter("startDate", Types.VARCHAR)); 
declareParameter(new SqlParameter("endDate", Types.VARCHAR)); 
declareParameter(new SqlOutParameter("sys_refcursor",OracleTypes.CURSOR, rowMapper)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T12:48:38.250

## 为数据源配置创建一个 bean：

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
                <property name="locations"><list>
                <value>classpath:datasource.properties</value>          
                </list> 
                </property>
                <property name="ignoreResourceNotFound" value="true" />
                <property name="ignoreUnresolvablePlaceholders" value="true" />
                </bean>

                    <bean id="defaultDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
                        <property name="driverClassName" value="${jdbc.driverClassName}"/>
                        <property name="url" value="${jdbc.url}"/>
                        <property name="username" value="${jdbc.username}"/>
                        <property name="password" value="${jdbc.password}"/>
                        <property name="accessToUnderlyingConnectionAllowed" value="true"/>
                    </bean> 
```

## 参照注入数据源（applicationContext.xml）创建一个 dao：

```
 <bean id="testDao" class="com.test.dao.testDao">
            <property name="dataSource" ref="dataSource" />
            </bean> 
```

## 然后创建一个将 Oracle Array 转换为 java List 的类

```
 public class OracleLists implements SqlReturnType {
    public Object getTypeValue(CallableStatement cs, int paramIndex,int sqlType, String typeName) throws SQLException {    
    Object[] structs = (Object[]) ((ARRAY)cs.getObject(paramIndex)).getArray(); 
    List<String> po_list = new ArrayList<String>();
            for(int i=0;i<structs.length ;i++){
                po_list.add(String.valueOf(structs[i]));
            }
           return po_list;
        }
    } 
```

## 然后创建TestDao来调用procedure::

```
public class TestDao  {
private SimpleJdbcCall simpleJdbcCall;
public void setSimpleJdbcCall(SimpleJdbcCall simpleJdbcCall;) {
        this.simpleJdbcCall = simpleJdbcCall;
    }

public List<String> getTestParameter(Object object) {

MapSqlParameterSource in = new MapSqlParameterSource();
        in.addValue("IN_PARAM1", object.getInParam1);

        in.addValue("OUT_PARAM1", null,OracleTypes.ARRAY, object.getOutParam1);

Map<String, Object> result = simpleJdbcCall.execute(in);
        List<String> stringList = (List<String>) result.get("OUT_PARAM1");
        return stringList ;
    }

simpleJdbcCall= new SimpleJdbcCall(dataSource)
                .withSchemaName("TESTSCHEMA")
                .withCatalogName("TESTPACKAGE")
                .withProcedureName("TESTPROC")
                .declareParameters(
                        new SqlParameter("IN_PARAM",
                                OracleTypes.VARCHAR,
                                "IN_PARAM"),

                        new SqlInOutParameter(
                                "OUT_PARAM1",
                                OracleTypes.ARRAY,
                                TestOracleType,
                                new OracleLists()),

);
} 
```

# r - 在 clusterApply 中找不到函数

> ID：12532257
> 
> 赞同：14
> 
> 时间：2012-09-21T14:13:11.670
> 
> 标签：r

我有这个可重现的 R 片段

```
rm(list=ls())

library(doSNOW)

f <- function(a, b) a+b
g <- function(c) f(c*c, c+c)

v <- c(1, 2, 3, 4, 5, 6)

cl <- makeMPIcluster(1)
cat( clusterApply(cl, v, g) )
stopCluster(cl) 
```

我收到以下错误消息：

```
Error in checkForRemoteErrors(val) : 
  6 nodes produced errors; first error: could not find function "f" 
```

我在 Ubuntu 下使用 R 2.14.1。MPI 已安装并正在工作。

我知道 foreach 构造存在类似的问题，但它允许通过 .export 参数手动引用函数。对于 clusterApply，我找不到任何类似的东西。有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-21T14:29:42.360

您的功能没有发送给工人。也许最好的方法是直接导出函数：

```
clusterExport(cl, list("f", "g")) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-11T13:30:31.910

我认为您的问题与“可变范围”有关。在 Mac/Linux 上，您可以选择使用自动包含所有环境变量的 makeCluster(no_core, type="FORK")。在 Windows 上，您必须使用仅加载基本包的并行套接字集群 (PSOCK)。因此，您始终可以准确指定包含哪些变量和库以使并行函数正常工作。clusterExport() 和 clusterEvalQ() 是必要的，以便函数分别查看所需的变量和包。请注意，在 clusterExport 之后对变量的任何更改都将被忽略。回到你的问题。您必须按以下方式使用：

```
rm(list=ls())
library(doSNOW)
f <- function(a, b) a+b
g <- function(c) f(c*c, c+c)
v <- c(1, 2, 3, 4, 5, 6)
cl <- makeMPIcluster(1)
# insert code here
clusterExport(cl, list("f", "g"))
# insert clusterEvalQ(cl, library(...)) if you need library for function to parallel
cat( clusterApply(cl, v, g) )
stopCluster(cl) 
```

# file-io - android ndk 数据保存/加载

> ID：12532259
> 
> 赞同：4
> 
> 时间：2012-09-21T14:13:25.023
> 
> 标签：file-io, android-ndk, native-activity

我正在将 PC OpenGL 应用程序移植到 Android 上。我选择使用 NDK android_native_app_glue 框架的东西。据我了解，它可以让我继续使用 C++，甚至不用编写任何 JAVA 代码行。这听起来很有希望。

对我来说，第一个不清楚的是数据保存/加载。我的应用程序的数据格式是二进制的，我的原始 PC 相关代码使用普通的“stdio.h”文件操作：fopen、fread、fwrite 等来创建、写入和读取“mygame.bin”文件。如何将其移植到 Android 上？

谷歌搜索后，我发现我必须存储然后使用“java环境”变量：

```
JNIEnv *g_jniEnv = 0;
void android_main(struct android_app* state) {
    g_jniEnv = state->activity->env;
} 
```

但是，我仍然没有意识到如何使用这个 g_jniEnv 来执行文件操作。

**更新：** 好的，我发现在Java中，可以如下进行数据保存：

```
String string = "hello world!";
FileOutputStream fos = openFileOutput("mygame.bin", Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

所以我的问题是：给定一个指向 JNIEnv 的指针，我如何用 C++ 重写这个代码片段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T17:42:05.617

您仍然可以在 NDK 项目中使用 stdio.h。#include 并删除。

唯一的技巧是获取应用程序私有数据文件夹的路径。它可以`state->activity->internalDataPath`在`android_main`. 在该路径之外，应用程序没有文件系统权限。

您`JNIEnv`最终可能需要一种或另一种方式。整个 Java API 没有为本地子系统镜像；所以坚持下去`env`。但是本机文件 I/O 就在那里。

# iphone - 当超级视图不同时，如何在 iphone 中为视图的帧更改设置动画......？

> ID：12532260
> 
> 赞同：1
> 
> 时间：2012-09-21T14:13:30.563
> 
> 标签：iphone, objective-c, ios, uiviewanimation

我在 view1 上有一个按钮，我想将其移动到 view2 ，但顶部有动画。我的 view1 位于屏幕的上半部分，而 view2 位于屏幕的下半部分。如您所见，superview 会发生变化。我尝试了多种方法，但按钮只是从左侧或右侧出现，而不是从其原点出现。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:19:15.213

[`clipsToBounds`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/clipsToBounds)通过设置为使超级视图不剪辑其内容`NO`。

然后为按钮的框架设置动画，动画完成后，将其从 view1 中移除并将其添加到 view2。

```
[UIView animateWithDuration:0.2f
    animations:^{
        button.frame = newFrame;
    }
    completion:^(BOOL finished){
        CGRect rect = [view1 convertRect:button.frame toView:view2];
        [button removeFromSuperview];
        [button setFrame:rect];
        [view2 addSubView:button];
    }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:17:10.537

我已经使用以下代码完成了这个结果：

```
CGRect tabFrame = tab.frame;
CGRect viewFrame = [mainWindow convertRect:tabFrame toView:currentView];
tab.frame = viewFrame;
[tab removeFromSuperview];
[currentView addSubview:tab]; 
```

此代码将`tab`' 帧从`mainWindow`转换为`currentView`. 除了[这个](https://stackoverflow.com/questions/12478204/cgrect-conversion-bug)错误之外，这非常有效。如果您没有遇到该问题，或者找到解决方法，我将不胜感激。

从那时起，您需要做的就是应用您的正常动画。

# internet-explorer-9 - 尽管出现 80092004 错误，如何在 Windows 7 上安装 ie9 (Internet Explorer 9)

> ID：12532261
> 
> 赞同：3
> 
> 时间：2012-09-21T14:13:34.590
> 
> 标签：internet-explorer-9, windows-7-x64, bsod, windows-update

不幸的是，出于测试目的，我需要使用 Internet Explorer 9，并且我遵循了 MS Answers 超级有用的故障排除指南，并搜索了谷歌，但仍然无法安装它。

还尝试了 IETester、Utilu IE Collection、Triple Booting 一个试用版的 windows。

所有的论坛，最终都以“格式化磁盘，重新安装windows”的解决方案而告终，或者没有回复。重新安装 Windows 不是一个可行的选择！

我正在使用 Windows 7 Professional x64 Service Pack 1（双启动）。

Windows 更新失败并显示：

```
"WindowsUpdate_80092004" "WindowsUpdate_dt000" 
```

：根据“获得有关此错误的帮助”。但是，如果您查看事件日志，它会显示：

```
0x80070643 
```

: 这令人困惑，因为它不是同一个错误。为什么，窗户，为什么？

有一个微软修复它你可以下载它在更新失败后清理（为什么这不是由 Windows 更新自动完成的？？）运行它之后，在网络安全模式下重新启动，并直接从独立安装程序安装它，ie9 “安装”，但是如果您运行它并单击“帮助> 关于”，它会显示它的 IE8，然后在计算机出现 BSOD（蓝屏死机）并且重新启动时，噗！又是 IE8。

那么，如何安装ie9呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T18:24:41.217

***我终于找到了解决方案！***

以管理员身份运行 cmd.exe：

```
FORFILES /P %WINDIR%\servicing\Packages /M Microsoft-Windows-InternetExplorer-*9.*.mum /c "cmd /c echo Uninstalling package @fname && start /w pkgmgr /up:@fname /norestart" 
```

（来自： http: [//support.microsoft.com/kb/2579295/en-us#LetMeFixItMyselfAlways](http://support.microsoft.com/kb/2579295/en-us#LetMeFixItMyselfAlways)）

测试：

*   Windows 7 专业版 N SP1

症状是：

*   80092004 Windows 更新错误
*   手动安装（IE9-Windows7-x64-enu.exe）安装失败。
*   添加/删除中的 Windows 功能显示“Internet Explorer 9”，但启动 IE 时显示版本 8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T19:11:14.667

令人惊讶的是（即在尝试了许多不同的其他建议修复之后）批准的答案解决了我安装 IE9 的问题，但不是 IE10，所以我尝试将命令中的 9 更改为 10，然后（甚至没有重新启动）IE10独立安装程序突然工作。

这是我用于 IE10 的命令 - 至少为我修复了可怕的 9C59 错误：

```
FORFILES /P %WINDIR%\servicing\Packages /M Microsoft-Windows-InternetExplorer-*10.*.mum /c "cmd /c echo Uninstalling package @fname && start /w pkgmgr /up:@fname /norestart" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:50:54.307

Windows 对于安装了它认为是错误版本的软件可能会非常讨厌。

也许您最好的答案是安装**XP Mode**。作为 Windows 7 Professional x64 的用户，您有资格免费下载和安装 Windows XP Mode。

XP Mode 实际上是 Microsoft 的 PC 仿真软件“Virtual PC”，已安装并设置了**完整且完全许可的 Windows XP 版本。**XP Mode 的目的是为人们提供一种不方便（是的，我的意思是不方便）的方式来运行旧的 16 位和不兼容的 32 位程序，同时鼓励他们“升级”远离完美的软件（尤其是命令行软件）并强制他们购买新的 64 位产品。（通过这一举措，微软消除了 30 年来他们认为削弱 DRM 以及他们对 Windows 的愿景和控制的软件。）

这有点占用内存，可能需要一段时间才能启动，并尝试自行安装以在后台运行，但右键单击并关闭任务栏中的图标几次，它就会停止这样做。

关于它的一件非常好的事情是，您可以设置几台不同的机器，每台机器上安装不同的东西，而不会占用安装单独操作系统的所有驱动器空间。另外，如果您使用软管，您可以删除它的`.vsv`文件并返回到工作副本，减去您为软管所做的任何事情（除非您对操作系统进行了更改并重新启动到软管操作系统。）

无论如何，可以在这里找到：http:
[//windows.microsoft.com/is-IS/windows7/products/features/windows-xp-mode](http://windows.microsoft.com/is-IS/windows7/products/features/windows-xp-mode)

您需要运行 Windows 7 Enterprise、Professional 或 Ultimate 的合法版本，并使用 Internet Explorer 才能下载它。

因为，您知道，没有其他人有正当理由运行 16 位程序。（我吐槽了吗？）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-04-29T00:15:46.387

我确认最佳答案在 Windows 7 上也适用于 IE11，这是 11 的调整代码：

FORFILES /P %WINDIR%\servicing\Packages /M Microsoft-Windows-InternetExplorer- *11..mum* /c "cmd /c echo 卸载包@fname && start /w pkgmgr /up:@fname /norestart"

# select - 视觉隐藏特定选项（选择下拉框）

> ID：12532262
> 
> 赞同：0
> 
> 时间：2012-09-21T14:13:37.153
> 
> 标签：select, options, shopify

我的产品有两个选项，例如第一个 options-color ，第二个 options-size 假设颜色 1 有 6 种不同的尺寸，所以第一个选项标题将是 1、1、1、1、1、1，第二个选项（尺寸）标题将是像 1 英寸，2 英寸，3 英寸等在这种情况下，我如何隐藏第一个选项（颜色）下拉选择框并只显示第二个选项（尺寸）下拉框而不是显示第一个选项（颜色）下拉框我想放一些像这样的文字“你的颜色：1”然后只显示第二个选项下拉框（大小选择器下拉）所以最后它看起来像

你的颜色：1 [尺寸选择器下拉框-有六个选项标题]

我知道我可以删除 shopify 管理页面中的第一个选项，但由于某种原因，我不能简单地删除第一个选项，我必须隐藏它们

请任何人...

非常感谢你们提前......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:36:50.510

我会考虑使用 Javascript 来解决这个问题。

让我们先从显示颜色开始。我认为最简单的方法是在产品模板中创建一个元素并将其最初隐藏：

```
<p id="color-label" style="display:none">{{ product.variants.first.option1 }}</p> 
```

选择框是在创建 OptionSelectors 时通过 option_selection.js 中的辅助[方法生成的：](http://wiki.shopify.com/Tutorial_on_editing_existing_theme_to_use_products_with_multiple_options)

```
new Shopify.OptionSelectors("product-select", ... 
```

第一个生成的下拉列表将被分配一个选择元素 id +“-option-0”的 id（在这种情况下是*product-select-option-0*），第二个将具有选择元素 id +“-option-1”和很快。每个选择都包装在一个 div.selector-wrapper 中。

*所以，把它们放在一起......在调用new Shopify.OptionSelectors*之后插入类似这样的内容。这假设 jQuery 是可用的。基本上它正在检查颜色下拉菜单是否有 1 个元素，如果有，它会隐藏选择元素并显示颜色：

```
if (jQuery('#product-select-option-0 option').size() == 1) {
  jQuery('#product-select-option-0').parent('.selector-wrapper').hide();
  jQuery('#color-label').show();
} 
```

# url - Apache - 本地主机域以 http://folder.local 访问文件夹

> ID：12532263
> 
> 赞同：4
> 
> 时间：2012-09-21T14:13:45.647
> 
> 标签：url, xampp, virtualhost

我在 Ubuntu 上运行 XAMPP，我想为我的项目创建一个虚拟主机，这样我就有一个 tld 分配给我的服务器根目录（例如 .local），并且其中的文件夹可以通过 URL 访问`http://foldername.local`。

`http://someotherdomain.local`此外，使用 .htaccess重定向到`/foldername`服务器根目录中的路径会复杂多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T10:55:09.643

我已经设法自己做到了。可以这样做，但是您需要安装*DNS 服务器*。

> 注意：我决定使用 .dev 作为我的本地域，因此在以下示例中，该`dev`部分将引用我选择的域。记住这一点。

### 安装和配置 DNS 服务器

它是哪一个无关紧要，但您需要知道如何正确配置它。配置取决于您选择的 DNS 服务器。我去了***dnsmasq***。它重量轻，非常方便。

> *Ubuntu*用户需要注意的一点是，从 Ubuntu 11.10 开始，已经安装了一个名为*dnsmasq-base*的轻量级版本，安装时会产生冲突。我不会在这里解释如何解决这个问题，因为其他地方有很多说明。

安装 DNS 服务器后，应将其配置为侦听与所需域相同的地址。

> 在我使用*dnsmasq*的情况下，这意味着打开`/etc/dnsmasq.conf`第 62 行并将其更改为：`address=/dev/127.0.1.1`

### 配置网络服务器

假设您已经安装了某种服务器软件，您需要进行一些调整。

首先，您应该编辑`hosts`文件以将所需域映射到本地主机。

> 在我的 XAMPP for Linux on Ubuntu 的情况下，这意味着我打开 `/etc/hosts`并更改了行
> 
> ```
> 127.0.0.1 localhost
> 127.0.1.1 tomica-ubuntu 
> ```
> 
> 到
> 
> ```
> 127.0.0.1 localhost
> 127.0.1.1 tomica-ubuntu dev 
> ```
> 
> 这将重定向`http://dev`到我的本地服务器。

接下来，使用几个特定选项创建一个新的虚拟主机，如下所示：

> 就我而言，这意味着 `/opt/lampp/etc/extra/httpd-vhosts.conf`在文件末尾打开并添加它：
> 
> ```
> <VirtualHost *:80>
>     DocumentRoot "/opt/lampp/htdocs/dev"
>     ServerName dev
>     ServerAlias *.dev
> 
>     <Directory /opt/lampp/htdocs/dev>
>         AllowOverride All
>     </Directory>
> </VirtualHost> 
> ```
> 
> 为简洁起见，我不会解释这段代码，因为文档也是可用的。

完成所有这些之后，启动**您的 DNS 和 Web 服务器，或者**如果它们已经在运行，则重新启动它们。

### 配置 .htaccess

打开新创建主机的根文件夹。那是您的 . 就我而言，那是`/opt/lampp/htdocs/dev`. 在那里，创建一个`.htaccess`文件并将其放入其中：

```
# Specify order of index files; if none exist, show files list
  DirectoryIndex index.php index.html

# Interpret .html files as .php scripts
  AddHandler php5-script .php .html

# THE MAGIC - Redirect subdomains of .dev to their respective folders
  RewriteEngine on
  Options +FollowSymlinks
  RewriteBase /

  RewriteCond %{HTTP_HOST} !^www\.dev$ [NC]
  RewriteCond %{HTTP_HOST} ^(www\.)?(.*)\.dev(.*)?$ [NC]
  RewriteRule !^%2\.dev%3?/$ http://dev/%2%{REQUEST_URI}/ [P] 
```

同样，解释所有这些需要太多的空间和时间。只需复制/粘贴，别担心 :) 但不要忘记将 my 更改`dev`为您为域名选择的任何内容。

***就是这样！***现在，您应该可以使用 、 、 等地址浏览您`http://folder.dev/`的`http://www.folder.dev`项目`http://folder.dev/file.html`了`http://folder.dev/subfolder/document.txt`。

作为奖励，我将再添加一个建议。我这样做的原因是我可以更轻松地开发我的 Laravel 和 WordPress 项目。但是，使用 Laravel，您应该将 url 重定向`http://lvproject.dev/`到`/lvproject/public`. 这是`.htaccess`启用此功能的文件。打开您的`/lvproject`文件夹，创建一个`.htaccess`文件并将此代码放入其中：

```
RewriteBase /lvproject/

RewriteCond %{REQUEST_URI} lvproject/index\.php [NC]
RewriteRule index\.php(.*)$ public/ [L] 
```

该方案的两个缺点是：1）`RewriteBase`需要为每个新项目重新设置规则（即您需要`.htaccess`在每个新项目中手动创建）；2）你的项目可以从两者中获得`http://lvproject.dev/`，`http://lvproject.dev/public/`这并不酷，但我现在懒得修复它：）

# xcode - 基于 Xcode 文档的窗口在关闭时不会释放资源

> ID：12532268
> 
> 赞同：2
> 
> 时间：2012-09-21T14:14:01.533
> 
> 标签：xcode, cocoa, memory-leaks

在创建基于文档的应用程序时，我注意到关闭窗口时内存分配不会减少 - 无论是否启用了 ARC。为了演示，只需使用 Xcode 创建一个基于通用文档的应用程序。然后选择产品/配置文件并选择泄漏...当您的应用程序统计信息打开几个新窗口时 - 正如人们所期望的那样，每个新窗口的内存分配都会增加。但是，如果您关闭窗口，这些资源不会被释放。探查器不会将这些标记为泄漏 - 我假设窗口仍然具有活动资源，但是当用户打开和关闭窗口时，内存将被有效消耗（对于每个窗口都有与之关联的其他对象的实际应用程序来说，速度要快得多. 我的问题是——Xcode 应用程序最终会释放这个内存池吗？还是这些孤立的关闭窗口总是会保留内存？这是一个问题，还是没有？

我已经看到用户创建自己的窗口控制器的非基于文档的应用程序的类似问题......但我不确定这些评论是否与基于文档的模型相关或优雅 [http://www.cocoabuilder.com/存档/可可/119250-nswindowcontroller-with-nsobjectcontroller-doesn-dealloc.html](http://www.cocoabuilder.com/archive/cocoa/119250-nswindowcontroller-with-nsobjectcontroller-doesn-dealloc.html)

以及这个页面 [http://theocacao.com/document.page/18](http://theocacao.com/document.page/18)

# matlab - 在 Matlab 中防止激进的自动缩放

> ID：12532277
> 
> 赞同：4
> 
> 时间：2012-09-21T14:14:44.463
> 
> 标签：matlab, plot, scale, matlab-figure

假设我有以下 Matlab 代码：

```
figure;
a=plot(1:10); %A
pause();
set(a,'ydata',1:2:20); %B
pause();
set(a,'ydata',1:10); %C 
```

在 (A) 处，我的绘图的垂直范围是 [1,10]。
在 (B) 处，我的绘图的垂直范围是 [0,20]。
在 (C) 处，垂直范围再次为 [1,10]。

我喜欢情节从步骤（A）自动缩放到（B）。我不喜欢从 (B) 到 (C) 的自动缩放——它让事情跳得太多。

有没有办法让情节的规模扩大但从不缩小？

在我看来，这看起来像：

```
set(gca,'XLimMode','auto_maxever'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:16:36.883

据我所知，Matlab 没有您描述的功能，但是...

您可以通过执行以下命令准确设置 和 的限制`X`：`Y`

```
set(gca,'XLim',[x1 x2], 'YLim',[y1 y2]); 
```

相同命令的快速别名是：

```
axis([xmin xmax ymin ymax]); 
```

您还可以通过将`XLimMode`and更改`YLimMode`为`Auto`来随时“冻结”限制`Manual`：

```
figure();
a=plot(1:10); %A
pause();
set(a,'ydata',1:2:20); %B
pause();
set(gca,'XLimMode','manual');
set(gca,'YLimMode','manual');
set(a,'ydata',1:10); %C 
```

或者您可以使用另一个别名，它的作用完全相同：

```
axis('manual'); 
```

如果连续采集数据，请考虑在每次更新之前保存轴限制，然后执行手动缩放。

# asp.net - Ajax AutoCompleteExtender - 为单个项目设置样式？

> ID：12532278
> 
> 赞同：3
> 
> 时间：2012-09-21T14:14:44.773
> 
> 标签：asp.net, ajax, ajaxcontroltoolkit

**精简版：**

我想知道如何更改自动完成扩展器生成的单个项目的 css 样式，但该控件只允许我将所有项目的样式设置为一个组。

**长版：**

我有一个使用 AutoCompleteExtender 的搜索框。当您键入时，搜索结果会在搜索框下方的框中弹出。

```
<asp:TextBox ID="txtSearch" OnChange="javascript: Changed(this);"  runat="server" style="width:360px;" />
<cc1:AutoCompleteExtender ID="Search_AutoCompleteExtender" runat="server" 
                    BehaviorID="Search_AutoCompleteExtender"
                    MinimumPrefixLength="3" 
                    DelimiterCharacters="" 
                    Enabled="True" 
                    ServicePath="~/Services/Search.asmx" 
                    ServiceMethod="GetResults"
                    TargetControlID="txtSearch"
                    FirstRowSelected="true"
                    CompletionListItemCssClass="AutoExtenderList"
                    CompletionListHighlightedItemCssClass="AutoExtenderHighlight"
                    CompletionInterval="1" 
                    EnableCaching="false"
                    CompletionSetCount="20"
                    CompletionListElementID="autocompleteDropDownPanel1" />

<asp:Panel ID="autocompleteDropDownPanel1" runat="server" ScrollBars="Vertical" Height="250" style="overflow-y:scroll;position:absolute;left:0;top:0" / 
```

`CompletionListItemCssClass`AutoCompleteExtender 有一个属性可以为每个项目和`CompletionListHighlightedItemCssClass`突出显示的项目分配一个 CSS 类。我想知道的是如何根据某些标准单独设置特定项目的样式。

在我的服务中，我正在运行一个存储过程，稍微处理一下结果，然后将一个字符串数组返回给自动完成扩展器。我已将该存储过程设置为在每条记录中包含某个标志。我想使用该标志来突出显示搜索结果的某些行（例如，将文本变为红色）。

我怎样才能做到这一点？我似乎找不到任何方法来访问单个项目以更改其样式。

我一直在四处寻求帮助，却空手而归。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:52:10.473

默认情况下不支持此类行为，但您可以调整 AutoCompleteExtender 源以添加此功能。实际上有两种方法可用：第一种是扩展对象，从 Web 服务返回到扩展器，并为项目 css 类提供新属性，并在扩展器客户端脚本中应用此属性值。第二种可用的方法是为项目创建引入新事件，在页面上处理它并根据它的值在项目上应用自定义逻辑。让我们在这里实现这两种方法。首先，如果您还没有下载 AjaxControlToolkit 源代码并打开`Client/MicrosoftAjax.Extended/AutoComplete/AutoCompleteBehavior.pre.js`文件，则需要先下载它。在此文件中，您需要更改`_update`方法如下：

```
_update: function (prefixText, completionItems, cacheResults) {
    /// <summary>
    /// Method to update the status of the autocomplete behavior
    /// </summary>
    /// <param name="prefixText" type="String" DomElement="false" mayBeNull="true" />
    /// <param name="completionItems" type="Object" DomElement="false" mayBeNull="true" />
    /// <param name="cacheResults" type="Object" DomElement="false" mayBeNull="true" />
    /// <returns />       
    if (cacheResults && this.get_enableCaching()) {
        if (!this._cache) {
            this._cache = {};
        }
        this._cache[prefixText] = completionItems;
    }

    // If the target control loses focus or 
    // if the value in textbox has changed before the webservice returned
    // completion items we don't need to show popup 
    if ((!this._textBoxHasFocus) || (prefixText != this._currentCompletionWord())) {
        this._hideCompletionList();
        return;
    }

    if (completionItems && completionItems.length) {
        this._completionListElement.innerHTML = '';
        this._selectIndex = -1;
        var _firstChild = null;
        var text = null;
        var value = null;
        var cssClass = null;
        var dataItem = null;

        //remove this line if you don't need to implement itemDataBinding event
        var itemDataBindingHandler = this.get_events().getHandler('itemDataBinding');

        for (var i = 0; i < completionItems.length; i++) {
            // Create the item                
            var itemElement = null;
            if (this._completionListElementID) {
                // the completion element has been created by the user and li won't necessarily work
                itemElement = document.createElement('div');
            } else {
                itemElement = document.createElement('li');
            }

            // set the first child if it is null
            if (_firstChild == null) {
                _firstChild = itemElement;
            }

            // Get the text/value for the item
            try {
                dataItem = Sys.Serialization.JavaScriptSerializer.deserialize( completionItems[i] );
                if (dataItem && dataItem.First) {
                    // Use the text and value pair returned from the web service
                    text = dataItem.First;
                    value = dataItem.Second;

                    if (dataItem.CssClass) {
                        cssClass = dataItem.CssClass;
                    }
                }
                else {
                    // If the web service only returned a regular string, use it for
                    // both the text and the value
                    text = completionItems[i];
                    value = text;
                }
            } catch (ex) {
                text = completionItems[i];
                value = completionItems[i];
            }

            // Set the text/value for the item
            // ShowOnlyCurrentWordInCompletionListItem support
            var optionText = this._showOnlyCurrentWordInCompletionListItem ? text : this._getTextWithInsertedWord(text);
            itemElement.appendChild(document.createTextNode(optionText));
            itemElement._value = value;
            itemElement.__item = '';

            if (this._completionListItemCssClass) {
                Sys.UI.DomElement.addCssClass(itemElement, this._completionListItemCssClass);
            } else {
                var itemElementStyle = itemElement.style;
                itemElementStyle.padding = '0px';
                itemElementStyle.textAlign = 'left';
                itemElementStyle.textOverflow = 'ellipsis';
                // workaround for safari since normal colors do not
                // show well there.
                if (Sys.Browser.agent === Sys.Browser.Safari) {
                    itemElementStyle.backgroundColor = 'white';
                    itemElementStyle.color = 'black';
                } else {
                    itemElementStyle.backgroundColor = this._textBackground;
                    itemElementStyle.color = this._textColor;
                }
            }

            if (cssClass) {
                Sys.UI.DomElement.addCssClass(itemElement, cssClass);   
            }

            //remove this if you don't need to implement itemDataBinding event
            if (itemDataBindingHandler) {
                itemDataBindingHandler(itemElement, dataItem || completionItems[i]);
            }

            this._completionListElement.appendChild(itemElement);
        }
        var elementBounds = $common.getBounds(this.get_element());
        this._completionListElement.style.width = Math.max(1, elementBounds.width - 2) + 'px';
        this._completionListElement.scrollTop = 0;

        this.raisePopulated(Sys.EventArgs.Empty);

        var eventArgs = new Sys.CancelEventArgs();
        this.raiseShowing(eventArgs);
        if (!eventArgs.get_cancel()) {
            this.showPopup();
            // Check if the first Row is to be selected by default and if yes highlight it and updated selectIndex.
            if (this._firstRowSelected && (_firstChild != null)) {
                this._highlightItem(_firstChild);
                this._selectIndex = 0;
            }
        }
    } else {
        this._hideCompletionList();
    }
} 
```

如果您不打算使用新的客户端事件来实现场景，那么这就是您需要的项目中的所有更改。您已经可以从 Web 服务器方法传递项目 css 类以及项目的文本和值。唯一的区别是使用自定义类而不是 AjaxControlToolkit 控件中默认使用的 Pair：

```
[WebMethod]
public string[] GetCompletionList(string prefixText, int count)
{
    var serializer = new JavaScriptSerializer();
    var items = Enumerable.Range(1, count)
        .Select(id => serializer.Serialize(
                        new
                        {
                            Second = id,
                            First = prefixText + "_" + Guid.NewGuid().ToString(),
                            CssClass = id % 2 == 0 ? "even" : "odd"
                        }));

    return items.ToArray();
} 
```

如果您还想实现自定义客户端事件（确实提供了更大的灵活性），那么您需要向 AutoCompleteBehavior.pre.js 文件添加更多代码。在 Sys.Extended.UI.AutoCompleteBehavior.prototype 对象中的某处添加代码：

```
add_itemDataBinding: function (handler) {
    this.get_events().addHandler('itemDataBinding', handler);
},

remove_itemDataBinding: function (handler) {
    this.get_events().removeHandler('itemDataBinding', handler);
}, 
```

此外，打开`Server/AjaxControlToolkit/AutoComplete/AutoCompleteExtender.cs`文件并将此属性添加到 AutoCompleteExtender 类：

```
/// <summary>
/// Handler to attach to the client-side item data binding event
/// </summary>
[DefaultValue("")]
[ExtenderControlEvent]
[ClientPropertyName("itemDataBinding")]
public string OnClientItemDataBinding
{
    get { return GetPropertyValue("OnClientItemDataBinding", string.Empty); }
    set { SetPropertyValue("OnClientItemDataBinding", value); }
} 
```

重建项目后，您可以使用具有附加功能的自定义 AjaxControlToolkit 程序集。

```
<script type="text/javascript">
    function itemDataBinding(item, dataItem) {
        var value = parseInt(dataItem.Second, 10);
        if (!isNaN(value)) {
            item.className = value % 2 == 0 ? "even" : "odd";
        }
    }
</script>

<ajaxToolkit:AutoCompleteExtender runat="server" ID="autoComplete1" 
    TargetControlID="myTextBox" ServicePath="AutoComplete.asmx" ServiceMethod="GetCompletionList" 
    OnClientItemDataBinding="itemDataBinding"> 
```

# c# - 正在运行任务的关闭表单

> ID：12532281
> 
> 赞同：5
> 
> 时间：2012-09-21T14:14:49.107
> 
> 标签：c#, winforms, task, task-parallel-library

我有一个 WinForms 应用程序，它由一个主 UI 线程和 4 个任务组成。我的主表单有一个私有成员级别变量，如下所示：

```
private bool keepThreadsRunning = false; 
```

在我的主窗体的 Load() 事件中，我有以下内容：

```
keepThreadsRunning = true;
var task1Worker = Task.Factory.StartNew(() => DoStuff1());
var task2Worker = Task.Factory.StartNew(() => DoStuff2());
var task3Worker = Task.Factory.StartNew(() => DoStuff3());
var task4Worker = Task.Factory.StartNew(() => DoStuff4()); 
```

在我的每个 DoStuff() 方法中，我基本上都有这个：

```
while (keepThreadsRunning)
{
  // do work here
  Thread.Sleep(30000); // a couple of my tasks only need to run every 30 seconds or so
} 
```

最后，在我的 Form_Closing() 事件处理程序中，我有以下内容：

```
keepThreadsRunning = false;
this.Close(); 
```

在任务管理器中查看我的应用程序，当我关闭表单时，似乎该过程正在结束，但我对这四个任务有点困惑。我对 this.Close() 的调用是否真的导致这些任务终止（即使它们在发生时在 Thread.Sleep() 调用中）？有没有比我现在编写代码更好的方法来实现这一点？

编辑 - 我已经简要地查看了任务取消（当我的应用程序退出时），但我的理解是我的任务需要定期检查取消令牌以确定它们是否已被取消。鉴于我的一些任务需要每 30 秒运行一次，我无法弄清楚如何实现 30 秒等待（当前是 Thread.Sleep()）并且仍然让任务检查取消令牌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:21:15.277

而不是使用布尔值 and `Thread.Sleep()`，而是使用[WaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)，特别是[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)，创建如下：

```
var threadTerminationHandle = new ManualResetEvent(false); 
```

在你的线程中：

```
do {
  // do work here
} while (!threadTerminationHandle.WaitOne(TimeSpan.FromSeconds(30)) 
```

这将等到设置 WaitHandle 或 30 秒后，以较早者为准。

在您的表格中：

```
threadTerminationHandle.Set();
Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:25:25.203

首先，关闭主 UI 线程将终止您的其他任务。如果您需要它们继续运行，可以考虑在单独的控制台应用程序或 Windows 服务中运行它们。

即使您在完成运行需要运行的方法时找到了延迟关闭表单的方法，这也只有在最终用户以您想要的方式关闭表单时才有效，并且 Windows 是 Windows 有一百万个和关闭应用程序的一种方法，因此不能保证这将起作用。

对于每 x 秒异步运行一个方法，您可以只为整个事情使用一个计时器，如下所示：

```
using System;
using System.Timers;
using System.Windows.Forms;

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var timer1 = new System.Timers.Timer { Interval = 30000, Enabled = true };
            var timer2 = new System.Timers.Timer { Interval = 20000, Enabled = true };
            var timer3 = new System.Timers.Timer { Interval = 10000, Enabled = true };
            var timer4 = new System.Timers.Timer { Interval = 5000, Enabled = true };

            timer1.Elapsed += timer1_Elapsed;
            timer2.Elapsed += timer2_Elapsed;
            timer3.Elapsed += timer3_Elapsed;
            timer4.Elapsed += timer4_Elapsed;
        }

        void timer4_Elapsed(object sender, ElapsedEventArgs e)
        {
            //do work here
        }

        void timer3_Elapsed(object sender, ElapsedEventArgs e)
        {
            //do work here
        }

        void timer2_Elapsed(object sender, ElapsedEventArgs e)
        {
            //do work here
        }

        void timer1_Elapsed(object sender, ElapsedEventArgs e)
        {
            //do work here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T18:00:28.477

当您关闭应用程序时，任务将相应地关闭，因为任务是在线程池的*后台线程下处理的。*因此，您无需定期检查取消令牌以确定它们是否已被取消

# c# - 如何在 WinRT 中使用 INotifyPropertyChanged？

> ID：12532285
> 
> 赞同：0
> 
> 时间：2012-09-21T14:14:58.570
> 
> 标签：c#, xaml, windows-runtime, datacontext, inotifypropertychanged

我是一个新手，只是学习`DataContext`MVVM 模型的基础知识。我现在有一个网格绑定到实现 的视图模型对象`INotifyPropertyChanged`，但似乎`UpdateSourceTrigger`（所有 WPF 教程告诉我使用）不适用于 WinRT / Metro Style 应用程序！

那我该如何实现 INotifyPropertyChanged 呢？

我已经走到了尽头。我几乎一整天都在研究最基本的应用程序示例，只是在单击某些内容后尝试更新网格。到目前为止，我设法做到这一点的唯一方法是创建一个全新的视图模型实例并重新分配`DataContext`我*知道*是错误的

更新：

我取得了一些进展，但事情变得非常奇怪。我有一个视图模型，带有一个通用的项目列表。项目列表与 PropertyChangedEventHandler 相连。如果我用一个新集合替换整个集合，则列表视图会更新。

```
model.Items = new List<DataItem>{ new DataItem{ Title = "new item" }}; 
```

这将产生一个包含上述项目的项目列表。但是，如果我尝试添加一个项目，没有任何反应

```
model.Items.Add(new DataItem{ Title = "added item" }); 
```

我还尝试创建一个添加项目并专门触发 PropertyChanged 的​​方法，但这也不起作用

这就是它变得奇怪的地方。接下来我尝试了这段代码。

```
model.Items.Add(new DataItem { Title = "added item" });
model.Items = new List<DataItem> { new DataItem { Title = "new item" }}; 
```

这会产生一个包含两个项目的列表：

```
- new item
- added item 
```

怎么会这样？代码说，“添加一项”然后“替换整个列表”，但它以相反的顺序执行？

更新 2：

我已按照建议切换到 ObservableCollection，这实际上解决了最初的问题。我现在可以添加一个项目，它会显示在列表中。

但是，新的怪异行为仍然有效。在重置集合之前添加的项目将附加到新集合的末尾。为什么我的代码以相反的顺序执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:19:27.940

一旦您关心的给定属性发生更改，您需要实现该接口并发送通知。

```
 public event PropertyChangedEventHandler PropertyChanged;

        public string CustomerName
        {
            get
            {
                return this.customerNameValue;
            }

            set
            {
                if (value != this.customerNameValue)
                {
                    this.customerNameValue = value;
                    if (PropertyChanged != null)
                    {
                        PropertyChanged(this, new PropertyChangedEventArgs("CustomerName"));
                    }
                }
            }
        } 
```

请记住，对于集合，您应该使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，因为它会负责在`INotifyCollectionChanged`添加或删除项目时触发。

我建议尽可能缩小您的样本。不要从 a 开始，`DataGrid`而是从一个简单的`TextBox`and开始`Button`，`Button`它会强制您的 ViewModel 发生变化，这将反映在 UI 上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:24:22.947

代码取自[这里](http://www.codecapers.com/post/INotifyPropertyChanged-with-Compile-Time-Checking.aspx)。

最好实现一个像这样实现它的父类：

```
public class NotifyPropertyChangedBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged = delegate { };

    protected void RaisePropertyChanged(string propertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

然后在您的属性中的子类（即 ViewModel）中执行以下操作：

```
public class MyViewModel : NotifyPropertyChangedBase
{
    private string _name;
    public string Name {
      get{ return _name; }
      set{ 
       _name = value;
       RaisePropertyChanged("Name");
      }
    }
} 
```

# tridion - 如何删除“SDL Tridion 尚未使用此版本的浏览器进行测试”

> ID：12532286
> 
> 赞同：16
> 
> 时间：2012-09-21T14:14:59.127
> 
> 标签：tridion

我在 Tridion CME 中看到以下消息，并且不确定将其删除的配置在哪里。

有人可以帮忙吗？

![在此处输入图像描述](../Images/ec944695585fdcb5f60e0076a3e8c2b9.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-21T14:23:07.377

这意味着您正在使用**不受支持的浏览器**或**不受支持的版本**。

如果您想避免在使用不受支持的版本时收到此消息，您可以修改文件`\web\webui\webroot\configuration\system.config`

在此文件中，您需要将所需的浏览器添加到`<supportedbrowsers>`节点中

***更新：***

正如评论中所述，您的团队需要知道他们正在开发一个**不受支持**的版本，即使弹出窗口没有提醒您。根据经验，如果 GUI 在任何特定操作上似乎损坏或有错误，请针对支持的版本重新测试。

**提示：**要克服使用每个新版本更新 system.config 的问题。（现在很难跟上新的 chrome 的 firefox 版本！）您可以使用正则表达式：

```
<supportedbrowsers>
    <browser name="Any Mozilla Firefox" regExp="Firefox/.*"/>
    <browser name="Any Google Chrome" regExp="Chrome/.*"/>
    ...
</supportedbrowsers> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T22:57:27.297

轻松“删除”。确保您从**受支持的角度**记录您已删除注释的**客户**。作为开发者确实很烦人。当你离开时提醒一个 - 不受支持的 - 客户真的很重要。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:38:08.023

我相信你不应该试图忽略这个信息。尝试根据您的 SDL Tridion 版本找出支持的正确浏览器，请注意您还需要一些浏览器设置。**

# objective-c - AVAudioPlayer 返回成功但设备没有声音

> ID：12532290
> 
> 赞同：3
> 
> 时间：2012-09-21T14:15:06.083
> 
> 标签：objective-c, avaudioplayer

我有一个非常简单的应用程序，用于测试 AVAudioPlayer。我有一个 16 秒的 aif 文件，可以在我的 Mac 上正常播放。把它放在一个简单的应用程序中并在我的 iPhone 上运行，但没有声音。向对象发送“播放”返回成功，并且 audioPlayerDidFinishPlaying 在 16 秒后返回成功。还是没有声音。已经检查了 iPhone 上的音量，没问题。已检查以确保我的 AVAudioPlayer 对象的音量设置为 1.0 - 确实如此。有人可以帮忙吗？

这是我的代码

```
NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"Soothing" ofType:@"aif"];
NSURL *playURL = [NSURL fileURLWithPath:soundPath];
NSError *error;

self.myAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:playURL error:&error];
NSLog(@"About to play sound");

self.myAudioPlayer.delegate = self;
[self.myAudioPlayer prepareToPlay];
bool success = [self.myAudioPlayer play];

if (!success) {
    NSLog(@"Failed to play file");
} else NSLog(@"Looks like it succeded"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:34:19.337

好的 - 明白了。我没有为我的应用程序配置 AVAudioSession。做了一些非常简单的事情如下（从Apple的示例代码中复制）：

```
[[AVAudioSession sharedInstance] setDelegate: self];
NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryError];
if (setCategoryError)
    NSLog(@"Error setting category! %@", setCategoryError); 
```

声音现在开始播放了——加上学到了很多关于如何通过屏幕锁定等来控制播放的知识，这将是很有价值的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:00:31.867

你检查过你是否从错误中得到任何东西吗？

```
if(error) {
    NSLog( @"%@", [error localizedDescription] );
} 
```

# dynamics-crm - BIDS 和 FetchXML 未返回预期结果

> ID：12532293
> 
> 赞同：1
> 
> 时间：2012-09-21T14:15:16.447
> 
> 标签：dynamics-crm, dynamics-crm-2011, bids

我最近开始使用 Microsoft CRM 2011 并下载了 CRM 2011 开发人员工具包，以使自己快速了解 CRM 的各个方面，但我遇到了一个小问题：其中一个练习让您在 CRM 中生成报告，然后下载 FetchXML，然后将其加载到 BIDS 中的报告中。在 CRM 中，查询返回我所期望的（所有联系人记录），但是当我从 BIDS 中运行相同的查询时，它只返回作为示例数据加载的联系人记录，而不是我作为一部分加载的其他联系人记录的练习。

相关的 FetchXML 是：

```
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="contact">
    <attribute name="fullname" />
    <attribute name="contoso_type" />
    <attribute name="parentcustomerid" />
    <attribute name="contactid" />
    <attribute name="contoso_lastworkoutdate" />
    <order attribute="fullname" descending="false" />
   <filter type="and">
   <filter type="or">
    <condition attribute="lastusedincampaign" operator="olderthan-x-months" value="3" />
    <condition attribute="lastusedincampaign" operator="null" />
   </filter>
   </filter>
  </entity>
</fetch> 
```

是否有一些练习文档忽略了需要设置以下载其他联系人的设置，或者我是否完全错过了其他内容？

- - 编辑 - -

值得注意的是，当 RDL 上传回 CRM 时，我希望报告中的所有数据都在那里，但是当它是本地的时，它只包含示例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:42:34.527

这是本地服务器上的安全问题。

因为您正在使用 FilteredViews（我希望并假设）。这些视图过滤掉您无权访问的记录。您无法在本地访问这些特定记录，但可以在 CRM 上访问。

# xcode - Xcode 4.5 和 Phonegap 2.0 参考问题

> ID：12532295
> 
> 赞同：4
> 
> 时间：2012-09-21T14:15:23.730
> 
> 标签：xcode, cordova

昨天我更新了新的 Xcode 4.5，我在构建中遇到了一个错误，我不知道该如何解决这个问题。

如果我在模拟器中构建一切正常，但是当我尝试为存档构建时，我得到了这个：

```
ld: warning: ignoring file /Users/corotchi/Library/Developer/Xcode/DerivedData/NJR_IR-ftjwhrqtxwedihfjrbjikbqqttkx/Build/Products/Release-iphoneos/libCordova.a, file was built for archive which is not the architecture being linked (armv7s): /Users/corotchi/Library/Developer/Xcode/DerivedData/NJR_IR-ftjwhrqtxwedihfjrbjikbqqttkx/Build/Products/Release-iphoneos/libCordova.a
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_CDVURLProtocol", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_CDVViewController", referenced from:
      _OBJC_CLASS_$_MainViewController in MainViewController.o
  "_OBJC_METACLASS_$_CDVViewController", referenced from:
      _OBJC_METACLASS_$_MainViewController in MainViewController.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

*以及下面更多的错误，它们是相同的*

**在您更新 Xcode 之前一切正常，在我阅读必须从构建设置中删除“ ARMV6** ”的表单之前，我遇到了另一个问题，因为新 IOS 不再支持它，之后我得到了这个参考问题。

我感谢任何帮助，谢谢！！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T11:25:13.443

从您的项目和 Cordova(phonegap) 项目的 Valid Architectures 中删除 armv7s。还要在项目和 Cordova(phonegap) 项目中设置 iOS 部署目标 4.3 或更高版本。之后清洁和清洁构建文件夹。这将解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T15:49:47.863

如果您还从构建设置中取出 armv7s，您应该让它为您构建。

编辑：如下：可以通过PhoneGap在这里找到修复：[https ://issues.apache.org/jira/browse/CB-1360](https://issues.apache.org/jira/browse/CB-1360)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T09:12:41.630

更改**Buid 设置 ---> 架构 --->**仅构建活动架构 --->**是** 这解决了我在新 Xcode 5 中使用旧科尔多瓦版本的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T19:50:46.960

这是 Cordova 2.2.0 中已修复的错误

[https://issues.apache.org/jira/browse/CB-1360](https://issues.apache.org/jira/browse/CB-1360)

# asp.net-mvc-3 - 在 MVC3 的登录表单中使用模型

> ID：12532296
> 
> 赞同：0
> 
> 时间：2012-09-21T14:15:23.633
> 
> 标签：asp.net-mvc-3

大家好，我有一个包含文本框的视图。我将 texbox 参数发送到我的控制器方法，但管理模型的用户名和密码属性是从请求中绑定的，并且具有与用户名和密码参数相同的值。那么如何使用我的模型进行登录控制呢？顺便说一句，管理模型有 admin_id。谢谢你的帮助

```
 public ActionResult Login(admin model,string Username,string Password)
        {

            if (ModelState.IsValid)
            {

                if (model.username == Username && model.password == Password)
                {
                    FormsAuthentication.SetAuthCookie(model.username, false);
                    return RedirectToAction("Index", "Kontrol");
                }
                else
                {
                    ModelState.AddModelError("", "Wrong username or password");
                }
            }
             return View();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:41:48.037

据我了解，您有两个来自输入`Username`的`Password`值？尝试管理模型的下一个名称：

```
model.username
model.password
model.admin_id 
```

# wpf - StackPanel 可以将自身设置为其内容的高度吗？

> ID：12532297
> 
> 赞同：1
> 
> 时间：2012-09-21T14:15:27.743
> 
> 标签：wpf

我有 WPF StackPanel，我想根据其内容的高度调整其高度。有没有本地方法可以做到这一点？StackPanel 似乎不支持“SizeToContent”

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:17:35.963

`StackPanel`将始终根据其内容增长和缩小，但您最终看到的内容可能会受到包含 . 的内容的限制`StackPanel`，例如`Window`.

# jframe - 如何在 JFrame 中播放 .MP3

> ID：12532298
> 
> 赞同：0
> 
> 时间：2012-09-21T14:15:30.830
> 
> 标签：jframe

今天，我一直在尝试找到一种通过 JFrame 播放声音的方法……只需少量代码……而不是 30 页……我知道如果我要使用小程序，那将是一个容易得多，但我真的需要使用 JFrame，所以如果有人可以让我知道是否有可能有合理数量的代码来简单地播放 3 秒的 mp3，例如，当我单击 JButton 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T21:43:23.290

```
import java.applet.*;

AudioClip ac = getAudioClip(getCodeBase(), soundFile);
ac.play();   //play once
ac.stop();   //stop playing
ac.loop();   //play continuously 
```

那应该行得通。

# jquery-ui-tabs - jQuery UI 选项卡加载 url

> ID：12532301
> 
> 赞同：2
> 
> 时间：2012-09-21T14:15:35.873
> 
> 标签：jquery-ui-tabs

我一直在尝试制作一个 jQuery 选项卡 UI，如下面的[更好的 iframe 替代品？](https://stackoverflow.com/questions/2102878/better-alternative-to-an-iframe)但经过数小时的故障排除后，我只是不知道我做错了什么。

我的 test.html：

```
<html>
<head>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-lightness/jquery-ui.css" type="text/css" media="all" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>

    <script type="text/javascript">
        $(function() {
          $("#tabs").tabs();
          });
    </script>
</head>

<body>
    <div id="tabs">
        <ul>
            <li><a href="one.html"><span>One</span></a></li>
            <li><a href="two.html"><span>Two</span></a></li>
            <li><a href="three.html"><span>Three</span></a></li>
        </ul>
    </div>
</body> 
```

所以在我的文件夹中，我有 test.html（上面的）、one.html、two.html 和 three.html。当我加载 test.html 时，我选择的任何选项卡都只会显示 Loading... 并且 html 页面永远不会加载。

为了更直观的解释，我正在尝试使用 html 页面来做这个演示：http: [//www.coldfusionjedi.com/demos/jquerytabs/test.cfm](http://www.coldfusionjedi.com/demos/jquerytabs/test.cfm)

请帮助哈哈，我对自己做错了什么感到迷茫。提前致谢 ：）

# php - 无法将变量发送到视图

> ID：12532302
> 
> 赞同：0
> 
> 时间：2012-09-21T14:15:39.900
> 
> 标签：php, zend-framework

在我的控制器中，我尝试在将变量发送到视图之前将其保存在会话中：

```
session_start();
$_SESSION['prenom'] = $form['prenom'];

$this->_view->prenom = $_SESSION['prenom'];

$this->_redirect('inscription'); 
```

然后在我看来我需要显示它：

```
<div><input type="text" name="prenom" value="<?php if (isset($prenom)){echo $prenom;}?>" title="Pr&#233;nom *" class="small"/> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T07:10:19.427

对于初学者，让我们保持一致并使用 Zend 框架。

```
//session_start();
//$_SESSION['prenom'] = $form['prenom'];  BECOMES
$session = new Zend_Session_Namespace('name'); //will automatically call session_start if required
$session->prenom = $form->getValue('prenom');//assumes $form is a valid Zend_Form object

//$this->_view->prenom = $_SESSION['prenom']; BECOMES
$this->view->prenom = $session->prenom; //$this->_view isn't a thing as far as I know
//if you are expecting the view variable to work after redirect... it won't
//$this->_redirect('inscription'); MAY BECOME
$this_forward('inscription');//will call new action without resetting the request 
```

现在查看脚本：

```
//assumes you are in the correct view script
//when accessing variables passed to the view, use $this
<input type="text" name="prenom" value="<?php 
if (isset($this->prenom) { 
    echo $this->prenom;
}
?> " title="Prenom *" class="small"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:21:22.743

重定向方法重置设置的变量。你必须改变你的看法。就像是：

```
$this->_helper->viewRenderer('action-name-here'); 
```

注意：如果您使用 Zend Framework，请不要使用本机会话方法，请使用`Zend_Session`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:27:19.213

`<div><input type="text" name="prenom" value="<?php if (isset($_SESSION['prenom'])) { echo $_SESSION['prenom']; }?>" title="Pr&#233;nom *" class="small"/>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:27:47.937

当您使用重定向方法时，会发生实际的 HTTP 重定向（页面重新加载），因此您的所有变量都将被重置。我认为您正在寻找转发方法

# winapi - 程序兼容性助手清单在 Vista32 中不起作用

> ID：12532308
> 
> 赞同：2
> 
> 时间：2012-09-21T14:15:46.530
> 
> 标签：winapi, windows-vista, manifest, compatibility, uac

当我运行我的应用程序“驱动程序安装程序和卸载程序应用程序”时，一旦我的 exe 成功结束，我就会得到一个“程序兼容性助手”窗口。通过 SO 链接和谷歌搜索后，我找不到解决方案来避免 vista 32 中的“程序兼容性助手”窗口。我使用下面的清单来避免 PCA，它按预期工作（在 Windows 7 中没有得到任何 PCA 窗口）但是除了windows vista 32？我应该怎么做才能完成这项工作？

> 在为我的安装程序应用程序使用以下清单后，我没有在 Windows 7 中获得 PCA 窗口，但它出现在 windows vista 32 位上。如何避免 vista32 中的 PCA 窗口？

一些相关的问题是：

*   [我如何以编程方式防止程序兼容性助手在 vista](https://stackoverflow.com/questions/1587962/how-do-i-prevent-programmatically-the-program-compatibility-assistant-in-vista)
*   [获取程序兼容性助手对话框的原因](https://stackoverflow.com/questions/5098747/reasons-for-getting-the-program-compatibility-assistant-dialog)

这是我使用的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <assemblyIdentity version="1.0.0.0" name="Unins.exe"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <requestedExecutionLevel level="highestAvailable" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!--The ID below indicates application support for Windows Vista -->
      <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/>
      <!--The ID below indicates application support for Windows 7 -->
      <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
    </application>
  </compatibility>
</asmv1:assembly> 
```

下面是我得到的 PCA 窗口的快照...

![PCA 窗口的快照](../Images/8fb895ae42e9b7960ee8d0167896ab7a.png)

更新：PCA 窗口的根本原因是“我的安装程序没有在添加或删除程序中创建条目”。我让我的应用程序在“添加或删除程序”中输入一个条目，但没有得到任何 PCA 窗口。但我不想在添加或删除程序中输入。

> **12 年 9 月 25 日更新：**我有一个可执行文件 say `A.exe`，它可以找到操作系统的体系结构并取决于它调用的体系结构 `A64.exe or A86.exe`。在这种情况下，我是否想要所有 exe 的清单（ A.exe、A64.exe、A86.exe ）？现在我只有 A.exe 的清单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:43:32.163

为了完全退出 PCA，您肯定需要在所有三个可执行文件中包含清单。

# php - 正则表达式以匹配不在 href 中的单词

> ID：12532312
> 
> 赞同：0
> 
> 时间：2012-09-21T14:15:54.783
> 
> 标签：php, regex, html-parsing

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

假设我正在尝试匹配字符串中的“google”一词，但有时该字符串包含一个链接`(<a href="http://www.google.com">google</a>)`，但我只想匹配它不是链接。

如何检查`<a href="http://www.google.com">`单词之前是否有a？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:19:06.660

最准确的方法是：

*   将字符串解析为 HTML
*   搜索不是字符串“Google”的标签的任何内容。

您不想尝试使用正则表达式解析 HTML。从长远来看，它会让你伤心。请查看[http://htmlparsing.com/](http://htmlparsing.com/)以获得一些可以帮助您入门的指针。

# html - 垂直对齐浮动 div 方法不起作用

> ID：12532314
> 
> 赞同：0
> 
> 时间：2012-09-21T14:16:00.707
> 
> 标签：html, css

我正在尝试实现将 h2 垂直居中的浮动 div (http://www.vanseodesign.com/css/vertical-centering/) 方法。它不适用于我拥有的标记（参见下面的示例）：

[http://jsfiddle.net/brendan_rice/LCP5K/1/](http://jsfiddle.net/brendan_rice/LCP5K/1/)

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:31:42.483

我真的不明白您是否尝试将该文本框放在居中的 div 中，您的 html 中没有这种方式，这是如何以您正在谈论的方法居中的示例，尽管有更好的方法，但这可能就是为什么这个是链接 [jsfiddle中这些示例的最后一个选项的原因](http://jsfiddle.net/LCP5K/7/)

# ruby-on-rails - Rails as_json 抛出“无法将符号转换为整数”

> ID：12532315
> 
> 赞同：1
> 
> 时间：2012-09-21T14:16:05.137
> 
> 标签：ruby-on-rails, json

我正在尝试根据传递给动作的参数，在rails控制器动作中动态更改从模型的as_json函数返回的关联和方法。

以下是传递给操作的参数：

```
{"include"=>{"service_requests"=>"status"},
"methods"=>["service_request_count"],
"program_id"=>""} 
```

这是我的控制器操作正在执行的操作：

```
respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @projects.as_json(:include => params[:include]), :methods => params[:methods] }
end 
```

这给出了错误：“无法将符号转换为整数”。任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:26:26.577

而你给 as_json 的论点是

```
:include => { :service_requests => :status } 
```

它需要是

```
:include => { :service_requests => { :include => :status } } 
```

# c# - 检查 HTML 代码中的重复 ID

> ID：12532318
> 
> 赞同：1
> 
> 时间：2012-09-21T14:16:16.787
> 
> 标签：c#, html

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个包含此 HTML 标记的字符串：

```
string markup = @"
  <html>
    <head>
      ...
    </head>
    <body>
      <input id='text1' />
      <input id='blah' />
      <input id='text1' />
    </body>
  </html>
"; 
```

如何检查重复的 ID 名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:24:18.000

[在HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)的帮助下

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(markup);

var dups = doc.DocumentNode.Descendants()
    .Where(n => n.Attributes["id"] != null)
    .GroupBy(n => n.Attributes["id"].Value)
    .Select(g => new { ID = g.Key, Count = g.Count() })
    .Where(r=>r.Count>1)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:25:05.830

正则表达式可能有效，但前提是 HTML**非常**规则。例如，如果您不能确定这些`input`标签上属性的数量、类型、格式和顺序，那么用于检索您想要的信息的基于正则表达式的解决方案充其量将是笨拙的，也许是行不通的。

最好使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。它将为您解析 HTML 并生成表示文档结构的树。然后你可以遍历它寻找`input`标签并抓住他们`id`的 s 如果他们有他们：

```
HtmlDocument doc;
var inputTags = doc.DocumentNode.Descendants("input");
var ids = inputTags.Select(x=>x.Attributes["id"]); 
```

# asp.net - Telerik asyncUpload 在 IE9 中不起作用

> ID：12532320
> 
> 赞同：0
> 
> 时间：2012-09-21T14:16:22.230
> 
> 标签：asp.net, upload, telerik

我正在尝试使用telerik asyncUpload，它在所有浏览器中都可以正常工作，但在IE9中，我应该打开兼容模式以便在选择文件后查看我的文件上传过程，但是在这个演示站点（http://demos .telerik.com/aspnet-ajax/upload/examples/async/webmail/defaultcs.aspx）它在 IE9 中工作正常，无需打开兼容模式，我怎样才能为 IE9 做类似这个演示站点的事情？

当我在 IE9 以外的浏览器中选择文件时，会显示文件名并显示一个显示文件上传的小进度条，文件名旁边还会出现一个小删除按钮，但在 IE9 中我选择文件后什么都看不到，我应该打开兼容模式，我希望这个描述会有所帮助，但是在演示站点中，所有浏览器都可以正常工作，我错过了什么？

我还要将我的图像存储在数据库中，我需要执行回发吗？我的文件存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:34:45.950

我发现这篇文章听起来与您遇到的问题相似。

[http://www.telerik.com/community/forums/aspnet-ajax/async-upload/select-button-with-not-show-the-select-files-window.aspx](http://www.telerik.com/community/forums/aspnet-ajax/async-upload/select-button-with-not-show-the-select-files-window.aspx)

基本上IE9的Flash模块出现了一定的问题，和Flash有关。这可能就是您在 IE9 中看不到任何内容的原因。

如果这是他们建议使用以下 JS 禁用 flash 模块的问题：

```
<script type="text/javascript">
Telerik.Web.UI.RadAsyncUpload.Modules.Flash.isAvailable = function () { return false; }
</script> 
```

# python - 在 python 或类似方法中卷曲 POST

> ID：12532321
> 
> 赞同：1
> 
> 时间：2012-09-21T14:16:23.533
> 
> 标签：python, curl, post, urllib2

这可能是一个有点过于直接的问题。Python 新手

我正在尝试从视频网站（Putlocker）解析/抓取视频链接。
即 [http://www.putlocker.com/file/A189D40E3E612C50](http://www.putlocker.com/file/A189D40E3E612C50)。

该页面最初出现以下代码或类似代码

```
<form method="post">
<input type="hidden" value="3d0865fbb040e670" name="hash">
<input name="confirm" type="submit" value="Continue as Free User" 
disabled="disabled"  
 id="submitButton" class="confirm_button" style="width:190px;">
</form> 
```

value="3d0865fbb040e670" 每次都改变...

```
Import urllib
import urllib2

url = 'http://www.putlocker.com/file/A189D40E3E612C50.'
response = urllib2.urlopen(url)
page = response.read() 
```

从这里我找到 Value="?" 哈希

然后

```
url = 'http://www.putlocker.com/file/A189D40E3E612C50.'
values = {'hash' : 3d0865fbb040e670}
data = urllib.urlencode(values)
response = urllib2.urlopen(url)
page = response.read() 
```

但我最终再次出现在同一页面上。我也发布 value="Continue as Free User" 吗？我如何继续发布这两个数据。

一个工作代码会很有帮助。我正在努力，但还没有成功。

好的..在少数程序员提出的建议之后

我尝试使用如下代码

```
url = 'http://www.putlocker.com/file/A189D40E3E612C50'
response = urllib2.urlopen(url)
html = response.read()
r = re.search('value="([0-9a-f]+?)" name="hash"', html)
session_hash = r.group(1)
print session_hash
form_values = {} 
form_values['hash'] = session_hash
form_values['confirm'] = 'Continue as Free User'
data = urllib.urlencode(form_values)
response = urllib2.urlopen(url, data=data) 
html = response.read()
print html 
```

所以我再次返回相同的页面......我在这里做错了什么！我见过一种叫做 pycurl 的东西..但我想用更简单的东西..有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:17:26.787

`urllib2.urlopen(url,data=data)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:18:50.500

您确实需要将编码`values`参数提供给`urlopen`命令：

```
response = urllib2.urlopen(url, data) 
```

否则，您将创建另一个 GET 请求而不是 POST。

# mysql - 替代“IN”，类似于“AND”而不是“OR”

> ID：12532327
> 
> 赞同：8
> 
> 时间：2012-09-21T14:16:50.577
> 
> 标签：mysql, sql

据我了解，IN 的工作方式如下：

```
$arrayName = array(1, 2, 3);

SELECT * 
FROM tableName 
WHERE productID IN ($arrayName) 
```

相当于：

```
SELECT * 
FROM tableName 
WHERE productID = 1 OR productID = 2 OR productID = 3 
```

我想知道是否有一个类似于 IN 但使用 AND 代替 OR 来与数组进行比较的 SQL 函数。可以扩展到此的东西：

```
SELECT * 
FROM tableName 
WHERE productID = 1 AND productID = 2 AND productID = 3 
```

并不是说它是必需的，但对于上下文，我只是为一些通过 jQuery 在 PHP 页面上填充的搜索结果创建一个排序列表。我可以用 PHP 做我需要的事情，我将根据用户选择的选项动态地创建查询，但如果可能的话，我宁愿使用智能 SQL 函数。

***编辑：感谢大家的帮助。我对我的问题的解释很糟糕，你仍然能够解决它，我很感激。我发现其他人更雄辩地提出了这个问题，并得到了我可以使用的答案：

[MySQL 中是否有类似 IN 但使用 AND 而不是 OR 的东西？](https://stackoverflow.com/questions/2860374/is-there-something-in-mysql-like-in-but-which-uses-and-instead-of-or?rq=1)

我试图弄清楚如何接受答案并关闭它，但我遇到了一些麻烦......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:19:18.913

你不可能做到这一点，

```
SELECT * 
FROM tableName 
WHERE productID = 1 AND productID = 2 AND productID = 3 
```

条件将始终返回`false`，因为一行在其列上只能有一个值，另一种方法是对结果进行分组，例如。

```
SELECT colName
FROM tableName
WHERE productID IN (1,2,3)
GROUP BY colName
HAVING COUNT(DISTINCT colName) = 3 
```

通过具有条件，这意味着记录的实例必须等于子句`HAVING COUNT(DISTINCT colName) = 3`提供的参数的总数。`IN`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:21:27.457

如所写，您的查询将不会产生任何行。一行中的 productID 不可能同时等于 1 和 2。

您可能正在寻找一*组*包含这三个产品的行。假设您要查找包含所有三种产品的订单。你可以使用类似的东西：

```
select orderid
from orderlines ol
group by orderid
havnig max(case when ol.productid = 1 then 1 else 0 end) > 0 and
       max(case when ol.productid = 2 then 1 else 0 end) > 0 and
       max(case when ol.productid = 3 then 1 else 0 end) > 0 
```

带有 HAVING 子句的 GROUP BY 将查找所有三种产品都存在的订单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:23:47.770

```
SELECT orderid 
FROM tableName  
WHERE productID IN (1, 2, 3)
GROUP BY orderid
HAVING COUNT(DISTINCT productID) = 3 --this number must match the number of unique IDs in the IN clause 
```

# java - 找不到记录器（log4j）的附加程序？

> ID：12532339
> 
> 赞同：436
> 
> 时间：2012-09-21T14:17:21.420
> 
> 标签：java, eclipse, log4j

我已将 log4j 放入构建路径，但在运行应用程序时收到以下消息：

```
log4j:WARN No appenders could be found for logger (dao.hsqlmanager).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

这些警告是什么意思？这里的附加程序是什么？

* * *

## 回答 #1

> 赞同：530
> 
> 时间：2012-09-21T14:23:16.897

这个[log4j 指南的简短介绍有点旧](http://logging.apache.org/log4j/1.2/manual.html)，但仍然有效。

该指南将为您提供有关如何使用记录器和附加程序的一些信息。

* * *

为了让您继续前进，您可以采取两种简单的方法。

第一个是将这一行添加到您的主要方法中：

```
BasicConfigurator.configure(); 
```

第二种方法是将此标准`log4j.properties`（取自上述指南）文件添加到您的类路径中：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-02-02T07:52:42.463

看起来您需要将`log4j.properties`文件的位置添加到 Eclipse 中的类路径中。

确保您的项目已在 Eclipse 中打开，然后单击 Eclipse 顶部的“运行”菜单并单击以下内容：

1.  跑
2.  运行配置
3.  类路径（选项卡）
4.  用户条目
5.  高级（右侧按钮）
6.  添加文件夹
7.  然后导航到包含您的 log4j.properties 文件的文件夹
8.  申请
9.  跑

错误消息不应再出现。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2014-04-22T08:13:48.997

快速解决方案：

1.  将代码添加到**主函数**：

    ```
    String log4jConfPath = "/path/to/log4j.properties";
    PropertyConfigurator.configure(log4jConfPath); 
    ```

2.  **在/path/to**创建一个名为 log4j.properties 的文件

     **```
    log4j.rootLogger=INFO, stdout
    log4j.appender.stdout=org.apache.log4j.ConsoleAppender
    log4j.appender.stdout.Target=System.out
    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
    log4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n 
    ```** 

 *** * *

## 回答 #4

> 赞同：41
> 
> 时间：2015-04-06T20:20:03.040

这只是一个警告。

### 定影

当无法找到默认配置文件`log4j.properties`并且应用程序未执行显式配置时会发生这种情况。`log4j.xml`

要解决这个问题，只需在类路径上创建/复制*或*`log4j.properties`复制`log4j.xml`到您的位置（通常与 jar 文件相同）。

 *可选择设置 java 选项：`-Dlog4j.configuration=file:///path/to/log4j.properties`.

> `log4j`用于`Thread.getContextClassLoader().getResource()`定位默认配置文件，不直接检查文件系统。知道放置的适当位置`log4j.properties`或`log4j.xml`需要了解正在使用的类加载器的搜索策略。`log4j`不提供默认配置，因为在某些环境中可能禁止向控制台或文件系统输出。

### 调试

对于调试，您可以尝试使用`-Dlog4j.debug=true`参数。

### 的配置`log4j.properties`

示例配置`log4j.properties`：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# Print only messages of level WARN or above in the package com.foo.
log4j.logger.com.foo=WARN 
```

这是另一个使用多个附加程序的配置文件：

```
log4j.rootLogger=debug, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=example.log

log4j.appender.R.MaxFileSize=100KB
# Keep one backup file
log4j.appender.R.MaxBackupIndex=1

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n 
```

### 阿帕奇索尔

如果使用*Solr*，请复制`<solr>/example/resources/log4j.properties`到*类路径*上的某个位置。

`log4j.properties`Solr 的示例配置如下：

```
#  Logging level
solr.log=logs/
log4j.rootLogger=INFO, file, CONSOLE

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender

log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%-4r [%t] %-5p %c %x \u2013 %m%n

#- size rotation with log cleanup.
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.MaxFileSize=4MB
log4j.appender.file.MaxBackupIndex=9

#- File to log to and log format
log4j.appender.file.File=${solr.log}/solr.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%-5p - %d{yyyy-MM-dd HH:mm:ss.SSS}; %C; %m\n

log4j.logger.org.apache.zookeeper=WARN
log4j.logger.org.apache.hadoop=WARN

# set to INFO to enable infostream log messages
log4j.logger.org.apache.solr.update.LoggingInfoStream=OFF 
```

* * *

也可以看看：

*   [log4j 简介：默认初始化过程](http://logging.apache.org/log4j/1.2/manual.html#defaultInit)
*   [为什么 log4j 在 J2EE 或 WAR 应用程序中找不到我的属性？](http://logging.apache.org/log4j/1.2/faq.html#a3.5)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-08-09T02:13:33.067

这里的大多数答案都建议将`log4j.properties`文件放置在正确的位置（对于 maven 项目，它应该位于`src/main/resources`）

但对我来说，问题是我`log4j.properties`的配置不正确。这是一个适合我的示例，您可以先尝试一下。

```
# Root logger option
log4j.rootLogger=INFO, stdout

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-12-22T13:47:34.160

如前所述，有两种方法

第一个是将这一行添加到您的主要方法中：

```
BasicConfigurator.configure(); 
```

第二种方法是将此标准**log4j.properties**文件添加到您的类路径中：

在采用第二种方法时，您需要确保正确初始化文件，例如。

```
Properties props = new Properties();
props.load(new FileInputStream("log4j property file path"));
props.setProperty("log4j.appender.File.File", "Folder where you want to store log files/" + "File Name"); 
```

确保创建所需的文件夹来存储日志文件。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-09-21T14:21:48.843

您`Logger`在代码中使用 来记录消息。这`Appender`是一个附加到 a 的对象，`Logger`用于将消息写入特定目标。有`FileAppender`写入文本文件或`ConsoleAppender`写入控制台。您需要显示 Logger 和 Appender 设置的代码以获得更多帮助。

请阅读[教程](http://logging.apache.org/log4j/1.2/manual.html)以更好地理解 Logger 和 Appender 的交互。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-11-11T01:50:39.693

确保属性文件已正确设置。再次，编译器似乎找不到属性文件，您可以在 pom 中设置如下（仅当您使用 maven 项目时）。

```
<build>
       <sourceDirectory> src/main/java</sourceDirectory>
       <testSourceDirectory> src/test/java</testSourceDirectory>
        <resources>
             <resource>
                  <directory>resources</directory>
             </resource>
        </resources>           
</build > 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-09-24T12:39:32.860

我犯了同样的错误。这是导致此错误消息的问题：

在配置 log4j 之前，我创建了一些使用 Logger 的对象：

```
Logger.getLogger(Lang.class.getName()).debug("Loading language: " + filename); 
```

解决方法：在main方法的开头配置log4j：

```
PropertyConfigurator.configure(xmlLog4JConfigFile); 
// or BasicConfigurator.configure(); if you dont have a config file 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2019-07-04T11:06:00.497

当我尝试运行 JUnit 测试类时，我遇到了同样的问题。

在我在 src/test/resources 文件夹中手动添加 log4j.properties 文件后，该问题得到解决。

将以下代码添加到 log4j.properties 文件解决了该问题：

```
# Root logger option
log4j.rootLogger=INFO, file, stdout

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\logging.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-05-22T10:23:54.350

添加以下内容作为第一个代码：

```
Properties prop = new Properties();
prop.setProperty("log4j.rootLogger", "WARN");
PropertyConfigurator.configure(prop); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-04-28T14:36:34.897

我认为您应该了解 log4j jar 文件或 Java 代码在哪里查找 log4j 配置文件。

`src/main/resources/log4j.properties`是 Eclipse 路径。将它们放置在适当的位置，这样您就不必在代码中硬编码绝对路径。

阅读我的文章和示例解决方案 [https://askyourquestions.info/how-to-see-where-the-log-is-logger-in-slf4j/](https://askyourquestions.info/how-to-see-where-the-log-is-logger-in-slf4j/)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-03-15T17:17:10.710

这可能发生的另一个原因（在 RCP4 中）是您在目标文件中使用了多个日志记录框架。例如，如果您在目标文件内容选项卡中使用 slf4j、log4j 和 ch.qos.logback.slf4j 的组合，则会发生这种情况。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-11-11T11:05:07.047

在我的例子中，错误是标志“ **additivity** ”。如果根项目包为“假”，则子包将没有附加程序，您将看到“**未找到附加程序**”错误。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-11-04T09:37:42.727

如果您使用的是 Eclipse，并且在一切正常之后突然出现此问题，请尝试转到`Project - Clean - Clean`.

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-02-21T21:35:23.573

首先：创建一个log4j.properties文件

```
# Root logger option
log4j.rootLogger=INFO, stdout

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

把它放在 src/main/resources/

之后，使用这 2 个依赖项：

```
<dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.5</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.7.5</version>
        </dependency> 
```

有必要将此最终依赖项添加到 POM 文件中：

```
<!-- https://mvnrepository.com/artifact/org.springframework/spring-context -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>5.1.5.RELEASE</version>
        </dependency> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-07-24T06:49:14.723

我在 intellij 12 中尝试使用 maven 构建可执行 jar 时遇到了这个问题。事实证明，因为 java 清单文件不包含类路径，所以在根级别找不到 log4j 属性文件（其中jar 文件是从执行的。）

仅供参考，我得到这样的记录器：

```
Logger log = LogManager.getLogger(MyClassIWantedToLogFrom.class); 
```

我能够让它与包含以下内容的 pom 文件一起使用：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2-beta-5</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath> 
                        <mainClass>com.mycompany.mainPackage.mainClass</mainClass>
                    </manifest>
                    <manifestEntries>
                        <Class-Path>.</Class-Path> <!-- need to add current directory to classpath properties files can be found -->
                    </manifestEntries>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-11T19:03:55.607

确保您的项目已在 Eclipse 中打开，然后单击 Eclipse 顶部的“运行”菜单并单击以下内容：

1.  跑

2.  运行配置

3.  类路径（选项卡）

4.  用户条目

5.  在右侧添加罐子

6.  添加 log4j jar 文件

7.  申请

8.  跑

错误消息不应再出现。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-08-02T09:34:02.387

原因可能是在某些情况下缺少这个词`static`：

```
final static Logger logging = Logger.getLogger(ProcessorTest.class); 
```

如果我让 logger 成为实例字段，我会得到这个非常警告：

```
No appenders could be found for logger (org.apache.kafka.producer.Sender) 
```

更糟糕的是，警告不是指向`ProcessorTest`错误所在的位置，而是指向一个完全不同的类（发件人）作为问题的根源。*该类具有正确的设置记录器，*不需要任何更改！我们可以找很久的问题！

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-08-31T12:31:01.383

我在使用 log4j2 时遇到了同样的问题。我的问题是由于使用了错误的依赖库引起的：

```
<dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <scope>runtime</scope>
    </dependency> 
```

相反，我应该使用：

```
<dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-slf4j-impl</artifactId>
        <scope>runtime</scope>
    </dependency> 
```

就我而言，我在“资源”目录中定义了一个 log4j2.xml，并指定通过以下方式使用它：

```
System.setProperty("log4j.configurationFile", "log4j2.xml"); 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-10-19T09:20:33.733

当 Log4j Java 代码正在搜索以在您的程序中创建第一条日志行时，Log4J 会显示此警告消息。

此时，Log4j 做了 2 件事

1.  它搜索查找`log4j.properties`文件
2.  它搜索以实例化 appender 定义`log4j.properties`

如果`log4J`没有找到`log4j.properties`文件，或者如果在文件中声明的附加程序`log4j.rootlogger`未在文件的其他位置定义，`log4j.properties`则会显示警告消息。

注意：属性文件的内容必须正确。

以下内容不正确

```
log4j.rootLogger=file

log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=c:/Trace/MsgStackLogging.log
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.ConversionPattern=%m%n
log4j.appender.FILE.ImmediateFlush=true
log4j.appender.FILE.Threshold=debug
log4j.appender.FILE.Append=false 
```

因为`file`appender 在语句中以 LOWER-CASE`log4j.rootlogger`声明并在 log4j.appender 语句中使用 UPPER-CASE 定义！

一个正确的文件将是

```
log4j.rootLogger=FILE

log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=c:/Trace/MsgStackLogging.log
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.ConversionPattern=%m%n
log4j.appender.FILE.ImmediateFlush=true
log4j.appender.FILE.Threshold=debug
log4j.appender.FILE.Append=false 
```

如果使用了 MAVEN，则必须将 log4j.properties 文件放入`src/main/resources`并启动 MAVEN 构建。

然后将 Log4j.properties 文件复制到`target/classes`文件夹中。

Log4J 使用`log4j.properties`它找到的文件`target/classes`！

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-11-23T10:15:33.910

我也有这个问题。我只是忘记在 IntelliJ IDEA 中标记资源目录

1.  右键单击您的目录
2.  将目录标记为
3.  资源根

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-06-17T06:52:55.310

对我来说，原因显然不同，并且错误消息具有误导性。

在我的 build.gradle 中，它会抱怨 slf4j 在日志的开头丢失，但仍然会记录一些东西，尽管格式很差：

```
 compile 'log4j:log4j:1.2.17' 
```

添加该依赖项会导致我所讨论的“找不到附加程序”错误消息，即使我已在以下位置定义它们`src/main/java/log4j.properties`：

```
 compile 'log4j:log4j:1.2.17'
    compile 'org.slf4j:slf4j-log4j12:1.7.25' 
```

最后，添加以下依赖项（我只是通过从另一个项目中复制它来猜测）解决了这个问题：

```
 compile 'log4j:log4j:1.2.17'
    compile 'org.slf4j:slf4j-log4j12:1.7.25'
    compile 'commons-logging:commons-logging:1.2' 
```

我不知道为什么，但这样它就可以了。对此有何见解？

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-08-16T17:37:54.417

`log4j.properties`从 Eclipse运行*JUnit*测试时，我的 Eclipse 安装无法找到，即使该文件位于`src/test/resources`.

原因是 Eclipse（或*m2e*连接器）没有将内容复制`src/test/resources`到预期的输出文件夹`target/test-classes`- 根本原因是在*Java 构建路径*->*源*选项卡 ->*构建路径上的源文件夹*-> *src/下的项目属性中test/resources*，不知何故有一个`Excluded: **`条目。我删除了*排除*的条目。

或者，我可以手动复制`src/test/resources/log4j.properties`到`target/test-classes/log4j.properties`.

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-08-10T11:03:08.123

如果`log4j.properties`确实在类路径上，则您正在使用 Spring Boot 制作 WAR 文件以部署到应用服务器，您正在省略一个`web.xml`文件以支持 Spring Boot 的自动配置，并且您没有收到任何日志消息，您需要明确配置 Log4j。假设您使用的是 Log4j 1.2.x：

```
public class AppConfig extends SpringBootServletInitializer {

    public static void main( String[] args ) {
        // Launch the application
        ConfigurableApplicationContext context = SpringApplication.run( AppConfig.class, args );
    }

    @Override
    protected SpringApplicationBuilder configure( SpringApplicationBuilder application ) {
        InputStream log4j = this.getClass().getClassLoader().getResourceAsStream("log4j.properties");
        PropertyConfigurator.configure(log4j);
        return application;
    }

// Other beans as required...
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-05-03T15:43:10.697

也许在java构建路径中添加包含log4j的相关项目，当我在使用eclipse的mahout项目中遇到这个问题时，我将mahout_h2o添加到其中，它可以工作！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-05-04T13:51:49.740

如果您与很多项目一起工作，您可能会面临风格问题。

*您必须有一个 lof4j.properties 文件，并且该文件包含其他项目的日志属性。

*另外你可以尝试在项目运行Linux OS时将log4j属性文件放入src路径，其他项目的libs和log4.properties文件可以在一个文件夹下放入类路径中的某个位置。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-06-08T11:59:14.850

第一次导入：

```
 import org.apache.log4j.PropertyConfigurator; 
```

然后将以下代码添加到 main 方法：

```
String log4jConfPath ="path to/log4j.properties";
PropertyConfigurator.configure(log4jConfPath); 
```

**在路径**创建一个文件 并将以下代码添加到该文件。

```
log4j.rootLogger=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-09-18T20:35:46.657

该站点上的解决方案对我[有用 https://crunchify.com/java-how-to-configure-log4j-logger-property-correctly/](https://crunchify.com/java-how-to-configure-log4j-logger-property-correctly/)。我现在根本看不到来自 log4j 的警告

我把它放在我放在 src/main/resources 的 log4j.properties 文件中

```
# This sets the global logging level and specifies the appenders
log4j.rootLogger=INFO, theConsoleAppender

# settings for the console appender
log4j.appender.theConsoleAppender=org.apache.log4j.ConsoleAppender
log4j.appender.theConsoleAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.theConsoleAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-03-17T16:00:07.523

考虑 log4j JVM 参数**Dlog4j.configuration**

**一般来说：**

添加指出 log4j 配置文件的 JVM 参数。语法如下：

```
java [ options ] -jar file.jar [ arguments ] 
```

一个真实的命令行示例如下所示：

```
java -Dlog4j.configuration=conf/log4j.xml -jar myJarFile.jar myArg1 myArg2 
```

**对于 IntelliJ IDE 用户：**

```
1.Run/Debug Configurations
2.Edit configurations...
3.VM options
4.Enter the same value also starting with "-D" 
```

**尖端：**

1.Eclipse IDE 用户会找到等效的方法

2.对于运行/调试配置编辑器，很可能在开始时，您的特定可执行文件不存在。根据您当前正在处理的项目的大小，浏览目录以找到它可能会令人不快。如果您*在继续运行/调试配置之前运行/执行文件（单击播放）一次，*无论执行结果如何，都不会那么麻烦。

3.注意你的工作目录、相对路径和类路径。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-09-08T20:20:11.483

尝试运行单元测试时，我在 IntelliJ 中收到此错误消息。我同时打开了 Eclipse 和 IntelliJ，这可能导致了这个问题。在我关闭了两个 IDE 并运行了一个 Maven 命令行构建后，错误就消失了。

* * *

## 回答 #32

> 赞同：-4
> 
> 时间：2016-07-20T10:53:33.693

在 java eclipse 中，将您的 conf_ref 复制到 conf 文件夹。***

# javascript - 从另一个带参数的函数调用一个函数

> ID：12532343
> 
> 赞同：0
> 
> 时间：2012-09-21T14:17:30.560
> 
> 标签：javascript, html

我是 javascript 的初学者！我正在尝试从同一脚本标签内的另一个函数调用一个函数。当我在不发送参数的情况下执行此操作时，它可以正常工作，但是当我使用未调用另一个函数的参数执行此操作时。

这是我正在做的

```
function measurement_convert()
{
var mc = "Measurement Conversion";
    txt = "<h2>"  + mc + "</h2> <br><br>";

    txt +=
        "<form action='' method='post'>" +
        "Select Type <select name='conversion_type' onchange='loadXML('abcd')'> "+
                    "<option value='area'>Area</option>"+
                    "<option value='length'>Length</option>"+
                    "<option value='volume'>Volume</option>"+
                    "<option value='weight'>Weight</option>"+
                    "</select> <br><br>"
    document.getElementById("content_main_top").innerHTML=txt;
} 
```

所以，我从`onchange`这个表单中调用函数。

这是另一个功能

```
 function loadXML(var1)
 {
    document.getElementById("content_main_top").innerHTML=null;
    document.getElementById("content_main_bottom").innerHTML=null;
 } 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:19:20.703

您的问题是您正在尝试嵌套相同类型的报价：

```
onchange='loadXML('abcd')' 
```

这实际上被解释为：

```
onchange='loadXML(' 
```

相反，请尝试（注意转义的双引号，因为此代码位于 PHP 字符串中）：

```
Select Type <select name=\"conversion_type\" onchange=\"loadXML('abcd')\"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:21:41.170

您的单引号在 onchange 值中发生冲突，因为您使用它来关闭值。

您可以将其更改为：

```
"Select Type <select name='conversion_type' onchange=\"loadXML('abcd')\"> " 
```

# javascript - 如何检查是否已下载所有 CSS 文件以使用 JavaScript 插入 HTML？

> ID：12532344
> 
> 赞同：3
> 
> 时间：2012-09-21T14:17:31.710
> 
> 标签：javascript, css, ajax, parallel-processing

我想通过 JS 动态插入一些 HTML 内容和一些 CSS url。

我有 3 个以上的 CSS 文件。我希望在我的内容插入页面之前下载它们。

有没有办法查出上述文件是否已经下载？

这是它应该如何工作的：

*   下载css文件；
*   下载完所有 css 文件后显示 HTML；
*   插入HTML后开始加载JS文件；
*   加载完所有 JS 文件后触发回调；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:41:24.700

> **来源：** [https ://stackoverflow.com/a/3794242/1292652](https://stackoverflow.com/a/3794242/1292652)

## 使用 AJAX 检索 CSS 文本

您可以使用 AJAX 函数创建动态 CSS URL 并将其作为纯文本获取，而不是使用混乱的解决方法来确定 CSS 是否已加载。

## 插入 CSS

获取原始文本后，您可以使用此函数将 CSS 插入`style`标签并添加回调：

```
function loadCss(cssText, callback) {
    var style = document.createElement('style');
    style.type='text/css';
    if(callBack != undefined){
        style.onload = function() {
            callback();
        };
    }
    style.innerHTML = cssText;
    head.appendChild(style);
} 
```

## 使用它

现在您可以将其用作：

```
loadCss(ajaxResponseText, function(){
    console.log("CSS loaded, you can show the dialog now :)");
}) 
```

## 允许跨域 AJAX

在您的[评论](https://stackoverflow.com/questions/12532344/how-to-check-if-all-css-files-have-been-downloaded-to-insert-html-using-javascri/12570092#comment16874972_12532456)中，您提到您必须加载`jQuery`，`jQueryUI`我猜想在不同的域上加载。

要绕过 AJAX 跨域限制，请查看[此链接](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)或[此](http://jimbojw.com/wiki/index.php?title=Introduction_to_Cross-Domain_Ajax)链接或此[库](http://www.ajax-cross-domain.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T08:52:44.157

您可以使用[YepNope.js](http://yepnopejs.com/)，YepNope 允许您构建异步条件测试以查看资源是否已加载。测试通过后，您可以告诉它注入新的 CSS 或 JS 文件。

下面的示例取自 YepNope.js 站点。

```
yepnope.injectCss( stylesheetSource [, callback ] [, elemAttributes ] [, timeout ]);

// Example
yepnope.injectCss("print.css", function () {
  console.log("css injected!");
}, {
  media: "print"
}, 5000); 
```

您甚至可以让 YepNope 先加载初始 CSS 文件，然后在完成加载后，YepNope 可以触发回调来执行其他任务，例如加载更多 JS 或 CSS 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T03:51:58.793

```
<html>
<head>
   <!-- 
       Put your styles here.  Make sure the *last* CSS file has the following:
       body { display: block !important }

       This will allow the stylesheets to load while the body is hidden.  
       When the last stylesheet is loaded, the body will be visible.
   -->
</head>

<body style="display: none">
    <!-- Lots of HTML here -->

    <!-- 
        Put your script tags here.
        In the first script, I recommend binding to the window.load event...  
        which will be fired once all your scripts are done loading.
    -->
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:24:02.157

我认为这有点符合您的要求：

```
<html>
  <head>
    <!-- CSS Stuff goes here -->
    <!-- JS Stuff come right after -->
  </head>
  <body>
    <!-- HTML Stuff comes withing Body -->
  </body>
</html> 
```

这将导致：-

1.  并行下载所有 CSS 文件；
2.  然后解析并显示 HTML 内容；
3.  浏览器获取所有 JS；
4.  JS 是 tun，它可以做任何它想要的插入；

你的问题有点混乱，你能澄清一下吗？我不明白你为什么*需要*这样的订单，你能给出大图吗？JS 旨在成为一种即发即弃的语言，查看是否所有内容都已下载会很尴尬。这对您有意义和/或对您有帮助吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T10:05:34.153

我知道这不是一个很好的解决方案，但是您可以使用 AJAX 获取 CSS 文件并将其内容添加到 a `<style>`，而不是将 a 插入`<link>`到 DOM。使用 AJAX，您可以确定何时完全下载 CSS，并根据您的条款将整个内容添加到页面中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T18:18:13.680

> **来源：** [https ://stackoverflow.com/a/8122005/1292652](https://stackoverflow.com/a/8122005/1292652)

出于同样的原因，我不建议您这样做，因为您不应该使用`while`循环来实现`sleep()`，但如果必须，您可以尝试一下。

在链接的答案中，添加了参考样式。例如：`#ensure-cssload-8473649 { display: none }`。但是由于您正在下载不受您控制的文件，因此您必须从工作表中选择一些样式进行检测。

`cssLoad()`功能是：

```
var onCssLoad = function (options, callback) {
    var body = $("body");
    var div = document.createElement(constants.TAG_DIV);
    for (var key in options) {
        if (options.hasOwnProperty(key)) {
            if (key.toLowerCase() === "css") {
                continue;
            }
            div[key] = options[key];
        }
    }

    var css = options.css;
    if (css) {
        body.appendChild(div);
        var handle = -1;
        handle = window.setInterval(function () {
            var match = true;
            for (var key in css) {
                if (css.hasOwnProperty(key)) {
                    match = match && utils.getStyle(div, key) === css[key];
                }
            }

            if (match === true) {
                window.clearTimeout(handle);
                body.removeChild(div);
                callback();
            }
        }, 100);
    }
} 
```

您可以将其用作：

```
onCssLoad({
    "id": <insert element CSS applies to>,
     css: <insert sample CSS styles>
}, function () {
    console.log("CSS loaded, you can show the dialog now :)");
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T19:11:45.150

你为什么不在页面上添加一个元素并检查它应该有一些 js 的一些样式。如果它具有该样式，则该样式表可能已加载。

像这样：

```
if (document.getElementById("csspage-3-box").style.color === "#somethingUnique") {
    //it is loaded
} 
```

您可以附加一些隐藏的 div，其 ID 对每个样式表都是唯一的。如果他们有任何样式，那么您就知道您想要的工作表已加载。这个手术很便宜。它确实添加了一些非语义的 div 元素。话虽如此，我觉得每个人的 DOM 中都至少有一个非语义元素。

只是一个建议，但 3 个 css 文件并不多。其他简单的解决方案包括：

A）您可以只对它们进行 cat 和缩小，然后一次将它们全部交付。
B) 将它们扔到 CDN 上（如 aws s3 + cloudfront），这非常便宜，它们将被并行加载。
C) 照常加载它们。您也可以将它们放在子域中。

现在，如果我是你，我会把我的 CSS 分成一堆文件。3 文件太少。我会分离出网格和每个元素类型。然后在每页（或页组）的基础上重新组合它们。这使您可以根据需要包含每个单独的部分。

毕竟附加一个链接标签是相当容易的（只要你能很容易地得到它的路径）。我建议使用链接而不是样式标记，因为如果您确实使用 CDN 路由或子域路由，如果尝试使用一些 xhr 获取 css 文件的内容，则会遇到跨域问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-26T20:24:20.483

在构建我们团队开发的应用程序时，可能会有许多 CSS 和脚本文件，而您的 HTML 的头部最终可能看起来相当麻烦。我构建了一个小脚本，它将通过将文件作为数组传递给方法来加载所有文件。但是，我在自己的脚本文件中有 loadCSS()，我只是通过 HTML 中的脚本标记调用并传入数组。代码采用整体格式，以便于查看。

```
window.onload = function() {//Use $(document).ready() if using jQuery

    var cssArray = ["Style01.css", "Style02.css", "Style03.css"];
    loadCSS(cssArray, function () {

        alert("Style sheets have been loaded.");    
    });
    //Note: You can do a similar process for the JS files.
    //Load HTML when CSS is finished - Shown below
    loadHTML(); 
}

function loadCSS(array, callback) {

var cssArray = array;

    for (var i = 0; i < cssArray.length; i++)
    {
        document.write("<link rel='stylesheet' type='text/css' href='styles/" + cssArray[i] + "' />");
        //console.log(cssArray[i] + " style sheet has been loaded.");

        //Detects when for loop is finished evaluating the Array
        if (i == cssArray.length - 1) {

            return callback();
        } 
    }

    //loadHTML() can also be invoked here to ensure CSS files have been loaded.
} 
```

如果您尝试动态构建一些 HTML，那么您可以在加载 CSS 文件后尝试类似的操作。

```
function loadHTML() {

//Create Main Table
var mainTable = document.createElement("table");
mainTable.id = "mainTable";
mainTable.cellPadding = 0;
mainTable.cellSpacing = 0;
mainTable.border = 0;       

//Create Body
var mainBody = document.createElement("tbody");   

//Create Table Row
var mainTR = document.createElement("tr");
mainTR.style.height = "50px";
mainTR.className = ""; //Insert class from one of the style sheets

//Create Main Cell
var mainTD = document.createElement("td");
mainTD.id = "mainTD";
//mainTD.style.width = "";
mainTD.style.textAlign = "left";
mainTD.style.padding = "5px 10px 5px 10px";
mainTD.className = ""; //Insert class from one of the style sheets
mainTD.innerHTML = "Test Text";

mainTR.appendChild(mainTD); 
mainBody.appendChild(mainTR);
mainTable.appendChild(mainBody);     

document.body.appendChild(mainTable);               
} 
```

如果您有任何问题，请随时提问。尽管已经发布了一些很好的示例，但希望这会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-30T13:12:46.967

关于什么 ：

```
$(document).ready(function() {
    $("body").hide();
}); 
```

然后，在下载的 css 文件中：

```
body { diaplay:block; } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-30T13:52:19.240

用于`loadCSS`加载您的`CSS`. 并在内部`onload`方法中放置您要在所有 css 加载后执行的代码。

```
var counter = 0;
function onload(){
   counter--;
    setTimeout(function(){ // insuring if loaded immediately 
        if(counter == 0){ 
       // your code  here //******** CODEREPLACE ************/
          alert('all css files loaded!');
         }
    });
}
function loadCSS(href){
    counter++;
    l  = document.createElement('link');
    l.href = href;
    l.onreadystatechange = function () { // For IE
          if (this.readyState == 'loaded'){
              onload.call( this );
           }
     };
    l.rel = 'stylesheet';
    l.type='text/css';
    l.onload = onload;
    document.getElementsByTagName('head')[0].appendChild(l);
}

loadCSS('http://www.google.co.in/search?q=load+css+files+dynamically&aq=f&oq=load+css+files+dynamically&sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8'); 
```

# mysql - 在 mysql + codeigniter 中非法混合排序规则

> ID：12532348
> 
> 赞同：0
> 
> 时间：2012-09-21T14:17:45.793
> 
> 标签：mysql, codeigniter

> **可能重复：**
> [MySQL 非法混合排序规则](https://stackoverflow.com/questions/12247120/mysql-illegal-mix-of-collations)

我正在使用 codeigniter 框架实现查询。

在下面执行此查询时，我总是收到此错误“排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）的非法混合操作'='”：

```
 $customer_name = "orduña's";

 $escape_string = mysql_escape_string($customer_name);

 $sql = "SELECT* FROM raw_customer WHERE customer_name ='$escape_string'";
 $query = $this->db->query($sql);
 return $query->row_array(); 
```

我很确定我的数据库已经设置为 utf8 字符集和 utf8_general_ci 进行排序，甚至尝试过 utf8_unicode_ci。

我也很确定我的数据库表也与 utf8 一致。

我也很确定 header 中的 utf 8 元标记也实现在 head 标记上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:38:44.110

你应该尝试这个查询作为[这个问题](https://stackoverflow.com/questions/12190293/illegal-mix-of-collations-mysql-error)的参考同样的问题，但有连接和表的字符集和排序规则`latin1`，`latin1_swedish_ci`

```
$sql = "SELECT* FROM raw_customer WHERE customer_name =( _utf8 '$escape_string' )"; 
```

# .net - 巡航控制因 VaultVersionChecker 失败：CheckForModifications。可能是存储库路径空间

> ID：12532350
> 
> 赞同：1
> 
> 时间：2012-09-21T14:18:02.237
> 
> 标签：.net, continuous-integration, cruisecontrol.net

我正在将一个项目置于巡航控制.net 之下。我正在使用最新的 CCNet 版本 1.8.2.0。该项目不断因错误而中断

```
Failing Tasks : VaultVersionChecker: CheckForModifications 
```

挖掘更深的巡航控制正在尝试执行命令

```
"C:\Program Files (x86)\SourceGear\Vault Client\vault.exe 
versionhistory $/projects/Project Name/Project -rowlimit 1 
-host myhost -user myuser -password ***** -repository "MyRepository" 
```

如果直接在命令行上运行，则会失败，但是如果我将其更改为将存储库包装在撇号中，那么它可以直接在命令行上执行，即

```
"C:\Program Files (x86)\SourceGear\Vault Client\vault.exe 
versionhistory "$/projects/Project Name/Project" -rowlimit 1 
-host myhost -user myuser -password ***** -repository "MyRepository" 
```

所以-巡航控制似乎失败了，因为我的存储库文件夹有一个空格，即

```
$/projects/Project Name/Project 
```

我不愿意更改保险库中的文件夹以使巡航控制正常工作。奇怪的是，这种设置在以前版本的巡航控制系统中运行良好。

我对这个项目的配置是

```
<project>
    <name>NRE Test</name>
    <!-- Get latest from Vault -->
    <sourcecontrol type="vault" autoGetSource="true" applyLabel="false">
      <executable>C:\Program Files (x86)\SourceGear\Vault Client\vault.exe</executable>
      <username>myuser</username>
      <password>mypassword</password>
      <host>myhost</host>
      <repository>MyRepository</repository>
      <folder>$/projects/Project Name/Project</folder>
      <ssl>false</ssl>
      <cleanCopy>true</cleanCopy>
      <timeout units="minutes">10</timeout>
      <useWorkingDirectory>false</useWorkingDirectory>
      <workingDirectory>C:\Program Files (x86)\CI\CruiseControl.NET\Projects\Project</workingDirectory>
    </sourcecontrol>
    <tasks>
<!-- More tasks -->
    </tasks>
  </project> 
```

所以 - 我对撇号是这里的问题是正确的吗？我怎样才能绕过这个？我是否错过了另一个问题。

非常感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T08:15:32.573

只是一个猜测，但你有没有试过这个：

```
<sourcecontrol type="vault" autoGetSource="true" applyLabel="false">
  <!-- ... -->
  <folder>"$/projects/Project Name/Project"</folder>
  <!-- ... -->
</sourcecontrol> 
```

# api - 通过soap admin api从zimbra服务器按域获取别名列表

> ID：12532352
> 
> 赞同：0
> 
> 时间：2012-09-21T14:18:02.010
> 
> 标签：api, soap, zimbra

我一直在阅读 admin api 参考文档，但似乎找不到列出已为域创建的别名的方法。

当然，还有 addAccountAlias 命令：

```
<AddAccountAliasRequest id="{value-of-zimbra-id}" alias="{alias}" /> 
```

和 removeAccountAlias 命令：

```
<RemoveAccountAliasRequest [id="{value-of-zimbra-id}"] alias="..." /> 
```

但我没有看到检索域别名的方法。getAllAccounts 和 getAllDistributionLists 不返回它们。

对此的任何帮助将不胜感激。

这是我引用的 api 文档：[Zimbra SOAP Api Reference](http://files.zimbra.com/docs/soap_api/8.0/soapapi-zimbra-doc/api-reference/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:05:04.877

我找到了解决方案，任何给定帐户的别名都可以在 GetAccount/GetAllAccounts 响应中名为“zimbraMailAlias”的帐户属性中找到。

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header><context xmlns="urn:zimbra"><change token="2499"/></context></soap:Header><soap:Body><GetAllAccountsResponse xmlns="urn:zimbraAdmin">
<account id="343058d1-0b31-4aad-8cc5-1bd819a597a5" name="someone@somewhere.com">
...
<a n="zimbraMailAlias">alias1@somewhere.com</a>
<a n="zimbraMailAlias">alias2@somewhere.com</a>
...
</account></GetAllAccountsResponse></soap:Body></soap:Envelope> 
```

# windows - 文件夹图标更改不生效

> ID：12532370
> 
> 赞同：4
> 
> 时间：2012-09-21T14:19:11.453
> 
> 标签：windows, delphi, winapi, registry

我通过注册表项更改默认系统文件夹图标

```
Reg := TRegistry.Create; 
try 
  Reg.RootKey := HKEY_LOCAL_MACHINE;
  Reg.OpenKey('Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons', True);
  Reg.WriteString('3', 'C:\MyIcon.icl,0');
finally
  RegFile.Free;
end; 
```

我可以更改注册表值，但问题是我需要重新启动操作系统才能使其生效。

为了解决它，我尝试了：

```
SendMessage(HWND_BROADCAST, WM_SETTINGCHANGE, 0, 0); 
```

和：

```
SHChangeNotify(SHCNE_ASSOCCHANGED, SHCNF_IDLIST, nil, nil); 
```

它适用于WinXP，但不适用于Win7。

win7下怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T14:19:18.363

尝试从任务管理器“结束任务”进程“explorer.exe”，

并再次启动它（运行-> explorer.exe），

如果通过此过程您可以看到更新的图标，请尝试以编程方式执行此操作，这样您就不必重新启动。

# iphone - iOS 6.0 上的 CADisplayLink 未保留目标

> ID：12532377
> 
> 赞同：3
> 
> 时间：2012-09-21T14:19:20.767
> 
> 标签：iphone, ios, ios6, cadisplaylink

我有这样的代码：

```
NSInvocation* invocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:@selector(updateFrame)]];
[invocation setTarget:self];
[invocation setSelector:@selector(updateFrame)];
displayLink_ = [[CADisplayLink displayLinkWithTarget:invocation selector:@selector(invoke)] retain];
[displayLink_ setFrameInterval:1];
[displayLink_ addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

在 iOS 6.0（在 5.1 中，此代码工作正常），当此代码调用时我有两个变体：EXC_BAD_ACCESS 或'调用无法识别的选择器“调用”'。似乎 displayLinkWithTarget:selector: 方法不保留目标。当我添加 [invocation retain] 行时，代码可以正常工作。是iOS 6.0的bug吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:00:10.163

**这是有用的相关信息，而不是答案。**

而不是使用`NSInvokation`你可以使用弱代理，就像我在我对这个问题的实际回答中所做的那样。很简单，代码如下：

**JAWeakProxy.h：**

```
#import <Foundation/Foundation.h>

@interface JAWeakProxy : NSObject

@property (weak, nonatomic) id  target;

+ (JAWeakProxy*)weakProxyWithTarget:(id)target;

@end 
```

**JAWeakProxy.m：**

```
#import "JAWeakProxy.h"

@implementation JAWeakProxy

+ (JAWeakProxy*)weakProxyWithTarget:(id)target
{
    JAWeakProxy* newObj = [self new];
    newObj.target = target;
    return newObj;
}

- (BOOL)respondsToSelector:(SEL)sel
{
    return [_target respondsToSelector:sel] || [super respondsToSelector:sel];
}

- (id)forwardingTargetForSelector:(SEL)sel
{
    return _target;
}

@end 
```

注意：这是 ARC 代码，如果不使用 ARC `autorelease`，则需要输入。`weakProxyWithTarget:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:49:03.420

我有同样的问题。我实际上*想要*一个弱引用，但由于它被记录为强引用并且在其他版本的 iOS 中表现如此，我使用弱代理对象将选择器转发到我真正想要它去的地方。为了确保保留代理对象，我必须想办法在损坏的 iOS 版本上安全地保留它，而不会为非损坏版本过度保留它。我想出了一个非常优雅的单行解决方案（解释它的四行注释*之后的行）：*

```
JAWeakProxy*    weakSelf = [JAWeakProxy weakProxyWithTarget:self];
_displayLink = [CADisplayLink displayLinkWithTarget:weakSelf selector:@selector(displayLinkUpdate:)];
// Due to a bug in iOS 6, CADisplayLink doesn't retain its target (which it should and is
// documented to do) so we need to ensure a strong reference to the weak proxy object is
// created somewhere. We do this by adding it as an associated object to the display link
// which means that it gets retained for as long as the display link object is alive.
objc_setAssociatedObject(_displayLink, @"Retain the target, bitch!", weakSelf, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

记得要`#import <objc/runtime.h>`。使用关联对象非常棒，因为它在显示链接被`dealloc`编辑时被释放，并且在操作系统的非损坏版本上，它仅仅意味着该对象被显示链接保留两次。

# java - 枚举在 android/java 中使用 .setText

> ID：12532384
> 
> 赞同：2
> 
> 时间：2012-09-21T14:19:56.910
> 
> 标签：java, android, enums, stub, settext

我正在用 Java 构建一个 Android 应用程序，在 XML TextView 的 .setText 场景中使用 Enum 变量，我完全理解我的 Enum 的数据类型错误，但我需要你的帮助来解决这个问题。

我使用 setText 的代码：

```
package com.mastermind;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.TextView;

  public class Guess_database extends Activity {

public ArrayList<Guess> guess_list;
public static int guess_counter = 0;
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.guess_layout);
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    for (Guess g : guess_list) {

        View stub = inflater.inflate(R.layout.guess_stub, null);
        ((TextView) stub.findViewById(R.id.guess)).setText(g.v1 + ", "+ g.v2);
        ((TextView)stub.findViewById(R.id.guess_positions)).setText(g.c1);

    }

}
   } 
```

这是我的 Enum 变量的类：

```
 package com.mastermind;

import java.io.Serializable;

public class Guess implements Serializable
{
static int v1, v2, v3, v4;

public static GuessStatus c1,c2, c3, c4;

enum GuessStatus
{
    CORRECT,
    WRONG,
    CORRECT_WRONG_PLACE;
}
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:21:59.037

```
((TextView)stub.findViewById(R.id.guess_positions)).setText(g.c1.toString()); 
```

# android - 在 android 市场更新应用程序的别名是否应该相同？

> ID：12532385
> 
> 赞同：0
> 
> 时间：2012-09-21T14:19:57.837
> 
> 标签：android

我已经在安卓市场推出了一款应用，现在我要发布下一个版本。我知道要更新应用程序，我想使用相同的密钥库和相同的密码。现在我开始怀疑我的别名了。无论我必须使用相同的别名还是不同的别名，哪一个更适合在 android market 中更新我的应用程序。如果我使用不同的别名，应用程序是否会更新。2）是否可以更改我的私钥库的密码。谁能解释一下更改密码的步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:27:06.270

最重要的是，要非常小心您的密钥库！您只能使用已使用相同密钥库签名的新版本更新您的应用程序。我认识的不止一个人（包括我自己）丢失或损坏了他们的密钥库，不得不上传一个具有不同应用标识符的全新应用，并尝试让他们的所有用户去获取那个应用！这是一个极端的麻烦！

至于“别名”，您是指设备图标下显示的名称吗？如果是这样，您可以随时更改。Play 商店使用包标识符 (com.google.etc) 来识别您的应用程序，只要您保持不变，它就会知道它是哪个应用程序。

# windows-7 - 安装 IIS 6 元数据库和 IIS 6 配置兼容性时出错

> ID：12532389
> 
> 赞同：0
> 
> 时间：2012-09-21T14:20:09.693
> 
> 标签：windows-7, iis-6

在我安装 IIS 6 Metabase 和 IIS 6 Configuration Compatibility 时，出现如下错误，请问有人知道吗？
**[IIS 错误消息]**

![IIS 错误消息](../Images/2e8e72aacd2b987b0215d4489fa27a35.png)

**机器配置：**

![在此处输入图像描述](../Images/b0cf6c2c1fc34b78171011ae8c9555e9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T22:30:35.513

您是否在 eventvwr.msc 中捕获了任何日志？（事件查看器）

包的来源可能已损坏

# hadoop - hadoop：Reducer 输出到另一个 Reducer

> ID：12532392
> 
> 赞同：7
> 
> 时间：2012-09-21T14:20:21.713
> 
> 标签：hadoop, mapreduce

如果我们想按相同的键分组（第一个减速器的输出），是否可以将减速器的输出直接发送到另一个减速器

有时在链接时我观察到我正在使用映射器来读取输入并将其复制到输出。因此想知道 idf 是否可以将输出直接馈送到减速器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:26:37.160

尽管您可以将 map-reduce 作业甚至映射器链接在一起；据我所知，您不能直接链接减速器。

在内部，您可以在 reducer 之前使用 ChainMapper 链接映射器**，在**reducer**之后**使用[ChainReducer](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/ChainMapper.html)链接[Mappers](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/lib/ChainReducer.html)。

# excel - Excel 数据透视表 - 日期范围筛选器

> ID：12532393
> 
> 赞同：1
> 
> 时间：2012-09-21T14:20:22.217
> 
> 标签：excel, vba

我对 Excel 很陌生。我已经创建了一个数据透视表，一切都按照我想要的方式工作，除了一件事，日期过滤器。默认情况下，使用报告过滤器，从我的电子表格中提取的所有日期都在下拉列表中，并且必须单独检查它们以过滤表格。

我想知道是否有一种解决方法可以使用日期范围过滤表格，究竟如何使用电子表格中的日期过滤器来完成。为什么我希望能够按月过滤我的数据透视表，而不必手动选择给定月份中的所有日期。这可以使用VBA完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:14:18.347

我能够在不编写任何代码的情况下完成这项工作。结果很简单。为了从我的日期过滤器中获得更多功能，我暂时将日期字段从报告过滤器移动到行标签。从这里我将日期字段按月分组，然后将其移回报告过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:40:13.480

Excel 在数据透视表上具有非常强大的内置日期过滤器选项（您使用的是哪个版本的 excel）：

![数据透视表日期过滤器](../Images/18faf0b1991b674873fa0dbacb9aa2d9.png)

祝你好运。

**编辑：**

使您的数据透视表动态化。此宏将更新您的数据透视表：

```
Sub UpdatePivotTable()
    Sheets(1).PivotTables(1).RefreshTable
End Sub 
```

您可以根据需要编辑/排序/过滤初始数据。

**EDIT2：** 所以你也许可以使用这样的东西 - 然后你可以自动填充 x 到你想要的日期 - 然后运行数据透视表更新宏： ![自定义报告过滤器1](../Images/784273fe868d3ec7a070569a520a4d80.png)

祝你好运。

# ios6 - iOS 6 Developer Preview 4 vs 官方 iOS 更新

> ID：12532395
> 
> 赞同：1
> 
> 时间：2012-09-21T14:20:30.763
> 
> 标签：ios6

自从它在我的 iPhone 上发布以来，我已经安装了 iOS DP4。现在官方更新发布了，我进入设置检查更新，但它说我的操作系统是最新的。这是预期的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:35:18.647

下载iOS6：[http ://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/](http://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/)

将 iTunes 升级到至少 10.7

将你的 iPhone 连接到 iTunes

（备份您的设备）

Shift+单击更新按钮，手动指定更新文件（您在步骤1中下载的那个）

单击“前往”。

# android - 将正则表达式匹配添加到 HashMap 并访问它们

> ID：12532396
> 
> 赞同：0
> 
> 时间：2012-09-21T14:20:30.660
> 
> 标签：android, regex, hashmap

本质上，我想拿一堆：

```
<Cube currency="USD" rate="1.2954"/> 
```

并将它们放入格式的哈希图中：

```
String USD, String 1.2954 
```

我有以下代码：

```
Map<String, String> list = new HashMap<String, String>();
Pattern p = Pattern.compile("<Cube\\scurrency='(.*)'\\srate='(.*)'/>");
Matcher matcher = p.matcher(currency_source);
while (matcher.find()) {
    list.put(matcher.group(1)); // PROBLEMATIC
} 
```

我不知道如何正确地将货币和汇率添加到哈希图中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:28:45.603

（我看到您正在尝试使用正则表达式解析 XML。也许您应该考虑使用 XML 解析器，例如[是否有更简单的方法来解析 Java 中的 XML？](https://stackoverflow.com/questions/1719261/is-there-an-easier-way-to-parse-xml-in-java)）

首先，您的正则表达式是错误的，因为`(.*)`它太贪婪了。将其更改为：

```
Pattern p = Pattern.compile("<Cube\\scurrency='([^']*)'\\srate='([^']*)'/>"); 
```

这样`'`就不会匹配了。其次，该[`.put()`方法](http://developer.android.com/reference/java/util/Map.html#put%28K,%20V%29)仅在其 2 个参数中获取键和值。所以你可以使用：

```
list.put(matcher.group(1), matcher.group(2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:27:41.033

一个`Map`或`HashMap`按键值对模型工作，如果你想添加我认为货币是你的关键的键和值对并评价你的价值，你会这样做，

```
map.put("$", matcher.group(1)); 
```

编辑：

尝试改进您的正则表达式，以便它为您提供两个不同的组，第一个是货币类型，第二组是您的货币值，然后将其放入您的地图

map.put(matcher.group(1), matcher.group(2));

对于正则表达式生成，我使用[TX2RE](http://txt2re.com/)，用它来生成正确的正则表达式。

# android - 从Activity调用动态片段的方法

> ID：12532397
> 
> 赞同：0
> 
> 时间：2012-09-21T14:20:34.383
> 
> 标签：android, android-fragments, broadcastreceiver

我陷入了这个问题。

我想从我的父 FragmentActivity 调用 Abc 片段的方法，该方法动态地处理来自 FrameLayout 的片段。现在 Activity 有一个广播接收器，它监听来自服务的更新。即使 Abc 片段当前不是显示的片段，活动也可以在任何时候接收广播。现在，如果我使用 fragmentManager().findFragmentById(id) 找到一个片段，其中 id==id 的 framelayout ，我不能简单地将其转换为 Abc 片段，因为如果它不是当前显示的片段，则会出错。现在我怎么知道 Abc 当前已显示，以便我可以将更新传递给它。我无法在 Abc 本身内部实现更新接收，因为 Activity 需要将更新用于其他目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:29:10.830

您可以在创建片段时为其设置标签

```
Fragment fragment = new MyFragment();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.replace(R.id.fragment_host, fragment,"FragmentTag");
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.addToBackStack("");
ft.commit(); 
```

并以这种方式搜索

```
Fragment frag = (Fragment) getFragmentManager().findFragmentByTag("FragmentTag"); 
```

# css - 垂直堆叠css中的div元素（具有动态高度）

> ID：12532398
> 
> 赞同：0
> 
> 时间：2012-09-21T14:20:53.807
> 
> 标签：css, html

我现在正在尝试几个小时来完成以下工作：

我想在一个容器 div 中有三个 div。

1.  它们需要垂直堆叠（topDiv、middleDiv、bottomDiv）
2.  topDiv 应该是 20px 高（固定）
3.  middleDiv 应该占用剩余的空间（如表格中的 * 或 LaTeX 中的 \vfill）
4.  bottomDiv 应该是 50px 高（固定）

那听起来不那么难吗？我就是想不通！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:32:35.167

像这样的东西可能对你有用：

[http://jsfiddle.net/nCrEc/1/](http://jsfiddle.net/nCrEc/1/)

编辑：

此版本随浏览器窗口缩放 [http://jsfiddle.net/nCrEc/2/](http://jsfiddle.net/nCrEc/2/)

html:

```
<div class="con">
    <div class="top"></div>
    <div class="middle"></div>
    <div class="bottom"></div>
</div> 
```

CSS：

```
.con{width:200px; top:0;bottom:0;left:0; position:absolute;background:#ff0;}

.top{width:200px;height:20px;position:absolute;top:0;left:0;background:#f60;}

.bottom{width:200px;height:50px;position:absolute;bottom:0;left:0;background:#f60;}
.middle{width:200px;min-height:1px; position:absolute;bottom:50px;top:20px;left:0;background:#06f;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:42:41.610

[使用Flexbox](http://dev.w3.org/csswg/css3-flexbox/#flex-direction-property)很容易，但它仍在开发中，目前仅在 Chrome 中真正有效。

否则，您可以使用它[`* {box-sizing: border-box;}`](http://paulirish.com/2012/box-sizing-border-box-ftw/)来让您的生活更轻松。如果支持旧浏览器对您很重要，甚至还有一个[IE6-7 polyfill 。](http://html5please.com/#box-sizing)

这是一个[例子](http://codepen.io/anon/pen/LAlxd)。

```
*{-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; margin:0; padding:0;}
html,body{width:100%; height:100%;}
div{width:100%; background:salmon;}
.middle {background:lightblue; height:100%; padding:100px 0;}
.top, .bottom {height:100px; position: absolute; left:0;}
.top {top:0; }
.bottom {bottom: 0;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:38:59.913

我在这个网站上做了一些非常相似的事情：

[http://www.probusllandudno.org.uk/](http://www.probusllandudno.org.uk/)

单击 2012 年晚餐链接（如果使用 FF Web 开发人员，您可以使用查看生成的源代码）

要点是将 div 在文档中按顺序排列，分配固定宽度（在我的情况下）或宽度 = 100%，顶部和底部 div 具有固定高度，请参阅 css

附录

另一个响应提供了一个复杂的解决方案，涵盖了最具体的填充问题。您尚未指定您的内容如何影响解决方案。我的网页只是居中的文本

# sql - 如何在 Oracle / SQL 中检索给定序列中的行？

> ID：12532399
> 
> 赞同：2
> 
> 时间：2012-09-21T14:21:02.997
> 
> 标签：sql, oracle

我有一个带有主键 MY_PK 的表 MY_TABLE。然后，我有一个有序主键列表，例如 (17,13,35,2,9)。

现在我想用这些主键检索所有行，并以与给定键列表相同的方式保持行的顺序。

我最初做的是：

```
SELECT * FROM MY_TABLE WHERE MY_PK IN (:my_list) 
```

但是返回行的顺序是随机的，不再与给定键的顺序相对应。有没有办法做到这一点？我唯一想到的是制作许多 SELECT 语句并将它们与 UNION 连接，但是我的主键列表可能很长，并且包含数百甚至数千个键。我想到的替代方法是在应用程序中重新排序行，但我更喜欢不需要这样做的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:49:42.973

Oracle 仅在使用显式 ORDER BY 语句排序时才*保证结果集的顺序。*所以你的实际问题是，“我如何保证将我的结果排序为任意顺序？”

那么简单的答案是你不能。更复杂的答案是您需要将任意顺序与可以排序的索引相关联。

我假设您将 ID 列表作为字符串获取。（如果你将它们作为一个数组或类似的类似表格的东西，生活会更容易。）所以首先你需要标记你的字符串。在我的示例中，我使用了[另一个 SO 线程](https://stackoverflow.com/questions/3142665/how-to-convert-csv-to-table-in-oracle)`splitter`中的函数。我将在公共表表达式中使用它来获取一些行，并使用 rownum 伪列来合成索引。然后我们将 CTE 输出连接到您的表中。

```
with cte as
    ( select s.column_value as id
             , rownum as sort_order
       from table(select splitter('17,13,35,2,9') from dual) s 
    )
select yt.*
from your_table yt
where yt.id = cte.id
order by cte.sort_order 
```

警告：这是未经测试的代码，但原则是合理的。如果您确实遇到无法解决的编译或语法错误，请在评论中提供足够的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:28:15.293

首先，与工会一起这样做不一定有帮助。*除非您有`order by`*子句，否则无法保证结果集中的行顺序。

这是一种解决方案，尽管它并不优雅：

```
with keys as (
     select 1 as ordering, 17 as pk from dual union all
     select 2 as ordering, 13 as pk from dual union all
     select 3 as ordering, 35 as pk from dual union all
     select 4 as ordering, 2 as pk from dual union all
     select 5 as ordering, 9 as pk from dual
   )
select mt.*
from My_Table mt join
     keys
     on mt.my_pk = keys.pk
order by keys.ordering 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:56:09.117

保证结果集顺序的方法是使用 ORDER BY，所以我要做的是在一个临时表中插入 2 列您的主键和一个稍后用于创建 ORDER BY 的 secuencial ID。您的临时表将是：

```
PrimaryKey   ID
-------------------
17            1
13            2
35            3
2             4
9             5 
```

之后，只需使用您的表和 PrimaryKey 列上的临时表的连接，并按临时表的 ID 列排序。

# multithreading - 使用 IPC::open2 管道传输大文件

> ID：12532402
> 
> 赞同：3
> 
> 时间：2012-09-21T14:21:06.973
> 
> 标签：multithreading, perl

我制作了一个包含另一个工具（overlapFeatures）的 perl 脚本，这样我就可以即时正确地转换我的文件格式。我正在处理的文件都是制表符分隔的表格，通常有 200 万行左右。就其本身而言，overlapFeatures 可以轻松处理这些问题。

但是，我认为我正在通过一次管道如此多的线路导致管道锁定。我知道我需要以某种方式线程化，以便我可以同时读取和写入子进程。但是我真的不明白如何在 perl（或任何其他程序）中正确使用线程。据我了解，我可以使用`threads`甚至`IPC::run`解决我的问题。

我最终陷入僵局的原始脚本是这样的：

```
use strict;
use warnings;
use IPC::Open2;

my $infile = shift;
my $featurefile = shift;

my $command = 'overlapFeatures';
my @args = (qw (-a stdin -b), $featurefile);

my ($input, $output);
my $pid = open2($output, $input, $command, @args) 
    or die "Failed with error $!\n";

open (my $infh, '<', $infile) or die "Can't open $infile\n";
while (<$infh>){
    # Do some format conversion...
    chomp
    my @cols = split /\t/;
    # print a modified line to the tool
    print $input join ("\t", @cols[0,2,3,1,5,4]),"\n";
}
close ($input);

while (<$output>){
    # format conversion for ouput
    chomp;
    my @cols = split /\t/;
    print join (",",@cols[0,1,2,5,3,8]),"\n";
}
close ($output); 
```

[我尝试根据如何使用 IPC::Open2 过滤大量数据来](https://stackoverflow.com/questions/7284198/how-to-filter-a-lot-of-data-with-ipcopen2)重写脚本以使用线程？像这样：

```
use strict;
use warnings;
use IPC::Open2;
use threads;

my $infile = shift;
my $featurefile = shift;

my $command = 'overlapFeatures';
my @args = (qw (-a stdin -b), $featurefile);

my ($input, $output);
my $pid = open2($output, $input, $command, @args) 
    or die "Failed with error $!\n";

my $thread = async {
    print join(",", qw(seqid start end strand read feature name)),"\n";
    for(;;) {
        my $line = <$output>; # should block here and wait for output?
        last if !defined $line; # end of stream reached?
        print STDERR "Got line $line\n";
        # Do some format conversion...
        chomp $line;
        my @cols = split /\t/, $line;
        # print a modified line to the tool
        print join(",",@cols[0,1,2,5,3,8]),"\n";
    }
    close($output)
};

{
    open (my $infh, '<', $infile) or die "Can't open $infile\n";
    while (<$infh>){
        # format conversion for ouput
        chomp;
        my @cols = split /\t/;
        print $input join ("\t", @cols[0,2,3,1,5,4]),"\n";
    }
    close ($input);
}

$thread->join();
waitpid ($pid, 0); 
```

但是，脚本仍然以同样的方式卡住，我也卡住了。我也无法弄清楚如何`IPC::run`在这种情况下使用。

我究竟做错了什么？我误解了线程吗？

* * *

编辑：花更多时间调试脚本（以及 amon 的帮助），我发现我能够从`$output`. 但是，脚本永远不会完成，并且在收到所有输出后似乎挂起。我想这是我现在唯一的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:38:45.253

这更像是一个长评论。

我在精简版本中尝试了您的代码。我删除了转换代码，使用 Unix`yes`命令作为无限数据源并将输出打印到`/dev/null`，因为我们目前对输出不感兴趣，但对程序工作感兴趣。作为您的替代品`overlapFeatures`，我曾经`cat`将数据通过不变。

```
use strict; use warnings; use IPC::Open2; use threads;

my $command = "cat";
my @args = ();

my ($input, $output);
my $pid = open2($output, $input, $command, @args) 
  or die "Failed with error $!\n";

my $thread = async {
  print $_ while defined($_ = <$output>);
  close($output)
};

{
  my $c=0;
  open (my $infh, "-|", "yes") or die;
  open my $null, ">/dev/null" or die;
  while (<$infh>){
    $c++;
    print $null $_;
    if ($c >= 1_000_000) {
      print "\n==another million==\n\n";
      $c=0
    }
  }
  close ($input);
}

$thread->join();
waitpid ($pid, 0); 
```

在一百万行中（字面意思），我打印一条状态消息以断言 IO 仍在工作。

### 结果

在使用 Perl 12.4 的 Ubuntu Linux 上进行测试，给定的脚本可以完美运行。因此可以合理地假设问题不在于 IPC 代码，而在于数据格式转换、您正在包装的程序或数据量 (`yes`输出字符串`"1\n"`，是什么导致了每行小数据的多行。(每组约 2MB，每行 2 个字节））

### 结论

可能是您正在运行不同的配置。如果您正在运行 *nix，请断言我使用的脚本也适用于您。如果没有，请明确说明此配置并尝试运行等效脚本。

也可以将你的包装器分成两个脚本，至少用于测试，所以你可以运行类似的东西

```
$ convert-to | overlapFeatures | convert-from 
```

这会将所有 IPC 委托给 shell，并断言转换正在工作并且架构是可实现的。

头脑风暴的其他不太可能的想法：

(1) 什么时候`close`进行操作？会不会是因为某种奇怪的原因，循环的一端过早退出？`print STDERR "Closing down xx\n"`s之前的a`close`可能很有趣。(2) 是否成功`open2`地`async`产生了它们的进程/线程*并*返回控制流？偏执的我会`print STDERR`在他们之后放另一个……（3）您是否从脚本中获取*任何*数据，或者流在一段时间后是否会变干？

### 编辑

`EOF`在所有写入端都为`close`d之前，管道不会产生。因此，所有线程都应该关闭它们不使用的任何东西：

```
my $thread = async {
  close $input;
  print $_ while defined($_ = <$output>);
  close($output)
}; 
```

和

```
{
  close $output;
  my $c=0;
  open (my $infh, "-|", "yes") or die;
  open my $null, ">/dev/null" or die;
  while (<$infh>){
    $c++;
    print $null $_;
    ... 
```

# php - php mysql_id() 没有得到最后一次插入

> ID：12532403
> 
> 赞同：0
> 
> 时间：2012-09-21T14:21:07.317
> 
> 标签：php, mysql-insert-id

我得到最后一个插入 ID 的 NULL 返回，如果有人可以检查我的代码，我将不胜感激。我放置了一个 ID 号来代替 $result 查询，它返回 json 回显。我的预感是它与最后一个“}”括号的位置有关。

```
if (empty($_POST) === false) {
$update_data = array(
      'company_id'              => $_POST['company_id'],
      'addpatient_firstname'    => $_POST['addpatient_firstname'],
      'addpatient_lastname'     => $_POST['addpatient_lastname'],
      'addpatient_dob'          => $_POST['addpatient_dob'],
      'patient_added'           => $_POST['patient_added']
    );

    $required_fields = array('company_id', 'addpatient_firstname', 'addpatient_lastname', 'addpatient_dob', 'patient_added');
    foreach($update_data as $key=>$value) {
        if (empty($value) && in_array($key, $required_fields) === true) {
            $errors[] = 'Fields marked with an asterisk are required';
            break 1;
        }
    }
}

if (empty($_POST) === false && empty($errors) === true) {

      $company_id   = $_POST['company_id'];
      $patient_id   = $_POST['addpatient_id'];
      $first_name   = $_POST['addpatient_firstname'];
      $last_name    = $_POST['addpatient_lastname'];
      $dob          = $_POST['addpatient_dob'];
      $updated      = $_POST['patient_added'];

      $update = array();
      array_walk($update_data, 'array_sanitize');

      foreach($update_data as $field=>$data) {
          $update[] = '`' . $field . '` = \'' . $data . '\'';
      }

      mysql_query("INSERT INTO `lab`.`patients` (`company_id`, `patient_id`, `patient_firstname`, `patient_lastname`, `patient_dob`, `patient_added`) VALUES ('$company_id', NULL, '$first_name', '$last_name', '$dob', '$updated')");
      $last_patient_id = mysql_insert_id();

      $result = mysql_query("SELECT `patient_id`, `patient_firstname`, `patient_lastname`, `patient_dob` FROM `patients` WHERE `patient_id` = $last_patient_id");

      $data[] = mysql_fetch_assoc($result);
}

      echo json_encode( $data );

/*        exit();

} else if (empty($errors) === false) {
echo output_errors($errors);
}*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:33:07.483

我在 www.php.net 中看到 mysql_insert_id() 仅适用于自动递增的列。你的主键怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:32:22.740

如果`patient_id`是 auto_increment 字段，那么您应该将此字段留在插入语句之外，而不是插入`NULL`.

```
INSERT INTO `lab`.`patients` (`company_id`, `patient_firstname`, `patient_lastname`, `patient_dob`, `patient_added`) VALUES ('$company_id', '$first_name', '$last_name', '$dob', '$updated') 
```

# iphone - 适用于 iphone 5 视网膜显示屏的图像

> ID：12532405
> 
> 赞同：19
> 
> 时间：2012-09-21T14:21:17.147
> 
> 标签：iphone, retina-display, iphone-5

iPhone 5 发布，具有新的屏幕尺寸和分辨率。

当我们使用 iPhone 4 (retina) 的图像时，我们只是在图像名称中添加了“@2x”。谁能告诉我，是否可以为新的 iPhone 屏幕添加不同的图像（背景、按钮等）？

第二个问题：我可以在我的应用程序中拥有单独的 XIB 文件：旧 iPhone、新 iPhone（如 iPhone 和 iPad）？

谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-21T14:28:33.407

这是我的博客中关于这个主题的一个例外：

[UIImage imageNamed:] 在 Retina 设备上运行时会自动加载 @2x 版本的图像。不幸的是，imageNamed: 在 iPhone 5 上运行时不会自动加载 -568h@2x 版本的图像。

有时这并不重要，例如图标和非全屏图形在 iPhone 4 和 5 上可能相同。但是，如果您有全屏背景图像，或工具栏等的全宽/全高背景图像，您将有问题。您的 480 高图像很可能会被拉伸（结果可能看起来很可怕）。

您可以手动检查屏幕尺寸并加载正确的图像，如下所示：

```
UIImage* myImage;
CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) {
   myImage = [UIImage imageNamed:@"myImage-568h.png"];
} else {
   myImage = [UIImage imageNamed:@"myImage.png"];
} 
```

有一种改变 UIImage imageNamed 的方法，它*会*自动加载正确的图像。有关详细信息，请参阅下面的链接。

更多信息：http: [//pervasivecode.blogspot.co.uk/2012/09/making-apps-work-on-iphone-5-screen-size.html](http://pervasivecode.blogspot.co.uk/2012/09/making-apps-work-on-iphone-5-screen-size.html)

编辑：@Sound Blaster 和@GrizzlyNetch*是*对的，在代码中你应该使用 imageNamed:@"myImage-568h.png"] 但*实际文件名*应该是 myImage-568h@2x.png。如果你不这样做，那么规模是不正确的，就像他们说的那样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-21T14:25:11.323

iPhone 5 没有引入新的像素密度，因此您可以使用之前使用的所有视网膜图像。

支持 iPhone 5 的新分辨率所需要做的就是让您的浏览量大增。对于大多数视图，如 tableview 和 scrollview，这不会出现任何问题。

也不需要为新分辨率添加额外的 XIB 文件，这也是不支持的。

只需将应用程序包添加`Default-568h@2x.png`到您的应用程序包中，即可让 iOS 6 让您的应用程序占用 iPhone 5 中可用的额外空间。

所有原生控件，例如标签栏，都会像您期望的那样运行。

如果您想在您的应用程序中支持 iOS4.3 和 5.*，请确保`Use Autolayout`关闭 nib 设置（界面生成器中的第一个选项卡）中的 。

然后确保正确设置视图[`autoresizingMask`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T08:06:53.560

if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) 浮点数的精确比较在任何语言中都不是一个好主意，因为它们存储在内存中的方式存在舍入错误。例如，您不能保证 568.0f 不存储为 567.9999999 或 568.0000001。使用范围要安全得多，或者在这种情况下，screenHeight > 567.1f 就足够了。我怀疑即使是 iPhone 在物理上也不支持小部分像素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-15T19:34:26.917

编辑

请注意，从 iOS8 UIScreen 开始考虑方向（检查高度可以返回两个值，纵向高度或横向高度，之前它只是纵向高度），但 xcassets 更好，您可以在这里查看： [How to addapt iphone背景？](https://stackoverflow.com/questions/26785448/how-to-addapt-iphone-background/26787780#26787780)

结束编辑

根据本克莱顿的回答，我制作了一个方便的类别来管理 iPhone 5 的图像。谢谢。

```
+ (UIImage *) imageForName:(NSString *)imageName
{
    NSString *result = imageName;

    CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
    BOOL isIphoneFive = ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f);

    if (isIphoneFive)
    {
        NSString *imageNameWithoutExtension = [imageName stringByDeletingPathExtension];
        NSString *extension = [imageName pathExtension];

        result = [NSString stringWithFormat:@"%@-568h.%@",imageNameWithoutExtension, extension];
    }

    return [UIImage imageNamed:result];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T22:47:01.700

我目前正在以这种方式检测当前设备是否是 4" iPhone，并且效果很好。hth

```
- (BOOL)isiPhone5{
    return ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0);
} 
```

# javascript - Dojo 具有/嗅探和操作系统检测

> ID：12532412
> 
> 赞同：2
> 
> 时间：2012-09-21T14:21:29.117
> 
> 标签：javascript, dojo

这些 dojo API 是否有任何操作系统检测或 32 个 64 位操作系统检测？还是我必须将它与标准 JS 结合起来？我在 Dojo 的文档中找不到任何对操作系统检测的引用。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:27:01.730

根据[功能名称](http://dojotoolkit.org/reference-guide/1.7/dojo/has.html#dojo-1-7-feature-names)列表，有以下测试：

*   `dojo/_base/sniff.js , mac`
*   `dojo/_base/sniff.js , ios`
*   `util/build/main.js , is-windows`

这似乎意味着存在某种程度的操作系统检测。您可能需要查看这些特定文件以获取更多信息。

# spring - 带有休眠 4.3 验证和错误的 Spring mvc 3.1

> ID：12532418
> 
> 赞同：0
> 
> 时间：2012-09-21T14:21:45.773
> 
> 标签：spring, hibernate, model-view-controller, validation

我有以下设置：

IndexCntl.java（控制器）：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, ModelMap map) {
        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);
        String formattedDate = dateFormat.format(date);
        map.addAttribute("serverTime", formattedDate );
        map.addAttribute("email", new Email());
        Map sexoOpts = new HashMap();
        sexoOpts.put("M", "Homem");
        sexoOpts.put("F", "Mulher");

        map.addAttribute("sexoList", sexoOpts);
        return "index";
    }

@RequestMapping(value = "/save-email", method = RequestMethod.POST)
    public String doSaveEmail(@Valid @ModelAttribute("email") Email email, Model model, BindingResult result){
        log.info("Email debug: "+email.getEmail()+" "+email.getMysexy()+" "+email.getWantedsexy());

        if (result.hasErrors()){
            log.info("Entrou result.hasError()");
            return "index";
        }
        Date date = new Date();
        email.setCreationDate(date);
        try{
            emailBo.saveEmail(email);
        }catch(Exception e){
            e.printStackTrace();
        }
        model.addAttribute("email", new Email());
        return "index";
    } 
```

index.jsp（视图）：

```
<form:form action="save-email" method="POST" modelAttribute="email" cssStyle="display:-webkit-box">
                <form:select path="mysexy" cssStyle="width:120px;">
                    <form:option value="" label="- Sou -"/>
                    <form:options items="${sexoList}" />
                </form:select>
                <form:errors path="mysexy" cssClass="errors"/>
                <form:select path="wantedsexy" cssStyle="width:120px;">
                    <form:option value="" label="- Busco -"/>
                    <form:options items="${sexoList}" />
                </form:select>
                <form:errors path="wantedsexy" cssClass="errors"/>
                <br/>
                <form:errors path="wantedsexy" cssClass="errors"/>
                <div class="input-append">
                    <input type="text" id="email" name="email" size="30" maxlength="30" placeholder="E-mail" class=""/>
                    <form:errors path="email" cssClass="errors"/>
                    <input id="btncadastrar" class="btn btn-block btn-primary" type="submit" value="Cadastrar E-mail"/>
                </div>
            </form:form> 
```

和模型Email.java的一部分：

```
@Document
@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
public class Email extends BaseBean {

    // @Pattern(regexp =
    // "^[\\w\\-]+(\\.[\\w\\-]+)*@([A-Za-z0-9-]+\\.)+[A-Za-z]{2,4}$",
    // message="E-mail com formato incorreto.")
    @NotNull(message = "Não pode ser vazio")
    @NotEmpty(message = "Não pode ser vazio-nulo")
    @org.hibernate.validator.constraints.Email(message = "E-mail inválido")
    private String email;

    @NotEmpty(message = "Informe ao menos um valor")
    private String mysexy;

    @NotEmpty(message = "Informe ao menos um valor")
    private String wantedsexy; 
```

当我尝试在输入中输入空电子邮件时收到此错误：

```
exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'email' on field 'email': rejected value []; codes [NotEmpty.email.email,NotEmpty.email,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [email.email,email]; arguments []; default message [email]]; default message [Não pode ser vazio-nulo]
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'email' on field 'email': rejected value []; codes [NotEmpty.email.email,NotEmpty.email,NotEmpty.java.lang.String,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [email.email,email]; arguments []; default message [email]]; default message [Não pode ser vazio-nulo]
    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:110) 
```

我的设置有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:48:50.487

您明确禁止空值：

```
 @NotNull(message = "Não pode ser vazio")
--> @NotEmpty(message = "Não pode ser vazio-nulo") 
    @org.hibernate.validator.constraints.Email(message = "E-mail inválido")
    private String email; 
```

Hibernate 在保存或更新之前验证实体，并且您的实体失败。

您可以在`persistence.xml`文件配置中禁用此验证。

```
<persistence ...>
  <persistence-unit ...>
    ...
    <properties>
      <property name="javax.persistence.validation.mode" value="none"/>
    </properties>
  </persistence-unit>
</persistence> 
```

如果您只想检查一些验证规则，那么您可以使用“验证组”

*   @参见[休眠参考，第 22.1 章。Bean 验证](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html_single/#d5e9763)
*   @参见 JSR 303 Bean 验证

* * *

如果您的问题是未调用控制器方法，那么这是`@Valid`因为`Email`. 如果您希望在带有`@Valid`注释的参数无效时调用控制器方法，那么您需要一个类型为`BindingResult`DIRECTLY AFTER 的参数

```
public String doSaveEmail(@Valid @ModelAttribute("email") Email email, BindingResult resultForEmail, Model model, BindingResult resultForModel) 
```

# javascript - AJAX 调用具有 jQuery 构建的带有重复键的查询字符串

> ID：12532421
> 
> 赞同：7
> 
> 时间：2012-09-21T14:22:01.080
> 
> 标签：javascript, jquery, solr

Apache Solr 要求发送到其端点的 GET 参数之一是重复的名称：

```
facet.range=price&facet.range=age 
```

此处的文档：

[http://wiki.apache.org/solr/SimpleFacetParameters#facet.range](http://wiki.apache.org/solr/SimpleFacetParameters#facet.range)

在 jQuery 中，我怎样才能包含该查询字符串参数 ( `facet.range`) 两次？我无法使用重复键创建对象，但这与我需要做的事情一致：

```
context = {
    'facet.range': 'price',
    'facet.range': 'age', // This will be the only element in this dictionary as the key names are the same
}

$.ajax({
    type: "get",
    url: 'http://127.0.0.1:8983/solr/select',
    dataType:"jsonp",
    contentTypeString: 'application/json',
    jsonp:"json.wrf",
    data: context,
    success:function (data) {
        ...
    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T14:35:24.657

`'facet.range': ['price', 'age']`在您的 params 对象中使用并`traditional`在 ajax 调用中设置为 true 以强制执行参数的“传统”序列化，`foo=1&foo=2`而不是`foo[]=1&foo[]=2`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:34:56.370

jQuery 内部`$.param`用于序列化表单，因此您也可以这样做：

```
data = $.param(
    { name: 'facet.range', value: 'price' }, 
    { name: 'facet.range', value: 'age' }
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:26:26.110

您可以手动将参数添加到 url。

```
 $.ajax({
       type: "get",
       url: 'http://127.0.0.1:8983/solr/select?facet.range=price&facet.range=age', // Add other parameters in the url
       dataType:"jsonp",
       contentTypeString: 'application/json',
       jsonp:"json.wrf",
       success:function (data) {
           ...
       }
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:26:27.757

我认为解决这个问题的唯一方法是将数据“硬编码”为查询字符串参数，而不是传递数据

```
$.ajax({
    type: "get",
    url: 'http://127.0.0.1:8983/solr/select?facet.range=price&facet.range=age',
    dataType:"jsonp",
    contentTypeString: 'application/json',
    jsonp:"json.wrf",
    data: null,
    success:function (data) {
        ...
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T14:29:56.207

我不熟悉 Apache Solr，但我知道您可以重新创建 URL 以传递参数

```
$.ajax({
    type: "get",
    url: 'http://127.0.0.1:8983/solr/select?'+ "facet.range=price&facet.range=age",
    success:function (data) {
        ...
    }
}); 
```

# sql - 当时间包含在 DATE 字段中时，MS SQL 脚本返回每天创建的记录数？

> ID：12532423
> 
> 赞同：3
> 
> 时间：2012-09-21T14:22:12.673
> 
> 标签：sql, sql-server-2008

我正在尝试创建一个脚本（使用 MS SQL Server 2008 R2），它可以计算上周每天添加到表中的总行数。我使用以下脚本来执行此操作：

```
select date_published, count(customer_id)
from CustomerTable
WHERE date_published >=dateadd(day,datediff(day,0,GetDate())- 7,0)
GROUP BY date_published 
```

这个脚本有效，但我遇到的问题是我的表中的 date_published 列也需要包含时间，所以我需要弄清楚如何让脚本在计算时只查看 date_published 列的日期部分总数。感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:25:28.163

尝试修改您`GROUP BY date_published`的：

```
GROUP BY DATEADD(dd, 0, DATEDIFF(dd, 0, date_published)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:23:52.977

```
select Convert(date,date_published), count(customer_id) 
from CustomerTable 
WHERE datediff(d,getdate(),date_published )>-7
GROUP BY Convert(date,date_published) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T09:18:23.757

```
select cast(date_published as date) as date_published,
       count(customer_id) as count_customer_id
from CustomerTable
where date_published >= dateadd(day, -7, cast(getdate() as date))
group by cast(date_published as date) 
```

# php - 使用正则表达式根据条件提取 href 描述

> ID：12532425
> 
> 赞同：1
> 
> 时间：2012-09-21T14:22:20.063
> 
> 标签：php, regex, html-parsing, preg-replace

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我需要解析 HTML 块，根据描述是否符合特定标准，用链接描述替换一些 href。

我用来识别特定字符串的正则表达式在我的应用程序的其他地方使用：

```
$regex  = "/\b[FfGg][\.][\s][0-9]{1,4}\b/";
preg_match_all($regex, $html, $matches, PREG_SET_ORDER); 
```

我使用以下 SO 问题作为提取 href 描述的起点：

[用文本描述替换 html 链接标签](https://stackoverflow.com/questions/8370564/replacing-html-link-tags-with-a-text-description)

这个想法是转换任何具有“FfGg.xxxx”类型标识符的链接，并保留其余部分（即，谷歌链接）。

到目前为止，我所拥有的是：

```
 $html = 'Ten reports <a href="http://google.com">Google!</a> on 14 mice with ABCD 
show that low plasma BCAA, particularly ABC and to a lesser extent DEF, can result in 
severe but reversible epithelial damage to the skin, eye and gastrointestinal tract.
</li><li>Symptoms were reported in conjunction with low plasma ABC levels in 9 case 
reports. In two case reports, ABC levels were between 1.9 and 48 µmol/L (<a 
href="/docpage.php?obscure==100" target="F.100">F.100</a>, <a 
href="/docpage.php?obscure==68" target="F.68">F.68</a>, <a href="/docpage.php?obscure==67" 
target="F.67">F.67</a>, <a href="/docpage.php?obscure==71" target="F.71">F.71</a>, <a 
href="/docpage.php?obscure==122" target="F.122">F.122</a>, <a 
href="/docpage.php?obscure==92" target="F.92">F.92</a>, <a href="/docpage.php?obscure==96" 
target="F.96">F.96</a>);'; 
```

这将转换所有链接，包括谷歌：

```
$html = preg_replace("/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/i", "$2", $html); 
```

这将返回一个空白的 HTML 字符串：

```
$html = preg_replace("/<a.*?href=\"(.*?)\".*?>[FfGg][\.][\s][0-9]{1,4}<\/a>/i", "$2", $html); 
```

我相信问题在于我如何在上面的第二个（非工作）示例中嵌入这个正则表达式：

```
[FfGg][\.][\s][0-9]{1,4} 
```

在我上面的 preg_replace 示例中找到的 HTML 中嵌入 FfGg 表达式的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:42:07.777

您不应该使用正则表达式解析 HTML。您根本无法正确处理所有情况。以下是一些会破坏您的链接查找正则表达式的有效 HTML 示例：

```
<!-- <a href="www.blah.com">   -->    <a href="www.foo.com">F.100</a>
<area>...</area>  ...  <a href="www.foo.com">F.100</a>
<a href="www.foo.com">F.100</a > 
```

我建议看看这个问题以获得更好的方法：[How do you parse and process HTML/XML in PHP?](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:09:53.343

这是执行此操作的 DOM（正确）方法：

*编辑：改进的正则表达式*

```
<?php

    $html = 'Ten reports <a href="http://google.com">Google!</a> on 14 mice with ABCD show that low plasma BCAA, particularly ABC and to a lesser extent DEF, can result in severe but reversible epithelial damage to the skin, eye and gastrointestinal tract.</li><li>Symptoms were reported in conjunction with low plasma ABC levels in 9 case reports. In two case reports, ABC levels were between 1.9 and 48 µmol/L (<a href="/docpage.php?obscure==100" target="F.100">F.100</a>, <a href="/docpage.php?obscure==68" target="F.68">F.68</a>, <a href="/docpage.php?obscure==67" target="F.67">F.67</a>, <a href="/docpage.php?obscure==71" target="F.71">F.71</a>, <a href="/docpage.php?obscure==122" target="F.122">F.122</a>, <a href="/docpage.php?obscure==92" target="F.92">F.92</a>, <a href="/docpage.php?obscure==96" target="F.96">F.96</a>);';

    // Create a new DOMDocument and load the HTML string
    $dom = new DOMDocument('1.0');
    $dom->loadHTML($html);

    // Create an XPath object for this DOMDocument
    $xpath = new DOMXPath($dom);

    // Loop over all <a> elements in the document
    // Ideally we would combine the regex into the XPath query, but XPath 1.0
    // doesn't support it
    foreach ($xpath->query('//a') as $anchor) {
        // See if the link matches the pattern
        if (preg_match('/^\s*[gf]\s*\.\s*\d{1,4}\s*$/i', $anchor->nodeValue)) {
            // If it does, convert it to a text node (effectively, un-linkify it)
            $textNode = new DOMText($anchor->nodeValue);
            $anchor->parentNode->replaceChild($dom->importNode($textNode), $anchor);
        }
    }

    // Because you are working with partial HTML string, I extract just that
    // string. If you are actually working with a full document, you can
    // replace all the code below this comment with simply:
    // $result = $dom->saveHTML();

    // A string to hold the result
    $result = '';

    // Iterate all elements that are a direct child of the <body> and convert
    // them to strings
    foreach ($xpath->query('/html/body/*') as $node) {
        $result .= $node->C14N();
    }

    // $result now contains the modified HTML string 
```

[看到它工作](http://viperpad.com/3qPIZ4)（注意：您看到的错误消息是因为您提供的 HTML 字符串无效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:56:50.800

你不应该如此依赖不情愿的量词。他们*试图*消耗尽可能少的字符，但为了实现整体匹配，他们会尽可能多地消耗。如果 HTML 被缩小（特别是，如果它有很少或没有换行符），每个`.*?`'s 最终可能会尝试消耗整个文档的其余部分，并且他们可能不得不这样做很多次。

当无法匹配时尤其如此。在承认失败之前，它必须遍历文本的所有可能路径。另一个问题是不情愿的量词不会阻止过早*开始的匹配。*给定这个字符串：

```
<a href="www.blah.com">...</a> <a href="www.foo.com">F.100</a> 
```

...它将在第一个`<a>`标签处开始匹配，并在第二个标签的末尾停止。在这个正则表达式中：

```
'~<a\b[^>]*\bhref="[^"]*"[^>]*>([FG]\.\d{1,4})</a>~i' 
```

...我已经`.*?`用`[^>]*`或`[^"]*`将匹配的这些部分分别替换为单个标记或属性值。尽管这个正则表达式效果更好，但请注意它并非万无一失——远非如此。但在将 HTML 与正则表达式匹配时，它几乎可以合理地得到。

# ruby-on-rails - 无法安装 pg gem，检查 -lpq 中的 PQconnectdb() ... 否

> ID：12532427
> 
> 赞同：8
> 
> 时间：2012-09-21T14:22:21.683
> 
> 标签：ruby-on-rails, postgresql, rails-postgresql, pg

我正在尝试在本地使用 PostgreSQL 在 Ruby on Rails 中进行开发，因此我正在尝试安装 pg gem。在 Ubuntu 12.04 上。在终端中，我输入：

```
gem install pg -v '0.12.2' 
```

这会引发以下错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /home/troyshu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/troyshu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /home/troyshu/.rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1 for inspection.
Results logged to /home/troyshu/.rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1/ext/gem_make.out 
```

有趣的是，在命令中添加 sudo 可以：

```
$ sudo gem install pg -v '0.12.2'
Building native extensions.  This could take a while...
Successfully installed pg-0.12.2
1 gem installed 
```

顺便说一句，我必须运行“sudo apt-get install ruby​​1.9.1-dev”才能使上述命令正常工作。但我仍然无法进行任何开发，因为“捆绑安装”不起作用（并且一直告诉我运行“gem install pg -v '0.12.2'）

我有一种感觉“gem install pg”被绊倒了

```
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no 
```

但是，作为 Ubuntu 和 RoR 的新手，我不知道为什么。也许我的搜索技巧也很糟糕，因为我无法找到解决我的特殊情况的方法。希望有一个修复？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T01:44:33.623

相关：[gem install pg 无法绑定到 libpq](https://stackoverflow.com/questions/8814924/gem-install-pg-can-not-bind-to-libpq/8874260#8874260)。请检查您的 mkmf 日志并查找 libssl 错误。我有同样的问题。我已经安装了 libpq-dev 并仔细检查了 pg_config。gem 似乎找到了 libpq-dev 头文件，但未能与 libpq 链接。事实证明，rvm 为 ssl 安装的软件包以某种方式干扰了通过 libssl-dev 安装的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:04:19.660

我找到了一个奇怪的解决方案，但它对我有用，而不是所有其他建议：

```
mv ~/.rvm/usr/lib ~/.rvm/usr/lib_rvm 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T01:36:33.830

根据您发布的错误消息，您似乎没有`libpq-dev`安装。尝试`apt-get install libpq-dev`（`sudo`如果你不是`root`），然后安装 gem。

由于您使用的是 RVM，因此如果您必须使用它`sudo`来安装 gem，那么您做错了。`sudo`安装 gem 以使用系统的 Ruby，而不是使用 RVM 安装的 Ruby。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T01:38:08.057

如果 sudo 有效而标准用户无效，则表明它在某处找到了一些其他用户未找到的库和头文件集，或者实际上存在未在其他地方正确处理的权限问题。如果需要，您可能可以使用 strace 找到问题的根源。

但是，我认为更明智的解决方案是认识到您可能需要 root 访问权限才能安装很多这样的东西，所以如果它是我的系统，我会接受它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-05T16:27:50.183

对我来说，唯一可行的方法是`rvm`通过 rvm 网站上的说明进行安装：[https](https://rvm.io) ://rvm.io 。我能够让它在 Ubuntu 14.04 上运行。

该日期的完整命令列表：
`sudo gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB`

确保您位于可下载目录中，然后运行：
`\curl -sSL https://get.rvm.io | bash -s stable`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-10T17:46:48.130

我有一个类似的问题，失败了`bundle install`：

```
Installing pg 0.17.1 with native extensions

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

...

```
An error occurred while installing pg (0.17.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.17.1'` succeeds before bundling. 
```

但与`gem install pg -v '0.17.1'`.

我可以成功安装 gem，但捆绑包仍然会失败。

我通过更改 pg 捆绑配置来修复它：

1.  检查 pg 配置：

    `$ which pg_config`返回：

    `/usr/local/bin/pg_config`

2.  检查当前的捆绑包构建选项`pg`

`$ bundle config build.pg`

3.  如果不是返回的值`which pg_config`，

`$ bundle config build.pg --with-pg-config=/usr/local/bin/pg_config`

现在试试`bundle install`！！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-04T18:05:18.363

我遇到了同样的错误，似乎没有任何效果。最终发现这是一个与水蟒相关的问题。如果您正在运行 anaconda，则 gcc 编译器默认为 anaconda 安装中的编译器。这与权限混淆。通过执行以下操作修复了我的错误：

1.  创建一个新的 conda 环境：`conda create --name postgresql`
2.  使用以下命令安装 postgresql：`conda install -c anaconda postgresql`
3.  `gem install pg`

我也在运行 rbenv 作为 ruby​​ 经理.. 似乎工作正常。`bundler install`安装 pg gem 后工作。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-21T14:28:57.610

当你这样做时`sudo gem install pg`，无论安装了 ruby​​ 和 postgresql 的地方都会安装 gem；当您这样做时`gem install pg`，gem 将安装在您的主目录中（请参阅您的消息！）。`sudo bundle install blah-blah-blah`因此，鉴于您在本地工作的方式，您需要为所有的宝石做这件事。当然，还有其他选项，例如我不使用的 RVM。

# spring - 当 Spring MVC3 发送 HTTP 错误响应（例如 400）时，如何注销一些详细信息？

> ID：12532431
> 
> 赞同：1
> 
> 时间：2012-09-21T14:22:35.177
> 
> 标签：spring, http, spring-mvc

我想在我的日志中查看为什么请求会导致 HTTP 错误代码（例如 400 无效请求）的一些详细信息。

是否可以让 Spring MVC3 在响应带有错误代码的请求时记录一些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:57:19.863

Spring 在幕后使用 Log4J，并在该`DEBUG`级别添加了很多信息。

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <param name="Threshold" value="DEBUG"/>
    <param name="Target" value="System.out"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
    </layout>
</appender>

<logger name="org.springframework" additivity="false">
    <level value="DEBUG"/>
    <appender-ref ref="CONSOLE"/>
</logger>

<root>
    <level value="ERROR"/>
    <appender-ref ref="CONSOLE"/>
</root> 
```

将记录器添加到您的 Log4J 配置中，看看您所追求的是否在其中。

# c# - Log4Net 登录 MySql 不写

> ID：12532432
> 
> 赞同：1
> 
> 时间：2012-09-21T14:22:37.580
> 
> 标签：c#, mysql, log4net

我试图登录到 MySql 表，但它不会写入。它没有显示任何错误，也没有在 mysql 表中写入任何内容。

这是 log4net 的 web.config 设置：

```
<log4net>

    <appender name="MySql_ADONetAppender" type="log4net.Appender.ADONetAppender">
      <bufferSize value="100" />
      <connectionType value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data"/>
      <connectionString value="Server=127.0.0.1;Database=svil;Uid=LogUser;Pwd=LogPass;"/>
      <commandText value="INSERT INTO Log (Date,Thread,Level,Logger,Message,Exception) VALUES (?log_date, ?thread, ?log_level, ?logger, ?message, ?exception)" />
      <parameter>
        <parameterName value="?log_date"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="?thread"/>
        <dbType value="String"/>
        <size value="255"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%thread"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="?log_level"/>
        <dbType value="String"/>
        <size value="50"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%level"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="?logger"/>
        <dbType value="String"/>
        <size value="255"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%logger"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="?message"/>
        <dbType value="String"/>
        <size value="4000"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message"/>
        </layout>
      </parameter>
      <parameter>
        <parameterName value="?exception"/>
        <dbType value="String"/>
        <size value="2000"/>
        <layout type="log4net.Layout.ExceptionLayout"/>
      </parameter>
    </appender>

    <root>
      <level value="ALL"/>
      <appender-ref ref="MySql_ADONetAppender"/>
    </root>
</log4net> 
```

在 global.asax 中：

```
protected void Application_Start(object sender, EventArgs e)
{
    log4net.Config.XmlConfigurator.Configure();
} 
```

这是aspx页面中的一个简单日志：

```
public partial class _Default : System.Web.UI.Page
{
    private static readonly ILog log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    protected void Page_Load(object sender, EventArgs e)
    {
        log.Info("Test Log Message");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:59:51.547

您的 bufferSize value="100" 表示在记录 100 条消息之前不会将任何内容写入日志表，请将其更改为 1

还要检查这个[http://weblogs.asp.net/drnetjes/archive/2005/02/16/374780.aspx](http://weblogs.asp.net/drnetjes/archive/2005/02/16/374780.aspx)

# orm - Doctrine2 中另一个连接表/视图的实体属性

> ID：12532433
> 
> 赞同：1
> 
> 时间：2012-09-21T14:22:40.733
> 
> 标签：orm, doctrine-orm

我目前坚持使用以下 SQL 模式（不幸的是，我不拥有数据库，也无法更改它）

```
+----------------------------------------+
|          TABLE "products"              |
+----------------------------------------+
| Column             |  Type             |
+----------------------------------------+
| id                 | integer           |
| price              | float             |
| purchased          | datetime          |
+----------------------------------------+

+----------------------------------------+
|          VIEW "product_names"          |
+----------------------------------------+
| Column             |  Type             |
+----------------------------------------+
| product_id (FK)    | integer           |
| name               | varchar           |
+----------------------------------------+ 
```

现在，由于我在这个项目上使用 Doctrine2.1，我想知道是否可以定义一个`Product`实体，从 VIEW 中获取它的名称并从TABLE中获取`product_names`其余数据？`products`

基本上我想要一个在获取所有产品时执行以下查询的实体：

```
SELECT p.id, p.price, p.purchased, n.name 
FROM products p
LEFT JOIN product_names n
ON p.id = n.product_id 
```

我查看了 OneToOne 关联，但这并没有削减它，因为它定义了两个实体之间的关联，而不是实体的属性。

# maven - 如何手动将 JAR 添加到本地 Maven 存储库并设置 JAR 的依赖项？

> ID：12532434
> 
> 赞同：0
> 
> 时间：2012-09-21T14:22:45.960
> 
> 标签：maven, jar, pom.xml

到处都被告知，需要手动将一些 JAR 添加到 maven 本地 repo 以发出命令

```
mvn install:install-file -Dfile=c:\kaptcha-2.3.jar -DgroupId=com.google.code -DartifactId=kaptcha -Dversion=2.3 -Dpackaging=jar 
```

这对我有用，但是一个 jar 按原样添加到 repo 中，即没有关于它所依赖的其他 jar 的信息。

如何描述依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:30:07.950

不确定我是否了解您想要实现的目标，但也许这个文档？[http://maven.apache.org/plugins/maven-install-plugin/examples/custom-pom-installation.html](http://maven.apache.org/plugins/maven-install-plugin/examples/custom-pom-installation.html)

# wpf - WPF TreeView 分层绑定。

> ID：12532435
> 
> 赞同：5
> 
> 时间：2012-09-21T14:22:48.023
> 
> 标签：wpf, binding, treeview, itemssource, hierarchicaldatatemplate

刚从 wpf 开始。我需要绑定对象（分层）文件夹

```
public class Folder
{
    public Folder()
    {
        this.Name = string.Empty;
        this.Modules = new ObservableCollection<Module>();
        this.Folders = new List<Folder>();
        this.HasChild = false;
    }

    public Folder(Folder parent)
    {
        this.Name = string.Empty;
        this.Modules = new ObservableCollection<Module>();
        this.Folders = new List<Folder>();
        this.HasChild = false;
        this.Parent = parent;
    }

    public bool HasChild { get; set; }

    public string Name { get; set; }

    public List<Folder> Folders { get; set; }

    public ObservableCollection<Module> Modules { get; set; }

    public Folder Parent { get; set; }

    public Folder IfItemExists(string name)
    {
        foreach (Folder folder in Folders)
        {
            if (folder.Name == name)
            {
                return folder;
            }
        }

        return null;
    }
} 
```

到树视图。我正在这样做

```
 <TreeView Name="treeView" Margin="5">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Path=Folders}" DataType="{x:Type ModulesUpToDateChecker:Folder}">
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=Name}"></TextBlock>
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

并且只有空的文档面板。对象被填充写入。Eche child 有自己的具有相同类型的孩子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:43:16.803

HierarchicalDataTemplate 已经是 DataTemplate（它派生自它）。因此，只需跳过 HierarchicalDataTemplate 中的 ItemTemplate 和 DataTemplate 内容，如下所示：

```
<TreeView Name="treeView" Margin="5">
  <TreeView.Resources>
    <HierarchicalDataTemplate ItemsSource="{Binding Path=Folders}" DataType="{x:Type WpfApplication220:Folder}">
      <TextBlock Text="{Binding Path=Name}"></TextBlock>
    </HierarchicalDataTemplate>
  </TreeView.Resources>
</TreeView> 
```

哦，您必须以编程方式或在标记中设置树视图的 ItemsSource ..

```
treeView.ItemsSource = ..yourFolderList.. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:45:44.697

尝试这样做：

```
 <TreeView Name="treeView" Margin="5">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Path=Folders}" DataType="x:Type ModulesUpToDateChecker:Folder}">
           <Grid>
             <TextBlock Text="{Binding Path=Name}"></TextBlock>
           </Grid>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

# javascript - JavaScript 中的自动计算

> ID：12532437
> 
> 赞同：1
> 
> 时间：2012-09-21T14:23:00.393
> 
> 标签：javascript

我有一个脚本，可以在您输入值时实时计算某些字段中的值，并且运行良好。但是，如果我将值发送到数据库，然后从那里取回它们并从数据库的请求中填充字段，则不再计算字段，除非在已填充的字段中重新键入它们。

知道如何在我从数据库加载填充表单时进行计算吗？

这是 Jscript

```
<script type="text/javascript">

$(document).ready(function() {
    $('input[id=r],input[id=p]').change(function(e) {
        var total = 0;
        var $row = $(this).parent();
        var rate = $row.find('input[id=r]').val();
        var pack = $row.find('input[id=p]').val();

        total = parseFloat(rate * pack);
        //update the row total
        $row.find('.amount').text(total);

        var total_amount = 0;
        $('.amount').each(function() {
            //Get the value
            var am= $(this).text();
            console.log(am);
if (typeof console == "undefined") {
    this.console = {log: function() {}};
}
            //if it's a number add it to the total
            if (IsNumeric(am)) {
                total_amount += parseFloat(am, 10);
            }
        });
        $('.total_amount').text(total_amount);
    });
});

//isNumeric function Stolen from: 
//http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric

function IsNumeric(input) {
    return (input - 0) == input && input.length > 0;
}
</script> 
```

这是HTML

```
 <tr>
            <td></td>
            <td>
            <div>
                <input name="a2c" type="text" size="10" value="<? echo "$a2c";?>">
                <input id="r" class="rate" name="a2q" type="text" maxlength="255" size="5" value="<? echo "$a2q";?>">
                <input id="p" class="pack" name="a2p" type="text" maxlength="255" size="5" value="<? echo "$a2p";?>">
                <span class="amount"></span></div>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
            <div>
                <input name="a3c" type="text" size="10" value="<? echo "$a3c";?>">
                <input id="r" class="rate" name="a3q" type="text" maxlength="255" size="5" value="<? echo "$a3q";?>">
                <input id="p" class="pack" name="a3p" type="text" maxlength="255" size="5" value="<? echo "$a3p";?>">
                <span class="amount"></span></div>
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:29:35.693

您可以强制更改事件（以防止代码重复）：http: [//jsfiddle.net/2vqT5/](http://jsfiddle.net/2vqT5/)

`$(".rate").change();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:25:44.667

```
$('input#r').change() 
```

将在 id 为 'r' 的输入上自动触发更改事件；够了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:26:55.940

您可以做的是在脚本加载时也运行您的函数。一种方法是从 .change() 中删除匿名函数，并为其命名。

```
function yourPreviouslyAnonymousFunction() { ... }
$(document).ready(function () {
    yourPreviouslyAnonymousFunction();
    $('input[id=r],input[id=p]').change(yourPreviouslyAnonymousFunction);
}); 
```

因为在页面加载完成时不会调用您的函数，因为您使用 PHP 注入值。这样，您的函数也会在页面加载完成时运行一次，因此这些值是使用您的函数计算的。

由于您已经在使用 jQuery，另一种方法是强制事件发生：

```
$(document).ready(function () {
     $('input[id=r],input[id=p]').change(function () {
         ...
         // Leave this as is
         ...
     });
     $('input[id=r],input[id=p]').change();
}); 
```

这是 MassivePenguin 解释的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:27:36.837

将所有逻辑放入一个单独的函数中，`recalculate() {...}`. 进行 .change() 事件调用`recalculate()`，并添加代码以在页面加载时执行：

```
$(document).ready(function() {
    recalculate();
}); 
```

不清楚的一件事是您如何往返于数据库。你是在做ajax，还是在做一个页面重新加载？以上适用于页面重新加载或表单提交，但如果您正在执行 ajax 调用，则必须挂钩到提交后 ajax 回调，并从那里调用 recalculate()。

# java - 带有特殊字符的 Java Restful 服务编码

> ID：12532441
> 
> 赞同：2
> 
> 时间：2012-09-21T14:23:12.667
> 
> 标签：java, xml, rest, encoding

我在 POST 请求时遇到问题。我必须接收 XML 消息并使用 JAXB 对其进行解析。一切正常，但是当消息中包含特殊字符时

```
<?xml version="1.0" encoding="UTF-8"?>
<sending>
    <sms>
        <message>España</message>
    </sms>
</sending> 
```

它抛出错误请求错误（400）客户端发送的请求在语法上不正确（错误请求）。

这是我处理 xml 消息的代码

```
@POST
@Path("smsSendPost")
@Produces(MediaType.APPLICATION_XML)
public Response smsSendPost(JAXBElement<Sending> xml){
    Sending sending = xml.getValue();

    //Process the message
} 
```

我使用tomcat来测试它。

谁能帮我这个？

更新：我刚刚发现问题的原因是tomcat，当我通过带有ISO-8859-1编码的POST发送请求时，服务工作正常。解决办法是改变tomcat的编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:29:46.717

内容类型可能是问题，但这取决于您在客户端的 POST 中生成的内容类型以及接收端的 XML 解析器使用的字符集。

在像这样的许多情况下可行的一种替代方法是在可能出现特殊字符的 XML 中使用 CDATA（未解析的字符数据）块。

```
<sending>
    <sms>
        <message><![CDATA[España]]></message>
    </sms>
</sending> 
```

默认情况下，XML 解析器将尝试解析 XML 消息中的所有文本。CDATA 块告诉 XML 解析器不要解析 CDATA 块中包含的字符。

如果您的服务无法识别该字符，则可能会出错或假设 XML 格式不正确并抛出您所看到的 400。

有关 CDATA 块的更多信息：http: [//www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:14:14.663

我刚刚发现问题的原因是tomcat，当我通过带有ISO-8859-1编码的POST发送请求时，服务工作正常。我想解决方案是改变tomcat的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:06:23.947

看起来您的客户正在发送无效请求。我怀疑您使用的是一些非 UTF8 编码，并且没有在[`Content-Type`header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)中指定其名称。如果您发布完整的 HTTP 请求，我可能能够通过更多详细信息来诊断问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:16:30.830

让我印象深刻的是你没有指定[@Consumes](http://jackson.codehaus.org/javadoc/jax-rs/1.0/javax/ws/rs/Consumes.html)注释......尝试添加`@Consumes(MediaType.APPLICATION_XML)`你的方法。还要确保发送并具有指定字符编码`Content-Type`的适当标签。`<?xml`

# spring - 深注射 - 弹簧

> ID：12532451
> 
> 赞同：0
> 
> 时间：2012-09-21T14:23:50.950
> 
> 标签：spring, dependency-injection, autowired

在应用程序深处访问不受 Spring 管理的 Spring 组件的最佳方式（或选项）是什么？

例如，假设我有一些 @Controllers。通过 Spring 不管理的 POJO 的一些抽象层，这些 @Controllers 可能最终使用需要注入 @Service 的 POJO。

一种选择是将所有层都放入弹簧组件中，但这似乎是我在破解我的设计以强制弹簧帮助我。如果我必须@Autowire 一切，我有一些复杂的事情将不会那么干净。另一种选择可能是在低级类中手动注入组件，但我不确定这是否可行或正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:36:21.200

本着回答原始问题的精神，我会说你可以让你的低级非spring类实现ApplicationContextAware来访问ApplicationContext，并使用ApplicationContext来访问你想要的任何spring bean。（谷歌搜索“spring application context aware”找到[示例代码](http://blog.jdevelop.eu/2008/07/06/access-the-spring-applicationcontext-from-everywhere-in-your-application/)）

然而，本着在这里解决大局的精神，这个问题从一开始就存在一些问题。一方面，听起来您想要将高级组件注入到低级组件中 - 通常您希望您的设计是相反的。此外，正如已经指出的那样，彼此“远离”的事物可能不应该相互依赖。在这种情况下，考虑到这些要点来改进设计将对您有所帮助。

我不会回避将所有层制作成 Spring 组件以充分利用您已经在使用的框架。如果您想使用 DI 框架，通常使用它来构建您的整个应用程序会很有帮助。我认为一个干净的设计，自始至终使用@Inject（Java EE 标准），并使用带有范围控制的 DI 框架连接实际上比必须“新”所有东西更干净。

# titanium - 钛应用程序上的图像在 iPhone 上看起来失真

> ID：12532453
> 
> 赞同：0
> 
> 时间：2012-09-21T14:23:56.573
> 
> 标签：titanium, titanium-mobile

我正在使用以下功能：

```
var b4 = Titanium.UI.createButton({
title : '',
top : 360,
width : 190,
height : 20,
backgroundImage : '../images/signup.gif',
});

win.add(b4); 
```

当我部署到 iphone 时，上面的按钮看起来是扭曲的（仅显示注册按钮的下部）。现在确定该怎么做......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:11:43.997

您可能希望将您的按钮改为视图，即

```
var button = Ti.UI.createView({
    top: 360,
    width: 190,
    height: 20,
    backgroundColor: '#777777'
})

button.add(Ti.UI.createImageView({
    top: 10,
    bottom: 10,
    image: '../images/signup.gif'
}))

win.add(button); 
```

# gwt - GWT：Google Maps v3 中的灰色区域

> ID：12532454
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:23:57.693
> 
> 标签：gwt, google-maps-api-3, jsni

[Google Maps API V3 灰色区域](https://stackoverflow.com/questions/11214651/google-maps-api-v3-gray-areas)

在这里，它说我们需要调用 google.maps.event.trigger(map, 'resize') 来防止地图上出现灰色区域。

GWT中还有其他方法吗？如果没有，我如何在没有 JSNI 的 GWT 上调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:30:45.277

对不起。map.triggerResize(); 是答案。

# python - 带有 Eclipse 的 pydev 在运行测试时确实创建了测试数据库

> ID：12532465
> 
> 赞同：0
> 
> 时间：2012-09-21T14:24:25.410
> 
> 标签：python, django, pydev

这是一个django项目。我正在使用 pydev 2.6。如何使用 Django 测试运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:22:40.303

可以通过使用 Django 模板为您的项目创建新的（运行或调试）配置来访问 Django 测试运行程序。将您的主模块设置为`manage.py`并在“参数”选项卡下输入“测试”（或您需要的任何其他`manage.py`参数）。

# oracle-adf - af:inputFile 组件 getFilename() 方法编码的问题

> ID：12532469
> 
> 赞同：1
> 
> 时间：2012-09-21T14:24:34.770
> 
> 标签：oracle-adf

我已经实现了将文件上传到 DB BLOB 字段中，正如 Timo Hahn 文章中所述：

[http://tompeez.wordpress.com/tag/afinputfile](http://tompeez.wordpress.com/tag/afinputfile)

代码片段：

```
// The event give access to an Uploade dFile which contains data about the file and its content

UploadedFile file = (UploadedFile) valueChangeEvent.getNewValue();

// Get the original file name

String fileName = file.getFilename(); 
```

一切正常，但我在文件名编码方面遇到了一些麻烦。我尝试使用 getFilename() 方法获取文件名，但它仅适用于拉丁字符集，但是对于文件名中带有 RUSSIAN 字符集的文件，它会失败，例如：

原始文件名：my_file.doc -> my_file.doc

原始文件名：заявки.png -> 70O2:8.png

有什么想法可以解决这个问题吗？

提前致谢！

**2012 年 9 月 27 日更新：**

我发现了有趣的错误。如果我将上面代码中的***文件***变量添加到手表中，我将看到**_encoding**属性等于“ **utf8** ”。如果我将此属性更改为“ **null** ”，一切正常！

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:03:25.143

试试这个：打开项目属性，选择编译器节点并检查选定的字符编码。在您的情况下应该是 utf-8 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:03:12.313

检查您为编译器和 JSF 页面顶部设置的编码。

# c++ - 为什么这里需要两次函数 Ellipse(...) 来绘制椭圆？

> ID：12532470
> 
> 赞同：0
> 
> 时间：2012-09-21T14:24:36.710
> 
> 标签：c++, mfc, cdc

MFC：我读到这段代码是为了绘制一个椭圆（不是实心内部），但我不明白为什么这里需要两次函数“pDC->Ellipse(...)”？（溶胶 == 0，do_what==DRAW_ELLIPSE）

```
void CMy078207017Dlg::OnLButtonUp(UINT nFlags, CPoint point) 
{
        flag = 0;
    end = point;
    assist = point;
    if(p != NULL)
    {
        CDC* pDC = GetDC();
        CPen pen;
        CBrush brush;
        getpen(pen, pDC, col, bol);
        if(do_what >= DRAW_LINE && do_what <= DRAW_RRECT)
        {
            p->p[0] = start;
            p->p[1] = end;
        }

        if(sol == 1)
        {
            getbrush(brush, pDC, col);
        }

        if(do_what == DRAW_LINE)
        {
            pDC->MoveTo(start);
            pDC->LineTo(end);
        }
        else
        {
            if(do_what == DRAW_ELLIPSE || do_what == DRAW_CIRCLE)
            {

                assist = start;
                if(do_what == DRAW_CIRCLE)
                {
                    assist.y = end.y - end.x + start.x;
                }

                pDC->SetROP2(R2_NOT);
                pDC->Ellipse(start.x, assist.y, end.x, end.y);

                pDC->SetROP2(R2_COPYPEN);
                if(sol == 0)
                {
                    pDC->SelectStockObject(NULL_BRUSH);
                }
                pDC->Ellipse(start.x, assist.y, end.x, end.y);

                end = point;
            }

        }
        ReleaseDC(pDC);
    }
    CDialog::OnLButtonUp(nFlags, point);
} 
```

如果我删除对 pDC->Ellipse(...) 的第一次调用，椭圆内部将是黑色实心。如果我删除对 pDC->Ellipse(...) 的第二次调用，椭圆将永远不会被绘制，但会在鼠标左键向上时消失。

对话框：移动鼠标时： ![在此处输入图像描述](../Images/426bc22787eb6505242e5639779f6273.png) 鼠标移动（笔为绿色）

鼠标按钮弹出时： ![在此处输入图像描述](../Images/885567bce0ef97aa2f711935a4199f9d.png) 鼠标按钮弹出（笔为绿色）

另外，如果我使用“CBrush画笔；pDC->Ellipse(start.x,assist.y,end.x,end.y);”，CBrush是什么颜色？

当涉及到矩形时，策略可能会更清晰：

```
 ...
    else if(do_what==DRAW_RECT||do_what==DRAW_RRECT){

            pDC->SetROP2(R2_NOT);
            if(do_what==DRAW_RECT)
            {
                pDC->Rectangle(start.x,start.y,end.x,end.y);
            }
            else if(do_what==DRAW_RRECT)
            {
                pDC->RoundRect(start.x,start.y,end.x,end.y,20,20);
            }

            pDC->SetROP2(R2_COPYPEN);
            if(sol==0)
            {   
                pDC->SelectStockObject(NULL_BRUSH);
            }
            if(do_what==DRAW_RECT)
            {
                pDC->Rectangle(start.x,start.y,point.x,point.y);
            }
            else if(do_what==DRAW_RRECT)
            {
                pDC->RoundRect(start.x,start.y,point.x,point.y,20,20);
            }
            end=point;
        } 
            ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:30:33.567

这是因为调用`pDC->SetROP2(R2_NOT)`. 根据 MSDN，该`R2_NOT`标志的意思是“像素保持不变。”。您可以在此处阅读文档 - [http://msdn.microsoft.com/en-us/library/99ax95h9.aspx](http://msdn.microsoft.com/en-us/library/99ax95h9.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:36:08.500

> 椭圆是用当前画笔绘制的，它的内部是用当前画笔填充的。

[来自MSDN](http://msdn.microsoft.com/en-US/library/6hkxb3kd%28v=vs.80%29.aspx)的`CDC::Ellipse()`参考资料

```
 pDC->SetROP2(R2_NOT);

 // pDC->Ellipse(start.x,assist.y,end.x,end.y);
 pDC->SetROP2(R2_COPYPEN);
 if(sol==0){
           pDC->SelectStockObject(NULL_BRUSH);
     }
 if(do_what==DRAW_CIRCLE){
           assist.y=point.y-point.x+start.x;
     }
 pDC->Ellipse(start.x,assist.y,point.x,point.y); 
```

所以我们的 ROP`R2_COPYPEN`表明[要](http://msdn.microsoft.com/en-us/library/99ax95h9.aspx)使用的像素是当前笔的颜色。我的猜测是笔是黑色的，椭圆被填充为黑色（阅读上面关于画笔填充椭圆的椭圆描述）。

```
 pDC->SetROP2(R2_NOT);

 pDC->Ellipse(start.x,assist.y,end.x,end.y);
 pDC->SetROP2(R2_COPYPEN);
 if(sol==0){
           pDC->SelectStockObject(NULL_BRUSH);
     }
 if(do_what==DRAW_CIRCLE){
           assist.y=point.y-point.x+start.x;
     }
 // pDC->Ellipse(start.x,assist.y,point.x,point.y); 
```

所以如果我们删除第二次`Ellipse`调用然后我们使用`R2_NOT`，所以像素保持不变（所以灰色背景）所以我们最终用与背景颜色相同的笔绘制椭圆，所以它从未见过。

您确实需要调试以查看发生了什么，但如果您可以找出每个点的笔颜色和画笔颜色，您应该对正在发生的事情有一个很好的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T02:04:38.143

我终于摆脱了麻烦：其他地方的代码：

```
void CDraw2009303476Dlg::OnMouseMove(UINT nFlags, CPoint point) 
{
    if(flag == 1)   
    {
        CDC* pDC = GetDC();
        CPen pen;
        CBrush brush;
        getPen(pen, pDC, col, bol);

        if(sol == 1)
        {
            getBrush(brush, pDC, col);
        }
        if(type >= DRAW_LINE && type <= DRAW_RRECT)
        {
            pDC->SetROP2(R2_NOT);
            if(type == DRAW_LINE)
            {
                p->drawLine(point, pDC);
            }
            else if(type == DRAW_ELLIPSE)
            {
                p->drawEllipse(point, pDC);
            }
            else if(type == DRAW_CIRCLE)
            {
                p->drawEllipse(point, pDC, 1);
            }
            else if(type == DRAW_RECT)
            {
                p->drawRect(point, pDC);
            }
            else if(type == DRAW_RRECT)
            {
                p->drawRect(point, pDC, 1);
            }
        }
        ReleaseDC(pDC);
    }
    CDialog::OnMouseMove(nFlags, point);
} 
```

所以，策略是：使用“pDC->SetROP2(R2_NOT);” 一次和“p->drawEllipse(point, pDC, 1);” 在同一个地方两次保存原始像素以获得画线效果。最后调用“pDC->SetROP2(R2_COPYPEN); p->drawEllipse(point, pDC, 1)”是我们真正需要看到省略号的地方。感谢您的所有帮助。

# linux - bash：尝试运行打开 xterm 然后更改目录的命令

> ID：12532474
> 
> 赞同：0
> 
> 时间：2012-09-21T14:25:03.753
> 
> 标签：linux, bash

我正在尝试创建一个命令来打开 xterm，然后更改默认显示 xterm 的目录。

我按 Alt+F2 然后我运行`xterm | cd /home/tirengarfio/Music`，但它不会更改目录...

我知道我可以更改 xterm 默认显示的默认目录，但我有兴趣做动态：这次我想去音乐但下一次我会对另一个文件夹感兴趣..

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:27:29.910

如果那是您正在运行的文字命令，我不明白您的推理。管道用于在进程之间发送文本数据，而这根本不是您想要做的。

您应该传递 xterm`-e`选项来启动所需的 shell，然后传递给 shell 一个合适的选项来设置初始目录。

假设 bash 之类的东西`xterm -e /usr/bin/bash -c "cd /home/tirengarfio/Music"`应该很接近，您可能需要调整引用。二进制文件的绝对路径`bash`也可能是错误的，可以更简洁，但我想保持简单，所以我坚持使用绝对路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-13T11:32:41.480

对于任何绊倒此的人，这有效：

```
uxterm -e "cd /myfolder/anotherfolder && bash" 
```

如果我理解正确，终端本身只是一个空窗口，程序可以在其中显示其输出。为了能够与之交互，您必须在其中启动一个程序，否则它将执行它从中获得的命令-e 并立即消失。最常见的程序是 bash，它可以为您提供深受喜爱和错过的默认终端样式交互。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-21T14:48:48.520

也许你想做的事情是：

```
xterm & cd /home/tirengarfio/Music 
```

我不知道为什么，所以我不能给你一个深刻的解释。但是我以前用过。

# android - 将项目永久添加到现有警报对话框？

> ID：12532476
> 
> 赞同：1
> 
> 时间：2012-09-21T14:25:05.807
> 
> 标签：android, xml, add, android-alertdialog

我的目标是将一个项目永久添加到现有的 AlertDialog 中。

AlertDialog 的 XML 数组是：

```
<array name="serverchoice">
    <item>@string/chicago_server</item>
    <item>@string/london_server</item>
    <item>@string/sanjose_server</item>
    <item>@string/washington_server</item>
    <item>@string/chicagoq_server</item>
    <item>@string/londonq_server</item>
    <item>@string/sanjoseq_server</item>
    <item>@string/washingtonq_server</item>
</array> 
```

如您所见，它是服务器列表，我希望用户能够添加自己的服务器，而不必使用预设服务器。

我创建了一个带有文本框和按钮的页面，以便用户可以输入服务器。当用户单击“添加服务器”按钮时，我希望将条目添加到列表中。

目前，当用户从 AlertDialog 中选择一个菜单项时，它的处理方式如下：

```
 // Choose Server method

    private void openServerDialog() {
        new AlertDialog.Builder(this)     
        .setTitle(R.string.server_title)  
        .setItems(R.array.serverchoice,   
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,
                    int i) {
                setServer(i);   
            }
        })
        .show();
    }

private void setServer(int i) {   

        if (String.valueOf(i).equals("0")){
            CustomServer.setText("mcsord.visualware.com");
        }
        else if (String.valueOf(i).equals("1")){
            CustomServer.setText("mcslhr.visualware.com");
            }
        else if (String.valueOf(i).equals("2")){
            CustomServer.setText("mcssjc.visualware.com");
            }
        else if (String.valueOf(i).equals("3")){
            CustomServer.setText("mcsiad.visualware.com");
            }
        else if (String.valueOf(i).equals("4")){
            CustomServer.setText("qualitytestord.visualware.com");
            }
        else if (String.valueOf(i).equals("5")){
            CustomServer.setText("qualitytestlhr.visualware.com");
            }
        else if (String.valueOf(i).equals("6")){
            CustomServer.setText("qualitytestsjc.visualware.com");
            }
        else if (String.valueOf(i).equals("7")){
            CustomServer.setText("qualitytestiad.visualware.com");
            }

} 
```

我现在要做的就是在用户选择添加一个时获得另一个永久项目。我关于这个的最后一个问题还不够清楚。我不想要选项菜单或上下文菜单。

谢谢

编辑：

环顾四周，我可以看到人们说不可能动态添加到数组列表中。

目前，我有一个选项菜单，当在 android 手机本身上按下菜单按钮时会显示它自己。我使用的代码是：

```
public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.settings_menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
    switch (item.getItemId()) {
            case R.id.add_server:
                    addNewServer();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

是否可以创建另一个选项菜单并使用它而不是上面显示的 AlertDialog？或者我会遇到无法动态添加列表项的相同问题。

我确实有能力让用户输入他们自己的 URL，但它不会保存它，他们每次都必须继续输入它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:02:52.983

我不确定我是否理解你的问题......但我会尽力回答。首先，您可以在为 alertDialog 充气后添加动态的新选项。你不能做的是在你膨胀它们的地方向 xml 添加新行。

话虽如此，您需要在活动完成时将新服务器存储在某个地方，以便稍后恢复它们。为此，您有多种选择，我将从我认为最简单的一种开始：

将服务器存储在共享首选项文件中：

保存示例

```
 Editor editor = getSharedPreferences("FileName", MODE_PRIVATE).edit();
    editor.clear();
    editor.putString("server1", "serverName1");
    editor.putString("server2", "serverName2");
    editor.commit(); 
```

阅读示例：

```
 SharedPreferences preferences = getSharedPreferences("FileName", MODE_PRIVATE);
    preferences.getString("server1", "defaultValue");
    preferences.getString("server2", "defaultValue"); 
```

您还可以使用数据库来存储这些值。如果您希望有一个包含数百台服务器的列表，这会更好，因为在这种情况下，以前的解决方案的性能将会下降。

最后，您可以将信息存储在文件中，但这需要更多代码，而且我看不出它有什么真正的好处。

如果我没有回答你的问题，请告诉我。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:32:48.577

您可以在 xml 文件中保留默认值，但您需要将自定义服务器存储在数据库中。然后，您可以从两个源中提取一个数组并将其放入对话框中。

```
final CharSequence[] items = {"Red", "Green", "Blue"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Pick a color");
builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
    }
});
AlertDialog alert = builder.create(); 
```

# sql - 一对一双向关系查询

> ID：12532479
> 
> 赞同：0
> 
> 时间：2012-09-21T14:25:16.223
> 
> 标签：sql, activerecord

我正在使用 Rails，并且我有一个`Link`带有此表的 ActiveRecord 模型：

```
create_table "links", :force => true do |t|
  t.string   "name",        :null => false
  t.integer  "sender_id",   :null => false
  t.integer  "receiver_id", :null => false
end

add_index "links", ["name"], :name => "index_links_on_name"
add_index "links", ["sender_id", "receiver_id"], :name => "index_links_on_sender_id_and_receiver_id", :unique => true 
```

我想做的是选择`name = "follow"`从源到目的地以及从目的地到源存在的每个链接。

例如，具有以下条目：

```
id | name     | sender_id | receiver_id
---------------------------------------
66 | "follow" | 1         | 2
67 | "follow" | 2         | 1
68 | "follow" | 1         | 3
69 | "fuu"    | 3         | 1
70 | "bar"    | 2         | 25
71 | "bar"    | 25        | 2 
```

...我只想得到`66`和`67`ids 结果。因为 sender_id`1`和 receiver_id`67`从源链接到目标，也从目标链接到源（在这两种情况下都使用“跟随”名称）。

我们能做到吗，只用一个 SQL 查询（直接在 SQL 或 ActiveRecord ORM 中）？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:30:41.767

尝试以下查询>>

```
select * from tablename t1,t2 where t1.sender_id = t2.receiver_id and t2.sender_id=t1.receiver_id and Name like follow" 
```

# codeigniter - codeigniter - 如果图像字段为空，则上传图像显示错误

> ID：12532481
> 
> 赞同：0
> 
> 时间：2012-09-21T14:25:18.653
> 
> 标签：codeigniter

我的控制器中有这个功能。如果我添加图像，它可以正常工作，但如果我不上传图像，我会收到以下错误：

消息：未定义索引：categoryphoto 文件名：controllers/faqcategories.php 行号：90

这是我的代码

```
 public function addNewFaqCategory() 
    {    
        $currentUser = $this->isLoggedIn();
        $this->load->library('upload');
        $this->load->library('form_validation');
        $this->form_validation->set_rules('categoryname', 'Category Name', 'trim|required|xss_clean');
        $this->form_validation->set_rules('categoryname_en', 'Category Name', '');
        $this->form_validation->set_rules('visible', 'Visible', 'trim|required|xss_clean');
        $this->form_validation->set_rules('sorder', 'Sort Order', 'trim|numeric|xss_clean');

        if ($this->form_validation->run() == FALSE) 
        {
            $this->displayAddFaqCategoryForm();
        } else {

            $insertWhat = array(
                                'categoryname'    => $this->input->post('categoryname'),
                                'categoryname_en' => $this->input->post('categoryname_en'),
                                'parentid'        => $this->input->post('parentid'),
                                'description'     => $this->input->post('description'),
                                'description_en'  => $this->input->post('description_en'),
                                'metatags'        => $this->input->post('metatags'),
                                'metatags_en'     => $this->input->post('metatags_en'),
                                'sorder'          => $this->input->post('sorder'),
                                'visible'         => $this->input->post('visible'),
                                'categoryphoto'   => ($_FILES['categoryphoto']['name']) // line 90, error is here....

                               );

            if($insertWhat['categoryphoto'] !="")
            {
                $insertWhat['categoryphoto'] = str_replace(' ', '_',$insertWhat['categoryphoto']);
                $now = date('Y-m-d-His');
                $insertWhat['categoryphoto'] = $now.$insertWhat['categoryphoto'];
        $config['upload_path'] = 'backOffice/backOfficeImages';
        $config['allowed_types'] = 'gif|jpg|jpeg|bmp|png';
        $config['max_size'] = '2048';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
                $config['file_name'] = $insertWhat['categoryphoto'];
                $this->load->library('upload', $config);
                $this->upload->initialize($config);   
            }
            $this->upload->do_upload('categoryphoto');
            $data = array('upload_data' => $this->upload->data('categoryphoto'));
            $this->load->model('faqcategoriesmodel');
            $this->faqcategoriesmodel->save($insertWhat);
            $this->displayAllFaqCategories();
        }
    } // end of function addNewFaqCategory 
```

第 90 行 = 'categoryphoto' => ($_FILES['categoryphoto']['name'])

任何帮助将不胜感激。

卓然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:43:06.150

您在检查上传之前创建了该数组，因此如果没有上传照片，它将出错。您应该在检查/完成上传后移动数组创建

作为代码的单行修复，使用它来代替错误行：

```
'categoryphoto'   => isset($_FILES['categoryphoto']['name'])? $_FILES['categoryphoto']['name'] : '' 
```

# javascript - 拆分 emscripten 生成的文件

> ID：12532492
> 
> 赞同：3
> 
> 时间：2012-09-21T14:25:58.913
> 
> 标签：javascript, generated-code, emscripten

我有一个由 Emscripten（调试模式）生成的*非常*大的 Javascript 文件（> 50MB）。

在浏览器中调试这个文件是一件很痛苦的事情。一种解决方案是将文件拆分为几个小文件。加载时间没有问题，因为它是一个调试版本。

知道怎么做吗？我在一个单独的文件中尝试了每个函数，但一些函数引用了其他函数，然后 JS 文件的加载顺序变得相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:34:51.783

我向 Emscripten 提出了拉取请求以添加此功能。随意使用它： [https ://github.com/kripken/emscripten/pull/594](https://github.com/kripken/emscripten/pull/594)

# jquery - jquery 将焦点设置在下一个 div 中的元素上

> ID：12532494
> 
> 赞同：1
> 
> 时间：2012-09-21T14:26:15.040
> 
> 标签：jquery, focus

单击标题链接时，我试图将焦点设置在 textarea 元素上。这是 HTML：

```
<h2 class="trigger active"><a href="#" id="">header</a></h2>
<div class="toggle_container" style="display:block;">
    <div class="block" id="1">
        <div>Blah</div>

        <textarea name="VALUE">Blah blah</textarea>

    </div>
</div> 
```

单击 H2 时如何相对定位 Textarea？

我准备了一个jsfiddle：http: [//jsfiddle.net/MkePe/3/](http://jsfiddle.net/MkePe/3/)

任何帮助表示赞赏..

更新：已经有一个可行的解决方案，但是当 DIV 的内容不完全正确时，一切都会崩溃。如果没有 Textarea，get(0) 方法会产生 JS 错误。是否有一个灵活的解决方案也能牢记这一点？这是非工作小提琴：http: [//jsfiddle.net/3AbHY/3/](http://jsfiddle.net/3AbHY/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:35:28.270

您修改后的 Fiddle [HERE](http://jsfiddle.net/3AbHY/2/)

在 h2 点击处理程序中：

```
$(this).next().find('textarea').focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:37:53.390

通过像这样向 TextArea 添加一个 ID `id="toFocusArea"`，您的 HTML 变为：

```
<h2 class="trigger active"><a href="#" id="">header</a></h2>
<div class="toggle_container" style="display:block;">
    <div class="block" id="1">
        <div>Blah</div>

        <textarea name="VALUE" id="toFocusArea">Blah blah</textarea>

    </div>
</div> 
```

而单击事件处理程序将直接在 TextArea 上使用[焦点：](http://api.jquery.com/focus/)

```
$("#toFocusArea").focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:38:33.203

查看：

[http://jsfiddle.net/MkePe/4/](http://jsfiddle.net/MkePe/4/)

您必须在文档准备好后加载。

# java - 反序列化 JMS 消息中的对象

> ID：12532502
> 
> 赞同：1
> 
> 时间：2012-09-21T14:26:50.757
> 
> 标签：java, jms, websphere, ibm-mq, mq-visual-edit

有没有人尝试过从 IBM MQ Visual Edit 反序列化 JMS 对象消息？我需要破译一个通过 MQ 作为 JMS 消息发送的对象。我将消息保存到文件并尝试使用 ObjectInputStream 读取它，如下所示：

```
ObjectInputStream objectStream = new ObjectInputStream(new DataInputStream(new FileInputStream("PATH TO THE FILE")));
SomeObject result = ((SomeObject)objectStream.readObject()); 
```

但我收到一个错误：

```
java.io.StreamCorruptedException: invalid stream header: 52464820
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:794)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:291)
    at com.railinc.emis.transaction.model.DeserializerClass.main(DeserializerClass.java:14) 
```

我对此进行了一些研究，发现用于序列化的相同类应该用于反序列化。

如果有人以前试过这个，请告诉我你的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:45:16.870

我不知道 IBM MQ Visual Edit 但如果它具有保存 ObjectMessage 的功能，那么它可能不仅会保存消息中包含的对象，还会保存标头（包含 JMS 属性）。我认为您不能简单地使用 ObjectInputStream 从文件中读取对象。为什么不将该消息放在测试队列中并从那里读取呢？

# php - PHP gettext 找不到任何翻译的日志字符串

> ID：12532503
> 
> 赞同：1
> 
> 时间：2012-09-21T14:26:54.610
> 
> 标签：php, internationalization, translation, gettext, po

我有一个使用 php 的内置 Gettext / PO 支持国际化的网站

`echo _("string to be translated");`

该网站处于测试阶段，肯定有一些字符串没有被翻译。为了帮助调试，有没有办法记录 gettext 错误，即记录 PO 未在 PO 文件中找到任何匹配条目的字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T15:09:52.420

您想要做的问题是您只会在运行时找到未翻译的字符串，并且仅用于实际执行的代码路径。您可能需要数年时间才能找到所有字符串，同时您必须定期查看日志文件并将更新的翻译与日志文件中发生的情况同步。这不是一种确定性的翻译方法。

如果您使用的是 gettext，则需要建立一个适合它的工作流程。gettext 工作流程和工具链经过深思熟虑和时间考验。

1.  通过在 gettext 函数中包装字符串来准备源代码。
2.  将准备好的字符串提取到 POT 文件中，通常[使用`xgettext`](http://www.gnu.org/software/gettext/manual/gettext.html#Template)但可能使用自定义解析器/提取器和[Kunststube\POTools 之](https://github.com/deceze/Kunststube-POTools)类的库（无耻的自我提升）。
3.  [使用`msginit`](http://www.gnu.org/software/gettext/manual/gettext.html#Creating).从提取的模板文件创建 PO 文件。
4.  翻译 PO 文件。
5.  [使用`msgmerge`](http://www.gnu.org/software/gettext/manual/gettext.html#Updating).使更新的源/POT 文件与 PO 文件保持同步。
6.  [使用`msgfmt`](http://www.gnu.org/software/gettext/manual/gettext.html#Binaries).将 PO 文件编译为 MO 文件。
7.  冲洗，重复。

简而言之，这是正确的 gettext 工作流程，它解决了翻译过程中的大多数问题。特别是如果您有分布式翻译器，您通常会在源代码更新和翻译进入之间存在时间滞后和重叠。如果没有自动字符串提取和`msgmerge`实用程序，这个过程很容易陷入混乱，这就是为什么您应该坚持上述脚步。

如果这样做，您的问题就变得无关紧要，因为您可以随时使用 gettext 实用程序或[Poedit](http://www.poedit.net)等工具检查您的 PO 文件，以查看哪些字符串未翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T15:20:31.860

可能更重要的是您的测试版将使用类似[podebug](http://translate.sourceforge.net/wiki/toolkit/podebug)的工具进行一些伪本地化。因此，一旦您提取了 PO 字符串，您就可以将它们本地化，以便查看是否所有字符串都在您的 UI 中提取。

# jenkins - jenkins-maven-android 运行时抛出错误“android-sdk-linux/platforms”不是目录”

> ID：12532510
> 
> 赞同：1
> 
> 时间：2012-09-21T14:27:23.277
> 
> 标签：jenkins, android-maven-plugin

我开始设置 jenkins-maven-android 并且在运行 jenkin 作业时遇到问题

目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources 的执行 default-generate-sources 失败：路径“/opt/android-sdk-linux/platforms”不是一个目录。请提供正确的 Android SDK 目录路径作为配置参数

请帮我解决这个问题..

我的机器详细信息 $uname -a

Linux development2 3.0.0-12-virtual #20-Ubuntu SMP Fri Oct 7 18:19:02 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux

我在 ~/.bashrc 中设置了 ENV 变量

```
#JAVA_HOME 
export JAVA_HOME=/usr/lib/jvm/java-6-openjdk 
export PATH=$JAVA_HOME:$PATH

#Android PATH 
export ANDROID_HOME=/opt/android-sdk-linux 
export PATH=$ANDROID_HOME:$PATH
export PATH=${PATH}:$ANDROID_HOME/tools export
PATH=${PATH}:$ANDROID_HOME/platform-tools

#Apache Maven 
export M2_HOME=/opt/apache-maven-3.0.4 
export M2=$M2_HOME/bin 
export MAVEN_OPTS="-Xms256m -Xmx512m" 
export PATH=$M2:$PATH

 root@development2:~# mvn -version 

Apache Maven 3.0.4 (r1232337;2012-01-17 08:44:56+0000) 
Maven home: /opt/apache-maven-3.0.4 
Java version: 1.6.0_24, vendor: Sun Microsystems Inc. 
Java home:/usr/lib/jvm/java-6-openjdk/jre 
Default locale: en_US, platform encoding: UTF-8 OS name: "linux", version: "3.0.0-12-virtual", arch:
 "amd64", family: "unix" 
```

Jenkins 中的堆栈跟踪：

```
 mavenExecutionResult exceptions not empty message : Failed to execute
 goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 (default-generate-sources) on project base-template: Execution
 default-generate-sources of goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 failed: Path "/opt/android-sdk-linux/platforms" is not a directory.
 Please provide a proper Android SDK directory path as configuration
 parameter <sdk<path...</path</sdk in the plugin <configuration/.
 As an alternative, you may add the parameter to commandline:
 -Dandroid.sdk.path=... or set environment variable ANDROID_HOME. cause : Execution default-generate-sources of goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 failed: Path "/opt/android-sdk-linux/platforms" is not a directory.
 Please provide a proper Android SDK directory path as configuration
 parameter <sdk<path...</path</sdk in the plugin <configuration/.
 As an alternative, you may add the parameter to commandline:
 -Dandroid.sdk.path=... or set environment variable ANDROID_HOME. Stack trace :  org.apache.maven.lifecycle.LifecycleExecutionException:
 Failed to execute goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 (default-generate-sources) on project base-template: Execution
 default-generate-sources of goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 failed: Path "/opt/android-sdk-linux/platforms" is not a directory.
 Please provide a proper Android SDK directory path as configuration
 parameter <sdk<path...</path</sdk in the plugin <configuration/.
 As an alternative, you may add the parameter to commandline:
 -Dandroid.sdk.path=... or set environment variable ANDROID_HOME.   at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
    at
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at
 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at
 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at
 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at
 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)   at
 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)   at
 org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at
 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)     at
 org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at
 org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at
 org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)   at
 hudson.maven.Maven3Builder.call(Maven3Builder.java:64)     at
 hudson.remoting.UserRequest.perform(UserRequest.java:118)  at
 hudson.remoting.UserRequest.perform(UserRequest.java:48)   at
 hudson.remoting.Request$2.run(Request.java:326)    at
 hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)     at
 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at
 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) Caused by:
 org.apache.maven.plugin.PluginExecutionException: Execution
 default-generate-sources of goal
 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources
 failed: Path "/opt/android-sdk-linux/platforms" is not a directory.
 Please provide a proper Android SDK directory path as configuration
 parameter <sdk<path...</path</sdk in the plugin <configuration/.
 As an alternative, you may add the parameter to commandline:
 -Dandroid.sdk.path=... or set environment variable ANDROID_HOME.   at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
    at
 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 27 more Caused by:
 com.jayway.maven.plugins.android.InvalidSdkException: Path
 "/opt/android-sdk-linux/platforms" is not a directory. Please provide
 a proper Android SDK directory path as configuration parameter
 <sdk<path...</path</sdk in the plugin <configuration/. As an
 alternative, you may add the parameter to commandline:
 -Dandroid.sdk.path=... or set environment variable ANDROID_HOME.   at com.jayway.maven.plugins.android.AndroidSdk.assertPathIsDirectory(AndroidSdk.java:125)
    at
 com.jayway.maven.plugins.android.AndroidSdk.getPlatformDirectories(AndroidSdk.java:285)
    at
 com.jayway.maven.plugins.android.AndroidSdk.findAvailablePlatforms(AndroidSdk.java:260)
    at
 com.jayway.maven.plugins.android.AndroidSdk.<init(AndroidSdk.java:80)
    at
 com.jayway.maven.plugins.android.AbstractAndroidMojo.getAndroidSdk(AbstractAndroidMojo.java:844)
    at
 com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:329)
    at
 com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:102)
    at
 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    ... 28 more channel stopped Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:22:47.663

Seems you don't have correct permission to Android SDK path. Please check from which user that Jenkins is running. try 'ps -ef' check the user.

Login in from that user and try to access the Android SDK folder.

if you don't have access then provide relavent permission the Android SDK path.

# ruby-on-rails - 如何从 Radiant CMS 0.9.1 升级到 1.1.0

> ID：12532517
> 
> 赞同：0
> 
> 时间：2012-09-21T14:27:55.720
> 
> 标签：ruby-on-rails, upgrade, radiant

有没有这样做的最佳实践？更具体地说：创建一个新实例并从旧实例中连续移动内容好还是我应该尝试直接升级旧实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:11:34.533

以我的经验，第一种方法通常更流畅：创建一个新实例并复制数据库和资产文件夹（javascripts/、stylesheets/、images/）。我还喜欢将所有作为 gem 可用的扩展都放在 Gemfile 中，而不是盲目地复制 vendor/extensions/。还要检查“旧”项目的 config/environment.rb 以查看是否定义了扩展加载顺序或包含 gem。

# onedrive - 将文件从一个云存储传输到另一个

> ID：12532519
> 
> 赞同：2
> 
> 时间：2012-09-21T14:27:59.497
> 
> 标签：onedrive, cloud-storage

我想知道是否可以“即时”将文件从一个云存储传输到另一个？具体来说，我想构建一个应用程序，将我的照片从 Skydrive 传输到 Box.net，而不是将文件临时保存到我的数据库，而是将文件直接保存到 Box.net 存储？

谢谢，洛伊扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:27:11.837

我不知道有任何云提供商提供用于将数据传输到竞争云提供商的 API，但我不熟悉 skydrive 或 box.net。云提供商没有动力帮助您将数据转移到竞争中。您几乎可以肯定必须将数据读取到本地计算机，然后将其写入 Box.net

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T19:31:17.190

你可以用[https://app.mover.io/](https://app.mover.io/)和[http://otixo.com/](http://otixo.com/)来做 这些只是为了这个目的..

# c# - 使用 PLINQ 处理具有嵌套循环的列表

> ID：12532524
> 
> 赞同：1
> 
> 时间：2012-09-21T14:28:17.970
> 
> 标签：c#, .net, linq, loops, plinq

我有一个这样的循环：

```
 this.results = new List<Tuple<int, IEnumerable<Thing>>>();

        var utcNow = DateTime.UtcNow;
        var resultsLocker = new object();

        Parallel.ForEach(
            this.dataHelper.GetActiveIds(),
            id =>
            {
                var result = new Tuple<int, IEnumerable<Thing>>(
                    id,
                    this.dataHelper.GetThing(id, this.PossibleLastRunTime, utcNow));

                lock (resultsLocker)
                {
                    this.results.Add(result);
                }
            }); 
```

并且，使用[这个答案](https://stackoverflow.com/a/6741188/3312)，翻译成更紧凑和易于理解的：

```
 this.results = this.dataHelper.GetActiveIds()
            .AsParallel()
            .Select(id => new Tuple<int, IEnumerable<Thing>>(
                id,
                this.dataHelper.GetThing(id, this.PossibleLastRunTime, utcNow)))
            .ToList(); 
```

现在我有一个更复杂的嵌套循环：

```
 var measuresLocker = new object();
        var measures = new List<Tuple<int, object, object>>();

        Parallel.ForEach(
            this.results,
            result =>
            {
                foreach (var measuredValue in result.Item2.Select(destination =>
                    new Tuple<int, object, object>(
                        result.Item1,
                        destination.Message,
                        destination.DestinationName)))
                {
                    lock (measuresLocker)
                    {
                        measures.Add(measuredValue);
                    }
                }
            }); 
```

我想做类似的事情，但我被这段代码卡住了：

```
 measures = this.results
            .AsParallel()
            .Select(result => result.Item2.Select(destination =>
                new Tuple<int, object, object>(
                    result.Item1,
                    destination.Message,
                    destination.DestinationName)).ToList()).ToList(); 
```

我似乎得到了一个列表列表，我只想要一个按照我的原始代码的列表。这可以使用 LINQ 非常简洁地完成吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:31:46.490

要将列表列表展平为单个列表，请使用 SelectMany() 而不是 Select()。

```
 measures = this.results
        .AsParallel()
        .SelectMany(result => result.Item2.Select(destination =>
            new Tuple<int, object, object>(
                result.Item1,
                destination.Message,
                destination.DestinationName)).ToList()).ToList(); 
```

# linux - 使并行作业性能

> ID：12532529
> 
> 赞同：0
> 
> 时间：2012-09-21T14:28:36.750
> 
> 标签：linux, performance, unix, makefile

我`time`用来分析`make`构建，我注意到它`-j 8`比`-j 4`. 我在 Intel Core2 Quad 上使用 gcc 进行编译，因此只有四个处理器内核。这种放缓可能是由于资源限制，以及任何`make`用于安排作业的方法都会增加一些开销吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:33:06.420

如果您运行的进程多于处理器，那么操作系统将需要一些[上下文切换](http://en.wikipedia.org/wiki/Context_switch)。这不是问题`make`；这就是当资源不足时如何安排工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:57:11.967

老实说，我认为几*毫秒*的差异可能只是统计噪音。多次运行测试，看看差异是否可重复，然后再假设差异显着。

也就是说，在 4 个 CPU 上运行 8 个 CPU-bound 进程通常会比运行两组 4 个进程产生更多的多任务开销。如果 make 进程涉及大量 I/O（通常确实如此），那么当其他进程在 I/O 上停滞时，运行超过 4 个（比如 5 或 6 个）来填充 CPU 队列会有一些好处，但是8可能有点过分了。

# jquery - 如何在浮动元素上获得边距？

> ID：12532530
> 
> 赞同：0
> 
> 时间：2012-09-21T14:28:38.947
> 
> 标签：jquery, css, jquery-ui, css-float, margin

我正在尝试引入一个通用解决方案，我将在其中附加一个随机 html 元素左侧的图标。该项目将具有一定的宽度，并且绝对位于另一个元素旁边。为了避免图标与元素旁边的元素重叠，我决定将该元素的边距增加图标的宽度。这就像一个魅力 - 除非有一个浮动元素。边距只是忽略浮动元素的存在。

在不添加包装器 div 等的情况下是否有解决方案？这种方法应尽可能通用。

如果有一个带有javascript的，我会很好的。例如，检查诸如浮动之类的 css 属性会很好——但我一开始不知道解决方案。

例如遇到这个问题：

[浮动元素旁边的表格需要边距](http://jsbin.com/alaguc/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:38:04.500

使您的跨度“显示：块”并给它一个宽度或增加表格的边距

# android - 无法应用动态壁纸

> ID：12532531
> 
> 赞同：0
> 
> 时间：2012-09-21T14:28:45.140
> 
> 标签：android, service, wallpaper

`java.lang.SecurityException: Selected service does not require android.permission.BIND_WALLPAPER`

所以这确实有效：

```
<application android:icon="@drawable/icon"
    android:label="Wallpaper"
    android:permission="android.permission.BIND_WALLPAPER"> 
```

但是，在这种情况下，您的应用本质上只是一张壁纸。我的应用程序完全成熟，其中捆绑了一张壁纸。如果我使用上面的，它不会让我运行应用程序本身。只需设置一个壁纸。

所以我尝试了：

```
<uses-permission android:name="android.permission.BIND_WALLPAPER" /> 
```

这给出了显示的错误。我可以看到预览运行良好，但只要我点击应用或设置。爆头！

哦，当然，我试过没有权限设置，但同样的错误

我如何仍然运行该应用程序，并允许使用捆绑的壁纸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:53:46.720

许可和使用许可是两个相反的概念：

*   权限要求调用元素的人有这个权限
*   uses-permission 要求系统将此权限授予元素

您是否尝试将权限元素放入相关活动中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:53:56.830

根据 Android maninfest.permissions 文档

> 字符串： [BIND_WALLPAPER](http://developer.android.com/reference/android/Manifest.permission.html#BIND_WALLPAPER)：必须是 WallpaperService 要求的，以确保只有系统可以绑定到它。

所以事实上，如果您将权限添加到您的服务。它工作正常。确保系统只能绑定到它是一个安全例外。

```
 <service android:name=".LiveWallpaper"
        android:label="Wallpaper"
        android:icon="@drawable/ic_launcher"
        android:permission="android.permission.BIND_WALLPAPER"> 
```

# ruby-on-rails - rails 将 10.seconds 分配给命名变量并进行计算？

> ID：12532537
> 
> 赞同：0
> 
> 时间：2012-09-21T14:29:02.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, variables

如何创建一个命名变量，为其分配秒数，并使用它进行计算？

```
start_sec = 10.seconds
end_sec = 20.seconds 
```

start_sec + end_sec

```
does not return correct values 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:37:21.143

丑陋的解决方案：

```
start_sec = eval("10.seconds")
end_sec = eval("20.seconds")
start_sec + end_sec 
```

不知道你是不是这个意思。

# c# - 使用 Bitmap.Save() 更好地将 TIF 转换为 PNG？

> ID：12532538
> 
> 赞同：4
> 
> 时间：2012-09-21T14:29:07.320
> 
> 标签：c#, bitmap, png, tiff

**更新：**试过了`SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;`，它在全放大时很明显，但它并没有解决问题，问题现在只是抗锯齿......

TIF 是扫描的文档，包含表格和文本的行等内容。

目前的做法：

```
using System.Drawing;
using System.Drawing.Imaging;    

var image = Image.FromFile(tifFileName);

Image bitmap = new Bitmap(image, (int)(image.Width), (int)(image.Height));

var imageFinal = new Bitmap(image.Width, image.Height);

var graphic = Graphics.FromImage(imageFinal);

graphic.DrawImage(image, 0, 0, image.Width, image.Height);

using(var imgStream = new MemoryStream())
{
    imageFinal.Save(imgStream, ImageFormat.Png);
    return new MemoryStream(imgStream.GetBuffer());
} 
```

但是，它最终看起来像垃圾，例如任何一种略微倾斜的线条都带有楼梯台阶的暗示，而其他精细元素（如文本）看起来很粗糙。特别是与使用 GIMP 将 TIF 保存为 PNG 相比，这看起来很棒。

那么，我可以添加一些东西来使这项工作更好吗？还是我将不得不完全找到另一种方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:08:36.733

我的直接印象是您会遇到太多麻烦，因为您没有调整大小：

```
var image = Image.FromFile(@"C:\Sample.tiff");
image.Save(@"C:\Sample.png", ImageFormat.Png); 
```

如果使用 Image 类型不能解决锯齿问题，请尝试手动选择编码器：

```
#region Using Directives

using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Linq;

#endregion

namespace TiffToBitmap
{
    internal class Program
    {
        private static void Main()
        {
            // Just save the image.
            SaveImage(@"C:\Sample1.png", "image/tiff");

            // Get a byte array from the converted image.
            var imageBytes = GetBytes("image/tiff");

            // Save it for easy comparison.
            File.WriteAllBytes(@"C:\Sample2.png", imageBytes);
        }

        private static byte[] GetBytes(string mimeType)
        {
            var image = Image.FromFile(@"C:\Sample.tiff");

            var encoders = ImageCodecInfo.GetImageEncoders();
            var imageCodecInfo = encoders.FirstOrDefault(encoder => encoder.MimeType == mimeType);

            if (imageCodecInfo == null)
            {
                return null;
            }

            using (var memoryStream = new MemoryStream())
            {
                var imageEncoderParams = new EncoderParameters(1);
                imageEncoderParams.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
                image.Save(memoryStream, imageCodecInfo, imageEncoderParams);

                return memoryStream.GetBuffer();
            }
        }

        private static void SaveImage(string path, string mimeType)
        {
            var image = Image.FromFile(@"C:\Sample.tiff");

            var encoders = ImageCodecInfo.GetImageEncoders();
            var imageCodecInfo = encoders.FirstOrDefault(encoder => encoder.MimeType == mimeType);

            if (imageCodecInfo == null)
            {
                return;
            }

            var imageEncoderParams = new EncoderParameters(1);
            imageEncoderParams.Param[0] = new EncoderParameter(Encoder.Quality, 100L);
            image.Save(path, imageCodecInfo, imageEncoderParams);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T04:49:36.477

下面是我实现的image/tiff类型转换：

转换块：

```
/// <summary>
/// Convert Tiff image to another mime-type
/// </summary>
/// <param name="tiffImage">Source Tiff file</param>
/// <param name="mimeType">Desired result mime-type</param>
/// <returns>Converted image</returns>
public Bitmap ConvertTiffToBitmap(Image tiffImage, string mimeType)
{
    var imageCodecInfo = ImageCodecInfo.GetImageEncoders().First(encoder => encoder.MimeType == MimeType.Tiff);

    using (var memoryStream = new MemoryStream())
    {
        // Setting encode params
        var imageEncoderParams = new EncoderParameters(1)
        {
            Param = {[0] = new EncoderParameter(Encoder.Quality, 100L)}
        };

        tiffImage.Save(memoryStream, imageCodecInfo, imageEncoderParams);

        var converter = new ImageConverter();

        // Reading stream data to new image
        var tempTiffImage = (Image)converter.ConvertFrom(memoryStream.GetBuffer());

        // Setting new result mime-type
        imageCodecInfo = ImageCodecInfo.GetImageEncoders().First(encoder => encoder.MimeType == mimeType);
        tempTiffImage?.Save(memoryStream, imageCodecInfo, imageEncoderParams);

        return new Bitmap(Image.FromStream(memoryStream, true));
    }
}

public static class MimeType
{
    public const string Bmp = "image/bmp";
    public const string Gif = "image/gif";
    public const string Jpeg = "image/jpeg";
    public const string Png = "image/png";
    public const string Tiff = "image/tiff";
} 
```

用法：

```
var sourceImg = Image.FromFile(@"C:\MyImage.tif", true);

var codec = ImageCodecInfo.GetImageDecoders().First(c => c.FormatID == sourceImg.RawFormat.Guid);
if (codec.MimeType == MimeType.Tiff)
{
    sourceImg = ConvertTiffToBitmap(sourceImg, MimeType.Jpeg);
} 
```

希望，可能有用

# ads - 使用 DoubleClick 进行第三方点击跟踪

> ID：12532539
> 
> 赞同：1
> 
> 时间：2012-09-21T14:29:09.683
> 
> 标签：ads, double-click-advertising

有人可以帮助我使用 DoubleClick 点击跟踪 URL 进行第三方点击跟踪吗？

例如，DoubleClick 点击跟踪 URL 是：

[http://ad.mo.doubleclick.net/dartproxy/dfa.click.handler?k=N1707.540589.COMPANY.COM/B6899033.6;ord=1897438579](http://ad.mo.doubleclick.net/dartproxy/dfa.click.handler?k=N1707.540589.COMPANY.COM/B6899033.6;ord=1897438579)

如何确保在调用此 DoubleClick 点击跟踪 URL 时调用我的内部点击跟踪 URL [http://myserver.com/click?token=value ？](http://myserver.com/click?token=value)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:25:19.457

您可以将 click= 参数附加到 URL，DoubleClick 将重定向到该 URL 并将最终 URL 附加到 URL 的末尾。

例如，如果您的网址是[http://myserver.com/click?token=value&url=](http://myserver.com/click?token=value&url=)他们会将最终网址附加到网址的末尾，以便您可以重定向到最终目的地。

如果您对其他跟踪器感到好奇，我们将在此处详细介绍主要跟踪器：

[http://help.adzerk.com/questions/6539-Third-Party-Click-Tracking](http://help.adzerk.com/questions/6539-Third-Party-Click-Tracking)

# php - 在 ("League"-System) 中创建一个具有 mysql 特定值的动态 php/html 表

> ID：12532540
> 
> 赞同：1
> 
> 时间：2012-09-21T14:29:09.327
> 
> 标签：php, mysql

我在以下结构/逻辑上苦苦挣扎……该项目是关于如何在 php 和 mysql 上建立联盟，每个玩家都必须互相对抗

我想生成一个像这样的（动态）表：

```
<table border="1">

    <tr>
        <td>--</td>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
    <tr>
        <td>1</td>
        <td>--</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
    </tr>
    <tr>
        <td>2</td>
        <td>--</td>
        <td>--</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
    </tr>

    <tr>
        <td>3</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>x</td>
        <td>x</td>
        <td>x</td>
    </tr>
    <tr>
        <td>4</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>x</td>
        <td>x</td>
    </tr>
    <tr>
        <td>5</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>x</td>
    </tr>
    <tr>
        <td>6</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
        <td>--</td>
    </tr>

</table> 
```

每个数字都是一个昵称，所以这最终是如何显示统计数据

现在我的东西到目前为止：

```
 $get_player = mysql_query("SELECT nickname, id FROM player");

$get_player_score = mysql_query("select 
    player_id, game1, game2, game3
from
    1on1_matches_scores
where
    1on1_matches_id = (select 
            id
        from
            1on1_matches
        where
            league_id = (select 
                    id
                from
                    league
                where
                    league_type_id = (select 
                            id
                        from
                            league_type
                        where
                            id = 1)
                        and season_id = (select 
                            id
                        from
                            season
                        where
                            id = 1))
        limit 1)");

while ($row = mysql_fetch_array($get_player))
    $results[$row[nickname]][] = $row[id];

while ($row = mysql_fetch_array($get_player_score))
    $data[$row[player_id]][] = $row[game3];

echo "<table border='1'><tr>";
echo "<td>--</td>";

foreach ($results as $key => $value)
    echo "<td>$key</td>";
echo "</tr>";

foreach ($results as $key => $value) {
    echo "<tr><td>$key</td>";
    foreach ($data as $key => $value) :
        foreach ($value as $cell_value)
            echo "<td>Punkte: $cell_value</td>";
        endforeach;

    echo "</tr>";
} 
```

好吧，我如何从玩家 1 和玩家 2 获取特定值（匹配结果）到确切的 td 中？

# android - 网格布局和 API 级别

> ID：12532542
> 
> 赞同：2
> 
> 时间：2012-09-21T14:29:20.003
> 
> 标签：android, api, grid-layout

我想使用网格布局，但得到以下错误：

> 错误：在包“android”中找不到属性“columnCount”的资源标识符

这是因为我的 API 级别是**9**吗？

网格布局真的需要 API 级别**14**吗？（我使用版本：8.0.1.v201012062107-82219）

*   如果是，我该怎么办？请逐步解释这一点。
*   如果不是，那是什么原因？我正在做与示例*完全相同*的操作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:35:07.087

以下是我用来解决问题的步骤：

要使用 GridLayout，我发现很多东西都应该升级。

1.  我的系统上安装了“jdk 7”，所以不需要升级它。
2.  我下载了“installer_r20-windows.exe”并运行它。
3.  我下载了包含“android-14”的“平台”，并将其复制到 android-sdk 文件夹中。（我的是：C:\ Android\android-sdk）
4.  我下载了包含“armeabi-v7a”的“系统映像”，并将其复制到我的 sdk 文件夹中。
5.  我下载了“platform-tools_r13-windows”并将其复制到 SDK 文件夹中。
6.  然后我发现我的 Eclipse 也很旧，因此下载了它的最新版本，“eclipse 4.2_juno”（2012 年 6 月 27 日）
7.  我下载了“Eclipse-plugins-ADT-20.0.zip”。然后进入eclipse：Help > Install New Software > Add > Archive > Eclipse-plugins-ADT-20.0.zip。然后选择“开发者工具”>点击下一步>接受>点击完成>重启eclipse。
8.  再次在 Eclipse 中：Window> Preferences > Android > SDK Location：我的 android-sdk 文件夹所在的路径。（例如，我的是“C:\Android\android-sdk”）> Apply > 选择“Android 4.0”> 单击 OK。
9.  然后我创建了新的 AVD，来自：eclipse > Window > AVD Manager > New..
10.  最后，在 sdk 文件夹中，我创建了一个名为“extras”的新文件夹，在其中创建了另一个名为“android”的新文件夹，在其中创建了另一个名为“support”的新文件夹。
11.  然后我提取了“support_r09.zip”的内容（已下载）。

现在一切正常。。

感谢在这篇文章中帮助过我的所有人（viperbone、Doomsknight、Matthieu、MemLeak、Jeroen）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:34:43.583

是的，GridLayout 仅在您在 API 级别 14 或更高级别的设备上运行时可用。

不确定那个版本 8.0.1.... 是什么？绝对不是安卓版。

如果您计划在 Ice Cream Sandwich 之前的任何东西上运行您的应用程序，恐怕您必须使用该布局以外的其他东西。可能是表格布局？或者检查[这个问题](https://stackoverflow.com/questions/9126780/how-to-make-android-gridlayout-compatible-to-older-version)

更多（来自评论）：

要么您可以让您的应用程序仅在 ICS 或更高版本上运行（例如，使用 Gingerbread 手机的人将无法运行它）。

如果是，那么：

*   下载最新的 Android SDK
*   在清单中设置 targetSDKversion="14"

这个错误应该会消失。

如果不是，那么您不能使用 GridLayout。您有几个选项可以替换它：

*   从以下位置下载库：[https](https://github.com/dlew/android-gridlayout) ://github.com/dlew/android-gridlayout并使用它
*   使用其他布局（如 TableLayout 或 LinearLayouts）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:35:41.910

GridLayout 需要[API 14](http://developer.android.com/reference/android/widget/GridLayout.html)

您可以为其他 android 版本创建布局 -> 将[布局适应 Android 平台或 API 级别](https://stackoverflow.com/questions/6536079/adapt-layout-to-android-platform-or-api-level)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T06:53:48.580

在您的清单中使用：

```
<uses-sdk minSdkVersion="14" /> 
```

但是，这意味着运行`Android API`低于**14**的任何设备都将无法使用您的应用

# html - 如何在包装类的 css 上使用内联 css 或完全使用另一个类？

> ID：12532544
> 
> 赞同：0
> 
> 时间：2012-09-21T14:29:24.927
> 
> 标签：html, css

好的，所以在我的 Chrome 开发人员工具中，我正在检查一些覆盖我的 p 标签样式的 css 规则。

下面的 css 规则覆盖了我的内部内容规则。

```
media="screen"
#jobcopy p {
    color: black;
    margin: 0;
    min-height: 13px;
    _height: 13px;
} 
```

所以html看起来像这样。

```
<div id="jobcopy">
    <table class="myclass">
        <p></p>
    </table>
</div> 
```

我的CSS类：

```
media="screen"
.myclass p {
    margin:10px;
} 
```

我的主要问题是我不希望 #jobcopy p {} 应用于表中的任何 p 标签。我试图在我的表格类中指定一个通用边距，比如 10px。但是，当我查看 chrome 中的代码时，它显示它被标记出来并且 #jobcopy 否决了它。

无论如何，我是否可以告诉特定部分不要使用围绕此内容的 css。另一个问题是我无法控制#jobcopy css。它正在被另一家公司申请。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:33:23.063

您可以将 !important 添加到您不想被覆盖的 CSS 规则中。因此，如果您想覆盖 #jobcopy p 中的边距，您必须执行以下操作：

```
.myclass p {
    margin:10px !important;
} 
```

查看更多：[http ://css-tricks.com/when-using-important-is-the-right-choice/](http://css-tricks.com/when-using-important-is-the-right-choice/)

# c - alloca的应用是什么？

> ID：12532550
> 
> 赞同：2
> 
> 时间：2012-09-21T14:29:41.697
> 
> 标签：c, dynamic-memory-allocation, alloca, stack-memory

> **可能重复：**
> [在哪些情况下 alloca() 有用？](https://stackoverflow.com/questions/3452434/in-which-cases-is-alloca-useful)

最近碰巧看到了alloca()函数的使用。谷歌搜索告诉我它用于在堆栈上分配空间。我无法为它获取应用程序？另外，使用这个有什么陷阱吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:31:33.560

该函数`alloca`从来都不是任何 C 标准的一部分。它通常由供应商作为扩展提供，以实现类似 C99 中的可变长度数组（“VLA”）：

```
void foo(int n)
{
    char arr99[n];            // C99-style VLA

    char * p89 = alloca(n);   /* C89 work-around using "alloca" */

    // Usage:
    for (int i = 0; i != n; ++i)
    {
        arr99[i] = p89[i] = '0' + i;
    }

}  // memory is freed automatically here 
```

在这两种情况下，内存都会在函数结束时自动管理和释放。

的使用在`alloca`精神上很麻烦，因为它不太适合 C 对象模型。例如，即使您在嵌套范围内分配内存，它也会一直有效，直到封闭*函数*结束，而不仅仅是块。VLA 具有更好的语义，可以使用动态查询`sizeof`，而没有等效的`alloca`分配内存机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:31:54.903

当您想要进行动态外观分配（例如使用在运行时变化的大小）时，它很方便，但仍然可以确定一旦调用的代码`alloca()`超出范围，它就会全部清除。

像所有自动（“堆栈”）分配一样，如果您不小心将指针存储的时间超过了它们的有效时间，那会伤到您的脚。

# c# - 我如何放入异常捕获

> ID：12532551
> 
> 赞同：1
> 
> 时间：2012-09-21T14:29:43.390
> 
> 标签：c#, c#-4.0, wmi

我有下面的代码，它通过并返回磁盘信息。运行时，我注意到某些 WMI 属性在我的计算机上不可用（即 FirmwareRevision）。

因此，当我运行代码时，VS 会崩溃并显示“未找到”。知道我如何在未找到对象的输出上设置异常捕获以声明“不可用”。

我一直在阅读异常捕获，但到目前为止我的业余方式是明确定义我想要使用的异常......这个程序打算在不同服务器的负载上运行，因此希望它可以智能地找出任何一台服务器的 WMI 对象可能没有。

代码如下，目前它在（最后一行）失败：

> "lblFirmware.Text = "固件：" +moDisk["FirmwareRevision"].ToString();"

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Management;
using Microsoft.Win32;

namespace diskdrive_info
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //Get all the disk drives
            ManagementObjectSearcher mosDisk = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
            // Loop through each object (disk) retrieved by WMI
            foreach (ManagementObject moDisk in mosDisk.Get())
            {
                cmbHdd.Items.Add(moDisk["Model"].ToString());
            }
        }

        private void cmbHdd_SelectedIndexChanged(object sender,EventArgs e)
        {
            ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
            foreach (ManagementObject moDisk in mosDisks.Get())
            {
                lblType.Text = "Type: " + moDisk["MediaType"].ToString();
                lblModel.Text = "Model: " + moDisk["Model"].ToString();
                lblCapacity.Text = "Capacity: " + moDisk["Size"].ToString();
                lblPartitions.Text = "Partitions: " + moDisk["Partitions"].ToString();
                lblSectors.Text = "Sectors: " + moDisk["SectorsPerTrack"].ToString();
                lblSignature.Text = "Signatures: " +moDisk["Signature"].ToString();
                lblFirmware.Text = "Firmware: " +moDisk["FirmwareRevision"].ToString();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:33:18.897

尝试替换：

```
lblFirmware.Text = "Firmware: " +moDisk["FirmwareRevision"].ToString(); 
```

和：

```
lblFirmware.Text = "Firmware: " + moDisk["FirmwareRevision"] == null ? "Not Available" :  moDisk["FirmwareRevision"].ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:32:01.800

尝试这个

```
private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            //Get all the disk drives
            ManagementObjectSearcher mosDisk = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
            // Loop through each object (disk) retrieved by WMI
            foreach (ManagementObject moDisk in mosDisk.Get())
            {
                 cmbHdd.Items.Add(moDisk["Model"].ToString());
            }
        }
        catch(Exception exp)
        {

        }
    }

    private void cmbHdd_SelectedIndexChanged(object sender,EventArgs e)
    {
        try
        {
            ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
            foreach (ManagementObject moDisk in mosDisks.Get())
            {
                 lblType.Text = "Type: " + moDisk["MediaType"].ToString();
                 lblModel.Text = "Model: " + moDisk["Model"].ToString();
                 lblCapacity.Text = "Capacity: " + moDisk["Size"].ToString();
                 lblPartitions.Text = "Partitions: " + moDisk["Partitions"].ToString();
                 lblSectors.Text = "Sectors: " + moDisk["SectorsPerTrack"].ToString();
                 lblSignature.Text = "Signatures: " +moDisk["Signature"].ToString();
                 lblFirmware.Text = "Firmware: " +moDisk["FirmwareRevision"].ToString();
            }
        }
        catch(Exception exp)
        {

        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:35:47.717

这不是您问题的直接答案，但更好的答案是您不应该依赖 try/catch。Catch 语句适用于您无法预见或您的程序无法正常处理的情况。[这些都不适用于这里 - 通过在WMI 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394572%28v=vs.85%29.aspx)中查找它们，您实际上可以提前知道哪些属性会在哪些操作系统上导致问题。

编写应用程序的更可靠的方法是检查您正在运行的操作系统，并且只尝试检索您知道可用的属性。您仍然应该将所有这些都包装在 try/catch 中，如其他答案所示，以防万一发生其他意外情况，但这种特定情况是您可以预期的并且应该编码而不是抛出和捕获异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T02:11:50.590

此外，为了处理异常，如果您阅读了有关该属性的此类的[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)`FirmwareRevision`：

> Windows Server 2003、Windows XP、Windows 2000 和 Windows NT 4.0：此属性不可用。

您可以通过检查 Windows 版本来防止这种情况

```
lblFirmware.Text = "Firmware: " + System.Environment.OSVersion.Version.Major <6 ? "Not Available in this OS" :  moDisk["FirmwareRevision"].ToString(); 
```

# haskell - 您不了解 Hindley-Milner 的哪一部分？

> ID：12532552
> 
> 赞同：899
> 
> 时间：2012-09-21T14:29:44.620
> 
> 标签：haskell, functional-programming, lambda-calculus, hindley-milner, denotational-semantics

我*发誓*曾经有一件**T 恤**出售，上面印着不朽的文字：

* * *

哪一部分

![欣德利-米尔纳](../Images/25785e52f654e7d3bdf3153b49ed6c70.png)

你*不*明白吗？

* * *

就我而言，答案是……全部！

特别是，我经常在 Haskell 论文中看到这样的符号，但我不知道它是什么意思。我不知道它应该是什么数学分支。

我当然认识希腊字母表中的字母和诸如“∉”之类的符号（这通常意味着某物不是集合的元素）。

另一方面，我以前从未见过“⊢”（[维基百科声称它可能意味着“分区”](https://en.wikipedia.org/wiki/List_of_mathematical_symbols)）。我也不熟悉这里的 vinculum 的使用。（通常，它表示分数，但这里似乎并非*如此*。）

如果有人至少可以告诉我从哪里开始寻找理解这个符号海洋的含义，那将很有帮助。

* * *

## 回答 #1

> 赞同：691
> 
> 时间：2012-09-21T17:28:50.993

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2012-09-21T16:49:41.953

* * *

## 回答 #3

> 赞同：77
> 
> 时间：2012-09-21T15:24:47.813

> 如果有人至少可以告诉我从哪里开始寻找理解这片符号的海洋意味着什么

请参阅“[**编程语言的实践基础**](https://www.cs.cmu.edu/%7Erwh/pfpl/2nded.pdf)”，第 2 章和第 3 章，通过判断和推导来了解逻辑风格。整本书[现在可以在亚马逊上买到。](https://rads.stackoverflow.com/amzn/click/com/1107150302)

## 第2章

# 归纳定义

归纳定义是研究编程语言不可或缺的工具。在本章中，我们将开发归纳定义的基本框架，并给出一些使用示例。归纳定义由一组*规则*组成，用于推导各种形式的*判断*或*断言。*判断是关于一个或多个特定类型的句法对象的陈述。规则规定了判决有效的充分必要条件，从而充分确定了判决的含义。

### 2.1 判断

我们从关于句法对象的*判断*或*断言的概念开始。*我们将使用多种形式的判断，包括以下示例：

*   *n* **nat** — *n*是自然数
*   *n* = *n1* + *n2* — *n*是*n1*和*n2的总和*
*   *τ* **类型**— *τ*是一个类型
*   *e* : *τ* — 表达式*e*的类型为*τ*
*   *e* ⇓ *v* — 表达式*e*的值为*v*

判断表明一个或多个句法对象具有属性或相互之间存在某种关系。属性或关系本身称为*判断形式*，一个或多个对象具有该属性或处于该关系中的判断称为该判断形式的*实例*。判断形式也称为*谓词*，构成实例的对象就是它的*主语*。我们为断言**J**成立*a*的判断写*一个* **J。**当强调判断的主题并不重要时，（文本在此处截断）

 **** * *

## 回答 #4

> 赞同：71
> 
> 时间：2017-02-03T23:01:14.427

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2012-09-21T16:21:58.323

符号来自[自然演绎](http://en.wikipedia.org/wiki/Natural_deduction)。

⊢ 符号称为[十字转门](http://en.wikipedia.org/wiki/Turnstile_%28symbol%29)。

6条规则很简单。

`Var`规则是相当微不足道的规则 - 它表示如果标识符的类型已经存在于您的类型环境中，那么推断您只需从环境中获取的类型。

`App`规则说，如果你有两个标识符`e0`，`e1`并且可以推断出它们的类型，那么你就可以推断出 application 的类型`e0 e1`。`e0 :: t0 -> t1`如果您知道并且（相同的 t0！），则规则如下所示`e1 :: t0`，则应用程序类型良好且类型为`t1`.

`Abs`并且`Let`是推断 lambda-abstraction 和 let-in 类型的规则。

`Inst`规则说您可以用不太通用的类型替换一种类型。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-04-25T14:55:12.473

有两种方法可以考虑 e：σ。一个是“表达式 e 具有类型 σ”，另一个是“表达式 e 和类型 σ 的有序对”。

将 Γ 视为关于表达式类型的知识，实现为一组表达式和类型对，e : σ。

旋转门⊢表示从左边的知识，我们可以推断出右边的内容。

因此可以阅读第一条规则 [Var]：
如果我们的知识 Γ 包含对 e : σ，那么我们可以从 Γ 推断出 e 具有类型 σ。

第二条规则 [App] 可以理解为：
如果我们从 Γ 可以推断出 e_0 具有类型 τ → τ'，并且我们可以从 Γ 中推断出 e_1 具有类型 τ，那么我们可以从 Γ 中推断出 e_0 e_1 具有键入τ'。

通常写为 Γ, e : σ 而不是 Γ ∪ {e : σ}。

第三条规则 [Abs] 因此可以解读为：
如果我们从 Γ 扩展 x : τ 可以推断出 e 具有类型 τ'，那么我们可以从 Γ 推断出 λx.e 具有类型 τ → τ'。

第四个规则 [Let] 留作练习。:-)

第五条规则 [Inst] 可以解读为：
如果我们从 Γ 可以推断出 e 具有类型 σ'，并且 σ' 是 σ 的子类型，那么我们可以从 Γ 推断出 e 具有类型 σ。

第六条也是最后一条规则 [Gen] 可以解读为：
如果我们从 Γ 可以推断出 e 具有类型 σ，并且 α 在 Γ 中的任何类型中都不是自由类型变量，那么我们可以从 Γ 推断出 e 具有类型∀ασ。***

# jquery - 正确设置选择的选项值并触发更改触发器

> ID：12532554
> 
> 赞同：0
> 
> 时间：2012-09-21T14:29:49.107
> 
> 标签：jquery

我有三个选择框

```
$("select#selectbox1").val(data.Ref_box1_ID.toString()).trigger('change');
$("select#selectbox2").val(data.Ref_box2_ID.toString()).trigger('change');
$("select#selectbox3").val(data.Ref_box3_ID.toString()).trigger('change'); 
```

我有一个问题：在更改事件中，有一些代码可以在下一个选择框中加载选项，但看起来它只适用于第一个正确选择选项然后触发更改事件在下一个选择框中加载选项的代码；但是第二个选择只显示第一个选项，上面写着“选择一个选项......”，而在第三个中它根本不加载任何东西，也不选择任何选项..

我可能在这段代码中错过了什么？...我尝试将 .blur() 也用于刷新但没有效果，也没有在 .trigger() 之前添加事件属性（'selected'，'selected'）...

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:23:15.257

检查这个

```
<select id="selectbox1" />
    <option value="11"> 11</option>
    <option value="12"> 12</option>
    <option value="13"> 13</option>
</select>

<select id="selectbox2" />
    <option value="21"> 21</option>
    <option value="22"> 22</option>
    <option value="23"> 23</option>
</select>
<select id="selectbox3" />
    <option value="31"> 31</option>
    <option value="32"> 32</option>
    <option value="33"> 33</option>
</select>

$(function() {
    $('#selectbox1 , #selectbox2, #selectbox3').on('change', function() {

        var val = $(this).find('option:selected').val();

        alert('Value of ' + $(this).attr('id') + ' is : ' + val);
    });

    $("#selectbox1").val('12').trigger('change');
    $("#selectbox2").val('23').trigger('change');
    $("#selectbox3").val('32').trigger('change');

});​ 
```

您是在定义事件之后还是在此之前触发了事件。如果稍后完成，则事件尚无法触发它们...

检查[小提琴](http://jsfiddle.net/sushanth009/3UudT/)

# javascript - Javascript：在 javascript 中将 HTML CODE 放入一个框架中

> ID：12532556
> 
> 赞同：0
> 
> 时间：2012-09-21T14:29:54.227
> 
> 标签：javascript, html, frame, document.write

我正在尝试将 HTML 代码放入框架中。

我用过的框架外：`document.write`进入？

框架是：

```
var frameTwitter = document.getElementById('FrameTwitter'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:39:58.697

为了写入 iFrame，您需要获取它的`contentWindow`or `contentDocument`。

```
var frameTwitter = document.getElementById('FrameTwitter'),
    frameDocument = frameTwitter.contentWindow || frameTwitter.contentDocument;
frameDocument = frameDocument.document || frameDocument;

frameDocument.write('<p>Hello World!</p>'); 
```

演示：http: [//jsfiddle.net/NTICompass/8Ekrs/1/](http://jsfiddle.net/NTICompass/8Ekrs/1/)

**更新**：您还可以使用`window.frames`来获取 iFrame 的`window`对象。

```
var frameDocument = window.frames.FrameTwitter.document;
frameDocument.write('<p>Hello World!</p>'); 
```

演示：http: [//jsfiddle.net/NTICompass/8Ekrs/2/](http://jsfiddle.net/NTICompass/8Ekrs/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:44:45.230

由于您使用的是同一域中的 2 个文件，因此应该可以。在 上使用相对路径可能是理想的，`iframe`因为您必须匹配域、协议和端口，否则这将停止工作。

**主页.html**

```
<iframe src="Frame.html" id="FrameTwitter"></iframe>

<script type="text/javascript">
var frame = document.getElementById('FrameTwitter');
frame.writeInto('Some text here');
</script> 
```

**框架.html**

```
<script type="text/javascript">
function writeInto(str) {
    document.writeln(str);
}
</script> 
```

这样你就可以`Frame.html`在文件中设置你需要的功能，在那里测试功能，而不用担心跨框架开发。然后，一旦设置了您的功能，您就可以从父级触发它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:37:38.647

您必须使用 postmessage API 请参阅[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

火箭危险品也是正确的

*通常，只有当且仅当执行它们的页面位于具有相同协议（通常都是 http）、端口号（http 的默认值为 80）和主机（模document.domain 被两个页面设置为相同的值）*

# php - 这个 str_replace 和这个 preg_replace 一样吗？

> ID：12532559
> 
> 赞同：0
> 
> 时间：2012-09-21T14:30:10.457
> 
> 标签：php, regex, str-replace

只是一个简短的问题，考虑到给出了 XML 请求或响应，这两行是否**总是**给出相同的结果？

```
str_replace( array( "\n", "\t", "\r", "\r\n" ), '', trim( $xml ) );

preg_replace( '#>\s+<#', '><', $xml ); 
```

如果没有，我怎样才能做到`preg_replace`这样？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:32:57.670

`preg_replace`比`str_replace`（它只匹配尖括号外的空格）更受限制，并且包括`\s`空格字符。`<blah> \r \n \t TEXT \t\t</blah>`此外，不会替换字符串 like ，而是保留空格。

事实上，除了都以某种方式影响空白之外，两者并没有什么相似之处。

相当于`preg_replace`你的`str_replace`就是`('/[\r\n\t]/','',$xml)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:33:14.080

不。例如，如果您有类似的东西：

```
<tag att="1"
att="2"
att="3">text</tag> 
```

他们会给出不同的结果。但是，如果我可以提供建议，请不要为此目的使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:46:27.987

它们不相似，因为：

1.  正则表达式只处理括号之间的空格（我想这是因为你不想破坏 xml？！）
2.  \s 还将删除“正常”空白字符和其他[不可打印字符](http://www.regular-expressions.info/characters.html#nonprint)（我认为可以吗？）
3.  preg_replace 通常只在单行上工作，因此之后可能还有换行符 => 为避免这种情况，请使用[“m”修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

如果第一个变体适合您，那么我认为它比正则表达式更好。否则，这可能是搜索到的：

```
preg_replace( '#>\s+<#m', '><', $xml ); 
```

# html - 在 selenium Webdriver get() 之后，所有元素都应该在 isDisplayed() 上返回 true 吗？

> ID：12532573
> 
> 赞同：1
> 
> 时间：2012-09-21T14:31:06.360
> 
> 标签：html, asynchronous, selenium, webdriver, rendering

WebDriver get() 和 isDisplayed() 方法没有按我的预期工作。

至于[文档](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Navigation.html)：

> 这是使用 HTTP GET 操作完成的，该方法将阻塞直到加载完成

[正如在 Selenium 中等待页面加载](https://stackoverflow.com/questions/5868439/wait-for-page-load-in-selenium)这样的其他问题中提到的，get 方法应该等待页面加载。

但是在运行 get() 之后，来自 RenderedWebElement 的 isDisplayed() 方法并不总是在某些元素上返回 true。

可能的原因是什么？

我想详细说明在 webdrivers 上下文中加载和显示之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:59:05.083

在最新的 UI 框架/API 中，您可以隐藏页面上的元素。

例如。考虑一个有 5 个元素的页面。当页面加载时，页面上只会显示 3 个元素，另外 2 个将被隐藏，并且在采取一些操作时，其他 2 个元素将被显示。

您可以在以下链接中的演示部分查看示例：

显示元素链接：[http ://api.jquery.com/show/](http://api.jquery.com/show/)

隐藏元素链接：[http ://api.jquery.com/hide/](http://api.jquery.com/hide/)

当您使用 webDriver get() 方法时，webdriver 将等待页面加载，即等待页面的所有 html 内容加载到浏览器上。这并不意味着所有元素都是可见的。

当您使用 isDisplayed() webdriver 检查所述元素是否显示在页面上。如果您知道在运行测试用例时该元素可能隐藏在页面上，那么这是验证该元素是否显示的好方法。否则，您的测试脚本将失败并显示错误“未显示元素以执行操作”

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:18:17.330

isDisplayed() 在我看来不是很好的方法。从等待中获得一些想法：显式和隐式等待机制：

```
Explicit wait
WebDriverWait.until(condition-that-finds-the-element)

Implicit wait
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

Explicit Waits:

WebDriver driver = new FirefoxDriver();
driver.get("http://somedomain/url_that_delays_loading");
WebElement myDynamicElement = (new WebDriverWait(driver, 10))
  .until(new ExpectedCondition<WebElement>(){
    @Override
    public WebElement apply(WebDriver d) {
        return d.findElement(By.id("myDynamicElement"));
    }});

Implicit Waits:

WebDriver driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
driver.get("http://somedomain/url_that_delays_loading");
WebElement myDynamicElement = driver.findElement(By.id("myDynamicElement"));

The example what you have given both do exact same thing.. 
In Explicit wait, WebDriver evaluates the condition every 500 
milliseconds by default ..if it is true, it comes out of loop 

Where as in ImplicitWait WebDriver polls the DOM every 500 
milliseconds to see if element is present.. 

Difference is 
1\. Obvious - Implicit wait time is applied to all elements in your 
script but Explicit only for particular element 
2\. In Explicit you can configure, how frequently (instead of 500 
millisecond) you want to check condition. 
3\. In Explicit you can also configure to ignore other exceptions than 
"NoSuchElement" till timeout.. 
```

[你可以在这里](http://www.bizalgo.com/2012/01/14/timing-races-selenium-2-implicit-waits-explicit-waits/)获得更多信息

我还使用流利的等待机制来等待元素在页面上呈现。实际上，您将 css 选择器或 xpath 传递给函数并简单地获取 web 元素。

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

流利的等待[说明](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

希望这现在清楚了）

# contiki - 获取键盘输入 Contiki

> ID：12532574
> 
> 赞同：1
> 
> 时间：2012-09-21T14:31:11.180
> 
> 标签：contiki

我想知道如何在 contiki os 中获得键盘输入。

我已经尝试过`getchar()`, `getch()`, `scanf()`,`gets()`都没有成功，所以我想知道是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:34:43.950

getchar,getch,scanf,gets 是一种从文件（例如标准输入）中读取的 POSIX 事物——这些在 Contiki 中不存在（尽管您可能会在本机平台上使用它们）。

所以要问的第一个问题是您使用的是什么平台以及“键盘”是什么意思。如果键盘意味着键入通过串行端口从计算机发送的字符，那么您必须知道它们在运行 Contiki 的东西上的接收位置。一种典型的安排是在​​ uart 上接收字符，例如 uart1。

在这种情况下，contiki 使用将由应用程序定义的回调，例如 uart1_input_handler。平台主循环将检查是否有字符要发送到 input_handler，然后检查是否定义了 input_handler。如果是这样，将调用类似 uart1_input_handler(c) 的东西。

您可以通过对 uart1_input_handler 进行 grepping 来查看适用于各种平台的代码：

平台/redbee-econotag/contiki-mc1322x-main.c: uart1_input_handler(uart1_getc());

cpu/msp430/dev/uart1x.c: if(uart1_input_handler(c)) {

cpu/stm32w108/dev/uart1.c：uart1_input_handler(c)；

ETC...

一些注册输入处理程序并处理字符的示例：

示例/外壳：

```
/* set up the shell */
uart1_set_input(serial_line_input_byte);
serial_line_init();
serial_shell_init();

slip, in examples/ipv6/rpl-border-router/slip-bridge.c

slip_set_input_callback(slip_input_callback); 
```

我对您想要做的事情的猜测是从 shell 示例开始并尝试让这些示例正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T18:43:19.943

下面引用的示例来自github[上 contiki 的 Wiki 页面。](https://github.com/contiki-os/contiki/wiki/Input-and-output)它演示了串行输入的 contiki 特定机制是如何工作的。就像上面提到的 mariano 一样，必须为特定于您使用的平台的串行驱动程序定义回调。我以前用过。“rs232_set_input(RS232_PORT_0, serial_line_input_byte) ;” 用于我的 atmega128 MCU。串行 i/o 驱动程序使用此回调机制将输入字符发布到 serial-line.c 文件中定义的“serial_line_process”。然后，该进程将 serial_line_event_message 连同在串行线上读取的数据一起广播到所有进程。像例如这样的过程。如下所述，可以捕获此事件并根据要求处理输入。

上面提到的回调在 $(CONTIKI)/core/dev/serial-line.c 中定义。检查出。一旦你使用 serial_line_init() 初始化它，你就可以开始了。

```
 #include "contiki.h"
 #include "dev/serial-line.h"
 #include <stdio.h>

 PROCESS(test_serial, "Serial line test process");
 AUTOSTART_PROCESSES(&test_serial);

 PROCESS_THREAD(test_serial, ev, data)
 {
   PROCESS_BEGIN();

   for(;;) {
     PROCESS_YIELD();
     if(ev == serial_line_event_message) {
       printf("received line: %s\n", (char *)data);
     }
   }
   PROCESS_END();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T09:49:56.003

我假设您使用 COOJA（或者您可能将键盘连接到您的设备，因此我的答案将不正确）。COOJA 是模拟器，而不是模拟器。

如果您想要响应式设计，请使用传感器按钮（例如在天空平台上）

SENSORS_ACTIVATE(button_sensor);

```
/* Wait until we get a sensor event with the button sensor as data. */
PROCESS_WAIT_EVENT_UNTIL(ev == sensors_event &&
             data == &button_sensor); 
```

希望它有所帮助。

# c++ - 类声明中模板参数使用的 Visual C++ 错误 C2059

> ID：12532576
> 
> 赞同：2
> 
> 时间：2012-09-21T14:31:22.140
> 
> 标签：c++, visual-studio-2010, templates, visual-c++

以下：

```
template <int A>
class __declspec(align(A)) alignable {
}; 
```

不能使用 Visual Studio 编译，但可以在 GNU 中正常工作（使用`__attribute__`而不是`__declspec`）。`A`当用作类声明的一部分时，编译器似乎无法解析模板参数，并给出错误“C2059：语法错误：标识符”。

我开始怀疑这是否是有效的 C++，因为`A`它是在声明它的同一语句中使用的。令我困惑的是 GNU 允许这样做。我已经浏览了标准的“模板”部分，但似乎找不到任何明确的内容。

**编辑：**由于类可以从其模板参数之一派生，因此在类声明中可以使用模板参数对我来说似乎是明智的。

# apache - 通过添加 php 参数重定向

> ID：12532580
> 
> 赞同：1
> 
> 时间：2012-09-21T14:31:34.730
> 
> 标签：apache, .htaccess, redirect

我需要设置永久重定向

```
/models_com/dpanorama/ 
```

到

```
/models_com/dpanorama/?t=cm 
```

我怎样才能用 .htaccess 文件做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:34:00.783

原谅我没有准确回答你的问题。我不确切知道如何使用.htaccess 来做到这一点。但你不能只在你的 php 脚本上强制执行吗？就像是：

```
if (!isset($_GET["t"])){
  $t = "cm";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:43:33.203

试试这个 ：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} !t=cm
RewriteRule ^models_com/dpanorama/$ /models_com/dpanorama/?t=cm [L,R=301] 
```

# seam - Jboss 服务器迁移导致异常？

> ID：12532585
> 
> 赞同：0
> 
> 时间：2012-09-21T14:31:43.550
> 
> 标签：seam, jsf-1.2, jboss-4.2.x

我的 Jboss Seam 应用程序在本地环境中运行良好，但是当我尝试在远程 Jboss 上部署它时，一些页面重定向到调试页面，但出现以下异常：

```
Exception during request processing:
Caused by javax.servlet.ServletException with message: "Servlet execution threw an exception" 
java.lang.NoSuchMethodError: org.richfaces.component.UIColumn.getFilterMethod()Ljavax/el/MethodExpression; 
```

本地和远程 Jboss 版本相同：4.2.3.GA，我使用 Seam（两台服务器上的版本相同）2.2.2.Final 和 Richfaces 3.3.3.Final 与 JSF 1.2，文件相同，我确定是因为我将它们复制到了远程服务器，唯一的区别是操作系统，我的本地服务器运行的是 Windows Server 2003 R2 32 位，而远程服务器运行的是 Ubuntu Server 12.04 64 位。Ubuntu Server 和 Jboss 或任何其他这些工具是否存在任何已知问题？

更新：我在 Windows 服务器上使用 Oracle 的 jdk1.6.0_26，在 Ubuntu 服务器上使用 openjdk-7-jdk 7u7-2.3.2-1ubuntu0.12.04.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:47:42.967

将表达式语言“EL”升级到应与 JSF 1.2 结合使用的版本。这看起来是 EL 1.2，也许您可​​以从 JBoss AS5 安装档案中下载/提取它（因为它是 EE5 的一部分）。

或使用旧安装复制/比较文件。在 Linux 上`cmp file1.jar file2.jar`

[http://docs.oracle.com/javaee/5/api/javax/el/package-summary.html](http://docs.oracle.com/javaee/5/api/javax/el/package-summary.html)

这证实了该方法在随 EE5 标准集一起提供的 EL 1.2 中可用。

JBoss AS 4.x 不支持 EE5。所以你必须手动升级它（在旧安装中），它通常与 JSF 一起升级。

以前的 JavaEE 中没有 EL，但之前的 Servlet Spec 2.3 中有 EL（如此处所示）[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:28:05.997

看起来`getFilterMethod()`UIColumn 类中缺少该方法，因此这可能是 RichFaces jar 的问题。有关如何检查 RichFaces 版本是否在两个部署中都是正确的版本，请参阅[此页面。](http://mkblog.exadel.com/2010/03/getting-richfaces-version-in-runtime/)无论如何，请使用其他人提到的命令来查找 RichFaces jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:54:59.427

我在 WEB-INF/lib 找到了两个 jar，来自我正在使用的 Richfaces 的不同版本（4.0）（3.3.3），通过删除它们并重新启动服务器解决了问题。

# c# - 反向 C# 锯齿状数组类型声明

> ID：12532591
> 
> 赞同：7
> 
> 时间：2012-09-21T14:31:54.657
> 
> 标签：c#, multidimensional-array, jagged-arrays

我刚刚经历了其中一个“什么……”的时刻。以下是有意的，C# 中数组的“非自然”声明背后是否有一些晦涩的推理？

```
int[,][] i; // declares an 2D - array where each element is an int[] !
// you have to use it like this:
i = new int[2,3][];
i[1,2] = new int[0]; 
```

我本来期望相反。int[,][] 声明一个一维数组，其中每个元素都是一个二维数组。

有趣的是，类型的名称是相反的：

```
Console.WriteLine(typeof(int[,][]).Name); // prints "Int32[][,]" 
```

有人可以解释一下吗？这是故意的吗？（在 Windows 下使用 .NET 4.5。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:14:30.660

[您可以在 Eric Lippert 的博客Arrays of arrays](http://blogs.msdn.com/b/ericlippert/archive/2009/08/17/arrays-of-arrays.aspx)中找到冗长的讨论。

> C# 实际上做了什么
> 
> 一团糟。无论我们选择哪个选项，最终都会与我们的直觉不符。这是我们在 C# 中实际选择的内容。
> 
> 首先：选项二[这是一个二维数组，每个元素都是一个一维整数数组]是正确的。我们强迫你忍受后果一所带来的怪异；您实际上并没有通过附加数组说明符将元素类型转换为该类型的数组。您可以通过将说明符添加到现有数组说明符列表中来使其成为数组类型。疯狂但真实。

“前置”一词部分解释了您输出的反向类型名称。CLR 类型名称不一定与 C# 声明相同。

但更相关的报价在底部：

> 话虽如此，**多维参差不齐的数组几乎肯定是一种不好的代码气味。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T23:34:20.893

我第一次看到时有相同的“什么...”时刻，`new int[5][];`而不是`new int[][5];`。

EL's (very nice) blog post is dancing around one thing: there's a perfect way to do it *for people with a ComSci degree*, but no good way to do it for others. If you just follow the grammar, you declare right-to-left, `new` right-to-left and index left-to-right:

```
// 1D array of 2D arrays, no special rules needed:
int[,][] N; N=new[,][5]; N[0]=new int[4,4]; 
```

But C#'s target audience isn't people with 4-year CS degrees (who have all seen Reverse Polish and love right-to-left.) The trick, IMHO, in understanding C# jagged arrays is that they decided to make special rules for them, when they didn't technically need to.

# mysql - Mysql时间戳：输出UTC时间而不是本地服务器时间？

> ID：12532594
> 
> 赞同：1
> 
> 时间：2012-09-21T14:32:13.733
> 
> 标签：mysql, timezone, timestamp

我正在创建必须根据用户当地时间显示时间的软件。用户可以来自世界各地。

根据我一直在阅读的内容，Mysql 以 UTC 存储时间戳，然后将其转换为服务器时区。

无论如何我可以输出原始UTC时间的时间戳，而不是让它自动转换为服务器的本地时间？

我想这样做而不必弄乱mysql的时区设置，因为我的软件将在共享主机中使用，我不知道我是否可以控制这些设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:35:18.103

看

[https://stackoverflow.com/a/12290486/110933](https://stackoverflow.com/a/12290486/110933)

```
SELECT UNIX_TIMESTAMP(<your_datetime_col>)... 
```

# sql - 连接三表 SQL

> ID：12532604
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:32:59.497
> 
> 标签：sql

您好，我正在尝试从表中检索值，但在形成正确的 SQL 语句时遇到问题。这就是我所拥有的。

```
 $qry_display = "SELECT a.section_id, b.section_id,b.student_id,c.* 
                   FROM tbl_section AS a 
                   LEFT OUTER JOIN tbl_er AS b On a.section_id = b.section_id
                   LEFT OUTER JOIN tbl_enroll AS c On b.student_id = c.student_id
                  WHERE b.student_id=c.student_id
                    AND a.bname='$branch'"; 
```

这是我的数据库结构。

tbl_section：

```
section_id    section_name    sy    adviser_id    level 
```

tbl_er：

```
student_id    section_id 
```

tbl_enroll

```
student_id    fname    lname 
```

我在形成正确的 sql 语句时遇到问题，将不胜感激有关如何正确执行此操作的任何帮助。我想要的是显示给定部分下的所有学生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:37:41.920

`bname`属于哪个表？变成. `bname`_ `sectionname`试试这个，

```
SELECT  c.*
FROM    tbl_section a
        INNER JOIN tbl_er b
            on a.section_ID = b.section_ID
        INNER JOIN tbl_enroll c
            ON b.student_ID = c.student_ID
WHERE   a.sectionname = 'sectionNameHere' 
```

# eclipse - IDEA intellij 字符支持

> ID：12532607
> 
> 赞同：5
> 
> 时间：2012-09-21T14:33:07.107
> 
> 标签：eclipse, fonts, github, intellij-idea

有没有办法改变 IntelliJ 中的字符支持？

在使用 IntelliJ/Eclipse/github 之间，我在一些引起烦恼的文本行中使用了项目符号。

Eclipse 很好地显示了项目符号，github 也是如此，但是当我将文件拉到 intelliJ 环境中时，项目符号被替换为未知符号。

• => �</p>

现在，当我将 github 的 Web 查看器中的子弹标记复制到文件中时，它的外观、工作和编译都很好。提交到 github 后，项目符号然后更改为另一组字符，然后让我不得不再次修复它。

• => ?</p>

关于如何避免在环境之间切换时必须始终解决此问题的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:55:28.767

确保文件具有正确的编码，并且[IDE 已配置](http://www.jetbrains.com/idea/webhelp/file-encodings.html)为以所需编码创建新文件。

IntelliJ IDEA 不提供在不同编码之间进行无缝转换的方法，因此如果您的文件已经有错误的编码，则需要在其他工具中进行转换。

# regex - 如何为 data-dojo-props 中的验证文本框设置不区分大小写的正则表达式

> ID：12532611
> 
> 赞同：1
> 
> 时间：2012-09-21T14:33:16.927
> 
> 标签：regex, dojo

我正在为我的一个表单使用 dijit 验证文本框，并且需要设置一个允许“n/a”值或 URL 的正则表达式。我有正则表达式工作，但它不接受大写值。有谁知道你怎么能通过 data-dojo-props 做到这一点，或者我需要添加一个自定义验证器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:02:05.103

尝试过类似的事情？

```
new ValidationTextBox({
    regExp: new RegExp("[a-zA-Z]*") // short form: /[a-zA-Z]*/
}); 
```

无论哪种情况，它都会接受 a 到 z 的任何字母。

作为标记属性，它看起来像这样：

```
<div 
  data-dojo-type="dijit/form/ValidationTextBox" 
  data-dojo-props="regExp: /[a-zA-Z]*/, invalidMessage: 'Failed to validate'"
></div> 
```

# sql - 在 sql server 中添加定期员工假期

> ID：12532616
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:33:24.650
> 
> 标签：sql, sql-server-2008-r2, datediff, dateadd, recurring-events

我目前在 SQL Server 中有这个表：

PL_ID User_ID Log_Date Out_Time In_Time 原因详情

PL 代表人员记录器...然后您有用户 ID、日志日期（休息日）、外出时间、及时、原因和详细信息...有一个 ASP 前端允许用户添加他们的日期进入由其他人编写的表格...目前用户能够自己执行此操作不是问题但是，我被赋予了为下一年增加员工休假日的任务...他们正在重复休息日（每周一下午 1 点至下午 3 点）或（每周四 2 点至 5 点）......必须有一种更简单的方法来做到这一点，而不是一次只增加一天的休息时间。我已经尝试过使用 dateadd 进行试验，但我无法弄清楚将其包含在插入中的语法......有一天我计划将其添加到用户页面，但现在我只需要让他们的休息日进入表格！

提前谢谢你们，

汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:11:16.767

如果您有一个主日期表，您可以简单地查询该表以获取明年的星期一和星期四，并且可以使用 Insert Select ... 语法。

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
SET @StartDate = '1/1/2013'
SET @EndDate = '12/31/2013'

INSERT INTO DestinationTable(Date,StartTime,EndTime)
SELECT DM.Date,
       CASE WHEN DATENAME(dw,DM.Date) = 'Thursday' THEN '1400'
            WHEN DATENAME(dw,DM.Date) = 'Monday' THEN '1300'
        END AS StartTime,
        CASE WHEN DATENAME(dw,DM.Date) = 'Thursday' THEN '1700'
            WHEN DATENAME(dw,DM.Date) = 'Monday' THEN '1500'
        END AS EndTime     
  FROM DateMaster DM
 WHERE DM.Date Between @StartDate AND @EndDate
   AND DATENAME(dw,DM.Date) IN ('Thursday','Monday') 
```

但是，如果您没有主日期表，那么我们可以循环整年并填写表格。

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
DECLARE @DateVar DateTime

SET @StartDate = '1/1/2013'
SET @EndDate = '12/31/2013'
SET @DateVar = @StartDate

WHILE @DateVar <= @EndDate
BEGIN 
     INSERT INTO DestinationTable(Date,StartTime,EndTime)
     SELECT @DateVar,
            CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN '1400'
                 WHEN DATENAME(dw,@DateVar) = 'Monday' THEN '1300'
             END AS StartTime,
            CASE WHEN DATENAME(dw,@DateVar) = 'Thursday' THEN '1700'
                 WHEN DATENAME(dw,@DateVar) = 'Monday' THEN '1500'
             END AS EndTime      
      WHERE DATENAME(dw,@DateVar) IN ('Thursday','Monday')

     SET @DateVar = DATEADD(d,1,@DateVar)
 END 
```

您可以通过跳其他日子而不是仅仅增加一天来提高效率......

CTE

```
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
SET @StartDate = '1/1/2013'
SET @EndDate = '12/31/2013'

;WITH DateMaster(Date)
AS
(
    SELECT @StartDate
     UNION ALL
    SELECT DATEADD(d,1,Date)
      FROM DateMaster
     WHERE DATEADD(d,1,Date) <= @EndDate 
    )

INSERT INTO DestinationTable(Date,StartTime,EndTime)
SELECT DM.Date,
       CASE WHEN DATENAME(dw,DM.Date) = 'Thursday' THEN '1400'
            WHEN DATENAME(dw,DM.Date) = 'Monday' THEN '1300'
        END AS StartTime,
        CASE WHEN DATENAME(dw,DM.Date) = 'Thursday' THEN '1700'
            WHEN DATENAME(dw,DM.Date) = 'Monday' THEN '1500'
        END AS EndTime     
  FROM DateMaster DM
 WHERE DM.Date >= @StartDate AND DM.Date <= @EndDate
   AND DATENAME(dw,DM.Date) IN ('Thursday','Monday')
OPTION (MAXRECURSION 366) 
```

# ios - 禁用时按钮仍然可见

> ID：12532617
> 
> 赞同：0
> 
> 时间：2012-09-21T14:33:26.390
> 
> 标签：ios, uibutton

我在 IB 中创建了一个自定义按钮，它为我执行播放视频功能。但有时当视频不可用时，我想让按钮禁用和不可见。

该按钮通过拖动 IBOutlet 链接到代码。

所以当我这样做时，`[playButton setEnabled:NO]`它会被禁用，但它仍然可见，尽管变得透明。我需要它完全消失。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:34:40.773

设置`playButton.hidden = YES`为隐藏它。
禁用只会阻止用户交互

# c# - 从部分 SHA1 总和计算文件的 SHA1 总和

> ID：12532618
> 
> 赞同：0
> 
> 时间：2012-09-21T14:33:30.487
> 
> 标签：c#, sha1

我有一个大文件的部分总和，例如，每 50MB，总共有 5 个总和。

我想知道我是否可以从 5 个总和中恢复整个哈希和，即文件的 SHA1sum。可能吗？如果是这样，怎么做？如果不是，为什么不呢？

我正在尝试编写可以在 C# 中执行此操作的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:35:37.873

不，这是不可能的。

原因是可能会发生碰撞。不能保证两条不同的数据总是会给出不同的 SHA-1 哈希值。这是极不可能的。

这意味着用于生成哈希的数据是不确定的，因此您永远无法确定它是什么，因此永远无法重建您的原始数据。您需要这样做才能对其进行哈希处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T20:10:32.567

虽然无法从部分**总和**计算文件的 SHA-1 ，但您**可以**增量计算文件的 SHA-1。[请参阅此问题](https://stackoverflow.com/questions/13982546/incremental-hashing-in-winrt-metro)的答案。

# html - 在 HTML 中预加载大型画廊/滑块图像

> ID：12532619
> 
> 赞同：0
> 
> 时间：2012-09-21T14:33:54.530
> 
> 标签：html, image, slider, gallery, preload

我在投资组合页面中有大而宽的图像。图像以“渐进式”保存，并且加载良好。

我想知道是否有一种方法可以预加载这些图像以使它们看起来更快更流畅。或者也许有一种方法可以将所有其他页面和图像预加载到缓存中，以便至少在第一个页面之后的所有后续页面都显得流畅和快速？任何有助于使页面加载更快、更流畅的方法。

有什么建议么？

每张图片由多种图片组成，所有图片都在一张宽幅图片中（以 PSD 格式制作），访问者可以左右移动以调用相应的图片出现在中心。不幸的是，牺牲图像质量或使它们更小不是这里的选择。

我知道这里有关于预加载图像广告内容的帖子，但我找不到任何适用于嵌入在 HTML 代码中的图像的帖子。

拜托了，我是 CSS 和 Javascript 的新手，所以越简单我就越有可能理解它。我担心在单个实例中分解图像（使其成为一排图像而不是整个图像），将它们放在浮动 div 中并更改相应的 Javascript 代码对我来说可能太具有挑战性了，对吧...？我还能怎么做？

赞赏！

这就是我所拥有的（我想在这里发布我所有的 HTML、Javascript 和 CSS 有点过头了，我会发布一些）。大图像放置在 HTML 页面中并通过 Javascript 调用。

[看这里](http://raphaelzwyer.com/testRapha/portfolio_bmw.html)

```
<div class="ShiftGroup">
        <div class="ShiftGroupC">
        <div class="ShiftGroupI"><div id="ShiftGalleryFive"><img src="images/gallery_anzic1.png" width="3348" height="372" alt="imagegallery1" /></div></div>
        <div class="ShiftGroupP" style="margin-left: -990px;"><div id="ShiftLeft" class="ShiftGroupD"><span class="pointer"><img src="images/arrowleft.png" width="78" height="50" alt="arrowsleft" /></span></div></div>
        <div class="ShiftGroupP" style="margin-left: 341px;"><div id="ShiftRight" class="ShiftGroupD"><span class="pointer"><img src="images/arrowright.png" width="78" height="50" alt="arrowright" /></span></div></div> 
```

和

```
gallery = document.getElementById('ShiftGalleryFour').style; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:12:12.240

这就是我们在其中一个项目中预加载图像的方式：

```
preloadImages = function(imageIndex) {

  // Finds div element containing index (1..n) and url of image 
  // (both stored as data attributes)
  var image = $(".data .image[data-index=" + imageIndex + "]");

  // Creates an image (just virtually) that is not embedded to HTML.
  // Its source is the url of the image that is to be preloaded
  var preloadedImage = $(new Image()).attr("src", image.attr("data-full-url"));

  // Bind an event to the "virtual" image to start preloading next image when 
  // this one is done
  preloadedImage.load(function() {

    // Start preloading the next one
    preloadImages(imageIndex + 1);
  });
}

// Start preloading the first image
preloadImages(1) 
```

在您的情况下，这只解决了问题的一部分 - 预加载。

我看到您将 html 中的所有图像都包含为`img`标签。如果您想获得更好的性能，请不要`img`在图库的 html 中放置任何标签。只是`div`将成为图像未来容器的标签。这些 div 可能具有索引并包含带有图像 url 的数据属性（如我的示例所示）。当您的页面被加载时，开始预加载过程。当加载“虚拟图像”时。在其容器内创建新的图像标签并开始预加载下一个图像。

这肯定会切断您页面的下载时间。

我的示例使用[jQuery](http://jquery.com)来简化脚本。纯javascript会更复杂。

**更新：**

这就是预加载示例的工作方式。

### HTML

假设您有 4 张图片，并且它们都有自己的容器 - 一个放置单个图片的 div。

```
<div class="images">
  <div class="image" data-index="1" data-src="image_1_source_path"></div>
  <div class="image" data-index="2" data-src="image_2_source_path"></div>
  <div class="image" data-index="3" data-src="image_3_source_path"></div>
  <div class="image" data-index="4" data-src="image_4_source_path"></div>
</div> 
```

### JavaScript

加载文件后，可能会开始预加载程序。首先预加载第一个图像。加载此图像后，将其附加到其容器并触发下一个图像的预加载。`return`如果加载了所有图像并且没有找到容器，也会调用。

```
preloadImages = function(imageIndex) {
  var imageContainer = $(".images .image[data-index=" + imageIndex + "]");
  return if imageContainer.length === 0
  var preloadedImage = $(new Image()).attr("src", image.attr("data-full-url"));
  preloadedImage.load(function() {
    imageContainer.append(preloadedImage);
    preloadImages(imageIndex + 1);
  });
}

$(document).ready(function(){
  preloadImages(1);
}); 
```

希望你明白这一点。

# jsf - primefaces数据表和xls导出中的不同标题

> ID：12532625
> 
> 赞同：0
> 
> 时间：2012-09-21T14:34:06.977
> 
> 标签：jsf, primefaces, apache-poi

我需要在数据表和导出的 excel 文件中有不同的文本标题。
我可以通过自定义`postProcessor`方法来做到这一点`p:dataexporter`。
他们是实现这一目标的另一种可能性吗？

# c# - 静态只读 Dictionary<> 匿名声明

> ID：12532626
> 
> 赞同：0
> 
> 时间：2012-09-21T14:34:11.363
> 
> 标签：c#, collections, properties, dictionary

我有一个具有静态属性的类。我希望这个类有一个静态的、只读的字典——我想匿名初始化它。我尝试了以下方法，但它不起作用：

```
 public static readonly Guid ID1 = new Guid("53ba029b-0850-4f51-a358-648411e30972");
    public static readonly Guid ID2 = new Guid("400a9861-21c3-45fd-bf75-95be8f535c58");

public static readonly Dictionary<Guid, String> IdsAndStrings = new Dictionary<Guid, string>(){
    {ID1, "string"},
    {ID2, "string 2"}
}; 
```

尝试初始化它时出现异常。内部异常甚至提到了对日期时间的错误转换！？不知道那里发生了什么。像这样实例化一个新的 Dictionary<> 是不可能的吗？我应该改用 Get Set 吗？

编辑：请假设所有 guid 和字符串都是有效的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:37:03.440

不，这并非不可能。使用集合初始化器，它看起来像这样：

```
Dictionary<Guid, string> idsAndStrings = new Dictionary<Guid, string>
{
    { Guid.NewGuid(), "" },
    { Guid.NewGuid(), "" },
}; 
```

Get/set 会将项目公开为可写属性，这在语义上与只读字段不同 - 在某些情况下会提供不同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:39:56.357

您现有的语法看起来是正确的，所以唯一可能有错误的部分是`Guid`or 字符串常量。

如果您尝试将 Guid 作为字符串传递，请显式使用适当的`Guid` [构造](http://msdn.microsoft.com/en-us/library/96ff78dc.aspx)函数：

```
{ new Guid("XXX-XXX"), "string" },
{ new Guid("YYY-YYY"), "string" }, 
```

# arrays - 关于Z3中的阵列理论

> ID：12532627
> 
> 赞同：2
> 
> 时间：2012-09-21T14:34:14.540
> 
> 标签：arrays, z3

我想知道，如果我能让 Z3“记住”数组的更新。

例如，以下输入是可满足的：

```
(declare-const x Int)
(declare-const a1 (Array Int Int))
(assert  (= (select (store a1 x 2) x) 2))
(assert (not (= (select a1 x) 2)))
(check-sat) 
```

第一个断言中的“存储”不影响第二个断言。我可以对阵列进行存储操作，从而导致阵列发生永久变化吗？我的意思是，如果我在数组上使用存储，那么数组将永远更改。例如，如果在我使用 '(store a1 x 2)' 之后，每次 (select a1 x) 都等于 2。有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:12:29.780

表达式`(= (select (store a1 x 2) x) 2)`等价于`true`。这是一个空洞的断言，因为数组理论公理之一是`forall a,i,v: select(store(a,i,v), i) = v`。因此，这个表达式只是公理（在 Z3 中内置）的一个实例，因此它是多余的。

也许，您打算断言`(assert (= (select a1 x) 2))`. 这个断言说数组在位置的值`x`是`2`。也就是说，Z3 生成的任何解都必须分配`2`给数组的这个位置`a1`。

请注意，在 Z3 中没有断言的“之前”和“之后”的概念或副作用。例如，表达式`a = a + 1`等价`false`于 Z3。用于将编程语言赋值编码到 Z3 中的一种常用技术为每个程序变量使用多个变量。每个“程序位置”一个变量。例如，代码块`a = a + 1; b = 2*a; a = b + 1`被编码为`a_1 = a_0 + 1 and b_1 = 2*a_0 and a_2 = b_1 + 1`. 以下文章包含更多示例/详细信息：[http ://dl.acm.org/citation.cfm?id=1995394](http://dl.acm.org/citation.cfm?id=1995394)

如果您打算对程序中使用的数组更新进行编码，则应该有一个数组`a1`表示更新前的数组，一个数组`a2`表示更新后的数组。也就是说，我们写：`(assert (= a2 (store a1 x 2)))`，并将最后一个断言替换为 (assert`(not (= (select a2 x) 2)))`

# c# - 谷歌翻译 C#

> ID：12532629
> 
> 赞同：10
> 
> 时间：2012-09-21T14:34:30.003
> 
> 标签：c#, .net, google-translate

我正在开发一个自然语言处理程序，我正在尝试实现谷歌翻译。在寻找在 Assembly 中实现 Google 翻译的方法时，我遇到了以下代码段：

```
public static string Translate(string input, string languagePair, Encoding encoding)
{
    string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text=       {0}&langpair={1}", input, languagePair);
    string result = String.Empty;

    using (WebClient webClient = new WebClient())
    {
        webClient.Encoding = encoding;
        result = webClient.DownloadString(url);
    }

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(result);
    return doc.DocumentNode.SelectSingleNode("//textarea[@name='utrans']").InnerText;
} 
```

我对C#比较陌生，主要使用Java，对隐式参数不清楚

```
public static string Translate(string input, string languagePair, Encoding encoding) 
```

当我查看编码器的 C# API 时，有一些关于如何使用编码类的示例：（链接： http: [//msdn.microsoft.com/en-us/library/h5y3703w(v=vs.71)。 .aspx](http://msdn.microsoft.com/en-us/library/h5y3703w(v=vs.71).aspx) )

```
Byte[] thirdcharNoFlush = new Byte[encoder.GetByteCount(chars, 2, 1, bFlushState)];
    encoder.GetBytes(chars, 2, 1, thirdcharNoFlush, 0, bFlushState); 
```

我应该在我的参数中输入什么才能使用 Google 翻译将短语（例如“你好吗？”）翻译成西班牙语。对此事的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:37:08.900

这应该有效：

```
var result = Translate("How are you?", "es|en", Encoding.UTF8); 
```

# python - 用于快速、无缝循环许多短音轨的 Python 音频库

> ID：12532631
> 
> 赞同：4
> 
> 时间：2012-09-21T14:34:39.297
> 
> 标签：python, audio, loops, playback

我正在编写一个应用程序来模拟火车声音。对于火车的每种速度，我都得到了非常短（0.2s）的音频样本，我需要能够**同时循环播放多达 20 个**（每辆火车一个）**而没有间隙**。音频样本（火车速度）的无缝变化也是必须的。我一直在寻找可能的 python-audio-solutions，包括

*   PyAudio
*   PyMedia
*   pyaudiere

但我不确定哪一个最适合我的用例，所以我非常感谢任何建议和经验！

PS：我确实已经尝试过**gstreamer**，但由于 1.0 版本还没有发布，我不知道如何让无缝播放与 pygi 一起工作，我认为可能有更好的选择。我也试过**pygame**，但它似乎仅限于 8 个音频通道？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T17:31:28.860

我在很多事情上都使用 PyAudio，并且对此非常满意。如果它可以做到这一点，我不知道，但我认为它可以。

一种解决方案是手动输入声音缓冲区并控制/设置所需的延迟。我已经这样做了，而且效果很好。如果您的延迟足够高，它将起作用。

与此类似的另一个解决方案是管理您自己的延迟。您可以手动排队和/或混合您的小声音文件，例如 0.5 -1 秒的大小。这将大大降低对“实时性”的要求，并允许您在“速度”之间进行一些非常酷的转换

我不知道你能应付什么样的延迟，但如果我们谈论的是火车速度，我猜它们不会瞬间改变——因此 500 毫秒到几秒的延迟很可能是可以接受的。

# dynamics-ax-2009 - Dynamics AX (2012) 上的 XGantt ActiveX 问题

> ID：12532633
> 
> 赞同：0
> 
> 时间：2012-09-21T14:34:41.430
> 
> 标签：dynamics-ax-2009, axapta, gantt-chart, dynamics-ax-2012

我在使用 Nettronic XGantt ActiveX 时遇到了一些问题。我的问题是我在表单中的 ActiveX 似乎没有找到我在配置面板中指定的表。由于我是新手（我没有 10 分），因此我无法在此处发布屏幕截图，所以这是它的链接。[配置面板屏幕截图](http://imageshack.us/photo/my-images/811/xganttconfig.png/) 我尝试使用存储节点信息的 CSV 文件，效果很好。

*   名称 SAG_GANTT_SOURCE_MODEL 使用是否正确？知道我已经用这个名称和屏幕截图中的那些字段创建了一个表。
*   我还需要考虑其他配置元素吗？

我可以按照一些 Dynamics AX 项目（甘特图）使用的类做我想做的事，但在我看来，实现一个简单的组件的工作量太大了，不是吗？因为我找不到任何文档/文章/教程来正确使用 XGantt ActiveX（除了我已经看到的这个[http://community.dynamics.com/product/ax/axtechnical/b/axfortechies/archive/2010/ 05/28/activex-gantt-chart-control-in-dynamics-ax.aspx](http://community.dynamics.com/product/ax/axtechnical/b/axfortechies/archive/2010/05/28/activex-gantt-chart-control-in-dynamics-ax.aspx) ) 我想知道您是否有任何文档、链接或联系人可以帮助我解决我的问题。感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:36:11.243

你试过Netronic吗？我认为他们可以生成一个您可以导入的许可证文件，这将启用控件的 disgner。此外，他们的网站上可能还有一些 pdf 文件。

# php - xinha 编辑器启用 GetHtml

> ID：12532640
> 
> 赞同：1
> 
> 时间：2012-09-21T14:35:03.280
> 
> 标签：php, editor, add, edit

有谁知道如何在 xinha 编辑器中启用 GetHtml？

我试图实现这一点：

> > GetHtml 是 htmlarea.js 中 getHTML() 函数的替代品。它提供了对原始版本的多项改进，包括：
> 
> *   生成有效的 XHTML 代码
> *   以缩进、可读的格式格式化 HTML 视图中的代码。
> *   比 HTMLArea.getHTML() 快得多
> *   消除了许多黑客以适应浏览器的怪癖
> *   返回 Flash 对象和脚本的正确代码
> *   保留 script 和 pre 标记内的格式
> *   您可以通过将 xinha_config.getHtmlMethod 设置为“TransformInnerHTML”来启用此功能

但我不太了解，这是我的尝试：

```
var xinha_plugins =
[
 'GetHtml','ExtendedFileManager','Linker','InsertSmiley'
]; 
```

我只是将插件添加到上面的插件库中（就像我的代码一样），但是插件不起作用！我需要在xinha编辑器中插入flash。

# regex - 为独特的错误解析 Apache 错误日志

> ID：12532642
> 
> 赞同：2
> 
> 时间：2012-09-21T14:35:09.783
> 
> 标签：regex, linux, apache, parsing, logging

我有一些不守规矩的 apache 错误日志，我想对其进行解析并获得独特的错误。

`[Fri Sep 21 06:54:24 2012] [error] [client xxx.xxx.xxx.xxx ] PHP Fatal error: <error message>, referrer: <url>`

我想我只想在“PHP Fatal”部分删减行，丢弃前半部分并通过 uniq 运行后半部分。我的目标是找出所有的错误，但是由于有很多重复的错误，有太多的行需要手动查看。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:36:56.767

尝试`grep -o '\[error\].*$' file | sort | uniq`

这将仅显示与正则表达式匹配的内容（而不是包含匹配项的整行）。

然后 sort 将相似的条目彼此相邻，以便 uniq 可以确保没有重复项。

如果要在排序 / uniq'ing 之前删除客户端位，请使用 `grep -o '\[error\].*$' file | sed 's/\[client.*\?\]//' | sort | uniq`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T09:28:42.570

分析`/var/log/apache2/error.log`使用

```
sed 's^\[.*\]^^g' /var/log/apache2/error.log | sort | uniq -c | sort -n 
```

这将

1.  在每行的开头剪切日期，例如：

    [2012 年 8 月 28 日 11:20:24 UTC] PHP 通知：未定义索引：在线测试 /var/www/...

2.  计算唯一行

3.  按出现排序

> 来源：[strictcoder.blogspot.de](http://strictcoder.blogspot.de/2012/02/linux-count-unique-error-log-entries.html)

* * *

如果您创建新日志，您可以预先配置 php：

在 php.ini 中设置或添加到您的 php 脚本中[`ignore-repeated-errors`](http://php.net/manual/de/errorfunc.configuration.php#ini.ignore-repeated-errors)`= On``ini_set('ignore-repeated-errors', 1);`

这将阻止 php 多次记录错误，即由同一脚本中的同一行引起的错误消息。

> 来源：[php 错误日志，如何删除重复项/查找唯一错误](https://stackoverflow.com/a/12607878/1069083)

（但这确实有助于分析现有日志）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:07:14.957

使用 sed：

```
sed -r 's/(.*)(PHP Fatal error)/\2/' logfile | sort -u 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-10T08:59:20.650

正则表达式解析字符串可以是`ERROR.*`（在 regex101.com 上测试）

下面的命令将确保它搜索不区分大小写

```
grep -ori 'ERROR.*$' filename | sort | uniq 
```

# c# - 四边形相交算法

> ID：12532648
> 
> 赞同：2
> 
> 时间：2012-09-21T14:35:18.603
> 
> 标签：c#, rotation, intersection, opentk

我目前正在编写一个游戏（使用 OpenTK 的 2D），其中有很多旋转，随之而来的是我有时需要获得这些线条/形状之间的交集： [两个四边形 http://files.myopera.com /antonijn/albums/12693002/TwoQuadrangles.png](http://files.myopera.com/antonijn/albums/12693002/TwoQuadrangles.png)

我知道它们的旋转（以度为单位），因此我知道两种形状中所有顶点的位置。

该算法需要给我一个关于它们是否相交的布尔值，或者更好的是，交叉点的坐标。

我已经编写了自己的算法，它在第一个框的两侧滚动，获取每一侧的公式并将它们与第二个框的行的公式进行比较。现在，当线条是直立的（float.Infinity 或 float.NegativeInfinity 的斜率）时，这不起作用，调试起来很痛苦，而且速度也不快，所以我需要一个更好的！

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T13:09:32.263

根据 Nickon 的建议，我最终使用了 SAT 方法，感谢一群朋友！

# php - tar 文件保留完整路径。如何阻止它？

> ID：12532651
> 
> 赞同：2
> 
> 时间：2012-09-21T14:35:24.223
> 
> 标签：php, tar

我正在尝试通过 PHP 在我的服务器上创建一个 tar 存档，如下所示：

exec('tar -cvf myfile.tar tmp_folder/innerfolder/');

它工作正常，但保存的文件保留了完整路径，包括 tmp_folder/innerfolder/ 我正在为用户动态创建这些路径，因此用户在提取时拥有此路径有点不可用。我已经回顾了这个主题 -[如何在使用 TAR 归档时剥离路径](https://stackoverflow.com/questions/8043579/how-to-strip-path-while-archiving-with-tar)，但是在解释中，这个人没有给出一个例子，我不太明白该怎么做。

请用一个例子告诉我，如何以不保留存档中的“tmp_folder/innerfolder/”部分的方式将文件添加到 tar？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T14:39:59.710

使用 -C 选项来 tar：

```
tar -C tmp_folder/innerfolder -cvf myfile.tar . 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:39:25.450

你可以作弊。。

```
exec('cd /path/to/tmp_folder/ && tar -cvf /path/to/myfile.tar innerfolder/'); 
```

这将使您的用户在提取 tarball 时只提供内部文件夹

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-12T19:08:25.327

您可以使用 --transform

```
tar -cf files.tar --transform='s,/your/path/,,' /your/path/file1 /your/path/file2
tar -tf files.tar
file1
file2 
```

更多信息：[http ://www.gnu.org/software/tar/manual/html_section/transform.html](http://www.gnu.org/software/tar/manual/html_section/transform.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:45:48.337

```
tar czf ~/backup.tgz --directory=/path filetotar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T16:59:34.803

If you want to preserve the current directory name but not the full path to it, try something like this (executed from within the directory that you want to tar; assumes bash/zsh):

```
ORIGDIR=${PWD##*/}
tar -C `dirname $PWD` -cvf ../archive.tar $ORIGDIR 
```

Here's some detail; first:

```
ORIGDIR=${PWD##*/} 
```

.. stores the current directory name (i.e. the name of the directory you're in). Then, in the tar command:

```
-C `dirname $PWD` 
```

.. switches tar's "working directory" from the standard root ("/") to the parent of the folder you want to archive. Strangely the -C switch only affects the path for building the archive, but not the location the archive itself will be stored in. Hence you'll still have to prefix the archive name with "../", or else tar will place it within the folder you started the command in. Finally, $ORIGDIR is relative to the parent directory, and so it and its contents are archived recursively into the tar (but without the path leading to it).

# ruby-on-rails - 设计 - 多个用户的单一登录表单

> ID：12532659
> 
> 赞同：5
> 
> 时间：2012-09-21T14:36:03.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, warden

我有两个设计模型，用户和业务；我希望两者都能够使用单一登录表单登录。我正在使用主干 js，并且我有一个自定义视图，因此该视图不是问题。ajax 请求用于登录，它按预期适用于用户，但不适用于企业。

我搜索了谷歌并遇到了一些提到使用 STI 来解决这个问题的解决方案，但是该项目已经完成了很多，我现在无法做出这样的改变。我正在考虑覆盖 Devise 会话控制器，并且：

1.  检查给定的电子邮件地址是否为用户，然后使用 Warden 对用户进行身份验证。
2.  如果未找到使用该电子邮件的用户，则使用 Warden 对业务模型进行身份验证。

我不知道如何更改代码来实现上述功能，我不知道warden是如何工作的，我需要调整哪些参数来实现上述功能，需要调用哪些函数。谁能指出我正确的方向或提供一个我应该如何继续前进的例子。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T01:38:36.707

别担心，你没有被卡住。

我认为您最好的选择是覆盖 Devise 的会话控制器并更改会话的“新”和“创建”方法。

所以在你自己的“sessions_controller.rb”中，你会有这样的东西：

```
class SessionsController < Devise::SessionsController
  # GET /resource/sign_in
  def new
    resource = build_resource(nil, :unsafe => true)
    clean_up_passwords(resource)
    respond_with(resource, serialize_options(resource))
  end

  # POST /resource/sign_in
  def create
    resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)
  end
end 
```

在你的路线中，你会使用类似的东西（取决于你命名你的用户模型）：

```
devise_for :users, :controllers => {
    :sessions => 'sessions'
}

devise_for :businesses, :controllers => {
    :sessions => 'sessions'
} 
```

上面的会话控制器根本没有定制。我不知道你的代码，所以我真的无能为力。但基本步骤是：

1.  检查`auth_options`和`resource_name`变量以了解它们如何存储数据。
2.  `resource`如果在用户表中未找到，请添加条件逻辑以更改这些变量。

设计很棒，角色也很棒，但有时只有一个用户模型，甚至使用 STI，都没有意义。因为我在最近的一个项目中处理过这个问题，所以我很快就会就这个确切的问题写一篇更长的文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T23:32:38.570

我最近想出了这个完整的技巧来完成这项工作。我的建议是强烈考虑使用角色的单一用户模型，但这可行——至少在当前版本的 Devise 中是这样。

[https://gist.github.com/jeremyw/5319386](https://gist.github.com/jeremyw/5319386)

如果您像这样进行monkeypatch 或以其他方式覆盖默认行为，请确保您有一个好的测试套件，以防您想尝试升级 Devise。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T01:10:15.807

考虑仅使用 User 模型并使用[CanCan](https://github.com/ryanb/cancan)和[Rolify](https://github.com/EppO/rolify)来满足每种类型用户的独特需求。这可能意味着从您的一些代码重新开始，但从长远来看可能更容易维护。

不要只相信我的话。[这是一个相关的问题，回答很好。](https://stackoverflow.com/questions/5437948/using-devise-for-two-different-models-but-the-same-login-form)

# excel - 在另一张纸上按日期更新一张纸

> ID：12532660
> 
> 赞同：0
> 
> 时间：2012-09-21T14:36:14.683
> 
> 标签：excel, excel-formula, formula

如何通过在单独的工作表上输入引用数据列表的日期来更新一张工作表上的信息？

例如，Sheet1 有一个每周计划。Sheet2 有一个按日期列出的事件日志。我想简单地在 Sheet1 上输入一个日期（即周：2012 年 9 月 17 日），并让它用来自 sheet2 的相应事件更新其余的日程。（我使用的信息都是文本）

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:56:24.993

您可以使用 HLOOKUP （假设您的日期是用我的示例中的标题组织的）：

```
=HLOOKUP($H$1,$A$1:$E$21,ROW(),FALSE) 
```

![HLOOKUP 示例](../Images/82bb1fd975688ecd3eb04a8caaf0397b.png)

同样，正如我在评论中所说，答案取决于您的数据是如何组织的。但是您可能会使用某种 LOOKUP 功能。祝你好运。

# c++ - 如何触发数据成员的复制构造函数？

> ID：12532663
> 
> 赞同：1
> 
> 时间：2012-09-21T14:36:30.287
> 
> 标签：c++, oop, constructor, copy-constructor

我试过这个：

```
class cls1{
    public:
    cls1(){ cout << "cls1 constructor\n";}
    cls1 (cls1 & o){ cout << "cls1 copy constructor\n";}
};

class cls2{
public:
    cls2 () { cout << "cls2 constructor\n";}
    cls2 (cls2 & o){ cout << "cls2 copy constructor\n";}
};

class my_cls{ 
public: 
    cls1 o1;
    cls2 o2;
    my_cls(){ cout << "my_cls constructor\n";}
    my_cls(my_cls& o){ cout << "my_cls copy constructor\n";}    
};    

void f(my_cls o){}

int main(){
    my_cls p;
    f(p);
    return 0;
} 
```

但输出是：

```
cls1 constructor
cls2 constructor
my_cls constructor
cls1 constructor
cls2 constructor 
my_cls copy constructor 
```

我觉得这很令人困惑，因为有人告诉我，对于每个成员，复制构造函数调用该成员的复制构造函数，对预置类型执行 execpt，当逐位复制时。（我希望在 my_cls 的复制构造函数之前调用 cls1 和 cls2 的复制构造函数）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:37:52.177

您被告知的内容仅适用于编译器生成的复制构造函数。

如果要编写自己的复制构造函数，则需要将成员和基类的复制 c-tors 放在初始化列表中，否则将使用它们的默认 c-tors。

在您的示例中缺少`: o1(o.o1), o2(o.o2)`：

```
der (der & o)
: o1(o.o1)
, o2(o.o2)
{ cout << "my_cls copy constructor\n";} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:40:14.917

它就像一个常规构造函数的初始化列表

```
class my_cls{ 
public: 
    cls1 o1;
    cls2 o2;
    my_cls (){ cout << "my_cls constructor\n";}
    my_cls (my_cls & o) : o1(o.o1), o2(o.o2) { cout << "my_cls copy constructor\n";}    
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:40:55.543

实际上：

```
der (der & o){ cout << "my_cls copy constructor\n";} 
```

相当于

```
der (der & o):o1(),o2(){ cout << "my_cls copy constructor\n";} 
```

即您的复制构造函数调用您的类类型成员的默认构造函数。

为了让它表现得像预期的那样：

```
der (der & o):o1(o.o1),o2(o.o2){ cout << "my_cls copy constructor\n";} 
```

为了使其在语义上正确：

```
der (der const& o) 
```

# c# - 获取 PlaceHolder 中动态创建的文本框的值

> ID：12532665
> 
> 赞同：1
> 
> 时间：2012-09-21T14:36:39.933
> 
> 标签：c#, sql, stored-procedures, dynamically-generated

我在 c# 中动态创建了一个包含 2 列的表：第一列使用 SqlDataReader 从存储过程中获取其数据，第二列由文本框组成，与第一列一样长。最后，表格被放置在占位符中并显示在 UI 上。它背后的想法确实构建了一个表单，完成后，有一个按钮必须从每个文本框中获取值并将其保存在数据库的表中。

```
HtmlTableRow row;
HtmlTableCell cell;
HtmlTableCell celltf;
TextBox text;

protected void createTables(){
HtmlTable dataTable = new HtmlTable();
HtmlTableRow header = new HtmlTableRow();

    while (rdr.Read())
    {
        row = new HtmlTableRow();

        for (int j = 0; j < rdr.FieldCount; j++)
        {
            cell = new HtmlTableCell();
            cell.InnerText = (rdr.GetValue(j)).ToString();

            celltf = new HtmlTableCell();
            text = new TextBox();
            celltf.Controls.Add(text);

            row.Cells.Add(cell);
            row.Cells.Add(celltf);
        }
        dataTable.Rows.Add(row);
    }
    dataTable.DataBind();
} 
```

单击按钮时，从每个文本框中获取值的最佳方法是什么？因为 Button_clicked() 是一个单独的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:42:31.520

我不能保证这像： http: [//lukieb.blogspot.co.uk/2009/03/event-handlers-with-dynamic-controls.html](http://lukieb.blogspot.co.uk/2009/03/event-handlers-with-dynamic-controls.html)因为它略有不同，但如果你总是重新创建相同的page_load 中的控件数量，我认为当您回发到事件处理程序时，表单将正确设置它们的所有值。然后，您应该能够在桌子上进行一组简单的 foreach 调用。大概您的表是在 aspx 页面上声明的，或者以其他方式添加到页面控件中，而不仅仅是在本地创建？

# sparql - 使用 Jena 更新 VOS 6.1.6，而不通过调用 Sparql 端点加载到内存

> ID：12532669
> 
> 赞同：1
> 
> 时间：2012-09-21T14:36:48.990
> 
> 标签：sparql, jena, virtuoso

如果我从 SPARQL 端点运行`DELETE`/查询，则该操作有效。SPARQL 查询是`INSERT``UPDATE`

```
SELECT ALL
INSERT DATA  INTO <PERSONGRAPH>  { personURI rdf:type   foaf:Person } 
```

是否可以使用 Java 代码（`VirtuosoExecutionFactory`Jena`UPDATE`或 我想从代码中调用 SPARQL 端点来执行`UPDATE`操作。如果将图形的整个三元组加载到内存中的假设是错误的，请纠正我。下面的 Jena 代码可以工作，但是它将整个模型加载到内存中，这会导致机器在三元组大小增长到 50,000 以上时无法工作。

```
SELECT ALL
String queryString1 = " INSERT DATA  { personURI 
                rdf:type   foaf:Person } "; 

UpdateRequest request1 = UpdateFactory.create(queryString1);
         UpdateAction.execute(request1, personModel); 
```

我想通过调用`sparqlService`或使用来做同样的事情`createServiceRequest`，以避免将整个图形加载到内存中，类似于它对 SPARQL 端点的工作方式。

以下代码不会更新 Virtuoso 商店。

```
 SELECT ALL
    String queryString1 = " INSERT DATA  { personURI 
                    rdf:type  foaf:Person } ";

    com.hp.hpl.jenafix.query.Query query1 = com.hp.hpl.jenafix.query.QueryFactory.create(queryString1);
             com.hp.hpl.jenafix.query.QueryExecution qexec1 = com.hp.hpl.jenafix.query.QueryExecutionFactory.sparqlService("http://IP:8890/sparql", query1); 
```

我试过使用`VirtuosoQueryExecutionFactory.sparqlService`,`QueryExecutionFactory.createServiceRequest`和`QueryExecutionFactory.sparqlService`. 这些适用于`SELECT`但不适用于`UPDATE`. 请让我知道如何通过从 Java 代码调用 SPARQL 端点来进行更新。任何建议，提示都非常感谢。

*对于新的 StackOverflow 用户，有 2 个 URL 的限制。可悲`personUri`的是一个 URL，由于限制无法提及。我在`personUri`这里提到完整性。`personUri`是[http://onmobile.com/umdb/person/juhi_chawla_268e7a02-8737-464f-97f8-172961d3335b](http://onmobile.com/umdb/person/juhi_chawla_268e7a02-8737-464f-97f8-172961d3335b)*

根据 Andy 的反馈，尝试使用`UpdateExecutionFactory`和 Http Client 的建议。

在尝试使用`UpdateExecutionFactory`和 Http Client 时，在执行时遇到`Connection refused`问题，但在执行`UPDATE`时却没有`SELECT`。代理主机和端口已设置。

感谢您的评论。该`INSERT`语法适用于正在使用的商店[Virtuoso Open Source 。](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VOSIndex)我在使用`UpdateExecutionFactory`. 我尝试了以下

```
String queryString =  "DELETE DATA FROM <PERSONGRAPH> {  <"
                    + personURI
                    + "> rdf:type   foaf:Person } ";
            com.hp.hpl.jena.update.UpdateRequest request = com.hp.hpl.jena.update.UpdateFactory.create(queryString);
            UpdateProcessor proc = UpdateExecutionFactory.createRemote(request, "http://IP:8890/sparql");
proc.execute(); 
```

并得到以下错误堆栈跟踪

```
org.apache.http.conn.HttpHostConnectException：连接到 IP：8890 被拒绝
    在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
    在 org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    在 org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    在 org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    在 org.apache.http.impl.client.DefaultRequestDirector.execute（DefaultRequestDirector.java:425）
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
    在 org.openjena.riot.web.HttpOp.execHttpPost(HttpOp.java:208)
    在 org.openjena.riot.web.HttpOp.execHttpPost(HttpOp.java:154)
    在 org.openjena.riot.web.HttpOp.execHttpPost(HttpOp.java:128)
    在 com.hp.hpl.jena.sparql.modify.UpdateProcessRemote.execute（UpdateProcessRemote.java:60）

```

Virtuoso 是否有可能有不同的 URL 端点进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:08:01.780

更新不是 SPARQL 中的查询。

利用

```
UpdateExecutionFactory 
```

要将数据流式传输到服务器，只需打开一个内容类型为 的 HTTP POST 连接`application/sparql-update`，然后将更新（包含大数据）写入流中。

顺便提一句：

```
INSERT DATA  INTO <PERSONGRAPH> 
```

不是合法的 SPARQL 更新语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:46:45.880

我不确定我是否遵循您的问题。目前尚不清楚在 AndyS 的回应之后添加了什么，以及从什么开始。如果你还没有解决这个问题，他关于你的语法错误的注释可能值得更多研究——如果你已经解决了，那么共享该解决方案的更新将是一个好主意。

我还建议查看有关[Jena 与 Virtuoso 连接](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtJenaProvider)的文档。

同样值得注意的是——特别是关于 Virtuoso 的问题通常最好在[公共 OpenLink 论坛](http://boards.openlinksw.com/support/)、[Virtuoso 用户邮件列表](http://sourceforge.net/mailarchive/forum.php?forum_name=virtuoso-users)或通过[机密支持案例](http://support.openlinksw.com/support/online-support.vsp)中提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T14:09:33.837

您可以使用以下代码直接在服务器端更新数据，而无需加载到本地客户端内存。

```
 public static void main(String[] args) {

            String url;
            if(args.length == 0)
               url = "jdbc:virtuoso://localhost:1111";
            else
               url = args[0];

            VirtGraph set = new VirtGraph (url, "dba", "dba");

            String str = "CLEAR GRAPH <http://test1>";
            VirtuosoUpdateRequest vur = VirtuosoUpdateFactory.create(str, set);
            vur.exec();                  

            str = "INSERT INTO GRAPH <http://test1> { <http://aa> <http://bb> 'cc' . <http://aa1> <http://bb> 123 . <http://aa1> <http://bb> 124 . <http://aa1> <http://bb> 125 .  }";
            vur = VirtuosoUpdateFactory.create(str, set);
            vur.exec(); 
```

查看[Virtuoso Jena Provider 示例](https://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VirtJenaProvider)中的[VirtuosoSPARQLExample8.java](https://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtJenaSPARQLExample8)和[VirtuosoSPARQLExample9.java](https://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtJenaSPARQLExample9)。

# python - 递归字典列表等的字典等（python）

> ID：12532670
> 
> 赞同：0
> 
> 时间：2012-09-21T14:36:54.793
> 
> 标签：python, parsing, sorting, recursion

我有一个从 yaml 配置文件返回的字典，它有 4 个级别：

项目、部分、字段、元素

```
{
    "tag": "test", 
    "sections": [
        {
            "info": "This is section ONE", 
            "tag": "s1"
        }, 
        {
            "info": "This is section TWO", 
            "fields": [
                {
                    "info": "This is field ONE", 
                    "tag": "f1"
                }, 
                {
                    "info": "This is field TWO", 
                    "tag": "f2", 
                    "elements": [
                        {
                            "info": "This is element", 
                            "tag": "e1", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element", 
                            "tag": "e2", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element", 
                            "tag": "e3", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element", 
                            "tag": "e4", 
                            "type_of": "text_field"
                        }
                    ]
                }, 
                {
                    "info": "This is field THREE", 
                    "tag": "f3", 
                    "elements": [
                        {
                            "info": "This is element", 
                            "tag": "e5", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element", 
                            "tag": "e6", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element", 
                            "tag": "e7", 
                            "type_of": "text_field"
                        }, 
                        {
                            "info": "This is element ONE", 
                            "tag": "e8", 
                            "type_of": "text_field"
                        }
                    ]
                }
            ], 
            "tag": "s2"
        }, 
        {
            "info": "This is section THREE", 
            "fields": [
                {
                    "info": "This is field FOUR", 
                    "tag": "f4"
                }, 
                {
                    "info": "This is field FIVE", 
                    "tag": "f5"
                }, 
                {
                    "info": "This is field SIX", 
                    "tag": "f6"
                }
            ], 
            "tag": "s3"
        }
    ],
    "type_of": "custom"
} 
```

```
class T():

    def __init__(self):
        self.sections = []
        self.fields = []
        self.elements = []

def rt(y):
    t = T()

    def recurse(y):
        for k,v in y.iteritems(): 
            if isinstance(v, list):
                getattr(t, k).append(v)
                [recurse(i) for i in v]
            else:
                setattr(t, k, v)
    recurse(y)
    return t 
```

所以我需要递归一个包含字典列表的字典列表等。al.，将它们分类为它们的类型（然后添加对其所属片段的引用，但一次一个问题。）并放入 T 的实例中。

这可行，但不会删除任何内容，即捕获每个部分，但捕获所有其余部分（字段、元素）。这可能是comp sci 101，但我主要是在自学，所以这是我需要学习的某种排序算法。任何关于改进这一点的意见表示赞赏。

编辑：事实证明这比我预期的更深入，并且抽象地更多的是学习如何遍历任意数据结构并挑选出我想要或需要的东西的机会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:55:52.693

试试这个，假设你想再次`sections`成为实例的元素。`T`

```
def rt(y, levels=1):
    t = T()
    for (k, v) in y.iteritems(): 
        if isinstance(v, list):
            if levels > 0:
                v = [rt(i, levels-1) if isinstance(i, dict) else i for i in v]
                setattr(t, k, v)
        else:
            setattr(t, k, v)
    return t 
```

（编辑以考虑非字典元素列表，并在一定数量的“级别”后停止迭代）

这会将嵌套字典转换为 的嵌套实例的层次结构`T`，并为字典中的每个项目创建属性。使用该`level`参数，您可以调整递归的“深度”：只要`level==0`只包含原子属性。

或者，如果您希望 的元素`t.sections`代替`dicts`的更多实例`T`：

```
def rt(y):
    t = T()
    for (k, v) in y.iteritems(): 
        if isinstance(v, list):
            # remove list elements from dicts in list
            v = [dict((k1, v1) for (k1, v1) in i.iteritems() if not isinstance(v1, list)) 
                 if isinstance(i, dict) else i for i in v]
        setattr(t, k, v)
    return t 
```

如果这仍然不是您的想法，请提供一个具体示例，说明`T`某些字典的实例应该如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:41:20.123

我想出的解决方案：

```
class Tree:
    def __init__(self, node, cargo, parent=None):
        self.node = node
        self.cargo = cargo
        self.parent  = parent
    def __str__(self):
        return str(self.cargo)

from copy import copy
def just_part(y):
    z = copy(y)
    for k,v in z.items():
        if isinstance(v, list):
            del z[k]
    return z

def rt(y):
    tt = []
    s = Tree( id(y), just_part(y) )
    tt.append(s)
    def recurse(y):
        for k,v in y.iteritems(): 
            if isinstance(v, list):
                [tt.append( Tree(id(i), just_part(i), id(y) ) ) for i in v]
                [recurse(i) for i in v]
            else:
                pass
    recurse(y)
    return tt 
```

我只是运行 rt（我的嵌套字典），这会返回一个节点列表，到目前为止，这似乎足以作为我正在做的事情的开始，而且我知道它可以以更有效的方式完成。也有这个：[http](http://code.activestate.com/recipes/577982-recursively-walk-python-objects/) ://code.activestate.com/recipes/577982-recursively-walk-python-objects/ ，但它并没有解决所有问题，而我自己的解决方案可能不是目前最pythonic的作品。

# url - 从带有 iOS6 的网页调用地图获取路线

> ID：12532677
> 
> 赞同：1
> 
> 时间：2012-09-21T14:37:31.290
> 
> 标签：url, navigation, ios6, ios6-maps

> **可能重复：**
> [当前位置不适用于 Apple Maps IOS 6](https://stackoverflow.com/questions/12539009/current-location-doesnt-work-with-apple-maps-ios-6)

*前言：*

鉴于：

如果您创建如下链接：

" [http://maps.apple.com/maps?saddr=here&daddr=](http://maps.apple.com/maps?saddr=here&daddr=) "+theUrlEncodedDestinationAddress

它将使用从您所在位置到给定目的地的“静态”路线打开本机地图应用程序，但无法让您开始实时导航到目的地。

如果您创建如下链接：

" [http://maps.apple.com/maps?q=](http://maps.apple.com/maps?q=) "+theUrlEncodedDestinationAddress

它将打开带有目的地标记的本地地图应用程序，然后轻按几下即可开始实时导航。

*实际问题：*

是否有 URL 语法来打开本机地图应用程序并**开始实时逐向导航**到目的地而无需提出任何问题？

我为此搜索了 Apple 文档，但找不到任何有用的东西。

注意：我知道可以在本机应用程序中启动导航，但我对此不感兴趣。我想从一个简单网页的 URL 开始。

谢谢！

# css - CSS 我不能转换边框样式吗？

> ID：12532678
> 
> 赞同：3
> 
> 时间：2012-09-21T14:37:32.937
> 
> 标签：css, border, css-transitions

我有一个菜单，其中元素在悬停时有一个简单的动画，改变背景颜色和文本颜色。

由于该元素有一个带有初始样式的边框，我想将其更改为 inset 以使其看起来向前。然而，过渡似乎不适用于边框样式属性，因此最终效果看起来不太好，因为边框样式的更改立即发生，并且仅在稍后背景发生更改。

任何想法如何使这项工作？我发现无法转换边框样式很奇怪。如果是这样，有什么转机吗？

这是代码：

```
#main_menu a, #main_menu li { 
  -webkit-transition: all 0.4s ease-in-out 0s;
-moz-transition: all 0.4s ease-in-out 0s;
-o-transition: all 0.4s ease-in-out 0s;
-ms-transition: all 0.4s ease-in-out 0s;
transition: all 0.4s ease-in-out 0s;
 } /*Hover animation */

#main_menu li:hover { background: #4488CC;  border-style: inset; }

#main_menu li {
        /*GRAPHICS*/
    list-style: none;
    border: 3px outset #496181;
    margin: 10px;
    background: #333; 
```

PS：我不想为此使用jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:50:25.453

Your question may have been hastily written, but I think you're missing an `_` in the first selector. Also, it seems that you're animating the `border-style` from `outset` to `outset`, so you won't see any differences. It does indeed work, I've created a demo that changes the `border-color` on [jsfiddle](http://jsfiddle.net/cchana/yPMda/) for you to take a look at.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T00:34:26.583

另一种解决方案是将边框创建为按钮图像并在 div 中拉伸它并仅使用 box-shadow。这样，您的用户仍会通过阴影中的过渡看到平滑的按钮移动。

# powershell - 在 64 位 Powershell 可执行文件上执行 cmdlet

> ID：12532681
> 
> 赞同：1
> 
> 时间：2012-09-21T14:37:36.607
> 
> 标签：powershell, 64-bit, remote-server, cmdlets

我如何编写一个在 64 位远程 powershell 可执行文件上打开和运行 cmdlet 的 powershell 脚本。

我很难找到任何资源、示例或教程来展示如何编写连接到远程服务器的 powershell 脚本、打开 64 位 Powershell.exe 并从中运行 cmdlet。我将从 32 位机器上运行这个脚本。如果有人有任何例子或想法？

更新：

我发现我可以在远程机器上先执行一个受信任的主机命令并启用 remote-ps

```
Enable-PSRemoting
cd wsman:
cd localhost\client
set-item trustedhosts * 
```

这样做之后，我尝试连接到我的服务器

```
Enter-PSSession servername 
```

给出这个错误

```
The following error occured while using Kerberos authentication: The network path was not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:41:06.453

如果 64 位计算机配置了 PowerShell 远程处理，则默认 PowerShell 端点将是 64 位。还注册了一个 x86 端点，但这不是默认值。

关于更新的问题，您处于什么类型的环境中？工作组还是域？

如果你在一个域中，事情会简单一些。如果双方都启用了 PowerShell 远程处理（通过 Enable-PSRemoting），您应该能够按照您的尝试输入-PSSession 服务器名。您是否拥有远程计算机的管理权限？

由于 Kerberos 失败，您可以使用 -Authentication 参数指定其他身份验证类型。有效选项为 NTLM、CredSSP 和 Kerberos。默认值为 Negotiate，它可能使用 Kerberos 或 NTLM。

您可以使用 -Credential 参数指定特定凭据。

关于 Kerberos 错误，您可能需要检查主机是否注册了正确的 SPN。

Don Jones 和 Tobias Weltner 撰写了一份很棒的 PowerShell 远程处理指南 -[在这里找到](http://powershell.org/wp/wp-content/uploads/2012/08/SecretsOfPowerShellRemoting.zip) 它介绍了 PowerShell 远程处理的许多配置方案。

# php - 扫描文件夹并为每个文件夹创建一本书的脚本？

> ID：12532684
> 
> 赞同：2
> 
> 时间：2012-09-21T14:37:44.310
> 
> 标签：php

我是一名摄影师，这就是我想要实现的目标：我正在尝试展示更多的“书籍”，例如这些书籍：http: [//builtbywill.com/code/booklet/](http://builtbywill.com/code/booklet/)

我可以复制上面链接中为 ONE Album/book 提供的示例，但我的画廊中有 20 多张专辑要显示，我不想复制/粘贴 20 多次相同的代码并更改路径 20 多次等。所以我决定在 php 中做一些事情：

我有文件夹说 IMAGES/ALBUMS/ALBUM1 到 ALBUM10

我需要扫描 IMAGES/ALBUM 并为找到的每个 ALBUM1 到 ALBUMx 文件夹显示所有图像，如下所示：

这是我到目前为止的代码：

```
function mySlider()
{
        $album = array(
            'Asia i Marcin' => 'images/albums/asiamarcin/',
            'Aneta i Marcin' => 'images/albums/anetamercin/',
        );
        $dir = $album['Asia i Marcin'];
        //$dir = 'images/asiamarcin/';
        $scan = scandir($dir);  

        for ($i=0; $i<count($scan); $i++) {  
            if ($scan[$i] != '.' && $scan[$i] != '..') {  
            echo ' 
                    <div>
                         <img width="450" heigth="385" src="'. $dir . $scan[$i] . '" alt="'. $scan[$i] . '" /> 
                    </div> 
                ';  
            }    

        }   
} 
```

它远非完美，到目前为止，我将它插入到我的 html 中，如下所示：

```
<div class="b-load">
    <?php mySlider(); ?>
</div> 
```

我明白了：

```
 <div>
 <img width="450" heigth="385" src="images/albums/asiamarcin/asiamarcin01.jpg" alt="asiamarcin01.jpg" /> 
 </div> 
 <div>
 <img width="450" heigth="385" src="images/albums/asiamarcin/asiamarcin02.jpg" alt="asiamarcin02.jpg" /> 
 </div> 
 <div>
 <img width="450" heigth="385" src="images/albums/asiamarcin/asiamarcin03.jpg" alt="asiamarcin03.jpg" /> 
 </div> 
```

理想情况下，我会这样称呼它：

```
<div class="b-load">
   <?php mySlider('ALBUM1'); ?>
</div>
....
....
<div class="b-load">
  <?php mySlider('ALBUM2'); ?>
</div>
...etc... 
```

我不知道该怎么做:(我不是程序员，但我想学习，所以我很感激你的帮助。谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:54:03.043

这将做：

```
function mySlider($dirName)
{
    $dir = 'images/albums/' . $dirName . '/';
    $scan = scandir($dir);  

    for ($i=0; $i<count($scan); $i++) {  
        if ($scan[$i] != '.' && $scan[$i] != '..') {  
        echo ' 
                <div>
                     <img width="450" heigth="385" src="'. $dir . $scan[$i] . '" alt="'. $scan[$i] . '" /> 
                </div> 
            ';  
        }    

    }   
} 
```

# c# - 可以使用 Html Agility Pack 来解析 HTML 片段吗？

> ID：12532685
> 
> 赞同：7
> 
> 时间：2012-09-21T14:37:46.713
> 
> 标签：c#, .net, html, parsing, html-agility-pack

我需要从 ASP.NET 页面、用户控件和母版页中获取`LINK`元素`META`，获取它们的内容，然后在我正在使用的实用程序中将更新的值写回这些文件。

我可以尝试使用正则表达式来获取这些元素，但这种方法存在几个问题：

*   我希望许多输入文件包含损坏的 HTML（缺少/乱序元素等）
*   `SCRIPT`包含注释的元素和/或看起来像有效元素的 VBScript/JavaScript 等。
*   我需要能够对 IE 条件注释和 IE 条件注释中的`META`元素`LINK`进行特殊处理
*   更不用说HTML如何不是常规语言

我对 .NET 中的 HTML 解析器进行了一些研究，许多 SO 帖子和博客都推荐[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)。我以前从未使用过它，我不知道它是否可以解析损坏的 HTML 和 HTML 片段。（例如，假设一个用户控件只包含一个`HEAD`元素，其中包含一些内容 - 没有`HTML`或`BODY`。）我知道我可以阅读文档，但如果有人可以提供建议，它会为我节省很多时间。（大多数 SO 帖子都涉及解析完整的 HTML 页面。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:42:05.530

没错，这就是它擅长的地方。

`<html>`事实上，由于缺少标签或未正确关闭的标签，您会在野外发现的许多网页都可能被描述为 HTML 片段。

HtmlAgilityPack 模拟浏览器必须做的事情 - 尝试从有时混乱的不匹配标签中理解。一门不完美的科学，但 HtmlAgligityPack 做得很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T15:00:29.107

Html Agility Pack 的替代方案是[CsQuery](https://github.com/jamietre/CsQuery)，一个 C# jQuery 端口，我是它的主要作者。它允许您使用 CSS 选择器和完整的 Query API 来访问和操作 DOM，这对许多人来说比 XPATH 更容易。此外，它的 HTML 解析器是专为多种目的而设计的，并且有多种解析 HTML 的选项：作为完整文档（`html, body`将添加缺少的标签，并将任何孤立的内容移动到正文中）；作为一个内容块（意思是 - 它不会被包装为一个完整的文档，但是可选的标签，如`tbody`在 DOM 中仍然是强制性的，就像浏览器一样），并且作为一个真正的片段，没有标签被创建（例如，如果您只是使用构建块）。

有关详细信息，请参阅[创建新 DOM](https://github.com/jamietre/CsQuery#creating-a-new-dom)。

此外，CsQuery 的 HTML 解析器被设计为遵循 HTML5 规范的可选结束标记。例如，关闭`p`标签是可选的，但有特定的规则可以确定何时关闭块。为了生成与浏览器相同的 DOM，解析器需要实现相同的规则。CsQuery 这样做是为了提供与给定源的浏览器 DOM 的高度兼容性。

使用 CsQuery 非常简单，例如

```
CQ docFromString = CQ.Create(htmlString); 
CQ docFromWeb = CQ.CreateFromUrl(someUrl);

// there are other methods for asynchronous web gets, creating from files, streams, etc.

// css selector: the indexer [] is like jQuery $(..)

CQ lastCellInFirstRow = docFromString["table tr:first-child td:last-child"];

// Text() is a jQuery method returning text contents of selection 

string textOfCell = lastCellInFirstRow.Text(); 
```

最后，CsQuery 根据类、id、属性和标签对文档进行索引 - 与 Html Agility Pack 相比，选择器的速度非常快。

# c - 如何将字符串中的字符从开头移动到结尾

> ID：12532689
> 
> 赞同：2
> 
> 时间：2012-09-21T14:37:55.127
> 
> 标签：c, pointers

正如标题所说，在我的程序中，我（经过许多程序）得到了标记化的单词。不幸的是，由于颠倒了它们，它们在单词的开头保留了标点符号，例如。，驼鹿

如何`,`从头到尾移动它->驼鹿，

到目前为止，我已经尝试过（`ptr`是`char *`）：

```
temp = strdup(ptr);
temp = &ptr[0];
ptr[0] = ptr[1];
ptr[strlen(ptr)-1] = temp;
free(temp); 
```

但这给了我错误：

> 赋值使指针从整数而不进行强制转换
> 
> 警告：赋值从没有强制转换的指针生成整数

如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:40:52.393

像这样的东西：

```
void swap_last(char *str)
{
  const size_t len = strlen(str);
  if(len > 1)
  {
    const char   first = str[0];
    memmove(str, str + 1, len - 1);
    str[len - 1] = first;
  }
} 
```

请注意，以上假设`str`是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:41:14.967

通常，逗号应该是它自己的标记，因此在分词后解析它就是在第一个分词器之后放置第二个分词器。

最好的解决方案是不仅*在*空格上拆分，而且将逗号识别为它自己的标记，这样您就可以测试逗号作为语法的一部分的存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:42:54.857

查看你的代码并推断它缺少类型，很难知道你的`temp`变量的类型——因为在某些地方你像 a 一样使用它，`char *`而在其他地方你像 a 一样使用它`char`。

我怀疑编译器错误在线`ptr[strlen(ptr)-1] = temp;`（因为我怀疑那`temp`是 a `char *`），正确的解决方法是：`ptr[strlen(ptr)-1] = *temp;`

# authentication - 使用 Asp.net Webapi 进行身份验证和基于角色的授权

> ID：12532691
> 
> 赞同：1
> 
> 时间：2012-09-21T14:38:04.347
> 
> 标签：authentication, authorization, asp.net-web-api

我正在我们的 Webapi 中实现身份验证/授权。目前它在基本的 http 身份验证中工作，这当然只是身份验证。

我们必须实现基于角色的授权。走这条路的最佳做法是什么。

我正在考虑基于身份验证生成一个令牌，并且想知道令牌中是否包含可以告诉我有关用户、其角色、到期日期等信息的信息。这个令牌将随着每个请求来回传递。

我如何检查此令牌是否过期并提取信息。我想不要将它存储在数据库中，以便为每个请求再次查询数据库以查看它是否过期。这样做的正确方法是什么。

我愿意接受建议，并希望了解与此相关的工作。

我正在考虑以 REST url 对我们服务的消费者透明的方式设计我们的控制器。在 Controller/HttpHandler 中，我们能够找出这个 id 属于哪个角色，并相应地带来数据。

请建议

# c# - 使用 EF4 的 ToList() 上的高锁争用和低性能

> ID：12532692
> 
> 赞同：3
> 
> 时间：2012-09-21T14:38:05.930
> 
> 标签：c#, performance, entity-framework, entity-framework-4

我有一个使用 EF4（System.Data.Entities，没有 nuget 包）并直接针对 LINQ 查询命中上下文的项目。每当我通过让多个用户登录（使用 VS 测试负载测试）进行负载测试时，我的性能很糟糕，我的 CPU 会达到 100%，并且 VS.NET 会在高 .NET 锁争用和高垃圾收集时发出警报。

在进行大量分析和调整时，一切似乎都指向 LINQ 查询本身的执行（在某种程度上是可以预期的），以及我们在一堆中进行的 .ToList() 调用的大量争用放在结果上。

有没有人经历过这个？是什么原因，我该如何解决？出于某种原因，我是否需要退出 .ToList() 调用？

更新：一些人要求提供更多详细信息。这是有问题的代码（稍微调整以删除我无法发布的内容）。

```
var query =
            from f in context.fs
            where f.usr.Any((u) => u.id == id)
            select new
            {
                FS = f,
                f.fList,
                E = from e in f.fList select new { e.er },
                L = from l in f.fList select new { l.id }
            };
    var res = query.ToList(); 
```

在重负载下，相同的代码在多个线程上运行（分析器说 13）。ToList() 调用是绝对的谋杀，几乎是所有延迟的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:03:03.913

您需要记住，`IQueryable`方法`IEnumerable`使用不同的执行。 `IQueryable`特别是方法，通常只在内存中修改表达式树。从分析器的角度来看，它们永远不会占用大量时间。直到`ToList`调用才真正执行查询（从前面的`IQueryable`方法生成），这意味着实际的网络 IO 发生在此处。这样做所花费的时间将*大大*高于所有查询生成的总和。

简而言之，分析器在这里并没有真正帮助您。所有的工作都是通过 汇集的`ToList`，但是决定查询效率的代码基本上在其他任何地方。可能您想要的只是一个昂贵的操作，或者您没有有效地编写查询（在这种情况下，我们需要了解更多关于它的信息以提供信息）。

至于并行化是否会有所帮助，这还不是很清楚。我的猜测是可能不是。如果您的 CPU 已用尽，那么您将使其忙碌，而线程只会增加更多开销并减慢您的速度。如果 CPU 没有分配任务但速度很慢，那么线程更有可能帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:04:41.417

对于您的查询：如果您需要完整的`fList`实体*在查询执行后*`E`执行投影：`L`

 *```
var query = from f in context.fs
            where f.usr.Any((u) => u.id == id)
            select new
            {
                FS = f,
                f.fList
            };
var res = query.ToList();
foreach (var x in res)
{
    // runs in memory
    var E = from e in x.fList select new e.er;
    var L = from l in x.fList select new l.id;
    // ...
} 
```

如果您只需要 E 和 L 将它们组合起来：

```
var query = from f in context.fs
            where f.usr.Any((u) => u.id == id)
            select new
            {
                FS = f,
                EL = from x in f.fList select new { e.er, l.id }
            };
var res = query.ToList(); 
```*

# intersystems-cache - Intersystems Cache - Callin API 入门

> ID：12532696
> 
> 赞同：1
> 
> 时间：2012-09-21T14:38:11.533
> 
> 标签：intersystems-cache, intersystems

我想使用调用 API 开发 C 客户端代码。

我编写了连接到缓存的代码。但是，当我调用它时，我得到...

```
Instance is not running
Start status = -1 
```

我猜我缺少一个环境变量来识别我的默认缓存实例，但我在缓存文档中找不到对它的引用。

我有一个基于 Suse 的安装。我可以在同一个 shell 中使用“csession CACHE”启动 csession。

有什么帮助吗？

代码如下......

```
static void *
mstart(void) {
    int status = 0;
    if (! gInitialised) {
        CACHE_ASTR prinp, prout, exename;

        prinp.len = prout.len = 0;
        prinp.str[0] = prout.str[0] = '\0';
        strcpy((char *)exename.str, "vavista.cache");
        exename.len = strlen((const char *)exename.str);

        status = CacheSecureStartA(
            NULL,                             /* User */
            NULL,                             /* Password */
            &exename,                          /* Application Id */
            CACHE_PROGMODE | CACHE_TTNEVER,   /* Flags */
            0,                                /* timeout */
            &prinp,                        /* Principal input device */
            &prout);                       /* Principal output device */
        printf("Start status = %d\n", status);
        atexit(mstop);
    }
    return (void *)1; /* Success */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:43:05.610

您需要在开始之前设置缓存目录... CacheSetDir("/opt/cache/mgr");

# javascript - 将 Handlebars 集成到 Backbone Boilerplate 应用程序中

> ID：12532697
> 
> 赞同：4
> 
> 时间：2012-09-21T14:38:22.953
> 
> 标签：javascript, backbone.js, handlebars.js

是否有关于如何将 Handlebars 集成到 Backbone Boilerplate 应用程序的示例应用程序或教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:52:32.560

这里值得一提的是，Backbone Boilerplate 的创建者 Tim Branyen 刚刚添加了对 Handlebars 集成的支持。

[https://github.com/tbranyen/boilerplate-handlebars-layoutmanager/commit/1270608f4cb62bea6bd89a46e098210b9f075968](https://github.com/tbranyen/boilerplate-handlebars-layoutmanager/commit/1270608f4cb62bea6bd89a46e098210b9f075968)

这不是一个教程，但应该为您指明正确的方向，将 Handlebars 与您的应用程序集成。

# xml - 更新值的 Ant 任务

> ID：12532700
> 
> 赞同：1
> 
> 时间：2012-09-21T14:38:27.850
> 
> 标签：xml, replace

基本上我想更新 xml 标签中的值。这是我的xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
  <application> ten</application>
  <version>1</version>
</appengine-web-app> 
```

我想将应用程序标签值从十更改为其他值，比如三。我的代码是这个

```
<target name="renameconfig"
      description="Renaming config files">
<taskdef name="xmltask" 
            classname="com.oopsconsultancy.xmltask.ant.XmlTask"/>
<xmltask source="war/WEB-INF/appengine-web.xml" dest="war/WEB-INF/appengine-web.xml"> 
  <replace path="/:appengine-web-app/:application/text()" withText="three"> </replace>
</xmltask>
  </target> 
```

这会在应用程序标记 .ie 中填充空值。如果有人纠正这一点，那就太好了。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:52:23.003

the XPath should be:

```
 <replace path="/appengine-web-app/application/text()" withText="three"> </replace> 
```

or if the namespace is causing trouble:

```
<replace path="/*[namespace-uri()='http://appengine.google.com/ns/1.0' and local-name()='appengine-web-app']/*[namespace-uri()='http://appengine.google.com/ns/1.0' and local-name()='application']/text()" withText="three"> </replace> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:04:18.300

```
 <replace path="/appengine-web-app/application/text()" withText="three"> </replace> 
```

为此没有任何反应。

为了这

```
<replace path="/*[namespace-uri()='http://appengine.google.com/ns/1.0' and local-name()='appengine-web-app']/*[namespace-uri()='http://appengine.google.com/ns/1.0' and local-name()='application']/text()" withText="three"> </replace> 
```

值设置为空

# ssas - MDX 从 Dimension 获取 MAX MEMBER_KEY

> ID：12532704
> 
> 赞同：4
> 
> 时间：2012-09-21T14:38:55.840
> 
> 标签：ssas, mdx, dimensions

我有一个非常简单的 SSAS 维度，如下所示：

维度名称：**DimKeyword**

1 属性：以KeywordID为**KeyColumn ，以****Keyword**（名称）为**NameColumn的Keyword**

 ****使用 MDX，我想为 DimKeyword 维度获取具有**Max** MEMBER_KEY 的一行（不列出所有关键字），到目前为止我有：

```
WITH MEMBER KeywordID as
[Dim Keyword].[Keyword].currentmember.MEMBER_KEY
SELECT {KeywordID} on COLUMNS
FROM [Some Cube] 
```

虽然这似乎只返回 0 （我假设是为 member ）。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:41:46.323

您可以使用 max 函数：

```
WITH MEMBER [Measures].[Max key] AS
    Max([Dim Keyword].[Keyword].Members, [Dim Keyword].[Keyword].currentmember.MEMBER_KEY)
SELECT {[Measures].[Max key]} on COLUMNS
FROM [Some Cube] 
```

如果你想拥有最高的关键字成员`MEMBER_KEY`，你可以使用：

```
TopCount([Dim Keyword].[Keyword].Members, 1, [Dim Keyword].[Keyword].currentmember.MEMBER_KEY).Item(0).Item(0) 
```****

# bash - 在 ubuntu 中使用 sed 命令搜索和删除块

> ID：12532707
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:05.390
> 
> 标签：bash, vim, sed, vi, replace

我想要执行的是 1- 查找和 2- 删除 (__c64) 的整个定义块：

```
unsigned long long __c64(unsigned int llvm_cbe_hi, unsigned int llvm_cbe_lo) {
unsigned long long llvm_cbe_retval;    /* Address-exposed local */
unsigned long long llvm_cbe_retval1;

  *(&llvm_cbe_retval) = (((((unsigned long long )(unsigned int )llvm_cbe_hi)) << 32ul) |  (((unsigned          long long )(unsigned int )llvm_cbe_lo)));
  llvm_cbe_retval1 = *(&llvm_cbe_retval);
  return llvm_cbe_retval1;
} 
```

在一个项目中除了一个 .c 文件之外的所有文件中。由于在 .o 到可执行文件的编译阶段，我收到错误“__c64 的多重定义”，我想删除除一个之外的所有这些以解决问题。

有任何想法吗？

问候，

阿米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:57:38.730

如果所有文件中的功能布局完全相同，您可以试试这个

```
gvim -p *.c    // Open all relevant files in multiple tabs 
```

然后执行这个

```
:bufdo %s/unsigned long long __c64\(.\+\n\)\+\(\n\)\+\(.\+\n\)\+}// | update 
```

最后执行的“更新”将保存每个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:27:30.947

伙计们，我发现定义是动态变化的，我试图弄清楚：

```
sed '/^unsigned long long __c64/,/}/d' 
```

幸运的是，它确实奏效了。

感谢所有的帮助。

阿米尔

# jfreechart - JFreechart甘特图毫秒X轴？

> ID：12532708
> 
> 赞同：2
> 
> 时间：2012-09-21T14:39:09.960
> 
> 标签：jfreechart

我正在使用 JFreechart 创建甘特图，但是日期（X 轴）以日期格式 HH:MM:SS 显示。

有没有办法让这个 x 轴只显示毫秒？由于这是一个甘特图，我的 x 轴值是 SimpleTimePeriod 类型，我用毫秒构建。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:31:14.323

假设`ChartFactory.createGanttChart()`，您可以在调用`setNumberFormatOverride()`绘图时指定任何所需的格式`DateAxis`。[这里](https://stackoverflow.com/a/12481509/230513)有一个相关的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T10:20:48.017

这也有效：

```
CategoryPlot plot = (CategoryPlot) chart.getPlot(); 
DateAxis range = new DateAxis("Date");
range.setDateFormatOverride(new SimpleDateFormat("ss.SSS"));
plot.setRangeAxis(range); 
```

# c# - 在 C# 中实现 Scala 集合？

> ID：12532710
> 
> 赞同：1
> 
> 时间：2012-09-21T14:39:13.797
> 
> 标签：c#

[Scala 集合 API](http://www.decodified.com/scala/collections-api.xml)相当不错。

可变和不可变类型都遵循相同的树结构的方式使其非常优雅。

如果有任何东西可以实现类似 Scala 的集合，我只是在徘徊。哦，不要说 C5，因为它没有真正不可变的集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:40:18.087

.NET 刚刚发布了他们的第一个[不可变集合](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)，我建议您尝试一下。

特别是，这些与 .NET 4.5 一起提供的共享只读接口可在听起来像您正在寻找的可变和不可变集合上工作，同时提供有效的集合的写时复制实现。

# facebook - 使用 Graph API Explorer 作为应用管理员删除用户分数

> ID：12532711
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:16.103
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-access-token

有没有办法从 Graph API Explorer中删除特定的用户[分数？](https://developers.facebook.com/docs/scores/)

假设游戏有问题，一些用户得到了错误的分数。有没有办法（假设我是应用程序管理员）来解决这个问题？删除那些分数？

当然，使用 Graph API Explorer 或其他一些工具。我试过了，似乎我无法访问除我自己以外的任何其他用户的分数信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:31:13.800

`/USER_ID/scores`您可以通过使用该用户的访问令牌或应用程序访问令牌向该用户发出 HTTP DELETE 请求来删除该用户的分数。

**在“为用户管理分数**”标题下的“[分数”文档](https://developers.facebook.com/docs/scores/)中查看更多信息

# actionscript-3 - 奇怪的 Flash 编译器错误

> ID：12532712
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:19.847
> 
> 标签：actionscript-3, flash, compiler-errors, flash-cs5

我正在制作一个非常简单的幻灯片。我用相同的脚本制作了其他人，没有错误。这是一个简单的幻灯片，底部有 7 个按钮，可以跳转到节目中的各个点。

如果我在我的操作窗格中输入任何内容，我会收到以下错误，完全按照显示的方式编写：

场景 1，图层'动作，第 1 帧，第 1 行 1023：不兼容的覆盖。场景 1，图层'动作，第 1 帧，第 1 行 1023：不兼容的覆盖。场景 1，图层'动作，第 1 帧，第 1 行 1021：重复功能定义。MainTimeline，第 1 行 1000：对 frame1 的不明确引用。

不管我在脚本中放了什么，它都会触发这些错误。即使我输入的只是一个基本命令，即使它被注释掉，如下所示： //stop;

这是我的脚本：

```
import flash.events.MouseEvent;

button1.addEventListener(MouseEvent.CLICK,showpic1);
button2.addEventListener(MouseEvent.CLICK,showpic2);
button3.addEventListener(MouseEvent.CLICK,showpic3);
button4.addEventListener(MouseEvent.CLICK,showpic4);
button5.addEventListener(MouseEvent.CLICK,showpic5);
button6.addEventListener(MouseEvent.CLICK,showpic6);
button7.addEventListener(MouseEvent.CLICK,showpic7);

function showpic1(Event:MouseEvent):void{
    gotoAndPlay("picture1");
}

function showpic2(Event:MouseEvent):void{
gotoAndPlay("picture2");
}

function showpic3(Event:MouseEvent):void{
gotoAndPlay("picture3");
}

function showpic4(Event:MouseEvent):void{
gotoAndPlay("piturec4");
}

function showpic5(Event:MouseEvent):void{
gotoAndPlay("picture5");
}

function showpic6(Event:MouseEvent):void{
gotoAndPlay("picture6");
}

function showpic7(Event:MouseEvent):void{
gotoAndPlay("picture7");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:46:07.343

该错误意味着您可能已将这些函数复制并粘贴到同一时间线的其他位置。当您有两个具有相同名称但参数集和返回类型不同的函数时，会发生不兼容的覆盖。很可能您已经声明了一个使用内置函数名称的函数。从字面上看，重复的函数定义意味着您已经两次声明了相同的函数。歧义引用是前者的结果：但这是因为您的代码在模板中使用，而在模板中使用它的结果会产生歧义。带有名称的函数`frame#`由 Flash CS 生成，用于在帧之间导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:46:04.347

您应该使用小写的“事件”来命名每个侦听器中的变量。“事件”是一个类名，而“事件”是一个未使用的标识符，您可以将其用作变量。

```
function showpic1(event:MouseEvent):void{ 
```

# javascript - 仅从捕获 Javascript 中正则表达式的括号中获取内容

> ID：12532714
> 
> 赞同：3
> 
> 时间：2012-09-21T14:39:25.200
> 
> 标签：javascript, regex

为什么

```
"$1 $2 $3".match(/\$(\d+)/g) 
```

返回

```
 ["$1", "$2", "$2"] 
```

， 不是

```
 ["1", "2", "3"] 
```

?

如果我删除全局标志，它将给我匹配和捕获的匹配：

```
["$1", "1"] 
```

但只有一个。

有没有办法进行 reg ex 捕获而不给我这个？

即使在 $ 周围加上非捕获括号也会给我相同的结果，例如：

```
"$1 $2 $3".match(/(?:\$)(\d+)/g) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:45:39.000

如果您在正则表达式中使用捕获组（例如，parens），那么您无法`g`按照您尝试的方式获得与标志的多个匹配项，因为该`.match()`函数无法返回二维数据（捕获组列表每次匹配）。它本来可以设计为这样做的，但是为了获取该信息并非如此，您必须循环并`.exec()`多次调用，每次调用它时，您都会从每个连续匹配中获取所有数据。

使用如下所示获取此数据`.exec()`：

```
var str = "$1 $2 $3", matches;
var allMatches = [];
var reg = /\$(\d+)/g;

while (matches = reg.exec(str)) {
    // matches[1] is each successive match here from your captured group
    allMatches.push(matches[1]);
}
// allMatches will be what you wanted ["1", "2", "3"] 
```

# macos - 如何在 QT for mac OS 中设置应用程序版本号？

> ID：12532718
> 
> 赞同：2
> 
> 时间：2012-09-21T14:39:35.323
> 
> 标签：macos, qt, crash-reports

如何设置 QT 应用程序的应用程序版本号，以便当它在 Mac OS 上崩溃时，它会显示在崩溃日志中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:58:55.197

我想到了。`CFBundleShortVersionString`您可以通过添加此键并将版本号添加为字符串来编辑 .app 包中的 plist 文件。

# mysql - 如何在 MySQL 中进行行版本控制，同时保持外键引用完整性

> ID：12532721
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:47.510
> 
> 标签：mysql, database-design, version-control, foreign-keys, percona

我的一个客户有一个动态变化的商业模式，他们根据每日美元汇率销售产品，这意味着产品的定价每天都在变化，客户仍然希望保留已售产品的历史记录（价格，日期_已售） （此信息保存在订单表中）。

我能想到为我的客户实施解决方案的唯一方法是使用行版本控制。（他们使用 MySQL 作为数据库服务器）

这是我想要在保持引用完整性的同时实现的当前模式（就像原型一样），但是当我创建订单表时，我收到如下错误：

`ERROR 1005 (HY000): Can't create table 'mydb.orders' (errno: 150)`

特此架构设计：

```
create table products (
 id int not null auto_increment,                                           
 prod_id int not null,
 name varchar(200) NOT NULL,
 price decimal(8,2) NOT NULL default 0,
 is_active boolean default 0,
 deleted boolean default 0,
 create_date timestamp NOT NULL default current_timestamp,
 end_date timestamp NOT NULL default '2030-01-01 00:00:00',
 primary key(id)                                                   
)engine=innodb;   

create table orders (
  id int not null auto_increment,
  prod_id int not null,
  foreign key(prod_id) references products(prod_id),
  date_sold timestamp NOT NULL default current_timestamp,
  primary key(id)
)engine=innodb; 
```

为什么我无法为产品表创建外键？我究竟做错了什么？

非常感谢任何建议，

谢谢！

**供参考**

> 数据库服务器设置
> 
> *   Percona MySQL 5.5.27
> *   我使用时间戳和布尔标志在我的 db_layer 中处理版本控制

**更新：** 我必须在 orders(prod_id) 列上创建一个索引，orders 表的正确模式定义是：

```
 create table orders (
      id int not null auto_increment,
      prod_id int not null,
      index product_id(prod_id),
      foreign key(prod_id) references products(prod_id),
      date_sold timestamp NOT NULL default current_timestamp,
      primary key(id)
    )engine=innodb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:47:59.923

您要引用的列上需要有一个索引。尝试在 products 表中的 prod_id 上创建索引，然后尝试创建外键。

另外，为什么不在订单表中添加一个价格列并在销售时复制当前产品价格。这将提供您的历史记录，您无需维护不同版本的产品记录。

# webkit - 我在哪里下载 iWebkit？

> ID：12532722
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:52.873
> 
> 标签：webkit

我已经从[这个](http://snippetspace.com/)网站下载了它，我正在尝试找出下载的位置。我有一台笔记本电脑作为网站的服务器运行，我正在使用 XAMP 来托管我的网页。我听说我应该把文件放在 /framework/.. 那台笔记本电脑的根目录 (C:/) 中，我应该把它放在 XAMP 和其他各种地方，但它似乎从来没有工作过。熟悉 iWebKit 的人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:48:39.503

就在您网站的根文件夹中。index.html 页面将是您的主页

# javascript - 使用 PERL 变量更新 HTML

> ID：12532723
> 
> 赞同：1
> 
> 时间：2012-09-21T14:39:54.673
> 
> 标签：javascript, jquery, html

我在 PERL 中有一个脚本，它打印一个每秒更改值的 var（标签）。实际上，我每 2 秒刷新一次整个页面，但是如何只更新 perl-tags？HTML 在 localhost 中的 perl 提供的 webServer 上运行。代码示例：

```
<h3>{characterName}</h3><br/>
<h4>{characterLocationMap}</h4>
<p>{characterLocationX},{characterLocationY}</p> 
```

# jquery - Ajax 在 IE 和 Safari 上工作，但在 FF、Chrome 和 Opera 上不工作。

> ID：12532724
> 
> 赞同：0
> 
> 时间：2012-09-21T14:39:55.590
> 
> 标签：jquery, html, ajax, modal-dialog

我正在尝试通过 jQuery Ajax 从 html 页面获取 Modal 的数据，它可以在 Safari 甚至 IE 6 中运行，但它不能在 Firefox、Chrome 或 Opera 中运行。请指教！

我的代码在[这里](http://jsfiddle.net/vJx39/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:00:49.080

我在这里看到了一些不寻常的选择器用法：

在你的代码中......

`$close = $('<a id="close" href="#">close</a>');`

您已将点击事件添加为：

```
 $close.click(function(e) {
            e.preventDefault();
            method.close();
        }); 
```

我真的相信这无论如何都行不通......绑定事件的正确选项将涉及适当的 jQuery 选择器，例如：

```
 $('#close').click(function(e) {
            e.preventDefault();
            method.close();
        }); 
```

或者变量`$close`应该引用这样的选择器`$close = $('#close');`

# three.js - 采摘...用 json 和 ray

> ID：12532726
> 
> 赞同：1
> 
> 时间：2012-09-21T14:39:57.697
> 
> 标签：three.js

对不起英语。如何访问加载了 Json 的模型的网格以进行选择？我需要访问模型的某些部分并绘制鼠标悬停的部分。我在下面使用此代码：

```
var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

        var intersects = ray.intersectScene( scene );

        if (intersects.length) {

            if ( INTERSECTED != intersects.mesh ) {

                if ( INTERSECTED ) INTERSECTED.material.color.setHex( INTERSECTED.currentHex );

                INTERSECTED = intersects.mesh;
                INTERSECTED.currentHex = INTERSECTED.material.color.getHex();
                INTERSECTED.material.color.setHex( 0xff0000 );  
                INTERSECTED = mesh.geometry.material;
            }

        } else {

            if ( INTERSECTED ) INTERSECTED.material.color.setHex( INTERSECTED.currentHex );

            INTERSECTED = mesh.geometry.material;

        }

        webglRenderer.render( scene, camera ); 
```

# c# - 即使连接关闭，SQLite 也会保持数据库锁定

> ID：12532729
> 
> 赞同：40
> 
> 时间：2012-09-21T14:40:02.170
> 
> 标签：c#, sqlite, system.data.sqlite

我在 ASP.NET 应用程序（框架 4.0）中使用 System.Data.SQLite 提供程序。我遇到的问题是，当我在 SQLite 数据库的表中插入某些内容时，数据库被锁定并且即使在连接被释放后锁定也没有被释放。

尝试访问该文件时，错误是：“该进程无法访问文件 'catalog.sqlite'，因为它正在被另一个进程使用。”

我的代码非常简单，我打开连接，从 SQLServer 数据库中读取一些数据，将这些数据插入 SQLite（通过 SQLiteDataAdapter），然后关闭连接并处理所有内容以确保安全。但是，当我在填充数据后尝试压缩文件时，仍然会出现该错误。

我已经在 StackOverflow 上阅读了各种建议，但没有一个有助于解决问题（关闭防病毒软件，更改事务模型，在压缩文件之前等待几秒钟，将所有插入调用包装到事务中，等等..但没有一个有助于解决这个问题。

也许有一些特定于 ASP.NET 的东西（多线程是问题？即使我在开发机器上测试它，那里只有一个调用该函数并且没有并发？）

作为旁注，我尝试避免使用 DataTable 和 SQLiteDataAdapter 并直接使用 SQLiteCommand ，这样它就很有魅力。当然，我可以继续将查询构建为字符串而不是使用数据适配器，但是当有一个框架可以做到这一点时，我觉得有点尴尬。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-01T19:36:16.533

使用 1.0.82.0 版附带的设计器生成的数据集/表适配器时，我遇到了同样的问题`System.Data.Sqlite.dll`——关闭连接后，我们无法使用`System.IO.FileStream`. 我正确配置了连接和表格适配器，并且没有使用连接池。

根据我的第一次搜索（例如[this](https://stackoverflow.com/questions/5994141/checking-if-table-exists-keeping-connection-open-in-sqlite)和[this thread](https://stackoverflow.com/questions/8511901/system-data-sqlite-close-not-releasing-database-file)），库本身似乎存在问题——对象未正确释放和/或池问题（我不使用）。

在阅读了您的问题后，我尝试仅使用 SQLiteCommand 对象来复制问题，我发现当您不处理它们时会出现问题。**2012-11-27 19:37 UTC 更新：System.Data.SQLite 的**[这张票](http://system.data.sqlite.org/index.html/info/3186bfc523)进一步证实了这一点，其中开发人员解释说“与连接关联的*所有*SQLiteCommand 和 SQLiteDataReader 对象[应该]正确处理”。

然后我打开生成的 TableAdapters，我看到没有实现该`Dispose`方法——所以实际上创建的命令没有被释放。我实现了它，负责处理所有命令，我没有遇到任何问题。

这是C#中的代码，希望对您有所帮助。请注意，代码是从[Visual Basic 中的原始](https://gist.github.com/3813867)代码转换而来的，因此可能会出现一些转换错误。

```
//In Table Adapter    
protected override void Dispose(bool disposing)
{
   base.Dispose(disposing);

    Common.DisposeTableAdapter(disposing, _adapter, _commandCollection);
}

public static class Common
{
    /// <summary>
    /// Disposes a TableAdapter generated by SQLite Designer
    /// </summary>
    /// <param name="disposing"></param>
    /// <param name="adapter"></param>
    /// <param name="commandCollection"></param>
    /// <remarks>You must dispose all the command,
    /// otherwise the file remains locked and cannot be accessed
    /// (for example, for reading or deletion)</remarks>
    public static void DisposeTableAdapter(
        bool disposing,
        System.Data.SQLite.SQLiteDataAdapter adapter,
        IEnumerable<System.Data.SQLite.SQLiteCommand> commandCollection)
    {
        if (disposing) {
            DisposeSQLiteTableAdapter(adapter);

            foreach (object currentCommand_loopVariable in commandCollection)
            {
                currentCommand = currentCommand_loopVariable;
                currentCommand.Dispose();
            }
        }
    }

    public static void DisposeSQLiteTableAdapter(
            System.Data.SQLite.SQLiteDataAdapter adapter)
    {
        if (adapter != null) {
            DisposeSQLiteTableAdapterCommands(adapter);

            adapter.Dispose();
        }
    }

    public static void DisposeSQLiteTableAdapterCommands(
            System.Data.SQLite.SQLiteDataAdapter adapter)
    {
        foreach (object currentCommand_loopVariable in {
            adapter.UpdateCommand,
            adapter.InsertCommand,
            adapter.DeleteCommand,
            adapter.SelectCommand})
        {
            currentCommand = currentCommand_loopVariable;
            if (currentCommand != null) {
                currentCommand.Dispose();
            }
        }
    }
} 
```

**更新 2013-07-05 17:36 UTC** [gorogm 的回答](https://stackoverflow.com/a/17476363/753737)强调了两个重要的事情：

*   根据 System.Data.SQLite 官方网站上的[更改日志](http://system.data.sqlite.org/index.html/doc/trunk/www/news.wiki)，从 1.0.84.0 版本开始，应该不需要上面的代码，因为库会处理这个问题。我没有对此进行测试，但在最坏的情况下你只需要这个片段：

    ```
    //In Table Adapter    
    protected override void Dispose(bool disposing)
    {
      base.Dispose(disposing);

      this.Adapter.Dispose();
    } 
    ```

*   关于`Dispose`调用的实现`TableAdapter`：最好将其放在部分类中，以便数据集重新生成不会影响此代码（以及您可能需要添加的任何其他代码）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-04T06:02:29.790

我也有同样的问题。我的场景是在获取 SQLite 数据库文件中的数据后，我想删除该文件，但它总是抛出一个错误“ ***......由其他进程使用***”。即使我处理了 SqliteConnection 或 SqliteCommand 错误仍然发生。我已经通过调用修复了错误`GC.Collect()`。

**代码片段**

```
public void DisposeSQLite()
{
    SQLiteConnection.Dispose();
    SQLiteCommand.Dispose();

    GC.Collect();
} 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-04T20:23:54.017

就我而言，我是在创建`SQLiteCommand`对象时没有明确地处理它们。

```
var command = connection.CreateCommand();
command.CommandText = commandText;
value = command.ExecuteScalar(); 
```

我将我的命令包装在一个`using`语句中，它解决了我的问题。

```
static public class SqliteExtensions
{
    public static object ExecuteScalar(this SQLiteConnection connection, string commandText)
    {
        // Added using
        using (var command = connection.CreateCommand())
        {
            command.CommandText = commandText;
            return command.ExecuteScalar();
        }
    }
} 
```

然后你可以像这样使用它

```
connection.ExecuteScalar(commandText); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-04T08:56:21.943

以下对我有用：

```
MySQLiteConnection.Close();
SQLite.SQLiteConnection.ClearAllPools() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-28T15:00:54.770

在大多数情况下，如果您没有正确处理您的阅读器和命令，就会出现问题。存在命令和读取器无法正确处理的情况。

**场景 1：**如果您正在运行**布尔**函数。在达到结果之前，finally 块中的代码不会执行。如果您要在执行代码时评估函数 isDataExists 的结果（如果它适合结果），那么这是一个大问题，即

```
 if(isDataExists){
        // execute some code
    } 
```

被评估的函数

```
 public bool isDataExists(string sql)
    {
        try
        {
            OpenConnection();
            SQLiteCommand cmd = new SQLiteCommand(sql, connection);
            reader = cmd.ExecuteReader();
            if (reader != null && reader.Read())
            {
                return true;
            }
            else
            {
                return false;
            }
        }
        catch (Exception expMsg)
        {
            //Exception
        }
        finally
        {
            if (reader != null)
            {
                reader.Dispose();
            }
            CloseConnection();
        }
        return true;
    } 
```

**解决方案：**将您的阅读器和命令放置在 try 块中，如下所示

```
 OpenConnection();
            SQLiteCommand cmd = new SQLiteCommand(sql, connection);
            reader = cmd.ExecuteReader();
            if (reader != null && reader.Read())
            {
                cmd.Dispose();
                CloseConnection();
                return true;
            }
            else
            {
                cmd.Dispose();
                CloseConnection();
                return false;
            } 
```

**最后**处置阅读器和命令，以防万一出现问题

```
 finally
        {
            if (reader != null)
            {
                reader.Dispose();
            }
            CloseConnection();
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-04T18:28:59.117

我发现 edymtt 的答案是关于指责 TableAdapters / Datasets 的正确答案，但是我没有修改每次重新生成的 TableAdapter 代码文件，而是找到了另一个解决方案：在 TableAdapter 的子元素上手动调用 .Dispose 。（在 .NET 4.5 中，最新的 SQLite 1.0.86）

```
using (var db = new testDataSet())
{
    using (testDataSetTableAdapters.UsersTableAdapter t = new testDataSetTableAdapters.UsersTableAdapter())
    {
        t.Fill(db.Users);
        //One of the following two is enough
        t.Connection.Dispose(); //THIS OR
        t.Adapter.Dispose();    //THIS LINE MAKES THE DB FREE
    }
    Console.WriteLine((from x in db.Users select x.Username).Count());
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-07T20:03:49.153

如前所述，必须销毁 SQLite 对象。但是，有一个奇怪的行为：在调用 Dispose 命令期间必须打开连接。例如：

```
using(var connection = new SqliteConnection("source.db"))
{
    connection.Open();
    using(var command = connection.CreateCommand("select..."))
    {
        command.Execute...
    }
} 
```

工作正常，但是：

```
using(var connection = new SqliteConnection("source.db"))
{
    connection.Open();
    using(var command = connection.CreateCommand("select..."))
    {
        command.Execute...
        connection.Close();
    }
} 
```

给出相同的文件锁

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-24T16:15:52.777

这是我遇到此错误时发现的最佳 Google 搜索结果之一。但是，没有任何回复对我有帮助，因此在进行了更多搜索和谷歌搜索后，我想出了这段代码，该代码适用于[http://www.tsjensen.com/blog/post/2012/11/10/SQLite中的一些代码-on-Visual-Studio-with-NuGet-and-Easy-Instructions.aspx](http://www.tsjensen.com/blog/post/2012/11/10/SQLite-on-Visual-Studio-with-NuGet-and-Easy-Instructions.aspx)

但是，我根本不必使用 NuGet。我的程序所做的是每次打开时从服务器下载一个 db 文件。然后，如果用户更新了该数据库，它将被上传给每个人，以便他们下次打开相同的程序时获取。在更新本地文件并尝试将其上传到我们的 SharePoint 后，我​​收到文件正在使用中的错误。现在它工作正常。

```
Public Function sqLiteGetDataTable(sql As String) As DataTable
    Dim dt As New DataTable()
    Using cnn = New SQLiteConnection(dbConnection)
        cnn.Open()
        Using cmd As SQLiteCommand = cnn.CreateCommand()
            cmd.CommandText = sql
            Using reader As System.Data.SQLite.SQLiteDataReader = cmd.ExecuteReader()
                dt.Load(reader)
                reader.Dispose()
            End Using
            cmd.Dispose()
        End Using
        If cnn.State <> System.Data.ConnectionState.Closed Then
            cnn.Close()
        End If
        cnn.Dispose()
    End Using
    Return dt
End Function 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-18T04:39:17.570

确保正确处理任何 IDisposable（例如 SQLiteConnection、SQLiteCommand 等）可以解决此问题。我应该重申，必须将“使用”作为一种习惯，以确保妥善处理一次性资源。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-11T08:49:05.193

我遇到了同样的问题，只能通过`DbCommand`在`using`语句中处理来解决，但`Pooling = true`我的问题已经解决了！！

```
 SQLiteConnectionStringBuilder builder = new SQLiteConnectionStringBuilder
                {
                    Pooling = true
                }; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-12T03:54:20.973

我只是在锁定计算机时遇到了这里提到的问题，即使在解锁它之后，它也可以正常工作，否则很幸运，因为我最近才开始锁定它，而且该软件几天前才发布，还没有人知道它。

无论如何，我有所有的东西，比如关闭连接和 ClearAllPools 等，但是缺少 aTableAdapter.Adapter.Dispose() 并修复了它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-20T05:32:45.060

有同样的问题。只需安装 SQLite 1.0.111（通过 nuget）即可解决。

不必更改我的代码上的任何内容，只需更新到该版本即可。以前我使用 1.0.85 文件被锁定的地方，尽管连接被关闭和处理。

# php - 另一个 eval() 受害者

> ID：12532730
> 
> 赞同：0
> 
> 时间：2012-09-21T14:40:07.120
> 
> 标签：php, eval

一些代码用于`eval()`执行存储在数组中的代码，如下所示：

```
// $oOwner is an object
$strId = "abc";
$strClass = "someClass";
$aParams = array('a' => 'atext', 'b' => 'btext');

$this->menu = array(
"Entry 1" => ' openForm(\$oOwner,\$strId,\$strClass,\$aParams); ',
// ...
); 
```

数组键的值将直接提供给`eval()`函数。

现在我得到一个错误：`Parse error: syntax error, unexpected T_VARIABLE, expecting T_STRING ... eval()'d code on line 1`

问题是什么？

* * *

**编辑：**

循环遍历数组和`eval()`值：

```
eval( $this->menu[$param[0]] ); 
```

* * *

**编辑2：**

现在：`"Entry 1" => " openForm(\$this->owner,\$strId,\$strClass,\$aParams); "`

使用双引号`"..."`导致`PHP Notice: Undefined variable: strId in ... : eval()'d code on line 1`. 也适用于其他变量。

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:49:21.250

您正在使用单引号`'`，因此您不需要`\$`在变量中使用

概念教授同时使用单引号和双引号

```
function openForm(){
    var_dump(func_get_args());
}

$strId = "abc";
$strClass = "someClass";
$aParams = array('a' => 'atext', 'b' => 'btext');
$oOwner = "ABC" ;

$menu = array(
"Entry 1" => ' openForm($oOwner,$strId,$strClass,$aParams); ',
"Entry 2" => " openForm(\$aParams,\$strId); "
);

eval($menu["Entry 1"]); 
```

输出

```
array
  0 => string 'ABC' (length=3)
  1 => string 'abc' (length=3)
  2 => string 'someClass' (length=9)
  3 => 
    array
      'a' => string 'atext' (length=5)
      'b' => string 'btext' (length=5)

array
  0 => 
    array
      'a' => string 'atext' (length=5)
      'b' => string 'btext' (length=5)
  1 => string 'abc' (length=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:53:06.913

在将代码声明为 eval 时，您是否尝试过双引号？

```
// ...
$this->menu = array(
"Entry 1" => " openForm(\$oOwner,\$strId,\$strClass,\$aParams); ",
// ...
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:01:26.410

我尝试的方式总是会导致错误，因此我想出了将数组作为字符串通过`var_export()`.

这里发布了 2 次尝试： [Store array in a string to eval() later](https://stackoverflow.com/questions/12568095/store-array-in-a-string-to-eval-later)

# c# - 引用特定的转发器项目实例

> ID：12532734
> 
> 赞同：0
> 
> 时间：2012-09-21T14:40:19.393
> 
> 标签：c#, asp.net, web-applications, repeater, datamember

我一直在 StackOverflow 和谷歌上寻找这个问题的答案，但我什么也没找到。

我有一个基于 C# 的 ASP 网页，它使用中继器控件列出有关通过 SQL 过程返回的学生的信息。为了填充转发器，我正在使用的 Web 应用程序使用一个`Student`类，该类的`[DataMember]`属性表示 SQL 查询结果行中的每个字段。据我了解，repeater 控件中的每个项目都包含一个单独的`Student`类实例，每个实例代表查询结果中的一行。首先，如果中继器的操作与我理解的不同，请告诉我。

但是，如果我的理解是正确的，我想知道是否有任何方法可以引用`student`中继器控件的特定项目中包含的实例。我查看了一些与转发器对象相关的方法，包括：

```
repeater.Items        //This gets a collection of objects
repeater.DataMember   //Gets the 'specific table to bind'
repeater.DataSource   //References the SQL query results 
```

这些似乎都没有引用 SQL 行/“学生”实例。

有什么我遗漏或理解不正确的东西吗？我也一直在 MSDN 网站上寻找中继器控制，但如果页面上有解决方案，我可能不理解所有术语。我使用的 MSDN 转发器页面是[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater%28v=vs.100%29.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:43:40.507

这些项目存储在 repeater.Items 语句中，您可以将项目转换为您期望的任何类型：

```
var student = (Student)repeater.Items[3]; 
```

# arrays - 如何在 Perl 中添加数据结构

> ID：12532735
> 
> 赞同：1
> 
> 时间：2012-09-21T14:40:27.493
> 
> 标签：arrays, perl, hash, concatenation

我不确定如何调用以下数据结构：哈希或数组。

我正在尝试向其中添加第三个元素。有人可以指导我。一些解释将不胜感激，因为我是 perl 和这个论坛的新手。

现有结构：

```
my $var= [
          bless( {
                   'name' => 'Name1',
                   'groupid' => '2',
                   'description' => 'Desc2'
                 }, 'my_type' ),
          bless( {
                   'name' => 'Name2',
                   'groupid' => '4',
                   'description' => 'Desc3'
                 }, 'my_type' ),
]; 
```

我想在其中添加以下内容：

```
bless( {
       'name' => 'Name3',
       'groupid' => '9',
       'description' => 'Desc4'
     }, 'my_type' ), 
```

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:46:38.380

你`$var`是一个“arrayref”。

使用数组，我们可以`push`在末尾添加元素：

```
my @a = (1, 2, 3);
push @a, 4;
print "@a"; # "1 2 3 4" 
```

要将 arrayref 用作数组，我们必须取消引用它：

```
my $a = \@a;
push @{ $a }, 5;
print "@{$a}"; # "1 2 3 4 5" 
```

在这些简单的情况下，取消引用可以缩短，所以我们可以写

```
push @$a, 5; # sic! two sigils 
```

在你的情况下，这将是

```
push @$var, bless(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:46:36.087

这是一个数组引用。您想将一个元素推送到 arrayref 上。

```
push( @{ $var }, $obj ); 
```

其中 object 是您要添加的祝福对象。

由于它是一个数组引用，因此您需要取消引用数组以将某些内容推到它上面，因为“推”期望一个数组而不是对一个数组的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:16:46.610

> 我不确定如何调用以下数据结构：哈希或数组。

$var 是对象数组的引用。

添加很简单：

```
my $obj = bless( { #Create object
   'name' => 'Name3',
   'groupid' => '9',
   'description' => 'Desc4'
}, 'my_type' ),
push( @$var, $obj ); #Add 
```

# java - 如何在 Java 中将“Fri Sep 21 15:23:59 CEST 2012”转换为“2012-09-21T15:23:59”？

> ID：12532736
> 
> 赞同：3
> 
> 时间：2012-09-21T14:40:27.913
> 
> 标签：java, datetime

我想在 Java 中将日期字符串“Fri Sep 21 15:23:59 CEST 2012”转换为“2012-09-21T15:23:59”。我用 SimpleDateFormat 和以下代码尝试了这个：

```
try {
    String dateString = "Fri Sep 21 15:23:59 CEST 2012";
    SimpleDateFormat input = new SimpleDateFormat("EEE MM dd HH:mm:ss z YYYY");
    SimpleDateFormat output = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");

    Date date = input.parse(dateString);
    System.out.println(output.format(date));            
} catch (ParseException e) {
    e.printStackTrace();
} 
```

但是输入解析给了我一个 java.text.ParseException。我已阅读[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)上的文档，但我找不到错误。

哪个格式字符串解决了这个字符串的输入解析？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T14:41:42.627

利用

```
"EEE MMM dd HH:mm:ss z YYYY" 
```

**注**3`MMM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T23:16:38.123

四点：

*   如果可以，您将更喜欢使用 Java 8 中引入的较新的日期和时间类（也向后移植到 Java 6 和 7）而不是旧的`SimpleDateFormat`.
*   您应该确保您提供的语言环境与日期字符串中的星期几和月份的语言一致。
*   [虽然从文档](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html)中不清楚，但我相信`MM`模式字符串中的意思是两位数的月份数；对于您需要的三个字母的月份缩写`MMM`。这可能就是让你得到 ParseException 的原因（尽管错误的语言环境也可能给你一个）。
*   大写`Y`字母代表周年。这个错误很容易被忽视，因为一周年和日历年通常只有接近新年的几天不同。对于日历年，您必须使用小写字母`y`s。

以下是如何使用新的日期和时间类：

```
 String dateString = "Fri Sep 21 15:23:59 CEST 2012";
    DateTimeFormatter input = DateTimeFormatter.ofPattern("EEE MMM d HH:mm:ss z uuuu",
            Locale.ROOT);
    try {
        LocalDateTime date = LocalDateTime.parse(dateString, input);
        System.out.println(date.toString());
    } catch (DateTimeParseException dtpe) {
        System.err.println(dtpe.getMessage());
    } 
```

这打印：

```
2012-09-21T15:23:59 
```

请填写适当的语言环境而不是`Locale.ROOT`. `uuuu`是带符号的年份：0 对应 1 BC，-1 到 2 BC，等等。`yyyy`如果您确定年份是 AD（当前时代），则可以使用。

您会注意到您想要的格式直接来自`LocalDateTime.toString()`，不需要任何明确的格式。不过，还有另一种选择：

```
 ZonedDateTime date = ZonedDateTime.parse(dateString, input);
        System.out.println(date.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME)); 
```

使用`ZonedDateTime`而不是它的优点`LocalDateTime`是它保留了日期字符串中的时区信息。如果您以后有任何机会需要它，请选择此选项。

[此问题](https://stackoverflow.com/questions/29895133/issue-with-simpledateformat)的答案中解释了日历年和基于周的年之间的区别。

如果您不能使用或不想使用较新的类，则要使用的正确模式字符串`SimpleDateFormat`在[Reimeus 的答案](https://stackoverflow.com/a/12532803/5772882)中。不过，我仍然建议明确给出语言环境，例如：

```
 SimpleDateFormat input = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy",
                Locale.UK); 
```

输出格式可能不需要语言环境，因为它不包含文本/单词，仅包含数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:45:04.150

您可以使用：

```
SimpleDateFormat input = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy"); 
```

# jquery - JQuery在多个锚点上更改URL参数

> ID：12532739
> 
> 赞同：1
> 
> 时间：2012-09-21T14:40:37.240
> 
> 标签：jquery, for-loop

我正在尝试做并且主要完成的是更改 URL 中的 tag 参数以用于包裹在跨度中的锚标记。那工作正常。发生的事情是它拉出第一个锚标记href，并用相同的href替换所有锚标记。我认为当它通过循环时，它每次都会用新的href替换var。建议？

```
 <div class="changeparam">
        <span><a href="http://demo.org/post.php?i=17uh23&p=456&s=789&tag=asdf">Link</a></span>
        <span><a href="http://demo.org/post.php?i=18uh23&p=456&s=789&tag=asdf">Link</a></span>
        <span><a href="http://demo.org/post.php?i=19uh23&p=456&s=789&tag=asdf">Link</a></span>
        <span><a href="http://demo.org/post.php?i=20uh23&p=456&s=789&tag=asdf">Link</a> </span>   
        <a href="www.test.com">test</a>
    </div> 
```

这是我的代码，它确实替换了锚标记中的标记参数。该功能运行良好。我的问题出在函数 displayTextNumber() 中。它存储它找到的第一个锚标记并使用它来替换整个站点中的所有其他锚标记href。我想遍历每个标签。

```
function replaceQueryString( queryString, keys, newValues ) {
var parts = queryString.split('&');

// We're going to make an array of querystring key=value strings
var new_parts = [];

for( i in parts ) {
    var keyValue = parts[i].split('=');

    // Use jQuery to see if this key is in our desired set
    var replacePos = $.inArray(keyValue[0],keys);

    // If it is, it will give a non-negative integer, if not it'll give -1
    if( replacePos >= 0 )
        // We want to replace this key so make a new string for the key/value pair
        new_parts.push( keyValue[0] + '=' + newValues[replacePos] );
    else {
        // This isn't the key we want to replace, so leave it alone
        new_parts.push( parts[i] );
    }
}

// glue all the parts together and return them
return new_parts.join('&');
}

function displayTextNumber(){

    if(isNotBrandedTerm()){

    var NumberSpans = document.getElementsByTagName('span');

    for (var i=0; i < NumberSpans.length; i++) {
        // Get the full address from the original link
        var old_fulladdr = $('span a').attr('href');
        var old_addr_parts = old_fulladdr.split('?');

        // The keys you want to replace
        var tobereplaced = ['tag'];

        // The respective values you want to assign
        var replacements = [getPhoneNumber()];

        var new_query_string = replaceQueryString( old_addr_parts[1], tobereplaced, replacements );

        //var new_querystring = 'i=abc&p=def&g=ghi';
        $('span a').attr('href',old_addr_parts[0] + '?' + new_query_string);

            }//CLOSE IF
    } //CLOSE FOR
}//close isNotBrandedTerm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:46:17.597

更改循环以执行此操作

```
$('span a').each(function(k,v){

var href = $(v).attr("href");

//do something to the href

//then re-apply 
$(v).attr("href",theNewString);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:08:06.750

使用现有代码进行迭代时：

```
var NumberSpans = document.getElementsByTagName('span');

for (var i=0; i < NumberSpans.length; i++) {
    var old_fulladdr = $('span a').attr('href');
} 
```

该变量`old_fulladdr`将*始终*是第`href`一个变量，`<a>`因为这是您将其设置为的变量`$('span a').attr('href')`。该选择器指示 jQuery 获取页面中*任何位置*`a`具有`span`祖先的所有元素。

 *相反，您应该每次都选择`<a>`元素下方的。`NumberSpans[i]`例如：

```
var old_fulladdr = $(NumberSpans[i]).find('a').attr('href'); 
```

同样，在设置 new 时`href`，您需要将其设置在循环中`a`的*当前跨度下，例如：*

```
$(NumberSpans[i]).find('a').attr('href',old_addr_parts[0] + '?' + new_query_string); 
```

请注意，`$(NumberSpans[i]).find('a')`可以提取为变量。

最后，当您`span`最初选择元素时，您选择的是整个文档中的所有跨度，`var NumberSpans = document.getElementsByTagName('span');`因此如果列表中的跨度不是您期望的，您的循环可能会出错。

不是问题的一部分，而是一些建议......

我意识到您正在使用jQuery 的*某些部分*，但是该库还可以使选择和迭代元素集合变得更简单，例如，而不是

```
var NumberSpans = document.getElementsByTagName('span');

for (var i=0; i < NumberSpans.length; i++) {
    // do things
} 
```

你可以使用jQuery的[`.each()`](http://api.jquery.com/each/)功能

```
$('.changeparam a').each(function(k, v) { // select all `a` with ancestor class="changeparam"
    // here k = the index of each element so will be 0, 1, 2, 3, 4
    // and the v will be each element, i.e. the first <a>, second <a>, etc...
    console.log(k, v);
}); 
```

这可能会简化代码。*

# c# - 如何在 C# 中添加脏话过滤器

> ID：12532740
> 
> 赞同：0
> 
> 时间：2012-09-21T14:40:36.430
> 
> 标签：c#, .net, profanity

我有一个形成的评论列表。客户要求我们在评论发布之前使用亵渎过滤器来检查评论。我有一个 ProfanityFilter.cs 类。唯一的问题是我不确定如何将两者结合起来。

简而言之，如何让评论在发布之前点击过滤器。

提前致谢！

这是形成评论列表的代码：

```
public void ProcessRequest (HttpContext context) 
{

    // ****************************************
    if (context.Request["postform"] == "1")
    {

        videomessage myVideoMessage = new videomessage();

        myVideoMessage.video_id = context.Request["video_id"];
        myVideoMessage.first_name_submitter = context.Request["first_name_submitter"];
        myVideoMessage.last_initial_submitter = context.Request["last_initial_submitter"];
        myVideoMessage.message = context.Request["message"];
        myVideoMessage.status = "0";

        myVideoMessage.Save();
    }
    // ****************************************

    // ****************************************
    StringBuilder myStringBuilder = new StringBuilder();

    // PULL VIDEOMESSAGES FOR VIDEO_ID
    videomessage[] myCommentsList = new videomessage().Listing("video_id", context.Request["video_id"], "entry_date" , "DESC");

    // FORM COMMENTS IF MORE THAN ONE COMMENT EXISTS
    foreach (videomessage tmpMessage in myCommentsList)
    {
        if (tmpMessage.status == "0" || tmpMessage.status == "1")
        {
            myStringBuilder.Append("<div class=\"comment_box\">");
            myStringBuilder.Append("<p class=\"comment_date\">");
            myStringBuilder.Append(Utility.FormatShortDate(tmpMessage.entry_date) + " " + tmpMessage.first_name_submitter + " " + tmpMessage.last_initial_submitter + "." + "</p>");

            if (!String.IsNullOrEmpty(tmpMessage.message))
            {
                myStringBuilder.Append("<p>" + tmpMessage.message + "</p>");
                myStringBuilder.Append("</div>");
            }
        }
    }
    string return_str = myStringBuilder.ToString();

    // IF NO COMMENTS RETURN THIS
    if( String.IsNullOrEmpty(return_str) )  return_str = "<p>No comments currently exist for this video.</p>";
    // ****************************************

    // RETURN STRING        
    context.Response.ContentType = "text/plain";
    context.Response.Write(return_str);
} 
```

这是过滤器：

```
public class ProfanityFilter
{        
    // METHOD: containsProfanity
    public bool containsProfanity(string checkStr)
    {
        bool badwordpresent = false;

        string[] inStrArray = checkStr.Split(new char[] { ' ' });

        string[] words = this.profanityArray();

        // LOOP THROUGH WORDS IN MESSAGE
        for (int x = 0; x < inStrArray.Length; x++)
        {
            // LOOP THROUGH PROFANITY WORDS
            for (int i = 0; i < words.Length; i++)
            {
                // IF WORD IS PROFANITY, SET FLAG AND BREAK OUT OF LOOP
                //if (inStrArray[x].toString().toLowerCase().equals(words[i]))
                if( inStrArray[x].ToLower() == words[i].ToLower() )
                {
                    badwordpresent = true;
                    break;
                }
            }
            // IF FLAG IS SET, BREAK OUT OF OUTER LOOP
            if (badwordpresent == true) break;
        }

        return badwordpresent;
    }
    // ************************************************************************

    // ************************************************************************
    // METHOD: profanityArray()
    // METHOD OF PROFANITY WORDS
    private string[] profanityArray()
    {

        // THESE WERE UPDATED TO USE THE SAME BADWORDS FROM FACESOFMBCFBAPP
        string[] words = {//words in the array}
}
return words;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T14:47:55.787

检查这些问题：

*   [任何用于网站的开源/免费 .NET 亵渎过滤器？](https://stackoverflow.com/questions/6788868/any-open-source-free-net-profanity-filter-for-website)
*   [在 C# 中解析“坏”字的字符串的最佳方法是什么？](https://stackoverflow.com/questions/3209580/whats-the-best-way-to-parse-a-string-for-bad-words-in-c)
*   [你如何实现一个好的亵渎过滤器？](https://stackoverflow.com/questions/273516/how-do-you-implement-a-good-profanity-filter)

我建议阅读最后一个问题的已接受答案和[CodingHorror](http://www.codinghorror.com/blog/2008/10/obscenity-filters-bad-idea-or-incredibly-intercoursing-bad-idea.html)博客文章。虽然 OP 要求提供 PHP 解决方案，但您可能希望在阅读这些解决方案后考虑另一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:46:47.710

添加后`string return_str = myStringBuilder.ToString();`：

```
ProfanityFilter filter = new ProfanityFilter();

if (filter.ContainsProfanity(return_str)
{
    // Do action when message contains profanity
}
else
{
    // Do action when message does not contains profanity     
} 
```

还要记住，您的代码没有考虑换行符（我不知道注释是否不能有换行符，以防万一）。

# c# - 项目模板工具箱中的自定义 ASP.NET 服务器控件

> ID：12532749
> 
> 赞同：1
> 
> 时间：2012-09-21T14:41:20.080
> 
> 标签：c#, asp.net, visual-studio-2010

我开发了一些自定义的 asp 服务器控件，它们都按我的需要工作。

我现在希望在 Visual Studio 中创建一个包含这些自定义控件的项目模板。我遇到的问题是将它们添加到工具箱中。

该模板包含对自定义控件 dll 的引用，它们已在适当的页面中注册 - 但它们不会出现在工具箱中。

是否可以在 Visual Studio 工具箱中自动包含控件，以便用户可以将它们拖放到表单上？如果我通过对它们进行编码将它们输入到源视图中，它们可以正常工作并出现在设计视图中，但我需要拖放功能。最好不必右键单击>>选择项目

谢谢

# python - 检查文件是 SSH 私钥还是公钥

> ID：12532750
> 
> 赞同：1
> 
> 时间：2012-09-21T14:41:29.393
> 
> 标签：python, ssh-keys

我有一个用 Python 编写的工具，它可以获取文件的路径。我想检查它是 SSH 私钥还是公钥（如果两者都不是，请忽略）。我不确定如何务实地检查文件是否是其中之一。Python中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:57:48.813

这些键有许多复杂的形式。很难区分它们。

有

*   公钥由一行组成，其格式根据您是否拥有 RSA、DSA 或版本 1 密钥而有所不同。
*   与 OpenSSH 兼容的私钥。他们从

    ```
    -----BEGIN RSA PRIVATE KEY----- 
    ```

    并以

    ```
    -----END RSA PRIVATE KEY----- 
    ```

    （前提是它是 RSA 密钥），DSA 或版本 1 的其他字符串。

*   SSH.COM 和 PuTTY 有另一种不同的格式。

祝你好运！

也许你可以说服`ssh-keygen`为你做这份工作......

# php - Heroku JSON REST API 的 PHP 示例？

> ID：12532757
> 
> 赞同：1
> 
> 时间：2012-09-21T14:41:45.157
> 
> 标签：php, json, heroku

我正在尝试使用 REST API 获取应用程序进程状态，但在让它返回良好数据时遇到了一些麻烦

```
 $ch = curl_init( );

    curl_setopt( $ch, CURLOPT_URL, 'https://api.heroku.com');  // No clue what to put here. 
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt( $ch, CURLOPT_USERPWD, ":yesthisismyrealapikeyanditworks");   // trust me on this line :)
    curl_setopt( $ch, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json')); //total guess
    curl_setopt( $ch, CURLOPT_CUSTOMREQUEST, 'GET');
    curl_setopt( $ch, CURLOPT_POSTFIELDS, 'https://api.heroku.com/apps/myapp/ps');  // where myapp is actually my app name

    // Getting results
    return  curl_exec($ch); 
```

这没有返回任何有用的东西。我是 JSON 和 curl 的新手，所以请放轻松。谢谢。

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:49:59.637

```
$ch = curl_init( );
curl_setopt( $ch, CURLOPT_URL, 'https://api.heroku.com/apps/myapp/ps');
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt( $ch, CURLOPT_USERPWD, ":yesthisismyrealapikeyanditworks");
return  curl_exec($ch); 
```

# c++ - 在编译时构造对象并存储在可执行文件中？

> ID：12532761
> 
> 赞同：0
> 
> 时间：2012-09-21T14:42:01.283
> 
> 标签：c++

假设我有一个在每个程序运行时构建大约需要 30 秒的对象。每次运行程序时，都会使用相同的数据构建此对象。这个问题有哪些解决方案？

编辑：

我针对我的问题的更具体版本进行了一些研究。特别是，我想用一些值填充哈希表。我发现[http://www.gnu.org/software/gperf/](http://www.gnu.org/software/gperf/)解决了这个确切的问题。gperf 生成一个完美的散列函数和相关联的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:46:19.277

C++11 引入了“常量表达式”的扩展概念，您可以通过`constexpr`关键字将其赋予对象：

```
constexpr int a = 12;      // constant expression

constexpr int f(int n) { return a * n; }

constexpr int b = f(a);    // also constant expression 
```

对象也可以声明构造函数`constexpr`。函数限定为常量表达式的规则非常严格，但是如果您能够构建这样的对象，那么作为常量表达式的全局对象确实可以在编译时计算和存储。它们算作“静态初始化”（基本上是在程序启动*之前初始化）。*

在 C++11 之前，只有最简单的原始类型才有资格进行这种处理。

任何需要动态分配的东西都不能是一个常量表达式，所以没有希望像全局`std::map`静态初始化这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:45:58.757

您的问题没有通用的解决方案。您将需要分析您的对象以确定在这 30 秒内创建了什么，并找到某种方式来表示特定数据，而无需进行大量计算。

一旦您了解了如何在不计算的情况下重现特定数据，您就可以轻松地将其序列化到您喜欢的任何存储空间（包括临时存储空间，以便稍后添加到您的编译对象中）。从那里开始，将其反序列化回您的对象应该不是一项艰巨的任务。

当然，这假设您的对象没有使用动态资源（打开的文件、套接字、内存分配等）。你不能序列化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:46:41.460

考虑如何以另一种方式表示对象。例如，如果它是您生成的多层图像，您可能只是加载一个完全合成的图像，而不是每次运行时都生成它。

# javascript - 这是防止用户下载文件时出现 IE8 安全横幅的最佳方法吗？

> ID：12532772
> 
> 赞同：1
> 
> 时间：2012-09-21T14:42:51.983
> 
> 标签：javascript, html, internet-explorer-8, download, security

我将 iframe 的 src 属性设置为下载 url，然后使用 appendChild 将 iframe 添加到页面正文以触发下载。如果下载的 url 是完全合格的，即“http://example.abc.com/download/”，那么下载将触发安全栏。如果 URL 是“http://example/download/”，则下载会在没有安全栏的情况下进行。

有人可以解释这是如何以及为什么会发生的吗？我知道当页面尝试从与页面 url 不同的 url 下载文件时，IE8 会引发安全栏，但我认为它不会这么挑剔。此外，当前页面 url 是完全合格的，所以我认为我得到的结果会被逆转。

为了避免安全横幅，只删除整个域的一部分是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:34:32.600

避免安全警告的最简单方法是在新窗口中打开下载 URL 而不是`<iframe>`.

例如：

### HTML：

```
<a href='//www.example.com/your_download' onclick='init_download(this.href);return false' target='_blank'>Test</a> 
```

### JavaScript

```
function init_download(link) {
    window.open(link, '_blank', 'toolbar=0,location=no,directories=0,status=0,scrollbars=0,resizeable=0,width=1,height=1,top=0,left=0');
    window.focus();
} 
```

↪[在 JS Bin 查看这个例子](http://jsbin.com/ranixo/1/)

# android - 控制台中显示的模拟器无限错误 [Android]

> ID：12532778
> 
> 赞同：1
> 
> 时间：2012-09-21T14:43:08.253
> 
> 标签：android, eclipse, emulation

我是 Android 新手，我的团队目前正在开发一款游戏。游戏包括 AndEngine 库。我在 Eclipse Indigo 中运行它。我的 AVD 有一个 GPU 仿真。当我运行我们的项目时，模拟器出现了，但在屏幕上，它全是白色的。当我查看控制台时，我看到了无限错误，并在我关闭模拟器时停止。请帮忙！

```
[2012-09-21 22:30:45 - zombieannihilation_AR] ------------------------------
[2012-09-21 22:30:45 - zombieannihilation_AR] Android Launch!
[2012-09-21 22:30:45 - zombieannihilation_AR] adb is running normally.
[2012-09-21 22:30:45 - zombieannihilation_AR] Performing com.example.zombieannihilation_ar.Zombie_Annihilation activity launch
[2012-09-21 22:30:45 - zombieannihilation_AR] Automatic Target Mode: Preferred AVD 'Zombie' is not available. Launching new emulator.
[2012-09-21 22:30:45 - zombieannihilation_AR] Launching a new emulator with Virtual Device 'Zombie'
[2012-09-21 22:31:03 - Emulator] emulator: WARNING: Requested RAM size of 512MB is too large for your environment, and is reduced to 384MB.
[2012-09-21 22:31:09 - Emulator] creating window 28 27 240 400
[2012-09-21 22:31:09 - zombieannihilation_AR] New emulator found: emulator-5554
[2012-09-21 22:31:09 - zombieannihilation_AR] Waiting for HOME ('android.process.acore') to be launched...
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:15 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:21 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:25 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:33 - zombieannihilation_AR] emulator-5554 disconnected! Cancelling 'com.example.zombieannihilation_ar.Zombie_Annihilation activity launch'!
[2012-09-21 22:32:33 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glGenFramebuffersOES:1938 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glFramebufferTexture2DOES:1958 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glCheckFramebufferStatusOES:1951 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glBindFramebufferOES:1913 error 0x502
[2012-09-21 22:32:35 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_CM/GLEScmImp.cpp:glDeleteFramebuffersOES:1929 error 0x502
[2012-09-21 22:32:35 - Emulator] Error accepting connection, aborting 
```

这些是一些错误。我需要你的帮助，我急需运行我们的项目。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:48:21.867

似乎选择的模拟器不支持 GLES ？0x502 = GL_INVALID_OPERATION。确定你有正确的模拟器？-> 首选 AVD 'Zombie' 不可用。

# wix - 从 Wix Bootstrapper Bundle 检查文件版本

> ID：12532780
> 
> 赞同：0
> 
> 时间：2012-09-21T14:43:14.743
> 
> 标签：wix, burn

我为我的 WIX 安装程序创建了一个引导程序应用程序。我捆绑的安装程序之一需要具有基于已安装文件版本的安装条件。我无权访问相关安装程序的源代码，因此我无法将条件放入该安装程序中。

我[在文档](http://wix.sourceforge.net/manual-wix3/check_the_version_number.htm)中找到了如何在 MSI 中创建基于文件版本的条件。()

我的问题是如何在引导程序项目中直接使用类似的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:25:16.227

使用 WixUtilExtension 中的 FileSearch 将文件版本获取到 Burn 变量中。您可以在包的 InstallCondition 中使用 Burn 变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-26T14:11:38.573

正如 Bob Arnson 所说，您可以像这样在引导项目中获得一个版本

```
<util:FileSearch  
        Id="CheckVer"
        Path="[CommonFilesFolder]\xyz\xyz\abc.dll"
        Variable="FILEVERSION" 
        Result="version" /> 
```

FILEVERSION 将包含 dll 或 exe 的版本。如文档 [FileSearch Element中所述](http://wixtoolset.org/documentation/manual/v3/xsd/util/filesearch.html)

# sql - 查询每天的数据平均值

> ID：12532782
> 
> 赞同：0
> 
> 时间：2012-09-21T14:43:17.473
> 
> 标签：sql, tsql

我想知道八月每个日期的平均数据数量。

**例子**

```
31-08 - 2 registers
30-08 - 3 registers 
```

我尝试了以下查询，但没有成功

```
SELECT AVG(ROW_NUMBER() over (order by Chave_ID desc)), DATEPART(day, datahora) 
from San_Chave 
where DATEPART(month, datahora) = 8 
group by DATEPART(day, datahora), Chave_ID
order by DATEPART(day, datahora)  desc 
```

DataHora 是`DateTime`类型，而 Chave_Id 是`Primary Key`，但数字不是按逻辑顺序排列的，所以我尝试使用`ROW_NUMBER()`函数

有人可以帮助我吗？

**我想要的输出**

```
MONTH  DAY    REGISTER
8      31     10
8      30     9
8      29     1 
```

**桌子**

要进行查询，我认为只需要`Chave_Id`and `DataHora`，`Chave_id`将是寄存器的数量

```
CREATE TABLE [dbo].[San_Chave](
    [Chave_Id] [int] IDENTITY(1,1) NOT NULL,
    [Usuario_Id] [int] NULL,
    [Credenciada_Id] [int] NULL,
    [Usuario_Id_Responsavel] [int] NULL,
    [DataHora] [datetime] NULL,
    [Transacao] [int] NULL,
    [Cliente_Id] [int] NULL,
    [DataHoraPegou] [datetime] NULL,
    [DataHoraDevolverPrevisao] [datetime] NULL,
    [DataHoraEntregou] [datetime] NULL,
    [HorasDevolucao] [int] NULL,
    [NomeResponsavel] [varchar](130) NULL,
    [CpfResponsavel] [varchar](20) NULL,
    [RgResponsavel] [varchar](20) NULL,
    [TelResponsavel] [varchar](15) NULL,
    [Tel2Responsavel] [varchar](15) NULL,
    [Endereco] [varchar](300) NULL,
    [Devolvido] [bit] NULL,
    [TextoDevolucao] [varchar](5000) NULL,
    [De] [int] NULL,
 CONSTRAINT [PK_San_Chave] PRIMARY KEY CLUSTERED 
(
    [Chave_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:46:42.547

猜测，没有看到你的架构：

```
select Year, Month, avg(Count) as DailyAvgPerMonth
from (
    select DATEPART(year, datahora) as Year, 
        DATEPART(month, datahora) as Month, 
        count(*) as Count
    from Save_Chave
    group by DATEPART(year, datahora), 
        DATEPART(month, datahora), 
        DATEPART(day, datahora)
) a
group by Year, Month 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:03:38.000

我认为这样的事情会给出所需的输出

```
SELECT  CAST(DataHora AS DATE) AS [Date],
        COUNT(Chave_ID) AS [Entries]
FROM    San_Chave
GROUP BY CAST(DataHora AS DATE)
ORDER BY [Date] 
```

# javascript - 如何访问外部添加的javascript文件本身的内容

> ID：12532783
> 
> 赞同：0
> 
> 时间：2012-09-21T14:43:27.817
> 
> 标签：javascript

这可能更像是一个假设或好奇的问题，但我相信可以有实际用途，所以请多多包涵。

如果我按如下方式添加一个 JavaScript 文件，`<Script src='myscript.js'></script>`是否有一种方法可以使用 JavaScript 访问内容 myscript.js，就像我们访问 DIV 元素的 innHTML 一样？这可以在提供 HTML 和 JavaScript 在线教程的站点中使用（与 w3school 中的“自己尝试”类似的功能）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:45:08.880

为该文件向服务器发出 AJAX 请求会更容易。这将返回文件的内容，之后你可以做你喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:51:28.440

you can also do

```
 var a = document.getElementsByTagName("Script"); 
```

and handle it the same as the divs etc... You will still need the Ajax call though if the script tag refers to a js file than inline JS

# c++ - 本机 C++ 应用程序的 GUI 库

> ID：12532791
> 
> 赞同：2
> 
> 时间：2012-09-21T14:44:20.593
> 
> 标签：c++, windows, user-interface, mfc, native

我知道这个问题已经被问过了，但我希望有新的东西出现。

我在一个使用 MFC 作为 GUI 库的大型遗留应用程序的 UI 中工作。我们想要彻底刷新 UI，我正在寻找可以使用的 GUI 库。我想在 Android 中添加一些花哨的东西，比如列表/网格，用户可以在其中以非常自然的方式滚动。

有什么新东西吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:48:20.327

你应该看看 Qt 和 WxWidgets。两者都是跨平台的！两者都有其优点和缺点，但在这一刻都非常成熟。

Qt：http: [//qt-project.org/](http://qt-project.org/)。这个框架的设计模式非常漂亮，它有一个很好的、简单的信​​号/槽（回调）机制。

WxWidgets：[http](http://www.wxwidgets.org/) ://www.wxwidgets.org/ 。这个不是很熟悉，也许其他人可以提供更多关于WxWidgets结构的信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:22:56.923

并不是说我会推荐它也不反对它（因为它作为 UI 技术太新了），但至少值得一提的是 Windows 8/WinRT/（以前称为）“Metro”/现在“Windows Store 应用程序” " 是一个选项：

[http://msdn.microsoft.com/en-us/library/windows/apps/br229519.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br229519.aspx)

它允许使用 C++（或更好的专门为 WinRT 设计的 C++/CX 扩展的扩展）并创建本机非托管代码（与使用 C# 或 VB 创建基于 WinRT 的 .NET 框架子集的托管代码相反）。

WinRT 的可用 UI 组件当然允许“*在 Android 中添加花哨的东西，如用户可以以非常自然的方式滚动的列表/网格*”，也适用于 Windows 8 台式机和平板电脑。WinRT API 支持触摸和鼠标交互。

当您使用 C++ 时，用户界面是使用 XAML 创建的 - 与 WPF、Silverlight、Windows Phone 开发所使用的 XML 标记语言相同，但有一些差异，并且独立于 .NET 框架。

限制：使用 WinRT，您的应用程序只能在 Windows 8/Windows Server 2012（我希望是更高版本）下运行，但不能在早期的 Windows 版本下运行。

警告：尽管它是由负责 Windows 的 Microsoft 团队开发的，但它背后的强大开发能力预计会推动这项技术，但它是相当新的，可能还不够成熟，无法满足您的需求，或者不适合您正在构建的应用程序。这项新技术向前推进了一段时间。

# php - HTML：表单 onchange

> ID：12532792
> 
> 赞同：0
> 
> 时间：2012-09-21T14:44:29.023
> 
> 标签：php, javascript, html

我可以将 $_POST[] 从表单的 onchange 发送到这样的 javascript 函数吗

```
<select name="slct" onchange="rohan('measurement_conversion', <?php isset($_POST["slct"])?$_POST["slct"]:"nothing" ?>)"> 
```

如果没有，那么我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:46:33.810

您可以提交表单并在 onchange 事件中使用 javascript 进行回发：

[http://www.w3schools.com/jsref/met_form_submit.asp](http://www.w3schools.com/jsref/met_form_submit.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:22:56.710

看起来您基本上是在尝试通过根据一些 PHP 条件将其打印出来来设置 JavaScript 变量。你完全可以这样做，但看起来你想传递一个字符串，所以你需要用引号括起来。

您还应该做一些事情来清理该值，让某人通过在 URL 中添加一些内容来潜在地更改您的 HTML 是很危险的。

```
<select name="slct" onchange="rohan('measurement_conversion', '<?php isset($_POST["slct"])?$_POST["slct"]:"nothing" ?>')"> 
```

# javascript - 在字符串中查找整数

> ID：12532793
> 
> 赞同：1
> 
> 时间：2012-09-21T14:44:29.320
> 
> 标签：javascript, regex

我有：

```
var myclass = 'moreElements showAddElements-570';
var re = new RegExp('showAddElements\-\d*');
var m = re.exec(myclass);

alert(m[0]);
alert(m[1]); 
```

第一个警报导致*'showAddElements-'*，第二个警报导致*'undefined'*。我想得到'570'，我在这里做错了什么？如果我[测试](http://www.regular-expressions.info/javascriptexample.html)它，我至少会到达那里*'showAddElements-570'* ......我在这里做错了什么？

感谢任何提示！

Ps：我只想要'showAddElements-'之后的数字，所有其他数字都应该省略..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:46:41.647

只需使用正确的正则表达式：

```
var re = /showAddElements-(\d+)/; 
```

我删除了破折号之前的反斜杠（不需要），并在数字周围添加了括号以将其转换为捕获组 - 否则`m[1]`将始终是`undefined`.

[**看到它在行动**](http://jsfiddle.net/Shea4/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:47:25.073

您需要实际捕获所需的子模式：

```
/showAddElements-(\d*)/ 
```

请注意，您不需要转义`-`，因为它在字符类之外没有任何意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:49:49.863

这是一些有效的代码：

```
var myclass = 'moreElements showAddElements-570';
var re = new RegExp(/showAddElements\-(\d*)/);
var m = re.exec(myclass);
alert(m[1]); 
```

线路有两个问题`RegExp`。第一个问题是表达式是用单引号而不是斜杠包裹的。当我第一次意识到发生了什么时，这让我大吃一惊，不知道你可以用斜线包裹一些东西。如果没有这些，它只会被视为表达式的字符串意图。

`()`第二个问题是数字部分周围没有。你需要它来真正“抓住”那部分。

这是一个工作链接：http: [//jsfiddle.net/MvG2C/](http://jsfiddle.net/MvG2C/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:49:04.190

您必须在所需的类周围添加括号才能捕获它：

```
var re = new RegExp('showAddElements\-([0-9]*)'); 
```

# oracle10g - Oracle 10g 范围分区，间隔为 1 个月

> ID：12532795
> 
> 赞同：0
> 
> 时间：2012-09-21T14:44:32.200
> 
> 标签：oracle10g

我想在 10g 中以 1 个月的间隔对一个 txn 表进行分区。具有 txn_date 的表。

我希望分区是自动的。我认为这在 11 中是可能的，但有什么方法可以在 10g 中实现。

```
create table part
(
   txn_Date date
)
PARTITION BY RANGE (txn_date)
INTERVAL (NUMTOYMINTERVAL(1,'MONTH'))
(
   partition p1 values less than (TO_DATE('01-NOV-2007','DD-MON-YYYY'))
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:09:46.387

您可以安排作业在适当的时候添加这些分区。由于这是一个 DDL，这将使用动态 SQL 来完成。

例如。对于保存按月分区的数据的表，您可以在每个月的最后一个周末有一个工作，该工作会为下个月创建分区。

```
create or replace procedure p_part_maintenance_mnthy
as
declare
  v_partition_name all_tab_partitions.partition_name%type;
  v_limit varchar2(50);
begin

  select to_char(trunc(add_months(sysdate,1),'MM'),'MonYYYY')
    into v_partition_name 
    from dual; --eg. output Oct2012

  select to_char(trunc(add_months(sysdate,2),'MM'),'dd-mon-yyyy')
    into v_limit
    from dual; -- eg. output 01-nov-2012

execute immediate 'ALTER TABLE sales ADD PARTITION ' || v_partition_name ||
                   ' VALUES LESS THAN (' || v_limit || ') tablespace XYZ';

end;
/ 
```

通常，所有类似的函数调用，如上述（每日、每月和每年）都将放在一个包中，并将 table_name 作为输入。这些是根据需要从各个过程中调用的。

# iphone - 将两个文本字段相乘并在 iphone 中自动更新第三个

> ID：12532797
> 
> 赞同：1
> 
> 时间：2012-09-21T14:44:37.270
> 
> 标签：iphone, objective-c, uitextfield

如何将两个文本字段浮点值相乘并在 iphone 的第三个值中自动更新？

我收到警告：“距离”的本地声明隐藏了实例变量 $

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
    double distance = [self.distance.text doubleValue];
    double mileage = [self.mileagerate.text doubleValue];
     amount.text =  [NSString stringWithFormat:@"%.2f",distance * mileage];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:47:28.517

警告是因为您有一个名为 distance 的文本字段和一个名为 distance 的局部变量。重命名您的局部变量，警告应该消失：

```
-(void)textFieldDidEndEditing:(UITextField *)textField{
    double dist = [self.distance.text doubleValue];
    double mileage = [self.mileagerate.text doubleValue];
     amount.text =  [NSString stringWithFormat:@"%.2f",dist * mileage];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:49:10.193

您有一个名为`distance`. `distance`您还定义了一个在该方法中调用的局部变量。这就是你收到警告的原因。

我建议您重命名文本字段。通常最好将它们命名为实际名称。我会打电话给他们`distanceTextField`or `distanceField`and `mileageRateField`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:50:06.850

**关于警告 -**

```
self.distance //Global Variable
double distance //local variable 
```

这两个变量具有相同的名称，这就是您收到警告的原因，否则您的方法可以。

`return button`您可以通过更改变量名称来计算它以删除警告...

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
     double distance_local = [self.distance.text doubleValue];
     double mileage = [self.mileagerate.text doubleValue];
     double result = distance_local * mileage;
     amount.text =  [NSString stringWithFormat:@"%.2f",result];
     [textField resignFirstResponder]; 
     return YES;
} 
```

你也可以计算它

```
-(void)textFieldDidEndEditing:(UITextField *)textField 
```

方法，但在每种方法中，您都必须检查两者`textFields`的值是否为 not。

# symfony1 - 根据用户会话数据保存嵌入表单值

> ID：12532798
> 
> 赞同：0
> 
> 时间：2012-09-21T14:44:40.703
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我有一个包含许多嵌入式表单的表单，这些表单是选择列表。

我最理想的做法是保存选择列表值。

我可以使用以下方法获取表单值：

```
$this->form->getValues() 
```

var_dumping 上面给了我类似的东西：

```
 array
      'fields' => 
        array
          'Field' => 
            array
              'field' => string 'field' (length=7)
              'column' => int 0
              'id' => null
          'Field 1' => 
            array
              'field' => string 'field_1' (length=7)
              'column' => int 1
              'id' => null
          'Field 2' => 
            array
              'field' => string 'field_2' (length=19)
              'column' => int 10
              'id' => null
      'id' => string '51' (length=2) 
```

然后我在用户会话中设置了表单值：

```
$this->getUser()->getAttribute('something', $this->form->getValues()); 
```

我只是想知道如何根据这些保存的值设置选择列表？

谢谢

编辑：

在我`actions.class.php`的之后，我添加了以下内容`$this->form-save()`

```
$this->getUser()->setAttribute('user_fields', $this->form->getValues()); 
```

然后在`configure()`我的表单类的方法中，暗示使用：

```
 if ($savedValues = sfContext::getInstance()->getUser()->getAttribute('user_fields'))
    {
        $this->setDefaults($savedValues);
    } 
```

而且效果很好！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:19:42.220

在创建表单之后（`bind()`调用之前）的操作中，您可以执行以下操作：

```
$this->form = new YourForm();

if ($savedValues = $this->getUser()->getAttribute('something'))
{
  $this->form->setDefaults($savedValues);
}

// ... 
```

# ruby - 删除句子的第一个单词

> ID：12532800
> 
> 赞同：1
> 
> 时间：2012-09-21T14:44:45.810
> 
> 标签：ruby

我正在寻找一种方法来保留我句子中的所有单词，但第一个单词除外。我用红宝石做的：

```
 a = "toto titi tata"
    a.gsub(a.split[0]+' ','') 
```

=>“塔塔蒂蒂”

有更好的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:50:44.190

Use a regex.

```
a.gsub(/^\S­+\s+/, ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:56:50.470

这里有很多不错的解决方案。我认为这是一个体面的问题。（即使是作业或工作面试问题，仍然值得讨论）

# 这是我的两种方法

```
a = "toto titi tata"    
# 1\. split to array by space, then select from position 1 to the end
a.split
# gives you
  => ["toto", "titi", "tata"]
# and [1..-1] selects from 1 to the end to this will
a.split[1..-1].join(' ')

# 2\. split by space, and drop the first n elements
a.split.drop(1).join(' ')
# at first I thought this was 'drop at position n'
#but its not, so both of these are essentially the same, but the drop might read cleaner 
```

乍一看，所有解决方案似乎都基本相同，只是语法/可读性不同，但如果出现以下情况，您可能会采取一种或另一种方式：

1.  你有一个很长的字符串要处理
2.  您被要求在不同的位置放置单词
3.  您被要求将单词从一个位置移动到另一个位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:51:37.747

```
str = "toto titi tata"
p str[str.index(' ')+1 .. -1] #=> "titi tata" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T15:09:16.097

该方法不使用`gsub`，而是删除指定的部分。`slice!`

```
a = 'toto titi tata'
a.slice! /^\S+\s+/ # => toto (removed)
puts a             # => titi tata 
```

# regex - 正则表达式语法（一个特定的字符串 + 正则表达式）

> ID：12532801
> 
> 赞同：1
> 
> 时间：2012-09-21T14:44:45.920
> 
> 标签：regex

我有一个看起来像这样的正则表达式：

```
[RegularExpression(@"\d{2}[-zZ][a-zA-Z0-9]{6,7}[-a-zA-Z0-9]{2,3}[a-zA-Z0-9]?[a-zA-Z0-9]?", ErrorMessage = "Please enter a valid part number.")] 
```

这允许像这样的零件编号 07-287370-002 或 11-16D897-007。

我还希望正则表达式接受这个特定值：##-######-###

我不确定语法，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:48:19.800

`(A|B)`表示“接受字符串匹配表达式`A`或表达式”的正则表达式`B`。因此，你会这样做：

```
[RegularExpression(@"(##-######-###|\d{2}[-zZ][a-zA-Z0-9]{6,7}[-a-zA-Z0-9]{2,3}[a-zA-Z0-9]?[a-zA-Z0-9]?)", ErrorMessage = "Please enter a valid part number.")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:50:06.570

Try this:

```
[RegularExpression(@"\d{2}[-zZ][a-zA-Z0-9]{6,7}[-a-zA-Z0-9]{2,3}[a-zA-Z0-9]?[a-zA-Z0-9]|##-######-###?", ErrorMessage = "Please enter a valid part number.")] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:50:06.657

I would be say try this:

```
Pattern pattern = Pattern.compile("\d{2}[-zZ][a-zA-Z0-9]{6,7}[-a-zA-Z0-9]{2,3}[a-zA-Z0-9]?[a-zA-Z0-9]?;
String PI = "Enter sample part number here to check"
    Matcher matcher = pattern.matcher(PI);
    String partNumTemp = "";
    if(matcher.find()){
        partNumTemp = matcher.group();
        System.out.println(partNumTemp);

    }else{
        System.out.println("Did not work sorry");
    } 
```

# java - 我有一个需要类的 api 函数 - 我如何给它一个列表的类 ?

> ID：12532802
> 
> 赞同：2
> 
> 时间：2012-09-21T14:44:52.277
> 
> 标签：java

我正在使用`List.class`，因为`List<String>.class`是错误的。是否有获取参数化类的类的语法？

代码：

```
import java.util.List;
import org.apache.camel.Message;
...
    Message m = exchange.getIn();
    List<String> serviceIds = null;
    serviceIds = m.getHeader("serviceId", List.class); 
```

我当然更愿意：

```
 serviceIds = m.getHeader("serviceId", List<String>.class); 
```

如果标题中包含非字符串的列表，则确保 getHeader 将返回 null。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:48:22.197

你不能给它一个类 of `List<String>`，因为没有这样的类：`<String>`编译器在称为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)的过程中删除了类型 of ，给你留下了 pure `List`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T14:50:20.173

I'm not entirely sure I understand your question, but if you have a `List` parameterized with some class, eg:

`List<Cat> myCats = new ArrayList<Cat>();`

And you have some API method that you want to call:

`public static void doSomething(Class<T> clazz);`

And you're looking to provide that method with `Cat.class`, there is unfortunately no way to determine (at runtime) the parameterized class that is being contained in the `List`. This information is erased at runtime.

I believe your question may be a duplicate of this one, but don't hesitate to correct me if I'm mistaken:

[How to get the generic type at runtime?](https://stackoverflow.com/questions/3941384/how-to-get-the-generic-type-at-runtime)

# php - Javascript Fancybox 2关闭按钮/链接事件不起作用

> ID：12532805
> 
> 赞同：1
> 
> 时间：2012-09-21T14:45:07.363
> 
> 标签：php, javascript, wordpress, fancybox

我使用 Fancybox 2 创建了一个条款和条件弹出窗口，显示当用户登录到我们的 wordpress 网站时，从 div 标签中检索此内容并使用 php 从 wordpress 页面中查找正确的内容。他们需要点击一个接受按钮来继续并关闭弹出窗口，这个链接是在 div 标签内生成的。使用单独的 php 文件，他们的用户 id 被添加到一个表中，表明他们已经接受了 ts 和 cs。除接受按钮外，一切正常。当我单击接受链接时，窗口没有完全关闭，它停留在屏幕上，但是当我的表使用用户 ID 更新时触发了 onclose 事件。当我单击内容（包括链接）的任意位置时，我可以看到窗口快速进出。

这是我的代码

```
<a class="fancybox" href="test" style="display:none;">ddd</a>
        <div id="test" style="display:none;height:600;width:750px;">
                        <?php
        global $blog_id,$wpdb;
        // query the DB to retrieve the post 'termsofservice' from the localized sites posts table
        $tnc_notification = $wpdb->get_var( $wpdb->prepare( "select post_content from wp_posts where post_title='Terms & Conditions' and post_status='publish';" ) );
            echo "<p>TERMS and CONDITIONS have changed, please read the new terms and conditions.  By closing this window you automatically accept them</p>";

                    echo '<a href="javascript:jQuery.fancybox.close();">Accept </a> ';

                    echo "<p>".$tnc_notification."</p>";
        ?> 
```

```
<script type="text/javascript" language="javascript">
function callTNC(){
            jQuery(document).ready(function() {
                    jQuery("#test").fancybox({
                                                'closeBtn': false,
                                                'closeClick': false,
                                                'modal': true,
                                                'maxHeight': 600,
                                                'maxWidth': 750,
                                                afterClose : function (){
                                                    //add the user into the tnc accepted table
                                                    $.get("http://mysite.com/tncaccept.php");
                                                }
                    }).trigger('click');

            });
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:02:59.507

找到编辑解决方案：好的，我设法解决了这个问题。您必须在链接中创建一个引用，并在 jQuery(document).ready(function() 声明中拥有实际的关闭函数所以发生的事情是接受链接/按钮中的 javascript 没有正确调用fancybox close。

所以首先在接受链接/按钮中创建引用

```
echo '<a href="#" id="closeFancy">Accept</a> '; 
```

然后在fancybox声明/初始化中创建函数：

```
<script type="text/javascript" language="javascript">
function callTNC(){
            jQuery(document).ready(function() { 
                                            jQuery("#closeFancy").click(function(){
                                                jQuery.fancybox.close();
                                                return false;
                                            });
                    jQuery("#test").fancybox({
                                                'closeBtn': false,
                                                'closeClick': false,
                                                'modal': true,
                                                'maxHeight': 600,
                                                'maxWidth': 750,
                                                helpers   : { 
                                                    overlay : {closeClick: false} // prevents closing when clicking OUTSIDE fancybox 
                                                },

                                                afterClose : function (){
                                                    //add the user into the tnc accepted table
                                                    $.get("http://mysite.com/tncaccept.php");
                                                }
                    }).trigger('click');
                                            //$("#acceptClose").click(function(){
                                            //    $.fancybox.close();
                                            //    return false;
                                            //});
            });
} 
```

# talend - 有没有办法在 Talend 中引用当前项目名称？

> ID：12532806
> 
> 赞同：1
> 
> 时间：2012-09-21T14:45:07.650
> 
> 标签：talend

我正在建立一个 Talend 项目，我将用它作为未来许多项目的基础。如果作业运行成功或失败，我想发送一封通用电子邮件。我想在电子邮件主题和消息中动态包含项目名称。有没有办法从 Talend 项目中动态提取项目名称？如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:36:24.290

在“消息”字段中，您可以使用 projectName 变量。例如：

```
projectName + " finished." 
```

您也可以在消息文本区域中按 ctrl+空格，它会显示所有可用的变量和函数。

# java - 从 Eclipse 运行 Maven 应用程序的所有 Servlet 上的 ClassNotFoundException

> ID：12532810
> 
> 赞同：1
> 
> 时间：2012-09-21T14:45:23.640
> 
> 标签：java, eclipse, jsf, tomcat, maven

我意识到那里有类似的问题，但我不知所措。我有一个 Maven，JSF2 webapp，无论如何都不会在 Eclipse 中的 Tomcat 上运行。我已经尝试过许多人提到的 [“部署程序集”技巧](https://stackoverflow.com/questions/9973599/eclipse-maven-javaserver-faces-classnotfoundexception-startupservletcont)和“[构建路径技巧](https://stackoverflow.com/questions/10046421/maven-eclipse-tomcat-classnotfoundexception)”，但都不起作用。

我相信它与`C:\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps`. 这个目录模拟了当我将战争部署到同一个 tomcat 实例（包括所有属性文件、xhtml 文件和库）时所部署的内容。唯一的例外是我的战争包含 .class 文件，而源 .java 文件位于 wtpwebapps 中。直接部署到 tomcat 可以正常工作 - 找到并加载了所有 servlet。

在我得到有关 JSF2 安装的答案之前，并不是……当 Tomcat 尝试加载我的自定义 servlet 时，我遇到了错误。例如：

```
Sep 21, 2012 10:16:27 AM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /webapp threw load() exception
java.lang.ClassNotFoundException: com.webapp.ui.Log4JInitServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

在上面的堆栈中，Log4JInitServlet 类位于`...\wtpwebapps\webapp\WEB-INF\classes\com\webapp\ui\Log4JInitServlet.java`

一些细节：

*   日蚀朱诺
*   带有“org.eclipse.jst.web_core.feature 的 WTP 补丁”的 Eclipse WTP 3.4.0
*   Maven 3.0.3
*   雄猫 7.0.29
*   JSF - MyFaces 2.1.5
*   JDK - 1.7.0_05

作为最后的仅供参考，我已经尝试过旧版本的 Eclipse 以及旧版本的 Tomcat（回到 6）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:46:40.960

您不应该在 WEB-INF/classes 中有 .java 文件；这就是 .class 文件中编译的字节码所在的位置。

您的 Eclipse 项目应该在 /src 目录中有 .java 源文件。然后，您要求它将您编译的 .class 文件写入展开或打包的 WAR 文件及其 WEB-INF/classes 文件夹。

# c++ - 我应该如何使用X11、motif、DrawingArea和c++来设置DrawingArea(X,Y)坐标(0,0)

> ID：12532811
> 
> 赞同：3
> 
> 时间：2012-09-21T14:45:22.947
> 
> 标签：c++, x11, motif

我正在尝试使用 DrawingAreas，但事情并没有按我预期的方式工作。

```
#include <Xm/Xm.h>
#include <Xm/DrawingA.h>

main(int argc, char *argv[])
{
  Widget shell, workArea, box1;
  XtAppContext app;
  shell = XtVaAppInitialize(&app, "gp", NULL, 0, &argc, argv, NULL, XmNwidth, 500, XmNheight, 500, NULL);
  XtRealizeWidget(shell);

  workArea = XtCreateWidget("wa",xmDrawingAreaWidgetClass, shell, NULL, 0);
  XtVaSetValues(workArea, XmNbackground, 30000, NULL);

  box1 = XtCreateWidget("b1", xmDrawingAreaWidgetClass, workArea, NULL, 0);
  XtVaSetValues(box1, XmNx, 0, XmNy, 0, XmNwidth, 400, XmNheight, 400, NULL);

  XtManageChild(workArea);
  XtManageChild(box1);
  //XtAppMainLoop(app);
  XEvent event;
  Dimension x,y,w,h;
  while(1)
  {
    XtAppNextEvent(app, &event);
    if (event.type == EnterNotify)
    {
      XtVaGetValues(box1, XmNx, &x, XmNy, &y, XmNwidth, &w, XmNheight, &h, NULL);
      printf("(x,y,w,h) == (%d,%d,%d,%d)\n", x, y, w, h);
    }
    if (event.type == LeaveNotify)
    {
      XtVaSetValues(box1, XmNx, 0, XmNy, 0, XmNwidth, 400, XmNheight, 400, NULL);
      printf("tried to set (x,y,w,h) = (0,0,400,400)\n");
    }
    XtDispatchEvent(&event);
  }
} 
```

当我进入窗口并用指针离开窗口时，我得到输出：

```
(x,y,w,h) == (10,10,400,400)
(x,y,w,h) == (10,10,400,400)
tried to set (x,y,w,h) = (0,0,400,400)
tried to set (x,y,w,h) = (0,0,400,400)
(x,y,w,h) == (10,10,400,400)
(x,y,w,h) == (10,10,400,400)
tried to set (x,y,w,h) = (0,0,400,400)
tried to set (x,y,w,h) = (0,0,400,400) 
```

为什么 XtVaSetValues 不将 box1 设置为 (X,Y) = (0,0)？如何在窗口内的 (0,0) 处放置绘图区域？

我想出了答案，但没有提供它的声誉：

```
XtManageChild(box1);
XtUnmanageChild(box1);
XtVaSetValues(box1, XmNx, 0, XmNy, 0, XmNwidth, 400, XmNheight, 400, NULL);
XtMapWidget(box1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:43:41.833

看起来对 XtManageChild() 的调用正在调用父级的 change_managed 过程：

xtmanpage

为了将 (x,y) 设置为 (0,0)，我必须确保小部件不受管理：

```
XtManageChild(box1); // must be called once
XtUnmanageChild(box1); // unmanage to allow (0,0)
XtVaSetValues(box1, NmNx, 0, XmNy, 0, XmNwidth, 400, XmNheight, 400, NULL);
XtMapWidget(box1); // show the widget 
```

# c# - 如何抑制由我 无法更改的代码显示的对话框？

> ID：12532812
> 
> 赞同：9
> 
> 时间：2012-09-21T14:45:26.543
> 
> 标签：c#, .net, .net-4.0, com, messagebox

我有一个来自第 3 方的 Inproc COM 服务器。如果捕获特定类型的错误，我调用的函数之一将显示错误消息对话框。问题是我正在尝试批量处理数据，而我使用的数据源导致该错误对话框弹出很多。如果它生成了 1000 个对话框，这将不是问题，而是它会阻塞，并且该函数在您按 OK 之前不会返回。

![在此处输入图像描述](../Images/5c0153e7cd2813dbf5457930254c3964.png)

如何禁止显示对话框，或以编程方式按 OK？

这是调用堆栈的副本，​​因为它正在等待我按 OK

```
    [管理到本地转换]  
> System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(System.IntPtr dwComponentID, int reason, int pvLoopData) Line 2198 + 0x1e bytes C#
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(int reason, System.Windows.Forms.ApplicationContext context) Line 3422 + 0x1b bytes C#
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) Line 3306 + 0xc bytes C#
    System.Windows.Forms.dll!System.Windows.Forms.Application.Run(System.Windows.Forms.Form mainForm) 第 1495 行 + 0x31 字节 C#
    UniversalDataImporter.exe!UniversalDataImporter.Program.Main() 第 18 行 + 0x1d 字节 C#
    [本机到托管转换]  
    [管理到本地转换]  
    mscorlib.dll!System.AppDomain.ExecuteAssembly(string assemblyFile, System.Security.Policy.Evidence assemblySecurity, string[] args) 第 2023 行 + 0x18 字节 C#
    Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() + 0x27 字节  
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context(object state) Line 68 + 0x27 bytes C#
    mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) Line 581 + 0xd bytes C#
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) Line 530 + 0xd bytes C#
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) Line 519 + 0xe bytes C#
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() 第 105 行 + 0x20 字节 C#
    [本机到托管转换]  

```

我怀疑它会有所帮助（没有选项可以禁用消息框、要订阅的事件或函数的其他重载），但这里是调用代码。

```
for (int i = 1; i <= recordCount; i++)
{
    //If the dialog shows up the following line blocks till you press OK.
    var values = _comServer.GetValues(fileHandle, i); 

    sqlDataConsumer.LoadRow(values);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T18:30:15.030

消息框泵送消息循环。这是您可以利用的东西，它允许您使用 Control.BeginInvoke() 注入代码，该代码在消息框出现后立即运行。然后，您可以使用该代码找到对话窗口并关闭它。在您的项目中添加一个新类并粘贴以下代码：

```
using System;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

public class DialogCloser : IDisposable {
    public DialogCloser() {
        if (Application.OpenForms.Count == 0) throw new InvalidOperationException();
        Application.OpenForms[0].BeginInvoke(new Action(() => {
            // Enumerate windows to find dialogs
            if (cancelled) return;
            EnumThreadWndProc callback = new EnumThreadWndProc(checkWindow);
            EnumThreadWindows(GetCurrentThreadId(), callback, IntPtr.Zero);
            GC.KeepAlive(callback);
        }));
    }

    public void Dispose() {
        cancelled = true;
    }

    private static bool checkWindow(IntPtr hWnd, IntPtr lp) {
        // Checks if <hWnd> is a Windows dialog
        StringBuilder sb = new StringBuilder(260);
        GetClassName(hWnd, sb, sb.Capacity);
        if (sb.ToString() == "#32770") {
            // Close it by sending WM_CLOSE to the window
            SendMessage(hWnd, 0x0010, IntPtr.Zero, IntPtr.Zero);
        }
        return true;
    }

    private bool cancelled;

    // P/Invoke declarations
    private delegate bool EnumThreadWndProc(IntPtr hWnd, IntPtr lp);
    [DllImport("user32.dll")]
    private static extern bool EnumThreadWindows(int tid, EnumThreadWndProc callback, IntPtr lp);
    [DllImport("kernel32.dll")]
    private static extern int GetCurrentThreadId();
    [DllImport("user32.dll")]
    private static extern int GetClassName(IntPtr hWnd, StringBuilder buffer, int buflen);
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
} 
```

示例用法：

```
private void button1_Click(object sender, EventArgs e) {
    using (new DialogCloser()) {
        // Replace this with the call to the COM server method:
        MessageBox.Show("you never see this");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:02:13.533

首先，如果 COM 服务器本身可以在不让调用者因不希望的 UI 操作而失望的情况下进入模式，那肯定会更好。假设你不能改变第三方组件的行为，你仍然可以做的是挂钩消息处理和强制关闭消息框。

在第三方服务器上进行调用之前，您可以使用`SetWindowsHookEx`and安装消息挂钩，`WH_CALLWNDPROC`您的回调将能够监控消息。特别是您将能够发布消息、挂钩对话框的 WindowProc 等。当然包括以编程方式关闭消息框。

# postgresql - 这个 generate_series() 查询中的“sa”是什么意思

> ID：12532814
> 
> 赞同：4
> 
> 时间：2012-09-21T14:45:36.523
> 
> 标签：postgresql, generate-series

我正在尝试返回工作日，但我不明白`s.a`，`s(a)`在此查询中：

```
SELECT dia 
FROM (
    SELECT ('2012-08-01'::date + s.a * '1 day'::interval) AS dia
    FROM generate_series(0, '2012-08-31'::date - '2012-08-01'::date, 1) AS s(a)
) foo
WHERE EXTRACT(DOW FROM dia) BETWEEN 1 AND 5
EXCEPT
SELECT feriado_data FROM teste.feriado; 
```

有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:09:30.640

`s`in`s(a)`是为返回的集合提供的*表别名*`generate_series`，`a`in`s(a)`是为其唯一列提供的别名。

有关完整详细信息，请参阅[表表达式文档](https://www.postgresql.org/docs/current/static/queries-table-expressions.html)并滚动到“另一种形式的表别名为表的列提供临时名称”。

# visual-studio-2010 - 无法执行嵌套存储过程

> ID：12532818
> 
> 赞同：0
> 
> 时间：2012-09-21T14:45:42.640
> 
> 标签：visual-studio-2010, oracle, stored-procedures, odt

我正面临 PL/SQL 存储过程的问题。我有一个名为 sp1 的 SP，我使用 VS2010 的 ODT 将其部署到我的 oracle 架构中，并且我可以毫无问题地执行。当我尝试从部署之前已存在于架构中的另一个名为 sp2 的存储过程执行 sp1（我在 sp2 的主体中添加对 sp1 的调用并直接从同一架构调用 sp2）时，问题就解决了。这样我得到的只是一个`ORA-01031 insufficient privileges`例外。

我google了一下，发现问题是由于声明中缺少该子句`AUTHID CURRENT_USER`所致`CREATE PROCEDURE`。我使用该子句在另一个包中创建了另一个名为 sp3 的存储过程，并在其中插入了对 sp1 的调用。通过此修改，执行工作。

```
create or replace procedure sp3(string param)
authid current_user
as 
begin
  sp1(param);
end; 
```

不幸的是，我不能接受这个解决方案，因为我必须使用已经存在的包（至少有 M 个应用程序使用 sp2 过程并且直接在每个应用程序中添加 sp3 或 sp1 显然是不可能的）。我对 oracle 服务器和客户端都使用版本 11。

有任何想法吗？

# android - Android是否有使用addView进行线性布局的ClickListener？

> ID：12532822
> 
> 赞同：3
> 
> 时间：2012-09-21T14:45:48.900
> 
> 标签：android, listview, android-linearlayout, pinterest

我正在尝试创建类似布局的 pinterest。我找到了一种方法来实现这一点：[Android 异构 gridview like pinterest?](https://stackoverflow.com/questions/11736658/android-heterogeneous-gridview-like-pinterest/) ！

但是问题是：我想在单击每张图片后查看项目详细信息。但是当我使用 LinearLayout.addView() 添加所有 ImageViews 时，我不确定如何让它可点击？

无论如何都可以单击视图上的每个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:55:04.130

您可以通过将标签信息添加到可以在单击时显示的图像视图中轻松地做到这一点。

添加您的图像视图如下所示：

```
ImageView iv = new ImageView(context);
iv.setOnClickListener(your_listener);
iv.setTag("Item information");
linearLayout.addView(iv); 
```

然后在你的点击监听器中：

```
public void onClick(View v) {
    if(v instanceof ImageView) {
        String info = (String)v.getTag();
        /* Show information here */
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:57:01.353

用这个 ：

```
view.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // ADD your action here

            }
        }); 
```

或者让你的类实现`OnClickListner`接口并覆盖`onClick()`方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:32:01.793

利用：

```
imageView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //do magic
        }
    }); 
```

并在您的布局文件中将 ImageView 标记为可点击：

```
<ImageView
...
android:clickable="true">
...
</ImageView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:55:21.763

在您链接的代码的基础上，您可以在创建每个图像视图时为其添加一个侦听器：

```
linear1 = (LinearLayout) findViewById(R.id.linear1);
linear2 = (LinearLayout) findViewById(R.id.linear2);
linear3 = (LinearLayout) findViewById(R.id.linear3);

for(int i=0;i<n;i++)
{
   ImageView iv = new ImageView(this);
   iv.setImageResource(R.id.icon);
   iv.setOnClickListener(new OnClickListener() {
       public void onClick(View v) {
           //Your click code
       }
   }

   int j = count % 3;  <---- 
   if(j==0)
       linear1.addView(iv);
   else if(j==1)
       linear2.addView(iv);
   else
       linear3.addView(iv); 
} 
```

# c#-4.0 - xdocument.add 中的 foreach

> ID：12532826
> 
> 赞同：0
> 
> 时间：2012-09-21T14:46:13.533
> 
> 标签：c#-4.0, linq-to-xml

我有一个有字典字段的类。我想遍历这个类的每个项目并创建一个 xml 文档，但在这个循环中我想遍历这个字典属性并添加键值对。

我正在寻找可以执行以下操作的东西

```
foreach(Book bk in query)
{
    ReturnData.Descendants("Books")
              .FirstOrDefault().Add(new XElement("Book",
                                        new XElement("Name", bk.BookName),
                                        new XElement("Measure", bk.Measure,
                                        .foreach(KeyValuePair<string, double> measure in bk.NewMeasures)
                                        {
                                            new XElement(measure.Key,measure.Value)
                                        },
                                        new XElement("Value", bk.PreviousValue))));
} 
```

返回数据已经包含一些 XML，这就是我添加到 Books 后代的原因。它可能已经有其他根源，例如视频、游戏等。

感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T15:30:34.407

首先，我会查询循环外的第一*本书：*

```
var book = ReturnData.Descendants("Books").FirstOrDefault(); 
```

然后在循环中使用它：

```
foreach(var b in query)
{
    book.Add(new XElement("Book",
                 new XElement("Name", b.Name),
                 new XElement("Measure", b.Measure,
                     from m in b.NewMeasures select new XElement(m.Key, m.Value)),
                 new XElement("Value", b.Value)));
} 
```

# java - 在 JSP 编译期间防止 javascript 函数中的字符串连接

> ID：12532827
> 
> 赞同：1
> 
> 时间：2012-09-21T14:46:15.297
> 
> 标签：java, javascript, jsp

```
var result = null;

function setSendButton(userInput){
   var clicked=userInput;
   result = "<%=mb.myMethod(clicked)%>";
} 
```

`myMethod`通过使用 jsp 标签调用的 java 方法在哪里。它被定义为：

```
public boolean myMethod(String isClicked){
  if(isClicked.equals("true")){
     return true;
  }else{
     return false;
  }
} 
```

由于某种原因，我得到了一个 JSP 编译错误，它编译了`var clicked`未传递“true”值的代码，并`clicked`在 JSP 编译期间变成了一个字符串，如下所示：`mb.myMethod(clicked)`而不是`mb.myMethod("true")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:01:28.720

它不能那样工作。JSP 中的 Java 代码在发送到客户端浏览器之前在服务器端进行翻译和编译。只有在将 JSP 翻译并编译为 HTML 文件并发送到客户端浏览器后，javascript 变量才可用。那时， The`mb.myMethod`已经在服务器端执行了。

简而言之，您可以将 java 代码传递给 js 赋值，但不能反过来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:52:40.657

这不行吗？

```
var result = null;

function setSendButton(){
   result = "<%=mb.myMethod(true)%>";
} 
```

# windows-7 - 为什么在迁移到 Windows 7 时 Excel 找不到我的系统 DSN？

> ID：12532836
> 
> 赞同：2
> 
> 时间：2012-09-21T14:46:36.943
> 
> 标签：windows-7, excel, odbc, vba

我有一个 VBA Excel 工作簿 (2007)，可以在我的 Windows XP 32 位机器上正常工作。它使用 ODBC 通过系统 DSN 连接到 PostgreSQL。我最近搬到了 64 位 Windows 7 机器并安装了驱动程序并构建了完全相同的系统 DSN，但我没有连接。

我看到很多关于使用 32 位 ODBC 工具构建 DSN 的参考资料，我想我已经做到了。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:51:32.390

You are using the 64 bit ODBC connector with (I'm presuming) 32 bit Office.

Use the ODBC connector at `C:\Windows\SysWOW64\odbcad32.exe` instead of the one inside your control panel to setup the System DSN and it will work. You will need to right click and select `Run as Administrator`.

# sql-server - 从字母数字字段中提取 6-8 位日期

> ID：12532839
> 
> 赞同：2
> 
> 时间：2012-09-21T14:46:40.173
> 
> 标签：sql-server, tsql, date, ssis

截图说明了一切。 [http://i46.tinypic.com/f3hobl.png](http://i46.tinypic.com/f3hobl.png)

在当前配置下，**InvoiceSentDate**仅接受 8 位日期 (MM-DD-YY)。我也希望能够捕获 MM-DD-YYYY 日期。我该怎么做呢？

为了比较，请查看发票 2106-2112 与 2116。

此外，使事情复杂化！一些记录在日期之后有文本。 [http://i50.tinypic.com/2r5qa88.png](http://i50.tinypic.com/2r5qa88.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:47:08.723

您可以在纯 T-SQL 中执行此操作。这是工作的[SqlFiddle](http://sqlfiddle.com/#!3/d41d8/4588)。

在这里，我找到日期，`patindex`然后找到之后的第一个非数字。这为您提供了`substring`单独提取日期所需的参数。如您所见，我添加了一些涵盖各种可能性的测试数据，包括斜线和破折号日期分隔符。

```
-- Test data
declare @Demo table (
    RawData varchar(100) null
)
insert into @Demo select 'JS sent via Unifier on 08/29/2012'
insert into @Demo select 'i sent via email on 09/07/12'
insert into @Demo select 'i sent via Unifier on 01/04/12; resubmitting p...'
insert into @Demo select 'JS sent via Unifier on 08-29-2012; resubmitting p...'
insert into @Demo select '08-29-2012; resubmitting p...'
insert into @Demo select '08-29-12'
insert into @Demo select 'no date here'
insert into @Demo select null

-- Actual query
select *,
    -- If there's a date, display it
    case when StartChar > 0 then substring(RawData, StartChar, DateLen) else null end as DateString 
from (
    select *,
        -- Find the first date
        patindex('%[0-1][0-9][/-][0-3][0-9][/-][0-9][0-9]%', RawData) as StartChar,
        -- Find the first non-digit after that date
        patindex(
            '%[^0-9]%', 
            right(
                RawData + '_', -- This underscore adds at least one non-digit to find
                len(RawData) - patindex('%[0-1][0-9][/-][0-3][0-9][/-][0-9][0-9]%', RawData) - 6
            )
        ) + 7 as DateLen
    from @Demo
) as a 
```

**更新**

如果您只是在寻找 2 种可能的日期格式，您可以通过检查它们来简化查询：

```
select *,
    -- If there's a date, display it
    case
        when StartChar1 > 0 then substring(RawData, StartChar1, 10)
        when StartChar2 > 0 then substring(RawData, StartChar2, 8)
        else null
    end as DateString 
from (
    select *,
        -- Find the first MM-DD-YYYY
        patindex('%[0-1][0-9][/-][0-3][0-9][/-][0-9][0-9][0-9][0-9]%', RawData) as StartChar1,
        -- Find the first MM-DD-YY
        patindex('%[0-1][0-9][/-][0-3][0-9][/-][0-9][0-9]%', RawData) as StartChar2
    from @Demo
) as a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:36:04.240

CndiedCode 链接中的示例非常接近您的需要。

只是略有不同的正则表达式匹配

N'^\d{3}-\d{2}-\d{4}$'
转到
N'\d{2}/\d{2}/\d{2,4}'

下面的代码看起来不同，因为必须转义 \

```
 if (Regex.IsMatch("sent on 01/01/10; ex", "\\d{2}/\\d{2}/\\d{2,4}"))
    {
        System.Diagnostics.Debug.WriteLine(Regex.Match("sent on 01/01/10; ex", "\\d{2}/\\d{2}/\\d{2,4}"));
    }
    if (Regex.IsMatch("sent on 01/01/2012; ex", "\\d{2}/\\d{2}/\\d{2,4}"))
    {
        System.Diagnostics.Debug.WriteLine(Regex.Match("sent on 01/01/2012; ex", "\\d{2}/\\d{2}/\\d{2,4}"));
    } 
```

# jquery - 如何在html页面上实现拖放菜单？

> ID：12532844
> 
> 赞同：0
> 
> 时间：2012-09-21T14:46:43.663
> 
> 标签：jquery, drag-and-drop

我从来没有做过这样的事情，所以我在猜测怎么做。

我必须实现一个包含两列的页面（html？jquery？php？）。第一列包含我想从一列拖放到另一列的元素（许多平方图像）。每个元素都有一个彼此不同的值，我想向用户展示完全达到的值，将第二列中的平方值相加。

只是为了解释我自己：第一列中的每个元素都是代表健身房中可用课程的图像。用户可以在第二列中拖入一门或多门课程，并且想要可视化健身房的每月总费用，具体取决于他决定学习的课程数量和课程（拖到第二列中的课程）。

我怎么能做这样的事情？我想我必须使用jquery ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:48:56.330

[jQuery UI 的 draggable()](http://jqueryui.com/demos/draggable/)将对此有所帮助。

如果为每个可拖动元素分配一个 data-cost 属性，则可以对 stop() 事件运行计算以求和第二列中元素的成本。

JQuery UI 有一点开销——特别是如果你使用提供的 CSS/图像文件——但你可以把它剥离很多，只包含你真正需要的东西。

[Sortable()](http://jqueryui.com/demos/sortable/#connect-lists)可能更接近您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:48:59.980

HTML5 具有原生拖放功能。

[http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

> 使对象可拖动很简单。在要使其可移动的元素上设置 draggable=true 属性。几乎任何东西都可以拖动，包括图像、链接、文件或其他 DOM 节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:49:56.420

You are going to want to customize this jQuery UI Droppable functionality: [http://jqueryui.com/demos/droppable/#visual-feedback](http://jqueryui.com/demos/droppable/#visual-feedback)

# android - 如何为 android 4.0 从 XML 解析特定属性

> ID：12532845
> 
> 赞同：0
> 
> 时间：2012-09-21T14:46:45.493
> 
> 标签：android, android-layout, android-intent

我想从 xml 访问特定属性，就像在这个例子中一样，有 2 个图像标签，但 2 个不同的属性，大小为小，大小为中，所以我如何访问中

```
<image size="small">http://userserve-ak.last.fm/serve/34/62210477.png</image><image size="medium">http://userserve-ak.last.fm/serve/64/62210477.png</image> 
```

我试过这个它适用于较低的android版本，但它不适用于4.0

```
XPathFactory xPathfactory = XPathFactory.newInstance();
        XPath xpath = xPathfactory.newXPath();
        try {
       expr = xpath.compile("//image[@size=\"large\"]");
      nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET); 
```

这是完整的代码

```
public class loadSomeStuff extends AsyncTask<Void, Void, String>
{
    XPathExpression expr;
    NodeList nl;
    int i;
    String name="test";

    @Override
    protected String doInBackground(Void... params) {
        // TODO Auto-generated method stub

        final String KEY_NAME = "name";
        final String KEY_IMAGE ="image";
        //final String KEY_COST = "cost";
        //final String KEY_DESC = "description";
        String URL = "http://ws.audioscrobbler.com/2.0/?method=artist.search&artist=enrique_iglesias&api_key=b25b959554ed76058ac220b7b2e0a026&limit=" + 1 + "&page=" + 1;
        XmlParser parser = new XmlParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element
        //XPathFactory xPathfactory = XPathFactory.newInstance();
        //XPath xpath = xPathfactory.newXPath();
        //try {
        //  expr = xpath.compile("//image[@size=\"large\"]");
            //nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
                    NodeList nl = doc.getElementsByTagName("artist");
             for (i = 0; i < nl.getLength(); i++) 
             {
                    Element e = (Element) nl.item(i);
                     name = parser.getValue(e, KEY_NAME);// name child value
                        image = parser.getValue(e, KEY_IMAGE);
                        System.out.print(image);
                        Log.v(image, "image url");
                        return image;
        } 

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

            URL thumb_u;
            try {
                thumb_u = new URL(result);
                  Drawable thumb_d = Drawable.createFromStream(thumb_u.openStream(), "src");
                  Toast toast = Toast.makeText(myActionbar.this, image, Toast.LENGTH_LONG);
                  toast.show();
                    icon.setImageDrawable(thumb_d);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

here is My Xmlparserfile in which my getvalue  and get elements are defined

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }
            // return DOM
        return doc;
}

public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}

public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
  } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:24:49.643

尝试这个：

```
 XMLParser parser = new XMLParser();
    String URL = "http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=akon&api_key=your_api_key";
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName("album");

    for (int i = 0; i < nl.getLength(); i++) {
        Element e = (Element) nl.item(i);
        Log.e("name", parser.getValue(e, "name"));
        NodeList k = e.getElementsByTagName("image");
        for (int j = 0; j < k.getLength(); j++) {
            Element e1 = (Element) k.item(j);
            if(e1.getAttribute("size").equals("large"))
            Log.e("ImageURL", parser.getValue(e1, "image"));
        }
    } 
```

# mysql - 如何通过 key 对 MySQL 进行分区和子分区？

> ID：12532850
> 
> 赞同：2
> 
> 时间：2012-09-21T14:47:19.540
> 
> 标签：mysql, database, database-partitioning

我想将分区添加到我的 innoDB 表中。我试图搜索这个语法，但没有找到细节。

这个语法错了吗？：

```
ALTER TABLE Product PARTITION BY HASH(catetoryID1) PARTITIONS 6
SUBPARTITION BY KEY(catetoryID2) SUBPARTITIONS 10; 
```

`SUBPARTITIONS 10`是说每个主分区有 10 个子分区，还是说所有主分区都有 10 个子分区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T07:03:20.400

奇怪的是你没有找到语法。MySQL 在线文档为最常见的操作列出了非常详细的语法。

在此处查看用于分区的 alter table 的整体语法：

[http://dev.mysql.com/doc/refman/5.5/en/create-table.html](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)

即使与 alter table 语句一起使用，分区管理的语法也将保持不变，在 MySQL 文档的 alter table 语法页面上列出了一些细微差别。

要回答您的第一个问题，问题不在于您的语法，而在于您正在尝试对首先通过哈希分区进行分区的表进行子分区 - 这是不允许的，至少在 MySQL 5.5 中是不允许的。只有 Range 或 List 分区可以进行子分区。

在此处查看分区类型的完整列表：

[http://dev.mysql.com/doc/refman/5.5/en/partitioning-types.html](http://dev.mysql.com/doc/refman/5.5/en/partitioning-types.html)

至于第二个问题，假设您尝试的方法可行，您将创建 6 个由 catetoryID1 散列的分区，然后在这些分区中，您将有 10 个由 catetoryID2 散列的子分区。所以你会有

```
6 x 10 = 60 partitions 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-11-26T04:55:09.340

经验法则：

*   `SUBPARTITION`没用。它没有提供速度，没有别的。
*   由于各种效率低下，分区不要超过 50 个左右。
*   `PARTITION BY RANGE`是唯一有用的。

通常 INDEX 可以提供比 PARTITION 更好的性能；让我们看看你的`SELECT`。

我关于分区的博客：http: [//mysql.rjweb.org/doc.php/partitionmaint](http://mysql.rjweb.org/doc.php/partitionmaint)

# iis - 如果 WebAppPool 不存在，如何安装失败？

> ID：12532858
> 
> 赞同：1
> 
> 时间：2012-09-21T14:47:48.630
> 
> 标签：iis, wix, application-pool

我使用以下 Wix 代码在 IIS 中创建 WebApplication 并将其分配给特定的应用程序池。

```
<iis:WebAppPool Id="AppPool_Wcf" Name="$(var.WCF_APP_POOL)" />

<iis:WebSite Id="Web_site" Description="$(var.WEB_SITE_DESCRIPTION)" SiteId="[SITEID]">
    <iis:WebAddress Id="Web_Address" Port="*"/>
</iis:WebSite>

<DirectoryRef Id="TARGETDIR">
    <Directory Id="SITEPATH">
        <Directory Id="WCF_VIRT_DIR" Name="$(var.WCF_VIRT_DIR)">
            <Component Id="IIS_Wcf" Guid="$(var.deploy.wcf.guid)" KeyPath="yes">
                <iis:WebVirtualDir Id="Wcf_VirtualDir" Alias="$(var.WCF_VIRT_DIR)" WebSite="Web_site" Directory="WCF_VIRT_DIR">
                    <iis:WebApplication Id="Wcf_Application" Name="$(var.WCF_VIRT_DIR)" WebAppPool="AppPool_Wcf" />
                </iis:WebVirtualDir>
            </Component>
        </Directory>
    </Directory>
</DirectoryRef> 
```

应用程序池应该已经存在，因为它与其他一些应用程序共享。

如果它不存在，则设置成功，将 Web 应用程序分配给一个神秘的`<Invalid Application Pool>`（可以在 Web 应用程序属性中看到）。该应用程序甚至可以工作！

如果找不到应用程序池，如何使安装失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T13:00:06.223

您必须为此创建一个即时自定义操作。例如，在 C#/DTF 中可以这样实现：

```
[CustomAction]
public static ActionResult FailIfAppPoolNotExist(Session session)
{
  DirectoryEntry appPool = new DirectoryEntry(string.Format("IIS://localhost/w3svc/AppPools/{0}", session["APP_POOL_NAME"]));

  if (appPool == null)
  {
    return ActionResult.Failure;
  }
  return ActionResult.Success;
} 
```

# nsfetchedresultscontroller - 使用 NSFetchedResultsController 时向 UITableView 添加自定义部分

> ID：12532863
> 
> 赞同：1
> 
> 时间：2012-09-21T14:48:09.633
> 
> 标签：nsfetchedresultscontroller, uitableview

我正在使用分组为部分的数据`NSFetchedResultsController`填充我的一个。`UITableView`现在我想在所有由不会被提取的数据创建的提取部分之上添加一个新部分（我正在为此创建一个额外的数组）。有没有一种很好的方法可以在不破坏所有良好`NSFetchedResultsController`行为的情况下插入该数组？

**更新**

到目前为止，我尝试的是手动调整`indexPath`. 当一个方法（即`-tableView:numbersOfRowsInSection`）被调用时，我会检查它是否是第一部分，如果是，我会从我的数组而不是`NSFetchedResultsController`. 如果没有，我只需`NSIndexPath`使用原始`indexPath`的行和部分 - 1 创建一个新的来访问`fetchedResults`. 这似乎是一种相当幼稚的方法。至少，这对我不起作用（还）。

谢谢！
-F

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:25:08.187

我创建了`UITableViewDataSource`一个混合了静态和动态部分的内容。我通过`NSIndexPath`按照您的计划进行修改来做到这一点。重要的是也修改 的`NSIndexPath`委托方法中的`NSFetchedResultsControllerDelegate`：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    indexPath = [NSIndexPath indexPathForRow:indexPath.row + 1 inSection:kSectionWithAdditionalRowIndex];
    if (newIndexPath) {
        newIndexPath = [NSIndexPath indexPathForRow:newIndexPath.row + 1 inSection:kSectionWithAdditionalRowIndex];
    }

    [super controller:controller didChangeObject:anObject atIndexPath:indexPath forChangeType:type newIndexPath:newIndexPath];
} 
```

该示例取自我的[CBUIFetchResultsDataSource.m](https://github.com/chbeer/CBUIKit/blob/master/Classes/CBUIFetchResultsDataSource.m)类的子类，它是`UITableViewDataSource`由`NSFetchedResultsController`. 我还必须覆盖`-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`,`-(id)objectAtIndexPath:(NSIndexPath*)indexPath`和`-(NSIndexPath*)indexPathForObject:(id)object`.

# c - C：stdout挂起linux管道

> ID：12532865
> 
> 赞同：3
> 
> 时间：2012-09-21T14:48:14.600
> 
> 标签：c, linux, bash, pipe

我用 C 语言编写了一个简单的 I/O 回显程序来测试一个更大的实际程序的问题。在这里，linux FD 重定向不起作用。

回显程序（又名`a.out`）是：

```
#include <stdio.h>

int main(int argc, char **argv) {
  char buff[10];
  while (1) {
    if (fgets(buff, 10, stdin) == NULL) break;
    printf("PRINT: %s \n", buff);
  }
} 
```

在 Bash 中，我将其运行为：

```
$ mkfifo IN OUT
$ # this is a method to keep the pipes IN and OUT opened over time
$ while :; do read; echo Read: $REPLY >&2; sleep 1; done <OUT >IN &
$ a.out >OUT <IN &

$ echo xyz >IN 
```

并且没有产生输出：Bash`while`循环无法从`OUT`.

* * *

让我们将这个 a.out 与 进行比较`cat`，它会按预期工作：

```
$ mkfifo IN OUT
$ while :; do read; echo Read: $REPLY >&2; sleep 1; done <OUT >IN &
$ cat >OUT <IN &

$ echo xyz >IN
Read: xyz 
```

最后一行在控制台上打印到标准错误。 `cat`的输出与 a.out 不同，它能够穿越`OUT`并到达 Bash`while`循环，然后在控制台上打印它。
a.out 有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:57:06.833

尝试添加`fflush(stdout)`之后`printf(...)`。

# javascript - 如何在javascript中将一个非常大的十六进制数转换为十进制

> ID：12532871
> 
> 赞同：16
> 
> 时间：2012-09-21T14:48:27.257
> 
> 标签：javascript, hex

我试图将一个非常大的十六进制数转换为十进制数，但没有取得多大成功。我的问题是，当我尝试转换 14 位以上的十六进制数字时，使用 deciaml = parseInt(hex, 16) 会给我数字错误。

我在 Java 中对此没有任何问题，但 Javascript 似乎在 14 位十六进制以上并不准确。

我试过“BigNumber”，但它给了我同样的错误结果。

我已尽我所能搜索网络，并找到了可以进行转换但无法弄清楚如何直接进行转换的网站。

我尝试依次获取每个字符并将其乘以它的因数，即 123456789abcdef 15 * Math.pow(16, 0) + 14 * Math.pow(16, 1)....等等，但我认为（作为菜鸟）我的子程序可能不是它们应有的全部，因为我得到了一个完全（我的意思是完全不同！）的答案。

如果它对你们有帮助，我可以发布我到目前为止所写的内容供你们查看，但我希望有人能为我提供简单的答案。

```
 <script>
   function Hex2decimal(hex){

   var stringLength = hex.length;
   var characterPosition = stringLength;
   var character;

   var hexChars = new Array();
   hexChars[0] = "0";
   hexChars[1] = "1";
   hexChars[2] = "2";
   hexChars[3] = "3";
   hexChars[4] = "4";
   hexChars[5] = "5";
   hexChars[6] = "6";
   hexChars[7] = "7";
   hexChars[8] = "8";
   hexChars[9] = "9";
   hexChars[10] = "a";
   hexChars[11] = "b";
   hexChars[12] = "c";
   hexChars[13] = "d";
   hexChars[14] = "e";
   hexChars[15] = "f";

   var index = 0;
   var hexChar;
   var result;

   //   document.writeln(hex);

while (characterPosition >= 0)
{
   //   document.writeln(characterPosition);
character = hex.charAt(characterPosition);

    while (index < hexChars.length)
    {
   //       document.writeln(index);
    document.writeln("String Character = " + character);
    hexChar = hexChars[index];
    document.writeln("Hex Character = " + hexChar);

        if (hexChar == character)
        {
        result = hexChar;
        document.writeln(result);
        }

    index++
    }

   //   document.write(character);
characterPosition--;
}

return result;
   }
   </script> 
```

谢谢你。

保罗

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T15:47:02.490

好的，让我们试试这个：

```
function h2d(s) {

    function add(x, y) {
        var c = 0, r = [];
        var x = x.split('').map(Number);
        var y = y.split('').map(Number);
        while(x.length || y.length) {
            var s = (x.pop() || 0) + (y.pop() || 0) + c;
            r.unshift(s < 10 ? s : s - 10); 
            c = s < 10 ? 0 : 1;
        }
        if(c) r.unshift(c);
        return r.join('');
    }

    var dec = '0';
    s.split('').forEach(function(chr) {
        var n = parseInt(chr, 16);
        for(var t = 8; t; t >>= 1) {
            dec = add(dec, dec);
            if(n & t) dec = add(dec, '1');
        }
    });
    return dec;
} 
```

测试：

```
t = 'dfae267ab6e87c62b10b476e0d70b06f8378802d21f34e7'
console.log(h2d(t)) 
```

印刷

```
342789023478234789127089427304981273408912349586345899239 
```

这是正确的（请随时验证）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-12-12T20:52:38.020

# 新的“n”简单方法

```
var hex = "7FDDDDDDDDDDDDDDDDDDDDDD";
if (hex.length % 2) { hex = '0' + hex; }

var bn = BigInt('0x' + hex);

var d = bn.toString(10); 
```

`BigInt`s 现在在大多数浏览器中都[可用](https://caniuse.com/?search=bigint)（IE 除外）。

在这个答案的前面：

*   [`BigInt`s 现在在 node.js 和 Chrome 中都可用。Firefox 不应该落后太多。](https://coolaj86.com/articles/native-bigints-have-arrived-in-chrome-and-node-js/)

如果您需要处理负数，则需要做一些工作：

*   [如何处理签名的 JS BigInts](https://coolaj86.com/articles/convert-hex-to-decimal-with-js-bigints/)

本质上：

```
function hexToBn(hex) {
  if (hex.length % 2) {
    hex = '0' + hex;
  }

  var highbyte = parseInt(hex.slice(0, 2), 16)
  var bn = BigInt('0x' + hex);

  if (0x80 & highbyte) {
    // You'd think `bn = ~bn;` would work... but it doesn't

    // manually perform two's compliment (flip bits, add one)
    // (because JS binary operators are incorrect for negatives)
    bn = BigInt('0b' + bn.toString(2).split('').map(function (i) {
      return '0' === i ? 1 : 0
    }).join('')) + BigInt(1);
    bn = -bn;
  }

  return bn;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:15:25.640

请注意，“0x”+“ff”将被视为 255，因此将您的十六进制值转换为字符串并在前面添加“0x”。

```
function Hex2decimal(hex)
{
    return ("0x" + hex) / 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-11T17:45:49.357

如果您对十六进制字符串使用“0x”表示法，请不要忘记添加`s = s.slice(2)`以删除“0x”前缀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T14:54:28.573

请记住，JavaScript 只有一个数字类型（双精度），并且不提供任何单独的整数类型。因此，它可能无法存储您的数字的精确表示。

为了获得准确的结果，您需要使用任意精度整数的库，例如[BigInt.js](http://www.leemon.com/crypto/BigInt.html)。例如，代码：

```
var x = str2bigInt("5061756c205768697465",16,1,1);
var s = bigInt2str(x, 10);
$('#output').text(s); 
```

正确转换`0x5061756c205768697465`为 的预期结果`379587113978081151906917`。

如果您想试验上面列出的代码，[这里是一个 jsfiddle。](http://jsfiddle.net/cuSQY/)

# c++ - 子集总和（硬币变化）

> ID：12532872
> 
> 赞同：0
> 
> 时间：2012-09-21T14:48:34.917
> 
> 标签：c++, algorithm

我的问题是，我需要计算有多少整数数组的组合总和为一个值`W`。`

让我们说：

```
int array[] = {1,2,3,4,5}; 
```

我的算法只是找到从`1`到的所有长度组合`W / minimum(array)`，这等于，`W`因为最小值为 1。如果每个组合的总和等于 W，则检查每个组合，然后增加一个计数器`N`。

任何其他算法来解决这个问题？应该更快:)

**更新：** 好的，子集问题和背包问题都很好，但我的问题是数组的组合重复了元素，像这样：

```
1,1,1 -> the 1st combination
1,1,2
1,1,3
1,1,4
1,1,5
1,2,2 -> this combination is 1,2,2, not 1,2,1 because we already have 1,1,2\. 
1,2,3
1,2,4
1,2,5
1,3,3 -> this combination is 1,3,3, not 1,3,1 because we already have 1,1,3\. 
1,3,4
.
.
1,5,5
2,2,2 -> this combination is 2,2,2, not 2,1,1 because we already have 1,1,2\. 
2,2,3
2,2,4
2,2,5
2,3,3 -> this combination is 2,3,3, not 2,3,1 because we already have 1,2,3.
.
.
5,5,5 -> Last combination 
```

这些都是`{1,2,3,4,5}`长度为 3 的组合。子集和问题给出了另一种我不感兴趣的组合。

所以总和的组合`W`，可以说`W = 7`，

```
2,5
1,1,5
1,3,3
2,2,3
1,1,2,3
1,2,2,2
1,1,1,1,3
1,1,1,2,2
1,1,1,1,1,2
1,1,1,1,1,1,1 
```

**更新：** 真正的问题是元素的重复`1,1,1`是需要的，并且生成的组合的顺序并不重要，因此与and`1,2,1`相同。`1,1,2``2,1,1`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T14:50:09.777

目前还没有有效的算法存在，而且可能永远不会存在（NP 完全问题）。

这是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的（一种变体） 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:44:14.063

这是[硬币找零问题](http://www.algorithmist.com/index.php/Coin_Change)。可以通过动态规划来解决，合理限制 W 和集合大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:13:58.617

这是解决此问题的 Go 代码。我相信它在 O(W / min(A)) 时间内运行。评论应该足以了解它是如何工作的。重要的细节是它可以多次使用 A 中的元素，但是一旦停止使用该元素，它将永远不会再次使用它。这避免了像 [1,2,1] 和 [1,1,2] 这样的重复计算。

```
package main

import (
  "fmt"
  "sort"
)

// This is just to keep track of how many times we hit ninjaHelper
var hits int = 0

// This is our way of indexing into our memo, so that we don't redo any
// calculations.
type memoPos struct {
  pos, sum int
}

func ninjaHelper(a []int, pos, sum, w int, memo map[memoPos]int64) int64 {
  // Count how many times we call this function.
  hits++

  // Check to see if we've already done this computation.
  if r, ok := memo[memoPos{pos, sum}]; ok {
    return r
  }

  // We got it, and we can't get more than one match this way, so return now.
  if sum == w {
    return 1
  }

  // Once we're over w we can't possibly succeed, so just bail out now.
  if sum > w {
    return 0
  }

  var ret int64 = 0
  // By only checking values at this position or later in the array we make
  // sure that we don't repeat ourselves.
  for i := pos; i < len(a); i++ {
    ret += ninjaHelper(a, i, sum+a[i], w, memo)
  }

  // Write down our answer in the memo so we don't have to do it later.
  memo[memoPos{pos, sum}] = ret
  return ret
}

func ninja(a []int, w int) int64 {
  // We reverse sort the array.  This doesn't change the complexity of
  // the algorithm, but by counting the larger numbers first we can hit our
  // target faster in a lot of cases, avoid a bit of work.
  sort.Ints(a)
  for i := 0; i < len(a)/2; i++ {
    a[i], a[len(a)-i-1] = a[len(a)-i-1], a[i]
  }
  return ninjaHelper(a, 0, 0, w, make(map[memoPos]int64))
}

func main() {
  a := []int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
  w := 1000
  fmt.Printf("%v, w=%d: %d\n", a, w, ninja(a, w))
  fmt.Printf("Hits: %v\n", hits)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:15:31.547

只是为了解决这个问题，这里有针对这个问题的递归和（非常简单的）动态编程解决方案。您可以通过使用更复杂的终止条件来减少递归解决方案的运行时间（但不是时间复杂度），但它的重点是展示逻辑。

我见过的许多动态规划解决方案都保留了整个 N x |c| 结果数组，但这不是必需的，因为行 i 可以仅从行 i-1 生成，而且它可以按从左到右的顺序生成，因此不需要进行复制。

我希望评论有助于解释逻辑。dp 解决方案足够快，以至于我找不到一个不会溢出很长一段时间的测试用例，这需要花费超过几毫秒的时间；例如：

```
$ time ./coins dp 1000000 1 2 3 4 5 6 7
3563762607322787603

real    0m0.024s
user    0m0.012s
sys     0m0.012s 
```

* * *

```
// Return the number of ways of generating the sum n from the
// elements of a container of positive integers.
// Note: This function will overflow the stack if an element
//       of the container is <= 0.
template<typename ITER>
long long count(int n, ITER begin, ITER end) {
  if (n == 0) return 1;
  else if (begin == end || n < 0) return 0;
  else return
      // combinations which don't use *begin
    count(n, begin + 1, end) +
      // use one (more) *begin.
    count(n - *begin, begin, end);
}

// Same thing, but uses O(n) storage and runs in O(n*|c|) time, 
// where |c| is the length of the container. This implementation falls
// directly out of the recursive one above, but processes the items
// in the reverse order; each time through the outer loop computes
// the combinations (for all possible sums <= n) for sum prefix of
// the container.
template<typename ITER>
long long count1(int n, ITER begin, ITER end) {
  std::vector<long long> v(n + 1, 0);
  v[0] = 1;
  // Initial state of v: v[0] is 1; v[i] is 0 for 1 <= i <= n.
  // Corresponds to the termination condition of the recursion.

  auto vbegin = v.begin();
  auto vend = v.end();
  for (auto here = begin; here != end; ++here) {
    int a = *here;
    if (a > 0 && a <= n) {
      auto in = vbegin;
      auto out = vbegin + a;
      // *in is count(n - a, begin, here).
      // *out is count(n, begin, here - 1).
      do *out++ += *in++; while (out != vend);
    }
  } 
  return v[n];
} 
```

# c# - 为绑定列表/跨线程和锁定问题异步添加值

> ID：12532877
> 
> 赞同：1
> 
> 时间：2012-09-21T14:48:58.797
> 
> 标签：c#, asynchronous, locking, multithreading

我有一个绑定到 datgridview 的 BindingList 数据。我用它来跟踪一些实时价格。各种线程每秒多次调用方法“update(Quote quote)”。如果 datagridview 不包含 Quote，则会添加它。如果是，则更新报价的值。我不希望相同的引号出现在 BindingList （或 GUI 上）两次，所以我尝试锁定检查值是否在列表中的操作。它不起作用！我究竟做错了什么？我尝试了两种不同的锁定方式，并且锁定在 String 对象上，而不仅仅是一个对象。问题肯定出在`BeginInvoke(new MethodInvoker(delegate() { activeQuotes.Insert(0, quote); }));`调用（这可能需要一些时间），但如果我进行同步，“添加”方法会引发“跨线程”错误。. . 我能做些什么来避免跨线程错误，但确保锁也可以工作？

```
public BindingList<Quote> activeQuotes = new BindingList<Quote>();
object lockObject = "lockObject";

dataGridViewActive.DataSource = activeQuotes;

public void update(Quote quote)
{
//lock (lockObject)
if(Monitor.TryEnter(lockObject))
{
try
   {
    if (!activeQuotes.Contains(quote))
    {
       try
       {
          activeQuotes.Add(quote);
          AddQuote(quote);
       }
       catch (Exception ex)
       {
          Console.WriteLine("Datagridview!!!!!!");
       }
     }
 else
 {
   int index = activeQuotes.IndexOf(quote);
   activeQuotes[index].Bid = quote.Bid;
   activeQuotes[index].Ask = quote.Ask;
   activeQuotes[index].Mid = quote.Mid;
   activeQuotes[index].Spread = quote.Spread;
   activeQuotes[index].Timestamp = quote.Timestamp;
}
finally
{
    Monitor.Exit(lockObject);
}
}

private void AddQuote(Quote quote)
{
     if (this.InvokeRequired)
     {
                BeginInvoke(new MethodInvoker(delegate() { activeQuotes.Insert(0, quote); }));
                BeginInvoke(new MethodInvoker(delegate() { dataGridViewActive.Refresh(); }));
                BeginInvoke(new MethodInvoker(delegate() { dataGridViewActive.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells); }));
    }
    else
    {
                activeQuotes.Add(quote);
                dataGridViewActive.Refresh();
                dataGridViewActive.AutoResizeColumns (DataGridViewAutoSizeColumnsMode.AllCells);
     }
} 
```

我很感激这方面的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:57:46.190

我之前写的这段代码会做

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        BindingListInvoked<Name> names;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            names = new BindingListInvoked<Name>(dataGridView1);

            dataGridView1.DataSource = names;

            new Thread(() => names.Add(new Name() { FirstName = "Larry", LastName = "Lan" })).Start();
            new Thread(() => names.Add(new Name() { FirstName = "Jessie", LastName = "Feng" })).Start();
        }
    }

    public class BindingListInvoked<T> : BindingList<T>
    {
        public BindingListInvoked() { }

        private ISynchronizeInvoke _invoke;
        public BindingListInvoked(ISynchronizeInvoke invoke) { _invoke = invoke; }
        public BindingListInvoked(IList<T> items) { this.DataSource = items; }
        delegate void ListChangedDelegate(ListChangedEventArgs e);

        protected override void OnListChanged(ListChangedEventArgs e)
        {

            if ((_invoke != null) && (_invoke.InvokeRequired))
            {
                IAsyncResult ar = _invoke.BeginInvoke(new ListChangedDelegate(base.OnListChanged), new object[] { e });
            }
            else
            {
                base.OnListChanged(e);
            }
        }
        public IList<T> DataSource
        {
            get
            {
                return this;
            }
            set
            {
                if (value != null)
                {
                    this.ClearItems();
                    RaiseListChangedEvents = false;

                    foreach (T item in value)
                    {
                        this.Add(item);
                    }
                    RaiseListChangedEvents = true;
                    OnListChanged(new ListChangedEventArgs(ListChangedType.Reset, -1));
                }
            }
        }
    }

    public class Name
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:51:29.807

我认为您应该将您的更改`BeginInvoke`为 just `Invoke`。您需要在 UI 线程上获取它，而不是开始异步操作。否则你的锁可能会在`BeginInvoke`目标被调用之前被释放，因为控制在调用时立即返回`BeginInvoke`。调用`Invoke`将在该调用上阻塞该线程，直到 Invoke 目标完成，然后将控制权返回给您的线程，这将确保保持锁定。

另外，您是否考虑过使用`lock`块而不是`Monitor`方法调用？它基本上是一样的，但阻止你需要 try/finally。我没有看到您正在使用任何重试或受益于`TryEnter`，但也许代码示例没有证明这一点。

# knockout-2.0 - KOLite 活动指标配置

> ID：12532880
> 
> 赞同：0
> 
> 时间：2012-09-21T14:49:04.363
> 
> 标签：knockout-2.0, kolite

我在一个项目中使用[KOLite](https://github.com/CodeSeven/KoLite)，并且一切正常。活动指示器在按钮内或小区域内完美运行。

我的问题是：有没有办法为每个绑定配置活动指示器？例如，在加载记录时在 div 中有一个大指示器会很好，等等。

我讨厌在某些地方使用不同的指标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:02:02.410

kolite 中的那个挂钩到您绑定到的控件中。但是，您可以为页面（或区域）创建自己的活动指示器，并连接代码以在您的 kolite 命令的已完成处理程序中打开和关闭它。它有点习惯，但这并没有错。

# php - 如何选择一组随机的行？

> ID：12532881
> 
> 赞同：0
> 
> 时间：2012-09-21T14:49:05.323
> 
> 标签：php, wordpress

如何选择一组随机的行

**重要的位：**

1.  我需要通过变量指定要选择的随机行数。
2.  比如说我要选择的行数是 10，那么它必须**选择**10 个**不同**的行。我不希望它在有 10 行之前多次选择同一行。

下面的代码选择了 1 个随机行，我如何根据上述规范对其进行调整？

```
<?php $rows = get_field('repeater_field_name');
$row_count = count($rows);
$i = rand(0, $row_count - 1);

echo $rows[$i]['sub_field_name']; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:54:15.617

```
<?php
    $rows = get_field('repeater_field_name');
    $row_count = count($rows);
    $rand_rows = array();

    for ($i = 0; $i < min($row_count, 10); $i++) {
        // Find an index we haven't used already (FYI - this will not scale
        // well for large $row_count...)
        $r = rand(0, $row_count - 1);
        while (array_search($r, $rand_rows) !== false) {
            $r = rand(0, $row_count - 1);
        }
        $rand_rows[] = $r;

        echo $rows[$r]['sub_field_name'];
    }
?> 
```

这是一个更好的实现：

```
<?
$rows_i_want = 10;
$rows = get_field('repeater_field_name');

// Pull out 10 random rows
$rand = array_rand($rows, min(count($rows), $rows_i_want));

// Shuffle the array
shuffle($rand);                                                                                                                     

foreach ($rand as $row) {
    echo $rows[$row]['sub_field_name'];
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:53:50.947

只需在随机行过程中循环您想要获得的随机行数。

```
<?php
$rows_to_get=10;
$rows = get_field('repeater_field_name');
$row_count = count($rows);
$x=0
while($x<$rows_to_get){
    echo $rows[rand(0, $row_count - 1)]['sub_field_name'];
    $x++;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:00:28.280

你可以试试这个

```
$rows = get_field('repeater_field_name');
var_dump(__myRand($rows, 10));

function __myRand($rows, $total = 1) {
    $rowCount = count($rows);
    $output = array();
    $x = 0;
    $i = mt_rand(0, $rowCount - 1);

    while ( $x < $total ) {
        if (array_key_exists($i, $output)) {
            $i = mt_rand(0, $rowCount - 1);
        } else {
            $output[$i] = $rows[$i]['sub_field_name'];
            $x ++;
        }
    }
    return $output ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:25:13.740

一个简单的解决方案：

```
$rows = get_field('repeater_field_name');
$limit = 10;

// build new array
$data = array();
foreach ($rows as $r) { $data[] = $r['sub_field_name']; }
shuffle($data);
$data = array_slice($data, 0, min(count($data), $limit));

foreach ($data as $val) {
  // do what you want
  echo $val;
} 
```

# ios - UITableViewStyleGrouped 在 iOS 6 中显示为普通

> ID：12532883
> 
> 赞同：6
> 
> 时间：2012-09-21T14:49:10.297
> 
> 标签：ios, uitableview, ios6

当使用 iOS 6 SDK 并在 iPhone 5.0 模拟器中运行我的应用程序时，我的 tableview 看起来就像一个分组样式的 tableview。但是，当我在 iPhone 6.0 模拟器中运行时，它显示为 UITableViewStylePlain 表视图。

有什么想法会导致这种奇怪的行为吗？除了 tableview 单元格内的 textview 之外，我在 tableview 中没有做任何太疯狂的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:25:37.083

我有一个使用以下代码在 iOS6 中正常工作的分组表视图：

```
tableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,self.bounds.size.width,self.bounds.size.height) style:UITableViewStyleGrouped];
[tableView setDataSource:self];
[tableView setDelegate:self]; 
```

您是使用界面生成器来创建这个分组的表格视图还是以编程方式创建它？iOS6 和之前创建的 interfacebuilder 视图似乎存在很多问题。

如果您使用 IB 来创建东西，您可以尝试在代码中重新创建 tableview（我知道冗余且无用，但它可能会显示问题所在）。

在您的 viewDidLoad() 函数中的某处放置

```
 if(tableView)
    {
        [tableView removeFromSuperview];
    }
    tableView = [[UITableView alloc] initWithFrame:tableView.frame style:UITableViewStyleGrouped];
    [tableView setDataSource:self];
    [tableView setDelegate:self];
    [self addSubview:tableView]; 
```

如果不使用 arc，这可能是糟糕的编码或导致内存泄漏，但看看你是否以这种方式获得分组样式会很有趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:56:24.373

这段代码为我解决了 ios6 分组表视图问题：

```
tableView.backgroundColor = [UIColor clearColor];
tableView.opaque = NO;
tableView.backgroundView = nil; 
```

# php - 如何使用 CakePHP 2.2 对用户进行身份验证？

> ID：12532884
> 
> 赞同：0
> 
> 时间：2012-09-21T14:49:10.283
> 
> 标签：php, authentication, cakephp-2.2

我已经阅读了[Authentication](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html) core library 的文档，但并不清楚如何使用它。它似乎假设了很多先验知识。

具体来说：

> 您可以使用 $this->Auth->authenticate 配置身份验证处理程序。您可以为身份验证配置一个或多个处理程序。使用多个处理程序允许您支持登录用户的不同方式。当登录用户时，身份验证处理程序按照声明的顺序进行检查。一旦一个处理程序能够识别用户，就不会检查其他处理程序。相反，您可以通过抛出异常来停止所有身份验证。您将需要捕获任何抛出的异常，并根据需要处理它们。
> 
> **您可以在控制器的 beforeFilter 或 $components 数组中配置身份验证处理程序**。您可以使用数组将配置信息传递到每个身份验证对象：

所以在我`PeopleController`的示例代码中我写了：

```
<?php
class PeopleController extends AppController {
    public $helpers = array('Html', 'Form');

    $this->Auth->authenticate = array(
        AuthComponent::ALL => array('userModel' => 'Member'),
        'Form',
        'Basic'
    );

    public function index() {

    }
} 
```

这个异常会触发：

> 语法错误，意外的 '$this' (T_VARIABLE)，期望函数 (T_FUNCTION) 错误：发生内部错误。
> 
> 堆栈跟踪 CORE\Cake\Error\ErrorHandler.php 第 162 行 → ErrorHandler::handleFatalError(integer, string, string, integer) [内部函数] → ErrorHandler::handleError(integer, string, string, integer, array) CORE\Cake \Core\App.php 第 926 行 → call_user_func(string, integer, string, string, integer, array) CORE\Cake\Core\App.php 第 899 行 → App::_checkFatalError() [内部函数] → App::shutdown ()

谁能提供一个简单的例子来说明如何保护控制器，以便只有经过身份验证的用户才能访问它？我还可以保护单个 Action 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:58:08.407

在类定义中不能有实例引用。

`$this`只能在类方法中访问。

在您的控制器中（比如说，AppController.php）：

```
 public $components = array(
    'Auth' => array(
        'loginAction' => 'login',
        'loginRedirect' => 'home',
        'authenticate' => array(
            'Form' => array(
                'userModel' => 'User',
                'fields' => array( 'password' => 'password' ),
                'scope' => array( 'User.active' => true )
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T14:55:07.050

如果我没记错的话，你应该在`beforeFilter()`

```
public function beforeFilter(){
    parent::beforeFilter();
    $this->Auth->authenticate = array(
        AuthComponent::ALL => array('userModel' => 'Member'),
        'Form',
        'Basic'
    );
} 
```

而且，正如 Martin 已经提到的，`$this`只能在（对象）方法中使用，因为它`$this`指的是调用该方法的当前对象。

# r - 有没有办法在 r 中创建 $2^n$ 因子设计（类似于 minitab）

> ID：12532886
> 
> 赞同：2
> 
> 时间：2012-09-21T00:30:44.977
> 
> 标签：r

我正在创建一个 $2^n$ 的设计（不是随机的）。我已经手工完成了 $2^5$，但我现在必须完成 $2^7$ 和 $2^8$。我知道在 Minitab 中有一个设计生成器，可以列出所有处理/因素，但我无法访问 Minitab。有没有可以做同样事情的 R 包？

例如，如果所说的梦想函数被称为“2n”并且我输入：

```
2to2 <-- 2n(2) 
```

或其他东西，输出将是：

```
2to2

A   B  AB
0   0   1
1   0   0
0   1   0
1   1   1 
```

....那有意义吗？

*编辑添加：我看到了 FrF2 包，但我似乎无法很好地掌握它。任何熟悉它的人或其他人？*

已解决：FrF2（nfactors = 8，分辨率 = 8，随机化 = FALSE）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T02:06:31.877

这类问题你可以自己去 CRAN 回答，查看任务视图（它们在侧边栏中，靠近顶部），然后选择 ExperimentalDesign 任务视图。

然后你会发现包 DoE.base 可能会做你想要的，还有一些其他的包你也可以查看，例如：FrF2 BHH2

你应该按照我在这里给出的顺序来看看这个包！

# angularjs - 在 AngularJS 控制器之一中延迟加载外部 JavaScript

> ID：12532890
> 
> 赞同：9
> 
> 时间：2012-09-21T14:49:37.623
> 
> 标签：angularjs

我的一些路线需要来自外部 JS 的功能。我不想一次全部加载它们，因为这些 JS 仅在某些路线中需要（例如`/upload`，需要一些 JS 来上传照片，`/photos`需要另一个 JS 来制作灯箱，`/funny`需要 JS 来制作动画等）。

延迟加载那些外部 JavaScript 的最佳实践是什么？

这些路线可以多次访问（例如，用户可以再次`/upload`访问）`/photos``/upload`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:23:41.390

除了 Alex 所说的之外，如果您要延迟加载 AngularJS 人工制品（例如控制器和指令），您将不得不使用相关的提供者来注册它们，而不是使用模块 API。应用程序启动后使用模块 API 注册的人工制品将不可用于应用程序。例如，您将定义一个像这样的惰性控制器......

```
$controllerProvider.register('SomeLazyController', function($scope)
{
   $scope.key = '...'; 
}); 
```

而不是这个...

```
angular.module('app').controller('SomeLazyController', function($scope)
{
    $scope.key = '...';
}); 
```

我写了一篇博文，详细介绍了这一点以及如何使用 Alex 所说的“解决”方法在 AngularJS 中实现延迟加载。[http://ify.io/lazy-loading-in-angularjs/](http://ify.io/lazy-loading-in-angularjs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:58:47.580

我知道处理这种情况的唯一方法是使用路由的“解决”方法。此方法可用于定义要在路由控制器实例化之前加载的依赖项。此方法的不同可能返回类型之一是承诺。因此，您可以使用它来开始异步加载您的外部 JavaScript 代码并返回一个承诺，该承诺在您的外部脚本加载后立即解决。

这方面的文档可以在这里找到：[https](https://docs.angularjs.org/api/ngRoute/provider/$routeProvider) ://docs.angularjs.org/api/ngRoute/provider/$routeProvider在“when”部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T09:18:36.650

@alex3683 的答案可能是正确的 AngularJS 方式，但我没有掌握这个概念，所以我使用了 jQuery 的`getScript()`. 所以，在 CoffeeScript 中：

```
yourModule.factory 'foo', ->
    $.getScript 'https://script-to-load', ->
        # whatever you want to do once the script is loaded 
```

只需从您的控制器调用它。由于 AngularJS 服务是惰性的和单例的，这只会加载脚本一次。

# python - 用于将零填充到数字的 Python 算法

> ID：12532893
> 
> 赞同：0
> 
> 时间：2012-09-21T14:49:45.080
> 
> 标签：python, algorithm

首先，是的，我知道`str(n).zfill(width)`在数字前面填充零时效果很好。

但是有人试过为此编写自己的算法吗？我*试过*...

```
def printNodeNames(name, first, last, numPadZeros):
    for i in range(first, last+1):
        s = ""
        for j in range(0, numPadZeros):
            if i >= 10**j and i < 10**(j+1):
                zeros = ""
                for k in range(0, numPadZeros-j):
                    zeros = zeros + "0"
                s = name + zeros + str(i)
        nodes[i-1:i] = [s]
    return nodes 
```

上述功能是为了打印计算集群的节点名称，但它不起作用。例子：

```
>>> printNodeNames('node', 1, 12, 1)
['node01', 'node02', 'node03', 'node04', 'node05', 
 'node06', 'node07', 'node08', 'node09', '', '', ''] 
```

作为一个练习，任何人都可以弄清楚为什么它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:54:00.797

如果您的 if 语句为真，您只会为 s 赋值。在节点 10 及以上的情况下，if 语句永远不会为真，因此 s 仍然存在`""`。

要更改它，请将 s 的分配移出内部 for 块。并`zeros = ""`在 for 块之前设置。

# php - 如果设置了值，请进行检查，否则忽略

> ID：12532903
> 
> 赞同：0
> 
> 时间：2012-09-21T14:50:06.343
> 
> 标签：php, if-statement

我一直在挠头一段时间试图弄清楚这一点。

我有一个看起来像...的数组

```
$param = array(
   "conditionType"  => $_GET['conditionType']   ? strtolower($_GET['conditionType'])        : "all",
   "minPrice"       => $_GET['minPrice']        ? $_GET['minPrice']                         : false,
   "maxPrice"       => $_GET['maxPrice']        ? $_GET['maxPrice']                         : false,
); 
```

我需要检查以确保返回的所有书籍 >= 最低价格和 <= 最高价格，但如果这些用户选择不指定最低或最高价格，则 if 语句需要忽略此检查。

```
 if(($param['conditionType'] == "all" 
   || ($param['conditionType'] == "new" && strtolower($book['sub_condition']) == "new")
   || ($param['conditionType'] == "used" && strtolower($book['sub_condition']) != "new"))

   && ($param['minPrice'] && $book['price'] >= $param['minPrice']) 
   && ($param['maxPrice'] && $book['price'] <= $param['maxPrice'])
   && $book['price'] != "null"
   ){
      $books[] = array(
        "link"                      => $book['link'],
        "listing_condition"         => $book['sub_condition'],
        "listing_price"             => $book['price']
      );
   } 
```

我可以在 if 语句中进行哪些更改以确保发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:58:08.607

你需要重组那些读起来像的部分

```
&& ($param['minPrice'] && $book['price'] >= $param['minPrice']) 
```

改为阅读

```
&& (!$param['minPrice'] || $book['price'] >= $param['minPrice']) 
```

这遵循您陈述的逻辑：不应该设置最低价格，或者它必须小于或等于账面价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:00:39.963

`$param['minPrice']`你只需要否定这个`!$param['minPrice']`

# iphone - iOS Provisioning Profile not installing on one particular device

> ID：12532905
> 
> 赞同：9
> 
> 时间：2012-09-21T14:50:08.627
> 
> 标签：iphone, ios, provisioning-profile, udid, ios-provisioning

I recently have distributed an app for testing, and the test team are having a problem installing the app, more specifically the provisioning profile associated with the app.

They are using an iPhone 4 (iOS 5.1.1) and are getting "Could not install the provisioning profile due to an unknown error"

I am used to seeing this when a UDID is not registered against the profile which is trying to be installed, but they are adamant that they have supplied the correct UDID. In terms of the profile, both looking at provisioning on the iOS Dev account, and opening in a text editor confirms that the UDID that has been supplied is definitely present.

My question is, are there any known issues (other than wrong UDID supplied) which could cause this to occur on a device, even if that device is authorised to install that particular provisioning profile?

Thanks

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-26T15:49:03.470

这不会回答您的问题，因为您的问题设备是 iOS-5.1，但它可能会帮助很多其他人：

自 iOS7 以来的另一个可能问题是您在哪里找到 UDID。[正如苹果所说](https://developer.apple.com/library/IOs/releasenotes/General/RN-iOSSDK-7.0/index.html)：

> 在 iOS 7 中，已经在商店或用户设备上调用此已删除 API 的应用程序将不再返回 UDID。相反，-[UIDevice uniqueIdentifier] 将返回一个 40 个字符的字符串，以 FFFFFFFF 开头，后跟 -[UIDevice identifierForVendor] 的十六进制值。

因此，检查您的客户/合作者发送给您的 UDID：如果它以 FFFFFFFF 开头，那就是错误的。

在 iOS7 下获取 UDID 的唯一且独特的方法是将您的设备插入计算机，启动 iTunes（或 Xcode）并复制显示的 UDID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T17:43:11.683

看起来以编程方式生成的 UDID 提供了来自 iOS 7 的随机字母数字代码。因此，为确保您使用的是正确的，请将其连接到 iTunes，然后复制 UDID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:12:22.237

这背后可能没有几个原因，因为信息不够，所以我只能猜测 -

*   如果您在控制台中遇到任何**引导错误**，请从设备中删除应用程序，然后关闭您的设备，然后再打开并重试。
*   可能在您的设备中已经有一个具有相同配置文件的应用程序，因此您的应用程序将覆盖以前的应用程序并且不会安装新应用程序。
*   最后可能是配置文件问题。再做一次。

# objective-c - Send a keystroke to OS X programmatically

> ID：12532909
> 
> 赞同：0
> 
> 时间：2012-09-21T14:50:24.083
> 
> 标签：objective-c, cocoa, applescript, macos-carbon

How would you simulate the keystroke `ö` on Mac OS X programmatically?

This isn't just a randomly chosen character, I know you can simulate all ASCII characters as well as some special ones like `Esc`, `Backspace`, etc using either an embedded Applescript or `CGEventCreateKeyboardEvent`. But what about all those keys for which a CGKeyCode isn't defined? There must be a way!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T19:22:08.753

您需要使用 CGEventSetFlags 来设置 'u' 击键的选项修饰符，然后是向上键事件，然后是 'o' 击键。

[https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)

如果您需要更多信息，请询问，我将创建一些代码示例

# git - git pull origin HEAD

> ID：12532913
> 
> 赞同：29
> 
> 时间：2012-09-21T14:50:35.897
> 
> 标签：git, version-control, git-branch, git-pull

有人告诉我，您可以通过执行以下操作向与当前 Git 分支名称匹配的远程分支推送和拉取：

```
git push origin HEAD 
```

或者

```
git pull origin HEAD 
```

它以前一直对我有用，但奇怪的是有时它不起作用，而是推迟从**主**分支推/拉（这会导致拉合并......不是我想要做的）。我知道您可以通过简单地使用分支名称轻松地从您所在的分支推/拉，例如：

```
git pull origin name-of-branch-i-want-to-pull-from 
```

**无论如何**：

1.  是否有某些原因导致 HEAD 丢失跟踪/未指向我当前的分支，就像它几乎总是这样？
2.  有没有什么方法可以推送/拉到我当前正在处理的分支（只要远程分支的名称匹配）而不在命令中明确命名分支？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T22:29:31.120

感谢@abackstrom 的一些认真帮助，我能够解决我的问题。本质上，这篇文章是我的问题和解决方案：

[Git 分支名为 origin/HEAD -> origin/master](https://stackoverflow.com/questions/4359099/git-branch-named-origin-head-origin-master)

正确“重新创建”/跟踪本地 HEAD 分支/指针的确切命令是：

```
git remote set-head origin -a 
```

我希望这对遇到此问题的其他人有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T15:47:11.837

HEAD 并不是一个真正的分支。它是指向您当前已签出的提交的指针，并且通常会引用分支，但如果您执行类似`git checkout <sha>`or的操作`git checkout <tag>`，则 HEAD 会直接引用提交，与分支无关 - 这称为“分离的 HEAD”状态，并且您通常应该`git checkout`在进入这种状态时收到警告。在那种状态下，尝试推/拉 HEAD 没有意义，因为您不在分支上。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-16T16:42:22.443

问题是，当你这样做时：

```
git push origin HEAD 
```

`HEAD`**这里表示本地**存储库上的默认分支。

但是，当您这样做时：

```
git pull origin HEAD 
```

`HEAD`**这里表示远程**存储库上的默认分支。

这 2 个 HEAD 可以具有相同的分支名称，但通常它们是不同的。

例如，如果你的本地仓库和远程仓库的默认分支都是`master`，那么你切换到`feature`本地仓库上的一个新分支，然后通过 do 将其推送到远程，远程`git push origin HEAD`上的默认分支不会被`feature`神奇地更改为。相反，它将停留在`master`. 在这一点上，如果你`git pull origin HEAD`在你的特性分支上做，你实际上是在做`git pull origin master`.

所以我建议避免这样做`git pull origin HEAD`，因为远程上的默认分支是什么并不明显，并且可能会导致意想不到的问题。

# jakarta-ee - 谁来验证我的 DAO 的输入？

> ID：12532914
> 
> 赞同：3
> 
> 时间：2012-09-21T14:50:36.627
> 
> 标签：jakarta-ee, dao

我是企业设计模式的新手。我被告知数据访问对象不应该验证他们的输入。如果假设其他层执行验证，那么该层是否不需要知道所有数据库详细信息，例如表名等等？通过打破封装，这不会破坏拥有 DAO 的目的吗？

也许我对 DAO 职责的理解不正确，并且服务层也应该了解数据库，但这似乎很奇怪。目前我的数据访问对象只执行 CRUD 操作。

**注意：**我使用的是普通的 servlet，没有 MVC 框架或持久性框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:55:25.537

一个普通的 3 层应用程序有一个接口层、一个业务层和一个数据层。数据层通常是数据库的一个非常薄的覆盖层，通常不进行任何验证，除了有时它会验证 varchar 列的字符串长度。
任何*业务*验证（例如用户名中没有数字或密码中不允许有空格）都将在接口层（出于性能原因）和业务层中完成。如果你在某个地方找到了一个示例 Web 应用程序，他们应该希望能够相当清楚地展示这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T23:59:44.853

数据访问对象的正确实现应该只执行 crud 操作。数据库上应该存在的唯一验证是输入约束，例如唯一索引、外键、检查约束等。除此之外的所有其他内容都应由与 DAO 接口的层处理。可以设置此类约束，以便数据库服务器在检索或更新表之前自动执行它们。无需将其放入 DAO 的逻辑中。

# android - Android AndEngine：简单的精灵碰撞

> ID：12532918
> 
> 赞同：1
> 
> 时间：2012-09-21T14:50:46.397
> 
> 标签：android, collision-detection, sprite, andengine, game-physics

我是 AndEngine 游戏开发（或一般游戏开发）的新手，我正在开发一款非常简单的游戏。设置是我在游戏中有 4 个主要精灵：

a.) 战斗机 b.) 坦克 c.) 步兵 d.) 炸弹

游戏处于当前无限循环中。战机从左边出来，在屏幕上放大，每秒又从右边出来。坦克从屏幕左侧出来，走到屏幕中间，放下一些走到屏幕右侧的步兵。然后坦克将面朝左并回到它原来的地方。

玩家可以点击屏幕来发射一个直接向下的炸弹。当它击中坦克或士兵时，炸弹会爆炸（留下爆炸精灵）并且炸弹以及它所碰撞的物体（坦克或士兵）从场景中脱离。

我的困境是，我似乎无法解决涉及碰撞的逻辑。我的意思是肯定的，我得到了这些功能，但我在逻辑上被难住了。这是游戏本身的快照：

![在此处输入图像描述](../Images/5077d821e0caca825c36a40cd56ef6cf.png)

这是我的片段（这个函数是从 onCreateScene 更新处理程序中调用的：

```
 protected void checkTankCollision() {
    // TODO Auto-generated method stub

    int numCompares = bombGroup.getChildCount();
    for (int i = 0; i < numCompares; i++) {
        Sprite s = (Sprite) bombGroup.getChildByIndex(i);
        for (int j = 0; j < numCompares; j++) {
            Sprite s2 = (Sprite) tankGroup.getChildByIndex(j);
            if (s.collidesWith(s2)) {
                // boom
                AnimatedSprite boom = createExplosion();
                boom.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(boom);

                // WARNING: cannot detach from the list
                // while looping through the list
                final Sprite a = s;
                final Sprite b = s2;

                // this will do the action after the scene is done updating
                getEngine().getScene().postRunnable(new Runnable() {

                    @Override
                    public void run() {
                        a.detachSelf();
                        b.detachSelf();
                    }
                });
            }
        }
    }

} 
```

一些炸弹发射后，游戏力量关闭。它给出了 indexOutOfBoundsException 错误。

这是logCat：

```
 09-22 00:12:14.565: E/AndroidRuntime(924): FATAL EXCEPTION: UpdateThread
    09-22 00:12:14.565: E/AndroidRuntime(924): java.lang.IndexOutOfBoundsException:  Invalid index 1, size is 1
    09-22 00:12:14.565: E/AndroidRuntime(924):  at  java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at java.util.ArrayList.get(ArrayList.java:304)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at  org.andengine.entity.Entity.getChildByIndex(Entity.java:612)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at com.cs119.bombthetank2.BombTankActivity.checkTankCollision(BombTankActivity.java:660)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at com.cs119.bombthetank2.BombTankActivity$4.onUpdate(BombTankActivity.java:194)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.engine.handler.UpdateHandlerList.onUpdate(UpdateHandlerList.java:47)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.entity.Entity.onManagedUpdate(Entity.java:1395)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.entity.scene.Scene.onManagedUpdate(Scene.java:284)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.entity.Entity.onUpdate(Entity.java:1167)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.engine.Engine.onUpdateScene(Engine.java:591)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.engine.Engine.onUpdate(Engine.java:586)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.engine.Engine.onTickUpdate(Engine.java:548)
    09-22 00:12:14.565: E/AndroidRuntime(924):  at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820) 
```

Entity 和 Scene 活动是 AndEngine 的一部分，那里真的不可能有错误。BombTheTank2 是我活动的名称，所以是的，错误就在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:50:56.000

在停止遍历子列表之前，您似乎正在分离 Sprite。让我们以干净的方式来做。试试这个：

```
protected void checkTankCollision() {
    int numCompares = bombGroup.getChildCount();
    final ArrayList<Sprite> toBeDetached = new ArrayList<Sprite>();
    for (int i = 0; i < numCompares; i++) {
        Sprite s = (Sprite) bombGroup.getChildByIndex(i);
        for (int j = 0; j < numCompares; j++) {
            Sprite s2 = (Sprite) tankGroup.getChildByIndex(j);
            if (s.collidesWith(s2)) {
                // boom
                AnimatedSprite boom = createExplosion();
                boom.setPosition(s.getX(), s.getY());
                getEngine().getScene().attachChild(boom);

                // WARNING: cannot detach from the list
                // while looping through the list
                toBeDetached.add(s);
                toBeDetached.add(s2);

            }
        }
    }
    runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            for (Sprite s : toBeDetached) {
                s.detachSelf();
            }
            toBeDetached.clear();
        }
    });
} 
```

编辑：实际问题出在其他地方——Erasmus 意外地迭代了 Tank 组的次数与 Bomb 组的次数相同。解决方案是检查坦克的数量并尽快停止迭代。

我个人总是使用 For-Each 循环，除非我真的需要知道索引，它为我省去了很多麻烦 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:51:02.413

我认为您需要在 UpdateThread 上进行“分离”，所以不要这样做

```
 getEngine().getScene().postRunnable(new Runnable() {

                @Override
                public void run() {
                    a.detachSelf();
                    b.detachSelf();
                } 
```

试试这个

```
runOnUpdateThread(new Runnable() {

                    @Override
                    public void run() {
                        a.detachSelf();
                        b.detachSelf();
                    } 
```

每次分离某些东西时，都应该减少 numCompares 值，一旦分离某些东西，包含这些实体的数组现在就更小了。由于您在开始时拉动数组长度，因此您最终会超过数组的末尾 - 因此您的 IndexOutOfBounds 错误。分离仍然需要在 UpdateThread 上运行。

# java - 如何在 Netbeans 中使用 jetbrains 布局启动 Swing 应用程序

> ID：12532919
> 
> 赞同：0
> 
> 时间：2012-09-21T14:50:53.753
> 
> 标签：java, swing, intellij-idea

我在 IDEA 中创建了带有一些摆动布局的应用程序。我想在 Netbeans 中启动它以进行分析。但我得到：

```
Exception in thread "main" java.awt.IllegalComponentStateException: contentPane cannot be set to null.
    at javax.swing.JRootPane.setContentPane(JRootPane.java:603)
    at javax.swing.JDialog.setContentPane(JDialog.java:991)
    at TransTest.<init>(TransTest.java:44)
    at TransTest.main(TransTest.java:284) 
```

为了运行它，我应该提供哪些文件等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:27:26.903

可以在[UI 设计器网页上阅读](http://www.jetbrains.com/idea/features/gui_builder.html)

> 独特的字节码检测技术允许您摆脱 Java 源代码中复杂的 Swing 代码。IntelliJ IDEA 的 GUI 编译器透明地生成创建和布局表单组件所需的所有必要代码。GUI 编译器已集成到 IntelliJ IDEA 的 make 功能中，也可以作为与 IntelliJ IDEA 发行版一起交付的单独 Ant 任务使用。还有一个选项可以生成 Java 源代码，而不是使用字节码检测方法。

因此，[生成 Java 源代码](http://www.jetbrains.com/idea/webhelp/gui-designer.html)并在 NetBeans 中使用它，或者简单地手动编写布局而不是使用 UI 设计器。

# iphone - How to display UIAlertView in iphone app that contain non english message

> ID：12532924
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:51:17.873
> 
> 标签：iphone, objective-c, uialertview

am building an iphone app and I have faced a problem when I use non English language to display in UIAlertview. xcode considers the text as code error, so id doesn't recognize the language of the text. to be more specific am trying to display Arabic language. I don't want to turn the button to arabic I just want to show alert view that contain few lines of english and few lines of arabic my code is work fine with english text but it doesn't when I include the arabic text. thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:59:39.890

`UIAlertView`我认为如果语言可以支持，显示非英语内容是没有问题的 -

```
[[[UIAlertView alloc]initWithTitle:nil message:@"هذا هو رسالة غير الإنجليزية." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] show]; 
```

# python - Display Output in Rows Not Columns?

> ID：12532926
> 
> 赞同：0
> 
> 时间：2012-09-21T14:51:22.043
> 
> 标签：python, python-3.x

I want the answers to come out side by side, not on top of each other. How do I do that?

```
n=0

while 1:

    n=int(input("Enter N="))
    if n > 0:
             break
    print("Error. please enter only positive numbers.")
i=1
print("\nThe divisors of N are:",)
while i <=n:
    if (n%i) == 0:
        print(i,)
    i+=1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T14:54:21.233

换行

```
 print(i,) 
```

至

```
 print(i, end=" ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:53:47.933

使用`sys.stdout.write`代替`print`

# sql-server-2008 - update script stored procedure sql server2008

> ID：12532935
> 
> 赞同：0
> 
> 时间：2012-09-21T14:51:39.843
> 
> 标签：sql-server-2008, stored-procedures

I am fairly new to posting questions i greatly appreciate your support. I wanted to write a proc to update my table `testAd`.

A replace function could do it but I have almost a million records to update and I am trying to use stored procedure.

Could you have a look at what I have started? Thank you I appreciate it. I should come up with something by end of day today..a kind of tough situation. I tried the one below it doesn't seem to be working.

```
CREATE PROC [dbo].[testAd]
AS
DECLARE @ci  VARCHAR (255)
UPDATE Stage.TestAdd
SET @ci=AddressOne
SET @ci= CASE @ci
 WHEN 'Des Moines'  THEN 'IA' 
 WHEN 'Seattle'    THEN 'WA'
 WHEN 'Pheonix'    THEN 'Az'   
 WHEN 'Phx'   THEN 'Az'
 .
 . 
 ELSE @ci 
```

END

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:33:46.620

如果我理解正确，您希望将存储在一个字段中的值从 [city] 更新为匹配 [state]

您可以使用具有有效对的表变量而不是使用长 case 语句，然后在更新中加入该表

像这里的东西：

```
declare @cityInState as table(city varchar(50), state char(2))
insert into @cityInState 
values
    ('Des Moines','IA') 
    ,('Seattle', 'WA')
    ,('Pheonix','Az')   
    ,('Phx','Az')
    -- etc ...

update yt
set 
    fieldToUpdate = cis.state
from 
    yourTable yt
    inner join @cityInState cit on yt.fieldToUpdate = cit.city 
```

**警告**：这将用州替换城市值，所以只有在你想要的时候才运行它。

将其添加为额外字段（理想情况下是对查找表的引用）会更好，因为更新后您将**丢失**城市信息。

# oracle11g - ORA 12514 错误：TNS 侦听器错误

> ID：12532939
> 
> 赞同：3
> 
> 时间：2012-09-21T14:52:11.333
> 
> 标签：oracle11g, tns

好的，直到昨天一切正常，现在我突然收到此错误
ORA-12514：TNS：listener 目前不知道连接描述符中请求的服务
没有任何修改

```
XE =
  (DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = jainam-2b1c493d)(PORT = 1521))
(CONNECT_DATA =
  (SERVER = DEDICATED)
  (SERVICE_NAME = XE)
)
)

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
     (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
        (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  )

  ORACLR_CONNECTION_DATA = 
      (DESCRIPTION = 
     (ADDRESS_LIST = 
     (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1)) 
    ) 
     (CONNECT_DATA = 
   (SID = CLRExtProc) 
   (PRESENTATION = RO) 
 ) 
) 
```

我完全被卡住了，不知道该怎么办。我从这里尝试了帮助
[http://dba-oracle.com/t_ora_12514_tns_listener_does_not_currently_know_service_requested.htm](http://dba-oracle.com/t_ora_12514_tns_listener_does_not_currently_know_service_requested.htm) 但没有用。谢谢

编辑：
这是输出到`lsnrctl service`

```
Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 3 handler(s) for this service...
    Handler(s):
      "DEDICATED" established:0 refused:0
         LOCAL SERVER
      "ORACLE SERVER" established:0 refused:0 current:0 max:25 state:ready
        CLRExtProc
     (ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\NTN_6B4_641B624E_B22.ORA))
  "ORACLE SERVER" established:0 refused:0 current:0 max:25 state:ready
     CLRExtProc
     (ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\NTN_6B4_641B624E_282.ORA))
Service "PLSExtProc" has 1 instance(s).
Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
Handler(s):
  "DEDICATED" established:0 refused:0
     LOCAL SERVER
Service "XEXDB" has 1 instance(s).
 Instance "xe", status READY, has 1 handler(s) for this service...
 Handler(s):
  "D000" established:0 refused:0 current:0 max:1022 state:ready
     DISPATCHER <machine: JAINAM-2B1C493D, pid: 3708>
     (ADDRESS=(PROTOCOL=tcp)(HOST=jainam-2b1c493d)(PORT=2763))
Service "xe" has 1 instance(s).
Instance "xe", status READY, has 1 handler(s) for this service...
Handler(s):
  "DEDICATED" established:0 refused:0 state:ready
     LOCAL SERVER
The command completed successfully 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-23T13:22:50.293

对我来说，它有助于将以下 SID_DESC 添加到 C:\oraclexe\app\oracle\product\11.2.0\server\network\ADMIN\listener.ora

```
SID_LIST_LISTENER =
  (SID_LIST =
    ...
    (SID_DESC =
      (SID_NAME = XE)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\11.2.0\server)
    )
  ) 
```

重新启动侦听器和数据库后，访问再次起作用。

感谢[http://grow-n-shine.blogspot.de/2011/11/oracle-11g-xe-issue-ora-12514.html](http://grow-n-shine.blogspot.de/2011/11/oracle-11g-xe-issue-ora-12514.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:45:28.987

您收到此类错误的原因之一是因为数据库实例在侦听器之前启动。侦听器必须始终首先启动。

1.  检查数据库实例是否已启动并正在运行
2.  检查`lsnrctl service`命令的输出并查看注册了哪些服务。
3.  检查`SERVICE_NAME`连接实例时是否正确指定。
4.  如果发生数据库实例在侦听器之前启动的情况，有时您只需稍等片刻，或者您可以执行`alter system register`以注册实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-08T06:40:18.793

打开 SQL Plus 并连接到系统用户：

```
system/p@ssword 
```

并运行两个命令：

```
SQL> alter system set LOCAL_LISTENER='(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))' scope=both;
SQL> alter system register; 
```

# c++ - 防止 C++ 库在过期日期之后进行链接

> ID：12532941
> 
> 赞同：1
> 
> 时间：2012-09-21T14:52:22.383
> 
> 标签：c++, visual-c++, static-libraries

我需要防止 C++ 静态库链接超过软件评估期的到期日期。我怎样才能做到这一点？

这应该适用于最新版本的 Visual C++ 编译器（2012、2010，最好是 2008）。对更多编译器的支持将是一个加分项（英特尔、gcc、游戏机编译器）。能够在到期日期前几天弹出编译器警告也是一个不错的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:59:32.010

链接器不支持执行此类检查。您将需要想出一个更好的解决方案来处理“评估期”到期的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:56:56.693

我不确定你的意思。库本身不包含评估期（至少不是简单格式）。一个肮脏的解决方案是编写一个重命名影响静态库的脚本..然后编译器不能链接到它。据我记得支持 VS（并且肯定是 make）在编译之前运行脚本。

# javascript - javascript 可以对非常大的表格进行排序、过滤和渲染吗？

> ID：12532949
> 
> 赞同：7
> 
> 时间：2012-09-21T14:52:41.413
> 
> 标签：javascript, sorting, filter, report, large-data

首先，我不知道 Javascript 在这方面的能力。但想知道是否有可能：

1.  从文本文件中读取并显示一个非常大的表格（几十列和几十万行），分段；
2.  并非所有列都会同时显示。列在组中。一组列需要在隐藏或显示之间切换；
3.  可以根据某些列过滤行。

这样做的原因是为了制作一个显示数据分析结果的报表，同时也为用户提供基本的过滤、排序功能。他们最有可能拥有某种网络浏览器。所以 HTML 将是一种理想的格式。

Javascript可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:59:12.000

您可以通过使用网格插件来做到这一点。例如，看看这个问题的答案：[JavaScript data grid for Millions rows](https://stackoverflow.com/questions/2402953/javascript-data-grid-for-millions-of-rows)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:03:27.380

我会推荐一个 javascript 表库，例如 DataTables。它包括排序、过滤和分页选项。

它还具有将 DataTables 执行的所有分页、过滤、排序等操作交给服务器的功能。然后，javascript lib DataTables 只是一个事件和显示模块。在这种情况下，可以处理任意数量的行。

因此，您将拥有所需的所有功能，以及在 javascript 中加载的数据的 ajax-y 快速性能，并且可以处理任意数量的行。

[使用 DataTables 进行服务器端数据处理](http://datatables.net/release-datatables/examples/data_sources/server_side.html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-21T16:06:31.413

绝对没错。Ext.JS 展示了如何非常有效地做到这一点。如果做得正确，它是一种性能优化，可以减少到服务器的往返行程。并提高用户体验响应能力。

[ExtJS 富网格示例。](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/array-grid.html)（有许多）

[ExtJS 示例。](http://dev.sencha.com/deploy/ext-4.0.0/examples/)（看网格部分）

希望有帮助。

# c# - 如何使用正则表达式将段落内的原始 url 替换为 html 链接

> ID：12532951
> 
> 赞同：0
> 
> 时间：2012-09-21T14:52:49.390
> 
> 标签：c#, regex

如何更改段落中的绝对网址：

```
<p>http://www.google.com</p> 
```

进入 html 链接进入段落：

```
<p><a href=\"http://www.google.com\">http://www.google.com</a></p> 
```

可以有很多段落。我希望正则表达式从 this: 中删除通用`url`值`<p>url<p>`，并将其放入模板中，如下所示：`<p><a href=\"url\">url</a></p>`

如何以短的方式做到这一点？可以使用 regex.Replace() 方法来完成吗？

顺便说一句：用于绝对 url 匹配的正则表达式可以是这样的：（`^(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$`取自[msdn](http://msdn.microsoft.com/en-us/library/ff650303.aspx)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:31:21.240

形成你的正则表达式：删除第一个 ^ 和最后一个 $ - 这意味着“从头到尾匹配整个输入字符串”

```
string regexPattern = @"(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?";

string input = @"<p>http://www.google.com</p>";

var reg = new Regex(regexPattern, RegexOptions.IgnoreCase);

// $0 - substitution, refers to  the text matched by the whole pattern    
var output = reg.Replace(input, "<a href=\"$0\">$0</a>"); 
```

更多关于替换[http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:58:36.630

尝试使用这个正则表达式：

```
(?<!\")(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?(?!\") 
```

避免匹配`<a href="http://www.google.com">`字符串（由 括起来`"`）。

和一个示例代码：

```
var inputString = @"<p>http://www.google.com</p><p><a href=\"http://www.google.com\">my web link</a></p>";
var pattern = @"(?<url>(?<!\")(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?(?!\"))";
var result = Regex.Replace(strInput, pattern, "<a href=\"${url}\">${url}</a>"); 
```

解释：

***`(?<!subexpression)`*** `Zero-width negative lookbehind assertion.`

***`(?!subexpression)`*** `Zero-width negative lookahead assertion.`

***`(?<name>subexpression)`*** `Captures the matched subexpression into a named group.`

# android - 如何在android上使用ffmpeg录制视频？

> ID：12532952
> 
> 赞同：1
> 
> 时间：2012-09-21T14:52:58.300
> 
> 标签：android, video, ffmpeg, android-camera, record

我想通过从 Android 相机获取字节 [] 数据使用 ffmpeg 创建视频。现在的问题是我对ffmpeg知之甚少。所以我需要一些关于 ffmpeg 的文档。如果有人能在 ffmpeg 上提供一些有用的教程/示例代码/示例及其工作原理，如何使用它以编程方式创建视频，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:53:46.060

ffmpeg 是一个 C 库，因此您必须使用 NDK 构建它并使用 JNI 接口将其与您的 Android 设备桥接在一起。据我所知，我认为直接使用 ffmpeg 录制视频是不可能的。但是，如果您决定走这条路，您可以使用 openCv 捕获视频流，然后使用 ffmpeg 对其进行解码/编码。再一次，所有这些都必须在 C/C++ 中完成，并且一旦您使用 ffmpeg 处理完信息，就可以使用 NDK 通过 JNI 将信息发送到 android 设备。

这是 Android 版 OpenCV 库的链接 [http://opencv.org/downloads.html](http://opencv.org/downloads.html)

下载后，会有示例项目向您展示如何使用原生 android 摄像头以及使用 opencv 功能录制视频。

# graphics - 如何检测子精灵的触摸

> ID：12532955
> 
> 赞同：1
> 
> 时间：2012-09-21T14:53:06.617
> 
> 标签：graphics, cocos2d-iphone, cocos2d-x

我正在编写一个 cocos2d-x 应用程序。我有一个精灵，上面有几个子精灵。这些精灵代表屏幕上的一个逻辑对象，该对象被转换为一个整体对象。现在，当对象被触摸时，我需要发现哪个子精灵被触摸了。

问题是，虽然父精灵给了我当前的所有信息（边界框、比例、旋转等），但子精灵保持原来的数字，尽管与父精灵一起转换，我不知道找出为孩子计算“真实”尺寸的正确方法。

在我看来，有两个事实导致了所有困难：

1.  子边界框的初始尺寸是相对于父边界框的初始尺寸报告*的*。
2.  我无法计算父级旋转后父级的初始边界框（见下图），因此我无法计算父精灵的左下角现在在哪里，我需要它作为子变换的关系点。

这是这种情况的示意图：

![旋转后的精灵边界框](../Images/8c2de507160a3ebcde0d3a1efe2ffe61.png)

因此，总而言之，为了检查触摸是否击中子精灵，我需要根据父级的变换计算子级的当前边界框。我可以计算出孩子的缩放和旋转，但我不知道它应该相对于父级定位在哪里，因为父级的边界框与开始时的边界框非常不同。在故事中添加奇怪的锚点，它变得更加复杂。完美的解决方案是获取原始精灵的顶点而不是边界框。可能吗？

有任何想法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:44:14.447

boundingBox() 的源代码可能会有所帮助。可以通过nodeToParentTransform()得到仿射变换，使用CCPointApplyAffineTransform得到四个点的新位置。然后您可以编写一个新方法来检查触摸是否位于新矩形中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T09:59:49.707

如果有人想找出旋转标签中的字母边界框：

```
int maxIdx = label->getStringLength() -1;
Mat4 trans = label->getNodeToParentTransform();
for(int idx = 0; idx<=maxIdx; idx++) {
    Sprite* letter = label->getLetter(idx);
    Rect letterRect = letter->getBoundingBox();
    Point p = PointApplyTransform(letterRect.origin, trans);
    Rect rect = Rect(p.x, p.y, 10, 10); // Letter Approximation rect
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:28:49.913

假设你有父母

```
CCSprite* parent; 
```

和一个孩子，

```
CCSprite* child; //child Tag is 100 
```

你可以试试你的触摸方法：

```
YOUR_CLASS::ccTouchBegan(CCTouch* pTouch, CCEvent* pEvent){
    CCPoint touchLocation = parent->convertTouchToNodeSpace(pTouch);
    if (CCRect::CCRectContainsPoint(parent->getChildByTag(100)->boundingBox(),touchLocation)){
        //do something
        CCLOG("touch on child");
    }
} 
```

# javascript - jquery live() onkeyup 并点击

> ID：12532956
> 
> 赞同：2
> 
> 时间：2012-09-21T14:53:07.327
> 
> 标签：javascript, jquery

我正在使用 live() 函数来验证使用 ajax 加载的表单，因为没有它它就无法工作。

以前，我的表单验证是在 onkeyup 完成的（尽管我从未在任何地方指定它）。现在它仅在用户单击提交按钮时才有效。使用 live() 函数时，是否可以恢复我的 onkeyup 验证并保留提交时的验证？

```
$(".createBtn").live('click', function() {
$("#createAcc").validate({ 
```

我正在使用以下插件进行验证。

```
bassistance.de/jquery-plugins/jquery-plugin-validation/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:00:37.333

正如 Steven 所说，您可以链接，也可以像这样指定多个事件：

[http://jsfiddle.net/gLWRs/1/](http://jsfiddle.net/gLWRs/1/)

```
$('.createBtn').on({
  click: myFn,
  keyup: myFn    
});​ 
```

这也适用于`live`.

不过，重新阅读您的问题，您可能需要这样的东西，因为这些事件将发生在不同的元素上：

```
$('.createBtn').on({ click: myFn });
$('input').on({ keyup: myFn }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:10:33.067

您可以将多个事件绑定到同一个元素.. 试试这个

```
$(".createBtn").live('click keyup', function() {

    yourFunctionCall();
}); 
```

**从最新的 jQuery 版本开始， .live()**也被弃用了。

我建议使用**.on()**代替..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:58:19.047

您可以使用您的函数并将其设置为一个变量，如下所示：

```
var myFn = function() { ... }; 
```

然后您可以使用两个事件处理程序注册该函数。

```
$(".createBtn").on('click', myFn).on('keyup', myFn); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:05:34.220

您可以将验证的初始化添加到从 document.ready 上的服务器获取的 html 源中，例如：

```
if(isAjax)
{
    $(function() {
       // Init you validation
    });
} 
```

# sql - SQL 查询 - 过滤主键

> ID：12532962
> 
> 赞同：2
> 
> 时间：2012-09-21T14:53:43.043
> 
> 标签：sql, sql-server-2000

我正在使用 microsoft sql server，我的查询格式如下（table1 主键是（A，B））：

```
Select table1.A, table1.B, table2.C, Table3.D
from table1
left outer join table2 on table1.A = table2.A
left outer join tabl3 on table1.B = table3.B

//Here comes the question
//Except (A,B) in ( select A,B from BadTable) 
```

我怎么能做得很好？我正在考虑使用类似的东西找到一组正确的键（不能使用，除了 - 运行 sql server 2000）

```
Select A,B
from table1
not exists ( select A,B from bad table) 
```

然后将其与主查询进行内部连接。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:02:16.283

```
Select table1.A, table1.B, table2.C, Table3.D
from table1 T1
left outer join table2 on table1.A = table2.A
left outer join tabl3 on table1.B = table3.B
where not exists (select 1 from badTable where A = T1.A and B = T1.B) 
```

会是个好办法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:06:29.023

```
Select table1.A, table1.B, table2.C, Table3.D ,badtable.*
from table1 
left join table2 on table1.A = table2.A 
left join table3 on table1.B = table3.B 
left join badtable on table1.a = badtable.a
    and table1.b = badtable.b
where badtable.a is null 
```

# javascript - 如何在 formsweb.cfg 中调用 Javascript？

> ID：12532964
> 
> 赞同：1
> 
> 时间：2012-09-21T14:53:42.683
> 
> 标签：javascript, oracle, oracleforms, database-administration

在[更改浏览器标题](https://forums.oracle.com/forums/thread.jspa?threadID=490429)中，我读到可以在 Javascript 的帮助下**动态**更改“formsweb.cfg”的“pageTitle”。

我的目标是在浏览器页面标题中**动态**显示 oracle 表单 (10g) 的名称。我怎样才能使用这样的功能

```
# HTML page title
  <script>
     function setWindowTitle(x)
       {
         document.title=x;
       }
     </script>
    setWindowTitle(form); 
```

在我的 formsweb.cfg 中返回表单名称并将其设置在浏览器标题中？！！！！！！

有人知道我该怎么做吗？

我感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:55:26.200

您可以更改 base.htm 文件中的标题或您用作文件的任何内容。在这里你也可以使用javascript，因为它是一个普通的html文件。

对于取决于数据的标题，您可以使用 cookie。您可以从触发器创建它，也可以使用 javascript 读取它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-22T16:59:44.483

您可以在此处查看一些动态操作小程序浏览器窗口的示例：

[http://oracleformsinfo.wordpress.com/2011/12/25/getting-the-browser-window-under-control-when-separateframetrue/](http://oracleformsinfo.wordpress.com/2011/12/25/getting-the-browser-window-under-control-when-separateframetrue/)

如果您想从表单本身传递参数，例如表单名称，您必须使用表单 11g 并使用 javascript 将表单名称发送到页面本身。

对于 Forms 4.5 - 10g 中的解决方案，您可以使用 get_application_property 获取表单名称，然后使用 set_window_property 设置表单窗口标题，非常轻松地将表单窗口标题设置为表单名称。

# objective-c - iOS 对象被识别为错误的类

> ID：12532968
> 
> 赞同：1
> 
> 时间：2012-09-21T14:53:48.157
> 
> 标签：objective-c, ios

长话短说，我在一些我正在弄乱的代码中有一些奇怪的错误，事实证明它来自一个被识别为错误类的对象。

这是我的代码，我在任何接触对象之前放置了 NSLog 语句......我无法弄清楚为什么它显示为错误的类。

照片.h

```
@interface Photo : NSObject
{
}

@property (nonatomic, retain) UIImage *image;
@property (nonatomic, retain) IBOutlet NSString *descr;

@end 
```

照片.m

```
@implementation Photo

@synthesize image;
@synthesize descr;

@end 
```

CameraViewController.h

```
#include "Photo.h"

@interface CameraViewController : UIViewController <UIImagePickerControllerDelegate>
{
    IBOutlet UIImageView *imageView;
}

@property (nonatomic, retain) Photo *photo;

-(void)takePhoto;
-(void)resetImage;

@end 
```

最后... CameraViewController.m

```
#import "Photo.h"
....

@implementation CameraViewController

@synthesize photo;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"%@", NSStringFromClass([_photo class]));
    // Do any additional setup after loading the view.
} 
```

这打印出来：

```
UIImageView 
```

我希望它打印出来

```
Photo 
```

或者至少

```
NSObject 
```

我错过了什么吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:59:11.733

向对象发送`class`消息会检索该对象的*动态*类型。必须先分配对象，然后再查询它的`class`. 换句话说，将属性声明为`Photo*`不足以使其`class`返回`Photo`：您还必须为其分配一个实例`Photo`或其子类之一。在后一种情况下，发送`class`消息的结果会有所不同（即`Class`返回子类的）。

# hadoop - 使用 Hadoop MapReduce 从文本文件中的列中检索唯一结果

> ID：12532979
> 
> 赞同：0
> 
> 时间：2012-09-21T14:54:17.543
> 
> 标签：hadoop, mapreduce

我有下面的数据集。我想获得第一列的唯一列表作为输出。{9719,382 ..} 每行末尾都有整数，因此检查它是否以数字开头和结尾不是一种方法，我想不出解决方案。你能告诉我怎么做吗？如果您详细展示它，我将不胜感激。（在地图中做什么以及在减少步骤中做什么）

```
id  - - [date] "URL" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:03:30.890

在您的映射器中，您应该解析每一行并从行的开头写出您感兴趣的令牌（例如 9719）作为键值对中的键（在这种情况下，值无关紧要）。由于键将在发送到减速器之前进行排序，因此您在减速器中需要做的就是遍历值，每次值更改时，输出它。

与 Hadoop 一起打包的[WordCount 示例](http://wiki.apache.org/hadoop/WordCount)应用程序非常接近您的需要。

# web-services - 服务器 2008 r2 64 位上的 asmx webservice 错误

> ID：12532982
> 
> 赞同：0
> 
> 时间：2012-09-21T14:54:23.070
> 
> 标签：web-services, asmx, windows-server-2008-r2

我们有一个 asmx Web 服务，可以在 32 位 Windows Server 2008 上正常工作，但是当它托管在 64 位服务器 2008 r2 机器上时，它会给出“索引超出数组范围”。尝试访问服务的 javascript 文件时：

[http://www.site.com/Service.asmx/js](http://www.site.com/Service.asmx/js)输出“索引超出了数组的范围。” 仅在 64 位托管时

服务代码如下所示：

```
[WebService(Namespace = "http://www.company.com")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[ScriptService]
public class Saver : WebService
{
    /// <summary>A web service to save a set of ScheduleEntryProperties objects.</summary>     
    [WebMethod]
    public string SaveEntries(Entry[] entries, object start, object end, string assignmentIDs, string deptID, string useCodes)
    {
        ...
    } 
```

和 Entry 对象：

```
[Serializable]
public class Entry
{
    public Entry()
    {            
    }

    public Entry(object assignmentID, object date, object hours, object text)
    {
        AssignmentID = assignmentID;
        Date = date;
        Hours = hours;
        Text = text;
    }

    public object Date;
    public object AssignmentID;
    public object Text;
    public object Hours;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:52:55.500

原来这与 IIS 7.5`<system.webServer />`配置部分和 .axmx 的处理程序有关，它被定义为

```
<add name="*.asmx_*" path="*.asmx" verb="*" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" preCondition="integratedMode,runtimeVersionv2.0" /> 
```

所需要的只是删除 preCondition="integratedMode,runtimeVersionv2.0" 并清除索引越界错误。

# java - 获取图像扩展名

> ID：12532986
> 
> 赞同：3
> 
> 时间：2012-09-21T14:54:43.743
> 
> 标签：java, android, image, gallery, uri

在应用程序中，用户可以选择图像。要启动画廊，我使用以下代码：

```
Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, ACTIVITY_SELECT_IMAGE); 
```

当我在 onActivityResult 方法中打印路径时，我得到的图像路径如`/external/images/media/5615`. 我想知道图片扩展名，因为图片需要上传到服务器。扩展名可能会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:08:25.237

你得到的是 MediaStore 用来获取图像的路径。以下代码将从您的 Intent 中获取结果，并获取附加的文件名：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == ACTIVITY_SELECT_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            Log.i(TAG, "" + selectedImage.toString());
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            Log.i(TAG, "" + picturePath);

            //Do whatever with picturePath

        } 
```

# c# - 静态方法和实例方法 C#

> ID：12532994
> 
> 赞同：1
> 
> 时间：2012-09-21T14:55:17.253
> 
> 标签：c#, methods

以下示例来自《*Programming in the Key of C#* 》一书。

程序的第一次迭代是典型的 C 方式来做，下一次轮回更加面向对象。该程序是一个简单的示例，用于计算特定事件发生在一年中的哪一天（如果是闰年，12 月 31 日是 365 或 366）。

```
using System;

class StructureAndMethodsTwo
{
    static void Main()
    {
        Date dateMoonWalk = new Date();

        dateMoonWalk.iYear = 1969;
        dateMoonWalk.iMonth = 7;
        dateMoonWalk.iDay = 20;

        Console.WriteLine("Moon walk: {0}/{1}/{2} Day of Year: {3}", 
            dateMoonWalk.iMonth, dateMoonWalk.iDay, dateMoonWalk.iYear,
            Date.DayOfYear(dateMoonWalk));
    }
}

struct Date
{
    public int iYear;
    public int iMonth;
    public int iDay;

    public static bool IsLeapYear(int iYear)
    {
        return iYear % 4 == 0 && (iYear % 100 != 0 || iYear % 400 == 0);
    }

    static int[] aiCumulativeDays = { 0, 31, 59, 90, 120, 151,
                                        181, 212, 243, 273, 304, 334 };

    public static int DayOfYear(Date dateParam)
    {
        return aiCumulativeDays[dateParam.iMonth - 1] + dateParam.iDay +
            (dateParam.iMonth > 2 && IsLeapYear(dateParam.iYear) ? 1 : 0);
    }
} 
```

程序的下一个版本是相同的，除了`DayOfYear`变成的方法

```
public int DayOfYear()
{
return aiCumulativeDays[iMonth -1] + iDay+ (iMonth > 2 && IsLeapYear(iYear) ? 1:0);
} 
```

在第二个版本中究竟发生了什么使它比第一个更适合 OOP？该方法是否在第一次迭代`Date`中创建了一个类型的对象？`DayOfYear`我知道该方法的实例版本可以直接访问结构的字段，但我不知道它的明显优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:59:21.470

在第二个版本中，对象本身提供了所有信息，而不是静态上下文中的日期参数。如果该方法使用对象自己的数据，而不是通过参数“告知”它是什么，那么它就更加面向对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:00:41.327

在第一个版本中，一年中的某一天没有创建日期。它只是评估参数。第二个版本更加面向对象，因为它对类的实例而不是静态方法调用进行操作。这通常会使事情更有条理，并且更加面向对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:01:01.000

在示例二中，您使用的`iYear, iMonth and iDay`是 Date 结构的内部变量。第一个示例使用您传递给不需要的 DayOfYearFunction 的 Date 对象的另一个副本。

**编辑：**

在第一个示例中，您使用 Date 结构的实例并将其作为参数传递给 DayOfYear 函数，Date (dateParam) 的实例在堆栈上分配，这将使用更多内存并需要来自 CLR 的额外垃圾回收调用需要清理的时候。

**性能问题：** IMO，虽然使用了更多的内存，但由于程序的性质，几乎不会出现任何性能问题。它只是一个冗余参数。