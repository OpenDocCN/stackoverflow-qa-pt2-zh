# StackOverflow 问答 13007000-13007999

# objective-c - NSExpression 有什么用？

> ID：13007001
> 
> 赞同：2
> 
> 时间：2012-10-22T07:45:40.960
> 
> 标签：objective-c, ios, expression

如何计算公式，如`(a + b) ^ 2, sum((a + b) / 2)`使用`NSExpression`？我是初学者`NSExpression`。

(a + b) ^ 2 如何在目标 c 中使用整个正方形 2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-24T07:26:49.770

NSExpression*对于评估*目标 c 中的数学表达式很有用。

让我们看看如何使用 NSExpression 找到数字的标准差

```
NSArray *arrNumbers = @[@3, @6, @3, @8, @4, @12, @9, @11];

NSExpression *expression = [NSExpression expressionForFunction:@"stddev:" arguments:@[[NSExpression expressionForConstantValue:arrNumbers]]];

id value = [expression expressionValueWithObject:nil context:nil]; 
```

就是这么简单。

以下是按类别分组的功能列表。

**1)统计方法列表**

```
average:
sum:
count:
min:
max:
median:
mode:
stddev: 
```

**2)算术函数**

```
add:to:
from:subtract:
multiply:by:
divide:by:
modulus:by:
abs:
sqrt:
log:
ln:
raise:toPower:
exp: 
```

**3)边界函数**

```
ceiling:
trunc: 
```

**4)随机函数**

```
random
random: 
```

**5)二进制算术函数**

```
bitwiseAnd:with:
bitwiseOr:with:
bitwiseXor:with:
leftshift:by:
rightshift:by:
onesComplement: 
```

**6)日期功能**

```
now 
```

**7)字符串函数**

```
lowercase:
uppercase: 
```

**8）无操作**

```
noindex: 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-26T18:40:38.153

NSExpression 非常适合评估数学表达式。它不仅限于核心数据查询，您不需要额外的第三方库或编写自己的解析器来将表达式评估为字符串。

实际回答 (a + b) ^ 2 的问题；)

```
NSNumber *a = @4;
NSNumber *b = @4;
NSExpression *expression = [NSExpression expressionWithFormat:@"(%@ + %@)**2", a, b];
NSNumber *result = [expression expressionValueWithObject:nil context:nil];
NSLog(@"%@",result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:57:37.650

`NSExpression`不是通用的数学表达式求值器。它旨在用于`NSPredicate`描述 Core Data 查询中的选择标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:53:43.337

[NSExpression](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html)用于表示[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)中的表达式。它不适用于像您这样的任务。

实际上，您[可以](https://stackoverflow.com/questions/12992689/xcode-how-to-evaluate-string-formula-with-an-x-expression-inside)使用`NSExpression`来计算公式值，但这种用法非常有限。要评估任何数学表达式，您需要使用某种算法（即[Shunting-yard](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)或仅重用像[这样](http://www.apptree.net/parser.htm)的库）来制作字符串解析器。

# drupal - 可拖动视图中的 Ajax 错误

> ID：13007003
> 
> 赞同：2
> 
> 时间：2012-10-22T07:45:44.813
> 
> 标签：drupal, view, draggable

我们正在尝试使用 draggableviews 7.x - 2.0 对视图进行排序，但是在尝试保存时，我们收到以下错误：

```
An AJAX HTTP error occurred. 
HTTP Result Code: 500 
Debugging information follows. 
Path: /admin/structure/views/ajax/preview/jnytt_modul_nyhetsslider/panel_pane_2/387 
StatusText: error 
ResponseText: PDOException: SQLSTATE[HY000]: General error: 1364 Field &#039;nid&#039;     
doesn&#039;t have a default value: INSERT INTO {draggableviews_structure} (view_name,   
view_display, args, entity_id, weight) VALUES (:db_insert_placeholder_0,   
:db_insert_placeholder_1, :db_insert_placeholder_2, :db_insert_placeholder_3, 
:db_insert_placeholder_4); Array 
( 
[:db_insert_placeholder_0] =&gt; jnytt_modul_nyhetsslider 
[:db_insert_placeholder_1] =&gt; panel_pane_2 
[:db_insert_placeholder_2] =&gt; [&quot;387&quot;] 
[:db_insert_placeholder_3] =&gt; 9988 
[:db_insert_placeholder_4] =&gt; 0 
) 
```

遇到此问题并找到解决方案的其他任何人，因为我确定 h*** 找不到:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:44:27.617

似乎您的数据库表 draggableviews_structure 有一个需要默认值的字段**nid 。**这已经过时了，因为 draggableviews 的 2.x 版本使用**entity_id**代替。也许您从 1.x 升级到 2.x，这是不可能的。

> 没有从 7.x-1.x 到 7.x-2.x 分支的升级路径 [http://drupal.org/project/draggableviews](http://drupal.org/project/draggableviews)

所以要么重新安装到模块，要么手动编辑数据库表。我建议通过[devel重新安装](http://drupal.org/project/devel)

# objective-c - 通过不阻塞 UIScrollView 将 UIScrollView 的触摸事件转发到父视图

> ID：13007009
> 
> 赞同：2
> 
> 时间：2012-10-22T07:46:16.983
> 
> 标签：objective-c, ios, uiscrollview

我有多个`UIViews`，`UIViewController`每个`UIView`都有`UIScrollViews`。我必须`UIViews`通过触摸事件水平移动。`UIScrollViews`应该只垂直滚动。但是`UIScrollViews`正在吞咽触摸事件，所以`UIView`不动。我制作了一个自定义`UIScrollView`类来转发如下所示的触摸事件，但这样`UIScrollView`不会滚动。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView *result = nil;
    for (UIView *child in self.subviews)
        if ([child pointInside:point withEvent:event])
            if ((result = [child hitTest:point withEvent:event]) != nil)
                break;

    return result;
} 
```

我如何通过工作来将触摸从`UIScrollView`它的父视图传递到它的父视图`UIScrollView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:35:20.597

为什么不将带有滚动视图的视图放到仅启用水平滚动的大滚动视图中？我试过一次，对我有用

# ios - iPhone 定位服务 - 应用程序未显示

> ID：13007011
> 
> 赞同：0
> 
> 时间：2012-10-22T07:46:26.463
> 
> 标签：ios, service, location

我们的应用程序使用位置服务，并以正常方式注册。我们在 1 (!) iPhone 上遇到问题，无论我们做什么，它都没有显示在定位服务中。问题是，有人知道这是否是 iOS 中的错误，还是我们没有做的事情？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:32:25.097

该应用程序需要触发位置设置才能在您的手机上打开 Facebook 点击左上角然后按附近并允许一旦完成 Facebook 将出现在位置设置下

# mysql - 如何获取两个日期之间的数据？

> ID：13007013
> 
> 赞同：0
> 
> 时间：2012-10-22T07:46:40.720
> 
> 标签：mysql, jsp

我在 jsp 文件中遇到日期选择器问题。

当我单击 Allmeters.jsp 文件中的超链接时，它将打开meteridinfo.jsp。在这个文件中，我有一个名为meterid 的标签。我从 allmeters.jsp 中获得了这个 Meterid 值，而且我有两个字段，分别称为 fromdate 和 todate。通过使用这些日期，我从 mysql 表中获取数据，但问题是当我选择 fromdate 作为 2012-05-1 和 todate 作为 2012-05-11 时，它没有检索数据，但是当我将 todate 更改为 2012-05-31然后它显示来自 mysql 表的数据，这意味着当我选择一个月中的最后一个日期作为今天时，只有它来了。请帮助我。

AllMeters.jsp 的编码如下：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
        <%@page import="java.sql.*"%>
        <html>
        <head>
        <title>All Meter's</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <style>
        td{FONT: 13px Arial,sans-serif;}
        th{FONT:bold 13px Arial,sans-serif;color:white;background-color:#3366ff}
        input{FONT: 13px Arial,sans-serif;border: solid 1;}
        select{font: 13px Arial,sans-serif}
        #button{cursor:hand}
        A:hover {COLOR: red}</style>
        <script type="text/javascript">
        window.history.forward();
        function noback() { window.history.forward(); }
        </script>
        </head>
        <body>
        <table  border=1 style="" width="100%" align="center" cellpadding="5" cellspacing="0">
        <tr>
        <th>S No</th>
        <th>Meter ID</th>
        <th>Consumer ID</th>
        <th>Consumer Name</th>
        <th>Reading</th>
        <th> Date</th>
        <th>Time</th>
        <th>Status</th>
        <th>Sub Zone</th>
        <th>Zone</th></tr>
        <%
        try{
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");
        Statement st=con.createStatement();
        int mid;
        int SNo=1;
        ResultSet rs=st.executeQuery("select * from Meter_List");
        while(rs.next()){
        %>   
<tr><td align="center" bgcolor="#ededed"><%=SNo%></td><td align="center"     bgcolor="#ededed"><a  href="meteridinfo.jsp?mid=<%=rs.getInt("meterid")%>"><%=rs.getInt("Meterid")%></a></td><td align="center" bgcolor="#ededed"><%=rs.getInt("Consumerid")%></td><td  bgcolor="#ededed"><%=rs.getString("Consumername")%></td><td  align="center" bgcolor="#ededed"><%=rs.getInt("LastReading")%></td><td align="center" bgcolor="#ededed"><%=rs.getDate("Date")%></td><td align="center" bgcolor="#ededed"><%=rs.getTime("Time")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Status")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("Subzone")%></td><td align="center" bgcolor="#ededed"><%=rs.getString("zone")%></td></tr>
 <%
    SNo++;
    }
    rs.close();
    st.close();
    con.close();
    }
    catch(Exception e){}
    %>
    </tbody>
    <form action="" method="POST" name="frm_pages">
    <table style="width: 100%;" align="center" border="0">    
    </table>
    </body>
    </html>

    code of file meteridinfo.jsp

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
    <%@page import="java.sql.*"%>
    <%@page import="java.util.Date"%>
    <%@page import="java.text.SimpleDateFormat"%>
    <%
    Connection con;
    String sqlQuery="";
    Statement st;
    ResultSet rs=null;
    %>
    <html>
    <head>
    <title>Meterid Information
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <style>
    td{FONT: 13px Arial,sans-serif;}
    th{FONT:bold 13px Arial,sans-serif;color:white;background-color:#3366ff}
    input{FONT: 13px Arial,sans-serif;border: solid 1;}
    select{font: 13px Arial,sans-serif}
    #button{cursor:hand}
    A:hover {COLOR: red}</style>
    <link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />
    <script type="text/javascript" src="jquery.1.4.2.js"></script>
    <script type="text/javascript" src="jsDatePick.jquery.min.1.3.js"></script>
    <script type="text/javascript">
    function calendarSetup() {pick("inputField1");pick("inputField2");} //initialize calendar on each date input field 
    function pick(inputField){new JsDatePick({useMode:2,target:inputField,dateFormat:"%d-%m-%Y"});} //display calendar for a given date input field
    </script>
    </head>
    <body onload=calendarSetup()>
    <body onload=calendarSetup()>
    <form action="./meteridinfon.jsp" method="get" name="search">
    &nbsp;<table width="500px;"align="center" border="0" cellpadding="4" cellspacing="3" bgcolor="#cccccc"  bordercolor="#000000">
    <tbody><tr>
    <th colspan="3" align="middle"><strong>Meter ID Readings</strong></th></tr>
    <tr><td>
    <input type=hidden name="mid" value="<%=request.getParameter("mid")%>">
    <label name="name" value="<%=request.getParameter("mid")%>"><font size="4">Meter ID : <%=request.getParameter("mid")%></font></label></td>
    </tr>
    <tr><td class="options1"  colspan="3">
    <font size="4">From</font>
    <input type="text" size="20" maxlength="10" id="inputField1" name="fromDate">
    <font size="4">To</font>
    <input type="text" size="20" id="inputField2" name="toDate">
    </font>
    </td></tr>
    <tr><td style="height: 30px;" colspan="4" align="center">
    <input name="Search" value="Search"  style= "HEIGHT:30px" style="width: 90px;  border: 1px solid rgb(13, 31, 78);" type="submit">
    </td></tr>
    <%
    try
    {
    int mid=Integer.parseInt(request.getParameter("mid")); 
    out.println("mid ===> +"+mid);    
    String fromDate=request.getParameter("fromDate"); 
    String toDate=request.getParameter("toDate"); 
    out.println("fromDate ===> +"+fromDate);
    out.println("toDate ===> +"+toDate);
    String query="select LastReading,Date,Time from Meter_List where Date between str_to_date('"+fromDate+"', '%Y-%m-%d') and str_to_date('"+toDate+"', '%Y-%m-%d') and Meterid="+mid;    
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");
    st=con.createStatement();
    if(fromDate !=null){        
    rs=st.executeQuery(query);
    }
    //ResultSet rs=st.executeQuery("select LastReading,Date,Time from Meter_List where Meterid="+meterid);
    while(rs.next()){
    %>
    <table width="65%" align="center">
    <tr bgcolor="lightblue">
    <td>Reading</td>
    <td bgcolor="lightblue"><%=rs.getInt("LastReading")%></td>
    </tr>
    <tr bgcolor="lightblue">
    <td>Installation Date</td>
    <td bgcolor="lightblue"><%=rs.getDate("Date")%></td>
    </tr>
    <tr bgcolor="lightblue">
    <td>Inastallation Time</td>
    <td bgcolor="lightblue"><%=rs.getTime("Time")%></td>
    </tr>    
    <%
     }
    rs.close();
    st.close();
    con.close();
    }
    catch(Exception e){
    e.printStackTrace();
    }
    %>
    </table>
    </tbody>
    </table>
    </div>
    </body>
    </html> 
```

在 mysql 表中，我的日期值如下：2012-05-10、2012-03-04、2012-03-04、2012-09-12、2012-09-12、2012-09-12、2012-09 -12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:52:15.937

```
SELECT 
    * 
FROM my_table 
WHERE date(date_column1) >= DATE(NOW()) 
AND date(date_column2) <= DATE(NOW()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:57:59.870

您可以使用

```
select * from my_table where date_coumn between '2012-05-01' AND '2012-05-11' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T07:58:47.233

```
select LastReading,Date,Time from Meter_List
where str_to_date(date, '%Y-%m-%d') 
between str_to_date('"+fromDate+"', '%Y-%m-%d') and 
str_to_date('"+toDate+"', '%Y-%m-%d') and Meterid="+mid; 
```

# spring - Java Web 应用程序使用 Spring 模块化

> ID：13007015
> 
> 赞同：3
> 
> 时间：2012-10-22T07:46:58.480
> 
> 标签：spring, web-applications, modularity

我正在尝试构建这样的项目结构：

```
Project
|--Web_module.war
    |--Data_module.jar(Spring)
    |--Util_module.jar
    |--other public api... 
```

这意味着，不同的模块应该打包到不同的 jar 中，所以我必须为不同的模块（例如数据模块和 web 模块）有更多的 spring 配置（application-context.xml）。

我的问题是，如何组织所有配置文件以将它们正确包含在 Web 模块中。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:19:28.940

计划为您预期的每个 jar 文件创建一个 eclipse 项目。

根据您的项目功能选择 jars 文件/eclipse 项目，使其尽可能模块化和自包含。

在每个eclipse项目中使用junit测试来彻底测试单个项目/模块，使用spring单元测试支持

每个 Eclipse 项目都将包含自己的 spring 配置上下文文件，例如 Util_module 项目可能包含 util-context.xml

最后有一个 Eclipse 动态 Web 项目作为包装 Web 应用程序，它将聚合所有“模块”项目

Eclipse Web 项目中应包含 HTML、JS、JSP 等 UI 工件以及使用 Web 应用程序上下文（如控制器、servlet 过滤器等）的 Java 代码

在 Eclipse Web 项目的 java 构建路径中，但模块“项目”为“必需”项目

在 Eclipse Web 项目的部署程序集中，添加模块“项目”作为依赖项。

现在，当您构建和部署 Web 应用程序时，所有依赖的模块项目也将编译和部署，但更重要的是，所有项目功能将被划分为单独的模块化项目

小心设置项目之间的依赖关系，以免引入循环依赖关系

当需要维护干净和相关的模块时，不要害怕重构项目结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T13:20:31.817

为了让您的模块发布它们自己的配置（以及您的主应用程序以自动检测它们），您可以在您的主 applicationContext.xml 中，使用带有通配符的模式从类路径中导入其他 context.xml 文件：

```
<import resource="classpath*:conf/moduleContext.xml" /> 
```

这告诉 spring 在所有匹配 conf/moduleContext.xml 的 jar 中查找和读取文件。请注意，对此有一点限制：您必须将上下文文件放在至少一个目录中（而不是在类路径的根目录中）。这就是为什么在我的示例中您有 de“conf”目录。

# c++ - 在 C++ 中解析二进制消息。任何带有示例的库？

> ID：13007027
> 
> 赞同：4
> 
> 时间：2012-10-22T07:48:21.053
> 
> 标签：c++, parsing, bit-manipulation

我正在寻找任何在 C++ 中解析二进制 msg 的示例库。大多数人要求读取二进制文件或在套接字中接收到的数据，但我只有一组需要解码的二进制消息。[有人提到 boost::spirit](https://stackoverflow.com/questions/2214863/name-me-a-binary-parser-a-parser-for-binary-data)，但我无法找到适合我需要的示例。

例如：9A690C12E077033811FFDFFEF07F042C1CE0B704381​​E00B1FEFFF78004A92440

其中前 8 位是前导码，接下来的 6 位是 msg ID（从 0 到 63 的整数），接下来的 212 位是数据，最后 24 位是 CRC24。

所以在这种情况下，味精 26，我必须从 212 个数据位中获取这些数据：

*   4位整数值
*   4位整数值
*   从 0 到 63.875 的 9 位浮点值，其中 LSB 为 0.125
*   4位整数值

**编辑：我需要在位级别操作，所以 memcpy 不是一个好的解决方案，因为它复制了许多字节。要获得第一个 4 位整数值，我应该从一个字节中获得 2 位，从下一个字节中获得另外 2 位，移动每一对并组合。我要求的是一种更优雅的提取值的方式，因为我有大约 20 条不同的消息，并且希望找到一个通用的解决方案来在位级别解析它们。**

等等。

你知道任何可以轻松实现这一目标的库吗？

我还发现了其他使用 static_cast 的[Q/A 。](https://stackoverflow.com/questions/4749325/parsing-binary-message-stream-in-c-c)我用谷歌搜索了它，对于每个推荐这种方法的人，还有另一个关于字节序的警告。由于我已经收到我的消息，我不知道这样的警告是否适用于我，或者只是用于套接字通信。

编辑： boost:dynamic_bitset 看起来很有希望。使用它有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T08:05:28.190

如果找不到通用库来解析数据，请使用位域获取数据并将其 memcpy() 放入`struct`. 请参阅链接[位域](http://www.cs.cf.ac.uk/Dave/C/node13.html)。这将更加简化您的应用程序。

不要忘记打包结构。

例子：

```
#pragma pack

include "order32.h"
struct yourfields{
#if O32_HOST_ORDER == O32_BIG_ENDIAN
   unsigned int preamble:8;
   unsigned int msgid:6;
   unsigned data:212;
   unsigned crc:24;
#else
   unsigned crc:24;
   unsigned data:212;
   unsigned int msgid:6;
   unsigned int preamble:8;
#endif
}/*__attribute__((packed)) for gcc*/; 
```

如果您的机器使用 LITTLE ENDIAN 或 BIG ENDIAN 格式，您可以做一些编译时检查来断言。之后将其定义为预处理符号::

```
//order32.h

#ifndef ORDER32_H
#define ORDER32_H

#include <limits.h>
#include <stdint.h>

#if CHAR_BIT != 8
#error "unsupported char size"
#endif

enum
{
    O32_LITTLE_ENDIAN = 0x03020100ul,
    O32_BIG_ENDIAN = 0x00010203ul,
    O32_PDP_ENDIAN = 0x01000302ul
};

static const union { unsigned char bytes[4]; uint32_t value; } o32_host_order =
    { { 0, 1, 2, 3 } };

#define O32_HOST_ORDER (o32_host_order.value)

#endif 
```

感谢 Christoph @[这里的代码](https://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine)

使用位域及其输出的示例程序：

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <memory.h>
using namespace std;

struct bitfields{
  unsigned opcode:5;
  unsigned info:3;
}__attribute__((packed));

struct bitfields opcodes;

/* info: 3bits; opcode: 5bits;*/
/* 001 10001  => 0x31*/
/* 010 10010  => 0x52*/

void set_data(unsigned char data)
{
  memcpy(&opcodes,&data,sizeof(data));
}

void print_data()
{
  cout << opcodes.opcode << ' ' << opcodes.info << endl;
}

int main(int argc, char *argv[])
{
  set_data(0x31);
  print_data(); //must print 17 1 on my little-endian machine
  set_data(0x52); 
  print_data(); //must print 18 2
  cout << sizeof(opcodes); //must print 1
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:04:51.870

您可以自己操作位，例如解析 4 位整数值：

```
char[64] byte_data;
size_t readPos = 3; //any byte
int value = 0; 
int bits_to_read = 4;
for (size_t i = 0; i < bits_to_read; ++i) {
    value |= static_cast<unsigned char>(_data[readPos]) & ( 255 >> (7-i) );
} 
```

浮点数通常作为字符串数据发送：

```
std::string temp;
temp.assign(_data+readPos, 9);
flaot value = std::stof(temp); 
```

如果您的数据包含自定义浮点格式，那么只需提取位并进行数学运算：

```
char[64] byte_data;
size_t readPos = 3; //any byte
float value = 0; 
int i = 0;
int bits_to_read = 9;
while (bits_to_read) {
    if (i > 8) {
      ++readPos;
      i = 0;
    }
    const int bit = static_cast<unsigned char>(_data[readPos]) & ( 255 >> (7-i) );
    //here your code
    ++i;
    --bits_to_read;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:29:17.183

这是一篇很好的[文章](http://www.drdobbs.com/bitstream-parsing-in-c/184402014)，描述了该问题的几种解决方案。

`ibstream`它甚至包含对作者专门为此目的创建的类的引用（尽管链接似乎已失效）。我能找到的关于这个类的唯一其他提及是在[这里](http://sourceforge.net/projects/libbit/)`bit`的C++ 库中——它可能是你需要的，虽然它不流行并且它在 GPL 下。

无论如何，这`boost::dynamic_bitset`可能是最好的选择，因为它经过时间考验和社区证明。但我没有个人经验。

# java - android中finish()和this.finish()的区别

> ID：13007030
> 
> 赞同：-2
> 
> 时间：2012-10-22T07:48:27.577
> 
> 标签：java, android

提供`finish()`and `this.finish()`in `onPause()`or`onStop()`方法是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:49:34.243

是的。请熟悉`this.`-> 它的值是对当前对象的引用。例如，如果您有一个名为 的类`Foo`，并且它有一个名为 的方法`method()`，那么`this`其中将是对 的实例`Foo`（即：`Foo`对象）的引用。通常你不需要使用`this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:52:07.080

`this`在任何情况下都是指包含类。因此，如果您在 an 中使用该方法`Activity`，则`this.finish()`与`finish().`但是，如果您`this`在不同的类类型中使用，您可能没有`this.finish()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-07T13:19:08.720

即使这个问题已经存在 3 年了。我更愿意为现在和未来的研究人员点亮一些光。

`this`只是一个对象引用。你不必`this`每次都使用，除了你需要从子类实例中获取父类的引用。

让我们在使用`Thread`类时考虑一个示例。

```
public class A
{
   public A()
    {
        new Thread(new Runnable()
         {
             public void start()
             {
                  B child=new B(A.this);//In this scenario,'A.this' refers to the parent class 'A' in which the 'Thread' class instantiated.If you simply pass 'this' ,then it would refer to the 'Thread' class as this statement executed in the current scope.
             }
         }).start();
    }
}
public class B
{
A parent;
    public B(A parent)
    {
        this.parent=parent;//'this' refers to the class B ,so that it can access the global variable 'parent' ,then assigns it with the local variable 'parent' passed through the constructor.
    }
} 
```

就像上面列出的那样，关键字有不同的用法。`this`最好在这里参考oracle的文档[https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html](https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:50:49.783

`finish()`和`this.finish()`是一样的。

对于问题的另一部分，请[阅读 Activity 生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T08:01:00.447

在你的情况下是一样的。有时使用 this->... 如果您有同名的成员和方法参数（如下例所示），这很重要：

```
 class foo{

    int number;

    void setNumber(int number);

    } 
```

所以你可以用你的方法写

```
 void foo::setNumber(int number)
    {
    this->number = number; 
    } 
```

所以很清楚你使用了哪个元素。但是请注意不要使用相同的名称，这不是很好。

# javascript - 查找文件名然后查找匹配的字符串

> ID：13007042
> 
> 赞同：0
> 
> 时间：2012-10-22T07:49:33.130
> 
> 标签：javascript, jquery, string, find, pattern-matching

它即将找到文件名，然后找到一些匹配的字符串

```
var imgurl = "http://domain.com/wp-content/uploads/2012/10/DSC_2355-515x440.test.jpg";
var filename = /.*(?=\.)/.exec(imgurl.match(/.*\/(.*)$/)[1]);

if( filename.indexOf( "515x" ) !== -1 ) {
   alert("found!")
}

$("body").append(filename); 
```

当我使用`filename.indexOf( "515x" )`所以它不起作用

但是当我使用它时它工作`imgurl.indexOf( "515x" )`

我做错了什么？

在这里测试代码：http: [//jsfiddle.net/YkXTs/](http://jsfiddle.net/YkXTs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:54:18.277

试试这个：http: [//jsfiddle.net/KQ4Kn/](http://jsfiddle.net/KQ4Kn/)

这将满足需要`filename.toString().indexOf("515x")` `:)`

**代码**

```
var imgurl = "http://domain.com/wp-content/uploads/2012/10/DSC_2355-515x440.test.jpg";
var filename = /.*(?=\.)/.exec(imgurl.match(/.*\/(.*)$/)[1]);

if(filename.toString().indexOf("515x") != -1) {
   alert("found!")
}

$("body").append(filename);
​ 
```

# java - 如何模拟计算机组装

> ID：13007044
> 
> 赞同：0
> 
> 时间：2012-10-22T07:49:36.957
> 
> 标签：java, animation

我只是想问一下您是否有关于计算机模拟工作区装配的建议。

我想做一个像[这样](http://vimeo.com/15588533)的软件，但问题是我不知道如何开始。使用 Java 编程制作这样的软件需要什么包/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:03:06.827

有一些工具可以创建这些视频，例如[http://usa.autodesk.com/3ds-max/](http://usa.autodesk.com/3ds-max/)中的 3D Studio， 还有用于后期制作视频的视频工具，例如 Adob​​e Premiere 和其他一些免费工具。

你真的应该忘记编程来做到这一点……除非你想成为一名 3D 程序员。如果您甚至不知道 Java 或其他软件能做什么，那就算了。使用现有工具来做到这一点。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:58:59.007

我认为，这种模拟不是在某种编程语言中制作的，而是在一些制作 3D 动画的软件中制作的，比如 3D MAX 或类似的东西。

# android - 使用顶部的选项卡显示不同的活动

> ID：13007051
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:49:52.297
> 
> 标签：android, tabs

我正在做一个项目，我需要通过从顶部选择不同的选项卡在单个窗口中显示不同的视图。

我在谷歌上搜索了很多这个主题，但我不知道这个视图使用了什么确切的术语，所以很难搜索它。我正在研究这样的观点，

![标签活动](../Images/0a97fcc19b448f3c4847187a4ce5fe48.png)

我已经经历了几个这样的[例子](https://stackoverflow.com/q/7915253/1626878)

而[这个](https://stackoverflow.com/q/3538946/1626878)

但我无法得到想要的答案。

任何可以指导我实现此视图的有用链接都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:05:48.837

tab_host.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#0F5EC6"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:text="Back" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="80dp"
            android:gravity="center"
            android:text="ThirdEye"
            android:textSize="20dp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/logout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30dp"
            android:gravity="center"
            android:text="Logout" />
    </LinearLayout>

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />
</LinearLayout> 
```

选项卡活动

```
public class PostTabActivity extends TabActivity implements TabHost.OnTabChangeListener   {
private TabHost mTabHost;
Button back,logout;
private String sessid,Name;
double lati,longi;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    final Intent intent = getIntent();
    Bundle extras = getIntent().getExtras(); 
    if (extras != null) { 
       sessid = extras.getString("sid"); 
       lati = extras.getDouble("EXTRA_latitude"); 
       longi = extras.getDouble("EXTRA_longitude");
       Name= extras.getString("NICK_NAME");
       System.out.println("........................"+lati+".................."+longi);
    } 
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.tab_host);
    logout = (Button) findViewById(R.id.logout);
    logout.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_UP:
            new Logout(PostTabActivity.this,sessid);
                //finish();
                break;  
            }
            return true;
        }
    });
    back= (Button) findViewById(R.id.back);
    back.setOnTouchListener(new OnTouchListener()
    {

        public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_UP:
                Intent myIntent = new Intent(PostTabActivity.this, GetPost.class);
                myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                myIntent.putExtra("EXTRA_SESSION_ID", sessid);
                myIntent.putExtra("EXTRA_latitude",lati);
                myIntent.putExtra("EXTRA_longitude", longi);
                myIntent.putExtra("NICK_NAME", Name);
                startActivity(myIntent);
                finish();
                break;  
            }
            return true;
        }

    }
        );

    mTabHost = getTabHost();
    mTabHost.setOnTabChangedListener(this);

    /*Tab One */

    Intent mIntent= new Intent("proto.thirdeye.PostText");
    mIntent.setClass(this, PostText.class);
    mIntent.putExtra("sid",sessid);
    mIntent.putExtra("EXTRA_latitude",lati);
    mIntent.putExtra("EXTRA_longitude", longi);
    mIntent.putExtra("NICK_NAME", Name);

    mTabHost.addTab(mTabHost.newTabSpec("text1")
            .setIndicator("Text",
                    getResources().getDrawable(R.drawable.image))
            .setContent(mIntent));

    /*Tab Two */

    Intent mIntent1 = new Intent("proto.thirdeye.PostImage");
    mIntent1.setClass(this, PostImage.class);
    mIntent1.putExtra("sid",sessid);
    mIntent1.putExtra("EXTRA_latitude",lati);
    mIntent1.putExtra("EXTRA_longitude", longi);
    mIntent1.putExtra("NICK_NAME", Name);
    mTabHost.addTab(mTabHost.newTabSpec("image1")
            .setIndicator("Image",
                    getResources().getDrawable(R.drawable.image))
            .setContent(mIntent1));

    /*Tab Three */

    Intent mIntent2 = new Intent("proto.thirdeye.PostVideo");
    mIntent2.setClass(this, PostVideo.class);
    mIntent2.putExtra("sid",sessid);
    mIntent2.putExtra("EXTRA_latitude",lati);
    mIntent2.putExtra("EXTRA_longitude", longi);
    mIntent2.putExtra("NICK_NAME", Name);
    mTabHost.addTab(mTabHost.newTabSpec("video")
            .setIndicator("Video",
                    getResources().getDrawable(R.drawable.image))
            .setContent(mIntent2));

    mTabHost.setCurrentTab(0);
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();

    }

    return super.onKeyDown(keyCode, event);
}

public void onBackPressed() {
    Intent myIntent = new Intent(PostTabActivity.this, GetPost.class);
    myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    myIntent.putExtra("EXTRA_SESSION_ID", sessid);
    myIntent.putExtra("EXTRA_latitude",lati);
    myIntent.putExtra("EXTRA_longitude", longi);
    myIntent.putExtra("NICK_NAME", Name);
    startActivity(myIntent);
    finish();
    return;
}
public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub
    Log.i("Aru","                    "+tabId);
    Activity activity = getLocalActivityManager().getActivity(tabId);
    if (activity != null) {
        activity.onWindowFocusChanged(true);
    }
}
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  // Save UI state changes to the savedInstanceState.
  // This bundle will be passed to onCreate if the process is
  // killed and restarted.
  savedInstanceState.putString("sid",sessid);
  savedInstanceState.putDouble("EXTRA_latitude",lati);
  savedInstanceState.putDouble("EXTRA_longitude",longi);
  savedInstanceState.putString("NICK_NAME", Name);
  // etc.
}
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  // Restore UI state from the savedInstanceState.
  // This bundle has also been passed to onCreate.
  sessid = savedInstanceState.getString("sid");
  lati = savedInstanceState.getDouble("EXTRA_latitude");
  longi = savedInstanceState.getDouble("EXTRA_longitude");
  Name = savedInstanceState.getString("NICK_NAME");
}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    //MyApplication.activityPaused();
}
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    //MyApplication.activityResumed();
}
 } 
```

您可以为 PostImage、PostVideo、PostText 定义自己的布局。根据您的需要自定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:30:41.637

android中有很多类型[`TabHost`](http://developer.android.com/reference/android/widget/TabHost.html)。您可以默认使用它，也可以根据需要对其进行自定义。

简单地看一下[这个](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)例子。它将为您提供默认的 android`tabHost`看看下面的代码，它将`TabHost`根据您的需要提供 -

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" android:layout_height="wrap_content" />
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" android:layout_height="fill_parent">
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

而且，也请看[这里](http://www.powenko.com/en/?p=2121)。

# ruby-on-rails - rvm 包装器仅适用于非捆绑的 gem

> ID：13007053
> 
> 赞同：1
> 
> 时间：2012-10-22T07:49:59.303
> 
> 标签：ruby-on-rails, gem, rvm

我正在尝试为 unicorn_rails 创建一个 rvm 包装器，但由于在具有不同 unicorn 版本的服务器上运行多个应用程序，它必须基于每个 gemset。经过几次谷歌搜索后，我得出的结论是，唯一的方法是`gem install unicorn --version x`从 rvm gemset 运行，然后创建包装器。无论如何要为捆绑的 gem 创建一个包装器吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:10:34.820

好的。我想通了，但这个解决方案似乎有点hacky。

```
gem install unicorn
rvm wrapper ruby-version@gemset test unicorn_rails
vi `which test_unicorn_rails` 
```

将行更改`exec unicorn_rails '$@'`为`exec bundle exec unicorn_rails '$@'`

```
gem uninstall unicorn 
```

我刚刚向 rvm 提交了一个[补丁](https://github.com/wayneeseguin/rvm/pull/1252)，以允许`rvm wrapper ruby-version@gemset test "bundle exec unicorn_rails"`创建`test_bundle_exec_unicorn_rails`.

# c# - LINQ 查询以检索项目

> ID：13007056
> 
> 赞同：1
> 
> 时间：2012-10-22T07:50:10.417
> 
> 标签：c#, asp.net, sql, linq, entity-framework

所以我使用的是 EF，我有以下实体：

*   `Website`
*   `Sector`
*   `Product`
*   `Attribute`
*   `AttributeTag`

关系如下：

![在此处输入图像描述](../Images/9701fe3766d877f9e74df5c2a80ca328.png)

我需要检索不直接链接到表的东西。例如产品需要一个`Sector`对象以便仅`Products`使用诸如`sector.Products`.

但是如果我需要`Products`在给定`Website`而不是它的父项下检索所有内容`Sector`怎么办？

在我的具体情况下，我的问题是：1）如何检索给定特定`website_id`- 的所有产品（不考虑部门）2）如何检索具有特定`tag_id`+的所有产品`website_id`。（也检索它的对应`Attribute`）

帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:02:20.367

假设您有两个侧面导航属性：

您将拥有一个`List<Sector> SectorList`产品实体。

您将拥有一个`List<Product> ProductList`部门实体。

（`sectors_products`不会作为实体出现，因为它在对象世界中不需要）。

您将拥有一个`Website Website`行业实体

您将拥有一个`List<AttributeTag> AttributeTagList`产品实体；

（`products_tags`不会作为实体出现，因为它在对象世界中不需要）。

1）类似：

```
var result = ProductEntities
             .Where(p => p.SectorList
                         .Any(s => s.WebSite.Id == <your_website_id>)
                    ); 
```

2）类似（以1）作为基本查询）

```
result = result
         .Where(p => p.AttributeTagList
                     .Any(at => at.Id == <your_tag_id>)
               ); 
```

或多合一

```
var result = ProductEntitites
              .Where(p => 
                        p.SectorList.Any(s => s.WebSite.Id == <your_website_id>) &&
                        p.AttributeTagList.Any(at => at.Id == <your_tag_id>)
                     ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:22:23.727

架构中的关系形成了一条路径。如果您想弄清楚两个实体集之间的关系，您必须遵循该路径并查询其间的所有实体。

```
var part1 = (from w in Websites
             from s in Sectors
             from p in s.Products
             where s.Website equals w
             && w.website_id equals web_id
             select p).Distinct();

var part2 = from p in part1
            let attr = p.Attributes.Where(a => a.tag_id + web_id == target_val)
            where attr.Any()
            select new { p, attr }; 
```

如果我正确理解了您的架构，那应该会提取数据来回答您问题的两个部分。

# android - 检测网格视图的滑动手势

> ID：13007061
> 
> 赞同：2
> 
> 时间：2012-10-22T07:50:35.627
> 
> 标签：android, android-layout

当用户在我的屏幕的网格视图上滑动时，我正在尝试实现一些功能。我尝试使用 SimpleOnGestureListener 如下：

```
 class MyGestureDetector extends SimpleOnGestureListener {
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {                      
                Log.w(null,"Right to Left swipe detected");

                return true;
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {                         
                Log.w(null,"Left to Right swipe detected");

                return true;
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }
} 
```

但是无法检测到运动事件。我尝试调试并看到事件 e1 作为 null 传递。有人可以帮忙吗？

# rest - 如何通过 JSON 将多个对象从 sitebricks 客户端发送到 sitebricks REST 服务？

> ID：13007062
> 
> 赞同：0
> 
> 时间：2012-10-22T07:50:38.777
> 
> 标签：rest, sitebricks

是否可以同时从 sitebricks 客户端向 sitebricks 服务发送两个或多个对象？

例如，我有一个`Person`对象和一个`JobApplication`对象。我可以做这样的事情：

```
public class ApplicationStorage {

    @Post
    public void post(Person person, JobApplication job) {
        // ...
    }    
}

WebClient client = web.clientOf("service url") ..... // here how to send the two objects ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:46:43.910

如果必须发送两个对象，则创建另一个由您希望通过 HTTP 发送的两个对象组成的对象。您的 JSON 解析器（例如：Jackson）将能够将前两个对象中的每一个序列化为 JSON，并将它们设置为新对象的 JSON 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:05:40.757

您也可以发送一个列表，但这并不理想，因为您必须处理 Java 泛型。包装器对象是最好的方法。

# r - R中的部分合并

> ID：13007078
> 
> 赞同：4
> 
> 时间：2012-10-22T07:51:50.617
> 
> 标签：r

[在我像r 中的数据帧之间的二乘二匹配](https://stackoverflow.com/questions/12123013/two-by-two-matching-between-dataframes-in-r)那样以 -7 结束之前，让我说我已经阅读了以下页面：

*   [如何将行从一个data.frame复制到另一个[R]](https://stackoverflow.com/questions/10013985/how-to-copy-row-from-one-data-frame-in-to-another-r)
*   [R如何使用来自另一个data.frame的值更新data.frame中的列](https://stackoverflow.com/questions/12427043/r-how-to-update-a-column-in-data-frame-using-values-from-another-data-frame)
*   [使用一个 data.frame 更新另一个](https://stackoverflow.com/questions/7971513/using-one-data-frame-to-update-another?rq=1)

其实最后一个真的和我想要的很像，但是不一样，因为我的栏目不一样

我有两个数据框，比如说：

```
> d <- data.frame(year=c(2004,2004,2006),month = c(1,5,3), height = c(1000,2000,3000) )
> d
  year month height
1 2004     1   1000
2 2004     5   2000
3 2006     3   3000

> e <- data.frame(year=c(2004),month=c(5), height = c(9999))
> e
  year month height
1 2004     5   9999 
```

显然真实数据比这更长。

我想将 e 中的值合并到 d

尝试原始合并：

```
> merge(d,e)
[1] year   month  height
<0 rows> (or 0-length row.names) 
```

行。所以添加“by”：

```
> merge(d,e,by=c("year","month"))
  year month height.x height.y
1 2004     5     2000     9999 
```

好的，它做了一个内部连接，并摆脱了 d 中的所有原始数据。所以尝试左外连接：

```
> merge(d,e,by=c("year","month"),all.x = T)
  year month height.x height.y
1 2004     1     1000       NA
2 2004     5     2000     9999
3 2006     3     3000       NA 
```

它做了一个连接，根据外连接定义它是正确的，但它没有做我想要的，即从 e 中的值更新 d 中的值。我真正想要的更像是一个 sql 更新：

```
for (year,month,height) in e:
    update d set d.height=e.height where d.year = e.year and d.month = e.month 
```

即我想要的结果是：

```
> magic(d,e)
  year month height
1 2004     1   1000
2 2004     5   9999
3 2006     3   3000 
```

当然，我可以只写一堆`for`循环，但我希望有一些矢量化的方式来做到这一点？

编辑：我的示例只有一个键列，但我真正的问题有两个。更新了示例以反映这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T08:00:37.293

您可以使用`data.table`

### 编辑注意 e 和 d 都有一个由月份和年份定义的键

```
library(data.table)
DD <- as.data.table(d)
DE <- as.data.table(e)

setkey(DD,  year, month)
setkey(DE,  year, month)

DD[DE, height := i.height] 
```

请注意，我在 height 前面加上了前缀，`i.`以确保它正在从`i`组件中读取高度值。

如果您阅读 data.table 小插图的介绍，您将很快了解 rownames 和 data.table 键之间的关系！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T07:58:32.300

实际上，以下方法更直接：

```
rownames( d ) <- d$id
d[ e$id, ]$height <- e$height 
```

更新：由于您的密钥实际上是“年月”，您可能最好使用数据表，但如果您不愿意使用它，您可以执行以下操作：

```
rownames( d ) <- paste( d$year, d$month )
d[ paste( e$year, e$month ), ]$height <- e$height 
```

# c - OS X 中的 POSIX API 是否需要比 Cocoa 更多的权限

> ID：13007082
> 
> 赞同：2
> 
> 时间：2012-10-22T07:52:05.687
> 
> 标签：c, macos, cocoa, posix

在 OS X 中：

我使用 Cocoa API 在用户的桌面上创建一个目录，它工作正常。但是，如果我使用 POSIX 函数

```
int mkdir(const char *path, mode_t mode); 
```

在用户的桌面上创建目录，它总是失败并返回`-1`. 但是我`mkdir()`在应用程序域目录中进行了测试，并且可以正常工作。那么，在 OS X 中调用非 Cocoa API 时是否需要更多权限？

解释为什么我需要调用 POSIX API：

我想创建一些带有属性的特殊目录，我搜索使用[setxattr](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/setxattr.2.html) () 它将添加我想要的所有属性，但是我找不到 Cocoa 使用方式`setxattr()`，是否有相应的类、方法或函数可可API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:05:41.887

我有一篇关于 using 的好文章`startAccessingSecurityScopedResource`，但根据评论，问题似乎是请求的目录不正确。

当需要时，您可以轻松地在 Cocoa 风格和 POSIX API 之间进行切换。当您需要时，这样做应该没有真正的问题。您应该始终使用 的`URLsForDirectory`方法`[NSFileManager defaultManager]`来获取用户特定的目录，因为它们可能与您期望的不同。

您应该使用类似于：

```
NSString *desktopDir = nil;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *urls = [fileManager URLsForDirectory:NSDesktopDirectory inDomains:NSUserDomainMask];

if ([urls count] > 0) {
    NSURL *desktopURL = [urls objectAtIndex:0];
    NSLog(@"%@", desktopURL);
    desktopDir = desktopURL.path;
}
if (desktopDir != nil) {
    NSString *xx = [desktopDir stringByAppendingPathComponent:@"/XXX"];
    mkdir(xx.UTF8String, 0755);
} 
```

# hibernate-search - 使用 Lucene 搜索休眠

> ID：13007090
> 
> 赞同：0
> 
> 时间：2012-10-22T07:52:34.883
> 
> 标签：hibernate-search

我想根据同义词、拼写错误的单词等进行搜索。有人可以推荐一个使用最新版本的 Hibernate Search 的好例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:55:17.310

这里真的有两件事在起作用。首先是同义词，然后是拼写错误。对于前者，我建议您查看*SynonymFilterFactory*以及如何使用[@AnalyzerDef](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#example-analyzer-def)。显然，您以某种方式需要同义词文件开头。

后一个问题（拼写错误）与其说是索引问题（与同义词一样），不如说是搜索问题。为了适应不同的拼写错误，您可以使用*FuzzyQuery*进行搜索。

# sharepoint - SharePoint 声明 HNSC 之间的信任

> ID：13007091
> 
> 赞同：0
> 
> 时间：2012-10-22T07:52:54.597
> 
> 标签：sharepoint, forms-authentication, sts-securitytokenservice, claims

我们必须使用声明和表单身份验证在同一 SPWebApplication 上的HNSC [https://division1.corp.com https://division2.corp.com。](https://division1.corp.com)登录到[https://division1.corp.com](https://division1.corp.com)时，我们应该可以访问[https://division2.corp](https://division2.corp)，但我们再次获得登录对话框。UserInformationList 在这个 HNSC 之间是同步的。通过查看cookie，它们是不同的。我们将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:21:33.783

开箱即用的 SharePoint 2010 不提供在其自己的 Web 应用程序之间共享身份验证的方法。这主要是因为每个应用程序都独立地对用户进行身份验证，并且它发出的 cookie 都标有 HTTP Only 标志。这意味着 cookie 不能被不同 DNS 名称上的其他应用程序访问（即使它们是同一个 SharePoint 场的一部分）。

最常见的解决方案是设置一个外部联合可信身份提供者（例如 ADFS）并让您的每个 Web 应用程序都信任它。然后，您可以配置您的联合身份提供者以针对您的表单提供者进行身份验证。

以下是有关 SharePoint 中的身份验证结构如何工作以及如何针对它进行开发的一些更详细信息：http: [//msdn.microsoft.com/en-us/library/gg430136.aspx](http://msdn.microsoft.com/en-us/library/gg430136.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:35:35.660

是否可以在不使用 ADFS 的情况下配置联合信任。本文“Microsoft SharePoint 2010 的基于声明的单一登录”[链接将](http://msdn.microsoft.com/en-us/library/hh446525.aspx)引导您了解将两个 Web 应用程序集成到 Intranet 和 Extranet Web 用户的 sso 环境的示例。本文介绍如何配置 New-SPTrustedIdentityTokenIssuer，您可以在其中将 ProviderRealms 添加到 SPTrustedIdentityTokenIssuer。在我们的场景中，我们设置了 -SignInUrl [https://division.corp.com/_layouts/fba/fbalogin.aspx](https://division.corp.com/_layouts/fba/fbalogin.aspx)。但我不知道如何配置 federatedAuthentication 部分。

# c# - 获取单个表中同一列的两个项目的计数

> ID：13007092
> 
> 赞同：0
> 
> 时间：2012-10-22T07:52:55.533
> 
> 标签：c#, linq-to-entities

我正在开发一个同时拥有桌面和移动客户的网站。为了进行分析，我想知道用户是通过桌面设备还是移动设备访问我的网站，因为我在数据库中有一个表，其中有几列用于存储用户的设备详细信息。我有一个名为 IsMobile 的列，因为我根据用户的设备存储真/假。现在我想使用 linq 查询来计算真假。

我正在使用下面的代码。

```
 public IList<IsMobile> IsMobile(DateTime fromDate, DateTime toDate)
    {
        var isMobile = (from d in _db.UserDeviceDetail
                        where ((d.CreatedOn.Month >= fromDate.Month && d.CreatedOn.Day >= fromDate.Day && d.CreatedOn.Year >= fromDate.Year) || (d.CreatedOn.Month <= toDate.Month && d.CreatedOn.Day <= toDate.Day && d.CreatedOn.Year <= toDate.Year))
                        group d by d.IsMobile into g 
                        select new IsMobile
                        {
                            Yes = g.Count(n => n.IsMobile == true),
                            No = g.Count(n => n.IsMobile == false)
                        }).ToList();

        return isMobile;
    } 
```

我得到了正确的计数详细信息，但是有两个列表项，一个用于计数是，另一个用于计数否，相反，我想通过一次计算是和否来获得单个列表项

原样：{是 20；否 0} {是 0; 没有 10}

应该如何：{是 20；没有 10}

我是 linq 查询的新手，请告诉我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:37:57.540

分组是使 LINQ 创建两项而不是一项的原因。它将整个项目集分成一定数量的子集，每个子​​集单独处理。

您没有分组的查询应该可以解决问题。

**UPD**：以下查询应返回包含一个 IsMobile 项目的列表。如果只返回一项而不是列表，则可以简化：

```
var isMobile = (from d in _db.UserDeviceDetail 
                        where ((d.CreatedOn.Month >= fromDate.Month && d.CreatedOn.Day >= fromDate.Day && d.CreatedOn.Year >= fromDate.Year) || (d.CreatedOn.Month <= toDate.Month && d.CreatedOn.Day <= toDate.Day && d.CreatedOn.Year <= toDate.Year)) 
                        select d).ToList(); 
return new List<IsMobile>(){
            new IsMobile{ 
                Yes = isMobile.Count(n => n.IsMobile == true), 
                No = isMobile.Count(n => n.IsMobile == false)}
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:00:11.657

`IList<IsMobile>`当您只想知道有多少项目`IsMobile == true`以及有多少项目时，为什么要选择 a `IsMobile == false`？

我会返回一个`Tuple<int, int>`：

```
public Tuple<int, int> mobileCounts(DateTime fromDate, DateTime toDate)
{
    var inTime = _db.UserDeviceDetail.Where(d=> (d.CreatedOn.Month >= fromDate.Month && d.CreatedOn.Day >= fromDate.Day && d.CreatedOn.Year >= fromDate.Year) || (d.CreatedOn.Month <= toDate.Month && d.CreatedOn.Day <= toDate.Day && d.CreatedOn.Year <= toDate.Year));
    int isMobileCount = inTime.Count(d => d.IsMobile);
    int isNotMobileCount = inTime.Count(d => !d.IsMobile);
    return Tuple.Create(isMobileCount,isNotMobileCount);
} 
```

您可以通过元组的`Item1`和`Item2`属性访问这两个信息。

# php - 使用单例模式的 PDO 连接类

> ID：13007094
> 
> 赞同：-7
> 
> 时间：2012-10-22T07:52:57.937
> 
> 标签：php, mysql, pdo, singleton

```
<?php

//db connection class using singleton pattern
class dbConn {
    //variable to hold connection object.
    protected static $db;

    //private construct – class cannot be instatiated externally.
    private function __construct()
    {

        try { // assign PDO object to db variable
            self::$db = new PDO('mysql:host=localhost;dbname=cricket', 'root', '');
            setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) { //Output error – would normally log this to error file rather than output to user.
            echo "Connection Error: " . $e->getMessage();
        }
    }

    // get connection function. Static method – accessible without instantiation
    public static function getConnection()
    {
        //Guarantees single instance, if no connection object exists then create one.
        if (!self::$db) { //new connection object.
            new dbConn();
        }
    //return connection.
    return self::$db;
    }
}
//end class

?> 
```

如果我在索引中调用此参数，请检查此错误

```
 $sql = "select * from user";
    $q = dbConn::getConnection()->query($sql);

   $result =  $q->fetch();
    print_r($result);
} 
```

教程链接：[http ://weebtutorials.com/2012/03/pdo-connection-class-using-singleton-pattern/](http://weebtutorials.com/2012/03/pdo-connection-class-using-singleton-pattern/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T08:07:34.333

您的代码有几个问题（除了 PHP 中单例模式的用处）：

单例的想法是*实例*由私有静态变量引用，在您的代码中不是这种情况，您引用 PDO 对象的实例。您的代码的*真正*单例版本必须如下所示：

```
class TrueSingleton
{
    private static $_instance;
    private $_pdo;

    private function __construct()
    {//private constructor:
        $this->_pdo = new PDO();//<-- connect here
        //You set attributes like so:
        $this->_pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        //not setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);<-- PHP can't know which setAttribute method to call on what object
    }
    public static function getConnection()
    {
        if (self::$_instance === null)//don't check connection, check instance
        {
            self::$_instance = new TrueSingleton();
        }
        return self::$_instance;
    }
    //to TRULY ensure there is only 1 instance, you'll have to disable object cloning
    public function __clone()
    {
        return false;
    }
    public function __wakeup()
    {
        return false;
    }
} 
```

其余的都是非常基本的，除了当你需要查询数据库时，你必须`$this->_pdo->query()`在成员函数中使用

# hibernate - Hibernate：使用 SubQuery 查询联接

> ID：13007096
> 
> 赞同：1
> 
> 时间：2012-10-22T07:53:06.893
> 
> 标签：hibernate

我需要将以下查询转换为休眠 -

```
select * from ep_batch eb
INNER JOIN ep_slide slide ON eb.batch_scanner_id  = slide.slide_batch_id
WHERE eb.batch_scanner_id = 1 AND 
eb.batch_status = 
(
IF((SELECT count(batch_id) as cnt from ep_batch WHERE batch_scanner_id = 1) =1,'Ready','In Progress')
) ; 
```

我确实有“幻灯片”和“批处理”pojo 分别代表 ep_slide 和 ep_batch。加入注释为 -

```
@OneToMany(mappedBy = "batch")
    private Set<Slide> slides;
@ManyToOne
    @JoinColumn(name = "batchId")
    private Batch batch; 
```

我不太确定如何添加带有条件的子查询。我正在尝试类似下面的东西 -

```
DetachedCriteria subCriteria = DetachedCriteria.forClass(Slide.class);
        subCriteria.setProjection(Projections.count("batchId")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:03:04.770

我还没有执行，但是您可以尝试下面的 HQL，适当地替换实体属性。

```
SELECT b FROM Batch b, Slide s 
WHERE b.batch_scanner_id = s.slide_batch_id AND 
b.batch_status = 
(CASE WHEN ((SELECT COUNT(bt.batch_id) FROM Batch bt WHERE bt.batch_scanner_id = 1) = 1) THEN 'Ready' 
ELSE 'In Progress' 
END); 
```

# c# - Ajax 日历控件未显示 asp.net 中的所有日期。它只显示到 20 日

> ID：13007098
> 
> 赞同：0
> 
> 时间：2012-10-22T07:53:28.423
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

Ajax 日历未在我的 asp.net 页面中显示所有日期

```
 <asp:TextBox ID="txtPurchaseDate" runat="server" Width="100px"></asp:TextBox>
 <asp:ImageButton ID="btnPurchaseDate" runat="server" Height="18px" 
      ImageUrl="~/Images/Calendar.png" Width="18px" CssClass="TopMargin" />
 <asp:CalendarExtender ID="CalendarExtender1" runat="server" 
      TargetControlID="txtPurchaseDate" PopupButtonID="btnPurchaseDate"
      Format="MM/dd/yyyy" CssClass="cal_Theme1">
 </asp:CalendarExtender> 
```

# jquery - 使用 jquery 函数 .on

> ID：13007100
> 
> 赞同：0
> 
> 时间：2012-10-22T07:53:40.323
> 
> 标签：jquery, jquery-ui

如何在加载事件上使用 .on 不止一次？

```
var $CartContent = function(){
    $Handler = $('#cartHandler');
    if($Handler.length > 0){
        $Handler.load('cart/content', function(){
            $PercentField = $('#item-percent-field');
            $PercentField.val(0);
            $('.percent-field').val(0);
            $PercentField.on('keyup', function(){
                var $Value = parseInt($(this).val());
                $.each($('.percent-field'), function(index, value){
                    var $Current = $(this).data('item');
                    $.post('cart/content', {
                        id: $Current,
                        percent: $Value
                    });
                });
            });
        });
    }
}; 
```

它只工作一次就很好。如何在每个按键上使用参数启动函数加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:57:09.610

您可以使用[keyup](http://api.jquery.com/keyup/)功能：

```
$('#item-percent-field').keyup(function(){
    $('#cartHandler').load( ...
    ...
}); 
```

但是，如果您想在每个按键上加载一个页面，请确保拥有一个快速的服务器。

关于整个问题，要说出您要做什么并不容易。

先说几句：

*   你真的想要一个名为 的函数`$CartContent`吗？为什么 ？
*   您无需测试`if($Handler.length > 0){`：如果为空，则以下行将什么也不做
*   每次有一个更改时，您是否要对每个百分比字段进行发布请求？这很奇怪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:03:12.857

我只是将 $PercentField 函数完全移出并切换到[.live()](http://api.jquery.com/live/)方法，因为在 .load 完成之前不会创建#item-percent-field

```
$(function(){
    $('#item-percent-field').live('keyup',function(){
        var $Value = parseInt($(this).val());
        $.each($('.percent-field'), function(index, value){
            var $Current = $(this).data('item');
            $.post('cart/content', {
                id: $Current,
                percent: $Value
            });
        });
    })
    var $CartContent = function(){
        $Handler = $('#cartHandler');
        if($Handler.length > 0){
            $Handler.load('cart/content', function(){
                $PercentField = $('#item-percent-field');
                $PercentField.val(0);
                $('.percent-field').val(0);;
            });
        }
    });
}); 
```

# c - 处理器负载的测试程序仅生成 3 个线程，但我们需要更多

> ID：13007105
> 
> 赞同：0
> 
> 时间：2012-10-22T07:54:02.037
> 
> 标签：c, linux, multithreading, arm, embedded-linux

我编写了一个简单的测试程序来产生一些处理器负载。它将抛出 6 个线程并在每个线程 pi 中进行计算。但是处理器在目标平台（arm）上只生成 3 个线程，普通 Linux-PC 上的同一个程序会生成全部 6 个线程。

问题是什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>

#define ITERATIONS 10000000000000
#define NUM_THREADS 6

void *calculate_pi(void *threadID) {
        double i;
        double pi;
        int add = 0;

        pi = 4;
        for (i = 0; i < ITERATIONS; i++) {
                if (add == 1) {
                        pi = pi + (4/(3+i*2));
                        add = 0;
                } else {
                        pi = pi - (4/(3+i*2));
                        add = 1;
                }
        }

        printf("pi from thread %d = %20lf in %20lf iterations\n", (int)threadID, pi, i);

        pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
        pthread_t threads[NUM_THREADS];
        int rc;
        int i;

        for ( i = 0 ; i < NUM_THREADS; i++) {
                rc = pthread_create(&threads[i], NULL, calculate_pi, (void *)i);
                if (rc) {
                        printf("ERROR; return code from pthread_create() is %d\n", rc);
                        exit(EXIT_FAILURE);
                }
        }

        for ( i = 0 ; i < NUM_THREADS; i++) {
                pthread_join(threads[i], NULL);
        }

        return(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:22:39.917

如果目的只是加载处理器，并且您有一个支持 OpenMP 的编译器，则可以使用以下内容：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <omp.h>

double calculate_pi(int iterations) {

  double pi;
  int add = 0;

  pi = 4;
  for (int ii = 0; ii < iterations; ii++) {
    if (add == 1) {
      pi = pi + (4.0/(3.0+ii*2));
      add = 0;
    } else {
      pi = pi - (4.0/(3.0+ii*2));
      add = 1;
    }
  }
  return pi;
}

int main(int argc, char *argv[]) {

  if ( argc != 2 ) {
    printf("Usage: %s <niter>",argv[0]);
    return 1;
  }
  const int iterations = atoi(argv[1]);

#pragma omp parallel
  {
    double pi = calculate_pi(iterations);
    printf("Thread %d, pi = %g\n",omp_get_thread_num(),pi);
  }
  return 0;
} 
```

通过这种方式，您可以从命令行设置迭代次数，以及从环境变量设置线程数`OMP_NUM_THREADS`。例如：

```
export OMP_NUM_THREADS=4
./pi.x 1000 
```

将以 1000 次迭代和 4 个线程运行可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:02:52.810

没有什么可以保证操作系统将创建与使用 pthread_create 生成线程一样多的内核级线程/任务。有一些 pthreads 实现可以在用户空间中做所有事情，并且只使用一个内核级线程和 cpu。许多（大多数？）实现将执行 1:1 线程，其中一个线程是一个内核级线程，因为它是最简单的实现。有些人将实现 M:N 混合模型，其中用户空间库决定产生多少内核级线程。您使用的实现可能就是这种情况。“ps -eLF”只会显示内核级线程，它没有关于用户级线程的信息。

M:N 线程的优势在于，在某些情况下，不同用户级线程之间的上下文切换可以更快。缺点是实现起来要复杂得多，而且通常实现非常脆弱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:24:25.880

当您的主线程创建一个新线程时，取决于您拥有多少 CPU 和其他一些东西，库/操作系统可以决定立即切换到新线程并运行该新线程，直到它阻塞或终止；然后切换回主线程，该线程创建另一个新线程，该线程一直运行直到它阻塞或终止，依此类推。在这种情况下，您永远不会同时运行超过 2 个线程（主线程和一个新线程）。

当然，你拥有的 CPU 越多，主线程就越有可能继续运行足够长的时间来产生所有新线程。我猜这就是发生的事情——你的 PC 的 CPU 比 ARM 系统多得多。

防止这种情况的最佳方法是使新线程的优先级低于主线程。这样，当较高优先级的主线程创建较低优先级的线程时，库/内核应该足够聪明，不会停止运行较高优先级的线程。

可悲的是，Linux 上 pthreads 的实现习惯于忽略正常的 pthreads 线程优先级。上次我研究它时，唯一的选择是使用实时线程优先级，这需要 root 访问权限并造成安全/权限灾难。这可能是由于内核中底层调度程序的限制（例如，pthreads 库无法解决的问题）。

还有另一种选择。如果您的主线程在创建任何新线程之前获取了一个互斥锁，并在创建所有新线程后将其释放，并且如果其他线程在执行任何实际工作之前尝试获取（并释放）相同的互斥锁；那么你会强制它同时拥有所有 7 个线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:04:08.353

也许 1000 秒（在睡眠中）不足以完成那么多迭代。所以程序可能在 6 个线程完成之前退出。

你试过加入而不是睡觉吗？

尝试为此替换 sleep() ：

```
for ( i = 0 ; i < NUM_THREADS; i++) {
    s = pthread_join(threads[i], NULL);
} 
```

# c - 在 C 中创建字符串的另一种方法？

> ID：13007112
> 
> 赞同：0
> 
> 时间：2012-10-22T07:54:30.430
> 
> 标签：c

> **可能重复：**
> [C -> sizeof 字符串始终为 8](https://stackoverflow.com/questions/4941142/c-sizeof-string-is-always-8)

我找到了以下创建字符串的方法：

```
#include <stdio.h>
#include <string.h>

int main(void) {
    char *ptr = "this is a short string";
    int count = sizeof ptr / sizeof ptr[0];
    int count2 = strlen(ptr);
    printf("the size of array is %d\n", count);
    printf("the size of array is %d\n", count2);
    return 0;
} 
```

我不能使用通常的方式来获取长度`sizeof ptr / sizeof ptr[0]`，这种创建字符串的方式是否有效？他的符号有什么优点和缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:11:10.430

当你这样做时

```
char *ptr = "this is a short string"; 
```

ptr 实际上是堆栈上的指针。它指向只读内存上的字符串文字。

```
[ptr] ---->  "This is a short string" 
```

因此，尝试获取 sizeof ptr 将始终评估为特定机器上 int 的大小。

但是当你尝试这个

```
char ptr[]="this is a short string"; 
```

然后实际上对于整个字符串，内存是在堆栈上创建的，`ptr`具有数组的起始地址

```
|t|h|i|s| |i|s| | |a| |s|h|o|r|t| |s|t|r|i|n|g|\0| 
```

|' '| ==> 这实际上是上图中显示的一个字节，而 ptr 保留了 |t| 的地址。

所以 size of`ptr`会给你整个数组的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T07:57:34.897

是的，使用 strlen 获取字符串的大小是有效的。更重要的`strlen`是，获取字符串大小的正确方法。这里的 sizeof 解决方案甚至是错误的。`sizeof ptr`将`8`在 64 位系统上返回，因为它是指针的大小除以 char 的大小，也就是说，`1`您将仅获得`8`.

唯一可以`sizeof`用来获取字符串大小的情况是当它被声明为字符数组 ( `char[]`) 时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T07:59:12.313

因为`ptr`是*指针*而不是*数组。*如果您使用`char ptr[]`而不是`char *ptr`，您将得到一个几乎正确的结果 - 而不是 22，它会导致 23，因为数组的大小`NUL`还包含终止字节，它不计入`strlen()`.

顺便说一句，像这样“创建”一个字符串（几乎）是有效的，但是如果你不使用字符数组，编译器会用常量字符串数组的地址初始化指针，所以你真的应该写

```
`const char *ptr` 
```

而不是你现在拥有的（即添加`const`限定符）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:57:45.490

如果您修改字符串，此代码将崩溃（因为最近的编译器将其视为常量）。此外，它会给出不正确的结果，因为 sizeof(ptr) 返回的是指针大小而不是字符串大小。

你应该写：

```
char ptr[] = "this is a short string"; 
```

因为此代码将让您找到字符串长度以及修改字符串内容。

# printing - tinymce 编辑器及其文本未打印

> ID：13007114
> 
> 赞同：1
> 
> 时间：2012-10-22T07:54:40.737
> 
> 标签：printing, tinymce, text-editor

我想用tinymce 编辑器及其文本打印一个页面。

这是我的代码..

```
<script type="text/javascript">
tinyMceEditor("StaffResponsibility,Encourager,Bonus");
function printPage(printpage1, printpage2)
{
var headstr = "<html><head><title></title></head><body>";
var footstr = "</body>";
var newstr1 = document.getElementById(printpage1).innerHTML;
var newstr2 = document.getElementById(printpage2).innerHTML;
var oldstr = document.body.innerHTML;
document.body.innerHTML = headstr+newstr1+newstr2+footstr;
window.print();
document.body.innerHTML = oldstr;
location.reload();
return false;
}
</script>  

<div style="float: right"><a href="javascript:void(0)" onclick="printPage('pnlMainHeader','div_print');"><img src="<?=$this->baseUrl('/images/icons/small/print.png')?>" title="Print" alt="Print" /></a></div>
<div id="div_print">
<?=$this->form->StaffResponsibility?>
<div class="clear10"></div>
<?=$this->form->Encourager?>
<div class="clear10"></div>
<?=$this->form->Bonus?>
<div class="clear10"></div>
</div> 
```

当我单击打印图标时，我应该使用文本打印 tinymce 编辑器。但在这里我没有得到编辑器及其文本..

问候
乌代

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:01:38.163

您需要在单击时执行以下操作

```
onclick="tinymce.triggerSave(); $( '#'+tinymce.editors.get(0).id) ).css('display','block');printPage('pnlMainHeader','div_print');" 
```

# ssl-certificate - 将电子邮件添加到使用 keytool 生成的 CSR

> ID：13007118
> 
> 赞同：9
> 
> 时间：2012-10-22T07:55:10.570
> 
> 标签：ssl-certificate, keytool, csr

按照这个：[http](http://en.wikipedia.org/wiki/Certificate_signing_request) ://en.wikipedia.org/wiki/Certificate_signing_request CSR 可以包含一个电子邮件地址。

我的问题是，考虑到我正在使用 keytool 生成 CSR，我该如何添加这样的电子邮件地址字段？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-19T08:43:55.480

生成密钥对时，您可以将*专有名称*作为带有`-dname`标志的参数传递，从而添加`EMAILADDRESS`属性。

```
keytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks -keysize 2048 -dname "CN=Your Name, EMAILADDRESS=your.name@example.com, C=UK" 
```

# sockets - winsock api会自动多线程吗？

> ID：13007120
> 
> 赞同：1
> 
> 时间：2012-10-22T07:55:18.917
> 
> 标签：sockets, winsock

我正在使用 Microsoft Windows WinSock API 的小型 http 服务器。

处理多个用户时是否需要应用多线程逻辑？

当前，当存在网络事件时，Windows 会发送一条消息，并且每条消息都携带（在 wParam 中）要在 send() 或 recv() 中使用的套接字。

当客户端 A 连接并请求几个文件时，Winsock 通常会创建一些套接字。然后我的服务器收到一条消息“将此文件发送到套接字 123”，然后“将该文件发送到套接字 456”

当另一个客户端连接时，它也会获得一些套接字，比如 789 和 654。

然后，我的服务器使用提供的套接字号响应发送数据的请求。它不必知道谁想要该文件，因为必须将正确的文件发送到正确的套接字。

我不知道在处理接受连接并将消息发送到我的程序时，Windows 本身是否使用多个线程。

所以我的问题是：

处理多个用户时是否需要应用多线程逻辑？如果是这样，我应该在什么时候创建一个线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:15:47.383

通常每个套接字使用一个线程。如果你正在接受连接，一个线程在循环中阻塞，等待传入的连接套接字。然后创建一个新线程并将这个套接字句柄传递给新线程来处理。当该连接关闭并完成时，只需让该线程终止（或加入）。这是线程服务器的基础。

在伪代码中...

```
loop {
  socket = accept();
  new ThreadHandler( socket )
} 
```

使用单个线程处理多个套接字是很棘手的，主要是因为线程在写入时会阻塞（停止、等待），或者更常见的是从套接字读取。这不适合胆小的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:35:10.720

对于大多数应用程序，使用多个线程来处理网络连接是没有意义的。我在回答[这个问题](https://stackoverflow.com/a/12626119/613064)时做了一个小文章。

当处理接收到的数据需要不可预测的 CPU 时间时，例如在数据库服务器中，或者当程序结构不允许异步处理请求时，多线程变得有用。

还有第三种选择，“工人池”。单个线程处理所有传入连接并反序列化传入请求，然后将工作项传递给一次处理一个项的线程池。

这样，简单地打开一个连接还不会消耗整个线程所需的资源，并且系统负载隐含地受到池中线程数的限制。

# haskell - 模块化程序设计 - 在 Monad 不可知函数中组合 Monad Transformers

> ID：13007123
> 
> 赞同：15
> 
> 时间：2012-10-22T07:55:43.253
> 
> 标签：haskell, monad-transformers

我正在尝试提出模块化程序设计，我再次请求您的帮助。

作为这些后续帖子[Monad Transformers vs Passing Parameters](https://stackoverflow.com/questions/12968351/monad-transformers-vs-passing-parameters-to-functions) and [Large Scale Design in Haskell](https://stackoverflow.com/questions/3077866/large-scale-design-in-haskell/3077912#3077912)的后续，我正在尝试构建两个独立的模块，它们使用 Monad Transformers 但公开与 Monad 无关的函数，然后结合每个模块中的 Monad 不可知函数这些模块成为一个新的与 Monad 无关的函数。

我一直无法运行组合功能，例如如何在下面的示例中调用`mainProgram`using `runReaderT`？

次要问题是：是否有更好的方法来实现相同的模块化设计目标？

* * *

该示例有两个模拟模块（但可以编译），一个执行日志记录，一个读取用户输入并对其进行操作。组合功能读取用户输入，记录并打印。

```
{-# LANGUAGE FlexibleContexts #-}

module Stackoverflow2 where

import Control.Monad.Reader

----
---- From Log Module - Writes the passed message in the log
---- 

data LogConfig = LC { logFile :: FilePath }

doLog :: (MonadIO m, MonadReader LogConfig m) => String -> m ()
doLog _ = undefined

----
---- From UserProcessing Module - Reads the user Input and changes it to the configured case
----

data  MessageCase = LowerCase | UpperCase deriving (Show, Read)

getUserInput :: (MonadReader MessageCase m, MonadIO m) => m String
getUserInput = undefined

----
---- Main program that combines the two
----                  

mainProgram :: (MonadReader MessageCase m, MonadReader LogConfig m, MonadIO m) => m ()
mainProgram = do input <- getUserInput
                 doLog input
                 liftIO $ putStrLn $ "Entry logged: " ++ input 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T11:06:10.280

有一种方法可以编写程序的完全模块化版本。解决问题所需的方法是将阅读器配置捆绑到一个数据结构中，然后定义类型类来描述特定功能对该数据结构所需的部分接口。例如：

```
class LogConfiguration c where
  logFile :: c -> FilePath

doLog :: (MonadIO m, LogConfiguration c, MonadReader c m) => String -> m ()
doLog = do
  file <- asks logFile
  -- ...

class MessageCaseConfiguration c where
  isLowerCase :: c -> Bool

getUserInput :: (MonadIO m, MessageCaseConfiguration c, MonadReader c m) => m String
getUserInput = do
  lc <- asks isLowerCase
  -- ...

data LogConfig = LC { logConfigFile :: FilePath }
data MessageCase = LowerCase | UpperCase

data Configuration = Configuration { logging :: LogConfig, casing :: MessageCase }

instance LogConfiguration Configuration where
  logFile = logConfigFile . logging

instance MessageCaseConfiguration Configuration where
  isLowerCase c = case casing c of
    LowerCase -> True
    UpperCase -> False

mainProgram :: (MonadIO m, MessageCaseConfiguration c, LogConfiguration c, MonadReader c m) => m ()
mainProgram = do
  input <- getUserInput
  doLog input
  liftIO . putStrLn $ "Entry logged: " ++ input 
```

现在你可以在monad 中调用`mainProgram`a ，它会像你期望的那样工作。`Configuration``ReaderT`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T09:38:48.517

您的`mainProgram`签名有问题，因为`MonadReader`类型类包含功能依赖`MonadReader r m | m -> r`。这实质上意味着单个具体类型不能有`MonadReader`多个不同类型的实例。因此，当您说该类型`m`具有两个实例`MonadReader MessageCase`并且`MonadReader LogConfig`它违反依赖声明时。

最简单的解决方案是更改`mainProgram`为具有非泛型类型：

```
mainProgram :: ReaderT MessageCase (ReaderT LogConfig IO) ()
mainProgram = do input <- getUserInput
                 lift $ doLog input
                 liftIO $ putStrLn $ "Entry logged: " ++ input 
```

这也需要明确`lift`的 for `doLog`。

现在您可以`mainProgram`通过单独运行每个来运行`ReaderT`，如下所示：

```
main :: IO ()
main = do
    let messageCase = undefined :: MessageCase
        logConfig   = undefined :: LogConfig
    runReaderT (runReaderT mainProgram messageCase) logConfig 
```

如果您想要一个使用两个不同`MonadReader`实例的通用函数，您需要在签名中明确说明一个阅读器是另一个阅读器之上的单子转换器。

```
mainProgram :: (MonadTrans mt, MonadReader MessageCase (mt m), MonadReader LogConfig m, MonadIO (mt m), MonadIO m) => mt m ()
mainProgram = do input <- getUserInput
                 lift $ doLog input
                 liftIO $ putStrLn $ "Entry logged: " ++ input 
```

然而，这有一个不幸的结果是函数不再是完全通用的，因为两个读取器出现在 monad 堆栈中的顺序是锁定的。也许有一种更简洁的方法可以实现这一点，但我无法在不牺牲（甚至更多）通用性的情况下从头顶想出一个。

# wpf - 绑定上的方法或操作未实现错误

> ID：13007129
> 
> 赞同：8
> 
> 时间：2012-10-22T07:56:18.840
> 
> 标签：wpf, visual-studio-2010, data-binding, vspackage, graph-sharp

我目前正在开发一个 Visual Studio 插件（VSPackage），它最终应该能够可视化调用关系。为了表示它们，我想使用管理图形的[Graph# 库](http://graphsharp.codeplex.com/)（避免重叠边等）。不幸的是，我在运行时在我的 XAML 中收到以下错误消息：

**XamlParseException：方法或操作未实现。**

`<graph:CallRelationGraphLayout Graph="{Binding RelationGraph}"/>`标签上弹出错误。

```
<UserControl x:Class="Biocoder.InteractiveExploration.View.ExplorationControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
         xmlns:zoom="clr-namespace:WPFExtensions.Controls;assembly=WPFExtensions"
         xmlns:graph="clr-namespace:Biocoder.InteractiveExploration.Graph"
         xmlns:viewmodels="clr-namespace:Biocoder.InteractiveExploration.ViewModel"
         xmlns:controls="clr-namespace:Biocoder.InteractiveExploration.Controls" mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<UserControl.DataContext>
    <viewmodels:ExplorationToolViewModel/>
</UserControl.DataContext>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <zoom:ZoomControl Grid.Row="1"
                      Zoom="0.2"
                      ZoomBoxOpacity="0.5"
                      Background="Yellow">

        <graph:CallRelationGraphLayout Graph="{Binding RelationGraph}"/>

    </zoom:ZoomControl>

</Grid>

</UserControl> 
```

我还创建了自己的顶点、边和图形布局类。我的图表最终应该代表方法（顶点）之间的调用关系（边）。

**方法顶点.cs**

```
public class MethodVertex
{
    public string ID { get; private set; }
    public bool IsMale { get; private set; }

    public MethodVertex(string id, bool isMale)
    {
        ID = id;
        IsMale = isMale;
    }

    public override string ToString()
    {
        return string.Format("{0}-{1}", ID, IsMale);
    }
} 
```

**关系边缘.cs**

```
public class RelationEdge : Edge<MethodVertex>
{
    public string Id { get; private set; }

    public RelationEdge(string id, MethodVertex source, MethodVertex target)
        : base(source, target)
    {
        Id = id;
    }
} 
```

**CallRelationGraphLayout.cs**

```
public class CallRelationGraphLayout : GraphLayout<MethodVertex, RelationEdge, CallRelationGraph>
{} 
```

**CallRelationGraph.cs**

```
public class CallRelationGraph : BidirectionalGraph<MethodVertex, RelationEdge>
{
    public CallRelationGraph()
    {}

    public CallRelationGraph(bool allowParallelEdges)
        : base(allowParallelEdges)
    { }

    public CallRelationGraph(bool allowParallelEdges, int vertexCapacity)
        : base(allowParallelEdges, vertexCapacity)
    {}
} 
```

在**ExplorationToolViewModel**我声明了 RelationGraph 如下：

```
private CallRelationGraph _relationGraph;
public CallRelationGraph RelationGraph
{
    get { return _relationGraph; }
    set
    {
        if (value != _relationGraph)
        {
            _relationGraph = value;
            NotifyPropertyChanged("RelationGraph");
        }
    }
}

public event PropertyChangedEventHandler PropertyChanged;

public void NotifyPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
} 
```

我可能还应该提到的是，我有时会显示以下错误，但项目会编译并运行。

*GenericArguments[1], 'Biocoder.InteractiveExploration.Graph.RelationEdge', on 'GraphSharp.Algorithms.Layout.ILayoutAlgorithm`3[TVertex,TEdge,TGraph]' 违反了 'TEdge' 类型的约束。*

也许它是问题的根源，但自从它编译以来我忽略了它，我按照本[教程](http://sachabarbs.wordpress.com/2010/08/31/pretty-cool-graphs-in-wpf/)做了它。

奇怪的是，它实际上在使用 Graph# 提供的 DLL 的普通 WPF 应用程序中工作。当我离开 Graph 属性时，错误不会出现，所以我猜它与 Graph 属性有关。关于如何解决这个问题的任何提示？

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T16:59:29.133

I've experienced the same issue when using Graph# in a VSPackage. I was able to overcome the issue by not using Bindings for the graph, but by assigning the `Graph` property in CodeBehind.

This led to an exception that the WPFExtensions assembly could not be loaded when assigning the `Graph` property. I suspect that the reason for that is that in GraphSharp.Controls, the assembly is used in XAML, but the reference is not added when compiling as there are no references in code. I was able to fix this by adding the following line before assigning the `Graph` property:

```
var a = System.Reflection.Assembly.Load("WPFExtensions, Version=1.0.3437.34043, Culture=neutral, PublicKeyToken=null"); 
```

This line loads the WPFExtensions library before WPF tries to load it based on the reference in the XAML. Afterwards, the graph was shown.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T12:02:02.847

在我的情况下，程序集没有复制到输出文件夹，因为复制本地设置为 false。将 copy local 设置为 true 解决了它。（程序集 A 依赖于没有复制本地标志的程序集 B。）

# perl - Perl 中的 OPTIONS HTTP 请求

> ID：13007132
> 
> 赞同：2
> 
> 时间：2012-10-22T07:56:31.240
> 
> 标签：perl, http, request, http-options-method

需要在 Perl 中发送 HTTP OPTIONS 请求。浏览了几个CPAN模块；阅读文档，没有提到 OPTIONS 请求方法，只是 GET、POST、PUT、DELETE。

我需要手动格式化吗？或者我的 google-fu 是否可能缺少另一个库/模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T08:32:21.113

该[`HTTP::Request`](https://metacpan.org/module/HTTP%3a%3aRequest)模块的文档说：

> 该方法应该是一个短字符串，**如**“GET”、“HEAD”、“PUT”或“POST”。

所以：

```
use v5.16;
use warnings;

use HTTP::Request;
use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
my $request = HTTP::Request->new(OPTIONS => 'http://www.example.com/');
my $response = $ua->request($request); 
```

我没有对 OPTIONS 请求提供有用响应来测试响应的服务器，但是当我在设置代理后检查它时，请求看起来不错。

# c++ - QGraphicsView / QGraphicsScene 定时器事件不工作

> ID：13007136
> 
> 赞同：1
> 
> 时间：2012-10-22T07:57:20.570
> 
> 标签：c++, qt, user-interface, qt4

我正在尝试在 qgraphicsview 中实现一个基本的 qtimer，但似乎无法使其正常工作。

这是我的 main.cpp 代码：

```
int main(int argc, char * argv[]) {

    QApplication app(argc, argv);//should stay on the stack

    QGraphicsScene * scene = new QGraphicsScene();//this is the scene -- the canvas that holds everything!

    // a view just adds stuff to the scene in that view port

    QGraphicsView * view = new Game(scene);//create a new view

    return app.exec();
} 
```

这是视图标题...注意 qtimer 和 Advance 功能

```
class View: public QGraphicsView {//inherits qwidget -- so we can make it full screen there

    Q_OBJECT

    public:
        View(QGraphicsScene * _scene);//this is responsible for setting up the screen and instantiating several elements
        ~View();

    protected://variables
        QGraphicsScene * scene;
        QTimer * timer;

    protected://functions

        int const int_height();//converts qreal to an int
        int const int_width();

        qreal const height();// 
        qreal const width();//this is the actual qreal floating point number 

        virtual void paintEvent(QPaintEvent * event) {};
        void timerEvent(QTimerEvent * event) {cout << "HELLO << ads" << endl;};
        virtual void keyPressEvent(QKeyEvent * event) {};
        virtual void update() = 0;

        void advance() { cout << "HELLO WORLD" << endl;}        
    private:
        qreal _height;
        qreal _width;

}; 
```

最后，我的视图实现构造函数：

```
View::View(QGraphicsScene * _scene) : QGraphicsView(_scene) {

    scene = _scene;//set the scene which is the parent over this 

    this->showMaximized();

    QRectF geometry = this->contentsRect();

    _height = geometry.height();
    _width = geometry.width();

    this->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    this->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);

    scene->setSceneRect(0, 0, this->int_width(), this->int_height());
    // this->centerOn(qreal(0), qreal(0));

    this->setGeometry(0, 0, _width, _height);
    this->setFixedSize(_width, _height);

    timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), scene, SLOT(advance()));
    timer->start(1000);
    timer->setInterval(100);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:08:59.130

您需要将您的 Advance() 函数声明为头文件中的一个插槽。否则 Qt 不知道这个特定的函数是一个槽：

```
protected slots:
    void advance() { cout << "HELLO WORLD" << endl; } 
```

然后，您将超时信号连接到场景中的 Advance() 插槽 - 但您在视图中声明了它。当您当前在视图中时，您可以使用`this`指针将信号连接到您的视图。像这样更改您的连接：

```
connect(timer, SIGNAL(timeout()), this, SLOT(advance())); 
//                                ^^^^ 
```

[编辑] 作为一个侧节点：您正在创建一个 QGraphicsView 类型的子类`Game`，但您显示了`View`. `Game`如果继承自，这可能无关紧要`View`。

# java - 是否有 Java 客户端的代理配置以进行大查询？

> ID：13007140
> 
> 赞同：1
> 
> 时间：2012-10-22T07:57:37.313
> 
> 标签：java, google-bigquery

当我尝试[Authenticating Google API with a service account with Java API](https://stackoverflow.com/questions/11827817/authenticating-google-api-with-a-service-account-with-java-api)中的代码时，我遇到了失败，需要通过代理。我发现[Python 也有同样的问题](https://stackoverflow.com/questions/11906757/where-is-proxy-configuration-to-allow-bq-tool-to-connect-to-the-internetnt)。Java客户端有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:26:50.020

好的，我们确实支持 HTTP 代理。

HTTP传输类有两种选择：`NetHttpTransport`或`ApacheHttpTransport`（基于4.0）

该文档显示了如何使用`NetHttpTransport`： [https ://developers.google.com/bigquery/articles/gettingstartedwithjava](https://developers.google.com/bigquery/articles/gettingstartedwithjava)

然后，您可以在此处设置系统属性以配置代理： [http ://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#Proxies)

# javascript - 触摸幻灯片仅在 x 轴上工作

> ID：13007142
> 
> 赞同：0
> 
> 时间：2012-10-22T07:57:39.090
> 
> 标签：javascript, android, iphone

我遇到了脚本问题。它与[jQuery Touchwipe 有关 - 仅禁用 1 轴的默认滚动](https://stackoverflow.com/questions/9774253/jquery-touchwipe-disable-default-scrolling-for-1-axis-only)。我正在为网页制作滑出式菜单（如 facebook adroid）。url 中的脚本是我正在使用的脚本。我只需要 if 或 x 轴有 preventDefaultEvents: true 就可以了。目前，我无法向任何方向滚动。我只想向上和向下滚动，并具有左右功能。

我在 url 中有脚本，并且

```
$("#my-div").touchwipe({
  wipeLeft: function() { $.closeslide.close();},
  wipeRight: function() {},
  wipeUp: function() {},
  wipeDown: function() {},
  min_move_x: 20,
  min_move_y: 0,
}); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T15:05:15.753

我有同样的问题，我想已经有人问过这个问题了。这是答案[jQuery Touchwipe - 仅禁用 1 轴的默认滚动](https://stackoverflow.com/questions/9774253/jquery-touchwipe-disable-default-scrolling-for-1-axis-only)

最好的祝愿！德尼

# xml - 查询和评估 xpath (c#) 的推荐方法

> ID：13007149
> 
> 赞同：1
> 
> 时间：2012-10-22T07:58:15.433
> 
> 标签：xml, visual-studio-2010, c#-4.0, xpath

用 c# 编写 - 我想查询一个 XML。
在此之前，我决定使用 xsd 验证来检查它的良好形式。

回到我的 Java 时代，我使用（昂贵的）xmlspy 构建和评估 xpath 查询。
是否有免费工具可以帮助我构建查询？
有没有更推荐的方式来做这些查询？既然我在 VS2010 上，是否有办法在工作室中做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:28:55.887

这个已经很老了，但它可能是您想要的：[http](http://www.keylimetie.com/blog/2006/5/4/xpathexpressions) ://www.keylimetie.com/blog/2006/5/4/xpathexpressions 上的 XPath 表达式测试应用程序。

Liquid 还销售一种可以执行此操作的 XML 工具（Liquid XML Studio），还有一个入门版，价格约为 100 美元。更多信息请访问[http://www.liquid-technologies.com/xpath-viewer.aspx](http://www.liquid-technologies.com/xpath-viewer.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:19:26.680

我的 Xpath Visualizer（免责声明：完全开源和非商业性）已经存在了 10 多年，成千上万的人使用它学习了 XPath——这是一种有趣的方式。

可以从 Lars Huttar 的网站下载：

**[http://www.huttar.net/dimitre/XPV/TopXML-XPV.html](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html)**

# php - .htaccess，多个域，非 www，强制尾部斜杠，全部重定向到 PHP 脚本

> ID：13007152
> 
> 赞同：2
> 
> 时间：2012-10-22T07:58:17.833
> 
> 标签：php, .htaccess, mod-rewrite

对一些无私的超级 htaccess 巫师绅士的挑战：

我一直在为我正在开发的一个新站点删除一个 htaccess 文件，但无法破解它。我让每个部分独立工作 - 但不能让他们一起工作。我正在基于 PHP REQUEST_URI 生成站点。多个域指向同一个目录，因此它必须适用于多个域。我正在努力完成：

1.  多个域指向同一个目录，
2.  强制非 www，
3.  强制斜杠没有扩展，和
4.  将所有不存在的内容重定向到特定脚本

本质上：

[http://www.example.com/dog/cat](http://www.example.com/dog/cat) -> 301 显示为 -> [http://example.com/dog/cat/](http://example.com/dog/cat/) -> 但默默地重定向到 -> [http://example.com/script。 php](http://example.com/script.php)

或者

[http://www.example.com/dog/cat/pig/bird/walrus](http://www.example.com/dog/cat/pig/bird/walrus) -> 301 显示为 -> [http://example.com/dog/cat/pig/bird/walrus/](http://example.com/dog/cat/pig/bird/walrus/) -> 静默重定向到 - > [http://example.com/script.php](http://example.com/script.php)

或者

[http://www.example.com/dog/cat.html](http://www.example.com/dog/cat.html) -> 301 显示为 -> [http://example.com/dog/cat/](http://example.com/dog/cat/) -> 静默重定向到 -> [http://example.com/script .php](http://example.com/script.php)

或者

[http://www.example.com/dog.php](http://www.example.com/dog.php) -> 301 显示为 -> [http://example.com/dog/](http://example.com/dog/) -> 静默重定向到[http://example.com/script.php](http://example.com/script.php)

到目前为止，我已经使用了以下片段（从记忆中原谅我）：

非www：

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

去除尾部斜杠：

```
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [L,R=301] 
```

所有脚本都不存在：

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^.*/$ ./script.php [L] 
```

我遇到了特定部分根本不起作用、递归效果等问题。我不喜欢寻求帮助，我已经尽我所能做我的功课，但我就是想不通。

我在这里发现了类似的问题，例如：

[htaccess 添加斜杠并使用干净的网址强制 www](https://stackoverflow.com/questions/4410830/htaccess-add-trailing-slash-and-force-www-with-clean-urls)

任何帮助是极大的赞赏！

**更新：**

所以我继续摆弄 .htaccess 文件。我在问题下方添加了一条评论，大意是我在使用 Firefox 的“精彩”地址栏搜索功能时遇到问题，该功能将域名重定向到搜索时域是非 www 和非尾随斜杠。正因为如此，我改变了我的方案以保持一致（防止重复），但做相反的事情：强制 www 和尾部斜杠。

以下代码产生的结果接近我正在寻找的结果：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

#Redirect Forcing trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .*[^/]$ /$0/ [L,R=301]

#Redirect non-www to www
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

#Redirect to script
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ script.php [L] 
```

我仍然需要从不存在的文件中删除扩展名，即：

www.example.com/cats.html -> www.example.com/cats/

任何建议都意味着世界...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:55:24.933

您的带状斜杠规则有问题：

```
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [L,R=301] 
```

您再次匹配相同的尾部斜杠，并在重定向中添加另一个斜杠。您的目标需要更改为：

```
RewriteRule ^(.*)/$ http://%{HTTP_HOST}/$1 [L,R=301] 
```

这肯定会导致重定向循环。否则，唯一可能成为问题的其他问题是使用`%{SCRIPT_FILENAME}`而不是`%{REQUEST_FILENAME}`. 在大多数情况下，它不应该有所作为，但第二个可能是你真正想要的：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*/$ ./script.php [L] 
```

只要 2 个重定向规则在路由到规则**之前**`script.php`，这些规则都不应该相互冲突。它在我的 vanilla apache 安装上的空白 htaccess 文件中运行良好。

# php - PHP mysql_query 返回 0 结果，即使它应该是 450

> ID：13007153
> 
> 赞同：0
> 
> 时间：2012-10-22T07:58:20.677
> 
> 标签：php, android, mysql

运行服务器端的 PHP 脚本来处理来自 Java 应用程序的查询。该表有 450 个应该返回的结果，但由于某种原因，它进入了 no business found 语句。

用于测试我使用以下 vals 从 android 应用程序发送有关 HTTPGet 的信息

varQuery2 是一个字符串并且 = 状态 varQuery1 是一个字符串并且 = MS

```
<?php

$result = mysql_query("SELECT * FROM businessdata WHERE '" 
. mysql_real_escape_string($_REQUEST['varQuery2'])."' =  '" 
. mysql_real_escape_string($_REQUEST['varQuery1'])."'") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
// looping through all results
// businesses node
$response["businesses"] = array();

while ($row = mysql_fetch_array($result)) {
    // temp user array
$business = array();
$business["bid"] = $row["idbusinessData"];
$business["name"] = $row["name"];
$business["owner"] = $row["owner"];
$business["phone_main"] = $row["phone_main"];

array_push($response["businesses"], $business);
}
// success
$response["success"] = 1;

// echoing JSON response
echo json_encode($response);
} else {
// no businesses found
$response["success"] = 0;
$response["message"] = "No businesses found";

// echo no users JSON
echo json_encode($response);
}
?> 
```

为什么这会失败以及如何解决它的任何想法？另请注意，整个脚本在选择中使用 static state = 'MS' ......即使我从浏览器窗口调用它：

```
http://address/scriptName.php?varQuery2=state+varQuery1=MS 
```

我仍然得到相同的未找到业务响应..

根据评论，下面是这里使用的表格..

```
CREATE  TABLE `test`.`businessData` (
`idbusinessData` INT NOT NULL AUTO_INCREMENT ,
`name` CHAR(255) NULL ,
`owner` CHAR(255) NULL ,
`phone_main` CHAR(10) NULL ,
PRIMARY KEY (`idbusinessData`) ); 
```

只是一点点更新，看看我是否走在正确的轨道上：

```
switch ($_GET){
case "state":
$result = mysql_query("SELECT * FROM businessdata WHERE state =  '" . mysql_real_escape_string($_REQUEST['varQuery1'])."'") or die(mysql_error());

case "zip";
// zipcode results
case "nothing";
// default results
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:00:49.180

您正在尝试选择每个业务，`"state" = "MS"`这当然每次都是错误的（您将两个*字符串*相互比较）。

您应该避免将列名作为 GET 请求的一部分。相反，请考虑为您要查询的每一列（例如`search.php?state=MS`）使用特定的 GET 字段，然后根据提供的参数构建查询。

# php - 函数中的多个可选参数

> ID：13007155
> 
> 赞同：4
> 
> 时间：2012-10-22T07:58:27.713
> 
> 标签：php, function

`getAllForms($data=null)`

```
getAllForms() and getAllForms("data") 
```

这将起作用。但我想在这样的函数中创建两个可选参数：

```
getAllForms($arg1=null,$arg2=null)

getAllForms() and getAllForms("data") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T08:14:15.810

你可以试试：

```
function getAllForms() {
    extract(func_get_args(), EXTR_PREFIX_ALL, "data");
}

getAllForms();
getAllForms("a"); // $data_0 = a
getAllForms("a", "b"); // $data_0 = a $data_1 = b
getAllForms(null, null, "c"); // $data_0 = null $data_1 = null, $data_2 = c 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T08:01:53.173

您也可以尝试使用`func_get_arg`它可以将`n`多个参数传递给函数。

[http://php.net/manual/en/function.func-get-args.php](http://php.net/manual/en/function.func-get-args.php)

**例子**

```
function foo(){
    $arg_list = func_get_args();
    for ($i = 0; $i < $numargs; $i++) {
        echo "Argument $i is: " . $arg_list[$i] . "<br />\n";
    }
}

foo(1, 2, 3); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T08:01:08.043

试试这个：

```
getAllForms($data=null,$data2=null) 
```

你在这种模式下调用它：

```
getAllForms()
getAllForms("data")
getAllForms("data","data2") 
```

第二个参数必须是不同的名称尊重第一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T08:01:14.470

您已经描述了如何做到这一点：

```
function getAllForms($arg1 = null, $arg2 = null) 
```

除了每个变量名（包括第二个）必须不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T08:07:12.833

```
<? php
function getAllForms($data1 = null, $data2 = null)
{
    if ($data1 != null)
    {
        // do something with $data1
    }

    if ($data2 != null)
    {
        // do something with $data2
    }
}
?>

getAllForms();
getAllForms("a");
getAllForms(null, "b");
getAllForms("a", "b"); 
```

或者

```
<? php
function getAllForms($data = null)
{
    if (is_array($data))
    {
        foreach($data as $item)
        {
            getAllForms($item);
        }
    }
    else
    {
        if ($data != null)
        {
            // do something with data.
        }
    }
}

getAllForms();
getAllForms("a");
getAllForms(array("a"));
getAllForms(array("a", "b"));
?> 
```

# jdbc - 挂钩 JDBC Connection.Close() 方法

> ID：13007159
> 
> 赞同：0
> 
> 时间：2012-10-22T07:58:38.960
> 
> 标签：jdbc, connection, hook

我需要挂钩现有的类方法并进行某种日志记录。这些类被编写并作为罐子放置在应用程序中。我的场景的一个典型示例如下。

1.  我们打开一个连接（java.sql.Connection）并在所有数据库操作完成后关闭连接。我在这里想要的是在每次调用 Connection.close() 方法时调用一个自定义方法。我无法为连接创建自定义分类，因为在现有项目中对此的代码更改将非常巨大。

有没有办法挂钩关闭方法。是否可以在 Java 中挂钩方法？

任何帮助表示赞赏。！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:01:46.163

有几种方法：

*   在调用时使用[`java.lang.reflect.Proxy`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)并让 InvocationHandler 执行其他操作`close()`
*   编写一个扩展的包装器`Connection`（本质上与 Pr​​oxy 相同，只是您必须自己实现所有方法并将它们链接到包含的 Connection）
*   我从未使用过它，但我相信 AspectJ 允许您使用[切入点添加行为](http://www.eclipse.org/aspectj/doc/released/progguide/starting-aspectj.html#pointcuts)

# facebook - 通过 FB 应用发布到 FB 页面墙

> ID：13007161
> 
> 赞同：-1
> 
> 时间：2012-10-22T07:58:44.627
> 
> 标签：facebook, permissions, facebook-wall

我无法发布到用户的 fb 页面。

我可以轻松地从我的应用程序发布到用户墙，但不能在用户页面墙上发布？？

我做了什么发布到用户墙上：

起初，我向作为其页面内容管理器的 USER 请求所有必需的权限：

'范围' => 'photo_upload、user_status、read_stream、publish_stream、user_photos、manage_pages、offline_access'

所以现在我的应用程序有权发布到用户墙，我所做的一切都是为了获得用户个人资料的响应：

```
$user_profile = $facebook->api('/USERNAME'); 
```

然后像这样写信给用户墙：

```
$facebook->api("/USERNAME/feed", "post", array('message' => $params['message'])); 
```

但是当我用用户页面墙尝试同样的事情时，它不起作用！

当我向用户页面询问相同的权限时，它不起作用重定向到用户墙，然后为用户而不是为用户页面设置权限。

所以现在我被卡住了，我无法让用户页面授予我权限，或者如果用户是他的页面的经理并且我获得了 manage_pages 权限，我什至需要这个？

这也不起作用：

```
$facebook->api("/PAGEID/feed?access_token=".APP_ACCESS_TOKEN, "post", array('message' => $params['message'])); 
```

..它导致：致命错误：未捕获的 OAuthException：（＃200）用户尚未授权应用程序执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:10:56.763

你已经看到[了](https://stackoverflow.com/questions/3627684/facebook-graph-api-posting-to-fan-page-as-an-admin)吗？

如果您想离线执行此操作，我认为您需要通过`access_token`其中一位管理员的长期到期时间

# c# - 自动化服务器无法创建对象：未签名的 activeX 控件在其创建的系统上工作，但在任何其他系统上均不工作

> ID：13007170
> 
> 赞同：0
> 
> 时间：2012-10-22T07:59:23.773
> 
> 标签：c#, visual-studio, c#-3.0, activex, cab

我使用并遵循[此](http://haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/)`activeX`链接创建了一个控件（**未签名**），并将其转换为文件，然后将其放置在服务器上。当我访问嵌入了从我创建 activeX 的机器（与服务器不同）的 activeX 控件的页面时，该控件工作正常，但如果我在另一台机器上访问同一页面，它会显示臭名昭著错误' '`VS 2008``cab``Automation server can't create object`

我到处搜索这个错误，我发现如果我将站点放在“ `Trusted`”区域中，它就会消失，并自定义该区域的安全设置以

```
'Enable' for 'Download unsigned activex controls'
'Disable' for 'Only allow approved domains to use activex without prompt'
'Enable' for 'Initialize and script activex controls not marked as safe for scripting'
'Disable' for 'Allow activex filtering' 
```

但是，不幸的是，它对我不起作用。**我无法理解的是，为什么它可以在我创建 activeX 的机器上运行，而不是在其他机器上运行，即使它们具有相同的 IE 设置**`Visual Studio`它与创建时注册的控件有什么关系吗？在我创建控件的机器上？

我不希望手动运行任何更改注册表的命令，因为这应该由 cab 文件本身在客户端机器上以某种方式完成

# php - 条件查询取决于 2 复选框

> ID：13007172
> 
> 赞同：1
> 
> 时间：2012-10-22T07:59:27.997
> 
> 标签：php, sql

我正在创建一个依赖于多个输入表单值的查询，并且在某些时候我正在处理三个值。查询的第一个值必须始终为 0，所以我有这个：

```
.. AND value_1 = 0 
```

我希望能够干净地做的是以下内容：

如果 checkbox_2 被选中：

```
... AND (value_1 = 0 OR value_2 = 0) 
```

如果 checkbox_3 被选中

```
... AND (value_1 = 0 OR value_3 = 0) 
```

如果 checkbox_2 和 checkbox_3 被选中

```
... AND (value_1 = 0 OR value_2 = 0 OR value_3 = 0) 
```

我在一个字符串中创建 SQL 查询，我想知道什么是一个干净的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:14:11.317

最简洁的方法是创建一个数组，其中填充了 SQL 查询中使用的选项和`implode`字符串。

```
<?php

$options = array();
$options[] = 'value_1';
$options[] = 'value_2';

// add our condition to each column
array_walk($options, function(&$v) {
    $v = sprintf('%s = 0', $v);
});

// implode into SQL
$sql = sprintf('... AND (%s)', implode(' OR ', $options)); 
```

只需确保将复选框连接到`$options`阵列即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:04:56.047

您是否希望始终选中 checkbox_1 以及 checkbox_2 或 checkbox_3？看起来像这样

```
... AND value_1 = 0 AND (value_2 = 0 OR value_3 = 0) 
```

# php - Ajax 联系表和 UTF-8

> ID：13007178
> 
> 赞同：2
> 
> 时间：2012-10-22T07:59:52.680
> 
> 标签：php, ajax, forms, utf-8, contact

我正在使用 ajax 联系表格，下载自：http: [//youhack.me/2010/07/22/create-a-fancy-contact-form-with-css-3-and-jquery/](http://youhack.me/2010/07/22/create-a-fancy-contact-form-with-css-3-and-jquery/)

一切正常，除了 UTF，因为我在提交时不能使用西里尔符号。

php：

```
$name = $_POST['name']; // contain name of person
$email = $_POST['email']; // Email address of sender 
$web = $_POST['web']; // Your website URL
$body = $_POST['text']; // Your message 
$receiver = "receiver@domain.com" ; // hardcorde your email address here - This is the email address that all your feedbacks will be sent to 

if (!empty($name) & !empty($email) && !empty($body)) {
    $body = "Name: {$name}\n\nSubject: {$web}\n\nMessage: {$body}";
    $send = mail($receiver, 'Contact from domain.com', $body, "From: {$email}");
    if ($send) {
        echo 'true'; //if everything is ok,always return true , else ajax submission won't work
    }
} 
```

它使用 jquery.validationEngine-en 进行验证。我的 html 在标题中已经有 "Content-Type" content="text/html; charset=utf-8" 。

我是 php 和 jquery 的新手，所以我会提供一些指导以在提交时使 UTF-8 工作。谢谢 ：）

**编辑：**当我尝试在必填字段上使用西里尔字符（čšćđ）时，我收到 ajax 输入错误“请仅使用字母”。如果我在非必填字段上提交带有西里尔字符的表格，我会收到并发送电子邮件，除西里尔字母外，所有字母都显示正常，如下所示：Å¡。

**编辑2：**当我将收件人设置为gmail（网络邮件）时，西里尔字符显示正常，除了在一个字段中，Ajax 不允许我使用它们（来自 Reinder 答案的正则表达式）。

当我在 Outlook（本地）中设置收件人并提交表单时，没有一个西里尔字符不显示，例如：ÄĹĄ oÄa ĹĄ ÄĹ˝Ĺ Ä

**解决感谢 Reinder 的指导和大卫**！**今天会解决的：）**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:16:24.713

查看您正在使用的插件后，我认为这与 jquery.validationEngine-en.js 中的验证正则表达式有关

当验证设置为“onlyLetter”时，它将检查使用

```
/^[a-zA-Z\ \']+$/ 
```

并且您的任何角色 čšćđ 都不允许在这里...

您需要为您使用的语言创建语言验证 javascript 并更改该正则表达式。例如，看看[这篇文章](https://stackoverflow.com/questions/2392194/how-to-match-the-international-alphabet-english-a-z-non-english-with-a-regu)

接下来是检查 PHP 文件和标头的编码。将其放在 PHP 代码的顶部

```
 header("Content-type: text/html; charset=utf-8"); 
```

检查仅在 PHP 中输​​出值时是否正确显示，如下所示：

```
echo $name; 
```

如果它们在浏览器中正确显示并且只是电子邮件错误地显示了字符，那么您也需要将编码标头传递给电子邮件

例子：

```
$headers = "From: $name <$email>\n";
$headers .= "Content-Type: text/plain; charset=UTF-8\n";
$body = "Name: {$name}\n\nSubject: {$web}\n\nMessage: {$body}";
$send = mail($receiver, 'Contact from domain.com', $body, $headers); 
```

看看PHP.NET 网站上的[邮件功能](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:16:35.307

而不是使用默认的 PHP`mail()`函数，我发现这在使用日语时会派上用场：

[http://bitprison.net/php_mail_utf-8_subject_and_message](http://bitprison.net/php_mail_utf-8_subject_and_message)**

# python - python数据和非数据描述符

> ID：13007179
> 
> 赞同：13
> 
> 时间：2012-10-22T07:59:56.507
> 
> 标签：python, descriptor, python-descriptors

根据[Python 的文档](http://docs.python.org/reference/datamodel.html#invoking-descriptors)，

> `__set__()`带有和`__get__()`定义的数据描述符总是覆盖实例字典中的重新定义。

我理解这句话没有问题，但是有人可以为我澄清为什么会有这样的规则吗？毕竟，如果我想覆盖实例字典中的属性，我已经需要*显式地*执行此操作（`inst.__dict__["attr"] = val`），因为天真的`inst.attr = val`会调用描述符的`__set__`方法，这（通常）不会覆盖实例字典中的属性。

编辑：为了清楚起见，我了解正在发生的事情，我的问题是为什么要制定这样的规则。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T08:09:51.037

覆盖适用于属于*类* `__dict__`的描述符。

Python 将始终查找`type(instance).__dict__[attributename].__get__(instance, type(instance))`，并且*不会*用于`instance.__dict__`搜索实例覆盖。

这是一个使用人为`Descriptor`类和属性的示例（这是一个带有 a`__get__`和 a的描述符`__set__`：

```
>>> class Descriptor(object):
...     def __init__(self, name):
...         self.name = name
...     def __get__(self, instance, cls):
...         print 'Getting %s, with instance %r, class %r' % (self.name, instance, cls)
... 
>>> class Foo(object):
...     _spam = 'eggs'
...     @property
...     def spam(self):
...         return self._spam
...     @spam.setter
...     def spam(self, val):
...         self._spam = val
... 
>>> Foo().spam
'eggs'
>>> foo = Foo()
>>> foo.__dict__['spam'] = Descriptor('Override')
>>> foo.spam
'eggs' 
```

如您所见，即使我`spam`在实例中添加了一个条目`__dict__`，它也被完全忽略，并且`Foo.spam`仍然使用该属性。Python 忽略了该实例`__dict__`，因为该`spam`属性同时定义了`__get__`和 a `__set__`。

如果您使用未定义覆盖工作的描述符*（*`__set__`但未调用`__get__`它：

```
>>> class Foo(object):
...     desc = Descriptor('Class-stored descriptor')
... 
>>> Foo.desc
Getting Class-stored descriptor, with instance None, class <class '__main__.Foo'>
>>> Foo().desc
Getting Class-stored descriptor, with instance <__main__.Foo object at 0x1018df510>, class <class '__main__.Foo'>
>>> foo = Foo()
>>> foo.__dict__['desc'] = Descriptor('Instance-stored descriptor')
>>> foo.desc
<__main__.Descriptor object at 0x1018df1d0> 
```

# flash - 如何使用 IE10 安装 Flash Debug Player？

> ID：13007181
> 
> 赞同：9
> 
> 时间：2012-10-22T08:00:04.797
> 
> 标签：flash, internet-explorer-10

为了在 Windows 8（IE10 随附）上测试（和调试...）我的 Flex 应用程序，我刚刚下载了[Flash Debug Player 11.4.402.287](http://download.macromedia.com/pub/flashplayer/updaters/11/flashplayer_11_ax_debug.exe) - 但是，尝试安装它只会显示一个消息框

> 安装遇到错误：您的 Microsoft Internet Explorer 浏览器包含最新版本的内置 Adob​​e Flash Player。当有新版本的 Flash Player 可用时，Windows 更新会通知您。

我在 Windows 8 上使用 Internet Explorer 10.0.9200.16384。一些 Google 研究表明 IE10 内置了 Flash 播放器（类似于 Google Chrome 的播放器），所以我寻找一种禁用播放器的方法。似乎这确实可以通过单击 IE10 工具栏中的齿轮图标，然后选择“管理加载项”来实现。出现的对话框显示了一个“Shockwave Flash Object”条目。但是，即使禁用了内置 Flash 播放器，Flash Debug Player 安装程序也会继续提供相同的消息。

有人知道如何在 IE10 中安装 Flash 调试播放器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:15:17.243

Adobe[在他们的论坛上发布了](http://forums.adobe.com/message/4652105)关于此的信息：

> 抱歉，缺少有关 Win 8 内容调试器的信息。在 Windows 8 全面发布（10/26）几周后，该调试器将在 Microsoft 网站上可供下载。

所以它似乎还不可用，但应该在接下来的几周内。

**更新**

Flash 调试播放器现已[在 adobe 网站上](http://www.adobe.com/support/flashplayer/downloads.html#fp11)提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:58:46.233

IE10 的 Flash 调试播放器现已在[Adob​​e Flash Player 支持中心](http://www.adobe.com/support/flashplayer/downloads.html#fp11)提供。

# grails - Grails 谷歌图表到 PDF

> ID：13007183
> 
> 赞同：0
> 
> 时间：2012-10-22T08:00:14.050
> 
> 标签：grails, google-visualization, export-to-pdf

我正在尝试使用模板将 Google 图表导出为 PDF，但它不接受 javascript 代码。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:51:18.303

您必须将图表作为图像获取，然后您可以将其内联到 PDF 中以用于 grails 渲染插件。我没有手头的例子，但基本上是：

[Grails 渲染插件在部署时不渲染图像](https://stackoverflow.com/questions/8209707/grails-rendering-plugin-does-not-render-images-when-deployed)

如果您使用的是 Google 的“图像图表”API，那么这很容易。较新的 javascript/svg 则更少。

# javascript - 将对象从 flex 传递给 javascript

> ID：13007184
> 
> 赞同：0
> 
> 时间：2012-10-22T08:00:28.750
> 
> 标签：javascript, flash, apache-flex

我想从 javascript 端调用 flex 中的一个方法，

这样我就可以检索包含 flex 数据的 javascript 对象。

现在我正在尝试

```
var result:Object = new Object()
var keyset:Array = data.getKeySet();

for (var i:int = 0 ; i < keyset.length ; i++) {
    result[keyset[i]] = data.get(keyset[i]);
}

return result; 
```

但它不起作用。我怎样才能使它正确？

ps 我知道这是基本问题，但即使我搜索了一个小时，我也找不到任何东西。所以请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:29:49.737

要在页面上的 Flash/Flex 和 JS 之间进行通信，请使用 ExternalInterface 类。您不能直接传递对象，但可以将对象转换为可序列化/字符串。以下是您如何调用名为“myFunc”的函数并为其设置两个参数，一个字符串和一个数字：

```
ExternalInterface.call('myFunc',1,'aString'); 
```

在函数名（必须始终是字符串）之后，有一个 ...rest 参数。简单地说，这意味着您可以向函数发送任意数量的参数，用逗号分隔它们（我们在这里做两个）。

如果您在过去的任何时候使用过 AS2，您可能知道“eval”函数，它是从 JS 继承的（因此仍然被使用）——它分析一个字符串并尝试将其解析为 JavaScript，使用它你可以从字面上理解发送 Javascript 代码而不是 func/args：

```
ExternalInterface.call('alert("Hello!")'); 
```

如果您想要双向通信，请使用 ExternalInterface.addCallBack 函数将函数注册为可从 JS 调用。

如果执行此操作时出现错误，您可能需要调整嵌入代码：“在包含 HTML 页面的 SWF 文件的对象标记中，设置以下参数：

参数名称="allowScriptAccess" 值="总是"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:10:09.917

我相信您不能直接从 JS 调用 AS3 中的方法（反之亦然）。不过，它应该有一个接口，可以在其中调用另一个。如果我没记错的话，你应该使用[`ExternalInterface`API](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)。

此外，您也不能将 Flex 对象传递给 JS（反之亦然）。尝试构建一个可序列化为 JSON 的通用对象，并使用该序列化数据相互传递数据。接收方可以将其解析回以使用数据。在[这个例子](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_5.html)中，代码将一个字符串从 JS 传递到 AS3。

在您的情况下， Flex 功能将：

*   建立一个对象
*   用数据填充它
*   将其序列化为 JSON 字符串
*   将字符串返回给调用者

那么当JS调用函数时：

*   JS接收字符串
*   用于`JSON.parse()`将 JSON 字符串重构为 JS 对象
*   使用对象

# java - Play Framework 2.0 邮件插件

> ID：13007185
> 
> 赞同：2
> 
> 时间：2012-10-22T08:00:36.743
> 
> 标签：java, playframework-2.0

我一直在使用为 Play Frameworks 2.0 创建的令人惊叹的电子邮件插件。但是，我一直在与附件作斗争。我需要使用此插件将 excel 文档作为附件发送。有没有人有这方面的经验？有没有我想念的东西？是否有另一种发送附件的方式？任何信息，将不胜感激！

上面提到的插件可以在[https://github.com/typesafehub/play-plugins/tree/master/mailer](https://github.com/typesafehub/play-plugins/tree/master/mailer)找到。

我也在他们的问题跟踪器上问了这个问题，没有任何回应。

多谢你们，

格伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:28:52.013

据我了解邮件插件 api 没有提供添加附件的功能。仅适用于文本和 html。

看看[http://commons.apache.org/email/userguide.html](http://commons.apache.org/email/userguide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T13:39:23.687

似乎它已在最新版本中实现（它适用于 Play 2.2.x，我不确定它是否适用于 Play 2.0.x）：[https ://github.com/playframework/play-mailer](https://github.com/playframework/play-mailer)

```
email.addAttachment("attachment.pdf", new File("/some/path/attachment.pdf")); 
```

你只需要改变你在 build.sbt 中的依赖： "com.typesafe.play" %% "play-mailer" % "2.4.0"

并更改您的 play.plugins ： 1500:play.api.libs.mailer.CommonsMailerPlugin

# http - 我无法使用 CORS 和 AngularJS 进行删除

> ID：13007187
> 
> 赞同：0
> 
> 时间：2012-10-22T08:00:37.777
> 
> 标签：http, angularjs, cors, access-control

我正在尝试使用 AngularJS 发出 DELETE 请求。

我正在从服务器发送此标头：

```
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Headers: origin, x-requested-with, content-type, accept');
header('Access-Control-Allow-Method: GET, POST, OPTIONS, DELETE'); 
```

但是在 Chrome 中，当我做一个

```
$http({method: 'DELETE', url: EmployeesURL + "remove/id/" + id}) 
```

它抛出一个*方法 DELETE 是 Access-Control-Allow-Methods 不允许的。*错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:33:23.423

看起来您缺少一个 's' Access-Control-Allow-Methods

# objective-c - 为什么 UITableViewCell 和 UITableViewHeaderFooterView 不共享一些共同的祖先？

> ID：13007190
> 
> 赞同：1
> 
> 时间：2012-10-22T08:00:49.617
> 
> 标签：objective-c, uiview, uitableview

除了`UIView`自己。

我的意思是它们都有 contentView 属性和许多相似之处。当苹果决定`UItableViewCell`和`UITableViewHeaderFooterView`之间的共同父代`UIView`不是更常见的东西时，他们会怎么想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:23:52.253

我认为这主要是出于历史原因：`UITableViewHeaderFooterView`在 iOS 6 中引入。此时`UITableViewCell`存在 6 个主要的 iOS 版本。在 iOS 6 之前，您使用普通的 UIViews 作为页眉和页脚。

当 Apple 决定重用概念也有利于补充视图时，他们无法将 API 的这一部分拉出到一个新类中并将其插入到 和`UITableViewCell`之间`UIView`。此外，Objective-C 并不倾向于为每个微小的实现细节引入这么多的类，例如 java。

# android - 将许多 Wifi 接入点从 Android 绘制到 mySQL 数据库

> ID：13007192
> 
> 赞同：1
> 
> 时间：2012-10-22T08:00:55.823
> 
> 标签：android, mysql, location, wifi, latitude-longitude

关于我需要为我的最后一年项目开发的应用程序，我有几个问题。

顺便说一句，它适用于室内建筑。:D

1) 我需要使用 wifi 接入点访问不断变化的纬度/经度。我如何使用 Android 设备准确实现这一目标？例如，我的设备连接到一个 Wifi 连接，然后一旦用户请求，它将显示纬度/经度。问题是，一旦用户移动并请求另一个纬度/经度位置，坐标也必须改变，具体取决于设备与 wifi 原始源之间的距离。

2）然后在实现之后，用户提出的每个纬度/经度位置请求都可以直接从设备保存到mysql数据库中，以便以后可以仅作为位置显示，而无需经纬度坐标. 用户可以在添加 Wifi 名称和位置名称的同时保存纬度/经度

3）我猜这两个是最难的，所以最后一步是只查看所有保存的位置。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:01:02.850

注意这个“答案”实际上更像是一个（长）评论。

1.  > 我需要使用 wifi 接入点访问不断变化的纬度/经度。我如何使用 Android 设备准确实现这一目标？

    这对于 SO 来说可能有点[过于宽泛](https://stackoverflow.com/faq#dontask)：也许你会在[Computer Science](http://cs.stackexchange.com)上得到更好的答案。

    维基百科有关于[室内定位](http://en.wikipedia.org/wiki/Indoor_positioning_system)的文章，更具体地说，[wifi 定位](http://en.wikipedia.org/wiki/Wi-Fi_positioning_system)可能是进一步研究的良好起点。

    但是，我会立即观察到，由于存在障碍物（例如墙壁） ，[接收到的信号强度](http://en.wikipedia.org/wiki/Received_signal_strength_indication)（由[Skyhook Wireless使用）在室内定位器​​中的定位非常差；](http://en.wikipedia.org/wiki/Skyhook_Wireless)[到达时间](http://en.wikipedia.org/wiki/Time_of_arrival)可能是一个更好的选择，但需要额外的硬件——最容易使用的方法是 GPS 重复，但遗憾的是，在欧盟内部使用此类系统是非法的。

    我怀疑您唯一实际的选择可能是[GSM 定位](http://en.wikipedia.org/wiki/Mobile_phone_tracking)，但来自蜂窝塔的准确度会很差：您可以改为考虑[femtocell 定位](http://www.ee.columbia.edu/~roger/wireless_sensing_femtocells.pdf)。

2.  > 然后在实现之后，用户提出的每一个纬度/经度位置请求都可以直接从设备保存到 mysql 数据库中，以便以后可以仅将其显示为位置，而无需经纬度坐标。用户可以在添加 Wifi 名称和位置名称的同时保存纬度/经度

    这当然更[贴近主题](https://stackoverflow.com/faq#ask)，但我在这里看不到实际问题。你被这其中的哪一部分卡住了？你想知道什么？

    已经有[很多关于 SO](https://stackoverflow.com/search?q=%5Bandroid%5D+%5Bmysql%5D+connect)讨论如何从 Android 设备访问 MySQL 数据库的问题：最常见的方法是通过 Web 服务，但如果您的威胁模型允许，您*可以*直接连接到 RDBMS。

3.  > 我猜这两个是最难的，所以最后一步是只查看所有保存的位置。

    同样，我在这里看不到实际问题。你被这其中的哪一部分卡住了？你想知道什么？

# titanium - 如何在 Titanium Studio 中模拟 iPhone 5？

> ID：13007201
> 
> 赞同：0
> 
> 时间：2012-10-22T08:01:15.767
> 
> 标签：titanium

我正在尝试运行 iPhone 模拟器来模拟 iPhone 5。我运行了应用程序 Run as > iPhone Simulator 并尝试更改设备，如下所示

![在 Titanium Studio 中配置 iPhone 模拟器以模拟 iPhone 5](../Images/ef6ac7a6617216282a81c7c82191a862.png)

但是当我运行模拟器时它仍然显示 iPhone 4 模拟器，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:47:22.060

我得到了答案。。

出于某种原因，我们无法`Hardware > Device`在 Titanium Studio 中运行时将其设置为 iPhone(Retina 4-inch)。

您在 XCode 中创建一个新的示例项目并从那里运行模拟器，并在模拟器出现 时`iPhone(Retina 4-inch)`从`Hardware > Device`菜单中进行选择。

关闭模拟器并从 Titanium Studio 运行 iPhone 模拟器，现在您将看到 iPhone 5 模拟器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T01:47:04.823

您应该更改模拟器的运行配置。

![1.点击运行配置](../Images/032ddbe4e05a074be7551bd050a89203.png)

![2.将显示类型更改为“Retina & Tall”](../Images/246fe03e9a66bd9aae27dff1d0cb0a37.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:35:34.573

只需打开xcode（欢迎屏幕就足够了，不需要空项目）。然后在主菜单中打开：**Xcode > Open Developer Tool > iOS Simulator** 然后在模拟器中在主菜单中打开：**Hardware > Device > ...select device...** 返回 Titanium Studio 并再次运行应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:15:29.443

您需要在钛之外打开 iPhone 模拟器。无需应用程序即可使用，只需打开模拟器即可。

模拟器可以在这里找到：

```
Applications > xCode (show package contents) > Contents > Developer > Platforms > iPhone Simulator > Developer > Applications > iOS Simulator. 
```

打开这个应用程序，并通过选择选择的硬件`Hardware > Device`

之后，关闭模拟器，然后像往常一样通过 Titanium 启动应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T13:50:55.300

最好的方法是转到 Titanium Studio 中的“运行配置”，然后将“显示类型”更改为 Retina。

# ios - Sqlite_prepare_v2 返回 SQLite_ERROR

> ID：13007202
> 
> 赞同：1
> 
> 时间：2012-10-22T08:01:17.597
> 
> 标签：ios, database, sqlite, syntax-error

我必须从包含一些空字段的 SQLite 数据库中打开一个表，因此，在给出要打开的表的名称和文档文件夹中的数据库地址（好吧）之后，我设置了查询，然后我使用了函数`sqlite_prepare_v2`准备提取数据，但返回值`1`( `SQLite_ERROR`) 并给出语法错误。为什么？我写对了字段名称。

```
-(NSMutableArray*)loadDatiFromTable:(NSString*) nameTable {

    NSString *query =[NSString stringWithFormat:@"SELECT id,title, ifnull(IMAGES,''),ifnull(text, ''), ifnull(NUMBER, ''),ifnull(CAP, 0) FROM %@ order by ID", nameTable];  
    sqlite3_stmt *statement;
    int sqlResult = sqlite3_prepare_v2(database, [query UTF8String], -1, &statement,nil);
    NSLog(@"The value is %d", sqlResult); // here sqlResult is 1

    if (sqlResult == SQLITE_OK) {
        while (sqlite3_step(statement) == SQLITE_ROW) {
            //......
        }
        sqlite3_finalize(statement);
    } else {
        NSLog(@"Failed from sqlite3_step(statement). Error is:  %s", sqlite3_errmsg(database) );
        // here return: "Failed from sqlite3_step(statement). Error is:  near "NUMBER": syntax error"
       sqlite3_close(database);
   }

   return self.tableArray;
}

-(id) initWithTable:(NSString*)nomeTabella withDbPath: (NSString *)dbPath { 
    self = [super init];
    if (self) {
        if (sqlite3_open([dbPath UTF8String], &database) != SQLITE_OK) {
            NSLog(@"Failed open database");
        } else {
            NSLog(@"OPEN DATABASE");
            [self loadDatiFromTable:nomeTabella ];
        }

        return self;
    }
} 
```

错误信息是：

```
 "Failed from sqlite3_step(statement). Error is:  near "NUMBER": syntax error" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:17:30.947

使用`"NUMBER"`而不是`NUMBER`确保该词不被解释为 SQL 关键字。

# groovy - 第二个地图值始终为空，即使它打印出 1

> ID：13007206
> 
> 赞同：1
> 
> 时间：2012-10-22T08:01:34.280
> 
> 标签：groovy, map

我有一些代码获取数据，然后按顺序选择它。为此，我使用了以后可以轻松访问的简单地图（我想..）。

我在循环中使用以下代码将地图插入另一个名为“公司”的地图：

```
def x = [:]
x.put(it.category[i], it.amount[i])
companies.put(it.company, x) 
```

我肯定可以写出结果：`[Microsoft:[Food:1], Apple:[Food:1]]`

但是，当我即将获得每家公司的食品价值时，它总是`null`。这是我用来获取值的代码：

```
def val = companies.get(it.company).get(key.toString())
def val = companies[it.company][key] // doesn't make a difference 
```

Val 始终为空。有人可以帮助和/或解释为什么我有这个错误。我究竟做错了什么？我的意思是，`1`当我打印出来时，我可以清楚地看到..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:33:25.137

我的猜测是，`it.category[i]`并且`key`是完全不同的类型......

您可以尝试的一件事是：

```
x.put(it.category[i].toString(), it.amount[i]) 
```

进而

```
def val = companies[it.company][key.toString()] // doesn't make a difference 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:33:39.043

解决方案很简单，将类别设为字符串：

`x.put(it.category[i].toString(), it.amount[i])`

在那次小修复之后，一切都按预期工作。

# azure - MSDN 订阅到期后 Windows Azure 门户会发生什么。

> ID：13007207
> 
> 赞同：5
> 
> 时间：2012-10-22T08:01:41.240
> 
> 标签：azure, msdn

我有 MSDN 订阅“Visual Studio Professional with MSDN”，并且我正在使用我的订阅使用 Windows Azure。我只是想知道如果我的订阅到期会发生什么，我还能永远使用 Windows Azure 门户上的免费配额吗？或者在我的 msdn 订阅到期后，我将无法访问门户。

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T09:20:11.583

订阅到期后，您应该能够继续访问 Windows Azure 门户。当您注册 MSDN 的 Windows Azure 订阅权益时，它要求您输入信用卡。根据您注册的时间，支出上限功能可能已经到位，这意味着除非您要求取消支出上限，否则您不会被收取超额费用。

查看有关[MSDN 福利](http://www.windowsazure.com/en-us/pricing/member-offers/msdn-benefits/)和[支出上限信息的信息](http://www.windowsazure.com/en-us/pricing/spending-limits/)。这也是[另一篇好文章](http://blogs.msdn.com/b/jimoneil/archive/2011/12/28/windows-azure-trial-account-spending-limit.aspx)。

当订阅完全过期时，如果您将数据保留在其中而不最终将其删除，您将需要删除支出上限以支付费用或将其删除（所有正在运行的部署都会为您停止）。我相信他们会在订阅用完后 90 天存储数据，然后再自行完全销毁。

如果您对免费站点使用 Windows Azure 网站功能，您应该能够随时继续访问这些站点（基于配额）。

您还可以随时请求将 Azure 订阅从试用或 MSDN 帐户转换为现收现付帐户（请参阅上面的最后一篇文章）。基本上，您只是取消了支出限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-22T08:44:03.330

> > 我已联系 Microsoft 将网站移至其他订阅，但这似乎是不可能的。

将一个网站从一个订阅移动到另一个订阅与在 MSDN 订阅过期后将其保留为 PAYG 不同。

# image - 如何在高度未知的视口中居中图像？

> ID：13007215
> 
> 赞同：1
> 
> 时间：2012-10-22T08:02:28.307
> 
> 标签：image, center, vertical-alignment, viewport

我正在使用 BxSlider (http://bxslider.com) 创建一个图片库，并希望在视口中水平和垂直居中图像。我也在使用调整大小的脚本，所以不知道我的图像的尺寸。

我尝试了通过 Google 找到的各种脚本，但似乎没有任何效果。

这是我的html：

```
<div id="myDiv">

    <div><img src="" /></div>
    <div><img src="" /></div>
    <div><img src="" /></div>

</div> 
```

我的 BxSlider 代码：

```
<script src="https://raw.github.com/wandoledzep/bxslider/master/jquery.bxSlider.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function(){
       $('#myDiv').bxSlider({
       mode: 'fade',
       captions: true,
       });
   });
</script> 
```

还有我的调整大小代码：

```
function resizeImg() {
    var h = $(window).height();
    if (840 > h) {
        var bw = h - 210;
        $('img').attr('height',bw);
        //alert('Height: '+h);
        // post-container-image
    }
}
jQuery(document).ready(function(){
    var h = $(window).height();
    if (840 > h) {
        resizeImg();
    }
});
$(window).resize(function(){
    var h = $(window).height();
    if (840 > h) {
        resizeImg();
    }
}); 
```

# stackexchange-api - 获取 stackexchange 用户的未读通知

> ID：13007220
> 
> 赞同：0
> 
> 时间：2012-10-22T08:02:56.233
> 
> 标签：stackexchange-api

我遇到了[StackExchange API V2 未读通知](https://api.stackexchange.com/docs/user-unread-notifications) 方法，尽管创建了一个小的 cli 脚本，该脚本在执行时会给我未读通知计数。现在，根据文档，此方法需要身份验证`(access token)`才能获取数据。

阅读[身份验证文档](https://api.stackexchange.com/docs/authentication)后，我发现需要某些参数，例如`client_id`完成 `implicit OAuth 2.0 flow`.

我尝试在以下位置注册应用程序，`stackapps.com`但它需要`OAuth Domain, Application Website`我没有的应用程序。

那么，`access_token`读取用户收件箱以获取未读通知计数的最简单方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T07:48:17.813

下面是脏的，但你可以试试

假设您在 stackOverflow 注册了应用程序，使用了一些虚拟 OAuth Domain = **abc.com**

*   点击 GET 请求：

    [https://stackexchange.com/oauth?client_id=](https://stackexchange.com/oauth?client_id=) **YR_CLIENT_ID** &scope= **no_expiry,read_inbox,private_info** &redirect_uri= **YR_REDIRECT_URL**

其中 YR_REDIRECT_URL 将类似于[http://myurl.abc.com](http://myurl.abc.com)

*   它将使用一些代码重定向到如下所示的 URL。

    **YR_REDIRECT_URL** /?code= **SOME_CODE**

*   从重定向的 URL 获取代码并形成 POST 请求

    [https://stackexchange.com/oauth/access_token?client_id=](https://stackexchange.com/oauth/access_token?client_id=) **YR_CLIENT_ID** &scope=no_expiry,read_inbox,private_info&redirect_uri= **YR_REDIRECT_URL** &client_secret= **YR_CLIENT_SECRET** &code= **SOME_CODE**

*   然后你会得到如下回复

    access_token= **YR_ACCESS_TOKEN**

您可以将生成的 access_token（连同应用程序密钥）与 no_expiry （使用**scope=no_expiry**生成）一起使用

# sql - 使用连接时 SQL 错误总和

> ID：13007221
> 
> 赞同：0
> 
> 时间：2012-10-22T08:03:01.983
> 
> 标签：sql, sql-server, join, sum

我有这个查询：

```
SELECT     BLI.EmpID, ShortEmployees.EmpName1 AS EmpName, SUM(BLI.FinalValue) AS Total
FROM       BLI 
INNER JOIN BSR ON BLI.BLID = BSR.BLID 
INNER JOIN ShortEmployees ON BLI.EmpID = ShortEmployees.EmpID
WHERE     (CONVERT(varchar, BLI.BLDate, 112) >= CONVERT(varchar, CONVERT(datetime, '1/10/2012', 103), 112)) 
AND (CONVERT(varchar, BLI.BLDate, 112)  <= CONVERT(varchar, CONVERT(datetime, '30/10/2012', 103), 112)) 
AND (BSR.BSTID = 2) 
AND (BLI.State IN (2, 6, 8, 9, 10, 12, 18))
GROUP BY BLI.EmpID, ShortEmployees.EmpName1
ORDER BY Total DESC 
```

我预计总数为 42，但我得到了 126 的三倍！

编辑：我的期望是错误的，查询返回正确的总和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:10:07.073

BSR 包含与 BLI.BLID 匹配的三个记录，或者 ShortEmployees 包含与 BLI.EmpID 匹配的三个记录。

另外，为什么要将日期转换为 varchar？看起来他们一开始都是约会对象。将您的硬编码日期从“2012 年 1 月 10 日”替换为“2012 年 10 月 1 日”的 ansi 标准

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:43:34.453

关于日期格式。对于 SQL Server，请使用此日期格式“YYYYMMDD”。SQL Server 知道如何将此日期与表中的日期列进行比较。

因此，正确的 SQL 代码可能如下所示：

`WHERE BLI.BLDate >= '20121001' AND BLI.BLDate <= '20121030'`

或者

`WHERE BLI.BLDate BETWEEN '20121001' AND '20121030'`

# c++ - 如何访问点坐标

> ID：13007226
> 
> 赞同：0
> 
> 时间：2012-10-22T08:03:26.023
> 
> 标签：c++, winforms, mouseevent

刚开始使用 GUI Windows 编程。我在 Visual Studio C++ Wondows Forms 中工作。

我已经想出了如何获取鼠标坐标并将它们转储到双点坐标变量中，但是当我尝试访问 X 和 Y 值来操作它们时，我得到了......

```
error C2248: 'System::Drawing::Point::x' : cannot access private member declared in class 'System::Drawing::Point' 
```

Point 变量称为 firstPoint，我正在尝试使用 firstPoint.X 和 firstPoint.Y 访问这些值。我想这不是正确的方法。

如何将值转换为 int 以便我可以弄乱它？Convert::ToInt32(firstPoint.x) 是引发错误的原因。

谷歌搜索不断向我发送指针主题而不是点坐标主题。

根据要求的附加代码：

```
private:
    /// <summary>
    /// Required designer variable.
    unsigned char ucRed, ucGrn, ucBlu;
    bool drawing;
    Point firstPoint, finalPoint;
    //int iShape, iX1,iY1,iX2,iY2;

private: System::Void panel1_Paint_1(System::Object^  sender, System::Windows::Forms::PaintEventArgs^  e) 
     {
        Graphics^ g = e->Graphics;

 //create an ellipse with
 //  Black color
 //  start position = firstPoint mouse coordinate
 //  width = difference between firstPoint and finalPoint, height = difference between firstPoint and finalPoint

        g->DrawEllipse(Pens::Black,firstPoint.x,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:22:26.603

使用带有大写字母的公共属性 X 和 Y（注意：区分大小写），x 和 y 是结构的私有成员变量。

[http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)

转换::ToInt32(firstPoint.X)

# asp.net - 母版页的 POST 方法问题

> ID：13007227
> 
> 赞同：1
> 
> 时间：2012-10-22T08:03:37.300
> 
> 标签：asp.net, forms, post, submit, master-pages

我正在尝试提交以下应用母版页的表单。

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
   <p>
      What is your name?
      <asp:TextBox ID="YourName" runat="server" ClientIDMode="Static"></asp:TextBox>
   </p>

   <p>
      What is your age?
      <asp:TextBox ID="YourAge" runat="server" Columns="3" ClientIDMode="Static"></asp:TextBox>
   </p>

   <p>
      What is your favorite color?<br />
      <asp:RadioButtonList ID="FavoriteColor" runat="server" ClientIDMode="Static">
         <asp:ListItem Selected="True">Red</asp:ListItem>
         <asp:ListItem>Green</asp:ListItem>
         <asp:ListItem>Blue</asp:ListItem>
      </asp:RadioButtonList>
   </p>

   <p>
      <asp:CheckBox ID="EatGreenEggsAndHam" runat="server" Checked="True" ClientIDMode="Static" 
      Text="Will You Eat Green Eggs and Ham?" TextAlign="Left" />
   </p>

   <p>
      <asp:Button ID="SubmitButton" runat="server" Text="Submit Form" 
           PostBackUrl="~/About.aspx" 
           onclick="SubmitButton_Click" />
   </p>

</asp:Content> 
```

我正在尝试使用 POST 方法从表单中获取提交的数据。

在 About.aspx 页面中，我使用以下代码

```
Response.Write(Request.Form["YourName"].ToString()); 
```

预期的行为是打印在文本框中键入的名称，ID 为“YourAge”，但提交的表单元素 ID 已更改如下

> ctl00$MainContent$YourName

为什么会这样？我需要使用 id "YourName" 获取控件的值

![在此处输入图像描述](../Images/de5048180dfc21ab8f83ecb355e148ab.png)

我想在提交表单时删除这个“ctl00$MainContent$”部分。检索表单值超出了我的范围，它是由其他人完成的。他们只要求将表单值提交为“YourName”而不是“ctl00$MainContent$YourName”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:05:27.833

尝试利用 ASP.net 提供的抽象。您可以使用`YourName.Text`检索YourName TextBox 的值。

```
Response.Write(YourName.Text); 
```

此外，`ctl00$MainContent$YourName`生成的不是元素的 ID，而是它的名称。ID 可能类似于`BodyContent_YourName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:11:05.170

首先，不建议直接从`Request.Form`. 大多数情况下，您应该使用`YourName.Text`来读取值。

但是，如果您仍想从中读取值，则`Request.Form`需要了解 ASP.NET 管道和 http 协议的工作原理。当您从浏览器提交页面时，浏览器将创建一个带有键值对的 HTTP 请求，其中键表示输入控件的“名称”，而值表示相应的值。

在您的代码中，您只是将 ID 设置为静态而不是名称。因此，要将名称设置为与 ID 相同，您可以使用针对此[SO Question描述的技术](https://stackoverflow.com/q/7897445/30594)

**更新**

我能想到的另一种方法如下

```
Response.Write(Request.Form[YourName.UniqueID].ToString()); 
```

唯一 ID 是呈现给元素的名称，您可以使用它来从`Request.Form`

# azure - 获取 Azure InstanceInput 端点端口

> ID：13007228
> 
> 赞同：6
> 
> 时间：2012-10-22T08:04:00.050
> 
> 标签：azure

我希望我的客户端与特定的 WorkerRole 实例进行通信，因此我正在尝试使用 InstanceInput 端点。

我的项目基于此问题中提供的示例：[Azure InstanceInput endpoint usage](https://stackoverflow.com/questions/11201660/azure-instanceinput-endpoint-usage)

问题是我没有获得实际实例的外部 IP 地址 + 端口，使用时`RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint;` 我只获得带有本地端口的内部地址（例如 10.xxx:10100）。我知道我可以通过 DNS 查找 (xxx.cloudapp.net) 获取公共 IP 地址，但我不知道如何为每个实例获取正确的公共端口。

一种可能的解决方案是：获取实例编号（从`RoleEnvironment.CurrentRoleInstance.Id`）并将此实例编号添加到`FixedPortRange`最小值（例如 10106）。这意味着第一个实例将**始终**具有端口 10106，第二个实例**始终**具有10107，依此类推。这个解决方案对我来说似乎有点 hacky，因为我不知道 Windows Azure 如何将实例分配给端口。

是否有更好（正确）的方法来检索每个实例的公共端口？

问题 #2：是否有关于支持 InstanceInput 终结点的 Azure Compute Emulator 的任何信息？[（正如我在评论](https://stackoverflow.com/questions/11201660/azure-instanceinput-endpoint-usage#comment17559730_11201660)中已经提到的：Azure Compute Emulator 目前似乎不支持 InstanceInputEndpoint）。

**第二种解决方案（好多了）**：

要获取公共端口，可以使用 porperty `PublicIPEndpoint`（我不知道为什么我一开始没有注意到这个属性）。

*用法*：`RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].PublicIPEndpoint;`

*警告*：属性中的 IP 地址未使用 ( [http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleinstanceendpoint.publicipendpoint.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleinstanceendpoint.publicipendpoint.aspx) )。

**第一个解决方案**：

正如已经提到的“巧妙方法”，REST 操作`Get Deployment`检索有关当前部署的有趣信息。由于我遇到了一些烦人的小“问题”，我将在此处提供 REST 客户端的代码（以防其他人遇到类似问题）：

```
X509Store certificateStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);
certificateStore.Open(OpenFlags.ReadOnly);

string footPrint = "xxx"; // enter the footprint of the certificate you use to upload the deployment (aka Management Certificate)
X509Certificate2Collection certs = 
certificateStore.Certificates.Find(X509FindType.FindByThumbprint, footPrint, false); 
if (certs.Count != 1) {
    // client certificate cannot be found - check footprint
}
string url = "https://management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deployments/<deployment-name>"; // replace <xxx> with actual values
try {
  var request = (HttpWebRequest)WebRequest.Create(url);
  request.ClientCertificates.Add(certs[0]);
  request.Headers.Add("x-ms-version", "2012-03-01"); // very important, otherwise you get an HTTP 400 error, specifies in which version the response is formatted
  request.Method = "GET";

  var response = (HttpWebResponse)request.GetResponse(); // get response

  string result = new StreamReader(response.GetResponseStream()).ReadToEnd() // get response body
} catch (Exception ex) {
  // handle error
} 
```

字符串“结果”包含有关部署的所有信息（XML 的格式在“响应正文”@ [http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)部分中描述）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:18:20.530

要获取有关您的部署的信息，包括您的角色实例的 VIP 和公共端口，请使用服务管理 API 上的[获取部署操作。](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)响应正文包括一个[InstanceInputList](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx#InputEndpointList)。

# android - 使用可上网的手机进行 Android 调试

> ID：13007230
> 
> 赞同：0
> 
> 时间：2012-10-22T08:04:06.270
> 
> 标签：android

我正在玩一些 Android 开发，并试图通过我的手机 (HTC) 上的 Eclipse 通过 USB 网络共享来调试应用程序，因为我无法在我正在开发的地方获得 3g 连接并且没有 wifi。
我可以在手机上正常运行该应用程序，但由于它需要 HTC Sync 才能运行，我无法从我的计算机使用互联网连接，有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:08:16.827

通常 android 需要 adb 来调试设备，而 afaik adb 需要 USB 连接。

其他方式是 ACRA 和 BugSense

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:13:29.973

您可以随时尝试使用模拟器：[请参阅此处](http://developer.android.com/tools/help/emulator.html)

在安装应用程序的测试版本后，您还可以在手机上使用[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat)直接在手机上访问调试信息。

# ruby-on-rails - Ruby On Rails 奇怪的路线路径

> ID：13007238
> 
> 赞同：0
> 
> 时间：2012-10-22T08:04:53.917
> 
> 标签：ruby-on-rails, routes

我的应用程序中有这条路线（rails 3.2）：

```
godmode_invites GET    /godmode/invites(.:format)                  godmode/invites#index
                        POST   /godmode/invites(.:format)                  godmode/invites#create
     new_godmode_invite GET    /godmode/invites/new(.:format)              godmode/invites#new
    edit_godmode_invite GET    /godmode/invites/:id/edit(.:format)         godmode/invites#edit
         godmode_invite GET    /godmode/invites/:id(.:format)              godmode/invites#show
                        PUT    /godmode/invites/:id(.:format)              godmode/invites#update
                        DELETE /godmode/invites/:id(.:format)              godmode/invites#destroy 
```

在模板视图中：

```
 <td><%= link_to 'Show', godmode_invites_path(invite) %></td>
<td><%= link_to 'Destroy', godmode_invites_path(invite), method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

这会产生奇怪的路线，例如资源 ID 之前的点：

/godmode/invites.3 /godmode/invites.4

我找不到我的问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:08:40.673

您认为几乎没有错误。这是更正后的代码：

```
<td><%= link_to 'Show', godmode_invite_path(invite) %></td>
<td><%= link_to 'Destroy', godmode_invite_path(invite), method: :delete, data: { confirm: 'Are you sure?' } %></td> 
```

# haskell - Haskell读取Prec有理函数

> ID：13007240
> 
> 赞同：2
> 
> 时间：2012-10-22T08:04:55.523
> 
> 标签：haskell, input, instance, rational-number

我在执行 readsPrec 以解析以下数据结构的输入时遇到问题：

```
data Term = Monom Int Int
          | Addition Term Term
          | Subtraction Term Term
          | Multiplication Term Term
          | Division Term Term 
```

我已经实现了一个 show 实例，它使 monom 看起来像：

```
let k  = Monom 2 3
Main.show k 
```

返回：

```
(2x^3) 
```

和

```
let m = Addition k k
Main.show m 
```

返回：

```
(2x^3)+(2x^3) 
```

与此同时，我要坐 5 个小时来完成这项任务，我真的不知道如何处理它。我的第一种方法如下所示：

```
instance Read Term where
  readsPrec _ inp = let[(a,b)] = lex inp in
   case a of
   "x" -> readsPrec 0 b
   "^" -> [(Monom 1 (read b::Int), "")]
   c  -> let[(d, "")] = readsPrec 0 b in
     [(Monom (read c::Int) ((\(Monom x y) -> y) d), "")] 
```

起初我感到非常高兴，直到我注意到这段代码除了 Monom 之外其他任何东西都不起作用。有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:08:42.617

是的。这可能看起来有点过于强大，但使用[Parsec](http://www.haskell.org/haskellwiki/Parsec)之类的解析器组合库可以让您整齐地编写代码。例如

```
import Text.ParserCombinators.Parsec
import Data.Maybe

monom, term :: Parser Term
operations :: [(Char,(Term -> Term -> Term))] -> Parser Term

int :: Parser Int
int = fmap read $ many1 digit

monom = do
         coef <- int
         string "x^"
         power <- int
         return $ Monom coef power

operations ops = do
                   a <- term
                   c <- choice . map (char . fst) $ ops
                   b <- term
                   return $ (fromJust $ lookup c ops) a b

term = do
        char '('
        x <- monom <|> (operations [('+', Addition), ('-', Subtraction), ('*', Multiplication), ('/', Division)])
        char ')'
        return x

term' = do 
         x <- term
         eof 
         return x

readTerm :: String -> Term
readTerm string = case parse term' "" string  of
                        Left err -> error . show $ err
                        Right term -> term 
```

作为解释，`monom`解析类似`2x^3`（不带括号），`operations`获取元组列表并解析 a`term`后跟一个操作字符，然后是另一个`term`，然后使用适当的数据构造函数生成正确的实例（`fromJust $ lookup c ops`行）。

`term`解析器解析一个或一个操作，用`monom`括号括起来。`term'`解析整个字符串（即确保解析器运行到字符串的末尾）。`readTerm`只是解析器的“更清洁”版本。

一些例子：

```
> readTerm "(2x^3)"
Monom 2 3
> readTerm "((2x^3)+(2x^3))"
Addition (Monom 2 3) (Monom 2 3)
> readTerm "(((2x^3)+(2x^3))*(2x^3))"
Multiplication (Addition (Monom 2 3) (Monom 2 3)) (Monom 2 3) 
```

* * *

以上是一个非常基本的版本，可以很容易地扩展为（例如）使`coef`术语可选，以便`x^2`解析为`Monom 1 2`，或使`power`术语可选以便`2x`解析为`Monom 2 1`。（这个[`option`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-ParserCombinators-Parsec-Combinator.html#v%3aoption)函数对这个特定的修改非常有用，只增加了 1 或 2 行。）

（注意。这可能会更有效和优雅地写成应用风格，例如

```
import Control.Applicative

monom = Monom <$> int <* string "x^" <*> int 
```

但这在进行修改时可能会有点笨拙。）

# c++ - 什么特殊规则适用于一元 & 运算符？

> ID：13007244
> 
> 赞同：20
> 
> 时间：2012-10-22T08:05:21.443
> 
> 标签：c++, operator-overloading

是否有适用于一元 & 运算符的特殊规则？

例如，代码：

```
#include <iostream>
struct X
{
    X() {}
    void* operator &() { return NULL; }
};
int main()
{
    const X x;
    std::cout << &x << std::endl;
    X y;
    std::cout << &y;
} 
```

产生输出

```
0xbfbccb33
0 
```

由于我之前在这里进行过讨论，我知道它会像这样编译和运行，但如果我不知道这一点，我会期望它无法编译，因为`operator &`没有声明`const`.

因此，`operator &() const`无论是否`operator &()`重载，编译器都会生成。很好，这是有道理的，尤其是对于样本和输出。

问题是**标准中在哪里详细说明了这种行为？**

我不是在寻找重复我在问题中已经说过的答案的答案，所以请不要解释我的重载运算符如何不能在`const`对象上调用，因为我已经知道了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T08:22:30.520

n3337 13.3.1.2/9

> 如果运算符是运算符 ,、**一元运算符 &**或运算符 ->，并且**没有可行的函数，则假定运算符是内置运算符**并根据第 5 条进行解释。

# tesseract - 如何查找 Tesseract OCR 配置文件中支持的参数

> ID：13007245
> 
> 赞同：25
> 
> 时间：2012-10-22T08:05:25.320
> 
> 标签：tesseract

我想知道 Tesseract OCR 使用的配置文件接受哪些参数，如何编写配置文件等。

[我在他们的网站](https://code.google.com/p/tesseract-ocr/)上找不到任何关于此的文档。如何确定支持哪些参数以及它们的含义？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T05:50:06.537

我在下面的链接中找到了这些说明。他们是关于编写配置文件以及放置它的位置：

> config 文件是没有 BOM 和 Unix 行尾标记的简单文本文件（在 Windows 上，您可以使用一些高级文本编辑器，例如 Notepad++ 来实现这一点）。
> 
> 如果您使用 tesseract 可执行文件，这是更改 tesseract 参数的唯一方法。
> 
> 配置文件应该位于您的 tessdata/configs 目录中。看看那里的一些例子。

[在http://www.sk-spell.sk.cx/tesseract-ocr-parameters-in-302-version](http://www.sk-spell.sk.cx/tesseract-ocr-parameters-in-302-version)中有一个**所有变量的列表以及**每个变量的描述。请注意，它适用于 Tesseract 3.02，其他版本可能会有所不同。

**编辑：**还添加一个[pastebin 链接](http://pastebin.com/av7huwQP)，以防上述链接失效。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-12T22:02:49.003

Tesseract v3.04 现在提供命令行选项`--print-parameters`，因此您可以调用`tesseract --print-parameters`以获取 678 (!) 个可配置参数的列表、它们的默认值和简短描述：

```
Tesseract parameters:
editor_image_xpos   590 Editor image X Pos
editor_image_ypos   10  Editor image Y Pos
editor_image_menuheight 50  Add to image height for menu bar
editor_image_word_bb_color  7   Word bounding box colour
editor_image_blob_bb_color  4   Blob bounding box colour
editor_image_text_color 2   Correct text colour
...and many, many more 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-26T21:40:52.940

它只是一个纯文本文件，其中包含用于 Tesseract 配置变量的以空格分隔的键/值对，每个位于单独的行上；例如：

```
interactive_display_mode T
tessedit_display_outwords T 
```

[在 Tesseract tessdata/configs](http://code.google.com/p/tesseract-ocr/source/browse/#svn/trunk/tessdata/configs)文件夹下有几个标准配置文件——例如digits、hocr 。

# google-chrome - extjs 4 MVC 网格刷新（仅限 Chrome）

> ID：13007249
> 
> 赞同：1
> 
> 时间：2012-10-22T08:05:34.760
> 
> 标签：google-chrome, grid, extjs4, refresh

我只在 Chrome 中有问题。我`LiveSearchGridPanel`做简单的`create/update`操作。它将记录写入存储和数据库。但是保存后`grid`不会刷新它`view`，并且只有在重新加载页面后才能看到新记录。在 Mozilla 中是可以的。我努力了`Ext.getCmp('myGridID').getStore().load();`

```
Ext.getCmp('myGridID').getView().refresh(); 
```

这是我的控制器代码

```
 createOrder: function(button) {
    console.log('clicked the Save button Create');
    var win    = button.up('window'),
        form   = win.down('form'),
        record = form.getRecord(),
        values = form.getValues();

    console.log(values);
    this.getOrderStore().add(values);
    win.close();
    this.getOrderStore().sync();
    this.getOrderStore().load();
} 
```

# php - 使用 php 显示来自 html 的特定标签值

> ID：13007255
> 
> 赞同：0
> 
> 时间：2012-10-22T08:05:55.313
> 
> 标签：php

> **可能重复：**
> [PHP：从 HTML 字符串中去除特定标签？](https://stackoverflow.com/questions/3308530/php-strip-a-specific-tag-from-html-string)
> [如何用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我的 mysql 数据库上有一个描述列，其中包含一些 html。像这样：

```
<p><img src="http://www.somesite.co/uploads/Optimized-basil_rajapaksa.jpg" alt="" width="250" height="183" /></p>
<p><span style="font-size: medium; color: #0000ff;">neis,a" iri&uacute; we&yuml;rka leojhs</span></p>
<p><span style="font-size: medium; color: #333333;">&uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a jD;a;Sh wr.,h i&iuml;nkaOfhka idl&Eacute;Pd ls&Iacute;u ioyd wd&frac34;:sl ixj&frac34;Ok wud;H neis,a rdcmlaI uy;d iy &uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a i&ntilde;;s i&iuml;f&iuml;,kh w;r fyg ^6&amp; &Egrave;k ;j;a idl&Eacute;Pdjla meje;a&ugrave;ug ;SrKh &ugrave; ;sfnkjd'&uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a i&ntilde;;s i&iuml;f&iuml;</span><br /><span style="font-size: medium; color: #333333;">wod&lt; idl&Eacute;Pdjg wud;H neis,a rdcmlaI uy;df.ka ks&lt; jYfhka werhqula ,enqK nj o Tyq i|yka l</span></p> 
```

当我在我的网页上回显它时，它会显示完整的 html，但我只想在我的网页上显示整个 html 中的第一个 span 标签值，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:15:18.930

假设您将 HTML 代码放入`$html`变量中：

```
$html = <<<'CODE'
<p><img src="http://www.somesite.co/uploads/Optimized-basil_rajapaksa.jpg" alt="" width="250" height="183" /></p>
<p><span style="font-size: medium; color: #0000ff;">neis,a" iri&uacute; we&yuml;rka leojhs</span></p>
<p><span style="font-size: medium; color: #333333;">&uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a jD;a;Sh wr.,h i&iuml;nkaOfhka idl&Eacute;Pd ls&Iacute;u ioyd wd&frac34;:sl ixj&frac34;Ok wud;H neis,a rdcmlaI uy;d iy &uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a i&ntilde;;s i&iuml;f&iuml;,kh w;r fyg ^6&amp; &Egrave;k ;j;a idl&Eacute;Pdjla meje;a&ugrave;ug ;SrKh &ugrave; ;sfnkjd'&uacute;Yaj&uacute;oHd, wdpd&frac34;hjrekaf.a i&ntilde;;s i&iuml;f&iuml;</span><br /><span style="font-size: medium; color: #333333;">wod&lt; idl&Eacute;Pdjg wud;H neis,a rdcmlaI uy;df.ka ks&lt; jYfhka werhqula ,enqK nj o Tyq i|yka l</span></p>
CODE; 
```

你可以这样做：

```
preg_match_all('/\<span[^\>]*\>([^\<]*)\<\/span\>/', $html, $matches);
echo $matches[1][0]; // Shows: neis,a" iri&uacute; we&yuml;rka leojhs 
```

如果您想要第二个的内容，`<span>`只需执行以下操作：

```
echo $matches[1][1]; 
```

如果你有更多`<span>`标签，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:09:25.343

您应该考虑使用[DomDocument](http://www.php.net/manual/en/intro.dom.php)。它将允许您轻松解析 HTML。

# javascript - 将 3rd 方脚本附加/触发到 dom 的最佳实践是什么？

> ID：13007263
> 
> 赞同：0
> 
> 时间：2012-10-22T08:06:29.047
> 
> 标签：javascript, jquery, tracking

拥有一堆通过使用 documnet.write() 执行的 3rd 方跟踪和广告服务器脚本，我相信使用这种方法不是最佳实践，而是应该使用 anakata[在这里提到的 dom 友好操作](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

现在我的问题是，我们可以在页面的什么位置（头部、脚部、身体等）以及何时（在页面加载时、页面加载后或页面加载时）触发这些脚本？

当前脚本示例：

```
<script type="text/javascript">
var p = (("https:" == document.location.protocol) ? "https://" : "http://");
document.write(unescape("%3Cscript src='" + p + "clickops.net/clickops-tracker.v1.js' type='text/javascript'%3E%3C/script%3E"));
</script> 
```

我们可以使用这个片段来附加外部脚本作为一个很好的例子吗？

```
var script   = document.createElement("script");
script.type  = "text/javascript";
script.src   = "path/to/your/javascript.js";    // use this for linked script
document.head.appendChild(script); 
```

感谢您的宝贵意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:16:25.923

是的，您可以使用它（尽管我会使用`document.head`而不是`#someElement`）。

然而，如果你身边有 jQuery，你可以使用它已经存在且非常强大的[`ajax`方法](http://api.jquery.com/jQuery.ajax)：

```
$.ajax(url, {dataType: "script", cache:"true"}); 
```

或者，如果您不想缓存，也可以使用[`jQuery.getScript`](http://api.jquery.com/jQuery.getScript/).

# xpath - XPath：使用或

> ID：13007270
> 
> 赞同：0
> 
> 时间：2012-10-22T08:07:01.037
> 
> 标签：xpath

我需要在包含`test.gif`或的动态网站上查找元素`test2.gif`。我是其中之一不存在。什么是正确的语法来做到这一点？我的看法：

```
'.//*[@src="http://test/test1.gif"] or .//*[@src="http://test/test2.gif"]' 
```

似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:12:05.800

您是否尝试过：

```
@src="http://test/test1.gif" or @src="http://test/test2.gif" 
```

# xslt - 如何使用 xslt 将 json 转换为 xml

> ID：13007280
> 
> 赞同：10
> 
> 时间：2012-10-22T08:08:01.417
> 
> 标签：xslt, xslt-1.0

如何将 JSON 转换为 XML？

考虑：

```
<sampleTag>
{
  "Order": {
    "InvestmentAccount": { "AccountNumber": "10" },
    "Parcel": {      
      "Limit": "0",
      "ExpiryDate": "1900-01-01T00:00:00",
      "Asset": [
    {        
        "Open": "25.15",
        "High": "25.15",
        "Low": "25.11",
        "Close": "25.87"
      }
    {        
        "Open": "25.15",
        "High": "25.15",
        "Low": "25.11",
        "Close": "25.87"
      }]
    },

    "OrderDate": "2012-10-11T21:46:03.6489906+11:00",

  }
}
</sampleTag> 
```

改造后文件如下：

```
<Order>
    <InvestmentAccount>
        <AccountNumber>10</AccountNumber>
    </InvestmentAccount>
    <Parcel>
        <Limit>0</Limit>
        <ExpiryDate>1900-01-01T00:00:00</ExpiryDate>
        <Asset>
            <Open>25.15</Open>
            <High>25.15</High>
            <Low>25.11</Low>
            <Close>25.87</Close>
        </Asset>
        <Asset>
            <Open>25.15</Open>
            <High>25.15</High>
            <Low>25.11</Low>
            <Close>25.87</Close>
        </Asset>
    </Parcel>
    <OrderDate>2012-10-11T21:46:03.6489906+11:00</OrderDate>
</Order> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T13:01:04.140

我在 JSON 解析方面的工作并未涵盖完整的 JSON 语法。

而将任何 JSON 文档“翻译”为 XML 文档的任务也没有解决方案。有 JSON 结构，如果不定义额外的约定和引入额外的元素，就无法将其转换为 XML —— 所以最终的 XML 结构并不是原始 JSON 对象的真实自然表示。

在 XSLT 3.0 中，有一个函数可以将任何 JSON 对象**[——parse-json()](http://www.w3.org/TR/xslt-30/#func-parse-json)** ——解析为一个[***映射***](http://www.w3.org/TR/xslt-30/#map)——一种在 XSLT 3.0 中引入的新数据类型。在这里阅读： http: [//www.w3.org/TR/xslt-30/#json](http://www.w3.org/TR/xslt-30/#json)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T11:07:12.060

实际上，这并不难。处理它的方法是检查 jason 的语法，并像查看模板一样查看每个产品。当我考虑到 OP 忘记谷歌搜索预先存在的解决方案的可能性时，我正要写一个解决方案。我搜索并瞧瞧....

*   [http://dnovatchev.wordpress.com/2007/07/05/transforming-json/](http://dnovatchev.wordpress.com/2007/07/05/transforming-json/)

# 更新

这是一个 JSON 到 XML 的转换器。但它只适用于 json 的一个子集。希望该子集足够广泛，可以满足您的特定需求。特别是限制是：

1.  唯一支持的简单类型是字符串。没有整数、布尔值或空值。
2.  Json 对象名称必须是有效的 xml 元素名称。
3.  字符串值内不允许有转义码。这意味着您不能传输包含例如 " 字符的值（无需滚动您自己的编码层）。

**这个 XSLT 1.0 样式表...***

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
  xmlns:exsl="http://exslt.org/common"
  xmlns:so="http://stackoverflow.com/questions/13007280"
  exclude-result-prefixes="xsl xs json so exsl">
<xsl:output indent="yes" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" /> 

<xsl:variable name="quot" select="'&quot;'" />

<xsl:template match="/*">
  <xsl:variable name="t1">
    <xsl:call-template name="object">
     <xsl:with-param name="json-in" select="." />
    </xsl:call-template>
  </xsl:variable>
  <xsl:apply-templates select="exsl:node-set($t1)/so:output/*" mode="copy-sans-namespace" />  
</xsl:template>

<xsl:template match="*" mode="copy-sans-namespace">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates mode="copy-sans-namespace" />
  </xsl:element>
</xsl:template>

<xsl:template name="field">
  <!-- Input like: "Open": "25.15" bla -->
  <!-- output like: <so:output><Open>25.15</Open></so:output> <so:extra>bla</so:extra> -->
  <xsl:param name="json-in" />
  <xsl:variable name="field-name" select="substring-before(substring-after($json-in,$quot),$quot)" />
  <xsl:variable name="remainder" select="substring-after($json-in,':')" />
  <xsl:call-template name="value">
    <xsl:with-param name="json-in" select="$remainder" />
    <xsl:with-param name="parent-ele" select="$field-name" />
  </xsl:call-template>
</xsl:template>

<xsl:template name="fields">
  <!-- Input like: "Open": "25.15" , "High": "25.15" } bla -->
  <!-- output like: <so:output><Open>25.15</Open><High>25.15</High></so:output> <so:extra>} bla</so:extra> -->
  <xsl:param name="json-in" />
  <xsl:variable name="n" select="normalize-space($json-in)" />
  <xsl:choose>
    <xsl:when test="substring($n,1,1) = $quot">
    <xsl:variable name="t1">
        <xsl:call-template name="field">
          <xsl:with-param name="json-in" select="$n" />
      </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
    <xsl:variable name="t3">
      <xsl:choose>
      <xsl:when test="substring($t2,1,1)=','">
            <xsl:call-template name="fields">
              <xsl:with-param name="json-in" select="substring-after($t2,',')" />
          </xsl:call-template>
      </xsl:when>
      <xsl:when test="$t2">
        <so:extra><xsl:value-of select="$t2" /></so:extra>
      </xsl:when>
      </xsl:choose>
    </xsl:variable>
    <so:output>
      <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
    </so:output>
    <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
  </xsl:when>
    <xsl:when test="$n">
      <so:extra><xsl:value-of select="$n" /></so:extra>
    </xsl:when>
  </xsl:choose>
</xsl:template>

<xsl:template name="object">
  <!-- Input like: { X } bla -->
  <!-- output like: <so:output>fields(X)</so:output> <so:extra>bla</so:extra> -->
  <xsl:param name="json-in" />
  <xsl:param name="parent-ele" select="''" />
  <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'{'))" />
  <xsl:variable name="t2">
    <xsl:call-template name="fields">
      <xsl:with-param name="json-in" select="$t1" />
    </xsl:call-template>
  </xsl:variable>  
  <xsl:variable name="t3" select="normalize-space(substring-after( exsl:node-set($t2)/so:extra, '}'))" />
  <so:output>
    <xsl:choose>
    <xsl:when test="$parent-ele">
      <xsl:element name="{$parent-ele}">
        <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
      </xsl:element>
    </xsl:when>
      <xsl:otherwise>    
        <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
      </xsl:otherwise>    
    </xsl:choose>
  </so:output>
  <xsl:if test="$t3">
    <so:extra><xsl:value-of select="$t3" /></so:extra>
  </xsl:if>  
</xsl:template>

<xsl:template name="objects">
  <xsl:param name="json-in" />
  <xsl:param name="parent-ele" />
  <xsl:variable name="n" select="normalize-space($json-in)" />
  <xsl:choose>
    <xsl:when test="substring($n,1,1) = '{'">
    <xsl:variable name="t1">
        <xsl:call-template name="object">
          <xsl:with-param name="json-in" select="$n" />
          <xsl:with-param name="parent-ele" select="$parent-ele" />
      </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
    <xsl:variable name="t3">
      <xsl:choose>
      <xsl:when test="substring($t2,1,1)='{'">
            <xsl:call-template name="objects">
              <xsl:with-param name="json-in" select="$t2" />
              <xsl:with-param name="parent-ele" select="$parent-ele" />
          </xsl:call-template>
      </xsl:when>
      <xsl:when test="$t2">
        <so:extra><xsl:value-of select="$t2" /></so:extra>
      </xsl:when>
      </xsl:choose>
    </xsl:variable>
    <so:output>
      <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
    </so:output>
    <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
  </xsl:when>
    <xsl:when test="$n">
      <so:extra><xsl:value-of select="$n" /></so:extra>
    </xsl:when>
  </xsl:choose>
</xsl:template>

<xsl:template name="array">
  <!-- Input like: [ X1 X2 ] bla -->
  <!-- output like: <so:output><Y>X1</Y><Y>X2</Y></so:output> <so:extra>}bla</so:extra> -->
  <xsl:param name="json-in" />
  <xsl:param name="parent-ele" />
  <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'['))" />
  <xsl:variable name="t2">
    <xsl:call-template name="objects">
      <xsl:with-param name="json-in" select="$t1" />
      <xsl:with-param name="parent-ele" select="$parent-ele" />
    </xsl:call-template>
  </xsl:variable>  
  <xsl:variable name="t3" select="normalize-space(substring-after( exsl:node-set($t2)/so:extra, ']'))" />
  <xsl:copy-of select="exsl:node-set($t2)/so:output" />
  <xsl:if test="$t3">
    <so:extra><xsl:value-of select="$t3" /></so:extra>
  </xsl:if>  
</xsl:template>

<xsl:template name="value">
  <!-- Input like either array, object or string -->
  <!-- output like either array, object or string -->
  <xsl:param name="json-in" />
  <xsl:param name="parent-ele" />
  <xsl:variable name="first-letter" select="substring(normalize-space($json-in),1,1)" />
  <xsl:choose>
    <xsl:when test="$first-letter='{'">
    <xsl:call-template name="object">
        <xsl:with-param name="json-in" select="$json-in" />
        <xsl:with-param name="parent-ele" select="$parent-ele" />
    </xsl:call-template>
    </xsl:when>
    <xsl:when test="$first-letter='['">
    <xsl:call-template name="array">
        <xsl:with-param name="json-in" select="$json-in" />
        <xsl:with-param name="parent-ele" select="$parent-ele" />
    </xsl:call-template>
    </xsl:when>
    <xsl:when test="$first-letter=$quot">
    <xsl:call-template name="string">
        <xsl:with-param name="json-in" select="$json-in" />
        <xsl:with-param name="parent-ele" select="$parent-ele" />
    </xsl:call-template>
    </xsl:when>
  <xsl:otherwise>
    <so:output>ERROR</so:output>
  </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template name="string">
  <!-- Input like: "X" bla -->
  <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
  <xsl:param name="json-in" />
  <xsl:param name="parent-ele" />
  <xsl:variable name="value" select="substring-before(substring-after($json-in,$quot),$quot)" />
  <xsl:variable name="remainder" select="normalize-space(substring-after(substring-after($json-in,$quot),$quot))" />
  <so:output>
   <xsl:element name="{$parent-ele}">
    <xsl:value-of select="$value" />
   </xsl:element>
  </so:output>
  <xsl:if test="$remainder">
    <so:extra><xsl:value-of select="$remainder" /></so:extra>
  </xsl:if>  
</xsl:template>

</xsl:stylesheet> 
```

**...应用于此输入**（从提供的 OP 修改以删除无关的逗号）...

```
<sampleTag>
{
  "Order": {
    "InvestmentAccount": { "AccountNumber": "10" },
    "Parcel": {      
      "Limit": "0",
      "ExpiryDate": "1900-01-01T00:00:00",
      "Asset": [
    {        
        "Open": "25.15",
        "High": "25.15",
        "Low": "25.11",
        "Close": "25.87"
      }
    {        
        "Open": "25.15",
        "High": "25.15",
        "Low": "25.11",
        "Close": "25.87"
      }]
    },
    "OrderDate": "2012-10-11T21:46:03.6489906+11:00"
  }
}
</sampleTag> 
```

***..产量...***

```
<Order>
  <InvestmentAccount>
    <AccountNumber>10</AccountNumber>
  </InvestmentAccount>
  <Parcel>
    <Limit>0</Limit>
    <ExpiryDate>1900-01-01T00:00:00</ExpiryDate>
    <Asset>
      <Open>25.15</Open>
      <High>25.15</High>
      <Low>25.11</Low>
      <Close>25.87</Close>
    </Asset>
    <Asset>
      <Open>25.15</Open>
      <High>25.15</High>
      <Low>25.11</Low>
      <Close>25.87</Close>
    </Asset>
  </Parcel>
  <OrderDate>2012-10-11T21:46:03.6489906+11:00</OrderDate>
</Order> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-22T18:19:17.087

我稍微调整了 Sean B. Durkin 的模板，并认为我会分享。

更新包括：

*   支持数字
*   支持布尔值
*   修复用逗号分隔的对象数组元素（根据 JSON 规范）

非更新更改：

*   数组元素显示在自己的 XML 元素中，元素名称为对象键，后缀为`_element`

仍然不支持：

*   字符串中的转义字符（引号）

这是模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
    xmlns:exsl="http://exslt.org/common"
    xmlns:so="http://stackoverflow.com/questions/13007280"
    exclude-result-prefixes="xsl xs json so exsl">
    <xsl:output indent="yes" encoding="UTF-8" />
    <xsl:strip-space elements="*" /> 

    <xsl:variable name="quot" select="'&quot;'" />
    <xsl:variable name="numbers" select="'0123456789'"/>
    <xsl:variable name="booleans" select="'tf'"/>

    <xsl:template match="/*">
        <xsl:variable name="t1">
            <xsl:call-template name="object">
                <xsl:with-param name="json-in" select="." />
            </xsl:call-template>
        </xsl:variable>
        <xsl:apply-templates select="exsl:node-set($t1)/so:output/*" mode="copy-sans-namespace" />  
    </xsl:template>

    <xsl:template match="*" mode="copy-sans-namespace">
        <xsl:element name="{name()}" namespace="{namespace-uri()}">
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates mode="copy-sans-namespace" />
        </xsl:element>
    </xsl:template>

    <xsl:template name="field">
        <!-- Input like: "Open": "25.15" bla -->
        <!-- output like: <so:output><Open>25.15</Open></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:variable name="field-name" select="substring-before(substring-after($json-in,$quot),$quot)" />
        <xsl:variable name="remainder" select="substring-after($json-in,':')" />
        <xsl:call-template name="value">
            <xsl:with-param name="json-in" select="$remainder" />
            <xsl:with-param name="parent-ele" select="$field-name" />
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="fields">
        <!-- Input like: "Open": "25.15" , "High": "25.15" } bla -->
        <!-- output like: <so:output><Open>25.15</Open><High>25.15</High></so:output> <so:extra>} bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:variable name="n" select="normalize-space($json-in)" />
        <xsl:choose>
            <xsl:when test="substring($n,1,1) = $quot">
                <xsl:variable name="t1">
                    <xsl:call-template name="field">
                        <xsl:with-param name="json-in" select="$n" />
                    </xsl:call-template>
                </xsl:variable>
                <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
                <xsl:variable name="t3">
                    <xsl:choose>
                        <xsl:when test="substring($t2,1,1)=','">
                            <xsl:call-template name="fields">
                                <xsl:with-param name="json-in" select="substring-after($t2,',')" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="$t2">
                            <so:extra><xsl:value-of select="$t2" /></so:extra>
                        </xsl:when>
                    </xsl:choose>
                </xsl:variable>
                <so:output>
                    <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
                </so:output>
                <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
            </xsl:when>
            <xsl:when test="$n">
                <so:extra><xsl:value-of select="$n" /></so:extra>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="object">
        <!-- Input like: { X } bla -->
        <!-- output like: <so:output>fields(X)</so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" select="''" />
        <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'{'))" />
        <xsl:variable name="t2">
                <xsl:call-template name="fields">
                <xsl:with-param name="json-in" select="$t1" />
            </xsl:call-template>
        </xsl:variable>  
        <xsl:variable name="t3" select="normalize-space(substring-after( exsl:node-set($t2)/so:extra, '}'))" />
        <so:output>
            <xsl:choose>
                <xsl:when test="$parent-ele">
                    <xsl:element name="{$parent-ele}">
                        <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
                    </xsl:element>
                </xsl:when>
                <xsl:otherwise>    
                    <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
                </xsl:otherwise>    
            </xsl:choose>
        </so:output>
        <xsl:if test="$t3">
            <so:extra><xsl:value-of select="$t3" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="objects">
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="n" select="normalize-space($json-in)" />
        <xsl:choose>
            <xsl:when test="substring($n,1,1) = '{'">
                <xsl:variable name="t1">
                    <xsl:call-template name="object">
                        <xsl:with-param name="json-in" select="$n" />
                        <xsl:with-param name="parent-ele" select="$parent-ele" />
                    </xsl:call-template>
                </xsl:variable>
                <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
                <xsl:variable name="t3">
                    <xsl:choose>
                        <xsl:when test="substring($t2,1,1)='{'">
                            <xsl:call-template name="objects">
                                <xsl:with-param name="json-in" select="$t2" />
                                <xsl:with-param name="parent-ele" select="$parent-ele" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="substring($t2,1,1)=',' and substring(normalize-space(substring-after($t2,',')),1,1)='{'">
                            <xsl:call-template name="objects">
                                <xsl:with-param name="json-in" select="normalize-space(substring-after($t2,','))" />
                                <xsl:with-param name="parent-ele" select="$parent-ele" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="$t2">
                            <so:extra><xsl:value-of select="$t2" /></so:extra>
                        </xsl:when>
                    </xsl:choose>
                </xsl:variable>
                <so:output>
                    <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
                </so:output>
                <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
            </xsl:when>
            <xsl:when test="$n">
                <so:extra><xsl:value-of select="$n" /></so:extra>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="array">
        <!-- Input like: [ X1 X2 ] bla -->
        <!-- output like: <so:output><Y>X1</Y><Y>X2</Y></so:output> <so:extra>}bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'['))" />
        <xsl:variable name="t2">
            <xsl:call-template name="objects">
                <xsl:with-param name="json-in" select="$t1" />
                <xsl:with-param name="parent-ele" select="$parent-ele" />
            </xsl:call-template>
        </xsl:variable>  
        <xsl:variable name="t3">
            <xsl:choose>
                <xsl:when test="contains(substring-before(exsl:node-set($t2)/so:extra,']'),',')">
                    <xsl:value-of select="normalize-space(substring-after(exsl:node-set($t2)/so:extra,','))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-after(exsl:node-set($t2)/so:extra,']'))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="t4">
            <xsl:element name="{$parent-ele}">
                <xsl:for-each select="$t2/so:output/*[local-name(.)=$parent-ele]">
                    <xsl:variable name="self" select="."/>
                    <xsl:variable name="tempResult">
                        <xsl:element name="{concat($parent-ele,'_element')}">
                            <xsl:copy-of select="exsl:node-set($self/*)" />
                        </xsl:element>
                    </xsl:variable>
                    <xsl:copy-of select="exsl:node-set($tempResult)"/>
                </xsl:for-each>
            </xsl:element>
        </xsl:variable>
        <xsl:variable name="t5" select="exsl:node-set($t4)"/>
        <so:output>
            <xsl:copy-of select="$t5"/>
        </so:output>
        <xsl:if test="$t3">
            <so:extra><xsl:value-of select="$t3" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="value">
        <!-- Input like either array, object or string -->
        <!-- output like either array, object or string -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="first-letter" select="substring(normalize-space($json-in),1,1)" />
        <xsl:choose>
            <xsl:when test="$first-letter='{'">
                <xsl:call-template name="object">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$first-letter='['">
                <xsl:call-template name="array">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$first-letter=$quot">
                <xsl:call-template name="string">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numbers,$first-letter)">
                <xsl:call-template name="number">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($booleans,$first-letter)">
                <xsl:call-template name="boolean">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <so:output>ERROR</so:output>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="string">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value" select="substring-before(substring-after($json-in,$quot),$quot)" />
        <xsl:variable name="remainder" select="normalize-space(substring-after(substring-after($json-in,$quot),$quot))" />
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="number">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,'}'))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,']'))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-before($json-in,','))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="remainder">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="concat('}',normalize-space(substring-after($json-in,'}')))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="concat(']',normalize-space(substring-after($json-in,']')))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(',',normalize-space(substring-after($json-in,',')))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>  
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>
    <xsl:template name="boolean">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,'}'))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,']'))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-before($json-in,','))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="remainder">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="concat('}',normalize-space(substring-after($json-in,'}')))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="concat(']',normalize-space(substring-after($json-in,']')))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(',',normalize-space(substring-after($json-in,',')))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>  
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>

</xsl:stylesheet> 
```

所以有了这个（调整后的）输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<sampleTag><![CDATA[
    {
        "Order": {
            "InvestmentAccount": { "AccountNumber": "10" },
            "Parcel": {      
                "Limit": 0,
                "ExpiryDate": "1900-01-01T00:00:00",
                "valid": true,
                "Asset": [
                    {        
                        "Open": 25.15,
                        "High": 25.15,
                        "Low": 25.11,
                        "Close": 25.87
                    },
                    {        
                        "Open": 25.15,
                        "High": 25.15,
                        "Low": 25.11,
                        "Close": 25.87
                    }
                ]
            },
            "OrderDate": "2012-10-11T21:46:03.6489906+11:00"
        }
    }
]]></sampleTag> 
```

我得到这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Order>
   <InvestmentAccount>
      <AccountNumber>10</AccountNumber>
   </InvestmentAccount>
   <Parcel>
      <Limit>0</Limit>
      <ExpiryDate>1900-01-01T00:00:00</ExpiryDate>
      <valid>true</valid>
      <Asset>
         <Asset_element>
            <Open>25.15</Open>
            <High>25.15</High>
            <Low>25.11</Low>
            <Close>25.87</Close>
         </Asset_element>
         <Asset_element>
            <Open>25.15</Open>
            <High>25.15</High>
            <Low>25.11</Low>
            <Close>25.87</Close>
         </Asset_element>
      </Asset>
   </Parcel>
   <OrderDate>2012-10-11T21:46:03.6489906+11:00</OrderDate>
</Order> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-30T11:23:49.260

更新塞缪尔墨菲的答案。

更新包括：

*   支持空

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
    xmlns:exsl="http://exslt.org/common"
    xmlns:so="http://stackoverflow.com/questions/13007280"
    exclude-result-prefixes="xsl xs json so exsl">
    <xsl:output indent="yes" encoding="UTF-8" />
    <xsl:strip-space elements="*" /> 

    <xsl:variable name="quot" select="'&quot;'" />
    <xsl:variable name="numbers" select="'0123456789'"/>
    <xsl:variable name="booleans" select="'tf'"/>
    <xsl:variable name="nulls" select="'n'"/>

    <xsl:template match="/*">
        <xsl:variable name="t1">
            <xsl:call-template name="object">
                <xsl:with-param name="json-in" select="." />
            </xsl:call-template>
        </xsl:variable>
        <xsl:apply-templates select="exsl:node-set($t1)/so:output/*" mode="copy-sans-namespace" />  
    </xsl:template>

    <xsl:template match="*" mode="copy-sans-namespace">
        <xsl:element name="{name()}" namespace="{namespace-uri()}">
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates mode="copy-sans-namespace" />
        </xsl:element>
    </xsl:template>

    <xsl:template name="field">
        <!-- Input like: "Open": "25.15" bla -->
        <!-- output like: <so:output><Open>25.15</Open></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:variable name="field-name" select="substring-before(substring-after($json-in,$quot),$quot)" />
        <xsl:variable name="remainder" select="substring-after($json-in,':')" />
        <xsl:call-template name="value">
            <xsl:with-param name="json-in" select="$remainder" />
            <xsl:with-param name="parent-ele" select="$field-name" />
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="fields">
        <!-- Input like: "Open": "25.15" , "High": "25.15" } bla -->
        <!-- output like: <so:output><Open>25.15</Open><High>25.15</High></so:output> <so:extra>} bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:variable name="n" select="normalize-space($json-in)" />
        <xsl:choose>
            <xsl:when test="substring($n,1,1) = $quot">
                <xsl:variable name="t1">
                    <xsl:call-template name="field">
                        <xsl:with-param name="json-in" select="$n" />
                    </xsl:call-template>
                </xsl:variable>
                <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
                <xsl:variable name="t3">
                    <xsl:choose>
                        <xsl:when test="substring($t2,1,1)=','">
                            <xsl:call-template name="fields">
                                <xsl:with-param name="json-in" select="substring-after($t2,',')" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="$t2">
                            <so:extra><xsl:value-of select="$t2" /></so:extra>
                        </xsl:when>
                    </xsl:choose>
                </xsl:variable>
                <so:output>
                    <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
                </so:output>
                <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
            </xsl:when>
            <xsl:when test="$n">
                <so:extra><xsl:value-of select="$n" /></so:extra>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="object">
        <!-- Input like: { X } bla -->
        <!-- output like: <so:output>fields(X)</so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" select="''" />
        <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'{'))" />
        <xsl:variable name="t2">
                <xsl:call-template name="fields">
                <xsl:with-param name="json-in" select="$t1" />
            </xsl:call-template>
        </xsl:variable>  
        <xsl:variable name="t3" select="normalize-space(substring-after( exsl:node-set($t2)/so:extra, '}'))" />
        <so:output>
            <xsl:choose>
                <xsl:when test="$parent-ele">
                    <xsl:element name="{$parent-ele}">
                        <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
                    </xsl:element>
                </xsl:when>
                <xsl:otherwise>    
                    <xsl:copy-of select="exsl:node-set($t2)/so:output/node()" />
                </xsl:otherwise>    
            </xsl:choose>
        </so:output>
        <xsl:if test="$t3">
            <so:extra><xsl:value-of select="$t3" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="objects">
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="n" select="normalize-space($json-in)" />
        <xsl:choose>
            <xsl:when test="substring($n,1,1) = '{'">
                <xsl:variable name="t1">
                    <xsl:call-template name="object">
                        <xsl:with-param name="json-in" select="$n" />
                        <xsl:with-param name="parent-ele" select="$parent-ele" />
                    </xsl:call-template>
                </xsl:variable>
                <xsl:variable name="t2" select="normalize-space( exsl:node-set($t1)/so:extra) " />
                <xsl:variable name="t3">
                    <xsl:choose>
                        <xsl:when test="substring($t2,1,1)='{'">
                            <xsl:call-template name="objects">
                                <xsl:with-param name="json-in" select="$t2" />
                                <xsl:with-param name="parent-ele" select="$parent-ele" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="substring($t2,1,1)=',' and substring(normalize-space(substring-after($t2,',')),1,1)='{'">
                            <xsl:call-template name="objects">
                                <xsl:with-param name="json-in" select="normalize-space(substring-after($t2,','))" />
                                <xsl:with-param name="parent-ele" select="$parent-ele" />
                            </xsl:call-template>
                        </xsl:when>
                        <xsl:when test="$t2">
                            <so:extra><xsl:value-of select="$t2" /></so:extra>
                        </xsl:when>
                    </xsl:choose>
                </xsl:variable>
                <so:output>
                    <xsl:copy-of select="exsl:node-set($t1)/so:output/* | exsl:node-set($t3)/so:output/*" />
                </so:output>
                <xsl:copy-of select="exsl:node-set($t3)/so:extra" />
            </xsl:when>
            <xsl:when test="$n">
                <so:extra><xsl:value-of select="$n" /></so:extra>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="array">
        <!-- Input like: [ X1 X2 ] bla -->
        <!-- output like: <so:output><Y>X1</Y><Y>X2</Y></so:output> <so:extra>}bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="t1" select="normalize-space(substring-after($json-in,'['))" />
        <xsl:variable name="t2">
            <xsl:call-template name="objects">
                <xsl:with-param name="json-in" select="$t1" />
                <xsl:with-param name="parent-ele" select="$parent-ele" />
            </xsl:call-template>
        </xsl:variable>  
        <xsl:variable name="t3">
            <xsl:choose>
                <xsl:when test="contains(substring-before(exsl:node-set($t2)/so:extra,']'),',')">
                    <xsl:value-of select="normalize-space(substring-after(exsl:node-set($t2)/so:extra,','))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-after(exsl:node-set($t2)/so:extra,']'))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="t4">
            <xsl:element name="{$parent-ele}">
                <xsl:for-each select="$t2/so:output/*[local-name(.)=$parent-ele]">
                    <xsl:variable name="self" select="."/>
                    <xsl:variable name="tempResult">
                        <xsl:element name="{concat($parent-ele,'_element')}">
                            <xsl:copy-of select="exsl:node-set($self/*)" />
                        </xsl:element>
                    </xsl:variable>
                    <xsl:copy-of select="exsl:node-set($tempResult)"/>
                </xsl:for-each>
            </xsl:element>
        </xsl:variable>
        <xsl:variable name="t5" select="exsl:node-set($t4)"/>
        <so:output>
            <xsl:copy-of select="$t5"/>
        </so:output>
        <xsl:if test="$t3">
            <so:extra><xsl:value-of select="$t3" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="value">
        <!-- Input like either array, object or string -->
        <!-- output like either array, object or string -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="first-letter" select="substring(normalize-space($json-in),1,1)" />
        <xsl:choose>
            <xsl:when test="$first-letter='{'">
                <xsl:call-template name="object">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$first-letter='['">
                <xsl:call-template name="array">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="$first-letter=$quot">
                <xsl:call-template name="string">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele" />
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($numbers,$first-letter)">
                <xsl:call-template name="number">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($booleans,$first-letter)">
                <xsl:call-template name="boolean">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="contains($nulls,$first-letter)">
                <xsl:call-template name="boolean">
                    <xsl:with-param name="json-in" select="$json-in" />
                    <xsl:with-param name="parent-ele" select="$parent-ele"/>
                </xsl:call-template>
            </xsl:when>         
            <xsl:otherwise>
                <so:output>ERROR</so:output>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="string">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value" select="substring-before(substring-after($json-in,$quot),$quot)" />
        <xsl:variable name="remainder" select="normalize-space(substring-after(substring-after($json-in,$quot),$quot))" />
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>

    <xsl:template name="number">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,'}'))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,']'))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-before($json-in,','))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="remainder">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="concat('}',normalize-space(substring-after($json-in,'}')))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="concat(']',normalize-space(substring-after($json-in,']')))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(',',normalize-space(substring-after($json-in,',')))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>  
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>
    <xsl:template name="boolean">
        <!-- Input like: "X" bla -->
        <!-- output like: <so:output><Y>X</Y></so:output> <so:extra>bla</so:extra> -->
        <xsl:param name="json-in" />
        <xsl:param name="parent-ele" />
        <xsl:variable name="value">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,'}'))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="normalize-space(substring-before($json-in,']'))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="normalize-space(substring-before($json-in,','))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>
        <xsl:variable name="remainder">
            <xsl:choose>
                <xsl:when test="contains(substring-before($json-in,','),'}')">
                    <xsl:value-of select="concat('}',normalize-space(substring-after($json-in,'}')))"/>
                </xsl:when>
                <xsl:when test="contains(substring-before($json-in,','),']')">
                    <xsl:value-of select="concat(']',normalize-space(substring-after($json-in,']')))"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="concat(',',normalize-space(substring-after($json-in,',')))"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>  
        <so:output>
            <xsl:element name="{$parent-ele}">
                <xsl:value-of select="$value" />
            </xsl:element>
        </so:output>
        <xsl:if test="$remainder">
            <so:extra><xsl:value-of select="$remainder" /></so:extra>
        </xsl:if>  
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-09T04:01:08.897

这个问题被标记为 XSLT 1.0，所以我不知道这个答案是否会对原始问题有所帮助。但是，如果您可以使用 XSLT 3.0，那么该函数将`json-to-xml`完全满足您的需求。

[https://www.w3.org/TR/xslt-30/#func-json-to-xml](https://www.w3.org/TR/xslt-30/#func-json-to-xml)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T11:36:41.120

As well as Dimitre's XSLT parsing framework, there is also Gunther Rademacher's Rex parser generator, which also includes JSON as one of its sample grammars:

[http://www.bottlecaps.de/rex/](http://www.bottlecaps.de/rex/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T10:01:07.273

试试这个库：

[https://github.com/bramstein/xsltjson](https://github.com/bramstein/xsltjson)

看起来很不错。

它是一个 2.0 XSLT 解决方案，尽管他也指向 1.0 版本。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-22T08:23:16.103

XSLT 有许多优点和一些大缺点。文本处理至少是 1.0 版的弱点 虽然使用 XSLT 1.0 处理该文本在技术上是可行的，但我想不出在任何情况下它会是一个非常好的主意，而且它不会是一个非常脆弱的转换。您必须生成的代码将非常笨拙。

是否没有其他语言可供您进行处理？

# javascript - 创建与窗口成比例大小的圆圈

> ID：13007281
> 
> 赞同：0
> 
> 时间：2012-10-22T08:08:04.333
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个高度为浏览器窗口 10% 的圆圈。如果我也将宽度设为 10%，然后缩放浏览器，则会得到一个畸形或压扁的圆圈。我想尝试用 jquery 创建圆的宽度，以与高度成比例地变化。因此，如果 10% 转换为 200px 高度，则宽度将更改为 200px。我已经尝试了一些解决方案，但作为回报，我不断得到 0px 的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:13:08.790

假设您使用的是 jQuery，并且您的圈子是一个 HTML 元素，您可以这样做：

```
var $window = $(window),
    $el = $('#someElement');

$window.on('resize', function () {

    var size = $window.height() * 0.1;
    $el.width(size).height(size);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:13:27.917

获取窗口的宽度和高度，然后简单地检查其中哪一个是最小的。获取该值的 10% 并将其用作圆的半径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:48:31.823

使用透明方形图像的小实验，它是 的直接子级`<body>`：

[http://jsfiddle.net/2S3xU/3/](http://jsfiddle.net/2S3xU/3/)

```
<html><body><img src="transparent-square.gif">

img {
    border-radius: 99999px;
    position: absolute;
    top: 0; left: 0;
    height:     100%; /* width will follow height to keep image undistorted*/
    max-width:  100%;
    max-height: 10%;
}​

/* Opera fix*/
body, html {
    width: 100%;
    height: 100%;

} 
```

# ruby-on-rails - 使用 Capistrano 在 Heroku 上部署？

> ID：13007282
> 
> 赞同：26
> 
> 时间：2012-10-22T08:08:11.247
> 
> 标签：ruby-on-rails, heroku, capistrano

我仍然习惯于 Rails 开发生态系统。最近我学会了如何使用 capistrano 使用 apache 和乘客部署到我的服务器，我喜欢如何将一组相当复杂的部署指令放入我的 deploy.rb 以便通过单个“cap deploy”调用执行它们，如果出现任何问题，会自动回滚。

现在我正在考虑在 Heroku 上部署我的项目，并且我希望能够使用 capistrano 进行在那里的部署。但是我一直找不到任何有关如何执行此操作的文档。是否可以？是否有 capistrano 任务可以让我在 Heroku 上自动部署？

这甚至有意义吗？毕竟 capistrano 以特定方式工作（通过 ssh 进入服务器）并采用特定的目录结构（public/releases/shared 等）。据我所知，这两种情况在 Heroku 中都是不可能的。但我仍然想享受 capistrano 带来的便利。我知道我可以将部署所需的步骤（git push/migrate/restart resque workers...）放入单个 rake 任务中，并且我可以通过调用单个命令来方便地进行部署；但我不会享受 capistrano 事务和回滚的好处，这在我看来非常重要。

我可能遗漏了一些关于这些技术如何组合在一起的非常基本的东西。让我有点吃惊的是，我在任何地方都找不到关于这个主题的任何讨论。任何人都可以分享他们的经验吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-22T11:58:56.770

Heroku 使用 Git 进行部署，并且对 capistrano 不友好。事实上，哲学本身是不同的——Heroku 没有“服务器”，您可以通过 SSH 访问或根据您的需要自定义服务器。

Heroku 使用 Dynos，这是预定义的实例，具有特定的部署架构，涵盖了大多数 Rails 部署需求。您可以使用 Heroku 执行回滚、备份、迁移等操作，在某些情况下，比普通 capistrano 脚本更复杂。

除非您的设置完全不同，否则您可以安全地使用 Heroku for Rails（当然只有 Git）。如果没有，AWS 是更好的选择。

# c++ - 将圆或样条拟合成一堆 3D 点

> ID：13007286
> 
> 赞同：1
> 
> 时间：2012-10-22T08:08:36.217
> 
> 标签：c++, c, geometry, least-squares

我有一些 3D 点，大致但清楚地形成了一个圆的一部分。我现在必须确定最适合所有点的圆。我认为必须有某种最适合的最小二乘，但我不知道如何开始。这些点按照它们在圆上的位置进行排序。我在每个点上也有一个估计的曲率。我需要圆的半径和平面。我必须使用 c/c++ 或使用外部脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:15:15.100

您可以使用[主成分分析](http://en.wikipedia.org/wiki/Principal_component_analysis)(PCA) 将坐标从三维映射到二维。

计算 PCA 并将您的数据投影到第一个到主成分上。然后，您可以使用任何 2D 算法来查找圆心及其半径。一旦找到/安装了这些，您可以将中心投影回 3D 坐标。

由于您的数据是嘈杂的，因此在您挤出的第三维中仍然会有一些数据，但请记住，PCA 选择此维度是为了尽量减少丢失的数据量，即通过最大化所表示的数据量在前两个组件中，所以你应该是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:25:04.300

这种数据拟合的一个很好的算法是[RANSAC](http://en.wikipedia.org/wiki/RANSAC)（随机样本共识）。您可以在链接中找到一个很好的描述，所以这只是重要部分的简短概述：

在您的特殊情况下，*模型*将是 3D 圆。为了构建这个，从你的集合中挑选三个随机的非共线点，计算它们嵌入的超平面（叉积），将随机点投影到平面上，然后应用通常的 2D 圆拟合。有了这个，你就得到了圆心、半径和超平面方程。现在很容易检查每个剩余点的支持。支撑可以表示为到圆的距离，它由两部分组成：到平面的正交距离和到平面内的圆边界的距离。

**编辑：** 因为*我*更喜欢 RANSAC 而不是普通的最小二乘（LS），原因是它在严重异常值的情况下具有出色的稳定性。下图显示了 LS 与 RANSAC 的示例比较。理想模型线由 RANSAC 创建，而虚线由 LS 创建。![在此处输入图像描述](../Images/39668b7d98f3946d91205ea7acb58eef.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:09:21.720

可以说最简单的算法称为最小二乘曲线拟合。您可能想检查[数学](http://mathworld.wolfram.com/LeastSquaresFitting.html)，或查看类似的问题，例如[用于图像曲线拟合的多项式最小二乘法](https://stackoverflow.com/questions/11490912/polynomial-least-squares-for-image-curve-fitting)
但是我宁愿使用库来执行此操作。

# php - 在 TWIG 中的字符串中查找子字符串

> ID：13007288
> 
> 赞同：153
> 
> 时间：2012-10-22T08:08:41.567
> 
> 标签：php, twig, substring, comparison-operators

我想查找字符串的子字符串或使用 Twig 检查是否没有这样的子字符串。就文字而言，我需要 php 中的“strstr”或“strpos”的类似物。我用谷歌搜索并在stackoverflow中搜索了这个问题，但没有找到。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：390
> 
> 时间：2012-10-22T09:23:31.527

刚刚搜索了[文档](http://twig.sensiolabs.org/documentation)，发现[了这个](http://twig.sensiolabs.org/doc/templates.html#containment-operator)：

收容操作员：**in**操作员执行收容测试。如果左操作数包含在右操作数中，则返回 true：

```
{# returns true #}

{{ 1 in [1, 2, 3] }}

{{ 'cd' in 'abcde' }} 
```

# java - 月和 java.util.Formatter

> ID：13007290
> 
> 赞同：6
> 
> 时间：2012-10-22T08:09:02.240
> 
> 标签：java, date, calendar

在[java.util.Formatter 的 javadoc 中，](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)我读到：

> 'm' 月份，格式为两位数，必要时带有前导零，即 01 - 13。

为什么是13？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T08:11:51.340

Javadoc 解释了为什么..

> 'm' '\u006d' 月份，格式为两位数，必要时带前导零，即 01 - 13，其中“01”是一年中的第一个月，**（“13”是支持农历所需的特殊值） .**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:15:38.743

```
'm' Month, formatted as two digits with leading zeros as necessary,
 i.e. 01 - 13, where "01" is the first month of the year and ("13" is a special 
 value required to support lunar calendars). 
```

# java - 多次构造 Eager ApplicationScoped 托管 bean

> ID：13007291
> 
> 赞同：5
> 
> 时间：2012-10-22T08:09:11.797
> 
> 标签：java, jsf, jakarta-ee, jsf-2, managed-bean

我有一堆*急切* `ApplicationScoped`的托管豆子。其中一些通过`ManagedProperty`注解注入到另一些中，形成依赖树。每个依赖 bean 在构造后都会操作其父级。

但是，似乎每次注入都会创建一个新实例，从而撤消先前的操作。据我了解，一个`ApplicationScoped`bean 应该只创建一次。我是否误解或为什么会发生这种情况？是因为他们渴望吗？

这是一个例子：

# ParentBean.java

```
package example;

import javax.annotation.PostConstruct;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;

@ManagedBean(eager = true)
@ApplicationScoped
public class ParentBean
{
    static int initCount = 0;

    // ...

    @PostConstruct
    public void init()
    {
        ++initCount; // Will end up being between 1 and 3\. Expected always 1.

        // ...
    }
} 
```

# Child1Bean.java

```
package example;

import javax.annotation.PostConstruct;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;

@ManagedBean(eager = true)
@ApplicationScoped
public class Child1Bean
{
    @ManagedProperty("#{parentBean}") ParentBean parentBean;

    public ParentBean getParentBean()
    {
        return parentBean;
    }

    public void setParentBean(ParentBean parentBean)
    {
        this.parentBean = parentBean;
    }

    @PostConstruct
    public void init()
    {
        // manipulate parentBean
    }
} 
```

# Child2Bean.java

```
package example;

import javax.annotation.PostConstruct;
import javax.faces.bean.ApplicationScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;

@ManagedBean(eager = true)
@ApplicationScoped
public class Child2Bean
{
    @ManagedProperty("#{parentBean}") ParentBean parentBean;

    public ParentBean getParentBean()
    {
        return parentBean;
    }

    public void setParentBean(ParentBean parentBean)
    {
        this.parentBean = parentBean;
    }

    @PostConstruct
    public void init()
    {
        // manipulate parentBean
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-12T11:23:22.600

我希望在 Tomcat 8 + Mojarra 2.2.0 上解决了这个问题。就我而言，我刚刚从 web.xml 中删除了侦听器声明

```
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

构造函数似乎在之后被调用一次。

关于监听器条目，有一部分 BalusC 回答了[这个](https://stackoverflow.com/questions/10848341/java-lang-classnotfoundexception-com-sun-faces-config-configurelistener)问题。

> 无论如何，在 web.xml 中显式注册 Mojarra 的 ConfigureListener 实际上只需要解决旧的错误服务器，例如 GlassFish v3 和 Jetty，这些服务器未能在 Mojarra 的 TLD 文件中找到侦听器。当部署到一个像样的服务器时，整个条目是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:38:18.087

我对 Mojarra 2.0.x 也有同样的问题。我猜这个问题与多线程 JSF 初始化有关。尝试通过 com.sun.faces.enableMultiThreadedStartup 参数禁用它。

# django - 保存模型中每个字段的缩略图

> ID：13007292
> 
> 赞同：1
> 
> 时间：2012-10-22T08:09:12.037
> 
> 标签：django, django-models

我想根据请求为一个模型类中的某些字段保存缩略图。对我来说痛苦的是，我如何设法使缩略图类尽可能简单？

假设我有这个主要课程

```
class Staff(models.Model):
    name = models.CharField(max_length=100)
    img1 = models.ImageField(upload_to=upload_path)
    img2 = models.ImageField(upload_to=upload_path)
    img3 = models.ImageField(upload_to=upload_path)
    ... 
```

现在我想为另一个模型类中的每个 img 字段保存一个缩略图。所以我可以查询`Thumbnail`是否有拇指，例如`img1`......类似这样的东西（不工作的代码）

```
class Thumbnail(models.Model):
    staff = models.ForeignKey(Staff)
    field = models.FooBar('Staff._meta.fields...')
    thumb = models.ImageField(upload_to=upload_path2) 
```

`Thumbnail`关于这个类的外观有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:27:57.963

我建议对模型进行更多更改，以更好地存储图像和缩略图。您可以创建`ImageInfo`包含原始图像、缩略图和任何其他属性的模型。它将具有 foriegnkey，`Staff`以便您可以拥有多个图像`Staff`

```
class Staff(models.Model):
    name = models.CharField(max_length=100)

class ImageInfo(models.Model):
    staff = models.ForeignKey(Staff)
    img = models.ImageField(upload_to=upload_path)
    thumb = models.ImageField(upload_to=upload_path2) 
```

现在您可以找到设置了缩略图的图像

```
staff_obj.imageinfo_set.filter(thumb__isnull=False) 
```

# jquery - 下拉框设置

> ID：13007293
> 
> 赞同：1
> 
> 时间：2012-10-22T08:09:12.497
> 
> 标签：jquery, html

这个问题与我之前关于在单击某个开关时更改 href-tag 的 URL 的帖子有关。 [关联](https://stackoverflow.com/questions/12910487/jquery-change-url-depending-on-click-or-selection)

我现在已经设置了一些不同的东西，因为我无法到达任何地方。href 更改现在可以工作，但我无法在下拉框中显示选定的图标和名称。

[JSFiddle](http://jsfiddle.net/hH8EQ/)

因此，例如，如果选择了“德语”，那么它应该与相应的标志图标一起显示为下拉框中的当前选择。

我的设置是错误的还是需要什么来解决这个问题？

```
 <div id="language-selection"><div id="current-language"><span class="element-invisible">Current language:</span>
      <img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_United_Kingdom.png" alt="English" title="English" /> English
  </div>
  <div class="element-invisible">Switch to:</div>
  <ul id="other-languages">
  <li class="zh-hans first"><a  href="javascript:;"  data-lang="Chinese" class="clickButton"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_China.png" alt="简体中文" title="简体中文" /> 简体中文&lt;/a></li>
  <li class="en"><a  href="javascript:;"  data-lang="English" class="clickButton" </a> <span class="language-link"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_United_Kingdom.png" alt="English" title="English" />English</span></li>
  <li class="de last"><a href="javascript:;"  data-lang="German" class="clickButton"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_Germany.png" alt="German" title="German" /> German</a></li>
</ul>
 </div>   

<ul>
    <li><a class="clickButton" href="folder1/firstLink/Languages/English/folder/index.html">Index Link</a></li>
    <li><a class="clickButton" href="../folder2/secondLink/Languages/English/folder/index.html">A different Link </a></li>
    <li><a class="clickButton" href="../../folder3/Languages/English/folder/index.html">Another different link</a></li>
<ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:59:35.733

嗨，为了工作，我稍微更改了您的代码。您需要在选择单击时更改语言文本和语言图像。

HTML部分：

```
<div id="language-selection"><div id="current-language"><span class="element-invisible">Current language:</span>
      <img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_United_Kingdom.png" alt="English" title="English" /><span class="text">English</span>
  </div>
  <div class="element-invisible">Switch to:</div>
  <ul id="other-languages">
  <li class="zh-hans first"><a  href="javascript:;"  data-lang="Chinese" class="clickButton"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_China.png" alt="简体中文" title="简体中文" /> 简体中文&lt;/a></li>
  <li class="en"><a  href="javascript:;"  data-lang="English" class="clickButton"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_United_Kingdom.png" alt="English" title="English" />English</a></li>
  <li class="de last"><a href="javascript:;"  data-lang="German" class="clickButton"><img class="language-icon" src="http://www.euromonitor.com/medialibrary/Image/Flag_20x20_Germany.png" alt="German" title="German" /> German</a></li>
</ul>
 </div>   
... 
```

这部分的JS：

```
 ...
 var current = "English"
$("[data-lang]").on("click", function() {
    var lang = $(this).data("lang");

$(".clickButton").prop("href", function(i, href) {
        return href.replace(current, lang);
    });

    $("#current-language img").attr("src", $(this).children("img").attr("src")); // NEW 

    $("#current-language .text").text(lang); // NEW

    current = lang;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:58:48.827

请在您的 jquery 脚本代码之前添加下面给出的代码`current = lang;`

```
 /*Replace language flag src , alt and title*/
   $('#language-selection > #current-language > img').attr('src' , $(this).find('img').attr("src"));

   $('#language-selection > #current-language > img').attr('alt' , lang);
   $('#language-selection > #current-language > img').attr('title' , lang);

   /*check for all content in div having id current-language and check if nodeType == 3 mean string text then replace old text with new one */  
   $("#language-selection > #current-language").contents().each(function() {
         if(this.nodeType == 3)
             this.nodeValue = this.nodeValue.replace(current, lang);
     }); 
```

请检查链接[Jsfiddle Link](http://jsfiddle.net/hqPYC/)。

谢谢

# javascript - 是否允许 Chrome 扩展通过 Content Script 读取页面脚本内容

> ID：13007295
> 
> 赞同：0
> 
> 时间：2012-10-22T08:09:45.030
> 
> 标签：javascript, google-chrome-extension

我目前正在创建一个 Chrome 扩展程序。但是谷歌官方不允许扩展访问网页中定义的变量或函数：

> 但是，内容脚本有一些限制。他们不能：
> 
> ```
> Use chrome.* APIs (except for parts of chrome.extension)
> Use variables or functions defined by their extension's pages
> Use variables or functions defined by web pages or by other content scripts 
> ```

更新：

在页面中有许多脚本标签，例如：

```
 <script>...<script>
 <script>...<script>
 <script>...<script> 
 <script>
 $config = {};
 $config.a = 1;
 $config.b = 5; 
 function getConfig() {  ...
   // some code  return config; 
 }
 </script> 
 <script>...<script>
 <script>...<script> 
```

有什么方法可以从内容脚本中读取 $config 和函数 getConfig() 吗？或者这是不可能的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:36:43.100

您可能注意到 chrome.* API 只能由后台页面或其他插件特定页面使用。另一方面，内容脚本可以访问页面，但不能使用 chrome.* API。

您需要做的是使用内容扩展来访问页面上您想要的任何内容，然后将带有数据的消息发送回后台页面。然后后台页面可以使用数据和 chrome.* API。

文档有关于内容脚本和背景页面之间消息传递的非常好的示例和文档。

[http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)

# 更新

您只能发送包含 JSON 对象的消息。换句话说，您不能发送 getConfig 函数。但是您可以在示例中发送 $config 。如果 $config 对象不是 JSON，则需要以某种方式对其进行序列化。

*您无法控制的页面上的代码*

```
$config = {};
$config.a = 1;
$config.b = 5; 
```

*内容脚本.js*

```
function getConfig(){return $config;}

chrome.extension.sendMessage({type: 'config', content: getConfig()}, function(response) {
  console.log(response.status);
}); 
```

*背景.js*

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    console.log(sender.tab ?
                "from a content script:" + sender.tab.url :
                "from the extension");
    if (request.type == "config") {
        // DO SOMETHING WITH request.config here
        sendResponse({status: "OK"});
    }
    sendResponse({status: "Unknown request type"});
  }); 
```

# c# - Visual C# 中的结构化编程

> ID：13007301
> 
> 赞同：0
> 
> 时间：2012-10-22T08:10:16.077
> 
> 标签：c#, visual-studio, structure

这可能是一个相当大的问题，需要尽快回答；非常感谢想要解释的人。参考书籍/其他网站/youtube 链接/其他不错的东西就可以了。

我正在使用 Visual Studio 掌握 C# 编程的窍门。我的程序越来越大，越来越复杂。我非常努力地保持它的结构，但每次我发现自己最终把它搞砸了。函数、变量、guievents 和所有东西都采用相同的形式。最后，我再也找不到没有 ctrl+f 功能的东西了。

用于多个表单的变量存储在单独的表单中，从而创建更多概览。静态值在我的程序顶部定义并用于例如 switch/case 语句。

但是还是；它很容易搞砸一切。我希望我的程序有更多的结构，但我真的没有一个好的结构化编程的例子。我真的不知道在主要形式中保留什么标准，或者应该在单独的形式中保留什么。欢迎提供有关此主题的任何信息:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:15:25.197

[我强烈建议您购买Steve McConnell](http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=sr_1_1?ie=UTF8&qid=1350893502&sr=8-1)的 Code Complete 的副本。

来自亚马逊页面的片段：

*   以最小的复杂性和最大的创造力进行设计
*   获得协作开发的好处
*   应用防御性编程技术来减少和清除错误
*   利用机会重构或发展代码，并安全地进行
*   使用适合您项目的施工实践
*   快速有效地调试问题
*   及早正确解决关键的施工问题
*   在项目的开始、中间和结束中构建质量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:16:35.113

对于跨多个表单共享的变量，为什么不将它们放在单个 CS 文件中并引用它们呢？这将它们集中到一个地方，使它们更易于维护。

最好的做法是将您的业务和数据库访问逻辑放入单独的 CS 文件中，并以这样一种方式使用它们，即您的表单访问您的业务层，而您的业务层访问您的数据库层。

您可以按照自己喜欢的方式构建应用程序。CS 文件所在的位置（如在其包含的文件夹中）不会影响您的代码。Visual Studio 将自动设置命名空间以匹配它所在的文件夹，但您可以覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:36:32.190

您还可以从使您的代码更加面向对象中受益，这会将相关代码包装到它们自己的 .cs 文件中的单独类中。为了让您开始，您说您正在连接到自定义设备。你有代表这个设备的类吗？查看代码中变量和方法的名称——它们是否包含名词？如果是这样，请考虑将它们也纳入课堂。在您使用动词的地方，这会建议添加到类中的方法。

因此，如果您有一个名为 InitialiseDevice 的方法，那么这将建议一个名为 Device 的类，该类具有一个 Initialise 方法。

显然，面向对象编程还有很多内容，还有很多关于它的书籍——你可能会喜欢：[Beginning C# Object-Oriented Programming](https://rads.stackoverflow.com/amzn/click/com/1430235306)。

# javascript - onclick 时显示“选择选项”

> ID：13007302
> 
> 赞同：3
> 
> 时间：2012-10-22T08:10:17.397
> 
> 标签：javascript, jquery

我尝试创建效果，当有人单击`option`时`select option`会显示另一个“选择选项框”，您可以在此处查看[http://jsfiddle.net/ruslyrossi/Qxke8/1/](http://jsfiddle.net/ruslyrossi/Qxke8/1/) 。

问题是这种效果或脚本只能与浏览器 mozilla 一起使用，而不能与 chrome 或 ie 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:27:36.730

我不确定点击事件是否对选项有效。即使用“更改”事件处理程序，而不是“点击”。

在此处尝试此**工作演示**：http : [//jsfiddle.net/HVSyC/](http://jsfiddle.net/HVSyC/)

休息应该适合您的需要`:)`

如果您愿意，还可以：[单击 chrome 中的选择选项元素上的事件](https://stackoverflow.com/questions/1402227/jquery-click-event-on-select-option-element-in-chrome)

**代码**

```
var $x = jQuery.noConflict(true);
$x(document).ready(function() {

    $x(".group_tag_dynamic").hide(); //default

    $x("select[name='action_top']").change(function() {

        alert(this.value);
        if(this.value == "Delete")
            $x(".group_tag_dynamic").hide('slow');
        else if(this.value == "Set Under")
            $x(".group_tag_dynamic").show('slow');    

    });

});

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:27:42.520

```
$x(document).ready(function() {
    $x(".group_tag_dynamic").hide(); //default
    $x("select[name=action_top]").change(function() {
        var selectedOption = $x(this).find('option:selected');
        if(selectedOption.hasClass('bulk_action_target'))
            $x(".group_tag_dynamic").show('slow');
        else if(selectedOption.hasClass('bulk_action_delete'))
            $x(".group_tag_dynamic").hide('slow');
    });
});​ 
```

小提琴：http: [//jsfiddle.net/Qxke8/12/](http://jsfiddle.net/Qxke8/12/)

# java - 为什么这两个代码片段不同

> ID：13007309
> 
> 赞同：0
> 
> 时间：2012-10-22T08:10:51.537
> 
> 标签：java

我只是注意到，当我将代码片段中的最后一行从 更改`potential =+ rep_pot` 为 时`potential = potential + rep_pot`，我得到了完全不同的行为。有人知道为什么会这样吗？

```
double potential = euclideanDistance(i, goal);
for (IntPoint h: hits){
    double dist = euclideanDistance(i, h);
    double a = range - dist;
    double rep_pot = (Math.exp(-1/a)) / dist;
    potential =+ rep_pot;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:13:06.893

Java中没有`=+`运算符。有关所有合法运算符，请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.12)。

`=+`是*两个*运算符：`=`后跟`+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:13:23.470

那是因为

```
potential = potential + rep_pot 
```

类似于

```
potential += rep_pot 
```

和

```
potential =+ rep_pot; 
```

是相同的

```
potential = rep_pot; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T08:14:13.470

你可能的意思是`+=`。在您的情况下，它被解释`x = +x`为`x = x`

使用`+=`：

```
potential += rep_pot; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T08:14:33.080

是的，因为这两个东西是不等价的。

```
potential =+ rep_pot; 
```

在这里，我们有可能为表达式'unary plus rep_pot'分配了一个值

你打算写的东西看起来不同：

```
potential += rep_pot; 
```

这相当于

```
potential = potential + rep_pot; 
```

# sql - 编写更新查询以根据特定条件更新列

> ID：13007313
> 
> 赞同：0
> 
> 时间：2012-10-22T08:11:07.620
> 
> 标签：sql, sql-server-2005

我写了一个这样的查询。

```
Update Dynamic_Grid 
set TRIAL=(Select Trial from TEMP) 
where UsrCode='ll1' 
and ColumnName=(Select ColumnName from TEMP) 
```

它正在抛出错误。任何人都可以尝试纠正它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:17:43.213

最有可能的子查询返回多个记录...

这两个查询应该只返回一个值..

```
Select Trial from TEMP
Select ColumnName from TEMP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:18:42.017

您只能为 设置一个值`TRIAL`。`Select Trial from TEMP`可以返回多个值。所以你应该在`set`.
你可以使用这个： -

```
Update Dynamic_Grid 
set TRIAL='some value' 
where UsrCode='ll1' 
and ColumnName IN(Select ColumnName from TEMP) 
```

# c# - 我可以将 Visual Studio 2012 Express Edition 用于商业用途吗？

> ID：13007317
> 
> 赞同：38
> 
> 时间：2012-10-22T08:11:13.993
> 
> 标签：c#, visual-studio-2012, licensing

我知道以前曾针对 Visual Studio Express 的早期版本（2010 和 2008）提出过这个问题，但是对于 Visual Studio Express 2012，我还没有找到**具体的答案。**

我计划制作一些不包含任何其他第三方库的小型纯 C# 应用程序。

1.  [这个问题](https://stackoverflow.com/questions/11376472/which-version-of-visual-studio-can-I-use-for-commercial-project)谈论的是 2010 版本和 VS 2012 RC，但不是后来发布的 Visual Studio Express 2012。

2.  [此问题](https://stackoverflow.com/questions/1420710/can-I-produce-commercial-code-with-visual-studio-express-editions)的答案提供了一个指向目前不存在的常见问题解答的链接。它被重定向到一个页面，您可以在其中下载最新的 VS 2012。经过一番挖掘，我能够在[此处](http://web.archive.org/web/20101020114424/http://www.microsoft.com/express/Support/Support-faq.aspx)找到该页面的存档。再说一次，我不能确定它是否适用于 VS2012 Express。即使经过大量挖掘，我也找不到 VS2012 的任何常见问题解答部分。

3.  [接下来我试图从这里](http://www.microsoft.com/About/Legal/EN/US/IntellectualProperty/UseTerms/Default.aspx)挖掘出微软产品的最终用户许可条款，但我找不到 VS 2012 Express 版本的许可条款。

4.  [我浏览了此处](http://www.microsoft.com/en-us/download/details.aspx?id=13350)提供的 VS2012 许可白皮书。在第 26 页，它声明“Visual Studio Express 可用于构建生产应用程序”Dees 这意味着我们可以构建用于商业目的的应用程序/程序吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-22T08:18:46.060

从这个看[，](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/1aaf1efc-04df-40b9-9289-f3db0420c206)是的，您可以使用 Visual Studio 的 Express 版来开发商业应用程序。

# vbscript - 如何使用 msscriptcontrol 获取 VBScript 中的所有函数名称而不执行脚本代码？

> ID：13007326
> 
> 赞同：2
> 
> 时间：2012-10-22T08:12:30.273
> 
> 标签：vbscript

如何只获取所有函数和过程名称，而不是自己编写解析器？

以下面的vbs代码为例，其中包括1个函数，1个过程，2个语句，我想得到函数和过程名称：1）“ **GetValue** ” 2）“ **ABC_Result** ”

虽然`IScriptControl::AddCode`微软提供的可以工作，但谁的问题是它总是执行默认的语句（例如“ABC_Result 20”，“While True Wend”）？

//\test.vbs

```
Function GetValue(varVal)
  GetValue = varval*2
End Function

Sub ABC_Result(count)
  'msgbox is not allowed in server side, so use beep

  Dim WshShell
  Set WshShell = CreateObject("Wscript.Shell")
  beep = chr(007)
  Dim i
  For i=0 To CInt(count)
    WshShell.Run "cmd /c @echo " & beep, 0
  Next
End Sub

ABC_Result 20

While True
Wend 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:53:48.937

编写“解析器”可能是一种方法，使用 Instr() 之类的字符串函数，甚至是正则表达式。

但是，有第三方工具，例如[http://www.sourceformat.com/vbscript-formatter.htm](http://www.sourceformat.com/vbscript-formatter.htm)，它们可能会为您提供交叉引用列表。

# jquery - 我可以动画浏览器响应被删除的元素吗？

> ID：13007328
> 
> 赞同：1
> 
> 时间：2012-10-22T08:12:53.243
> 
> 标签：jquery, jquery-animate

嘿，我想知道我是否可以为浏览器对删除元素的自然响应设置动画？

例如，如果我有一个连续 4 个单元格的表格并且我删除了其中一个，浏览器自然会像他有 3 个单元格一样行事，因此该行变得更慢（所有单元格都向左/向右移动）。

我可以动画这个浏览器响应吗？似乎找不到有关该主题的任何信息，我找到的最接近的是：

```
target.fadeOut(300).remove(); 
```

仅在动画后删除，因此没有太大帮助。

对这个主题有什么启示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:17:28.370

看看这个插件，我认为它有你所追求的。

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

更具体地说，这个演示：http: [//isotope.metafizzy.co/demos/removing.html](http://isotope.metafizzy.co/demos/removing.html)

# android - java.lang.IllegalStateException：目标主机不能为空，或在参数中设置

> ID：13007329
> 
> 赞同：2
> 
> 时间：2012-10-22T08:12:56.107
> 
> 标签：android

乌尔：

```
http://23.23.82.251:9116/solr/db/select?q=*:*+_val_:%22geodist%28%29%22&fq=(ProviderType:10)&rows=100&wt=json&indent=true&fl=ProviderID,ProviderType,ProviderName,ProviderAddress,CityAreaID,CityAreaName,City,State,Latlong,score&fq={!geofilt}&sfield=Latlong&pt=20.296059,85.82454&d=5&sort=geodist()%20asc 
```

当我尝试在带有发布请求的 android 中使用此 url 时，我收到以下错误。

```
10-22 13:54:49.946: E/SearchResult(6659): Exception Name = java.lang.IllegalArgumentException 
```

我使用了 URLEncoder.encode() 但我仍然遇到同样的错误。任何人都可以建议我在哪里写错了。下面的代码我正在使用

```
 HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            // The default value is zero, that means the timeout is not used. 
            int timeoutConnection = 10000;

            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 15000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);               
            httpclient = new DefaultHttpClient(httpParameters);             

            HttpPost httppost = new HttpPost(url here);
            JSONObject json = new JSONObject();
            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity httpEntity = response.getEntity();
            InputStream instream = httpEntity.getContent();
            String result= Utilities.convertStreamToString(instream);

            json=new JSONObject(result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T08:20:39.170

您不应该对整个 URL 进行编码，因为这会导致一些乱码，例如

```
http%3A%2F%2F23.23.82.251%3A9116%2Fsolr%2Fdb%2Fselect%3Fq%3D*%3A*%2B_val_%3A%2522geodist%2528%2529%2522%26fq%3D(ProviderType%3A10)%26rows%3D100%26wt%3Djson%26indent%3Dtrue%26fl%3DProviderID%2CProviderType%2CProviderName%2CProviderAddress%2CCityAreaID%2CCityAreaName%2CCity%2CState%2CLatlong%2Cscore%26fq%3D{!geofilt}%26sfield%3DLatlong%26pt%3D20.296059%2C85.82454%26d%3D5%26sort%3Dgeodist()%2520asc 
```

被用作 URL。这将失败，因为它不能被解析为普通的 HTTP URL。

相反，只需尝试使用`new HttpPost("http://23.23.82.251:9116/...");`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:28:50.117

请试试这个方法。。

```
HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "test"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-22T08:20:11.947

请试试这个..

```
URLEncoder.encode("<url here>", "UTF-8"); 
```

# java - org.springframework.remoting.RemoteAccessException：从另一个线程启动任务时发生无法访问 HTTP 调用程序远程服务

> ID：13007331
> 
> 赞同：3
> 
> 时间：2012-10-22T08:13:00.293
> 
> 标签：java, spring, javafx, spring-remoting

我有带有 JavaFX 客户端的 spring 应用程序，当调用在另一个线程（用于后台任务）中运行的方法时，我得到了这个异常——这不是主要的 JavaFx 线程。

```
org.springframework.remoting.RemoteAccessException: Could not access HTTP invoker remote service at [http://localhost:8080/server/service/security/UserGroupService]; 
 nested exception is java.net.SocketTimeoutException: Read timed out
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.convertHttpInvokerAccessException(HttpInvokerClientInterceptor.java:211)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:144)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy63.batchJobSetAccessRightsToConsultant(Unknown Source)
at client.view.control.reporting.AccessRightsBatchDialog$1Local$744.invoke$(AccessRightsBatchDialog.fx:374)
at com.sun.javafx.functions.Function1.invoke(Function1.java:44)
at com.sun.javafx.functions.Function1.invoke$(Function1.java:38)
at client.async.AsyncTask.taskRun(AsyncTask.fx:71)
at client.async.AsyncTaskHelper.run(AsyncTaskHelper.java:32)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
  Caused by: java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
at org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.executePostMethod(CommonsHttpInvokerRequestExecutor.java:195)
at org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.doExecuteRequest(CommonsHttpInvokerRequestExecutor.java:129)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:191)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:173)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:141)
... 11 more 
```

我所做的最后一次更改，我怀疑，这是一个原因 - 因为我需要来自 HTTP 会话的用户信息，在每个服务代理中，我正在传递这个 httpInvokerRequestExecutor bean：

```
<bean id="httpInvokerRequestExecuter" class="org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor" >

for example:

<bean id="testServiceProxy"
    class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
    <property name="serviceUrl" value="${remoteUrl}/service/test/TestService" />
    <property name="serviceInterface"
        value="common.service.test.TestService" />
    <property name="httpInvokerRequestExecutor" ref="httpInvokerRequestExecuter" />
</bean> 
```

对于在主线程中运行的方法，这似乎永远不会发生。

所有关于原因和可能解决方案的想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:23:09.570

增加 的读取超时`httpInvokerRequestExecuter`。默认值为一分钟。您可以增加它或设置为 0，这意味着它永远不会超时（可能不是一个好主意，但对测试很有用）。

删除 readTimeout 的 Bean 定义（或将其设置为适用的数量）：

```
<bean id="httpInvokerRequestExecuter" class="org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecuto‌​r" > 
     <property name="readTimeout" value="0" /> 
</bean> 
```

# java - 使用条件休眠获取多级实体

> ID：13007332
> 
> 赞同：3
> 
> 时间：2012-10-22T08:13:04.377
> 
> 标签：java, hibernate

我有以下结构：

**爪哇**

```
private long id;
private String name;
private B bObj;
// getter-setter 
```

**B.java**

```
private long id;
private List<B> bList;
//getter-setter 
```

如您所见，该结构是递归的。

现在我想写一个标准来获取 A 的一个对象以及`bObj`, `bObj.bList`, `bObj.bList.bList`, `bObj.bList.bList.bList`& 等等，其中没有。连接级别未知。

也欢迎除 Criteria 之外的任何其他方式。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:53:58.047

if you set fetch type to LAZZY on List bList; it could be enough, but I don'tknow if it isn necessary to set Maximum outer join fetch depth for hibernate to max level of bLists.

# jquery - 检查是否设置了自定义事件

> ID：13007336
> 
> 赞同：1
> 
> 时间：2012-10-22T08:13:15.083
> 
> 标签：jquery, javascript-events

```
$('#element').bind({
    specialEvent : function()
    {
        console.log(1);
    }
}); 
```

如何检查元素是否有`specialEvent`事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:31:46.340

在 jQuery 1.8`$(element).data('events')`中已被删除，但您仍然可以通过`$._data(element, "events")`- 检查[此](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)来获取事件数据以进行调试。

```
console.log($._data(element, 'events')); 
```

# javascript - 在我的选择列表中更改计算百分比

> ID：13007343
> 
> 赞同：0
> 
> 时间：2012-10-22T08:13:37.417
> 
> 标签：javascript, jquery, select

我有一个发票计算器，我需要根据我要应用的 IVA 百分比的不同选择来更改我的发票总金额。

这是我的[示例](http://jsfiddle.net/Manna/cpRa2/7/)，如您所见，如果您单击 IVA 21%，您将获得 2 个选项：Iva 21% 或 NO IVA，我创建了一个可编辑的选择。现在总金额按 IVA 的 21% 计算。当我选择无时，如何使我的总金额不计算 21%？

这是我的可编辑选择

```
$('.editable_selectiva').editable(function(value, settings) { 
             console.log(this);
             console.log(value);
             console.log(settings);
             return(value);
          }, {
               data   : "{'IVA 21%':'IVA 21%','NO IVA':'NO IVA'}", 
             type    : 'select',
             style  : "inherit",
         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:10:37.863

我已经部分解决了你的问题。我只是稍微改变了方法计数：

```
function tally(selector) {
    var total = 0;
    $('p.editable_number').each(function() {
        total += parseInt($(this).text()) || 0;
        $('#subtotal').html(total);
        if ($('.editable_selectiva').text() === "NO IVA") {
            $('#total').html(0);
            $('#total1').html(total);
        }
        else {
            $('#total').html(total*0.21);
            $('#total1').html(total*1.21);
        }
    })
} 
```

虽然它不是最干净的方法（尝试更改为“NO IVA”，然后添加新产品，您会发现它有效）。**您现在唯一需要做的就是在用户将选择器从 "IVA 21" 更改为 "NO IVA" 时以某种方式执行计数方法**。

建议：考虑使用 Backbonejs MVC 框架来构建 javascript 应用程序。它为事件处理提供了出色的工具，并允许前端开发人员使用 Javascript 构建更干净的 Web 应用程序。

# actionscript-3 - as3 日期应自行增加

> ID：13007345
> 
> 赞同：0
> 
> 时间：2012-10-22T08:13:44.313
> 
> 标签：actionscript-3, flash, date, datetime, auto-update

我发现一旦我将我的 AS3 日期设置为服务器日期时间，它的整个生命周期都将保持不变。

应该是在更新自己，例如

```
I set: 
2012/10/23 5:20 
```

2小时后（继续运行SWF）它应该是

```
2012/10/23 7:20 
```

但它仍然存在：

```
2012/10/23 5:20 
```

这违反了我的要求，我正在寻找一个好的解决方案来保持我的服务器时间是最新的，而不会干扰客户端时间戳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:27:01.047

保持日期同步的一个简单方法是依赖两个日期！

```
public class SyncDate
{
    public function SyncDate(serverDate:Date)
    {
        _localDate = new Date();
        _serverDate = serverDate;
    }

    private var _localDate:Date;
    private var _serverDate:Date;

    public function get date():Date
    {
        var timeDiff:Number = (new Date()).time - _localDate.time;
        return new Date(_serverDate.time + timeDiff);
    }
} 
```

当您致电时`SyncDate#date`，您将获得调整后的服务器日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:27:48.413

您需要了解的一件事`Date Class`是它存储了您创建该实例时的时间详细信息。如果您创建一个`Date instance`并在 5 分钟后尝试检索数据，您将获得创建该实例时的时间详细信息，而不是您访问该属性的时间。

为了不断更新时间，您将需要使用重复事件，例如`ENTER_FRAME`或`Timer Class`来让您的日期实例不断更新。

以下示例用途`Timer Class`：

```
var my_date:Date; 

var my_timer:Timer=new Timer(1000);
my_timer.addEventListener(TimerEvent.TIMER, onTimer);
my_timer.start(); 

function onTimer(e:TimerEvent):void {
my_date = new Date();
trace(my_date.hours + ":" + my_date.minutes + ":" + my_date.seconds);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T11:34:36.627

谢谢@Florent，@Sohel Khalifa，我终于解决了这个问题。我试过这个：

```
var clock:Date = new Date('2012/10/23 5:20:00');
var tim:Timer = new Timer(1000);

tim.addEventListener(TimerEvent.TIMER,function(){
    clock.time = clock.time + 1000;
    trace(clock.getMinutes()+":"+clock.getSeconds());
}); 
```

# path - WSDL（XSD 路径）中的当前目录“点斜杠”（./）

> ID：13007347
> 
> 赞同：1
> 
> 时间：2012-10-22T08:13:50.870
> 
> 标签：path, xsd, jaxb, wsdl

我正在使用的 wsdl 中的 xsd 使用以“点斜杠”(./) 开头的路径进行引用。

```
<xsd:schema>
    <xsd:import namespace="urn:my.name.space.be" schemaLocation="http://fictive.url.be:11001/path/to/wsdl/my-service?XSD=./xsd/my-service.xsd"/>
</xsd:schema> 
```

路径有效，可以在浏览器中访问xsd；例如，它也适用于 Soap UI。但是当我尝试使用 Jdeveloper 生成代理时，我遇到了“WebServiceException: : 从 wsdl 创建模型时出错：'ExampleType' 已定义”。

如果我删除“点斜线”（`XSD=xsd/my-service.xsd`），则不再发生异常并且一切正常。

这是一个错误吗？为什么会这样？有什么方法可以避免这种情况而不必修改 wsdl？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:26:23.007

发生这种情况的原因与您的 JDeveloper 工具如何组合 XML Schema 集有关。`'ExampleType' is already defined'.`表示以下两件事之一：

*   **相同**的XSD 定义使用**不同的基本 URI**`ExampleType`加载**两次**或更多次：不同的“字符串”表示，但在服务器上取消引用时，它指向相同的资源；

***   `ExampleType`在**两个**或多个（不同的）XSD“位置”中定义：可以在 WSDL 类型/模式部分和/或外部 XSD 文件中。** 

 **当您更改 URL 时，它要么使其无效（不再有额外的引用），要么 JDeveloper URI 比较能够正确执行。

要进行诊断，您必须首先弄清楚从哪里下载了哪些资源。

在运行 JDeveloper 和其他工具时使用 HTTP 调试器（例如，使用 tcpmon 作为代理并通过它监视流量）。比较跟踪并查找每个工具试图解析的 URL。

比较 GET 标头值以查看工具之间的差异。然后查看下载的内容。它应该让您对下一步做什么有一个好主意。如果您仍然无法弄清楚，请使用其他信息更新问题。**

# android - 如何从片段开始服务

> ID：13007355
> 
> 赞同：36
> 
> 时间：2012-10-22T08:14:12.430
> 
> 标签：android, android-intent, android-service

我想从列表视图项的片段开始服务。我正在尝试通过以下方式致电服务：

```
startService(new Intent(getActivity(),myPlayService.class)); 
```

但它根本行不通。我如何从片段中调用我的服务？有没有其他方法可以启动服务？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-10-22T08:36:16.947

代替

`startService(new Intent(getActivity(),myPlayService.class));`

和

`getActivity().startService(new Intent(getActivity(),myPlayService.class));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-11T20:45:29.790

从片段使用启动服务

爪哇

```
requireActivity().startService(new Intent(getContext(), ServiceName.class)); 
```

科特林

```
requireActivity().startService(Intent(context, ServiceName::class.java) 
```

# umbraco - Nivo Slider 不与客户端依赖框架一起使用

> ID：13007357
> 
> 赞同：0
> 
> 时间：2012-10-22T08:14:20.030
> 
> 标签：umbraco, nivo-slider, client-dependency

我为我的 Umbraco 网站实现了客户端依赖框架：

```
<CD:ClientDependencyLoader runat="server" id="Loader" >
        <Paths>
            <CD:ClientDependencyPath Name="Styles" Path="/css" />
            <CD:ClientDependencyPath Name="Scripts" Path='/scripts' />                
        </Paths>
    </CD:ClientDependencyLoader> 
```

在我的本地机器上一切正常。

但是，当我在网络服务器 (IIS 7.5) 上部署网站时，Nivo Slider 不再工作。

我比较了服务器和本地机器上的代码，它完全一样，但是在服务器上 Nivo Slider 没有出现，而在我的本地机器上却出现了。

有谁知道问题可能是什么？

谢谢你的帮助。

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:27:11.503

您确定两个版本中呈现的 HTML 是相同的吗？

然后我会关注渲染输出中的 javascript 和 css（如果有）链接，并确保您获得相同的 js / css 输出。

最后，在 Chrome 中（最好）按 F12 以调出开发者工具。检查控制台以查看是否抛出任何 javascript 错误，并检查网络以查看是否未下载任何文件。

# arrays - 如何在bash中将元素存储到数组中

> ID：13007360
> 
> 赞同：4
> 
> 时间：2012-10-22T08:14:30.093
> 
> 标签：arrays, bash, store

我又遇到了一个小问题，我想将字符串存储在数组中，我得到以下代码：

```
echo -e "Enter an amount"
read n 
for  ((i=0;i<n;i++)); 
do 
echo "Enter number $i " 
read ${array[$i]} 
done 
echo -e "$array[@]}" 
```

你能帮我看一下吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T08:25:07.963

第 5 行应该读作：

```
read array[$i] 
```

`${array[$i]}`，也就是你目前所拥有的，会输出带有下标$i的数组元素的值。该`read`命令将用户输入读入指定变量，因此您需要指定变量名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:23:50.293

你也可以写

```
array=()
for  ((i=0; i<n; i++)); do 
    read -p "Enter number $i " 
    array+=($REPLY)
done 
```

# php - php preg_match_all 反向引用

> ID：13007362
> 
> 赞同：0
> 
> 时间：2012-10-22T08:14:33.643
> 
> 标签：php, html, regex, preg-match-all, backreference

对于以下输入字符串、模式和：

```
$str1 = 'span class="outline">Iron Man butts heads with Nick Fury and Shield after HYDRA attacks a meeting of the United Nations.</span>
<span class="credit">
    Dir: <a href="/name/nm0381817/">Vinton Heuck</a>, <a href="/name/nm1367649/">Ciro Nieli</a>, <a href="/name/nm1367649/">Aditya Parikh</a>'

$pattern='/class=&quot;credit&quot;&gt;[\s]+?Dir:([,\s]+?&lt;a[\s]+?href=&quot;\/name\/nm\d{7}\/&quot;&gt;([\/\(\)-:@!%*#=_|?$&;.\w\s]+?)&lt;\/a&gt;)+/um';

preg_match_all($pattern,$str1,$dir); 
```

print_r 的输出如下：

```
Array ( [0] => Array ( [0] => class="credit"> Dir: <a href="/name/nm0381817/">Vinton Heuck</a>, <a href="/name/nm1367649/">Ciro Nieli</a>, <a href="/name/nm1367649/">Aditya Parikh</a> ) [1] => Array ( [0] => , <a href="/name/nm1367649/">Aditya Parikh</a> ) [2] => Array ( [0] => Aditya Parikh ) ) 
```

正如你所看到的，Array[2] 给了 Aditya Parikh，我也希望能收到 Vinton Heuck 和 Ciro Nieli。但没有。

有什么解决办法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:43:40.537

返回的匹配数组背后的逻辑`preg_match_all`并不那么明显。

首先，不要使用正则表达式来解析html。照这样说：

你得到的结果是`$array[paren_num][match_num]`.

一个基本示例： `abc`针对正则表达式运行`/(.)/`将返回以下匹配数组：

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => b
            [2] => c
        )

    [1] => Array
        (
            [0] => a
            [1] => b
            [2] => c
        )

) 
```

索引 0 包含所有消耗的数据。索引 1 表示它是第一个反向引用（我们只有一个括号）。其中的 0-2 索引对应于每个匹配项。换句话说，表达式运行了 3 次，直到完成。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:59:03.327

您真的应该考虑使用 DOM 解析器。比如[这个](http://simplehtmldom.sourceforge.net/)。[正则表达式无法正确解析 HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

但是，这就是您的方法无法按预期工作的原因：

您对所有 3 个名称使用相同的捕获组。但是一个捕获组只有一个数字，所以你总是会得到最后一个被捕获的东西（最右边的名字）。但即使你只匹配一个名字（在`span`标签中任意远），你也会遇到不同的问题：

匹配不能重叠。由于您想要的所有三个匹配项都至少包含`class="credit"> Dir:`一些更常见的文本，因此您无法获得所有这些。您可以使用后向断言来解决此问题（因为它不是匹配的一部分），但不幸的是 PHP 不允许可变长度后向（这是必需的）。有一些解决方法可以解决这个问题，但归根结底，最好使用 DOM 解析器。

这只是一个使用我上面链接的解析器的基本示例：

```
require "simple_html_dom.php";

$html = str_get_html($str1);

$names = array();
foreach($html->find('span[class=credit] a') as $link)
    $names[] = $link->innertext;

print_r($names); 
```

导致：

```
Array
(
    [0] => Vinton Heuck
    [1] => Ciro Nieli
    [2] => Aditya Parikh
) 
```

# c++ - C++ 中全局与本地包含文件的顺序如何？

> ID：13007365
> 
> 赞同：4
> 
> 时间：2012-10-22T08:14:50.410
> 
> 标签：c++, include

是否有推荐的做法，例如全局包含应先于本地包含。全球我的意思是`#include <iostream>`和本地`#include "myhdr.h"`的。这是一些首选的顺序吗？为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T08:18:48.287

是的，有建议。他们之中有一些是：

*   **顺序**：如果您在 MyClass.cpp 中，请先放置“MyClass.h”，然后是 C 头文件，然后是 STL 头文件，然后是项目的头文件。
*   **内部顺序**：在每个类别中，使用字母顺序。
*   **语法**：`#inlcude <>`用于 C 和 STL 以及`#include ""`您自己的标题。

它们应该看起来像这样：

```
#include "MyClass.h"

#include <time.h>

#include <iostream>
#include <vector>

#include "MyFolder/MyAwesomeClass.h"
#include "MyOtherFolder/MyOtherClass.h" 
```

有关良好编码风格的更多建议，您可以查看[Google 的 C++ 风格指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)。他们很好地解释了*为什么*您应该在[本节](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Names_and_Order_of_Includes)中这样做。

# javascript - 用于在单元格中存储多个值的自定义表

> ID：13007371
> 
> 赞同：0
> 
> 时间：2012-10-22T08:15:32.893
> 
> 标签：javascript, jquery, html, asp.net-mvc

我需要制作自定义表来安排人员行和天数列。将实施附加逻辑来填充单元格。每个单元格都保存有关谁在特定日期在特定班次中参与的信息（可以是更多班次）。

实际上，我需要一种将值存储在某个控件（例如我的自定义 html 标记）、隐藏字段或其他东西中的方法。计划后，相同的单元格将填充额外的数据（实现的日期时间开始，实现的日期时间结束）。

最后一步是获取所有值并存储到数据库。

你怎么看？你有什么建议或类似的案例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:26:08.867

你的意思是喜欢在运行时创建表如果是这样我认为这段代码会帮助你

```
 var Products = response.value;
            var s = new Array();
            s[s.length] = "<table id='Productss' border = 1 bgcolor='Grey'>";
            s[s.length] = "<th>" + "Product ID" + "</th>";
            s[s.length] = "<th>" + "Product Name" + "</th>";
            s[s.length] = "<th>" + "Unit" + "</th>";
            s[s.length] = "<th>" + "Reorder Level" + "</th>";
            s[s.length] = "<th>" + "Supplier Name" + "</th>";
            s[s.length] = "<th>" + "Unit Price" + "</th>";
            s[s.length] = "<th>" + "Units In Stock" + "</th>";
            s[s.length] = "<th>" + "Units On Order" + "</th>";
            for (var i = 0; i < Products.length; i++) {
                s[s.length] = "<tr>";
                s[s.length] = "<td>" + Products[i].ProductID + "</td>";
                s[s.length] = "<td>" + Products[i].ProductName + "</td>";
                s[s.length] = "<td>" + Products[i].UnitName + "</td>";
                s[s.length] = "<td>" + Products[i].ReorderLevel + "</td>";
                s[s.length] = "<td>" + Products[i].SupplierID + "</td>";
                s[s.length] = "<td>" + Products[i].UnitPrice + "</td>";
                s[s.length] = "<td>" + Products[i].UnitsInStock + "</td>";
                s[s.length] = "<td>" + Products[i].UnitsOnOrder + "</td>";
                s[s.length] = "</tr>";
            }
            s[s.length] = "</table>";
            document.getElementById("DisplayResult").innerHTML = s.join("");

    } 
```

var Products Its Avariable Describes The Return Of Ajax Method And I Draw Table with JAvascript And Join It In span And Thats The Code Of joining

```
 document.getElementById("DisplayResult").innerHTML = s.join(""); 
```

Let Me Know If Any Thing Not Clear

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:14:41.043

I solved my problem with values putted in ID field. Custom function parse same ID field and extract necessary values.

# jquery - 如何使 datepicker onselect 函数在 jqgrid 中的工具栏搜索和高级搜索中的工作方式不同

> ID：13007373
> 
> 赞同：2
> 
> 时间：2012-10-22T08:15:41.067
> 
> 标签：jquery, jqgrid

我希望 onselect 事件只在 toolfilter 上而不是在高级搜索中完成他的工作。

这是我的网格：

```
$('#grid').jqGrid({
            colNames: ['Title', 'date'],
            colModel: [
                { name: 'Title', index: 'Title', searchoptions: { sopt: ['cn']} },
                { name: 'date', index: 'date', search: true, searchoptions: {
                    sopt: ['deq', 'dge', 'dlt'],
                    dataInit: function (el) {
                        $(el).datepicker({ onSelect: function (dateText, inst) { $("#grid")[0].triggerToolbar(); } });
                    }
                }, width: 70
                }
              ],
            pager: jQuery('#pager'),
            hidegrid: false,
            sortname: "date",
            sortorder: "desc",
            rowNum: 20,
            rowList: [10, 20, 50, 100],
            autowidth: true,
            width: "100%",
            height: "100%",
            datatype: 'json',
            viewrecords: true,
            mtype: 'POST',
            url: '<url>'

        }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:53:51.733

例如，您可以使用`id`搜索工具栏内的元素将使用`"gs_"`前缀构造的事实。所以实现可能是关于以下的

```
dataInit: function (elem) {
    $(elem).datepicker({
        changeYear: true,
        changeMonth: true,
        showButtonPanel: true,
        onSelect: function () {
            var $grid, grid;
            if (typeof (elem.id) === "string" && this.id.substr(0, 3) === "gs_") {
                // in case of searching toolbar
                $grid = $(elem).closest('div.ui-jqgrid-hdiv')
                               .next('div.ui-jqgrid-bdiv')
                               .find("table.ui-jqgrid-btable:first");
                if ($grid.length > 0) {
                    grid = $grid[0];
                    if ($.isFunction(grid.triggerToolbar)) {
                        setTimeout(function(){
                            grid.triggerToolbar();
                        }, 50);
                    }
                }
            } else {
                // refresh the filter in case of
                // searching dialog
                $(this).trigger('change');
            }
        }    
    });
} 
```

用非常接近的代码查看[答案。](https://stackoverflow.com/a/6876951/315935)

# android - 如何让 .png 图像飞起来？

> ID：13007374
> 
> 赞同：1
> 
> 时间：2012-10-22T08:15:43.563
> 
> 标签：android, image, wallpaper

我正在开发我的第一个 Android 项目 - 动态壁纸。我需要我的项目中的一些图像一直在屏幕上飞行。图像应该从下到上飞，但它们需要一直飞，所以背景永远不会是空的。这是我的代码的一部分，但我知道我需要的不止这些。

```
void draw(Canvas c) {
    c.save();
    c.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.wallpaper1), 0, 0, null);
    double tmp = Math.sin(fiX * Math.PI / 180F) * 20;
    Bitmap bm = BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.heart_s);
    c.drawBitmap(bm, 100 + (int) tmp, posY, paint);

    double tmp1 = Math.sin(fiX * Math.PI / 180F) * 20;
    Bitmap bm1 = BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.heart1);
    c.drawBitmap(bm1, 300 + (int) tmp1, posY, paint);

    double tmp2 = Math.sin(fiX * Math.PI / 180F) * 20;
    Bitmap bm2 = BitmapFactory.decodeResource(getBaseContext().getResources(), R.drawable.heart3);
    c.drawBitmap(bm2, 200 + (int) tmp2, posY, paint)

    posY = posY -direction;
    fiX = fiX + 10;

    if(posY < 0) {
        //posY = getResources().getDisplayMetrics().heightPixels;
        direction = 5;                  
    }

    if(posY > getResources().getDisplayMetrics().heightPixels) {
        direction = 5;                                      
    }
    if(fiX > 180) {
            fiX = 0;
    }
    c.restore();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:29:37.523

在您的 draw 方法调用结束时[使](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)视图无效。这将在你的平局上开始一个循环。

在绘图开始时添加动画逻辑，创建一些 drawModel 并使用此逻辑对其进行更新。然后根据您的模型更改图像的位置。

```
void draw(Canvas canvas) {
    handleUpdateModelEvent();
    onDraw();
    invalidate();
}

private void handleUpdateModelEvent(){

}

private void onDraw(){
   // in MVC this method should be called from model change event
} 
```

# php - 使用 IMAP 无法访问 GMAIL 发送的文件夹

> ID：13007375
> 
> 赞同：5
> 
> 时间：2012-10-22T08:15:44.157
> 
> 标签：php, imap

我正在尝试使用 Imap 获取 Gmail 发送的项目，但它给了我错误消息“通知：未知：[NONEXISTENT] 未知邮箱：在第 0 行的未知中发送（失败）（errflg=2）”

```
$hostname = '{imap.gmail.com:993/imap/ssl}Sent';
$username = 'anrc.wipro@gmail.com';
$password = '****************';

/* try to connect */
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error()); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T08:39:16.697

我相信“已发送”文件夹实际上是`[Gmail]/Sent Mail`

# php - 以相反的顺序从单向数组中获取数据

> ID：13007380
> 
> 赞同：2
> 
> 时间：2012-10-22T08:16:17.807
> 
> 标签：php, arrays

我有一个像单向列表这样的数组：

```
array(
    'data1' => <some data>,
    'next' => array(
        'data2' => <some data>,
        'next' => array(
            'data3' => <some data>,
            'next' => array(
                'data4' => <some data>,
                'next' => array(
                    'data5' => <some data>,
                    'next' => ..... etc to data n
                );
            );
        );
    );
); 
```

我需要以相反的顺序从内部数组中获取数据。(data n, ... , data 2, data 1) 你知道有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:08:04.217

您不是在寻找数组的反转，而是在寻找*reverse 的东西*。

首先更好地理解这种反向可能会对您有所帮助。

您需要每个单独元素的父级。*如果您遍历next*，父级始终是前一个。因此，如果您将前一个元素添加为父元素，那么数组的最后一个元素就是您要查找的元素。

所以听起来很直接。更难的部分是用所谓的变量别名/引用来表达这一点。

让我们添加所有的父母，并在遍历数组时，在引用它后删除`'next'`条目：

```
/* traverse the path on 'next' and keep previous to set 'parent' of current */
$walk = &$array; // start at root node
while ($walk) {

    if (isset($previous)) {
        $walk['parent'] = &$previous;
    }

    $previous = &$walk;

    $hasNext = array_key_exists('next', $walk);
    if ($hasNext) {
        $walk = &$walk['next'];
        unset($previous['next']);
    } else {
        break;
    }
}
unset($previous); 
```

如所写，*最后一个*元素将包含您要查找的数组。最后一个元素在`$walk`这里：

```
print_r($walk); 
```

这给了你（[演示](http://codepad.org/RLBFGLB8)）：

```
Array
(
    [data5] => <some data5>
    [parent] => Array
        (
            [data4] => <some data4>
            [parent] => Array
                (
                    [data3] => <some data3>
                    [parent] => Array
                        (
                            [data2] => <some data2>
                            [parent] => Array
                                (
                                    [data1] => <some data1>
                                )
    ...
) 
```

希望这是有帮助和可以理解的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:19:38.313

使用本机反向函数，或者：

```
$myArray[count($myArray) - ++$index] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:21:34.347

这个怎么样？

[http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php)

[http://php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)

如果您能告诉我们您想做什么，我们将更容易为您提供帮助。

编辑：根据您的评论，我相信您正在寻找 array_reverse 函数。

这是您要查找的内容：

[PHP需要递归反转一个数组](https://stackoverflow.com/questions/4103856/php-need-to-recursively-reverse-an-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:23:26.733

请注意，这不会反转内部数组。

```
$arr = array(
    'data1' => 'some data',
    'next' => array(
        'data2' => 'some data',
        'next' => '..... etc to data n'
    )
);
$rev = array_reverse($arr);
print_r($rev); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-22T08:30:02.550

使用 array_reverse(Array); 功能它可能有助于解决问题。

# c# - Jabber.NET SASL 异常/身份验证错误

> ID：13007387
> 
> 赞同：0
> 
> 时间：2012-10-22T08:16:48.837
> 
> 标签：c#, .net, xmpp, openfire

我使用**Jabber.NET**连接到**OpenFire**服务器。*客户有时*（但大多数时候）给我一个奇怪的异常： `jabber.connection.sasl.SASLException: Hash ist im angegebenen Status nicht gültig`，这是一条德语消息，指出哈希对于指定状态无效。*有时*（是的，我知道，但我不能影响）它，我也会得到 Exception `jabber.connection.sasl.SASLException: Das SafeHandle wurde geschlossen`，这意味着 SafeHandle 已关闭。

我尝试关闭所有可能的安全设置，但这一切都没有效果。这就是我的连接方式：

```
 private JabberClient _jabberClient = null;
    public JabberClient XmppClient
    {
        get
        {
            if (_jabberClient == null)
                _jabberClient = new JabberClient();
            return _jabberClient;
        }
    }

    // double checked: username and password are correct, servername is existing URL
    public login(username,password,servername)
    {
        var jid = new JID(username, serverName, Guid.NewGuid().ToString());
        bedrock.net.AsyncSocket.UntrustedRootOK = true;
        XmppClient.RequiresSASL = false; // --> this seems to have no effect at all
        //XmppClient[Options.SASL_MECHANISMS] = MechanismType.PLAIN; // setting this throws a NotImplementedException!!!
        XmppClient.SSL = false;
        XmppClient.AutoPresence = true;
        XmppClient.AutoReconnect = 3.0f;
        XmppClient.AutoLogin = true;
        XmppClient.AutoStartTLS = true;
        XmppClient.AutoStartCompression = false;
        XmppClient.User = jid.User;
        XmppClient.Password = password;
        XmppClient.Resource = jid.Resource;
        XmppClient.Server = serverName;
        XmppClient.NetworkHost = serverName;

        XmppClient.OnMessage += new MessageHandler(JabberClient_OnMessage);
        XmppClient.OnDisconnect += new bedrock.ObjectHandler(JabberClient_OnDisconnect);
        XmppClient.OnError += new bedrock.ExceptionHandler(JabberClient_OnError);
        XmppClient.OnAuthError += new jabber.protocol.ProtocolHandler(JabberClient_OnAuthError);
        XmppClient.OnAuthenticate += new bedrock.ObjectHandler(XmppClient_OnAuthenticate);
        XmppClient.OnInvalidCertificate += new System.Net.Security.RemoteCertificateValidationCallback(XmppClient_OnInvalidCertificate);
        XmppClient.OnWriteText += new bedrock.TextHandler(XmppClient_OnWriteText);
    } 
```

我该如何解决这个问题？什么可以规避它？我现在唯一的可能性是验证很多次，直到它幸运地工作，但这可能需要一些时间，我不想诉诸于此。

编辑：下面的答案让我得到了答案：它就像识别异常并`connect()`再次调用一样简单。为什么图书馆不自动执行此操作对我来说是个谜，我也不明白为什么它在停用时使用 SASL，但是很好。被黑了，有效。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:46:49.397

我没有看到问题，但这是我的工作代码。希望能帮助到你。

```
 private JabberClient _client;
    private JabberClient client
    {
        get {
            if (_client == null)
            {
                _client = new JabberClient();
                ConfigureClient(_client);
            }
            return _client; 
        }
        set
        {
            _client = value;
            RegisterOnEvents(_client);
        }
    }      

    public MiddleMan()
    {
        jabber.connection.ConferenceManager c = new jabber.connection.ConferenceManager();

        client = new JabberClient();

        ConfigureClient(client);
    }  

    private void ConfigureClient(JabberClient jc)
    {
        JID jid = new JID(LoginInformation.UserName);

        jc.User = jid.User;
        jc.Server = jid.Server;
        if (!String.IsNullOrEmpty(LoginInformation.NetworkHost))
        {
            jc.NetworkHost = LoginInformation.NetworkHost;
        }
        jc.Port = 5222;
        jc.AutoReconnect = 3f;
        jc.AutoLogin = true;
        jc.AutoPresence = true;
        jc.Resource = LoginInformation.Resource;
        jc.Password = LoginInformation.Password;
        jc.KeepAlive = 10;
    }

    private void RegisterOnEvents(JabberClient jc)
    {
        //Messaging
        //jc.OnMessage += new MessageHandler(OnMessageReceived);

        //Login
        jc.OnLoginRequired += (sender) =>
        {
           //code
        };

        jc.OnAuthenticate += (sender) =>
        {
            //code
        };

        jc.OnAuthError += (sender, rp) =>
        {
            //code
            this.Connect();
        };

        //Connection
        jc.OnConnect += (sender, stream) =>
        {
            //code
        };

        jc.OnDisconnect += (sender) =>
        {
            //code
            this.Connect();
        };

        jc.OnError += (sender, ex) =>
        {
            //code
            this.Connect();
        };

        //jc.OnPresence += new PresenceHandler(OnPresence);
    } 
```

# c# - SQL Server 中 1 天的字符串值

> ID：13007390
> 
> 赞同：0
> 
> 时间：2012-10-22T08:17:17.257
> 
> 标签：c#, .net, sql-server, datetime, time

我需要 1 天的字符串值

“23:59:59”正在运行，但会导致延迟

“24:00:00”不起作用：将数据类型 varchar 转换为 datetime 时出错。

“1.00:00:00”不起作用：将数据类型 varchar 转换为 datetime 时出错。

这是我的代码：

```
 PROCEDURE [dbo].[Procedure1] 

    @Start datetime, 
    @Finish datetime,
    @TimeRange datetime
AS
BEGIN

    SET NOCOUNT ON;

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, @Start + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime < @Finish )
  select StartTime, EndTime, Count( Test.ScenarioID ) as TotalPeaks
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime and Test.SessionCloseTime < TR.EndTime
    group by TR.StartTime, TR.EndTime   
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:33:35.997

您正在尝试将该`datetime`类型用作不适合您的时间跨度类型。

我建议您将 timerange 参数更改为整数。然后指定它是秒、分钟、小时、天或其他。

如果你决定让它几天：

```
PROCEDURE [dbo].[Procedure1] 

    @Start datetime, 
    @Finish datetime,
    @TimeRange int
AS
BEGIN

    SET NOCOUNT ON;

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

     with TimeRanges as (
  select @Start as StartTime, DATEADD(day, @TimeRange, @Start) as EndTime
  union all
  select DATEADD(day, @TimeRange, StartTime), DATEADD(day, @TimeRange, EndTime)
    from TimeRanges
    where EndTime < @Finish )
  select StartTime, EndTime, Count( Test.ScenarioID ) as TotalPeaks
    from TimeRanges as TR left outer join
      dbo.Test as Test on TR.StartTime <= Test.SessionStartTime and Test.SessionCloseTime < TR.EndTime
    group by TR.StartTime, TR.EndTime   
END 
```

# c - 公开或不公开 API

> ID：13007392
> 
> 赞同：1
> 
> 时间：2012-10-22T08:17:21.870
> 
> 标签：c, cross-platform

在我正在使用的一个便携式 C 库中，我遇到了当前的困境。我有两个高级库（比如 libA 和 libB）。它们提供了非常不同的 API，并且取决于用户配置选项。我反对将它们合并在一起，因为这意味着将任何以后的 libC、libD 与 libA 合并。所以我试图保持这种干净的分离。这也意味着，如果应用程序员只需要 libA 而不需要 libB，他们就可以拥有一个轻量级的应用程序。

问题是 libB 使用来自 libA 的符号。但是，它使用了我不想公开的 libA 中的低级 API。有没有办法防止暴露这个低级 API，同时避免代码重复？

我在 UNIX 上编译期间使用[gcc 可见性标志](http://gcc.gnu.org/wiki/Visibility)，在 Windows 上使用等效标志。很明显，这些符号是可见的：

```
$ nm -D bin/libA.so
[...]
00000000000045e6 T low_level_func1
00000000000043d8 T low_level_func2 
```

我可以创建一个静态`low-level`库吗？在构建过程中，我会将 libA 和 libB 链接到它，并且永远不会安装或分发这个`low-level`库？这是便携式的吗？我需要找到一个可移植的解决方案（Linux、Windows、FreeBSD、MacOSX...）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:45:04.107

我不会在这里尝试做黑客和变通方法，这是一个设计问题，做变通方法最终会回复你。您可能想查看适配器设计模式：[http ://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

# css - 使用 CSS 创建曲线

> ID：13007393
> 
> 赞同：0
> 
> 时间：2012-10-22T08:17:21.990
> 
> 标签：css

我正在尝试使用 CSS创建一个像[这样的模板。](https://www.odesk.com/info/howitworks/contractor/)我创建了一个 div 并使用了以下 CSS 代码，它看起来像这样-> [http://jsfiddle.net/3kKkD/](http://jsfiddle.net/3kKkD/)。但我不知道如何创建曲线（我已在下图中指出）

你能告诉我怎么做吗？

谢谢

![在此处输入图像描述](../Images/cb274deda93766a7bbde858cf89ab45c.png)

```
.container {
   width:75%;
   margin:0 auto; 
   margin-bottom:30px; 
   min-height:600px;
   background-color:#FFFFFF;
   -moz-box-shadow: 1px 1px 5px #999;
   -webkit-box-shadow: 1px 1px 5px #999;
   box-shadow: 1px 1px 5px #999;
}

<div class="container">My Template</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:19:59.283

您将需要使用边界半径。

```
border-radius: 10px; 
```

这是一个体面的指南

[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:21:40.680

这是一个CSS边界半径生成器

[http://border-radius.com/](http://border-radius.com/)

```
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:22:21.800

您正在寻找的 CSS 属性是“border-radius”。

```
-webkit-border-radius: 5px;
-moz-border-radius: 5px; 
```

阅读[本文](http://www.w3schools.com/cssref/css3_pr_border-radius.asp)以了解有关此属性的更多信息。

# asp.net - 尝试与 SQL Server 2008 建立连接

> ID：13007399
> 
> 赞同：-2
> 
> 时间：2012-10-22T08:18:03.643
> 
> 标签：asp.net, sql-server-2008

```
SqlConnection cnn = new SqlConnection();
cnn.ConnectionString = "Data Source=.;Database = deptStore;Integrated Security = true;";

cnn.Open();
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "insert into Employee values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "','" + TextBox4.Text + "','" + TextBox5.Text + "','" + TextBox6.Text + "','" + TextBox7.Text + "','" + TextBox8.Text + "','" + TextBox9.Text + "','" + TextBox10.Text + "','" + TextBox11.Text + "','" + TextBox12.Text + "','" + TextBox13.Text + "')";
cmd.Connection = cnn;

cmd.ExecuteNonQuery();

Response.Write("Record Save");
cnn.Close(); 
```

但我收到以下错误：

> *SqlException 未被用户代码处理*
> 
> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）*

请帮助我理解错误并纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:21:46.233

您是否验证 SQL Server 配置正确？您可以通过打开 SQL Server 配置工具来执行此操作。

如果要连接到 SQL Server Express，则需要指定始终`SQLExpress`在连接字符串中的实例名称。

IE

```
Data Source=.\SQLEXPRESS"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:23:19.427

首先检查您的网络配置。应该有这样的代码

```
<connectionStrings>
<add name="ConnStringDb1" connectionString="Data Source=localhost;Initial Catalog=deptStore;Integrated Security=True;" providerName="System.Data.SqlClient" /> 
```

或者，如果您只想替换 YourDataBaseName。接下来是设置您的连接

```
SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["ConnStringDb1"].ToString()); 
```

就是这样，你有一个连接字符串

你需要阅读更多关于这个原因我也看到你的插入查询是错误的

尝试这个

**cnn.ConnectionString = "数据源=localhost；数据库=deptStore；集成安全=true；";**

# objective-c - Interface Builder VS 模拟器中的图形渲染问题

> ID：13007403
> 
> 赞同：1
> 
> 时间：2012-10-22T08:18:11.910
> 
> 标签：objective-c, xcode, interface-builder

第一张图片是来自 IB 的屏幕截图。它我已经隔开两个元素，以更好地了解发生了什么。蓝色光芒应该在相机按钮下方，但在下方框架中的凹槽顶部。如您所见，这显示了 IB 中的正确堆叠顺序：

![在此处输入图像描述](../Images/48a3af9b4768495a3dd68b0c53929fed.png)

然而，当我在模拟器和设备上构建并运行它时，看起来凹槽已经堆叠在蓝色光芒之上。我尝试过以各种方式重新排列图层，但无论我做什么，发光仍然被剪掉。这里有什么问题？

![在此处输入图像描述](../Images/6123b8b83e551255a0a650af1236fe28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:32:32.870

检查约束。我在 IB 与模拟器外观方面遇到过类似的问题，根本原因是约束冲突。

具体来说，我意识到当我复制/粘贴要重用的视图对象时会产生冲突的约束。新粘贴对象的约束未正确复制。

避免复制/粘贴解决了这个问题（即，我将一个新对象拖到视图中并再次设置新对象的设置）。

# sql - 在 Oracle 中动态求和和分组

> ID：13007407
> 
> 赞同：4
> 
> 时间：2012-10-22T08:18:30.217
> 
> 标签：sql, oracle

我有一个要求，其中有四个参数。p1，p2，p3，p4。用户可以输入任何一个或组合。我只想显示他通过求和和分组输入的列。其他列应该被排除在外。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:25:15.113

像这样的东西可能对你有用*（我不是 100% 确定，因为你的问题很模糊）*

```
SELECT
  CASE WHEN :p1 = 0 THEN p1 ELSE NULL END AS p1,
  CASE WHEN :p2 = 0 THEN p2 ELSE NULL END AS p2,
  CASE WHEN :p3 = 0 THEN p3 ELSE NULL END AS p3,
  CASE WHEN :p4 = 0 THEN p4 ELSE NULL END AS p4
FROM
  yourTable
GROUP BY
  CASE WHEN :p1 = 0 THEN p1 ELSE NULL END,
  CASE WHEN :p2 = 0 THEN p2 ELSE NULL END,
  CASE WHEN :p3 = 0 THEN p3 ELSE NULL END,
  CASE WHEN :p4 = 0 THEN p4 ELSE NULL END 
```

但是请注意，SQL 通常在这种类型的查询中执行得很差。

对于每个固定查询，都会编译一个单独的计划。用于生成结果的算法在该点固定到位。更改参数时不会重新编译。

这很重要，因为根据您的索引，`GROUP BY p1, p2`可能会导致与使用`GROUP BY p3, p4`.

因此，在代码中重新生成 SQL 语句通常可以提高性能。

与其要求 SQL 使用参数来选择聚合哪些字段，不如使用参数编写全新的 SQL 语句，然后执行该新 SQL 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:59:27.813

如果您想在 mysql 中使用 group concat 之类的东西，这可以提供帮助 [是否有一个 Oracle SQL 查询可以将多行聚合为一行？](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:09:01.897

这个问题可以通过使用动态SQL来解决。在动态 SQL 中，您可以首先根据输入参数构造您的选择语句，然后使用例如 EXECUTE IMMEDIATE 执行查询。请阅读有关如何使用动态 SQL的[oracle 文档。](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm)

# android - 如何在android中加入乌尔都语单词？

> ID：13007408
> 
> 赞同：1
> 
> 时间：2012-10-22T08:18:30.770
> 
> 标签：android, join, words

我想为 SMS 和 Textview、Edittext 和其他应用程序编写一个插件，以在 android 中加入 urdu 单词。我怎样才能做到这一点？

我读过钩子在android上不起作用。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:48:39.980

Android 已内置支持渲染从 3.0 及以上版本可用的连接的阿拉伯字符，在 Android 3.0 以下字符会出现损坏，您可以考虑查看[如何在 Android 中支持阿拉伯文本？](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android)

# c# - C# 会员注册和登录身份

> ID：13007409
> 
> 赞同：0
> 
> 时间：2012-10-22T08:18:38.987
> 
> 标签：c#, asp.net-membership

当我注册用户然后登录时，我得到

```
WebContext.Current.User.GetIdentity(); 
```

我得到 UserName 如何更改用户身份并将电子邮件或 Guid 设置为身份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:23:01.787

更改注册页面以设置用户名 = 电子邮件地址

# iphone - 如何在 iPhone 中自定义 Email Composer 的导航栏

> ID：13007413
> 
> 赞同：0
> 
> 时间：2012-10-22T08:18:53.767
> 
> 标签：iphone, ios5, ios4, ios6

如何在 iPhone 应用程序中更改 emailcomposer 的 Bar Button 的图像？我可以更改导航栏的图像，但我还必须更改发送和取消按钮的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:41:10.940

作曲家以模态方式呈现为导航控制器的 rootviewcontrolelr。

如果您更改 UINavigationCar 以及 UIBarButtonItem 的属性`appearance`，它应该可以解决问题

```
UIBarButtonItem *barbuttonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonItemStyleBordered target:nil action:nil];

if ([barbuttonItem respondsToSelector:@selector(setTintColor:)]) {
    [[UIBarButtonItem appearance] setTintColor:kUIBarButtonItemTitleColor];
} 
```

但请记住，这将更改所有条形按钮项目，而不仅仅是邮件编写器中的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:37:05.977

尝试通过 mailComposeViewController.navigationBar.items 访问它们，这是一个栏项目的数组。

# jquery - 根据选择值显示字段

> ID：13007417
> 
> 赞同：5
> 
> 时间：2012-10-22T08:19:23.947
> 
> 标签：jquery, selectlist

我有以下挑战。

我有一个条目表格，人们可以在其中添加新条目，并且在获得批准后也可以对其进行编辑。挑战是根据选择隐藏特定字段。当用户添加新条目时，他们必须选择特定类别。基于此，一些字段被隐藏。

这是我目前使用的代码：

```
<select name="entry.parent" size="1" style="width: 360px;" id="SPCatChooserSl" class="required">
<option value="">Selecteer categorie</option>
<option  selected="selected" value="55">- Option 1</option>
<option value="59">- Option 2</option>

</select>

<div id="option1">
<p>Hier comes option 1</p>
</div>
<div id="option2">
<p>Here comes option 2</p>
</div>

<script>
jQuery(function() {
jQuery('#option1').hide();
jQuery('#option2').hide();
 });

jQuery(function() {
jQuery("#SPCatChooserSl").change(function() {
    if (this.value == '55') {
        jQuery('#option1').show();
    } else {
        jQuery('#option1').hide();
    }
    if (this.value == '59') {
        jQuery('#option2').show();
    } else {
        jQuery('#option2').hide();
    }
    });
     });
   </script> 
```

当用户仍然必须选择一个类别时，这很有效。它会根据选择隐藏字段。

但是，当用户编辑条目时，类别已被选择并且可能不会更改。因此，DIVS option1 和 Option2 是隐藏的，并且由于用户没有选择类别，因此 div 将永远不可见。

所以问题是：如何检查选择列表中的特定值，在没有用户操作的情况下显示正确的字段。

我希望我的问题/挑战很清楚:)

提前致谢！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:03:00.710

您可以在文档准备就绪时更新选项：

```
jQuery(function() {
jQuery('#option1').hide();
jQuery('#option2').hide();
});

function updateOption() {
    jQuery('#option1').toggle(this.value == '55');
    jQuery('#option2').toggle(this.value == '59');
}

jQuery(document).ready(function() {
    jQuery("#SPCatChooserSl").each(updateOption);
    jQuery("#SPCatChooserSl").change(updateOption);
}); 
```

小提琴：http: [//jsfiddle.net/Mwnjk/](http://jsfiddle.net/Mwnjk/)

# asp.net - TabContainer 内的 ModalPopupExtender 内的 AsyncFileUpload

> ID：13007418
> 
> 赞同：0
> 
> 时间：2012-10-22T08:19:26.407
> 
> 标签：asp.net, vb.net, modalpopupextender, asyncfileupload, tabcontainer

我有一个`TabContainer`其中每个选项卡都有一个`ModalPopupExtender`. 在每个里面`ModalPopupExtender`我定义了一个`AsyncFileUpload`.

我的目标是，当文件上传/失败时，它会在`ModalPopupExtender`显示这一事实的内部显示一个标签。另外，我想`TabPanel`用上传文件的信息更新对应的信息（在关闭之前或之后`ModalPopupExtender`，对我来说都是一样的）。

我认为问题出`ModalPopupExtender`在`ContentTemplate`'s内部`TabPanel`，但我不知道解决方案。

我的标记代码：

```
<AjaxControlToolkit:TabPanel ID="tBrochure" runat="server" HeaderText="Brochure" OnDemandMode="Always" EnableViewState="true">
  <ContentTemplate>
    <asp:Label ID="lBrochureDesc" runat="server" Text="In this tab you can set or update the brochure document and its description for the Maintenance Contracts product." /><br /><br />

    <asp:Label ID="lBrochureCurrentFile" runat="server" Text="Current File" CssClass="LabelForTextBox" />:&nbsp;
    <asp:Label ID="lBrochureCurrentFileName" runat="server" Text="" /><br />

    <asp:Label ID="lBrochureCurrentDateTag" runat="server" Text="Upload Date" CssClass="LabelForTextBox" />:&nbsp;
    <asp:Label ID="lBrochureCurrentDate" runat="server" Text="" /><br /><br />

    <asp:Panel ID="pBrochureUploadFileLink" runat="server" style="margin-left: 20px;">
      <asp:ImageButton ID="ibBrochureUploadFile" runat="server" ImageUrl="~/Images/icon_add.png" Width="20px" style="vertical-align: middle" />
      <asp:Label ID="lBrochureUploadFile" runat="server" Text="Upload a new document" style="vertical-align: middle" /><br />
    </asp:Panel>

    <asp:Panel ID="pBrochureUploadFilePopup" runat="server" CssClass="Popup" style="display:none;">
      <asp:Panel ID="pBrochureUploadFilePopupTitleBar" runat="server" CssClass="PopupTitleBar">
        <asp:ImageButton ID="imBrochureUploadFilePopupClose" runat="server" ImageUrl="~/Images/icon_close.png" />
      </asp:Panel>
      <asp:Panel ID="pBrochureUploadFilePopupContent" runat="server" CssClass="PopupContent">
        <asp:Label ID="lBrochureUploadFilePopupTitle" runat="server" CssClass="title" Text="Upload a new file" />
        <AjaxControlToolkit:AsyncFileUpload ID="fuBrochure" runat="server" CompleteBackColor="Green" ErrorBackColor="Red" /><br /><br />
        <asp:Label ID="lBrochureUploadFileStatus" runat="server" Text="" />
        <asp:Label ID="lBrochureUploadFileAdvice" runat="server" Text="The current file will be replaced but a backup of that version will be stored." />
      </asp:Panel>
    </asp:Panel>
    <asp:Button ID="bBrochureDummy" runat="server" style="display:none;" />
    <AjaxControlToolkit:ModalPopupExtender ID="mpeBrochureUpload" runat="server" ClientIDMode="Static"
                                           TargetControlID="pBrochureUploadFileLink"
                                           PopupControlID="pBrochureUploadFilePopup"
                                           CancelControlID="imBrochureUploadFilePopupClose"
                                           PopupDragHandleControlID="pBrochureUploadFilePopupTitleBar"
                                           BackgroundCssClass="PopupBackground" DropShadow="true" />

    <br /><br />

    <asp:Label ID="lBrochureDescription" runat="server" Text="Description" CssClass="LabelForTextBox" />:<br />
    <asp:TextBox ID="tbBrochureDescription" runat="server" TextMode="MultiLine" CssClass="TextBox" Style="height:50px; width:200px; max-width: 900px;"/><br /><br />
    <asp:LinkButton ID="lbBrochureSave" runat="server" Text="Save" CssClass="ButtonWithArrow" />
    <asp:LinkButton ID="lbBrochureCancel" runat="server" Text="Cancel" CssClass="ButtonWithArrow" />
  </ContentTemplate>
</AjaxControlToolkit:TabPanel> 
```

我的代码隐藏：

```
Protected Sub fuBrochure_UploadedComplete(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) Handles fuBrochure.UploadedComplete
    If fuBrochure.HasFile Then
        Dim fileName As String = fuBrochure.FileName
        Dim fileType As String = fuBrochure.ContentType
        If Products.updateDoc(productId, Products.DocumentId.Brochure, fileName, fileType) Then
            fuBrochure.SaveAs(MapPath(path + fileName))
        End If
        UpdateBrochurePanel()
        lBrochureUploadFileStatus.Text = "File uploaded succesfully!"
        mpeBrochureUpload.Hide()
    End If
End Sub

Protected Sub fuBrochure_UploadedFileError(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) Handles fuBrochure.UploadedFileError
    lBrochureUploadFileStatus.Text = "Error!"
End Sub 
```

在这段代码中，这些行：

```
lBrochureUploadFileStatus.Text = "File uploaded succesfully!"
mpeBrochureUpload.Hide() 
```

什么都不做，但线

```
fuBrochure.SaveAs(MapPath(path + fileName)) 
```

工作正常。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:48:17.520

AsyncFileUpload 控件使用 iframe 将文件发布到服务器。这意味着，上传文件时，页面上的任何内容都不会回发。这就是您的标签未更新的原因

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "size", "top.$get(\"" + lBrochureUploadFileStatus.ClientID + "\").innerHTML = 'File uploaded succesfully!';", true); 
```

你可以在这里找到一个简单的例子[http://technico.qnownow.com/using-asyncfileupload-control-in-asp-net-ajax/](http://technico.qnownow.com/using-asyncfileupload-control-in-asp-net-ajax/)

它不完全是您正在寻找的东西，但它应该会有所帮助。希望能帮助到你。

# php - 通过 exec 的 PHP SSH 连接在从命令行调用但不通过 apache 时有效

> ID：13007429
> 
> 赞同：0
> 
> 时间：2012-10-22T08:20:27.650
> 
> 标签：php, ssh, exec

我的情况类似于[PHP shell_exec 使用 ssh 运行 shellscript](https://stackoverflow.com/questions/4123099/php-shell-exec-running-a-shellscript-with-ssh)但不一样。

情况：我在两台服务器之间交换了 ssh 密钥，切换到`www-data`用户并通过 SSH 连接到第二台服务器，无需密码。

测试 1： ssh user@10.8.0.6 Documents/run.sh list 在 shell 中执行时工作正常

测试 2：将一个简单的 PHP Exec 放入 PHP 文件中可以正常工作。它返回一个数组，Retval 为 0

测试 3：将 exec 放入“大”PHP 脚本并调用它会导致 Retval 255（致命错误？！？！？）

所以目前我真的不明白为什么它不起作用。我试图找出有关 retval 255 的更多细节，但没有走多远。

差异必须在 PHP5 与 PHP5 cli 中的某个地方。但在我不得不使用 OpenVPN 之前，它也可以通过正常的 Apache 调用正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:50:23.580

## 通用的

问题的第一级诊断`shell_exec`是尝试通过生成添加 2>&1 的相同命令来获得更多信息错误，例如在您的情况下

```
$retval = shell_exec("/path/to/ssh ... 2>&1"); 
```

和检查`$retval`。

## 更新

“主机密钥验证失败”意味着`~/.ssh/known_hosts`运行 Apache 的用户包含不同的密钥。检查文件中的主机名和 IP 密钥；在紧要关头，删除两者，以用户身份登录`www-data`并通过手动连接恢复密钥。

如果使用主机名连接，IP 也可能由于 DHCP 或不同的 VPN 隧道启动而发生更改，而这不是您要查找的主机。

在 SSH 的情况下，可以使用`-vvv`非常冗长的选项执行它，然后解析千字节的输出以搜索`known_hosts`文件源。它对诊断命令也很有用，`shell_exec`例如

```
$ret = shell_exec('set'); 
```

查看`HOME`变量的值。

# localization - Angularjs 和 $locale

> ID：13007430
> 
> 赞同：45
> 
> 时间：2012-10-22T08:20:30.193
> 
> 标签：localization, angularjs

我可以手动为某些应用程序设置 $locale 吗？

是否有可能支持本地人的唯一方法是从角度库中包含当前语言环境的本地化文件。如果有多种文化怎么办？在那种情况下，我必须动态加载本地化文件？我错过了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-16T23:31:11.420

您可以将所需的语言环境加载到`localStorage`中，然后刷新页面。让下面的脚本加载您需要的 i18n 文件。还不支持即时更改语言环境。

```
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
<script>
var locale = JSON.parse(localStorage.getItem('locale'));
if (locale) {
    document.write('<script src="scripts/i18n/angular-locale_'+locale+'.js"><\/script>');
}
</script> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-08-05T19:43:49.850

我已经构建了一个处理 i18n 的角度模块。AngularJS 对 i18n 的支持非常原始，如果您想拥有更多控制权并且更灵活，请查看 angular-translate - [http://angular-translate.github.io/](http://angular-translate.github.io/)

让我知道，如果我能帮忙！

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-02-20T13:57:24.913

对于今天寻找动态本地化的任何人来说，[angular-dynamic-locale](https://github.com/lgalfaso/angular-dynamic-locale)都做得很好。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-10-20T11:52:21.307

我在同样的问题上苦苦挣扎，在这里阅读了所有答案，并在我的项目中引入了 i18n/l10n。这是我的结果：

*   angular-translate ( [http://angular-translate.github.io ) 是本地化](http://angular-translate.github.io)**内容**（自定义字符串）的完美方式。但它不会**翻译**angular 的日期、货币或数字过滤器。
*   Angular 有一个内置机制来本地化**日期、货币或数字**过滤器。可以在此处找到支持的语言环境的翻译[https://github.com/angular/angular.js/tree/master/src/ngLocale](https://github.com/angular/angular.js/tree/master/src/ngLocale)，角度指南位于[https://docs.angularjs.org/guide/i18n](https://docs.angularjs.org/guide/i18n)
*   Angular 内置机制的问题：**在运行时更改语言环境**并不容易！这就是[https://github.com/lgalfaso/angular-dynamic-locale](https://github.com/lgalfaso/angular-dynamic-locale)发挥作用的地方。它允许您在运行时轻松更改语言。

所以解决方案是同时使用*angular-translate*和*angular-dynamic-locale*这两个项目。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-10-22T14:06:34.103

老实说，Angular 中的 $locale 服务仍然非常原始。确实不错，但是在这方面似乎缺乏灵活性。最大的问题是，即使您通过动态重新加载正确的语言环境文件来切换您的语言环境，诸如日期过滤器之类的东西也不会知道您已经更改了它，因为它们在设置时正在注册他们的语言环境信息。因此，您目前有几个选择：1\. 使用所选语言环境重新加载页面...或 2\. 编写您自己的语言环境提供程序和使用它的过滤器。

有*可能*创建一个服务来动态加载正确的脚本文件，重新初始化所有受影响的过滤器和服务，然后刷新视图，但我不确定此时会涉及什么。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-09T13:51:39.240

包括此脚本：[https](https://github.com/lgalfaso/angular-dynamic-locale/blob/master/src/tmhDynamicLocale.js) ://github.com/lgalfaso/angular-dynamic-locale/blob/master/src/tmhDynamicLocale.js允许在运行时设置语言环境。

1.  [从https://github.com/angular/angular.js/tree/master/src/ngLocale](https://github.com/angular/angular.js/tree/master/src/ngLocale)下载你想要的所有语言环境
2.  将语言环境存储在您的 Web 服务器上的目录中，例如`/assets/js/locales/filename-LOCALE.js`-*注意：您在文件名中作为* **LOCALE写入** *的内容很重要*- 所需的任何语言环境都将被动态下载。
3.  在您的模块中，包括`tmhDynamicLocale`例如`'tmh.DynamicLocale'`；`var app = angular.module('app',['tmh.DynamicLocale'])`
4.  在您的配置中，传入提供程序，即“ `tmhDynamicLocaleProvider`”并设置您的语言环境文件的位置，例如，`tmhLocaleProvider.localeLocationPattern('/assets/js/locales/angular-locale-{{locale}}.js');` `{{locale}}`将换出您在运行时设置的语言环境。
5.  要在您的应用程序中设置语言环境，请在 中`app.run()`，传入`'tmhDynamicLocale'`服务，例如`app.run(['tmhDynamicLocale',function(tmhDynamicLocale){}]);`
6.  在你的运行回调中，像这样设置语言环境，`tmhDynamicLocale.set('en-gb');`. 或者，作为`tmhDynamicLocale`服务，您可以在允许服务注入的不同地方设置区域设置，例如控制器，但请记住，服务是单例的，并且在控制器中设置区域设置将在整个应用程序中设置它。

您现在应该运行正确的语言环境。有关更多信息，请使用*自述*文件`tmhDynamicLocale`：[https ://github.com/lgalfaso/angular-dynamic-locale/blob/master/README.md](https://github.com/lgalfaso/angular-dynamic-locale/blob/master/README.md)

信用：[卢卡斯米雷尔曼](https://github.com/lgalfaso) 为`tmhDynamicLocale`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-18T22:18:02.213

我发现了一些有趣的东西。它不是有角度的，但它是 jquery，所以集成应该没问题。我将测试性能并返回信息。

[https://github.com/js-coder/x18n/wiki/Getting-started](https://github.com/js-coder/x18n/wiki/Getting-started)

[https://github.com/js-coder/jQuery.x18n](https://github.com/js-coder/jQuery.x18n)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-09T12:44:23.267

如果要加载浏览器的 angularJS 本地化，请在项目中安装[https://github.com/angular/bower-angular-i18n](https://github.com/angular/bower-angular-i18n)和[https://github.com/lgalfaso/angular-dynamic-locale](https://github.com/lgalfaso/angular-dynamic-locale)。

阅读要安装的每个库的文档。这是我的 Ionic 项目的一个示例：

1.  在我的 index.html 中：

    ```
    ...
    <!-- angular-dynamic-locale-->
    <script src="lib/angular-dynamic-locale/tmhDynamicLocale.min.js"></script>
    ... 
    ```

2.  在我的 app.js

    ```
    var app = angular.module('project-name', ['ionic',..., 'tmh.dynamicLocale']);
    ...
    // tmhDynamicLocaleProvider
    app.config(function(tmhDynamicLocaleProvider) {
       //  override the default path (angular/i18n/angular-locale_{{locale}}.js) to the stored Angular i18n locale files
       tmhDynamicLocaleProvider.localeLocationPattern('lib/angular-i18n/angular-locale_{{locale}}.js');
    })
    ...
    app.run(function($rootScope, $ionicPlatform, ..., tmhDynamicLocale){
       // set locale for angular formats   
       var inArray = function(needle, haystack) {
          var key = '';
          for (key in haystack) {
             if (haystack[key] === needle) {
                return true;
             }
          }
          return false;
       };
       var preferredLanguage = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage;
       if (typeof preferredLanguage === 'string') {
          var code = preferredLanguage.substring(2, 0);
             if (inArray(code, PROPERTIES.LANGUAGES)) {
                tmhDynamicLocale.set(code);
             }
       }
       ... 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-19T06:46:24.223

Angular 为 i18n/l10n 提供了很好的支持。你可以在[这里找到指南](https://docs.angularjs.org/guide/i18n)

我们应用程序的需求决定了我们如何实现这种支持。

1.  如果我们的应用程序只需要一个区域设置，或者我们应用程序的最终用户只属于一个特定的区域设置，那么我们可以将 i18n/l10n 的应用程序范围限制在该区域设置

您可以在我之前的一个答案中找到关于我们如何实现这些目标的很好的[解释](https://stackoverflow.com/questions/27547680/angular-js-currency-symbol-euro-after/#answer-47881020)。

2.  如果我们想为特定的组件、指令或部分提供服务以其他格式或语言环境显示，那么我们可以使用一些指令组件甚至是过滤器

您可以在[此处找到使用过滤器进行此类实现的示例小提琴](http://jsfiddle.net/samuelj90/ADukg/16945/)

```
 function MyController($scope) {
   $scope.property = {
     price: 50000000.557
   }
 }

 function toLocaleCurrencyFilter($filter) {
  return function(amount, currencySymbol, fractionSize, locale) {
    var returnValue = Number(parseFloat(amount)).toLocaleString(locale, {
      minimumFractionDigits: parseInt(fractionSize),
      maximumFractionDigits: parseInt(fractionSize),
    });
    returnValue = returnValue + " " + currencySymbol
    return returnValue;
  };
 }
 angular.module('myApp', [])
   .controller('MyController', ['$scope', MyController])
   .filter('toLocaleCurrency', ['$filter', toLocaleCurrencyFilter]); 
```

3.  如果我们想要动态区域设置，那么您需要使用新的区域设置重新加载浏览器，方法是将其保存到本地存储中才能生效。您可以使用 1 中描述的具有一些动态性质的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-15T16:58:49.420

如果你使用 webpack 和 typescript，你可以动态加载你的语言环境。

```
 export const loadLocale = function(lng){
    if(lng != 'en'){
        require('./angular-locale_' + lng + '.js');
    }
}; 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-07-30T14:31:58.557

您还可以使用翻译服务来获取浏览器的语言环境，然后使用它来做您需要的事情。. . 例如，在 ShortDatePipe 中：

```
 import { Pipe, PipeTransform} from '@angular/core';
    import { formatDate  } from '@angular/common';
    import { TranslateService } from '@ngx-translate/core';

    @Pipe({
      name: 'shortDate'
    })
    export class ShortDatePipe implements PipeTransform {
        constructor(private translateService: TranslateService) { }

        transform(value: string): string {
            var language: string = this.translateService.getBrowserCultureLang();
            console.log(language);
            return (value == "" || value == null) ? "" : formatDate(value, 'shortDate', language);
        }

    } 
```

# android - Android：从带有复选框的自定义列表中获取选中的项目名称

> ID：13007435
> 
> 赞同：0
> 
> 时间：2012-10-22T08:20:45.930
> 
> 标签：android, android-listview, android-checkbox

我有列表视图。为此，我将每一行自定义为文本视图和复选框。现在我想获取选中项目的名称。我尝试使用 checkedItemPositons 但那不起作用是因为 2 个布局？

我想在按下删除按钮时删除选中的项目。我该怎么做？这是我的代码

```
 public class ManageLikes extends Activity implements OnClickListener {

ListView lv;
Button btndelsel, btndelall;
CheckBox chk;
HashMap<Integer, Boolean> mCartItems = new HashMap<Integer, Boolean>();

List<String> likes = new ArrayList<String>();
//DatabaseHandler db = new DatabaseHandler(getApplicationContext());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.managelikes);

    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    //String data[] = { "a", "b", "c", "d", "e"};
    likes = db.getAllLikes();

    lv = (ListView) findViewById(R.id.listView);
    btndelsel = (Button) findViewById(R.id.btndelsel);
    btndelall = (Button) findViewById(R.id.btndelall);
    btndelsel.setOnClickListener(this);
    btndelall.setOnClickListener(this);

    lv.setCacheColorHint(0);

    LayoutInflater mLInflater = getLayoutInflater();
    final LAdapter adapter = new LAdapter(getApplicationContext(),likes, mLInflater);
    lv.setAdapter(adapter);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    int count = likes.size();
    String checked = "";

    if (v == btndelsel) {
        //i want delete the checked items here
    }

    if (v == btndelall) {
        //delete all items

    }
    }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:37:29.510

尝试以下方法。

1.  适配器内部有一个复选框监听器，并在复选框单击监听器时跟踪某种数据结构中的选中项目。
2.  单击删除按钮后，通过使用数据结构跟踪检查项目，从数据源（即数据库）中删除适当的数据。
3.  删除后通过调用 notifyDataSetChanged() 更新适配器以刷新 UI。

# seo - 主页上的规范化

> ID：13007439
> 
> 赞同：0
> 
> 时间：2012-10-22T08:21:17.057
> 
> 标签：seo, canonical-link

我有两个内容相同的页面。

1.  主页 (www.example.com/)
2.  详细信息 (www.example.com/detail)

在主页上，显示的内容与在详细信息页面上完全相同，因此重复内容存在很大问题。

我想用标签解决它

```
rel="canonical" 
```

但是，如果我将这个标签放在主页上，将搜索引擎指向详细信息，会发生什么？我会在搜索结果中完全失去主页吗？

注意：主页每天更改几次，每次“复制”另一个详细信息页面的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:46:29.433

搜索引擎会将主页视为重复和丢弃。更好的方法是将详细信息页面重定向到主页。

有关[规范标签、其影响和实施的更多详细信息](http://www.searchenabler.com/blog/canonical-tags-to-fix-duplicate-content/)

# javascript - 从导航栏加载 jQuery Mobile 页面不会加载 javascript

> ID：13007443
> 
> 赞同：1
> 
> 时间：2012-10-22T08:21:35.940
> 
> 标签：javascript, jquery, jquery-mobile

我能够参考[这个 stackoverflow 问题](https://stackoverflow.com/questions/10540219/jquery-mobile-change-page-doesnt-load-js-files)来意识到 JS 脚本需要嵌套在 data-role 页面元素中，以便在 AJAX 访问页面时加载它。*但是对于像下面这样的代码，它允许用户在*页面之间左右滑动，你真的不能只加载第 1 页的脚本（换句话说，它需要访问所有 data-role=page 元素）。如果您通过 AJAX 访问此页面，您有什么追索权？

```
$('div.ui-page').live("swipeleft", function(){
    var nextpage = $(this).next('div[data-role="page"]');
    if (nextpage.length > 0) {
    $.mobile.changePage(nextpage,{transition: "slide", reverse:false}, false, true);
    }
    });
    $('div.ui-page').live("swiperight", function(){
    var prevpage = $(this).prev('div[data-role="page"]');
    if (prevpage.length > 0) {
    $.mobile.changePage(prevpage, {transition: "slide",
    reverse: true}, true, true);
    } 
```

演示：单击“危险”选项卡（即使将您发送到 multipage.php 也不起作用）： [https ://stanford.edu/~rakasaka/cgi-bin/cs147/week5/index.php](https://stanford.edu/~rakasaka/cgi-bin/cs147/week5/index.php)

或者，重新加载 multipage.php 并左右滑动： [https ://stanford.edu/~rakasaka/cgi-bin/cs147/week5/multipage.php](https://stanford.edu/~rakasaka/cgi-bin/cs147/week5/multipage.php)

它应该可以工作，因为 JS 已加载。

# css - 文本字段内的背景图像的边框

> ID：13007456
> 
> 赞同：0
> 
> 时间：2012-10-22T08:22:30.380
> 
> 标签：css

在这种情况下，如何为文本字段内的放大镜图像应用 1px 实心左边框？它不是分开的。

```
<!DOCTYPE html>
<html>

<head>

<style>
input[type=text] {
    width: 260px;
    padding: 5px;
    padding-right: 40px;
    outline: none;
    border: 1px solid #E5E5E5;
    border-radius: 5px;
    background-color: #FFF;
    font-family: Arial;
    font-size: 12px;
    background-position: 280px 2px;
    background-image: url('http://localhost/icon.png');/* HERE */
    background-repeat: no-repeat;
}

input[type=text]:focus {
    background-color: #FFFFFF;
    border-color: #ccc;
    box-shadow: 0px 0px 3px -1px #ccc;
    <!-- background-position: 270px -80px; -->
}

body {
    padding: 10px;
    background-color: #FFF;
}
</style>
</head>
<body>
<form>
    <div id="mainContent">
        <input placeholder="Enter product name..." type="text"> <br>
    </div>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:25:24.860

最简单的方法是在 png 本身中绘制边框。

# java - 如何在 JAX-RS 方法中获取 POST 参数？

> ID：13007459
> 
> 赞同：28
> 
> 时间：2012-10-22T08:22:50.093
> 
> 标签：java, rest, post, parameters, jax-rs

我正在用 Jersey 开发 RESTful 服务，它与`GET`方法配合得很好。但是我只能使用该方法获取`null`参数。`POST`这是我项目中的示例代码。

### HTML

```
<form action="rest/console/sendemail" method="post">
  <input type="text" id="email" name="email">
  <button type="submit">Send</button>
</form> 
```

### 爪哇

```
@POST
@Path("/sendemail")
public Response sendEmail(@QueryParam("email") String email) {
    System.out.println(email);
    return  new Response();
} 
```

我从帖子中收到的电子邮件始终为空。有人有这个想法吗？

我将QueryParam更改为FormParam，我得到的参数仍然为空。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-22T08:29:10.193

在通过 提交的表单中*，*`POST`与`email`in不同。*`@QueryParam``/sendemail?email=me@example.com`*

 *如果您`form`通过提交您的 HTML `POST`，`email`则为`@FormParam`.

**编辑：**

这是一个可以处理 HTML 表单的最小 JAX-RS 资源。

```
package rest;

import javax.ws.rs.FormParam;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

@Path("/console")
public class Console {

    @POST
    @Path("/sendemail")
    @Produces(MediaType.TEXT_PLAIN)
    public Response sendEmail(@FormParam("email") String email) {
        System.out.println(email);
        return Response.ok("email=" + email).build();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-02T21:44:45.153

只需注意一个小细节 - 您要作为表单的一部分提交的每个输入值都必须具有“名称”属性。

```
<input type="text" id="email" name="email" /> 
```*

# legacy - 使用 goto 或 break 提取 c 函数

> ID：13007461
> 
> 赞同：1
> 
> 时间：2012-10-22T08:23:00.297
> 
> 标签：legacy, automated-refactoring

在我目前工作的 C 项目中，有很多代码使用 goto 和 break 进行错误处理。Break 和 goto 通常在里面

```
if (error_occured) {
    LOGGER_REPORT_ERROR();
    goto cleanup;
} 
```

我尝试使用 Eclipse CDT 重构来提取包含此类块的代码，但它不能自动工作。

如果在原始函数中创建了额外的错误代码变量并且提取的函数以某种方式返回错误代码，那么理论上应该可以自动执行此操作。

是否有支持此类函数提取的自动重构的 IDE 或 IDE 插件？

# php - 使用 PHP 合并图像时的图像透明度和 alpha

> ID：13007463
> 
> 赞同：4
> 
> 时间：2012-10-22T08:23:05.950
> 
> 标签：php, image, image-processing, gd, mask

所以我在 PHP Doc 上找到了一些代码，并稍微编辑它以合并我拥有的两个图像。然后将图像保存在服务器上的文件夹中。但是有一个小问题，我无法弄清楚它为什么会发生。

首先我的代码：

```
 $glassurl = $_GET['GlassImg'];
    $frameurl = $_GET['FrameImg'];
    $filename = (int)date("H:i:s");

    $src = imagecreatefromgif($frameurl);
    $dest = imagecreatefromjpeg($glassurl);

    imagecolortransparent($src, imagecolorat($src, 0, 0));

    imagealphablending($dest, false);
    imagesavealpha($dest, true);
    imagealphablending($src, false);
    imagesavealpha($src, true);

    $src_x = imagesx($src);
    $src_y = imagesy($src);
    imagecopymerge($dest, $src, 0, 0, 0, 0, $src_x, $src_y, 100);

    // Output and free from memory
    imagepng($dest, 'uploads/imagetest.png');
    imagegif($dest);

    imagedestroy($dest);
    imagedestroy($src

); 
```

其次，关于图像的一些信息：

1.  两个图像的大小完全相同
2.  “图案”图像只是块颜色/图案
3.  框架图像在框架内具有透明部分（以允许图案显示）
4.  框架周围的区域是白色的，以消除多余的图案

我希望当我将框架覆盖到图案上时，因为这些部分会产生一个窗框，里面有玻璃图案，白色会隐藏剩余的图案。

为了说明，我提供了图像。以及会发生什么。

图案：

![图案](../Images/a22308ddca7cb4cb9b5ccc324497e099.png)

框架：

![框架](../Images/d723ad7beb3a779c7734622cea8168e7.png)

结果：

![结果](../Images/d7cd012b498e6f3357b1bd0cb498d0dc.png)

如您所见，这并没有达到我的预期。谁能告诉我哪里出错了？我想将框架覆盖到图案上，保持透明中心并使用多余的白色覆盖图案的其余部分。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T08:28:28.240

请注意，您的**框架有白色边缘**，如果您希望窗户变白，您需要裁剪它并删除`imagecolortransparent`下面添加的内容，如果不是，您可以使用它

```
$imgl = "thumb/pattern.png";
$img2 = "thumb/frame.png";

$dest = imagecreatefrompng($imgl);
$src = imagecreatefrompng($img2);
imagecolortransparent($src, imagecolorat($src, 0, 0));

$src_x = imagesx($src);
$src_y = imagesy($src);
imagecopymerge($dest, $src, 0, 0, 0, 0, $src_x, $src_y, 100);

// Output and free from memory
header('Content-Type: image/png');
imagegif($dest);

imagedestroy($dest);
imagedestroy($src); 
```

输出

![在此处输入图像描述](../Images/1e144331d029a3961b81fc84bfc4cb88.png)

你也可以拥有

```
$imgl = "thumb/pattern.png";
$img2 = "thumb/frame.png";

$dest = imagecreatefrompng($imgl);
$src = imagecreatefrompng($img2);

$src_x = imagesx($src);
$src_y = imagesy($src);

$srcNew = imagecreatetruecolor($src_x, $src_y);
ImageColorTransparent($srcNew, imageColorAllocate($srcNew, 0, 0, 0));
imagecopy($srcNew, $src, 70, 50, 78, 60, 473, 293);
imagecopymerge($dest, $srcNew, 0, 0, 0, 0, $src_x, $src_y, 100);

header('Content-Type: image/png');
imagegif($dest);

imagedestroy($dest);
imagedestroy($src); 
```

输出

![在此处输入图像描述](../Images/14ed67f59d04664346145899a4280656.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:33:58.663

您的图像不像您描述的那样透明，如果我理解您的描述正确，请尝试使用它。 ![在此处输入图像描述](../Images/2577d43b374661e14f4f98647ed6dafc.png)

如果您确实首先将透明度设置为透明，则您还应该找到一个在保存（或检查有关此选项）时不会将透明度转换为白色的程序。

# entity-framework - 实体框架（添加/创建）对象引用未设置为对象的实例......但它是吗？

> ID：13007473
> 
> 赞同：2
> 
> 时间：2012-10-22T08:23:54.850
> 
> 标签：entity-framework, entity-framework-4, entity

我正在使用实体框架来访问现有数据库。我可以访问数据，但是当我尝试添加新数据时，我得到一个 NullReferenceException “对象引用未设置为对象的实例”，但它是吗？

数据库连接很好，我可以很好地访问数据： `List<log> logs = db.log.ToList();`

使用 Add 或 Create 时抛出异常：

```
db.log.Add(new log());
db.log.Create(); 
```

堆栈跟踪：

```
at System.Data.Entity.DbSet`1.Create() 
```

更新：

错误仅发生在包含数据库上下文的命名空间之外。我可以通过包装类以在 DBHandler 命名空间中使用它们的“添加到数据库上下文”方法来解决它。但我想解释为什么会发生这种情况。这是一个错误还是我违反了一些神圣的 .net 法律？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:50:49.380

尝试这个 ：

```
using (db = new xxxxxEntities())
        {
           List<log> logs = db.log.ToList();
           db.log.Add(new log());
           db.log.Create();
        } 
```

# android - 在 textview 中显示 html 图像和表格

> ID：13007475
> 
> 赞同：0
> 
> 时间：2012-10-22T08:24:09.273
> 
> 标签：android, html, textview

我正在使用一个简单的 textview 在我的 android 应用程序中显示一些 html 字符串。如果我只显示带有链接的文本，我没有问题，但是当我收到一些包含图像和表格的数据时，图像只显示为 obj 字符串，甚至没有显示平板电脑，只有文本部分显示。我知道我可以使用 webview，但我对内容视图没有太多控制，我不能像在 textview 中那样自定义它。

有什么方法可以在文本视图中显示表格和图像，而图像保存在 sd 卡上。我不需要任何方法从互联网和类似的东西下载它们。

任何帮助/建议/意见表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:41:21.663

不，TextView 不是 WebView。使用后者进行更多标记，例如基本属性`<B>`或`<U>`标签`<A>`

# c - 关于 Kernighan 和 Ritchie 练习的问题 2-3

> ID：13007476
> 
> 赞同：0
> 
> 时间：2012-10-22T08:24:11.527
> 
> 标签：c, hex, kernighan-and-ritchie

我正在尝试用 C 语言编写一个将十六进制数转换为整数的程序。我已经成功编写了一个将八进制转换为整数的程序。但是，一旦我开始使用字母 (af)，问题就开始了。我对该程序的想法是广告如下：

1.  参数必须是一个以 0x 或 0X 开头的字符串。

2.  参数十六进制数存储在 char 字符串 s[] 中。

3.  整数 n 被初始化为 0，然后按照规则进行转换。

我的代码如下（我只阅读了 K & R 的 p37，所以对指针不太了解）：

```
/*Write a function htoi(s), which converts a string of hexadecimal digits (including an optional 0x or 0X) into its equivalent integer value. The allowable digits are 0 through 9, a through f, and A through F.*/

#include <stdio.h>
#include <string.h>
#include <math.h>
#include <ctype.h>

int htoi(const char s[]) { //why do I need this to be constant??
    int i;
    int n = 0;
    int l = strlen(s);
    while (s[i] != '\0') {
        if ((s[0] == '0' && s[1] == 'X') || (s[0] == '0' && s[1] == 'x')) {
            for (i = 2; i < (l - 1); ++i) {
                if (isdigit(s[i])) {
                    n += (s[i] - '0') * pow(16, l - i - 1);
                } else if ((s[i] == 'a') || (s[i] == 'A')) {
                    n += 10 * pow(16, l - i - 1);
                } else if ((s[i] == 'b') || (s[i] == 'B')) {
                    n += 11 * pow(16, l - i - 1);
                } else if ((s[i] == 'c') || (s[i] == 'C')) {
                    n += 12 * pow(16, l - i - 1);
                } else if ((s[i] == 'd') || (s[i] == 'D')) {
                    n += 13 * pow(16, l - i - 1);
                } else if ((s[i] == 'e') || (s[i] == 'E')) {
                    n += 14 * pow(16, l - i - 1);
                } else if ((s[i] == 'f') || (s[i] == 'F')) {
                    n += 15 * pow(16, l - i - 1);
                } else {
                    ;
                }
            }
        }
    }
    return n;
}

int main(void) {
    int a = htoi("0x66");
    printf("%d\n", a);
    int b = htoi("0x5A55");
    printf("%d\n", b);
    int c = htoi("0x1CA");
    printf("%d\n", c);
    int d = htoi("0x1ca");
    printf("%d\n", d);
} 
```

我的问题是：

**1\. 如果我在 htoi(s) 的参数中不使用 const，我会从 g++ 编译器收到以下警告：**

> 2-3.c：在函数“int main()”中：2-3.c:93:20：警告：不推荐将字符串常量转换为“char*”[-Wwrite-strings] 2-3.c:97 :22: 警告：不推荐从字符串常量转换为 'char*' [-Wwrite-strings] 2-3.c:101:21：警告：不推荐从字符串常量转换为 'char*' [-Wwrite-strings] 2 -3.c:105:21：警告：不推荐将字符串常量转换为 'char*' [-Wwrite-strings]

为什么是这样？

**2.为什么我的程序需要这么长时间才能运行？我还没有看到结果。**

**3.为什么我在终端输入 cc 2-3.c 而不是 g++ 2-3.c 时，会出现以下错误信息：**

> “未定义对‘pow’的引用”

**在我使用过电源功能的每一行上？**

**4\. 请指出我的程序中的其他错误/潜在改进。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:34:30.097

1.  char[]表示`const`您不能在函数中更改它。从 a`const`转换为 not-`const`给出警告。有很多话要说`const`。查看它的[维基百科页面](http://en.wikipedia.org/wiki/Const-correctness)。
2.  --
3.  可能`cc`没有链接正确的库。尝试以下构建命令：`cc 2-3.c -lm`

改进：

1.  不要使用`pow()`，它在处理时间方面相当昂贵。
2.  对字母使用与数字相同的技巧来获取值，而不是使用固定的“魔术”数字。
3.  你不需要最后`else`一部分。只需将其留空（或在此处输入错误消息，因为不允许使用这些字符）。

祝你好运！

关于我对`pow()`调用的评论（使用上述`hexchar_to_int()`函数，这就是我实现它的方式（没有错误检查）：

```
 const char *t = "0x12ab";
  int i = 0, n = 0;
  int result = 0;
  for (i = 2; i < strlen(t); i++) {
   n = hexchar_to_int(t[i]);

   result |= n; 
   result <<= 4;
  } 

  /* undo the last shift */
  result >>= 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:43:37.290

不要使用 C++ 编译器来编译 C 程序。这是我给你的第一个建议。

其次`const`，在 a 的函数参数中`char *`确保程序员不会意外修改字符串。

第三，您需要包含上述数学库`-lm`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:01:47.493

> 如果我不在 htoi(s) 的参数中使用 const，我会从 g++ 编译器收到以下警告

const 参数应该在那里，因为它被认为是好的和正确的编程，永远不会从指针中类型转换掉 const。字符串文字 "..." 应该被视为常量，因此如果您没有 const 作为参数，编译器会认为您正在丢弃 const 限定符。

此外，您应该将不打算修改其内容的所有指针参数声明为 const，Google 术语*const correctness*。

> 为什么我的程序需要这么长时间才能运行？我还没有看到结果。

我认为主要是因为您进行了初始化操作。`int i;`我包含垃圾。然后`while (s[rubbish_value] != '\0')`。这个函数也可以写得更好。首先检查字符串开头的 0x，如果它们不存在，则发出错误信号（返回 NULL？），否则丢弃它们。然后开始一个循环，你不需要2个循环。

请注意 pow() 函数处理浮点数，这将使您的程序稍微慢一点。您可以考虑使用仅整数版本。不幸的是，标准 C 中没有这样的函数，所以你必须在别处找到一个。

还要考虑函数 isxdigit()，它是 ctype.h 中的标准函数，它检查数字 0-9 以及十六进制字母 AF 或 af。但是，它可能对性能没有帮助，因为您需要对数字和字母执行不同的计算。

对于它的价值，这里有一个片段展示了如何将单个 char 转换为十六进制 int。它可能不是最优化的版本，但它利用了可用的标准功能，以提高可读性和可移植性：

```
#include <ctype.h>

uint8_t hexchar_to_int (char ch)
{
  uint8_t result;

  if(isdigit(ch))
  {
    result = ch - '0';
  }
  else if (isxdigit(ch))
  {
    result = toupper(ch) - 'A' + 0xA;
  }
  else
  {
    // error
  }

  return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T00:08:24.027

我自己刚刚完成了这个练习，我认为其中一个主要想法是利用字符可以作为整数进行比较的知识（他们在第 2 章中谈到了这一点）。

这是我的功能供参考。认为这可能很有用，因为这本书不包含练习的答案。

```
int htoi(char s[]) {
    int i = 0;
    if(s[i] == '0') {
        ++i;
        if(s[i] == 'x' || s[i] == 'X') {
          ++i;
        }
    }

    int val = 0;

    while (s[i] != '\0') {
        val = 16 * val;
        if (s[i] >= '0' && s[i] <= '9')
            val += (s[i] - '0');
        else if (s[i] >= 'A' && s[i] <= 'F') 
            val += (s[i] - 'A') + 10;
        else if (s[i] >= 'a' && s[i] <= 'f')
            val += (s[i] - 'a') + 10;
        else {
            printf("Error: number supplied not valid hexadecimal.\n");
            return -1;
        }           
        ++i;
    }

    return val;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T08:56:43.487

始终初始化您的变量`int i=0`，否则`i`将包含垃圾值，可以是任何数字，而不是您期望的 0。您在无限循环中运行 while 语句，这就是为什么要花很长时间才能得到结果，打印 i 看看为什么。此外，如果字符串不以 0x 开头，则添加一个中断，将避免在用户使用随机字符串时出现相同的循环问题。正如其他人提到的，您需要导入包含`pow`函数的库并声明您的字符串`const`以消除警告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-25T00:57:18.230

这是我针对上述问题的程序版本。它将十六进制字符串转换为十进制数字，而不考虑可选前缀（0x 或 0X）。使用的 4 个重要的库函数是 strlen(s)、isdigit(c)、isupper(c)、isxdigit(c)、pow(m,n)

欢迎提出改进代码的建议:)

```
/*Program  - 5d Function that converts hex(s)into dec -*/
#include<stdio.h>
#include<stdlib.h>
#include<math.h>                //Declares mathematical functions and macros
#include<string.h>              //Refer appendix in Page 249 (very useful)
#define HEX_LIMIT 10

int hex_to_dec(char hex[])      //Function created by me :)
{
   int dec = 0;                //Initialization of decimal value
   int size = strlen(hex);     //To find the size of hex array
   int temp = size-1 ;         //Pointer pointing the right element in array
   int loop_limit = 0;         //To exclude '0x' or 'OX' prefix in input

   if(hex[0]=='0' && ((hex[1]=='x')  || (hex[1]=='X')))
   loop_limit = 2;

   while(temp>=loop_limit)
   {
     int hex_value = 0;        //Temporary value to hold the equivalent hex digit in decimal

     if(isdigit(hex[temp]))
       hex_value = (hex[(temp)]-'0') ;
     else if(isxdigit(hex[temp]))
        hex_value =  (toupper(hex[temp])-'A' + 10);
     else{
        printf("Error: No supplied is not a valid hex\n\n");
        return -1;
      }

    dec += hex_value * pow(16,(size-temp-1));        //Computes equivalent dec from hex
    temp--;                    //Moves the pointer to the left of the array
   }
   return dec;
}

int main()
{
char hex[HEX_LIMIT];
printf("Enter the hex no you want to convert: ");
scanf("%s",hex);
printf("Converted no in decimal: %d\n", hex_to_dec(hex));

return 0;
} 
```

# php - 学说 2 和 Zf2 集成

> ID：13007477
> 
> 赞同：2
> 
> 时间：2012-10-22T08:24:12.490
> 
> 标签：php, doctrine, zend-framework2

我想将学说 2 与 zf2 集成。我遵循本教程：[http ://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

但是我对教义cli有一些问题。

当我输入“project\vendor\doctrine\doctrine-module\bin\doctrine-module orm:generate-proxies”时，它给了我这个消息：“没有要处理的元数据类”。

这是我的 module.config.php 文件：

```
return array(
'controllers' => array(
    'invokables' => array(
        'User\Controller\User' => 'User\Controller\UserController',
    ),
),
'view_manager' => array(
    'template_path_stack' => array(
        'user' => __DIR__ . '/../view',
    ),
),
'router' => array(
    'routes' => array(
        'user' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/user[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'User\Controller\User',
                    'action'     => 'userList',
                ),
            ),
        ),
    ),
),

// Doctrine config
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
    'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
)
); 
```

这是 \User\src\Entity\Users.php

```
namespace User\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

/**
 * @ORM\Entity
 * @ORM\Table(name="user")
 * @property string $username
 * @property int $id
 */
class User
{
/**
 * @ORM\Id 
 * @ORM\GeneratedValue
 * @ORM\Column(type="integer")
 * @var int
 */
private $id;

/**
 * @ORM\Column(type="string")
 */
private $username;
} 
```

如果我从注释中删除 ORM\，它会给我消息'从未导入类 User\Entity\User 中的注释“@Entity”。您是否可能忘记为此注释添加“使用”语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:40:05.880

把`namespace User;`你的第一行`module.config.php`。`__NAMESPACE__`当您使用常量时，应该定义一个命名空间......

# sql - SQL Server 和 NoSQL 交互

> ID：13007479
> 
> 赞同：1
> 
> 时间：2012-10-22T08:24:14.297
> 
> 标签：sql, join, nosql, sql-server-2012

我有一个包含 500,000 行的表 A。表与其他 5 个表（B、C、D、E、F）相关（每个表的大小为 100,000 行）。

我想快速提取结构化信息作为（键A，值A+B+C+D+E+F），其中值A+B+C+D+E+F是内部的列结果加入这 6 个表（有点慢）。

在这些表上更新/插入/删除每 10 分钟发生一次（异步）。

我需要显示此选择的结果以作为绑定源执行搜索。

**我的想法**

在执行搜索的 NoSQL 数据库中具体化此选择。我的问题是：

*   使用哪个 NoSQL 数据库？
*   每当我的 SQL Server 记录发生更改时，如何同步 SQL Server 以更改 NoSQL 数据库中的数据？

*设想*

*   由 C# 和 framework 4.0 制作的桌面应用程序
*   数据库 SQL Server 2012

# python - 嵌入在 gtk 中的 OpenGL 颜色显示不好：着色器有问题？

> ID：13007486
> 
> 赞同：1
> 
> 时间：2012-10-22T08:24:51.253
> 
> 标签：python, opengl, gtk, shader, pyopengl

*请注意，这是重新编写的，因为我有更多关于问题可能出在哪里的线索......*

我正在创建一个包含两个嵌入式 OpenGL 显示器的 GTK GUI。两者都使用相同的着色器代码（每个都编译一次）。在我的普通硬件上，这工作正常。在同一硬件上运行的虚拟机上，我得到可怕的颜色——看图像。

我怀疑着色器代码有问题——当然删除更简单的着色器确实会使问题变得没有意义。但是，我确实需要在我的着色器中同时使用漫射光和聚光灯，从而使它变得不平凡。

有人见过这个吗？

![普通的](../Images/6015cab0c739e8c3e86df5ecd257fc33.png) ![错误的](../Images/e29c1b16df8494171d6058e1d2cadf58.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:48:33.043

看起来问题是您将文本绘制为黄色，然后当您绘制到下一个缓冲区时它仍然是黄色的。我的猜测是每次绘制时都需要重置一些状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:59:22.903

着色器代码有问题。它在错误的地方做了太多事情，并且严重破坏了虚拟机上的 GPU。不同的着色器代码使事情正常工作。

# android - ScrollView - 如何在 Eclipse 中设计布局时向下滚动？

> ID：13007489
> 
> 赞同：17
> 
> 时间：2012-10-22T08:25:04.563
> 
> 标签：android, xml, scrollview

我一直在我的应用程序中使用滚动视图，但问题是这是我第一次绘制比默认尺寸屏幕更长的东西。

XML 设计屏幕显示一个固定的 3.7 英寸（或更大）屏幕。如果我想添加更多对象怎么办？在 Eclipse 中设计时如何向下滚动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T08:36:30.773

您可以将屏幕尺寸更改为自定义..试试这个..单击当前屏幕按钮，然后选择“添加自定义”，然后向下滚动并选择自定义并单击右上角的“新建”..然后为屏幕编写自定义尺寸并单击“确定”，然后再次单击“确定”。然后再次单击当前屏幕按钮并选择您的自定义尺寸。完成！希望有所帮助！

确保选中此按钮。 ![在此处输入图像描述](../Images/db606fbb5aafbec278e0d2da5df59d5c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T08:32:58.290

尝试临时设置[`android:scrollY`](https://developer.android.com/reference/android/view/View.html#attr_android%3ascrollY)在`ScrollView`. 我还没有尝试过，但理论上它应该可以工作。请记住在发布应用程序时删除该属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T22:02:03.510

自 Android API 19 起，此解决方案已更改。这对我有用。

转到您的 Android 虚拟设备管理器（在 Eclipse 中，这是在 Window > Android Virtual Device Manager 中），然后转到“设备定义”选项卡并创建一个新设备。将其命名为“Long Scroller”等令人难忘的名称。

![创建新设备屏幕](../Images/f4650962dbcea47d21cd0eb8495d6d50.png)

在“编辑/创建设备”屏幕中，将垂直尺寸设置为您认为滚动视图的长度（7000 像素对于我的使用来说已经足够了）。您也可以稍后对其进行调整。

重新启动 Eclipse，打开你的长滚动视图布局，你的长滚动条将出现在你的预览布局中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-16T14:21:16.080

添加`android:scrollY="300dp"`到您的布局。Tt 会将内容向上滚动 300dp。

**在将 android:scrollY="300dp" 添加到布局之前**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent" tools:context="com.javamad.user_profile"
> 
```

你看不到设计的空间

**将 android:scrollY="300dp" 添加到布局后**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent" tools:context="com.javamad.user_profile"
    android:scrollY="300dp"
> 
```

你看到了设计的空间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-07T18:48:16.473

`android:layout_marginTop="-300dp"`向直接`ScrollView`子级添加类似属性的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T08:37:50.783

尝试将您的内部布局设置为固定高度。所以你的代码应该像

```
<ScrollView
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
<RelativeLayout
     android:layout_height="900dp"
>
</ReleativeLayout>
</ScrollView> 
```

这应该工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-29T04:26:01.357

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:paddingBottom="@dimen/activity_vertical_margin"
       android:paddingLeft="@dimen/activity_horizontal_margin"
       android:paddingRight="@dimen/activity_horizontal_margin"
       android:paddingTop="@dimen/activity_vertical_margin"
       tools:context=".AdminControlPanel" 
       android:scrollY="200dp"> 
```

这个 android:scrollY 使您的设计屏幕在 Y 方向上更长...将您的组件向下添加

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-27T16:58:51.680

我通常只使用负边距。它适用于滚动视图，就像里面的项目一样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-15T00:13:17.857

这是我的解决方案：我将 ScrollView 子类化为采用仅在 isInEditMode() 时使用的 scrollY 参数。

```
public class MyScollView extends ScrollView {

    private int scrollY = 0;

    private void init(Context context, AttributeSet attrs) {
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.MyScrollView);
        scrollY = a.getInt(R.styleable.MyScrollView_scrollY, 0);
        a.recycle();
    }

    public MyScollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context, attrs);
    }

    public MyScollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    public MyScollView(Context context) {
        super(context);
    }

    @Override
    public void computeScroll() {
        if (isInEditMode()) {
            scrollTo(0, scrollY);
        }
    }

} 
```

这将进入您的 attrs.xml 文件

```
<declare-styleable name="MyScrollView">
    <attr name="scrollY" format="integer"/>
</declare-styleable> 
```

# jquery - 未捕获的类型错误：无法调用未定义的方法“创建”

> ID：13007494
> 
> 赞同：-5
> 
> 时间：2012-10-22T08:25:41.270
> 
> 标签：jquery, calendar

我有这个错误

> 未捕获的类型错误：无法调用 crom 中 jquery 日历的“未定义的创建”方法。

任何人都可以解释这个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:27:22.610

通常，当错误的形式为无法调用未定义的方法“X”时，这意味着您尝试从中调用 X 的任何对象都不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:30:36.973

在文档就绪回调函数中加载脚本时启动 Fullcalendar，例如：

```
$(document).ready(function() {

    // page is now ready, initialize the calendar...

    $('#calendar').fullCalendar({
        // put your options and callbacks here
    })

}); 
```

# javascript - 暂时允许使用 TouchSwipe 插件垂直滚动

> ID：13007499
> 
> 赞同：4
> 
> 时间：2012-10-22T08:26:00.147
> 
> 标签：javascript, jquery, touch, swipe

我正在使用[SwipeTouch 插件](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)通过滑动来隐藏和显示`#child`元素。

我有`#parent`包含元素的`#child`元素。

这`#child`并不总是有足够的内容来创建滚动条，但是当有时就会出现问题。`#parent`约束`#child`元素，如果`#child`元素高于`#parent`

```
<div id="parent">
    <div id="child">
         <!-- Lots of content -->
    </div>
</div>​ 
```

* * *

我想允许向任何方向滑动以显示和隐藏`#child`...

*   滑动**显示** `#child`元素将被称为**`swipeIN`**。
*   滑动**隐藏** `#child`元素将被称为**`swipeOUT`**。

...**问题是**，如果并且当滚动条存在并且`#child`可见时，我无法垂直滚动，因为这将注册为滑动尝试并触发`swipeOUT`。

于是，我有了一个计划：

*   无滚动条：向各个方向滑动即可触发`swipeIN`和`swipeOUT`。
*   滚动条：滑动所有方向以触发`swipeIN`。向上或向下“滑动”以滚动，向左或向右滑动以触发`swipeOUT`。

![在此处输入图像描述](../Images/2a565715557c2e79604fa8f9b3ac1db6.png)

这是一个很好的计划，只是它不起作用。我想如果我能够禁用向上滑动并暂时向下滑动，它会起作用......

[链接到我的尝试](http://jsfiddle.net/lollero/VvNhb/2/)（问题仅在触摸设备上很明显）。

[更适合在触控设备中进行测试的链接](http://jsfiddle.net/lollero/VvNhb/2/show/)

**关于如何让它发挥作用的任何想法？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:08:54.043

将选项“allowPageScroll”从“auto”（默认）设置为“vertical”（在某些情况下，如果需要）应该可以解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:36:14.287

我开始考虑自己项目的长期计划，前段时间终于让自己通过[github](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin/issues/77)联系了插件的开发人员（链接 github 问题页面）。

他更新了插件，以便您现在可以即时更改所有插件选项。这也使我正在寻找的行为成为可能。可以在[此处](http://labs.rampinteractive.co.uk/touchSwipe/demos/Options.html)找到相关文档（该方法称为：）`option`。

[http://jsfiddle.net/lollero/yATmM/](http://jsfiddle.net/lollero/yATmM/)

[http://jsfiddle.net/lollero/yATmM/show](http://jsfiddle.net/lollero/yATmM/show)

我的代码：

```
$(function() {      

    $(".parent").each(function() {

        var obj = $(this),
            objD = obj.data(),
            objChild = obj.find('.child'),
            scrollbars = obj.height() < objChild.height();

        obj
        .data({ "swipe": "in" })
        .swipe({

            fallbackToMouseEvents: true,
            swipe:function( event, direction ) {

                // swipeIN = swipe that shows #child 
                // ( Swiping is allowed for all directions ).
                if ( objD.swipe === 'in' ) {

                    obj.data({ "swipe": "out" });
                    objChild.show();

                    // If scrollbar exists, set allowPageScroll data 
                    // to 'vertical', so that next time when you swipe 
                    // up or down, you can scroll vertically.
                    scrollbars && obj.swipe('option', 'allowPageScroll', 'vertical');

                }
                // swipeOUT = swipe that hides#child 
                // If scrollbars don't exist, swipe at any direction to hide.
                // If scrollbars exits, swipe left or right to hide ( Up and Down is reserved for scrolling ).
                else if ( 
                    objD.swipe === 'out' && scrollbars && ( direction === 'left' || direction === 'right' )  || 
                    objD.swipe === 'out' && !scrollbars
                ) {

                    obj.data({ "swipe": "in" });
                    objChild.hide();

                    // If scrollbar exists, set allowPageScroll data to
                    // false, so that next time when you swipe up or down,
                    // you actually trigger a swipe.
                    scrollbars && obj.swipe('option', 'allowPageScroll', false );

                }

            }

        });

    });

}); 
```

# android - android maven插件无法从apklib中找到类

> ID：13007500
> 
> 赞同：-2
> 
> 时间：2012-10-22T08:26:01.270
> 
> 标签：android, maven

我有一个库：pom.xml [http://pastebin.com/BEvR041z](http://pastebin.com/BEvR041z) 和一个示例应用程序：pom.xml [http://pastebin.com/bVWESmtf](http://pastebin.com/bVWESmtf)

该项目从 IDE 构建成功（没有 maven）但是我决定编写 maven 构建脚本（参见上面的链接）。

该库已成功编译并安装，但是当我尝试构建示例应用程序时出现十几个错误

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project android-cluster-sample: Compilation failure: Compilation failure:
[ERROR] /Users/anatoly/IdeaProjects/android-map-cluster/sample/src/ru/realweb/map/cluster/sample/MainActivity.java:[13,29] cannot find symbol
[ERROR] symbol  : class ClusterOverlay
[ERROR] location: package ru.realweb.map.cluster 
```

ClusterOverlay 是库中的一个类，因此无法找到库中的类。

所以小伙伴们，你们怎么看？我做错了什么？

更新：问题出在库 pom 中，因为我从本地 repo 解压缩了 apklib 文件并且根本没有类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:38:47.103

我忘了添加源引用，所以 java 类没有被复制到目标 apklib。

```
<build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        ...
</build> 
```

# bash - Bash：将变量作为单个参数/shell引用参数传递

> ID：13007501
> 
> 赞同：2
> 
> 时间：2012-10-22T08:26:03.580
> 
> 标签：bash, python-2.7, quotes

我正在编写一个 bash 脚本，它必须将一个变量传递给另一个程序：

```
./program $variable 
```

问题是，绝对有必要将 $variable 作为单个参数传递，如果它包含空格则不是这种情况。

```
variable=Hello World
./program $variable
-> program receives two arguments: 'Hello' 'World' 
```

引用它根本没有做任何事情（做得好，bash 开发人员）：

```
variable=Hello World
./program "$variable"
-> program receives: 'Hello' 'World' 
```

双引号会做一些疯狂的事情（干得好，bash 开发人员）：

```
variable=Hello World
./program "'$variable'"
-> program receives: "'Hello" "World'" 
```

是否有捷径可寻？哎呀，有没有办法做到这一点？

**更新：**好的，因为问题似乎不是 bash，这里有一些附加信息。我传递参数的程序是一个 python 脚本。在不以任何方式修改参数的情况下，我得到

```
print sys.argv
-> ['/usr/bin/program', "'Hello", "World'"] 
```

我该如何解决？

**编辑：**不，我没试过

```
variable="Hello World" 
```

因为我从不声明 $variable。它没有在我的 bash 函数中声明，也不允许我修改它。

**编辑：**好的，我让它这样工作。

```
local temp="$variable"
./program "$temp" 
```

不过，我想知道为什么它以这种方式工作，而不是以其他方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:40:24.993

你试过`var="hello world"`吗？

我在我的solaris盒子里试过这个。

```
> setenv var "hello world"
> cat temp.sh
#!/bin/sh

echo $1
echo $2
> ./temp.sh "$var"
hello world

> 
```

如您所见，`$2`未打印。`$var`被认为只是一个论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:40:30.003

当您调用脚本时，请在引号内传递参数。

示例脚本：

```
#!/bin/bash
for arg in "$@"; do
 echo "arg: $1";
 shift;
done 
```

当你调用它时：

```
./program "parameter with multiple words" parameter2 parameter3 "another parameter" 
```

输出应该是：

```
arg: parameter with multiple words
arg: parameter2
arg: parameter3
arg: another parameter 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T08:58:51.267

看看[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)。

问题是变量的扩展是在命令行参数之前完成的，因此您的行为。

您可以通过将 IFS 设置为一些奇怪的东西来解决它

```
IFS='###' V='foo bar baz'; ./program $V 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:32:39.413

这几乎肯定是您在程序中读取变量的方式存在的问题。
例如，假设这是您的脚本（仅用于测试的一行）：

```
echo "$1" 
```

我们称它为 echo.sh。如果你跑`echo.sh "test best"`，你会得到`test best`。

但是如果你的程序说

```
echo $1 
```

你可能会得到像你所看到的那样的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T08:40:21.940

问题似乎在“程序”内部

```
variable="Hello World"    # quotes are needed because of the space
./program "$variable"     # here quotes again 
```

并在程序内部

```
echo "program received $# arguments:" 
i=1
for arg in "$@"      # again quotes needed
do echo "arg $((i=i+1)): '$arg'"    # and again
done 
```

# javascript - audio.js 在 ie9 中循环

> ID：13007502
> 
> 赞同：0
> 
> 时间：2012-10-22T08:26:09.013
> 
> 标签：javascript, audio

您好，我在使用 ie9 时遇到问题，我正在使用插件 audio.js [http://kolber.github.com/audiojs/](http://kolber.github.com/audiojs/)，并且音频继续在浏览器中循环，我正在加载音频：

```
function play_voice_pre(vfile){
    var a = audiojs.createAll();
    a[0].load("assets/sound/wu/" + vfile);
    return a;
}

audio3 = play_voice_pre(path+"Program7-1-w-4.mp3"); 
```

然后开始玩

```
audio3[0].play() 
```

我每页使用不止一个音频，所有音频开始循环到无限，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:37:32.503

没关系，我找到了解决方案

```
a[0].trackEnded=function() {
     a.pause();
} 
```

在 ie9 中停止跟踪

# database - 通过互联网保护与 firebird 连接的最佳方法

> ID：13007505
> 
> 赞同：17
> 
> 时间：2012-10-22T08:26:27.650
> 
> 标签：database, security, firebird, tunnel

我有一个客户端-服务器应用程序，它通过 Internet 使用 firebird 服务器 2.5。我遇到了对 FB 数据库进行安全访问的问题，并且首先尝试通过在应用程序中集成隧道解决方案（更准确地说是 STunnel 软件）来解决这个问题。但是，这种方法受到许多方面的影响： - 这在客户端/服务器端都增加了更多的资源消耗（CPU、内存、线程）， - 软件部署成为一个严重的问题，因为 STunnel 软件被编写为 WinNT 服务，而不是 Dll 或一个组件（WinNT 服务需要管理员权限才能安装）并且我的客户端应用程序需要在不安装的情况下运行！

所以，我决定抓住公牛的角（或者我们谈论火鸟时的羽毛）。我已经下载了 Firebird 2.5 源代码，并直接在他的低级通信层（INET 套接字层）中注入了安全隧道化代码。现在，火鸟引擎直接对每个 TCP/IP 数据包进行加密/解密。

您如何看待这种方法与外部隧道化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:49:28.023

我建议从双方将数据交换包装在 SSL/TLS 流中。这是经过验证的标准。虽然使用静态密钥的自定义实现可能不安全。

例如，具有恒定 IV 的 CTR 模式可以揭示大量信息，因为它只加密递增的向量并与数据进行异或运算，因此对两个加密数据包进行异或将显示未加密数据包的异或版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T01:09:09.783

stunnel 建议是一个很好的建议，但是，如果这不合适，您可以在虚拟机中运行某种真正受信任的 VPN。（试着说几次。）这有点奇怪，但它会像这样工作：

1.  在 firebird 机器上设置一个 VM，并为该 VM 提供两个接口，一个连接到您的外部 LAN（最好将 LAN 卡绑定到它），另一个是 firebird 的仅主机 LAN。
2.  将 openvpn 服务器加载到该 VM 并使用客户端和服务器证书
3.  在您的客户端上运行您的 openvpn 客户端

奇怪，但它确保了以下内容：

1.  除非客户端和服务器都同意证书，否则您的客户端无法连接到服务器
2.  您的 firebird 服务仅接受通过此可信 VPN 链接的连接。
3.  从技术上讲，如果您需要，本地实体仍然可以连接到 VPN 之外的 firebird 服务器——例如，同一本地 LAN 上的开发人员控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T23:05:53.910

完成任务的最快方法不是改进 firebird，而是改进你的连接。获取两个可以进行 SSL 证书身份验证的防火墙设备，并将其放在您的 DB 服务器和您的 firebird 设备前面。让防火墙设备进行加密/解密，并让您的数据库服务器完成其工作，而无需干预每个数据包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T00:46:04.230

总的来说，我对安全关键代码的看法是，“您希望尽可能多地关注有问题的代码，并且您不想自己维护它。” 原因是我们都会犯错误，在协作环境中，这些错误更容易被发现。此外，这些可能会得到更好的测试。

在我看来，这里有一些可以接受的解决方案。所有方法都会增加一些开销，但如果需要，可以在单独的服务器上处理这种开销。可能性包括：

1.  隧道

2.  IPSec（我的最爱之一）。请注意，使用 IPSec，您可以创建隧道，然后可以将这些隧道转发到其他主机，因此您可以将 VPN 管理移动到 db 主机以外的计算机上。您也可以直接对主机进行 IPSec。

3.  PPTP

4.  tinc之类的跨平台vpn软件。

请注意，在安全方面*没有免费的午餐*，您需要非常仔细地审查您的要求，并确保您彻底了解您正在使用的解决方案。

# javascript - 如何在第一次单击时切换 div 显示？

> ID：13007508
> 
> 赞同：0
> 
> 时间：2012-10-22T08:27:05.830
> 
> 标签：javascript, jquery, css, html

html头：

```
<script type="text/javascript" language="JavaScript">

    function getStyle() {
        var temp = document.getElementById("cont").style.display;
        return temp;
    }

    function switch01() {
        var current = getStyle();
        if (current == "none") {
            document.getElementById("cont").style.display = "block";
        }
        else {
            document.getElementById("cont").style.display = "none";
        }
    }​

</script> 
```

身体：

```
<a href="javascript:switch01('cont')">CONTENT</a> 
```

CSS：

```
#cont{
    display: none;
} 
```

加载页面后 - 第一次单击不起作用。第一次点击后 - 一切正常。
另外，我怎样才能缓慢地显示/隐藏 div（具有滑动效果，而不是瞬间）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T08:32:30.037

您第一次获得的值是“未定义”。

你可以：

1）页面加载时通过javascript设置值；

```
document.getElementById("cont").style.display = "none"; 
```

或者

2）将“未定义”值解码为无，因为您知道一开始该值将为无；

```
var temp = document.getElementById("cont").style.display;
if (temp == "undefined") 
   temp = "none";
return temp; 
```

两个非常丑陋的解决方案，但他们工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:31:55.027

如果它必须是内联的，你需要做这个[DEMO](http://jsfiddle.net/mplungjan/kwzAg/)

```
<a href="#" onclick="return switch01('cont')">CONTENT</a> 
```

和这个（将 none 的测试反转为 not block 的测试）

```
<script type="text/javascript" language="JavaScript">
function switch01(objId) {
  var current = document.getElementById(objId).style.display;
  document.getElementById(objId).style.display=(current!="block")?"block":"none";
  return false
}
</script> 
```

以上回答了你的问题

**更新**：由于您似乎更喜欢 jQuery，因此您需要编写代码 - 请注意 Michal 错过的 return false。

```
<a href="#" id="toggle">CONTENT</a>

$(function() { // wait for the page to load
  $('#toggle').on("click",function(e) { // when link clicked
    $('#cont').slideToggle(); // slide open or closed
    return false; // or e.preventDefault(); // stop the click executing the href
  });​
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T08:34:08.400

如果你想要幻灯片效果，我的建议是使用 jQuery：

```
$('#toggle').click(function() {
    $('#cont').slideToggle();
});​ 
```

请参阅此[演示](http://jsfiddle.net/3kKkD/3/)。

有关更改滑动速度和更多信息，请参阅[文档](http://api.jquery.com/slideToggle/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T08:57:06.420

为了隐藏 div .. 你可以看看

```
 $('cont').hide(); function. 
```

更多相关信息可在此处获得：

```
 http://api.jquery.com/hide/

     http://api.jquery.com/show/ 
```

而对于滑动效果来说，Jquery 在这个部门是一流的。你只需要传递下面给出的参数..它就可以了。

```
 $("cont").click(function () {
         $(this).hide("slide", { direction: "down" }, 1000);
     }); 
```

仅供参考：[http ://docs.jquery.com/UI/Effects/Slide](http://docs.jquery.com/UI/Effects/Slide)

# php - Zend 框架 2.0.2 YouTube API

> ID：13007510
> 
> 赞同：1
> 
> 时间：2012-10-22T08:27:09.413
> 
> 标签：php, youtube-api, zend-framework2

## 问题

我似乎在新的 Zend Framework 2.0.2 上找不到任何 YouTube API 文档。我需要做任何外部或额外的下载吗？所有教程都基于旧版本的 Zend！

还是我应该只下载旧版本的 Zend？

* * *

## 回答

我正在为将来可能需要它的任何其他人提供这个答案。

您必须下载 Zend Framework 1.7.7。由于 YouTube API 使用 Gdata 文件夹。根据我的研究，这是唯一支持 YouTube API 的版本。

希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:41:39.700

GData API 在 ZF2 中可用，您只需要安装包含它的包。

[您可以在此处](http://packages.zendframework.com)找到可用软件包的列表。

如果您已经在使用 Composer for ZF2，只需添加`"zendframework/zendgdata": "2.0.*"`到该`require`部分的包列表中，然后运行`php composer.phar update`以获取 GData 包，您现在就可以开始使用 GData 类了。

如果您不使用 Composer，以下是获取 GData\YouTube 库的方法。

从新目录安装 Composer：

```
curl -s https://getcomposer.org/installer | php 
```

注意：如果您没有 cURL，只需从上述 URL 下载安装程序并运行`php installer`

现在已经安装了 Composer，创建一个`composer.json`包含以下内容的文件：

```
{
    "repositories": [
        {
            "type": "composer",
            "url": "http://packages.zendframework.com/"
        }
    ],
    "require": {
        "zendframework/zendgdata": "2.0.*"
    }
} 
```

通过将`zendframework/zendgdata`包添加到`require`列表中，composer 将下载并安装此包以及 ZF2。

现在运行安装：

```
php composer.phar install 
```

您现在在新创建的`vendor`目录中拥有 Zend Framework 2 和 GData 包的副本。

要对其进行测试，请在与如下所示相同的目录中创建 test.php `composer.json`：

```
<?php

require_once 'vendor/autoload.php';

$youtube = new ZendGData\YouTube();

var_dump($youtube); 
```

ZF2 中 GData YouTube API 的使用与 ZF1 中的类似，但如果您查看`vendor/zendframework/zendgdata/tests/ZendGData/`目录，您会看到许多测试，您可以将其用作开始使用各种 ZF2 YouTube 类的示例。

希望有帮助。

# .htaccess - .htacces 重定向异常

> ID：13007511
> 
> 赞同：0
> 
> 时间：2012-10-22T08:27:12.563
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301

我有一个重定向异常的问题。根目录中的所有文件都被重定向到 / 我想为 sitemap.xml 创建一个例外。

我的 htaccess ：

```
RewriteCond %{HTTP_HOST} ^www.website.com$
RewriteCond %{REQUEST_URI} ^/$
RewriteCond %{REQUEST_URI} !sitemap.xml$
RewriteRule ^(.*)$       site/web/website/index.php [L]

RewriteCond %{HTTP_HOST} ^www.website.com$
RewriteCond %{REQUEST_URI} ^/site/web/website/$
RewriteCond %{REQUEST_URI} !sitemap.xml$
RewriteRule .* http://www.website.com/ [R=301,L]

RewriteCond %{HTTP_HOST} ^website.com$
RewriteCond %{REQUEST_URI} ^/site/web/website/$
RewriteRule .* http://www.website.com/ [R=301,L] 
```

但不起作用:(。

非常感谢

# objective-c - 如何拍摄圆形屏幕截图？

> ID：13007512
> 
> 赞同：2
> 
> 时间：2012-10-22T08:27:16.090
> 
> 标签：objective-c, ios, screenshot

我看过很多关于截图的问题和答案，我知道该怎么做，这不是我的问题，这是我的代码：

```
- (void)takeScreenShot
{
    //UIGraphicsBeginImageContextWithOptions(CGSizeMake(320, 340), YES, 0.);
    UIGraphicsBeginImageContext(CGSizeMake(320, 480));
    [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

怎么可能拍摄一个圆形屏幕而不是 320x480 方框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:41:34.947

你可以试试这个：

```
- (UIImage *)takeRoundedScreenShot:(CGPoint)center
{
  float cornerRadius = self.view.window.layer.cornerRadius;
  CGAffineTransform savedTransform = self.view.window.transform;

  UIGraphicsBeginImageContext(CGSizeMake(320, 320));
  self.view.window.layer.cornerRadius = 160;
  self.view.window.clipsToBounds = YES;
  self.view.window.transform = CGAffineTransformMakeTranslation(-(center.x-160), -(center.y-160));
  [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  self.view.window.transform = savedTransform;
  self.view.window.layer.cornerRadius = cornerRadius.

  return viewImage;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:31:01.613

我不认为这是可能的，但你总是可以[自己绕过角落](https://stackoverflow.com/search?q=uiimage%20round%20corners)吗？

# xslt - 使用来自 Sharepoint Designer 中连接的 LVWP 的参数的 xslt 过滤 DVWP

> ID：13007515
> 
> 赞同：4
> 
> 时间：2012-10-22T08:27:26.200
> 
> 标签：xslt, sharepoint-2010, web-parts, sharepoint-designer, dataviewwebpart

我的设置如下： Sharepoint 2010 站点上的自定义页面，其中包含列表视图 Web 部件和数据视图 Web 部件。当我在 LVWP 中选择一个项目时，我想使用多查找字段值过滤 DVWP。因此，我连接了两个 Web 部件，以便 DVWP 从 LVWP 获取参数。我使用以下内容过滤 DVWP：

```
<xsl:variable name="Rows" select="/dsQueryResponse/Rows/Row[contains($pDataAftaleID,concat(@ID,';#',@ID))]"/> 
```

其中 pDataAftaleID 是来自 LVWP 的参数。

我的问题是：如果 LVWP 中的选定项目在参数字段中有值，则一切正常，但如果没有，Sharepoint 似乎不会将空/空或零值写入参数和过滤器参数将 LVWP 中最后一个选定项目的值保留为一个值，因此 DVWP 显示来自某个先​​前选定项目的项目，而不是“没有要显示的项目”。

是否有某种方法可以强制写入空字段，或者是否可以在每次 DVWP 加载时将参数设置为零？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-19T07:21:04.660

```
<xsl:variable name="Rows">
  <xsl:choose>
    <xsl:when test="/dsQueryResponse/Rows/Row[contains($pDataAftaleID,concat(@ID,';#',@ID))]">
       <xsl:text>/dsQueryResponse/Rows/Row[contains($pDataAftaleID,concat(@ID,';#',@ID))]</xsl:text>
    </xsl:when>
    <xsl:otherwise>
       <xsl:text>0</xsl:text>
    </xsl:otherwise>
  </xsl:choose>
</xsl:variable> 
```

请检查此功能或此功能的变体是否适合您。

# android - Android，查看生命周期和恢复

> ID：13007523
> 
> 赞同：0
> 
> 时间：2012-10-22T08:28:03.157
> 
> 标签：android, view, lifecycle, restore

我有一个由创建的视图

```
this.vehicleListUI = new GameUIVehicleList();
this.vehicleListUI.attachGameEngine(myGameEngine); 
```

这项工作最终导致 android 破坏并恢复视图。Android可以通过使用空构造函数重新创建视图，但我的问题是这`GameUIVehicleList`将工作我大多数也将`myGameEngine` 对象设置为`GameUIVehicleList`

不可序列化，`myGameEngine`不能这样（是 UI 的一部分）

存在一种通过将`myGameEngine`对象重新附加到创建视图来完全恢复我的视图的方法。这也有利于在 XML 布局文件中启用大量“new GameUIVehicleList()”。

**编辑：**

我不知道这是否有帮助，但我从一开始就遇到这个问题的方法是我使用 a`android.support.v4.app.FragmentActivity`并且这会继续销毁并重新创建我的 View 对象。我也可以通过重写一些方法来解决这个问题，`android.support.v4.app.FragmentActivity`即在重新创建/创建片段时调用，`FragmentActivity`并为此设置我的 Activity 中保存需要数据的需要值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:59:25.353

Activity（和视图）的销毁和重新创建通常发生在配置更改（最常见的是屏幕方向更改）时。您可能想检查[这篇文章](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)是否有帮助，并且[onRetainNonconfigurationInstance()](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29) /`setRetainInstance()`不会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:46:16.743

如果`myGameEngine`is not `Serializable`or `Parcelable`，我认为不可能可靠地做到这一点。

但是，如果可以，因为`myGameEngine`有时无法恢复，您可以使用您自己的包含变量`Application`的自定义类扩展该类，然后在您的应用程序上下文中保存该变量。`MyApplication``myGameEngine``onCreate``myGameEngine`

```
MyApplication app = (MyApplication) this.getApplicationContext();
this.vehicleListUI.attachGameEngine(app.myGameEngine); 
```

# google-maps - 根据缩放级别的图像大小计算谷歌地图 GPS 坐标

> ID：13007525
> 
> 赞同：-1
> 
> 时间：2012-10-22T08:28:16.667
> 
> 标签：google-maps, gps

我想根据谷歌地图中的某个缩放级别计算 GPS 坐标比例中的图像尺寸。基本上我想在 GPS 坐标刻度中找到相邻像素之间的距离。我该怎么做（等式是什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:21:53.493

你可以在这里找到一个处理墨卡托投影和图块大小转换的[类](http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/)。您应该能够使用很多这些实用函数来计算它。

# javascript - javascript高阶函数；“this”参数与外部“self”变量

> ID：13007527
> 
> 赞同：5
> 
> 时间：2012-10-22T08:28:41.477
> 
> 标签：javascript

在 javascript 中使用 Array API 的高阶函数（forEach、map、filter 等）时，有两种方法可以传递“this”变量：

```
myArray.forEach(function(value) {
    this.aContextualFunction();
}, this); 
```

或者

```
var self = this;
myArray.forEach(function(value) {
    self.aContextualFunction();
}); 
```

哪个更好？优缺点都有什么 ？

示例：http: [//jsfiddle.net/TkZgX/](http://jsfiddle.net/TkZgX/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:47:28.100

我总是喜欢第一个。

亲：没有额外的 var 声明

缺点：可能是在这个问题的评论中看到的混乱..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:29:29.450

当使用高阶函数时，我希望我的函数不要对它作为参数接收的回调做出任何假设。一般来说，代码越松耦合越好。

例如，假设我为 编写了一个高阶函数`forEach`：

```
function forEach(array, callback, that) { // that is optional
    var length = array.length;
    for (var i = 0; i < length; i++)
        callback.call(that, array[i], i); // pass the value and the index
} 
```

现在说我想使用它：

```
Array.prototype.double = function () {
    forEach(this, function (value, index) {
        this[index] = 2 * value;
    });                                     // oops, I forgot that
};

var array = [1, 2, 3];
array.double(); 
```

上面的代码会导致变量泄漏到全局范围内。不是什么好事。在此处查看演示：http: [//jsfiddle.net/8dad4/](http://jsfiddle.net/8dad4/)

有什么选择？删除可选的第三个参数并使用闭包：

```
function forEach(array, callback) {
    var length = array.length;
    for (var i = 0; i < length; i++)
        callback(array[i], i);
} 
```

不仅代码更小，而且不会出现任何意外的全局泄漏（除非您像白痴一样使用`this`而不是外部）。`that`让我们看一个例子：

```
Array.prototype.double = function () {
    var that = this;

    forEach(this, function (value, index) {
        that[index] = 2 * value;
    });
};

var array = [1, 2, 3];
array.double(); 
```

演示在这里：http: [//jsfiddle.net/8dad4/1/](http://jsfiddle.net/8dad4/1/)

嗯......这似乎不是很诱人 - 我不想创建一个新变量。我们可以做得更好吗？是的，我们当然可以。这是我比较喜欢的方法（我们还是用第二个`forEach`函数）：

```
Array.prototype.double = function () {
    forEach(this, function (value, index) {
        this[index] = 2 * value;
    }.bind(this));
};

var array = [1, 2, 3];
array.double(); 
```

演示在这里：http: [//jsfiddle.net/8dad4/2/](http://jsfiddle.net/8dad4/2/)

哇，这不是更好吗？我们结合了方法一和方法二。好处：

1.  该`forEach`函数不假设任何内容。代码更松散耦合。
2.  我们不需要像`that`. 不需要关闭。
3.  对于正在发生的事情没有任何困惑。

我们可以这样做，因为传递给的匿名函数`forEach`是一个函数表达式。所以我们只是追加`.bind(this)`它，我们就完成了。

# javascript - 如何获取文件上传输入选择的文件列表

> ID：13007528
> 
> 赞同：6
> 
> 时间：2012-10-22T08:28:42.987
> 
> 标签：javascript, jquery, file, upload

我有一个元素（允许多个文件上传）。我想使用 javascript/jquery 来获取已选择上传的文件列表。这可能吗？

元素看起来像

```
<input type="file" name="files[]" multiple/> 
```

我正在使用 Play Framework (Java) 控制器接收文件——但这对这个问题并没有真正的用处。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T08:34:39.020

您可以从输入元素的“文件”属性中获取列表。我认为这个链接可以帮助你。[Javascript从具有多个属性的文件输入元素中获取文件数量及其文件名？](https://stackoverflow.com/questions/6171013/javascript-get-number-of-files-and-their-filenames-from-input-multiple-elemen)

例子：

```
$files = $('#fileInput').files;
for (var i=0, l=files.length; i<l; i++) {
     console.log(files[i].name);
} 
```

# matlab - 高斯超几何函数 2F1

> ID：13007539
> 
> 赞同：2
> 
> 时间：2012-10-22T08:29:39.383
> 
> 标签：matlab, gaussian

我想知道 Matlab 是否有任何可用的高斯超几何函数（2F1 函数）代码。

我完全知道在最新的 Matlab 版本中有 hypergeom 函数，但它的工作速度非常慢。

因此，我想知道是否存在任何 mex 函数或执行 hypergeom 所做的任何类似代码。

我提前感谢大家的支持。

最好的问候，弗朗切斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:28:54.117

[GNU 科学库](http://www.gnu.org/software/gsl/manual/html_node/Hypergeometric-Functions.html)实现了包括 2F1 在内的超几何函数。将其包装在 mex 文件中应该不会有太多麻烦。

我希望您也会在 Internet 上找到其他资源。

一定要报告并让我们知道它是否比内在函数工作得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:36:22.253

在互联网上搜索了一下之后，我想出了 Mathworks File Exchange 中提供的这个工具：

[http://www.mathworks.com/matlabcentral/fileexchange/35008-generation-of-random-variates/content/pfq.m](http://www.mathworks.com/matlabcentral/fileexchange/35008-generation-of-random-variates/content/pfq.m)

它由 1900 个分布组成，其中包括高斯超几何函数 2F1。

此外，它比标准的超几何函数具有更好的性能。

# .net - 如何跟踪集合的变化

> ID：13007540
> 
> 赞同：3
> 
> 时间：2012-10-22T08:29:59.947
> 
> 标签：.net, entity-framework

我有一个包含另一个类的对象的类：

```
public class Container
{
    public BindingList<Item> Items { get; set; }
}
public class Item
{
    ...
} 
```

的对象`Container`附加到`DbContext`. 我想覆盖`DbContext's` `SaveChanges()`通过 WCF 服务发送所有更改。

原始属性没有问题。它们反映在`Entries`. `Item`但是如果一个和它的变化之间的关系`Container`（例如一个新的项目被添加或一个现有的项目被删除），在ChangeTracker 中没有关于它的条目。

我可以`ForeignKey`在 Item 类中添加一个来强制`Modified`输入，但这对我没有多大帮助，因为我需要知道包含对象。

我还尝试将其转换`DbContext`为`ObjectContext`以获取实体的所有相关项目。但我看不出有办法得到 a 的实际对象`RelatedEnd`。

有没有办法跟踪包含的集合的变化？

## 更新

根据要求，我已经有一些代码：

```
//In a DbContext subclass
public override int SaveChanges()
{
    //get all modified entities
    var changes = this.ChangeTracker.Entries();
    foreach (var c in changes)
    {
        //check the state of the entity
        switch (c.State)
        {
            //send according WCF callback to the clients
            case System.Data.EntityState.Added:
                App.Current.ServerManager.SendEvent(s => s.EntityAdded((IIdentifiable)c.Entity), causedBy);
                break;
            ...
        }
    }
    return base.SaveChanges();
} 
```

使用此代码，我无法检测到`Items`集合的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:21:16.803

看看[这个问题](https://stackoverflow.com/questions/10300156/ivalidatableobject-is-useless-for-ef-navigation-properties/10304323#10304323)，它显示了如何获得添加的关系。希望它能帮助你得到你需要的东西。

# mvvm - Knockoutjs 程序不工作

> ID：13007542
> 
> 赞同：0
> 
> 时间：2012-10-22T08:30:11.847
> 
> 标签：mvvm, knockout.js

我是 Knockoutjs 的新手，从[http://learn.knockoutjs.com/ 教程](http://learn.knockoutjs.com/)开始，但是当我在本地尝试时也是如此，它不起作用。

我需要将模型和视图写在单独的文件中还是相同的文件中，我的问题是如何运行第一个淘汰赛程序。

```
<!DOCTYPE HTML>
<html>
    <head>
    <title></title>
        <script type="text/javascript" src='http://cdnjs.cloudflare.com/ajax/libs/knockout/2.1.0/knockout-min.js'></script>
        <script type="text/javascript">
                    // Here's my data model
            var ViewModel = function(first, last) {
                this.firstName = ko.observable(first);
                this.lastName = ko.observable(last);
                this.fullName = ko.computed(function() {
                    // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
                    return this.firstName() + " " + this.lastName();
                }, this);
            };

            ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work​​​​​​​​​​​​​​​​​​
            </script>
    </head>
    <body>
            <div class='liveExample'>   
    <p>First name: <input data-bind='value: firstName' /></p> 
    <p>Last name: <input data-bind='value: lastName' /></p> 
    <h2>Hello, <span data-bind='text: fullName'> </span></h2>  
</div>​
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:35:48.023

您应该放在`ko.applyBindings`页面末尾。以下是来自官方文档的引用：

> 要激活 Knockout，请将以下行添加到块中：
> 
> `ko.applyBindings(myViewModel);`
> 
> 您可以将脚本块放在 HTML 文档的底部，也可以将其放在顶部并将内容包装在 DOM-ready 处理程序中，例如 jQuery 的 $ 函数。

所以代码应该如下所示：

```
<!DOCTYPE HTML>
<html>
    <head>
    <title></title>
        <script type="text/javascript" src='http://cdnjs.cloudflare.com/ajax/libs/knockout/2.1.0/knockout-min.js'></script>
    </head>
    <body>
       <div class='liveExample'>   
           <p>First name: <input data-bind='value: firstName' /></p> 
           <p>Last name: <input data-bind='value: lastName' /></p> 
           <h2>Hello, <span data-bind='text: fullName'> </span></h2>  
       </div>​
       <script type="text/javascript">
            // Here's my data model
            var ViewModel = function(first, last) {
                this.firstName = ko.observable(first);
                this.lastName = ko.observable(last);
                this.fullName = ko.computed(function() {
                    // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
                    return this.firstName() + " " + this.lastName();
                }, this);
            };

            ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work​​​​​​​​​​​​​​​​​​
       </script>
    </body>
</html> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/s2LSE/](http://jsfiddle.net/vyshniakov/s2LSE/)

# ruby - 删除 Ruby 中的换行符

> ID：13007544
> 
> 赞同：1
> 
> 时间：2012-10-22T08:30:25.607
> 
> 标签：ruby, xml

有没有办法在多行而不是一行中编写一个很长的 xml 请求？当我在多行中编写它时，由于插入了换行符，该字符串不被接受。如何在文本编辑器中添加换行符并在实际程序中添加换行符？我正在使用崇高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:36:40.800

### 红宝石

```
str = "this is \n multi-line \n text \n\n"
puts str 
# this is
# multi-line
# text 
```

使用[gsub！](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub-21)修改字符串

```
str.gsub!("\n","") 
puts str # this is  multi-line  text 
```

### 导轨

使用[squish](http://rubydoc.info/gems/activesupport/3.2.6/String%3asquish)删除所有不必要的空白

```
str = "this is \nmulti-line \n text \n\n"
puts str.squish # this is multi-line text 
```

# html - 超级下拉菜单位置问题

> ID：13007545
> 
> 赞同：0
> 
> 时间：2012-10-22T08:30:27.963
> 
> 标签：html, css, drop-down-menu, megamenu

我正在尝试创建一个大型下拉菜单，就像以下链接中的菜单一样：http: [//i48.tinypic.com/2ln97ip.png](http://i48.tinypic.com/2ln97ip.png)

我已经创建了这个小提琴，但是由于第二个 ul 的定位和边框不好，事情进展不顺利:( [http://jsfiddle.net/H8FVE/16/](http://jsfiddle.net/H8FVE/16/)

```
<ul id="firstUl">
    <li><a>mainSimple</a></li>
    <li>
        <a>MainMenu</a>
        <ul id="secondUl">
            <li>
                <a>SecondLevel1</a>
                <ul id="lastLevel">
                    <li>
                        <a>LastLevelX</a>
                    </li>
                    <li>
                        <a>LastLevelY</a>
                    </li>
                </ul>
            </li>
            <li>
                <a>SecondLevel2</a>
                <ul id="lastLevel">
                    <li>
                        <a>LastLevel</a>
                    </li>
                    <li>
                        <a>LastLevel</a>
                    </li>
                     <li>
                        <a>LastLevel</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    </ul>

#firstUl{height:42px; position:relative; background:#ccc;}

#firstUl li{ float:left; border:1px solid #fff; padding:10px; border:1px solid red;}

#secondUl{display:none; background:#fafafa; }

#secondUl li{
float:left;
display:block;
border:1px solid #eaeaea;
}

#lastLevel{
display:none;
}

#firstUl li:hover> #secondUl{
border:1px solid red;
display:block;
position:absolute;
top:100%;

}

#firstUl li #secondUl li:hover> #lastLevel{
display:block;
    position:absolute;
    top:100%;
    left:0;
}

#firstUl li #secondUl li #lastLevel li{
float:none;
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:42:27.643

尝试将 #secondUl li 设置为 position:relative 以便孩子的 (UL) 位置取决于它：

```
#secondUl li {
    ...
    position: relative;
} 
```

# jquery - 鼠标移出时隐藏div

> ID：13007550
> 
> 赞同：4
> 
> 时间：2012-10-22T08:30:34.140
> 
> 标签：jquery, mouseout

我有两个 div，一个用于简短摘要，一个用于长摘要。
当我在简短摘要上“鼠标悬停”时，简短摘要消失，而长摘要出现。
当我从长摘要中“鼠标移出”时，它应该消失并且应该出现简短摘要。

问题是，当我仍在长摘要的边界内但不在排序摘要的位置时，会发生 mouseout 事件

代码：

```
<head>
  <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.js"></script>
  <script>
      function show(Fdiv) {
          $(Fdiv).css("display", "none");
          $(Fdiv).next().css("display", "inline");
      }
      function hide(Sdiv) {
          $(Sdiv).css("display", "none");
          $(Sdiv).prev().css("display", "inline");
      }
  </script>

</head>
<body>
<div onmouseover="show(this)"> Sort summary <br /> Second Row</div>
<div onmouseout="hide(this)" style="display:none"> Long Summary <br /> Second Row<br /> Third Row <br /> Fourth Row</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:47:18.770

您可以使用 CSS 来完成此操作，而不是使用 JavaScript 来破解它。这具有性能以及语义和逻辑优势。

你必须稍微改变你的 HTML 结构。我假设摘要是针对书籍的。

**HTML**

```
<div class="book">
    <p class="short">Short summary.</p>
    <p class="long">Long summary.</p>
</div> 
```

**CSS**

```
.book .long,
.book:hover .short { display:none }
.book:hover .long { display:block } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:35:13.543

试试这个

```
<div onmouseover="show_div(this)"> Sort summary <br /> Second Row</div>
<div onmouseout="hide_div(this)" style="display:none"> Long Summary <br /> 
   Second Row<br /> Third Row <br /> Fourth Row</div>
<script>
    function show_div(Fdiv) {
      $(Fdiv).hide();
      $(Fdiv).next().show();
    }
    function hide_div(Sdiv) {
      $(Sdiv).hide();
      $(Sdiv).prev().show();
   }
 </script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:36:15.307

这很简单，使用 jquery 本机函数[mouseleave](http://api.jquery.com/mouseleave/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:40:50.037

试试这个**工作演示**：http: [//jsfiddle.net/UG3FZ/](http://jsfiddle.net/UG3FZ/)

此演示使用以下 API：

`.mouseout`- [http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

`.mouseover`- [http://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

由于您使用的是最新的 JQ，如果我建议您阅读 api jquery 和一些在线提示。

休息演示应该满足您的需求`:)`

**代码**

```
$(function() {
    $(".show_div").mouseover(function() {
        $(this).next().show();
        $(this).hide("slow");
    });

    $(".hide_div").mouseout(function() {
        $(this).prev().show();
        $(this).hide("slow");

    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T12:48:19.270

这样做： -

## HTML：

```
<div class="main">
    <div class="short"> Short summary <br /> Second Row</div> 
    <div class="long" style="display:none"> Long Summary <br /> Second Row<br /> Third Row <br /> Fourth Row</div>
</div> 
```

## 查询：

```
$(".main")
    .mouseenter(
        function() {
            $(this+".long").show();
            $(this+".short").hide();
        })
    .mouseleave(
        function() {
            $(this+".short").show();
            $(this+".long").hide();
        }); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/3WNc6/)**

# android - 在BroadCastReceiver 类中获取实例以在android 中接收短信？

> ID：13007553
> 
> 赞同：1
> 
> 时间：2012-10-22T08:30:48.103
> 
> 标签：android, android-layout, android-emulator

我想从android广播接收器中的textview获取实例以接收短信。我想在 textview 中显示短信并从“textview.settext("SmsContentEtc")”中使用，但是因为我在课堂上使用 creat 方法，所以我可以从 textview 获取实例！！！！

```
public class SmsReceiver extends BroadcastReceiver
{
    private TextView txtshow;
     @Override
        public void onReceive(Context context, Intent intent) 
        {       
            //---get the SMS message passed in---
            Bundle bundle = intent.getExtras();        
            SmsMessage[] msgs = null;
            String str = "";            
            if (bundle != null)
            {
                //---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length]; 
                for (int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                         
                    str += "SMS from " + msgs[i].getOriginatingAddress();                     
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    str += "\n";  `enter code here`
                }
                //---display the new SMS message---
               //Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
                txtshow.setText("smsContentEtc");
            }                         
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:23:45.377

将文本放入意图中并将该意图发送到您的活动。

1.  如果活动没有运行，那么它将被创建，您需要从意图中获取文本并将其显示在文本视图中。

2.  如果活动已经在运行，那么根据活动的启动模式活动将获得新的意图，或者将使用该意图调用新的活动实例。

# c# - 使用 Web 服务作为 ado.net 实体数据模型的数据源

> ID：13007556
> 
> 赞同：5
> 
> 时间：2012-10-22T08:30:57.013
> 
> 标签：c#, database, web-services, odata, ado.net-entity-data-model

我目前正在尝试使用 web 服务作为 ado.net edm 的来源。例如： http: [//odata.netflix.com/v2/Catalog/](http://odata.netflix.com/v2/Catalog/) $metadata

我已经将 web 服务的 xml 存储在一个变量中，以便我可以在必要时使用它。有没有办法将 web 服务的数据与数据模型相关联，以便 edm 的表是相对于 web 服务动态创建的？

我只需要使用行名和类型动态创建表。

最好的问候朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:52:54.273

您可以使用 WCF 数据服务客户端实用程序 (DataSvcUtil.exe)。这是一个命令行实用程序，允许您从其元数据创建使用任何 OData 服务所需的 .Net 类。

您将需要执行 Visual Studio 命令提示并确保您的 Visual Studio 安装包含 WCF 功能：使用 DataSvcUtil.exe，您将需要与此类似的条目。

```
datasvcutil /out:NetflixODataProxy.cs /uri:http://odata.netflix.com/v2/Catalog/ /language:CSharp /nologo /version:2.0 
```

# drupal-7 - 如何在 D7 中插入分类术语时自动翻译？

> ID：13007559
> 
> 赞同：1
> 
> 时间：2012-10-22T08:31:13.337
> 
> 标签：drupal-7, translation, taxonomy, drupal-taxonomy

我有很多要导入的分类术语（从德语），我想将它们翻译成法语和英语。

我有一个不错的 php 片段可以使用 google translate api 进行翻译；效果很好。

我正在使用提要导入和提要篡改来执行我的层次结构，但我只能插入当前站点语言。

来自drupal api；在 D7 上我发现了以下钩子：

```
function hook_taxonomy_term_insert($term) {
  if (!empty($term->synonyms)) {
    foreach (explode("\n", str_replace("\r", '', $term->synonyms)) as $synonym) {
      if ($synonym) {
        db_insert('taxonomy_term_synonym')
        ->fields(array(
          'tid' => $term->tid, 
          'name' => rtrim($synonym),
        ))
        ->execute();
      }
    }
  }
} 
```

但我不确定如何在此处添加“创建翻译术语”。

我敢肯定这很容易，但不知道该放在哪里。

谢谢

# c# - .NET 富文本框中的彩色文本

> ID：13007560
> 
> 赞同：2
> 
> 时间：2012-10-22T08:31:21.007
> 
> 标签：c#, .net, vb.net

我有 Rich TextBox 来编辑 XML 文本 我想要如何为 RichTextBox 内的 XML 标签名称着色
我想要红色或绿色的标签名称。
有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:42:24.870

[使用此页面](http://www.regular-expressions.info/)找出您想要的正则表达式。一旦你有了这个，你可以使用类似下面的方法来更新`RichTextBox`

```
public static void HighlightSyntax(RichTextBox richTextBox, Regex yourRegex, Color someColor)
{
    richTextBox.BeginUpdate();
    int selPos = richTextBox.SelectionStart;
    richTextBox.SelectAll();
    richTextBox.SelectionColor = normTextColor;
    richTextBox.Select(selPos, 0);

    // For each match from the regex, highlight the word.
    foreach (Match keyWordMatch in yourRegex.Matches(richTextBox.Text))
    {
        richTextBox.Select(keyWordMatch.Index, keyWordMatch.Length);
        richTextBox.SelectionColor = someColor;
        richTextBox.Select(selPos, 0);
        richTextBox.SelectionColor = normTextColor;
    }
    richTextBox.EndUpdate();
} 
```

您还可以采用计时器在设定的时间后自动更新。

我希望这有帮助。

笔记。对于大型文本文件，这样的方法会很慢！在这种情况下，我将采用 Sinctilla.NET 作为完整的语法荧光笔，如以下答案之一所述...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:36:54.467

有一些文章解释或建议了可能的语法着色方法，例如：[How To Implement Syntax Highlighting In A WinForms Application](http://www.dreamincode.net/forums/topic/57072-syntax-highlight-in-c#/)

我认为最好和最简单的方法是使用[Scintilla.NET](http://scintillanet.codeplex.com/)来处理它，这样你就可以专注于对你来说真正重要的事情，而不是重新发明轮子 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:36:13.983

MSDN 创建了一个简单的 C# 函数，用于格式化 RichTextBox 中的文本内容： [LINK](http://blogs.msdn.com/b/cobold/archive/2011/01/31/xml-highlight-in-richtextbox.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:36:17.073

查看[scintilla](http://www.scintilla.org/)，这是一个很好的 Windows 源代码编辑组件，它也支持语法高亮。并且有一个名为[ScintillaNET](http://scintillanet.codeplex.com/)的 .NET 包装器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T08:36:37.327

使用一个简单的正则表达式找到每个标签的位置（开始和结束）并将其着色，如下所示：

```
richtextbox1.Select(start, end-start);

richtextbox1.SelectionColor = Color.Green;

richtextbox1.Select(start, 0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T08:56:10.220

我认为对于小型语法高亮项目，自己动手吧！已经发布了一些在语法编辑器中突出显示的示例。

[https://stackoverflow.com/a/13007641/1033686](https://stackoverflow.com/a/13007641/1033686)

[https://stackoverflow.com/a/13007710/1033686](https://stackoverflow.com/a/13007710/1033686)

对于需要更好地突出显示的大型项目，请使用 Scintilla.NET（但请注意，它有点重，并且很难开始工作！）

[http://scintillanet.codeplex.com/](http://scintillanet.codeplex.com/)

对于企业项目，请使用诸如 actipro 语法编辑器之类的商业产品。

[http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor?gclid=CI6rrqmglLMCFSfMtAodbE8AhA](http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor?gclid=CI6rrqmglLMCFSfMtAodbE8AhA)

# iphone - Phonegap：如何禁用一个元素的弹跳滚动效果

> ID：13007562
> 
> 赞同：1
> 
> 时间：2012-10-22T08:31:30.317
> 
> 标签：iphone, cordova

我知道有可能在 phonegap 的 config.xml 中禁用整个应用程序的弹跳滚动效果。但是，如果我只想对一个元素禁用此效果，我该怎么办？我想为标题部分禁用它并为应用程序的内容部分启用它。我正在使用 Phonegap + jQuery Mobile 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:41:00.300

我对此不确定，因为我不知道您的 html 结构如何。但是您不想滚动的元素的 div 只需添加：

```
<div style="overflow-y:hidden" ></div> 
```

只需检查一下。

# multithreading - 线程本地存储 GCC 编译器

> ID：13007565
> 
> 赞同：4
> 
> 时间：2012-10-22T08:31:52.440
> 
> 标签：multithreading, gcc, ubuntu

我声明一个变量`__thread int my_id`；我的平台和编译器的信息：

```
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.1-9ubuntu3' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++,go --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3) 
```

我使用标志 -lpthread 进行编译。但编译器抱怨：`error: storage class specified for 'my_id'`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T16:31:56.477

您已经为变量声明了线程本地存储。变量的这种存储方式不能声明为存在于堆栈中。使其成为结构/类的一部分隐式允许它在堆栈上。

实现这一点的唯一有效方法是制作变量`static`——这样做的原因是它导致变量被存储在线程本地存储池中而不是堆栈中。

例如在全球范围内：

```
__thread int my_id; 
```

将起作用，因为变量不在结构中。它可以自动放入线程本地存储池中。

对于结构，如下：

```
struct xx {
    __thread int my_id;
}; 
```

将不起作用，因为变量可以最终在堆栈上，所以你需要使用：

```
struct xx {
    static __thread int my_id;
}; 
```

这导致它被放置在线程本地存储池中，因此是一个有效的线程变量。

*注意*：我之前将变量描述为在堆上。这严格来说是不正确的——变量取自在线程创建时分配的每个线程的内存块；我已将该术语重命名为“线程本地存储”池。此池具有特定于平台的大小，如果您有太多单独的`__thread`变量，可以将其填满。

[Thread Local Storage 上](http://en.wikipedia.org/wiki/Thread-local_storage)的Wikipedia 条目详细解释了这一点（包括一些陷阱）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:04:35.567

您需要将变量声明为静态。

# html - HTML5 拖放复制？

> ID：13007582
> 
> 赞同：37
> 
> 时间：2012-10-22T08:33:24.107
> 
> 标签：html

我已经看到了一些 HTML5 拖放的工作代码，但是有没有人举一个拖放的例子？我想将一个元素拖到一个放置元素上，但只将元素复制到这个位置。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-22T09:04:27.413

我会坚持这里显示的例子：http: [//www.w3schools.com/html/html5_draganddrop.asp](http://www.w3schools.com/html/html5_draganddrop.asp)

*假设我们有这个文件：*

```
<!DOCTYPE HTML>
<html>
 <head>
  <script>
    <!-- script comes in the text below -->
  </script>
 </head>
 <body>

  <div id="div1" ondrop="drop(event)"
  ondragover="allowDrop(event)"></div>

  <img id="drag1" src="img_logo.gif" draggable="true"
  ondragstart="drag(event)" width="336" height="69">

 </body>
</html> 
```

**普通拖放**

普通拖放具有分配给各个元素的此类功能：

```
function allowDrop(ev) {
  /* The default handling is to not allow dropping elements. */
  /* Here we allow it by preventing the default behaviour. */
  ev.preventDefault();
}

function drag(ev) {
  /* Here is specified what should be dragged. */
  /* This data will be dropped at the place where the mouse button is released */
  /* Here, we want to drag the element itself, so we set it's ID. */
  ev.dataTransfer.setData("text/html", ev.target.id);
}

function drop(ev) {
  /* The default handling is not to process a drop action and hand it to the next 
     higher html element in your DOM. */
  /* Here, we prevent the default behaviour in order to process the event within 
     this handler and to stop further propagation of the event. */
  ev.preventDefault();
  /* In the drag event, we set the *variable* (it is not a variable name but a 
     format, please check the reference!) "text/html", now we read it out */
  var data=ev.dataTransfer.getData("text/html");
  /* As we put the ID of the source element into this variable, we can now use 
     this ID to manipulate the dragged element as we wish. */
  /* Let's just move it through the DOM and append it here */
  ev.target.appendChild(document.getElementById(data));
} 
```

**拖动和复制**

而您必须更改 drop 函数，以便它复制 DOM 元素而不是移动它。

```
/* other functions stay the same */

function drop(ev) {
  ev.preventDefault();
  var data=ev.dataTransfer.getData("text/html");
  /* If you use DOM manipulation functions, their default behaviour it not to 
     copy but to alter and move elements. By appending a ".cloneNode(true)", 
     you will not move the original element, but create a copy. */
  var nodeCopy = document.getElementById(data).cloneNode(true);
  nodeCopy.id = "newId"; /* We cannot use the same ID */
  ev.target.appendChild(nodeCopy);
} 
```

试试这个页面：[http](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_draganddrop)
://www.w3schools.com/html/tryit.asp?filename= tryhtml5_draganddrop 然后附加一个`.cloneNode(true)`到`getElementById(data)`.

**在复制和粘贴之间切换**

您甚至可以在文件管理器中执行以下操作：Ctrl-Key 从移动切换到复制：

```
function drop(ev) {
  ev.preventDefault();
  var data=ev.dataTransfer.getData("text/html");
  /* Within a Mouse event you can even check the status of some Keyboard-Buttons
     such as CTRL, ALT, SHIFT. */
  if (ev.ctrlKey)
  {
    var nodeCopy = document.getElementById(data).cloneNode(true);
    nodeCopy.id = "newId"; /* We cannot use the same ID */
    ev.target.appendChild(nodeCopy);
  }
  else
    ev.target.appendChild(document.getElementById(data));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T09:29:30.563

如果您想要一个使用 JQuery 的示例，我提供了[这个 jsFiddle](http://jsfiddle.net/KWut6/73/)。本质上，您只需要绑定到 DOM 对象的`drop`,`dragover`和`dropstart`事件。然后，您可以使用 JQuery 的内置`clone()`方法来复制元素。

JQuery 还返回它自己的事件包装器，因此您必须`originalevent`从 JQuery 事件中获取

```
$('#x').bind('dragstart', function(e) {
    e.originalEvent.dataTransfer.effectAllowed = 'copy';
    e.originalEvent.dataTransfer.setData('Text', '#x');
});

$('#drop-box').bind('drop', function(e) {
    e.preventDefault();
    e.stopPropagation();

    $(this).html($(e.originalEvent.dataTransfer.getData('Text')).clone());

    return false;
}).bind('dragover', false); 
```

# c - 测量程序执行时间的方法

> ID：13007596
> 
> 赞同：0
> 
> 时间：2012-10-22T08:34:14.093
> 
> 标签：c, linux

我有很多用C语言编写的短程序。每个程序都实现了简单的操作，例如：包含库，从文件中加载一些东西（例如矩阵），做简单的操作，将矩阵写入文件末尾。

我想测量整个程序（不仅仅是代码片段）的实时执行时间。

我的简单想法是使用 htop 或 ps aux -> 列时间。但是这种方法不好，因为我没有确切的执行时间，但是在上次刷新期间执行时间，我可以错过这个。

你有什么方法可以测量linux中的进程时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T08:35:56.743

如果您的程序名为 foo，则只需键入

```
~$ time foo 
```

应该做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:14:07.567

除了其他答案，主要建议使用`time`实用程序或 shell 内置：

*   [time(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)是一个非常有用的页面。
*   您可以使用（在您的代码中）[clock(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/clock.3.html)标准函数来获取以微秒为单位的 CPU 时间。
*   时间测量的分辨率和准确性取决于硬件和操作系统内核。您可能更喜欢“实时”内核（例如一个`linux-image-3.2.0-rt`包），或者至少一个配置有 的内核`CONFIG_HZ_1000`）来获得更精确的时间测量。
*   You might also use (inside your code) the [clock_gettime(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_gettime.2.html) syscall (so link also the `-lrt` library).
*   When doing measurements, try to have your measured process run a few seconds at least, and measure it several times (because e.g. of disk cache issues).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T08:38:15.587

如果你使用

```
time <PROGRAM> [ARGS] 
```

这将提供一些基本信息。这应该运行你的 shell 的 time 命令。示例输出：

```
$ time sleep 2
real    0m2.002s
user    0m0.000s
sys     0m0.000s 
```

但也有

```
/usr/bin/time <PROGRAM> [ARGS] 
```

它更灵活，并提供了更多关于时间的诊断信息。这运行一个 GNU 计时程序。[该站点](http://www.thegeekstuff.com/2012/01/time-command-examples/)有一些使用示例。示例输出：

```
$ /usr/bin/time -v sleep 2
Command being timed: "sleep 2"
User time (seconds): 0.00
System time (seconds): 0.00
Percent of CPU this job got: 0%
Elapsed (wall clock) time (h:mm:ss or m:ss): 0:02.00
Average shared text size (kbytes): 0
Average unshared data size (kbytes): 0
Average stack size (kbytes): 0
Average total size (kbytes): 0
Maximum resident set size (kbytes): 2496
Average resident set size (kbytes): 0
Major (requiring I/O) page faults: 0
Minor (reclaiming a frame) page faults: 202
Voluntary context switches: 2
Involuntary context switches: 1
Swaps: 0
File system inputs: 0
File system outputs: 0
Socket messages sent: 0
Socket messages received: 0
Signals delivered: 0
Page size (bytes): 4096
Exit status: 0 
```

# jquery - jQuery slidetoggle 不适用于整页滑块

> ID：13007597
> 
> 赞同：0
> 
> 时间：2012-10-22T08:34:15.650
> 
> 标签：jquery, slider, slidetoggle

我有一个使用整页滑块的页面。顶部面板也使用 jQuery 切换。但是，当使用全页滑块使用 AJAX 为其加载内容时，同样的方法不起作用。网址是[http://goo.gl/o3Ow7](http://goo.gl/o3Ow7)

但是，同样适用于单个幻灯片。见[http://goo.gl/pcfJm](http://goo.gl/pcfJm)

同样，jQuery elastislide 插件在处理单个幻灯片时无法处理最后一张幻灯片。见 goo.gl/UKRMF

谁能告诉我如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:50:48.450

在身体上应用这个类：`single single-slide postid-42`

```
<body class="single single-slide postid-42" style="margin: 0px; padding: 0px; overflow: hidden;">
.....
</body> 
```

您当前的代码是：

```
<body class="home blog" style="margin: 0px; padding: 0px; overflow: hidden;">
.....
</body> 
```

# mysql - 将多个表中的列放入 vb.net 中的 1 个 datagridview

> ID：13007599
> 
> 赞同：0
> 
> 时间：2012-10-22T08:34:23.187
> 
> 标签：mysql, vb.net, winforms, datagridview

我再问一次，因为我是 vb 的新手，我正在使用 Visual Studio 2010 和 mysql 作为我的数据库，我需要帮助从不同的表但相同的数据库中获取不同的列并将其加载到一个 datagridview 中。任何帮助或提示将不胜感激。谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:45:02.203

一种方法是将 a`DataTable`与所有连接列一起用作数据源，您可以使用 a 填充`DataAdapter`：

```
Private Function GetDataSource() As DataTable
    Const sqlSelect As String = "SELECT a.Col1 AS aCol1,a.Col2 AS aCol2,b.Col1 AS bCol1,b.Col2 AS bCol2 " & _
                               "FROM dbo.TableA AS a INNER JOIN dbo.TableB AS b ON a.IdCol=b.aIdCol " & _
                               "ORDER BY aCol1 ASC,bCol1 ASC"
    Try
        Dim table = New DataTable()
        Using con = New MySqlConnection(My.Settings.MySqlConnectionString)
            con.Open()
            Using da = New MySqlDataAdapter(sqlSelect, con)
                da.Fill(table)
                Return table
            End Using
        End Using
    Catch ex As Exception
        ' log message instead '
        Throw ' don't use throw new Exception or throw ex '
    End Try
End Function 
```

现在您可以将其`DataTable`用作以下数据源`DataGridView`：

```
me.dataGridView1.DataSource = GetDataSource() 
```

# snmp - snmptraps 中主机的值

> ID：13007601
> 
> 赞同：0
> 
> 时间：2012-10-22T08:34:29.677
> 
> 标签：snmp, net-snmp, snmptrapd

在执行时

" **snmptrap -v 1 -c 公共本地主机 TRAP-TEST-MIB::demotraps 本地主机 4 0 '' IF-MIB::ifIndex i 1"**

在我的系统上，我将主机、IP 和 OID 值设为

**主机 = localhost.localdomain :ip = UDP: [127.0.0.1]:49109->[127.0.0.1] :OID =DISMAN-EVENT-MIB::sysUpTimeInstance 0:3:12:38.28**

但是当陷阱来自它的展示之外

**主机 = :ip = UDP: [192.168.1.73]:52346->[192.168.1.23]:OID =DISMAN-EVENT-MIB::sysUpTimeInstance 7:1:05:54.27**。

现在它清楚地显示在上面没有显示主机值......我想知道为什么以及如何解决它。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:18:51.547

一个原因是如果您使用的是 VMware/虚拟操作系统，并且您没有配置与主机 IP 不同的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:07:45.807

只需将 ip 及其对应的主机名保存在 /etc/hosts 文件中即可。这就是我的 /etc/hosts 文件中的全部内容 -

```
127.0.0.1     localhost.localdomain localhost
::1       localhost6.localdomain6   localhost6
192.168.1.150    ZYXEL
192.168.1.73   CISCO
192.168.1.135 DIGISOL 
```

# javascript - Datejs 计算一周中的下一个和上一个天

> ID：13007604
> 
> 赞同：1
> 
> 时间：2012-10-22T08:34:42.453
> 
> 标签：javascript, datejs

我使用 datejs，我想获取程序三个按钮，
今天：生成本周的两个日期限制，本周的星期一和星期日下一个：生成
下一周的两个日期限制上
一个：生成上一周的两个日期限制

这是我的代码

```
var currentDay = 0;
(currentDay).days().fromNow().next().saturday().toString("yyyy-M-d");

(currentDay).days().fromNow().prev().monday().toString("yyyy-M-d"); 
```

三个按钮做currentDay + 7；当前日 - 7；当前日 = 0;

问题是
我们是星期一 22，这个函数返回星期一 15；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:56:13.347

我前段时间为此编写了一些代码：

```
Date.prototype.getMonday=function(){return this.getDay()==1 ? this.clone().clearTime() : this.clone().prev().monday().clearTime();};
// This function returns the Monday of current week
var today=new Date();
today.getMonday().toString();
today.getMonday().next().sunday().toString();
// start and end of this week
today.getMonday().prev().monday().toString();
today.getMonday().prev().day().toString();
// previous week
today.getMonday().next().monday().toString();
today().getMonday().next().sunday().sunday().toString();
// next week 
```

愿这些有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:41:24.047

下面的示例`.getWeekRange()`函数接受一个 Date 对象（或默认为 'today'），将计算出该周的星期一，然后返回一个对象，该对象具有一周的`start`and`end`属性。

**例子**

```
var getWeekRange = function (date) {
    var date = date || Date.today(),
        start = date.is().monday() ? date : date.last().monday(),
        end = start.clone().next().sunday();

    return {
        start  : start,
        end : end
    };
}; 
```

然后，您可以使用该函数获取任何给定日期的周范围：

**例子**

```
var range = getWeekRange();

console.log("Start", range.start);
console.log("End", range.end); 
```

要获取前一周，只需传入前一周的 Date 对象：

**例子**

```
var prev = getWeekRange(Date.today().last().week()); 
```

要获取下周，只需传入下周的 Date 对象：

**例子**

```
var next = getWeekRange(Date.today().next().week()); 
```

希望这可以帮助。

# iphone - iOS4.3 UILocalNotification 不支持 [NSCalendar +autoupdatingCurrentCalendar] 作为 repeatCalendar？

> ID：13007605
> 
> 赞同：0
> 
> 时间：2012-10-22T08:34:52.470
> 
> 标签：iphone, ios

当我将 [NSCalendar +autoupdatingCurrentCalendar] 设置为 UILocalNotification 的重复日历，然后使用 UILocalNotification 调用 [UIApplication -scheduleLocalNotification:] 时，本地通知不会被安排！

这是 iOS 4.3 的错误吗？

这是代码：

```
UILocalNotification *l = [[UILocalNotification alloc] init];
l.fireDate = [NSDate dateWithTimeIntervalSinceNow:30];
l.alertBody = [NSString stringWithFormat:@"alert time :%@,time zone %@",l.fireDate,l.timeZone];
l.alertAction = @"OK";
l.hasAction = YES;
l.repeatInterval = NSDayCalendarUnit;
l.repeatCalendar = [NSCalendar autoupdatingCurrentCalendar];
[application scheduleLocalNotification:l];

NSLog("all local notifs: %@", [[UIApplication sharedApplication] scheduledLocalNotifications])   //empty array 
```

# gwt - 使用 GWT 实体代理临时保存更改。实施“应用更改”模式

> ID：13007607
> 
> 赞同：1
> 
> 时间：2012-10-22T08:35:10.033
> 
> 标签：gwt, entity, gwt-celltable

我有一个`CellTable<UserProxy>`. 所以换句话说，它直接管理我的数据库实体的实体代理。有了它，我使用了一个`AsyncDataProvider<UserProxy>`使用请求工厂获取数据的方法。我的列的单元格是`EditTextCell`. 我添加了一个`FieldUpdater<UserProxy, String>`来编辑值。除了这里是我的问题：如果我更新实体的值并立即保存它工作正常，但我不知道如何将保存与稍后单击按钮不同。

基本上，我想实现 Apply-changes 模式（参见： http: [//patterns.holehan.org/Review/ApplyChanges](http://patterns.holehan.org/Review/ApplyChanges)），所以我希望用户能够编辑表中的几个值，一旦他完成了他可以单击“应用”按钮，这将保存所有更改。

所以我的想法是在不调用保存的情况下更改代理实体中的值，然后将所有修改后的实体保存在按钮的点击处理程序中。

但要更改代理实体中的值，我必须先调用 ctx.edit(user) ：

```
nameColumn.setFieldUpdater(new FieldUpdater<UserProxy, String>() {
    @Override
    public void update(int index, UserProxy object, String value) {
        if (!value.equals(object.getName())) {
            UserRequest ur = presenter.getClientFactory().getRequestFactory().getUserRequest();
            ur.edit(object);
            object.setName(value);
            saveButton.setEnabled(true);
        }
    }
}); 
```

这使得之后无法将它们保存在应用按钮的点击处理程序中：

```
private void saveModifications() {
    List<UserProxy> items = cellTable.getVisibleItems();
    for (UserProxy item : items) {
        UserRequest ur = presenter.getClientFactory().getRequestFactory().getUserRequest();
        ur.save(item).fire();
    }
    cellTable.setVisibleRangeAndClearData(cellTable.getVisibleRange(), true);
} 
```

因为调用`save(item)`会抛出这个异常：`java.lang.IllegalArgumentException: Attempting to edit an EntityProxy previously edited by another RequestContext`

如何避免这种情况而不必创建另一个代表同一实体的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:57:41.103

您必须使用所有代理的单个`RequestContext`实例。`edit()`您可以`edit()`多次使用相同的代理，而不会出现错误和开销。

所以：

1.  存储`presenter.getClientFactory().getRequestFactory().getUserrequest()`在某个变量/字段中
2.  在`FieldUpdater`s 中，会将;`ctx.edit(object).setName(value)`中的更改排入队列 `RequestContext`可能也放`UserProxy`一个以`Set`供以后参考
3.  in `saveModifications`，遍历您的代理（可能只有那些来自`Set`步骤 2 的代理）`ctx.save(item)`，然后在循环结束时`ctx.fire()`

# mysql - MySQL 错误 - 未使用的主键值返回已使用

> ID：13007615
> 
> 赞同：0
> 
> 时间：2012-10-22T08:35:39.193
> 
> 标签：mysql

MySQL MyISAM 数据库目前在一个表中有 2,280 行，在过去 6 个月左右的时间里被锁定了两次。

当尝试添加新行时，它会显示“已使用主键”，而下一个增量值高于表中的最后一个 id。当我重置自动增量时，似乎可以自行修复。

数据库适用于每天获得约 200 次点击的网站，峰值约为每小时 25-20 次，因此无法想象这是由于数据库过载。

试图弄清楚为什么这种情况不断发生，以及我是否可以解决这个问题，这样客户就不必在无法向他们的网站添加新文章时继续打电话。

编辑：为了抢占潜在的评论，我意识到表格和代码并不理想，但我并没有寻找应该改进它的方法，除非它是问题的根本原因，我可以忍受的性能/安全性差（只是），但我确实需要弄清楚是什么导致它锁定表。谢谢。

表定义

```
CREATE TABLE `articles` (
  `article_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `article_meta_desc` text,
  `article_meta_keyw` text,
  `article_title` varchar(255) DEFAULT NULL,
  `article_date` int(10) unsigned DEFAULT NULL,
  `article_intro` text,
  `article_embed` text,
  `article_content` text,
  `article_sector` varchar(255) DEFAULT NULL,
  `article_type` varchar(255) DEFAULT NULL,
  `article_ma` tinyint(1) unsigned DEFAULT NULL,
  `article_pn` tinyint(1) unsigned DEFAULT NULL,
  `article_cw` tinyint(1) unsigned DEFAULT NULL,
  `article_er` tinyint(1) unsigned DEFAULT NULL,
  `article_kr` tinyint(1) unsigned DEFAULT NULL,
  `article_rc` tinyint(1) unsigned DEFAULT NULL,
  `article_rs` tinyint(1) DEFAULT NULL,
  `article_img_s` varchar(255) DEFAULT NULL,
  `article_img_l` varchar(255) DEFAULT NULL,
  `article_link` varchar(255) DEFAULT NULL,
  `article_highlight` int(10) unsigned DEFAULT NULL,
  `article_slug` text,
  `article_alias` text,
  `article_hide` smallint(1) unsigned NOT NULL DEFAULT '0',
  `article_ad_layout` tinyint(1) unsigned DEFAULT '0',
  `article_ad_banner` smallint(5) unsigned DEFAULT NULL,
  `article_ad_sky` smallint(5) unsigned DEFAULT NULL,
  `article_ad_square1` smallint(5) unsigned DEFAULT NULL,
  `article_ad_square2` smallint(5) unsigned DEFAULT NULL,
  `article_ad_square3` smallint(5) unsigned DEFAULT NULL,
  `article_newswire` smallint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`article_id`),
  FULLTEXT KEY `full_text` (`article_title`,`article_intro`,`article_content`)
) ENGINE=MyISAM AUTO_INCREMENT=2384 DEFAULT CHARSET=latin1 CHECKSUM=1 DELAY_KEY_WRITE=1 ROW_FORMAT=DYNAMIC; 
```

_ma,_pn,_cw,_er,_kr,_rc,_rs 用于显示文章的类别。请忽略对广告和部分的表格的不良使用，网站是很久以前制作的，因为：p

插入语句

```
INSERT INTO articles (article_id, article_meta_desc, article_meta_keyw, article_title, article_date, article_intro, article_embed, article_content, article_sector, article_type, article_ma, article_pn, article_cw, article_er, article_kr, article_rc, article_rs, article_img_s, article_img_l, article_link, article_highlight, article_slug, article_alias, article_hide)
VALUES ('','$insert_article_meta_desc','$insert_article_meta_keyw','$insert_article_title','$insert_article_date','$insert_article_intro','$insert_article_embed','$insert_article_content','$insert_article_sector','$insert_article_category','$insert_article_ma','$insert_article_pn','$insert_article_cw','$insert_article_er','$insert_article_kr','$insert_article_rc','$insert_article_rs','$insert_article_img_s','$insert_article_img_l','','$insert_article_highlight','$insert_article_slug','','$insert_article_hide') 
```

再次，旧网站，请原谅我。不确定是否与执行将 id 设置为 '' 的插入有关，然后将其设置为下一个增量值，这会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:17:46.940

尝试从 INSERT stmt 中取出 article_id 字段名称和值中的第一个 ''；自动增量 ID 应自动分配。

# facebook-graph-api - “附件布局”的动作简直是无视！为什么？

> ID：13007618
> 
> 赞同：1
> 
> 时间：2012-10-22T08:35:49.147
> 
> 标签：facebook-graph-api, action

我发布了一个 OG 操作/对象，但操作的附件布局（已设置为“项目”）被简单地忽略了。在我的时间轴上，我单击日期/时间链接以查看操作的完整详细信息（以及附件）......但我看到的只是一个框，中间是对象图像，底部是对象标题：

```
------------------
| |
| |
| 图片 |
| |
| |
------------------
| 对象标题 |
------------------

```

相反，我希望在左侧看到一个较小的图像以及右侧的标题和其他标题（如“项目”布局预览显示的内容）：

```
-----------------------------------------
| | 对象标题 |
| | 标题 1 |
| 图片 | 标题 2 |
| | 标题 3 |
| | 标题 4 |
-----------------------------------------

```

我的网站上托管的对象页面的 OG 标签是正确的（至少 Facebook OG 调试器是这样说的！）。

有谁知道我在这里想念什么？

谢谢，

# javascript - 将 YouTube 视频发布到 Facebook 活动墙

> ID：13007621
> 
> 赞同：1
> 
> 时间：2012-10-22T08:35:59.163
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我尝试使用 Graph API 将 YouTube 视频直接发布到 Facebook 事件墙上。

当发布到粉丝专页墙时，我得到了想要的结果（发布带有预览图片和视频本身），但是当发布到活动墙时，我只收到消息，没有任何视频和预览图片。

这是代码：

```
var eventObj =
{
    source:'http://www.youtube.com/v/'+youTubeID,
    picture:'http://img.youtube.com/vi/'+youTubeID+'/0.jpg',
    message: messageText,
    name: eventName,
    caption: newDateArray[0] + ' ' + newDateArray[1].substr(0, 5)
}; 

FB.api('/'+facebookEventID+'/feed', 'post', eventObj, function(response){

//response code...

} 
```

执行此代码后，我在 Event Wall 中获得了一个新帖子，仅`messageText`显示了该帖子。我试过只发送`source`，但它返回一个带有消息的错误对象，它无法创建没有消息的帖子，所以我尝试发送两者`source`并`message`得到相同的结果：只显示消息。

**根据答案更新：**

我试过使用你的代码和你的权限，结果是一样的：

我只得到文字：

![在此处输入图像描述](../Images/94107d67b30706e0e91a21147a74ad3a.png)

也许是因为我作为 FanPage 发布？你知道如何解决它吗？

**更新 #2 基于答案：**

似乎出于某种原因，从 Facebook 内部创建的事件具有更新版本的帖子 UI，然后是使用 Graph API 从应用程序创建的事件。

这是来自 Facebook 中创建的事件： ![在此处输入图像描述](../Images/680abc66a1f2ce745fc2e365769c77d7.png)

这是来自使用 Graph API 创建的事件： ![在此处输入图像描述](../Images/5d1d9f552600649396a0a5fc54add367.png)

您可以看到第二个是旧版本，我猜这种差异也导致了将 YouTube 链接上传到由 Graph API 创建的事件的问题，因为我成功地将 YouTube 链接从 API 上传到我从内部创建的事件Facebook。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:38:37.200

真的吗？我能够使用我的测试应用发布活动的 YouTube 链接：

```
function post() {
  var eid = 508688182476978;  // Event id.                                                                 
  FB.api(
    '/' + eid + '/feed',
    'post',
    {
      message: 'Testing SDK',
      source: 'http://www.youtube.com/v/kohozJp9dNs',
      picture: 'http://img.youtube.com/vi/kohozJp9dNs/0.jpg',
      caption: 'beach video (caption)'
    },
    function(response) {
      if (!response || response.error) {
        console.log(response);
        alert('Error occured');
      } else {
        alert('Post was successful! Action ID: ' + response.id);
      }
    }
  );
} 
```

...并显示视频的图片预览和标题：

![活动上的 youtube 链接](../Images/df13020208c56cfa349be14decfb16bc.png)

...用这些烫发

```
publish_actions,read_stream,user_events,publish_stream 
```

我不需要`name`像您的示例中那样的参数。

## 通过 API 创建的事件

如果您使用 API 创建事件（而不是使用 Web 浏览器创建事件），请尝试启用“事件时区”迁移：

[应用仪表板](https://developers.facebook.com/apps)> 高级 > 迁移 > 事件时区 > 启用

另请参阅该迁移的公告：[https ://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)

为您的应用启用事件时区迁移后，使用 api 创建一个新事件，然后尝试在`function post()`.

# c# - iis 网站移动到新目录并且连接被禁用

> ID：13007622
> 
> 赞同：0
> 
> 时间：2012-10-22T08:36:00.720
> 
> 标签：c#, asp.net, iis

我是 asp.net 和 IIS 的新手，我正在开发一个使用 asp.net 进行学习的网站。首先，我使用 vwd 创建了一个新的空白网站，物理目录是 C:\inetpub\web1，但后来我将 web1 移动到 C:\inetpub\wwwroot 并打开 IIS 并将目录转到应用程序并尝试使用浏览器出现错误信息，

```
Server Error in '/web1' Application.

Cannot open database "testdb" requested by the login. The login failed.
Login failed for user 'IIS APPPOOL\DefaultAppPool'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Cannot open database "testdb" requested by the login. The login failed.
Login failed for user 'IIS APPPOOL\DefaultAppPool'.

Source Error: 

Line 34: 
Line 35:         SqlConnection dbCon = new SqlConnection(ConfigurationManager.ConnectionStrings["testConnectionString"].ConnectionString);
Line 36:         dbCon.Open();
Line 37: 

Source File: c:\inetpub\wwwroot\web1\App_Code\tree.cs    Line: 36 

Stack Trace: 

[SqlException (0x80131904): Cannot open database "test" requested by the login. The login failed.
Login failed for user 'IIS APPPOOL\DefaultAppPool'.]
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1270
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   Node.buildTree(String contentType, String mode) in c:\inetpub\wwwroot\web1\App_Code\tree.cs:36
   header.Page_Load(Object sender, EventArgs e) in c:\inetpub\wwwroot\web1\header.aspx.cs:14
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

有谁知道是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:38:44.777

这个错误对我来说很清楚：

> 用户 'IIS APPPOOL\DefaultAppPool' 登录失败，位于`DbConnectionPool.GetConnection`。

我想该站点以前位于由 运行的应用程序池中`NT AUTHORITY\NETWORK SERVICE`，并且该用户使用集成安全性获得了您要使用的数据库的权限。

如果是这种情况，只需更改运行应用程序池的用户即可。

# google-search-api - 谷歌新闻的谷歌自定义搜索引擎

> ID：13007624
> 
> 赞同：7
> 
> 时间：2012-10-22T08:36:12.473
> 
> 标签：google-search-api, google-news

我正在尝试使用 Google 自定义搜索引擎 API 来查询 Google 新闻。API 在其他方面工作得很好 - 但我想获得新闻结果而不是网络结果。

我找不到限制 CSE 使用 Google 新闻或确保我的 API 查询命中 Google 新闻而不是网络搜索的方法。有谁知道实现这一目标的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-16T22:25:56.637

您可以使用 Schema.org 中的模式来指定您是否只是在寻找文章/博客文章。

要指定架构，请转到[控制面板上的高级设置，然后从](https://cse.google.com/cse/create/new)[此处](http://schema.org/docs/full.html)选择所需的架构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T08:39:40.917

有一个新闻搜索 API，但它**已被弃用**：

> 重要提示：Google 新闻搜索 API 已于 2011 年 5 月 26 日正式弃用。根据我们的弃用政策，它将继续工作，但您每天可以提出的请求数量可能会受到限制。

[https://developers.google.com/news-search/](https://developers.google.com/news-search/)

[您可以在此问题](https://stackoverflow.com/questions/7806200/what-to-use-now-google-news-api-is-deprecated)上看到一些 SO 用户推荐的替代方案。

# javascript - 使用 LogAxisRenderer 更改轴比例

> ID：13007631
> 
> 赞同：5
> 
> 时间：2012-10-22T08:36:26.977
> 
> 标签：javascript, web-applications, formatting, plot, jqplot

我使用[logAxisRenderer](http://www.jqplot.com/)使用[jqPlot](http://www.jqplot.com/docs/files/plugins/jqplot-logAxisRenderer-js.html)绘制数据以具有两个对数轴。

一切都很好，除了两个问题：

1.  jqPlot 在 0 和 1 之间创建了很多空白空间。

2.  x 轴上有两个零，因为我将数字格式化为“%'i”（一个用于 0.0，一个用于 0.5）。

我尝试使用 min:1 和 max:100000 来隐藏空白空间和零。但这没有用。结果图没有线，并且所有 x 轴标签都位于轴左侧的同一位置。

这是我用来创建此图的代码：

```
$.jqplot(divId, [ line ], {
    title : title,
    series:[{showMarker:false}],
    axes : {
        xaxis : {
            label:'Users',
            renderer : $.jqplot.LogAxisRenderer,
            tickOptions:{
                tickDistribution: "power",
                formatString: "%'i"
            },
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        },
        yaxis : {
            label:'Frequency',
            renderer : $.jqplot.LogAxisRenderer,
            tickOptions:{
                tickDistribution:"power",
                formatString: "%'i"
            },
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        },
    },
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:27:52.267

您可以使用强制刻度来解决此问题：

```
$.jqplot(divId, [ line ], {
    title : title,
    series:[{showMarker:false}],
    axes : {
        xaxis : {
            label:'Users',
            renderer : $.jqplot.LogAxisRenderer,
            ticks: [1, 10, 100, 1000, 10000],
            tickOptions:{
                tickDistribution: "power",
                formatString: "%'i"
            },
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
        },
        // ...
    },
}); 
```

这并不能以一般的方式真正解决您的问题，但确实有帮助。对我来说（jqPlot 1.0.4r1121）设置“min：1”会导致您描述的行为。设置“min：1”和“max：10000”对我有用，但不设置功率分布的刻度，甚至是间隔的刻度。

# python - 是否可以将多个参数传递给 multiprocessing.pool？

> ID：13007634
> 
> 赞同：1
> 
> 时间：2012-10-22T08:36:34.047
> 
> 标签：python, multiprocessing

> **可能重复：**
> [用于多个参数的 Python 多处理 pool.map](https://stackoverflow.com/questions/5442910/python-multiprocessing-pool-map-for-multiple-arguments)

我想为 multiprocessing.Pool 中的子进程提供两个参数？我觉得我在上坡。是否有可能作为 2 个 args 或一个元组，或者...... 对于某些人来说，它似乎工作正常，正确地传递了两个文件名（输入和输出），但随后在变量点意外地出现了错误。遗憾的是，它并没有真正起作用，因为输出文件都是空的——如果我直接调用它，或者单独处理，这不会发生。还有另一个复杂的因素，被调用的例程在另一个导入的模块中。将其本地化为“foo”存根模块确实可以解决问题，但它只打印参数，而不是尝试做任何实际工作。

对于顽固地抵制学习如何使用队列来说，这可能是一个很长的路要走，但我只想确认我不会在我所走的道路上取得任何进展。

```
fixtures/txt_data/AAD.txt obj/txt_data/AAD.txt
fixtures/txt_data/ANZSMW.txt obj/txt_data/ANZSMW.txt
fixtures/txt_data/BENPA.txt obj/txt_data/BENPA.txt
fixtures/txt_data/CBAIZQ.txt obj/txt_data/CBAIZQ.txt
Traceback (most recent call last):
  File "./jobflow.py", line 60, in <module>
    main()
  File "./jobflow.py", line 57, in main
    args.func(args)
  File "./jobflow.py", line 40, in market
    pool.map(foo, market_files())
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/pool.py", line 225, in map
  return self.map_async(func, iterable, chunksize).get()
File     "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/pool.py", line 522, in get
raise self._value
TypeError: function takes exactly 1 argument (2 given)
fixtures/txt_data/CSDO.txt obj/txt_data/CSDO.txt
fixtures/txt_data/EMB.txt obj/txt_data/EMB.txt
fixtures/txt_data/GGG.txt obj/txt_data/GGG.txt
fixtures/txt_data/IDL.txt obj/txt_data/IDL.txt 
```

那是一个错误样本。它在文件用尽之前停止。它或者抱怨它想要 2 个 args 但当我更改它以尝试传递两个 args 时只得到 1 个：

```
def foo(c):
    a, b, = c
    print a, b
    market2.file_main((a, b))  # does comment/uncommenting this break it only because it's in another python file?

def market(args):
    """
    read raw ticker data files and output nice, clean, more valid ticker data files
    """
    pool = multiprocessing.Pool()

    class market_files(object):
        for infile in args.infiles:
            outfile = os.path.join(args.outdir, os.path.basename(infile))
            yield (infile, outfile)

    pool.map(foo, market_files()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T09:48:57.743

哦，等等，它确实有效，但不是通过直接传递多个参数，而是将它们放入一个元组中。

我通过在每次迭代中产生一个新的`Process`和`p.start()`生成一个荒谬的进程来实现它;-) 但确实吞下了多个参数。

从那里开始工作，我将可迭代对象简化为一个列表（现在我已经计算出一个可迭代对象可能没问题），但我认为主要是将 args 作为元组传递。一定是在剪辑室地板上弄得一团糟的情况之一，无法看到有效的解决方案。

所以在控制器中我有：

```
 # Create a list of filenames.
    arglist = []
    for infile in args.infiles:
        outfile = os.path.join(args.outdir, os.path.basename(infile))
        arglist.append((infile, outfile))

    # Pass each process one filename to work on.
    pool = multiprocessing.Pool()
    p = pool.map(func=market2.process, iterable=arglist) 
```

在模块中：

```
 def process(x):
        # Open an input file, and output file, and do work.
        infile, outfile = x
        instream = open(infile, 'rB')
        outstream = open(outfile, 'wB')
        main(instream, outstream)
        instream.close()
        outstream.close() 
```

4核性能（分钟）：

*   单线程 = 3:54
*   使用 subprocess = 4:52 （我认为默认情况下它会阻塞，这样就可以了）
*   同时使用 squillions `Process`= 2:41（每个进程使用 1-4%cpu 饱和所有内核）
*   使用池 = 2:13

# android - 是否有适用于 Android 的滚动条组件？

> ID：13007639
> 
> 赞同：1
> 
> 时间：2012-10-22T08:36:49.630
> 
> 标签：android, scroller

我只是想知道是否有人知道类似以下内容的好参考：

![图像滚动条](../Images/59b252f3c56b808fea81e34dd9e7883d.png)

但是对于安卓。

还是我需要自己实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:41:16.790

您可能需要检查[http://developer.android.com/reference/android/widget/Gallery.html](http://developer.android.com/reference/android/widget/Gallery.html)，对其进行自定义并为项目实现自定义视图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:43:43.383

这是一个类似的例子..但更漂亮 [http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)

# git - git rebase -ia 分支到自身

> ID：13007648
> 
> 赞同：23
> 
> 时间：2012-10-22T08:37:29.443
> 
> 标签：git, git-interactive-rebase

我的回购中有以下内容

```
Master---
     \
       Next-->Commit A.1,Commit A.2,Commit A.3 --...... 
```

我想将 A.* 提交修复为一个描述功能 A 的提交。我试过了`git rebase -i origin next`，但这并没有达到我的预期。有没有办法做到这一点？

我想创建一个分支 foo，它本质上是 next，然后 rebase next 到 foo，然后是合并/删除 foo。然而，这似乎是草率的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-22T08:49:20.363

你只需要这样做：

```
git rebase -i <COMMIT-ISH> 
```

...在哪里引用图表中`<COMMIT-ISH>`标记的提交的某种方式。`Master`如果有一个分支指向那个点（可能是`master`or `origin/master`），那么`git log --decorate`就会显示出来。

# oracle - 如何在 oracle 中向对象类型列添加更多行

> ID：13007651
> 
> 赞同：4
> 
> 时间：2012-10-22T08:37:51.567
> 
> 标签：oracle, object, oracle11g

```
CREATE OR REPLACE TYPE excep_type
AS
   OBJECT (overridden_attribute VARCHAR2 (30), exception_id NUMBER);

CREATE TABLE obj_test (id     NUMBER, obj_col excep_type);

INSERT INTO obj_test
  VALUES   (1, excep_type ('x', 1));

 SELECT   * FROM obj_test;

 ID   OBJ_COL
 --------------
 1     (X,1) 
```

这对我来说很好，但假设我想向这个对象类型列 obj_col 添加更多记录，那么需要做什么。

假设还有一条记录 Y,2 需要插入到 ID 1 的列 obj_col 中，那么需要执行什么语句。 *预期输出*

```
ID   OBJ_COL
--------------
1     (X,1)
      (Y,2) 
```

如果我想更新现有的 LIKE X,1 是从 Z,3 更新的，那么需要做什么。*预期产出*

```
ID   OBJ_COL
--------------
1     (Z,3) 
```

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:20:28.903

为此，您需要使用嵌套表。这是一个例子：

```
create or replace type excep_type as object 
(
  overridden_attribute varchar2 (30), 
  exception_id number
)
/

create or replace type t_excep_type as table of excep_type
/

create table nst_table
(
  id  number,
  exp t_excep_type
) nested table exp store as nst_exp -- name of the nested table
/

-- inserting of record in the base table

SQL> insert into nst_table(id, exp)
  2    values(1, t_excep_type(excep_type('X', 1)));

1 row inserted

SQL> commit;

Commit complete

 SQL> select * from nst_table t, table(t.exp);

    ID EXP OVERRIDDEN_ATTRIBUTE           EXCEPTION_ID
   --------------------------------------------- ------------
     1 <Ob X                               1   

 -- inserting of record in the nested table

SQL> insert into table(select exp from nst_table where id = 1)
  2    values (excep_type('Y', '2'))
  3  ;

1 row inserted

SQL> commit;

Commit complete

-- unnesting.

SQL> select * from nst_table t, table(t.exp);

        ID EXP OVERRIDDEN_ATTRIBUTE           EXCEPTION_ID
---------- --- ------------------------------ ------------
         1 <Ob X                              1
         1 <Ob Y                              2

 -- updating of data in the nested table

 SQL> update table(select exp from nst_table where id = 1)
   2     set overridden_attribute = 'Z', exception_id = 3
   3   where exception_id = 1 and overridden_attribute = 'X';

 1 row updated

 SQL> select * from nst_table t, table(t.exp);

    ID EXP OVERRIDDEN_ATTRIBUTE           EXCEPTION_ID
   ---------- --- -------------------------------------------
     1 <Ob Z                              3  
     1 <Ob Y                              2 
```

但是这种存储数据以实现主从关系的方法并不是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:12:12.130

尝试：

```
CREATE OR REPLACE TYPE excep_type AS    OBJECT (overridden_attribute VARCHAR2 (30), exception_id NUMBER);  
CREATE OR REPLACE TYPE excep_type_List AS TABLE OF excep_type;
CREATE TABLE obj_test (id     NUMBER, obj_col excep_type_List)
NESTED TABLE obj_col store as obj_col_tab; 

insert into obj_test(id, obj_col) values(1, excep_type_List(
new excep_type('X',1),
new excep_type('Y',2)
)); 
```

# php - .dev TLD & localhost/example 的通用 htaccess 与 PHP 路由

> ID：13007656
> 
> 赞同：1
> 
> 时间：2012-10-22T08:38:25.373
> 
> 标签：php, apache, .htaccess, routing

我最近在本地机器上为我的开发工作设置了一个 .dev TLD。但一直使用 localhost/example 进行我的开发。因为我使用“http://my.ip/example”来展示和测试不同机器上的工作，所以我很想继续让它正常工作。

现在我遇到了以下问题：

example.dev 指向 localhost/example，它工作正常。尽管我的 htaccess 似乎需要 1 个差异才能使其正常工作。

```
RewriteRule ^(.+)$ /index.php/$1 [L,QSA] 
```

适用于 .dev TLD。尽管

```
RewriteRule ^(.+)$ index.php/$1 [L,QSA] 
```

（注意 index.php 之前缺少的斜杠）需要保持它在 localhost/example 上工作（因为前面的 / 使它看起来在 localhost 中）。

有没有人知道如何使我的 .htaccess 或脚本足够通用，以便在这两种情况下都能正常工作？

**更新**：完整的 htaccess

```
Options +FollowSymLinks
IndexIgnore */*

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ /index.php/$1 [L,QSA] 
```

**更新 2**：来自 Apache 的错误日志。

```
[Mon Oct 22 12:50:46 2012] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:47:42.767

```
RewriteRule ^(.+)$ index.php/$1 [L,QSA] 
```

应该可以在 under`/`和 under 下正常工作`/example/`，尽管我不确定你的规则之前是如何循环的。你需要类似的东西：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php/$1 [L,QSA] 
```

或者

```
RewriteCond %{REQUEST_URI} !index.php
RewriteRule ^(.+)$ index.php/$1 [L,QSA] 
```

# php - PHP OOP 性能：参数还是实例变量？

> ID：13007658
> 
> 赞同：1
> 
> 时间：2012-10-22T08:38:42.313
> 
> 标签：php, performance, oop, parameters, instance-variables

我很好奇获得 OOP 问题的答案，但到目前为止找不到任何信息。

在这里，编写类和方法是为每个方法传递参数或使用实例/字段变量和 $this->x 更快；

哪个在运行时更快？

```
class ExampleByParameter(){

 function SomeMethod($a,$b){
 echo $a." ".$b;
 return;
 }

} 
```

或者

```
class ExampleByInstance(){

 function __construct($a,$b){
 $this->a=$a;
 $this->b=$b;
 }

 function SomeMehtod(){
 $a=$this->a;
 $b=$this->b;
 echo $a." ".$b;
 return;
 }

} 
```

我想他们与上面的例子没有区别，但我认为更复杂的代码可能会有很大的不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T08:42:55.773

性能差异可以忽略不计。你真的应该决定哪种模式最适合你的班级结构。

您的班级是否依赖`$a`并`$b`正常运行？将它们放在构造函数中。

是`SomeMethod`公开的吗？除了返回的变量之外，它是否对提供的变量做任何事情？如果是这样，请将它们保留为参数。

在大型项目中，您将从准确的类设计中获得更多收益，而不是微不足道的性能改进。

# android - 如何从 AChartEngine GraphicalView 绘制位图

> ID：13007665
> 
> 赞同：1
> 
> 时间：2012-10-22T08:39:17.197
> 
> 标签：android, canvas, achartengine, ondraw

我有一个应用程序可以从距离传感器实时接收消息，我想用接收到的值更新图表。我决定使用`GraphicalView`图书馆中的一个`AChartEngine`。我想在`Graphicalview`每次收到消息时更新，然后`BitMap`使用`toBitmap()`函数将其转换为 a，然后在画布上绘制位图。

我正在尝试查看是否可以执行此操作（因此我还没有使用消息，而只是尝试从图形视图中绘制位图）但是当我运行我的代码时，我得到了一个`Nullpointer exception`. 这是我的代码：

```
public class DrawChartView extends View {
Paint paint = new Paint();
Rect rect = new Rect(130, 130, 80, 80);
Context context;
XYSeries currentDataset = new XYSeries("range data series");
XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
XYSeriesRenderer currentRenderer = new XYSeriesRenderer();
XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
LineChart lc;
GraphicalView gv;
Bitmap bm;

public DrawChartView(Context context_) {
    super(context_);
    context = context_;
    //imposto i parametri del renderer
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setBackgroundColor(Color.argb(100, 50, 50, 50));
    mRenderer.setAxisTitleTextSize(16);
    mRenderer.setChartTitleTextSize(20);
    mRenderer.setLabelsTextSize(15);
    mRenderer.setLegendTextSize(15);
    mRenderer.setMargins(new int[] { 20, 30, 15, 0 });
    mRenderer.setZoomButtonsVisible(true);
    mRenderer.setPointSize(10);
    mRenderer.addSeriesRenderer(currentRenderer);
    //imposto il dataset
    currentDataset.add(1,1);
    currentDataset.add(2,2);
    currentDataset.add(3,3);
    mDataset.addSeries(currentDataset);
    //inizializzo il line chart
    lc = new LineChart(mDataset, mRenderer);
    //inizializzo la grahical view
    gv = new GraphicalView(context, lc);
    bm=gv.toBitmap();
}

public DrawChartView(Context context_, AttributeSet attrs) {
    super(context_, attrs);
    // TODO Auto-generated constructor stub
}

public DrawChartView(Context context_, AttributeSet attrs, int defStyle) {
    super(context_, attrs, defStyle);
    // TODO Auto-generated constructor stub
}
@Override
public void onDraw(Canvas canvas) {
    paint.setColor(Color.BLACK);
    paint.setStrokeWidth(3);
    //canvas.drawRect(rect, paint);
   // canvas.drawBitmap(bm,new Rect(0,0,100,100),rect,null);

}

public void setRect(int h, int b)
{
    rect.set(130,130,30+b,30+h);

}

public void setChart(XYSeries xys)
{
    mDataset.addSeries(xys);
    lc = new LineChart(mDataset, mRenderer);
    gv= new GraphicalView(context, lc);
    bm = gv.toBitmap();

} 
```

活动：

```
public class FragActivity extends Activity {

    Canvas canvas = new Canvas();   
    XYSeries currentSeries = new XYSeries("range data series1");
    DrawChartView dcv/* = new DrawChartView(this)*/;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_frag);

        dcv = (DrawChartView)findViewById(R.id.SurfaceView01);
        dcv.onDraw(canvas);
        currentSeries.add(11, 11);
        dcv.setChart(currentSeries);
        dcv.onDraw(canvas);
    }

    } 
```

和布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<com.cami.robot_chooser.DrawChartView 
    android:id="@+id/SurfaceView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

<TextView
    android:id="@+id/show_message1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    android:layout_weight="1"
    />

</LinearLayout> 
```

您能帮助找出问题所在以及如何解决问题吗？

LogCat 说：

```
 10-22 12:52:06.115: I/Choreographer(3061): Skipped 71 frames!  The application may be doing too much work on its main thread.
10-22 12:52:06.155: D/gralloc_goldfish(3061): Emulator without GPU emulation detected.
10-22 12:52:08.406: I/Choreographer(3061): Skipped 34 frames!  The application may be doing too much work on its main thread.
10-22 12:52:08.581: D/AndroidRuntime(3061): Shutting down VM
10-22 12:52:08.581: W/dalvikvm(3061): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-22 12:52:08.675: E/AndroidRuntime(3061): FATAL EXCEPTION: main
10-22 12:52:08.675: E/AndroidRuntime(3061): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.cami.robot_chooser/com.cami.robot_chooser.FragActivity}: java.lang.NullPointerException
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.os.Looper.loop(Looper.java:137)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at java.lang.reflect.Method.invokeNative(Native Method)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at java.lang.reflect.Method.invoke(Method.java:511)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at dalvik.system.NativeStart.main(Native Method)
10-22 12:52:08.675: E/AndroidRuntime(3061): Caused by: java.lang.NullPointerException
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.view.View.<init>(View.java:3228)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at com.cami.robot_chooser.DrawChartView.<init>(DrawChartView.java:36)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at com.cami.robot_chooser.FragActivity.<init>(FragActivity.java:41)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at java.lang.Class.newInstanceImpl(Native Method)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at java.lang.Class.newInstance(Class.java:1319)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-22 12:52:08.675: E/AndroidRuntime(3061):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-22 12:52:08.675: E/AndroidRuntime(3061):     ... 11 more
10-22 12:52:13.545: I/Process(3061): Sending signal. PID: 3061 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T19:35:07.553

我在 aChartEngine 图表返回空位图时遇到了类似的问题。这个地方有各种建议的解决方案，但没有一个对我有用（他们在尝试测量必要位图的大小时都失败了）。出于我的目的，位图需要是固定大小的，并且以下代码可以很好地工作：

```
private Bitmap bitmapFromChartView(View v, int width, int height) {
Bitmap b = Bitmap.createBitmap(width,
        height, Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(b);
v.layout(0, 0, width, height);
v.draw(c);
return b;
} 
```

然后，您可以使用以下方式调用它：

```
Bitmap x = bitmapFromChartView(myGraphicalViewObject, 500, 500); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:10:22.547

首先，请确保您已添加将文件保存在`AndroidManifest.xml`.

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果你有这个，但它仍然不起作用，那么请在[此处](http://code.google.com/p/achartengine/issues/detail?id=115)和[此处查看](http://code.google.com/p/achartengine/issues/detail?id=98)围绕此主题的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:42:37.943

我也遇到了同样的问题。显然，renderer.setZoomButtonsVisible(bool) 方法的实现存在问题。

将此值设置为 FALSE，希望这将在某种程度上解决您的问题....。您仍然需要弄清楚您将如何进行缩放 --- 但至少应用程序可以运行。:)

# ios - IOS自定义UINavigationItem leftBarButtonItem热点范围太大

> ID：13007666
> 
> 赞同：3
> 
> 时间：2012-10-22T08:39:19.507
> 
> 标签：ios, button, user-interface, action, uibarbuttonitem

`iOS`自定义`UINavigationItem leftBarButtonItem`热点范围太大

```
UIButton *modalViewButton = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage* imagex = [UIImage imageNamed:@"btn_backX1.png"];
[modalViewButton addTarget:self
                    action:@selector(backAction:)
          forControlEvents:UIControlEventTouchUpInside];
[modalViewButton setImage:[UIImage imageNamed:@"btn_backX1.png"] forState:UIControlStateNormal];
//image size is 35X34
[modalViewButton setFrame:CGRectMake(0, 0, imagex.size.width, imagex.size.height)];
UIBarButtonItem *modalBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:modalViewButton];
self.navigationItem.leftBarButtonItem = modalBarButtonItem;
[modalBarButtonItem release]; 
```

当我单击`UIView`左上角下`UINavigationBar`的`leftBarButtonItem` 时，将执行此操作。如果我点击中间`UINavigationBar`，`leftBarButtonItem`动作也是如此。如何修改热点范围以使其更小？

# ios - ChildBrowser 调整主视图的大小

> ID：13007667
> 
> 赞同：1
> 
> 时间：2012-10-22T08:39:34.230
> 
> 标签：ios, cordova, childbrowser

我有一个带有 ChildBrowser 插件的 Cordova 2.1.0 项目。现在，当我关闭 ChildBrowser 时，我的键盘和选择菜单位于屏幕下方，仅显示下一个/上一个/完成按钮。有谁知道如何解决这个问题？看到有人说要加

```
self.view.frame = [[UIScreen mainScreen] applicationFrame]; 
```

然而这并没有做到`viewWillAppear`。`mainviewController`

已经看过[https://github.com/phonegap/phonegap-plugins/issues/815](https://github.com/phonegap/phonegap-plugins/issues/815)但是那里没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T11:05:00.060

下面的代码对我有用：

```
[theWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:
  @"document.querySelector('meta[name=viewport]').setAttribute('content', 'width=%d;', false); ", (int)theWebView.frame.size.width]];
[theWebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:
  @"document.querySelector('meta[name=viewport]').setAttribute('content', 'height=%d;', false); ", (int)theWebView.frame.size.height]]; 
```

在 webVieDidFinishLoad 中。对我来说工作得很好:)

参考：[https ://stackoverflow.com/a/6104537/1000985](https://stackoverflow.com/a/6104537/1000985)

# ruby - 在 Sinatra 的应用程序范围内运行时记录的“正确”方式是什么？

> ID：13007668
> 
> 赞同：2
> 
> 时间：2012-10-22T08:39:35.207
> 
> 标签：ruby, logging, sinatra

我正在玩写一个 Sinatra 应用程序。我想从配置块中记录一些东西。`enable :logging`但是，它在应用程序范围内运行，如果我在我的配置块中这样做，它不包括记录器方法。在尊重我有效的任何日志配置的同时，是否有一些正常的方法可以从配置块记录消息？

目前，我执行以下操作：

```
class Blah < Sinatra::Base
  configure do
    enable :logging
    @@log = Logger.new("/dev/stderr")
    @@log.info "blah"
  end
end 
```

我宁愿使用配置的任何记录器，并默认使用一种设置`enable :logger`。类似于以下内容的内容将是理想的：

```
class Blah < Sinatra::Base
  configure do
    enable :logging
    logger.info "blah"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:39:32.467

从 1.3 开始（我认为）Sinatra 附带了一个像你描述的那样的记录器，但它默认写入 STDOUT 和 STDERR，如果你想把它打到一个文件中，把它添加到你的 config.ru 中：

```
logger = Logger.new('log/awesome_app.log')

use Rack::CommonLogger, logger
run AwesomeApp 
```

# ruby - # 未定义的局部变量或方法“id” 关于烂土豆

> ID：13007670
> 
> 赞同：-1
> 
> 时间：2012-10-22T08:39:48.287
> 
> 标签：ruby

我一直在研究 Edx 问题 Homeowrk 2 大约 2 小时。我正式卡住了。你怎么做东西。这个问题与

我要做的是将电影标题链接到排序，以便它按顺序对电影进行排序。

```
-#  This file is app/views/movies/index.html.haml
%h1 All Movies

%table#movies
  %thead
    %tr
      %th= link_to 'Movie Title', new_movie_path
      %th Rating
      %th Release Date
      %th More Info
  %tbody
    - @movies.each do |movie|
      %tr
        %td= movie.title 
        %td= movie.rating
        %td= movie.release_date
        %td= link_to "More about #{movie.title}", movie_path(movie)

= link_to 'Add new movie', new_movie_path 
```

根据作业，我应该编辑索引，以便将“所有电影”按顺序排列。我查找了 ruby​​ 的排序方法，它是 movie.order()。我不知道在括号里放什么。

```
class MoviesController < ApplicationController

  def show
    id = params[:id] # retrieve movie ID from URI route
    @movie = Movie.find(id) # look up movie by unique ID
    # will render app/views/movies/show.<extension> by default
  end

  def index
    @movies = Movie.order(id)

  end

  def new
    # default: render 'new' template
  end

  def create
    @movie = Movie.create!(params[:movie])
    flash[:notice] = "#{@movie.title} was successfully created."
    redirect_to movies_path
  end

  def edit
    @movie = Movie.find params[:id]
  end

  def update
    @movie = Movie.find params[:id]
    @movie.update_attributes!(params[:movie])
    flash[:notice] = "#{@movie.title} was successfully updated."
    redirect_to movie_path(@movie)
  end

  def destroy
    @movie = Movie.find(params[:id])
    @movie.destroy
    flash[:notice] = "Movie '#{@movie.title}' deleted."
    redirect_to movies_path
  end

end 
```

所以根本问题，我不知道如何正确编辑方法索引以给出我的“电影”目录顺序，也不知道如何将标题电影标题分配给索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:52:15.043

在视图中

```
 %th= link_to 'Movie Title', movies_path(sort_param: 'title') 
```

并在控制器中

```
 def index
    @movies = Movie.order(params[:sort_param])
  end 
```

您也可以对“评级”、“发布日期”等其他标题执行相同操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:51:29.503

你可以检查一下[`ordering with Rails`](http://guides.rubyonrails.org/active_record_querying.html#ordering)。`id`您的函数中的变量`index`不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:58:34.980

在您的模型中创建一个范围。这是最推荐的方式。您的控制器不需要知道如何检索结果。只需询问模型您需要什么！

在范围内，根据需要进行设计。查看[文档](http://guides.rubyonrails.org/active_record_querying.html#scopes)以获取更多信息。

在您的电影模型文件中，输入如下内容：

```
scope :ordered, order("id ASC") 
```

然后在您的控制器索引中：

```
@movies = Movie.ordered 
```

这将为您提供排序的电影收藏

# mysql - 在 union all 中使用 order by

> ID：13007671
> 
> 赞同：0
> 
> 时间：2012-10-22T08:39:50.100
> 
> 标签：mysql

我有一个查询

```
select username,amount from employee
union all
select '' as username,sum(amount) from employee
order by cast(username as decimal) 
```

用户名从 1000 开始

当我使用此查询时，它始终显示从最高用户名到最小用户名

我想将最小的用户名显示到最高的用户名

我为此做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:42:02.583

通过包含在子查询中来尝试，

```
SELECT *
FROM
    (
        SELECT username, amount from employee
        UNION ALL
        SELECT '' as username, sum(amount) from employee
    ) x
ORDER BY (CASE WHEN username = '' THEN 1 ELSE 0 END) ASC, 
          CAST(username AS SIGNED) ASC 
```

# linux - 有条件地添加或附加到 linux 脚本中的文件

> ID：13007672
> 
> 赞同：5
> 
> 时间：2012-10-22T08:39:56.270
> 
> 标签：linux, bash, unix, scripting

我需要通过脚本修改文件。
我需要执行以下操作：
如果特定字符串不存在，则附加它。

所以我创建了以下脚本：

```
#!/bin/bash  
if grep -q "SomeParameter A" "./theFile"; then  
echo exist  
else  
   echo doesNOTexist  
   echo "# Adding parameter" >> ./theFile    
   echo "SomeParameter A" >> ./theFile    
fi 
```

这可行，但我需要做一些改进。
我认为如果我检查“SomeParameter”是否存在然后看看它后面是“A”还是“B”会更好。如果是“B”，则将其设为“A”。
否则附加字符串（就像我一样）但在最后一个注释块的开始之前。
我怎么能这样做？
我不擅长编写脚本。
谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:37:58.443

首先，更改任何`SomeParameter`已经存在的行。这应该适用于`SomeParameter`or之类的行`SomeParameter B`，带有任意数量的额外空格：

```
sed -i -e 's/^ *SomeParameter\( \+B\)\? *$/SomeParameter A/' "./theFile" 
```

如果它不存在，则添加该行：

```
if ! grep -qe "^SomeParameter A$" "./theFile"; then
    echo "# Adding parameter" >> ./theFile    
    echo "SomeParameter A" >> ./theFile    
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:19:23.383

```
awk 'BEGIN{FLAG=0}
     /parameter a/{FLAG=1}
     END{if(flag==0){for(i=1;i<=NR;i++){print}print "adding parameter#\nparameter A#"}}' your_file 
```

`BEGIN{FLAG=0}`- 在文件处理开始之前初始化标志变量。

`/parameter a/{FLAG=1}`- 如果在文件中找到参数，则设置标志。

`END{if(flag==0){for(i=1;i<=NR;i++){print}print "adding parameter#\nparameter A#"}}`- 最后在文件末尾添加行

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T08:59:09.660

perl 单行

```
perl -i.BAK -pe 'if(/^SomeParameter/){s/B$/A/;$done=1}END{if(!$done){print"SomeParameter A\n"}} theFile 
```

将创建备份 theFile.BAK（-i 选项）。一个更详细的版本，考虑到最后的评论，要测试。应保存在文本文件中并执行`perl my_script.pl`或`chmod u+x my_script.pl` `./my_script.pl`

```
#!/usr/bin/perl

use strict;
use warnings;

my $done = 0;
my $lastBeforeComment;
my @content = ();
open my $f, "<", "theFile" or die "can't open for reading\n$!";
while (<$f>) {
  my $line = $_;
  if ($line =~ /^SomeParameter/) {
    $line =~ s/B$/A/;
    $done = 1;
  }
  if ($line !~ /^#/) {
    $lastBeforeComment = $.
  }
  push @content, $line;
}
close $f;
open $f, ">", "theFile.tmp" or die "can't open for writting\n$!";
if (!$done) {
  print $f @content[0..$lastBeforeComment-1],"SomeParameter A\n",@content[$lastBeforeComment..$#content];
} else {
  print $f @content;
}
close $f; 
```

一旦确定，然后添加以下内容：

```
rename "theFile.tmp", "theFile" 
```

# sql-server-2008 - 为什么我安装 2008 时选择 @@version 会给出 2005

> ID：13007673
> 
> 赞同：0
> 
> 时间：2012-10-22T08:39:56.057
> 
> 标签：sql-server-2008

显然我在 SQL Server Management Studio 中看到了，我看到了 2008 版。

但是当我表演

```
select @@version 
```

我看到的是 2005 版

我认为这解释了为什么我的存储过程可以在另一台兼容级别 = 100 的计算机上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:53:31.063

看来您已经安装了 2008 年的 Studio 版本，例如，如果您登录到服务器，您将看到此内容。

但是，@@version 命令会向您显示幕后实际使用的内容。在这里，您仍然使用 2005 年的引擎。

# parallel-processing - MPI素数

> ID：13007674
> 
> 赞同：-1
> 
> 时间：2012-10-22T08:39:58.727
> 
> 标签：parallel-processing, mpi, primes

我想找到用 mpi 库找到素数的并行算法。我找到了这个，但是当我在代码块上运行时，总是得到

```
 Sorry - this exercise requires an even number of tasks.
   evenly divisible into 2500000 .  Try 4 or 8.

 What it means?how can i obtain number of tasks. 
```

[https://computing.llnl.gov/tutorials/mpi/samples/C/mpi_prime.c](https://computing.llnl.gov/tutorials/mpi/samples/C/mpi_prime.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:11:52.850

> 这是什么意思？

这意味着您可能必须查看源代码并尝试了解它的工作原理。高性能标记已经指向正确的 MPI 调用，如果您查看`main`函数的开头，您会看到以下几行：

```
MPI_Comm_size(MPI_COMM_WORLD,&ntasks);
if (((ntasks%2) !=0) || ((LIMIT%ntasks) !=0)) {
   printf("Sorry - this exercise requires an even number of tasks.\n");
   printf("evenly divisible into %d.  Try 4 or 8.\n",LIMIT);
   MPI_Finalize();
   exit(0);
   } 
```

显然，它需要偶数个 MPI 进程（否则`ntasks%2 != 0`），这个数字也应该除以`LIMIT`（在这种情况下等于`2500000`）。MPI 程序应通过 MPI 启动器执行，在大多数情况下称为`mpiexec`或`mpirun`。它将进程数作为参数。如果您不通过 运行代码`mpiexec`，大多数 MPI 实现的行为就好像程序是使用

```
mpiexec -np 1 ./program 
```

`1`不是偶数，因此`if`条件的第一部分计算为真，中止代码被执行。

您应该做的是在终端中使用 运行程序`mpiexec -np <# of procs> executable`，其中`<# of procs>`是所需的 MPI 进程数，`executable`是可执行文件的名称。`<# of procs>`应该是平的，应该分`2500000`的。我建议使用`2`,`4`或`8`. `10`也会这样做。除非您的开发系统具有多核 CPU 或/和多个 CPU，否则您不会看到速度有任何改进。

你提到代码::块。有关如何使其运行 MPI 程序的一些想法，请参见[此处](http://www.blog.kubiak.co.uk/post/44)`mpiexec`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:47:29.427

在 MPI 程序执行期间获取进程数的常用方法是调用`MPI_COMM_SIZE`子程序，像这样

```
call MPI_COMM_SIZE(MPI_COMM_WORLD, num_procs, ierr) 
```

其中`num_procs`是一个整数，它将等于调用完成后的进程数。我希望您所说的*任务*与我所说的*流程*相同。

请注意，我已经用 Fortran 编写了调用，C 和 C++ 绑定也可用，尽管后者似乎不再受欢迎。

# php - PHP 搜索引擎 - 搜索多个关键字

> ID：13007680
> 
> 赞同：1
> 
> 时间：2012-10-22T08:40:24.870
> 
> 标签：php, search, search-engine, keyword, explode

我的搜索引擎有这个代码：

```
 if(isset($_POST['search']))
    {
        $search = $_POST['search'];
        $terms = explode(",", $search);
        $projectlistquery = "
            SELECT project.accid, customer.custid, projectid, project.datefrom, custnamecode, dateto, daluur, project.gebruikersid, gebruikers.gebruikersid, 
            type, typeid, typename, custsurname, custmidname, custforename, acc1cust, acc2date, acc3nrofproj, acc4user, project.crew, project.jobinstr, project.projectinfo, usersurname, usermidname, userforename
            FROM project
                INNER JOIN type on project.type = type.typeid
                INNER JOIN customer on project.custid = customer.custid
                INNER JOIN accountingcode on project.accid = accountingcode.accid
                INNER JOIN gebruikers on project.gebruikersid = gebruikers.gebruikersid         
            WHERE
        ";
        $i = 0;
        foreach ($terms as $each) 
        {
            if ($i++ > 0) 
            $projectlistquery .= ' OR ';

            $projectlistquery .= "concat(custsurname, custforename, custmidname, custpostal, custphone1, custphone2, custfax, custnamecode, acc1cust, acc2date, acc3nrofproj, acc4user, typename, usersurname, usermidname, userforename) LIKE '%$each%' ";
        }
        $projectlistquery .= " ORDER BY projectid ";
    }
    else
    $projectlistquery= "    // query to show all records. 
```

现在，这对于搜索 1 个密钥完全有效。

如果我搜索一个名字：Hans van Meulen，它会显示所有带有 Hans 的名字，所有带有“van”的名字和 Meulen。因此，如果我的数据库中有 Dude van Berkel，他也会出现。我想一起搜索 3 个字符串。

这可以通过 IMPLODE 实现吗？$terms = implode(",", $search); 但是，在“ORDER BY projectid”处返回 MySQL 语法错误。
还是我必须调整我的 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:45:01.840

您只需删除该`explode(",", $search);`部分，以便您的搜索字符串完好无损。您现在所做的基本上是将其撕裂以搜索每个单词。这应该让您将“Hans van Meulen”作为搜索字符串。

# facebook - Facebook喜欢按钮不出现

> ID：13007684
> 
> 赞同：0
> 
> 时间：2012-10-22T08:40:41.410
> 
> 标签：facebook, facebook-like, facebook-likebox

在我的网站上显示类似 Facebook 的按钮时，我似乎遇到了问题。我想我完全按照说明做的。我已经阅读了几十篇文章（这里和其他论坛），但仍然没有任何变化。我已经尝试过所有版本（html5、xfbml、iframe）。奇怪的是，like-box 只出现在 Opera 上。

我的网站位于 SSL 层后面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:50:47.170

当我在 facebook 调试器中调试您的 URL 时，它会引发一些[警告](http://developers.facebook.com/tools/debug/og/object?q=https://tipleaders.com)！请根据调试器建议进行更新。

目前您的页面有一个错误“FB.init 已被调用 - 这可能表明存在问题” - 您可以通过 firebug 控制台进行检查。

```
<div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=119488114856726";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <div style='float: right; margin-top: 25px; display: inline-block' class="fb-like" data-href="https://tipleaders.com/" data-send="false" data-layout="box_count" data-width="40" data-show-faces="false" data-font="verdana"></div> 
```

请在 body 标签中替换此代码。希望这能解决您的问题。

请查看此[页面 - 喜欢按钮](http://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:44:17.000

至少在firefox中找到作品，我可以看到like按钮。但它在左栏中。只需确保出现点赞按钮的网站无需任何登录即可看到，因为 facebook 需要访问它。

顺便说一句，我在浏览器控制台中收到以下错误：

“网络错误：404 未找到 - [https://tipleaders.com/tl/h//?ajax=](https://tipleaders.com/tl/h//?ajax=) ”

“网络错误：404 未找到 - [https://tipleaders.com/count_classified//?ajax=&status=false&count=0](https://tipleaders.com/count_classified//?ajax=&status=false&count=0) ”

# javascript - 是否可以使用 javaScript 对 HTML 输入 onKeyPress 事件进行编程？

> ID：13007685
> 
> 赞同：5
> 
> 时间：2012-10-22T08:40:44.950
> 
> 标签：javascript, html

我正在尝试从 javascript 编写 html 输入 onkeypress 事件，但它不起作用，但我可以编写大小或类型等属性。

```
var element3 = document.createElement("input");
element3.type = "text"
element3.size = "6"   
element3.onkeypress= "return isNumberKeyDecimal(event)" 
```

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T08:42:34.557

该`onkeypress`属性接受一个函数，而不是一个字符串。

```
element3.onkeypress = isNumberKeyDecimal; 
```

但还请查看[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)处理事件侦听器函数的首选方法的函数。

特别是，您可能希望查看[事件委托](http://davidwalsh.name/event-delegate)，这将允许您在容器元素上拥有一个事件侦听器，而不必将其绑定到您创建的每个输入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:41:50.690

```
element3.setAttribute("onkeypress", "return isNumberKeyDecimal(event)"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-04T23:18:04.747

```
element3.setAttribute("onkeypress", "return isNumberKeyDecimal(event)"); 
```

[Mozilla 参考这里](https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T08:42:00.843

它应该设置为函数而不是字符串。

```
element3.onkeypress = function(event){return isNumberKeyDecimal(event)} 
```

# mysql - MySQL 语法错误

> ID：13007687
> 
> 赞同：1
> 
> 时间：2012-10-22T08:40:57.663
> 
> 标签：mysql

我无法在 MySQL 中运行简单的脚本。我已将脚本减少到只有一行。

```
DELIMITER $$
DECLARE varLocalityName VARCHAR(50);
$$
DELIMITER ; 
```

错误是：

> 第 2 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE varLocalityName VARCHAR(50)”附近使用正确的语法

```
$ mysql --version
mysql  Ver 14.14 Distrib 5.1.63, for debian-linux-gnu (x86_64) using readline 6.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:49:35.227

您的代码块没有定义声明变量的范围。如果在一个过程中，它们必须在`BEGIN`和之间`END`。没有它们，该语句`DECLARE varLocalityName VARCHAR(50);`将成为要执行的无效语句。该语句等价于如下所示的语句：

```
mysql> select current_date();
+----------------+
| current_date() |
+----------------+
| 2012-10-22     |
+----------------+
1 row in set (0.00 sec)

mysql> declare varLocalityName varchar(50);
ERROR 1064 (42000): You have an error in your SQL syntax;
 check the manual that corresponds to your MySQL server version 
 for the right syntax to use near 'declare varLocalityName varchar(50)' at line 1
mysql> 
```

您应该*声明*不带关键字的会话变量，`DECLARE`或者遵循为存储过程定义的语法来使用范围变量。

**示例 1**：使用会话变量：

```
mysql> set @x = null;
Query OK, 0 rows affected (0.00 sec)
mysql> select @x;
+------+
| @x   |
+------+
| NULL |
+------+
1 row in set (0.00 sec)

mysql> delimiter $$
mysql> select current_date() into @x;
    -> $$
Query OK, 1 row affected (0.02 sec)

mysql> select @x;
    -> $$
+------------+
| @x         |
+------------+
| 2012-10-22 |
+------------+
1 row in set (0.00 sec) 
```

请注意，您可以在过程中设置/定义会话变量，但不能*`DECLARE`*。

**示例 2**：使用过程范围变量：

```
mysql>
mysql> delimiter $$
mysql> create procedure some_x()
    ->    begin
    ->      declare varLocalityName varchar(50);
    ->
    ->      set @sessionDate = null;
    ->      select @sessionDate;
    ->      set @sessionDate = current_date();
    ->      select @sessionDate;
    ->
    ->      select varLocalityName;
    ->    end;
    -> $$
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;
mysql>
mysql> call some_x();
+--------------+
| @sessionDate |
+--------------+
| NULL         |
+--------------+
1 row in set (0.00 sec)

+--------------+
| @sessionDate |
+--------------+
| 2012-10-22   |
+--------------+
1 row in set (0.00 sec)

+-----------------+
| varLocalityName |
+-----------------+
| NULL            |
+-----------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> select @sessionDate;
+--------------+
| @sessionDate |
+--------------+
| 2012-10-22   |
+--------------+
1 row in set (0.00 sec)

mysql> select varLocalityName;
ERROR 1054 (42S22): Unknown column 'varLocalityName' in 'field list'
mysql> 
```

另请参阅[***变量声明和范围***](http://www.mysqltutorial.org/variables-in-stored-procedures.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:43:27.947

我认为问题在于您将**$$**定义为分隔符，然后您仍然尝试使用**;** 作为分隔符

我相信这应该有效：

```
DELIMITER $$
DECLARE varLocalityName VARCHAR(50)$$
DELIMITER ; 
```

默认 MySQL 分隔符是**;** . 您可以使用**DELIMITER**调用更改它，并且从那时起您必须在新语法中使用它。

```
DELIMITER $$ 
DECLARE varLocalityName VARCHAR(50)$$ 
SET varLocalityName="xx"$$ 
SELECT varLocalityName$$ 
DELIMITER ; 
```

所以基本上 $$ 替换了每次出现的 ; （只要它不在字符串内）。如果您设置 DELIMITER **，您将使用双星而不是 ;。

# spring - Spring MVC 和 Backbone.js 集成问题

> ID：13007689
> 
> 赞同：2
> 
> 时间：2012-10-22T08:41:06.073
> 
> 标签：spring, model-view-controller, backbone.js

我试图了解 Spring MVC 与backbone.js 的集成作为其视图技术。我在网上也找到了一些示例，例如[此处](https://github.com/sdeleuze/spring-backbone-todo/)和[此处](https://github.com/consileonpl/spring-3.1-backbone.js-todo-list)但是，在这两个示例中，我都面临着 Spring MVC 控制器（第一个链接中的 TodoController 和第二个链接中的 TaskController）似乎没有得到的相同问题叫。

首先，没有打印日志消息（即使我在控制器类中执行了绝望的*System.out.println() ）。*其次，当我尝试在控制器类中设置断点并进入调试模式时，它根本没有停止，但是可以通过 localhost:8080/todo 访问该示例（假设这是已部署的 war 文件的 url）。在这两个示例中，都使用了基于代码的配置方法（没有 web.xml）。所以我想知道，控制器类是否被调用过？

周末我一直在跌跌撞撞。因此，如果有人能指出正确的方向，我将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:00:29.587

感谢您的回答灵魂检查:)

我回到了老式的 web.xml 而不是基于代码的配置方法，我可以看到控制器类得到了正确的扫描和调用，正如日志所打印的那样！！我不知道为什么，但我对 web.xml 有了新的尊重 :)

# c - Realloc 二维数组

> ID：13007696
> 
> 赞同：1
> 
> 时间：2012-10-22T08:41:25.137
> 
> 标签：c

我开始学习 C 并且想从命令行输入字符并将它们排序到一个数组中，这样行号是 ASCII 字符号，列是输入字符的索引。我知道这必须通过 realloc 和 malloc 动态完成，但我不知道如何对其进行编码。有人可以帮我解决这个问题吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <strings.h>
#include <string.h>
#include <assert.h>
#include <ctype.h>

#define totalASCII     256
int
main(int argc, char **argv) {
int locat;
char current;
int **dRow=NULL;

dRow = malloc(totalASCII*sizeof(*dRow));

for(locat=0;scanf("%c", &current)==1;locat++)   {
    /* I don't know what to put here */
    }
return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:52:24.373

您的数据非常小，实际上没有必要从堆中分配它。只需使用一个数组：

```
struct { char character; int input_index; } input_data[totalASCII]; 
```

在典型的 32 位系统上，这将使用大约 256 * 8 或 2 KB 的内存，实际上并没有那么多。

那么存储将是：

```
for(locat = 0; scanf("%c", &current) == 1; locat++)
{
  input_data[locat].character = current;
  input_data[locat].input_index = locat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:11:51.390

免责声明：尚未编译和运行代码。

尝试这样的事情：

```
int prev_size = 1;

dRow = calloc(totalASCII, sizeof(*dRow)); //use calloc

for(locat=0;scanf("%c", &current)==1;locat++)   {
    if(dRow[current]) {
       prev_size=0;
       //try to find how much is already allocated
       while(dRow[current][prev_size] != -1) 
           prev_size++;

       dRow[current] = realloc(sizeof(int) * (prev_size+1));
     }
    else {
       prev_size = 1;
       dRow[current] = malloc(sizeof(int) * (prev_size+1));
    }
    dRow[current][prev_size-1] = locat;
    dRow[current][prev_size-1] = -1;   //end identifier  

} 
```

这里的复杂性是找到之前分配的大小。由于没有其他结构/数据结构来存储此信息，因此此示例代码尝试遍历数组并查找`-1`假定为结束标记的数组。

# javascript - LimeJS 检测重叠

> ID：13007698
> 
> 赞同：0
> 
> 时间：2012-10-22T08:41:31.107
> 
> 标签：javascript, html, limejs

我最近开始使用 LimeJS 进行游戏开发，但遇到了一些麻烦。

我正在制作 RTS 类型的游戏。我有让您选择建筑物的功能，然后单击地图将所选建筑物添加到地图中。如果建筑物与已经存在的建筑物重叠，我不希望玩家能够放置建筑物。我将如何检查这个？建筑物是 Sprite，它们又作为子项添加到地图 Sprite 中。我正在考虑使用 hitTest 但我不太清楚该功能是如何工作的。事件处理程序示例：

```
goog.events.listen(field,['mousedown'],function build(e){

    if(selected_ == 1){
     var house = new rh.house().setPosition(e.position.x, e.position.y);
     field.appendChild(house);
     selected_ = -1;
     houselbl.setFill('assets/storage.png');
    }  
    if(selected_ == 2){
     var blacksmith = new rh.blacksmith().setPosition(e.position.x, e.position.y);
     field.appendChild(blacksmith);
     selected_ = -1;
     blacksmithlbl.setFill('assets/blacksmith.png');
    }      
    if(selected_ == 3){
     var lumbermill = new rh.lumbermill().setPosition(e.position.x, e.position.y);
     field.appendChild(lumbermill);
     selected_ = -1;
     lumbermilllbl.setFill('assets/lumbermill.png');
   }  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:28:39.947

您可能还想将该碰撞检查放在 scheduleManager 中，然后它可以逐帧检查它，如果它确实重叠，您可以将精灵或建筑物变为红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:42:42.223

我让它工作了。我对所有孩子都使用了 getBoundingBox，并检查了它是否安全。下面的例子：

```
goog.events.listen(field,['mousedown'],function build(e){ 

    if(selected_ == 1){
        var house = new rh.house().setPosition(e.position.x, e.position.y);
        var safe=true;
        for (var i=0;i<field.getNumberOfChildren();i++)
        { 
           var box = field.getChildAt(i).getBoundingBox();
           if (goog.math.Box.intersects(box,house.getBoundingBox())){
           safe=false;
       }
    }
        if (safe){
            field.appendChild(house);
            selected_ = -1;
            houselbl.setFill('assets/storage.png');
        }
    }  
} 
```

# string - 在 mongoDB 中存储 48 位十六进制值的最有效方法是什么？

> ID：13007699
> 
> 赞同：0
> 
> 时间：2012-10-22T08:41:30.907
> 
> 标签：string, mongodb, types, hex

对于一种对象，我有唯一的 48 位十六进制（192 位）哈希，而且，我可以看到，mongo 将这些值存储为字符串。有没有办法像数字一样存储它？将其存储为数字会比存储为字符串更有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:45:24.217

最有效的方法就是`binary`数据类型。它之所以高效，是因为 MongoDB 存储文档的 BSON 格式是“二进制”JSON。用法取决于您使用的编程语言。

# android - 在android中检测连接是wifi、3G还是EDGE？

> ID：13007707
> 
> 赞同：22
> 
> 时间：2012-10-22T08:42:14.140
> 
> 标签：android, wifi, 3g

我需要在android中检测是否有任何连接`Wifi`或`3G`（或`3G+`）或`EDGE`在android中。当有连接`wifi`或`3G`我可以将照片发送到服务器时，当只有连接`EDGE`时不会将它们发送到服务器。

我看到可以检测到wifi连接`ConnectivityManager.TYPE_WIFI`和可以检测到EDGE连接。但是怎么才能检测到3G或者3G+呢？`ConnectivityManager.TYPE_MOBILE``TelephonyManager.NETWORK_TYPE_EDGE`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-01-11T09:12:57.950

[https://gist.github.com/emil2k/5130324](https://gist.github.com/emil2k/5130324)

```
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.telephony.TelephonyManager;

/**
 * Check device's network connectivity and speed 
 * @author emil http://stackoverflow.com/users/220710/emil
 *
 */
public class Connectivity
{
    /**
     * Get the network info
     * @param context
     * @return
     */
    public static NetworkInfo getNetworkInfo(Context context){
        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        return cm.getActiveNetworkInfo();
    }

    /**
     * Check if there is any connectivity
     * @param context
     * @return
     */
    public static boolean isConnected(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected());
    }

    /**
     * Check if there is any connectivity to a Wifi network
     * @param context
     * @return
     */
    public static boolean isConnectedWifi(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && info.getType() == ConnectivityManager.TYPE_WIFI);
    }

    /**
     * Check if there is any connectivity to a mobile network
     * @param context
     * @return
     */
    public static boolean isConnectedMobile(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && info.getType() == ConnectivityManager.TYPE_MOBILE);
    }

    /**
     * Check if there is fast connectivity
     * @param context
     * @return
     */
    public static boolean isConnectedFast(Context context){
        NetworkInfo info = Connectivity.getNetworkInfo(context);
        return (info != null && info.isConnected() && Connectivity.isConnectionFast(info.getType(),info.getSubtype()));
    }

    /**
     * Check if the connection is fast
     * @param type
     * @param subType
     * @return
     */
    public static boolean isConnectionFast(int type, int subType){
        if(type==ConnectivityManager.TYPE_WIFI){
            return true;
        }else if(type==ConnectivityManager.TYPE_MOBILE){
            switch(subType){
                case TelephonyManager.NETWORK_TYPE_1xRTT:
                    return false; // ~ 50-100 kbps
                case TelephonyManager.NETWORK_TYPE_CDMA:
                    return false; // ~ 14-64 kbps
                case TelephonyManager.NETWORK_TYPE_EDGE:
                    return false; // ~ 50-100 kbps
                case TelephonyManager.NETWORK_TYPE_EVDO_0:
                    return true; // ~ 400-1000 kbps
                case TelephonyManager.NETWORK_TYPE_EVDO_A:
                    return true; // ~ 600-1400 kbps
                case TelephonyManager.NETWORK_TYPE_GPRS:
                    return false; // ~ 100 kbps
                case TelephonyManager.NETWORK_TYPE_HSDPA:
                    return true; // ~ 2-14 Mbps
                case TelephonyManager.NETWORK_TYPE_HSPA:
                    return true; // ~ 700-1700 kbps
                case TelephonyManager.NETWORK_TYPE_HSUPA:
                    return true; // ~ 1-23 Mbps
                case TelephonyManager.NETWORK_TYPE_UMTS:
                    return true; // ~ 400-7000 kbps
            /*
             * Above API level 7, make sure to set android:targetSdkVersion 
             * to appropriate level to use these
             */
                case TelephonyManager.NETWORK_TYPE_EHRPD: // API level 11 
                    return true; // ~ 1-2 Mbps
                case TelephonyManager.NETWORK_TYPE_EVDO_B: // API level 9
                    return true; // ~ 5 Mbps
                case TelephonyManager.NETWORK_TYPE_HSPAP: // API level 13
                    return true; // ~ 10-20 Mbps
                case TelephonyManager.NETWORK_TYPE_IDEN: // API level 8
                    return false; // ~25 kbps 
                case TelephonyManager.NETWORK_TYPE_LTE: // API level 11
                    return true; // ~ 10+ Mbps
                // Unknown
                case TelephonyManager.NETWORK_TYPE_UNKNOWN:
                default:
                    return false;
            }
        }else{
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:44:32.640

```
public class WifiState {

    Context context;

    public WifiState(Context context) {
        this.context = context;
    }

    public void haveNetworkConnection() {

        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) context
                .getSystemService(context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                if (ni.isConnected())
                    haveConnectedWifi = true;
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                if (ni.isConnected())
                    haveConnectedMobile = true;

        }
        if (haveConnectedWifi == false && haveConnectedMobile == false) {

            //do something to handle if wifi & mobiledata is disabled

        } else {
                 //do something else..
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-14T06:25:27.150

首先获取对 ConnectivityManager 的引用，然后[检查设备的 Wifi 和 3G 状态](http://d.android.com/reference/android/net/NetworkInfo.html)。您需要 ACCESS_NETWORK_STATE 权限才能使用此服务。

```
 ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    NetworkInfo mMobile = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (mWifi.isAvailable() == true) {
        return "Connected to WiFi";
    } else if (mMobile.isAvailable() == true) {
        return "Connected to Mobile Network";
    } else return "No internet Connection" 
```

# android - 从android中的另一个包调用意图......？

> ID：13007708
> 
> 赞同：0
> 
> 时间：2012-10-22T08:42:17.473
> 
> 标签：android, android-intent, package

我有两个不同类的包。前任。com.app.abc1, com.app.abc2

现在我想从 abc1 包的 xyz1 类中调用 abc2 包的 xyz2 类。所以我写了下面的代码

```
Intent intent = new Intent(xyz1.this, com.app.abc2.xyz2.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

但它使我的应用程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:48:26.750

尝试这个..

```
Intent int_b = new Intent(getApplicationContext(), class_b.class); 
```

`startActivity(int_b); finish();`

不要忘记在清单文件中添加您的活动.. 像这样..

```
<activity android:name="com.example.class_b">  </activity> 
```

希望有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:54:19.363

你在清单文件中声明了你的第二个活动吗？

如果是这样，你必须自己指定包路径。无需在**Intent**中指定。

```
package="com.app"
<activity
        android:name=".abc1.xyz1"/ >
<activity
        android:name=".abc2.xyz2"/ >
Intent intent = new Intent(xyz1.this, xyz2.class);
                 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                 startActivity(intent);
                        finish(); 
```

# iphone - iPhone：让录音应用程序在后台运行

> ID：13007709
> 
> 赞同：3
> 
> 时间：2012-10-22T08:42:20.503
> 
> 标签：iphone, background, avplayer, avaudiorecorder

我已经为我的问题寻找合适的答案，但到目前为止我没有发现任何帮助。我想记录环境中的分贝。如果超过特定阈值，应用程序应播放声音或歌曲文件。到目前为止一切正常，但我很难让应用程序在后台运行。我已经添加了属性“应用程序不在后台运行”并将其值设置为“否”。我读过应该将“external-accessory”元素添加到“必需的背景模式”中。我也添加了，但它仍然不起作用。我正在使用`AVAudioRecorder`录制声音和`AVPlayer`播放声音/音乐文件。首先，我使用了，`MPMediaController` `iPodMusicPlayer`但它与属性“必需的背景模式”一起引发了异常。

编辑：我在 iOS 6 中使用 xCode 4.5

编辑 2：当我将字符串 viop 添加到“必需的后台模式”时，它似乎在后台继续录制。但是在后台时它仍然不播放音乐文件。我也尝试添加“音频”值，但没有帮助。

编辑 3：我咨询了苹果开发者参考资料。看来您必须配置您的 AVAudioSession。有了它似乎可以工作（[参考链接](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html#//apple_ref/doc/uid/TP40007875-CH3-SW4%22the%20link%20to%20the%20relevant%20reference%22)）。但是现在我在播放多个文件时遇到了麻烦，因为一旦第一首曲目播放完毕，应用程序就会再次进入暂停模式。据我所知，不可能用多个文件初始化 AVPlayer 或 AVAudioPlayer。我使用了委托方法 audioPlayerDidFinishPlaying:successfully: 来设置下一首曲目，但它不起作用。

编辑 4：好的，一种可能性是避免停止录音机，即移除 [record stop] 以便它甚至在播放音乐时录制声音。这是一个可行的解决方法，但我仍然欣赏任何其他（更好的）解决方案。不需要让记录器一直运行的解决方案。

相关代码：我在 viewDidLoad 方法中初始化所有内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.

    //[MPMusicPlayerController applicationMusicPlayer];

    NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];

NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                          [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                          [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                          [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                          nil];

NSError *error;

recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];
lowPassResults = -120.0;
thresholdExceeded = NO;

if (recorder) {
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;
    [recorder record];
            levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.03 target: self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];

    } else {
    NSString* errorDescription = [error description];
    NSLog(errorDescription);
    }
} 
```

每 0.03 秒调用一次的 levelTimer 回调：

```
- (void)levelTimerCallback:(NSTimer *)timer {
//refreshes the average and peak power meters (the meter uses a logarithmic scale, with -160 being complete quiet and zero being maximum input
[recorder updateMeters];

const double ALPHA = 0.05;

float averagePowerForChannel = [recorder averagePowerForChannel:0]; 

    //adjust the referential
    averagePowerForChannel = averagePowerForChannel / 0.6;

    //converts the values 
    lowPassResults = ALPHA * averagePowerForChannel + (1.0 - ALPHA) * lowPassResults;   

    float db = lowPassResults + 120;
    db = db < 0? 0: db;

    if(db >= THRESHOLD)
    {
        [self playFile];
    }
} 
```

最后是播放音乐文件的 playFile 方法：

```
- (void) playFile {

    NSString* title = @"(You came down) For a day";
    NSString* artist = @"Forge";
    NSMutableArray *songItemsArray = [[NSMutableArray alloc] init];

    MPMediaQuery *loadSongsQuery = [[MPMediaQuery alloc] init];

    MPMediaPropertyPredicate *artistPredicate = [MPMediaPropertyPredicate predicateWithValue:artist forProperty:MPMediaItemPropertyArtist];
    MPMediaPropertyPredicate *titlePredicate = [MPMediaPropertyPredicate predicateWithValue:title forProperty:MPMediaItemPropertyTitle];
    [loadSongsQuery addFilterPredicate:artistPredicate];
    [loadSongsQuery addFilterPredicate:titlePredicate];

    NSArray *itemsFromGenericQuery = [loadSongsQuery items]; 

    if([itemsFromGenericQuery count])
        [songItemsArray addObject: [itemsFromGenericQuery objectAtIndex:0]];

    if([songItemsArray count])
    {
        MPMediaItemCollection *collection = [[MPMediaItemCollection alloc] initWithItems:songItemsArray];

        if ([collection count]) {

            MPMediaItem* mpItem = [[collection items]objectAtIndex:0];
            NSURL* mediaUrl = [mpItem valueForProperty:MPMediaItemPropertyAssetURL];
            AVPlayerItem* item = [AVPlayerItem playerItemWithURL:mediaUrl];
            musicPlayer = [[AVPlayer alloc] initWithPlayerItem:item];

            [musicPlayer play];
        }
    }
} 
```

有人可以帮我解决我的问题吗？我还错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T10:49:04.627

尝试这个，

**AppDelegate.m**

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   __block UIBackgroundTaskIdentifier task = 0;
   task=[application beginBackgroundTaskWithExpirationHandler:^{
   NSLog(@"Expiration handler called %f",[application backgroundTimeRemaining]);
   [application endBackgroundTask:task];
   task=UIBackgroundTaskInvalid;
   }];
} 
```

# javascript - 无法在 iframe 和带有 javascript 的框架集中抓取框架（域相同）

> ID：13007714
> 
> 赞同：1
> 
> 时间：2012-10-22T08:42:33.093
> 
> 标签：javascript, html, dom

我想用 javascript 抓取一个 HTML 元素，该元素位于嵌套在 iframe 和框架集中的框架中。HTML 结构如下所示：

```
<iframe id="central_iframe" name="central_iframe" (...)>
    <frameset cols="185, *" border="0" framespacing="0" frameborder="0">
        <frame src="/subdomain" name="SideFrame" id="SideFrame" (...)> 
```

以前我是这样做的：

```
myIframe = document.getElementById('central_iframe');
mySideFrame = myIframe.contentDocument.getElementById('SideFrame');
myElement = mySideFrame.contentDocument.getElementById('iWantToGrabThis'); 
```

但是，这在这里不起作用，因为 myIframe.contentDocument 返回 null。另一方面，myIframe.contentWindow 返回一个完全没有属性的窗口（因此 myIframe.contentWindow.document 未定义）。同样，当我尝试

```
central_iframe.SideFrame 
```

还会返回一个没有任何属性的窗口。

编辑：该页面不是我的，因此我无法更改其来源。我只是想和它互动。

我正在 Chrome 开发人员工具中进行测试。我也在 GeckoFX 中尝试过同样的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:46:20.870

iframe 指向具有该`src`属性的另一个源！您不能在 iframe 中嵌入任何 html。将框架集放入 iframe src 指向的 html 文件中。然后，您将能够从带有`window.parent`. 您可以使用 访问框架集的框架`document.frames`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:20:02.607

在做了更多研究之后，似乎贾斯汀摩根的建议是正确的，我想要的是不可能的。我首先通过在浏览器中加载父 iframe 来解决部分问题。这使我可以正常访问子框架（SideFrame）。

# asp.net - Web 应用程序 .net 2.0 的性能

> ID：13007716
> 
> 赞同：0
> 
> 时间：2012-10-22T08:42:39.457
> 
> 标签：asp.net, .net, performance, sql-server-2005

我刚刚开始在一个用 .net 2.0 编写的网站上工作。页面加载时间很长，响应时间很短，不知道从哪里开始以提高相同的性能。

硬件不是问题，因为有足够的内存和处理器也足够好。

任何想法我应该从哪里开始并提高性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:49:04.173

您可以使用一个名为 Antz Profiler 的工具，并针对它在本地运行您的 Web 应用程序。

[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。这将帮助您识别应用程序中昂贵的方法。然后，您可以分解调用并尝试确定代码是昂贵的还是数据库调用。

尝试重构并确定您认为可以改进的任何代码，然后一旦完成，就可以进行外部调用。

如果您有数据库调用，那么您可以使用 SSMS 来识别查询中的任何问题。当您运行查询时，您可以使用“包括实际执行计划”来显示瓶颈在哪里。

SSMS 查询优化教程：[http ://www.simple-talk.com/sql/sql-training/the-sql-server-query-optimizer/](http://www.simple-talk.com/sql/sql-training/the-sql-server-query-optimizer/)

Antz 演练：[http ://www.red-gate.com/products/dotnet-development/ants-performance-profiler/walkthrough](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/walkthrough)

这里还有一个提示链接，用于检查页面速度的一般事项：[http ://www.aspnet101.com/2010/03/50-tips-to-boost-asp-net-performance-part-i/](http://www.aspnet101.com/2010/03/50-tips-to-boost-asp-net-performance-part-i/)

此外，您可以使用**Firefox**中的**YSlow**等工具来检查 http 请求等，以了解可以减少网络调用的地方。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:46:15.490

您首先对应用程序进行概要分析，以找到它花费最多时间的地方。

当你发现这一点时，你就会想出如何解决顶部瓶颈的想法。

尝试修复后，再次配置文件以了解您是否有所作为 - 如果没有，请回滚更改并尝试其他方法。

如果成功，重复上述过程。

流行的分析器是[dotTrace](http://www.jetbrains.com/profiler/)和[ants profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，它们都是商业产品。**

# java - GSON.fromJson 嵌套 Java 对象

> ID：13007717
> 
> 赞同：0
> 
> 时间：2012-10-22T08:42:41.127
> 
> 标签：java, android, facebook, gson

我正在尝试对我的 android 应用程序进行更新，以适应最近 facebook 对图片的更改。以前我只是为用户照片返回一个字符串，但没有返回一个数组。我已经更新了我的代码，但数据只是返回空值，有人能指出我正确的方向吗？

谢谢

GSON 呼叫

```
Gson gson = new GsonBuilder().create();
FBFriendResponse resp = gson.fromJson(response, FBFriendResponse.class); 
```

新的 facebook 数据结构

```
"picture": {
    "data": {
       "url": "######.jpg",
       "is_silhouette": false
    }
 }

public class FBFriend implements Comparable<FBFriend>
{
    public String id, name, gender;
    public FBFriendPicture picture;

    @Override
    public int compareTo(FBFriend another) {
        return this.name.compareTo(another.name);       
    }

}
public class FBFriendPicture 
{
    public FBFriendPictureData pictureData;
}

public class FBFriendPictureData 
{
    public String friendPictureURL;
    public Boolean friendPictureIssilhouette;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:14:00.750

解决了这个问题。这是由于类中使用了错误的名称

```
public class FBFriend implements Comparable<FBFriend>
{
    public String id, name, gender;
    public FBFriendPicture picture;

    @Override
    public int compareTo(FBFriend another) {
        return this.name.compareTo(another.name);       
    }

}
public class FBFriendPicture 
{
    public FBFriendPictureData data;
}

public class FBFriendPictureData 
{
    public String url;
    public Boolean is_silhouette;
} 
```

# ios - Cocos2d：批量精灵的像素完美碰撞

> ID：13007721
> 
> 赞同：3
> 
> 时间：2012-10-22T08:43:00.587
> 
> 标签：ios, cocos2d-iphone, collision-detection, pixel

我找到了 Daniel Vilcez 开发的像素完美碰撞算法，并包含[在这个 cocos2d-iphone.org 论坛主题中](http://www.cocos2d-iphone.org/forum/topic/18522)共享的项目中。

下面是我感兴趣的算法部分。我正在尝试修改它，因为每当我使用 CCRenderTexture 时，就像最初在代码中一样，应用程序崩溃了。

我正在考虑[基于圆形碰撞的替代方法，](https://stackoverflow.com/questions/5735575/how-to-do-pixel-perfect-collision-on-many-sprites-in-cocos2d)但这些方法“不是像素完美的”，如果我的子弹是[这种形状](http://www.semionaut.net/wp-content/uploads/SoundWave1.png)的波浪，它就不能很好地工作。

**我想知道如何让算法与在 CCSpriteBatchNode 中批处理的精灵一起工作？如果是这样，这是否严格包括 CCRenderTexture 的使用？**

准确地说，这个问题与[我的另一个问题](https://stackoverflow.com/questions/12991649/cocos2d-creating-an-instance-of-ccrendertexture-crashes-my-app-but-cant-figure)部分相关，关于创建导致我的应用程序崩溃的 CCRenderTexture 实例。我发布了两个不同的，因为在这里我问的是算法，另一个我只是问为什么 CCRenderTexture 会导致我的应用程序崩溃（不使用 Daniel 的像素完美算法，而只是创建 CCRenderTexture 的实例）。

改编的代码（这里缺少 CCRenderTexture，因为它使我的应用程序崩溃，所以我注释掉了 _rt 的用法 - CCRenderTexture 的实例）。代码不能正常工作，所以我想我需要 CCRenderTexture ，因此我问了这个问题：

```
-(BOOL) isPixelPerfectCollisionBetweenSpriteA:(CCSprite*)spr1 spriteB:(CCSprite*) spr2
{
    BOOL isCollision = NO; 
    CGRect intersection = CGRectIntersection([spr1 boundingBox], [spr2 boundingBox]);

    // Look for simple bounding box collision
    if (!CGRectIsEmpty(intersection))
    {
        // Get intersection info
        unsigned int x = intersection.origin.x;
        unsigned int y = intersection.origin.y;
        unsigned int w = intersection.size.width;
        unsigned int h = intersection.size.height;
        unsigned int numPixels = w * h;

        //NSLog(@"\nintersection = (%u,%u,%u,%u), area = %u",x,y,w,h,numPixels);

        // Draw into the RenderTexture
        //[_rt beginWithClear:0 g:0 b:0 a:0];

        // Render both sprites: first one in RED and second one in GREEN
        glColorMask(1, 0, 0, 1);
        [spr1 visit];
        glColorMask(0, 1, 0, 1);
        [spr2 visit];
        glColorMask(1, 1, 1, 1); 

        // Get color values of intersection area
        ccColor4B *buffer = malloc( sizeof(ccColor4B) * numPixels );
        glReadPixels(x, y, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

        //[_rt end];

        // Read buffer
        unsigned int step = 1;
        for(unsigned int i=0; i<numPixels; i+=step)
        {
            ccColor4B color = buffer[i];

            if (color.r > 0 && color.g > 0)
            {
                isCollision = YES;
                break;
            }
        }

        // Free buffer memory
        free(buffer);
    }

    return isCollision; 
```

编辑：我还发现[了 KKPixelMaskSprite](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)，但它似乎不适用于在 CCSpriteBatchNodes 中批处理的高分辨率精灵（请参阅此处的[评论](https://stackoverflow.com/questions/15697152/kobold2d-pixel-perfect-collision-detection-device-issue)）。

# jquery - 在 JQuery 中更改高度或宽度的两种方法

> ID：13007725
> 
> 赞同：0
> 
> 时间：2012-10-22T08:43:20.047
> 
> 标签：jquery

```
$(selector).height(value)
$(selector).width(value) 
```

我们可以使用以上两种方式来改变`height`or元素`width`的or 。`div`但还有另一种方式，比如

```
$(selector).css({"height": "100px", "width":"100px"}) 
```

既然第二种方法可以应用于所有的css元素，为什么第一种方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:46:26.127

在 jQuery 中，通常有不止一种方法可以做到这一点。

`.height`并且`.width`是简化编程的有用的便捷方法，而是`.css`包含所有功能的通用方法（以稍微麻烦为代价）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:53:29.980

有一个主要区别：您可以使用函数作为返回值的`width()`参数`height()`

```
.height( function(index, height) ) 
```

# php - PHP fwrite 中的 T_ENCAPSED_AND_WHITESPACE 错误

> ID：13007727
> 
> 赞同：0
> 
> 时间：2012-10-22T08:43:33.420
> 
> 标签：php, session

我想在 fwrite() 函数中输入以下代码

```
"<?php 
session_start();
if ($_SESSION['currentuser'] === $username){
echo 'Logged in!';
}else{
echo 'You need to login!';
}?>" 
```

但它向我显示了该行的 T_ENCAPSED_AND_WHITESPACE 错误`if ($_SESSION['currentuser'] === $username){`

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:57:45.100

这看起来不像*应该*写入磁盘的东西，但我不会判断......

您可能不需要任何变量替换，因此您可以使用PHP 5.4 中的[NOWDOC语法：](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

```
$var = <<<'EOD'
<?php 
session_start();
if ($_SESSION['currentuser'] === $username){
echo 'Logged in!';
}else{
echo 'You need to login!';
}?>
EOD;

fwrite($handle, $var); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:04:32.517

你可以试试

```
$data ='<?php 
session_start();
if ($_SESSION[\'currentuser\'] === $username){
echo "Logged in!";
}else{
echo "You need to login!";
}?>' ;

file_put_contents("file.php", $data); 
```

# perl - 在 perl 中将字符串解析为哈希结构

> ID：13007728
> 
> 赞同：1
> 
> 时间：2012-10-22T08:43:36.117
> 
> 标签：perl, parsing, hash

我有以下字符串：

```
$str = "list
    XYZ

    status1    : YES
    value1     : 100
    status2      : NO
    value2     : 200
Thats all"; 
```

我想使用一个函数将其转换为哈希，该函数将此字符串作为输入并返回一个哈希，例如`status1`作为*键*和`YES`作为*值*。

怎么做？
以及如何引用返回的哈希？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T10:11:04.217

像往常一样，**有不止一种方法可以做到这一点**。来了五个。

# 纯正则表达式（是的！）

我认为这是最酷的一个。正则表达式返回所有捕获的列表，这正是我们想要初始化散列的列表：

```
my %regex = $str =~ /(\S+)\s*:\s*(\S+)/g; 
```

# 迭代

对于大多数程序员来说，这是最直接的方式，我认为：

```
my @lines       = split /\R/ => $str;
my %iterative   = ();
for (@lines) {
    next unless /(\S+)\s*:\s*(\S+)/;
    $iterative{$1} = $2;
} 
```

这里没什么好解释的。我首先[`split`](http://p3rl.org/split)将字符串放入行中，然后对其进行迭代，省略看起来不像`foo : bar`. 完毕。

# 列表处理

将所有内容写成一个大列表表达式感觉有点 hackish，但学习更多表达内容的方法也许很有趣：

```
my %list =  map     { /(\S+)\s*:\s*(\S+)/ and $1 => $2 }
            grep    { /:/ }
            split   /\R/ => $str; 
```

*从右到左*阅读：就像上面的例子一样，我们从将字符串分成几行开始。[`grep`](http://p3rl.org/grep)过滤最终映射的行，`:`并在最终映射中转换匹配的行字符串在长度为 2 的列表中，带有一个键和一个值。

# 清单减少

[List::Util](http://p3rl.org/List%3a%3aUtil)的**reduce**函数的重要用例非常罕见。这是一个，基于上面的列表方法，返回一个哈希*引用*：

```
my $reduced = reduce {
    $a = { $a =~ /(\S+)\s*:\s*(\S+)/ } unless ref $a;
    $a->{$1} = $2 if $b =~ /(\S+)\s*:\s*(\S+)/;
    return $a;
} grep { /:/ } split /\R/ => $str; 
```

# 状态机

这是一个有趣的正则表达式，仅用于空格分隔。它需要跟踪一个状态：

```
# preparations
my $state   = 'idle';
my $buffer  = undef;
my %state   = ();
my @words   = split /\s+/ => $str;

# loop over words
for my $word (@words) {

    # last word was a key
    if ($state eq 'idle' and $word eq ':') {
        $state = 'got_key';
    }

    # this is a value for the key in buffer
    elsif ($state eq 'got_key') {
        $state{$buffer} = $word;
        $state          = 'idle';
        $buffer         = undef;
    }

    # remember this word
    else {
        $buffer = $word;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:29:01.313

只是为了好玩（请注意，我建议使用 memowe 之一）这里是（ab）使用 YAML 的一个：

```
#!/usr/bin/env perl

use strict;
use warnings;

use YAML;

my $str = "list
    XYZ

    status1    : YES
    value1     : 100
    status2      : NO
    value2     : 200
Thats all";

$str = join "\n", grep { /:/ } split "\n", $str;
my $hash = Load "$str\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:04:44.340

```
#!/usr/bin/perl
use warnings;

$\="\n";

sub convStr {
        my $str = $_[0];
        my %h1=();
        while ($str =~m/(\w+)\s+:\s+(\w+)/g) {
                $h1{$1} =$2;
        }
        return \%h1;
}

my $str = "list
    XYZ

    status1    : YES
    value1     : 100
    status2      : NO
    value2     : 200
Thats all";

my $href=convStr($str);

foreach (keys(%$href)) {
        print $_ , "=>", $href->{$_};
} 
```

在运行这个，我得到：

```
status2=>NO
value1=>100
status1=>YES
value2=>200 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:27:00.027

```
 my %hhash;
  my @lines = split /\s+\n/, $str;
          foreach (@lines)
          {
            $_=~s/^\s+//g;
            if(/:/)
            {
            $key=(split(/:/))[0];
            $value=(split(/:/))[1];
            $hhash{$key}=$value;
            }
          } 
```

# c - 如何在不接触ffmpeg的情况下将传入的帧写入文件？

> ID：13007732
> 
> 赞同：1
> 
> 时间：2012-10-22T08:43:42.860
> 
> 标签：c, audio, ffmpeg, libavcodec, libavformat

我能够从 av_open_input_file 读取帧并使用另一个编解码器对其进行解码和重新编码并保存到文件中。

现在，我想要同样的东西，除了我不想解码或重新编码。我想在刚刚读取的帧上执行 av_interleaved_write_frame 到文件。为此，我需要设置 AVOutputFormat

AVOutputFormat *fmt; fmt = av_guess_format(NULL, 文件名, NULL);

但是，我不能提供文件名，因为它是一个远程流。那么，有没有办法从已经读取输入帧的当前 AVFormatContext 生成 AVOutputFormat ？所以我可以以正确的方式从它的任何部分（不一定从头开始）将相同的帧写入输出文件。

总结一下：我需要将刚刚读取的帧写入文件而不进行解码和重新编码。（我将再次打开该文件以便能够播放该文件）

有任何想法吗？

# git - 从 SCCS 迁移到 Git

> ID：13007733
> 
> 赞同：5
> 
> 时间：2012-10-22T08:43:45.453
> 
> 标签：git, version-control, solaris

我有一个在 Solaris 10 机器上运行的开发环境。当前使用的 vcs 是 SCCS。计划将此环境转移到运行 Solaris 11 的新机器上。我正在考虑利用这个机会转移到新的 vcs 系统，很可能是 Git。

我想知道我们是否必须在另一个盒子上重新开始，从旧盒子中转储当前回购，或者是否可以保留回购历史？

我做了一些搜索 SCCS 到 Git 的信息似乎相当稀缺。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:54:09.697

似乎有一个“SCCS2Git”脚本，在[这里](http://search.cpan.org/~hmbrand/VCS-SCCS-0.24/SCCS.pm#TODO)提到。它在 TODO 部分，所以只能猜测它的状态，但是源代码是可用的，并且它“最近”（在 2015 年）[被移到了 GitHub 上](https://github.com/Tux/VCS-SCCS)，在那里它得到了一些积极的维护（例如：有最近的提交）。如果你能弄清楚它是如何工作的，也许你可以试一试（显然在备份之后）。

否则我可能会走一条不那么实验的路线，先转换成别的东西。Git 有一个很好的 Subversion 接口，似乎有很多从 SCCS 到 Subversion 的转换器，例如[这个](http://sccs2svn.berlios.de/). 如果您设置了本地 Subversion 存储库，您可能可以快速导出数据，然后使用[git-svn](http://schacon.github.com/git/git-svn.html)将其作为新的 Git 存储库导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T08:52:10.463

您*可以*尝试执行类似**[sccs2git](http://cpansearch.perl.org/src/HMBRAND/VCS-SCCS-0.24/examples/sccs2git-r)**的脚本，尝试将完整历史记录导入新的 Git 存储库。

但是，最好检查该遗留存储库的内容是否不能在*多个*Git 存储库（拆分）中得到最佳管理，以及您是否只能导入最后一个有意义的标签（这使得导入过程更短），同时保留用于存档的只读模式下的旧版存储库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-03T14:58:38.243

这样做的必要性肯定越来越少，但我今天需要这样做，因为这是一个 1986 年基于 curses 的程序。（令人惊讶的是，它只需要很少的调整就可以让它在现代系统上运行。）

我来这里是为了寻找答案，但前两个都不适合我，主要是因为链接到的脚本和实用程序未维护或不再存在。但是，我确实找到了一个很好的解决方案，所以我将它写下来以供任何仍然需要这样做的可怜人使用。

总体规划是SCCS -> RCS -> CVS -> git。不寻常的部分是从 SCCS 到 RCS，但 Eric Raymond 的[sccs2rcs](http://www.catb.org/esr/sccs2rcs/)得到维护并且运行良好。它是一个仅使用核心库的 Python 脚本，因此易于安装并且将来不太可能中断。这取决于是否有可用`sccs`的`rcs`命令，但这些通常可以通过第三方打包系统（例如发行版/自制软件）获得。在 的情况下`sccs`，我使用了[CSSC](http://www.gnu.org/software/cssc/)。

到达 RCS 后，这条路将更加成熟。要将包含`RCS`子目录的目录层次结构转换为 CVS 存储库，您只需将`,v`RCS 文件从这些子目录中上移一层，并`CVSROOT`在顶层添加一个空目录。

为了从 CVS 转到 git，我使用了维护良好的[cvs2svn](https://www.mcs.anl.gov/%7Ejacob/cvs2svn/)实用程序（作为第三方软件包广泛使用）。它提供了一个`cvs2git`脚本，该脚本通过生成供`git fast-import`. 它运行良好，但在如何配置方面有点古怪。您必须复制`cvs2git-example.options`文件并根据需要对其进行调整。我将目录更改`run_options.set_project`为`.`，并将名称添加到`author_transforms`.

我将 RCS -> git 步骤与以下脚本绑定在一起：

```
#!/bin/sh

set -e

MYDIR=$(dirname "$0")

# Move RCS files out of RCS subdirectories
find * -name RCS -type d |
while read RCS
do
    mv -i $RCS/*,v $(dirname $RCS)
    rmdir $RCS
done

# Create git import
mkdir -p CVSROOT
cvs2git --options="$MYDIR/cvs2git.options"
rmdir CVSROOT

# Import to git
git init -b master
cat cvs2git-tmp/git-blob.dat cvs2git-tmp/git-dump.dat | git fast-import
rm -r cvs2git-tmp
git reset --mixed

# Fix up $Id$ keywords
git ls-files | xargs -r sed --in-place '/$Id:/s/\([0-9]\)\//\1-/g'

# Back up RCS files
mkdir -p RCS-backup
find * -path RCS-backup -prune -o -name \*,v -print | cpio -pdml RCS-backup
find * -path RCS-backup -prune -o -name \*,v -print0 | xargs -0 -r rm -f 
```

这可能适用于大多数人，但您确实需要通过编辑包的 contrib 目录中的`cvs2git.options`副本来创建。`cvs2git-example.options``cvs2svn`

# ios - 按钮 sender.superview 显示为 UIViewController 而不是我的 CustomCell？

> ID：13007734
> 
> 赞同：3
> 
> 时间：2012-10-22T08:43:54.543
> 
> 标签：ios, cocoa-touch, uitableview

我在单元格中有按钮，它有一个到自定义单元格的出口，它在我的第一个视图控制器中有一个 IBAction：

```
-(IBAction)AddButton:(UIButton *)sender{

ProductCell *cell = (ProductCell *)sender.superview;
UITableView *tableView - (UITableView *)cell.superview;
NSIndexPath *indexPath = [tableView indexPathForCell:cell];

NSLog(@"Sender: %@, Super: %@", sender, sender.superview);

//[saveitemArray addObject: [itemArray objectAtIndex:(indexPath.row + 1)]];  
//[saveitemArray writeToFile:[self saveListPath] atomically:YES];
} 
```

单步执行代码显示发送方为 UIButton，但变量“单元格”为 FirstViewController。似乎只是完全跳过了单元格和表格。我错过了什么简单的事情？

更新：

好的，所以我已经向您展示了完整的 IBAction，在注释掉最后两行之后，我的单元格变量显示为 CustomCell（正确的超级视图），但现在我的 tableView 变量显示的是 FirstViewController 超级视图而不是 CustomTable？您的 NSLog 显示相同，因此我将其更改为显示 cell 和 cell.superview。结果如下：

```
Sender: <UITableViewCellContentView: 0x716fb20; frame = (0 0; 320 43);     
gestureRecognizers = <NSArray: 0x71711d0>; layer = <CALayer: 0x716fbd0>>, Super:   
<ProductCell: 0x716f820; baseClass = UITableViewCell; frame = (0 0; 320 44); autoresize 
= W; layer = <CALayer: 0x716f990>> 
```

第二次更新：

似乎认为 sender.superview 是 CellContentView 而不是 Cell 本身，因此当我尝试获取 indexPath 时，它会尝试将单元格用作表格并将 CellContentView 用作单元格。我认为没有必要通过 ContentView，我认为按钮中的 .superview 会直接进入单元格本身？

***回答：***

似乎您必须按此顺序遍历层次结构。

按钮 -> CellContentView -> 单元格 -> TableView

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:13:10.933

我认为在接口构建器中连接 IBOutlets 时出了点问题。

在操作中设置断点并尝试在调试器中递归地记录整个视图以检查它：

> po [[自我视图] recursiveDescription];

**更新**：

看起来您根据更新将操作添加到单元格而不是按钮..

**更新 2：**

```
- (IBAction) AddButton:(UIButton *)sender{

    UIView *cellContentView = (UIView *)sender.superview;
    ProductCell *cell = (ProductCell *)cellContentView.superview;
    UITableView *tableView - (UITableView *)cell.superview;
    NSIndexPath *indexPath = [tableView indexPathForCell:cell];

} 
```

或者你可以在这个方法中给按钮一个标签：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //your setup code here..

    cell.yourButton.tag = indexPath.row;

} 
```

.. 如果您只有 1 个部分，请在此处访问索引路径：

```
- (IBAction) AddButton:(UIButton *)sender{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:sender.tag inSection:0];
} 
```

应该这样做！

# database - 服务器设置来托管像谷歌分析这样的工具？

> ID：13007735
> 
> 赞同：0
> 
> 时间：2012-10-22T08:43:58.417
> 
> 标签：database, database-design, architecture, web-statistics

我正在开发一个类似于谷歌分析的分析工具。这将在数​​据库中存储关键字、访问和页面。

所以数据库可以快速增长，因为我希望有很多人使用它。

我应该如何设置数据库？一个数据库用于所有帐户和所有被监控的网站？还是每个帐户都有一个数据库会更好？

另外，我计划从一台专用服务器开始，但我确信将来我需要不止一台服务器，所以我必须牢记这一点来构建它。

我也知道，如果我为每个帐户创建多个数据库，那么当应用程序的架构发生变化时，我将不得不在所有这些数据库上运行升级脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:14:58.123

你打算使用什么样的数据库？关系（PostgreSQL，MySQL）和“NoSQL”（MongoDB，CouchDB）之间有很大的区别

我只会在关系方面谈论 PostgreSQL，因为它是我唯一使用过的数据库。

首先，我会将所有内容保存在一个数据库中。每个帐户使用一个数据库没有任何好处。

其次，您应该绝对确定您将超越单台机器。鉴于这种应用程序您将处理比读取更多的写入，因此主从复制只能用于高可用性，而使用 PostgreSQL 的多主复制并不容易。

从我上次的研究来看，最不痛苦的方法是使用像[Postgres-XC](http://postgresxc.wikia.com/wiki/Postgres-XC_Wiki)这样的工具，它被设计为可写扩展，但我不知道它的生产准备情况如何。

另一种解决方案是使用 Bucardo 或 SkyTools 等工具。没有使用 SkyTools 的经验，但去年让 Bucardo 工作时遇到了很多麻烦。

最后的解决方案是做[分片](https://en.wikipedia.org/wiki/Shard_%28database_architecture%29)。分片的天真方法是执行类似 `shard number = id % 10`. 但是，使用它时，您需要在添加/删除分片时重新平衡集群。这将要求您编写“分片感知”应用程序，以便将查询定向到正确的分片。

无论如何，就像我之前说的，确保你需要先进行分片/集群化。

现在对于“NoSQL”方面，我对任何解决方案都没有经验，但我知道 MongoDB 和 CouchDB 自己处理分片，因此使用这些解决方案更容易，但是你放弃了很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T17:00:33.963

我将扩展文森特的答案。

至于分片，我们在[PL/Proxy](http://wiki.postgresql.org/wiki/PL/Proxy)方面有很好的经验。通过分片，您可以超越单台机器而不会出现问题（读取或写入）。

至于从 Skytools 复制 Londiste[非常](http://wiki.postgresql.org/wiki/SkyTools)容易设置和使用。有了它，你就得到了 PgQ，这是一个非常好的 Postgres 消息传递解决方案。

# iphone - IOS5无法使用核心数据库

> ID：13007736
> 
> 赞同：1
> 
> 时间：2012-10-22T08:44:09.763
> 
> 标签：iphone, ios, database, core-data

我正在使用一个核心数据库，它在 IOS 6 中运行，但是当我尝试在 IOS 5 上对其进行测试时。它什么也没做。让我解释一下我在做什么。

首先，我在 viewWillAppear 中执行此操作。

```
- (void)viewWillAppear:(BOOL)animated
{
    NSLog(@"view appeared");
    [super viewWillAppear:animated];
    if (!self.genkDatabase) {
        NSLog(@"comes to here");
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default appGenk Database2"];
        // url is now "<Documents Directory>/Default Photo Database"
        self.genkDatabase = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
        NSLog(@"database created on disk");
    }

} 
```

然后它出现在 UseDocument 方法中。

```
- (void)useDocument
{
    NSLog(@"Comses in the use document");
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"create");
            [self setupFetchedResultsController];
           [self fetchGenkDataIntoDocument:self.genkDatabase];

        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        NSLog(@"closed news");
        // exists on disk, but we need to open it
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {
            [self setupFetchedResultsController];
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        NSLog(@"normal");
        // already open and ready to use
        [self setupFetchedResultsController];
    }

} 
```

最后进入 setDatabase 方法。

```
- (void)setGenkDatabase:(UIManagedDocument *)genkDatabase
{
    if (_genkDatabase != genkDatabase) {
        _genkDatabase = genkDatabase;
        [self useDocument];
    }
    NSLog(@"Comes in the setdatabase methode.");
} 
```

执行所有这些操作会给出以下日志。

```
2012-10-22 10:42:47.444 RacingGenk[4786:c07] view appeared
2012-10-22 10:42:47.445 RacingGenk[4786:c07] comes to here
2012-10-22 10:42:47.459 RacingGenk[4786:c07] Comses in the use document
2012-10-22 10:42:47.460 RacingGenk[4786:c07] Comes in the setdatabase methode.
2012-10-22 10:42:47.461 RacingGenk[4786:c07] database created on disk 
```

如您所见，它不会在我的使用文档中打印创建日志。因此它无法执行*FetchDataIntoDocument*方法。

**任何人都可以帮我解决这个问题。我现在一直在寻找这个问题。**

非常感谢。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:55:10.973

您是在模拟器上还是在设备上进行测试？模拟器不区分大小写 - 设备在文件访问时区分大小写，记住这一点！

但除此之外，[NSFileManager](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)的文档建议不要检查文件是否存在，而只是尝试读取文件并优雅地处理任何错误（例如文件未找到错误）。所以只需尝试加载文件而不是检查它是否存在。

而且我没有看到您的数据库文件的任何文件扩展名！它只是声明“默认appGenk Database2”。到目前为止，这已经是文件名还是只是另一个子目录？

编辑：

您可以尝试以下代码：

```
- (void) setupStore {
    NSString* storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"mydatabase.sqlite"];

    // Set up the store.
    NSFileManager* fileManager = [NSFileManager defaultManager];
    // If the expected store doesn't exist, create one.
    if (![fileManager fileExistsAtPath: storePath]) {
        // create your store here!
    }
}

- (NSString*) applicationDocumentsDirectory {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
} 
```

“mydatabase.sqlite”是您希望出现在文档目录中的数据库文件的名称。

如果您想查看有关如何设置核心数据持久存储的完整示例，您可以查看苹果自己的[iPhoneCoreDataRecipes](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html)示例。看看

> 食谱AppDelegate.m

执行。

# sql-server - SSAS 中的错误日志记录

> ID：13007737
> 
> 赞同：4
> 
> 时间：2012-10-22T08:44:11.893
> 
> 标签：sql-server, error-handling, ssas

我们每天都在工作活动监视器中处理多维数据集，但是在周末我们会收到诸如“多维数据集处理失败”之类的电子邮件通知。有没有办法在多维数据集上维护错误日志（如在 ssis 中）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T00:03:13.670

维护 Analysis Services 错误日志的关键机制是：

1.  跟踪存储在**msmdsrv.log**中的数据。有必要在日志被覆盖之前将其复制。
2.  如果您使用的是 Analysis Services 2005、2008 或 2008 R2，您可以生成自己的跟踪事件，如Analysis Services 处理最佳实践后的**系统范围跟踪文件部分所述：** [http ://technet.microsoft.com /en-us/library/cc966525.aspx#EBAA](http://technet.microsoft.com/en-us/library/cc966525.aspx#EBAA)
3.  如果您使用的是 SQL Server 2012，则可以使用 SSAS 文档中所述的**XEvents**功能使用 SQL Server 扩展事件 (XEvents) 监控分析服务，网址为：http: [//msdn.microsoft.com/en-us/library/ gg492139.aspx](http://msdn.microsoft.com/en-us/library/gg492139.aspx)

另一种方法是使用在后台运行的 SQL Server Profiler，这样您就可以记录所有事件。但这类似于#2 选项。

另请注意，就资源利用率而言，#3 选项（使用 XEvents）对 Analysis Services 服务器的影响最小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:57:26.470

根据[文档](http://msdn.microsoft.com/en-us/library/ms174827.aspx)，日志记录是通过许多定义日志记录行为和位置的服务器属性来配置的。

# c++ - 多维数组的长度

> ID：13007741
> 
> 赞同：0
> 
> 时间：2012-10-22T08:44:31.970
> 
> 标签：c++, arrays

我有一个简单的矩阵运算程序，但是我有一个问题->例如我有数组 [3] [3]，我需要一些方法来获取维数-在这种情况下为 3，这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int **count()
{
    printf("Write number of rows and collumns in format ROWS space COLLUMNS");
    int i = 0;
    int j = 0;
    scanf("%i %i", &i, &j);
    int **mat1 = (int**)malloc(i*sizeof(int*));
    for (int x = 0; x < j;x++){
        mat1[x] = (int*)malloc(j*sizeof(int));
    }
    for (int x = 0; x < i;x++){
        for (int y = 0; y < j;y++){
            scanf("%i",&mat1[x][y]);
        } 
    }

    printf(Write number of rows and collumns in format ROWS space COLLUMNS");
    int i2 = 0,j2 = 0;
    scanf("%i %i", &i2, &j2);
    int **mat2 = (int**)malloc(i2*sizeof(int*));
    for (int x2 = 0; x2 < j2;x2++){
        mat2[x2] = (int*)malloc(j2*sizeof(int));
    }
    for (int x2 = 0; x2 < i2;x2++){
        for (int y2 = 0; y2 < j2;y2++){
            scanf("%i",&mat2[x2][y2]);
        } 
    }

    int i3 = i, j3 = j; 
    int **mat3 = (int**)malloc(i3*sizeof(int*));
    for (int x = 0; x < j3;x++){
        mat3[x] = (int*)malloc(j3*sizeof(int));
    }

    for (int x3 = 0; x3 < i3;x3++){
        for (int y3 = 0; y3 < j3;y3++){
            mat3[x3][y3] = mat1[x3][y3] + mat2[x3][y3];
        } 
    }
    return mat3;
}

int writeMatrix(int **mat, int rows, int collumns)
{
        int i = rows, j=collumns;
        for (int x = 0; x < i;x++){
            for (int y = 0; y < j;y++){
                printf("%3i ",mat[x][y]);
                }
            printf("\n");
        }
        return 0;
}

int main()
{

    int **m1 = count();
    writeMatrix(m1,x,x);//HERE I NEED TO KNOW NUMBER OF ROWS AND COLLUMNS
    free(m1);
} 
```

这是在普通数组 [] [] 的情况下对我有用但在这种情况下不适用于我的代码 -

```
int y = (sizeof(m1)/sizeof(m1[0][0])) / (sizeof(m1)/sizeof(m1[0])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:50:03.577

如果你不知道第一个维度的大小，你就不能有一个多维数组，你需要一个锯齿状数组（一个数组数组），就像你做的那样。

然后你仍然可以获得分配的行数和列数。`count`将原型更改为：

```
int** count(int& rows, int& columns) 
```

并在其中进行这些分配（在您阅读了 i 和 j 的值之后）：

```
rows = i;
columns = j; 
```

并像这样打电话`count`：`main`

```
int rows;
int columns;
int** m1 = count(rows, columns); 
```

然后你可以调用writeMatrix：

```
writeMatrix(m1, rows, columns); 
```

顺便说一句，除非您出于教育目的这样做，否则您应该使用`std::vector<std::vector<int>>`（或一些类似的数组类），而不是 int**。

# c# - 如何清除扩展名为 .bin 的文件的内容

> ID：13007742
> 
> 赞同：0
> 
> 时间：2012-10-22T08:44:34.757
> 
> 标签：c#, .net

我需要清除扩展名为 .bin 的特定文件的内容。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:47:30.190

要保持文件大小为零，您可以执行以下操作：

```
System.IO.File.WriteAllText(@"particular.bin", String.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:57:12.847

它将递归删除 D:\test 目录下所有扩展名为 .bin 的文件。

```
if (Directory.Exists(@"D:\test"))
{
    string[] files = Directory.GetFiles(@"D:\test", "*.*", SearchOption.AllDirectories);
    foreach (string file in files)
    {
        FileInfo fileInfo = new FileInfo(file);
        if (fileInfo.Name.EndsWith(".bin"))
        {
            File.Delete(file);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:01:49.253

```
using System;
using System.Text;
using System.IO;

namespace ClearContents
{
    public partial class Form1 : Form
    {
        private void btnClear_Click(object sender, EventArgs e)
        {
            //get all the files which has the .bin extension in the specified directory
            string[] files = Directory.GetFiles("D:\\", "*.bin");

            foreach (string f in files)
            {
                File.WriteAllText(f, string.Empty); //clear the contents
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T09:20:42.310

这段代码`clears`是传入的bin文件。'clear'的含义定义为：

> 将传递文件中的每个字节设置为零并保留现有文件大小

```
private void SetFileToZero(string inputFile)
{
    // Remove previous backup file
    string tempFile = Path.Combine(Path.GetDirectoryName(inputFile), "saved.bin");
    if(File.Exists(tempFile)) File.Delete(tempFile);

    // Get current length of input file (minus 4 byte)
    FileInfo fi = new FileInfo(inputFile);
    int pos = Convert.ToInt32(fi.Length) - 4;
    string name = fi.FullName;

    // Move the input file to "saved.bin"
    fi.MoveTo(tempFile);

    // Create a zero byte length file with the requested name
    using(FileStream st = File.Create(name))
    {
      // Position the file pointer at a position 4 byte less than the required size
      UTF8Encoding utf8 = new UTF8Encoding();
      BinaryWriter bw = new BinaryWriter(st, utf8);
      bw.Seek(pos, SeekOrigin.Begin);

      // Write the last 4 bytes
      bw.Write(0);
    }
} 
```

操作系统尊重在文件中某个位置写入的请求，即使该位置超出实际长度也是如此。为此，操作系统将文件扩展到请求的长度并用零填充。（这真的很快，延迟几乎不明显）
注意出于安全原因，我制作了文件的备份副本，并且在 MoveTo 之后，不要使用 FileInfo var 中的信息，因为它会更改为引用移动的文件。

# php - 浏览到特定幻灯片 - jquery 循环

> ID：13007744
> 
> 赞同：0
> 
> 时间：2012-10-22T08:44:46.533
> 
> 标签：php, javascript, jquery, ajax, wordpress

我有一个页面，其中包含来自自定义字段的某些图像缩略图。我需要做的是让图像拇指上的链接直接链接到滑块中的图像，问题是滑块在其他页面中不一样。

这是我用来从自定义帖子转发器字段中获取图像的代码：

```
<?php $query = new WP_Query( 'post_type=artworks_post&posts_per_page=-1&order=DESC' ); ?>
<?php while ( $query->have_posts() ) : $query->the_post(); ?>

<?php  $slides = get_field('project_slider');  
    // Grabs the array
     if($slides) {     
       foreach($slides as $s) {  
              echo '<div id="project_slider" class="item"> ';     
              echo '<div class="aimagediv" >'; //
              echo '<a>';          
              echo '<img src="'.$s['project_image'].'" alt="" width="240" />';
              echo '</a>';
              echo '</div>'; //aimagediv     
              echo '<div class="art_title">';        
              echo '<p>SWEET LIFE</p>';        
              echo '</div>';        
              echo '<div class="mask">';        
              echo '</div>';  
              echo '</div>'; //first div
             }
         }
 ?>  
 <?php endwhile; // end of the loop. ?> 
```

我正在使用它来链接到滑块页面（我知道这样的链接是错误的，但我必须这样做才能向您展示它如何链接到滑块）：

```
$('#project_slider').click(function() {
    location.href = '?page_id=42';
}); 
```

这是我用于滑块的 jquery 循环插件的代码：

```
$("#slideshow").css("overflow", "hidden");

$('ul#slides').cycle({
    fx:       'fade',
    timeout:   0,
    prev: '#prev',
    next: '#next',
    after:     onAfter
});

function onAfter(curr,next,opts) {
    var caption = '' + (opts.currSlide + 1) + ' / ' + opts.slideCount;
    $('.project_number p').html(caption);
} 
```

如何修复将每个项目链接到滑块中的相应位置，而不是始终在滑块的起始图像中打开？

这是我想要实现的一个工作示例： loscarpinteros.net/#exhibitions 任何图像都会让您在滑块位置找到它的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:32:07.770

```
<?php $query = new WP_Query( 'post_type=artworks_post&posts_per_page=-1&order=DESC' ); ?>
<?php while ( $query->have_posts() ) : $query->the_post(); ?>

<?php  $slides = get_field('project_slider');  
    // Grabs the array
     if($slides) {    
       $i = 0; 
       foreach($slides as $s) {  
              echo '<div id="project_slider" counter="'.$i++.'" class="item"> ';     
              echo '<div class="aimagediv" >'; //
              echo '<a>';          
              echo '<img src="'.$s['project_image'].'" alt="" width="240" />';
              echo '</a>';
              echo '</div>'; //aimagediv     
              echo '<div class="art_title">';        
              echo '<p>SWEET LIFE</p>';        
              echo '</div>';        
              echo '<div class="mask">';        
              echo '</div>';  
              echo '</div>'; //first div
             }
         }
 ?>  
 <?php endwhile; // end of the loop. ?> 
```

在 JS 中

```
$('#project_slider').click(function() {
    location.href = '?page_id=42&slide='+$(this).attr('counter');
}); 
```

并在 JQuery 循环中

```
function getURLParameter(name) {
    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
}

$("#slideshow").css("overflow", "hidden");

$('ul#slides').cycle({
    fx:       'fade',
    timeout:   0,
    prev: '#prev',
    next: '#next',
    after:     onAfter,
    startingSlide:     getURLParameter('slide'),
});

function onAfter(curr,next,opts) {
    var caption = '' + (opts.currSlide + 1) + ' / ' + opts.slideCount;
    $('.project_number p').html(caption);
} 
```

顺便说一句，您可以在 php 循环中制作`href`标签`a`。

# mongodb - Linode + MongoHQ，还是托管我自己的数据库？

> ID：13007748
> 
> 赞同：1
> 
> 时间：2012-10-22T08:44:55.543
> 
> 标签：mongodb, amazon-web-services, hosting, linode, mongohq

我正在使用 python/flask/mongodb 开发一个项目，并且需要弄清楚托管/基础设施。

更喜欢使用 VPS 而不是 Heroku 之类的服务。

您认为哪个是更好的选择？a) Linode 应用程序/Web 服务器 + mongoHQ b) Linode 应用程序/Web 服务器 + mongodb & 在几个 Linodes 上设置副本 c) 带有 MongoHQ 的 AWS EC2（sicne mongohq 也托管在 EC2 上） d) 还有其他可取的建议吗？

我一般在 Linux/DB 方面经验丰富，因此更关心维护工作，分散了我交付实际应用程序功能的注意力。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:53:19.627

这是一个很难回答的问题，因为没有正确的答案。

这一切都取决于您的流量、应用程序正常运行时间需求以及最终您的人力和基础设施。

如果你是一个人的创业公司并且对 Mongo DB 知识有限（即设置副本集、分片等），那么请选择 Mongo HQ。我已经用 Heroku 作为应用层做了一些测试实例，它们运行良好。

随着您的成长，聘请专门的 mongo 人员和/或注册付费 10gen 支持可能是个好主意，这也使您可以访问他们的监控控制台和其他好东西来帮助管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T23:12:18.970

我唯一的建议是查看您的查询...在生成搜索结果页面时，仅从数据库中指定您想要和需要的字段...您的吞吐量和延迟通常比远程系统查询的执行时间更大一个问题。

另请查看 MongoLab 或 MongoHQ 是否有从优先连接到您选择的 vps 站点的站点或托管。

拥有托管数据库托管可能是一件非常好的事情。

# jquery-ui - 在 jqgrid 搜索弹出窗口中，当我添加新字段时，先前插入的值自动完成被清除

> ID：13007755
> 
> 赞同：1
> 
> 时间：2012-10-22T08:45:15.317
> 
> 标签：jquery-ui, jqgrid

首先，我在城市输入中引入一个文本，城市输入是自动完成的（Jquery UI），然后我选择一个地区并回车。之后我添加新字段进行搜索。当我按下新字段时，jqgrid 清除城市字段。

![用户界面图片](../Images/8a6508b02e828d04f313222393aefc39.png)

这是我的代码的一部分。

```
{
        name:'City',
        index:'City',
        width:220, 
        align:"center",
        sortable:true,
        editable:true, 
        edittype:'select',
        editoptions:{
            value:load_City
        },
        stype:'text',
        searchoptions:{
            dataInit:function(el){
                $(el).autocomplete({
                                    selectFirst:true,
                                    source: "Codigo/Datos/localidades.php?autocomplete=verdadero"  
                                    })
             },
        sopt:['eq','ne','lt','le','gt','ge']
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:02:39.323

如果我正确理解您的问题，您应该`change`在选择自动完成中的新值后添加应该触发事件：

```
$(el).autocomplete({
    selectFirst: true,
    source: "Codigo/Datos/localidades.php?autocomplete=verdadero",
    select: function (event) {
        $(el).trigger('change');
    }
}); 
```

# java - Java 信任 ssl CA

> ID：13007756
> 
> 赞同：0
> 
> 时间：2012-10-22T08:45:18.523
> 
> 标签：java, ssl, keystore, axis

我想我在这里没有想法。

我正在尝试在具有 ssl 证书的 java 中使用 Web 服务。

我创建了一个已添加证书的密钥库文件。该文件位于我的项目文件夹中。

我使用以下方法导入它：

```
System.setProperty("javax.net.ssl.keyStore", "folder\\keystore.jks");
System.setProperty("javax.net.ssl.keyStorePassword", "SECRET"); 
```

显然，Web 服务调用会检查密钥库，因为当提供错误的文件路径时，应用程序会在调用 WS 时引发异常，而不是在设置系统属性时。

无论如何，当给出密钥库文件的正确路径时，我仍然得到

> AxisFault faultCode：{http://xml.apache.org/axis/}HTTP faultSubcode：faultString：（401）需要授权

有人告诉我，我必须信任 CA，才能让这一切奏效。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:34:37.273

我想到了。显然，该服务使用 HTTP Basic 身份验证。

Axis 生成的 Stub（扩展 org.apache.axis.client.stub）在构造函数中需要以下 2 行

```
((org.apache.axis.client.Stub) this)._setProperty(org.apache.axis.client.Call.USERNAME_PROPERTY, "HTTPUSER");
((org.apache.axis.client.Stub) this)._setProperty(org.apache.axis.client.Call.PASSWORD_PROPERTY, "HTTPPW"); 
```

谢谢你的帮助。

问候

# java - 使用外部模式引用生成 JAXB 类

> ID：13007758
> 
> 赞同：1
> 
> 时间：2012-10-22T08:45:33.717
> 
> 标签：java, xml, jaxb, xsd

我正在使用导入外部模式的模式生成 JAXB 类。此外部架构与源架构位于同一文件夹中。类的生成没有任何错误，生成后有两个包，一个用于导入的模式，另一个用于导入它的模式。但是，在元素引用到导入的模式时，更准确地说是在以下行：

**@XmlElementRef(name = "elementName", namespace = "http://importedSchema/url", type = JAXBElement.class)**

我收到一个错误：

**“XML 注册表中没有与命名空间 'http://importedSchema/url' 和名称 'elementName' 匹配的 XML 元素 decl。** ”

以名称“elementName”引用的元素位于另一个包中。我可以在 ObjectFactory.java 中看到它的类和它，但不幸的是，我收到了这个错误。

有谁知道如何解决这个问题？

提前致谢。

铌

**架构根标签：**

```
<xsd:schema targetNamespace="http://mySchema"
    elementFormDefault="qualified" attributeFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://mySchema" xmlns:es="http://importedSchema/url">
    <xsd:import schemaLocation="ESchema.xsd" namespace="http://importedSchema/url"> 
```

**元素参考：**

```
<xsd:complexType name="myType">
<xsd:sequence>
    <xsd:element ref="es:elementName"></xsd:element>
</xsd:sequence>
</xsd:complexType> 
```

# git - git rebase 结果

> ID：13007759
> 
> 赞同：3
> 
> 时间：2012-10-22T08:45:44.917
> 
> 标签：git, git-rebase

这是我第一次尝试了解 git rebase 是如何工作的。我在新分支上做了很多更改，然后我尝试`git rebase`了，结果我得到了下一个输出：

```
$ git rebase master
First, rewinding head to replay your work on top of it...
Applying: new features done
/sandbox/.git/rebase-apply/patch:2825: trailing whitespace.
    var upl_div = document.getElementById('upload_form');
/sandbox/.git/rebase-apply/patch:2826: trailing whitespace.
    var crt_div = document.getElementById('create_form');
/sandbox/.git/rebase-apply/patch:2827: trailing whitespace.
    var appl_div = document.getElementById('create_letter');
warning: squelched 309 whitespace errors
warning: 314 lines add whitespace errors.
Using index info to reconstruct a base tree...
<stdin>:2825: trailing whitespace.
    var upl_div = document.getElementById('upload_form');
<stdin>:2826: trailing whitespace.
    var crt_div = document.getElementById('create_form');
<stdin>:2827: trailing whitespace.
    var appl_div = document.getElementById('create_letter');
warning: squelched 310 whitespace errors
warning: 309 lines applied after fixing whitespace errors.
Falling back to patching base and 3-way merge...
Auto-merging lib/functions_common.inc
Auto-merging .htaccess
Applying: new features done 
```

而且我不明白它是否成功制作？它被重新定位或合并？发生了什么？我怎么能看到这些警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T08:55:03.593

当你做一个 rebase 时，git 会接受一堆提交，并尝试应用每个提交的更改依次引入。（换句话说，它就像 . 的一系列使用`git cherry-pick`。）这些重新应用程序中的每一个都可以使用 git 的合并机制来尝试通过将更改重新应用到新父级来解决可能出现的任何冲突。

所以，是的，你刚刚做了一个 rebase，但是 rebase 的每一步都可能涉及使用 git 的代码进行合并。

“尾随空格”警告告诉您应用更改在末尾添加了一些带有空格的行。git 对此很敏感（显然因为[它可能会导致通过电子邮件发送的补丁出现问题](https://stackoverflow.com/q/1583406/223092)），并且会在各种情况下警告您此类空白。“压制”错误只是说，与其打印出数百个此类警告，不如将它们压制为一行。

# ios - IOS - 从设备中删除应用程序后如何打开网站

> ID：13007761
> 
> 赞同：0
> 
> 时间：2012-10-22T08:45:52.587
> 
> 标签：ios

我是 iOS 编程新手，需要一些关于如何在应用程序被删除后链接到网站的指导。例如，当用户单击“X”按钮，删除应用程序及其存储的任何数据时，代码应该打开一个网站。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T08:49:33.513

不，Apple 不允许您使用 SpringBoard 来检测应用程序删除。没有解决方法，这是不可能的。

# android - 构建后步骤：将库和标头复制到特定位置

> ID：13007762
> 
> 赞同：2
> 
> 时间：2012-10-22T08:45:57.680
> 
> 标签：android, android-ndk

我正在尝试查找有关如何`post-build`为我的静态库添加目标的信息，该目标将库及其关联的头文件复制到特定目录。

我读过`LOCAL_EXPORT_C_INCLUDES`但我仍然不确定它到底做了什么，因为它似乎没有为我复制标题。

通常我想复制`lib`to`$(LOCAL_PATH)/../lib`和 headers `$(LOCAL_PATH)/../include`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T23:34:12.740

将以下内容添加到`Android.mk`, after的末尾`include $(BUILD_SHARED_LIBRARY)`：

```
all: $(LOCAL_PATH)/../lib/$(notdir $(LOCAL_BUILT_MODULE))

$(LOCAL_PATH)/../lib/$(notdir $(LOCAL_BUILT_MODULE)): $(LOCAL_BUILT_MODULE)
    cp $< $@
    cp $(wildcard $(LOCAL_PATH)/*.h $(LOCAL_PATH)/../include 
```

请注意，**make**需要前导`tab`，而不是前面的空格`cp`。

最后一行可以不同地定义以复制编译器可用的所有包含文件：

```
 cp $(wildcard $(LOCAL_C_INCLUDES)/*.h $(LOCAL_PATH)/../include 
```

但是没有办法自动选择哪些`.h`文件应该被复制，哪些文件应该被保留。

# visual-studio-2010 - Visual Studio 自定义向导 - 添加附加配置

> ID：13007767
> 
> 赞同：1
> 
> 时间：2012-10-22T08:46:17.833
> 
> 标签：visual-studio-2010, templates, configuration, build

我正在编写一个用于创建 C++ 项目的 Visual Studio 自定义向导。

我需要定义额外的构建配置，它继承了调试配置。

我google了很多，但找不到任何东西。

我想这应该在 JScript 文件 ( `default.js`)`AddConfig`函数中通过调用`proj.Object.AddConfiguration`. 但我找不到示例，也找不到语法规则。

我发现的唯一一件事是： http: [//www.codeproject.com/Articles/200039/A-Visual-Studio-Wizard-to-add-more-project-configu](http://www.codeproject.com/Articles/200039/A-Visual-Studio-Wizard-to-add-more-project-configu)但它太复杂了，我做不到想办法。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T09:33:41.987

找到了。可以使用 C# 代码完成：

```
solution.SolutionBuild.SolutionConfigurations.Add("Conf", "Debug", true);
//set Conf to be active build configuration
solution.SolutionBuild.SolutionConfigurations.Item("Conf").Activate();
//Get project
VCProject pro = solution.Projects.Item(1).Object;
//Get comiler tool for project
VCCLCompilerTool tool = pro.Configurations.item("Conf").Tools("VCCLCompilerTool");
//set Prprocessor definition for Conf
tool.PreprocessorDefinitions = "NEW"; 
```

# objective-c - 如果UIThread长时间阻塞，ios应用程序会被杀死吗？

> ID：13007773
> 
> 赞同：1
> 
> 时间：2012-10-22T08:46:39.130
> 
> 标签：objective-c, ios, memory-management, ui-thread

我有一个奇怪的问题。如果我的 UI 线程被长时间阻塞（比如 10 秒），我的应用程序就会被杀死。我想在循环更新视图后重复截图。这是一个耗时的过程。但是我的应用程序被杀死并且没有收到内存警告。我的问题是，如果 UI 线程被长时间阻塞，我的应用程序会被终止吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:53:35.730

这个是正常的。如果每个应用程序在 UI 线程中花费了很长时间，iOS 不会让应用程序冻结，而是会监视它们。您是否有任何理由必须在单个运行循环中截取屏幕截图？为什么不设置一个[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)回调并在每次执行时只截取一个屏幕截图？

# window - DDK 示例 passthru 未在 win7 中加载

> ID：13007775
> 
> 赞同：0
> 
> 时间：2012-10-22T08:46:57.320
> 
> 标签：window, driver, wdk, ndis, passthru

我正在开发基于 ddk 示例“passthru”的驱动程序，但在 win7（x86 或 x64）中加载此驱动程序时遇到问题。我已经在 winxp（x86 和 x64）中测试了我的驱动程序，它运行得很好，但是当我尝试将此驱动程序加载到 win7（F8->禁用驱动程序签名强制）时，它似乎失败了。然后，我尝试了本机 passthru 代码，它也失败了。我以为它失败了，因为

1.  我看不到使用 KdPrint fron windbg 的任何输出。
2.  我无法从系统事件中看到任何有用的信息。
3.  我在 passthru!DriverEntry 上设置了断点，似乎 DriverEntry 没有被调用。

我的WDK是7600.16385.1，passthru应该是兼容win7的。我使用命令“build -cZ”编译 passthru。你能帮我理解这个问题，或者任何关于为什么在win7中没有加载passthru的线索吗？

我在win7 x86下编译过这个驱动，检查编译环境，在win7 x86下测试过。

已解决：实际上驱动已经加载，但是win7默认不显示KdPrint的输出，应该使用KdPrintEx指定消息级别，或者修改注册表显示调试信息。现在我也不知道为什么 bp 也失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:26:57.503

好吧，您的问题相当不具体，但我在这里看到一个特殊问题：启用测试签名和禁用内核模式签名策略仍然需要您对二进制文件进行*签名*...（在 WHQL 测试之后，MS 将为驱动程序*交叉签名*`.cat`文件）。参考[这个](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553484.aspx)。

看：

> 对于 64 位版本的 Windows Vista 和更高版本的 Windows，内核模式代码签名策略要求所有内核模式代码都具有数字签名。

和：

> 操作系统加载程序和内核加载由任何证书签名的驱动程序。证书验证不需要链接到受信任的根证书颁发机构。但是，每个驱动程序映像文件都必须具有数字签名。

这些命令应该允许加载用*任何东西签名的驱动程序*

```
bcdedit.exe -set loadoptions DDISABLE_INTEGRITY_CHECKS
bcdedit.exe -set TESTSIGNING ON 
```

* * *

您没有提及构建时选择的目标操作系统。[Icepack](https://stackoverflow.com/users/1756636)提到了它。您需要实际构建*Windows* 7 以使其与新的 NDIS 6.0 一起使用。简单地加载为 XP（和旧 NDIS 版本）构建的驱动程序可能根本不起作用。

我的建议是，使用[DDKBUILD.CMD](http://www.osronline.com/article.cfm?article=43)并使用（免费构建，W7）构建一个驱动程序：

```
ddkbuild.cmd -W7 fre . -cZ 
```

和一个（免费构建，WXP）

```
ddkbuild.cmd -W7XP fre . -cZ 
```

上面的命令行已经考虑了你拥有的 WDK。请注意，如果`DDKBUILD.CMD`无法检测到您已安装的 WDK，您必须将环境变量设置`W7BASE`为指向安装 WDK 的文件夹（带有 的文件夹`install.htm`，通常类似于`C:\WINDDK\7600.16385.1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:13:07.660

通常，您不能在 Win7 机器上使用为 WinXP 目标构建的驱动程序。为 Win7 目标重建。

# cakephp - 在 CakePHP 2.2 中将命名参数转换为 GET 参数以进行分页

> ID：13007777
> 
> 赞同：0
> 
> 时间：2012-10-22T08:47:09.037
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我正在尝试按照[文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#using-get-parameters-for-pagination)中给出的说明将命名参数转换为 GET 参数以在 CakePHP 2.2 上进行分页，但它不起作用。

而不是这个：

```
http://localhost/cake/posts/yourPosts/page:2?url=posts%2FyourPosts 
```

我要这个：

```
http://localhost/cake/posts/yourPosts/?page=2&url=posts%2FyourPosts 
```

问题是，当我使用 GET 方法提交表单时，我不想保留当前页面，目前，它默认这样做，因为它不是普通参数而是命名参数。

（*?url=posts%2FyourPosts*使用 GET 方法自动添加）

在我看来，我已经尝试过这样做，但它仍然将参数作为命名参数传递：

```
$this->Paginator->options(array('convertKeys' => array('page')));

echo $this->Paginator->next(' >', array('class' => 'button next right'), null, array('class' => 'next button')); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:06:20.703

您应该从源头解决问题，而不是隐藏它： [http ://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#pagination-with-get-parameters](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#pagination-with-get-parameters)

```
public $paginate = array(
    'paramType' => 'querystring'
); 
```

在你的控制器中

# java - 访问 hashmap 的值

> ID：13007778
> 
> 赞同：9
> 
> 时间：2012-10-22T08:47:11.573
> 
> 标签：java, android

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

我有一个地图，`Map<String, Records> map = new HashMap<String, Records> ();`

```
public class Records 
{
    String countryName;
    long numberOfDays;

    public String getCountryName() {
        return countryName;
    }
    public void setCountryName(String countryName) {
        this.countryName = countryName;
    }
    public long getNumberOfDays() {
        return numberOfDays;
    }
    public void setNumberOfDays(long numberOfDays) {
        this.numberOfDays = numberOfDays;
    }

    public Records(long days,String cName)
    {
        numberOfDays=days;
        countryName=cName;
    }

    public Records()
    {
        this.countryName=countryName;
        this.numberOfDays=numberOfDays;
    } 
```

我已经实现了 map 的方法，现在请告诉我如何访问 hashmap 中存在的所有值。我需要在 android 的 UI 上显示它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:25:58.113

您可以通过使用 for 循环来做到这一点

```
Set keys = map.keySet();   // It will return you all the keys in Map in the form of the Set

for (Iterator i = keys.iterator(); i.hasNext();) 
{

      String key = (String) i.next();

      Records value = (Records) map.get(key); // Here is an Individual Record in your HashMap
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:50:00.137

你可以使用[`Map#entrySet`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#entrySet())方法，如果你想从你的`keys`并行`values`访问`HashMap`： -

```
Map<String, Records> map = new HashMap<String, Records> ();

//Populate HashMap

for(Map.Entry<String, Record> entry: map.entrySet()) {
    System.out.println(entry.getKey() + " : " + entry.getValue());
} 
```

此外，您可以覆盖类`toString`中的方法，以便在循环打印它们时`Record`获取您的字符串表示。`instances``for-each`

**更新**： -

如果您想按字母顺序对您进行排序，您可以将您`Map`的转换为. 它会自动放置按键排序的条目：-`key``Map``TreeMap`

```
 Map<String, Integer> treeMap = new TreeMap<String, Integer>(map);

    for(Map.Entry<String, Integer> entry: treeMap.entrySet()) {
        System.out.println(entry.getKey() + " : " + entry.getValue());

    } 
```

有关更详细的说明，请参阅这篇文章：-[如何在 Java 中按键对 Map 值进行排序](https://stackoverflow.com/questions/922528/how-to-sort-map-values-by-key-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:49:43.350

`map.values()`给你一个`Collection`包含所有值的`HashMap`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T08:49:46.900

如果您已经`HashMap`准备好使用数据，那么您只需要遍历`HashMap`键。只需实现一个迭代并一个一个地获取数据。

检查这个：[遍历 HashMap](https://stackoverflow.com/questions/1066589/java-iterate-through-hashmap)

# javascript - 我可以测试对 javascript addRule 的支持以在 addRule/insertRule 之间切换吗？

> ID：13007785
> 
> 赞同：2
> 
> 时间：2012-10-22T08:47:36.087
> 
> 标签：javascript, css, internet-explorer, methods

我需要使用`insertRule`通过 Javascript 修改一些 CSS。我还需要支持 IE7-8，所以我需要一些方法来区分 Javascript 是否应该使用`insertRule`或`addRule`（不使用浏览器嗅探）。

这是我正在尝试的，但它不起作用：

```
var sheets = document.styleSheets   
if(sheets.insertRule) {
    alert("insert");
    // insert 
} else {
    alert("add");
    // add
} 
```

知道这是否可能以及如何使其工作？

**编辑：**
如果我在 IE8 中运行它，页面上会出现错误`object does not support this property or method`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:05:00.543

IE8 中似乎没有错误，[这一](http://jsfiddle.net/4jPP5/show/)测试运行证明了这一点。

```
var sheets = document.styleSheets   
if(sheets.insertRule) {
    alert("insert");
    // insert
} else {
    alert("add");
    // add
} 
```

问题可能是由于您用注释替换的代码调用了未定义的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T05:31:59.893

我在 Firefox 上测试了以下内容，它有效，只给了我 insertRule。您需要指定要使用的样式表。

希望这对需要它的人有所帮助。

```
var sheets = document.styleSheets[0];   

if (sheets.addRule) {
    alert("addRule");
}

if (sheets.insertRule) {
    alert("insertRule");
} 
```

# java - cxf 的外部加密和签名属性文件

> ID：13007786
> 
> 赞同：3
> 
> 时间：2012-10-22T08:47:38.927
> 
> 标签：java, web-services, cxf

我需要使用 CXF 调用安全的 Web 服务。我有两个文件`server.properties`，`client.properties`它们基本上定义了用户名、别名、密码和证书存储的位置，用于对传出的 ws 请求进行签名和加密。

当属性文件位于 jar 中的类路径上时，这非常有效。

现在我想将属性文件放在配置文件夹中的 jar 之外。可能吗？我试图将文件位置添加到类路径，然后将配置文件夹添加到类路径，但它没有用。

我总是得到这个例外：

```
org.apache.ws.security.WSSecurityException: General security error (Cannot load the resource client.properties) 
```

# vb.net - 如何在 sql server 2005 的 where 子句中使用多个列？

> ID：13007787
> 
> 赞同：0
> 
> 时间：2012-10-22T08:47:40.713
> 
> 标签：vb.net, sql-server-2005, where-clause

我想用他的名字搜索员工的身份证。所以我拿了一个文本框来输入他的名字和一个搜索按钮。员工的 ID 和姓名存储在 Employee 表中，但姓名存储在 3 列中，即名字、中间名和姓氏。所以我的问题是如何为搜索 ID 编写查询，因为我必须使用上面提到的 3 列来将名称与在文本框中输入的名称进行比较。

这个你能帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:06:53.590

你可以这样尝试

```
SELECT Id FROM Employee 
Where FirstName + ' ' + MiddleName + ' '+LastName = 'Sample Name Here' 
```

但是您应该检查在文本框中输入的文本之间的空格。

# vba - 使用 VBA 创建包含链接的外链日历条目

> ID：13007791
> 
> 赞同：1
> 
> 时间：2012-10-22T08:47:56.260
> 
> 标签：vba, outlook

我正在使用 VBA 在 Outlook 日历中创建一个条目。这工作正常。我希望日历条目包含指向另一个文档的链接。将链接添加到 Outlook 日历条目的正文字段的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:01:13.957

您需要获取关联的 WordObject，然后必须将文本与超链接关联。

您可以执行以下操作：

```
Dim objInsp as Object, objDoc as Object
Set objInsp = appointmentItem.GetInspector
Set objDoc = objInsp.WordEditor

link = "http://www.yourlink.com"
linkText = "LinkText"
Set selection = objDoc.Windows(1).Selection
objDoc.Hyperlinks.Add selection.Range, link, "", "", linkText, "" 
```

（**[参考](http://msdn.microsoft.com/en-us/library/dd492012.aspx)**）

# c++ - 一个宏可以在不同的地方捕获一组异常吗？

> ID：13007793
> 
> 赞同：6
> 
> 时间：2012-10-22T08:48:14.870
> 
> 标签：c++, exception, macros, try-catch

我有一组函数，需要将可能抛出的异常转换为错误代码。

为此，我使用 try/catch 语句包装了实际调用：

```
int f_with_error_codes()
{
  try {
    f(); // wrapped function call

    return E_SUCCESS;
  }
  catch (error1&) {
    return E_ERROR1;
  }
  catch (error2&) {
    return E_ERROR2;
  }
}

int g_with_error_codes(int a);
{
  try {
    G g(a);        // wrapped expressions
    g.print();

    return E_SUCCESS;
  }
  catch (error1&) {
    return E_ERROR1;
  }
  catch (error2&) {
    return E_ERROR2;
  }
}

... 
```

这些 catch 语句会重复。此外，每当添加新异常时，都必须将新的 catch 子句添加到每个调用包装器中。

像下面这样用于替换`catch`语句的宏是否合适？

```
#define CATCH_ALL_EXCEPTIONS  \
catch (error1&) {             \
  return E_ERROR1;            \
}                             \
catch (error2&) {             \
  return E_ERROR2;            \
} 
```

这将导致：

```
int f_with_error_codes()
{
  try {
    f(); // the wrapped

    return E_SUCCESS;
  }
  CATCH_ALL_EXCEPTIONS 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T09:13:25.117

您可以使用函数代替宏，如下所示：

```
int f_with_error_codes() 
{ 
  try { 
    f(); // wrapped function call 

    return E_SUCCESS; 
  } 
  catch (...) { 
    return error_code();
  } 
}

int error_code()
{
  try { 
    throw;
  } 
  catch (error1&) { 
    return E_ERROR1; 
  } 
  catch (error2&) { 
    return E_ERROR2; 
  } 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T09:00:46.887

对于您的情况，您不需要任何宏。
只需一个包含`virtual`函数的简单基类就足够了。

```
class error : public std::exception { // std::exception is your wish
  const char* what () throw(); // needed if std::exception is based
  virtual int GetValue () const = 0;  // <--- This is the core part
} 
```

现在，用所有类继承这个`error#`类：

```
class error1 : public error {
  virtual int GetValue () const { return E_ERROR1; } // <--- override
};
// ... 
```

最后，您的代码就像这样简单：

```
void f_with_error_codes()
{
  try {
    f(); // wrapped function call
    return E_SUCCESS;
  }
  catch (error& e) {  // <--- base handle
    return e.GetValue();
  }
} 
```

不用担心`virtual`这里的功能成本。因为它是最小的，而且例外是罕见的事件；`virtual`使您的代码可维护和可扩展的成本非常低。

# objective-c - 运行时编程动态方法时使用 ARC 编译时出错

> ID：13007797
> 
> 赞同：3
> 
> 时间：2012-10-22T08:48:35.417
> 
> 标签：objective-c, automatic-ref-counting, clang, objective-c-runtime

我正在尝试在 Objective-C 上进行一些运行时编程。为了做到这一点，我重写了*resolveClassMethod*方法。

不幸的是，当 ARC 处于活动状态时，我在 clang 中遇到了一些编译错误：

> 错误：选择器“动态”没有已知的类方法

如果我在没有 ARC 的情况下使用 gcc 或 clang（通过*-fno-objc-arc*选项），一切正常，除了警告而不是错误。

我知道 ARC 需要知道调用的方法的名称，以弄清楚如何使用返回值管理内存（遵循方法名称约定）。但是如何在没有丑陋的*performSelector*调用而不是直接方法调用的情况下解决这个问题？

这是我的代码：

**测试.m**

```
#import "Test.h"
#import <objc/runtime.h>

NSString* dynamicImp(id slef, SEL _cmd)
{
    NSLog(@"Dynamic method called");
    return @"dynamicImp";
}

@implementation Test

- (NSString*)name
{
    return @"John";
}

+ (BOOL)resolveClassMethod:(SEL)name
{
    if (name == @selector(dynamic))
    {
        Class metaClass = objc_getMetaClass([NSStringFromClass([self class]) UTF8String]);
        class_addMethod(metaClass, name, (IMP) dynamicImp, "@@:");
        return YES;
    }
    return NO;
}

+ (IMP)methodForSelector:(SEL)aSelector
{
    if (aSelector == @selector(dynamic))
    {
        return (IMP) dynamicImp;
    }
    else
    {
        return [super methodForSelector:aSelector];
    }
}

- (BOOL)respondsToSelector:(SEL)aSelector
{
    if (aSelector == @selector(dynamic))
    {
        return YES;
    }
    else
    {
        return [NSObject respondsToSelector:aSelector];
    }
}

@end 
```

**测试.h**

```
#import <Cocoa/Cocoa.h>

@interface Test : NSObject <NSObject> {
    NSString *_name;
}

- (NSString*)name;

@end 
```

**主文件**

```
#import <Cocoa/Cocoa.h>
#import <stdio.h>
#import "Test.h"

int main(int argc, char* argv[])
{
    @autoreleasepool {
        Test *test = [[Test alloc] init];
        NSLog(@"Hello, %@", [test name]);
        NSLog(@"How are you , %@", [Test dynamic]);
    }
    return 0;
} 
```

**没有 ARC 的 Gcc 或 clang**

*编译结果*

> main.m:13:36：警告：找不到类方法“+动态”（返回类型默认为“id”）
> 
> ```
>  NSLog(@"How are you , %@", [Test dynamic]); 
> ```

*输出*

> 2012-10-22 10:33:15.563 test-clang[957:707] 你好，约翰 2012-10-22
> 
> 2012-10-22 10:33:15.565 test-clang[957:707] 动态方法称为 2012-10-22
> 
> 2012-10-22 10:33:15.565 test-clang[957:707] 你好吗，dynamicImp

**与 ARC 铿锵**

*编译结果*

> main.m:13:36：错误：选择器“动态”没有已知的类方法
> 
> ```
>  NSLog(@"How are you , %@", [Test dynamic]); 
> ```

*PS：我不关心内存管理的那一刻，因为我的目标是在激活 ARC 的情况下编译这段代码。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:13:28.113

在您的通话中

```
NSLog(@"How are you , %@", [Test dynamic]); 
```

ARC 编译器不知道方法的返回类型。但是 ARC 需要知道该方法是否返回一个对象以添加适当的`retain`/`release`调用来管理生命周期。

即使没有 ARC，您也会收到编译器警告

> 找不到类方法“+dynamic”（返回类型默认为“id”）

但 ARC 编译器更严格。

你可以打电话

```
NSLog(@"How are you , %@", [[Test class] performSelector:@selector(dynamic)]); 
```

因为`performSelector`返回一个`id`. 对于返回除对象以外的任何内容的函数，您可以使用`NSInvocation`.

或者，您可以`dynamic`使用类扩展声明该方法：

```
@interface Test (DynamicMethods)
+ (NSString *)dynamic;
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:44:48.047

ARC 无疑对一些有趣的运行时方法解析机制产生了影响。但是，仍有一些选择。`performSelector:`与您提到的技术同样丑陋的是显式`objc_msgSend()` *函数*调用。该函数需要使用其返回和参数类型进行强制转换，如下所示：

```
(void (*)(id, SEL)objc_msgSend)([Test class], @selector(dynamic))); 
```

（您现在将收到有关隐式声明的警告；只需在`extern id objc_msgSend(id, SEL, ...);`某处声明即可。）

更好的选择是在`id`发送消息时将对象转换为（或将其存储在`id`变量中开始）。编译器对 s 响应的消息一无所知`id`，因此它不能也不会抱怨发送任意消息。您可以将类对象转换`id`为实例。

```
[(id)Test dynamic]; 
```

或者

```
[(id)testInstance anotherDynamicName]; 
```

# c# - 为每个用户生成一个个人 ID

> ID：13007799
> 
> 赞同：-6
> 
> 时间：2012-10-22T08:48:59.750
> 
> 标签：c#, asp.net

无论如何我可以使用c#生成一个唯一的序列号。我们正在开发一个网站，我们在注册时为每个用户分配一个个人ID......我需要生成一个14位数字的字符串。

```
For eg.

AA 01 201 210 22

AA 02 201 210 22

.

.

AA 99 201 210 22

then it should start from

AB 01 201 210 22

AB 02 201 210 22 and so on...

Last 8 digits are current date...

Thanks....

private string ConvertDecString(int value)
       {
            string CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            string retVal = string.Empty;
            int remainder = 0;
            do
            {
                remainder = value % 26;
                retVal = CHARS.Substring(remainder, 1) + retVal;
                value = (value / 26) - 1;
            }
            while ((value + 1) > 0);
            return retVal;
        }

public string GetCurrentDate()
    {
        string todaydate = System.DateTime.Now.Year.ToString() + System.DateTime.Now.Month.ToString() + System.DateTime.Now.Day.ToString();
        return todaydate;
    }

    private Random _random = new Random();

    public int RadomNum()
    {
        return _random.Next(10, 99);
    }

private string GetActualDate()
    {
        string Year = System.DateTime.Now.Year.ToString();
        string ActualDate1 = Year + GetProperMonth() + GetProperDay();
        int n = Convert.ToInt32(ActualDate1);
        string ActualDate = String.Format("{0:000 000 00}", n);
        return ActualDate;
    }

    private string GetProperMonth()
    {
        string Month = System.DateTime.Now.Month.ToString();
        string MonthNo = "";

        if (Month == "1")
        {
            MonthNo = "01";
        }
        else if (Month == "2")
        {
            MonthNo = "02";
        }
        else if (Month == "3")
        {
            MonthNo = "03";
        }
        else if (Month == "4")
        {
            MonthNo = "04";
        }
        else if (Month == "5")
        {
            MonthNo = "05";
        }
        else if (Month == "6")
        {
            MonthNo = "06";
        }
        else if (Month == "7")
        {
            MonthNo = "07";
        }
        else if (Month == "8")
        {
            MonthNo = "08";
        }
        else if (Month == "9")
        {
            MonthNo = "09";
        }
        else
        {
            MonthNo = Month;
        }
        return MonthNo;
    }

    private string GetProperDay()
    {
        string Day = System.DateTime.Now.Day.ToString();
        string DayNo = "";

        if (Day == "1")
        {
            DayNo = "01";
        }
        else if (Day == "2")
        {
            DayNo = "02";
        }
        else if (Day == "3")
        {
            DayNo = "03";
        }
        else if (Day == "4")
        {
            DayNo = "04";
        }
        else if (Day == "5")
        {
            DayNo = "05";
        }
        else if (Day == "6")
        {
            DayNo = "06";
        }
        else if (Day == "7")
        {
            DayNo = "07";
        }
        else if (Day == "8")
        {
            DayNo = "08";
        }
        else if (Day == "9")
        {
            DayNo = "09";
        }
        else
        {
            DayNo = Day;
        }
        return DayNo;
    }

    public string GeneratePatientNumber(string Alpha)
        {
            return ConvertDecString(Convert.ToInt16(Alpha)) + " " + RadomNum() + " " + GetActualDate();
        }

GeneratePatientNumber(string Alpha) - this method generates 12 digit personal id... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:00:20.773

```
公共类 IDGenerator
    {
        私人 int _firstLetter = 0;
        私人 int _secondLetter = 0;
        私人 int _firstDigitCounter = 90;
        私有字符串 _chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

        公共字符串 NewID()
        {
            返回两个字母（）；
        }

        私有字符串 twoLetters()
        {
            _firstDigitCounter += 1;
            如果（_firstDigitCounter == 99）
            {
                _firstDigitCounter = 0;
                _secondLetter += 1;
            }

            if (_secondLetter > _chars.Length)
            {
                _secondLetter = 0;
                _firstLetter += 1;
            }

            返回 _chars.Substring(_firstLetter, 1) + _chars.Substring(_secondLetter, 1) + " " + _firstDigitCounter.ToString("00") + " " + DateTime.Now.Year.ToString().Insert(3, " " ) + DateTime.Now.Date.ToString("MM dd");
        }
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:13:08.287

```
public string GetPersonalId (int n)
{
    char letter1 = (char)('A' + ((n / 10 / 26 / 26) % 26));
    char letter2 = (char)('A' + ((n / 10 / 26) % 26));
    char digit1 = (char)('0' + ((n / 10) % 10));
    char digit2 = (char)('0' + ((n) % 10));

    string dateString = string.Format("{0:yyyyMMdd}", DateTime.Today)
        .Insert(6, " ")
        .Insert(3, " ");

    return string.Format("{0}{1} {2}{3} {4}",
        letter1, letter2, digit1, digit2, dateString);
}

public GetNextSequenceForToday()
{
    SqlCommand query = new SqlCommand()
    query.CommandText =
       "SELECT COUNT(*) FROM [Users] " +
       "WHERE [Date] >= @today AND [Date] < @tomorrow";
    query.Parameters.Add("@today", DateTime.Today);
    query.Parameters.Add("@tomorrow", DateTime.Today.AddDays(1));

    int count = Convert.ToInt32(query.ExecuteScalar());

    return count + 1;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T08:53:48.693

您可以使用 Guid 类创建一个唯一的 32 个字符长度的字符串。

```
Guid g;
g = Guid.NewGuid();
Console.WriteLine(g);
Console.WriteLine(Guid.NewGuid()); 
```

C&P 来自：http: [//msdn.microsoft.com/es-es/library/system.guid.newguid.aspx#Y330](http://msdn.microsoft.com/es-es/library/system.guid.newguid.aspx#Y330)

# c++ - 将受保护的结构成员分配给朋友？

> ID：13007802
> 
> 赞同：0
> 
> 时间：2012-10-22T08:49:12.200
> 
> 标签：c++, friend, access-rights

我有一个类，其中包含 MyObjects 形式的数据，例如 A 类。我希望监视 MyObject 对象中的数据。因此，我创建了一个 IMonitorable 类并派生了所有包含来自 IMonitorable 的 MyObjects 的存储类。将 IMonitorable 类添加为我的监视类的朋友。

```
class IMonitorable
{}        

class a : public IMonitorable
{
protected:
   struct myData
   {
      MyObject a;
      MyObject b;
      ...
   } data;
}

class Monitor
{
public:
   friend IMonitorable;
   AddData(a& stroage);
   AddObject(MyObject& obj);

} 
```

当我有一个具有已知 myData 结构的存储类时，这很好用。我打了电话

```
AddData(InstanceOfA); 
```

并将 MyObject a,b,.. 添加到我的监控机制中。

现在我有几个存储类，我不想为所有存储类编写 AddData 方法。我想有一个 AddObject 方法能够有一个适合所有存储类的单点。

```
AddObject(InstanceOfA.data.a);
AddObject(InstanceOfA.data.b);
... 
```

但是如果我在我的代码中的某个地方调用它，gcc 会抛出错误 data.a 受到保护，什么是正确的。

有没有办法在不知道存储类结构的情况下将受保护的 MyObject 的引用或指针添加到 Monitor？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:17:44.680

我无法确切地看到您在做什么，并且通过将`a`两者用作类和 myData 的成员来混淆事物。

但我认为问题在于这种友谊没有得到回报。

您已经制作`IMonitorable`了 a `friend`of `Monitor`，但这并没有制作`Monitor`a `friend`of `IMonitorable`，并且顺便说一下，即使您确实将它设为它的朋友，`IMonitorable`也无法访问`a`从它派生的受保护成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:01:07.427

您声明`struct myData`为受保护。`friend IMonitorable`声明`IMonitorable`为朋友类，这意味着可以访问类`IMonitorable`的私有成员`Monitor`。从`Monitor`使用`getter`功能访问私有成员：

```
class a : public IMonitorable
{
public:
   const myData* const getData()const
   {
      return &data;
   }
   myData* getData()
   {
      return &data;
   }
protected:
   struct myData
   {
      MyObject a;
      MyObject b;
      ...
   } data;
} 
```

用它：

```
AddObject(InstanceOfA.getData()->a); 
```

# matrix - 谷歌距离矩阵 API 3

> ID：13007803
> 
> 赞同：0
> 
> 时间：2012-10-22T08:49:12.873
> 
> 标签：matrix, distance

我有代码可以使用谷歌距离矩阵 API 计算到另一个地方的距离，但每个查询免费限制只有 100 个元素。所以我使用循环代码（如 for elements）编写代码来解决问题，我的代码是 PHP、javascript，我从 MySql 解析纬度和经度数据。有人知道我下面的代码有什么错误吗？因为如果我单击计算按钮，它不会出现任何内容。实际上我已经从这个 URL [https://google-developers.appspot.com/maps/documentation/javascript/examples/distance-matrix](https://google-developers.appspot.com/maps/documentation/javascript/examples/distance-matrix)修改了代码，这是我的代码：

```
function hitung (){
  service = new google.maps.DistanceMatrixService();
    for (m = 0 ; m < l-80 ; m++ ){
        asal = originarray[m];
        for (n = 0 ; n < l-80 ; n++ ){
            tujuan = destarray [n];
            calculateDistances();
        }
    }
  }
  function calculateDistances() {

 //var s = 0;

  //for (m = 0 ; m < l-80 ; m++ ){
    //  asal = originarray[m];
    //for (n = 0 ; n < l-80 ; n++ ){
        //servicearray[s] = new google.maps.DistanceMatrixService();
        //tujuan = destarray [n];       
        service.getDistanceMatrix(
      {
       //origins: [origin1, origin2],
      // destinations: [destinationA, destinationB],
       origins: asal,
     destinations: tujuan,
        //origins: originarray,
        //destinations: destarray,
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
      }, callback);
     // s++;

    //}

// }        
  }

  function callback(response, status) {
    if (status != google.maps.DistanceMatrixStatus.OK) {
      alert('Error was: ' + status);
    } else {
      var origins = response.originAddresses;
      var destinations = response.destinationAddresses;
      var outputDiv = document.getElementById('outputDiv');
      //outputDiv.innerHTML = '';
     // deleteOverlays();

      for (var i = 0; i < origins.length; i++) {
        var results = response.rows[i].elements;
       // addMarker(origins[i], false);
        for (var j = 0; j < results.length; j++) {
        //  addMarker(destinations[j], true);
          outputDiv.innerHTML += origins[i] + ' to ' + destinations[j]
              + ': ' + results[j].distance.text + ' in '
              + results[j].duration.text + '<br>';
        }
      }
    }
  }

  function addMarker(location, isDestination) {
    var icon;
    if (isDestination) {
      icon = destinationIcon;
    } else {
      icon = originIcon;
    }
    geocoder.geocode({'address': location}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        bounds.extend(results[0].geometry.location);
        map.fitBounds(bounds);
        var marker = new google.maps.Marker({
          map: peta,
          position: results[0].geometry.location,
          icon: icon
        });
        markersArray.push(marker);
      } else {
        alert('Geocode was not successful for the following reason: '
          + status);
      }
    });
  }

  function deleteOverlays() {
    if (markersArray) {
      for (i in markersArray) {
        markersArray[i].setMap(null);
      }
      markersArray.length = 0;
    }
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:29:00.480

通过记录响应来检查您是否收到来自 Google 的响应...

```
function callback(response, status) {
    console.log(response);
} 
```

# javascript - 在 Spring MVC 中动态添加表行并绑定到服务器端

> ID：13007807
> 
> 赞同：1
> 
> 时间：2012-10-22T08:49:21.407
> 
> 标签：javascript, spring-mvc

我正在使用 Spring MVC3 设计一个应用程序。我必须创建一个具有数据表和用户的 JSP 页面，并且可以在 JSP 数据表中添加行。我正在考虑以下两个选项：

1.  使用 javascript 函数在“插入行”按钮上添加一行
2.  要在“插入行”按钮上提交表单，请转到控制器并返回带有额外行的模型属性。

在java脚本方法中，我可以添加行，但这些行在服务器端没有绑定......请帮助。我如何使用控制器方法来实现这一点..请尽快帮助...thanx :)

请注意，我不能使用 jQuery 或任何其他 javascript 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:55:52.150

我已经使用`LazyList`. 您需要在模型中有一个惰性列表对象，该对象将保存另一个模型类的对象列表，这些对象将代表每一行中的数据。以下是在模型类中声明 LazyList 的语法。

```
private List<OperationParameters> operationParameterses = LazyList
            .decorate(new ArrayList<OperationParameters>(),
                    FactoryUtils.instantiateFactory(OperationParameters.class)); 
```

OperationParameters 是一个简单的 pojo 类，它的一个对象将代表您的 1 行。

一旦在你的 modelAttribute 类中有这个惰性列表，那么在 jsp 上，你需要借助简单的 html 输入标记为 OperationParameters pojo 中的每个属性创建控件。您不能使用 spring form taglib 将这些控件绑定到您的 pojo。您需要按以下方式给出每个输入标签的名称。

```
<input type='text' id='operationParameterses0.inputOutputParamName' name='operationParameterses[0].inputOutputParamName'/> 
```

其中 name 和 id 属性中的“0”表示列表的索引。现在，当您提交表单时，您可以将那些插入的行绑定到 LazyList 对象中的 pojo。

希望这对您有所帮助。

干杯。

# css - 如何使移动网站在 iPhone 4（Retina 屏幕）和 Android 手机上看起来都很好？

> ID：13007808
> 
> 赞同：1
> 
> 时间：2012-10-22T08:49:30.847
> 
> 标签：css, mobile-safari, mobile-website, retina-display, android-browser

本手机网站： [http ://www.tomorroworld.com/instarea/](http://www.tomorroworld.com/instarea/)

在 iPhone 4（Retina 屏幕）和普通 iPhone 屏幕上看起来都不错。但在安卓手机上，放大太多了。我怎样才能轻松解决这个问题？

这就是`viewport`标签的样子：

```
<meta name="viewport" content="width=640,initial-scale=0.5,maximum-scale=0.5,user-scalable=0"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:04:08.937

考虑将您的宽度转换为基于百分比而不是像素，然后让它们在较小的设备中按比例缩小。您还可以添加一些媒体查询以在较小的尺寸下进行额外的布局控制。

像您一样使用视口本质上是将所有移动设备的页面宽度硬编码为 320 像素 - 适用于较旧的 iphone，但不适用于许多其他设备。

# ios - 在 iOS 中暂停和播放 CAKeyFrameAnimation

> ID：13007814
> 
> 赞同：2
> 
> 时间：2012-10-22T08:49:48.733
> 
> 标签：ios, animation, cabasicanimation, cakeyframeanimation

我正在使用 CAkeyframeanimation 为 calayer 制作动画。实际上，我正在使用 CAkeyframeanimation 使用 position 属性移动 calayer。我想暂停 calayer 移动动画。当我点击屏幕时，它应该从暂停的地方恢复。

我为 calayer 添加了两个动画。一个是用于更改 calayer 的边界属性，另一个是位置属性。所以我为单个 calayer 使用两个动画，但我想暂停 calayer 的位置属性动画，我点击屏幕。在我点击后，它应该从暂停的位置恢复。

我使用了以下代码，但它停止了我应用于 calayer 的所有动画。

```
 - (void) pauseLayer: (CALayer *) theLayer
       {  
         CFTimeInterval mediaTime = CACurrentMediaTime();
         CFTimeInterval pausedTime = [theLayer convertTime: mediaTime fromLayer: nil];
         theLayer.speed = 0.0;
         theLayer.timeOffset = pausedTime;
        }

         - (void) removePauseForLayer: (CALayer *) theLayer;
         {
           theLayer.speed = 1.0;
           theLayer.timeOffset = 0.0;
           theLayer.beginTime = 0.0;
         }
         - (void) resumeLayer: (CALayer *) theLayer;
         {
           CFTimeInterval pausedTime = [theLayer timeOffset];
           [self removePauseForLayer: theLayer];
           CFTimeInterval mediaTime = CACurrentMediaTime();
           CFTimeInterval timeSincePause = [theLayer convertTime: mediaTime fromLayer:nil] - pausedTime;
           theLayer.beginTime = timeSincePause;

          } 
```

我还尝试了 CAanimtion 的删除动画属性。它有效！但我无法从暂停的位置恢复动画。

请帮我。

提前致谢。

# sml - 如何使将数据写入文件的函数提供布尔输出？

> ID：13007815
> 
> 赞同：0
> 
> 时间：2012-10-22T08:49:47.773
> 
> 标签：sml, smlnj

我必须编写一个接受整数列表并将它们写入文件的代码。同时如果元素被写入则返回true，否则返回false。

我写了类似的东西

```
fun writetofile([],sfile)= false
|writetofile((l:int)::ls, sfile)=
    let 
    val outs=TextIO.openOut(sfile) 
    fun writeinline(outs,[])=(false;TextIO.closeOut(outs))
    |writeinline(outs,(l:int)::ls)=(true;TextIO.output(outs,(Int.toString(l)^"\n"));writeinline(outs,ls))
    in
    writeinline(outs,l::ls)  before
    TextIO.closeOut(outs)
    end
    ; 
```

我收到以下错误：

```
Error: right-hand-side of clause doesn't agree with function result type [tycon mismatch]
  expression:  unit
  result type:  bool
  in declaration:
    writeNums =
      (fn (nil,sfile) => true
        | (:: <pat>,sfile) =>
            let val <binding>
                val <binding> in (<exp>; <exp>) end) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:00:40.597

函数的主体必须具有函数结果类型约束中指定的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:12:04.243

基本情况`writetofile`有类型`bool`，而归纳情况有类型`unit`由于`TextIO.closeOut(outs)`; 所以他们不同意函数的返回类型。

如果您想在归纳情况下返回 bool，则需要类似`TextIO.closeOut(outs); true`.

顺便说一句，你的`writeinline`函数总是返回，`unit`所以你不需要 used值。这是一个更正的版本：`false``true`

```
fun writetofile([], sfile) = false
  | writetofile((l:int)::ls, sfile) =
    let 
       val outs = TextIO.openOut(sfile) 
       fun writeinline(outs,[]) = TextIO.closeOut(outs)
         | writeinline(outs, l::ls)= ( TextIO.output(outs (Int.toString(l)^"\n"));
                                       writeinline(outs, ls) )
    in
       ( writeinline(outs, l::ls);
         TextIO.closeOut(outs);
         true )
    end 
```

# select - 有效获取最新记录

> ID：13007818
> 
> 赞同：0
> 
> 时间：2012-10-22T08:50:04.770
> 
> 标签：select, plsql, oracle10g, sql-order-by

我必须得到我表中的最新记录。为此，我首先选择所有记录，然后对它们进行排序并获取最新的 100 条记录。这要花很多钱。我想知道这是一个更好的方法吗？

我正在使用oracle 10g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:58:09.187

如果您知道这 100 条记录将始终满足条件，您可以尝试添加一些条件，例如 load_date > '01-Jan-2012'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:06:05.650

我想你是在 SQL 中做这一切的吗？

```
SELECT * FROM (
  SELECT *
  FROM table
  ORDER BY modified_date DESC
)
WHERE rownum <= 100; 
```

您可以做的一件事是在“modified_date”上创建一个降序索引：

```
CREATE INDEX table_modified_date_desc_idx on table(modified_date DESC); 
```

那么你的查询应该使用这个索引来只检索最新的记录。如果不是，您可能还必须重新收集此表的统计信息。

# android - 触摸时移除连续生成精灵

> ID：13007822
> 
> 赞同：5
> 
> 时间：2012-10-22T08:50:25.947
> 
> 标签：android, andengine, game-engine

我是 AndEngine 的新手。我刚刚创建了一个场景，其中有许多在横向模式下从屏幕高度上方生成的精灵。现在我想在触摸它时删除一个精灵。问题是，当我触摸屏幕时，最新的精灵被删除了，我无法单独删除点击的精灵。

这是我的代码：

```
//======== TimerHandler for collision detection and cleaning up ======
IUpdateHandler detect = new IUpdateHandler() {
    @Override
    public void reset() {
    }

    @Override
    public void onUpdate(float pSecondsElapsed) {

        targets = targetLL.iterator();
        while (targets.hasNext()) {
            _target = targets.next();

            if (_target.getY() >= cameraHeight) {
                // removeSprite(_target, targets);
                tPool.recyclePoolItem(_target);
                targets.remove();
                Log.d("ok", "---------Looop Inside-----");
                // fail();
                break;

            }
            // i don't know whether below code is valid for this postion
            mMainScene.setOnSceneTouchListener(new IOnSceneTouchListener() {
            @Override
                public boolean onSceneTouchEvent(Scene arg0,
                        TouchEvent pSceneTouchEvent) {

                    try {
                        // i can't use this two
                        final float touchX = pSceneTouchEvent.getX();
                        final float touchY = pSceneTouchEvent.getY();

                        if (pSceneTouchEvent.getAction() == TouchEvent.ACTION_DOWN) {
                            //call to remove sprite
                            removeSprite(_target, targets);
                        }
                    } catch (ArrayIndexOutOfBoundsException e) {
                        e.printStackTrace();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    return true;
                }
            });
        }
        targetLL.addAll(TargetsToBeAdded);
        TargetsToBeAdded.clear();

    }
}; 
```

添加目标的代码：

```
/** adds a target at a random location and let it move along the y-axis */
public void addTarget() {
    Random rand = new Random();

    int minX = mTargetTextureRegion.getWidth();
    int maxX = (int) (mCamera.getWidth() - mTargetTextureRegion.getWidth());
    int rangeX = maxX - minX;
    Log.d("----point----", "minX:" + minX + "maxX:" + maxX + "rangeX:"
            + rangeX);

    int rX = rand.nextInt(rangeX) + minX;
    int rY = (int) mCamera.getHeight() + mTargetTextureRegion.getHeight();

    Log.d("---Random x----", "Random x" + rX + "Random y" + rY);

    //HERE I USE POOL TO CREATE NEW SPRITE
    //tPool is object of TargetsPool Class
    target = tPool.obtainPoolItem();
    target.setPosition(rX, rY);

    target.animate(100);
    mMainScene.attachChild(target, 1);
    mMainScene.registerTouchArea(target);

    int minDuration = 2;
    int maxDuration = 32;
    int rangeDuration = maxDuration - minDuration;
    int actualDuration = rand.nextInt(rangeDuration) + minDuration;

    // MoveXModifier mod = new MoveXModifier(actualDuration, target.getX(),
    // -target.getWidth());

    MoveYModifier mody = new MoveYModifier(actualDuration,
            -target.getHeight(), cameraHeight + 10);
    target.registerEntityModifier(mody.deepCopy());
    TargetsToBeAdded.add(target);

} 
```

触摸时删除精灵的代码：

```
// ==============the method to remove sprite=====================
public void removeSprite(final AnimatedSprite _sprite, Iterator it) {
    runOnUpdateThread(new Runnable() {

        @Override
        public void run() {
            _target = _sprite;
            mMainScene.detachChild(_target);
        }
    });
    it.remove();
} 
```

我使用 GenericPool 来创建新的精灵。

我不确定我必须在哪里为特定的触摸精灵编写代码并将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:21:21.800

哦..我在这里找到了解决方案。

我在 BaseGameActivity 类中实现了一个 IOnAreaTouchListener。所以，我的类声明看起来像：

```
public class CrazyMonkeyActivity extends BaseGameActivity implements
    IOnAreaTouchListener 
```

我的覆盖方法看起来像：

```
@Override
public boolean onAreaTouched(final TouchEvent pSceneTouchEvent,
        final ITouchArea pTouchArea, final float pTouchAreaLocalX,
        final float pTouchAreaLocalY) {

    if (pSceneTouchEvent.isActionDown()) {
        this.removeSprite((AnimatedSprite) pTouchArea);
        return true;
    }

    return false;
} 
```

并且删除 Sprite 方法应该是这样的：

```
// ==============the method to remove spirit=====================
public void removeSprite(final AnimatedSprite target) {
    runOnUpdateThread(new Runnable() {
        @Override
        public void run() {
            mMainScene.detachChild(target);
            mMainScene.unregisterTouchArea(target);
            System.gc();
        }
    });
} 
```

为了创建连续的 Spawn Sprite，我在此方法中使用了时间处理程序。下面的方法应该在 onLoadScene() 方法中调用：

```
/** a Time Handler for spawning targets Sprites, triggers every 2 second */
private void createSpriteSpawnTimeHandler() {
    TimerHandler spriteTimerHandler;
    float mEffectSpawnDelay = 2f;

    spriteTimerHandler = new TimerHandler(mEffectSpawnDelay, true,
            new ITimerCallback() {
                @Override
                public void onTimePassed(TimerHandler pTimerHandler) {
                        //position for random sprite
                    final float xPos = MathUtils.random(30.0f,
                            (cameraWidth - 30.0f));
                    final float yPos = MathUtils.random(30.0f,
                            (cameraHeight - 30.0f));
                    //below method call for new sprite
                    addTarget(xPos, yPos);

                }

            });
    getEngine().registerUpdateHandler(spriteTimerHandler);
} 
```

addTarget() 看起来像：

```
public void addTarget(float xPos, float yPos) {
    Random rand = new Random();
    Log.d("---Random x----", "Random x" + xPos + "Random y" + yPos);

    target = new AnimatedSprite(xPos, yPos, mTargetTextureRegion);
    target.animate(100);
    mMainScene.attachChild(target);
    mMainScene.registerTouchArea(target);

    int minDuration = 2;
    int maxDuration = 32;
    int rangeDuration = maxDuration - minDuration;
    int actualDuration = rand.nextInt(rangeDuration) + minDuration;

    MoveYModifier mody = new MoveYModifier(actualDuration,
            -target.getHeight(), cameraHeight + 10);
    target.registerEntityModifier(mody.deepCopy());

} 
```

希望这对其他人也有帮助！

# openssl - X509_verify_cert 返回 0（零）

> ID：13007823
> 
> 赞同：2
> 
> 时间：2012-10-22T08:50:38.863
> 
> 标签：openssl, certificate, verification, x509, pkcs#7

我正在实现下面的代码（请参阅评论）::

```
#include <stdio.h>
#include <openssl/crypto.h>
#include <openssl/err.h>
#include <openssl/pem.h>
#include <openssl/rand.h>

#pragma comment(lib, "ssleay32.lib")
#pragma comment(lib, "libeay32.lib")

void verifyCertificate() ;
X509 *loadCert(char*) ;
void loadToStore(char*, X509_STORE*&) ;

void verifyCertificate()
{
    int i = 0 ;
    char argv[50] = "C:\\My\\CA.pem" ;  /* Details:: Issuer = Verisign Inc & Subject = Verisign Inc
    char argv1[50] = "C:\\My\\mid1.pem" ;   /* Details:: Issuer = Thawte & Subject = Verisign Inc
    char argv2[50] = "C:\\My\\mid2.pem" ;   /* Details:: Issuer = Verisign Inc & Subject = Verisign Inc
    char argv3[50] = "C:\\My\\Signer.pem" ; /* Details:: Issuer = Verisign Inc & Subject = SignerOrganisation

    X509 *cert = loadCert(argv3);
    X509_STORE *store = X509_STORE_new();

    loadToStore(argv, store);
    loadToStore(argv1, store);
    loadToStore(argv2, store);

    X509_STORE_CTX *ctx = X509_STORE_CTX_new();

    X509_STORE_CTX_init(ctx, store, cert, NULL);

    i = X509_verify_cert(ctx);
    printf("i = %d\n", i) ; // Returns i = 0
    if (i != 1)
      printf("%s", X509_verify_cert_error_string(ctx->error));
           // Returns "Certificate Signature Failure"

    X509_STORE_CTX_cleanup(ctx);
    X509_STORE_CTX_free(ctx);
    X509_STORE_free(store);
    ctx = NULL;
    store = NULL;
}

void loadToStore(char* file, X509_STORE *&store)
{
    X509 *cert = loadCert(file);
    if (cert != NULL)
        X509_STORE_add_cert(store, cert);
    else
        printf("Can not load certificate");
}

X509 *loadCert(char* file)
{
    FILE *fp = fopen(file, "rb");
    X509 *cert = PEM_read_X509(fp, NULL, NULL, NULL);
    fclose(fp);
    return cert;
}

int main(int argc, char** argv)
{
    verifyCertificate() ;
    return 0 ;
} 
```

我已经提取了包含的每个证书，然后将它们加载到商店中。

**问题:: X509_verify_cert 返回 Zero(0)**。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T07:09:31.193

X509_verify_cert 仅对有效证书链返回成功，即每个下一个证书都必须由前一个证书签名（除了必须自签名的第一个证书）。要确定您是否拥有有效的链，应提供有关您的 pem 的完整信息。但考虑到您的评论，我看到 CA.pem 没有签署 mid1.pem，因为 CA.pem 的主题（Verisign Inc）不等于 mid1.pem 的发行人（Thawte）

# php - SQL 服务器 uft8 连接

> ID：13007825
> 
> 赞同：1
> 
> 时间：2012-10-22T08:50:45.353
> 
> 标签：php, sql-server, utf-8, character-encoding, iso-8859-1

我正在使用带有用 PHP 编写的 Intranet 应用程序的 SQL 服务器。为方便起见，我想对网页使用 UTF8 字符集（jquery 仅支持 utf8），但是存储在我的 sqlserver db 中的所有数据都在 iso-8859-1 中。我可以只更改 sqlserver 和 PHP 之间的数据连接字符集（不是数据存储字符集）吗？也许只是一个查询标题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:05:21.830

SQL Server 仅将 Unicode 数据存储在以`N`(so `NVARCHAR`etc) 为前缀的表中。这些以 UCS-2 格式存储。Windows SQLSRV 驱动程序将在检索时将这些列从 转换`UCS-2`为`UTF-8`，而在保存时则相反。

但是，如果数据是`ISO-8859-1`（非`N`列），那么您将需要自己转换文本。我建议在您的数据检索方法上创建一个包装函数，以将`ISO-8859-1`数据转换为 UTF-8。

# javascript - 带有 div 元素而不是表格的 JQgrid

> ID：13007826
> 
> 赞同：1
> 
> 时间：2012-10-22T08:50:45.213
> 
> 标签：javascript, jquery, jqgrid

我们可以使用带有 div 元素而不是 table 的 Jquery JQgrid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:34:04.803

不，您不能替换`<table>`为`<div>`.

问题是 jqGrid 的代码确实可以像处理表格一样处理网格的内容。`<tr>`元素的 DOM 表示具有`cells`和`rowIndex`属性（例如，请参见此处），支持方法（请参见此处）的[has](http://www.w3schools.com/jsref/dom_obj_tablerow.asp)属性（[请](http://www.w3schools.com/jsref/dom_obj_table.asp)`<table>`参见`rows`此处[）](http://www.w3schools.com/jsref/coll_table_rows.asp)等等。使用专门用于**提高**jqGrid 代码性能的方法。`namedItem``<table>`

 **无论如何，jqGrid 的代码确实使用了 jqGrid 的主要元素 is`<table>`和 not `<div>`。所以 jqGrid 的代码包含以下几行（见[源代码](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L926-929)）

```
if(this.tagName.toUpperCase()!='TABLE') {
    alert("Element is not a table");
    return;
} 
```

换句话说，如果您使用其他元素（如`<div>`）而不是`<table>`您将收到带有文本“元素不是表格”的错误消息，而不是显示网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:08:20.267

我认为已经创建了 jqgrid 插件来通过 jquery 设计表格，所以使用它来设计 div 而不是表格会有点奇怪**

# java - 如何从同一个项目中的另一个包运行一个包？

> ID：13007829
> 
> 赞同：0
> 
> 时间：2012-10-22T08:50:49.933
> 
> 标签：java

我的项目中有两个包，`a`并且`b`.

`a`是我在程序运行时运行的“主类”，但我需要从中`b`运行`a`（如果有意义的话）。

我确定它类似于`PackageB.BMain`但我不确定。

编辑：

好的，所以我学到了一些新东西，开始我的主要项目是 RevIRC，里面我有两个包，MainChat 和 RevIRC，现在当我运行 RevIRC 运行程序时，我需要在运行 RevIRC 时运行 Mainchat .

就像我之前说的那样，我确定它是类似的东西，`RevIRC.MainChat.ChatMain()`但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:56:13.700

您有 2 个选项：

*   从 A 创建 B 的新实例，如下所示：`PackageB.BMain b = new PackageB.BMain();`
*   以静态方式访问方法，`BMain`如下所示：PackageB.BMain.someMethod();`

请注意，您可以单独使用它们中的任何一个，也可以将它们混合在一起，但是，这完全取决于您编写`BMain`课程的方式。

例如：

```
package PackageB

public class BMain
{
    public BMain()
    { }

    public void foo()
    {
        System.out.println("This is not a static method. It requires a new instance of BMain to be created for it to be called");
    }

    public static void bar()
    {
        System.out.println("This is a static method. It can be accessed directly without the need of creating an instance of BMain");
    }
} 
```

然后在您的主类（具有该`main`方法的类）中：

```
package PackageA

public class AMain
{

    public static void main(String[] args)
    {
        PackageB.BMain.bar();

        PackageB.BMain bInstance = new PackageB.BMain();
        bInstance.foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:01:34.043

如果您有两个主要方法，它将从 A 或 B 运行。JVM 将选择它看到 IIRC 的第一个主要方法。

有一个独立的类，它将有 main. 并在那里创建您的课程..？

```
import a.Class1;
import b.Class2;
public class MainController
{

  public static void main(String args[])
  {
     Class1 class1 = new Class1() ;
     Class2 class2 = new Class2() ;
    //Both class no start at the "same" time.
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:01:56.230

如果我没记错的话，你想从 A 类运行 B 类的 main 方法。你可以使用 B.main(arg[]); 调用它。例如：

```
package a;
public class A
{ 
public static void main(String[] args)
{
    System.out.println("This is main method of class A");
    B.main(null);
            /*pass any args if you want or simply set null arg*/
}
}
package b;
public class B
{
public static void main(String[] args)
{
    System.out.println("This is main method of class B");
}
} 
```

我希望这个简单的例子能消除你的疑惑。

您可以参考包含 Java 初学者教程的[链接。](http://www.freejavaguide.com/corejava.htm)

# visual-studio-2010 - 安排在一周中的某一天

> ID：13007832
> 
> 赞同：1
> 
> 时间：2012-10-22T08:51:03.310
> 
> 标签：visual-studio-2010, biztalk

是否可以安排接收位置每周运行一次？我只能看到在某些日期和某些时间开始它。似乎很奇怪，没有办法在星期五的 10:00 运行它。

我在这里错过了一个选项还是不可能？如果日期是星期五，唯一可能的方法是使用 pollingstatement 并执行导致 1 的查询吗？

![日程](../Images/7d84ec0e67ef404b1ef47eee7fdaca5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:08:36.297

您可以尝试使用此计划任务适配器，如[计划任务适配器](http://geekswithblogs.net/StuartBrierley/archive/2010/06/23/biztalk-2009-adapters---the-scheduled-task-adpater-receive-location.aspx)

或者

如果您喜欢更复杂的方式，您可以尝试使用 sdk 在您的 BizTalk 安装的 SDK 目录中有一个名为**EnableRecLoc.vbs的脚本**

我更喜欢第一种方法

# ruby-on-rails - 系统（“rails 生成迁移”）

> ID：13007833
> 
> 赞同：0
> 
> 时间：2012-10-22T08:51:04.550
> 
> 标签：ruby-on-rails, ruby, migration, system

我想将我的应用程序中的一些列添加到我现有的表“参与者”中，而无需输入 db/migrate 并手动编写它们。我写：

```
system "rails generate migration AddCasesColumn foo :text" 
```

并且系统正确地添加了新的迁移“add_case_column”，但方法“def up”和“down final”为空。我想是因为它不知道要在哪个表上添加字段。

如何在从控制器 ruby​​ 的迁移中添加“add_column：参与者，属性：类型”？还是有其他方法可以做到这一点？

链接到我的旧问题：[从控制器创建新迁移](https://stackoverflow.com/questions/12971331/create-a-new-migration-from-controller)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:06:18.363

试试这个

```
system "rails generate migration AddCaseToParticipant case:string" 
```

# c++ - Google V8：在 C++ 中访问局部变量

> ID：13007838
> 
> 赞同：4
> 
> 时间：2012-10-22T08:51:29.613
> 
> 标签：c++, v8

有人知道我如何在 C++ 的嵌套函数调用中查找局部变量吗？考虑以下示例：

```
// e.g. a global variable in the browser
var global = "global_value";

function foo(){
    var global = "local_value";
    myCppFunction("global", global);
}

foo(); 
```

我现在的问题是如何在实现中`myCppFunction`从'foo'访问函数局部变量“global”（不是值，这将由第二个参数给出）？

```
Handle<Value> MyCppFunction(const Arguments& args){
    Local<String> varName = args[0]->ToString();
    Local<String> varValue = args[1]->ToString(); // this holds "local_value"
    // how to access the variable "global" in the scope of 'foo' ?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:54:44.510

我设法自己找到了。请参阅下面的示例，了解如何在堆栈上查找值（并替换它 - 这里是字符串变量的示例）。

提前说明两点：

*   除了在我的硕士论文中使用它的非常用例之外，我还没有测试过它的不良行为 - （可能）有龙。
*   我不知道为什么在我的测试中`sfl.FindJavaScriptFrame(0)`会产生所需的堆栈帧 - 但是，由于它独立于调用深度，我怀疑由 0 索引的堆栈帧始终是直接调用者的帧（在我的情况下，我知道我正是想要那个）。

和代码：

```
// Prepare identification of the variable,assuming varName as in the question
// More convenient conversions would be appreciated, at least by me
Local<String> varName = args[0]->ToString();        
std::string varStr = *String::AsciiValue(varName);
// I'm using 'namespace i = internal;' (within v8-namespace)
i::Vector<const char> tmpVar(varStr.data(), varStr.length());
i::Handle<i::String> varIStr = i::Isolate::Current()->factory()->NewStringFromAscii(tmpVar, i::TENURED);

// Now hunt down the stack frame of interest, be sure to consider my remarks above
i::StackFrameLocator sfl;
// Comment from the code: The caller must guarantee that such a frame exists.
i::JavaScriptFrame* jsf = sfl.FindJavaScriptFrame(0);
// create some replacement
i::Vector<const char> tmp("there you go", 12);
i::Handle<i::String> insert = i::Isolate::Current()->factory()->NewStringFromAscii(tmp, i::TENURED);
i::Object* insertObj = insert->ToObjectChecked();

// by the help of JavaScriptFrame::Print I came up with this:
i::Object* fun = jsf->function();
if (fun->IsJSFunction()){
    i::Handle<i::ScopeInfo> scope_info(i::ScopeInfo::Empty());
    i::Handle<i::SharedFunctionInfo> shared((i::JSFunction::cast(fun))->shared());
    scope_info = i::Handle<i::ScopeInfo>(shared->scope_info());
    i::Object* script_obj = shared->script();
    if (script_obj->IsScript()) {
        int stack_locals_count = scope_info->StackLocalCount();
        for (int i = 0; i < stack_locals_count; i++) {
            if (scope_info->StackLocalName(i)->Equals(*varIStr)){
                // replace the value on the stack
                jsf->SetExpression(i,insertObj);
            }
        }
    }
} 
```

# java - 使用 mockito 模拟链式方法调用？

> ID：13007839
> 
> 赞同：2
> 
> 时间：2012-10-22T08:52:04.980
> 
> 标签：java, unit-testing, gwt, junit, mockito

我需要嘲笑这个：

```
 void handleCellPreview(CellPreviewEvent<List<String>> event) {
    Element cellElement = event.getNativeEvent().getEventTarget().cast();
 } 
```

我正在这样做：

```
CellPreviewEvent<List<String>> cellPreviewEvent = Mockito.mock(
        CellPreviewEvent.class, Mockito.RETURNS_DEEP_STUBS);
Element cellElement = Mockito.mock(Element.class, Mockito.RETURNS_DEEP_STUBS);
EventTarget eventTarget = Mockito.mock(EventTarget.class);
  Mockito.when(cellPreviewEvent.getNativeEvent().getEventTarget().cast()).thenReturn(cellElement); 
```

我收到以下错误：

```
testHandleCellPreview(client.view.MyViewTest)java.lang.NullPointerException
    at com.google.gwt.dom.client.NativeEvent.getEventTarget(NativeEvent.java:137)
    atclient.view.MyViewTest.testHandleCellPreview(MyViewTest.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

我也看到了，下面同样的问题：
[mock or stub for chained call](https://stackoverflow.com/q/7926891/768894)

有人可以指出我缺少什么吗？

谢谢，
莫希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:32:48.577

我认为问题在于您试图在客户端浏览器环境之外执行 GWT 代码。GWT 旨在转换为 JavaScript 并在浏览器上运行。我不确定它是否会起作用。

我注意到第 137 行`NativeEvent`似乎是`DomImpl.impl.eventGetTarget`. 这让我相信那`DomImpl.impl`是`null`。

我通过查看代码发现了以下内容：

```
45  public static <T> T create(Class<?> classLiteral) {
46     if (sGWTBridge == null) {
47       /*
48        * In Production Mode, the compiler directly replaces calls to this method
49        * with a new Object() type expression of the correct rebound type.
50        */
51       throw new UnsupportedOperationException(
52           "ERROR: GWT.create() is only usable in client code!  It cannot be called, "
53               + "for example, from server code.  If you are running a unit test, "
54               + "check that your test case extends GWTTestCase and that GWT.create() "
55               + "is not called from within an initializer or constructor.");
56     } else {
57       return sGWTBridge.<T> create(classLiteral);
58     }
59   } 
```

你有没有延长`GWTTestCase`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T09:01:01.330

您需要在父实体中再次设置模拟对象。所以在运行时，它使用模拟对象。

```
cellPreviewEvent.setCellElement(cellElement);
cellPreviewEvent.setEventTarget(eventTarget); 
```

完整的代码如下所示：

```
CellPreviewEvent<List<String>> cellPreviewEvent = Mockito.mock(
        CellPreviewEvent.class, Mockito.RETURNS_DEEP_STUBS);
Element cellElement = Mockito.mock(Element.class, Mockito.RETURNS_DEEP_STUBS);
EventTarget eventTarget = Mockito.mock(EventTarget.class);
cellPreviewEvent.setCellElement(cellElement);
cellPreviewEvent.setEventTarget(eventTarget);
  Mockito.when(cellPreviewEvent.getNativeEvent().getEventTarget().cast()).thenReturn(cellElement); 
```

# perl - 是否有更好的实现来根据另一个文件的索引从一个文件中提取多行文本结构？

> ID：13007841
> 
> 赞同：1
> 
> 时间：2012-10-22T08:52:10.843
> 
> 标签：perl

我有两个文件。一个是从数据库中转储的表创建字符串文件，另一个是表的名称，前缀为“prompt”，后缀为“...”。如下：文件A（索引）：

```
prompt branch...
prompt branch_param...
prompt branch_pre_param...
prompt business...
prompt business_map...
prompt business_type... 
```

文件 B（转储）：

```
CREATE TABLE "KS"."BRANCH"
 ("BRANCH_CODE"       CHARACTER(3)    NOT NULL  DEFAULT '',
  "BRANCH_NAME"       CHARACTER(40)   NOT NULL  DEFAULT '',
  "PARAM_LEVEL"       INTEGER         NOT NULL  DEFAULT 0
 )
  DATA CAPTURE NONE
 IN "LONG_DATA_TBS";

CREATE TABLE "KS"."BRANCH2BANK"
 ("BRANCH_CODE"         CHARACTER(3)    NOT NULL  DEFAULT '',
  "BANK_CODE"           CHARACTER(6)    NOT NULL  DEFAULT '',
  "ACC_COMP_RESULT"     CHARACTER(1)    NOT NULL  DEFAULT ''
 )
  DATA CAPTURE NONE
 IN "SMALL_TBS";

CREATE TABLE "KS"."BRANCH2BOND"
 ("BRANCH_CODE"        CHARACTER(3)    NOT NULL  DEFAULT '',
  "BOND_CODE"          CHARACTER(8)    NOT NULL  DEFAULT '',
  "BOND_NAME"          CHARACTER(20)   NOT NULL  DEFAULT '',
  "TOTAL_AMT"          DECIMAL(19, 4)  NOT NULL  DEFAULT 0,
  "FINANCING_CUST_NO"  CHARACTER(10)   NOT NULL  DEFAULT '',
  "SET_DATE"           CHARACTER(8)    NOT NULL  DEFAULT '',
  "SET_TIME"           CHARACTER(8)    NOT NULL  DEFAULT '',
  "SET_EMP"            CHARACTER(6)    NOT NULL  DEFAULT '',
  "SPARE1"             CHARACTER(20)   NOT NULL  DEFAULT '',
  "SPARE2"             CHARACTER(20)   NOT NULL  DEFAULT ''
 )
  DATA CAPTURE NONE
 IN "SMALL_TBS";

CREATE TABLE "KS"."BRANCH_PARAM"
 ("BRANCH_CODE"    CHARACTER(3)    NOT NULL  DEFAULT '',
  "PARAM_CODE"     CHARACTER(4)    NOT NULL  DEFAULT '',
  "SET_DATE"       CHARACTER(8)    NOT NULL  DEFAULT '',
  "SET_TIME"       CHARACTER(8)    NOT NULL  DEFAULT ''
 )
  DATA CAPTURE NONE
 IN "SMALL_TBS";

CREATE TABLE "KS"."BRANCH_RESERVE_CREDIT_STOCK"
 ("BRANCH_CODE"  CHARACTER(3)    NOT NULL  DEFAULT '',
  "SET_TIME"     CHARACTER(8)    NOT NULL  DEFAULT ''
 )
  DATA CAPTURE NONE
 IN "TX_DATA_TBS"
 INDEX IN "TX_INDEX_TBS"; 
```

我已经编写了一个 perl 实现，但我认为它太丑陋且效率低下。有没有更好的方法来改善这一点？

我的代码：（用 Richard 和 lilydjwg 的建议重写）（最新版本）

```
#!/usr/bin/perl
use 5.016;

my (%hash,$cont);
open IN,'<',shift;
while(<IN>){
    chomp;
    $hash{$1}=1 if /prompt (\w+)\.\.\./;
}
close IN;
open IN,'<',shift;
while(<IN>){
    chomp;
    $cont = (defined $hash{lc $1}?say "prompt $1..." : 0) if /CREATE TABLE "KS"\."(\w+)"/;
    say if $cont == 1;
}
close IN; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:41:42.870

大概是你不喜欢的重复阅读。

所以 - 读取 CREATE TABLE 文件一次，检查：

```
CREATE TABLE "KS"."(\w+)" 
```

然后，您可以建立表定义，直到下一个 CREATE TABLE，此时您将表定义放入由表名作为键的散列中。

然后，阅读您的提示并从打印出来的哈希中一一获取定义。

或者，您可以将 CREATE TABLE 文件读入单个字符串并搜索+替换表名部分，因为这就是您目前正在更改的所有内容。第一种方法虽然更灵活。

* * *

编辑：您可以通过以下方式使定义的内容更加清晰：

```
while ($line=<IN>) {
    chomp($line);
    if (/CREATE TABLE "KS"\."(\w+)"/ && $hash{lc $1}) {
        $line = ...
    }
    say $line;
} 
```

一旦超出了几行代码，我也喜欢在我的 while 循环中使用显式变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:29:48.483

看起来文件A比较小。您可以从中读取并构建一个集合（或类似的），其中包含所有表名。然后读取并识别 SQL 转储文件，对于每个表创建语句，检查该表名是否在您的集合中。

我不太了解 Perl，但这个 Python 代码似乎是你想要的：

```
import sys

tableNames = {x[7:-3] for l in open(sys.argv[1]) if x.startswith('prompt ')}

for l in open(sys.argv[2]):
  if l.startswith('CREATE TABLE "KS"."'):
    name = l.split('"')[4].lower()
    if name in tableNames:
      print("prompt {0}...\nCreate table{0}(".format(name))
  print(l, end='') 
```

# doctrine-orm - 设置 Doctrine2 实体属性而不检索整个关联对象

> ID：13007843
> 
> 赞同：2
> 
> 时间：2012-10-22T08:52:15.930
> 
> 标签：doctrine-orm, entities

我有一个表对象，它有 2 个外键字段（user_id 和teacher_id）。为 X 表生成实体后，实体仅包含 $user 和 $teacher 属性，这迫使我使用关联对象而不是 id。所以假设我知道我的对象的 user_id 和 teacher_id，而不是这样做：

```
$object->setUserId(1) 
```

我要做：

```
$user = $this->getDoctrine()->getRepository('MyBundle:Users')->find(2);
$object->setUser($user) 
```

有没有办法直接使用 id 来避免检索与每个 id 关联的整个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:15:39.390

框架建议在设置关联值时使用对象。仍然——你确定记录还没有加载到内存中吗？如果是，则不会导致额外的 SQL 语句执行。

如果确实需要在不加载对象的情况下更新关联，可以

*   运行本机 SQL；
*   尝试手动创建 Doctrine Proxy 对象并设置它。

`EntityManager`您可以使用方法获取代理对象`getReference`：

```
$object->setUser($this->getDoctrine()->getReference('MyBundle:Users', 2)); 
```

# asp.net - 占位符不显示超链接

> ID：13007845
> 
> 赞同：0
> 
> 时间：2012-10-22T08:52:24.340
> 
> 标签：asp.net, repeater

我的要求与 stockoverflow 标签显示相同。我有一个转发器控件，我在其中绑定了几列。现在我想显示与相应线程关联的不同标签。请找到代码...

```
<asp:Repeater ID="repForumThread" runat="server">
            <HeaderTemplate>
            </HeaderTemplate>
            <ItemTemplate>
                <table width="100%">
                    <tr>
                        <td>                            
                            <asp:HyperLink ID="hlCategory" runat="server"     NavigateUrl='<%#GetRouteUrl("CategoryRoute", new {CategoryNo= Eval("CategoryId"),CategoryName = Eval("CategoryTitle").ToString().ToLower().Trim().Replace(" ","-")}) %>'
                            Text='<%# DataBinder.Eval(Container.DataItem, "CategoryTitle")%>'></asp:HyperLink>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="lblThreadTitle" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ThreadTitle") %>'></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>                            
                        <asp:HyperLink ID="hlThreadCreatedBy" runat="server" NavigateUrl='<%#GetRouteUrl("ProfileRoute", new {Member= Eval("MemberId"),MemberName = Eval("ThreadCreatedBy").ToString().ToLower().Trim().Replace(" ","-")}) %>'
                            Text='<%# DataBinder.Eval(Container.DataItem, "ThreadCreatedBy")%>'></asp:HyperLink>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="lblCreatedOn" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"ThreadCreatedOn") %>'></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="lblDescription" runat="server" CssClass="HeaderTextSmall" Text='<%#DataBinder.Eval(Container.DataItem, "ThreadDescription")%>'></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:PlaceHolder ID="phTag" runat="server"></asp:PlaceHolder>
                    </td>
                </tr>
            </table>
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
    </asp:Repeater>

    public void BindRepForumThread()
            {
                SqlConnection dBConnection = null;
                try
                {
                    dBConnection = new SqlConnection();
                    DataTable dtTag = new DataTable();
                    dBConnection.ConnectionString = ConfigurationManager.ConnectionStrings["Conn"].ConnectionString;
                    SqlDataAdapter dataAdapter = new SqlDataAdapter();

                    SqlCommand cmd = new SqlCommand("SP_GetThreadDetails", dBConnection);
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add("@threadId", SqlDbType.Int).Value = threadId;

                    dBConnection.Open();
                    dataAdapter.SelectCommand = cmd;
                    DataSet ds = new DataSet();
                    dataAdapter.Fill(ds);

                    if (ds.Tables[0].Rows.Count > 0)
                    {
                        DataTable dtThread = new DataTable();
                        DataRow drThread;
                        dtThread.Columns.Add("ThreadId");
                        dtThread.Columns.Add("CategoryId");
                        dtThread.Columns.Add("CategoryTitle");
                        dtThread.Columns.Add("ThreadTitle");
                        dtThread.Columns.Add("ThreadDescription");
                        dtThread.Columns.Add("ThreadCreatedBy");
                        dtThread.Columns.Add("ThreadCreatedOn");
                        dtThread.Columns.Add("MemberId");
                        dtThread.Columns.Add("TagId");
                        dtThread.Columns.Add("TagDescription");

                        foreach (DataRow dr in ds.Tables[0].Rows)
                        {
                            drThread = dtThread.NewRow();

                            drThread["ThreadId"] = dr["T_ThreadId"];
                            drThread["CategoryId"] = dr["C_CategoryId"];
                            drThread["CategoryTitle"] = dr["C_CategoryTitle"];
                            drThread["ThreadTitle"] = dr["T_ThreadTitle"];
                            drThread["ThreadDescription"] = dr["T_ThreadDescription"];
                            drThread["ThreadCreatedBy"] = dr["Mem_MemberUserName"];
                            drThread["ThreadCreatedOn"] = dr["T_ThreadCreatedOn"];
                            drThread["MemberId"] = dr["T_ThreadCreatedBy"];

                            if (ds.Tables[1].Rows.Count > 0)
                            {
                                phTag.Controls.Clear();

                                foreach (DataRow dr1 in ds.Tables[1].Rows)
                                {
                                    HyperLink hlTag = new HyperLink();
                                    hlTag.Text = dr1["Tg_TagName"].ToString();
                                    int TagId = Convert.ToInt32(dr1["Tg_TagId"].ToString());
                                    hlTag.ID = "hlTag" + TagId.ToString();

                                    hlTag.NavigateUrl = hlTag.GetRouteUrl("TagRoute", new { Id = TagId, TagName = hlTag.Text.ToString().ToLower().Trim().Replace(" ", "-") });
                                    phTag.Controls.Add(hlTag);
                                }
                            }

                            dtThread.Rows.Add(drThread);
                        }

                        repForumThread.DataSource = dtThread;
                        repForumThread.DataBind();

                        dBConnection.Close();
                    }
                }
                catch (Exception Ex)
                {
                    throw Ex;
                }
                finally
                {
                    // Close data reader object and database connection
                    if (dBConnection.State == ConnectionState.Open)
                        dBConnection.Close();
                }
            } 
```

evreything 工作正常。我能够动态生成超链接，但我无法显示创建的超链接并且它为占位符抛出错误“对象引用未设置为对象的实例”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:59:42.510

好吧，我已经解决了这个问题。我错过了转发器控制的 OnItemCreate 函数，我们可以在其中找到占位符的控件，然后我们可以动态添加超链接。

```
protected void repForumThread_ItemCrteated(object sender, RepeaterItemEventArgs e)
        {
            DataRowView drv = e.Item.DataItem as DataRowView;
            DataTable dtTag = new DataTable();
            if (Cache["TagData"] != null)
            {
                dtTag = (DataTable)Cache["TagData"];
            }
            if (dtTag.Rows.Count > 0)
            {
                if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
                {

                    PlaceHolder plTag = e.Item.FindControl("phTag") as PlaceHolder;
                    if (plTag != null)
                    {
                        plTag.Controls.Clear();
                        foreach (DataRow dr1 in dtTag.Rows)
                        {

                            HyperLink hlTag = new HyperLink();
                            hlTag.Text = dr1["Tg_TagName"].ToString();
                            int TagId = Convert.ToInt32(dr1["Tg_TagId"].ToString());
                            hlTag.ID = "hlTag" + TagId.ToString();

                            hlTag.NavigateUrl = hlTag.GetRouteUrl("TagRoute", new { Id = TagId, TagName = hlTag.Text.ToString().ToLower().Trim().Replace(" ", "-") });
                            plTag.Controls.Add(hlTag);
                        }
                    }
                }
            }
        } 
```

# spring-mvc - 如何在 Java (Spring MVC) 中连接 Facebook、Twitter 和 Google 帐户

> ID：13007846
> 
> 赞同：3
> 
> 时间：2012-10-22T08:52:26.447
> 
> 标签：spring-mvc, oauth, twitter-oauth, facebook-oauth, socialauth

我正在研究社交身份验证 (http://code.google.com/p/socialauth/) 的功能并想知道这是否是满足我要求的最佳选择。请指导。

我的网络应用程序目前有它自己的登录机制（本机）。但我打算做以下事情：

1.  通过 Facebook(F)、Twitter(T) 和 Google(G) 选项登录
2.  登录后（通过 F、T、G 或本地登录），我想让用户选择 F 朋友、T 关注者或 G 联系人（在带有自动提示功能的文本框中）

所以我的疑问是：（social auth 说“..目前 Facebook、Twitter 和 LinkedIn 不提供电子邮件地址。更新：Hotmail 已停止提供电子邮件地址。”）所以虽然我会有一个关注者、朋友或联系人的列表一旦我的用户选择并提交了他的表单，我可以通知他们吗？

会分别通过 F、T 还是 G（通过状态更新、推文或电子邮件？）

此外，我还有一个场景：例如，用户使用 Facebook 登录。现在我希望用户也能够链接她的 Twitter 和 Google 帐户。socialauth 可以提供吗？如果是，我将如何处理同一用户的多个配置文件对象？

请指导或建议任何其他图书馆。我的应用程序在 Spring MVC 中。

还是我应该使用 Spring Social？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T09:40:27.677

由于您的应用程序使用 Spring-MVC，您应该尝试[Spring Social](http://www.springsource.org/spring-social)。这将是您的应用程序的最佳选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T12:53:52.277

您还可以使用 socialauth 库。它也有弹簧版本连接 FB、twitter 和其他供应商。相同的链接如下所示：-

[http://code.google.com/p/socialauth/](http://code.google.com/p/socialauth/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T12:04:50.403

Spring Social 是满足您要求的最佳选择，并且可以轻松地与

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T14:50:36.677

有 2 种行之有效的方法可用于此

1.  使用[Spring-security-oauth2](http://www.littlebigextra.com/spring-boot-oauth2-tutorial-for-authorizing-through-facebook-google-linkedin-and-twitter/)
2.  使用[Spring Social](http://www.littlebigextra.com/category/java/spring-social/)

但是，如果您仅使用 Spring 网站上提供的基于 facebook 示例的 Spring Social，那么请注意这些问题

1.  它不适用于超过 1 个用户
2.  Spring-social 也不支持 Google。
3.  除非您覆盖方法，否则更改重定向流程也很困难

但好在有一些解决方法可以解决它们，而且它们非常简单。

*   以下是如何[解决每个应用程序问题一个用户的 FB](http://www.littlebigextra.com/how-to-fix-spring-social-facebook-one-user-per-application-problem/)

*   [用于与Google](http://www.littlebigextra.com/access-google-data-using-spring-social/)连接/验证

*   用于更改[默认重定向流程](http://www.littlebigextra.com/how-to-change-the-default-spring-social-redirect-flow/)

[可以在此处](http://littlebigextra.com/part-1-authorising-user-using-spring-social-google-facebook-and-linkedin-and-spring-security/)找到包含分步说明的完整教程

探索了 oauth2 和 Spring Social。我建议 Spring-social 因为它更简单，并且仅为社交登录而定制。

# php - 如何使用数据库中的预定义公式并在 javascript 中使用它？

> ID：13007849
> 
> 赞同：0
> 
> 时间：2012-10-22T08:53:01.143
> 
> 标签：php, javascript, mysql

我有一个页面，用户可以在其中选择和定义自己的公式来计算讲师的“工作量”

例如，(Jobtypevalue + Creditpoint) * 学生人数

我将用户定义的公式存储在数据库中。

现在，我想在另一个页面中使用这个公式，这些页面是用户可以输入任何数字的字段（文本框），在底部我需要使用用户根据数据库中的预定义公式输入的值来计算

如果用户输入 Jobtypevalue = 7, Creditpoint = 3 and Number of students = 10 然后，在页面底部，我需要计算 [(7+3)*10] 并显示“Workload = 100”

如何使用 javascript 做到这一点？因为，我有来自数据库的页面加载公式，并且值是用户稍后输入的，所以认为最好使用 javescript（客户端）计算工作量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:01:50.017

您可以尝试这样，但您的变量名称应遵循正确的命名约定

```
//values in variables
var Jobtypevalue =7;
var Creditpoint = 3;
var Number_of_Students=10;

//use eval to evalute.
alert(eval("(Jobtypevalue + Creditpoint) * Number_of_Students")); 
```

你可以查看这个**[DEMO](http://jsfiddle.net/fCkUk/)**

# entity-framework - EF5：防止自动列发现

> ID：13007850
> 
> 赞同：2
> 
> 时间：2012-10-22T08:53:05.667
> 
> 标签：entity-framework, entity-framework-5

我使用 EF 的代码优先和“流利的”API。它会自动映射我的实体的属性和导航属性。

`Ignore()`我在这些类中有很多行为和其他属性，因此在这种情况下需要调用。

我可以更改它，使其仅映射我使用 fluent API*明确指定的内容吗？*我想研究白名单方法，而不是目前的黑名单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:42:22.930

我认为这在 EF5 中是不可能的。您可能可以使用反射进行一些黑客攻击，将所有属性配置为 Ignored，然后覆盖您不想被忽略的属性的配置。自定义约定又回到了 EF6 (http://entityframework.codeplex.com/SourceControl/changeset/34668c5ce244)

# iphone - .m4a 文件在上传到服务器时未播放

> ID：13007856
> 
> 赞同：4
> 
> 时间：2012-10-22T08:53:30.843
> 
> 标签：iphone, objective-c, ios, m4a

在我的应用程序中，我正在从 iTunes 下载的 iphone 库（存储在核心数据中）上传**.m4a**音乐文件，问题是上传的文件没有播放（即使在浏览器中），有时上传的文件大小为 4MB，在服务器显示 20KB。如果我上传一个**.mp3**文件，它就是完美的上传和完美的播放。请帮助我。我的代码如下所示。

```
[request addData:[managedobject valueForKey:@"songData"] withFileName:[managedobject valueForKey:@"song_name"] andContentType:nil forKey:@"file"];

[request setPostValue:[managedobject valueForKey:@"song_extension"] forKey:@"extension"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:13:27.963

尝试手动将文件上传到您的服务器以验证它是否可以播放...由于 Apples Fairplay ( [http://en.wikipedia.org/wiki/FairPlay](http://en.wikipedia.org/wiki/FairPlay) ) DRM，我无法播放从商店购买的歌曲也是。但是，如果不是这种情况，请重新检查您的上传代码，因为有问题。

# c++ - 使用 fstream 读取二进制文件

> ID：13007862
> 
> 赞同：-1
> 
> 时间：2012-10-22T08:53:59.567
> 
> 标签：c++, arrays, binary, char, fstream

我正在使用 fstream 读取二进制文件并将信息存储在字符数组中：

```
int dataLength = 32;
int counter = 0;
char data[dataLength];
char PMTone[dataLength/4];
std::fstream *fs = new std::fstream(inputFileName,std::ios::in|std::ios::binary);
fs->read((char *)&data, dataLength);
//of the 32 characters in data[], I need first, 5th etc elements:
//fill first pmt info
for(int i=0; i<(dataLength/4); i++){
PMTone[i]=data[counter];
counter+=4;
} 
```

现在我将 PMTone[7] 设置为 a 作为测试：

```
PMTone[7] = "a"; 
```

我得到错误：

> mdfTree.cpp:92:21：错误：从 'const char*' 到 'char' 的无效转换 [-fpermissive]

当 PMTone[] 被定义为字符数组时，我不明白为什么 PMTone[] 中的元素是指向字符的指针。

当我将 PMTone[] 视为指向字符的指针数组时：

```
(*PMTone)[7] = "a"; 
```

我收到另一个我不明白的错误：

> mdfTree.cpp:91:18: 错误: 数组下标的无效类型 'char[int]'

这似乎暗示编译器根本不认为 PMTone[] 是一个数组，而只是一个指向 char 的指针。

任何人都可以阐明这里发生的事情吗？为什么 PMTone[] 变成了一个指向字符的指针数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:56:35.150

字面`"a"`量不是字符。

你需要：

```
PMTone[7] = 'a'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:56:36.260

`"a"`不是一个字符，它是一个字符数组，'a' 后跟一个空终止符。

你需要

```
 PMTone[7] = 'a'; 
```

带单引号。顺便说一句，我很惊讶它编译得更早，因为 dataLength 没有被声明为 const。

`PMTone`它本身是`char[8]`一个字符数组的类型。然而，它衰减为指针并且`(*PMTone)`是类型的第一个元素`char`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T21:22:41.957

数组是一种通过获取第一个元素的地址并通过索引访问其他元素来存储值的方法。数组基本上是指向第一个元素的指针。

当您创建一个数组时`chars`

```
char arr[n]; 
```

程序实际上在内存中为 n 个字符创建了空间。

访问时`arr[0]`让我们这样说：

```
arr[2] = 'a'; 
```

程序实际上是这样做的：

```
*(arr + 2) = 'a'; 
```

这意味着您正在访问一个字符，该字符存储在距离数组中第一个元素（因此是 ）的内存位置 2 个字节的位置，第`arr + 2`一个元素是`arr[0]`. 第一个元素的地址是`&(arr[0])`or, `arr`。两者是相同的值。

该错误是您尝试将字符串保存`"a"`到`char`.

问题是您尝试通过取消引用取消引用的指针来修复它：

```
(*PMTone)[7] = "a"; // is the same as
(PMTone[0])[7] = "a"; // when it should be 
PMTone[7] = 'a'; 
```

# c++ - 按下回车按钮时如何使用 C++ Win32 API 调用按钮？

> ID：13007869
> 
> 赞同：0
> 
> 时间：2012-10-22T08:54:28.230
> 
> 标签：c++, windows, winapi, dialog, modal-dialog

我使用 c++ win32 API 创建了一个对话框...有 3 个文本框、1 个组合框和 3 个按钮...

现在我有2个问题...

1.当我按下ENTER按钮时，它调用第二个按钮（ID_OK）功能，但我想调用第一个按钮（ID_MYBUTTON）......

2.我正在使用代码来关注文本框，

```
SetFocus(GetDlgItem(_hwnd, IDC_NAME)); 
```

但它无法聚焦该对话框，我的意思是光标位置在那里，但无法获得任何值，当我输入时......

任何人都可以解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:32:06.753

这可能会回答您的两个问题： http: [//blogs.msdn.com/b/oldnewthing/archive/2004/08/02/205624.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/08/02/205624.aspx)：

> 使用 DM_SETDEFID 消息设置对话框中的默认按钮
> 
> 使用 WM_NEXTDLGCTL 消息而不是 SetFocus()

```
// set default button
SendMessage(_hwnd, DM_SETDEFID, (WPARAM)ID_MYBUTTON, 0);
//TODO: if the former default button's style remains, update with BM_SETSTYLE

// set focus
SendMessage(_hwnd, WM_NEXTDLGCTL, (WPARAM)GetDlgItem(_hwnd, IDC_NAME), TRUE); 
```

# c# - Saving .ASCX files in Visual Studio 2010 takes 3 minutes

> ID：13007870
> 
> 赞同：2
> 
> 时间：2012-10-22T08:54:39.790
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio

I have a control with 2150 lines of code that contains some Telerik controls. Each time I save in Visual Studio, it takes around 3 minutes even if I just changed one character!

This happens only for the `.ASCX` files, but not the code behind. I am not using any extra tools like Resharper or JustCode.

How can I fix this? Where should I look?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:33:54.513

Slowness with saving `.ascx` (and `.aspx`) files was an issue with Visual Studio 2010.

Service Pack 1 solved this issue.

It can be downloaded [here](http://www.microsoft.com/en-gb/download/details.aspx?id=23691).

# mysql - Django - MySQL 搜索 - 加入表

> ID：13007871
> 
> 赞同：1
> 
> 时间：2012-10-22T08:54:55.557
> 
> 标签：mysql, django, join

我有这个模型：

```
class DataDefault(models.Model):
    zbozi_id = models.IntegerField(primary_key=True, db_index=True)
    zbozi_skupina = models.CharField(max_length=15, db_column='zbozi_skupina', 
                                     db_index=True, blank=True)
    zbozi_vyrobce = models.CharField(max_length=15, db_column='zbozi_vyrobce',  
                                     db_index=True, blank=True)

    def prepis_zbozi_vyrobce_url(self):  
        return MenuVyrobci.objects.get(
            zbozi_vyrobce=self.zbozi_vyrobce
        ).zbozi_url_vyrobce

    def prepis_zbozi_vyrobce_nazev(self):  
        return MenuVyrobci.objects.get(
            zbozi_vyrobce=self.zbozi_vyrobce
        ).zbozi_vyrobce_nazev

    def prepis_zbozi_skupina_url(self):  
        return MenuSkupiny.objects.get(
            zbozi_skupina=self.zbozi_skupina
        ).zbozi_url_skupina

    def prepis_zbozi_skupina_nazev(self):  
        return MenuSkupiny.objects.get(
            zbozi_skupina=self.zbozi_skupina
        ).zbozi_skupina_nazev

class MenuSkupiny(models.Model):
    zbozi_skupina = models.CharField(primary_key=True, max_length=15,
                                     db_index=True)
    zbozi_skupina_nazev = models.CharField(max_length=255, db_index=True)
    zbozi_url_skupina = models.CharField(max_length=255, db_index=True)

class MenuVyrobci(models.Model):
    zbozi_vyrobce = models.CharField(max_length=15, db_index=True,
                                     primary_key=True)
    zbozi_vyrobce_nazev = models.CharField(max_length=255, db_index=True)
    zbozi_url_vyrobce = models.CharField(max_length=255, db_index=True) 
```

但是使用起来很慢。请问，我怎样才能加入可以一次获取所有数据的表？

这个：

```
<a href="/{{ dat.prepis_zbozi_skupina_url }}">
  {{ dat.prepis_zbozi_skupina_nazev }}</a> »
<a href="/{{ dat.prepis_zbozi_skupina_url }}/{{ dat.prepis_zbozi_vyrobce_url }}">
  {{ dat.prepis_zbozi_vyrobce_nazev }}</a> 
```

会这样做：

```
[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111
[sql] (13ms) Found 1 matching rows
[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111
[sql] (20ms) Found 1 matching rows
[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111
[sql] (16ms) Found 1 matching rows
[sql] SELECT ... FROM `menu_vyrobci` WHERE `menu_vyrobci`.`zbozi_vyrobce` = amd
[sql] (15ms) Found 1 matching rows
[sql] SELECT ... FROM `menu_vyrobci` WHERE `menu_vyrobci`.`zbozi_vyrobce` = amd
[sql] (13ms) Found 1 matching rows 
```

而且不好

# ios - 如何设置 UISlider 滑动范围？

> ID：13007872
> 
> 赞同：0
> 
> 时间：2012-10-22T08:54:55.713
> 
> 标签：ios, uislider

如何设置 UISlider 滑动范围？如果UISlider'range是[0,100]，如何设置UISlider在range[10,90]之间滑动？

非常感谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:04:07.957

试试这个 ：

```
_slider.minimumValue = minValue;
_slider.maximumValue = maxValue;

_slider.value = yourValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:07:37.833

假设您的滑块名为“滑块”

你会这样做：

```
slider.minimumValue = 10;
slider.maximumValue = 90; 
```

# java - 具有多个输入选项的 ActionEvent e.getsource()

> ID：13007875
> 
> 赞同：0
> 
> 时间：2012-10-22T08:55:04.493
> 
> 标签：java, events, awt, actionlistener

我正在尝试为我遇到的问题创建一个看起来不错的解决方案。我可以用文字解释，但代码会更清楚：

```
public void actionPerformed(ActionEvent e) {       
        if(e.getSource().equals(ClassA.getButtonOne()) ||
            e.getSource().equals(ClassB.getButtonOne())) {         
            ???????.setEnabled(false);          (class a or class b)
        } 
```

说明：如何将 e.getSource() 更改为正确的类类型，以便可以对其执行方法？一个额外的细节：我确信 if 语句中的所有方法都拥有我想要执行的方法，在上面的示例中为“setEnabled”。我可以通过创建多个 if 语句来解决这个问题，但这会产生重复的代码（特别是因为将来还会有 C 类和 D 类）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:58:48.727

如果您需要使用相同的侦听器，则该需求类似于[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)或[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)模式。您应该重定向回源类，例如

```
public void actionPerformed(ActionEvent e) {       
        Object source = e.getSource();
        if (source instanceof MySource) {
           ((MySource)source).executeOnEvent(e, this);
        }
         .... 
```

这样您就不必实现大量的“如果”（正如您所确定的那样，这很容易出错且冗长）。您只需在收到事件时检查对象类型，并在适当时回调它。请注意，我在上面用事件和接收事件的对象进行回调。但是，您可以选择哪些参数是重要的/相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:01:29.820

为每个可能的源使用不同的侦听器实例并完全避免该问题。

# c#-4.0 - 如何以编程方式运行 Microsoft.VisualStudio.TestTools.UnitTesting 单元测试？

> ID：13007881
> 
> 赞同：4
> 
> 时间：2012-10-22T08:55:33.347
> 
> 标签：c#-4.0, vs-unit-testing-framework

假设我有一个单元测试项目 UnitTests.dll：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace UnitTests
{
    [TestClass]
    public class MyTests
    {
        [TestMethod]
        public void TestMethod1()
        {
            Assert.IsTrue(true);
        }

        [TestMethod]
        public void TestMethod2()
        {
            Assert.IsTrue(false);
        } 
    }
} 
```

我想从另一个项目 RunUniTests.exe 以编程方式运行上述单元测试。我怎么做？类似于 NUnit 对应物的东西，例如[如何以编程方式运行 NUnit](https://stackoverflow.com/questions/195061/how-to-run-nunit-programmatically)中所示的东西会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-26T13:13:08.540

您可以使用命令行以编程方式运行它

"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\MSTest.exe" /testmetadata:"vsmdiFile" /testsettings:

# variables - 在 Hive 中运行使用 Hive 的变量值作为输入的 shell 命令

> ID：13007882
> 
> 赞同：2
> 
> 时间：2012-10-22T08:55:36.780
> 
> 标签：variables, hive, emr

我有一个 python 脚本，它接收 Hive 表名和 2 个日期，并在这些日期之间添加所有分区。（运行一堆`hive -e 'alter table add partition (date=...)'`）

我想做的是在运行具有 hiveconf:date 变量的 Hive 脚本时将其作为输入传递给 python 脚本。

就像是：

```
!python addpartitions.py mytable date=${hiveconf:date} 
```

但当然变量替换不会发生......

有什么办法可以做到这一点？

# iphone - 在 Cocos 中检测 Blow through iPhone MIC 然后对图像及其内容执行动画

> ID：13007884
> 
> 赞同：0
> 
> 时间：2012-10-22T08:56:02.000
> 
> 标签：iphone

> **可能重复：**
> [在 Cocos 中通过 iPhone MIC 检测 Blow，然后在图像上执行动画](https://stackoverflow.com/questions/12985461/detecting-blow-through-iphone-mic-in-cocos-and-then-performing-animation-on-an-i)

![食谱详情页面](../Images/0bf7c93d82e82f1bac0027f246e92f9f.png)

大家好，我正在开发基于食谱及其详细信息的应用程序。我已经拍摄了我附在此处的详细信息页面的屏幕截图。我能够通过 iPhone 麦克风检测到 Blow 并且还能够将我在项目类中命名为“pageImage”的图像动画化。使用下面的代码

```
 -(void)viewDidLoad

      [self paperDetails];

   -(void)paperDetails
    {
        NSMutableArray *arrayNum =[[NSMutableArray alloc] init];
        [arrayNum addObject:@"1:"];
        [arrayNum addObject:@"2:"];
        [arrayNum addObject:@"3:"];
        [arrayNum addObject:@"4:"];

        CGFloat xOffset=0;
        CGFloat yOffset=0;
        CGFloat imgWidth =31.0;
        CGFloat imgHeight =30.0;
        int rowNumber =0;
        int imgInc = 0;
        for (int i=0; i<[arrayNum count]; i++) {
            //CALCULATE xOffset FOR EACH IMAGE
            if (i%1 == 0) {
                xOffset =15;
            }
            //CALCULATE yOffset FOR EACH IMAGE
            if (imgInc == 1) {
                imgInc = 0;
                rowNumber = rowNumber + 1;
            }

            imgInc = imgInc+1;
            yOffset =(imgHeight+30)* rowNumber;
            NSLog(@"yOffset   %f",yOffset);

            UILabel *recipeTitle = [[UILabel alloc]init];
            [recipeTitle setTag:i];
            [recipeTitle setBackgroundColor:[UIColor clearColor]];
            [recipeTitle setFrame:CGRectMake(xOffset, yOffset+100, imgWidth, imgHeight)];
            //titleLabel.text=[[appDelegate.activeCardArr objectAtIndex:i] objectForKey:@"Card_Title"];
            recipeTitle.text =[arrayNum objectAtIndex:i];
            recipeTitle.textColor =[UIColor colorWithRed:0 green:0.392 blue:0 alpha:1];
            recipeTitle.font =[UIFont fontWithName:@"Noteworthy-Bold" size:23.0];
            recipeTitle.textAlignment =UITextAlignmentCenter;
            [paperImage addSubview:recipeTitle];
            [recipeTitle release];
        }

        for (int i=0; i<=3; i++) {

            //CALCULATE xOffset FOR EACH IMAGE
            if (i%1 == 0) {
                xOffset =50;
            }
            //CALCULATE yOffset FOR EACH IMAGE
            if (imgInc == 1) {
                imgInc = 0;
                rowNumber = rowNumber + 1;
            }

            imgInc = imgInc+1;
            yOffset =(imgHeight+30)* rowNumber;
            NSLog(@"yOffset   %f",yOffset);
            UILabel *paperDetail = [[UILabel alloc]init];
            [paperDetail setBackgroundColor:[UIColor clearColor]];
            [paperDetail setFrame:CGRectMake(xOffset, yOffset-165, imgWidth+250, imgHeight+50)];
            //titleLabel.text=[[appDelegate.activeCardArr objectAtIndex:i] objectForKey:@"Card_Title"];
            paperDetail.text =@"keep stirring until cooked";
            paperDetail.textColor =[UIColor colorWithRed:0.2 green:0 blue:0.098 alpha:1];
            paperDetail.font =[UIFont fontWithName:@"Noteworthy-Bold" size:23.0];
            paperDetail.textAlignment =UITextAlignmentCenter;
            [paperImage addSubview:paperDetail];
            [paperDetail release];

        }
       //*************Blow Detection Code Here **********//

        NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];
        NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                                  [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                                  [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                                  [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                                  nil];

        NSError *error;

        recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

        if (recorder) {
            [recorder prepareToRecord];
            recorder.meteringEnabled = YES;
            [recorder record];

            levelTimer = [NSTimer scheduledTimerWithTimeInterval:0.005 target: self selector: @selector(levelTimerCallback:) userInfo:nil repeats:YES];

        }
        else{
            //       NSLog([error description]);
        }
    }
    - (void)levelTimerCallback:(NSTimer *)timer {
        [recorder updateMeters];
        const double ALPHA = 0.05;
        double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
        lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;
        if (lowPassResults >0.55)
        {
            if (!self.blowDetected) {
                self.blowDetected = TRUE;
    //            NSLog(@"Mic blow detected");
                [self changeFrame];
            }
        } else
        {
    //        NSLog(@"Blow not detected with residual power: %f", lowPassResults);
            self.blowDetected = FALSE;
        }
    }

    -(void)changeFrame
    {
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:1];
        [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:paperImage cache:NO];
        [UIView commitAnimations];
    } 
```

我担心的是，每次检测到打击并在图像上执行动画时，我必须如何管理此图像上的内容。我从昨天开始为此做 rnd，但直到现在都无法摆脱。请建议我一些想法这个或更好的代码来管理这个问题。我会感谢所有在这里提供帮助的人。

# erlang - spawn_link 不工作？

> ID：13007890
> 
> 赞同：2
> 
> 时间：2012-10-22T08:56:15.760
> 
> 标签：erlang

我正在使用`spawn_link`但不了解它的行为。考虑以下代码：

```
-module(test).
-export([try_spawn_link/0]).

try_spawn_link() ->
  spawn(fun() ->
    io:format("parent: ~p~n", [Parent = self()]),
    Client = spawn_link(fun() ->
      io:format("child: ~p~n", [self()]),
      spawn_link_loop(Parent)
    end),
    spawn_link_loop(Client)
  end).

spawn_link_loop(Peer) ->
  receive
    quit ->
      exit(normal);
    Any ->
      io:format("~p receives ~p~n", [self(), Any])
  end,
  spawn_link_loop(Peer). 
```

在[Erlang 文档](http://www.erlang.org/doc/man/erlang.html#spawn_link-1)中，在调用进程和新进程之间创建了一个原子链接。但是，我测试如下，并没有注意到链接的效果。

```
1> test:try_spawn_link().
parent: <0.34.0>
<0.34.0>
child: <0.35.0>
2> is_process_alive(pid(0,34,0)).
true
3> is_process_alive(pid(0,35,0)).
true
4> pid(0,35,0) ! quit.
quit
5> is_process_alive(pid(0,35,0)).
false
6> is_process_alive(pid(0,34,0)).
true

1> test:try_spawn_link().
parent: <0.34.0>
<0.34.0>
child: <0.35.0>
2> is_process_alive(pid(0,34,0)).
true
3> is_process_alive(pid(0,35,0)).
true
4> pid(0,34,0) ! quit.
quit
5> is_process_alive(pid(0,35,0)).
true
6> is_process_alive(pid(0,34,0)).
false 
```

据我了解，如果链接的一个对等点退出，则另一个对等点退出（或被通知退出）。但结果似乎与我的理解不同。

> **编辑：**感谢[legoscia](https://stackoverflow.com/a/13008203/940313)和[Pascal](https://stackoverflow.com/a/13008199/940313)的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:14:56.117

这是因为您选择了使用`exit(normal)`. 在这种情况下，其他进程不会停止。例如，如果您使用，`exit(killed)`那么您将获得您所期望的行为。

您可以使用监视器来了解有关正常终止的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T09:15:05.490

正如[Erlang 参考手册的“进程”一章](http://www.erlang.org/doc/reference_manual/processes.html)的“错误处理”部分所述，只有在退出原因不是时，一个链接进程退出才会导致其链接进程退出`normal`。这就是 OTP 广泛使用`shutdown`退出原因的原因。

# sorting - 使用 Thrust 对数组结构进行排序

> ID：13007891
> 
> 赞同：1
> 
> 时间：2012-10-22T08:56:21.000
> 
> 标签：sorting, cuda, thrust

我正在研究 CUDA 并面临以下问题。我有以下数组结构：

```
typedef struct Edge{
    int *from, *to, *weight;
} 
```

我想在权重数组上对这个结构进行排序，以便相应的“from”和“to”数组也得到更新。我想过使用 Thrust 库，但它只适用于向量是我所理解的。我可以 sort_by_key 并对两个数组进行排序，但我无法理解如何对三个数组进行排序？我什至查看了 zip_iterator 但不明白如何使用它来达到我的目的。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:39:12.560

首先将结构解耦为 1) 键和 2) 填充。然后对键进行排序并相应地重新排序填充。例如，打破这个结构：

```
typedef struct Edge{
    int from, to, weight;
} 
```

进入：

```
int weight[N];
typedef struct Edge{
    int from, to;
} 
```

完整代码在这里：

```
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>
#include <cmath>
#include <thrust/sort.h>

typedef struct pad {
        int from;
        int to;
} padd;

__host__ padd randPad() {
        padd p;
        p.from = rand();
        p.to = rand();
        return p;
}

__host__ std::ostream& operator<< (std::ostream& os, const padd& p) {
        os << "(" << p.to << " , " << p.from << " )";
        return os;
}

int main(void)
{
  // allocation
  #define N 4
  thrust::host_vector<int> h_keys(4);
  thrust::host_vector<padd> h_pad(4);

  // initilization
  thrust::generate(h_keys.begin(), h_keys.end(), rand);
  thrust::generate(h_pad.begin(), h_pad.end(), randPad);

  // print unsorted data
  std::cout<<"Unsorted keys\n";
  thrust::copy(h_keys.begin(), h_keys.end(), std::ostream_iterator<int>(std::cout, "\n"));
  std::cout<<"\nUnsorted paddings\n";
  thrust::copy(h_pad.begin(), h_pad.end(), std::ostream_iterator<padd>(std::cout, "\n"));

  // transfer to device
  thrust::device_vector<int> d_keys = h_keys;
  thrust::device_vector<padd> d_pad = h_pad;
  //thrust::sort(d_keys.begin(), d_keys.end());

  // sort
  thrust::sort_by_key(d_keys.begin(), d_keys.end(), d_pad.begin());

  // transfer back to host
  thrust::copy(d_keys.begin(), d_keys.end(), h_keys.begin());
  thrust::copy(d_pad.begin(), d_pad.end(), h_pad.begin());

  // print the results
  std::cout<<"\nSorted keys\n";
  thrust::copy(h_keys.begin(), h_keys.end(), std::ostream_iterator<int>(std::cout, "\n"));
  std::cout<<"\nSorted paddings\n";
  thrust::copy(h_pad.begin(), h_pad.end(), std::ostream_iterator<padd>(std::cout, "\n"));

  return 0;
} 
```

输出将是这样的：

```
Unsorted keys
1804289383
846930886
1681692777
1714636915

Unsorted paddings
(424238335 , 1957747793 )
(1649760492 , 719885386 )
(1189641421 , 596516649 )
(1350490027 , 1025202362 )

Sorted keys
846930886
1681692777
1714636915
1804289383

Sorted paddings
(1649760492 , 719885386 )
(1189641421 , 596516649 )
(1350490027 , 1025202362 )
(424238335 , 1957747793 ) 
```

# xml - XPath 在 T-SQL 中选择 XMLNS 属性的值

> ID：13007897
> 
> 赞同：0
> 
> 时间：2012-10-22T08:56:30.577
> 
> 标签：xml, tsql, xpath

我有一个看起来像这样的 XML 文档。它可能是无效的（我没有创建它！）

```
<ns:url xmlns:ns="http://www.urlone.com/" xmlns:news="http://www.urltwo.com/">
.. node tree
</ns:url> 
```

我需要构建一个 T-SQL 查询来提取 xmlns:news 属性的值并更新它。这需要 XPath。但是到目前为止我尝试的所有查询都失败了，错误类似于：

> XPath 表达式使用未绑定的命名空间前缀 xmlns

是否可以在给定 XML 格式的情况下选择和更新此节点？如果是这样，怎么做？

干杯，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:36:59.237

要获取值，您可以使用[OPENXML](http://msdn.microsoft.com/en-us/library/aa226522%28v=sql.80%29.aspx)边缘表。

```
declare @XML xml = '
<ns:url xmlns:ns="http://www.urlone.com/" xmlns:news="http://www.urltwo.com/">
</ns:url>'

declare @idoc int

exec sp_xml_preparedocument @idoc output, @XML

select X1.[text]
from openxml(@idoc, '*') as X1
  inner join openxml(@idoc, '*') as X2
    on X1.parentid = X2.id
where X2.localname = 'news' and -- Attribute name
      X2.prefix = 'xmlns' and   -- Namespace
      X2.parentid = 0           -- Attribute on root

exec sp_xml_removedocument @idoc 
```

[除了重新创建 XML 或使用字符串操作](http://msdn.microsoft.com/en-us/library/ms186862.aspx)之外，我不知道有什么方法可以更新 URL 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:29:45.770

在 XPath 数据模型中，名称空间声明转换为名称空间节点，而不是属性节点。所以查找新闻命名空间值的 XPath 表达式是

```
/*/namespace::news 
```

# javascript - javascript touchevent ‒ 如何获取目标

> ID：13007898
> 
> 赞同：0
> 
> 时间：2012-10-22T08:56:31.347
> 
> 标签：javascript, touch, android-browser

我正在尝试让我的网站在触摸设备上运行。在桌面设备上，我捕获每一次点击，如果目标是链接的子项，我会做一些事情并阻止默认设置。但是在触摸设备上，现在的android模拟器，目标只是整个页面的div容器，所以我找不到任何链接父级。

我怎样才能得到链接？

问候菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T11:21:42.150

您要做的是从所有元素中捕获所有事件，然后检查它是哪个目标。

从另一边做。

您应该仅为您需要的元素/元素定义 eventListener，并在处理程序 eventPropagation 中使用，它将停止传播到父元素：

```
e.stopPropagation() 
```

# php - ZendFramework 2 - 我怎样才能像 ZF1 中那样做类似的 Bootstrap.php？

> ID：13007901
> 
> 赞同：1
> 
> 时间：2012-10-22T08:56:40.240
> 
> 标签：php, zend-framework, zend-framework2, zend-route, zend-router

我有 ZF 1，在那里我使用 Bootstrap.php 工作，其中包含大量路由和其他 preDispatch 内容。

但是在 ZF2 中已经没有 Bootstrap.php 的概念了吗？或者我的意思是我怎么能在 Zf2 中做同样的事情？

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {

  protected function _initPdispatch() {
    $this->bootstrap('frontController');
    require_once APPLICATION_PATH . '/controllers/plugin/LanguageSelector.php';
    $plugin = new LanguageSelector();
    $front = Zend_Controller_Front::getInstance();
    $front->registerPlugin($plugin);
    return $plugin;
  }

  protected function _initRoutes() {
    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();
    $dynamic1 = new Zend_Controller_Router_Route(
                    '/:variable1',
                    array(
                        'controller' => 'router',
                    ),
//              array('variable1' => '^[a-zA-Z0-9_-]*$')
                    array('variable1' => '^[\w.-]*$')
    );
    $router->addRoute('dynamic1', $dynamic1);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:07:20.890

ZF2 的最佳功能之一是我一开始实际上*讨厌*的东西，那就是路线。这既很棒*又*烦人，因为现在您*需要*为所有模块设置路由。

理解 ZF2（更快）的一部分是理解模块。如果你能克服这一点，你将开始更快地适应。（至少对我来说是这样）。那么，ZF2 中的模块是什么？任何事物！

无论如何，每个模块和应用程序的所有配置文件最终都会合并到 Zend 框架中，这意味着您可以在任何地方定义路由。

也就是说，您不再需要“引导”您的路线，因为这是您`ModuleName/config/module.config.php`文件的一部分。现在。

现在，我不是 ZF2 中正则表达式路由的专家，但它会是这样的：

```
// MyModule/config/module.config.php
return array(
    'router' => array(
        'routes' => array(
            'dynamic1' => array(
                'type' => 'regex',
                'options' => array(
                    'route' => '/[:variable1]'
                )
            )
        )
    )
); 
```

在那里你定义了正则表达式。此外，我在他们的文档中看到您还可以手动定义正则表达式路由：

```
use Zend\Mvc\Router\Http\Regex;

// ...

$route = Regex::factory(array(
    'regex' => '/blog/(?<id>[a-zA-Z0-9_-]+)(\.(?<format>(json|html|xml|rss)))?',
    'defaults' => array(
        'controller' => 'Application\Controller\BlogController',
        'action'     => 'view',
        'format'     => 'html',
    ),
    'spec' => '/blog/%id%.%format%',
));

$router->addRoute($route); 
```

`onBootstrap()`如果您使用骨架应用程序，您应该能够将其添加为服务或将其放入应用程序模块中。

请记住，这是*他们的*例子，而且我不是这方面的专家。[这是更多信息。](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)

希望这可以帮助！

# objective-c - 如何集成 Google+ API iPhone

> ID：13007902
> 
> 赞同：0
> 
> 时间：2012-10-22T08:56:40.307
> 
> 标签：objective-c, ios, login, google-api, google-plus

我正在开发一个 iPhone 应用程序，在该应用程序中我必须实现用于登录和获取用户详细信息的 Google+ API。我已经使用此链接[https://developers.google.com](https://developers.google.com)中的 API完成了所有操作，但登录后我立即得到错误无效范围。我不知道我错过了什么。请让我知道如何实现这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:45:40.680

要代表用户访问某些内容，我们需要告诉 google 我们正在寻找此类信息（访问日历、google+ 等）。

告诉谷歌的方法是定义范围。对于谷歌加使用

```
@"https://www.googleapis.com/auth/plus.me" 
```

参考 SDK 在作用域中的传递位置。还要确保在`Google API Console`.

# php - PHP 上传 - 500 内部服务器错误

> ID：13007906
> 
> 赞同：8
> 
> 时间：2012-10-22T08:56:49.673
> 
> 标签：php, iis, upload, fastcgi, internal-server-error

## 问题

上传大约 8MB 或更大的文件时，我收到 500 内部服务器错误。

1.  中的所有 PHP 设置`php.ini`都是正确的
2.  `maxAllowedContentLength`已在 web.config 中设置

## 服务器信息

可以从 中看出`maxAllowedContentLength`，我正在运行**IIS 7.5**，带有 FastCGI 和 PHP 5.3.17

## 附加信息

我已经尝试了很多不同的方法来使它正常工作，但根本找不到问题。

但是，我发现以下信息可能有助于找出问题的根源：

1.  使用服务器上的 Media Wiki 上传文件（较大的文件）时，我收到相同的错误，这表明这不是我的代码中的错误。
2.  **最重要的是**- 我设法在 Plesk 文件管理器中上传了一个 18MB 的文件，这显然意味着 Plesk 能够解决这个配置问题。我尝试将所有 Plesk 控制面板设置复制到 IIS 中的该域，但这似乎不起作用。
3.  在执行脚本之前返回错误，因为我尝试`exit;`在顶部写入以尝试获得空白屏幕，但这被忽略并返回 500 错误。

**我认为问题`configure command`出在 PHP 配置部分**，因为当我更改`.php`文件的处理程序映射以使用 Plesk`php-cgi.exe`而不是通常的处理程序映射时，我没有收到 500 内部错误。话虽如此，我不能把它留在这个 PHP 版本上，因为它是 Plesk 自己的`exe`并且还有其他配置问题。

我认为这可能与配置命令有关的原因仅仅是因为这两者之间存在巨大差异`phpinfo()`。

如果您有任何想法或建议，请发表。据我所知，我已经尝试了一切，但似乎无法解决这个问题。要是Linux就好了……

提前致谢

**更新 1**

忘了补充，PHP 错误日志中没有返回错误。至于IIS错误，不知道去哪里找

**更新 2**

这是我放在`web.config`文件中的内容：

```
<security>
    <requestFiltering>
        <requestLimits maxAllowedContentLength="2147483647" /> 
    </requestFiltering>
</security> 
```

**更新 3**

在您的帮助下，我们设法得到了 IIS 显示的错误。这是我收到的：

> PHP 警告：12221448 字节的 POST 内容长度超过第 0 行未知中 8388608 字节的限制

跟这有关系`post_max_size`吗？

**更新 4**

PHP 设置如下（来自`phpinfo()`）：

> ```
> post_max_size = 64M
> memory_limit = 128M
> max_file_uploads = 20
> max_execution_time = 6000
> upload_max_filesize = 64M 
> ```

**更新 5**

最后，以防万一任何人发现任何潜在问题，Plesk 能够绝对正常地上传大文件，所以我假设他们的 php-cgi.exe 编译方式不同。当我阅读他们配置的 phpinfo() 时，`configure command`信息非常不同：

我的配置：

> cscript /nologo configure.js "--enable-snapshot-build" "--disable-isapi" "--enable-debug-pack" "--without-mssql" "--without-pdo-mssql" "--没有-pi3web" "--with-pdo-oci=C:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8=C:\php-sdk\oracle\instantclient10\sdk,shared" "--with-oci8-11g=C:\php-sdk\oracle\instantclient11\sdk,shared" "--enable-object-out-dir=../obj/" "--enable-com-dotnet=共享”“--with-mcrypt=static”“--disable-static-analyze”

Plesk 的配置：

> cscript /nologo configure.js "--enable-debug-pack" "--enable-cli" "--enable-cgi" "--enable-isapi" "--enable-one-shot" "--enable- pdo" "--enable-intl" "--with-openssl=shared" "--with-pdo-odbc" "--with-iconv" "--with-xml" "--with-xsl" "- --with-mysql" "--with-mysqlnd" "--with-mysqli" "--with-pdo-sqlite" "--with-pdo-mysql" "--with-curl=shared" "--enable -mbstring" "--enable-mbregex" "--with-imap=shared" "--enable-sockets" "--enable-shmop" "--enable-soap"

**更新（回答）** 这非常奇怪，因为`phpinfo()`信息说的是一件事，但显然被忽略了，不知道为什么。

如果我`post_max_size`在 Plesk 中更改该特定域/子域的 ，则不会发生任何更改（尽管在 中似乎已更改`phpinfo()`）。但是，如果我实际上更改`post_max_value`了 php.ini 中的 ，那么这可以解决问题。

这不是解决此问题的好方法，原因很简单，因为当 Plesk 更新时，php.ini 会随着 PHP 的更新而被覆盖，因此对 php.ini 所做的更改会丢失。这意味着每次 Plesk 更新时，我都需要对 php.ini 进行更改。这就是为什么 Plesk 能够在不更改 php.ini 的情况下更改 PHP 设置的原因。

任何人都可以想到为什么 PHP 会忽略本地值并恢复为 php.ini 中的值，即使 php.ini 声明本地值不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:59:15.343

如果您查看[PHP 的源代码](http://windows.php.net/downloads/releases/php-5.4.8-src.zip)，您可以在文件的`php-5.4.8-src\main\rfc1867.c`第 706-709 行看到：

```
if (SG(post_max_size) > 0 && SG(request_info).content_length > SG(post_max_size)) {
    sapi_module.sapi_error(E_WARNING, "POST Content-Length of %ld bytes exceeds the limit of %ld bytes", SG(request_info).content_length, SG(post_max_size));
    return;
} 
```

同样存在于文件中`php-5.4.8-src\main\SAPI.c`。因此，消息`PHP Warning: POST Content-Length of 12221448 bytes exceeds the limit of 8388608 bytes in Unknown on line 0`是关于 post_max_size 设置的。您已通过使用 phpinfo() 确认您已正确配置此设置，但它似乎仍然使用默认值 8M。

至于为什么，请参阅[此线程](https://stackoverflow.com/questions/11730198/php-post-max-size-local-value-overridden-by-master-value-on-plesk-iis)：

> 事实证明，在 Windows 上，您只能设置`PHP_INI_USER`按目录标记的 ini 指令。不幸的是， `upload_max_filesize`两者`post_max_size`都是`PHP_INI_PERDIR`。[来自http://php.net/manual/en/configuration.changes.php](http://php.net/manual/en/configuration.changes.php)的 PHP 文档
> 
> > 该目录的设置对于从此目录或其任何子目录运行的任何脚本都是活动的。键下的值应具有 PHP 配置指令的名称和字符串值。值中的 PHP 常量不会被解析。 **但是，只有 PHP_INI_USER 中可更改的配置值可以这样设置，PHP_INI_PERDIR 值不能。**
> 
> 因此，即使 Plesk 有一个界面来更改这些指令，并且即使`phpinfo()`接受了它们，*它们也不会改变实际的最大上传大小。*Plesk 不应允许您在 Windows 上更改这些内容，`phpinfo()`也不应报告更改，但您能做什么。

所以，就是post_max_size，需要在php.ini上设置。Plesk 设置根本不起作用，即使 phpinfo 另有说明。我还打开了一个关于 phpinfo 行为的[错误条目](https://bugs.php.net/bug.php?id=63330)，因为它似乎没有条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:44:11.360

这是一个相当常见的错误，因为*上传的数据大小与文件大小不匹配*：即使文件大小未超过 POST 最大大小*，*也可能是*上传的数据大小*。

请参阅PHP 手册中的[此页面](http://www.php.net/manual/en/features.file-upload.post-method.php#101761)。

```
; Maximum size of POST data that PHP will accept.
post_max_size = 8M 
```

另一个麻烦来源（对于非常大的文本）是 UTF8 编码。您可能会发现自己有一个“6 兆字节”的 TEXTAREA，它实际上是 6 兆*字符*，而对于国际代码点，它可能会运行到 8.2 兆字节。因此，您会得到“6 MB 数据超过配置的 8 MB 限制”的明显矛盾的情况。

## 更新

你报告了两个明显矛盾的事实：

```
PHP settings as follows (from phpinfo()):

    post_max_size = 64M 
```

和

```
PHP Warning: POST Content-Length of 12221448 bytes exceeds the limit of 8388608 bytes 
```

从 PHPINFO 可以清楚地看出 POST 的限制是**64M**。然而错误表明限制是**​​8M**（默认值）。所以在我看来，您的代码*正在与两个不同的 PHP 实现通信*（两个不同的虚拟主机？同一主机中的 CGI 版本和非 CGI 版本？两台不同的*机器*？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:22:37.897

IIS 将重新使用 FastCGI 进程。您需要关闭所有旧进程才能重新加载 php.ini。

编辑 FastCGI 模块并编辑 'monitor changes to file' 并选择 php.ini 文件。这将在您保存编辑时强制子进程重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-03T23:38:10.620

您可以将限制设置为 -1，这样您就不会遇到文件大小的问题。它可能不是最好的解决方案，因为您基本上是在说“如果我看不到它，它就不存在”，但请相信，它确实可靠并且永远有效。

# c# - c# 将字节数组转换为浮点数并将它们除以值

> ID：13007907
> 
> 赞同：1
> 
> 时间：2012-10-22T08:56:58.690
> 
> 标签：c#, arrays, byte, converter

我有一个接收字节的休闲代码，可能必须执行转换为浮点数并表示其转换后的值：

```
 public float DecodeFloat(byte[] data)
    {
        float x = data[3]|data[2]<<8|data[1]<<16|data[0]<<24;
        return x;
    }

     // receive thread 
  private  void ReceiveData() 
    {
        int count=0;

       IPEndPoint remoteIP = new IPEndPoint(IPAddress.Parse("10.0.2.213"), port);
       client = new UdpClient(remoteIP);
        while (true) 
        {
           try 
            {
                IPEndPoint anyIP = new IPEndPoint(IPAddress.Any, 0);
                byte[] data = client.Receive(ref anyIP);

                Vector3 vec,rot;
                float x= DecodeFloat (data);
                float y= DecodeFloat (data + 4);
                float z= DecodeFloat (data + 8);
                float alpha= DecodeFloat (data + 12);
                float theta= DecodeFloat (data +16);
                float phi= DecodeFloat (data+20);

                vec.Set(x,y,z);
                rot.Set (alpha,theta,phi);

                print(">> " + x.ToString() + ", "+ y.ToString() + ", "+ z.ToString() + ", "
                    + alpha.ToString() + ", "+ theta.ToString() + ", "+ phi.ToString());

                // latest UDPpacket
                lastReceivedUDPPacket=x.ToString()+" Packet#: "+count.ToString();
                count = count+1;

            } 
```

请问有没有人把我放在正确的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:00:18.897

`<<`给定 4 个字节，如果它是整数数据，您通常只会“移位”( )。问题中的代码基本上将数据*读取*为`int`（通过“shift”），然后将其转换`int`为`float`. 这几乎可以肯定不是预期的。

由于您想将其解释为`float`，您可能应该使用：

```
float val = BitConverter.ToSingle(data, offset); 
```

其中 offset 是 , 等中显示的`data + 4`0、4、8、12`data + 8`等。这会将 4 个字节（相对于`offset`）视为原始 IEEE 754 浮点数据。例如：

```
float x= BitConverter.ToSingle(data, 0);
float y= BitConverter.ToSingle(data, 4);
float z= BitConverter.ToSingle(data, 8);
float alpha= BitConverter.ToSingle(data, 12);
float theta= BitConverter.ToSingle(data, 16);
float phi= BitConverter.ToSingle(data, 20); 
```

请注意，这是对“字节顺序”的假设 - 请参阅`BitConverter.IsLittleEndian`。

* * *

编辑：从评论中，听起来数据是其他字节序的；尝试：

```
public static float ReadSingleBigEndian(byte[] data, int offset)
{
    if (BitConverter.IsLittleEndian)
    {
        byte tmp = data[offset];
        data[offset] = data[offset + 3];
        data[offset + 3] = tmp;
        tmp = data[offset + 1];
        data[offset + 1] = data[offset + 2];
        data[offset + 2] = tmp;
    }
    return BitConverter.ToSingle(data, offset);
}
public static float ReadSingleLittleEndian(byte[] data, int offset)
{
    if (!BitConverter.IsLittleEndian)
    {
        byte tmp = data[offset];
        data[offset] = data[offset + 3];
        data[offset + 3] = tmp;
        tmp = data[offset + 1];
        data[offset + 1] = data[offset + 2];
        data[offset + 2] = tmp;
    }
    return BitConverter.ToSingle(data, offset);
}
...
float x= ReadSingleBigEndian(data, 0);
float y= ReadSingleBigEndian(data, 4);
float z= ReadSingleBigEndian(data, 8);
float alpha= ReadSingleBigEndian(data, 12);
float theta= ReadSingleBigEndian(data, 16);
float phi= ReadSingleBigEndian(data, 20); 
```

如果您需要对其进行大规模优化，您还可以使用不安全的代码来构建一个`int`from shift（在 shift 时选择字节顺序），然​​后执行不安全的强制以获取`int`as a `float`; 例如（注意我没有在这里检查字节序 - 它可能在大字节序机器上行为不端，但大多数人没有这些）：

```
public static unsafe float ReadSingleBigEndian(byte[] data, int offset)
{
    int i = (data[offset++] << 24) | (data[offset++] << 16) |
            (data[offset++] << 8) | data[offset];
    return *(float*)&i;
}
public static unsafe float ReadSingleBigEndian(byte[] data, int offset)
{
    int i = (data[offset++]) | (data[offset++] << 8) |
            (data[offset++] << 16) | (data[offset] << 24);
    return *(float*)&i;
} 
```

或者更疯狂，更安全的 CPU：

```
public static float ReadSingleBigEndian(byte[] data, int offset)
{
    return ReadSingle(data, offset, false);
}
public static float ReadSingleLittleEndian(byte[] data, int offset)
{
    return ReadSingle(data, offset, true);
}
private static unsafe float ReadSingle(byte[] data, int offset,
    bool littleEndian)
{
    fixed (byte* ptr = &data[offset])
    {
        if (littleEndian != BitConverter.IsLittleEndian)
        {   // other-endian; swap
            byte b = ptr[0];
            ptr[0] = ptr[3];
            ptr[3] = b;
            b = ptr[1];
            ptr[1] = ptr[2];
            ptr[2] = b;
        }
        return *(float*)ptr;
    }
} 
```

# excel - excel - 字符串验证

> ID：13007912
> 
> 赞同：1
> 
> 时间：2012-10-22T08:57:16.637
> 
> 标签：excel, parsing, excel-formula

我有需要验证的字符串，例如

```
'AB01MCD10werdfGhjklOP01DEF03124' 
```

它以 开头`AB`，后跟一个两个字符的数字，它告诉我们 'AB' 后面有多少个字符（在这种情况下是`01`，只有 1 个字符是 M）。后面应该是`CD`, 再次具有相同的行为，然后是`OP`，这是可选的，即该`OP`组可能存在也可能不存在。最后它应该以`EF`gr结尾

1.  字符串以 'AB' 开头，必填
2.  其次是'CD'再次强制
3.  后跟“OP”，这是可选的
4.  后跟“EF”，必填

我想验证 A1 中的字符串并将验证结果放在 B1 中。

如果验证成功，B1 应该有*Validation Success*，否则*Error:Expected 'CD', but found 'blah*。

请让我知道最好的方法 - 是使用公式还是宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:07:17.563

这`RegExp` 验证了一个字符串：

1.  以*AB*开头，然后是一个 2 位数字，用于设置要跟随的*字母字符数*
2.  后跟*CD*，然后是一个 2 位数字，用于设置要跟随的*字母字符数*
3.  可选的*OP*，如果存在，它也有 2 位数字，用于设置要跟随的*字母字符的数量*
4.  后跟*EF*，然后是一个 2 位数字，用于设置要跟随的*数字字符的数量*

*如果这是您想要的字符串，那么我将调整该`Len`部分以标记测试中断的位置（即错误：预期的“CD”）。尽管我注意到**您可能会遇到最多 4 个潜在问题，**而不是示例中的单个问题*）。

如果您对任何字符（来自 Chris 的代码将接受）而不是您提供的字母和数字示例感到满意，那么`RegExp`可以简化。

```
Sub Test()
    Debug.Print Validator("AB01MCD10werdfGhjklOP01DEF03124") ' TRUE with optionalOP
    Debug.Print Validator("AB01MCD10werdfGhjklEF03124")      ' TRUE without optional OP
    Debug.Print Validator("AB01MCD10weardfGhjklOP01DEF03124")  ' fail as CD string is too long
End Sub

Function Validator(strIn As String) As Boolean
    Dim objRegex As Object
    Dim objRegexM As Object
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
        .Pattern = "AB(\d{2})([a-z]+)CD(\d{2})([a-z]+)((?=OP)OP(\d{2})([a-z]+)){0,1}EF(\d{2})(\d+)"
        .ignoreCase = True
        If .Test(strIn) Then
            Set objRegexM = .Execute(strIn)
            With objRegexM(0)
                Validator = Len(.submatches(1)) = CLng(.submatches(0)) And Len(.submatches(3)) = CLng(.submatches(2)) And Len(.submatches(6)) = CLng(.submatches(5)) And Len(.submatches(8)) = CLng(.submatches(7))
            End With
        End If
    End With
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:31:55.067

基于`EF`术语也是形式`EFnn<n characters>`，试试这个

```
Function CheckString(r As Range) As String
    Dim str As String
    Dim substr As String
    Dim v As Long

    str = r.Value

    If Left$(str, 2) = "AB" Then
        str = Mid$(str, 3)
        substr = Left$(str, 2)
        str = Mid$(str, 3)
        If IsNumeric(substr) Then
            v = Val(substr)
            str = Mid$(str, v + 1)
            ' CD
            If Left$(str, 2) = "CD" Then
                str = Mid$(str, 3)
                substr = Left$(str, 2)
                str = Mid$(str, 3)
                If IsNumeric(substr) Then
                    v = Val(substr)
                    str = Mid$(str, v + 1)

                    ' OP or EF
                    If Left$(str, 2) = "OP" Then
                        str = Mid$(str, 3)
                        substr = Left$(str, 2)
                        str = Mid$(str, 3)
                        If IsNumeric(substr) Then
                            v = Val(substr)
                            str = Mid$(str, v + 1)

                            ' EF
                            If Left$(str, 2) = "EF" Then
                                str = Mid$(str, 3)
                                substr = Left$(str, 2)
                                str = Mid$(str, 3)
                                If IsNumeric(substr) Then
                                    v = Val(substr)
                                    If Len(str) = v Then
                                        CheckString = "Validation Success"
                                    Else
                                        ' No more after EF
                                        CheckString = "Error: Expecting " & v & " characters after EF"
                                    End If
                                Else
                                    ' number follows EF
                                    CheckString = "Error: Expected number following EF"
                                End If
                            Else
                                CheckString = "Error: Expecting EF"
                            End If
                        Else
                            ' number follows CD
                            CheckString = "Error: Expected number following CD"
                        End If

                    ' EF
                    ElseIf Left$(str, 2) = "EF" Then
                        str = Mid$(str, 3)
                        substr = Left$(str, 2)
                        str = Mid$(str, 3)
                        If IsNumeric(substr) Then
                            v = Val(substr)
                            If Len(str) = v Then
                                CheckString = "Validation Success"
                            Else
                                ' No more after EF
                                CheckString = "Error: Expecting " & v & " characters after EF"
                            End If
                        Else
                            ' number follows EF
                            CheckString = "Error: Expected number following EF"
                        End If
                    Else
                        CheckString = "Error: Expecting EF"
                    End If

                Else
                    ' number follows CD
                    CheckString = "Error: Expected number following CD"
                End If
            Else
                ' Begin with "CD"
                CheckString = "Error: Expected CD"
            End If
        Else
            ' number follows AB
            CheckString = "Error: Expected number following AB"
        End If
    Else
        ' Begin with "AB"
        CheckString = "Error: Expected AB"
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:37:43.720

这是第一次破解，可能有更好的方法，正则表达式不是我的事，但它适用于示例：

```
Public Function ValString(strInput As String) As String

    Static regEx As Object
    Dim x As Long
    Dim temp$
    Dim matches As Object

    If regEx Is Nothing Then Set regEx = CreateObject("vbscript.regexp")

    With regEx
        .Pattern = "^AB([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "AB") + 2, 2)) & "})CD([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "CD") + 2, 2)) & "})(OP([0-9]{2})[A-Za-z]+EF[0-9]+|EF[0-9]+)$"
        Set matches = .Execute(strInput)
        If .Test(strInput) Then
            ValString = "Validation Success"
            Exit Function
        Else
            .Pattern = "(AB|CD|EF)"
            .Global = True
            Set matches = .Execute(strInput)
            If matches.Count > 0 Then
                temp$ = "ABCDEF"
                For x = 0 To matches.Count - 1
                    temp$ = Replace(temp$, matches(x), vbNullString)
                    ValString = ValString & ",'" & matches(x) & "'"
                Next x
                If Len(temp$) > 1 Then
                    ValString = "Error:Expected '" & temp$ & "', Found " & Right(ValString, Len(ValString) - 1)
                Else
                    ValString = "Error:Paramaters Found, invalid string"
                End If
            Else
                ValString = "Error:Expected 'CD', Found nothing"
            End If
        End If
    End With
End Function 
```

根据 Chris 的建议，经过编辑以强制 AB 和 CD 后面的 2 位数字指示以下字符的长度

如果 Characters OP 遵循相同的模式，那么您可以使用：

```
.Pattern = "^AB([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "AB") + 2, 2)) & "})CD([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "CD") + 2, 2)) & "})(OP([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "OP") + 2, 2)) & "})EF[0-9]+|EF[0-9]+)$" 
```

如上所述，但 EF 也遵循相同的模式，但仅适用于数字：

```
.Pattern = "^AB([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "AB") + 2, 2)) & "})CD([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "CD") + 2, 2)) & "})(OP([0-9]{2})([A-Za-z]{" & Val(Mid(strInput, InStr(1, strInput, "OP") + 2, 2)) & "})(EF[0-9]{2})([0-9]{" & Val(Mid(strInput, InStr(1, strInput, "EF") + 2, 2)) & "})|(EF[0-9]{2})([0-9]{" & Val(Mid(strInput, InStr(1, strInput, "EF") + 2, 2)) & "}))$" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:37:34.070

我写了这个函数来为你完成这项工作。但是如果你有超过 AB/CD/EF 那么你将不得不相应地修改代码

```
Private Sub Command1_Click()
Dim A1 As String
Dim B1 As String

A1 = "AB01MCD10werdfGhjklOP01DEF03124"
B1 = CodeValidate(A1)

MsgBox B1

End Sub

Function CodeValidate(ByVal TXT As String) As String
    Dim AB As Boolean
    Dim CD As Boolean
    Dim EF As Boolean
    Dim OP As Boolean

    Dim NextCounter As Integer
    Dim Buffer As String

    Dim result As String

    For i = 1 To Len(TXT)
        Buffer = Buffer & Mid(TXT, i, 1)
        If Len(Buffer) = 2 Then
        '============
            Select Case Buffer
            Case "AB"
                If AB = False And CD = False And EF = False Then
                    AB = True
                    NextCounter = Val(Mid(TXT, i + 1, 2))
                    i = i + 2 + NextCounter
                    Buffer = ""
                Else
                    result = "Error: Duplicate [AB] found at position " & i & "."
                    Exit For
                End If
            Case "CD"
                If AB = True And CD = False And EF = False Then
                    CD = True
                    NextCounter = Val(Mid(TXT, i + 1, 2))
                    i = i + 2 + NextCounter
                    Buffer = ""
                Else
                    result = "Error: Duplicate [CD] found at position " & i & "."
                    Exit For
                End If
            Case "EF"
                If AB = True And CD = True And EF = False Then
                    EF = True
                    NextCounter = Val(Mid(TXT, i + 1, 2))
                    i = i + 2 + NextCounter
                    Buffer = ""
                Else
                    result = "Error: Duplicate [EF] found at position " & i & "."
                    Exit For
                End If
            Case "OP"
                If OP = False Then
                    OP = True
                    NextCounter = Val(Mid(TXT, i + 1, 2))
                    i = i + 2 + NextCounter
                    Buffer = ""
                Else
                    result = "Error: Duplicate [OP] found at position " & i & "."
                    Exit For
                End If
            Case Else
                If AB = False Then
                    result = "Error: Expecting [AB] but found [" & Buffer & "] at position " & i & "."
                    Exit For
                ElseIf AB = True And CD = False Then
                    result = "Error: Expecting [CD] but found [" & Buffer & "] at position " & i & "."
                    Exit For
                ElseIf AB = True And CD = True And EF = False Then
                    result = "Error: Expecting [EF] but found [" & Buffer & "] at position " & i & "."
                    Exit For
                End If
            End Select
        '============
        End If
    Next

    If result = "" Then
        result = "Validation Success"
    End If

    CodeValidate = result

End Function 
```

# javascript - 如何平滑需要时间执行的 jQuery 脚本？

> ID：13007913
> 
> 赞同：2
> 
> 时间：2012-10-22T08:57:17.570
> 
> 标签：javascript, jquery, settimeout, delayed-execution

我有一个在 DOM 中搜索并在列表中显示结果的 jQuery 脚本。

这里有脚本的简化版本：http: [//jsfiddle.net/FuJta/1/](http://jsfiddle.net/FuJta/1/)

通常有大量结果，因此脚本可能需要一段时间才能执行。（在上面的示例中，这是使用延迟脚本的函数进行模拟的）。因此，如果您在搜索框中输入得太快，脚本会阻止您输入，并且感觉很糟糕。

我怎样才能更改我的脚本，以便您可以自由输入，并在准备好时显示结果。我想要类似 facebook 搜索的东西：如果你输入得太快，结果就会延迟，但你仍然可以输入。

**html**

```
<p>Type in foo, bar or baz for searching. It works, but it is quite slow.</p><br/>
<input type="text" id="search"/>

<div id="container" style="display:none">
    <div class="element">foo</div>
    <div class="element">bar</div>
    <div class="element">baz</div>
</div>

<div id="results">
</div>​ 
```

**Javascript**

```
$(function() {
    function refreshResults() {
        var search = $('#search').val();
        var $filtered = $('#container .element').clone().filter(function() {
            var info = $(this).text();
            return info.toLowerCase().indexOf(search) >= 0;
        });
        $('#results').empty();
        $filtered.each(function() {
            $('#results').append($(this));
        });
    }

    // simulating script delay
    function pausecomp(millis) {
        var date = new Date();
        var curDate = null;
        do {
            curDate = new Date();
        }
        while (curDate - date < millis);
    }

    $('#search').keyup(function() {

        pausecomp(700);
        refreshResults();
    });
});​ 
```

一种解决方案可以仅在按 Enter 时刷新结果。这样，搜索结果的延迟感觉还可以。但如果我只是延迟结果并让用户自由输入，我更愿意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:03:07.573

您应该使用异步技术执行这样的搜索。毫无疑问，Facebook 使用某种 AJAX 来请求搜索结果——这意味着从服务器获取结果。这将有助于防止您当前遇到的 UI“冻结”。

这是您可以尝试的一个非常简单的示例（它使用 JQuery 来处理 AJAX 请求）：

```
var searchInProgress = false;//used to work out if a search is in progress
var searchInQueue = false;//used to flag if the input data has changed

function getSearchResults(searchText){
    if (searchInProgress ) {
        searchInQueue = true;
        return;
    }

    searchInProgress = true;
    searchInQueue = false;

   $.getJSON("URL",//URL to handle AJAX query
      { searchText: searchText},//URL parameters can go here
      function (data) {
         //handle your returned data here

         searchInProgress = false;

         if (searchInQueue){//text has changed, so search again
            getSearchResults();
         }
      });
}

$('#search').keyup(function() {
        getSearchResults($(this).val());
}); 
```

需要注意的几点：处理失败的 AJAX 请求以确保您可以`searchInProgress`根据需要重置标志可能是一个好主意。此外，您可以根据需要在之后添加延迟`keyup`，但这完全取决于您希望它如何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:41:54.870

[这里有一个解决方案](http://jsfiddle.net/sveinatle/AbRPn/3/)，将搜索过程分成步骤，在过程中将流返回给浏览器以允许 UI 响应。

```
$(function() {

    function searchFunc($element,search) {
        var info = $element.text();
        return info.toLowerCase().indexOf(search) >= 0;
    }

    var searchProcessor = null;
    function restartSearch() {
        console.log('Restarting...');

        // Clear previous
        if (searchProcessor != null) {
            clearInterval(searchProcessor);
        }
        $('#results').empty();

        // Values for the processor
        var search = $('#search').val();
        var elements = $('#container .element').get();
        console.log('l:',elements,elements.length);

        // Start processing
        searchProcessor = setInterval(function() {
            if (elements.length == 0) {
                // Finished searching all elements
                clearInterval(searchProcessor);
                searchProcessor = null; 
                console.log('Finished.'); 

            } else { 
                console.log('Checking element...'); 
                var $checkElement = $(elements.shift());
                if (searchFunc($checkElement, search)) {
                    $('#results').append($checkElement.clone());
                }
            }
        }, 10);
    }

    $('#search').keyup(function() {
         restartSearch() 
    });
}); 
```

它每次只处理一个元素。这可能应该增加，因此它每次可能处理 10 或 100 个，但重要的一点是工作被分成块。

这个解决方案也应该比原来的更快，因为它不是`clone()`所有的，只有匹配的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:05:28.147

从[如何在用户键入时延迟 KeyPress 功能，因此它不会为每次击键触发请求？](https://stackoverflow.com/questions/5913181/how-to-delay-keypress-function-when-user-is-typing-so-it-doesnt-fire-a-request)：

```
var timeoutId = 0;
$('#search').keyup(function () { 
    clearTimeout(timeoutId); // doesn't matter if it's 0
    timeoutId = setTimeout(refreshResults, 100);
}); 
```

它确实做了我想要的。

# android - 可以同时激活按钮和永不消失的“MediaController”吗？

> ID：13007914
> 
> 赞同：2
> 
> 时间：2012-10-22T08:57:21.190
> 
> 标签：android, layout, media-player, mediacontroller

我使用此代码（我在 stackoverflow 上找到）实现了一个简单的 MediaController。我的第一个问题是我希望`MediaController`始终可见。我可以覆盖该`hide()`方法，但此时我无法使用 BACK 按钮退出我的应用程序。我读到覆盖`dispatchKeyEvent()`可能会解决问题，但它对我没有影响。

实际上我的第二个问题是使用它时如何制作活动按钮？媒体播放器中没有新按钮，但我希​​望它们采用另一种布局（我将有大约 15 个不同的按钮）。如果我`LinearLayout`在我的 xml 中创建一个新的，那么在媒体控制器出现在屏幕上之前，带有按钮的布局是不活动的。touchEvent 使`MediaController`消失，然后我可以按下按钮。`MedaiController`是否可以同时在屏幕上拥有活动按钮和永不消失的按钮？

```
public class PlayAudioActivity extends Activity implements MediaPlayerControl {
    private static final String PLAY_AUDIO = "PLAY_AUDIO";
    private MediaController mMediaController;
    private MediaPlayer mMediaPlayer;
    private Handler mHandler = new Handler();

    static Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        context=this;

        mMediaPlayer = new MediaPlayer();
        mMediaController = new MediaController(this)
          /* {
                  @Override
                public void hide()
                {
                  mMediaController.show(0);
                }
            }*/; 

        mMediaController.setMediaPlayer(PlayAudioActivity.this);
        mMediaController.setAnchorView(findViewById(R.id.audioView));

       // String audioFile = "" ; 
        try {
            mMediaPlayer.setDataSource(this,Uri.parse("android.resource://com.example.audioplayer/raw/song"));
            mMediaPlayer.prepare();
        } catch (IOException e) {
            Log.e(PLAY_AUDIO, "Could not open file " + "  " + " for playback.", e);
        }

        mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer mp) {
                mHandler.post(new Runnable() {
                    public void run() {
                        mMediaController.show(0);
                        mMediaPlayer.start();
                    }
                });
            }
        });

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mMediaPlayer.stop();
        mMediaPlayer.release();
    }

    @Override
    public boolean canPause() {
        return true;
    }

    @Override
    public boolean canSeekBackward() {
        return false;
    }

    @Override
    public boolean canSeekForward() {
        return false;
    }

    @Override
    public int getBufferPercentage() {
        int percentage = (mMediaPlayer.getCurrentPosition() * 100) / mMediaPlayer.getDuration();

        return percentage;
    }

    @Override
    public int getCurrentPosition() {
        return mMediaPlayer.getCurrentPosition();
    }

    @Override
    public int getDuration() {
        return mMediaPlayer.getDuration();
    }

    @Override
    public boolean isPlaying() {
        return mMediaPlayer.isPlaying();
    }

    @Override
    public void pause() {
        if(mMediaPlayer.isPlaying())
            mMediaPlayer.pause();
    }

    @Override
    public void seekTo(int pos) {
        mMediaPlayer.seekTo(pos);
    }

    @Override
    public void start() {
        mMediaPlayer.start();
    }

    /*public boolean dispatchKeyEvent(KeyEvent event)
    {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK)

        finish();
        return super.dispatchKeyEvent(event);
    }*/

    @Override
    public boolean onTouchEvent(MotionEvent event) {
    mMediaController.show(0);

        return false;
    }
} 
```

我的xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/audioView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

     <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    </LinearLayout>
    <LinearLayout
        android:id="@+id/audioView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </LinearLayout>

</LinearLayout> 
```

# eclipse - Struts 2 Annotated Action 发现

> ID：13007915
> 
> 赞同：2
> 
> 时间：2012-10-22T08:57:31.127
> 
> 标签：eclipse, jsp, struts2

我有以下问题。我正在开发一个新的 Stuts2 项目，该项目已完成一半。操作类是带注释的，而不是 XML 配置的。我的问题是：很难找到一个动作映射到的类。

有没有办法跳转到执行动作的类？

示例：在 JSP 中我有以下代码：

```
<s:url var="ajax" value="/ajax1.action" /> 
```

我怎样才能很快找到这个动作映射到的动作类。我的项目有 500 多个课程。我正在使用 Eclipse 靛蓝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:03:20.620

除非您使用跟踪注释的 Struts 2 插件（例如，IntelliJ、MyEclipse），否则您将需要搜索。

如果您以合乎逻辑、一致的方式命名您的操作，IMO 这个问题就不是问题：即使没有 IDE 支持，查找功能也应该很容易。这在开发过程中需要一些时间和思考，但从长远来看是有回报的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:07:44.270

AFAIK 唯一的选择是搜索它。您可以在 Eclipse `Ctrl+H`->中进行全局搜索`File Search`。

# php - 使用带有少量不可编辑单元格的 php 生成 excel 表

> ID：13007920
> 
> 赞同：0
> 
> 时间：2012-10-22T08:57:59.020
> 
> 标签：php, excel

我想使用 php 生成 excelsheet 那么哪种方法或代码更适合用于生成动态 excelsheet？请查看屏幕截图以了解更多我面临的问题。！ [所需的excel表格格式的截图](https://www.dropbox.com/s/wjwjz2019erk07y/excel_generate_issue.png) 请，任何人都可以帮我解决这些问题吗？提前致谢。

我正在使用下面的代码示例。

```
$result = mysql_query("SELECT * FROM ".$pre."customers");
    if (!$result) die('Couldn\'t fetch records');
    $num_fields = mysql_num_fields($result);
    $headers = array();

    for ($i = 0; $i < $num_fields; $i++) 
    {
        $headers[] = mysql_field_name($result , $i);
        mysql_field_name($result , $i);
    }

    $fp = fopen('php://output', 'w');
    if ($fp && $result)
    {
            header('Content-Type: text/csv');
            header('Content-Disposition: attachment; filename="export1.csv"');
            header('Pragma: no-cache');
            header('Expires: 0');
            fputcsv($fp, $headers);

            while ($row = mysql_fetch_row($result)) 
            {
                 fputcsv($fp, array_values($row));
            }

            die;
     } 
```

但我不认为我可以将任何单元格锁定到这个 Excel 表中。那么哪种 php 方法或类适合为我的目的生成 excelsheet 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:43:27.483

似乎您想从 CSV 中获取更多信息。你知道excel中的导入功能吗？您可以轻松地将文档设置为仅从您自己的 php-service 等接收动态内容为 CSV（下部）...

我的 Excel 版本是丹麦语，但它在 det 数据选项卡下，类似于“来自互联网”:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T06:44:34.700

```
public function get_excel($err = array())
 {

     // Clear any previous output
ob_end_clean();
// I assume you already have your $result
$search = ($this->uri->segment(2))?$this->uri->segment(2):'key';
$result=mysql_query("select * from job");
$num_fields = mysql_num_fields($result);

// Fetch MySQL result headers
$headers = array();
//$headers[] = "serial no";
for ($i = 0; $i < $num_fields; $i++) {

    $headers[] = strtoupper(mysql_field_name($result , $i));
}

// Filename with current date
$current_date = date("y/m/d");
$filename = "MyFileName" . $current_date . ".csv";

// Open php output stream and write headers
$fp = fopen('php://output', 'w');
if ($fp && $result) {
    header('Content-Type: text/csv');
    header('Content-Disposition: attachment; filename='.$filename);
    header('Pragma: no-cache');
    header('Expires: 0');

    // Write mysql headers to csv
    fputcsv($fp, $headers);
    //$row_tally = 0;
    // Write mysql rows to csv
    while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
   // $row_tally = $row_tally + 1;
    //echo $row_tally.",";
        fputcsv($fp, array_values($row));
    }
    die;
}

 } 
```

# oracle - 过程中 UPDATE oracle 中的变量：标识符无效

> ID：13007921
> 
> 赞同：3
> 
> 时间：2012-10-22T08:58:04.153
> 
> 标签：oracle, plsql, plsqldeveloper

我不明白为什么服务会向 Fehler(36,11) 抱怨：PL/SQL: ORA-00904: "FOUND_VP": invalid identifier

变量是在第一次开始时声明的......不能在查询中直接使用变量吗？

尝试存储以下程序时：

```
create or replace PROCEDURE fpwl_update_vp(
     my_zn IN NUMBER, my_verwaltung IN VARCHAR2 , my_variante IN NUMBER, my_vp IN NUMBER 
   ) IS

BEGIN

DECLARE
search_VP IFT_INFO_LAUF.VP%TYPE;
found_VP IFT_INFO_LAUF.VP%TYPE;
INFOversion number := 25;

BEGIN -- search SYFA_VP

          SELECT SYFA_VP
          INTO found_VP
          FROM FPWL_VP_MAPPING
          WHERE INFO_VP=search_VP ;

          exception
          when no_data_found then
           dbms_output.put_line ('Kein SYFA VP : Importiere aus SYFA');
          --found_VP:=:=cus_info25.pa_info_data.fn_insert_syfa_vp(my_vp,25);

          WHEN OTHERS THEN
          ROLLBACK;
          RETURN;
END; -- SYFA VP

-- Update VP
UPDATE IFT_INFO_LAUF
 SET vp = found_VP
WHERE id_kopf IN 
  (SELECT id_kopf 
    FROM ift_info_kopf 
    WHERE fahrtnummer= my_zn  
    AND verwaltung= my_verwaltung
    AND variante = my_variante
  )
;

  --COMMIT;
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;

END ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:13:43.247

您的问题是 found_VP 超出范围。

将“DECLARE”块的内容移动到“IS”之后：

```
create or replace PROCEDURE fpwl_update_vp(
 my_zn IN NUMBER, my_verwaltung IN VARCHAR2 , my_variante IN NUMBER, my_vp IN NUMBER 
) IS
  search_VP IFT_INFO_LAUF.VP%TYPE;
  found_VP IFT_INFO_LAUF.VP%TYPE;
  INFOversion number := 25;
BEGIN
  BEGIN -- search SYFA_VP

  etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:01:54.243

确保

```
FPWL_VP_MAPPING.SYFA_VP 
```

与_ **_**

```
IFT_INFO_LAUF.VP 
```

并确保

```
SELECT SYFA_VP INTO found_VP FROM FPWL_VP_MAPPING WHERE INFO_VP=search_VP ; 
```

不返回多行。但我怀疑您给出的错误是否属于这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:39:21.100

由于错误消息引用了第 36 行，而`found_VP`代码示例中的引用位于第 18 行，因此您省略了实际存在问题的代码部分。

看起来您有范围问题；您`found_VP`在一个内部块（`DECLARE`/ `BEGIN`/的一个级别`END`）中声明并在该块之外引用它，无论是在父块中还是在同一级别的另一个块中。问题不在于您选择`found_VP`的位置，而是（我认为）您稍后会再次引用它，超出您发布的代码，因此在声明变量的块之外。

为了演示，我将`l_name`在一个内部块中声明，就像您所做的那样：

```
create or replace procedure p42 is
begin
    declare
        l_name all_tables.table_name%TYPE;
    begin
        select table_name
        into l_name        -- this reference is OK
        from all_tables
        where table_name = 'EMPLOYEES';
    end;

    select table_name
    into l_name            -- this reference errors
    from all_tables
    where table_name = 'JOBS';
end;
/

Warning: Procedure created with compilation errors.

show errors

Errors for PROCEDURE P42:

LINE/COL ERROR
-------- -----------------------------------------------------------------
12/2     PL/SQL: SQL Statement ignored
13/7     PLS-00201: identifier 'L_NAME' must be declared
14/2     PL/SQL: ORA-00904: : invalid identifier 
```

请注意，错误是针对第 13 行报告的，该行位于外部块中；它不会在内部块中抱怨它，因为它在那里的范围内。

因此，您需要在适当的级别声明变量。正如 Colin 't Hart 所说，这可能就在顶部，介于 the`IS`和 first之间`BEGIN`，因为那是过程级`DECLARE`部分（它不需要显式`DECLARE`关键字）。

# c++ - 使用 C++ winAPI 设置 Windows 的高性能电源计划

> ID：13007925
> 
> 赞同：4
> 
> 时间：2012-10-22T08:58:27.887
> 
> 标签：c++, c, winapi

我编写了一个代码，试图通过 c++ 中的 winAPI 激活 Windows 的高性能电源计划。它似乎适用于所有电源计划（在我的终端中它们被称为平衡、省电和戴尔），除了我感兴趣的一个，高性能计划！我希望代码检查所有电源计划，并在找到高性能时，只需将其打开然后退出。生病把我的代码放在下面，以防有人可以帮助我。提前致谢！

```
#include <windows.h>
#include <powrprof.h>
#include <iostream>
#include "stdio.h"
#include <ntstatus.h>
#include <string>
#pragma comment(lib, "powrprof.lib")

using namespace std;

int main(int argc, char **argv) {

//////////////////  SET ACTIVE HIGH PERFORMANCE PLAN  ///////////////////

//Variables
UCHAR displayBuffer[64] = " ";
DWORD displayBufferSize = sizeof(displayBuffer);
GUID buffer;
DWORD bufferSize = sizeof(buffer);

//Go throught the machine's power plans and activate the high performance one
for(int index = 0; ; index++)
{

    if (ERROR_SUCCESS == PowerEnumerate(NULL,NULL,&GUID_VIDEO_SUBGROUP,ACCESS_SCHEME,index,(UCHAR*)&buffer,&bufferSize) )
    {
        if (ERROR_SUCCESS == PowerReadFriendlyName(NULL,&buffer,&NO_SUBGROUP_GUID,NULL,displayBuffer,&displayBufferSize) )
        {
            wprintf(L"%s\n", (wchar_t*)displayBuffer);

            if( 0 == wcscmp ( (wchar_t*)displayBuffer, L"High Performance" ) )
            {
                cout << "High Performance Plan Found!\n";
                if (ERROR_SUCCESS == PowerSetActiveScheme(NULL,&buffer) )
                {
                cout << "* Setting Active High Performance Power Plan *";
                //std::cin.get(); //pause
                break;
                }

            }
        }

    }
    else break;
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T09:26:54.587

这可以更容易完成：

```
PowerSetActiveScheme(0, &GUID_MIN_POWER_SAVINGS); 
```

# c++ - OpenCV：grabcut.cpp 错误

> ID：13007926
> 
> 赞同：1
> 
> 时间：2012-10-22T08:58:29.023
> 
> 标签：c++, opencv, error-handling, bug-tracking

我正在 OpenCV 中测试“grabcut.cpp”，但在编译时出现以下错误消息：

```
OpenCV Error: Assertion failed <dtrm> std::numeric_limits<double>::epsilon<>> in unknown function, file grabcut.cpp, line 216 
```

文件中的那一行是这样的：

```
CV_Assert( dtrm > std::numeric_limits<double>::epsilon() ); 
```

这是一个错误吗？我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:27:52.973

是的，这是一个实际上在一年前[关闭的错误。](https://code.ros.org/trac/opencv/ticket/1046)但是当检查实际的 2.4.2 版本时，我可以看到补丁没有进入版本。我不知道为什么，但是您可以通过使用 NDEBUG 重新编译 OpenCV 来关闭断言。使用 Visual Studio 将 /DNDEBUG 添加到命令行应该可以解决问题。

# .htaccess - .htaccess 转换文件夹中的 url 参数

> ID：13007938
> 
> 赞同：2
> 
> 时间：2012-10-22T08:59:31.000
> 
> 标签：.htaccess

我尝试使用 RewriteRule 转换文件夹中的 url 参数。任何人都可以帮助我吗？

**来源：** search.php?term=red&cat=colors **目的地：** /search/red/colors

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:36:32.543

[此答案](https://stackoverflow.com/a/11711948/851273)**的顶部阐明了 URL 如何被[*重写*](https://stackoverflow.com/a/11711948/851273)[和](https://stackoverflow.com/a/11711948/851273)[*重定向*](https://stackoverflow.com/a/11711948/851273)。使用“convert”并不是很清楚，因为可能会发生两种完全不同的事情。**

 **要将 URL 更改为`/search.php?term=red&cat=colors`更好看的变体，您需要匹配实际请求并重定向浏览器：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /search\.php\?term=([^&]+)&cat=([^&\ ]+)
RewriteRule ^ /search/%2/%3/? [L,R=301] 
```

这使得当有人在他们的浏览器中键入 URL:`http://mysite.com/search.php?term=red&cat=colors`时，他们会被外部重定向到`http://mysite.com/search/red/colors`，从而更改地址栏中的 URL。

然后为了在内部重写更好看的 URL 并将其路由回 php 脚本：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?search/([^/]+)/([^/]+)/?$ /search.php?term=$1&cat=$2 [L] 
```

这会反过来，但只是在内部，以便浏览器地址栏中的 URL 在内容从`search.php`. 您可以根据您的需要做一个或另一个，或者如果您需要在两个方向上发生，您可以同时做这两个。**

# javascript - 使用 Phonegap 和 Facebook JavaScript API 时，我得到一个空白页面

> ID：13007942
> 
> 赞同：0
> 
> 时间：2012-10-22T09:00:10.207
> 
> 标签：javascript, facebook, cordova, facebook-javascript-sdk

我正在用 Phonegap 做一个应用程序，我使用 Facebook JavaScript API。问题是每次我执行“fb parse xml”时，我都会在浏览器中看到一个空白页面。所以 Facebook API 打开一个带有“about:blank”页面的浏览器。

为了让这种情况发生，我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:32:30.033

尝试`display=page`在您的请求中使用而不是`display=pop-up`.

例如：

```
https://www.facebook.com/login.php?api_key=********&skip_api_login=1&display=page 
```

它在我的应用程序中解决了同样的问题。

# axapta - 在 AX 2012 中拦截 doInsert、doUpdate 和 doDelete

> ID：13007943
> 
> 赞同：3
> 
> 时间：2012-10-22T09:00:13.043
> 
> 标签：axapta, x++, dynamics-ax-2012

我目前正在使用事件处理程序订阅在 AX2012 中的插入、更新和删除方法上进行数据库日志记录，但是我遇到的问题是，如果通过 doinsert、doupdate 或 dodelete 调用该方法，这些事件不会被触发，是否存在我可以拦截这些事件的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:55:24.810

您可以改为覆盖[aosValidateInsert](http://msdn.microsoft.com/en-us/library/xrecord.aosvalidateinsert.aspx)、[aosValidateUpdate](http://msdn.microsoft.com/en-us/library/xrecord.aosvalidateupdate.aspx)和[aosValidateDelete](http://msdn.microsoft.com/en-us/library/xrecord.aosvalidatedelete.aspx)方法。我已经包含了对官方文档的引用，遗憾的是它目前没有解释它们的预期用途。

顾名思义，方法是在实际操作之前调用的，这可能适合也可能不适合您的需要。记得回来`true`！

另请注意，添加方法会使 AX 使用[逐记录操作，而不是使用集合操作](http://msdn.microsoft.com/en-us/library/aa849875.aspx)，例如在`delete_from`. 此外，您不能使用[skipDataMethods](http://msdn.microsoft.com/en-us/library/aa849875.aspx)禁用它（但您可以使用[skipAOSValidation](http://msdn.microsoft.com/en-us/library/xrecord.skipaosvalidation.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:35:04.480

*doXXXX*方法专门用于避免运行与此*XXXX*操作相关的任何逻辑，因此尝试拦截它们违背了此方法的设计模式及其使用。

您是否尝试过可以通过 X++ 代码配置和查询的标准数据库日志记录？例如：

[http://www.jaestevan.com/howto-consultar-el-registro-de-base-de-datos-mediante-x](http://www.jaestevan.com/howto-consultar-el-registro-de-base-de-datos-mediante-x)

# c# - 当鼠标悬停在控件上时获取控件名称 C#

> ID：13007948
> 
> 赞同：2
> 
> 时间：2012-10-22T09:00:19.837
> 
> 标签：c#, windows, winforms

我在运行时动态添加组合框，如下所示。我遇到的问题是我不知道用户正在使用哪个组合框。

例如。用户决定在表单中添加 5 个组合框，然后转到第一个组合框，并选择一个值，我需要检索该组合框的值。

**下面的代码在做什么 - 我的方法**

我正在向 FlowlayoutPanel 添加一个组合框，并根据鼠标坐标检索它的名称......顺便说一句，这不起作用......我不知道该怎么做。

任何帮助是极大的赞赏。

```
public partial class Form1 : Form
{
    int count = 0;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        count += 1;

        ComboBox cb = new ComboBox();
        cb.Name = count.ToString();
        cb.MouseHover += new EventHandler(doStuff);

        Label lb = new Label();
        lb.Text = count.ToString();

        flowLayoutPanel1.Controls.Add(cb);
        flowLayoutPanel1.Controls.Add(lb);
    }

    public void doStuff(object sender, EventArgs e)
    {
        label1.Text = flowLayoutPanel1.GetChildAtPoint(Cursor.Position).Name;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:10:43.263

在 doStuff-eventhandler 中引发事件的组合框位于 sender-parameter 中。尝试将其转换为一个复选框，如下所示：

`ComboBox boxThatRaisedTheEvent = (ComboBox)sender;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:11:37.753

```
string text = ((ComboBox)this.GetChildAtPoint(pt)).Text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:13:22.483

```
public void DoStuff(object sender, EventArgs e)
{
    var comboBox = sender as ComboBox;
    var name = (comboBox != null ? comboBox.Name : null);
} 
```

此代码将“sender”参数转换为 ComboBox 对象，如果转换正确完成，则将 ComboBox 名称分配给字符串“name”，否则“name”为空。

提示：C# 编码风格建议方法名称应以大写字母开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T09:13:38.130

你可以试试：

```
cb.SelectionChangeCommitted += selectionChangedHandler

...

void selectionChangedHandler(object sender, EventArgs e) {
  ComboBox cb = (ComboBox)sender;
  label1.Text = cb.Name;
  // Do whatever else is needed with the combo box
} 
```

[SelectionChangeCommitted 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted%28v=vs.100%29.aspx)“*仅在用户更改组合框选择时引发*” ，这听起来像是您所追求的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T09:21:40.640

您可以尝试以下方法：

```
flowLayoutPanel1.Controls.OfType<ComboBox>().FirstOrDefault(cb => cb.Name.Equals(NAME_OF_COMBOBOX)) 
```

或更好：

```
ComboBox box = (ComboBox)sender; 
```

# semantics - 是否有允许测量短语之间的语义距离的库或框架？

> ID：13007949
> 
> 赞同：0
> 
> 时间：2012-10-22T09:00:21.267
> 
> 标签：semantics, semantic-web, semantic-markup, wordnet, semantic-analysis

我知道 WordNet 能够提供两个单词之间的语义距离，但是包含多个单词的短语呢？

是否有任何开放库可以让我测量两个不同短语之间的语义距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:55:32.570

与单词之间的语义相似性（距离）相关的是概念之间的相似性概念。一种常见的方法是提取文本/短语中表达的概念，以便将词袋减少为概念袋。这样的过程不是微不足道的（例如多义词、歧义），但领域特定的工具，例如用于生物医学领域的 MetaMap，可用于将非结构化文本映射到本体/术语中定义的明确概念/术语。

因此，此类概念袋可用于利用语义图（例如本体、WordNet）来评估文本/短语之间的相似性，这对于捕捉它们的真正含义很有趣。考虑到构建概念的语义图，[语义度量库](http://www.semantic-measures-library.org)(SML) 可用于估计此类概念包之间的相似性或距离。该库是用 Java 开发的、开源的并实施了广泛的措施。还提供了一个工具包来使用命令行界面计算语义相似度。

[您可以从专用网站http//www.semantic-measures-library.org](http://www.semantic-measures-library.org)下载 SML 和工具包

希望这些帮助

# c# - 如何在 ASP.NET 中使用 XmlDataSource 控件填充我的 DropDownList

> ID：13007950
> 
> 赞同：0
> 
> 时间：2012-10-22T09:00:22.503
> 
> 标签：c#, asp.net, xml, drop-down-menu, datasource

我想将一个 xml 文件绑定到我的 DropDownList 并且我想使用 xmlDataSource 控件。

这是我的 ascx 代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="SearchControl.ascx.cs" Inherits="Telefonie.SearchControl" %>

    <div>
        <asp:Label runat="server" ID="lblSearch">Suchbegriff</asp:Label>
        <asp:TextBox ID="txtSearch" runat="server"></asp:TextBox>
        <asp:Label runat="server" ID="lblLocation">Werk</asp:Label>
        <asp:DropDownList ID="LocationDropDown" runat="server">
        </asp:DropDownList>
        <asp:Button ID="btnSearch" runat="server" Text="Suchen" 
            onclick="btnSearch_Click" />
        <asp:XmlDataSource ID="LocationDataSource" runat="server" DataFile="~/App_Data/Werke.xml"></asp:XmlDataSource>
    </div> 
```

这是我的 xml 文件（此 xml 文件位于 app_data 文件夹中）

```
<?xml version="1.0" standalone="yes" ?>
<NewDataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="resources">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="Werk" type="xs:string" minOccurs="0" />        
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <resources>
    <Werk>Keine Angabe</Werk>
  </resources>
  <resources>
    <Werk>Germany</Werk>  
  </resources>
  <resources>
    <Werk>Other</Werk>
  </resources>
</NewDataSet> 
```

我希望我的 DropDownList 用这个 xml 文件填充，但是我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:31:06.460

```
<asp:XmlDataSource ID="databasesSource" runat="server" XPath="/NewDataSet/resources" />
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
       databasesSource.Data = [your xml];
       databasesSource.DataBind();
    }
} 
```

# android - 通过 Intent (ACTION_IMAGE_CAPTURE) 在 Android 中捕获图像

> ID：13007952
> 
> 赞同：0
> 
> 时间：2012-10-22T09:00:35.437
> 
> 标签：android, security, android-intent, camera, image

是否有一种“安全”的方式来调用 android 相机`MediaStore.ACTION_IMAGE_CAPTURE`以捕捉图片？我正在使用以下代码从相机拍摄快照：

```
Uri tempFile = Uri.fromFile(tempFile()); // returns a temporary stored files that is "Context.MODE_WORLD_WRITEABLE" so that android can put the file in this location
// tempFile looks like: file:///data/data/com.example.myapp/files/temp_picture.jpg
Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
camera.putExtra(MediaStore.EXTRA_OUTPUT, tempFile);
startActivityForResult(camera, Constants.REQUESTCODE_PICTURE_RESULT); 
```

之后（从相机“ `RESULT_OK`”返回）我将 tempFile 复制到安全的应用程序商店`Context.MODE_PRIVATE`并删除`tempFile`. 一切正常，照片被拍摄并存储在给定的 Uri 上。但图像也被放置在我的设备（位置是）的画廊中（如果是我当前的开发设备“HTC Sensation” `/mnt/sdcard/DCIM/100MEDIA/IMAG00XX.jpg`）。为什么图片存储了两次，我的代码中甚至没有提到这个位置？这是 HTC 的“功能”还是 android 相机将文件存储两次以进行媒体扫描？

我还尝试通过省略`MediaStore.EXTRA_OUTPUT`参数从相机中获取位图，但是使用此代码我只能从相机中获取缩略图（没有全分辨率）。

我阅读了很多关于 android 相机的信息，但我必须以“安全”的方式从相机中获取图像（没有其他应用程序应该读取从相机中获取的数据）。我已经考虑过实现我自己的相机表面来捕捉图片，但是通过这种方法，我必须编写很多内置相机应用程序已经提供的东西（闪光灯、饱和度、效果、缩放......）。在安卓系统上拍照真的那么难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:34:35.737

如果您希望它“安全”，请在您的应用程序中构建相机功能。无法确定设备上预装的一些随机相机应用程序会做什么。他们可能会在您不知情的情况下将图片发送到某处的服务器。可靠地做到这一点并不容易，但您只能构建基本功能。如果做不到这一点，则需要一个您信任的特定应用程序来进行图像捕获，方法是明确意图（指定包名称）。当然，这将要求用户先安装它，如果它还没有的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:33:31.880

我以与您相同的方式实现了相机。它创建图像并将其保存在我创建的文件夹中。但同时它也将图像保存在图库中。如果其他应用程序也这样做，我已经检查过了。并发现即使是其他应用程序也能做到这一点，而且它不是只有 HTC 在各种设备上测试过的问题。即使我在想它是如何工作的。

# c++ - 使用迭代器从提升多索引中删除项目时的一致性

> ID：13007954
> 
> 赞同：5
> 
> 时间：2012-10-22T09:00:39.947
> 
> 标签：c++, boost, iterator, boost-multi-index

我知道以下代码不正确，对于 std::vectors 和更普遍的所有 STL 容器：

```
std::vector<something>::iterator it = array.begin();
for(; it != array.end(); it++) {
   ...
   array.erase(it);
   ...
} 
```

因为在擦除和元素之后需要更新迭代器。

我想知道提升多索引是否相同，例如以下内容是否正确：

```
my_index::iterator it = index.get<0>().begin();
for(; it != index.get<0>().end(); it++) {
   ...
   index.erase(it);
   ...
} 
```

我想确保很好地理解文档的以下段落：http: [//www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/indices.html#guarantees](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/indices.html#guarantees) 这似乎说明了我可以在不使迭代器无效的情况下擦除。但是我不确定是否因为我删除了一个元素，我应该在迭代期间访问的另一个元素可以移动到当前迭代器的位置之前并且永远不会被访问（换句话说，通过在迭代期间擦除一些元素，我仍然确定要遍历所有元素吗？）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T09:10:35.790

您链接的段落仅适用于散列（无序）索引。它指出在*插入*新元素时，散列索引迭代器仍然有效。

擦除时，对于有序索引，您始终可以通过使用 from 的返回值来保证完全迭代`erase`：

```
for (; it != index.get<0>().end(); ) {
    if (...) it = index.erase(it);
    else ++it;
} 
```

这也适用于散列（无序）索引，因为迭代顺序在擦除元素上是稳定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T09:06:10.830

不，您的操作在提升索引中无效。从集合中删除的迭代器永远不会保持有效，如果您将它们存储在某个地方，那么可以保持有效的是集合中的其他迭代器。

实际的文字是：

> 迭代器有效性和异常安全的保证
> 
> 由于 Boost.MultiIndex 框架施加的内部约束，散列索引提供了对迭代器有效性和异常安全性的保证，这些保证实际上比 C++ 标准库技术报告 (TR1) 关于无序关联容器的要求更强：
> 
> 在插入或重新散列期间的任何情况下都会保留迭代器有效性：TR1 允许在执行重新散列（隐式或显式）时迭代器失效。通过迭代器擦除元素或元素范围永远不会抛出，因为内部散列函数和相等谓词对象实际上并未被调用。rehash 无条件提供强大的异常安全保障。
> 
> TR1 仅在内部散列函数和相等谓词对象不抛出时才保证。有点令人惊讶的结果是，如果在重新散列期间抛出异常，符合 TR1 的无序关联容器可能会删除元素！一般来说，这些更强的保证有利于用户的方便，特别是迭代器稳定性。不过，性能下降（希望是最小的）可能会导致这些商品的交换。

# javascript - Opera 从 selectNodeContents 抛出 DOMException

> ID：13007958
> 
> 赞同：1
> 
> 时间：2012-10-22T09:00:49.613
> 
> 标签：javascript, dom, opera

我正在使用应该跨浏览器兼容的纯 html 和 javascript 制作可移植文档。我将搜索/荧光笔框和结果页面放在单独的框架中。在 ie、ff 和 chrome（使用 disable-web-security 参数）中一切正常，但在 Opera 中抛出错误。我不知道为什么会这样以及如何解决。

任何帮助表示赞赏。

Opera 引发异常的函数：

```
function selectElementContents(el) {
    if (window.getSelection && document.createRange) {
    var sel = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(el);
    sel.removeAllRanges();
    sel.addRange(range);
} else if (document.selection && document.body.createTextRange) {
    var textRange = document.body.createTextRange();
    textRange.moveToElementText(el);
    textRange.select();
}
} 
```

Opera 的错误控制台：

```
Uncaught exception: DOMException: WRONG_DOCUMENT_ERR
Error thrown at line 56, column 8 in selectElementContents(el) in xy.js:
range.selectNodeContents(el); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:46:53.847

您需要在要使用它的文档中创建范围。我认为您已经根据 jsfiddle 演示解决了这个问题，但是例如该行

```
var range = document.createRange(); 
```

应该

```
 var range = el.ownerDocument.createRange(); 
```

# iphone - 如何检查 EKCalendar 是否可见

> ID：13007962
> 
> 赞同：2
> 
> 时间：2012-10-22T09:01:01.380
> 
> 标签：iphone, ios, calendar, icloud

我运行的情况是，EKEventStore 至少列出了 EKCalendarTypeLocal 类型的本地日历，但没有显示并且无法在 iOS 上的日历应用程序中选择。

```
if ([eventStore respondsToSelector:@selector(calendarsForEntityType:)]) cals = [eventStore calendarsForEntityType:EKEntityTypeEvent];
else cals = eventStore.calendars; 
```

我发现这可能与 iCloud[访问 iOS 设备上以编程方式创建的日历有关](https://stackoverflow.com/questions/9932430/accessing-programmatically-created-calendar-on-ios-device)。我还成功创建了一个本地日历，并且可以向其中添加事件。EKEventStore 没有列出这个创建的日历，但我得到了它的标识符：

```
aCal = [eventStore calendarWithIdentifier:calId]; 
```

在我删除测试设备中的 iCloud 帐户后，所有本地日历也会显示为我自己创建的。是否有可能检查本地日历是否隐藏？所以我可以写一个信息文本或隐藏它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:56:58.510

你解决了吗？

无论如何，我会尽力回答。

据我了解，iCloud 不允许显示本地日历。如果你打开 iCloud，然后让他重新打开，你会看到一条消息，如“你想将本地日历添加到 iCloud 吗？”，所以......如果问题只是在 iCloud 中查看日历，请提取您的 EKCalendar并在 EKSourceTypeCalDAV 中更改源而不是 EKSourceTypeLocal ...应该没问题

# php - 延长mysql日期

> ID：13007964
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:01:06.340
> 
> 标签：php, mysql

我正在尝试编写代码，以便在达到某个日期时显示在报告中。我想做的是找到一种方法，以便在达到日期（即今天）时，将条目保留在报告中，直到用户将其删除。因此，我需要找到一种方法来显示何时到达日期，而不是只显示今天而不是以后，它会一直显示直到被删除。

```
mysql_select_db($database_conn, $conn); 
$query = "SELECT * FROM boxes WHERE customer = '$_SESSION[kt_idcode_usr]' AND destroy_date = DATE(NOW()) AND status = 1"; 
$result = mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:17:39.753

```
SELECT * FROM boxes WHERE customer = '$_SESSION[kt_idcode_usr]' AND 
destroy_date <= DATE(NOW()) AND status = 1"; 
```

这将返回，当到达日期时，它会显示直到删除。

如果行被删除，则不会有记录。

# eclipse - 为什么在eclipse中导入项目时出错？

> ID：13007966
> 
> 赞同：-1
> 
> 时间：2012-10-22T09:01:07.333
> 
> 标签：eclipse

在 eclips 中导入项目时遇到问题。实际上从同一台计算机导入项目没有问题，但是如果我从另一台计算机获取项目并将其导入系统的 eclipse 中，它确实会显示很多错误。任何人都可以告诉我如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:22:59.557

请注意您的项目是否像其他相关项目一样具有一些链接资源。正如您在 .project 文件中看到的那样，该资源的路径是绝对的。此外，您是否使用正确的导入程序将项目导入工作区？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:10:25.410

它可能与您计算机上的某些文件路径与您从中复制的文件路径不同有关。但是如果没有关于你得到的错误的更多细节，真的很难说。

您可以在文本编辑器中打开 .project 文件，看看其中是否有任何可疑之处。

# php - 在 nginx 后台运行 php 脚本

> ID：13007967
> 
> 赞同：0
> 
> 时间：2012-10-22T09:01:08.443
> 
> 标签：php, background, automation

我正在尝试为一家商店 cms 开发一个支付模块。付款是基于在银行获得的。

因此，首先为每个订单在银行侧创建（使用 curl）一张“票”。在银行服务器上的付款页面上，该客户端以其票证 ID 被转发。如果客户付款并按下“返回商店”按钮，一切都很好。
但是，如果客户付款并且不按此按钮，我需要检查结果（他是否付款）。它也是由 curl 制作的。我正在通过票证 ID 请求信息并接收一个包含我需要的参数的数组，其中我需要检查结果代码。

所以我需要自动检查它（例如，一个小时内每 5 分钟 1 次）。Cron 帮不了我，因为它都是动态进程。

我创建了一个返回结果的函数。但是我怎样才能以任何间隔在后台启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:14:20.703

使用 cron。PHP 不提供调度程序之类的功能，因为它超出了该语言的范围。您可以使用 DB 来存储整个过程所需的一些参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:13:31.247

我将扩展一点 WebnetMobile 关于使用 cron 来满足您的需求的答案。

很可能您的数据库中有一张表，您可以在其中存储从银行获得的票证，以及无论何时成功或失败，以及票证的创建日期。

然后，如果您想要从银行票据创建日期起每五分钟检查一次，无论它是否成功（如果未知），您应该**每分钟**运行一个 cron来执行以下操作：

1.  检查是否存在未定义状态（成功或失败）的银行票据。
2.  检查是否创建的时间（不带秒）减去当前时间（不带秒）MOD 5 == 0。
3.  如果为真，则表示从创建工单开始又过了 5 分钟，应该检查，否则什么也不做。

我认为这会做你想要的

# javascript - 如何在 Javascript 循环中动态设置 id？

> ID：13007968
> 
> 赞同：0
> 
> 时间：2012-10-22T09:01:09.883
> 
> 标签：javascript, flot

我有一个问题列表，每个问题都有一个答案列表（可以是 1-5 的任何整数）。我想为每个问题动态创建一个图表，使用与特定“排名”匹配的所有答案的计数；即所有答案都是“1”、“2”、“3”等。

所以我所做的是设置一个 for 循环，为每个问题创建一个元素；此元素用作图表的占位符。（顺便说一句，我正在使用浮动图表）。

我遇到的问题是尝试动态命名占位符；我真正想要的是创建一些最终看起来像这样的东西：

```
<div id='chart1'/>
<div id='chart2'/> 
```

ETC

我管理的最接近的是：

```
<div id="'chart'@currentQuestion"/> 
```

这当然给出了这样的 id：'chart'1

后来，当我尝试将图表附加到我创建的 div 时，以下内容不起作用：

```
$("#'chart'"+i).append(div); //where i is the current loop counter 
```

如果我使用

```
 $("#chart"+i).append(div); 
```

它正确地找到了元素“chart1”、“chart2”等；但我正在努力命名要匹配的 div。

任何人都可以帮忙吗？除非您知道如何解决它，否则这似乎微不足道:-)

编辑：根据要求，这是相关的 HMTL：

```
<div id="'chart@currentQuestion'">CHART</div> 
```

解决了：

像这样： id="chart@(currentQuestion)" （通过同事）感谢您的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:41:49.787

您正在使用剃刀语法，所以这里应该是这样。

```
// Define your counter
@{long i = 0;}

// On document ready dynamically add your items
$("document").ready(function(){
    // Create red divs starting by zero
    // after 5 divs stop creating red divs
    @for (i = 0;i<5;i++){
        @:$("#form").append('<div id="chart' + @(i) + '">Red</div>');
    }
});

// I made a button for action, you can choose other ways to invoke this function
$("#form>input").click(function(){
    // Your counter is at 4 now
    // lets change it to 2 
    @(i = 2;) // Now your counter is at 2 
    // Put a blue div into 2nd div starting by 0
    $("#chart"+@(i)).append('<div class="blue">blue</div>');
}); 
```

这就是您在脚本中使用剃刀语法的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:15:10.427

你没有正确关闭你的 div 。试试这个代码

```
<div id='chart1' style="border:dashed">
</div>
<br />

<div id='chart2' style="border:dotted">
</div>

<script type="text/javascript" src="jquery_library.js">
</script>
<script type="text/javascript">
 function fnc(value){

$("#chart"+value).append('1');
}
</script>
<input type="button" onclick="fnc(1)" value="for div1"/>
<input type="button" onclick="fnc(2)"value="for div2" /> 
```

# linux - 多核多处理器中的 cpu 负载

> ID：13007972
> 
> 赞同：0
> 
> 时间：2012-10-22T09:01:23.683
> 
> 标签：linux, operating-system, cpu

我正在寻找了解多核多处理器系统和 cpu 负载之间的关系？正如我之前搜索的“在多处理器系统上，负载与可用处理器的数量有关”。我有一个有 4 个处理器的服务器，每个处理器都是四核的，我想知道这个系统的流量阈值。是不是16？？操作系统是红帽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:12:30.080

大致 - 是的，但总的来说 - 有点小。问题是每个处理器都有自己的内存控制器，并附有内存。虽然每个处理器的内存都可以从其他处理器访问，但此访问速度低于直接连接到处理器内存控制器的内存。这同样适用于 PCI 设备 - 它们与一个处理器“足够接近”，并且需要更多时间从其他处理器访问该设备。

因此，例如，当您在应用程序中设置某些线程的亲和性时，您应该清楚地了解您不会将此线程推送到其他处理器，因为这种锁定实际上可能会降低您的进程的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:06:53.497

我们在谈论什么样的流量？网络流量？如果是这样，您的服务容量将根据它所托管的服务的配置文件而有所不同。要找到真正的容量，您需要执行负载测试。有很多工具可以帮助您解决这个问题。

此外，4 个四核处理器等于 16 个内核（或 CPU）。

# android - Facebook 移动应用程序不断连接到 googleplay

> ID：13007986
> 
> 赞同：2
> 
> 时间：2012-10-22T09:02:01.047
> 
> 标签：android

我做了一个 php facebook 应用程序。该应用程序在桌面 facebook 上看起来不错。但是当我想从我的 android 手机上查看它时，它不会看到我的 facebook 应用程序/网站，而是将我重定向到 google play，我没有任何应用程序.. 我该如何解决这个问题？

# android - 在 Android 中通过共享库显示所有导出函数的代码

> ID：13007992
> 
> 赞同：2
> 
> 时间：2012-10-22T09:02:26.023
> 
> 标签：android, android-ndk

我想编写一个能够**通过共享库 (.so) 显示导出函数列表的****Android 应用程序**。

 **`nm/objdump/readelf`该工具仅适用于 Windows/Linux。所以我考虑过编译**[platfor_external_elfutils](https://github.com/android/platform_external_elfutils)**来获得一个带有`nm`或`objdump`工具的工具链。

`toolchain`但是，考虑到可能导致的大依赖性（可能高达 xx MB），这不是一个好的解决方案。

我想问是否有任何可用的简单代码来实现该目的，而无需`toolchain`在我的应用程序中编译和附加整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T16:41:27.547

这对于原始海报来说可能为时已晚，但 libelf 可以从 Android 源代码构建为静态库 (libelf.a)，至少从 JB4.2 开始。只需使用

```
make libelf 
```

在主目录中构建它。

如果有人知道如何将其构建为动态库/共享对象，那将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:46:24.383

您可以使用 libelf 库（来自[elftoolchain](http://sourceforge.net/apps/trac/elftoolchain/) - 它是 BSD 许可的）来解析二进制文件。libelf 带有[elfdump](http://sourceforge.net/apps/trac/elftoolchain/browser/trunk/elfdump)实用程序的源代码，该实用程序转储有关 ELF 文件的各种信息，包括导出列表。只需去掉不需要的来源，就可以了。可执行文件不会超过 100KB。**

# javascript - javascript中的树数据结构库

> ID：13007997
> 
> 赞同：0
> 
> 时间：2012-10-22T09:02:46.320
> 
> 标签：javascript, data-structures

任何人都可以在 java-script 库（不是二叉树）中说出 Tree 数据结构，

我需要数据结构来保存数据，而不是提供 UI 实现

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:33:40.727

作为解决方案，我们已经开始了我们自己的项目[http://code.google.com/p/orgjs/](http://code.google.com/p/orgjs/)，其中包含逻辑和绘图