# StackOverflow 问答 15795000-15795999

# jquery - 固定标题，相对内容问题

> ID：15795001
> 
> 赞同：0
> 
> 时间：2013-04-03T18:21:10.840
> 
> 标签：jquery, html, css

我有一个标题，用`position: fixed;`- 设置，这样当我滚动时，标题会随着页面滚动。（类似于 Facebook 和 Twitter）。

我已将以下 CSS3 效果应用于我的内容/图像：-

[http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/](http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/)

但是，由于此效果使用`position: relative;`，所以我的固定标题滚动到我的内容/图像下方 - 当我显然需要它在顶部滚动时。

知道我该如何解决这个问题吗？

我已经设置了我的代码的 JSBin：http: [//jsbin.com/eyoric/2/edit](http://jsbin.com/eyoric/2/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:06:18.537

尝试将 z-index 添加到您的标题并将其放在页面顶部。查看此页面以帮助您了解如何使用 z-index。[http://en.wikipedia.org/wiki/Z-index](http://en.wikipedia.org/wiki/Z-index)

添加修订将您的 css 更改为 position: absolute; 让你的 top:0px;

# assembly - 如何在 x86 汇编中将 CH 添加到 EAX？

> ID：15795003
> 
> 赞同：4
> 
> 时间：2013-04-03T18:21:22.610
> 
> 标签：assembly, x86, cpu-registers

我需要在 x86 程序集中添加 to 的内容`CH`，`EAX`但似乎没有地址模式支持这一点。理想情况下，我想要一个寻址模式，如：

```
ADD EAX,r8 
```

或者

```
ADD r32,r8 
```

或者

```
ADD r/m32,r8 
```

但`ADD`没有任何这些模式。我无法屏蔽`ECX`，因为它里面有我在其他地方使用的其他垃圾，而且我已经用完了所有其他寄存器，所以我唯一的选择似乎是使用内存访问。有什么想法可以解决这个问题吗？

注意我不能使用这样的模式，`r/m8,r8`因为那样就没有进位了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:31:40.627

正如您所观察到的，x86 只是没有如此灵活的寻址模式。您不能在一个步骤中将 8 位寄存器添加到 32 位寄存器。您的选择是释放寄存器和零/符号扩展然后添加 r32,r32，或者添加 r8,r8 然后在进位标志上分支以调整结果。

我建议您应该将寄存器溢出到内存中，在现代处理器上，一对内存访问比分支便宜得多（因为它将从存储缓冲区加载），并且您可以围绕溢出改写其他代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:24:13.907

使用 r/m8,r8 之类的模式，并在必要时通过向 EAX 添加常量 0x100 来传播进位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T18:50:12.417

如果你溢出一个寄存器，你可以避免分支。例如，

```
subl $4, %esp 
```

使用指令序列：

```
movl %eax, (%esp)
...
movzbl %ch, %eax
...
addl (%esp), %eax 
```

并在最后恢复堆栈指针：

```
addl $4, %esp 
```

如果这是一个问题，它可能会对调试此块中的代码的任何尝试造成严重破坏。

* * *

或者，按照 Doug Currie 的建议：

```
addb %ch, %al
jnc  done
addl 0x100, %eax
done: 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T21:06:44.563

改写道格的答案（在英特尔语法中）：

```
 add al, ch
  jnc no_carry
  add eax, 100h
no_carry: 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-18T11:33:58.250

这很简单，对于 eax：

```
add al,ch
adc ah,0
rorx eax,16
adc ax,0
rorx eax,16 
```

在第一条指令中，您添加较低部分并保留进位标志，在第二条指令中，您将进位标志添加到寄存器的较高部分。它还保留了源的内容。但请注意寄存器停顿，并将代码与其他指令混合以避免它。
添加：

```
add al,ch
adc ah,0
bswap eax
xchg al,ah
adc ax
xchg al,ah
bswap eax 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T20:25:31.040

您还可以添加 32 位值并撤消添加 24 msb:s：

```
 add eax, ecx
 xor cl,cl           // also `and ecx, 0xffffff00` is possible
 sub eax, ecx 
```

这自然会破坏要添加的值，但会保留垃圾。（并重新阅读问题，实际上需要用 包围代码块`xchg cl,ch`，这使得解决方案对任务来说不是最佳的。）

# jquery - 删除背景 div 上的水平滚动条

> ID：15795004
> 
> 赞同：0
> 
> 时间：2013-04-03T18:21:25.463
> 
> 标签：jquery, scroll, horizontal-scrolling, supersized

我正在使用 Supersized jquery 插件来创建背景图像和文本的幻灯片放映。我的问题是我需要我的图像有一组 1200 像素。创建我想要的外观没有问题，但是，我不知道如何删除水平滚动条。

这是我正在开发的网站：http: [//atriaseniorliving.com/roslyntest/](http://atriaseniorliving.com/roslyntest/)

这是CSS：

```
#supersized {  
  display:block; 
  position:absolute; 
  left:50%; 
  top:38px; 
  margin-left:-600px; 
  overflow-x:hidden; 
  z-index:-999; 
  height:472px; 
  width:1200px; 
}

#supersized li {
  display: block;
  height: 472px;
  left: 0;
  list-style: none outside none;
  overflow: hidden;
  position: absolute;
  top: 0;
  width: 100%;
  z-index: -30;
} 
```

我想出如何删除滚动条的唯一方法是使宽度：100％，然后添加一个最大宽度：1200px。但是，当我这样做时，背景图像会在您减小浏览器宽度时向左滑动。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:46:17.483

好的，我相信我找到了解决方案。我需要在#supersized ul 周围添加一个容器 div 并将其设置为溢出：隐藏。

# oracle - 如何在服务器负载很小的情况下从 Oracle 下载表

> ID：15795009
> 
> 赞同：0
> 
> 时间：2013-04-03T18:21:41.763
> 
> 标签：oracle, oracle11g

我有一个负载非常高的 Oracle 服务器。我想选择具有数百万行数据的大表并使用 SQL Developer 下载数据。如何在对生产数据库的性能影响很小的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:45:40.270

使用 oracle 的导出工具从表中最有效地转储数据。例子

```
exp user/password tables=mytable query="optional where clause here" 
```

请注意，您必须安装 oracle 客户端才能使用它。

# php - php gd 图像类型

> ID：15795010
> 
> 赞同：1
> 
> 时间：2013-04-03T18:21:46.903
> 
> 标签：php, image-processing, gd

我目前正在自学 PHP 的 GD 库，并且我有一个关于图像类型的问题。某些 GD 功能是否仅适用于某些图像类型，例如 jpegs？我对图像类型不是很了解。我想了解他们的差异，如果我应该对我正在使用的功能更加小心，还是我只是想太多了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:23:33.627

在内存中，图像只是普通的位图数据。唯一涉及图像类型的情况是从文件加载图像（它必须知道什么类型才能将其解码为内存位图）以及将文件写入磁盘时（同样的事情，相反） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:00:00.910

只有 the`imagecreatefrom...()`和相反的“save”函数是特定于格式的。加载后，它们将采用 gd 特定的内部格式。

话虽如此，某些 GD 函数在某些情况下没有意义。例如，JPEG 图像不支持透明度，因此在将保存为 .jpg 的图像上指定 alpha 通道并不是很有用。但在 GD 内部，涉及 alpha 的操作仍将正常运行。

# php - 搜索通过许多城市的路线

> ID：15795013
> 
> 赞同：0
> 
> 时间：2013-04-03T18:21:55.990
> 
> 标签：php, mysql, sql

```
CREATE TABLE IF NOT EXISTS `ride` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `from` text CHARACTER SET utf8 COLLATE utf8_polish_ci NOT NULL,
  `to` text CHARACTER SET utf8 COLLATE utf8_polish_ci NOT NULL,
  PRIMARY KEY (`id`)
) 

CREATE TABLE IF NOT EXISTS `route_through` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_ride` int(11) NOT NULL,
  `city` text COLLATE utf8_polish_ci NOT NULL,
  PRIMARY KEY (`id`)
) 
```

我需要搜索`ride`：

```
SELECT * FROM ride WHERE from=$from and to=$to 
```

如果我有城市，如何搜索`route_through`？

例如：

**`ride`桌子：**

`id`= 1

`from`= 巴黎

`to`= 伦敦

**`route_through`桌子：**

`id`= 1

`id_ride`= 1

`city`='马德里'

**在表格中搜索：**

现在我设置了这座城市：`from`- 马德里`to`伦敦。这应该返回`ride`= `id`1

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:24:36.493

使用 JOIN

```
SELECT * 
FROM ride r inner join route_through rt on r.id = rt.id
WHERE from=$from and to=$to 
```

# php - 带有空白管理区域的 Wordpress 迁移

> ID：15795018
> 
> 赞同：1
> 
> 时间：2013-04-03T18:22:07.743
> 
> 标签：php, wordpress

我已将 wordpress 安装从服务器迁移到另一台服务器，但无法访问管理区域。

我已将 DEBUG 设置为 True，但在使用警告登录后我只得到一个空白页面。

新网址是[http://mr.izigo.net/](http://mr.izigo.net/)

用户：管理员 密码：管理员

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:40:09.357

我在这里[http://www.farinspace.com/wordpress-migration/](http://www.farinspace.com/wordpress-migration/)找到了问题的解决方案，显然是在迁移之后，并且当安装有插件时，我们需要删除相关选项。

我已经完成了 URL 替换，但没有完成插件 DELETE FROM `wp_options`WHERE `option_name`= 'active_plugins' 命令。

之后，我不得不重新激活插件，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:47:08.097

您是否收到错误消息？这些是什么？

新的 wp-config.php 文件中的登录名和密码是否与旧的一致？

# neo4j - 无法让 Neo4j 运行

> ID：15795020
> 
> 赞同：2
> 
> 时间：2013-04-03T18:22:10.943
> 
> 标签：neo4j

我搜索了这个问题的答案，但找不到其他有同样问题的人。

*   这是我第一次尝试使用 Neo4j。
*   我在 Windows Server 2008 R2 Standard 上运行。
*   我下载并解压了适用于 Windows 的 Neo4j Community 1.8.2。
*   在命令窗口中，我切换到 bin 文件夹并运行 Neo4j.bat。
*   我在命令窗口中收到以下消息：**无法找到 jvm。在 Windows 注册表中找不到 HKLM\SOFTWARE\JavaSoft\Java Runtime Environment/CurrentVersion 条目。**
*   我确认我拥有最新的 JVM。
*   我确认上述注册表项*不在*显示的位置，但我确实在 HKLM\Wow6432Node\JavaSoft\Java Runtime Environment/CurrentVersion 找到了它。

我应该如何进行？

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T10:13:18.657

我通过创建一个新的环境变量 JAVA_HOME 并将其指向我的 Java 安装文件夹来解决此问题

C:\Program 文件 (x86)\Java\jre7\bin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:42:32.010

尝试将 java PATH 变量设置为正确的路径。教程在这里：http: [//java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

比，我认为最新的 java 比 neo4j 1.8.2 的原始 java 更新了 2 个版本。提醒自己几个月前这种版本控制的一些问题 - 我通过在 1.9.0x 的最新版本中运行 neo4j 解决了它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:21:51.043

我在我的机器上安装了 JRE 版本 6，这解决了问题。（我以前在机器上安装了第 7 版。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T00:16:34.940

在环境变量中设置 JAVA_HOME 路径。

# java - 通用 Guice 性能指南

> ID：15795022
> 
> 赞同：7
> 
> 时间：2013-04-03T18:22:18.030
> 
> 标签：java, performance, guice

我目前有一个命令行工具，它大量使用 Guice 及其扩展。

完成该工具的功能后，我确定性能不达标，并开始使用简单的 hprof 进行分析。

这已经指出，仅仅创建 Injector 就是一个重大的性能问题。我通常避免在模块中做任何实际工作，并为提供者保留计算密集型工作......

鉴于此，Guice 的一些一般性能指南是什么？我应该避免使用@AssistedInject 和 FactoryModuleBuilders 吗？如果可能，避免使用@Singletons？确保所有绑定都是显式的并避免 JIT 绑定？

我已经到处搜索了，但除了人们说它非常快之外，真的找不到太多解决基本 Guice 性能的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-25T06:57:36.557

首先，您的问题还有很多不足之处。什么是“不合标准”的表现，你是如何决定这意味着什么的？是任意的吗？您是否有用户认为它太慢了？用户交互是否需要很长时间才能开始或太长时间才能产生结果？

如果没有要评估的实际代码，就很难调试性能问题。以下是我的一些经验提示：

1.  只创建一次注入器。我看到一个项目，他们为每个 REST 请求创建一个注入器，但它的性能很糟糕。当他们停止这样做时，他们的 API 速度提高了 15 倍。如果您需要通过代码创建多个注入器，我强烈建议您进行重构，这样您就不需要了。

2.  单例可以很好地提高性能，只是不要滥用它。它们只创建一次，这可能会在您创建注入器（急切的单例）或对象图中的其他东西第一次请求它们时发生。

3.  了解 Guice 是一个基于反射的库，并且反射总是很慢。Guice 在运行时非常快，但在创建注入器时会以大量反射为代价（参见第 1 条）。如果您在应用程序中看到明显的滞后，这可能意味着您做错了什么。

最后，如果您决定无法处理 Guice 的性能“问题”，您可以尝试其他替代方案，例如来自[Square](http://square.github.io/dagger/)（第 1 版）和[Google](http://google.github.io/dagger/)（第 2 版）的 Dagger。它使用代码生成而不是反射，因此您没有反射成本，但它的功能并不完整，也没有扩展。

# windows - 适用于 Windows 的工具，可以监视源代码更改的目录，然后重新部署服务器？

> ID：15795023
> 
> 赞同：0
> 
> 时间：2013-04-03T18:22:18.913
> 
> 标签：windows, node.js, gruntjs

现在我不得不将我的代码保存在本地机器上，退出 node.js 服务器，然后重新启动它以查看更改。如果我可以让它重新启动，那就太好了，这样每当我在我最喜欢的编辑器上单击保存时，它就会自动启动重新启动序列并在我的网络浏览器上加载页面。咕噜能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:27:03.913

你真的不想那样工作。而是设置一个版本控制系统（SVN、git 或任何适合您的系统）然后设置它，以便仅在您实际提交代码后部署代码。您不想在每次保存文件时都重新启动服务器，因为这会大大减慢您的速度（并且还会导致将大量错误代码推送到服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:02:51.753

您可以使用“up”工具，它会监视目录中的更改并在找到更改时重新启动。

在命令行运行：

```
npm install -g up 
```

然后您可以使用它来启动您的节点应用程序：

```
up -w -t 500ms -n 1 -p 3000 server.js 
```

其中`server.js`文件是导出您的 http 服务器的文件

请参阅以下链接中的“设置”部分以导出您的服务器：

[https://github.com/LearnBoost/up/](https://github.com/LearnBoost/up/)

# gwt - GWT 窗口 onBlur

> ID：15795025
> 
> 赞同：1
> 
> 时间：2013-04-03T18:22:22.850
> 
> 标签：gwt, onblur, onfocus

GWT 应用程序如何确定浏览器窗口或选项卡是否失去焦点，即处于非活动状态？我需要这个来将基于画布的应用程序切换到暂停状态，但前提是整个浏览器都处于非活动状态。如何才能做到这一点？欢迎任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:31:27.583

Window onblur 没有这种现成的实现。你必须自己写

```
private native static void initialize() /*-{
$wnd.onblur = new function( e ) {
@packagepath.WindowEventManager::getInstance()().notifyOnBlur( e );
} 
```

[有关完整实施](https://groups.google.com/forum/#!topic/google-web-toolkit/HJxYq-dA1k0)，请参阅此内容。

# c# - 在 asp.net webforms 上创建单个异步 webmethod 以进行长轮询

> ID：15795027
> 
> 赞同：9
> 
> 时间：2013-04-03T18:22:33.767
> 
> 标签：c#, asp.net, webforms

我正在做一个我想实现的小项目`long polling`。我不想为此使用 SignalR 或任何其他第三方库。我有一个`ASP.NET WebForm`我实现了一个简单的 web 方法，通过 asp.net 页面公开（用 [WebMethod] 属性装饰）。

这是一个非常简单的项目，只需要以异步方式使用这个单一方法，因此它不使用请求池中的线程。我对完成此任务的第三方库、MVC 异步控制器、整个异步 Web 表单页面等不感兴趣......我只是在寻找一个简单的实现来让它在通过 AJAX 请求的单个方法上工作来自客户端的请求。

到目前为止，我不确定如何处理它，因为我发现的大多数资源都为整个项目实现了异步，这**不是**我想要的。

有人对我如何完成这件小事有任何想法或资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T14:16:15.020

有一个 MSDN 示例，它使用 ManualResetEvent 类、一个脚本管理器控件和一个 Web 服务来实现长轮询（他们在示例中将其称为反向 ajax）。

[http://code.msdn.microsoft.com/CSASPNETReverseAJAX-7a1f0c2b](http://code.msdn.microsoft.com/CSASPNETReverseAJAX-7a1f0c2b)

# excel - 在 AutoFilter 上运行宏并在新工作表中显示数据

> ID：15795028
> 
> 赞同：1
> 
> 时间：2013-04-03T18:22:35.843
> 
> 标签：excel, autofilter, vba

实际上我想做的是，我有以下自动过滤数据，

![在此处输入图像描述](https://i.stack.imgur.com/N7nsR.jpg)

-> 我想为从过滤中选择的每个唯一名称创建新工作表。即如果选择了 John 和 Alex，则应为 John 创建 2 个新工作表，为 Alex 创建第二个工作表，每个工作表都显示自己的数据（Name + No + R)。下次如果主表得到更新，那么当我运行宏时应该附加新闻数据。我正在使用以下代码，但它不能 100% 工作。

```
Sub mycar()
   x = 2
   Do While Cells(x, 1) <> ""
   If Cells(x, 1) = "John" Then
   Worksheets("Sheet1").Rows(x).Copy
   Worksheets("Sheet2").Activate
   eRow = Worksheets("Sheet2").Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).Row
   ActiveSheet.Paste Destination:=Worksheets("Sheet2").Rows(eRow)
   End If
   Worksheets("Sheet1").Activate
   x = x + 1
   Loop
End Sub 
```

-> 这里它只复制写在引号中的单个数据。

-> 如果我第二次运行此代码，它将再次使用新数据附加相同的数据。

帮助我避免这个错误。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:42:00.633

正如所讨论的，还有其他可能在过程中在 Array 中设置过滤器参数。代码看起来像这样：

```
Sub Solution()

Dim shData As Worksheet
    Set shData = Sheets("Arkusz1")    'or other reference to data sheet
Dim shNew As Worksheet
    shData.Activate
'get unique values based on Excel features
Range("a1").AutoFilter

Dim myArr As Variant
    myArr = Array("John", "max")

Range("a1").AutoFilter

Dim i As Long
For i = 0 To UBound(myArr)
    shData.Range("$A$1").AutoFilter Field:=1, Criteria1:=myArr(i), _
        Operator:=xlAnd
On Error Resume Next
    Sheets(myArr(i)).Range("A1").CurrentRegion.ClearContents

If Err.Number = 0 Then
    Range("A1").CurrentRegion.Copy Sheets(myArr(i)).Range("A1")
Else
    Set shNew = Sheets.Add(After:=Sheets(Sheets.Count))
    shData.Range("A1").CurrentRegion.Copy shNew.Range("A1")
    shNew.Name = myArr(i)
    Err.Clear
End If

Next i
'removing filter in master sheet
shData.Range("a1").AutoFilter

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:30:28.067

替换`Worksheets("Sheet1").Rows(x).Copy`为`Worksheets("Sheet1").Rows(x).EntireRow.Copy`

并在添加信息之前清除目标工作表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:08:11.747

我经常做类似的练习。因此，我提供了完整的可能解决方案，并在代码中添加了一些注释。它适用于 A 列中的所有唯一值，并创建（如果不存在）具有适当名称的工作表等于过滤器参数。

```
Sub Solution()
Dim shData As Worksheet
    Set shData = Sheets("Arkusz1")    'or other reference to data sheet
Dim shNew As Worksheet

'get unique values based on Excel features
'i guess some will not like it but I do :)
Range("a1").AutoFilter
Range("A1").CurrentRegion.Columns(1).Copy Range("ww1")
Range("ww1").CurrentRegion.RemoveDuplicates Columns:=1, Header:=xlYes
'be sure that range where you copy (like ww1) is empty range around 

Dim myArr As Variant
    myArr = Range(Range("ww2"), Range("ww2").End(xlDown))
Range("ww1").CurrentRegion.ClearContents     'some cleaning
Range("a1").AutoFilter '

Dim i As Long
For i = 1 To UBound(myArr, 1)
    ActiveSheet.Range("$A$1").AutoFilter Field:=1, Criteria1:=myArr(i, 1), _
        Operator:=xlAnd
On Error Resume Next
    'this is for two reason- to check if appropriate sheet exists, if so to clean top area
    'if you need to append you would comment this line
    Sheets(myArr(i, 1)).Range("A1").CurrentRegion.ClearContents

If Err.Number = 0 Then
    'if you need to append only you would need to set range-to-copy a bit different
    Range("A1").CurrentRegion.Copy Sheets(myArr(i, 1)).Range("A1")
Else
    Set shNew = Sheets.Add(After:=Sheets(Sheets.Count))
    shData.Range("A1").CurrentRegion.Copy shNew.Range("A1")
    shNew.Name = myArr(i, 1)
    Err.Clear
End If

Next i

End Sub 
```

这不能完全满足您的要求，但可能是相应改进的完整解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T04:37:45.370

## 标题##Below 代码是根据您的要求。根据您的要求对其进行修改。

* * *

```
Private Sub Worksheet_Calculate()
  Dim x As Integer
  Dim rnge As Integer
  x = Range(Selection, Selection.End(xlDown)).Count
  rnge = ActiveSheet.UsedRange.SpecialCells(xlCellTypeVisible).Rows.Count

  If Range("E1").Value > rnge Then
   Range("A1").Select
   Range(Selection, Selection.End(xlToRight)).Select
   Range(Selection, Selection.End(xlDown)).Select
   Selection.Copy
   Sheets(2).Select
   ActiveSheet.Paste
  End If
End Sub 
```

# jquery - 检查一个输入时如何隐藏其他输入？

> ID：15795030
> 
> 赞同：0
> 
> 时间：2013-04-03T18:22:39.940
> 
> 标签：jquery

**HTML**

```
<div>
    Group 1<br>
    <input type="checkbox" name="testing" value="B">A<br>
    <input type="checkbox" name="testing" value="I">B<br>
    <input type="checkbox" name="testing" value="A">C<br>
</div>
<div>
    Group 2<br>
    <input type="checkbox" name="testing2" value="B">A<br>
    <input type="checkbox" name="testing2" value="I">B<br>
    <input type="checkbox" name="testing2" value="A">C<br>
</div> 
```

**JS**

```
$("input:checkbox").change(function() {
    if (this.checked) {
        var checkname = $(this).attr("name");
        $("input:checkbox[name='" + checkname + "']").removeAttr("checked");
        this.checked = true;
    }
}); 
```

该脚本使复选框的作用类似于收音机，因此只能检查 1 的同名属性。现在我希望它隐藏那些未选中具有相同名称属性的人。如果我取消选中已选中的复选框，所有其他复选框都会返回。

你说的小提琴？：http: [//jsfiddle.net/warface/gcX7Y/](http://jsfiddle.net/warface/gcX7Y/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:30:00.547

试试这个：http: [//jsfiddle.net/P2d4R/3/](http://jsfiddle.net/P2d4R/3/)

我还编辑了您的 HTML 以将复选框包装在`label`标签中，这使得隐藏起来更简单。

```
<div>Group 1
    <br>
    <label>
        <input type="checkbox" name="testing" value="B">A</label>
    <br />
    <label>
        <input type="checkbox" name="testing" value="I">B</label>
    <br />
    <label>
        <input type="checkbox" name="testing" value="A">C</label>
    <br />
</div>

$("input:checkbox").change(function () {
    var checkname = $(this).attr("name");
    if (this.checked) {
        $("input:checkbox[name='" + checkname + "']").not(this)
            .removeAttr("checked")
            .parent()
            .hide();
    } else {
        $("input:checkbox[name='" + checkname + "']").parent().show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:26:43.860

您可以将功能更改为：

```
$("input:checkbox").change(function() {
    if (this.checked) {
        var checkname = $(this).attr("name");
        $("input:checkbox[name='" + checkname + "']").removeAttr("checked");
        this.checked = true;
        $(this).siblings(':checkbox').hide();
    } else {
        $(this).siblings(':checkbox').show();   
    }
}); 
```

[**演示**](http://jsfiddle.net/uqZKu/4/)

这将留下`br`元素，但是这也会留下字母，如果您也想隐藏它们，最好将它们包装在`span`or`label`元素或类似的东西中，并且该功能需要稍作更改，如果你对显示的字母没问题，这应该没问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:29:25.960

```
$("input:checkbox").change(function() {
    var checkname = $(this).attr("name");
    if (this.checked) {
        $("input:checkbox[name='" + checkname + "']").not(this).hide().removeAttr("checked");
    } else {
        $("input:checkbox[name='" + checkname + "']").show();
    }
}); 
```

# watir - 使用 watir-webdriver 与 Chrome 扩展交互

> ID：15795035
> 
> 赞同：2
> 
> 时间：2013-04-03T18:23:16.120
> 
> 标签：watir, watir-webdriver, selenium-chromedriver

我可以在浏览器中启动带有扩展名的 Chrome 浏览器。但我无法与扩展进行交互。

当我手动启动 Chrome 浏览器时，我转到 chrome://extensions 并为该扩展配置命令，并设置诸如“Alt+H”之类的快捷方式以从快捷方式启动扩展，并在按下 Alt+H 后调用扩展。

但是当我使用 watir webdriver 启动带有扩展名的 chrome 浏览器时，没有设置该扩展名的配置命令设置。在我再次手动将其设置为“Alt+H”并尝试在使用 watir-webdriver 启动的浏览器上调用扩展后，我没有看到扩展被调用。

请让我知道如何使用 watir-webdriver 与 chrome 扩展进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:40:52.717

我不认为 watir 可以与扩展交互。它只能与页面交互。但是，我可能是错的。当我需要做类似的事情时，我在[Sikuli](http://www.sikuli.org/)上取得了一定的成功。

# python - django-firebird 1.5.0.rc.2 驱动程序是否适用于 Python 3.3？

> ID：15795036
> 
> 赞同：1
> 
> 时间：2013-04-03T18:23:20.043
> 
> 标签：python, django, firebird

我正在尝试将 Firebird 与 django 一起使用，但是当我使用 .

```
pip install django-firebird 
```

我收到以下错误

```
 File "C:\Python33\Lib\site-packages\firebird\base.py", line 9
  except ImportError, e:
                    ^ 
```

SyntaxError：无效的语法

```
File "C:\Python33\Lib\site-packages\firebird\creation.py", line 76
  print "_rollback_works"
                        ^ 
```

SyntaxError：无效的语法

base.py 中的示例代码如下：-

```
 except Database.IntegrityError, e:
        raise utils.IntegrityError, utils.IntegrityError(*self.error_info(e, query, param_list[0])), sys.exc_info()[2] 
```

我正在运行 Windows、Python 3.3 和 Django 1.5。

这是 Python 3 的语法变化吗？

该软件包说它适用于 python 2.6+

问候

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:39:03.160

在 Python 2 中：

```
 except ImportError, e:

 print "_rollback_works" 
```

在 Python 3 中：

```
 //Exception handling syntax changes slightly, "as"
 except ImportError as err:

 //print is now a function print()
 print ("_rollback_works") 
```

这就是为什么你会得到那个错误。

# css - WooCommerce：结帐页面 - order_review div 与 customer_details div 重叠

> ID：15795037
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:23:22.410
> 
> 标签：css, wordpress, woocommerce

WooCommerce：结帐页面

order_review div 与 customer_details div 重叠，因此您无法填写账单信息。我试过玩 z-index 但这似乎不起作用。

这是产品页面的链接：http: [//lifestylesconvention.com/shop/adult-couples-registration/](http://lifestylesconvention.com/shop/adult-couples-registration/)

请填写表格，然后继续到结帐页面。在那里你会明白我的意思。order_review 的 div 与该特定页面上 customer_details 的 div 重叠，因此您无法填写顶部的信息。

我正在拔头发试图弄清楚这一点，大声笑。我确信答案正盯着我的脸，但我只是看不到它。任何想法将不胜感激！:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:18:40.133

您可以模仿第二个 WooCommerce 列（也许从您的结帐模板中删除该 div，因为您不使用它作为送货地址？）。`float: right`清除帐单列。顺便说一句，它在 Chrome 和 Firefox 中看起来不同，因为在 Chrome 中它将是 100% 宽并浮动在计费字段下，而在 Firefox 中它位于该列的右侧（我假设这是你想要的）。

```
#order_review table.shop_table {
  width: 48%;
  float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:00:21.383

我已经设法在 Firefox 中重现了这个问题。

我还没有找到解决方案。但我相信问题出在 jQuery/javascript 上。关闭页面上的javascript，问题就消失了。您在结帐页面上加载了大约 20 个脚本，恐怕我无法隔离负责人。

不知道你的技能水平是什么，但我会尝试一些事情：1.重命名 mecurial js 目录（暂时）。大约一半的脚本来自这个目录。如果重命名它，浏览器将无法加载它们，那么您可以隔离它们是否导致错误。2\. 问题似乎出现在 AJAX 请求 /checkout/pay/ 期间。我猜 woocommerce 在 AJAX 处理一些数据时禁用了表单，但由于某种原因无法重新启用访问。可能是因为找不到 /checkout/pay/ （您​​是否出于某种原因删除了此页面？）

希望这会有所帮助......对不起，我不能给出一个明确的解决方案 - 我必须自己的工作。

祝你好运。

# python - 如何获取文件的头修订号，或签入/更改时的更改列表号

> ID：15795038
> 
> 赞同：0
> 
> 时间：2013-04-03T18:23:23.957
> 
> 标签：python, python-2.7, perforce

我正在编写一个每天连接到 perforce 的 python 应用程序。该应用程序在 perfoce 上获取 excel 文件的内容，对其进行解析，并将一些数据复制到数据库中。该文件相当大，所以我想跟踪应用程序上次在数据库上读取的文件的哪个版本，这样我可以检查版本号是否更高，如果文件没有更改，则避免读取文件.

我可以在最后一次签入/更改文件时获取修订号或更改列表号。或者，如果您对如何实现我避免不必要地读取文件的目标有任何其他建议。

我正在使用 python 2.7 和 perforce-python API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:33:14.203

我想到了几个选择。

1.  最简单的方法是始终让您的程序使用相同的客户端并让它同步文件。您可以让您的程序调用`p4 sync`并查看您是否获得了新版本。如果你得到一个新版本，让它继续。这种方法的优点是您不需要记住上次运行程序的任何状态/版本。

2.  如果您不喜欢使用固定客户端，您可以让您的程序始终检查相关文件的当前头版本：
    `p4 fstat //depot/path/yourfile |grep headRev | sed 's/.*headRev \(.*\)/\1/'` 您可以将该版本存储在某个临时文件中以供下次程序运行，并每次比较版本。

3.  如果您在固定时间运行程序（例如通过 cron），您可以检查最后修改时间（使用`p4 filelog`或使用`p4 fstat`），如果时间介于上次运行时间和当前时间之间，那么您需要处理文件。这个选项有点复杂，因为您需要解析那些不同的时间格式。

# java - IntelliJ 中的变量命名代码样式

> ID：15795044
> 
> 赞同：23
> 
> 时间：2013-04-03T18:23:36.840
> 
> 标签：java, coding-style, intellij-idea

我正在查看 IntelliJ 中 Java 的代码样式设置，寻找一种指定变量命名约定的方法，但什么也没看到。例如，我要求我的所有类成员变量都以`m`（我不喜欢这种约定，但这是另一个问题）开头，例如：

```
private final String mName; 
```

对比

```
private final String name; 
```

我想在现有文件上运行格式化程序并自动重新格式化变量。有没有办法在 IntelliJ 中做到这一点？我看到了代码生成的东西，但没有重新格式化现有代码。我一直在谷歌搜索并查看设置，但找不到任何东西。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-03T18:50:50.467

您只能为您将编写的新代码配置它：

![字首](https://i.stack.imgur.com/Hf2E4.png)

此设置将影响重构，例如引入字段、getter 和 setter 生成等。

重新格式化代码不会重命名变量。

有一个检查可以帮助您找到所有此类字段，但它不会自动重命名它们：**实例字段命名约定**。

在这种情况下，[SSR](http://www.jetbrains.com/idea/documentation/ssr.html)可能会有所帮助。

# ruby - Ruby twitter gem：如何提供用户登录？

> ID：15795047
> 
> 赞同：0
> 
> 时间：2013-04-03T18:23:39.467
> 
> 标签：ruby, twitter, oauth, twitter-oauth

我想为我的应用程序使用[twitter gem](https://github.com/sferik/twitter)。使用我自己的 oauth_token / oauth_secret 它可以正常工作，但现在我想确定用户登录的可能性。在 gem 文档中，我找不到我的问题的提示。当我使用 sinatra 时，我不想使用 twitter-login。（我是不是该？）

如何提供登录的可能性？/ 如何提供用户特定的 oauth_token 和秘密？

提前致谢！！

# c# - 尝试保存图像然后上传到 BLOB 存储时参数无效

> ID：15795048
> 
> 赞同：0
> 
> 时间：2013-04-03T18:23:40.637
> 
> 标签：c#, azure, azure-blob-storage

尝试保存以下图像并将其上传到 Windows azure 中的 Blob 存储时，我遇到了一些问题。由于调试模式不适用于 azure，我想知道您是否可以告诉我在以下方法中在哪里传递了无效参数：

```
byte[] decodedBase64Sring = Convert.FromBase64String(stringToEncode);

MemoryStream ms = new MemoryStream(decodedBase64Sring);

Bitmap aBitmap = new Bitmap(ms);
                    aBitmap.Save("c:\\photo1.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
                    blob.UploadFile("c:\\photo1.jpg"); 
```

# php - 如何将附加变量传递给 cmp 函数以在 php 中与 usort 一起使用

> ID：15795051
> 
> 赞同：1
> 
> 时间：2013-04-03T18:23:52.817
> 
> 标签：php, sorting, php4, usort

我需要根据来自使用 php4 的 mysql 调用的文本字符串使用 usort 订购一个数组。

到目前为止，我有 mysql 调用来获取订单：

```
$result=mysql_query("SELECT rank from order WHERE id=1");
$row = mysql_fetch_row($result); 
```

这给了我类似 $row[0]='Alberto, Carlos, Brocephus, Edgar, Daniela';

而且我有这个函数，如果我在一个数组中硬编码，它就可以工作：

```
function cmp($a,$b){
    //$order = how do I get $row[0] in here?
    $a_index = array_search($a['name'], $order);
    if (!$a_index) {
        $a_index = 999;
    }
    $b_index = array_search($b['name'], $order);
    if (!$b_index) {
        $b_index = 999;
    }
    return $a_index - $b_index;
}
usort($names,cmp); 
```

将该字符串作为数组放入 cmp 函数的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:46:58.253

在 PHP 4 中不能使用闭包，但可以使用对象。

```
class ArrayComparer {

    var $indexedarray;

    function ArrayComparer($str) {
        $this->indexedarray = array_flip(explode(', ', $str));
    }

    function cmp($a, $b) {
        $a = $a['name'];
        $b = $b['name'];
        $a_index = (isset($this->indexedarray[$a])) ? $this->indexedarray[$a] : 0x7fffffff;
        $b_index = (isset($this->indexedarray[$b])) ? $this->indexedarray[$b] : 0x7fffffff;
        return $a_index - $b_index;
    }

    function callback() {
        return array($this, 'cmp');
    }
} 
```

使用示例：

```
$cmp = new ArrayComparer('Alberto, Carlos, Brocephus, Edgar, Daniela');
usort($names, $cmp->callback()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:29:42.190

如果您使用的是现代版本的 PHP，您可以简单地使用如下`use`关键字：

```
function cmp($a, $b) use $your_string {
    ...
} 
```

或者像这样使用闭包`use`：

```
usort(function($a, $b) use $your_string {
    ...
}); 
```

但是，由于您使用的是旧版本的 PHP，您可能不得不求助于使用全局声明

```
function cmp($a, $b) {
    global $your_string;
    ...
} 
```

# node.js - NodeJS + Mongoose + Backbone.Marionette 嵌套集合模板

> ID：15795052
> 
> 赞同：0
> 
> 时间：2013-04-03T18:23:58.287
> 
> 标签：node.js, marionette, templating

我正在开发一个存储我的多媒体目录的应用程序，我有这样的 JSON 集合：

```
 { "_id" : ObjectId( "5142f55394474e2aac000001" ),
      "contentType" : "binary/octet-stream",
      "length" : 2732376,
      "chunkSize" : 262144,
      "uploadDate" : Date( 1363342677601 ),
      "metadata" : { 
         "TIT2" : "Chase The Blues (Cameron McVey Remix)",
         "TPE1" : "Terranova",
         "TRCK" : "1/13",
         "TALB" : "!K7",
         "TPOS" : "1/1",
         "TDRC" : "2000-06",
         "TCON" : [ 
                   "Electronica", 
                   "Trip-Hop" ],
         "COMM" : [ 
                   "Chillout", 
                   "Love", 
                   "German", 
                   "Berlin", 
                   "2000s", 
                   "Female Vocalists", 
                   "Male Vocalists" ],
         "TMED" : "CD",
         "TMOO" : "Chill",
         "TDOR" : "2000-06",
         "TSO2" : "Various Artists",
         "TPE2" : "Various Artists",
         "TCMP" : "1",
         "TSOP" : "Terranova",
         "TIT1" : "Electronica",
         "TPUB" : "Sinedín Music",
         "TLAN" : "eng",
         "TYER" : [ 
                  "2000" ],
         },
      "md5" : "617401af615ac0c6cb1dee9a3f1b99e6",
      "origin" : "Chase The Blues.109eb5ab5105a1caa505a26657f7f9a8.mp3",
      "evolution" : null,
      "insertDate" : Date( 1336662308000 ),
      "tagSource" : "MusicBrainz",
      "mediainfo" : 
                  { "Format" : "MPEG Audio",
                    "Format version" : "Version 1",
                    "Format profile" : "Layer 3",
                    "Duration" : "3mn 47s",
                    "Bit rate mode" : "Constant",
                    "Bit rate" : "96.0 Kbps",
                    "Channel(s)" : "1 channel",
                    "Sampling rate" : "44.1 KHz",
                    "Compression mode" : "Lossy",
                    "Stream size" : "2.60 MiB (100%)",
                    "Language" : "English" 
                  }
        } 
```

因此，如您所见，models.js 的文档中有“元数据”和“媒体信息”数组，在客户端，我已经像这样重写了模型解析函数

```
 var Audio_Model = Backbone.Model.extend({

      idAttribute: "_id",
      url: 'AudioModel',
      urlRoot: 'AudioModel' ,

      parse: function(response) {

      // Check if response includes some nested collection data...
      if (_.has(response, 'metadata')){

         // Check if this model has a property called metadata
         if (!_.has(this, 'metadata')) {  // It does not...
             // So instantiate a collection and pass in raw data
             this.metadata = new Audio_Collection_Metadata(response.metadata);
         } else {
             // It does, so just reset the collection
             this.metadata.reset(response.metadata);
         }
         delete response.metadata;
      }
      // Check if response includes some nested collection data...
      if (_.has(response, 'mediainfo')){
             // Check if this model has a property called mediainfo
             if (!_.has(this, 'mediainfo')) {  // It does not...
             // So instantiate a collection and pass in raw data
             this.mediainfo = new Audio_Collection_Mediainfo(response.mediainfo);
         } else {
             // It does, so just reset the collection
             this.mediainfo.reset(response.mediainfo);
    }
    delete response.mediainfo;
   }
   return response;
   }
  }); 
```

所以我创建了两个单独的“元数据”和“媒体信息”集合，我遇到的问题是如何在 html 模板中呈现“元数据”和“媒体信息”，因为在“媒体信息”和“元数据”集合中，键、值不固定，在“元数据”中，一些键是值数组，数组中的项目数不固定

我为这两个集合创建了backbone.marionette.itemview 和compositeview，但我不知道如何渲染

请问，有人有解决方案吗？此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:50:04.540

最后我自己通过数据规范化解决了这个问题，这是采用的新猫鼬模式：

```
 var TagSchema = new mongoose.Schema({
  value : {type : String, default: '', required: true}
    });

    var MetadataSchema = new mongoose.Schema({
 name  : {type: String, default: '', required : true},
 values: [TagSchema]
    });

    var MediainfoSchema = new mongoose.Schema({
 name : {type: String, default: ''},
 value: {type: String, default: ''}
    });

    var StreamSchema = new mongoose.Schema({
 _id: mongoose.Schema.ObjectId,
 TIT2: {type : String, default: '', required: true},
 metadata: [MetadataSchema],
 mediainfo:[MediainfoSchema]
   }); 
```

这样通过 CollectionView 和 CompositeView 的序列我可以浏览整个模型希望这可以帮助某人

# ruby-on-rails - 自定义图库，使其属于一个用户

> ID：15795053
> 
> 赞同：0
> 
> 时间：2013-04-03T18:23:59.507
> 
> 标签：ruby-on-rails, carrierwave

我正在使用 CarrierWave，到目前为止，该画廊对公众开放，没有所有权。我想设置一个，用户不必创建画廊。唯一的选择应该是将照片上传到他们的帐户，我想将每张用户照片上传限制为最多 5 张。因此，如果用户 16 登录，他们可以选择将最多 5 张照片上传到他们的个人资料。一旦达到该限制，如果用户尝试上传更多，它应该说“最大上传照片，删除以上传更多”。我不确定如何解决这个问题。

photo.rb 模型：

```
class Photo < ActiveRecord::Base
  attr_accessible :title, :body, :gallery_id, :name, :image, :remote_image_url
  has_many :user, :through => :gallery
  has_many :gallery
  mount_uploader :image, ImageUploader

    LIMIT = 5

    validate do |record|
      record.validate_photo_quota
    end

    def validate_photo_quota
      return unless self.user
      if self.gallery.user(:reload).count >= LIMIT
        errors.add(:base, :exceeded_quota)
      end
    end
end 
```

照片控制器：

类照片控制器 < 应用控制器

```
 def new
    @photo = Photo.new(:gallery_id => params[:gallery_id])
  end

  def create
    @photo = Photo.new(params[:photo])
    if @photo.save
      flash[:notice] = "Successfully created photos."
      redirect_to @photo.gallery
    else
      render :action => 'new'
    end
end

  def edit
    @photo = Photo.find(params[:id])
  end

  def update
    @photo = Photo.find(params[:id])
    if @photo.update_attributes(paramas[:photo])
      flash[:notice] = "Successfully updated photo."
      redirect_to @photo.gallery
    else
      render :action => 'edit'
    end
  end

  def destroy
    @photo = Photo.find(params[:id])
    @photo.destroy
    flash[:notice] = "Successfully destroyed photo."
    redirect_to @photo.gallery
  end
end 
```

画廊控制器：

```
class GalleriesController < ApplicationController
  def index
    @galleries = Gallery.all
  end

  def show
    @gallery = Gallery.find(params[:id])
  end

  def new
    @gallery = Gallery.new
  end

  def create
    @gallery = Gallery.new(params[:gallery])
    if @gallery.save
      flash[:notice] = "Successfully created gallery."
      redirect_to @gallery
    else
      render :action => 'new'
    end
  end

  def edit
    @gallery = Gallery.find(params[:id])
  end

  def update
    @gallery = Gallery.find(params[:id])
    if @gallery.update_attributes(params[:gallery])
      flash[:notice] = "Successfully updated gallery."
      redirect_to gallery_url
    else
      render :action => 'edit'
    end
  end

  def destroy
    @gallery = Gallery.find(params[:id])
    @gallery.destroy
    flash[:notice] = "Successfully destroy gallery."
    redirect_to galleries_url
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:28:21.857

**限制用户访问**

为了限制用户访问某些模型，我会使用[CanCan 之](https://github.com/ryanb/cancan)类的东西。

它会让你做这样的事情：

```
## ability.rb
# Allow user to CRUD pictures belonging to own gallery
can :manage, Picture, gallery: {user: user} 
```

在控制器中，您可以执行以下操作：

```
# picture_controller.rb
# assuming a nested route, e.g. galleries/1/pictures
load_and_authorize_resource :gallery
load_and_authorize_resource :picture, through: :gallery 
```

这将确保每个用户只能看到他或她自己的图片。

**限制图库中的图片数量**

我认为您的验证方法是可以的。

我会这样简化它：

```
validate :quota

private

def quota
  return unless user
  if gallery.pictures.count > 4
    errors[:base] << "Maximum photos uploaded, delete to upload more"
  end 
end 
```

错误消息可能应该进入一个语言环境文件。

**为每个用户自动创建图库**

为此，请确保 Gallery 模型`belong_to`与 User 有关联。然后在 User 模型的回调中创建图库：

```
# models/user.rb
after_create :setup_gallery

private
def setup_gallery
  Gallery.create(user: self)
end 
```

**一般注意事项**

定义`has_many`关系时，应使用复数名称，例如`has_many :users`或`has_many :galleries`。

# css - 带有控制按钮的视频播放器的 CSS 样式

> ID：15795057
> 
> 赞同：0
> 
> 时间：2013-04-03T18:24:10.910
> 
> 标签：css, video

继续我在这个线程上的最后一个问题（[播放按钮以不同的图像/视频大小为中心](https://stackoverflow.com/questions/15785090/play-button-centred-with-different-image-video-sizes)），我将打开这个关于@Marc Audet 请求的问题。

基本上我有这个代码：

```
.playBT{
    width: 50px;
    height: 50px;
    position: absolute;
    z-index: 999;
    top: 25%;
    left: 25%;
    margin-left: -25px;
    margin-top: -25px;
} 
```

但是我不能使用 Marc 在最后一个线程中给出的示例，因为当视频大小发生变化时，播放按钮无法按预期工作......

[这](http://jsfiddle.net/dzfsX/3/)是代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:11:11.770

您需要稍微调整一下 HTML，这是一种方法：

```
<div id="video-panel">
    <div id="video-container" class="video-js-box">
        <div id="play" class="playBT"><img class="imgBT" src="http://2.bp.blogspot.com/-RnPjQOr3PSw/Teflrf1dTaI/AAAAAAAAAbc/zQbRMLQmUAY/s1600/player_play.png" /></div>
        <video id="video1">
            <source src="http://video-js.zencoder.com/oceans-clip.mp4"/>
        </video>
    </div>
    <div id="video-controls">
        <div id="footerplay"><img src="http://www.cssaddons.com/uploads/goruntulenme/jQueryPausePlay/images/play.png" /></div>
        <div id="footerpause"><img src="http://www.cssaddons.com/uploads/goruntulenme/jQueryPausePlay/images/pause.png" /></div>
        <div id="progressbar">
            <div id="chart"></div>
            <div id="seeker"></div>
        </div>            
    </div>
</div> 
```

CSS如下：

```
#video-panel {
    border: 4px solid blue;
    padding: 4px 50px;
}
.video-js-box {
    width: auto;
    height: auto;
    outline: 1px dotted blue;
    position: relative;
    display: block;
}
video {
    outline: 1px dotted blue;
    margin: 0 auto;
    display: block;
}

#play {
    position:absolute;
    top: 50%;
    left: 50%;
    outline: 1px dotted red;
}

.imgBT{
    width:50px;
    height:50px;
    vertical-align: bottom;
    margin-left: -25px;
    margin-top: -25px;
}

#video-controls {
    outline: 1px solid red;
    overflow: auto;
}

#footerplay {
    float: left;
    margin-left: 27px;
}

#footerpause {
    float: left;
    margin-left: 27px;
}

#progressbar {
    float: left;
    outline: 1px dotted black;
    display: inline-block;
    width: 200px;
    height: 27px;
    margin-left: 27px;
}

#footerplay img, #footerpause img{
    height:27px;
} 
```

小提琴参考：http: [//jsfiddle.net/audetwebdesign/EnDHw/](http://jsfiddle.net/audetwebdesign/EnDHw/)

**解释和细节**

使用包装 div 以保持一切整洁，并为视频和控件`video-panel`使用单独的 div 。`video-container``video-controls`

`play`按钮和`<video>`元素相对于 定位并`video-container`注意负边距技巧来定位箭头按钮图像。

控制元素可以定位在它们自己的 div`video-controls`中。`27px`我只是用左边距将它们浮动到左边。

这应该可以帮助您入门。轮廓和边框仅用于说明，是可选的。

祝你好运！

# java - 三合会没有出现战斗？（Java Set 缺少一项）

> ID：15795058
> 
> 赞同：2
> 
> 时间：2013-04-03T18:24:13.383
> 
> 标签：java, interface, set, diamond-problem

我有来自两家公司 asoft 和 bsoft 的代码。我也改变不了。这是我的情况的简化版本，我很确定有足够的信息来找到导致问题的原因。

bsoft 提供`IGang`，代表一个可以与其他帮派战斗的帮派。

```
package bsoft;

public interface IGang {
    /** @return negative, 0, or positive, respectively
     *          if this gang is weaker than, equal to, or stronger
     *          than the other
     */
    public int compareTo(IGang g);
    public int getStrength();
    public String getName();
    public void attack(IGang g);
    public void weaken(int amount);
} 
```

asoft 提供`GangWar`，它允许`IGang`s 进行战斗：

```
package asoft;
import java.util.*;
import bsoft.*;
/** An `IGang` ordered by identity (name) */
public interface ComparableGang extends IGang, Comparable<IGang> {}

package asoft;
import java.util.*;

public class GangWar {
    public final Set<ComparableGang> gangs = new TreeSet<ComparableGang>();
    public void add(ComparableGang g) {gangs.add(g);}
    public void doBattle() {
        while (gangs.size() > 1) {
          Iterator<ComparableGang> i = gangs.iterator();
          ComparableGang g1 = i.next();
          ComparableGang g2 = i.next();
          System.out.println(g1.getName() + " attacks " + g2.getName());
          g1.attack(g2);
          if (g2.getStrength() == 0) {
              System.out.println(g1.getName() + " smokes " + g2.getName());
              gangs.remove(g2);
          }
          if (g1.getStrength() == 0) {
              System.out.println(g2.getName() + " repels " + g1.getName());
              gangs.remove(g1);
          }
        }
        for (ComparableGang g : gangs) {
            System.out.println(g.getName() + " now controls the turf!");
        }
    }
} 
```

`Gang`它需要您提供给它的 s 的附加约束`Comparable`，大概是这样它可以按名称排序或避免重复。每个帮派（以任意顺序，为了简单起见，此处使用设置顺序）攻击另一个帮派，直到只剩下一个帮派（或者没有帮派，如果最后两个有平局）。我写了一个简单的实现`ComparableGang`来测试它：

```
import asoft.*;
import bsoft.*;
import java.util.*;

class Gang implements ComparableGang {
    final String name;
    int strength;

    public Gang(String name, int strength) {
        this.name = name;
        this.strength = strength;
    }

    public String getName() {return name;}
    public int getStrength() {return strength;}

    public int compareTo(IGang g) {
        return strength - g.getStrength();
    }

    public void weaken(int amount) {
        if (strength < amount) strength = 0;
        else strength -= amount;
    }

    public void attack(IGang g) {
        int tmp = strength;
        weaken(g.getStrength());
        g.weaken(tmp);

    }

    public boolean equals(Object o) {
      if (!(o instanceof IGang)) return false;
      return name.equals(((IGang)o).getName());
    }
}

class Main {
   public static void main(String[] args) {
       GangWar gw = new GangWar();
       gw.add(new Gang("ballas", 2));
       gw.add(new Gang("grove street", 9));
       gw.add(new Gang("los santos", 8));
       gw.add(new Gang("triads", 9));
       gw.doBattle();
   }
} 
```

测试一下...

```
$ java Main
ballas attacks los santos
los santos repels ballas
los santos attacks grove street
grove street repels los santos
grove street now controls the turf! 
```

问题是，三合会不会出现在战斗中。事实上，`gangs.size()`在开头打印会`doBattle()`返回 3 而不是 4。为什么？如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:27:17.233

> 问题是，三合会不会出现在战斗中。事实上，在 doBattle() 的开头打印 gangs.size() 返回 3 而不是 4。为什么？

两者`triads`都`grove street`具有 9 的强度。因此它们在`Gang.compareTo`（实现`Comparable`）方面是相等的。因此在 a 中只允许一个`TreeSet`。

如果您不想删除按排序顺序重复的项目，请不要使用`TreeSet`...

编辑：`ComparableGang`接口描述表明预期的内容：

```
/** An `IGang` ordered by identity (name) */
public interface ComparableGang extends IGang, Comparable<IGang> {} 
```

您的`compareTo`方法*不是*“按身份（名称）”排序 - 它按强度排序。老实说，它首先是一个非常愚蠢的接口，因为`asoft`创建一个类非常容易`public class GangNameComparator : Comparator<IGang>`，然后如果他们想按名称排序，则将其作为树集的比较器提供。

但是，由于他们建议您应该实现比较，因此您需要按照界面描述的方式进行操作：

```
public int compareTo(IGang g) {
    return name.compareTo(g.getName());
} 
```

但是...正如您在评论中指出的那样（以及在 Rob 的回答中指出的），这与约定俗成的命名`IGang`描述相矛盾：

```
public interface IGang {
    /** @return negative, 0, or positive, respectively
     *          if this gang is weaker than, equal to, or stronger
     *          than the other
     */
    public int compareTo(IGang g);
} 
```

不可能实现`ComparableGang`同时满足它自己的文档和`IGang`文档。在 asoft 方面，这基本上是被设计破坏的。

任何代码都应该能够使用一个`IGang`实现，*只*知道`IGang`并依赖于`IGang`合约之后的实现。然而，asoft 通过在扩展接口中要求不同的行为打破了这一假设`IGang`。

他们在 中添加*更多要求*是合理的`ComparableGang`，只要它们不*违反*`IGang`.

请注意，这是 C# 和 Java 之间的一个重要区别。在 C# 中，具有相同签名的两个不同接口中的两个函数可以组合成一个接口，该接口继承这两个函数，并且[这两个方法保持不同且可访问](https://stackoverflow.com/a/4103319/712765)。在 Java 中，由于这两个方法是完全抽象的并且具有相同的签名，因此它们被[认为是](https://stackoverflow.com/a/2832651/712765) [相同的方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8)，实现组合接口的类只有一个这样的方法。所以***在 Java*** `ComparableGang`中是无效的，因为它不能有一个满足 ComparableGang 的契约和 IGang 的契约的 compareTo() 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T02:24:26.800

**TL；DR：在下面使用 B)**

[来自Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)的 javadoc （对于[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)也是如此！）：

> ***`e1.compareTo(e2) == 0`当且仅当与类 C 的每个 e1 和 e2具有相同的布尔值`e1.equals(e2)`**时，类 C 的自然排序与 equals 一致。注意 null 不是任何类的实例，并且 e.compareTo(null ) 应该抛出 NullPointerException，即使`e.equals(null)`返回 false。*

在您的情况下（简化），

*   `equals`被定义为相等`name`
*   `compareTo`被定义为比较`strength`

这不符合上述条件：

*   当两个`strength`s 相等，但两个`name`s 不同时
*   当两个`name`s 相等，但两个`strength`s 不同时（可能是您的应用程序逻辑避免的情况）

## 回答

如何纠正？

**A）如果您的要求允许您对集合进行排序`name`（与 asoft 代码中的注释一致）：**

```
 // will only return 0 if the strengths are equal AND the names are equal
 public int compareTo(ComparableGang g) {
     return name.compareTo(g.getName());
 } 
```

**B）如果您的要求迫使您将集合按`strength`（然后`name`）排序（与 bsoft 代码中的注释一致）。**

```
 // will return 0 if & only if the strengths are equal AND the names are equal
 public int compareTo(ComparableGang g) {
     int result = strength - g.getStrength();
     if (result == 0) result =  name.compareTo(g.getName());
     return result;
 }

 // will return true if & only if the strengths are equal AND the names are equal
 public boolean equals(Object o) {
     if (!(o instanceof ComparableGang)) return false;
     ComparableGang gang2 = (ComparableGang)o;
     return name.equals(gang2.getName()) && strength == gang2.getStrength();
 }

 // For this case, if it's illegal to have two gangs of same name but different 
 // strength (it should be illegal!), then app logic must enforce this - the Set 
 // no longer will. 
```

**评论1：虽然修改asoft的`GangWar`类对您来说是一个问题，但如果您可以将上述B）的两种方法放入：**

```
 class ComparableGangComparator implements Comparator<ComparableGang> {
 } 
```

然后修改如何`GangWar`构造Set：

```
 public final Set<ComparableGang> gangs = new TreeSet<ComparableGang>(
                                                  new ComparableGangComparator()); 
```

这样，您可以将 A) 的两种方法保留在 Gang 类中 - 让类具有“真实”的 equals & compareTo 对象标识 POV。

**评论 2：对 asoft 和 bsoft 的 compareTo 方法的评论相互矛盾**

从理论上的观点来看：***如果***asoft 的注释不是错字，那么 asoft 不仅扩展了 bsoft 的接口，而且还改变了其中一种方法所需的行为。这实际上根本不是矛盾 - 它是一种***覆盖***：asoft 的评论“获胜”。

从一个实际的 POV 来看：您需要双手交叉，这是故意这样做的，并且评论是正确的。 ***如果***这是来自 asoft 的错字，那么 bsoft 的评论会更好，并且 bsoft “获胜”。您可以向 asoft 发送查询或查看他们的文档/示例以确认。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:31:27.173

该`Gang.compareTo`方法基于它们的强度，因此由于`triads`和`grove street`具有相同的强度，因此 TreeSet 认为它们相等，然后将它们删除。

根据 ComparableGang 期望如何对它们进行排序，我会说忽略 IGang 接口的行为请求`compareTo`并将其更改为此。

```
public int compareTo(IGang g) {
    return name.compareTo(g.getName());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T20:34:19.600

从根本上说，问题是 a`ComparableGang` ***是一个*** `IGang`，但是 IGangs 按强度排序，而 ComparableGangs 按名称排序，所以 a`ComparableGang` ***不是 a*** `IGang`。

**TL;DR**解决此问题的正确方法是修复接口和库代码。[此答案](https://stackoverflow.com/a/16627961/712765)中解释了编写代码以使用这两个库的解决方法。

* * *

最好的解决方案是修复两个接口。bsoft 只需要将其代码中的一行更改为：

```
public interface IGang extends Comparable<IGang> { 
```

界面中的其他任何内容或任何其他代码都不需要更改，但 asoft 会注意到 IGang 已经具有可比性。（编辑：再想一想，由于`IGang.compareTo()`与[不一致`equals()`](https://stackoverflow.com/q/12123960/712765)，这就是为什么三合会没有出现在战斗中的根源，bsoft 可能在*不*扩展方面做了正确的事情`Comparable`。他们做错的是声明`compareTo()`而不是说，`compareStrengthTo()`.)

不过，asoft 不需要等待 bsoft 更改任何内容。他们一开始就创建了一个被设计破坏的界面，这确实是他们的错。他们应该刚刚选择了一种`Comparator<IGang>`按名称排序的方法。所以如果我在 asoft 工作，`GangWar`看起来会更像这样：

```
public class GangWar {
    public final Set<IGang> gangs;
    public GangWar(Comparator<IGang> gangNameComparator) {
        gangs = new TreeSet<IGang>(gangNameComparator);
    }
    public void add(IGang g) {gangs.add(g);}
    public void doBattle() {
        while (gangs.size() > 1) {
          Iterator<IGang> i = gangs.iterator();
          IGang g1 = i.next();
          IGang g2 = i.next();
          System.out.println(g1.getName() + " attacks " + g2.getName());
          g1.attack(g2);
          if (g2.getStrength() == 0) {
              System.out.println(g1.getName() + " smokes " + g2.getName());
              gangs.remove(g2);
          }
          if (g1.getStrength() == 0) {
              System.out.println(g2.getName() + " repels " + g1.getName());
              gangs.remove(g1);
          }
        }
        for (IGang g : gangs) {
            System.out.println(g.getName() + " now controls the turf!");
        }
    }
} 
```

因此，与其完全打破`IGang`，他们只是在需要时询问他们需要的东西（IGang 没有）。通过此更改（以及 Comparator 实现），程序输出：

```
ballas attacks grove street
grove street repels ballas
grove street attacks los santos
los santos repels grove street
los santos attacks triads
triads repels los santos
triads now controls the turf! 
```

当然，如果您坚持使用图书馆，您可以阅读[此答案](https://stackoverflow.com/a/16627961/712765)，了解在不接触图书馆的情况下与破损一起生活的一般方法。

# java - 无法将 DefaultHttpResponse 写入 netty 中的通道：“不支持的消息类型：类 org.jboss.netty.handler.codec.http.DefaultHttpResponse”

> ID：15795061
> 
> 赞同：0
> 
> 时间：2013-04-03T18:24:24.463
> 
> 标签：java, netty

此特定问题与[以下问题](https://stackoverflow.com/questions/15772620/how-do-i-decode-the-response-from-an-http-request-and-use-the-content-in-netty)的可能解决方案有关。

我有两个管道，其中一个通道接收客户端请求，然后在第二个通道上触发请求，然后将响应内容复制到新的 DefaultHttpResponse 中，我尝试将其写入原始通道。但是，这会导致以下异常：

```
java.lang.IllegalArgumentException: unsupported message type: class org.jboss.netty.handler.codec.http.DefaultHttpResponse
at org.jboss.netty.channel.socket.nio.SocketSendBufferPool.acquire(SocketSendBufferPool.java:53)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.write0(AbstractNioWorker.java:468)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromTaskLoop(AbstractNioWorker.java:432)
at org.jboss.netty.channel.socket.nio.AbstractNioChannel$WriteTask.run(AbstractNioChannel.java:366)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processWriteTaskQueue(AbstractNioWorker.java:350)
at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

有谁知道为什么会发生这种情况？作为参考，这是我的两个管道的代码（我知道我在这里做了一些线程不安全的事情，但在我继续之前，我试图让它为单线程客户端工作）：

```
private static Channel channel;
private static Map<Channel, Channel> proxyToClient = new ConcurrentHashMap<Channel, Channel>();

public static void main(String[] args) throws Exception {
    ChannelFactory clientFactory =
            new NioClientSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    final ClientBootstrap cb = new ClientBootstrap(clientFactory);
    cb.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestEncoder(),
                    new HttpResponseDecoder(),
                    new ResponseHandler());
        }
    });
    ChannelFuture cf = cb.connect(new InetSocketAddress("localhost", 18080));
    channel = cf.awaitUninterruptibly().getChannel();

    ChannelFactory factory =
            new NioServerSocketChannelFactory(
                    Executors.newCachedThreadPool(),
                    Executors.newCachedThreadPool());
    ServerBootstrap sb = new ServerBootstrap(factory);

    sb.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(
                    new HttpRequestDecoder(),
                    new RequestHandler());
        }
    });

    sb.setOption("child.tcpNoDelay", true);
    sb.setOption("child.keepAlive", true);

    sb.bind(new InetSocketAddress(2080));
}

private static class ResponseHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpResponse proxyResponse = (HttpResponse) e.getMessage();
        Channel clientChannel = proxyToClient.get(e.getChannel());
        HttpResponse clientResponse = new DefaultHttpResponse(HttpVersion.HTTP_1_1, HttpResponseStatus.OK);
        clientResponse.setContent(proxyResponse.getContent());
        clientChannel.write(clientResponse).addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) {
                Channel ch = future.getChannel();
                ch.close();
            }
        });
    }
}

private static class RequestHandler extends SimpleChannelHandler {

    @Override
    public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) {
        final HttpRequest request = (HttpRequest) e.getMessage();
        proxyToClient.put(channel, e.getChannel());
        channel.write(request);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:18:46.803

`HttpResponseEncoder`在您的服务器管道中添加一个怎么样？您的服务器应该知道如何将`DefaultHttpResponse`对象转换为字节，以便它可以通过网络发送它。

# c# - 一段时间后，套接字从队列中延迟

> ID：15795062
> 
> 赞同：0
> 
> 时间：2013-04-03T18:24:29.750
> 
> 标签：c#, multithreading, sockets, select, concurrent-collections

我试图`Socket.Select`在多线程应用程序中使用，我不想使用`async socket`，所以这是我的代码：-

```
 public class Server {
        private TcpListener m_listener;
        private IConnectionFactory m_factory;
        private List<Socket> Sockets = new List<Socket>();
        private ConcurrentDictionary<Socket, Connection> Clients = new ConcurrentDictionary<Socket, Connection>();
        private ConcurrentDictionary<string, ConcurrentQueue<Socket>> Threads = new ConcurrentDictionary<string, ConcurrentQueue<Socket>>();
        private int maxsockets = 0;
        private object sync = new object();

        public Server(string ip, int port, IConnectionFactory factory, int maxsockets) {
            IPAddress ipa = IPAddress.Parse(ip);
            TcpListener listener = new TcpListener(ipa, port);
            this.maxsockets = maxsockets;
            m_listener = listener;
            m_factory = factory;

            int threads = maxsockets <= 100 ? 1 : maxsockets / 100;
            for (int i = 0; i < threads; i++) {
                Thread th = new Thread(HandelSockets);
                th.Name = i.ToString();
                Threads.TryAdd(i.ToString(), new ConcurrentQueue<Socket>());
                th.Start();
            }
        }

        public void HandelSockets() {
            ConcurrentQueue<Socket> queue = Threads[Thread.CurrentThread.Name];
            Connection temp;
            Socket sock;

            while (true) {
                try {
                    lock (sync) {
                        while (queue.TryDequeue(out sock)) {
                            if (Clients.TryGetValue(sock, out temp)) {
                                if (!temp.Alive) {
                                    Sockets.Remove(sock);
                                    Clients.TryRemove(sock, out temp);
                                } else {
                                    temp.Receive();
                                    Console.WriteLine("recved from thread num : " + Thread.CurrentThread.Name);
                                }
                            }
                        }
                    }
                } catch { }
                Thread.Sleep(1);
            }
        }

        public void Run() {
            m_listener.Start();
            Console.WriteLine("listen started");
            Sockets.Add(m_listener.Server);

            while (true) {
                try {
                    var temp_list = Sockets.ToList();
                    Socket.Select(temp_list, null, null, 1000);

                    foreach (Socket socket in temp_list) {
                        if (socket == m_listener.Server) {

                            var sock = m_listener.AcceptSocket();
                            Sockets.Add(sock);
                            Connection conn = m_factory.Create(sock);
                            Clients.TryAdd(sock, conn);
                        } else if (Clients.Count >= maxsockets) {
                            Clients[socket].OnMaxConnections();
                            break;
                        } else {
                            if (!Threads.Values.Any(x => x.Contains(socket))) {
                                var quque = Threads.Values.Where(x => !x.Contains(socket)).OrderBy(x => x.Count).First();
                                lock (sync) {
                                    quque.Enqueue(socket);
                                }
                            }
                            break;
                        }
                    }
                } catch {
                }
            }
        }
    } 
```

问题是一段时间后，其中一个连接的套接字将被延迟，其中一个套接字将停止发送或接收，直到其他套接字之一这样做！或者它可能需要几秒/分钟才能恢复接收和发送！

我不知道为什么会发生这种情况！？也许我选择队列的方式？，我希望有人能指出我可能导致延迟发生的原因，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T02:22:53.603

```
lock (sync) {
    while (queue.TryDequeue(out sock)) {
        if (Clients.TryGetValue(sock, out temp)) {
            if (!temp.Alive) {
                Sockets.Remove(sock);
                Clients.TryRemove(sock, out temp);
            } else {
                temp.Receive();
                Console.WriteLine("recved from thread num : " + Thread.CurrentThread.Name);
            }
        }
    }
} 
```

我看不到您对 Connection.Receive 的实现，但如果它是一个阻塞调用，即在它收到数据之前不会返回，那么该线程将持有`sync`对象上的锁，这会导致您的其他线程等待，因此造成延误。

现在您知道是什么导致了问题，您可以进行必要的更改，但是我强烈建议您使用异步方法，因为它会更好地执行并且完全不需要锁定。

编辑：哦，我刚刚意识到这是一个老问题

# c++ - 如何使用 ns3 实现多播动态加入/修剪

> ID：15795069
> 
> 赞同：0
> 
> 时间：2013-04-03T18:24:51.433
> 
> 标签：c++, multicast, ns-3

有没有办法使用 ns3.js 在多播网络中实现节点的动态修剪/移植。我能找到的资源都只为多播网络实现静态路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:05:14.710

参考这个： [http ://www.nsnam.org/docs/release/3.16/doxygen/classns3_1_1_ipv4_static_routing_helper.html#ae69a07ded3139dfd4e21bb7c10eba416](http://www.nsnam.org/docs/release/3.16/doxygen/classns3_1_1_ipv4_static_routing_helper.html#ae69a07ded3139dfd4e21bb7c10eba416)

在 ns-3 中，我们为节点的路由表执行设置了默认多播路由`SetDefaultMulticastRoute(dev,nd)`，正如文档所述，它等效于执行以下命令：

```
 route add 224.0.0.0 netmask 240.0.0.0 dev nd 
```

在为物理世界中的 linux 服务器设置多播时，我们需要在路由表中为多播地址设置一个路由。在 ns-3 模拟世界中，我们必须对我们使用创建的每个节点执行相同的操作`SetDefaultMulticastRoute(dev,nd)`。

静态组播路由用于从一个 LAN 路由到另一个 LAN。在现实世界中，我们需要一个知道如何路由多播的路由器。在 ns-3 模拟世界中，我们需要一个知道如何路由多播的路由器。因此，在 ns-3 中，我们需要设置从一个 LAN 到另一个 LAN 的静态路由，该路由`AddMulticastRoute()`安装在模拟中充当路由器的节点上。

如果有一个 ns-3 助手可以在 a`NodeContainer`和`NetDeviceContainer`. 但是，该方法需要一个 Node 及其关联的`NetDevice`，因此您必须使用循环来设置它们，假设`0..N`中的节点与 中的节点`NodeContainer`直接相关。`0..N``NetDeviceContainer`

```
 for (int i = 0; i < N; i++) {
        Ptr<Node> sender = nodecontainer.Get (i);
        Ptr<NetDevice> senderIf = netdevicecontainer.Get (i);
        multicast.SetDefaultMulticastRoute (sender, senderIf);
    } 
```

参考这个： [http ://www.nsnam.org/docs/release/3.16/doxygen/csma-multicast_8cc_source.html](http://www.nsnam.org/docs/release/3.16/doxygen/csma-multicast_8cc_source.html)

您可以看到多播数据包的发送方和接收方是如何设置的。它确实包括两个 LAN 之间的静态路由。此示例中的接收器没有默认的多播路由设置。内联注释声明所有节点都将从源接收多播帧 - 源是我们执行的节点`SetDefaultMulticastRoute(source,sourceIf)`。

请注意，此代码的注释表明源接收它发送的多播帧。

参考这个：http://www.nsnam.org/docs/release/3.16/doxygen/udp-echo-server_8cc_source.html

您编写的 ns3 应用程序会实际加入 Multicast 组。

```
 78  if (m_socket == 0)
    79     {
    80       TypeId tid = TypeId::LookupByName ("ns3::UdpSocketFactory");
    81       m_socket = Socket::CreateSocket (GetNode (), tid);
    82       InetSocketAddress local = InetSocketAddress (Ipv4Address::GetAny (), m_port);
    83       m_socket->Bind (local);
    84       if (addressUtils::IsMulticast (m_local))
    85         {
    86           Ptr<UdpSocket> udpSocket = DynamicCast<UdpSocket> (m_socket);
    87           if (udpSocket)
    88             {
    89               // equivalent to setsockopt (MCAST_JOIN_GROUP)
    90               udpSocket->MulticastJoinGroup (0, m_local);
    91             }
    92           else
    93             {
    94               NS_FATAL_ERROR ("Error: Failed to join multicast group");
    95             }
    96         }
    97     } 
```

# r - 如何将图例添加到 ggplot2 折线图？

> ID：15795071
> 
> 赞同：1
> 
> 时间：2013-04-03T18:24:58.233
> 
> 标签：r, ggplot2, legend

我有一个简单的数据框：

```
> 嗯
  年 y1 y2
1 2005 4.50 4.92
2 2006 年 4.89 6.21
3 2007 年 6.63 6.68
4 2008 年 4.89 4.60
5 2009 年 16.56 15.16
6 2010 年 17.98 17.73
7 2011 25.92 19.85
```

我想在 x 轴上绘制一个折线图，y1 和 y2 作为两条单独的线，黑色和不同的线型。如何获得显示 y1 代表“Bob”而 y2 代表“Susan”的图例？

这是我的尝试，它产生了以下图表（没有图例）：

```
ggplot(ih, aes(x = year)) + geom_line(aes(y=y1), linetype="dashed") + 
  geom_line(aes(y=y2)) + 
  labs(x="Year", y="Percentage", fill="Data") + 
  geom_point(aes(y=y1)) + 
  geom_point(aes(y=y2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/6sHAU.png)

感谢您的任何帮助！今天是我使用 R 的第一天！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:29:47.000

您应该将数据转换为长格式，例如使用`melt()`库中的函数`reshape2`，然后用于在. 所以会自动生成图例。要删除图例中的名称，您可以添加.`variable``linetype=``aes()``variable``scale_linetype("")`

```
library(reshape2)
ih.long<-melt(ih, id.vars="year")

ih.long
   year variable value
1  2005       y1  4.50
2  2006       y1  4.89
3  2007       y1  6.63
4  2008       y1  4.89
5  2009       y1 16.56
6  2010       y1 17.98
....

ggplot(ih.long,aes(year,value,linetype=variable))+geom_line()+geom_point()+
    scale_linetype("") 
```

![在此处输入图像描述](https://i.stack.imgur.com/By0Od.png)

# jquery - 在 .orbit-caption 或 .orbit-caption 内的单个元素上使用 CSS3 淡入淡出？

> ID：15795074
> 
> 赞同：0
> 
> 时间：2013-04-03T18:25:11.560
> 
> 标签：jquery, css, zurb-foundation, css-animations, orbit

我希望能够淡入我的 .orbit-caption 中的某些单个元素（例如 h2 或按钮）。我已经尝试将 CSS3 应用于 .orbit-caption 和单个元素，但没有任何效果......有什么想法吗？

示例标记（淡入淡出应用于 .orbit-container）如下。

```
<section id="carousel">
    <div class="row collapse">
        <div class="small-12 large-12 columns">
            <ul data-orbit>
              <li>
                <img src="image" />
                <div class="orbit-caption">
                    <h2 class="carousel">Hunting Coolers</h2>
                    <h3 class="subheader">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</h3>
                </div>
              </li>
              <li>
                <img src="image" />
                <div class="orbit-caption">
                    <h2 class="carousel">Fishing Coolers</h2>
                    <h3 class="subheader">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</h3>
                </div>
              </li>
            </ul>
        </div>
    </div>
</section>

#carousel .orbit-container .orbit-slides-container > * .orbit-caption {
position: absolute;
bottom: 0;
color: #fff;
width: 100%;
padding: 10px 14px;
font-size: 0.875em;
-webkit-animation: fadein 5s;
-moz-animation: fadein 5s;
-o-animation: fadein 5s;
animation: fadein 5s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:07:12.723

您需要在（通常）初始化 Foundation 之前设置自定义样式。例如，如果这是您的自定义样式：

```
.the_coolest_orbit_style {
    position: absolute;
    bottom: 0;
    color: #fff;
    width: 100%;
    padding: 10px 14px;
    font-size: 0.875em;
    -webkit-animation: fadein 5s;
    -moz-animation: fadein 5s;
    -o-animation: fadein 5s;
    animation: fadein 5s;
} 
```

为了使它工作：

```
$(document).foundation('orbit', {
    orbit_transition_class: 'the_coolest_orbit_style'
    });

$(document).foundation(); 
```

# javascript - jQuery CDN 未在 LocalHost 上加载

> ID：15795080
> 
> 赞同：4
> 
> 时间：2013-04-03T18:25:29.407
> 
> 标签：javascript, jquery, cdn

我从以下加载了一个 jquery cdn：

```
<head>
.
.
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head> 
```

然后在正文中，我有脚本的来源

```
<body>
.
.<script src="app.js"></script>
</body> 
```

这都是在本地，但是当我在浏览器中查看时，我在控制台中不断收到以下错误：

```
GET file://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
Uncaught ReferenceError: $ is not defined 
```

我假设这是说 jQuery 函数“$...”未定义，因为 CDN 的 GET 中存在错误，为什么会在本地发生这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T18:29:09.467

您实际上不是在 localhost ( `http://localhost`) 上运行，而是在本地文件系统 ( `file:///path/to/whatever.html`) 上运行。该协议与当然不存在的`//`链接一起复制。`file://ajax.googleapis.com`

您应该在您的计算机上设置一个服务器，以便您可以使用 http 协议访问一个*实际的本地主机。*它还有其他好处，因为当直接从文件系统加载页面时，浏览器在其他方面的行为也会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:29:32.843

您是否尝试过删除“src”属性开头的“//”而使用“http://”？由于这些斜杠，它可能会将“localhost”附加到 URL 的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T22:15:01.863

我在[如何使用 Bootstrap CDN？](https://stackoverflow.com/questions/17377277/how-to-use-bootstrap-cdn/21318735#21318735)而且，正如 Juhana 所说，问题是加载 jQuery 时缺少协议。

当您使用 http 或 https 时，无协议 CDN 可以工作，因为浏览器会将前缀添加到 jQuery URL 中。

但是当使用本地 html 文件时，缺少的协议将是`file:`并且浏览器将无法找到 jQuery，例如`file://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js`无法加载它。在这种情况下，您必须手动添加协议，如果您最终在线使用该页面，这将是一个遗憾，因为无协议的 URL 更好并且对缓存更友好（[http://encosia.com/cripple-the-google- cdns-caching-with-a-single-character/](http://encosia.com/cripple-the-google-cdns-caching-with-a-single-character/)）。

# jaxb2 - jaxb 继承，解组导致 nullpointerexception

> ID：15795085
> 
> 赞同：0
> 
> 时间：2013-04-03T18:25:38.903
> 
> 标签：jaxb2

我有一个 ElectivePolicy 抽象类，它有两个子类 PackagedElectivePolicy 和 SimpleElectivePolicy。为了映射这种继承关系，我使用了 typeAdapter 并且当我检查它时，unmarshal 方法被调用并且运行良好，但是在具有 Elective 策略对象的程序类中，该对象保持为空，你能帮我解决这个问题吗？谢谢

选修政策：

```
@XmlJavaTypeAdapter(ElectivePolicyAdapter.class)
    public abstract class ElectivePolicy {
} 
```

选修政策适配器：

```
public class ElectivePolicyAdapter extends XmlAdapter<ElectivePolicyAdapter.AdaptedElectivePolicy, ElectivePolicy>{

    @Override
    public ElectivePolicy unmarshal(AdaptedElectivePolicy adaptedElectivePolicy) throws Exception {

        if(adaptedElectivePolicy == null)
            return null;
        if(adaptedElectivePolicy.packages == null ){
            SimpleElectivePolicy sep = new SimpleElectivePolicy();
            return sep;
        }
        else{
            PackegedElectivePolicy pep = new PackegedElectivePolicy();
            pep.packages = adaptedElectivePolicy.packages;  
            return pep;
        }
    }

    @Override
    public AdaptedElectivePolicy marshal(ElectivePolicy v) throws Exception {
        if(v == null)
            return null;
        AdaptedElectivePolicy adaptedElectivePolicy = new AdaptedElectivePolicy();
        if(v instanceof PackegedElectivePolicy){
            PackegedElectivePolicy pep = (PackegedElectivePolicy) v;
            adaptedElectivePolicy.packages = pep.packages;
        }
        return adaptedElectivePolicy;
    }

    public static class AdaptedElectivePolicy{
        @XmlElement
        ArrayList<Package> packages;
    }
} 
```

SimpleElectivePolicy：

```
public class SimpleElectivePolicy extends ElectivePolicy{
} 
```

PackegedElectivePolicy：

```
public class PackegedElectivePolicy extends ElectivePolicy {

    ArrayList<Package> packages;
    public PackegedElectivePolicy(){
        packages = new ArrayList<Package>();
    }
    public ArrayList<Package> getPackages() {
        return packages;
    } 
```

程序：

```
@XmlRootElement(name = "program")
@XmlType(propOrder = {"policy" })
public class Program {
    @XmlElement(name = "ElectivePolicy")
    public ElectivePolicy getPolicy() {
        return policy;
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:51:22.403

我没有为策略添加 setter，这导致了 nullPointerException。

# javascript - 具有固定列和标题的纯 CSS/HTML/Javascript 2D 可滚动表格

> ID：15795087
> 
> 赞同：0
> 
> 时间：2013-04-03T18:25:39.747
> 
> 标签：javascript, css

我有一张大桌子，可能需要水平和垂直滚动。我已经看到了很多解决方案，但还没有找到一个不依赖 jscript 或类似的解决方案。看起来它应该是可行的，但我想出了问题。我想我可以得到标题行，但我在固定列上遇到了问题。我似乎无法让我的身体延伸到视口之外，而且我的代码在 IE8 和 Firefox 上呈现的方式非常不同。谁能给我任何指导？

```
<html>
<head>
<script type="text/javascript">

function windowwidth(){
    var myWidth = 0;
    if( typeof( window.innerWidth ) == 'number' ) {
        myWidth = window.innerWidth; 
    } else if( document.documentElement && ( document.documentElement.clientWidth ||document.documentElement.clientHeight ) ) {
        myWidth = document.documentElement.clientWidth; 
    } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
        myWidth = document.body.clientWidth; 
    }
    return myWidth ;
}

function windowheight(){
    var myHeight = 0;
    if( typeof( window.innerWidth ) == 'number' ) {
        myHeight = window.innerHeight;
    } else if( document.documentElement && ( document.documentElement.clientWidth ||document.documentElement.clientHeight ) ) {
        myHeight = document.documentElement.clientHeight;
    } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
        myHeight = document.body.clientHeight;
    }
    return myHeight ;
}

function pageloader(){

var leftwidth=document.getElementById('left').offsetWidth;
document.getElementById('right').style.marginLeft=leftwidth+'px';

}
</script>

<style>

div{ border:solid; }
.left{ position:absolute; }
.right{ position:float-left; margin-left:50px;}
table,td{ border:solid; }
td{ width:200px; }
tr{ height:50px; }

</style>

</head>
<body onload='pageloader();'>

<div name=left id=left class=left>
<table>
<tr><td>0</td></tr>
<tr><td>1</td></tr>
<tr><td>2</td></tr>
<tr><td>3</td></tr>
<tr><td>4</td></tr>
<tr><td>5</td></tr>
<tr><td>6</td></tr>
<tr><td>7</td></tr>
<tr><td>8</td></tr>
<tr><td>9</td></tr>
</table>
</div>
<div name=right id=right class=right>
<table>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:32:41.773

不过，我进一步研究并提出了这个解决方案。它工作得很好，甚至非常灵活。我认为这是我见过的最好的解决方案。如果您知道更好的东西或知道改进它的方法，请告诉我。

我发现唯一无法修复的是必须在顶部的垂直对齐。有谁知道一个体面的，简单的解决方案，使 IE8 尊重垂直对齐中心的 td 高度？

这是演示： http: [//maymay.de/demos/table.html](http://maymay.de/demos/table.html)

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">

function getStyle(oElm, strCssRule){
    var strValue = "";
    if(document.defaultView && document.defaultView.getComputedStyle){
        strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
    }
    else if(oElm.currentStyle){
        strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
            return p1.toUpperCase();
        });
        strValue = oElm.currentStyle[strCssRule];
    }
    return strValue;
}

function pageloader(){
// get sizes of boxes
var leftys=document.getElementById('left').getElementsByTagName('td');
var lefty=leftys[0];
var barys=document.getElementById('topbar').getElementsByTagName('td');
var bary=barys[0];
var boxys=document.getElementById('topleft').getElementsByTagName('td');
var boxy=boxys[0];
var leftwidth=lefty.offsetWidth;
var topheight=bary.offsetHeight;
var boxwidth=boxy.offsetWidth;
var boxheight=boxy.offsetHeight;
if(topheight>boxheight){
var newtopheight=topheight;
var newinnerheight=bary.clientHeight-parseInt(getStyle(bary, "padding-top"))-parseInt(getStyle(bary, "padding-bottom"));
}else{
var newtopheight=boxheight;
var newinnerheight=boxy.clientHeight-parseInt(getStyle(boxy, "padding-top"))-parseInt(getStyle(boxy, "padding-bottom"));
}
// set new width for left column
if(leftwidth>boxwidth){
var newleftwidth=leftwidth;
var newinnerwidth=lefty.clientWidth-parseInt(getStyle(lefty, "padding-left"))-parseInt(getStyle(lefty, "padding-right"));
}else{
var newleftwidth=boxwidth;
var newinnerwidth=boxy.clientWidth-parseInt(getStyle(boxy, "padding-left"))-parseInt(getStyle(boxy, "padding-right"));
}
// apply widths and heights and margins
// alert ("newleftwidth: "+newleftwidth+" newtopheight: "+newtopheight+"\nnewinnerheight: "+newinnerheight+" newinnerwidth: "+newinnerwidth);
boxy.style.height=newinnerheight+'px';
bary.style.height=newinnerheight+'px';
boxy.style.width=newinnerwidth+'px';
lefty.style.width=newinnerwidth+'px';
document.getElementById('left').style.marginTop=newtopheight+'px';
document.getElementById('topbar').style.marginLeft=newleftwidth+'px';
document.getElementById('right').style.marginLeft=newleftwidth+'px';
document.getElementById('right').style.marginTop=newtopheight+'px';

// fix column widths and rowheights
colsync();
rowsync();

calcright();
// alert ("leftwidth: "+newleftwidth+" topheight: "+newtopheight);

}

function scrolling(){
if (window.pageXoffset) {
var xscroll=window.pageXoffset;
} else if (document.body.scrollLeft) {
var xscroll=document.body.scrollLeft;
} else if (document.body.parentElement.scrollLeft) {
var xscroll=document.body.parentElement.scrollLeft;
} else if (document.body.parentNode.scrollLeft) {
var xscroll=document.body.parentNode.scrollLeft;
} else {
var xscroll=0;
}
if (window.pageYoffset) {
var yscroll=window.pageYOffset;
} else if (document.body.scrollTop) {
var yscroll=document.body.scrollTop;
} else if (document.body.parentElement.scrollTop) {
var yscroll=document.body.parentElement.scrollTop;
} else if (document.body.parentNode.scrollTop) {
var yscroll=document.body.parentNode.scrollTop;
} else {
var yscroll=0;
}
var leftwidth=document.getElementById('left').offsetWidth;
var topheight=document.getElementById('topbar').offsetHeight;
var newleftmargin=leftwidth-xscroll;
var newtopmargin=topheight-yscroll;
document.getElementById('left').style.top=-yscroll+'px';
document.getElementById('topbar').style.left=-xscroll+'px';
}

function info(){
}

function calcright(){
// resize page to shrink to fit
var rchildrenr = document.getElementById('right').getElementsByTagName('tr');
var rchildrend = rchildrenr[1].getElementsByTagName('td');
var rcols = rchildrend.length;
var rsum = 0;
for (i=0;i<rchildrend.length;i++) {
rsum = rchildrend[i].offsetWidth;
}
document.getElementById('topbar').style.width=rchildrenr[1].offsetWidth+'px';
document.getElementById('right').style.width=rchildrenr[1].offsetWidth+'px';
}

function colsync(){
var topcells = document.getElementById('topbar').getElementsByTagName('td');
var rightrows = document.getElementById('right').getElementsByTagName('tr');
var rightcells = rightrows[1].getElementsByTagName('td');
var mypads=0;
for (i=0;i<topcells.length;i++) {
if (topcells[i].offsetWidth>rightcells[i].offsetWidth) {
mypads=parseInt(getStyle(rightcells[i], "padding-left"))+parseInt(getStyle(rightcells[i], "padding-right"));
rightcells[i].style.width=topcells[i].clientWidth-mypads+'px';
}else{
mypads=parseInt(getStyle(topcells[i], "padding-left"))+parseInt(getStyle(topcells[i], "padding-right"));
topcells[i].style.width=rightcells[i].clientWidth-mypads+'px';
}
}
}

function rowsync(){
var leftcells = document.getElementById('left').getElementsByTagName('td');
var rightrows = document.getElementById('right').getElementsByTagName('tr');
var mypads=0;
for (i=0;i<leftcells.length;i++) {
rightcells=rightrows[i].getElementsByTagName('td');
if (leftcells[i].offsetHeight>rightcells[i].offsetHeight) {
mypads=parseInt(getStyle(rightcells[i], "padding-top"))+parseInt(getStyle(rightcells[i], "padding-bottom"));
rightcells[i].style.height=leftcells[i].clientHeight-mypads+'px';
// if (i==1) alert (leftcells[i].clientHeight);
}else{
mypads=parseInt(getStyle(leftcells[i], "padding-top"))+parseInt(getStyle(leftcells[i], "padding-bottom"));
leftcells[i].style.height=rightcells[i].clientHeight-mypads+'px';
// if (i==1) alert (leftcells[i].clientHeight);
}
}
}

window.onscroll = scrolling;

</script>

<style>
body{ margin:0; }
div{ border:none; }
.left{ position:fixed; background-color:White; z-index:0;}
.topleft{ position:fixed; background-color:White; z-index:1;}
.topbar{ position:fixed; background-color:White; width:1000000px; z-index:0;}
.right{ position:absolute; margin-left:50px; width:1000000px; z-index:-1;}
table{ border:none; border-spacing:0px;}
td{ border:solid; border-width:1px; width:5px; padding:2px; vertical-align:top; text-align:center;}
tr{ height:5px; }

</style>

</head>
<body onload='pageloader();'> 

<div name=topleft id=topleft class=topleft onclick=info(); >
<table id=tabletable>
<tr><td>Fixed Block</td></tr>
</table>
</div>

<div name=left id=left class=left>
<table>
<tr><td>Row-0</td></tr>
<tr><td>Row-1</td></tr>
<tr><td>Row-2</td></tr>
<tr><td>Row-3</td></tr>
<tr><td>Row-4</td></tr>
<tr><td>Row-5</td></tr>
<tr><td>Row-6</td></tr>
<tr><td>Row-7</td></tr>
<tr><td>Row-8</td></tr>
<tr><td>Row-9</td></tr>
</table>
</div>

<div name=topbar id=topbar class=topbar>
<table>
<tr>
<td>Cola</td>
<td>Colb</td>
<td>Colc</td>
<td>Cold</td>
<td>Cole</td>
<td>Colf</td>
<td>Colg</td>
<td>Colh</td>
<td>Coli</td>
<td>Colj</td>
</tr>
</table>
</div>

<div name=right id=right class=right>
<table>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
<tr>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
</tr>
<tr>
<td>20</td>
<td>21</td>
<td>22</td>
<td>23</td>
<td>24</td>
<td>25</td>
<td>26</td>
<td>27</td>
<td>28</td>
<td>29</td>
</tr>
<tr>
<td>30</td>
<td>31</td>
<td>32</td>
<td>33</td>
<td>34</td>
<td>35</td>
<td>36</td>
<td>37</td>
<td>38</td>
<td>39</td>
</tr>
<tr>
<td>40</td>
<td>41</td>
<td>42</td>
<td>43</td>
<td>44</td>
<td>45</td>
<td>46</td>
<td>47</td>
<td>48</td>
<td>49</td>
</tr>
<tr>
<td>50</td>
<td>51</td>
<td>52</td>
<td>53</td>
<td>54</td>
<td>55</td>
<td>56</td>
<td>57</td>
<td>58</td>
<td>59</td>
</tr>
<tr>
<td>60</td>
<td>61</td>
<td>62</td>
<td>63</td>
<td>64</td>
<td>65</td>
<td>66</td>
<td>67</td>
<td>68</td>
<td>69</td>
</tr>
<tr>
<td>70</td>
<td>71</td>
<td>72</td>
<td>73</td>
<td>74</td>
<td>75</td>
<td>76</td>
<td>77</td>
<td>78</td>
<td>79</td>
</tr>
<tr>
<td>80</td>
<td>81</td>
<td>82</td>
<td>83</td>
<td>84</td>
<td>85</td>
<td>86</td>
<td>87</td>
<td>88</td>
<td>89</td>
</tr>
<tr>
<td>90</td>
<td>91</td>
<td>92</td>
<td>93</td>
<td>94</td>
<td>95</td>
<td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
</tr>
</table>
</div>

</body>
</html> 
```

# javascript - 页面以 IE7 文档模式而不是 IE9 打开

> ID：15795088
> 
> 赞同：12
> 
> 时间：2013-04-03T18:25:48.633
> 
> 标签：javascript, internet-explorer-9, meta-tags, ie8-browser-mode, ie-developer-tools

我知道这里已经提出了这个问题的许多变体，但到目前为止，我还没有尝试过适合我的解决方案。

我希望我的网络应用程序在 IE 中以 IE9 文档模式打开。当我现在打开页面时，它总是在“Internet Explorer7 标准”中打开，而“Internet Explorer9 标准”被列为默认页面。我尝试了几种标签变体，包括

```
<meta http-equiv="X-UA-Compatible" value="IE=Edge"> 
```

和

```
<meta http-equiv="X-UA-Compatible" content="IE=7,IE=9"> 
```

（都在 head 标签之后）

我也尝试过条件语句，例如来自 SO 的这个例子：

```
<!--[if IE 7 ]> <body class="ie7> <![endif]-->
<!--[if IE 8 ]> <body class="ie8> <![endif]-->
<!--[if gt IE 8]><!--><body><!--<![endif]--> 
```

目前我正在使用：`<!DOCTYPE html>`

当然我可以在F12中手动切换模式，但是我想站点直接在IE9文档模式下打开（兼容模式总是默认为IE9兼容模式）。

目前我正在开发一个 Intranet 开发服务器；我读过这可能是一个因素？但我真的更喜欢客户端的任何解决方案，我可以添加到 JS/HTML .....

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-03T18:29:25.633

## 开发人员工具手动覆盖文档模式

如果 Internet Explorer 9 标准被列为页面默认值，这意味着您可能已通过工具手动将其更改为 Internet Explorer 7 标准。只需在 F12 开发人员工具本身中将其切换回 Internet Explorer 9 标准。

这些工具会记住您以另一种文档模式显示页面的明确请求，因此不会恢复为页面默认值。考虑 MSDN 中的以下内容：

> 首次加载网页时，F12 工具会确定默认的**文档模式**并选择适当的模式。括号中的**Page default**表示网页的默认模式。文档的当前模式旁边会出现一个复选标记。更改模式会导致网页刷新，并保持此模式，直到选择另一种模式或关闭浏览器。
> 
> —[浏览 F12 开发者工具界面](http://msdn.microsoft.com/en-us/library/hh968260%28v=vs.85%29.aspx) *（重点是原文）*

如果你想确认这个答案，打开一个新的浏览器窗口并导航到[http://stackoverflow.com](http://stackoverflow.com)。您应该在 F12 开发人员工具中注意到，它以“标准”的文档模式加载（如果您在 IE9 中，则为 IE9 标准）。

将 Stack Overflow 的文档模式切换为 IE7 标准并刷新浏览器。刷新后，您会发现浏览器停留在 Document Mode: Internet Explorer 7 Standards，并将 Internet Explorer 9 Standards 列为（页面默认）。

![在此处输入图像描述](https://i.stack.imgur.com/b2A5T.png)

## 兼容性视图设置

根据 MSDN 资源[How Internet Explorer Chooses Between Document Modes](http://msdn.microsoft.com/en-us/library/ff405803%28v=vs.85%29.aspx)，唯一的其他潜在原因是兼容性视图设置。

在 Internet Explorer 9 中，单击工具，然后单击兼容性视图设置。您可以在此处找到 Intranet 站点的设置。在 Internet Explorer 10（桌面模式）中，您可能必须按下`Alt`才能显示“工具”菜单项。

![在此处输入图像描述](https://i.imgur.com/Hq62AAS.png?1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-17T06:19:18.810

只需输入以下代码，您的 IE 浏览器就会默认在定义的兼容视图中打开。

```
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

如果要将 IE8 作为默认兼容性视图，可以将“IE=EmulateIE9”更改为“IE=EmulateIE8”。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T16:34:13.873

就我而言，问题是我的公司发行的笔记本电脑上应用了组策略，该策略明确设置了我用来在兼容模式下呈现的域。我通过检查 IE 控制台 ( `F12`) 发现了这一点：

[![在此处输入图像描述](https://i.stack.imgur.com/OVzH2.png)](https://i.stack.imgur.com/OVzH2.png)

我通过在我的机器上运行以下命令验证了这一点，该命令在我的机器上生成了应用组策略的报告：

```
gpresult /h C:\gpresult.html 
```

该报告有一个这样的部分，其中包括我正在处理的网站的根域：

[![在此处输入图像描述](https://i.stack.imgur.com/lEjOr.png)](https://i.stack.imgur.com/lEjOr.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-11T06:17:47.993

您也可以放置以下代码示例。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

这将以默认浏览器模式加载您的应用程序。并特别确保将此元标记作为第一个标记包含在 head 标记之后。否则将无法正常工作。

# backbone.js - 通过主干路由处理视图选项

> ID：15795090
> 
> 赞同：3
> 
> 时间：2013-04-03T18:25:48.973
> 
> 标签：backbone.js, marionette

我已经开发大型 Backbone Marionette 应用程序大约一年了。一直具有挑战性的一件事是传递路线中视图状态的选项。视图状态选项的示例是活动选项卡、临时选择的项目或页面上需要可链接的排序选项。

在更新到 Backbone 0.9.9+ 之前，我发现处理这些情况的最佳方法是将查询参数添加到路由的末尾。我的路由器看起来像这样：

```
"/questions/:id/"         : "showQuestions"
"/questions/:id/?*params" : "showQuestionsWithFilters" 
```

这将匹配如下内容：

```
"/questions/1/?search=help&sort=name" 
```

我发现这样做的真正优势是路由器将根据 url 参数的存在匹配不同的路由。清除所有url参数，然后触发导航，实际上会导致路由改变。

在 Backbone 0.9.2 之后，路由器不再识别 url 参数。在上面的示例中，无论是否存在 url 参数，都会触发“showQuestions”方法。这个 GH 问题的普遍共识（[https://github.com/documentcloud/backbone/issues/891](https://github.com/documentcloud/backbone/issues/891)）和 Backbone 贡献者的意见似乎是 url 参数根本不应该在客户端使用，而是全部需要传递给视图的信息应存储在主 url 路径（[https://github.com/documentcloud/backbone/issues/2440](https://github.com/documentcloud/backbone/issues/2440)）中。

使用此方法的路由器可能类似于：

```
"/questions/:id/(search/:term)(sort/:type/)" 
```

这种方法的问题是每个可选参数都需要显式添加到路由器，并且所有参数必须相应地排序，否则它们将不匹配。因为路由和它的选项之间没有轮廓线，并且顺序是由路由器决定的，所以动态添加或编辑选项似乎是不必要的困难。

在这一点上，我被困在保持我当前的 url 结构和试图找出一种让它工作的方法或迁移到后一种方法之间。在我朝任何一个方向走得太远之前，我想知道是否对类似用例的最佳实践还有其他意见。你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:34:14.133

还有一条路线称为 splat。来自[http://backbonejs.org/#Router](http://backbonejs.org/#Router)：

> 路由可以包含参数部分，:param，它匹配斜杠之间的单个 URL 组件；和 splat 部分 *splat，可以匹配任意数量的 URL 组件。

在我的应用程序中，我使用了一个必需的参数，然后是任意数量的可选“过滤器”：

```
var BrowseRouter = Marionette.AppRouter.extend({
  appRoutes: {
    'browse/:page(/*filters)': 'browse'
  }
}); 
```

然后，我的 URL 被格式化为一系列由斜杠分隔的键/值对：`#/browse/3/type:image/sort:date/count:24`。

在我的控制器中，我向函数传递了两个参数：`page`和`filters`. `page`是一个简单的值（“3”）。`filters`是可选的，是一个较长的字符串，包含页面值之后的所有内容（“type:image/sort:date/count:2”）。

我有一个“explode”下划线混合来获取该字符串并将其转换为一个对象。

```
_.mixin({
  /*
   * Take a formatted string (from the URL) and convert it into an object of
   * key/val pairs. If the val looks like an array, make it so.
   * _.explode("count:105/sort:date/type:image,video")
   * => { count: 105, sort: date, type: ['image','video']}
   */
  explode: function(str) {
    var result = {};
    if(!str){
        return result;
    }
    _.each(str.split('/'), function(element, index, list){
      if(element){
        var param = element.split(':');
        var key = param[0];
        var val = param[1];
        if (val.indexOf(",") !== -1) {
          val = val.split(',');
        }
        result[key] = val;
      }
    });
    return result;
  }
}); 
```

# java - 表单验证错误后的 Spring MVC（既不是 BindingResult 也不是 bean 名称的普通目标对象）

> ID：15795097
> 
> 赞同：2
> 
> 时间：2013-04-03T18:26:17.810
> 
> 标签：java, spring, jsp, spring-mvc

我遇到了一个模型属性的问题，该属性在表单验证后似乎“消失”：

```
public class QuestionController {
    //...
    @RequestMapping(value="/get", method=RequestMethod.GET)
    public String prepareVoterBean(Model model, @RequestParam String voterID) {
        ...
        VoterBean questions = service.getQuestionBean(voterID);
        model.addAttribute("questions", questions);
        return "questionPage";
    }

    @RequestMapping(method=RequestMethod.POST)
    public String processSubmit(@Valid VoterBean questions, BindingResult result) {
        if (result.hasErrors()) {
            logger.info("QuestionController encountered form errors ");
            return "questionPage";
        }
        return "redirect:/ballot/get";
       } 
```

以下是 questionPage.jsp，其中 BindingResult 和 bean 名称（“问题”）的普通目标对象都没有出现：

```
<form:form modelAttribute="questions" method="post">
    <fieldset>      
        <legend>Security Questions</legend>
        <p>
            <form:label for="birthDate" path="birthDate" cssErrorClass="error"> <fmt:message key="questions.birthDate"/>: </form:label></br>
            <form:input path="birthDate" /><form:errors path="birthDate"/>
        </p>
        //... 
```

使用 HTTP 获取请求可以很好地呈现 questionPage，但是当我提交带有验证错误的表单时，从而触发 processSubmit() 返回到 questionPage，我有 BindingResult 错误。我对自己做错了什么感到非常困惑，因为我的问题 bean 在第一次返回时必须可供 questionPage 使用，但是在带有验证错误的 HTTP POST 请求之后页面突然找不到 bean . 非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:33:28.797

如果您希望 bean 自动神奇地回到地图上，您需要通过注释方法参数来告诉 Spring 使用地图中的 bean 作为绑定目标：

```
@RequestMapping(method=RequestMethod.POST)
public String processSubmit(@Valid @ModelAttribute("questions") VoterBean questions, BindingResult result) {
    if (result.hasErrors()) {
        logger.info("QuestionController encountered form errors ");
        return "questionPage";
    }
    return "redirect:/ballot/get";
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T18:44:03.793

我遇到了完全相同的问题并添加：@ModelAttribute("account") 我的 JSP 中的帐户是：

```
 <sf:form method="post" action="${pageContext.request.contextPath}/register" commandName="account"> 
```

修复了验证失败的错误信息问题。现在验证失败时，您返回原始表单页面，并查看验证错误消息。感谢您对阿尔夫的帮助。

如果有兴趣，这是我的控制器：

```
@RequestMapping("/createaccount")
public String createAccount(Model model) {

    model.addAttribute("account", new Identity());

    return "createaccount";
}

@RequestMapping(value="/register", method=RequestMethod.POST)
public String doRegister(Model model, @Valid @ModelAttribute("account") Identity account, BindingResult result) {

    if(result.hasErrors()) {
        System.out.println("failed");
        return "createaccount";
    }

    //offersService.create(offer);
    System.out.println("success");

    return "accountSuccess";
} 
```

# php - php不能chmod文件夹

> ID：15795100
> 
> 赞同：0
> 
> 时间：2013-04-03T18:26:22.453
> 
> 标签：php, chmod, folder-permissions

我正在尝试为我的主机上的文件夹授予 777 权限。我使用以下命令：`chmod("./test",0777);`

我知道它不起作用，因为我执行了一个更改目录中文件的脚本。
如果我手动（在 FTP 中）授予权限，它就可以工作。为什么 chmod 不起作用？

# macos - 为什么特定 repo 的 git status 返回相对于根目录而不是当前目录的路径？

> ID：15795105
> 
> 赞同：2
> 
> 时间：2013-04-03T18:26:36.973
> 
> 标签：macos, git

当从特定仓库中的子目录使用 git 时，文件的路径将相对于根目录返回，如下所示

```
cd $REPO_ROOT/subdir
git status
...
#   modified ../subdir/file.txt 
```

这种行为是最近的，它过去常常返回`file.txt`，就像我的其他 git repos 一样，它弄乱了其他功能，`git blame file.txt`从子目录返回每一行作为`Not Yet committed`，以获得我需要使用的实际输出`../subdir/file.txt`。这也弄乱了 vim git 插件，所以我很生气。

我已经跑`git gc`了，但问题仍然存在。

编辑：添加 git 版本和配置

```
git version 1.7.4.4

user.name=...
user.email=...
github.user=...
color.branch=auto
color.diff=auto
color.status=auto
color.branch.current=yellow reverse
color.branch.local=yellow
color.branch.remote=green
color.diff.meta=yellow bold
color.diff.frag=magenta bold
color.diff.old=red
color.diff.new=green
color.status.added=green
color.status.changed=red
color.status.untracked=cyan

core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true

#remotes and branches 

status.relativepaths=true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:53:44.647

这是一个配置问题：

```
cd repo
git config status.relativePaths true 
```

或全局：

```
git config --global status.relativePaths true 
```

进一步阅读：[https ://www.kernel.org/pub/software/scm/git/docs/git-status.html](https://www.kernel.org/pub/software/scm/git/docs/git-status.html)

# c - 减去两个无符号 32 位整数并分配给 64 位有符号整数

> ID：15795107
> 
> 赞同：1
> 
> 时间：2013-04-03T18:26:41.080
> 
> 标签：c, syntax, integer-arithmetic

目标是得到 (-1) 作为最终结果。

```
#include <stdio.h>
#include <stdint.h>

int main()
{

    uint32_t us32Var1, us32Var2;
    int32_t s32Var1;
    int64_t s64Var1;

    us32Var1 = 0;
    us32Var2 = 1;
    printf("(1) us32Var1 = %u(0x%08x), us32Var2 = %u(0x%08x)\n", us32Var1, us32Var1, us32Var2, us32Var2);

    s32Var1 = us32Var1 - us32Var2; //0xffffffff (-1)
    printf("(2) s32Var1 = us32Var1 - us32Var2, s32Var1 = %d(0x%08x)\n", s32Var1, s32Var1);

    s64Var1 = us32Var1 - us32Var2;  //0x00000000ffffffff  (expect it's -1, but the result > 0)
    printf("(3) s64Var1 = us32Var1 - us32Var2, s64Var1 = %ld(0x%016lx)\n", s64Var1, s64Var1);

    s64Var1 = (int64_t)(us32Var1 - us32Var2);  //0x00000000ffffffff  (expect it's -1, but the result > 0)
    printf("(4) s64Var1 = (int64_t)(us32Var1 - us32Var2), s64Var1 = %ld(0x%016lx)\n", s64Var1, s64Var1);

    s64Var1 = (int64_t)us32Var1 - us32Var2;  //0xffffffffffffffff  (-1)
    printf("(5) s64Var1 = (int64_t)us32Var1 - us32Var2, s64Var1 = %ld(0x%016lx)\n", s64Var1, s64Var1);

    us32Var1 = -1; //us32Var1 = 0xffffffff, UINT32_MAX
    s64Var1 = (int64_t)us32Var1; //0x00000000ffffffff  (expect it's -1, but the result > 0)
    printf("(6) s64Var1 = (int64_t)us32Var1, s64Var1 = %ld(0x%016lx)\n", s64Var1, s64Var1);

    s64Var1 = (int32_t)us32Var1; //0xffffffffffffffff  (-1 !)
    printf("(7) s64Var1 = (int32_t)us32Var1, s64Var1 = %ld(0x%016lx)\n", s64Var1, s64Var1);
    return 0;
} 
```

对于上面的程序（每行都有编号），有人可以解释一下吗

*   为什么（2）按预期工作，而不是（3）？ALU 的算术或微步是什么？
*   (4) 和 (5) 有什么区别
*   为什么（7）有效而（6）失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:40:28.997

(2) 有效，但可能不是您想的那样。`us32Var1-us32Var1`将产生无符号值`0xFFFFFFFFU`（模算术）和赋值`s32Var1`将其转换为有符号的 32 位值，因此`-1`. 在 (3) 中，赋值也将其转换为 64 位有符号值，并且大到足以包含`0xFFFFFFFFU`，因此它保持为正。(4) 和 (5) 之间的区别在于，在 (4) 中，减法发生在 32 位中，然后转换为 64 位。在 (5) 中，一个操作数首先转换为 64 位，因此减法为 64 位，因此另一个操作数也隐式转换为 64 位。(6) 与 (2) 类似，`-1`32 位的有符号值在赋值中被转换为无符号的 32 位，`us32Var1`因此结果`0xFFFFFFFFU`很容易满足`s64Var1`，所以它保持正数。在 (7)`0xFFFFFFFFU`中首先转换为有符号的 32 位，因此是`-1`，然后将其分配给有符号的 64 位，因此导致`-1`。

我希望这有帮助。

因此，在下面回答您的问题。在（3）中减法仍然是在 32 位无符号中进行的，所以结果是`0xFFFFFFFFU`因为`-1`不能用无符号表示。这个 32 位无符号结果转换为有符号 64 位，可以精确表示`0xFFFFFFFFU`，所以就是结果。

对于 (7)，赋值确实进行了符号扩展，因为右手边是 32 位并且是负数。请注意，该变量`us32Var1`（当然）包含一个正值，但它被转换为无法表示的 32 位有符号值，`0xFFFFFFFFU`因此它被强制转换为`-1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:41:40.823

*   *为什么（2）按预期工作，而不是（3）？ALU 的算术或微步是什么？*

嗯，它按*我*预期的方式工作。计算无符号[32]结果，然后将无符号值转换为有符号值，因此它自然是零扩展的。

*   *(4) 和 (5) 有什么区别？*

(4) 与我上面描述的相同，并且 (5) 最终计算 0LL - 1LL，碰巧它产生 ~0LL。它还能带来什么其他结果？请注意，在机器内部，有符号数和无符号数之间没有太大区别可能会有所帮助。完全相同的 ALU 用于有符号和无符号操作。除了少数例外，有**符号**与**无符号**的区别是在解释结果和决定是否进行符号扩展时做出的，而不是在实际执行算术 ALU 运算时做出的区别。

*   *为什么（7）有效而（6）失败？*

我不确定我会说 (6) *failed*，确切地说。您将无符号值转换为有符号值，因此很自然地对其进行了零扩展。在 (7) 中，您将带符号的[32]值转换为 64 位，因此自然地它被符号扩展了。

# css - 如何让 Internet Explorer 更好地显示图像

> ID：15795110
> 
> 赞同：1
> 
> 时间：2013-04-03T18:26:46.983
> 
> 标签：css, image, internet-explorer-9

左边是 chrome，右边是 IE9，同样的图像，同样的 html，但其中一个看起来完全是垃圾。如何让 IE 不搞砸我的图像？

![图像显示问题](https://i.stack.imgur.com/PbUHK.png)

这是页面中显示的实际图像，以防万一

![用于创建上面屏幕截图的实际图像](https://i.stack.imgur.com/siPDW.gif)

这是html：

```
<div id="logo-body" class="x-panel-body x-panel-body-default x-panel-body-default" style="height: 80px; width: 950px; left: 0px; top: 0px;">
<img src="/static/img/logo.gif" height="40"><a id="logout" href="/viewer/logout">Logout</a>
<div id="logo-clearEl" class="x-clear" role="presentation">
</div>
</div> 
```

这是img标签的css

```
#logo-body img {
    margin-top: 20px;
    margin-left: 10px;
}
.x-border-box, .x-border-box * {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}
fieldset, img {
    border: 0;
} 
```

和父 div 的 css

```
#logo-body {
  border: none;
}
#logo, #logo-body {
  background-color: #002d56;
  background-image: -moz-radial-gradient(50% 50%, cover, #008dc6, #002d56 68%);
  background-image: -webkit-radial-gradient(50% 50%, cover, #008dc6, #002d56 68%);
  background-image: -o-radial-gradient(50% 50%, cover, #008dc6, #002d56 68%);
  background-image: -ms-radial-gradient(50% 50%, cover, #008dc6, #002d56 68%);
  background-image: radial-gradient(50% 50%, cover, #008dc6, #002d56 68%);
}
.x-panel-body-default {
  background: white;
  border-color: #99bce8;
  color: black;
  border-width: 1px;
  border-style: solid;
}
.x-panel-body-default {
  background: white;
  border-color: #99bce8;
  color: black;
  border-width: 1px;
  border-style: solid;
}
.x-panel-body {
  overflow: hidden;
  position: relative;
  font-size: 12px;
}
.x-border-box, .x-border-box * {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
html, body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, textarea, p, blockquote, th, td {
  margin: 0;
  padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:24:57.103

它可能是图像本身，您可以尝试将其保存为 PNG 而不是 GIF。

> 对于相同类型，PNG 通常会产生比 GIF 文件大小更小的文件更好看的图像...[更多](http://www.digitalfamily.com/tutorials/whats-the-best-image-format-for-the-web/)

或者重新创建图像并使用不同的文件格式。像这样： ![标识](https://i.stack.imgur.com/xbEug.png)

例如：http: [//jsfiddle.net/Wy8Y4/8/](http://jsfiddle.net/Wy8Y4/8/)

```
<img src="http://i.stack.imgur.com/xbEug.png" height="40"><a id="logout" href="/viewer/logout">Logout</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:38:49.277

对此的简单回答是你不能。IE几乎在所有方面都只是一个劣质浏览器，它表现得越来越多，从图像渲染到调试，再到对css的支持，应有尽有。

从 GIF 转换为 PNG 没有任何作用，创建一个全新的徽标确实解决了问题，但并没有真正回答问题。总有一天 IE 将不复存在（我希望如此），我们将不再花更多的时间来弥补它的不足，而不是创造完整的产品。

对于那些帮助创建 IE 的人来说，这是对你和你所有后代的诅咒。

# java - 查询以在 1 行代码中获取电子邮件、联系人姓名和电话号码

> ID：15795111
> 
> 赞同：0
> 
> 时间：2013-04-03T18:26:53.990
> 
> 标签：java, android, xml, eclipse

nullim 使用 Cursor cursor = getContentResolver() .query(contactUri, projection, null,null,null); 获取点击联系人的数量。是否可以使用此查询获取电子邮件、号码和姓名。同时？我们可以这样做吗？如下所示？

```
 String[] projection = {Phone.NUMBER};
             String[] projection1 = {Email.DATA};
             String[] projection2 = {Contacts.DISPLAY_NAME};
                 Cursor cursor = getContentResolver().
                 query(contactUri, projection, null,projection1,projection2);
             cursor.moveToFirst();
                 int column = cursor.getColumnIndex(Phone.NUMBER);
             int column1 = cursor.getColumnIndex(Email.DATA);
             int column2= cursor.getColumnIndex(Contacts.DISPLAY_NAME);
             String number = cursor.getString(column);
             String email1 = cursor.getString(column1);
             String name1 = cursor.getString(column2) 
```

这可能吗？

现在这正确吗？

```
 String[] projection = {Phone.NUMBER, Email.ADDRESS, Contacts.DISPLAY_NAME};
   Cursor cursor = getContentResolver().
             query(contactUri, projection, null,null,null);
         cursor.moveToFirst();
             int column = cursor.getColumnIndex(Phone.NUMBER);
         int column1 = cursor.getColumnIndex(Email.ADDRESS);
         int column2= cursor.getColumnIndex(Contacts.DISPLAY_NAME);
         String number = cursor.getString(column);
         String email1 = cursor.getString(column1);
         String name1 = cursor.getString(column2)

             editText3 = (EditText) findViewById(R.id.editText3);
             editText17 = (EditText) findViewById(R.id.editText17);
             editText3.setText(number); 
             editText17.setText(email1); 
```

只有电话号码在文本框中设置edittext3和edittext17都有手机号码？我做错了什么？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:29:56.410

您可以在一个数组中放置多个值：

```
String[] projection = {Phone.NUMBER, Email.DATA, Contacts.DISPLAY_NAME}; 
```

* * *

全部一起：

```
String[] projection = {Phone.NUMBER, Email.DATA, Contacts.DISPLAY_NAME};
Cursor cursor = getContentResolver().query(contactUri, projection, null, null, null);

int column = cursor.getColumnIndex(Phone.NUMBER);
int column1 = cursor.getColumnIndex(Email.DATA);
int column2= cursor.getColumnIndex(Contacts.DISPLAY_NAME);
if(cursor.moveToFirst()) { // Check if data exists
     String number = cursor.getString(column);
     String email1 = cursor.getString(column1);
     String name1 = cursor.getString(column2)
} 
```

# ruby-on-rails - 使用设计确认页面显示用户密码

> ID：15795120
> 
> 赞同：4
> 
> 时间：2013-04-03T18:27:18.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我试图在设计邮件发送的确认页面中显示用户密码。确认页面是默认的

```
Welcome test0@test.com!

You can confirm your account email through the link below:

Confirm my account 
```

然而，我希望拥有

```
Welcome test0@test.com!

Your password is currently DASADSADS

You can confirm your account email through the link below:

Confirm my account 
```

如何访问视图中的用户对象？我是否需要用自定义的邮件控制器覆盖邮件控制器？如果是这样，我如何判断当前邮件程序的方法（尝试查看文档但找不到任何线索）？

我注意到视图中使用了@email 和@resource。我可以使用其中任何一个来访问未散列形式的当前密码吗？

请注意，我正在手动发送此电子邮件`user.find(1).send_confirmation_instructions`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:54:12.837

尽管可以这样做，但我*强烈*警告不要这样做。散列密码是专门使用的，因此密码不能轻易重新创建。将原始密码传回给用户将导致它以纯文本形式发回，这有点违背了整个目的。此外，用户不应该已经知道他们的密码（毕竟他们确实输入了两次）？！？

为此，您需要在注册`create`操作中捕获原始（未散列的）密码并在该点发送电子邮件（传递密码）。您可以通过覆盖该`sign_up`方法来做到这一点 - 您可以在初始化程序中做到这一点：

```
class Devise::RegistrationsController < DeviseController
  def sign_up(resource_name, resource)
    sign_in(resource_name, resource)
    resource.unhashed_password = resource_params[:password]
    resource.send_confirmation_instructions
  end
end 
```

或者，您可以从中派生一个新控制器`Devise::RegistrationsController`并将此覆盖代码放在那里（推荐的方法 - 但同样，这整个操作并不是真正推荐的）。您需要添加`unhashed_password`访问器才能使其工作：

```
class User < ActiveRecord::Base
  attr_accessor :unhashed_password
end 
```

然后您可以更新您的确认视图 (at `app/views/devise/mailer/confirmation_instructions.html.erb`) 以包含以下内容：

```
<p>Your password is currently <%= @resource.unhashed_password %></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:53:42.530

以加密形式设计保存密码：您可以使用以下方法对其进行解密，

生成新的迁移：

```
$ rails g migration AddLegacyPasswordToUser legacy_password:boolean
      invoke  active_record
      create    db/migrate/20120508083355_add_legacy_password_to_users.rb
$ rake db:migrate 
```

在以下代码中使用 legacy_password 方法可以解密您的密码：

```
class User < ActiveRecord::Base

...

  def valid_password?(password)
    if self.legacy_password?
      # Use Devise's secure_compare to avoid timing attacks
      if Devise.secure_compare(self.encrypted_password, User.legacy_password(password))

        self.password = password
        self.password_confirmation = password
        self.legacy_password = false
        self.save!

      else
        return false
      end
    end

    super(password)
  end

  # Put your legacy password hashing method here
  def self.legacy_password(password)
    return Digest::MD5.hexdigest("#{password}-salty-herring");
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T06:36:01.797

您可以只使用 request.request_parameters[:user][:password] 来获取创建或更新操作的纯文本密码。

# java - 两次按钮点击之间的时间

> ID：15795121
> 
> 赞同：1
> 
> 时间：2013-04-03T18:27:24.563
> 
> 标签：java, android, button, time

我有两个按钮，我想计算两次点击之间的时间。我知道该怎么做一次：

```
 Long starttime = System.currentTimeMillis();
 Long endtime = System.currentTimeMillis();
 Long differenz = ((endtime-starttime) / 1000); 
```

现在，我希望在第二次单击时，计数再次从零开始，直到单击第一个按钮。然后，测量第一次和第二次按钮点击之间的时间，依此类推。

也许这是一个非常简单的事情，但我不知道该怎么做......

**编辑：**好的，我试着说清楚：

我有按钮 A 和 B。我希望用户交替按下按钮 A 和 B。当用户单击按钮 A 时，我想要一个计时器来测量单击 B 之前的时间。直到这里，我都清楚了。现在我希望测量点击 B 到点击 A 之间的时间，始终在 A 和 B 之间交替。

我不知道在点击 B 之后要做什么，直到 A 再次测量时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:34:47.047

班级成员

```
boolean mButtonAClicked;
boolean mButtonBClicked;

long mStartTime = 0; 
```

单击按钮 A 时

```
if (mButtonAClicked)
{
    // button A is clicked again, stop application
}
else
{
    mButtonAClicked = true;
    mButtonBClicked = false;
    if (mStartTime != 0) // Button B was clicked
    {
         Long endtime = System.currentTimeMillis();
         Long differenz = ((endtime-starttime) / 1000);
         mStartTime = System.currentTimeMillis();
    }
} 
```

当按钮 B 被点击时

```
if (mButtonBClicked)
{
    // button B is clicked again, stop application
}
else
{
    mButtonBClicked = true;
    mButtonAClicked = false;
    if (mStartTime != 0) // Button A was clicked
    {
         Long endtime = System.currentTimeMillis();
         Long differenz = ((endtime-starttime) / 1000);
         mStartTime = System.currentTimeMillis();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:55:59.493

创建一个字段以保留上次按下每个字段。

```
long aMillisPressed;
long bMillisPressed; 
```

单击按钮 A 时：

```
aMillisPressed = System.currentTimeMillis();
long timeElapsedSinceBPressed = aMillisPressed - bMillisPressed; 
```

当 B 被点击时：

```
bMillisPressed = System.currentTimeMillis();
long timeElapsedSinceAPressed = bMillisPressed - aMillisPressed; 
```

# android - 为什么我的滚动视图中的按钮没有填满宽度？

> ID：15795122
> 
> 赞同：1
> 
> 时间：2013-04-03T18:27:25.537
> 
> 标签：android, xml

我很难弄清楚它，并且模拟器的缓慢增加了它。有人可以在这里给我一些指示..

我打算做的是推动这些盒子的宽度，通常发生的情况是按钮只是包裹起来并在右侧留下一个空白空间。这是我一直在修复的xml代码......

```
 <ScrollView
     android:layout_width="fill_parent"
     android:layout_height="150dp" >

      <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="1" >

        <TableRow>

            <Button
                android:id="@+id/bOne"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Radio Buttons" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/bTwo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="List View" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/bThree"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/bFour"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" />
        </TableRow>

        <TableRow>

            <Button
                android:id="@+id/bFive"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Button" />
        </TableRow>
    </TableLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T18:48:18.370

在表格布局中，您有 android:stretchColumns="1" 列从 0 开始索引，因此请删除 strechcolumns 或将其值替换为 0。

# .net - 防止在滚动查看器中滚动的自定义控件画布 - Windows 运行时

> ID：15795124
> 
> 赞同：0
> 
> 时间：2013-04-03T18:27:31.007
> 
> 标签：.net, c#-4.0, windows-runtime, custom-controls

我有一个**ScrollViewer**，其中包含一个**StackPanel**（垂直），其中包含我设计的一些非常宽的自定义控件。ScrollViewer允许用户水平**滚动**自定义控件。

当我为模拟器使用鼠标输入时，我得到一个滚动条，并且工作正常。当我为模拟器使用触摸输入时，我可以通过拖动自定义控件来滚动，但仅限于某些区域。如果我尝试从自定义控件中的**Canvas**元素开始触摸进行拖动，则它不起作用。但是，如果我从该画布外部（在边距空间等）开始拖动触摸，它会按照您期望的方式工作。

画布中有一些操作事件处理程序，用于自定义控件中的各种功能。这些是否有可能窃取输入以使**ScrollViewer**无法完成工作？如果是这种情况，我能做些什么让他们向上报告**ScrollViewer**的输入吗？还是我在错误的地方调查？

我可以按要求发布代码。

**编辑：**

经过仔细点击进一步调查后，我发现了一些东西。我的宽控件内部有一些（其他）自定义控件和一堆行。当我开始在一条线上拖动时，它会按预期拖动。所有其他空间都充满了第二个自定义控件（它非常紧凑）。事实证明我的自定义控件正在窃取输入。我在第二个自定义控件中取消选中主画布上的所有交互类型，并将*操作*设置为缩放而不是系统。将这些设置回默认值可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:37:49.687

经过仔细点击进一步调查后，我发现了一些东西。我的宽控件内部有一些（其他）自定义控件和一堆行。当我开始在一条线上拖动时，它会按预期拖动。所有其他空间都充满了第二个自定义控件（它非常紧凑）。事实证明我的自定义控件正在窃取输入。

**重要部分：**

我在第二个自定义控件中取消选中主画布上的所有交互类型，并将*操作*设置为缩放而不是系统（这可能是窃取输入的部分）。将这些设置回默认值可以解决问题。

PS：我觉得很傻

# c++ - 我可以在 for 循环的 init 表达式中有不同的类型吗？

> ID：15795125
> 
> 赞同：0
> 
> 时间：2013-04-03T18:27:34.610
> 
> 标签：c++, loops, types, for-loop, c++11

以下代码将无法编译：

```
#include <iostream>

int main(){

    for (int i = 0, double j = 0; i < 10; ++i, j+=.1){
        std::cout << i << " " << j << '\n';
    }

    return 0;
} 
```

是否可以初始化两种不同的类型，或者我需要创建一个结构/对/等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T18:30:20.120

不。

但是您可以在那里定义一个匿名结构：

```
for (struct { int i; double j; } x = {0,0};  x.i < 10; ++x.i, x.j+=.1)
{
    std::cout << x.i << " " << x.j << '\n';
} 
```

见初始化部分：

```
struct { int i; double j; } x = {0,0}; 
```

它定义了一个匿名结构，然后创建一个对象`x`并用`{0,0}`它初始化它的成员`i`和`j`with `0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:30:44.207

不可能，但有办法：

```
double var1;
int var2;
for (var2 = 0,var1 = 0.0; var2 < 12; var2++){} 
```

如果你想限制 f 和 i 的范围，然后将它们括在 {} 中，就像

```
{
    double var1;
    int var2;
    for (var2 = 0,var1 = 0.0; var2 < 12; var2++){}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:29:13.967

不，你不能。您可以有多个变量，但它们必须是相同的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:30:39.293

它们必须是相同的类型，但您可以使用结构来绕过它。

```
for (struct {int j; char i;} loop = {0, 'e'}; loop.i < 33; ++loop.j, ++loop.i)
{
    std::cout << loop.i << '\n';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T18:34:33.567

可以做以下

```
#include<cstdlib>
#include<iostream>

int main(int argc, char *argv[]){

    int i; double j;
    for(i = 0, j = 0; i < 10; ++i, j+= .1){
        std::cout << i << " " << j << '\n';
    }

    return EXIT_SUCCESS;
} 
```

# javascript - 在 attr 更改上的 knockout.js 变量更新

> ID：15795127
> 
> 赞同：0
> 
> 时间：2013-04-03T18:27:55.683
> 
> 标签：javascript, jquery-ui, knockout.js

我有一个 jQuery UI 滑块。当用户使用滑块时，滑块会更新滑块的 div 标签中的一个 attr 变量

```
$(".slider").each(function() {
var value = parseInt($(this).attr('data-init-value'), 10);
var amin = parseInt($(this).attr('data-min'), 10);
var amax = parseInt($(this).attr('data-max'), 10);
console.log(value, " ", amin, " ", amax)
$(this).empty().slider({
    value : value,
    min : amin,
    max : amax,
    range : "min",
    animate : true,
    slide : function(event, ui) {
        $(this).attr('data-value', ui.value);
    }
}); 
```

});

html 中的示例 div 标签：

```
<div class="slider" data-min="200" data-max="600" data-init-value="300" data-bind="attr: { 'data-value': someValue }"></div> 
```

当滑块更改时，数据值会在 中更新，`<div>`但 js 变量不会更改。（在其他琐碎的绑定案例中——比如文本：——它有效。）

如何绑定这个动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:35:44.890

我建议你反过来做。将滑块的值绑定到 viewmodel 上的 observable 属性，然后将属性绑定到该 observable。

然后，您始终可以直接通过视图模型访问滑块的最新值，并且 UI 也将保持最新。

此外，如果您想订阅该 observable 的更新事件，您也可以绑定到该事件。这是[文档](http://knockoutjs.com/documentation/observables.html)中的一个示例：

```
myViewModel.personName.subscribe(function(newValue) {
    alert("The person's new name is " + newValue);
}); 
```

最后，这也可能是以下内容的重复：[识别 KnockoutJS 中的属性更改事件？](https://stackoverflow.com/questions/13013761/identify-the-attribute-change-event-in-knockoutjs)

**-- 更新回答评论**

给定以下视图模型：

```
var viewModel = {
    mySliderValue: ko.observable(0)
}; 
```

然后，在您的滑块回调中，您可以执行以下操作：

```
viewModel.mySliderValue(value); 
```

然后，在您看来，具有以下`attr`绑定：

```
data-bind="attr: { 'data-value': mySliderValue }" 
```

...当可观察对象更改其值时，将导致 UI 更新。

*PS。我建议您不再删除此线程，因为我的答案开始越来越偏离我链接到的那个。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:47:48.220

方法是注册一个事件处理程序。

```
o.utils.registerEventHandler(element, "slidechange", function (event, ui) {
   var observable = valueAccessor();
   observable(ui.value);
}); 
```

完整示例的 JSFiddle：http: [//jsfiddle.net/snLk8/3/](http://jsfiddle.net/snLk8/3/)

# java - 如何拆分这两个对象字符串以便可以放入数据库

> ID：15795132
> 
> 赞同：0
> 
> 时间：2013-04-03T18:28:06.117
> 
> 标签：java, android, string, object, split

```
while (pCur.moveToNext()) {
     String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
     String pon = name ;
     System.out.println("phone" + phone + name);
     listItems.add(pon + phone) ;
     adapter.notifyDataSetChanged();
} 
```

我从某人的联系人中获取电话号码和姓名。我必须对每个对象进行字符串化以将其传递给我的列表视图（多项检查）。现在我选择了多个选项，我想再次将两者分开（联系人姓名和与之关联的电话号码），以便我可以将它们放入数据库中的单独列中。一旦它是数组适配器中的字符串，我该如何拆分两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:43:32.913

在姓名和电话之间使用字符串 inb 并使用该字符串再次拆分它。

**代码示例**

```
while (pCur.moveToNext()) {
     String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
     String pon = name ;
     System.out.println("phone" + phone + name);
/* Following code changed here...Hoping that "!@#$" doesnt exists in pon or phone data. Or you can replace it with some other string which will not come in these objects. */
     listItems.add(pon +"!@#$"+ phone) ;
     adapter.notifyDataSetChanged();
} 
```

如何检索和拆分：示例方法

```
ArrayList<String> listItems = new ArrayList<String>();
        listItems.add("Joseph!@#$325625123");
        listItems.add("John!@#$5214252142");
        for (String strData : listItems)
        {
            int index = strData.indexOf("!@#$");
            if (index > -1)
            {
                String name = strData.substring(0, index);
                String phone = strData.substring(index + 4);// 4 is the length of the substitute string
                System.out.println(name + ", " + phone);
                // Code to insert name and phone database
            }

        } 
```

上述方法的结果如下

约瑟夫，325625123

约翰，5214252142

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:35:05.993

> 我如何拆分这两个对象字符串，以便我可以放入数据库

出色地。可能在您的 ListView 中，您将数据格式化为（您也可以确保特定格式以便将来更轻松地工作）。

```
John 23459395 
```

现在，当您从 中选择项目时`ListView`，您可以访问它们并将它们保存到临时列表中。然后您可以使用**split()**方法拆分 List 中的每个项目。

```
List<String> selectedItems = new ArrayList<String>();
// selection from ListView
String[] temp;
for (String s: selectedItems) {
   temp = s.split(" "); // or other regex based on format of source
   // insert into db
} 
```

但这取决于来源的格式。

## 更新：

您可以改进的实际方法。看，现在您正在从中获取姓名和电话号码`Cursor`

我建议您创建自己的类，例如称为`User`具有属性名称、电话号码等的类。然后创建`ArrayList<User>()`并将其设置为 ListAdapter 的数据源。

如果您是否使用自己实现的适配器子类，我现在不知道。如果没有，您需要覆盖`toString()`User 类中的方法以获取 User 的正确字符串表示形式。

# facebook - 使用 Graph API 获取（识别）对评论的回复

> ID：15795133
> 
> 赞同：7
> 
> 时间：2013-04-03T18:28:06.973
> 
> 标签：facebook, facebook-graph-api, facebook-comments

使用 Facebook 上新的“回复”“评论”功能，我注意到对评论的回复与评论相同。但我想知道是否有办法区分这两者？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-13T17:28:12.073

您首先必须`July Breaking Changes`从您的应用高级设置中启用

然后将`fields`参数与`comments`图形 API 一起使用，并包含`parent.field(id)`带有 的列以及`filter`带有值的参数`stream`。*最终结果：*

```
{POST_ID}/comments?filter=stream&fields=parent.fields(id),message,from,likes 
```

这应该返回评论和回复，`parent`其中包含回复所属的评论 id 的元素

- 更新

为了更好地排列回复，您可以使用以下内容将回复与您可以包含`comments.summary(true)`在 fields 参数中的实际评论数组合并

```
{POST_ID}/comments?limit=0&filter=toplevel&fields=comments.summary(true),message,from,likes 
```

*过滤器参数是可选的*

有关字段的更多信息：http: [//developers.facebook.com/docs/reference/api/Comment/](http://developers.facebook.com/docs/reference/api/Comment/)

如果您想在 FQL 中执行此操作，请查看此帖子的评论[http://developers.facebook.com/blog/post/2013/04/03/new-apis-for-comment-replies/](http://developers.facebook.com/blog/post/2013/04/03/new-apis-for-comment-replies/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T12:50:25.087

是的。您可以在 Graph API 中查询每个`comment`对象以获取其`parent`字段的值。如果有问题的评论是回复，则该`parent`字段的值将是对父评论的引用。否则，不返回任何值。

参考这里：[https ://developers.facebook.com/docs/reference/api/Comment/](https://developers.facebook.com/docs/reference/api/Comment/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-10T08:33:14.643

您可以通过这种方式获得评论回复。

```
/{{POST_ID}}/?fields=comments{comments}&access_token={{ACCESS_TOKEN}} 
```

您可以通过在评论中嵌套字段来获取评论回复的任何子信息（来自，id），如下所示：

```
/{{POST_ID}}/?fields=comments{comments,from,id}&access_token={{ACCESS_TOKEN}} 
```

类似的帖子在这里： [https ://stackoverflow.com/a/37743410/6001533](https://stackoverflow.com/a/37743410/6001533)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-11T06:23:16.413

如果您正在收听关于“提要”网络钩子的评论，您应该检查是否：

```
entry[0][changes][0][value][post_id] === entry[0][changes][0][value][parent_id] 
```

这对于顶级（新）评论是正确的，对于评论的回复是错误的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-21T05:19:08.097

为了背负@sujit 的回答，我接受了他的回答，并且在一个来自提要的电话中，您可以一次获得整个提要、评论和对评论的回复以及与这些评论和回复相关的图像。

这是代码

```
https://graph.facebook.com/$get_facebook/feed?access_token=$facebook_accesstoken&client_id=$facebook_appid&client_secret=$facebook_appsecret&metadata=1&fields=id,status_type,created_time,from,message,comments{comments{attachment,from,id,message},from,id,message,attachment},picture,link,icon 
```

# wpf - 如何使按钮内容在WPF中垂直显示？

> ID：15795136
> 
> 赞同：8
> 
> 时间：2013-04-03T18:28:17.730
> 
> 标签：wpf, button, user-interface

最近我安装了 Visual Studio 2010，我发现侧边栏按钮的内容是垂直的，如下图所示

[![VS2010竖排文字截图](https://i.stack.imgur.com/XmubO.jpg)](https://i.stack.imgur.com/XmubO.jpg)

我的问题是：有没有一种简单的方法可以在 WPF 中实现这种效果？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T18:32:41.507

非常容易，使用`LayoutTransform`和`RotateTransform`：

```
<ToggleButton Content="Members Info" HorizontalAlignment="Right" 
              Click="btn_MembersInfo_Click">         
    <ToggleButton.LayoutTransform>
        <RotateTransform Angle="-90" />
</ToggleButton.LayoutTransform>
</ToggleButton> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T18:37:10.140

将需要调整宽度高度和中心

```
<Button Content="RotatedButton" Width="200" Height="100">
    <Button.RenderTransform>
        <RotateTransform CenterX="0" CenterY="0" Angle="90" />
    </Button.RenderTransform>
</Button> 
```

# python - 如何使用 python 和 tkinter 在笔记本小部件中插入滚动条和表单？

> ID：15795137
> 
> 赞同：6
> 
> 时间：2013-04-03T18:28:20.160
> 
> 标签：python, tkinter, scrollbar

我对python真的很陌生，目前我正在尝试使用tkinter设计一个表单。我一直试图在笔记本中插入滚动条和表单，因为我没有找到问题的答案，而且很简单“如何在笔记本 tkinter 小部件中插入滚动条和表单？”...如您所见，这对您来说很简单，但对于像我这样的新手来说却不是！

但是，这是我到目前为止所做的，幸运的是它确实显示了滚动条，但是当我尝试将表单插入笔记本时它崩溃了！

注意：我的 python 版本是带有 EPD_free 7.3-2（32 位）的 Python 2.7.3

```
import Tkinter
from Tkinter import * 
from ttk import *   
import tkMessageBox 
import ttk  
import Tkinter as tk 

root = Tk()
root.title("Model_A")
root.resizable(0,0)

# start of Notebook (multiple tabs)
notebook = ttk.Notebook(root)
notebook.pack(fill=BOTH, expand=True)
notebook.pressed_index = None

#Child Frames
ContainerOne = Frame(notebook)
ContainerOne.pack(fill=BOTH, expand=True)
ContainerTwo = Frame(notebook)
ContainerTwo.pack(fill=BOTH, expand=True)
ContainerThree = Frame(notebook)
ContainerThree.pack(fill=BOTH, expand=True)
ContainerFour = Tkinter.Frame(notebook)
ContainerFour.pack(fill=BOTH, expand=True)

#Create the pages
notebook.add(ContainerOne, text='Mode A')
notebook.add(ContainerTwo, text='Mode B')
notebook.add(ContainerThree, text='Mode C')
notebook.add(ContainerFour, text='Mode D')

canvas = Canvas(ContainerOne, width=200, height=400)
scroll = Scrollbar(ContainerOne, command=canvas.yview)
canvas.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)
canvas = Canvas(ContainerTwo, width=200, height=400)
scroll = Scrollbar(ContainerTwo, command=canvas.yview)
canvas.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)

canvas = Canvas(ContainerThree, width=200, height=400)
scroll = Scrollbar(ContainerThree, command=canvas.yview)
canvas.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)
canvas = Canvas(ContainerFour, width=200, height=400)
scroll = Scrollbar(ContainerFour, command=canvas.yview)
canvas.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)
frame = Frame(canvas, width=200, height=1000)
canvas.create_window(100, 500, window=frame)

frameOne = None  

def defocus(event):
    event.widget.master.focus_set()    
    if __name__ == '__main__':
        ContainerOne= Tkinter.Label(notebook, text=" 1\. Enter Main Details: ", font=("fixedsys", "16","bold italic"))
        frameOne.grid(row=2, columnspan=7, sticky='W', \
                 padx=5, pady=5, ipadx=5, ipady=5)

#Component Selection
componentComb= ttk.Combobox(ContainerOne, width="19")
componentComb = Combobox(ContainerOne, state="readonly", values=("A", "B", "C"))
componentComb.grid(column=4, row=4, columnspan="5", sticky="nswe")
componentComb.set("Main Selection")

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T09:18:38.893

如果您查看[Notebook 小部件的选项](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/ttk-Notebook.html)，您会发现既不存在`yview`也不`yscrollcommand`存在。此外，Frame 小部件也不能滚动。

您可以做的是创建一个带有滚动条的 Canvas 小部件`frameOne`，然后使用[`create_window`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.create_window-method).

```
root = Tk()
root.resizable(0,0)
notebook = ttk.Notebook(root)
notebook.pack(fill=BOTH, expand=True)
notebook.pressed_index = None
container = Frame(notebook)
container.pack(fill=BOTH, expand=True)
notebook.add(container, text='Mode A')

canvas = Canvas(container, width=200, height=400)
scroll = Scrollbar(container, command=canvas.yview)
canvas.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)

frame = Frame(canvas, bg='white', width=200, height=1000)
canvas.create_window(100, 500, window=frame)

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T10:43:54.477

我已经解决了使用 python 和 tkinter 将表单插入笔记本以及滚动条时遇到的问题。我要感谢@A.Rodas 的帮助。

这是我的代码，希望对你有用！

```
import Tkinter
from Tkinter import *
from ttk import *
import tkMessageBox
import math 
import ttk 
import Tkinter as tk

def defocus(event):
    event.widget.master.focus_set()

# start of GUI code
root = Tk()
root.title("Model A")
root.resizable(0,0)

# start of Notebook (multiple tabs)
notebook = ttk.Notebook(root)
notebook.pack(fill=BOTH, expand=True)
notebook.pressed_index = None

# Child frames
ContainerOne = Frame(notebook)
ContainerOne.pack(fill=BOTH, expand=True)
ContainerTwo = Frame(notebook)
ContainerTwo.pack(fill=BOTH, expand=True)

# Create the pages
notebook.add(ContainerOne, text='Mode A')
notebook.add(ContainerTwo, text='Mode B')

canvas1 = Canvas(ContainerOne, width=1200, height=450)
scroll = Scrollbar(ContainerOne, command=canvas1.yview)
canvas1.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas1.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)
canvas2 = Canvas(ContainerTwo, width=1200, height=450)
scroll = Scrollbar(ContainerTwo, command=canvas2.yview)
canvas2.config(yscrollcommand=scroll.set, scrollregion=(0,0,100,1000))
canvas2.pack(side=LEFT, fill=BOTH, expand=True)
scroll.pack(side=RIGHT, fill=Y)

frameOne = Frame(canvas1, width=800, height=450)
canvas1.create_window(250, 125, window=frameOne)

frameTwo = Frame(canvas2, width=800, height=450)
canvas2.create_window(200, 140, window=frameTwo)

# Main Frame

#Close Application Button
def quit(root):
    root.destroy()

ttk.Button(root, text="Close Application", command=lambda root=root:quit(root)).pack()

if __name__ == '__main__':
    #Main Part
    stepOne = Tkinter.LabelFrame(frameOne, text=" 1\. Enter Main Details: ", font=("fixedsys", "16","bold italic"))
    stepOne.grid(row=0, columnspan=5, sticky='nsew', padx=5, pady=5, ipadx=5, ipady=5)
    stepTwo = Tkinter.LabelFrame(frameOne, text=" 2\. Calculate AP : ", font=("fixedsys", "16","bold italic"))
    stepTwo.grid(row=2, columnspan=7, sticky='WE', padx=5, pady=5, ipadx=5, ipady=5)

# First Step Starts 

# Component Selection
componentComb= ttk.Combobox(stepOne, width="19")
componentComb = Combobox(stepOne, state="readonly", values=("CDA", "VHS", "DVD"))
componentComb.grid(column=4, row=0, columnspan="5", sticky="nswe")
componentComb.set("Component Selection")

# Temperature Selection
tempComb = ttk.Combobox(stepOne, width="12")
tempComb = Combobox(stepOne, state="readonly", values=("-40", "-30", "-20","-10", "0",))
tempComb.grid(column=0, row=2, columnspan="2", sticky="w")
tempComb.set("Temperature Selection")

# Second Step Starts
inEncLbl = Tkinter.Label(stepTwo, text="Oxide:")
inEncLbl.grid(row=2, column=0, sticky='E', padx=5, pady=2)

inEncTxt = Tkinter.Entry(stepTwo, width=6)
inEncTxt.grid(row=2, column=1, sticky='w', pady=2)

outEncLbl = Tkinter.Label(stepTwo, text="Density Rate (DR):")
outEncLbl.grid(row=2, column=5, padx=5, pady=2)

outEncTxt = Tkinter.Entry(stepTwo, width=6)
outEncTxt.grid(row=2, column=7,sticky='w', pady=2)

#End Code
root.mainloop() 
```

# php - Drupal 7 WHERE 使用 OR 和 AND

> ID：15795140
> 
> 赞同：0
> 
> 时间：2013-04-03T18:28:23.450
> 
> 标签：php, mysql, drupal-7

编写自定义模块尝试查找评论。我有一个SQL语句如下：

```
 $client_comment = db_query("SELECT comment.subject AS comment_subject, 
comment.cid AS cid, 
comment.nid AS comment_nid, 
comment.created AS comment_created
FROM 
{comment} comment
INNER JOIN {node} node_comment ON comment.nid = node_comment.nid
INNER JOIN {field_data_field_associated_client} associated_client ON comment.cid = associated_client.entity_id
WHERE (( (associated_client.field_associated_client_nid = '$nid') 
OR (comment.nid = '$nid') ) 
AND (comment.status <> '0') 
AND (node_comment.status = '1') ) 
ORDER BY comment_created DESC
LIMIT 10 OFFSET 0"); 
```

理想情况下，这应该返回以下内容：

![结果的屏幕截图](https://i.stack.imgur.com/edkVK.png) 但是，我得到以下信息：

![结果的屏幕截图 2](https://i.stack.imgur.com/whvYV.png)

出于某种原因，它只返回“associated_client”结果而不是“comment.nid”结果。这是我想开始工作的完整声明。我知道这是一个 SMH 时刻，但任何帮助都会很棒。

* * *

根据请求，这是我用来循环返回数组的代码：

```
foreach($client_comment as $item) {
        print_r($item);
        print '<br /><br />';
    } 
```

* * *

这是 2 个查询，它们分别将所有数据打印到屏幕上。我想将这两个查询合并为 1 个查询：

```
 $client_comment = db_query("SELECT comment.subject AS comment_subject, comment.cid AS cid, comment.nid AS comment_nid, comment.created AS comment_created
FROM 
{comment} comment
INNER JOIN {node} node_comment ON comment.nid = node_comment.nid
WHERE (( (comment.status <> '0') AND (node_comment.status = '1') AND (comment.nid = '$nid')  ))
ORDER BY comment_created DESC
LIMIT 10 OFFSET 0");
    // Get the comments associated TO the client from Caregiver node.
    $client_associated_comment = db_query("SELECT comment.subject AS comment_subject, comment.cid AS cid, comment.nid AS comment_nid, comment.created AS comment_created
FROM 
{comment} comment
INNER JOIN {node} node_comment ON comment.nid = node_comment.nid
INNER JOIN {field_data_field_associated_client} associated_client ON comment.cid = associated_client.entity_id
WHERE (( (comment.status <> '0') AND (node_comment.status = '1') AND (associated_client.field_associated_client_nid = '$nid')  ))
ORDER BY comment_created DESC
LIMIT 10 OFFSET 0");
    foreach($client_comment as $item) {
        $client_comment_array[] = $item;
    }
    foreach ($client_associated_comment as $item) {
        $client_comment_array[] = $item;
    }
    foreach($client_comment_array as $item) {
        print_r($item);
        print '<br /><br />';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:10:52.173

好吧，我通过使用`LEFT JOIN`而不是解决了它`INNER JOIN`。结果查询：

```
$client_comment = db_query("SELECT comment.subject AS comment_subject, 
comment.cid AS cid, 
comment.nid AS comment_nid, 
comment.created AS comment_created
FROM 
{comment} comment
INNER JOIN {node} node_comment ON comment.nid = node_comment.nid
LEFT JOIN {field_data_field_associated_client} associated_client ON comment.cid = associated_client.entity_id
WHERE (( (associated_client.field_associated_client_nid = '$nid') 
OR (comment.nid = '$nid') ) 
AND (comment.status <> '0') 
AND (node_comment.status = '1') ) 
ORDER BY comment_created DESC
LIMIT 10 OFFSET 0");
    foreach($client_comment as $item) {
        print_r($item);
        print '<br /><br />';
    } 
```

# javascript - 页面上的 JS 可以检测用户是否安装了工具栏？

> ID：15795141
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:28:23.963
> 
> 标签：javascript, html, malware-detection

如果网站访问者安装了广告软件工具栏，它会在访问者访问我的页面时执行弹出窗口。

有没有办法在我的页面上运行 Javascript 来检测此活动并停止它？或者，有没有办法检测用户并将其重定向到带有删除说明的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:38:13.733

理论上，是的。

这完全取决于工具栏是否公开了 javascript 可以访问的公共变量。例如，Chrome 的 MyToolbar 可以暴露对象，`mt` 然后你可以做一个

```
if ( typeof mt !== 'undefined' ) { // they have it installed. 
```

您需要研究工具栏，并确定它们是否公开这些。

# javascript - 有没有办法阻止CKEditor 4过滤我的锚标签属性？

> ID：15795142
> 
> 赞同：3
> 
> 时间：2013-04-03T18:28:24.543
> 
> 标签：javascript, html, ckeditor, wysiwyg

CKEditor 4 属性过滤正在从放入编辑器的锚标记中删除任何出现的“href”。我有一个插件，它创建包含一些“自定义”属性的链接。一个链接看起来像这样：

```
<a href="#" document-href="abc123">Some Link</a> 
```

当我调用 getData() 时，CKEditor 以这种形式返回链接：

```
<a href="#" document->Some Link</a> 
```

有没有办法指示 CKEditor 停止过滤链接属性？有没有人碰巧知道这个正则表达式在源代码中的位置，所以我可以修复它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:02:10.630

我刚刚在 CKEditor 4.1 上检查了这个链接 - 输出是：

```
<p><a href="#">Some Link</a></p> 
```

从 4.1开始，`document-href`由于它现在在编辑器中被允许，所以被剥离。您必须添加[高级内容过滤器](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)规则 - 例如：

```
config.extraAllowedContent = 'a[!href,document-href]'; 
```

然后它将在 4.1 中工作。在 4.1 之前它应该默认工作，无需设置任何东西。

**但是**CKEditor 的 HTML 解析器中有一个错误。它不能正确解析`sth-href`链接上的属性，因此结果是一个`sth-`属性。

现在，我建议您将此属性的名称更改为`data-url`或其他任何名称，但不要`href`结束。

我创建了一张票：[https ://dev.ckeditor.com/ticket/10298](https://dev.ckeditor.com/ticket/10298)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:13:23.320

尝试在配置文件中设置它。

```
 config.allowedContent = true; 
```

如果它在插入时被过滤，那么你可以试试这个：

```
//var yourAnchor = '<a href="#" document-href="abc123">Some Link</a>';

editor.insertHtml(yourAnchor, 'unfiltered_html'); 
```

# c++ - 序列化字节数组中最语义正确和类型安全的构造？(c++11)

> ID：15795144
> 
> 赞同：0
> 
> 时间：2013-04-03T18:28:30.443
> 
> 标签：c++, c++11, constructor, semantics, type-safety

考虑下面的 c++11 类，它表示应该可以从字节数组构造的 IPv4 标头结构，而不管字节顺序如何。

```
#include <arpa/inet.h>
#include <netinet/in.h>

namespace Net {
  using addr_t = ::in_addr_t;
  #pragma pack(push, 1)
  struct ip_header_t {
    uint8_t  ver_ihl;
    uint8_t  tos;
    uint16_t total_length;
    uint16_t id;
    uint16_t flags_fo;
    uint8_t  ttl;
    uint8_t  protocol;
    uint16_t checksum;
    addr_t   src_addr;
    addr_t   dst_addr;

    ip_header_t( const uint8_t* bytes, const bool ntoh = false ) {
      auto o = (ip_header_t&)*bytes;
      ver_ihl      = o.ver_ihl;
      tos          = o.tos;
      ttl          = o.ttl;
      protocol     = o.protocol;
      total_length = ntoh? ntohs(o.total_length) : o.total_length;
      id           = ntoh? ntohs(o.id) : o.id;
      flags_fo     = ntoh? ntohs(o.flags_fo) : o.flags_fo;
      checksum     = ntoh? ntohs(o.checksum) : o.checksum;
      src_addr     = ntoh? ntohl(o.src_addr) : o.src_addr;
      dst_addr     = ntoh? ntohl(o.dst_addr) : o.dst_addr;
    };
  };
  #pragma pack(pop)
} 
```

我担心接受字节数组可能不是最安全或*语义上最正确*的方法。将数组转换为结构本身似乎是一种非常 C-ish 的方法，缺乏类型安全（更不用说边界检查）。要求调用者担心这一点并要求对实例进行 const 引用会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:46:57.740

一种表示原始二进制数据的类型，具有某种假定的布局：

```
template<typename T, size_t order>
struct serial_tag {}; 
```

介绍一些代表磁盘上预期数据类型和布局的名称：

```
typedef serial_tag<uint8_t , 0> ver_ihl_ser;
typedef serial_tag<uint8_t , 1> tos_ser;
typedef serial_tag<uint16_t, 2> total_length_ser;
    ...
typedef serial_tag<addr_t  , 9> dst_addr_ser; 
```

一组serial_tags，然后可以由其他代码操作：

```
template<typename... tags>
struct serial_pack {}; 
```

编写采用 serial_pack 的代码，并确保每个序数都在使用中，没有间隙。

编写采用反序列化迭代器和 serial_tag 的代码，并在从 serial_tag 生成数据的同时推进反序列化迭代器。这应该处理字节序

目标是以适合元编程的方式描述数据的原始数据布局，然后使用此布局信息将数据加载到 C++ 结构中。

这是一个流式读取操作，其中反序列化迭代器（或范围）知道它是否有大小限制，并且知道您是否按顺序正确读取元素（至少在调试中）。

我不知道这是否值得，但它确实解决了您的担忧。

这种方法的一个缺点是它违反了 DRY，因为内存中的布局理论上可以用作描述序列化后的原始字节布局的一种方式。相反，我们必须维护一组完全不同的数据来表示它。作为一个优点，这意味着我们的 in-C++ 布局不必完全复制二进制布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:23:47.070

在我看来，最好的解决方案是提供一个可以处理字节顺序转换并依赖调用者进行转换的复制构造函数。

像这样：

```
/* copy constructor: */
ip_header_t( const ip_header_t& src, const bool ntoh = false )
  : ver_ihl(src.ver_ihl),
    tos(src.tos),
    ttl(src.ttl),
    protocol(src.protocol) {
  total_length = ntoh? ntohs(src.total_length) : src.total_length;
  id           = ntoh? ntohs(src.id)           : src.id;
  flags_fo     = ntoh? ntohs(src.flags_fo)     : src.flags_fo;
  checksum     = ntoh? ntohs(src.checksum)     : src.checksum;
  src_addr     = ntoh? ntohl(src.src_addr)     : src.src_addr;
  dst_addr     = ntoh? ntohl(src.dst_addr)     : src.dst_addr;
};

/* client code using byte array in network-order */
auto ip_header = Net::ip_header_t((Net::ip_header_t&)*(byte_array), true); 
```

我也不是 100% 确定我最喜欢这个解决方案。考虑到字节顺序交换与对象的构造并不严​​格相关，创建一个执行此操作的非成员函数可能会更好。关注字段对齐和排序也可能不是该类的正当责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:36:09.077

将字节数组转换为此类绝对不是正确的做法-正如您所提到的，不同系统上的字节顺序可能不同（这就是`ntohs`构造函数中存在的原因）。

你把你的类放在哪里完全取决于你的实体的角色和职责。没有看到设计，就无法判断。

# html - 如何让文本在图像旁边而不是在图像下方换行？

> ID：15795145
> 
> 赞同：1
> 
> 时间：2013-04-03T18:28:36.130
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用 twitter 引导程序，它也是响应式设计。当我缩小浏览器（Chrome）或在我的 iPhone 浏览器中查看以下代码时，文本全部显示在一行上。但是，当我将字体大小增加到 20px 时，文本会在图像下方换行。我该怎么做才能使文本（当它长 2 行时）出现在图标/图像的右侧而不是包裹在其下方？

```
 <div class = 'row'>
                <img src = "http://a286.phobos.apple.com/us/r1000/113/Purple2/v4/a2/b1/40/a2b14050-c4be-4243-2cad-7dc1fcaec726/mzl.vkophohs.png" style = "width:60px;">
                   <span style = "font-size:18px;">The Hobbit: Kingdoms of Middle-earth<br /></span>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:49:26.450

我会和 Nik 做同样的事情，但有点不同：

[http://jsfiddle.net/gkxz4/](http://jsfiddle.net/gkxz4/)

```
<div class = 'row'>
<div class="col_image">    
<img src = "http://a286.phobos.apple.com/us/r1000/113/Purple2/v4/a2/b1/40/a2b14050-c4be-4243-2cad-7dc1fcaec726/mzl.vkophohs.png" style = "width:60px;">
</div>
<div class="col_text">The Hobbit: Kingdoms of Middle-earth</div>
</div>

.row { width:400px; overflow:hidden; }
.col_image { float:left; width:60px; margin:0 20px 0 0; }
.col_text {float:left; width:320px; font-size:18px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:34:09.450

```
<div class="row">
<img src="http://a286.phobos.apple.com/us/r1000/113/Purple2/v4/a2/b1/40/a2b14050-c4be-4243-2cad-7dc1fcaec726/mzl.vkophohs.png" style="width:60px;float:left;">
<div style="float:left;">The Hobbit: Kingdoms of Middle-earth<br/></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:45:03.103

```
<div class = 'row'>
 <img src = "http://a286.phobos.apple.com/us/r1000/113/Purple2/v4/a2/b1/40/a2b14050-c4be-4243-2cad-7dc1fcaec726/mzl.vkophohs.png" style = "width:60px; float:left; padding-bottom:30px;">
<span style = "font-size:20px; vertical-align:middle; line-height: 30px; ">The Hobbit: Kingdoms of Middle-earth<br /></span>
</div> 
```

# android - 读取对象 SharedPreferences android json

> ID：15795149
> 
> 赞同：1
> 
> 时间：2013-04-03T18:28:48.873
> 
> 标签：android, json, arraylist, sharedpreferences

我在通过 SharedPreferences 读取对象时遇到了一个小问题。当我写东西时，它成功地写了它，但是当我尝试检索它时，它给出了一个 Json 语法异常。我正在传递/检索一个 ArrayList。我的对象类正在实现 Serializable。错误 ：

IllegalStageException 应为 String 但为 BEGIN_ARRAY

这是我的代码：

```
public static boolean saveObject(String objKey, Serializable dataObj, Context con) {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(con);
    SharedPreferences.Editor editor = prefs.edit();
    Gson gson = new Gson();
    String json = gson.toJson(dataObj);
    editor.putString(objKey, json);
    return editor.commit();
}

public static Object getObject(String objKey, Context con) {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(con);
    Gson gson = new Gson();
    String json = prefs.getString(objKey, "");
    Object o = gson.fromJson(json, objKey.getClass());
    return o;
} 
```

我该怎么做：

```
 if(ReadWrite.isCustomStringExistInLocal("levels", this)){
        System.out.println("Exists");
        levels = (ArrayList<Level>) ReadWrite.getObject("levels", getApplicationContext());

    }
    else{
        System.out.println("New");
        levels = new ArrayList<Level>();
        int teller =0;
        for(int i=1;i<=10;i++){
            levels.add(new Level(0, 0, teller));
            teller+=6;
        }

        ReadWrite.saveObject("levels", levels, this);

    } 
```

# xml - XSLT - 删除所有属性

> ID：15795152
> 
> 赞同：2
> 
> 时间：2013-04-03T18:28:56.697
> 
> 标签：xml, xslt, xslt-1.0

很直接的问题。没有找到确切的答案。

希望看到没有属性轴的 XSLT 1.0，如果可能的话也希望看到其他的（我正在使用 python 的 lxml 库，它并没有真正赶上那些东西）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:09:14.560

您的解决方案应该可以正常工作，但还有一种更简单的方法 - 只需使用不包含属性的标识模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:28:56.697

我在写问题时自己想通了。仍然发布它，因为我找不到它：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*" name="identity">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@*"/>

</xsl:stylesheet> 
```

等待其他答案/评论，以防它不完美。

# css - 将鼠标悬停在文本上时使用默认光标。没事吧？

> ID：15795157
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:29:13.290
> 
> 标签：css, cursor

所以这可能是一个强迫症问题。将鼠标悬停在网页中的文本上时，鼠标光标会变为 I 形。我讨厌那个！所以我将使用 CSS 在所有非链接元素上使用默认光标。

这样做有什么问题吗？我是否搞砸了任何可访问性或其他内容？

我认为用鼠标在整个页面上移动而不用不断地改变你的形状会更好一些。我还认为它有助于使链接更加突出，因为当光标发生变化时，它是一个链接。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:32:53.727

您所做的更改完全是可视化的，不会影响网站的“可访问性”……但您可能会像人们对 target="_blank" 生气一样惹恼人们。

# extjs - Sencha Touch 2：是否可以实现视图对象的继承？

> ID：15795167
> 
> 赞同：1
> 
> 时间：2013-04-03T18:29:37.207
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我需要关于以下方面的一些建议。

**背景：**

我正在开发 Sencha 2 MVC 应用程序。在我的应用程序中，我在几个屏幕上有一个工具栏。目前，我已经为工具栏创建了一个类，然后在所需视图上使用 xType 添加工具栏作为 xType：'customizedToolbar'。但不是那样，我想声明一个定义此工具栏的父类，然后从所有其他子类扩展此父类，这样我就可以避免每次使用 xType 添加工具栏。

例如，下面是示例应用程序，

Ext.application({ app:'testmixin', autoCreateViewport: true,

```
 launch: function()    {

// Parent Class
        Ext.define('MyParentClass', {
            extend: Ext.Panel,
                mixinConfig: {
                        id: 'myMixinIdentifier'
                         },
                config: {
                // Is there a way that the items defined in this class will be added in the child class         
                items:[

                    {
                        xtype : 'emailfield',
                        name : 'name',
                        id : 'userName',
                        placeHolder : 'Email',

                    },

                    ]

                    },

                });

                // Main Class
    Ext.define('MyMainClass', {
    // Benefit of using mixins is that you can add to your class with one
    // or more mixins, rather than by extending another class
            extend: Ext.Panel,
            mixins: {
                myMixinIdentifier: 'MyParentClass'
            },

        constructor: function(config) {
            this.callParent(arguments);
            this.sample();
            },
        });

    var panel = Ext.create('MyMainClass');
            panel.test('abc');
            panel.test1('abc');
            Ext.Viewport.add(panel);

}

    }); 
```

是否可以在父类中添加一个项目，它会通过继承自动添加到子类中？

谢谢 Gendaful

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:53:37.307

以下代码不使用混合，而是使用基本类继承：

```
Ext.Loader.setConfig({
    enabled : true
});

Ext.application({
    name : ('SF' || 'SenchaFiddle'),

    launch : function() {

        Ext.define('PanelWithToolbar', {
            extend: 'Ext.Container',
            xtype: 'panelwithtoolbar',

            config: {
                items: [{
                    xtype: 'toolbar',
                    docked: 'top'
                }]
            }
        });

        Ext.define('PanelA', {
            extend: 'PanelWithToolbar',
            xtype: 'panela'
        });

        Ext.define('PanelB', {
            extend: 'PanelWithToolbar',
            xtype: 'panelb'
        });

        Ext.create('Ext.TabPanel', {
            fullscreen: true,
            tabBarPosition: 'bottom',

            defaults: {
                styleHtmlContent: true
            },

            items: [
                {
                    xtype: 'panela',
                    title: 'Home',
                    iconCls: 'home',
                    html: 'Home Screen'
                },
                {
                    xtype: 'panelb',
                    title: 'Contact',
                    iconCls: 'user',
                    html: 'Contact Screen'
                }
            ]
        });
    }
}); 
```

[这是小提琴](http://new.senchafiddle.com/#/OheKw/)

# powershell - 如何在不使用中间值的情况下在 PowerShell 中交替/切换部分字符串？

> ID：15795173
> 
> 赞同：1
> 
> 时间：2013-04-03T18:29:51.187
> 
> 标签：powershell, replace

我正在尝试使用 PowerShell 更改配置文件中的设置。例如，如果某个值为真，我想将其切换为假。如果它是假的，我想将其切换为真。我还想将路径从`\\servername\folder\`to更改为`\\servername\`. 有没有一种方法可以在不使用中间值的情况下在 PowerShell 中执行此操作？

如果我这样做：

> `$foo = 'aaa'`
> 
> `$foo -replace 'aaa', 'bbb' -replace 'bbb', 'aaa'`

`$foo`永远都是`'aaa'`。我意识到我可以进行间歇性更改（`'aaa'`变成`'ccc'`然后更改为`'bbb'`），但这读起来很乱。

如何在不使用中间值的情况下替换值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:34:28.103

使用匹配评估器。不确定这是否更好。

```
Begin{
[regex]$ValueRegex = 'aaa|bbb'

$ValueToggles = @{
                  aaa='bbb'
                  bbb='aaa'
                 }

$toggleValue = {$ValueToggles[$args[0].groups[0].value]}
}

Process{

$foo = 'Value: aaa'

$ValueRegex.replace($foo,$toggleValue)

}

Value: bbb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:55:47.710

我不太确定你想要达到什么目的。您想在没有缓冲区变量的情况下切换两个值吗？或者你想在两个状态之间切换一个值？后者可以这样实现：

```
function Toggle($s, $v1, $v2) {
  $e1 = [regex]::Escape($v1)
  $e2 = [regex]::Escape($v2)

  $r = $s
  if ($s -match $e1) {
    $r = $s -replace $e1, $v2
  } elseif ($s -match $e2) {
    $r = $s -replace $e2, $v1
  }

  return ($r)
}

$foo = "..."

Toggle $foo "\\servername\folder\" "\\servername\" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:05:03.980

**您可以简单地使用-not**运算符替换布尔值（$true 或 $false）；例如：

```
PS C:\> $value = $true
PS C:\> $value = -not $value
PS C:\> $value
False 
```

正则表达式替换：

```
PS C:\> '\\servername\folder\' -replace '^(\\\\[^\\]+)\\[^\\]+', '$1'
\\servername\ 
```

账单

# jquery - jQuery Validate 不适用于 CSS 选择器

> ID：15795181
> 
> 赞同：0
> 
> 时间：2013-04-03T18:30:15.330
> 
> 标签：jquery, jquery-validate

我正在测试 jQuery Validate 插件，但在尝试验证控件时遇到了一些问题。我不想在页面中使用任何 FORM 元素。我正在尝试使用 css 选择器来获取元素并向其添加一些自定义规则。

这是我的代码

```
 <head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="scripts/jquery.validate.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.custom').validate({
                rules: {
                    name: 'required',
                    email: {
                        required: true,
                        email: true
                    }
                },
                messages: {
                    name: "Please specify your name",
                    email: {
                        required: "We need your email address to contact you",
                        email: "Your email address must be in the format of name@domain.com"
                    }
                }
            });
        });

        function valid() {
            return $('.custom').valid();
        }
    </script>
    <style type="text/css">
    .error { color: Red; }
    </style>
</head>
<body>
    <form id="form" method="get" action="">
        <input type="text" name="name" class="custom" /><br />
        <input type="text" name="email" class="custom" /><br />
        <input class="submit" type="submit" value="submit" onclick="return valid();" />
    </form>
</body> 
```

我不确定我在这里做错了什么。有人可以指出吗？jQuery.Validate 中不允许这样做吗？表单元素是验证工作的必要条件吗？

PS：如果我使用 #form ( `$('#form').validate({`) 作为选择器，它工作得很好。

感谢 Senthil S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:33:43.220

> 表单元素是验证工作的必要条件吗？
> 
> PS：如果我`#form` `($('#form').validate({)`用作选择器，它工作得很好。

是的，您已经回答了自己的问题。

该`.validate()`函数**只能**`<form>`在一个元素上初始化。

```
$('#yourform').validate({ ... }) 
```

* * *

此外，您**不需要**内部按钮。您也不需要调用函数来检查表单。这都是多余的。`onclick="return valid();"``submit``valid()`

该插件已经捕获了`submit`事件并自动检查表单。

**见：http: [//jsfiddle.net/XGLYt/](http://jsfiddle.net/XGLYt/)**

* * *

**引用 OP 的标题：**

> jQuery Validate 不适用于 CSS 选择器

是的。 `#form`是一个完全有效的“CSS 选择器”，它可以工作。

如上所述，您的“目标”必须是`<form>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:37:05.643

最好使用`<form>`id`#form`选择器而不是分配给输入的类：

```
$('#form').validate({ 
```

# android - 以编程方式通过 USB 将文件从 android 传输到计算机

> ID：15795186
> 
> 赞同：9
> 
> 时间：2013-04-03T18:30:27.377
> 
> 标签：android, usb, adb

我正在寻找一种解决方案，它使用 Android API 通过 USB 电缆将文本文件从 Android 设备传输到计算机。我找到了[USB 主机](http://developer.android.com/guide/topics/connectivity/usb/host.html)，但我无法使用它，因为计算机无法充当 Android 主机的设备。

您对我如何实现这一目标有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T19:21:48.917

我已经解决了这个问题，使用`adb status-window`不断检查设备状态，当连接新设备时，使用`adb pull`命令将所需文件传输到计算机。

为了实现可移植的解决方案（即独立于 Android 平台运行），我只是将文件“adb.exe”和“AdbWinApi.dll”复制到我的应用程序中并从那里使用 adb。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T11:50:04.133

有类似的问题，安装在 PC 中的软件需要能够通过 USB 访问 android 手机内的文件。经过长时间的研究，这对我有用（不确定这是否是最好的解决方案，但它有效）。Windows 具有 Windows Portable Device (WPD) API，可用于通过 USB 枚举设备的内容（以及在客户端和设备之间复制文件）。

[java http://code.google.com/p/jmtp/](http://code.google.com/p/jmtp/)中的实现很少 （效果很好，但不支持从设备到电脑的复制功能，尽管有一些支持可以用源代码来做到这一点）另一个是 jusbpmp （可在谷歌存储库中获得）（如果有人发现有据可查且维护良好的实现，请分享）

但是由于 jmtp 对我不起作用（复制函数源编译（对于 64 位操作系统）失败），所以从头开始编写 C# 程序将文件从设备复制到 PC。这是一个很好的教程 [https://github.com/geersch/WPD/blob/master/src/part-3/README.md](https://github.com/geersch/WPD/blob/master/src/part-3/README.md)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:59:57.547

您可以编写一个应用程序，该应用程序将使用 http 联系您的电脑并将（POST）数据发送到已知端点。

请记住，该应用程序只能访问属于该应用程序的数据。您将无法从文件系统访问任意文件

# javascript - 在不使用 onSubmit 的情况下从表单中获取价值

> ID：15795187
> 
> 赞同：-3
> 
> 时间：2013-04-03T18:30:29.030
> 
> 标签：javascript

您好我想知道在不使用 onsubmit 事件的情况下提交按钮时是否有另一种运行 JavaScript 的方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:34:11.270

是的，给按钮一个 ID，然后像这样使用 jQuery：

```
$("#target").click(function() {
  alert("Handler for .click() called.");
}); 
```

[来自http://api.jquery.com/click/](http://api.jquery.com/click/)的代码示例

下次您应该更明智地使用 Google。这是个简单的...

# filepicker.io - 从页面卸载文件选择器

> ID：15795196
> 
> 赞同：0
> 
> 时间：2013-04-03T18:30:48.313
> 
> 标签：filepicker.io

有没有办法从网页卸载文件选择器？

我正在使用 Meteor 构建一个应用程序。我只想让登录用户有权访问文件选择器。每次使用都有自己唯一的密钥。一旦用户注销，我想销毁对文件选择器的所有引用。

除了 JS 和初始化的文件选择器对象之外，我注意到文件选择器引入了一个 iframe。作为文件选择器的一部分，是否有更多的工件被加载到浏览器中？是否有一种安全的方法可以从页面中卸载所有文件选择器特定元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:53:46.400

iframe是用来跨域通信的，留进去就不会泄露任何信息等。但是，如果要移除Filepicker.io引入的所有元素，那么可以删除script标签和`filepicker`js对象，连同`filepicker_comm_iframe`应该做的伎俩

# asp.net - WCF、IPC 命名管道、ASP.NET 和

> ID：15795200
> 
> 赞同：0
> 
> 时间：2013-04-03T18:30:53.970
> 
> 标签：asp.net, .net, wcf, ipc, remoting

我们有一个 .NET 4.0 Windows 服务，它通过命名管道（使用 IPC）托管端点。该服务在用户 A 的上下文中运行。

我们有一个 ASP.NET 托管的客户端，它请求上述服务公开的操作。该客户端在用户 B 的上下文中运行（通过匿名访问，通过 `<identity impersonate="true" />`）。

问题：如果我们`<identity impersonate="true" />`在 web.config 中使用（无法更改），我们会得到“无法连接到 IPC 端口：访问被拒绝”。客户端尝试调用托管操作时的异常。如果`<identity impersonate... />`不存在（可能是由于不使用 ASP.NET，比如客户端控制台应用程序），我们没有问题。

有没有人知道如何让这个配置工作，所以我们停止接收拒绝访问错误？它与身份验证有关，但我们无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:56:30.680

回顾 70-503：net.pipes 仅适用于 Windows 安全性。这很明显，因为整个进程 (WCF) 仅在当前 (Windows) 机器上。默认情况下，ASP.NET 在专用 ASP.NET 用户的凭据下运行，该用户的权限受到严格限制。我不认为 ASP.NET 用户可以访问当前机器、访问本地文件、net.pipes 等。它只能访问您的网站运行所在的文件夹。因此，通过冒充该用户就像确保仅拥有运行网站的权利。

您可以做的是模拟具有适当权限的特定 Windows 帐户。这可以使用编程模拟来完成。或者使用委托。[在此处](http://msdn.microsoft.com/en-us/library/ff649252.aspx)阅读以使用最适合的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:37:51.677

由于限制 NetWorkService 查看或访问管道，这是不可能的。

[在这里](https://stackoverflow.com/questions/3366976/using-wcfs-net-pipe-in-a-website-with-impersonate-true)回答

# notepad++ - 拆分视图以在 Notepad++ 中打开 2 个以上的实例

> ID：15795201
> 
> 赞同：6
> 
> 时间：2013-04-03T18:30:55.733
> 
> 标签：notepad++

我知道如何使用**View中的****clone**选项在同一个窗口中打开两个实例。但是我们可以在 Notepad++ 中打开两个以上的实例吗？我试图从一个实例**克隆到其他视图**，但它只是移动到另一个实例而不是创建新实例。

****我想在 3 个不同的部分编辑大源文件。所以我想知道notepad++是否可以做到这一点。****

* * *

 ****## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:48:19.120

您可以使用`open in new instance`. 然后在原始实例上重新打开新文件。

或者做`open in new instance`3 次并关闭原来的那个。

或`move to new instance`...

只要您有 3 个具有相同文件的打开实例，这无关紧要。

但是您必须记住，除非您保存文件，否则您在一个实例上所做的更改将不会在其他实例中可见。

我建议使用`clone to other view`. 因为您可以在两个视图上同步更改，而不必每次都保存文件。

如果您需要经常从一个位置到另一个位置（即假设这是原因），我建议您使用书签。只需按`F2`即可遍历它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T12:40:39.407

您只能有两个视图....每个窗口。如果您将记事本窗口设置为（比如说）屏幕的左半部分（开始 + 左箭头），然后将选项卡拖到另一半，它会打开一个新实例。将该新实例设置为另一半，您可以有两个视图。如果你有 3 台显示器......12 个文件，但是克隆的文件会出现一些问题。****

# arrays - vb.net中的字符串拆分

> ID：15795202
> 
> 赞同：0
> 
> 时间：2013-04-03T18:31:00.517
> 
> 标签：arrays, vb.net, string

我是 Visual Basic .net 的新手，我需要一些帮助：

我收到这些字符串：

```
!re=.id=*10000AF=name=Down-PBX=parent=Down=packet-mark=pack_pbx=limit-at=256000=queue=PCQ_Down=priority=1=max-limit=512000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=false=disabled=true=comment=PBX

!re=.id=*10000B0=name=Up-PBX=parent=Up=packet-mark=pack_pbx=limit-at=256000=queue=PCQ_Up=priority=1=max-limit=512000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=true=disabled=true=comment=PBX

!re=.id=*10000C7=name=Down_Mauro=parent=Down=packet-mark==limit-at=315000=priority=8=max-limit=5000000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=false=disabled=true 
```

（只贴了3个，还有很多）

我将它们放在一个名为 tree() 的字符串数组中。

我想做的是一个返回新数组的函数，我猜是一个多维数组，它将“=”之间的所有内容分开，从“名称”开始。像这样：

```
Down-PBX, Down, pack_pbx, 256000, PCQ-DOWN, etc
Up-PBX, UP, pack_pbx, 256000, etc 
```

等等。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:38:54.413

假设您想要的第一个值始终是数组的第 5 个成员，并且您希望在此之后返回数组中的每个第二个值：

```
Private Function GetParts(source As String) As String()
    Dim Parts As String() = source.Split(New Char() {"="C})

    Dim Items As New List(Of String)()
    For i As Integer = 4 To Parts.Length - 1 Step 2
        Items.Add(Parts(i))
    Next

    Return Items.ToArray()
End Function 
```

本质上，您从拆分字符串的第 5 部分开始，然后在此之后迭代每个第 2 个元素，将每个元素添加到字符串的通用列表中。然后，您将其作为字符串数组返回。

我这里没有 VB 的副本，因此它可能无法 100% 工作，但它应该为您提供您想要实现的目标的一般要点。我用 C# 编写它，然后尝试将其转换为 VB.Net（手指交叉！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:39:33.167

很容易：

```
Dim output = input.Substring(input.IndexOf("name=") + 5) _
                  .Split("="c) _
                  .Where(Function(e, i) i Mod 2 = 0) _
                  .ToArray() 
```

`output`内容：

```
Down-PBX
Down
pack_pbx
256000
PCQ_Down
1
512000
0
0
00:00:00
false
true
PBX 
```

多维版本：

```
Dim input() As String = {
    "!re=.id=*10000AF=name=Down-PBX=parent=Down=packet-mark=pack_pbx=limit-at=256000=queue=PCQ_Down=priority=1=max-limit=512000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=false=disabled=true=comment=PBX",
    "!re=.id=*10000B0=name=Up-PBX=parent=Up=packet-mark=pack_pbx=limit-at=256000=queue=PCQ_Up=priority=1=max-limit=512000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=true=disabled=true=comment=PBX",
    "!re=.id=*10000C7=name=Down_Mauro=parent=Down=packet-mark==limit-at=315000=priority=8=max-limit=5000000=burst-limit=0=burst-threshold=0=burst-time=00:00:00=invalid=false=disabled=true"
}

Dim output = input.Select(Function(i) i.Substring(i.IndexOf("name=") + 5) _
                                       .Split("="c) _
                                       .Where(Function(e, idx) idx Mod 2 = 0) _
                                       .ToArray()) _
                  .ToArray() 
```

`output`在`String()()`这里。

# c# - 如何制作垂直进度条

> ID：15795205
> 
> 赞同：2
> 
> 时间：2013-04-03T18:31:21.220
> 
> 标签：c#, winforms, progress-bar

我正在尝试制作一个垂直进度条，并且我知道没有任何简单的方法可以做到这一点。

我在论坛上看到过这段代码：

```
public class VerticalProgressBar : ProgressBar { 
  protected override CreateParams CreateParams { 
    get { 
      CreateParams cp = base.CreateParams; 
      cp.Style |= 0x04; 
      return cp; 
     } 
   } 
 } 
```

我的问题是我把这段代码放在哪里？它是在我的 program.cs 文件中还是在进度条所在的表单中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:33:48.237

将代码放在哪里并不重要，您只需确保`VerticalProgressBar`在 Form.Designer.cs 文件中创建一个。

你必须改变

```
private System.Windows.Forms.ProgressBar progressBar1 
```

到

```
private VerticalProgressBar progressBar1 
```

（或任何名称）和

```
this.progressBar1 = new System.Windows.Forms.ProgressBar(); 
```

到

```
this.progressBar1 = new VerticalProgressBar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-09T22:55:08.510

在 VS 2022 中仍然没有此控件可用，因此我使用了具有一列和两行的 TablePanelLayout。并且只是更改了 RowStyle SizeType 百分比。您可以轻松添加代码以在达到限制时更改面板颜色等。

```
 public class BarGraph : Panel
   {
       private Panel panel1;
       private Panel panel2;
       private TableLayoutPanel table;
       private float percentValue;

       public BarGraph()
       {
           table = new TableLayoutPanel();
           table.ColumnCount = 1;
           table.ColumnStyles.Add(new ColumnStyle(SizeType.Percent, 100F));
           table.Name = "tableLayoutPanel1";
           table.RowCount = 2;
           table.RowStyles.Add(new RowStyle(SizeType.Percent, 50F));
           table.RowStyles.Add(new RowStyle(SizeType.Percent, 50F));
           table.Dock = DockStyle.Fill;
           table.Margin = new Padding(0);
           table.Padding = new Padding(0);
           table.CellBorderStyle = TableLayoutPanelCellBorderStyle.None;

           panel1 = new Panel();
           panel2 = new Panel();

           panel1.AutoSize = false;
           panel1.Dock = DockStyle.Fill;
           panel1.Padding = new Padding(0);
           panel1.Margin = new Padding(0);
           panel2.AutoSize = false;
           panel2.Dock = DockStyle.Fill;
           panel2.Padding = new Padding(0);
           panel2.Margin = new Padding(0);

           panel1.BackColor = System.Drawing.Color.White;
           panel2.BackColor = System.Drawing.Color.Blue;

           table.Controls.Add(panel1, 0, 0);
           table.Controls.Add(panel2, 0, 1);

           this.Controls.Add(table);
           this.Size = new System.Drawing.Size(150, 500);

           SetValue("50");
       }
       public float GetValue()
       {
           return this.percentValue;
       }
       public void IncreaseValue()
       {
           IncrementValue(percentValue - 1);
       }
       public void DecreaseValue()
       {
           IncrementValue(percentValue + 1);
       }
       private void IncrementValue(float value)
       {
           SetValue(value.ToString());
       }
       public void SetValue(string value)
       {
           float.TryParse(value, out percentValue);
           if ((percentValue >= 0) && (percentValue <=100))
           {
               table.RowStyles.RemoveAt(1);
               table.RowStyles.RemoveAt(0);
               table.RowStyles.Add(new RowStyle(SizeType.Percent, 100 - percentValue));
               table.RowStyles.Add(new RowStyle(SizeType.Percent, percentValue));
           }
       }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:38:13.567

如果这是一个全新的应用程序，请使用 WPF。内置垂直进度条

```
<ProgressBar Orientation="Vertical" /> 
```

# regex - preg_replace 使用 UTF-8 字母

> ID：15795206
> 
> 赞同：1
> 
> 时间：2013-04-03T18:31:22.003
> 
> 标签：regex, preg-replace

我只需要允许名称中的字母和数字，但字母必须是 UTF-8，因为它将用于德语、西班牙语和其他语言

我的代码抛出 UTF-8 字符，如何解决？谢谢

```
$title = 'aj,o!_-z5ąśäżźŠń?56';

echo preg_replace('/[^A-z0-9-]/', '_', $title); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:41:22.023

第一的，

**`[A-z]`是一个错误。`A-z`永远不要在字符类中使用范围。**

它匹配与 相同的字符`[A-Za-z]`，*加上*几个代码点恰好位于`Z`和之间的特殊字符`a`。如果您真的只想匹配 ASCII 字母，您可以使用`[A-Za-z]`, 或`[A-Z]`设置“不区分大小写”标志。

至于你的问题，我认为这就是你要找的：

```
echo preg_replace('/[^\p{L}\d-]/u', '_', $title); 
```

该`/u`标志告诉它将正则表达式和源字符串视为 UTF-8，它允许您像`\p{L}`在正则表达式中一样使用 Unicode 属性。 `\d`只是一种更紧凑的匹配方式`[0-9]`（ASCII十进制数字）。根据您的需要，您可能想要使用`\p{N}`(Unicode numbers) 或`\p{Nd}`(Unicode decimal digits)，但我很确定`\d`就足够了。

# android - 从自定义适配器获取项目位置

> ID：15795208
> 
> 赞同：3
> 
> 时间：2013-04-03T18:31:32.133
> 
> 标签：android, android-arrayadapter, android-preferences, android-listfragment, android-support-library

由于`PreferenceFragment`在支持库中不可用，我创建了一个`ListFragment`向用户显示设置列表，因为我没有很多设置要显示。我还创建了一个自定义`ArrayAdapter`来自定义列表项。当用户检查其中一个时，我需要处理，`CheckBox`以便我可以保存天气或未检查。因此，如果它被选中，那么它将保持选中状态，直到用户取消选中它。如果列表中只有一个设置，但现在有 2 个设置，这会容易得多，我可能需要添加更多设置。所以我需要能够确定哪一个被检查了。我可以处理检查并取消检查，但我无法找到一种方法来确定检查了哪个。

**编码**

这是我的清单项目：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout android:layout_width="match_parent" android:layout_height="match_parent"
                      android:orientation="horizontal">

<TextView android:id="@+id/pref_edit_text" android:layout_width="0dp" android:layout_height="30dp"
              android:layout_weight="5"/>
    <CheckBox android:id="@+id/pref_check_box" android:layout_width="0dp" android:layout_height="wrap_content"
              android:layout_weight="1" android:onClick="onCheckBoxClick"/>
    </LinearLayout>

<TextView android:id="@+id/pref_edit_text2" android:layout_width="match_parent"
              android:layout_height="50dp"/> 
```

这是`getView()`我的适配器：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        //mIntCheckBoxPosition = position;
        Typeface tf = Typeface.createFromAsset(mMainActivity.getAssets(), "fonts/ArchitectsDaughter.ttf");
        LayoutInflater inflater = mMainActivity.getLayoutInflater();
        View view = inflater.inflate(mIntLayoutId, parent, false);

        TextView text = (TextView) view.findViewById(R.id.pref_edit_text);
        text.setText(mStringArrayTitle[position]);
        text.setTypeface(tf, Typeface.BOLD);

        text = (TextView) view.findViewById(R.id.pref_edit_text2);
        text.setText(mStringArraySubTitle[position]);
        text.setTypeface(tf);

        mMainActivity.setTitle("Settings");

        return view;
    } 
```

这是我在`CheckBox`单击 a 时处理的位置`ListFragment`：

```
 public void onCheckBoxClick(View view) {
        boolean isChecked = ((CheckBox) view).isChecked();
        Editor editor = mMainActivity.getSharedPreferences(PREF_KEY_CHECK_BOX, Activity.MODE_PRIVATE).edit();

        switch (view.getId()) {
            case R.id.check_box :
                if (isChecked) {
                    editor.putBoolean(PREF_KEY_ROUNDING, true).commit();
                }
                else {
                    editor.putBoolean(PREF_KEY_ROUNDING, false).commit();
                }
                break;
            }
        }
    } 
```

这是我的设置的样子：
![在此处输入图像描述](https://i.stack.imgur.com/w1a6I.png)

**我尝试了什么**
1\. 我尝试将适配器中的变量设置为项目位置并使用 getter 获取位置，但这仅返回显示的最后一个项目的位置。
2\. 我尝试使用其中的一些方法`ListFragment`来获取位置，`CheckBox`但它们总是返回-1。
3\. 我在 SO 上进行了很多谷歌搜索和搜索，但我无法找到解决方案来使其正常工作。

因此，如果有人知道一种方法可以让我获得该位置的位置`CheckBox`或任何其他方法，我可能能够分辨出哪个被点击了，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T19:13:25.453

您可以使用`setTag`向视图添加`int`指示其位置的 ，然后稍后使用`getTag`. 前任：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ... // your other code here

    CheckBox checkbox = (CheckBox) view.findViewById(R.id.pref_check_box);
    checkbox.setTag(new Integer(position));

} 
```

然后，在你的`onCheckBoxClick`：

```
public void onCheckBoxClick(View view) {
    Integer pos;
    pos = (Integer) view.getTag();

    ... // do what you want with `pos` here

} 
```

# java - Jbutton 事件处理程序无法正常工作

> ID：15795209
> 
> 赞同：0
> 
> 时间：2013-04-03T18:31:35.617
> 
> 标签：java, swing, scope, jbutton

```
rollDice.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        //generate roll
            int roll = dice.getRoll();

            addGameFeedMessage(players[1].getName() + " rolled " + roll);

            //store the player's position before the roll
            int currentPlayerPos = players[1].getPosition();

            //update player's position
            players[1].movePlayer(roll);

            //move the player icon to the player's position
            tiles[players[1].getPosition()].addIconCurrentPlayersPanel(players[1].getPlayerIcon());

            //revalidate components
            //tiles[currentPlayerPos].getCurrentPlayersPanel().revalidate();
            //tiles[players[1].getPosition()].getCurrentPlayersPanel().revalidate();
            //this loop was put in to see if doing revalidate() on all panels would make a difference but the problem is still there
            for(int i = 0; i < tiles.length; i++)
            {
                tiles[i].getCurrentPlayersPanel().revalidate();
            }
    }
}); 
```

任何人都可以解释为什么用于掷骰子的 actionListener 中的 for 循环似乎不起作用，而它上面的 for 循环却是完全相同的东西吗？没有实际的错误，因为它只是不做任何事情，但是它确实进入了 actionListener 并在我们将打印语句等放入其中时执行。

猜测 actionListeners 有点奇怪，但我不确定是什么。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:55:02.233

您应该[`validate()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#validate%28%29)按`for loop`以下方式调用：

```
for(int i = 0; i < getNumOfPlayers(); i++)
{
    currentPlayersOnTile[5].add(players[i].getPlayerIcon());
}
validate(); 
```

例如，考虑下面给出的代码：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
class DemoPanels extends JFrame
{
    public void createAndShowGUI()
    {
        final JPanel panel = new JPanel();
        getContentPane().add(panel);
        JButton button = new JButton("Click");
        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                for (int i = 0 ; i < 10 ; i++ )
                {
                    JPanel panel1 = new JPanel();
                    panel1.add(new JButton(String.valueOf(i)));
                    panel.add(panel1);
                }
                validate();//comment this line and then compile and execute the code to see the effect
            }
        });
        getContentPane().add(button,BorderLayout.SOUTH);
        setVisible(true);
        setSize(300,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                DemoPanels dp = new DemoPanels();
                dp.createAndShowGUI();
            }
        });
    }
} 
```

*注意：注释代码`validate()`然后编译执行看看效果。*

# asp.net - 秒到日期和时间格式

> ID：15795213
> 
> 赞同：4
> 
> 时间：2013-04-03T18:31:46.600
> 
> 标签：asp.net

在c#中，如何将秒转换为日期和时间格式。日期和时间格式如下。YYYY-MM-DD HH:MM:SS 。我有时间以秒为单位，而不是以毫秒为单位。我想将 1365004800 转换为 2013-04-03 16:00:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:40:54.397

试试下面的代码

```
DateTime date = new DateTime(1970,1,1,0,0,0,0); //Set default date 1/1/1970
date = date.AddSeconds(1365004800); //add seconds
label1.Text = date.ToString(); //Display result 2013-04-03 16:00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:34:09.903

因此，将 Unix 时间（这就是你所拥有的）转换为日期时间的 C# 是：

```
public static DateTime UnixTimeStampToNormalDateTime(double unixTimeStamp)
{
    System.DateTime dtDateTime = new DateTime(1970,1,1,0,0,0,0);
    dtDateTime = dtDateTime.AddSeconds(unixTimeStamp).ToLocalTime();
    return dtDateTime;
} 
```

然后使用C# 中的格式相应地[格式化日期。](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)

# sql - 寻找最小订单的客户

> ID：15795220
> 
> 赞同：0
> 
> 时间：2013-04-03T18:32:14.260
> 
> 标签：sql

我用过 W3school 和我的课堂笔记。想知道是否有人可以指出我正确的方向。

我正在研究一个 SQL 项目。

我有一个由员工、客户和客户订单三个表组成的数据库。

```
CUSTOMER (
    CUST_NBR NUMBER(10) NOT NULL ,
    FNAME NVARCHAR2(20) NULL,
    LNAME NVARCHAR2(20) NULL,
    PRIMARY KEY(CUST_NBR)
);

EMPLOYEE (
    EMP_ID NUMBER(10) NOT NULL ,
    FNAME NVARCHAR2(20) NULL,
    LNAME NVARCHAR2(20) NULL,
    MANAGER_EMP_ID NUMBER(10) NULL,
    PRIMARY KEY(EMP_ID),
    FOREIGN KEY(MANAGER_EMP_ID)
    REFERENCES EMPLOYEE(EMP_ID)
);

CUST_ORDER (
    ORDER_NBR NUMBER(10) NOT NULL ,
    CUST_NBR NUMBER(10) NOT NULL,
    SALES_EMP_ID NUMBER(10) NOT NULL,
    SALE_PRICE NUMBER(10, 2) NULL,
    PRIMARY KEY(ORDER_NBR),
    FOREIGN KEY(SALES_EMP_ID)
    REFERENCES EMPLOYEE(EMP_ID),
    FOREIGN KEY(CUST_NBR)
    REFERENCES CUSTOMER(CUST_NBR)
); 
```

我已经为所有表格填写了样本数据。我正在寻找一个查询，它允许我返回价格最低的商品的 fname、lname、order_nbr 信息。

我尝试了几种变体

```
Select *
FROM CUST_ORDERS
WHERE SALE_PRICE = min(Sale_price): 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:33:22.290

```
SELECT TOP 1 * FROM CUST_ORDERS ORDER BY SALE_PRICE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:35:10.390

```
SELECT  TOP 1
        fname, lname, order_nbr
FROM    cust_order co
JOIN    customer с
ON      c.cust_nbr = co.cust_nbr
ORDER BY
        co.sale_price 
```

# java - 从android调用端点时的java.lang.VerifyError

> ID：15795223
> 
> 赞同：0
> 
> 时间：2013-04-03T18:32:18.607
> 
> 标签：java, android, google-app-engine, google-cloud-endpoints, google-eclipse-plugin

我有一个应用引擎连接的安卓应用。服务器是java。我正在测试后端的登录 Web 服务。在代码调用端点发送登录信息的地方，我得到一个异常。我包括整个堆栈跟踪。但根本原因似乎是`LoginActivity.java:262`：

```
service.registerUser(request).execute();//service is endpoint 
```

此登录没有什么特别之处。这只是一个带有数据的 POST。我不知道如何解释错误行

```
Caused by: java.lang.VerifyError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler 
```

我想这是我需要理解的。

无论如何，这是整个跟踪：

```
04-03 11:48:50.028: E/AndroidRuntime(9385): FATAL EXCEPTION: AsyncTask #1
04-03 11:48:50.028: E/AndroidRuntime(9385): java.lang.RuntimeException: An error occured while executing doInBackground()
04-03 11:48:50.028: E/AndroidRuntime(9385):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.lang.Thread.run(Thread.java:1096)
04-03 11:48:50.028: E/AndroidRuntime(9385): Caused by: java.lang.VerifyError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.initialize(GoogleAccountCredential.java:124)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.http.HttpRequestFactory.buildRequest(HttpRequestFactory.java:93)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.buildHttpRequest(AbstractGoogleClientRequest.java:292)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.example.learning.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:262)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at com.example.learning.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:1)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-03 11:48:50.028: E/AndroidRuntime(9385):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-03 11:48:50.028: E/AndroidRuntime(9385):     ... 4 more
04-03 11:48:50.160: W/IInputConnectionWrapper(9385): showStatusIcon on inactive InputConnection 
```

编辑：

要设置凭据，我只需按照模板进行操作：

```
public static GameApp getService(Context context) {
        GoogleAccountCredential credential = GoogleAccountCredential.usingAudience(context, StateValues.AUDIENCE);
        GameApp.Builder builder = new GameApp.Builder(
            AndroidHttp.newCompatibleTransport(),
            new GsonFactory(),
            credential);
        GameApp service = builder.build();
        return service;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:50:18.617

看起来问题出在`google-play-service.jar`. 我一直在通过构建路径添加它。现在我将它手动添加到 libs 文件夹中，这个问题就消失了。感谢大家的评论。给大家点赞。

# sql - 在 case when 语句的 then 中选择子查询？

> ID：15795224
> 
> 赞同：8
> 
> 时间：2013-04-03T18:32:18.887
> 
> 标签：sql, sql-server-2008, subquery, case

有没有办法从 sql server case/when 语句中的“then”运行 select 语句？（我需要从 then 语句运行子查询。）我不能在 where 语句中使用它。

```
select 
  case @Group 
    when 6500 then (select top 10 * from Table1)
    when 5450 then (select top 5 * from Table1)
    when 2010 then (select top 3 * from Table1)
    when 2000 then (select top 1 * from Table1)
    else 0 
  end as 'Report' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:39:07.763

一种选择是从查询中删除它并执行以下操作：

```
declare @Numrows int;
select @Numrows = (case @Group 
                        when 6500 then  10
                        when 5450 then 5
                        when 2010 then 3
                        when 2000 then 1
                        else 0
                   end);

select top(@NumRows) *
from Table1; 
```

你也可以这样做：

```
with const as (
      select (case @Group 
                        when 6500 then  10
                        when 5450 then 5
                        when 2010 then 3
                        when 2000 then 1
                        else 0
                   end) as Numrows
    )
select t.*
from (select t.*, ROW_NUMBER() over () as seqnum
      from table1 t 
     ) t cross join
     const
where seqnum <= NumRows; 
```

在这种情况下，您需要列出列以避免进入`seqnum`列表。

顺便说一句，通常在使用时`top`你也应该有`order by`. 否则，结果是不确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:42:04.143

SELECT 中不能有 SELECT。你可以使用 IF...ELSE 虽然例如

```
IF @Group = 6500
    select top 10* from Table1 AS Report
ELSE IF @Group = 5450
    select top 5* from Table1 AS Report
ELSE IF @Group = 2010
    select top 3* from Table1 AS Report
ELSE IF @Group = 2000
    select top 1* from Table1 AS Report 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:42:48.623

@Gordon 已经有了答案。这只是第二种选择。您可以使用动态查询。

```
 declare @query varchar(max)
declare @Group int
set @query = ''

if @Group = 6500 
  set @query = 'select top 10 * from table1'
if @Group = 5450 
  set @query = 'select top 5 * from table1'
if @Group = 2010 
  set @query = 'select top 3 * from table1'
if @Group = 2000 
  set @query = 'select top 1 * from table1'

exec(@query) 
```

# performance - Spring Remoting Services（通过 HTTPInvoker）比 EJB 3.1 Stateless 更轻量级？

> ID：15795234
> 
> 赞同：1
> 
> 时间：2013-04-03T18:33:04.787
> 
> 标签：performance, spring, java-ee-6, ejb-3.1, spring-remoting

我在同一个应用程序服务器（JBoss 7）中有两个 java web-app。一个网络应用程序对另一个网络应用程序进行一些远程调用。

今天我使用无状态 EJB 3.1 来公开服务。您认为使用 Spring Remoting（通过 httpinvoke 或 hessian）公开服务性能更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T14:10:28.187

在这里，您可以看到远程技术的基准：

[http://daniel.gredler.net/2008/01/07/java-remoting-protocol-benchmarks/](http://daniel.gredler.net/2008/01/07/java-remoting-protocol-benchmarks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T13:51:36.730

假设您当前通过 @WebService 公开 EJB，Hessian 很有可能会更快，因为它是二进制协议。

标准的 Web 服务序列化程序 (JAXB) 相当浪费。

# jboss - Loadrunner jmx 作为外部资源进行监控

> ID：15795237
> 
> 赞同：1
> 
> 时间：2013-04-03T18:33:12.713
> 
> 标签：jboss, jmx, loadrunner

我已经验证可以使用带有端口号和用户名和密码的远程连接通过 jvisualvm 中的 jmx 连接到 jboss 节点。但是，如果想在 LR 控制器中将此 jboss 节点添加为外部监视器，则在 loadrunner 中设置远程 UNIX 监视器时无法添加用户名和密码。添加 UNIX 资源和外部测量时，我被问到的只是要添加的机器的名称（在向导中）。是否可以在没有站点范围的 LR 控制器中添加 jboss 节点作为 UNIX 资源监视器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:27:52.957

JMX 需要 Sitecope 作为 LoadRunner 的监控基础。或者，您可以找到某种 JMX 到 SNMP 桥，然后在 LoadRunner 中使用本机 SNMP 监视器。然而，即便如此，SiteScope 中的 SNMP 监控器也更加成熟。

# objective-c - 编译器认为 times* 操作数是一个指针

> ID：15795241
> 
> 赞同：1
> 
> 时间：2013-04-03T18:33:25.540
> 
> 标签：objective-c

这是错误所在的行：

```
player.legalMoney = ((player.wealth * 3000) + arc4random() % (player.luck * 1000)) / difficulty; 
```

我在行中的两个 * 上都收到错误“二进制表达式（'int *'和'int'）的无效操作数。

这是接口部分：

```
{
    int *legalMoney, *wealth, *luck;
}

@property (nonatomic, strong) *legalMoney, *wealth, *luck; 
```

我认为问题是编译器认为 * 是一个指针，所以如果我将其更改为：

```
player.legalMoney = ((*player.wealth * 3000) + arc4random() % (*player.luck * 1000)) / difficulty; 
```

那么没有编译错误，而是运行时错误：“Thread 1:EXC_BAD_ACCESS (code=2, address=0x0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:35:53.557

您正在尝试将指针与数字相乘。您应该取消引用指针以获取它们的值，因此您的第二个示例是正确的。

`player.wealth`返回指向保存 int 的内存位置的指针，该值 `*player.wealth`返回存储在内存位置的实际值

但是您真正的问题是您声明指向整数而不是整数值的指针，这可能不是您的本意。它应该声明为：

```
{
    int legalMoney, wealth, luck;
}

@property (nonatomic, assign) int legalMoney;
@property (nonatomic, assign) int wealth;
@property (nonatomic, assign) int luck; 
```

然后你可以使用你的原始代码：

```
player.legalMoney = ((player.wealth * 3000) 
                         + arc4random() % (player.luck * 1000)) / difficulty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:38:51.920

您的实例变量是指向`int`s ( `int*`) 的指针，而您的属性返回一个指向 int 的指针。您应该将实例变量设为纯整数，并且属性应返回纯整数。

# css - CSS 活动菜单项

> ID：15795244
> 
> 赞同：0
> 
> 时间：2013-04-03T18:33:32.417
> 
> 标签：css, joomla, menu

您好我正在尝试修改一个没有不同颜色的活动菜单项的 Web 模板。我已经尝试了各种更改来调整它。有任何想法吗？这是CSS：

```
/** TOP MENU        **/

.top_menu .moduletable {
margin:0;
}

.top_menu li {
margin:0px 0 0 5px ;
padding:0;
float:left;
height:100px;
list-style : none;
background : transparent url(../images/top_menu_left.png) 0 0 no-repeat;
opacity:0.6;
-ms-filter: "prodig:DXImageTransform.Microsoft.Alpha(Opacity=60)"; /* fix IE8   */
filter: apha(opacity = 60);                    /* fix IE7       */
-webkit-transition : all 0.4s ease-in-out;
-moz-transition : all 0.4s ease-in-out;
-ms-transition : all 0.4s ease-in-out;
-o-transition : all 0.4s ease-in-out;
transition : all 0.4s ease-in-out;
}

.top_menu li:hover {
opacity:1;
-ms-filter: "prodig:DXImageTransform.Microsoft.Alpha(Opacity=100)"; /* fix IE8  */
filter: apha(opacity = 100);                                               /* fix IE7       */
}

.top_menu li a {
display:block;
color: #24221E/*8c8c8c*/;
text-shadow:0 0 3px #fff;
background : transparent url(../images/top_menu_right.png) 100% 0 no-repeat;
text-decoration:none;
text-transform: none;
font-weight:bold;
font-size:90%;
margin-right:-13px;
padding: 60px 22px 4px 20px;
height:40px;
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:38:43.193

我看到您正在使用 Joomla 作为内容管理系统，并且您必须使用一个类来设置项目的样式，例如`active`，然后您可以使用 CSS 为该项目分配不同的样式。

```
.active {
    text-decoration: underline;
    font-weight: bold;
} 
```

如果要更改链接的颜色，则需要使用以下代码直接对 a 标签进行寻址。

```
.active a {
   color: red;
} 
```

您可能会发现这个答案也很有用：[Joomla - 如何突出显示活动页面的菜单项](https://stackoverflow.com/questions/3366417/joomla-how-to-hightlight-the-menu-item-for-active-page)

# django - 扩展基于类的 UpdateView 以评价对象

> ID：15795247
> 
> 赞同：0
> 
> 时间：2013-04-03T18:33:46.973
> 
> 标签：django, django-forms

我有以下模型，我需要创建一个表单，该表单允许更新现有响应（之前使用 slug 生成，然后通过电子邮件发送给受访者）并`Rating`为每个`CV`in `CV.objects.all()`. 在 Django 中执行此操作的最简单方法是什么。目前我有一个基于类的 UpdateView 用于响应，就是这样。

```
class Response(models.Model):
    first_name = models.CharField(max_length=200, null=True, blank=True)
    last_name = models.CharField(max_length=200, null=True, blank=True)
    email = models.EmailField(max_length=254)
    slug = models.SlugField(max_length=32)
    submited = models.BooleanField(default=False)
    submit_time = models.DateTimeField(null=True, blank=True)
    creation_time = models.DateTimeField(auto_now_add=True)

class CV(models.Model):
    title = models.CharField(max_length=200)
    image = models.ImageField(upload_to=content_file_name)

class Rating(models.Model):
    cid = models.ForeignKey('CV')
    rid = models.ForeignKey('Response')
    score = models.IntegerField()
    comment = models.TextField() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:18:48.760

我最终想出了如何做到这一点。如果有人感兴趣，我的代码如下。

```
def add_response(request):
    CVs = CV.objects.all()
    if request.method == "POST":
        ResForm = ResponseForm(request.POST, instance=Response())
        RatForms = [RatingForm(request.POST, prefix=str(cv.id), instance=Rating(cid=cv)) for cv in CVs]
        if ResForm.is_valid() and all([rf.is_valid() for rf in RatForms]):
            new_response = ResForm.save(commit=False)
            new_response.submit_time = datetime.now()
            new_response.submited = True
            new_response.save()
            for rf in RatForms:
                new_rating = rf.save(commit=False)
                new_rating.rid = new_response
                new_rating.save()
            return HttpResponseRedirect('/thanks/')
        else:
            for i, _ in enumerate(RatForms):
                RatForms[i].cv = CV.objects.filter(id=int(RatForms[i].prefix))[0]
                print RatForms[i].cv
            return render(request, 'response.html', {'response_form': ResForm, 'rating_forms': RatForms})
    else:
        ResForm = ResponseForm(instance=Response())
        RatForms = [RatingForm(prefix=str(cv.id), instance=Rating(cid=cv)) for cv in CVs]

        for i, _ in enumerate(RatForms):
            RatForms[i].cv = CV.objects.filter(id=int(RatForms[i].prefix))[0]
            print RatForms[i].cv

        return render(request, 'response.html', {'response_form': ResForm, 'rating_forms': RatForms}) 
```

# internet-explorer - IE 10 Metro/Modern Browser 到 IE 10 桌面浏览器

> ID：15795248
> 
> 赞同：0
> 
> 时间：2013-04-03T18:33:47.250
> 
> 标签：internet-explorer, iis, microsoft-metro

有一个需要插件的网站。

如果用户正在运行 Win 8 IE 10 Metro/Modern 浏览器，则希望它在页面底部弹出消息，表明他们需要使用桌面 IE 10。

推荐的解决方案是：

```
<meta http-equiv="X-UA-Compatible" content="requiresActiveX=true" /> 
```

或通过 IIS 在标头中的条目：

```
X-UA-Compatible: requiresActiveX=true 
```

我已经尝试了这两种方法，结果相同。在我刷新页面之后，我在页面上什么也得不到，然后它就可以正常工作了。

有谁知道为什么它只在刷新后才能工作？

# javascript - 定位上下文菜单

> ID：15795253
> 
> 赞同：11
> 
> 时间：2013-04-03T18:34:07.080
> 
> 标签：javascript, jquery, contextmenu

我正在尝试使用 jQuery 定位自定义上下文菜单。
第一次出现在正确的位置（鼠标坐标），但随后当前位置与新位置相加，因此菜单从屏幕上消失。
这是JavaScript：

```
<script>
$(function(){
    $('#box').hide();

    $(document).bind("contextmenu", function(e) {
        $("#box").offset({left:e.pageX, top:e.pageY});
        $('#box').show();
        e.preventDefault();
    });

    $(document).bind("click", function(e) {
        $('#box').hide();
    });
    $('#box').bind("click", function(e) {
        $('#box').hide();
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T18:44:36.877

不要使用`offset`方法，而是尝试`css`绝对定位上下文菜单：

```
$("#box").css({left:e.pageX, top:e.pageY}); 
```

CSS：

```
#box {
    ...
    position: absolute;
} 
```

[http://jsfiddle.net/smxLk/](http://jsfiddle.net/smxLk/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-11T07:24:05.130

尝试位置：固定；上下文菜单的位置根据以下条件更改 -

```
var windowHeight = $(window).height()/2;
var windowWidth = $(window).width()/2;
if(e.clientY > windowHeight && e.clientX <= windowWidth) {
  $("#contextMenuContainer").css("left", e.clientX);
  $("#contextMenuContainer").css("bottom", $(window).height()-e.clientY);
  $("#contextMenuContainer").css("right", "auto");
  $("#contextMenuContainer").css("top", "auto");
} else if(e.clientY > windowHeight && e.clientX > windowWidth) {
  $("#contextMenuContainer").css("right", $(window).width()-e.clientX);
  $("#contextMenuContainer").css("bottom", $(window).height()-e.clientY);
  $("#contextMenuContainer").css("left", "auto");
  $("#contextMenuContainer").css("top", "auto");
} else if(e.clientY <= windowHeight && e.clientX <= windowWidth) {
  $("#contextMenuContainer").css("left", e.clientX);
  $("#contextMenuContainer").css("top", e.clientY);
  $("#contextMenuContainer").css("right", "auto");
  $("#contextMenuContainer").css("bottom", "auto");
} else {
  $("#contextMenuContainer").css("right", $(window).width()-e.clientX);
  $("#contextMenuContainer").css("top", e.clientY);
  $("#contextMenuContainer").css("left", "auto");
  $("#contextMenuContainer").css("bottom", "auto");
} 
```

[http://jsfiddle.net/AkshayBandivadekar/zakn7​​Lwb/14/](http://jsfiddle.net/AkshayBandivadekar/zakn7Lwb/14/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-03T18:44:46.223

问题是当您右键单击然后左键单击其他地方然后再次右键单击时，位置不正确。

问题的根源是您在显示元素之前设置了偏移量。`display:none`如果将元素设置为然后更改其偏移量，它似乎会混淆 jQuery 。

要解决此问题，您需要切换代码中的`show`和`offset`行：

```
$(document).bind("contextmenu", function(e) {
    $("#box").offset({left:e.pageX, top:e.pageY});
    $('#box').show();
    e.preventDefault();
}); 
```

变成

```
$(document).bind("contextmenu", function(e) {
    $('#box').show();
    $("#box").offset({left:e.pageX, top:e.pageY});
    e.preventDefault();
}); 
```

[**演示**](http://jsbin.com/odulig/2)
和
[**来源**](http://jsbin.com/odulig/2/edit)

# asp.net - 显示图片网格？

> ID：15795258
> 
> 赞同：0
> 
> 时间：2013-04-03T18:34:11.907
> 
> 标签：asp.net, gridview, controls, repeater

我想使用 GridView 来绑定图片列表。我已经可以做到这一点，但我需要控制网格的宽度。

如果它是一张桌子，它会很容易像这样：

```
<table>
    <tr>
        <td>Image 1</td>
        <td>Image 2</td>
        <td>Image 3</td>
    </tr>
    <tr>
        <td>Image 4</td>
        <td>Image 5</td>
        <td>Image 6</td>
    </tr>
    <tr>
        <td>Image 7</td>
        <td>Image 8</td>
        <td>Image 9</td>
    </tr>
</table> 
```

我希望“gridview”没有任何真正的列或任何东西，只是简单地从我的数据库中带有文本描述符的图片。中继器控制是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:04:27.590

我会使用`DataList`控件。该`DataList`控件具有非常有用的属性，称为`RepeatColumns`， `RepeatLayout`可让您执行所需的操作。

**标记**：

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="3">
    <ItemTemplate>
    <img src="<%#Eval("url") %>" />
    </ItemTemplate>
</asp:DataList> 
```

**样本类**：

```
public class Sample
{
    public string url { get; set; }
} 
```

**绑定数据列表**：

```
protected void Page_Load(object sender, EventArgs e)
{
    List<Sample> samples = new List<Sample>();
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });
    samples.Add(new Sample() { url = "http://www.google.com/images/srpr/logo4w.png" });

    this.DataList1.DataSource = samples;
    this.DataList1.DataBind();

} 
```

**结果**：一个包含 2 行 3 列的 HTML 表格，每列显示 google 图像。

```
<table id="Table1" cellspacing="0" style="border-collapse: collapse;">
    <tr>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
    </tr>
    <tr>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
        <td>
            <img src="http://www.google.com/images/srpr/logo4w.png" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:35:54.773

根据我对您问题的理解，您想以表格*以外*的形式输出图像。

控件具有使您的生活更轻松的`DataList`内置功能。即`RepeatColumns`， 和`RepeatLayout`。@Hanlet 的回答很好地解释了这一点。根据我对您问题的理解，他的答案的问题在于他只展示了如何以表格形式输出。正如我之前解释的那样，这*不是*您想要的。`DataList` *可以*以不同的方式显示输出：`RepeatLayout="Flow"`. 这种方法的潜在问题是布局僵化。它不允许您更改它的显示方式。它使用`<span>`和`<br />`标签来显示数据。虽然这*可以*使用 CSS 设置样式，但它仍然有些限制。如果您选择`Flow`而不是`Table`：

```
<div>
    <span id="DataList1">
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
    <br />
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
       <span>
          <img src="http://www.google.com/images/srpr/logo4w.png" />
       </span>
    </span>
 </div> 
```

话虽如此，如果您想要对 a`Repeater`提供的布局进行无限控制，有*一种*方法可以做到这一点。使用两个`Repeaters`：

**asp代码：**

```
<asp:Repeater ID="rptRows" runat="server" OnItemDataBound="rptRows_ItemDataBound"> 
    <ItemTemplate>
        <asp:Repeater ID="rptItems" runat="server">
            <ItemTemplate>
                <img width="30px" src="<%#Eval("url") %>" />
            </ItemTemplate>
        </asp:Repeater>
        </br>
       </ItemTemplate>
</asp:Repeater> 
```

**代码隐藏：**

```
public class ImageEntity
{
    public string url { get; set; }
}

public partial class DataListSample : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        List<Tuple<ImageEntity, ImageEntity, ImageEntity>> listTuples = new List<Tuple<ImageEntity, ImageEntity, ImageEntity>>();
        listTuples.Add(new Tuple<ImageEntity, ImageEntity, ImageEntity>(new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }));
        listTuples.Add(new Tuple<ImageEntity, ImageEntity, ImageEntity>(new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }));
        listTuples.Add(new Tuple<ImageEntity, ImageEntity, ImageEntity>(new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }));
        listTuples.Add(new Tuple<ImageEntity, ImageEntity, ImageEntity>(new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }, new ImageEntity() { url = "http://www.google.com/images/srpr/logo4w.png" }));
        this.rptRows.DataSource = listTuples;
        this.rptRows.DataBind();
    }

    protected void rptRows_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
        {
            Repeater rptItems = (Repeater)e.Item.FindControl("rptItems");
            Tuple<ImageEntity, ImageEntity, ImageEntity> items = (Tuple<ImageEntity, ImageEntity, ImageEntity>)e.Item.DataItem;
            rptItems.DataSource = new List<ImageEntity>() { items.Item1, items.Item2, items.Item3 };
            rptItems.DataBind();
        }
    }
} 
```

基本上，我们在这里所做的是将 URL 列表拆分为`Tuples`. 的长度`List`是外部“行”的数量`Repeater`。中的实体`Tuple`数是内部Repeater中的“列”数。

每次我们将一个项目绑定到外部`Repeater`( `rptRows_ItemDataBound`) 时，我们都会将内部的数据源设置为`Repeater`新生成的 URL 实体列表 ( `ImageEntity`)。

让我知道这是否足够清楚，我很乐意扩展和澄清任何不清楚的点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:00:21.653

您可以在列表视图的项目模板中使用数据列表或中继器，并且在列表视图的布局模板中，您可以制作任何布局、基于 div 的表格或未排序列表

# sql-server - SQL Server 事务，未提交的数据保存在哪里？

> ID：15795259
> 
> 赞同：3
> 
> 时间：2013-04-03T18:34:12.627
> 
> 标签：sql-server, memory-management, transactions

我的问题与 SQL Server 中的事务处理方式有关。

假设我有一个包含大量数据的用户定义事务，在该过程中这些数据存储在哪里？如果事务成功，它只提交到数据库文件，但它预先驻留在哪里。

*   是否保留在创建事务的程序的内存中
*   到 SQL server 内存进程
*   是否写入数据库的事务日志？
*   临时文件或其他磁盘位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:56:02.127

未提交的数据被写入有问题的表中，在事务提交之前它不会被标记为已提交。如果事务回滚，则数据将在下一次发生需要受影响页面的写入时被覆盖。一旦事务提交，表中的数据就被提交并且不能被覆盖。该日志包含数据库中正在发生的事情的持续记录，以便在系统崩溃或事务回滚后可以向后或向前回滚事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:56:38.413

SQL Server 使用[ARIES](http://en.wikipedia.org/wiki/Algorithms_for_Recovery_and_Isolation_Exploiting_Semantics)预写日志记录。[工作原理：Bob Dorr 的 SQL Server I/O 演示](http://blogs.msdn.com/b/psssql/archive/2010/03/24/how-it-works-bob-dorr-s-sql-server-i-o-presentation.aspx)中描述了详细信息。预写日志记录要求对日志记录描述的 eb 数据所做的每一次更改，以便崩溃恢复可以重建数据库。要回滚事务，只需将日志向后走，并为事务生成的每条记录生成一个补偿操作。这实际上将撤消事务所做的一切。[两相锁定](http://en.wikipedia.org/wiki/Two-phase_locking)将确保补偿操作始终可以自由进行。

另请参阅[SQL Server 事务日志内部](http://bradmcgehee.com/wp-content/uploads/presentations/Inside%20the%20SQL%20Server%20Transaction%20Log.pdf)，当然还有[ARIES：使用预写日志支持细粒度锁定和部分回滚的事务恢复方法](http://www.cs.berkeley.edu/~brewer/cs262/Aries.pdf)。

# sql - 如何根据许多子查询的结果集更新表的多条记录

> ID：15795261
> 
> 赞同：0
> 
> 时间：2013-04-03T18:34:28.927
> 
> 标签：sql, postgresql

我必须更新表“合同”的 10 行和 3 个字段

每 10 行必须用不同的值更新。

```
 update  contract_equipment_purchase   set date_shipped = (
    select lat.tstamp from lease_asset la join CR983_TMP  tmp on la.serial_num=tmp.serial  join 
         (select lease_asset_id ,max(tstamp) as tstamp from lease_asset_transaction where status='Placed' group by lease_asset_id)
             lat on la.id=lat.lease_asset_id join lease_asset_status las on las.id=la.id and las.status<>'Out of Service' ),
lease_asset_id= (
        select la.id from lease_asset la join CR983_TMP  tmp on la.serial_num=tmp.serial  join 
             lease_asset_status las on las.id=la.id and las.status<>'Out of Service' ),
comprehensive_expiration_date='2013-10-31'
     where id_contract in (
        select cep.id_contract from contract_equipment_purchase cep join contract c on cep.id_contract =c.id_contract and c.id_contract_type=10 
            join facilities f on f.id=c.id_facility
            join CR983_TMP crtmp on crtmp.account=f.accounting_id); 
```

我面临的主要问题是所有子查询都会给出多个结果，因为我必须用不同的值更新多行。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:40:06.533

这种语法应该给你你正在寻找的东西

```
update contract
set contract.account = s.account,
shipitem = i.item,
date='2013-3-25'
from contract c
  inner join shippertable s on c.account = s.account
  inner join itemtable i on c.item = i.item
where contractname = (select name from customers where) 
```

# python - 一个单词串变成了字母列表

> ID：15795274
> 
> 赞同：0
> 
> 时间：2013-04-03T18:35:03.867
> 
> 标签：python, string, list

我有一个单词列表，但我需要从列表中删除最后一项，对列表的其余部分执行一个功能，然后替换最后一项。但是由于某种原因，当我去更换最后一个项目时，它会这样做......

```
>>> List = ['this', 'is', 'a', 'list']
>>> last = List[-1]
>>> others = List[:-1]
>>> others += last
>>> print others
['this', 'is', 'a', 'l', 'i', 's', 't'] 
```

有什么方法可以将最后调用的列表连接到其他列表，但只有一个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:38:04.230

尝试使用`append`

`others.append(last)`

您可以通过执行以下操作进一步简化代码：

```
last = List.pop() 
```

这将删除最后一个元素，或者`List`如果没有指定参数，并将其保存在变量`last`中为您

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:41:10.553

使用追加而不是 +=：

```
>>> others.append(last) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:46:02.483

**利用：**

```
others.append(last) 
```

代替

```
others += last 
```

**这是因为**：

当你在做

```
list += ["somethingHere"] 
```

相当于

```
list.extend(["somethingHere"]) 
```

**根据[文档](http://docs.python.org/2/tutorial/datastructures.html)，**

> list.extend(L) = 通过附加给定列表中的所有项目来扩展列表

但

> list.append(x) = 将一个项目添加到列表末尾

而你在这里需要的是“添加**一个**项目”而不是“附加给定列表中的**所有项目”** *（在这种情况下是所有字符。）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:38:11.763

请使用以下之一：

```
others += [last]
others.append(last) 
```

`+`例如`list`正在迭代添加到它的元素，因此迭代字符串你会得到字符列表。

```
others += 'string'
others += ['s', 't', 'r', 'i', 'n', 'g'] 
```

# ios - 如何在 iOS 应用程序中访问 Wordpress 帖子/数据

> ID：15795280
> 
> 赞同：0
> 
> 时间：2013-04-03T18:35:16.477
> 
> 标签：ios, wordpress

我正在为网站编写 iOS 应用程序。该网站是使用 Wordpress 构建的。我已经构建了整体 UI 结构，但我不知道我可以连接到站点服务器以获取通过应用程序显示所需的数据（帖子、帖子标题等）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:10:43.027

首先，如果站点以通常的方式配置，您可以添加`?feed=rss2`到您的 WordPress 驱动站点的 URL 以请求 RSS2 提要。

基本上，您将使用[NSURLConnection 和 URL 加载系统](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)来获取 RSS 提要，然后对其进行解析。然后，您可以使用[NSXMLParser 读取提要](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html)，并将其转换为数据集合和/或模型对象来保存数据。然后，您的 UI 可以根据需要加载和显示该数据。

# postgresql - 如何找到 PostgreSQL 中当前活动的连接数？

> ID：15795281
> 
> 赞同：1
> 
> 时间：2013-04-03T18:35:22.823
> 
> 标签：postgresql, psql

当我的 PostgreSQL 服务器中的活动连接数超过某个阈值时，我打算编写一个脚本来提醒我。我在哪里可以找到可以在脚本中用于比较的表格中的这个数字？

我的 PostgreSQL 版本是 8.4.8，我的操作系统是 Debian Squeeze。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:39:25.703

它在 pg_catalog.pg_stat_activity 视图中。每一行都是一个连接。

# ios - 如何从一个 Xcode 项目创建多个 iOS 应用程序？

> ID：15795282
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:35:24.867
> 
> 标签：ios, xcode, cordova, sencha-touch-2

我有一个使用 PhoneGap 封装在本机外壳中的 Sencha Touch 2 应用程序。我已经创建了原生 Android 应用程序。使用我的原生 Android 应用程序，我有一个项目和一个用于该项目的 apk。我已经设法从一个 apk 创建了几个应用程序。我使用 apktool 解包 apk，然后使用一些 Perl 脚本使用一些全局 JS 变量更新 index.html 文件，并更改 Smali 文件中的包名称以使应用程序唯一。然后我重新打包apk并签名。每个应用程序之间的唯一区别是发送请求的名称和 url。此变量在 index.html 中设置。我想为我的 iOS 应用程序做同样的事情。有没有办法在不创建多个项目的情况下做到这一点？每个应用程序都必须是唯一的，这样我的设备上就可以有多个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:38:34.847

这是你需要做的。使用您的 XCode 项目，创建一个 ipa 文件。现在，您可以创建 ipa 文件的多个副本，更改它们的 bundle id 并使用[iResign 之](https://github.com/maciekish/iReSign)类的工具对它们进行签名。Bundle Id 标识一个应用程序；因此，当捆绑 ID 更改并且应用程序退出时，您将获得一个完全不同的应用程序！

由于现在您在不同环境中的应用程序具有不同的包 ID，因此您需要使用[wizUtils 插件](https://github.com/Wizcorp/phonegap-plugin-wizUtils)之类的插件并在您的 JS 代码和 JS switch case 语句中读取包标识符，您可以设置 dev 和 prod 配置（在您的情况下服务 URL）取决于捆绑包 ID。因此，当您为其他环境进行构建时，您无需更改源代码中的任何内容。

# sql - 查看在 oracle 上运行的参数化查询

> ID：15795285
> 
> 赞同：2
> 
> 时间：2013-04-03T18:35:29.210
> 
> 标签：sql, oracle, parameters, oracle11g

我想查看在 oracle 数据库上执行的参数化更新、选择和删除语句。

我可以通过运行以下命令来查看查询：

```
select * from v$sqlarea where parsing_schema_name = 'SCHEMA_NAME' order by last_active_time desc 
```

但我还想在 SQL_TEXT 列中查看与 SQL 一起使用的参数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:43:03.197

如果参数化是指绑定变量，则需要`V$SQL_BIND_CAPTURE`. 通过`SQL_ID`您在 中找到的内容进行搜索`V$SQLAREA`。

每行代表一个按位置捕获的变量，因此您必须将其与查询中的名称相匹配。

# eclipse-plugin - 在 Tycho 中运行单元测试失败：解析 google-collections 而不是 Guava

> ID：15795286
> 
> 赞同：1
> 
> 时间：2013-04-03T18:35:31.853
> 
> 标签：eclipse-plugin, guava, tycho

我在使用 tycho 运行测试时遇到问题，因为依赖解析不正确，不知何故，将旧的 Google Collections .jar 放在类路径上，而不是 Guava 上，尽管事实上我的任何 pom 中都没有我指定了对集合的依赖（只有番石榴）。

我的单元测试因 NoSuchMethodError (ImmutableList.copyOf)、NoClassDefFoundError (Joiner) 之类的事情而失败，我几乎将其缩小为“找到错误的 jar”。当在 Eclipse 中手动运行时，这些相同的测试也会通过。

这是pom的相关部分：

```
<dependencies>
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>14.0.1</version>
    </dependency>
  ...
</dependencies> 
```

短语“谷歌收藏”出现在任何地方。我指定的唯一其他存储库是：

```
<repositories>
    <repository>
        <id>helios</id>
        <layout>p2</layout>
        <url>http://download.eclipse.org/releases/helios</url>
    </repository>
</repositories> 
```

我的插件将“com.google.common.base”和“com.google.common.collect”作为导入包导入。我在工作区中有自己的捆绑版本的 Guava 14 用于调试，但在 POM 中我选择不使用本地模块。

我按照 Sean Patrick Floyd 对这个问题的回答（[JUnit throws java.lang.NoSuchMethodError For com.google.common.collect.Iterables.tryFind](https://stackoverflow.com/questions/12041111/junit-throws-java-lang-nosuchmethoderror-for-com-google-common-collect-iterables)），并让我的测试抛出一个异常，其中包含 Iterables 类所在的 .jar 的位置从加载。它吐了出来：

```
java.lang.IllegalArgumentException: file:/C:/Documents and Settings/Erika Redmark/.m2/repository/p2/osgi/bundle/com.google.collect/0.8.0.v201102150722/com.google.collect-0.8.0.v201102150722.jar 
```

这就是我现在卡住的地方。这个 google-collections jar 似乎不知从何而来，我不知道如何阻止它。只要它被解决，我的单元测试就会失败。如何阻止第谷尝试获取旧的 Google 收藏？

澄清一下，这并没有停止构建和部署；插件更新站点在 CI 平台上，我们已经能够在不同的 Eclipse IDE 上安装插件，所以这个问题只影响测试。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:52:56.217

插件 com.google.collect 0.8.0.v201102150722 是您在 POM 中配置的 Helios p2 存储库的一部分。这意味着该插件是[目标平台](http://wiki.eclipse.org/Tycho/Target_Platform)的一部分，因此可用于解决依赖关系。

如果要确保不使用捆绑包，请确保它不是目标平台的一部分。在您的情况下，最简单的方法是[从目标平台显式删除插件](http://wiki.eclipse.org/Tycho/Target_Platform#Filtering)：

```
<plugin>
   <groupId>org.eclipse.tycho</groupId>
   <artifactId>target-platform-configuration</artifactId>
   <version>${tycho-version}</version>
   <configuration>
      <filters>
         <filter>
            <type>eclipse-plugin</type>
            <id>com.google.collect</id>
            <removeAll />
         </filter>
      </filters>
   </configuration>
</plugin> 
```

接下来，您需要确保 guava 插件是目标平台的一部分。您可以通过以下方式[将 Maven 存储库中的工件添加到目标平台](http://wiki.eclipse.org/Tycho/Target_Platform#POM_Dependencies)：

*   `dependencies`在 POM 部分中声明对工件的 Maven 依赖项。你已经正确地做到了。
*   将配置参数设置`<pomDependencies>`为`consider`Tycho 的`target-platform-configuration`插件。

请注意，这通常仅在引用的工件已经是 OSGi 包时才有效。这里就是这种情况：`com.google.guava:guava:14.0.1`似乎具有 OSGi 所需的所有清单标头。

这应该会给你想要的结果：在测试运行时，现在应该使用 guava 来匹配你的`com.google.common.*`包导入。

* * *

还有一个关于在 Tycho 中声明依赖的一般说明：在 Tycho 中，您只能在 PDE 源文件中声明依赖`META-INF/MANIFEST.MF`，`feature.xml`等等。

在 POM 中声明的正常 Maven 样式的依赖项**不会**将依赖项添加到项目中。如上所述，POM 依赖项只能将工件添加到目标平台，即 Tycho 可以用来解析 PDE 源文件中声明的依赖项的工件集。所以最后，POM 依赖**可能**成为已解析依赖的一部分，但前提是依赖解析器选择它来匹配声明的依赖之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:09:16.600

默认情况下，tycho 会将您在本地 maven 存储库中安装的任何 p2 工件添加到目标平台。如果 bundle com.google.collect 导出了你导入的包，它可能是有线的。

要阻止 tycho 包含任何本地安装的工件，您可以使用 -Dtycho.localArtifacts=ignore （或者，从本地 maven 存储库中删除不需要的包）

请参阅[http://wiki.eclipse.org/Tycho/Release_Notes/0.16#Improvements_and_Fixes](http://wiki.eclipse.org/Tycho/Release_Notes/0.16#Improvements_and_Fixes)

# sql-server-2008 - 在选择语句中将子字符串转换为日期时间字段

> ID：15795291
> 
> 赞同：0
> 
> 时间：2013-04-03T18:35:52.670
> 
> 标签：sql-server-2008

我从一列中选择一个子字符串来填充另一列：

```
select doc_id,imagevolume, Load_date = substring (location, 42, 10)
from [!DocImagedArchivedLocation] as datetime
where LOADDATE is null 
```

这为我提供了我想要加载日期的数据，但它是 NVCHAR 格式，如下所示：01_13_2004。我正在使用此 select 语句作为更新语句的一部分来填充加载日期字段，但似乎无法获得正确的语法来选择此子字符串并将其转换为日期时间字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:40:57.633

既然你说的是 2008 年，请查看这篇文章：[使用 T-SQL 创建日期](https://stackoverflow.com/questions/266924/create-a-date-with-t-sql)

如果您使用的是 2012 我会说，您需要使用 DATETIMEFROMPARTS 并将日期的不同部分放入函数中：http: [//msdn.microsoft.com/en-us/library/hh213233.aspx](http://msdn.microsoft.com/en-us/library/hh213233.aspx)

**或（评论更新）**

```
select 
doc_id,imagevolume, 
Load_date = CAST(substring (location, 48, 4) + '-' + substring (location, 45, 2) + '-' + substring (location, 42, 2)) AS DATETIME) -- year-month-day
from [!DocImagedArchivedLocation] as datetime
where LOADDATE is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-15T15:43:05.790

你必须做一些额外的操作；尝试类似的东西

```
select doc_id,imagevolume, Load_date = substring (location, 42, 10),
Load_Date2 = REPLACE(substring (location, 42, 10), '_', '/')
from [!DocImagedArchivedLocation] as datetime
where LOADDATE is null 
```

这会将其转换为 SQL Server 可以隐式转换为日期语法的 NVARCHAR 格式。但是，有很多警告；您的数据必须是干净的，并且您的服务器必须设置为期望与您正在导入的文件格式相同的日期（例如，美国与英国）。

# c# - 在 UNC 路径上使用 C# 创建快捷方式

> ID：15795303
> 
> 赞同：1
> 
> 时间：2013-04-03T18:36:34.750
> 
> 标签：c#, shortcut, unc

这是我使用 C# 创建快捷方式的代码。它仅适用于非 UNC 路径，f。前任。使用 "C:\Users\MsX\Documents\ABC" 有效，但使用 "\\abc\klk\somepath" 无效。

```
public static void CreateShortcut(string SourceFile, string ShortcutFile, string Description, string Arguments, string HotKey, string WorkingDirectory) {
      // Check necessary parameters first:
      if (String.IsNullOrEmpty(SourceFile))
        throw new ArgumentNullException("SourceFile");
      if (String.IsNullOrEmpty(ShortcutFile))
        throw new ArgumentNullException("ShortcutFile");

      // Create WshShellClass instance:
      var wshShell = new WshShellClass();

      // Create shortcut object:
      IWshRuntimeLibrary.IWshShortcut shorcut = (IWshRuntimeLibrary.IWshShortcut)wshShell.CreateShortcut(ShortcutFile);

      // Assign shortcut properties:
      shorcut.TargetPath = SourceFile;
      shorcut.Description = Description;
      if (!String.IsNullOrEmpty(Arguments))
        shorcut.Arguments = Arguments;
      if (!String.IsNullOrEmpty(HotKey))
        shorcut.Hotkey = HotKey;
      if (!String.IsNullOrEmpty(WorkingDirectory))
        shorcut.WorkingDirectory = WorkingDirectory;

      // Save the shortcut:
      shorcut.Save();
} 
```

如何创建显示到网络 UNC 文件夹的快捷方式？

谢谢

# database - 航空公司数据库原型

> ID：15795304
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:36:36.813
> 
> 标签：database, foreign-keys, primary-key, erd

我正在为一项任务设计一个航空公司数据库（无论如何都是一个大纲），并且似乎在绕圈子。

涉及三个表：

```
Customer        Booking_Reference        Flight

cust_id(pk)     reference_id(pk)         Flight_id(pk)
                cust_id(fk) 
```

预订参考可以有多个航班。

一个航班将有许多预订参考。

我试图打破多对多的关系。是否可以有一个以 flight_id 作为属性（列）和 booking_reference 作为行（数据）的关系表？如果是这样，就没有主键，据我所知，这是不行的。

或者，我可以制作具有 2 个属性和 booking_reference/flight 的复合主键的 booking_reference/flight 关系表，这将导致两个实体被重复但主键是唯一的（无论如何它的一半）。这是可接受的设计实践吗？

我打算在预订参考表中列出最多 8 个航班作为列（对于少于 8 个航班的条目，为 NULL），并为超过 8 个航班的客户提供一个新的 reference_id，但这似乎是当我对数据库了解得更多时，这更荒谬，导致更多的参考 id 和更多的 NULL 数据。

关于采取哪条路线的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:40:12.173

与其拥有八（或任意数量）列，不如创建有时称为连接表的三列：

```
Table: references_flights

id (Primary key)

reference_id (fk)

flight_id (fk) 
```

然后，您应该能够使用正确的 JOIN 查询它们之间的数据，但我会将其留给具有更多数据库专业知识的人。

# python - 将文本文件中的选定列读入python中的列表

> ID：15795306
> 
> 赞同：0
> 
> 时间：2013-04-03T18:36:38.673
> 
> 标签：python

我有一个包含以下内容的文本文件 bat.txt：

```
 Originator     (#/255)           Nexthop [outgoingIF]:   Potential nexthops ... [B.A.T.M.A.N. adv 0.2-beta r1457, MainIF/MAC: eth0/fe:fe:00:00:01:01]
fe:fe:00:00:05:01  (223) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:03:01 ( 96) fe:fe:00:00:02:01 (223)
fe:fe:00:00:04:01  (233) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:03:01 (100) fe:fe:00:00:02:01 (233)
fe:fe:00:00:02:01  (254) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:02:01 (254) fe:fe:00:00:03:01 (100)
fe:fe:00:00:07:01  (203) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:02:01 (203) fe:fe:00:00:03:01 ( 88)
fe:fe:00:00:08:01  (196) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:03:01 (  0) fe:fe:00:00:02:01 (196)
fe:fe:00:00:03:01  (244) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:03:01 (104) fe:fe:00:00:02:01 (244)
fe:fe:00:00:09:01  (184) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:02:01 (184) fe:fe:00:00:03:01 ( 72)
fe:fe:00:00:06:01  (214) fe:fe:00:00:02:01 [      eth0]: fe:fe:00:00:03:01 ( 76) fe:fe:00:00:02:01 (214) 
```

我想将 Originator 和 Nexthop 列减去标题复制到包含两个子列表的 python 列表中，例如 somelist = [[],[]]

```
with open('bat.txt', 'r') as file:
...     file.readline() # to skip the first line
...     rows = [[int(x) for x in line.split()[:-1]] for line in file]
...     cols = [list(col) for col in zip(*rows)] 
```

这应该将所有列读入列表 col。只选择我想要的列的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:46:03.587

这就是你所追求的吗？

```
#!/usr/bin/env python

orig=[]
nex=[]

with open("bat.txt") as fd:
    fd.readline()
    for line in fd:
        orig.append(line.split()[0])
        nex.append(line.split()[2])

col=[i for i in zip(orig, nex)] 
```

内容`col`：

```
('fe:fe:00:00:05:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:04:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:02:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:07:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:08:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:03:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:09:01', 'fe:fe:00:00:02:01')
('fe:fe:00:00:06:01', 'fe:fe:00:00:02:01') 
```

# c# - 如何配置 ShowDialog？

> ID：15795310
> 
> 赞同：0
> 
> 时间：2013-04-03T18:37:03.203
> 
> 标签：c#, profiling, keyboard-hook, performance

我接手了一个键盘挂钩项目，并对其进行了一些修饰。过去只有 4 个表格，在这 4 个文件中包含所有逻辑和数学。很多*小时*后，我在将所有内容解耦后才将程序重新组合在一起。最新的一点是在主窗口上使用 Model-View-Presenter 设计概念。我所有的测试都在我的机器上运行良好，程序自然而然地在目标计算机上运行。

目标计算机是具有 2gb 内存的简单 x86 Intel Atom 处理器。它们上有与键盘上的 F13-F18 相关的按钮（这是我的键盘挂钩程序发挥作用的地方）。我的开发 PC 是半坚固的 6 核 AMD x64 机器，具有 8GB 内存。我想做的一件事是测试一种将这些功能按钮设置为特定任务的方法。我所有的单元测试都通过了这部分。当我单击新任务类型时，它会按需要工作。

“酷”，我说，“让我们看看它的实际效果”，所以我在 Visual Studio 中运行。我的程序 F9-F12 是挂钩的关键。现在，只有在主窗口打开时按下其中一个挂钩键时，分配窗口才会打开。如果该主窗口未打开，则执行任务。所以我打开我的主窗口并按 F9 并显示分配窗口，但我无法单击任何内容大约 4 秒。然后它“赶上”并执行我点击的操作。我想这可能是我的调试器，所以我去了 bin 文件夹并直接运行应用程序并进行同样的处理。

我想这可能是一个权限问题，所以我以管理员身份运行并遇到同样的问题。我想知道它在目标计算机上会有多糟糕。我将 bin 文件夹复制到闪存驱动器，将内容复制到 Program Files 并运行它。它工作得很好（在一定程度上很好）但问题不存在。在对话框可见后，我可以立即选择我想要的任何任务。

一件奇怪的事情是，尽管我的键盘挂钩在尝试重新分配 11 次后停止工作……但这是一个单独的问题。所以我想我记得有人说，使用分析器。好吧，我的视觉工作室有一个，所以我打开了它，但我无法确定返回的数据的正面或反面。我会发布代码，但我不知道该发布什么。我什`System.Console.Write(".");` 至在我认为有问题的区域周围使用，但这不是问题

```
protected override void theHook_RegisteredKeyPressed(System.Windows.Forms.Keys key)
{
    if (TakeOver)
    {
        if (!Busy)
        {
            busy = true;
            LibraryTrace.Start("NewKeyAssignment", key);
            using (var window = new AssignmentTypePanel())
            {
                presenter = new TaskPresenter(window, theList[key].Task);
                window.Presenter = presenter;
                //execution will not continue past here until window is closed
                window.ShowDialog();
            }
            theList[key] = new TaskKey(key, presenter.Task);
            LibraryTrace.End("NewKeyAssignment", theList[key].Task.ToString());
            busy = false;
        }
   }
   else
   {
       base.theHook_RegisteredKeyPressed(key);
   }
} 
```

所以我被困住了。我不知道要输入什么，要问什么。关于如何找到这个问题的根源的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:14:23.640

我在使用 winforms 开发的应用程序中遇到了类似的问题——“服务器端”操作非常快，但显示结果的表单仍然需要大约 5 秒的时间才能显示出来。
经过调查，事实证明 winforms 存在一些已知的性能问题。
有一些优化建议（比如[这里](https://stackoverflow.com/questions/59479/optimize-windows-form-load-time)或[这里](https://stackoverflow.com/questions/6885041/how-to-load-a-winforms-app-quickly)以及我当时发现但现在似乎无法找到的其他一些建议）。

实际上，在我的情况下，它们都没有帮助。
我最终意识到真正的瓶颈是创建和显示一个新表单。我最终做的有点像 hack——
我将所有控件放在主窗体上，其中一些是隐藏的，并通过隐藏一些控件并显示其他控件来模拟表单的变化。
这很丑陋，不会扩大规模，但在我的情况下效果很好。

# performance - 在 R 中创建循环矩阵的有效方法

> ID：15795318
> 
> 赞同：7
> 
> 时间：2013-04-03T18:37:17.847
> 
> 标签：performance, r, matrix

我想从 R 中的向量创建一个循环矩阵。循环矩阵是具有以下形式的矩阵。

```
1 2 3 4
4 1 2 3
3 4 1 2
2 3 4 1 
```

第二行与第一行相同，只是最后一个元素在开头，依此类推。

现在我有了向量，比如 (1, 2, 3, 4)，我想找到一种有效（快速）的方法来创建这个矩阵。实际上，这些数字不是整数，可以是任何数字。

这就是我现在正在做的事情。

```
x <- 1:4
n <- length(x)
mat <- matrix(NA, n, n)
for (i in 1:n) {
    mat[i, ] <- c(x[-(1:(n+1-i))], x[1:(n+1-i)])
} 
```

我想知道是否有更快的方法来做到这一点？我需要一遍又一遍地生成这种矩阵。一步的小改进将产生很大的不同。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:49:49.870

这利用了矢量回收（它会引发警告）：

```
circ<-function(x) { 
    n<-length(x)
    matrix(x[matrix(1:n,n+1,n+1,byrow=T)[c(1,n:2),1:n]],n,n)
}
circ(letters[1:4])
#     [,1] [,2] [,3] [,4]
#[1,] "a"  "b"  "c"  "d" 
#[2,] "d"  "a"  "b"  "c" 
#[3,] "c"  "d"  "a"  "b" 
#[4,] "b"  "c"  "d"  "a" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:14:23.737

```
rotn <- function(x,n) rep(x,2)[n:(n+length(x)-1)]
sapply(c(1,4:2), rotn, x=1:4)
     [,1] [,2] [,3] [,4]
[1,]    1    4    3    2
[2,]    2    1    4    3
[3,]    3    2    1    4
[4,]    4    3    2    1 
```

如果您在 sapply 循环之外构造双长度向量，则函数内部可能会更快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T19:16:15.817

```
circulant <- function(x, nrow = length(x)) {
    n <- length(x)
    matrix(x[(1:n - rep(1:nrow, each=n)) %% n + 1L], ncol=n, byrow=TRUE)
}

circulant(1:4)
#      [,1] [,2] [,3] [,4]
# [1,]    1    2    3    4
# [2,]    4    1    2    3
# [3,]    3    4    1    2
# [4,]    2    3    4    1

circulant(7:9, nrow=5)
#      [,1] [,2] [,3]
# [1,]    7    8    9
# [2,]    9    7    8
# [3,]    8    9    7
# [4,]    7    8    9
# [5,]    9    7    8

circulant(10:1, nrow=2)
#      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
# [1,]   10    9    8    7    6    5    4    3    2     1
# [2,]    1   10    9    8    7    6    5    4    3     2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-03T19:27:51.370

以下是建议解决方案的一些基准。

ndoogan带头！

**基准**

```
x <- 1:100
microbenchmark(
  OP.Circulant(x),
  Josh.Circulant(x),
  Dwin.Circulant(x) ,
  Matt.Circulant(x),
  Matt.Circulant2(x),
  Ndoogan.Circulant(x),

  times=100
)
# Unit: microseconds
#                   expr       min         lq    median          uq        max
# 1    Dwin.Circulant(x)  1232.775  1288.1590  1358.999   1504.4490   2900.430
# 2    Josh.Circulant(x)  1081.080  1086.3470  1097.863   1125.8745   2526.237
# 3    Matt.Circulant(x) 61924.920 64579.3735 65948.152 129359.7895 137371.570
# 4   Matt.Circulant2(x) 12746.096 13499.0580 13832.939  14346.8570  16308.040
# 5 Ndoogan.Circulant(x)   469.502   487.2285   528.591    585.8275   1522.363
# 6      OP.Circulant(x)  1291.352  1363.8395  1421.509   1513.4950   2714.707 
```

用于基准测试的代码

```
OP.Circulant <- function(x) {
    n <- length(x)
    mat <- matrix(NA, n, n)

    for (i in 1:n) {
        mat[i, ] <- c(x[-(1:(n + 1 - i))], x[1:(n + 1 - i)])
    }
    return(mat)

}

rotn <- function(x, n) rep(x, 2)[n:(n + length(x) - 1)]

Dwin.Circulant <- function(x) {
    n <- length(x)
    return(t(sapply(x[c(1L, n:2)], rotn, x = x)))
}

Josh.Circulant <- function(x, nrow = length(x)) {
    m <- length(x)
    return(matrix(x[(1:m - rep(1:nrow, each = m))%%m + 1L],
                  ncol = m, byrow = TRUE))
}

Matt.Circulant <- function(x) {
    n <- length(x)
    mat <- matrix(, n, n)
    for (i in seq(-n + 1, n - 1)) {
        mat[row(mat) == col(mat) - i] = x[i%%n + 1]
    }
    return(mat)
}

Matt.Circulant2 <- function(x) {
    n <- length(x)
    return(rbind(x[], do.call(rbind, lapply(seq(n - 1),
                            function(i) c(tail(x, i), head(x, -i))))))
}

Ndoogan.Circulant <-function(x) {
    n <- length(x)
    suppressWarnings(
      matrix(x[matrix(1:n,n+1,n+1,byrow=T)[c(1,n:2),1:n]],n,n))
}

# check for identical results (all TRUE)
check <- OP.Circulant(x)
identical(check, OP.Circulant(x))
identical(check, Dwin.Circulant(x))
identical(check, Josh.Circulant(x))
identical(check, Matt.Circulant(x))
identical(check, Matt.Circulant2(x))
identical(check, Ndoogan.Circulant(x)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-17T15:05:09.503

这是使用 Rcpp 的解决方案：

```
library(Rcpp) 
cppFunction("
IntegerMatrix myCirculant(const int n) {

    IntegerMatrix res(n);

    int val  = 1;
    int dval = 2;

    for (int i = 0; i < n*n; i++) {

        res[i] = val;

        if (val > 1) {

          if (val != dval) {
            val--;
          } else {

            if (dval == n) {
              dval = 1;
            } else {
              dval++;
            }

          }
        } else {
          val = n;
        }
    }
    return res; 
}")

myCirculant(100) 
```

仅适用于整数，`Ndoogan.Circulant(1:100)`占用我机器时间的 1/10。

# mongodb - 流星错误未发送到客户端

> ID：15795320
> 
> 赞同：0
> 
> 时间：2013-04-03T18:37:26.367
> 
> 标签：mongodb, meteor

在我有重复密钥的情况下，我正在尝试向客户端发送 Meteor.Error 。

在客户端，回调中的“错误”是未定义的（因为此时，minimongo 无法检查唯一键索引）

在服务器上，回调中的“错误”正确地引发了一个异常，即存在重复键，因此不会插入。但是，“Meteor.Error”永远不会发送给客户端。

```
Links.insert({
  link: link_to_add,
  user_id: this.userId
}, function(error, result) {
  if (error != null) {
    throw new Meteor.Error(409, 'Link already added');
  }
}); 
```

我究竟做错了什么？如果有更好的方法可以做到这一点，我愿意接受其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:11:59.533

现在对我来说似乎很明显，但问题是我没有在 Meteor.call 中捕获错误。

```
Meteor.call('add_link', {
  link: link_to_add,
  tag: tag_to_add
}, function(error, result) {
  // the error is correctly being captured here
  return console.log(error);
}); 
```

# mysql - 如何选择两个带有求和函数的语句

> ID：15795323
> 
> 赞同：-3
> 
> 时间：2013-04-03T18:37:52.080
> 
> 标签：mysql, sql, sql-server-2008, sqlite

我正在尝试加入这两个表，但在使用任何联接时都会出错。Union 将起作用，但返回两行中的所有值，而不是我需要的 3。这是我到目前为止所拥有的，它返回的是它下面。任何帮助都会很棒:)

```
select C.CustId ,SUM(Ia.Amount) as total
from Invoice I 
    inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
    inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
WHERE DATEPART(mm, I.InvoiceDate) = DATEPART(mm, DATEADD(mm, -1, getdate()))
and DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(yyyy, -0, getdate()))
group by C.CustId
union
select C.CustId ,SUM(Ia.Amount) as total2
from Invoice I 
    inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
    inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
WHERE DATEPART(mm, I.InvoiceDate) = DATEPART(mm, DATEADD(mm, -2, getdate()))
and DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(yyyy, -0, getdate()))
group by C.CustId 
```

返回的结果在下面，所需的结果在下面

```
*Custid 总
a2
b 9
b 12
16
d 3
d 12

Custid 总计 总计 2
a2         
乙 9 12
16
d 3 12
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:40:02.757

Since you are using MySQL, I would approach by implementing in-line sqlvariables (via my first "from" alias. The @FirstOfThisMonth is computed by subtracting whatever the current day of month is from the current date (less 1).

Ex: Today is April 3rd (3rd day of month). So, -3 = March 31... PLUS 1 brings back to April 1 of current month. Once that date is determined, I can now subtract an entire month for first of PREVIOUS month (March 1st), and subtract 2 months for Feb 1st.

Now that this complexity is done ONCE, we can use these variables instead of constant datepart extraction for month and year. Especially if you consider trying to do two months ago from Feb 10th. (First of current is Feb 1, one month back is Jan 1, two months back is Dec 1 of prior year).

NOW, I simply SUM() based on a case when condition.

if the Invoice Date is >= @TwoMonthsAgo AND LESS THAN @LastMonth, that goes into the two-months-ago total. the next is Invoice Date >= @LastMonth AND LESS THAN @FirstOfThisMonth for last month's total.

Now, you have a rolling two-month window... If you wanted to go longer, just add another monthly variable reference and SUM() its criteria.

Finally the WHERE clause can only include invoices that are greater or equal to the @TwoMonthsAgo so it doesn't have to go through the entire database

```
select 
      C.CustId,
      SUM( CASE when I.InvoiceDate >= @TwoMonthsAgo AND I.InvoiceDate < @LastMonth
           then Ia.Amount else 0 end ) as TotalTwoMonthsAgo,
      SUM( CASE when I.InvoiceDate >= @LastMonth AND I.InvoiceDate < @FirstOfThisMonth
           then Ia.Amount else 0 end ) as TotalLastMonth
   from 
      ( select @FirstOfThisMonth := date_add( now(), INTERVAL -dayofmonth(now())+1 day ),
               @LastMonth := date_add( @myDate, INTERVAL -1 month ),
               @TwoMonthsAgo := date_add( @myDate, INTERVAL -2 month )) sqlvars,
      Invoice I 
         inner join InvoiceAmtSummary Ia  
            on I.GUIDInvoice = Ia.GUIDInvoice
         inner join Customer C 
            on  C.GUIDCustomer = I.GUIDCustomer
   WHERE 
          I.InvoiceDate >= @TwoMonthsAgo
      AND I.InvoiceDate < @FirstOfThisMonth
   group by 
      C.CustID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:45:39.433

```
select c.custid, c.total, c2.total2
from (select C.CustId ,SUM(Ia.Amount) as total
  from Invoice I 
      inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
      inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
  WHERE DATEPART(mm, I.InvoiceDate) = DATEPART(mm, DATEADD(mm, -1, getdate()))
  and DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(yyyy, -0, getdate()))
  group by C.CustId) c
 inner join
  (select C.CustId ,SUM(Ia.Amount) as total2
  from Invoice I 
      inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
      inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
  WHERE DATEPART(mm, I.InvoiceDate) = DATEPART(mm, DATEADD(mm, -2, getdate()))
  and DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(yyyy, -0, getdate()))
  group by C.CustId) c2 on c.custid = c2.custid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:56:03.333

我认为您正在尝试拥有 2 列不同月份的 SUM。这是您可以执行的操作：

```
Select C.CustId ,
Sum(Case DATEPART(mm, I.InvoiceDate) 
When  DATEPART(mm, DATEADD(mm, -1, getdate())) Then Ia.Amount 
Else 0 End) As 'Total1',
Sum(Case DATEPART(mm, I.InvoiceDate) 
When  DATEPART(mm, DATEADD(mm, -2, getdate())) Then Ia.Amount 
Else 0 End) As 'Total2'
from Invoice I 
    inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
    inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
WHERE 
 DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(yyyy, -0, getdate()))
group by C.CustId 
```

我正在使用 Case 来避免递归连接。

# android - IndexOutOfBoundException 通过单击列表视图中的任意点

> ID：15795325
> 
> 赞同：0
> 
> 时间：2013-04-03T18:38:00.173
> 
> 标签：android, arraylist, onitemclicklistener

我要退出 frustradet，但我不明白这个错误的意义，我希望你们中的一些人能帮助我。我将创建一个通过几个 ListView 的菜单，它适用于第一面，但在菜单的第二面，它会在任何点击时崩溃。我尝试了一些方法，但是 OnItemClickListener 不起作用或出现 IndexOutOfBoundException 错误。为了避免索引粉碎，我安装了一个 try/catch 支架

我希望该错误很容易解决:)并感谢您的帮助。我知道错误在“位置”的第 50 行，但我没有找到任何解决方案。

```
package com.sample.menuv2;
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class Menu extends Activity {

    String name, name2, name3;
    HashMap<String, Object> user, user2, user3;
    SimpleAdapter aa, ab, ac;
    ArrayList<HashMap<String, Object>> myList, myList2, myList3; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ListView mainListView = (ListView) findViewById(R.id.main_listview);      

        // Create Hash Map
        myList = new ArrayList<HashMap<String, Object>>();
        myList2 = new ArrayList<HashMap<String, Object>>();
        myList3 = new ArrayList<HashMap<String, Object>>();

        // Fill data
        addDataToList1();
        addDataToList2();
        addDataToList3();

        //Adapter
        aa = new SimpleAdapter(this, myList, R.layout.row, new String[] {"ueberschrift", "sub", "icon"}, new int[] {R.id.txt_ueberschrift, R.id.txt_sub, R.id.img_left});
        ab = new SimpleAdapter(this, myList2, R.layout.row, new String[] {"ueberschrift", "sub", "icon"}, new int[] {R.id.txt_ueberschrift, R.id.txt_sub, R.id.img_left});
        ac = new SimpleAdapter(this, myList3, R.layout.row, new String[] {"ueberschrift", "sub", "icon"}, new int[] {R.id.txt_ueberschrift, R.id.txt_sub, R.id.img_left});

        mainListView.setAdapter(aa);

       mainListView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                          

              user = myList.get(position);
              name = (String)user.get("ueberschrift");      

              if (name ==  "001"){

                  myList.clear();
                  user2 = myList2.get(position);
                  name2 = (String)user2.get("ueberschrift");
                  mainListView.setAdapter(ab);
                  mainListView.requestLayout();

                  }

              if (name2 == "020"){

                myList2.clear(); 
                user3 = myList3.get(position);
                name3 = (String)user3.get("ueberschrift");
                mainListView.setAdapter(ac); 
                mainListView.requestLayout(); 
                   }

              if (name3 == "100"){

                myList2.clear();
                mainListView.setAdapter(ab);
                mainListView.requestLayout();    }

            }
          });  
       }

    public void addDataToList3() {
        HashMap<String, Object> map1 = new HashMap<String, Object>();
        map1.put("icon", R.drawable.user_image1);
        map1.put("ueberschrift", "100");
        map1.put("sub", "Ebene 3");

        HashMap<String, Object> map2 = new HashMap<String, Object>();
        map2.put("icon", R.drawable.user_image2);
        map2.put("ueberschrift", "200");
        map2.put("sub", "Ebene 3");

        HashMap<String, Object> map3 = new HashMap<String, Object>();
        map3.put("icon", R.drawable.user_image3);
        map3.put("ueberschrift", "300");
        map3.put("sub", "Ebene 3");

        HashMap<String, Object> map4 = new HashMap<String, Object>();
        map4.put("icon", R.drawable.user_image4);
        map4.put("ueberschrift", "400");
        map4.put("sub", "Ebene 3");

        HashMap<String, Object> map5 = new HashMap<String, Object>();
        map5.put("icon", R.drawable.user_image5);
        map5.put("ueberschrift", "500");
        map5.put("sub", "Ebene 3");

        HashMap<String, Object> map6 = new HashMap<String, Object>();
        map6.put("icon", R.drawable.user_image5);
        map6.put("ueberschrift", "600");
        map6.put("sub", "Ebene 3");

        myList3.add(map1);
        myList3.add(map2);
        myList3.add(map3);
        myList3.add(map4);
        myList3.add(map5);
        myList3.add(map6);

    }

    public void addDataToList2() {
        HashMap<String, Object> map01 = new HashMap<String, Object>();
        map01.put("icon", R.drawable.user_image1);
        map01.put("ueberschrift", "010");
        map01.put("sub", "Ebene 2");

        HashMap<String, Object> map02 = new HashMap<String, Object>();
        map02.put("icon", R.drawable.user_image2);
        map02.put("ueberschrift", "020");
        map02.put("sub", "Ebene 2");

        HashMap<String, Object> map03 = new HashMap<String, Object>();
        map03.put("icon", R.drawable.user_image3);
        map03.put("ueberschrift", "030");
        map03.put("sub", "Ebene 2");

        HashMap<String, Object> map04 = new HashMap<String, Object>();
        map04.put("icon", R.drawable.user_image4);
        map04.put("ueberschrift", "040");
        map04.put("sub", "Ebene 2");

        HashMap<String, Object> map05 = new HashMap<String, Object>();
        map05.put("icon", R.drawable.user_image5);
        map05.put("ueberschrift", "050");
        map05.put("sub", "Ebene 2");

        HashMap<String, Object> map06 = new HashMap<String, Object>();
        map06.put("icon", R.drawable.user_image5);
        map06.put("ueberschrift", "060");
        map06.put("sub", "Ebene 2");

        HashMap<String, Object> map07 = new HashMap<String, Object>();
        map07.put("icon", R.drawable.user_image3);
        map07.put("ueberschrift", "070");
        map07.put("sub", "Ebene 2'");

        myList2.add(map01);
        myList2.add(map02);
        myList2.add(map03);
        myList2.add(map04);
        myList2.add(map05);
        myList2.add(map06);
        myList2.add(map07);
    }

    public void addDataToList1(){
        HashMap<String, Object> map1 = new HashMap<String, Object>();
        map1.put("icon", R.drawable.user_image1);
        map1.put("ueberschrift", "001");
        map1.put("sub", "Ebene 1");

        HashMap<String, Object> map2 = new HashMap<String, Object>();
        map2.put("icon", R.drawable.user_image2);
        map2.put("ueberschrift", "002");
        map2.put("sub", "Ebene 1");

        HashMap<String, Object> map3 = new HashMap<String, Object>();
        map3.put("icon", R.drawable.user_image3);
        map3.put("ueberschrift", "003");
        map3.put("sub", "Ebene 1");

        HashMap<String, Object> map4 = new HashMap<String, Object>();
        map4.put("icon", R.drawable.user_image4);
        map4.put("ueberschrift", "004");
        map4.put("sub", "Ebene 1");

        HashMap<String, Object> map5 = new HashMap<String, Object>();
        map5.put("icon", R.drawable.user_image5);
        map5.put("ueberschrift", "005");
        map5.put("sub", "Ebene 1");

        HashMap<String, Object> map6 = new HashMap<String, Object>();
        map6.put("icon", R.drawable.user_image5);
        map6.put("ueberschrift", "006");
        map6.put("sub", "Ebene 1");

        myList.add(map1);
        myList.add(map2);
        myList.add(map3);
        myList.add(map4);
        myList.add(map5);
        myList.add(map6);
    }
} 
```

和 LogCat 屏幕：

```
04-02 23:54:36.681: E/AndroidRuntime(720): FATAL EXCEPTION: main
04-02 23:54:36.681: E/AndroidRuntime(720): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0
04-02 23:54:36.681: E/AndroidRuntime(720):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-02 23:54:36.681: E/AndroidRuntime(720):  at java.util.ArrayList.get(ArrayList.java:304)
04-02 23:54:36.681: E/AndroidRuntime(720):  at com.sample.menuv2.Menu$1.onItemClick(Menu.java:50)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.os.Handler.handleCallback(Handler.java:605)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.os.Looper.loop(Looper.java:137)
04-02 23:54:36.681: E/AndroidRuntime(720):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-02 23:54:36.681: E/AndroidRuntime(720):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 23:54:36.681: E/AndroidRuntime(720):  at java.lang.reflect.Method.invoke(Method.java:511)
04-02 23:54:36.681: E/AndroidRuntime(720):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-02 23:54:36.681: E/AndroidRuntime(720):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-02 23:54:36.681: E/AndroidRuntime(720):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:41:33.290

你想做什么？

```
 if (name ==  "001"){

          "myList.clear();"
          This code clears data in mylist();

   "user2 = myList2.get(position);"     
   This code retrieves position of other list thats y error rises

              name2 = (String)user2.get("ueberschrift");
              mainListView.setAdapter(ab);
              mainListView.requestLayout();

              } 
```

# ios - 检查运行时是否正在执行方法

> ID：15795326
> 
> 赞同：2
> 
> 时间：2013-04-03T18:38:00.273
> 
> 标签：ios, objective-c

是否可以检查特定方法是否在 iOS 上的特定时间点执行？

例如，我想知道方法*sampleMethod*是否在应用程序开始执行后 1 分钟运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:41:14.977

你不能为此使用 _cmd 吗？

```
NSLog(@"Method name = %@", NSStringFromSelector(_cmd)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:40:56.507

在方法中使用断点和/或`NSLog(NSString)`函数。

# php - 检查 cookie 是否存在于另一个域中

> ID：15795334
> 
> 赞同：1
> 
> 时间：2013-04-03T18:38:15.427
> 
> 标签：php, cookies, session-cookies

我实际上为以下域设置了以下 cookie：

```
setcookie("thing", $data, time()+3600, "/", "example1.com", 1); 
```

cookie 是从以下域设置的：example2.com

当我尝试搜索 cookie '东西'时，我似乎找不到它。如何在一个域上设置一个 cookie，如果我搜索它，它将保留在另一个域上？

更新：

我基本上想将一个值从域 A 传递到域 B。当访问者到达域 A 时，他/她被重定向并将一个值传递到域 B，我想在那里捕获。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:39:53.493

每个浏览器都会阻止它。

Cookies 不能在域之间共享。 [https://wikipedia.org/wiki/Same-Origin-Policy](https://wikipedia.org/wiki/Same-Origin-Policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:41:01.397

我很确定不可能为另一个域创建 cookie - 这将是一个非常重要的安全漏洞。

请参阅@scones 的链接。

# wpf - WPF 中的 VB.NET ListView/ListBox 检查项目

> ID：15795336
> 
> 赞同：0
> 
> 时间：2013-04-03T18:38:25.697
> 
> 标签：wpf, vb.net, listview, listbox

如何在 a `listview`(或 a `listbox`) 中简单地添加已选中（或未选中）的项目？

我已经搜索了很长时间，但我总是在 Windows 窗体上找到有关WPF 中似乎不存在的`CheckedListBox`对象和属性的主题。`ListView.Checked`

我成功地用活动目录中的一些组填充列表，但我不知道如何通过简单的检查（或隐藏它们）来显示它们。

我需要导入一些参考资料吗？

我正在使用带有 Visual Studio Express 2012 的 VB.NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:42:10.340

您需要`ItemTemplate`为`ListBox`:

```
 <ListBox ItemsSource="{Binding}" SelectionMode="Extended">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType=ListBoxItem}}"
                              Content="{Binding}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

# python - Bash/python/perl 魔法获取跨多个日志文件的聚合日期时间

> ID：15795337
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:38:33.460
> 
> 标签：python, linux, perl, bash, text-manipulation

我有一个目录 ( `/home/myuser/logs`)，其中包含过去 5 天的以下日志文​​件：

```
applogs_20130402.txt
applogs_20130401.txt
applogs_20130331.txt
applogs_20130330.txt 
```

每个“applog”的每一行都有相同的结构，只是数据不同：

```
<timestamp> | <fruit> | <color> | <cost> 
```

例如，`applogs_20130402.txt`可能看起来像：

```
23:41:25 | apple | red | 53
23:41:26 | kiwi | brown | 12
23:41:29 | banana | yellow | 1023
... (etc., every line is pipe delimited like this) 
```

我想创建一个“主日志”，将所有 5 个日志文件中的所有日志条目（结构化的、管道分隔的行）组合到一个文件中，其中所有时间戳都按时间顺序排列。此外，我还需要时间戳中反映的日期。

因此，例如，如果`applogs_20130402.txt`和`applogs_20130401.txt`是目录中仅有的 2 个 applog，它们分别看起来像这样：

```
applogs_20130402.txt:
=====================
23:41:25 | apple | red | 53
23:41:26 | kiwi | brown | 12
23:41:29 | banana | yellow | 1023

applogs_20130401.txt:
=====================
23:40:33 | blueberry | blue | 4
23:41:28 | apple | green | 81
23:45:49 | plumb | purple | 284 
```

然后，我想要一个`masterlog.txt`看起来像这样的文件：

```
2013-04-01 23:40:33 | blueberry | blue | 4
2013-04-01 23:41:28 | apple | green | 81
2013-04-01 23:45:49 | plumb | purple | 284
2013-04-02 23:41:25 | apple | red | 53
2013-04-02 23:41:26 | kiwi | brown | 12
2013-04-02 23:41:29 | banana | yellow | 1023 
```

我在 Ubuntu 上，可以访问 Bash、python 和 perl，并且不喜欢使用哪种解决方案。通常我会尝试“最佳尝试”并发布它，但我从未在 Linux 上处理过这样的聚合数据。显然，与我上面的示例不同，日志有数千行。所以手动做所有事情都不是一种选择；-) 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:05:32.010

您可以在命令行中使用 Perl 以及如下[排序](http://ss64.com/bash/sort.html)：

```
perl -n -e 'printf "%d-%02d-%02d %s", $ARGV =~ m/_(\d{4})(\d\d)(\d\d)/, $_;' *.txt | sort -n 
```

[调用`perl`with`-n`](http://perldoc.perl.org/perlrun.html)包裹`while (<>) { }`你的程序，在本例中是`-e ''`. 在其中，我们[`printf`](http://perldoc.perl.org/functions/printf.html)是当前行 ( `$_`)，并在前面放置来自文件名的日期，该文件名[存储在`$ARGV`](http://perldoc.perl.org/perlvar.html). 我们使用[正则表达式](http://perldoc.perl.org/perlre.html)来获取年、月和日，[`m//`](http://perldoc.perl.org/functions/m.html)由于来自`printf`.

对于这个程序，我们传递文件夹中的所有 txt 文件。结果通过管道传送到命令行工具 sort，该工具使用 -n 标志对行进行数字排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:04:25.140

为了完整起见，这里有一个 (g)awk 单行代码来完成同样的任务：

```
gawk '{ printf "%s %s\n", gensub(/.+_([0-9]{4})([0-9]{2})([0-9]{2}).+/, "\\1-\\2-\\3", "", FILENAME), $0 }' applogs_* | sort 
```

# visual-studio - 工作项定制 - 转换和状态中的规则行为

> ID：15795342
> 
> 赞同：0
> 
> 时间：2013-04-03T18:38:45.247
> 
> 标签：visual-studio, tfs

**简单用例**：在工作项工作流中，字段必须在 TRANSITION="Active to Resolved" 中为 REQUIRED，在 State="Resolved" 中为 READONLY。

**自定义**：对于该字段，我在转换详细信息中设置了 REQUIRED 规则，在状态详细信息中设置了规则 READONLY。

**行为**：当我将工作项状态从 Active 更改为 Resolved（不保存）时，该字段变为 REQUIRED 和 READONLY。我期望该字段仅在将工作项保存为 Resolved 而不是在转换期间才切换为 READONLY。

**问题**：为什么在转换中应用 READONLY 规则？这是工作流的常见行为吗？

* * *

我正在使用 TFS 2010。要编辑工作项模板，我正在使用 Team Explroer Power 工具（流程编辑器）。工作项行为通过团队资源管理器和团队 Web 访问进行测试。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:32:32.307

在这种情况下，`READONLY`条件*应该*只在保存后才被评估，但它不会。但是，您可以将其包装在一个[`WHENNOT`](http://msdn.microsoft.com/en-us/library/ms194966%28v=vs.100%29.aspx)条件中（尽管这不是理想的解决方案，因为您的文件必须在状态转换之前填充）。例如：

```
<STATE value="Resolved">
  <FIELDS>
    <FIELD refname="Your.Field">
      <WHENNOT field="Your.Field" value="">
        <READONLY />
      </WHENNOT>
    </FIELD>
  </FIELDS>
</STATE> 
```

# android - 覆盖不同值文件中的样式

> ID：15795347
> 
> 赞同：0
> 
> 时间：2013-04-03T18:39:03.257
> 
> 标签：android, android-layout

我正在使用新的 fontFamily 属性，以便我可以控制所用字体的重量。因为这仅在 API 级别 16 中引入，所以我在 values-v16 中创建了一个样式文件。在 values 和 values-v16 中声明颜色、大小等似乎有点傻，但必须应用所有样式。是否有办法在 values-v16 样式文件中声明字体系列并从文件的值版本中继承颜色、大小等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:08:11.833

使用样式继承。您可以将所有常见的（非 API 特定的）样式放入父级并在每个子级中继承它。

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

```
<style name="v16" parent="CommonStyle"> 
```

通用文件：

```
<style name="CommonStyle" > 
```

# javascript - 在 THREE.js 中为顶点生成网格面

> ID：15795348
> 
> 赞同：6
> 
> 时间：2013-04-03T18:39:05.083
> 
> 标签：javascript, three.js

我不确定答案是否应该是显而易见的，但它让我望而却步。我正在使用three.js 的Udacity 上做3D 图形类。我正处于需要生成 3d 网格的地步。

我已经正确生成了所有顶点，但我一直坚持为它们生成面。我想不出一种明显的方法来自动生成不重叠的面孔。我在网上搜索和搜索，但找不到任何有关它的信息。我不确定这是否是显而易见的，或者只是没有很好的记录。这是代码：

```
function PolygonGeometry(sides) {
    var geo = new THREE.Geometry();

    // generate vertices
    for ( var pt = 0 ; pt < sides; pt++ )
    {
        // Add 90 degrees so we start at +Y axis, rotate counterclockwise around
        var angle = (Math.PI/2) + (pt / sides) * 2 * Math.PI;

        var x = Math.cos( angle );
        var y = Math.sin( angle );

        // YOUR CODE HERE
        //Save the vertex location - fill in the code
        geo.vertices.push( new THREE.Vector3(x, y, 0) );
    }
    // YOUR CODE HERE
    // Write the code to generate minimum number of faces for the polygon.

    // Return the geometry object
    return geo;
} 
```

我知道最小面数的基本公式是 n-2。但我只是想不出一种方法来做到这一点而不会重叠。**我不想让任何人为我做我的工作，我想尽可能地自己弄清楚。但是有没有人可以指出我正确的方向或给我一个公式或什么的？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-17T15:58:05.963

## 您可以自动进行三角测量

对于大多边形，手动添加面可能是一项艰巨的工作。`triangulateShape`您可以使用以下方法自动将面添加到网格中`THREE.Shape.Utils`：

```
var vertices = [your vertices array]
var holes = [];
var triangles, mesh;
var geometry = new THREE.Geometry();
var material = new THREE.MeshBasicMaterial();

geometry.vertices = vertices;

triangles = THREE.Shape.Utils.triangulateShape ( vertices, holes );

for( var i = 0; i < triangles.length; i++ ){

    geometry.faces.push( new THREE.Face3( triangles[i][0], triangles[i][1], triangles[i][2] ));

}

mesh = new THREE.Mesh( geometry, material ); 
```

`vertices`您的顶点数组在哪里，`holes`您可以在多边形中定义孔。

**注意：**小心，如果你的多边形是自相交的，它会抛出一个错误。确保您的 vertices 数组表示有效（非相交）多边形。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T19:47:06.073

假设您以凹形方式和逆时针方式生成顶点，那么如果您有 3 个边（三角形），则将顶点 0 与 1 与 2 连接。如果您有 4 个边（四边形），则将顶点 0 与 1 与 2 连接（第一个三角形），然后顶点 0 和 2 和 3。如果你有 5 个边（五边形），你连接顶点 0 和 1 和 2（第一个三角形）然后顶点 0 和 2 和 3（第二个三角形，然后顶点 0 和 3 和 4 .我想你得到了模式。

# python - 使用相同的 bin 在 Python 中获取可变大小的 numpy 数组的 CDF？

> ID：15795353
> 
> 赞同：2
> 
> 时间：2013-04-03T18:39:30.023
> 
> 标签：python, numpy, scipy, pandas, statsmodels

我想为一些 numpy 数组（每个数组的长度不同）制作一组可比较的经验 CDF，并将它们存储在 pandas 数据框中：

```
a = scipy.randn(100)
b = scipy.randn(500)
# ECDF from statmodels
cdf_a = ECDF(a)
cdf_b = ECDF(b) 
```

问题是它们`cdf_a.x, cdf_a.y`的长度不同`cdf_b.x, cdf_b.y`，我希望它们的长度相同，即使用相同数量的 bin 来计算 CDF，以便可以从 pandas DataFrame 以相同的比例绘制它们。这是不可能的：

```
df = pandas.DataFrame({"cdf_a": cdf_a.y, "cdf_b": cdf_b.y}) 
```

由于 cdf 的长度不同。在计算 CDF 时如何分箱`a`和`b`使用类似的箱，以便我得到可比较的相同长度的向量？

这是最好的解决方案吗？

```
bins = np.linspace(0, 1, 10)
v1 = cdf_a(bins)
v2 = cdf_b(bins) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:36:22.863

我们在拟合优度测试中使用它的方式是堆叠数组，因此它们是在所有点上定义的，来自两个数组的点。

然后使用 np.searchsorted 得到排名，数据集 1 中低于 x 的点数和数据集 2 中低于 x 的点数。

如果我没记错的话，看看 scipy.stats.ks_2samp

```
data1 = np.sort(data1)
data2 = np.sort(data2)
data_all = np.concatenate([data1,data2])
cdf1 = np.searchsorted(data1,data_all,side='right')/(1.0*n1)
cdf2 = (np.searchsorted(data2,data_all,side='right'))/(1.0*n2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:32:55.817

看来这是一个很好的解决方案：

```
bins = np.linspace(0, 1, 10)
v1 = cdf_a(bins)
v2 = cdf_b(bins) 
```

然后`len(v1) == len(v2)`，这些可以绘制为`a, b`相同比例的 CDF。

# java - 删除 LinkedListNode 中的第一个节点

> ID：15795356
> 
> 赞同：0
> 
> 时间：2013-04-03T18:39:35.163
> 
> 标签：java, linked-list, nodes

我以为我有这个程序工作，但不幸的是我忽略了一些东西。如何删除第一个节点并将第二个节点转换为链表的前面。我尝试了多种方法，但最终得到相同的结果。（LinkedList 保持不变）任何指导将不胜感激。

节点类

```
public class Node {

    private String data;
    private Node next;

    Node(String data, Node next)
    {
        this.data = data;
        this.next = next;
    }

    public void setData(String d)
    {
        data = d;
    }

    public void setNext(Node n)
    {
        next = n;
    }

    public String getData()
    {
        return data;
    }

    public Node getNext()
    {
        return next;
    } 
```

主要的

```
public static void main(String[] args) {

        Node list = new Node("NODE 1",new Node("NODE 2",new Node("NODE 3", null)));
        list = insertSecond(list,"New Node");
        list = addLast(list,"LAST NODE");

        printList(list);
        System.out.println();
        deleteNode(list, "NODE 1");
        printList(list);
    }

    public static Node deleteNode(Node list,String str)
    {
        Node temp = list;
        Node prev = list;

        while(temp != null)
        {
            if(temp.getData().equals(str))
            {
                if(temp.getData().equals(list.getData()))
                    {
                    list = list.getNext();
                    return deleteNode(list,str);
                    }
                else
                    {
                        prev.setNext(prev.getNext().getNext());
                    }
            }
            prev = temp;
            temp = temp.getNext();

        }

        return list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:44:13.207

您的`deleteNode`函数应该返回新列表的头部。仅在您描述的一种极端情况下才需要这样做 - 删除该列表的头部。

```
list = deleteNode(list, str); 
```

此外，您不需要递归执行`deleteNode`方法，对节点元素的迭代就足够了：

```
public static Node deleteNode(Node list, String str) {
    // I'm assuming that you are deleting the first inscance of the string
    Node temp = list;
    Node prev = list;

    while(temp != null) {
        if(temp.getData().equals(str)) {
            if(temp.getData().equals(list.getData())) {
                return list.getNext();
            }
            else {
                prev.setNext(temp.getNext());
                return list;
            }
        }
        prev = temp;
        temp = temp.getNext();
    }

    return list;
} 
```

# jira - Jira - 报告每个用户的错误解决方案

> ID：15795359
> 
> 赞同：0
> 
> 时间：2013-04-03T18:39:48.727
> 
> 标签：jira

JIRA 中是否有办法运行报告以查看哪些用户“解决”了多少问题以及报告问题后的速度？它需要每个用户

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:42:47.860

[您可以使用Report Plugin Module](https://developer.atlassian.com/display/JIRADEV/Report+Plugin+Module)自己构建任意报告，但我的经验是这很麻烦。请注意，插件仅适用于自托管 Jira 安装，不适用于 Atlassians 托管服务。

另一种方法是[利用 REST API](http://docs.atlassian.com/jira/REST/latest/#id170363)来获取工作日志并在外部处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:10:40.237

我认为您的要求需要一些澄清。您似乎想查看从某种状态转移到另一种状态的问题数量，或者可能是最后一次将解决方案字段设置为一个值（任何值？）。然后按 JIRA 用户对这些结果进行分组。

第二个要求是跟踪从问题创建到最后一次设置解决方案字段的时间。再次按用户分组。

我会尝试使用 Valiantsys 的 Vertygo SLA 插件来做到这一点。它允许您定义自定义字段以跟踪两个 JIRA 事件之间的时间，例如字段更新或状态更改。我相信它可以汇总这些字段并在 JIRA 统计信息和二维小工具中显示分组结果。

随着用户数量的增加，按用户分组的报告通常会变得非常大。

# git - 具有共享代码的多个项目的 GIT 版本控制设置

> ID：15795360
> 
> 赞同：8
> 
> 时间：2013-04-03T18:39:50.180
> 
> 标签：git, version-control

这些年来，我使用了大约 10 个版本控制系统。我正在转向 Git，几天前我从未使用过。（通过 SSH 访问“公共”存储库）

我不是在问如何使用 Git，而是在问如何构建存储库，或者我是否需要多个存储库或什么。我有多个引用多个库的项目。我想对库进行版本标记，以便我可以轻松维护这样的内容：

项目 A，2012 年发货
主要项目源，1.0 版，当前开发版
Lib-A，1.0 版
Lib-B，2.0 版
Lib-C，当前开发版

项目 B，即将发货，更新到 1.0
主项目源，版本 2.0，当前开发版本
Lib-A，版本 2.0，当前开发版本
Lib-B，版本 1.0
Lib-C，当前开发版本

我的想法是，我可以将构建项目 A 和 B 所需的所有内容拉到一个目录中——满足他们当时可能有的任何要求——能够使用当前的开发版本，或者保留旧版本（例如：项目 B 中的 Lib-B 是旧版本，目前没有更新，或者如果它是一个分支。）

最初，我在想一些类似（In Repo）的东西：

/Src/项目 A
/Src/项目 B
/Src/Lib/LibA
/Src/Lib/LibB
/Src/Lib/LibC

在这种情况下，我必须将它们放入与存档中存在的不同结构中，或者至少将它们放入不同的目录中，或者：

/Src/ProjectA/Project A
/Src/ProjectA/LibA
/Src/ProjectA/LibB
/Src/ProjectA/LibC

/Src/ProjectB/Project B
/Src/ProjectB/LibA
/Src/ProjectB/LibB
/Src/ProjectB/LibC

或
/Src/ProjectA
/Src/ProjectB

/Src/Lib/LibA
/Src/Lib/LibB
/Src/Lib/LibC

（抱歉格式错误，我非常努力地说服这不是代码）

但是使用这种结构，当您从项目 A 切换到 B 的开发时，您需要切换 Lib 目录……这不是我想做的事情。

在我看来，为了在 GIT 中执行此操作，我需要多个 Git 存储库，也许每个 Lib 一个

我最近被告知第一个选项，将多个版本放到不同的位置，这不是一个好主意。（他在 SVN 下谈论，所以可能不适用），我工作的公司几年前在 Source Safe 下做过这种事情，效果很好 - 我们能够创建一个指定每个 lib 的版本标签的文件关闭并使用 NANT 脚本来获取正确的版本，并可以根据需要更新它们。（不确定这里最简单的方法是什么，最初，它会更简单。就像一个文件，说明它需要什么版本或其他东西）可以做的另一件事是在所有项目中应用标签A 的发布源类似于：“RELEASE_1_0_PROJECT_A”，并根据该版本标签关闭所有源。

但是，使用 Source Safe，标签仅位于该位置及其下方，而不是整个存储库。

我也曾在他们将代码分支并创建新的顶级树的地方工作过，例如：

/Dev/x64 Branch/ProjectA （结构的其余部分与第二个示例相同。

和 /Dev/trunk/ProjectA （结构的其余部分与第二个示例相同。）

在这种情况下，要同时处理 A 和 B，您将拥有该项目所需的所有内容的两个分支，一个项目 A 分支和一个项目 B 分支。

建议？

## 谢谢

更新：（会在下面作为评论这样做，但 StackOverflow 溢出并且不允许我发表这么长时间的评论）

好的，我这样做了，结果是：

```
 Project\
     Libs\
        LibA
        LibB

I created it with:
git add submodule ../Lib/LibA ./Libs/LibA
git update --init

Modified a file, and then tried to push it:

git push
warning: push.default is unset; its implicit value is changing in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the current behavior after the default changes, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11\. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

Counting objects: 7, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 378 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, **updating the current branch in a non-bare repository
remote: error: is denied,** because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To /src/C#/Lib/TraderhutLib
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to... 
```

* * *

评论：“默认情况下，在非裸存储库中更新当前分支是被拒绝的，因为它会使索引和工作树不一致……”

听起来我会因为有人发表评论而大声笑 - 基本上，它听起来像是在说：“你只能将文件签入一个空的 .Git Repo，否则我们会搞乱你的工作目录，与你刚刚签入的内容不匹配。”

所以，我的新问题是：我如何签入更改？什么是简单/匹配的东西？我使用哪个（看起来它给了我将其设为默认值的命令。）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:48:33.723

听起来您想使用子模块。

您将有五个存储库：

*   项目A
*   项目 B
*   库 A
*   库 B
*   库 C

项目 A 将有三个子模块，每个库一个。项目 B 也将有三个子模块，每个库一个。

当您克隆一个项目时，您将确保使用`--recursive`正确的版本（不同项目的不同版本，如果您愿意），您也会检查所有库源。更新库代码时，您需要将更改提交到项目代码中，以便项目使用新版本的库。

子模块通过在父项目中存储对子模块版本的 SHA-1 的引用来工作。所以 Project A 的 1.0 版本会引用`abc123...`Lib A 的提交，它对应于 Lib A 的 1.0 版本。当您签出 Project A 时，您会自动获得 Lib A 的 1.0 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:54:36.973

请花点时间用 git 弄脏你的手，学习 Scott Chacon 的[“Pro git”](http://git-scm.com/book)、Ben Lynn 的[“git magic” ，并在附近的](http://www-cs-students.stanford.edu/~blynn/gitmagic/)[git 主页](http://git-scm.com)上链接各种教程/备忘单。根据开发组的范围，您还应该阅读 git 工作流程。尽早发现 git 能做什么和不能做什么，它与您所知道的系统有什么不同（并且存在*差异*），过去只是白日做梦或不可能复杂的事情在 git 中是微不足道的；在承诺如何组织数据和工作流程之前，可以省去很多挫折。

正如我在学习英语时被告知的那样：不要翻译，要学会用英语*思考*。当你做梦时，你会完成的。是的，这需要时间。但它节省了时间。

# delegates - VB.NET：在运行时将类事件添加到接口事件

> ID：15795366
> 
> 赞同：1
> 
> 时间：2013-04-03T18:40:19.660
> 
> 标签：delegates, event-handling, c#-to-vb.net

我在将示例从 C# 转换为 VB.NET 时遇到问题。

C# 示例具有以下结构。首先有一个公共代表。

```
public delegate void CustomEventHandler(object sender , EventArgs e); 
```

此委托连接到接口的事件。

```
public interface ICustom {
    event CustomEventHandler MyEvent;
} 
```

最后，我有一个与委托相关的事件的类。另外还有一个以接口为参数的函数。

```
public class Test {
    public event CustomEventHandler OnEvent;

    public void MySub(ICustom custom) {
        custom.MyEvent += OnEvent;
    }
} 
```

除了将类事件添加到参数的事件之外，我可以转换此代码。我的 VB.NET 代码如下所示：

```
Public Delegate Sub CustomEventHandler(ByVal sender As Object, ByVal e As EventArgs)

Public Interface ICustom

    Event MyEvent As CustomEventHandler
End Interface

Public Class Test

    Public Event OnEvent As CustomEventHandler

    Public Sub MySub(ByVal custom As ICustom)
        ... How can I add here the event OnEvent to the event custom.MyEvent? ...
    End Sub
End Class 
```

是否可以转换它或者是否有其他必要的方式。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:13:09.280

Event 关键字的 VB.NET 版本具有更严格的规则，您无法访问底层委托对象。您需要编写一个自定义事件，以便您可以：

```
Private BackingField As CustomEventHandler

Public Custom Event OnEvent As CustomEventHandler
    AddHandler(ByVal value As CustomEventHandler)
        BackingField = DirectCast(CustomEventHandler.Combine(BackingField, value), CustomEventHandler)
    End AddHandler

    RemoveHandler(ByVal value As CustomEventHandler)
        BackingField = DirectCast(CustomEventHandler.Remove(BackingField, value), CustomEventHandler)
    End RemoveHandler

    RaiseEvent(ByVal sender As Object, ByVal e As System.EventArgs)
        BackingField.Invoke(sender, e)
    End RaiseEvent
End Event 
```

现在您可以实现 MySub：

```
Public Sub MySub(ByVal custom As ICustom)
    AddHandler custom.MyEvent, BackingField
End Sub 
```

请注意，这是自定义事件的非线程安全版本，如果可以在另一个线程中取消/订阅该事件，则需要使用 SyncLock 使其线程安全。

# javascript - javascript：提取字符串的一部分（正则表达式）

> ID：15795367
> 
> 赞同：0
> 
> 时间：2013-04-03T18:40:21.753
> 
> 标签：javascript, regex, string, match

问题很简单，假设以下字符串：

```
var str = '<a href="aaaa">aaaaa</a><a href="bb">b\'s</a>' 
```

你如何提取href的值。我会想像

```
var arr = str.match(/(?:href=")(\w+)/g) ;
--> ["href="aaaa", "href="bb"] 
```

我当然想要

```
["aaaa", "bb"] 
```

没有 /g 它会接近，但它只匹配“aaaa”。任何建议如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:45:27.850

因为 Javascript 没有后视功能，所以这可能是您想要的。自然会有*更*优雅的解决方案：

```
input.match(/<[^href|/]*(href[\s]*=[\s]*")([^"]+)(?=">)/g).map(
function(x){return x.split('href')[1].replace(/[^"]+"(.*)/,'$1');
}) 
```

此外，您*最好*获得一个 HTML 解析插件。并使用它提取您需要的属性。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:26:42.717

用 JS 解析 DOM 非常简单。

```
var str = '<a href="aaaa">aaaaa</a><a href="bb">b\'s</a>',
    help = document.createElement('div');

helper.innerHTML = str;

Array.prototype.forEach.call(help.querySelectorAll("a[href]"), function (elem) {
    console.log(elem.getAttribute('href'));
}); 
```

[http://jsfiddle.net/ExplosionPIlls/gtdFh/](http://jsfiddle.net/ExplosionPIlls/gtdFh/)

# node.js - Express.js 表单提交

> ID：15795371
> 
> 赞同：3
> 
> 时间：2013-04-03T18:40:44.613
> 
> 标签：node.js, express

我正在使用 Express 来提供静态 HTML 文件`profile.html`。在文件中，我有一个简单的表格。它曾经有一个文件上传，但为了简单起见，我将它简化为一个文本输入。这是它的样子：

```
<form action="profile.html" method="post" id="foo" enctype="multipart/form-data">
    <input type="text" name="foo" value="bar">
    <input type="submit">
</form> 
```

当我单击提交按钮时，Chrome 会显示提交表单的迹象，但从未发生过。`profile.html`提交表单时，我的 Node.js 代码永远不会运行。如果我查看 Chrome 开发者工具的网络选项卡，它会显示请求仍处于待处理状态。这在使用 PHP 和 Apache 时效果很好，但在使用 Node.js 和 Express 时却失败了。

我看过无数的例子，但我觉得这必须是配置问题，而不是代码问题。是什么阻止了表单提交给我的服务？

编辑：这大致是我的路线：

```
//modules, initialization, etc.
var app = express();

app.use(function(req, res, next) {
    var data = "";
    req.setEncoding("utf8");
    req.on("data", function(chunk) {
        data += chunk;
    });
    req.on("end", function() {
        req.rawBody = data;
        next();
    });
});
app.use(express.bodyParser());

//Server up our templated static HTML
app.use("/search.html", search_html.handler);
app.use("/app.html", app_html.handler);
app.use("/login.html", login_html.handler);
app.use("/graph", graph_page.handler);
app.use("/dbrequest", dbrequest_page.handler);
app.use("/profile.html", profile_html.handler);

app.use("/", function(request, response) {
    response.redirect("login.html");
});
app.listen(3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:51:24.177

`rawBody`你的中间件的组合`bodyParser`是行不通的：你的中间件“耗尽”了`req`完全提供的流，并且`bodyParser`会尝试做同样的事情。

但是由于流已经被读取并且它的`end`事件已经被触发，`bodyParser`它将无休止地等待一个`end`永远不会发生的事件（这也解释了为什么请求会陷入挂起状态）。

如果您的中间件不是绝对必要的，则将其排除在外。如果出于某种原因，您确实需要访问原始正文内容，我不确定是否可以在不重新实现`bodyParser`自己的情况下完成。

# asp.net - 如何获取这些控制台消息并在邮件消息中发送

> ID：15795378
> 
> 赞同：0
> 
> 时间：2013-04-03T18:41:04.460
> 
> 标签：asp.net, sql, sql-server, vb.net

我有一个模块，它像这样从 vb.net 控制台应用程序调用存储过程。这个存储过程中有很多打印语句。当我执行此控制台应用程序时，它将在控制台中显示消息。我想获取这些消息并通过邮件发送

```
Dim Con As New SqlConnection(connectionString)
Dim cmd As New SqlCommand("SaveReceiptsFromFile_GFF", Con)

Try
   Using Con
      Con.Open()

      cmd.ExecuteNonQuery()

   End Using
Catch ex As SqlException
   Console.WriteLine(ex.Message)

   sendmailwhenfail()
End Try
Con.Close() 
```

我发送邮件的模块是这样的：

```
Public Shared Sub sendmailwhenfail()
        Try
            Dim AnEmailMessage As New MailMessage
            AnEmailMessage.From = New MailAddress("tester@gmail.com")
            AnEmailMessage.To.Add("mymail@xxxxx.com")
            AnEmailMessage.Subject = "this is test subject"
            AnEmailMessage.Body = "this is test body"
            AnEmailMessage.Priority = MailPriority.High
            Dim SimpleSMTP As New SmtpClient("smtp.gmail.com")
            With SimpleSMTP
                .Port = 587
                .EnableSsl = True
                .Credentials = _
                New NetworkCredential("tester@gmail.com", "Tester123")
                .Send(AnEmailMessage)
            End With
            MsgBox("Email sent")
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical)
        End Try
    End Sub 
```

失败时一切正常，我的问题是，如何获取这些控制台消息并在邮件消息中发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:50:22.010

获取相同的异常 ex.Message、ex.Source 并将其用作方法 sendmailwhenfail() 的参数，例如：

```
try
{
    // do your thing
}
catch (Exception ex)
{
    Console.Writeline(String.Format("{0} :: {1}", ex.Source, ex.Message));
    SendMail(ex.Source, ex.Message);
} 
```

因此，无论异常中的错误消息是什么，都将传递给 SendMail 方法。

# javascript - Javascript 挑战 - 哪个篮子包含最后一个苹果？

> ID：15795379
> 
> 赞同：1
> 
> 时间：2013-04-03T18:41:07.773
> 
> 标签：javascript

我收到了以下挑战问题：

> 一个房间里有一圈一百个篮子；篮子按从 1 到 100 的顺序编号，每个篮子里有一个苹果。最终，篮子 1 中的苹果将被移除，但篮子 2 中的苹果将被跳过。然后将取出篮子 3 中的苹果。这将继续（绕圈移动，从篮子中取出一个苹果，跳过下一个），直到篮子里只剩下一个苹果。编写一些代码来确定剩下的苹果在哪个篮子里。

我得出结论，篮子 100 将包含最后一个苹果，这是我的代码：

```
 var allApples = [];
        var apples = [];
        var j = 0;
        var max = 100; 
        var o ='';
            while (j < max) {
                o += ++j;
                allApples.push(j);
            }

            var apples = allApples.filter(function(val) {
                return 0 == val % 2;
            });
            while (apples.length > 1) {
                for (i = 0; i < apples.length; i += 2) {
                    apples.splice(i, 1);
                }
            }

            console.log(apples); 
```

我的问题是：我做对了吗？我关心的是对篮子“一圈”的描述。我不确定这与我如何编写解决方案有关。剩下的苹果所在的篮子是否会被跳过？

我希望有人可以让我知道我是否正确回答了这个问题，回答了部分正确或我的回答完全错误。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:53:58.843

我相信 Colin DeClue 是正确的，有一个声明可以解决这种模式。我真的很想知道这个答案。

这是我的蛮力解决方案。我没有将物品（“苹果”）从其原始容器（“篮子”）移到丢弃堆中，而是简单地将容器值从 true 或 false 更改为指示物品不再存在。

```
var items = 100;
var containers = [];

// Just building the array of containers
for(i=0; i<items; i++) {
    containers.push(true);
}

// count all containers with value of true
function countItemsLeft(containers) {
    total = 0;
    for(i=0; i<containers.length; i++) {
        if(containers[i]) {
            total++;
        }
    }
    return total;
}

// what is the index of the first container
// with a value of true - hopefully there's only one
function getLastItem(containers) {
    for(i=0; i<containers.length; i++) {
        if(containers[i]) {
            return(i);
        }
    }
    // shouldn't get here if the while loop did it's job
    return false;
}

var skip = false;
// loop through the items,
// setting every other to false,
// until there is only 1 left
while(countItemsLeft(containers) > 1) {
    for(i=0; i<containers.length; i++) {
        if(containers[i]) {
            if(skip) {
                skip = false;
            } else {
                containers[i] = false;
                skip = true;
            }
        }
    }
}

// what's the last item? add one to account for 0 index
// to get a human readable answer
var last_item  = getLastItem(containers) + 1; 
```

需要错误检查等......但假设 items 是整数，它应该完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:08:30.943

所以，......我也进入了这个问题:)

我打破了我上一个答案的输入/输出，这揭示了一个非常简单的模式。

基本上，如果项目总数是 2 的幂，那么它将是最后一个项目。之后的附加项目将使第二个项目成为最后一个项目。之后的每个附加项目将使最后一个项目增加 2，直到您达到另一个项目计数，该计数再次可以被 2 的幂整除。冲洗并重复。

仍然不是单线，但会比我之前的答案快得多。这不适用于 1 项。

```
var items = 100;

function greatestPowDivisor(n, p) {
    var i = 1;
    while(n - Math.pow(p, i) > 0) {
        i++;
    }
    return Math.pow(p, (i - 1));
}

var d = greatestPowDivisor(items, 2)
var last_item = (items - d) * 2; 
```

# android - 包括外部字体，以便在 eclipse xml 预览中呈现

> ID：15795381
> 
> 赞同：0
> 
> 时间：2013-04-03T18:41:08.920
> 
> 标签：android, eclipse, fonts, textview

我在我的 android 应用程序中包含外部字体资产，但是，eclipse 无法在 xml 预览中呈现它们。

当我在应用程序中包含字体（将 ttf 放在 /assets/fonts 文件夹中）并使用代码动态设置我的 textview 字体时：

```
mFont = Typeface.createFromAsset(getAssets(),"fonts/fontfilename.ttf");
textview = (TextView) findViewById(R.id.text_view);
textview.setTypeface(mFont); 
```

文本使用我的设备或模拟器上的应用程序中的字体正确呈现，但是我不知道如何让 eclipse 在 xml 预览中呈现它们。我试过扩展 TextView 类：

```
public class ExTextView extends TextView {

private static final Typeface MY_FONT_01 = Typeface.create("mfont-01", 0); //, Typeface.BOLD);
private static final Typeface MY_FONT_02 = Typeface.create("mfont-02", 0); //, Typeface.NORMAL);

public ExTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    if (getTypeface().equals(MY_FONT_01)) {
        Typeface mFont = Typeface.createFromAsset(getContext().getAssets(),"fonts/myfont01.ttf");
        setTypeface(mFont);
        setPadding(0, (int) (-0.9f * getTextSize()), 0, (int) (-0.2f * getTextSize()));
        setTextSize(0x00000001, (int)48);
    } else if (getTypeface().equals(MY_FONT_02)) {
        Typeface mFont = Typeface.createFromAsset(getContext().getAssets(),"fonts/myfont02.ttf");
        setTypeface(mFont);
        setPadding(0, (int) (-0.5f * getTextSize()), 0, (int) (-0.5f * getTextSize()));
        setTextSize(0x00000001, (int) 24);
    }
}
} 
```

并将其放入xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.example.extendedtextview.ExTextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="mfont-01"
    android:text="ExTextView-01" />

<com.example.extendedtextview.ExTextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="mfont-02"
    android:text="ExTextView-02" />

</LinearLayout> 
```

但是字体没有根据 ExTextView.java 中声明的内容呈现。我知道这对于这个特别简单的应用程序来说是困难的，但在更复杂的场景中，这种结构可能很有用，所以我想弄清楚如何让它工作。

当我尝试运行该应用程序时，我在 logcat 中收到错误：

```
04-03 11:38:08.149: E/AndroidRuntime(689): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.example.extendedtextview.ExTextView 
```

非常感谢任何建议或提示。

# lua - 如何为 VLC 编写响应播放、暂停和停止事件的插件？

> ID：15795385
> 
> 赞同：11
> 
> 时间：2013-04-03T18:41:23.647
> 
> 标签：lua, vlc

我想为 VLC 编写一个非常简单的插件，它在播放、暂停或停止媒体时发出 Web 请求。它是一个非常类似于 scrobbling 的插件。

我看到 VLC 支持插件和扩展（它们是非常简单的 Lua 脚本），但我无法找到有关如何执行此操作的任何信息。

我想我需要编写一个注册一些回调的插件——对吗？关于我如何做到这一点的任何想法？弄清楚这一点似乎是一场艰苦的战斗。我可以使用 Python 做到这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-13T11:53:02.223

我在 Windows 上使用 VLC 2.2.1。

这是一个识别播放/暂停/停止事件的简单 Lua 插件：

```
function descriptor()
  return {
    title = "VLC Dummy Extension",
    capabilities = { "playing-listener" }
  }
end

function activate()
end

function deactivate()
end

function meta_changed()
end

function playing_changed()
  vlc.msg.dbg("[Dummy] Status: " .. vlc.playlist.status())
end 
```

笔记：

*   VLC 将在插件生命周期的某个时刻调用`activate()`, 。您不需要包含它们，但 VLC 会用无用的“未找到函数”消息填充您的调试日志。`deactivate()``meta_changed()`
*   如果插件的功能包含[`playing-listener`](https://github.com/videolan/vlc/blob/2.2.0-git/modules/lua/extension.c#L63)，VLC 将期待`playing_changed()`钩子并在适当的时候调用它（即使代码注释说钩子名称是“status_changed”）。
*   [`vlc.playlist.status()`](https://github.com/videolan/vlc/blob/2.2.0-git/share/lua/README.txt#L306)返回“停止”、“播放”、“暂停”或“未知”。

跑：

*   将插件保存在 .lua 文件中，然后将其放入 VLC 的[扩展文件夹](https://www.vlchelp.com/install-vlc-media-player-addon/)：`%APPDATA%\vlc\lua\extensions\`（Windows）或`~/.local/share/vlc/lua/extensions/`（Linux）。
*   通过工具 > 插件和扩展加载它，重新加载扩展（不需要重新启动 VLC）。
*   激活它（视图下有一个选项，以插件描述符中的标题命名）；`activate()`将被调用。
*   要查看所有日志（`vlc.msg`调用），请打开工具 > 消息 ( `Ctrl`+ `M`)，将级别设置为调试并按“lua”过滤。

* * *

每当播放新项目时执行以下操作：

*   添加`input-listener`到插件的功能。
*   添加相应的钩子`input_changed()`。
*   用于[`vlc.input.item()`](https://github.com/videolan/vlc/blob/2.2.0-git/share/lua/README.txt#L107)获取当前项目（名称、URI、元数据等）。
*   您可以将正在播放的内容发布到 HTTP 服务器。VLC 提供[`vlc.net`](https://github.com/videolan/vlc/blob/2.2.0-git/share/lua/README.txt#L160)，这意味着您必须为套接字编程。幸运的是，默认情况下随 VLC 提供的扩展[vlsub具有](https://github.com/exebetche/vlsub)[发送 GET 请求](https://github.com/videolan/vlc/blob/2.2.0-git/share/lua/extensions/VLSub.lua#L1628)的实用方法。我们可以偷那些。

在这个例子中，我只是发送一个线程 GET：

```
http://127.0.0.1:5000/?name=MMFR.2015.720p.mp4 
```

如果我不关心重定向或阅读响应，`get()`它比 vlsub 的版本简单得多：

```
function descriptor()
  return {
    title = "VLC Dummy Extension",
    capabilities = { "input-listener" }
  }
end

function activate()
end

function deactivate()
end

function meta_changed()
end

function input_changed()
  if vlc.input.is_playing() and vlc.playlist.status() == "playing" then
    local item = vlc.input.item()
    if item then
      vlc.msg.dbg("[Dummy] Now playing: " .. item:name())
      get("http://127.0.0.1:5000/?name=" .. item:name())
    end
  end
end

function get(url)
  local u = vlc.net.url_parse(url)
  local host, port, path = u["host"], u["port"], u["path"]
  local header = {
    "GET "..path.." HTTP/1.1",
    "Host: "..host,
    "",
    ""
  }
  local request = table.concat(header, "\r\n")
  http_req(host, port, request)
end

function http_req(host, port, request)
  local fd = vlc.net.connect_tcp(host, port)
  if not fd then return false end
  local pollfds = {}

  pollfds[fd] = vlc.net.POLLIN
  vlc.net.send(fd, request)
  vlc.net.poll(pollfds)

  local chunk = vlc.net.recv(fd, 2048)
  while chunk do
    vlc.net.poll(pollfds)
    chunk = vlc.net.recv(fd, 1024)
  end
  vlc.net.close(fd)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T19:06:17.657

您有两个选择：编写一个 lua 模块（查看 MSN 通知插件以获取示例代码）或编写一个 C 插件（类似于您已经找到的 scrobbler）。

我建议使用 lua 方式，因为它是跨平台兼容的，而且它是一种更简单的语言。此外，除非您使用 Linux 或 OS X，否则为 VLC 编译 C 插件真的很痛苦。

目前仅 VLC 之上的客户端应用程序支持 Python，但我们不支持在 VLC 内部使用它。

# android - ImageView 没有得到图像。App 没有在模拟器中加载。NullPointerException

> ID：15795387
> 
> 赞同：0
> 
> 时间：2013-04-03T18:41:28.377
> 
> 标签：android, button, imageview

我在 xml 文件中有一个 imageview 和按钮。加载 image1 并播放 song1.mp3 文件。当歌曲结束时，它应该加载下一张图像并播放 song2.mp3 歌曲，它应该一直播放到最后一张图像。用于关闭和退出应用程序的按钮。

```
 import android.media.MediaPlayer;
 import android.media.MediaPlayer.OnCompletionListener;
 import android.os.Bundle;
 import android.widget.ImageView;
 import android.app.Activity;
 import android.content.res.AssetFileDescriptor;

public class MainActivity extends Activity {
 public MediaPlayer mpp;
 final int image[] = {R.drawable.apple,R.drawable.ball,R.drawable.cat};
int i=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            final ImageView img = (ImageView) findViewById(R.id.img);

    String audio[]={"song1.mp3","song2.mp3","song3.mp3"};

   // MediaPlayer mp = new MediaPlayer();

    AssetFileDescriptor descriptor;
            try {
                descriptor = getAssets().openFd(audio[i]);
                mpp.setDataSource( descriptor.getFileDescriptor(), descriptor.getStartOffset(),descriptor.getLength());
                descriptor.close();
                mpp.prepare();
                mpp.start();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mpp.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer arg0) {
                    // TODO Auto-generated method stub
                    img.setImageResource(image[i]);
                    i++;
                    mpp.start();
                }
            });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:19:45.660

没有 LogCat 输出很难说什么，但看起来你有空引用。在调用之前，`img.setImageResource(image[i])`您必须将 ImageView 分配给`img`变量，如果该 View 是在您的 activity_main.xml 中定义的，您应该添加以下行`onCreate()`：

```
img = (ImageView) findViewById(R.id.you_imageview_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:13:07.447

测试手机内存不足（对像我这样使用个人手机进行开发的人有帮助）

1.  如果内存真的满了，那么卸载一些不需要的应用程序。
2.  如果上述说法不正确，则重启手机即可解决问题。

我的三星迷人手机出现此错误。重启手机一直工作。

# java - 持续集成：确保新的提交被测试覆盖

> ID：15795390
> 
> 赞同：14
> 
> 时间：2013-04-03T18:41:38.440
> 
> 标签：java, jenkins, continuous-integration, code-coverage, jacoco

我正在开发一个项目，该项目包含大量未包含在测试中的遗留代码。

有什么方法可以设置集成服务器来检查所有新提交是否具有最少的测试量（例如，覆盖率> 70％）？

本质上，我看到两个选项：

1.  当提交的更改未包含在单元测试中时，以某种方式设置 CI 服务器以使构建失败。这将确保每段新代码都有测试，并且旧代码的测试将随着每次更改而增加。
2.  为整个项目设置覆盖阈值，如果在提交后覆盖百分比降低，则构建失败。这样做的问题是，如果我删除一个包含 100 条指令的类并添加一个包含 50 条指令的新类，那么覆盖率将上升而无需我编写任何测试。

我更喜欢选项 1，因为它强制对遗留代码的更改进行单元测试。这应该会增加整体测试覆盖率。

现在我们使用 Jenkins 作为我们的 CI 服务器和 JaCoCo 进行测试覆盖。Maven 用于构建项目，SVN 是我们的主要源代码控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:47:36.327

我知道您可以配置 Jenkins 以验证至少有一个测试文件作为提交的一部分。这不能保证良好的测试覆盖率，但至少您会知道存在某种与测试相关的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:48:09.820

对于选项 2，您可以使用[Jenkins JaCoCo 插件](https://wiki.jenkins-ci.org/display/JENKINS/JaCoCo+Plugin)来跟踪每个构建的代码覆盖率，并根据覆盖率指标将构建结果设置为通过或失败。

我也更喜欢选项 1，但我不知道詹金斯这样做的内置方式。对覆盖数据进行后处理并将其与 SVN 修订信息结合起来应该相当容易（至少在类级别），例如：

1.  解析 JaCoCo 输出文件并找到覆盖率为 0% 的类
2.  从 SVN 修订详细信息中获取为此构建更改的文件（Jenkins 使修订号在环境变量中可用，如果此构建只有一个，则为 SVN_REVISION 或 SVN_REVISION_1、SVN_REVISION_2、... 多个）
3.  如果任何更改的类的覆盖率为 0%，则打印错误消息
4.  如果打印错误消息，请使用[Jenkins Text Finder 插件使构建失败。](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)

这不是一个完整的解决方案，它对于测试未涵盖的新方法或行变得更加棘手。给了我一个新的 Jenkins 插件的想法；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:50:46.787

一些覆盖工具（如 cobertura）支持排除包。这样，您可以排除所有旧代码（假设它可以进行模式匹配）并让 cobertura 仅检查新代码（涵盖新提交）。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T16:46:27.863

我已经构建了一个工具，它正是这样做的

[https://github.com/exussum12/coverageChecker](https://github.com/exussum12/coverageChecker)

您传入分支的差异和测试的覆盖测试输出。该工具可以确定 diff 中的哪些行也在 clover 文件中。如果低于某个百分比，则构建失败

使用

```
bin/diffFilter --phpunit diff.txt clover.xml 70 
```

当测试覆盖不到 70% 的差异时，构建失败

如果需要，我可以添加其他格式

编辑

我加了jacoco

```
Bin/diffFilter --jacoco diff.txt jacoco.xml 
```

# django - 基于类的视图（DetailView）Django的函数

> ID：15795398
> 
> 赞同：1
> 
> 时间：2013-04-03T18:42:09.197
> 
> 标签：django, django-class-based-views, django-1.5

所以我的基于函数的视图目前看起来像这样，我想将其更改为基于类的视图

我的功能视图

```
def user_detail(request, username):
    try:
       user = User.objects.get(username=username)
    except User.DoesNotExist:
       raise Http404 
```

我的基于班级的观点

```
class UserProfileDetail(DetailView):
    model = User
    template_name = "profiles/user_detail.html"
    #use username instead of pk
    slug_field = "username" 
```

我的网址

```
url(r"^user/(?P<slug>[\w-]+)/$", UserProfileDetail.as_view(), name="user_detail"), 
```

问题是，当我访问[http://exampe.com/user/username](http://exampe.com/user/username)网址时，我得到了匿名用户配置文件。我不想要那个。我必须对我的 UserProfileDetail 类进行哪些更改？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:54:40.060

您已添加`slug_field = "username"`到您的班级，在这种情况下不正确。`slug_field`在您的情况下，应该`"slug"`是您在 url: 中给出用户名部分的[命名组](https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups)`.../(?P<slug>[\w-]+)/...`。Django 自动假定你的`slug_field`被调用`slug`，所以你可以简单地完全删除该行`slug_field = "username"`或将你的 url 更改为：

```
url(r"^user/(?P<username>[\w-]+)/$", UserProfileDetail.as_view(), name="user_detail"), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:50:22.453

您需要覆盖`context_object_name`，因为默认情况下，`django.contrib.auth.context_processors.auth`将`{{ user }}`模板上下文变量设置为`request.user`或`AnonymousUser`。所以，你需要覆盖上下文

覆盖类`context_object_name`中的`DetailView`

```
# Detail Views
class UserDetailView(DetailView):
    model = User
    template_name = "profiles/user_detail.html"
    #use username instead of pk
    slug_field = "username"
    #override the context user object to user_profile
    context_object_name = "user_profile" 
```

并在模板使用中

```
{{ user_profile }} 
```

# c++ - 使用 reinterpret_cast 将 const 添加到模板类

> ID：15795400
> 
> 赞同：0
> 
> 时间：2013-04-03T18:42:10.387
> 
> 标签：c++, reinterpret-cast

这是正确使用 reinterpret_cast 还是有更好的方法来解决问题。

```
Node<T>* front_;

Iterator<const T> GetConstIterator() const {
  return Iterator<const T>(reinterpret_cast<Node<const T>*>(front_));
}

Iterator<T> GetIterator() {
  return Iterator<T>(front_);
} 
```

迭代器的构造函数定义为this。

```
template<class T>
class Iterator {
  explicit Iterator(Node<T>* const node) : node_(node) {}
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:22:13.417

您需要使您的 const 版本的迭代器可以从非常量节点构造。然后我会重写 getter 以更符合 STL：

```
Iterator<const T> begin() const { return Iterator<const T>(front_); }
Iterator<T> begin() { return Iterator<T>(front_); } 
```

您需要做的就是编译第一个版本。Casting 在这里不起作用，因为`Node<T>`不会与`Node<const T>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:29:13.983

使用 reinterpret_cast 来抛弃 const-ness 是非法的。您需要为此使用 const_cast 。您*可以*使用`reinterpret_cast`来添加 const-ness，但 a`const_cast`对于未来的维护者来说更正确和更明显。

从 §5.2.10 重新解释演员表，p2：

> reinterpret_cast 运算符不应抛弃 constness (5.2.11)。整数、枚举、指针或指向成员类型的表达式可以显式转换为它自己的类型；这样的强制转换会产生其操作数的值。

真的，构造函数`Node<const T>`应该能够隐式地做到这一点，甚至不需要强制转换。

歧义源于您的功能：

```
Iterator<T> GetIterator() const {
  return Iterator<T>(front_);
} 
```

您不应该返回一个可以将容器变异为 const 方法的迭代器。此方法不应具有 const 限定符。

你应该有：

```
Iterator<const T> GetIterator() const {
  return Iterator<const T>(front_);
}

Iterator<T> GetIterator() {
  return Iterator<T>(front_);
} 
```

# sql - 子查询作为 MS Jet CREATE TABLE 语句的输入

> ID：15795403
> 
> 赞同：1
> 
> 时间：2013-04-03T18:42:20.817
> 
> 标签：sql, subquery, ms-access-2007, create-table

我正在尝试编写一个 CREATE TABLE sql，它从子查询中提取其列和数据（带有 Aggregate MAX 函数的基本 Select）。我已经单独测试了子查询并且它工作正常，但是一旦我将它放入 CREATE TABLE MapData AS ...它就会出错。有什么建议吗？或者这在 MS Access 中甚至是不可能的？

谢谢，斯泰西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:50:17.490

Access SQL 的[CREATE TABLE 语句](http://msdn.microsoft.com/en-us/library/office/bb177893%28v=office.12%29.aspx)没有提供我认为您正在寻找的内容。请考虑使用[SELECT...INTO](http://msdn.microsoft.com/en-us/library/office/bb208934%28v=office.12%29.aspx)。

一个非常简单的例子......

```
SELECT
    fld1,
    fld2,
    etc
INTO NewTable
FROM OldTableOrQuery; 
```

如果您在使用该方法时遇到问题，请向我们展示您要从中创建表的查询。同时，这是另一个您可能会发现有用的示例...

```
SELECT
    sub.FacNo,
    sub.QualRating AS Qrate,
    sub.MaxOfSqFeet AS sqFeet
INTO MapData
FROM
    (
        SELECT FACNO, QualRating, MAX(SqFeet) AS MaxOfSqFeet
        FROM April_2_ISR_report
        GROUP BY FACNO, QualRating
    ) AS sub; 
```

# python - 如何在 Python 中每分钟都发生一个动作

> ID：15795404
> 
> 赞同：6
> 
> 时间：2013-04-03T18:42:23.263
> 
> 标签：python, loops, time, count

我想每分钟向一个变量添加 1 而不会干扰已经运行的代码。

这是一个游戏，所以我希望在后台让木头+1、岩石+1、鱼+1 在用户不知情的情况下每分钟发生一次。

time.sleep 在这种情况下不起作用，因为它会暂停整个程序。

```
start=time.time()
#some code
end=time.time()
if end-start > 60:
    wood = wood+1
    rock = rock+1 
```

我尝试在上面做一些事情，但无法让它连续计数。它仅测量#some 代码执行所需的时间。

任何帮助都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T18:46:39.143

您需要在python中导入*线程*模块和*itertools*（除了[svks'comment ）](https://stackoverflow.com/questions/15795404/how-to-make-an-action-happen-every-minute-in-python#comment22460224_15795496)

```
import thread, time, itertools 
```

初始化你的线程安全计数器

```
wood = itertools.count().next() 
```

并将您的计数器更新写入函数

```
def updateCounter():
   while True:
       wood.next()
       # wood += 1
       time.sleep(60) 
```

并启动一个新线程

```
thread.start_new_thread(updateCounter, ()) 
```

*但是像wood*这样的资源变量必须可以从 counter 函数中访问！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:05:24.910

这是一个不涉及线程的答案，因为线程可能很难正确处理。（如果您使用线程，则需要阅读线程之间的同步，否则您可能会遇到细微的错误。）

你可能有某种“主循环”。也许它看起来像这样，目前：

```
while game.running:
    game.process() 
```

主循环没有什么神奇之处——除了处理输入和在屏幕上绘画之外，您还可以做其他事情。如果您希望每分钟运行一次，您可以简单地执行以下操作：

```
t0 = time.time()
while game.running:
    t1 = time.time()
    if (t1-t0) >= 60.0:
        game.wood += 1
        t0 = t1 
    game.process() 
```

如果您使用某些库，您可能会将主循环隐藏在库中。在这种情况下，您可能或多或少地像这样开始您的游戏：

```
game.main() # this function doesn't return until your game exits 
```

如果是这种情况，您的库中可能会有一个函数来执行与上述等效的操作——将代码设置为每隔一段时间或在指定的时间间隔执行一次。寻找“空闲功能”或“计时器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:47:41.360

为此，您需要单独的线程来负责递增计数器。但请记住，将线程引入任何程序都会使其变得更加复杂。有关详细信息，请参阅[线程文档](http://docs.python.org/2/library/threading.html)。

此外，您不确定特定线程每秒会获得处理器的时间，您可以假设但您不确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T09:39:27.840

它将每 60 秒运行一次。

```
 try {
        while (true) {
            System.out.println(new Date());
            Thread.sleep(60 * 1000);
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

# android - 从 Gmail 的“附加图片”/“附加视频”按钮打开我的应用的意图过滤器

> ID：15795405
> 
> 赞同：1
> 
> 时间：2013-04-03T18:42:23.583
> 
> 标签：android, android-intent, broadcastreceiver, android-manifest, intentfilter

当从 Gmail 应用程序中选择“附加图片”/“附加视频”时，我希望我的应用程序显示为一个选项。（注意：我*不是*指从我的应用程序共享或发送图片到 Gmail。）

如何将我的应用程序注册为画廊/选择器？我在清单中尝试了以下操作，但我的应用未列为从 Gmail 中选择图片或视频的可能应用之一：

```
<application ...>

    <receiver android:name="MyReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>
    </receiver>

    <activity ...>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" /> 
            <data android:mimeType="vnd.android.cursor.dir/image" /> 
            <data android:mimeType="vnd.android.cursor.dir/video" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.OPENABLE" />
            <data android:mimeType="image/*"/>
        </intent-filter>

        <intent-filter>
            <action android:name="com.google.android.apps.drive.DRIVE_OPEN" />
            <action android:name="android.intent.action.VIEW" />
            <action android:name="android.intent.action.EDIT" />
            <action android:name="android.intent.action.INSERT" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>   

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/jpeg"/>
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" /> 
            <data android:mimeType="vnd.android.cursor.dir/image" /> 
            <data android:mimeType="vnd.android.cursor.dir/video" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.OPENABLE" />
            <data android:mimeType="image/jpeg"/>
        </intent-filter>

    </activity>
</application> 
```

我究竟做错了什么？我必须注册广播接收器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:57:52.257

Gmail 正在请求一个可以发送图像的应用程序。这可能会转化为：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

对于视频，您可以指定 mime type `video/*`。

我还没有测试过这个，但我相当肯定它会成功。

# php - 哈希字符串在插入数据库时 被切断

> ID：15795406
> 
> 赞同：1
> 
> 时间：2013-04-03T18:42:23.600
> 
> 标签：php, mysql, pdo, bcrypt, password-encryption

我有一个奇怪的问题。我将发布两段代码，希望能清楚地说明我的问题。以下代码根据用户输入的密码创建哈希，我使用的是 hmac 和 bcrypt：

```
if(isset($_POST['username'])){
    $username = preg_replace('#[^a-z0-9]#i', '', $_POST['username']);
    $email1 = strip_tags($_POST['email1']);
    $email2 = strip_tags($_POST['email2']);
    $pass1 = strip_tags($_POST['pass1']);
    $pass2 = strip_tags($_POST['pass2']);
    // make sure no fields are blank /////
    if(trim($username) == "" || trim($email1) == "" || trim($pass1) == "" || trim($pass2) == ""){
        echo "Error: All fields are required. Please press back in your browser and try again.";
        $db = null;
        exit();
    }
    /// Make sure both email fields match /////
    if($email1 != $email2){
        echo "Your email fields do not match. Press back and try again";
        exit();
    }
    //// Make sure both password fields match ////
    else if($pass1 != $pass2){
        echo "Your password fields do not match. Press back and try again";
        exit();
    }
    //// create the hmac /////
    $hmac = hash_hmac('sha512', $pass1, file_get_contents('my/path/to/key.txt'));
    //// create random bytes for salt ////
    $bytes = mcrypt_create_iv(16, MCRYPT_DEV_URANDOM);
    //// Create salt and replace + with . ////
    $salt = strtr(base64_encode($bytes), '+', '.');
    //// make sure our bcrypt hash is 22 characters which is the required length ////
    $salt = substr($salt, 0, 22);
    //// This is the hashed password to store in the db ////
    $bcrypt = crypt($hmac, '$2y$12$' . $salt);
        echo $bcrypt; 
```

这段代码工作得很好，并创建了一个看起来像这样的哈希：

> $2y$12$Oysi/5oZjF4vlUYx4PvgJ.GSpAQb7njNzSTUnEy/QOFzPxqRpHFV6

我遇到的问题是在执行一些错误处理然后插入哈希密码被切断的数据之后。只是为了让您知道我存储它的字段最初设置为 VARCHAR(255)，我什至将其更改为 TEXT，但它仍然被切断。这是我刚刚回显上面密码的其余代码：

```
//// Create token for activation script ////
    $token = md5($bcrypt);
    //// query to check if email is in the db already ////
    $stmt = $db->prepare("SELECT email FROM members WHERE email=:email1 LIMIT 1");
    $stmt->bindValue(':email1',$email1,PDO::PARAM_STR);
    try{
    $stmt->execute();
    $count = $stmt->rowCount();
    }
    catch(PDOException $e){
        echo $e->getMessage();
            $db = null;
            exit();
    }
    //// query to check if the username is in the db already ////
    $unameSQL = $db->prepare("SELECT username FROM members WHERE username=:username LIMIT 1");
    $unameSQL->bindValue('username',$username,PDO::PARAM_STR);
    try{
        $unameSQL->execute();
        $unCount = $unameSQL->rowCount();
    }
    catch(PDOException $e){
        echo $e->getMessage();
        $db = null;
        exit();
    }
    ///Check if email is in the db already ////
    if($count > 0){
        echo "Sorry, that email is already in use in the system";
        $db = null;
        exit();
    }
    //// Check if username is in the db already ////
    if($unCount > 0){
        echo "Sorry, that username is already in use in the system";
        $db = null;
        exit();
    }
    try{
        $db->beginTransaction();
        $ipaddress = getenv('REMOTE_ADDR');
        $stmt2 = $db->prepare("INSERT INTO members (username, email, password, signup_date, ipaddress) VALUES (:username, :email1, :bcrypt, now(), :ipaddress)");
        $stmt2->bindParam(':username', $username, PDO::PARAM_STR);
        $stmt2->bindParam(':email1',$email1,PDO::PARAM_STR);
        $stmt2->bindParam(':bcrypt',$bcrypt,PDO::PARAM_STR);
        $stmt2->bindParam(':ipaddress',$ipaddress,PDO::PARAM_INT);
        $stmt2->execute();
        /// Get the last id inserted to the db which is now this users id for activation and member folder creation ////
        $lastId = $db->lastInsertId();
        $stmt3 = $db->prepare("INSERT INTO activate (user, token) VALUES ('$lastId', :token)");
        $stmt3->bindValue(':token',$token,PDO::PARAM_STR);
        $stmt3->execute();
        //// Send email activation to the new user ////
        $from = "From: Auto Resposder @ GotCode <admin@gotcode.org>";
        $subject = "IMPORTANT: Activate your gotCode account";
        $link = 'http://www.gotcode.org/activate.php?user='.$lastId.'&token='.$token.'';
        //// Start Email Body ////
        $message = "
Thanks for registering an account at gotCode.org! Were glad you decided to join us in this wacky adventure.
Theres just one last step to set up your account. Please click the link below to confirm your identity and get started.
If the link below is not active please copy and paste it into your browser address bar. See you on the site!

$link
";
        //// Set headers ////
        $headers = 'MIME-Version: 1.0' . "rn";
        $headers .= "Content-type: textrn";
        $headers .= "From: $fromrn";
        /// Send the email now ////
        mail($email1, $subject, $message, $headers, '-f noreply@mywebsite.org');
        $db->commit();
        echo "Thanks for joining! Check your email in a few moments to activate your account so that you may log in. See you on the site!<br />$bcrypt<br />$hmac<br />$salt<br />$token"; 
        exit();
        $db = null;
        exit();
    }
        catch(PDOException $e){
            $db->rollBack();
            echo $e->getMessage();
            $db = null;
            exit();
        }
} 
```

其余代码也可以正常工作，因为数据被插入到数据库中，并且我的电子邮件激活被发送出去。问题是现在散列密码存储在数据库中，如下所示：

> $2hm7KFNCFyfM

我很难弄清楚为什么当我只是回显散列密码时，它是一个很好的长散列字符串，但在错误检查并插入数据库之后它被切断了。也许一双额外的眼睛可以发现我的错误？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:48:40.233

好的...我所要做的就是从 5.2 升级我的 php 版本。

要更具体地说明问题所在：对于 PHP < 5.3，当使用河豚算法时，应该使用

> $2a$

大于 PHP 5.2 使用

> $2y$

换句话说，在不更新我的 php 版本的情况下，解决此问题的方法是更改​​此行：

```
$bcrypt = crypt($hmac, '$2y$12$' . $salt); 
```

对此：

```
$bcrypt = crypt($hmac, '$2a$12$' . $salt); 
```

以防万一有人遇到同样的问题:)

# apache - 使用从挂载读取的 Apache VirtualHost 设置 SeLinux 的正确方法？

> ID：15795410
> 
> 赞同：0
> 
> 时间：2013-04-03T18:42:42.107
> 
> 标签：apache, selinux

我有一个需要从中设置 VirtualHost 的挂载。`/opt/foo`

当我使用 SeLinux 创建 VirtualHost 时，Apache 报告该目录不存在。

当我将 SeLinux 设置为许可模式时，它工作正常。

设置我的`/opt/foo`目录的正确方法是什么，以便在执行时它可以与 Apache 和 SeLinux 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T19:50:52.570

首先，permissive 模式意味着 SELinux 只是将拒绝记录到审计日志中，但没有真正被拒绝。它仅用于调试和设置您的 SELinux 策略，当启用特权模式时，您的系统将不受 SELinux 保护。Enforing 模式是具有限制和审核的完整 SELinux 功能。

在您的情况下，apache 无法访问 /opt/foo。请参阅链接 [https://superuser.com/questions/607409/configuring-selinux-to-allow-logging-to-a-file-thats-outside-var-log](https://superuser.com/questions/607409/configuring-selinux-to-allow-logging-to-a-file-thats-outside-var-log)

但使用 SELinux 类型“httpd_sys_content_t”而不是“var_log_t”。

# python - 在 Django 美味派中禁用分页？

> ID：15795416
> 
> 赞同：8
> 
> 时间：2013-04-03T18:43:00.850
> 
> 标签：python, django, pagination, tastypie

我有一个我正在处理的美味 api，并且在我的 api 资源的列表视图中，我想在不应用分页的情况下获取整个数据列表，无论列表中的对象数量如何。我不需要具有上限的自定义分页器，我想完全禁用分页。

我可能会修改我的客户端以处理分页（API 是从 C++ DLL 而不是 Web 浏览器访问的，所以它有点复杂但可能）但如果我可以禁用它会更容易。

是否有一个开关可以禁用不同资源的分页器，或者可能有一个 api 范围的开关来禁用注册到该 api 对象的所有资源的分页？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:24:28.070

为此，您需要设置至少两个不同的东西。

在站点设置文件中，设置

```
API_LIMIT_PER_PAGE = 0 
```

在要禁用分页的资源元类中，设置：

```
class MyResource(ModelResource):
    ...
    class Meta:
        ...
        max_limit = None 
```

然后，如果您导航到资源的列表视图，返回的内容应该显示限制为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T20:39:00.513

另一种解决方案是定义 DummyPaginator 类（最初在此处描述：[https](https://github.com/toastdriven/django-tastypie/issues/777) ://github.com/toastdriven/django-tastypie/issues/777 ），它应该是tastepie的一部分（但不幸的是......）：

```
class DummyPaginator(object): 
    def __init__(self, request_data, objects, resource_uri=None,
                 limit=None, offset=0, max_limit=1000,
                 collection_name='objects'): 
        self.objects = objects
        self.collection_name = collection_name 

    def page(self):
        return { self.collection_name: self.objects, } 
```

然后，在您的资源 Meta 中，您设置：

```
 paginator_class = DummyPaginator 
```

# three.js - three.js - 将材质添加到 OBJ 加载器 (WEBGL)

> ID：15795420
> 
> 赞同：0
> 
> 时间：2013-04-03T18:43:16.560
> 
> 标签：three.js, webgl

**嗨，我已经尝试了不同的源代码来向几何图形添加材料，但是如果我添加这样的代码：**

```
var material1 = new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true } ); 
```

**我没有得到我的 obj（模型）的阴影/材质。它就像一个平面视图。示例：*[http ://dev.interactive-creation-works.net/Three/viewer.html](http://dev.interactive-creation-works.net/Three/viewer.html)***

```
// This string has to be the path to your texture file.
loader.load( '0.jpg' );

/*** OBJ Loading ***/
var loader = new THREE.OBJLoader();

// As soon as the OBJ has been loaded this function looks for a mesh
// inside the data and applies the texture to it.
loader.addEventListener( 'load', function ( event ) {
var object = event.content;
object.traverse( function ( child ) {
  if ( child instanceof THREE.Mesh ) {
    child.material.map = texture;
  }
} );

 // object = new THREE.Mesh( geometry, [ new THREE.MeshFaceMaterial(), new   THREE.MeshPhongMaterial( { color: 0xff4400, wireframe: true, wireframeLinewidth: 2 } ) ] );
object = new THREE.Mesh(geometry);

// My initial model was too small, so I scaled it upwards.
object.scale = new THREE.Vector3( 25, 25, 25 );

// You can change the position of the object, so that it is not
// centered in the view and leaves some space for overlay text.
object.position.y -= 2.5;
scene.add( object );

});

// This string has to be the path to your object file.
loader.load( '0.obj' );

// We set the renderer to the size of the window and
// append a canvas to our HTML page.
renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
container.appendChild( renderer.domElement ); 
```

任何人最终都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:23:47.987

你的模型有紫外线坐标吗？[在 Three.js 中导入](https://stackoverflow.com/questions/15782701/object-importing-in-three-js)的这个问题对象中的代码完全一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:14:16.810

使用不带线框属性的 MeshPhongMaterial（或 Lambert）来获得与灯光（阴影）配合得很好的材质。例如。

```
var material1 = new THREE.MeshPhongMaterial( { color: 0x00ff00 } ); 
```

MeshBasicMaterial 总是平坦的。

此外，您只替换纹理（贴图），而不是加载回调/遍历函数中的材质。您需要将那里的材质分配给对象，如果您只替换贴图，材质类型将是 .obj 加载器创建的任何内容。

# file-io - 为 RTF 文档中的单元格设置最小高度？

> ID：15795421
> 
> 赞同：2
> 
> 时间：2013-04-03T18:43:18.960
> 
> 标签：file-io, cell, rtf

我正在编写一个程序，它以编程方式创建（不使用外部库）一个 rtf 文档，其中包含一个简单的表格。这是相关的rtf代码：

```
{\rtf1\ansi\deff0
\trowd\trgaph144
\clbrdrt\brdrs\clbrdrl\brdrs\clbrdrb\brdrs\clbrdrr\brdrs
\cellx1000
\clbrdrt\brdrs\clbrdrl\brdrs\clbrdrb\brdrs\clbrdrr\brdrs
\cellx2000
\clbrdrt\brdrs\clbrdrl\brdrs\clbrdrb\brdrs\clbrdrr\brdrs
\cellx3000
cell 1\intbl\cell
lots of text in cell two\intbl\cell
cell 3\intbl\cell
\row
} 
```

问题是此代码将使单元格尽可能短（高度方面），同时仍保留其内容。 **我希望单元格具有最小高度（例如 50 个单位），并且如果它们的内容超出其容量，则让它们扩展。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:24:19.200

我想通了...您所要做的就是添加“\trrhN”，其中 N 是该行的最小高度...有关更多详细信息，请查看： http: [//www.biblioscape.com/rtf15_spec.htm](http://www.biblioscape.com/rtf15_spec.htm)

# uml - 什么是员工守时系统的用例图

> ID：15795422
> 
> 赞同：0
> 
> 时间：2013-04-03T18:43:23.853
> 
> 标签：uml, system, diagram, use-case

这是我目前的员工准时监控系统：

目前判断员工迟到早退的制度是老板看到员工还没到办公室，员工比老板先走的时候。如果满足一种或两种情况，老板决定做什么。老板可以在年度绩效评估中给员工打分，在员工的年度奖金上扣除一笔金额，降级员工，或者干脆放手。

在我的用例图中，我有 1 个参与者（上级）和 1 个用例（检查下级）。我现在很迷茫，我想我应该`<<extend>>`采取老板将对员工采取的行动。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:14:39.537

您可以通过几种不同的方式对此进行建模：

1-使用扩展：正如您在问题中提到的，您可以让您的三个用例扩展“检查下属”用例。在这种情况下，您将拥有一个所有 3 个都将使用的扩展点。然后，您可以为这些扩展关系添加不同的条件；但显然你对这三个人都有相同的条件（员工迟到和/或早退）。

2-使用先决条件：如果“检查下属”没有做任何其他事情，只是充当扩展点，则摆脱它并拥有3个用例。您可以指定“员工迟到和/或早退”条件作为这些用例的先决条件。

您可以添加一个名为“采取纪律处分”的新抽象用例，并让您的三个用例对其进行专门化处理。这将简化您的图表，并且可以在两种情况下使用（1 和 2）

可能是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/yLocp.png)

# javascript - Javascript代码可以隐藏吗？

> ID：15795424
> 
> 赞同：2
> 
> 时间：2013-04-03T18:43:26.377
> 
> 标签：javascript, html

保护我的“工艺”的冲动一直存在。使用 C/C++ 我发现人们可以逆向编译。经过一番心理斗争，我不知何故接受了一个残酷的事实：**人们总是可以通过努力工作回到应用程序的源头。**发现这一点后，我花了很多时间手动混淆代码。让饼干很难重新找回我珍贵作品的起源。

最近我有机会看到 HTML 5 和 JavaScript 的美妙之处。我从一开始就喜欢它；现在可以联系到很多人，唯一的要求是网络浏览器。我预计很多软件将被移植到 HTML 5。也许是高端游戏、完整的 CAD 程序和巨大的开发工具包。使用当前和未来的浏览器，这一切都将成为可能。

我遇到的唯一问题是；这种可移植性不允许隐藏来源。这让我非常困扰，因为我知道我提供的服务可能会被利用。
尽管我发现了很多关于 JavaScript 混淆的内容，但它始终是同一种解释语言。这意味着可以非常非常容易地逆转混淆。

现在我的实际问题是：
有谁知道隐藏在浏览器中运行的客户端代码的方法，因此很难恢复原始源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:45:04.833

JavaScript 代码可以被缩小和混淆，但这只会阻止偶然的逆向工程尝试。

在客户端中运行的任何代码都可以通过足够的努力进行逆向工程。对于 JavaScript，逆向工程的门槛不是很高。

现实情况是，混淆仅在少数用例中提供真正的经济利益。就连以闭源着称的微软，也通过Entity Framework、ASP.Net MVC等项目走上了开源之路。在这些情况下，开源的经济效益显然超过了闭源的经济效益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:47:01.933

您不能隐藏页面的 javascript/html/css 源代码，因为浏览器必须能够读取它。您可以缩小/混淆它，但这只会让它有点难以阅读。

我理解你的立场——我在项目上花费了数百个小时，我不希望人们能够拿走我的代码等。

但是开源的力量实在是太大了。你无法想象有多少人实际上能够从你的工作中学习，或者在他们试图建立自己的项目中使用你的工作。这是令人难以置信的授权和值得。

我的整个职业生涯都归功于能够看到网页的来源并了解它们是如何完成的*。*

# ubuntu - 精炼厂CMS安装错误

> ID：15795425
> 
> 赞同：0
> 
> 时间：2013-04-03T18:43:37.080
> 
> 标签：ubuntu, refinerycms

（对不起我的英语）我试图用`gem install refinerycms` 它的 drop 安装：

> 获取：acts_as_indexed-0.7.8.gem (100%) 错误：执行 gem 时 ... (Gem::FilePermissionError) 您没有写入 /usr/lib/ruby/gems/1.9.1 目录的权限。

我有 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:59:22.640

您可能只是有权限问题。 [gem install 权限问题](https://stackoverflow.com/questions/2619695/gem-install-permission-problem) 我认为 29+ 的最后一个答案可能是您想要查看的。

# c# - 如何使用 C# 和 .NET 3.5 创建 SAML 2.0 响应？

> ID：15795427
> 
> 赞同：1
> 
> 时间：2013-04-03T18:43:41.413
> 
> 标签：c#, .net, xml, single-sign-on, saml

第三方软件通过 SAML 2.0 版提供 SSO 功能。

他们的文档提供了有关他们将在请求中发送哪些字段以及他们期望返回哪些字段以对特定用户进行身份验证的信息。这个概念实际上看起来非常简单，但我在使用 SAML 本身时遇到了麻烦。

到目前为止，我能够接收、解压缩和解析他们的 SAML 请求，但我不知道如何创建 SAML 以发送回他们。

我查看了 SamlAssertion 类，但由于我使用的是 .NET 3.5 版本，因此该类仅生成 SAML 1.1 版。

除此之外，我没有找到很多关于如何创建简单 SAML 响应的资源。

因此，问题是：如何使用 C# 创建简单的 SAML 2.0 响应？

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:16:33.960

由于 SAML 将 XmlDsig 用于消息级别的安全性，因此您可以根据规范手动创建令牌，然后只需使用 SignedXml 类对 Xml 进行签名。

另外，看看这个

[http://www.componentspace.com/Products/SAMLv20.aspx](http://www.componentspace.com/Products/SAMLv20.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:41:52.843

查看MSDN 上的示例[SelfSTS 项目中的代码。](http://archive.msdn.microsoft.com/SelfSTS/Release/ProjectReleases.aspx?ReleaseId=4858)

这篇[博客文章](http://www.cloudidentity.com/blog/2010/08/23/SELFSTS-WHEN-YOU-NEED-A-SAML-TOKEN-NOW-RIGHT-NOW/)详细介绍了它的工作原理。需要 .Net 4.0 和 WIF 运行时。

> **SelfSTS：当您现在需要 SAML 令牌时，马上**
> 
> SelfSTS 是一个简单的 .EXE 文件，它不需要 IIS 并且从不涉及证书存储。无需安装，您只需要 .EXE 文件本身、其配置文件和要用于签署令牌的证书的 PFX 文件。它的唯一要求是 .NET 4.0、WIF 运行时和（如果您想生成额外的证书）Windows SDK。
> 
> SelfSTS 提供了一个简单的 UI，用于轻松编辑它将发出的声明的类型和值：元数据文档将相应地动态更新。
> 
> SelfSTS 提供了一个用于简化创建自签名 X.509 证书的 UI，如果您需要使用具有特定主题的签名证书，或者由于某种原因您不能使用开箱即用的证书，则可以使用该 UI。

**编辑声明** ![编辑声明](https://i.stack.imgur.com/A1GIX.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:28:23.297

看看[在 C# .NET 4.5 中使用 SAML 2.0 的](https://stackoverflow.com/q/15530184/9922)内容大致相同。

您可以使用 WIF SAML CTP，但这只是一个预览版，很久没有升级了。

否则，根据@Wiktor，使用商业堆栈之一。

我不知道 C# 中有任何开源 SAML 堆栈。

最接近的是 OpenSAML，它是用 C 编写的 IIRC。

# .htaccess - 将多个 URL 重写/屏蔽为相同的 url

> ID：15795428
> 
> 赞同：0
> 
> 时间：2013-04-03T18:43:43.297
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我目前有多个 URL，或者更准确地说是一个带有查询字符串的 URL，我都希望将其读取为同一个 URL。

*   /example/url/index.php?foo=A&bar=B
*   /example/url/index.php?foo=C&bar=D
*   /example/url/index.php?foo=E&bar=F

我希望这些都重写为单个 URL

重写到 www.site.com/singlepage

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:49:39.077

```
RewriteEngine on
RewriteRule ^/example/url/index.php(.*)$ http://www.site.com/simglepage [R] 
```

[这](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)是一个很好的网站，描述了 URL 重写的工作原理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:17:06.167

如果我正确理解您的问题，您希望将所有这些 URL 从外部重定向到单个 URL。通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+/example/url/index\.php\?foo=[^&]*&bar= [NC]
RewriteRule ^ singlepage? [R=302,L] 
```

验证一切正常后，您可以替换`R=302`为`R=301`（**永久重定向**）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:26:59.567

对的，这是可能的！在您的`.htaccess`文件中，使用以下代码：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^singlepage$ /example/url/index.php [QSA] 
```

# php - 如何使用 PHP 制作动态 XML

> ID：15795431
> 
> 赞同：1
> 
> 时间：2013-04-03T18:43:56.990
> 
> 标签：php, xml, dynamic

我想像这样从php制作一个xml文件。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<feed>
    Everything from php form will go here like this:
    <item sdImg="" hdImg="">
        <title></title>
        <contentId></contentId>
        <contentType></contentType>
        <contentQuality></contentQuality>
        <streamFormat></streamFormat>
        <media>
            <streamQuality></streamQuality>
            <streamBitrate></streamBitrate>
            <streamUrl></streamUrl>
        </media>
        <synopsis></synopsis>
        <genres></genres>
        <runtime></runtime>
    </item>
    now this elements will be submitted again and again with different values.
</feed> 
```

现在的问题是我希望在此祖父母 `feed`标记之间写入表单的输出。我认为`FOPEN`并且`FWRITE`会很有用，但我认为它们不能在这里使用。那么在这里可以使用的最有用的php功能是什么。而且表单将一次又一次地写入同一个xml文件。我的意思是每次用户都会提交表单。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:51:29.360

由于`$_POST`是一个数组，您可以使用[PHP 的 SimpleXML](http://php.net/manual/en/book.simplexml.php)将发布数据转换为 XML 格式。

```
$xml = new SimpleXMLElement('<feed/>');
array_walk_recursive( $_POST, array( $xml, 'addChild' ) );
print $xml->asXML( ); 
```

根据您的使用情况，您可能需要`array_flip`获取要匹配的键/值对的内容。

请注意，您可能需要清理已发布的数据，以确保无论您使用它做什么都是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:49:21.253

[您可以使用类似DOMDocument](http://www.ibm.com/developerworks/library/os-xmldomphp/)的东西生成 xml 对象，并将输出保存为 XML 文件。

# sql-server-2008 - 连接字符串中的名称解析从网络共享失败

> ID：15795432
> 
> 赞同：0
> 
> 时间：2013-04-03T18:43:58.517
> 
> 标签：sql-server-2008, windows-7, .net-4.0

我需要和网络基础设施人员坐在一起，看看为什么突然发生如下 SQL 连接错误。

作为准备，请输入为什么会发生此错误，以及我们可以在应用程序和/或基础架构方面尝试哪些措施来规避它。

*   从网络共享启动应用程序时发生错误。
*   将文件复制到本地并在本地启动时不会发生错误。
*   错误总是可以重现的。
*   几周前（在我去度假之前）它运行良好，所以我不确定它是什么时候自我介绍的。

现在的复杂性：

*   用户在 DomainA
*   工作站位于 DomainB
*   数据库服务器在 DomainB
*   数据库登录是使用用户/密码（还没有受信任的连接）
*   登录域是 DomainA
*   网络共享位于 DomainA 中，但作为 DFS 的一部分
*   DomainA 和 DomainB 之间的双向信任
*   客户端应用程序是 x86 Windows 7 Enterprise 上的 .NET 4（完整框架）
*   服务器是 x64 Windows Server 2008 R2 上的 SQL Server 2008 R2 Enterprise

连接字符串是这样的：

```
Server=severname.DomainB\InstanceName,48000;Database=DBName;... 
```

尝试了一个基于 IP 的 ConnectionString，如下所示，它有效，所以它是一个名称解析的东西：

```
Data Source=IPAddress\InstanceName,48000;Database=DBName;... 
```

由于 IP 地址可能会更改，我们希望保留名称（但 IP 地址可以使用一段时间）。
我们应该做些什么来进一步研究名称解析的事情？

换句话说：

> 为什么从网络共享启动时名称解析与从本地驱动器启动时名称解析不同？为什么过去没有什么不同？

环境非常封闭（典型的公司环境），因此简单的调试可能很困难。

IT 基础设施人员正在为拆分 DomainA 和 DomainB 做准备（未来的行动之一：将大量用户从 DomainA 转移到 DomainB，然后将 DomainB 设为登录域），并尽量减少对运行信息的影响。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。
> 服务器未找到或无法访问。
> 验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:27:02.463

暂时使用 IP 地址。如果您真的，真的，真的想要在连接字符串中使用友好名称，那么`hosts`如果您的网络人员无法使名称解析正常工作，请使用该文件。当服务器移动时，您可以更新配置文件以指向新服务器（通过名称，如果他们知道如何让它工作，或者通过新 IP 如果没有），或者更新`hosts`文件以映射旧的新 IP 地址的友好名称。

我们无法真正告诉您为什么它会改变或为什么会损坏 - 一旦您向他们提供证据，例如能够通过 IP 地址而不是名称远程登录到端口 48000 上的机器，您应该从网络团队那里得到更好的答案. 他们可能不知道修复方法，但最好在[ServerFault](http://serverfault.com)上询问具体情况。

# c# - 在 C# 中实现 List 集合的困难

> ID：15795433
> 
> 赞同：-2
> 
> 时间：2013-04-03T18:44:00.813
> 
> 标签：c#, list, collections

所以，我第一次尝试实现一个列表。我最终将在三层设计中使用它，其中列表包含来自数据库查询的所有结果。我似乎无法让这个小项目工作。

```
namespace listTest

class Account
{
   public string fName {get; set;}
   public string lName {get; set;}

   public Account()
   {
   }

   public Account(string last, string first)
   {
      this.fName = first;
      this.lName = last;
   }

     public void LoadAccounts()
     {
        List<Account> Accounts = new List<Account>();
        Accounts.Add(new Account("firstName", "lastName"));
     }
 } 
```

所以，这是我的 Account 类。我必须先说我不知道​​我是否正确实施了这一点。

```
private void getListBtn_Click(object sender, EventArgs e)
{
   Account newAccount = new Account();
   List<Account> Accounts = new List<Account>();
} 
```

这是我点击按钮加载列表的地方。这里的想法是访问 fName 和 lName 值并更改表单上的两个标签。我现在拥有它的方式一切都编译了，但是我在我的表示层上得到了 fName 和 lName 的空值。我做这一切都错了吗？我觉得域层是列表的最佳位置。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:52:11.213

您需要创建一个`List<Account>`从数据库中返回的方法，如下所示

```
 public List<Account> LoadAccounts()
 {
     List<Account> AccountsList = new List<Account>();

     // Get Accounts records from Database and add them into AccountsList as per your logic like this

     AccountsList.Add(myaccount);

     return AccountsList
 } 
```

然后你可以像这样在你的表示层上使用它

```
 private void getListBtn_Click(object sender, EventArgs e)
 {
    List<Account> Accounts = LoadAccounts();

   // now you can access first name and last name of each records like this

   foreach(Account account in Accounts)
   {
     string firstName=account.fName ;
     string lastName=account.lName ;
   }
 } 
```

# java - JSTL/EL 中的增量字母

> ID：15795434
> 
> 赞同：0
> 
> 时间：2013-04-03T18:44:03.867
> 
> 标签：java, jsp, jstl, el, jsp-tags

所以我正在为数字做这样的事情：

```
<c:set var="n" value="${n+1}"/> 
```

是否有增加字母的等价物？如果'a'，则设置为'b'，如果'd'则设置为'e'？就像是：

```
<c:set var="c" value="${c++}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:29:12.097

[这里](https://stackoverflow.com/questions/9876955)的最佳答案似乎有它。我建议使用 scriptlet 来完成它。这将让您在 JSP 中执行和嵌入简单的 java 函数调用

```
<c:set var="c" value="<%=Character.toChars( ## int value of c++ ##)%>"/> 
```

# php - 定制的贝宝立即购买按钮

> ID：15795440
> 
> 赞同：0
> 
> 时间：2013-04-03T18:44:15.237
> 
> 标签：php, paypal

我正在尝试构建一个定制的贝宝“立即购买”按钮/链接。该按钮应自动生成，并使用用户的电子邮件地址为我的网页的每个用户定制。电子邮件地址从数据库中取出，按钮/链接由我的 PHP 脚本自动生成，并且包含自定义链接的电子邮件将发送给用户。当用户现在点击链接时，他/她可以登录到他/她的贝宝账户并进行交易。交易成功后，我的服务器上的 PHP 脚本将被调用，该脚本将上述链接中指定的电子邮件地址作为附加参数，并标识刚刚付款的用户。

贝宝文档一团糟——我还不知道如何在贝宝“立即购买”链接中传递用户的电子邮件地址。非常感谢任何帮助。

最好的！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:52:12.707

从数据库中检索电子邮件，从 paypal 获取代码，然后将您的 $email 变量放入输入值中。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value='".$email."'> // here the email from DB
    <input type="hidden" name="lc" value="US">
    <input type="hidden" name="button_subtype" value="services">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form> 
```

如果您不想要按钮，只需链接到 您格式化的变量`https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=test%40hotmail%2ecom&lc=US&button_subtype=services&currency_code=USD&bn=PP%2dBuyNowBF%3abtn_buynowCC_LG%2egif%3aNonHosted` 在哪里`business=test%40hotmail%2ecom`

# c# - 对象未设置为对象的实例 - LINQ WCF

> ID：15795442
> 
> 赞同：0
> 
> 时间：2013-04-03T18:44:17.887
> 
> 标签：c#, linq

我正在尝试将用户存储到我的 Azure 表中，但是在尝试创建用户时，我得到“对象未设置为对象的实例”，为什么？？？

```
UserEntity entry = new UserEntity();
entry.UserName = pUserName;
entry.MiniatureImageURL = blob.Uri.ToString();
entry.PhotosUrl.Add(blob.Uri.ToString()); //THIS IS A LIST of strings
Connection cn = new Connection();
cn.AddUserEntries(entry); 
```

我的连接类定义如下：

在这里，我尝试将新用户添加到当前上下文，然后尝试将项目保存在存储中：

```
public void AddUserEntries(UserEntity newItem)
{
   try
   {
      this.context.AddObject("UserEntity", newItem);
      this.context.SaveChanges();
   }

   catch (Exception ex)
   {
      throw new Exception(ex.Message);
   }
}

static Connection()
{
   try
   {
      storageAccount = CloudStorageAccount.FromConfigurationSetting("dataconnectionstring");

      CloudTableClient.CreateTablesFromModel(
      typeof(Connection),
         storageAccount.TableEndpoint.AbsoluteUri,
         storageAccount.Credentials);
   }

   catch (Exception ex)
   {
      throw new Exception(ex.Message);
   }
}

public Connection()
{
   try
   {
      this.context = new UserDataContext(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials);
      this.context.RetryPolicy = RetryPolicies.Retry(3, TimeSpan.FromSeconds(1));
   }

   catch (Exception ex)
   {
      throw new Exception("There was a problem trying to create the user. " + ex.Message);
   }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:50:40.417

您在代码中取消引用的唯一对象是`blob.Uri`. 检查是否`blob`是`null`，或者如果`blob.Uri`是`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:57:00.040

如果你使用

```
try
{
    ...
}
catch (Exception ex)
{
    throw new Exception(ex.Message);
} 
```

您丢失了堆栈跟踪。如果您删除这些 try catch 块。您应该能够获得导致问题的行的正确堆栈跟踪。您可以在该行的代码中放置一个断点，以查看它的哪一部分为空。此时，您可以查看为什么该值为 null，以及添加适当的安全防护以确保您的代码在该值为 null 时不会执行该行。

# php - 来自 PHP 驱动程序的 MongoDB 连接问题

> ID：15795446
> 
> 赞同：0
> 
> 时间：2013-04-03T18:44:31.017
> 
> 标签：php, mongodb, mongodb-php

我在我的 NewRelic 帐户中得到了随机的应用程序事务跟踪，这表明 php 有时很难连接到我的 MongoDB 副本集。

事务跟踪表明 MongoConnection::getConnection 有时需要 1-6 秒。然而，我正在监控的事务平均需要大约 25 毫秒。

这是我的连接类：

```
class MongoConnection {
    static $db = NULL;

    static function getConnection() {
        if (self::$db === null) {
            try {
                $m = new MongoClient("mongodb://server1:27017,server2:27017/?replicaSet=replicaset");
            } catch (MongoConnectionException $e) {
                die('Failed to connect to MongoDB '.$e->getMessage());
            }
           self::$db = $m->database;
        } 
        return self::$db;
    }
} 
```

我正在运行 MongoDB v2.4 和 PHP 驱动程序 v1.3.4。

我不知道为什么会发生这种情况，也不知道要寻找什么来诊断问题。如果有人可以告诉我发生了什么或指出我应该在哪里寻找问题的方向，请告诉我。很高兴提供更多信息。谢谢。

# javascript - 在垂直 div 容器中向上滚动而不是向下滚动

> ID：15795448
> 
> 赞同：2
> 
> 时间：2013-04-03T18:44:35.880
> 
> 标签：javascript, jquery, html, css, parallax

我目前有用于水平滚动视差网站的 HTML 和 CSS。但是，我希望这样当您到达特定部分时，您会得到一个垂直视差滚动而不是水平滚动。

看看这个网站的例子： http: [//paranorman.com/scene/normans-friends](http://paranorman.com/scene/normans-friends) ...你会看到水平滚动，突然变成垂直滚动......

看看这个 JSFiddle：http: [//jsfiddle.net/L2MZe/](http://jsfiddle.net/L2MZe/)

我目前有一个水平滚动的视差，其中嵌套了一个垂直滚动的 div ......我不太确定如何让 div 向上滚动，而不是向下滚动。

这是我用于我的 'go-up' div 的代码：

```
#go-up {
background-color:blue;
width:650px;
left:3000px;
overflow-y: scroll;
height:100%;
overflow-x:hidden;
} 
```

有没有办法让'go-up' div 从其内容的底部开始（使用 JS 或 CSS）？这似乎是最简单的方法，但如果有其他方法，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:14:41.677

要将滚动位置设置到底部，可以使用一点 jQuery/javascript：

```
// maximum vertical scroll
var maxScrollV = $('#go-up')[0].scrollHeight - $('#go-up').innerHeight();

// Set vertical scroller to bottom
$('#go-up').scrollTop(maxScrollV); 
```

至于使用水平滚动条进行垂直滚动，我会创建一个位于主要内容下方的假滚动条，并`overflow: hidden`在两个方向上制作主要内容。然后使用jQuery和一些数学来使用假滚动条的位置来设置主要内容的滚动位置：

```
$('#main').stellar();

// maximum vertical scroll
var maxScrollV = $('#go-up')[0].scrollHeight - $('#go-up').innerHeight();

// Set vertical scroller to bottom
$('#go-up').scrollTop(maxScrollV);

// Maximum horizontal scroll of fake scroller
var maxScrollH = $('#scroller')[0].scrollWidth - $('#scroller').innerWidth();

// Whenever you move the fake scroller, update the content's scroll
$('#scroller').on('scroll', function () {
    // position of fake scroll bar
    var sL = $('#scroller').scrollLeft();
    if (sL < 3000) {
        // If not at the vertical scroller, just H-scroll
        $('#main').scrollLeft(sL);
    } else {
        // How far have we scrolled passed the vertical scroll point?
        var percScrollV = (sL-3000)/(maxScrollH-3000);

        // Make sure we only scroll to the vertical scroll point
        $('#main').scrollLeft(3000);

        // Do the vertical scroll
        $('#go-up').scrollTop( maxScrollV - (maxScrollV * percScrollV) );
    }
}); 
```

演示：http: [//jsfiddle.net/JD7Jc/1/](http://jsfiddle.net/JD7Jc/1/)

我在这里的演示使用垂直滚动条的固定位置 (3000px) 和假滚动条的任意宽度，但需要做更多的工作，您可以自动找到位置，并根据一些合理的计算设置宽度。

编辑，这是一个例子：http: [//jsfiddle.net/JD7Jc/2/](http://jsfiddle.net/JD7Jc/2/)

# sql-server - 隔离存储异常：无法确定域的身份

> ID：15795458
> 
> 赞同：6
> 
> 时间：2013-04-03T18:44:51.600
> 
> 标签：sql-server, reporting-services, sql-server-2012, reportserver

我在 SQL Server 2012 SP1 Reporting Services 实例中设置了订阅，该实例将 34MB 文件导出到 Excel 2007-2013 XLSX OpenXML 渲染扩展。订阅会引发以下错误：

**System.IO.IsolatedStorage.IsolatedStorageException：无法确定域的身份。**

我验证可以毫无问题地将报告从报告管理器导出到 Excel 2007-2013 XLSX OpenXML 渲染扩展。此错误仅在通过订阅执行报告时发生。我对此进行了研究，并在网上找到了以下建议：

1.  两个单独的 Microsoft Connect 错误报告[764356](https://connect.microsoft.com/SQLServer/feedback/details/764356/subscription-fails-due-to-error-system-io-isolatedstorage-isolatedstorageexception-unable-to-determine-the-identity-of-domain)和[764556](https://connect.microsoft.com/SQLServer/feedback/details/764556/rrrendering-error-when-rendering-larger-reports-to-xlsx-via-subscription-sql-2012)没有列出的解决方法。

2.  错开订阅的建议，以便一次只运行一个。这无济于事，因为在错误发生时只有一个订阅正在运行。

3.  建议使用 Excel 2003 呈现方法并将行分成单独的选项卡以避免 65,536 行限制。我确实验证了这个工作，但从业务利益相关者的角度来看，这不是一个可接受的解决方案。

4.  指示使用 Excel 2007-2013 呈现方法大小超过 10 MB 的任何报告的注释从在内存中生成切换到使用独立存储。没有解释为什么这很糟糕，我认为这样做是有充分理由的——也许是为了限制 RAM 消耗。

5.  为 ASP.NET 应用程序的独立存储文件夹中的用户提升权限的建议。我找不到 Reporting Services 的独立存储文件夹所在的位置。

6.  建议使用绕过此问题的额外代码包装 ASP.NET 的隔离存储代码。我找不到将此解决方案应用于 Reporting Services 的方法，因为这是 Microsoft 提供的产品。

7.  修改报表管理器和报表服务器 web.config 文件以在 httpRuntime 节点中包含 maxRequestLength="200000" 的建议。这并没有改变结果。

8.  在 RSReportServer.config 中明确增加内存设置的建议。这似乎没有帮助，因为该错误与独立存储有关，但我出于绝望尝试了它。这并没有改变结果。

9.  将 DatabaseQueryTimeout 值从 120 更改为更大值的建议。这并没有改变结果。

10.  更改订阅执行超时值的建议。这并没有改变结果。

以下是完整错误日志条目的副本：

```
reportrendering!WindowsService_5!1628!04/03/2013-09:48:33:: e ERROR: Throwing Microsoft.ReportingServices.ReportProcessing.UnhandledReportRenderingException: , Microsoft.ReportingServices.ReportProcessing.UnhandledReportRenderingException: An error occurred during rendering of the report. ---> Microsoft.ReportingServices.OnDemandReportRendering.ReportRenderingException: An error occurred during rendering of the report. ---> System.IO.IsolatedStorage.IsolatedStorageException: Unable to determine the identity of domain.
   at System.IO.IsolatedStorage.IsolatedStorage._GetAccountingInfo(Evidence evidence, Type evidenceType, IsolatedStorageScope fAssmDomApp, Object& oNormalized)
   at System.IO.IsolatedStorage.IsolatedStorage.GetAccountingInfo(Evidence evidence, Type evidenceType, IsolatedStorageScope fAssmDomApp, String& typeName, String& instanceName)
   at System.IO.IsolatedStorage.IsolatedStorage._InitStore(IsolatedStorageScope scope, Evidence domainEv, Type domainEvidenceType, Evidence assemEv, Type assemblyEvidenceType, Evidence appEv, Type appEvidenceType)
   at System.IO.IsolatedStorage.IsolatedStorage.InitStore(IsolatedStorageScope scope, Type domainEvidenceType, Type assemblyEvidenceType)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetStore(IsolatedStorageScope scope, Type domainEvidenceType, Type assemblyEvidenceType)
   at MS.Internal.IO.Packaging.PackagingUtilities.ReliableIsolatedStorageFileFolder..ctor()
   at MS.Internal.IO.Packaging.PackagingUtilities.GetDefaultIsolatedStorageFile()
   at MS.Internal.IO.Packaging.PackagingUtilities.CreateUserScopedIsolatedStorageFileStreamWithRandomName(Int32 retryCount, String& fileName)
   at MS.Internal.IO.Packaging.SparseMemoryStream.EnsureIsolatedStoreStream()
   at MS.Internal.IO.Packaging.SparseMemoryStream.SwitchModeIfNecessary()
   at MS.Internal.IO.Zip.ZipIOFileItemStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.Compression.DeflateStream.InternalWrite(Byte[] array, Int32 offset, Int32 count, Boolean isAsync)
   at System.IO.Compression.DeflateStream.Write(Byte[] array, Int32 offset, Int32 count)
   at MS.Internal.IO.Packaging.CompressStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Zip.ProgressiveCrcCalculatingStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Zip.ZipIOModeEnforcingStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.XMLModel.XMLStreamsheetModel.WriteStreamToStream(Stream from, Stream to)
   at Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.XMLModel.XMLStreamsheetModel.Cleanup()
   at Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.OpenXmlGenerator.FinalizeWorksheet()
   at Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.OpenXmlGenerator.NextWorksheet()
   at Microsoft.ReportingServices.Rendering.ExcelRenderer.ExcelRenderer.Render(Report report, NameValueCollection reportServerParameters, NameValueCollection deviceInfo, NameValueCollection 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-19T14:07:13.493

您可以在这里找到解决方案：[http ://rekiwi.blogspot.com/2008/12/unable-to-determine-identity-of-domain.html](http://rekiwi.blogspot.com/2008/12/unable-to-determine-identity-of-domain.html)

在 COM 组件中，使用适当的证据创建一个新的 AppDomain 并执行其中的代码。

这是一个为我解决问题的代码示例：

```
AppDomainSetup setup = new AppDomainSetup();
setup.ApplicationBase = AppDomain.CurrentDomain.BaseDirectory.ToString();

//Then we need our evidence
System.Security.Policy.Evidence evidence = new System.Security.Policy.Evidence();
evidence.AddHost(new System.Security.Policy.Zone(System.Security.SecurityZone.MyComputer));

//Now we can fire up an AppDomain running with that evidence.
AppDomain domain = AppDomain.CreateDomain("YourDll.YourClass", evidence, setup);

YourDll.YourClass yourclass = (YourDll.YourClass)domain.CreateInstanceAndUnwrap(typeof(YourDll.YourClass).Assembly.FullName, typeof(YourDll.YourClass).FullName);

yourclass.CallYourMethod(); 
```

您想要跨 AppDomain 编组的任何类型都必须标记为 [Serializable()] 并且必须从 MarshalByRefObject 继承。例如：

```
namespace YourDll
{
[Serializable()]
public class YourClass: MarshalByRefObject
{
... 
```

# ruby-on-rails - 创建对象后使用 ActiveRecord::Errors

> ID：15795459
> 
> 赞同：0
> 
> 时间：2013-04-03T18:44:51.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我可以`ActiveRecord::Errors`与现有对象一起使用吗？

我有一个`Bla`以简单方式创建的对象；它只接收一个**名称**和一个**csv 文件**。

创建此对象后，通过调用异步操作`sidekiq`并处理**csv 文件**以创建对象的其他属性`Bla`。

我不确定如何处理文件处理过程中可能引发的异常。我正在考虑将错误添加到`errors`可访问验证错误并由`ActiveRecord::Errors`. 这样，错误就可以显示在它的显示视图中。

我已经看到这个对象与对象创建一起使用，它用于在将对象提交到数据库之前在表单上显示错误。

我可以用它来显示创建后发生的错误吗？这些错误是否存储在数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:03:36.673

Rails 验证错误**不**存储在数据库中。它们旨在阻止数据库写入；也就是说，它们会阻止您将无效对象写入数据库。

验证错误仅存储在 ActiveRecord 对象的 'errors' 属性中，并且仅在变量“活动”时才保留，在 Rails 中通常仅在呈现控制器执行后的页面所需的时间行动。

我不太了解`sidekiq`。如果它在与 Rails 服务器不同的进程中运行，则验证错误仅在内存中，不会在两者之间共享。即使它*不是*一个单独的过程，我很确定当异步操作终止时，您的验证变量将不复存在。

所以我怀疑你提出的方法不可行。您可能必须将这些验证错误存储在更持久的内存中，以便 Rails 可以读取发现的错误，`sidekiq`反之亦然。

# python - OS X 10.8：修复严重损坏的 Python 安装、路径变量、模块

> ID：15795461
> 
> 赞同：3
> 
> 时间：2013-04-03T18:44:55.967
> 
> 标签：python, macos, appkit, python-2.5

很抱歉发布另一个此类问题，我已经广泛查看并找不到答案。

我是一个 Python 小块，对 Unix 的掌握很松散。

我特别需要在Python2.5中开发。我还需要访问 AppKit。我已经通过[通用安装程序](http://www.python.org/download/releases/2.5.4/)安装了 Python2.5以及我需要的库。当时，默认的操作系统安装 2.7 能够导入 AppKit。同时，Python2.5 不能。我发现[本教程](http://wolfpaulus.com/journal/mac/installing_python_osx)用于替换 Python 的本机安装，并认为如果我完全按照它来安装，但将 2.7 安装换成 2.5，一切都会变得很好。

跟着教程学习，我的原生 Python 确实是 2.5。然而，AppKit 仍然无法被导入（即“没有名为 AppKit 的模块”）。

*   Xcode 是 v.4.6.1 并且安装了 CL 工具
*   从 bash，`which python`返回`/usr/bin/python`
*   我的主要安装位置是：`/System/Library/Frameworks/Python.framework`带有指向`/Library/Frameworks/Python.framework`. 二进制文件同样是链接的；`usr/bin/python`（和 pythonw、python-config、pydoc）都符号链接到`/usr/local/bin`.
*   我在找到的每个位置都删除了 smtpd.py
*   我在两者中都留下了easy_install（和easy_install-2.5/6/7），`/usr/bin`因为`/usr/local/bin` 我从未使用过easy_install，也不知道如何处理它。

我完全清楚我把一切都搞砸了。谁能告诉我我需要做什么才能让事情恢复正常？

**更新：** 根据下面的评论，我确实最终重新安装了 Mountain Lion。再轻松不过了；我确实正确安装了 AppKit，并且一旦重新安装本机 Python，我就可以立即工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:07:28.917

看来你度过了艰难的一天。让我给你一些指导：

*   当互联网上的随机指令没有专门为您提供恢复到原始状态的指令时，遵循随机指令通常是一个坏主意。“继续，rm -rf 来自 /usr/bin 的东西”是一个危险信号。有经验的管理员总是把它移开，重命名，并且知道删除总是一个坏主意。
*   必须在安装的每个版本中运行多个 Python 版本和多个库是经过验证和测试的解决方案的标准问题。不要删除 python 安装，更不要删除默认安装。了解如何使用[virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito)。了解如何将 pip 安装到您的 virtualenvs 中。为您从事的每个项目保留一个 virtualenv。了解如何为您从事的每个项目定义并保持更新的 requirements.txt 文件。
*   一旦你理解了所有这些（如果你不明白，你只会重复同样的东西）。现在要解决您的问题，我会使用时间机器回到 24 小时前的某个点，然后继续以正确的方式做事。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:11:09.653

替换默认的 Python 是一个非常非常糟糕的主意（[从 Mac OSX 10.8 中删除预安装的 python](https://stackoverflow.com/questions/15456386/remove-preinstalled-python-from-mac-osx-10-8/15456431#)，[实际上，在 OSX Mountain Lion 上安装了太多的 Python](https://stackoverflow.com/questions/15368582/for-real-too-many-installations-of-python-on-osx-mountain-lion/15370548#)）

您应该尝试通过任何方式回滚您的机器（carlosdc 建议使用 timemachine - 如果您有快照，那将是一个不错的选择）。

您可以使用`virtualenv`创建自定义环境

您还可以使用 shell 脚本和用户的 .profile/.bash 来指定应该优先考虑哪个 Python 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-04T22:36:34.343

我也遇到了这个问题，只是再次安装python修复它，从[官方网站下载它](https://www.python.org/downloads/)

ps：我的操作系统是el capitan

# sql-server - 如何在 SQL Server 2012 中使用 SqlGeometry 定义三角形

> ID：15795467
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:45:05.073
> 
> 标签：sql-server, sql-server-2012, geospatial, sqlgeometry

在 SQL Server 2012 中，多边形由一个外环和零个或一些内环组成。所以每个简单的多边形（矩形、正方形和...）都必须有一个外环并且

**来自[MSDN](http://msdn.microsoft.com/en-us/library/bb895267.aspx)：**

> 要使戒指可以接受，需要满足以下标准。
> 
> *   LineString 实例必须被接受。
> *   LineString 实例必须至少有**四个**点。
> *   LineString 实例的起点和终点必须相同。

那么如果我想在 SQL Server 2012 中声明一个包含三个点的**三角形呢？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:18:31.157

来自微软：http: [//msdn.microsoft.com/en-us/library/bb895267.aspx](http://msdn.microsoft.com/en-us/library/bb895267.aspx)

```
DECLARE @g geometry;
SET @g = geometry::STPolyFromText('POLYGON((100 100, 200 200, 300 100, 100 100))', 0);
SELECT @g.ToString(); 
```

它有 3 个点，然后返回到其起点 (100,100)。可以看到面积返回 10000，这与底数为 200，高为 100 的三角形一致：

```
SELECT @g.STArea(); 
```

# php - Postgres 多个数组

> ID：15795468
> 
> 赞同：0
> 
> 时间：2013-04-03T18:45:16.793
> 
> 标签：php, arrays, postgresql

我希望这是一个简单的。但我有一张叫做产品的桌子。一列称为零件。基本上我需要在其中存储多个数组，每个数组都包含对零件 ID 和所需数量的引用。我真的不知道设置它的最佳方法。一种产品最多可能有 25 个零件，而另一种产品可能有 3 个。

任何建议都会有很大帮助！

干杯汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:53:04.280

似乎最好与另一个表[建立多对多关系并链接到该表。](https://stackoverflow.com/questions/9789736/how-to-implement-a-many-to-many-relationship-in-postgresql)如果您坚持将数组存储为字符串 -[使用 JSON](http://php.net/manual/en/ref.json.php)，您始终可以[将数组编码为 JSON](http://www.php.net/manual/en/function.json-encode.php)并将其存储，然后当您将其拉出时，您只需[从 JSON 解码](http://www.php.net/manual/en/function.json-decode.php)回数组。

# mysql - 将 varchar 转换为整数

> ID：15795469
> 
> 赞同：0
> 
> 时间：2013-04-03T18:45:26.213
> 
> 标签：mysql

我有一个带有价格字段的数据库。这个价格字段被定义为 varchar。值大约是 123,45。我需要在所有记录中将此 varchar 字段转换为整数。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:47:19.500

如果您在 mySQL 中进行转换，那么 CAST 就是您的朋友。

[http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

如果您在 mysql 之外执行此操作，则几乎所有语言都有转换函数，应该能够将输入作为字符串并尝试将其转换为所需的值 - 例如，c# 可能使用 int.Parse(string);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T16:52:24.093

这对我来说效果更好。它来自文档。

```
ALTER TABLE yrtable CHANGE columnname columnnameagain BIGINT NOT NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:49:54.690

您可以使用 cast 方法或更改表

```
ALTER TABLE yrtable ALTER COLUMN `price` DECIMAL (10,2); 
```

# java - 为什么我不能使用 {"a", "b"} 作为字符串数组方法参数的输入

> ID：15795471
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:45:36.610
> 
> 标签：java

我想知道，为什么我不能使用 {"a", "b"} 作为字符串数组方法参数的输入？

```
public static void fun(String[] s) {
}

public static void main(String[] args) {
    String[] s = {"a", "b"};

    // OK
    fun(s);

    // This line is not accepted by compiler
    fun({"a", "b"});
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:47:39.903

从[JLS 的第 10.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.3)：

> 数组由数组创建表达式 ( [§15.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10) ) 或数组初始值设定项 ( [§10.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6) ) 创建。

数组初始值设定项语法仅在变量声明的一部分*直接有效。*在其他任何地方 - 包括以后的分配 - 您必须使用数组创建表达式：

```
fun(new String[] { "a", "b" }); 
```

我怀疑这使得语言在如何指定方面更简单，基本上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:47:28.470

你应该使用：

```
fun(new String[]{"a","b"}); 
```

在java中，甚至一个字符串数组也被视为对象。您期望 Strings 数组的对象作为`fun`参数。这个对象是由`String[]{"a","b"}`which 提供的，它是一个`anonymous String array`完全构造和初始化的对象。

# mysql - 这两个 MySQL 查询的输出有什么区别

> ID：15795472
> 
> 赞同：0
> 
> 时间：2013-04-03T18:45:39.160
> 
> 标签：mysql

表 EMPLOYEE 中有一个 Salary 列。以下两个语句给出了不同的输出。可能的原因是什么？

**查询 1**

```
SELECT COUNT(*) FROM EMPLOYEE; 
```

**查询 2**

```
SELECT COUNT(SALARY) FROM EMPLOYEE; 
```

这个问题在考试中提出，但即使我将 1 名员工的工资留空，我也没有任何区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:49:31.903

`SELECT COUNT(SALARY) FROM EMPLOYEE`将排除工资为 NULL 的员工。

# php - 定位数组中的特定元素

> ID：15795477
> 
> 赞同：1
> 
> 时间：2013-04-03T18:45:54.687
> 
> 标签：php, css, arrays, smarty

我正在尝试将样式应用于我的 php 数组中的每个单词。我不知道如何定位每个单词。

我的网站列出了大量人口统计数据作为关于用户的标签。例子：

```
Hometown: LA
Date of Birth: 1985
Majors: Political Science, Math

Interests: Ice hockey, soccer, art, music,
running, bodybuilding, writing, cooking,
fashion, videos

Skills: Reading, writing, driving, boxing 
```

前 3 个类别很容易在 HTML/CSS 中设置样式，因为只有一个元素。例如，我们不允许用户有两个家乡。一个用户不能有两个生日。所以我可以对这些标签做任何事情。我可以把它们变大，我可以把它们变成一个盒子，我可以在每个之间添加一条 HR 线。

但是当我选择风格专业、兴趣和技能时，我遇到了一个巨大的问题。

比方说，我想把上面例子的兴趣变成这个：

```
Hockey
Soccer
Art 
Music
etc.. 
```

并进一步用蓝色 bg 为数组中的每个标签设置样式，那么我该怎么做呢？

这是兴趣的示例 php 代码：

```
$interests = str_replace("\"","",explode(',',$usrNfo['interests']));
$interests = implode(", ",$interests);

//interests -> a
$interests2 = str_replace("\"","",explode(',',$usrNfo['interests']));

foreach($interests2 as $a => &$b)
{
    $bs = str_replace(" ","+",$b);
    $b = "<a class=\"various fancybox.ajax\"  href='".$config['url']['site']."rpc/tag.php?type=interests&school=$usrNfo[school]&int=$bs'>$b</a>";
}

$interests = implode(", ",$interests2);

$usrNfo['interests_text'] = $interests; 
```

然后它在 TPL 文件中输出为

```
<div class="rig">
    <div class="sin">
        <b>Interests:</b>  {$user.interests_text} 
    </div>
    <div class="sin">
        <b>Skills:</b> {$user.skills_text}
    </div>
</div> 
```

如何定位数组中的每个标签？

# ruby-on-rails - Rails 局部渲染具有 10 倍的峰值渲染时间

> ID：15795478
> 
> 赞同：5
> 
> 时间：2013-04-03T18:45:55.257
> 
> 标签：ruby-on-rails, ruby, partial-views, mvc-mini-profiler

看着[ruby​​ mini-profiler](https://github.com/SamSaffron/MiniProfiler/tree/master/Ruby)输出，我注意到这种模式是 5-6 个局部渲染，每个渲染大约 6-7 毫秒，然后一个渲染关闭 60-70 毫秒。我想知道是什么原因造成的，它看起来像是某种潮红。所有模型数据都是在视图渲染开始时加载的，所以我知道不是延迟加载造成的。

```
 Rendering: application/_row     7.1    +1107.0 
 Rendering: application/_row     68.7   +1115.0 
 Rendering: application/_row     6.7    +1184.0 
 ...     
 Rendering: application/_row     6.5    +1234.0 
 Rendering: application/_row     65.2   +1241.0 
 Rendering: application/_row     6.6    +1306.0 
 ...     
 Rendering: application/_row     6.6    +1321.0 
 Rendering: application/_row     66.6   +1328.0 
 Rendering: application/_row     6.6    +1395.0 
 ...     
 Rendering: application/_row     6.6    +1444.0 
 Rendering: application/_row     65.4   +1451.0 
```

Ruby 1.9.3p194，Rails 3.2.11

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:14:07.583

这是最确定的 MRI 的垃圾收集器刷内存。我用一个简单的 Rails 应用程序和部分测试做了一些测试：

```
100.times{Test.new} 
```

我可以像你一样看到尖峰：

```
Rendered tests/_row.html.erb (3.9ms)
Rendered tests/_row.html.erb (45.3ms)
Rendered tests/_row.html.erb (5.2ms)
...
Rendered tests/_row.html.erb (42.8ms) 
```

使用 mini-profiler，很容易检查 GC 被调用了多少次，更重要的是，它运行了多长时间。对我来说，这些数字完全匹配。如果有 10 个尖峰，那么还有 10 (+/-1) 个 GC 调用，而且 GC 的运行时间正是正常渲染和耗时更长的渲染之间的差异。

要使用 mini-profiler 的 GC 计时器，请附加`?pp=profile-gc-time`到您的 URL。还有一篇关于使用 mini-profiler[调整 Ruby的好文章。](http://meta.discourse.org/t/tuning-ruby-and-rails-for-discourse/4126)

# opengl - 从顶点/片段着色器中修改 glBlendColor

> ID：15795479
> 
> 赞同：1
> 
> 时间：2013-04-03T18:45:56.217
> 
> 标签：opengl, fragment-shader, blending, freetype, color-blending

在使用子像素渲染（LCD，字形位图格式为 RGB（不是 alpha））时，我正在使用混合函数对从 freetype 库获得的字形进行着色：

我将 RGB 格式的纹理上传到 GPU 并使用以下混合：

```
glBlendFunc( GL_CONSTANT_COLOR_EXT,  GL_ONE_MINUS_SRC_COLOR );
glBlendColor( r, g, b, 1 ); 
```

r,g,b 是所需的字形颜色。只要字形都是相同的颜色（我使用的是单个顶点缓冲区），这效果很好。我现在想为每个字形设置不同的颜色，然后，我需要在着色器中指定不同的混合颜色，但我认为这是不可能的。有谁知道如何做到这一点（如果可行的话）？

相关项目[可在此处获得](http://code.google.com/p/freetype-gl/)

我想在某些时候我找到了“正确”的着色器，但实际上它是错误的（参见[问题 48](http://code.google.com/p/freetype-gl/issues/detail?id=48)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:22:21.550

你不能。而且真的没有理由这样做。只需使用逐顶点颜色，然后将从纹理中获得的值乘以逐顶点颜色。

但是，如果你*真的*想这样做，你可以[从片段着色器中编写第二种颜色](http://www.opengl.org/wiki/Fragment_Shader#Dual-source_blending)，如果你有 GL 3.3：

```
layout(location = 0, index = 0) out vec4 textureColor;
layout(location = 0, index = 1) out vec4 glyphColor; 
```

然后[，您可以在混合方程式中使用它](http://www.opengl.org/wiki/Blending#Dual_Source_Blending)：

```
glBlendFunc(GL_SRC1_COLOR, GL_ONE_MINUS_SRC_COLOR); 
```

但实际上，这对你来说毫无意义。只需使用片段着色器将它们相乘。

# mysql - 如何使用 WHERE 子句更新 MySql 中的 select 语句中的字段？

> ID：15795480
> 
> 赞同：0
> 
> 时间：2013-04-03T18:45:57.087
> 
> 标签：mysql, sql, database, sql-update

我正在尝试从 select 语句中更新字段。这是我当前的查询

```
UPDATE phone_cals
SET call_code_id = id, result_code_id = 0, call_subject = title WHERE status = 1
select call_code_id AS id, call_code_title AS title FROM call_codes 
```

我正在尝试设置

```
phone_calls.call_code_id = call_codes.call_code_id 
phone_calls.result_code_id = 0
phone_calls.call_subject = call_codes.call_code_title 

WHERE phone_calls.status = 1 
```

是的，我有一个语法错误，但我不知道如何修复它

Summery 我想选择一个随机的 call_codes.call_code_id 并将其分配给 phone_calls.call_code_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:53:33.360

如果我正确理解你的问题，我认为你需要这样的东西：

```
UPDATE
  phone_calls,
  (select call_code_id, call_code_title FROM call_codes ORDER BY rand() LIMIT 1) c2
SET
  phone_calls.call_code_id = c2.call_code_id,
  phone_calls.result_code_id = 0,
  phone_calls.call_subject = c2.call_code_title
WHERE
  phone_calls.call_subject = 1 
```

这会将 all`call_code_id`和 all更新`call_subject`为从`call_codes`表中选择的随机值，其中 call_subject=1。

**编辑**

如果您需要将每一行更新为不同的随机值，我认为您可以使用它：

```
UPDATE
  phone_calls
SET
  call_code_id = (select call_code_id FROM call_codes ORDER BY rand() LIMIT 1),
  result_code_id = 0
WHERE
  phone_calls.call_subject = 1;

UPDATE
  phone_calls INNER JOIN call_codes
  ON phone_calls.call_code_id = call_codes.call_code_id
SET
  phone_calls.call_subject = call_codes.call_code_title
WHERE
  phone_calls.call_subject = 1; 
```

（不知道是否可以仅使用一个查询来完成）。它可能很慢，但它应该可以工作。

# ios - 在 Mac 上通过 USB 访问 iOS 设备

> ID：15795483
> 
> 赞同：6
> 
> 时间：2013-04-03T18:46:07.743
> 
> 标签：ios, macos, file, usb

我有一个需要将文件传输到数据库的移动应用程序。但是，其中一项规范是，如果用户没有设置无线网络，它应该能够插入 mac 并将文件传输到数据库。然而，我遇到的问题是如何将上述文件从 iPad 上通过 USB 传输到计算机上。

上周我一直在研究各种解决方案，主要是 IOKit 和 applescript，但是当使用 USB 电缆插入 iOS 设备时，这两者似乎都无法找到它。虽然我知道我可以越狱设备，然后它应该很简单，但这不是一个选择。

我很难找到关于这个主题的信息，这让我担心它是没有希望的。

但是，我知道必须有一种方法可以在不越狱的情况下做到这一点，因为存在[这个漂亮的应用程序。](http://www.digidna.net/diskaid#appsIntLnk)我已经能够通过这个应用程序访问我需要的文件，所以我确信这是可能的。然而，这并不是一个理想的解决方案，因为我真的没有选择为我的应用程序使用第三方软件。我怀疑该应用程序使用 applescript 来执行此操作，因为它在安装目录中有一个名为 appleScriptServer 的可执行文件，看起来它可能是处理此问题的工具。

我需要了解他们如何访问文件并为我的（更简单的）需求实施类似的方案。

有谁知道一些方法可以做到这一点？如果可以在 IOKit 中或通过 applescript，我想要一些资源来帮助我了解如何在插入 Mac 上的 USB 端口时正确定位和访问 iPad。我最接近的是使用`user$ system_profiler SPUSBDataType`这个[线程](https://stackoverflow.com/a/14018748/2241785)让我知道：

```
 iPad:

          Product ID: 0x12a4
          Vendor ID: 0x05ac  (Apple Inc.)
          Version: 3.10
          Serial Number: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
          Speed: Up to 480 Mb/sec
          Manufacturer: Apple Inc.
          Location ID: 0x1d110000 / 7
          Current Available (mA): 500
          Current Required (mA): 500
          Extra Operating Current (mA): 1600 
```

但我不知道除了验证它是否通过 USB 插入之外，我可以使用它给我的任何信息。

非常感谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T22:00:28.190

您可以使用[MobileDevice 框架](http://theiphonewiki.com/wiki/MobileDevice_Library)，如[this answer](https://stackoverflow.com/a/14114743/3769927) to an question similar中所述。

# javascript - jQuery加载器调用函数

> ID：15795485
> 
> 赞同：0
> 
> 时间：2013-04-03T18:46:19.897
> 
> 标签：javascript, jquery

这是一个来自 nettuts 的简单加载脚本，我尝试对其进行修改以满足我的需要。但是我无法在函数 shownewcontent 运行之前发生调整加载元素大小的函数“res”。现在它在可见后会调整大小，这看起来很糟糕。但是，如果我更早地调用该函数，则不会发生任何事情，因为尚未加载内容。

```
$(document).ready(function() { 
    var hash = window.location.hash.substr(1);  
    var href = $('#menu a').each(function(){  
        var href = $(this).attr('href');  
        if(hash==href.substr(0,href.length-4)){  
            var toLoad = hash+'.php #content';  
            $('#content').load(toLoad);
        }
    });  
    $('#menu a').click(function(){  
        var toLoad = $(this).attr('href')+' #content';  
        $('#content').hide('slow',loadContent);  
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
        function loadContent() {  
            $('#content').load(toLoad,'',showNewContent());
        }  
        function showNewContent() {
            $('#content').show("0", res)
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:51:44.543

您已将*回调*`res()`定义为，这意味着它将在函数完成**后被调用。***`show()`**`show()`***

 ***我会改变你的回调结构，让它包含你想做的所有工作：

```
$('#menu a').click(function(e) {  
    var toLoad = $(this).attr('href') + ' #content';  
    $('#content').hide('slow', function() {
        var self = this;
        $(self).load(toLoad, '', function() {
            res();
            $(self).show("0");
        });
    });  
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4);
    e.preventDefault();
} 
```

然后，您不需要单击处理程序中的函数定义。

仅供参考，`return false;`但最好`e.preventDefault();`在点击处理程序的末尾使用而不是 。您必须将其定义`e`为单击回调函数的参数。请参阅[此](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)进行`return false; vs. e.preventDefault()`辩论。

此外，如果调整大小需要相当长的时间，您可能希望`res()`函数以相同的方式进行回调`show()`。然后，您只能在内容加载和调整大小后显示内容。***

# sql - 如果任何一个值为负，如何修改我的代码以将 sum/avg 设置为负

> ID：15795489
> 
> 赞同：0
> 
> 时间：2013-04-03T18:46:26.720
> 
> 标签：sql, sql-server, tsql

下面是我现有的未检查错误值的 SQL 代码（sql server）。如果月份和年份值匹配，它只计算总和列和平均列。

```
SELECT ur.Domain, SUM(ur.DataUsageInBytes) as SumDataUsageInBytes, 
       AVG(ur.DiskUsageInBytes) as AvgDiskUsageInBytes
FROM UsageResults ur
WHERE (ur.Year = @year) AND (ur.Month = @month) 
GROUP BY [Domain] 
```

我想添加逻辑，如果任何 ur.DataUsageInBytes 值（对于给定的月份/年份）为负，我想将总和设置为 -99，否则我将只计算正常总和。平均值也是如此。

如果遇到错误并且无法确定它们的值，它正在读取的表条目将具有负值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:51:00.247

```
SELECT  ur.Domain
,       case 
        when min(ur.DataUsageInBytes) < 0 then -99
        else sum(ur.DataUsageInBytes) 
        end as SumDataUsageInBytes
,       case 
        when min(ur.DataUsageInBytes) < 0 then -99
        else avg(ur.DataUsageInBytes) 
        end as AvgDiskUsageInBytes
FROM    UsageResults ur
WHERE   ur.Year = @year AND ur.Month = @month
GROUP BY 
        ur.Domain 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:50:44.880

您可以将每个值变成正数并比较总和

```
SELECT ur.Domain
, CASE WHEN SUM(ur.DataUsageInBytes) = SUM(ABS(ur.DataUsageInBytes)) THEN SUM(ur.DataUsageInBytes) ELSE -99 END as SumDataUsageInBytes
, CASE WHEN min(ur.DiskUsageInByters) < 0 THEN -99 ELSE AVG(ur.DiskUsageInBytes) END AS AvgDiskUsageInBytes
FROM UsageResults ur
WHERE (ur.Year = @year) AND (ur.Month = @month) 
GROUP BY [Domain] 
```

# php - php用单引号替换反引号的最佳方法？

> ID：15795490
> 
> 赞同：1
> 
> 时间：2013-04-03T18:46:31.453
> 
> 标签：php, sql

我已经使用了一段时间了，没有任何问题...

```
$string = str_replace(array("`",chr(96)),array("'","'"), $string); 
```

但是，我只是注意到由于某种原因它并不总是有效......我是否错过了另一个变体？有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:51:35.290

您的字符串可能包含 unicode 花式引号 ( [http://en.wikipedia.org/wiki/Quotation_mark_glyphs](http://en.wikipedia.org/wiki/Quotation_mark_glyphs) )，您将它们误解为反引号。这可以帮助： http: [//alanwhipple.com/2011/06/04/php-clean-encoding-issues-smart-curly-quotes-em-dashes/](http://alanwhipple.com/2011/06/04/php-clean-encoding-issues-smart-curly-quotes-em-dashes/)

在原始站点更改或消失时复制的代码：

```
<?php
/**
 * cleanEncoding deals with pesky characters like curly smart quotes and em dashes (and some other encoding related problems)
 *
 * @param string $text Text string to cleanup / convert
 * @param string $type 'standard' for standard characters, 'reference' for decimal numerical character reference
 *
 * @return $text Cleaned up UTF-8 string
 */
function cleanEncoding( $text, $type='standard' ){
    // determine the encoding before we touch it
    $encoding = mb_detect_encoding($text, 'UTF-8, ISO-8859-1');
    // The characters to output
    if ( $type=='standard' ){
        $outp_chr = array('...',          "'",            "'",            '"',            '"',            '•',            '-',            '-'); // run of the mill standard characters
    } elseif ( $type=='reference' ) {
        $outp_chr = array('&#8230;',      '&#8216;',      '&#8217;',      '&#8220;',      '&#8221;',      '&#8226;',      '&#8211;',      '&#8212;'); // decimal numerical character references
    }
    // The characters to replace (purposely indented for comparison)
        $utf8_chr = array("\xe2\x80\xa6", "\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", '\xe2\x80\xa2', "\xe2\x80\x93", "\xe2\x80\x94"); // UTF-8 hex characters
        $winc_chr = array(chr(133),       chr(145),       chr(146),       chr(147),       chr(148),       chr(149),       chr(150),       chr(151)); // ASCII characters (found in Windows-1252)
    // First, replace UTF-8 characters.
    $text = str_replace( $utf8_chr, $outp_chr, $text);
    // Next, replace Windows-1252 characters.
    $text = str_replace( $winc_chr, $outp_chr, $text);
    // even if the string seems to be UTF-8, we can't trust it, so convert it to UTF-8 anyway
    $text = mb_convert_encoding($text, 'UTF-8', $encoding);
    return $text;
}

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T18:50:12.713

请参阅 PHP 文档以了解[str_replace](http://php.net/manual/en/function.str-replace.php)。

您需要传递替换的主题才能使其正常工作。

```
$string = str_replace(array("`",chr(96)),array("'","'"), $string); 
```

# objective-c - 哈希表中的 ARC 弱引用

> ID：15795491
> 
> 赞同：3
> 
> 时间：2013-04-03T18:46:32.760
> 
> 标签：objective-c, memory-management, automatic-ref-counting, hashtable

我使用 NSHashTable 来存储对对象的弱引用。当哈希表中的对象被释放并且引用在哈希表中归零时，指向 nil 的指针仍然驻留在哈希表中，对吗？那么随着时间的推移，如果被释放的对象没有直接从哈希表中删除，哈希表会继续增长吗？目前，没有简单的方法向控制哈希表的对象发送通知，通知其中一个哈希表元素已被删除（这是一个反馈调用意味着对象之间的通信非常间接的游戏，最好保持这种方式） . 我应该定期迭代哈希表以删除零引用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-20T09:15:42.583

这个问题是几个月前发布的，但为了记录，NSHashTable**确实**删除了已发布的弱引用。因此，要回答实际问题，不，您不需要定期迭代哈希表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:56:57.803

我会创建一个管理器类，负责添加和删除您所说的对象。因此，我会通过以下几种方式之一通知哈希表：

*   直接通过方法调用（当管理器引用哈希表时）
*   间接使哈希表成为经理的委托对象
*   间接注册哈希表以观察管理器中的任何添加/删除操作
*   间接通过让管理器向通知中心发送通知，该通知由哈希表监听

这完全取决于您如何将这些对象绑定在一起以及哪些模型适合最实际的设计。

# java - 在图像视图中编辑文本

> ID：15795492
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:46:36.260
> 
> 标签：java, android, android-layout

我有一个我在 Photoshop 中创建的 edittext 图像。然后我把它带入我的应用程序并在其中放入一个edittext（我的imageview是我的edittext的框架）。实际上，我将这两个放在相对布局中，我的问题是，当我在 twho 屏幕尺寸中测试我的应用程序时，这两个（imagebox 和 edittext）不会以相同的值调整大小，并且我的 edittext 调整大小总是比我的 imageview 大得多。我希望这两个在任何情况下都在一起。

![在此处输入图像描述](https://i.stack.imgur.com/j4Zuz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:33:10.650

我认为最好的方法是将图像转换为[**9-patch**](http://developer.android.com/tools/help/draw9patch.html)，填充信息与包含实际输入区域的图像部分相匹配。

然后，您可以将 9-patch 设置为您的`TextView`或`EditText`. 您不需要任何容器来保存图像。您甚至可以使用样式进行重复使用。

安卓系统会处理背景的大小调整，所以你不需要做任何特别的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:47:58.893

如果您打算使用图像，则希望使用 a`FrameLayout`而不是 a 。`RelativeLayout`

# c# - 将第三方应用程序数据库（通过 REST API）与 SQL 数据库同步的 Web 应用程序

> ID：15795495
> 
> 赞同：0
> 
> 时间：2013-04-03T18:46:38.263
> 
> 标签：c#, sql, web-applications, synchronization, database-replication

常见的复制问题，看似略有不同的场景。

简而言之，我正在尝试开发一个 C# Web 应用程序，它将第三方 CRM 应用程序（通过 oAuth 及其 REST API）与用户远程数据服务器（mySQL/SQL Server）链接并保持同步。

用户登录，设置到第三方 CRM 的 oAuth 连接，将他们的 SQL 登录凭据输入到本地服务器，然后单击“开始”。然后，我的应用程序在他们的服务器上创建一个新数据库，通过 REST API 将数据从 CRM 初始转储到所述服务器，然后保持双向同步。

我知道这是一项不平凡的工作，但是我只是想知道是否有任何工具/框架（例如 SymmetricDS 可能）我应该查看，这样我就不会重新发明轮子并加快开发速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:50:37.317

[SQL Server 复制](http://msdn.microsoft.com/en-us/library/ms151198.aspx)旨在用于此目的。我不知道任何现成的 MySQL 复制工具。

# javascript - 如何从“SetInterval”切换到“请求动画帧”

> ID：15795502
> 
> 赞同：2
> 
> 时间：2013-04-03T18:46:46.260
> 
> 标签：javascript, html, animation, canvas

我创建了一个简单的画布动画，听说使用“请求动画帧”比使用“设置间隔”更好，但我不知道该怎么做？

这是它目前的样子：

```
http://jsfiddle.net/rC7zJ/
```

```
var width = 48;
var height = 87;
var speed = 100; //ms
var frames = 1; // Total frames - 1, as frame start from 0 not 
var currentFrame = 0;

canvas = document.getElementById("CanvasAnimate");
ctx = canvas.getContext("2d");
imageTadPole = new Image()
imageTadPole.src = 'https://dl.dropbox.com/u/19418366/tadpole.png';

function draw(){
    ctx.clearRect(0, 0, width, height);
    ctx.drawImage(imageTadPole, width * currentFrame, 0, width, height, 0, 0, width, height);

    if (currentFrame == frames) {
        currentFrame = 0;
    } else {
        currentFrame++;
    }
}

setInterval(draw, speed); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:06:31.870

总是从 Paul Irish 的 requestAnimationFrame 跨浏览器 shim 开始

```
 window.requestAnimFrame = (function(callback) {
      return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
      function(callback) {
        window.setTimeout(callback, 1000 / 60);
      };
    })(); 
```

然后只需编写一个动画函数：

1.  更新驱动动画的变量（位置、速度、颜色变化等）
2.  使用画布的上下文绘制当前帧
3.  通过重新调用 requestAnimFrame 使动画在下一帧保持活动状态

这是示例骨架代码：

```
 function animate() {

      // update animation variables
      X+=20;
      Velocity +=10;

      // clear the canvas and draw the current frame
      // based on the variables you just updated
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.rect(x,y,75,50);

      // request new frame to keep the animation going
      requestAnimFrame( animate );
    } 
```

以下是如何降低动画的速度（如 FPS——但不是）：

```
// set a countdown "throttle" that will slow animate() down by 4X
var notEveryTime=3;

function animate() {

  // if notEveryTime hasn't counted down to 0
  // then just don't animate yet
  if(--notEveryTime>0){ return; };

  // update animation variables
  X+=20;
  Velocity +=10;

  // clear the canvas and draw the current frame
  // based on the variables you just updated
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.rect(x,y,75,50);

  // request new frame to keep the animation going
  requestAnimFrame( animate );

  // reset notEveryTime
  notEveryTime=3;

} 
```

并阅读 Anreas 的好建议：**http** [: //paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:47:39.443

mark 说了什么，但如果你想控制 FPS，请将 requestAnimationFrame 调用包装在 setTimeOur 函数中，如下所示：

```
var fps = 15;
function draw() {
    setTimeout(function() {
        requestAnimationFrame(draw);
        // Drawing code goes here
    }, 1000 / fps);
} 
```

使用 requestAnimationFrame 是个好主意，即使您正在修复帧速率，因为它

1.  当页面处于非活动状态时将提供 CPU 节流
2.  为您提供 requestAnimationFrame 提供的幕后优化。

可以在[此处](http://creativejs.com/resources/requestanimationframe/)找到有关请求动画帧的好页面。

# java - 如何将带有空格和括号的文本传递给java

> ID：15795503
> 
> 赞同：1
> 
> 时间：2013-04-03T18:46:46.363
> 
> 标签：java, javascript, jsp, jstl, apache-stringutils

我将一个值作为请求属性传递给 jsp 页面。

```
request.setAttribute("description", StringEscapeUtils.escapeHtml("Hello 1F World (Hello World) Hello World")); 
```

在 jsp 页面中，我在 pageContext 中设置

```
String text = (String) (String) request.getAttribute("description");
pageContext.setAttribute("description", text); 
```

我必须将此文本作为请求参数发送到服务器。当我查看萤火虫时，我看到了一个错误。我正在尝试使用`"value" = "${text}"`哪个会引发错误。我究竟做错了什么？

```
SyntaxError: unterminated string literal
[Break On This Error]   

{ "name": "description", "value": " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:56:46.053

您应该使用`StringEscapeUtils.escapeJava`没有任何 HTML 的字符串内容

```
StringEscapeUtils.escapeJava("Hello 1F World (Hello World) Hello World")); 
```

# jquery - 可折叠/滑动“托盘”（Div）

> ID：15795504
> 
> 赞同：0
> 
> 时间：2013-04-03T18:46:47.573
> 
> 标签：jquery, html, slide, collapse, tray

[从右向左滑动？](https://stackoverflow.com/questions/596608/slide-right-to-left)

[http://www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

我一直在上述之间跳跃，试图让我的“托盘”工作无济于事。部分问题是我不希望其中一个 div 完全消失。我想要一个“托盘”，一个长矩形，单击它时，会滑出包含名称的 div。现在我将它设置为反向，但我不知道如何让扩展为默认隐藏的 div （*我也不明白为什么它们是不同的颜色，但具有相同的 CSS）。

[http://jsfiddle.net/r6yWP/](http://jsfiddle.net/r6yWP/)

HTML：

```
<div class ="collapsedTray">
<div class="expandTray">
    Joey Joe Joe Jr.</br>
    Tommy Thompson Thomas III</br>
    Stephen Stephenson </br>
    Cool Mo Dee Tomahawk Fire Marshall Bill</br>
</div> 
```

CSS：

```
 .collapsedTray {
    width:10px;
    height: 500px;
    background:grey;
   opacity:0.5;
    position: absolute;
    left:0;
}

.expandTray {
    white-space: nowrap;
    height: 500px;
    background:grey;
   opacity:0.5;
    position: absolute;
    left:0;
    padding:8px;
} 
```

Ĵ：

```
 $('.collapsedTray').click(function(){
   var $lefty = $('.expandTray');
    $lefty.animate({
      left: parseInt($lefty.css('left'),10) == 0 ?
        -$lefty.outerWidth() :
        0
});
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:56:39.210

在 CSS 中给左值一个负值，以便它默认隐藏。

```
.expandTray {
   left:-999px;
} 
```

见[小提琴](http://jsfiddle.net/anpsmn/r6yWP/1/)

不同的颜色是因为您在折叠托盘内有 expandTray，两者的不透明度均为 0.5，因此内部 div 具有更高的不透明度。

# css - 负上边距不适用于子图像

> ID：15795505
> 
> 赞同：0
> 
> 时间：2013-04-03T18:46:55.993
> 
> 标签：css, parent-child, margin

这就是我想要的chicklet 盒子的样子：！[] [1](http://i.stack.imgur.com/21t9O.jpg) 出于某种原因，我不能使用负边距让twitter 图像进入盒子的中心。我的亲子关系有问题吗？

我的 css 在外部工作表中，但这里是：

```
<style type="text/css">

#chicklet_container {
    margin:20px auto 0px auto;
    width:540px;
    height:215px;
}

#chicklet_box {
    margin:0px 0px 10px 0px;
    width:190px;
    height:160px;
    border-style:solid;
    border-width:33px 5px 5px 5px;
    border-color:#45BA88;
    position:relative;
}

#chicklet_box2 {
    margin:-30px 0px 10px 0px;
    width:190px;
    height:160px;
    border-style:solid;
    border-width:0px 0px 30px 0px;
    border-color:#3f4040;
}

#chicklet_text {
    text-align:center;
    margin:-196px 0px 0px 0px;
    color:#FFF;
    width:190px;
    font-family:"Verdana, Geneva, sans-serif";
    font-size:27px;
    line-height:20px;
}

#chicklet_text2 {
    text-align:center;
    margin:139px 0px 0px 0px;
    color:#FFF;
    width:190px;
    font-family:"Proxima, Nova, Ultralight";
    font-size:26px;
    line-height:20px;
}

#chicklet_box img {
    margin:-250px 0px auto 5px;
}
</style> 
```

这是html：

```
<div id="chicklet_container">
    <div id="chicklet_box">
        <div id="chicklet_box2">
        </div>
            <div id="chicklet_text">Follow Me</div>
            <div id="chicklet_text2">@soandsoandso</div>
            <img src="images/twitter.jpg" alt="">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:14:43.143

为什么要使用这么多边距来对齐 twitter 鸟图像或文本。使用尽可能低的边距。取而代之的是，尝试使用该图像`position:absolute;`和 top ,left 属性。会更干净。但是要记住的一件事是，如果您对元素使用绝对位置，请检查其外部或父元素是否已定位，如果不是，则情况可能会变得更糟，并且该子元素可能会去其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T15:18:30.867

负边距不是 hack - W3C 甚至说：“允许边距属性为负值......”

阅读更多：[http ://www.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://www.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

在这种情况下，我确实同意，尽管它们可能被过分强调了。

为什么在 Chicklet Box 1 内有 Chicklet Box 2？我假设每个框都代表一个图标......我错了吗？

# c++ - C ++从函数返回字符串数组

> ID：15795509
> 
> 赞同：1
> 
> 时间：2013-04-03T18:46:58.010
> 
> 标签：c++, csv, explode

我正在开发一个简单的 CSV 解析器。

从我的 csv 文件中，我得到第一行作为字符串，假设：

```
"117;'Tom';'Sawyer';"; 
```

我想要实现的是一个将我的字符串分解成碎片的函数，类似于 PHP 的爆炸：

```
$string = "117;'Tom';'Sawyer';";
$row = explode(";", $string);
echo $row[0]; 
```

我需要一个函数，它会在行变量中返回一个字符串数组。

我是 C++ 新手，所以我不确定要寻找或使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:57:29.990

这是一个相当普遍的问题，如果您搜索它，您可以相对轻松地找到它。这可能会有所帮助：

[https://stackoverflow.com/a/236803/1974937](https://stackoverflow.com/a/236803/1974937)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:52:57.390

似乎您正在寻找一个使用某些指定分隔符拆分字符串并将它们放入顺序容器中的函数。

这是一个执行此操作的函数：

```
#include <iostream>
#include <string>
#include <vector>
#include <iterator>

/// Splits the string using provided delimiters and puts the pieces into a container.
/// The container must provide push_back and clear methods.
/// @param a The contaner to put the resulting substrings into
/// @param str The string to operate on
/// @param delims Characters that are to be treated as delimiters
/// @param compress_delims If set to true, will treat mutiple sequential delimiters as a single one
template<class StringType, class ContainerType>
void split_string(ContainerType& a, const StringType& str, const StringType& delims, bool compress_delims = true)
{
        typename StringType::size_type search_from = 0; // Place to start looking for delimiters
        typename StringType::size_type next_delim;      // Location of the next delimiter

        a.clear(); // Wipe out previous contents of the output container (it must be empty if the input string is empty)

        // Find the first delim after search_from,
        // add the substring between search_from and delimiter location to container,
        // update search_from to delimiter location + 1 so that next time we search,
        // we encounter the next delimiter. Repeat until we find the last delimiter.
        while((next_delim = str.find_first_of(delims, search_from)) != StringType::npos) {
                // If we encounter multiple delimiters in a row and compress_delims is true
                // treat it as a single delim.
                if(!(compress_delims && next_delim - search_from <= 1)){
                        StringType token = str.substr(search_from, next_delim - search_from);
                        a.push_back(token);
                }
                search_from = next_delim + 1;
        }

        // If we found the last delimiter and there are still some chars after it,
        // just add them to the container.
        if(search_from < str.length())
                a.push_back(str.substr(search_from));
}

int main()
{
        std::vector<std::string> container;
        std::string str = " hello so long    good  bye hurray    ";
        split_string(container, str, std::string(" "));
        std::copy(container.begin(), container.end(), std::ostream_iterator<std::string>(std::cout, ","));
        std::cout <<  " (" << container.size() << ")" << std::endl;
        return 0;
} 
```

但是，如果可以在您的项目中使用 Boost，我建议您这样做。使用[boost.string_algo 库](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo.html)，其中包含用于特定目的的[拆分函数（](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/algorithm/split_idp83847184.html)[示例用法](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/usage.html#idp163440592)）。

# mysql - 我们可以在 Mongodb 中为 Mysql 中的 Timestamp 使用什么数据类型？

> ID：15795512
> 
> 赞同：1
> 
> 时间：2013-04-03T18:47:06.293
> 
> 标签：mysql, mongodb-php

对于我的一个项目，我必须将 mysql 数据库转换为 Mongodb。但我对在 Mysql 中可以使用数据类型而不是 Timestamp 数据类型感到困惑。请问我可以了解，我可以使用的数据类型是什么对于 mongodb。（我正在使用 php 创建 Mongodb）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:30:59.183

[`Date`](http://docs.mongodb.org/manual/core/document/#document-bson-type-date)将是最合适的

> BSON Date 是一个 64 位整数，表示自 Unix 纪元（1970 年 1 月 1 日）以来的毫秒数。官方 BSON 规范将 BSON 日期类型称为 UTC 日期时间。

您可以使用 MySQL 从 Epoch 获取秒数

```
SELECT UNIX_TIMESTAMP(yourTimeStampColumn) AS secondsFromEopch FROM yourTable; 
```

您不需要在这里关心时区，因为 MySQL TIMESTAMP 始终在内部存储为 UTC。然后你可以在 PHP 中使用这个值来创建一个[`MongoDate`](http://www.php.net/manual/en/class.mongodate.php)对象，你将使用它来创建一个 BSON 文档。

```
$mongoDate = new MongoDate($secondsFromEpoch); 
```

# coffeescript - coffeescript 和 sugarjs ~ 数字 (50).pad(5) 的问题

> ID：15795517
> 
> 赞同：0
> 
> 时间：2013-04-03T18:47:15.557
> 
> 标签：coffeescript, sugar.js

我正在使用sugarjs。使用 numbers api 时，coffeescript 并不顺利。我在想它是括号..有什么更好的方法来做到这一点。

(50).pad(5) 转换为 50..pad(5)

如何保持括号完好无损。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:55:40.923

为什么要保持括号完整？他们不需要。这种方式工作得很好

# java - 何时使用 try finally 而不是 try catch finally

> ID：15795521
> 
> 赞同：2
> 
> 时间：2013-04-03T18:47:21.857
> 
> 标签：java, exception, try-catch

使用 Try Catch finally 块的最佳做法是什么？你喜欢只使用 try finally 块而不是 try catch 块吗？我一直认为 try catch finally 是最好的做法。但是，在我正在使用的部分代码中，我看到了这样的代码：

尝试{ doSomething(); } 最后{ doSomethingElse(); }

因为他们没有捕捉到异常，所以我很难调试代码。对我来说，不使用 catch 并且只使用 finally 并不是一个真正的好习惯，但我可能错了。

据我所知，这并不是一个真正的好习惯。基本上，我们没有使用 try catch 的用途。我也发现了类似的[问题](https://stackoverflow.com/questions/601152/is-a-finally-block-without-a-catch-block-a-java-anti-pattern?lq=1)。

我的问题是：“您是否同意我对以下假设的看法：最佳实践是一起使用 try catch finally 而不是 try finally。” 如果您不同意，请您提供一个示例，说明何时使用 try finally 而不是 try catch finally 以及为什么您认为 try finally 比 try catch 更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:50:49.243

我不同意，如果你不能对抛出的异常做任何事情，但是你的调用者层次结构可以做任何事情，那么使用 finally 来清理你的资源并让调用者在抛出异常后处理清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:54:25.733

构造的目的`finally`是提供始终执行的代码，即使抛出异常也是如此。

try / finally（无捕获）允许您编写保证执行的代码，即使 try 块内的代码抛出运行时异常也是如此。

这在您使用的代码可能会引发运行时异常但不会引发已检查异常的情况下非常有用。一个例子是 Spring DAO 支持；它将 IOExceptions 包装在运行时异常中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:54:56.740

通常 try-finally 用于确保执行某些代码，而不管是否发生异常。通常缺少 Catch 块，因为 try 块中的代码不会抛出任何可以捕获的已检查异常。

例如：

```
try  {

        if(str.length() > 0) { // If str is null, it can throw NullPointer and hence code below it wont execute
            // some code
        }

    }finally {
        // Will be performed even if any unchecked exception is thrown
        // Must contain code which has to be performed at any cost like releasing occupied memory
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T18:55:14.723

共有三种可能，try+catch、try+finally 或 try+catch+finally。它们都有它们的用途。

当你可以做一些有用的事情来处理异常时，将 catch 与 try 一起使用，例如报告异常发生的事实。

finally 块中的代码始终运行，与是否发生异常无关，因此在需要清理时使用 finally 和 try 总是要发生的。一个示例是如果文件已成功打开，则将其关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T18:59:21.503

我不同意。

try{}finally{} 应该用于您无法处理异常但需要清理资源的情况。

try{}finally{} 块不会像您想象的那样导致异常“消失”。它将被抛出堆栈并在其他地方处理。如果您在当前应用程序中看不到异常，那是因为它被扔到了别处。

```
try {
    connection = createConnection();
}
finally {
    closeConnection(connection) //Free database connection.
} 
```

在这种情况下，您可能没有任何处理 SQL 异常的能力，但您仍然希望释放数据库连接。

# php - PHP、SQL 注入以及何时使用它

> ID：15795523
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:47:27.263
> 
> 标签：php, sql, security, sql-injection

我是 PHP 新手，我即将完成一个项目，但是我需要保护我的数据库免受 SQL 注入。我是否需要在我执行的每个 sql 查询上去除斜杠，或者我只需要为 sql INSERT/UPDATE 语句而不是 SELECT 语句执行它？还是对所有事情都这样做是最佳做法？

我不是在问如何防止 SQL 注入，我是在问何时使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:48:39.940

`strip_slashes()`不是你想要的。您应该使用准备好的/参数化查询，将数据与 SQL 分开，使其本质上不受此问题的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T18:48:56.560

将 PDO 或 mysqli 与准备好的语句一起使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T18:52:18.613

还有很多其他方法可以使用 SQL 进行注入。如果你想要一个很好的例子，这里有一个：`/*`在一个领域，`*/`在另一个领域。中间的所有内容都将在没有参数化的情况下评论 MySQL4 和 MySQL5。

切换到 PDO/MySQLi 并从驱动程序请求真正的参数化。这将迫使驱动程序首先发送没有数据的请求，然后在另一个数据包中发送数据，从而强制合规，同时解决许多令人头疼的问题。

如果这还没有说服你，试试这个链接： http: [//ferruh.mavituna.com/sql-injection-cheatsheet-oku/](http://ferruh.mavituna.com/sql-injection-cheatsheet-oku/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T19:06:58.360

使用[PDO](https://stackoverflow.com/tags/pdo/info)。不是“PDO 或 MySQLi”，而是 PDO。它是唯一可用的可靠驱动程序（尽管提供的保护不足）。

如果您想要*全面*保护，请使用[SafeMysql](https://github.com/colshrapnel/safemysql#safemysql)

> 我不是在问如何防止 SQL 注入，我是在问何时使用它。

好问题。

1.  你不需要任何保护或预防。
2.  您必须正确格式化查询。总是。

# python - Python：按键的一部分对字典中的项目进行排序？

> ID：15795525
> 
> 赞同：6
> 
> 时间：2013-04-03T18:47:33.477
> 
> 标签：python, sorting, dictionary, key

假设我有一本国王字典，名字中的罗马数字作为键，整数形式的罗马数字作为值。

`d = {'Zemco III': 3, 'Usamec XL': 40, 'Usamec VII': 7, 'Robert VIII': 8, 'Usamec XLII': 42, 'Mary XXIV': 24, 'Robert III': 3, 'Robert XV': 15, 'Usamec XLIX': 49}`

我想从最老到最年轻的顺序对列表进行排序，即 Usamec XLII 应该排在 Usamec XLIX 之前。我还想按字母顺序对列表进行排序，即 Usamec XLII 应该排在 Zemco III 之前。

我的方法是先按名称排序，然后按罗马数字值排序：

```
x = sorted(d.items(),key=operator.itemgetter(0))
y = sorted(x,key=operator.itemgetter(1)) 
```

但是，因为罗马数字是键的一部分，所以我的字母排序不能按预期工作。我的问题是，我可以按键的一部分对字典进行排序，例如，如果我的键是 Zemco III，我可以用 key.split()[0] 而不是整个键对我的项目进行排序吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:50:01.490

`key`只是一个函数，它接收一个项目并返回您需要排序的内容。它可以是任何东西。

这`(name_without_rightmost_word, number)`按键对项目进行排序：

```
In [92]: sorted(d.items(), key=lambda (name, num): (name.rsplit(None, 1)[0], num))
Out[92]:
[('Mary XXIV', 24),
 ('Robert III', 3),
 ('Robert VIII', 8),
 ('Robert XV', 15),
 ('Usamec VII', 7),
 ('Usamec XL', 40),
 ('Usamec XLII', 42),
 ('Usamec XLIX', 49),
 ('Zemco III', 3)] 
```

如果您使用 python 3，请使用`key`：

```
lambda item: (item[0].rsplit(None, 1)[0], item[1]) 
```

`key.rsplit(None, 1)[0]`比`key.split()[0]`多字名称的情况要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:37:55.603

要对其进行排序，您可以执行以下操作：

```
sorted_stuff = sorted([(ord(x[0]), x, y) for x, y in d.items()])
final_sorted = [(y,z) for x,y,z in sorted_stuff] 
```

sorted_stuff将如下所示**：**

```
[(77, 'Mary XXIV', 24), (82, 'Robert III', 3)] 
```

final_sorted将被正确格式化**：**

```
[('Mary XXIV', 24), ('Robert III', 3)] 
```

# delphi - Delphi中指向类的指针x引用

> ID：15795528
> 
> 赞同：1
> 
> 时间：2013-04-03T18:47:40.170
> 
> 标签：delphi, pointers, dereference

使用指针而不是引用类有什么好处吗？例如：

```
TMyClass = class(TObject);

procedure Method;
var
    pmc : ^TMyClass;
    //instead of
    mc : TMyClass;       
begin
   pmc := @ObjectMyClass;
   //instead of
   mc := ObjectMyClass;

   if pmc.Enabled then
      blablabla;
   //instead of
   if mc.Enabled then 
     blebleble;           
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:54:24.293

Delphi 中的所有类都通过引用传递/使用，因此添加另一个间接级别不会添加任何内容。

这不适用于始终按值传递/使用的记录。可以通过声明指针类型通过引用来使用这些，并通过使用指针类型或 var 关键字（它为您处理指针函数参数混乱）将它们传递给函数。

（Ctrl+F 表示“类”） [http://docwiki.embarcadero.com/RADStudio/XE3/en/Pointers_and_Pointer_Types](http://docwiki.embarcadero.com/RADStudio/XE3/en/Pointers_and_Pointer_Types)

如果您熟悉 C/C++，^TMyClass 相当于：

```
**MyClass 
```

这在某些情况下很有用，例如当您想通过传递指向该函数的指针的指针来使用函数编辑指针时，但我怀疑这些构造是否可以使用 Delphi。

# interface-builder - 像这样改变 UIView 的背景颜色 *FFFFFF*

> ID：15795531
> 
> 赞同：1
> 
> 时间：2013-04-03T18:47:47.513
> 
> 标签：interface-builder, xcode4.6

在[Facebook iOS SDK Docs 上](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/#step1) 写道：

*将个人信息添加到用户登录时显示的 SCViewController。在 SCViewController.xib 中进行这些更改：*

*查看：在文件检查器设置中，关闭“使用自动布局”。*

***视图：将主视图的背景颜色更改为 FFFFFF。***

问题是，在 IB 中，从哪里可以改变这样的视图颜色（指定值）。我所知道的就是使用它的默认选择器来改变颜色。

对不起菜鸟问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:20:47.060

在 Facebook 编写此文档的人并没有仔细研究 Xcode 颜色选择器（您应该提交错误和/或通知他们这一事实）。

首先，您需要将十六进制网页颜色转换为 RGB 值，您可以使用一些实用程序或网站来完成。这是一个： [Yellowpipe 的颜色转换器](https://www.yellowpipe.com/yis/tools/hex-to-rgb/color-converter.php)

一旦你有了你的 RGB 值，[你就可以将它们输入到主视图的 Interface Builder 部分](https://stackoverflow.com/questions/2565008/how-do-i-enter-rgb-values-into-interface-builder)，看起来像这样（+1 给 Tyler 的答案）：

[![如何在 Interface Builder 中通过 RGB 选择颜色。](https://i.stack.imgur.com/BFTws.png)](https://i.stack.imgur.com/BFTws.png)
[（来源：[bynomial.com](http://bynomial.com/tmp/IB_RGB_color.png)）]

# c++ - 循环内的匿名结构

> ID：15795532
> 
> 赞同：4
> 
> 时间：2013-04-03T18:47:49.910
> 
> 标签：c++, gcc, g++

下面的代码用 g++ 编译得很好

```
#include <iostream>
using namespace std; 

int main() 
{
    for (struct { int i; double j; } x = {0,0};  x.i < 10; ++x.i, x.j+=.1)
    {
        std::cout << x.i << " " << x.j << '\n';
    }
} 
```

但是使用 MSVC2005 我得到了错误

```
error C2332: 'struct' : missing tag name
error C2143: syntax error : missing ')' before '{'
warning C4094: untagged 'struct' declared no symbols
error C2059: syntax error : 'empty declaration'
error C2143: syntax error : missing ';' before ')'
error C2143: syntax error : missing ';' before ')'
error C2065: 'x' : undeclared identifier
error C2059: syntax error : '{'
error C2143: syntax error : missing ';' before '{'
error C2143: syntax error : missing ';' before '}'
error C2228: left of '.i' must have class/struct/union
1>        type is ''unknown-type''
error C2228: left of '.i' must have class/struct/union
1>        type is ''unknown-type''
error C2228: left of '.j' must have class/struct/union
1>        type is ''unknown-type''
error C2059: syntax error : ')'
error C2143: syntax error : missing ';' before '{'
error C2228: left of '.i' must have class/struct/union
1>        type is ''unknown-type''
error C2228: left of '.j' must have class/struct/union
1>        type is ''unknown-type'' 
```

我想知道循环内的匿名结构是“扩展”还是语言功能，而 MSC2005 是否缺少它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:53:04.773

[这是msvc 中](http://connect.microsoft.com/VisualStudio/feedback/details/624410/visual-c-compiler-fails-to-parse-a-for-init-statement-that-starts-with-a-class-specifier)的一个错误。不幸的是，它在他们的优先级列表中并不高。

# .htaccess - 将所有带有“videos.php”的网址重定向到基础

> ID：15795533
> 
> 赞同：-3
> 
> 时间：2013-04-03T18:47:53.030
> 
> 标签：.htaccess, mod-rewrite

我希望有人可以通过 mod_rewrite 规则帮助我，将指向我服务器上“videos.php”的动态 url 重定向到基本 url。

例如，我需要将 'website.com/1/music/various/videos.php?=1234' 重定向到 'website.com/videos.php?=1234'

编辑：我正在寻找一个动态的解决方案。如果一个 url 随时指向videos.php，我需要做一个301 重定向到主目录。即如果/1/home/music/videos.php?=1234 重定向到/videos.php?=1234，或/music/playlist/1234/videos.php?1432 到/videos.php?1432。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:56:09.097

创建一个`.htaccess`文件并插入以下行：

```
RewriteEngine On

# Page moved permanently:
RewriteRule ^videos\.php\?\=([0-9]+)\.html$ /1/music/various/videos.php?=$1 [R=301,L] 
```

测试时，请忽略该`R=301,`部分，否则您将只能看到很长很长时间的缓存内容。在确定其工作正常时添加它。或者用302，意思是暂时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:55:59.797

请检查：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/1/music/various/videos.php$
RewriteCond %{QUERY_STRING} (.+)$
RewriteRule ^(.*) /videos.php [R,QSA]

RewriteCond %{REQUEST_URI} ^/videos.php$
RewriteCond %{QUERY_STRING} !(.+)$
RewriteRule ^(.*) http://%{HTTP_HOST}/ [R=301] 
```

如果它不起作用，那么试试这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/1/music/various/videos.php$
RewriteCond %{QUERY_STRING} ^(.+)$
RewriteRule ^(.*) /videos.php%1 [R]

RewriteCond %{REQUEST_URI} ^/videos.php$
RewriteCond %{QUERY_STRING} !(.+)$
RewriteRule ^(.*) http://%{HTTP_HOST}/ [R=301] 
```

# html - 我在宽度上做错了什么？

> ID：15795537
> 
> 赞同：1
> 
> 时间：2013-04-03T18:48:06.120
> 
> 标签：html, css

我目前正在用基本的 html 和 css 编写一个网站，以便在那里拥有它，但我遇到了宽度问题。

我将我的 body 设置为 1086px 宽度（我设计中元素的最大宽度）。

虽然我的电脑显示器是 1366px 宽，但底部仍然有一个滚动条。无论如何要解决这个问题？

溢出：隐藏将不起作用，因为较小的显示器（1024px）将无法在没有滚动条的情况下看到所有内容，因此可能需要它。

提前致谢！

编辑：找到解决方案：

```
{
overflow-y: auto;
overflow-x: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:53:33.517

有两种不同的盒子模型。你有你的宽度+填充+边距。使用 CSS box-sizing 属性将您的框模型设置为边框框。

```
body {
  box-sizing: border-box;
} 
```

在[quirksmode.org](http://quirksmode.org/css/user-interface/boxsizing.html)，您可以找到一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:50:49.647

您应该从 css 文件中的元素中删除任何填充和边距。

```
html, body, footer, header etc {
margin: 0;
padding: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:00:51.147

调整大小`body`不是一种优雅的方式。您应该使用而不是名为 wrapper 的 div 容器，并调整包装器的大小。这也应该可以解决您的问题。

看看这个 jsfiddle [http://jsfiddle.net/EeJnN/](http://jsfiddle.net/EeJnN/)

# wget - 来自 wget 的 JSON 在输出文件开头的 { 之后输出额外的空格和换行符

> ID：15795544
> 
> 赞同：0
> 
> 时间：2013-04-03T18:48:34.673
> 
> 标签：wget

我能够获得一个已经包含 JSON 格式数据的 URL。但是，在查看输出文件时，会有额外的空格和换行符，这会在尝试解码 JSON 时导致问题。

如果我只是将页面内容直接从浏览器复制并粘贴到 .json 文件，则格式非常好。

如何确保 wget 以它显示的确切格式输出页面，即 json 格式？

抱歉，由于隐私问题，我不得不掩盖实际数据，但仍应说明该问题。

使用的命令：

```
wget --load-cookies=/home/cookies.txt --header "Accept:application/json" "https://url.com/url/json?" -O output.json 
```

输出格式的片段，注意多行，我包括来自 vi 的那些只是为了说明。实际输出不包括这些行号：

```
 1 
  2     {
  3       "callback": ["callback"],
  4       "attributes": ["xxx", "yyy", "zzz", "aaa", "bbb", "ccc", "ddd", "eee", "fff", "ggg"],
  5       "types": ["string", "date", "string", "string", "string", "number", "number", "number", "string", "string"],
  6       "records": [["1", "2013-04-03", "blabla", "um", "yes", 1, 0, 0, " 5h 0m", "-1m"], ["2", "2013-04-03", "blabla", "er", "no", 0, 1, 1, " 5h 0m", "-1m"], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:06:09.403

最终`tr -d "[:space:]"`在整个输出上使用并将文件转换为有效的格式。

# winapi - 从 IStream 读取到 std::ifstream

> ID：15795547
> 
> 赞同：1
> 
> 时间：2013-04-03T18:48:56.000
> 
> 标签：winapi, istream

我正在为具有自定义扩展名的文件编写预览处理程序。

Preview Handler 实现了IInitializeWithStream 接口，该接口使用已在Windows 资源管理器中选择的文件数据初始化IStream。

现在，我需要对这个数据流进行一些解析操作（文件中的数据是预定义的自定义格式的纯文本）。

为此，我需要 std::ifstream 对象中的数据，以便我可以轻松地在其上使用 STL 来实现所需的输出。

长话短说：我需要一种将数据从 IStream 转换/填充到 std::ifstream 的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T14:27:10.773

我使用 IStream 接口的 Read 方法将数据填充到 char 缓冲区并使用“<<”运算符将其流式传输到 std::ostringstream

# java - 在 Eclipse 中引用 javax.speech

> ID：15795550
> 
> 赞同：1
> 
> 时间：2013-04-03T18:49:12.170
> 
> 标签：java, eclipse

我是 Java 新手，但我需要一个由 Eclipse Indigo 工作的其他人编写的项目。它使用语音识别，所以它缺少 javax.speech 库，我不知道如何安装它，所以我可以在构建路径中引用它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:55:17.173

Java Speech API 不包含在 SDK 中。您需要下载 JAR 文件以获得有效的实现并将它们包含在您的类路径中。[Oracle Java Speech API 常见问题](http://www.oracle.com/technetwork/java/jsapifaq-135248.html)页面上有一个（可能是当前的）提供者[列表：](http://www.oracle.com/technetwork/java/jsapifaq-135248.html#implementation)

*   [免费TTS](http://freetts.sourceforge.net/)
*   [IBM 的“Java 演讲”](http://www.alphaworks.ibm.com/tech/speech)
*   [云花园](http://www.cloudgarden.com/)
*   [Lernout & Hauspie 的 TTS for Java Speech API](http://www.lhs.com/)
*   [对话网络 3.0](http://www.conversa.com/)
*   [节日](http://www.cstr.ed.ac.uk/projects/festival/)
*   [义隆语音魔方](http://www.elantts.com/products/fp_speechcube.html)

那里可能还有其他供应商，您将不得不做一些研究。另外，请注意，列出的一些实现是商业的。

# google-chrome - 有什么方法可以让 Chrome 在“参数”中包含未声明的参数？

> ID：15795551
> 
> 赞同：1
> 
> 时间：2013-04-03T18:49:18.570
> 
> 标签：google-chrome, arguments, google-chrome-devtools

通常在 Javascript 中，如果您`arguments`从函数内部引用“魔术”变量，它将包含传递给函数的所有参数。但是，在 Chrome 开发者工具（在 Linux 上）中，这不会发生。如果你：

1.  `debugger`向没有任何声明参数的函数添加语句
2.  做一些事情来用一个参数触发那个函数
3.  当 Chrome 在线暂停时，从控制台`debugger`检查。`arguments`

你会看到它`arguments`是空的。现在，只需在函数上声明参数就可以很容易地解决这个问题；换句话说，如果你这样做：

```
function(a,b,c) {
    debugger;
} 
```

代替：

```
function() {
    debugger;
} 
```

`arguments` *将*有参数（或至少前三个）。

但是，这确实没有必要，这让我想到了我的问题：是否有任何设置可以更改，或者我可以做些什么来解决此问题，只需让 Chrome 将每个传入的参数放入`arguments`,不只是声明的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:33:10.917

这最近已在 V8 JavaScript 引擎中重做。很快它将进入 Chrome 代码库，最终将进入稳定版本（可能是 28\. *.* .* ？）。

# php - PHP 生成的 XML 文件中的编码错误

> ID：15795556
> 
> 赞同：0
> 
> 时间：2013-04-03T18:49:25.390
> 
> 标签：php, mysql, xml, utf-8

我使用 DOMDocument 类在 PHP 中生成了一个 XML 文件，数据是从 MySQL 数据库中获取的。很多数据都包含 HTML 标记，但我已将它们全部封装在 CDATA 部分中。

起初该文件有很多编码错误，但在将其放入文件之前通过 utf8_encode() 运行所有内容似乎已经修复了除一个之外的所有错误。

这是我现在遇到的错误：

```
 error on line 5113 at column 450: Input is not proper UTF-8, indicate encoding !
    Bytes: 0x14 0x31 0x30 0x30 
```

我在这里发现了一些类似错误的帖子，但没有一个解决了我的问题，或者建议使用 utf_encode()。这是似乎触发错误的部分：

```
 ...quiet portable package. ]]></Summary><Features><![CDATA[The EF4500iSE was designed for maximum fuel... 
```

错误似乎在 CDATA[ 和 The 之间，尽管我看不到那里的任何字符，并且该部分与文件中的每个其他 CDATA 块相同。如果我删除整个 Features 元素及其内容，则文件加载正常。

这是文件的链接：http: [//test.hhdev.hothousemarketing.com/inventory.xml](http://test.hhdev.hothousemarketing.com/inventory.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:42:05.070

正如 Colin 在问题评论中指出的那样，问题最终成为 CDATA 标记中存在的非 ASCII 字符。

我急于解决这个问题，所以我只使用了蛮力方法，除了 utf8_encode() 之外，我还通过正则表达式替换运行了所有内容，我使用了：$output = preg_replace('/[^(\x20-\x7F)] */','', $输出); 我在这里找到了这个：http: [//www.stemkoski.com/php-remove-non-ascii-characters-from-a-string/](http://www.stemkoski.com/php-remove-non-ascii-characters-from-a-string/)

感谢 Colin 和 Francis 的贡献。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:55:06.910

某些字符在 XML 中是完全不允许的，即使在 CDATA 部分中，甚至是实体编码的。

您也许可以在 UTF-8 字符串（未经测试）上使用它：

```
$xml_legal_chars = preg_replace('/[\x{00}-\x{08}\x{0B}\x{0C}\x{0E}-\x{1F}\x{D800}-\x{DFFF}\x{FFFE}\x{FFFF}]/u', '', $utf8string); 
```

# javascript - 更新 KnockoutJS 关联 observableArray 值

> ID：15795564
> 
> 赞同：1
> 
> 时间：2013-04-03T18:49:39.407
> 
> 标签：javascript, knockout.js, associative-array

这应该很简单。

我有一个带有名称和布尔值的关联可观察数组。

```
this.items = ko.observableArray([
    { name: "name1", boolVal: true },
    { name: "name2", boolVal: true },
]); 
```

然后是一个简单的函数来改变 boolVal。

```
this.changeValue = function (item) {
    item.boolVal = false;
}; 
```

当我调用 changeValue 函数时，boolVal 确实发生了变化（请参阅我的 jsfiddle 中的 console.log(data)），但视图没有更新。屏幕上的值保持“真”。我必须对 KnockoutJS 的工作方式做出错误的假设。

[JS小提琴链接](http://jsfiddle.net/gBLAy/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:52:05.517

为了 KO 更新 UI，您需要具有可观察的属性：

```
this.items = ko.observableArray([
    { name: "name1", boolVal: ko.observable(true) },
    { name: "name2", boolVal: ko.observable(true) },
]); 
```

并将其设置为：

```
this.changeValue = function (item) {
    item.boolVal(false);
}; 
```

唯一跟踪项目`ko.observableArray`添加和删除。因此，如果其中一项发生更改，它不会通知 UI。为此，您需要拥有`ko.observable`这些物品。

演示[JSFiddle。](http://jsfiddle.net/HcXPB/)

# javascript - SVG 对象父级上的 JavaScript 事件

> ID：15795575
> 
> 赞同：0
> 
> 时间：2013-04-03T18:50:21.113
> 
> 标签：javascript, html, dom, svg

我目前正在编写一个脚本，该脚本允许用户在 SVG 文档中嵌入 JavaScript 文件，以实现内容的平移和缩放。我已经尝试了几乎所有可以找到的 SVG 平移和缩放变体，并且只找到了一种具有一致的跨浏览器支持的变体。不幸的是，该脚本是在假设 SVG 将在 HTML 中写出而不是通过 object 标记嵌入的情况下编写的。由于我正在使用很多预渲染的 SVG，因此仅链接到每个 SVG 中的外部 JavaScript 文件会更有效。到目前为止，转换一切顺利，但我遇到了一些障碍。该脚本依赖于鼠标事件点击包装 SVG 对象的 div。它如下所示：

```
<div id="svgwindow">
  <div id="wrapper">
    <object id="svg" data="test.svg" type="image/svg+xml"></object>
  </div>
</div> 
```

JavaScript 的一个例子：

```
parent.document.getElementById("svgwindow").addEventListener("mousewheel", Zoom, false); 
```

只要事件发生在 svg 对象未填充的 svgwindow 区域中，此脚本就会成功添加事件。一旦事件发生在对象之上，就不会捕获该事件。我无法找到任何类似的实例来帮助解决错误，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:18:32.003

由于`<object>`标签将捕获所有事件并且无法阻止它，您所能做的就是将另一个绝对定位在将接收事件`<div>`的包装器的顶部。`<div>`

当然，如果您换成一个`<image>`标签而不是一个`<object>`不会捕获事件但对图像有限制的标签，例如所有数据必须在一个文件中，并且不允许编写脚本，这可能会使其不适合您。如果它合适，那么这是最简单的方法。

# c# - 如何在自引用表中获取给定以下路由别名的最后一个类别

> ID：15795586
> 
> 赞同：2
> 
> 时间：2013-04-03T18:50:42.827
> 
> 标签：c#, linq, entity-framework

我的问题像这样解决这样的代码；

```
 string permalink = "computers/hp/computers"; //example for similarity
    List<string> aliases = permalink.Split('/').ToList();

    Category cat = db.Categories.SingleOrDefault(c => c.Alias == aliases.First());
    aliases.Remove(aliases.First());

    foreach (string alias in aliases)
    {
        cat = cat.Categories.SingleOrDefault(c => c.Alias == alias);
    }

    return cat; 
```

但这发送了许多查询..

我怎么做一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:21:22.693

如果我了解您想要什么，您可以使用该[`Enumerable.Aggregate`](http://msdn.microsoft.com/en-us/library/bb549218.aspx)方法。您必须从包含所有`db.Categories`. 不过，这很容易模拟。试试这个：

```
var aliases = permalink.Split('/');
var category = new Category // start with a 'root' category
{
    Id = 0, 
    Categories = db.Categories 
}; 
var cat = aliases.Aggregate(category, (c, a) => c.Categories.SingleOrDefault(x => x.Alias == a)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:18:26.270

首先，如果类别表很小，有时最好只抓取整个表并在内存中进行选择（也许使用 pwsg 的答案）。

如果表很大，那么存储过程可能会比 Linq 更好。

但是，如果您真的想在 Linq 中执行此操作，那么我认为唯一的方法是重复向同一张表添加连接。

以下假设您的关系在称为 ParentID 和 Id 的字段之间。我还更改了您的字符串永久链接以更好地说明顺序。

你首先需要一个小助手类

```
public class Info
{
    public Category category;
    public int? recordID;
} 
```

然后你的主要代码

```
string permalink ="computers1/hp/computers2"; 
var aliases = permalink.Split('/');

var query = dc.Categories.Where(r=>r.Alias == aliases[aliases.Length-1])
              .Select(r=> new Info { category = r,  recordID = r.ParentID});

    for(int i = aliases.Length -2 ; i >= 0; i--)
    {
        string alias = aliases[i]; 
        query =  query.Join(dc.Categories , 
                            a => a.recordID , b => b.Id , (a,b) => new { a , b} )
        .Where(r=>r.b.Alias == alias)
        .Select(r=> new Info { category = r.a.category, recordID = r.b.ParentID});
    }

    return query.SingleOrDefault().category; 
```

正如你所看到的，join 的 lambda 语法是（恕我直言）可怕的，我通常会尽量避免它，但无论如何我都想不出在这里避免它。

由于我无法测试它，它可能是完全错误的（可能我混淆了 ID、ParentID 或我的 a's 和 b's ），因此测试它并测试它的性能很重要。

我认为产生的sql应该是这样的

```
SELECT * from Categories AS t0
INNER JOIN Categories AS t1 ON t0.ParentID = t1.id
INNER JOIN Categories AS t2 ON t1.ParentID = t2.id
WHERE t2.Alias = 'computers1' 
  AND t1.Alias = 'hp' 
  AND t0.Alias = 'computers2' 
```

部分或别名越多，连接就越多。

既然您已经看到了所有这些，您可能希望避免使用这种方法 -)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:40:36.127

我可能只会增加您的困惑:)，但是让我提出一个想法...
让我说一下**这行不通**（完全按照您的规格）-这不是解决方案，但可能会帮助您简化事情有点。

```
var query = 
    (from cat in db.Categories
     where cat.Alias == "mainAalias"
     from subcat in cat.Categories
     where aliases.Contains(subcat.Alias)
     orderby subcat.Alias descending
     select subcat);  
query.FirstOrDefault(); // or something 
```

这应该产生一个相对简单的查询
（例如`SELECT...FROM...JOIN...WHERE... AND...IN...ORDERBY...`）。

例如，如果你给它 'cat1', 'cat2'...'cat6' - out of cat1 - to cat100 - 它给出 'cat6'...'cat1' （我的意思是别名）

**然而，它的“排序”有一个主要的“缺陷”** ——您的规范需要一种“别名”顺序的排序`as they come`——这对于查询来说有点不幸。如果您能以某种方式强制执行或定义一个命令，那么可以将其转换为 SQL，这（或类似的）可能会起作用。

> 我假设-您的“别名”已按升序进行了预排序-此查询可以正常工作。他们不是，我知道这一点。

但我认为您的想法在这里没有明确定义（以及为什么我们所有人都遇到问题） - 仔细考虑并优化 - 简化您的要求 - 并让您的 C# 层提供帮助，例如通过预排序。

您也可以尝试对每个 cat.Alias 等进行某种形式的“分组”-但我认为同样的“排序问题”仍然存在。

# javascript - 使用 Dropbox API 和 Javascript 查找所有 Dropbox 文件夹

> ID：15795589
> 
> 赞同：3
> 
> 时间：2013-04-03T18:50:46.253
> 
> 标签：javascript, getjson, dropbox-api

我从这个 stackoverflow 问答开始，一个很好的开始，谢谢。[尝试使用 node.js 遍历保管箱文件夹树，](https://stackoverflow.com/q/7544742/1877283) 但我没有使用 node.js。我正在使用直接的Javascript。我不确定答案中提到的计数器增量和减量 - 不确定它们会去哪里。

我正在使用 jQuery.getJSON 来获取元数据。基本上我在这一点上迷路了。我可以从 Dropbox 获取元数据，但在处理函数 pathsToArray 时遇到问题。

函数 dbxGetContents 只是我设置的一个函数，用于执行另一个对 Dropbox 的调用以获取刚刚找到的文件夹的文件夹内容。

```
function dbxCreateTree(clickFolderName, crumbType, crumbData){

    // Get the OAUTH connection to Dropbox.  It's a call to the JS function dbxConnect()
    var dbxConn = dbxConnect();

    var dbxUrlTree = "https://api.dropbox.com/1/metadata/dropbox/" + clickFolderName;       
    dbxUrlTree = dbxUrlTree + "?";
    dbxUrlTree = dbxUrlTree + dbxConn;

    jQuery.getJSON(dbxUrlTree,
        function(data){

            function pathsToArray(metadataarr,callback){   //Call this function and pass the Dropbox metadata array to it, along with a callback function
                    for (aItem in metadataarr ){  //For every folder or file in the metadata(which represents a specific URL)
                            if (metadataarr[aItem].is_dir){     //It is a folder
                                dropbox.paths.push(metadataarr[aItem].path+"/");   //Write the path of the folder to my array called 'dropbox.paths'
                                dbxGetContents(metadataarr[aItem].path.slice(1),function(err, data){   //We go into the folder-->Call the dropbox API to get metadata for the path of the folder.
                                    if (err){  
                                    }
                                    else {      
                                        pathsToArray(data.contents,function(err){  //Call the function from within itself for the url of the folder.  'data.contents' is where the metadata returned by Dropbox lists files/folders
                                        }); 
                                    }
                                });
                            }
                            else {      //It is a file
                                //dropbox.paths.push(metadataarr[aItem].path);   //Write the path of the file to my array called 'dropbox.paths'
                            }
                        }
            return callback(); //This returns multiple times, instead of only once when everything is ready, and that is the problem!
            };

        pathsToArray(data);

        });     
} 
```

这是 dbxGetContents 函数。

```
function dbxGetContents(dbxFolderName){

        // Get the OAUTH connection to Dropbox.  It's a call to the JS function dbxConnect()
        alert('here in dbxGetContents looking for ' + dbxFolderName);
        var dbxConn = dbxConnect();

        var dbxUrlTree = "https://api.dropbox.com/1/metadata/dropbox/" + dbxFolderName;     
        dbxUrlTree = dbxUrlTree + "?";
        dbxUrlTree = dbxUrlTree + dbxConn;

        jQuery.getJSON(dbxUrlTree,
            function(data){
                alert('here returning data');
                return data;
                }
            );
    } 
```

非常感谢您的关注。

# java - 用逗号分割字符串，但不包括括号内的逗号

> ID：15795591
> 
> 赞同：1
> 
> 时间：2013-04-03T18:50:46.890
> 
> 标签：java, regex

现在我有一个关于 Java IO 的任务，我需要逐行读取文件并将这些数据保存到数据库中，但是现在我遇到了一个问题。

```
"desk","12","15"，"(small,median,large)" 
```

我想用`string.split(",")`分割，并将数据保存到每一列。但是我发现()中的数据也被拆分了，我不想拆分（小，中，大），我想保持这个完整性。我怎样才能做到这一点？我知道我可以使用正则表达式，但我真的不知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:56:54.930

或者，如果 Java 必须是:)，您可以按 "\\s*\"\\s*,\\s*\"" 拆分，然后在第一个字段的开头和末尾添加 "第二个。我放了 \s 因为我看到你也有空格分隔符 - 15",blank"(small

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:58:22.093

您可以使用`Pattern`and来解决这个问题`Matcher`。任何使用 split 的解决方案似乎都是一个讨厌的解决方法。这是一个例子：

```
public static void main(String[] args){
    String s = "\"desk\",\"12\",\"15\",\"(small,median,large)\"";
    Pattern p = Pattern.compile("\".+?\"");
    Matcher m = p.matcher(s);
    List<String> matches = new ArrayList<String>();

    while (m.find()){
        matches.add(m.group());
    }

    System.out.println(matches);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:36:48.890

```
(\(.+?\)|\w+) 
```

上面的代码与下面的结果相匹配，这将允许一个比其他一些发布的更灵活的解决方案。正则表达式的语法在此页面的另一个答案中，只需使用此正则表达式即可

办公桌
12
15
（小、中、大）

# ios - [UIBarItem setTitle:]：无法识别的选择器发送到实例

> ID：15795595
> 
> 赞同：0
> 
> 时间：2013-04-03T18:50:55.090
> 
> 标签：ios, objective-c, runtime-error, uitoolbar, unrecognized-selector

我试图给我的 UIToolBar 一个标题，但是当我尝试添加一个带有标题属性的 UIBarItem 时，我收到了这个错误。我的代码：

```
UIBarItem *title = [[UIBarItem alloc] init];
title.title = @"My Title";

[toolBar setItems:@[cancel, title, ok]]; 
```

我检查了 UIBarItem 的官方文档，它确实有一个完全有效的“标题”属性。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:07:34.293

我认为问题在于，那`UIBarItem`是 and 的抽象**超**类。`UIBarButtonItem``UITabBarItem`

也许该方法只是在标头中声明而未实现或抽象实现调用`-doesNotRecognizeSelector:`。

> `UIBarItem`是添加到出现在屏幕底部的条的项目的抽象超类。…</p>

对于`-[UIToolbar items]`or ，您必须使用 use 。~~`UINavigationBar`~~ `-[UINavigationItem (left|right)BarButtonItems]``UIBarButtonItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:57:06.543

我遇到了同样的错误，尝试使对象成为按钮而不是项目。这段代码对我来说很好用

```
UIBarButtonItem *title = [[UIBarButtonItem alloc] init];
[title setTitle:@"My Title"]; 
```

如果您试图给工具栏一个标题，请制作一个带有标题的 UILabel 并将其添加为子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:58:41.220

来自[苹果的文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarItem_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007520-CH3-SW20)：

> 标题
> 
> 项目上显示的标题。
> 
> ```
> @property(nonatomic, copy) NSString *title 
> ```
> 
> 讨论：您应该在将项目添加到栏之前设置此属性。默认值为无。
> 
> 可用性：在 iOS 2.0 及更高版本中可用。

所以这个标题确实可以设置。您确定这是`UIBarItem`作为错误消息的一部分显示的类吗？可能是内存管理问题，如果不是，可能是 UIKit 中的错误*（不太可能）*。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T18:54:26.677

我相信您应该使用`initWithTabBarSystemItem:tag:`或`initWithTitle:image:tag:`初始化您的 UIBarItem。

# tomcat - intellij tomcat 部署问题

> ID：15795599
> 
> 赞同：1
> 
> 时间：2013-04-03T18:51:04.827
> 
> 标签：tomcat, intellij-idea

尝试从 intellij Ultimate 部署到 tomcat7 时收到此奇怪消息。您会在 INFO 行注意到路径完全错误。它是从哪里得到的，我该如何解决？

```
Apr 03, 2013 12:38:26 PM org.apache.naming.resources.WARDirContext doLookup
    INFO: The name [/WEB-INF/classes/C:\dev\apps\admin\newjdbcprops/xvdev.oracle.properties\] is not valid
    javax.naming.InvalidNameException: /WEB-INF/classes/C:\dev\apps\admin\newjdbcprops/xvdev.oracle.properties\: unescaped \ at end of component
        at javax.naming.NameImpl.extractComp(NameImpl.java:161)
        at javax.naming.NameImpl.<init>(NameImpl.java:284)
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T02:26:59.717

好的。这似乎 java 常量池大小恰好是 005c。

```
There are 10 basic sections to the Java Class File structure:
Magic Number: 0xCAFEBABE
Version of Class File Format: the minor and major versions of the class file
Constant Pool: Pool of constants for the class
Access Flags: for example whether the class is abstract, static, etc.
This Class: The name of the current class
Super Class: The name of the super class
Interfaces: Any interfaces in the class
Fields: Any fields in the class
Methods: Any methods in the class
Attributes: Any attributes of the class (for example the name of the sourcefile, etc.) 
```

所以实际上你的常量池大小是 5c。我建议你添加一个 const 就像

```
 private String avoidInvalidNameException = "unescaped \\ at end of component"; 
```

那么您的池大小可能会改变。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T08:01:37.317

我也遇到过这个问题。请检查映射器文件中是否有空白文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-15T02:33:55.550

我也遇到过这个问题，我解决了这个问题，主要是 Web 应用程序工件被破坏或配置不正确。通过两个setps检查它：

*   检查`Project Structure-->Modules`，如果模块名称与pom.xml文件不同，你可以删除模块，然后它会自动生成一个配置（如果你不知道正确的配置，你可以参考你电脑中的另一个项目）

*   确保你的神器，你必须选择战争爆发，而不仅仅是战争。

# css - 在 Twitter Bootstrap 中选择特定组件

> ID：15795602
> 
> 赞同：1
> 
> 时间：2013-04-03T18:51:09.263
> 
> 标签：css, twitter-bootstrap

我正在尝试在我当前的代码中实现引导程序，该代码基于现有代码库构建了几年。当前的代码库有几个样式表等等。我正在使用引导程序中的 nav-pills 和 nav-tabs。但是，icnluding bootstrap.css、bootstrap.responsive.css 与当前的布局元素（如页眉、页脚、输入等）混淆了。我尝试从 bootstrap css 文件中删除一些属性，但它们有超过 7000 行代码在引导程序中遍历每一行代码并不是一个好主意。

是否有引导程序的版本或方式，我可以选择我想使用的引导程序的哪个组件，并相应地填充我的 css 文件。例如，我想要 nav-pills 和 nav-tabs，我相信包含 lal 依赖项的代码不应超过 50-100 行。这也很容易调试和修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:00:15.647

我相信这就是您正在寻找的：

[https://getbootstrap.com/customize/](https://getbootstrap.com/customize/)

您可以取消选择基本 CSS 以使其不受干扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:55:35.797

您应该使用 Bootstrap GitHub 存储库中的 LESS 代码。只需下载最新的标记版本。您还需要一个 LESS 编译器。

此外，您应该首先包含您的引导文件，然后包含您自己的样式表，以确保它在必要时覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:01:04.243

您可以在项目页面上自定义您的“需求”。

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# php - scandir 未正确渲染

> ID：15795605
> 
> 赞同：0
> 
> 时间：2013-04-03T18:51:25.873
> 
> 标签：php, html

这是与问题相关的代码。基本上，问题是，在我网站的根目录上，它正在正确显示文件夹“测试”，但是一旦您点击链接进入“测试”，它就不再显示测试。

```
$src = scandir($_SERVER['DOCUMENT_ROOT']);
foreach ($src as $path){
    if (is_dir($path)){
        if ($path !== 'stats' and $path !== 'data' and $path !== '..' and $path !== '.'){
        echo "<li><a href='/$path'>$path</a></li>";
        }
    }
} 
```

这是`print_r`一个`$src`

```
Array
(
    [0] => .
    [1] => ..
    [2] => Test
    [3] => background.png
    [4] => content_back.png
    [5] => data
    [6] => footer.png
    [7] => header.png
    [8] => index.php
    [9] => main.html
    [10] => stats
    [11] => style.css
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:01:46.890

您需要为 is_dir 使用绝对路径：

```
if (is_dir($_SERVER['DOCUMENT_ROOT'] . '/' . $path)){ 
```

# java - 从 Javascript JSNI 调用 Java

> ID：15795607
> 
> 赞同：0
> 
> 时间：2013-04-03T18:51:31.370
> 
> 标签：java, gwt, smartgwt, jsni

我正在使用 SmartGWT，我希望`com.smartgwt.client.Version`从 JavaScript 访问。在 Firefox 的 Web 控制台中，我尝试过：

`frames[0].$entry(Lcom_smartgwt_client_Version::getVersion()));`

和

`frames[0].$entry(@com.smartgwt.client.Version.getVersion());`

和

`frames[0].$entry(@com.smartgwt.client.Version::getVersion());`

和

`frames[0].$entry(@com.smartgwt.client.Version::getVersion()());`

但是它们都返回语法错误。

SmartGWT 是与我的 WAR 一起部署的，当我这样做时，我可以看到列出的其他 SmartGWT 类`frames[0]`。

调用这个静态 Java 方法的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:19:38.210

这些 JSNI 引用除了在您的 java 文件中的 JSNI 代码中之外不起作用。JSNI 中对 Java 方法和字段的引用实际上不是有效的 JavaScript，而是 JSNI 语言的一部分，以使这些本地方法能够同时使用 Java 和 JavaScript。JSNI 字符串`@com.smartgwt.client.Version::getVersion()()`将被重写为类似于`$getVersion1()`PRETTY 中的内容，或者在 OBF 模式下只有一两个字符长的内容，因此您不能依赖该方法名称相同。

相反，您需要从应用程序内部导出一个 JavaScript 函数，以便这个外部 JavaScript 可以调用它。查看[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#calling](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI#calling)了解具体细节。

这是一个示例，说明它在您的应用程序中的外观：

```
public native void exportGetVersion() /*-{
  $wnd.getSmartGwtVersion = $entry(function() {
    return @com.smartgwt.client.Version::getVersion()();
  });
}-*/; 
```

确保您在应用程序中的某个地方调用此函数以导出该函数 - 在调用之后的任何时间，您都可以`getSmartGwtVersion()`从常规 JavaScript 调用 - 无需使用`frames`or `$entry`。

# java - 哪个使用更少的内存 String.format 或 +/StringBuilder？

> ID：15795615
> 
> 赞同：0
> 
> 时间：2013-04-03T18:52:04.973
> 
> 标签：java, string, performance

我已经通过 SO 搜索了一段时间，我所能找到的只是对字符串速度的引用以及一两次相当误导的内存基准测试尝试。

我的情况是，我们的应用程序中有大量日志消息，我们想知道使用 String.format 与使用`+`StringBuilder 相比是否有任何可衡量的 MEMORY 优势。

我已经牢牢掌握了测量每个这些所花费的时间，并且有很多这样的帖子。

谁能告诉我哪一个更适合降低内存消耗？

**例子：**

```
if(LOG.isDebugEnabled()) LOG.debug(String.format("Invoice id = %s is waiting for processing", invoice.getId())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:58:33.437

由于`String.format()`它支持格式序列和数据类型（%s、%d 等），因此要复杂得多，因此预计性能和内存成本会更高。但是我相信这可能只对很长的字符串很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:07:56.223

我相信 String.format 会使用更少的内存。使用 StringBuilder 时，您需要创建一个新的构建器对象，然后将字符串附加到它上面。在我看来，对象的创建和对它的常量引用（通过追加或类似方法）似乎比使用 String.format 返回直接字符串更占用内存。

StringBuilder 在创建最终字符串之前使用一个临时对象。String.format 似乎是一种更直接的方式，因此占用的内存更少。此外，StringBuilder 在初始化时会要求一个特定的大小（否则它将默认为某个值）。您可以将 StringBuilder 对象的默认分配内存值与普通的旧 String 对象进行比较。

您可以使用要构建的大型字符串数据集来测试这两个选项，并评估每种方法所需的时间。

希望这可以帮助。

# javascript - 流式传输 HTML5 视频时如何测量连接速度？

> ID：15795622
> 
> 赞同：2
> 
> 时间：2013-04-03T18:52:15.447
> 
> 标签：javascript, html

我有一个网站，用户将在其中观看视频。我想为他们提供尽可能最好的质量，而不会因为缓冲而暂停，所以我需要一种方法来测量连接速度。

现在我设置了一些代码，可以尽快找出缓冲区的位置，等待三秒钟，然后再次测量它。由于我们知道比特率，它可以计算连接速度。

问题是浏览器正在限制缓冲区......所以如果用户有一个快速连接，它只会缓冲一秒钟，然后它会大大降低缓冲速度，因为无论如何都不需要以最大速度缓冲。因此，由于我测量了三秒钟，它给出的比特率远低于实际连接。但是，如果连接速度与视频比特率大致相同，则它可以完美运行。

如何解决？谷歌已经在 YouTube 上成功了，所以它应该是可能的。

# java - AspectJ & Maven 警告：“...中定义的建议尚未应用？”

> ID：15795630
> 
> 赞同：9
> 
> 时间：2013-04-03T18:52:42.090
> 
> 标签：java, maven, web-applications, jax-rs, aspectj

我试图在编译时将某些方面编织到一个成为 WAR 的项目中。这些方面建议在同一项目中的类（尽管在不同的包中）。

我收到警告：

```
Advice not applied 
```

我的方面没有被执行。这是我的设置：

注释 FooAnnotation.java：

```
package a;
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface FooAnnotation {} 
```

方面FooAdvice.aj：

```
package a;
public aspect FooAdvice {
    private static final Log log = LogFactory.getLog(FooAdvice.class);

    Object around() : call( @FooAnnotation * *(..)) {   
        log.info(String.format("Testing around"));
        return proceed();
    }
} 
```

我还尝试了注释：

```
@Around("call( @FooAnnotation * *(..))")
public Object checkFoo( ProceedingJoinPoint joinPoint) throws Throwable { 
```

据我所知，我的切入点规范是正确的，但由于某种原因，ajc 编译器没有发挥作用。

类 FooClass.java：

```
package b;
@ApplicationPath("/service")
@Path("/{param}")
@Produces("application/json")
@Provider
public class FooClass {

    @POST
    @PUT
    @Path("/{context}/{resource}")
    @FooAnnotation
    public String updateResource(...) {} 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>zzz.group</groupId>
    <artifactId>yyy.artifact</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>yyy.name</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <javaVersion>1.6</javaVersion>
        <org.aspectj-version>1.7.2</org.aspectj-version>
    </properties>

    <dependencies>
        <dependency>
            ... stuff ...
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>${javaVersion}</source>
                    <target>${javaVersion}</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <!--
                    Have to use version 1.2 since version 1.3 does not appear to work
                    with ITDs
                -->
                <version>1.4</version>
                <dependencies>
                    <!--
                        You must use Maven 2.0.9 or above or these are ignored (see
                        MNG-2972)
                    -->
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjrt</artifactId>
                        <version>${org.aspectj-version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjtools</artifactId>
                        <version>${org.aspectj-version}</version>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <!-- <goal>test-compile</goal> -->
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <outxml>true</outxml>
                    <source>${javaVersion}</source>
                    <target>${javaVersion}</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:52:42.090

啊哈！在这里找到了答案：

[aspectj：为什么不能应用建议？](https://stackoverflow.com/questions/12053453/aspectj-why-advice-cannot-be-applied)

它与maven无关。

原因是在我的示例中，该方法是通过间接加载从 jax-rs 框架内调用的。`call()`通知想要编织调用者，但是ajc编译器无法知道调用者在哪里。解决方法是将建议更改为`execution()`：

```
Object around() : execution(@FooAnnotation * *(..)) {...} 
```

这有所不同，因为它围绕执行（ajc 可以找到）而不是调用者编织。

完毕。

# entity-framework - 单个 dbContext 与多个 dbContext

> ID：15795632
> 
> 赞同：2
> 
> 时间：2013-04-03T18:52:51.427
> 
> 标签：entity-framework, domain-driven-design, dbcontext

我将一个大型应用程序划分为许多不同的限界上下文，并通过 T4 在单独的项目中生成 BC 特定实体。例如，ProjectA 包含实体 A、B、C，而 ProjectB 包含 D、E、F。只有edmx。

是只使用一个 EF dbContext 类来持久化所有不同的 BC 实体，还是为每个 BC 使用单独的 dbContext 更好？据我了解，多个 dbContext 类意味着应用程序必须保持多个连接，这可能有利于性能，但我不知道它对服务器资源的影响。

# html - 如何避免悬停时div宽度增加

> ID：15795633
> 
> 赞同：0
> 
> 时间：2013-04-03T18:53:00.020
> 
> 标签：html, css, hover, html-lists

div 包含单行文本作为 li 元素 div 宽度由最宽的项目宽度决定。如果鼠标悬停在某个项目上，其字体样式将变为粗体。

如果将鼠标悬停在宽项目上，粗体字体会导致宽度增加，这会导致 div 宽度也增加。如果鼠标在列表中移动，这看起来很丑陋。如何在不使用硬编码宽度的情况下禁用这种增加？

我尝试了溢出：隐藏样式，如下面的代码所示，但 div 宽度仍然增加。

html:

```
<div id="LeftPane" class="site-leftpane">
<ul class="tree">
<li><a href="/details?product=1">Product1</a></li>
<li><a href="/details?product=2">Product2</a></li>
... 
```

CSS：

```
.site-leftpane {
    background-color: #FBFBFB;
    clear: left;
    color: Black;
    float: left;
    margin: 0;
    overflow: hidden;
    padding-top: 1em;
}

.tree {
    line-height: 1.6em;
    list-style: none outside none;
    margin: 0;
    padding: 0;
}

.tree li a {
    color: #333333;
    cursor: default;
    display: block;
    font-family: "arial","sans-serif";
    margin: 0;
}

.tree li:first-child {
    font-weight: bold;
}

.tree li a:hover {
    color: #E47911 !important;
    font-weight: bold;
} 
```

**更新**

我根据建议的答案改变了风格

```
.tree li a {
    color: #333333;
    cursor: default;
    display: block;
    font-family: "arial","sans-serif";
    margin: 0;
} 
```

但问题依然存在。网页可以在不同的屏幕分辨率下使用。文本由客户在运行时创建。右侧包含自动使用剩余空间的其他 div。在这种情况下，我不知道如何使用硬编码的最大宽度。max-width 指定允许的最大 div 宽度。通常在这种情况下 div 宽度较小，悬停会导致其增加，因此 max-width 不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-03T01:53:39.570

我遇到了类似的问题，并找到了解决它的一种方法是使用一些 jQuery，简单且有效：

```
$('.menu-item').each(function() { 
    $(this).css( 'width', $(this).width()+'px' ); 
}); 
```

基本上你有jQuery“硬代码”/设置每个类元素的初始宽度，这些元素是由浏览器根据文本长度和字体设置计算的，这样当你将鼠标悬停在每个元素上时，它会改变字体重量文本，那么宽度不会改变，它将保持与最初相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:11:49.593

好的，这不是一个很好的答案，但可以提供一个快速修复，其他人可以从中得出一个真正的答案:)

`max-width`通过为列表中的每个添加重复条目`<li>`，添加一个基本上隐藏内容的“pad”类，我能够得到你想要的（嗯，模拟一个动态的）。

```
<div id="LeftPane" class="site-leftpane">
<ul class="tree">
<li><a href="/details?product=1">Product1</a></li>
<li><a href="/details?product=2">Product It's a product, yes.</a></li>
<li class="pad"><a>Product1</a></li>
<li class="pad"><a>Product It's a product, yes.</a></li>
</ul>
</div> 
```

在 CSS 中，我将其添加到末尾：

```
.tree li.pad {
    line-height: 0;
    font-weight: bold;
    visibility: hidden;
} 
```

它的基本作用是为每个列表项添加隐藏条目，但是`pad`该类使附加条目的高度为零，但粗体（因此宽度正确）。它有点依赖于您能够生成 HTML 端，以允许添加重复的条目。

但是，我认为这是一个*糟糕*的解决方案，原因有很多（它添加了冗余数据，它会弄乱任何非可视浏览器，......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:03:05.647

尝试将 padding:0px 和 margin:0px 添加到您的 :hover 中，您也可以为您的 div 添加一个最大宽度以将您的宽度保持在单一大小。我认为这可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:08:13.467

当您的服务器构建您的页面时，我认为您无法确定实际的像素宽度。

用户浏览器会完成所有这些计算，并且不会真正公开它们（尽管客户端脚本语言和 jQuery 等工具集可以看到最终结果）。

老实说，您最好的选择是为项目分配固定宽度，提前计算好，并接受长文本可能会换行。如果这对您不起作用，您的另一个选择是更改悬停行为。也许您可以更改文本/背景颜色而不是使文本变粗？这将是指示当前悬停项目的另一种方式，它不会改变字符大小或间距。

# java - Java反射中的构造函数类线程安全

> ID：15795637
> 
> 赞同：1
> 
> 时间：2013-04-03T18:53:07.397
> 
> 标签：java, reflection, constructor, thread-safety

使用`Java` **反射**，可以实例化一个类的对象，甚至通过私有构造函数，例如

```
public class MyClass
{
    private MyClass(Object p1, String p2)
    {
        // Constructor with no modifications to static code
    }
} 
```

一个可以做（在同一类或任何其他类中，为简化而省略异常处理）

```
public static final Constructor myClass;

static
{
    myClass = MyClass.class.getConstructor(Object.class, String.class);
    myClass.setAccessible(true);
} 
```

然后创建`MyClass`like的新实例

```
 myClass.newInstance(new Object(), "Test"); 
```

`newInstance()`鉴于这`myClass`是静态的，上述对线程安全的调用是否是线程安全的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:58:58.690

是的，类实例是静态的，并且构造函数是线程安全的，只要它没有对对象的静态上下文做任何非线程安全的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T20:02:50.807

调用`Constructor.newInstance()`似乎不是*严格*线程安全的；至少在我的 openjdk-6 实现中，我找到了一个类，该类`sun.reflect.NativeConstructorAccessorImpl`的字段定义为`private int numInvocations;`和后面的这行代码：`if (++numInvocations > ReflectionFactory.inflationThreshold()) {`- 它的行为肯定与预期的不同。
此外，在`Constructor`类本身中，该方法`acquireConstructorAccessor()`记录为“注意这里没有使用同步”。

但是狡猾的行为似乎不会导致整体意外行为，只会重复/不必要地做事情，因此`newInstance()`并行调用不会导致事情被搞砸。

显然，您仍然可以将实例构造函数中所做的事情搞砸。

# jquery - 如何在jQuery中将复选框的值收集到数组中

> ID：15795641
> 
> 赞同：3
> 
> 时间：2013-04-03T18:53:17.397
> 
> 标签：jquery, arrays, checkbox

所以我有一个带有 div 的模块弹出窗口。其中有几个复选框，我想要做的是在用户完成检查或取消选中他想要的框并单击完成按钮之后。我希望 jQuery 将所有选定的值转储到一个数组中。

最初我只是将任何已检查的内容添加到一个数组中，但是如果用户决定取消选中它，我在尝试从数组中删除选中的项目时遇到了问题。上面的其他方式似乎是类似的方法。

我在[这里创建了一个 Codepen](http://codepen.io/leongaban/pen/aJiut)。

我的 jQuery

```
$('.select-roles').click(function(){
    var selectedRole = $(this).html();

    var selectedArray = new Array();

    $('roleId input:checked').each(function() {
        selectedArray.push($(this).val());
        console.log($(this).val());
    });

    console.log('modalName = '+modalName);
    console.log('selected array contains: '+selectedArray);
});

// displays the value of the checked checkbox in the console
$('input[type=checkbox]').click(function() {

    if($(this).is(':checked')){
        console.log( $(this).val())
    }
}); 
```

HTML

```
<div id="modal-TV">

        <div class="modal-top">
            <div class="modal-title">Actor: Select one or more genres below</div>

        </div>

        <div class="modal-choices">
            <div class="modal-col-1">
                <ul>
                    <li><input type="checkbox" value="Adult Animated">Adult Animated</li>
                    <li><input type="checkbox" value="Anime">Anime</li>
                    <li><input type="checkbox" value="Award Shows">Award Shows</li>
                    <li><input type="checkbox" value="Behind The Scenes">Behind The Scenes</li>
                    <li><input type="checkbox" value="Christian">Christian</li>
                </ul>
            </div>

            <!-- modal-choices -->

        <div class="modal-dashes"></div>
        <div class="modal-buttons">
            <ul>
                <a class="close" title="Cancel"><li>Cancel</li></a>
                <li class="select-roles">Done</li>
            </ul>
        </div>
    </div>
    <!-- modal-TV --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:00:49.933

试试这个脚本

```
 $(function () {
        function dumpInArray(){
           var arr = [];
           $('.modal-choices input[type="checkbox"]:checked').each(function(){
              arr.push($(this).val());
           });
           return arr; 
        }

        $('.select-roles').click(function () {
           dumpInArray();
        });
     }); 
```

单击“完成”后，它会选中所有选中的复选框`.select-roles`并在数组中返回它们的值

# python - argparse.ArgumentParser() 函数的描述参数

> ID：15795642
> 
> 赞同：1
> 
> 时间：2013-04-03T18:53:17.627
> 
> 标签：python, python-3.x, argparse

我有以下脚本：

```
import argparse

TEST_DESCRIPTION = """
This script issues the following commands:
    1\. Command1
    2\. Command2
    3\. Command3
"""

parser = argparse.ArgumentParser(description=TEST_DESCRIPTION)
args = parser.parse_args() 
```

打印（TEST_DESCRIPTION）

没有任何选项，输出与我预期的一样（带有适当的换行符和缩进）

```
# ./test2.py

This script issues the following commands:
    1\. Command1
    2\. Command2
    3\. Command3 
```

但是，当我使用“-h”选项时，似乎换行符和缩进在传递给 argparse.ArgumentParser() 时从 TEST_DESCRIPTION 中删除。

```
# ./test2.py -h
usage: test2.py [-h]

This script issues the following commands: 1\. Command1 2\. Command2 3\. Command3

optional arguments:
  -h, --help  show this help message and exit 
```

无论如何我可以保留 TEST_DESCRIPTION 的格式，因为它是在传递给 argparse.ArgumentParser() 时写入的。（我尝试将其设为原始字符串，插入 \n，但没有运气。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:59:37.317

您需要`RawTextHelpFormatter`，它就[在文档中](https://docs.python.org/3/library/argparse.html#formatter-class)：

```
parser = argparse.ArgumentParser(description=TEST_DESCRIPTION, 
                                 formatter_class=argparse.RawTextHelpFormatter) 
```

# google-maps-api-3 - 如何使用 RequireJS 加载 Google Maps API？

> ID：15795648
> 
> 赞同：45
> 
> 时间：2013-04-03T18:53:34.557
> 
> 标签：google-maps-api-3, requirejs, js-amd

我正在努力用 requireJS 加载 gmaps api。这是我尝试过的：

```
requirejs.config({
    urlArgs: "noCache=" + (new Date).getTime(),
    paths : {
        "jquery": "vendor/jquery-1.8.2.min",
        "bootstrap": "vendor/bootstrap.min",      
        "underscore": "libs/underscore-min",
        "backbone": "libs/backbone-min",    
        "template": "libs/template",
        "gmaps": "http://maps.google.com/maps/api/js?v=3&sensor=false"
    },
    shim: {
        'backbone': {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        'underscore': {
            exports: '_'
        },
        'bootstrap': {
            deps: ['jquery']
        },
        'gmaps': {
            deps: ['jquery']
        },
        'main':{
            deps: ['jquery','gmaps']   
        }
    }
});

require(["main"], function (main) {}) 
```

但是在 main.js 中，当我尝试实例化我得到的地理编码器时，未定义不是函数”错误。

```
var geocoder = new google.maps.Geocoder(); 
```

任何想法我可能做错了什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-03T19:40:37.787

我已经设法使用[异步](https://github.com/millermedeiros/requirejs-plugins)插件对其进行了整理。

一个简单的例子是：

```
require.config({
    paths: {
        'async': 'lib/requirejs-plugins/src/async'
    }
});

define(['async!http://maps.google.com/maps/api/js?sensor=false'], function() {
    // Google Maps API and all its dependencies will be loaded here.
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-14T14:50:08.377

感谢 user1706254 导致官方文档：[https](https://github.com/millermedeiros/requirejs-plugins/) ://github.com/millermedeiros/requirejs-plugins/使用的关键字'define'对我不起作用，但'require'工作正常。

我无法直接加载：

```
require(["goog!maps,3,other_params:sensor=false"], function(){}); 
```

但是使用异步方式就可以了：

```
require(['async!http://maps.google.com/maps/api/js?sensor=false'], function(){}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-10T06:26:13.783

您不需要异步插件即可将 Google 地图与 require.js 一起使用。只需使用简单的[shim](http://requirejs.org/docs/api.html#config-shim)配置即可实现该目标：

```
require.config({
    paths: {
        gmaps: '//maps.googleapis.com/maps/api/js?' // question mark is appended to prevent require.js from adding a .js suffix
    },
    shim: {
        gmaps: {
            exports: 'google.maps'
        }
    }
});

require(['gmaps'], function (gmaps) {
    var center = {lat: -34.397, lng: 150.644}; 
    var map = new gmaps.Map(document.getElementById('map'), {
        center: center,
        zoom: 8
    });
    new gmaps.Marker({
        map: map,
        position: center
    });
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>

<div id="map" style="width: 100%; height: 200px"></div>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-13T15:54:25.137

从 hjuster 开始，这里是一个如何使用[异步](https://github.com/millermedeiros/requirejs-plugins/tree/master/src)插件的快速示例

[https://gist.github.com/millermedeiros/882682](https://gist.github.com/millermedeiros/882682)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-18T12:13:04.103

还有`goog`插件（需要 async 和 propertyParser），在[github上可用](https://github.com/millermedeiros/requirejs-plugins)

谷歌地图的使用示例：

```
require(["goog!maps,3,other_params:sensor=false"], function(){}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-02T06:36:59.380

@hjuster 的回答引导我前进，我已经通过**回调函数**解决了。

```
define(['async!http://maps.google.com/maps/api/js?key=YOURKEY!callback'],
    function (_ExpectedMap) {
                              callback(); 
                           }); 
```

注意URL 末尾的**!callback以****async 开头！**, 加载操作完成时正在调用回调方法。

```
function callback()
{
    //Now load google maps API dependant libraries
    require(['gmapsLib'], function (googlemaps) {
                     window.GMaps = googlemaps;
                   }
} 
```

我最近注意到另一个[问题](https://stackoverflow.com/a/18081863/413032) ，另一个函数（onLoad）正在使用而不是回调来防止超时错误。有趣的。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-08-05T22:07:56.583

由于某种原因无法使插件工作，但这种解决方法挽救了我的一天：

```
 require(['https://apis.google.com/js/client.js?onload=doNothing'], function() {
    // Poll until gapi is ready
    function checkGAPI() {
      if (gapi && gapi.client) {
        self.init();
      } else {
        setTimeout(checkGAPI, 100);
      }
    }

    checkGAPI();
  });
}); 
```

只需`gapi`每 100 毫秒检查一次是否准备就绪，直到它最终加载。

在这篇文章中找到了代码[http://dailyjs.com/2012/12/06/backbone-tutorial-2/](http://dailyjs.com/2012/12/06/backbone-tutorial-2/)

我想你也可以试试

```
if (google && google.maps && google.maps.Geocoder) {
    // now google.maps.Geocoder is gonna be defined for sure :)
} 
```

# ios - 停止接收推送通知目标 c

> ID：15795651
> 
> 赞同：0
> 
> 时间：2013-04-03T18:53:42.877
> 
> 标签：ios, objective-c, push-notification, apple-push-notifications

我使用推送通知来提醒用户一些事件，但是当用户从应用程序注销时，它应该停止向该设备发送通知，但我无法检查每次我想发送任何通知是否用户已登录或注销我的数据库，是否有任何简单的方法可以避免将通知发送给已注销的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:56:55.803

> 有什么简单的方法可以避免将通知发送给已经注销的用户？

只需让您的应用程序通知您的服务器用户已注销。当用户再次登录时，让您的应用程序也告诉服务器。您的服务器应跟踪哪些用户已登录，哪些未登录。

换句话说，您*应该*在发送通知之前检查用户是否登录，但检查应该很容易，因为您应该已经将这些信息存储在您的服务器上。

# networking - 如果中间节点已经用路径回复了源，如何最小化 AODV 中 RREQ 数据包的泛滥？

> ID：15795654
> 
> 赞同：3
> 
> 时间：2013-04-03T18:53:48.720
> 
> 标签：networking

假设我们在 AODV 协议中有一个条件

*AODV（MANET 协议）中的 RREQ（路由请求）数据包继续移动到目的地，即使 TTL=1 的节点已经回复了路由请求。
例如，
n1、n2 和 n3 是 TTL=1 的 3 个节点，n2 回复源 S，但 n1 和 n3 已将 RREQ 数据包重新广播到目的地 D，这可能会在网络中造成不必要的泛洪。*

现在我想到了一个简单的解决方案来最小化这种泛滥，n2 还将广播另一个数据包，其中包含它已回复 S 到 D 的 RREQ 的信息，可能使用其中更高的目标序列号或包含与 RREQ 相同的广播 ID . 但它会制造另一个洪水泛滥的机会。那么，有没有什么方法可以让我们以更有效的方式最小化这个问题呢？

**注意：AODV 是移动 Ad-Hoc 网络系统中依赖表路由的反应式路由协议。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:05:34.233

这是一个研究课题。为此提供了几种解决方案。一个有效的解决方案是：
源节点第一次开始广播，TTL 值为 1。这个 RREQ 到达相邻节点，他们检查天气，它们包含目的地的更新路由。那些对目的地有更新路由的人用 RREP 回复，其余节点不能重新广播，因为 TTL 已过期。如果没有人有路由，RREQ 由源重新广播，增加一个 TTL=2 的值。这样，只有当节点没有到达目的地的路径时，才会重新广播 RREQ 数据包。
这种方法也增加了 RREQ 数据包的泛洪，但它是一个优化问题，仍然是解决这个问题的好方法之一。
希望现在清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:57:28.957

Aodv 协议中节点的条件只是检查接收数据包类型，如果它的 RREQ 意味着只是转发给它的所有邻居。如果你想最小化 RREQ，你可以在 Recvpacket() 函数中添加你的条件。更好的是你可以使用数字的啤酒花创造了一个新的条件。

# java - FragmentPagerAdapter 在第一页显示所有片段内容

> ID：15795655
> 
> 赞同：4
> 
> 时间：2013-04-03T18:53:49.163
> 
> 标签：java, android, android-fragments, android-viewpager, fragmentpageradapter

在内存中，我有一个项目列表，每个项目都有一个标题和一个 0..N 个块的列表（存储一些信息）。我知道我在内存中正确地创建了这个列表，因为我已经将整个结构输出到了命令行。

我有一个使用 ViewPager 来显示这些数据的活动。ViewPager 的每一页都是一个 Item，它充满了 Fragment，这些 Fragments 保存了 Item 的每个 Chunk 的信息。

按照我目前的编码方式，前两个项目的块显示在第一个项目下的第一页上。当页面滚动到第二页时，它是空的。当页面滚动到第 3 页时（我现在只有 3 个项目的列表供测试）它也显示一个空白页，但是，当页面返回到第 2 页时，它显示第 1 个项目的块. 然后，每次导航到第一页然后是第二页，第三页的块被新添加到现有列表中。如果有从第 2 页到第 3 页的导航并返回，则第 1 项的块将新添加到列表中。这可以通过不断增长的列表来完成。我不知道为什么它的行为不正常。

这是我的主要活动（包括 FragmentPagerAdapter）：

```
public class MyActivity extends FragmentActivity {
    MyPagerAdapter mPagerAdapter;
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Controller.setup();

        mPagerAdapter = new MyPagerAdapter(getSupportFragmentManager());

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mPagerAdapter);
    }

    public class MyPagerAdapter extends FragmentPagerAdapter {
        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = new MyFragment();

            Bundle args = new Bundle();
            args.putInt(MyFragment.POSITION, position);
            fragment.setArguments(args);

            return fragment;
        }

        @Override
        public int getCount(){
            return Controller.getAmount();
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return Controller.getItem(position).getTitle();
        }
    }
} 
```

Controller 非常简单，并按照您的预期返回信息。Controller.setup() 只是创建项目列表。

这是我的项目片段：

```
public class MyFragment extends Fragment {
    public final static String POSITION = "position";
    private int pos;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        pos = getArguments().getInt(POSITION);
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.fragment_item, container, false);

        Item item = Controller.getItem(pos);
        Iterator<Chunk> chunks = item.getChunks().iterator();
        FragmentManager manager = getFragmentManager();
        FragmentTransaction transaction = manager.beginTransaction();

        while(chunks.hasNext()){
            Chunk chunk = chunks.next();
            ChunkFragment entry = new ChunkFragment();

            Bundle args = new Bundle();         
            args.putString(ChunkFragment.INFO_ARG, chunk.getInfo());
            entry.setArguments(args);

            transaction.add(R.id.container, entry);
        }
        transaction.commit();

        return rootView;
    }
} 
```

最后是我的 Chunk 片段：

```
public class ChunkFragment extends Fragment {
    public static final String INFO_ARG = "Info";
    private String mInfo;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        Bundle args = getArguments();
        mInfo = args.getString(INFO_ARG);
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        //setup view
        ViewGroup rootView;

        rootView = (ViewGroup) inflater.inflate(R.layout.fragment_chunk, container, false);

        TextView infoView = (TextView) rootView.findViewById(R.id.info_text);
        infoView.setText(mInfo);

        return rootView;
    }
} 
```

我知道这是很多代码，但我不知道问题出在哪里。我已将其简化到最低限度，仅包括可能成为问题根源的操作。我也没有包含我的 XML 布局文件，但它们已经过测试并且工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:28:12.863

我对此不确定，但我相信您的问题可能与在 ViewPager 中的片段中实例化片段的困难有关。

[您可以考虑通过遵循嵌套片段的指导方针将](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)其取消资格作为一种可能性：这基本上归结为`getChildFragmentManager()`在要添加片段的片段上使用。

此外，您可能需要考虑扩展`FragmentStatePagerAdapter`，它可以更好地在它们的破坏和重新创建之间保持片段状态。

# sql - 在 oracle sql 中仅插入 1 行的更快方法

> ID：15795657
> 
> 赞同：3
> 
> 时间：2013-04-03T18:53:50.710
> 
> 标签：sql, oracle, insert

我有一个 group by 查询，它只返回 1 行 4 列。当我运行这个选择查询时，它需要 1-2 分钟，因为这个查询中涉及的表非常大（其中一个表有 6000 万条记录）但是当我在插入语句中使用这个查询时，它需要大约 10 分钟或更长时间。

有人能说出背后的原因吗？我只插入一行应该需要 1 分钟的时间，但为什么需要 10 分钟？还请提供一些建议来解决此类问题，因为在搜索时我主要是在寻找更快的批量插入方法。以下是供审查的查询结构

```
select col1, count(loan), sum(A), sum(B) 
from
(select 'dummy' as col1, X.loan, BT.A, BT.B,
row_number() over (partition by X.loan order by BT.C desc) rnum
from Big_Table BT, X
where X.loan = BT.loan
and  X.date<  "some date"
and X.date>"another date")
where rnum =1
and B> "some value"
group by col1 
```

对于 Big_Table 索引位于列 loan 和 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:32:36.803

此查询可能会更快地为您提供相同的结果：

```
SELECT "dummy", COUNT(BT.loan), SUM(BT.A), SUM(BT.B)
FROM Big_Table BT
JOIN (
  SELECT X.loan, max(BT.C) as C
  FROM X
  JOIN Big_Table BT ON X.loan = BT.loan
  WHERE X.date > "some date"
    AND X.date < "another date"
  GROUP BY X.loan ) partitioned
ON BT.loan = partitioned.loan AND BT.C = partitioned.C
WHERE BT.B > "some value" 
```

并确保您在 X 上为`loan`和`date`以及 Big_Table 上为`loan`、`C`和`B`.

# ruby-on-rails - wkhtmltopdf 在战争中不能从 wicked-pdf 执行

> ID：15795661
> 
> 赞同：1
> 
> 时间：2013-04-03T18:54:05.103
> 
> 标签：ruby-on-rails, jruby, wicked-pdf, warbler

我正在尝试使用来自 Ruby On Rails 的 wicked-pdf 创建一个 pdf。它在开发模式下运行良好，但是当我在生产中部署时出现错误：

```
wkhtmltopdf is not executable 
```

我的 wkhtmltopdf 可执行文件位于：

```
rails_root/bin/wkhtmltopdf-i386 
```

Warbler 设置为在战争中包含 bin 文件夹：

```
config.includes = FileList["classes/*","bin/*"] 
```

我已经配置了 wicked pdf 以在正确的位置找到垃圾箱：

```
WickedPdf.config = {
  :exe_path => Rails.root.join('bin', 'wkhtmltopdf-i386').to_s
} 
```

我运行 warbler，然后在 jBoss 应用服务器上部署战争。当我尝试生成 PDF 时，我收到关于它不可执行的错误。它在开发模式下运行良好 - 而不是在战争中。

二进制文件的权限应该没问题：

```
-rwxr-xr-x  1 username group 11446024 Apr  3 11:40 wkhtmltopdf-i386 
```

我没有手动包含 wkhtmltopdf 二进制文件，而是尝试使用 wkhtmltopdf-binary gem。这在开发模式下也可以正常工作，但 Wicked PDF 在生产中找不到二进制文件。

**更新：**在生产模式下，我将 wicked-pdf 配置更改为指向“wkhtmltopdf-binary”gem 提供的二进制文件。它也正在`wkhtmltopdf is not executable`出错。路径最终是：`jboss-5.1.0.GA/server/default/tmp/3j001-3g0fg5-hf2xi49o-1-hf2xiuld-9q/myrailsapp.war/WEB-INF/gems/gems/wkhtmltopdf-binary-0.9.9.1/bin/wkhtmltopdf_linux_386`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-29T22:08:19.120

您是单独安装 wkhtmltopdf 还是允许您的 gem 文件安装它？

我会做以下事情：

```
gem 'wicked_pdf', '~> 0.9.10'
gem 'wkhtmltopdf-binary', '~> 0.9.9' 
```

然后设置配置：

```
WickedPdf.config = {
  exe_path: "#{ENV['GEM_HOME']}/gems/wkhtmltopdf-binary-#{Gem.loaded_specs['wkhtmltopdf-binary'].version}/bin/wkhtmltopdf_linux_386"
} 
```

如果您要更改 gem 的版本，此位`#{Gem.loaded_specs['wkhtmltopdf-binary'].version}`会查询您的 gem 以查找当前版本，您的 prod 服务器仍然能够找到正确的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T13:02:33.040

**在Ubuntu 18.04上使用****Rails 5.2.3**应用程序时，我遇到了同样的问题。

 **显示的错误是这样的：

> Gem::Exception: 找不到 gem wkhtmltopdf-binary 的可执行 wkhtmltopdf。wkhtmltopdf-binary 当前未包含在捆绑包中，也许您打算将其添加到您的 Gemfile 中？

**这是我解决它的方法**：

我只是将[wkhtmltopdf-binary](https://rubygems.org/gems/wkhtmltopdf-binary) gem 添加到 Gemfile 中已经有[wkhtmltopdf-heroku](https://rubygems.org/gems/wkhtmltopdf-heroku)的生产组。

```
group :production do
 gem 'wkhtmltopdf-heroku'
 gem 'wkhtmltopdf-binary'
end 
```

然后安装gem

```
bundle install --without development test 
```

如果您在生产服务器上运行，请尽量安装 libxrender1 库，因为它是 wkhtmltopdf（用于渲染 PDF）的依赖项，以避免在渲染 PDF 时出现错误。

```
sudo apt-get install libxrender1 
```

就这样。

**我希望这有帮助****

# javascript - 使用 jQuery 删除特定的内联样式值。

> ID：15795668
> 
> 赞同：1
> 
> 时间：2013-04-03T18:54:29.993
> 
> 标签：javascript, jquery, css, styles

我想从任何可能出现的标签中删除特定的内联颜色样式。颜色的样式为 style="color: rgb(255, 102, 0);"。

我正在尝试仅使用 a 标签进行测试，但并没有走得太远。想法？不是 Jquery 人，所以我需要很多帮助:)。

```
 $('a[style="color: rgb(255, 102, 0)"]').remove('[style="color: rgb(255, 102, 0)"]');

    $('a[style="color: rgb(255, 102, 0)"]').remove();

    <a style="color: rgb(255, 102, 0)">not orange</a>

    <a style="color: rgb(255, 102, 0);">not orange</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:55:30.317

你可以使用这个：

```
$('a[style="color: rgb(255, 102, 0)"]').css('color', ''); 
```

但这仅在您的样式属性完全为`"color: rgb(255, 102, 0)"`.

如果您想要更可靠的东西，例如接受其他样式属性或 CSS 规则中指定的颜色，您必须过滤：

```
$('a').filter(function(){
   return $(this).css('color')=='rgb(255, 102, 0)'
}).css('color', ''); 
```

[示范](http://jsbin.com/ekebac/2/edit)

# nuget - 如何使用 Nuget.exe 更新包

> ID：15795671
> 
> 赞同：6
> 
> 时间：2013-04-03T18:54:56.310
> 
> 标签：nuget

对于我在 .NET 中的小示例项目（直接在命令行上构建而不使用 Visual Studio），我想直接使用`Nuget.exe`来检索我需要的库，而不必在源存储库中提交它们。

我已经能够使用命令安装它们

```
nuget install packages.config -o $destinationFolder 
```

在 a 中指定所需的包`packages.config`（如 Visual Studio 中的 Nuget）。但是，我无法更新已安装的软件包。我试过使用这个命令

```
nuget update packages.config -r $destinationFolder 
```

但`Nuget.exe`抱怨是

```
unable to locate project file for '...packages.config'`. 
```

我在互联网上搜索过，但我只在 Nuget 论坛中找到了一个[类似的问题，没有答案。](http://nuget.codeplex.com/discussions/282743)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:54:56.310

我已经阅读了 Nuget 项目中的相关源文件，我发现要使更新成功，`Nuget.exe`需要找到一个 Visual C#/Basic/F# 项目。

然后我在文件夹中创建了一个空`csproj`文件，我已经能够更新我之前安装的包。

我在[https://github.com/edymtt/nugetstandalone](https://github.com/edymtt/nugetstandalone)制作了一个小示例，展示了如何使用`Nuget.exe`. 我还使用了一种解决方法来确保只有最新版本的库保存在文件夹中。

**更新 2013-04-06 14:20 UTC**我已经更新了示例以显示如何使用[command的](http://docs.nuget.org/docs/reference/command-line-reference#Install_Command)[`-ExcludeVersion`标志`install`](http://docs.nuget.org/docs/reference/command-line-reference#Install_Command)来实现。

# facebook - 用于验证多个 facebook 访问令牌的 php 脚本

> ID：15795676
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:04.280
> 
> 标签：facebook, validation

我正在尝试找到一种方法来一次自动验证多个 facebook 访问令牌。

我将用户访问令牌存储到 sql 数据库中，并且（如预期的那样）一段时间后，某些令牌将过期或变为无效。（由于用户更改密码/取消授权的应用程序，注销等）

有没有办法检查/验证`.txt`文件/数据库中的所有访问令牌并删除那些无效的令牌：手动执行 100 多个令牌非常困难。

选项

1.  检查文件中的访问令牌`.txt`（使用 PHP）并同时删除无效令牌，以便最后我们将获得一个仅包含有效令牌的列表。

2.  直接从数据库中删除无效令牌。

有什么见解吗？

现在这已成为一个非常普遍的问题，不仅是我，而且我们大多数人仍然像我在此处发布之前所做的那样使用谷歌搜索，但没有人找到解决此问题的方法，我相信这是唯一的论坛事情可以解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:13:06.683

不，没有端点可以一次检查多个令牌。实现您想要的功能的最相似的方法是对[请求进行批处理](https://developers.facebook.com/docs/reference/api/batch/)。你应该很好地将它们分成 25 个一组。

因此，您的流程将是：从 SQL 数据库中获取 25 个令牌。`/me`使用每个令牌调用端点。IE，你的批量调用看起来像

> batch=[{"method":"GET","re​​lative_url":"me?fields=id&access_token=TOKEN1"},{"method":"GET","re​​lative_url":"me?fields=id&access_token=TOKEN2"} ,...,{"method":"GET","re​​lative_url":"me?fields=id&access_token=TOKEN25"}]

循环通过响应，如果它检查出来，你很好。如果抛出错误，则不是。相应地处理每个 access_token。回复的顺序与您给 Facebook 的顺序相同。

# netezza - Netezza 中的表和外部表有什么区别？

> ID：15795677
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:10.280
> 
> 标签：netezza

Netezza 中的表和外部表有什么区别？加载数据后是否总是在后端读取数据文件是否需要再次将数据从外部表复制到普通数据库表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:37:15.283

这在很多博客和技术网站中都有很好的介绍，比如这个：[http ://tennysusantobi.blogspot.no/2012/08/netezza-external-tables.html](http://tennysusantobi.blogspot.no/2012/08/netezza-external-tables.html)

基本上，外部表只是驻留在 Netezza 中的一个定义，允许它从（通常）本地文本文件中查询数据，而不必将它们物理地加载到 netezza 中的数据库中。也用于轻松导出数据（如链接中所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T06:47:29.300

表：定义和数据都驻留在数据库中。更准确地说，数据基于分布键物理存储在每个数据切片中。

外部表：只有表定义驻留在数据库中，而不是实际数据。数据驻留在文件本身中。它主要用于加载/卸载数据。它还可用于备份 netezza 表或将数据从一个 netezza 盒传输到另一个 netezza 盒。

# html - 使用html5上传在浏览器中录制的音频

> ID：15795678
> 
> 赞同：4
> 
> 时间：2013-04-03T18:55:11.657
> 
> 标签：html, forms, audio-recording

我是 HTML、Javascript 和公司的新手，所以请原谅我问了一个可能很明显的问题。

我想构建一个网络应用程序，用户可以在其中上传音频以及一些关于他们自己的信息。我有一个看起来像这样的表格：

```
<form method="post" action="/add_recording" enctype="multipart/form-data">
  <label>Name: </label>
  <input type="text" name="user_name" maxlength="20" size="20" value="Joe">
  <br>
  <label>Audio File: </label>
  <input type="file" name="user_audio"/>
  <br>
  <input value="Upload" type="submit">
</form> 
```

这行得通，但对用户不太友好：人们必须弄清楚如何创建自己的音频文件，即使他们知道如何创建，也很烦人。我想允许用户在浏览器中录制。我发现了[https://github.com/mattdiamond/Recorderjs](https://github.com/mattdiamond/Recorderjs)和[http://webaudiodemos.appspot.com/AudioRecorder/index.html](http://webaudiodemos.appspot.com/AudioRecorder/index.html)，它们看起来很酷（暂时忽略它们仅适用于最新版本的事实铬，据我所知）。

我的问题是：如何修改 recorderjs 代码，以便记录的 blob 自动上传到我的表单中，而无需用户下载文件并通过单击 type="file" 输入手动浏览到它？

我的网络开发技能非常有限，所以我会非常感谢任何帮助。我的第一个猜测是自动将音频 blob 下载到我选择的文件名，并修改表单中的 type="file" 输入以指向那里，但显然这是不可能的（从我在例如[如何设置值中看到的）到 HTML 中的文件输入？](https://stackoverflow.com/questions/1696877/how-to-set-a-value-to-a-file-input-in-html)）。

谢谢，

阿德里安

编辑：这里有一个类似的问题：[RecorderJS 通过 AJAX 上传记录的 blob](https://stackoverflow.com/questions/15014638/recorderjs-uploading-recorded-blob-via-ajax)。我的问题的一种解决方案是学习 AJAX 并遵循该问题的答案。不过，我很想知道是否有任何方法可以使用老式文件输入（或更一般的 html 表单）上传 recorderjs 音频。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-08T01:25:56.050

这就是我最终这样做的方式，以防这对其他人有帮助：

```
function uploadForm() {
    var form = new FormData(document.getElementById("my_form"));
    form.append("user_audio_blob", audioBlob);
    var request = new XMLHttpRequest();
    var async = true;
    request.open("POST", "/my_form_handler", async);
    if (async) {
        request.onreadystatechange = function() {
            if(request.readyState == 4 && request.status == 200) {
                var response = null;
                try {
                    response = JSON.parse(request.responseText);
                } catch (e) {
                    response = request.responseText;
                }
                uploadFormCallback(response);
            }
        }
    }
    request.send(form);
} 
```

这和对 recorderjs 代码的轻微修改以设置 audioBlob。当我最初发布问题时，我不知道 FormData 和 form.append。

# linux - 如何检测网络安全的流程采用情况

> ID：15795682
> 
> 赞同：1
> 
> 时间：2013-04-03T18:55:20.853
> 
> 标签：linux, pid

在一个网络安全项目中，我和我的队友遇到了以下潜在的安全风险：

恶意软件进程会生成一个子进程，而子进程又会生成一个孙子进程。孙子被授权访问，但我们想通过父链发现源进程。在这些进程被创建和安全检查之间，恶意软件进程杀死了它的子进程，而孙子进程现在避开了它的父链并直接连接到 init。

我想在安全检查时检测到这种行为并否认这种情况。我正在考虑记录已创建进程的所有 ppid，并检测并因此拒绝其 ppid 从创建更改为安全检查的所有进程。

这可行吗？如果没有，有什么关于检测流程采用的建议吗？

# mysql - 由 rails app 多次启动的 db 连接

> ID：15795686
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:29.213
> 
> 标签：mysql, ruby-on-rails

`Connecting to database specified by database.yml`我的 Rails 应用程序多次调用，即使 MySQL RDS 数据库实例已启动并运行。我该如何调试这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:44:38.247

哪个版本的 Rails？哪个版本的 MySQL gem？（您可以检查 Gemfile.lock 中的版本，或使用`bundle show`）。

在 database.yml 中，还有一个 pool 参数，它[指定应该建立多少 DB 连接](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)（以容纳使用同一数据库的多个线程）。默认情况下，这是 5。

# html - 跨浏览器音频到画布可视化

> ID：15795689
> 
> 赞同：1
> 
> 时间：2013-04-03T18:55:33.327
> 
> 标签：html, audio, html5-audio, web-audio-api, soundmanager2

我正在做一个将音频可视化到画布中的项目，到目前为止，我知道我必须使用 AudioAPI，比如 SoundManager 2 等，它有一个 Flash 后备。有一件事，我不想使用 Flash 后备（目前我只希望这种可视化在支持 HTML5 音频的现代浏览器中工作），因此我不确定是否应该使用它. 是否可以在没有任何外部资源的情况下实现跨浏览器可视化？或使用 SoundManager 2，但不知何故没有闪退？我是新手，能否请您概述我需要采取的步骤才能继续进行项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:09:31.163

没有。如果您不想要 Flash 后备，则没有跨浏览器的方法可以做到这一点。Chrome 和 Safari 有 Web Audio API，Firefox 有 Audio Data API（目前已弃用），但 IE 目前没有任何方法可以在没有插件的情况下操作音频。

# javascript - 如何防止PhoneGap设备就绪功能被执行两次

> ID：15795690
> 
> 赞同：2
> 
> 时间：2013-04-03T18:55:34.370
> 
> 标签：javascript, cordova, ripple

在我的应用程序中，我在加载 index.html 中的脚本文件时调用函数 init()。以下代码应验证 cordova 是否已成功加载（适用于现代手机，但也适用于较旧的 BlackBerries）并随后调用 onDeviceReady 函数。

我改编了 Jamie Munro 的“20 个 PhoneGap 编程食谱”中的代码，但它不能正常工作（intervalID 仅在本地可用）。后来发现 onDeviceReady 函数被多次调用......我尝试了几种方法来防止它，但即使是下面的示例在涟漪模拟器中运行时也不能解决问题。

我错过了什么？

```
var count = 0

function init() {

    // Add an event listener for deviceready
    document.addEventListener("deviceready", onDeviceReady, false);

    // Older versions of Blackberry < 5.0 don't support
    // PhoneGap's custom events, so instead we need to perform
    // an interval check every 500 milliseconds to see whether
    // PhoneGap is ready.  Once done, the interval will be
    // cleared and normal processing can begin.
    intervalID = window.setInterval(function() {
        if (window.cordova) {
            window.clearInterval(intervalID);
            onDeviceReady();
        }
    }, 1000);
}

function onDeviceReady() {

    if(count == 0) {
        count += 1;
        alert('The device is now ready');
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T21:03:41.367

Ripple 似乎加载页面一次以捕获 URL，然后在 iframe 中再次加载它以将其显示在模拟手机上。因此，所有内容的两个副本都会被加载，但会被加载到不同的文档中。由于我得到了包括按钮点击在内的所有事件的两个事件，所以我的代码的两个副本似乎都收到了相同的事件。或者，Ripple 可能会为另一个复制它。但是由于代码位于不同的文档和不同的范围内，它们似乎不会相互干扰（至少它们对我来说还没有）。也许其他人可以对我认为我检测到的内容给出更好、更有见地的解释。

# python - 使用 BeautifulSoup 获取下一个 UL 元素

> ID：15795692
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:36.827
> 
> 标签：python, beautifulsoup

我正在尝试在给定网页中找到下一个 ul 元素。

我首先将我的回复插入到 Beautiful Soup 中，如下所示：

```
soup = BeautifulSoup(response.context) 
```

打印出 response.context 给出以下内容

```
print(response.context)
<!DOCTYPE html>
<html>
    <head>
        <title> | FollowUp</title>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link href='/static/css/bootstrap.min.css' rel='stylesheet' media='screen'>
    </head>

    <body>
        <div class='navbar'>
            <div class='navbar-inner'>
                <a class='brand' href='/'>TellMe.cat</a>
                <ul class='nav'>
                    <li><a href='list'>My Stories</a></li>
                    <li><a href='add'>Add Story</a></li>
                    <li><a href='respond'>Add Update</a></li>
                </ul>

                <form class='navbar-form pull-right' action='process_logout' method='post'>
                    <input type='hidden' name='csrfmiddlewaretoken' value='RxquwEsaS5Bn1MsKOIJP8uLtRZ9yDusH' />
                    Hello add!
                    <button class='btn btn-small'>Logout</button>
                </form>

            </div>
        </div>

        <div class='container'>

<ul id='items'>
<ul>
<li><a href='http://www.example.org'>http://www.example.org</a></li>
<ul>
<p>There have been no follow ups.</p>
</ul>
</ul>
</ul>

        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src='/static/js/bootstrap.min.js'></script>

    </body>
</html> 
```

我正在尝试获取名为“项目”的 ul。我这样做：

```
items = soup.find(id='items') 
```

这给了我正确的 ul 及其所有孩子。然而调用

```
items.find_next('ul') 
```

给出的错误

```
TypeError: 'NoneType' object is not callable 
```

尽管这似乎是根据 Beautiful Soup 文档应该如何称呼它：[https ://beautiful-soup-4.readthedocs.org/en/latest/#find-all-next-and-find-next](https://beautiful-soup-4.readthedocs.org/en/latest/#find-all-next-and-find-next)

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:16:03.400

制作一个[virtualenv](https://pypi.python.org/pypi/virtualenv) , `pip install BeautifulSoup requests`, 打开 python 控制台。

```
import BeautifulSoup
import requests

html = requests.get("http://yahoo.com").text
b = BeautifulSoup.BeautifulSoup(html)
m = b.find(id='masthead')
item = m.findNext('ul') 
```

`dir(m)`告诉你关于`m`. 你可以看到你想要`findNext`的。

您还可能会发现[ipython](http://ipython.org/)是一个更宽容的 shell 来运行 python。您可以键入变量的名称并点击 Tab 以查看成员变量。

# pdf-generation - jsPDF呈现一个简单的字符串

> ID：15795693
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:37.287
> 
> 标签：pdf-generation, jspdf

我正在浏览jsPDF。虽然它看起来像是一个很好的库，但它缺少很好的文档。

我写了一个非常简单的代码，但它似乎没有打印任何东西。每次它生成一个空白的pdf。以下是我的代码，如果有人有任何想法，请帮助我。

```
<script>
$(document).ready(function() {
var pdf = new jsPDF('p','in','a4')  
pdf.setFontSize(40);
pdf.text(35,25,'vvdfv sdv sdf sfdsf df sfsf')
pdf.save('dynamic pdf-examples.pdf');
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:32:30.177

这里的问题是您已将单位设置为英寸，而 35 英寸则离页面很远。你可以改变你的测量单位（也许是毫米？）或降低数字。

你对文档的看法是正确的——这是我很快就会着手处理的事情。

# java - 从 JSON 对象获取二进制数据

> ID：15795694
> 
> 赞同：0
> 
> 时间：2013-04-03T18:55:38.347
> 
> 标签：java, android, json

我从 RESTful 服务接收此响应并将其保存到 JSONObject：

```
{
    "GetCampaignsInProgressListResult": [
        108,
        162,
        171,
        103,
        185,
        147,
        218,
        16,
        67,
        226,
        44,
        // etc etc
    ]
} 
```

上面的数据代表一个二进制数组。我正在尝试使用以下代码阅读它：

```
String rawResponse = client.getResponse();
JSONArray entries = null;
JSONObject o = new JSONObject(rawResponse);
entries = new JSONArray(o.getString("GetCampaignsInProgressListResult")); 
```

我想访问二进制数据并将其保存到字节数组中，但由于它没有属性名称，我无法使用：

```
for (int i = 0; i < entriesLength; i++) {
    JSONObject entry = entries.getJSONObject(i);
    Object something = entry.getString("SomeTag");
} 
```

如何访问二进制数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:01:10.680

试试这个：

```
 String rawResponse = client.getResponse();
    JSONArray entries = null;
    JSONObject o = new JSONObject(rawResponse);
    entries = new JSONArray(o.getString("GetCampaignsInProgressListResult"));
    byte[] bArr = new byte[entries.length()];
    for (int i = 0; i < entries.length(); i++) {
        bArr[i] = (byte) entries.getInt(i);
    } 
```

# c++ - 有没有办法在下一个命令之前等待最后一个命令到 GPU？

> ID：15795695
> 
> 赞同：1
> 
> 时间：2013-04-03T18:55:40.733
> 
> 标签：c++, opengl, glut

我在显示中有以下代码：（它是整个显示函数，并且空闲函数中的数据发生了变化）

```
glClear(GL_COLOR_BUFFER_BIT);
glDrawPixels(100,100,GL_RGBA,GL_FLOAT,data);
glutSwapBuffers();
glutPostRedisplay(); 
```

当我编译这段代码时，有时它会闪烁与背景相同的颜色。我认为GPU在清除颜色之前捕获了drawpixel，并清除了缓冲区。

我可以在清除和平局之间延迟，但我`data`几乎在每一帧之间都会改变。
我该怎么办？有类似命令的冲洗吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:07:05.587

我怀疑您忘记在`glutInitDisplayMode()`调用中指定 GLUT_DOUBLE，因此获得了非双缓冲上下文。

此外，`glutPostRedisplay()`在您的显示功能中包含 a 是不习惯的——它应该在您的空闲功能的末尾。

# html - 数据图标在 Firefox/Chrome 中不起作用

> ID：15795697
> 
> 赞同：1
> 
> 时间：2013-04-03T18:55:41.000
> 
> 标签：html, css

知道为什么这在 Safari 中有效，但在 Firefox 和 Chrome 中无效？

HTML：

```
<input type="search" placeholder="Search" id="search" name="search" id="s" data-icon="s"> 
```

CSS：

```
#search[data-icon]:before {
    font-family: 'Pictos Custom';
    content: attr(data-icon);
    -webkit-font-smoothing: antialiased;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:00:31.230

请记住，您不能在[替换元素](https://stackoverflow.com/questions/8012297/html5-non-replaced-vs-replaced-element)上使用伪元素，其中包括`<img>` `<select>` `<input>` `<object>`等。基本上没有 [内容的元素](http://www.red-team-design.com/css-generated-content-replaced-elements)

有关详细信息，请参阅[2.1 规范中的视觉格式模型](http://www.w3.org/TR/CSS2/visudet.html#block-replaced-width)

# objective-c - 如何在Objective-c中将对象的属性转换为字符串

> ID：15795698
> 
> 赞同：1
> 
> 时间：2013-04-03T18:55:49.393
> 
> 标签：objective-c, nsstring

是否可以在 Objective-c 中执行以下操作？

```
 NSString *propertyName = NSStringFromSelector(aPerson.personName); 
```

`propertyName`会有字符串`personName`；

我想把它归为`NSObject`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:12:15.093

获取一个类的所有属性名

```
- (NSMutableArray *)getAllPropertyOfClass:(Class)aClass {
    NSMutableArray *mArray=[NSMutableArray new];
    unsigned int outCount;
    objc_property_t *properties = class_copyPropertyList([aClass class], &outCount);
    for(unsigned int i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];
        const char *propName = property_getName(property);
        if(propName) {
            NSString *propertyName = [NSString stringWithUTF8String:propName];
                mArray[mArray.count]=propertyName;
        }
    }
    free(properties);
    return mArray;
} 
```

# regex - Perl：如何匹配不在给定字符串中的字符串

> ID：15795702
> 
> 赞同：0
> 
> 时间：2013-04-03T18:56:04.800
> 
> 标签：regex, perl

我未能成功尝试按照某些网站的说明执行以下操作：

我想匹配任何不在以 <% %> 开头/结尾的字符串内的“（引号）并将其更改为 \”

例如：

```
<p class="paragraph"><% print "Hello"; %></p> 
```

应该输出：

```
<p class=\"paragraph\"><% print "Hello"; %></p> 
```

字符串可能有几个标签和几个 <% %> 部分......

我最好的比赛是这样的：

```
/<%([^%>]+)%>/ 
```

然而，它似乎并没有按照我需要的方式工作......

太感谢了...

# javascript - 需要帮助使用 Jquery 脚本更改幻灯片的速度持续时间

> ID：15795705
> 
> 赞同：0
> 
> 时间：2013-04-03T18:56:28.647
> 
> 标签：javascript, jquery, performance, slideshow, cycle

所以首先我基本上没有 javascript 或 Jquery 的工作知识。其次，我试图查找此问题的答案并尝试了一些方法，但对我没有任何帮助。

我的幻灯片似乎每 6 或 7 秒更换一次。我想让每张幻灯片持续更长时间。也许在改变之前大约 12 秒。我尝试更改速度和超时值，并为暂停功能添加鼠标悬停，但没有任何效果。

这是内置在 Web 模板中的代码。上半部分看起来是用于管理员编辑，而底部是一般页面视图。对此的任何帮助将不胜感激。

```
jQuery.noConflict();     
jQuery(document).ready(function($){

// Checks for Admin to apply fixes for backend
if ( $('#adminbar #toolbar').length ) {

    $('#features').cycle({
        fx: 'scrollRight',
        speed: 100,
        next: '#next',
        prev: '#prev',
        timeout: 0
    });
    $("#controls").show();
    $("ul#featuredNav").css({
        'margin-top': '-38px'
    });
    $("ul#featuredNav li").css({
        'margin': '-20px 0 90px',
        'padding': '0 0 0 20px'
    });
    $("#featuredWrapper").css({
        'margin': '0 0 80px'
    });
}
else {

    $('#features').cycle({
        fx: 'scrollRight',
        pager:  '#featuredNav',
        speed: 500,
        timeout: 6000,        
        pagerAnchorBuilder: function(idx, slide) {
            // return selector string for existing anchor
            return '#featuredNav li:eq(' + idx + ')';
        },
        updateActivePagerLink: function(pager, currSlideIndex) {
            $(pager).find('li').removeClass('activeTab')
                .filter('li:eq('+currSlideIndex+')').addClass('activeTab');
        }
    });
    $("#controls").hide();
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:58:36.547

改变

```
timeout: 6000, 
```

到

```
timeout: 12000, 
```

然后清除您的浏览器*和*站点缓存。

# iphone - 读取本地 webarchive 文件 - 偶尔 - 返回 null WebResourceData

> ID：15795713
> 
> 赞同：0
> 
> 时间：2013-04-03T18:56:50.837
> 
> 标签：iphone, ios, plist, webarchive

阿罗哈，

我在 iOS 6.1.3 读取 webarchive 文件时遇到了一个问题，其中 -**偶尔**- WebResourceData 返回空值。

这些是存储在包中的已知良好文件（在 TextEdit 中创建），通常可以正常读取。只是每隔一段时间，他们就不会。

在下面显示的简单测试中，我一遍又一遍地读取 3 个不同的文件，直到发现错误。对于 iOS 6.1.3，每次运行测试时，我都会遇到 1 到 200 次迭代之间的错误。我已经在各种设备和模拟器上运行了它，结果相同。

```
 // trying to find out why reading webarchives occasionally
    // returns with empty WebResourceData from known good files.
    //
    - (BOOL) testMe {

        NSMutableDictionary *plist = [[NSMutableDictionary alloc] initWithCapacity:100] ;

        int iteration = 1;

        BOOL  ok = TRUE;

        // keep going until we have an error
        while (ok) {

            NSArray *fileNames = @[@"file1",
                                   @"file2",
                                   @"file3" ];

            // LOOP through the webArchives...
            //
            for (NSString *webarchiveName in fileNames) {

                // get the webarchive template
                //
                NSURL *fileURL = [[NSBundle mainBundle] URLForResource:webarchiveName withExtension:@"webarchive"];
                //
                NSData *plistData = [NSData dataWithContentsOfURL:fileURL];
                NSString *error;
                NSPropertyListFormat format;
                //
                plist = (NSMutableDictionary *)[NSPropertyListSerialization propertyListFromData:plistData
                                                                              mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                                                                          format:&format
                                                                                errorDescription:&error];
                // check to see if it loaded
                //
                //
                if(!plist){

                    NSLog(@"ERROR: did not load %@", webarchiveName);

                }else{

                    NSData *foundWebResourceData = [[plist objectForKey:@"WebMainResource"] objectForKey:@"WebResourceData"];
                    NSString *foundHTML = [NSString stringWithUTF8String:[foundWebResourceData bytes]];

                    if (foundHTML == NULL) {
                        NSLog(@"      %@ descr = %@", webarchiveName, foundHTML);

                        [errorOutlet setText:[NSString stringWithFormat:@"%@ returned with no content (null) in WebResourceData", webarchiveName]];

                        ok = FALSE;
                    }
                } //---- end of if plist exists

            }  // loop through all 3 files

            [countOutlet setText:[NSString stringWithFormat:@"%d", iteration]];
            ++ iteration;

        }  // keep looping until error

        return ok;

    }  // end of testMe 
```

错误显示在这两行中：

```
 NSData *foundWebResourceData = [[plist objectForKey:@"WebMainResource"] objectForKey:@"WebResourceData"];
    NSString *foundHTML = [NSString stringWithUTF8String:[foundWebResourceData bytes]]; 
```

但这并不一致。我通过创建一个新的 xcode 项目来隔离代码，这是唯一的活动，而不是显示迭代计数和重新测试按钮。文件总是加载，并且总是有一个带有 WebResourceData 键的 WebMainResource。

一个可能的线索是，如果我将代码插入到 ViewDidLoad 中，它会运行更多次迭代，但仍会找到空值。从按钮操作中调用 [self testMe] 会更快地出现错误……不知道为什么。

我有点不知所措，希望这不是 iOS 错误，而是我缺少的一些基本的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:57:35.230

您可以尝试使用为读取 NSData 而设计的 NSString 初始化程序：

```
NSString *foundHTML = [[NSString alloc] initWithData:foundWebResourceData encoding:NSUTF8StringEncoding]; 
```

# python - matplotlib 密集数据集的主要显示问题

> ID：15795720
> 
> 赞同：4
> 
> 时间：2013-04-03T18:57:07.337
> 
> 标签：python, matplotlib

我在 matplotlib 和 Python 上遇到了一个相当严重的问题。我有一个密集的周期图数据集并想要绘制它。问题是，当一个像素上的数据点多于可以绘制的数据点时，程序包不会选择要显示的最小值和最大值。这意味着随便看一下情节可能会导致您得出错误的结论。

以下是此类问题的示例：
![例子](https://i.stack.imgur.com/UEBUI.png)

数据集被绘制`plot()`并`scatter()`覆盖。您可以看到，在密集的数据字段中，连接数据的蓝线没有达到实际峰值，导致人类观察者得出结论，约 2.4 处的峰值是最大值，而实际上并非如此。

如果您放大或强制使用宽查看窗口，它会正确显示。 `rasterize`和`aa`关键字对问题没有影响。

有没有办法确保`plot()`始终呈现呼叫的最小/最大点？否则，这需要在 matplotlib 的更新中解决。我从未有过这样的绘图包，这是一个非常重要的问题。

编辑：

```
x = numpy.linspace(0,1,2000000)
y = numpy.random.random(x.shape)
y[1000000]=2

plot(x,y)
show() 
```

应该复制问题。虽然它可能取决于您的显示器分辨率。通过拖动并调整窗口大小，您应该会看到问题所在。一个数据点应该突出ay=2，但这并不总是显示出来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T15:13:42.520

这是由于 matplotlib 中的路径简化算法。虽然在某些情况下它肯定是不可取的，但它是加速渲染的故意行为。

简化算法在某些时候进行了更改，以避免跳过“异常”点，因此新版本的 mpl 不会表现出这种确切的行为（尽管路径仍然被简化）。

如果您不想简化路径，则可以在 rc 参数中禁用它（在您的`.matplotlibrc`文件中或在运行时）。

例如

```
import matplotlib as mpl
mpl.rcParams['path.simplify'] = False
import matplotlib.pyplot as plt 
```

但是，使用“信封”样式的图可能更有意义。举个简单的例子：

```
import matplotlib.pyplot as plt
import numpy as np

def main():
    num = 10000
    x = np.linspace(0, 10, num)
    y = np.cos(x) + 5 * np.random.random(num)

    fig, (ax1, ax2) = plt.subplots(nrows=2)
    ax1.plot(x, y)
    envelope_plot(x, y, winsize=40, ax=ax2)
    plt.show()

def envelope_plot(x, y, winsize, ax=None, fill='gray', color='blue'):
    if ax is None:
        ax = plt.gca()
    # Coarsely chunk the data, discarding the last window if it's not evenly
    # divisible. (Fast and memory-efficient)
    numwin = x.size // winsize
    ywin = y[:winsize * numwin].reshape(-1, winsize)
    xwin = x[:winsize * numwin].reshape(-1, winsize)
    # Find the min, max, and mean within each window 
    ymin = ywin.min(axis=1)
    ymax = ywin.max(axis=1)
    ymean = ywin.mean(axis=1)
    xmean = xwin.mean(axis=1)

    fill_artist = ax.fill_between(xmean, ymin, ymax, color=fill, 
                                  edgecolor='none', alpha=0.5)
    line, = ax.plot(xmean, ymean, color=color, linestyle='-')
    return fill_artist, line

if __name__ == '__main__':
    main() 
```

![在此处输入图像描述](https://i.stack.imgur.com/xBZJ5.png)

# asynchronous - 将异步函数的完成链接到另一个

> ID：15795728
> 
> 赞同：0
> 
> 时间：2013-04-03T18:57:44.213
> 
> 标签：asynchronous, windows-8, windows-store-apps, c++-cx, ppl

我正在开发一个 Windows Store (C++) 应用程序。这是一种使用 Web 服务从数据库中读取数据的方法。

```
task<std::wstring> Ternet::GetFromDB(cancellation_token cancellationToken)
{
    uriString = ref new String(L"http://myHost:1234/RestServiceImpl.svc/attempt");
    auto uri = ref new Windows::Foundation::Uri(Helpers::Trim(uriString));
    cancellationTokenSource = cancellation_token_source();
    return httpRequest.GetAsync(uri, cancellationTokenSource.get_token()).then([this](task<std::wstring> response)->std::wstring
    {
        try
        {
            Windows::UI::Popups::MessageDialog wMsg(ref new String(response.get().c_str()), "success");
            wMsg.ShowAsync();
            return response.get();
        }
        catch (const task_canceled&)
        {
            Windows::UI::Popups::MessageDialog wMsg("Couldn't load content. Check internet connectivity.", "Error");
            wMsg.ShowAsync();
            std::wstring abc;
            return abc;
        }
        catch (Exception^ ex)
        {
            Windows::UI::Popups::MessageDialog wMsg("Couldn't load content. Check internet connectivity.", "Error");
            wMsg.ShowAsync();
            std::wstring abc;
            return abc;
        }
    } , task_continuation_context::use_current());
} 
```

我很困惑如何将接收到的数据返回给调用函数。现在，我在我的数据类的构造函数中调用这个函数，如下所示：

```
ternet.GetFromDB(cancellationTokenSource.get_token()).then([this](task<std::wstring> response)
{
    data = ref new String(response.get().c_str());
}); 
```

每当我尝试从 GetFromDB() 接收返回的数据时，都会收到 COM 异常。但是这个运行良好：

```
ternet.GetFromDB(cancellationTokenSource.get_token()); 
```

请提出一种将 GetFromDB 的完成链接到其他代码的更好方法。以及如何从 GetFromDB() 的 try{} 块中获取返回值。请记住，我是异步编程的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T16:17:13.233

如果调用的继续`GetFromDB`发生在 UI 线程上（我相信默认情况下会发生这种情况，假设您粘贴的调用站点发生在 UI 线程中），那么调用`get()`返回的`task`将引发异常。它不会让您阻塞等待任务完成的 UI 线程。

两个建议，其中任何一个都应该解决这个问题。无论如何，第一个应该可以工作，而第二个只是一个不错的选择，如果您不尝试将响应字符串获取到 UI 线程（例如，要显示）。

1）编写你的延续（你传递给的lambdas `then`），以便它们获取上一个任务的实际结果，而不是上一个任务本身。换句话说，而不是这样写：

```
ternet.GetFromDB(...).then([this](task<std::wstring> response) { ... }); 
```

写这个：

```
ternet.GetFromDB(...).then([this](std::wstring response) { ... }); 
```

与后者的不同之处在于，延续机制将调用`get()`您（在后台线程上），然后将结果提供给您的延续函数，这在所有方面都容易得多。如果您想捕获任务在执行时可能引发的异常，您只需要让您的延续将实际任务作为参数。

2）告诉它在后台/任意线程上运行您的延续：

```
ternet.GetFromDB(...).then([this](task<std::wstring> response) { ... }, task_continuation_context::use_arbitrary()); 
```

它不会关心你是否阻塞了后台线程，它只关心你是否调用`get()`UI 线程。

# javascript - Javascript 设置/清除间隔不起作用

> ID：15795730
> 
> 赞同：3
> 
> 时间：2013-04-03T18:58:04.040
> 
> 标签：javascript

如何在javascript中停止间隔？

为什么间隔不停止？

```
setInterval(alarm, 500);
window.clearInterval(alarm); 
```

也试过：

```
window.setInterval(alarm, 500);
window.clearInterval(alarm); 
```

总是同样的问题:(

仍然不起作用：

```
var switc = 1;
getValue();
function getValue (){
if(switc == 1){
    var myTimer = window.setInterval(alarm, 500);
}
else if(switc == 0){
    window.clearInterval(myTimer);
}
}
function alarm(){
    console.log("test");
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T19:00:30.707

当您调用 setInterval 时，它会返回一个整数，用于取消事件。将其存储到变量中并使用该变量取消事件。

```
var myTimer = window.setInterval(alarm, 500);
window.clearInterval(myTimer); 
```

编辑：

您的代码不起作用，因为 myTimer 是一个局部变量，并且每次调用该函数时都会重置！

使其全球化。

```
var myTimer = null;
function getValue (){
    if(switc == 1){
        myTimer = window.setInterval(alarm, 500);
    }
    ... 
```

* * *

## MDN 文档：[**window.setInterval**](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

**句法**

```
var intervalID = window.setInterval(func, delay[, param1, param2, ...]);
var intervalID = window.setInterval(code, delay); 
```

在哪里

*   `intervalID`是可以传递给 clearInterval() 的唯一间隔 ID。
*   `func`是您要重复调用的函数。
*   `code`在替代语法中，是您希望重复执行的代码字符串（不推荐使用此语法，原因与使用 eval() 相同）
*   `delay`是 setInterval() 函数在每次调用 func 之前应该等待的毫秒数（千分之一秒）。与 setTimeout 一样，强制执行最小延迟。请注意，在第一种语法中将附加参数传递给函数在 Internet Explorer 中不起作用。如果您想在该浏览器上启用此功能，您必须使用兼容性代码（请参阅回调参数段落）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:00:46.450

该代码表明对 API 的误解。该`setInterval()`函数有两个参数：一个要调用的函数和一个表示调用之间毫秒数的数字。该函数**返回**一个标识该特定间隔计时器的令牌（一个数字）。可以传递令牌`clearInterval()`以取消计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:00:54.653

您正在尝试清除不存在的间隔。将 setInterval() 返回的 id 分配给一个变量，并在 clearInterval() 中使用它。

在您的情况下，警报是执行的功能，而不是间隔ID

```
var interval = setInterval(alarm, 500);
clearInterval(interval); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T19:01:56.970

```
var timer = setInterval(alarm, 500);
Window.clearInterval(timer);

function alarm() {
    // Do stuff
} 
```

您需要将间隔句柄保存到变量中，以便稍后在您想要清除/停止它时引用它。

# version-control - 有没有办法以编程方式从 TortoiseSVN 中提取/获取项目列表？

> ID：15795731
> 
> 赞同：1
> 
> 时间：2013-04-03T18:58:09.893
> 
> 标签：version-control, tortoisesvn, svn-api

我查看了 TortoiseSVN 文档，即使可能也没有找到任何东西，但我想我把问题抛在了那里。你能以编程方式从 svn 中提取/获取项目列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:08:13.163

我会说，是的，你可以通过两种方式。

*   由于 TorroiseSVN 只是一个用于颠覆的 UI 客户端，因此您需要将 svn 作为一个带有一些参数的进程启动，例如：svn list --verbose。

在 Windows 上看起来像：

```
ShellExecute(0, 0, L"svn list --verbose", 0, 0 , SW_SHOW ); 
```

看看 svn 的 API：[http ://svnbook.red-bean.com/en/1.7/svn.developer.usingapi.html](http://svnbook.red-bean.com/en/1.7/svn.developer.usingapi.html)

*   在这里，您可以直接获得 TortoiseSVN 的 API（自动化）：http: [//tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html)，例如

> 示例（应输入一行）：
> 
> TortoiseProc.exe /command:commit /path:"c:\svn_wc\file1.txt*c:\svn_wc\file2.txt" /logmsg:"测试日志信息" /closeonend:0
> 
> TortoiseProc.exe /command:update /path:"c:\svn_wc\" /closeonend:0
> 
> TortoiseProc.exe /command:log /path:"c:\svn_wc\file1.txt" /startrev:50 /endrev:60 /closeonend:0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:18:40.167

TortoiseSVN 不打算以这种方式使用 - 它是一个 GUI 客户端，一个 Windows Explorer shell 扩展。如果您需要使用 Subversion 使事情自动化，请使用`svn.exe`（从 1.7 开始随 TSVN 一起安装，或者您可以在其他地方获得它）、类似[SharpSVN](http://sharpsvn.open.collab.net/)的库或直接使用 TSVN DLL（可能是最不受欢迎的方法）

但是，请记住，Subversion 没有“项目”的概念——它只是一个版本化的目录结构。您将意义应用于您在存储库中创建的结构。

# ruby-on-rails - 缓存不同的动作输出（rails）

> ID：15795732
> 
> 赞同：1
> 
> 时间：2013-04-03T18:58:10.217
> 
> 标签：ruby-on-rails, caching, optimization

我们有一个返回搜索项的操作“搜索”（每页 40 个）

我们要缓存前 5 个页面 - （我们是一个请求参数 'cur_page'）。

我们如何在 Rails 中做到这一点？似乎标准的索引缓存/片段缓存在这里无济于事。

我们是否需要为每页创建一个索引并从“搜索”重定向到它并缓存该操作？

我们可以这样做吗？在重定向的操作中，我们将呈现原始的“搜索”？

有没有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:52:18.090

您可以通过提供自定义缓存键来使用片段缓存。关键字应由所有有影响的参数组成，如页码和搜索查询。

```
cache('key-name') do
  ...
end 
```

请参阅[此处了解更多信息](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)。

# windows - vbs自动脚本

> ID：15795734
> 
> 赞同：0
> 
> 时间：2013-04-03T18:58:15.277
> 
> 标签：windows, vbscript, automation

是否可以创建一个 vbs 脚本，当某个 pc 操作被激活时调用自己，比如说打开浏览器？副本将是某人打开浏览器，然后 vbs 侦听此活动并自行运行或调用另一个 vbs脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:58:56.630

Jimmy，如果您希望在打开浏览器窗口时执行代码，请考虑以下代码：

```
Set obj0 = createobject("wscript.shell")
Dim Count
Count = 0
Do while count = 0
If obj0.appactivate("browserwindowtitle") then
-------do something----
----
----
Count = 1
Else
Wscript.sleep(10000)
Count = 0
End if
Loop
Set obj0 = nothing 
```

上面的代码将检查标题为“browserwindowtitle”的窗口是否打开。如果它是打开的，它将执行所需的操作。如果窗口未打开，脚本将等待 10 秒，然后重试。

编写脚本后，转到控制面板-> 计划任务并在启动时按计划添加脚本。当您这样做时，脚本将在您的 PC 打开时开始执行，并将继续检查浏览器窗口是否打开。

会有更简单的方法来做到这一点，其他人可能会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T21:31:30.813

您可能想尝试一下 System Scheduler。

[http://www.splinterware.com/products/wincron.htm](http://www.splinterware.com/products/wincron.htm)

# ruby - 在 Ruby 的 if 语句中检查 bash 命令

> ID：15795736
> 
> 赞同：6
> 
> 时间：2013-04-03T18:58:26.730
> 
> 标签：ruby

如何在 Ruby 的 if 语句中检查 bash 命令的返回值（真/假）。我想要这样的工作，

```
if ("/usr/bin/fs wscell > /dev/null 2>&1")
                has_afs = "true"
        else
                has_afs = "false"
        end 
```

它抱怨以下错误含义，它将始终返回true。

```
 (irb):5: warning: string literal in condition 
```

什么是正确的语法？

更新 ：

```
 /usr/bin/fs wscell 
```

寻找`afs`安装和运行状况。它会抛出这样的字符串，

```
 This workstation belongs to cell <afs_server_name> 
```

如果`afs`未运行，则命令以状态 1 退出

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:02:25.513

你想要反引号而不是双引号。检查程序的输出：

```
has_afs = `/usr/bin/fs wscell > /dev/null 2>&1` == SOMETHING ? 'true' : 'false' 
```

在 SOMETHING 中填写了您要查找的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T19:07:09.050

您可能应该使用 system() 或 Backticks**然后检查命令的退出状态 ($?.exitstatus)**：

[这是一个很好的快速提示阅读： http](http://rubyquicktips.com/post/5862861056/execute-shell-commands) ://rubyquicktips.com/post/5862861056/execute-shell-commands ）

更新：

```
system("/usr/bin/fs wscell > /dev/null 2>&1")  # Returns false if command failed
has_afs = $?.exitstatus != 1  # Check if afs is running 
```

# c# - 如何在 SQL、access 中执行以下操作？

> ID：15795741
> 
> 赞同：1
> 
> 时间：2013-04-03T18:58:59.377
> 
> 标签：c#, sql, ms-access

我有以下查询

```
SELECT dictionaryEncryptedIndex, filelocation FROM  `DictionaryTable`
 WHERE  `dictionaryEncryptedWord` LIKE '0x0E6E'"; 
```

在 c# 中，我循环遍历上述查询的结果，并且对于每个循环迭代，我使用以下查询来获取最终结果：

```
SELECT * FROM  `MaskedIndexTable` 
 WHERE  `maskedIndexEncryptedIndex`
  LIKE '" + dictionaryEncryptedIndexFROMABOVEQUERY + "'
   AND `fileLocation` = '" + filelocationFROMABOVEQUERY + "'"; 
```

dictionaryEncryptedIndex 和 maskedIndexEncryptedIndex 之间的关系不是一对一的关系。

有谁知道如何在一个可以在 Microsoft Access 中使用的 SQL 查询中执行上述操作？

我尝试了多种方法，例如：

```
SELECT  * from DictionaryTable, MaskedIndexTable
  WHERE MaskedIndexTable.maskedIndexEncryptedIndex = DictionaryTable.dictionaryEncryptedIndex 
    AND  MaskedIndexTable.fileLocation =DictionaryTable.fileLocation
    AND `dictionaryEncryptedWord` LIKE '0x0E6E' 

SELECT dictionaryEncryptedWord, DictionaryTable.filelocation
  FROM DictionaryTable
 INNER JOIN MaskedIndexTable
    ON (MaskedIndexTable.maskedIndexEncryptedIndex =DictionaryTable.dictionaryEncryptedIndex  )
 WHERE  `dictionaryEncryptedWord` LIKE '...' 

SELECT distinct *
  FROM MaskedIndexTable
 INNER JOIN DictionaryTable 
    ON (MaskedIndexTable.maskedIndexEncryptedIndex = DictionaryTable.dictionaryEncryptedIndex  )
 WHERE   MaskedIndexTable.Id IN  
(
    SELECT DictionaryTable.Id
      FROM  DictionaryTable
     WHERE  `dictionaryEncryptedWord` LIKE '..') 
   AND  `dictionaryEncryptedWord` LIKE '...' 
```

但它们似乎都没有产生正确的结果（我用我的 c# 代码得到的结果）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:22:08.307

如果您想在 LIKE 条件中使用通配符，则需要更改此设置。

首先在 Access 中创建一个类似于您的第一个查询的查询`encryptedWordsQuery`

```
SELECT DictionaryTable.dictionaryEncryptedIndex, DictionaryTable.fileLocation
FROM DictionaryTable
WHERE (((DictionaryTable.dictionaryEncryptedWord) Like "0x0E6E")); 
```

其次在Access中创建一个查询如下：

```
SELECT MaskedIndexTable.maskedIndex, MaskedIndexTable.maskedIndexEncryptedIndex, MaskedIndexTable.fileLocation
FROM MaskedIndexTable
WHERE Exists (SELECT * 
                FROM encryptedWordsQuery 
               WHERE MaskedIndexTable.maskedIndexEncryptedIndex = encryptedWordsQuery.dictionaryEncryptedIndex
                     AND MaskedIndexTable.fileLocation = encryptedWordsQuery.FileLocation); 
```

我发现创建两个单独的查询比在 Access 中创建一个更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:24:39.960

我认为这应该可行——如果您能够发布示例数据，我们可以制作一个 SQLFiddle 来演示它。

```
SELECT  dt.dictionaryEncryptedIndex, dt.filelocation 
FROM    DictionaryTable dt
    INNER JOIN MaskedIndexTable mit
        ON mit.fileLocation = dt.fileLocation 
            AND mit.maskedIndexEncryptedIndex = dt.dictionaryEncryptedIndex
WHERE   dt.dictionaryEncryptedWord LIKE '0x0E6E*' 
```

# mysql - 在 Laravel Eloquent/Fluent 中，有没有办法删除一行以及通过关系与之相关的所有内容？

> ID：15795742
> 
> 赞同：0
> 
> 时间：2013-04-03T18:59:09.580
> 
> 标签：mysql, laravel, fluent, eloquent, laravel-3

基本上，删除某些内容并让它*自动*搜索并删除与其相关的所有行和字段，而不是必须*手动*完成所有这些，这将是非常好的。

例如，使用预先加载，我可以像这样预先加载：

```
Page::with(array(
    'elements',
    'elements.drafts',
    'elements.content',
    'elements.content.drafts'
))->where('myField', '=', $value)->first(); 
```

有没有办法为删除操作做类似的事情？就像是：

```
Page::with(array(
    'elements',
    'elements.drafts',
    'elements.content',
    'elements.content.drafts'
))->where('myField', '=', $value)->delete(); 
```

当然，上面的代码我试过了，还是不行。我提供它是为了帮助传达我正在寻找的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:29:51.127

经过更多的搜索，我能够弄清楚！我是一名 SQL 专家，所以我什至不知道要搜索“CASCADE”删除，这就是它在 SQL 术语中的名称。

无论如何，我在[另一个 StackOverflow 帖子](https://stackoverflow.com/questions/14174070/automatically-deleting-related-rows-in-laravel-eloquent-orm)中找到了更多信息。

我最终不得不在我所有的关系中设置删除功能。

## 对于 has_many 关系

对于 has_many 关系，我不得不使用[其他 StackOverflow 帖子中的代码](https://stackoverflow.com/questions/14174070/automatically-deleting-related-rows-in-laravel-eloquent-orm)。具体来说，像这样：

```
// This code is in my elements model, which has_many content
public function delete()
{
    foreach($this->content as $content)
    {
        $content->delete();
    }

    return parent::delete();
} 
```

## 对于 has_one 关系

但是，我确实想指出，如果您正在处理**has_one**关系，则必须更改代码，使其看起来像下面的内容。

```
// This is inside my content model, which has_one draft
public function delete()
{
    // delete the single draft
    $this->drafts()->delete();

    return parent::delete();
} 
```

# batch-file - 我需要一个批处理文件来将一个目录中的一行文本更改为不同目录中的相同文本文件

> ID：15795743
> 
> 赞同：0
> 
> 时间：2013-04-03T18:59:20.177
> 
> 标签：batch-file

`SetNumber=01`基本上，我有一个文本文件，在 5 个文件夹中有一行文本

```
C:\Documents and Settings\User\Desktop\Test\test.txt
C:\Folder\Test\test.txt
C:\Test\test.txt 
etc. 
```

我需要`SetNumber=01`每月将其更改为不同的数字，例如`SetNumber=01`，`SetNumber=02`在所有这些文件夹中，并希望运行一个批处理文件来复制和替换这行文本

```
C:\Documents and Settings\User\Desktop\Test\test.txt 
```

进入

```
C:Folder\Test\test.txt. 
etc. 
```

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:43:59.923

好的，我们开始吧。这会将文件复制到当前卷上的`C:\Documents and Settings\User\Desktop\Test\test.txt`所有文件（它们被**擦除**）。删除命令，如果输出正常：`..\test\test.txt`**`echo`**

 **```
@echo off&setlocal enabledelayedexpansion
set "sourcefile=C:\Documents and Settings\User\Desktop\Test\test.txt"
for /f "delims=" %%i in ('dir /s /b /a-d \test.txt') do (
    set "fpath=%%~fi"
    if "!fpath:*test\test.txt=!"=="" if not "%sourcefile%"=="%%~fi" (
        echo copy "%sourcefile%" "%%~fi"
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:47:37.277

下面的批处理文件通过插入此行“SetNumber=%1”来更改磁盘中任何文件夹中名为**test.txt的***所有文件：*

 **```
@echo off
for /R \ %%a in (test.txt) do echo SetNumber=%1> "%%a" 
```

例如，如果之前的批处理文件名为 SetNumber.bat，您可以使用以下命令将所有文件更改为 SetNumber=02：

```
setnumber=02 
```

安东尼奥****

# mysql - MySQL将单元格的一部分移动到另一列

> ID：15795747
> 
> 赞同：0
> 
> 时间：2013-04-03T18:59:29.233
> 
> 标签：mysql, sql

我将以下内容导入 TableA，列“衣服”和“颜色”列

问题是导入已放入“衣服”列“牛仔裤 - 蓝色”和“跳线 - 红色”等

请有人帮我查询，以将 - 之前的所有内容保留在“衣服”中，将 - 之后的所有内容保留为“颜色”，并完全删除 -。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:19:24.367

您可以`UPDATE`按如下方式一次性完成：

```
UPDATE TableA
SET `Colours` = SUBSTRING_INDEX(`Clothes`, ' - ', -1),
    `Clothes` = SUBSTRING_INDEX(`Clothes`, ' - ', 1)
; 
```

您可以使用我根据您的数据创建的[SQL Fiddle Demo进行试验。](http://sqlfiddle.com/#!2/03090/1)

这是我使用的数据：

创建表 TableA ( `Clothes`varchar(20), `Colours`varchar(20)) ;

```
INSERT INTO TableA
    (`Clothes`, `Colours`)
VALUES
    ('Jeans - Blue', NULL),
    ('Jumper - Red', NULL)
; 
```

这是结果`SELECT * FROM TableA;`：

```
CLOTHES COLOURS
Jeans   Blue
Jumper  Red 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:37:10.013

`SUBSTRING_INDEX`功能方便，功能`TRIM`可以去除前导和尾随空格。例如：

```
SELECT TRIM(SUBSTRING_INDEX(a.Clothes,'-',1)) AS Clothes
     , TRIM(SUBSTRING_INDEX(a.Clothes,'-',-1)) AS Colours
  FROM TableA a
 WHERE LENGTH(a.Clothes)-LENGTH(REPLACE(a.Clothes,'-','')) = 1 
```

（注意：上面的查询在第一个“-”字符之前返回子字符串，并在最后一个“-”字符之后返回子字符串。因此，任何具有多个破折号的值都会丢失第一个和最后一个破折号之间的部分，考虑例如'A - B - C - D'，上面的查询返回A并返回D，并丢失其他所有内容。

为了处理这种异常，WHERE 子句检查字符串是否包含单次出现的“-”字符。

一旦有了满意的查询，就可以将其转换为 UPDATE 语句，但要非常小心为列分配新值的顺序。与其他关系数据库不同，MySQL 不保证对语句中现有列的引用将是语句开头的列的值......唯一的保证是它将是当前分配的值。因此，分配列的顺序很重要！

```
UPDATE TableA a
   SET Colours = TRIM(SUBSTRING_INDEX(a.Clothes,'-',-1))
     , Clothes = TRIM(SUBSTRING_INDEX(a.Clothes,'-',1))
 WHERE LENGTH(a.Clothes)-LENGTH(REPLACE(a.Clothes,'-','')) = 1 
```

请注意，如果我们在为 Colors 列分配值之前分配 Clothes 列，那么我们希望分配给 Colors 的值将“丢失”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:14:37.720

两个步骤。

首先，更新颜色：

```
UPDATE yourTableA T
SET T.Colours = TRIM(SUBSTR(T.Clothes,INSTR(T.Clothes,'-') + 2)); 
```

二、更新衣服：

```
UPDATE yourTableA T
SET T.Clothes = TRIM(SUBSTR(T.Clothes,1,INSTR(T.clothes,'-')-1)); 
```

我在[`SUBSTR`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_substr)这里用作我的弦瑞士军刀，并[`INSTR`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_instr)在两者之间找到 - 的位置。你可以不用[`TRIM`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_trim)，但我通常在这些情况下使用它来避免不必要的空格。

肯定有更直接的方法可以做到这一点，但这会奏效。

# asp.net-mvc - CloudFlare SSL 与 ASP.NET MVC RequireHttps 的兼容性

> ID：15795748
> 
> 赞同：5
> 
> 时间：2013-04-03T18:59:29.883
> 
> 标签：asp.net-mvc, ssl, appharbor, cloudflare

我在 AppHarbor（它使用 Amazon EC2）上托管一个 ASP.NET MVC 4 站点，并且我正在使用 CloudFlare 来实现灵活 SSL。我在尝试使用 RequireHttps 时遇到了重定向循环 (310) 的问题。问题在于，与 EC2 一样，CloudFlare 在将请求转发到服务器之前终止 SSL。但是，虽然 Amazon 设置了 X-Forwarded-Proto 标头以便您可以使用自定义过滤器处理请求，但 CloudFlare 似乎没有。或者如果他们这样做了，我不知道他们是如何做到的，因为我无法拦截该级别的流量。我已经尝试过 Amazon EC2 的解决方案，但它们似乎对 CloudFlare 没有帮助。

有没有人遇到过这个问题，或者对 CloudFlare 有足够的了解来提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:04:09.217

`X-Forwarded-Proto`AppHarbor 的负载均衡器有意将标头覆盖为请求的实际方案。

请注意，虽然 CloudFlare 灵活的 SSL 选项可能会稍微提高安全性，但仍有未加密的流量通过公共互联网从 CloudFlare 传输到 AppHarbor。这可以说违背了 SSL 的目的，除了外观和减少攻击向量的数量（如用户本地网络上的数据包嗅探） - 即它可能对您的用户看起来“专业”，但实际上仍然不安全。

这不太理想，特别是因为 AppHarbor 支持安装您自己的证书并包括开箱即用的搭载 SSL。CloudFlare 还建议在源服务器/服务支持 SSL 的情况下使用“完整 SSL”。所以你有几个选择：

*   继续使用不安全的“灵活 SSL”选项，但不要检查`X-Forwarded-Proto`自定义`RequireHttps`过滤器中的标头，而应检查标头的`scheme`属性`CF-Visitor`。[在这个讨论](https://support.cloudflare.com/entries/22088068-How-do-I-redirect-HTTPS-traffic-with-Flexible-SSL-and-Apache-)中有更多细节。
*   使用“完整 SSL”并将 CloudFlare 指向您的`*.apphb.com`主机名。通过这种方式，您可以使用 AppHarbor 应用程序默认启用的免费搭载 SSL。您必须覆盖`Host`CloudFlare 上的标头才能使其正常工作，[这里有一篇关于如何做到这一点的博客文章](http://blog.cloudflare.com/ssl-on-custom-domains-for-appengine-and-other)。这当然会使对您的应用程序的请求看起来像是对您的`*.apphb.com`域发出的 - 因此，例如，如果您自动将请求重定向到“规范” URL 或生成绝对 URL，您可能必须考虑到这一点。
*   上传您的证书并将自定义主机名添加到 AppHarbor。然后在 CloudFlare 上打开“Full SSL”。这样主机头将保持不变，您的应用程序将继续工作而无需任何修改。[您可以在此知识库文章](http://support.appharbor.com/kb/tips-and-tricks/ssl-and-certificates)中阅读有关 AppHarbor 提供的 SSL 选项的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:32:06.560

这很有趣。

就在我最近与我们的一位客户进行了讨论，他向我询问了“灵活” SSL 并建议我们（Incapsula）也提供这种选项。

经过一番讨论，我们都得出结论，这样的功能会产生误导，因为它会给最终用户带来虚假的安全感，同时也会让网站所有者面临责任索赔。

简而言之，“灵活”SSL 连接之一上的访问者可能会在加密后感到绝对安全，并且愿意提供敏感数据，而不知道“服务器到云”路由根本没有加密并且可以被拦截（即通过后门壳）。

参观这里并看到其他人得出相同的结论很有趣。+1

请注意，作为网站所有者，您可能会对此类设置可能导致的任何不必要的曝光负责。

我的建议是做负责任的事情并投资 SSL 证书，甚至创建一个自签名证书（用于加密“云到服务器”路由）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:39:10.470

或者，您可以获取由 StartCom 签署的免费一年 SSL 证书并将其上传到 AppHarbor。

然后你就可以收工了，拍拍自己的背！那是直到将来你一年后必须购买证书=）。

# android - 从 ARGB8888 到 RGB565 的渲染脚本转换

> ID：15795751
> 
> 赞同：3
> 
> 时间：2013-04-03T18:59:36.420
> 
> 标签：android, type-conversion, renderscript

我正在接收 ARGB8888 格式的位图，但我需要通过一些只接受 RGB565 的算法来处理它。我想使用 Renderscript 将此位图转换为新格式，但似乎分配入和分配出应该相等（或兼容）。bitmapIn 是 ARGB_8888 类型， bitmapOut 是 RGB_565 类型

> 引起：android.renderscript.RSIllegalArgumentException：分配类型为 PIXEL_RGBA，类型为 4 字节的 UNSIGNED_8，传递的位图为 RGB_565

爪哇：

```
public void convert(final Bitmap bitmapIn, Bitmap bitmapOut)
{
    mInAllocation = Allocation.createFromBitmap(mRS, bitmapIn, Allocation.MipmapControl.MIPMAP_NONE, Allocation.USAGE_SCRIPT);
    Type.Builder tb = new Type.Builder(mRS, Element.RGB_565(mRS)).setX(bitmapIn.getWidth()).setY(bitmapOut.getWidth());
    mOutAllocation = Allocation.createTyped(mRS, tb.create());
    // Call custom method (not forEach_root) so we can have uchar4 in and uchar3 out
    mScript.forEach_convert(mInAllocation, mOutAllocation);
    mOutAllocation.copyTo(bitmapOut);
} 
```

渲染脚本：

```
// Convert to RGB565 by quantizing the individual channels
void convert(const uchar4* v_in, uchar3* v_out)
{
    v_out->x = v_in->x >> 3;
    v_out->y = v_in->y >> 2;
    v_out->z = v_in->z >> 3;
} 
```

请注意，如果我制作了两个位图 ARGB_8888 并在两个 uchar4* 上都使用了 convert() （并且只复制了 alpha (w) 通道，那么我看到位图被更改了。

我知道 565 等于 16 位，所以实际上它更可能是 uchar2，但它也与类型分配不兼容。

如何在 Renderscript 中进行这种类型转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T00:14:18.580

最简单的方法是仅将输出分配传递给内核，并将输入分配绑定为 rs_allocation。使用 rsGetElementAt_uchar4 访问分配，进行转换，并返回一个short。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T09:53:16.787

我找不到与 RGB565 图像一起使用的正确 Renderscript 类型，但 uint16_t 有效（至少在 Nexus S 上）。正如 Tim Murray 的回答一样，您必须分别绑定输入或输出分配。

这是用于进行转换的 Renderscript，其中输入 RGB8888 分配被单独绑定，并且 rsForEach 在 RGB565 分配上被调用：

```
#pragma version(1)
#pragma rs java_package_name(uk.co.massycat.renderscriptfun.rsfun)

rs_allocation gInImage;

void root(const uint16_t *v_in, uint16_t *v_out, const void *usrData, uint32_t x, uint32_t y) {
    uint16_t colour = 0;

    const uchar4 *in_pixel = rsGetElementAt(gInImage, x, y);

    uint32_t red = in_pixel->r;
    uint32_t green = in_pixel->g;
    uint32_t blue = in_pixel->b;

    red >>= 3;
    green >>= 2;
    blue >>= 3;

    // red (5 bits)
    colour |= red << 11;
    // green (6 bits)
    colour |= green << 5;
    // blue (5 bits)
    colour |= blue << 0;
#if 0
    // red (5 bits)
    colour |= 0x0 << 11;
    // green (6 bits)
    colour |= 0x0 << 5;
    // blue (5 bits)
    colour |= 0x1f << 0;
#endif

    *v_out = colour;
}

void doWork( rs_script script, rs_allocation alloc_out) {
    rsForEach(script, alloc_out, alloc_out);
} 
```

在 RGB565 分配上调用 rsForEach 时，在 Java 端，您必须调用 invoke_doWork 脚本对象方法而不是 forEach_root 脚本对象方法，因为 forEach_root 调用将对 RGB565 分配进行类型检查并抛出异常，说明它不兼容与 U16。

这是Java方面：

```
mInImageAllocation = Allocation.createFromBitmap(mRS, mInBitmap,
            Allocation.MipmapControl.MIPMAP_NONE, Allocation.USAGE_SCRIPT);
Type.Builder tb = new Type.Builder(mRS, Element.RGB_565(mRS)).setX(mInBitmap.getWidth()).setY(mInBitmap.getHeight());
mOutAllocation = Allocation.createTyped(mRS, tb.create());

mScript.set_gInImage(mInImageAllocation);

mScript.invoke_doWork(mScript, mOutAllocation);
Bitmap tmp_bitmap = Bitmap.createBitmap(mInBitmap.getWidth(), mInBitmap.getHeight(), Bitmap.Config.RGB_565);
mOutAllocation.copyTo(tmp_bitmap);

mAnImageView.setImageBitmap(tmp_bitmap);
mAnImageView.invalidate(); 
```

# apache - 带变量的 Apache RewriteCond

> ID：15795754
> 
> 赞同：0
> 
> 时间：2013-04-03T18:59:52.273
> 
> 标签：apache, variables, mod-rewrite

仅当 cookie 与 URL 请求不匹配时，我才需要重定向到 URL，如下所示：

```
URI: http://mywebsite/myapp/myservice/my123token
COOKIE: MYCOOKIE=my456token

RewriteCond %{REQUEST_URI} .*/myservice/(.*)
RewriteCond %{HTTP_COOKIE} .*MYCOOKIE="(.*);?.*
RewriteRule .* http://mywebsite/myapp/myservice/%1 
```

所以发生的事情是传入的请求带有令牌**my123token**但 cookie 有令牌**my456token**只有这样 Apache 才应该使用 URI 令牌值重定向到显示的 url。

所以问题是我如何实现第二个条件，以便仅在令牌不匹配时应用重写规则。

我觉得这会以某种方式涉及使用变量，但不确定如何，请帮忙。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:50:08.567

您可以通过在正则表达式中使用反向引用来做到这一点。在我的帽子顶部：

```
RewriteCond %{HTTP_COOKIE} .*MYCOOKIE=(.*);?.*
RewriteCond $1=%1 !^(.*)=\1$
RewriteRule myapp/myservice/(.*) /myapp/myservice/%1 [L,R=302] 
```

请注意，`=`它只是用作一些分隔符。

PS。我`"`从 rewriteCond 中删除了，因为您的 cookie 似乎不包含任何内容。

# c# - 使用 NHibernate 保存链接到下一个元素的元素；此 sqlparamatercollection 的索引 n 无效

> ID：15795755
> 
> 赞同：2
> 
> 时间：2013-04-03T18:59:56.070
> 
> 标签：c#, nhibernate, nhibernate-mapping

我有一个对象 PlaylistItem，它在通过 ID 引用其下一个 PlaylistItem 时保存得很好。尝试修改此代码以引用实际的 PlaylistItem 对象本身时遇到异常。我了解该问题是由我的 hbm.xml 文件中的重复映射引起的。但是，我无法为我的场景找到解决方案。

这是目前的 PlaylistItem.hbm.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Streamus" namespace="Streamus.Backend.Domain">

  <class name="PlaylistItem" table="[PlaylistItems]" lazy="false" >
    <composite-id>
      <key-property name="Id" />
      <key-many-to-one name="Playlist" column="PlaylistId"/>
    </composite-id>

    <property name="Title" not-null="true" />

    <many-to-one name="Video" column="VideoId" not-null="true" />

    <many-to-one name="NextItem" not-null="true">
      <column name="NextItemId" />
      <column name="PlaylistId" />
    </many-to-one>
  </class>

</hibernate-mapping> 
```

我可以通过修改 NextItem 多对一关系使其具有属性“insert="false" update="false" 来避免此异常。但是，这样做会导致 NextItem 在数据库中始终为 NULL。

这是相关的类：

```
public class PlaylistItem
{
    public Guid Id { get; set; }
    public Playlist Playlist { get; set; }
    public PlaylistItem NextItem { get; set; }
    public string Title { get; set; }
    public Video Video { get; set; }

    public PlaylistItem()
    {
        //  Id shall be generated by the client. This is OK because it is composite key with 
        //  PlaylistId which is generated by the server. 
        Id = Guid.Empty;
        Title = string.Empty;
    }

    private int? _oldHashCode;
    public override int GetHashCode()
    {
        // Once we have a hash code we'll never change it
        if (_oldHashCode.HasValue)
            return _oldHashCode.Value;

        bool thisIsTransient = Equals(Id, Guid.Empty);

        // When this instance is transient, we use the base GetHashCode()
        // and remember it, so an instance can NEVER change its hash code.
        if (thisIsTransient)
        {
            _oldHashCode = base.GetHashCode();
            return _oldHashCode.Value;
        }
        return Id.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        PlaylistItem other = obj as PlaylistItem;
        if (other == null)
            return false;

        // handle the case of comparing two NEW objects
        bool otherIsTransient = Equals(other.Id, Guid.Empty);
        bool thisIsTransient = Equals(Id, Guid.Empty);
        if (otherIsTransient && thisIsTransient)
            return ReferenceEquals(other, this);

        return other.Id.Equals(Id);
    }
} 
```

无论 NextItem 是否已定义或为 null，都会引发异常。我坚信我需要使用复合键来唯一地表示 PlaylistItem。

我有哪些选择？我不确定如何进一步解决这个问题。

这是保存前我的对象手表的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/XBlpS.png)

如前所述，我还尝试在 NextItem 为空的情况下进行保存。此外，我尝试让 Ne​​xtItem 完全成为另一个 PlaylistItem（这样 PlaylistItem 就不是自引用的。）这些更改都没有任何效果。

这是异常的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/bZZ1U.png)

异常显示为“Count=5 的此 SqlParamaterCollection 的索引 5 无效。” 没有定义内部异常。

以下是屏幕截图中引用的 PlaylistItem 的构造函数：

```
public PlaylistItem()
{
    //  Id shall be generated by the client. This is OK because it is composite key with 
    //  PlaylistId which is generated by the server. 
    Id = Guid.Empty;
    Title = string.Empty;
}

public PlaylistItem(Guid id, string title, Video video)
    : this()
{
    Id = id;
    Title = title;
    Video = video;
} 
```

这是 Playlist 的构造函数及其 AddItem 方法：

```
public Playlist()
{
    Id = Guid.Empty;
    Title = string.Empty;
    Items = new List<PlaylistItem>();
}

public Playlist(string title)
    : this()
{
    Title = title;
}

/// <summary>
///     Add a PlaylistItem to the Playlist's PlaylistItem collection by inserting
///     the PlaylistItem at the end of the linked list. Adjust the links
///     to accomodate the PlaylistItem and set the Playlist's FirstItem
///     if necessary.
/// </summary>
public void AddItem(PlaylistItem playlistItem)
{
    if (Items.Count == 0)
    {
        playlistItem.NextItem = playlistItem;
        playlistItem.PreviousItem = playlistItem;
        FirstItem = playlistItem;
    }
    else
    {
        //  Adjust our linked list and add the item.
        FirstItem.PreviousItem.NextItem = playlistItem;
        playlistItem.PreviousItem = FirstItem.PreviousItem;

        FirstItem.PreviousItem = playlistItem;
        playlistItem.NextItem = FirstItem;
    }

    Items.Add(playlistItem);
    playlistItem.Playlist = this;
} 
```

这是 PlaylistManager 的构造函数及其 Save 方法：

```
public PlaylistManager(IPlaylistDao playlistDao, IPlaylistItemDao playlistItemDao, IVideoDao videoDao)
{
    PlaylistDao = playlistDao;
    PlaylistItemDao = playlistItemDao;
    VideoDao = videoDao;
}

public void Save(Playlist playlist)
{
    try
    {
        NHibernateSessionManager.Instance.BeginTransaction();

        playlist.ValidateAndThrow();
        PlaylistDao.Save(playlist);

        NHibernateSessionManager.Instance.CommitTransaction();
    }
    catch (Exception exception)
    {
        Logger.Error(exception);
        NHibernateSessionManager.Instance.RollbackTransaction();
        throw;
    }
} 
```

PlaylistDao 的 Save 方法只是 NH​​ibernateSession.Save(entity); 的一个包装器。

# python - 为 PIL 构建 _imaging 扩展时出现 gcc-4.0 错误

> ID：15795757
> 
> 赞同：0
> 
> 时间：2013-04-03T18:59:59.227
> 
> 标签：python, macos, gcc, python-imaging-library, pip

当我安装 PIL（或枕头）时，_imaging C 模块没有安装。

这是一个常见错误，并且已经看到[了 AppPeL 的逐个播放解决方案](https://stackoverflow.com/a/3342126/1337422)，大多数人都认为它很有帮助。不幸的是，当我运行时`sudo python setup.py install`，我收到以下错误：

```
running install
running build
running build_py
running build_ext
--- using frameworks at /System/Library/Frameworks
building '_imaging' extension
gcc-4.0 -fno-strict-aliasing -fno-common -dynamic -arch ppc -arch i386 -g -O2 -DNDEBUG -g -O3 -DHAVE_LIBJPEG -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -IlibImaging -I/Library/Frameworks/Python.framework/Versions/2.7/include -I/usr/local/include -I/usr/include -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.3-fat-2.7/_imaging.o
unable to execute gcc-4.0: No such file or directory
error: command 'gcc-4.0' failed with exit status 1 
```

当我在 shell 中运行 python 并尝试导入模块时，我收到以下导入错误：

```
Santiagos-MacBook-Air:Imaging-1.1.7 sgarza621$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:32:06) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import PIL
>>> import Image
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named Image
>>> import _imaging
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named _imaging 
```

我之前也遇到过类似的错误，[Ned Deily 很友善地提供了解决方案](https://stackoverflow.com/a/14722220/1337422)。我相信我当前的问题可能与上一个问题有关：

[OSX：安装 Python 包时出错](https://stackoverflow.com/q/14720702/1337422)（包括此作为参考）

以下是一些其他可能有用的信息：

```
Santiagos-MacBook-Air:Imaging-1.1.7 sgarza621$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:32:06) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information. 
```

* * *

```
Santiagos-MacBook-Air:Imaging-1.1.7 sgarza621$ gcc
i686-apple-darwin11-llvm-gcc-4.2: no input files 
```

* * *

```
Santiagos-MacBook-Air:Imaging-1.1.7 sgarza621$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

* * *

```
Santiagos-MacBook-Air:Imaging-1.1.7 sgarza621$ echo $PATH
/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

我对 gcc、Xcode 或 PIL 的来龙去脉不是很熟悉。因此，如果您不介意，请提供详细的回复，以便我了解如何对您的解决方案采取行动。另外，如果我可以提供更多详细信息，请告诉我，我会将它们编辑到问题中。

* * *

**编辑：**

我已经按照[MattDMo](https://stackoverflow.com/users/1426065/mattdmo)`pillow`的建议安装了 pip，现在可以成功导入，但没有成功（我相信我的机器上的 gcc 没有正确编译 c 扩展，见上文）：`Image``_imaging`

```
Santiagos-MacBook-Air:riotry_mobile sgarza621$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:32:06) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import Image
>>> import _imaging
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_imaging.so, 2): Symbol not found: _jpeg_resync_to_restart
  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/_imaging.so
  Expected in: dynamic lookup 
```

我正在使用 PIL 在 Django Web 应用程序上处理图像，当我尝试通过表单上传图像以供 PIL 处理时出现以下错误：

```
The _imaging C module is not installed 
```

* * *

**第二次编辑：**

这里有更多关于 python 和 gcc 的信息，我希望能阐明这个问题：

```
$ which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python
$ /usr/bin/python -c 'import sys;print(sys.version)'
2.7.2 (default, Jun 16 2012, 12:38:40) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)]
$ /usr/bin/python2.7 -c 'import sys;print(sys.version)'
2.7.2 (default, Jun 16 2012, 12:38:40) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:19:52.927

你的许多问题（如果不是全部）（希望如此）可以通过使用[Pillow](https://github.com/python-imaging/Pillow)来解决。PIL 开发不久前就停止了，不幸的是，代码在任何方面都不能向前兼容，所以随着编译器和 Python 的成熟，错误悄悄出现。Pillow fork 是稳定的、积极开发的，并且相当普遍，所以您可以放心使用它。2.0 版有很多增强功能，包括对 Python 3 的支持。但是，您必须使用`from PIL import Image`而不是`import Image`。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:04:41.333

哇。我希望这对将来遇到同样问题的人有所帮助，因为那太残酷了。

解决方案是安装`python.org 64-bit/32-bit installer`Mac 版，正如[Ned Deily 在使用 gcc 编译 Python C-extension 时对“......无法弄清楚......的架构类型”问题的回答](https://stackoverflow.com/a/6839863/1337422)中[所](https://stackoverflow.com/q/6839795/1337422)概述的那样。

首先，我确保默认的 python 是这个新的 python（只是`python`在 shell 中运行）。

然后，我重新安装`pip`并运行`pip install PIL`. 做到了！

为了确保，我在 shell 中打开了 python，并导入了三个模块：

```
>>> import PIL
>>> import Image
>>> import _imaging 
```

所有这些（最终）都没有错误地导入。

# properties - VB.NET：使用属性作为委托函数

> ID：15795762
> 
> 赞同：1
> 
> 时间：2013-04-03T19:00:19.750
> 
> 标签：properties, delegates, c#-to-vb.net

我在将示例从 C# 转换为 VB.NET 时遇到问题。

C# 示例具有以下结构。首先有一个公共代表。

```
public delegate void CustomEventHandler(object sender , EventArgs e); 
```

此委托连接到接口的属性。

```
public interface ICustom {
    CustomEventHandler MyProperty { get; set; }
} 
```

最后我得到了一个包含接口作为参数的函数的类。使用参数调用此属性，如函数。

```
public class Test {

    public void MySub(ICustom custom) {
        custom.MyProperty(this, new EventArgs());        }
} 
```

除了使用属性，我可以转换此代码。我的 VB.NET 代码如下所示：

```
Public Delegate Sub CustomEventHandler(ByVal sender As Object, ByVal e As EventArgs)

Public Interface ICustom

    Property MyProperty As CustomEventHandler
End Interface

Public Class Test

    Public Sub MySub(ByVal custom As ICustom)
        ... How can I add here the event OnEvent to the event custom.MyEvent? ...
    End Sub
End Class 
```

是否可以转换它或者是否有其他必要的方式。感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:18:25.413

要在 VB.NET 中触发事件，您必须使用`RaiseEvent`

[http://msdn.microsoft.com/en-us/library/edzehd2t.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/edzehd2t.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# angularjs - 如何在 Angular JS 中轻松实现多个布局？

> ID：15795768
> 
> 赞同：9
> 
> 时间：2013-04-03T19:00:42.543
> 
> 标签：angularjs, angularjs-directive, angularjs-routing

我需要能够为不同的路线指定不同的布局，最好我希望能够在路线配置中的对象中定义布局和其他参数，并让它们在路线更改时传播。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T19:00:42.543

这是我在当前项目中解决它的方法。

*[可在此处](http://plnkr.co/edit/hLxxbERxj1HrUMX64ma9?p=preview)找到工作演示*

如果您可以`$routeProvider.when(...)`像这样在块中定义对象会怎样：

**路线定义：**

```
 $routeProvider

    .when('/', {
      templateUrl: 'main.html',
      controller: 'MainCtrl',
      resolve: {
        interceptor: interceptWith('routeChangeInterceptor', {

          stateClass: {
            fullWidthLayout: true
          }

        })
      }
    }); 
```

并让它们传播并使用它来添加具有`ng-class`类似接口的类，使用这样的 stateClass 对象？

**HTML：**

```
<body state-class="{'full-width-layout': fullWidthLayout}"> ... </body>

<div class="some-class" state-class="{'some-class': someValue}"> ... </div> 
```

# 如何：

这是使用一个`interceptWith(...)`简单地注入服务并使用给定参数调用它的助手，但它也可以使用像这样的数组表示法来实现

```
interceptor: ['serviceToInject', function(injectedService) { .. }]; 
```

只有这样它是 DRYer。有关此的更多信息，请参阅演示。

## 用于从路由定义中广播对象的服务：

```
//This interceptor is responsible for emiting an event on rootScope
  .factory('routeChangeInterceptor', ['$rootScope', function($rootScope) {

    var _prepare = function(state) {
      $rootScope.$broadcast('data:broadcast-state', state);  
    };

    return {
      prepare: _prepare
    };
  }]); 
```

## 用于根据广播状态事件对象添加/删除类的指令如下所示：

```
//This directive receives and $parses object/classname mappings, 
//and it will add or remove the defined class for every mapping that is defined.

angular.module('broadcastState')
  .directive('stateClass', ['$parse', function ($parse) {

    var _linkFn = function link(scope, element, attrs) {

        scope.$on('data:broadcast-state', function(e, state) {

          //Set defaults
          state = state || {};
          state.stateClass = state.stateClass || {};

          var classes = $parse(attrs.stateClass)(state.stateClass);

          angular.forEach(classes,function(value,className) {
            if(value && typeof value === 'boolean')
            {
              element.addClass(className);
            }
            else
            {
              element.removeClass(className);
            }

          });

        });
    }

    return {
      restrict: 'A',
      link: _linkFn
    };
  }]); 
```

查看[plnkr](http://plnkr.co/edit/hLxxbERxj1HrUMX64ma9?p=preview)以了解更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-01T19:41:14.443

看起来Angular 团队的[https://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-11T09:53:15.527

试试这个[http://angular-route-segment.com/（AngularJS](http://angular-route-segment.com/) $route 服务的轻量级扩展，支持树状嵌套视图和路由，以及高级流处理）

# sql-server-2008 - 如何结合 sys.dm_exec_query_stats 和 sys.dm_tran_locks 来结合结果

> ID：15795771
> 
> 赞同：1
> 
> 时间：2013-04-03T19:00:46.620
> 
> 标签：sql-server-2008, sql-server-2005

Sqlserver 2005-2008 查询找出死锁并识别查询文本

我有以下可以给我锁定状态的查询也告诉我导致锁定的命令

```
SELECT
    object_name(sl.resource_associated_entity_id) as 'TableName' ,
    dr.command,
    sl.*
FROM
    sys.dm_tran_locks as sl
        LEFT JOIN
        sys.dm_exec_requests dr
        ON
        sl.request_session_id=dr.session_id
WHERE
    sl.resource_type = 'OBJECT' 
```

我有另一个查询，它给了我查询文本，如下所示

```
SELECT top 5 deqs.last_execution_time AS [Time], dest.text AS [Query],
FROM sys.dm_exec_query_stats AS deqs
CROSS APPLY sys.dm_exec_sql_text(deqs.sql_handle) AS dest
ORDER BY deqs.last_execution_time DESC 
```

但我不知道如何结合这两个查询，以便获得锁定事务查询。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:21:41.250

我创建了这个查询应该可以工作。

```
 SELECT
        object_name(sl.resource_associated_entity_id) as 'TableName' ,
        dr.command, dest.text ,
        sl.*
    FROM
        sys.dm_tran_locks as sl
            LEFT JOIN
            sys.dm_exec_requests dr
            ON
            sl.request_session_id=dr.session_id

            CROSS APPLY sys.dm_exec_sql_text(dr.sql_handle) AS dest

    WHERE
        sl.resource_type = 'OBJECT' 
```

# javascript - 我认为提交按钮上的 URL 重新路由发生得太快了

> ID：15795772
> 
> 赞同：0
> 
> 时间：2013-04-03T19:00:49.527
> 
> 标签：javascript, html, onclick

我在页面上有一个提交按钮，该按钮通过 ajax 调用将数据发送到服务器数据库。提交按钮有一个 onclick 属性，如下所示：

```
onClick="if(confirm('Leave Page?')){parent.location='home.php';}" 
```

如果用户在确认消息上单击“确定”，它会将它们重新路由到 home.php，但是应该提交的数据实际上都没有进入数据库。但是，如果用户在确认消息上单击“取消”，它将停留在页面上，并且数据已成功提交到数据库。

有什么办法可以解决这个问题？我猜 onclick 属性在 ajax 调用之前激活，如果他们选择 OK，则 URL 重新路由优先于 ajax 调用以将数据发送到数据库。有什么替代的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:05:57.620

您过早触发离开页面对话框。只有在您的 ajax 调用报告成功后才应该激活它

# unity-container - Unity Container 传递运行时构造函数参数

> ID：15795778
> 
> 赞同：0
> 
> 时间：2013-04-03T19:01:04.253
> 
> 标签：unity-container

我有两个构造函数，第一个可以正常工作，如下所示：

```
 public ESite(Func<IOrg> unityOrgFactory)
    {
        this.OrFactory = unityOrgFactory; 
        this.Kid = Guid.Empty;
    }
_IoC.RegisterType<IESite, ESite>(); 
IESite eSite = boClass.IoC.Resolve<IESite>(); 
```

现在，我需要在运行时传入一个键，所以我像往常一样添加了一个构造函数：

```
 public ESite(Func<IOrg> unityOrgFactory, Guid kid)
    {
        this.OrFactory = unityOrgFactory;
        this.Kid = kid;
    } 
```

此注册和解析用法的语法？我已经尝试了几个 InjectionConstructor 变体，但无法正确...我错过了一些东西。经过几轮搜索和尝试，是时候提问了！我已经阅读了几篇有关相关主题的帖子...

感谢您的提示！GG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:57:32.080

一个合理的解决方法（不一定是最佳答案）是通过将注入的参数移动到 InjectionMethod 来解除构造函数的障碍

登记：

```
// Use InjectionMethod Initializer to free up constructors. http://msdn.microsoft.com/en-us/library/ff953186(v=pandp.50).aspx   new InjectionMethod("Initialize", typeof(Database), "CustomerServices")
        _IoC.RegisterType<IESite, ESite>(
            new InjectionMethod("Initialize", typeof(Func<IOrg>)) 
            ); 
```

采用：

```
 //http://msdn.microsoft.com/en-us/library/ff953186(v=pandp.50).aspx
    [InjectionMethod]
    public void Initialize(Func<IOrg> unityOrgFactory) 
```

# java - 用于将模型导出到搅拌机的 java 库

> ID：15795780
> 
> 赞同：4
> 
> 时间：2013-04-03T19:01:09.180
> 
> 标签：java, blender

我正在开始一个项目，我想在其中生成一些 3D 数据集（在我的情况下来自 minecraft 的场景）并将它们导出以用于搅拌机（3D 渲染工具）项目。

是否有任何 Java 库可以轻松编写供搅拌机使用的文件？

如果没有，blender 可读的适当文件的规格在哪里（可以保存 3D 几何和纹理信息的东西）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T16:35:29.583

George Profenza 指出搅拌机可以导入 Wavefront 风格的 OBJ 文件，并提供了一个[维基百科链接](http://en.wikipedia.org/wiki/Wavefront_.obj_file)，我可以用它来编写一个 Java 库，目前可以从 github 获得：[https ://github.com/mutantbob/jwavefrontobj](https://github.com/mutantbob/jwavefrontobj)

我在最近的项目中使用的另一种技术是使用 Blender 的 python API。一般的想法是，您编写的软件会在 python 方法调用时发出各种风景。然后，您手工制作这些 python 方法的定义以在搅拌机中构建对象。 [http://web.purplefrog.com/~thoth/coral/blog.html](http://web.purplefrog.com/~thoth/coral/blog.html)提供了许多示例，但它只触及了搅拌机可以完成的工作的表面。

我严重怀疑我是这个领域的先驱。多年来，它可能已被各种科学可视化所使用。

示例视频包括

*   [http://www.youtube.com/watch?v=57IEQ87KRN0](http://www.youtube.com/watch?v=57IEQ87KRN0)模拟爆炸生成多个数据流（被破坏的块、白炽球、爆炸光源）
*   [http://www.youtube.com/watch?v=9r9Q6MIUdsA](http://www.youtube.com/watch?v=9r9Q6MIUdsA)其中背景风景由 java 生成并作为 python 发出。这个角色是手工制作的。

# html - 显示大于导航栏的徽标的最佳实践

> ID：15795782
> 
> 赞同：1
> 
> 时间：2013-04-03T19:01:11.130
> 
> 标签：html, css, web, navbar, graphical-logo

我的问题是：

如果我想在导航栏左侧显示一个 100 像素 x 100 像素的徽标，但我的导航栏只有 50 像素高度......我应该如何设计 html 结构和 css 规则？

现在我使用：

```
<div id="header">
<div id="header-wrapper">
    <ul id="nav">
    <a id="logo" href="#" ></a>
    <li><a href="#"</a></li>
            <li><a href="#"</a></li>
            <li><a href="#"</a></li>
    <li><a href="#"</a></li>
    </ul><!-- #nav -->
</div><!-- #header-wrapper-->
</div><!-- #header --> 
```

CSS代码在哪里：

```
#header {
height: 50px;
position: relative;
border-bottom: 5px solid #e5dacd;
background: #1075bc;
margin-bottom: 60px;}

#header-wrapper {
margin: 0 auto;
width: 940px;}

#logo {
width:  100px;
height: 100px;
background: url(images/logo.png) no-repeat;
background-color: yellow;
display: inline-block;
*display: inline;
zoom: 1;}

#nav {
display: inline-block;
*display: inline;
zoom: 1;
vertical-align: top;
margin: 16px 0 0 0;} 
```

有没有更好的方法来做到这一点？（在灵活性或对未来修改的兼容性方面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:04:19.290

您有几个选择 - 将徽标设置为`position: absolute`并将其放置在您需要的位置，这样它就不会受到其父级高度的限制。

或者你可以尝试给它负边距并确保`overflow`标题不是`hidden`

# single-page-application - 删除 Hot Towel SPA 包 BundleConfig 在当前上下文中不存在后

> ID：15795783
> 
> 赞同：0
> 
> 时间：2013-04-03T19:01:15.227
> 
> 标签：single-page-application

我正在编写我的第一个单页应用程序，并从热毛巾模板开始。但是，要求发生了变化，我不再想使用热毛巾。因此，我使用包管理器将其删除，并注意保留所有其他文件以供现有依赖项使用。

不幸的是，我的构建引发了错误：

```
Error   1   The name 'BundleConfig' does not exist in the current context 
```

Global.asax.cs 包括：

```
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;

namespace MMG.Legacy.StudySiteComm.Web
{
// Note: For instructions on enabling IIS6 or IIS7 classic mode, 
// visit http://go.microsoft.com/?LinkId=9394801

public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
 }
} 
```

如何解决此构建错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:45:21.430

如果您没有创建任何捆绑包，那么您可以完全删除有问题的行。

BundleConfig 类不是一个特殊的类——它只是一个标准的静态类，它提供了一个方便的单一位置来将包添加到 System.Web.Optimization.BundleCollection。

如果您使用 Visual Studio“基本”MVC 项目模板创建一个全新的 MVC 项目，您将看到它在 App_Start 文件夹下创建了自己的 BundleConfig 文件。

# ruby-on-rails - RuntimeError RMagick

> ID：15795784
> 
> 赞同：0
> 
> 时间：2013-04-03T19:01:20.513
> 
> 标签：ruby-on-rails, rmagick

我需要做什么来修复这个错误

```
This installation of RMagick was configured with ImageMagick 6.6.9 but ImageMagick 6.7.5-10 is in use. 
```

app/uploaders/avatar_uploader.rb:2:in `include' app/uploaders/avatar_uploader.rb:2:in`' app/uploaders/avatar_uploader.rb:1:in `<top (required)>' app/models/user.rb:2:in`' app/models/user.rb:1:in `<top (required)>' app/controllers/users_controller.rb:1:in`'

加载以下文件时发生此错误：RMagick RMagick2.so

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:07:01.473

安装 gem 后，您可能在系统上更新了 ImageMagick，因此本机 gem 扩展与您实际安装的版本不匹配。

您应该能够重新安装 gem 以使其针对较新的 ImageMagick 6.7.5-10 构建：

```
gem install rmagick 
```

# node.js - 蛋糕文件中未定义的fs

> ID：15795785
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:01:26.040
> 
> 标签：node.js, coffeescript, cakefile

我正在尝试构建一个简单的 cakefile 来为我正在处理的节点项目执行构建任务。按照[github 的这个要点](https://gist.github.com/joshski/922990)，我设法将以下基本代码放在一起：

```
CoffeeScript = require 'coffee-script'
{exec} = require 'child_process'
fs = require 'fs'
web_build_path = 'bin/web'

task 'build', 'build server-side project code and output to bin dir', ->
    makeUnrevisionedDirs()

    #snip other methods...

makeUnrevisionedDirs = () ->
    console.log(": adding unrevisioned directories...")
    if not fs.existsSync(web_build_path)
        console.log(":: adding #{web_build_path} dir")
        fs.mkdirSync(web_build_path)
    if not fs.existsSync('logs')
        console.log(":: adding logs dir")
        fs.mkdirSync('logs')
    if not fs.existsSync('bin')
        console.log(":: adding bin dir")
        fs.mkdirSync('bin') 
```

并得到以下错误，好像`fs`从来不需要：

```
TypeError: Cannot call method 'existsSync' of undefined
  at makeUnrevisionedDirs (C:\fms\Cakefile:25:9, <js>:22:13)
  at Object.makeUnrevisionedDirs [as action] (C:\fms\Cakefile:7:2, <js>:11:5)
  at helpers.extend.invoke (C:\Users\Mike\AppData\Roaming\npm\node_modules\coffe
e-script\lib\coffee-script\cake.js:45:26)
  at Object.exports.run (C:\Users\Mike\AppData\Roaming\npm\node_modules\coffee-s
cript\lib\coffee-script\cake.js:72:21)
  at Object.<anonymous> (C:\Users\Mike\AppData\Roaming\npm\node_modules\coffee-s
cript\bin\cake:7:38)
  at Module._compile (module.js:456:26)
  at Object.Module._extensions..js (module.js:474:10)
  at Module.load (module.js:356:32)
  at Function.Module._load (module.js:312:12)
  at Function.Module.runMain (module.js:497:10)
  at startup (node.js:119:16)
  at node.js:903:3 
```

为什么`fs`在这里未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T10:23:11.807

我遇到了这个问题，发现我正在运行一个非常旧版本的 node (0.6) - 你的 require 正在悄悄地失败， fs 必须是一个不存在的更新包。

最后我安装了 n 包，升级了节点，一切都很好

[如何将 Node.js 和 npm 更新到下一个版本？](https://stackoverflow.com/questions/6237295/how-can-i-update-nodejs-and-npm-for-the-next-versions)

（转到我使用的 3 个命令的答案底部）

请注意，我也在运行 Z shell，需要告诉 shell 在找到较新版本的 node.js 之前使用 rehash 命令重新散列其可执行文件列表。

# java - 行家+gwt+日食

> ID：15795791
> 
> 赞同：0
> 
> 时间：2013-04-03T19:01:42.860
> 
> 标签：java, hibernate, gwt, maven

看来我`maven`在eclipse中配置有问题。我已经通过 eclipse 市场 maven 安装了 eclipse 和`maven`wtp，它 eclipse 无法识别 POM 的第一行。更不用说`<packaging>js</packaging>`第一行的错误部分：

```
"Project build error: Unresolveable build extension: Plugin org.codehaus.mojo:javascript-maven-plugin:2.0.0-alpha-1 or one of its dependencies could not be resolved: Could not transfer artifact org.sonatype.aether:aether-util:jar:1.11 from/to central (http://repo.maven.apache.org/maven2): No response received after 60000" 
```

这是完整的`pom.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>www.bgusched.co.il</groupId>
<artifactId>bgusched1</artifactId>
<version>0.0.1-SNAPSHOT</version>
<name>JavaScript RIA</name>
<packaging>js</packaging>
<description>A JavaScript Rich Internet Application using jQuery and jQuery UI.</description>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <org.springframework.version>3.0.1.RELAESE</org.springframework.version>
    <org.hibernate.version.>3.5.1-Final</org.hibernate.version.>
    <gwt.version>2.0.3</gwt.version>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
</properties>

<dependencies>
    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jquery-amd</artifactId>
        <version>1.7.1-alpha-1</version>
        <type>js</type>
    </dependency>
    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jquery-ui-amd</artifactId>
        <version>1.8.16-alpha-1</version>
        <type>js</type>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>$(org.springframework.version)</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>$(org.springframework.version)</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>$(org.hibernate.version)</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>$(org.hibernate.version)</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>$(org.hibernate.version)</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.8</version>
    </dependency>
    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.10</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>
</dependencies>

<build>
    <extensions>
        <extension>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>javascript-maven-plugin</artifactId>
            <version>2.0.0-alpha-1</version>
        </extension>
    </extensions>
</build>

<!-- FIXME: Temporary declaration of Codehaus repos until this moves to Maven Central -->
<repositories>
  <repository>
    <id>JBoss</id>
    <name>JBoss Repsitory</name>
    <layout>default</layout>
    <url>http://repository.jboss.org/maven2</url>
</repository>
    <repository>
        <id>snapshots</id>
        <url>https://nexus.codehaus.org/content/repositories/snapshots/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>snapshots</id>
        <url>https://nexus.codehaus.org/content/repositories/snapshots/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories> 
```

我从一些用于构建`hibernate-gwt-maven`项目的在线教程中获取了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:43:20.527

这可能意味着您的本地或全局 maven 存储库中没有 javascript-maven-plugin-2.0.0-alpha-1.jar 和 aether-util-1.11.jar。

[您可以在此处](http://search.maven.org/#artifactdetails%7Corg.sonatype.aether%7Caether-util%7C1.13.1%7Cjar)的中央仓库找到可用的 javascript-maven-plugin 和 aether-util 版本。尝试将它们下载并安装到您的本地 m2 存储库。

**注意 -**它们似乎是可选的，我相信您可以完全从构建标签中放弃扩展标签。它们可能仅有助于压缩/清理 jquery js 文件（暂时忽略它们）

# java - 使用 jsoup 解析 html 并移除标签块

> ID：15795796
> 
> 赞同：7
> 
> 时间：2013-04-03T19:02:04.347
> 
> 标签：java, jsoup

我想删除标签之间的所有内容。一个示例输入可能是

输入：

```
<body>
  start
  <div>
    delete from below
    <div class="XYZ">
      first div having this class
      <div>
        waste
      </div>
      <div class="XYZ">
        second div having this class
      </div>
      waste
    </div>
    delete till above
  </div>
  <div>
    this will also remain
  </div>
  end
</body> 
```

输出将是：

```
<body>
  start
  <div>
    delete from below
    delete till above
  </div>
  <div>
    this will also remain
  </div>
  end
</body> 
```

基本上，我必须删除第一次出现的整个块`<div class="XYZ">`

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T19:18:12.287

您最好遍历找到的*所有*元素。所以你可以放心

*   a.) 所有元素都被删除并且
*   b.) 如果没有元素，则什么都不做。

**例子：**

```
Document doc = ...

for( Element element : doc.select("div.XYZ") )
{
    element.remove();
} 
```

* * *

**编辑：**

*（对我的评论的补充）*

*当一个简单的空/范围检查*就足够时，不要使用异常处理：

```
doc.select("div.XYZ").first().remove(); 
```

反而：

```
Elements divs = doc.select("div.XYZ");

if( !divs.isEmpty() )
{
    /*
     * Here it's safe to call 'first()' since there at least one element.
     */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:12:04.773

试试这个代码：

```
String data = null;
    BufferedReader br = new BufferedReader(new FileReader("e://XMLFile.xml"));
    StringBuilder builder = new StringBuilder();
    while ((data = br.readLine()) != null) {
        builder.append(data);
    }
    System.out.println(builder);
    String replaceAll = builder.toString().replaceAll("<div class=\"XYZ\".+?</div>", "");
    System.out.println(replaceAll); 
```

我已经从文件中读取了输入 XML，并通过逐行读取将其存储在 StringBuilder 对象中，然后替换了整个**标签将为空字符串。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-19T10:34:14.723

这可能会对您有所帮助。

```
 String selectTags="div,li,p,ul,ol,span,table,tr,td,address,em";
 /*selecting some specific tags */
 Elements webContentElements = parsedDoc.select(selectTags); 
 String removeTags = "img,a,form"; 
 /*Removing some tags from selected elements*/
 webContentElements.select(removeTags).remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:25:39.737

我昨天问了这个问题，感谢ollo的回答。解决了。有上述问题的延伸。我不知道我是否必须开始一个新帖子或链接这个。因此，在这种混乱中，我将其链接在这里.. 请管理员，如果我不得不为此单独发帖，请原谅我。

在上述问题中，我必须删除具有匹配组件的标签块。

真正的场景是：它应该删除带有匹配组件的标签块+删除`<br />`它周围。

参考上面的例子。

```
<body>
  start
  <div>
    delete from below
    <br />
    <br />
    <div class="XYZ">
      first div having this class
      <div>
        waste
      </div>
      <div class="XYZ">
        second div having this class
      </div>
      waste
    </div>
    <br />
    delete till above
  </div>
  <div>
    this will also remain
  </div>
  end
</body> 
```

也应该给出相同的输出：

```
<body>
  start
  <div>
    delete from below
    delete till above
  </div>
  <div>
    this will also remain
  </div>
  end
</body> 
```

因为它有`<br />`上面和下面的 html 标签块要删除....

只是为了重新迭代，我正在使用 ollo 给出的解决方案来匹配和删除标记块。

```
for( Element element : doc.select("div.XYZ") )
{
    element.remove();
} 
```

谢谢，谢卡尔**

# vba - 如何查找当前打开的会议项目是取消会议项目还是删除的会议项目？

> ID：15795798
> 
> 赞同：0
> 
> 时间：2013-04-03T19:02:09.290
> 
> 标签：vba, outlook, vsto, outlook-addin, outlook-2010

如何查找当前打开的会议项目是取消会议项目还是删除的会议项目？

我需要通过 Outlook 对象模型找到它。

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T02:20:31.300

类在此处描述

[http://msdn.microsoft.com/en-us/library/office/bb208118(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb208118(v=office.12).aspx)

[http://office.microsoft.com/en-au/outlook-help/HV080804810.aspx](http://office.microsoft.com/en-au/outlook-help/HV080804810.aspx)

您将需要 olMeetingCancellation。

# python - 在列表理解中创建多个生成器

> ID：15795799
> 
> 赞同：6
> 
> 时间：2013-04-03T19:02:14.097
> 
> 标签：python, generator, list-comprehension

我正在尝试将相同套装（颜色）的卡片分组并在生成器中排名并将这些生成器存储在列表理解中。

除了所有生成器都包含完全相同的卡片这一事实之外，我想出的解决方案就是这样做的。知道为什么吗？

这是代码

```
deck=range(52)

gens=[(i for i in deck if i%13==v) for v in range(13)] 
```

基于此，我期望例如：

```
gens[1].next()
1
gens[1].next()
14

gens[10].next()
10
gens[10].next()
23 
```

但相反我得到

```
gens[1].next()
12

gens[1].next()
25

gens[1].next()
38 
```

并且列表中的所有生成器都返回相同的结果..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:09:31.810

问题是`v`生成器表达式中的名称指`v`的是列表理解中的该变量。因此，当您的生成器表达式实际运行的代码时（当您调用 时`next`），它会查看变量`v`并查看 value `12`，无论`v`您创建生成器时的值是什么。

一种解决方法：

```
deck = range(52)

def select_kth(v):
    return (i for i in deck if i % 13 == v)

gens = [select_kth(v) for v in range(13)] 
```

因为我们定义了一个函数，所以名称`v`可以存在于它自己的命名环境中，因此不会被修改。

如果你真的想要，你可以在一行中做到这一点：

```
 gens = [(lambda v: (i for i in deck if i % 13 == v))(v) for v in range(13)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:11:10.980

如果你把它变成等效的嵌套循环，你可以更容易地看到范围问题：

```
gens = []
for v in range(13):
    def gen():
        for i in deck:
            if i%13 == v:
                yield i
    gens.append(gen()) 
```

你最终会得到 13 个生成器，它们都绑定到相同的值`v`12。

因此，这里的解决方案与任何其他范围问题的解决方案相同：您需要在其中创建一个新范围`v`。最简单的方法是创建一个新函数：

```
gens = [(lambda x: (i for i in deck if i%13==x)(v) for v in range(13)] 
```

# css - 在同一个div中以不同方式对齐两个元素

> ID：15795804
> 
> 赞同：5
> 
> 时间：2013-04-03T19:02:28.747
> 
> 标签：css, html

我在一个 div 中有多个元素。

我想将一个元素对齐为“text-align：right”，另一个元素对齐为“text-align：left”

检查以下代码：

```
<div class="image_meaning" style="display: none; background-color: white; height: 35px; margin-left: 1px;">
    <input type="checkbox" id="points" value="Temporal Filter" style="text-align: left; "/>
    <label for="tempral_filter" style="text-align: left; ">Points</label>

    <img style="text-align: right;" src="{{ STATIC_URL }}img/cross.png"/>-abc
    <img style="text-align: right;" src="{{ STATIC_URL }}img/blue_triangle.png"/>-cde
</div> 
```

但是当我运行代码时，它会将两个元素都放在左侧。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T20:06:24.967

## 回答

有几种方法可以解决您的问题，最常见的一种是使用 css`float`属性（截至 2016 年）。更现代的方法是使用 flexbox 或网格。

### 解决方案使用`flexbox`

你可以`display: flex`用来做这个。

Flexbox 仅[支持较新的浏览器](http://caniuse.com/#search=flex)，如果 IE（9 及以下）是您的朋友，请远离此方法。

示例 html：

```
<div class="wrapper">
    <div class="block"></div>
    <div class="block"></div>
</div> 
```

示例 CSS：

```
.wrapper { display: flex; }
.block { width: 50%; } 
```

[现场演示](http://jsbin.com/oVobaFuK/1)。

### 解决方案使用`grid`

您可以使用~~new~~ `display: grid`来执行此操作。

网格布局仅[受最现代的浏览器支持](http://caniuse.com/#feat=css-grid)（2017 年 9 月），如果您在[常青浏览器](https://www.techopedia.com/definition/31094/evergreen-browser)上构建，那么很好，如果不使用`flex`.

示例 html：

```
<div class="wrapper">
    <div class="block"></div>
    <div class="block"></div>
</div> 
```

示例 CSS：

```
.wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
} 
```

[现场演示](http://jsbin.com/wisayafava/1/edit?html,css,output)。

### 解决方案使用`float`

css`float`属性是执行此操作的经典方法，可以追溯到史前时代，因此它基本上支持所有浏览器。唯一需要注意的是 clearfix 问题（见下文）。

示例 html：

```
<div class="wrapper">
    <div class="block-left"></div>
    <div class="block-right"></div>
</div> 
```

示例 CSS：

```
.block-left { float: left; }
.block-right { float: right; } 
```

请注意，浮动元素会导致其父级在涉及高度时忽略它们。如果这是一个问题（通常是），您可以使用[clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)来解决这种情况。

你可以这样定义它：

```
.cf:before,
.cf:after {
  content: " ";
  display: table;
}

.cf:after { clear: both; } 
```

然后在您的父元素上：

```
<div class="wrapper cf"> 
```

这将允许父级正确接收浮动元素的高度。

阅读有关[什么是 clearfix hack 的](https://stackoverflow.com/questions/8554043/what-is-a-clearfix)更多信息。

[现场演示](http://jsbin.com/axonuw/6)。

* * *

## 其他解决方案

### 解决方案使用`inline-block`

您也可以使用 inline-block 属性将元素并排放置。

请注意，该`inline-block`选项需要考虑块之间的 html 中的空白。为了解决这个问题，可以像下面这样删除空格，添加负边距或将`font-size`父级上的 定义为 0。

示例 html：

```
<div class="wrapper">
    <div class="block"></div><div class="block"></div>
</div> 
```

示例 CSS：

```
.block { display: inline-block; }

/* Optional zero font for wrapper
   Then reset blocks to normal font-size */
.wrapper { font-size: 0; }
.block { font-size: 16px; }

/* Optional negative margin if you can't
   remove space manually in the html.
   Note that the number is per use case. */
.block { margin-left: -.25em; } 
```

[现场演示](http://jsbin.com/ecodub/1)。

### 解决方案使用`position: absolute`

另一种方法是使用相对容器绝对定位您的元素。在构建响应式布局等时，这种方法的灵活性不如其他方法。

示例 html：

```
<div class="wrapper">
    <div class="block block-left"></div>
    <div class="block block-right"></div>
</div> 
```

示例 CSS：

```
.wrapper { position: relative; }
.block { position: absolute; }

.block-left { left: 0; }
.block-right { right: 0; } 
```

[现场演示](http://jsbin.com/avizuv/1)。

* * *

## 为什么您的解决方案不起作用

您正在使用`text-align`将影响内联元素和文本的 css 属性，但不能像使用该`float`属性一样使用它来移动元素。

该`text-align`属性影响它所应用的元素的子元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:34:06.767

使用`float: left`and`float: right`代替`text-align`

# javascript - 从输入字段的字符串值创建对象

> ID：15795809
> 
> 赞同：0
> 
> 时间：2013-04-03T19:02:46.753
> 
> 标签：javascript

我有一个类似于的输入隐藏字段：-

```
< input type="hidden" name="dateRange" id="dateRange" value="'2013-04-03','2013-04-04','2013-04-05','2013-04-10'"/> 
```

我需要使用此输入字段的值在 javascript 中创建一个对象。喜欢：-

```
var dates_allowed = {
      '2013-04-03': 1,
      '2013-04-04': 1,
      '2013-04-05': 1,
      '2013-04-10': 1,
}; 
```

我尝试了以下方法；

```
var dateRange=document.getElementById("dateRange").value;
var dates_allowed_Array = dateRange.split(",");
var dates_allowed1 = {};
for (i=0; i<dates_allowed_Array.length;i++) {
    var innerloop = dates_allowed_Array[i] ;
    dates_allowed[innerloop]=1;
    } 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:07:11.347

我想你只是有一个错字。您声明`dates_allowed1`但随后使用`dates_allowed`

当我修复它时它工作正常，正如你可以通过这个小提琴看到的那样：http: [//jsfiddle.net/9Gfj2/](http://jsfiddle.net/9Gfj2/)

固定代码：

```
var dateRange=document.getElementById("dateRange").value;
var dates_allowed_Array = dateRange.split(",");
var dates_allowed = {};
for (i=0; i<dates_allowed_Array.length;i++) {
    var innerloop = dates_allowed_Array[i] ;
    dates_allowed[innerloop]=1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:11:15.090

var dates_allowed1 应该是 var dates_allowed

另外，你想去掉单引号还是保留它们？

# css - 960gs 垂直填充 div CSS

> ID：15795810
> 
> 赞同：1
> 
> 时间：2013-04-03T19:02:49.510
> 
> 标签：css, html, 960.gs

我知道这个 CSS 问题在互联网上随处可见。但是我很难让紫色和绿色的 div 填充它们的剩余空间，因此它们与黄色 twitter 提要的高度相同：

[http://jsfiddle.net/n5558/](http://jsfiddle.net/n5558/)

HTML

```
<div id="main">
    <div id="primary" class="home">
        <div id="content" role="main">
            <div id="main-content" class="container_12">
                <div id="info" class="grid_4">
                    <div id="networking">
                            <h2>RSViP - Business Networking</h2>

                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In rhoncus lobortis orci, sed vestibulum leo dapibus et. Fusce in dolor velit, sit amet vehicula est. Integer elit sapien.</p>  <a href="">Apply for Business Networking</a>
    <a href="">Free Trial</a>

                    </div>
                    <div id="card">
                            <h2>RSViP - Card</h2>

                    </div>
                </div>
                <div id="twitter" class="grid_4">
                        <h2>News / Twitter Feed</h2>

                    <ul>
                        <li>
                            <p>Details of our next Business Network Social &amp; 5th Birthday have been finalised- Invitations going out tomorrow to members <a href="http://www.twitter.com/HartsNottingham" target="_blank">@HartsNottingham</a>

                            </p>
                            <p id="date">3rd Apr 04:57 PM</p>
                        </li>
                        <li>
                            <p>Details of our next Business Network Social &amp; 5th Birthday have been finalised- Invitations going out tomorrow to members <a href="http://www.twitter.com/HartsNottingham" target="_blank">@HartsNottingham</a>

                            </p>
                            <p id="date">3rd Apr 04:08 PM</p>
                        </li>
                        <li>
                            <p>Details of our next Business Network Social &amp; 5th Birthday have been finalised- Invitations going out tomorrow to members <a href="http://www.twitter.com/HartsNottingham" target="_blank">@HartsNottingham</a>

                            </p>
                            <p id="date">3rd Apr 03:28 PM</p>
                        </li>
                        <li>
                            <p>Details of our next Business Network Social &amp; 5th Birthday have been finalised- Invitations going out tomorrow to members <a href="http://www.twitter.com/HartsNottingham" target="_blank">@HartsNottingham</a>

                            </p>
                            <p id="date">3rd Apr 03:28 PM</p>
                        </li>
                    </ul>
                </div>
                <div id="col3" class="grid_4">
                        <h2>RSViP Free Subscription</h2>

                </div>
            </div>
        </div>
    </div>
</div> 
```

CSS

```
.home #main-content {
    margin-top: 23px;
    margin-bottom: 23px;
    height: 100%;
}

/*Col1 - Info*/
.home #info {
    width: 270px;
    padding-right: 30px;
    background: url('images/divider.png') repeat-y top right;
    height: 100%;
    background: purple;
}

/*Col2 - Twitter*/
.home #twitter {
    padding-left: 10px;
    width: 290px;
    background: yellow;
}

.home #twitter ul {
    list-style: none;
    margin: 0; padding: 0;
}

/* Col3 */
.home #col3 {
    background: green;
}

/* 960.gs */ 
```

谢谢你，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:14:19.487

这是我的解决方案/破解有效：

```
.home #main-content {
    margin-top: 23px;
    margin-bottom: 23px;
    overflow: hidden;
}

.home #main-content div {
    padding-bottom: 9999px;
    margin-bottom: -9999px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T19:19:43.607

您可以使用 jquery 轻松完成。[http://jsfiddle.net/Bushwazi/tuKEJ/](http://jsfiddle.net/Bushwazi/tuKEJ/)

```
$('#main-content > div').height($('#main-content').height()); 
```

# android - 使用 achartengine，如何在不使用 x 标签的情况下设置 x 轴值？

> ID：15795811
> 
> 赞同：2
> 
> 时间：2013-04-03T19:02:50.280
> 
> 标签：android, graph, achartengine

对于我的 Android 应用程序，我需要让 x 轴代表频率轴。目前，我暂时使用 myRenderer.setXlabels() 。但是，这对我的应用程序来说不够有效，因为一旦设置了最小和最大 x 轴标签，如果缩小图形，则在最小 X 标签的左侧和右侧没有 x 轴值的最大 X 标签。此外，如果放大，只存在我明确具有程序标签的 x 轴值。因此，如果您放大至少 2 倍，则不会显示 x 轴值 = :(

在 AChartEngine Demo 应用程序中，他们有一个三角函数示例，他们在其中绘制了 0 到 360 度的正弦和余弦波。与此示例类似，我希望我的频率轴从 0 变为采样频率的一半，即 22050 (22.05e3)，这样如果放大或缩小，总是存在相对于数据点的 x 轴值.

我将要绘制的数据点数量通常非常大（大致在 10,000 - 40,000 个点之间），但我一次只需要在图表中绘制一条（或一系列）数据。

如果有人知道如何在不使用标签的情况下做到这一点，我将不胜感激。:)

* * *

## 更新（带示例）：

**下面**- Matlab 代码来表示我所说的频率轴：

```
x = [0 5 -5 3 -3 1 -1 0];
X = fft(x);
absX = abs(X);
subplot(2,1,1)
plot(abs_X)
title('(a) General x-axis')

freq_axis = linspace(0,22.05e3,8);
subplot(2,1,2)
plot(freq_axis,abs_X)
title('(b) Frequency x-axis (Linearly-spaced)') 
```

根据 Matlab 定义：

**linspace** - 线性间隔向量。
**linspace(X1, X2)**在 X1 和 X2 之间生成 100 个线性等距点的行向量。

**linspace(X1, X2, N)**在 X1 和 X2 之间生成 N 个点。对于 N = 1，linspace 返回 X2。

![(a) 一般 x 轴（时域），(b) 线性间隔频率 x 轴（频域）](https://i.stack.imgur.com/WxN5m.png)

因此，在更简单的上下文中，我只想弄清楚如何更改 x 轴值以表示其他数值（从时域 x 值转换为频域 x 轴值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:26:48.687

您可以使用以下方法添加自定义标签：

```
renderer.addXTextLabel(x, "text"); 
```

如果您只想要自定义标签，那么您可以禁用默认标签：

```
renderer.setXLabels(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:08:27.880

好吧，我解决了我自己的问题。而且由于在发布此问题之前我在 stackoverflow.com 上找不到太多帮助，因此我将提供我的解决方案，以防其他人对**如何更改 x（或 y）轴上的数值**感到好奇。

```
/**
* sampling frequency
*/
private final int fs = 44100;

/**
* last x-value, (starting x-value = 0)
*/
private final int endValue = fs/2;

public XYMultipleSeriesDataset getFrequencyAxis(double[] fftData) {
    XYMultipleSeriesDataset rangeData = new  XYMultipleSeriesDataset();

    String[] titles  = new String[] { "FFT data" };     // titles of data
    List<double[]> xAxis = new ArrayList<double[]>(1);  // x-axis values
    List<double[]> values = new ArrayList<double[]>(1); // y-axis values

    // Need to have just as many x values as y values
    xAxis.add(new double[fftData.length]);  
    values.add(new double[fftData.length]);

    // Linearly-spaced x-axis values -> increment must be kept constant 
    double increment = (endValue)/fftData.length;  // (fs/2)/length of data
    for(int i =0; i < fftData.length; i++) {
        xAxis.get(0)[i] = i * increment;
        values.get(0)[i] = fftData[i];
    }

    // for the buildDataset method call:
    rangeData = dataBuilder(titles, xAxis, values);
    return rangeData;
}

private XYMultipleSeriesDataset dataBuilder(String[] titles,
        List<double[]> xValues, List<double[]> yValues) {

    XYMultipleSeriesDataset dataset1 = new XYMultipleSeriesDataset();
    addXYSeries(dataset1, titles, xValues, yValues, 0);
    return dataset1;
}

private void addXYSeries(XYMultipleSeriesDataset dataset, String[] titles,
        List<double[]> xValues, List<double[]> yValues, int scale) {

    int length = titles.length; // # of series to add to plot
    for (int i = 0; i < length; i++) {

        // maps the x-axis values to their respective y-axis values
        double[] xV = xValues.get(i);
        XYSeries series = new XYSeries(titles[i], scale);
        double[] yV = yValues.get(i);
        int seriesLength = xV.length;
        for (int k = 0; k < seriesLength; k++) {
            series.add(xV[k], yV[k]);
        }
        dataset.addSeries(series);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:33:00.703

正如[Dan 在他的回答中](https://stackoverflow.com/a/15814046/1752560)所说，您可以使用它`renderer.addXTextLabel(x, "text");`来设置 x 轴值。

在你的情况下::

你需要频率，所以试试这个..

```
for(int i=0; i< x.Length; i++)
 {
   multiRenderer.addXTextLabel(i, Getfreq(x[i]));   
 } 
```

其中`Getfreq(x[i])`是另一种为不同值生成不同频率`x`并返回字符串以显示在 x 轴上的方法。

```
 public String Getfreq(int i)
 {
    //put the android code to calculate frequency
   freqxlable = Freq(i); //put actual function that will calculate frequency 
   Srting s = freqxlable +"":
   return s;
 } 
```

希望这能解决，如果有任何问题评论...

# ruby - 删除播放列表时出现 Ruby Youtube Data API gem 错误

> ID：15795813
> 
> 赞同：0
> 
> 时间：2013-04-03T19:02:56.973
> 
> 标签：ruby, youtube-api

当我执行`youtube.playlists.delete`请求时，我会回来

```
NoMethodError: undefined method `[]' for nil:NilClass
    from /Users/me/.rvm/gems/ruby-1.9.2-p320@vidyard_dashboard/gems/google-api-      client-0.4.4/lib/google/api_client/result.rb:53:in `media_type'
    from /Users/me/.rvm/gems/ruby-1.9.2-p320@vidyard_dashboard/gems/google-api-client-0.4.4/lib/google/api_client/result.rb:57:in `data?'
    from /Users/me/.rvm/gems/ruby-1.9.2-p320@vidyard_dashboard/gems/google-api-client-0.4.4/lib/google/api_client.rb:775:in `execute!' 
```

当播放列表被删除时，该请求似乎实际上通过了，但无论出于何种原因，在返回的路上仍然会引发错误。请求的基本代码如下所示：

```
yt.client.execute!(
    :api_method => yt.youtube.playlists.delete, 
    :parameters => {:id => 'youtube_playlist_id'}
) 
```

# html - 替换 HTML 文件中子字符串中的空格

> ID：15795818
> 
> 赞同：1
> 
> 时间：2013-04-03T19:03:18.663
> 
> 标签：html, regex, sed

我有一些 html 文件，其中包含指向文件名包含空格的文件的链接。例如，

```
The rain in spain ... 
<a href="/path/filename with space.xls">Filename</a>
falls mainly on the plain.

<a href="/path/2nd filename with space.doc">2nd Filename</a> 
```

文件中通常有多个这样的链接。我想仅替换文件名本身中的空格，但不要触摸文件中其他地方的空格。例如：

```
<a href="/path/filename_with_space.xls">Filename</a> 
```

我已经尝试过使用 SED，但我似乎无法将替换隔离在 2 个正则表达式模式之间（sed 似乎逐行工作）。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:11:19.503

[不要对这个问题使用正则表达式](https://stackoverflow.com/a/1732454/1253312)。使用 html 解析器。这是 Python 中使用 BeautifulSoup 的解决方案：

```
from BeautifulSoup import BeautifulSoup

with open('Path/to/file', 'r') as content_file:
    content = content_file.read()

soup = BeautifulSoup(content)
for a in soup.findAll('a')
  a['href'] = a['href'].replace(" ", "_")

with open('Path/to/file.modified', 'w') as output_file:
    output_file.write(str(soup)) 
```

# spring - 防止休眠 StaleObjectStateException 发生

> ID：15795819
> 
> 赞同：4
> 
> 时间：2013-04-03T19:03:19.970
> 
> 标签：spring, hibernate, jpa, spring-data-jpa

我对 Spring 控制器方法有疑问。它实际上对导致**StaleObjectStateException**的同一实体进行了两次更新。

问题是，当我检索 Member 实例时，我认为它以某种方式导致了`//UPDATE ONE`Advertisement 实例的更新（参见 参考资料）（这实际上是不需要的），而当我更新 Advertisement 实例时（参见参考资料`//UPDATE TWO`），它会抛出**StaleObjectStateException**。

我的问题是如何防止在我的情况下发生此异常（请记住我使用 Spring Data JPA）？

这是`Member`实体类：

```
@Entity
public class Member {
...
@OneToMany(fetch = FetchType.LAZY, mappedBy = "member")
private List<Advertisement> advertisements;
... 
```

在`Advertisement`实体类中：

```
@NotNull
@ManyToOne(fetch = FetchType.LAZY)
private Member member; 
```

这是控制器方法：

```
@RequestMapping(value = "/family/advertisement/edit", method = RequestMethod.POST, produces = "text/html")
    public String editFamilyAdvertisement(@ModelAttribute @Validated(value = Validation.AdvertisementCreation.class) FamilyAdvertisementInfo familyAdvertisementInfo,           BindingResult bindingResult, Model model) {
        Member member = memberService.retrieveCurrentMember();//UPDATE ONE
        if (!advertisementService.advertisementBelongsToMember(familyAdvertisementInfo.getFamilyAdvertisement(), member)) {
            throw new IllegalStateException("advertisement does not belong to member");
        }
        if (bindingResult.hasErrors()) {
            populateModel(model, familyAdvertisementInfo);
            return "family/advertisement/edit";
        }
        familyAdvertisementInfo.getFamilyAdvertisement().setMember(member);
        advertisementService.editFamilyAdvertisement(familyAdvertisementInfo.getFamilyAdvertisement());//UPDATE TWO
        return "redirect:/family/advertisement/edit/" + familyAdvertisementInfo.getFamilyAdvertisement().getId();
    } 
```

这是堆栈跟踪：

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.FamilyAdvertisement#1]
    org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:303)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:903)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:887)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)
    org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:366)
    com.sun.proxy.$Proxy45.merge(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:241)
    com.sun.proxy.$Proxy44.merge(Unknown Source)
    org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:345)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    com.sun.proxy.$Proxy52.save(Unknown Source)
    com.bignibou.service.AdvertisementServiceImpl_Roo_Service.ajc$interMethod$com_bignibou_service_AdvertisementServiceImpl_Roo_Service$com_bignibou_service_AdvertisementServiceImpl$updateFamilyAdvertisement(AdvertisementServiceImpl_Roo_Service.aj:58)
    com.bignibou.service.AdvertisementServiceImpl.updateFamilyAdvertisement(AdvertisementServiceImpl.java:1)
    com.bignibou.service.AdvertisementServiceImpl_Roo_Service.ajc$interMethodDispatch1$com_bignibou_service_AdvertisementServiceImpl_Roo_Service$com_bignibou_service_AdvertisementServiceImpl$updateFamilyAdvertisement(AdvertisementServiceImpl_Roo_Service.aj)
    com.bignibou.service.AdvertisementServiceImpl.editFamilyAdvertisement(AdvertisementServiceImpl.java:27)
    com.bignibou.controller.AdvertisementController.editFamilyAdvertisement(AdvertisementController.java:85)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

**编辑1**：

SQL 日志：

```
2013-04-06 11:23:24,339 [http-bio-8080-exec-9] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.bignibou.controller.AdvertisementController.editFamilyAdvertisement(com.bignibou.controller.helpers.FamilyAdvertisementInfo,org.springframework.validation.BindingResult,org.springframework.ui.Model)]
Hibernate: 
    /* load com.bignibou.domain.GeolocationPostcode */ select
        geolocatio0_.id as id8_0_,
        geolocatio0_.postcode as postcode8_0_,
        geolocatio0_.version as version8_0_ 
    from
        geolocation_postcode geolocatio0_ 
    where
        geolocatio0_.id=?
Hibernate: 
    /* load com.bignibou.domain.Member */ select
        member0_.id as id6_1_,
        member0_.activated as activated6_1_,
        member0_.address as address6_1_,
        member0_.email as email6_1_,
        member0_.last_connection_date as last4_6_1_,
        member0_.password as password6_1_,
        member0_.registration_date as registra6_6_1_,
        member0_.role as role6_1_,
        member0_.token as token6_1_,
        member0_.version as version6_1_,
        address1_.id as id3_0_,
        address1_.formatted_address as formatted2_3_0_,
        address1_.latitude as latitude3_0_,
        address1_.longitude as longitude3_0_,
        address1_.version as version3_0_ 
    from
        member member0_ 
    left outer join
        address address1_ 
            on member0_.address=address1_.id 
    where
        member0_.id=?
Hibernate: 
    /* load one-to-many com.bignibou.domain.Member.advertisements */ select
        advertisem0_.member as member6_1_,
        advertisem0_.id as id0_1_,
        advertisem0_.id as id0_0_,
        advertisem0_.active as active0_0_,
        advertisem0_.creation_date as creation3_0_0_,
        advertisem0_.description as descript4_0_0_,
        advertisem0_.expiration_date as expiration5_0_0_,
        advertisem0_.member as member0_0_,
        advertisem0_.validated as validated0_0_,
        advertisem0_.version as version0_0_,
        advertisem0_.childminder_status as childmin1_10_0_,
        advertisem0_.clazz_ as clazz_0_ 
    from
        ( select
            id,
            active,
            creation_date,
            description,
            expiration_date,
            validated,
            version,
            member,
            null as childminder_status,
            1 as clazz_ 
        from
            family_advertisement 
        union
        select
            id,
            active,
            creation_date,
            description,
            expiration_date,
            validated,
            version,
            member,
            childminder_status,
            2 as clazz_ 
        from
            childminder_advertisement 
    ) advertisem0_ 
where
    advertisem0_.member=? 
```

广告：

```
@RooJavaBean
@RooToString
@RooEquals
@RooJpaEntity(inheritanceType = "TABLE_PER_CLASS")
@Entity
@DynamicUpdate
public abstract class Advertisement {

    @ElementCollection
    private Set<ChildcareType> childcareTypes;

    @ManyToMany
    private List<DayToTimeSlot> dayToTimeSlots;

    @NotNull(groups = { Validation.AdvertisementCreation.class })
    @ManyToMany
    private Set<GeolocationPostcode> postcodes;

    @NotNull(groups = { Default.class })
    @Size(min = 6, max = 300, groups = { Default.class, Validation.AdvertisementCreation.class })
    @Column(length = 300)
    private String description;

    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(pattern = "dd/MM/yyyy HH:mm:ss")
    private Date creationDate;

    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(pattern = "dd/MM/yyyy HH:mm:ss")
    private Date expirationDate;

    @NotNull(groups = { Default.class })
    private boolean active;

    @NotNull(groups = { Default.class })
    private boolean validated;

    @NotNull
    @ManyToOne(fetch = FetchType.LAZY)
    private Member member;

    public abstract boolean isChildcareTypesValid();

    @AssertTrue(groups = { Validation.AdvertisementCreation.class })
    public boolean isPostcodesValid() {
        return (postcodes != null && !postcodes.isEmpty());
    }

} 
```

家庭广告：

```
@RooJavaBean
@RooToString
@RooEquals
@RooJpaEntity
@Entity
@DynamicUpdate
public class FamilyAdvertisement extends Advertisement {

    @NotNull(groups = Validation.AdvertisementCreation.class)
    @ElementCollection
    private Set<Need> needs;

    @ElementCollection
    private Set<ChildminderStatus> childminderStatuses;

    @AssertTrue
    @Override
    public boolean isChildcareTypesValid() {
        return true;
    }

    @AssertTrue
    public boolean isNeedsValid() {
        if (needs.isEmpty()) {
            return false;
        }
        if (needs.contains(Need.CHILDMINDER_TO_FAMILY)) {
            return false;
        }
        return true;
    }

} 
```

**编辑 2**：我必须提到**我使用 Spring Roo + JPA 默认提供的实体版本控制。**我很确定必须考虑到这一点。

**编辑 3**：我已经设置了一个示例应用程序，在 github 上演示了这个[问题。](https://github.com/balteo/sample-app-gab)任何希望帮助我的人都可以克隆该应用程序，如下所示：`git clone https://github.com/balteo/sample-app-gab`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-27T10:23:28.677

我有一个类似的问题。这是我运行时遇到的错误`mvn test`：

org.hibernate.StaleObjectStateException：行被另一个事务更新或删除（或未保存值映射不正确）

这是因为，我错误`version`地将实体的字段初始化为`NULL`：

```
mysql> select * from lap;
+----+-------------+---------------------+------+------------------+---------+---------+
| id | code        | cumulative_distance | name | partial_distance | version | race_id |
+----+-------------+---------------------+------+------------------+---------+---------+
|  1 | AF0CUL00011 |                1000 | LAP1 |             1000 |    NULL |       1 |
|  2 | AQ000000012 |                2000 | LAP2 |             1000 |    NULL |       2 |
|  3 | AR000000013 |                3000 | LAP3 |             1000 |    NULL |       3 |
|  4 | AR0000N0114 |                4000 | LAP4 |             1000 |    NULL |       4 |
+----+-------------+---------------------+------+------------------+---------+---------+
4 rows in set (0.00 sec) 
```

有一次，我用 0 初始化该`version`字段，一切正常：

```
mysql> select * from lap;
+----+-------------+---------------------+------+------------------+---------+---------+
| id | code        | cumulative_distance | name | partial_distance | version | race_id |
+----+-------------+---------------------+------+------------------+---------+---------+
|  1 | AF0CUL00011 |                1000 | LAP1 |             1000 |       0 |       1 |
|  2 | AQ000000012 |                2000 | LAP2 |             1000 |       0 |       2 |
|  3 | AR000000013 |                3000 | LAP3 |             1000 |       0 |       3 |
|  4 | AR0000N0114 |                4000 | LAP4 |             1000 |       0 |       4 |
+----+-------------+---------------------+------+------------------+---------+---------+
4 rows in set (0.00 sec) 
```

我希望它有帮助，奥古斯丁

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T09:08:55.860

“org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[com.bignibou.domain.FamilyAdvertisement#1]”表明问题的两个原因 - 一些意外更新（这将考虑到您正在选择数据，这很奇怪）或 JPA 映射中的错误。

请添加 SQL 查询日志并发布 JPA 生成的 SQL 查询。也请张贴 FamilyAdvertisment 类。查询日志取决于 JPA 提供程序（请参阅此处以获取提示：[如何查看 JPA 发出的 SQL 查询？](https://stackoverflow.com/questions/4362876/how-to-view-the-sql-queries-issued-by-jpa)）

# ssas - 如何添加具有另一个维度值的列？

> ID：15795823
> 
> 赞同：0
> 
> 时间：2013-04-03T19:03:33.897
> 
> 标签：ssas, mdx, mondrian

如果标题没有意义，我深表歉意。我正在尝试做一些可能很简单的事情，但我无法弄清楚，我不确定如何寻找答案。我有以下 MDX 查询：

```
SELECT
  event_count ON 0,
  TOPCOUNT(name.children, 10, event_count) ON 1
FROM
  events 
```

它返回如下内容：

```
|               | event_count |
+---------------+-------------+
| P Davis       |         123 |
| J Davis       |         123 |
| A Brown       |         120 |
| K Thompson    |         119 |
| R White       |         119 |
| M Wilson      |         118 |
| D Harris      |         118 |
| R Thompson    |         116 |
| Z Williams    |         115 |
| X Smith       |         114 | 
```

我需要增加一列 ( `gender`)。性别不是衡量标准。这只是数据的另一个维度。例如，考虑这个查询：

```
SELECT
  gender.children ON 0,
  TOPCOUNT(name.children, 10, event_count) ON 1
FROM
  events 
```

但这不是我想要的！:(

```
|              | female | male | unknown |
+--------------+--------+------+---------+
| P Davis      |        |      |     123 |
| J Davis      |        |  123 |         |
| A Brown      |        |  120 |         |
| K Thompson   |        |  119 |         |
| R White      |    119 |      |         |
| M Wilson     |        |      |     118 |
| D Harris     |        |      |     118 |
| R Thompson   |        |      |     116 |
| Z Williams   |        |      |     115 |
| X Smith      |        |      |     114 | 
```

不错的尝试，但我只想要三列：`name`、`event_count`和`gender`。它能有多难？

显然，这反映了我对 MDX 缺乏了解。任何指向质量介绍材料的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:48:48.223

重要的是要了解，在 MDX 中，您是在每个轴上构建成员*集*，而不是像表格行集那样指定列名。您正在描述结果的二维网格，而不是线性行集。如果您将每个维度想象为一个表，则成员集是该表中单个列的唯一值集。

当您选择一个 Measure 作为成员时（如在第一个示例中），看起来好像您是从表中选择的，因此很容易产生误解。当您选择一个维度时，您会获得许多成员，以及行和列之间的交叉连接（在这种情况下是稀疏的，因为名称和性别是一对一的）。

因此，您可以在一个轴上交叉连接这两个维度，然后过滤掉空单元格：

```
SELECT
  event_count ON 0,
  TOPCOUNT(
    NonEmptyCrossJoin(name.children, gender.children), 
    10, 
    event_count) ON 1
FROM
  events 
```

这应该为您提供具有单列（event_count）和 10 行的结果，其中每行由元组（名称、性别）组成。

我希望这能让你走上正确的道路，请随时要求我澄清。

对于一般的介绍性材料，我认为“MDX 解决方案”一书是一个很好的起点： [http ://www.amazon.ca/MDX-Solutions-Microsoft-Analysis-Services/dp/0471748080/](http://www.amazon.ca/MDX-Solutions-Microsoft-Analysis-Services/dp/0471748080/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T06:52:07.973

对于在线 MDX 介绍材料，您可以查看这个介绍主要 MDX 概念的[温和介绍。](http://www.iccube.com/support/documentation/mdx_tutorial/gentle_introduction.html)

# java - Java Arrays：如何保证所用索引的语义正确性？

> ID：15795829
> 
> 赞同：0
> 
> 时间：2013-04-03T19:04:04.317
> 
> 标签：java, arrays, correctness

我有以下情况：

```
final int I  = 10;
final int MU = 100;
final int P  = 100;

int[][] a = new int[I][MU];
int[][] b = new int[I][P];

for(int i = 0; i < I; i++) {
  for(int mu = 0; mu < MU; mu++) {
    for(int p = 0; p < P; p++) {
      a[i][mu] = ... // something
      b[i][p]  = ... // something
    }
  }
} 
```

如您所见，我使用了几个具有相同维度但运行在不同索引上的数组。在此代码中，以下错误可能导致`ArrayIndexOutOfBoundsException`, 因为`mu`范围大于`i`：

```
a[mu][i] = ... 
```

原则上，我可以捕捉到这个错误。但是，以下错误更难捕捉：

```
b[i][mu] = ... 
```

这里不会有运行时异常，因为`mu`与`p`. 但是，此错误确实会导致代码中出现语义问题。

最后，我的问题是：对这些数组进行编程的最佳方法是什么，使得数组`a`只能使用正确的索引（`i`在`mu`这种情况下）访问？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:07:21.057

听起来你真的应该更好地封装你的数据。任何时候您有两个大小始终相同的集合，请考虑更改为具有组成它们的某种类型的集合*。*

我们无法真正说出您的类型代表什么（提示：使用更有意义的名称）但如果您有一个类：

```
class Foo {
    private final int[] a = new int[MU];
    private final int[] b = new int[P];

    ...
} 
```

然后你可以有：

```
Foo[] foos = new Foo[I]; 
```

到那时，数组的结构就很清楚了——你不太可能做错事，因为你会有一个循环，例如：

```
for (int i = 0; i < foos.length; i++) {
    Foo foo = foo[i];
    // Use foo
} 
```

我还鼓励您使用增强的 for 循环：

```
for (Foo foo : foos) {
    ...
} 
```

# c# - Sql 查询错误asp.net c#

> ID：15795830
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:04:05.533
> 
> 标签：c#, asp.net, sql-server-2008, dataset, sqldatareader

我正在使用下面的代码从我的表中获取结果并将其绑定到 gridview 控件。但我收到以下错误：

`"System.Data.SqlClient.SqlException: Incorrect syntax near 'x'" at "sqlda.Fill(ds1)"`.

我是 ASP.NET 的新手，无法编写好的查询。

```
SqlConnection con = new SqlConnection(connStr);
con.Open();
str = "WITH x AS (SELECT *, rn = ROW_NUMBER() OVER (PARTITION BY PersonRFID ORDER BY DateStamp) FROM AISDb where action = 'IN'), y As(SELECT *, rna = ROW_NUMBER() OVER (PARTITION BY PersonRFID ORDER BY DateStamp)FROM AISDb where action='OUT') SELECT y.ID,x.ID,x.PersonName,y.PersonName,x.PersonRFID, DtATEDIFF(MINUTE, x.TimeStamp, y.TimeStamp) FROM x ,y where x.PersonRFID = y.PersonRFIDAnd x.rn=y.rnaAND  cast(x.Datestamp as date) = cast(y.Datestamp as date)Order By x.PersonName";
com = new SqlCommand(str, con);
sqlda = new SqlDataAdapter(com);
ds1 = new DataSet();
sqlda.Fill(ds1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:23:09.270

根据我的第一眼（不运行查询），我可以看到一些错误。

中有错字`datediff`。

把前面的空格`AND`放在`x.PersonRFID = y.PersonRFIDAnd x.rn=y.rnaAND`

把前面的空间放进`order`去`date)Order By`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:20:52.017

您的查询有几个问题可能导致您的错误。首先更改`DtATEDIFF`为`DATEDIFF`（这可能是一个错字）。

更重要的是，固定间距。你有领域相互运行。

用你的例子和带间距的例子来看看这个小提琴：

[http://sqlfiddle.com/#!3/47f7e/1](http://sqlfiddle.com/#!3/47f7e/1)

由于以下原因，您会收到该错误：

```
y.PersonRFIDAnd x 
```

最后的 x 抛出错误。修复这个和它之后的一个（在演员之前），它应该可以工作。

# javascript - Jquery .ajax() 局部变量不能分配给全局

> ID：15795831
> 
> 赞同：6
> 
> 时间：2013-04-03T19:04:11.427
> 
> 标签：javascript, jquery, ajax

我有一个 jquery ajax 代码如下：

```
$(document).ready(function() {
  var global_arr = new Array();
  $.ajax({
    url: 'result.php',
    type: 'post',
    dataType: 'json',
    success: function(data) {
       $.each(data, function(key, value) {
          global_arr.push(value.name);
       });
       alert(global_arr); //get correct value, works fine
     }
  }); //end of ajax function
  alert(global_arr); //get null, it doesn't work properly
}); 
```

请注意警告 global_arr 的行，为什么我无法从 $.ajax() 函数中获取值？感谢任何人对此的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:15:43.100

Ajax 需要时间来完成。函数执行几乎不需要那么多时间。因此，当您在 ajax 请求之外收到警报时，ajax 请求仍在使用时间来完成（无论是在传输中还是在服务器端操作中）。

您可以随时等待 ajax 方法完成。

```
$(document).ready(function() {

 var global_arr = new Array();
 var complete = false;//flag to wait for ajax completion
 $.ajax({
  url: 'result.php',
  type: 'post',
  dataType: 'json',
  success: function(data) {
   $.each(data, function(key, value) {
      global_arr.push(value.name);
   });
   alert(global_arr); //get correct value, works fine
   complete = true;//mark ajax as complete
  }
 }); //end of ajax function

 (function runOnComplete(){
  if( complete ){//run when ajax completes and flag is true
   alert(global_arr);
  }else{
   setTimeout(runOnComplete,25);//when ajax is not complete then loop
  }
 })()
}); 
```

但是，最常见的方法是使用回调。

```
$(document).ready(function() {

 function runOnComplete(){//code executes once ajax request is successful
  alert(global_arr);
 }
 var global_arr = new Array();
 $.ajax({
  url: 'result.php',
  type: 'post',
  dataType: 'json',
  success: function(data) {
   $.each(data, function(key, value) {
    global_arr.push(value.name);
   });
   alert(global_arr); //get correct value, works fine
   runOnComplete();//callback
  }
 }); //end of ajax function
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:06:39.390

Ajax 是异步的。在 JS 引擎到达您的非功能 alert() 行时，AJAX 调用还没有机会从服务器获得响应并设置变量。

这就是内部 alert() 起作用的原因。当响应来自服务器时，它会被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T19:11:12.340

那是因为`alert(global_arr); //get null, it doesn't work properly`之前的运行`$.ajax`已经完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:51:16.127

我的建议是将其分解为 3 个功能，这样会更有意义。您将需要 ajax、handelRequest、onComplete。您可能还想为您的 ajax 函数添加错误处理程序，因此如果它确实失败了，它可以在不锁定用户的脚本的情况下这样做。

```
$(document).ready(function () {

    var global_arr = new Array();

    $.ajax({
        url: 'result.php',
        type: 'post',
        dataType: 'json',
        success: handelRequest(data),
        error: handleError             
    });

    function handelRequest(data) {          
        $.each(data, function (key, value) {
            global_arr.push(value.name);
        });
        onComplete(global_arr); //get correct value, works fine
    }

    function onComplete(global_arr){
        // then here you can do what ever you
        // you would like with the array
        alert(global_arr);
    }

    function handleError(){
        // gracefully fail
    }

}) 
```

# c# - WinForms UI 设计：仅显示当前查看的层次结构级别的控件

> ID：15795835
> 
> 赞同：0
> 
> 时间：2013-04-03T19:04:33.230
> 
> 标签：c#, winforms, ui-design

我正在尝试创建一个 WinForms 应用程序，它允许用户显示和编辑存储在 MSSQL 数据库中的数据。被更改的数据是分层的，并且在层次结构的单个级别内，可以更改的属性是相同的；换句话说，层次结构的单个级别的控件是相同的，但它们可能与其他级别不同。

我试图以这样一种方式创建应用程序，即只有一个带有控件的表单，这些控件根据用户正在查看的项目的层次级别进行更新。我意识到这可以通过将所有级别的所有控件放在一个表单上并更新它们的“可见”属性来实现，但是由于混乱，这种方法使表单的设计变得困难......你们中的任何一个人找到了一个更优雅/更少丑陋的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:47:46.200

如果您想在 WinForms 中执行此操作，则可以利用[可见性和启用性都是Windows 模型中的“*可遗传*](https://stackoverflow.com/a/5361496/366904)”特征这一事实。

换句话说，如果您将所有控件分组到父容器（例如 Panel 或 UserControl）中，然后禁用该容器控件并使其不可见，则其所有子控件也将同样禁用和不可见。

我建议为层次结构的每个级别创建用户控件。思路与使用单独的表单几乎相同，只是它们实际上不是单独的表单。多个 UserControl 对象可以显示在一个表单上，因此您可以拥有任意数量的对象。这将所有相关控件集中在一起，从而使管理更加容易。您还可以在 WinForms 设计器中单独与这些 UserControl 进行交互，就像它们是单独的表单一样，解决“混乱”问题。

要在“活动”层次结构之间切换，请遍历所有 UserControl 对象。使当前“活动”的一个启用并可见（其所有子级将自动变为相同）。让其余的人禁用和隐藏（他们所有的孩子都会自动变成同样的人）。

不过，我不会在这里与 HighCore 争论。*如果您还不知道 WinForms*，您也可以轻松地花时间学习 WPF。如果您决定这样做并想知道如何在该 UI 框架中完成相同的任务，请务必提出一个新问题。

# javascript - 如果将 DOM 元素用于许多函数，将其分配给全局变量会提高性能吗？

> ID：15795838
> 
> 赞同：2
> 
> 时间：2013-04-03T19:04:42.803
> 
> 标签：javascript, jquery

在我的工作区中有人建议，如果我们将元素保存到变量中，也许我们可以提高 JQuery 的性能，这样 JQ 就不必每次调用 DOM 时都搜索它。

例如......假设我`$('#myPopUp')`在整个javascript中使用了很多函数，建议是在`document.ready`函数中我将它保存到一个变量......

`mypopup = $('#myPopUp')`然后在整个脚本中使用这个`$(mypopup).hide()`, `.show()`, 。`blah()`

这会提高我们的性能还是不值得向全局命名空间添加更多变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:09:57.677

将 jQuery 元素保存到变量中肯定比重复传递选择器更高效。*多快*是有问题的，这取决于您的选择器和 DOM 的复杂性。它可能只是速度快得可以忽略不计，但保存到变量仍然是最佳实践。除了更快的执行之外，代码压缩工具还可以将变量重命名为类似 的短`a`名称，这样可以节省字节并使 JS 文件的物理加载时间更快。

但是，您的示例滥用了这种技术。

```
mypopup = $('#myPopUp');
$(mypopup).hide(); 
```

您将 jQuery 对象保存到变量中`mypopup`，但您将其传递回第二行的 jQuery 构造函数。由于它已经是一个 jQuery 对象，你可以直接调用它的方法：

```
mypopup.hide(); 
```

按照惯例，您应该通过在变量名称前加上美元符号来表明您的变量是一个 jQuery 对象，如下所示：`$mypopup`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T19:10:16.453

如果您正确使用它（到目前为止您还没有），它将提高性能。

缓存*jQuery 集合*的重点是

*   不要每次都查询 DOM
*   不要一直调用 jQuery 构造函数

您不需要将缓存的变量包装在 中`$()`，只需像访问它一样

```
mypopup.hide(); 
```

* * *

注意一点：您使用的是术语*global variable*，您仍然不应该这样做。它足以创建您自己的*应用程序上下文*/ *-namepsace*并将这些变量“全局”保留在其中。您不想破坏实际的全局上下文。

# maven - Maven 使用 clover 插件运行单元测试两次

> ID：15795840
> 
> 赞同：7
> 
> 时间：2013-04-03T19:04:58.563
> 
> 标签：maven, clover

我的 pom.xml 中有这个插件代码。如果我删除这个插件，那么 Maven 将不会运行两次单元测试。我只是想知道这个插件的哪一部分使单元测试运行两次。

```
<plugin>
    <groupId>com.atlassian.maven.plugins</groupId>
    <artifactId>maven-clover2-plugin</artifactId>
    <version>3.0.4</version>
    <configuration>
        <licenseLocation>/location/to/clover.license</licenseLocation>
        <generateXml>true</generateXml>
        <generateHtml>true</generateHtml>
    </configuration>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <goals>
                <goal>instrument</goal>
            </goals>
        </execution>
        <execution>
            <id>main</id>
            <phase>verify</phase>
            <goals>
                <goal>instrument</goal>
                <goal>aggregate</goal>
                <goal>clover</goal>
            </goals>
        </execution>
        <execution>
            <id>site</id>
            <phase>pre-site</phase>
            <goals>
                <goal>instrument</goal>
                <goal>aggregate</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T23:13:36.143

三叶草插件使用检测的类路径将生命周期分叉到`test`阶段。

您的标准生命周期将运行测试（通常在该`test`阶段使用surefire，但在该阶段可能有多个执行或其他测试插件调用测试）

然后三叶草出现并要求他们再次运行。

现在我的标准警告：

*   代码覆盖修改以 JVM 规范下合法的方式执行的字节码。
*   此类转换可能导致在更新覆盖图时添加同步点。
*   这种额外的同步点可能会限制 JVM 能够执行的操作的重新排序。
*   还有其他与线程无关的更改，但解释起来相当复杂。

如果你只在打开覆盖率的情况下运行测试用例，你就不能相信 100% 的通过率，因为覆盖率可以掩盖错误

相反，如果您从未在覆盖打开的情况下运行，那么 JVM 架构的任何更改都会突出您不知道的新错误。

*   打开和不打开覆盖的测试通过 => 可能没问题

*   打开覆盖时测试通过，关闭时失败=>当心，这里有错误

*   覆盖关闭时测试通过，打开时失败 => 如果测试不是时间关键，则此处出现错误，但如果测试在生产环境中运行，错误可能仅在`-server`完全优化热路径时显示

*   测试失败，无论是否打开覆盖 => 错误

“斯蒂芬的黄金法则：[只运行两次该死的测试](http://mail-archives.apache.org/mod_mbox/maven-users/201109.mbox/%3CCA+nPnMywA9g7-EXBLAGePerrhFDZkus7+SNZ-EB_8FYaFwh0HQ@mail.gmail.com%3E)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T20:16:37.147

您正在使用的 clover2:instrument 目标的工作方式是分叉并行构建生命周期。多亏了这一点，在构建期间产生的所有工件（类、jar 等）都放在 /target/clover 目录中或具有 -clover.jar 后缀。这可确保您将“正常”代码（即未检测）和检测代码分开。

如果您不需要这种分离（例如您运行“mvn test”而不是“mvn deploy”），那么我建议使用 clover2:setup 而不是 clover2:instrument。

[http://docs.atlassian.com/maven-clover2-plugin/latest/setup-mojo.html](http://docs.atlassian.com/maven-clover2-plugin/latest/setup-mojo.html)

# java - 为什么java局部变量没有默认值？

> ID：15795842
> 
> 赞同：5
> 
> 时间：2013-04-03T19:05:02.557
> 
> 标签：java, programming-languages

为什么在 Java 中类字段被初始化为 null/0 而局部变量不是？选择这种语言设计是否有理由？

# winsock - c++ winsock (winsock2) recv() 跳过\0字节

> ID：15795845
> 
> 赞同：0
> 
> 时间：2013-04-03T19:05:11.093
> 
> 标签：winsock, winsock2, recv

我正在从服务器发送以下数据：

```
31 37 38 33 00 00 00 00 00 00 00 33 34 37 78 35
74 32 71 39 37 34 79 35 74 76 38 35 67 6e 32 6d 
```

客户端使用**winsock2.h**：

```
...
int recvbuflen = 32;
char *tmpBuff = new char[recvbuflen];

int bytesRcvd = recv(conn_socket, tmpBuff, recvbuflen, 0);
... 
```

所以现在：

```
bytesRcvd = 32;
tmpBuff = {31 37 38 33 33 34 37 78 35 74 32 71 39 37 34 79 35 74 76 38 35 67 6e 32 6d} in hex 
```

基本上**recv()**在写入接收缓冲区期间会跳过 '\0' 符号

如何接收所有带有 '\0' 符号的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:13:29.420

`recv()` **不**忽略任何字节，更不用说`'\0'`字节了。设置为 32的事实尤其明显`bytesRcvd`，这意味着所有发送的字节都被正确接收到缓冲区中。所以其他事情正在发生。您的调试器检查缓冲区内容的窗口很可能是实际上忽略`'\0'`字节的窗口。

# php - 如何确定 Magento 中事件的发送位置？

> ID：15795849
> 
> 赞同：4
> 
> 时间：2013-04-03T19:05:12.313
> 
> 标签：php, magento

我有一个扩展，它使用该`catalog_product_after_save`事件对产品和自定义导出的属性进行简单索引。

似乎在某些情况下，如果在没有所有产品数据的情况下调度此事件，那么当更新索引时，它会丢失数据。我已经进行了检查，以查找缺少的一些必需信息，因此我相信这将不再是问题，但我想记录它何时发生以及它来自何处。

那么，有什么方法可以本地确定事件是从哪里分派的，我可以在观察者中查看？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T19:26:32.020

熟悉 PHP 的回溯函数（[`debug_backtrace`](http://php.net/debug_backtrace)和[`debug_print_backtrace`](http://php.net/debug_print_backtrace)）或更好的是 Magento/大对象安全版本，`mageDebugBacktrace`.

例如，我为`controller_action_predispatch`事件设置了一个观察者。`exit`如果我将以下内容放在我的观察者中（因为观察者可能会被调用两次，对于您的具体情况，您可能不想这样做）

```
class Pulsestorm_Requestset_Model_Observer
{
    public function myMethod($observer)
    {
        mageDebugBacktrace();
        exit;
    }
} 
```

然后加载页面，当我尝试加载系统中的任何页面时，我将得到以下输出（因为该事件几乎在每个页面上都会触发）

```
[1] /magento/app/code/core/Mage/Core/Model/App.php:1343
[2] /magento/app/code/core/Mage/Core/Model/App.php:1322
[3] /magento/app/Mage.php:455
[4] /magento/app/code/core/Mage/Core/Controller/Varien/Action.php:530
[5] /magento/app/code/core/Mage/Core/Controller/Front/Action.php:64
[6] /magento/app/code/core/Mage/Core/Controller/Varien/Action.php:408
[7] /magento/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php:251
[8] /magento/app/code/core/Mage/Core/Controller/Varien/Front.php:176
[9] /magento/app/code/core/Mage/Core/Model/App.php:352
[10] /magento/app/Mage.php:691
[11] /magento/index.php:87 
```

这为我提供了简化的调用堆栈，直到我调用`mageDebugBacktrace`. 这`[#]`只是一个列表排序，后跟一个`:`分隔字符串。字符串（ ）的左侧是一个 PHP 文件，字符串（ ）`/magento/app/code/core/Mage/Core/Model/App.php`的右侧是**方法调用发生的行号**。`1343`

 **前三个电话

```
[1] /magento/app/code/core/Mage/Core/Model/App.php:1343
[2] /magento/app/code/core/Mage/Core/Model/App.php:1322
[3] /magento/app/Mage.php:455 
```

是分派事件本身的 PHP 代码。例如，`Mage.php`我系统上的第 455 行是

```
$result = self::app()->dispatchEvent($name, $data); 
```

它是（通常取决于 Magento 版本/核心状态）堆栈中的第四个调用，它将指向事件被调度的位置。

```
[4] /magento/app/code/core/Mage/Core/Controller/Varien/Action.php:530 
```

我系统上的线`530`是`Action.php`

```
Mage::dispatchEvent('controller_action_predispatch', array('controller_action' => $this)); 
```

答对了！ `Mage::dispatchEvent`是调度事件的代码，所以我们找到了我们的调度点。

如前所述，您的观察者可能会被多次调用——因此使用输出缓冲记录数据可能比上面使用的输出/退出更好

```
 ob_start();
    mageDebugBacktrace();
    $contents = ob_get_clean();
    Mage::Log($contents);

    #If `Mage::log` is failing early in the bootstrap process
    #file_put_contents('/tmp/trace.log', $contents . "\n",FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T21:30:44.573

这是 mageDebugBacktrace 函数定义：

函数 mageDebugBacktrace($return=false, $html=true, $showFirst=false)

所以在研究之后，艾伦的例子可以简化成这样：

```
$trace = mageDebugBacktrace(true, false);
Mage::log($trace, null, 'log-name', true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T06:06:18.173

我知道的最简单的方法是做日志。在 app/Mage.php 找到这个函数

```
public static function dispatchEvent($name, array $data = array())
{ 
```

然后添加这些行

```
Mage::log($name, null, 'event_check.log', true); 
```

比功能看起来像。

```
public static function dispatchEvent($name, array $data = array())
{
    Mage::log($name, null, 'event_check.log', true);
    Varien_Profiler::start('DISPATCH EVENT:'.$name);
    $result = self::app()->dispatchEvent($name, $data);
    #$result = self::registry('events')->dispatch($name, $data);
    Varien_Profiler::stop('DISPATCH EVENT:'.$name);
    return $result;
} 
```

通过这样做，您可以跟踪每个正在调度的事件。**

# c# - c# wpf动画结束时运行动作

> ID：15795850
> 
> 赞同：12
> 
> 时间：2013-04-03T19:05:15.497
> 
> 标签：c#, wpf, animation, doubleanimation

我正在学习 wpf 并同时使用它开发应用程序。当双重动画（或其他类型）完成时，我很难弄清楚如何运行某些东西。例如：

```
DoubleAnimation myanim = new DoubleAnimation();
myanim.From = 10;
myanim.To = 100;
myanim.Duration = new Duration(TimeSpan.FromSeconds(3));
myview.BeginAnimation(Button.OpacityPropert, myanim);

//Code to do something when animation ends

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Media.Animation;

namespace app
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        DoubleAnimation widthbutton = new DoubleAnimation();
        widthbutton.From = 55;
        widthbutton.To = 100;
        widthbutton.Duration = new Duration(TimeSpan.FromSeconds(1.5));
        button1.BeginAnimation(Button.HeightProperty, widthbutton);

        DoubleAnimation widthbutton1 = new DoubleAnimation();
        widthbutton1.From = 155;
        widthbutton1.To = 200;
        widthbutton1.Duration = new Duration(TimeSpan.FromSeconds(1.5));
        button1.BeginAnimation(Button.WidthProperty, widthbutton1);

        widthbutton.Completed += new EventHandler(myanim_Completed);
    }
    private void myanim_Completed(object sender, EventArgs e)
    {
        //your completed action here
        MessageBox.Show("Animation done!");
    }
}
} 
```

这是如何实现的？我已经阅读了很多关于此的其他帖子，但它们都使用 xaml 进行了解释，但是我想使用 c# 代码来完成。谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-03T19:08:11.620

您可以将事件处理程序附加到 DoubleAnimation 的[Completed](http://msdn.microsoft.com/en-gb/library/system.windows.media.animation.timeline.completed.aspx)事件。

```
myanim.Completed += new EventHandler(myanim_Completed);

private void myanim_Completed(object sender, EventArgs e)
{
    //your completed action here
} 
```

或者，如果你更喜欢内联，你可以做

```
 myanim.Completed += (s,e) => 
     {
        //your completed action here
     }; 
```

请记住在开始动画之前附加处理程序，否则它不会触发。

# sql - 使用插入 SQL 代码时的“输入参数值”输入框

> ID：15795853
> 
> 赞同：1
> 
> 时间：2013-04-03T19:05:31.103
> 
> 标签：sql, ms-access

任何想法为什么我在运行此代码时得到一个“输入参数值”输入框？

```
strSQL = "INSERT INTO tblTest SELECT * FROM ImportedTable WHERE NOT EXISTS (SELECT * FROM ImportedTable WHERE ImportedTable.[Part No] = tblTest.[Part No])" 
```

当 tblTest 中还没有包含 [Part No] 的行时，我试图将 ImportedTable 中的行插入到 tblTest 中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:08:19.807

`tblTest``FROM`声明的条款中没有提及`SELECT`。

试试这个：

```
INSERT
INTO    tblTest
SELECT  *
FROM    importedTable it
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    tblTest tt
        WHERE   tt.[Part No] = it.[Part No]
        ) 
```

# c# - Windows 8 Metro 应用程序将文本转换为图像

> ID：15795855
> 
> 赞同：2
> 
> 时间：2013-04-03T19:05:40.457
> 
> 标签：c#, windows-8, windows-runtime, .net-4.5

有没有办法使用 Windows 商店应用 API 将文本转换为图像？

普通 Windows 应用程序中的类似代码是：

```
graphics.DrawString(txt, font, Brushes, 0, 0); 
```

# mysql - 有没有办法使用 rails/ruby 将部分数据从 MySQL 导出到 SQlite？

> ID：15795859
> 
> 赞同：1
> 
> 时间：2013-04-03T19:06:09.983
> 
> 标签：mysql, ruby-on-rails, ruby, sqlite

我知道 yaml_db gem 可以将整个 MySQL 数据库导出到 SQlite，但是我的东西太多了，我只需要一些表。

有没有一种简单的方法来定义要从 MySQL 导出到 SQlite 的表和记录？

再澄清一点，我仍然想要两个数据库，但我需要将一些 MySQL 数据导出到 SQlite。

编辑： http: [//www.coshx.com/blog/2013/01/15/migrating-specific-data-from-mysql-to-sqlite](http://www.coshx.com/blog/2013/01/15/migrating-specific-data-from-mysql-to-sqlite)

我试过这个，但效果不太好..它需要太长时间，有时它不会导入整组数据

# jquery - 在地理定位排序中显示距离（以英里为单位）

> ID：15795861
> 
> 赞同：1
> 
> 时间：2013-04-03T19:06:15.350
> 
> 标签：jquery, html, geolocation

我想通过在下面的代码段中使用 SPAN 标签执行类似的操作，以英里为单位显示每个列表项的距离，但我不确定如何。该脚本已经很好地排序并计算了距离，我只是不知道如何将其写入页面。我觉得这很简单，所以我希望有人能帮助我！

```
 <li>
            <div class="name">
                Moe Bar <span class="miles"></span></div>
            <div class="long">
                47.60357999999998</div>
            <div class="lat">
                -122.329454</div>
        </li> 
```

**完整代码** 工作示例位于[http://demos.thebeebs.co.uk/bars-in-seattle/](http://demos.thebeebs.co.uk/bars-in-seattle/)

```
<!DOCTYPE html>
<html>
<head>
    <title>Local Bars</title>
    <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.5.min.js"></script>
    <script>
        function findMe() {
            if (navigator.geolocation != undefined) {
                navigator.geolocation.watchPosition(onFound, onError);
            }
        }
        function onFound(pos) {
            var userLat = pos.coords.latitude;
            var userLong = pos.coords.longitude;
            $('ul li').each(function (index) {
                var locationLat = $(this).find('.lat').html();
                var locationLong = $(this).find('.long').html();
                var distance = getDistance(userLat, locationLat, userLong, locationLong);
                $(this).data("distance", distance);
            })

            reOrder();
        }

        function onError(pos) {
            alert("Something Went wrong");
        }

        function reOrder() {
            $('ul li').sort(sortAlpha).appendTo('ul');
        }

        function sortAlpha(a, b) {
           return $(a).data('distance') > $(b).data('distance') ? 1 : -1;
        };

        function getDistance(lat1, lat2, lon1, lon2) {
            var R = 6371; // km
            var d = Math.acos(Math.sin(lat1) * Math.sin(lat2) +
                  Math.cos(lat1) * Math.cos(lat2) *
                  Math.cos(lon2 - lon1)) * R;
            return d;

        }; 

    </script>
    <style>
        ul .long, ul .lat
        {
            display: none;
        }
    </style>
</head>
<body>
    <div>
        <a href="#" onclick="findMe()">Find Closest Pub</a>
        <ul>
            <li>
                <div class="name">
                    Moe Bar</div>
                <div class="long">
                    47.60357999999998</div>
                <div class="lat">
                    -122.329454</div>
            </li>
            <li>
                <div class="name">
                    Frontier Room</div>
                <div class="long">
                    47.61469022047056</div>
                <div class="lat">
                    -122.34816509008769</div>
            </li>
            <li>
                <div class="name">
                    See Sound</div>
                <div class="long">
                    47.6156159656448</div>
                <div class="lat">
                    -122.32593494177237</div>
            </li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:09:48.503

> 这是一个**实时工作示例**：http: [//jsbin.com/ebeyaz/4/edit](http://jsbin.com/ebeyaz/4/edit)

假设：

在我的代码中，该列表更容易编码，并且解释假定以下代码：

```
<li data-lat="-122.34928138554072" data-lng="47.61370665587537">
    War Room
</li> 
```

解释：

您正在使用一个`data`甚至没有它的属性进行排序......所以，第一件事是附加这样的属性。

您已经有了当前的纬度和经度，您只需要使用`navigator.geolocation`坐标计算每个条形之间的距离，为此，您应该将公式更新为

```
// Haversine formula
// http://www.movable-type.co.uk/scripts/latlong.html
function getDistance(lat1, lat2, lon1, lon2) {
  var R = 6371, // km
      dLat = (lat2-lat1).toRad(),
      dLon = (lon2-lon1).toRad();

  lat1 = parseFloat(lat1).toRad();
  lat2 = parseFloat(lat2).toRad();

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +      
          Math.sin(dLon/2) * Math.sin(dLon/2) *
          Math.cos(lat1) * Math.cos(lat2),
      c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)),
      d = R * c;
  return d;
} 
```

然后，遍历所有并使用结果创建该属性，例如：

```
function addDistances(list, geoData)
{
  $(list).each(function() {
    var lat = $(this).data("lat"),
        lng = $(this).data("lng"),
        d = getDistance(lat, geodata.latitude, lng, geodata.longitude),
        km = (Math.floor(d * 100)/100),
        mi = (Math.floor((d*0.621371) * 100)/100);
    $(this)
      .attr("data-distance", d)
      .append(" <span>(" + km + "Km - " + mi + "Miles)</span>");
  });
} 
```

然后你可以使用你拥有的东西正常排序。

我的输出：

![在此处输入图像描述](https://i.stack.imgur.com/NC6xb.png)

# c++ - G++ 未找到，我已经尝试了 3 种不同的编译器

> ID：15795864
> 
> 赞同：2
> 
> 时间：2013-04-03T19:06:29.513
> 
> 标签：c++, compiler-construction, mingw, jgrasp

我可以使用 MinGW 编译 C 代码，但由于某种原因我无法编译 C++。我已经尝试过其他编译器，cygnus 和 cygwin。我正在使用 JGrasp。这是错误提要：

```
 ----jGRASP wedge2 error: command "g++" not found.
 ----   This command must be in the current working directory
 ----   or on the current PATH to use this function.
 ----   PATH is ";C:\Program Files\Common Files\Microsoft Shared\Windows Live;
                 C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live 
                 C:\windows\system32;
                 C:\windows;C:\windows\System32\Wbem;
                 C:\windows\System32\WindowsPowerShell\v1.0\;
                 C:\Program Files (x86)\Windows Live\Shared; 
                 C:\mingw\bin;  
                 C:\cygnus\cygwin-b20\H-i586-cygwin32\bin; 
                 C:\cygwin\bin;".
 ----jGRASP: operation complete. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T20:55:48.260

您还可以使用`mingw-get`命令行安装程序：**`mingw-get install g++`**

之前执行可能很有用`mingw-get update`。

**文档： http:** [//www.mingw.org/wiki/Getting_Started](http://www.mingw.org/wiki/Getting_Started)（*命令行界面安装程序*部分）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T19:41:28.950

正如我在评论中所指示的，您需要使用 MinGW 安装程序安装 g++。默认情况下，MinGW 只安装 C 编译器。

要获取 g++，请在安装期间勾选复选框。

# python - Django ModelForm 有一个隐藏的输入

> ID：15795869
> 
> 赞同：79
> 
> 时间：2013-04-03T19:06:39.650
> 
> 标签：python, django, django-models, django-forms

所以我有我的 TagStatus 模型。我正在尝试为它制作一个 ModelForm。但是，我的表单要求使用 {{ tag.name }} 填充隐藏的输入。我一直在查看文档，但我不知道如何使标签字段成为隐藏输入。也许 ModelForm 不是要走的路？

**模型.py：**

```
class TagStatus(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    status = models.CharField(max_length=2, choices=tag_statuses)
    tag = models.ForeignKey(Tag, null=True, blank=True)

    def __unicode__(self):
        return self.status

    def save(self, *args, **kwargs):
        super(TagStatus, self).save(*args, **kwargs)

class TagStatusForm(modelForm):
    class Meta:
        model = TagStatus
        fields = ('status','tag') 
        widgets = {
             'select': Select,
             'tag': ???
        } 
```

**djangoviews.py：**

```
@login_required
def tags(request):
    all_tags = Tag.objects.all()
    context = base_context(request)
    if request.method == 'POST':
        if 'status_check' in request.POST:
            status_form = TagStatusForm(request.POST)
            #if request.is_ajax():
            if status_form.is_valid():
                status_form.save()
                response = simplejson.dumps({"status": "Successfully changed status"})
            else:
                response = simplejson.dumps({"status": "Error"})
                return HttpResponse (response, mimetype='application/json')
    status_form = TagStatusForm()
    context['status_form'] = status_form
    context['all_tags'] = all_tags
    return render_to_response('tags/tags.html', context, context_instance=RequestContext(request)) 
```

模板：

```
{% for tag in all_tags %}
....
<form class="nice" id="status-form" method="POST" action="">
     {% csrf_token %}
      <input type="hidden" name="status_check" />
      <input type='hidden' name="tag" value="{{ tag.name }}" />
     {{ status_form.status }}
</form>
...
{% endfor %} 
```

我将如何通过 django ModelForm 进行隐藏输入，然后通过模板填充它？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2014-05-05T00:04:53.683

要使 ModelField 中的字段成为隐藏字段，请使用 HiddenInput 小部件。ModelForm 为所有字段使用合理的默认小部件，您只需要在构造对象时覆盖它。

```
class TagStatusForm(forms.ModelForm):
    class Meta:
        model = TagStatus
        widgets = {'tag': forms.HiddenInput()} 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-04-03T19:10:11.063

有 3 种可能的方式（AFAIK）在 Django 中呈现隐藏字段 -

**1.**`forms.py`你可以在你的模板html文件中正常声明一个字段`{{ form.field.as_hidden }}`

**2.**在`forms.py`直接使用隐藏输入小部件。

```
class MyForm(forms.Form):
    hidden_field = forms.CharField(widget=forms.HiddenInput()) 
```

一旦您将该字段设置为隐藏输入，您就可以在模板中填充该字段的值。现在您的隐藏字段已准备好进行渲染。

**3.**等价的正则形式（感谢@Modelesq 分享此金块）。这里不涉及 Django。更改在 HTML 模板级别完成。`<input type="hidden" name="tag" value="{{ tag.name }}" />`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-29T15:37:52.017

我正在寻找一种隐藏所有输入的方法：

```
class TagStatusForm(forms.ModelForm):
    class Meta:
        model = TagStatus

    def __init__(self, *args, **kwargs):
        super(TagStatusForm, self).__init__(*args, **kwargs)
        for field in self.fields:
            self.fields[field].widget = forms.HiddenInput() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-05T16:59:08.100

我在这里发布了一种使用基于类的通用视图的[方法](https://groups.google.com/forum/#!topic/django-developers/34HJqx48h6Y)：

```
from django.forms import HiddenInput

from django.forms.models import modelform_factory

_patient_create_form = modelform_factory(
    models.Patient,
    fields=['name', 'caregiver_name', 'sex', 'birth_date',
            'residence', 'country'],
    widgets={'country': HiddenInput()})

class PatientCreate(LoginRequiredMixin, UserOrgRequiredMixin, CreateView):
    form_class = _patient_create_form
    template_name = 'healthdbapp/patient_form.html' 
```

# android - 使用 DownloadManager 在活动中显示下载进度

> ID：15795872
> 
> 赞同：94
> 
> 时间：2013-04-03T19:06:54.410
> 
> 标签：android, progress-bar

我正在尝试重现 DownloadManager 在我的应用程序内的通知栏中显示的相同进度，但我的进度从未发布过。我正在尝试使用 runOnUiThread() 对其进行更新，但由于某种原因它没有被更新。

我的下载：

```
String urlDownload = "https://dl.dropbox.com/s/ex4clsfmiu142dy/test.zip?token_hash=AAGD-XcBL8C3flflkmxjbzdr7_2W_i6CZ_3rM5zQpUCYaw&dl=1";
DownloadManager.Request request = new DownloadManager.Request(Uri.parse(urlDownload));

request.setDescription("Testando");
request.setTitle("Download");
request.allowScanningByMediaScanner();
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "teste.zip");

final DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);

final long downloadId = manager.enqueue(request);

final ProgressBar mProgressBar = (ProgressBar) findViewById(R.id.progressBar1);

new Thread(new Runnable() {

    @Override
    public void run() {

        boolean downloading = true;

        while (downloading) {

            DownloadManager.Query q = new DownloadManager.Query();
            q.setFilterById(downloadId);

            Cursor cursor = manager.query(q);
            cursor.moveToFirst();
            int bytes_downloaded = cursor.getInt(cursor
                    .getColumnIndex(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR));
            int bytes_total = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_TOTAL_SIZE_BYTES));

            if (cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_STATUS)) == DownloadManager.STATUS_SUCCESSFUL) {
                downloading = false;
            }

            final double dl_progress = (bytes_downloaded / bytes_total) * 100;

            runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    mProgressBar.setProgress((int) dl_progress);

                }
            });

            Log.d(Constants.MAIN_VIEW_ACTIVITY, statusMessage(cursor));
            cursor.close();
        }

    }
}).start(); 
```

我的 statusMessage 方法：

```
private String statusMessage(Cursor c) {
    String msg = "???";

    switch (c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS))) {
    case DownloadManager.STATUS_FAILED:
        msg = "Download failed!";
        break;

    case DownloadManager.STATUS_PAUSED:
        msg = "Download paused!";
        break;

    case DownloadManager.STATUS_PENDING:
        msg = "Download pending!";
        break;

    case DownloadManager.STATUS_RUNNING:
        msg = "Download in progress!";
        break;

    case DownloadManager.STATUS_SUCCESSFUL:
        msg = "Download complete!";
        break;

    default:
        msg = "Download is nowhere in sight";
        break;
    }

    return (msg);
} 
```

**我的日志运行良好，而我的下载正在运行时显示“正在下载！” 当它完成时“下载完成！”，但我的进度没有出现同样的情况，为什么？我真的需要一些帮助，非常感谢其他逻辑**

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-03T21:45:44.730

您正在划分两个整数：

```
final double dl_progress = (bytes_downloaded / bytes_total) * 100; 
```

As`bytes_downloaded`小于`bytes_total`,`(bytes_downloaded / bytes_total)`将为 0，因此您的进度将始终为 0。

将您的计算更改为

```
final int dl_progress = (int) ((bytes_downloaded * 100l) / bytes_total); 
```

获得整个（尽管是下限）百分位数的进展。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-11T20:27:48.847

Paul 的回答是正确的，但是随着下载量的增加，您会很快达到 max int 并开始获得负面进展。我用它来解决这个问题：

```
final int dl_progress = (int) ((bytes_downloaded * 100l) / bytes_total); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-06T22:54:47.470

如果有人需要从@Victor Laerte 在 Kotlin 中使用 RxJava 提出的问题中实现下载进度检索器，请执行以下操作：

**下载StateRetriever.kt**

```
class DownloadStateRetriever(private val downloadManager: DownloadManager) {

    fun retrieve(id: Long) {
        var downloading = AtomicBoolean(true)

        val disposable = Observable.fromCallable {
            val query = DownloadManager.Query().setFilterById(id)
            val cursor = downloadManager.query(query)

            cursor.moveToFirst()

            val bytesDownloaded = cursor.intValue(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR)
            val bytesTotal = cursor.intValue(DownloadManager.COLUMN_TOTAL_SIZE_BYTES)

            if (isSuccessful(cursor)) downloading.set(false)
            cursor.close()

            if (bytesTotal == 0) 0.toInt() else ((bytesDownloaded * 100F) / bytesTotal).toInt()
        }
                .subscribeOn(Schedulers.newThread())
                .delay(1, TimeUnit.SECONDS)
                .repeatUntil { !downloading.get() }
                .subscribe {
                    Timber.i("Subscribed to $id. progress: $it")
                }
    }

    private fun isSuccessful(cursor: Cursor) = status(cursor) == DownloadManager.STATUS_SUCCESSFUL

    private fun status(cursor: Cursor) = cursor.intValue(DownloadManager.COLUMN_STATUS)
} 
```

我为光标添加了扩展以使代码更清晰：

**CursorExtensions.kt**

```
import android.database.Cursor

fun Cursor.column(which: String) = this.getColumnIndex(which)
fun Cursor.intValue(which: String): Int = this.getInt(column(which))
fun Cursor.floatValue(which: String): Float = this.getFloat(column(which))
fun Cursor.stringValue(which: String): String = this.getString(column(which))
fun Cursor.doubleValue(which: String): Double = this.getDouble(column(which)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-28T09:19:51.013

正如保罗所说，你正在划分两个整数，结果总是<1。

**总是在除法****之前**转换你的数字，它以浮点数计算并返回。

不要忘记处理 DivByZero。

```
final int dl_progress = (int) ((double)bytes_downloaded / (double)bytes_total * 100f); 
```

# java - 打印多个组件

> ID：15795873
> 
> 赞同：0
> 
> 时间：2013-04-03T19:06:57.740
> 
> 标签：java, swing, printing, jpanel, awt

我正在尝试在单个打印作业中将 JTable 和 JPanel 发送到打印机，如下所示：

```
 PrintRequestAttributeSet attr = new HashPrintRequestAttributeSet();
            attr.add(OrientationRequested.LANDSCAPE);

            MessageFormat header = new MessageFormat("Page {0}");
            Printable p1 = table.getPrintable(JTable.PrintMode.FIT_WIDTH, header, null);

            PageFormat pf = new PageFormat();                

            Printable p2 = new ComponentPrinter().returnIt(jPanel1);

            Book book = new Book();
            book.append(p1, pf);
            book.append(p2, pf);

            PrinterJob pj = PrinterJob.getPrinterJob();

            pj.setPageable(book);

            if (pj.printDialog(attr)){
                try {
                    pj.print(attr);
                } catch (PrinterException ex) {
                    Exceptions.printStackTrace(ex);
                }
            } 
```

我的问题是，这只会打印添加到 Book 的第一个 Printable ；在这种情况下，JTable。如果我交换订单并先添加面板，那么它只会打印面板。有人可以指出错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:46:23.410

答案就[在这里](https://stackoverflow.com/questions/14775753/printing-multiple-jtables-as-one-job-book-object-only-prints-1st-table?rq=1)。

这本书将错误的 pageIndex 传递给添加的 Printables。有关更多信息和解决方案，请单击链接。

# mysql - 在我的情况下，SQL Where 条件删除重复记录

> ID：15795875
> 
> 赞同：0
> 
> 时间：2013-04-03T19:07:01.227
> 
> 标签：mysql, sql, database

有前端系统，它在表中输入这种类型的数据，我无法控制。假设表是我的查询结果：

```
Row|    id| entity_code|    entity_value
1            1      Null        22
2            2      Null        28
3            3      Null        32
4            3   Test Entity  Test Entity
5            4      Null        22 
```

在上面的查询返回表示例中，前端输入带有新记录的“测试实体”，而不是覆盖 id=3

实际上表是非常复杂的 n 有十几个连接，我想要我的查询的 WHERE 条件，如果“entity_code”列为空并且没有其他记录具有相同的“Entryid”则可以删除（第 1,2 n 4 行）但是如果 'entity_code' 列不为空（第 4 行）并且存在具有相同 'id' 的其他记录（例如第 3 行）。条件结果如下所示：

```
Row|  Entry|    entity_code|    entity_value
1        1              Null        22
2        2              Null        28
3        3           Test Entity    32
4        4              Null        22 
```

我需要显示这种结果的 Where 条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:46:12.763

如果我正确理解您的逻辑，这应该会给您正确的结果：

```
SELECT
  e1.min_row row,
  e1.id,
  e2.max_value,
  e.entity_value
FROM
  entity e INNER JOIN (
    SELECT
      id,
      MIN(row) min_row
    FROM
      entity
    GROUP BY
      id
    ) e1
  ON e.row = e1.min_row
  INNER JOIN (
    SELECT
      id,
      MAX(entity_code) max_value
    FROM
      entity
    GROUP BY
      id
    ) e2
  ON e1.id = e2.id 
```

请[在此处](http://sqlfiddle.com/#!2/3b07d3/1)查看小提琴。

这也更简单，适用于您的示例数据，但我不确定它是否适用于您的真实数据（这取决于您的数据库结构）：

```
SELECT
  e1.Row,
  e1.id,
  e2.entity_code,
  e1.entity_value
FROM
  entity e1 LEFT JOIN entity e2
  ON e2.entity_code IS NOT NULL
     AND e1.id = e2.id AND e1.Row!=e2.Row
WHERE
  e1.entity_code IS NULL 
```

# ios - Facebook 与 Xamarin.Social 的集成

> ID：15795881
> 
> 赞同：2
> 
> 时间：2013-04-03T19:07:13.917
> 
> 标签：ios, facebook, xamarin.ios

我目前正在评估将我的 iOS 应用程序与 Facebook 集成的不同替代方案。由于我稍后会将应用程序移植到 Android，[因此 Xamarin.Social](http://components.xamarin.com/view/xamarin.social/)似乎是一个有趣的替代方案。然而，文档有点稀疏，从我的谷歌搜索的数量和相关性来看，似乎没有太多的经验。

从我到目前为止收集到的信息来看，它所依赖的Xamarin.Social 和[Xamarin.Auth](http://components.xamarin.com/view/xamarin.auth/)`AccountStore`似乎拥有自己的存储与 iOS KeyChain 集成的 Facebook（和其他社交服务）帐户，这让我想到了我的问题：

*   是 Xamarin.Social`AccountStore`和本机`ACAccountStore`是否以任何方式集成？还是它甚至包装了所有原生 Facebook API？
*   根据我的阅读，当访问令牌过期时，本机 Facebook API 会处理重新身份验证。因此，如果您可以访问 ACAccountStore 中的帐户，则无需担心。Xamarin.Social 是否也处理访问令牌的刷新，还是需要手动处理？
*   我不会使用任何撰写视图。我只需要 Facebook 帐户的访问令牌，我的服务器将完成 Facebook 集成的其余部分。基于此，我应该改用其他 API 吗？完整的 Facebook API 对我的使用来说是否过度？

**编辑：**

另一个问题。有什么用的`RedirectUrl`属性`FacebookService`，如果我正在使用`GetAuthenticationUI`用来显示登录视图

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T18:30:25.573

在玩了一段时间之后，这是我的发现：

*   它不与本机 Facebook/Twitter 集成共享帐户
*   如果您没有帐户，并且您尝试调用*共享 UI* ，它确实提供了身份验证的方法。我还不能测试过期令牌，但我认为它也会处理这个问题。

不幸的是，与原生 UI 相比，UI 看起来很糟糕。但它确实有效，所以如果外观不是那么重要，它似乎是一个可行的跨平台替代方案。

**更新**

更高版本具有`Twitter5Service`与 iOS 社交框架集成的功能。但没有其他服务使用任何本机身份验证和共享 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T16:51:25.870

ACAccountStore 包裹在 Account 之上，所以是的，

[https://github.com/xamarin/Xamarin.Auth/blob/master/src/Xamarin.Auth.iOS/ACAccountWrapper.cs](https://github.com/xamarin/Xamarin.Auth/blob/master/src/Xamarin.Auth.iOS/ACAccountWrapper.cs)

你会看到它存储了 3 个键，用户名、过期和令牌值。

# c# - 根据另一个数组c#中指定的索引从数组中选择元素

> ID：15795884
> 
> 赞同：10
> 
> 时间：2013-04-03T19:07:24.273
> 
> 标签：c#, arrays, linq, select, lambda

假设我们有一个包含数据的数组：

```
double[] x = new double[N] {x_1, ..., x_N}; 
```

`N`以及包含与 的元素相对应的标签的大小数组`x`：

```
int[] ind = new int[N] {i_1, ..., i_N}; 
```

根据选择`x`具有特定标签的所有元素的最快方法是什么？`I``ind`

例如，

```
x = {3, 2, 6, 2, 5}
ind = {1, 2, 1, 1, 2}
I = ind[0] = 1 
```

结果：

```
y = {3, 6, 2} 
```

显然，使用循环可以轻松（但不是有效和清洁）完成，但我认为应该有办法使用`.Where`和 lambdas来做到这一点..谢谢

编辑：

MarcinJuraszek 提供的答案是完全正确的，谢谢。但是，我已经简化了这个问题，希望它能在我原来的情况下工作。如果我们有泛型类型，您能否看看有什么问题：

```
T1[] xn = new T1[N] {x_1, ..., x_N};
T2[] ind = new T2[N] {i_1, ..., i_N};
T2 I = ind[0] 
```

使用提供的解决方案，我收到错误“Delegate 'System.Func' does not take 2 arguments”：

```
T1[] y = xn.Where((x, idx) => ind[idx] == I).ToArray(); 
```

非常感谢你

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T19:11:37.677

那个怎么样：

```
var xs = new[] { 3, 2, 6, 2, 5 };
var ind = new[] { 1, 2, 1, 1, 2 };
var I = 1;

var results = xs.Where((x, idx) => ind[idx] == I).ToArray(); 
```

它使用第二个不太流行的`Where`重载：

[`Enumerable.Where<TSource>(IEnumerable<TSource>, Func<TSource, Int32, Boolean>)`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)

它具有可用作谓词参数的项目索引（`idx`在我的解决方案中调用）。

***通用版***

```
public static T1[] WhereCorresponding<T1, T2>(T1[] xs, T2[] ind) where T2 : IEquatable<T2>
{
    T2 I = ind[0];
    return xs.Where((x, idx) => ind[idx].Equals(I)).ToArray();
} 
```

*用法*

```
static void Main(string[] args)
{
    var xs = new[] { 3, 2, 6, 2, 5 };
    var ind = new[] { 1, 2, 1, 1, 2 };

    var results = WhereCorresponding(xs, ind);
} 
```

**通用 +`double`版本**

```
public static T[] Test<T>(T[] xs, double[] ind)
{
    double I = ind[0];

    return xs.Where((x, idx) => ind[idx] == I).ToArray();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T20:01:24.830

这是[**Enumerable.Zip**](http://msdn.microsoft.com/en-us/library/dd267698.aspx)的经典用法，它贯穿两个相互平行的枚举。使用 Zip，您可以一次性获得结果。以下是完全与类型无关的，尽管我使用`int`s 和`string`s 来说明：

```
int[] values = { 3, 2, 6, 2, 5 };
string[] labels = { "A", "B", "A", "A", "B" };
var searchLabel = "A";

var results = labels.Zip(values, (label, value) => new { label, value })
                    .Where(x => x.label == searchLabel)
                    .Select(x => x.value); 
```

# android - 如何保存我的活动状态？

> ID：15795886
> 
> 赞同：3
> 
> 时间：2013-04-03T19:07:28.920
> 
> 标签：android, android-activity, bundle

如何保存我的方式`Activity`，当使用支持按钮关闭并恢复时，它与关闭时的方式相同。

这是我的`Activity`代码：

```
public class Levels extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);
        setContentView(R.layout.levels);

        final EditText anstext1 = (EditText) findViewById(R.id.anstext1);
        Button button1 = (Button) findViewById(R.id.button1);

        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {   
                 String result = anstext1.getText().toString();
                 if(result.equals("they"))
                     setContentView(R.layout.social);
                 else 
                   Toast.makeText(getApplicationContext(), "Wrong", Toast.LENGTH_LONG).show();
            }
        });
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T22:42:47.633

您将不得不实现 onSavedInstanceState() 并使用您正在显示的视图的 int 填充它。

然后，在您的 onCreate(Bundle savedInstanceState) 方法中，您将从包中挖掘 int 并将您的内容视图设置为该值。

```
public class yourActivity extends Activity {

    private static final String KEY_STATE_VIEW_ID = "view_id";
    private int _viewId = R.layout.levels;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        if (savedInstanceState != null) {
            if (savedInstanceState.containsKey(KEY_STATE_VIEW_ID) {
                _viewId = savedInstanceState.getInt(KEY_STATE_VIEW_ID);
            }
        }
        setContentView(_viewId);
        // in your onClick set viewId to R.layout.social
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState){
        super.onSaveInstanceState(savedInstanceState);
        savedInstanceState.putInt(KEY_STATE_VIEW_ID, _viewId);
    }
} 
```

一个例子可以在这里找到：http: [//www.how-to-develop-android-apps.com/tag/onsaveinstancestate/](http://www.how-to-develop-android-apps.com/tag/onsaveinstancestate/)

# java - 有没有另一种方法在java中创建对象而不是使用“new”关键字？

> ID：15795891
> 
> 赞同：3
> 
> 时间：2013-04-03T19:07:53.700
> 
> 标签：java

我的一位讲师说，还有一些其他方法可以在 Java 中创建/实例化对象，而不是使用“new”关键字。如果可能的话，请指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:13:38.523

看起来更像是一个面试问题，但我仍然会回答它:)

反射是创建对象实例的一种方法。您可以`Class.forName("abc.de.FGH").newInstance()`创建一个实例

另一种方法是使用反序列化，假设对象是序列化的。

```
new ObjectInputStream(anInputStream ).readObject(); 
```

我能想到的另一种方法是克隆。

```
Object otherObject = mainObject.clone(); 
```

原始类型、字符串文字是创建对象的其他方式，尽管它们特定于某些类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:10:28.367

是的，您可以使用反射或自动装箱机制或语言内置的任何其他文字来创建对象。

```
String x = "abc";
int[] y = {1, 2, 3}
Object z = classObject.newInstnce(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T19:33:39.763

是的，对象是使用“new”关键字实例化的。但这并不意味着它们只能以这种方式实例化。

看看下面的代码（Java）：

```
public class SimpleClass {

    public static SimpleClass instantiateAnObjectForMe() {

        return new SimpleClass();      

    } 
} 
```

然后在你项目的其他地方，你可以通过调用我上面写的静态方法来创建类的实例，如下所示：

```
SimpleClass simpleObject = SimpleClass.instantiateAnObjectForMe(); 
```

我希望你能明白：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:11:09.377

一个例子是`Object.class.newInstance()`。使用 java 反射还有更复杂的方法，[这里是众多教程之一](http://tutorials.jenkov.com/java-reflection/constructors.html)。

# java - 编译java代码

> ID：15795901
> 
> 赞同：0
> 
> 时间：2013-04-03T19:08:25.737
> 
> 标签：java, netbeans

前段时间我用 Netbeans 写了一些代码。我最终将代码移到了一个新服务器上，我可以远程访问它并且没有安装 netbeans。我最近对该代码进行了一些更改并使用此命令进行了编译

```
javac -classpath /home/me/JSAP-2.1.jar /home/me/Fin2/src/fin2/Fin2.java  /home/me/Fin2/src/fin2/CommandLine.java /home/me/Fin2/src/fin2/Reader.java /home/me/Fin2/src/fin2/Manager.java -Xlint 
```

但似乎新代码从未编译过。我得到的输出与进行更改之前相同。当我之前在旧服务器上遇到这个问题时，我只需打开 netbeans 并将“主项目”重置为我试图运行的程序，从 netbeans 中重新编译，它会正常工作。如果不这样做，我不知道如何解决这个问题。

当我运行代码时，我运行它

```
 java -jar /home/me/NetBeansProjects/Fin2/dist/Fin2.jar [commandline args] 
```

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:59:02.430

您缺少 IDE 为您执行的步骤。您将需要`jar`从类文件输出创建文件。请参阅[http://docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html) [http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)

由于您没有添加 -d 类文件位于源文件的目录中。让我们实际添加一个编译的输出目录

```
rm -r /home/me/Fin2/build/
mkdir /homr/me/Fin2/build/ 
```

现在让我们将该文件夹添加到 javac，以便在该文件夹中创建类：

```
javac -Xlint -d /home/me/Fin2/build/ -classpath /home/me/JSAP-2.1.jar /home/me/Fin2/src/fin2/Fin2.java  /home/me/Fin2/src/fin2/CommandLine.java /home/me/Fin2/src/fin2/Reader.java /home/me/Fin2/src/fin2/Manager.java 
```

最后，我们需要一罐该输出。jar 文件基本上只是目录的 zip。事实上，您可以将 .jar 文件作为 zip 文件打开。您还必须告诉它哪个类具有您的主要方法入口点。

```
jar cvfe /home/me/Fin2/dist/Fin2.jar [entry point] /home/me/Fin2/build/ 
```

现在，当你运行它时，运行新创建的 jar：

```
java -jar /home/me/Fin2/dist/Fin2.jar [commandline args] 
```

# ios - 将 Rails 日期字符串转换为 NSDate

> ID：15795902
> 
> 赞同：0
> 
> 时间：2013-04-03T19:08:29.117
> 
> 标签：ios, nsdateformatter

我有这段代码在 iOS 6 中非常有用，可以将这个 Rails json 提供的日期字符串转换为 NSDate (2012-12-11T08:28:16-08:00)：

```
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZ"];
return [formatter dateFromString:string]; 
```

但它在 iOS 5 上不起作用。我找不到任何好的资源来转换 5 中的日期。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:18:05.787

iOS 6.0 使用 UTS 版本 tr35-25 进行格式化。使用 5 'Z's 作为时区解析类似于 -08:00 的内容。IE：

```
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZZ"]; 
```

iOS 5 和 5.1 使用版本 tr35-19，它没有为 -08:00 指定任何内容，尽管 3 'Z' 用于类似 -0800 的内容。

改变'Z's的工作量吗？

您可以在此处找到格式规范：

[悉尼科技大学 #35-19](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

[悉尼科技大学 #35-25](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:53:03.537

在解析字符串之前，您需要从末尾的时区中删除冒号。

当我解析 +01:00 时，这对我来说更容易，但你可以使用

```
[dateString componentsSeparatedByString:@"-"] 
```

要获取一组组件，最后一个是时区，请删除冒号

```
[timeZoneString stringByReplacingOccurrencesOfString:@":" withString:@""] 
```

然后将所有组件重新附加在一起，并在每个组件之间替换为“-”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T15:47:39.130

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZZ"];    
NSString *clearedString = [railsDateString stringByReplacingOccurrencesOfString:@":" withString:@"" options:0 range:NSMakeRange(22, 1)];
NSDate *date = [dateFormat dateFromString:clearedString]; 
```

更清洁的詹姆斯 P 版

# windows - 在 Windows 和 Visual Studio 上使用“stylus”css 预处理器的最佳方法是什么？

> ID：15795905
> 
> 赞同：0
> 
> 时间：2013-04-03T19:08:37.823
> 
> 标签：windows

“WebEssentials”Visual Studio 插件只支持较少，但我发现手写笔语法更具可读性。有人在 Windows 上使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:02:40.870

“支持”是什么意思？

如果只是实时观看和压缩，则工具很少...

吉乌：

*   混合[http://mixture.io/](http://mixture.io/)
*   LiveReload [http://livereload.com/](http://livereload.com/)（测试版！）

或[在控制台中使用 node.js](https://stackoverflow.com/questions/10995330/setting-up-auto-compile-for-stylus)进行自动编译。

# dart - 关键字作为函数名的安全性

> ID：15795906
> 
> 赞同：3
> 
> 时间：2013-04-03T19:08:46.133
> 
> 标签：dart

*import*是一个关键字，但以下工作正常：

```
import 'dart:io';

void main() {
  import() {
    print("Imported");
  }
  import();
} 
```

*   这应该工作吗？
*   语言是否足够稳定，可以继续使用它？
*   *import*与 say *class*有什么特别之处，哪个不起作用，其他关键字/可能是公平的游戏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:50:16.853

是的，这应该有效。而且我认为是的，您可以合理地确定这将继续有效。为了解释，让我们看一下语言规范。

第 16.1.1 节（保留字）解释*了保留字不能用作标识符；如果在需要标识符的地方使用了保留字，则会出现编译时错误。*以下是保留字列表：`assert`, `break`, `case`, `catch`, `class`, `const`, `continue`, `default`, `do`, `else`, `enum`, `extends`, `false`, `final`, `finally`, `for`, `if`, `in`, `is`, , `new`, `null`, `rethrow`, `return`, `super`, `switch`, `this`, `throw`, `true`, `try`, `var`, `void`, . 注意这里没有提到。`while``with``import`

然后，第 12.30 节（标识符参考）解释说有一组*内置标识符*，如下所示：`abstract`, `as`, `dynamic`, `export`, `external`, `factory`, `get`, `implements`, `import`, `library`, `operator`, `part`, `set`, `static`, `typedef`。如果*使用内置标识符作为类、类型参数或类型别名的声明名称，则会出现编译时错误。*请注意，它`import`属于这一组——因此您不能将其用作类型，但您可以在其他地方使用它（例如在您的情况下，用作函数名称）。

12.30 节的非规范部分解释了差异：*内置标识符是在 Dart 中用作关键字的标识符，但在 Javascript 中不是保留字*。

请注意，在这个答案中，我引用了 Dart 语言规范 0.30 版的 PDF 形式。

# arguments - 如何解决 RenderTarget2D 的此参数错误？

> ID：15795907
> 
> 赞同：0
> 
> 时间：2013-04-03T19:09:01.893
> 
> 标签：arguments, xna-4.0, rendertarget

作为初学者，我正在使用一些 XNA 代码。所以我使用本教程，但似乎我正在做某事，我不知道为什么。

[http://www.xnadevelopment.com/tutorials/theroadnottaken/theroadnottaken.shtml](http://www.xnadevelopment.com/tutorials/theroadnottaken/theroadnottaken.shtml)

我参与了路径冲突，这就是我的代码的编写方式！

```
mTrackRender = new RenderTarget2D(graphics.GraphicsDevice, mCarWidth + 100,
               mCarHeight + 100, 1, SurfaceFormat.Color,DepthFormat.Depth24);

mTrackRenderRotated = new RenderTarget2D(graphics.GraphicsDevice, mCarWidth + 100,
                   mCarHeight + 100, 1); 
```

我已经声明了 mTrackREnder，并且 mTrackREnderRotated 具有类级别的对象。

好吧，问题是什么，我对他们俩都收到了这个错误：

> 错误 3 'Microsoft.Xna.Framework.Graphics.RenderTarget2D' 不包含采用 4 个参数的构造函数'

我究竟做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:13:39.680

看看[RenderTarget2D 类的构造函数](http://msdn.microsoft.com/en-US/library/microsoft.xna.framework.graphics.rendertarget2d.rendertarget2d%28v=xnagamestudio.40%29.aspx)。他们都没有接受你试图传递的论点。

在第一种情况下，您传递一个整数，构造函数需要一个布尔值。在 C# 中，整数不能隐式转换为布尔值；使用`true`and`false`而不是 1 和 0。

在第二种情况下，不清楚您要调用哪个构造函数，但它们都没有采用 4 个参数，也没有一个采用整数作为第 4 个参数。

# regex - 如何创建使用 Java Pattern.COMMENTS 编译的 Scala 正则表达式？

> ID：15795908
> 
> 赞同：3
> 
> 时间：2013-04-03T19:09:03.617
> 
> 标签：regex, scala, comments

我想创建几个利用 Pattern.COMMENTS 标志的 Scala 代码使用的相当复杂的正则表达式？我想做这样的事情：

```
val regex = """my
   (complex|hideous)      # either is appropriate
   pattern
   (might)?               # optional
   look like this
""".r 
```

（`.r`字符串末尾的 the 给了我 Scala 的所有`Regex`优点）

不幸的是， using`.r`并没有给我任何方法来告诉 Regex 使用`java.util.regex.Pattern.COMMENTS`. 有没有办法创建一个`scala.util.matching.Regex`在打开注释的情况下编译其源字符串的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T19:15:21.690

根据[文档](http://www.scala-lang.org/api/current/index.html#scala.util.matching.Regex)，您应该能够使用内联修饰符：

```
val regex = """(?x)my
   (complex|hideous)      # either is appropriate
   pattern
   (might)?               # optional
   look like this
""".r 
```

另请参阅 Java 文档以获取[Regex 注释](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#COMMENTS)。

使用 inline 修饰符，您可以从写入 inline 修饰符的位置开始启用该选项。如果一开始就使用它，它对整个正则表达式都有效。

还检查[正则表达式.info](http://www.regular-expressions.info/modifiers.html)以获得进一步的解释

# python - 创建可以从python中的主线程结束的线程的最佳方法是什么？

> ID：15795909
> 
> 赞同：0
> 
> 时间：2013-04-03T19:09:09.190
> 
> 标签：python, multithreading, python-multithreading

我正在从加速度计捕获数据。我希望用户能够通过分别按下开始和停止按钮来开始记录数据和停止记录。我决定使用线程来执行此操作，因此开始按钮创建一个捕获数据的线程，而停止按钮停止该线程并获取记录的数据。

我遇到的问题是，要么没有记录数据，要么按下停止按钮时，线程没有结束，而是在几秒钟到几分钟的任何时间里记录数据。

我现在正在做的是线程运行一个循环来记录数据并检查变量是否设置为 True，如果是，则循环应该结束。我还有一个 end() 函数，该函数旨在从主线程调用，并且假设将变量设置为 True 以结束线程。

```
class Capture(Thread):
def __init__(self,accel):
    Thread.__init__(self)
    self.accel=accel
    self.ended=False
    self.data=[]
    self.lock=Lock()

def run(self):
    while self.isEnded()==False:
        self.lock.acquire()
        self.data.append(self.accel.read())
        self.lock.release()

def getData(self):
    self.lock.acquire()
    d=self.data
    self.data=[]
    self.lock.release()
    return d

def isEnded(self):
    self.lock.acquire()
    end=self.ended
    self.lock.release()
    return end

def end(self):
    self.lock.acquire()
    self.ended=True
    self.lock.release() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:31:36.897

I'm afraid I don't know python very well at all but I'll take a guess. If accel.read() calls out to some external code (eg a device driver) and blocks for a second then the python interpreter is also blocked. No other thread will run. When the read finally returns you release the lock. At this point the interpreter is going to have to decide what to do next, and your thread merely loops, takes the lock again and goes back to reading (and being blocked)

So I'm guessing that you're falling foul of interpreter lock, and that there's an element of blind luck involved in whether your main thread gets run at all, in which case your stop button handling doesn't happen.

Could that be it?

# .net - Enviroment.NewLine 返回空格

> ID：15795911
> 
> 赞同：0
> 
> 时间：2013-04-03T19:09:21.770
> 
> 标签：.net, vb.net

我正在使用 Enviroment.NewLine 属性来分隔将通过 smtpclient 通过电子邮件发送的字符串行。我将省略声明邮件消息的部分。

例如：

```
Dim sb as StringBuilder
sb.Append("This is my first line")
sb.Append(Enviroment.NewLine)
sb.Append("This is my second line") 
```

当我做一个：

```
myMailMessage.Body = sb.ToString 
```

没有分隔线。我调试并注意到 Enviroment.NewLine 正在返回“”

我不明白为什么会这样，它应该返回一个断线。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:12:18.900

而不是`Enviroment.NewLine`put `<br/>`。并在电子邮件客户端中检查电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:17:57.247

1.  `Enviroment.NewLine`可能在调试器中显示为空字符串（因为没有可打印的符号）。
2.  `Enviroment.NewLine`是特定于您运行代码的平台的平台，而不是特定于电子邮件阅读器的平台。我会使用`"\r\n"`它，因为它涵盖了 *nix 和 Windows。如果您的电子邮件不是纯文本，您可以使用`<br/>`.

# sql - Oracle 性能问题

> ID：15795915
> 
> 赞同：1
> 
> 时间：2013-04-03T19:09:37.170
> 
> 标签：sql, performance, oracle

我是甲骨文的新手。不过，我已经使用 Microsoft SQL Server 多年。我被带入了一个已经逾期且超出预算的项目，我需要成为“Oracle 专家”。我有一张有 1400 万行的表。而且我有一个更新表的复杂查询。但我将从简单的查询开始。当我发布一个修改少量记录（100 到 10,000 左右）的简单更新时，表扫描表并更新受影响的记录需要不超过 2 到 5 分钟。（如果查询可以使用索引，时间会更短。）但是如果我更新整个表：

```
UPDATE MyTable SET MyFlag = 1; 
```

然后需要3个小时！

如果表扫描在几分钟内完成，为什么要花几个小时？我当然可以就如何解决这个问题提出一些建议，因为我没有足够的 Oracle 经验来知道要运行哪些诊断查询。（我在 Oracle 11g 上并使用 Oracle SQL Developer 作为客户端。）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:18:08.360

当您`UPDATE`在 Oracle 中执行此操作时，您正在修改的数据会按顺序附加到重做日志中，然后通过一个名为`CHECKPOINT`.

此外，将旧版本的数据复制到`UNDO`空间中，以支持可能的事务回滚和并发进程对旧版本数据的访问。

这一切都可能比不修改数据的纯读取操作花费更多的时间。

# python - tkinter 中按钮后面的图像（PhotoImage）

> ID：15795916
> 
> 赞同：3
> 
> 时间：2013-04-03T19:09:37.373
> 
> 标签：python, button, tkinter, label, background-image

我一直在尝试添加图像，以便我的按钮位于图像顶部，但只能使图像完全覆盖所有内容或强制图像位于按钮覆盖的水平部分下方。

这是它的相关代码：

```
class MainMenu(Frame):
    def __init__(self, master):
        Frame.__init__(self, master)
        self.master = master
        self.initUI()

    def initUI(self):
        self.master.title("Adventure")
        bg = PhotoImage(file="Background-gif.gif")

        newGameButton = Button(self, text="New Game", height=2, width=20, command=self.newGame)
        newGameButton.pack(side=TOP, pady=50)
        loadGameButton = Button(self, text="Load Game", height=2, width=20, command=self.loadGame)
        loadGameButton.pack(side=TOP)
        quitButton = Button(self, text="Quit", height=2, width=20, command=self.close)
        quitButton.pack(side=TOP, pady=50)

        label = Label(self, image=bg)
        label.image = bg
        label.pack(fill=BOTH, expand=1)

        self.pack() 
```

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T20:09:19.507

您可以将图像放在画布上，然后[在画布上放置一个按钮](https://stackoverflow.com/a/11981214/190597)：

```
import Tkinter as tk
import ImageTk

FILENAME = 'image.png'
root = tk.Tk()
canvas = tk.Canvas(root, width=250, height=250)
canvas.pack()
tk_img = ImageTk.PhotoImage(file = FILENAME)
canvas.create_image(125, 125, image=tk_img)
quit_button = tk.Button(root, text = "Quit", command = root.quit, anchor = 'w',
                    width = 10, activebackground = "#33B5E5")
quit_button_window = canvas.create_window(10, 10, anchor='nw', window=quit_button)    
root.mainloop() 
```

![在此处输入图像描述](https://i.stack.imgur.com/FRL1K.png)

# python - 为什么这个函数没有返回？

> ID：15795918
> 
> 赞同：0
> 
> 时间：2013-04-03T19:09:44.737
> 
> 标签：python, function, python-3.x, return, call

如果我首先输入有效的数据，它可以正常工作，但如果我输入无效数据，然后是有效数据，则返回 None。这是问题的一个例子：

![截屏](https://i.imgur.com/mkEU8Dv.png)

代码：

```
def passwordLength(password):
    if (len(password) < 4) or (len(password) > 15):
        print("Error from server: Your password must be at least four and at most fifteen characters long.")
        enterPasswords()
    else:
        return True

def passwordMatch(password, password2):
    if password != password2:
        print("Error from server: Your passwords don't match.")
        enterPasswords()
    else:
        return True

def enterPasswords():
    password = input("Message from server: Please enter your desired password: ")
    if passwordLength(password):
        password2 = input("Message from server: Please re-enter your password: ")
        print(password, password2)
        if passwordMatch(password, password2):
            print(password)
            return password

password = enterPasswords()
print(password) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:17:02.400

您的问题是您没有正确使用递归。以不匹配密码为例：`hello`和`hello1`.

你的功能会很好，直到`if passwordMatch(password, password2):`. 此时，`passwordMatch`返回`None`。那是因为在`passwordMatch`你没有说`return enterPasswords()`，所以返回值默认为`None`，而不是新调用的返回值`enterPasswords`。

```
 if password != password2:
        print("Error from server: Your passwords don't match.")
        enterPasswords() # Doesn't return anything, so it defaults to None 
```

如果您要像这样使用该功能，那么您就不会有问题。

```
def passwordMatch(password, password2):
    if password != password2:
        print("Error from server: Your passwords don't match.")
        return enterPasswords()
    else:
        return True 
```

请注意，您在`passwordLength`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:56:28.430

因此，如果您首先输入无效数据（假设密码长度无效），您会再次从 passwordLength() 函数调用 enterPasswords()。这会提示您输入另一个密码。这次您输入有效的输入。你回到应该返回密码的地方，然后返回它。问题是，在堆栈上，您将返回到您从 passwordLength() 函数调用 enterPasswords() 的位置。那是您返回有效密码的地方。它不做任何事情，执行返回到对 enterPasswords() 的原始调用（输入无效），您将从那里返回 None 。

可视化：

```
enterPasswords() called

    prompted for input, give string of length 3

    passwordLength(password) called

        Invalid string length, print an error and then call enterPasswords()

            prompted for input, give valid string

            passwordLength(password) called

                valid length, return true

            prompted for input for second password

            passwordMatch(password, password2) called

                passwords match, return True

            print password

            return password to the first passwordLength() call

        nothing else to do here, pop the stack and return to the first enterPasswords()

    nothing else to do here, pop the stack

print(password), but password is None here 
```

# jquery - 更改 $.html() 中的所有 ID（或更好的 ie7 克隆替代方案）

> ID：15795921
> 
> 赞同：0
> 
> 时间：2013-04-03T19:10:01.630
> 
> 标签：jquery, html, string, internet-explorer-7, clone

在把我的头撞在墙上之后，我发现了这个：[http](http://bugs.jquery.com/ticket/9777) ://bugs.jquery.com/ticket/9777 耶！

我的问题是，当我`$.clone()`在 ie7 中的一个元素并尝试用 更改所有`id`s 时`$myClonedElement.find("*[id]").andSelf().each(function() { $(this).attr("id", $(this).attr("id") + "-" + idNumberVariableForDynamicDatabasePagination); });`，`id`克隆的 s 也会更改。

我猜我应该`$.html()`改用（如果你有更好的选择，请提出建议），并附`'-' + idNumberVariableForDynamicDatabasePagination`加到每个`id`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:14:16.657

`.attr`根据您链接到的错误报告，通过不使用来避免错误。

```
this.id = this.id + "-" + somenumber 
```

我没有真正的 IE7 版本来测试它。

# wordpress - Wordpress 文件上传挂钩

> ID：15795925
> 
> 赞同：0
> 
> 时间：2013-04-03T19:10:13.053
> 
> 标签：wordpress, file-upload, hook

我正在尝试连接到 Wordpress 文件上传器，并希望得到一些建议。我希望能够获取源文件的路径（不是 WP 路径；即 K:\docs\file.pdf），这样我就可以自动下载另一个同名（不同扩展名）和路径的文件（即 K: \docs\file.txt）。

Wordpress 在文件上传后提供了挂钩，但此时的所有路径信息都是 wordpress 内部的。

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:23:18.710

路径信息可以从普通的 php 函数中获取，例如[pathinfo()](http://php.net/manual/en/function.pathinfo.php)和[realpath(](http://www.php.net/manual/en/function.realpath.php) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:35:23.570

有点太晚了，但我认为您要求的是在客户端系统中找到文档的来源，并基于您希望浏览器获取那里的类似文件然后发送给用户。

我认为这将是一件相当复杂的事情，首先您必须获取要添加到浏览器的文档的来源（我不确定是否可以完成，但如果可以完成，那么它将通过 javascript）然后将所有文件一一上传到托管 wordpress 的服务器，您可以通过创建一个自定义页面来执行此操作，该页面会将上传到它的文件作为 wordpress 附件添加，然后使用类似 jquery 文件上传器的东西将文件上传到该位置.

但老实说，我认为这将是一件非常复杂的事情，除非客户端和服务器在同一台机器上。

# c# - Silverlight RIA 服务相关实体加载在服务器上但不是客户端

> ID：15795927
> 
> 赞同：0
> 
> 时间：2013-04-03T19:10:14.477
> 
> 标签：c#, silverlight, entity-framework, ria

我有一个包含我的实体的外部类库。在 Silverlight 托管项目中，我有一个域服务类将这些实体暴露给 silverlight 应用程序。当我使用 include 方法查询实体时，它会在服务器上加载相关实体，但不会将它们传递给客户端。这是实体 - 在 stackoverflow 上搜索解决方案后，我最终添加了一个元数据类，但这并没有改变任何东西：

```
[MetadataTypeAttribute(typeof(ProjectManager.ProjectManagerMetadata))]
public partial class ProjectManager
{
    public ProjectManager()
    {
        this.Jobs = new HashSet<Job>();
    }

    [Key]
    public int ProjectManagerKey { get; set; }

    public string TenantID { get; set; }

    public string Name { get; set; }

    public string UserID { get; set; }

    public string PIN { get; set; }

    public ICollection<Job> Jobs { get; set; }

    internal sealed class ProjectManagerMetadata
    {
        private ProjectManagerMetadata()
        {
        }

        [Include]
        [Association("ProjectManagerJob", "ProjectManagerKey", "JobKey")]
        public ICollection<Job> Jobs { get; set; }
    }
} 
```

这是查询 - 我尝试了“ToList()”，认为它可能会有所帮助。它没有

```
 public IQueryable<ProjectManager> GetProjectManagers()
    {
        List<ProjectManager> proj = (from p in trs.ProjectManagers.Include("Jobs") where p.TenantID == tenantID select p).ToList();
        return proj.AsQueryable();
    } 
```

在服务器端的调试器中，加载了一个 ProjectManager 和他的七个相关作业，但在 silverlight 应用程序中（在调试器中）没有相关作业。我错过了什么？

编辑：这是客户端代码：

```
 public void InitialDataLoad()
    {
       busyHelper.Busy("Loading...");
       trx.Load(trx.GetProjectManagersQuery(), this.InitialLoadCompleted, null);
    }

    private void InitialLoadCompleted(LoadOperation loadOp)
    {
        busyHelper.BusyDone();
        if (!loadOp.HasError)
        {
            foreach (ProjectManager manager in trx.ProjectManagers)
            {
                foreach (Job job in manager.Jobs)
                {
                 // no jobs returned 
                }
            }
        }
        else
        {
            ErrorWindow.CreateNew(loadOp.Error);
            loadOp.MarkErrorAsHandled();
        }
    } 
```

**更新**

事实证明，数据上下文的作业实体集（代码中的 trx）正在填充，但各个项目经理的作业属性没有。换句话说：

```
trx.ProjectManagers.Count = 4
trx.Jobs.Count = 9
trx.ProjectManagers[2].Jobs.Count = 0 //(Should be 9)
trx.Jobs[0].ProjectManagers.Count = 0 //(Should be 1) 
```

# r - 在不使用比例转换的情况下指定 ggplot2 中刻度标签的格式？

> ID：15795929
> 
> 赞同：1
> 
> 时间：2013-04-03T19:10:16.633
> 
> 标签：r, ggplot2, rpy2

我在 ggplot2 中有一个图表（通过 rpy2），它以 log2 比例格式化 x 轴：

```
p += ggplot2.scale_x_continuous(trans=scales.log2_trans(),
                                   breaks=scales.trans_breaks("log2",
                                                              robj.r('function(x) 2^x'),
                                                              n=8),
                                   labels=scales.trans_format("log2", robj.r('math_format(2^.x)'))) 
```

如果 x 值已经在 log2 中，我该如何应用 , 的格式转换`scales`以使值以`2^x`格式显示，而不是十进制 log2 值？即，如果我要放弃`trans=`参数，我怎样才能正确格式化刻度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:40:35.493

我可以用纯 R 给出答案，但我不知道 rpy2 能够翻译它。

实际上，您只需指定`labels`控制标签显示方式的参数；不要更改影响整体缩放和中断出现位置的`trans`or参数。`breaks`使用`mtcars`为例：

```
library("ggplot2")
library("scales")
ggplot(mtcars, aes(wt, mpg)) + 
  geom_point() +
  scale_x_continuous(labels = math_format(2^.x)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/YAhU6.png)

（显然这没有意义，因为重量还不是以对数为底的 2 刻度，但这个概念有效。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:57:25.577

猜测`math_format()`是`scales`（现在无法检查），并且根据布赖恩的回答，rpy2 版本应该如下：

```
from rpy2.robjects.lib import ggplot2
from rpy2.robjects.packages import importr
scales = importr("scales")
p = ggplot2.ggplot(mtcars) + \
        ggplot2.aes_string(x="wt", y="mpg")) + \ 
        ggplot2.geom_point() + \
        ggplot2.scale_x_continuous(labels = scales.math_format("2^.x"))
p.plot() 
```

# php - get_defined_vars 序列化/反序列化

> ID：15795931
> 
> 赞同：0
> 
> 时间：2013-04-03T19:10:27.233
> 
> 标签：php, sql, debugging

是否有一种简洁的方法来序列化/反序列化“get_defined_vars()”的输出？

我意识到这里有一些相当大的障碍，包括递归和系统变量等，但必须有办法。

仅供参考，我的目标是能够将环境序列化到数据库以便稍后进行调试（使用标识符转储环境，稍后将序列化的环境和代码拉到标识符之后（这就是标识符的用途）并运行它（精确播放。）暂时不担心规范化（过早的优化等。）

有任何想法吗？对于一个时间有限的单人乐队来说，这是一个太深的兔子洞吗？还是我错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:05:39.603

您可以使用以下方法保存变量：

```
$saved_vars = serialize(get_defined_vars()); 
```

您可以使用以下方法恢复它们：

```
extract(unserialize($saved_vars)); 
```

# ruby-on-rails - 路由非restfull控制器

> ID：15795934
> 
> 赞同：0
> 
> 时间：2013-04-03T19:10:39.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个控制器：

**gods_controller.rb**

```
class GodsController < ApplicationController
  def notifications
    @reviews= Review.where("flag = ?", true)    
    respond_to do |format|
      format.html # index.html.erb      
    end
  end
end 
```

**路线.rb**

```
resources :gods, :only => [:index] do
   get :notifications      
end 
```

那条路线给了我这个：[http ://example.com/gods/1/notifications](http://example.com/gods/1/notifications)

但我想要的是：[http ://example.com/gods/notifications](http://example.com/gods/notifications)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:30:34.487

尝试：

```
resources :gods, :only => [:index] do
  collection do
    get :notifications      
  end
end 
```

您可以在此处阅读有关此内容的更多详细信息：http: [//guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:32:32.350

您可以做的一件事是将您当前的路线更改为：

```
match "/gods/:id/notifications" => "gods#notifications" 
```

# php - 将 $_POST 值与数据库字段进行比较

> ID：15795940
> 
> 赞同：-2
> 
> 时间：2013-04-03T19:10:59.497
> 
> 标签：php, mysql

我很确定这段代码有问题：

```
$sql="select * from user where username={$_POST['username']}AND pwd=   {$_POST['password']}";

$r = mysqli_query($link,$sql);
if($r)
{ 
$_SESSION['loggedin']=true;

echo "Welcome". $_POST['username']; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:13:25.340

是的，您会接触到 SQL 注入。请了解预先准备好的陈述。

此外，您显然以纯文本形式存储密码。这是一个安全风险，因为如果您的数据库被暴露（由于 SQL 注入攻击，例如*咳咳*），您的所有密码都可能被泄露。

几个链接：

*   **[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)**
*   **[准备好的陈述 - 维基百科](http://en.wikipedia.org/wiki/Prepared_statement)**
*   **[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/q/4795385/871050)**

# ruby - 如何在 jRuby 中启用 C 扩展支持？

> ID：15795942
> 
> 赞同：18
> 
> 时间：2013-04-03T19:11:00.933
> 
> 标签：ruby, configuration, rubygems, jruby

我想安装一个 gem，但我收到以下错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing twitter-login:
        ERROR: Failed to build gem native extension.

        C:/nwcloud/jruby-1.7.2/bin/jruby.exe extconf.rb
NotImplementedError: C extension support is not enabled. Pass -Xcext.enabled=true to JRuby or set JRUBY_OPTS or modify .jrubyrc to enable. 
```

我也用同样的问题阅读了[这个](https://stackoverflow.com/questions/11817590/jruby-gems-with-c-extensions)问题，但我什至不知道如何使用三个选项启用支持，因为我不知道如何传递`-Xcext.enabled=true`给 JRuby 或设置 JRUBY_OPTS 或修改 .jrubyrc 以启用。

有人可以帮我解决我的初学者问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-01T21:21:59.143

Rodrigo 建议的 .jrubyrc 编辑对我不起作用（jdk 7u25 / JRuby 1.7.4），但导出 JRUBY_OPTS 确实可以解决问题：

```
export JRUBY_OPTS="--1.9 -Xcext.enabled=true" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-27T00:29:01.623

确保您使用的是最新的 openjdk（7 更新 21，在撰写本文时）和最新的 JRuby（1.7.4）。

在您的用户主文件夹中创建一个名为 .jrubyrc 的文件。

添加以下内容；

```
cext.enabled=true 
```

完毕

# sql - 遇到 SQL 除以零错误

> ID：15795953
> 
> 赞同：-1
> 
> 时间：2013-04-03T19:11:28.550
> 
> 标签：sql, sql-server, debugging

我在调试我的 SQL 代码时遇到问题，以找出为什么我会产生“遇到除以零错误”。我相信在尝试除以空值并使用 NULLIF 时会发生此错误，据我所知是一种防止这种情况的方法。我的尝试一直不成功，并且可以在我的代码上使用一些额外的眼睛。SQL Server 数据库

```
SET NOCOUNT ON;
        SELECT  CAST(yr AS INT) AS yr ,
                CAST(rs.RTRIM(D.bus_name) AS VARCHAR(100)) AS bus_name ,
                CAST(rs.RTRIM(D.bus_code) AS VARCHAR(20)) AS bus_code ,
                SUM(CAST(D.salary AS NUMERIC(18, 2))) AS bus_salary , 
                SUM(D.total_assign) AS total_assignment
        FROM    (
        --begin: table:D
                  SELECT    C.bus_code ,
                            C.bus_name ,
                            C.sales_issue_id ,
                            SUM(CAST(C.salary AS NUMERIC(18, 2))) AS salary ,
                            MAX(total_fte) AS total_fte ,
                            SUM(C.assigned_fte) AS total_assign ,
                            MAX(total_salary) AS total_salary ,
                            C.yr
                  FROM      (
                --begin: table C: 
                              SELECT    B.sales_issue_id ,
                                        B.last_name ,
                                        B.firs.t_name ,
                                        B.bus_code ,
                                        B.bus_name ,
                                        B.total_salary ,
                                        B.assigned_fte ,
                                        ( B.total_salary * B.assigned_fte )
                                        / total_fte AS salary ,
                                        B.total_fte ,
                                        B.yr
                              FROM      --table B:
                                        (
                        --begin B: 
                                          SELECT    tb_total_fte_salary.sales_issue_id ,
                                                    rs.bus_name ,
                                                    tb_total_fte_salary.total_fte ,
                                                    rs.region_code
                                                    + rs.county_code
                                                    + rs.bus_code AS bus_code ,
                                                    rs.last_name ,
                                                    rs.first_name ,
                                                    tb_total_fte_salary.total_salary ,
                                                    assigned_fte = CASE rs.assign_fte
                                                              WHEN '' THEN 0
                                                              ELSE CAST(rs.assign_fte AS NUMERIC(18,
                                                              2))
                                                              END ,
                                                    rs.yr
                                          FROM      dbo.raw_sales AS rs, 

                                                    (

                                                      SELECT  sales_issue_id ,
                                                              yr ,
                                                              MAX(last_name) AS last_name ,
                                                              MAX(first_name) AS first_name ,
                                                              SUM(CAST(assign_fte AS NUMERIC(18,
                                                              2))) AS total_fte ,
                                                              MAX(CAST(NULLIF(total_salary,
                                                              0) AS NUMERIC(18,
                                                              2))) AS total_salary
                                                      FROM    raw_sales

                                                      GROUP BY sales_issue_id ,
                                                              yr
                                        --end

                                                    ) tb_total_fte_salary
                                          WHERE     rs.sales_issue_id = tb_total_fte_salary.sales_issue_id
                                                    AND rs.yr = tb_total_fte_salary.yr 

                        --end B:

                                        ) B
                --end C:

                            ) C
                  GROUP BY  C.sales_issue_id ,
                            C.last_name ,
                            first_name ,
                            C.bus_name ,
                            C.bus_code ,
                            C.yr
        --end D:

                ) D
        GROUP BY bus_code ,
                bus_name ,
                yr
        ORDER BY yr ,
                bus_code ,
                bus_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:15:04.950

尝试 ：

```
SET NOCOUNT ON;
        SELECT  CAST(yr AS INT) AS yr ,
                CAST(rs.RTRIM(D.bus_name) AS VARCHAR(100)) AS bus_name ,
                CAST(rs.RTRIM(D.bus_code) AS VARCHAR(20)) AS bus_code ,
                SUM(CAST(D.salary AS NUMERIC(18, 2))) AS bus_salary , 
                SUM(D.total_assign) AS total_assignment
        FROM    (
        --begin: table:D
                  SELECT    C.bus_code ,
                            C.bus_name ,
                            C.sales_issue_id ,
                            SUM(CAST(C.salary AS NUMERIC(18, 2))) AS salary ,
                            MAX(total_fte) AS total_fte ,
                            SUM(C.assigned_fte) AS total_assign ,
                            MAX(total_salary) AS total_salary ,
                            C.yr
                  FROM      (
                --begin: table C: 
                              SELECT    B.sales_issue_id ,
                                        B.last_name ,
                                        B.firs.t_name ,
                                        B.bus_code ,
                                        B.bus_name ,
                                        B.total_salary ,
                                        B.assigned_fte ,
                                      -- this is where i changed your query
                                       case when total_fte > 0 then
                                        ( B.total_salary * B.assigned_fte )
                                        / total_fte 
                                          else 0 end
                                         AS salary ,
                                        B.total_fte ,
                                        B.yr
                              FROM      --table B:
                                        (
                        --begin B: 
                                          SELECT    tb_total_fte_salary.sales_issue_id ,
                                                    rs.bus_name ,
                                                    tb_total_fte_salary.total_fte ,
                                                    rs.region_code
                                                    + rs.county_code
                                                    + rs.bus_code AS bus_code ,
                                                    rs.last_name ,
                                                    rs.first_name ,
                                                    tb_total_fte_salary.total_salary ,
                                                    assigned_fte = CASE rs.assign_fte
                                                              WHEN '' THEN 0
                                                              ELSE CAST(rs.assign_fte AS NUMERIC(18,
                                                              2))
                                                              END ,
                                                    rs.yr
                                          FROM      dbo.raw_sales AS rs, 

                                                    (

                                                      SELECT  sales_issue_id ,
                                                              yr ,
                                                              MAX(last_name) AS last_name ,
                                                              MAX(first_name) AS first_name ,
                                                              SUM(CAST(assign_fte AS NUMERIC(18,
                                                              2))) AS total_fte ,
                                                              MAX(CAST(NULLIF(total_salary,
                                                              0) AS NUMERIC(18,
                                                              2))) AS total_salary
                                                      FROM    raw_sales

                                                      GROUP BY sales_issue_id ,
                                                              yr
                                        --end

                                                    ) tb_total_fte_salary
                                          WHERE     rs.sales_issue_id = tb_total_fte_salary.sales_issue_id
                                                    AND rs.yr = tb_total_fte_salary.yr 

                        --end B:

                                        ) B
                --end C:

                            ) C
                  GROUP BY  C.sales_issue_id ,
                            C.last_name ,
                            first_name ,
                            C.bus_name ,
                            C.bus_code ,
                            C.yr
        --end D:

                ) D
        GROUP BY bus_code ,
                bus_name ,
                yr
        ORDER BY yr ,
                bus_code ,
                bus_name 
```

# c# - 如何从可以被其他类继承的类继承并保留其他类的属性（对于视图模型）

> ID：15795954
> 
> 赞同：0
> 
> 时间：2013-04-03T19:11:31.177
> 
> 标签：c#, oop, viewmodel, multiple-inheritance

我在这里被困在我的遗产膨胀中：

首先让我解释一下我的问题的前提。我的模型：

```
public class Person
{      
    [Key]
    public int PersonId { get; set; }

    [MaxLength(100)]
    public string Name { get; set; }    
}

public class SuperHero:Person
{    
    [MaxLength(100)]
    public string SuperHeroName { get; set; }
    public virtual ICollection<SuperPower> SuperPowers{ get; set; }
} 
```

现在，我正在尝试为我的 MVC 网站创建我的视图模型，我有那些需要被所有其他视图模型继承的基类，这些视图模型显示/编辑一个人/超级英雄：

```
public class BasePersonViewModel
{
    public string Name { get; set; }    
    ctors()
}

public class BaseSuperHeroViewModel : BasePersonViewModel
{
    public List<string> SuperPowers{ get; set; }
    ctors() 
} 
```

这是我卡住的地方，我试图只定义一个 ViewModel 可以使用，而不管 Person 和/或 SuperHero 的基类和访问属性（如果 Person 是超级英雄）。我一直在拔头发，但到目前为止只找到了一个我不喜欢的解决方案：

例子：

```
public class SomeViewModel<T> where T : BasePersonViewModel
{
    public BasePersonViewModel obj;
    public DateTime BirthDate { get; set; }

    public SomeViewModel(Person data) //: base(data)
    {
        if (data is SuperHero)
            obj = new BaseSuperHeroViewModel (data);
        else
            obj = new BasePersonViewModel(data);
    }
} 
```

虽然这会起作用，但使用起来并不性感。最重要的是，我还可以拥有另一个继承自 SomeViewModel 的 ViewModel。

有没有更清洁的方法来实现这一目标？

**编辑** 我的主要目标是能够根据基类之一来转换我的 SomeViewModel 。假设在我的控制器中做类似的事情：

```
if myclass is SomeViewModel (of type SuperHero) 
```

究竟是如何为 Person/SuperHero db retrival/check 做的

```
var data = context.Person.first(w=> w.Id==1)
if (data is SuperHero)
.. 
```

我想要这个，因为我想使用相同的视图模型让我们假设列出超级英雄和人，如果它是超级英雄，则显示略有不同

**编辑 2** 我试图避免使用整个 Model.Obj 以便能够直接与模型一起看到它......但我想得越多，我就越觉得这是不可能的......最重要的是我想在 SomeViewModel 中扩展一些其他 superHero 特定属性（仅当 SomeViewModel 是超级英雄时），这些属性未在 BaseSuperHeroModel 中声明……假设在 SomeViewModel 中，我只希望超级英雄时使用“ComesFromPlanet”字段。

**编辑 3** 我想到了另一种方法，但它显然创建了各种 ViewModel。对于最一般的情况（所有人员共享的所有字段），我会保留我的基础：

```
public class BasePersonViewModel
{
    public string Name { get; set; }    
    ctors()
} 
```

我接口特定的人：

```
public Interface IBaseSuperHero
{    
    [MaxLength(100)]
    public string SuperHeroName { get; set; }
    public List<string> SuperPowers{ get; set; }
} 
```

我也会像这样保留 OtherViewModel ：

```
public class SomeViewModel:BasePersonViewModel
{    
    Public datetime Birthdate {get;set;}
} 
```

然后我会为其他 Person 继承创建一个特定的 SomeviewModel 并使用接口来拥有新旧属性。例如：

```
public class SomeViewModelSuperHero:SomeViewModel, IBaseSuperHero
{   
  public string OriginalPlanet {get;set;}
} 
```

这是一个干净的解决方案吗？

对不起，我确定我不清楚这一点，但我试试！

感谢您的投入和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:25:14.573

像这样的东西怎么样

```
public class Person {
    public virtual BasePersonViewModel MainViewModel {
        get { return new BasePersonViewModel(this);}
    }
}

public class SuperHero : Person {
    public override BasePersonViewModel MainViewModel {
        get { return new BaseSuperHeroViewModel(this);}
    }
} 
```

因此，如果您的所有人员类都覆盖 MainViewModel 属性以返回适当的视图，则您不需要

```
public BasePersonViewModel obj;
public SomeViewModel(Person data) {
    if (data is SuperHero)
        obj = new BaseSuperHeroViewModel (data);
    else
        obj = new BasePersonViewModel(data);
} 
```

因为你可以拥有

```
public BasePersonViewModel obj;
public SomeViewModel(Person data) { obj = data.MainViewModel; } 
```

无论您拥有多少人，这都会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:36:51.783

> 我试图只定义一个 ViewModel 可以使用，而不管 Person 和/或 SuperHero 的基类和访问属性（如果 Person 是超级英雄）

假设您在模型不是超级英雄时返回超级英雄属性的默认值，您可以执行以下操作：

```
public class PersonOrSuperHeroViewModel {
  private Person person;
  private SuperHero superHero;

  public PersonOrSuperHeroViewModel(Person personOrSuperHero) {
    if (personOrSuperHero is SuperHero) superHero = personOrSuperHero;
    person = personOrSuperHero;
  }

  public IsSuperHero { get { return superHero != null; } }

  ... // super-hero properties only work when IsSuperHero == true
} 
```

# c# - 将 Windows 窗体倒置

> ID：15795957
> 
> 赞同：0
> 
> 时间：2013-04-03T19:11:41.033
> 
> 标签：c#, .net, winforms

我有一个 C# 应用程序，它有一个现有的 WinForm，我现在需要倒置显示。

该应用程序将显示在触摸屏 Windows 7 设备上。如果两个人在使用该设备，则一个人正面朝上观看它，而另一个用户同时倒着观看它。我需要让一个控件正面朝上显示，而另一个控件则上下颠倒显示，每个控件都是重复的形式。两者都需要起作用。标题栏和 Windows 的关闭、最大化和最小化不需要旋转。

有没有一种方法可以轻松旋转此表单及其所有内容，而无需从头开始重写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:21:05.330

不幸的是，在 WinForms 中不能直接旋转控件。

至少，如果您希望它们保留其功能，则不会。将控件绘制到位图中，旋转位图，然后将其绘制回窗体上的所需位置会相对简单。但是您显然会失去与控件交互的能力。他们只是他们原始自我的静态代表。

但是制作功能性颠倒控制是不会发生的。我的意思是，您可以*尝试*为自绘控件编写一堆自定义绘图代码，但您仍然会遇到一堆错误、极端情况和兼容性问题。WinForms 所基于的 Win32 控件不支持这一点。考虑到它们是在 20 到 25 年前发明的，这真的不足为奇，在任何人想到可以放在口袋里随身携带并可以向任何方向旋转的电脑屏幕之前，它们就已经被发明了。像 WPF 这样的 UI 技术在触摸屏和平板电脑出现的时候出现是有充分理由的。

在翻转整个屏幕时可以探索一些可能性，但是当您希望不同的控件走向不同的方向时，这将无济于事*。*（当我这么说的时候，我想它背叛了我作为桌面应用程序人员的优势，但这听起来像是一个令人难以置信的混乱 UI。）

如果您绝对必须拥有它，那么其他人将不得不为您提供另一条破解它的途径，也许是按照 Dhawalk 的评论：在 WPF 应用程序中托管 WinForms 控件，该应用程序确实为旋转控件提供内置支持. 我对此知之甚少，无法在这条道路上提出任何具体建议。从几分钟的搜索来看，WindowsFormsHost 似乎实际上并不支持旋转变换，所以无论如何这可能是一个非首发。

# javascript - 有没有一种简单的方法可以找到阻止事件默认的代码？

> ID：15795959
> 
> 赞同：1
> 
> 时间：2013-04-03T19:11:41.927
> 
> 标签：javascript

这个问题给我提了好几次：

我编写了一些处理事件的代码，例如单击。我单击该元素，没有任何反应。`e.preventDefault()`在我的代码有机会处理它之前，其他一些代码正在调用。

**问题：**
有没有办法找到阻止我忽略的默认代码？

我通常通过在 firebug 中运行 javascript profiler 并查看在单击期间调用的每个函数（而不是在 jquery 等内部）来解决这个问题，这些函数可能正在做坏事。一定有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:30:17.083

我会在应该执行的函数中放置一个测试警报，从顶部开始，然后在每个语句之后将其向下移动。如果警报没有在函数顶部执行，我会检查您的 HTML 元素以及您如何选择它。如果一切看起来都很好，我会使用可能的元素选择器搜索您的文件。

# sql - 使用计数函数 SQL

> ID：15795960
> 
> 赞同：0
> 
> 时间：2013-04-03T19:11:43.107
> 
> 标签：sql, sql-server

好的，我正在尝试使用此计数函数来计算 case 语句的不同部分。这是现在的工作代码。它会告诉我有人从哪一年开始上学。学年的细分方式是 200703 是 07 年夏季，200801 是 07 年秋季，200802 是 08 年春季。所以案例陈述给了我一个学生开始的学年。我只需要一种简单的方法来计算每个学年有多少一年级学生。我尝试在 case 语句周围使用 Count 并尝试设置不同的方法来计算它，但总是遇到聚合函数错误。任何帮助都会很棒。我在 SQL Server 2008 R2 中写这个

```
SELECT DISTINCT dbo.student_crs_hist.id_num,   
     sum(dbo.student_crs_hist.credit_hrs) as 'tot_credit_hrs',   
     min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)  as 'first_year',
     'Year' = CASE
     WHEN min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)in ('200703','200801','200802') Then '20007-2008'
     WHEN min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)in ('200803','200901','200902') Then '20008-2009'
     WHEN min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)in ('200903','201001','201002') Then '20009-2010'
     WHEN min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)in ('201003','201101','201102') Then '2010-2011'
     Else '2011-2012'
     END
FROM dbo.student_crs_hist,   
     dbo.degree_history 
WHERE dbo.student_crs_hist.id_num = dbo.degree_history.id_num  and  
        ((dbo.STUDENT_CRS_HIST.YR_CDE in ('2007') and dbo.STUDENT_CRS_HIST.TRM_CDE in ('03')) OR 
       (dbo.student_crs_hist.yr_cde in ( '2008','2009','2010','2011')  AND  dbo.student_crs_hist.trm_cde in ( '01','02','03' ))OR
         (dbo.STUDENT_CRS_HIST.YR_CDE in ('2012') and dbo.STUDENT_CRS_HIST.TRM_CDE in ('01','02'))) and 
      dbo.student_crs_hist.transaction_sts in ( 'C','H' )  AND  
      dbo.student_crs_hist.grade_cde in ( 'A','B','C' )  AND  
      dbo.degree_history.major_1 = 'ASBD' and
      dbo.student_crs_hist.adv_req_cde not in ('COL081','EGL082','EGL092','EGL093','MAT091','MAT092','MAT093','COM091','EGL100','REA100')  
Group By
     dbo.STUDENT_CRS_HIST.ID_NUM 
Having
     sum(dbo.student_crs_hist.credit_hrs) >= '30' and

     (min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE) = '200703' or
     min(dbo.student_crs_hist.yr_cde) in ('2008','2009','2010','2011') or
     MIN(dbo.student_crs_hist.yr_cde+dbo.student_crs_hist.trm_cde) in ('201201','201202'))
    Order By
    min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:27:57.820

试试这个方法：

```
...
SUM(
   CASE WHEN min(dbo.student_crs_hist.yr_cde+dbo.STUDENT_CRS_HIST.TRM_CDE)in ('200703','200801','200802') Then 1 ELSE 0 END
   ) as FirstYearStudents_07-08
... 
```

# ruby-on-rails - 找不到 id=assets 的模型

> ID：15795971
> 
> 赞同：0
> 
> 时间：2013-04-03T19:12:19.630
> 
> 标签：ruby-on-rails, ruby, rspec, friendly-id

我正在使用 rspec 和 poltergeist/phantomjs 测试我的应用程序，并且在我安装 gemfriendly_id 以更改我的默认路由后，我的所有 javascript 测试都开始抛出此错误：

```
Failure/Error: Unable to find matching line from backtrace
    ActiveRecord::RecordNotFound:
        Couldn't find SelectionProcess with id = assets 
```

我在 test.rb 中的资产配置：

```
config.serve_static_assets = true 
config.static_cache_control = "public, max-age=3600" 
```

回溯的最后几行：

```
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/activerecord-3.2.12/lib/active_record/relation/finder_methods.rb:267:in `find_by_attributes'
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/activerecord-3.2.12/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/cancan-1.6.9/lib/cancan/controller_resource.rb:109:in `find_resource'
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/cancan-1.6.9/lib/cancan/controller_resource.rb:68:in `load_resource_instance'
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/cancan-1.6.9/lib/cancan/controller_resource.rb:32:in `load_resource'
 # /Users/Augusto/.rvm/gems/ruby-1.9.3-p362@startupbase/gems/cancan-1.6.9/lib/cancan/controller_resource.rb:10:in `block in add_before_filter' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:08:11.210

听起来friendly_id 也开始用于资产网址。如果您为根 url (/) 定义友好 ID，则所有资产请求 (/assets) 都将被接管。因此，Rails 尝试查找 id = assets 的记录。

# javascript - 有没有办法知道何时应用了内部的外部 CSS，而不是等待图像加载

> ID：15795980
> 
> 赞同：2
> 
> 时间：2013-04-03T19:12:58.573
> 
> 标签：javascript, onload

`$(document).ready()` [不保证](https://stackoverflow.com/questions/1324568/is-document-ready-also-css-ready)

`window.onload`等待[所有内联（我的意思是静态）图像](http://www.quirksmode.org/elsewhere/archives/javascript/events/onload/index.html)

`DOMContentLoaded`不等待外部 CSS

还有其他解决方案吗？我错过了什么吗？

它应该是跨浏览器（至少是主流浏览器）。当然，我不是在询问动态加载的样式表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:39:16.927

在某些情况下，DOMContentLoaded 事件可能是您要查找的事件：

```
 window.addEventListener('DOMContentLoaded', func, false); 
```

您需要将外部样式表放在头部，将外部 javascript 放在页脚中，因此在应用样式之前不会触发此事件，而是在应用样式之后立即触发。

请参阅： http: [//molily.de/weblog/domcontentloaded](http://molily.de/weblog/domcontentloaded)和[http://ablogaboutcode.com/2011/06/14/how-javascript-loading-works-domcontentloaded-and-onload/](http://ablogaboutcode.com/2011/06/14/how-javascript-loading-works-domcontentloaded-and-onload/)以供参考。

此外，它不适用于 IE<9（当然）。

# spring - Spring 事务传播 REQUIRED，REQUIRES_NEW

> ID：15795985
> 
> 赞同：2
> 
> 时间：2013-04-03T19:13:20.507
> 
> 标签：spring, transactions, propagation

在下面的代码方法中`doService1()`更新正确的 sql 但`doService2()`sql 有一些问题，但是当我调用它时，即使有一个因为 有一个类型，但当我调用它时`doService()`，它必须将更新提交到 DB，但是当我 nun 时，这个更新不会提交 DB..`doService1()``doService2()``sql exception``doService2()``REQUIRES_NEW Propagation``doService1()`

```
@Service public class DbClass {

      static Logger log = Logger.getLogger(
              DbClass.class.getName());

@Autowired
private DataSource dataSource;

@Transactional(propagation=Propagation.REQUIRED)
public void doService(){
    doService1();
    doService2();
}

@Transactional(propagation=Propagation.REQUIRED)
public void doService1(){
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    String sql = "  update BATCHJOBSTATUS set PROCESSINGDATE = '20130322'  " ;
    int rowCount1 =  jdbcTemplate.update(sql);
    System.out.println(" rowCount1 >" + rowCount1);
}

@Transactional(propagation=Propagation.REQUIRES_NEW)
public void doService2(){
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    String sql = "  update aa set a_name = 'hhh' where a_id = 4 and " ;
    int rowCount1 =  jdbcTemplate.update(sql);
    System.out.println(" rowCount2 >" + rowCount1);
}   
} 
```

* * *

正如你们的建议一样，也可以按照以下方式进行测试，但仍然面临同样的问题。这里我`doService2()`在一个单独的班级，但即使仍然有与上面相同的问题

```
@Service
public class DbClass {

  static Logger log = Logger.getLogger(
          DbClass.class.getName());

@Autowired
private DataSource dataSource;

@Autowired
private DbClass2 dbClass2;

@Transactional
public void doService(){
    doService1();
    dbClass2.doService2();
}

@Transactional(propagation=Propagation.REQUIRED )
public void doService1(){
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    String sql = "  update BATCHJOBSTATUS set PROCESSINGDATE = '20130322'  " ;
    int rowCount1 =  jdbcTemplate.update(sql);
    System.out.println(" rowCount1 >" + rowCount1);

    }

}

@Service
public class DbClass2 {

@Autowired
private DataSource dataSource;

@Transactional(propagation=Propagation.REQUIRES_NEW)
public void doService2() {
    System.out.println("*******doService2*********`");

    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

    String sql = "  update aa set a_name = 'hhh' where a_id_ = 4  " ;

    int rowCount2 =  jdbcTemplate.update(sql);

    System.out.println(" rowCount2 >" + rowCount2);

}

}

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:oxm="http://www.springframework.org/schema/oxm"
         xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
             http://www.springframework.org/schema/tx 
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd

        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="com.spring"/>

      <tx:annotation-driven transaction-manager="txManager1" proxy-target-class="true"/>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
        <property name="url" value="jdbc:oracle:thin:@192.168.8.121:1521:h3" />
        <property name="username" value="admin" />
        <property name="password" value="admin" />
    </bean>

  <bean id="txManager1" class="org.springframework.jdbc.datasource.DataSourceTransactionManager" >
  <property name="dataSource" ref="dataSource"/>
  </bean>

    <bean id="batchJob" class="com.spring.jdbc.BatchJob">
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:43:41.303

我之前遇到过同样的问题，在这里解决了：[@Transactional(propagation=Propagation.REQUIRES_NEW) 的奇怪行为](https://stackoverflow.com/questions/15767914/strange-behaviour-with-transactionalpropagation-propagation-requires-new)

使用默认设置，当您`doService2()`从同一类调用时不会创建任何新的事务代理，因此您的注释不是用户。

为避免此问题，您可以放入`doService2()`另一个类或使用 aspectJ 进行事务，方法是这样声明：`<tx:annotation-driven transaction-manager="transactionManager" mode="aspectj"/>`

最佳解决方案将取决于您的应用。（这里的第二个似乎更合适）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T19:36:56.537

调用`doService2()`可能没有运行任何事务建议，因为我假设您使用的是 JDK 动态代理（接口代理）而不是基于 CGLIB 的代理。如果您还不知道它是如何工作的，您可能需要阅读：[http](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html#aop-proxying) ://static.springsource.org/spring/docs/3.0.x/reference/aop.html#aop-proxying 。

如果您不使用 CGLIB（目标类代理），则在您调用时它永远不会通过 Spring Transaction advisor，`doService2()`因为它直接调用该方法，而不是通过 Spring 在启动时为您的服务创建的包装器。

您可以通过移动`doService2()` 到不同的服务类然后将其注入此服务来使您的示例正常工作。这样，您将通过代理并运行交易建议。

否则，如果您准备对您的项目进行更大的更改，您可以让您的示例按原样工作：1）确保 CGLIB 在您的类路径中，并且 2）打开`proxy-target-class`，或强制它使用 CGLIB 代理所以通过摆脱你的服务接口。

```
<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/> 
```

如果您要这样做，请确保您已阅读第一个链接:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T11:35:11.987

根据[spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)（检查第 10.5.6.1 节），spring 框架事务将回滚仅**RunTimeException**。
不适用于其他**检查**的异常，例如`SqlException`. 所以如果你真的想要回滚这个异常，你必须像下面这样指定它

```
@Transactional(propagation=Propagation.REQUIRES_NEW,rollbackFor=SQLException.class)
public void doService2(){
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    String sql = "  update aa set a_name = 'hhh' where a_id = 4 and " ;
    int rowCount1 =  jdbcTemplate.update(sql);
    System.out.println(" rowCount2 >" + rowCount1);
} 
```

试试这个，让我知道它是否有效。 [这](http://www.byteslounge.com/tutorials/spring-transaction-propagation-tutorial)
也可能有更多帮助。

# multidimensional-array - 如何在多维数组中显示出现值？

> ID：15795987
> 
> 赞同：0
> 
> 时间：2013-04-03T19:13:23.453
> 
> 标签：multidimensional-array

我在显示数组的一列时遇到问题。我有这个代码来计算我的学生的成绩：$AvgV（平均）效果很好。

```
 $AvgV=array();
    $Sum = 0;
    for ($j=1;$j<9;$j++){
        for ($k=1;$k<=$NumStudents;$k++){
            if (isset($TableGrades[$k][$j])) {
            $Sum = $Sum + $TableGrades[$k][$j];
                }

        print ("k $k -> j $j " . $TableGrades[$k][$j] . "<br> ");
            print ("<br>"); 

        }

        if ($Sum != 0) $AvgV[$j]=round($Sum/$NumGradesV[$j],1);
        else $AvgV[$j] = '-.-';

        $Sum = 0;

    } 
```

当我打印时，我得到这个：

```
k1 -> j1 5.5
k2 -> j1 3
k3 -> j1 5.5
k4 -> j1 4.5
k5 -> j1 5
k6 -> j1 5.5
k7 -> j1 5.5
k8 -> j1 4
k9 -> j1 6
k10 -> j1 3
k11 -> j1 5.5
k12 -> j1 4
k13 -> j1 6
k14 -> j1 5.5
k15 -> j1 5.5
k16 -> j1 5.5
k17 -> j1 5
k1 -> j2 5.5
k2 -> j2 5
k3 -> j2 5.5
k4 -> j2 4.5
k5 -> j2 3.5 etc.... 
```

我想做一些统计，例如，在第 2 列中知道有多少学生获得了 4.5 或 3.5 或 5.5 的成绩，即将这些成绩分组在一个新的数组中，如下所示： 例如：

```
6    5.5    5    4    grades   etc....
2     3     2    1    students 
```

此功能运行良好：

```
function array_count_values_of($value, $TableauNotes) {
$counts = array_count_values($TableauNotes);
return $counts[$value];
}

$TableauNotes = array($TableauNotes[1][6], $TableauNotes[2][6], $TableauNotes[3][6],   $TableauNotes[4][6], $TableauNotes[5][6], $TableauNotes[6][6], $TableauNotes[7][6],  $TableauNotes[8][6], $TableauNotes[9][6], $TableauNotes[10][6], $TableauNotes[11][6], $TableauNotes[12][6], $TableauNotes[13][6], $TableauNotes[14][6], $TableauNotes[15][6], $TableauNotes[16][6], $TableauNotes[17][6]);
echo array_reduce($array, function ($v, $n) { return $v + ($n == 6); }, 0); 
```

但我不知道如何调用该函数并将结果放入一个新数组中。我希望我的描述足够好。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:17:05.950

根据我的理解，您想将函数 array_count_values_of 的结果保存在一个变量中......所以这样做：

```
$myarray = array_count_values_of($value, $TableauNotes); 
```

这会将函数的输出存储在 $myarray.

如果我对您的问题的理解有误，请随时发表评论，祝您好运！

# intellij-idea - 安装为 IntelliJ 模块的 Play Framework 2.1 应用程序

> ID：15795992
> 
> 赞同：2
> 
> 时间：2013-04-03T19:13:34.820
> 
> 标签：intellij-idea, playframework-2.0

已知的是创建 Play 应用程序所需的 IntelliJ 文件的命令：

```
play idea with-sources=yes 
```

这会生成两个文件夹：

*   `.idea`（含`libraries.xml`）
*   `.idea_modules`

网上的大多数教程或简单文章都解释了如何将应用程序挂载为 IntelliJ**项目**。

但是，我想将它安装为**模块**（作为现有项目的一部分），因此我刚刚使用了该`.idea_modules`文件。

我无法想象我手动设置所有依赖项（超过 100 个......）......

如何处理库（依赖项）？事实上，`libraries.xml`在`.idea`文件中使用，通常在有人想要将应用程序作为整个项目安装时使用。

简而言之，有没有一种有效的方法可以在 IntelliJ 中将 Play 应用程序设置为一个简单的模块，包括自动包含所有需要的依赖项？

如果 IntelliJ 可以实现像 Maven 那样的 SBT 功能以便自动导入依赖项，那就太好了。

# php - 我想暂停一个while循环，直到用户提交表单，那么我该怎么做呢？

> ID：15795996
> 
> 赞同：0
> 
> 时间：2013-04-03T19:13:43.763
> 
> 标签：php, wordpress, cj

我有一个来自 CJ 的 25 个广告，现在我想从每个给定的广告中创建 2 个不同类别的 wordpress 帖子。所以我创建了以下脚本，但它不会暂停用户输入，那么我该怎么做呢？如果它不可能，那么还有其他方法可以做到这一点吗？在脚本中 $ad 是包含广告客户 id 值的数组，$adcat 也是包含广告客户类别的数组

```
function cjlinks($n)
{
    global $ad, $adcat;

        $URI = 'https://product-search.api.cj.com/v2/product-search?website-id=12345678'.
            '&advertiser-ids='.$ad[$n].
            '&records-per-page=2';

    $context = stream_context_create(
    array(
    'http' => array(
        'method' => 'GET',
        'header' => 'Authorization: ' .
            'my api id'

        )
    ));

    $res = new SimpleXMLElement(file_get_contents($URI, false, $context));
    return $res;
}   
$a = 0;
while ($a < 25)
{

    echo 'advertiser id is:  '.$ad[$a].'<br/>advertiser - catagory is:  '.$adcat[$a]->child.
         '<br/>';

    if (isset($_SESSION['sumit'])){

    $data = cjlinks($a);
    $attributes = $data->products->attributes();

        if ($attributes->{'total-matched'} == 0){
            echo 'No products found ...try again with new keyword.';
            }else{
                foreach ($data->products[0] as $product) 
                {
                // Sanitize data.
                $price = number_format((float)$product->price, 2, '.', ' ');
                $image = '<a href="'.$product->{'buy-url'}.'"><img src="'.$product->{'image-url'}                            .'" style="float: right"/></a>';
                $pd =  $image.$product->description .'<a href="'.$product->{'buy-url'}.
                        '">...For more details and to buy it click here</a>';
                $p = array('post_title'    => $product->name,
                    'post_content'  => $pd,
                    'post_status'   => 'publish',
                    'post_author'   => 1,
                    'post_category'  =>array($_GET['cat']));
                $pr = wp_insert_post( $p, $wp_error );
                echo '<br/>posted...post ID is:'.$pr;
                wp_reset_query();  // Restore global post data stomped by the_post().

                }
            }   

        }else{
        echo 'please complete form';
        $a = $a+1;
    }
 }

?>
<html>
<body>

<form action="catag.php" method="get">
<table>

<tr>

         <td><label> Select a catagory from list:</label></td></tr>
         <tr>
            <?php

            foreach($cat as $key=>$val){

                        echo '<tr><td><input type="radio" value="'.$val->cat_ID.'" name="cat" id="'.$val->cat_ID.'">'.$val->cat_name.'</td></tr>';
                  }     

                ?>

              </tr>

</table>
<input type="submit" name="submit" value="submit">
</form><br>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:15:59.527

您不能像在页面加载之前在服务器上执行的那样从字面上“暂停”`php`脚本。`php`

要执行任何类型的“暂停”，您需要在 Javascript 或其他客户端（浏览器执行）代码中编写函数，或者将 Ajax 请求之类的内容发送到`php`页面，然后在响应时更新当前页面。