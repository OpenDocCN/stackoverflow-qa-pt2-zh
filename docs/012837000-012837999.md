# StackOverflow 问答 12837000-12837999

# python - 在不定义类的情况下将属性作为参数传递的简单方法

> ID：12837005
> 
> 赞同：0
> 
> 时间：2012-10-11T10:01:48.247
> 
> 标签：python, class, function, attributes, initialization

说我有一个功能：

```
def test(ab):
    print ab.a
    print ab.b 
```

如何在不定义类的情况下轻松地将参数传递给该函数？我正在寻找类似的东西：

```
test({4,5}) 
```

或者

```
test(ab.a = 5, ab.b = 6) 
```

这是可能吗？更改功能“测试”不是一种选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T10:08:50.220

使用[`collections.namedtuple`](http://docs.python.org/library/collections#collections.namedtuple)：

```
import collections

ab = collections.namedtuple("AB", "a b")(a=4, b=5)
test(ab) 
```

# php - 如何允许将 PHP 文件上传到服务器而不执行它们

> ID：12837017
> 
> 赞同：3
> 
> 时间：2012-10-11T10:02:20.927
> 
> 标签：php, file-upload

我想让用户能够上传 PHP 文件并在不执行它们的情况下下载它们，我需要为特定目录关闭 PHP，**使其表现为纯文本**。

我试过这个，但它是一个合适的解决方案吗？

```
RemoveHandler .php .phtml .php3
RemoveType .php .phtml .php3
php_flag engine off 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:09:59.453

### 您可以使用代理脚本来处理此问题。

在您的`.htaccess`文件中，您可以将文件夹中的所有请求重定向到这种方式：

```
http://example.com/uploads/myfilewithadminaccess.php 
```

到

```
http://example.com/uploads/index.php?file=myfilewithadminaccess.php 
```

### 来源`.htaccess`

```
RewriteEngine On
RewriteRule ^([^/]*)$ ./index.php?file=$1 [L] 
```

并且`index.php`只是解析文件并给出输出。

### 来源`index.php`：

```
<?php
    header("Content-type: text/html");
    $filename = (file_exists("uploads/" . $_GET["file"])) ? "uploads/" . $_GET["file"] : "error.txt";
    $filecont = file_get_contents($filename);
    echo htmlspecialchars($filecont);
?> 
```

### 小提琴：[http ://codepad.viper-7.com/68FSIU](http://codepad.viper-7.com/68FSIU)

**注意：**您需要在允许 URL 传递之前清理输入。因此，人们可能会注射`../`等，这些都应该小心。

希望这会有所帮助，而且非常好。

# c# - 使用异步套接字为 TCP 代理服务器实现线程

> ID：12837021
> 
> 赞同：1
> 
> 时间：2012-10-11T10:02:27.170
> 
> 标签：c#, multithreading, tcp, proxy, asyncsocket

我有一个自定义 TCP 代理服务器正在侦听端口 5888（虚拟端口）。代理服务器侦听传入连接。当代理接收到某些页面的 HTTP 请求时，它应该将其中继到主服务器的 80 端口。对于其他页面请求，代理需要将数据发送到主服务器的 8081 端口。

端口 80 用于服务 HTML 页面，而端口 8081 用于将数据流式传输到客户端。

```
Client --> Proxy(TCP Proxy Server) --> MainServer
Client <-- Proxy(TCP Proxy Server) <-- MainServer 
```

我已经使用异步编程模型（BeginXX 和 EndXX）实现了代理。代理工作正常。我将大约 10 个客户端连接到此代理没有问题。

现在我想在代理中实现线程，这样我就可以有超过 300 个同时连接到代理的客户端。考虑到异步编程模型（异步套接字），实现此线程的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:14:35.660

听起来您想为线程而线程。

添加额外的线程究竟会解决什么问题？

鉴于异步模型回调到 ThreadPool，您已经免费获得“线程”。你为什么想要更多？

您可以在读取操作的异步回调中愉快地从一个流复制到另一个流。如果您也使用 async 进行写入，它不会对 ThreadPool 造成任何重大负担，并且 IMO 最好将工作留在那里。

您是否考虑过为此使用 async/await ？如果它是一个选项，它将使您的代码在大脑上的嵌套程度更轻。

# javascript - 使用javascript识别弹出窗口的X关闭事件

> ID：12837022
> 
> 赞同：0
> 
> 时间：2012-10-11T10:02:30.427
> 
> 标签：javascript, asp.net, c#-4.0, jquery, window

我需要区分用户驱动的使用 X 关闭按钮关闭弹出窗口和通过代码关闭。

```
var win= window.showModelessDialog("http://localhost/test/test.aspx",'google,....);
//Some manipulations            
//Manipulation ends
if(win!=null && win.open)
{
 win.close();
} 
```

现在我可以完全访问 test.aspx 和 test.aspx.cs。我在 test.aspx 页面中定义了一个 onbeforeunload 方法，无论我关闭窗口（X 关闭或我的代码被执行）我都想调用该方法区分我的 X 关闭和编程关闭，以便我可以进行一些后端操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:14:21.333

使用**模型弹出窗口**并包括“确定”和“取消”按钮。

现在您可以同时处理“确定”和“取消”按钮事件。

您可以使用：

**[AjaxControlToolkit - ModalPopup](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)**

**[jQuery UI - 对话框](http://jqueryui.com/dialog/#modal-confirmation)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:16:19.730

可能是这样的：

```
var MyPopup = {

  _win : null,

  _userClosingWindow : true,

  open : function() {
    var _this = this;
    this._win = window.open(...);
    this._win.onbeforeunload = function() {
      if( _this._userClosingWindow ) {
         // closed by user
      }
      else {
        // closed in code
      }
    };
  },

  close : function() {
    this._userClosingWindow = false;
    this._win.close();
  }

}; 
```

然后您可以使用 MyPopup.open() 和 MyPopup.close() 并且仍然知道何时调用 close 函数或用户何时关闭弹出窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:25:56.210

```
// parent
function closePopup(win) {
    win.close();
    // do the magic stuff...
}

// popup (test.aspx)
function closeMe() {
    self.opener.closePopup(window);
} 
```

**更新**
根据您的评论，只需检查`closed`弹出窗口的属性。如果是`false`，则弹窗仍处于打开状态，否则已关闭

```
if (win.closed === false) {
    win.close();
    // do magic stuff here
} 
```

# signalr - 从 Global.asax (MVC 3) 调用 SignalR 的方法

> ID：12837023
> 
> 赞同：0
> 
> 时间：2012-10-11T10:02:32.557
> 
> 标签：signalr, signalr-hub

我为 POC 创建了一个示例 signalR。我想从 Global.asax 调用一个集线器方法并将一个字符串值传递给客户端。我的消息中心是：-

```
[HubName("messageHub")]
public class MessageHub : Hub
{
    public static IHubContext context = GlobalHost.ConnectionManager.GetHubContext<MessageHub>();
    public void Message()
    {

        /*
         * services and updates the messages
        * property on the PushMessage hub
        */
        //IHubContext context = GlobalHost.ConnectionManager.GetHubContext<SignalR_Error_Logging.Models.ErrorModel>();
        List<GenerateError.Repository.ErrorModel> model = ErrorRepository.GetError();
        context.Clients.pushMessages(model[0].ErrorMessage);

    } 
```

我在 layout.cshtml 中定义了两个脚本

```
<script type="text/javascript" src="../../Scripts/jquery-1.6.4.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.signalR-0.5.3.js"></script> 
```

我的 Index.html 如下：-

```
 @{
    ViewBag.Title = "Receive Error message";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        var myHub = $.connection.messageHub;
        myHub.pushMessages = function (value) {
            console.log('Server called addMessage(' + value + ')');
            $("#messages").append("<li>" + value + "</li>");
        };
        $("#btnMessage").click(function () {

            myHub.message();
        });
        $.connection.hub.start().done(function () { alert("Now connected!"); }).fail(function () { alert("Could not Connect!"); });
    });

</script>
<h2>Receive Error Messages</h2>
<ul id="messages"></ul>
<input type="button" id="btnMessage" value="Get Error" /> 
```

在 Global.asax 我写过

```
SignalR_Error_Logging.SignalRHub.MessageHub hub = new SignalRHub.MessageHub();
        hub.Message(); 
```

在 Application_Start();

我无法在我的 UI（即 Index.cshtml）中显示消息。

我尝试过的事情：-

*   将应用程序作为 IIS 运行。
*   改变创建 HubContext 的方式。

    ```
     IHubContext _context = GlobalHost.ConnectionManager.GetHubContext<MessageHub>();
    context.Clients.notify("Hello world"); 
    ```

*   `if (Clients != null) { Clients.shootErrorMessage(message); this.Clients.shootErrorMessage(message); }`

*   通过 Stackoverflow的链接[从系统中的其他地方调用 SignalR 集线器客户端](https://stackoverflow.com/questions/7634255/calling-signalr-hub-clients-from-elsewhere-in-system)

有什么建议？？？

当我通过在 Index.html 中创建一个按钮来调用我的集线器方法时，它工作正常。

抱歉没有正确地提出我的问题！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:33:40.467

我发现，调用集线器的方式不正确。目前我已经修改了 Global.asax 中的代码：-

```
 private void CallSignalR()
    {
        var context = SignalR.GlobalHost.ConnectionManager.GetHubContext<SignalR_Error_Logging.SignalRHub.MessageHub>();
        List<GenerateError.Repository.ErrorModel> err = GenerateError.Repository.ErrorRepository.GetError();
        foreach (var item in err)
        {
            item.ErrorDescription = item.ErrorDescription + DateTime.Now.ToString();
        }
        context.Clients.pushMessages(err);

    } 
```

现在工作得很好:)

还在寻找更好的选择！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:24:46.987

这永远不会奏效。Global.asax 中的 Application_Start() 在 AppDomain 的生命周期内只调用一次。它发生在网站启动时，此时尚未连接任何客户端（因为网站尚未完全初始化），因此您无法通过 SignalR 发送消息。

# html - href="file://" 不起作用

> ID：12837024
> 
> 赞同：7
> 
> 时间：2012-10-11T10:02:33.827
> 
> 标签：html, file, href

我有一个问题： `href="file://"` 嗯，我想在 html 中指向文件的链接，如果我这样写的话，在浏览器中

```
 file:///K:/filename.pdf 
```

它可以打开一个文件，但如果我将它指向：

```
 href="http://file:///K:/AmberCRO%20SOP/2011-07-05/SOP-SOP-3.0.pdf" 
```

它不起作用。链接改为：

```
file///K:/AmberCRO%20SOP/2011-07-05/SOP-SOP-3.0.pdf 
```

`colon`后文件消失。关于做什么的任何建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T10:42:31.517

您的 URL 被重写的原因`file///K:/AmberCRO%20SOP/2011-07-05/SOP-SOP-3.0.pdf`是因为您指定了`http://file://`

`http://`开头是正在使用的协议，您的浏览器正在删除第二个冒号 (:)，因为它是无效的。

**笔记**

如果你链接到类似的东西

```
<a href="file:///K:/yourfile.pdf">yourfile.pdf</a> 
```

上面表示一个文件的链接，该文件在您正在查看 URL*的机器*`k:/yourfile.pdf`上 的 k: 驱动器上调用。

 *你可以这样做，例如下面创建一个链接到`C:\temp\test.pdf`

```
<a href="file:///C:/Temp/test.pdf">test.pdf</a> 
```

**通过指定 file:// 您表明这是一个本地资源。该资源不在互联网上。**

大多数人没有 K:/ 驱动器。

但是，如果这是您要达到的目标，那很好，但这不是网页上“典型”链接的工作方式，除非每个要访问您的链接的人都可以访问，否则您不应该这样做到（相同？）K：/驱动器（共享网络驱动器可能就是这种情况）。

你可以试试

```
<a href="file:///K:/AmberCRO-SOP/2011-07-05/SOP-SOP-3.0.pdf">test.pdf</a>
<a href="AmberCRO-SOP/2011-07-05/SOP-SOP-3.0.pdf">test.pdf</a>
<a href="2011-07-05/SOP-SOP-3.0.pdf">test.pdf</a> 
```

请注意，这`http://file:///K:/AmberCRO%20SOP/2011-07-05/SOP-SOP-3.0.pdf`是一个格式错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:06:16.367

`%20`是 AmberCRO SOP 之间的空间。

尝试 -

```
href="http://file:///K:/AmberCRO SOP/2011-07-05/SOP-SOP-3.0.pdf" 
```

或者将文件夹重命名为 AmberCRO-SOP 并将其写为 -

```
href="http://file:///K:/AmberCRO-SOP/2011-07-05/SOP-SOP-3.0.pdf" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T15:35:05.720

为“每个人”或某个特定组共享您的文件夹，然后尝试以下操作：

```
<a href="file://YOURSERVERNAME/AmberCRO%20SOP/2011-07-05/SOP-SOP-3.0.pdf"> Download PDF </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-03T16:37:50.360

尽管 ffile:////.exe 曾经可以工作（例如 - 早期 html 4 的某些版本），但似乎 html 5 不允许这样做。使用以下测试：

```
<a href="ffile:///<path name>/<filename>.exe" TestLink /a> 
<a href="ffile://<path name>/<filename>.exe" TestLink /a> 
<a href="ffile:/<path name>/<filename>.exe" TestLink /a> 
<a href="ffile:<path name>/<filename>.exe" TestLink /a> 
<a href="ffile://///<path name>/<filename>.exe" TestLink /a> 
<a href="file://<path name>/<filename>.exe" TestLink /a> 
<a href="file:/<path name>/<filename>.exe" TestLink /a> 
<a href="file:<path name>/<filename>.exe" TestLink /a> 
<a href="ffile://///<path name>/<filename>.exe" TestLink /a> 
```

以及... 1/ 仅用“file”替换“ffile” 2/ 所有上述变体都在 ffile 或文件之前添加了 http:// 前缀。

我能看到的最好的情况是，如果一个人想要打开（编辑）或保存文件，它是可以完成的。但是，exec 文件不会以其他方式执行。*

# c# - 在 c# 或 c++ 中使用更快的时钟加速应用程序

> ID：12837025
> 
> 赞同：1
> 
> 时间：2012-10-11T10:02:36.950
> 
> 标签：c#, c++, architecture, operating-system

我有用 C# 和 C++ 编写的不同应用程序，它们可以相互通信。我想用我写的一些场景来测试这个环境。

每个场景运行不同的时间。

有没有办法加速一切，以便让场景在几分钟内运行。

应用程序可能包含一些`Thread.Sleep(...)`或等效的 C++。

我的想法是 a`Thread.Sleep(2000)`通常会等待 2 秒，但加速时它应该只等待 200 毫秒。

不幸的是，我无法更改或重构应用程序的代码。

我的第一个想法是在“加速 Windows”系统中运行应用程序。一种操作系统的包装器，时间运行得更快。但我不知道如何实现这一目标。

所以任何新的想法或解决方案都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:18:11.053

我不认为“让 Windows 运行得更快”是切实可行的，但我会考虑拦截 Sleep() 方法调用并将它们短路。我没看过，但 Thread.Sleep() 可能会在某个地方找到 Win32 API 或 NT API (http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v= vs.85).aspx)。

您可以使用 Windows SDK 中的depends.exe 和调试器来查看您的代码使用什么，但我怀疑（除非您知道其他情况）它不仅仅是一个 Sleep() 调用，它更有可能是一个调用等待某个系统对象、I/O 或触发器，使用 WaitForMultipleObjectsEx() 和朋友。

看看 Microsoft Research 的 API 拦截 Detours [http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx)

Jeffry Richter 和 Matt Pietrek 也有关于这个主题的各种著作。事实上，这是一篇受其中一个启发的 codeproject 文章；

[http://www.codeproject.com/Articles/5178/DLL-Injection-and-function-interception-tutorial](http://www.codeproject.com/Articles/5178/DLL-Injection-and-function-interception-tutorial)

# objective-c - 如何使用块完成处理程序实现类方法

> ID：12837027
> 
> 赞同：0
> 
> 时间：2012-10-11T10:02:39.040
> 
> 标签：objective-c, ios, asynchronous, objective-c-blocks

我正在尝试实现类似于

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

在`NSURLConnection`，但我对内存管理有点困惑（我目前没有使用 ARC）。

我当前的代码是这样的：

```
@interface StuffInfoDownloader() <UIAlertViewDelegate>

typedef void (^StuffInfoDownloaderCompletionBlock)(NSArray *stuffs);

- (id)initStuffsWithIdentifiers:(NSSet *)identifiers
         completionHandler:(void (^)(NSArray *stuffs))handler;

@property (retain, nonatomic) StuffInfoDownloaderCompletionBlock completionHandler;
@property (retain, nonatomic) NSSet *identifiers;

@end

@implementation StuffInfoDownloader

@synthesize completionHandler = _completionHandler;
@synthesize identifiers = _identifiers;

+ (void)loadAsynchronouslyWithIdentifiers:(NSSet *)identifiers
                    completionHandler:(void (^)(NSArray *stuffs))handler
{
    StuffInfoDownloader *downloader = [[StuffInfoDownloader alloc] initStuffsWithIdentifiers:identifiers completionHandler:handler];

    [downloader downloadStuffs];
    [downloader release]; // will retain itself
}

- (id)initStuffsWithIdentifiers:(NSSet *)identifiers
          completionHandler:(void (^)(NSArray *stuffs))handler
{

    if (!(self = [super init])) {
        return nil;
    }

    [self retain];

    _completionHandler = handler;
    _identifiers = identifiers;

    return self;
}

- (void)downloadStuffs
{
    __block StuffInfoDownloader *me = self; // avoid reference cycle between self and the block
    [StuffsConnection loadAsynchronouslyWithIdentifiers:self.identifiers completionHandler:
    ^(NSArray *stuffs, NSError *error) {
         if(error) {
             UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Failed."
                                                         message:@"TODO do localised string"
                                                        delegate:self cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil, nil];
             [alert show];
             [alert release];
         } else {
             me.completionHandler(stuffs);
             [self release];
         }
    }];
}

#pragma mark UIAlertViewDelegate

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
#pragma unused(alertView, buttonIndex)
    // try again
    [self downloadStuffs];
}

- (void)dealloc
{
    [_completionHandler release];
    [_identifiers release];
    [super dealloc];
} 
```

基本上，我将对象的所有权传递给它自己，并在处理程序中释放它。有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:54:24.747

这段代码有很多问题。除了块属性需要是`copy`. 你不应该做`[self retain];`and （ps 你在错误情况下`[self release];`错过了 a ）。`[self release]`这完全违反了内存管理规则。如果你做对了，它们是完全没有必要的。Cocoa 中的内存管理完全是本地的——一个函数或方法只需要关心*它*做什么，而不需要关心任何其他代码做什么。`init`没有理由这样做`[self retain]`，也不必“担心”任何其他代码的作用。时期。

那么`_completionHandler = handler; _identifiers = identifiers;`就错了。如果将块存储在实例变量中，则需要复制该块；并且该集合需要保留或复制。您需要执行*或* `_completionHandler = [handler copy]; _identifiers = [identifiers retain];`使用 setter `self.completionHandler = handler; self.identifiers = identifiers;`。

那么，就不存在“保留周期”的问题了。保留循环需要一个循环——A保留B，B保留A。块保留`self`，但`self`保留块？我在任何地方都没有看到。您只是在此块上调用另一个类的类方法。所以你不应该做弱参考。无论如何，弱引用都是不正确的，因为不能保证当前对象在块执行时是有效的。

似乎您（错误地）做了整个`[self retain]`事情，都是为了处理您（也错误地）不允许块保留的事实`self`，因为它应该。只要去掉这个弱引用的东西，去掉这些`[self retain]`东西，它不仅会遵循内存管理规则，更健壮，而且看起来更干净，更简单，更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:20:24.573

```
@property (nonatomic, copy) StuffInfoDownloaderCompletionBlock
completionHandler; 
```

然后在初始化：

```
self.completionHandler = handler; 
```

如果你以前没有复制过它，你永远不应该保留它，那没有意义。

顺便一提

```
 if ((self = [super init])) {
    /* initialization stuff*/
    }

 return self; 
```

似乎你的代码有很多retainCycle缺陷设计

# django - Django ORM。如何保存（）新值？

> ID：12837030
> 
> 赞同：0
> 
> 时间：2012-10-11T10:02:48.267
> 
> 标签：django, django-models, django-orm

如何保存（）新值？

**错误：** AttributeError：“int”对象没有属性“保存”

我有这个代码：

```
class Magazin(models.Model):
    owner = models.ForeignKey(User, related_name='user_magazin', verbose_name='Owner')
    name = models.CharField("Magazin_Name", max_length=30)
    products = models.ManyToManyField('Product', through='MagazinProduct', blank=True, null=True)

class MagazinProduct(models.Model):
    product = models.ForeignKey('Product')
    magazin = models.ForeignKey('Magazin')
    quantity = models.IntegerField() 
```

我尝试这样的事情：

```
from magazin.product.models import *

In [2]: user = 2 #user id

In [3]: quantity = 4

In [4]: magazin = Magazin.objects.get(owner=user)

In [6]: mp = MagazinProduct.objects.get(magazin=magazin, product=1) #product=1 this is ID

In [8]: mp.quantity
Out[8]: 1

In  [9]: mp.quantity = quantity
In [10]: mp.quantity
Out[10]: 4

In [11]: mp.quantity.save()
---------------------------------------------------------------------------

AttributeError: 'int' object has no attribute 'save' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:06:50.403

您只需要更改为：

```
mp.save() 
```

反而。

* * *

`mp`是`MagzinProduct`类的一个实例，`mp.quantity`只是一个`int`没有`save`方法的实例。要更新一个实例，你调用`save()`这个实例，在这种情况下它只是`mp.save()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:08:25.137

你不保存一个**属性**- 你保存一个**实例**。在您的示例中，您在`mp`实例上调用 save 方法，`mp.save()`这将保存该对象的所有属性。请参阅[官方文档](https://docs.djangoproject.com/en/1.4/ref/models/instances/#django.db.models.Model.save)以供参考。

# ssh - Jsch 如何重用会话

> ID：12837036
> 
> 赞同：6
> 
> 时间：2012-10-11T10:03:02.043
> 
> 标签：ssh, jsch

我正在创建许多不同的（会话）对象，将登录凭据从 Oracle pl/sql 包传递给 java 类。然后我将这个 (Session) 对象存储在 Vector 中。这个想法是连接、打开所需的通道、关闭通道并最终断开特定会话与此向量的连接。我设法做到了，但每个连接只工作一次。我的意思是，在我拥有的向量 (session1,session2,session3) 中，当我调用 session1.connect() 然后 session1.disconnect() 时，我不再能够再次调用 session1.connect()，因为它显然会尝试连接到服务器，但后来我得到：

检索存储在 Vector 中的会话我打开一个会话并获得：

```
INFO: Connecting to sftp.myserver.com port 2122
INFO: Connection established
INFO: Remote version string: SSH-2.0-OpenSSH_4.7
INFO: Local version string: SSH-2.0-JSCH-0.1.48
INFO: CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-       cbc,3des-ctr,arcfour,arcfour128,arcfour256
INFO: aes256-ctr is not available.
INFO: aes192-ctr is not available.
INFO: aes256-cbc is not available.
INFO: aes192-cbc is not available.
INFO: arcfour256 is not available.
INFO: CheckKexes: diffie-hellman-group14-sha1
INFO: diffie-hellman-group14-sha1 is not available.
INFO: SSH_MSG_KEXINIT sent
INFO: SSH_MSG_KEXINIT received
INFO: kex: server: diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-  sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
INFO: kex: server: ssh-rsa,ssh-dss
INFO: kex: server: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour256,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
INFO: kex: server: aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,arcfour128,arcfour256,arcfour,aes192-cbc,aes256-cbc,rijndael-cbc@lysator.liu.se,aes128-ctr,aes192-ctr,aes256-ctr
INFO: kex: server: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
INFO: kex: server: hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96
INFO: kex: server: none,zlib@openssh.com
INFO: kex: server: none,zlib@openssh.com
INFO: kex: server: 
INFO: kex: server: 
INFO: kex: client: diffie-hellman-group1-sha1,diffie-hellman-group-exchange-sha1
INFO: kex: client: ssh-rsa,ssh-dss
INFO: kex: client: aes128-ctr,aes128-cbc,3des-ctr,3des-cbc,blowfish-cbc
INFO: kex: client: aes128-ctr,aes128-cbc,3des-ctr,3des-cbc,blowfish-cbc
INFO: kex: client: hmac-md5,hmac-sha1,hmac-sha1-96,hmac-md5-96
INFO: kex: client: hmac-md5,hmac-sha1,hmac-sha1-96,hmac-md5-96
INFO: kex: client: none
INFO: kex: client: none
INFO: kex: client: 
INFO: kex: client: 
INFO: kex: server->client aes128-ctr hmac-md5 none
INFO: kex: client->server aes128-ctr hmac-md5 none
INFO: SSH_MSG_KEXDH_INIT sent
INFO: expecting SSH_MSG_KEXDH_REPLY
INFO: ssh_rsa_verify: signature true
WARN: Permanently added 'sftp.myserver.com' (RSA) to the list of known hosts.
INFO: SSH_MSG_NEWKEYS sent
INFO: SSH_MSG_NEWKEYS received
INFO: SSH_MSG_SERVICE_REQUEST sent
INFO: SSH_MSG_SERVICE_ACCEPT received
INFO: Authentications that can continue: publickey,keyboard-interactive,password
INFO: Next authentication method: publickey
INFO: Authentications that can continue: password
INFO: Next authentication method: password
INFO: Authentication succeeded (password).
INFO: Disconnecting from sftp.myserver.com port 2122 
```

一切正常，最后我断开了 session1。

然后，当我再次尝试使用 session1 时，我得到以下异常......

```
INFO: Connecting to sftp.myserver.com port 2122
INFO: Connection established
INFO: Remote version string: SSH-2.0-OpenSSH_4.7
INFO: Local version string: SSH-2.0-JSCH-0.1.48
INFO: CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256
INFO: aes256-ctr is not available.
INFO: aes192-ctr is not available.
INFO: aes256-cbc is not available.
INFO: aes192-cbc is not available.
INFO: arcfour256 is not available.
INFO: CheckKexes: diffie-hellman-group14-sha1
INFO: diffie-hellman-group14-sha1 is not available.
INFO: SSH_MSG_KEXINIT sent
INFO: Disconnecting from sftp.myserver.com port 2122
com.jcraft.jsch.JSchException: Packet corrupt
at com.jcraft.jsch.Session.start_discard(Session.java:994)
at com.jcraft.jsch.Session.read(Session.java)
at com.jcraft.jsch.Session.connect(Session.java:288)
at com.jcraft.jsch.Session.connect(Session.java:162)
at sftp.make_dir(SFTP:118) 
```

我尝试重用java对象（Session）的方式有问题吗？

非常感谢您的帮助

卢卡

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T11:30:52.740

```
com.jcraft.jsch.JSchException: Packet corrupt 
```

为了建立连接，内部发生了很多事情。每次创建会话时，都会与该会话关联一个随机数（称为数据包）。这个会话存储在一个 JSCH 会话池中。

当会话断开连接时，会话将从池中删除并且数据包无效。还有很多其他的事情发生，但是这两个对于上面提到的错误消息最重要。

现在，当您尝试使用已断开连接的会话进行连接时，它找不到数据包并抛出此错误。

# asp.net - Umbraco URLRewrite .aspx 页面

> ID：12837039
> 
> 赞同：2
> 
> 时间：2012-10-11T10:03:09.573
> 
> 标签：asp.net, url-rewriting, umbraco

我在 urlrewriting.config 文件中设置了一些不错的 url 重写。这些效果很好。但是，我想将所有扩展名为 .aspx 的页面重定向到正确的页面。

例如：

如果我在以下位置输入此网址：

**凭证results.aspx?term=Home_and_Garden**

我希望它重定向到这个：

**/vouchersresults/Home_and_Garden**

两个网址都可以正常工作，但我根本不希望网站使用 .aspx。

我已经在 URLrewriting.config 中尝试了这段小代码，除了在我使用一些查询字符串值创建的页面上之外，它工作得很好：

```
<add name="301RedirectDirUrls"
   redirectMode="Permanent"
   redirect="Application"
   ignoreCase="true"
   rewriteUrlParameter="IncludeQueryStringForRewrite"
   virtualUrl="^\/(?!(umbraco\/|data\/|install\/|usercontrols\/|umbraco_client\/))(.*)\.aspx"
   destinationUrl="$1/$2" /> 
```

当我单击此页面（/VouchersResults/Home_and_Garden/）上的分页按钮时，会触发回发，它将网址更改为丑陋的网址：

/VouchersResults/?term=Home_and_Garden

有没有人有任何想法可能导致这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:57:04.030

umbraco 内置删除 aspx。将 umbracoUseDirectoryUrls 设置为 true

在 web.config appsettings

```
<add key="umbracoUseDirectoryUrls" value="true" /> 
```

关于 Url 重写，如果我要在 IIS 中使用 URL Rewrite 执行此操作，我会执行此操作

```
^vouchersresults/([^/]+)?$ 
```

# spring - 缓存不起作用 - Ehcache + Spring 注释

> ID：12837040
> 
> 赞同：1
> 
> 时间：2012-10-11T10:03:09.747
> 
> 标签：spring, jdbc, ehcache, spring-annotations

我是 Ehcache 的新手。我尝试了一个使用 Spring 和 Ehcache 的示例。缓存似乎不起作用。当我尝试调试时，服务层返回对象但它没有被缓存。缓存中的键为空。

下面是我的代码：

web.xml

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/dispatcher-servlet.xml, /WEB-INF/cache-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

缓存配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ehcache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring"

    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring
     http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd">

    <ehcache:annotation-driven cache-manager="cacheManager" />
    <bean id="cacheManager"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
        p:config-location="/WEB-INF/ehcache-config.xml" p:shared="true"/>
</beans> 
```

ehcache-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <defaultCache eternal="true" maxElementsInMemory="100"
        overflowToDisk="false" />
    <cache name="userCache" maxElementsInMemory="100" eternal="true"
        overflowToDisk="false" />   
</ehcache> 
```

控制器：

```
@RequestMapping(value = "/test.htm")    
    public void getUsers() {

        loginService.getUser();

        Cache userCache = this.cacheManager.getCache("userCache");

        List<String> userCacheKey = userCache.getKeys();        

    } 
```

服务实现：

```
@Override
@Cacheable(cacheName="userCache")   
public User getUser() { 

    String SQLUSERByName = "SELECT * FROM User where user_id=1000";
    User user= getJdbcTemplate().queryForObject(SQLUSERByName, new UserMapper());   
    return user;

} 
```

我正在使用 Spring 3.1 版本。

# java - 在 Java Web 应用程序中重新加载资源

> ID：12837044
> 
> 赞同：1
> 
> 时间：2012-10-11T10:03:25.650
> 
> 标签：java, jsp, servlets, resources, classloader

我从硬盘上传图像，然后将其存储在我的应用程序的某个文件夹中。
但是图像不会立即显示在我的 JSP 上，只有在我重新启动应用程序后才会显示。
我猜这是因为加载应用程序资源时，目标文件夹中尚不存在所需的图像文件。
因此，我认为在将图像文件存储到目标文件夹后立即以编程方式重新加载应用程序资源将解决我的问题，但我不知道该怎么做。

**更新 1：** jsp 的一部分是要求图像：

```
<img src="${pageContext.servletContext.contextPath}/img/${imageUrl}" /> 
```

其中*imageUrl*是带有扩展名的图像文件名。

图像存储在**MyProject/src/main/webapp/img/**

有人可以帮我吗？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:33:00.180

我明白了。。谢谢。

这是发生的事情（恕我直言:)）：

在 JSP 处理期间，变量被解析为某个静态路径并被传递给浏览器。

Browses 在此处呈现静态内容，一旦它看到路径，它就会向服务器发出额外的 http 请求，但您的服务器似乎无法静态找到您的图像。这是因为一旦部署，您*就无法更改战争物理结构。*就像您使用基于文件的 WAR 表示而不是使用分解的目录一样思考。

现在你能做什么？

尝试创建一个资源 servlet，该资源 servlet 将获取带入二进制图像的请求并将其返回。

在你的 web.xml 中注册这个 servlet，路径如 /resource 并使其获取 get 参数 imgName

例子

`<img src="resource?imageName=${imageNameYouWant}" />`

在您的 jsp 中，而不是 img src 标记中的静态内容调用带有图像作为参数的 servlet。当浏览器看到这一点时，它会像以前一样发出一个常规请求，但这次它会由您的资源 servlet 处理，并会带来图像。

我会尝试的另一件事是将图像文件夹移到 webapp 目录之外。此目录由您的 Web 容器自动跟踪，但没有理由也将图像存储在那里。

你这样做：

1.  创建一个目录，如：/myapp/images

2.  您仍然需要在服务器端创建一些组件。但是这次它可能可以通过在 Web 服务器端创建一些配置来完成（没有自定义 servlet）。当您使用第一种方法时，我不确定这是否会起作用......

3.  正如我在上面已经解释的那样，在服务器上的 JSP 点中。

它是一个企业级的严肃应用程序，我会推荐第一种方法，将图像存储在数据库中，但它是一个不同的故事:)

希望这可以帮助

# facebook - 创建脸书应用程序

> ID：12837049
> 
> 赞同：0
> 
> 时间：2012-10-11T10:03:54.467
> 
> 标签：facebook, api, login

我有这个问题..

我创建了帐户来为我的应用程序开发 facebook api。我注册并创建了帐户并通过电子邮件和电话进行了验证。但是当我尝试创建新应用程序时，我收到此错误：您已被阻止创建应用程序，因为我们无法验证您的帐户。您需要使用真实姓名来维护 Facebook 帐户

我不明白，我该怎么做才能让我的帐户得到验证并正常工作？我只需要这个帐户用于开发，我不想使用帐户，因为其他开发人员可以看到我的密码。

当我尝试在 facebook 论坛上提出这个问题时，我收到了这条消息，所以我不知道该怎么办：这条消息包含以前被标记为滥用或垃圾邮件的被阻止内容

顺便说一句，我在我的真实 Facebook 帐户上添加了应用程序，但我不记得有任何问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:04:27.557

如果我没有理解错，您的意思是您正在为您的开发目的创建另一个 Facebook 帐户吗？实际上，您可以使用自己的帐户来创建 facebook 应用程序。之后，您可以从应用程序授予其他开发人员访问权限。他们也可以有权编辑您的应用程序配置。

问候， Woolei - www.woolei.com 上的 Facebook 顾问

# javascript - 重播提示音

> ID：12837052
> 
> 赞同：2
> 
> 时间：2012-10-11T10:04:03.640
> 
> 标签：javascript, jquery

在我的拖放游戏中，有一个网格填充了对用户隐藏的单词。游戏的目的是借助声音和图片拼写这些单词。

当用户拼写单词时，他们应该能够重放声音以帮助他们。我以前让它工作过，但它已经停止工作，我不知道为什么。

这是使它工作的代码...

```
$(".minibutton2").click(function() {
var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist) {
    $('.minibutton2').prop('disabled', true);

} else {

    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
}
}); 
```

这是一个小提琴 - [http://jsfiddle.net/smilburn/m8Squ/6/](http://jsfiddle.net/smilburn/m8Squ/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:12:56.717

变量是

```
var pic = $("#mypic")[0]; // pic.show() exception 
```

所以; 是 pic.show() 改变 jQuery(pic).show();

[http://jsfiddle.net/m8Squ/9/](http://jsfiddle.net/m8Squ/9/)

否则他可以

```
 var pic = $("#mypic").eq(0); // pic.show() not exception.. 
```

# android - 在编辑文本框中输入时如何从 sqlite 数据库中查找数据？

> ID：12837053
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:09.727
> 
> 标签：android

我正在制作寻找印度车牌的应用程序。我的数据库包含两列“代码”，“城市”代码包含 MH1、MH2 等数据，而城市包含 Pune、Mumbai 等数据。

应用程序包含一个编辑文本框和列表视图。

Listview 包含来自 GJ3 Rajkot、GJ10 Jamnagar 等数据库的全部数据。

如果我在编辑文本框中写 GJ 整个只有 GJ 的数据必须出现在列表视图中。

我从一个人那里得到了这个查询，但是我如何与编辑文本框集成

```
Cursor c = mDb.rawQuery(
        "select * from table_name where column_name = ?",
        new String[] { "search" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:11:17.037

只需使用 an`AutoCompleteTextView`而不是 normal `EditText`。

我想你会发现这很有用：http: [//developer.android.com/resources/tutorials/views/hello-autocomplete.html](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)

请参阅以下链接：[http ://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/)

# ios - iOS 5 和 iOS 6 UITabBarController MoreNavigationViewController 旋转

> ID：12837055
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:16.620
> 
> 标签：ios, ios5, uitabbarcontroller, ios6

我的项目基于具有多个 UINavigationContollers 的 UITabBarController。我正在调整应用程序以支持 iOS 6 中的旋转。我制作了 UITabBarController 的子类，以便可以阻止旋转。这很完美。但是 MoreNavigationViewController 有问题。在 iOS 5 上它会旋转，而在 iOS 6 上则不会。我的目标是阻止它。我必须支持所有方向（在 Info.plist 中），因为我使用的是 MPMoviePlayerViewController，它可以适应旋转。有没有办法继承 MoreNavigationViewController？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:48:36.517

如果有人会遇到同样的情况，这就是我为解决它所做的事情：

1.  Info.plist 支持所有方向
2.  在 UITabBarController 的自定义子类中，我添加了此方法

    ```
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
            return UIInterfaceOrientationIsPortrait(interfaceOrientation); 
    } 
    ```

适用于 iOS 5 和 iOS 6。

# maven - 在 Maven 中构建 EAR 文件期间出错

> ID：12837059
> 
> 赞同：14
> 
> 时间：2012-10-11T10:04:18.367
> 
> 标签：maven, maven-ear-plugin

我面临以下问题：

> 无法在项目 UserAdminEAR 上执行目标 org.apache.maven.plugins:maven-ear-plugin:2.7:generate-application-xml (default-generate-application-xml): Artifact[war:com.syril.administration:UserAdmin]不是项目的依赖项。-> [帮助 1]

这种错误的解决方案是什么？

我的 pom.xml 是

```
<modelVersion>4.0.0</modelVersion>
<groupId>UserAdminEAR</groupId>
<artifactId>UserAdminEAR</artifactId>
<version>0.0.1-SNAPSHOT</version>
<name>UserAdmin</name>
<packaging>ear</packaging>
<dependencies>
    <dependency>
        <groupId>com.syril.dao</groupId>
        <artifactId>dataAccess</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.syril.service</groupId>
        <artifactId>UserAdminService</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
    </dependency>

</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <defaultLibBundleDir>lib</defaultLibBundleDir>
                <modules>
                    <jarModule></jarModule>
                    <javaModule>
                        <groupId>com.syril.dao</groupId>
                        <artifactId>dataAccess</artifactId>
                        <includeInApplicationXml>true</includeInApplicationXml>
                    </javaModule>
                    <webModule>
                        <groupId>com.syril.service</groupId>
                        <artifactId>UserAdminSL</artifactId>
                        <contextRoot>/UserAdminSL</contextRoot>
                    </webModule>
                </modules>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-11T10:10:46.370

您还必须将战争作为依赖项添加到项目中，而不仅仅是在插件配置中。

```
<project ...>
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.syril.administration</groupId>
    <artifactId>UserAdminEAR</artifactId> 
    <version>YOUR_VERSION_HERE</version>
    <packaging>ear</packaging>

    <dependencies>
        <!-- some other dependencies here -->
        ...
        <!-- Here is the dependency to the war that is referenced in the ear plugin -->
        <dependency> 
            <groupId>com.syril.administration</groupId> 
            <artifactId>UserAdmin</artifactId> 
            <version>YOUR_VERSION_HERE</version> 
            <type>war</type> 
        </dependency>
    </dependencies>
    ...
</project> 
```

* * *

**编辑**

该`<webModule/>`工件不在您的`<dependencies/>`列表中。这就是我的建议。

添加以下内容：

```
<dependency>
    <groupId>com.syril.service</groupId>
    <artifactId>UserAdminSL</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <type>war</type>
</dependency> 
```

**或者**

更改`<webModule/>`：

```
<webModule>
    <groupId>com.syril.service</groupId>
    <artifactId>UserAdminService</artifactId>
    <contextRoot>/UserAdminSL</contextRoot>
</webModule> 
```

那当然是如果和我想`UserAdminService`的一样。`UserAdminSL`

# python - Django 评论邮件通知

> ID：12837060
> 
> 赞同：1
> 
> 时间：2012-10-11T10:04:21.607
> 
> 标签：python, django, django-forms, django-comments

我正在尝试在 django 评论框架上设置通知。我已经浏览了这里的文档 -

[https://docs.djangoproject.com/en/dev/ref/contrib/comments/moderation/#django.contrib.comments.moderation.CommentModerator](https://docs.djangoproject.com/en/dev/ref/contrib/comments/moderation/#django.contrib.comments.moderation.CommentModerator)

我已将所有代码添加到我的公告板应用程序中，这是当前发布评论的地方。在网站上发表评论时，它工作正常。但是，当我单击允许通知的“启用评论”字段时，我没有收到任何电子邮件。

**更新：

只是要添加该站点具有内置邮件程序，因此它会记录从该站点发送的所有电子邮件，并且不会收到任何评论。如果我还取消选中“启用评论”框，我会收到一条错误消息 - comment_will_be_posted 接收者 'pre_save_moderation' 杀死了评论

所以我知道该功能工作正常。

这是我到目前为止的代码：

//模型片段

```
from django.contrib.comments.moderation import CommentModerator, moderator

class Notice(models.Model):
    class Meta:
        ordering = ['-date']

    content_type = 'noticeboard'

    title = models.CharField(max_length=255)
    sector = models.ForeignKey(BusinessSector, verbose_name="Sector", related_name='notices')
    date = models.DateTimeField(auto_now_add=True, verbose_name="Date posted")
    copy = models.TextField()
    owner = models.ForeignKey('auth.User', related_name='notices')

    owner_company = models.ForeignKey('directory.Company', verbose_name='Company')
    enable_comment = models.BooleanField()

class EntryModerator(CommentModerator):
    email_notification = True
    enable_field = 'enable_comment'

moderator.register(Notice, EntryModerator) 
```

我还将文件“comment_notification_email.txt”上传到模板/联系人中。

上面的代码已包含在一个名为公告板的现有应用程序中，因为这是发布评论的地方。

如果您认为某些东西对您有用，请随时提出任何问题。

我错过了什么吗！？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:24:01.273

我必须在代码中添加一个 If 语句来说明是否正在使用邮件程序，然后发送电子邮件。否则它不会发送电子邮件。

```
if "mailer" in settings.INSTALLED_APPS:
            from mailer import send_mail
        else:
            from django.core.mail import send_mail 
```

# mysql - 将子查询结果存储为列别名以供重用

> ID：12837061
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:25.720
> 
> 标签：mysql, count, subquery

我正在尝试创建一个包含计数的列，但问题是我去哪里重用执行此操作的子查询，以前创建的临时表变得不可用，因为它不再存在。

我的问题是如何存储前一个子查询的结果，以便稍后在同一个查询中对该结果运行一些东西？

首先是我的计数：

```
CREATE TEMPORARY TABLE _temp_unique_entity_manufacturers 
            (
              entityId INT(11),
              manufacturerRef INT(11),
              manufacturerName VARCHAR(255),
              KEY(entityId),
              KEY(manufacturerRef)
            )
            ENGINE=MEMORY AS 
              (SELECT DISTINCT entityRef AS entityId, manufacturer AS manufacturerRef, pm.name AS manufacturerName FROM enquiries, parts_trading, parts_manufacturers AS pm WHERE manufacturer = pm.id AND enquiryRef = enquiries.id) 
```

然后在我的主要查询中，我使用这个表，特别是这部分：

```
IF((SELECT COUNT(*) FROM _temp_unique_entity_manufacturers WHERE entityId = eo.id) > 0,
   (SELECT COUNT(*) FROM _temp_unique_entity_manufacturers WHERE entityId = eo.id),
   0
) AS manufacturers 
```

第二个子查询失败，因为此时临时表已经消失。有没有办法让我不必一次又一次地写出相同的子查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:06:18.890

```
 case when
         ((SELECT COUNT(*) FROM _temp_unique_entity_manufacturers WHERE entityId = eo.id) > 0) then
           (SELECT COUNT(*) FROM _temp_unique_entity_manufacturers WHERE entityId = eo.id) else
           0 end
        ) AS manufacturers
    --------------
    ex:
    select coname,(case when cond then result else second result end) as user_colname from
    tablename
----------------------
If condition implement in sql as case when statement 
```

# lua - Lua 游戏应用程序需要使用缩放因子转换对象

> ID：12837062
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:31.657
> 
> 标签：lua, race-condition, coronasdk

我正在开发一个 iOS 游戏应用程序 (Race)，它需要背景进行过渡。

对于上述要求，我编写了一个代码，我必须让人们感觉好像物体是从很远的距离到附近的。

因此，我使用过渡来增加它们的**y 位置**和缩放（`xScale`和`yScale`）。这样做时，我面临的问题是当对象似乎随着它们的大小增加而越来越近时（使用**scaling**），由于缩放，对象之间的距离从它们的实际距离减小，并且看起来对象并不完美从远处传来。

请让我知道实现我想要做的事情的最佳方法是什么，或者是否有任何可用的示例代码具有汽车/自行车比赛的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:04:28.357

```
transition.to ( object,{  time=500, alpha=1,x = (destination x coor),y = (destination y coor),width =(to scale x),height =( to scale y), onComplete=saltCellarOnComplete}  ) 
```

# c - C if else 条件

> ID：12837063
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:33.447
> 
> 标签：c

在 C 中，如果我在 if 条件中只有一行，那么我可以将它组合成一行以减少代码的大小。代码的大小很长，所以我打算采取这一步来减少代码的大小。我不应该吗？这是一个好的编程习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:07:24.063

实际上，如果代码很长，那么这不是一个好的编程习惯，因为该代码不会那么可读。

所以最好使用 if else 语法来使你的代码可读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:08:24.187

在牺牲可读性的点上担心源的大小是没有意义的，特别是因为与我们的计算机通常处理/存储的几乎任何其他类型的数据相比，源都非常小（例如，整个 Firefox 的 bzip 源85 MB - 比任何中等长度的视频都小）。此外，省略换行不会改变毫秒的编译时间。

`if`因此，如果您出于自己的风格原因更喜欢单行s ，那很好（尽管它经常被不赞成），但是为了节省几个字节，它根本没有意义。

# php - 从网站重定向的 facebook 应用

> ID：12837065
> 
> 赞同：0
> 
> 时间：2012-10-11T10:04:44.087
> 
> 标签：php, html, facebook

我做了一个脸书应用程序

我已将所有代码上传到我的服务器上，因此 facebook 可以从那里检索它。

我所有的代码都是 HTML、php 和 javascript。

当用户访问 www.mywebsite.com/facebook/app 他们将转到我的 index.php 文件。但是如果用户输入 www.mywebsite.com/facebook/app/pictures/picture.jpg 他会看到图片。

现在我想确定，这个内容只能通过 facebook 访问。

所以我想将所有试图进入 www.mywebsite.com/facebook/app/..../ 的人重定向到我的 Facebook 应用程序 www.facebook.com/myapp

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:12:24.973

虽然它非常不可靠，但您可以在 php 中使用 $_SERVER['HTTP_REFERER'] 变量来查看用户是否直接在浏览器中输入了 url。如果用户直接输入了 url，它将为空，但我相信如果您的页面是通过 facebook 嵌入的，则应该设置它。

有关更多信息，请参见[http://www.electrictoolbox.com/php-http-referer-variable/](http://www.electrictoolbox.com/php-http-referer-variable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:03:10.893

我是如何解决的

```
// Saves the original URL
$Origin_URL = $_SERVER['HTTP_REFERER'];

// The original URL must also contain the word facebook
$face = "facebook";

// Checks if the URL contains 'facebook'
$contains = strpos($Origin_URL,$face);

// If the original url is empty or doesn't contain facebook
// the user will be redirected to the facebook site
if(Origin_URL == "" || $contains === false)
        header("Location: www.facebook.com/website"); 
```

这不是防弹的，所以试着玩一下吧:)

# nunit - 带有 NCover 的 Gallio 在 Sonar UI 中显示 0% 的代码覆盖率

> ID：12837072
> 
> 赞同：0
> 
> 时间：2012-10-11T10:05:05.140
> 
> 标签：nunit, sonarqube, gallio, ncover

我正在使用 sonar-runner 在 Gallio 插件的帮助下对我的 C# 代码运行测试和代码覆盖。测试运行良好，但我无法在声纳 Web UI 上看到任何代码覆盖率。

![sonar_code_coverage_snapshot](../Images/2a5817774a01574f3a392b6b1c61c811.png)

我的声纳设置如下：

**`sonar-project.properties`** *仅提及相关位* sonar.gallio.coverage.tool = NCover sonar.NCover.installDirectory = C:/Program Files/NCover sonar.donet.visualstudio.testProjectPattern = *.Test* sonar.dotnet.buildConfigurations = "Release|x86"

知道缺少什么库尔吗？

```
sonar.projectKey=XXX:XXX
sonar.projectVersion=trunk
sonar.projectName=XXX
sources=.
sonar.language=cs  
sonar.dotnet.visualstudio.solution.file=Project.sln
sonar.dotnet.excludeGeneratedCode=false
sonar.dotnet.4.0.sdk.directory=C:/WIndows/Microsoft.NET/Framework/v4.0.30319
sonar.dotnet.version=4.0 
# Gallio
sonar.gallio.mode=
sonar.gallio.coverage.tool=NCover
sonar.gallio.runner=IsolatedAppDomain
sonar.NCover.installDirectory=c:/Program Files/NCover
sonar.gallio.installDirectory=C:/Program Files/Gallio
sonar.dotnet.test.assemblies=$(SolutionDir)/../**/bin/**/*.Tests.Unit.dll
# FXCop
sonar.fxcop.mode=   
#StyleCop
sonar.stylecop.mode= 
#NDeps
sonar.ndeps.mode=skip 
```

**`sonar-runner.properties`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:37:56.717

你说

> sonar.dotnet.buildConfigurations = "发布|x86"

如果这是真的，那么您的构建可能不会生成 .pdb 文件，这是确定二进制文件和源文件之间的映射所必需的。

如果您尝试使用 Debug 构建，它会起作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:20:00.163

我在声纳中看到了与 NCover 相同的行为。我发现 Sonar 正在为 Gallio 的 NCover 跑步者生成无效参数。

尝试将 Sonar 运行器的输出通过管道传输到文本文件中，以便您可以更轻松地检查参数（在命令行上，您只需键入 sonar-runner > output.txt 即可）。

您可能会在输出中看到这样的一行：

```
INFO  .u.c.CommandExecutor - Executing command: C:\Program Files\Gallio\bin\Gallio.Echo.exe /r:Local /report-directory:E:\Reports\.sonar /report-name-format:gallio-report /report-type:Xml E:\Projects\UnitTests\bin\Release\UnitTests.dll /runner-property:NCoverCoverageFile=E:\Reports\.sonar\coverage-report.xml /runner-property:NCoverArguments=//ias MyFirstAssembly;MySecondtAssembly;MyThirdAssembly 
```

如果您尝试在命令行上通过 Gallio 手动执行此操作，您将收到错误消息：

```
Cannot find file 'MyFirstAssembly;MySecondtAssembly;MyThirdAssembly' 
```

如果您手动将此列表编辑为单个条目，例如 MyFirstAssembly*，则一切都会按预期工作。

这似乎表明 Sonar 正在为 Gallio 生成无效的命令行参数。尽管我很喜欢 NCover，但最简单的解决方案是改用 OpenCover。

# php - 自动执行 HTTP Post

> ID：12837075
> 
> 赞同：3
> 
> 时间：2012-10-11T10:05:15.730
> 
> 标签：php, cron

我有一个免费脚本，我想问一下是否可以替换或自动化搜索功能。例如每小时。现在我必须按下搜索按钮来查找新的代理，但我想自动搜索并在我的数据库中更新它们，也许使用 cron 作业。

```
if(isset($_POST['search'])) {   // hit search button
    $script_start = $pb->microtime_float();

    ob_flush();
    flush();

    $proxylisttype = $pb->returnProxyList($_REQUEST['listtype']);  // make sure request vars are clean
    $sitestoscour  = $pb->returnSitesScour($_REQUEST);             // make sure request vars are clean
    $finallist     = $pb->returnFinalList($sitestoscour);
    $finallist     = $pb->arrayUnique($finallist);                 // eliminate the dupes before moving on
    if(AUTO_BAN == 1) {                                            // remove banned proxies
        $finallist = $pb->autoBan($finallist);
    }
    $script_end    = $pb->microtime_float();                       // stop the timer
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T14:36:30.700

您可以使用 php 脚本或命令行（或 wget）中的 curl 来执行此操作。这样你就可以设置 $_POST：

```
$ch = curl_init();

curl_setopt($ch,CURLOPT_URL, "http://yoururl.com'");
curl_setopt($ch,CURLOPT_POST, true);
curl_setopt($ch,CURLOPT_POSTFIELDS, "search=your_query");

$result = curl_exec($ch);

curl_close($ch); 
```

然后通过设置 cron 作业使该脚本每​​小时运行一次。

你也可以用 wget 来做：

```
wget --post-date="search=query" http://yoururl.com 
```

# iphone - UIView 的属性层不是只读的吗？

> ID：12837077
> 
> 赞同：1
> 
> 时间：2012-10-11T10:05:23.903
> 
> 标签：iphone, ios, transform, layer

UIView 的属性层在 Apple 的文档中描述如下：

**层**

视图的核心动画层用于渲染。（只读）

```
@property(nonatomic, readonly, retain) CALayer *layer 
```

显然它是只读的。但是在我的项目中，为什么可以设置如下：

```
NSLog(@"before: %f",self.myView.laye.frame.size.width);
[self.myView.layer setAffineTransform:CGAffineTransformMakeScale(2, 2)];
NSLog(@"after: %f",self.myView.laye.frame.size.width);
//log shows us that the frame is modified 
```

在这种情况下真的很困惑。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:13:19.333

该`layer`属性是只读的，这意味着您不能将图层更改为另一个图层，但是该`CALayer`属性中包含的对象不是不可变的，您可以设置自己的属性。

你不能这样做：

```
self.myView.layer = newLayer;
// equivalent to [self.myView setLayer:newLayer]; 
```

但你可以这样做：

```
[self.myView.layer setAffineTransform:CGAffineTransformMakeScale(2, 2)]; 
```

这`setLayer:`是您不能使用的选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:35:01.587

[CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)不是 UIKit 的一部分。它是 Quartz Core 框架的一部分

而[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)类是 UIKit 的一部分。您可以阅读两者的文档以了解差异

UIView 继承自 NSObject 和 CALayer 也继承自 NSObject 所以在你做的时候： [self.myView.layer setAffineTransform:CGAffineTransformMakeScale(2, 2)];

您没有分配图层，您实际上是直接访问[CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)类图层属性，因此您可以使用图层的位置、大小和变换，正如您在[CALayer](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)文档中看到的那样，它允许所有这些事情

# php - PHP调用AJAX POST上非对象上的成员函数saveXML（）？

> ID：12837080
> 
> 赞同：0
> 
> 时间：2012-10-11T10:05:36.723
> 
> 标签：php, xml, jquery

谁能看到我的代码有什么问题？我得到的错误如下：

致命错误：在第 35 行的 /path/to/php/file.php 中的非对象上调用成员函数 saveXML()

基本上，我只是想更新一个 XML nodeValue，它会根据“AVAILABILITY”标签中设置的值更改 UI。

==================== 更新====================

XML 文件现在没有被 ('AVAILABILITY') 标记内的 ('STATUS') 节点的新值覆盖，我做错了什么吗？！

=================================================

XML 结构

```
<?xml version="1.0" encoding="UTF-8"?>
<WORK>
    <AVAILABILITY>
        <STATUS>0</STATUS> // Not being changed?!
    </AVAILABILITY>
    <SLIDE>
        <ID>YY001</ID>
        <TITLE>YourEdentity</TITLE>
        <LINK>http://youredentity.campearce.co.uk</LINK>
        <THUMB>your_ed.png</THUMB>
        <CAPTION>This is YourEdentity</CAPTION>
    </SLIDE>
</WORK> 
```

PHP 脚本：

```
<?php

$url = "../content/slides.xml";
$xml = simplexml_load_file($url);

if(!file_exists($url))
{
echo "Unable to locate file";
}
else
{
$root = $xml->WORK;
$slides = $root->SLIDE;

if(isset($_POST['action']) && !empty($_POST['action']))
{
    $action = $_POST['action'];
    switch($action)
    {
        case 'deleteslide' : delete_slide(); break;
        case 'createslide' : create_slide(); break;
        case 'changeavail' : change_avail($root, $_POST['status'], $xml, $url); break;
    }   
}
}

function change_avail($root_node, $status, $xml, $location){

$availability_node = $root_node->AVAILABILITY;
$status_node[0] = $availability_node->STATUS;
parse_str($status, $statustr);
$status_node[0] = $statustr;

file_put_contents($location, $xml->asXML());

echo $xml->asXML();
}

function save_toxml($xml, $location)
{
$fp = fopen($location, 'w');
fwrite($fp, $xml->asXML());
fclose($fp);
echo $xml->asXML();
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:14:55.007

在函数 change_avail 中，您没有变量 $xml。传输这个变量：

```
function change_avail($root_node, $status, DOMDocument $xml) 
```

# javascript - 如何将表单输入属性从动态表单传递到 JavaScript 函数

> ID：12837085
> 
> 赞同：0
> 
> 时间：2012-10-11T10:06:05.147
> 
> 标签：javascript, html

我有一个动态添加行的表，这些行需要具有不同的属性以供动态使用、提交等。如何在没有固定的情况下传递它们的属性`name`，`id`或者`class`？

动态创建的元素：

```
<input type="text" name="input1" id="input1" class="input1" onkeyup="foo(this.name, this.value);"/> 
```

JavaScript 函数：

```
foo(this.name, this.value){
    //data handler
}; 
```

我不能依赖函数的静态属性，它们必须在元素创建后传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:11:37.633

你试过使用**foo(this)**吗？

在函数中，获取属性。

```
function foo(node) {
    node.property;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:15:24.623

您可以在创建对象后使用以下命令添加事件侦听器：

```
your_new_object.addEventListener('keyup',foo,false); 
```

# javascript - Javascript：如何从表中的所有选定复选框中获取值

> ID：12837088
> 
> 赞同：2
> 
> 时间：2012-10-11T10:06:12.333
> 
> 标签：javascript, jquery, html

我已经搜索了很多线程，但我没有看到任何涉及表格的复选框，我只是想让用户轻松删除，比如说，我有一个包含 50 个条目的表格，我想一次性删除 10 个，所以我选中每条记录旁边的复选框，所以当我想删除它时，它只会获取复选框的值，将其传递给 php 脚本。

我的问题是我如何在 Javascript 或 jQuery 上实现这个？从 n 个复选框中获取值？因为表具有动态值，具体取决于它在数据库中的数量。

这是要清楚的图像：

![在此处输入图像描述](../Images/71e6d6d83a3911166f72748d66dba616.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T10:12:38.490

`value`这将为您提供一个包含每个复选框属性的数组：

```
var values = $('input:checked').map(function() {
    return this.value;
}).get(); 
```

见[http://jsfiddle.net/p58Hw/1/](http://jsfiddle.net/p58Hw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:09:51.487

选择您的表格，[找到](http://api.jquery.com/find/)所有[选中复选框](http://api.jquery.com/checked-selector/)的行，存储它们的值，然后删除它们：

```
var $chkboxes = $(yourTable).find("tr input[type='checkbox']:checked");
var checkBoxVals = $chkboxes.map(function(){ return $(this).val(); }).toArray();

$chkboxes.closest('tr').remove();

// serialize array checkBoxVals and pass it to your php script 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:09:05.683

你会发布你的代码。但是尝试这样的事情：

```
$('.YourCheckboxClass:checked').each(function() {
    // your code here
}); 
```

# c++ - 在 Windows 中使用互斥锁进行进程间同步（win32 或 C++）

> ID：12837095
> 
> 赞同：3
> 
> 时间：2012-10-11T10:06:28.250
> 
> 标签：c++, windows, multithreading, synchronization

我想在 2 个进程之间建立线程同步。基本上一个线程在 App1.exe 中运行，第二个进程在 App2.exe 中运行。我如何在 Windows 中同步这两个线程。有人可以分享一些例子或链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T10:10:22.177

可能性：

*   WINAPI Mutex 是一种进程间同步机制。有关概述，请参阅[使用互斥对象。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927%28v=vs.85%29.aspx)
*   [`boost::mutex`](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.mutexes). 喜欢这个的一个原因是提供的`scoped_lock`功能确保无论如何退出范围（异常或多个`return`语句）都会释放锁。

# git - 合并分支时git squash

> ID：12837097
> 
> 赞同：1
> 
> 时间：2012-10-11T10:06:45.507
> 
> 标签：git, git-merge

我想知道如果你在分支之间挤压并从它们之间的远程推/拉会发生什么。

```
DEVELOPER 1
1\. $ git checkout foo
2\. $ git commit -m 'changed file' file.txt
   $ git commit -m 'changed another file' file2.txt
3\. $ git push

DEVELOPER 2
4\. $ git checkout foo
5\. $ git pull    // gets commits from 2\. above
6\. $ git checkout bar
7\. $ git merge foo
8\. $ git rebase -i HEAD~3 
```

在 1 - 3 中——我对一些文件进行了一些本地更改，分别提交它们，然后推送。在 4 - 8 - 其他人拉出我的提交，签出另一个分支，合并第一个分支，然后尝试在合并中压缩提交。

这会破坏历史，是“坏”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:42:38.987

`git rebase -i HEAD~3`将在分支中重放提交（是否压缩），而*`bar`*分支引用的提交`foo`保持不变。

如果您的分支`bar`已经被推送（参见“ [git rebase develop branch](https://stackoverflow.com/questions/12834056/git-rebase-develop-branch/12834180#12834180) ”），那就不好了，因为您需要强制推送它并使其他开发人员`bar`陷入困境。

但它也很糟糕，因为它会复制提交内容（在`foo`分支的内容和被压扁的内容之间`bar`，使任何未来的合并从`foo`to*再次*`bar`应用提交 2 和 3。 这就是选项( ) 的位置rebase 可以派上用场，以保留合并的父级。但这可能与您想做的事情（壁球）不兼容。 *`-p``--preserve-merges`*

 *一般来说，尽量不要修改您刚刚提取的公共历史记录（例如分支上的提交 2 和 3 `foo`）*

# saml - OpenAM 整体理解和 SAML

> ID：12837099
> 
> 赞同：0
> 
> 时间：2012-10-11T10:06:48.060
> 
> 标签：saml, saml-2.0, openam

我正在使用 OpenAM 使用 SAML 实施 SSO 解决方案。我是这些技术的初学者，我需要一些说明。

## 我的进步

目前，我已经安装了一个托管 OpenAM 作为 IdP 的 Tomcat。另一个 Tomcat 适合作为我的 SP。WebAgent 已安装在其上。在尝试访问 SP 的受保护部分时，我被重定向到 IdP 日志记录页面。输入凭据后，我最终被重定向到资源。这似乎运作良好。

## 我的问题

*   我的架构*只是*基于一个简单的 SSO，不是吗？

*   如何激活 SAMLv2 ？

*   是否必须在信任圈内的所有服务器上安装 OpenAM 才能允许 SAML？我的意思是，在 IdP 上看起来很自然，但是我需要在 SP 上放置和配置 opensso.war 吗？

*   选择的场景是 IdP 发起的 SSO。如果客户端到达 IdP Authenticate WS，它会有 SAML 断言吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:16:00.703

*   使用代理时，您实际上依赖的是更专有的 SSO，而不是 SAML。准确地说：包装在 SAML 1.1 中的 Liberty ID-FF 消息
*   Web 代理永远不会使用 SAMLv2 进行通信，因此您将需要某种 SAML SP 实现（Java fedlet/.NET fedlet/SimpleSAMLPHP/Shibboleth SP/等）。要启用 SAMLv2 联合，您也可以遵循文档（[http://docs.forgerock.org/en/openam/10.0.0/admin-guide/index.html#chap-federation](http://docs.forgerock.org/en/openam/10.0.0/admin-guide/index.html#chap-federation)）
*   如果 Authenticate WS 表示 /openam/identity/authenticate REST/JAX-WS 端点，那么答案是否定的，但如果您在 IdP 上正确启动 SAMLv2 登录（通过使用 idpssoinit 端点），那么断言将呈现给SP，SP 实现可以执行必要的验证并从断言中提取实际数据。

# php - PHP cURL 发布和发送 url 问题

> ID：12837100
> 
> 赞同：1
> 
> 时间：2012-10-11T10:06:47.793
> 
> 标签：php, redirect, post, curl, payment-gateway

当我尝试从自己的脚本请求时遇到问题，例如。当我将数据发布到喜欢`<form>`输入时，testscript.php 到 3parts 域

我的代码看起来像这样

```
$urltopost = 'https://secure.quickpay.dk/form/';

$opts = array( 
  CURLOPT_POST => true,
  CURLOPT_POSTFIELDS => $post_string,
  CURLOPT_NOBODY => true,
  CURLOPT_HEADER => false,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_AUTOREFERER => true
);

$curl_connection = curl_init($urltopost); 
curl_setopt_array($curl_connection, $opts ); 
$output = (string) curl_exec($curl_connection); 
curl_close($curl_connection); 
```

我现在的问题是，当我尝试发帖时，它仍然留在我的页面 testscript.php 上，而不是发送给我`$urltopost`，我需要它，因为我使用支付网关并希望 PHP 来处理请求而不是HTML`<form>`输入

我的 curl_getinfo() 看起来像这样

```
Array ( 
    [url] => https://secure.quickpay.dk/form/ 
    [content_type] => text/html 
    [http_code] => 200 
    [header_size] => 357 
    [request_size] => 63 
    [filetime] => -1 
    [ssl_verify_result] => 0 
    [redirect_count] => 0 
    [total_time] => 0.259001 
    [namelookup_time] => 0.000702 
    [connect_time] => 0.02734 
    [pretransfer_time] => 0.134342 
    [size_upload] => 0 
    [size_download] => 0
    [speed_download] => 0 
    [speed_upload] => 0 
    [download_content_length] => -1 
    [upload_content_length] => 0 
    [starttransfer_time] => 0.258987 
    [redirect_time] => 0 
    [certinfo] => Array ( ) 
    [redirect_url] => 
) 
```

# iphone - 如何使用 CCVideoPlayer 类保留视频的最后一个视频帧？

> ID：12837101
> 
> 赞同：1
> 
> 时间：2012-10-11T10:06:48.667
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, ccvideoplayer

我在我的 iPhone/iPad 应用程序之一中使用 CCVideoPlayer 类以各种类型的手势播放视频。截至目前，当视频结束时，我将视频替换为视频最后一帧的 jpeg 图像。

无论如何使用它可以保留视频的最后一帧，这样我就不必每次都用 jpeg 替换？

# iphone - 当我转换为视网膜显示时，瓷砖地图的位置错误

> ID：12837104
> 
> 赞同：5
> 
> 时间：2012-10-11T10:06:57.927
> 
> 标签：iphone, ios, cocos2d-iphone

我通过将宽度和高度的大小更改为对象的两倍大小和位置来遵循将平铺地图转换为视网膜显示的指南。但正常显示的结果与视网膜显示的结果不同正常显示是正确的但视网膜显示不正确

这是非视网膜平铺图 ![在此处输入图像描述](../Images/bd4638c309efc71e40a3caffedd0a010.png)

这是视网膜平铺图 ![在此处输入图像描述](../Images/8bcc9944572ec4b32ec5f3a8e2cb03cb.png)

我还将 -hd 后缀添加到视网膜 .tmx 文件中

有什么不对？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T13:26:58.293

Me also observed same problem with cocos2D tile map and finally resolved by dividing CC_CONTENT_SCALE_FACTOR. In retina mode it gives 2.0.

```
CCTMXObjectGroup *objects = [tileMap objectGroupNamed:NN_TILE_MAP_OBJECT_LAYER];

CGSize s = [[CCDirector sharedDirector] winSize];

NSMutableDictionary *newtonPos = [objects objectNamed:NN_NEWTON_POS];        

if(newtonPos)
{
    float x = ([[newtonPos valueForKey:@"x"] floatValue])/CC_CONTENT_SCALE_FACTOR();
    float y = [[newtonPos valueForKey:@"y"] floatValue]/CC_CONTENT_SCALE_FACTOR();

    MyGameScreen *p = (MyGameScreen*)self.parentLayer;
    p.gameActor.position = ccp(x, y);
} 
```

//I used this function to get chord..

```
- (CGPoint)getTileCoordForPosition:(CGPoint)position
{
    int maxTileCol = self.mapSize.height; 

    int x = ( (position.x-self.position.x)/TILE_SIZE);
    int y = maxTileCol - ( ((position.y)-self.position.y)/TILE_SIZE);

    if( x >= TILE_IN_ROW)
        x = TILE_IN_ROW - 1;

    if( y >= TILE_IN_COL)
        y = TILE_IN_COL - 1;

    return ccp(x, y);

} 
```

# objective-c - 无法将添加按钮链接到表视图控制器 - Xcode

> ID：12837109
> 
> 赞同：0
> 
> 时间：2012-10-11T10:07:17.077
> 
> 标签：objective-c, ios4, xcode4, xcode4.3

我需要将添加按钮从表列表视图控制器链接到添加视图控制器，但无法创建链接，当我单击添加按钮时，它移动到另一个控件不能链接到 xocde

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:10:22.933

不是从按钮的图形表示中按住 ctrl 拖动，而是从控件列表中按住 ctrl 拖动。

例如，在下图中，您可以从“按钮 - 显示标签”按住 ctrl 并拖动到您的视图控制器上。

![在此处输入图像描述](../Images/b6d343186064a358e134d8f2c37c06c3.png)

# linux - 在 bash shell 中设置环境变量 PATH

> ID：12837112
> 
> 赞同：-2
> 
> 时间：2012-10-11T10:07:30.863
> 
> 标签：linux, bash, unix, environment-variables

与 QA 相比，PROD 中的 Environment PATH 大得多：

```
PATH=.:/home/imc:/home/imc/bin:$HOME:/usr/local/sbin:$PATH 
```

我们在 PROD 和 QA 中使用相同的设置环境文件，但我们仍然发现差异。

较长的路径意味着它在运行作业时会产生影响。那么知道如何改进PATH吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:12:49.097

确保 QA 和 PROD 在它们的 PATH 中使用相同的赋值语句`.bashrc` **并且不要引用`$PATH`**. 这样，您可以保证 PATH 是相同的，无论之前执行的其他启动文件`.bashrc`用于修改`PATH`. 例如

```
# Assign a short and sweet PATH.
PATH=$(/usr/bin/getconf PATH):$HOME/bin:/usr/local/sbin 
```

请注意，出于安全原因，放入`.`a`PATH`是一种嘘声。另一方面，目录的数量`PATH`很可能**不会**影响脚本的速度。Bash 保留实用程序位置的哈希值，并且查找持续时间与恒定时间相差不远。

# c# - 访问服务器标签内的资源文件

> ID：12837114
> 
> 赞同：0
> 
> 时间：2012-10-11T10:07:32.240
> 
> 标签：c#, asp.net, sharepoint-2010

嗨，当我尝试从服务器标签访问资源文件时，我被卡住了。

```
<WebPartPages:WebPartZone runat="server" Title ="<%= SPUtility.GetLocalizedString("$Resources:WebPartZoneTitle_Header", "TestResource", SPContext.Current.Web != null ? SPContext.Current.Web.Language : 1033) %>" ID="FullPage" FrameType="TitleBarOnly"> 
```

这会抛出一个异常，告诉服务器标签不能包含 <% ... %> 构造

无论如何我不能访问服务器标签内的资源文件。我也尝试过`<%$ Resources:WebResources, ReqLodgeName %>`这种格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:09:40.007

您可以在页面的代码隐藏中设置控件的 Title 属性。这不仅有效，而且更清洁。

# xslt - 查找具有特定元素的第一个 Preceding Sibling

> ID：12837116
> 
> 赞同：3
> 
> 时间：2012-10-11T10:07:37.220
> 
> 标签：xslt

给定以下 XML：

```
<Root>
  <NodeA>
    <ChildNodeA/>
    <ChildNodeB/>
  </NodeA>
  <NodeB>
    <ChildNodeB/>
  </NodeB>
  <NodeC>
  </NodeC>
</Root> 
```

如何找到包含特定元素的特定节点的第一个 Preceding Siblilng。

IE 如果我在“NodeC”，我如何找到第一个带有“ChildNodeA”的兄弟姐妹，在这种情况下是“NodeA”？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:24:30.743

找到包含子元素的第一个前面的兄弟非常简单，并且确实与您描述它的方式非常匹配......

```
<xsl:apply-templates select="preceding-sibling::*[ChildNodeA][1]" /> 
```

假设您位于**NodeC**上，这确实会在您的情况下返回您的**NodeA**

```
<NodeA>
  <ChildNodeA></ChildNodeA>
  <ChildNodeB></ChildNodeB>
</NodeA> 
```

# jquery - ajax jquery中的解析器错误调用Web服务

> ID：12837117
> 
> 赞同：0
> 
> 时间：2012-10-11T10:07:39.693
> 
> 标签：jquery, asp.net

我写了一个如下的网络服务：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, XmlSerializeString = false, UseHttpGet = true)]
public string GetNews(int tes)
{
    return tes.ToString();
} 
```

我想在客户端使用这个功能，所以我写了这行：

```
$.ajax({
                dataType: "jsonp",
                success: function (d) {
                    $('.widget.yellow').html(d.d);
                },
                error: function (xhr, textStatus, errorThrown) {
                    $('.widget.yellow').html(textStatus);
                },
                data: { tes: '170' },
                url: "http://localhost:1122/Services/MyService.asmx/GetNews?format=json"
            }); 
```

但我得到错误。textStatus 是“parsererror”，xhr.statusText 是“success”，xhr.status 是“200”，xhr.readyState 是“4”。我需要一些帮助。

# css - 具有 100% 宽度 div 的错误 - 不会一直延伸

> ID：12837121
> 
> 赞同：1
> 
> 时间：2012-10-11T10:07:56.177
> 
> 标签：css, html

这是我运行的代码：

[http://jsfiddle.net/HMsKa/60/](http://jsfiddle.net/HMsKa/60/)

这是相当简单的代码，但是当您将预览窗口缩小并向右滚动时，您可以看到错误。页眉和页脚栏（橙色和蓝色）不会一直延伸。

我已经尝试了一些东西并且无法修复它。有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:11:52.980

***[现场演示](http://jsfiddle.net/rohitazad/HMsKa/61/)***

嗨，现在在您`min-width`的页面正文中定义

**像这样**

将此添加`css`到您的`stylesheet`并查看演示

......

```
body{
min-width:900px;
} 
```

**[现场演示](http://jsfiddle.net/rohitazad/HMsKa/61/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:11:07.987

> 页眉和页脚栏（橙色和蓝色）不会一直延伸。

这是由于`width`您分配了不同的声明：对于`header`您拥有的`width: 100%;`（计算为当前可见视口的宽度）和对于`#main`您拥有的元素`width: 900px;`（页脚没有分配宽度，但作为块元素，其宽度为 100%默认）

只需根据您想要获得的布局使用相同的宽度（100% 或 900px）

# java - 在java中有-A关系

> ID：12837125
> 
> 赞同：0
> 
> 时间：2012-10-11T10:08:03.593
> 
> 标签：java

```
public class Horse extends Animal {
    private Halter myHalter = new Halter();
    public void tie(LeadRope rope) {
        myHalter.tie(rope); // Delegate tie behavior to the
      // Halter object
    }
}

public class Halter {
    public void tie(LeadRope aRope) {
    // Do the actual tie work here
}
} 
```

在这个例子中，Horse has-a Halter.Can we call **myHalter.tie(rope);** 像这样：

```
public class Horse extends Animal {
    private Halter myHalter = new Halter();

        myHalter.tie(rope); // Without using the public void tie method

} 
```

它给出了一个错误。我对此的解释是它不是 main() 方法，但任何人都可以用更好的方式解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:11:21.013

类主体中变量/字段声明以外的语句必须放入**方法主体**、**构造函数**或**初始化块**中。例如，如果您尝试编译此代码，则可以：

```
public class Horse {

    private Halter myHalter = new Halter();

    {
       myHalter.tie(new LeadRope());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:12:35.013

你不能在类块中调用方法，你必须创建一个方法，然后你可以在方法体中调用方法，或者你可以在静态、实例或构造函数块中调用方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:13:25.787

好吧试试这个....

**-** `Has-A relationship`被称为`Composition`。

```
public class Bathroom{

 Tub tub;

}

public class Tub{

} 
```

**-**我们可以说`Bathroom`有一个**类型的引用** `Tub`，这意味着`Bathroom`有一个类型的**实例变量**`tub`。

# c# - 针对特定异常的单元测试异步方法

> ID：12837128
> 
> 赞同：21
> 
> 时间：2012-10-11T10:08:15.937
> 
> 标签：c#, unit-testing, async-await

有没有人举例说明如何在 Windows 8 Metro 应用程序中对异步方法进行单元测试，以确保它抛出所需的异常？

给定一个具有异步方法的类

```
public static class AsyncMathsStatic
{
    private const int DELAY = 500;

    public static async Task<int> Divide(int A, int B)
    {
        await Task.Delay(DELAY);
        if (B == 0)
            throw new DivideByZeroException();
        else
            return A / B;
    }
} 
```

我想使用新的 Async.ExpectsException 构造编写一个测试方法。我试过了 ：-

```
[TestMethod]
public void DivideTest1()
{
    Assert.ThrowsException<DivideByZeroException>(async () => { int Result = await AsyncMathsStatic.Divide(4, 0); });
} 
```

但是当然测试不会等待异步方法完成，因此会导致测试失败，即没有引发异常。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-11T10:40:23.913

您可以将`async Task`单元测试与常规一起使用[`ExpectedExceptionAttribute`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.expectedexceptionattribute.aspx)：

```
[TestMethod]
[ExpectedException(typeof(DivideByZeroException))]
public async Task DivideTest1()
{
  int Result = await AsyncMathsStatic.Divide(4, 0);
} 
```

**评论更新：** `ExpectedExceptionAttribute`在 Win8 单元测试项目[上已被替换](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/18/visual-studio-2012-rc-what-s-new-in-unit-testing.aspx)为`Assert.ThrowsException`，这是很好的无证 AFAICT。这是[一个很好的设计方面的改变](http://daniel.wertheim.se/2011/07/20/why-the-expectedexceptionattribute-sucks/)，但我不知道为什么*它只*支持 Win8。

好吧，假设没有`async`-compatible （由于缺少文档，`Assert.ThrowsException`我无法判断是否有*） ，您可以自己构建一个：*

```
public static class AssertEx
{
  public async Task ThrowsExceptionAsync<TException>(Func<Task> code)
  {
    try
    {
      await code();
    }
    catch (Exception ex)
    {
      if (ex.GetType() == typeof(TException))
        return;
      throw new AssertFailedException("Incorrect type; expected ... got ...", ex);
    }

    throw new AssertFailedException("Did not see expected exception ...");
  }
} 
```

然后这样使用它：

```
[TestMethod]
public async Task DivideTest1()
{
  await AssertEx.ThrowsException<DivideByZeroException>(async () => { 
      int Result = await AsyncMathsStatic.Divide(4, 0);
  });
} 
```

请注意，我在这里的示例只是对异常类型进行精确检查；您可能更喜欢允许后代类型。

**2012-11-29 更新：**打开了[UserVoice 建议](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3401331-add-an-async-compatible-assert-throwsexception)以将其添加到 Visual Studio。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-08T12:07:39.520

```
[TestMethod]
public void DivideTest1()
{
    Func<Task> action = async () => { int Result = await AsyncMathsStatic.Divide(4, 0); });
    action.ShouldThrow<DivideByZeroException>();
} 
```

使用`.ShouldThrow()`FluentAssertions nuget 包对我有用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-21T09:54:31.877

通过添加[`ThrowsExceptionAsync`method](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.testtools.unittesting.assert.throwsexceptionasync?view=mstest-net-1.2.0)，现在可以在本机覆盖，而无需 MSTest 中的第三方或扩展方法：

```
await Assert.ThrowsExceptionAsync<Exception>(() => { Fail(); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T06:40:25.283

几天前我遇到了一个类似的问题，最终创建了类似于斯蒂芬上面的答案的东西。它可以作为[Gist](https://gist.github.com/3897481)使用。希望它对您有所帮助 - github gist 有完整的代码和示例用法。

```
/// <summary>
/// Async Asserts use with Microsoft.VisualStudio.TestPlatform.UnitTestFramework
/// </summary>
public static class AsyncAsserts
{
    /// <summary>
    /// Verifies that an exception of type <typeparamref name="T"/> is thrown when async<paramref name="func"/> is executed.
    /// The assertion fails if no exception is thrown
    /// </summary>
    /// <typeparam name="T">The generic exception which is expected to be thrown</typeparam>
    /// <param name="func">The async Func which is expected to throw an exception</param>
    /// <returns>The task object representing the asynchronous operation.</returns>
    public static async Task<T> ThrowsException<T>(Func<Task> func) where T : Exception
    {
        return await ThrowsException<T>(func, null);
    }

    /// <summary>
    /// Verifies that an exception of type <typeparamref name="T"/> is thrown when async<paramref name="func"/> is executed.
    /// The assertion fails if no exception is thrown
    /// </summary>
    /// <typeparam name="T">The generic exception which is expected to be thrown</typeparam>
    /// <param name="func">The async Func which is expected to throw an exception</param>
    /// <param name="message">A message to display if the assertion fails. This message can be seen in the unit test results.</param>
    /// <returns>The task object representing the asynchronous operation.</returns>
    public static async Task<T> ThrowsException<T>(Func<Task> func, string message) where T : Exception
    {
        if (func == null)
        {
            throw new ArgumentNullException("func");
        }

        string failureMessage;
        try
        {
            await func();
        }
        catch (Exception exception)
        {
            if (!typeof(T).Equals(exception.GetType()))
            {
                // "Threw exception {2}, but exception {1} was expected. {0}\nException Message: {3}\nStack Trace: {4}"
                failureMessage = string.Format(
                    CultureInfo.CurrentCulture,
                    FrameworkMessages.WrongExceptionThrown,
                    message ?? string.Empty,
                    typeof(T),
                    exception.GetType().Name,
                    exception.Message,
                    exception.StackTrace);

                Fail(failureMessage);
            }
            else
            {
                return (T)exception;
            }
        }

        // "No exception thrown. {1} exception was expected. {0}"
        failureMessage = string.Format(
                    CultureInfo.CurrentCulture,
                    FrameworkMessages.NoExceptionThrown,
                    message ?? string.Empty,
                    typeof(T));

        Fail(failureMessage);
        return default(T);
    }

    private static void Fail(string message, [CallerMemberName] string assertionName = null)
    {
        string failureMessage = string.Format(
            CultureInfo.CurrentCulture,
            FrameworkMessages.AssertionFailed,
            assertionName,
            message);

        throw new AssertFailedException(failureMessage);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-21T16:36:18.080

这是一个老问题，但我现在偶然发现了这个问题，并决定对这个问题给出更新的答案。

Xuint 现在支持使用[`Assert.ThrowsAsync`](https://docs.nunit.org/articles/nunit/writing-tests/assertions/classic-assertions/Assert.ThrowsAsync.html)方法进行异步异常测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-08T23:24:01.603

[Visual Studio 2012 Update 2 中添加了对在](http://blogs.msdn.com/b/visualstudioalm/archive/2013/02/02/improvements-in-windows-store-unit-tests-test-exceptions-in-async-lamba-expressions-run-tests-on-the-ui-thread.aspx)`ThrowsException`方法中使用异步 lambda 的支持，但仅适用于 Windows Store 测试项目。

一个问题是您需要使用`Microsoft.VisualStudio.TestPlatform.UnitTestFramework.AppContainer.Assert`类来调用`ThrowsException`.

因此，要使用新的 ThrowsException 方法，您可以执行以下操作：

```
using AsyncAssert = Microsoft.VisualStudio.TestPlatform.UnitTestFramework.AppContainer.Assert;

[TestMethod]
public void DivideTest1()
{
    AsyncAssert.ThrowsException<DivideByZeroException>(async () => { 
        int Result = await AsyncMathsStatic.Divide(4, 0); });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-09T18:03:24.043

这对我有用

```
 public async Task TestMachineAuthBadJson() {
        // Arrange

        // act
        DocsException ex = await Assert.ThrowsExceptionAsync<DocsException>(() => MachineAuth.GetToken());
        //assert
        StringAssert.Contains(ex.Message, "DOCS-API error: ");

        } 
```

# string - string := const : 为什么本地和结果的实现不同？

> ID：12837129
> 
> 赞同：9
> 
> 时间：2012-10-11T10:08:16.363
> 
> 标签：string, delphi, delphi-xe2, refcounting

在 Delphi 函数中，结果经常被实现为 var 参数（尽管有 QC 票，但不是超出参数）。

字符串常量基本上是具有负 refcounter 的变量，应该抑制自动内存 [de] 分配。[http://docwiki.embarcadero.com/RADStudio/XE3/en/Internal_Data_Formats#Long_String_Types](http://docwiki.embarcadero.com/RADStudio/XE3/en/Internal_Data_Formats#Long_String_Types)

它确实抑制了它：下面的代码不会泄漏。

```
type
  TDealRecord = record
    id_Type: Integer;
    Price: extended;
    Remark: String;
  end;
const const_loop = 100000000;

function TestVar: TDealRecord;
//procedure TestVar;
var
  Li: Integer;
  LRec: TDealRecord;
begin
  for Li := 1 to const_loop do begin
     FillChar(Lrec,SizeOf(LRec), 0);
     LRec.Remark := 'Test';

//     FillChar(Result,SizeOf(Result), 0);
//     Result.Remark := 'Test';
  end;
end; 
```

但是改变操纵变量 - 它立即开始大量泄漏。

```
function TestVar: TDealRecord;
//procedure TestVar;
var
  Li: Integer;
  LRec: TDealRecord;
begin
  for Li := 1 to const_loop do begin
//     FillChar(Lrec,SizeOf(LRec), 0);
//     LRec.Remark := 'Test';

     FillChar(Result,SizeOf(Result), 0);
     Result.Remark := 'Test';
  end;
end; 
```

事实证明，它`string := const`是通过不同的调用实现的，具体取决于 LValue：

1.  结果：AnsiString -> LStrAsg
2.  结果：UnicodeString：-> UStrAsg
3.  本地变量：UnicodeString：-> UStrLAsg
4.  本地变量：AnsiString：-> LStrLAsg

虽然后两者按预期克隆指针，但前两者正在将字符串复制到新实例，就像我添加`UniqueString`对它们的调用一样。

为什么会有这种差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T11:56:19.927

*在 Delphi 中，常量字符串在分配给另一个全局*变量时总是被复制，而不是*局部*变量，以避免在某些边界情况下访问冲突。

使用来源，卢克！

*请参阅System.pas*中的此代码提取：

```
{ 99.03.11
  This function is used when assigning to global variables.

  Literals are copied to prevent a situation where a dynamically
  allocated DLL or package assigns a literal to a variable and then
  is unloaded -- thereby causing the string memory (in the code
  segment of the DLL) to be removed -- and therefore leaving the
  global variable pointing to invalid memory.
}
procedure _LStrAsg(var dest; const source);
var
  S, D: Pointer;
  P: PStrRec;
  Temp: Longint;
begin
  S := Pointer(source);
  if S <> nil then
  begin
    P := PStrRec(Integer(S) - sizeof(StrRec));
    if P.refCnt < 0 then   // make copy of string literal
    begin
      Temp := P.length;
      S := _NewAnsiString(Temp);
      Move(Pointer(source)^, S^, Temp);
      P := PStrRec(Integer(S) - sizeof(StrRec));
    end;
    InterlockedIncrement(P.refCnt);
  end;
.... 
```

所以简而言之，为了避免在卸载 DLL 或包并且确实包含一些发送回主进程的常量值时发生访问冲突，总是制作本地副本。

你有两个功能：

*   `LStrAsg`或者`UStrAsg`当字符串有机会成为常量时由编译器生成 - 这是上面的代码；
*   `LStrLAsg`或`UStrLAsg`（添加`L`代表“本地”），当源字符串为本地时由编译器生成，因此没有常量：在这种情况下，`P.refCnt < 0`不会检查，因此它会比上层代码更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:21:44.577

在与*David Heffernan*讨论之后，我开始认为 Delphi 编译器只是不知道它分配给变量的值是什么。有一种“类型擦除”的地方。它无法从本地堆栈变量和本地字符串表达式中分辨出全局常量。它无法判断函数退出发生后源是否存在。虽然我们知道这是字符串文字或全局常量或任何与函数执行无关的生命周期 - 编译器只是丢失了该信息。相反，它起到防御作用，总是克隆价值——只是为了它不再存在的机会。我不确定，但这看起来很合理。虽然这个粗略的不分青红皂白的代码生成规则的后果是德尔福的另一个*问题*:-(

# windows - STATUS_STACK_BUFFER_OVERRUN 和 STATUS_STACK_OVERFLOW 有什么区别？

> ID：12837134
> 
> 赞同：7
> 
> 时间：2012-10-11T10:08:32.403
> 
> 标签：windows, stack-overflow, buffer-overflow, buffer-overrun

我刚刚发现有一个 STATUS_STACK_BUFFER_OVERRUN 和一个 STATUS_STACK_OVERFLOW。这2个有什么区别？我刚刚发现[堆栈溢出（堆栈耗尽）与堆栈缓冲区溢出不同](http://blogs.technet.com/b/srd/archive/2009/01/28/stack-overflow-stack-exhaustion-not-the-same-as-stack-buffer-overflow.aspx)，但要么没有解释，要么我不明白。你能帮我吗？

问候托拜厄斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T10:15:38.373

考虑以下在内存中向下增长的堆栈：

```
+----------------+
| some data      |   |
+----------------+   | growth of stack
| 20-byte string |   V
+----------------+
 limit of stack 
```

当您将 30 个字节写入 20 字节字符串时，会发生缓冲区溢出。这会破坏堆栈中的条目（“某些数据”）。

堆栈溢出是当您尝试在堆栈已满时将其他内容推入堆栈（此处显示“堆栈限制”）*。*堆栈的最大大小通常受到限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:23:06.983

`Stackoverflow`当内存中没有更多空间来分配数据时出现，并且当程序超出缓冲区边界并在内存的意外部分写入/覆盖数据（占用比预期更多的内存）时调用`buffer overrun`aka 。`buffer overflow`

**很容易，您只需阅读标签[stackoverflow](https://stackoverflow.com/tags/stackoverflow/info)和[buffer overflow](https://stackoverflow.com/tags/buffer-overflow/info)**的描述即可理解这一点。

# r - dynG raph 包出错

> ID：12837142
> 
> 赞同：0
> 
> 时间：2012-10-11T10:09:04.663
> 
> 标签：r

下面`acp`的 R 代码中的对象是`PCA()`调用的输出。您对错误的原因有任何想法吗？

```
> library(dynGraph)
Loading required package: rJava
> dynGraph(acp)
Error in .jinit(classpath = paste(dir, "dynGraph.jar", sep = "")) :
  Cannot create Java virtual machine (-4) 
```

**编辑：**下面是一个产生另一个错误的例子：

```
library(FactoMineR)
library(dynGraph)

D <- scan()
3 -2 -1
2 -1 -3
1 2 -3
-3 1 2
-2 0 3

D <- as.data.frame(matrix(D, byrow=TRUE, ncol=3))
names(D) <- c("x","y","z")
rownames(D) <- LETTERS[1:nrow(D)]

acp <- PCA(D,  
    scale.unit=FALSE,
    ncp=2, graph=FALSE)

dynGraph(acp)

> dynGraph(acp)
Error in .jcall(obj, , "addVal", annot[1, 1], tab) : 
  java.lang.AbstractMethodError: org.apache.xerces.dom.DeferredTextImpl.getTextContent()Ljava/lang/String; 
```

**编辑：**事实上 dynGraph 与前面的例子配合得很好，只需键入：

```
dynGraph(D) 
```

所以我怀疑错误是由于不良做法造成的？

**编辑：**下面是 sessionInfo() 输出：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] dynGraph_1.05        rJava_0.9-3          FactoMineR_1.20      scatterplot3d_0.3-33 cluster_1.14.2      
[6] lattice_0.20-10      ellipse_0.3-7       

loaded via a namespace (and not attached):
[1] grid_2.15.1  tools_2.15.1 
```

# android - 以编程方式将 TextViews 添加到 XML 布局

> ID：12837146
> 
> 赞同：3
> 
> 时间：2012-10-11T10:09:37.790
> 
> 标签：android, layout, textview

这是一个`XML LinearLayout linlayout.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mylinear"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">
</LinearLayout> 
```

我想以`TextViews`编程方式添加到此布局中，因为`TextViews`有时要添加的数量可能不同。

这是活动代码：

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.linlayout);

    LinearLayout linear=(LinearLayout) findViewById(R.layout.mylinear);
    TextView [] txt =new TextView[3];

    for(int i=0;i<txt.length;i++)
    {
        txt[i]=new TextView(this);
        txt[i].setText("text "+i);
        txt[i].setLayoutParams(new
         LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        linear.addView(txt[i]);
    }
} 
```

`LogCat`不显示错误，但在`TextViews`我运行应用程序时不显示。

我试着把这条线：

```
setContentView(R.layout.linlayout); 
```

最后，在 , 之后`for`，但不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:23:08.267

用这个 ：

```
TextView [] txt = new TextView[3];

for (int i=0; i<txt.length; i++) {
    txt[i] = new TextView(YourActivity.this);
    txt[i].setText("text " + i);
    txt[i].setLayoutParams(newLayoutParams
    (LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    linear.addView(txt[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:28:01.417

最好使用 ListView。顺便说一句，您是否将布局的方向更改为垂直方向？但是，如果您有必要，我建议这样做：我想您有一个具有一定大小的元素。

```
final int size = 3; // replace with the size of your element
LinearLayout linear = (LinearLayout) findViewById(R.layout.mylinear);

for(int i=0;i<size;i++){
    final TextView textView = new TextView(this);
    textView.setText("text "+i);
    textView.setLayoutParams(new LayoutParams(
    LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT));

    linear.addView(textView);
} 
```

# ruby-on-rails - Redirect_to 更新下拉值

> ID：12837151
> 
> 赞同：0
> 
> 时间：2012-10-11T10:09:46.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我创建了一个带有一些下拉值的简单表单，您还可以通过在不同页面上创建一个新值来向该下拉列表添加一个新值。完成后，此页面使用 redirect_to 方法返回到上一页。

```
if @sweet_type.save
    format.html { redirect_to session[:return_to], notice: 'Sweet type was successfully created.' } 
```

这一切都很好，但我想知道重定向完成后是否可以在下拉框中突出显示新创建的记录？

任何关于此的提示或提示都非常受欢迎。

谢谢

编辑：添加图像以进行更多说明。

单击此处添加甜味类型

[http://i.imgur.com/8W3Go.png](http://i.imgur.com/8W3Go.png)

在此处添加新类型

[http://i.imgur.com/Nbl7t.png](http://i.imgur.com/Nbl7t.png)

然后返回上一个屏幕，新创建的项目为“默认”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:10:49.277

您可以使用以下方法将新创建的 sweet 类型的 id 作为参数传递给下一个请求：

`format.html { redirect_to session[:return_to](:sweet_type_id: @sweet_type.id), notice: 'Sweet type was successfully created.' }`

然后在您呈现选择列表的视图中，您可以选择这个特定的甜味类型（在 params[:sweet_type_id] 中）作为默认值。请注意，这可能因您创建选择列表的方式而异。我给你看一个例子。实际上，您需要在选择列表中设置该选项的 selected 属性，使用您当前使用的任何助手（查看您正在使用的助手的 API 文档）。

`<%= f.select :sweet_type_id, @sweet_types, :selected => params[:sweet_type_id] %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:22:50.870

`@sweet_type.id`当重定向为查询字符串时，您可以传递新创建的对象 ( ) 的 ID 。然后在您被重定向到的页面中，您可以使用 javascript/jQuery 突出显示它。请查看 helper 方法的[文档](http://apidock.com/rails/ActionController/Redirecting/redirect_to)以`redirect_to`了解将查询字符串添加到 URL 的选项。

突出显示可能就像闪烁整个`select`标签或在其周围放置边框或任何您想要的。

# dynamics-crm-4 - CRM4插件注册工具有预编译版本吗？

> ID：12837155
> 
> 赞同：0
> 
> 时间：2012-10-11T10:10:00.317
> 
> 标签：dynamics-crm-4

问题说明了一切。客户需要注册一个DLL，没有Visual Studio所以无法编译插件工具。我没有 CRM4 系统来链接源代码，所以我也无法编译它。

我只需要已经编译好的插件工具，允许客户安装插件 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:45:17.823

msdn 存档站点上有一个预编译版本

[http://archive.msdn.microsoft.com/crmplugin/Release/ProjectReleases.aspx?ReleaseId=2010](http://archive.msdn.microsoft.com/crmplugin/Release/ProjectReleases.aspx?ReleaseId=2010)

# php - 如何在 Magento 的时事通讯/订阅电子邮件中包含优惠券代码？

> ID：12837163
> 
> 赞同：2
> 
> 时间：2012-10-11T10:10:28.930
> 
> 标签：php, magento, magento-1.5, magento-1.6, magento-1.7

我创建了一个购物车规则“整个购物车的固定金额折扣”，并且我想在发送给客户的订阅/通讯电子邮件中包含优惠券代码。有什么建议么？

我可以找到创建交易电子邮件模板和添加自定义变量的选项。但是如何在其中添加优惠券代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:47:19.353

去`\app\code\core\Mage\Newsletter\controllers\SubscriberController.php`。

```
public function newAction() 
```

编辑电子邮件操作并使用此链接以编程方式生成新的优惠券代码

[http://www.magentocommerce.com/boards/viewthread/178767/](http://www.magentocommerce.com/boards/viewthread/178767/)

这不是最简单的方法，但应该可以。

# mysql - mysql触发到不同的主机

> ID：12837165
> 
> 赞同：1
> 
> 时间：2012-10-11T10:10:39.760
> 
> 标签：mysql, triggers

我可以对同一台服务器和同一台主机使用 mysql 触发器。我可以触发到不同的主机吗？有没有其他方法可以做到这一点。

```
Localhost -> 10.1.2.220 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:21:02.703

我自己没有尝试过，但是看看 MySQL 的 FEDERATED 存储引擎[http://dev.mysql.com/doc/refman/5.6/en/federated-storage-engine.html](http://dev.mysql.com/doc/refman/5.6/en/federated-storage-engine.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:00:23.337

MySQL 触发器可以在同一个托管站点上使用。触发器的定义器可以根据需要进行更改，但很难使用远程主机进行处理。

使用 PHP SOAP 客户端和服务器适合防止您的问题。

# c# - CSV 文件中的新行

> ID：12837169
> 
> 赞同：3
> 
> 时间：2012-10-11T10:10:47.970
> 
> 标签：c#, csv

在下面的代码中，我想在每个循环循环的 CSV 文件的新行中获取 Test1 值。我怎么能这样做-

```
for (int j = 0; j < 10000; j++)
{ 
             if (NPVAmount > 0)  // Positive amount 
            {
                Positivetemp = NPVAmount + Positivetemp;
                Temp = Convert.ToString(Positivetemp)+ ","+ j +","+ UniqueCurrencyHolder+",";
                Test1 =Test1 + Temp;

             }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T10:14:54.023

采用`Environment.NewLine`

```
Test1 =Test1 + Environment.NewLine; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:15:37.917

声明一个字符串列表

```
List<string> csvLines = new List<string>(); 
```

然后在循环中添加`Test1`到 csvLines。

```
csvLines.Add(Test1); 
```

然后在循环完成后将所有 Test1 写入文件。

```
File.WriteAllLines("Path", csvLines); 
```

这应该实现你想要的，我认为你所给予的。

# asp.net - 是否有用于 json 渲染的模板语言？

> ID：12837170
> 
> 赞同：1
> 
> 时间：2012-10-11T10:10:50.877
> 
> 标签：asp.net, json, template-engine

由于 xslt 用于 xml，是否有 C#、asp .net 支持的用于 json 渲染（服务器端）的模板语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T20:01:30.507

你可能会使用小胡子。

*   [http://mustache.github.io/mustache.5.html](http://mustache.github.io/mustache.5.html) - 文档
*   [https://github.com/jdiamond/Nustache](https://github.com/jdiamond/Nustache) - 项目链接

# javascript - Raphael.js 属性和 VML

> ID：12837173
> 
> 赞同：0
> 
> 时间：2012-10-11T10:10:59.550
> 
> 标签：javascript, attributes, svg, raphael, vml

使用 Raphael，我想创建一个具有 Id 属性的矩形，如下例所示。

```
<rect id="aRect" x="10" y="10" width="50" height="50" r="2" rx="2" ry="2"/> 
```

要创建矩形，我可以使用这样的代码

```
var elem = _paper.rect(10, 10, 50, 50, 2); 
```

并使用这样的代码设置 ID

```
elem[0].setAttributeNS(null, 'id', 'aRect'); 
```

或使用这样的代码

```
elem.node.id = 'aRect'; 
```

现在 raphael 在较旧的 IE 上回退到 vml 我如何添加一个也适用于 vml 情况的 id 属性，或者这段代码也适用于此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:50:51.123

在阅读了[此处](http://msdn.microsoft.com/en-us/library/bb263852%28v=vs.85%29.aspx)的 MS 页面后，我实施了此解决方案来设置 ID。

```
function setId(el, id){
    if(el === null || typeof el !== 'object') return;
    if(Raphael.type === 'SVG') {
        el[0].setAttributeNS(null, 'id', id);
    }
    else if(Raphael.type === 'VML') {
        el[0].id = id;
    }
} 
```

# c# - WPF WebBrowser 告诉用户何时通过单击按钮进行导航

> ID：12837179
> 
> 赞同：1
> 
> 时间：2012-10-11T10:11:18.563
> 
> 标签：c#, wpf, webbrowser-control

我有一个指向不属于我的网站的 WebBrowser 控件。这是一个相当慢的服务器，我想在等待页面加载时显示等待光标（鼠标指针）。如果使用 Navigate() 方法实例化导航，则没有问题，Navigating 和 Load_Completed 事件会告诉我发生了什么。但是，如果用户通过单击按钮进行导航，则导航事件不会“触发”。是否有任何事件（或事件/属性的组合）可用于此目的？

# objective-c - UIScrollView 中每个按钮的特定标题

> ID：12837182
> 
> 赞同：1
> 
> 时间：2012-10-11T10:11:29.607
> 
> 标签：objective-c, ios, uiscrollview, uibutton

我有一个`UIWebView`页面`UIScrollView`，在我的内部`UIScrollView`我有`UIImage`和按钮我想为我的 xml 文件中的每个按钮设置特定的标题，你能给我一些实现这个的提示吗？

现在我可以从 xml 中获取名字，但它是为所有人设置的

我的带有按钮和图像的滚动视图：

```
const NSUInteger kNumImages = 5;

scrollView1.pagingEnabled = YES;

// load all the images 
NSUInteger i;
for (i = 1; i<= kNumImages; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"image%d.jpg", i];

    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.userInteractionEnabled = YES;

    CGRect rect = imageView.frame;
    rect.size.height = kScrollObjHeight;
    rect.size.width = kScrollObjWidth;
    imageView.frame = rect;
    imageView.tag = i;  
    [scrollView1 addSubview:imageView];

UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

    appDelegate = (testAppDelegate *)[[UIApplication sharedApplication] delegate];
    Presentation1Name *aSlide = [appDelegate.books objectAtIndex:0];
    NSLog(@" %@", aSlide.slideLabel );

    [btn setTitle:[NSString stringWithString:aSlide.slideLabel]  
forState:UIControlStateNormal];
     btn.frame = rect;
     [btn setTag:i];
    [btn addTarget:self action:@selector(buttonClick:)  
  forControlEvents:UIControlEventTouchUpInside];

    [imageView addSubview:btn];

}

[self layoutScrollImages]; 
```

}

为我正在使用代码的所有按钮添加标题

```
 [btn setTitle:[NSString stringWithString:aSlide.slideLabel]  
forState:UIControlStateNormal]; 
```

但是对于每个按钮，我想从 xml 文件中获得特定的标题

提前致谢！

这是我的xml文件：

```
 <Presentation label="presentation1">
<slides>
    <slide index="0" label="slide1" identifier="Slide1Name" />

    <slide index="1" label="something" identifier="Slide2Name" />

</slides>
 </Presentation> 
```

**编辑：**

当我添加 Presentation1Name *aSlide = [appDelegate.books objectAtIndex:0]; objectAtIndex to i 我会得到这个错误

当我添加 objectAtIndex：我进程终止*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'****-[NSPlaceholderString initWithString:]: nil argument' ** * First throw call stack: (0x1c95012 0x10d2e7e 0x1c94deb 0xae97f5 0xae9774 0x3d64 0x4723 0x10e6705 0x1d920 0x1d8b8 0xde671 0xdebcf 0xddd38 0x4d33f 0x4d552 0x2b3aa 0x1ccf8 0x1bf0df9 0x1bf0ad0 0x1c0abf5 0x1c0a962 0x1c3bbb6 0x1c3af44 0x1c3ae1b 0x1bef7e3 0x1bef668 0x1a65c 0x295d 0x2885 0x1) libc ++abi.dylib：终止调用抛出异常（lldb）*

 *这是因为

-[NSPlaceholderString initWithString:]: 无参数'

之后我更改 5 t0 2 因为我的 xml 文件中只有 2 个标签

```
const NSUInteger kNumImages= 2; 
```

并将 (i = 1; i<= kNumImages; i++) 更改为

```
for (i = 0; i> kNumImages; i++) 
```

但它仍然"无法正常工作

我的问题是我该怎么做

```
appDelegate.books count should be equal to kNumImages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:19:59.913

将所有按钮名称存储在**NSMutableArray**中，然后再使用它

例如像这样：

```
 NSMutableArray *arrNames = [NSMutableArray alloc]initWithObjects:@"Dog",@"Cat",......,nil]; //fill your array

 [btn setTitle:[arrNames objectAtIndex:i] forState:UIControlStateNormal]; 
```

第二种选择是在他的回答中使用@Andrey Chernukha justed

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:13:08.777

```
[btn setTitle:[NSString stringWithFormat:@"MyButton %d", i] forState:UIControlStateNormal]; 
```*

# javascript - 如何在 localStorage 中保存复选框状态

> ID：12837183
> 
> 赞同：1
> 
> 时间：2012-10-11T10:11:31.167
> 
> 标签：javascript, html, checkbox, save, local-storage

我正在为文档管理器设计一个网络应用程序，并且有一个“设置”页面，用户可以在其中看到一对复选框，其格式看起来像 iphone 切换按钮。它们可以正常工作，但是每当用户离开网站或刷新页面时，这些按钮的状态都会重置为默认值。有没有办法使用*localStorage*保存它们的状态，还是我需要使用*cookie*？**在 JavaScript 文件中编辑**（代码如下所示）有两个函数，一个称为*saveSettings*另一个称为*loadSettings*，但如果我必须在一个函数中完成所有操作，请告诉我。**END OF EDIT**任何帮助都将不胜感激。到目前为止我有；

```
localStorage.CheckboxName = $('#CheckboxName').val(); 
```

将复选框保存到*localStorage*和；

```
$('#CheckboxName').val(localStorage.CheckboxName); 
```

但它不会保存。难道我做错了什么？

**编辑**

这是两个复选框的 HTML 代码；

```
<li style = 'color: #FFFFFF;'>Notifications<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'notifications' id = 'notifications' /></span></li>
<li style = 'color: #FFFFFF;'>Preview<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'preview' id = 'preview' checked = "true" /></span></li> 
```

**编辑结束**

任何帮助都会很棒，在此先感谢 x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:15:14.313

我不确定，但我一直相信它是这样的：

```
window.localStorage.setItem('CheckboxName', $('#CheckboxName').val());

$('#CheckboxName').val(window.localStorage.getItem('CheckboxName')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:15:33.337

你可以试试以下

$("#CheckboxName").is(':checked')?'checked':'not' 并保存输出，似乎是这里的建议： [如何使用本地存储保留复选框状态以过滤项目](https://stackoverflow.com/questions/10096745/how-to-use-local-storage-to-retain-checkbox-states-for-filtering-items)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:32:32.520

要存储 Item 只需记住 store 只保存字符串。

例如。

```
var val = $('#CheckboxName').val();
window.localStorage.setItem(key, JSON.stringify(val)); 
```

因此，当您读回该值时，您需要反序列化该字符串。

```
var str = window.localStorage.getItem(key);
var obj = $.parseJSON(str); 
```

或者您可以在您的情况下更好地进行字符串比较，我会做的是将一个 id 值对的对象存储在一个存储键中并将它们全部反序列化以使用适当的对象

例如。

```
var val = {
    CheckboxName1: true,
    CheckboxName2: false,
    CheckboxName3: false, // ect....
};
window.localStorage.setItem(key, JSON.stringify(val)); 
```

# mongodb - 使用 MongoDB 创建聚合的用户统计信息

> ID：12837184
> 
> 赞同：0
> 
> 时间：2012-10-11T10:11:35.413
> 
> 标签：mongodb, mapreduce, database

我正在构建一个可以与 Android 应用程序一起使用的 MongoDB 数据库。我有一个用户集合和一个记录集合。记录文件包括 GPS 轨迹，例如开始和结束坐标、总时间以及最高速度和距离。用户文档具有用户 ID、名字、姓氏等。

我想为每个用户汇总总距离、总时间、总平均速度和迄今为止的最高速度。

如果我应该做一个 map reduce 并为用户创建一个聚合集合，或者我是否应该使用某种 cron 作业类型 soliuton 将这些统计信息添加到用户文档中，我感到很困惑。我已经阅读了许多关于 MongoDB 的 map reduce 和聚合的指南，但无法弄清楚这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:45:59.427

听起来您的聚合指标值是每个用户的，在这种情况下，我只需计算它们并将它们直接推送到用户对象中，同时更新当前坐标、速度等。它们会很好也很容易（并且快速）进行查询，如果您愿意，您可以进一步聚合它们。

当我说预计算时，我不是指 MapReduce，您可以将其用作批处理，我只是指在更新用户对象时进行计算。

如果您的聚合统计信息是*跨*用户编译的，那么您仍然可以在更新时预先计算它们，但是如果您还需要能够根据其他条件或过滤器查询这些聚合统计信息，例如，“告诉我总距离是多少为 x 区域内的所有用户旅行”，那么根据组合的数量，您可能无法通过预先计算覆盖所有用户。

因此，如果您的汇总统计信息是跨用户的，并且需要应用某种过滤器，那么它们将需要从一些数据快照中计算出来。这里的两种方法是；

1.  2.2 中的聚合框架
2.  MapReduce

你需要使用 MapReduce 说，如果你有*很多*历史数据要处理，你可以预先计算结果以便以后快速阅读。根据我的定义，该数据不会经常更改，但即使发生更改，您也可以使用增量 MR 将新结果添加到现有计算中。

2.2 中的聚合框架将允许您按需执行大量此操作，但它当然不会像预先计算的值那样快，但在按需执行时比 MR 快得多。它无法处理您可以使用 MR 处理的大量结果集，但它更适合您事先不知道参数值的查询。

例如，如果您想计算特定纬度/经度内用户统计信息的总和，则不能使用 MR，因为该过滤器的组合太多，因此您需要在飞。

但是，如果您希望按城市进行计算，那么您可以想象在那里使用 MR，因为您可以坚持有限的一组城市并预先计算所有城市。

但总而言之，如果您的聚合指标值仅针对每个用户，那么当我更新用户对象时，我将首先计算并将值存储在用户对象中，正如我在第一段中所说的那样。是的，您要存储值和输入，但这种模型可以让您不必即时计算。

# php - 从 mysql 转移到 ms-excel

> ID：12837186
> 
> 赞同：0
> 
> 时间：2012-10-11T10:11:41.643
> 
> 标签：php, mysql, excel

我正在尝试将我的数据从 mysql 传输到 ms-excel 它的工作，但我使用 php 获取重复值

```
<?php
        $form='';
    $link = odbc_connect ('Ayush', '', '');
if (!$link)
{
    die('Could not connect: ' . odbc_error());
}
    echo 'Connected successfully .<br>';
    //create query to select as data from your table
    $sql= "SELECT * FROM adel";
    $result =  odbc_exec($link,$sql);
    $sep = "\t"; //tabbed character 
    $fp = fopen('database.xls', "w"); 
    $schema_insert = ""; 
    $schema_insert_rows = ""; 
    for ($i = 1; $i < (odbc_num_fields($result))+1; $i++) 
    { 
    $schema_insert_rows.=odbc_field_name($result,$i) . "\t"; 
    } 
    $schema_insert_rows.="\n"; 
    echo $schema_insert_rows; 
    fwrite($fp, $schema_insert_rows); 
    //start while loop to get data 
    while($row = odbc_fetch_array($result)) 
    { 
        foreach($row as $value)
        {
        //set_time_limit(60); // 
        /*$schema_insert = ""; 
        for($j=1; $j<odbc_num_fields($result);$j++) 
        { 
        if(!isset($row[$j])) 
        $schema_insert .= "NULL".$sep;
        elseif  ($row[$j] != "") */
        $schema_insert.= strip_tags("$value").$sep; 

        $schema_insert .= "";
        } 

    //$schema_insert = str_replace($sep."$", "", $schema_insert); 

    //this corrects output in excel when table fields contain \n or \r 
    //these two characters are now replaced with a space 

    //$schema_insert = preg_replace("/\r\n|\n\r|\n|\r/", " ", $schema_insert); 
    $schema_insert .= "\n"; 
    //$schema_insert = (trim($schema_insert)); 
    //print $schema_insert .= "\n"; 
    print "\n";
    fwrite($fp, $schema_insert); 
    } 
    fclose($fp);
odbc_close($link);
?> 
```

输出如下 ![数据复制](../Images/1ed009912abf37737fd169c154e81f63.png)

我不想要任何重复的值谁能帮助我
真的很感激
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:15:09.560

您可以在查询中添加 DISTINCT 或 GROUP BY。例如 ：

```
SELECT DISTINCT FirstName,LastName FROM adel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:24:51.823

```
SELECT * FROM adel GROUP BY P_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:49:40.763

您没有在循环顶部重新初始化 $schema_insert 以获取记录，因此您的输出将是：

```
row1

row1 
row2

row1
row2
row3

row1
row2
row3
row4

row1
... 
```

尝试：

```
while($row = odbc_fetch_array($result)) 
{ 
   $schema_insert='';
   ... 
```

顺便说一句 '$schema_insert .= "";' 什么都不做。

# java - 为什么 JodaTime 的 DateTime 类有一个 minusMillis() 方法？

> ID：12837187
> 
> 赞同：3
> 
> 时间：2012-10-11T10:11:43.650
> 
> 标签：java, jodatime

只是想知道，很棒的 JodaTime 库中的 DateTime 类有一个

`minus(long millis)`

方法，它返回一个新的 DateTime 对象减去指定的毫秒数，那么为什么我需要

`minusMillis(int millis)`

方法，它的作用相同，但毫秒数为整数？ `Integer.MAX_VALUE`以毫秒为单位只​​有 24 天，这没什么帮助，大概它只是将 a 转换`int`为 a`long`并将其泵入另一种方法？

JodaTime 库写得非常好，我认为可能是我失踪的原因。

[http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#minusMillis(int](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#minusMillis(int) )

编辑：为了澄清，我想知道为什么我应该使用该`minusMillis(int)`方法 - 我了解更强大的`minus(long)`方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:18:42.617

我怀疑它是因为在 1.0 版中只有`minus(long duration)`方法，但在 1.1 版中`minusXxxx(int units)`添加了导致`minusMillis(int)`一致性添加，并且`minus(long)`没有为了向后兼容性而删除。

顺便说一句：我想，有一个`plus(long duration)`和一个`plusMillis(int millis)`相同的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T10:20:11.507

方法 minusMillis(int millis)，可以减去最大 Integer.Max 毫秒，当转换为天时 (2^31 -1) 大约是 24.8 天

因此，如果您想减去两个日期对象，例如 date1 -(no. of days) 其中 no.of days > 29，那么您不能使用 minusMillis(int millis) 来执行此操作，因此该方法

[日期时间减（长持续时间）](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#minus%28long%29)

提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:22:31.503

然后你查看源码`DateTime`你会发现这两种方法最终都会调用[`DateTime.withMillis(long newMillis)`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html#withMillis%28long%29). `DateTime.minus(long duration)`调用`DateTime.withDurationAdded(long durationToAdd, int scalar)`基本上什么都不做，只是将毫秒转换为`DateTime.withMillis(long newMillis)`.

所以我认为这`minus(long duration)`只是出于兼容性原因而存在。

# javascript - 在 Jquery Mobile 中为翻转框（日期框）使用自定义时间值

> ID：12837189
> 
> 赞同：1
> 
> 时间：2012-10-11T10:11:52.187
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-mobile

我正在为基于 JQuery Mobile 的移动网站使用 timeflipbox (datebox)。

这是一个屏幕截图：

![1](../Images/170547485820301fbf28f3d8e93ff1bd.png)

在分钟列中，我只想要值 00 15 30 和 45 而不是从 0 到 60 的所有数字。

你能帮我做这个定制吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:31:53.753

检查`Date Limiting Options`文档中的部分：

[http://dev.jtsage.com/jQM-DateBox/demos/fullopt.html](http://dev.jtsage.com/jQM-DateBox/demos/fullopt.html)

您需要设置`minuteStep: 15`选项。

# c# - 如何使 CloudConfigurationManager.GetSetting 不那么冗长？

> ID：12837191
> 
> 赞同：17
> 
> 时间：2012-10-11T10:11:53.923
> 
> 标签：c#, azure

我目前[`CloudConfigurationManager.GetSetting("setting")`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.cloudconfigurationmanager.getsetting.aspx)用于获取我的应用程序的设置，但它正在将它正在检查的所有内容的日志写入控制台（在调试和发布中）：

```
Getting "setting" from ServiceRuntime: FAIL.
Getting "setting" from ConfigurationManager: PASS (Data Source=...
Getting "setting" from ServiceRuntime: FAIL.
Getting "setting" from ConfigurationManager: PASS (Data Source=... 
```

有没有办法阻止它这样做，或者有一个不那么冗长的替代版本？

大多数情况下，我只是希望我的单元测试输出干净整洁，但我也有点担心它会在生产服务器上以纯文本形式打印出连接字符串（以及密码）等内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-27T15:55:59.990

`CloudConfigurationManager.GetSetting`现在有一个方法重载，带有一个名为`outputResultsToTrace`.

如果您传递`false`给此方法，那么它将禁用在`Trace.WriteLine`其他地方使用的“垃圾邮件”`Trace`日志。

所以

```
var mySetting = CloudConfigurationManager.GetSetting("MySetting"); 
```

变成

```
var mySetting = CloudConfigurationManager.GetSetting("MySetting", false); 
```

我通过直接查看 GitHub 上的源代码发现了这一点：[https ://github.com/Azure/azure-sdk-for-net/blob/52fc67253a176bea01c37c164f71c7eba8eaedba/src/Common/Configuration/CloudConfigurationManager.cs#L35](https://github.com/Azure/azure-sdk-for-net/blob/52fc67253a176bea01c37c164f71c7eba8eaedba/src/Common/Configuration/CloudConfigurationManager.cs#L35)

可能值得一提的是，没有记录此重载：[https ://msdn.microsoft.com/en-us/library/azure/mt634648.aspx](https://msdn.microsoft.com/en-us/library/azure/mt634648.aspx)

所以我不确定它是否是 API 的官方支持部分，或者它是否会在未来发生变化或消失。

此更改是在 2015 年底进行的：[https ://github.com/Azure/azure-sdk-for-net/commit/e14398136d7d3b6d5e4675f1e8ccbdd37a8c6b01](https://github.com/Azure/azure-sdk-for-net/commit/e14398136d7d3b6d5e4675f1e8ccbdd37a8c6b01)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-11T10:33:52.883

并不真地。如果您查看底层`GetValue`方法的代码，您会看到：

```
private static string GetValue(string providerName, string settingName, Func<string, string> getValue)
{
  string str1 = getValue(settingName);
  string str2;
  if (str1 != null)
    str2 = string.Format((IFormatProvider) CultureInfo.InvariantCulture, "PASS ({0})", new object[1]
    {
      (object) str1
    });
  else
    str2 = "FAIL";
  Trace.WriteLine(string.Format((IFormatProvider) CultureInfo.InvariantCulture, "Getting \"{0}\" from {1}: {2}.", (object) settingName, (object) providerName, (object) str2));
  return str1;
} 
```

Trace.WriteLine 总是在不考虑调试或发布的情况下被调用。现在您可以简单地删除应该抑制所有消息的默认侦听器：

```
 <system.diagnostics>
    <trace>
      <listeners>
        <remove name="Default" />
      </listeners>
    </trace>
  </system.diagnostics> 
```

现在，如果您看一下，`CloudConfigurationManager`它的作用并不大。如果这对你来说是个问题，你可以自己做一些事情，从这个开始：

```
 if (RoleEnvironment.IsAvailable)
            return RoleEnvironment.GetConfigurationSettingValue(setting);
        else
            return ConfigurationManager.AppSettings[setting]; 
```

注意：CloudConfigurationManager 的作用远不止于此，例如在没有程序集引用的情况下加载程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-18T08:13:04.107

替代选项，如果您在一部分中调用 CloudConfigurationManager.GetSetting()（即，包装器/帮助器类）：

```
var oldListeners = Trace.Listeners.Cast<TraceListener>().ToArray();
Trace.Listeners.Clear();

var stringValue = CloudConfigurationManager.GetSetting(key);
Trace.Listeners.AddRange(oldListeners); 
```

首先，我们删除 Trace 上的所有侦听器。然后我们抓取设置，并重新添加监听器。当然，这可能会导致线程应用程序出现问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-23T12:16:12.953

我刚刚安装了[nuget 包](https://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager/) `Microsoft.WindowsAzure.ConfigurationManager`版本 3.1.0，我可以确认该问题已在此版本中得到修复。查看问题评论中引用的[github issue](https://github.com/Azure/azure-sdk-for-net/issues/653)，我们可以看到，在[changelog](https://github.com/sopelt/azure-sdk-for-net/commit/8b311991876adcba6816a4213f688a152a8455b5)中，获取的值不再写入跟踪输出。特别是，跟踪消息已更改为：

```
message = string.Format(CultureInfo.InvariantCulture, "PASS ({0})", value); 
```

至：

```
message = "PASS"; 
```

尽管如此，这仍然使配置管理器非常冗长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T18:56:57.800

已在 3.0.0 版中修复。请更新 Microsoft Azure 配置管理器 nuget 包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-10T20:13:54.180

我有非常相似的问题。我从 Azure SDK 2.0 更新到 2.2 - 在此过程中，我使用 NuGet 管理器将 Microsoft.WindowsAzure.Storage 更新到最新版本。PackageManager 自动将 Microsoft.WindowsAzure.Configuration 升级到 1.8.0.0。我无法运行它（它是为 .Net 2.0 设计的！？）。在我手动将所有引用设置为

*   Microsoft.WindowsAzure.Storage 2.1.0.0
*   Microsoft.WindowsAzure.Configuration 2.0.0.0

一切正常。

我认为这是因为 CloudConfigurationManager.GetSetting 加载程序集并调用函数（通过反射）的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T00:10:42.837

我们自己也遇到了这个……太令人沮丧了。

我们无法删除默认侦听器，因为我们在上面记录了我们自己的东西。

不过有一个简单的解决方法。只需使用老式的`ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"]`，您将获得所需的信息，而无需烦人的日志记录。

希望有帮助，大卫

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-18T23:30:23.923

这里有两个单独的问题：

1.  设置值以纯文本形式记录（安全问题）
2.  **每次**检索设置时都会记录消息（冗长问题）

正如其他人所指出的，#1 已在更新版本的插件中得到修复。

根据我的经验（以及这里的一些其他回复），#2 仍然是一个巨大的烦恼。

查看 Visual Studio 的队列编辑器中的 WADLogsTable，请注意消息级别为 5（即**verbose**，根据[此 ETW 级别列表](https://msdn.microsoft.com/en-us/library/ff357720(v=vs.110).aspx#Anchor_1)）。

脱离[诊断配置文件模式](https://msdn.microsoft.com/en-us/library/azure/gg593185.aspx#bk_Logs)，我解决问题 #2 的方法是将通用跟踪的最低严重级别（例如警告、信息、详细）限制为“信息”（或更严重），并确保我自己的日志记录确实如此不要使用“详细”级别。

这是我在 diagnostics.wadcfgx 中所做的更改：

原来的：

```
<Logs scheduledTransferPeriod="PT1M" scheduledTransferLogLevelFilter="Verbose" /> 
```

固定的：

```
<Logs scheduledTransferPeriod="PT1M" scheduledTransferLogLevelFilter="Information" /> 
```

# iphone - 开始/结束外观转换的不平衡呼叫

> ID：12837194
> 
> 赞同：1
> 
> 时间：2012-10-11T10:12:07.520
> 
> 标签：iphone, ios, ipad, animation, uinavigationcontroller

我知道这是一个已在许多其他问题中详细解释的错误。然而，由于它的高度主观性，它似乎仍然是一个争论的话题。我有两个问题；

**这个错误有多有害？**

我一直在开发一个需要自定义`UINavigationController`. 我创建了一个假根，让我可以更轻松地更改感知到的根。为了产生这种影响，我“弹出”到假根，然后立即“推”新根。像这样;

```
[self popToViewController:self.fakeRootViewController animated:NO];
[self pushViewController:newRootViewController animated:NO]; 
```

我已经为此工作了好几个星期。我没有任何意想不到的副作用或任何负面反应。所以总结一下；我需要担心这个错误吗？

**有没有更好的办法？**

解释了我的情况后，我的第二个问题就是我还能如何设置 rootViewController？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:21:41.620

您还可以在 fakeRootViewController 的 -(void)viewWillAppear:(BOOL)animated 中推送 newRootViewController

# java - 无法在线程内创建处理程序。如何使用 Looper.prepare()？

> ID：12837196
> 
> 赞同：0
> 
> 时间：2012-10-11T10:12:07.397
> 
> 标签：java, android, multithreading, service

> **可能重复：**
> [无法在 AsyncTask 中为 ProgressDialog 调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/3614663/cant-create-handler-inside-thread-that-has-not-called-looper-prepare-inside-a)

我正在开发一个 Android 服务，该服务尝试每 x 次获取设备 IP 地址并将其与服务器通信。我正在使用：

> Netbeans 7.2
> Android SDK
> Android Google-Api 8
> SQLite

我知道有一些与同一问题相关的问题，但没有一个问题能解决我的问题。正如您在下面的代码中看到的那样，我并没有尝试访问服务主线程的 UI（好吧，我试过了，但是在我注释了该行之后，错误仍然是一样的）。另一方面，我正在使用*AsyncTask*，我认为这是适当的方法。

这是我服务的主要部分：

```
public class ArsosService extends Service {

    private NotificationManager mNM;
        private final Messenger mMessenger = new Messenger(new IncomingHandler());
        protected DatabaseUtil dbu = null;
        @Override
        public void onCreate() {
            mNM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            try {
                dbu = DatabaseUtility.getInstance(this);
            } catch (IOException ex) {
                Log.e("Service", ex);
            }
            Timer timer = new Timer();
            timer.schedule(new Checks(), 0, 15000);
        }

        private class Checks extends TimerTask {
            @Override
            public void run() {
                CheckIpAddress_Task checkIp = new CheckIpAddress_Task();         
                checkIp.execute();
            }
        }

        // Other methods

        private class CheckIpAddress_Task extends AsyncTask<Void, Void, Integer> {
        @Override
        protected Integer doInBackground(Void... arg0) {
            String ipLocal = getLocalIpAddress();
            String text = null;

            // ipLocal==null means there is no available connection, so we do nothing. 
            if (ipLocal != null) {
                String ipDb = dbu.getLastIP(); // we get the IP saved in the DB.
                if (ipDb == null) {
                    dbu.addProperty("IP", ipLocal); // we save the IP in the DB.
                } else if (!ipLocal.equals(ipDb)) {
                    dbu.setProperty("IP", ipLocal); // we update the IP in the DB.
                }
            }
            if (text != null) {
                //showNotification(1, text, ipLocal);
            }
            return 0;
        }

        private String getLocalIpAddress() {
            String result = null;
            // Irrelevant code
            return result;
        }
    }
} 
```

我认为问题可能与线程有关，但我看不出在哪里。任何帮助将不胜感激。

编辑：虽然我已经接受了其中一个答案是正确的，或者可能是因为它，但我一直在寻找更多关于它的信息。我遇到了[这个页面](http://techtej.blogspot.com.es/2011/02/android-passing-data-between-main.html)，我想与所有有一天需要了解更多关于这个问题的人分享。它的作者 Tejas Lagvankar 以非常清晰易懂的方式解释了有关线程、loopers 和处理程序的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:17:10.700

试试这个...

**-**首先在**类范围内**`Handler`声明对象引用变量。

 **`Handler h;`

**-**在`onCreate()`方法内部创建**Handler 的实例**。

`h = new Handler();`

**-**将它与如下线程一起使用：

```
new Thread(new Runnable(){

 public void run(){

    h.post(new Runnable(){

      // Do the UI work here.

   });

 }

}); 
```

**-**你可以很好地使用`AsyncTask`android 中提供的，它被称为 P* *ainless threading。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:27:16.937

Handler 总是在 Looper 线程上下文中运行。当你声明一个单独的线程时，它的上下文与 Looper 不同。因此错误。

简单的解决方案总是在 onCreate()、onStart() 和 onResume() 中声明处理程序。如果您使用 AsyncTasks，您可以很好地在 onPreExecute() 和 onPostExecute() 中声明处理程序，因为它们也在 Looper 上下文中运行。**

# c# - 使用 HttpListener 获取 WebBrowser 控件请求/响应？

> ID：12837198
> 
> 赞同：0
> 
> 时间：2012-10-11T10:12:10.360
> 
> 标签：c#, .net, winforms, webbrowser-control, httplistener

是否可以使用 HttpListener 来获取 webbrowser 控件发送的请求响应？我试图找出服务器发回的 URL（200 和 204）。

我一直在寻找许多解决方案，例如 webbrowser 包装器，但我需要一些简单的东西来查看请求/响应的 webbrowser 控制 URL 并将它们用作字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:25:58.210

您可以使用 Fiddler 查看您的请求和响应：

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# python - 仅从控制台运行时，Matplotlib pdf 保存失败

> ID：12837199
> 
> 赞同：2
> 
> 时间：2012-10-11T10:12:19.143
> 
> 标签：python, ssh, console, matplotlib

我正在使用 matplotlib.backends.backend_pdf 将一些 matplotlib 图渲染为 PDF。当我从我的 (Linux) 计算机上运行它时它工作正常，但是如果我从外部位置 ssh 到计算机并运行代码，它会失败并显示以下错误消息。

```
 File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 343, in figure
    **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 80, in new_figure_manager
    window = Tk.Tk()
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1688, in __init__
    self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)
_tkinter.TclError: no display name and no $DISPLAY environment variable 
```

我的代码中失败的行是*fig = matplotlib.pyplot.figure(figsize=(11.5,14.8))*。

我认为这与它试图找到在其上呈现绘图的显示器有关，但我的代码从未真正显示它们。它只保存为 PDF。有什么办法可以解决此问题以使代码正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:12:04.863

您的代码可能不会显示绘图，但它仍然使用需要显示的交互式后端。

您可以`ssh -Y user@host`获取 X 连接，或者根据 ngurenyaga 提供的链接中的建议，编辑您的代码以使用非交互式后端：

```
matplotlib.use("Agg") 
```

# c# - 使用 c# 连接到 mysql

> ID：12837202
> 
> 赞同：-1
> 
> 时间：2012-10-11T10:12:24.693
> 
> 标签：c#, mysql

请原谅我提出一个主要问题。我需要使用 c#连接到此链接[http://sunspares.millenniumit.com/phpmyadmin/ 。](http://sunspares.millenniumit.com/phpmyadmin/)它是 MySQL 的，我需要访问“库存”数据库中名为“备件”的表。谁能帮我用 C# 初始化这个连接。我找到了下面的编码，但我很困惑如何提供我需要连接的确切服务器以及表

```
con = mysql_connect("localhost","username","password"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:15:38.593

1.  安装[mysql 连接器/网络](http://dev.mysql.com/downloads/connector/net/1.0.html)。

2.  创建一个新项目。

3.  添加对： 的引用`MySql.Data`。

4.  添加`using MySql.Data.MySqlClient;`.

5.  将以下代码添加到您的应用程序中：

    ```
    private void button1_Click(object sender, System.EventArgs e)
    {
            string MyConString = @"SERVER=localhost;
                DATABASE=mydatabase;
                UID=testuser;
                PASSWORD=testpassword;";
            MySqlConnection connection = new MySqlConnection(MyConString);
            MySqlCommand command = connection.CreateCommand();
            MySqlDataReader Reader;
            command.CommandText = "select * from mycustomers";
            connection.Open();
            Reader = command.ExecuteReader();
            while (Reader.Read())
            {
                string thisrow = "";
                for (int i= 0;i<Reader.FieldCount;i++)
                        thisrow+=Reader.GetValue(i).ToString() + ",";
                listBox1.Items.Add(thisrow);
            }
            connection.Close();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:16:53.787

```
 <connectionStrings>
    <add name="MySQLConnectionString" connectionString="server=localhost;User      Id=root;pwd=;database=data1;" providerName="MySql.Data.MySqlClient"/>
  </connectionStrings>

-----------------------
using MySql.Data.MySqlClient;
...
MySqlConnection Conn = new MySqlConnection();
Conn = new MySqlConnection(ConnStr); 
```

# c - int 指针表达式

> ID：12837211
> 
> 赞同：0
> 
> 时间：2012-10-11T10:12:46.337
> 
> 标签：c

```
#include<stdio.h>
#include<stdlib.h>

int main ()
{
   int a[]={0,1,2,3,4};
   int *p[]={a,a+1,a+2,a+3,a+4};
   int **ptr=p;

   ptr++;
   printf("%d %d %d\n",ptr-p,*ptr-a,**ptr);

   *ptr++;
   printf("%d %d %d\n",ptr-p,*ptr-a,**ptr);

   *++ptr;
   printf("%d %d %d\n",ptr-p,*ptr-a,**ptr);

   ++*ptr;
   printf("%d %d %d\n",ptr-p,*ptr-a,**ptr);
return 0;
} 
```

这个程序的答案是 1 1 1

2 2 2

3 3 3

3 4 4

使用 gcc。但是为什么第一个 printf 的输出给出 1 1 1 不应该是 4 4 1？假设如果 p=6004 并且 ptr 将是 6004 并且 ptr++ 将是 6008.then ptr-p 应该给 4.pls 正确的我。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:27:16.560

指针运算的结果并不完全是它们的地址运算的结果。输出应该是`((address of ptr) - (address of p)) / (sizeof(pointed_type))` 例如：

```
int a[] = {0,1,2,3,4};
int *p=a;
int *p2 = p+1;
printf("%d",p2-p)     // will print 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:28:51.913

为了确定，我对其进行了一些修改。这里的要点是减去指针返回单元数，即指针的地址/大小，而不是地址位置的简单差异。

```
 printf("ptr before %p\n", ptr);
   ptr++;
   printf("ptr after %p and p %p\n", ptr, p);
   printf("%ld %ld %d\n",ptr-p,*ptr-a,**ptr); 
```

在我的 64 位机器上，打印的地址相隔 8 个位置，只有一个 ++。在 32 位机器上，这将是 4。但算术差异仍然会返回 1。

# c - 从信号处理程序上下文中获取 ARC 平台的回溯

> ID：12837218
> 
> 赞同：4
> 
> 时间：2012-10-11T10:13:01.433
> 
> 标签：c, linux-kernel, stack-trace, signal-handling, arc-architecture

我想`SIGSEGV`在程序退出之前在日志中捕获并打印回溯。这是为了在稍后的时间点分析崩溃。我正在开发一个在多个平台上运行的软件。在 x86 平台上，我可以使用 glibc`backtrace()`函数轻松完成此操作。但同样不适用于 MIPS 和 ARC 平台。我能够打印 MIPS 架构的回溯，如此[**处所述**](http://elinux.org/images/6/68/ELC2008_-_Back-tracing_in_MIPS-based_Linux_Systems.pdf)

我也想为[ARC 平台](http://www.synopsys.com/dw/ipdir.php?ds=os_arc_linux)做类似的事情。如果有人可以提供一些关于我在哪里可以获得类似详细信息的数据点，那将是非常有帮助的。

# 编辑：

经过一番研究，我发现在函数调用的 ARC 平台中，堆栈不是一次分配的，而是部分分配的。（如果我错了，请纠正我。我通过对象转储并弄清楚了这一点。）所以我觉得在这种情况下，与 MIPS 相比，很难进行二进制代码解析。

另一种方法是[**在 C 中编写一些内联汇编**](http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-C-C)并获取堆栈指针、帧指针和分支链接寄存器内容（闪烁），然后尝试使用堆栈和帧大小以及每帧中的闪烁值来展开堆栈。但我无法找到框架大小。

这是获取 FP、SP、BLINK 的示例代码。

```
int func2(int func2_arg)
{
   unsigned long *stack2_addr;
   unsigned long *frame2_addr;
   unsigned long *blink2_addr;

   printf("\nFunc : %s\n",__FUNCTION__);

   __asm__ __volatile__ ("st sp,[sp,4]");
   printf("Stack pointer:  %d\n",stack2_addr);

   __asm__ __volatile__ ("st blink,[sp,12]");
   printf("Blink:       %d \n",blink2_addr);

   __asm__ __volatile__ ("st fp,[sp,8]");
   printf("Frame pointer2: %d, %d\n",frame2_addr,*frame2_addr);

   return 0;
} 
```

是的，这不是好的编码！我做了很多假设。但对我来说，只要它在我的板上工作就很好。:)

任何帮助将不胜感激。[**这**](http://openlinux.amlogic.com/download/linux/ARC/doc/ARCGCC_GettingStarted.pdf)是关于 ARC gcc 的另一个参考资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:47:03.070

最后找到了一些可以满足要求的开源代码（[Apache 许可证](http://www.apache.org/licenses/LICENSE-2.0)）。这是有效的代码。

对大代码帖子感到抱歉。

```
/*
 * Copyright (c) 2008, 2009, 2010, 2011 Nicira, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at:
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#include <config.h>

#include "backtrace.h"

#include <errno.h>
#include <inttypes.h>
#include <stdbool.h>
#include <stdio.h>

#include "compiler.h"
#include "vlog.h"

VLOG_DEFINE_THIS_MODULE(backtrace);

#ifdef HAVE_BACKTRACE
#include <execinfo.h>
void
backtrace_capture(struct backtrace *b)
{
    void *frames[BACKTRACE_MAX_FRAMES];
    int i;

    b->n_frames = backtrace(frames, BACKTRACE_MAX_FRAMES);
    for (i = 0; i < b->n_frames; i++) {
        b->frames[i] = (uintptr_t) frames[i];
    }
}
#elif __GNUC__
static uintptr_t
get_max_stack(void)
{
    static const char file_name[] = "/proc/self/maps";
    char line[1024];
    int line_number;
    FILE *f;

    f = fopen(file_name, "r");
    if (f == NULL) {
        VLOG_WARN("opening %s failed: %s", file_name, strerror(errno));
        return -1;
    }

    for (line_number = 1; fgets(line, sizeof line, f); line_number++) {
        if (strstr(line, "[stack]")) {
            uintptr_t end;
            if (sscanf(line, "%*x-%"SCNxPTR, &end) != 1) {
                VLOG_WARN("%s:%d: parse error", file_name, line_number);
                continue;
            }
            fclose(f);
            return end;
        }
    }
    fclose(f);

    VLOG_WARN("%s: no stack found", file_name);
    return -1;
}

static uintptr_t
stack_high(void)
{
    static uintptr_t high;
    if (!high) {
        high = get_max_stack();
    }
    return high;
}

static uintptr_t
stack_low(void)
{
    uintptr_t low = (uintptr_t) &low;
    return low;
}

static bool
in_stack(void *p)
{
    uintptr_t address = (uintptr_t) p;
    return address >= stack_low() && address < stack_high();
}

void
backtrace_capture(struct backtrace *backtrace)
{
    void **frame;
    size_t n;

    n = 0;
    for (frame = __builtin_frame_address(1);
         frame != NULL && in_stack(frame) && frame[0] != NULL
             && n < BACKTRACE_MAX_FRAMES;
         frame = frame[0])
    {
        backtrace->frames[n++] = (uintptr_t) frame[1];
    }
    backtrace->n_frames = n;
}
#else  /* !HAVE_BACKTRACE && !__GNUC__ */
void
backtrace_capture(struct backtrace *backtrace)
{
    backtrace->n_frames = 0;
}
#endif 
```

希望这对其他人也有用！

# c++ - C ++中的Kinect面部跟踪功能StartTracking没有给出预期的结果

> ID：12837226
> 
> 赞同：2
> 
> 时间：2012-10-11T10:13:47.773
> 
> 标签：c++, kinect, kinect-sdk

我正在使用 Kinect SDK 1.5，当我想跟踪多张脸时发现了一些问题。

在我的代码中，我首先使用

```
myFaceTracker->DetectFaces(&sensor, NULL, candidates, &nums) 
```

获取当前检测到的人脸，并将其位置与已跟踪的人脸进行比较。

那些当前未被跟踪的人脸将被添加到队列中，以便在下一步中进行跟踪。

但是当我想使用 StartTracking 函数跟踪它们时，它并没有给出预期的结果。

例如：

```
//Time for us to track those not tracked
RECT rect = queue_face.front();

//Make the region larger than orginal
int length_vertical = rect.bottom - rect.top;
int length_horizontal = rect.right - rect.left;
rect.top    = rect.top - length_vertical * 2;
rect.bottom = rect.bottom + length_vertical * 2;
rect.left   = rect.left - length_horizontal * 2;
rect.right  = rect.right + length_horizontal * 2;

//Use OpenCV to see if it gets right
CvPoint LT = cvPoint(rect.left, rect.top);
CvPoint LB = cvPoint(rect.left, rect.bottom);
CvPoint RT = cvPoint(rect.right, rect.top);
CvPoint RB = cvPoint(rect.right, rect.bottom);

cvLine(_img, LT, LB, cvScalar(0, 255, 0), 2);
cvLine(_img, LB, RB, cvScalar(0, 255, 0), 2);
cvLine(_img, RB, RT, cvScalar(0, 255, 0), 2);
cvLine(_img, RT, LT, cvScalar(0, 255, 0), 2);

//Here turns out to be some problem
result = facetracker->StartTracking(&sensor, &rect, NULL, faceresult);

//Check Result
is_track = SUCCEEDED(result) && SUCCEEDED(faceresult->GetStatus());
queue_face.pop();

.... 
```

上面的代码给了我一个完全没用的结果，即使状态说如果我们使用成功

```
faceresult->GetFaceRect(rect); 
```

它给了我们一个带有 (0, 0, 0, 0) 的矩形！

但如果我们改变

```
result = facetracker->StartTracking(&sensor, &rect, NULL, faceresult); 
```

至

```
result = facetracker->StartTracking(&sensor, NULL, NULL, faceresult); 
```

现在它会给我们一些有用的东西，但是通过这种方式，几乎不可能控制我们想要跟踪的人。

我还尝试查看 (0, 0, width-1, height-1) 的输入矩形，但更糟糕的是，现在它说它无法跟踪任何内容。

有人会给我帮助吗？

非常感谢。

# android - 如何解决 AsyncTask 中的异常

> ID：12837231
> 
> 赞同：0
> 
> 时间：2012-10-11T10:14:00.107
> 
> 标签：android, android-asynctask

这是我的异步任务。在 AsyncTask 中获取异常..

```
private class GetCategories extends AsyncTask<String, Void, String[]> {
    String temp[] = new String[] {};
    protected String[] doInBackground(String... urls) {
        JSONParser jParser = new JSONParser();
        JSONArray category_details;
        try {
            URL url = new URL(urls[0]);
            JSONObject json = jParser.getJSONFromUrl(url.toString());
            category_details = json.getJSONArray("cat");
            for (int i = 0; i < category_details.length(); i++) {
                JSONObject obj = category_details.getJSONObject(i);
                temp[i] = obj.getString("catName");
            }
            return temp;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }

    }

    @Override
    protected void onPostExecute(String[] temp) {

    }

} 
```

我正在执行任务并获取这样的值。

```
 try {
        String[] test = new GetCategories().execute(categories_url).get();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但我收到这样的错误。我在 doInBackground 方法中遇到异常。

```
10-11 15:26:47.207: W/System.err(5158): java.lang.ArrayIndexOutOfBoundsException: length=0; index=0
10-11 15:26:47.207: W/System.err(5158):     at com.example.fragments.CatFragment$GetCategories.doInBackground(CategoriesFragment.java:207)
10-11 15:26:47.207: W/System.err(5158):     at com.example.fragments.CatFragment$GetCategories.doInBackground(CategoriesFragment.java:1)
10-11 15:26:47.207: W/System.err(5158):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-11 15:26:47.207: W/System.err(5158):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-11 15:26:47.207: W/System.err(5158):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-11 15:26:47.207: W/System.err(5158):     at  android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-11 15:26:47.207: W/System.err(5158):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-11 15:26:47.207: W/System.err(5158):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-11 15:26:47.207: W/System.err(5158):     at java.lang.Thread.run(Thread.java:856) 
```

行 207 转到 catch 块。谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:19:56.467

我认为，这个异常是由不正确的字符串数组声明引起的，你可以使用这个本教程 1）声明一个具有初始大小的 Java 字符串数组如果你事先知道你的数组需要多大，你可以（a）声明一个字符串数组(b) 给它一个像这样的初始大小：

```
public class JavaStringArrayTests
{
  private String[] toppings = new String[20];
  // more to the class here ...
} 
```

在这个例子中，我们声明了一个名为 toppings 的 String 数组，然后给它一个 20 个元素的初始大小。

稍后，在您的类中的 Java 方法中，您可以像这样填充 String 数组中的元素：

```
void populateStringArray()
{
  toppings[0] = "Cheese";
  toppings[1] = "Pepperoni";
  toppings[2] = "Black Olives";
  // ...
} 
```

来源：[http ://alvinalexander.com/java/java-string-array-reference-java-5-for-loop-syntax](http://alvinalexander.com/java/java-string-array-reference-java-5-for-loop-syntax)

# java - ClassNameFilter 和 BeforeClass

> ID：12837234
> 
> 赞同：0
> 
> 时间：2012-10-11T10:14:08.923
> 
> 标签：java, browser, selenium, webdriver, selenium-webdriver

我有几十个 Selenium Webdriver 测试。我想一次运行它们。如何运行测试以使每个测试都不会打开新的 Webdriver 浏览器窗口？

这样的解决方案可能吗？这会导致来自驱动程序的 nullPointError。

```
 @ClassnameFilters({"com.company.package*", ".*Test"})

 public class TestSuite {

 public static WebDriver driver;

@BeforeClass
public static void setUpClass() {
    driver = new FirefoxDriver();
}

@AfterClass
public static void setDownClass() {
     driver.quit();
} 
```

}

```
 public class Test {

private WebDriver driver = TestSuite.driver;

 @Test.... {
    } 
```

放置新的对象初始化属性会使第一个测试运行，但其他测试会导致无法访问的浏览器错误。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:47:39.770

哈哈，对不起我的疏忽。 *这会导致来自驱动程序的 nullPointError，*这可能仅由不正确的 Web 驱动程序初始化引起。当您`public static WebDriver driver;` 在 其中声明`public class TestSuite`并创建实例时

```
@BeforeClass
public static void setUpClass() {
    driver = new FirefoxDriver();
} 
```

你不需要

`public class Test`

初始化

`private WebDriver driver = TestSuite.driver;`再次。取而代之的是，我将通过以下方式使用继承`public class Test`，`public class TestSuite`并在我的测试中通过`@Test`简单地调用我的驱动程序进行注释，因为它被初始化为静态。代码如下：

```
public class Test extends TestSuite {
@Test
public void findButtonAndClickOnIt(){
String buttonCssSelector ="...blablabla...";
driver.findElement(By.cssSelector(buttonCssSelector)).click();
}
} 
```

希望现在它对你有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T15:50:20.960

要处理此问题，请尝试使用 `@BeforeClass, @AfterClass`注释：

```
import com.google.common.base.Function;
import com.thoughtworks.selenium.SeleneseTestBase;
import junit.framework.Assert;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.support.ui.FluentWait;
import org.openqa.selenium.support.ui.Wait;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;
import org.springframework.core.io.support.PropertiesLoaderUtils;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.NoSuchElementException;
import java.util.Properties;
import java.util.concurrent.TimeUnit;

public class BaseSeleniumTest extends SeleneseTestBase {
static WebDriver driver;

@Value("login.base.url")
private String loginBaseUrl;

@BeforeClass
public static void firefoxSetUp() throws MalformedURLException {

   DesiredCapabilities capability = DesiredCapabilities.firefox();

    driver = new RemoteWebDriver(new URL("http://192.168.4.52:4444/wd/hub"), capability);

    driver = new FirefoxDriver();  //for local check

    driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
    driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
    driver.manage().window().setSize(new Dimension(1920, 1080));
}
@Before
public void openFiretox() throws IOException {

    driver.get(propertyKeysLoader("login.base.url"));

}

@AfterClass
public static void closeFirefox(){
    driver.quit();
} 
```

……

@BeforeClass 意味着您初始化了一些东西，并且所有以下带有注释的 selenium 测试`@Test`都在打开的单个浏览器窗口中运行。希望这对您有所帮助。

# vb.net - 如何读取 DataTable 的内容并将它们分配给其他控件？

> ID：12837235
> 
> 赞同：0
> 
> 时间：2012-10-11T10:14:08.680
> 
> 标签：vb.net

**早上好，**

我整晚都在试图自己解决这个问题而不打扰其他人，但我做不到。

我已经成功地查询了我的 MySQL 数据库并将一组记录放入 DataTable (dbTable) 中。在调试过程中，我可以看到它的内容，所以我知道数据在那里。最初，DataTable 用于填充表单上的 ListView 控件。

当我选择一条记录时，我希望将 DataTable（或我刚刚运行的查询）的内容分配给一些 TextBox 控件。我似乎无法弄清楚如何做到这一点。任何帮助将不胜感激。

**添加图像的更新：** 我希望这些屏幕截图能让我了解我想要做什么。第一张图片显示了输入帐号后发生的情况。第二个框显示了在 ListView 中选择了一条记录后展开的 Groupbox 以显示表单字段。

**控件名称为：** *TextBoxCustomer、TextBoxLastName、TextBoxFirstName、ComboBoxSalutation、ComboBoxCardType、TextBoxCard.Text、TextBoxExpireMonth、TextBoxExpireYear、TextBoxCVV2。*

**DataTable（dbTable）中的字段名有：** nameCOMPANY、nameLAST、nameFIRST、nameSALUTATION、ccType、ccNumber、ccExpireMonth、ccExpireYear、ccCode。

图 1： ![在 TextBoxAccount 中输入后。](../Images/f5765c4520581dd3039d80e605f2f59b.png)

图 2： ![在列表视图中选择一条记录后](../Images/033fb425aa630b2476cbb65d719eee9d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:20:10.417

你试过这个吗？

```
TextBox1.Text = dbTable.Rows(0)("ColumnName").ToString()
TextBox2.Text = dbTable.Rows(1)("OtherColumnName").ToString() 
```

你也可以这样做：

```
Dim row as DataRow = dbTable.Rows(0)
TextBox1.Text = row("ColumnName").ToString()

row = dbTable.Rows(1)
TextBox2.Text = row("OtherColumnName").ToString() 
```

您也可以使用as`DataBind`到一个`DataGrid`（或类似的控件），然后将其设置为。这将为您创建文本框控件。`dbTable``DataSource``DataGrid.EditMode``True`

**更新：**

尝试像这样将您的文本框绑定到您的 ListView 的选定值：

```
Private Sub ListView1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListView1.SelectedIndexChanged
    Dim item As ListViewItem = Nothing
    Dim tb As TextBox = Nothing
    Dim i As Integer = 0

    For Each item In ListView1.SelectedItems
        tb = Me.Controls.Find("TextBox" & i.ToString, True)(0)
        If tb IsNot Nothing Then
            tb.Text = item.Text
        End If

        i += 1
    Next
End Sub 
```

**更新：**

这更能防错，但这个例程只有在你的文本框被命名为`TextBox1`、`TextBox2`、`TextBox3`等时才有效：

```
Private Sub ListView1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListView1.SelectedIndexChanged
    Dim item As ListViewItem = Nothing
    Dim found() As Control = Nothing
    Dim tb As TextBox = Nothing
    Dim i As Integer = 0

    For Each item In ListView1.SelectedItems
        found = Me.Controls.Find("TextBox" & i.ToString, True)

        If found.Length > 0 Then
            tb = TryCast(found(0), TextBox)
        Else
            tb = Nothing
        End If

        If tb IsNot Nothing Then
            tb.Text = item.Text
        End If

        i += 1
    Next
End Sub 
```

**更新：**

好的，感谢屏幕截图，我假设您的`ListView.MultiSelect = False`, 所以一次只能选择一项。鉴于此，只要正确命名文本框和 ListView 列，以下内容应该可以工作：

```
Private Sub ListView1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListView1.SelectedIndexChanged
    Dim item As ListViewItem = Nothing
    If ListView1.SelectedItems.Count = 1 Then
        item = ListView1.SelectedItems(0)

        txtCardNumber.Text = item.SubItems("CARD NUMBER")
        txtCardExpirationMonth.Text = item.SubItems("EXP MO")
        txtCardExpirationYear.Text = item.SubItems("EXP YEAR")
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:14:37.680

**你好伙计们/姑娘们，**

在皮特的大力帮助下，我能够修改建议的答案，并实现了所需的解决方案。为了防止显示水平滚动条，我没有向 Listview 添加列（来自设计器）。相反，我以编程方式将这些字段添加到 Listview 中——这样它们就可供选择了。

我遇到的主要麻烦是找出字段的索引号。我不得不调试几次才能弄清楚数字是什么 - 所以如果有人知道更好的方法，请分享。

**这是我使用的两个代码（感谢皮特）：**

```
 Private Sub loadCard()

    Try
        'FOR MySQL DATABASE USE
        Dim dbQuery As String = ""
        Dim dbCmd As New MySqlCommand
        Dim dbAdapter As New MySqlDataAdapter
        Dim dbTable As New DataTable
        Dim i As Integer

        If dbConn.State = ConnectionState.Closed Then
            dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
            dbConn.Open()
        End If

        dbQuery = "SELECT *" & _
                   "FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
                   "WHERE customer.accountNumber = '" & TextBoxAccount.Text & "'"
        With dbCmd
            .CommandText = dbQuery
            .Connection = dbConn
        End With
        With dbAdapter
            .SelectCommand = dbCmd
            .Fill(dbTable)
        End With
        ListViewCard.Items.Clear()
        For i = 0 To dbTable.Rows.Count - 1
            With ListViewCard
                .Items.Add(dbTable.Rows(i)("ccID"))
                With .Items(.Items.Count - 1).SubItems
                    .Add(dbTable.Rows(i)("ccNumber"))
                    .Add(dbTable.Rows(i)("ccExpireMonth"))
                    .Add(dbTable.Rows(i)("ccExpireYear"))
                    .Add(dbTable.Rows(i)("ccCode"))
                    .Add(dbTable.Rows(i)("ccType"))
                    .Add(dbTable.Rows(i)("ccAuthorizedUseStart"))
                    .Add(dbTable.Rows(i)("ccAuthorizedUseEnd"))
                    .Add(dbTable.Rows(i)("nameCOMPANY"))
                    .Add(dbTable.Rows(i)("nameSALUTATION"))
                    .Add(dbTable.Rows(i)("nameLAST"))
                    .Add(dbTable.Rows(i)("nameFIRST"))
                End With
            End With
        Next
        If dbTable.Rows.Count = 0 Then
            LabelNoCard.Visible = True
            LabelNoCard.Focus()
            TextBoxAccount.Focus()
            Me.Refresh()
        Else
            If dbTable.Rows.Count > 1 Then
                LabelNoCard.Visible = False
                LabelMultipleCards.Visible = True
                ListViewCard.Visible = True
                Me.Refresh()
            End If
        End If
    Catch ex As MySqlException
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    dbConn.Close()
End Sub 
```

这是第二个：

```
 Private Sub ListViewCard_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ListViewCard.SelectedIndexChanged

    GroupBox2.Visible = True
    Dim item As ListViewItem = Nothing
    If ListViewCard.SelectedItems.Count = 1 Then
        item = ListViewCard.SelectedItems(0)

        TextBoxCustomer.Text = item.SubItems(8).Text
        TextBoxLastName.Text = item.SubItems(10).Text
        TextBoxFirstName.Text = item.SubItems(11).Text
        ComboBoxSalutation.Text = item.SubItems(9).Text
        ComboBoxCardType.Text = item.SubItems(5).Text
        TextBoxCard.Text = item.SubItems(1).Text
        TextBoxExpireMonth.Text = item.SubItems(2).Text
        TextBoxExpireYear.Text = item.SubItems(3).Text
        TextBoxCVV2.Text = item.SubItems(4).Text
        DateTimePickerStartDate.Text = item.SubItems(6).Text
        DateTimePickerEndDate.Text = item.SubItems(7).Text

    End If
    End Sub 
```

# jquery - jQuery/Validation：总是提交带有 invalidHandler 的表单

> ID：12837240
> 
> 赞同：3
> 
> 时间：2012-10-11T10:14:25.507
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery (1.8.2) 和[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)(1.10.0) 来验证表单。我的问题是，在设置自定义时`invalidHandler`，即使出现错误，我的表单也会提交。

## 长版

表单很长，并且有几个字段可以从视图中隐藏（使用`jQuery.toggle()`）以使表单更易于使用。现在，其中一些字段是“可选的”，也就是说，如果选中相应的复选框，我只关心它们的内容。所以我的验证器看起来与此类似：

```
emailInvitationTitle: {
     required: function() {
        return $("#emailInvitation_chk").prop("checked");
    }
},
emailInvitationBody: {
    required: function() {
        return $("#emailInvitation_chk").prop("checked");
    }
} 
```

到现在为止还挺好。但是，如果这些“可能隐藏，可能需要”字段中的任何一个在提交时无效，我想显示相关的隐藏部分（使用类“messageEditor”）。所以我有一个`invalidHandler`这样的：

```
invalidHandler: function(form, validator) {
    // If either title or body is empty, make sure their parent div is visible
    if (!(validator.element("#emailInvitationTitle") 
            && validator.element("#emailInvitationBody"))) {
        $("#emailInvitationTitle").closest(".messageEditor").show();
    }
} 
```

问题是，似乎通过定义 this `invalidHandler`，我的表单总是被提交，无论验证是否成功。我挖掘`jquery.validate.js`并观察到以下内容（在第 331 行及以后）：

```
 // http://docs.jquery.com/Plugins/Validation/Validator/form
    form: function() {
        this.checkForm();
        $.extend(this.submitted, this.errorMap);
        this.invalid = $.extend({}, this.errorMap);
        if (!this.valid()) {
            $(this.currentForm).triggerHandler("invalid-form", [this]);
        }
        this.showErrors();
        return this.valid();
    }, 
```

我不会假装我明白了一半。但是在跟踪这个时，我注意到第一次调用时`this.valid()`正确返回`false`，这导致我`invalidHandler`触发。然而，紧随其后的是`return this.valid()`产量。`true`不知何故，触发器 (?) 清除了验证器的`errorList`数组，导致提交无效的表单。

这是 validate 插件的错误，还是 jQuery 本身（或其他东西）的错误？

有关修复/解决方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:52:31.903

用我最终开始使用的解决方法回答我自己的问题。

我通过修改以下`form`函数解决了这个问题`jquery.validate.js`：

```
// http://docs.jquery.com/Plugins/Validation/Validator/form
form: function() {
    this.checkForm();
    $.extend(this.submitted, this.errorMap);
    this.invalid = $.extend({}, this.errorMap);
    var errorListCopy = this.errorList.slice(); // hack, step 1
    if (!this.valid()) {
        $(this.currentForm).triggerHandler("invalid-form", [this]);            
        this.errorList = errorListCopy.concat(this.errorList); // hack, step 2
    }
    this.showErrors();
    return this.valid();
}, 
```

仍然感觉不是正确的方法，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T17:17:50.263

我遇到了同样的问题。这似乎是插件中的一个错误。我解决这个问题的方法如下：

```
submitHandler: function(form) {
  if ($(form).validate().numberOfInvalids() != 0) {
    return false;
  }
  form.submit();
}, 
```

# margin - 无法调整图表边距

> ID：12837247
> 
> 赞同：3
> 
> 时间：2012-10-11T10:14:41.097
> 
> 标签：margin, mschart

我创建了一个图表，但它在 Y.Axis 和图表的边框之间有一个左边距。

我怎样才能使它为0？

是否可以在图表和边框之间定义一个 5px 的统一边距（左、上、右、下）？

我的图表代码如下：

```
Chart chart = new Chart {
  AntiAliasing = AntiAliasingStyles.All,
  TextAntiAliasingQuality = TextAntiAliasingQuality.High,
  BackColor = Color.FromArgb(250, 250, 250),
  Height = size.Height,
  Width = size.Width
};

chart.Legends.Clear();

ChartArea area = new ChartArea {
  BackColor = Color.Transparent,
  BorderColor = Color.FromArgb(240, 240, 240),
  BorderWidth = 1,
  BorderDashStyle = ChartDashStyle.Solid,
  AxisX = new Axis {
    Enabled = AxisEnabled.True,
    IntervalAutoMode = IntervalAutoMode.VariableCount,
    IsLabelAutoFit = true,
    IsMarginVisible = true,
    LabelStyle = new LabelStyle { ForeColor = Color.FromArgb(100, 100, 100), Font = new Font("Arial", 10, FontStyle.Regular) },
    LineColor = Color.FromArgb(220, 220, 220),
    MajorGrid = new Grid { LineColor = Color.FromArgb(240, 240, 240), LineDashStyle = ChartDashStyle.Solid },
    MajorTickMark = new TickMark { LineColor = Color.FromArgb(220, 220, 220), Size = 4.0f },
  },
  AxisY = new Axis {
    Enabled = AxisEnabled.True,
    IntervalAutoMode = IntervalAutoMode.VariableCount,
    IsLabelAutoFit = true,
    IsMarginVisible = true,
    LabelStyle = new LabelStyle { ForeColor = Color.FromArgb(100, 100, 100), Font = new Font("Arial", 10, FontStyle.Regular) },
    LineColor = Color.Transparent,
    MajorGrid = new Grid { LineColor = Color.FromArgb(240, 240, 240), LineDashStyle = ChartDashStyle.Solid },
    MajorTickMark = new TickMark { LineColor = Color.FromArgb(240, 240, 240), Size = 2.0f }
  },
  Position = new ElementPosition { Height = 100, Width = 100, X = 0, Y = 0 }
};

chart.ChartAreas.Add(area);

area.AxisX.LabelStyle.Format = "H:mm";
area.AxisX.LabelStyle.IntervalType = DateTimeIntervalType.Hours;

Series series = new Series {
  CustomProperties = "PointWidth = 1",
  IsXValueIndexed = true,
  XValueType = (ChartValueType)Enum.Parse(typeof(ChartValueType), x.Data.GetType().GetGenericArguments()[0].Name)
};

series.BorderWidth = 2;
series.BorderColor = Color.FromArgb(84, 164, 232);
series.ChartType = SeriesChartType.Area;
series.Color = Color.FromArgb(222, 234, 244);

series.Points.DataBindXY(x.Data, s.Data);

chart.Series.Add(series); 
```

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:21:38.810

您可以使用 删除轴边距`Axis.IsMarginVisible = false`。
您可以使用定位图表区域`ChartArea.Position`或使用定位绘图区域`ChartArea.InnerPlotPosition`

# python - 使用不同的 hi lo 平分搜索

> ID：12837248
> 
> 赞同：-2
> 
> 时间：2012-10-11T10:14:44.303
> 
> 标签：python, search, bisect

我试图弄清楚如何使用平分搜索来查找：

每月还款以清除贷款金额

*   月利率=（年利率）/12
*   月供下限=余额/12
*   月供上限 = (余额 x (1 + 月利率)12) / 12

目前我有：

```
balance = 6758
annualInterestRate = 0.20
monthlyRate = annualInterestRate/12
numGuesses = 0
lo = balance/12
hi = (balance)*((1+monthlyRate)**12)/12
monthPay = (hi + lo)/2.0
NuBalance = balance
while abs((NuBalance)*(1+monthlyRate))-(monthPay) >= 0.01:
    print('low = ' + str(lo) + ' high = ' + str(hi) + ' MonthPay = ' + str(monthPay))
    numGuesses += 1
    if ((NuBalance)*(1+monthlyRate))-(monthPay) <= 0.01:
        print('Month Pay LO = ' + str(monthPay))
        lo = monthPay
    else:
        print('Month Pay HI = ' + str(monthPay))
        hi = monthPay
    monthPay = (hi + lo)/2.0
print('numGuesses = ' + str(numGuesses))
print('Month Pay = ' + str(monthPay)) 
```

任何对我出错的地方的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:40:52.417

它应该是：

```
while abs((NuBalance)*(1+monthlyRate)-(monthPay)) >= 0.01:
                                    ^           ^ 
```

并且一直存在

```
(hi + lo)/2.0 < (NuBalance)*(1+monthlyRate) 
```

是`True`因为`hi`和`lo`都小于`(NuBalance)*(1+monthlyRate)`

```
In [9]: print 'lo:', lo
lo: 563

In [10]: print 'hi:', hi
hi: 686.720412649

In [11]: print 'monthPay:', monthPay
monthPay: 624.860206325

In [12]: print '(NuBalance)*(1+monthlyRate):', (NuBalance)*(1+monthlyRate)
(NuBalance)*(1+monthlyRate): 6870.63333333 
```

# php - 将 1 个表列中的文本与另一个表列中的部分字符串匹配

> ID：12837250
> 
> 赞同：2
> 
> 时间：2012-10-11T10:14:50.480
> 
> 标签：php, mysql, sql

我正在尝试将一个表中的列中的文本与第二个表的列中的部分字符串进行匹配，如果匹配，则会在我的网页上输出图像。下面是一个例子

产品

```
ID | Prod_Code | Colours
1    100         Yellow, Orange, Navy 
```

颜色

```
ID | Colour | Image Link
1    Yellow   Yellow swatch image
2    Orange   Orange swatch image 
```

我想要实现的是，如果 products.colours 包含文本“黄色”，黄色样本图像将出现在屏幕上，橙色等相同。

我知道应该对表格进行规范化以获得最佳实践，但不幸的是这不是我设计的，而且有时间限制。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:23:14.703

尝试这样的事情：

```
SELECT p.Prod_Code, c.Image_Link 
FROM Products AS p
  INNER JOIN Colours AS c 
  ON p.Colour LIKE '%' + c.Colour + '%' ; 
```

虽然如果你有黄色、黄色2等颜色，那可能会有点梨形。

# windows - 批处理脚本输出登录到文件

> ID：12837268
> 
> 赞同：0
> 
> 时间：2012-10-11T10:15:38.247
> 
> 标签：windows, batch-file

我想为每个命令记录以下脚本，无论它是成功还是失败。我相信在 shell 脚本中，我们有命令`$?`知道执行的命令是成功还是失败。有没有办法在批处理脚本中实现这一点？

```
open server
username
Password-1
bin
cd \Current_QA_DataLoad
put E:\AccountsInitialV6.txt
PAUSE
bye 
```

在此先感谢维克拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:12:11.580

当然。

```
yourCommand && (
   commands to execute upon success
) || (
   commands to execute upon failure
) 
```

# .net - .NET Web 服务超时 - 放弃工作

> ID：12837269
> 
> 赞同：1
> 
> 时间：2012-10-11T10:15:42.297
> 
> 标签：.net, sql, web-services, sqltransaction

我有一个调用 web 服务方法的 Winforms 应用程序

webservice 方法启动一个长时间运行的事务（不幸的是，有很多小命令而不是一个长时间运行的命令。）

据我所知，如果 webservice 调用超时，webservice 方法中的事务将继续运行并完成。我希望发生的事情是当 web 服务超时时事务回滚。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T00:47:36.297

恢复一个旧线程，但我遇到了同样的问题，所以我想我会为遇到它的其他人更新这个。我发现的最佳解决方案是使用 XACT_ABORT 即插入

`SET XACT_ABORT ON`

在您的交易开始时。这将强制回滚任何类型的客户端错误（因此您的事务将不会继续运行和完成，它只会回滚）。在 dba stackexchange 中有一个非常好的讨论：

[https://dba.stackexchange.com/questions/10912/sql-server-transaction-timeout](https://dba.stackexchange.com/questions/10912/sql-server-transaction-timeout)

# ios - 自动设置在 XCode 中突出显示的选定 UI 按钮？

> ID：12837270
> 
> 赞同：0
> 
> 时间：2012-10-11T10:15:42.837
> 
> 标签：ios, xcode, uitableview, uibutton

我在 UITableViewCell 中显示一个 NSMutableArray 项目，其作用类似于 gridview。单元格中有自定义 UI 按钮。现在，当用户单击一个按钮时，我希望它突出显示。但是当我这样做时，发生的事情是当我单击按钮的颜色变为红色。但是当我单击下一个按钮时，它的颜色也变为红色，但前一个按钮的颜色也是红色。我希望前一个按钮保持未突出显示，当前按钮突出显示。我该如何做吗？这是我的代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 CGRect rect = CGRectMake(18+80*j, yy,57, 40);
        UIButton *button=[[UIButton alloc] initWithFrame:rect];
        [button setFrame:rect];

        [button setContentMode:UIViewContentModeCenter];
        NSString *settitle=[NSString stringWithFormat:@"%@",item.title];
        [button setTitle:settitle forState:UIControlStateNormal];
        NSString *tagValue = [NSString stringWithFormat:@"%d%d", indexPath.section+1, i];
        button.tag = [tagValue intValue];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];              
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [hlcell.contentView addSubview:button];
        [button release];
}

-(IBAction)buttonPressed:(id)sender {
int tagId = [sender tag];
int divNum = 0;
if(tagId<100)
    divNum=10;
else 
    divNum=100;
int section = [sender tag]/divNum;
section -=1; 
int itemId = [sender tag]%divNum;
UIButton *button = (UIButton *)sender;
if(button.enabled==true)

{
   button.backgroundColor=[UIColor redColor];
}

NSLog(@"…section = %d, item = %d", section, itemId);
NSMutableArray *sectionItems = [sections objectAtIndex:section];
Item *item = [sectionItems objectAtIndex:itemId];
NSLog(@"..item pressed…..%@, %@", item.title, item.link);

} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:56:23.763

一种方法是在头文件中保留所有按钮的 IBCollection 引用（将 Interface builder 中的所有按钮连接到此 IBOutletCollection）：

```
@property (nonatomic, retain) IBOutletCollection(UIButton) NSArray *allOfMyButtons; 
```

并且在您的 buttonPressed 方法中，仅当当前按下的按钮和该按钮已启用时才将背景颜色设为红色（所有其他按钮都变回黑色或任何初始颜色）：

```
-(IBAction)buttonPressed:(id)sender {
    [self.allOfMyButtons enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        UIButton *button = (UIButton *)obj;

        if (button != sender && button.enabled) {
            [button setBackgroundColor:[UIColor redColor]];
        } else {
            [button setBackgroundColor:[UIColor blackColor]];
        }
    }];
} 
```

# java - HttpResponse 正文正在更改

> ID：12837272
> 
> 赞同：3
> 
> 时间：2012-10-11T10:15:45.897
> 
> 标签：java, linux, web-services, http, firewall

我们目前正面临一个特殊的问题，我们不知道是什么原因造成的。

我们在 serverA 上托管了一个 Web 服务。当从 serverB 调用此 Web 服务时（使用命令 curl `http://serverA:8008/service/getId`），我们得到所需的响应。（Web 服务返回一个 Id，它是一个整数）。

当从 serverC 调用相同的 Web 服务时，我们得到所需的响应，但响应中的数字**2**被替换为**_**。

例如，当从 serverB 调用 Web 服务时，我们得到**5002 。**当从 serverC 调用相同的 Web 服务时，我们得到**500_**

我们检查了 serverA 的 wireshark 详细信息，从 serverA 输出的数据对于两台服务器都是相同的。

我们目前不知道为什么会发生这种情况。我想补充一点，serverC 在 DMZ 中，而 serverB 不在。

非常感谢这方面的任何输入/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:02:34.943

通过收集事实

```
 1\. Server doesn't change the response by its own.
 2\. Web Service is giving the same response for the same input. 
```

唯一的罪魁祸首是您的防火墙，您能否将其停止以进行测试并查看响应是否按预期进行。或尝试检查防火墙设置并为 Web 服务创建漏洞/异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:05:50.553

感谢大家的努力，问题现已解决。这是导致此问题的不正确的防火墙规则。我询问了我们的网络工程师防火墙设置如何改变 http 响应正文，以下是我得到的答复：

> 对于某些协议，防火墙会进行深层数据包检查，因此它不只是检查端口号，而是实际查看有效负载。这允许它阻止恶意软件、可能利用漏洞的格式错误的数据包等。所以它知道要检查什么，你必须在规则中指定流量是什么，所以你说它在端口 8008 上，它是 HTTP。问题是由于某种原因，这条规则被设置为使用端口 8008，但流量类型被设置为被动模式 FTP 而不是 HTTP。一旦我将其更正为 HTTP，它就开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:36:02.330

尝试将 ServerB 也放入 DMZ 中，看看会发生什么。
如果它的行为相同，则为网络问题。
如果不是，您可能在服务器上有 2 个不同版本的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:02:05.083

在我看来，这听起来像是您的 URL 中有特殊字符，它们会导致端口号被覆盖，但前提是这些字符在字符集中被识别。您可以使用十六进制编辑器检查 URL 中的特殊字符（特别是退格）吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T03:26:41.010

我无法解决您的问题，但请查找路径上的任何转码器。从服务器 C 向服务器 A 发送请求。 1) 在 A 处使用wireshark，查看它是否正确接收请求。可能的转码器可能会将无主机 url 转换为 host-ful（ GET /service/getId 到 GET http:// serverA:8080/service/getId），或者可能会丢弃 Host 标头等。但是如果您在这里没有发现任何问题，请继续第2步。

2) 在 B 处使用wireshark，查看响应是否有效。查看 Content-Type 是否设置正确。如果设置正确，并且仍然受到操纵，请尝试添加标头 Cache-Control: no-transform。许多转码器尊重这一点。如果这也失败并且无法删除任何可能的转码器、病毒，您可能必须转到第 3 步。

3）只要去https，它对这些东西免疫。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-18T14:45:52.943

这是 Apache 的一项功能，旨在隐藏部分 HTTP 响应。我没有立即看到修复，现在也没有时间查看。稍后我会尝试编辑一个。

如果您想尝试找到它，这里是文档的链接：http: [//xianshield.org/guides/apache2.0guide.html](http://xianshield.org/guides/apache2.0guide.html)

使用 [Ctrl] + [F] 找到此语句（不带 qoutes）“配置和构建 Apache 服务器”

# ipad - 如何阻止我的自定义键盘在 iPad 上“浮动”或脱离

> ID：12837275
> 
> 赞同：17
> 
> 时间：2012-10-11T10:16:03.110
> 
> 标签：ipad, keyboard, uitextfield, inputview

我有一个自定义键盘，当我将 textField 的 inputView 设置为我的 KeyboardView 时，它会为某个 UITextField 显示。键盘工作得非常好，但很明显，如果用户之前取消了内置 Apple 键盘或确实拆分了它，键盘将“浮动”。

我已经搜索了好几个小时，以确保我的自定义键盘不会像这样运行，而是保持停靠在屏幕底部，无论用户之前是否取消了内置的 Apple 键盘。

```
self.keyboardInputView = [[[KeyboardInputViewController_iPad alloc]
                            initWithNibName:@"KeyboardInputViewController_iPad"
                            bundle:[NSBundle mainBundle]] autorelease];
self.keyboardInputView.delegate = self;                
self.keyboardInputView.keyboardTextField = myTextField;
myTextField.inputView = self.keyboardInputView.view;
[myTextField becomeFirstResponder]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-12T14:06:21.520

## 你不应该这样做，也没有办法这样做。

您不能使用自定义键盘覆盖用户设置，尤其是那些可以提高用户界面可访问性的设置。

您*可以*在教程中包含一个警告，即您的键盘在锁定到底部时效果最佳，但您必须问自己这个问题是否是好的用户体验。我会说后者。

# c# - 实现基于滴答/回合的战斗系统

> ID：12837276
> 
> 赞同：-2
> 
> 时间：2012-10-11T10:16:07.603
> 
> 标签：c#, xna

我想对如何实现基于刻度的系统提出一些想法。

玩家或非玩家执行的每个动作都有初始执行时间和冷却时间。一旦一个生物的冷却时间过去了，它就可以选择一个新的动作。如果玩家必须选择一个动作，游戏就会“暂停”。

例子：

1：玩家重击（50 刻执行，50 刻冷却）

2：游戏持续 50 刻。

3：NPC可以设置动作。

4：玩家挥动并冷却 50 刻。

5：NPC可以设置动作。

6：为玩家暂停游戏。

我目前拥有的工作但效率不高。我有一个类，每个动作都是静态方法。这些方法输出一个包含所有数据的结构。这将被传递给单个生物的动作提示。

如果玩家采取了行动，每个更新循环都会调用 cue 并开始倒计时攻击时间。一旦攻击被解决，我再次调用动作类中的静态方法。我开始倒计时冷却时间。

所以我应该拥有的可能是一个包含所有操作的列表，并对该列表进行排序，从而跳过不必要的时间/滴答声，然后直接进入下一个操作。但是会有不同类型的动作，比如移动、攻击、能力，我无法很好地实现这一点。

当一个生物进行基本攻击时，这被称为（攻击是生物自己的实例攻击结构）

```
attack = Actions.BasicAttack(this, player, rand); 
```

这就是 Actions 类的样子。

```
public struct Attack
    {
        public int Damage;
        public string Type;
        public int Time;
        public int Cooldown;
        public Creature target;
        public bool solved;
    }

    public static Attack BasicAttack(Creature attacker, Creature defender, Random rand)
    {
        Attack attack = new Attack();

        attack.Damage = rand.Next(attacker.MinBaseDmg, attacker.MaxBaseDmg + 1);
        attack.Type = "Melee";
        attack.Time = 50;
        attack.Cooldown = 30;
        attack.target = defender;
        attack.solved = false;

        return attack;
    } 
```

当玩家有动作提示时，它会在每个生物的更新方法中调用。如果玩家没有动作提示，Tick = 0，当玩家有动作提示时，Tick = 1。

```
protected void ActionCue(int tick)
    {
        if (attack.target != null)
        {
            if (attack.Time > 1)
            {
                Console.WriteLine(attack.Time);
                attack.Time -= tick;
                this.free = false;
            }
            else if (!attack.solved)
            {
                Actions.SolveAttack(attack.Damage, attack.Type, attack.target);
                attack.solved = true;
            }
            else if (attack.solved && attack.Cooldown > 1)
            {
                //Console.WriteLine(attack.Cooldown);
                attack.Cooldown -= tick;
            }
            else
                free = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:20:32.283

考虑这样的事情（我将使用伪代码 - 它远未优化等，但它可能足够快，或者让你开始优化你想要做的事情）

```
class CombatEventList
{
   public static AddEvent(CombatEvent event, int ticksTillHappens)   
}

virtual class CombatEvent
{
    public virtual void CombatAction()
}

class PlayerActionChoice : ComabtEvent
{
   public void CombatAction
   {
       var playerAction = GetUserDecision();//returns i.e CombatEvent PlayerMeeleAttack
       CombatEventList.AddEvent(playerAction, 0);
   }
}

class PlayerMeeleAttack : CombatEvent
{
   int cooldownInTicks = 50;

   public void CombatAction
   {
       MakeAttack()//damages the moster etc - all the stuff the attack is supposed to do
       var nextEvent = new PlayerActionChoice();
       CombatEventList.AddEvent(nextEvent, cooldownInTicks);
   }
} 
```

那么，这是如何工作的呢？

我们得到了一个事件列表。

该列表检查所有现在应该发生的事件，并执行它们的 CombatAction。

在他们的 CombatAction 中，事件将新事件添加到列表中。例如，PlayerMeeleAttack 事件在适当的冷却时间后设置 PlayerActionChoice 事件，以便他稍后可以采取另一个行动。

在所有当前的 CombatEvents 都被解决并将它们自己的 CombatEvents 添加到列表后，列表会检查下一个 Event（最低延迟）

该列表休眠指定数量的滴答声（下一个事件的延迟）。一旦完成睡眠，它将所有事件的冷却时间降低适当的量，并处理所有当前事件（那些刚刚达到 0 延迟的事件）

这是一个循环

该列表以 CombatStartEvent 开头，这将立即发生（延迟 0）。它在 CombatAction 方法中设置 PlayerActionChoice 和 MonsterActionChoice 事件。

当然，这远非最佳，它只是一个草图，或者一个供你思考的想法。可能有更好的想法，我没有过多考虑这个问题 - 但这显然比您当前的解决方案更有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:13:58.620

好的，几个小时后，我似乎得到了这个工作。这是任何需要它的人的代码。我也愿意接受反馈。

这是能力类，需要的东西都可以在这里添加。对于基于刻度的系统，时间变量很重要。

```
public string AbilityName { get; private set; }
    public int minDamage { get; private set; }
    public int maxDamage { get; private set; }

    public int ActivationTime { get; private set; }
    public int CooldownTime { get; private set; }
    public int Timer;

    public Ability(string AbilityName)
    {
        if (AbilityName == "attack")
        {
            this.AbilityName = AbilityName;
            minDamage = 10;
            maxDamage = 20;
            ActivationTime = 20;
            CooldownTime = 30;
            Timer = ActivationTime;

            iconPath = "ability/icon/attack";
        }
    } 
```

这是任务类，能力、攻击者和目标作为参数传递，能力名称或类型可用于执行不同种类/类型的能力，例如移动与攻击。

```
public Ability ability { get; private set; }
    public bool onCooldown;

    public Creature attacker { get; private set; }
    List<Creature> targets = new List<Creature>();

    /// <summary>
    /// Initiates a attack task
    /// </summary>
    /// <param name="attacker"></param>
    /// <param name="defender"></param>
    public Task(Creature attacker, List<Creature> targets, Ability ability)
    {
        this.ability = ability;
        this.attacker = attacker;
        this.targets = targets;

        onCooldown = false;
    }

    public void Perform()
    {
        //performce abilty
        Console.WriteLine(attacker.Name + " performce ability");
    } 
```

玩家或 AI 现在可以使用他们拥有的能力创建任务，如下所示：

```
targets.Add(player); //This is just a basic attack so only one "creature" gets in the list
                task = new Task(this, targets, abilityList[0]); //Task is created
                taskList.Add(task); //Task is added to a list i manage in a main class
                free = false; //creature is put on hold and cant do anything till task is completed 
```

这是大多数魔术发生的地方。在主类中，如果播放器不是“免费”的，则每次更新都会调用此方法。在对下一个任务执行任何操作之前，我会更新所有任务，因为我不想在更新其状态后编辑其统计信息。

```
private void TaskHandler()
    {
        int ticksToAdvance = 0;
        // get the next task requiring a action
        taskList.Sort((x, y) => x.ability.Timer.CompareTo(y.ability.Timer));

        //get the amount of cooldown left
        ticksToAdvance = taskList[0].ability.Timer;

        //Update all tasks
        foreach (Task t in taskList)
        {
            t.ability.Timer -= ticksToAdvance;
        }

        //check if this task is on cooldown
        if (taskList[0].onCooldown)
        {
            //Reset ability timer, free creature and remove task from the list.
            taskList[0].ability.Timer = taskList[0].ability.ActivationTime;
            taskList[0].attacker.free = true;
            taskList.RemoveAt(0);
        }
        else
        {
            //perform ability
            taskList[0].Perform();
            //set timer to cooldown
            taskList[0].onCooldown = true;
            taskList[0].ability.Timer = taskList[0].ability.CooldownTime;
        }
    } 
```

# php - 用一个项目保存多个类别

> ID：12837277
> 
> 赞同：3
> 
> 时间：2012-10-11T10:16:07.603
> 
> 标签：php, sql, database-design

我正在建立一个网站，您可以在其中添加具有多个类别的项目。

在一个字段中存储多个类别并仍然保持该字段可搜索的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T10:19:22.223

您不会在一个字段中存储多个类别，而是创建一个单独的表来为每个项目分配类别。与此类似：

```
-- create your table to store items/products
create table items
(
  id int,  -- this will be the PK
  name varchar(10)
);

insert into items values
(1, 'product1'),
(2, 'product2');

-- create your table to store categories
create table categories
(
  id int,  -- this will be the PK
  name varchar(50)
);

insert into categories values
(1, 'color'),
(3, 'material'),
(6, 'size');

-- create your join table to assign the categories to each item
-- this table will have a foreign key relationship to the items and categories table
create table items_categories
(
  item_id int,   -- both fields will be the PK
  category_id int
);

insert into items_categories values
(1,  1),
(2,  3),
(2,  6); 
```

然后，您将通过连接表来查询数据：

```
select i.id itemid,
  i.name item,
  c.name category
from items i
left join items_categories ic
  on i.id = ic.item_id
left join categories c
  on ic.category_id = c.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d4fc5/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:18:46.907

最好的方法是**不要**“在一个字段中存储多个类别”。

相反，为 ItemCategories 设置一个单独的表。

阅读有关[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)和内心消化的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:18:52.537

您可以构建一个关系表`item-category`，就像它只存储类别 ID 和项目 ID。然后您可以直接将您的搜索查询放在关系表上。确保它也有自己的主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:19:10.533

您不应该尝试将所有类别存储在一个字段中，这就是“关系表”的用途，您应该像这样构建表：

```
product_categories (
    `id` INT AUTO_INCREMENT,
    `product_id` INT NOT NULL,
    `category_id` INT NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY (`product_id`, `category_id`)
) 
```

通过这种方式，您还可以添加[`FOREIGN KEY`](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)哪些将负责更改、删除等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:20:22.587

在单个条目中存储单独的项目很少是一个好主意。

但是，如果您真的坚持这一点，那么最好将您可能存储为数组的类别序列化，例如使用`json_serialize`. 然后使用 sqls`LIKE`运算符搜索数据库。

# jsf - 动态资源包参考

> ID：12837281
> 
> 赞同：1
> 
> 时间：2012-10-11T10:16:10.653
> 
> 标签：jsf, internationalization, el, oracle-adf

我正在从托管 bean 中找到的集合中生成迭代器中的文本输入。

如何使用从该 bean 收到的资源包消息动态显示标签？

`<af:iterator id="i3" var="myVar" value="#{pageFlowScope.MyBean.myCollection}"> <af:inputText id="it4" label="#{myVar.name}" value="#{myVar.value}" />
</af:iterator>`

这里，`myVar.name`是一个字符串表示存在于包中的一个键，比如`button.label.field`或其他任何东西。

是否可以将此字符串作为参数传递给我的包引用？

像这样的东西：`label="#{myBundle[ #{myVar.name} ]}"`？

我尝试了在[这个线程](https://stackoverflow.com/questions/4852037/jsf-resourcebundle-key-concatenation)`c:set`中提出的`ui:param`类似建议，但它不起作用。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:37:44.030

一直傻，终于找到答案了……我的资源包是空的（删了又忘记补了）。

所以这是解决方案：

`<c:set var="nameKey" value="#{myVar.name}"/> <af:inputText id="it4" value="#{bc2Field.value}" label="#{helpdeskBundle[nameKey]}"/>`

# android - 通过蓝牙接收文件时的不同行为

> ID：12837282
> 
> 赞同：2
> 
> 时间：2012-10-10T09:54:49.047
> 
> 标签：android, bluetooth

我目前正在为 android 手机开发一个应用程序，它在 android 手机中使用[OBEX](http://en.wikipedia.org/wiki/OBject_EXchange)蓝牙服务中的 buildt。在我的三星 S3，android 版本 4.0.4 上，“工作流程”是这样的：

1.  手机 A 通过蓝牙向我的手机发送文件
2.  我的电话 B 会显示一个 AlertDialog，告诉我电话 A 想要将一些文件传输到我的手机
3.  我在这个 AlertDialog 上点击了接受，然后传输开始了。

**另一方面，如果我用三星 Nexus S、android 4.1 版进行测试，“工作流程”是这样的：**

1.  手机 A 通过蓝牙向我的手机发送文件
2.  我的电话 B 会吐司一条短信，告诉我有一个传入的文件
3.  现在我必须向下拖动通知栏以接受传入的文件

无论如何我可以改变这种行为吗？让AlertDialog，在第一种情况下解释总是出现，而不用向下拖动通知栏？

这是供应商问题，还是安卓版本问题？

是否可以始终接受来自配对设备的传入文件，而无需植根手机？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:18:30.403

这可能是供应商问题，因为不同的供应商对 OPP(Obex) 用例进行了定制，请查看文件 BluetoothOppIncomingFileConfirmActivity.java 或 platform/packages/apps/Bluetooth/src/com/android/bluetooth/opp/ 中的其他文件

# php - 当id是php变量时如何getElementByID（）？

> ID：12837287
> 
> 赞同：1
> 
> 时间：2012-10-11T10:16:58.693
> 
> 标签：php, javascript, getelementbyid

例如：

```
<?php  foreach($something as $anotherthing){  ?>
    <span id="<?php echo $product_id; ?>"><?php echo $price; ?></span>

    <?php if($option == 'select') { ?>
    <select name="joe" id="<?php echo $select_id; ?>" > ...... 
```

我不知道如何将 id 放入 javascript。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T10:18:10.980

HTML 是文本。JavaScript 是文本。所以 - 以同样的方式。

```
getElementById('<?php echo $product_id; ?>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:19:03.520

与 HTML 中的方式相同：

```
document.getElementByID('<?php echo $id?>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:17:55.500

建议，使用`$_SESSION`或将变量放入始终具有相同名称的隐藏输入字段中，然后您可以从那里获取值并将其用作 ID :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T10:22:50.133

假设您使用类似于`product-N`或`product[N]`如果您只需要页面上的所有产品的语法：

```
document.querySelectorAll('[id^=product]'); 
```

如果您只想要其中一个，则只能在第一个匹配项`[0]`之前使用`;`

# asp.net-mvc-3 - 在同一视图中更新多个项目

> ID：12837288
> 
> 赞同：3
> 
> 时间：2012-10-11T10:17:09.793
> 
> 标签：asp.net-mvc-3

我正在尝试制作一个股票盘点应用程序，我的视图使用一个编辑器加载我的所有股票。我的控制器没有从视图中获取任何数据？

我希望能够同时编辑我所有的股票？我怎样才能做到这一点

型号代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace FlatSystem.Models
{
public class Stock
{
    public int ID { get; set; }
    public string Item_Name { get; set; }
    public int Actual_Stock { get; set; }
    public int Wanted_Stock { get; set; }

}
} 
```

查看代码

```
@model IEnumerable<FlatSystem.Models.Stock>

@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
<div class="sidemenu">
<div class="sidemenu-heading">
    ReStock
</div>
<div class="div-body">
<table>
<tr>
    <th>
        Item Name
    </th>
    <th>
        Wanted Stock
    </th>
    <th>
        Stock On Hand
    </th>
    <th></th>
</tr>
@foreach (var item in Model)
{
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Item_Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Wanted_Stock)
    </td>
    <td>
    <div class="editor-field">
        @Html.EditorFor(modelItem => item.Actual_Stock)
        @Html.ValidationMessageFor(modelItem => item.Actual_Stock)
    </div>
    </td>
    @Html.HiddenFor(modelItem => item.ID)
    </tr>
    }
    </table>
    </div>
    </div>
<input type="submit" value="Submit" />
} 
```

控制器代码

```
 [HttpPost]
    public ActionResult ReStock(List<Stock> stock)
    {
        foreach (var item in stock)
        {
            if (ModelState.IsValid)
            {
                GR.InsertOrUpdate(item);
            }
        }
        GR.Save();
        return RedirectToAction("Restock");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:37:58.710

没有模型类很难回答您的问题，但想法是您的编辑`inputs`必须包含`name attribute`.

像这样的东西：

```
@for(int i = 0: i < Model.Count(); i++)
{
    <tr>
    <td>
        @Html.DisplayFor(modelItem => Model[i].Item_Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => Model[i].Wanted_Stock)
    </td>
    <td>
    <div class="editor-field">
        @Html.EditorFor(modelItem => Model[i].Actual_Stock)
        @Html.ValidationMessageFor(modelItem => Model[i].Actual_Stock)
    </div>
    </td>
    @Html.HiddenFor(modelItem => Model[i].ID)
    </tr>
} 
```

**添加：**

抱歉，感谢**Darin Dimitrov**，您无法`IEnumerable`按索引访问，使用`List`或`Array`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:09:06.567

您可以使用编辑器模板。我建议您首先阅读[以下文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，以了解您的代码未正确绑定集合的原因。一旦您了解您可以执行以下操作：

```
@model IEnumerable<FlatSystem.Models.Stock>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <div class="sidemenu">
        <div class="sidemenu-heading">
            ReStock
        </div>
        <div class="div-body">
            <table>
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Wanted Stock</th>
                        <th>Stock On Hand</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @Html.EditorForModel()
                </tbody>
        </div>
    </div>
    <input type="submit" value="Submit" />
} 
```

现在为`Stock`将自动为集合的每个元素呈现的类型定义一个自定义编辑器模板 ( `~/Views/Shared/EditorTemplates/Stock.cshtml`) - 编辑器模板的名称和位置很重要，因为它按约定工作：

```
@model FlatSystem.Models.Stock
<tr>
    <td>
        @Html.DisplayFor(x => x.Item_Name)
    </td>
    <td>
        @Html.DisplayFor(x => x.Wanted_Stock)
    </td>
    <td>
    <div class="editor-field">
        @Html.EditorFor(x => x.Actual_Stock)
        @Html.ValidationMessageFor(x => x.Actual_Stock)
    </div>
    </td>
    @Html.HiddenFor(x => x.ID)
</tr> 
```

备注：您可能还希望在编辑器模板中包含`Wanted_Stock`和`Item_Name`作为隐藏字段`ID`，以便将它们的值发送到服务器，因为您没有对应的输入字段。

# python - 不会添加 id3 标签

> ID：12837292
> 
> 赞同：1
> 
> 时间：2012-10-11T10:17:31.563
> 
> 标签：python, mp3, id3, mutagen

我使用这个功能：

```
def set_trackno(f, track):
    """Set id3 track number"""
    audio = MP3(f)
    audio["TRCK"] = TRCK(encoding=3, text=[unicode(track)])
    audio.save() 
```

尝试在缺少它的文件上设置 id3 标签。它不会抛出异常。但它根本不起作用。这是为什么？这是一个示例输出：

```
In [1]: %paste
def set_trackno(f, track):
    """Set id3 track number"""
    audio = MP3(f)
    audio["TRCK"] = TRCK(encoding=3, text=[unicode(track)])
    audio.save()
## -- End pasted text --

In [2]: from mutagen.mp3 import MP3

In [3]: from mutagen.id3 import TRCK

In [4]: set_trackno('/home/nine/Musik/Kristet/Buster Inc/Buster_Inc.-Summertime.mp3', 1)

In [5]: exit
nine@nine-laptop:~/Musik/Kristet/Buster Inc$ id3v2 -l Buster_Inc.-Summertime.mp3 
Buster_Inc.-Summertime.mp3: No ID3 tag
nine@nine-laptop:~/Musik/Kristet/Buster Inc$ 
```

### 更新 1

我把函数改成了这个（见代码的最后一行）：

```
def set_trackno(f, track):
    """Set id3 track number"""
    audio = MP3(f)
    audio["TRCK"] = TRCK(encoding=3, text=unicode(track))
    audio.tags.save(v1=2) 
```

现在它写入 id3 版本 1（这似乎很明显）。但我不知道如何编写第 2 版。`audio.tags.save()`不会...

# perl - 将 perl 脚本的调试跟踪重定向到文件

> ID：12837295
> 
> 赞同：2
> 
> 时间：2012-10-11T10:17:39.513
> 
> 标签：perl, debugging, perl-module

例如：perl -d:Trace testScript.pl > output.log

问：1 跟踪未重定向到 output.log 文件。如何重定向跟踪。

Q:2 是否可以只跟踪脚本，因为它进入脚本中使用的模块。我们可以只追踪一个或两个级别吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:34:14.577

A:1 跟踪默认重定向到 stderr 流。要登录到 stderr（通常在 Linux 中），请执行以下操作：

```
perl -d:Trace testScript.pl &2> output.log 
```

&2 等于标准错误，&1 是标准输出（即 printf 调试），两者都只是 &

我不确定A：2。

# java - Java 中的 HeadlessException - ImageJ

> ID：12837296
> 
> 赞同：1
> 
> 时间：2012-10-11T10:17:41.163
> 
> 标签：java, exception-handling, headless, imagej

我在 ImageJ 中编写了一个宏来在 JPEG 图像文件列表上运行“测量”。我正在使用 headless.jar 以无头模式在远程 linux 机器上运行代码。

我得到以下异常 -

```
> java.awt.HeadlessException:  No X11 DISPLAY variable was set, but this
> program performed an operation which requires it.
>         at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
>         at java.awt.Window.<init>(Window.java:433)
>         at java.awt.Frame.<init>(Frame.java:403)
>         at ij.plugin.frame.PlugInFrame.<init>(PlugInFrame.java:13)
>         at ij.plugin.frame.Editor.<init>(Editor.java:89)
>         at ij.plugin.frame.Editor.<init>(Editor.java:85)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
>         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
>         at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
>         at java.lang.Class.newInstance0(Class.java:355)
>         at java.lang.Class.newInstance(Class.java:308)
>         at ij.IJ.runPlugIn(IJ.java:156)
>         at ij.IJ.runPlugIn(IJ.java:141)
>         at ij.io.Opener.open(Opener.java:172)
>         at ij.IJ.open(IJ.java:1505)
>         at ij.macro.Functions.open(Functions.java:2325)
>         at ij.macro.Functions.doFunction(Functions.java:141) 
```

我该如何覆盖这个？有没有办法阻止 ImageJ 打开图形环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:45:03.620

不是 ImageJ 专家，但看起来 IJ 插件之一正在创建它的用户界面，尽管整个事情都处于无头模式（所以问题不是来自 IJ 本身）。查找和修补插件以在无头模式下正确运行可能会很麻烦。

有一个解决方案适用于任何坚持打开 UI 的应用程序，但可以通过宏来使用：提供虚拟帧缓冲区（使用`xvfb`）并使其成为应用程序使用的显示。

只要没有阻止用户输入，这应该可以工作。这是使用 ImageJ 执行此操作的[更多信息](http://fiji.sc/wiki/index.php/Headless#Xvfb)。它适用于斐济，一个衍生项目，但它显示了一个可能的解决方案，`xvfb`它也应该适用于 IJ 本身。

# excel - 如何将行从一个 Excel 工作表复制到另一个工作表并使用 VBA 创建重复项？

> ID：12837297
> 
> 赞同：2
> 
> 时间：2012-10-11T10:17:42.133
> 
> 标签：excel, vba

我有一个带有两张工作表的 Excel 工作簿：sheet1 在 A 到 R 列中有一个大数据表，在第 1 行有标题。 Sheet2 在 A 到 AO 列中有数据。

使用 VBA 我试图从 sheet1 复制行并将它们粘贴到 sheet2 的末尾。此外，我只需要将 A 列复制到 R，而不是整行。

换句话说，需要将 sheet1 中的单元格 A2:R2 复制到 A 列中没有数据的第一行和第二行。

我有以下代码从 sheet1 复制所需的单元格，但我无法弄清楚如何将每一行复制两次：

```
Sub example()
    For Each ce In Range("A2:A" & Cells(Rows.Count, 1).End(xlUp).Row)
        If Not IsEmpty(ce) Then
            Sheets("sheet2").Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).Resize(1, 18).Value = Range(ce, ce.Offset(0, 17)).Value
        End If
    Next ce
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:35:05.937

试试这个：

```
Option Explicit
Sub CopyRows()
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim i As Integer, k As Integer
    Dim ws1LR As Long, ws2LR As Long

    Set ws1 = Sheets("Sheet1")
    Set ws2 = Sheets("Sheet2")

    ws1LR = ws1.Range("A" & Rows.Count).End(xlUp).Row + 1
    ws2LR = ws2.Range("A" & Rows.Count).End(xlUp).Row + 1

    i = 2
    k = ws2LR
    Do Until i = ws1LR
        With ws1
            .Range(.Cells(i, 1), .Cells(i, 18)).Copy
        End With

        With ws2
            .Cells(k, 1).PasteSpecial
            .Cells(k, 1).Offset(1, 0).PasteSpecial
        End With

        k = k + 2
        i = i + 1
    Loop
End Sub 
```

更改`Sheet1`，`Sheet2`如果它们在您的工作簿中被称为不同的东西。

# jstree - 在 JSTREE 中也选择了父节点时选择子节点

> ID：12837299
> 
> 赞同：3
> 
> 时间：2012-10-11T10:17:51.337
> 
> 标签：jstree

我在选择父节点时选择子节点时遇到困难，也想打开子文件夹并选择所有子节点（不确定我是否清楚）所以我知道如何通过以下方式获取所有子节点：

```
selected_nodes = $("#demo").jstree("get_selected", null, true); 
var tree = jQuery.jstree._reference('#demo'); 
var children = tree._get_children(selected_nodes); 
```

## 
但并没有真正选择或打开子文件夹和节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-24T12:17:12.370

这可能不是 OP 想要的，而是在 JSTree 3.3 上。我用它来打开选定父节点下的所有节点。

```
$(treeContainer).bind("select_node.jstree", function (e, data) {
            return data.instance.open_all(data.node);
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:20:40.180

我放弃了这个想法..现在我只是做ajax请求来加载孩子并接收一个json对象，从那里我可以看到它是否是一个文件或目录，如果它是一个目录又是另一个请求，就像这样我有整体结构

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:22:12.677

您必须打开 two_state 复选框以允许独立选择父节点和子节点。下面我为复选框插件配置了“two_state”参数：

```
$("#docTree").jstree({
    "themes": {
        "theme": "classic",
        "url": "jstree/themes/classic/style.css"
    },
    "plugins": ["themes", "ui", "checkbox", "json_data"],
    "checkbox": { "two_state" : true }
}) 
```

在此处查看文档：http: [//www.jstree.com/documentation/checkbox](http://www.jstree.com/documentation/checkbox)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-31T14:18:52.873

如果我正确理解这一点，您希望在选择其父级（文件夹）之一时选择 jsTree（文件）中的所有最低后代。

不幸的是，我还没有找到比下面的方法更直接的方法。我正在使用 jsTree 3.1.1 并设法使用以下方法解决了这个问题：

```
var $demo = $("#demo");
var nodes =  $demo.jstree("get_top_selected", true);

//Selects all of the children of each selected node including folders
if(nodes.length > 0){
    nodes.forEach(function(node, i){
        $demo.jstree("select_node", node.children_d, true, false);
    });
}

var fileNodes = $demo.jstree("get_bottom_selected", false);

//We now need to deselect everything and only select the file nodes
$demo.jstree("deselect_all", true);
$demo.jstree("select_node", fileNodes, true, false); 
```

上面的代码允许用户“选择”多个文件夹并选择这些文件。

带有函数值的参数`true`返回`"get_top_selected"`完整节点，而不仅仅是 ID。这使您可以访问节点的子节点。

函数`"select_node"`接受三个参数。第一个是要选择的节点（在这种情况下是当前父节点的后代）。如果第二个参数设置为 true，它会阻止`changed.jstree`为每个选定节点触发事件。第三个参数`false`设置为`true`防止子文件夹打开的设置。

`"get_bottom_selected"`如果一个节点都被选中**并且**它本身没有任何子节点，则该函数仅返回一个节点。由于我们现在只对节点 ID 感兴趣，我们可以传递参数 false（或完全省略它）。

再次将参数传递`true`给函数`"deselect_all"`可防止`changed.jstree`事件触发。

如果您想查看 jsTree API 文档，您可以在[此处](https://www.jstree.com/api/#/?q=select)找到它们。该列表被过滤为仅包括选择函数和事件。可以在[此处](https://www.jstree.com/api/)找到 API 的完整列表。

我希望这会有所帮助，但如果您需要对任何代码进行进一步说明，请告诉我^_^

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T07:04:28.213

```
select all child nodes when parent selected ,
         $(data.rslt.obj).find("li").each( function( idx, listItem ) {
             var child = $(listItem); // child object
             $.jstree._reference("#associateRightHandTree").check_node(child);
         });

unselect all child nodes when parent unselected ,
        $(data.rslt.obj).find("li").each( function( idx, listItem ) {
            var child = $(listItem); // child object
            $.jstree._reference("#associateRightHandTree").uncheck_node(child);
        }); 
```

# reflection - 获取有关解决方案中存在的程序集的信息

> ID：12837301
> 
> 赞同：0
> 
> 时间：2012-10-11T10:17:59.497
> 
> 标签：reflection, assembly-loading

场景：我想在运行时加载解决方案中存在的程序集。

belo 代码将不起作用，因为它不存在于当前应用程序域中。

```
Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies(); 
```

此外，如果我将在引用的程序集中搜索，那么也找不到它，因为它没有被引用。所以下面的代码也不起作用：

```
public static IEnumerable<Assembly> GetAssemblies()
    {
        var list = new List<string>();
        var stack = new Stack<Assembly>();

        stack.Push(Assembly.GetEntryAssembly());

        do
        {
            var asm = stack.Pop();

            yield return asm;

            foreach (var reference in asm.GetReferencedAssemblies())
                if (!list.Contains(reference.FullName))
                {
                    stack.Push(Assembly.Load(reference));
                    list.Add(reference.FullName);
                }

        }
        while (stack.Count > 0);

    } 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:20:20.590

[Sign your assembly](http://msdn.microsoft.com/en-us/library/ms247123%28v=vs.110%29.aspx), then in your app.config, specify the [fully qualified assembly name](http://msdn.microsoft.com/en-us/library/k8xx4k69.aspx). Call [Assembly.Load(string)](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx), passing the assembly name from your app.config.

NOTE: The assembly you are attempting to load must be in a location where the runtime can find it. Your best bet is either to put it into the [Global Assembly Cache](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.110%29.aspx), or make sure it is in the same folder as your executing assembly.

# java - Java字符串数组与枚举比较

> ID：12837303
> 
> 赞同：1
> 
> 时间：2012-10-11T10:18:02.820
> 
> 标签：java, enums

给定以下代码...

```
private enum EventTypes {
    WORK, BREAK, WAIT, CLOSE, COMPLETE
}

public static void main(String[] args) {
    System.out.println("BREAK : " + EventTypes.BREAK);
    System.out.println(Arrays.asList(EventTypes.values()).contains("WORK"));
    System.out.println(Arrays.asList(EventTypes.values()).contains("WOR"));

} 
```

这会产生输出......

```
BREAK : BREAK
false
false 
```

现在，从输出中我可以看到“BREAK”作为字符串存在 - 那么为什么它认为上述枚举中不存在“WORK”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:18:42.837

枚举值不是字符串。做这个 ：

```
Arrays.asList(EventTypes.values()).contains(EventTypes.WORK)); 
```

如果您想知道您的字符串是否是枚举值的名称，请执行

```
boolean exist = false;
try {
    EventTypes.valueOf("WORK");
    exist = true; 
} catch (IllegalArgumentException e) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:22:06.813

您可以删除引号，但如果不能，您可以解析字符串。

```
Arrays.asList(EventTypes.values()).contains(EventTypes.valueOf("WORK")) 
```

* * *

一个脆弱但简单的方法是比较字符串

```
Arrays.toString(EventTypes.values()).contains("WORK") 
```

后者可能适用于单元测试，但不适用于生产代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:28:35.050

您可以添加自定义实现`contains`

```
private enum EventTypes {
    WORK, BREAK, WAIT, CLOSE, COMPLETE;

    public static boolean contains(String str) {
        for (EventTypes enumtype : values()) {
            if (enumtype.name().contains(str))
                return true;
        }
        return false;
    }
} 
```

然后你可以像下面这样使用它。

```
 System.out.println(EventTypes.contains("WORK"));
    System.out.println(EventTypes.contains("WOR")); 
```

请记住枚举是常量，我不知道这样做会取得什么成果。[您可以在Enum Types](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)上阅读有关枚举的更多信息

正确用法是

```
EventTypes enumType =EventTypes.valueOf("WORK"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:25:48.387

试试这个方法......

```
enum EventTypes {
    WORK, BREAK, WAIT, CLOSE, COMPLETE
};

public class T {

    public static void main(String[] args) {

        for(EventTypes e : EventTypes.values()){

            if(e.name().equals("WORK")){

                System.out.println("True");
            }else{

                System.out.println("False");
            }
        }
    }
} 
```

# c# - 电子令牌证书的签名和验证

> ID：12837304
> 
> 赞同：3
> 
> 时间：2012-10-11T10:18:02.490
> 
> 标签：c#, token, sign, pki, verify

我如何从存储在 C# 令牌中的数字证书中签名和验证任何消息？我已经对电子令牌证书进行了加密和解密。但没有找到任何签名和验证的解决方案。如果有人知道请回复，因为我已经尝试了很长时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:22:10.723

您可以使用 eToken 提供的 pkcs11 DLL 并使用 C# 在其上编写一个包装器。您可以查看此[链接](https://stackoverflow.com/questions/1791602/how-to-start-coding-in-c-sharp-for-etoken)这可能无法解决您的问题，但这可以帮助您解决问题

# c# - 跨线程操作无效（如何从另一个模块事件访问 WinForm 元素？）

> ID：12837305
> 
> 赞同：16
> 
> 时间：2012-10-11T10:18:03.560
> 
> 标签：c#, .net, winforms, thread-safety

我有一个带有串行端口信号事件的模块

```
serialPort.DataReceived.AddHandler(SerialDataReceivedEventHandler(DataReceived)); 
```

DataReceived 在哪里

```
let DataReceived a b =
    rxstring <- serialPort.ReadExisting()
    arrayRead <- System.Text.Encoding.UTF8.GetBytes(rxstring)
    if arrayRead.[0] = 0x0Auy then
        ProcessData(a, null) 
```

并且 ProcessData 正在调用 WinForms 方法

```
let ProcessData(a, b) =
    dataProcessor.Invoke(a, b) |> ignore 
```

这是

```
private void ProcessData(object sender, EventArgs e) {
   byte[] m = Core.ncon.ArrayRead;
   switch (m[1]) {
      case 0x01: {
          if (m.Length > 5) {
             int myval = BitConverter.ToInt32(m, 3);
             textBox1.Text += " val: " + myval.ToString() + " "; 
```

但是当它试图访问 textBox1 我得到：

**跨线程操作无效：控件“textBox1”从创建它的线程以外的线程访问。**

所以问题是如何从另一个模块事件中访问 WinForm 元素？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-11T10:23:43.560

您需要使用表单调度程序。

```
FormContaingTheTextbox.Invoke(new MethodInvoker(delegate(){
    textBox1.Text += " val: " + myval.ToString() + " ";
})); 
```

这使得该代码在表单线程而不是您的线程中运行。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-11T10:23:47.733

尝试使用以下代码：

```
this.Invoke(new MethodInvoker(delegate() 
{ 
//Access your controls
})); 
```

希望这可以帮助

# php - ajax调用事件日历

> ID：12837306
> 
> 赞同：0
> 
> 时间：2012-10-11T10:18:06.970
> 
> 标签：php, ajax

我正在处理事件日历。我想在日历中单击特定日期时从数据库中检索事件。我还需要突出显示具有事件信息的数据。请帮我编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:01:54.797

看看[这个事件日历](http://www.webappers.com/2010/06/08/wdcalendar-jquery-based-google-calendar-clone/)，可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:27:42.553

在点击日期做 ajax 调用

```
var date = $('#dateid').val();
    $.ajax({
                        type: 'POST',
                        url: url,       
                        data: 'date=date ',
                        success:function(msg)
                        {       
                           //here you can play whatever you want

                        }
                    }); 
```

在你的 php 文件中

获取日期`$_POST['date']`并编写查询并返回日期，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:29:50.273

当您已经拥有可用资源时，您可以尝试使用**Easy PHP Calendar而不是编写整个代码。**

[http://www.easyphpcalendar.com/demoStandard7.php](http://www.easyphpcalendar.com/demoStandard7.php)

如需**免费版本**，请尝试[Calendarix](http://www.calendarix.com/download_basic.php)或[WebCalendar](http://webcalendar.sourceforge.net/demo/month.php)

# proxy - 如何将代理与 DotNetOpenAuth.ApplicationBlock 中的 TwitterConsumer 类一起使用

> ID：12837307
> 
> 赞同：1
> 
> 时间：2012-10-11T10:18:10.143
> 
> 标签：proxy, dotnetopenauth, application-blocks

我目前正在使用 DotNetOpenAuth 实现 SSO。但是，在本地工作时，我需要通过代理发送请求。我很高兴以编程方式或通过配置设置执行此操作，但我很难找到将其添加到应用程序块中提供的 TwitterConsumer 类的位置。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:54:25.933

因此，最简单的方法可能是[在您的 .config 文件中设置代理，](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)或者以编程方式使用[WebRequest.DefaultWebProxy](http://msdn.microsoft.com/en-us/library/system.net.webrequest.defaultwebproxy.aspx)。

`HttpWebRequest`或者，只需像任何其他 .NET 请求一样在对象上设置代理属性。对于那些您看不到的请求对象，因为 DotNetOpenAuth 会自动创建和发出它们，您可以实现`IDirectWebRequestHandler`并将其传递给 DNOA，以便拦截每个传出的 HttpWebRequest，但考虑到您的其他选项，这相当困难并且可能没有必要。

# .net - 如何使用 LibGit2Sharp 获取当前/活动分支？

> ID：12837311
> 
> 赞同：20
> 
> 时间：2012-10-11T10:18:13.513
> 
> 标签：.net, git, libgit2sharp

所以使用 LibGit2Sharp [https://github.com/libgit2/libgit2sharp](https://github.com/libgit2/libgit2sharp)你可以像这样穿过分支

```
using (var repo = new Repository(@"path to .git"))
{
    foreach (var branch in repo.Branches)
    {
        Debug.WriteLine(branch.Name);   
    }
} 
```

但是我如何获得当前/活动分支？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-11T10:37:22.350

`Branch.IsCurrentRepositoryHead`应该做的伎俩。

`Repository.Head`如果您不想遍历分支，我认为也会做同样的事情......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-19T11:44:35.227

我认为，与其遍历分支并检查每个分支是否是当前头，最简单的方法是直接从存储库头中获取分支名称：

```
using (var repo = new Repository(@"path to .git"))
{
    var currentBranchName = repo.Head.FriendlyName;
} 
```

然后，您可以通过以下方式获取分支本身

```
repo.Branches[currentBranchName] 
```

# php - 时间跨度中的mysql时间跨度

> ID：12837312
> 
> 赞同：0
> 
> 时间：2012-10-11T10:18:18.717
> 
> 标签：php, mysql

我有一个带有列的 mysql 表`from_date`和`to_date`.

我还在 PHP 中获得了第二个时间跨度，由`$monday`和组成`$friday`。

`$monday`现在我想从我的表中选择所有条目，其时间跨度至少包括介于和之间的一天`$friday`。

我首先想到了这样的事情：

```
WHERE `from_date` >= :monday
AND `to_date` <= :friday 
```

但这不包括`from_date`小于`:monday`或`to_date`大于的条目`:friday`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:20:51.957

我认为您想选择在范围结束之前开始并在范围开始之后结束的记录：

```
WHERE from_date <= :friday AND to_date >= :monday 
```

# visual-studio-2010 - 如何在 WebTest VS2010 中绑定提取的参数

> ID：12837314
> 
> 赞同：1
> 
> 时间：2012-10-11T10:18:26.157
> 
> 标签：visual-studio-2010, testing, webtest

我正在使用 VS2010 WebTest 依次调用 WCF 操作列表。

第一个调用是从服务器获取会话令牌。该令牌必须作为请求元素传递给所有后续调用。我已将其提取`token`并存储`Context`为`MyToken`.

![在此处输入图像描述](../Images/d24e4d714d1db0187166c1235bcf3780.png)

我需要您的帮助来了解如何绑定`MyToken`到后续`xml requests`.

有没有类似`<%# %>`的指令。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:30:40.700

经过一番搜索，我发现我们可以使用双花括号来绑定`Context Parameters`请求 Xmls 的字符串正文。如下 -

```
{{MyToken}} 
```

`XML Requests`Visual Studio在运行时用值动态替换这些标记。

# matlab - 从 MATLAB 调用 C++ 文件

> ID：12837316
> 
> 赞同：1
> 
> 时间：2012-10-11T10:18:33.643
> 
> 标签：matlab

我有一个实现形状上下文描述符的文件夹，它包含`.m`文件和`.cpp`文件。当某个`.m`文件调用一个`.cpp`文件时，MATLAB 会产生：`??? Undefined function or method ‹The functions' name› for input arguments of type ‹double›.`尽管我在路径中有所有内容。

我是否需要安装一些特殊的东西才能让 MATLAB 识别这个文件？

-谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:53:48.867

我找到了解决方案。在 64 位操作系统上运行时，matlab 无法读取`.dll`文件。我输入`mex FileName.cpp`了所有`.cpp`文件，它创建`.mexw64`了解决问题的文件。

再次感谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:26:21.253

查看本手册：[创建 C/C++ 和 Fortran MEX 文件](http://www.mathworks.com/help/matlab/creating-c-c-and-fortran-programs-to-be-callable-from-matlab-mex-files.html)

# jquery - Twitter 状态 API 突然返回错误“34”

> ID：12837319
> 
> 赞同：2
> 
> 时间：2012-10-11T10:18:41.757
> 
> 标签：jquery, twitter

我有一个脚本，可以从我的提要中获取前 3 条推文。这工作得很好，但现在它在 JSON 中返回以下错误：

```
{"errors":[{"message":"Sorry, that page does not exist","code":34}]} 
```

Twitter 将此描述为经典的 404 未找到错误，但我没有看到 Twitter 网站上的 API 状态有任何中断。

我们现在获取推文的方式是否发生了变化？

我的代码：

```
$.getJSON('http://twitter.com/statuses/user_timeline.json?screen_name=' + user + '&count=3&include_rts=true&callback=?', function(data) { }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T10:22:39.883

您使用了错误的链接，[https://api.twitter.com/1/statuses/user_timeline/jbrooksuk.json](https://api.twitter.com/1/statuses/user_timeline/jbrooksuk.json)

试试这个：

```
$.getJSON('http://api.twitter.com/1/statuses/user_timeline/' + user + '.json?count=3&include_rts=true&callback=?', function(data) { }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T15:16:48.353

我还发现我的 Twitter 提要今天停止工作。RSS 提要的链接也是同样的问题。

这是昨天工作的：

```
'http://twitter.com/statuses/user_timeline.rss?screen_name='.$screenName.'&count='.$limit; 
```

但现在 URL 必须是：

```
'http://api.twitter.com/1/statuses/user_timeline.rss?screen_name='.$screenName.'&count='.$limit; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T20:21:37.463

«*如果您使用任何类型的“未版本化”端点，则需要移至版本化端点。API 的第 1 版在 2013 年 3 月之前仍然有效。它是 API 的“第 0 版”，现在终于被删除了*。»

[https://dev.twitter.com/discussions/10803](https://dev.twitter.com/discussions/10803)

[https://dev.twitter.com/discussions/11551](https://dev.twitter.com/discussions/11551)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T14:55:39.040

同样的事情无缘无故地发生在我身上。没有什么比回到一些未触及的代码只是让它坏了。+1 的答案。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T15:36:07.130

谢谢詹姆斯！这不仅节省了一天，而且节省了更多！

我已经实现了[https://api.twitter.com/1.1/statuses/](https://api.twitter.com/1.1/statuses/)
所以 2013 年 3 月的更新已经到位。

文森特

YEL - 你的情绪直播

# c# - 想要在 ASP.Net 中单击缩略图时显示大图像

> ID：12837325
> 
> 赞同：1
> 
> 时间：2012-10-11T10:18:54.053
> 
> 标签：c#, asp.net

```
 ASP Code is!
    <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="newappexample._Default" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <title>Photo Gallery</title>
            <style type="text/css">
            .black_overlay{
                display: none;
                position: absolute;
                top: 0%;
                left: 0%;
                width: 100%;
                height: 100%;
                background-color: black;
                z-index:1001;
                -moz-opacity: 0.8;
            }
            .white_content {
                display: none;
                position: absolute;
                top: 25%;
                left: 25%;
                width: 50%;
                height: 50%;
                padding: 16px;
                border: 16px solid orange;
                background-color: white;
                z-index:1002;
                overflow: auto;
            }
                    div.center
            {
                margin-left: 20%;
                margin-right: 20%;
                width: 770px;
                background-color:#FFF;
            }
            div.middle
            {
                background-image:url('images/center.jpg');
                background-repeat: repeat-y;
                min-height:200px;
                margin-left: 100px;
                margin-right: 100px;
                margin-top:0px;
                padding-top:0px;
            }
        </style>        
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
    <asp:Panel ID="panelIDtb" BorderColor="Red" BorderStyle="Solid" BackColor="GrayText" BorderWidth="1px" Width="1000px" ScrollBars="Auto" runat="server" Height="130px">
        <asp:Repeater
            id="RepeaterImage"
            runat="server">
            <ItemTemplate>
                <asp:ImageButton id="Image1" Width="100px" Height="100px" OnClientClick="" OnClick="ImageButOnClick"
                    ImageUrl='<%# Container.DataItem %>' Runat="server" />
            </ItemTemplate>
        </asp:Repeater>
        </asp:Panel>
        <div class="middle">
        <asp:Panel ID="PanelBigImage" BorderStyle="Dotted" BackColor="AntiqueWhite" BorderWidth="2px" runat="server" Width="800px" Height="700px">

        </asp:Panel>
        </div>
        </div>
             </form>
    </body>
    </html>

and My C Sharp code behind is!

using System;
using System.Collections;
using System.Drawing;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.IO;
using System.Collections.Generic;

namespace newappexample
{
    public partial class _Default : System.Web.UI.Page
    {
        void Page_Load()
        {
            if (!Page.IsPostBack)
            {
                RepeaterImage.DataSource = GetPhotos();
                RepeaterImage.DataBind();
            }
        }

        public List<String> GetPhotos()
        {
            List<string> photos = new List<string>();
            string photoPath = MapPath("~/myimages/images_tn");
            string[] files = Directory.GetFiles(photoPath);
            foreach (string photo in files)
                photos.Add("~/myimages/images_tn/" + Path.GetFileName(photo));
            return photos;
        }
        public void ImageButOnClick(object sender, EventArgs e)
        {
           // var newP = "Changing Some Paragraph";
           // PanelBigImage.Visible = "";
        }
    }
} 
```

缩略图图像正在显示。当我单击缩略图时，我想预览与该缩略图相关的大图像。我怎样才能做到这一点？？这个任务对我来说是新的，我也是一个初学者。我用谷歌搜索了很多，但我没有做出决定，以前我没有使用任何 JQuery 或 javascript 之类的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:25:25.367

尝试使用 jquery 之类的[Lightbox 。](http://lokeshdhakar.com/projects/lightbox2/)易于配置和使用，并带来一些额外的效果。

灯箱网站上记录了如何在您的项目和页面中包含灯箱。

更新您的面板标记，如下所示：

```
<asp:Panel ID="panelIDtb" BorderColor="Red" BorderStyle="Solid" BackColor="GrayText" BorderWidth="1px" Width="1000px" ScrollBars="Auto" runat="server" Height="130px">
   <asp:Repeater id="RepeaterImage" runat="server">
      <ItemTemplate>
         <div>
            <a href="<%# Container.DataItem %>" rel="lightbox[imgs]"><img src='<%# Container.DataItem %>' /></a>
         </div>
      </ItemTemplate>
   </asp:Repeater>
</asp:Panel> 
```

# c++ - 为什么通用参考的参数需要在使用之前进行转换？

> ID：12837327
> 
> 赞同：6
> 
> 时间：2012-10-11T10:18:59.067
> 
> 标签：c++, c++11, move-semantics

在[关于通用引用的讲座中](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)，Scott Meyers（大约在第 40 分钟）说，作为通用引用的对象应该在使用前转换为真实类型。换句话说，只要有一个具有通用引用类型的模板函数，就`std::forward`应该在使用运算符和表达式之前使用，否则可能会复制该对象。

我对此的理解在以下示例中：

```
#include <iostream>

struct A
{
  A() { std::cout<<"constr"<<std::endl; }
  A(const A&) { std::cout<<"copy constr"<<std::endl; }
  A(A&&) { std::cout<<"move constr"<<std::endl; }
  A& operator=(const A&) { std::cout<<"copy assign"<<std::endl; return *this; }
  A& operator=(A&&) { std::cout<<"move assign"<<std::endl; return *this; }

  ~A() { std::cout<<"destr"<<std::endl; }

  void bar()
  {
    std::cout<<"bar"<<std::endl;
  }
};

A getA()
{
  A a;
  return a;
}

template< typename T >
void callBar( T && a )
{
  std::forward< T >( a ).bar();
}

int main()
{
  {
    std::cout<<"\n1"<<std::endl;
    A a;
    callBar( a );
  }

  {
    std::cout<<"\n2"<<std::endl;
    callBar( getA() );
  }
} 
```

正如预期的那样，输出是：

```
1
constr
bar
destr

2
constr
move constr
destr
bar
destr 
```

问题真的是为什么需要这样做？

```
std::forward< T >( a ).bar(); 
```

我尝试不使用 std::forward，它似乎工作正常（输出相同）。

同样，为什么他建议在带有右值的函数内部使用 move ？（答案与 std::forward 相同）

```
void callBar( A && a )
{
  std::move(a).bar();
} 
```

我知道两者`std::move`都`std::forward`只是转换为适当的类型，但是在上面的示例中真的需要这些转换吗？

奖励：如何修改示例以生成传递给该函数的对象的副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:32:03.097

它是必需的，因为`bar()`可能会为右值和左值分别重载。这意味着它可能会做一些不同的事情，或者完全不允许，这取决于您是否正确地将其描述`a`为左值或右值，或者只是盲目地将其视为左值。目前，大多数用户不使用此功能，也没有接触过它，因为最流行的编译器不支持它——甚至 GCC 4.8 也不支持 rvalue `*this`。但它是标准的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T15:42:25.160

`&&`函数的参数有两种不同的用途。对于普通函数，这意味着参数是右值引用；对于模板函数，这意味着它可以是**右**值引用或左值引用：

```
template <class T> void f(T&&); // rvalue or lvalue
void g(T&&);                    // rvalue only
void g(T&)                      // lvalue only

void h() {
    C c;
    f(c);            // okay: calls f(T&)
    f(std::move(c)); // okay: calls f(T&&)
    g(c);            // error: c is not an rvalue
    g(std::move(c)); // okay: move turns c into an rvalue
} 
```

在`f`and内部`g`，应用于`std::forward`这样的参数会保留参数的左值或右值，因此通常这是将参数转发给另一个函数的最安全方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:32:31.890

```
void callBar( A && a )
{
  std::move(a).bar();
} 
```

如果您有一个右值引用作为参数，它**只能绑定到一个右值**，您通常希望使用移动语义从这个右值移动并取出它的胆量。

参数本身是一个*左值*，因为它是一个命名的东西。你可以拿它的地址。

因此，为了使其再次成为右值并能够从中移动，您可以应用`std::move`它。如果您实际上只是在传递的参数上调用函数，我不明白为什么您会有一个作为右值引用的参数。

如果您要在函数内部从 this 移动，您只想传递一个右值引用，这就是为什么您必须使用`std::move`.

你的例子在这方面实际上没有多大意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T07:57:31.067

讲座中说的是这样的：

```
void doWork( Widget&& param )
{
  ops and exprs using std::move(param)
} 
```

> SM：这意味着：如果您看到采用右值引用的代码，并且您看到该参数的使用没有被 move 包装，那么这是非常值得怀疑的。

经过一番思考，我意识到这是正确的（如预期的那样）。将原始示例中的函数更改`callBar`为此证明了这一点：

```
void reallyCallBar( A& la )
{
  std::cout<<"lvalue"<<std::endl;
  la.bar();
}

void reallyCallBar( A&& ra )
{
  std::cout<<"rvalue"<<std::endl;
  ra.bar();
}

template< typename T >
void callBar( T && a )
{
  reallyCallBar( std::forward< T >( a ) );
} 
```

如果`std::forward`中未使用`callBar`，则将`reallyCallBar( A& )`使用 。因为`a`in`callBar`是一个左值引用。`std::forward`当通用引用是右值引用时，使其成为右值。

下一个修改进一步证明了这一点：

```
void reallyCallBar( A& la )
{
  std::cout<<"lvalue"<<std::endl;
  la.bar();
}

void reallyCallBar( A&& ra )
{
  std::cout<<"rvalue"<<std::endl;
  reallyCallBar( ra );
}

template< typename T >
void callBar( T && a )
{
  reallyCallBar( std::forward< T >( a ) );
} 
```

由于`std::move`未在`reallyCallBar( A&& ra )`函数中使用，因此不会进入无限循环。相反，它调用采用左值引用的版本。

因此（如讲座中所述）：

*   `std::forward`必须用于通用参考
*   `std::move`必须用于右值引用

# php - 类别子类别通过JSON PHP

> ID：12837328
> 
> 赞同：2
> 
> 时间：2012-10-11T10:19:02.133
> 
> 标签：php, android, json

我想以以下形式传递一个 json 数组

```
category_list: [
                {category_name: ,
                 category_id: , 
                       subcategory_list: [
                                   {subcategory_name: ,
                                    subcategory_id: ,
                                                        subsubcategory_list:[
                                                        {subsubcategory_name: ,
                                                        subsubcategory_id: ,
                                                        subsubcategory_image: , },
                                                        ]
                                   },
                                 ]
                     }
                ] 
```

我正在使用的 php 代码是

```
<?php
mysql_connect("localhost","abc","");
mysql_select_db("test");

$rows=mysql("SELECT categoryid FROM category");
while($numrows=mysql_fetch_assoc($rows))
{
$numcatid[]=$numrows;
 for(i=0;i<=count($numcatid[]);i++)
{
$q=mysql_query("SELECT * FROM subcategory WHERE categoryid = $numrows");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
    json_encode($output[]);
}
}
$arrayofarray[]=$output[];
json_encode($arrayofarray[]);

mysql_close();
?> 
```

请更正php代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:40:59.277

一些注意事项：删除`json_encode`除最后一个之外的所有调用，它会单独对多维数组进行 jsonify 处理。

还： `$arrayofarray = $output` `json_encode($arrayofarray);`

我已经删除了无关的`[]`，不确定这是否会导致您的问题，但我不知道这些查询返回了什么......值得一试。

你常`[]`说“在这个数组的末尾添加一些东西”，它不像 C-sharp 中的列表引用（或任何地方）

# javascript - 骨干设计查询

> ID：12837333
> 
> 赞同：1
> 
> 时间：2012-10-11T10:19:20.527
> 
> 标签：javascript, model-view-controller, backbone.js

在 MVC 控制器中包含业务逻辑。在骨干网中，控制器已重命名为路由。现在有几件事会引起混乱。

1.  模型应该有业务逻辑。

2.  集合是模型的集合。

3.  视图是渲染模板的地方，大部分 DOM 事件处理都完成了。

4.  除了路由，路由器还做什么？更多的业务逻辑应该放在路由器还是模型上？

除了渲染 DOM 变量之外，视图是否执行其他任何操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:36:54.457

恕我直言：

*   你不需要使用路由器等等，如果你使用它们应该只是路由。
*   视图应该包含所有的 DOM/Model-Event 监听器。
*   关于结构化的一些想法：[http ://ricostacruz.com/backbone-patterns/](http://ricostacruz.com/backbone-patterns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:37:47.077

1.  是的，他们应该，也应该是那些与后端有“链接”的人，做 CRUD，但也可以验证对象状态，确保后端和前端模型同步和其他事情。

2.  再次正确，但它们还有一个很好的用途，就是很容易从服务器获取模型列表。

3.  他们还应该将事件处理程序附加到 HTML 元素和模型，并对这些事件做出相应的反应。

4.它们处理所有 URL 更改事件并引导它们显示该 URL 的正确视图，路由器使您有机会完全更改页面并使用 Backbone.history 跟踪 URL 更改，因此后退和前进浏览器按钮将继续工作。

他们进行 URL 映射。

这是一个很棒的框架，我不能没有它了。

# jquery - 单击按钮时如何在文本框中显示加载微调器？

> ID：12837335
> 
> 赞同：12
> 
> 时间：2012-10-11T10:19:31.677
> 
> 标签：jquery, spinner, loading

单击按钮时如何在文本框中显示加载微调器？假设我有一个用户名和密码文本框，以及一个登录按钮。输入用户名和密码并单击登录按钮后，微调器应显示在文本框中。请帮忙。我正在寻找一个 JQuery 选项或 Javascript。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-05-01T13:37:39.743

假设您的 html 有以下文本框：

```
<input id='inputsource' /> 
```

定义一个新的 CSS 类

```
.loadinggif 
{
   background:
     url('http://www.hsi.com.hk/HSI-Net/pages/images/en/share/ajax-loader.gif')
     no-repeat
     right center;
} 
```

然后通过 jquery 代码将此类添加到您的测试箱中：

```
$('#inputsource').addClass('loadinggif'); 
```

jsfiddle：http: [//jsfiddle.net/msjaiswal/FAVN5/](http://jsfiddle.net/msjaiswal/FAVN5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:35:22.547

只需在提交表单时将“微调器”图像作为背景图像添加到您的输入中：

CSS：

```
input.spinner {
    background-image:url('spinner.gif');
    background-repeat:no-repeat;
    background-position:5px 5px /* Change to accommodate to your spinner */
} 
```

JS：

```
$('form').submit(function(e){
    e.preventDefault();
    $f = $(this);
    $f.submit(); /* replace with your ajax call */
    $f.find('input[type="text"], input[type="password"]')
        .val('') /* Remove values or store them if you need them back */
        .addClass("spinner") /* Add the spinning image */
        .attr("disabled", "disabled"); /* Disable the inputs */
}); 
```

# grails - Grails 审计日志插件

> ID：12837337
> 
> 赞同：0
> 
> 时间：2012-10-11T10:19:43.087
> 
> 标签：grails, logging, audit

我正在尝试存储可审计的每个域的实例或至少 id。例如，有一个域“学生”并且是可审计的。因此，每当创建或编辑域实例时，都会在审计日志中存储一条新记录。我想要的是存储保存或更新的每个域的 id。怎么做到呢 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T04:07:23.290

您可以更好地参考网址： http: [//grails.org/plugin/audit-logging](http://grails.org/plugin/audit-logging)

上述插件适用于没有集合的域类，如果您在域类中使用集合，请参阅此 stackoverflow 链接：[如何确定 Hibernate PostUpdateEventListener 中的集合更改？](https://stackoverflow.com/questions/812364/how-to-determine-collection-changes-in-a-hibernate-postupdateeventlistener)

希望对您有很大帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:21:43.957

您可以使用 Grails Envers 插件，该插件在下面使用 Hibernate Envers。插件信息可以在[这里](http://grails.org/plugin/envers)的插件站点上找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:24:25.087

您可以使用下面的 AuditLog 插件事件，然后添加您想要的任何内容。希望这是有道理的

```
def onChange = { oldMap,newMap ->
        println "Person was changed ..."
        oldMap.each({ key, oldVal ->
            if(oldVal != newMap[key]) {
                println " * $key changed from $oldVal to " + newMap[key]
            }
        })
    }

def onSave = {
        println "new datainserted"
        // may optionally refer to newState map
    } 
```

在任何这些方法中，我们都可以使用

```
 def event = new AuditLogEvent(
                    actor: actor,
                    className: className,
                    eventName: eventName,
                    persistedObjectId: objectId,
                    propertyName: propertyName,
                    newValue: newValue
            )
            if (event.validate()) {
                auditLogListener.saveAuditLog(event)
                log.info "Logged audit event [$event]"
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:23:47.030

我不会使用审计插件，它在运行测试时会出现一些问题。这个插件是在 GORM 不支持事件时创建的。可以拦截以下事件

```
beforeInsert - Executed before an object is initially persisted to the database
beforeUpdate - Executed before an object is updated
beforeDelete - Executed before an object is deleted
beforeValidate - Executed before an object is validated
afterInsert - Executed after an object is persisted to the database
afterUpdate - Executed after an object has been updated
afterDelete - Executed after an object has been deleted
onLoad - Executed when an object is loaded from the database 
```

希望这可以帮助

# iphone - 将对象传递给方法？

> ID：12837338
> 
> 赞同：1
> 
> 时间：2012-10-11T10:19:43.143
> 
> 标签：iphone, objective-c, cocoa-touch

我已经纠正了一些让我感到困惑的事情，`V2`但我仍然对正在做什么感到有点好奇`V1`。现在看看`V1`我是否认为该行是按值传递的（所以基本上我所拥有的是行的本地副本）。Scanner 然后将其数据扫描到该本地副本的地址中，当方法退出并且外部变量 line 仍然为 nil 时，本地副本被销毁？

上`V2`，我正在传递行的地址，然后将数据扫描到该地址，这是使用引用传递，只是不确定术语吗？

```
// V1
NSString *line = nil;
[self scanUsing:scanner into:line];
NSLog(@"AFTER_: %@", line);

- (void)scanUsing:(NSScanner *)scanner into:(NSString *)line {
    [scanner scanUpToString:@"\n" intoString:&line];
    NSLog(@"INSIDE: %@", line);
} 
```

.

```
// V2     
NSString *line = nil;
[self scanUsing:scanner into:&line];
NSLog(@"AFTER_: %@", line);

- (void)scanUsing:(NSScanner *)scanner into:(NSString **)line {
    [scanner scanUpToString:@"\n" intoString:line];
    NSLog(@"INSIDE: %@", *line);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:29:40.417

由于这不是 C++，因此不能将其称为传递引用。但是，您可以将其称为按指针传递。（这仍然是按值，但您是按值传递*指针*。）

除了语法nazi：第一个版本只修改了本地副本`line`（即函数内部的那个）；你实际传入的那个保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:32:57.507

在 V1 中，您正在更改`line`仅存在于方法范围内的局部参数的值，而不是更改全局`line`变量。

在 V2 中，您可以通过引用有效地传递全局`line`指针，这允许您更改其值...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:34:37.820

V1

您正在传递指针的副本。它指向同一个内存区域，所以你看到的是同一个值。然后，您将按值传递对象。您可以更改内容，但不能创建新对象，因为该方法完成后该指针将不存在。

V2

引用的定义不同（它是 C++ 类型）但是是的，可以说它的行为或多或少相同。在 V2 中，可以在方法内部分配一个新对象，因此，您可以更改它所指向的内存区域。

所以：

*   V1，按值传递。您传递指针，并且可以更改指针指向的对象的内容。
*   V2，通过引用传递。您将指针传递给指针，因此您可以分配内存，因此也可以更改指针地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T10:34:53.140

在第一个示例中，您正在传递对对象的引用。在第二个示例中，您将引用传递给对象的引用。

如果您在第一个示例中记录 line-object，您会看到差异，而在第二个示例中，您会看到您在方法中设置的对象。

这通常用于 NSError，你有一个基本的返回类型，但你也想通知是否有错误。然后传递一个指向错误变量的指针，然后他们将引用传递给 NSError 对象。我希望这对你来说至少有点意义:)

# javascript - ExtJS 改变 loadmask 的高度

> ID：12837340
> 
> 赞同：0
> 
> 时间：2012-10-11T10:19:46.437
> 
> 标签：javascript, extjs

所以我在我想改变高度的网格上有这个负载掩码。

我已经设法改变高度使用

```
var loadMask = grid.view.loadMask;
loadMask .setHeight(maskHeigtht); 
```

但这只会改变消息高度。我想改变后面的蓝色面具。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:53:40.953

我通常会将掩码应用于您要显式掩码的元素。我经常使用这样的代码来屏蔽网格。

```
 var grid = Ext.getCmp('myGrid').getEl(); //note the use of getEl() to get the grids containing element

    grid.mask("Loading data...");

    Ext.getStore('myStore').load({
        callback: function () {             
            grid.unmask();
        }
    }); 
```

上面的代码会在商店加载时屏蔽网格，然后再取消屏蔽。

# validation - CakePHP：错误消息未显示验证字段

> ID：12837346
> 
> 赞同：3
> 
> 时间：2012-10-11T10:20:07.377
> 
> 标签：validation, cakephp

我是 CakePHP 的新手。我的观点有两个问题。

*   文本字段名称和文本字段区域之间有换行符。我试图通过`'div' => false`，但没有奏效。如何删除换行符并在同一行显示？

*   我已在此文本字段中添加了验证规则，但是当我单击保存时，错误消息未显示。`validates`除了添加我的模型之外，我还需要做其他事情吗？

这是我的看法`input.ctp`

```
echo $this->Form->input('fileId', array(
    'type'=>'text', 
    'style' => 'width: 200px; height: 15px'
));
echo $this->Form->end('Save Post'); 
```

这是我的模型：

```
var $validate = array(
    'fileId' => 'notEmpty',
    'message' => 'Should not be empty'
    ); 
```

控制器：

```
if ($this->request->is('post')) {
    $data = $this->request->data;
    if ($data) {
        // saving the data
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:09:14.350

如果您不使用，`save`则需要使用 . 手动验证数据`validates`。在这种情况下，您还需要`set`数据。例如在您的控制器中

```
 $this->ModelName->set($data);
   $this->Modelname->validates(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:10:22.143

为了验证你的数据，你应该有这样的东西：

```
public $validate = array(
    'fileId' => array(
        'rule' => 'notEmpty',
        'message' => 'Should not be empty'
    )
); 
```

你的`Controller`：

```
if ($this->request->is('post')) {
    if ($this->Model->save($this->request->data)) {
        // saved
    }
} 
```

如果无法保存，错误将显示在相应字段附近。或者您可以使用`$this->Model->validationErrors`数组自定义错误。

对于换行问题，请确保 200px 由于这些元素的位置而自动换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:25:25.270

调用 validates() 或 save() 时出现验证错误。完全设置您的操作。如果你没有使用 FormHelper::input，它输出字段、标签和错误，你需要手动输出错误以及使用`$this->Form->error('fileId')`.

对于表单，试试这个：将其添加到您的 css

```
label { float: left; 
        width: 150px; 
        display: block; 
        clear: none; 
        text-align: left; 
        vertical-align: middle; 
        padding-right: 0px;} 

.xg { 
display: block; 
float:left; 
} 

echo $this->Form->input('fileId', array('div'=>'xg','type'=>'text', 'style' => 'width: 200px; height: 15px'));
echo $this->Form->end('Save Post'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:05:06.083

您可以通过以下方法自定义输出：

```
<tr>
    <td><label>Username</label></td>
    <td>
        <?php echo $this->Form->input('username',array('label'=>false,'div'=>false,'error'=>false)); ?>
    </td>
<td><?php echo $this->Form->error('username'); ?></td>
</tr> 
```

此方法将在同一行中为您提供输出。

# php - 如何使用插入到 joomla 2.5 的查询中？

> ID：12837348
> 
> 赞同：1
> 
> 时间：2012-10-11T10:20:09.840
> 
> 标签：php, mysql, joomla

我正在使用 joomla 的查询。

```
$query = "INSERT INTO '#__demo'( 'id', 'fname', 'mname', 'lname' ) VALUES ( '$val', '$post['fname']', '$post['Mname']', '$post['Lname']' );"; 
```

它给出了错误

```
syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T06:54:26.467

要插入数据，您也可以在 joomla 2.5 中使用这种格式：

```
$data =new stdClass();
$data->id = null;
$data->field1 = 'val1';
$data->field2 = 'val2';
$data->field3 = 'val3';

$db = JFactory::getDBO();
$db->insertObject( '#__mytable', $data, id ); 
```

stdClass 是一个 php 基类，所有其他类都从该基类扩展而来。

'id' 是连接表的主键名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:25:18.950

您的查询有两个错误。

1.  您没有在`$_POST`值中转义引号。

    ```
    '$post['fname']'
    //     ^ here and other places 
    ```

2.  您正在使用单引号`'`来表示表和字段名称。

    ```
     .. INTO '#__demo'( ..       
    //       ^ here and other places 
    ```

现在在消除所有这些问题之后。您的查询变为：

```
$query = "INSERT INTO `#__demo` ( `id`, `fname`, `mname`, `lname` ) VALUES ( '$val', '$post[fname]', '$post[Mname]', '$post[Lname]' );"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T04:03:03.870

您可以使用更格式化的方式编写插入查询

```
$db = JFactory::getDBO(); // get the connection
$query = $db->getQuery(true);

$columns = array('field1','field2'); // set the column names to a variable 
$values = array(1,$db->quote('Your message'));

$query->insert($db->quoteName('#__tablename'))
      ->columns($db->quoteName($columns))
      ->values(implode(',',$values));

$db->setQuery($query);  
$db->execute();

$tourid = $db->insertid(); // get the last inserted id 
```

你可以从这里得到参考

[https://docs.joomla.org/Inserting,_Updating_and_Removing_data_using_JDatabase](https://docs.joomla.org/Inserting,_Updating_and_Removing_data_using_JDatabase)

# css - css 下拉菜单 - 需要差距

> ID：12837352
> 
> 赞同：0
> 
> 时间：2012-10-11T10:20:18.777
> 
> 标签：css

我的下拉菜单现在正在使用我的 css 三角形（昨天的问题），但现在我希望下拉菜单有 2-3 px 的间隙，但是当我添加它的那一刻，我遇到了问题，当你从main nav 指向下拉菜单，下拉菜单消失（显然，因为鼠标不再位于 li 链接上。）所以任何人都有任何好主意，我怎么能有一个间隙，而下拉菜单不会消失？

[http://keith464.fahrradhamburg.de/Lager/Metall-Behaelter/Stahlblech-Behaelter/Stapelbehaelter-aus-Stahlblech.html](http://keith464.fahrradhamburg.de/Lager/Metall-Behaelter/Stahlblech-Behaelter/Stapelbehaelter-aus-Stahlblech.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:49:17.087

一个简单的解决方法是将其添加到您的 ul ul （下拉菜单）：

```
margin-top:-3px !important 
```

重要标签确保此边距优先于任何现有样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:28:59.930

您可以使用另一个容器来保存下拉菜单，女巫将具有透明背景，并且在顶部比您的菜单大 3px，因此您实际上也会在鼠标悬停时显示该容器，并且什么都不会消失

LE：或者您可以使用 javascrip 显示您的下拉列表并为其设置超时，因此如果您的鼠标没有悬停在任何上方，它就不会消失得那么快`<li>`

# java - 为什么将一个数组复制到另一个数组会改变原始数组？

> ID：12837356
> 
> 赞同：2
> 
> 时间：2012-10-11T10:20:40.507
> 
> 标签：java, arrays, multidimensional-array

当我将二维数组复制到不同的临时数组中时，当我对临时数组执行操作时，它会更改我的原始数组。

**这是我的代码的一部分，以说明我的意思：**

```
public int getPossibleMoves(int color, int turn) {
  int x = 0;
  int blankI;
  blankI = -1;
  int pBoard[][];
  pBoard = new int[board.length][board.length];
  System.arraycopy(board, 0, pBoard, 0, board.length);

  //if its the first turn and color is black, then there are four possible moves
  if(turn == 0 && color == BLACK) {       
    pBoard[0][0] = BLANK;
    current.addChild(pBoard);
    current.children.get(x).setParent(current);
    System.arraycopy(board, 0, pBoard, 0, board.length);
    x++;

    pBoard[pBoard.length-1][pBoard.length-1] = BLANK;
    current.addChild(pBoard);
    current.children.get(x).setParent(current);
    System.arraycopy(board, 0, pBoard, 0, board.length);
    x++;

    pBoard[pBoard.length/2][pBoard.length/2] = BLANK;
    current.addChild(pBoard);
    current.children.get(x).setParent(current);
    System.arraycopy(board, 0, pBoard, 0, board.length);
    x++;

    pBoard[(pBoard.length/2)-1][(pBoard.length/2)-1] = BLANK;
    current.addChild(pBoard);
    current.children.get(x).setParent(current);
    System.arraycopy(board, 0, pBoard, 0, board.length);
    x++;
  } 
```

在上面所说`pBoard[0][0] = BLANK;`的和类似的行上，它也改变了电路板`pBoard`，我需要电路板保持不变，我的程序才能正常工作。

我找到了与此类似的答案，这就是我想到使用`System.arraycopy()`而不是`pBoard = board`. 在`System.arraycopy()`我使用它的另一个程序中工作，但不是在这个程序中。
任何帮助是极大的赞赏。

**还有一件事：**
这是家庭作业的一部分。然而，解决这个小问题甚至不会让我接近我需要的最终产品。到目前为止，这只是我代码的一小部分，但我需要克服这一点才能继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:52:07.070

你需要做一个深拷贝。

代替：

```
pBoard = new int[board.length][board.length];
System.arraycopy(board, 0, pBoard, 0, board.length); 
```

尝试：

```
pBoard = new int[board.length][];
for ( int i = 0; i < pBoard.length; i++ ) {
  pBoard[i] = new int[board[i].length];
  System.arraycopy(board[i], 0, pBoard[i], 0, board[i].length);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:46:44.460

`int board[][]`是对类型数组的引用数组`int[]`。`System.arraycopy(board, 0, pBoard, 0, board.length)`复制引用数组，但不复制引用数组，现在可以通过两种方式访问​​。要进行深度复制，您还必须复制所引用的一维数组。请注意，要制作数组的副本，您可以使用`array.clone()`. 还考虑使用大小为 N*N 的一维数组 access `array[x+N*y]`。

# java - 如何解决线程“AWT-EventQueue-0”java.lang.OutOfMemoryError 中的异常：Java 堆空间

> ID：12837358
> 
> 赞同：1
> 
> 时间：2012-10-11T10:20:43.657
> 
> 标签：java, jvm

我正在尝试读取大小为 10 MB 的 xml 文件。我正在使用 Windows7 操作系统（8GB RAM），Netbeans 7.1.2

```
 C:\>java -version
    java version "1.7.0_05"
    Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
    Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode)

C:\>free -m
             total       used       free     shared    buffers     cached
Mem:          8169       3175       4993          0          0          0
-/+ buffers/cache:       3175       4993
Swap:         8169         81       8087 
```

我试过`C:\>java -Xms5120m -Xmx6144m`但没有帮助。

堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
    at org.apache.xerces.xni.XMLString.toString(Unknown Source)
    at org.apache.xerces.parsers.AbstractDOMParser.characters(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanContent(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:208)
    at ReadExcel.xmlappend(ReadExcel.java:343)
    at ReadExcel.jButton7ActionPerformed(ReadExcel.java:331)
    at ReadExcel.access$600(ReadExcel.java:42)
    at ReadExcel$7.actionPerformed(ReadExcel.java:176)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6038)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3260)
    at java.awt.Component.processEvent(Component.java:5803)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
    at java.awt.Container.dispatchEventImpl(Container.java:2102)
    at java.awt.Window.dispatchEventImpl(Window.java:2429) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:26:05.830

我怀疑您的 10 MB 数据会产生大量图形对象或其他重量级对象。最简单的检查方法是添加`-XX+HeapDumpOnOutOfMemoryError`和分析所有内存的使用位置。

您可能希望减小最大堆大小，以便转储更小，因为某些工具（例如 VisualVM）难以加载大型堆转储。

[使用 VisualVM 浏览堆转储](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/heapdump.html)

# jquery - jQuery AJAX 成功在 Firefox 中不起作用

> ID：12837364
> 
> 赞同：0
> 
> 时间：2012-10-11T10:20:53.360
> 
> 标签：jquery, ajax, google-chrome, firefox

我有这个小 AJAX 调用：

```
 $('#brick-mixer-form').submit(function(e) { 
        e.preventDefault();

        $("#mix-bricks-submit").addClass("load");
        $("#mix-bricks-submit").attr("value", "Blander sten..");

        var form_data = $("#brick-mixer-form").serialize()

        $.ajax({
           type: "GET",
           url: "build.php",
           data: form_data,
           dataType: 'text',
           async: false,
           success: function(data) {
              $(".active").attr('src', 'build.php?'+form_data+'').load(function() {
              $("#mix-bricks-submit").removeClass("load");
              $("#mix-bricks-submit").attr("value", "Bland igen");
              $("#bricks-selected").attr("value", form_data);
              $("#pdf_saver").css("display", "block");
           });
        }
     });
}); 
```

在 Google Chrome 中这很完美，但在 Firefox 中我只能触发一次。

当我再次按下提交按钮“ `mix-bricks-submit`”时，它不会再次运行呼叫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:17:06.987

根据[.load()](http://api.jquery.com/load/) url 参数不是可选的，所以要么

```
$('#brick-mixer-form').submit(function(e) { 
        e.preventDefault();

        $("#mix-bricks-submit").addClass("load");
        $("#mix-bricks-submit").attr("value", "Blander sten..");

        var form_data = $("#brick-mixer-form").serialize()

        $.ajax({
           type: "GET",
           url: "build.php",
           data: form_data,
           dataType: 'text',
           async: false, //I would avoid forcing synchronous
           success: function(data) {
              //$(".active").attr('src', 'build.php?'+form_data+'').load(function() {
              $("#mix-bricks-submit").removeClass("load");
              $("#mix-bricks-submit").attr("value", "Bland igen");
              $("#bricks-selected").attr("value", form_data);
              $("#pdf_saver").css("display", "block");
           //});
           }
        });
}); 
```

或者

```
$('#brick-mixer-form').submit(function(e) { 
        e.preventDefault();

        $("#mix-bricks-submit").addClass("load");
        $("#mix-bricks-submit").attr("value", "Blander sten..");

        var form_data = $("#brick-mixer-form").serialize()

        $.ajax({
           type: "GET",
           url: "build.php",
           data: form_data,
           dataType: 'text',
           async: false,//I would avoid forcing synchronous
           success: function(data) {
              $(".active").load('build.php',form_data,function() {
                $("#mix-bricks-submit").removeClass("load");
                $("#mix-bricks-submit").attr("value", "Bland igen");
                $("#bricks-selected").attr("value", form_data);
                $("#pdf_saver").css("display", "block");
              });
           }
        });
}); 
```

虽然我不确定为什么要执行两次 ajax 语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:25:31.927

尝试这个：

环境

```
$.ajax({
           type: "GET",
           url: "build.php",
           data: form_data,
           dataType: 'text',
           async: false,
           cache: false,
           success: function(data) {
              $(".active").attr('src', 'build.php?'+form_data+'').load(function() {
              $("#mix-bricks-submit").removeClass("load");
              $("#mix-bricks-submit").attr("value", "Bland igen");
              $("#bricks-selected").attr("value", form_data);
              $("#pdf_saver").css("display", "block");
           }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T18:39:11.857

[这是原始提问者作为编辑添加的，我已将其转换为社区 wiki 答案，因为它应该是答案，而不是编辑。]

解决方案：

```
 $('#brick-mixer-form').submit(function(e) { 

       e.preventDefault();
       var nowis = new Date();

       $("#mix-bricks-submit").addClass("load");
       $("#mix-bricks-submit").attr("value", "Blander sten..");

       var form_data = $("#brick-mixer-form").serialize()

       $.ajax({
          type: "GET",
          url: "build.php",
          data: form_data,
          dataType: 'text',
          success: function(data) {

          $(".active").attr('src', 'build.php?'+form_data+'&tstamp='+ nowis.getMilliseconds() +'').load(function() {
          $("#mix-bricks-submit").removeClass("load");
          $("#mix-bricks-submit").attr("value", "Bland igen");
          $("#bricks-selected").attr("value", form_data);
          $("#pdf_saver").css("display", "block");
        });
     }
   });
}); 
```

通过`tstamp`在查询中插入一个毫秒值的参数，我将在每次提交表单时强制使用新的图像名称，这似乎覆盖了 FF 和 IE 中的缓存问题。

# assembly - 汇编字符串修改访问冲突

> ID：12837365
> 
> 赞同：0
> 
> 时间：2012-10-11T10:20:53.720
> 
> 标签：assembly, x86

我在下面的代码中收到“写入时访问冲突”错误，同时将空字节放在通过 Ollydbg 检查的字符串最后一个字符中，任何人都可以帮忙解决这个问题，谢谢

```
[SECTION .text]

global _start

_start:

jmp short       stuff  
code:

pop             esi
xor             eax,eax          
mov byte        [esi + 17],al   ; put a null byte byte on [esi + 17]  

stuff:
call            code
db              'This is my string#' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:45:26.397

您正在运行自修改代码：取决于平台，它可能工作或不工作。在保护模式下，它不会工作，因为代码段是只读的（它可以在 386 上的 DOS 中完美工作）

您必须将字符串放在数据段中，或者指示链接器在 .text 段中放置一个“可写”标签（类似于：）`/SECTION:.text,EWR`。

最后一种方法不受欢迎，因为（a）它是糟糕的编码习惯，（b）它被所谓的“多态”病毒引擎使用，并且被杀毒软件拒绝，（c）可能会干扰虚拟化环境操作，最后(d) 由于处理器预取，某些硬件配置可能无法正常工作，显然是随机的。

除非您有非常紧迫的理由这样做，否则我建议您声明一个数据段并将您的字符串放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:38:02.513

为代码指定的节/段通常是可执行的和只读的，也就是说，写入它们是行不通的。

您需要将字符串放在数据部分中，例如`.data`.

此外，您可能希望将执行转移`mov byte [esi + 17],al`到 以外的某个位置`stuff:`，否则您的程序将进入无限循环。

# wpf - Win XP 64 位和 .NET 4.0 问题

> ID：12837370
> 
> 赞同：1
> 
> 时间：2012-10-11T10:21:05.583
> 
> 标签：wpf, wcf, windows-xp

我正在.NET 4.0 上使用 WCF 应用程序开发 WPF，正在开发的机器是 Windows 7 64 位 SP1。该应用程序已经安装在多台不同配置的机器上（Win XP、Vista、7，甚至 POS），总计大约 20 台不同的机器。

昨天我去把它安装在一个新客户身上，应用程序就崩溃了，没有错误消息（可能是由于我在代码中的几次尝试捕获）。显示的唯一消息类似于：应用程序停止工作，Windows 正在尝试寻找解决方案。

尝试了不同的配置，但什么也没有，直到我注意到客户端机器是 Win XP 64 位，我相信直到现在我还没有遇到过。

我在网上搜索，并在某处看到 Win XP x64 和 .NET 4.0 存在兼容性问题。我不知道是不是这样。

我是否必须将我的应用程序降级到 .NET 3.5？还是我必须创建一个64版本，还是客户端机器有问题？即使在虚拟机上安装了 Win XP，我也无法在我的 PS 上重现该问题，所以我瞎了眼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:11:00.070

您只需要安装 .NET Framework 下载页面中提到的 Windows 映像组件，

[http://www.microsoft.com/en-us/download/details.aspx?id=17851](http://www.microsoft.com/en-us/download/details.aspx?id=17851)

> 重要提示：确保您的计算机具有最新的 Windows 服务包和重要更新。要查找安全更新，请访问 Windows 更新。如果您在 XP 64 位或 Windows 2003 上安装，您可能需要安装 Windows 映像组件。可以在此处找到 32 位 Windows 映像组件。可以在此处找到 64 位的 Windows 映像组件。

无论如何，您应该按照@Daniel Hilgarth 的建议调试崩溃，因为这可以判断 WIC 是否是罪魁祸首。

# java - 将普通的 java 文件值传递给 jsp 文件

> ID：12837371
> 
> 赞同：0
> 
> 时间：2012-10-11T10:21:06.527
> 
> 标签：java, jsp, servlets

我编写了一个代码来导入一个获取数据的 excel 文件，并且我想在我的 JSP 文件中插入数据。我可以通过使用普通代码而不是使用 servlet 来做到这一点吗？我上传excel文件的代码是

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.Scanner;
import java.util.Vector;

import javax.swing.plaf.basic.BasicInternalFrameTitlePane.RestoreAction;

import org.apache.poi.hssf.record.formula.functions.Goto;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class uploadexcel {
public static void main(String[] args) {
      Scanner scanner = new Scanner(System.in);
      System.out.println("Please enter a filename with extention to upload");

    String fileName = "C:\\"+scanner.nextLine();
    Vector dataHolder = ReadCSV(fileName);
    printCellDataToConsole(dataHolder);
} 

private static void printCellDataToConsole(Vector dataHolder) {
    // TODO Auto-generated method stub
    for(int i=0;i<dataHolder.size();i++)
    {
        Vector column=(Vector)dataHolder.elementAt(i);
        for (int j = 0; j < column.size(); j++) {
            HSSFCell myCell = (HSSFCell) column.elementAt(j);
            String stringCellValue = myCell.toString();

            System.out.print(stringCellValue + "\t");
    }
    System.out.println();
    }
}

private static Vector ReadCSV(String fileName) {
    // TODO Auto-generated method stub
     Vector cellVectorHolder = new Vector();
     try {
         FileInputStream myInput = new FileInputStream(fileName);

         POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

         HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

         HSSFSheet mySheet = myWorkBook.getSheetAt(0);

         Iterator rowIter = mySheet.rowIterator();

         while (rowIter.hasNext()) {
                 HSSFRow myRow = (HSSFRow) rowIter.next();
                 Iterator cellIter = myRow.cellIterator();
                 Vector column = new Vector();
                 while (cellIter.hasNext()) {
                         HSSFCell myCell = (HSSFCell) cellIter.next();
                         column.addElement(myCell);
                 }
                 cellVectorHolder.addElement(column);
         }
 } catch(IOException ie)
 {
     System.err.println("Please enter a valid input");

 }
     catch (Exception e) {
         e.printStackTrace();
 }
 return cellVectorHolder;
}

} 
```

我的jsp文件是

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>NAMES ON THE LIST:</title>
</head>
<body>
names: <input type="text" name="firstname"><br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:48:19.207

您确实意识到在服务器上评估 JSP，然后将 HTML 结果传递给浏览器？

本质上，您可以在 JSP 页面中包含以下片段：

```
<%  printCellDataToConsole( ReadCSV( "file.csv" ) ) %> 
```

这将在网页中包含您的 csv，模数标记...

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:10:41.523

我建议你不要这样做。调用`Servle`t 是完成此任务的正确方法。

但是，你可以这样做。

```
<%@page import="java.util.Vector"%>

<%
 Vector oRetVal = new Vector();
 try{
       oRetVal = uploadexcel.ReadCSV("C:\\test.csv"); // Just an example
    }catch(Exception e){

        e.printStackTrace();
    }
%> 
```

在 JSP 中迭代 oRetVal。

**注意**：与问题无关：阅读[Java Naming Conventions](http://www.javapractices.com/topic/TopicAction.do?Id=58)。
它应该是“上传Excel”。

# css - z-index 和高度不适用于我的 div

> ID：12837373
> 
> 赞同：0
> 
> 时间：2012-10-11T10:21:13.290
> 
> 标签：css, html, css-float, height, z-index

我有一个页面news.html，它是包含在我的index.html 中的php - 在#content div 中。news.html 有另一个 div，它浮动在右侧，并有一条垂直线 jpg 将其与主要内容分开，添加和类似的东西将放置在那里。

问题是我无法达到 100% 的高度（尽管它适用于 jpg 行），我认为原因是一些 css 问题。由于某种原因，我也不能将它放在页脚下方，因此 100% 高度线不会覆盖它。我为每个页面使用一个 main.css 文件。

如果我将 position:fixed 用于#poll div height 100% 有效，但是当放大/缩小浏览器时，我的 div 会移动，这不是我想要的。我知道有一个 min-width 属性，但似乎对我不起作用。

这是我的代码：

**索引.html：**

```
//Content div is placed inside a #main table//
<div id="content"><?php include "news.html"?></div> 
```

**主.css：**

```
 html, body{
        height:100%;    
    }
        #main{  
            width:1010px;
            height:100%;
            z-index:2;
        }
        #content{
            margin-top: 303px;
            height:100%;
            z-index:1;
        }
        #footer{
            z-index:2;
        }
        #poll{
            height:100%
            background-color:rgba(255,0,0,0.6);
            float:right;
            z-index:1;
} 
```

**新闻.html**

```
<div id="poll"><div style="background-image:url(images/vertical.jpg); width:5px; height:100%; background-repeat:repeat-y; vertical-align:top; position:fixed; top:0; z-index:0;"></div>
    <div>POLL CONTENT HERE</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:23:19.957

.....................

您好，如果您过去曾`z-index`担任过至少一个**职位** `relative`或`absolute`

**比它的工作**

像这样

```
{
z-index:2;
position:relative;
} 
```

如何工作`Z-index` ***[链接在这里](http://css-tricks.com/video-screencasts/40-how-z-index-works/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:25:22.670

`z-index`仅当您指定`position`元素的属性时才有效。因此，对于您给出的每个元素，`z-index`您需要将位置指定为

```
position: relative; 
```

或者

```
position: absolute; 
```

# php - 它在 php/html 表格行中显示不正确的答案

> ID：12837378
> 
> 赞同：1
> 
> 时间：2012-10-11T10:21:50.427
> 
> 标签：php, html, sql

我在下面有一个“答案”数据库表：

答案表

```
AnswerId SessionId QuestionId Answer
13       AAA       1          A
14       AAB2      2          A
15       AAB2      2          B 
```

现在您可以看到，考试（会议）AAA 中的问题 1 有 1 个答案，而这些是考试（会议）AAB2 中问题 2 的 2 个答案。

下面是“问题”表：

问题表：

```
SessionId  QuestionId QuestionContent NoofAnswers ReplyId QuestionMarks OptionId
AAA        1          What is 2+2?    1           1       5             2
AAC        1          3+3 and 4+4 ?   2           2       10            6 
```

现在我有一个搜索功能，用户可以从问题中输入一个术语并编译搜索。因此，例如，如果用户输入“+”，则结果应显示在 php/html 表中：

```
 QuestionContent Option Type  Number of Answers Answer Number of Replies  Number of Marks
   What is 2+2?    A-D          1                 A      Single               5
   3+3 and 4+4?    A-H          2                 AB     Multiple             5 
```

但问题是它显示了一个额外的答案，它在下面显示：

```
 QuestionContent Option Type  Number of Answers Answer Number of Replies  Number of Marks
   What is 2+2?    A-D          1                 A AB     Single               5
   3+3 and 4+4?    A-H          2                 A AB     Multiple             5 
```

现在我的问题是为什么它在两行中都显示错误的答案？第一行只能是“A”，第二行只能是“AB”。

下面是执行查询并输出结果的代码（我已将其简化，以便您更容易阅读并希望看到问题）：

```
<?php

//connect to db

    // Build the query
    $questionquery = "
SELECT DISTINCT q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, r.ReplyType, 
       q.QuestionMarks, q.SessionId 
  FROM Answer an 
  INNER JOIN Question q ON q.QuestionId = an.QuestionId and an.SessionId = q.SessionId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 
      WHERE ".implode(" AND ", array_fill(0, $numTerms, "q.QuestionContent LIKE ?"))."
      GROUP BY an.SessionId, an.QuestionId
      ORDER BY ".implode(", ", array_fill(0, $numTerms, "IF(q.QuestionContent LIKE ?, 1, 0) DESC"))."
    ";

    // Make the referenced array
    $referencedArray = make_values_referenced(array_merge(
      array(str_repeat("ss", $numTerms)), // types
      $termArray,                         // where
      $termArray                          // order by
    ));

    // Bind parameters
    if (!call_user_func_array(array($stmt, 'bind_param'), make_values_referenced($referencedArray))) {
      die("Error binding parameters: $stmt->error"); 
    }

    // This will hold the search results
    $searchResults = array();
    $searchOption = array();
    $searchNoofAnswers = array();
    $searchAnswer = array();
    $searchReply = array();
    $searchMarks = array();

    // Fetch the results into an array
    if (!$stmt->num_rows()) {
      $stmt->bind_result($dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks, $dbSessionId); 
      while ($stmt->fetch()) {
        $searchResults[] = $dbQuestionContent;
        $searchOption[] = $dbOptionType;
        $searchNoofAnswers[] = $dbNoofAnswers;
        $searchAnswer[] = $dbAnswer;
        $searchReply[] = $dbReplyType;
        $searchMarks[] = $dbQuestionMarks;
      }
    }

  }

      $questionnum = sizeof($searchResults);

    // If $searchResults is not empty we got results
    if (!empty($searchResults)) {
      echo "<p>Your Search: '$inputValue'</p>";  
      echo"<p>Number of Questions Shown from the Search: <strong>$questionnum</strong></p>";
      echo "<table border='1' id='resulttbl'>
      <tr>
      <th class='questionth'>Question</th>
      <th class='optiontypeth'>Option Type</th>
      <th class='noofanswersth'>Number of <br/> Answers</th>
      <th class='answerth'>Answer</th>
      <th class='noofrepliesth'>Number of <br/> Replies</th>
      <th class='noofmarksth'>Number of <br/> Marks</th>
      </tr>\n";
      $script = '';
      foreach ($searchResults as $key=>$question) {
      $script .= 'var key_' . $key . '="' . str_replace('"','\"', $question) . '";' . PHP_EOL;
        echo '<tr class="questiontd">'.PHP_EOL;
        echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
        echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>' . PHP_EOL;
        echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>' . PHP_EOL;
        echo '<td class="answertd">'.htmlspecialchars(implode(' ', $searchAnswer)).'</td>' . PHP_EOL; 
        echo '<td class="noofrepliestd">'.htmlspecialchars($searchReply[$key]).'</td>' . PHP_EOL;
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow(key_$key,'$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";
}
        echo "</table>" . PHP_EOL;
        echo '<script type="text/javascript">' . PHP_EOL;
        echo $script;
        echo '</script>' . PHP_EOL;

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:10:04.777

您是否检查过查询本身返回的内容？因此，您将确定问题出在查询还是结果的操作上。

当您获取结果时，您会创建一个`$searchAnswer`数组，在其中追加行。然后在表格中打印整个`$searchAnswer`数组（你内爆它）。这不是问题吗？

# java - Java中的可调用语句不起作用

> ID：12837380
> 
> 赞同：0
> 
> 时间：2012-10-11T10:21:58.857
> 
> 标签：java, jdbc, sybase

我的 JDBC 驱动程序似乎有问题。

我正在尝试执行以下 java 代码：

```
String sql = "{call get_samp_stud_no_out (?,?,?)}";
CallableStatement call = conn.prepareCall(sql);
call.setInt("objId1", 1);
call.setInt("objId2", 2);
call.setInt("objId3", 3);
ResultSet results = call.executeQuery(); 
```

我得到：

```
java.lang.AbstractMethodError: com.sybase.jdbc2.jdbc.SybCallableStatement.setInt(Ljava/lang/String;I)V 
```

顺便说一句，它是一个 sybase 数据库。我已经尝试过 jconn2.jar 和 jconn3.jar。

和其他接受字符串参数的存储过程：

```
String sql = "{call get_samp_stud_no_name (?,?,?)}";
    CallableStatement call = conn.prepareCall(sql);
    call.setString("objId1", "nappa");
    call.setString("objId2", "vegeta");
    call.setString("objId3", "frieza");
    ResultSet results = call.executeQuery(); 
```

例外情况是：

```
Exception in thread "main" java.lang.AbstractMethodError: com.sybase.jdbc2.jdbc.SybCallableStatement.setString(Ljava/lang/String;Ljava/lang/String;)V 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:41:50.073

在 Sybase 驱动程序中，命名参数存在很多问题，我认为这会导致您的问题。
尝试：

```
call.setString("@objId1", "nappa");
call.setString("@objId2", "vegeta");
call.setString("@objId3", "frieza"); 
```

或者

```
call.setString(1, "nappa");
call.setString(2, "vegeta");
call.setString(3, "frieza"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:47:54.777

尝试像这样修改您的代码：

```
String sql = "{?=call get_samp_stud_no_out (?,?,?)}";
CallableStatement call = conn.prepareCall(sql);

call.registerOutParameter(1, Types.INTEGER);
call.setInt(2, 10);
call.setInt(3, 20);
call.setInt(4, 30);
call.execute();
int retVal = call.getInt(1); // return value
call.close(); 
```

# java - 如何从黑莓 URL 中删除空格

> ID：12837382
> 
> 赞同：0
> 
> 时间：2012-10-11T10:22:06.713
> 
> 标签：java, blackberry, whitespace

> **可能重复：**
> [Blackberry URL 编码器](https://stackoverflow.com/questions/1211299/blackberry-url-encoder)

我在用

```
 String url="http://xxxxxx.com/api/api.php?func=xxxxxxxxxxxx&params[]="+searchText+CustomUtility.getConnectionString();

    HttpConnection conn=(HttpConnection)Connector.open(url);
    InputStream in=(InputStream)conn.openInputStream();
    SAXParserFactory factory=SAXParserFactory.newInstance();
    SAXParser parser=factory.newSAXParser();
    parser.parse(in, new ContactParser()); 
```

问题是当 searchText 有很多空格时它不起作用，所以请我如何从 URL 中删除空格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:26:37.213

尝试这个 -

```
URLUTF8Encoder.enceode(searchText); 
```

URLUTF8Encoder 类如下 -

```
public class URLUTF8Encoder {

 final static String[] hex = {
"%00", "%01", "%02", "%03", "%04", "%05", "%06", "%07",
"%08", "%09", "%0A", "%0B", "%0C", "%0D", "%0E", "%0F",
"%10", "%11", "%12", "%13", "%14", "%15", "%16", "%17",
"%18", "%19", "%1A", "%1B", "%1C", "%1D", "%1E", "%1F",
"%20", "%21", "%22", "%23", "%24", "%25", "%26", "%27",
"%28", "%29", "%2A", "%2B", "%2C", "%2D", "%2E", "%2F",
"%30", "%31", "%32", "%33", "%34", "%35", "%36", "%37",
"%38", "%39", "%3A", "%3B", "%3C", "%3D", "%3E", "%3F",
"%40", "%41", "%42", "%43", "%44", "%45", "%46", "%47",
"%48", "%49", "%4A", "%4B", "%4C", "%4D", "%4E", "%4F",
"%50", "%51", "%52", "%53", "%54", "%55", "%56", "%57",
"%58", "%59", "%5A", "%5B", "%5C", "%5D", "%5E", "%5F",
"%60", "%61", "%62", "%63", "%64", "%65", "%66", "%67",
"%68", "%69", "%6A", "%6B", "%6C", "%6D", "%6E", "%6F",
"%70", "%71", "%72", "%73", "%74", "%75", "%76", "%77",
"%78", "%79", "%7A", "%7B", "%7C", "%7D", "%7E", "%7F",
"%80", "%81", "%82", "%83", "%84", "%85", "%86", "%87",
"%88", "%89", "%8A", "%8B", "%8C", "%8D", "%8E", "%8F",
"%90", "%91", "%92", "%93", "%94", "%95", "%96", "%97",
"%98", "%99", "%9A", "%9B", "%9C", "%9D", "%9E", "%9F",
"%A0", "%A1", "%A2", "%A3", "%A4", "%A5", "%A6", "%A7",
"%A8", "%A9", "%AA", "%AB", "%AC", "%AD", "%AE", "%AF",
"%B0", "%B1", "%B2", "%B3", "%B4", "%B5", "%B6", "%B7",
"%B8", "%B9", "%BA", "%BB", "%BC", "%BD", "%BE", "%BF",
"%C0", "%C1", "%C2", "%C3", "%C4", "%C5", "%C6", "%C7",
"%C8", "%C9", "%CA", "%CB", "%CC", "%CD", "%CE", "%CF",
"%D0", "%D1", "%D2", "%D3", "%D4", "%D5", "%D6", "%D7",
"%D8", "%D9", "%DA", "%DB", "%DC", "%DD", "%DE", "%DF",
"%E0", "%E1", "%E2", "%E3", "%E4", "%E5", "%E6", "%E7",
"%E8", "%E9", "%EA", "%EB", "%EC", "%ED", "%EE", "%EF",
"%F0", "%F1", "%F2", "%F3", "%F4", "%F5", "%F6", "%F7",
"%F8", "%F9", "%FA", "%FB", "%FC", "%FD", "%FE", "%FF"
};
 public static String encode(String s)
 {   
 StringBuffer sbuf = new StringBuffer();
 int len = s.length();
for (int i = 0; i < len; i++) {
  int ch = s.charAt(i);
  if ('A' <= ch && ch <= 'Z') {     // 'A'..'Z'
    sbuf.append((char)ch);
  } else if ('a' <= ch && ch <= 'z') {  // 'a'..'z'
       sbuf.append((char)ch);
  } else if ('0' <= ch && ch <= '9') {  // '0'..'9'
       sbuf.append((char)ch);
  } else if (ch == ' ') {           // space
       //sbuf.append('+');
       sbuf.append("%20");
  } else if (ch == '!') {
      sbuf.append("%21");
  } else if (ch == '*') {
      sbuf.append("%2A");
  } else if (ch == '(') {
      sbuf.append("%28");
  } else if (ch == ')') {
      sbuf.append("%29");
  } else if (ch == '\'') {
      sbuf.append("%27");   
  } else if (ch == '-' || ch == '_'     // unreserved
      || ch == '.'
      || ch == '~' || ch == '\'')  {
    sbuf.append((char)ch);
  } else if (ch <= 0x007f) {        // other ASCII
       sbuf.append(hex[ch]);
  } else if (ch <= 0x07FF) {        // non-ASCII <= 0x7FF
       sbuf.append(hex[0xc0 | (ch >> 6)]);
       sbuf.append(hex[0x80 | (ch & 0x3F)]);
  } else {                  // 0x7FF < ch <= 0xFFFF
       sbuf.append(hex[0xe0 | (ch >> 12)]);
       sbuf.append(hex[0x80 | ((ch >> 6) & 0x3F)]);
       sbuf.append(hex[0x80 | (ch & 0x3F)]);
  }
}
return sbuf.toString();
}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T10:37:22.063

您可以使用以下代码删除给定字符串中的空白字符，您可以像这样调用此方法：

```
replace("PassyourString" , "   " , ""); 
```

* * *

```
public static String replace(String s, String f, String r) {
    if (s == null) {
        return s;
    }
    if (f == null) {
        return s;
    }
    if (r == null) {
        r = "";
    }
    int index01 = s.indexOf(f);
    while (index01 != -1) {
        s = s.substring(0, index01) + r + s.substring(index01 + f.length());
        index01 += r.length();
        index01 = s.indexOf(f, index01);
    }
    return s;
} 
```

# joomla - joomla 在 jos_session 中丢失数据

> ID：12837386
> 
> 赞同：0
> 
> 时间：2012-10-11T10:22:22.380
> 
> 标签：joomla, joomla1.5, joomla2.5

```
$session = JFactory::getSession();
$session->set('domain_name', $domain_name, 'dominiForm'); 
```

然后表 jos_session 包含`...__dominiForm|a:2:{s:11:"domain_name";s:16:"safafasfsadfsfds";s:15:"tld_da_comprare";a:1:{i:0;s:3:".com";}}`

我在 joomla 控制面板中检查了会话寿命是 45 分钟。

但是，当我单击“下一步”时，不使用`set()`或`clear()`随机使用它（我认为在暂停几分钟后），我最终得到的数据库只包含这个`...__dominiForm|a:0:{}`

这发生在 1.5 和 2.5 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:45:29.117

我相信您的问题存在于您未显示的部分代码中。听起来 $session->set() 在您不期望它被调用的时候被调用，并且在那个时候它是空的，所以它用空值覆盖存储的值。发布更多您的代码，我可能会指出问题出在哪里。

# sql - 使用 Spring JDBCTemplate 和 StoredProcedure API 从 Spring 中的存储过程中获取复杂的用户定义的 SQL 类型

> ID：12837387
> 
> 赞同：1
> 
> 时间：2012-10-11T10:22:22.783
> 
> 标签：sql, oracle, spring, stored-procedures, jdbctemplate

在将复杂对象类型从 Oracle 提取到 Java 时，我遇到了困难。

我正在使用 Spring JDBCTemplate 和 Spring StoredProcedure。

在 Oracle 端，我使用了一个函数，它返回一个 OBJECT(UNIT)，它由一个 OBJECT(DIVISION) 的 TABLE(DIVISION_TAB) 组成，它本身由另一个 OBJECT(EMPLOYEE) 的一个 TABLE(EMPLOYEE_TAB) 组成。

这些类型定义如下：

```
create or replace TYPE UNIT AS OBJECT 
( 
  UNIT_ID        NUMBER(38),
  UNIT_NAME      VARCHAR(50),
  DIVIVSION_LIST DIVIVSION_TAB
)

create or replace
TYPE DIVISION_TAB
AS TABLE OF DIVISION

create or replace
TYPE DIVISION AS OBJECT 
( 
  DIV_ID        NUMBER(38),
  DIV_NAME      VARCHAR(50),
  DIV_STATUS    NUMBER(38),
  EMPLOYEE_LIST EMPLOYEE_TAB
)

create or replace
TYPE EMPLOYEE_TAB
AS TABLE OF EMPLOYEE

create or replace
    TYPE EMPLOYEE AS OBJECT 
    ( 
      EMP_ID        NUMBER(38),
      EMP_NAME      VARCHAR(50),
      EMP_STATUS    NUMBER(38),
      EMP_SAL       NUMBER(20),
    ) 
```

数据库级别的函数返回我一个 UNIT 的 SQL 对象，我在 Java 中检索它时以下列方式使用它。

```
declareParameter(new SqlOutParameter("UNIT", OracleTypes.STRUCT, "UNIT",new SqlReturnType() {
         public Object getTypeValue(CallableStatement callableStatement, int colIndx, int sqlType, String typeName) 
            throws SQLException {
        Connection connection = callableStatement.getConnection();

        Map<String, Class<?>> typeMap = connection.getTypeMap();
        typeMap.put("UNIT", Unit.class);
        typeMap.put("DIVISION_TAB", java.sql.Array.class);
        typeMap.put("DIVISION", Division.class);
        typeMap.put("EMPLOYEE_TAB", java.sql.Array.class);
        typeMap.put("EMPLOYEE", Employee.class);

        STRUCT struct = (STRUCT)callableStatement.getObject(colIndx);
        Object[] attr = struct.getAttributes();
        return attr;
        }
    })); 
```

问题：：：：

当我调试由 SqlReturnType() 方法返回的 Object[] 时，当我执行以下操作时，我能够获取 UNIT_ID 和 UNIT_NAME 等详细信息，但在第三个属性（即 oracle.sql.ARRAY 类型）上：

```
 ARRAY array = (ARRAY)attr[3];
    Object[] objects =  (Object[])((ARRAY)attr[3]).getArray(); 
```

它抛出 SQL Internat 异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:18:38.230

此问题已解决。只是一个简单的错误。代码完全正确，我只是错过了授予我定义的类型的权限。

# c# - 是否可以记住 WPF 中工具栏托盘上的工具栏位置？

> ID：12837389
> 
> 赞同：4
> 
> 时间：2012-10-11T10:22:33.107
> 
> 标签：c#, wpf, xaml, position, toolbar

我有几个工具栏：

```
<ToolBarTray>
    <ToolBar Band="0" BandIndex="1">...</ToolBar>
    <ToolBar Band="0" BandIndex="2">...</ToolBar>
    <ToolBar Band="0" BandIndex="3">...</ToolBar>
</ToolBarTray> 
```

我想知道如果用户更改了工具栏的新位置，我是否可以保存它们？

例如，用户更改了第一和第二的位置并关闭了应用程序。运行后，第一是第一，第二是第二。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:25:44.407

我猜默认控件不会坚持自己的设置，为了实现这一点，您需要挂钩相关事件（假设有一些）并做一些工作来序列化当前工具栏的状态到一个设置文件，您可以在负载中读取该文件以将控件初始化回该状态。

# doxygen - 如何在 Doxygen 中的项目名称中添加商标符号？

> ID：12837390
> 
> 赞同：2
> 
> 时间：2012-10-11T10:22:32.877
> 
> 标签：doxygen

是否可以在 Doxygen 中的项目名称中添加商标符号？

```
PROJECT_NAME = "Company Product Name(tm)" 
```

这显示为主页标题，在那里有商标符号会非常好。

ps 这不起作用：

```
PROJECT_NAME = "Company Product Name&tm;" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:57:56.580

您应该可以使用`&trade;`而不是`&tm;`.

Doxygen 对该商标的支持似乎不完整/不一致。

`&tm;`Doxygen 将其记录为受支持的字符实体，但 HTML 4.0 并未指定它。此字符实体在文档正文中正确呈现，但在页眉中未正确处理。

`&#8482;`并且`&#153;`是 HTML 4.0 支持的 ™ 的实体编号表示，但是 Doxygen 不支持实体编号表示，它们将在页眉中正确呈现，但不会由 doxygen 在文档正文中处理。

`&trade;`是 HTML 4.0 for ™ 中的字符实体，但它在 Doxygen 中未列为受支持的字符实体。幸运的是，这似乎是文档中的错误，因为`&trade;`在页眉和文档正文中都得到了正确处理。

# html - 如何在不使用图像映射的情况下制作三角形链接？

> ID：12837391
> 
> 赞同：2
> 
> 时间：2012-10-11T10:22:33.453
> 
> 标签：html, css

我想做的是在我的html中保留一个锚点，它应该是三角形，应该只能在那个三角形部分点击，但我不应该使用图像映射，任何人都可以建议我一个解决方案

**注意：**我知道 CSS 形状，但它们可以完整地点击。我只是希望它可以点击成三角形。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:39:33.247

**是**的，可以看[演示](http://jsbin.com/omuhow/7/edit)

你需要这个html：

```
<div id="link">   // Wrapper
    <div id="square1"></div>   // rotated square to cover the extra are 
    <a id="triangle-up" href="#"></a>  // actual link 
    <div id="square2"></div>  // rotated square to cover the extra are 
  </div> 
```

**CSS：**

```
#link {
   width:110px;
   height:100px; 
   overflow:hidden;
   margin:auto; 
   position:relative;
}

#triangle-up {
    width: 0;
    height: 0;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    border-bottom: 100px solid red;
    position:absolute;
    top:0px;
    left:10px;
}

#square1 {
    z-index: 10;
    position: absolute;
    display: inline-block;
    width: 50px;
    height: 110px;
   // background: blue;
    top: -16px;
    left: -12px;
    transform: rotate(26deg);
  -ms-transform: rotate(26deg);/* IE 9 */
  -webkit-transform: rotate(26deg); /* Safari and Chrome */
  -o-transform: rotate(26deg); /* Opera */
  -moz-transform: rotate(26deg); /* Firefox */

}
#square2 {
   z-index: 10;
  position: absolute;
  display: inline-block;
  width: 50px;
  height: 110px;
 // background: blue;
  top: -16px;
  left: 82px;
  transform: rotate(-26deg);
  -ms-transform: rotate(-26deg);/* IE 9 */
  -webkit-transform: rotate(-26deg); /* Safari and Chrome */
  -o-transform: rotate(-26deg); /* Opera */
  -moz-transform: rotate(-26deg); /* Firefox */
} 
```

# json - 使用 RSpec 测试 jbuilder 视图时如何分配变量

> ID：12837392
> 
> 赞同：3
> 
> 时间：2012-10-11T10:22:34.780
> 
> 标签：json, api, rspec2, rspec-rails, jbuilder

我正在尝试编写 RSpec 测试来测试我使用 jbuilder 构建的模板，该模板最终为我的 API 提供 JSON 数据。我有许多测试`spec/controllers`我的控制器功能的测试，但我也希望测试我在我的 jbuilder 视图中呈现正确的 JSON 字段。这是我设置的示例：

```
# app/views/api/v1/users/create.json.jbuilder
json.first_name user.first_name

# spec/views/api/v1/users/create.json.jbuilder_spec.rb
require 'spec_helper'
describe "api/v1/users/create.json.jbuilder" do
  it "renders first_name" do
    assign( :user, User.create( :first_name => "Bob" ) )
    render
    hash = JSON.parse( rendered )
    hash.has_json_node( :first_name ).with( "Bob" )
  end
end 
```

我运行时得到`rspec spec/views/api/v1/users/create.json.jbuilder_spec.rb`的是以下错误

```
Failures:

  1) api/v1/users/create.json.jbuilder render a user
     Failure/Error: render
     ActionView::Template::Error:
       undefined local variable or method `user' for #<#<Class:0x007fa2911c3118>:0x007fa29105f2b8>
     # ./app/views/api/v1/users/create.json.jbuilder:1:in `_app_views_api_v__users_create_json_jbuilder___3806288263594986646_70168098229960'
     # ./spec/views/api/v1/users/create.json.jbulder_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

无论我如何尝试将`user`对象分配/创建/传递给模板，它都会失败。知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:49:48.527

经过大量阅读和迭代，这是有效的：

```
require 'spec_helper'
describe "api/v1/users/create.json.jbuilder" do

    let( :user )    { User.create( :not_strict => true ) }

    it "renders first_name" do
        render :template => "api/v1/users/create", :locals => { :user => user }, :formats => :json, :handler => :jbuilder
        rendered.should have_json_node( :first_name ).with( user.first_name )
    end
end 
```

注意：`have_json_node`来自[api_matchers gem](http://github.com/tomas-stefano/api_matchers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:32:03.693

assigns 方法设置实例变量，您的视图应该是 @user.first_name 而不是 user.first_name，还是部分视图？如果它是部分你应该做渲染：partial => ...，如果它是一个模板你应该使用@user

# javascript - 如何在 JavaScript 中通过 id 或 class 获取值？

> ID：12837399
> 
> 赞同：0
> 
> 时间：2012-10-11T10:22:52.723
> 
> 标签：javascript, jquery, ruby-on-rails-3

我有以下这样的html代码：

```
<div class="question">
<input class="cross-reference-question-value-id" id="enr_rds_question_ids" name="enr_rds_surv_rdsap_xref[enr_rds_question_id]" type="hidden" value="30"> 
</div> 
```

在这个 html 中，value=15 是用户在前端选择的值。现在我想将 id 存储到以下脚本中。

```
var survey_question_type = JSON.parse(document.getElementById('enr_rds_question_id').value)[30]; 
```

在这里，用户选择了 value `30`。我想`variable`为该`question_id`字段定义一个并将其存储`variable`到脚本而不是`[30]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:07:52.817

如果我正确理解问题，请执行以下操作

```
var survey_question_type = JSON.parse(document.getElementById('enr_rds_question_id').value)[$('enr_rds_question_ids').val()] 
```

为此，`document.getElementById('enr_rds_question_id').value`必须表示一个数组。即是格式的字符串`"[obj0,obj1,...,objn]"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:29:06.857

你在找什么像这个小提琴一样的东西？

[http://jsfiddle.net/veq2V/1/](http://jsfiddle.net/veq2V/1/)

# ios - xcode 4.5 不会让我在 ios 5.1 设备上调试

> ID：12837400
> 
> 赞同：2
> 
> 时间：2012-10-11T10:22:54.517
> 
> 标签：ios, xcode4

我最近得到了一台新的开发机器并下载了最新的 xcode 4.5。它仅随 IOS 6 一起提供，所以我从较旧的 xcode 中获得了 sdk 5.0 和 5.1。

在运行 ios 5.1 时正在测试的设备，我想暂时保持这种状态。

在我的项目设置中，我将基本 sdk 设置为 ios 5.1。

问题是，当我尝试在我的 ios 5.1 设备上调试时，xcode 抱怨我需要将 iOS 设备与最新版本的 iOS 连接才能运行我的应用程序。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:31:47.760

我有像你一样的 xCode 4.5，我有一个与 iOS 6 SDK 完美配合的 iPod Touch 3G 5.1.1。SDK 编号不会告诉您它仅适用于该固件。在目标下的项目设置中，您可以定义 sdk，而不是您构建的 sdk（这是 6.0），但您可以知道 minOS 是什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T23:49:51.437

尝试在插入 5.1 设备的情况下重新启动。

我的 iPod 5.1.1 已配置并已用于开发。如果我选择方案“iOS 设备”Xcode 4.5.2 拒绝运行，告诉我“Xcode 无法使用所选设备运行”。但是，当我将方案设置为“罗伯特的 iPod”（或其他）时，它确实有效。当我插入设备时，此选项不会立即显示，有时我似乎需要退出并重新启动 Xcode 和/或 iTunes（或重新启动）才能看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:28:10.257

使用 Xcode 4.5 时，您肯定可以在 iOS 5.1 设备上运行您的应用程序——我目前正在这样做。

如果您的设备配置为开发，您是否检查过 Xcode 管理器？转到管理器（左上角图标之一），从左侧列表中选择您的设备，然后单击“用于开发”（如果可用）。

希望这可以帮助。

# php - 如何在自己的控制器和模板中实现 SonataAdmin 表单

> ID：12837401
> 
> 赞同：0
> 
> 时间：2012-10-11T10:22:56.047
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

如何将 SonataAdmin 表单和列表实现到具有不同逻辑和模板的自己的控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:08:41.313

我建议你看看 Sonata\AdminBundle\Controller\CRUDController，那里有你需要的一切：

假设您有一个“用户”实体的管理员，并且该管理员的服务名称是“myapp.admin.user”（在 services.xml 或类似文件中）

在您的控制器中，您可以通过以下方式获取管理类：

```
$user_admin = $this->container->get('sonata.admin.pool')
        ->getAdminByAdminCode('myapp.admin.user'); 
```

您可以通过以下方式获取管理表单：

```
$form = $user_admin->getForm(); 
```

如果您查看该类中的 listAction() 方法，您可以看到如何获取用于构建列表的数据网格：

```
$datagrid = $user_admin->getDatagrid(); 
```

对于模板，您可以扩展或调整 Sonta/AdminBundle/Resources/views/CRUD 中的模板以用于列表和编辑操作。

# eclipse - 如何查看eclipse中的所有断点？

> ID：12837403
> 
> 赞同：77
> 
> 时间：2012-10-11T10:23:05.370
> 
> 标签：eclipse, breakpoints

我是 eclipse 的新手，我无法查看我放置的所有断点。我什至尝试过 Window --> Show View --> Breakpoints 但这也不起作用。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-11T11:09:55.517

正如其他用户建议的那样，查看所有断点：Window-> Show View -> Breakpoints。

要删除它们，有以下三种方法：

1.  选择断点并单击同一视图中显示的十字按钮。
2.  选择断点，右键单击并选择删除。（您也可以暂时禁用它并从此菜单中删除所有断点。）
3.  转到文件中的断点并双击它。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-06-04T05:52:16.343

这对我有用，就在今天，运行-> 删除所有断点

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-04T06:01:00.600

在右上角，有一个搜索栏（快速访问）。您可以在那里搜索断点并从选项中选择断点。所有的断点都会被列出来。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-24T07:37:55.747

您可以按照以下步骤删除所有断点。去

> 运行 -> 删除所有断点。

这将删除所有断点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-28T02:31:39.123

对于 Oxygen.3a，我使用：

*   Window > Perspective > Open perspective > debug，默认显示断点窗口。
*   然后 ALT + SHIFT + Q, B 切换窗口（或 Window > Show view > Breakpoints）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-25T14:05:01.490

转到Windows->显示视图->（其他）->（调试）->断点->取消选中所有调试点

并取消选中您已检查的所有调试点，再次以调试模式启动。它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-02T14:07:28.893

对于 Windows：按 Alt + Shift + Q、B

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-11T12:53:55.677

在底部有许多选项卡，例如控制台，开发模式等，例如明智的断点，您还可以在那里找到所有切换断点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-06T05:59:26.337

右键单击调试图标，然后单击重置。我希望它有帮助。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2021-03-22T16:51:18.870

转到**运行 > 删除所有断点**

# javascript - 使用 extjs4 生成或写入新的 JSON 文件

> ID：12837408
> 
> 赞同：0
> 
> 时间：2012-10-11T10:23:14.877
> 
> 标签：javascript, json, extjs

如何使用 extjs4 生成 JSON 文件？我有一个函数，它返回一个字符串列表，`Ext.encode`如下所示：

```
{"1145":        
    {
     "IN1":15,
     "IN2":6,
     "OUT1 Fix":11,
     "OUT1 Alt":3
     }
} 
```

然后如何将其存储到 JSON 文件中？我将 extjs4 与 MVC 模型一起使用，我的商店现在看起来像这样：

```
Ext.define('M.store.tempGraphData', {
  extend : 'Ext.data.Store',
  model : 'M.model.tempGraphDataModel',
  autoload : true,

  proxy : {
    //I guess this is where I should put something to write to my json file?
    }
  },
}); 
```

# javascript - Swipe.js 2.0 - 将 prev 和 next 函数绑定到不同的 Swipe 实例回调

> ID：12837416
> 
> 赞同：0
> 
> 时间：2012-10-11T10:23:48.037
> 
> 标签：javascript, swipe

我希望两个单独的元素从单个滑动实例中滑出，据我所知，您不能同时在两者上进行触摸移动，因此解决方案是将 prev 和 next 函数绑定到 Swipe 回调之一，但我不知道该怎么做？

如果我有两个滑动实例，一个带有回调：

```
var slider = new Swipe(document.getElementById('swipe'), {
  callback: function(index, elem) {
    //WHAT GOES HERE???
  }
});

var slider2 = new Swipe(document.getElementById('swipeTitles')); 
```

...我将如何绑定第二次滑动以模仿第一次的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:39:28.847

您可以将滑块存储到全局变量中（这可以通过丢失 var 部分来实现）并根据先前存储的当前索引手动调用 next() 或 prev()

```
 var slider = new Swipe(document.getElementById('swipe'), {
      callback: function(index, elem) {
        if(currentIndex<index)
             slider2.next();
        else
             slider2.prev();
        currentIndex = index;
      }
    });

/*NO VAR HERE!*/
slider2 = new Swipe(document.getElementById('swipeTitles')); 
```

# android - 如何在 Android 中创建古吉拉特语支持的语言键盘？

> ID：12837417
> 
> 赞同：-1
> 
> 时间：2012-10-11T10:23:52.260
> 
> 标签：android, keyboard, key, android-service, android-keypad

我想用古吉拉特语（印度语言）创建一个键盘，它的工作方式类似于 android 默认英文键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:27:43.193

使用[键盘视图](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)

[这](http://tutorials-android.blogspot.com/2011/06/create-your-own-custom-keyboard-for.html)是一个软键盘的示例项目。

# c# - 将 C Union 转换为 C#（不正确对齐）

> ID：12837418
> 
> 赞同：8
> 
> 时间：2012-10-11T10:24:05.410
> 
> 标签：c#, c, winapi, pinvoke

我想从 C# 调用[DhcpGetClientInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363286%28v=vs.85%29.aspx) API，但我有一个关于将此 C 结构转换为 C# 的问题：

```
typedef struct _DHCP_CLIENT_SEARCH_INFO {
  DHCP_SEARCH_INFO_TYPE SearchType;
  union {
    DHCP_IP_ADDRESS ClientIpAddress;
    DHCP_CLIENT_UID ClientHardwareAddress;
    LPWSTR          ClientName;
  } SearchInfo;
} DHCP_SEARCH_INFO, *LPDHCP_SEARCH_INFO; 
```

我认为正确的转换是这样的：

```
[StructLayout(LayoutKind.Explicit, Size=12)]
public struct DHCP_SEARCH_INFO
{
    [FieldOffset(0)]
    public DHCP_SEARCH_INFO_TYPE SearchType;
    [FieldOffset(4)]
    public DHCP_IP_ADDRESS ClientIpAddress;
    [FieldOffset(4)]
    public DHCP_BINARY_DATA ClientHardwareAddress;
    [FieldOffset(4), MarshalAs(UnmanagedType.LPWStr)]
    public string ClientName;
}; 
```

但这给出了 System.TypeLoadException: Additional information: Could not load type 'Dhcpsapi.DHCP_SEARCH_INFO' from assembly 'ConsoleApplication3, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 因为它在偏移量 4 处包含一个对象字段，即不正确地对齐或被非对象字段重叠。

这是其他类型的转换，以防您要编译：

```
public enum DHCP_SEARCH_INFO_TYPE : uint
{
    DhcpClientIpAddress = 0,
    DhcpClientHardwareAddress = 1,
    DhcpClientName = 2
};

[StructLayout(LayoutKind.Sequential)]
public struct DHCP_BINARY_DATA
{
    public uint DataLength;
    public IntPtr Data;
};

[StructLayout(LayoutKind.Sequential)]
public struct DHCP_IP_ADDRESS
{
    public UInt32 IPAddress;
} 
```

**编辑：**

我在 C 中验证了 sizeof 和偏移量：

```
#pragma comment(lib,"Dhcpsapi.lib")

int _tmain(int argc, _TCHAR* argv[])
{
    DHCP_SEARCH_INFO si;

    printf("sizeof(DHCP_SEARCH_INFO)=%d\n", sizeof(DHCP_SEARCH_INFO));

    printf("ClientIpAddress offset=%d\n", (PBYTE)&si.SearchInfo.ClientIpAddress - (PBYTE)&si);
    printf("ClientHardwareAddress offset=%d\n", (PBYTE)&si.SearchInfo.ClientHardwareAddress - (PBYTE)&si);
    printf("ClientName offset=%d\n", (PBYTE)&si.SearchInfo.ClientName - (PBYTE)&si);
    return 0;
} 
```

输出是：

```
sizeof(DHCP_SEARCH_INFO)=12
ClientIpAddress offset=4
ClientHardwareAddress offset=4
ClientName offset=4 
```

**编辑：** 根据 Camford 的回答，我将结构声明如下。使用 sizeof 也应该使其对 x64 正确。

```
[StructLayout(LayoutKind.Explicit, Size=12)]
public struct DHCP_SEARCH_INFO
{
    [FieldOffset(0)]
    public DHCP_SEARCH_INFO_TYPE SearchType;
    [FieldOffset(sizeof(DHCP_SEARCH_INFO_TYPE))]
    public DHCP_IP_ADDRESS ClientIpAddress;
    [FieldOffset(sizeof(DHCP_SEARCH_INFO_TYPE))]
    public IntPtr ClientName;
    [FieldOffset(sizeof(DHCP_SEARCH_INFO_TYPE))]
    public DHCP_BINARY_DATA ClientHardwareAddress;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T12:02:48.037

据我所知，您模拟联合的方式是正确的。您得到的异常可能与`string`您的结构中的对象有关。我试图在测试项目中构建您的代码。在结构中使用字符串时，我会遇到与您相同的异常。用 IntPtr 替换字符串，我没有得到任何异常。调用`DhcpGetClientInfo`是否会起作用，我不知道。您可以使用[`Marshal.StringToHGlobalUni`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobaluni.aspx)为您的字符串获取 IntPtr。

```
[StructLayout(LayoutKind.Explicit)]
public struct SearchInfo
{
    [FieldOffset(0)]
    public DHCP_IP_ADDRESS ClientIpAddress;
    [FieldOffset(0)]
    public DHCP_BINARY_DATA ClientHardwareAddress;
    [FieldOffset(0)]
    public IntPtr ClientName; //LPWSTR
}

[StructLayout(LayoutKind.Sequential)]
public struct DHCP_SEARCH_INFO
{
    public DHCP_SEARCH_INFO_TYPE SearchType;
    public SearchInfo SearchInfo;
} 
```

编辑：我想这意味着在 C# 中模拟联合与 C++ 中的联合有类似的要求。在 C++ 中，联合中只能有 POD 类型。在 C# 中，您可能只能有结构类型。

更新：感谢 DavidHeffernan 指出了一种更好的方式来布局内部带有联合的结构。你可以在下面阅读他的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:51:27.067

我相信最好的办法是添加 get/set 方法来......猜猜是什么......在变量中获取/设置正确的位。我相信你也必须把它包起来

就像是：

```
[StructLayout(LayoutKind.Sequential)]
public struct DHCP_SEARCH_INFO
{
    public DHCP_SEARCH_INFO_TYPE SearchType;
    public ulong Complex;
};

public struct DHCP_SEARCH_INFO_WRAP
{
   public DHCP_SEARCH_INFO_TYPE SearchType;
   private ulong Complex;

   public DHCP_IP_ADDRESS ClientIpAddress
   {
     get
     {
         return BitConverter.ToInt32(BitConverter.GetBytes(Complex),0);
     }
     set
     {
         byte[] orig = BitConverter.GetBytes(Complex);
         byte[] chng = BitConverter.GetBytes(value);
         Array.Copy(chng,0,orig,0,4);

     }
   }
   public DHCP_SEARCH_INFO_WRAP(ref DHCP_SEARCH_INFO var)
   {
      this.SearchType = var.SearchType;
      this.Complex = var.Complex;

   }

}; 
```

我这里直接写了，没有测试。

编辑：Camford 告诉我你可以在 C# 中使用联合，我错了。但似乎你只能模仿我支持我的解决方案的原始类型

# android - StageScaleMode.NO_BORDER，获取客户区高度

> ID：12837425
> 
> 赞同：0
> 
> 时间：2012-10-11T10:24:46.523
> 
> 标签：android, actionscript-3, air

根据[这篇文章](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html)`stage.fullStageWidth`，我可以使用&获得总屏幕面积`stage.fullStageHeight`。这个总大小包括工具栏。

如何检索客户区域，仅显示我的应用程序的区域？

该应用程序最初是为 iPad 开发的，我现在想使用几乎相同的代码在 Android 平板电脑上进行部署。大多数 android 选项卡的客户端高度约为 600 像素（横向），这意味着我的应用程序的底部 168 像素被裁剪，所以我需要做的就是检测高度并在运行时移动一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:51:23.697

据我了解，要知道客户区的大小（即显示 Flash 或应用程序的区域的大小），您需要使用 StageScaleMode.NO_SCALE。当您使用 NO_SCALE 时，可以使用 stage.stageWidth 和 stage.stageHeight 读取此大小（并通过侦听舞台上的 Event.RESIZE 检测到变化）。

在任何其他 StageScaleMode 中，stage.stageWidth 和 stage.stageHeight 将始终返回在创作时在应用程序的舞台属性中定义的舞台大小，并且在运行时永远不会改变。

# highcharts - Highchart：setExtremes（min，max）的堆叠列替换

> ID：12837426
> 
> 赞同：0
> 
> 时间：2012-10-11T10:24:48.810
> 
> 标签：highcharts

由于 highchart 中有大量数据，chart.xAxis[0].setExtremes(min, max) 似乎花费了太多时间。我想知道是否可以在创建图表时直接设置极值，例如在定义 xAxis 时：

```
xAxis: [{
    categories: periods
}], 
```

我怎样才能做到这一点？我在参考 api 中找不到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:03:49.680

您需要设置[xAxis.min](http://api.highcharts.com/highcharts#xAxis.min)和[xAxis.max](http://api.highcharts.com/highcharts#xAxis.max)属性。

# java - 使用 Java 从 XML 中提取数据

> ID：12837430
> 
> 赞同：3
> 
> 时间：2012-10-11T10:24:56.237
> 
> 标签：java, xml, xml-parsing

我有以下 XML 代码：

```
<CampaignFrameResponse
  xmlns="http://Qsurv/api"
  xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Message>Success</Message>
  <Status>Success</Status>
  <FrameHeight>308</FrameHeight>   
  <FrameUrl>http://delivery.usurv.com?Key=a5018c85-222a-4444-a0ca-b85c42f3757d&amp;ReturnUrl=http%3a%2f%2flocalhost%3a8080%2feveningstar%2fhome</FrameUrl> 
</CampaignFrameResponse> 
```

我想要做的是提取节点并将它们分配给一个变量。例如，我有一个名为`FrameHeight`包含 value的变量`308`。

这是我到目前为止的Java代码：

```
private void processNode(Node node) {
    NodeList nodeList = node.getChildNodes();
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node currentNode = nodeList.item(i);
       if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
            //calls this method for all the children which is Element
            LOG.warning("current node name: " + currentNode.getNodeName());
            LOG.warning("current node type: " + currentNode.getNodeType());
            LOG.warning("current node value: " + currentNode.getNodeValue());
            processNode(currentNode);
       }
    }

} 
```

这会打印出节点名称、类型和值，但是将每个值分配给适当命名的变量的最佳方法是什么？例如`int FrameHeight = 308`？

这是我更新的代码，其中 nodeValue 变量不断返回 null：

```
processNode(Node node) {
NodeList nodeList = node.getChildNodes();
for (int i = 0; i < nodeList.getLength(); i++) {
    Node currentNode = nodeList.item(i);
    if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
        //calls this method for all the children which is Element
        String nodeName = currentNode.getNodeName();
        String nodeValue = currentNode.getNodeValue();
        if(nodeName.equals("Message")) {
            LOG.warning("nodeName: " + nodeName); 
            message = nodeValue;
            LOG.warning("Message: " + message); 
        } 
        else if(nodeName.equals("FrameHeight")) {
            LOG.warning("nodeName: " + nodeName); 
            frameHeight = nodeValue;
            LOG.warning("frameHeight: " + frameHeight);
        }
        processNode(currentNode);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:28:25.903

您可以使用`DOM`, `SAX`, `Pull-Parser`，但最好使用以下 API。

**-** `JAXP & JAXB`

**-** `Castor`

**例如：DOM 解析**

```
DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder odb =  odbf.newDocumentBuilder();
            InputSource is = new InputSource(new StringReader(xml));
            Document odoc = odb.parse(is);
            odoc.getDocumentElement().normalize ();    // normalize text representation
            System.out.println ("Root element of the doc is " + odoc.getDocumentElement().getNodeName());
            NodeList LOP = odoc.getElementsByTagName("response");

                Node FPN =LOP.item(0);
                try{
                if(FPN.getNodeType() == Node.ELEMENT_NODE)
                    {

                    Element token = (Element)FPN;

                    NodeList oNameList1 = token.getElementsByTagName("user_id");
                    Element firstNameElement = (Element)oNameList1.item(0);
                    NodeList textNList1 = firstNameElement.getChildNodes();
                    this.setUser_follower_id(Integer.parseInt(((Node)textNList1.item(0)).getNodeValue().trim()));
                    System.out.println("#####The Parsed data#####");
                    System.out.println("user_id : " + ((Node)textNList1.item(0)).getNodeValue().trim());
                    System.out.println("#####The Parsed data#####"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T11:03:03.580

我在 Java 中使用 XML 已经有一段时间了（超过十年），并尝试了许多替代方法（自定义文本解析、专有 API、SAX、DOM、Xmlbeans、JAXB 等）。我学到了两件事：

*   坚持标准。切勿使用专有 API，而应使用标准 Java API（JAXP，包括 SAX、DOM、Stax 等）。您的代码将更具可移植性和可维护性，并且不会在 XML 库的某个版本发生更改和破坏兼容性时发生更改（这种情况经常发生）。
*   花点时间学习 XML 技术。我建议您至少了解 XSD、XSLT 和 XPath（XSLT 需要）的全面知识。如果你没有时间，那么专注于 XSD。
*   尽可能利用自动 XML 代码生成/解析。这意味着了解 XSD。从长远来看，它回报了最初的努力，随着时间的推移，代码更易于维护，解析/编组得到了极大的优化（通常比使用“手动”JAXP API 更优化）和 XML 验证（你已经拥有 XSD）可以执行（更少的检查代码，安全的格式错误的 XML 使您的应用程序崩溃，更少的集成工作）。最棒的是，您只需编写 XSD 代码，几乎所有处理数据所需的 Java 代码（Java Bean）都会为您生成。

Knowadays 每当我必须解析一些这样的 XML 时，我倾向于使用代码生成。其标准是 JAXB（xmlbeans 已死，其他替代品可能没有成熟或广泛使用）。在您的情况下，我将定义一个 XSD，尽可能详细地定义您的文档（即，如果您使用只能有多个值的字符串，请不要使用“xs:string”类型，而是使用枚举类型）。它可能看起来像这样：

```
<xs:schema attributeFormDefault="unqualified"
    elementFormDefault="qualified" targetNamespace="http://Qsurv/api"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="CampaignFrameResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element type="xs:string" name="Message" />
                <xs:element type="Status" name="Status" />
                <xs:element type="xs:short" name="FrameHeight" />
                <xs:element type="xs:anyURI" name="FrameUrl" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <<xs:simpleType name="Status">
        <xs:annotation>
            <xs:appinfo>
                <jaxb:typesafeEnumClass>
                    <jaxb:typesafeEnumMember name="SUCCESS"
                        value="Success" />
                    <jaxb:typesafeEnumMember name="FAILURE"
                        value="Failure" />
                </jaxb:typesafeEnumClass>
            </xs:appinfo>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="Success" />
            <xs:enumeration value="Failure" />
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

现在是使用 JAXB 工具（请参阅 xjc 编译器选项）生成代码并查看有关如何将生成的 Java Bean 从/到 XML 编组/解组的一对示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:48:48.387

Xstream 在您的情况下不支持，它可用于将对象转换为 xml 然后再返回。如果您的 xml 是从 CampaignFrameResponse 类的实例生成的，您可以使用 xstream。

否则，您只需检查

```
String nodeName = currentNode.getNodeName()
String nodeValue = currentNode.getNodeValue() ;
if( nodeName.equals("Message")){
     message = nodeValue ;
} else if( nodeName.equals("FrameHeight") {
     frameHeight = nodeValue ;
} 
```

如果需要 int 值，则需要解析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T11:23:43.830

您当然可以创建名称-值映射并在遍历 XML 时更新映射。在解析结束时，您可以在地图中查找特定的键。Java 不允许您以编程方式创建变量，因此您将无法根据 XML 数据生成具有其名称的变量。

除了样式和可读性之外，您从 XML 填充数据结构的决定取决于 XML 的定义有多完善以及它的模式将来可能会改变多少。您可以问自己以下问题：节点名称将来可以更改吗？是否可以引入限制本节的 XML 小节？这可能会帮助您选择特定的解析器（SAX/DOM 或更高级别的对象解析 API）。

当然，如果您无法控制 XML 定义，那么除了解析已有的内容外，您几乎无能为力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:32:20.993

我不建议直接解析 xml（除非您被迫这样做），而是使用外部库，例如[http://x-stream.github.io/](http://x-stream.github.io/)。这个想法是您可以创建一个代表您的 xml 模式的对象，并且库将为您填充该对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T10:32:43.643

我建议使用 - [x-stream.github.io](http://x-stream.github.io/) - 带有一些分界注释，您可以非常快速地从 XML 创建对象，而编码很少。

# php - 在数组中查找总和等于给定数字的元素的组合和

> ID：12837431
> 
> 赞同：4
> 
> 时间：2012-10-11T10:24:59.947
> 
> 标签：php, algorithm

> **可能重复：**
> [算法：根据属性总和提取子集](https://stackoverflow.com/questions/12807855/algorithm-extract-subset-based-on-property-sum)

在简单的情况下，我们有一个数组：

{6, 1, 3, 11, 2, 5,12}

我们想知道该数组中包含的元素总和的所有组合，以获得**12**。

在这种情况下，我们将得到**四种**组合：

*   12
*   1 + 11
*   6 + 5 + 1
*   1 + 3 + 2 + 6

那么，我们如何在 BASIC 或 PHP 中做到这一点？也许首先是伪代码;-)。

我一直在寻找，但只是与预定数量的元素组合在一起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T11:20:14.707

你可以试试

```
echo "<pre>";

$sum = 12 ; //SUM
$array = array(6,1,3,11,2,5,12);
$list = array();

# Extract All Unique Conbinations
extractList($array, $list);

#Filter By SUM = $sum
$list = array_filter($list,function($var) use ($sum) { return(array_sum($var) == $sum);});

#Return Output
var_dump($list); 
```

输出

```
array
  0 => 
    array
      1 => string '1' (length=1)
      2 => string '2' (length=1)
      3 => string '3' (length=1)
      4 => string '6' (length=1)
  1 => 
    array
      1 => string '1' (length=1)
      2 => string '5' (length=1)
      3 => string '6' (length=1)
  2 => 
    array
      1 => string '1' (length=1)
      2 => string '11' (length=2)
  3 => 
    array
      1 => string '12' (length=2) 
```

使用的功能

```
function extractList($array, &$list, $temp = array()) {
    if (count($temp) > 0 && ! in_array($temp, $list))
        $list[] = $temp;
    for($i = 0; $i < sizeof($array); $i ++) {
        $copy = $array;
        $elem = array_splice($copy, $i, 1);
        if (sizeof($copy) > 0) {
            $add = array_merge($temp, array($elem[0]));
            sort($add);
            extractList($copy, $list, $add);
        } else {
            $add = array_merge($temp, array($elem[0]));
            sort($add);
            if (! in_array($temp, $list)) {
                $list[] = $add;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T10:32:34.810

问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)。即使确定是否存在总和为所需数字的问题的任何子集也是 NP-Hard（称为[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)），并且没有已知的多项式解决方案。

因此，您应该寻找指数解决方案，例如回溯解决方案 - 生成所有可能的组合，并检查它们是否有效。

您可以使用修剪来更快地进行搜索（例如，如果您生成 sum 13 的部分子集，则无需检查作为该子集超集的其他子集，因为它们肯定不会导致解决方案。

伪代码：

```
findValidSubsets(sum,arr,idx,currSolution):
   if (sum == 0):
       print currSolution
   if (sum < 0): //trim the search, it won't be succesful
       return
   //one possibility: don't take the current candidate
   findPermutations(sum,arr,idx+1,currSolution) 

   //second poassibility: take the current candidate
   currSolution.add(arr[idx])
   findPermutations(sum-arr[idx],arr,idx+1,currSolution)

   //clean up before returning: 
   currSolution.removeLast() 
```

复杂性是`O(2^n)`- 需要在最坏的情况下生成所有 2^n 个可能的子集
Invoke with `findValidSubsets(desiredSum,myArray,0,[])`，其中`[]`是一个空的初始列表

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T10:56:23.300

使用动态编程，您可以将解决方案表示为

```
solver(sum,start_index)
     stop_condition_here_when sum <= 0

     r=0
     for  i=start_index ; i < last_iddex :
            r += solver(sum - array[i],i+1)
            r += solver(sum ,i+1)
     return r 
```

添加额外的备忘录也会加速这个程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:28:28.030

您可以迭代集合的长度。在每个步骤中，检查长度的所有子集`k`：

```
for k = 1 to size(input):
    foreach permutation p of length k:
        if sum(p) == 12:
            bam! 
```

# c++ - 用c ++初始化数组中的特定下标项

> ID：12837433
> 
> 赞同：3
> 
> 时间：2012-10-11T10:25:05.803
> 
> 标签：c++, arrays, initialization

> **可能重复：**
> [C++ 中单个元素的静态数组初始化](https://stackoverflow.com/questions/9048883/static-array-initialization-of-individual-elements-in-c)

在 C 中，我可以像这样初始化数组中的特定下标项：

```
int array[100] = {[22] = {1}, [33] = {33}}; 
```

但是这个片段不能被 g++ 编译。那么如何通过 C++ 初始化数组中的特定下标项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:46:40.930

好吧，我正在等待像你这样的目标：D

在 C++ 中，我们有`std::array`-`std::std::initializer_list`那么为什么不将这两件事结合在一起，以使其工作：

```
int main() {
   CArray<int, 7> a { E[1] = 13, E[6] = 14 };
   for (int i = 0; i < 7; ++i) {
      std::cout << a[i] << std::endl;
   } 
} 
```

并产生这个输出：

```
0
13
0
0
0
0
14 
```

那么，魔法在哪里？

`std::array`从`std::initializer_list<EIV_t<T>>`哪里初始化：

```
template <class T>
struct EIV_t {
  size_t i;
  T      v;
}; 
```

新的 std::array：

```
template <class T, size_t N>
class CArray : private std::array<T,N> {
  typedef std::array<T,N> Base;
public:
  CArray() : Base() {}
  CArray(std::initializer_list<T> l) : Base(l) {}
  CArray(std::initializer_list<EIV_t<T>> l) : Base() {
     for (auto i = l.begin(); i != l.end(); ++i) {
         (*this)[i->i] = i->v;
     }
  }

  // well, private inheritance has its cost
  using Base::operator [];
  // a lot of missing...
}; 
```

剩下的魔法：

```
class EI_t {
public:
  EI_t(size_t i) : i(i) {}
  template <class T>
  EIV_t<T> operator = (const T& v) const
  {
     return EIV_t<T> { i, v };
  }
private:
  size_t i;
}; 
class E_t {
public:
  EI_t operator [] (size_t i) const { return EI_t(i); }
}; 
E_t E; 
```

完整示例：http: [//ideone.com/nzWL0](http://ideone.com/nzWL0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:27:24.610

你不能。这不是合法的 C++ 代码。

您需要初始化整个数组，然后再分配特定元素。也许：

```
int array[100] = {};
array[22] = 1;
array[33] = 33; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:29:20.167

仅在 C 中允许下标初始化，在 C++ 中不允许。您可以在此处查看详细文档[http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/language_ref/aryin.htm](http://publib.boulder.ibm.com/infocenter/compbgpl/v9v111/index.jsp?topic=/com.ibm.xlcpp9.bg.doc/language_ref/aryin.htm)

如果要初始化每个元素，可以在声明数组并在以下行中初始化值之后进行；

```
#include<iostream>
using namespace std;

int main(){
    int arr[100];
    arr[22]=33;
    arr[33]=66;
    cout<<arr[22]<<"\t"<<arr[33];
    return 0;
} 
```

它产生以下输出：

```
$ ./a.exe
33      66 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:27:29.647

你不能，你只能在事后分配它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:28:57.483

你可以写 ：

```
array[22] = 1;
array[33] = 33; 
```

# java - 菜单栏中的菜单项未激活，无法选择或单击

> ID：12837434
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:10.603
> 
> 标签：java, gwt, web, smartgwt, menubar

我有问题。我正在 gwt 中编写一个 Web 应用程序。我想要一个菜单​​栏这是我的代码：

```
Menu[] menus = new Menu[2];
        MenuBar plikMenu = new MenuBar();

        Menu menuPlik = new Menu();

        MenuItem itemZmianaHasla = new MenuItem("Zmiana hasła...");
        //MenuItem itemDodajUzytkownika = new MenuItem("Dodaj użytkownika...");
        MenuItem itemDodajUzytkownika = new MenuItem("Dodaj użytkownika...");

        itemDodajUzytkownika.addClickHandler(new com.smartgwt.client.widgets.menu.events.ClickHandler() {

            public void onClick(final MenuItemClickEvent event) {               

                DodajUzytkownika uzytkownik = new DodajUzytkownika();
                uzytkownik.center();
                uzytkownik.show();

            }
        });
        MenuItem itemUsunUzytkownika = new MenuItem("Usuń użytkownika");
        MenuItem itemDodajGrupe = new MenuItem("Dodaj grupę...");
        MenuItem itemZarzadzanieSesjami = new MenuItem("Zarządzanie sesjami");
        MenuItemSeparator separator = new MenuItemSeparator();

        MenuItem itemZarzadzanieLicencjami = new MenuItem("Zarządzanie licencjami");
        MenuItem itemRaporty = new MenuItem("Raporty");
        MenuItem itemBackupOracle = new MenuItem("Backup Oracle...");
        MenuItem itemPrzywracanieOracle = new MenuItem("Przywracanie Oracle...");
        MenuItem itemEksportLogiczny = new MenuItem("Eksport logiczny");
        MenuItem itemWyjscie = new MenuItem("Wyjście");
        menuPlik.setItems(itemZmianaHasla, itemDodajUzytkownika, itemUsunUzytkownika,itemDodajGrupe,itemZarzadzanieSesjami,separator, itemZarzadzanieLicencjami,itemRaporty,separator, itemBackupOracle,itemPrzywracanieOracle,itemEksportLogiczny,itemWyjscie);
        menuPlik.setTitle("Plik");
        menuPlik.setWidth(100);
        menus[0] = menuPlik;

        Menu menuPomoc = new Menu();
        menuPomoc.setShowShadow(true);
        menuPomoc.setShadowDepth(10);
        MenuItem itemLicencja = new MenuItem("Licencja...");
        MenuItem itemPodrecznikAdministratora = new MenuItem("Podręcznik administratora...");
        MenuItem itemOProgramie = new MenuItem("O programie...");
        menuPomoc.setItems(itemLicencja, itemPodrecznikAdministratora, itemOProgramie);
        menuPomoc.setTitle("Pomoc");
        menuPomoc.setWidth(80);
        menus[1] = menuPomoc;        
        plikMenu.addMenus(menus, 0);    
        plikMenu.setWidth(80);
        plikMenu.enable();

        dialogHTopPanel.addMember(plikMenu); 
```

我使用 smartgwt 组件。带有项目的菜单栏是可见的，但是如果我想单击其中一个，则什么也没有发生。即使该项目没有突出显示。有谁知道我做错了什么？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:30:55.187

您需要指定处理菜单单击操作的事件。

例如，如果您想向一个菜单项添加一个操作，您应该按如下方式执行此操作

```
MenuItem itemRaporty = new MenuItem("Raporty");
itemRaporty.addClickHandler(new ClickHandler() {

    public void onClick(final MenuItemClickEvent event) {
        //processClickEvent();
    }
}); 
```

# asp.net - 将 .dll 动态添加到 Web 应用程序中

> ID：12837435
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:11.013
> 
> 标签：asp.net

我需要将程序集添加到我的 asp.net 应用程序中，而不将本地副本添加到 bin 文件夹，而不将其添加到 GAC。它应该是路径引用，如 C:\bin 并且此文件夹不是应用程序的子文件夹。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:30:32.367

您可以为此使用反射：

```
System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFrom("path here"); 
```

使用该`assembly`实例，您可以即时执行方法，并且几乎可以完成所有工作。

另外值得注意的是，对于 ASP.NET，您以在操作系统中具有较少权限的不同用户身份运行，因此必须对 DLL 所在的文件夹设置适当的权限。

# django - 模板加载位置

> ID：12837440
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:15.143
> 
> 标签：django

我是 django 的新手，通过做小应用程序来学习。在views.py 中，我故意包含了一个不存在的模板文件（.html）。

```
t = get_template('current_datetimeP.html') 
```

在setting.py TEMPLATE_DIRS = ("D:/Django_Code/mysite/templates/", )

我在 /time/收到此错误**TemplateDoesNotExist**

Django 尝试按以下顺序加载这些模板：Using loader django.template.loaders.filesystem.Loader: **D:\Django_Code\mysite\templates\current_datetimeP.html（文件不存在）**

因为我在 settings.py 中包含了 D:\Django_Code\mysite\templates\ ，所以 Django 在那里很好，但是接下来呢

我也得到这个

使用加载器 django.template.loaders.app_directories.Loader: **C:\Python27\lib\site-packages\django\contrib\auth\templates\current_datetimeP.html（文件不存在）**

**为什么**Django 在这里查看 * *C:\Python27\lib\site-packages\django\contrib\auth\templates**。它是搜索模板的默认位置吗？

还有一件事，很明显 Django 正在查看上面的目录。我们可以将模板文件放在那里而不是放在应用程序目录中吗？（虽然这不是一个好习惯）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:31:13.393

模板加载由 settings.py 中的 TEMPLATE_LOADERS 设置控制，通常看起来像这样：

```
TEMPLATE_LOADERS = (
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.filesystem.Loader',
) 
```

应用程序目录加载器在设置中 INSTALLED_APPS 中列出的任何应用程序的“模板”文件夹中查找模板。

文件系统加载器尝试从设置文件中 TEMPLATE_DIRS 下列出的完全限定目录路径名加载模板。

如果您希望提供文件系统加载器首选项，请将其放在 TEMPLATE_LOADERS 设置中的应用程序目录加载器之前。如果您想关闭应用程序目录加载，请使用 # 将其注释掉（或将其从元组中删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:49:35.320

尝试使用使用 settings.py 位置创建的模板路径

```
import os
DIRNAME = os.path.dirname(__file__)
TEMPLATE_DIRS = (
    os.path.join(DIRNAME, "templates"),
)

TEMPLATE_LOADERS = (
'django.template.loaders.filesystem.load_template_source',
'django.template.loaders.app_directories.load_template_source',
) 
```

# php - 在 API Explorer 文档中丢失“.json”

> ID：12837449
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:34.493
> 
> 标签：php, restler

首先让我说 Restler 中的新 API Explorer 很棒。对它的添加感到非常高兴。现在，以典型的方式，让我抱怨一些对我不起作用的东西......

Restler 可以返回多种格式的结果这一事实是一个非常好的功能，但我目前没有使用它（选择只使用 JSON 作为我的返回格式）。在 API Explorer 中，我希望所有对 .json 的引用都不会显示，因为这只会使服务架构的外观复杂化。

这是一个简单的例子：

```
class Users {
/**
* Preferences
*
* Preferences returns a dictionary of name-value pairs that provide input to applications that want to make user-specific decisions
* 
* @url GET /{user_id}/preferences
**/

function preferences ($user_id , $which = 'all') {
    return  "$which preferences for {$user_id}";
}

/**
* GET Sensors
*
* Get a list of all sensors associated with a user.
*
* @url GET /{user_id}/sensor 
**/
function sensor ($user_id) {
    return "sensor";
}

/**
* GET Sensors by Type
*
* @param $user_id The user who's sensors you are interested in
* @param $type The type of sensor you want listed. 
*
* @url GET /{user_id}/sensor/{type}
**/ 
function sensor_by_type ($user_id, $type) {
    return "specific sensor";
}

/**
* ADD a Sensor
*
* @param $user_id The user who you'll be adding the sensor to
*
* @url POST /sensor
**/ 
function postSensor() {
    return "post sensor";
} 
```

}

在此示例中，API Explorer 如下所示： ![在此处输入图像描述](../Images/74e97f694a19169c2c0cdb661e454e8d.png)

我要删除的基本问题是删除所有“.json”引用，因为没有可选 .json 的调用结构可以正常工作。

此外，对于那些确实希望 .json 出现的人来说，还有一个次要问题是这个后项修饰符在哪里出现？在上面的示例中，您将 .json 附加到 GET 中的“用户”元素和 PUT 中的“传感器”元素。这与 HTTP 操作无关，而是似乎选择了紧接在第一个变量之前的元素，这对用户来说可能不直观，实际上在 Restler 中不是必需的（至少我的印象是你可以附加.json 链中的任何位置并获得所需的效果）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T01:02:05.520

我们使用更安全的默认值，适用于所有人，但使其完全可配置。

如果您更喜欢`.json`在最后添加，请将以下内容添加到 index.php（网关）

```
use Luracast\Restler\Resources;
Resources::$placeFormatExtensionBeforeDynamicParts = false; 
```

如果您不想添加`.json`扩展，请将以下内容添加到 index.php

```
use Luracast\Restler\Resources;
Resources::$useFormatAsExtension = false; 
```

# html - 如何使用文本输入字段在谷歌中搜索给定的字符串？

> ID：12837451
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:42.493
> 
> 标签：html

嗨，我正在使用此表单代码输入获取文本字段。在该文本字段中，我将输入一些字符串进行搜索，然后按提交按钮。当我单击提交按钮时，它会在谷歌搜索引擎中显示搜索结果如何执行此操作。

```
 <!DOCTYPE html>
    <html>
    <body>
    <form name="input" action="index.html" method="get">
    Search:<input type="text" name="user">
    <input type="submit" value="Submit">
    </form>
    </body>
    </html> 
```

谁能帮我？提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:31:04.873

您可以为此使用 Google[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:55:08.357

简单地模仿谷歌的做法。关键项是字符串的`action`属性和名称的使用：`q`

```
<!doctype html>
<meta charset=utf-8>
<title>Google search</title>
<form action="http://www.google.com/search">
<label for=q>Keyword(s):</label>
<input type=text name=q size="32" id=q>
<input type="hidden" name="ie" value="utf-8">
<input type="hidden" name="oe" value="utf-8">
<input type="submit" value="Search">
</form> 
```

# php - 如何使用 javascript 或 php 检测窗口关闭事件

> ID：12837453
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:45.660
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [javascript检测浏览器关闭选项卡/关闭浏览器](https://stackoverflow.com/questions/3888902/javascript-detect-browser-close-tab-close-browser)

我正在用 php 做一个实时游戏网站，我希望在关闭浏览器时调用一个函数，我如何检测使用 php 或 javascript 关闭浏览器？我曾尝试使用 onbeforeunload 和 onunload 事件，但发现即使窗口被刷新或使用后退按钮、前进按钮等进行导航也会触发这些事件。而且这些事件在所有流行的浏览器中都无法正常工作。是否有任何可能的方法来仅检测在所有浏览器中都表现良好的窗口关闭事件？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:43:39.460

您可以在 PHP 中设置一个会话（具有超时），当您访问该网站时将其设置为 1，并具有一个 Ajax 函数，该函数每 20 秒运行一次任务，该函数调用一个将会话再次设置为 1 的函数。

当用户关闭浏览器并且 Ajax 调用不再运行时，会话将超时并设置为 0/null。因此，当您重新访问该站点时，会话将为 0，然后您可以重定向/对用户执行您想要的操作。

```
 setInterval(function(){
      $.ajax({
        url: '/',
        success: function(){
          //do stuff with data
            //Like send a POST/GET that 
            //if isset sets the session 1 again
        }
      });
    }, 20000); 
```

# jquery - 使用 json 服务器的 Drupal 服务

> ID：12837456
> 
> 赞同：0
> 
> 时间：2012-10-11T10:25:50.060
> 
> 标签：jquery, web-services, drupal-6

我的问题是如何在不使用库的情况下在 jquery 中生成哈希密钥，或者有没有任何方法不通过哈希码但使用密钥身份验证。

```
$.ajax({
     type: "POST",
     url: "http://mydomain.com/services/json-rpc",
     dataType: "json",
     data: {
            "method":"node.get", 
            "params":{"hash":"c30eb6b7c256dc4888e2077d0fe44d49b63c07eae7a4bb9e595ad1410ab3992d","domain_name":"http://localhost/drupalclient","domain_time_stamp":"1350026093","nonce":"e0ace29286bdcf88b7f2","nid":44}
           },
            success: function(response){
            console.log(response);
          }
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:54:26.327

我包含一个 js 来生成哈希码，现在我的问题解决了。;)

# r - 如何使用高级字符串匹配对数据进行子集化

> ID：12837462
> 
> 赞同：11
> 
> 时间：2012-10-11T10:26:05.363
> 
> 标签：r, string-matching, subset

我有以下数据框，我想根据匹配的字符串从中提取行。

```
> GEMA_EO5
gene_symbol  fold_EO  p_value                           RefSeq_ID      BH_p_value
       KNG1 3.433049 8.56e-28              NM_000893,NM_001102416    1.234245e-24
      REXO4 3.245317 1.78e-27                           NM_020385    2.281367e-24
      VPS29 3.827665 2.22e-25                 NM_057180,NM_016226    2.560770e-22
    CYP51A1 3.363149 5.95e-25              NM_000786,NM_001146152    6.239386e-22
      TNPO2 4.707600 1.60e-23 NM_001136195,NM_001136196,NM_013433    1.538000e-20
      NSDHL 2.703922 6.74e-23              NM_001129765,NM_015922    5.980454e-20
     DPYSL2 5.097382 1.29e-22                           NM_001386    1.062868e-19 
```

因此，我想根据 $RefSeq_ID 中的匹配字符串提取例如两行，这适用于以下内容：

```
> list<-c("NM_001386", "NM_020385")
> GEMA_EO6<-subset(GEMA_EO5, GEMA_EO5$RefSeq_ID %in% list, drop = TRUE)

> GEMA_EO6

gene_symbol  fold_EO  p_value RefSeq_ID    BH_p_value
      REXO4 3.245317 1.78e-27 NM_020385  2.281367e-24
     DPYSL2 5.097382 1.29e-22 NM_001386  1.062868e-19 
```

但是有些行有几个用逗号分隔的 RefSeq_ID，所以我正在寻找一种通用的方法来判断 $RefSeq_ID 是否包含某个字符串模式，然后对该行进行子集化。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-11T10:43:45.740

要进行部分匹配，您需要使用正则表达式（请参阅 参考资料`?grepl`）。这是针对您的特定问题的解决方案：

```
##Notice that the first element appears in 
##a row containing commas
l = c( "NM_013433", "NM_001386", "NM_020385") 
```

要一次测试一个序列，我们只需选择一个特定的 seq id：

```
R> subset(GEMA_EO5, grepl(l[1], GEMA_EO5$RefSeq_ID))
  gene_symbol fold_EO p_value                           RefSeq_ID BH_p_value
5       TNPO2   4.708 1.6e-23 NM_001136195,NM_001136196,NM_013433  1.538e-20 
```

为了测试多个基因，我们使用`|`运算符：

```
R> paste(l, collapse="|")
[1] "NM_013433|NM_001386|NM_020385"
R> grepl(paste(l, collapse="|"),GEMA_EO5$RefSeq_ID)
[1] FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE 
```

所以

```
subset(GEMA_EO5, grepl(paste(l, collapse="|"),GEMA_EO5$RefSeq_ID)) 
```

应该给你你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T15:38:16.083

另一种方法是将重复条目识别`RefSeq_ID`为尝试在单个数据框中表示两个数据库表。所以如果原表是`csv`，则将数据规范化为两张表

```
Anno <- cbind(key = seq_len(nrow(csv)), csv[,names(csv) != "RefSeq_ID"])
key0 <- strsplit(csv$RefSeq_ID, ",")
RefSeq <- data.frame(key = rep(seq_along(key0), sapply(key0, length)),
                     ID = unlist(key0)) 
```

并认识到查询是表`subset`上的（选择）`RefSeq`，然后是`merge`与 Anno 的（连接）

```
l <- c( "NM_013433", "NM_001386", "NM_020385")
merge(Anno, subset(RefSeq, ID %in% l))[, -1] 
```

导致

```
> merge(Anno, subset(RefSeq, ID %in% l))[, -1]
  gene_symbol  fold_EO  p_value   BH_p_value        ID
1       REXO4 3.245317 1.78e-27 2.281367e-24 NM_020385
2       TNPO2 4.707600 1.60e-23 1.538000e-20 NM_013433
3      DPYSL2 5.097382 1.29e-22 1.062868e-19 NM_001386 
```

也许目标是与“主”表合并，然后

```
Master <- cbind(key = seq_len(nrow(csv)), csv)
merge(Master, subset(RefSeq, ID %in% l))[,-1] 
```

或类似的。

# php - PhpStorm中PHP扩展的函数和类

> ID：12837463
> 
> 赞同：4
> 
> 时间：2012-10-11T10:26:08.520
> 
> 标签：php, phpstorm, yaf, phalcon

当给定扩展文件夹路径的 php.ini 文件的路径时，是否可以为 PHPStorm 之类的 IDE 获取扩展功能？我看到 EasyPHP 在它旁边列出了与它一起交付的那些扩展的扩展功能，但它没有显示手动安装的 Yaf 和 Phalcon 的任何功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:36:09.537

对于**Phalcon——**获取**Phalcon 开发者工具**（[http://phalconphp.com/download）——](http://phalconphp.com/download)它包含 IDE 可用于代码完成的存根文件：[https ://github.com/phalcon/phalcon-devtools/树/master/ide/phpstorm](https://github.com/phalcon/phalcon-devtools/tree/master/ide/phpstorm)

对于**Yaf** - 类似的方法（在 IDE 中使用的存根文件）：[https ://github.com/suin/phpstorm-yaf-doc](https://github.com/suin/phpstorm-yaf-doc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:31:00.713

由于此框架是 php 扩展，因此请确保您已在 IDE 中正确配置了 php 包含路径。

config -> PHP -> 并在其中添加类似**/usr/share/php的内容** *（您的位置）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T13:16:53.793

我使用 packagist 上提供的存根并用 composer 安装它们。[https://packagist.org/packages/sneakybobito/phalcon-stubs](https://packagist.org/packages/sneakybobito/phalcon-stubs)

作曲家.json

```
{
    "require": {
        "sneakybobito/phalcon-stubs": "1.2.3"
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T17:20:06.853

对于已编译的扩展，您将需要一个包含函数名称的存根文件。由于最新版本的 PHP 包含扩展的反射功能[您可以获取扩展定义的类和函数，然后反射它们以获取它们的参数]，它们应该可以生成它们。

我正在尝试[https://github.com/schmittjoh/php-stubs](https://github.com/schmittjoh/php-stubs)但 PHP svn 服务器目前已关闭，因此无法运行...稍后将尝试返回此处并更新作品。

# php - Symfony2 - Doctrine2 FK 命名策略

> ID：12837464
> 
> 赞同：1
> 
> 时间：2012-10-11T10:26:14.670
> 
> 标签：php, symfony, oracle10g, doctrine-orm

大家好，我目前正在研究基于 oracle 数据库的大型多环境外联网应用程序。由于我们的模式不仅被 ap 使用，我们需要有精确的命名约定。经过一番研究，我仍然想知道是否有办法实现 Doctrine2 FK 或任何约束命名策略来避免 oracle fk_xxxxxxxxx 自动生成的名称。当然基于sf2框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:41:09.850

Doctrine2 文档站点中有一个部分讨论了[实施命名策略](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/namingstrategy.html)，是否涵盖了它？

**编辑**

就这个到 Symfony2 的链接而言，您需要在捆绑包中注册服务，并在 config.yml 中引用它：

```
orm:
    default_entity_manager: em1
    entity_managers:
        em1:
            mappings:
                YamlBundle: ~
            naming_strategy: my_bundle.naming_strategy.default 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T14:19:32.370

我研究了完全相同的问题。

维护者的意见是，**学说不希望您覆盖外键约束的命名策略**。

来源：[https ://github.com/doctrine/doctrine2/issues/3753#issuecomment-244025830](https://github.com/doctrine/doctrine2/issues/3753#issuecomment-244025830)

# asp.net-mvc - 我可以将 JSON 而不是模型从我的控制器传递到我的 Razor 视图吗

> ID：12837465
> 
> 赞同：0
> 
> 时间：2012-10-11T10:26:16.490
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我有一个继承以下观点的观点： -

```
@model MvcApplication.Models.Application 
```

但是我需要知道是否可以像传递模型对象一样将 JSON 对象传递给我的视图？因为我有以下控制器： -

```
public ActionResult ListPackages()
{
    using (var client = new WebClient())
    {
        var query = HttpUtility.ParseQueryString(string.Empty);
        //code goes here ....
        return Content(json, "application/json");
    }
} 
```

它使用 API 调用返回 JSON，然后我使用 JavaScript 在视图上显示 JSON，如下所示：

```
 $.ajax({
            url: $('#geturl').data('url'),
            type: 'GET',
            cache: false,
            success: function (result) {
                $.each(result.data, function (key, val) {
                    var str = val.packageName;
                    $('<li/>', { text: str })
                        .appendTo($('#products'));
                });
            } 
```

使用 JavaScript 显示 JSON 的问题在于，我很难轻松地使用 JSON 对象，例如基于返回的 JSON 创建链接或创建包含 JSON 的表。所以我的问题是：是否可以将 JSON 对象而不是 Model 对象从我的控制器传递到我的视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:42:05.667

## 服务器与客户端的混淆

你在这里说两件事：

1.  创建视图：控制器将模型传递给服务器端的视图，使用 JSON 这样做没有多大意义，因为正在将内存中的对象传递给视图引擎。

2.  在客户端使用 JSON 数据：您在这里谈论的是客户端-服务器 Ajax 通信，您从客户端请求数据并从服务器返回 JSON。这*可以说与传递给视图的模型数据无关*

## 使用 JSON 的最佳解决方案

为了在客户端上轻松使用 JSON 数据（在您的情况下是一组包）以生成生成的填充 HTML，需要在客户端使用某种模板。jQuery 曾经有非最终模板插件，[现在是一个单独的项目](https://github.com/jquery/jquery-tmpl)。我有很好的经验，但也有其他插件。使用您对其语法最满意的一种。

## 把这些模板放在哪里？

1.  如果您知道在创建视图时从服务器传递的 JSON 对象的结构，则可以将模板放在视图本身中，它们将等待直到在客户端上使用。

2.  如果您不知道 JSON 对象的结构，则必须将模板传递给 JSON 对象或作为单独的请求。

第一种方法是通常的方法，第二种方法很少使用并且更具动态性。

## 不使用 JSON 的最佳解决方案

如果您不喜欢将 JSON 解析为 HTML 结果（手动或使用模板），您始终可以向控制器操作发出 Ajax 请求，这将返回准备好的 HTML 作为部分视图而不是 JSON 结果。这样，您可以轻松地将 HTML 放到您的页面上，而无需任何 JSON 数据操作。

你在这里有什么收获？好吧，假设您的应用程序中有此功能：

1.  您有一个显示包的分页列表的视图。
2.  当用户第一次访问页面时，包裹的第一页正在返回
3.  分页到下一页是通过 Ajax 完成的，并且列表正在被返回的数据替换

如果要为后续的 Ajax 请求创建局部视图，则可以在主视图中使用相同的局部视图来显示包的第一页。这将确保您只需要更改一个局部视图，并且显示会在初始页面加载以及随后的包分页时发生变化。

如果您使用视图 + JSON + 模板，则意味着您必须维护包列表的**两种**表示形式：用于第一页的视图和显示后续分页的模板。

## 那是哪一个？

在所有条件相同的情况下，它使第二种解决方案更好。但是当然选择取决于您的情况（事情不相等），您应该能够确定哪一个在您的情况下是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:44:21.530

不，你不能。视图必须是模型的强类型。因此，一种解决方案是将此 JSON 反序列化为模型对象，然后再将其传递给视图：

```
public ActionResult ListPackages()
{
    using (var client = new WebClient())
    {
        var query = HttpUtility.ParseQueryString(string.Empty);
        //code goes here ....

        var model = new JavaScriptSerializer().Deserialize<MyViewModel>(json);
        return View(model);
    }
} 
```

where`MyViewModel`当然会反映您正在使用的 JSON 结构。

# css - Firefox li href CSS 选择器

> ID：12837471
> 
> 赞同：0
> 
> 时间：2012-10-11T10:26:46.220
> 
> 标签：css, firefox

我使用 CSS 设置了一些列表项 (li) 的样式。样式应用于 li 中的 a 选择器。它适用于 Chrome、IE 和 Safari，但不适用于 Firefox：

```
<ul class="organisations">
   <li class="community-care"><a href="http://adviceglos.org.uk/organisation-type/community-care/" title="View all posts in Community Care" >Community Care</a></li>
</ul> 
```

这是CSS：

```
ul.organisations li.community-care a {
background-image: -webkit-gradient(linear,center top,center bottom,color-stop(0%,#5CBCC4),color-stop(100%,#38939B));
background-image: -webkit-linear-gradient(#5CBCC4 0,#38939B 100%);
background-image: -moz-linear-gradient(#5CBCC4 0,#38939B 100%);
background-image: -o-linear-gradient(#5CBCC4 0,#38939B 100%);
background-image: -ms-linear-gradient(#5CBCC4 0,#38939B 100%);
background-image: linear-gradient(#5CBCC4 0,#38939B 100%);
background-color: #5CBCC4;
border: 1px solid #318188;
border-bottom-color: #245E63;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:37:11.467

像这样申请`-moz`firefox：

```
background: -moz-linear-gradient(#BF698C 0px, #93506D 100%) repeat scroll 0 0 transparent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:02:50.610

您的样式表中有语法错误。特别是，第 529 行是：

```
background-image: -o-linear-gradient((#eeeeee 0,#ccc 100%) !important; 
```

请注意，您的开放括号比封闭括号多一个。在符合规范的 CSS 解析器（不包括 WebKit）中，这会导致 UA 将匹配的 close paren 之前的所有内容视为 background-image 值的一部分。在这种情况下，这就是样式表的所有其余部分，因此忽略此点之后的所有规则。

进一步注意，Firefox 确实在其错误控制台中报告了这个问题，这就是我发现它的方式......

# javascript - 用胶水连接/使用 Mustache JS 连接

> ID：12837472
> 
> 赞同：5
> 
> 时间：2012-10-11T10:26:49.337
> 
> 标签：javascript, mustache

我正在尝试使用 Mustache 显示一系列项目，并且我想用逗号分隔符显示它们。

这是我的对象：

```
{"items": [
    {"display": "Item 1"},
    {"display": "Item 2"},
    {"display": "Item 3"},
    {"display": "Item 4"}
]} 
```

这是我的 Mustache JS 模板：

```
{{#items}}{{display}}, {{/items}} 
```

不幸的是，这将呈现为：

```
Item 1, Item 2, Item 3, Item 4, 
```

我想删除最后一个“，”，因为它在视觉上看起来很奇怪。

我尝试了函数，但我得到了“{{items}}”文本，而不是数组`items`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-29T21:30:16.973

您可以使用 Mustache 函数。它们像任何其他部分一样在您的模板中定义，然后在它们包裹的内容上运行。对于您的情况，它看起来像这样：

```
{
  "items": [
    {"display": "Item 1"},
    {"display": "Item 2"},
    {"display": "Item 3"},
    {"display": "Item 4"}
  ],
  "trim": function () {
    return function (text, render) {
      return render(text).replace(/(,\s*$)/g, ''); // trim trailing comma and whitespace 
    }
  }
} 
```

然后您的 Mustache 标记将如下所示：

```
{{#trim}}{{#items}}{{display}}, {{/items}}{{/trim}} 
```

你的输出将是你所追求的：

```
Item 1, Item 2, Item 3, Item 4 
```

在[jsfiddle](http://jsfiddle.net/cxsszj6z/)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:08:00.713

我知道解决这个问题的两种方法，首先是编写自己的迭代器助手（这是最好的解决方案），其次是手动删除（使用 DOM 处理）尾随昏迷。

只需使用您的 javascript ( `$("selector").html()`) 找到文本，然后对其进行切片。

```
var html = jQuery("selector").html();
html = html.slice(0, html.length-1); 
```

这样你就剪掉了最后一个字符。

# c# - windows应用程序中的字符串变量声明

> ID：12837473
> 
> 赞同：0
> 
> 时间：2012-10-11T10:26:53.920
> 
> 标签：c#

我在 C# 中声明了一个字符串变量，就像在 Windows 应用程序中的 VS2010 Express 中一样，

```
string strVariable = string.Empty;
//ContextUtil.DeactivateOnReturn = true;           
try
{
XmlDocument xmlSourceDoc = new XmlDocument();
xmlSourceDoc.LoadXml(strXmlDocument);
strVariable = xmlSourceDoc.DocumentElement.GetAttribute("attire"); 
```

在调试时我`strVariable`看了一下，它说像

> 当前上下文中不存在名称“strVariable””。

`xmlSourceDoc.DocumentElement.GetAttribute("attire")`当我投入观看时，还有一件事我得到了结果。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:31:11.180

重建您的解决方案并尝试。

添加以上行后，您的项目似乎无法正确构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:32:52.483

除了定义它之外，您还在代码中使用该变量吗？很多时候，对于未使用的变量，它们会被编译器修剪掉，因为您没有做任何影响控制流或数据状态的事情。尝试放置另一行来测试它是否为 == String.Empty，如果是，则对其进行处理...应该欺骗编译器将其包含在内。

# codeigniter - Codeigniter HMVC 模块错误

> ID：12837475
> 
> 赞同：0
> 
> 时间：2012-10-11T10:26:56.173
> 
> 标签：codeigniter, hmvc

我是 CI + MX 的新手，我尝试了 Modules::run(); 风格，但我似乎无法让它发挥作用。

这是我的目录结构：

```
/application
-/modules
--/main
---/controllers
----main.php
---/models
---/views
--/connections
---/controllers
----connections.php
---/models
----/group_model.php
---/views
----connection_view.php 
```

main.php 控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Main extends MX_Controller {
function __construct(){
    parent::__construct();  
    $this->load->helper('url');

}
function index(){
    echo modules::run('connections/load_connections');      
}
}
?> 
```

connections.php 控制器：

```
<?php
class Connections extends CI_Controller{

function __construct(){
    parent::__construct();  
    $this->load->helper('url');

    $this->load->model('connections/group_model');
}

function load_connections(){
    $user_id = 2;           
    $data['tabs'] = $this->group_model->get_groups($user_id);                                       
    $this->load->view('connection_view', $data);        

}
}
?> 
```

group_model.php 模型：

```
class Group_model extends CI_Model{

function __construct(){
    parent::__construct();          
}

/**
 * Get all groups in db
 **/    
function get_groups($user_id){
    $this->db->select('g.group_name');
    $this->db->from('groups AS g');
    $this->db->join('members AS m', 'g.group_id = m.group_id');
    $this->db->where('m.user_id', $user_id);
    return $this->db->get()->result_array();
}
} 
```

我的 connection_view.php 视图包含一个 div 和一些 php 代码，用于显示在 load_connections 函数中作为数组传递的 $data['tabs']。

问题是，我收到一条错误消息：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Connections::$group_model

Filename: controllers/connections.php

Line Number: 14 
```

和

```
Fatal error: Call to a member function get_groups() on a non-object in    C:\xampp\htdocs\hmvc\application\modules\connections\controllers\connections.php on line 14 
```

我已经清楚地遵循了[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)上的 MX wiki 上提供的所有说明， 并根据需要设置了所有内容。我的 /application/config 下的 database.php 已经配置好了。routes.php 也被配置为将默认控制器指向 main.php

我想知道我错过了什么或做错了什么，我无法让它发挥作用。

```
Codeigniter 版本：2.1.3
MX 版本：5.4

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:58:32.410

几乎错过了，扩展与 MX_Controller 的连接，因为您正在调用 modules::run()。每当您希望使用 modules::run() 调用控制器时，您都可以使用 MX_Controller 而不是 CI_Controller 对其进行扩展

* * *

您的第二个错误是由于您的第一个错误引起的。

您的第一个错误很可能是因为它无法打开 group_model。

尝试这个

```
$this->load->model('group_model'); 
```

# debugging - 如果 MATLAB 中出现错误，如何禁用 dbstop

> ID：12837486
> 
> 赞同：17
> 
> 时间：2012-10-11T10:27:26.400
> 
> 标签：debugging, matlab

如果经常发生我`dbstop if error`在 MATLAB 命令行中键入以捕获和调试错误，但除了进入调试菜单和窗口（我不知道如何在新的 2012b 版本中找到它）之外还有其他方法`dbstop if error`在命令行中禁用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-11T10:30:36.220

从文档[`dbclear`](http://www.mathworks.se/help/matlab/ref/dbclear.html)

> `dbclear if error`删除使用`dbstop if error`and`dbstop if error identifier`语句设置的断点。

# .net - 如何真正滚动和缩放 MS 图表控件？

> ID：12837492
> 
> 赞同：1
> 
> 时间：2012-10-11T10:27:43.643
> 
> 标签：.net, scroll, mschart, zooming, dundas

我正在使用 MS Chart 控件 4 做一个趋势应用程序。

我将缩放和滚动与鼠标滚轮和右键集成在一起，这使控件具有不同寻常的平滑度。

但是，我意识到**ChartArea.Axis 方法实际上`ScaleView.Scroll`并`ScaleView.Zoom`没有缩放或滚动**网格、标签和带状线。

相反，它缩放和滚动点系列，但保持网格标签不变，并且只调整标签值。

例如，如果我想将此示例图表向右滚动：

![在此处输入图像描述](../Images/fde0e61c11c27c4515a35841900c8b6e.png)

我有这个。

![在此处输入图像描述](../Images/c679250738a0a13e9dac46ec8151f8bf.png)

基本上，这就是我想要实现的目标：

![在此处输入图像描述](../Images/9055ad152854b543eb94b5305eecfb44.png)

如何使用 MS Chart 控件实现真正的滚动和缩放？

**编辑：**我设法通过将 X 值设置为 DateTimes 来获得想要的行为。但是，我想在 X 轴上使用双精度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:56:54.870

似乎这种行为是设计使然：只有 DateTime 类型的轴值允许我的图表平滑滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T19:00:31.950

您可以根据 ScaleView.Position 手动调整 IntervalOffset

每当图表更新时调用此代码（例如在 AxisViewChanged 和 AxisScrollBarClicked 事件上）

```
if (chart1.ChartAreas[0].AxisY.ScaleView.IsZoomed)
{
    double offset = chart1.ChartAreas[0].AxisY.Minimum - chart1.ChartAreas[0].AxisY.ScaleView.Position;

    chart1.ChartAreas[0].AxisY.LabelStyle.IntervalOffset = offset;
    chart1.ChartAreas[0].AxisY.MajorGrid.IntervalOffset = offset;
    chart1.ChartAreas[0].AxisY.MajorTickMark.IntervalOffset = offset;
    chart1.ChartAreas[0].AxisY.MinorGrid.IntervalOffset = offset;
    chart1.ChartAreas[0].AxisY.MinorTickMark.IntervalOffset = offset;
}
else
{
    chart1.ChartAreas[0].AxisY.LabelStyle.IntervalOffset = 0;
    chart1.ChartAreas[0].AxisY.MajorGrid.IntervalOffset = 0;
    chart1.ChartAreas[0].AxisY.MajorTickMark.IntervalOffset = 0;
    chart1.ChartAreas[0].AxisY.MinorGrid.IntervalOffset = 0;
    chart1.ChartAreas[0].AxisY.MinorTickMark.IntervalOffset = 0;
} 
```

# mysql - 具有矛盾限制的 MYSQL SELECT

> ID：12837495
> 
> 赞同：1
> 
> 时间：2012-10-11T10:27:55.643
> 
> 标签：mysql, datetime, limit

有一个带有一个日期字段的表

问题是：有没有办法选择今天之后的 10 条记录和今天之前的 10 条记录 :)

当然，而不是进行两次查询

```
 SELECT xxxx FROM xxxx WHERE thedate >= 'date' ORDER BY thedate DESC LIMIT 10 
```

和

```
 SELECT the same WHERE thedate < 'date' ORDER BY thedate ASC LIMIT 10 
```

限制是首选。只是因为速度。

日期字段中的数据是不可预测的。可以有一个或两个具有相同日期的记录或没有日期记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:30:33.287

```
 SELECT xxxx FROM xxxx WHERE thedate >= 'date' ORDER BY thedate DESC LIMIT 10
union all
SELECT xxxx FROM xxxx WHERE thedate < 'date' ORDER BY thedate ASC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:31:05.347

```
SELECT xxxx FROM xxxx WHERE thedate > CURDATE() ORDER BY thedate DESC LIMIT 10
union
SELECTxxxx FROM xxxx WHERE thedate < CURDATE() ORDER BY thedate ASC LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:31:31.707

您可以减去两个日期并将差异设为绝对值：

```
SELECT xxxx FROM xxxx ORDER BY ABS(UNIX_TIMESTAMP(thedate) - UNIX_TIMESTAMP('date')) 
```

[但是，使用UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)加入两个查询会容易得多：

```
SELECT ... UNION SELECT ... 
```

# android - 地图画布覆盖 Android 上的其他元素

> ID：12837500
> 
> 赞同：1
> 
> 时间：2012-10-11T10:28:15.577
> 
> 标签：android, cordova, jquery-mobile, google-maps-api-3

我正在使用 PhoneGap 在 Android 上编写一个应用程序，我希望地图是屏幕的 100% 宽度和高度。问题是当我在 android 设备上运行应用程序时，所有 DOM 元素（如 div）都没有显示在我的地图上方。例如，弹出窗口被触发，但它们位于地图画布下（设置高 z-index 无济于事）。

在浏览器（FF，Chrome）上运行时，一切正常。Android默认浏览器有问题吗？有谁知道如何解决这个问题？

例子：

```
<a href="" data-role="button">button</a> 
```

我无法让这个简单的 JQM 按钮显示在地图上方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:05:16.190

所以解决方案是要注意包含 js/css 文件的顺序。因此，如果您正在使用 JQM、google-maps-api 和 phone gap 编写应用程序，您应该记住：

首先包括css文件，例如 `<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />`

然后这个google api声明 `<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>`

之后 jquery .js 文件 `<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>`

下一个 jquery ui 映射文件，如 `<script type="text/javascript" src="jquery.ui.map/jquery.ui.map.js"></script>`

最后是 jquery 移动脚本文件（我认为这是我犯错的地方）

`<script type="text/javascript" src="jquery.ui.map/jquery.ui.map.js"></script>`

# php - 订阅和 MySQL 数据库结构

> ID：12837501
> 
> 赞同：1
> 
> 时间：2012-10-11T10:28:16.793
> 
> 标签：php, mysql, datetime, time, subscriptions

只是匆匆忙忙，

我的数据库中有一个开始订阅服务的日期...

根据您的经验，您认为将到期期限记录为时间是否更好。所以我可以将时间添加到 date_created 以查看它是否已过期...或者我应该只是锻炼它将在 php 中结束的日期并将其放入数据库中的日期时间？

因此，订阅长度为 TIME 或 DATETIME。

问我是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:38:11.783

我会使用结束日期，这样您只需在将记录添加到数据库时进行一次计算。每隔一次，您可以将当前日期与到期日期进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:41:27.500

我很想保存开始日期，就好像您只存储到期日期并且您想将订阅长度从一个月更改为三个月，您必须尝试计算原始开始日期日期，然后重新添加您的新订阅长度。

# javascript - 添加新条目后刷新下拉列表

> ID：12837502
> 
> 赞同：0
> 
> 时间：2012-10-11T10:28:21.260
> 
> 标签：javascript, ruby-on-rails

在我的 ruby​​ on rails 应用程序中，我有标题下拉列表，它应该在添加新标题后刷新。

我尝试了以下成功的ajax调用，但它不起作用。

```
success: function(data)
{
     alert("Header Added Successfully");
     $('#proj_qn_header_id').selectmenu();
     $('#proj_qn_header_id').selectmenu("refresh");
}, 
```

在表单中选择标签

```
 <tr style="height:40px;">
        <td width="35%">
          <%= f.label :header_id,"Header" %>
        </td>
        <td>
          <%= f.select :header_id,Header.all.collect { |mp| [mp.header, mp.header_id]}, {:prompt=>"Please select"},:id=>"proj_qn_header_id" %>
        </td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:20:53.130

我尝试了下面的代码，它有效。

```
success: function(response)
{    
    var newOption = '<option value="' + response + '">' + newHeader + '</option>'
    $('#proj_qn_header_id').append(newOption).selectmenu('refresh');
} 
```

# asp.net-mvc - 如何在pdf文件中添加图片

> ID：12837503
> 
> 赞同：0
> 
> 时间：2012-10-11T10:28:23.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3, pdf-generation

我已使用[此](http://www.semanticarchitecture.net/www/pdf-reporting-using-asp-net-mvc/)博客在我的项目中添加动态 pdf。当我尝试添加图像时，它迫使我在 C:\ 中有一个图像文件夹。如何从项目中添加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:34:45.060

这似乎是使用 html 视图页面来呈现 PDF，因此您可以`img`像在任何 html 页面中一样使用普通标签。

使用剃刀语法，您可以执行以下操作：

```
<img alt="" src="@Url.Content("~/Content/Images/mypic.png")" /> 
```

* * *

我相信[这可能会解决您的问题](http://forums.asp.net/t/1596224.aspx/1)。本质上，您希望将完整的 web url 指定为`src`，`img`例如：

```
<img alt="" src="www.example.com/images/mypic.png" /> 
```

# tridion - Tridion 过滤器：替换 SetCustomMetaQuery

> ID：12837506
> 
> 赞同：2
> 
> 时间：2012-10-11T10:28:27.563
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

Broker 查询机制（Tridion 2011）中 SetCustomMetaQuery 的替代品是什么？通过我之前发布的[这篇文章](https://stackoverflow.com/questions/12390664/tridion-replacement-for-query-queryoperator-method)，我得到了很多帮助。

为了

```
query.SetCustomMetaQuery("KEY_NAME='Key' AND KEY_STRING_VALUE >= 'Yes'"); 
```

我试过

```
CustomMetaValueCriteria criteria1 = new CustomMetaValueCriteria(new CustomMetaKeyCriteria("Key"), "Yes");
mainCriteria =CriteriaFactory.And(mainCriteria, criteria1);
query.Criteria = mainCriteria; 
```

但是我被困在其中一个滤波器 CT 中的以下两个示例中。

```
query.SetCustomMetaQuery("(((KEY_NAME='EventStartDate' AND 
KEY_DATE_VALUE >= '" + lowerDate + "')) or
((KEY_NAME='EventEndDate' AND KEY_DATE_VALUE >= '" + lowerDate + "')))"") 
```

和

```
query.SetCustomMetaQuery("KEY_NAME = 'Publication_Issue_Date' and 
((convert(varchar(10), key_date_value, 101) = convert(varchar(10), 
cast('" + sIssueDate + "' as datetime), 101)) or
key_string_value like '%" + dtIssue[%=nNumber%].Year + "-0" + dtIssue[%=nNumber%].Month + "-" + dDay[%=nNumber%] + "%')"); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:08:06.037

请尝试：

```
CustomMetaValueCriteria criteria1 = new CustomMetaValueCriteria(new CustomMetaKeyCriteria("Key"), "Yes", Criteria.GreaterThanOrEqual); 
```

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:00:31.863

以为我会对此有所尝试，所以可能会很远！

第一个例子怎么样：

```
CustomMetaValueCriteria criteria1 = new CustomMetaValueCriteria(new CustomMetaKeyCriteria("EventStartDate"), lowerDate, Criteria.GreaterThanOrEqual);
CustomMetaValueCriteria criteria2 = new CustomMetaValueCriteria(new CustomMetaKeyCriteria("EventEndDate"), lowerDate, Criteria.GreaterThanOrEqual);

OrCriteria or = new OrCriteria(criteria1, criteria2); 
```

假设“lowerDate”是一个日期时间。

第二个有点令人困惑，它看起来像是检查是否存在“Publication_Issue_Date”和任何等于**sIssueDate**变量的 KEY_DATE_VALE**或者**在日期的起始日期中有一个字符串元数据值。那会是这样的吗？

```
CustomMetaKeyCriteria criteria1 = new CustomMetaKeyCriteria ("Publication_Issue_Date")
CustomMetaValueCriteria criteria2 = new CustomMetaValueCriteria(sIssueDate);
AndCriteria andCriteria = new AndCriteria(criteria1, criteria2);

string dt = dtIssue[%=nNumber%].Year + "-0" + dtIssue[%=nNumber%].Month + "-" + dDay[%=nNumber%];
CustomMetaValueCriteria criteria3 = new CustomMetaValueCriteria(dt, Criteria.Like)

OrCriteria or = new OrCriteria(andCriteria, criteria3); 
```

干杯

# jquery - jQuery 选项卡返回 false；

> ID：12837510
> 
> 赞同：0
> 
> 时间：2012-10-11T10:28:43.427
> 
> 标签：jquery

只是一个快速的，这是令人沮丧的！

我有三个标签，它们只是从字面上淡入​​并隐藏其他标签内容。很基础。

只是不知道如何阻止将页面发送到顶部的链接，这不是一个大问题，但很烦人。

这里有 jQuery。

 `````
<script>
     jQuery("#accounttab").live('click', function(){

        jQuery("#accounttab").css("border", "2px solid #009FE3");
        jQuery("#salestab").css("border", "2px solid white");
        jQuery("#delivertab").css("border", "2px solid white");

        jQuery("#tabtext1").fadeIn(200);
        jQuery("#tabtext2").hide();
        jQuery("#tabtext3").hide();
    return false;
    }); 

     jQuery("#salestab").live('click', function(){

        jQuery("#salestab").css("border", "2px solid #009FE3");
        jQuery("#accounttab").css("border", "2px solid white");
        jQuery("#delivertab").css("border", "2px solid white");

        jQuery("#tabtext1").hide();
        jQuery("#tabtext2").fadeIn(200);
        jQuery("#tabtext3").hide();

    return false;
    }); 

     jQuery("#delivertab").live('click', function(){

        jQuery("#delivertab").css("border", "2px solid #009FE3");
        jQuery("#accounttab").css("border", "2px solid white");
        jQuery("#salestab").css("border", "2px solid white");

        jQuery("#tabtext1").hide();
        jQuery("#tabtext2").hide();
        jQuery("#tabtext3").fadeIn(200);

    return false;
    });

</script> 
````  `任何建议都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:50:56.287

[***工作演示***](http://jsfiddle.net/nbrooks/ctnPS/)

HTML

```
<div id='parent'>
<a href='#' id='acounttab' class='tablink'> Account </a>
<a href='#' id='salestab' class='tablink'>Sales </a>
<a href='#' id='delivertab' class='tablink'>Deliver </a>
</div>
<div id='tabtext1'>Account - Here you go!</div>
<div id='tabtext2'>Sales - Here you go!</div>
<div id='tabtext3'>Deliver - Here you go!</div>​ 
```

CSS

```
div[id^="tabtext"] { display:none; }​ 
```

Javascript

```
$(function() {
    $('#parent').on('click', 'a.tablink', function(e) {
        e.preventDefault();

        $(this).css("border", "2px solid #009FE3");
        $('a.tablink').not(this).css("border", "2px solid white");

        var i = $(this).index('a.tablink');
        var tab = $('#tabtext'+(i+1)).fadeIn(200);
        $('div[id^="tabtext"]').not(tab).hide();

        return false;
    });
});

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:55:43.607

你可以缩短你的代码，如：

**html**

```
<a id="accounttab" class='actab' href="#">Test1</a>
<a id="salestab" class='sltab' href="#">Test2</a>
<a id="delivertab" class='dtab' href="#">Test3</a>

<br /><br/>
<div id="tabtext1" class='actab'>Div test 1</div>
<div id="tabtext2" class='sltab'>Div test 2</div>
<div id="tabtext3" class='dtab'>Div test 3</div> 
```

**js**

```
var tabsArr = ['#accounttab', '#salestab', '#delivertab'];
var joined = tabsArr.join(", ");

$(joined).live("click", function(e) {
    e.preventDefault();
    var selectedClass = $(this).attr("class");
    $("div[class!='"+selectedClass+"']").css("border", "2px solid white").hide();
    $("div[class='"+selectedClass+"']").css("border", "2px solid #009FE3").fadeIn(200);    
}); 
```

演示：[jsFiddle](http://jsfiddle.net/VBpxA/4/)``

# sql - 为什么其中一个查询没有返回任何行？

> ID：12837511
> 
> 赞同：-4
> 
> 时间：2012-10-11T10:28:46.827
> 
> 标签：sql, sql-server-2008

我有两个这样的查询：

查询 #1：

```
SELECT * 
FROM dbo.Products 
WHERE CAST(ID AS VARCHAR) IN ('6', '8', '9', '10', '12', '14', '110', '106') 
```

查询 #2：

```
SELECT * 
FROM dbo.Products 
WHERE CAST(ID AS VARCHAR) IN (SELECT ('6'', ''8'', ''9'', ''10'', ''12'', ''14'', ''110'', ''106')) 
```

为什么第二个查询不返回任何行？当第一个查询返回一些行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:32:35.300

您的查询＃2中有太多单引号......

另外：如果`ID`是数字列 - 为什么不直接使用

```
SELECT * 
FROM dbo.Products 
WHERE ID IN (6, 8, 9, 10, 12, 14, 110, 106) 
```

容易得多，没有不必要的`CAST`参与......

另外：如果您真的需要`CAST`- 我建议您始终**为**您**的**`VARCHAR`! 否则，您可能会得到截断的字符串......

所以使用： `CAST(ID AS VARCHAR(100))`而不仅仅是 `CAST(ID AS VARCHAR)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:31:41.320

第二个查询将值视为单个字符串

**在IN 子句**中使用时，您必须使用 ''（单引号）来分隔字符值

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:31:52.113

> 为什么第二个查询不返回任何行？当第一个查询返回一些行时。

因为第二个查询`SELECT`中`IN`谓词中的语句[**返回的值*只*返回一个字符串值**](https://data.stackexchange.com/stackoverflow/query/82257)，即：

```
6','8','9','10','12','14','110','106 
```

因此，您最终会将转换后的 int ID 值与一个字符串值进行比较，`6','8','9','10','12','14','110','106'`因此您的查询仍会像这样进行评估

```
SELECT * 
FROM dbo.Products 
WHERE CAST(ID AS VARCHAR)  = ''6','8','9','10','12','14','110','106''; 
```

`IN`但是在第一个查询的子句中有不同的字符串值：

```
6   8   9   10  12  14  110 106 
```

但是，您根本不需要将其转换为 varchar：

```
SELECT * 
FROM dbo.Products 
WHERE ID IN (6, 8, 9, 10, 12, 14, 110, 106) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:32:59.107

第二个查询等价于：

```
SELECT * 
FROM dbo.Products 
WHERE CAST(ID AS VARCHAR) IN ('6'', ''8'', ''9'', ''10'', ''12'', ''14'', ''110'', ''106') 
```

甚至这个：

```
SELECT * 
FROM dbo.Products 
WHERE CAST(ID AS VARCHAR) = '6'', ''8'', ''9'', ''10'', ''12'', ''14'', ''110'', ''106' 
```

因此，它不返回任何行，因为您没有带有 ID 的行`6', '8', '9', '10', '12', '14', '110', '106`**

# ios - System.ExecutionEngineException：仅在设备上的调试模式下尝试 JIT 编译方法 (MonoTouch)

> ID：12837517
> 
> 赞同：6
> 
> 时间：2012-10-11T10:29:03.887
> 
> 标签：ios, xamarin.ios, jit, aot

我有以下方法：

```
ApiResponse<T> PostMultipart<T>(string uploadUrl, NameValueCollection formParamters, params UploadFile[] uploadFiles); 
```

UploadFile 只是一个 Poco：

```
public class UploadFile
{
    public string FilePath { get; set; }
    public string ContentType { get; set; }
    public string ParameterName { get; set; }
} 
```

通过调用该方法，在带有“Debug|iPhoneSimulator”的模拟器和带有“Release|iPhone”的 iOS 5.1.1 的 iPod Touch 上一切正常。

但是，当我开始在设备上调试应用程序（“Debug|iPhone”）时，出现以下异常：

> System.ExecutionEngineException：在使用 --aot-only 运行时尝试 JIT 编译方法“Xyz.Api.ApiClient:PostMultipart (string,System.Collections.Specialized.NameValueCollection,Xyz.Api.UploadFile[])”。有关详细信息，请参阅[http://docs.xamarin.com/ios/about/limitations](http://docs.xamarin.com/ios/about/limitations)。

我在链接页面上看不到任何相关信息。而且我真的不明白为什么这种行为只在手机上调试时才会发生。

其他人能够理解这里发生了什么吗？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T13:02:14.313

您的代码示例不够完整（无法复制），但这*很可能*是因为您`<T>`是值类型（例如`int`，枚举...）。

AOT 编译器难以为无法共享代码的值类型生成代码（就像它可以用于任何引用类型一样）。解决方法包括：

*   *提示*AOT 编译器您需要什么（确保`<T>`已知并为您正在使用的值类型生成代码）；

*   使用引用类型（例如 a `string`）而不是值类型（例如 an `int`）

> 而且我真的不明白为什么这种行为只在手机上调试时才会发生。

iOS 设备不允许 JITting 代码（Apple 的限制），因此使用 AOT。iOS模拟器没有这个限制，所以使用JIT（因为它比AOTing代码快**很多）。**

# css - 如何在facebook留言簿插件（html5版本）中自定义css样式？

> ID：12837519
> 
> 赞同：2
> 
> 时间：2012-10-11T10:29:05.923
> 
> 标签：css, facebook, html, plugins

加载页面后，我可以看到 facebook 插件 (HTML5) 使用 Firebug 等特定工具生成的巨大 css 代码，我可以对其进行更改。但是如何在不使用 Firebug 的情况下更改样式？我试图覆盖我的 css 代码中的类，但我的代码被插件忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:37:33.287

如果通过留言簿您的意思是 facebook 评论，诀窍是将其包装在 div 中，如下所示：

```
<div id="comments">
    <fb:comments xid="XXXXXXXXXXXXXXX" numposts="15"></fb:comments>
</div> 
```

然后在你的CSS中你可以做

```
#comments { 
    width: 100%; 
    float: left; 
    font-family: Arial, Helvetica, sans-serif; 
    color: #ff6600; 
}
#comments a { color: #ff6600; } 
```

等等，对于完整的样式信息，这个链接应该可以帮助你 [http://www.daddydesign.com/wordpress/how-to-customize-the-facebook-comments-social-plugin-on-a-static-fbml-tab /](http://www.daddydesign.com/wordpress/how-to-customize-the-facebook-comments-social-plugin-on-a-static-fbml-tab/)

# java - 适用于 Android 的 Feed 阅读器

> ID：12837520
> 
> 赞同：0
> 
> 时间：2012-10-11T10:29:07.760
> 
> 标签：java, android, rss-reader

我需要构建一个 android 的提要阅读器，但我不知道从哪里开始。我知道java编程的基础，我会很感激一些指导方针。谁能帮我 ？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:38:14.433

我简单的谷歌并得到了这些：

1.  [Android RSS 提要阅读器示例](http://iamvijayakumar.blogspot.com/2012/06/android-rss-feed-reader-example.html)
2.  [Android RSS阅读器教程](http://automateddeveloper.blogspot.com/2010/08/android-rss-reader-tutorial.html)
3.  [android-feed 阅读器](http://code.google.com/p/android-feed-reader/)
4.  [Android 开发教程 - 一个简单的 Twitter 订阅源阅读器](http://codehenge.net/blog/2011/05/android-programming-tutorial-a-simple-twitter-feed-reader/)
5.  [构建移动 RSS 阅读器](http://www.ibm.com/developerworks/xml/tutorials/x-androidrss/)
6.  [Android 示例应用程序：](http://www.androiddevblog.net/android/android-sample-application-simple-rss-reader)基于 5 的简单 RSS 阅读器

# android - android - 如何剪切图像的某些部分并在imageview中显示

> ID：12837523
> 
> 赞同：10
> 
> 时间：2012-10-11T10:29:13.180
> 
> 标签：android, imageview, scale

我只想在 imageview 中显示图像的一部分。见下图。 ![图像部分](../Images/d3e1a7edc692d6d60f2b74a6dfc8f02c.png)

可以在 google+ 应用程序中找到相同的示例，您可以在其中看到所有带有图像的帖子。

任何链接，代码都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T10:35:14.623

```
// Set some constants
private static final Bitmap SOURCE_BITMAP = BitmapFactory.decodeFile(....); // Get the source Bitmap using your favorite method :-)
private static final int START_X = 10;
private static final int START_Y = 15;
private static final int WIDTH_PX = 100;
private static final int HEIGHT_PX = 100;

// Crop bitmap
Bitmap newBitmap = Bitmap.createBitmap(SOURCE_BITMAP, START_X, START_Y, WIDTH_PX, HEIGHT_PX, null, false);

// Assign new bitmap to ImageView
ImageView image = (ImageView)findViewById(R.id.image_view);
image.setImageBitmap(newBitmap); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T10:34:32.563

使用此代码

```
int width = bitmapOrg.width();
int height = bitmapOrg.height();
int newWidth = 200;
int newHeight = 200;

// calculate the scale - in this case = 0.4f
float scaleWidth = ((float) newWidth) / width;
float scaleHeight = ((float) newHeight) / height;

// createa matrix for the manipulation
Matrix matrix = new Matrix();
// resize the bit map
matrix.postScale(scaleWidth, scaleHeight);

// recreate the new Bitmap
Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, 
                  width, height, matrix, true); 

// make a Drawable from Bitmap to allow to set the BitMap 
// to the ImageView, ImageButton or what ever
BitmapDrawable bmd = new BitmapDrawable(resizedBitmap);

ImageView imageView = new ImageView(this);

// set the Drawable on the ImageView
imageView.setImageDrawable(bmd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T14:44:07.760

如果有人想从底部剪切图像

```
// recreate the new Bitmap
Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, x, y, 
                  width, height, matrix, true); 
```

用此逻辑替换以下参数

y : (bitmapOrg.getHeight() - 1) - （问题中红框的高度）

高度：（问题中红框的高度）

这样你可以避免异常，例如（对于 x 你需要相应地修改）

```
IllegalArgumentException: x + width must be <= bitmap.width() in android

IllegalArgumentException: y + width must be <= bitmap.height() in android 
```

# python - SQLAlchemy/Pyramid DBSession 刷新问题

> ID：12837527
> 
> 赞同：2
> 
> 时间：2012-10-11T10:29:24.427
> 
> 标签：python, mysql, sqlalchemy, pyramid

这是我的场景：第一个视图呈现表单，数据进入第二个视图，我将其存储在 DB（MySQL）中并重定向到第三个视图，该视图显示了写入 db 的内容：

```
Stoing to db:
    DBSession.add(object)
    transaction.commit()

DB Session:
    DBSession = scoped_session(sessionmaker(expire_on_commit=False,
                                            autocommit=False, 
                                            extension=ZopeTransactionExtension())) 
```

之后，当我多次刷新页面时，有时我可以看到数据库更改，有时没有，一次旧数据，第二次新数据等等......当我重新启动服务器（本地，pserve）数据库数据是最新的.

也许这是创建会话的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:44:06.637

检查 MySQL 的[事务隔离级别](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)。

InnoDB 的默认值是`REPEATABLE READ`：“同一事务中的所有一致读取都读取第一次读取建立的快照。”

您可以在对 的调用中指定隔离级别`create_engine`。请参阅[SQLAlchemy 文档](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#transaction-isolation-level)。

我建议您尝试`READ COMMITTED`隔离级别，看看是否可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:20:20.320

我相信你的问题很可能是一个持久的会话。默认情况下，Pyramids 会在提交后使会话中的所有对象过期——这意味着 SQLA 将在您下次需要它们时从数据库中获取它们，并且它们将是新鲜的。

您已通过指示“expire_on_commit=False”覆盖了此默认值——因此，如果您打算让该会话对象在后续请求中获取新数据，请确保在提交更改后调用 session.expire_all()。（会话对象对于 Pyramid 中的多个请求是相同的，但不能保证您获得相同的线程范围会话）我建议不要将提交时的过期设置为 false，或使用非全局会话：请参阅[http:// /docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/database/sqlalchemy.html#using-a-non-global-session](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/database/sqlalchemy.html#using-a-non-global-session)

或者，您可以确保在必要时使对象过期，知道未过期的对象将按原样保留在内存中并且不会被刷新，并且可能与不同线程范围会话中的同一对象不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:34:36.653

目前尚不清楚您的事务对象是什么或它如何连接到 SQLAlchemy 数据库会话。我在 Pyramid 文档中看不到有关事务的任何内容，也没有在您的代码中看到将事务对象链接到 SQLAlchemy 会话的任何内容，因此可能缺少一些配置。您将此代码基于什么示例？

另外：`sessionmaker`调用通常在文件分数处完成以创建单个会话工厂，然后重复使用该工厂从同一源创建会话对象。[“ sessionmaker() 函数通常用于创建顶级会话配置，然后可以在整个应用程序中使用，而无需重复配置参数。”](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#getting-a-session)

可能的情况是，由于您正在创建多个会话工厂，因此有些数据应该在会话之间共享，但实际上并未共享，因为它是每个工厂创建一次。尝试[只调用 sessionmaker 一次](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#session-frequently-asked-questions)，看看是否会有所不同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-22T00:43:57.660

问题是你正在设置`expire_on_commit=False`. 如果你删除它，它应该可以工作。[您可以在http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.commit](http://docs.sqlalchemy.org/en/rel_0_8/orm/session.html#sqlalchemy.orm.session.Session.commit)上阅读更多关于它的作用

# asp.net-mvc-3 - 将文本框绑定到 Telerik 上传控件 MVC3

> ID：12837531
> 
> 赞同：2
> 
> 时间：2012-10-11T10:29:46.637
> 
> 标签：asp.net-mvc-3, upload, textbox, telerik

我希望我的文本框显示 Telerik 上传控件选择的文件的名称。请在下面找到代码片段。

```
<td>
@Html.TextBox(txtBox, null, new { style = string.Format("width:200px") })
</td>
<td style="padding-top: 1%; padding-left: 8%">
@(Html.Telerik().Upload().Name(BrowseButton)
//.HtmlAttributes(new { @class = "myCustomClass" }).Multiple(false)) 
```

目前文本框显示为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:01:11.450

Telerik 控件应该允许您显示文件名。您额外的文本框似乎是多余的。

阅读[telerik 文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-introduction.html)，特别是[html 和 css 部分](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-html-output-and-css-styles.html)。它说：

在上传过程中和上传之后，会显示一个文件列表，其中显示了每个上传文件的进度和状态。它的 HTML 输出如下：

```
<ul class="t-upload-files t-reset">
    <li class="t-file">
        <span class="t-icon t-success">uploaded</span>
        <span class="t-filename">some-uploaded-file.jpg</span>
        <button class="t-button t-button-icontext t-upload-action" type="button">
                 <span class="t-icon t-delete"></span>Remove</button>
    </li>
    <li class="t-file">
        <span class="t-icon t-fail">failed</span>
        <span class="t-filename">some-failed-file.jpg
            <span class="t-progress">
         <span style="width: 75%;" class="t-progress-status">
            </span></span>
        </span>
        <button class="t-button t-button-icontext t-upload-action" type="button">
                    <span class="t-icon t-retry"></span>Retry</button>
    </li>
</ul> 
```

如果您想更新自己的文本框，只需在创建 Telerik 控件时添加它即可使用他们的客户端 api

```
@(Html.Telerik().Upload().Name(BrowseButton)
.ClientEvents(events => events.OnSelect("onSelect")) 
```

在你的 javascript 中

```
function onSelect(e) {
        // Array with information about the uploaded files
        $('#yourTextboxId').val(e.files[0].name);  
    } 
```

同样，所有详细信息都在[文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-upload-client-api-and-events.html#Files)中。

# flyway - 占位符替换不适用于飞路测试扩展

> ID：12837536
> 
> 赞同：1
> 
> 时间：2012-10-11T10:30:05.800
> 
> 标签：flyway

我正在尝试将占位符与 flyway 测试扩展 1.7.0 一起使用。我在 flyway.properties 中定义了一个占位符：

```
 flyway.placeholders.schema_name=MYSCHEMA 
```

我的 sql 脚本如下所示：

```
 create schema ${schema_name}; 
```

运行 flyway 测试时，我收到以下错误：

```
117157 [main] DEBUG com.googlecode.flyway.core.migration.sql.SqlScript  - Found statement at line 1: create schema ${schema_name};
117157 [main] DEBUG com.googlecode.flyway.core.migration.sql.SqlStatement  - Executing SQL: create schema ${schema_name}
117157 [main] ERROR com.googlecode.flyway.core.migration.DbMigrator  - com.googlecode.flyway.core.exception.FlywayException: Error executing statement at line 1: create schema ${schema_name}
117158 [main] ERROR com.googlecode.flyway.core.migration.DbMigrator  - Caused by org.hsqldb.HsqlException: Unknown JDBC escape sequence: {: {schema_name}
117158 [main] DEBUG com.googlecode.flyway.core.migration.DbMigrator  - Finished migrating to version 1.1 (execution time 00:00.005s) 
```

所以看起来占位符替换不起作用。顺便说一句，我的 flyway.properties 文件已成功加载（我也将它用于其他值，例如 jdbc url）。

有人知道这里可能是什么问题吗？

**EDIT1**看起来 Flyway 类中的配置方法没有被调用。我必须在应用程序上下文中添加一些东西吗？

**EDIT2**我们找到的一种解决方案是在应用程序上下文中设置占位符：

```
<bean id="flyway" class="com.googlecode.flyway.core.Flyway"
    depends-on="dataSourceRef">
    <property name="dataSource" ref="dataSourceRef" />
    <property name="placeholders" >
      <map>
        <entry key="schema_name" value="${flyway.placeholders.schema_name}" />
     </map> 
    </property>
</bean> 
```

但我们仍在寻找更好的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:53:56.527

抱歉回复晚了。今天第一次看到你的问题。

我接受了您的问题，另请参阅[http://code.google.com/p/flyway-test-extensions/issues/detail?id=14](http://code.google.com/p/flyway-test-extensions/issues/detail?id=14)。

默认实现和示例没有显示它如何工作或提供足够的实用程序来解决它。

该解决方案只能通过 spring 部分完成，这取决于 flyway-test-extensions 的实现。

**a.) 解决方案的第一部分**

它不是一个完整的解决方案，因为替换了*flyway.placeholders。*将通过方法*configure*在 Flyway 内部完成，我们无法调用。

在您的应用程序上下文中添加以下内容：

 `````
<!-- also need this as additional include part  -->

xmlns:util="http : //www.springframework.org/schema/util"
xsi:schemaLocation="
    http: // www.springframework.org/schema/util 
    http: // www.springframework.org/schema/util/spring-util-3.0.xsd 
```` 

`和`

 ``````
<!-- flyway part -->
<util:properties id="flyway.prop" location="/flyway.properties"/>

<bean id="flyway" class="com.googlecode.flyway.core.Flyway" depends-on="dataSourceRef">
    <property name="dataSource" ref="dataSourceRef"/>
    <property name="placeholders" ref="flyway.prop"/>
</bean> 
````  `但与您的 flyway.properties 文件相比，您必须删除*flyway.placeholders。*从属性定义。我认为这不是完整的解决方案。

**b.) 第二部分**

**编辑**

更好的解决方案使用当前 flyway-test-extension 开发中的签入。（[http://code.google.com/p/flyway-test-extensions/source/detail?r=921f44bb206527db88f4b59faaf7ea968a743233](http://code.google.com/p/flyway-test-extensions/source/detail?r=921f44bb206527db88f4b59faaf7ea968a743233)）

*   FlywayHelperFactory.java 作为 Flyway 的工厂实现。把它作为你的测试源的一部分。
    这也应该适用于 1.7 版本。
*   flywayPropertiesContext.xml 作为新的应用程序上下文。将其作为测试/资源放在名为 context 的目录中。
    这包含如何加载 flyway.properties 的两个示例解决方案。
    注意：
    此上下文不使用 jdbc.properties 变量，而是使用 flyway 属性！
    此上下文还应与 flyway-test-extension 1.7.0 一起使用
*   更改您的测试设置并`@ContextConfiguration(locationsForMirgation = { "/context/flywayPropertiesContext.xml" })`用作新配置。

弗洛里安````

# android - 如何加快编辑器和 android 模拟器之间的通信？

> ID：12837537
> 
> 赞同：-5
> 
> 时间：2012-10-11T10:30:06.340
> 
> 标签：android, android-emulator

每次我从 Eclipse 中单击“运行”时，应用程序需要很长时间才能启动，然后是模拟器。这个需要很长时间。有没有办法加快这个速度？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:36:43.870

首先我应该在你提问之前做更多的研究，

但答案是：您可以对您的模拟器进行快照。

您可以通过转到**窗口--> AVD 管理器--> 然后选择您的 AVD--> 按编辑--> 启用快照--> 按开始--> 选择：保存到快照并从快照启动**

希望这对你有用，但下次在问什么之前先做功课

# mysql - 不使用索引的简单 MySQL 连接

> ID：12837541
> 
> 赞同：0
> 
> 时间：2012-10-11T10:30:23.813
> 
> 标签：mysql, join

下面的查询大约需要 0.3 秒。为什么？我该如何解决。应该不会花这么长时间...

```
SELECT tshops.OfficialName
 , tresults.StartTime
 , tresults.Price
 , tresults.shopID
FROM
 tresults
INNER JOIN tshops
ON tshops.shopID = tresults.shopID
WHERE
  tresults.pID = 15
  AND tresults.websiteID = 1
  AND tresults.StartTime = (SELECT max(tresults.StartTime) AS maxstarttime
                        FROM
                          tresults
                        WHERE
                          tshops.shopID = tresults.shopID
                          AND tresults.pID = 15
                          AND tresults.websiteID = 1)
ORDER BY
  tresults.Price DESC 
```

解释结果：

```
1, PRIMARY, tshops, ALL, PRIMARY, , , , 203, Using temporary; Using filesort
1, PRIMARY, tresults, eq_ref, PRIMARY,idxPID,idxWebsite,idxStartTimeASC,idxStartTimeDESC,fk_shopID, PRIMARY, 20, func,const,pricegrabber.tshops.shopID,const, 1, Using where
2, DEPENDENT SUBQUERY, tresults, ref, idxPID,idxWebsite,fk_shopID, fk_shopID, 4, pricegrabber.tshops.shopID, 891, Using where; Using index 
```

这样就完成了对 tshops 的全表扫描。但为什么？两个表中都有关于 shopID 的索引...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:48:30.893

我怀疑引用外部选择的子选择是令人困惑的事情。

尝试使用 shopID 上的 GROUP BY 对子选择进行连接。通常我希望 MySQL 会优化一些东西来做到这一点，但值得一试。

像这样的东西（请原谅任何错别字）

```
SELECT tshops.OfficialName
 , tresults.StartTime
 , tresults.Price
 , tresults.shopID
FROM  tresults
INNER JOIN tshops
ON tshops.shopID = tresults.shopID
INNER JOIN (SELECT shopID, MAX(tresults.StartTime) AS MaxStartTime 
            FROM tresults 
            WHERE tresults.pID = 15 
            AND tresults.websiteID = 1 
            GROUP BY shopID) Sub1
ON tresults.StartTime = Sub1.MaxStartTime
WHERE
  tresults.pID = 15
  AND tresults.websiteID = 1
ORDER BY
  tresults.Price DESC 
```

# gruntjs - 自定义 grunt.helper 值可能吗？

> ID：12837545
> 
> 赞同：1
> 
> 时间：2012-10-11T10:30:36.733
> 
> 标签：gruntjs

我正在使用 grunt 的 CLI 可能性来处理我自己的样板`grunt init:webdesign-project`文件——为此，我创建了一个在其中命名的文件夹`webdesign-project`和`node_modules/grunt/init`一个相应的`webdesign-project.js`文件。到目前为止，一切都很好。

现在我想用这样的`grunt.helper`功能插入我自己的“问题”

```
grunt.helper('prompt_for', 'img_path', 'img') 
```

然而这给了我

```
TypeError: Cannot set property 'name' of undefined
at Object.module.exports.grunt.registerHelper.grunt.utils.spawn.cmd (/usr/lib/node_modules/grunt/tasks/init.js:573:17)
at Task.helper (/usr/lib/node_modules/grunt/lib/util/task.js:117:19)
at Object.exports.template (/usr/lib/node_modules/grunt/tasks/init/webdesign-project.js:30:11)
at Object.module.exports.grunt.registerHelper.done (/usr/lib/node_modules/grunt/tasks/init.js:240:27)
at Object.task.registerTask.thisTask.fn (/usr/lib/node_modules/grunt/lib/grunt/task.js:58:16)
at Task.<anonymous> (/usr/lib/node_modules/grunt/lib/util/task.js:341:36)
at Task.start (/usr/lib/node_modules/grunt/lib/util/task.js:357:5)
at Object.grunt.tasks (/usr/lib/node_modules/grunt/lib/grunt.js:143:8)
at Object.module.exports [as cli] (/usr/lib/node_modules/grunt/lib/grunt/cli.js:36:9)
at Object.<anonymous> (/usr/lib/node_modules/grunt/bin/grunt:19:14) 
```

难道不能用这个函数定义自己的变量吗？

编辑：有人知道这个函数的文档是否存在吗？（还没有找到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:28:18.053

您不应在`node_modules/`文件夹中修改或添加文件，因为它们将在使用 npm 更新时被覆盖。查看用于创建自定义初始化模板的初始化文档：[https ://github.com/gruntjs/grunt/blob/master/docs/task_init.md#creating-custom-templates](https://github.com/gruntjs/grunt/blob/master/docs/task_init.md#creating-custom-templates)

我建议将现有的初始化模板之一复制到：`~/.grunt/tasks/init/webdesign-project.js`并从那里修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T19:00:34.177

我想出了如何实现“自定义提示” - 如果有人感兴趣：

Grunt 的`grunt.helper('prompt_for', '...')`函数显然只需要一组预定义的值来代替“...”。实际上这并不奇怪，因为其中一些值有一些非常独特的功能（例如，当您输入`testproject`项目名称时，“（git://github.com/peter/testproject.git）”将自动被提议。

***解决方案***：查看`.js`gruntfile 模板的文件 (`node_modules/grunt/tasks/init/gruntfile.js`) - 创建自定义提示符如下：

```
{
  name: 'img_path',
  message: 'Name the folder where all image files are located',
  default: 'img',
  // warning: '' couldn't find any use for this optional property
} 
```

代替

```
grunt.helper('prompt_for', 'img_path', 'img') 
```

# ocean - Is there a way to debug with Petrel 2012.1 64-bit?

> ID：12837552
> 
> 赞同：2
> 
> 时间：2012-10-11T10:31:00.353
> 
> 标签：ocean, petrel

When starting the debugger, Visual Studio just hangs for about 20 seconds, then terminates the debugging session, without any warning.

The 32-bit version works fine, but is no good if our plugin uses 64-bit native code from a third party.

As a developer, I'm sticking with Petrel 2012.1 on my workstation for the time being - might the issue be fixed in a later release?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:03:18.237

It's not a bug but a feature – the license protection mechanism. But you can attach your debugger to Petrel 2012.1 64 bit when Petrel's UI is visible, the initial steps only are protected from debugging.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:36:57.877

But of course you would still need to use 32-bit version of Petrel if you want edit-and-continue while debugging: [Why doesn't Edit and Continue work on the x64 CLR?](https://stackoverflow.com/questions/955922/why-doesnt-edit-and-continue-work-on-the-x64-clr)

# html - 将 HTML 转换为 PDF 的正确方法

> ID：12837560
> 
> 赞同：6
> 
> 时间：2012-10-11T10:31:32.783
> 
> 标签：html, pdf, converter

我想将 HTML 页面转换为 PDF。有几种选择，但它们有一些问题。

*   通过在IE中打印HTML页面`PDFCreator`（太繁琐）
*   使用`wkhtmltopdf`（低质量）
*   使用`PhantomJS`（低质量）

也许我可以使用复杂的解决方案？`PhantomJS`使用through打印`PDFCreator`，或提高质量`wkhtmltopdf`，或者其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:38:13.817

也许您可以尝试使用[Amyuni WebkitPDF](http://www.amyuni.com/en/server/webkitpdf)。它不是开源的，但可以免费用于商业用途，并且可以从 C# 中使用。

文档中的 C# 示例代码：

```
static private void SaveToFile(string url, string file)
{        
    // Store the WebkitPDFContext returned value in an IntPtr
    IntPtr context = IntPtr.Zero;
    // Open the URL. The WebkitPDFContext returned value will be stored in
    // the passed in IntPtr
    int ret = WKPDFOpenURL(url, out context, 0, false);
    if (ret == 0)
    {
        // if ret is 0, then we succeeded in opening the URL.
        // Save the result as PDF to a file. Use the obtained context value
        ret = WKPDFSaveToFile(file, context);
    }
    if (ret != 0)
        Debug.WriteLine("Failed to run SaveToFile on '" + url + "' to generate file '" + file + "'");
    // Make sure to close the WebkitPDFContext because otherwise the
    // internal PDFCreator as well as other objects will not be released
    WKPDFCloseContext(context);
} 
```

*通常的免责声明适用*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-02T07:54:44.497

`--print-media-type --no-stop-slow-scripts`用键修补了 wkhtmltopdf（一个非常好的基于 WebKit 的命令行工具，速度很快）

`chromium --headless --no-zygote --single-process ... --print-to-pdf= ...`（较慢，仅限纵向）

通过 DevTools 协议实现 chromium headless（速度慢，只有少数编程语言有绑定）

Blink Engine 的包装器（例如，Qt5 [https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/html2pdf?h=5.15](https://code.qt.io/cgit/qt/qtwebengine.git/tree/examples/webenginewidgets/html2pdf?h=5.15)）

如果您相信容器， - [https://github.com/thecodingmachine/gotenberg](https://github.com/thecodingmachine/gotenberg)（内部 - 通过 DevTools 协议无头铬）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-02T08:18:41.373

[您可以使用 GroupDocs.Conversion for .NET API](https://products.groupdocs.com/conversion/net)将 HTML 正确转换为 PDF 。看一下代码：

```
// Setup Conversion configuration and Initailize ConversionHandler    
ConversionConfig config = new ConversionConfig();    
config.StoragePath = "source file storage path";    
// Initailize ConversionHandler    
ConversionHandler conversionHandler = new ConversionHandler(config);    
// Convert and save converted document    
var convertedDocumentPath = conversionHandler.Convert("sample.html", new PdfSaveOptions{});    
convertedDocumentPath.Save("result-" + Path.GetFileNameWithoutExtension("sample.html") + ".pdf"); 
```

*披露：我在 GroupDocs 担任开发人员布道师。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-24T20:27:21.827

google chrome`Save as PDF`
的输出看起来完全一样（由 chrome 呈现）

在这里，我使用 Puppeteer 来自动化这个过程：singlefile or in Folder
[https://github.com/FuPeiJiang/puppeteer-pdf](https://github.com/FuPeiJiang/puppeteer-pdf)

# perl - Perl如何仅对有两个单词的变量应用正则表达式？

> ID：12837561
> 
> 赞同：1
> 
> 时间：2012-10-11T10:31:37.590
> 
> 标签：perl

我想在我只有 2 个单词的行上应用正则表达式。我的文件看起来像这样，括号中的单词之间有可变数量的空格：

政客姓名：（何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔）；政客姓名：（托尼·布莱尔 | 托尼·布莱尔 | 托尼·布莱尔 | 托尼·布莱尔）；

我想有一个输出：

政客姓名：（托尼·布莱尔 | 托尼·布莱尔 | 托尼·布莱尔 | 托尼·布莱尔 |**布莱尔·托尼 | 布莱尔·托尼**）；

我的代码在每一行上应用正则表达式，我得到如下错误输出：

政客姓名：（何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔 | 何塞·玛丽亚·阿兹纳尔 |**玛丽亚·何塞 | 玛丽亚·何塞**）；

这是我的代码：

```
use strict;
use warnings;
use Data::Dumper;
use utf8;

open(IN, $ARGV[0]) or die "Can't read file $ARGV[0]\n";
while (my $line=<IN>)
{
    my ($pol,$value) = split(/:/, $line);

    warn Dumper \$pol;
    chomp($value);
    $value=~ s/[  ]+/ /g;
    $value=~ s/\);//g;
    my $n;  
    $n = $1 if ($value =~ /\((.+?)\|/); 
    $n=~ m/(\w*)\s(\w*)/g;
    my $swapname="$2 $1";
    warn Dumper \$swapname;

    print "$pol: $value | $swapname );\n";

}
close(IN); 
```

我需要做什么来停止处理三字名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:58:53.877

```
$n=~ m/(\w*)\s(\w*)/g;   # Replace this regex with the one below 
```

使用下面的正则表达式进行比较，`$n`您还需要将其包含在 中`if`，否则您的打印将为每个输入执行：-

```
my $n;  
$n = $1 if ($value =~ /\((.+?)\|/); 
if ($n =~ m/^\s*(\w+)\s(\w+)\s*$/g) {  # Notice `$` to mark the end of 2 words..
    my $swapname="$2 $1";
    warn Dumper \$swapname;

    print "$pol: $value | $swapname );\n";
} 
```

**但是**，你没有考虑`|`..之后的下一个值。你需要这样做..它只是考虑第一个值..

**所以，你的输出将是： -**

```
Politician_name: (Tony Blair |tony blair | Tony Blair | tony blair | Blair Tony ) 
```

2nd`tony blair`不习惯。您需要为此修改代码。

* * *

实际上**，您需要一个循环**来遍历每个名​​称，以使此代码正常工作。

* * *

**更新**：-**我宁愿将您的代码更改为：-**

```
# You should always use lexical variables as file handles..
open my $fh, '<', 'D:\demo.txt' or die $!;

while (<$fh>)  # Don't need use any extra variable here.. Default to $_
{
    my ($pol,$value) = split /:/;  # Do split on $_ by default
    warn Dumper \$pol;

    chomp($value);

    $value=~ s/[  ]+/ /g;
    $value=~ s/\((.*)\);/$1/g;

    my @name = split(/\|/, $value);  # Split your string to an array

    # Filter out array to remove duplicate

    my $_ = $name[0]; 

    if (m/^\s*(\w+)\s(\w+)\s*$/g) {  

        # If first element contains 2 words, proceed with rest of the elements

        print "($value ";  # print the original string you want..

        # Append to it later on the reverse of other array elements

        foreach (@name) {
            if (m/^\s*(\w+)\s(\w+)\s*$/g) {

                my $swapname = "$2 $1";
                warn Dumper \$swapname;

                print "| $swapname ";  # Print swapnames after $value
            }
        }
        print ");\n";  # End the string..
    }
}
close($fh); 
```

# css - CSS精灵作为背景

> ID：12837562
> 
> 赞同：0
> 
> 时间：2012-10-11T10:31:39.183
> 
> 标签：css, background, icons, sprite

是否可以将精灵图标定位为元素的背景？我有一个文件“icons.png”，其中包含几个图标。我想选择其中一个作为元素的背景。通常我会将 `.sprite { background: url('imgs/icons.png') no-repeat 0 -21px; width: 17px; height: 10px; }`此类用于按钮等...

问题是我有一个文本输入，我想修改它的占位符。首先我这样做了，如果我使用的文件是图标本身，它可以完美地工作

```
:-webkit-input-placeholder{ background: url('singleIcon.jpg') center right no-repeat; } 
```

但现在我想使用一个包含更多图标的文件。可以使用这样的东西吗？

```
:-webkit-input-placeholder{ background: url('imgs/icons.jpg') center right no-repeat; } 
```

最后一行代码的问题是它会选择我所有的图像（其中当然包含我想在网站上使用的**所有图标**），我只想选择该图像的一部分（我想使用的图标)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:35:21.203

实际上，精灵仅用作背景（或者您必须设置某种复杂的裁剪）。

您需要做的是将元素的大小设置为您必须显示的相同精灵的部分，并且背景的位置等于精灵中图标的 x 和 y 坐标，从左上角开始。

* * *

取自[这篇不错的文章](http://css-tricks.com/css-sprites/)的示例：

![精灵示例 1](../Images/7acabec51dd27ae9117bc80149f1eae5.png)

“项目 2”是 116x48，从 12px（x 坐标）和 70px（y 坐标）开始。

所以你的元素的CSS应该是：

```
.element {
    width:116px;
    height:48px;
    background:url(sprites.png) -12px -70px no-repeat;
} 
```

但是，如果您的元素比上述尺寸更高/更宽怎么办？然后，您必须用足够的透明/空白空间隔离该图标，以便其他图标不会出现。

![精灵示例 2](../Images/d4f4e45a1d56ad00ce955a996d57bc6a.png)

如果您查看[Facebook sprites](http://css-tricks.com/wp-content/csstricks-uploads/facebook-sprite.png)，您会注意到其中一些很长，一些分组，另一些孤立。您必须针对每种情况调整精灵。

* * *

**编辑**：好的，我得到了你的实际需要。

使用 s 并不容易，`input`因为您不能在其上使用伪元素。这里有一个解决方法。

**[演示](http://jsfiddle.net/gionaf/5kcnw/)**

首先，将输入包装在一个 div 中：

```
<div class="inputWrapper">
    <input type="text" placeholder="placeholder text">
</div> 
```

然后添加一些CSS：

```
div.inputWrapper {
    position:relative; /* that's important */
    float:left; /* or display:inline-block; */
}
div.inputWrapper:after {
    background:#000 url(sprites.png) 0 -2px no-repeat; /* adjust background position */
    content:" "; /* whitespace needed for the pseudo-element to be displayed */
    position:absolute;
    top:1px; right:2px; /* some room for the borders */
    width:16px; /* icon width */
    height:18px; /* icon height */
}​
div.inputWrapper input {
    padding-right:16px; /* so the text won't go behind the icon */
} 
```

我知道这很复杂，但另一种方法是创建另一个 http-request ......选择权在你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:53:29.357

这是一个快速的脏样本。基本上，只需设置元素 CSS 的 background-position 属性。

```
<!DOCTYPE html>
<html>
<head>
<script>
var curFrame = 0;
var numFrames = 10;
var animTimer;

function advanceFrame()
{
    var hero;
    curFrame++;
    if (curFrame >= numFrames)
        curFrame = 0;

    hero = document.getElementById("hero");

    var posX = curFrame * -64;
    curPos = posX+"px 0";

    hero.style.backgroundPosition = curPos; //offsets[curFrame];
}

function myInit()
{
    animTimer = setInterval(advanceFrame, 200, false);
}
</script>
<style>
#hero
{   /* image is 638x64 pixels - it has 10 sprites in it, horizontally offset */
    background-image: url(http://blogs.msdn.com/cfs-file.ashx/__key/CommunityServer-Blogs-Components-WeblogFiles/00-00-00-53-00-metablogapi/5545.image_5F00_13D4E783.png);
    display: block;
    width: 64px;
    height: 64px;
}
</style>
</head>
<body onload='myInit();'>
    <div id='hero'></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T02:32:02.583

这是可能的，但有几点需要注意：

1.  占位符伪类在浏览器中的工作方式不一致，例如，Firefox 在整个输入元素上，Chrome 仅在行高上。
2.  默认情况下，占位符伪类在原始输入框的顶部添加一个不透明层。
3.  如果裁剪的图标不是精灵图像上的第一个图标，则需要“重复”占位符伪类上的背景图像。
4.  表单元素的默认框大小可能与其余元素不同，因此边框/填充可能会改变背景图像大小的计算。

我认为最好让你的精灵保持一个长长的垂直图标列表，让你的占位符样式不透明，使用边框框模型。此外，图标高度尺寸应该正好是可用背景空间的高度。将属性分开也是一个好主意，`background-*`这样您对精灵所做的事情就会变得更清晰、更容易阅读。

假设您有 4 个 50x50 图标的列表 - 即 50x200 图像，您可以执行以下操作：

```
input {
    box-sizing: border-box;                 /* keep box-sizing consistent */
    width: 200px;
    height: 52px;                           /* compensate 2px for border */
    border: 1px solid black;
    background-color: blue;
    background-image: url('icons.png');
    background-size: 50px 200px;
    background-position: right 20px top 0;  /* assuming you want the icon to "float" right */
    background-repeat: repeat-y;          
}
::-webkit-input-placeholder {
    background-color: yellow;
    background-image: url('icons.png');
    background-size: 50px 200px;
    background-position: right 20px top 50px; /* use second icon in the sprite */
    background-repeat: repeat-y;
    opacity: 1;                               /* don't show the underlying input style */
} 
```

还记得将样式应用于`::-moz-placeholder`和`:-ms-input-placeholder`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:34:56.137

我可能会说显而易见的，但是您是否尝试过：

```
:-webkit-input-placeholder{ background: url('imgs/icons.jpg')  no-repeat 0 -21px; width: 17px; height: 10px; 
```

}

# validation - 猫鼬的验证插件

> ID：12837566
> 
> 赞同：0
> 
> 时间：2012-10-11T10:31:50.423
> 
> 标签：validation, mongoose

是否有一个很好的猫鼬验证插件。我找到了这个[https://npmjs.org/package/mongoose-validator](https://npmjs.org/package/mongoose-validator)但它没有找到好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:22:10.983

mongoose 验证器并不是特别有用，它只是指向[node-validator](https://github.com/chriso/node-validator "节点验证器")的模式的语法糖。对于您的验证，我建议直接使用[node-validator](https://github.com/chriso/node-validator "节点验证器")并将其包装在提供给您字段的“验证”选项的函数中。

例如，假设我们想要一个 URL 插件，它可以在您的架构中添加和验证 URL 字段：

```
 validator= require 'validator'

  UrlPlugin = ( schema, options = {} ) ->
    field = options.field || 'url'

    fields = {}
    fields[field] =
      type: String
      validate: [
        ( value ) ->
          try
            return true if validator.check(value).isUrl()
          catch err
            return false
        "URL Error"
      ]

    schema.add fields 
```

# javascript - css3-mediaqueries.js VS respond.js

> ID：12837568
> 
> 赞同：19
> 
> 时间：2012-10-11T10:31:52.987
> 
> 标签：javascript, css, media-queries, polyfills

**[respond.js](https://github.com/scottjehl/Respond)**还是**[css3-mediaqueries.js](http://code.google.com/p/css3-mediaqueries-js/)**？

官方文档，尤其是 css3-mediaqueries.js 的文档很少。阅读 SO、论坛和[博客](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/)，我总结了这些优点和缺点。

### 响应.js

优点：

1.  更可靠（？由[Modernizr](http://modernizr.com/)、[Twitter Bootstrap 3](http://getbootstrap.com/getting-started/#template)和[H5BP 推荐](http://www.initializr.com/)）
2.  更轻 (4kb) 更快
3.  在任何上下文中解释媒体查询（`<link>`，内联 CSS，@import-ed CSS）

缺点：

1.  不更新窗口调整大小
2.  仅支持`min-width`和`max-width`
3.  不支持`em`单位（巨大的弱点！）

### css3-mediaqueries.js

优点：

1.  实时反应（调整大小！）
2.  支持`em`单位（真的吗？有人测试过吗？）

缺点：

1.  较重 (15kb) 且较慢
2.  仅解释具有[明确声明的媒体类型的内联 CSS](https://stackoverflow.com/questions/10542823/media-queries-bootstrap-and-css3-mediaqueries-js-is-the-media-type-screen-h)
3.  缺乏详细的文档，该项目似乎被遗弃了

* * *

有没有人有要添加到列表中的要点，或者要分享的个人经验，或者对一个或另一个脚本的特别偏好？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T11:28:43.900

我创建了一个测试页面，也包括[Mediatizr](https://github.com/pyrsmk/mediatizr)。

如果有人有兴趣，[这里是测试页面](http://gionaf.com/playground/mq-fallback/)，这些是[结果](http://gionaf.com/playground/mq-fallback/results.html)（在 IE8 和 IE7 上测试）。

* * *

## css3-mediaqueries.js

### 优点

1.  支持`min`和`max`媒体`min+max`查询
2.  支持`px`和`em`价值观
3.  对窗口调整大小作出反应
4.  详细说明页面 CSS ( `<style>`) 和外部样式表

### 缺点

1.  不支持`width`媒体查询
2.  不详细说明`<link media="screen and ...">`也不`@import`编辑样式表

* * *

## 响应.js

### 优点

1.  支持`min`和`max`媒体`min+max`查询
2.  支持`px`和`em`价值观
3.  对窗口调整大小作出反应
4.  仅详细说明外部样式表

### 缺点

1.  不支持`width`媒体查询
2.  不详细说明页面 CSS，`<link media="screen and ...">`也不`@import`编辑样式表
3.  结合 jQuery`on load`事件可能会导致 javascript 错误，要解决此问题，您需要将脚本放在页面末尾

* * *

## mediatizr.js

简单..不起作用

* * *

最后我选择了**css-mediaqueries.js**，有条件地加载了[Modernizr](http://modernizr.com/)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-13T03:59:21.160

这一点现在可能没有实际意义。我开发了一个纯 Javascript 框架来生成和管理媒体查询。它适用于所有浏览器和操作系统。它的足迹少于 500 个字符。你可以在这里看到它的工作：ieee-ac.org。

# android - 加载器框架与普通 AsyncTask

> ID：12837572
> 
> 赞同：5
> 
> 时间：2012-10-11T10:32:01.167
> 
> 标签：android, sqlite, commonsware-cwac

在我的应用程序中，我需要很多 CRUD 内容：从本地 SQLite 数据库读取记录、插入对象和更新内容。大多数查询都非常简单，即使在 UI 线程上运行它们也不会阻塞，但是在这个应用程序中，我想采用 Windows Phone 模式：*输出动画*立即开始，当结果传递时开始*动画。*

我计划使用一个`AsyncTask`来完成这项工作，但是我注意到 Honeycomb（和 compat 包）引入了这个新的*Loader 框架*。主要优势似乎是`Loader`生存配置更改加载的数据。Commonsware的[LoaderEx](https://github.com/commonsguy/cwac-loaderex)项目在 SQLite 和框架之间架起了桥梁，但出现了一些问题。

1.  资源清理：我使用单个活动，在其中创建 SQLiteOpenHelper`onCreate()`并关闭它`onDestroy()`。由于加载器管理器可能仍在运行，我检查它并`pendingClose`在我的回调对象上设置一个标志，因此它会在加载完成时关闭游标和助手。我认为不*关闭*数据库是无害的，但如果你不这样做，SQLite 会抱怨，而且我不喜欢错误消息 :) 这里的重点是数据无法在配置更改后继续存在，因此 Loader 的优势消失了

2.  我应该创建多少个加载器？假设我有心爱的`Customer`人和`Order`桌子。加载程序由`ID`'like`CUST_L`或标识`ORD_L`，但每次用户单击一些摘要时，我都想带入一个包含详细信息的屏幕。我应该[`restart`](http://developer.android.com/reference/android/support/v4/app/LoaderManager.html#restartLoader%28int,%20android.os.Bundle,%20android.support.v4.app.LoaderManager.LoaderCallbacks%3CD%3E%29)使用不同参数的加载器，还是应该[`init`](http://developer.android.com/reference/android/support/v4/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.support.v4.app.LoaderManager.LoaderCallbacks%3CD%3E%29)使用随机 ID 的新加载器？这可能会发生数十次。Loader 框架是为大量运行中的小型作业设计的，还是只为一些长时间运行的任务而设计的？

3.  在界面中使用`ID`'s的目的是什么？`LoaderCallbacks`为什么不简单`initLoader(params, callback)`？我不认为可以在回调中重用某些逻辑：最终他将分支（带有`if-else`或`switch`在 ID 上）所以我不明白为回调对象提供标识符的意义，而不是一种天真的方法*-每次操作的回调*。

我问这个是因为整个框架对我来说似乎过度设计并且没有真正的实用性。我不明白用 a 集中代码的意义`LoaderManager`，而且我看不到任何`AsyncTask`没有提供的新机会。

唯一的胜利点是配置更改生存，但由于资源清理，我无法利用它，而且我无法找到关闭它的替代方法，`SQLiteOpenHelper`因为（很明显）[`SQLiteCursorLoader`](https://github.com/commonsguy/cwac-loaderex/blob/master/src/com/commonsware/cwac/loaderex/acl/SQLiteCursorLoader.java)需要它但清理它取决于用户。所以`AsyncTask`这里似乎是获胜者的选择，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T01:57:37.180

1.  内容提供者比“原始数据库”方法强大得多。stackoverflow 上的许多链接引发了对此的讨论。
2.  LoaderManager 尝试通过 ID 来区分加载程序（这就是 initLoader 的签名指定此参数的原因）。如果具有特定 ID 的加载器的数据已经存在（因此无需再次异步重新加载），则需要加载器的 ID 来重新传递缓存的结果。
3.  restartLoader 调用强制 LoaderManager 启动由先前创建的加载程序指定的异步操作。initLoader 在创建新加载器之前尝试重用现有加载器。
4.  片段和活动有自己的不重叠的 LoaderManager。

我的经验表明，尽管使用 Content Providers 听起来有点矫枉过正，但实际上它在未来会带来相当不错的回报。性能影响微不足道（尝试测量它），UI-Data 绑定是开箱即用的（因为内容观察者和 CursorLoaders 能够订阅 Uri 通知），由框架通过加载器实现的同步性。恕我直言，每当需要数据库时，大多数时候使用带有加载器的内容提供程序是您能想到的最佳解决方案。

其他涉及直接使用数据库的场景将迫使您手动实现所有内容。

# java - 如何赋予不同颜色的 JTable 单元格边框（左、右、上、下）？

> ID：12837574
> 
> 赞同：4
> 
> 时间：2012-10-11T10:32:03.507
> 
> 标签：java, swing, pdf, jtable, border

我们需要在 pdf 上绘制 JTable。对于这个要求，我采用了 JTable 并直接打印到 pdf 上。但是我没有得到 JTable 的左边框和上边框。另外，我需要为表格定制一个单元格边框。无论如何我可以为 JTable 中的单元格提供不同的颜色边框吗？例如：-

```
Left Border = Grid Color
Top Border = Grid Color
Right Border = Black Color
Bottom Border =  Grid Color 
```

与此相关的任何建议会非常有帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T19:21:41.383

@andrewthompson 提供的链接应该可以回答您的问题的第一部分，即打印表格的边框（也就是[为什么 JTable 标题没有出现在图像中？](https://stackoverflow.com/questions/7369814/why-does-the-jtable-header-not-appear-in-the-image)）

要在表格中获得不同颜色的内边框（我相信这是您的第二个问题），您必须将`MatteBorder`and`CompoundBorder`与 a 结合使用`TableCellRenderer`。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.table.TableCellRenderer;

public class JTableColoredBorder extends Box{

    public JTableColoredBorder(){
        super(BoxLayout.Y_AXIS);

        JTable table = new JTable(5,5);
        table.setIntercellSpacing(new Dimension(0,0));//Get rid of cell spacing

        //Set your own renderer.  You'll have to set this for Number and Boolean too if you're using those
        CustomRenderer cr = new CustomRenderer(table.getDefaultRenderer(Object.class), Color.red, Color.orange, Color.pink, Color.magenta);
        table.setDefaultRenderer(Object.class, cr);

        add(table);
    }

    //Custom renderer - do what the natural renderer would do, just add a border
    public static class CustomRenderer implements TableCellRenderer{
        TableCellRenderer render;
        Border b;
        public CustomRenderer(TableCellRenderer r, Color top, Color left,Color bottom, Color right){
            render = r;

            //It looks funky to have a different color on each side - but this is what you asked
            //You can comment out borders if you want too. (example try commenting out top and left borders)
            b = BorderFactory.createCompoundBorder();
            b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(2,0,0,0,top));
            b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,2,0,0,left));
            b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,0,2,0,bottom));
            b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,0,0,2,right));
        }

        @Override
        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            JComponent result = (JComponent)render.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            result.setBorder(b);
            return result;
        }

    }

    /**
     * @param args
     */
    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new JTableColoredBorder());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T18:55:44.687

在打印之前将 MatteBorder 添加到表格中。

```
Color color = UIManager.getColor("Table.gridColor");
MatteBorder border = new MatteBorder(1, 1, 0, 0, color);
table.setBorder(border); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:34:54.700

感谢您的所有代码。我非常感谢那些通过贡献时间和精力真正帮助我们的人。那么所有这些解决方案都将解决问题。我用下面的代码得到了一个很好的解决方案： -

```
 package com.swing.data;

import java.awt.*;   
import javax.swing.*;   
import javax.swing.border.*;   
import javax.swing.table.*;   

public class TableExample{   
    public static void main(String[] args) {   
        final JFrame f = new JFrame("TableExample");   
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
        f.getContentPane().add(createTable());   
        f.pack();   
        SwingUtilities.invokeLater(new Runnable(){   
            public void run() {   
                f.setLocationRelativeTo(null);   
                f.setVisible(true);   
            }   
        });   
    }   

    static JComponent createTable() {   
        final JTable table = new JTable(9,9) {   
            private static final long serialVersionUID = 0;   

            Color B = Color.RED;   
            Color C = this.getGridColor();   
            final Border[][] borders = {   
                {new ZoneBorder(C,B,B,B), new ZoneBorder(B,C,C,C), new ZoneBorder(B,B,C,C)},   
                {new ZoneBorder(C,C,C,B), new ZoneBorder(C,C,C,C), new ZoneBorder(C,B,C,C)},   
                {new ZoneBorder(C,C,B,B), new ZoneBorder(C,C,B,C), new ZoneBorder(C,B,B,C)}   
            };   

            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {   
                Component result = super.prepareRenderer(renderer, row, column);   
                if (result instanceof JComponent) {   
                    if(row == 0 && column == 0)
                    ((JComponent) result).setBorder(borders[0][0]);   
                }   
                return result;   
            }   
        };   
        table.setRowHeight(28);   
        //table.setGridColor(Color.BLACK);   
        TableColumnModel tcm = table.getColumnModel();   
        for(int c = 0; c<table.getColumnCount(); ++c) {   
            TableColumn tc = tcm.getColumn(c);   
            tc.setPreferredWidth(28);   
        }   
        JPanel inner = new JPanel(new GridLayout());   
        //inner.setBorder(BorderFactory.createLineBorder(Color.BLACK, 3));   
        inner.add(table);   
        return inner;   
    }   
}  

    package com.swing.data;

import java.awt.*;   
import javax.swing.*;   
import javax.swing.border.*;   

public class ZoneBorder implements Border {   
    private static final int WIDTH = 1;   
    private Color colorN, colorE, colorS, colorW;   

    public ZoneBorder(Color colorN, Color colorE, Color colorS, Color colorW) {   
        this.colorN=colorN;   
        this.colorE=colorE;   
        this.colorS=colorS;   
        this.colorW=colorW;   
    }   

    public boolean isBorderOpaque() {   
        return false;   
    }   

    public Insets getBorderInsets(Component c) {   
        return new Insets(WIDTH,WIDTH,WIDTH,WIDTH);   
    }   

    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {   
        Color old = g.getColor();   
        if (colorN != null) {   
            g.setColor(colorN);   
            g.fillRect(x, y, width, WIDTH);   
        }   
        if (colorE != null) {   
            g.setColor(colorE);   
            g.fillRect(x+width-WIDTH, y, WIDTH, height);   
        }   
        if (colorS != null) {   
            g.setColor(colorS);   
            g.fillRect(x, y+height-WIDTH, width, WIDTH);   
        }   
        if (colorW != null) {   
            g.setColor(colorW);   
            g.fillRect(x, y, WIDTH, height);   
        }   
        g.setColor(old);   
    }   
} 
```

谢谢！

# python - 鼠标点击绘制矩形[Python]

> ID：12837575
> 
> 赞同：1
> 
> 时间：2012-10-11T10:32:08.243
> 
> 标签：python, drawing, tkinter, rectangles

```
def xaxis(event):
   x1, y1 = (event.x - 1), (event.y - 1)

def yaxis(event):
   x2, y2 = (event.x + 1), (event.y + 1)

def create(event):
   w.create_rectangle(x1,y1,x2,y2,fill='Black')

w = Canvas(root, width=canvas_width, height=canvas_height)
w.config(cursor='cross')
w.pack(expand=YES, fill=BOTH)
w.bind("<Button-1>", xaxis)
w.bind("<ButtonRelease-1>", yaxis)
w.bind("<ButtonRelease-1>", create) 
```

贝壳说

> Tkinter 回调 Traceback 中的异常（最近一次调用最后一次）：
> 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py”，第 1410 行，**调用** 返回 self。 func(*args) File "/Users/Leo/Desktop/draw.py", line 22, in create w.create_rectangle(x1,y1,x2,y2,fill='Black') NameError: global name 'x1' is没有定义的

它认为 create 函数无法获取其他函数的坐标...

我这样做是因为我以后需要坐标！

我希望你能帮助我.. ;-) 谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T10:57:56.553

## 解决“未定义全局名称'x1'”问题

调试时的一个好的经验法则是假设错误消息说的是真话。在这种情况下，它是说没有名为“x1”的全局变量。所以问问自己“为什么？”。要么您根本没有创建“x1”变量，要么您以非全局的方式创建它。

在您的情况下，当您定义 x1、y1、x2 和 y2 时，您将它们创建为局部变量。这是 python 在创建变量时的默认行为。最简单的解决方案是将它们声明为全局：

```
def xaxis(event):
   global x1, y1
   x1, y1 = (event.x - 1), (event.y - 1)

def yaxis(event):
    global x2, y2
    x2, y2 = (event.x + 1), (event.y + 1) 
```

**不相关的第二个问题**

您的代码中存在另一个问题，即如何进行绑定。考虑这个代码片段：

```
w.bind("<ButtonRelease-1>", yaxis)
w.bind("<ButtonRelease-1>", create) 
```

您不是在创建两个绑定，而是在创建一个，然后用另一个覆盖它。但是，您不需要两个绑定。您可以从 create 函数中调用 yaxis 函数。

## 使用面向对象的方法

但是，全局变量通常不是问题的最佳解决方案。如果您切换到使用面向对象的方法，那么您可以将坐标存储为对象的属性。这是一个完整的工作示例：

```
import Tkinter as tk

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.x = self.y = 0
        self.canvas = tk.Canvas(self, width=400, height=400, cursor="cross")
        self.canvas.pack(side="top", fill="both", expand=True)
        self.canvas.bind("<ButtonPress-1>", self.on_button_press)
        self.canvas.bind("<ButtonRelease-1>", self.on_button_release)

    def on_button_press(self, event):
        self.x = event.x
        self.y = event.y

    def on_button_release(self, event):
        x0,y0 = (self.x, self.y)
        x1,y1 = (event.x, event.y)

        self.canvas.create_rectangle(x0,y0,x1,y1, fill="black")

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

**拖动鼠标时绘图**

如果要在拖动光标时绘制矩形，可以更改程序以在按下按钮时创建矩形。如果您给对象一个唯一的[标签](http://effbot.org/tkinterbook/canvas.htm#item-specifiers)或保存画布[id](http://effbot.org/tkinterbook/canvas.htm#item-specifiers)，您可以设置鼠标移动事件来使用画布对象的[coords方法调整当前矩形的坐标。](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.coords-method)我将把它作为练习留给读者，因为它与所提出的问题没有直接关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:35:39.363

您只`x1`在它们各自的功能（例如`xaxis`）中本地设置等，因此它们不能在`create`. 您可以重写这些，以便它们返回所需的结果：

```
def xaxis(event):
   return (event.x - 1), (event.y - 1) # x1, y1

def yaxis(event):
   return (event.x + 1), (event.y + 1) # x2, y2

def create(event):
   x1, y1 = xaxis(event)
   x2, y2 = yaxis(event)
   w.create_rectangle(x1,y1,x2,y2,fill='Black') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:01:06.510

您将 x1, x2 ...的结果存储在局部变量中。当您退出事件处理函数时，这些值将丢失。您必须使用全局变量或专用对​​象来管理事件处理程序。我更喜欢第二种解决方案。

另一个问题是您有两个与 Button-Release1 绑定的函数。我的解决方案不是绑定 yaxis 并从 create 中调用它。可以找到更清洁的方法:)

请参见下面的示例。它应该工作：

```
from Tkinter import *

root=Tk()

class Handler:

    def __init__(self, w):
        self.w = w
        w.bind("<Button-1>", self.xaxis)
        #w.bind("<ButtonRelease-1>", self.yaxis)
        w.bind("<ButtonRelease-1>", self.create)

    def xaxis(self, event):
        self.x1, self.y1 = (event.x - 1), (event.y - 1)

    def yaxis(self, event):
        self.x2, self.y2 = (event.x + 1), (event.y + 1)

    def create(self, event):
        self.yaxis(event)
        self.w.create_rectangle(self.x1,self.y1,self.x2,self.y2,fill='Black')

w = Canvas(root, width=200, height=200)
w.config(cursor='cross')
w.pack(expand=YES, fill=BOTH)

Handler(w)

root.mainloop() 
```

# events - 使用 Drools Fusion 检测不同类型的事件？

ID：12837580

赞同：1

时间：2012-10-11T10:32:27.033

标签：events, drools, complex-event-processing, drools-fusion

# sharepoint - 如果指定的文件名已被使用，如何重命名 SharePoint 文档并创建新版本？

> ID：12837582
> 
> 赞同：0
> 
> 时间：2012-10-11T10:32:30.927
> 
> 标签：sharepoint, version, file-rename, event-receiver

我需要通过在文件名中添加一些附加信息来重命名上传的文档，目前我`ItemAdded`使用代码在文档库上连接事件接收器来执行此操作

```
 SPListItem material = properties.ListItem;
    material["Name"] = RenameFile(material["Name"].ToString());
    material.Update(); 
    //material.UpdateOverwriteVersion(); //same issue 
```

这将正常工作，直到再次上传相同的文件，重命名后`"the specified name is already in use"`会发生错误，尽管我启用了文档版本控制。

我需要以编程方式创建新版本吗？如果是这样，我该怎么做，有人可以对此有所了解吗？任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:10:43.907

这可能会有所帮助

[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/1f003923-dc88-427b-a6b8-34c3616d5b1a/](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/1f003923-dc88-427b-a6b8-34c3616d5b1a/)

我认为您需要先签出文件，然后再重新签入

# javafx-2 - 如何滚动以使 ScrollPane 内容中的节点可见？

> ID：12837592
> 
> 赞同：12
> 
> 时间：2012-10-11T10:32:54.903
> 
> 标签：javafx-2

鉴于`AnchorPane`带有一些子节点的巨大是 a 的内容`ScrollPane`，我如何滚动以使当前视口之外的子节点之一可见？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T13:20:34.060

编辑：下一个示例中的代码比我的更精确：[https ://stackoverflow.com/a/23518314/1054140](https://stackoverflow.com/a/23518314/1054140)

您需要在里面找到这个内部节点的坐标并相应地`content`调整`ScrollPane`'s`vValue`和`hValue`。

请参阅`ensureVisible()`下一个小应用程序中的方法：

```
public class ScrollPaneEnsureVisible extends Application {

    private static final Random random = new Random();

    private static void ensureVisible(ScrollPane pane, Node node) {
        double width = pane.getContent().getBoundsInLocal().getWidth();
        double height = pane.getContent().getBoundsInLocal().getHeight();

        double x = node.getBoundsInParent().getMaxX();
        double y = node.getBoundsInParent().getMaxY();

        // scrolling values range from 0 to 1
        pane.setVvalue(y/height);
        pane.setHvalue(x/width);

        // just for usability
        node.requestFocus();
    }

    @Override
    public void start(Stage primaryStage) {

        final ScrollPane root = new ScrollPane();
        final Pane content = new Pane();
        root.setContent(content);

        // put 10 buttons at random places with same handler
        final EventHandler<ActionEvent> handler = new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                int index = random.nextInt(10);
                System.out.println("Moving to button " + index);
                ensureVisible(root, content.getChildren().get(index));
            }
        };

        for (int i = 0; i < 10; i++) {
            Button btn = new Button("next " + i);
            btn.setOnAction(handler);
            content.getChildren().add(btn);
            btn.relocate(2000 * random.nextDouble(), 2000 * random.nextDouble());
        }

        Scene scene = new Scene(root, 300, 250);
        primaryStage.setScene(scene);
        primaryStage.show();

        // run once to don't search for a first button manually
        handler.handle(null);
    }

    public static void main(String[] args) { launch(); }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-03T20:48:07.967

我为这个案例创建了一个稍微优雅的版本。但是，我只能在 y 轴上进行测试。希望能帮助到你

```
private static void ensureVisible(ScrollPane scrollPane, Node node) {
    Bounds viewport = scrollPane.getViewportBounds();
    double contentHeight = scrollPane.getContent().localToScene(scrollPane.getContent().getBoundsInLocal()).getHeight();
    double nodeMinY = node.localToScene(node.getBoundsInLocal()).getMinY();
    double nodeMaxY = node.localToScene(node.getBoundsInLocal()).getMaxY();

    double vValueDelta = 0;
    double vValueCurrent = scrollPane.getVvalue();

    if (nodeMaxY < 0) {
        // currently located above (remember, top left is (0,0))
        vValueDelta = (nodeMinY - viewport.getHeight()) / contentHeight;
    } else if (nodeMinY > viewport.getHeight()) {
        // currently located below
        vValueDelta = (nodeMinY + viewport.getHeight()) / contentHeight;
    }
    scrollPane.setVvalue(vValueCurrent + vValueDelta);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-15T11:47:23.337

要获得完美的快照，您需要考虑滚动条的开始和停止位置。视口从 0（Bounds scollpane）的一半视口开始，并从最大边界停止一半视口。 [边界与视口图片](https://i.stack.imgur.com/r12cO.png)

所以：节点 Y 低于半视口 ->setVvalue 为 0 节点 Y 高于 maxheigh-half 视口 -> 将值设置为 1

在这之间，我们需要计算总高度 -1viewport(half start half at end ) 和节点 y - half viewport。然后（节点 y - 一半视口）/（总高度 -1 视口）

```
 double heightViewPort = scrollPane.getViewportBounds().getHeight();
                double heightScrollPane = scrollPane.getContent().getBoundsInLocal().getHeight();
                double y = Label.getBoundsInParent().getMaxY();
                if (y<(heightViewPort/2)){
                    scrollPane.setVvalue(0);
                    // below 0 of scrollpane

                }else if ((y>=(heightViewPort/2))&(y<=(heightScrollPane-heightViewPort/2))){
                   // between 0 and 1 of scrollpane
                    scrollPane.setVvalue((y-(heightViewPort/2))/(heightScrollPane-heightViewPort));
                }
                else if(y>= (heightScrollPane-(heightViewPort/2))){
                    // above 1 of scrollpane
                    scrollPane.setVvalue(1);

                } 
```

# shell - 如何创建一个shell脚本来更改密码而不提示？

> ID：12837598
> 
> 赞同：2
> 
> 时间：2012-10-11T10:33:11.297
> 
> 标签：shell

我想通过 shell 脚本更改 Unix 用户的密码，但没有提示输入旧密码。

这意味着我想在 shell 脚本本身中提供旧密码和新密码，以便在提示期间它会从脚本文件中读取它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-02T21:04:53.177

您应该查看`chpasswd`命令（如果在您的 linux 风格中可用）：

```
echo 'userid:newpasswd' | chpasswd 
```

或者，您可以在单独的行中列出每个帐户的*userid:passwd文件。*

就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-16T11:19:59.717

```
echo -e -n "newpasswd\nnewpasswd" | passwd user 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:38:04.390

`$> echo -e -n "oldpasswd\nnewpasswd\nnewpasswd" | passwd`

或者为了让事情变得更简洁，用你的密码写一个文件

```
oldpassword
newpassword
newpassword 
```

并使用以下命令：`$> passwd < file`

管道和重定向运算符将标准输入替换为重定向文件的内容，或者管道命令的输出。

# eclipse - 在 m2eclipse 中找不到资源插件？

> ID：12837599
> 
> 赞同：2
> 
> 时间：2012-10-11T10:33:28.713
> 
> 标签：eclipse, m2eclipse, sonarqube

[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)中找不到 org.apache.maven.plugins:maven-resources-plugin:pom:2.5 失败缓存在本地仓库中，直到更新间隔才会重新尝试解析中央已过或强制更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:07:42.997

窗口 -> 显示视图 -> Maven 存储库。选择*全局存储库*->*中央*。使用上下文菜单强制更新该存储库的索引（它甚至可能会在您打开该视图时自动开始更新）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T11:01:03.333

您可以尝试使用 -U（更新快照）选项在构建期间强制更新。

# java - 如何为 JTextArea 行计数考虑换行？

> ID：12837605
> 
> 赞同：2
> 
> 时间：2012-10-11T10:33:53.470
> 
> 标签：java, swing, jtextarea

我知道这个[线程](https://stackoverflow.com/questions/6366776/how-to-count-the-number-of-lines-in-a-jtextarea-including-those-caused-by-wrapp)显示了一种方法，但在我的情况下它会导致奇怪的行为，我想知道是否没有*更简单*的方法来做到这一点。

我需要知道`JTextArea`设置文本后的大小。这是我目前的做法：

```
tarea.getLineCount() * tarea.getRowHeight(); 
```

除非没有换行，否则它可以工作。我想用换行做同样的计算。有没有人知道何时发生换行？这样我只需要将当前行数增加一。

**编辑：**

这是（也许）我找到的解决方案。[这](http://www.exampledepot.com/egs/javax.swing/screen_ScreenCoords.html)几乎是@camickr 的复制粘贴。

```
int rowStartOffset = textComponent.viewToModel(new Point(0, 0));
int endOffset = textComponent.viewToModel(new Point(0, textComponent.getHeight()));

int count = 0; //used to store the line count
while (rowStartOffset < endOffset) {
    try {
        rowStartOffset = Utilities.getRowEnd(textComponent, rowStartOffset) + 1;
    } catch (BadLocationException ex) {
        break;
    }
    count++;
} 
```

我做了一些测试，启用/不启用换行，它似乎工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:49:06.563

在我看来，只要您还没有调用`setPreferredSize`文本区域，该`getPreferredSize`方法应该可以轻松地为您提供您正在寻找的内容......

这就是为什么你不应该打电话`setPreferredSize`来做布局的原因。首选大小应该由组件计算（例如设置文本时）。

让我知道我是否遗漏了要点；）

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class CalculateTextAreaSize extends Box{

    public CalculateTextAreaSize(){
        super(BoxLayout.Y_AXIS);

        final JTextArea text = new JTextArea("I've\nGot\nA\nLovely\nBunch\nof\nCoconuts!\n");

        JScrollPane pane = new JScrollPane(text);

        add(pane);

        JButton button = new JButton("Set Text!");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                text.insert("Longish string - how long will it be?", text.getDocument().getLength());
                //The size it will be once everything is figured out
                System.out.println(text.getPreferredSize());
                //The size it is now because no rendering has been done
                System.out.println(text.getSize());
            }
        });
        add(button);
    }

    /**
     * @param args
     */
    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new CalculateTextAreaSize());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }

} 
```

# r - 使用多个度量变量重塑数据框

> ID：12837609
> 
> 赞同：22
> 
> 时间：2012-10-11T10:33:59.820
> 
> 标签：r, reshape, reshape2

我正在使用与此类似的数据框：

```
df<-data.frame(student=c(rep(1,5),rep(2,5)), month=c(1:5,1:5),  
      quiz1p1=seq(20,20.9,0.1),quiz1p2=seq(30,30.9,0.1),  
      quiz2p1=seq(80,80.9,0.1),quiz2p2=seq(90,90.9,0.1))      

print(df)  

   student month quiz1p1 quiz1p2 quiz2p1 quiz2p2  
1     1     1    20.0    30.0    80.0    90.0  
2     1     2    20.1    30.1    80.1    90.1  
3     1     3    20.2    30.2    80.2    90.2  
4     1     4    20.3    30.3    80.3    90.3
5     1     5    20.4    30.4    80.4    90.4
6     2     1    20.5    30.5    80.5    90.5
7     2     2    20.6    30.6    80.6    90.6
8     2     3    20.7    30.7    80.7    90.7
9     2     4    20.8    30.8    80.8    90.8
10    2     5    20.9    30.9    80.9    90.9 
```

描述学生在五个月内获得的成绩 - 在两个测验中，每个测验分为两个部分。

我需要将两个测验分成不同的行——这样每个月的每个学生都会有两行，每个测验一个，两列——测验的每个部分。当我融化桌子时：

```
melt.data.frame(df, c("student", "month")) 
```

我也将测验的两个部分放在不同的行中。

```
dcast(dfL,student+month~variable) 
```

当然让我回到我开始的地方，我无法找到将表格重新转换为所需形式的方法。有没有办法使熔化命令功能类似于：

```
melt.data.frame(df, measure.var1=c("quiz1p1","quiz2p1"), 
                measure.var2=c("quiz1p2","quiz2p2")) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T13:35:40.297

以下是您如何使用`reshape()`, 从基础 R 执行此操作：

```
df2 <- reshape(df, direction="long",
               idvar = 1:2, varying = list(c(3,5), c(4,6)),
               v.names = c("p1", "p2"), times = c("quiz1", "quiz2"))

## Checking the output    
rbind(head(df2, 3), tail(df2, 3))
#           student month  time   p1   p2
# 1.1.quiz1       1     1 quiz1 20.0 30.0
# 1.2.quiz1       1     2 quiz1 20.1 30.1
# 1.3.quiz1       1     3 quiz1 20.2 30.2
# 2.3.quiz2       2     3 quiz2 80.7 90.7
# 2.4.quiz2       2     4 quiz2 80.8 90.8
# 2.5.quiz2       2     5 quiz2 80.9 90.9 
```

您还可以对 和 使用列名（而不是列号`idvar`）`varying`。它更冗长，但对我来说似乎是更好的做法：

```
## The same operation as above, using just column *names*
df2 <- reshape(df, direction="long", idvar=c("student", "month"),
               varying = list(c("quiz1p1", "quiz2p1"), 
                              c("quiz1p2", "quiz2p2")), 
               v.names = c("p1", "p2"), times = c("quiz1", "quiz2")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T11:52:49.707

我认为这可以满足您的要求：

```
#Break variable into two columns, one for the quiz and one for the part of the quiz
dfL <- transform(dfL, quiz = substr(variable, 1,5), 
                 part = substr(variable, 6,7))

#Adjust your dcast call:
dcast(dfL, student + month + quiz ~ part)
#-----
   student month  quiz   p1   p2
1        1     1 quiz1 20.0 30.0
2        1     1 quiz2 80.0 90.0
3        1     2 quiz1 20.1 30.1
...
18       2     4 quiz2 80.8 90.8
19       2     5 quiz1 20.9 30.9
20       2     5 quiz2 80.9 90.9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T11:50:53.763

大约半年前有一个非常相似的[问题，我在其中编写了以下函数：](https://stackoverflow.com/questions/10161807/reshape-in-the-middle)

```
melt.wide = function(data, id.vars, new.names) {
  require(reshape2)
  require(stringr)
  data.melt = melt(data, id.vars=id.vars)
  new.vars = data.frame(do.call(
    rbind, str_extract_all(data.melt$variable, "[0-9]+")))
  names(new.vars) = new.names
  cbind(data.melt, new.vars)
} 
```

您可以使用该功能“融化”您的数据，如下所示：

```
dfL <-melt.wide(df, id.vars=1:2, new.names=c("Quiz", "Part"))
head(dfL)
#   student month variable value Quiz Part
# 1       1     1  quiz1p1  20.0    1    1
# 2       1     2  quiz1p1  20.1    1    1
# 3       1     3  quiz1p1  20.2    1    1
# 4       1     4  quiz1p1  20.3    1    1
# 5       1     5  quiz1p1  20.4    1    1
# 6       2     1  quiz1p1  20.5    1    1
tail(dfL)
#    student month variable value Quiz Part
# 35       1     5  quiz2p2  90.4    2    2
# 36       2     1  quiz2p2  90.5    2    2
# 37       2     2  quiz2p2  90.6    2    2
# 38       2     3  quiz2p2  90.7    2    2
# 39       2     4  quiz2p2  90.8    2    2
# 40       2     5  quiz2p2  90.9    2    2 
```

一旦数据采用这种形式，您就可以更轻松`dcast()`地获得所需的任何形式。例如

```
head(dcast(dfL, student + month + Quiz ~ Part))
#   student month Quiz    1    2
# 1       1     1    1 20.0 30.0
# 2       1     1    2 80.0 90.0
# 3       1     2    1 20.1 30.1
# 4       1     2    2 80.1 90.1
# 5       1     3    1 20.2 30.2
# 6       1     3    2 80.2 90.2 
```

# iphone - setIndentationLevel 不适用于 cell.ContentView 子视图

> ID：12837613
> 
> 赞同：0
> 
> 时间：2012-10-11T10:34:08.437
> 
> 标签：iphone, ios, uitableview, indentation

为什么`setIndentationLevel`不使用单元格子视图？我有一个`UITableView`. 我`cellForRowAtIndexPath`的如下。我添加的箭头没有随着**textlabel**移动。为什么？

我怎样才能做到这一点？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    UIImageView *img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"small_arrow.png"]];
    img.frame = CGRectMake(5, 10, 7, 11);
    [cell.contentView addSubview:img];

    cell.textLabel.text=[[self.tabledata objectAtIndex:indexPath.row] valueForKey:@"name"];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:18];

    [cell setIndentationLevel:[[[self.tabledata objectAtIndex:indexPath.row] valueForKey:@"level"] intValue]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:41:03.203

是的 ！！！它现在工作。我创建了一个自定义单元格，它的 m 文件就像

```
#import "customecell.h"

@implementation customecell

@synthesize textLbl,img;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code

        textLbl = [[UILabel alloc]initWithFrame:CGRectMake(15, 10, 320, 20)];
        textLbl.backgroundColor = [UIColor clearColor];
        [self.contentView addSubview:textLbl];

        img = [[UIImageView alloc]initWithFrame:CGRectMake(5, 10, 7, 11)];
        img.image = [UIImage imageNamed:@"small_arrow.png"];
        [self.contentView addSubview:img];

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)layoutSubviews{
    [super layoutSubviews];
    float indentPoints = self.indentationLevel * self.indentationWidth;

    self.contentView.frame = CGRectMake(
                                    indentPoints,
                                    self.contentView.frame.origin.y,
                                    self.contentView.frame.size.width - indentPoints,
                                    self.contentView.frame.size.height
                                    );
}

@end 
```

并且`cellForRowAtIndexPath`更改为

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    customecell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[customecell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLbl.text=[[self.tabledata objectAtIndex:indexPath.row] valueForKey:@"name"];
    cell.textLbl.font = [UIFont fontWithName:@"Helvetica" size:18];

    [cell setIndentationLevel:[[[self.tabledata objectAtIndex:indexPath.row] valueForKey:@"level"] intValue]];
    cell.indentationWidth = 25;

    float indentPoints = cell.indentationLevel * cell.indentationWidth;

    cell.contentView.frame = CGRectMake(indentPoints,cell.contentView.frame.origin.y,cell.contentView.frame.size.width - indentPoints,cell.contentView.frame.size.height);

    return cell;
} 
```

# visual-studio-2010 - 你如何在 UML 活动图中表示一个案例陈述？

> ID：12837616
> 
> 赞同：2
> 
> 时间：2012-10-11T10:34:23.117
> 
> 标签：visual-studio-2010, uml

当我遇到一个逻辑时，我目前正在为一个复杂的逻辑创建一个活动图，有几个选项可供选择，而菱形（决策节点）似乎不是表示它的好方法。

那么如何在 UML 活动图中表示 switch-case 语句呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:53:01.980

决策节点应该非常适合它。只需使用几个带条件的传出转换，可能还有一个 else 转换。如果你真的更喜欢它，你可以省略决策节点，只使用前一个活动节点的多个传出转换。

# c# - 如何解析 SQL Server 2005 .MDF 文件的内容？

> ID：12837619
> 
> 赞同：-3
> 
> 时间：2012-10-11T10:34:34.037
> 
> 标签：c#, sql, sql-server, parsing

如何解析 SQL Server 2005`.mdf`文件的内容？

我需要提取那里定义的所有存储过程。OrcaMDF 在该文件上失败:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:08:47.013

[OrcaMDF](https://github.com/improvedk/OrcaMDF)是一个有趣但纯粹是实验性的项目。检查 SQL Server 数据库（.MDF 和 .LDF 对）内容的唯一方法是将它们附加到 SQL Server 实例并在其上运行 T-SQL 查询。

# json.net - 在 Json.net 中指定带有属性的 JsonConverters？

> ID：12837622
> 
> 赞同：1
> 
> 时间：2012-10-11T10:34:38.677
> 
> 标签：json.net

我正在向我的服务器接收 JSON 数据，其日期表示如下：

```
{
    "startDate": {
        "d": "/Date(1346454000000)/"
    },
    "slots": [
        {
            "d": "/Date(1347058800000)/"
        },
        {
            "d": "/Date(1347145200000)/"
        }
    ]
} 
```

它序列化为一个简单的对象：

```
public class SlotsVm
{
    public DateTime StartDate { get; set; }

    public DateTime[] Slots { get; set; }
} 
```

因为日期格式比较奇怪，只好自己写了一个自定义的 JsonConverter 来处理。为了反序列化，我使用如下代码：

```
var slotsVm = JsonConvert.DeserializeObject<SlotsVm>(body,
    new CustomDateTimeConverter()); 
```

如果可能的话，我希望需要在`SlotsVm`类上定义转换器，而不是在实际进行转换的代码中。这对于`startDate`使用属性的属性是可能的：

```
[JsonConverter(typeof(CustomDateTimeConverter))]
public DateTime StartDate { get; set; } 
```

但它是不可能的`Slots`，它是一个数组而不是一个简单的`DateTime`.

最好能够在类本身上定义类所需的转换器：

```
[JsonConverters(typeof(CustomDateTimeConverter), ...]
public class PutDealVm
{

} 
```

但似乎没有办法做到这一点。

你能想出解决办法吗？有没有办法为我错过的类定义转换器？或者，是否可以定义数组应为其每个元素使用的转换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:17:09.597

这样的事情呢？我很欣赏这可能无法直接回答您的问题，但我懒得重新创建`CustomDateTimeConverter`该类，所以想出了这个，这可以说更简单，因为不需要自定义转换器。

```
string json = "{\"startDate\": {\"d\": \"/Date(1346454000000)/\"},\"slots\": [{\"d\": \"/Date(1347058800000)/\"},{\"d\": \"/Date(1347145200000)/\"}]}";

SlotsVmDeserialized slotsVmDeserialized =
    JsonConvert.DeserializeObject<SlotsVmDeserialized>(json);

SlotsVm slotsVm = new SlotsVm()
{
    Slots = slotsVmDeserialized.Slots.Select(d => d.Date),
    StartDate = slotsVmDeserialized.StartDate.Date
};

....

public class SlotsVm
{
    public DateTime StartDate { get; set; }
    public IEnumerable<DateTime> Slots { get; set; }
}

public class SlotsVmDeserialized
{
    public DateObject StartDate { get; set; }
    public IEnumerable<DateObject> Slots { get; set; }
}

public class DateObject
{
    [JsonProperty("d")]
    public DateTime Date { get; set; }
} 
```

我在这里所做的是首先反序列化到`SlotsVmDeserialized`类，该类用于保存`DataObject`它们中的一个和一个 IEnumerable。该类`DateObject`本质上是我对自定义转换器的替代/解决方法。我可以通过删除`[JsonProperty("d")]`并重命名`Data`为`D`.

`SlotsVm`反序列化后，我会根据对象的属性创建一个新`SlotsVmDeserialized`对象。

# php - PHP：html 内容的 curl_exec() 与查看页面源代码不同

> ID：12837623
> 
> 赞同：0
> 
> 时间：2012-10-11T10:34:37.593
> 
> 标签：php, parsing, curl, web-scraping

以下代码的 Html 输出提供了一些在页面中根本不可用的附加数据。我将此输出与查看页面源进行比较。额外数据从“寻找不同的......”开始

```
$url : http://www.linkedin.com/pub/senthil-selvaraj/36/90b/5b9
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,           "$url");
curl_setopt($ch, CURLOPT_TIMEOUT,       30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
curl_setopt($ch, CURLOPT_COOKIEJAR,     "cookie.txt");
curl_setopt($ch, CURLOPT_USERAGENT,     "Mozilla/4.0 (compatible; MSIE 5.01;    Windows    NT 5.0)");

 if ($proxystatus == 'on')
 {
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
 }            

 $body = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:37:29.363

这很可能与 cookie 或标头有关，因为 cURL 并不能在所有方面模拟真实的浏览器。因此，您的输出可能会有所不同，因为 cURL 甚至可以发送不同的 Accept 或 Location 标头等。

你试过不同的浏览器吗？此外，该 cURL 是否从您正在浏览页面的同一 IP 发出？

**编辑：**您可以尝试将[Firebug](http://getfirebug.com/)安装到 Firefox 中，然后使用 F12 键打开它，切换到网络（或网络）选项卡并检查浏览器发送到服务器的标头。然后，您可以使用您的 cURL 请求来模拟这些标头。

# php - 注册表单不向用户发送电子邮件

> ID：12837624
> 
> 赞同：-5
> 
> 时间：2012-10-11T10:34:42.390
> 
> 标签：php, forms, email, mysqli

我有这个表格注册用户并发送电子邮件以验证电子邮件是否正确并且存在用户注册正常但“验证电子邮件”没有发送到用户电子邮件

**这是PHP代码**

```
 <?php

if (isset($_POST['submited'])) {
    $msg = "";

    $RFname = clean_text($_POST['RFname']);
    $RLname = clean_text($_POST['RLname']);
    $USERname = clean_text($_POST['UserName']);
    $USERpassword = $_POST['UserPass'];
    $USERpassword2 = $_POST['UserPassConfirm'];
    $USERemail = $_POST['UserEmail'];
    $USERwebsite = $_POST['WebSite'];
    $hash = clean_text(md5(rand(0, 1000)));
    $checkEmail = $db->query("select * from loginaccess where Email ='" . $USERemail . "'");
    $checkUID = $db->query("select * from loginaccess where Uname ='" . $USERname . "'");

    if ($USERpassword !== $USERpassword2) {
        $msg = "<span style='color:#F00; font-size:14px; font-weight:bold;'>Passwords did not match</span>";
    } elseif ($checkEmail->num_rows == 1) {
        $msg = "<span style='color:#F00; font-size:14px; font-weight:bold;'>This email already taken</span>";
    } elseif ($checkUID->num_rows == 1) {
        $msg = "<span style='color:#F00; font-size:14px; font-weight:bold;'>This User name already taken</span>";
    } elseif (empty($_SESSION['6_letters_code']) || strcasecmp($_SESSION['6_letters_code'], $_POST['6_letters_code']) != 0) {
        $msg = "<span class='errorMessges'>Human code verification invalid</span>";
    } else {
        $putData = "insert into loginaccess (id, FUname, LUname, Uname, Pword, Email, Website, hash) value ('', '$RFname', '$RLname', '$USERname', '$USERpassword', '$USERemail', '$USERwebsite', '$hash')";
        $inputResult = $db->query($putData) or die ('$db->error');
        if ($inputResult) {
            $msg = "<span class='successMessgaes'>You have been successfully registered</span>";

            // Send email to our user 
            $to = '$USERemail';
            $subject = 'Signup | Verification';
            $message = "

        Welcome to Learning and share.

    Before you can use your new account you must activate it - this ensures the e-mail address you used is valid and belongs to you.  To activate your account, click the link below or copy and paste the whole thing into your browser's location bar:

    -------------------------------------------------------------------------------------------------------- 
    http://www.yourwebsite.com/verify.php?email='.$USERemail.'&hash='.$hash.'
    -------------------------------------------------------------------------------------------------------- 

    Once you've successfully activated your account, you can throw away this e-mail.

    Thanks!

    The Learning and share staff

    ";
            $headers = 'From:noreply@learning.com' . "\r\n";
            mail($to, $subject, $message, $headers);
        } else {
            $msg = "<span class='errorMessges'>There was an error please try again later</span>";
        }
    }
}
?> 
```

这是 HTML 代码

```
<form action="<?php $_SERVER['PHP_SELF']; ?>" method="post">

    <table width="762" border="0" cellspacing="5" cellpadding="5">
        <tr>
            <td colspan="2" class="socialAndPeopleByName">Personal information</td>
            <td colspan="2"><span class="socialAndPeopleByName">Account information</span></td>
        </tr>
        <tr>
            <td width="91" class="registrationInfo"><span class="red">*</span> First name</td>
            <td width="203"><label for="textfield"></label>
              <span id="sprytextfield1">
              <input name="RFname" type="text" class="registrationFeild" id="textfield"/>
              <span class="textfieldRequiredMsg"><br>
              First name  is required.</span></span></td>
            <td width="148"><span class="red">*</span><span class="registrationInfo"> User name</span></td>
            <td width="255"><span id="sprytextfield5">
              <input name="UserName" type="text" class="registrationFeild" id="textfield5"/>
              <span class="textfieldRequiredMsg"><br>
              User name is required.</span></span></td>
        </tr>
        <tr>
            <td class="registrationInfo"><span class="red">*</span> Last name</td>
            <td><span id="sprytextfield2">
              <input name="RLname" type="text" class="registrationFeild" id="textfield2"/>
              <span class="textfieldRequiredMsg"><br>
              Last name is required.</span></span></td>
            <td><span class="red">*</span><span class="registrationInfo"> Password</span></td>
            <td><span id="sprypassword1">
            <input name="UserPass" type="password" class="registrationFeild" id="textfield7"/>
            <span class="passwordRequiredMsg"><br>
            Password is required.</span><span class="passwordMaxCharsMsg"><br>
            Password can't be more then 20 letter</span><span class="passwordMinCharsMsg"><br>
            Password can't be less then 6 letter</span></span></td>
        </tr>
        <tr>
            <td class="registrationInfo"><span class="red">*</span> Valid email</td>
            <td><span id="sprytextfield3">
            <input name="UserEmail" type="text" class="registrationFeild" id="textfield3"/>
            <br>
            <span class="textfieldRequiredMsg">Valid email is required.</span><span class="textfieldInvalidFormatMsg">Invalid email format.</span></span>
            </td>
            <td><span class="red">*</span><span class="registrationInfo"> Confirm Password</span></td>
            <td><span id="sprypassword2">
              <input name="UserPassConfirm" type="password" class="registrationFeild" id="textfield8"/>
              <span class="passwordRequiredMsg"><br>
              Please confirm your password</span></span></td>
        </tr>
        <tr>
            <td class="registrationInfo">Web site</td>
            <td><span id="sprytextfield4">
              <input name="WebSite" type="text" class="registrationFeild" id="textfield4"/>
              <br>
              <span class="textfieldInvalidFormatMsg">Invalid format</span></span></td>
            <td><span class="registrationInfo"><span class="red">*</span> Prove you are human</span></td>
            <td><img src="includes/captcha.php?rand=<?php echo rand(); ?>" align="absmiddle" id='captchaimg'/> <a
                    href="javascript: refreshCaptcha();"><img src="images/refreshIcon.jpg" alt="Refresh" width="18"
                                                              height="25" border="0" align="absmiddle"/></a> <input
                    name="6_letters_code" type="text" class="registrationFeildSmall" id="6_letters_code"/></td>
        </tr>
        <tr>
            <td colspan="3"><?php if (!empty($msg)) {
                    echo $msg;
                } ?></td>
            <td><input name="submited" type="submit" class="signUpItem" id="submited" value=""/></td>
        </tr>
    </table>
</form> 
```

用户注册后会发生什么：

1.  新用户成功插入数据库。
2.  用户收到消息“您已成功注册”。

**问题**：这是用户从未收到验证电子邮件的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:18:07.227

您写道，您在发送确认电子邮件时遇到问题。您需要检查它是否基本有效，如果没有，请为自己提供一些调试信息。

该[`mail`函数](http://php.net/mail)有一个返回值：

> `TRUE`如果邮件被成功接受投递，则返回，`FALSE`否则返回。
> 
> 重要的是要注意，仅仅因为邮件被接受交付，并不意味着邮件实际上会到达预定目的地。

利用返回值编写更稳定的代码。否则你会一直坐在黑暗中。

一个粗略的例子：

```
...

$headers = 'From:noreply@example.com' . "\r\n"; 
$send = mail($to, $subject, $message, $headers);
if (!$send) {
    echo "Failed to send Email:\n";
    var_dump($to, $subject, $message, $headers);
    die();
} 
```

然后定位实际问题。如果报告电子邮件已发送，但您没有看到它已送达，请检查您的外发邮件错误日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:56:52.617

改变：

```
$to='$USERemail'; 
```

到：

```
$to = $USERemail; 
```

PHP 不允许在单引号中对变量进行字符串插值。

# sql - SQL 查询以提取 n 行并将它们转换为列

> ID：12837628
> 
> 赞同：1
> 
> 时间：2012-10-11T10:34:49.583
> 
> 标签：sql, sql-server, tsql, pivot

> **可能重复：**
> [Poor Man's SQL Pivot。将问题列为列并在一行中列出每个用户的答案](https://stackoverflow.com/questions/3924641/poor-mans-sql-pivot-list-questions-as-columns-and-answers-per-user-in-one-row)

我有以下查询首先为我的每个外键提取 12 条记录（在缺少记录的情况下为空值），然后将每个外键的所有 12 条记录转换为一列。然而，下面的代码生成了 12 行，但未能将所有行转换为列。相反，它只对我的一个外键 IDS 进行转换，然后停止。

请帮助我正确地调整它，以便对于每个 ProductID，我得到一行。提前致谢。

```
 DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

    --BEGIN TRY
           IF EXISTS
                (
                            SELECT *
                            FROM tempdb.dbo.sysobjects
                            WHERE ID = OBJECT_ID(N'tempdb..#ManufacturerAttributes')
                )
                BEGIN
                            DROP TABLE #ManufacturerAttributes
                END
    Create table #ManufacturerAttributes
    ( 
            ProductID uniqueIdentifier,
             PAID uniqueidentifier,
            MfgAttrLabel varchar(50),
            MfgAttrVal varchar(3072),
            MfgAttrUOM varchar(50), 
            rowindex int
    )
    ;With Number
As
(
 Select 1 as rownum union all  Select 2 union all Select 3 union all Select 4 union all Select 5 union all Select 6 union all Select 7 union all Select 8 union all Select 9 union all Select 10 union all Select 11 union all Select 12   
),
ProductDetail 
as 
(
   select P.ProdID, N.rownum from IDWProduct P cross join Number N
)
Insert into #ManufacturerAttributes
Select  ProdID  , PAVAttributeID,PANAme, PAVValue, UOMLabel, P.rownum
 from ProductDetail P
Left join (select Pr.*, row_number() over (partition by PAVProductID order by PAVID) as Rn from IDWProductAttributeValues Pr ) Pr ON rownum = Pr.Rn And PAVProductID = ProdID  
left join IDWUnitofMeasures on Pr.PAVUOM = UOMID 
left join IDWAttributes  A on Pr.PAVAttributeID = A.PAID  AND A.PAIsManufacturerSpecific = 1

 Select * from #ManufacturerAttributes

  select @colsUnpivot = stuff((select ','+quotename(C.name)
         from tempdb.sys.columns as C
         where C.object_id = object_id('tempdb..#ManufacturerAttributes')  
         for xml path('')), 1, 1, '')

-- select @colsUnpivot

 select @colsPivot = STUFF((SELECT  ','  + quotename(c.name   + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by ProductID   order by ProductID) rn  from #ManufacturerAttributes
                    ) t
                     cross apply 
                      tempdb.sys.columns  as C
                   where C.object_id = object_id('tempdb..#ManufacturerAttributes')   
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

 --select @colsPivot
   set @query 
  ='select *
      from
      (
        select ProductID, PAID, RowIndex,
            col + cast(rn as varchar(10)) new_col,
            val 
         from 
        (
          select  
          Cast (ProductID as NVarchar(3072)) ProductID
          ,Cast(PAID as NVarchar(3072)) PAID
           ,Cast (MfgAttrLabel  as NVarchar(3072)) MfgAttrLabel
           ,Cast (MfgAttrVal as NVarchar(3072)) MfgAttrVal
           ,Cast (MfgAttrUOM as NVarchar(3072))  MfgAttrUOM  
           ,Cast(rowindex as NVarchar(3072)) rowindex
            ,row_number() over(partition by ProductID order by ProductID) rn
          from  #ManufacturerAttributes

        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p'

    --  Print @query

exec(@query) 
```

**[带有脚本的 SQLFiddle](http://sqlfiddle.com/#!3/10876/1)**

# c - 使用条件运算符比较两个无符号值时有符号/无符号不匹配

> ID：12837631
> 
> 赞同：7
> 
> 时间：2012-10-11T10:34:53.677
> 
> 标签：c, visual-c++, conditional-operator

我有以下 C 代码：

```
unsigned int a;
unsigned char b, c;
void test(void) {
    if (a < b)
        return;
    if (a < (b ? b : c))
        return;
} 
```

当我编译它时（使用 Microsoft `cl`，来自 MS SDK 7，`-W3`警告级别），第二个比较发出警告：C4018，有符号/无符号不匹配。第一次比较不会发出警告。

我已经检查[了条件运算符的 MS 文档](http://msdn.microsoft.com/en-us/library/e4213hs1%28v=vs.90%29.aspx)，他们说如果两个操作数属于同一类型，则结果将属于同一类型，因此它应该作为第一个比较。我错过了什么吗？

**UPD：**经过测试，`gcc -Wall -Wextra -pedantic`没有收到任何警告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:06:20.563

这可能是由于算术转换规则：首先，任何小于`int`(eg `unsigned char`) 的整数类型的转换等级都将提升为`int`or `unsigned int`。

结果是否`int`（`unsigned int`直接）取决于原始类型的有符号性，但其范围：`int`即使可以表示所有值，也可用于无符号类型，这是`unsigned char`主流架构的情况。

其次，由于两个操作数最终具有相同的转换等级，但一个是无符号的，另一个操作数也将转换为无符号类型。

从语义上讲，您的表达方式为

```
a < (unsigned int)(int)b 
```

和

```
a < (unsigned int)(b ? (int)b : (int)c) 
```

编译器显然足够聪明，可以注意到第一种情况不会导致问题，但第二种情况会失败。

Steve Jessop 的评论很好地解释了这是如何发生的：

> 我想在第一种情况下，编译器会认为，“我有一个比较运算符，其操作数类型是`unsigned int`and `unsigned char`。不需要警告，现在让我们应用提升，然后进行通常的转换”。
> 
> 在第二种情况下，它认为，“我有一个比较运算符，其操作数类型是`unsigned int`and `int`（我将其作为 RHS 上的条件表达式的类型派生出来）。最好警告一下！”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T11:11:50.487

`if (a < b)`等于伪`if (unsigned int < unsigned char)`。

每当在表达式中使用 char 类型时，C 中的整数提升规则都会将其隐式转换为`int`. 完成后，你有

`if (unsigned int < int)`.

每当在表达式中使用两个具有相同等级但不同符号的整数时，有符号的整数就会隐式转换为无符号的。这是由*通常的算术转换*决定的，也就是*平衡*。

所以你的第一个表达式被转换为

`if (unsigned int < unsigned int)`

在任何事情完成之前。

* * *

在第二个表达式中，我们有`if (a < (b ? b : c))`等于伪

`if (unsigned int < (unsigned char ? unsigned char : unsigned char))`.

对所有字符执行整数提升，因此它被隐式转换为

`if (unsigned int < (int ? int : int))`.

然后，条件运算符的一个奇怪而晦涩的规则规定 ?: 运算符的第二个和第三个运算符必须与通常的算术转换保持平衡。在这种情况下，它们已经属于同一类型，所以什么也不会发生。我们最终得到

`if (unsigned int < int)`

再次发生平衡，结果将被评估为

`if (unsigned int < unsigned int)`

* * *

> 当我用微软编译它时

当你用微软编译时，所有的赌注都没有了，他们的编译器在遵循标准方面很差。期待奇怪的、不合逻辑的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:40:10.277

C 和 C++ 之间的规则不同。使用 MSVC 编译 C 时可能很难判断适当的标准，但幸运的是在这种情况下 C89 和 C99 是相同的。

在 C89 3.3.15 中：

> 如果第二个和第三个操作数都具有算术类型，则执行通常的算术转换以将它们转换为通用类型并且结果具有该类型

在 C99 6.5.15/5 中：

> 如果第二个和第三个操作数都具有算术类型，则将由通常的算术转换确定的结果类型（如果它们应用于这两个操作数）就是结果的类型。

在 C++03 5.16/4 中：

> 如果第二个和第三个操作数是左值并且具有相同的类型，则结果是该类型并且是左值

因此，当您说“如果两个操作数属于同一类型，则结果将属于同一类型，因此它应该作为第一个比较”，这仅适用于 C++，不适用于 C。在 C 中该比较的 RHS 是`int`. 在 C++ 中，RHS 将是`unsigned char`您所期望的类型的左值。

# shell - Shell 脚本：为新的 gnome-terminal 选项卡设置标题

> ID：12837640
> 
> 赞同：3
> 
> 时间：2012-10-11T10:35:35.573
> 
> 标签：shell, escaping, title, gnome-terminal

我尝试自动设置我的环境。这样做我需要在终端中打开几个选项卡并执行命令。选项卡应该有一个标题来区分它们。该脚本应该只在选项卡中写入命令而不执行。

该脚本需要一个输入文件 start.txt。这将逐行处理 - 每行首先包含终端选项卡的标题，并用逗号分隔命令。

通过非常简单的 gnome-terminal 调用，将显示标题：

> gnome-terminal -- tab --title=test1 -e top --tab --title=test2 top

但是当执行复杂的命令时，这将不起作用，并且不会设置标题。

这是整个代码：

```
#!/bin/bash

# define variable which needs to be executed
cmdline="gnome-terminal"
# define input file
file="cat start.txt"
# define run_command script
destdir=/home/ank1abt/Documents/run_command.sh

# create if not already existing and change permissions
touch $destdir
chmod 755 $destdir

# read file an process line by line 
# each line contains first the title and with comma separated the command for a new tab in a terminal
$file | \
while read row; do
  #extract tab title and command   
  title=$(echo $row | awk -F","  '{print $1}')
  cmd=$(echo $row | awk -F","  '{print $2}')  
  set_title="export PS1='\[\e]0;"$title"\a\]\${debian_chroot:+(\$debian_chroot)}\u@\h:\w\$'"      
  #cmdline=$cmdline\ "--tab --title="$title" -e top"
  cmdline=$cmdline\ "--tab --title="$title" -e \"bash -c \\\" echo "$title"; echo export PS1='\[\e]0;"$title"\a\]\\\${debian_chroot:+(\\\$debian_chroot)}\u@\h:\w\$';echo "$cmd"; exec bash\\\"\""
  echo $cmdline   
  # command will be written to a file
  echo "$cmdline" > $destdir
done

# execute the file with the command
exec "./run_command.sh" 
```

与此同时，我尝试了一种解决方法。还有另一个有趣的命令，您可以使用它在选项卡中设置选项卡标题，然后可以在选项卡中执行或直接写在那里，以便用户可以复制和执行它：

> 导出 PS1='[\e]0;任务\a]${debian_chroot:+($debian_chroot)}\u@\h:\w$'

但是使用当前代码，以下命令将被写入 run_command 脚本：

> gnome-terminal --tab --title=test1 -e "bash -c \" echo test1; echo export PS1='[\e]0;test1\a]\${debian_chroot:+(\$debian_chroot)}\u@\h:\w$'; 回声顶部；执行 bash\"" --tab --title=test2 -e "bash -c \" echo test2; echo export PS1='[\e]0;test2\a]\${debian_chroot:+(\$debian_chroot)}\u@\h:\w$'; 回声顶部；执行 bash\""

当您只是复制此命令并在终端中执行它时，选项卡将显示导出命令，但不包含在单引号中，然后它将不起作用。

> 导出 PS1=[\e]0;任务\a]${debian_chroot:+($debian_chroot)}\u@\h:\w$

当然，我更喜欢让 gnome-terminal 命令的标题选项工作，但如果这不可能，我会很高兴任何提示如何在单引号的选项卡中使用 PS1 的导出值。我已经尝试用 \ 或几个 \ 来逃避它，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:05:16.897

由于您正在将命令写入文件然后执行它，因此您需要额外的引用级别。在脚本的中间部分试试这个：

```
while read row; do
  #extract tab title and command   
  title=$(echo $row | awk -F","  '{print $1}')
  cmd=$(echo $row | awk -F","  '{print $2}')  
  cmdline=$cmdline\ "--tab --title='$title' -e '$cmd'"
  echo $cmdline   
  # command will be written to a file
  echo "$cmdline" > $destdir
done 
```

# javascript - 如何检查 Twitter Bootstrap 是否存在？

> ID：12837643
> 
> 赞同：2
> 
> 时间：2012-10-11T10:35:42.580
> 
> 标签：javascript, jquery, twitter-bootstrap, mootools

使用具有 Mootools、jQuery 和 Twitter Bootstrap 但每个都可以关闭的 Joomla 30。

我需要检查引导程序是否存在。

对于 moo 和 jq 我们可以做

```
if (typeof jQuery != 'undefined') {  

// do stuff
} 
```

但是我们如何检查 Bootstrap 是否存在呢？我们如何使用 mootools 或纯 js 无库检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:38:40.693

使用 Bootstrap（比检查 jQuery）要困难得多，因为 bootstrap 不会将明确的变量泄漏到全局命名空间中。您*可以*做的是（a）首先检查 jQuery（因为引导程序似乎依赖于它），然后：

a) 遍历 $("link") 以检查**attr("href").indexOf("/bootstrap.")>=0**和/或遍历 *$("script") 以检查**attr("src" ).indexOf("/bootstrap.")>=0**。现在，这当然是一种非常不科学的检查方法。（注意：此检查使用 jQuery，但根据引导程序的 jQuery-dependency 应该没问题）

b) 另一个——也许更科学的——想法是检查个体特征的存在。比如说，检查**($.fn.modal && $.fn.affix && $.fn.typeahead && ...)**。这可能会产生误报（如果开发人员使用具有相同名称的其他插件），如果开发人员使用了引导功能的自定义组合，甚至可能会产生误报。

另一种选择是检查典型的 CSS 类，如“.form-horizo​​ntal”和“.pre-scrollable”，方法是将它们分配给临时元素并以编程方式检查它们的运行时样式。但这可能有点困难，如果开发人员自定义了样式，*也*可能导致误报/否定。

所以我想没有简单的答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:41:54.527

如果有人有更好的解决方案，我想我会资助一个解决方案，请告知

这是在 mootools domready 中

```
if((typeof jQuery == 'function' && typeof jQuery.fn.popover == 'undefined') || (typeof jQuery == 'undefined')){

//  BS is not here 

} 
```

我们可以检查其他引导函数，如 jQuery.fn.tooltip
，就像说这是 Joomla 3.0 版本的引导程序特有的，因为它的所有插件都在 1 分钟文件中，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:44:13.997

你能编辑你的身体标签吗？然后你可以添加一个类似的数据属性`data-bootstrap="1"`并检查它是否存在，或者甚至在`0`需要时将值更改为。

# android - 为什么一个空的 Android ICS 应用程序几乎占据了所有的堆大小？

> ID：12837646
> 
> 赞同：2
> 
> 时间：2012-10-11T10:35:56.607
> 
> 标签：android, heap-memory

我正在为 SDK >= 8 构建的 Android 下开发游戏应用程序。我总是在 Android 2.2 手机下测试它，从来没有遇到过问题。当我搬到装有 ICS 的 Nexus 手机时，我开始遇到堆内存分配问题。我试图删除应用程序中的所有内容，以查看哪里有内存泄漏问题或奇怪的分配（在 Eclipse 下使用 DDMS 和 MAT），直到我决定只启动一个空活动并且什么都不做。

在 Android 2.2 下，启动时的堆大小约为 2.0MB，而在 Android 4.1 下约为 11MB。为什么会有这么大的差异？

此外，当我在 ICS 上以堆大小播放我的应用程序时，垃圾收集器迅速开始释放内存，整个应用程序变得缓慢且 FPS 非常低。在 Android 2.2 下，一切都非常流畅和干净，没有任何问题。

有谁可以建议我这两个系统之间的区别在哪里？我不想谈论我的应用程序实现（我已经花了 2 周时间优化代码、内存分配和保留以及其他所有内容。不能做更多），但我想了解所有内存在应用程序启动时的去向. 此外，ICS 似乎需要更多内存来加载和保留位图和可绘制对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:53:59.303

好吧，我可能迟到了，但我找到了你（和我）问题的根源。

在 Android 3.0 之前（不确定这是否在整个 1.x/2.x 系列中）所有与位图相关的内存都没有存储在堆上。因此，在 3.0 中，他们开始在堆上定位所有内容。我不确定为什么一个空的应用程序会占用 11MB，我只能猜测它与应用程序中使用的默认 Android 位图有关。

现在还有另一个问题：在早期版本的 Android 中，只有“drawable”文件夹，没有“drawable-hdpi”、“drawable-mdpi”等文件夹。出于某种原因，当从“drawable”文件夹加载图像时，它会占用大量空间。解决方案是将图像的不同分辨率变体添加到*所有*drawable-Xdpi（其中 X 是 l、m、h 或 xh）文件夹。它将我的起始堆大小从大约 26MB 减少到了 16MB。即使您不调整它们的大小，而只是将它们复制粘贴到文件夹中，它仍然会导致位图大小发生相当大的变化。

我希望我通过发布这个来帮助一些人。

-Z

# android - Phonegap-2.10：硬件后退按钮无法正常工作

> ID：12837649
> 
> 赞同：1
> 
> 时间：2012-10-11T10:36:12.767
> 
> 标签：android, cordova, events, dom-events, phonegap

我正在使用 phonegap-1.3.0 和 android-4.0.3 开发一个应用程序。下面是我的代码：

```
function home() {   
document.removeEventListener("backbutton", handleBackButton, false);
document.addEventListener("backbutton", handleBackButtonOnHome, false);
}

function edit() {
document.removeEventListener("backbutton", handleBackButtonOnHome, false);   document.addEventListener("backbutton", handleBackButton, false);
}

function handleBackButton() {
console.log("Back Button Pressed!");
home();
}

function handleBackButtonOnHome() {
console.log("Back Button Pressed in home!");
navigator.app.exitApp();
} 
```

单击编辑页面上的硬件后退按钮将用户带到主页，当在主页上时，应用程序按照事件处理程序的指定退出。该应用程序在指定的设置（配置）上运行良好。

最近我升级到了cordova-2.1.0，点击编辑页面上的后退按钮会退出应用程序，而不是将用户带到主页。

请注意：我已经尝试过我的东西，但似乎没有任何效果，
`navigator.app.backHistory()`
`history.back()`

欢迎任何帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:15:41.537

在我的环境中寻找解决此问题的方法时（PhoneGap 中的 Sencha Touch 2，请参阅[此处](http://andidog.de/blog/2012/06/packaging-a-sencha-touch-2-application-with-phonegap-for-android/)的 Andreas Sommer 说明），我通过将以下代码添加到我的 index.html HEAD 部分来修复：

```
<!-- handle android hardware back button -->
<script type="text/javascript" charset="utf-8">
    document.addEventListener("deviceready", function() {
        document.addEventListener("backbutton", function() {
            if (Ext.getCmp('mainview').pop(1) == null) {
                Ext.Msg.confirm("Exit", "Do you want to Exit?", function(e) {
                    if (e == 'yes') {
                        navigator.app.exitApp();
                    }
                });
            }
            else {
                return false;
            }
        }, false);
    }, false);
</script> 
```

仅供参考，“mainview”组件是一个 Ext.navigation.View，我从堆栈中弹出当前视图。如果 pop() 返回 null 那么我们在主视图。

这适用于 Gingerbread 和 ICS，但不适用于 Jelly Bean。为了让它与 Jelly Bean 一起工作，我需要从 PhoneGap 下的 AndroidManifest.xml 文件的标记中删除 android:targetSdkVersion="17" 属性。

所有这些都只适用于 PhoneGap。当我在 Sencha Touch 而不是 PhoneGap 下生成 .apk 时，硬件后退按钮没有被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:43:47.640

感谢您查看问题。我通过添加以下行解决了这个问题

```
document.addEventListener("backButton", backPressed, false); 
```

在 onDeviceReady() 函数中。并使用标志变量在这样的页面之间导航，

```
function backPressed() {
alert('backPressed');   
if(gAppControl.pageFlag == true)
home();
else
navigator.app.exitApp();        
} 
```

问候， Nanashi

# ios6 - iTunesconnect、App Review 联系信息

> ID：12837651
> 
> 赞同：0
> 
> 时间：2012-10-11T10:36:26.593
> 
> 标签：ios6, app-store-connect

我在使用 iTunes 连接时（再次）遇到问题。

我想为我的应用添加新版本，但我收到了消息

```
The following error(s) occurred:

You must provide all required contact information. To edit your contact details, click Edit in the App Review section. 
```

但是，我找不到应该在哪里添加信息！它在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T13:45:42.260

你向下滚动了吗？

该信息是您在顶部看到错误的页面底部（参见屏幕截图）。

按 App Review Information 旁边的编辑按钮进行编辑。

您可以在此处找到有关此主题的更多信息：

*   [Apple 的应用程序信息编辑和更新指南](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW1)

它包含一个小节：

*   [应用审查信息](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html#//apple_ref/doc/uid/TP40011225-CH14-SW12)

![在此处输入图像描述](../Images/c73038b131201051b95724946ea9a80f.png)

# c# - 如何将 .aspx 页面转换为 pdf？

> ID：12837660
> 
> 赞同：0
> 
> 时间：2012-10-11T10:37:14.690
> 
> 标签：c#, asp.net, pdf, itextsharp

我需要从 .aspx 页面创建一个 pdf。在 .aspx 页面中，用户将在文本框和网格视图中输入如此多的值。它还有一些带有不同部分的选项卡。我确实使用 iTextSharp 来创建简单的 pdf。但是在这里我需要从页面中获取值并且需要读取选项卡控件。那么是否可以使用 iTextSharp 或者是否有任何开源 dll 可用于将 .aspx 转换为 pdf ..

给我一些想法？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:55:49.667

通过使用 ITextsharp 库，这可以通过使用 HTMLWorker 来完成：

首先创建字符串生成器；

```
 private StringBuilder sb; 
```

然后从文本框值添加 pdf 标题为：

```
sb.Append("<p style=\"text-align: center;font-size:" + fontSize + "px;font-weight:" + (bold ? "bold" : "normal") + ";\">" + txtHeading + "</p>"); 
```

然后将主题从文本框值添加到 pdf 为：

```
sb.Append("<table><tr valign=\"top\"><td>Subj:</td><td style=\"font-size:" + fontSize + "px;font-weight:bold;text-decoration:underline;\">" + txtSubject.text + "</td></tr></table><br />"); 
```

然后将文本框值中的段落添加为：

```
sb.Append("<p style=\"text-align: left;font-size:" + fontSize + "px;font-weight:" + (bold ? "bold" : "normal") + ";\">" + txtParagraph + "</p><br/>"); 
```

用于创建表在 string[] 数组中取值

```
sb.Append("<table width=\"100%\" cellspacing=\"0\" cellpadding=\"3\" border=\"0.5\"><thead><tr align=\"center\" valign=\"top\">");
            foreach (string str in StringArray)
            {
                sb.Append("<th><strong>" + str + "</strong></th>");
            }
            sb.Append("</tr></thead>"); 
```

等等。您可以从 aspx 页面的文本框值创建 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:41:01.440

Itext Sharp 非常简单。关于选项卡，我不知道它是否会起作用，因为它适用于分页，我的意思是它将分页中的所有内容转换为单个 pdf [单击此处以示例](http://www.codeproject.com/Articles/18040/Tutorials-on-creating-PDF-files-using-C-2-0)

# c# - 优化循环大数据表

> ID：12837672
> 
> 赞同：2
> 
> 时间：2012-10-11T10:37:54.680
> 
> 标签：c#, asp.net

我正在使用 100 到 10000 行的数据表，通过 doyble 循环将每一行相互比较。

```
for (int i = 0; i < DT1.Rows.Count; i++)
{
    for (int j = 0; j < DT1.Rows.Count; j++)
    {
        //some code to compare data
    }
} 
```

对于 100-200 行，它可以在几分钟内完成，这没关系，但是将几千行与几千行进行比较，需要几个小时并且还没有完成。

我该怎么做才能加快速度？我想到的最好的方法是使用对象列表，而不是数据表。

还有什么建议吗？

可以使用线程来执行此操作吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T21:02:43.127

我最近遇到了一个我必须解决的类似情况。虽然就我而言，我正在比较一对 excel 文件。对于我的试运行，在它工作后，我在嵌套循环的一侧有 530 行，另一侧有 459000 行。这大约是 2.34 亿次迭代。我的程序能够在大约 30 秒内完成它。我在这种情况下使用了 foreach：

```
foreach (DataRow r1 in DT1.Rows) //Loop the First Source data
{
    foreach (DataRow r2 in DT2.Rows) //Loop the Second Source data
    {
         //Comparison code here...
    }
} 
```

编辑：在您的循环中，作为参考点，您将在循环的每次迭代中跟踪 3 个变量，第一个和第二个是您的计数器。第三个是主要的性能影响，DT1.Rows.Count。通过将直接行计数用作循环的一部分，必须在每次迭代时重新评估它。这给程序增加了不必要的时间。如果您绝对需要有计数器，请先分配 Row 计数：

```
int DT1Count = DT1.Rows.Count;
for (int i = 0; i < DT1Count; i++)
{
    for (int j = 0; j < DT1Count; j++)
    {
        //some code to compare data
    }
} 
```

这样，行数是静态的，并且将消除在每次迭代中评估行数所需的额外处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:44:37.917

虽然您当然可以通过使用哈希表来优化您的搜索，但最好的优化是让数据库引擎为您搜索。RDBMS 引擎针对此类任务进行了优化——没有客户端优化能够击败它。您最大的缺点是必须将数据从数据库中提取到您的程序中。这是非常缓慢的。数据库引擎拥有所有数据——这是一个巨大的优势。

例如，如果您正在寻找代表具有相同名字和姓氏的用户的行，则使用自联接的简单查询将在几秒钟内而不是几分钟内为您提供结果，因为数据永远不会离开引擎。

```
select u1.userId, u2.userId
from User u1
join User u2 on u1.FirstName=u2.FirstName and u1.LastName=u2.LastName 
```

假设`FirstName`和`LastName`列被索引，这个查询会很快发现你重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:41:39.527

如果结果按某种顺序排序，您可以将结果放入数组并使用二分搜索循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:42:43.147

这里要做的最大优化如下：
目前，您将每个值比较两次。例如，在循环的第一次迭代中，您将第一行与自身进行比较，因为两个循环都从索引 0 开始。

最简单的解决方法是将内部循环更改为：

```
for (int j = i + 1; j < DT1.Rows.Count; j++) 
```

这将大大减少比较次数。您的算法当前需要`n^2`比较。建议的修复将这个数字减少到不到一半。通过修复，您只需要`(n^2 - n) / 2`比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:43:47.523

```
 for (int i = 0; i < DT1.Rows.Count; i++)
    {
      for (int j = i+1; j < DT1.Rows.Count; j++) //<-- starts from next row
      {
        //some code to compare data
      }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T10:49:21.103

您还可以指望 .NET 内部结构比手动循环做得更好：

```
DataTable.Select(filterExpression, sortExpression) 
```

# xcode4.5 - 错误; 格式字符串未使用数据参数

> ID：12837673
> 
> 赞同：1
> 
> 时间：2012-10-11T10:37:54.183
> 
> 标签：xcode4.5

我在新的 xcode 升级中从 Apple 开发人员的站点打开了 iphoneMultichannelmixerTest。很多修复，但我坚持一个：

> 格式字符串未使用数据参数

就是这个：

```
printf("BUS %%disON %lu\n", inputNum, isONValue); 
```

我真的没有头绪。有人可以帮我解决这个问题吗？（因为下面出现了一个很小的标记`isONValue`，我认为这可能是问题所在？！？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:54:17.200

您已经使用双字符*转义*了格式选项。这很可能是您想要的：`inputNum``%`

```
printf("BUS %d is ON %lu\n", inputNum, isONValue); 
```

# git - 文件多次重定位后如何避免 Git 合并冲突？

> ID：12837678
> 
> 赞同：0
> 
> 时间：2012-10-11T10:38:03.603
> 
> 标签：git, git-merge, merge-conflict-resolution

当我试图合并 Git 时说：

```
foo.txt deleted in HEAD and modified in release 
```

实际上，我并没有`foo.txt`在我的分支中删除，而是将它移动到一个新的地方，几次。我怀疑 Git 丢失了这个多重移动信息，现在认为我删除了该文件并在其他地方创建了一个新文件。

我可以以某种方式通知 Git 现在文件所在的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:33:12.753

这就是我解决问题的方法：

```
git rebase 
```

我将所有更改一一应用到主分支，逐步解决冲突。

# c# - 如何在 XML 中动态查找子项

> ID：12837679
> 
> 赞同：1
> 
> 时间：2012-10-11T10:38:04.050
> 
> 标签：c#, asp.net, xml

如何检查以下xml中产品节点是否存在子节点：

```
 <product>
        <SysSectionName>Processors</SysSectionName>
        <section>
          <subsection>
            <SysSectionName>CPU#1</SysSectionName>
          </subsection>
       </section>
  </product> 
```

我试过这个：

```
foreach (XmlNode xn1 in sectionNode)
{
  XmlNode node = xn1.FirstChild; 
  if (xn1.HasChildNodes)
  {
     //do something..
  }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:43:37.010

尝试使用这段代码从 XML 中获取产品节点：

```
XDocument doc = XDocument.Parse("Your Xml String");

var products = doc.Descendants("product");

foreach (var product in products)
{
    //... do something ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:04:58.583

```
XmlNodeList snode = xmldoc.SelectNodes("/product/section/subsection");
foreach (XmlNode xn2 in snode)
{
    //it comes inside if there will be a child node.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:43:41.650

您的意思是要查找产品节点是否有任何子节点？如是，

```
XmlNodeList productNodes = xmlDoc.SelectNodes("Product");
foreach(XmlNode pNode in productNodes)
{
  if(pNode.ChildNodes.count >0)
  {
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:44:17.683

我认为 Xlinq（用于 Xml 的 Linq）是您正在寻找的。然后您应该使用 XDocument 加载 Xml，并且对于任何 XElement，您都有“Descendants()”方法，该方法返回子 XElement 的列表。如果没有子元素，则列表也将没有元素。

# java - iText PDF中第一页和最后一页的边距不同

> ID：12837680
> 
> 赞同：0
> 
> 时间：2012-10-11T10:38:06.497
> 
> 标签：java, itext

有没有办法为 iText 中的第一页和最后一页指定不同的边距？我有一个大页眉要放在第一页，一个大页脚要放在最后一页。

问题是当我绝对定位页脚时，页面的内容可能会因为绝对定位而重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:42:45.017

是的。在创建最后一页之前，设置边距，然后调用对象`newpage()`的方法`Document`。

# php - 不间断的 utf-8 0xc2a0 空间和 preg_replace 奇怪的行为

> ID：12837682
> 
> 赞同：34
> 
> 时间：2012-10-11T10:38:07.460
> 
> 标签：php, regex

在我的字符串中，我有 utf-8 不间断空格（0xc2a0），我想用其他东西替换它。

当我使用

```
$str=preg_replace('~\xc2\xa0~', 'X', $str); 
```

它工作正常。

但是当我使用

```
$str=preg_replace('~\x{C2A0}~siu', 'W', $str); 
```

未找到（并替换）不间断空间。

为什么？第二个正则表达式有什么问题？

格式`\x{C2A0}`正确，我也使用了`u`flag。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-11T11:10:45.167

实际上关于 PHP 中转义序列的文档是错误的。当您使用`\xc2\xa0`语法时，它会搜索 UTF-8 字符。但通过`\x{c2a0}`语法，它会尝试将 Unicode 序列转换为 UTF-8 编码字符。

不间断空格是`U+00A0`（Unicode），但编码为`C2A0`UTF-8。因此，如果您尝试使用该模式`~\x{00a0}~siu`，它将按预期工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-07T12:42:46.940

我已经汇总了以前的答案，因此人们只需复制/粘贴以下代码即可选择他们喜欢的方法：

```
$some_text_with_non_breaking_spaces = "some text with 2 non breaking spaces at the beginning";
echo 'Qty non-breaking space : ' . substr_count($some_text_with_non_breaking_spaces, "\xc2\xa0") . '<br>';
echo $some_text_with_non_breaking_spaces . '<br>';

# Method 1 : regular expression
$clean_text = preg_replace('~\x{00a0}~siu', ' ', $some_text_with_non_breaking_spaces);

# Method 2 : convert to bin -> replace -> convert to hex
$clean_text = hex2bin(str_replace('c2a0', '20', bin2hex($some_text_with_non_breaking_spaces)));

# Method 3 : my favorite
$clean_text = str_replace("\xc2\xa0", " ", $some_text_with_non_breaking_spaces);

echo 'Qty non-breaking space : ' . substr_count($clean_text, "\xc2\xa0"). '<br>';
echo $clean_text . '<br>'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T11:12:00.970

在我看来，这两个代码做了不同的事情：第一个`\xc2\xa0`将替换两个字符，`\xc2`并且`\xa0`什么都没有。

在 UTF-8 编码中，这恰好是`U+00A0`.

`\x{00A0}`行得通吗？这应该是 的表示`\xc2\xa0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-24T08:56:19.090

我没有使用这个变体`~\x{c2a0}~siu`。

瓦里安`\x{00A0}`工作。我没有尝试过第二个选项，结果如下：

我试图将其转换为十六进制并将不间断空格替换`0xC2 0xA0 (c2a0)`为空格`0x20 (20)`。

代码：

```
$hex = bin2hex($item);
$_item = str_replace('c2a0', '20', $hex);
$item = hex2bin($_item); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-02T02:28:39.047

/\x{00A0}/、/\xC2\xA0/ 和 $clean_hex2bin-str_replace-bin2hex 工作和没有工作。如果我把它打印到屏幕上，一切都很好，但如果我试图将它保存到一个文件中，这个文件就会是空白的！

我最终使用了 iconv('UTF-8', 'ISO-8859-1//IGNORE', $str);

# forms - 通过 drupal UI 创建表单

> ID：12837690
> 
> 赞同：0
> 
> 时间：2012-10-11T10:38:31.267
> 
> 标签：forms, drupal-7

是否可以使用 drupal 的 UI（无需编码）创建表单，或者我们必须使用 Form API 进行编码才能创建表单？？？我设法添加了一些文本字段和复选框，但它不是一个完整的表单，我无论如何都找不到添加按钮？我是drupal的新手，所以不太了解。任何指导将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:02:25.073

查看[网络表单模块](http://drupal.org/project/webform)

> Webform 是在 Drupal 中进行调查的模块。提交后，用户可能会收到一封电子邮件“回执”以及向管理员发送通知。结果可以导出到 Excel 或其他电子表格应用程序中。Webform 还提供了一些基本的统计审查，并具有扩展其功能的广泛 API。
> 
> 一些很好的例子可能是竞赛、个性化的联系表格或请愿书。其中每一个都可以有一个定制的表格供最终用户填写。如果您需要构建大量定制的一次性表单，Webform 是一种比创建内容类型和使用 CCK 或 Field 模块更合适的解决方案。

# c# - 使用命令行从 ProblemSteps Recorder 获取 stopevent

> ID：12837691
> 
> 赞同：1
> 
> 时间：2012-10-11T10:38:32.153
> 
> 标签：c#, command-line, command-line-arguments

我希望将 Windows 7+ 中可用的[问题步骤记录器](http://windows.microsoft.com/en-US/windows7/How-do-I-use-Problem-Steps-Recorder)集成到我的 c# 应用程序中，以允许用户在我的软件中记录错误。[命令行](http://ctrlf5.net/?p=176)参数允许`/stopevent`指定 a。这是如何运作的？如何将它连接到我的 .NET 应用程序中？

# php - Oauth::timestamp 在linkedin api中被拒绝错误

> ID：12837692
> 
> 赞同：3
> 
> 时间：2012-10-11T10:38:37.100
> 
> 标签：php, api, oauth, linkedin, kohana-3.2

我在本地完成了linkedin oauth api。来自linkedin 的API 响应在本地主机中运行良好。当我移动到服务器时，服务器上的linkedin api 出现错误，如下所示。

```
oauth_problem=timestamp_refused&oauth_acceptable_timestamps=1349951029%2B-300 
```

谁能帮我？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-27T12:52:09.217

先看看WEB服务器和Linkedin服务器的时差是多少

在linkedin.php中有一个函数[fetch]并在函数末尾执行

```
echo '<pre>';
print_r($return_data);
exit; 
```

您将看到您的服务器正在发送的 [oauth_timestamp]，并且在 $return_data 打印数据处有一个链接服务器正在发送的时间戳。

转换它们，看看你可以在这个网站上做些什么。[http://www.epochconverter.com/](http://www.epochconverter.com/)

终于

在 OAuth.php 文件中有一个函数 [generate_timestamp] 返回一个 time()。通过将其更改为

```
#to avoid the error of 
#oauth_problem=timestamp_refused&oauth_acceptable_timestamps=
#return time()+(difference of mints*sec);
return time()+(40*60); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:21:33.103

这在过去发生在我身上。大多数人认为您系统上的时钟是错误的。尝试检查一下，如果它不起作用，请尝试在脚本在您的服务器上运行时重新进行身份验证以获取新的访问令牌（如果您还没有这样做的话）。

您的最后一个选择是使用不同的库。我发现有些库有点不稳定。如果您使用的是 PHP，我建议您使用[simple-linkedinphp](http://code.google.com/p/simple-linkedinphp/)。迄今为止我用过的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T12:59:53.533

检查您的服务器时间。因为我遇到了同样的问题。在我设置正确的时间和日期后，它工作正常。

# ruby-on-rails - Rails Twitter bootstrap SASS - 在 $baseFontFamily 之前添加我自己的自定义字体

> ID：12837699
> 
> 赞同：0
> 
> 时间：2012-10-11T10:39:13.650
> 
> 标签：ruby-on-rails, twitter-bootstrap

我有自己用于网站的自定义字体，我希望它被声明为 $baseFontFamily 唯一的问题是，由于它是自定义字体，我希望旧版浏览器回退到默认的 twitter bootstrap 字体系列. 有什么办法可以做到吗？

我的主要 .scss 文件如下所示：

```
@font-face
{
  font-family: Bartley;
  src: url('/Bartley.ttf');
}

$baseFontFamily: Bartley, $sansFontFamily;

@import "bootstrap";

body { 
  padding-top: 60px;
}

@import "bootstrap-responsive"; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:34:12.143

没有“默认引导字体”，但它应该像这样工作：

```
$baseFontFamily: 'Bartley', Helvetica, Arial, sans-serif !default; 
```

然后你可以做...

```
$sansFontFamily: $baseFontFamily; // Set "SansFontFamily" with value from "baseFontFamily" 
```

# python - PyQt：如何使用 QComboBox::findData() 查找元组？

> ID：12837701
> 
> 赞同：2
> 
> 时间：2012-10-11T10:39:42.063
> 
> 标签：python, qt, pyqt, qvariant

我无法[`QComboBox::findData`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qcombobox.html#findData)在我的 PyQt 应用程序中正常工作。

似乎 PyQt 没有正确比较 QVariant 和 Python 元组，导致 Qt 找不到我的元组。示例如下：

```
import sip
sip.setapi('QVariant', 2)
from PyQt4 import Qt

a = Qt.QApplication([])

cb = Qt.QComboBox()
cb.addItem("Bah", (1,2))
cb.addItem("Foo", (3,4))

print cb.findData((1,2))
print cb.findData((3,4))

print cb.itemData(0)
print cb.itemData(1)

print cb.findData(cb.itemData(0))
print cb.findData(cb.itemData(1)) 
```

使用 api=2 (auto-convert QVariant<->python) 它找不到任何东西，我得到以下输出：

```
-1
-1
(1, 2)
(3, 4)
-1
-1 
```

使用 api=1 （没有自动转换），它只会在后一种（无用）情况下找到它：

```
-1
-1
<PyQt4.QtCore.QVariant object at 0x02FBF148>
<PyQt4.QtCore.QVariant object at 0x02FBF148>
0
1 
```

知道如何让第一个案例工作（使用新元组查找数据，并自动转换 QVariant）吗？

*（使用 PyQt 4.8.3、SIP 4.12.1 和 Qt 4.6.1）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:36:04.847

从上面@ekhumoru 的评论中，用列表替换元组是一个合适的解决方法：（我的epmhasis）

> 这可能更多的是限制而不是错误。在幕后，PyQt 必须尝试为某些操作转换 Python 类型。显然，并非所有类型/操作的组合都受支持。可变性似乎是一个限制因素。**如果将元组交换为列表，则上面的示例代码将起作用。**

# java - 我可以使用多个线程（MySQL 和 Java）访问内存中的表吗？

> ID：12837706
> 
> 赞同：0
> 
> 时间：2012-10-11T10:40:01.543
> 
> 标签：java, mysql, database, multithreading, in-memory

我有一个时间关键的 JAVA 应用程序，它使用内存数据库（在我的例子中是 MySQL）来回答查询。

为了加快进程，我考虑过使用多个线程（以便多个处理器可以同时工作）。所以我的第一个问题是内存表是否可以在多线程环境中运行得更快。

如果第一个问题的答案是肯定的，那么我需要一些建议如何做到这一点。我尝试了两种方法：

1.  我给了所有线程相同的 jdbc 实例。这种策略没有提高性能。

2.  我尝试为每个线程创建新实例，并尝试将其连接到我之前创建的数据库：

    `Class.forName("com.mysql.jdbc.Driver").newInstance(); conn = DriverManager.getConnection(url, username, password); this.executeQuery("USE myDatabase");`

在第二个版本中，我收到一条错误消息：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：未知数据库“rockit”

在单线程环境中，此时没有错误。

# mysql - 数据库同行并发读取和更新

> ID：12837707
> 
> 赞同：0
> 
> 时间：2012-10-11T10:40:08.800
> 
> 标签：mysql, database, django

我有一个应用程序，每个用户都在不断地读取和更新（几乎每个请求）这会导致数据库锁定和数据丢失。

问题是它是关键信息，每个人都必须同步和更新它。

我可以在更新信息中引入一点延迟，但必须为所有用户同步。

我正在使用 Django 和 MySql。

**注意**：为了保持应用程序正常工作，我将在单独的线程中发布更新。因此，即使更新失败，它也不会等待锁定结束继续。

# postgresql - PostgreSQL 9.2.1 中具有可序列化隔离的谓词锁定

> ID：12837708
> 
> 赞同：17
> 
> 时间：2012-10-11T10:40:20.027
> 
> 标签：postgresql, transactions, locking

我一直在彻底阅读我的[其他问题](https://stackoverflow.com/questions/12824217/isolation-level-serializable-in-spring-jdbc)中建议的[关于事务隔离的 postgres 文档，](http://www.postgresql.org/docs/current/static/transaction-iso.html)但我仍然没有设法理解“谓词锁定”的东西。

我希望有人能启发我:-)

根据文档：*PostgreSQL 中的谓词锁与大多数其他数据库系统一样，基于事务实际访问的数据*

听起来不错，那么为什么会发生以下情况？

```
CREATE TABLE mycustomer(cid integer PRIMARY KEY, licenses integer);
CREATE TABLE mydevice(id integer PRIMARY KEY, cid integer REFERENCES 
mycustomer (cid), status varchar(10));

INSERT INTO mycustomer(cid, licenses) VALUES (1, 5);
INSERT INTO mycustomer(cid, licenses) VALUES (2, 5);

    Request 1                            Request2
BEGIN TRANSACTION ISOLATION 
LEVEL SERIALIZABLE;
                                         BEGIN TRANSACTION ISOLATION 
                                         LEVEL SERIALIZABLE;
SELECT * from mydevice where cid = 1;

                                         SELECT * from mydevice where cid = 2;
INSERT INTO mydevice(id, cid, status) 
VALUES (1, 1, 'ok');

                                         INSERT INTO mydevice(id, cid, status)         
                                         VALUES (2, 2, 'ok');
commit;
(=ok)                                 
                                         commit;
                                         (=rollback) 
```

我了解请求 1 和请求 2 中的插入与之前的读取不冲突，因此不应启动任何错误。为什么我收到“错误：由于事务之间的读/写依赖关系而无法序列化访问”。

正如您可以想象的那样，我不能发生上述行为，因为每个并发请求都会被回滚，而不管其细节如何。在我的业务场景中，我希望并发请求仅在他们为同一个客户插入数据（根据示例设备）时回滚。

这些操作是从 Java 应用程序执行的，原则上我正在考虑创建一个锁定表来满足我的需要。有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-11T14:41:31.443

从[事务隔离](http://www.postgresql.org/docs/current/static/transaction-iso.html)页面：

> 在查询执行期间获取的特定锁将取决于查询使用的计划，并且多个细粒度锁（例如，元组锁）可以在执行过程中组合成更少的粗粒度锁（例如，页锁）。防止用于跟踪锁的内存耗尽的事务。
> 
> ...
> 
> *   顺序扫描总是需要关系级别的谓词锁。这可能导致序列化失败率增加。

`EXPLAIN`它可以`SELECT`告诉你正在执行什么查询计划，但如果表很小（或为空！），PostgreSQL 几乎肯定会选择顺序扫描而不是引用索引。这将导致整个表上的谓词锁定，每当另一个事务对表执行任何操作时都会导致序列化失败。

在我的系统上：

```
isolation=# EXPLAIN SELECT * from mydevice where cid = 1;
                        QUERY PLAN                        
----------------------------------------------------------
 Seq Scan on mydevice  (cost=0.00..23.38 rows=5 width=46)
   Filter: (cid = 1)
(2 rows) 
```

您可以尝试添加一个索引并强制它使用它：

```
isolation=# CREATE INDEX mydevice_cid_key ON mydevice (cid);
CREATE INDEX
isolation=# SET enable_seqscan = off;
SET
isolation=# EXPLAIN SELECT * from mydevice where cid = 1;
                                    QUERY PLAN                                    
----------------------------------------------------------------------------------
 Index Scan using mydevice_cid_key on mydevice  (cost=0.00..8.27 rows=1 width=46)
   Index Cond: (cid = 1)
(2 rows) 
```

但是，这不是正确的解决方案。让我们稍微备份一下。

可序列化旨在保证事务将具有与一个接一个运行完全相同的效果，尽管事实上您实际上是同时运行这些事务。PostgreSQL 没有无限资源，所以虽然它确实对查询实际访问的数据设置了谓词锁，但“数据”的含义可能不仅仅是“返回的行数”。

当 PostgreSQL 认为可能存在问题时，而不是确定时，它会选择标记序列化失败。（因此它如何将行锁概括为页锁。）这种设计选择会导致误报，例如您的示例中的那个。误报不太理想，但是，它不会影响隔离语义的正确性。

错误信息是：

```
ERROR:  could not serialize access due to read/write dependencies among transactions
DETAIL:  Reason code: Canceled on identification as a pivot, during commit attempt.
HINT:  The transaction might succeed if retried. 
```

这个提示是关键。您的应用程序需要捕获序列化失败**并重试整个操作**。这在任何时候`SERIALIZABLE`都是正确的——尽管并发，它保证了串行的正确性，但如果没有应用程序的帮助，它就无法做到这一点。换句话说，如果您实际上是在进行并发修改，那么 PostgreSQL 满足隔离要求的唯一方法就是要求您的应用程序自行序列化。因此：

> 重要的是，使用这种技术的环境具有处理序列化失败的通用方法（总是返回 SQLSTATE 值“40001”），因为很难准确预测哪些事务可能有助于读/写依赖项，需要回滚以防止序列化异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T08:24:03.507

对于那些更好奇的人，在 Postgres 9.1 源代码中，如果你看的话 `src/backend/storage/lmgr/README-SSI`，有很多关于谓词锁定和可序列化事务的详细描述

这是相同的片段：

> 可序列化快照隔离（SSI）和谓词锁定 ========================================= ===================
> 
> 此代码位于 lmgr 目录中，因为其中大约 90% 是 SSI 所需的谓词锁定的实现，而不是与 SSI 本身直接相关。当谓词锁定的另一种用途证明将这两件事分开的努力是合理的时，这个 README 文件可能应该被拆分。
> 
> 学分：
> 
> 此功能由 Kevin Grittner 和 Dan RK Ports 开发，并得到了 Joe Conway、Heikki Linnakangas 和 Jeff Davis 的评论和建议。它基于这些论文中发表的工作：
> 
> ```
>  Michael J. Cahill, Uwe Röhm, and Alan D. Fekete. 2008.
>  Serializable isolation for snapshot databases.
>  In SIGMOD '08: Proceedings of the 2008 ACM SIGMOD
>  international conference on Management of data,
>  pages 729-738, New York, NY, USA. ACM.
>  http://doi.acm.org/10.1145/1376616.1376690
> 
>  Michael James Cahill. 2009.
>  Serializable Isolation for Snapshot Databases.
>  Sydney Digital Theses.
>  University of Sydney, School of Information Technologies.
>  http://hdl.handle.net/2123/5353 
> ```

# php - 如何在 Wordpress 的特定页面中隐藏我的菜单中的主页？

> ID：12837709
> 
> 赞同：2
> 
> 时间：2012-10-11T10:40:19.663
> 
> 标签：php, wordpress

我想知道如何在不将functions.php中的show_home设置为false的情况下隐藏菜单中的主页，我只想将其隐藏在特定页面中。我怎样才能做到这一点？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:59:14.930

我建议用 CSS 隐藏它：

```
.page-item-X.menu-item-Y { display: none; } 
```

X = 页面 ID
Y = 菜单项 ID

这将是最简单和最简单的做事方式。

# ios - 在不同类中访问核心数据数据库的最佳实践

> ID：12837710
> 
> 赞同：0
> 
> 时间：2012-10-11T10:40:21.643
> 
> 标签：ios, core-data

截至目前，我有三个类，每个类都有`UIManagedDocument`. 我不知道这是否是一个好方法。但是我很好奇访问 UIManagedDocument 的最佳实践是什么。或者也许有什么方法可以在不同的类之间“共享”它，这样我就不需要为`UIManagedDocument`我现在拥有的每个类都有实例。

我已经在 Mastering Core Data 下完成了这个[WWDC 2010 Session](https://developer.apple.com/videos/wwdc/2010/)并浏览了它的 PDF 幻灯片，但我似乎没有找到任何相关的东西，或者我只是遗漏了一些东西。

请赐教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:20:34.070

从 Justin Driscoll 的博客中找到答案。所以基本上，这里正在创建一个新类，它处理并为托管文档提供一个方便的接口。

您可以[在此处](http://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)访问它。

# javascript - 用ajax，jquery获取数据

> ID：12837712
> 
> 赞同：-3
> 
> 时间：2012-10-11T10:40:42.393
> 
> 标签：javascript, jquery, html, ajax, jsp

我有这个代码可以使用：

```
<div data-role="content">
            <div data-role="content">
                <form id="registerForm" action="/register" method="post" data-ajax="false" class="ui-body ui-body-a ui-corner-all">
                    <fieldset>
                        <div data-role="fieldcontain">
                            <label for="rUIdInput">Email:</label>
                            <input name="<%=User.USER_ID%>" id="rUIdInput" value="" type="email" placeholder="your.mail@abc.com" /> 
                            <label for="rUPwInput">Password:</label>
                            <input name="<%=BasicAuthRedirectServlet.PASSWORD%>" id="rUpwInput" value="" type="password" placeholder="Your password" />
                        </div>
                        <button type="submit" data-theme="b">Register</button>
                    </fieldset>
                </form>
            </div>
        </div> 
```

当我单击注册按钮并输入一些值并点击注册时，我会返回一个 JSON 对象。我不确定如何处理这个 JSON 对象

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:47:11.820

我希望假设您需要`POST`将表单的数据转换为`/register`. 如果是这种情况，那么这就是您需要遵循的。您已经说过按钮是：

```
<button type="submit" data-theme="b">Register</button> 
```

使用 jQuery（或 jQM），您可以这样做：

1.  给`ID`按钮和表单一个。

    ```
    <form id="registerFrm" action="/register" method="post" data-ajax="false" class="ui-body ui-body-a ui-corner-all">

    <button type="submit" data-theme="b" id="registerBtn">Register</button> 
    ```

2.  接下来是设置按钮操作的**处理程序。**

    ```
    $(document).ready(function(){
        $("#registerBtn").click(function () {
            $.ajax({
                url: $("#registerFrm").attr("action"),
                data: $("#registerFrm").serialize(),
                type: "POST",
                success: function (data) {
                    alert(data);
                }
            })
        });
    }); 
    ```

说如果这对你有用。

# opengl - Windows 7 服务中的 OpenGL

> ID：12837713
> 
> 赞同：0
> 
> 时间：2012-10-11T10:40:44.527
> 
> 标签：opengl, windows-7, windows-services, ipc, session-0-isolation

有没有办法从 Windows 7 服务使用硬件加速的 OpenGL？正常的 Session 0 无法访问显卡驱动程序。

有没有办法配置这可能的服务（例如指定用户）？

我知道有可能启动一个新进程，但使用 IPC 会使使用硬件加速的整个目的变得毫无用处。

我还检查了[这个 SO questions](https://stackoverflow.com/questions/2464182/windows-2008-renderfarm-service-createprocessasuser-session-0-isolation-and-o)，但它也创建了一个新流程。

# jsp - JSP 包含页面不起作用

> ID：12837714
> 
> 赞同：1
> 
> 时间：2012-10-11T10:40:46.957
> 
> 标签：jsp, jakarta-ee, scriptlet

我有一个 JSP 文件 member.jsp，如下所示：

```
<%@ page import="java.util.*" %>
<jsp:include page="/html_functions.jsp" />

<% String heading = "Header" %>
<%= formStart("a_form") %>
<%= printPageHeader(heading) %>
<%= startMyLi() %>
<%= endLi() %>
<%= formEnd() %> 
```

我的 html_functions.jsp 如下：

```
<%!

public String formStart(String name) {
    String structure = "<div id=\"content\"><form name=\"" + name + "\" method=\"post\"><ul>";
    return structure;
}//formStart

public String printPageHeader(String name) {
    String structure = "<li class=\"listLi\">\n<h3 class=\"formHeader\">" + name + ".</h3></li>";
    return structure;
}//printPageHeader

public String startMyLi() {
    String structure = "<li class=\"listLi\">";
    return structure;
}//startMyLi

public String endLi() {
    return ("</li>");
}//endMyLi

public String displayWithSpan(String str) {
    String structure = "<span class=\"labelSpan\">" + str + "</span>";
    return structure;
}//displayWithSpan

public String displayInputElement(String name) {
    return("Hiiiii");
}//displayInputElement

%> 
```

但是，调用 member.jsp 文件时出现异常。这是我得到的例外：

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: xx in the jsp file: /member.jsp
The method formStart(String) is undefined for the type add_005fmember_jsp 
```

所有其他方法也是如此。我在哪里犯错？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:51:52.587

使用

```
<%@ include file="/html_functions.jsp" %> 
```

工作正常，而不是`<jsp:include page="html_functions.jsp" />`

有两种方法可以将文件包含到应用程序的 JSP 页面中。这些如下：

1.  `<%@include file="relativeURL" %>`
2.  `<jsp:include page="relativeURL" />`

**第一种情况在编译时包括调用 JSP 文件中的文件或文件的文本或代码，并在稍后执行。**

[看](http://www.roseindia.net/jsp/IncludeDir_Example.shtml)

并检查 html_functions.jsp 是否放置在正确的路径中。

# android - 配置：错误：C 编译器在为 Android 配置时无法创建可执行文件

> ID：12837716
> 
> 赞同：4
> 
> 时间：2012-10-11T10:40:54.037
> 
> 标签：android, configuration, compilation, android-ndk

我已经下载了 CPP 单元测试框架并尝试为 Android 编译。但是，面对配置问题。我尝试制作[独立工具链](https://stackoverflow.com/questions/11747734/why-does-arm-linux-androideabi-gcc-give-iostream-error)并尝试配置但它总是失败

```
sh-4.1$ ./configure CXX=arm-linux-androideabi-g++ CC=arm-linux-androideabi-gcc CPP=arm-linux-androideabi-g++ CXXCPP=arm-linux-androideabi-g++
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make sets $(MAKE)... (cached) yes
checking for a BSD-compatible install... /usr/bin/install -c
checking for gcc... arm-linux-androideabi-gcc
checking for C compiler default output file name...
configure: error: C compiler cannot create executables
See `config.log' for more details.
sh-4.1$ arm-linux-androideabi-g++
arm-linux-androideabi-g++.exe: fatal error: no input files
compilation terminated.
sh-4.1$ 
```

我的构建环境是 NDKr8、Cygwin、Windows7-x64。

我尝试通过 config.log 发现错误是

```
arm-linux-androideabi-gcc.exe: error: CreateProcess: No such file or directory 
```

我尝试通过减少路径长度等来修复上述错误。但仍然无法解决。请让我知道是否有人解决了类似的问题。

只需从链接[http://curl.haxx.se/mail/lib-2012-08/0184.html](http://curl.haxx.se/mail/lib-2012-08/0184.html)添加信息， 但在没有 Cygwin 的情况下也面临同样的问题。

```
D:\Test>arm-linux-androideabi-gcc Main.c
arm-linux-androideabi-gcc: error: CreateProcess: No such file or directory

D:\Test> 
```

正如您在 Windows 提示符下观察的那样，这也是同样的问题。

----- 编辑 1 ----- 我尝试在 Ubuntu 12.04 操作系统上使用以下行进行配置

```
./configure --host=arm CXX=arm-linux-androideabi-g++ CC=arm-linux-androideabi-gcc CPP=arm-linux-androideabi-g++ CXXCPP=arm-linux-androideabi-g++ 
```

但是得到这些错误

```
checking how to run the C preprocessor... arm-linux-androideabi-g++
configure: error: in `/mnt/hgfs/VMShare/gperftools-2.0_Android/gperftools-2.0':
configure: error: C preprocessor "arm-linux-androideabi-g++" fails sanity check
See `config.log' for more details. 
```

但大多数时候 ARM android Gcc 编译器都失败了。

```
configure:4216: arm-linux-androideabi-gcc -qversion >&5
arm-linux-androideabi-gcc: error: unrecognized option '-qversion'
arm-linux-androideabi-gcc: fatal error: no input files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T03:34:55.693

给出正确的路径和环境。

示例设置：

```
export NDK=/develop/android/android-ndk-r9b
export SYSROOT=$NDK/platforms/android-18/arch-x86
export CC="$NDK/toolchains/x86-4.7/prebuilt/linux-x86/bin/i686-linux-android-gcc  --sysroot=$SYSROOT"

export CFLAGS="--sysroot=$SYSROOT  "
export LDFLAGS="--sysroot=$SYSROOT  " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T09:51:59.243

我对您的特定设置没有经验，但是当我收到此错误时，我通过将 gcc 的 bin 文件夹添加到系统路径来修复它，此外，每个可执行文件必须有一个不带前缀的版本（例如 g++ .exe, ld.exe...) 在 gcc 的 bin 目录中。这为我解决了这个问题。更改路径后我也注销/登录，但不知道是否有必要。

我在这里得到了这个想法：http: [//forums.codeblocks.org/index.php?topic=18100.0](http://forums.codeblocks.org/index.php?topic=18100.0)

# windows-phone - Windows Phone 8 Startscreen Tile 大小和边距

> ID：12837720
> 
> 赞同：26
> 
> 时间：2012-10-11T10:41:15.153
> 
> 标签：windows-phone, windows-phone-8

我想知道是否有人知道新的 Windows Phone 8 开始屏幕（适用于 480x800）的精确测量值，即边距（顶部、左侧和右侧，在瓷砖之间）和所有三种不同瓷砖尺寸的边缘长度。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-18T15:43:27.707

对于**720p (1280×720)**和**WXGA (1280×768)**：

*   大瓷砖：691 x 336 *（是的，你没有看错，宽度上有一个额外的像素）*
*   中等瓷砖：336 x 336
*   小瓷砖：159 x 159

对于**WVGA (480x800)**：

*   大瓷砖：430 x 210
*   中等瓷砖：210 x 210
*   小瓷砖：100 x 100

对于**IconicTemplate（所有分辨率）**：

*透明图标！*

*   大图块：132 x 202 *(IconImageURI)*
*   中平铺：72 x 110 *(SmallImageURI)*
*   图标：38 x 38 *(DeviceLockImageURI)*

对于**应用程序图标**

*   应用程序图标.png：159 x 159
*   背景.png：173 x 173

所有数字都以像素为单位。瓷砖之间的水平边距为 10 像素。

作为一般建议，以高分辨率提供您的图块，它们将缩小大约**1.6 倍**。否则你会发现你的低分辨率图块被放大了，文本看起来很模糊。

请记住，SDK 中提供的一些新的特殊磁贴模板将需要不同分辨率的图像。如果您使用常规的 FlipTemplate，以上是完整的图块大小。

**奖励更新：**对于**应用栏图标**（不要与上述混淆）

*   带有 42x42 图标的 76x76 圆圈。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T07:59:50.013

**更新：**

[这是](http://mikaelkoskinen.net/post/windows-phone-8-iconictiletemplate-image-sizes.aspx)与标志性瓷砖一起使用的不同图像尺寸的测试。

阅读**克劳斯的答案**以了解正确的尺寸。

老答案：

对于 Iconic Tile 模板，720p 和 WXGA 尺寸为：

*   小瓷砖：110 x 110
*   中等瓷砖：202 x 202
*   宽瓷砖：不适用

应用程序的图标大小现在为 100x100，高于之前的 62x62。

对于 Marketplace，您必须提供 300x300 的徽标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:17:46.787

Microsoft 现已发布 Iconic 模板的正确尺寸：http: [//msdn.microsoft.com/en-us/library/windowsphone/design/jj662924 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/design/jj662924(v=vs.105).aspx)

小图标图像：

*   推荐的“最合适”：70x110px
*   最大图像尺寸：110x110px

图标图像：

*   推荐的“最合适”：130x202px
*   最大图像尺寸：202x202px

发布所需的所有其他图像及其大小可在以下位置找到：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844(v=vs.105).aspx)

和锁屏图片：http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207048(v=vs.105).aspx

# android - Android中具有自定义背景的灰色禁用按钮

> ID：12837725
> 
> 赞同：0
> 
> 时间：2012-10-11T10:41:36.033
> 
> 标签：android

处于禁用状态时如何使具有自定义背景的按钮变灰？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:41:36.033

我花了一点时间，所以这是我想出的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_enabled="false”&gt;
    <layer-list>
        <item android:drawable="@drawable/button"/>
        <item>
            <color android:color="#88FFFFFF" />
        </item>
    </layer-list>
</item>
<item android:drawable="@drawable/button_pressed" android:state_pressed="true"/>
<item android:drawable="@drawable/button" android:state_pressed="false"/>

</selector> 
```

基本上，您必须在按钮状态之一中使用图层列表，并在背景上使用透明色图层...

# php - 如何在 Magento 中为新网站创建管理员用户？

> ID：12837728
> 
> 赞同：0
> 
> 时间：2012-10-11T10:41:40.877
> 
> 标签：php, magento

您好我已经通过系统->管理商店创建了一个新网站、商店和商店视图。我只想知道如何为这个新网站/商店创建一个管理员用户，该用户将无法管理超级管理员创建的任何其他商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:44:45.527

请检查以下链接： http: [//www.magentocommerce.com/knowledge-base/entry/configuring-admin-users](http://www.magentocommerce.com/knowledge-base/entry/configuring-admin-users)

*   您将需要创建一个单独的角色，您可以在其中指定角色可以访问哪些部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:43:45.830

该选项仅适用于 Magento Enterprise

# asp.net-mvc - 如果未绑定，MVC4 Razor 会丢失用户 ID

> ID：12837733
> 
> 赞同：2
> 
> 时间：2012-10-11T10:41:53.053
> 
> 标签：asp.net-mvc, data-binding, razor, model

我目前正在 MVC4 中创建一些用户配置文件编辑表单，并且为了测试，我将 UserId 属性呈现为表单上的只读文本框，如下所示：

```
<li>
    @Html.LabelFor(model => model.UserId)
    @Html.TextBoxFor(model => model.UserId, new { @readonly="readonly"})
</li> 
```

当我接近完成编辑表单时，我删除了这个文本框，因为它只是用完房地产。完成此操作后，保存时发送回控制器的模型具有整数默认值 0，然后实体框架因无法更新任何行而崩溃。所以我在表格中添加了这个：

```
<li>
    @Html.HiddenFor(model => model.UserId, new { @readonly="readonly"})
</li> 
```

这是一个安全的举动吗？我应该将 ViewBag 用于这样的事情吗？在个人资料详细信息页面上，我呈现了一个编辑按钮，如下所示：

```
@Html.ActionLink("Edit", "Edit", new { id=Model.UserId }) 
```

这意味着 UserId 在链接中呈现。这是安全可靠的还是我需要重新考虑如何在 UI 中移动模型和 ID？

TIA,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:53:06.867

> 这是一个安全的举动吗？

这将完成将 id 发送到服务器的工作。只需摆脱对`readonly="readonly"`隐藏输入几乎没有意义的属性。

> 我应该将 ViewBag 用于这样的事情吗？

这在安全性方面没有任何改变。任何用户仍然可以输入他想要的任何 id。无论您使用隐藏字段还是 ActionLink，您仍然将 id 作为纯文本发送到服务器，任何人都可以伪造请求并输入他想要的任何 id。因此，如果您的站点使用某种形式的身份验证，则在尝试对其执行任何操作之前，您必须在服务器端绝对检查您实际收到的 id 是属于当前经过身份验证的用户的资源。否则，一些经过身份验证的用户可以提供属于另一个用户的资源的 id 并能够更新它。当然，这只是一个假设的场景，完全不清楚这是否是您的情况以及是否`id`需要保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:57:34.310

如果 UserId 是敏感的，那么还有其他选项

*   仅使用 Session 状态保持`UserId`服务器端（如果您的架构允许[Session](https://stackoverflow.com/questions/560084/session-variables-in-asp-net-mvc)）
*   把它放在一个[加密的 cookie](https://stackoverflow.com/questions/1093181/how-can-i-encrypt-a-cookie-content-in-a-simple-way-in-c-sharp-3-0)中。请注意，根据 Darin，这些可能会[受到损害](https://stackoverflow.com/questions/3720720/how-serious-is-this-new-asp-net-security-vulnerability-and-how-can-i-workaround)。

如果它不敏感，那么您`HiddenFor`就可以了 - 将其与表格的其余部分一起寄回。不要把它放在你的 ActionLink 查询字符串中，除非这是你的路线的一部分（即 /Controller/Action/id）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:13:43.183

我强烈建议使用 ValueInjecter。这是一个做同样事情的代码片段

```
[HttpGet]
    public new ActionResult Profile()
    {
        var model = new ProfileModel();

        model.InjectFrom<UnflatLoopValueInjection>(this.GetCurrentUser());

        return View(model);
    }

    [HttpPost]
    public new ActionResult Profile(ProfileModel model)
    {
        if (ModelState.IsValid)
        {
            this.GetCurrentUser().InjectFrom<UnflatLoopValueInjection>(model);

            try
            {
                _userService.SaveOrUpdate(this.GetCurrentUser());
                TempData["Success"] = "User was successfully updated.";
                return RedirectToAction("Profile");
            }
            catch (Exception)
            {
                ModelState.AddModelError("Exception", "Unexpected error");
            }
        }

        return View(model);
    } 
```

这是视图...

```
 @using (Html.BeginForm("Profile", "Account", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.ValidationSummary(true, "Unable to update profile. Please correct the errors and try again.", new { @class = "alert alert-block alert-error" })

    @Html.EditorForModel()

    <div class="form-actions">
        <input type="submit" value="Update" class="btn btn-primary" />
    </div>        
} 
```

# android - 如何从对话框中通知DataSetChanged ArrayAdapter？

> ID：12837735
> 
> 赞同：1
> 
> 时间：2012-10-11T10:41:54.817
> 
> 标签：android

我在 onCreate 中为 listview 设置了一个 mydapter 为：

```
 ArrayAdapter mydapter;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   mydapter = new MyAdapter(this, R.layout.grid002);
            list = (ListView) findViewById(R.id.list002);
            list.setAdapter(mydapter);

} 
```

我创建了一个对话框： private void showDiaglogE003() {

```
 try {
            final Dialog dialoge3;
            dialoge3 = new Dialog(this);            
            dialoge3.setContentView(R.layout.layoutdialoge003);         
            Button btnCacnel = (Button) dialoge3.findViewById(R.id.btnE3Cancel);
            btnCacnel.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                     dialoge3.cancel();
                    mydapter.notifyDataSetChanged();
                }
            });
    dialoge3.show();
} 
```

但是当我调用`notifyDataSetChanged`mydapter 时，listview 不会改变。你能帮助我吗？

# c# - 在 signalR 中记录服务器事件

> ID：12837736
> 
> 赞同：1
> 
> 时间：2012-10-11T10:41:59.823
> 
> 标签：c#, signalr

我正在使用[SignalR](http://signalr.net/)编写基于 C# 的 Web 应用程序。到目前为止，我有一个“大厅”区域（允许公开交流）和一个“会话”区域（5 人一组可以进行私人对话，并且任何服务器交互只显示给该组）。

我想做的是在内存中创建一个“日志记录”对象——每个会话一个（所以如果有三组，每组五个人，我会有三个日志记录对象）。

“会话”区域继承自`Hubs`(and `IDisconnect`)，并具有多种方法（Join、Send、Disconnect 等）。这些方法将数据传回给调用客户端 JS 函数的 JavaScript 客户端。我试过使用构造方法：

```
public class Session : Hub, IDisconnect
{
    public class Logger
    {
        public List<Tuple<string, string, DateTime>> Log;

        public List<Tuple<string, string, DateTime>> AddEvent(string evt, string msg, DateTime time)
        {
            if (Log == null)
            {
                Log = new List<Tuple<string, string, DateTime>>();
            }
            Log.Add(new Tuple<string, string, DateTime>(evt, msg, time));

            return Log;
        }

    }

    public Logger eventLog = new Logger();

    public Session()
    {
        eventLog = new Logger();
        eventLog.AddEvent("LOGGER INITIALIZED", "Logging started", DateTime.Now);
    }

    public Task Join(string group)
    {
        eventLog.AddEvent("CONNECT", "User connect", DateTime.Now);
        return Groups.Add(Context.ConnectionId, group);
    }

    public Task Send(string group, string message)
    {
        eventLog.AddEvent("CHAT", "Message Sent", DateTime.Now);
        return Clients[group].addMessage(message);
    }

    public Task Interact(string group, string payload)
    {
        // deserialise the data
        // pass the data to the worker
        // broadcast the interaction to everyone in the group

        eventLog.AddEvent("INTERACTION", "User interacted", DateTime.Now);
        return Clients[group].interactionMade(payload);
    }

    public Task Disconnect()
    {
        // grab someone from the lobby?
        eventLog.AddEvent("DISCONNECT","User disconnect",DateTime.Now);
        return Clients.leave(Context.ConnectionId);
    }
} 
```

但这会导致每次用户与服务器交互时都会重新创建 Logger。

有谁知道我如何能够为每个新会话创建一个 Logger 并向其中添加元素？还是有更简单的方法可以做到这一点，而我只是想多了这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T16:48:55.467

集线器一直在创建和处置！永远不要将您希望持续的数据放入其中（除非它是静态的）。

我建议将您的记录器对象创建为它自己的类（不扩展 Hub/IDisconnect）。
一旦你在集线器上创建了一个静态 ConcurrentDictionary ，它将 SignalR 组（使用这些来表示你的会话）映射到记录器。

当您在集线器上触发“加入”方法时，查找连接所在的组很容易 => 将日志记录数据发送到组记录器。

在通过 SignalR 制作“房间”和其他类型的分组时，请查看[https://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)

希望这可以帮助！

# javascript - 从 HTML 表格中删除行

> ID：12837737
> 
> 赞同：0
> 
> 时间：2012-10-11T10:42:02.070
> 
> 标签：javascript, jquery, html, dom

我有一个相当大的表，我动态删除一些行。它可以工作，但速度很慢。现在大约需要。在 IE8 和 Firefox 上删除 50 行需要 1.5 秒（浏览器之间几乎没有区别）。

我知道 DOM 操作通常很慢，但必须有更快的方法来做到这一点。

现在，我正在使用这种语法：

```
$("#myTable tr").slice(250, 300).remove(); 
```

该`slice()`方法中的偏移量可能会有所不同。我之所以使用`slice()`它，是因为在 jQuerys 帮助和其他方法中建议使用它来执行相同的事情 - 比如`find()`或`eq()`- 在不更快的地方。我读过关于`empty()`在移除之前做一个，但这更慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:09:33.857

考虑使用实际的 javascript，以防 jQuery 触发渲染刷新：http: [//jsfiddle.net/MbXX5/](http://jsfiddle.net/MbXX5/)

```
var removeRows = function(ofTable,from,to) {
    for(var row=to; row>=from; --row) {
        ofTable.deleteRow(row);
    }
}; 
```

正如您在 jsfiddle 中看到的那样，这是即时的。请注意，我正在反向遍历数组，以便行号保持正确。这有可能提高性能，具体取决于浏览器使用的 DOM 代码和 JIT 策略。

[编辑：带有颜色编码单元格的新 jsfiddle 使哪些行已经消失]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T10:48:58.537

问题是对于您 .remove() 的每一行，浏览器都会重新绘制表格。为了让它更快，从 DOM 中删除表格，取出行并将表格放回原处。

```
$table = $("#myTable").clone(true,true);//First true to keep events, second true to deepcopy childs too. Remove it if you do not need it to make it faster.
$table.find("tr").slice(250,300);remove();
$("#myTable").replaceWith($table); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:45:26.837

您可以使用过滤器，但我认为它不会更快

```
$("#myTable tr").filter(function(index){
     return index > 250 && index < 300;
).remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:05:33.020

尝试这个 。我希望它会帮助你

```
$("#myTable tr").slice(250, 300).html(''); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:47:38.803

问题是浏览器尝试在删除每一行时更新 DOM 的屏幕视图。

您可以通过以下方式之一完成

*   从文档中删除表格，删除所有行，然后将其重新插入
*   克隆表，删除克隆上的元素，用克隆替换表
*   或者如果剩余的行数少于删除的行数，您可以创建一个新表，将所有行插入其中并用新表替换现有表

主要思想是当您进行删除时，表格不会附加到 DOM，这样它只会在删除所有行后更新视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T10:48:47.310

是否可以为每一行添加一个 ID？然后直接按 ID 选择行并删除行？像这样：

```
var el = document.GetElementById("RowID_1");
document.removeChild(el); 
```

jQuery 位于 Javascript 之上。我想直接使用javascript会更快。

编辑：当然你可以像这样创建一个循环：

```
for(i=250;i<=300;i++)
{
    var el = document.GetElementById("RowID_" + i);
    document.removeChild(el);  
} 
```

编辑 2：在编辑时隐藏表格，以便浏览器在每次删除后不会更新？;)

# windows - 将 Windows 7 桌面应用程序移植到 Windows 7 平板电脑

> ID：12837741
> 
> 赞同：3
> 
> 时间：2012-10-11T10:42:34.410
> 
> 标签：windows, windows-7, porting, tablet

我已经在桌面 Windows 7 上开发了一个应用程序，现在我想在 Windows 7 平板电脑上运行它。

Windows 7 桌面操作系统和 Windows 7 平板操作系统之间有什么区别吗？如果是，那是什么？

为了移植我的应用程序，我需要采取哪些步骤？

# asp.net - 连接尝试失败，因为连接方在一段时间后没有正确响应，

> ID：12837742
> 
> 赞同：0
> 
> 时间：2012-10-11T10:42:35.043
> 
> 标签：asp.net, c#-4.0, reporting-services, web-config, ssrs-2008

我的项目中有 SSRS 报告。所有报告都运行良好。但只有一份报告不在生产服务器上工作，在本地工作。

错误信息；

连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。

请帮助..没有发现因为它在本地工作但在服务器上给出错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:10:09.520

这是 SQL 服务器上的配置设置：

1.  rt 单击 SQL 服务器实例并转到属性
2.  选择连接
3.  更改远程查询超时

# python - 使用 glut 和 python 打印文本

> ID：12837747
> 
> 赞同：3
> 
> 时间：2012-10-11T10:42:44.753
> 
> 标签：python, opengl, glut

我已经编写了这个函数来使用 python 和 python opengl 打印一些文本

```
def glut_print( x,  y,  font,  text, r,  g , b , a):

    blending = False 
    if glIsEnabled(GL_BLEND) :
        blending = True

    #glEnable(GL_BLEND)
    glColor3f(1,1,1)
    glRasterPos2f(x,y)
    for ch in text :
        glutBitmapCharacter( font , ctypes.c_int( ord(ch) ) )

    if not blending :
        glDisable(GL_BLEND) 
```

和渲染功能：

```
def Draw():
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT )

    glut_print( 10 , 10 , GLUT_BITMAP_9_BY_15 , "Hallo World" , 1.0 , 1.0 , 1.0 , 1.0 )
    # draw my scene ......
    glutSwapBuffers() 
```

结果什么也没写，我正在查看我的几何和 3D 对象；但不是文字！问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T22:37:31.497

很多 OpenGL 程序员都被这个抓住了（包括我自己）。

虽然 glRasterPos 看起来像使用像素坐标，但它们实际上在使用前由模型视图和投影矩阵转换。如果您尝试在 3D 空间中放置文本，这很有用，但当您需要某种叠加控制台或 HUD 时，它就没有那么有用了。

解决这个问题的旧方法是同时推送投影和模型视图矩阵，将两者设置为标识，绘制文本，同时弹出两者。

Mesa3D 的 Brian Paul 认为这很愚蠢，并添加了一个新的调用 glWindowPos，它获取窗口中的实际像素坐标。它在 OpenGL 1.4 左右成为标准。将您的 glRasterPos 替换为 glWindowPos 并查看是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:24:46.013

我已经通过像这样切换投影解决了：

```
glMatrixMode(GL_PROJECTION)
glLoadIdentity()
gluOrtho2D(0.0, 1.0, 0.0, 1.0)
glMatrixMode(GL_MODELVIEW)

glut_print( 10 , 10 , GLUT_BITMAP_9_BY_15 , "Hallo World" , 1.0 , 1.0 , 1.0 , 1.0 ) 
```

打印后我回到常见的 3D 模型。

@Hug ...我也会尝试 glWindowPos

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T14:02:23.730

使用 gultStrokeCharacter 更好，角色可以旋转和缩放，因为它绘制线条来形成角色。

# error-handling - Google Analytics（分析）Google API 错误 403：“用户没有任何 Google Analytics（分析）帐户”

> ID：12837748
> 
> 赞同：164
> 
> 时间：2012-10-11T10:42:44.400
> 
> 标签：error-handling, google-analytics

我正在创建一个脚本，基于此页面中的 Google Analytics 分步指南：

> [https://developers.google.com/analytics/resources/tutorials/hello-analytics-api](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)

授权完成没有问题，直到它尝试访问数据。返回码为 403，错误信息为：

> 用户没有任何 Google Analytics（分析）帐户

此消息毫无意义：我的帐户有谷歌分析数据，跟踪多个网站，我可以从网络浏览器毫无问题地访问它。我已通过 Google API 控制台允许使用 Analytics API，并且 API 访问为我提供了正确的数据。

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2012-10-31T21:53:05.730

我也有这个问题。我通过将我的服务帐户的电子邮件地址添加到我希望它访问的 Google Analytics 配置文件来修复它。

通过查看 Google API 控制台中的“API 访问”选项卡，我获得了服务帐户的电子邮件地址（类似于 xxxxxx@developer.gserviceaccount.com）。

然后，我按照[Google 的说明将电子邮件地址添加到 Analytics 配置文件](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009702)。现在一切都按预期工作。

祝你好运！

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2015-08-07T16:25:01.287

只需添加您给定的电子邮件（格式`71667655853644-o653rrdkq5hthsgo0otbpojoo@developer.gserviceaccount.com`）

给用户管理员：

[![用户没有任何 Google Analytics（分析）帐户](../Images/18207722e7c0dbfa509841a88c46f735.png)](https://i.stack.imgur.com/5dR5D.png)

希望对你有帮助

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-07-06T07:39:16.947

我面临着同样的问题。`your account@yourwebsite-dev.iam.gserviceaccount.com`通过将服务帐户用户 ( ) 的电子邮件 ID 添加到您的 Analytics 帐户中的用户，它得到了解决 -

**分析-主页->管理（左窗格）->用户管理->添加（单击菜单右侧的加号）->添加新用户->在输入电子邮件地址中添加电子邮件ID。**

[![在此处输入图像描述](../Images/dfec1b0cf55cc1d37f6402e05312010f.png)](https://i.stack.imgur.com/dEKX0.png)

现在，这将解决问题。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-25T13:52:58.653

上面的评论中提到了它，但是如果您在*帐户*的用户管理下添加电子邮件地址，它将不起作用。您必须单击屏幕*视图*部分下的用户管理。

[![在此处输入图像描述](../Images/66bd8f8cc3dae367283a0f11898e10e7.png)](https://i.stack.imgur.com/FQElc.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-10-28T20:51:32.320

转到[https://console.cloud.google.com/apis/credentials](https://console.cloud.google.com/apis/credentials)

复制“服务帐户”中的电子邮件地址。

[![在此处输入图像描述](../Images/a8ab65d53b0e1d73c6b7ac9601fb6472.png)](https://i.stack.imgur.com/NMSvt.png)

打开谷歌分析，在上面添加电子邮件作为新用户。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-07-20T15:17:38.227

`client_email`当您在[google alalytics](https://analytics.google.com/analytics)中未授予权限时，我们会收到此消息，`client_email`是您[从 JSON 文件](https://developers.google.com/identity/protocols/oauth2/service-account)中获得的。要授予`client_email`您在应用程序中使用的权限，请转到[Google Analytics 网站](https://analytics.google.com/analytics)并单击“管理员（设置图标）”

[![在此处输入图像描述](../Images/6c014c986f31fd019657e0739261448e.png)](https://i.stack.imgur.com/Ol5pI.png)

# 你会得到正确的菜单列表，点击“查看用户管理”

[![在此处输入图像描述](../Images/ae3feb8f64e40e4dd485e427e7d5e18e.png)](https://i.stack.imgur.com/4Itqs.png)

# 在那里你会看到“+”图标和“添加用户”，

[![在此处输入图像描述](../Images/9b2afe5c2c788cb64f83bfe0413e879f.png)](https://i.stack.imgur.com/J3MQM.png)

# 一旦你点击它，你需要`client_email`在“电子邮件地址字段”中添加并保存它，你应该很高兴！

[![在此处输入图像描述](../Images/b62c5ca59f94b7f0bdab196d8b333a1b.png)](https://i.stack.imgur.com/Ywah6.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-23T15:20:12.977

如果您从未使用您尝试进行身份验证的 google 帐户登录，您也会收到此错误。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-01T08:43:01.580

万一这不起作用，请尝试打开您下载的 JSON 文件并搜索`client_email`并复制该电子邮件地址并将其添加到查看文件

点击

```
Analytics-Home Page ->Admin(left pane) -> User Management -> add (click on plus sign on right side of the menu) -> Add new User -> Add the client_email address which you copied. 
```

如果还是不行

```
Analytics-Homepage-> Admin ->Views->User Management(Click on add(+) symbol, add this ccopied client_email address and give permissions and save it. 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-08-29T09:34:45.597

我收到了 403 错误，直到我将 Google Analytics 内部的电子邮件帐户的权限从“读取和分析”更改为其他内容，保存它，然后将权限更改回“读取和分析”并且它起作用了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-15T22:25:46.197

我遇到了403错误。这些步骤让我绕过了它。需要明确的是，我试图让 Google 的示例“HelloAnalytics.php”与 OAuth 一起使用（无用户交互，适合 cron 作业等）。

启用 Analytics API 后，我在 APIs & Auth/Credentials 下创建了一个新的“服务帐户”；并保存了 .p12 密钥对。然后我进入 Analytics 用户管理控制台，并添加了该服务用户的电子邮件地址。

*如果我仅*在权限列表中选中“读取和分析” ，则*使用*PHP API 的 .p12 授权有效。如果我添加“管理用户”和/或“编辑”，我会得到 403。希望这会有所帮助，我已经为此研究了几个小时......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-11T15:50:17.500

我设法通过确保

客户端 = Google::APIClient.new(:application_name => 'X',:application_version => '1')

上面的应用程序名称变量'X 是 GA 仪表板上的 ACCOUNT 名称，而不是 PROPERTY 名称，在我的例子中是我想要访问的站点的实际 url。

令人困惑，但幸运的是已修复（不感谢 Google！）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-02T06:00:49.643

问题发生是因为我们没有提供“子”参数。除非我们提供此信息，否则呼叫将代表该长服务帐户电子邮件进行。

因此，只需提供一个子参数，以及您已经在报告中授予访问权限的电子邮件，事情应该会运行良好！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-01T21:38:20.893

我也有这个问题，我发现问题是我请求了太多权限。开发者控制台说要同时要求`http://www.googleapis.com/auth/analytics` *和* `http://www.googleapis.com/auth/analytics.readonly`权限。当我也使用该声明时，这不起作用`sub`。`sub`声明指示 Google 颁发*代表另一个用户*操作的访问令牌——在我的例子中是拥有服务帐户的 Google 帐户。我删除了`analytics`许可并坚持使用`analytics.readonly`sub 声明：

```
{
  "iss":"123123123123123-xxxxxxxxxxxxxxxxxxxxxxxx@developer.gserviceaccount.com",
  "sub":"me.example@gmail.com"
  "scope":"http://www.googleapis.com/auth/analytics",
  ...
} 
```

颁发的 Bearer 令牌允许我对完全不同的 Google 帐户拥有但已与我的 gmail 用户 (me.example@gmail.com) 共享（只读）的个人资料进行（至少一些）Google Analytics 查询.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-18T11:00:45.737

我得到了同样的错误，因为我没有登录谷歌分析。所以我通过登录分析帐户解决了这个问题。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-05-09T23:34:41.010

`OAuth client ID`除了使用服务帐户，您可以通过使用凭据回避添加新用户权限的需要（根据此线程中的最佳答案） 。

转到[API 凭据仪表板](https://console.developers.google.com/apis/credentials)并单击“创建凭据”->“OAuth 客户端 ID”。之后，您应该获得验证 API 所需的客户端 ID 和客户端密码。

现在，您可以使用`OAuth2WebServerFlow`基于每次使用的身份验证。这是一个python3示例：

```
from apiclient.discovery import build
from oauth2client.client import OAuth2WebServerFlow

# TODO: Fill these in...
CLIENT_ID = ''
CLIENT_SECRET = ''
VIEW_ID = ''

flow = OAuth2WebServerFlow(
    CLIENT_ID, CLIENT_SECRET,
    'https://www.googleapis.com/auth/analytics.readonly',
    redirect_uri='urn:ietf:wg:oauth:2.0:oob'
)

authorize_url = flow.step1_get_authorize_url()
print('Receive code from:\n%s\n' % authorize_url)
code = input('Enter code here:').strip()
credentials = flow.step2_exchange(code)

api = build('analyticsreporting', 'v4', credentials=credentials)
body={
    'reportRequests': [{
        'viewId': VIEW_ID,
        'dateRanges': [{'startDate': '7daysAgo', 'endDate': 'today'}],
        'metrics': [{'expression': 'ga:sessions'}],
        'dimensions': [{'name': 'ga:country'}]
    }]
}

data = api.reports().batchGet(body=body).execute() 
```

# weka - 更改名义变量以删除 weka 中具有零实例的特定标签

> ID：12837753
> 
> 赞同：0
> 
> 时间：2012-10-11T10:43:05.933
> 
> 标签：weka

我有一个非常简单的问题，但我对用户界面感到困惑，我在文档中找不到它。

我的数据集中有一个名义上的特征。它曾经有 4 个类，但我删除了一个类的实例。现在我想根据这个特征进行分类。

但是，在预处理窗口中，该属性仍然被列为有 4 个类，其中一个有 0 个实例。它按应有的方式执行分类，但在结果中，混淆矩阵和精度表中有一个列/行，用于零类。

有没有办法去除零实例的标签，zo weka 认为该特征只有三个值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:47:36.927

好的，我知道了。我在编辑器中打开了 weka 文件。在那里我可以更改功能定义。

# svn - svn：提交被预提交钩子（退出代码3）阻止并输出

> ID：12837754
> 
> 赞同：0
> 
> 时间：2012-10-11T10:43:08.600
> 
> 标签：svn

我做了什么 - 问题是什么

我添加了 svn 中存在几个文件的目录：

```
$ svn add ABC (ABC is directory)
A ABC
A ABC/file_1
A ABC/file_2
A ABC/file_3 
```

然后我做了-

```
$ svn ci -m "some comments" ABC
Adding  ABC
Adding  ABC/file_1
Adding  ABC/file_2
Adding  ABC/file_3
Transmitting file data..svn commit failed details follows
svn commit blocked by precommit hook exit code3 with output 
```

现在我无法提交，也不知道如何成功。你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:45:40.513

你没有做错什么。

问题在于预提交挂钩。出于某种原因，预提交挂钩正在阻止您的提交完成。这是预提交挂钩的目的：如果交易违反了某些特定于站点的策略，则阻止交易完成。

没有标准的预提交钩子。它们必须由站点实施。许多网站出于各种原因编写自己的网站。有些使用各种标准的预提交钩子。因此，您必须找到负责您的 Subversion 存储库的人，并询问 pre-commit 挂钩、它应该做什么以及它为什么会拒绝您的特定事务。

通常情况下，pre-commit 钩子的作者会很友善地给你一个理由。（就像您没有添加目录的权限或存储库由于某种原因被锁定）。但是，看起来执行您的预提交挂钩的人未能提供任何类型的错误消息，这使得无法确定可能出现的问题。很可能，预提交挂钩本身存在错误，并且根本没有完成。

让使用 pre-commit 钩子的站点对其进行修改，因此当它失败时它总是会给你一个错误消息。如果预提交挂钩将输出写入 STDERR，如果预提交挂钩未能提交，它将打印出该信息，但如果允许提交则不会。因此，他们应该在提交钩子中添加调试代码，这样当它失败时，很容易看到它失败的地方，如果有什么原因拒绝你的事务，它会给你原因。

# liferay - Liferay json api添加expando值

> ID：12837758
> 
> 赞同：3
> 
> 时间：2012-10-11T10:43:28.363
> 
> 标签：liferay, liferay-6

我正在尝试为我为组创建的自定义字段添加一个值。（或当前站点）。我收到一条消息，它需要一个 int 而不是字符串，我如何在 url 中指定类型？

localhost:8080/api/secure/jsonws/expandovalue/add-value?companyId=10153&className=com.liferay.portal.model.Group&tableName=CUSTOM_FIELDS&columnName=UID&classPK=24049&data=130

我得到的异常： {"exception":"com.liferay.portlet.expando.ValueDataException: Column 14911 具有 custom.field.int 类型并且与 custom.field.java.lang.String 类型不兼容"}

自定义字段的类型是 32 位整数。

有任何想法吗？

# java - Java 与 CRM Dynamics 2011 的集成问题

> ID：12837764
> 
> 赞同：3
> 
> 时间：2012-10-11T10:43:42.970
> 
> 标签：java, web-services, crm

第一次在这里发海报！

我正在尝试通过 Java 使用 MS CRM 动态 Web 服务。[我在这里](http://code.msdn.microsoft.com/Consuming-CRM-REST-Service-ae24a15e)按照本教程进行操作并设法使其正常工作。目前，我正在尝试通过 Web 服务从 CRM 中添加、编辑、选择和删除帐户。我已经设法使用下面的代码添加帐户和查询帐户。

新增帐户：

```
MicrosoftCrmSdkDataServicesService service = new MicrosoftCrmSdkDataServicesService(); Account act = new Account(); 
act.setName("test account");
try 
{ 
    service.addEntity(act);
}  
catch (Exception e)  
{ 
    e.printStackTrace(); 
} 
```

查询账户（返回账户名）：

```
MicrosoftCrmSdkDataServicesService service = new MicrosoftCrmSdkDataServicesService(); 
try 
{ 
    Query<Account> act1 = service.createAccountQuery("/AccountSet");
    Iterator<Account> accountTest = act1.iterator();
    while ( ((Iterator<Account>) accountTest).hasNext() )
    {
         String h = accountTest.next().getName().toString();
         if (h.equalsIgnoreCase("test account"))
         {
              System.out.print(hello);
         }
     }
}  
catch (Exception e)  
{ 
    e.printStackTrace(); 
} 
```

因此，当我尝试使用 service.UpdateEntity(obj) 和 service.DeleteEntity(Obj) 方法从 CRM 更新和删除实体时，问题就来了。但是，在执行这些操作并传入帐户对象时，出现此错误：

```
Bad Request (400) - Can't update this entity http://domain:port/organization/xrmservices/2011/organizationdata.svc/AccountSet(9c1d0adc-08ed-e111-aece-00155d046501)
    at org.restlet.ext.odata.Service.updateEntity(Service.java:1243)
    at client.main(client.java:87) 
```

由此它表明我正在将正确的对象放入 updateEntity 中，因为它会自动将正确的 guid 生成到查询 URL 中。但是它以错误的格式执行此操作。它应该是（因为这会加载 AccountSet 和该特定帐户的 RSS 提要）：

```
http://domain:port/organization/xrmservices/2011/organizationdata.svc/AccountSet(guid'9c1d0adc-08ed-e111-aece-00155d046501') 
```

我正在使用的 Web 服务方法是否已经过时并且不再有用了？有没有我没有意识到的公然做错的事情？

谢谢，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T15:55:34.137

请检查此生成的类发送的 HTTP 标头。在更新的情况下，它应该是：

```
"X-HTTP-Method: MERGE" 
```

在删除的情况下，它将是：

```
"X-HTTP-Method: DELETE" 
```

# java - 身份验证和 SSO 应用程序

> ID：12837765
> 
> 赞同：2
> 
> 时间：2012-10-11T10:43:44.033
> 
> 标签：java, security, kerberos, ntlm, ntlmv2

我的团队正在开发一个通用身份验证-SSO (CASSO) 应用程序以在企业 LAN 中使用。公司域下的任何 Web 应用程序都需要通过此 CASSO 对用户进行身份验证，然后用户才能访问该应用程序。目前旧版本已经实现了 BASIC/DIGEST 和 NTLM。然而，为了改善安全问题，我们正在考虑在 CASSO 中使用 KERBEROS。

应遵循哪些身份验证和安全模型/协议？其次，Kerberos 应该与 NTLM、BASIC 和 DIGEST 一起实现，还是只有 Kerberos 和 NTLM 可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:29:32.837

我知道这可能看起来很愚蠢，但是您考虑过 CAS 吗？它完全符合您的目标:)

这是一个[链接](http://www.jasig.org/cas)

我已经用它来为我们的 Web 应用程序实现基于 kerberos 的身份验证，这非常棒。

# objective-c - UIActionSheet 只显示一次

> ID：12837772
> 
> 赞同：0
> 
> 时间：2012-10-11T10:43:57.447
> 
> 标签：objective-c, ios, uiactionsheet, uicollectionview

我有以下代码生成 UICollectionView。当您长按 UICollectionViewCell 时，会出现 UIActionSheet。

这有效，但只有一次。如果您关闭 UIActionSheet 并再次长按同一单元格，则不会发生任何事情。

任何想法我做错了什么？

```
#import "ProjectsListViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ProjectsListViewController ()

@end

@implementation ProjectsListViewController

@synthesize appDelegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    // CREATE THE COLLECTION VIEW
    UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];

    [self setCollectionView:[[UICollectionView alloc] initWithFrame:CGRectMake(20, 54, [[self view] bounds].size.width - 40, [[self view] bounds].size.height) collectionViewLayout:flowLayout]];
    [[self collectionView] setDataSource:self];
    [[self collectionView] setDelegate:self];
    [self.view addSubview:self.collectionView];
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];
    [[self collectionView] setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return [[[appDelegate userSettingsDictionary] objectForKey:@"Projects"] count];
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView 
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{    
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];

    // CREATE A BACKGROUND VIEW FOR THE FOLDER IMAGE
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"folder.png"]];
    UIView *background = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 122, 89)];
    [background setBackgroundColor:[UIColor colorWithPatternImage:image]];
    [cell addSubview:background];

    // SET THE CELL TEXT
    UILabel *cellLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 95, 130, 100)];
    [cellLabel setText:[[[[[appDelegate userSettingsDictionary] objectForKey:@"Projects"] objectAtIndex:[indexPath row]] objectForKey:@"Project Name"] uppercaseString]];

    // LISTEN FOR A LONG PRESS ON EACH FOLDER
    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
    [cell addGestureRecognizer:longPress];

    [cell addSubview:cellLabel];
    return cell;
}

// PRESENT AN ACTION SHEET WHEN A FOLDER HAS RECEIVED A LONG PRESS EVENT
- (void)handleLongPress:(UILongPressGestureRecognizer *)recognizer
{
    if ( [recognizer state] == UIGestureRecognizerStateBegan )
    {
        UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select an action" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Edit", nil];

        [actionSheet addGestureRecognizer:recognizer];

        // SET THE SELECTED FOLDER'S ROW NUMBER AS THE ACTIONSHEET TAG.  JUST A WAY OF LETTING THE DELETE METHOD KNOW WHICH FOLDER TO DELETE
        [actionSheet showInView:self.view];
    } 
}

// GET THE SIZE OF THE FOLDER IMAGE AND SET EACH COLLECTION VIEW ITEM SIZE TO FIT
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"folder.png"]];
    return CGSizeMake(image.size.width, image.size.height + 50);
}

- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
{
    return UIEdgeInsetsMake(10, 10, 90, 10);
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T14:44:07.517

实际上，我不久前尝试了类似的方法，并发现几乎整个方法都是错误的。

首先：您设置细胞的方式并不好。因为单元格是可重用的，但现在每次集合视图请求特定单元格时都添加子视图。您应该`UICollectionViewCell`在方法中子类化并添加子视图`initWithCoder:`。

然后只需在子类上为文本字段创建一个属性。然后在`collectionView:cellForItemAtIndexPath:`您只需将文本设置为标签`text`属性。

现在让我们修复手势识别器。您不应该为每个设置一个手势识别器`UICollectionViewCell`，而应该只为一个全局识别器。在`viewDidLoad:`你应该添加：

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)];
[self.collectionView addGestureRecognizer:longPress]; 
```

然后你应该把它改成`handleLongPress:`这样：

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)gesture {
    if (gesture.state == UIGestureRecognizerStateBegan) {
        NSIndexPath *indexPath = [self.collectionView indexPathForItemAtPoint:[gesture locationInView:self.collectionView]];

        if (indexPath != nil) {
            self.currentIndexPath = indexPath;

            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select an action" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete" otherButtonTitles:@"Edit", nil];

            UICollectionViewCell *itemCell = [self.collectionView cellForItemAtIndexPath:indexPath];
            [action showFromRect:CGRectMake(0, 0, itemCell.frame.size.width, itemCell.frame.size.height) inView:itemCell animated:YES];
        }
    }
} 
```

请注意，我没有添加将识别器添加到操作表的行，我不明白您为什么要这样做。您还应该添加一个名为`currentIndexPath`.

此刻一切都应该设置妥当。当您从操作表中获得响应时，只需使用`self.currentIndexPath`来确定要删除/编辑的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:42:29.643

在`handleLongPress:`您将手势识别器分配给操作表。

```
[actionSheet addGestureRecognizer:recognizer]; 
```

我不知道你为什么这样做，但手势识别器只能用于单个视图。此分配可能会从表格视图单元格中删除手势识别器，因此表格单元格上的长按手势不再起作用。

# android - Android 将 GridView 设置为每行只有 2 列

> ID：12837780
> 
> 赞同：25
> 
> 时间：2012-10-11T10:44:13.210
> 
> 标签：android, android-layout, gridview

这是我的活动中的代码：

```
public class GridViewActivity extends Activity {

    GridView gridView;

    static final String[] MOBILE_OS = new String[] { "Android", "iOS",
            "Windows", "Blackberry" };

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        gridView = (GridView) findViewById(R.id.gridView1);

        gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Toast.makeText(
                        getApplicationContext(),
                        ((TextView) v.findViewById(R.id.grid_item_label))
                                .getText(), Toast.LENGTH_SHORT).show();

            }
        });

    }

} 
```

在我的图像适配器中：

```
public class ImageAdapter extends BaseAdapter {
    private Context context;
    private final String[] mobileValues;

    private TextView t;
    public ImageAdapter(Context context, String[] mobileValues) {
        this.context = context;
        this.mobileValues = mobileValues;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from mobile.xml
            gridView = inflater.inflate(R.layout.mobile, null);

            // set value into textview
            TextView textView = (TextView) gridView
                    .findViewById(R.id.grid_item_label);
            textView.setText(mobileValues[position]);
            Button b = (Button) gridView.findViewById(R.id.grid_item_button);
            Button b2 = (Button) gridView.findViewById(R.id.grid_item_button2);
            t = (TextView) gridView
                    .findViewById(R.id.grid_item_number);
            b.setOnClickListener(new MyOnClickListener(t));
            b2.setOnClickListener(new MyOnClickListenerm(t));
            // set image based on selected text
            ImageView imageView = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);

            String mobile = mobileValues[position];

            if (mobile.equals("Windows")) {
                imageView.setImageResource(R.drawable.windows_logo);
            } else if (mobile.equals("iOS")) {
                imageView.setImageResource(R.drawable.ios_logo);
            } else if (mobile.equals("Blackberry")) {
                imageView.setImageResource(R.drawable.blackberry_logo);
            } else {
                imageView.setImageResource(R.drawable.android_logo);
            }

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }

    private void clickedButton(TextView tv){

        int num = Integer.parseInt(tv.getText().toString());
        ++num;
        tv.setText(Integer.toString(num));

    }
    private void clickedButtonm(TextView tv){

        int num = Integer.parseInt(tv.getText().toString());
        if(num>0){
            --num;
            tv.setText(Integer.toString(num));
        }
    }
    @Override
    public int getCount() {
        return mobileValues.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }
    class MyOnClickListener implements OnClickListener{

        public final TextView tv;

        public MyOnClickListener(TextView tv){
            this.tv=tv;
        }
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            clickedButton(tv);
        }

    }
    class MyOnClickListenerm implements OnClickListener{

        public final TextView tv;

        public MyOnClickListenerm(TextView tv){
            this.tv=tv;
        }
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            clickedButtonm(tv);
        }

    }

} 
```

和我的mobile.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="wrap_content"
        android:layout_height="74dp"
        android:layout_marginRight="10px"
        android:layout_weight="1.44"
        android:src="@drawable/android_logo" >
    </ImageView>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/grid_item_button"
            android:layout_width="30dp"
            android:layout_height="23dp"
            android:text=" " />

        <TextView
            android:id="@+id/grid_item_number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="0" />

          <Button
            android:id="@+id/grid_item_button2"
            android:layout_width="30dp"
            android:layout_height="23dp"
            android:text=" " />
    </LinearLayout>

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5px"
        android:text="@+id/label"
        android:textSize="15px" >
    </TextView>

</LinearLayout> 
```

我觉得每行不能撅起 2 件东西有点麻烦。我想知道如何格式化我的 GridView 以实现这样的想法

这是我的源代码：[http ://www.mediafire.com/?25vae87fvahu4wp](http://www.mediafire.com/?25vae87fvahu4wp)

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-11T10:53:39.247

`android:numColumns="2"`在您的 GridView 小部件中使用

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="2"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:scrollbarStyle="outsideOverlay"
    android:verticalScrollbarPosition="right"
    android:scrollbars="vertical">
</GridView> 
```

[您可以在此链接](http://technicalmumbojumbo.wordpress.com/2011/12/08/android-tutorial-series-layout/)中熟悉 Android UI。尝试专注于 GridView 主题

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-11T10:53:22.867

您还可以通过以下方式在**GridView**中以编程方式设置列数：-

```
 gridview.setNumColumns(n); 
```

**其中“n”是列数。**

# date - 如何从json中获取AngularJS日期

> ID：12837783
> 
> 赞同：7
> 
> 时间：2012-10-11T10:44:18.637
> 
> 标签：date, formatting, angularjs

我是 angularjs 的新手，我正在尝试将日期属性绑定到输入（文本），但我不知道如何格式化日期。

我的 json 对象控制器：

```
$scope.datasource = {"prop1":"string data", "myDateProp":"\/Date(1325376000000)\/"} 
```

我的观点：

```
<input type="text" ng-model="datasource.myDateProp" /> 
```

结果，我在文本框中得到了字符串“/Date(1325376000000)/”。

我怎样才能格式化这个日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:57:32.387

~~您需要做的是查看[http://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)这是一个默认情况下在 angular 中可用的过滤器。~~

~~似乎您正在通过日期传递其他内容。请参阅此处的场景。(/日期( ***)/)。除了 * 中的**内容之外，其他所有内容都不需要解析日期，并且默认的角度过滤器将无法解析它。从模型中去除这些额外的东西，或者，您可以编写自己的过滤器以在输入时去除它们。~~

**编辑 ：**

看看[http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController](http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController)（以及那里定义的例子！）。如果你打算在多个地方重用它，我建议你按照 ngModelController 描述的方法来做。创建一个新指令并在 ngModel 上实现 $render 和 $setViewValue。

如果您只想在一个地方执行此操作，那么另一种方法是为输入定义一个新模型。就像是

```
$scope.dateModel = ""; 
```

并使用它

```
<input type="text" ng-model="dateModel" ng-change="onDateChange()"/> 
```

在您的控制器中，您必须执行以下操作：

```
$scope.$watch("datasource.myDateProp",function(newValue){

    if(newValue){
        convert(newValue);
    }
});

function convert(val){
    //convert the value and assign it to $scope.dateModel;
}

$scope.onDateChange = function(){
// convert dateModel back to the original format and store in datasource.myDateProp.
} 
```

# android - Android - 是什么限制了示例 SearchableDictionary 中的定义

> ID：12837786
> 
> 赞同：0
> 
> 时间：2012-10-11T10:44:32.537
> 
> 标签：android, search, textview, sample

我正在尝试从 android 开发人员示例中实现部分 SearchableDictionary。我更改了定义列表，对于较长的定义，文本被截断，我试图使其可滚动，认为它可能会受到限制，但滚动后我意识到必须有一个字符截断。

我用它来让它滚动：

```
TextView definition = (TextView) findViewById(R.id.definition);
definition.setMovementMethod(ScrollingMovementMethod.getInstance()); 
```

和

```
android:maxLines="3"
android:scrollbars="vertical" 
```

由于这很可能不是阻止定义 TextView 显示整个定义的限制因素？

编辑：

我正在学习认为这是字符的限制而不是滚动问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:46:39.563

```
TextView definition = (TextView) findViewById(R.id.definition);
definition.setMovementMethod(ScrollingMovementMethod.getInstance()); 
```

和

```
android:maxLines="3"
android:scrollbars="vertical" 
```

确实是答案，文本被我作为示例放入定义中的随机文本中的破折号截断。一旦破折号“-”被删除，所有显示都正确，并且添加了上面的代码滚动就实现了。

# c# - 如何从文本文件中读取并存储在单独的数组 C# 表单中

> ID：12837791
> 
> 赞同：-2
> 
> 时间：2012-10-11T10:44:44.057
> 
> 标签：c#, arrays, forms

我很难找到一段将成功读取文件并将信息存储在单独数组中的代码。

有人建议

```
var lines = File.ReadAllLines("peter_testresults.txt"); 
```

在过去的问题中，但“var”未被识别。

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;
    using System.IO;

    namespace WindowsFormsApplication4
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            //return a pass/fail
            //return number of correct answers
            //return number of incorrect answers
            //return index figures of incorrect values

    correctAnswers ={B,D,A,A,C,A,B,A,C,D,B,C,D,A,D,C,C,B,D,A} 

    private string determinePassOrFail (); //return a pass/fail

        string[] lines= File.ReadAllLines("peter_testresults.txt");

        var c = correctAnswers.Where((x, i) => x.Equals(lines[i])).Count();

     private int numberCorrectAnswers(); //return number of correct answers
        {

        }

    private int numberIncorrectAnswers(); //return number of incorrect answers

    {

    }

    private string questionsIncorrectAnswers(); //return index figures of incorrect
  values

    {

    }

    }
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T10:47:37.863

如果你不能使用`var` [（隐式类型的局部变量）](http://msdn.microsoft.com/en-us/library/bb383973.aspx)，那么这表明你正在使用 C# 2 编译器（例如 VS2005），因此几乎可以肯定是 .NET 2。（我假设你*没有*被 C# 1 卡住。 ..)

或者，您可以尝试将其用作字段：

```
class Foo
{
    var lines = File.ReadAllLines("...");
} 
```

这不会起作用，因为字段不能被隐式键入 - 但我认为在字段初始化程序中执行该 IO 无论如何都是一个坏主意......

这应该仍然有效：

```
string[] lines = File.ReadAllLines("peter_testresults.txt"); 
```

正如[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx).NET 2 中首次引入的那样。

顺便说一句，我*强烈*建议您尝试升级到更现代的 C# 版本...

# python - 从 postscript 中提取文本和/或使用 python 创建覆盖

> ID：12837793
> 
> 赞同：0
> 
> 时间：2012-10-11T10:44:47.060
> 
> 标签：python, postscript

我正在尝试从已被 redmon 拦截并通过管道传输到 python 程序的 postscript 文档中自动提取地址。我已经到了可以捕获 postscript 输出（并将其写入文件）的地步，但我被困在提取部分。

在 python 中是否有一种好的/可靠的方法可以做到这一点，或者我是否需要通过 ps2ascii 运行 postscript 文件并希望最好？

如果有其他语言的工具可以做到这一点，我很乐意评估它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:48:23.743

实际上，在大多数情况下，只解析 Postscript 就足够了，因为 Postscript 文档是一个普通的文本文件。

澄清一下：是的，我知道 Postscript 文档显示的内容是一个程序的结果，该程序是用一种称为 Postscript 的漂亮反向或反向漂亮的语言编写的。然而，在大多数情况下，grep 程序源代码就足够了。在某些其他情况下，文本可能被编码为曲线或位图，并且除了对渲染输出进行 OCR 之外，将无法提取它。

底线：这取决于您要提取的信息类型以及后记文件的类型。在我看来，`ps2ascii`这是一个很好的工具，也是解决问题的一种方法，但是（i）不能保证成功（可能比对源代码略多一点）（ii）在很大程度上只是剥离运算符和（iii ) 在某些情况下可能会导致文本丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T19:39:47.173

因为我评论了 ps2ascii 占用空间很大：这里有一个“80%”的解决方案，用于使用 python 提取出现在 postscript 文件中的字符串。

```
 import fileinput
for line in fileinput.input():
 for p in line.replace('\\(','EscapeLP').replace('\\)','EscapeRP').split('(')[1:]:
  print p[:p.find(')')].replace('EscapeLP','(').replace('EscapeRP',')') 
```

请注意，精细格式化（紧缩）的后记通常会将字符串分成小块（甚至是单个字符）。ps2ascii 很好地为您将它们拼凑在一起，而显然我的简单脚本不会。

# java - 使用带有命令提示符的 Junit 和 Emma 为 jar 文件创建测试覆盖率

> ID：12837796
> 
> 赞同：2
> 
> 时间：2012-10-11T10:45:07.240
> 
> 标签：java, command-line, jar, junit, emma

我提供了 jar 文件，其中包含许多没有 Main 方法的类。如何使用 Junit 和 Emma 执行测试覆盖并为所有这些类生成结果？

> java -cp MyJar.jar;。emmarun -cp path\emma.jar -report txt,html junit.textui.TestRunner MyTestClass

此命令行显示 Class MyTestClass not found !! 也试过了。MyTestClass 但仍然是同样的问题。

Jar结构----MyJar.jar

```
 ---MetaInf-->manifest.mf

             ---out--->MyTestClass.class 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:46:37.253

看起来，您没有放入调用`MyJar.jar`的类路径中。`emmarun`

# scala - Scala 数组映射返回 ArraySeq

> ID：12837799
> 
> 赞同：7
> 
> 时间：2012-10-11T10:45:15.283
> 
> 标签：scala

为什么我在下面的工厂方法中不能有类型参数？

```
import org.junit.runner.RunWith
import org.scalatest.junit.JUnitRunner
import org.scalatest.FunSuite

@RunWith(classOf[JUnitRunner])
class WhyScalaNeverWillMakeIt extends FunSuite {

  test("Array becomes ArraySeq when you least want it") {
    val arr = Array("A", "B", "C")
    def f: String => Dummy = new Dummy(_)

    val bucket = new Bucket[Dummy](arr.map(f))
//    val bucket2 = Bucket[String, Dummy](arr, f)
//    val bucket3 = Bucket[Dummy](arr, f)
    val bucket4 = Bucket(arr, f)
  }

  class Bucket[T]( val arr: Array[T] )  {/* Loads of business logic */}

  object Bucket {
//    def apply[T, U](arr: Array[T], f:T=>U):Bucket[U] = new Bucket[U](arr.map( b => f(b) ))
//    def apply[T](arr: Array[String], f:String=>T):Bucket[T] = new Bucket[T](arr.map( b => f(b) ))
    def apply(arr: Array[String], f:String=>Dummy):Bucket[Dummy] = new Bucket[Dummy](arr.map(f))
  }

  class Dummy(val name: String)
} 
```

如果我取消注释工厂方法，`object Bucket`我会得到：

```
error: type mismatch;
found   : scala.collection.mutable.ArraySeq[T]
required: Array[T]
def apply[T](arr: Array[String], f:String=>T):Bucket[T] = new Bucket[T](arr.map( b => f(b) )) 
```

当我引入类型参数 T 时，Scala 编译器不知何故感到困惑（或者是我？;-)）。也许我在这里做错了什么，但我不明白为什么引入类型参数意味着 map 函数应该将返回类型从 Array[T] 更改为 ArraySeq[T]。

我知道 Array 只是 Java Array 的包装器，我可能应该使用更花哨的 Scala 类之一，例如 Seq 或 List，但这仍然不能解释这种相当奇怪的行为。

有人可以解释为什么会发生这种情况，也许还有如何解决它（仍然使用数组）？

编辑：我正在使用 scala 2.9.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:22:02.103

只需添加`ClassManifest`上下文绑定：

```
 def apply[T, U: ClassManifest](arr: Array[T], f: T => U): Bucket[U] = new Bucket[U](arr.map(b => f(b)))
    def apply[T: ClassManifest](arr: Array[String], f: String => T): Bucket[T] = new Bucket[T](arr.map(b => f(b))) 
```

有关详细信息，请检查[this](https://stackoverflow.com/questions/4850976/why-is-classmanifest-needed-with-array-but-not-list)和[this](https://stackoverflow.com/questions/3213510/what-is-a-manifest-in-scala-and-when-do-you-need-it)

# javascript - 将几个 .js 文件放在一个范围内

> ID：12837806
> 
> 赞同：0
> 
> 时间：2012-10-11T10:45:49.767
> 
> 标签：javascript

我有一些大型 js 文件，它们的函数和对象位于全局范围内，并且它们之间有函数调用。有没有一种相对简单的方法可以将它们置于本地范围内。

```
<script src="fileA.js"></script>
<script src="fileB.js"></script>
<script src="fileC.js"></script> 
```

我试过把`(function(){`A 文件的开头和 `})();`最后一个文件的结尾放在一起，但它不起作用。

10x 为您提供帮助 BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:48:07.970

不，没有。

您最接近的方法是将它们设置为通过命名空间（一个单一的全局变量，其名称被选择以使冲突不太可能发生）共享变量，例如`window.YOUR_SCRIPT_NAME = {}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:52:14.527

你不能这样包装它，因为每个脚本仍然是单独解析的（`<script>`标签不能通过将内容包含到文件中来工作）。

您可以简单地手动连接文件，放置`function(){ ... }()`整个内容，并将这个新连接的脚本作为一个单元使用。

如果脚本内容的重写是可行的，您可以让它们使用工厂方法中为它们提供的共享范围，就像 Quentin 在另一个答案中提到的那样。但是，更好的解决方案（如果您可以重写并且这是一个更大的项目）将切换到具有依赖关系的完整模块概念，例如[AMD](http://requirejs.org/docs/whyamd.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:01:35.010

您可以使用 Ajax 将 fileA.js 的内容作为字符串获取，而不是使用脚本 src="fileA.js"。比评估您的本地范围。

```
eval.call(yourlocalscope, string) 
```

# android - 响应代码没有进入android

> ID：12837807
> 
> 赞同：-3
> 
> 时间：2012-10-11T10:45:53.060
> 
> 标签：android, android-ksoap2

如何在 android 的 ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar 中获取响应代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:55:04.397

使用 Ksoap2-android-assembly-2.4 jar-with -dependencies.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:14:30.860

有关信息，请尝试此[站点](http://javatutorialspoint.blogspot.in/2012/02/android-web-service-access-using-ksoap2.html)和[站点](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)和[站点](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)。在这里你会明白，如何在 android 中使用 ksoap2 android 程序集和依赖项

# svg - 扁平化 SVG 嵌套转换的工具

> ID：12837808
> 
> 赞同：9
> 
> 时间：2012-10-11T10:45:58.460
> 
> 标签：svg, nested, transformation, flatten

我想知道是否有任何命令行工具可用于通过 SVG 中的转换来展平嵌套组？

在我的特殊情况下，我将 CAD 软件生成的 PDF 转换为 SVG，然后添加一些元素并将修改后的 SVG 发布到网页以供查看。SVG 的响应时间非常缓慢（对于平移和缩放），我发现这是由于 SVG 内部的嵌套组数量非常多，通常高达几百个深度。对于 SVG 中的每个元素，浏览器需要计算其所有父节点的位置...

显然这是荒谬的，因为所有这些元素都需要一个单一的转换（矩阵）。所以我想知道是否有人知道一个工具来扁平化它（或者一个可以这样做的 C# 或 Delphi 实现......）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-07T08:23:11.377

我找到的最好的是 svgo [https://github.com/svg/svgo](https://github.com/svg/svgo)但仍然不能令人满意。SVGO 的目标是生成更小的 svg 文件。这意味着如果转换允许使用较小的 svg 文件，则它会被保留。我的目的类似于 OP，但略有不同。我正在寻找可以展平并完全将 SVG 简化为基本路径和元素的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:20:14.730

谢谢德拉普特，

同时我找到了这个：（[PStill](http://www.wizards.de/~frank/pstill.html)）。它在扁平化结构（PDF 到 PDF）方面做得非常好，但是生成的 SVG 中仍然有很多元素，这使得它对浏览器非常不可用。CAD 系统生成 PDF 的真正麻烦是：许多非常小的路径而不是一条较长的路径。我很确定还有优化的空间......总有一天:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T15:01:59.327

您可能会尝试使用[SVG Cleaner](https://github.com/RazrFalcon/SVGCleaner)。不幸的是，它是一个 GUI 工具，因此它并不能真正满足您的要求，但它提供了一种可能变得有用的批处理理念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T23:00:18.750

Inkscape 图形编辑器中有一个选项可以展平转换。
因此，您可以使用 Inkscape 终端命令来实现它，但您必须查看是否存在这样的命令。

# facebook-opengraph - 我应该在 og:image 中指定多大的图像？

> ID：12837810
> 
> 赞同：0
> 
> 时间：2012-10-11T10:46:07.960
> 
> 标签：facebook-opengraph, meta-tags

我正在为页面添加 og 元标记，包括`og:image`. 理想情况下，指定的图像应该有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:52:35.667

我们必须在两个维度上至少使用 200 像素，否则当您使用 facebook 调试工具时，它会向您显示错误消息，例如“您的 og：图像必须至少 200 像素或 xxxx”

上次我尝试在我的 facebook 应用程序 ->www.wootube.woolei.com 上使用小版本，但是当我在 facebook 上分享我的页面时，图像无法正确呈现。

# oracle - 尝试检索错误 ORA-01804 的文本时出错

> ID：12837811
> 
> 赞同：10
> 
> 时间：2012-10-11T10:46:08.790
> 
> 标签：oracle

我在将 C++ 应用程序连接到 Oracle DB 时遇到问题，出现错误

> `"[OracleException] errcode: 1804, desc: Error while trying to retrieve text for error ORA-01804".`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-02-13T11:52:31.740

cx_oracle（通过python）我得到了同样的错误。对于这种特定情况，环境变量中缺少 ORACLE_HOME。使用 Windows Cli 设置 Oracle_home（使用您的 oracle 文件夹）：

```
setx ORACLE_HOME  "C:\oracle\oc121\" 
```

在某些数据库连接上，还需要设置 TNS_ADMIN：

```
setx TNS_ADMIN "%ORACLE HOME%\network\admin" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-22T01:58:49.070

我在 CentOS 7 中使用 OCCI，遇到了同样的问题，只需将 libociicus.so 添加到 LD_LIBRARY_PATH 即可解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T10:48:54.147

您正在`ORA-01804`通过数据库接收，描述`ORA-01804`是：

```
failure to initialize timezone information
Cause:   The timezone information file was not properly read. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T17:14:47.363

`oracle::occi::SQLException`我在尝试连接到 oracle db 时遇到了 C++ OCCI 应用程序的问题。

```
ORA-01804:
failure to initialize timezone information
Cause:  The timezone information file was not properly read. 
```

原因是我的 linux oracle 客户端在其`$ORACLE_HOME`目录中缺少一些与时区相关的文件。解决方案是简单地从另一个 oracle 客户端实例复制这些文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-18T04:21:34.760

另一个可能的原因：二进制无权访问OCCI库...由于我错误地设置了OCCI库所在文件夹的模式，我遇到了这种情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-20T12:23:06.913

就我而言，`libociicus.so`（可以在[Oracle Instant Client](http://www.oracle.com/technetwork/database/database-technologies/instant-client/overview/index.html)中找到）丢失了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-18T15:41:06.050

另一个微不足道但难以确定的原因可能是 Oracle 安装文件夹不完整。对我来说，原因是某些进程刚刚（未成功）卸载了 Oracle 客户端。

作为 PATH env 中的 bin 文件夹，这真的很棘手。var 包含 oci.dll（和许多其他 DLL-s），但在其他地方`C:\oracle\11\`缺少其他文件。

所以：检查安装文件夹是否包含所有必需的文件！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-08T03:53:13.443

我知道这是一个老问题，但是没有答案可以解决我的问题（**nodejs**的 oracledb 包，macOS）。

但是，我再次为自己找到了解决方案。

解决方案是`libociei.dylib`移入`/usr/locale/lib`文件夹。就是这样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-28T02:06:04.517

对我来说，这是因为我的即时客户端和数据库服务器的版本使用了不同的版本。所以我不得不匹配他们的版本来解决这个错误。显然，如果版本不同，Oracle 将无法读取数据库时区。

# java - JPanel 的拖放不会掉落

> ID：12837814
> 
> 赞同：1
> 
> 时间：2012-10-11T10:46:41.057
> 
> 标签：java, swing, drag-and-drop, awt, jpanel

我基本上是在尝试拖放包含 Jlabel 的 JPanel：

这是我实现的拖放代码示例：

```
public class TestDragAndDropPanel extends JPanel{

private static final long serialVersionUID = 1L;
Border borderContainer = BorderFactory.createMatteBorder(2, 2, 2, 2, Color.BLACK);
private DataFlavor dataFlavor = new DataFlavor(TestDragAndDropPanel.class, "TestDragAndDropPanel");

public TestDragAndDropPanel(){
            JPanel mainDragPanel = new JPanel();
    mainDragPanel.setBorder(borderContainer);

    JPanel mainDropPanel = new JPanel();
    mainDropPanel.setBorder(borderContainer);

    JPanel draggablePanel = new JPanel();
    draggablePanel.setBorder(borderContainer);
    JLabel draggableTitle = new JLabel("This is Draggable");
    JLabel draggableTitle2 = new JLabel("Another Component");
    draggablePanel.add(draggableTitle);
    draggablePanel.add(draggableTitle2);

    JPanel droppablePanel = new JPanel();
    droppablePanel.setBorder(borderContainer);
    JLabel droppableTitle = new JLabel("This is Droppable");
    JLabel droppableTitle2 = new JLabel("Another Component 2");
    droppablePanel.add(droppableTitle);
    droppablePanel.add(droppableTitle2);

    mainDragPanel.add(draggablePanel);
    mainDropPanel.add(droppablePanel);
    this.add(mainDragPanel);
    this.add(mainDropPanel);

    init(mainDropPanel, draggablePanel);
}

private void init(JPanel mainDropPanel, JPanel draggablePanel) {
    DragSource ds = new DragSource();
    ds.createDefaultDragGestureRecognizer(draggablePanel, DnDConstants.ACTION_MOVE, new DragGestureListImp());

    new MyDropTargetListImp(mainDropPanel);
}

private class TransferablePanel implements Transferable { 

    private JPanel transferablePanel;

    public TransferablePanel(JPanel transferablePanel) {
        this.transferablePanel = transferablePanel;
    } 

    @Override
    public DataFlavor[] getTransferDataFlavors() {
        return new DataFlavor[] { dataFlavor };
    }

    @Override
    public boolean isDataFlavorSupported(DataFlavor flavor) {
        return flavor.equals(dataFlavor);
    }

    @Override
    public Object getTransferData(DataFlavor flavor)
        throws UnsupportedFlavorException, IOException {

        if (flavor.equals(dataFlavor)){
            return transferablePanel;
        } else {
            throw new UnsupportedFlavorException(flavor);
        }
    }
}

private class DragGestureListImp implements DragGestureListener {

    @Override
    public void dragGestureRecognized(DragGestureEvent event) {
        Cursor cursor = null;
        JPanel panel = (JPanel) event.getComponent();

        if (event.getDragAction() == DnDConstants.ACTION_MOVE) {
            cursor = DragSource.DefaultMoveDrop;
        }
        event.startDrag(cursor, new TransferablePanel(panel));
    }
}

private class MyDropTargetListImp extends DropTargetAdapter implements DropTargetListener {

    private DropTarget dropTarget;
    private JPanel panel;

    public MyDropTargetListImp(JPanel panel) {
        this.panel = panel;
        dropTarget = new DropTarget(panel, DnDConstants.ACTION_MOVE, this,
                true, null);
    }

    public void drop(DropTargetDropEvent event) {
        try {
            Transferable tr = event.getTransferable();
            JPanel an = (JPanel) tr.getTransferData(dataFlavor);

            if (event.isDataFlavorSupported(dataFlavor)) {
                event.acceptDrop(DnDConstants.ACTION_MOVE);
                this.panel.add(an);
                event.dropComplete(true);
                this.panel.validate();
                this.panel.repaint();
                return;
            }
            event.rejectDrop();
        } catch (Exception e) {
            e.printStackTrace();
            event.rejectDrop();
        }
    }
}

public static void main(String[] args){
    System.out.println("Application Running");
    JPanel testDragAndDropPanel =  new TestDragAndDropPanel();

    JFrame mainframe =  new JFrame();
    mainframe.add(testDragAndDropPanel);
    mainframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainframe.setSize(300,200);
    mainframe.setVisible(true);
}
} 
```

基本上，下降方面似乎没有发生任何事情，谁能告诉我为什么？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T18:17:15.353

你确定什么都没发生吗？如果您在放下面板后最大化您的窗口，那么您会看到更改。问题是您没有重新验证下拉面板。

在你的`drop`方法中，替换这部分

```
if (event.isDataFlavorSupported(dataFlavor)) {
    event.acceptDrop(DnDConstants.ACTION_MOVE);
    this.panel.add(an);
    event.dropComplete(true);
    this.panel.validate();
    this.panel.repaint();
    return;
} 
```

有了这个

```
if (event.isDataFlavorSupported(dataFlavor)) {
    event.acceptDrop(DnDConstants.ACTION_MOVE);
    panel.add(an);
    panel.revalidate();
    event.dropComplete(true);
    return;
} 
```

# javascript - jquery .on() 函数不起作用

> ID：12837818
> 
> 赞同：0
> 
> 时间：2012-10-11T10:47:04.057
> 
> 标签：javascript, jquery

我有 3 个字段 Quantity、Rate、Total Amount。如果任何一个键入数量或费率字段，则金额将显示在总金额字段上。我还有一个添加按钮。如果有人单击添加按钮，则动态创建新行和删除链接。我的问题是如果我键入数量或比率字段，那么 calculateSum() 函数可以正常工作。假设我创建了 2 行，其总金额为 100+(100+100)=300。如果我删除第一个没有任何改变。如果我删除最后一个，则结果显示 200。但正确的结果是 100。请有人指出我在这里可能做错了什么？非常感谢。这是我的代码：

```
<html>
    <head>
        <title>Invoice</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
      $(document).ready(function() {
$(document).on("keyup",".qty, .rate",function(){
        calculateSum();
    });

$(document).on("click",".del",function(){
        calculateSum();
    });
      });

function calculateSum() {
    var qty = [];
    $(".qty").each(function() {
            var num = parseFloat(this.value) || 1;
            qty.push(num);
    });

    var rate = [];
    $(".rate").each(function() {
            var num = parseFloat(this.value) || 0;
            rate.push(num);
    });
    var total = 0;
    $('input[name="total_amount[]"]').each(function(i){
        var amount = qty[i].toFixed(2)*rate[i].toFixed(2);
        total += amount;
        $(this).val(amount);
    });
    $("#sub_total").text(total);
}
</script>
<script type="text/javascript" language='javascript'>
/*
This script is identical to the above JavaScript function.
*/
var ct = 1;

function new_link()
{
    ct++;
    var div1 = document.createElement('div');
    div1.id = ct;

    // link to delete extended form elements
    var delLink = '<div  style="text-align:right;margin-top:-20px"><a class="del" href="javascript:delIt('+ ct +')">Delete</a></div>';

    div1.innerHTML = document.getElementById('newlinktpl').innerHTML + delLink;

    document.getElementById('newlink').appendChild(div1);

}
// function to delete the newly added set of elements
function delIt(eleId)
{
    d = document;

    var ele = d.getElementById(eleId);

    var parentEle = d.getElementById('newlink');

    parentEle.removeChild(ele);

}
</script>
        <style type="text/css">
table
{
    border: 1px solid black;
    width: 600px;
}

td
{
    border: 1px solid black;
    padding:5px 5px 5px 5px;
}

        </style>
    </head>
    <body>
        <div id="newlink">
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td>Quantity</td>
                <td>Rate</td>
                <td>Total Amount</td>
            </tr>

             <tr>
                 <td><input class='qty' type='text' name='qty[]'/></td>
                <td><input class='rate' type='text' name='rate[]'/></td>
               <td><input class='total_amount' type='text' name='total_amount[]'/></td>
            </tr>

                 </table>
    </div>
        <div id="sub_total">0</div>
        <input type="button" value="Add" onclick="new_link()"/>

                <div id="newlinktpl" style="display:none">
        <table cellpadding="0" cellspacing="0">
          <tr>
                 <td><input class='qty' type='text' name='qty[]'/></td>
                <td><input class='rate' type='text' name='rate[]'/></td>
               <td><input class='total_amount' type='text' name='total_amount[]'/></td>
            </tr>
                 </table>
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:08:44.963

试试这个：

在**.ready()**中：

```
$(document).on("click",".del", function() {
    // Call delIt before calculateSum() and get id from data attribute.
    delIt($(this).data("id")) 

    calculateSum();
}); 
```

在**new_link()**中：

```
// link to delete extended form elements
var delLink = '<div style="text-align:right;margin-top:-20px"><a class="del" href="#" data-id=' + ct + '>Delete</a></div>';
// Set href = # and set ct to data-id instead. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:24:51.903

我猜你的问题是你在标签的href中有删除的逻辑，但是你将显示更新附加到点击事件中。click 事件通常会在链接被点击*之前*触发，因此在删除完成之前会更新显示。`ct`您应该在单击事件（添加到链接数据集）上将这两者合并为一致的不显眼的 JavaScript 。然后你可以有一个事件处理程序来分派给这两个函数，或者让 delete 函数在完成时调用 update 函数。

请注意，即使使用现有代码，上面的最后一句话也应该是一个解决方案，但让事情更接近一致性/预期代码不会受到伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:53:25.943

尝试使用这个

```
$(".qty, .rate").live("keyup",function(){
    calculateSum();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:02:39.557

这是我的 2 美分，我使用 @Mario 和 @MattWhipple 建议重写了 html。我还使用字符串变量删除了文档末尾不需要的额外元素。

我不认为是更好的做事方式，但对我来说更清晰。

```
<html>
  <head>
    <title>Invoice</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">
      var templateText = '<div><table cellpadding="0" cellspacing="0">\
  <tr>\
    <td><input class="qty" type="text" name="qty[]"/></td>\
    <td><input class="rate" type="text" name="rate[]"/></td>\
    <td><input class="total_amount" type="text" name="total_amount[]"/></td>\
  </tr>\
</table></div>';
      var ct = 1;

      $(document).ready(function() {
        $(document).on("keyup", ".qty, .rate", calculateSum);
        $(document).on("click", ".del", delIt);
      });
      function calculateSum() {
        var total = 0;
        $('#newlink table').each(function(i, e) {
          var that = $(this);
          var qty = parseFloat(that.find('.qty').val()) || 1;
          var rate = parseFloat(that.find('.rate').val()) || 0;
          var amount = qty.toFixed(2)*rate.toFixed(2);
          that.find('.total_amount').val(amount);
          total += amount;
        });
        $("#sub_total").text(total);
      }
      function addRow() {
        ct++;
        var div1 = $(templateText);
        div1.attr('id', ct)
        var delLink = $('<div style="text-align:right;margin-top:-20px"> </div>').append($('<a class="del" href="#" >Delete</a>').data("id", ct));
        div1.append(delLink).appendTo('#newlink');
      }
      function delIt() {
        $('#' + $(this).data("id")).remove();
        calculateSum();
      }
    </script>
  </head>
  <body>
    <div id="newlink">
      <table cellpadding="0" cellspacing="0">
        <tr>
          <th>Quantity</th>
          <th>Rate</th>
          <th>Total Amount</th>
        </tr>
        <tr>
          <td><input class='qty' type='text' name='qty[]'/></td>
          <td><input class='rate' type='text' name='rate[]'/></td>
          <td><input class='total_amount' type='text' name='total_amount[]'/></td>
        </tr>
      </table>
    </div>
    <div id="sub_total">0</div>
    <input type="button" value="Add" onclick="addRow()"/>
  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-11T10:57:25.460

采用`.bind( eventType [, eventData], handler(eventObject) )`

# php - 在csv php中为输出添加mysql列？

> ID：12837819
> 
> 赞同：0
> 
> 时间：2012-10-11T10:47:08.943
> 
> 标签：php, mysql, codeigniter, csv

我试图将表数据从 mysql 添加到 csv 并使用 php 将它们输出到浏览器。

PHP：

```
$rows = $t->db->query("SELECT * from Animals");
$output = fopen('php://output', 'w');
fputcsv($output, array('Column 1', 'Column 2', 'Column 3'));
while ($row = $rows->result_array()) fputcsv($output, $row); 
```

但我收到错误：

> 消息：数组到字符串的转换

在 while 循环所在的行上，我似乎看不出问题出在哪里。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:53:01.477

**[result_array()](http://codeigniter.com/user_guide/database/results.html)**返回所有结果，这是一个数组数组。

改变

```
while ($row = $rows->result_array()) fputcsv($output, $row); 
```

到

```
foreach ($rows->result_array() as $row) {
  fputcsv($output, $row);
} 
```

# wpf - WPF 中 MenuItem 列表的 DatGrid 绑定

> ID：12837821
> 
> 赞同：0
> 
> 时间：2012-10-11T10:47:13.267
> 
> 标签：wpf, xaml, binding, wpfdatagrid, model-binding

我在 WPF 中使用 DataGrid 来填充菜单项。

```
<DataGrid AutoGenerateColumns="False" Name="dataGrid1" CanUserAddRows="True" CanUserDeleteRows="True" ItemsSource="{Binding}" >
   <DataGrid.Columns>
     <DataGridTextColumn Width="*" Header="Menu Items" Binding="{Binding Path=MenuItem.Name}" />
   </DataGrid.Columns>
</DataGrid> 
```

我正在填充`DataGrid.DataContext`这样的

```
List<MenuItem> lst = GetValues();
dataGrid1.DataContext = lst; 
```

该列表在 上显示为空，`Datagrid`因为绑定不起作用。 `Binding="{Binding Path=MenuItem.Name}`这需要更改，以便当菜单项显示在 DataGrid 中时，我可以显示 Name 属性中的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:27:15.343

`Binding="{Binding Name}"`工作正常。感谢@Charleh

# jquery - 更改当前事件元素的 CSS

> ID：12837822
> 
> 赞同：0
> 
> 时间：2012-10-11T10:47:15.323
> 
> 标签：jquery, backbone.js

我在骨干中有一个悬停事件，如下所示：

事件：

```
'mouseover .1_select' : 'hover'
'mouseover .2_select' : 'hover' 
```

然后，我尝试更改已“悬停”的元素上的相同 CSS 值...

```
 hover: (e) ->
    $(this.el).css('background-position' : '0px -40px') 
```

我需要做的是获取事件“e”并从中找到我们悬停在哪个元素上并仅更新那个元素的css。

目前我可以看到自己为每个课程编写了两次函数，但我不想这样做 - 感觉很乱。例如，类发生了变化，但我需要更改的属性和值保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:51:29.670

使用`$(e.currentTarget)`而不是`$(this.el)`修改事件绑定到的事件的当前目标元素。感谢 jQuery currentTarget 跨浏览器规范化，你不必担心任何事情 :)

你可以使用`this.$el`而不是`$(this.el)`as`Backbone 0.9`来节省一些内存并保持你的代码更干净

# makefile - 只执行 makefile 的第一个命令

> ID：12837823
> 
> 赞同：9
> 
> 时间：2012-10-11T10:47:16.223
> 
> 标签：makefile

我有以下生成文件：

```
main.o: ServerSocket/main.cpp ../Shared/socket.h 
    g++ -c ServerSocket/main.cpp  -lstdc++

DriveInfo.o: ServerSocket/DriveInfo.cpp ServerSocket/DriveInfo.h ServerSocket/Consts.h
    g++ -c ServerSocket/DriveInfo.cpp  -lstdc++

ProcessInfo.o: ServerSocket/ProcessInfo.cpp ServerSocket/ProcessInfo.h ServerSocket/Consts.h
    g++ -c ServerSocket/ProcessInfo.cpp  -lstdc++

thread_pool.o: ServerSocket/thread_pool.cpp ServerSocket/thread_pool.h 
DriveInfo.o ProcessInfo.o thread_pool.o
server: main.o 
    g++ -o server main.o 
DriveInfo.o ProcessInfo.o thread_pool.o 
```

问题是只有该文件的一个命令正在执行，所以如果我想执行下一个<我必须删除或注释上一个命令。这个makefile有什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-11T10:50:43.313

默认情况下执行您提供的第一条规则。

您想创建一个执行您提供的所有规则的规则

```
all : main.o DriveInfo.o ProcessInfo.o thread_pool.o 
```

并将其放在 Makefile 的开头或调用它`make all`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T10:51:19.890

这是设计使然。您可以确定`make`要构建的目标：

```
make main.o DriveInfo.o 
```

将构建这两个目标。或者，如果您希望`make`默认构建所有（或部分）目标，您可以*在 Makefile 的开头*指定一条规则，说明：

```
all: main.o DriveInfo.o … 
```

现在，`make all`（或只是`make`）将构建所有依赖目标。`all`声明为[虚假目标](http://www.gnu.org/software/make/manual/html_node/Phony-Targets.html)以告知`make`它与实际存在的文件不对应也是一种好习惯。通过放入`.PHONY: all`Makefile 来做到这一点。

最后一点，名称`all`是任意的。您可以在此处使用任何其他名称，但这`all`是常规名称。重要的部分是它是 Makefile 中的*第一*条规则，如果您希望它是在`make`没有任何明确目标的情况下调用时执行的规则。

# c# - 基于索引的 WPF DataGrid 样式单元格

> ID：12837824
> 
> 赞同：0
> 
> 时间：2012-10-11T10:47:19.453
> 
> 标签：c#, wpf, xaml, datagrid, wpfdatagrid

我将 DataTable 绑定到 WPF DataGrid（DataGrid 上自动生成的列）。

我想为第一列、最后一列和最后一行中的所有单元格分配不同的样式。

如何做到这一点？

**编辑**

这里的问题是我没有定义属性名称的数据对象，并且 DataTable 列名称不是恒定的，因为它是动态的，具有自动生成的列。

AutoGeneratingColumn 事件 - e.DisplayIndex 始终为 -1，是否有从此处到 DataTable 的列和行索引的路径？

转换器 - 如何传递单元格的行和列索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:24:54.490

假设您将单元格样式和行样式存储在 XAML 资源中的某个位置，我建议您在代码隐藏中处理数据网格的两个事件，它们是：

```
int c = myDataTable.Rows.Count;
myDataGrid.AutoGeneratedColumns += (s, e) =>
{
   myDataGrid.Columns[myDataGrid.Columns.Count - 1].CellStyle = this.Resources["myCellStyle"] as Style;
   myDataGrid.Columns[0].CellStyle = this.Resources["myCellStyle"] as Style;
};
myDataGrid.LoadingRow += (s, e) =>
{
   int x = e.Row.GetIndex();
   if (c - 1 == x) e.Row.Style = this.Resources["myRowStyle"] as Style;
}; 
```

高温高压

# ruby - 在使用any_instance的情况下，如何让存根返回调用它的实例？

> ID：12837833
> 
> 赞同：4
> 
> 时间：2012-10-11T10:47:58.270
> 
> 标签：ruby, testing, rspec

例如，我有 A 类。

```
class A
end 
```

并希望在规范中从存根方法返回该类的实例。

```
A.any_instance.stub(:my_method).and_return(<here is the same instance on which my_method is called should got>) 
```

有可能在 RSpec 中做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:13:49.873

这将为您解决问题：

```
A.any_instance.stub(:my_method) do |*args|
    instance = RSpec::Mocks::space.send(:receivers).last
end 
```

我从这里的 rspec 代码中挖出了这个：[rspec github code](https://github.com/rspec/rspec-mocks/blob/master/lib/rspec/mocks/any_instance/recorder.rb)

PS：这完全取决于 rspec 实现，并且将来可能会改变。背景有点复杂，在这里解释一下。我将来可能会添加。

# linux-kernel - 仅使用 USB OTG 硬件作为 USB 主机

> ID：12837836
> 
> 赞同：1
> 
> 时间：2012-10-11T10:48:08.727
> 
> 标签：linux-kernel, usb, arm, driver, usb-otg

我正在将 Linux 移植到 ARM 平台。我正在开发的平台有一个 OTG 芯片，我想将驱动程序附加到该芯片上。它还没有 OTG 驱动程序。但是，它基于 EHCI 规范，所以我认为至少可以让主机控制器工作而无需编写全新的驱动程序。

我已将通用 EHCI HCD 平台驱动程序附加到设备，它似乎被检测到并初始化，但当我插入设备时没有中断进入。

在我花更多时间进行调试之前，我只想问一下，是否可以通过一些小的修改，在 OTG 设备上使用通用主机控制器驱动程序来仅支持 USB 主机？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:54:41.210

我的记忆太模糊无法回答这个问题所以我只能说我*认为*我从事的一个项目就是这样做的。如果我没记错的话，它是一个专有的 OTG 控制器，它实现了全套 EHCI 寄存器，只需对附加寄存器或位进行非常小的调整，以确定控制器是作为主机还是设备连接。尽管 USB 很复杂，但 EHCI 规范非常好用，并提供了一套相当清晰（并且行业硬件标准化！）的寄存器。如果您可以启动系统并主动转储或以其他方式查看此 EHCI 寄存器集，您应该能够很快确定您的主机控制器是否正在运行（例如，请参阅 FRINDEX 寄存器递增）以及是否检测到设备（检查相应 PORTSC 寄存器的位 0，当前连接状态）。就像我说的，寄存器集是硬件标准化的，因此只要您正确配置了 USBBASE 寄存器，驱动程序中用于转储寄存器的任何调试例程都应该可以正常工作。祝你好运！

# node.js - 节点：当错误未捕获时，async.foreach 静默失败，抛出异常

> ID：12837839
> 
> 赞同：2
> 
> 时间：2012-10-11T10:48:14.280
> 
> 标签：node.js, asynchronous, error-handling, promise

我将一些异步执行的“子”函数包装在 async.forEach 构造中（来自伟大的库：[https](https://github.com/caolan/async) ://github.com/caolan/async ）

当这些子函数之一因未捕获的异常而失败时，整个节点进程将挂起。（因为回调永远不会返回到 async.forEach 构造，async.forEach 仍然认为子函数很忙）

但是我会认为至少抛出的异常会冒泡，因为我没有在任何地方捕捉到它。有没有办法配置 async.forEach 如何处理这些异常？对此进行编程真的很困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:25:18.680

解决了。备查：

好的，所以我基本上有这个：

```
var async = require("async");
var cb = function(){
   //denote done to async.foreach
}
async.forEach(defaultFunctions,function(defaultFunc,cb){   
  defaultFunc(cb);
},callback); 
```

问题是，当某个 defaultFunction 抛出未捕获的异常时，该异常会被[`async.forEach`](https://github.com/caolan/async#eacharr-iterator-callback). 此外，没有办法在调用上下文中捕获它。

结果很严重：父节点进程完全停止，没有任何恍惚是什么原因造成的。

在被调用的上下文中（即：抛出异常的defaultFunction）我当然可以一丝不苟地尝试捕获所有异常，但是这些函数是热插拔的，最终可能有数百个，我不想给每个函数增加负担这些功能中有 100% 完全防错处理。

我发现的一个解决方案是使用 Promise（使用 Q 库 -> github.com/kriskowal/q ）将函数包装在：

```
var async = require("async")
var Q = require("q");
var cb = function(){
   //denote done to async.foreach
}
async.forEach(defaultFunctions,function(defaultFunc,cb){   
  var obj = {
    defaultFunc: defaultFunc
  } 
  return Q.ncall(obj.defaultFunc,obj)
    .then(function(result){
       return cb() ;
    }fail(function(err){
       return cb(err); //ANY thrown uncaught error in obj.defaultFunc will get 
                       //caught and changed to a correct callback as needed
                       //for async.forEach
    }
},callback); 
```

当然，现在我意识到 async.foreach 可以用 Q.promises 轻松完成，但那是另一回事了......

# c++ - stl map中的后序遍历

> ID：12837840
> 
> 赞同：5
> 
> 时间：2012-10-11T10:48:17.523
> 
> 标签：c++, gcc, stl, map

我在 gcc comper 上使用 stl 映射，它使用树来存储键值对。迭代器以中序方式前进，因此中序遍历非常容易。然而，我的输出要求之一是后序遍历。我被特别要求使用地图。有什么办法可以完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T10:53:26.913

没有标准方法可以访问`std::map`.

此外，该标准并不确切知道（或关心） a 的元素如何`map`在地图可能使用的任何内部树中排列。红黑树和 AVL 树都是 的有效实现`std::map`，根据实际使用的情况，您会得到不同的后序遍历。在实践中，我希望它总是 RB 或非常相似，但实现自由通知标准定义的接口。

简而言之，`std::map`它不是一棵树，它是一种可以（并且正在）使用树实现的抽象数据结构。

破解特定的实现可能是可能的，但最好不要这样做。如果您希望数据的树结构成为程序定义状态的一部分，您也许可以编写自己的树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:11:11.693

正如 Steve Jessop 所说，Map 是 c++ 提供的抽象数据结构，您不能以任何顺序更改存储在 map 中的元素的顺序，就像我们在 Tree 或 AVL 中可以通过 pre/post/in 顺序遍历一样。但您可以使用`std::greater`as your key 而不是`std::less`.

例如

```
std::map< std::string, int, std::greater<std::string> > my_map; 
```

或创建一个 VectordesiredOrder，它将在 map 中保留插入顺序的轨迹，一旦完成插入，只需在所需的**Order Vector**上按顺序执行您想要的前/后/任何排序操作，并使用 for 循环，您可以遍历向量并使用向量值作为 Map 的键来访问 Map 元素

例如

```
std::vector<std::string> desiredOrder;
std::map<std::string, int> myTree;

myTree["A"] = 0;
desiredOrder.push_back("A"); 
myTree["B"] = 0;
desiredOrder.push_back("B");
myTree["C"] = 0;
desiredOrder.push_back("C");
myTree["D"] = 0;
desiredOrder.push_back("D");

/*
Do whatever sorting you want to do here....
*/

for (int i = 0; i < desiredOrder.size(); ++i)
{
    const std::string &s = desiredOrder[i];
    std::cout << s << ' ' << myTree[s] << '\n';
} 
```

# android - 如何计算通过 WiFi/LAN 发送和接收的字节数？

> ID：12837846
> 
> 赞同：2
> 
> 时间：2012-10-11T10:48:32.923
> 
> 标签：android, network-traffic

有没有办法计算 Android 中通过 WiFi/LAN 消耗和传输的数据？我可以通过 和 方法查看移动互联网（3G、4G）的统计数据，`TrafficStats`但是WiFi 呢？`getMobileTxBytes()``getMobileRxBytes()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:11:57.707

**更新：**下面的原始答案很可能是**错误**的。我得到的 WiFi/LAN 数字太高了。仍然没有弄清楚为什么（似乎无法通过 WiFi/LAN 测量流量），但一个老问题提供了一些见解：[如何在 TrafficStats 中获取正确发送和接收的字节数？](https://stackoverflow.com/questions/12765562/how-to-get-the-correct-number-of-bytes-sent-and-received-in-trafficstats)

* * *

~~找到了我自己的答案。~~

首先，定义一个名为 getNetworkInterface() 的方法。我不确切知道“网络接口”是什么，但我们需要它返回的字符串令牌来构建包含字节数的文件的路径。

```
private String getNetworkInterface() {
    String wifiInterface = null;
    try {
        Class<?> system = Class.forName("android.os.SystemProperties");
        Method getter = system.getMethod("get", String.class);
        wifiInterface = (String) getter.invoke(null, "wifi.interface");
    } catch (Exception e) {
        e.printStackTrace();
    }
    if (wifiInterface == null || wifiInterface.length() == 0) {
        wifiInterface = "eth0";
    }
    return wifiInterface;
} 
```

接下来，定义 readLongFromFile()。我们实际上将有两个文件路径——一个用于发送的字节，一个用于接收的字节。此方法简单地封装读取提供给它的文件路径并将计数作为 long 返回。

```
private long readLongFromFile(String filename) {
    RandomAccessFile f = null;
    try {
        f = new RandomAccessFile(filename, "r");
        String contents = f.readLine();
        if (contents != null && contents.length() > 0) {
            return Long.parseLong(contents);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (f != null) try { f.close(); } catch (Exception e) { e.printStackTrace(); }
    }
    return TrafficStats.UNSUPPORTED;
} 
```

最后，构建返回通过 WiFi/LAN 发送和接收的字节数的方法。

```
private long getNetworkTxBytes() {
    String txFile = "sys/class/net/" + this.getNetworkInterface() + "/statistics/tx_bytes";
    return readLongFromFile(txFile);
}

private long getNetworkRxBytes() {
    String rxFile = "sys/class/net/" + this.getNetworkInterface() + "/statistics/rx_bytes";
    return readLongFromFile(rxFile);
} 
```

现在，我们可以通过像上面的移动互联网示例那样来测试我们的方法。

```
long received = this.getNetworkRxBytes();
long sent = this.getNetworkTxBytes();

if (received == TrafficStats.UNSUPPORTED) {
    Log.d("test", "TrafficStats is not supported in this device.");
} else {
    Log.d("test", "bytes received via WiFi/LAN: " + received);
    Log.d("test", "bytes sent via WiFi/LAN: " + sent);
} 
```

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:42:14.357

（这实际上是对您答案的评论，没有足够的分数来真正评论，但是......） `TrafficStats.UNSUPPORTED`并不一定意味着该设备不支持读取 WiFi 流量统计信息。对于我的三星 Galaxy S2，包含统计信息的文件在禁用 WiFi 时不存在，但在启用 WiFi 时有效。~~

# c# - 从 App.xaml.cs 访问不同页面的 MediaElement 控件

> ID：12837847
> 
> 赞同：0
> 
> 时间：2012-10-11T10:48:37.673
> 
> 标签：c#, .net, wpf, windows-8, windows-runtime

我有一个`MediaElement`控件`Media.xaml`，我想像这样访问`App.xaml.cs`它：

```
private void OnSuspending(object sender, SuspendingEventArgs e)
{
    var deferral = e.SuspendingOperation.GetDeferral();
    //Media.MediaElement.Pause();
    deferral.Complete();
} 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:08:52.827

首先，我添加`x:FieldModifier="Public"`到`MediaElement`：

```
<MediaElement Name="meMedia" x:FieldModifier="Public"/> 
```

然后，将此代码添加到`App.xaml.cs`：

```
if (rootFrame.Content.GetType.Name == "Media") {rootFrame.Content.mc.Pause();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:08:36.093

您可以使用以下代码访问当前的媒体页面并暂停其 MediaElement：

```
var frame = (Frame)Window.Current.Content;
var page = frame.Content as Media;
if (page != null && page.MediaElement.CanPause) page.MediaElement.Pause(); 
```

但是，如果您的意图是在用户切换到另一个应用程序时暂停播放媒体，则应使用[Window.Current.CoreWindow.VisibilityChanged](http://msdn.microsoft.com/library/windows/apps/windows.ui.core.corewindow.visibilitychanged.aspx)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T10:54:14.037

您可以创建一个公共属性：

媒体.xaml：

```
<MediaElement x:Name="mediaElement" ... /> 
```

媒体.xaml.cs：

```
public MediaElement
{
    get { return mediaElement; }
} 
```

* * *

我不知道您的程序结构的详细信息，但是应该有一种方法可以获取当前活动的 Media 实例。如果您确实没有这样的引用（并且如果也只有一个 Media 实例），则一种解决方法可能是创建一个静态实例访问器属性：

媒体.xaml.cs：

```
public static Media Instance { get; private set; }

// constructor
public Media()
{
    ...
    Instance = this;
} 
```

现在您可以在 App.xaml.cs 中编写：

```
Media.Instance.MediaElement.Pause(); 
```

# wpf - 如何调试 Visual Studio 2012 实例设计时

> ID：12837848
> 
> 赞同：14
> 
> 时间：2012-10-11T10:48:43.740
> 
> 标签：wpf, visual-studio, visual-studio-debugging, design-time, markup-extensions

我正在开发 WPF MarkupExtension 并在设计时遇到错误。使用 Visual Studio 2010 的早期版本，可以启动 Visual Studio 2010 的第二个实例并附加到已运行实例的进程，设置断点和调试设计时行为。

但是，在 Visual Studio 2012 中，我也可以附加到另一个 Visual Studio 2012 的进程，但是在第二个实例中没有加载任何符号，因此我无法像使用 Visual Studio 2010 那样调试设计时间。

如何让这个调试器运行？

**我尝试过的事情：**

*   “devenv.exe /RootSuffix Exp”技巧没有成功
*   始终以管理员身份执行
*   加载所有或默认符号
*   使用和不使用本机代码进行调试（附加进程）
*   使用和不使用 .NET 4 代码进行调试（附加进程）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T15:37:51.900

在 Visual Studio 2012 中，WPF 设计器在单独的进程中运行。尝试摆弄该过程。应该很容易找到进程名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-27T09:50:56.530

该过程称为 XDesProc，它是使用每个新的预览窗口创建的。因此：要调试预览窗口，请使用相同的解决方案打开 Visual Studio 2012 的第二个实例，设置断点并附加到 XDesProc。建议只打开一个预览窗口以附加到正确的进程。否则，请使用[Process Explorer](https://en.wikipedia.org/wiki/Process_Explorer)查找正确的进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-22T20:22:09.643

确保您将“启用/禁用项目代码”切换设置为“启用”...在 VS/Blend 2015 中，它是 XAML 编辑器下方的一个小图标， 如此处[所示](https://i.stack.imgur.com/BxQTs.png)。

如果它被禁用，这可能是您的设计时实例似乎无法正常工作的原因。

此外，如果它被禁用并且您尝试使用第二个 VS 实例进行调试，那么当您附加到 XDesProc 时，您在代码隐藏中设置的任何断点都会报告它们“当前不会被命中。[因为]没有符号被为此文档加载”。您可能认为您需要以某种方式加载符号，但如果您打开“模块”窗口尝试这样做，您甚至不会在列表中看到您的模块。

由于此设置被禁用，我在这个问题上浪费了几个小时。希望这可以帮助其他人不这样做。因此，我将在一些相关问题上发布此内容。

顺便说一句，James McNellis[在其中一个相关问题上](https://stackoverflow.com/questions/11738436/vs2012-blend-5-debugging-an-exception-only-occurring-in-design-view)对这个调试过程进行了很好的描述。

# android - 水平菜单

> ID：12837860
> 
> 赞同：5
> 
> 时间：2012-10-11T10:49:09.207
> 
> 标签：android, android-layout, android-custom-view

我想在 android中创建**水平菜单。**Android 支持垂直扩展的可扩展列表视图，但我想水平扩展菜单。请参考图片

![在此处输入图像描述](../Images/b1162fa19c1ca13b687890e1054f537c.png)

描述：

在图像中 Menu1,menu2,menu3 是主菜单，s1,s2,s3 是菜单 1 的子项。如果我单击主菜单，它的子项必须展开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:19:28.683

您可以将子菜单放在 LinearLayout 中，并在 onClickListener 中使用 View.VISIBLE/View.GONE 添加播放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:00:39.153

这是一个简单的例子。你应该自己完成它。

在 xml 中。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/attachments_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <Button
        android:id="@+id/btn_menu1"
        android:layout_width="0dp"
        android:layout_height="50dp" 
        android:text="Menu1"
        android:layout_weight="1"
        />
    <LinearLayout
        android:id="@+id/subview_menu1"
        android:layout_width="0dp"
        android:layout_height="50dp" 
        android:layout_weight="2"
        android:visibility="gone"
        >
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent" 
            android:text="S1"
            android:layout_weight="1"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent" 
            android:text="S2"
            android:layout_weight="1"
            />
        <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent" 
            android:text="S3"
            android:layout_weight="1"
            />
    </LinearLayout>
    <Button
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:text="Menu2" 
        android:layout_weight="1"
        />
    <Button
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:text="Menu3" 
        android:layout_weight="1"
        />
    </LinearLayout> 
```

在 btn_menu1 OnClickListener

```
public void onClick(View v) {
    if (subview_menu1.isShown()) {
        subview_menu1.setVisibility(View.GONE);
    }
    else{
        subview_menu1.setVisibility(View.VISIBLE);
    }
} 
```

# java - 如何编辑 .class 文件以修复 Java 7 中的 validateTree 错误

> ID：12837862
> 
> 赞同：1
> 
> 时间：2012-10-11T10:49:13.140
> 
> 标签：java, swing, java-7, java-6

我的一个朋友提供 Java 小程序，自从他的客户迁移到 Java 7 后，他们开始遇到这个问题： [Java 7.x 中的 validateTree 不起作用（在 Java 6.x 中很好）](https://stackoverflow.com/questions/9758069/validatetree-in-java-7-x-doesnt-work-in-java-6-x-was-fine)

解决方案似乎是将调用包装`validateTree`为：

```
synchronized(getTreeLock()) {
     validateTree();
} 
```

**我没有源 .java 文件。**

*   是否有 Java ByteCode Editor+Decompiler 可以让我在纯文本 Java 中编辑这些行？
*   如果我必须在字节码中编辑 .class 文件，说明是什么？

* * *

我对文件的看法`jd-gui`（虽然不允许我编辑文件）：

```
public final class XApplet extends JApplet
  implements ActionListener
public void init()
{
  ...
  validateTree();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:56:06.733

您可以使用[JD](http://java.decompiler.free.fr/)或[JAD](http://www.varaneckas.com/jad/)等 Java 反编译器获取反编译的源代码，然后在代码中解决问题并重新编译您的类。您需要反编译代码，而不仅仅是显示它。

PD：如果他是你的朋友，你可以获得源代码，不是吗？会更容易...

# html - IE9 不断使用 IE7 标准文档模式不管我怎么尝试

> ID：12837869
> 
> 赞同：21
> 
> 时间：2012-10-11T10:50:04.877
> 
> 标签：html, internet-explorer-9

这让我发疯。

不管我怎么尝试，Internet Explorer 都在切换到 IE7 标准文档模式。我尝试使用 HTML5 样板和 HTML5 重置（其自己的网站进入 Quirks 模式）将我的代码剥离为空，以使其正常运行。

我还添加了元标记，无论如何都应该强制 IE 进入最新版本，但是根据 W3C，所做的一切都是使我的标记无效。

这就是我所拥有的；我错过了什么？

```
<!doctype html>

<!--[if IE 7 ]> <html class="ie7> <![endif]-->
<!--[if IE 8 ]> <html class="ie8> <![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <p>Test text</p>        
</body>
</html> 
```

**编辑**

我通过以下建议找到了解决方案。这个建议没有奏效，但它确实让我找到了答案。这可能不是 100% 适合所有人，因为它在`body`标签上强加了一个类而不是`html`.，但它适用于我，似乎适用于 IE。

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="css/style.css">
</head>
<!--[if IE 7 ]> <body class="ie7> <![endif]-->
<!--[if IE 8 ]> <body class="ie8> <![endif]-->
<!--[if gt IE 8]><!--><body><!--<![endif]-->
<p>Test text</p>        
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T10:51:41.097

从[这个线程](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode)

X-UA-Compatible 元标记必须直接出现在元素中的标题之后。不能在它之前放置其他元标记、css 链接和 js 脚本调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-11T11:21:00.850

我通过较早的建议找到了解决方案。这个建议没有奏效，但它确实让我找到了答案。这可能不是 100% 适合所有人，因为它在`body`标签上强加了一个类而不是`html`.，但它适用于我，似乎适用于 IE。

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="css/style.css">
</head>
<!--[if IE 7 ]> <body class="ie7> <![endif]-->
<!--[if IE 8 ]> <body class="ie8> <![endif]-->
<!--[if gt IE 8]><!--><body><!--<![endif]-->
<p>Test text</p>        
</body>
</html> 
```

**编辑**

我实际上已经停止使用上述内容，现在`html`按照 HTML5BP 中的建议将我的 IE 特定类添加到元素中。

另请注意，您可能希望`chrome=1`从元标记中删除，因为 Chrome Frame 即将被杀死。但是对于那些仍然有人使用它的罕见情况，保留它并没有什么坏处。

另一件我认为没有被提及的检查是 IE 中可能最烦人的设置的状态 - “在兼容性视图中显示 Intranet 站点”。如果您运行一个名称如`http://mytestserver:8888`IE 的测试服务器，则无论您在文档头中做什么，都会认为它是一个 Intranet 站点并切换模式。

此设置在我公司的组策略中启用，因为我们古老的 Sharepoint Intranet 实际上依赖于它。非常适合旧垃圾，但对于实际上要遵守标准的新东西来说却很糟糕。

如果您有任何旧站点，请关闭该 f***er`Tools > Compatibility View Settings`并准备手动切换到它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T10:57:23.333

有时 IE 在 Intranet 站点上的行为特别糟糕，无论`<meta>`头部的行如何，都会迫使它们进入兼容模式。但是，您可以通过将以下内容添加到 Web 配置中，使服务器向暴力 IE 发送标头：

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="X-UA-Compatible" value="IE=Edge" />
      </customHeaders>
    </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-08T19:32:36.223

Umesh P 在这个线程上的回答对我有用。

[http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/ie9-always-rendering-pages-in-ie7-compatibility/c0177b44-3950-e011-8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/ie9-always-rendering-pages-in-ie7-compatibility/c0177b44-3950-e011-8dfc-68b599b31bf5)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-25T08:39:03.400

保持

```
<!doctype html> 
```

要成为页面源的第一行，并且 X-UA-Compatible 元标记必须是倾斜标记的相邻下一个兄弟。

```
<meta charset="utf-8">
<title></title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T01:55:12.003

我也遇到了 ie10 对本地主机上的站点强制使用 IE7 标准模式的问题。添加/使用名称中包含一个点的虚拟主机（local.x）解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T14:21:46.390

Stuart 发布的链接对我有用，因为它与本地网站设置为兼容模式有关。一旦我从兼容模式列表中删除了内网网站，页面就会根据元标记进入正确的 IE=9 模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-11T22:49:18.090

尽管我尝试了所有其他方法，但当 IE8 以 IE7 标准文档模式呈现时，我已经使用以下方法解决了这个问题。在 doctype 声明之前添加：

```
<!--[if IE ]><![endif]--> 
```

所以生成的 HTML 看起来像这样：

```
<!--[if IE ]><![endif]-->
<!doctype html>
<!--[if IE 7]><html class="lt-ie8"><![endif]-->
<!--[if IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
    <title>Page title here</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/> 
```

其他人将不得不评论*为什么*这似乎有效——这对我来说是个谜。

# ios - AfNetworking 错误发布

> ID：12837873
> 
> 赞同：1
> 
> 时间：2012-10-11T10:50:25.130
> 
> 标签：ios, json, ios5, afnetworking

我最近开始在我的项目中使用 AfNetworking。我创建了一个 AFClient，实现了所有的参数，一切都是为了**GET**方法。但是，我无法创建**POST**方法：有我的代码：

```
 NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:
                                @"TexttoInsert", @"question",
                                id,@"user_id",
                                nr1,@"number1",
                                nr2, @"number2",
                                nil];

        [[MYClient sharedInstance] postPath:@"insert" parameters:params success:^(AFHTTPRequestOperation *operation, id JSON) {

                                            NSLog(@"%@", JSON);

                                       }
                                       failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                           NSLog(@"RequestOperation:%@",operation);  
                                           NSLog(@"Error:%@",error);  
                                       }]; 
```

我收到此错误，无法解决。

```
Error Domain=AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 400" UserInfo=0x6cb6330 {NSLocalizedRecoverySuggestion={"success":false,"error":400,"message":"Bad Request"}, 

AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0x6a893e0>, NSErrorFailingURLKey=http://myMainUrl/insert, NSLocalizedDescription=Expected status code in (200-299), got 400, AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest http://myMainUrl/insert>} 
```

# c# - 仅为 Excel VSTO 注册快捷键

> ID：12837875
> 
> 赞同：4
> 
> 时间：2012-10-11T10:50:35.433
> 
> 标签：c#, excel, vsto, keyboard-shortcuts, excel-addins

在我的 VSTO 项目（*用于 Excel*）中，我想将快捷键（*3 个键的键盘组合*）连接到 C# 代码中的函数。例如，当我按下`CTRL`++`SHIFT`时，应该调用`C`一个函数。`MyShortCutFuction`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:52:30.150

您可以[将 VSTO 程序集公开给 COM，以便可以从 VBA 宏](http://msdn.microsoft.com/en-us/library/bb386306.aspx)( ***ComVisible*** ) 调用它。这需要几个手动步骤，但是[一旦您从 COM 访问程序集](http://blogs.msdn.com/b/pstubbs/archive/2004/12/31/344964.aspx)，您就可以分配[**Macro Shortcut Keys**](http://www.wiseowl.co.uk/blog/s139/short-cut-key-macros-excel.htm)。

另一种可能性是直接连接到[Win32 API 以跟踪键盘事件](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)（***windows subclassing***）。[这是使用`WH_KEYBOARD_LL`](https://gist.github.com/471698)Win32 API 的参考实现。

另请参阅[有关 VSTO 中键盘捕获方法的相关 SO 帖子](https://stackoverflow.com/a/2909302/175679)。

# c++ - OpenCV：convertTo 返回白色图像（有时）

> ID：12837876
> 
> 赞同：13
> 
> 时间：2012-10-11T10:50:36.370
> 
> 标签：c++, opencv

我对 OpenCV 比较陌生，我偶然发现了一个问题。我有一个输入图像，想将它从 CV_8U 类型转换为 CV_32F。

对于某些图像，它可以正常工作，`input.convertTo(output, CV_32F)`但对于其他图像输出只会给出一个完全白色的图像。

通道数、暗淡和深度相同。问题是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T02:20:14.527

我相信结果是正常的。

当您使用`convertTo`从 CV_8U1 到 CV32F1 时，一个像素值，例如 255 变为 255.0。但是当您尝试“imshow”生成的图像时，该命令要求所有像素值都在 0.0 和 1.0 之间。这就是为什么在不重新缩放图像的情况下，图像看起来全白。

因此，正如 zzz 指出的那样（谢谢），这将起到作用。

```
input.convertTo(output, CV_32F, 1.0/255.0) 
```

# typo3 - 将多个属性映射到 FCE 中的 img 标签

> ID：12837877
> 
> 赞同：0
> 
> 时间：2012-10-11T10:50:39.830
> 
> 标签：typo3, typoscript, templavoila

我正在使用 TemplaVoila 开发一个typo3 网站。

我想将图像“src”属性和“alt”属性映射到 My FCE 中的图像标签。我试图通过将 src 字段（元素预设：图像字段）和 alt 字段（元素预设：纯输入文本）作为属性来进行映射。

但这给了我一个错误的结果。获得结果的标记是：

```
 <img src="&lt;img src=" typo3temp="" pics="" 2a0197a437.jpg"="" width="200" height="113" alt> "" alt="alternate text" />; 
```

如何正确映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:48:42.743

我明白了... :) 将 img 标记映射到容器字段并在其下添加 src、alt 字段作为属性字段并映射它。

# javascript - 将坐标值绑定到 Openlayers 中的 html 文本框

> ID：12837887
> 
> 赞同：0
> 
> 时间：2012-10-11T10:51:06.617
> 
> 标签：javascript, jquery, openlayers

所以，我正在编写一个代码，当用户点击地图时。它检索坐标值，并尝试将其绑定（显示其值）在 texbox 中。我已经对其进行了测试，坐标和单击事件有效，但我想将其绑定到文本框存在问题。对于如何解决这个问题，有任何的建议吗？

编码：

```
<script type="text/javascript" src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript">
        OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {
                    defaultHandlerOptions: {
                        'single': true,
                        'double': false,
                        'pixelTolerance': 0,
                        'stopSingle': false,
                        'stopDouble': false
                    },

                    initialize: function (options) {
                        this.handlerOptions = OpenLayers.Util.extend(
                                {}, this.defaultHandlerOptions
                            );
                        OpenLayers.Control.prototype.initialize.apply(
                                this, arguments
                            );
                        this.handler = new OpenLayers.Handler.Click(
                                this, {
                                    'click': this.trigger
                                }, this.handlerOptions
                            );
                    },

                    trigger: function (e) {
                        var lonlat = map.getLonLatFromPixel(e.xy);

                        alert("You clicked near " + lonlat.lat + " N, " +
                                                      +lonlat.lon + " E");
                        $('#latlon').value = lonlat;
                    }
                });
    </script> 
```

以及我如何定义文本框：

```
 <input type="text" name="coordinates" id="latlon" value="" Font-Names="Tahoma" Font-Size="10pt" Width="95%" /> 
```

错误信息：

```
Uncaught TypeError: Cannot set property 'value' of null 
OpenLayers.Control.Click.OpenLayers.Class.trigger 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:56:20.587

您正在使用未定义的`value`属性。`$('#latlon')`尝试使用

`$('#latlon').val(lonlat);`因为这就是它在 jQuery 中的工作方式。

有关两者之间差异的更多详细信息`value`，`val()`请参阅不同的堆栈溢出问题。

[jquery 函数 val() 不等同于 "$(this).value="?](https://stackoverflow.com/questions/4524702/jquery-function-val-is-not-equivalent-to-this-value)

在包含 Openlayers.js 文件之前添加以下行，这会将 jquery 包含到您的代码中：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script> 
```

# ruby - 使用 setter 和 getter 的动态方式

> ID：12837889
> 
> 赞同：1
> 
> 时间：2012-10-11T10:51:08.047
> 
> 标签：ruby, metaprogramming, accessor

你好我的问题很简单我有简化的代码看起来像这样

```
foo = OpenStruct.new
bar = OpenStruct.new

mappings.each do |k,v|
 eval "foo.#{k} = bar.#{v}"
end 
```

我正在尝试修复这种`eval`用法而不是使用它:) 找出正确的部分，但我不知道如何分配给左边的部分。要访问 getter，您可以编写。

```
 bar.send(v.to_sym)
 # not to sure how to access setter for foo 
```

我正在使用**Ruby 1.8.7**，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:04:52.490

不确定 1.8.7，但在较新的红宝石中这有效：

```
foo.send("#{k}=".to_sym, bar.send(v.to_sym)) 
```

此外，在较新的版本中，也`send`接受字符串，因此您可以省略`.to_sym`.

# java - JAVA：无法从 401 读取正文

> ID：12837891
> 
> 赞同：5
> 
> 时间：2012-10-11T10:51:25.307
> 
> 标签：java, rest, post, httpurlconnection, http-status-code-401

我正在使用java `HttpUrlConnection`（使用POST）来制作一个非常简单的rest客户端。服务器接受并回复`aplication/xml`。即使对于错误情况（状态代码 3xx、4xx、5xx），它也会发送 xml 有效负载 - 正如此服务器实现所指定的那样 - 我可以从 errorStream 成功获取。

这对于服务器回复 401 时预期的所有错误情况都有效。在这种情况下，只有 errorStream 为空，并且在尝试从 InputStream 读取时抛出异常。

我使用 Wireshark 捕获了请求，并正确收到了响应。问题是在java端得到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:25:32.837

一个共鸣实际上不需要有一个主体，也不需要一个 0 字节的主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:50:29.983

使用`HTTPClient`来自 Apache 的问题解决了。对于成功和错误，获取输入流（具有响应主体）的方法始终相同：

```
httpresponse.getEntity().getContent() 
```

# c# - 在 Windows (xp) 中使用 C# 或 C 进行以太网帧或 MAC 广播

> ID：12837892
> 
> 赞同：2
> 
> 时间：2012-10-11T10:51:28.950
> 
> 标签：c#, windows, networking, broadcast, ethernet

看完之后：

[如何使用 C# 发送原始以太网数据包？](https://stackoverflow.com/questions/3964013/how-send-raw-ethernet-packet-with-c)

我还有问题：

是否可以在第 2 层使用 C# 或 C 进行广播或发送您自己的以太网帧，而无需安装 winpcap 或/并且无需操作已安装的驱动程序？

至于广播，我可以使用`arp -a`命令运行一个进程并解析它的输出，也许它会起作用。

但仍然是以太网数据包的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T00:32:14.727

你不能......至少不能像你问的那样直接。

Windows 不提供直接访问第 2 层的 API。为此，您需要编写 NDIS 协议驱动程序。如果您有兴趣承担这项任务，请从这里开始：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff557050 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff557050(v=vs.85).aspx)

对于类似实用程序的软件，最好的办法是捆绑您链接到的问题中列出的驱动程序之一。

# python - Python字典在解释器中重新排列？

> ID：12837894
> 
> 赞同：2
> 
> 时间：2012-10-11T10:51:38.963
> 
> 标签：python, dictionary, interpreter

> **可能重复：**
> [Python 字典，保持键/值与声明的顺序相同](https://stackoverflow.com/questions/1867861/python-dictionary-keep-keys-values-in-same-order-as-declared)

当我注意到我在我的 python 解释器中创建的字典返回了意想不到的结果时，我正在做一些关于[代码学院](http://www.codeacademy.com)的练习。

我正在使用python2.7，当我输入时：

```
>>> dict_a = {'x':9, 'y':10, 'z':20} 
```

我称之为：

```
>>> dict_a
{'y':10, 'x':9, 'z':20} 
```

所以我输入：

```
>>> dict_b = {'a':1, 'b':2, 'c':3}
>>> dict_b
{'a':1, 'c':3, 'b':2} 
```

我想我在这里错过了一些基本的东西，但是，在做了一些搜索之后，我不知道是什么？如果有人可以帮助解释为什么会发生这种情况，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T10:52:45.010

字典未排序。它们显示的顺序是由内部逻辑决定的，不会与您定义它们的顺序相对应。但是，由于您不是按顺序访问字典，而是按键访问字典，因此这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:54:21.710

This is a normal behaviour, the dictionary does not have an inherent internal order, so it is perfectly fine.

# iphone - 我将文件保存在 xcode 中，该文件的整个字体颜色变为黑色

> ID：12837900
> 
> 赞同：0
> 
> 时间：2012-10-11T10:51:53.660
> 
> 标签：iphone, objective-c, ios, xcode

我认为我的文件已损坏，我单击保存文件，现在它没有显示彩色字体，因为 xCode 显示 bt 其他文件 r 彩色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:54:23.747

别担心，清理你的应用程序或构建它，应该没问题。或者重新启动你的xcode，一切都会好起来的:) ...或者检查你的.m和.h文件..

# jquery - 读出一个值 在表格中并显示 同名

> ID：12837905
> 
> 赞同：0
> 
> 时间：2012-10-11T10:52:24.490
> 
> 标签：jquery, css, forms, option

我有一个带有一些选项的选择框。如果选中，每个选项都应该显示一个单独的 div。

当然，我可以为每个选项名/值这样做：

**html:**

```
<form class="floatleft">
      <select size="1" id="stadtauswahl" name="Standortauswahl">
        <option value="" style="color: #666;">&nbsp;&nbsp;&nbsp;Bitte wählen Sie&nbsp;&nbsp;&nbsp;</option>
        <option value="/kontakt/hauptsitz/">&nbsp;&nbsp;&nbsp;Wiesbaden</option>
        <option value="/kontakt/berlin/">&nbsp;&nbsp;&nbsp;Berlin</option>
        <option value="/kontakt/bad-harzburg/">&nbsp;&nbsp;&nbsp;Bad Harzburg</option>
        <option value="/kontakt/koeln/">&nbsp;&nbsp;&nbsp;Köln</option>
        <option value="/kontakt/hamburg/">&nbsp;&nbsp;&nbsp;Hamburg</option>
        <option value="/kontakt/muenchen/">&nbsp;&nbsp;&nbsp;München</option>
        <option value="/kontakt/stuttgart/">&nbsp;&nbsp;&nbsp;Stuttgart</option>
      </select>
    </form> 
```

**查询：**

```
$(document).ready( function() {
  $('#stadtauswahl').bind('change', function (e) { 
    if( $('#stadtauswahl').val() == '/kontakt/hauptsitz/') {
      $('#wiesbaden').slideToggle();
    }
    else{
      $('#wiesbaden').slideUp();
    }         
  });
}); 
```

**但是**我想让jquery读出名字，然后选择同名的div来显示。

有人能帮我吗？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:09:16.110

请尝试使用此代码...

```
$(document).ready( function() {
    $('#stadtauswahl').bind('change', function (e) { 
        $(this).find("option").each(function() {
            var text = $(this).text().toLowerCase().split(" ").join("").trim();
            console.log("'" + text + "'");
            if ($(this).is(":selected")) {
                $('#' + text).slideDown();
            } else {
                $('#' + text).slideUp();
            }
        });
    });
});​ 
```

它将为每个选项查找一个 div（从文本中删除所有空格），`slideUp()`并对所有未选择的选项执行 a ，对选定的选项执行 a `slideDown()`。

**笔记**

理想情况下，你会给每个 div 显示/隐藏一个类，你可以用它来隐藏它们，然后只显示一个相关的就变得更容易了。此外，除非有理由将路径作为选择值，否则最好使用 div ID 作为值，因此您不必依赖其中没有无效字符的文本（对于 ID）。

拥有一个具有 url 参数和 text 参数的对象数组可能更有意义，并且您将每个对象的索引保存在选择选项中。这意味着您可以简单地查看所选选项的值并使用它从数组中获取所有相关信息。

只是选项和想法 - 上面的脚本会按照你的要求做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:01:34.713

**更新：**

jsFiddle：http: [//jsfiddle.net/TV9dY/](http://jsfiddle.net/TV9dY/)

**JS：**

```
 $(document).ready( function() {

  $('#stadtauswahl').bind('change', function (e) {

    if( $('#stadtauswahl').find(":selected").text() != '') {

      $('#wiesbaden').slideToggle();
        $('#myDiv').remove();
$('#stadtauswahl').after('<div id="myDiv">' + $('#stadtauswahl').find(":selected").text() + '</div>');

    } else {

      $('#wiesbaden').slideUp();

    }         

  });

}); 
```

未经测试，但应该可以工作。

# java - 如果 Spring MVC 控制器方法不返回值，返回什么？

> ID：12837907
> 
> 赞同：147
> 
> 时间：2012-10-11T10:52:34.693
> 
> 标签：java, jquery, spring-mvc

我正在使用 jQuery`$.getJSON()`对我的简单 Spring MVC 后端进行异步调用。大多数 Spring 控制器方法如下所示：

```
@RequestMapping(value = "/someURL", method = RequestMethod.POST)
public @ResponseBody SomePOJO getSomeData(@ModelAttribute Widget widget,
    @RequestParam("type") String type) {
    return someDAO.getSomeData(widget, type);
} 
```

我设置了一些东西，以便每个控制器返回`@ResponseBody`JSON，这是客户端所期望的。

但是当一个请求不应该向客户端返回任何内容时会发生什么？我能有......吗：

```
@RequestMapping(value = "/updateSomeData" method = RequestMethod.POST)
public @ResponseBody void updateDataThatDoesntRequireClientToBeNotified(...) {
    ...
} 
```

如果不是，这里使用的适当语法是什么？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-10-11T12:43:16.973

你可以返回 void，然后你必须用 @ResponseStatus(value = HttpStatus.OK) 标记方法你不需要 @ResponseBody

```
@RequestMapping(value = "/updateSomeData" method = RequestMethod.POST)
@ResponseStatus(value = HttpStatus.OK)
public void updateDataThatDoesntRequireClientToBeNotified(...) {
    ...
} 
```

只有 get 方法隐式返回 200 状态代码，所有其他方法都执行以下三件事之一：

*   返回 void 并用`@ResponseStatus(value = HttpStatus.OK)`
*   返回一个对象并用`@ResponseBody`
*   返回一个`HttpEntity`实例

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-10-11T12:42:26.063

您可以简单地返回带有适当标头的 ResponseEntity：

```
@RequestMapping(value = "/updateSomeData" method = RequestMethod.POST)
public ResponseEntity updateDataThatDoesntRequireClientToBeNotified(...){
....
return new ResponseEntity(HttpStatus.OK)
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-13T18:41:01.813

您可以返回“ResponseEntity”对象。在构造响应对象（包含响应正文和 HTTP 状态代码）和从响应对象中获取信息时，使用“ResponseEntity”对象都非常方便。

getHeaders()、getBody()、getContentType()、getStatusCode() 等方法使读取 ResponseEntity 对象的工作变得非常容易。

您应该使用带有 http 状态代码 204（无内容）的 ResponseEntity 对象，该对象专门用于指定请求已被正确处理并且响应正文故意为空白。使用适当的状态码来传达正确的信息非常重要，尤其是当您正在制作一个将被多个客户端应用程序使用的 API 时。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-19T05:53:14.583

是的，您可以将 @ResponseBody 与`void`返回类型一起使用：

```
@RequestMapping(value = "/updateSomeData" method = RequestMethod.POST)
@ResponseBody
public void updateDataThatDoesntRequireClientToBeNotified(...) {
    ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-19T04:35:11.420

返回 void 并没有错，`@ResponseBody`您应该提出`POST`请求。

当其他人提到成功状态时，使用 HTTP 状态代码来定义异常处理程序例程中的错误。您拥有的普通方法将返回`200`您想要的响应代码，然后任何异常处理程序都可以返回错误对象和不同的代码（即`500`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-12T15:36:19.360

但是随着你的系统在规模和功能上的增长......我认为总是返回一个 json 并不是一个坏主意。更多的是建筑/“大规模设计”问题。

您可以考虑始终返回具有两个已知字段的 JSON：代码和数据。其中 code 是一个数字代码，指定要完成的操作是否成功，而 data 是与请求的操作/服务相关的任何附加数据。

来吧，当我们使用后端服务提供者时，可以检查任何服务以查看它是否运行良好。

所以我坚持，不要让弹簧管理这个，公开混合返回操作（一些返回数据其他什么都没有......）..确保你的服务器公开一个更同质的接口。在一天结束时更简单。

# javascript - 如何使用 jQuery 更改父元素的背景颜色？

> ID：12837908
> 
> 赞同：0
> 
> 时间：2012-10-11T10:52:40.370
> 
> 标签：javascript, jquery, click, parent, parent-child

我要做的是在单击提交按钮时更改父元素的背景颜色。

所以因为我已经尝试过这段代码：

```
 $("input.submit").click(function(){
                var className = $(this).parent().attr("class");
                $(className).animate({backgroundColor: '#FFB95E'}, 1000);
                $(className).animate({borderColor: '#C97200'}, 1000);
            }); 
```

但我永远无法获得父元素的类名。有几个提交按钮都具有不同的父元素，这就是我需要这样做的原因。

有人可以帮忙吗？

非常感谢

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:17:25.127

您的标记示例将有助于解决此问题，但您似乎使用正确的代码来获取父元素。

我建议您使用像 firebug 这样的调试器来查看是什么`$(this).parent()[0]`，或者`alert($(this).parent()[0]);`如果它不返回`"object"`，您就知道如果您确实有父元素，则您没有父元素，使用`alert($(this).parent()[0].outerHTML);`来查看是否有正确的元素。

最后`$(className)`是多余的并且没有任何用处，只需将元素命令与下面的 getter 链接起来，或者直接使用变量，它已经是一个 jQuery 对象。

```
$(this).parent().animate({backgroundColor: '#FFB95E'}, 1000).animate({borderColor: '#C97200'}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:55:07.623

为什么不简单

```
$(this).parent()
       .animate({backgroundColor: '#FFB95E',
                 borderColor: '#C97200'}, 1000); 
```

您不需要获取父类来设置背景颜色。但是，如果我没记错的话，默认情况下颜色动画不起作用，您将需要一些插件来处理过渡

# php - 我无法使用 .innerHTML 更新价格

> ID：12837913
> 
> 赞同：0
> 
> 时间：2012-10-11T10:52:54.510
> 
> 标签：php, javascript, innerhtml, getelementbyid

我无法获得自动更新的价格。

制作唯一的ID；对于我使用的价格：

```
id="target_1_<?php echo $product['product_id']; ?>" 
```

对于我使用的选择菜单：

```
id="select_<?php echo $product['product_id']; ?>" 
```

这是html/php

```
<?php foreach ($products as $product) { ?>
   <span id="target_1_<?php echo $product['product_id']; ?>"><?php echo $product['price']; ?></span>
 <?php } ?>

<?php if ($product['options']) { ?>
  <?php foreach ($product['options'] as $option) { ?>
  <?php if ($option['type'] == 'select') { ?>

  <select name="option[<?php echo $option['product_option_id']; ?>]" class="select_options" id="select_<?php echo $product['product_id']; ?>" onchange="getIt(this);">

  <?php foreach ($option['option_value'] as $option_value) { ?>
    <option value="<?php echo $option_value['product_option_value_id']; ?>"><?php echo $option_value['name']; ?>

     <?php if ($option_value['price']) { ?>
    (<?php echo $option_value['price_prefix']; ?><span id="newPrice"><?php echo $option_value['price']; ?></span>)
    <?php } ?>
    </option>
    <?php } ?>
  </select>
<?php } ?>

........
<?php } ?> 
```

然后对于 onchange 函数我使用这个：

```
function getIt(el) {
var a = el.options[el.selectedIndex].text;
var position1 = a.indexOf("(");
var position2 = a.indexOf(")");
var position1 = position1+2
var finalA = a.substring(position1, position2); 
document.getElementById("target_1_<?php echo $product['product_id']; ?>").innerHTML = "$"+finalA;
} 
```

alert(finalA) 给出了我需要的值，我似乎无法将它放回 DOM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:00:40.613

更改这两个：在 getIt 函数中传递 product_id

```
 <select name="option[<?php echo $option['product_option_id']; ?>]" class="select_options" id="select_<?php echo $product['product_id']; ?>" onchange="getIt(this,<?php echo $product['product_id']; ?>);"> 
```

使用带有 productid 参数 concanate 的 id 而不是使用 php

```
function getIt(el, productid) {
var a = el.options[el.selectedIndex].text;
var position1 = a.indexOf("(");
var position2 = a.indexOf(")");
var position1 = position1+2
var finalA = a.substring(position1, position2); 
document.getElementById("target_1_"+productid).innerHTML = "$"+finalA;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:13:36.590

试试这个：

```
function getIt(el) {
var a = el.options[el.selectedIndex].text;
var position1 = a.indexOf("(");
var position2 = a.indexOf(")");
var position1 = position1+2; //BTW , Your forgot ; over here
var product_id = <?php echo $product['product_id']; ?>;
//You always can use: console.log(product_id);
//Then check your browser's console to see this variable value
//In this case , just View Source and make sure that instead of the php line there's a valid
// number (the product's id)
var finalA = a.substring(position1, position2); 
document.getElementById("target_1_"+product_id).innerHTML = "$"+finalA;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:19:55.657

为产品 ID 添加额外的数据属性，例如`data-product-id`在选择标签中

```
<select name="option[<?php echo $option['product_option_id']; ?>]"  
  data-product-id = "target_1_<?php echo $product['product_id']; ?>" 
  class="select_options" id="select_<?php echo $product['product_id']; ?>" 
   onchange="getIt(this);"> 
```

在 Javascript 中

```
function getIt(e) {
    //Your part
    document.getElementById(e.getAttribute("data-product-id")).innerHTML = "$"+finalA;
} 
```

# ruby-on-rails - 在 Rails 上选择一个人的弹出屏幕

> ID：12837925
> 
> 赞同：0
> 
> 时间：2012-10-11T10:53:33.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, fancybox

我有一个“客户”类来存储我的所有客户。我有一个“订单”类，在其中我将“客户”与他/她的“products_list”联系起来。

问题是：我想从一个弹出表单中选择我的客户，该表单向我显示数据库中的所有客户，这样，当单击他/她的名字时，弹出窗口关闭并且名称/ID 转到我的客户文本字段。

我正在查看 Fancybox，但我认为这个“点击->关闭->发送数据”不起作用......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:39:42.910

如果您没有大量的“客户”，那么`<select>`输入呢？

如果您有大量客户，那么自动完成文本输入怎么样？

# javascript - Proguard 可以混淆包含在 Android 应用程序代码中的 javascript 代码吗？

> ID：12837928
> 
> 赞同：0
> 
> 时间：2012-10-11T10:53:51.773
> 
> 标签：javascript, android, obfuscation

Proguard 可以混淆包装在 Android 应用程序中的 javascript 代码吗？如果不是，请向我推荐一些允许自动化 javascript 混淆过程并将其集成为构建工具的工具。

感谢您的时间。

问候，普拉文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:29:49.783

Proguard 不会混淆 JavaScript，它会混淆字节码（通常由 Java 代码生成）。

一个简单的 Google 搜索将引导您找到许多混淆 JavaScript 的方法。

# ruby-on-rails - Omniauth 自定义铁路路线

> ID：12837931
> 
> 赞同：0
> 
> 时间：2012-10-11T10:54:05.533
> 
> 标签：ruby-on-rails, ruby, routes, omniauth

我怎么能映射这个动作

```
match '/auth/:provider/callback', to: 'sessions#create' 
```

通过调用

```
<b><%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %></b> 
```

到 login_path 之类的路径还是使用 subURI？

我曾尝试：“sessions#create”，如：“login”，但是这个错误没有与会话#create 匹配。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:19:32.350

我相信你有点糊涂了。

您所说的这条路由是用户*在*OmniAuth 与 3rd-party 服务（例如 Facebook）通信后返回的回调。因此，使用该选项命名这条路线是没有意义的`:as`（尽管你可以）。

您要编辑的内容（如果我理解您的话）是用户点击登录的 URL，因此它看起来不像[http://example.com/auth/facebook](http://example.com/auth/facebook)但看起来像[http://example.com/login](http://example.com/login) .

它只是一个静态 url (/auth/facebook)，所以你可以像这样重定向它：

`match "/login" => redirect("/auth/github")`

如果用户可见的 URL 与您无关，但您只想在视图中简化它，例如：

`<b><%= link_to "Sign in with Facebook", sign_in, id: "sign_in" %></b>`

您可以在帮助程序中定义此方法（例如 ApplicationHelper.rb）：

```
def login_link
  "/auth/facebook"
end 
```

尽管我没有看到这样做的任何特殊原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T16:37:36.780

`match '/auth/:provider/callback' => 'sessions#create'`

如果您`/auth/twitter(:provider)/callback`希望在您的`SessionsController`=>`create`操作中结束，上面的路由代码将为您提供帮助

# javascript - 选择 RadTimePicker 中的时间时如何停止触发 onbeforeunload

> ID：12837932
> 
> 赞同：0
> 
> 时间：2012-10-11T10:54:09.527
> 
> 标签：javascript, asp.net, asp.net-ajax, dom-events, onbeforeunload

`onbeforeunload`谁能告诉我当我选择时间时如何停止射击`RadTimePicker`。在我的场景中，我有一个`RadTimePicker`准时选择，我在`RadComboBox`. 我在我的 .aspx 页面上有`cancelEvent(onbeforeunload)`Jquery 函数，我在 Buttons ( `OnClientClick`)上`RadGrid`调用`cancelEvent`它`onclick`，它也可以正常工作t 使其适用于`RadTimePicker`时间选择。几天前，当我遇到问题`RadGrid`（可以在[这里](https://stackoverflow.com/questions/12801334/how-to-stop-firing-onbeforeunload-function-on-radgrid-postbacks-in-asp-net)找到）并得到 Ramesh 的帮助时，我发布了类似的帖子，现在我遇到了时间选择回发问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:45:41.370

通过将 div（包含我的 RadTimePicker、RadComboBox 和其他一些文本字段）放在 asp:UpdatePanel 中解决了这个问题。发生了什么事，RadTimePicker 正在做一个页面回帖，现在通过放置 UpdatePanel 它只更新面板而不是整个页面。

# facebook-insights - 在我的 facebook 应用程序的见解中，它说我的故事印象数设置为 0

> ID：12837934
> 
> 赞同：1
> 
> 时间：2012-10-11T10:54:13.703
> 
> 标签：facebook-insights, impressions

实际上，我有用户使用我的应用程序在他们的提要上发布了内容，实际的故事数是 310。

为什么我的 facebook 应用程序的见解没有显示正确的数字？什么可以阻止它？

谢谢。

# php - php内联回调

> ID：12837939
> 
> 赞同：7
> 
> 时间：2012-10-11T10:54:31.697
> 
> 标签：php, callback, inline

一个快速的问题。

是否可以在 php 中内联声明回调函数？例如，

```
array_filter($input_array, "function($item) { $item['state'] != 0 }") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T10:56:23.300

是的，在 php 5.3 之后，你可以使用匿名函数。

```
array_filter($input_array, function($item) { return $item['state'] != 0; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:56:46.713

当然它调用[匿名函数](http://php.net/manual/en/functions.anonymous.php)：

```
array_filter($input_array, function($item) { 
    return $item['state'] != 0;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-19T16:13:40.047

```
array_filter($input_array, function($item) { 
    return $item['state'] != 0;
}); 
```

此功能在 5.3 或 > 版本的 php 中可用。在 5.4> 版本将支持 $this inline Anonymous Functions

php 回调链接 > [如何在 PHP 中实现回调？](https://stackoverflow.com/questions/48947/how-do-i-implement-a-callback-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-19T13:26:33.347

使用 create_function？前任：

```
 $result = array_filter($array, create_function('$a','return preg_match("#\S#", $a);')); 
```

# php - 用于匹配 CSS 十六进制颜色的正则表达式

> ID：12837942
> 
> 赞同：35
> 
> 时间：2012-10-11T10:54:39.323
> 
> 标签：php, css, regex, colors, hex

我正在尝试编写从 CSS 代码中提取所有十六进制颜色的正则表达式。

这就是我现在所拥有的：

代码：

```
$css = <<<CSS

/* Do not match me: #abcdefgh; I am longer than needed. */

.foo
{
    color: #cccaaa; background-color:#ababab;
}

#bar
{
    background-color:#123456
}
CSS;

preg_match_all('/#(?:[0-9a-fA-F]{6})/', $css, $matches); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => #abcdef
            [1] => #cccaaa
            [2] => #ababab
            [3] => #123456
        )

) 
```

我不知道如何指定仅匹配以标点符号、空格或换行符结尾的颜色。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-11T10:58:21.160

由于十六进制颜色代码也可能包含 3 个字符，因此您可以定义一个强制组和一个可选的字母和数字组，因此长而精细的符号将是：

```
/#([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?\b/ 
```

或者，如果您想要一个漂亮而简短的版本，您可以说您想要 1 组或 2 组 3 个字母数字字符，并且它们应该不区分大小写 ( `/i`)。

```
/#([a-f0-9]{3}){1,2}\b/i 
```

如果正则表达式引擎支持这个 posix 字符类，`[a-f0-9]`你也可以写而不是写。`[[:xdigit:]]`在这种情况下，您可以跳过`/i`最后的 ，整个公式仅多出两个字符，但可以说更具描述性。

```
/#([[:xdigit:]]{3}){1,2}\b/ 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-11-10T11:14:19.403

接受的答案向您展示了如何使用正则表达式来做到这一点，因为那是您的问题。但是你真的不需要为此使用正则表达式。通常我会这样做：

```
if(ctype_xdigit($color) && strlen($color)==6){
    // yay, it's a hex color!
} 
```

100.000 次迭代：

正则表达式解决方案 *：0.0802619457245 秒

带 strlen 的 Xdigit：0.0277080535889 秒

*：十六进制：`([a-fA-F0-9]{6})`

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-04-07T04:04:20.247

[GolezTrol 的答案的](https://stackoverflow.com/a/12837990/305973)较短版本，避免了两次编写字符集：

```
/#([a-fA-F0-9]{3}){1,2}\b/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-03T07:56:13.160

尽管这个问题的年龄我想修改以下内容：

`^#([[:xdigit:]]{3}){1,2}$`, 哪里`[[:xdigit:]]`是 的简写`[a-fA-F0-9]`。

所以：
`<?php preg_match_all("/^#(?>[[:xdigit:]]{3}){1,2}$/", $css, $matches) ?>`

这里还值得注意的是使用非捕获组`(?>...)`，以确保我们不会将数据存储在我们一开始就不想存储的内存中。

[在线尝试](https://regex101.com/r/eDugh8/2/tests)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T11:00:07.603

我不完全确定我是否正确，但如果您只想在 CSS 行的末尾匹配十六进制颜色：

```
preg_match_all('/#(?:[0-9a-fA-F]{6}|[0-9a-fA-F]{3})[\s;]*\n/',$css,$matches); 
```

应该工作，我所做的只是添加可选的`\s;`字符组（可选的分号和空格）和换行符（非可选），它似乎工作。
正如@GolezTrol 指出的那样`#FFF;`也是有效的。

当对此进行测试时：

```
$css = '/* Do not match me: #abcdefgh; I am longer than needed. */
.foo
{
    color: #CAB;
    background-color:#ababab;
}';
preg_match_all('/#(?:[0-9a-fA-F]{6}|[0-9a-fA-F]{3})[\s;]*\n/',$css,$matches);
var_dump($matches); 
```

输出是：

```
array (array('#CAB;','#ababab;')) 
```

# css - CSS 拉伸元素以适应容器高度

> ID：12837945
> 
> 赞同：0
> 
> 时间：2012-10-11T10:54:57.827
> 
> 标签：css, stretching

[演示](http://jsfiddle.net/zP97v/)- 如何将`li`元素拉伸到父容器高度，以便它们适合所有`ul`高度？我需要这样的东西：

![预期结果](../Images/55653e0aa9aa0de364785df8450e2f23.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:58:41.413

```
ul { display: table;}
li { display: table-row;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:01:27.663

在 li 的样式表块中包含一行

```
height: 25%; 
```

# javascript - 从 NPAPI 插件返回一个整数/字符串到 JavaScript（不使用 FireBreath）

> ID：12837946
> 
> 赞同：1
> 
> 时间：2012-10-11T10:54:59.800
> 
> 标签：javascript, plugins, npapi

任何人都可以用样本解释一下吗...？
如何从 NPAPI 插件（**不使用 FireBreath**）将整数/字符串返回给 JavaScript？我搜索了很多..但无法得到相关答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:29:27.543

你需要制作一个 NPObject 的 Scriptable 类：[简单的类定义和实现](http://colonelpanic.net/2009/08/building-a-firefox-plugin-part-three/)

您可以在 Firefox/Chrome 浏览器中使用这篇文章。它与您的问题非常相似，并且具有调用和 JavaScript/html 的代码。 [在这里](https://stackoverflow.com/questions/11231328/scriptable-plugin-error-calling-method-on-npobject)。

如果您还没有阅读至少第 1-3 部分的taxillian 关于插件的博客，我会说这是必读的。仔细阅读很多我在阅读时略读而错过的信息。

[第1部分](http://colonelpanic.net/2009/03/building-a-firefox-plugin-part-one/)

[第2部分](http://colonelpanic.net/2009/05/building-a-firefox-plugin-part-two/)

[第 3 部分](http://colonelpanic.net/2009/08/building-a-firefox-plugin-part-three/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:57:32.640

找到了解决方案。
从 NPAPI 插件返回一个字符串

`char* npOutString = (char *)pNetscapefn->memalloc(strlen(StringVariable) + 1);`

`if (!npOutString) return false; strcpy(npOutString, StringVariable); STRINGZ_TO_NPVARIANT(npOutString, *result);`

# cakephp - 黑洞 cakephp 2 个关联实体

> ID：12837950
> 
> 赞同：3
> 
> 时间：2012-10-11T10:55:14.653
> 
> 标签：cakephp, security

我的目标：重复使用与我称之为“父母”的几个不同实体相关的联系表，即组有联系信息，成员有联系信息等......我尝试这样做的方式是：1.为联系人，名为“form.ctp”，它不创建新表单，也不提交，只是回显联系人的字段。2\. 使用 requestAction 调用此文件 我的问题：表单的 _Token 崩溃了。

父 add.ctp 示例

```
 <?php echo $this->Form->create('Group');?>
            <fieldset>

                echo $this->Form->input($field_prefix.'contact_id',array('type'=>'hidden'));
<?php echo $this->requestAction(array('controller' => 'contacts', 'action' => 'form'), array('named' => array('index'=>'0','parent'=>'Group',
        'fields'=>array(
        'email'=>array('value'=>'xx@yy.com','hidden'=>1)
)))); 
```

在 form.ctp 我有：

```
 //Associated Model
    echo $this->Form->input('Contact.0.city',array('type'=>'hidden'));

            echo $this->Form->input('Contact.0.postcode');
            echo $this->Form->input('Contact.0.phone');
            echo $this->Form->input('Contact.0.cellphone');
            echo $this->Form->input('Contact.0.email',array('value'=>""));
            echo $this->Form->input('Contact.0.id',array('type'=>'hidden'));        
        ?> 
```

查看生成的 HTML 源代码，我看到无论是使用请求操作还是只是将 form.ctp 的内容复制到“父级”添加文件中，我都会得到相同的 HTML 结果。然而！！！当我使用 form.ctp Action Request 时，我得到了黑洞，令牌被搞砸了！！！有任何想法吗？提前感谢奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:16:07.087

如果您的问题只是重用表单，您可以将表单用作元素，然后您可以多次调用它，替换为您需要的确切值。

至于 SecurityComponent，我建议（至少作为临时修复）通过`$this->Security->unlockedActions();`在控制器的`beforeFilter()`

# php - 解码具有相同键的字符串

> ID：12837957
> 
> 赞同：0
> 
> 时间：2012-10-11T10:55:51.367
> 
> 标签：php, json

```
{"": "attachment-2","": "attachment-1"} 
```

我从解析邮件中得到这个 JSON 编码的字符串（或其他格式......让我知道），我无法更改它。我怎样才能解码它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T11:01:40.193

您不能为此使用 JSON 解析器，因为由于相同的键，它总是会覆盖第一个元素。唯一*合适的*解决方案是要求创建该“JSON”的人修复他的代码以使用数组或具有唯一键的对象。

如果这不是一个选项，那么您唯一可以做的就是在使用解析它之前重写 JSON 以具有唯一键`json_decode()`

假设它总是给你正确的 JSON 并且重复的键总是空的，你可以`"":`用`"random-string":`-`preg_replace_callback()`在这种情况下是你的朋友：

```
$lame = '{"": "attachment-2","": "attachment-1"}';
$json = preg_replace_callback('/"":/', function($m) {
    return '"' . uniqid() . '":';
}, $lame);
var_dump(json_decode($json)); 
```

输出：

```
object(stdClass)#1 (2) {
  ["5076bdf9c2567"]=>
  string(12) "attachment-2"
  ["5076bdf9c25b5"]=>
  string(12) "attachment-1"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:06:48.620

正如@ThiefMaster 提到的，此 JSON 响应无效，因为 JSON 不支持`duplicated keys`.

您应该联系您尝试请求此响应的服务。

如果您有一个有效的 JSON 响应，您可以使用`json_decode`返回 an`object`或 an的函数对其进行解码`array`（取决于第二个参数）；

例如：（对象）

```
$json_string = '{"keyOne": "attachment-2","keyTwo": "attachment-1"}';
$decoded = json_decode($json_string);

print $obj->keyOne; //attachment-2
print $obj->keyTwo; //attachment-1 
```

另一种选择是编写自己的解码器函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:04:45.100

自己解码？

```
$myStr = '{"": "attachment-2","": "attachment-1"}';
$vars = explode(',',$myStr);
$arr = array();
foreach($vars as $v){
    list($key,$value) = explode(':',$v);
    $key = substr($key,strpos($key,'"'),strpos($key,'"')-strrpos($key,'"'));
    $value = substr($value,strpos($value,'"'),strpos($value,'"')-strrpos($value,'"'));
    if($key=='')$arr[] = $value;
    else $arr[$key] = $value;
} 
```

# android - 如何从另一个对话框调用一个对话框

> ID：12837961
> 
> 赞同：1
> 
> 时间：2012-10-11T10:56:07.213
> 
> 标签：android

我有一个类，我有一个地图对象。我将此地图对象发送到自定义对话框。之后我想从此对话框调用另一个对话框，但第二个对话框没有显示。我不知道我在哪里做错了。

活动 ：

```
dlgi = new MyCommunityServicesDialog(AppCentral.this, myValues, mapView);
dlgi.listDialog().show(); 
```

自定义对话框：

```
Community_List_Dialog dialog = new Community_List_Dialog(context, getAllCommunityNames(selectedOpt).get(0), getAllCommunityNames(selectedOpt).get(1), mapView)
dialog.showDialog(); 
```

注意：此方法 ( `getAllCommunityNames(selectedOpt).get(0)/(1)`) 返回`String[]`。

自定义对话框第二：

```
public Dialog showDialog()
{

    Log.i("listDialog calling...", "calling...");
    final Dialog community_dialog = new Dialog(context);
    community_dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    community_dialog.setContentView(R.layout.community_list);
    ListView community_list = (ListView)community_dialog.findViewById(R.id.community_list);

    adapter = new Community_List_Adapter(context,names);
    community_list.setAdapter(adapter);

    return community_dialog;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:58:39.577

这个问题的解决方案是利用类

```
android.os.AsyncTask<Params, Progress, Result> 
```

JavaDoc 中给出了描述：

“AsyncTask 可以正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作和发布结果，而无需操作线程和/或处理程序。”

通过使用这些方法`onPreExecute()`，您可以在 UI 线程上操作 View。

完成此方法后，`doInBackground()`将调用 并在此处开始您的后台操作。此方法不适用于 UI 线程，因此它不会阻塞您的应用程序。

`onPostExecute()`调用它之后，您可以使用您的计算结果。

我的问题是在进行后台操作时正确显示进度指示器。这可以通过使用`onProgressUpdate()`在 UI 线程上工作的方法来完成，同时进行后台计算。

# asp.net - 无法将 default.aspx 链接到母版页，请帮助。内容占位符

> ID：12837962
> 
> 赞同：1
> 
> 时间：2012-10-11T10:56:09.867
> 
> 标签：asp.net, html, visual-studio-2010, visual-studio

我有一个关于 ASP.NET 的视觉工作室的课程，并且在这个母版页上被难住了，请帮助我。我无法将默认页面链接到我不确定的母版页面

默认页面代码

```
<%@ Page Title="" Language="C#" MasterPageFile="" AutoEventWireup="true"    CodeBehind="Default.aspx.cs" Inherits="AdrianASP2012.WebForm2" %>

        <div>
            <h2>Nulla luctus eleifend</h2>
            <p>This is <strong>Greenness </strong>, a free, fully standards-compliant CSS template designed by <a href="http://www.freecsstemplates.org">FCT</a>.   The photos in this template are from <a href="http://fotogrph.com/"> Fotogrph</a>. This free template is released under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attributions 3.0</a> license, so you are pretty much free to do whatever you want with it (even use it commercially) provided you keep the links in the footer intact. Aside from that, have fun with it :) </p>
            <p>&nbsp;</p>
            <p>Maecenas pede nisl, elementum eu, ornare ac, malesuada at, erat. Proin gravida orci porttitor enim accumsan lacinia. Donec condimentum, urna non molestie semper, ligula enim ornare nibh, quis laoreet eros quam eget ante. Aliquam libero. Vivamus nisl nibh, iaculis vitae, viverra sit amet, ullamcorper vitae, turpis. Aliquam erat volutpat. Vestibulum dui sem, pulvinar sed, imperdiet nec, iaculis nec, leo. Fusce odio. Etiam arcu dui, faucibus eget, placerat vel, sodales eget, orci. Donec ornare neque ac sem. Mauris aliquet. </p>
            <p class="button-style"><a href="#">More Details</a></p>
        </div> 
```

和母版页正文部分是

```
 <body>
    <form id="form1" runat="server">
        <div id="header">
            <div id="logo">
                <h1><a href="#">Greenness</a></h1>
            </div>
            <div id="menu">
                <ul>
                    <li class="current_page_item"><a href="#" accesskey="1" title="">Homepage</a></li>
                    <li><a href="#" accesskey="2" title="">Our Clients</a></li>
                    <li><a href="#" accesskey="3" title="">About Us</a></li>
                    <li><a href="#" accesskey="4" title="">Careers</a></li>
                    <li><a href="#" accesskey="5" title="">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <div id="banner-wrapper">
            <div id="banner">
                <img src="App_Themes/Theme1/images/pics01.jpg" width="1000" height="345" alt="" />
            </div>
        </div>
        <div id="page-wrapper">
            <div id="page">
                <div id="content">

                    <!-- CONTENT PLACE HOLDER HERE -->
                    <asp:ContentPlaceHolder ID="ContentPlaceHolder2" runat="server"></asp:ContentPlaceHolder>

                </div>
                <div id="sidebar">
                    <h2>Maecenas  lectus</h2>
                    <ul class="style1">
                        <li class="first">
                            <p><a href="#">Aliquam erat volutpat. Pellentesque tristique ante ut risus. Quisque dictum. Integer nisl risus, sagittis convallis, rutrum congue.</a></p>
                        </li>
                        <li>
                            <p><a href="#">Aliquam erat volutpat. Pellentesque tristique ante ut risus. Quisque dictum. Integer nisl risus, sagittis convallis, rutrum congue.</a></p>
                        </li>
                        <li>
                            <p><a href="#">Aliquam erat volutpat. Pellentesque tristique ante ut risus. Quisque dictum. Integer nisl risus, sagittis convallis, rutrum congue.</a></p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="footer-wrapper">
            <div id="footer-content">
                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
                </asp:ContentPlaceHolder>
                <div id="fbox2">
                    <h2><span>Fusce ultrices</span> fringilla</h2>
                    <p>
                        <img src="App_Themes/Theme1/images/img05.jpg" width="320" height="150" alt="" />
                    </p>
                    <p>Aliquam erat volutpat. Pellentesque tristique ante ut risus. Quisque dictum. Integer nisl risus, sagittis convallis, rutrum id, elementum congue, nibh. Donec leo, vivamus fermentum nibh in augue praesent a lacus at urna congue rutrum elementum congue.</p>
                    <p class="button-style"><a href="#">More Details</a></p>
                </div>
                <div id="fbox3">
                    <h2><span>Mauris vulputate</span> scelerisque</h2>
                    <ul class="style3">
                        <li class="first">
                            <img src="App_Themes/Theme1/images/img02.jpg" width="78" height="78" alt="">
                            <p>Nullam non wisi a sem eleifend. Donec mattis libero eget urna. </p>
                            <p class="posted">August 11, 2002  |  (10 )  Comments</p>
                        </li>
                        <li>
                            <img src="App_Themes/Theme1/images/img03.jpg" width="78" height="78" alt="">
                            <p>Nullam non wisi a sem eleifend. Donec mattis libero eget urna. </p>
                            <p class="posted">August 11, 2002  |  (10 )  Comments</p>
                        </li>
                        <li>
                            <img src="App_Themes/Theme1/images/img04.jpg" width="78" height="78" alt="">
                            <p>Nullam non wisi a sem eleifend. Donec mattis libero eget urna. </p>
                            <p class="posted">August 11, 2002  |  (10 )  Comments</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="footer">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:58:07.037

考虑改变：

```
MasterPageFile="" 
```

到您的母版页的名称。通常：

```
MasterPageFile="~/MasterPage.master" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T11:16:35.307

在你的 default.aspx`MasterPageFile`值是空的。因此，将其更改为您的母版页文件名。

```
MasterPageFile="<place master page path>"

MasterPageFile="~/Custom/UI/Templates/MasterPage.master" 
```

提示：将光标放在“”（ MasterPageFile="|" ）之间，然后按 Ctrl + 空格键以获得智能，您将获得`"Pick Master..."`并单击以选择母版页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T11:37:35.450

首先在您的 MasterPageFile="~/YourMasterPage.master" 中给出 MasterPageFile 名称其次，您必须在内容占位符内编写代码..

# javascript - onclick提交按钮不返回javascript函数yii

> ID：12837963
> 
> 赞同：2
> 
> 时间：2012-10-11T10:56:09.557
> 
> 标签：javascript, yii

我的代码在

**看法**

```
<?php echo CHtml::SubmitButton('Submit',array('onclick'=>'return validation();'));?> 
```

我的**脚本功能**是

```
function validation(){

    jQuery("#firstname_result").hide();

    jQuery("#lastname_result").hide();

    jQuery("#email_result").hide();

var firstname =jQuery("#first_name").val();

    var lastname = jQuery("#last_name").val();

    var email = jQuery("#email").val();

success=true;

if(firstname==''){

    success=false;

    jQuery('#firstname_result').html('First Name cannot be blank.').show();

}
if(lastname==''){
        success=false;
    jQuery('#lastname_result').html('Last Name cannot be blank.').show();

}
if(email==''){    
        success=false;
    jQuery('#email_result').html('Email cannot be blank.').show();

}

if(!success)
        return;

} 
```

单击提交按钮后，显示错误并闪出到提交目标的其他页面..任何人都可以告诉我如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:05:15.013

尝试返回成功变量的值。它应该可以解决问题。

```
if(!success) return; 
```

应该

```
return success; 
```

这将阻止表单合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:00:30.083

使用 preventDefault 来防止表单提交。

修改后的代码：

```
<?php echo CHtml::SubmitButton('Submit',array('onclick'=>'return validation(event);'));?>

function validation(event){
   ..... //code 
  if(!success) {  
         event.preventDefault();
         event.returnValue = false; // for IE.
     } 
```

# ios - 将 NSDictionary 转换为 XML

> ID：12837965
> 
> 赞同：4
> 
> 时间：2012-10-11T10:56:18.137
> 
> 标签：ios, xml, nsdictionary

我需要以 XML 格式发布数据。服务器接受特定的 xml 格式。我不想手动编写 xml，我想做的是创建一个`NSMutableDictionary`填充它并从`NSMutableDictionary`它转换为 XML。

我用这个：

```
[NSPropertyListSerialization dataWithPropertyList:data format:NSPropertyListXMLFormat_v1_0 options:0 
```

样本返回是这样的：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"><plist version="1.0">
<dict>
<key>email</key>
<string>me@n.net</string>
<key>invoice_date</key>
<string>2012-10-11T10:35:09Z</string>
<key>invoice_lines</key>
<array>
    <dict>
        <key>product_id</key>
        <integer>1021493</integer>
        <key>quantity</key>
        <real>1</real>
        <key>retail_price</key>
        <real>110</real>
    </dict>
</array>
<key>payments</key>
<array>
    <dict>
        <key>amount</key>
        <real>288.5</real>
    </dict>
    <dict>
        <key>payment_type_id</key>
        <integer>1</integer>
    </dict>
</array> 
```

上述格式无法从服务器读取。

服务器需要这样的 xml 提要。

```
 <invoice>
      <invoice_date>2012-10-11T10:35:09Z</invoice_date>
      <email>me@n.net</email>
        <invoice_lines type="array">
         <invoice_line>
       <product_id>1021505</product_id>
       <quantity>1</quantity>
       <retail_price>45</retail_price>
     </invoice_line>
  </invoice_lines>
  <payments type="array">
    <payment>
      <amount>288.5</amount>
     </payment>
  </payments>

</invoice> 
```

是否可以生成来自 a 的上述 xml `NSDictionary`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T19:05:49.360

简短的回答是：不，Cocoa 库中没有内置的功能。

因为您正在编写而不是解析，并且可能要处理有限范围的可能标记，所以输出 XML 的代码实际上并没有那么复杂。它应该只是 Invoice 对象中的一个简单方法，例如：

```
- (NSString*) postStringInXMLFormat
{
    NSMutableString* returnValue = [[NSMutableString alloc] init];
    if([self email])
    {
        [returnValue appendString:@"<email>"];
        [returnValue appendString:[self email]];
        [returnValue appendString:@"</email>"];
    }
    if([self invoice_date])
    ... 
```

等等。最后返回

```
[NSString stringWithString:returnValue] 
```

有很多第三方项目试图概括这个过程。其中几个列在这个答案中：

[iPhone 应用程序的 XML 序列化库](https://stackoverflow.com/questions/944509/xml-serialization-library-for-iphone-apps)

但是，如果您要做的只是创建一个服务器端可以识别的单一、稳定的格式，并且您没有大量的实体要转换，那么您自己的工作可能会更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T21:43:51.087

这是将字典转换为 XML 字符串的递归方法。它处理字典、数组和字符串。字典键是 XML 标记，字典对象用作树中的值或子项。在数组的情况下，数组中的每个元素都放置在具有相同标签的相同子级别上。

```
- (NSString*)ConvertDictionarytoXML:(NSDictionary*)dictionary  withStartElement:(NSString*)startElement{
    NSMutableString *xml = [[NSMutableString alloc] initWithString:@""];
    [xml appendString:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"];
    [xml appendString:[NSString stringWithFormat:@"<%@>",startElement]];
    [self convertNode:dictionary withString:xml andTag:nil];
    [xml appendString:[NSString stringWithFormat:@"</%@>",startElement]];
    NSString *finalXML=[xml stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"];
    NSLog(@"%@",xml);
    return finalXML;
}

- (void)convertNode:(id)node withString:(NSMutableString *)xml andTag:(NSString *)tag{
    if ([node isKindOfClass:[NSDictionary class]] && !tag) {
    NSArray *keys = [node allKeys];
    for (NSString *key in keys) {
        [self convertNode:[node objectForKey:key] withString:xml andTag:key];
    }
    }else if ([node isKindOfClass:[NSArray class]]) {
        for (id value in node) {
             [self convertNode:value withString:xml andTag:tag];
        }
    }else {
        [xml appendString:[NSString stringWithFormat:@"<%@>", tag]];
        if ([node isKindOfClass:[NSString class]]) {
        [xml appendString:node];
        }else if ([node isKindOfClass:[NSDictionary class]]) {
            [self convertNode:node withString:xml andTag:nil];
        }
        [xml appendString:[NSString stringWithFormat:@"</%@>", tag]];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-25T00:08:24.680

如果您不使用库或需要额外的自定义：

```
- (NSString*)convertDictionaryToXML:(NSDictionary*)dictionary withStartElement:(NSString*)startElement
{
    return [self convertDictionaryToXML:dictionary withStartElement:startElement isFirstElement:YES];
}

- (NSString*)convertDictionaryToXML:(NSDictionary*)dictionary withStartElement:(NSString*)startElement isFirstElement:(BOOL) isFirstElement
{
    NSMutableString *xml = [[NSMutableString alloc] initWithString:@""];
    NSArray *arr = [dictionary allKeys];
    if (isFirstElement)
    {
        [xml appendString:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"];
    }
    [xml appendString:[NSString stringWithFormat:@"<%@>\n", startElement]];
    for(int i=0; i < [arr count]; i++)
    {
        NSString *nodeName = [arr objectAtIndex:i];
        id nodeValue = [dictionary objectForKey:nodeName];
        if([nodeValue isKindOfClass:[NSArray class]])
        {
            if([nodeValue count]>0)
            {
                for(int j=0;j<[nodeValue count];j++)
                {
                    id value = [nodeValue objectAtIndex:j];
                    if([value isKindOfClass:[NSDictionary class]])
                    {
                        [xml appendString:[self convertDictionaryToXML:value withStartElement:nodeName isFirstElement:NO]];
                    }
                }
            }
        }
        else if([nodeValue isKindOfClass:[NSDictionary class]])
        {
            [xml appendString:[self convertDictionaryToXML:nodeValue withStartElement:nodeName isFirstElement:NO]];
        }
        else
        {
            if([nodeValue length]>0){
                [xml appendString:[NSString stringWithFormat:@"<%@>",nodeName]];
                [xml appendString:[NSString stringWithFormat:@"%@",[dictionary objectForKey:nodeName]]];
                [xml appendString:[NSString stringWithFormat:@"</%@>\n",nodeName]];
            }
        }
    }

    [xml appendString:[NSString stringWithFormat:@"</%@>\n",startElement]];

    NSString *finalxml=[xml stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"];

    return finalxml;
} 
```

并将其称为：

```
NSString *xmlString = [self convertDictionaryToXML:data withStartElement:startElementName]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T14:08:35.540

从@RemembranceNN 前面获取答案并将其转换为 Swift。

```
extension Dictionary {
    func getXML(withStartElement startElement: String) -> String {
        (self as NSDictionary).getXML(withStartElement: "message")
    }
}

extension NSDictionary {
    func getXML(withStartElement startElement: String, addLeafChildAsAttributes attrFlag: Bool, dontCreateNameSpaceChilds nsFlag: Bool) -> String {
        var string = ""
        var startTag = "<\(startElement)"
        var tagValue = ""

        for (key, value) in self {
            if let arr = value as? NSArray {
                for item in arr {
                    if let itemDict = item as? NSDictionary {
                        tagValue.append(itemDict.getXML(withStartElement: "\(key)", addLeafChildAsAttributes: attrFlag, dontCreateNameSpaceChilds: nsFlag))
                    } else {
                        tagValue.append("<\(key)>")
                        tagValue.append("\(item)")
                        tagValue.append("</\(key)>")
                    }
                }
            } else if let nestedDict = value as? NSDictionary {
                tagValue.append(nestedDict.getXML(withStartElement: "\(key)", addLeafChildAsAttributes: attrFlag, dontCreateNameSpaceChilds: nsFlag))
            } else {
                if attrFlag || (nsFlag && "\(key)" == "xmlns") {
                    startTag.append(" \(key)=\"\(value)\"")
                }
                if !nsFlag || "\(key)" != "xmlns" {
                    tagValue.append("<\(key)>")
                    tagValue.append("\(value)")
                    tagValue.append("</\(key)>")
                }
            }
        }
        startTag.append(">")
        string.append(startTag)
        string.append(tagValue)
        string.append("</\(startElement)>")
        return string
    }
} 
```

# jsp - 如何使用 display:table 将记录设置为最后一个？

> ID：12837970
> 
> 赞同：1
> 
> 时间：2012-10-11T10:56:33.083
> 
> 标签：jsp, jstl, jsp-tags, displaytag

我正在使用`display:table`, 只是为了显示标签。在我的场景中，我有 7 列。对于第一列，我在运行时获取值。例如，我有这些值在我的`manualASNListUID.instanceType`那是一个`arraylist(manualASNListUID)`和`object(instanceType)`。列值为 Early ASn、Late ASn、Sum。否则 Early Asn 和 Sum 或 Early ASn、Late ASn、CMMS 和 Sum。

如何将“总和”值设置为最后一行显示？

例如我的表：

```
Instance Type   Sep-23  Sep-16  Sep-09  Sep-02  Aug-26  Aug-19 
----------------------------------------------------------------------------
Early ASN        4        2      4        1       1       2 
Late ASN         2        1      5        3       1       1     
Sum              6        3      9        4       2       3 

Instance Type   Sep-23  Sep-16  Sep-09  Sep-02  Aug-26  Aug-19 
----------------------------------------------------------------------------
Early ASN        4        2      4        1       1       2 
Late ASN         2        1      5        3       1       1  
CMMS             0        0      0        0       0       0   
Sum              6        3      9        4       2       3 
```

我的代码是：

```
<display:table name="${weeklyDlvyInstancesDashboardReportForm.manualASNListQO}" uid="manualASNListUID" sort="list" defaultsort="1" requestURI="/weeklyDlvyInstancesDashboardReportPre.do?method=httpGet" excludedParams="method" decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator" keepStatus="true">
    <%@include file="/jsp/include/displaytag.jsp"%>
    <c:set value="${manualASNListUID.firstWeekOfCountLabel}" var="manualASNFirstWeekOfCount"/>
    <c:set value="${manualASNListUID.secondWeekOfCountLabel}" var="manualASNSecondWeekOfCount"/>
    <c:set value="${manualASNListUID.thirdWeekOfCountLabel}" var="manualASNThirdWeekOfCount"/>
    <c:set value="${manualASNListUID.fourthWeekOfCountLabel}" var="manualASNFourthWeekOfCount"/>
    <c:set value="${manualASNListUID.fifthWeekOfCountLabel}" var="manualASNFifthWeekOfCount"/>
    <c:set value="${manualASNListUID.sixthWeekOfCountLabel}" var="manualASNSixthWeekOfCount"/>
    <c:if test="${(manualASNListUID.instanceType != null && manualASNListUID.instanceType ne 'Sum')}">
    <display:column property="instanceType" title="Instance Type" sortable="false"/>
    </c:if>
    <c:if test="${(manualASNListUID.instanceType != null && manualASNListUID.instanceType eq 'Sum')}">
    <display:column property="instanceType" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
    </c:if>
    <display:column property="${checkvalue}" title="Instance Type" sortable="false"/>
    <display:column property="${checkvalSum}" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
    <display:column property="firstWeekOfCount" title="${manualASNFirstWeekOfCount}" sortable="false" autolink="true"/>
    <display:column property="secondWeekOfCount" title="${manualASNSecondWeekOfCount}" sortable="false"  autolink="true"/>
    <display:column property="thirdWeekOfCount" title="${manualASNThirdWeekOfCount}" sortable="false"  autolink="true"/>
    <display:column property="fourthWeekOfCount" title="${manualASNFourthWeekOfCount}" sortable="false" autolink="true" />
    <display:column property="fifthWeekOfCount" title="${manualASNFifthWeekOfCount}" sortable="false" autolink="true"/>
    <display:column property="sixthWeekOfCount" title="${manualASNSixthWeekOfCount}" sortable="false" autolink="true"/>
    </display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:16:34.337

```
<display:table name="${weeklyDlvyInstancesDashboardReportForm.manualASNListQO}" uid="manualASNListUID" sort="list" defaultsort="1" requestURI="/weeklyDlvyInstancesDashboardReportPre.do?method=httpGet" excludedParams="method" decorator="com.ford.mpl.superg.decorator.WeeklyDeliveryInstancesTypeTableDecorator" keepStatus="true">
    <%@include file="/jsp/include/displaytag.jsp"%>
    <c:set value="${manualASNListUID.firstWeekOfCountLabel}" var="manualASNFirstWeekOfCount"/>
    <c:set value="${manualASNListUID.secondWeekOfCountLabel}" var="manualASNSecondWeekOfCount"/>
    <c:set value="${manualASNListUID.thirdWeekOfCountLabel}" var="manualASNThirdWeekOfCount"/>
    <c:set value="${manualASNListUID.fourthWeekOfCountLabel}" var="manualASNFourthWeekOfCount"/>
    <c:set value="${manualASNListUID.fifthWeekOfCountLabel}" var="manualASNFifthWeekOfCount"/>
    <c:set value="${manualASNListUID.sixthWeekOfCountLabel}" var="manualASNSixthWeekOfCount"/>

    <c:choose>
    <c:when test="${asnAccuracyListUID.instanceTypeDescription != null && asnAccuracyListUID.instanceTypeDescription != 'Sum'}">
        <display:column property="instanceTypeDescription" title="Instance Type" sortable="false"/>
    </c:when>
    <c:otherwise>
        <display:column property="instanceTypeDescription" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
    </c:otherwise>
    </c:choose>

    <display:column property="${checkvalue}" title="Instance Type" sortable="false"/>
    <display:column property="${checkvalSum}" title="Instance Type" sortable="false" style="font-weight:bold;text-align:center"/>
    <display:column property="firstWeekOfCount" title="${manualASNFirstWeekOfCount}" sortable="false" autolink="true"/>
    <display:column property="secondWeekOfCount" title="${manualASNSecondWeekOfCount}" sortable="false"  autolink="true"/>
    <display:column property="thirdWeekOfCount" title="${manualASNThirdWeekOfCount}" sortable="false"  autolink="true"/>
    <display:column property="fourthWeekOfCount" title="${manualASNFourthWeekOfCount}" sortable="false" autolink="true" />
    <display:column property="fifthWeekOfCount" title="${manualASNFifthWeekOfCount}" sortable="false" autolink="true"/>
    <display:column property="sixthWeekOfCount" title="${manualASNSixthWeekOfCount}" sortable="false" autolink="true"/>
    </display:table> 
```

# visual-studio - 如何在 Visual Studio 中设置模板

> ID：12837971
> 
> 赞同：1
> 
> 时间：2012-10-11T10:56:34.697
> 
> 标签：visual-studio, templates, resharper, visual-studio-2012

我正在使用 Visual Studio 2012，我想创建一些模板，即。当我创建一个新的 C# 类、javascript 文件等时，我想要一个自定义模板，以便它具有标准的公司版权标题、布局等。

我以前在 VS 中作为 ItemTemplates 和 ProjectTemplates 的一部分做过这个，但它有点乱。有没有更简单的方法来做到这一点？

我在 VS 中使用 resharper，因此任何方式都可以简化流程。

我也想为 SQL Management Studio 做类似的事情，我假设模板过程是相似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:27:13.657

You can setup file header text in resharper options: `Resharper -> Options -> Code Editing -> File Header Text`. After this create formater or edit existing in `Resharper -> Options -> Code Editing -> Code Cleanup` and enable there option `update file header`. So if you run formater after that, it will add the header. To run formater you can use `Ctrl` + `Alt` + `F`. Additionaly formater reformat your code according to code style configuration. You can read more about this [here](http://www.jetbrains.com/resharper/features/code_formatting.html).
But unfortunately I don't know is there a way to share this with SQL Management Studio.

# drupal - 根据会话显示分类术语内容

> ID：12837973
> 
> 赞同：0
> 
> 时间：2012-10-11T10:56:39.163
> 
> 标签：drupal, drupal-7

我可以使用以下代码显示基于 IP 的区域： if ($_SESSION['smart_ip']['location']['country_code'] == 'IN'): ?>

印度内容特定

现在我想使用像印度这样的分类术语并显示在印度发布的内容。

我想打印节点，只有在上述条件满足时才具有印度的术语： foreach ((array)$taxonomy as $item) print $item-> India

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:43:42.503

如果您的目录允许您识别与某个会话相关联的地理位置，则可以向该目录中的每个条目添加属性“搜索词”。这样，一旦您在目录中识别出与会话相关联的位置，您就会拥有一个搜索词列表。然后，您可以使用这些搜索词来过滤所有帖子的数据库查询，以仅获取那些包含一个或所有给定搜索词的帖子。

示例印度的搜索词列表可能以`(India,Bhārat,Gaṇarājya,...)`...开头

# .net - 从自定义模型生成 Visual Studio Ultimate UML 类图

> ID：12837974
> 
> 赞同：2
> 
> 时间：2012-10-11T10:56:40.697
> 
> 标签：.net, visual-studio, uml, modeling

我已经完成了手头的任务。我目前正在从事一个已经运行了 10 年的长期项目。域类是从存储在数据库中的自定义模型生成的，该数据库具有很多针对项目的自定义和调整。

现在我们要使用这个现有模型并转换/导出/生成 Visual Studio Ultimate (2010/2012) 类图。我最喜欢的方法是引用一些库，填写一些类，调用一些“WritItToThisFile”方法，然后永远快乐；）

我做了一些搜索，但我只能找到 Microsoft Visual Studio Visualization and Modeling SDK Samples and Documentation 的众所周知的链接，这对手头的任务似乎不太有帮助，因为我不想定义一个新的域特定语言，但要使用现有的微软东西。

有没有人有任何想法或有类似的任务并解决了这个问题？

# apache-flex - Flex 3：带有透明轨道的进度条

> ID：12837977
> 
> 赞同：0
> 
> 时间：2012-10-11T10:56:51.787
> 
> 标签：apache-flex, flex3, progress-bar, skinning

我想实现一个进度条，其中轨道应该是透明的，并且周围有边框。我相信我只能使用高级程序化皮肤来做到这一点，对吗？我该如何实现这种行为？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:56:40.887

你为什么那么想？您是否尝试过使用[Fireworks](http://www.developria.com/2009/10/easy-flex-skinning-with-firewo.html)中的皮肤模板并将轨道皮肤设置为透明？

我认为只要您了解它正在侦听的事件，您也可以完全从头开始编写进度条，但是我手边没有详细信息，而且我在等待 FB 启动时正在回答这个问题，所以一直都是这样我有。

# sql - 从 SQL Server 获取匹配的名称

> ID：12837982
> 
> 赞同：0
> 
> 时间：2012-10-11T10:57:24.470
> 
> 标签：sql, sql-server, sql-server-2008, full-text-search

我的问题是，我有一个人名及其成就的数据库。现在，我有一些包含人名的段落。我需要从这些段落中提取名称。应用程序的 Web 端将附加提取名称的超链接及其活动。

我的数据库中的数据可能如下所示：

```
Name          |  Achievement
----------------------------------------                              
Steve Jobs    |  Founder of Apple
Bill Gates    |  Founder of Microsoft 
```

现在我有这样的字符串：`After saving up some money, Steve Jobs took off for India in the search of enlightenment.`

我需要`Steve Jobs`从上面的字符串中找到并添加到该字符串的超链接。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:13:09.223

SQL Server 确实不是执行此操作的最佳位置，因为超链接根据定义是 HTML，但是...

```
declare @s varchar(500) = 'After saving up some money, Steve Jobs took off for India in the search of enlightenment.'

select 
    @s = REPLACE(@s, name, '<a href="#">'+name+'</a>')    
from yourtable
where @s like '%'+name+'%'
select @s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T11:06:06.730

您应该以某种预定义的格式保存数据，例如，您可以`***`在 like 的开头和结尾使用`person name`。

积攒了一些钱后，`***Steve Jobs***`启程前往印度寻求启蒙。

`***`然后你可以通过sql查找来提取人名

**编辑：**

我自己会尝试找到其他方法来做到这一点。例如，我会将人名保存在单独的列中。

# java - 如何使用 Jfreechart 在折线图的 X 轴上显示日期

> ID：12837986
> 
> 赞同：8
> 
> 时间：2012-10-11T10:57:37.680
> 
> 标签：java, graph, dataset, jfreechart

我正在尝试以时间（HH：MM：SS）作为 X 轴和数字（作为 Y 轴）显示折线图。从“时间”列读取的数据格式为 HH:MM:SS。我填充从中构造图表的数据集的方式如下

```
for (Row row : sheet)
{
    Double sar_Val = poiGetCellValue(sar);
    Double date_val = poiGetCellValue(date);

    if(sar_Val != null && date_val != null)
    {
        series1.add(date_val,sar_Val);
    }
    dataset.addSeries(series1);
} 
```

//上面代码中的poiGetCellValue根据数据类型返回一个double

问题是我必须将格式为 HH:MM:SS 的“时间”列下的数据转换为某个 double 值并填充 series1，因为 add 函数只采用 double 值。一旦我将值转换为双倍，如何在 X 轴上显示时间或者是否有任何其他方法可以添加到 XYseries？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T11:35:20.140

使用 a`org.jfree.data.time.TimeSeries`来存储值，而不是使用 an`XYSeries`和 a来存储`TimeSeriesCollection`数据集。

这将允许您添加一个`RegularTimePeriod`和一个双打而不是两个双打。 `RegularTimePeriod` 由实现，`Day`因此您的最终代码将如下所示：

```
private XYDataset createDataset() {
    TimeSeries series1 = new TimeSeries("Data");
    Date date = new Date();
    series1.add(new Day(date),46.6);
    TimeSeriesCollection dataset = new TimeSeriesCollection();
    dataset.addSeries(series1);
    return dataset;
} 
```

# java - 将 EnumSet 公开为存在映射 (Map ) 的实用程序？

> ID：12837989
> 
> 赞同：1
> 
> 时间：2012-10-11T10:58:14.577
> 
> 标签：java, spring, collections, apache-commons

我正在使用 Spring 将用户输入绑定到命令对象中。不幸的是，它似乎不支持 EnumSets（给出异常“无法实例化集合类型：java.util.EnumSet”），所以我正在考虑创建一个实用程序，为任何 Set 作为 Map 提供“视图”。

我只是想知道是否有人知道在 Spring 或 Commons Lang/Collections/etc 中已经这样做的任何事情？

# ios - NSPredicate 可能匹配多个属性

> ID：12837992
> 
> 赞同：1
> 
> 时间：2012-10-11T10:58:25.667
> 
> 标签：ios, nspredicate

我有一个 Car 类，其中包含“color”和“make”等实例变量。我需要一个允许我搜索颜色或品牌或两者的 NSPredicate。

```
NSPredicate*predicate=[NSPredicate predicateWithFormat:@"(color contains[c] %@) AND (make contains[c] %@)", chosenColor,chosenMake]; 
```

该谓词要求同时存在颜色和品牌。如果用户只给出一种颜色，则不会返回任何结果，因为 make 将是“nil”。对于任何实例变量，没有汽车有 nil。

此外，搜索将针对许多变量，不仅是颜色和品牌，因此不需要 if/case 情况。是否有任何选项可以让我搜索“AND if NOT nil”。我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:41:15.430

您可以动态构建谓词格式以仅测试非零属性。更多关于[这里](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-SW3)。还可以考虑使您的搜索变音符号不敏感（在您的 CONTAINS 语句中添加“d”）。以“Škoda”为例。您希望人们也可以通过“斯柯达”找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T19:37:16.857

`NSCompoundPredicate`使用API很容易做到这一点：

```
NSString *chosenColor = ...;
NSString *chosenMake = ...;

NSMutableArray *subpredicates = [NSMutableArray array];

if (chosenColor != nil) {
  NSPredicate *p = [NSPredicate predicateWithFormat:@"color contains[cd] %@", chosenColor];
  [subpredicates addObject:p];
}

if (chosenMake != nil) {
  NSPredicate *p = [NSPredicate predicateWithFormat:@"make contains[cd] %@", chosenMake];
  [subpredicates addObject:p];
}

NSPredicate *final = nil;
if ([subpredicates count] > 0) {
  final = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];
} 
```

# eclipse - 如何更改 JBoss 错误消息的语言？

> ID：12837993
> 
> 赞同：5
> 
> 时间：2012-10-11T10:58:34.107
> 
> 标签：eclipse, jboss

这似乎是一个相当简单的问题，谷歌应该很容易回答，但令人惊讶的是我找不到必要的信息。

目前，JBoss 错误消息在我的 Eclipse 控制台中以德语显示。我希望他们使用原始英语，以便更好地为他们搜索。

我怎样才能做到这一点？

我们正在使用 JBoss Enterprise Application Server 6 和 Eclipse Indigo Service Release 1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T12:07:06.160

添加`-Duser.language=en`到 VM 参数可以解决问题：

在 Eclipse 中：

“窗口 - 首选项 - Java - 已安装的 JRE”

选择一个 JRE

“编辑...”

默认虚拟机参数：`-Duser.language=en`

# android - 如何在使用 androids MediaPlayer 暂停时寻找新位置？

> ID：12837997
> 
> 赞同：3
> 
> 时间：2012-10-11T10:58:45.547
> 
> 标签：android, video, media-player, android-mediaplayer

我正在使用`MediaPlayer`类在我的 android 应用程序中播放视频。如何暂停视频，跳转到另一个位置，而视频仍然暂停从这个新位置显示帧。目前我做了类似的事情，`mp.pause(); mp.seekTo(); mp.start(); mp.Pause();`但这通常不会更新框架。

我还尝试通过 onSeekComplete() 进行更新，但无法正常工作。这似乎是一个很容易解决的问题，但我无法让它工作。它是如何在流行的视频播放器中完成的？常见的方法是什么？

# asp.net - 删除“此页面正在访问不受其控制的信息”弹出窗口

> ID：12837998
> 
> 赞同：0
> 
> 时间：2012-10-11T10:58:51.273
> 
> 标签：asp.net, google-font-api

我正在使用asp .net 建立一个网站。该网站使用谷歌字体，这是在母版页中导入的，就像这样......

```
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,300,200" media="screen"/> 
```

请注意，我已从 url 中删除了 http(s)。

但是我仍然总是在弹出窗口中收到以下错误...

*“此页面正在访问不受其控制的信息。这会带来安全风险。要继续吗？”*

我认为删除 http(s) 将确保不会出现此错误？我该如何删除它？

我也尝试过使用导入将此引用放在我的 css 文件中，但我仍然得到弹出窗口。

我不想更改浏览器设置，因为不能指望客户这样做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:09:16.613

我不知道下面的解决方案是否符合[Google API 的服务条款](https://developers.google.com/terms/)。

您遇到的错误是由于跨域请求（弹出窗口称为跨域数据访问对话框）。为避免此对话框，您可以将 .css 文件和相关字体文件托管在与您的网站相同的域中。