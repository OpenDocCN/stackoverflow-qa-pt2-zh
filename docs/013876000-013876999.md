# StackOverflow 问答 13876000-13876999

# ruby-on-rails - 如何在 ruby on rails 中为特定请求指定超时？

> ID：13876003
> 
> 赞同：0
> 
> 时间：2012-12-14T09:37:41.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在 rails 应用程序中为特定请求指定 2 分钟的超时时间。在某些情况下，我的一个申请请求需要超过 5 分钟。在这种情况下，如果需要超过 2 分钟，我想停止处理该请求。

我需要在应用程序级别进行此配置，以便将来如果有任何其他此类请求，除了在该配置中提及该操作外，我不应该进行任何特殊更改。有些请求也需要超过 10 分钟。但它们不应该有任何影响。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:43:30.583

将请求的超时设置回那么远通常是不好的做法。让您的用户等待几分钟以完成请求并不是一个好主意。

相反，应该将这种类型的长时间运行的任务放入作业队列中，以便工作进程在方便时独立于 Web 请求运行。这个

*   允许网络请求很快完成，让您的用户满意
*   远离您的网络进程的长期任务，释放它来做它应该做的事情（服务网络请求）

考虑像**[delay_job](https://github.com/collectiveidea/delayed_job)**这样的 gem 。描述如何将其应用于您的应用程序超出了此问题的范围；我在这里的回答只是为了指出，修改超时很可能是错误的“答案”，而不是你最好查看工作队列。

# asp.net-mvc-3 - ViewResult 是否有等效的 ActionResult RedirectToAction？

> ID：13876004
> 
> 赞同：0
> 
> 时间：2012-12-14T09:37:53.150
> 
> 标签：asp.net-mvc-3

我查看了以前的问题，但找不到此特定场景的答案：我正在使用带有 TDD 方法的 ASP.NET MVC 3。在我的操作方法中，我使用 ViewResult 的返回类型，而不是 ActionResult。这很好测试我的控制器。但是，我需要测试我的视图模型以及我的控制器。我可以通过在模型测试中使用 ViewResultBase 上的 Model 属性（实现 ViewResult 但不是 ActionResult）来非常愉快地做到这一点。

如果那里的视图模型为空，那么我想重定向到另一个动作。ActionResult 支持 RedirectToAction 方法。但是， ViewResult 没有。我尝试了 View 方法，但浏览器地址栏中的 url 没有改变。此外，我什至尝试了经典的 ASP.Net Response.Redirect(...)，不出所料，我的单元测试抱怨没有填充 Response 对象。

那么，我使用什么方法来实现 ViewResult 的 ActionResult RedirectToAction 等效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:02:33.887

如果您需要从控制器返回多个结果类型，则将其返回类型设置为操作结果，然后断言不同的条件创建正确的结果类型。

例如，在 AJAX 操作中，您可能希望返回 HttpStatusCodeResults 以在验证失败或出现异常时将响应属性设置为错误。

然后，当操作成功时，您可能希望返回部分视图以显示结果。

使用这种方法，您可以在控制器中定制逻辑，并且仍然断言不同的结果是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:10:00.090

我找到了一种方法。我使用了以下步骤：

1.  我将我的操作方法返回类型设置为 ActionResult

2.  我将其单元测试更改为使用 ActionResult

3.  我使用 ResultView 的返回类型创建了两个额外的操作方法。

4.  对于 [1] 中的操作方法的 if 语句的每个分支，我都重定向到 [3] 中的相应操作方法，我使用 RedirectToAction 进行重定向。

5.  我创建了两个单元测试，它们使用 ResultView 来测试在 [3] 中创建的操作方法，并允许我访问每个单元的底层模型。

# python-3.x - 如何确定哪个嵌套生成器产生 StopIteration 异常？

> ID：13876006
> 
> 赞同：0
> 
> 时间：2012-12-14T09:38:04.147
> 
> 标签：python-3.x

我遇到了一种情况，我需要在我的`try/except`代码中确定哪个嵌套生成器引发了`StopIteration`异常。我该怎么做？以下是一个虚拟示例：

```
def genOne(iMax, jMax):
    i = 0;
    g2 = genTwo(jMax)
    while i <= iMax:
        print('genOne: ' + str(i))
        next(g2)
        yield
        i = i + 1

def genTwo(jMax):
    j = 0;
    while j <= jMax:
        print('genTwo: ' + str(j))
        yield
        j = j + 1

g1 = genOne(6, 3)        # The inputs are arbitrary numbers
try:
    while True:
        next(g1)    
except:  
    # Do some processing depending on who generates the StopIteration exception 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:26:00.527

This can be generalized to the problem of finding the origin of an arbitrary exception.

Use the [`traceback` module](http://docs.python.org/3.3/library/traceback.html) to inspect the stacktrace of your exception object.

Here is a [previous answer](https://stackoverflow.com/a/1095656/923794) on a similar subject.

Some example code:

```
g1 = genOne(6, 3)        # The inputs are arbitrary numbers
try:
    while True:
        next(g1)    
except:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    print(traceback.extract_tb(exc_traceback)[-1]) 
```

Shell output:

```
> ./test.py
genOne: 0
genTwo: 0
genOne: 1
genTwo: 1
genOne: 2
genTwo: 2
genOne: 3
genTwo: 3
genOne: 4
('./test.py', 12, 'genOne', 'next(g2)') 
```

Note that the `[-1]` in the `extract_tb()` call explicitly checks only the first lower level of the stacktrace. With the print you can see which element of that output you'd need to check (`genOne` -> item index #2 in that list). In your particular example you'd probably want to check if the lowest level generator string `genTwo` exists in any of the elements of the `traceback.extract_tb(exc_traceback)` array.

Those hardcoded checks relying on internal code details are been frowned upon, *especially* since in your particular example you do not have control over their implementation.

# regex - 如果 URI 包含扩展名，则正则表达式不匹配

> ID：13876013
> 
> 赞同：1
> 
> 时间：2012-12-14T09:38:18.233
> 
> 标签：regex, apache, .htaccess, url-rewriting, rewrite

我遇到了一些正则表达式，这在我承担的旧项目的 htaccess 文件中需要。我想匹配以下uri

```
/page?id=12
/admin/users-view?id=3242
/subscribe 
```

可能有也可能没有查询字符串，可能有也可能没有多个段

我需要`.php`在查询字符串之前插入一个扩展名。所以第一个例子变成了

```
/page.php?id=12 
```

我也无法将任何带有文件扩展名的 uri 匹配，因此无法匹配图像、js 或 css 文件。

我想出了这个：

```
^([/\w-]+)?/? 
```

除了最后一点之外，它可以满足我的需求。我的正则表达式技能很差，所以任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:40:19.607

不要用正则表达式解析 URI，php 已经为此内置了函数

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

请注意，还有构建 url 的反向函数：

[http://php.net/manual/en/function.http-build-url.php](http://php.net/manual/en/function.http-build-url.php)

您应该使用它们而不是正则表达式，因为它们将（至少应该）正确处理 url 编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:41:16.257

您可能想考虑拆解 URL`parse_url`并在操作后将其重新组合在一起。

但是，对于纯正则表达式解决方案，我想我会尝试找到一个以斜杠（或字符串的开头）开头的字符串和一个不包含句点的问号：

```
$url = preg_replace('~(^|/)[^.?]*(?=[?]|$)~', '$0.php', $url); 
```

`parse_url`解决方案宁愿看起来像：

```
$urlParts = parse_url($url);
if(pathinfo($urlParts['path'], PATHINFO_EXTENSION) === null)
    $urlParts['path'] .= '.php';
$url = implode($urlParts); 
```

# ruby-on-rails - 货币验证提交错误

> ID：13876017
> 
> 赞同：0
> 
> 时间：2012-12-14T09:38:27.380
> 
> 标签：ruby-on-rails

我的表中有十进制和精度的字段如下：

```
change_column :product, :price, :decimal, precision: 20, scale: 10 
```

我这样设置验证

```
validates :price, numericality: true, format: { with: /^\d{1,20}(\.\d{0,10})?$/ } 
```

当我从客户端输入值**90,000.00**并尝试保存时；发生错误，说它不是数字。

有人有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:53:25.047

您可以使用`before_validation`回调将价格值格式化为传递给验证器的 pe。

# ruby - ruby 中的正则表达式 Regexp

> ID：13876019
> 
> 赞同：0
> 
> 时间：2012-12-14T09:38:33.743
> 
> 标签：ruby, ruby-on-rails-3, ruby-1.9, ruby-1.9.2

我正在使用红宝石 1.9.2

```
string = "asufasu isaubfusabiu safbsua fbisaufb sa {{hello}} uasdhfa s asuibfisubibas {{manish}} erieroi" 
```

**现在我必须找到 {{anyword}}**

它会出现多少**次**以及带有**花括号的****名称。**

 **阅读[正则表达式后](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

我在用

```
/{{[a-z]}}/.match(string) 
```

但它每次都返回零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:44:17.350

您需要将 a 附加`*`到`[a-z]`模式以告诉它匹配`{`s 内的任意数量的字母，然后用于`scan`获取字符串中所有匹配项：

```
string.scan(/{{[a-z]*}}/)
=> ["{{hello}}", "{{manish}}"] 
```

要获得匹配的次数，只需获取结果数组的大小：

```
string.scan(/{{[a-z]*}}/).size
=> 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:44:41.753

正则表达式匹配 Web 应用程序[Rubular](http://rubular.com/r/JBILNUnNSg)可以成为进行实时正则表达式解析的非常有用的工具。**

# javascript - 选择禁用属性设置为“禁用”仍然允许在 Chrome 上选择选项

> ID：13876020
> 
> 赞同：0
> 
> 时间：2012-12-14T09:38:38.313
> 
> 标签：javascript, google-chrome, cross-browser

我正在使用 Zend Framework 2 开发一个应用程序，并且我正在使用两个选择框。第一个填充了来自数据库的数据，第二个是空的。

单击按钮将所选选项从第**一个选择**传递到**第二个**（通过Javascript）后，我将第一个选择的**禁用属性设置为****“禁用”**，这样就无法选择其他选项，因此传递给第二个选择。

```
 //Whithin javascript function  
  var s = document.getElementById('firstSelect');
  s.setAttribute("disabled","disabled"); 
```

在 IE、Firefox 和 Safari 上一切正常（在将一个选项从第一个选择传递到另一个选项后，第一个选择被禁用并显示为灰色，您根本无法选择更多选项。）但**在 Chrome 上不行**。

与所有其他浏览器一样，第一个选择是灰色的，但仍允许用户选择另一个选项并将其传递给另一个选择框。发生这种情况后，无法选择更多选项，并且其行为与所有其他浏览器一样。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:20:49.470

实际上，chrome 是对的。您正在根据 ID ( *getElementById* ) 进行选择。这些在你的 DOM 树中**必须**是唯一的。因此，如果您有多个具有相同 ID 的元素，Google 只会选择其中一个。

您现在有两个选择： - 通过*getElementsByClassname*扩展您的代码以加载元素，尽管这还不是很好的 IIRC 支持，或者使用*getElementsByTagname*。这将返回一个数组，您随后可以循环并相应地设置属性 - 进入 jQuery（或任何其他框架）并让框架为您解决这个问题（大多数框架都有针对这些类型情况的功能；））

成功..

ps：元素*可以*有相同的' *name* '属性，这与' *id* '不同

# twig - 检查 Twig 中的变量是字符串还是数组

> ID：13876023
> 
> 赞同：66
> 
> 时间：2012-12-14T09:38:46.647
> 
> 标签：twig

是否可以检查给定变量是否为字符串`Twig`？

预期的解决方案：

`messages.en.yml`：

```
hello:
  stranger: Hello stranger !
  known: Hello %name% ! 
```

`Twig`模板：

```
{% set title='hello.stranger' %}
{% set title=['hello.known',{'%name%' : 'hsz'}] %}

{% if title is string %}
  {{ title|trans }}
{% else %}
  {{ title[0]|trans(title[1]) }}
{% endif %} 
```

有可能这样做吗？或者也许你有更好的解决方案？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-07-30T09:04:49.080

可以通过`iterable`在 twig1.7 中添加的测试来完成，正如 Wouter J 在评论中所说：

```
{# evaluates to true if the users variable is iterable #}
{% if users is iterable %}
    {% for user in users %}
        Hello {{ user }}!
    {% endfor %}
{% else %}
    {# users is probably a string #}
    Hello {{ users }}!
{% endif %} 
```

参考：[可迭代](https://twig.symfony.com/doc/3.x/tests/iterable.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-14T09:48:21.890

好的，我做到了：

```
{% if title[0] is not defined %}
    {{ title|trans }}
{% else %}
    {{ title[0]|trans(title[1]) }}
{% endif %} 
```

丑陋，但有效。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-15T06:05:53.597

我发现`iterable`它不够好，因为其他对象也可以迭代，并且明显不同于`array`.

因此添加一个新`Twig_SimpleTest`的来检查一个项目`is_array`是否更加明确。您可以将其添加到您的应用程序配置/在引导树枝之后。

```
$isArray= new Twig_SimpleTest('array', function ($value) {
    return is_array($value);
});
$twig->addTest($isArray); 
```

用法变得非常干净：

```
{% if value is array %}
    <!-- handle array -->
{% else %}
    <!-- handle non-array -->
{% endif % } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-20T20:24:28.900

无法使用框中的代码正确检查它。最好创建自定义`TwigExtension`并添加自定义检查（或使用来自 的代码`OptionResolver`）。

所以，结果，对于`Twig 3`，它会是这样的

```
class CoreExtension extends AbstractExtension
{
    public function getTests(): array
    {
        return [
            new TwigTest('instanceof', [$this, 'instanceof']),
        ];
    }

    public function instanceof($value, string $type): bool
    {
        return ('null' === $type && null === $value)
               || (\function_exists($func = 'is_'.$type) && $func($value))
               || $value instanceof $type;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-28T20:11:48.293

假设您知道一个值始终是字符串或数组的事实：

```
{% if value is iterable and value is not string %}
    ...
{% else %}
    ...
{% endif %} 
```

在我正在从事的项目中，这对我来说已经足够好了。我意识到您可能需要另一种解决方案。

# ruby - 如何编写支持制表符补全的 Ruby 命令行应用程序？

> ID：13876024
> 
> 赞同：22
> 
> 时间：2012-12-14T09:38:46.977
> 
> 标签：ruby

我想用 Ruby 编写一个命令行应用程序，如果你愿意的话，也可以是一个 shell。

我希望用户能够在某些点按 Tab 并提供值的完成。

我该怎么做呢？我必须使用什么库？你能指点我一些代码示例吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-14T10:10:45.150

啊，看来标准库毕竟是我的朋友。我一直在寻找的是 Readline 库。

此处的文档和示例：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html)

特别是，这是该页面中的一个很好的示例，用于显示完成是如何工作的：

```
require 'readline'

LIST = [
  'search', 'download', 'open',
  'help', 'history', 'quit',
  'url', 'next', 'clear',
  'prev', 'past'
].sort

comp = proc { |s| LIST.grep(/^#{Regexp.escape(s)}/) }

Readline.completion_append_character = " "
Readline.completion_proc = comp

while line = Readline.readline('> ', true)
  p line
end 
```

注意： proc 只接收输入的最后一个单词。如果您想要到目前为止键入的整行（因为您想要执行特定于上下文的完成），请将以下行添加到上面的代码中：

```
Readline.completer_word_break_characters = "" #Pass whole line to proc each time 
```

（这默认设置为代表单词边界的字符列表，并且只导致最后一个单词被传递到您的 proc 中）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-15T03:08:48.667

Readline 库非常好，我用过很多次。但是，如果你只是为了好玩而制作它，你也可以自己完成。

这是一个简单的完成脚本：

```
require 'io/console' # Ruby 1.9
require 'abbrev'

word = ""

@completions = Abbrev.abbrev([
   "function",
   "begin"
])

while (char = $stdin.getch) != "\r"
   word += char
   word = "" if char == " "
   if char == "\t"
      if comp = @completions[word = word[0..-2]]
         print comp[word.length..-1]
      end
   else
      print char
   end
end
puts 
```

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2012-12-15T03:55:48.140

好吧，我建议你使用 Emacs 来运行你的命令行 Ruby 应用程序。在 Emacs 中，我的 SO 朋友最近帮我解决了自动完成选项卡补全问题（[此处](https://stackoverflow.com/questions/13465151)和[此处](https://stackoverflow.com/questions/13472163)）。自动完成似乎是迄今为止最智能的单词完成工具。

# glassfish - 在 Cloudbees 上对嵌入式 Glassfish 进行单元测试

> ID：13876025
> 
> 赞同：2
> 
> 时间：2012-12-14T09:38:52.947
> 
> 标签：glassfish, cloudbees

我的 REST 应用程序在执行 TestNG 测试之前加载了一个嵌入式 Glassfish（实际上是与 REST 资源建立 HTTP 连接）。我的问题是：

1.  如果我在 Cloudbees 上构建应用程序，Jenkins for CI 可以工作吗？
2.  Jenkins 是否仍会通过端口 8080 运行嵌入式 Glassfish，并使用 HTTP 协议执行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:59:37.500

您不应该依赖硬编码的端口 8080，而是使用动态分配的端口（您可以使用 jenkins[端口分配器](https://wiki.jenkins-ci.org/display/JENKINS/Port+Allocator+Plugin)插件）。如果你使用它来构建，Maven 也可以使用[build-helper](http://mojo.codehaus.org/build-helper-maven-plugin/reserve-network-port-mojo.html)插件提供这样一个随机的自由端口。

# c# - C# 密钥在签署 pdf 时在指定状态下无效

> ID：13876026
> 
> 赞同：0
> 
> 时间：2012-12-14T09:38:55.460
> 
> 标签：c#, itextsharp

我有一个数字证书，我想用它对 PDF 文件进行数字签名，因此，我正在用 C# 开发一个软件......我正在使用 iTextSharp 和 BouncyCastle API 以及 .NET 的核心库......

我有一个名为 x509 的 x509Certificate2 证书对象，我需要用它找出像这样的 Org.BouncyCastle.Crypto.AsymmetricCipherKeyPair 对象

```
Org.BouncyCastle.Crypto.AsymmetricCipherKeyPair cert = DotNetUtilities.GetKeyPair(x509.PrivateKey); 
```

然后我将它添加到 iTextSharp 提供的以下行

```
PrivateKeySignature pks = new PrivateKeySignature(cert.Private,DigestAlgorithms.SHA256); 
```

但包含“GetKeyPair”的前一行收到一个异常，告知密钥在指定状态下无效。

无法弄清楚这背后的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-25T19:27:39.710

要检查的一件事是，当证书加载到证书存储时，允许导出选项被选中。这不是导致此失败的唯一原因，但它是一个原因。

# github - GitHub 存储库大小图

> ID：13876035
> 
> 赞同：2
> 
> 时间：2012-12-14T09:39:49.953
> 
> 标签：github, metrics

我想看到一个回购总规模随时间变化的图表。

（这很有用，因为它可以帮助查看人们是否不小心签入了他们不应该签入的东西，例如二进制文件等）

标准的 github 图表显示了许多有趣的东西，但据我所知，并不是这个简单的指标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:11:06.993

您是否考虑过尝试**[GitHub Archive 项目](http://www.githubarchive.org/)**？

如主页所述

> GitHub Archive 是一个用于**记录**公共 GitHub 时间线、将其**存档**并**使其易于访问以供进一步分析**的项目。

GitHub Archive 提供可下载的 json 数据集，并通过**[Google BigQuery](https://developers.google.com/bigquery/)**提供其内容以方便在线分析（有关此主题和示例查询的更多信息，请参阅此**[文档）。](https://github.com/igrigorik/githubarchive.org/tree/master/bigquery#google-bigquery--github-archive)**

**注意：** GitHub 时间线数据从 2011 年 2 月 12 日开始提供。

## 更新：

如果您的存储库是私有的，您可能必须回**[退到 GitHub API](http://developer.github.com/v3/repos/#get)**并考虑该`size`成员。为了绘制图表，您必须触发对 API 的定期调用并在本地存储结果。

*   *语法*：`/repos/:user/:repo [GET]`
*   *示例：* [https ://api.github.com/repos/libgit2/libgit2](https://api.github.com/repos/libgit2/libgit2)

# asp.net - 当没有找到 Action 时，重复的路由需要回退到下一个匹配的路由

> ID：13876038
> 
> 赞同：2
> 
> 时间：2012-12-14T09:40:01.823
> 
> 标签：asp.net, routing, webforms, asp.net-web-api, asp.net-routing

我有一种情况，我需要在 ASP.NET WebForms 应用程序中覆盖旧 HttpHandler API 中的方法。我使用 WebAPI 作为新 API 的基础，它运行良好，除了在新 API 中找不到操作时我需要路由回退。目前这不是真的，相反，只要 WebAPI 控制器没有匹配的操作，我就会得到“404：未找到”。

**我对新 API 的路由如下：**

```
var apiroute = routes.MapHttpRoute(
    "API Default",
    "api/{language}-{country}/{controller}/{action}/{id}",
    new { id = RouteParameter.Optional }
); 
```

**旧的 Httphandler API 注册它们的路由如下（顺序在 WebAPI 路由之后）：**

```
var route = new Route("api/{language}-{country}/Person/{command}", this);
RouteTable.Routes.Add(route); 
```

如果有一个带有 List 操作的 PersonController，我希望 /api/en-US/Person/List 匹配第一条路线，但如果没有，则回退到旧的 api。

***问题：**是否可以将过滤器添加到第一个路由以仅在控制器上确实可用操作时才匹配？我还能怎么做到这一点？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:08:10.533

**更新**

您可能还想研究[基于属性的路由](http://attributerouting.net/)，这可能是一个更简洁的解决方案，只有您使用路由属性注释的操作才会与路由匹配，这可能会帮助您实现您想要的。

**或者**

尽管可能有比这更好的方法，但如果您实现自定义，`IRouteConstraint`例如[this article](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs) ，它是可能的。

您可以改进的高度粗略和现成的方法如下：

```
public class IfActionExistsConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var actionName = values["Action"] as string;

        if (actionName == null)
        {
            return false;
        }

        var controllerName = values["Controller"] as string;
        var controllerTypeResolver = GlobalConfiguration.Configuration.Services.GetHttpControllerTypeResolver();
        var controllerTypes = controllerTypeResolver.GetControllerTypes(GlobalConfiguration.Configuration.Services.GetAssembliesResolver());
        var controllerType = controllerTypes.SingleOrDefault(ct => ct.Name == string.Format("{0}Controller", controllerName));

        if(controllerType == null)
        {
            return false;
        }

        return controllerType.GetMethod(actionName, BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance) != null;
    }
} 
```

**登记：**

```
var apiroute = routes.MapHttpRoute(
    name: "API Default",
    routeTemplate: "api/{language}-{country}/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional },
    constraints: new { IfActionExistsConstraint = new IfActionExistsConstraint() }
); 
```

# ruby - Ruby 异常的文档

> ID：13876039
> 
> 赞同：4
> 
> 时间：2012-12-14T09:40:06.850
> 
> 标签：ruby

我是 Ruby 的新手，来自 Java 世界。

我只想在 Ruby 中复制一个文件：http: [//apidock.com/ruby/FileUtils/cp](http://apidock.com/ruby/FileUtils/cp)

但是，文档没有说明会引发哪些异常。与 Javadocs 比较：

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.nio.file.Path, java.nio.file.Path, java.nio. file.CopyOption...)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29)

如果不查看 FileUtils 的源代码，有没有办法判断哪些异常可能会引发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T11:13:00.513

无法保证在 Ruby 中会引发哪个异常。用户可以发送中断，您的文件系统可能无法写入，等等。Ruby 对此不做任何保证。但是对于文件操作，我可能会从 IOError 及其子项 EOFError 开始。

这可能会提供处理非异常（合理预期）事件的能力，例如文件不存在，或没有读取访问权限或没有写入访问权限，这些事情您可以编程，并救援和尝试处理。

您还可以编写自己的异常，引发自定义异常（可能继承 StandardError）并提供适当的操作或反馈。

这是刚刚从我的计算机使用 Ruby 1.9.3-p327 生成的当前异常层次结构

```
BasicObject
  Exception
    NoMemoryError
    ScriptError
      LoadError
        Gem::LoadError
      NotImplementedError
      SyntaxError
    SecurityError
    SignalException
      Interrupt
    StandardError
      ArgumentError
      EncodingError
        Encoding::CompatibilityError
        Encoding::ConverterNotFoundError
        Encoding::InvalidByteSequenceError
        Encoding::UndefinedConversionError
      FiberError
      IOError
        EOFError
      IndexError
        KeyError
        StopIteration
      LocalJumpError
      Math::DomainError
      NameError
        NoMethodError
      RangeError
        FloatDomainError
      RegexpError
      RuntimeError
        Gem::Exception
          Gem::CommandLineError
          Gem::DependencyError
          Gem::DependencyRemovalException
          Gem::DocumentError
          Gem::EndOfYAMLException
          Gem::FilePermissionError
          Gem::FormatException
          Gem::GemNotFoundException
          Gem::GemNotInHomeException
          Gem::InstallError
          Gem::InvalidSpecificationException
          Gem::OperationNotSupportedError
          Gem::RemoteError
          Gem::RemoteInstallationCancelled
          Gem::RemoteInstallationSkipped
          Gem::RemoteSourceException
          Gem::VerificationError
      SystemCallError
      ThreadError
      TypeError
      ZeroDivisionError
    SystemExit
      Gem::SystemExitException
    SystemStackError
    fatal 
```

# c++ - 带有 Dev C++ 的 jwsmtp 库

> ID：13876040
> 
> 赞同：0
> 
> 时间：2012-12-14T09:40:10.857
> 
> 标签：c++, smtp

我正在尝试将[jwsmtp 库](http://sourceforge.net/projects/jwsmtp/)与 dev c++ 一起使用，但出现链接器错误。有人知道如何将它与 dev c++ 一起使用吗？实际上，我必须从我的 c 程序发送一封带有附件的电子邮件，所以我正在尝试使用它，但如果有人有其他选择，我将不胜感激。

```
 [Linker error] main.o:main.cpp:(.text+0x12c): undefined reference to `jwsmtp::mailer::send()' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:45:08.150

从您收到的错误消息来看，该库似乎没有与您的程序正确链接。因此，请确保 JWSMTP 包含在您的最终可执行文件中。正确链接图书馆，你会很高兴。如果尚未完成，请转到 Dev C++ 的编译器选项并在此处添加库路径[在我的 Dev C++ Ide 版本中，它位于菜单 -> 工具 -> 编译器选项 -> 目录选项卡 -> 库] [顺便说一句，我没有评论的声誉。:(所以我将其发布为答案。如果这不能解决您的问题，我将删除它]

# c# - 为什么 Xelement.Parse() 会抛出异常？

> ID：13876044
> 
> 赞同：0
> 
> 时间：2012-12-14T09:40:20.607
> 
> 标签：c#, xaml, exception

```
XElement.Parse("<Style TargetType=\"TextBlock\" x:Key=\"LabelStyle\"><Setter Property=\"TextWrapping\" Value=\"Wrap\"/></Style>"); 
```

这会引发异常，为什么？

我想加入一个带有一些样式的 XML 文档，以便它在应用程序中动态呈现正确，因为该文档缺少一些样式（即这个）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:42:54.900

我想问题是您使用的命名空间别名为`x`，但没有表明该命名空间别名的*含义*- 它对应于什么 URI。

如果你包括

```
xmlns:x="http://...." 
```

（使用适当的命名空间 URI）然后我怀疑它会没事的。

# c++ - 读入一个文件并将其分成 100 个较小的文件非常慢

> ID：13876045
> 
> 赞同：2
> 
> 时间：2012-12-14T09:40:20.700
> 
> 标签：c++, c, file, file-io

所以我正在阅读相对较大的文件（> = 1GB），其中包含数百万条记录，每条记录都属于一个特定的组。有100组。为了更有效地处理数据，我创建了 100 个文件，每组 1 个。（在追加模式下使用 fopen。）当我从大文件中读取记录时，我将每个记录写入相应的小文件。我保持所有文件的文件指针始终打开，这样我就不会打开和关闭每条记录的文件。

这需要非常长的时间，并且读入（和写）的速度不是恒定的。它开始很快，然后会慢慢爬行，然后再次加速，然后缓慢。读取的文件越多，情况似乎越糟。

关于正在发生的事情的一种可能性是，随着它们变得越来越大，较小的文件需要重新定位到存储中。这将是令人惊讶的，因为我有 47GB 的空闲空间（约 500 个）。但我想不出别的。我会看看重新碎片是否有帮助，但与此同时，有人知道发生了什么以及如何解决这个问题吗？有没有办法预先指定要创建的文件的大小，类似于`std::vector::reserve`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:28:16.007

您只是看到文件系统缓存填满容量的副作用，然后必须等到空间被实际写入磁盘的数据释放。这是冰川缓慢的。虽然缓存中有空间，但 write() 调用会执行内存到内存的复制，以每秒 5 GB 或更高的速度运行。磁盘写入速度很少优于 30 兆字节/秒。巨大的差异，当缓存已满时，您正在测量磁盘写入速度。

您将需要更多 RAM 或更快的磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:53:42.813

如果您无法或不愿意重组程序以一次写入一组，请为每个“小”文件（使用`setbuf`, `setvbuf`）设置更大的缓冲区。这样做的效果是缓冲区刷新到磁盘将表现出更多的“局部性”，即不是将 X 量的数据刷新 100 次到 100 个不同的文件，而是将 10 倍的数据量刷新到 100 个不同的文件 10 次。

测试用例程序（故意没有错误检查）：

```
-- hugefile.h --

struct record
{
  unsigned int group;
  char data [1020];
};

--- gen-hugefile.c ---

#include <stdio.h>
#include <stdlib.h>

#include "hugefile.h"

int
main (int argc, char **argv)
{
  unsigned int i, nrecords = strtol (argv [1], 0, 10);
  FILE *f;

  f = fopen ("hugefile.db", "w");

  for (i = 0; i < nrecords; ++i)
    {
      struct record r;
      r.group = rand () % 100;

      fwrite (&r, sizeof r, 1, f);
    }

  fclose (f);
  return 0;
}

--- read-hugefile.c ---

#include <stdio.h>
#include <errno.h>
#include <stdlib.h>

#include "hugefile.h"

FILE *in;
FILE *out[100];

int
main ()
{
  int i;
  char name [128];
  in = fopen ("hugefile.db", "r");

#ifdef BUFFER
  setvbuf (in, malloc (2*BUFFER), _IOFBF, 2*BUFFER);
#endif

  for (i = 0; i < 100; ++i)
    {
      sprintf (name, "out/file%03d.db", i);
      out [i] = fopen (name, "w");
#ifdef BUFFER
      setvbuf (out [i], malloc (BUFFER), _IOFBF, BUFFER);
#endif
    }

  struct record r;
  while ((i = fread (&r, sizeof r, 1, in)) == 1)
    fwrite (&r, sizeof r, 1, out [r.group]);

  fflush (0);
  return 0;
}

velco@sue:~/tmp/hugefile$ ls
gen-hugefile.c  hugefile.h  read-hugefile.c
velco@sue:~/tmp/hugefile$ gcc -O2 gen-hugefile.c -o gen-hugefile
velco@sue:~/tmp/hugefile$ ./gen-hugefile 1000000
velco@sue:~/tmp/hugefile$ ls -lh
total 978M
-rwxrwxr-x 1 velco velco 8.5K Dec 14 13:33 gen-hugefile
-rw-rw-r-- 1 velco velco  364 Dec 14 13:31 gen-hugefile.c
-rw-rw-r-- 1 velco velco 977M Dec 14 13:34 hugefile.db
-rw-rw-r-- 1 velco velco   61 Dec 14 12:56 hugefile.h
-rw-rw-r-- 1 velco velco  603 Dec 14 13:32 read-hugefile.c
velco@sue:~/tmp/hugefile$ gcc -O2 read-hugefile.c -o read-hugefile
velco@sue:~/tmp/hugefile$ gcc -O2 -DBUFFER=1048576 read-hugefile.c -o read-hugefile-buf
velco@sue:~/tmp/hugefile$ mkdir out
velco@sue:~/tmp/hugefile$ time ./read-hugefile

real    0m34.031s
user    0m0.716s
sys 0m6.204s
velco@sue:~/tmp/hugefile$ time ./read-hugefile

real    0m25.960s
user    0m0.600s
sys 0m6.320s
velco@sue:~/tmp/hugefile$ time ./read-hugefile-buf

real    0m20.756s
user    0m1.528s
sys 0m5.420s
velco@sue:~/tmp/hugefile$ time ./read-hugefile-buf

real    0m16.450s
user    0m1.324s
sys 0m5.012s
velco@sue:~/tmp/hugefile$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:42:08.577

在一个进程中只有 100 个打开的文件，或者在一个目录中只有 100 个文件，不应该成为现代系统的瓶颈。但是可以同时随机访问 101 个文件和总共 2 GB 的数据。

我会这样做：

从大文件中读取一些记录，将每种类型的记录存储到内存中自己的列表中。读取大约 10 兆字节的记录可能足够大，您将获得不错的性能，但这取决于可用的 RAM（您*不想*使用太多以至于操作系统开始为此使用交换文件......）。

然后一次一个地浏览内存中的 100 个记录列表，*并一次*追加到*一个文件*。您可以保持所有文件打开，这可能不是问题，但您也可以根据需要尝试关闭和打开它们，这样一次处理一个文件不会有太多开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:27:18.350

听起来您可以在内存中对它们进行排序，然后一次将它们写出一组。

# haskell - 为什么 cabal 工具不使用 Setup.lhs/Setup.hs？

> ID：13876047
> 
> 赞同：19
> 
> 时间：2012-12-14T09:40:36.847
> 
> 标签：haskell, build-process, cabal

我在 Setup.lhs 的函数中添加了`putStrLn "Hello"`一行`main`，并希望在运行时看到它`cabal configure`或`cabal build`. 但我没有。

然后我编译`Setup.lhs`并`ghc --make`运行`./Setup configure`并显示该行。

如果是故意这样做的，我看不出这背后的理由，甚至根本不需要`Setup.lhs`存档。你能帮我清除这些东西吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T09:49:44.843

你很可能有

```
build-type: Simple 
```

在你的`.cabal`文件中。如果您选择`Simple`构建类型，您基本上保证您的`Setup`文件除了调用之外什么都不做`defaultMain`，并且`cabal`二进制文件不会调用它。如果要确保`Setup`每次都运行文件，请将行更改为

```
build-type: Custom 
```

您还询问了`Setup`无论如何都需要该文件的理由：实际上，如果您使用构建类型，*则不需要它。*二进制文件将很乐意在没有的情况下配置和安装它`Simple`。`cabal`然而，为任何包包含一个文件被认为是一种很好的风格`Setup`，因为它允许用户安装有`Cabal`可用库的包，但不能安装`cabal-install`工具（因此，Hackage 强制文件的存在`Setup`）。

# extjs - ExtJS 4.1 网格面板加载时间过长，条目超过 10k

> ID：13876048
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:40:45.833
> 
> 标签：extjs, grid, buffer, store, extjs4.1

今天有个新问题（第一个：[ExtJS 4.1 How to create a window with grid dynamic](https://stackoverflow.com/questions/13860345/extjs-4-1-how-to-create-a-window-with-grid-dynamically)）

因此，恢复我的应用程序是显示有关汽车的数据。我像这样加载我所有的汽车（超过 10k）：

```
Ext.create('Ext.data.Store', {
    storeId: 'CarStore',
    model: 'Car_Model',
    proxy: {
        type: 'ajax',
        url: './cars.json',
        reader: 'json'
    },
    autoLoad: {
        callback: displayMenu
    }
}); 
```

我的`displayMenu`功能显示一个带有如下按钮的菜单：

```
- Brand1
    - Model1
    - Model2
- Brand2
    -Model1
- Etc
- All Cars 
```

因此，当我创建我的按钮（取决于我的 json 商店中的品牌/型号）时，我会这样做（以模型按钮为例）：

```
var CarStore = Ext.data.StoreManager.lookup('CarStore');
var aCarButton= Ext.create('Ext.Button', {
    text: myModelText,
    handler: function(button, e) {
        var grid = Ext.create("CarsGrid", { store: CarStore });
        grid.filterByModel(myModelText);
        var win = Ext.create("CarsWindow", { title: myModelText, items: [ grid ] });
        win.show();
    }
});
aMenuPanel.add(aAircraftButton); 
```

因此，当我单击一个按钮时，该按钮会在窗口中的网格中显示品牌/型号的所有汽车。

我的问题是在显示我的数据之前加载模型大约需要 5 秒，品牌需要 10 秒，所有汽车需要 2 分钟。

PS：我使用同一个商店来创建按钮并显示所有网格，但使用过滤器（按品牌、型号或无），就像您`grid.filterByModel(myModelText);`
在我之前的答案中看到的那样，VoidMain 建议我使用`buffered: true`，但是当我单击时会产生错误一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:08:36.977

您正在创建带有子菜单的菜单，对吗？

1）不要在此菜单上添加所有品牌的所有型号。这是 10K 元素老兄，没有人会浏览整个菜单！更糟糕的是，如果访问者正在搜索特定的汽车型号............（想象一下在这样的大菜单中找到它需要多少时间！）。

好的，解决方案。

首先，在 PHP 中使用缓存。IDK 你正在使用什么框架/CMS，Wordpress 有内置的缓存接口，可以通过插件实现。您无需对每个页面加载进行查询，而是将结果存储在 HD 中并使用它。

其次，更好地组织您的网站。与其在一个大菜单中信任其所有内容访问，不如为每个模型创建帖子、为品牌创建类别等。创建一个列出品牌的页面，链接到一个列出模型的页面等。您已经在数据库中拥有这些数据， PHP 可以构建动态 HTML 来列出它们，而使用 CSS 你可以使这些列表非常漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:51:51.787

如果分页或缓冲绝对不是一个选项，您可以尝试提高超时设置：

```
Ext.create('Ext.data.Store', {
    storeId: 'CarStore',
    model: 'Car_Model',
    proxy: {
        type: 'ajax',
        url: './cars.json',
        reader: 'json',
        timeout: 180000 //3 minutes * 60 sec/min * 1000 millis/sec
    },
    autoLoad: {
        callback: displayMenu
    }
}); 
```

# cakephp - 如何获取cakephp递归数据

> ID：13876052
> 
> 赞同：0
> 
> 时间：2012-12-14T09:41:04.160
> 
> 标签：cakephp, tree, recursive-query

```
CREATE TABLE IF NOT EXISTS `employees` (
  `employees_id` int(11) NOT NULL AUTO_INCREMENT,
  `employees_firstname` varchar(100) DEFAULT NULL,
  `employees_middlename` varchar(45) DEFAULT NULL,
  `employees_lastname` varchar(100) DEFAULT NULL,
  `employee_gender` enum('M','F') NOT NULL,
  `employees_dob` date DEFAULT NULL,
  `employees_emailaddress` varchar(255) DEFAULT NULL,
  `employees_password` varchar(45) DEFAULT NULL,
  `employees_datejoined` date DEFAULT NULL,
  `employees_code` varchar(45) DEFAULT NULL,
  `employees_status` tinyint(1) DEFAULT '1',
  `employees_mobile` varchar(15) DEFAULT NULL,
  `employees_designation` int(11) DEFAULT NULL,
  `employees_bussiness_account` int(11) DEFAULT NULL,
  `employees_image` varchar(255) DEFAULT NULL,
  `employees_supervisers_id` int(11) DEFAULT NULL,
  `employees_work_location_id` int(11) DEFAULT NULL,
  `employees_date_added` datetime DEFAULT NULL,
  PRIMARY KEY (`employees_id`),
  UNIQUE KEY `employees_code_UNIQUE` (`employees_code`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=20 ;

--
-- Dumping data for table `employees`
--

INSERT INTO `employees` (`employees_id`, `employees_firstname`, `employees_middlename`, `employees_lastname`, `employee_gender`, `employees_dob`, `employees_emailaddress`, `employees_password`, `employees_datejoined`, `employees_code`, `employees_status`, `employees_mobile`, `employees_designation`, `employees_bussiness_account`, `employees_image`, `employees_supervisers_id`, `employees_work_location_id`, `employees_date_added`) VALUES
(16, 'Aneesh', 'C', 'S', 'M', '2012-11-05', 'aneesh.cs@calpinetech.com', '7106499a88fd79197ddbff61829993c9', '2010-12-07', 'cas927', 1, '9876543210', 1, 1, 'Betson.JPG', 0, 1, '2012-11-27 00:00:00'),
(17, 'Betson', 'T', 'Thomas', 'M', '2012-11-05', 'betson@calpinetech.com', '7106499a88fd79197ddbff61829993c9', '2008-12-06', 'cas450', 1, '9876543210', 6, 1, NULL, 16, 1, '2012-11-27 00:00:00'),
(18, 'test', 'test', 'test', 'M', '2012-11-12', 'test@calpinetech.com', '7106499a88fd79197ddbff61829993c9', '2012-11-06', 'cas999', 1, '9876543210', 1, 1, NULL, 16, 1, '2012-11-27 00:00:00'),
(19, 'asdsa', 'asdsad', 'asdsad', 'M', '2012-12-03', 'test@calpinetech.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', '2012-12-24', 'ca0999', 1, '9876543210', 1, 1, NULL, 17, 1, '2012-12-04 00:00:00'); 
```

这是我的桌子。这里`employees_supervisers_id`是`employees_id`. 我们如何通过cakephp获取递归数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:25:59.933

要构建一棵树，您需要使用[TreeBehavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)，并在模型中具有`parent_id`和/或`lft`字段`rght`。

`lft`并且`rght`用于[MPTT](http://www.sitepoint.com/hierarchical-data-database-2/)数据

在您的情况下，您可以配置行为以使用您的`employees_supervisers_id`字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:25:46.450

我认为您正在尝试在同一个表中的记录之间创建父/子关系。如果这是您所要求的，您可以在 Employee 模型中创建这些关系，如下所示：

```
public $belongsTo = array(
    'Supervisor' => array(
        'className' => 'Employee',
        'foreignKey' => 'employee_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
);

public $hasMany = array(
    'Underlings' => array(
        'className' => 'Employee',
        'foreignKey' => 'employees_supervisers_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:01:44.990

如果您创建模型之间的关系，CakePHP 默认会获取它。

如果你这样做：

```
$employees = $this->Employee->find('all'); 
```

并且您已经创建了模型之间的关系，您将能够通过以下方式访问递归数据：

```
$employees['Employee']['Supervisor']['employees_firstname']; 
```

我建议您查看有关模型之间链接的文档：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

# javascript - 通过在 .find() 之后链接插件导致意外的 jQuery 语法错误

> ID：13876055
> 
> 赞同：1
> 
> 时间：2012-12-14T09:41:08.640
> 
> 标签：javascript, jquery, jquery-plugins, syntax-error

我已经烘焙了一个`plug-in`来处理我在一个大网站上使用的输入字段的运行时搜索。

该插件在任何情况下都能完美运行，但这个[http://jsfiddle.net/tonino/v8d2A/](http://jsfiddle.net/tonino/v8d2A/)

```
$(document).ready(function () {
    var callback_methods = { /* methods here */ };
    var input_html = '<div class="search"><input name="search-field" value="Search..."></div>';
    $(document).on('click', 'div.add', function (event) {
        if (!$('li div.add + div').hasClass('search')) {
            var input = $(this).after(input_html).parent().find('input');
            input.focus();
            input.hunter({url:'<?php echo $this->request->base; ?>/searches', callback:callback_methods, var_name:'data[Search][term]'});
            // other code after
        }
    });
});​ 
```

如果我评论猎人插件一切正常。

我确定它必须如何构造一些概念，这里是代码：[jquery.hunter.1.3.js](http://vittoriovittori.com/file/jquery.hunter.1.3.js)

为什么我`plug-in`在这种情况下犯这个错误，我写错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:04:00.890

问题是您的代码的这一部分：

```
var selector = this.selector;

var def_css = {backgroundPosition:'-16px center', paddingLeft:$(selector).css('padding-left')}
if (settings.loader) { setStyle(def_css); }
   var selector = this.selector; 
```

然后：

```
$(this.selector).blur(function () { 
```

首先，当满足 if 条件时，您的代码将无法工作，因为您试图在 if 块中重新声明变量“选择器”。把 var 语句留在外面：

```
if (settings.loader) { setStyle(def_css); }
  selector = this.selector; 
```

但您的主要问题是“this.selector”包含“.parent() 输入”，我怀疑这是一个有效的 jQuery 选择器。

你为什么这样做？为什么不直接使用 $(this) 将其保存到变量中并使用它？？？

例如：

```
// first line in your plugin
$this = $(this) 

// later you could use the $this var
$this.blur(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:08:11.157

要摆脱错误更改此行：

```
var input = $(this).after(input_html).parent().find('input'); 
```

到以下：

```
var input = $(input_html).insertAfter($(this)); 
```

核心问题是`jquery.hunter`插件出于某种原因正在使用该`this.selector`变量 - 你不需要这个 - 插件应该使用`$(this)`而不是`$(this.selector)`

# android - Facebook Android 签到

> ID：13876059
> 
> 赞同：0
> 
> 时间：2012-12-14T09:41:31.777
> 
> 标签：android, facebook, facebook-checkins

好的，所以我一直在研究 facebook api 并注意到他们发布了一个新的 SDK。我一直在尝试对已知地点 ID 进行签到。

我已经看到`facebook.request("me/checkins", params, "POST");`使用 facebook 实例签入的帖子。

我意识到签到已贬值，我应该使用位置/地点 ID 来发布。当我想搜索过去 24 小时内去过该地点的所有朋友时，问题就来了。我不想过滤所有朋友的帖子来检索那些我知道位置的帖子。

通过签入，我只需调用 placeid/签入并过滤掉所有太旧而无所谓的签入。

有没有人得到签到工作使用`Request`？是否有一个图形路径可以让我将签到张贴到一个地方？我/签到也许？

我正在尝试使用类似的东西，`Request(session, "me/checkins", parameters, POST)`但到目前为止我一直没有成功。

如果没有办法使用 Session 和 Request 做到这一点，那么 Facebook 和 asyncFacebook 跑步者是否可以很好地与 SSO 配合使用？它们可以混合使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:23:53.267

这是我发布签到的代码。

```
params.putString("place", "166793820034304");
params.putString("message", "checking in "
params.putString("coordinates", "{\"longitude\":-122.1477782,\"latitude\":37.48566}");
Request.Callback callback6 = new Request.Callback() {
    public void onCompleted(Response response) {
        // response here
    }
};
Request request6 = new Request(session, "me/checkins", params, HttpMethod.POST, callback6);
RequestAsyncTask task6 = new RequestAsyncTask(request6);
task6.execute(); 
```

# c# - 在同步框架应用程序中，同步过程在上传过程中不考虑过滤条件（即从远程到服务器数据库）

> ID：13876061
> 
> 赞同：0
> 
> 时间：2012-12-14T09:41:35.550
> 
> 标签：c#, sql-server-2008, microsoft-sync-framework

每当我更改过滤条件时，我都会取消配置模板。当我同步数据库时，当我在中央数据库进行一些更改时，使用过滤条件正确同步数据。

但是，当我在远程数据库进行一些更改时，所有记录都会同步并上传到服务器数据库，而不管过滤条件如何..

谁能告诉我我错过了什么。

如果你们不清楚，我也可以给你们看一些代码。告诉我哪个功能或者我应该告诉你什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:36:05.210

您如何配置客户端？如果您使用从服务器范围获取范围描述，则它返回的范围定义不包括过滤器。

# jquery - jQuery快速切换fadeIn/fadeOut，即使没有完成

> ID：13876064
> 
> 赞同：2
> 
> 时间：2012-12-14T09:41:53.177
> 
> 标签：jquery, fade, skip

> **可能重复：**
> [jQuery：中断淡入（）/淡出（）](https://stackoverflow.com/questions/3620811/jquery-interrupting-fadein-fadeout)

jQuery中的淡入淡出效果真的很流畅，我只见过一个问题：当你将鼠标悬停在项目上时，它会淡入，现在如果你快速将鼠标悬停在项目外激活淡出，fadeOut效果会等待直到 fadeIn 完成，这看起来很奇怪。

一旦您激活悬停，fadeIn 效果是否可以停止在任何值，以便立即执行fadeOut？

这是我的代码

```
$(document).ready(function () {

$("#menu").hover(
   function() {
     $("#fade").fadeIn(300);
   },
   function() {
     $("#fade").fadeOut(300);
   }
);

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:43:08.990

告诉 jQuery 在开始新动画之前停止当前动画：

```
$("#menu").hover(
   function() {
     $("#fade").stop().fadeIn(300);
   },
   function() {
     $("#fade").stop().fadeOut(300);
   }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:43:23.717

只是在`stop`之前添加`fadeIn`。

```
 $("#fade").stop(true,true).fadeIn(300) 
```

# class - 让我的 getter 方法更改存储值是不好的做法吗？

> ID：13876066
> 
> 赞同：70
> 
> 时间：2012-12-14T09:41:55.290
> 
> 标签：class, lazy-loading, lazy-evaluation, getter-setter

在我的课堂上更改我的 getter 方法（如第 2 版）是不好的做法。

版本 1：

```
 public String getMyValue(){
     return this.myValue
 } 
```

版本 2：

```
 public String getMyValue(){

    if(this.myValue == null || this.myValue.isEmpty()){
       this.myValue = "N/A";
    }

    return this.myValue;
 } 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-14T09:51:52.750

**如果你的getter**方法改变了对象的内部状态，我认为这实际上是一个非常糟糕的做法。

为了达到同样的效果，我建议只*返回*`"N/A"`.

*   一般来说，这个内部字段可能用于其他地方（内部），您不需要使用 getter 方法。所以最后，调用`foo.getMyValue()`实际上可以改变`foo`.

或者，从`null`to的转换`"N/A"`可以在**setter**中完成，即内部值可以设置为`"N/A"`if`null`被传递。

* * *

一般性评论：
我只会添加状态，例如`"N/A"`某些 API 或其他依赖您的代码的实例是否期望它们。如果不是这种情况，您应该依赖您的编程语言中可用的标准空类型。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-14T09:50:26.173

在我看来，除非你正在这样做`lazy-loading`（在那种情况下你不是），否则吸气剂不应该改变这个值。所以我要么：

将更改放入设置器中

```
public void setMyValue(String value) {
    if(value == null || value.isEmpty()){
        this.myValue = "N/A";
    } else {
        this.myValue = value;
    }
} 
```

或者，如果值设置不正确，则让 getter 返回默认值：

```
public String getMyValue() {
    if(this.myvalue == null || this.myvalue.isEmpty()){
        return "N/A";
    }    
    return this.myValue;
} 
```

在延迟加载的情况下，我会说在 getter 中更改您的成员很好，您可以执行以下操作：

```
public String getMyValue() {
    if (this.myvalue == null) {
        this.myvalue = loadMyValue();
    }    
    return this.myValue;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-14T14:53:27.393

不，你在这里做两件事。获取和设置。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-14T10:04:48.567

是的。这是一个**不好的做法。**

为什么？

当值被设置时（在构造函数或 setter 方法中），它应该被验证，而不是在调用 getter 方法时。为此创建一个`private` `validate*`方法也是一个好主意。

```
private boolean validateThisValue(String a) {
     return this.myValue != null && !this.myValue.isEmpty();
}

public void setThisValue(String a) {
    if (validateThisValue(a)) {
        this.myValue = a;
    } 
    else {
        // do something else
        // in this example will be
        this.myValue = "N/A";
    }
} 
```

而且，在 getter 方法中，永远不要改变对象的状态。我做过一些项目，经常必须做getter `const`：“这种方法不能改变内部状态”。

至少，如果您不想使事情复杂化，在 getter 方法中，您应该**返回** `"N/A"`而不是**更改**内部状态并设置`myValue`为`"N/A"`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-14T17:48:11.063

我通常定义一个特定的`getter`.

切勿更改原件`getter`：

```
 public String getMyValue(){
     return this.myValue
 } 
```

并创建一个特定的`getter`：

```
public String getMyValueFormatted(){

    if(this.myvalue == null || this.myvalue.isEmpty()){
       return "N/A";
    }else{
       return this.myValue;
    }
 } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-14T09:48:27.777

我认为最好初始化`this.myValue = "N/A"`. 后续调用`setMyValue`应`this.myValue`根据您的业务条件进行修改。
不应该以`getMyValue`任何方式修改`this.myValue`。如果您需要返回某个值，则应返回该值（如“N/A”）而不是 alter `this.myValue`。Getter 不得修改成员的值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-12-14T10:11:10.143

我确实认为这是一种*不好的做法*，除非并且直到您解释为什么有必要在 getter 方法中修改对象而不是在 setter 方法中进行修改的原因。
您是否觉得由于某种原因无法做到这一点？你能详细说明一下吗？

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-12-14T12:41:51.937

做任何你喜欢的事。毕竟 getter 和 setter 只是另一种公共方法。您可以使用任何其他名称。

但是，如果您使用类似 的框架`Spring`，则必须使用这些标准名称，并且永远不要将自定义代码放入其中。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-12-14T17:56:50.923

绝对是的，这是一种不好的做法。

想象一下，您通过网络与第三方（远程处理、COM、...）进行通信，这将增加往返行程，然后影响应用程序性能。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-12-14T09:46:32.460

我会更好地更改 setter 方法，因此，如果值为`null`或为空，则将`N/A`分配给属性。因此，如果您在类 (vg `toString()`) 内的其他方法中使用该属性，您将在那里获得预期的值。

或者，更改 setter 方法以在设置的值不正确时启动异常，因此程序员被迫在设置值之前改进其处理。

除此之外，没关系。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-12-15T01:58:06.823

setter 可以作为验证的一部分进行修改，但 getter 应该返回值并让调用者完成验证。如果您**确实**进行了验证，那么应该如何记录。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-12-14T16:14:16.303

这实际上在很大程度上取决于您要使用 get() 方法执行的合同。根据按合同设计的约定，调用者必须确保满足先决条件（这意味着在 setter 方法中进行验证通常实际上是糟糕的设计）和被调用者（我不知道这是否是正确的英文术语即，被调用者）确保满足后置条件。

如果你定义了你的合约，使得 get() 方法不允许改变对象，那么你就违反了你自己的合约。考虑实现类似的方法

```
public isValid() {
    return (this.myvalue == null || this.myvalue.isEmpty());
} 
```

这种方法的优点是您不必检查 get() 的返回是否为“N/A”或其他内容。这也可以在调用 set() 之前调用，以验证您没有在对象中插入非法值。

如果要设置默认值，则应在初始化期间进行。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-11-21T10:26:10.797

getter 中的状态变化应该是一个悬而未决的罪行。这意味着客户端代码必须注意它访问 getter 和 setter 的顺序，并且要做到这一点，它必须了解实现。您应该能够以任何顺序调用 getter 并且仍然得到相同的结果。当设置器根据对象的当前状态修改传入值时，会出现相关问题。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-12-14T09:45:16.457

您可以为此目的使用一些价值持有者。像番石榴库中的可选类。

# macros - Go 中的 C 风格宏

> ID：13876068
> 
> 赞同：7
> 
> 时间：2012-12-14T09:42:06.017
> 
> 标签：macros, go

我已经玩了一个星期了，我错过了 C 语言中的预处理器宏。

除了破解管道传递文件的构建脚本之外，我还能用什么来获得这个功能`clang -E`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T06:02:05.343

如评论中所述，构建标志可能是解决您需要的任何问题的最佳方法。例如，如果您希望某些功能仅在开发中可用，请使用`dev`标志：

文件常量_dev.go：

```
// +build dev
const DEVELOPMENT = true 
```

文件常量_pro.go

```
// +build !dev
const DEVELOPMENT = false 
```

然后在你的代码中，做一个简单的`if DEVELOPMENT { blah... }`. 我发现这比任何预处理器都更具可读性。如果您有很多构建标志，这可能会变得非常混乱，但此时您可能应该使用命令行参数。

在您的评论中，您提到了代码重复。如果您的代码确实如此重复，那么您可能应该将它放在一个函数中，或者可能重组代码以重用重复的位。就我个人而言，我发现除了简单的布尔检查之外的任何事情都会导致难以维护代码，尤其是对于 C 风格的宏。

这与泛型相同。在我使用过的一个 Java 库中，类签名是这样的：

```
class Thing<A, B, C, D, E> 
```

该库的文档记录不是很好，因此我必须阅读大量代码（实现和使用该库的代码）才能了解发生了什么。

在 Go 中，该语言强制采用一种通常会导致更好的自记录代码的风格。我认为 Go 开发人员省略了诸如预处理器和泛型之类的东西，以避免编写难以维护但聪明的代码的诱惑。

我建议您在回顾以前使用的旧习语之前先尝试 Go 方式。我想你会发现大多数宏和#defines 的用途在很大程度上是无关紧要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T10:18:12.300

我认为 cpp、m4 或任何可以满足您对 Go 进行预处理的愿望。是否是一个好主意是您的决定，但请注意，任何预处理都是采用任何已发布的 Go 代码的重大障碍。（例如，依赖于 makefile 的构建是同一个故事。）

# symfony - 如何在我的 symfony 链接中添加 ID？

> ID：13876069
> 
> 赞同：0
> 
> 时间：2012-12-14T09:42:10.357
> 
> 标签：symfony

我对 symfony 中的链接系统有疑问。

我使用这样的普通链接：

```
<a href="{{ path('my_path')}}">click me</a> 
```

然后在控制器中对应的动作如下所示：

```
/**
 * @Route("/my_path", name="my_path")
 * @Template()
 */
public function myAction()
{ ... 
```

现在，我在列表中有这个链接，我需要为`item.id`每个链接添加一个。所以控制器看起来像：

```
/**
 * @Route("/my_path/id", name="my_path")
 * @Template()
 */
public function myAction($id)
{ ... 
```

所有这些都在一个循环中：

```
{% for item in items %}
    <a href="{{ path('my_path')}}">click me</a> <br>
{% endfor %} 
```

**如何将 item.id 添加到路径中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:46:13.297

找到了解决方案：

```
{% for item in items %}
    <a href="{{ path('my_path', {'id': item.id})}}">click me</a> <br>
{% endfor %} 
```

# django - 芹菜：在和弦标题中指定链

> ID：13876071
> 
> 赞同：3
> 
> 时间：2012-12-14T09:42:38.653
> 
> 标签：django, celery

如何在和弦标题中指定链？链对象没有方法 s/subtask。

```
chains = []
for format in allowed_formats.keys():
    chains.append(
           chain(
                 covert_audio_file.s(audio_file_instance=audio_file_instance),    
                 upload_audio.s(),
                 mark_ready.s(),
                ) )
chord(
      [c.s() for c in chains],
      body=delete_original_audio.s(audio_file_instance=audio_file_instance)
     ).apply_async() 
```

# ruby-on-rails - 在 Solr 上使用 sunspot_rails 进行搜索时，如何提高整个单词匹配而不是部分单词匹配？

> ID：13876073
> 
> 赞同：4
> 
> 时间：2012-12-14T09:42:51.010
> 
> 标签：ruby-on-rails, solr, sunspot-rails, sunspot-solr

我正在使用`sunspot_rails`向`Solr`实例提交查询。一切正常，但我想使用以下标准对结果进行排序：我想首先获取匹配术语作为单词而不是单词的一部分出现的文档。

因此，如果我有两个文件：

1) 使用 Solr 进行 Solr 搜索非常棒

和

2) Solr 很好的支持自由文本搜索

我正在寻找的术语是 : `search`，然后

我想在结果中获取这两个文档，但我希望文档 (2) 首先出现。

我已经尝试过`order_by :score, :desc`，但它似乎不起作用。除非我找到一种方法来说明“分数”是如何计算的。

在此先感谢帕纳约蒂斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T11:10:25.813

您需要使用 Solr 维护两个字段。
一个带有原始值，另一个带有分析值。例如，`text_org and text (which is analyzed)`
然后您可以相应地调整提升，将原始字段值提升到分析的值，例如`text_org^2 text^1`
记住，如果它与原始值匹配，它也会匹配分析的文本或效果确切的整个单词匹配比正常匹配更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:37:32.667

稍微扩展 Jayendra 的答案，您应该索引到两个单独的字段。

这是 Sunspot 的示例 schema.xml 摘录，来自我对较早问题的回答：[如何在 solr 中提升更长的 ngram？](https://stackoverflow.com/a/8142137/154694)

```
<schema>
  <types>

    <!--
      A text type with minimal text processing, for the greatest semantic
      value in a term match. Boost this field heavily.
    -->
    <fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory" />
        <filter class="solr.StandardFilterFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
    </fieldType>

    <!--
      Looser matches with NGram processing for substrings of terms and synonyms
    -->
    <fieldType name="text_ngram" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory" />
        <filter class="solr.StandardFilterFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true" />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="6" side="front" />
      </analyzer>
    </fieldType>

    <!-- other stuff -->

  </types>
  <fields>

    <!-- other fields; refer to *_text -->

    <dynamicField name="*_ngram" type="text_ngram" ... />

  </fields>
</schema> 
```

在您的`searchable`块中，您可以使用`:as`选项来指定字段名：

```
searchable do 

  text :title
  text :title, :as => :title_ngram

  # ...

end 
```

# unix - 在特定目录上创建文件

> ID：13876082
> 
> 赞同：0
> 
> 时间：2012-12-14T09:43:15.753
> 
> 标签：unix

我想创建一个具有特定扩展名（.done）的文件。我正在使用命令触摸。就像是：

```
touch `basename $UNZIPFILE`".done" 
```

它正在创建文件，但在当前目录中。我想在特定目录中创建此文件。有没有提供目录的选项？

我检查了：[http](http://ss64.com/bash/touch.html) ://ss64.com/bash/touch.html ，但无法弄清楚。

我能想到一个选项是在这个命令之前我可以做一个 cd requiredDIR

有没有其他方法，我可以在同一命令上指定目录，这样我就不必更改目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:46:27.073

只需将目录变量添加到您正在触摸的文件中。

```
touch "$MYDIR/$(basename $UNZIPFILE).done" 
```

如果该目录不存在，则需要创建它。

```
mkdir -p "$MYDIR" && touch "$MYDIR/$(basename $UNZIPFILE).done" 
```

`$(command)`（对于命令替换，最好使用语法而不是反引号。）

# java - 以编程方式在android中获取运营商时间

> ID：13876085
> 
> 赞同：4
> 
> 时间：2012-12-14T09:43:40.253
> 
> 标签：java, android

我在我的应用程序中依赖设备时间，我们为用户制定了时间政策，以便他只能在指定的时间段内使用移动应用程序。当移动设备连接到网络时，设备上的时间将是准确的，但在离线时我们不能信任设备时间，即它必须在没有网络的情况下工作，我不能依赖用户时间。

我觉得学习起来很有挑战性，但我有一点时间来实施，除非删除 offfile 政策，否则任何建议都会很棒:)

谢谢和问候， karthik kondlada

# javascript - javascript-不能在两个类实例之间传递值

> ID：13876086
> 
> 赞同：0
> 
> 时间：2012-12-14T09:43:42.413
> 
> 标签：javascript

我已经定义了一个根对象，我想将其用作其余类的“命名空间”。在这个根对象中，我有两个类——工具和演示。在 PRESENTATION 类中，我需要从 TOOLS 调用公共方法之一。正如我`console.log`在执行此代码的每个步骤中所知道的那样，问题是`return xhr.responseText`不要将任何东西传回给`tools.getData(configPath)`我，我最终会得到`undefined`in `console.log(pres.config)`。

**代码：**

```
// Create Namespace
var AppSpace = AppSpace || {}; 

// Class and Constructor
AppSpace.Tools = function() {

        //public methodts
        this.test = function(arg) {
            return arg                      
        }

        this.getData = function(path) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', path, false);
            xhr.onreadystatechange = function() {
                if (xhr.readyState !== 4) return;
                if (xhr.status !== 0 && xhr.status !== 200) {
                    if (xhr.status === 400) {
                        console.log("Could not locate " + path);
                    } else {
                        console.error("app.getData " + path + " HTTP error: " + xhr.status);
                    }
                    return;
                }
                return xhr.responseText;
              };
              xhr.send();
        } 

}

// Class and Constructor
AppSpace.Presentation = function(initName, initfPath){

        //private properties
        var configPath = initfPath || 'config.json';
        var configData = null;
        var name = initName || 'Unnamed Presentation';  

        //private methods
        var getConfigContent = function() {
            return tools.getData(configPath);
        }

        var getConfigData = function() {
            return JSON.parse(getConfigContent);
        }

        //public methodts

        //public properties
        this.name = null;
        this.config = null;
        this.debug = null;

        //logic
        this.name = name;
        this.config = getConfigContent();

}

//execution
var tools = new AppSpace.Tools();               
var pres = new AppSpace.Presentation('Some Name');

pres.debug = tools.test('value passed')
console.log(pres.debug);
console.log(pres.config);
console.log(pres.name); 
```

浏览器控制台中的输出是：

```
value passed js-oop.dev:99
**undefined js-oop.dev:100**
Some Name js-oop.dev:101 
```

任何人都可以对此提出一些建议吗？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:58:08.973

我的意思是，如果您希望您的 ajax 控件直接从您的函数返回一些数据，您必须使用同步方法。没有它，数据将从 onreadystatechange 事件发送。

这是一个如何为 ajax 创建同步调用的示例

```
// Create Namespace
        var AppSpace = AppSpace || {}; 

        // Class and Constructor
        AppSpace.Tools = function() {

                //public methodts
                this.test = function(arg) {
                    return arg                      
                }

                this.getData = function(path) {
                    var xhr_object= new XMLHttpRequest();
                    // Start synchronous ajax
                    xhr_object.open("GET", path, false);
                    xhr_object.send(null);
                    // Return data
                    return xhr_object.responseText;
                } 

        }

        // Class and Constructor
        AppSpace.Presentation = function(initName, initfPath){

                //private properties
                var configPath = initfPath || 'config.json';
                var configData = null;
                var name = initName || 'Unnamed Presentation';  

                //private methods
                var getConfigContent = function() {
                    return tools.getData(configPath);
                }

                var getConfigData = function() {
                    return JSON.parse(getConfigContent);
                }

                //public methodts

                //public properties
                this.name = null;
                this.config = null;
                this.debug = null;

                //logic
                this.name = name;
                this.config = getConfigContent();

        }

        //execution
        var tools = new AppSpace.Tools();               
        var pres = new AppSpace.Presentation('Some Name');

        pres.debug = tools.test('value passed')
        console.log(pres.debug);
        console.log(pres.config);
        console.log(pres.name);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:00:25.307

首先，在这段代码中：

```
this.getData = function(path) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', path, false);
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState !== 4) return;
                        if (xhr.status !== 0 && xhr.status !== 200) {
                            if (xhr.status === 400) {
                                console.log("Could not locate " + path);
                            } else {
                                console.error("app.getData " + path + " HTTP error: " + xhr.status);
                            }
                            return;
                        }
                        return xhr.responseText;
                      };
                      xhr.send();
                } 
```

`return xhr.responseText;`不管用。它在处理函数内部，值将从 中返回`xhr.onreadystatechange`，而不是从中返回`getData`，因此您可以执行以下操作：

```
this.getData = function(path) {
                        var res;
                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', path, false);
                        xhr.onreadystatechange = function() {
                            if (xhr.readyState !== 4) return;
                            if (xhr.status !== 0 && xhr.status !== 200) {
                                if (xhr.status === 400) {
                                    console.log("Could not locate " + path);
                                } else {
                                    console.error("app.getData " + path + " HTTP error: " + xhr.status);
                                }
                                return;
                            }
                            res = xhr.responseText;
                          };
                          xhr.send();
                          return res;
                    } 
```

此外，这应该像下一个（您正在尝试解析一个函数，而不是它返回的内容）

```
 var getConfigData = function() {
     return JSON.parse(getConfigContent());
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:03:06.253

如果你想让它保持异步，你可以做这样的事情。我会根据您的需要删除 dest 和 prop 参数或回调。

```
 this.getData = function(path, dest, prop, callback) {
        callback = callback || null;
        var xhr = new XMLHttpRequest();
        xhr.open('GET', path, false);
        xhr.onreadystatechange = function() {
            if (xhr.readyState !== 4) return;
            if (xhr.status !== 0 && xhr.status !== 200) {
                /* ... */
            }
            dest[prop] = xhr.responseText;
            if (Callback) callback(xhr.responseText);
          };
          xhr.send();
    } 

    //private methods
    var getConfigContent = function() {
        return tools.getData(configPath, this, 'config', );
    } 
```

# jsp - 运行jsp文件时类转换异常

> ID：13876088
> 
> 赞同：4
> 
> 时间：2012-12-14T09:43:46.290
> 
> 标签：jsp

我正在尝试运行我的 .jsp 文件之一，但我遇到了类转换异常。

（'org.apache.catalina.core.DefaultInstanceManager 不能转换为 org.apache.tomcat.InstanceManager'）

我已将所有 jar 放在 WEB-INF/lib 文件夹中，并且包含了所有必需的 jar。

这个错误是因为 .jar 版本不匹配而发生的吗？

如果有人知道这个错误，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:00:53.873

千万不要把tomcat的jar文件放到WEB-INF/lib中。Tomcat 已经有了这些类，它们必须由根 tomcat 类加载器加载，而不是由 webapp 的类加载器加载。除非此 jar 列表中存在不属于 Tomcat 的特定库，否则所有这些 jar 都不应该存在。

您放入 WEB-INF/lib 的是您的代码使用的库，例如 Guava 或 OpenCSV 或您可以自己创建的任何 jar。不是 Tomcat 自己的库。

# python - ImportError：无法导入名称 urandom

> ID：13876090
> 
> 赞同：5
> 
> 时间：2012-12-14T09:43:57.770
> 
> 标签：python

我正在构建一个新的 Linux 环境并在 Python 上看到以下错误。

```
# python -c 'import random'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/lib/python2.7/random.py", line 47, in <module>
    from os import urandom as _urandom
ImportError: cannot import name urandom 
```

我没有使用 virtualenv，所以这不应该是[这里的问题](https://stackoverflow.com/questions/10366821/python-importerror-cannot-import-urandom-since-ubuntu-12-04-upgrade)。

我已经将 os.py 与我的 Ubuntu 上的文件进行了比较，没有这个错误。它们完全相同，所以看起来也不是[这个问题](https://stackoverflow.com/questions/13545030/python-importerror-cannot-import-name-urandom)。

通过检查以下内容，我的 Python 中似乎没有`urandom`in`os`或`posix`

```
# python
Python 2.7.1 (r271:86832, Feb 10 2012, 16:10:22) [GCC] on linux3
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> print os.__file__
/usr/lib/python2.7/os.pyc
>>> dir(os)
['EX_CANTCREAT', 'EX_CONFIG', 'EX_DATAERR', 'EX_IOERR', 'EX_NOHOST', 'EX_NOINPUT', 'EX_NOPERM', 'EX_NOUSER', 'EX_OK', 'EX_OSERR', 'EX_OSFILE', 'EX_PROTOCOL', 'EX_SOFTWARE', 'EX_TEMPFAIL', 'EX_UNAVAILABLE', 'EX_USAGE', 'F_OK', 'NGROUPS_MAX', 'O_APPEND', 'O_ASYNC', 'O_CREAT', 'O_DIRECT', 'O_DIRECTORY', 'O_DSYNC', 'O_EXCL', 'O_LARGEFILE', 'O_NDELAY', 'O_NOATIME', 'O_NOCTTY', 'O_NOFOLLOW', 'O_NONBLOCK', 'O_RDONLY', 'O_RDWR', 'O_RSYNC', 'O_SYNC', 'O_TRUNC', 'O_WRONLY', 'P_NOWAIT', 'P_NOWAITO', 'P_WAIT', 'R_OK', 'SEEK_CUR', 'SEEK_END', 'SEEK_SET', 'TMP_MAX', 'UserDict', 'WCONTINUED', 'WCOREDUMP', 'WEXITSTATUS', 'WIFCONTINUED', 'WIFEXITED', 'WIFSIGNALED', 'WIFSTOPPED', 'WNOHANG', 'WSTOPSIG', 'WTERMSIG', 'WUNTRACED', 'W_OK', 'X_OK', '_Environ', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '_copy_reg', '_execvpe', '_exists', '_exit', '_get_exports_list', '_make_stat_result', '_make_statvfs_result', '_pickle_stat_result', '_pickle_statvfs_result', '_spawnvef', 'abort', 'access', 'altsep', 'chdir', 'chmod', 'chown', 'chroot', 'close', 'closerange', 'confstr', 'confstr_names', 'ctermid', 'curdir', 'defpath', 'devnull', 'dup', 'dup2', 'environ', 'errno', 'error', 'execl', 'execle', 'execlp', 'execlpe', 'execv', 'execve', 'execvp', 'execvpe', 'extsep', 'fchdir', 'fchmod', 'fchown', 'fdatasync', 'fdopen', 'fork', 'forkpty', 'fpathconf', 'fstat', 'fstatvfs', 'fsync', 'ftruncate', 'getcwd', 'getcwdu', 'getegid', 'getenv', 'geteuid', 'getgid', 'getgroups', 'getloadavg', 'getlogin', 'getpgid', 'getpgrp', 'getpid', 'getppid', 'getresgid', 'getresuid', 'getsid', 'getuid', 'initgroups', 'isatty', 'kill', 'killpg', 'lchown', 'linesep', 'link', 'listdir', 'lseek', 'lstat', 'major', 'makedev', 'makedirs', 'minor', 'mkdir', 'mkfifo', 'mknod', 'name', 'nice', 'open', 'openpty', 'pardir', 'path', 'pathconf', 'pathconf_names', 'pathsep', 'pipe', 'popen', 'popen2', 'popen3', 'popen4', 'putenv', 'read', 'readlink', 'remove', 'removedirs', 'rename', 'renames', 'rmdir', 'sep', 'setegid', 'seteuid', 'setgid', 'setgroups', 'setpgid', 'setpgrp', 'setregid', 'setresgid', 'setresuid', 'setreuid', 'setsid', 'setuid', 'spawnl', 'spawnle', 'spawnlp', 'spawnlpe', 'spawnv', 'spawnve', 'spawnvp', 'spawnvpe', 'stat', 'stat_float_times', 'stat_result', 'statvfs', 'statvfs_result', 'strerror', 'symlink', 'sys', 'sysconf', 'sysconf_names', 'system', 'tcgetpgrp', 'tcsetpgrp', 'tempnam', 'times', 'tmpfile', 'tmpnam', 'ttyname', 'umask', 'uname', 'unlink', 'unsetenv', 'utime', 'wait', 'wait3', 'wait4', 'waitpid', 'walk', 'write']
>>> import posix
>>> dir(posix)
['EX_CANTCREAT', 'EX_CONFIG', 'EX_DATAERR', 'EX_IOERR', 'EX_NOHOST', 'EX_NOINPUT', 'EX_NOPERM', 'EX_NOUSER', 'EX_OK', 'EX_OSERR', 'EX_OSFILE', 'EX_PROTOCOL', 'EX_SOFTWARE', 'EX_TEMPFAIL', 'EX_UNAVAILABLE', 'EX_USAGE', 'F_OK', 'NGROUPS_MAX', 'O_APPEND', 'O_ASYNC', 'O_CREAT', 'O_DIRECT', 'O_DIRECTORY', 'O_DSYNC', 'O_EXCL', 'O_LARGEFILE', 'O_NDELAY', 'O_NOATIME', 'O_NOCTTY', 'O_NOFOLLOW', 'O_NONBLOCK', 'O_RDONLY', 'O_RDWR', 'O_RSYNC', 'O_SYNC', 'O_TRUNC', 'O_WRONLY', 'R_OK', 'TMP_MAX', 'WCONTINUED', 'WCOREDUMP', 'WEXITSTATUS', 'WIFCONTINUED', 'WIFEXITED', 'WIFSIGNALED', 'WIFSTOPPED', 'WNOHANG', 'WSTOPSIG', 'WTERMSIG', 'WUNTRACED', 'W_OK', 'X_OK', '__doc__', '__name__', '__package__', '_exit', 'abort', 'access', 'chdir', 'chmod', 'chown', 'chroot', 'close', 'closerange', 'confstr', 'confstr_names', 'ctermid', 'dup', 'dup2', 'environ', 'error', 'execv', 'execve', 'fchdir', 'fchmod', 'fchown', 'fdatasync', 'fdopen', 'fork', 'forkpty', 'fpathconf', 'fstat', 'fstatvfs', 'fsync', 'ftruncate', 'getcwd', 'getcwdu', 'getegid', 'geteuid', 'getgid', 'getgroups', 'getloadavg', 'getlogin', 'getpgid', 'getpgrp', 'getpid', 'getppid', 'getresgid', 'getresuid', 'getsid', 'getuid', 'initgroups', 'isatty', 'kill', 'killpg', 'lchown', 'link', 'listdir', 'lseek', 'lstat', 'major', 'makedev', 'minor', 'mkdir', 'mkfifo', 'mknod', 'nice', 'open', 'openpty', 'pathconf', 'pathconf_names', 'pipe', 'popen', 'putenv', 'read', 'readlink', 'remove', 'rename', 'rmdir', 'setegid', 'seteuid', 'setgid', 'setgroups', 'setpgid', 'setpgrp', 'setregid', 'setresgid', 'setresuid', 'setreuid', 'setsid', 'setuid', 'stat', 'stat_float_times', 'stat_result', 'statvfs', 'statvfs_result', 'strerror', 'symlink', 'sysconf', 'sysconf_names', 'system', 'tcgetpgrp', 'tcsetpgrp', 'tempnam', 'times', 'tmpfile', 'tmpnam', 'ttyname', 'umask', 'uname', 'unlink', 'unsetenv', 'utime', 'wait', 'wait3', 'wait4', 'waitpid', 'write'] 
```

这是我在 Linux 上的内容。

```
# rpm -qa|grep python
python-base-2.7.1-4.21.i586
python-xml-2.7.1-4.21.i586
dbus-python-0.83.1-3.2.i586
libpython-2.7.1-4.21.i586
python-2.7.3-6.18.i686
#
# ls -l /dev/urandom
crw-rw-rw- 1 root root 1, 9 Dec 12 22:16 /dev/urandom 
```

我是否缺少任何 Python 模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T17:27:03.507

在2.7.1（您的版本）和 2.7.3（当前）之间发生了变化`urandom`。`os`在 2.7.1 posix 没有 urandom 并且 os.py 有一个后备方法（在 末尾`os.py`）。在 2.7.3 中，posix 总是有一个 urandom 函数。所以也许你正在混合 os.py 版本？

# android - 安卓连接

> ID：13876092
> 
> 赞同：3
> 
> 时间：2012-12-14T09:44:06.383
> 
> 标签：android, broadcastreceiver, connectivity

我创建了一个需要始终连接到远程套接字服务器的应用程序。

我为了这样做，我已经注册了一个`BroadcastReceiver`连接更改。每次 Receiver 触发时 - 应用程序都会与服务器断开连接并创建新连接。它这样做是为了保持一个活动的和连接的套接字连接。

在我的手机和我检查过的其他几部手机中效果很好。但是我发现其他一些手机在连接到移动提供商数据连接时 - 经常调用接收器，而连接性没有任何实际变化。

有没有办法让我知道连接是否真的发生了变化？此外，为什么接收器如此频繁地开火？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:20:52.053

好的，我找到了解决我的问题的方法，希望我能在某个时候帮助别人：

在我的广播接收器中进行连接更改：

```
@Override
public void onReceive(Context context, Intent intent) {
        //my Application class where i store the last known state of connectivity
    app = (AppVariables) context.getApplicationContext();
        //new network state
    networkState = ((NetworkInfo)intent.getExtras().get("networkInfo")).getState();
    if (app.getLastNetworkState().equals(State.CONNECTED) && networkState.equals(State.DISCONNECTED))
    {
        Log.i("InternetConnectivity", "Internet Status Changed: disconnected");
        if (app.getServerConnectionManager() != null)
            app.getServerConnectionManager().stopServer(false, false);
        if (app.getMainActivity() != null)
            app.getMainActivity().showReconnectDialog();
        app.setLastNetworkState(networkState);
    }
    else if (networkState.equals(State.CONNECTED))
        app.setLastNetworkState(networkState);
} 
```

# ruby-on-rails - 在 Rails 中，显示方法没有被执行

> ID：13876098
> 
> 赞同：0
> 
> 时间：2012-12-14T09:44:21.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Frnds 我创建了一个控制器，名为 products_controller 和产品模型，`index.html.erb and show.html.erb` 但是当我调用`localhost:3000/products`它时，我从数据库中获取详细信息。在同一页面中，我提供了一个链接，可以清楚地显示产品的详细信息。但它没有加载。当我点击显示链接时，我必须获取每个产品的详细信息。但是 localhost:3000/products），它会加载到同一页面。本地主机的结果：3000/产品

```
Model Name  Brand Name  Price   Discount    Qty Available           
Nokia Lumia     Nokia   15000   5.0     25  Show    
Samsung galaxy Nexus    Samsung     45000   15.0    5   Show    
Sony Experia    Sony Ericsson   4500    1.0     10  Show    
Nikon D5100     Nikon   25500   10.0    100     Show    
Panasonic Lumix     Panasonic   25500   10.0    104     Show    
Olympus Granite     Olympus     24520   12.0    45  Show 
```

products_controller.rb

```
class ProductsController < ApplicationController
  def index
    @products = Product.select("model_name,brand_name, price, discount, qty_avaliable")
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end

  #render :text => params and return false

  def show
    @product = Product.find_by_sql("select model_name,brand_name, price, discount, qty_avaliable from products where prod_id='PR1'")
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @product }
    end
  end

end 
```

**产品.rb**

```
class Product < ActiveRecord::Base
  attr_accessible :prod_id, :model_name, :brand_name, :price, :discount, :qty_avaliable
end 
```

**index.html.erb**

```
<p id="notice"><%= notice %></p>

<h1>Products  List</h1>

<table>
  <tr>
    <th>Model Name</th>
    <th>Brand Name</th>
    <th>Price</th>
    <th>Discount</th>
    <th>Qty Available</th>

    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @products.each do |product| %>
  <tr>
    <td><%= product.model_name %></td>
    <td><%= product.brand_name %></td>
    <td><%= product.price %></td>
    <td><%= product.discount %></td>
    <td><%= product.qty_avaliable %></td>
    <td><%= link_to 'Show', Product %></td>

  </tr>
<% end %>
</table> 
```

**显示.html.erb**

```
<p prod_id="notice"><%= notice %></p>

<p>
  <b>Model Name:</b>
  <%= @product.model_name %>
</p>

<p>
  <b>Brand Name:</b>
  <%= @product.brand_name %>
</p>

<p>
  <b>Price:</b>
  <%= @product.price %>
</p>

<p>
  <b>Discount:</b>
  <%= @product.discount %>
</p>

<p>
  <b>Quantity:</b>
  <%= @product.qty_avaliable %>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:52:53.477

首先，为什么你的模型没有一个 id，你为什么要执行原始 SQL？

它应该是：

```
class ProductsController < ApplicationController
  def index
    @products = Product.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end

  def show
    @product = Product.where(id: params[:id]).first
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @product }
    end
  end

end 
```

根据您的观点，链接是错误的，您应该在迭代中传递当前产品的 id

```
<% @products.each do |product| %>
  <tr>
    <td><%= product.model_name %></td>
    <td><%= product.brand_name %></td>
    <td><%= product.price %></td>
    <td><%= product.discount %></td>
    <td><%= product.qty_avaliable %></td>
    <td><%= link_to('Show', product) %></td>
  </tr>
<% end %> 
```

link_to 将在幕后做一些元编程，但它与做的基本相同

```
 <td><%= link_to('Show', product_path(id: product.id) %></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:52:06.170

这里：

```
<td><%= link_to 'Show', Product %></td> 
```

您需要使用`product`，它是块变量，而不是`Product`，它是一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:50:42.200

在我看来，你应该使用`<%= link_to 'Show', product %>`而不是`<%= link_to 'Show', Product %>`in`index.html.erb`

# android - 在我的 android 应用程序中集成 iCloud

> ID：13876111
> 
> 赞同：2
> 
> 时间：2012-12-14T09:44:36.143
> 
> 标签：android, icloud, icloud-api

我需要集成`iCloud`到我的 android 应用程序中。是否可以将 iCloud 集成到我的 android 应用程序中？我在网上找到但没有得到任何解决方案或任何关于此的文章。

我知道的一件事是，在 IOS 中可以集成 iCloud。但我无法弄清楚它是否可能在android中，如果是，那么它是如何可能的..

请帮我找到这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T01:17:17.947

Android 没有 iCloud API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T07:24:13.910

> ## [icloud4j](https://github.com/tmyroadctfig/icloud4j)
> 
> 不确定它对 Android 有多大用处，但我已经启动了一个基于 Python [pyicloud](https://github.com/picklepete/pyicloud)实现的 Java 开源项目。它目前仍处于早期阶段，但您可以在这里查看：

*   [https://github.com/tmyroadctfig/icloud4j](https://github.com/tmyroadctfig/icloud4j)

要访问 iPhone 备份，可以使用 InflatableDonkey 库：

*   [https://github.com/horrorho/InflatableDonkey](https://github.com/horrorho/InflatableDonkey)

# php - PHP 标头位置多次打开 url

> ID：13876113
> 
> 赞同：0
> 
> 时间：2012-12-14T09:44:38.560
> 
> 标签：php, bash, wget

我有一个邮件列表并定期向它发送信息。这个邮件列表已经长大了，现在它太大了，无法在商业时间发送它，因为打开了太多的连接并且服务器无法访问。所以我制作了一个 bash 脚本来在晚上（凌晨 4 点）调用一个 PHP 文件，检查是否有任何计划发送的时事通讯，如果有，发送它。
BASH 脚本

```
#!/bin/sh
senddate=$(date +"%Y-%m-%d")

url=https://www.my.url/check_to_send_maillist.php?date=$senddate\&autosend=1

wget -O /my/log/dest.log --http-user=myuser --http-password=mypass $url 
```

PHP 脚本

```
$date=$_GET["date"];
if($date<>""){
$sql="select newsletters_id from " . TABLE_NEWSLETTERS . " where send_date='" . $fecha . "'";
$nid=executequery($sql);
if($nid<>""){
    $url="https://www.my.url/send_newsletter.php?page=1&nID=%s&action=confirm_send&autosend=1";
    $url=sprintf($url,$nid["newsletters_id"]);
    header('location:' .$url);
}   
} 
```

测试没问题，我所做的一切都很好。当我将它与真正的邮件列表一起使用时，PHP 脚本向发送时事通讯的 URL 调用了 3 次，因此我的客户收到了 3 次时事通讯。我的邮件列表大约有 40,000 个地址（是的，我知道我应该使用外部服务）
Apache 日志
-BASH SCRIPT
`server_ip - http_user [14/Dec/2012:04:00:02 +0100] "GET /check_to_send_maillist.php?date=2012-12-14&autosend=1 HTTP/1.0" 302 - "-" "Wget/1.10.2"`
-PHP SCRIPT

 `````
 server_IP - http_user [14/Dec/2012:04:04:59 +0100] "GET /my_send_script.php?page=1&nID=nid&action=confirm_send&autosend=1 HTTP/1.0" 200 21454 "-" "Wget/1.10.2"
server_IP - http_user [14/Dec/2012:04:20:01 +0100] "GET /my_send_script.php?page=1&nID=nid&action=confirm_send&autosend=1 HTTP/1.0" 200 21454 "-" "Wget/1.10.2"
server_IP - http_user [14/Dec/2012:06:05:38 +0100] "GET /my_send_script.php?page=1&nID=nid&action=confirm_send&autosend=1 HTTP/1.0" 200 268 "-" "Wget/1.10.2" 
```` 

`为什么标头位置多次调用脚本？如何强制只打一个电话？有什么建议以不同的方式来做吗？`

 `任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:21:01.743

在寻找问题的原因和/或解决方案之后，我找到了它。默认情况下，如果 WGET 超时，WGET 会尝试 20 次打开 URL。我的脚本发送电子邮件超时，因此 WGET 一次又一次地尝试。

我将 WGET 命令更改为

```
WGET -tries=1 -T 4 http://www.my.url/my/script.php 
```

--tries=1 强制 WGET 只尝试一次以打开脚本，即使超时也是如此。
-T 4 设置超时时间为4秒

并且工作正常。

谢谢您的帮助。``

# android - 如何将图像保存在 sqllite 数据库中？

> ID：13876116
> 
> 赞同：0
> 
> 时间：2012-12-14T09:44:42.133
> 
> 标签：android

这是我的代码，它在下面浏览 imagew gellery 并选择图像，但如何在数据库中插入图像视图？此代码成功显示在屏幕上选择的图像但不存储在数据库中如何传递图像参数？在我评论的那一行/*我在这里写的*/

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Toast;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;    
 private EditText Donedate;
 private EditText Notes;
 private EditText Person;
 private  ImageView imageView1;
 Bitmap yourSelectedImage;
 @Override
 public void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.add_country);

    nameEt = (EditText) findViewById(R.id.Address);
    capEt = (EditText) findViewById(R.id.Stage);
    codeEt = (EditText) findViewById(R.id.Dueby);

    Donedate = (EditText) findViewById(R.id.Donedate);

    Notes = (EditText) findViewById(R.id.Notes);
    Person = (EditText) findViewById(R.id.Person);

    imageView1 = (ImageView) findViewById(R.id.imageView1);
    Button Browse = (Button) findViewById(R.id.Browse);

    Browse.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {               
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.setType("image/*");
                startActivityForResult(intent, 0);
        }
    });        

    Bundle extras = getIntent().getExtras(); 

    if (extras != null)
    {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         Donedate.setText(extras.getString("Location"));  
         Notes.setText(extras.getString("Notes")); 
         Person.setText(extras.getString("Person")); 
         imageView1.setImageURI(yourSelectedImage);

    }

    Button saveButton =(Button) findViewById(R.id.saveBtn);
    saveButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) 
        {
           if (nameEt.getText().length() != 0)
           {
              AsyncTask<Object, Object, Object> saveContactTask = 
                 new AsyncTask<Object, Object, Object>() 
                 {
                    @Override
                    protected Object doInBackground(Object... params) 
                    {
                       saveContact();
                       return null;
                    }

                    @Override
                    protected void onPostExecute(Object result) 
                    {
                       finish();
                    }
                 }; 

              saveContactTask.execute((Object[]) null); 
           }

           else
           {
              AlertDialog.Builder alert = new  
      AlertDialog.Builder(AddEditCountry.this);
              alert.setTitle(R.string.errorTitle); 
              alert.setMessage(R.string.errorMessage);
              alert.setPositiveButton(R.string.errorButton, null); 
              alert.show();
           }
        } 
    });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
/* what i write here for  image*/          
      dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString(),
                  Donedate.getText().toString(),
                  Notes.getText().toString(),
                  Person.getText().toString(), null

                  );
      }
      else
/* what i wirte here for image*/      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString(), 
            Donedate.getText().toString(),
         Notes.getText().toString(),
          Person.getText().toString(), null

         );
      }
   }

   protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
       super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

       switch(requestCode) {
       case 0:
           if(resultCode == RESULT_OK){
               Uri selectedImage = imageReturnedIntent.getData();
               String[] filePathColumn = {MediaStore.Images.Media.DATA};

               Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
               cursor.moveToFirst();

               int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
               String filePath = cursor.getString(columnIndex); // file path of selected image
               cursor.close();
                       //  Convert file path into bitmap image using below line.
               yourSelectedImage = BitmapFactory.decodeFile(filePath);

                       // put  bitmapimage in your imageview
               imageView1.setImageBitmap(yourSelectedImage);
           }
       }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:51:59.217

首先将 sqlite 中的字段设为 blob 数据类型

而不是获取字节并存储在数据库中 image.getBytes();

或者如果您有位图而不是转换为字节数组

并存入数据库

```
 public static byte[] getBitmapAsByteArray(Bitmap bitmap, boolean type) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    if (type) {
        bitmap.compress(CompressFormat.PNG, 0, outputStream);
    } else {
        bitmap.compress(CompressFormat.JPEG, 0, outputStream);
    }
    return outputStream.toByteArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:57:38.787

我建议避免将图像保存到数据库，而不仅仅是在 android 上。

这是有道理的，因为它会减慢任何与数据库相关的速度。此外，游标将无法缓存结果以便在表的行之间移动。

取而代之的是，将文件名指向应用程序存储上的路径。您还可以添加它的存储位置（内部/外部存储）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:51:06.107

请使用以下代码将图像存储到 sqlite 数据库中，它将解决您的问题。

MySQLActivity.java:-

```
public class MySQLActivity extends Activity implements OnClickListener
{
    protected static TextView textView;
    protected static ImageView bmImage;
    protected Button start;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bmImage = (ImageView)findViewById(R.id.imageView1);
        textView = (TextView) findViewById(R.id.textView1);

        start = (Button) findViewById(R.id.button1);
        start.setOnClickListener(this); 

        DownloadFile();
    }

    public void onClick(View v) 
    {
        SQLiteDatabase myDb;       
        String MySQL;
        int icount;
        byte[] byteImage1 = null;
        byte[] byteImage2 = null;
        MySQL="create table emp1(_id INTEGER primary key autoincrement, fio TEXT not null, picture BLOB);";
        myDb = openOrCreateDatabase("/sdcard/Nick/MyWeatherDB.db", Context.MODE_PRIVATE, null);

        String s=myDb.getPath();
        textView.append("\r\n" + s+"\r\n");       
        myDb.execSQL("delete from emp1");
        ContentValues newValues = new ContentValues();
        newValues.put("fio", "Иванов Петр Сергеевич");

        /////////// insert picture to blob field ///////////////////// 
        try
        {
            FileInputStream instream = new FileInputStream("/sdcard/Dipak/Keshariya.png"); 
            BufferedInputStream bif = new BufferedInputStream(instream); 
            byteImage1 = new byte[bif.available()]; 
            bif.read(byteImage1); 
            textView.append("\r\n" + byteImage1.length+"\r\n"); 
            newValues.put("picture", byteImage1); 

            long ret = myDb.insert("emp1", null, newValues); 
            if(ret<0) textView.append("\r\n!!! Error add blob filed!!!\r\n");
        } catch (IOException e) {
            textView.append("\r\n!!! Error: " + e+"!!!\r\n");   
        }

        ////////////Read data ////////////////////////////  
        Cursor cur = myDb.query("emp1",null, null, null, null, null, null);
        cur.moveToFirst();
        while (cur.isAfterLast() == false)
        {
            textView.append("\r\n" + cur.getString(1)+"\r\n");
            cur.moveToNext();
        }

        ///////Read data from blob field////////////////////
        cur.moveToFirst();
        byteImage2=cur.getBlob(cur.getColumnIndex("picture"));
        bmImage.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0, byteImage2.length));
        textView.append("\r\n" + byteImage2.length+"\r\n"); 

        //////////////////////////    
        cur.close();
        myDb.close();
  }

  public void DownloadFile() 
  {   
      Bitmap bitmap1 = null;                    
      bitmap1 = BitmapFactory.decodeFile("/sdcard/Dipak/Dipak.jpg"); //weather.png");
      bmImage.setImageBitmap(bitmap1);
  }
} 
```

# objective-c - 没有调用 shouldAutorotateToInterfaceOrientation

> ID：13876121
> 
> 赞同：1
> 
> 时间：2012-12-14T09:44:54.907
> 
> 标签：objective-c, xcode4, ios5

嗨，我现在对视图控制器的方向有疑问。以下是我的 .h 文件。

```
@interface IPad_HomeViewController : UIViewController <UINavigationControllerDelegate>{
    UIAlertView *alertWithYesNoButtons;
}
@property (weak, nonatomic) IBOutlet UILabel *lblStatus;

@end 
```

我在 .m 文件中实现了以下方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return NO;
} 
```

然后我做了一个断点。我意识到 shouldAutorotateToInterfaceOrientation 完全没有被调用。不知道为什么它没有被调用。

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T09:50:59.543

我认为这是因为您的 UINavigationController 处理了呼叫。实现以下将其发送回 viewController。

```
- (BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

// pre-iOS 6 support
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:09:01.990

iOS 5 和 iOS 6 之间的旋转支持发生了很大变化。

转到项目的目标摘要页面并检查“iPhone/Ipod 部署信息”和“支持的接口方向”。您是否启用了设备旋转？

# android - 是否可以构建这个 iPhone 应用程序？（电话使用/消费监控）

> ID：13876122
> 
> 赞同：1
> 
> 时间：2012-12-14T09:44:58.167
> 
> 标签：android, iphone, ios, telephony

我构建了一个 Android 应用程序来监控用户的消费：发送/接收的 SMS、呼入/呼出的电话、通过移动互联网和 WiFi/LAN 发送/接收的数据字节数，以及任何这些交易期间的网络漫游状态。我的客户根据他/她的使用数据使用这些信息为用户匹配最佳的移动计划。我现在被要求创建应用程序的 iOS 版本，但由于我是 iPhone 开发的新手，我什至不确定这是否可能。所以，我的问题是...

1.  是否可以检测用户何时发送或接收短信？我需要能够记录发送或接收它们的时间、发起和目标手机号码、网络漫游状态以及 SMS 中的字符数。从我目前的研究来看，这似乎是不可能的（iOS SDK 只允许您发送短信），但我读到的答案来自大约 2 年前。

2.  是否可以检测来电/去电？我需要能够记录通话开始的时间、接听电话的时间以及结束的时间。根据我的阅读，有`CTCallCenter`课程，但当我的应用程序在后台时，我似乎无法使用它。我需要更像 Android 的东西`BroadcastReceiver`，它会触发一个系统范围的事件，当呼叫到达或正在进行时我可以捕捉到该事件。

3.  是否可以通过移动接口（3G、4G）和网络接口（WiFi）获取发送/接收的字节数？我找到的唯一文档是[this](https://stackoverflow.com/questions/7946699/iphone-data-usage-tracking-monitoring)，但这对我来说没有任何意义。

4.  是否有可能在任何这些交易期间获得网络漫游状态？我发现这是可能的，但前提是我越狱了手机。问题是，我需要能够在不越狱 iPhone 的情况下完成上述所有操作。

帮助？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:52:22.160

抱歉，AFAIK 不可能：

*   1 = 没有
*   2 = 没有
*   3 = 是
*   4 = 没有

# php - 删除部分 Joomla CMS

> ID：13876126
> 
> 赞同：0
> 
> 时间：2012-12-14T09:45:04.433
> 
> 标签：php, web-applications, joomla, joomla2.5

## 背景

我一直在开发一个网络应用程序。我一直使用 Joomla 平台和 CMS 作为我的应用程序的基础。我的应用程序严重依赖 joomla 平台，但很少使用 CMS 的功能（我必须登录用户等，所以我使用 CMS 的 _users 组件）。

## 问题

开始删除一些我不需要的多余 CMS 的最佳方法是什么？例如，当我正在构建我的生产站点时，我将希望避免创建大量的 joomla 组件数据库表等。我已经读过可以仅使用 joomla 平台从头开始构建应用程序，但我仍然想包括_users 组件，并且还希望避免必须开始编写所有会话处理方面的代码。

我想我需要继续拥有基本的 CMS 应用程序，但核心组件列表非常精简，并且没有管理员后端。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:05:54.873

您可以使用扩展管理器卸载核心扩展和模块。那时，如果您愿意，可以仅使用所需的表重建 joomla.sql 文件（我建议始终通过导出您已完成此过程的实际数据库来执行此操作，不要尝试手动操作）和把整个东西压缩成一个可安装的包。

就后端而言，原则上它们是完全独立的，但有一些模型，也许还有一些前端从后端调用的助手，所以当你完成后你会想看看你还剩下什么，然后再考虑一下。特别是文章模型是您需要注意的模型。

# wix - Wix 从路径中获取价值

> ID：13876128
> 
> 赞同：1
> 
> 时间：2012-12-14T09:45:08.863
> 
> 标签：wix

嘿，我正在创建一个程序的安装程序，该程序依赖于另一个名为“visma”的程序，我想要做的只是当用户选择安装路径时。

用户还需要指定另外两个安装 visma 的路径。然后我想从该输入中读取 txt 文件或其他内容，以便稍后在程序之外读取路径并从 visma 复制一些我需要的文件。

![在此处输入图像描述](../Images/b520ac0a725dc4c166fec28f6ca5a071.png)

这就是我在 UI 中的安装工作和完成工作的程度

但我不知道如何创建更改图片中三个字段的默认路径所需的目录变量

**MYInstalldirdlg**

*

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Fragment>
    <UI>
        <Dialog Id="MYInstallDirDlg" Width="370" Height="270" Title="!(loc.InstallDirDlg_Title)">
            <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="!(loc.WixUINext)" />
            <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)" />
            <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="!(loc.WixUICancel)">
                <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
            </Control>

            <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="15" Transparent="yes" NoPrefix="yes" Text="Choose default or your own folder for install and specify visma folders" />
            <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes" Text="{\WixUI_Font_Title}Destination Folders" />
            <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="!(loc.InstallDirDlgBannerBitmap)" />
            <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
            <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />

            <Control Id="FolderLabel1" Type="Text" X="20" Y="50" Width="290" Height="12" NoPrefix="yes" Text="!(loc.InstallDirDlgFolderLabel)" />
            <Control Id="Folder1" Type="PathEdit" X="20" Y="65" Width="320" Height="18" Property="WIXUI_INSTALLDIR" Indirect="yes" />
            <Control Id="ChangeFolder1" Type="PushButton" X="20" Y="85" Width="56" Height="15" Text="!(loc.InstallDirDlgChange)" />

            <Control Id="FolderLabel2" Type="Text" X="20" Y="110" Width="290" Height="12" NoPrefix="yes" Text="Please specify where your Visma Administration installation folder is:" />
            <Control Id="Folder2" Type="PathEdit" X="20" Y="125" Hidden ="no" Width="320" Height="18" Property="WIXUI_INSTALLDIR" Indirect="yes" />
            <Control Id="ChangeFolder2" Type="Text" X="20" Y="150" Width="56" Height="18" Text="Change..." />

            <Control Id="FolderLabel3" Type="Text" X="20" Y="175" Width="290" Height="22" NoPrefix="yes" Text="Please specify where your SPCS folder is which contains (Företag) and (Gemensamma filer):" />
            <Control Id="Folder3" Type="PathEdit" X="20" Y="195" Hidden ="no" Width="320" Height="18" Property="WIXUI_INSTALLDIR" Indirect="yes" />
            <Control Id="ChangeFolder3" Type="Text" X="20" Y="215" Width="56" Height="18" Text="Change..." />
        </Dialog>
    </UI>
</Fragment> 
```

如您所见，它们都具有从我的目录**WIXUI_INSTALLDIR获得的相同路径**

**WixUI_MYInstallDir**

*

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Fragment>
    <UI Id="WixUI_MYInstallDir">
        <TextStyle Id="WixUI_Font_Normal" FaceName="Tahoma" Size="8" />
        <TextStyle Id="WixUI_Font_Bigger" FaceName="Tahoma" Size="12" />
        <TextStyle Id="WixUI_Font_Title" FaceName="Tahoma" Size="9" Bold="yes" />

        <Property Id="DefaultUIFont" Value="WixUI_Font_Normal" />
        <Property Id="WixUI_Mode" Value="InstallDir" />

        <DialogRef Id="BrowseDlg" />
        <DialogRef Id="DiskCostDlg" />
        <DialogRef Id="ErrorDlg" />
        <DialogRef Id="FatalError" />
        <DialogRef Id="FilesInUse" />
        <DialogRef Id="MsiRMFilesInUse" />
        <DialogRef Id="PrepareDlg" />
        <DialogRef Id="ProgressDlg" />
        <DialogRef Id="ResumeDlg" />
        <DialogRef Id="UserExit" />

        <Publish Dialog="BrowseDlg" Control="OK" Event="DoAction" Value="WixUIValidatePath" Order="3">1</Publish>
        <Publish Dialog="BrowseDlg" Control="OK" Event="SpawnDialog" Value="InvalidDirDlg" Order="4"><![CDATA[WIXUI_INSTALLDIR_VALID<>"1"]]></Publish>

        <Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish>

        <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="LicenseAgreementDlg">NOT Installed</Publish>
        <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">Installed AND PATCH</Publish>

        <Publish Dialog="LicenseAgreementDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg">1</Publish>
        <Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="MYInstallDirDlg">LicenseAccepted = "1"</Publish>

        <Publish Dialog="MYInstallDirDlg" Control="Back" Event="NewDialog" Value="LicenseAgreementDlg">1</Publish>
        <Publish Dialog="MYInstallDirDlg" Control="Next" Event="SetTargetPath" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
        <Publish Dialog="MYInstallDirDlg" Control="Next" Event="DoAction" Value="WixUIValidatePath" Order="2">NOT WIXUI_DONTVALIDATEPATH</Publish>
        <Publish Dialog="MYInstallDirDlg" Control="Next" Event="SpawnDialog" Value="InvalidDirDlg" Order="3"><![CDATA[NOT WIXUI_DONTVALIDATEPATH AND WIXUI_INSTALLDIR_VALID<>"1"]]></Publish>
        <Publish Dialog="MYInstallDirDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg" Order="4">WIXUI_DONTVALIDATEPATH OR WIXUI_INSTALLDIR_VALID="1"</Publish>
        <Publish Dialog="MYInstallDirDlg" Control="ChangeFolder1" Property="_BrowseProperty" Value="[WIXUI_INSTALLDIR]" Order="1">1</Publish>
        <Publish Dialog="MYInstallDirDlg" Control="ChangeFolder1" Event="SpawnDialog" Value="BrowseDlg" Order="2">1</Publish>

        <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MYInstallDirDlg" Order="1">NOT Installed</Publish>
        <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="MaintenanceTypeDlg" Order="2">Installed AND NOT PATCH</Publish>
        <Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg" Order="2">Installed AND PATCH</Publish>

        <Publish Dialog="MaintenanceWelcomeDlg" Control="Next" Event="NewDialog" Value="MaintenanceTypeDlg">1</Publish>

        <Publish Dialog="MaintenanceTypeDlg" Control="RepairButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
        <Publish Dialog="MaintenanceTypeDlg" Control="RemoveButton" Event="NewDialog" Value="VerifyReadyDlg">1</Publish>
        <Publish Dialog="MaintenanceTypeDlg" Control="Back" Event="NewDialog" Value="MaintenanceWelcomeDlg">1</Publish>

        <Property Id="ARPNOMODIFY" Value="1" />
    </UI>

    <UIRef Id="WixUI_MYCommon" />
</Fragment> 
```

在这里，我只进行了必要的更改以使其工作：更改为 WixUI_MYInstallDir 等名称匹配

**产品**

*

```
<!-- Directory 1 (install folder) -->
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFilesFolder">
    <Directory Id="INSTALLDIR" Name="ITC_Venato" >
    </Directory>
          //componet stuff and files to install
   </Directory>
</Directory>

<Feature
  Id="Venato_Windows_Service_0.904"
  Title="Venato Windows Service"
  Level="1">
  <ComponentRef Id="Venatoexe" />
</Feature>

<!-- Include a user interface-->
<Property Id="WIXUI_INSTALLDIR">INSTALLDIR</Property>
<UIRef Id="WixUI_MYInstallDir" />
<UIRef Id="WixUI_ErrorProgressText" /> 
```

仅包括相关部分，但我订购了蜡和产品标签，但我想我必须为我想要的新文件夹路径创建一个新的属性 ID。

但是我该如何做到这一点，以便程序只读取路径并将它们发送到我可以读取的变量或文本文件中。我不希望程序像使用安装路径那样创建新文件夹。这些应该由 visma 所在的用户选择然后阅读。

谢谢你的回答！

*

*

*

*

**错误**

![在此处输入图像描述](../Images/2c253d2ea4278fd3f5ac92e5814dcd88.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:32:30.920

使用您提到的不同属性：

```
 <Property Id="WIXUI_INSTALLDIR">INSTALLDIR</Property>
 <Property Id="VISMA_ADMIN" Secure="yes"></Property>
 <Property Id="SPCS_FOLDER">INSTALLDIR</Property>

 <Control Id="FolderLabel2" Type="Text" X="20" Y="110" Width="290" Height="12" NoPrefix="yes" Text="Please specify where your Visma Administration installation folder is:" />
 <Control Id="Folder2" Type="PathEdit" X="20" Y="125" Hidden ="no" Width="320" Height="18" Property="VISMA_ADMIN" Indirect="yes" />
 <Control Id="ChangeFolder2" Type="Text" X="20" Y="150" Width="56" Height="18" Text="Change..." />

 <Control Id="FolderLabel3" Type="Text" X="20" Y="175" Width="290" Height="22" NoPrefix="yes" Text="Please specify where your SPCS folder is which contains (Företag) and (Gemensamma filer):" />
 <Control Id="Folder3" Type="PathEdit" X="20" Y="195" Hidden ="no" Width="320" Height="18" Property="SPCS_FOLDER" Indirect="yes" />
 <Control Id="ChangeFolder3" Type="Text" X="20" Y="215" Width="56" Height="18" Text="Change..." /> 
```

如果您想将它们保存到文本文件中，那么我将使用自定义操作。这是我关于如何将数据保存到文本文件的代码。

```
 extern "C" UINT __stdcall GetLoggersInfo(MSIHANDLE hInstall)
 {
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
char szLocation[MAX_PATH];
LPWSTR szValueBuf = NULL, szInstallDir = NULL, szVismaAdmin = NULL;

hr = WcaInitialize(hInstall, "GetLoggersInfo");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

hr = WcaGetProperty(L"VISMA_ADMIN",&szVismaAdmin);
ExitOnFailure(hr, "failed to get folder");

hr = WcaGetProperty(L"SPCS_FOLDER",&szValueBuf);
ExitOnFailure(hr, "failed to get folder"); 
```

我假设您正在使用产品安装文本文件，因此获取它所在的目录：

```
hr = WcaGetProperty(L"INSTALLDIR",&szInstallDir);
ExitOnFailure(hr, "failed to get install location");

wcstombs(szLocation, szValueBuf, 260);
strcat(szLocation, "\\NameOfTextFile.txt");

CString lpszString = CString("Visma Admin:") + szVismaAdmin + "\r\n";

hr = AppendInfo(szLocation,lpszString);
ExitOnFailure(hr, "failed to append the NameOfTextFile.txt file with the 

LExit:
ReleaseStr(szValueBuf);
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

和辅助功能：

```
HRESULT AppendInfo(__in LPCSTR lpszFile, __in LPCSTR lpszEntry )
{
HRESULT hr = S_OK;
HANDLE  hFile;
DWORD   dwWritten;
CHAR    szError[MAX_PATH*2];
CHAR    szTitle[MAX_PATH];

try
{
    if ((hFile = CreateFile(lpszFile,
        GENERIC_READ|GENERIC_WRITE,
        FILE_SHARE_READ | FILE_SHARE_WRITE,
        NULL,
        OPEN_EXISTING,
        FILE_ATTRIBUTE_NORMAL,
        NULL)) == INVALID_HANDLE_VALUE) 
    {
        // Error: Couldn't Open File. Handle error

    } 

    // No Entry Exists.
    SetFilePointer(hFile, 0, NULL, FILE_END);

    if ( !WriteFile(hFile,lpszEntry,lstrlen(lpszEntry),&dwWritten,NULL) )
    {
        CloseHandle(hFile); 
        //HandleError
    }

    CloseHandle(hFile); 
}
catch(int e)
{
    // A failure caused an exception!
    //Handle Error
}

return hr;
} 
```

编辑：忘记提及添加自定义操作并在之后安排它`InstallFinalize`

# powershell - 如何评估从标准输入输入的 PowerShell 脚本

> ID：13876138
> 
> 赞同：8
> 
> 时间：2012-12-14T09:45:36.170
> 
> 标签：powershell, stdin

我想在 PowerShell 中评估来自 StdIn 的内容，如下所示：

```
echo "echo 12;" | powershell -noprofile -noninteractive -command "$input | iex" 
```

输出：

```
echo 12; 
```

不幸的是，`$input`不是一个字符串，而是一个`System.Management.Automation.Internal.ObjectReader`，它`iex`不能按预期工作......因为这个工作正常：

```
powershell -noprofile -noninteractive -command "$command = \"echo 12;\"; $command | iex" 
```

输出：

```
12 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T11:32:07.997

以下将起作用：

使用脚本块：

```
echo "echo 12;" | powershell -noprofile -noninteractive -command { $input | iex } 
```

或者使用单引号来避免字符串插值：

```
 echo "echo 12;" | powershell -noprofile -noninteractive -command '$input | iex' 
```

所以 $input 变量没有被扩展，字符串 '$input' 被传递给 iex。

这两个都给我“12”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-21T05:28:05.387

只需`-`用作源文件“名称”：

```
echo "echo 12;" | powershell -noprofile -noninteractive - 
```

# mysqli - mysqli bind_param 不工作

> ID：13876142
> 
> 赞同：0
> 
> 时间：2012-12-14T09:45:53.543
> 
> 标签：mysqli

我有以下工作正常的查询。

```
$stmt = $sql->prepare("INSERT INTO _dashboard_users(
            Email,
            Password,
            FirstName,
            LastName,
            BusinessName,
            BusinessRole,
            Address,
            City,
            State,
            PostalCode,
            Phone,
            Website) VALUES(?,md5(?),?,?,?,?,?,?,?,?,?,?)");            
        $stmt->bind_param("ssssssssssis",
            $Email,
            $Password,
            $FirstName,
            $LastName,
            $BusinessName,
            $BusinessRole,
            $Address,
            $City,
            $State,
            $PostalCode,
            $Phone,
            $Website);
        $stmt->execute(); 
```

但这一个让人头疼。

```
$stmt = $sql->prepare("INSERT INTO scrape(
            Kategorie,
            Hersteller,
            Artikelnummer,
            Bezeichnung,
            EAN,
            UPC,
            Beschreibung,
            Technische_Daten,
            Sprache,
            URL,
            Marktrelease,
            Bild) VALUES(?,?,?,?,?,?,?,?,?,?,?,?)");
        $stmt->bind_param("ssssssssssss",
            $Kategorie,
            $Hersteller,
            $Artikelnummer,
            $Bezeichnung,
            $EAN,
            $UPC,
            $Beschreibung,
            $Technische_Daten,
            $Sprache,
            $URL,
            $Marktrelease,
            $Bild);
        $stmt->execute(); 
```

致命错误：在非对象上调用成员函数 bind_param()~

谁能给我一个为什么会发生这种情况的原因？我 100% 确定我在写什么，bind_param 是 $stmt 的成员函数。

```
**UPDATE:** I initiliazed $sql like this $sql = new mysqli(DB_HOST,DB_USER,DB_PASS,DB_NAME); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:50:28.020

您的第二个查询返回错误。`$sql->prepare`失败了，所以不是`$stmt`一个对象（如您的错误中所述）。您不能在非对象上调用方法。

# php - 在控制器中显示 facebook 好友列表不能使用过时的 API 使用？

> ID：13876144
> 
> 赞同：0
> 
> 时间：2012-12-14T09:45:58.140
> 
> 标签：php, facebook, zend-framework, facebook-graph-api

我是 Facebook API 的新手，我目前正在尝试在变量中获取用户朋友列表。

这是我的控制器中的代码：

```
$accept = $this->isAcceptApp($this->app_secret);

$this->view->accept = $accept;

  $facebook = new Facebook(array(
      'appId'  => $this->app_id,
      'secret' => $this->app_secret,
      'cookie' => true,
    ));

  $session = $facebook->getSession();

    if ($session) {

          $friends = $facebook->api('/me/friends'); 
```

我的控制器顶部有这个：

```
require_once("facebook.php"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:53:15.103

好吧，我可以立即看到的一件事是一个错误。不久前，[SDK 发生了变化，登录过程也略有变化](https://developers.facebook.com/blog/post/503/)......

这就是它现在的样子——

```
$facebook = new Facebook($fbConfig);
$user = $facebook->getUser();  // <-- the change!!
if ($user) {
  // proceed knowing you have a logged in user who's authenticated
} else {
  // proceed knowing you require user login and/or authentication
} 
```

注意`getSession()`没有使用。请改用该`getUser()`功能。

您可以[从 github](https://github.com/facebook/facebook-php-sdk)（当前为 v.3.2.2）获取 SDK 的更新版本。

# camera - 非针孔相机

> ID：13876145
> 
> 赞同：1
> 
> 时间：2012-12-14T09:45:59.950
> 
> 标签：camera

我试图弄清楚这篇论文的一些内容，交互式渲染的非针孔近似值。

这是一篇非常有趣的论文，但我无法真正理解转换为我自己的游戏引擎的方式。

因此，根据我的理解，要创建一个非针孔遮挡相机，我需要根据深度值沿不同的光线投影图像？还是我需要扭曲顶点投影以便看到被遮挡的部分？

我也不确定，但可以使用类似于鱼眼相机的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T07:34:47.940

鱼眼相机只是具有大视场（或相对较小焦距）的相机。它可能具有明显的径向畸变，通常会随着视场而增长。但除此之外，它与普通针孔相机相同。

我看了论文，但仍然无法理解你的问题。

# c# - C# - 在数字上显示文化

> ID：13876146
> 
> 赞同：0
> 
> 时间：2012-12-14T09:46:01.150
> 
> 标签：c#, cultureinfo, number-formatting

我想展示整数的文化，但`"n"`数字格式给了我双格式输出。

这是一个小例子

```
int i = 10000;
Console.WriteLine(i.ToString("n", CultureInfo.CreateSpecificCulture("en-US"))); 
```

这给了我作为`10,000.00`

我想要输出为`10,000`

像修改字符串这样的解决方法不是我需要的。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T09:47:52.843

使用`n0`而不是`n`格式。

```
int i = 10000;
Console.WriteLine(i.ToString("n0", CultureInfo.CreateSpecificCulture("en-US"))); 
```

输出将是：

```
10,000 
```

或者您可以使用：

```
Console.WriteLine(i.ToString("N0")); 
```

您可能会看到：[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

**数字 ("N") 格式说明符。**

> 数字（“N”）格式说明符将数字转换为“-d,ddd,ddd.ddd…”形式的字符串，其中“-”表示负数符号（如果需要），“d”**表示数字（0 -9)** ,

*顺便说一句“N”或“n”是一样的*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T09:49:13.857

```
Console.WriteLine("{0:n0}",i, CultureInfo.CreateSpecificCulture("en-US")); 
```

或更接近您的原件

```
Console.WriteLine(i.ToString("n0"), CultureInfo.CreateSpecificCulture("en-US")); 
```

现场示例：[http ://rextester.com/MDJI27648](http://rextester.com/MDJI27648)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:54:15.813

你想看什么样的号码？它是货币金额还是什么？：

c (货币) string.Format("{0:c}",i) $1,000,000.00

d (十进制) string.Format("{0:d}",i) 1000000

e (科学) string.Format("{0:e}",i) 1.000000e+006

f (定点) string.Format("{0:f}",i) 1000000.00

g (一般) string.Format("{0:g}",i) 1000000

n（带分隔符）string.Format("{0:n}",i) 1,000,000.00

x 十六进制 string.Format("{0:x4}",i) f4240

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:56:37.187

打印的小数点后位数由属性`"n"`给出。[`NumberFormatInfo.NumberDecimalDigits`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimaldigits.aspx)

你可以改变它，然后`CultureInfo`在你的所有`ToString`调用中使用来确保你的字符串是一致的：

```
var customCI = CultureInfo.CreateSpecificCulture("en-US");
customCI.NumberFormat.NumberDecimalDigits = 0;

Console.WriteLine(i.ToString("n", customCI)); 
```

# jquery - 如何将此有效的滑动删除功能添加到新的附加列表项？

> ID：13876149
> 
> 赞同：1
> 
> 时间：2012-12-14T09:46:25.297
> 
> 标签：jquery, list, jquery-mobile, append, swipe

我想在这里看到常见的移动滑动删除功能[http://andymatthews.net/code/swipebutton/](http://andymatthews.net/code/swipebutton/) 我下载了源代码，并从中删除了我自己的版本。它工作正常，这是我的 html：

```
<div class="accounts">    
<div id="CreditCards">
            <ul id="swipeMe">
                <li ><a href="#">This works</a></li>
                <li data-swipeurl="#"><a href="#">This works<</a></li>
                <li data-swipeurl="#"><a href="#">This works<</a></li>
                <li >This works too</li>        
            </ul>

</div>
</div> 
```

而不是这里是我的 html，它接受信用卡信息以添加到列表中：

```
 <div class= "addCC">        
        <div data-role="fieldcontain">
          <form id ="ccForm">
            <input type="password" name="credit_card_number" id="credit_card_number" value="" placeholder="Credit Card Number">
            <input type="password" name="security_code" id="security_code" value="" placeholder="Security Code">
            <input type="date" name="expiration_date" id="expiration_date" value="" placeholder="Expiration Date">
            <input type="password" name="name" id="name" value="" placeholder="Name On Card">
            <input type="password" name="street_address" id="street_address" value="" placeholder="Street Address">
            <input type="text" name="city" id="city" value="" placeholder="City">
            <input type="number" name="zip_code" id="zip_code" value="" placeholder="Zip Code">

            <button type="button" class="submitCC" name="submit" value="submit">Submit</button>
          </form>
        </div>
</div> 
```

这是我的 JS，它将新信用卡附加到现有列表中：

```
$(document).ready(function() {
$('.submitCC').click(function(){
    var creditcard = $('#credit_card_number').val();
    $('.accounts  #swipeMe').append('<li><a href="#">' + creditcard + '</a></li>');
    $('#ccForm').slideUp();

}); 
```

这是插件所涉及的JS：

```
 $(document).ready(function() {

        // attach the plugin to an element
        $('#swipeMe li').swipeDelete({
            btnTheme: 'e',
            btnLabel: 'deleteniko',
            btnClass: 'aSwipeButton',
            click: function(e){
                e.preventDefault();
                var url = $(e.target).attr('href');
                $(this).parents('li').slideUp();
                $.post(url, function(data) {
                    //console.log(data);
                });
            }
        });

        $('#swipeMe li:nth-child(n)').on('click', function(){
            $(this).trigger('swiperight')
        });

    }); 
```

最后是整个插件：

```
(function($){

$.fn.swipeDelete = function(o){

    o = $.extend( {}, $.fn.swipeDelete.defaults, o );

    return this.filter('#swipeMe li').each(function(i, el){
        var $e = $(el);
        var $parent = $(el).parent('ul');

        $e.on(o.direction, function ( e ) {

            // reference the current item
            var $li = $(this);
            var cnt = $('.ui-btn', $li).length;

            // remove all currently displayed buttons
            $('div.ui-btn, .' + o.btnClass, $parent).animate({ width: 'toggle' }, 200, function(e) {
                $(this).remove();
            });

            // if there's an existing button we simply delete it, then stop
            if (!cnt) {
                // create button
                var $swipeBtn = $('<a>' + o.btnLabel + '</a>').attr({
                                    'data-role': 'button',
                                    'data-mini': true,
                                    'data-inline': 'true',
                                    'class': (o.btnClass === 'aSwipeBtn') ? o.btnClass : o.btnClass + ' aSwipeBtn',
                                    'data-theme': o.btnTheme,
                                    'href': $li.data('swipeurl')
                                })
                                .on('click tap', o.click);

                // slide insert button into list item
                $swipeBtn.prependTo($li).button();
                $li.find('.ui-btn').hide().animate({ width: 'toggle' }, 200);

                //override row click
                $('div a:not(' + o.btnClass + ')', $li).on('click.swipe', function(e){
                    e.stopPropagation();
                    e.preventDefault();
                    $(this).unbind('click.swipe');
                    $li.removeClass('ui-btn-active').find('div.ui-btn').remove();
                });

            }

        });

    });
};

$.fn.swipeDelete.defaults = {
    direction: 'swiperight',
    btnLabel: 'Delete',
    btnTheme: 'e',
    btnClass: 'aSwipeBtn',
    click: function(e){
        e.preventDefault();
        $(this).parents('li').slideUp();
    }
}; 
```

}

我为所有的代码道歉。它附加得很好，并且删除在 html 元素上效果很好，但是任何新附加的列表项都没有删除功能。任何想法为什么？

# jquery - 具有无限滚动和图像预加载器的 jquery isotope

> ID：13876156
> 
> 赞同：2
> 
> 时间：2012-12-14T09:46:36.390
> 
> 标签：jquery, jquery-isotope, infinite-scroll, image-preloader

我正在使用 jquery isotope 和无限滚动并想使用图像预加载器

我正在使用的图像预加载器是这样的：[图像预加载器](http://code.google.com/p/img-preloader/)

```
$('.image').preloader({
    loader: '/images_/icons/img_pre.gif',
    fadeIn: 700,
    delay : 200 
    }); 
```

它在第一页上完美运行，但不会为无限滚动的项目触发，所以我需要将它放在同位素回调中的某个位置，但是在哪里？有任何想法吗？

这是我使用的同位素回调代码：

```
// call Isotope as a callback
function( newElements ) {
    $container.isotope( 'insert', $( newElements ) ); 
    $container.isotope({ filter: '*' });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:58:31.570

小沃尔特很接近，但我已经试过了。它们的关键是代码的顺序，预加载器代码必须在加载新元素之前出现，所以：

```
function( newElements ) {

$('.image').preloader({
    loader: '/images_/icons/img_pre.gif',
    fadeIn: 700,
    delay : 200 
});

$container.isotope( 'insert', $( newElements ) ); 
$container.isotope({ filter: '*' });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:51:11.807

同位素中有一个`loading`属性与您需要的相似，但仅适用于整个下一页，而不是特定的 img 元素：

```
$container.infinitescroll({
    navSelector  : '#page_nav',    // selector for the paged navigation 
    nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
    itemSelector : '.element',     // selector for all items you'll retrieve
    loading: {
        finishedMsg: 'No more pages to load.',
        img: 'http://i.imgur.com/qkKy8.gif'
      }
    },
    // call Isotope as a callback
    function( newElements ) {
      $container.isotope( 'appended', $( newElements ) ); 
    }
  ); 
```

也许您可以尝试使用以下方式调用预加载器：

```
// call Isotope as a callback
function( newElements ) {
    $container.isotope( 'insert', $( newElements ) ); 
    $container.isotope({ filter: '*' });

    $('.image').preloader({
        loader: '/images_/icons/img_pre.gif',
        fadeIn: 700,
        delay : 200 
    });
} 
```

# android - 如何限制 EditText 中的输入？

> ID：13876158
> 
> 赞同：1
> 
> 时间：2012-12-14T09:46:44.917
> 
> 标签：android, android-widget, android-edittext

我有一个`EditText`. 我只想要输入字符：`a->z,A->Z,0->9 and @.#,-,_` 如何限制键盘输入中的键`EditText`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T09:53:01.580

试试这个

```
<EditText 
  android:layout_height="wrap_content" 
  android:layout_width="match_parent" 
  android:inputType="text"
  android:digits="0123456789......yourcharcters"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T09:56:30.340

您可以使用此代码片段通过正则表达式对其进行检查：

```
EditText yourEditText = (EditText)findViewById(R.id.yourEditText );
if( !yourEditText.getText().toString().matches("[a-zA-Z]+") ); // This regex matches only letters
  yourEditText.setError( "Error on text, only a->z,A->Z" ); 
```

您可以将此角色添加到事件中……例如单击按钮。

对于您想要的正则表达式，您可以在 Internet 上找到它，或者尝试编写您的正则表达式并在此站点上对其进行测试： [Regexplanet](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T09:52:00.630

我想到的第一个想法是创建一个[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)并验证用户输入的每个字符，使用正则表达式构造。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T09:52:21.520

你可以试试这个

```
EditText et = new EditText(this);
int maxLength = 3;
InputFilter[] FilterArray = new InputFilter[1];
FilterArray[0] = new InputFilter.LengthFilter(maxLength);
et.setFilters(FilterArray); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-14T09:52:23.407

看看这个：[android:inputType](http://developer.android.com/reference/android/widget/TextView.html)

如果您没有找到好的组合，则实现您自己的侦听器并在每次更改时验证文本。

# linux - 强制在登录 SSH 上运行不间断的 bash 脚本

> ID：13876160
> 
> 赞同：2
> 
> 时间：2012-12-14T09:47:00.730
> 
> 标签：linux, bash, ssh

我正在制作一个基于文本的 RPG，并且想在某个用户登录时运行一个 bash 脚本（脚本基本上是 lua，然后一旦文件完成，注销），但我不希望用户访问 shell ，并且我希望它在完成后立即注销。

我不知道如何制作脚本，所以 ctrl+c 不会停止它并为用户提供 shell 访问权限..

我用谷歌搜索过，但我一定没有使用正确的短语......

如果有人可以帮助我，那将不胜感激。

他们将通过 SSH 登录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:16:12.517

您可以尝试将脚本设置为用户的默认 shell：

```
chsh -s /usr/local/the_script theuser 
```

然后脚本将代替默认 shell 运行，并且用户将在脚本结束时注销。

您将需要添加脚本以[`/etc/shells`](http://www.linuxfromscratch.org/blfs/view/svn/postlfs/etcshells.html)使其被接受为有效的登录 shell。

***免责声明：**这种方法可能存在其他安全隐患，因此在将其部署到生产系统之前，请多加注意并进一步研究它。例如，如果适用，您可能希望在[受限模式下](http://tldp.org/LDP/abs/html/restricted-sh.html)运行脚本。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:52:48.540

他们真的需要登录还是游戏的一部分 - 如果它是游戏的一部分，请假装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T16:38:35.893

您可以通过以下命令将键盘中断的快捷方式更改为默认值以外的快捷方式：

```
stty intr yourkey 
```

对于`Ctrl`+ `Key`，将函数映射到`^C`(if `Ctrl`+ `C`)。

据我所知，您不能将任何 stty 函数映射到`shift`+`key`或`shift`++ 。`ctrl``key`

# c - fgets 在没有空格时读取空格

> ID：13876161
> 
> 赞同：1
> 
> 时间：2012-12-14T09:47:07.057
> 
> 标签：c, fgets

用于`fgets()`读取字符串。

但是当我的输入是 3 个字符串“abc”时，打印大小的打印语句会打印出 4。

这完全破坏了我的方法，因为它为 char 数组增加了一个空间，使排列不起作用。

输入文件：

```
2
abc
bca 
```

我确定字符串后面没有空格。

```
int main(){

  FILE * inF;
  inF = fopen ("input2.txt", "r");

  //Find number of Strings
  int numWords = 0;
  fscanf(inF, "%d", &numWords);
  printf("%d\n", numWords);

  int i = 0;
  int counter = 0;
  char string[10000];

  //Run fgets so it starts at second line
  fgets(string, 20, inF);

  while(i< numWords) {

    string[10000] = 0;
    fgets(string, 20, inF);
    printf("char: %s", string);

    //find and print permutations
    counter = strlen(string);
    printf("size: %d\n", counter);
    arrange(string, 0, counter - 1);

    i++;
    }

  return 0;

  } 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:01:58.583

第一个`fscanf`读取数字，但留下换行符。因此，当您稍后调用它时，读取`fgets`的是这个空行。`fgets`

仅`fgets`用于获得完整的行，如果您需要使用`scanf`类似的功能，则`sscanf`在该行上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:51:40.147

不要混用`fscanf()`和`fgets()`。

为第一行读取一整行，然后用于`sscanf()`解析该行中的数字，然后再继续`fgets()`读取剩余行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:40:53.993

您可以在`string[]`之后打印缓冲区中的内容`fgets`，如下所示：

```
...
while(i< numWords) {

string[10000] = 0; // !!! Do you mean string[9999] = 0;
fgets(string, 20, inF);
printf("char: %s", string);

// add printf here
for (j = 0; j < 20; j++)
    printf("%02X ", (unsigned char)string[j]);
printf("\n");

...
} 
```

你会看到这样的结果：

```
2
char: abc
61 62 63 0A 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
size: 4
char: bca
62 63 61 0A 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
size: 4 
```

如您所见，每个 之后都有一个`0A`，即。那么为什么大小是显而易见的。`\n``fgets``4`

```
$ man fgets
    ...
    If  a  newline  is  read, it is stored into the buffer.
    ... 
```

因此，您可能必须手动删除换行符。

# java - 了解 Hibernate 版本历史及其模块之间的兼容性

> ID：13876163
> 
> 赞同：2
> 
> 时间：2012-12-14T09:47:16.150
> 
> 标签：java, hibernate, versioning

是否有关于 Hibernate 版本历史的任何好的链接或文档。当引入[模块化](http://in.relation.to/9384.lace)
时，我的困惑始于 Hibernate 3.3 。

例如，如果我想将 hibernate-validator 3.x 与 hibernate 3.2.6ga 一起使用（在 3.3 之前它是单个 jar），它会兼容吗？

我想知道不同模块之间的兼容性以及它们与 Single Hibernate Jars Releases（如**3.2.6ga**）的兼容性。兼容性是指最低要求的版本。

我是休眠新手。所以完全迷失在休眠版丛林中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:41:52.803

查看 Hibernate 社区维护的 Hibernate 兼容性矩阵。它准确显示了哪个版本的 Hibernate 组件与其他组件兼容。

[Hibenate 兼容性矩阵](https://community.jboss.org/wiki/HibernateCompatibilityMatrix)

因此，根据矩阵，Hibernate-validator-3.x 与 hibernate-3.2.6ga 兼容。

# maven - 如何在命令行中覆盖 Maven 属性？

> ID：13876165
> 
> 赞同：100
> 
> 时间：2012-12-14T09:47:19.857
> 
> 标签：maven, command-line, maven-3

我有以下由 Maven 3.0.4 运行的普通 pom。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>test</artifactId>
    <version>1.0</version>
    <packaging>jar</packaging>

</project> 
```

我正在尝试覆盖命令行中的默认设置，如下所示：

```
mvn -Dproject.build.finalName=build clean package 
```

但这被忽略了，我得到了`test-1.0.jar`. 我尝试更改其他属性，例如 outputDirectory、目录、artifactId，但也失败了。

做这件事的正确方法是什么？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-12-14T11:38:34.120

请参阅[POM 简介](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

finalName 创建为：

```
<build>
    <finalName>${project.artifactId}-${project.version}</finalName>
</build> 
```

解决方案之一是添加自己的属性：

```
<properties>
    <finalName>${project.artifactId}-${project.version}</finalName>
</properties>
<build>
    <finalName>${finalName}</finalName>
 </build> 
```

现在尝试：

`mvn -DfinalName=build clean package`

# javascript - 更改活动选项卡后未加载 Extjs 商店

> ID：13876177
> 
> 赞同：0
> 
> 时间：2012-12-14T09:48:16.940
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-mvc

我在带有表格名称的一侧有一个 grid.panel，我想在用户单击它时在选项卡视图内的另一个 grid.panel 中显示表格（或它的结构）。

我做了什么：

在动作监听器中

```
var store = Ext.data.StoreManager.lookup('Tables');
currentTable = store.findRecord('name',record.get('name'));

var structureView = Ext.ComponentQuery.query('structure')[0];
structureView.showTable(currentTable); 
```

在视图中

```
showTable: function(table) {
    this.storeObj.getProxy().url = '/tables/stucture/' + table.data.name;
    this.storeObj.load();

    this.update();
} 
```

在 Tables 存储中，我有表描述符，其中包含一些基本数据，例如名称等，并且带有表名的列表显示了该存储的内容。因此，我查找 Tables 存储并获取 tabledescriptor 并将其传递给视图，然后视图加载存储（在本例中为“列”）以及它将显示的数据。在我切换标签之前，这一切都很好。更改活动选项卡然后更改回数据不会在单击另一个表的名称时刷新，我得到这个：Uncaught TypeError: Cannot call method 'removeChild' of null。更改活动选项卡后似乎无法再加载商店。我在论坛上发现了这个问题，但我找不到解决方案。

你有什么想法？

谢谢你的时间。

编辑：

```
Ext.define('App.view.Table.Structure', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.structure',
    store: 'Columns',
    width: 800,
    storeObj: undefined,

    initComponent: function () {

        this.columns = [{
            header: 'Column name',
            dataIndex: 'name',
            flex: 1
        }, {
            header: 'Position',
            dataIndex: 'position',
            flex: 1
        }, {
            header: 'Default value',
            dataIndex: 'defaultValue',
            flex: 1
        }, {
            header: 'Column type',
            dataIndex: 'type',
            flex: 1
        }, ];

        this.storeObj = Ext.StoreManager.lookup('Columns');

        this.callParent(arguments);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:17:30.620

好吧，我终于设法解决了，但我真的不明白为什么这解决了问题。所以这就是我所做的：

*   每次我需要更新 Columns 存储（或其他）时，我都会查找它，而不是仅在 initcomponent 中查找它。
*   我没有调用 update() 方法，而是调用了 reconfigure()

现在它就像魅力一样，但我不明白为什么 update 没有起到作用，为什么我每次想调用 load() 时都必须查找商店......所以如果有人能解释一下，我会很感激的。

# sql - SQL 语句 - 优化

> ID：13876178
> 
> 赞同：0
> 
> 时间：2012-12-14T09:48:16.837
> 
> 标签：sql, oracle

我有这样的声明：

```
SELECT *
  FROM sgtn
 WHERE sgtn_kun_id IN (SELECT DISTINCT kun_id
                         FROM sgtn, kun
                        WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS)
                              AND sgtn_kun_id = kun_id)

       AND sgtn_strasse IN (SELECT sgtn.sgtn_strasse
                              FROM sgtn
                             WHERE sgtn_kun_id IN (SELECT DISTINCT kun_id
                                                     FROM sgtn, kun
                                                    WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS)
                                                          AND sgtn_kun_id = kun_id)

                             GROUP BY sgtn.sgtn_strasse
                            HAVING COUNT(sgtn_strasse) > 2); 
```

`LONG LIST OF EMAILS`即：'abc@domain.com'，'def@domain.com'，。. . 'xyz@domain.com'

如您所见，我在此查询中重复了部分子查询。

我想知道是否以及如何替换`LONG LIST OF EMAILS`. 它在我的陈述中出现了两次。是否可以编辑此查询，以便提到的内容`LONG LIST OF EMAILS`发生一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:06:49.710

使用 WITH 子句：

```
WITH kun_list AS (
    SELECT DISTINCT kun_id
      FROM sgtn, kun
     WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS)
           AND sgtn_kun_id = kun_id)

SELECT *
  FROM sgtn
 WHERE sgtn_kun_id IN (SELECT kun_id
                         FROM kun_list)

       AND sgtn_strasse IN (SELECT sgtn.sgtn_strasse
                              FROM sgtn
                             WHERE sgtn_kun_id IN (SELECT kun_id
                                                     FROM kun_list)

                             GROUP BY sgtn.sgtn_strasse
                            HAVING COUNT(sgtn_strasse) > 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:07:10.677

你可以试试这个：

```
with CTE as (
SELECT sgtn.*, count(sgtn_strasse) OVER (PARTITION BY sgtn_strasse) cnt
FROM sgtn
WHERE sgtn_kun_id IN (SELECT kun_id FROM kun 
                      WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS))
)

SELECT * FROM  CTE WHERE CNT > 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:10:05.583

首先，你不需要使用

```
IN (SELECT DISTINCT kun_id
    FROM sgtn, kun
    WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS)
    AND sgtn_kun_id = kun_id) 
```

够了

```
IN (SELECT kun_id
    FROM kun
    WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS)) 
```

可以检测到列表中具有多个 sgtn_strasse 和 email 的行

```
select * from (
  SELECT s.*, count(*) over (partition by sgtn_strasse) cnt_strasse
  FROM sgtn s
  WHERE sgtn_kun_id IN (SELECT kun_id
                       FROM kun
                       WHERE kun.kun_e_mail IN (LONG LIST OF EMAILS))
  )
WHERE cnt_strasse > 1; 
```

# java - 数据库表的异步扫描

> ID：13876179
> 
> 赞同：1
> 
> 时间：2012-12-14T09:48:19.183
> 
> 标签：java, caching, jdbc, asynchronous, traversal

我想从我的 java 代码中遍历数据库表的所有行。在这里，我正在寻找最佳解决方案。

我想到的解决方案是缓冲 100k 行之类的内容，并在至少 80% 的缓冲区被异步消耗时重新填充缓冲区。因此会有一个大小为 100k 的循环链表。当调用将 80,000 个提要添加到链接列表时，会有一个线程。每当消耗了 100k 的 80% 时，就会调用此线程并将下一个 80k 提要加载到链表中，而不是写入先前消耗的行。

java中是否有任何类似的库对数据库表有相同的作用？

# javascript - angular.js e2e 测试和 $timeout 问题

> ID：13876183
> 
> 赞同：3
> 
> 时间：2012-12-14T09:48:28.160
> 
> 标签：javascript, angularjs

我有一个显示 Flash 消息的简单服务[https://github.com/lucassus/mongo_browser/blob/master/app/assets/javascripts/app/services.js.coffee#L31](https://github.com/lucassus/mongo_browser/blob/master/app/assets/javascripts/app/services.js.coffee#L31)我正在尝试在 e2e 中对其进行测试规格[https://github.com/lucassus/mongo_browser/blob/master/spec/javascripts/e2e/databases_scenario.js.coffee#L66](https://github.com/lucassus/mongo_browser/blob/master/spec/javascripts/e2e/databases_scenario.js.coffee#L66) 我使用 $timeout 服务在 3 秒后隐藏一条消息。

我注意到 e2e 场景运行程序会阻塞，直到超时刷新，并且我无法检查是否显示了 flash 消息。

如何在 e2e 规范中使用 $timeout 测试功能？是否可以在不将模拟服务注入真实应用程序的情况下测试这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:04:06.540

正如@christian-smith 所述，我看不到调用`inject()`端到端测试的方法；此方法适用于标准 Jasmine 测试，而不是 e2e 测试运行器。

我创建了一个[Plunker](http://plnkr.co/edit/Wa7GNoFaxWB5xLlRRnER)来演示。

在示例中，对`$timeout(halfHourAction, 30*1000, false);`in的调用`app.js`意味着测试不会在 30 秒内开始运行。

在我的 Real World® 示例中，我实际上每 30 分钟轮询一次，因此应用程序根本不会开始运行。即使能够刷新`$browser`s 队列也只会向它添加另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:33:12.350

您可以使用`sleep(seconds)`让测试等到您的 $timeout 代码完成。请参阅文档中此页面上的 API 部分：http: [//docs.angularjs.org/guide/dev_guide.e2e-testing](http://docs.angularjs.org/guide/dev_guide.e2e-testing)

此外，[$timeout](http://docs.angularjs.org/api/ng.%24timeout)有一个`flush()`您可能会觉得有用的方法。只需将 $timeout 注入您的测试并在任何断言之前调用 flush 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T08:47:05.033

我们在 $timeout 上遇到了类似的问题——我们的应用程序必须每 5 分钟执行一次 XHR——所以我们有一个函数可以每 5 分钟设置一次重复发生的 $timeout。这打破了我们的 e2e 测试，因为他们正在等待 angular 完成其工作，然后再继续，而这从未发生过。

这是我对这个问题的解决方法：

*   超时值作为配置被移动，然后被模拟 - 在我们应用程序的真实版本中，该值来自后端，在我们应用程序的测试版本中，我们使用 ngMockE2E 模拟超时值。

*   在测试模拟中，超时间隔设置为 0 毫秒。

*   在设置 $timeout 的函数中，我们添加了一个普通的 javascript setTimeout(..., 1000)，它在设置新的 $timeout 之前等待 1 秒。

这样，调用 $timeout 之间就有 1s 的间隔。运行 e2e 测试时，每 1 秒添加一个新的 $timeout (0ms)，它会立即执行并继续测试。这对我们的 e2e 测试的性能影响约为 0，目前运行良好。

# sql-server-2008 - 将 Excel 文件导入 SQL Server 2008

> ID：13876192
> 
> 赞同：0
> 
> 时间：2012-12-14T09:48:41.803
> 
> 标签：sql-server-2008, import-from-excel, truncation

我有一个包含这些列的 Excel 文件：

1.  自然态度
2.  智力
3.  职业
4.  健康
5.  其他技能

通过导入向导导入该 Excel 文件时，出现以下错误

> *执行（错误）消息错误 0xc020901c：数据流任务 1：输出“Excel 源输出”(9) 上的输出列“智能”(21) 出现错误。返回的列状态为：“文本被截断或一个或多个字符在目标代码页中不匹配。”。（SQL Server 导入和导出向导）*
> 
> *错误 0xc020902a：数据流任务 1：“输出列“智能”(21)”失败，因为发生了截断，并且“输出列“智能”(21)”上的截断行处置指定了截断失败。指定组件的指定对象发生截断错误。（SQL Server 导入和导出向导）*
> 
> *错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“Source MainSheetData$”(1) 上的 PrimeOutput 方法返回错误代码 0xC020902A。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）*

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:32:38.473

我将相同的 Excel 表转换为访问权限。之后通过导入向导我导入没有任何错误。谢谢

# ios - 2.23 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝

> ID：13876194
> 
> 赞同：0
> 
> 时间：2012-12-14T09:48:56.270
> 
> 标签：ios, objective-c, cordova, appstore-approval

我正在阅读很多关于这个问题的问题。我正在为我的应用程序使用 Phonegap。我的应用程序下载了大约 3mb 的图像。Apple 拒绝我的应用程序并建议对所有文件应用“不备份属性”。[如何防止文件备份到 iCloud 和 iTunes？](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)

我将此代码用于我的 5.1 应用程序：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
 {
      assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

      NSError *error = nil;
      BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                              forKey: NSURLIsExcludedFromBackupKey error: &error];
      if(!success){
         NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
      }
      return success;
 } 
```

我把它放在我的 AppDelegate.m 中。这是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:29:14.907

您现在将文件存储在哪里？我猜你是在使用标准的 Phonegap 示例：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, null); 
```

一个解决方案是为您的 FileSytem 请求使用以下代码，这将重新获取您应用程序的临时目录：

```
window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, onSuccess, onError); 
```

在`LocalFileSystem.TEMPORARY`iOS 上会指向

```
/var/mobile/Applications/CEEECEA6-4684-4599-B0BF-407BE2CBD3CE/tmp 
```

亲切的问候，

麦克风

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:27:59.617

这应该是在我身边工作的正确代码：

```
var DATADIR;
var knownfiles = []; 

function init() {
          window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, null);
}

function onFSSuccess(fileSystem) {
    console.log("here I am");
    fileSystem.root.getDirectory("it.mns.dcsofficebp",{create:true},gotDir,false);
}
function gotDir(d){
    DATADIR = d;
    DATADIR.setMetadata(onSetMetadataSuccess, onSetMetadataFail, { "com.apple.MobileBackup": 1});
}

function onSetMetadataSuccess() {
    console.log("success setting metadata - DONE DONE DONE!")
}
function onSetMetadataFail() {
    console.log("error setting metadata")
} 
```

这是我的结果：2012-12-14 12:46:20.064 testproj[1779:c07] [LOG] 成功设置元数据 - DONE DONE DONE！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:22:19.163

这是我的代码

```
 var DATADIR;
   var knownfiles = []; 

   function init() {
         document.addEventListener("deviceready", onDeviceReady, true);
   }

   function onDeviceReady() {
          window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, null);    
    }

    //Loaded my file system, now let's get a directory entry for where I'll store my crap    
    function onFSSuccess(fileSystem) {
         fileSystem.root.getDirectory("it.mns.dcsofficebp",{create:true},gotDir,onError);
    }

    //The directory entry callback
    function gotDir(d){
         DATADIR = d;
         var reader = DATADIR.createReader();
         localStorage.setItem("datadir",JSON.stringify(DATADIR));
         reader.readEntries(function(d){
             appReady();
         },onError);
    }

     //Result of reading my directory
     function gotFiles(entries) {
         for (var i=0; i<entries.length; i++) {
                knownfiles.push(entries[i].name);
                renderPicture(entries[i].fullPath);
          }
      } 
```

我需要放在哪里

```
parent.setMetadata(onSetMetadataSuccess, onSetMetadataFail, { "com.apple.MobileBackup": 1}); 
```

# r - 在 R 中运行 sfLapply 时出错

> ID：13876199
> 
> 赞同：1
> 
> 时间：2012-12-14T09:49:21.693
> 
> 标签：r, snowfall

我的一段代码如下所示：

```
x<- c(1,2,3,4,5)

library(snowfall)

f1<- function(a,list){
  f2<-function(b,num){ return(abs(num-b))}

  l1<-sfLapply(list, f2, num=a)
  l1<-sum(unlist(l1))
  return(l1)
}

sfInit(parallel=TRUE,cpus=4)
l2<-(sfLapply(x, f1, list=x))
sfStop()
l2 
```

当我运行最后四行时，它给出了一个错误：

```
l2<-(sfLapply(x, f1, list=x))
Error in checkForRemoteErrors(val) : 
  4 nodes produced errors; first error: could not find function "sfLapply" 
```

当我使用 lapply 切换到顺序处理时，它运行良好。

```
> l2<-(lapply(x, f1, list=x))
> l2
[[1]]
[1] 10

[[2]]
[1] 7

[[3]]
[1] 6

[[4]]
[1] 7

[[5]]
[1] 10 
```

为什么 sfLapply 会抛出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:57:27.577

您需要`snowfall`在集群节点上加载包。所以插入

```
sfLibrary(snowfall) 
```

之后`sfInit()`。

* * *

**编辑：**澄清：

您的函数`f1`包含在包`sfLapply`中找到的函数。`snowfall`当您使用`sfInit`上述方法初始化集群时，会在集群的`snow`每个节点上加载包，而不是`snowfall`包。`sfLapply`如果没有后者，则节点上不会调用任何对象（函数或其他） ，并且您会收到错误消息。

# jsf - 如何在提交前设置 JSF 输入字段值

> ID：13876203
> 
> 赞同：1
> 
> 时间：2012-12-14T09:49:33.387
> 
> 标签：jsf, jsf-2, primefaces

我有一个带有 PrimeFaces 的 JSF 页面和一些输入字段。在提交完成之前，我想使用字段的值作为方法的输入，该方法执行一些计算并使用结果更新另一个字段但不提交表单。

这是将用作我的方法输入的字段：

```
<h:outputLabel for="hiredate" value="#{msgs['addUser.hireDate']}" />
                                <p:calendar id="hiredate" value="#{userWizardMB.user.hireDate}" required="true" immediate="true"/>
                                <p:message for="hiredate" /> 
```

计算是通过单击 a 完成的`<p:commandButton>`：

```
<p:commandButton value="Calculate days" icon="ui-icon-circle-check" action="#{userWizardMB.calculateVacationDays}" update="vacationDays" process="@this" immediate="true"/> 
```

这就是所谓的方法：

```
public void calculateVacationDays() {
        user.setVacationDays((int) vacationDaysCalculator
                .calculateWithHireDate(user.getHireDate()));
} 
```

但是，在调试时，即使我在表单中设置了值，我也看到该字段为 NULL。

我如何强制设置此字段 - user.hireDate 因为我真的需要这个值来进行计算？

谢谢

**编辑：**我删除了表单中的所有其他字段和立即属性：

```
<h:form id="addUserForm">
    <p:wizard widgetVar="wizard" flowListener="#{userWizardMB.onFlowProcess}">
                <!-- TAB FOR PERSONAL DATA -->
                    <p:tab id="personal" title="#{msgs['addUser.personalTab']}">
                        <p:panel header="#{msgs['addUser.personalInformation']}">
                            <p:message for="vacationDays" showDetail="true" autoUpdate="true" closable="true"/>
                            <h:panelGrid columns="3" columnClasses="label, value" styleClass="grid">

                                <h:outputLabel for="hiredate" value="#{msgs['addUser.hireDate']}" />
                                <p:calendar id="hiredate" value="#{userWizardMB.user.hireDate}" required="true" />
                                <p:message for="hiredate" />

                                <h:outputLabel for="vacationDays" value="#{msgs['addUser.vacationDays']}"/>
                                <p:inputText id="vacationDays" value="#{userWizardMB.user.vacationDays}"/>
                                <p:commandButton value="Calculate days" icon="ui-icon-circle-check" action="#{userWizardMB.calculateVacationDays}"  process="@this hiredate" update="vacationDays"/>
                </h:panelGrid>
            </p:panel>
        </p:tab>
    </p:wizard>
</h:form> 
```

并且仍然没有调用 backing bean 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:50:22.180

`immediate="true"`从输入和命令组件中删除。`immediate`除非您*真正*了解它的用途，否则请勿使用。`update`此外，您还需要在命令组件的属性中包含您要处理的输入组件。请注意，这应该代表客户端 ID，而不是您的评论之一中提到的属性名称。

```
<p:calendar id="hiredate" value="#{userWizardMB.user.hireDate}" required="true" />
...
<p:commandButton value="Calculate days" icon="ui-icon-circle-check" 
    action="#{userWizardMB.calculateVacationDays}" 
    process="@this hiredate" update="vacationDays" /> 
```

### 也可以看看：

*   [为什么将“立即”属性添加到 EditableValueHolders？](https://stackoverflow.com/questions/13071512/why-was-immediate-property-added-to-the-editablevalueholders/13072172#13072172)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:53:03.050

使用`process="@form"`（或`process="[the id of the calendar component]"`在`commandButton`

`process="@this"`意味着只有与 commandButton 相关的模型部分（通常没有）被更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T00:06:08.627

老问题，但是您是否添加`partialSubmit="true"`了 commandButton 标签？至少在 PrimeFaces 3.5 中，false 是此属性的默认值（请参阅 PrimeFaces PDF 文档）。

# post - Framework 4.5 post-get方法或webrequest

> ID：13876204
> 
> 赞同：1
> 
> 时间：2012-12-14T09:49:41.897
> 
> 标签：post, get, .net-4.5, webrequest

嘿，我正在尝试将字符串发布到某个 ip，我在 Visual Studio 10（框架 4.0）上做到了

但我现在不能这样做。我正在开发一个商店应用程序，它需要后获取一些数据，我从[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)获得了示例但是它也不起作用..（微软说这个例子是框架 4.5）..这里是例子，你们能帮帮我吗？我在互联网上找不到关于此主题的有用示例..

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestPostExample
    {
        public static void Main ()
        {
            // Create a request using a URL that can receive a post. 
            WebRequest request = WebRequest.Create ("http://www.contoso.com/PostAccepter.aspx ");
            // Set the Method property of the request to POST.
            request.Method = "POST";
            // Create POST data and convert it to a byte array.
            string postData = "This is a test that posts this string to a Web server.";
            byte[] byteArray = Encoding.UTF8.GetBytes (postData);
            // Set the ContentType property of the WebRequest.
            request.ContentType = "application/x-www-form-urlencoded";
            // Set the ContentLength property of the WebRequest.
            request.ContentLength = byteArray.Length;
            // Get the request stream.
            Stream dataStream = request.GetRequestStream ();
            // Write the data to the request stream.
            dataStream.Write (byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close ();
            // Get the response.
            WebResponse response = request.GetResponse ();
            // Display the status.
            Console.WriteLine (((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream ();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader (dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd ();
            // Display the content.
            Console.WriteLine (responseFromServer);
            // Clean up the streams.
            reader.Close ();
            dataStream.Close ();
            response.Close ();
        }
    }
} 
```

# javascript - asp:RadioButton 和 javascript 函数 $find()

> ID：13876205
> 
> 赞同：4
> 
> 时间：2012-12-14T09:49:42.797
> 
> 标签：javascript, asp.net

```
<asp:RadioButton ID="myButton" Text="Option" GroupName="group" runat="server" /> 
```

为什么在这种情况下 javascript 函数调用`$find('<%= myButton.ClientID %>')`return `null`？我需要检测/更改客户端 javascript 中的值。`$find()`应该是`Sys.Application.findComponent()`.

更新：ID 没有问题，我在 chrome 控制台中尝试了 $find() 并使用真实渲染的 id 并且仍然为空。我想获得 Ajax 控件，而不是 DOM 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:52:39.630

如果您没有多个实例，则需要将 clientIdMode 设置为 static：

```
<asp:RadioButton ClientIDMode="static" ID="myButton" Text="Option" GroupName="group" runat="server" /> 
```

或者

您需要使用 ClientID 来访问找到您的按钮。但是脚本必须在同一页面上。

```
var radioButton = $('#<%= myButton.ClientID %>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:51:55.890

您可以`directly`通过其 id 评估元素，并且确实`not`需要使用`find`，您只需要`id`选择器，因为 id 对于 html 元素是唯一的。

```
$(function(){
    var myButton = $('#<%= myButton.ClientID %>');
    alert(myButton.id);

    //with javascript
    myButton = document.getElementById('#<%= myButton.ClientID %>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:52:19.180

当您尝试获取组件时，您确定您的 DOM 已准备好？

尝试这样的事情：

```
window.onload = function() {
    alert( $find('myButton') );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:55:11.600

[$find()](http://msdn.microsoft.com/en-us/library/bb397441.aspx)尝试从其行为 ID 中查找 ASP.NET AJAX 组件。

由于您正在寻找一个 DOM 元素，而不是一个组件，您应该使用[$get()](http://msdn.microsoft.com/en-us/library/bb397717.aspx)代替：

```
var yourButton = $get("<%= myButton.ClientID %>"); 
```

# google-visualization - Google 可视化 API 在 IE9 中不起作用

> ID：13876206
> 
> 赞同：1
> 
> 时间：2012-12-14T09:49:44.183
> 
> 标签：google-visualization

我正在尝试使用 Google Visualization API 生成饼图。我的实现适用于除 IE 9 之外的所有浏览器。

不确定是否有任何解决方法。当我尝试在 IE 9 中打开页面时，它会显示一个安装 Google chrome 框架的弹出窗口。但即使安装了镀铬框架，这也不起作用。

我什至试过[谷歌代码游乐场](http://code.google.com/apis/ajax/playground/#pie_chart)，在 IE 9 中也有同样的问题。所以，我确认自己这与 IE 9 有关。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:11:04.153

我终于发现问题是 - 我安装 ie 时没有启用 Chrome 框架插件；默认情况下，此插件未启用。

我们需要手动启用它（安装后，当您重新启动浏览器时，IE 会显示一个弹出窗口，显示插件已准备就绪，带有两个按钮启用和不启用）。

我给你插件对话框的截图（你可以从工具 -> 管理插件进入下面的屏幕）

![在此处输入图像描述](../Images/d8458a8b5dc252da3cfc6c78cb8868e3.png)

启用后，请确保重新启动浏览器并刷新正在使用可视化框架的页面。

不幸的是，最终用户必须安装它才能在 IE 9 中完成这项工作，这确实是一种糟糕的用户体验。

# java - 在 Selenium 中超时的 MessageBox

> ID：13876209
> 
> 赞同：0
> 
> 时间：2012-12-14T09:49:45.030
> 
> 标签：java, javascript, browser, selenium

在用 selenium 编写了一些自动化测试之后，我想要一个消息框告诉测试人员启动了哪个测试。

重要的是，在显示消息框时不得运行测试。当显示消息框时，它们应该被暂停。

我是用 JavaScript 做的

```
Object result = ((JavascriptExecutor)TestRunner.driver).executeScript("alert('" + text + "');"); 
```

现在我希望这个消息框显示几秒钟。我试过了：

```
TestRunner.driver.manage().wait(10); 
```

和

```
Selenium selenium = new WebDriverBackedSelenium(TestRunner.driver,    TestRunner.driver.getCurrentUrl());
selenium.start();
selenium.getConfirmation(); 
```

和

```
WebDriverWait waitForOkay = new WebDriverWait(TestRunner.driver, 10);
waitForOkay.wait(10); 
```

但是警报总是立即消失，就像有一些

```
alert.accept(); 
```

有没有办法让消息框点击“确定”或超时（例如 10 秒）不阻止自动化测试？

非常欢迎任何输入（如实现该目标的其他方法）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:59:42.137

在这种情况下不需要等待条件，因为默认情况下 JavaScript 警告框...会阻止执行，直到您单击“确定”按钮。

我尝试使用示例代码（C# 片段）并且它正在工作。

```
IWebDriver driver = new InternetExplorerDriver();
driver.Navigate().GoToUrl("http://www.google.com");
IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
driver.Manage().Timeouts().SetScriptTimeout(TimeSpan.FromSeconds(4));
Console.WriteLine("Entering the Sync Call");
js.ExecuteScript("alert('"+ Error+"');");
Console.WriteLine("Exiting the Sync Call"); 
```

我希望这会有所帮助......一切顺利:-)

# sql - 无论while循环的范围如何，是否可以对一个事务进行多次提交

> ID：13876210
> 
> 赞同：8
> 
> 时间：2012-12-14T09:49:45.420
> 
> 标签：sql, sql-server

下面是一个 SQL Server 存储过程。事务开始时有两个提交，如下所示。这是否有效（开始在 while 循环中，第一次提交在同一个 while 循环中，但第二次提交在第二次 while 循环中）？如果不是，那么解决方案可能是什么？

请帮忙。

```
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'DELETE_COBOC_DATA')
DROP PROCEDURE DELETE_COBOC_DATA
GO

CREATE PROCEDURE DELETE_COBOC_DATA @ORGDN VARCHAR(100), @CHUNK VARCHAR(10) 
AS
BEGIN
    -- some code that executes before while           
    WHILE (@NUM_ROWS_TMPTRADMIN > 0) 
    BEGIN               

        BEGIN TRANSACTION
            -- executes some code
        COMMIT TRANSACTION                              
    END
    -- some more code
    WHILE @NUM_ROWS_TMPDIR > 0
    BEGIN
        -- code code code
        COMMIT TRANSACTION
        -- code code code
    END
    -- some more code here as well
END 
```

据我所知，这在 MySQL 中是允许的

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T09:55:27.633

您不能两次提交相同的事务。您可以有嵌套事务，但不能有“部分”提交，这与事务的概念相矛盾（它是全有或全无）。如果两个提交都执行了，第二个会抛出错误

```
The COMMIT TRANSACTION request has no corresponding BEGIN TRANSACTION 
```

# android - 如何从sqlite android中删除数千条记录

> ID：13876212
> 
> 赞同：4
> 
> 时间：2012-12-14T09:49:58.023
> 
> 标签：android, sqlite

我在 SQLite 表中有超过 5000-6000 条记录。当我删除所有记录时，它需要很长时间并导致屏幕暂停并开始释放资源。

我用 AsyncTask 尝试过，但仍然是同样的问题。所以谁能告诉我应该如何在不阻止应用程序的情况下删除这数千条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:00:13.383

如果要删除表中的所有记录，可以尝试删除表：

[http://www.sqlite.org/lang_droptable.html](http://www.sqlite.org/lang_droptable.html)

然后重新创建一个空表：

[http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:21:07.103

我不是 Sqlite 专家，但总的来说有 3 种方法可以做到这一点。

1.  正如每个人都评论说，如果您要删除所有记录，请截断。
2.  如果您要处理大多数记录，您可以将非删除文件存储在[tempTable](http://www.sqlite.org/tempfiles.html#tempdb)中，然后截断您的实际表，最后将所有记录从 tempTable 插入到实际表中
3.  这是我大部分时间使用的。在您的情况下使用 Top XXX 删除语句，您可以在每 2 分钟内删除 200 条记录。（我假设您不会在 2 分钟内插入超过 200 条记录）。AsyncTask 就是这种方法的方式。在 T-SQL 中，我使用以下 sql 由您决定

    从 UserId 所在的 tUser 中删除（从 LastLoggin< GetDate()-120 的 tUser 中选择前 200 个 UserId）

# c++ - 在访问冲突时创建转储文件

> ID：13876222
> 
> 赞同：2
> 
> 时间：2012-12-14T09:50:23.067
> 
> 标签：c++, .net, c, debugging

我想在发生无法处理的访问冲突时创建进程转储文件。

目前，我已经注册了我的未处理异常回调：

```
SetUnhandledExceptionFilter(CustomUnhandledExceptionFilter); 
```

CustomUnhandledExceptionFilter 创建转储文件并打印调用堆栈。

但是这种方法有一个缺陷 - 它是在 AV 已经发生时完成的，AV 异常被抛出并且没有被它发生的线程处理。当异常即将离开线程范围并在此时创建的转储时调用未处理的异常回调由于堆栈指针丢失，没有发生异常的函数的局部变量。

有没有办法克服这个问题？我想看看在 AV 发生时获得 AV 的线程堆栈。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T15:40:45.803

VS

```
#include "stdafx.h"
#include <windows.h>
#include <dbghelp.h>

LONG WINAPI MyUnhandledExceptionFilter(EXCEPTION_POINTERS *ExceptionInfo)
{
    HANDLE hFile = CreateFile(
                L"proc.dmp",
                GENERIC_READ | GENERIC_WRITE,
                FILE_SHARE_DELETE | FILE_SHARE_READ | FILE_SHARE_WRITE,
                NULL,
                CREATE_ALWAYS,
                FILE_ATTRIBUTE_NORMAL,
                NULL
            );
    MINIDUMP_EXCEPTION_INFORMATION mei;
    mei.ThreadId = GetCurrentThreadId();
    mei.ClientPointers = TRUE;
    mei.ExceptionPointers = ExceptionInfo;
    MiniDumpWriteDump(
        GetCurrentProcess(), 
        GetCurrentProcessId(), 
        hFile, 
        MiniDumpNormal,
        &mei,
        NULL,
        NULL);

    return EXCEPTION_EXECUTE_HANDLER;
}
int _tmain(int argc, _TCHAR* argv[])
{
    SetUnhandledExceptionFilter(MyUnhandledExceptionFilter);
    int* p = NULL;
    *p = 1;
    return 0;
} 
```

数据库

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 X86
Copyright (c) Microsoft Corporation. All rights reserved.

Loading Dump File [D:\Documents\Visual Studio 2012\Projects\Test\Debug\proc.dmp]
User Mini Dump File: Only registers, stack and portions of memory are available

Symbol search path is: SRV*C:\Symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows 7 Version 7600 UP Free x86 compatible
Product: WinNt, suite: SingleUserTS
Machine Name:
Debug session time: Sat Dec 15 19:29:31.000 2012 (UTC + 4:00)
System Uptime: not available
Process Uptime: not available
......................
This dump file has an exception of interest stored in it.
The stored exception information can be accessed via .ecxr.
(8d8.1084): Access violation - code c0000005 (first/second chance not available)
eax=fffffffd ebx=005d0d78 ecx=0022f070 edx=778964f4 esi=005d0d38 edi=0022f110
eip=778964f4 esp=0022edd0 ebp=0022ede0 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!KiFastSystemCallRet:
778964f4 c3              ret
0:000> .ecxr
eax=00000000 ebx=7ffdf000 ecx=0022fa30 edx=778964f4 esi=0022fcf4 edi=0022fdcc
eip=0124157c esp=0022fcf4 ebp=0022fdcc iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010246
*** WARNING: Unable to verify checksum for dump.exe
dump!wmain+0x3c:
0124157c c70001000000    mov     dword ptr [eax],1    ds:0023:00000000=????????
0:000> dv
           argc = 0n1
           argv = 0x00280e38
           p = 0x00000000
0:000> kb
  *** Stack trace for last set context - .thread/.cxr resets it
ChildEBP RetAddr  Args to Child              
0022fdcc 01241b19 00000001 00280e38 0027f9c8 dump!wmain+0x3c [d:\documents\visual studio 2012\projects\test\dump\dump.cpp @ 35]
0022fe1c 01241d0d 0022fe30 76051194 7ffdf000 dump!__tmainCRTStartup+0x199 [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 533]
0022fe24 76051194 7ffdf000 0022fe70 778ab495 dump!wmainCRTStartup+0xd [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 377]
0022fe30 778ab495 7ffdf000 7676831a 00000000 kernel32!BaseThreadInitThunk+0xe
0022fe70 778ab468 0124107d 7ffdf000 00000000 ntdll!__RtlUserThreadStart+0x70
0022fe88 00000000 0124107d 7ffdf000 00000000 ntdll!_RtlUserThreadStart+0x1b
0:000> u .
dump!wmain+0x3c [d:\documents\visual studio 2012\projects\test\dump\dump.cpp @ 35]:
0124157c c70001000000    mov     dword ptr [eax],1
01241582 33c0            xor     eax,eax
01241584 5f              pop     edi
01241585 5e              pop     esi
01241586 5b              pop     ebx
01241587 81c4cc000000    add     esp,0CCh
0124158d 3bec            cmp     ebp,esp
0124158f e8c0fbffff      call    dump!ILT+335(__RTC_CheckEsp) (01241154)
0:000> !analyze -v
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

GetPageUrlData failed, server returned HTTP status 404
URL requested: http://watson.microsoft.com/StageOne/dump_exe/0_0_0_0/50cc9743/dump_exe/0_0_0_0/50cc9743/c0000005/0001157c.htm?Retriage=1

FAULTING_IP: 
dump!wmain+3c [d:\documents\visual studio 2012\projects\test\dump\dump.cpp @ 35]
0124157c c70001000000    mov     dword ptr [eax],1

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0124157c (dump!wmain+0x0000003c)
   ExceptionCode: c0000005 (Access violation)
  ExceptionFlags: 00000000
NumberParameters: 2
   Parameter[0]: 00000001
   Parameter[1]: 00000000
Attempt to write to address 00000000

DEFAULT_BUCKET_ID:  NULL_POINTER_WRITE

PROCESS_NAME:  dump.exe

ERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

EXCEPTION_PARAMETER1:  00000001

EXCEPTION_PARAMETER2:  00000000

WRITE_ADDRESS:  00000000 

FOLLOWUP_IP: 
dump!wmain+3c [d:\documents\visual studio 2012\projects\test\dump\dump.cpp @ 35]
0124157c c70001000000    mov     dword ptr [eax],1

MOD_LIST: <ANALYSIS/>

FAULTING_THREAD:  00001084

PRIMARY_PROBLEM_CLASS:  NULL_POINTER_WRITE

BUGCHECK_STR:  APPLICATION_FAULT_NULL_POINTER_WRITE

LAST_CONTROL_TRANSFER:  from 01241b19 to 0124157c

STACK_TEXT:  
0022fdcc 01241b19 00000001 00280e38 0027f9c8 dump!wmain+0x3c [d:\documents\visual studio 2012\projects\test\dump\dump.cpp @ 35]
0022fe1c 01241d0d 0022fe30 76051194 7ffdf000 dump!__tmainCRTStartup+0x199 [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 533]
0022fe24 76051194 7ffdf000 0022fe70 778ab495 dump!wmainCRTStartup+0xd [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 377]
0022fe30 778ab495 7ffdf000 7676831a 00000000 kernel32!BaseThreadInitThunk+0xe
0022fe70 778ab468 0124107d 7ffdf000 00000000 ntdll!__RtlUserThreadStart+0x70
0022fe88 00000000 0124107d 7ffdf000 00000000 ntdll!_RtlUserThreadStart+0x1b

STACK_COMMAND:  ~0s; .ecxr ; kb

FAULTING_SOURCE_CODE:  
    31: int _tmain(int argc, _TCHAR* argv[])
    32: {
    33:     SetUnhandledExceptionFilter(MyUnhandledExceptionFilter);
    34:     int* p = NULL;
>   35:     *p = 1;
    36:     return 0;
    37: }
    38: 

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  dump!wmain+3c

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: dump

IMAGE_NAME:  dump.exe

DEBUG_FLR_IMAGE_TIMESTAMP:  50cc9743

FAILURE_BUCKET_ID:  NULL_POINTER_WRITE_c0000005_dump.exe!wmain

BUCKET_ID:  APPLICATION_FAULT_NULL_POINTER_WRITE_dump!wmain+3c

WATSON_STAGEONE_URL:  http://watson.microsoft.com/StageOne/dump_exe/0_0_0_0/50cc9743/dump_exe/0_0_0_0/50cc9743/c0000005/0001157c.htm?Retriage=1

Followup: MachineOwner
--------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:36:06.720

尝试使用 AddVectoredExceptionHandler。异常时刻的线程上下文作为参数传递给此方法的回调过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:48:45.947

为了保持异常上下文完整，您可以从外部进程创建小型转储，该进程使用`DebugActiveProcess`API 调试感兴趣的进程并接收异常事件作为调试的一部分。在被调试者发布之前创建小型转储，`ContinueDebugEvent`保留调用堆栈和异常上下文。

# c++ - 删除 boost::shared_ptr 的内容

> ID：13876227
> 
> 赞同：2
> 
> 时间：2012-12-14T09:50:28.830
> 
> 标签：c++, shared-ptr

我对`boost::shared_ptr`.

我在析构函数中看到了这一点（*ptr*是 boost::shared_ptr） `ptr = boost::shared_ptr< int >( new int )`：。

那样可以么？。不应该`ptr.reset()`像这里所说的那样：[如何故意删除 boost::shared_ptr？](https://stackoverflow.com/questions/621233/how-to-intentionally-delete-a-boostshared-ptr)

干杯！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:35:28.720

这取决于您以后想对 ptr 做什么。

如果您需要重新分配它以指向一个新值，那么这就是代码所做的。如果您需要明确地使其无效，那么就是这样`reset()`做的。如果它是一个将被析构函数隐式销毁的类成员，那么可能不需要做任何事情，除非你有一些奇怪的销毁顺序要求。

没有更多的上下文，就不可能说哪个是正确的。

**更新：**由于您说这实际上不是在析构函数中，而是旨在使对象处于奇怪的半破坏状态的成员函数，因此这取决于如何指定该奇怪的状态。如果它需要一个空指针，则重置它；如果它需要一个有效的指针，但不需要指向以前共享的任何内容，则重新分配它。更好的是，完全消除这种状态，为对象提供更强的有效性保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:38:09.073

`ptr = boost::shared_ptr< int >( new int )``boost::shared_ptr`将通过调用构造函数...在他的析构函数中将内部值与您不想使用的新 int 交换。

`ptr.reset()`将用任何内容交换内部值，最好如您链接的帖子中所述

# sql - 如何防止对国际象棋游戏的多个同时 SQL 更新

> ID：13876231
> 
> 赞同：1
> 
> 时间：2012-12-14T09:50:43.110
> 
> 标签：sql, database, postgresql, chess

假设我有一个存储在 SQL 数据库中的国际象棋游戏，其架构类似于以下架构：

```
CREATE TABLE chessgames(
    game_id INTEGER,
    move_id INTEGER,
    move char(4)
}; 
```

因此，如果正在进行的游戏（game_id 为 0）具有 e4 e5 的移动，那么该表将具有元组 (0, 1, "e4") 和 (0, 2, "e5")。

现在假设客户端试图通过同时发送 move d4 和 Nf3 来破坏数据库。试图处理两个移动并有效地尝试插入元组 (0, 3, "d4") 和 (0, 3, "Nf3")，两者都具有相同的 move_id，从而破坏了 move_id 的唯一性。

确保唯一性的最佳惯用方式是什么？我想到的一种可能性是让我的 C++ 代码包含一个互斥锁列表，每个游戏一个互斥锁。当 d4 这样的移动到达时，C++ 代码为相应游戏锁定互斥锁，运行以下 SQL 查询

```
SELECT move_id, move FROM chessgames WHERE game_id = 0 
```

为了获取游戏的所有动作（在我给出的示例中，这将是 e4 和 e5），C++ 代码采用这些动作并检查是否没有行已经具有 move_id = 3，然后执行这些动作以构建当前位置所以它可以检查移动 d4 是否有效。如果有效，则运行

```
INSERT INTO chessgames VALUES (0, 3, "d4") 
```

将移动存储在数据库中，然后释放互斥锁。

这样，如果 Nf3 移动与它的 d4 移动处理同时到达，它将被锁定的互斥锁阻塞，当最终处理 Nf3 时，它将看到 move_id = 3 的行已经存在，它将被忽略。

有没有更好的方法来做到这一点？我的数据库模式对于我正在尝试做的事情是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:56:56.047

首先，您应该在 game_id 和 move_id 列上创建一个唯一索引。这样，您可以确保每个游戏在数据库级别上的 move_id 唯一性。

```
CREATE UNIQUE INDEX U_game_move
ON chessgames
(game_id, move_id); 
```

然后，互斥锁方法很好，但您也可以考虑创建一个触发器来处理 move_id 递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T03:39:42.620

我了解到我需要的是乐观锁定，就像这个 [问题](https://stackoverflow.com/questions/320096/django-how-can-i-protect-against-concurrent-modification-of-database-entries)的答案一样。

# c# - 鼠标悬停时如何禁用WPF tabItem Background

> ID：13876232
> 
> 赞同：1
> 
> 时间：2012-12-14T09:50:44.743
> 
> 标签：c#, wpf, background, mouseevent, tabitem

我已经将`Background`和 的`Border`设置`TabItem`为`Transparent`。但是，当我的鼠标悬停在 上时`TabItem`，`Background`的`TabItem`会变成灰色。`Background`有没有人在将鼠标悬停在 tabitems 时如何禁用？[我在这里](https://stackoverflow.com/questions/3265140/wpf-tabitem-background-color-changes-when-tabitem-selected-or-hover-over)找到了一个链接，但它对我不起作用。

鼠标悬停前的图片：

![在此处输入图像描述](../Images/113cca83fb1b697fa6852e49285aa5b7.png)

鼠标悬停后的图像：

![在此处输入图像描述](../Images/34fbed973188c24539054e633235b682.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:32:12.397

您可以通过自定义样式来完全控制控件的外观。如果你有 Expression blend，它会更容易。这是一个非常好的[教程](http://www.switchonthecode.com/tutorials/the-wpf-tab-control-inside-and-out)

# thrift - 使用 Thrift 发送二进制数据的最佳方式

> ID：13876233
> 
> 赞同：12
> 
> 时间：2012-12-14T09:50:49.443
> 
> 标签：thrift

我在 c++ 中有一个结构，它存储这样的字节：

```
struct RemoteData 
{
    /// some other fields here

    unsigned char* buf;
    int bufLen;     
}; 
```

我需要通过 Thrift 将这些数据发送到用 C++ 编写的远程服务。我找到了三种将这种结构映射到 thrift idl 的方法：

1.  使用这样的容器类型：

    ```
    struct RemoteData 
    {
        1: list<BYTE> buf,
        ...
    } 
    ```

2.  使用`binary`类型：

    ```
    struct RemoteData 
    {
        1: binary buf,
        ...
    } 
    ```

3.  以类型存储数据`string`：

    ```
    struct RemoteData 
    {
        1: string buf,
        ...
    } 
    ```

什么是最好的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T22:23:26.247

thrift`string`类型中包含的值必须是 UTF8 编码的，否则某些客户端将无法读取它（例如 Java thrift 客户端）。

Thrift`list<byte>`类型在 c++ 中会被转换成`std::vector<int8_t>`，但在其他语言中它会不太好（例如，在 java 中它会被编译成 suboptimal `List<Byte>`.

就与其他语言客户端的互操作性和协议定义的正确性而言，该`binary`类型是最佳选择。

由于所有 3 个定义产生的消息大小大致相同，我会选择`binary`：即使您现在不需要与其他语言的互操作性，将来也可能需要它。

# html - 画布弧度太像素化

> ID：13876234
> 
> 赞同：8
> 
> 时间：2012-12-14T09:50:53.293
> 
> 标签：html, canvas, geometry

我尝试在画布上画一个圆圈，我以前做过，但这次我发现它非常像素化

```
var game;

function game (){

    this.canvas = document.getElementById('canvas');

    this.ctx = this.canvas.getContext('2d');

    this.initCanvas = function(){

    }

    this.draw1 = function(){
        this.ctx.beginPath();
        this.ctx.arc(50, 75, 10, 0, Math.PI*2, true); 
        this.ctx.closePath();
        this.ctx.fill();
    }

    this.draw2 = function(){
        this.ctx.beginPath();
        this.ctx.arc(100,75,10,0,Math.PI*2,true);
        this.ctx.closePath();
        this.ctx.stroke();
    }

    this.run = function(){
        this.initCanvas();
        this.draw1();
        this.draw2();
    }

    window.onresize = function() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
    };
}

game = new game(); 
```

[http://jsfiddle.net/RG6dn/6/](http://jsfiddle.net/RG6dn/6/)

我不知道这是由于浏览器（我在 chrome 和 firefox 上有同样的东西）还是我的电脑

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-02T13:50:22.047

您可能正在使用 CSS 设置画布的宽度。在 CSS 中更改画布元素的宽度会拉伸画布内的像素

例如。

`<canvas style='width:400px;height:400px'></canvas>`

相反，您需要使用画布元素本身的宽度和高度属性来定义画布包含多少像素。

正确方法：

`<canvas width='400px' height='400px'><canvas>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-18T17:39:02.743

这篇文章不是最近的，但它帮助我解决了我的问题，但答案中有错误。当我们初始化画布的高度和宽度时，我们没有传递一个以“px”为单位的字符串，而只是一个带有数字的字符串。像这样 ：

```
<canvas width='400' height='400'><canvas> 
```

Ajouve ：在您的代码中，您犯了一个错误，在更正错误后它可以工作

```
 var game;

 function game (){

 this.initCanvas = function(){
     this.canvas = document.getElementById('canvas');
     this.ctx = this.canvas.getContext('2d');   
 }

 this.draw1 = function(){
     this.ctx.beginPath();
     this.ctx.arc(50, 75, 10, 0, Math.PI*2, true); 
     this.ctx.closePath();
     this.ctx.fill();
 }

 this.draw2 = function(){
     this.ctx.beginPath();
     this.ctx.arc(100,75,10,0,Math.PI*2,true);
     this.ctx.closePath();
     this.ctx.stroke();
 }
    // Here define your fonction for resizing canvas
     this.resize = function() {
     this.canvas.width = window.innerWidth;
     this.canvas.height = window.innerHeight;
 };

 this.run = function(){
     this.initCanvas();
     // Call your function here
     this.resize();
     this.draw1();
     this.draw2();
 }

}

   game = new game();

   game.run(); 
```

# parameters - 在 jasperreport 服务器中创建的输入控件是否独立？

> ID：13876240
> 
> 赞同：1
> 
> 时间：2012-12-14T09:51:07.970
> 
> 标签：parameters, jasper-reports, ireport, jasperserver

我正在使用 Ireport 4.8.0 创建报告，我将报告编译成 jrxml 和 jasper 文件，并在 zuckerreport 上使用这些文件显示报告。到目前为止，我创建了许多报告，即使使用字符串参数，也一切正常。

当我要求创建一个组合框（输入控件）参数时，我被告知这也只能使用 Jasperreport 服务器创建。不仅是报告。

我的问题是：如果我在 Ireport 中使用使用 jasperreport 服务器创建的输入控件创建报告并编译报告，那么报告文件（jrxml 和 jasper）是否独立？我的意思是，如果将来我会尝试在没有安装 jasperserver 的情况下在 zuckerreport 中运行报告，那么报告是否仍然有效？报告文件是否包括他们需要在没有 jasperreport 服务器的情况下工作的所有内容，包括我创建的输入控制参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:17:21.930

很难说他们是独立的。我想它们是相关的。它与 java 的工作方式非常相似。您拥有`*.java`和`*.class`文件，其中`class`文件是从`java`文件派生的。

因此，这些`*.jrxml`文件只是一个文本文档，其中包含报告的实际设计，以更人性化的方式。为了运行报告，JasperReports 需要`JRXML`文件的编译版本。这些`*.jasper`文件是编译后的版本，然后用于在运行时执行报告。

JasperServer 不是必需的。这取决于你想要做什么。从技术上讲，这些报告包含需要编译和执行的所有信息。就像我对您之前的问题的评论一样，您可以在执行报告时获取报告所需的任何参数的值并将它们传递给 JasperReports。JasperServer 只是达到此目的的一种手段，并为此提供了一个更加用户友好的 GUI 前端。

在不知道您打算如何让最终用户使用/访问您的报告的情况下，很难给出更多指导。但在几乎所有情况下，您都需要创建一个屏幕，提示用户在报告中输入所需的参数值并将它们传递给引擎。

现在说你想要这一切都是动态的。用最简单的术语来说是可能的。如果参数本质上是自由形式的字段（用户只需键入他们想要的任何内容），您可以使用 JasperReports API 来获取参数及其类型。然后创建适当的输入字段。当您想将参数的可能值限制为某个列表时，这显然会崩溃。生成此值列表所需的信息不是`JRXML`or`Jasper`文件的一部分。

# sql - 如何选择存储在 varchar 列中的最低版本（即 xxxx）？

> ID：13876241
> 
> 赞同：1
> 
> 时间：2012-12-14T09:51:10.830
> 
> 标签：sql, sql-server-2008, version

我已经尝试了明显的`select min(version) from t`方法，但这不起作用，因为引擎认为（并且正确地）字符串'1.12.0.0'小于'1.2.0.0'，这显然不是版本号的情况.

我知道我可以轻松地动态拆分 4 个数字（使用计算列或视图），然后我可以使用`select top 1 row from myview order by a asc, b asc, c asc, d asc`

...但我很想知道是否有更简单的方法来实现这一目标

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:09:52.257

如果您的版本号最多包含 4 个以点分隔的数字，则可以滥用该[`parsename`](http://msdn.microsoft.com/en-us/library/ms188006.aspx)功能：

```
select  top 1 *
from    Versions
order by
        cast(parsename(Version, 4) as int)
,       cast(parsename(Version, 3) as int)
,       cast(parsename(Version, 2) as int)
,       cast(parsename(Version, 1) as int) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/41bef/14/0)

# jquery - 将“更多字段”按钮添加到 Drupal 网络表单中的文件上传表单字段

> ID：13876243
> 
> 赞同：0
> 
> 时间：2012-12-14T09:51:27.493
> 
> 标签：jquery, drupal

我设法添加字段以在 Drupal 网络表单中提交附件。

现在我只需要重新设置它们的样式，每次收费只允许上传一次，外加一个“添加更多按钮”。我需要将 1 重新设置为 2。也许一个 jquery 解决方案就足够了。

这怎么能轻松实现？![在此处输入图像描述](../Images/d2a63b17c319e61e348f42f8664f23fb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:50:18.070

我没有尝试**[Webform 添加更多](http://drupal.org/project/webform_addmore)**模块。但我会向你推荐这个模块。我希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:16:02.260

我首先以编程方式添加了 5 个字段，然后使用下面的脚本隐藏了前 4 个字段。

```
 /*Multiupload*/
        first = $('.webform-client-form').find('div[id$="-ajax-wrapper"]').first();
        first.after('<a id="addmore" href=#>'+Drupal.t("[+] Add more upload fields")+'</a>');
        $('.webform-client-form').find('div[id$="-ajax-wrapper"]').each(function(){
            $(this).hide();
            first.show();
        });

        var c = 0;
        $('#addmore').bind('click', function(e) {
            var item = $('#edit-submitted-file'+ c +'-ajax-wrapper');

            item.show();
            ++c;
             if (c == 4) {
                $('#addmore').hide();
                return false;
            }
        }); 
```

# windows-8 - Windows 8 - 选项如何保存 ListBox 项目，以便当我再次关闭并打开应用程序时项目仍然存在？

> ID：13876246
> 
> 赞同：0
> 
> 时间：2012-12-14T09:51:43.367
> 
> 标签：windows-8, listbox, storage

假设我有一个 ListBox：

```
ListBox myListBox = new ListBox();
myListBox.Items.Add("One");
myListBox.Items.Add("Two");
myListBox.Items.Add("Three"); 
```

我需要将这些项目保存在项目中的某个位置，以便摆脱它的唯一方法是卸载应用程序，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:34:03.357

如果您已按所示添加项目，则必须首先迭代列表框以获取项目以持久保存它们。更好的选择是将项目存储在数组/对象/其他任何地方，并使用该数组/对象/任何东西来持久化列表并填充列表视图。

然后，挂钩到应用程序暂停事件。在这种情况下，您可以根据您的需要将数组/对象/任何内容保存到本地存储或云中。然后，如果持久数据可用，您将检查应用程序恢复/启动，如果可用则恢复它。

一些有用的链接： [Application.Suspending 事件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.suspending.aspx)

[应用程序暂停和恢复指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465088.aspx)

[第 2 部分：管理应用程序生命周期和状态](http://msdn.microsoft.com/en-us/library/windows/apps/Hh986968.aspx)

# python - Python：用字典替换命名组

> ID：13876256
> 
> 赞同：1
> 
> 时间：2012-12-14T09:52:12.360
> 
> 标签：python, regex, replace, python-2.7

如何替换`\s+`为单个空格、全部`;`为`,`、全部`a.m`为`AM`、全部`x`为`y` 我是命名组替换的新手，如何使用单个 RegEx 和单个 sub() 调用将字符集替换为替换字符集。

如果我可以将所有替换字符串保存在一个 dict 中并且有一个 RegEx 字符串，这可能是一种聪明的方式。

```
Eg: M-Th    5:30 am-10 pm; F    5:30 a.m-10:30 p.m, Sa 10:30-10:30, Su 10:30-10 x y z x
Output: M-Th 5:30 AM-10 PM, F 5:30 AM - 10:30 PM, Sa 10:30 - 10:30, Su 10:30-10 y y z y 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:00:51.547

尝试这个，

```
 mydict = {"\s+":" ", ";":",", "a.m":"AM","x":"y"}
 mystr = "M-Th    5:30 am-10 pm; F    5:30 a.m-10:30 p.m, Sa 10:30-10:30, Su 10:30-10 x y z x"

 for k, v in mydict.iteritems():
    mystr = mystr.replace(k, v)

 print mystr 
```

**输出**

```
M-Th    5:30 am-10 pm, F    5:30 AM-10:30 p.m, Sa 10:30-10:30, Su 10:30-10 y y z y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:00:35.133

考虑 ：-

```
import re
def sub(matchobj):
    if matchobj.group(0) == ';':
        return ':'
    elif matchobj.group(0) == 'a.m.':
        return 'AM'
    elif re.match('\\s+$', matchobj.group(0)):
        return ' '

print re.sub(';|\\s+|a.m.', sub, '10; a.m.          ;') 
```

样品运行：-

```
C:\>python st.py
10:AM 
```

或者也许（从 Ammar 借用我喜欢简洁的解决方案:) :-

```
import re
mydict = {"\s+":" ", ";":",", "a.m":"AM","x":"y"}

def sub(matchobj):
    for k, v in mydict.iteritems():
        if re.match('%s$' % k, matchobj.group(0)):
            return v

print re.sub('|'.join(mydict.keys()), sub, 'M-Th    5:30 am-10 pm; F    5:30 a.m-10:30 p.m, Sa 10:30-10:30, Su 10:30-10 x y z x') 
```

哪个也有效：-

```
C:\>python st.py
M-Th 5:30 am-10 pm, F 5:30 AM-10:30 p.m, Sa 10:30-10:30, Su 10:30-10 y y 
```

# iphone - touchesMoved 超出了我的视野范围

> ID：13876271
> 
> 赞同：1
> 
> 时间：2012-12-14T09:53:01.723
> 
> 标签：iphone, objective-c, ios, cocoa-touch, touchesmoved

我已经将 UIView 子类化了，最初我的视图将采用默认颜色，我需要在触摸时填充一些不同的颜色（从 x 轴 = 0 到用户触摸点），这里的问题是 touchesMoved 即使我拖出我自己查看边界它正在获得这些点，如何将其限制为仅用于我的自身查看边界。

我用谷歌搜索并尝试了下面的片段，但没有运气

```
if([self pointInside:point withEvent:nil]){
    [self fillColor];
} 
```

我的**touchesMoved**方法如下，

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
        UITouch *touch = [touches anyObject];
        CGPoint point = [touch locationInView:self];
        endPoint = point;
        NSLog(@"moved x: %f,y: %f",point.x,point.y);
        if(CGRectContainsPoint([self frame], endPoint)){ // this also not working
            [self fillColor];
        }
    } 
```

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:56:51.787

在您的 touchesMoved 方法 中，`CGPoint point = [touch locationInView:self];` 通过您希望在其中进行触摸的视图来复制 self。

self 将获得完整的视图，您应该在那里传递您的 drawingView，以便它仅检测该视图上的触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:03:31.260

只需在方法中设置标签`viewDidLoad:`并使用以下逻辑..

```
fillColorView.tag = 111; 
```

并在如下方法中使用波纹管逻辑`touchesMoved:`..

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{  
    UITouch *tap = [touches anyObject];
    CGPoint pointToMove = [tap locationInView:fillColorView];
     if([tap.view isKindOfClass:[UIView class]]) 
    {
        UIView *tempView=(UIView *) tap.view;
        if (tempView.tag == 111){
              [self fillColor];
        }
    }
} 
```

希望这可以帮助你...

# c# - SerialPort 在关闭后触发 DataReceived 事件

> ID：13876274
> 
> 赞同：0
> 
> 时间：2012-12-14T09:53:06.310
> 
> 标签：c#, .net, serial-port

我在尝试停止 SerialPort 时遇到了一种奇怪的行为：取消订阅和调用后 DataReceived 事件继续触发`close`！（见`StopStreaming`下面的代码）。结果，在我的事件处理程序代码中，我得到了一个 InvalidOperationException 消息“端口已关闭”。

我错过了什么？关闭端口和停止事件的正确方法是什么？

编辑：每次运行代码时都会出现此错误。因此，这不是随机发生的竞争条件，而是表明代码完全损坏的系统问题！但是，我看不到如何...

```
private SerialPort comPort = new SerialPort();

public override void StartStreaming()
{
  comPort.Open();
  comPort.DiscardInBuffer();
  comPort.DataReceived += comPort_DataReceived;
}

public override void StopStreaming()
{
  comPort.DataReceived -= comPort_DataReceived;
  comPort.Close();
  isStreaming = false;
}

private void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
  if (e.EventType == SerialData.Chars)
  {
    SerialPort port = (SerialPort)sender;
    int N = comPort.BytesToRead;
    for (; N > 0; N--)
    {
      byte b = Convert.ToByte(comPort.ReadByte());
      //... process b
    }
  }
} 
```

编辑：按照建议，我将`StopStreaming`代码更改为：

```
public override void StopStreaming()
{
  comPort.DataReceived -= comPort_DataReceived;
  Thread.Sleep(1000);
  comPort.DiscardInBuffer();
  Thread.Sleep(1000);
  comPort.Close();
  isStreaming = false;
} 
```

它现在似乎有效，但我并不那么高兴。我希望有一种更有效的方法来删除回调，而不是在程序中插入睡眠时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:59:29.593

您的 DataReceived 事件处理程序在线程池线程上调用。是的，他们有在不可预测的时间运行代码的尴尬习惯，这不是即时的。因此，如果设备正在主动发送数据，它可以与您的 Close() 调用竞争并*在*您关闭它后运行，这是相当不可避免的。取消订阅并不能解决问题，线程池线程已经获得了它的目标方法。

请意识到您正在做什么来触发此问题，您在设备发送数据*时正在关闭端口。*这不是很好，它肯定会导致数据丢失。但在调试代码时并非不可能发生，因为您实际上并不关心数据。

一个对策是关闭握手，这样设备就不能再发送任何东西了。丢弃输入缓冲区。然后休眠一会儿，一两秒，以确保所有运行中的线程池线程都已完成运行。然后关闭端口。一个非常实用的方法是根本不关闭端口，当您的进程终止时，Windows 会处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:25:12.553

看起来像多线程问题。

`SerialPort.DataReceived`在线程池的工作线程中引发。您正在关闭线程的端口，这与`SerialPort.DataReceived`引发的线程不同。

你可以处理`InvalidOperationException`或编写一些同步代码来解决这个问题。

**更新。**

问题是，如果您的设备密集发送数据，则会将`SerialPort`越来越多的工作项排队到线程池中。即使您的代码会在之前的任何时间休眠`Close`，也可能是不够的。不幸的是，`SerialPort`有一个丑陋的实现。它没有一个选项，可以告诉“请停止向我发送垃圾邮件”。

因此，具体的解决方案取决于设备的协议和握手参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:36:48.627

我一直在处理的应用程序中遇到了同样的问题。在这里阅读有关线程池如何实现它的信息令人兴奋。

不过，在我追查它的来源之前，我发现将 DataReceived 事件处理程序的内容包含在为`try` `catch`预期问题而编写的语句中是一种非常有效的解决方法。现在我知道如果我需要/想要在接收数据的同时关闭 SerialPort，我真的无法采取任何措施来防止该问题，我对这种方法非常满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-05T14:15:05.017

当用户尝试退出应用程序而它仍在从连接的设备接收数据时，我遇到了类似的问题。应用程序在调用 Me.Close() 后抛出 System.IO.IOException。

我发现的最简单的解决方案是在 _FormClosing 事件处理程序中将 SerialPort ReceivedBytesThreshold 设置为一个大数字。这会降低 DataReceived 事件的频率，并为 Close() 调用提供时间，以便在 DataReceived 事件处理程序处于非活动状态时完成。

# zend-framework - Zend Framework 的 bootstrap.php 中找不到类“Application_Plugin_CheckAuthentication”

> ID：13876278
> 
> 赞同：0
> 
> 时间：2012-12-14T09:53:15.467
> 
> 标签：zend-framework, plugins

我在 zend 框架中创建了一个插件，并在 bootstrap.php 中注册了这个插件。但我的页面显示错误

在 bootstrap.php 文件中找不到类“Application_Plugin_CheckAuthentication”。

我的插件注册码如下：

```
 function _initViewHelpers() { 
$frontController = Zend_Controller_Front::getInstance();
$frontController->registerPlugin(new Application_Plugin_CheckAuthentication());
} 
```

我认为这没有占用插件文件夹。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:14:10.270

实际文件在哪里？

如果文件位于`/application/plugins`或者可能`/application/modules/mymodule/plugins`autolaoder 应该找到它并自动加载它，因为它`/plugins`是**Plugin**的[自动加载资源](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader-resource.html)。

 **如果您的文件在其他任何地方，您将需要注册路径：

```
//in the application.ini
pluginPaths.Application_Plugin = APPLICATION_PATH "/../library/Application/Plugin"

//in the bootstrap, or anywhere else really.
//there may be other syntax available...
$loader = new Zend_Loader_PluginLoader();
$loader->addPrefixPath($prefix, $path); 
```

一旦自动加载器知道在哪里看，一切都应该工作。**

# iphone - 从标签栏控制器导航到主根控制器

> ID：13876284
> 
> 赞同：0
> 
> 时间：2012-12-14T09:53:58.603
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller

![过程](../Images/4486a6475f23dd5a0e102f8d372694e0.png)

我在 iPhone 应用程序中使用故事板、导航控制器。然后将其导航到我使用过 Tabbar 控制器的另一个视图。然后在 Tabbar 控制器中，我有 3 个选项卡，每个选项卡都有各自的导航控制器。

现在，在完成过程之后。但是当我导航到 Root 时，它会在 Tabbar 控制器内部使用自己的导航控制器返回。

实际上，我想回到应用程序启动的应用程序的主导航控制器。

> **基本流程::主窗口->导航控制器->标签栏控制器->导航控制器->按钮..**
> 
> **因此，通过单击 Button -> Back to Main Window... 回到主根视图的任何想法。**

但是对于无法将我返回到应用程序根目录的导航控制器，我遇到了这个问题。

任何人都可以解决这个问题吗？请尽快告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:09:34.083

不是您正在寻找的答案，而是 FWIW：

您应该避免将标签栏控制器隐藏在其他控制器中，以便标签栏控制器出现和消失。这不是它们的用途。它们应该是 UI 的主要部分，如果我看到一个标签栏控制器，我希望它位于 UI 的核心，控制对 UI 主要部分的访问，并且几乎一直可见如果不是所有的时间。

不要相信我的话，听听[苹果](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)：

> 外观和行为
> 
> 标签栏出现在屏幕的底部边缘，应该可以从应用程序中的每个位置访问。选项卡栏在选项卡中显示图标和文本，它们的宽度都相同，并且默认显示黑色背景。当用户选择一个选项卡时，该选项卡会显示较浅的背景（称为选择指示器图像），并且其图标会发出蓝光。

如果您的应用因忽略人机界面准则而从应用商店退回，请不要感到非常惊讶！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:57:46.407

这是解决::

```
[self.parentViewController.navigationController popToRootViewControllerAnimated:YES]; 
```

享受编码..!!

# c# - 如何将整数从标签传递给 button_Click

> ID：13876285
> 
> 赞同：-2
> 
> 时间：2012-12-14T09:54:00.293
> 
> 标签：c#, visual-studio-2010

如何将整数从标签传递给 button_Click

```
private void button2_Click(int rc, object sender, EventArgs e)
{

}

private void label10_Click(object sender, EventArgs e)
{

int rack=11

button2_Click(rack);

} 
```

如何转移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:20:22.670

我真的不知道您要做什么，但是如果您想在where is ，is和is`button2_Click(int rc, object sender, EventArgs e)`下使用，您可以调用，因为在下无法访问`label10_Click``rc``rack``sender``sender``e``e``rc``button2_Click``rack``rack``button2_Click`

**例子**

```
private void button2_Click(int rc, object sender, EventArgs e)
{
    //DoSomething with rc
    //MessageBox.Show(rc.ToString());    
}

private void label10_Click(object sender, EventArgs e)
{
    int rack = 11;
    button2_Click(rack, sender, e);
} 
```

但是，`rack`如果您想在`rack`不使用构造函数的情况下获取值，建议公开声明`rack`

**例子**

```
int rack = 0; //Initialize rack as an int of value 0
private void button2_Click(object sender, EventArgs e)
{    
    //MessageBox.Show(rack.ToString());    
}

private void label10_Click(object sender, EventArgs e)
{
    rack = 11; //Set rack to 11
    button2_Click(sender, e); //Call button2_Click
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:56:07.853

从技术上讲，您可以执行以下操作：

```
button2_Click(rack, sender, e); 
```

但这对我来说似乎不太合乎逻辑。如果你想模拟`button2`点击，你也可以传递`button2`而不是`sender`第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T09:56:41.037

实际上你不需要传递值，你可以在任何地方通过使用访问标签的文本`label19.Text`

# android - 如何模拟主页、返回、菜单、搜索、任务和音量按钮？

> ID：13876288
> 
> 赞同：5
> 
> 时间：2012-12-14T09:54:08.543
> 
> 标签：android, android-homebutton

我想模拟我们 Android 设备的所有物理按钮。

那么有没有办法模拟：

*   返回键
*   主页按钮
*   菜单按钮
*   搜索按钮
*   任务按钮
*   音量（+ 和 -）按钮

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T09:56:48.700

创建一个 KeyEvent 并发布它。

```
KeyEvent kdown = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK);
Activity.dispatchKeyEvent(kdown);
KeyEvent kup = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_BACK);
Activity.dispatchKeyEvent(kup); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-01T15:59:58.653

即使您的应用程序已关闭，您也可以模拟按下按钮，但您需要 Accessibility 权限：

创建从以下扩展的服务`AccessibilityService`：

```
class ExampleAccessService:AccessibilityService() {
    override fun onInterrupt() {
    }

    override fun onAccessibilityEvent(event: AccessibilityEvent?) {
    }

    fun doAction(){
        performGlobalAction(GLOBAL_ACTION_RECENTS)
//        performGlobalAction(GLOBAL_ACTION_BACK)
//        performGlobalAction(GLOBAL_ACTION_HOME)
//        performGlobalAction(GLOBAL_ACTION_NOTIFICATIONS)
//        performGlobalAction(GLOBAL_ACTION_POWER_DIALOG)
//        performGlobalAction(GLOBAL_ACTION_QUICK_SETTINGS)
//        performGlobalAction(GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN)
    }
} 
```

*`doAction()`在您想采取行动的地方打电话*

添加到`Manifest`：

```
<application
...
    <service
        android:name=".ExampleAccessService"
        android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"
        android:label="Name of servise" // it will be viewed in Settings->Accessibility->Services
        android:enabled="true"
        android:exported="false" >
        <intent-filter>
            <action android:name="android.accessibilityservice.AccessibilityService"/>
        </intent-filter>
        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibility_service_config"/>
    </service>
...
</application> 
```

**可访问性_service_config.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<accessibility-service xmlns:android="http://schemas.android.com/apk/res/android"
    android:accessibilityEventTypes="typeAllMask"
    android:accessibilityFeedbackType="feedbackAllMask"
    android:accessibilityFlags="flagDefault"
    android:canRetrieveWindowContent="false"
    android:description="your description"
    android:notificationTimeout="100"
    android:packageNames="your app package, ex: ex: com.example.android"
    android:settingsActivity="your settings activity ex: com.example.android.MainActivity" /> 
```

有关更多信息，请查看[https://developer.android.com/guide/topics/ui/accessibility/services.html](https://developer.android.com/guide/topics/ui/accessibility/service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:17:32.520

模拟以下键：

-BACK BUTTON：覆盖当前活动中的 onBackPressed()。

-MENU BUTTON : 你应该看看[这里](https://stackoverflow.com/questions/2777098/android-openoptionsmenu-doesnt-work-in-oncreate)还有 openOptionsMenu(), [menu](http://developer.android.com/guide/topics/ui/menus.html)

你也应该看看[这个](http://thecodeartist.blogspot.in/2011/03/simulating-keyevents-on-android-device.html)博客。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:58:41.923

如果您测试应用程序的特定组件，例如，`Activity`您可以使用`InstrumentationTestCase`'[`sendKeys()`](http://developer.android.com/reference/android/test/InstrumentationTestCase.html#sendKeys%28java.lang.String%29)方法，将任意键组合传递给那里。你也可以[`TouchUtils`](http://developer.android.com/reference/android/test/TouchUtils.html)用来模拟点击、拖动和点击动作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-13T02:14:34.137

尝试使用 android dispatchKeyEvent 覆盖方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-14T10:07:47.340

用于`onKeyListener`覆盖设备中的物理按钮。请参阅[文档](http://developer.android.com/reference/android/view/View.OnKeyListener.html)。

[KeyEvent](http://developer.android.com/reference/android/view/KeyEvent.html)类具有设备上物理按钮和屏幕键盘的所有值。例如[`KeyEvent.KEYCODE_HOME`](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME)替代设备中的主页按钮。

谷歌一下，你可以找到很多`KEYCODE`事件的例子

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-14T10:16:55.157

试试这个你的活动

```
public boolean onKeyDown(int keyCode, KeyEvent event)   
{
 if (keyCode == KeyEvent.KEYCODE_BACK)
 {

 }
 if (keyCode == KeyEvent.KEYCODE_HOME)
 {

 }
 if (keyCode == KeyEvent.KEYCODE_MENU)
 {

 }
 if (keyCode == KeyEvent.KEYCODE_VOLUME_UP)
 {

 }
 if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)
 {

 }
} 
```

# asp.net - 从两个不同的 ASPX 页面调用 ASPX

> ID：13876292
> 
> 赞同：0
> 
> 时间：2012-12-14T09:54:31.570
> 
> 标签：asp.net, vb.net

我有三个 ASPX 页面。从另外两个页面调用的 ASPX 页面是我可以上传文件的页面。

我使用 JavaScript 从其他两个页面调用该上传页面：

```
 function UploadFax_Click() {
             var grid = ISGetObject("WebGrid1");
             var curSelObj = grid.GetSelectedObject(); // get selected object
             var row = curSelObj.GetRowObject(); // get the WebGridRow object
             if (row.Type == "Record") {
                 var s_id = row.KeyValue
            }
            window.location = '../Admin/UploadFax.aspx?suppid=' + s_id;
         } 
```

然后在上传页面上我得到 QueryString：

```
 If Not IsPostBack And Len(Request.QueryString("suppid")) > 0 Then
        If Not Request.QueryString("suppid") Is Nothing Then
            Session("suppid") = Request.QueryString("suppid")
        End If
    End If 
```

我需要的是，如果我从两个页面之一调用上传页面，则上传页面的功能应该受到限制。例如：如果我调用 Upload-Page 那么 Checkbox.Disabled = true 并从另一个页面启用 Checkbox。

我的想法是从该页面发送第二个参数，然后使用 Request.QueryString 获取参数，然后使用 if/else 启用或禁用该复选框。

问题是，是否有另一种更好的可能性来做我想要的？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:05:23.533

您可以检查`Request.UrlReferrer`并从中跳舞：

```
Dim restrictedAccess As Boolean = Not IsNothing(Request.UrlReferrer) AndAlso
        Request.UrlReferrer.AbsolutePath.IndexOf("/Original.aspx", StringComparison.InvariantCultureIgnoreCase) >= 0

Checkbox.Disabled = Not restrictedAccess 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:11:23.443

使用`QueryString`可能会导致安全违规，为什么不使用`Session`参数，

当你从第一页调用它然后设置

```
Session("IsCalled")="1" 
```

在第二页加载检查

```
IF Not Session("IsCalled") Is Nothing AndAlso Session("IsCalled")="1" Then
   CheckBox1.Enabled=False
End If 
```

和 Vise Versa 在第一页加载。

# c - 链表C中的无限while循环

> ID：13876293
> 
> 赞同：0
> 
> 时间：2012-12-14T09:54:35.313
> 
> 标签：c, pointers, while-loop, structure

我遇到了一个问题，我想将项目添加到链表的末尾，但似乎我在这里陷入了无限循环。

```
void addCheckPoint(struct checkPoints **checkPoint) {
    struct checkPoints *checkPt = *checkPoint;

    while (checkPt->next != NULL) {
        checkPt->next;
        if (checkPt->next == NULL) {
            scanf("%c %d %d %d %d", &checkPt->dropOut, &checkPt->currentPoint, &checkPt->competitor, &checkPt->hour, &checkPt->minute);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:56:54.427

您永远不会更新`checkPt`循环中的值。换行

```
checkPt->next; 
```

到

```
checkPt = checkPt->next; 
```

解决这个问题。

请注意，该功能可能存在更多问题。尽管它的名字，它实际上并没有在列表中添加任何东西。它改为编辑尾部项目的内容。如果这不是故意的，您将需要 malloc 一个新元素，然后将其添加到尾部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:57:51.727

```
void addCheckPoint(struct checkPoints **checkPoint) {
    struct checkPoints *checkPt = *checkPoint;

    while (checkPt != NULL) {
        if (checkPt->next == NULL) {
            scanf("%c %d %d %d %d", checkPt->dropOut, checkPt->currentPoint, checkPt->competitor, checkPt->hour, checkPt->minute);
        }
        checkPt = checkPt->next;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:58:50.510

试试这个

```
 void addCheckPoint(struct checkPoints **checkPoint) {
        struct checkPoints *checkPt = *checkPoint;

        while (checkPt->next != NULL) {
             checkPt=checkPt->next;
            if (checkPt == NULL) {
                scanf("%c %d %d %d %d", &checkPt->dropOut, &checkPt->currentPoint, &checkPt->competitor, &checkPt->hour, &checkPt->minute);
            }

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:22:20.977

```
#include <stdlib.h>
#include <stdio.h>

struct checkPoints
{
    char dropOut;
    int currentPoint;
    int competitor;
    int hour;
    int minute;

  struct checkPoints *next;
};

void addCheckPoint(struct checkPoints **checkPoint) {
    while (*checkPoint)
        checkPoint = &(*checkPoint)->next;

    /* FIXME: check malloc() return value */
    *checkPoint = malloc(sizeof (struct checkPoints));
    (*checkPoint)->next = 0;

    /* NOTE: the leading space in front of the %c */
    scanf(" %c %d %d %d %d",
          &(*checkPoint)->dropOut,
          &(*checkPoint)->currentPoint,
          &(*checkPoint)->competitor,
          &(*checkPoint)->hour,
          &(*checkPoint)->minute);
}

struct checkPoints *list = 0;

int
main ()
{
    addCheckPoint (&list);
    addCheckPoint (&list);
} 
```

# playframework-2.0 - 如何强制 Ebean 进行左连接，而不是连接？

> ID：13876294
> 
> 赞同：4
> 
> 时间：2012-12-14T09:54:36.173
> 
> 标签：playframework-2.0, ebean

使用 PlayFramework，我使用 Ebean 进行查询，其中 OneToMany 为空，但 Ebean 生成一个简单的“JOIN”查询，不返回任何行。如果在 MySQL 中将其更改为“LEFT JOIN”，它可以工作，但我不知道如何通过 Ebean 来完成。

这是代码：

```
List<User> list = User.find().isNull("documents.type").findList(); 
```

这是生成的 SQL：

```
select {columns} from users t0 join user_documents t1 on t1.user_id = t0.id  
where t1.type is null
order by t0.lastname, t0.firstname 
```

这不返回任何条目。但是如果我通过添加 LEFT JOIN 手动更改此查询，我会得到结果（正确）。

如何强制 Ebean 进行 LEFT JOIN 而不是简单的 JOIN ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:54:36.050

你可以尝试类似（未经测试）

```
User.find().fetch("documents.type").findList(); 
```

# excel - Run-time error '1004' when using macro to change pivot field.. but only with some values

> ID：13876295
> 
> 赞同：2
> 
> 时间：2012-12-14T09:54:38.900
> 
> 标签：excel, vba, pivot

I'm using a code to change one pivot field of just one pivot according to the value of a cell (the cell contain text, is not a reference to another cell). The strangest thing is that it works for almost all the values I have but not with all of them...

The code is the following:

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Not Application.Intersect(Target, Sheets("Sheet2").Range("D1")) Is Nothing Then
Sheets("Sheet2").PivotTables("PivotTable1").PivotFields("Field1"). _
ClearAllFilters
Sheets("Sheet2").PivotTables("PivotTable1").PivotFields("Field1").CurrentPage _
= Sheets("Sheet2").Range("D1").Value
End If
End Sub 
```

the debug says the problem is the following line

```
Sheets("Sheet2").PivotTables("PivotTable1").PivotFields("Field1").CurrentPage _=      Sheets("Sheet2").Range("D1").Value 
```

and the error says : " Run-time error '1004' Application-defined or object-defined error".

Can someone please help me? Thank you very much!

p.s. the value of the cell containing the text that is used to change the pivot field is changed by another macro that takes the value from a pivot so the value are existing and the format is the same for all the values so I can't figure out what is the problem...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:03:34.530

Not exactly an expert, but after some research I'd suggest you try out this code:

> ```
> Private Sub Worksheet_Change(ByVal Target As Range)
> Dim pt As PivotTable
> 
> If Not Intersect(Target(1, 1), Range("D1")) Is Nothing Then
>     Set pt = Me.PivotTables(1)
>     With pt
>         .RefreshTable
>         .PivotFields("Field1").CurrentPage = Range("D1").Text
>     End With
> End If
> End Sub 
> ```

It probably slows down the process a bit!

# c# - 创建自定义部分 Umbraco 4.11

> ID：13876296
> 
> 赞同：1
> 
> 时间：2012-12-14T09:54:40.837
> 
> 标签：c#, asp.net-mvc, umbraco

我最近升级到了最新的 Umbraco 4.11.1，创建自定义部分的旧方法似乎不再适用。这不是一件坏事，因为这并没有真正奏效。但是，我似乎根本找不到任何有关如何在较新版本中创建的信息。

我发现[了这篇博文](http://blog.mattbrailsford.com/2012/07/18/creating-custom-applications-and-trees-in-umbraco-4-8/)：

> 从这里开始，应用程序和应用程序树的条目现在已移动到位于 config 文件夹中的配置文件中。不出所料，它们被命名为applications.config 和trees.config。

但是我什至没有**applications.config**和**trees.config**。

我找不到有关此的任何其他信息。

谢谢你，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:30:23.033

因为您升级了站点，所以您可能没有从 config 文件夹中复制任何文件。我建议从您为升级下载的 zip 文件中复制 applications.config 和 trees.config。

# python - 如何在路径字符串中找到特殊字符以及它们出现了多少次

> ID：13876299
> 
> 赞同：0
> 
> 时间：2012-12-14T09:54:48.840
> 
> 标签：python, string, find

```
pathString="E:\new folder\Study\Batch\test_project_nuke\test_render\testImg_###.jpeg" 
```

我试图首先分离扩展名，发现存在 \t converts string \t tab 。

我也试过这种方式

```
numberOfSplChar=pathString.rfind("#") - pathString.find("#")
print numberOfSplChar 
```

发现少了1个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:57:41.940

如果要计算字符串中“#”的数量，请使用[str.count](http://docs.python.org/2/library/stdtypes.html#str.count)方法：

```
pathString=r"E:\new folder\Study\Batch\test_project_nuke\test_render\testImg_###.jpeg"
pathString.count("#")
>>> 3 
```

如果您需要查找文件的扩展名，请使用[os.path.splitext](http://docs.python.org/2/library/os.path.html?highlight=splitext#os.path.splitext)方法：

```
pathString=r"E:\new folder\Study\Batch\test_project_nuke\test_render\testImg_###.jpeg"
path, extension = os.path.splitext(pathString)
print path
>>> 'E:\\new folder\\Study\\Batch\\test_project_nuke\\test_render\\testImg_###'
print extension
>>> '.jpeg' 
```

PS：在字符串中`r`使用时使用 (aw string) 修饰符`\`。在您的示例中， E:\new" 可能已翻译为：

```
"""E:
ew""" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:12:33.693

> ```
> pathString="E:\new folder\Study\Batch\test_project_nuke\test_render\testImg_###.jpeg" 
> ```
> 
> 我试图首先分离扩展名，发现存在 \t converts string \t tab 。

这是一个问题：`"\t"`字符串文字中的 a 表示一个制表符。您应该将其写入`\\t`或放入原始字符串 ( `r"\t"`)。

> 我也试过这种方式
> 
> ```
> numberOfSplChar=pathString.rfind("#") - pathString.find("#")
> print numberOfSplChar 
> ```
> 
> 发现少了1个..

当然。让我们使用这个更简单的字符串：

```
pathString = "a###b". 
```

`rfind()`给出 3，lfind 给出 1。区别在于从第一个到最后一个的距离，比数字小一。所以只需加1。

但要注意字符串，例如`'a###b###c###d###e'`- 它们应该如何处理？

# java - Java 反射 - 传入 ArrayList 作为要调用的方法的参数

> ID：13876300
> 
> 赞同：4
> 
> 时间：2012-12-14T09:54:56.653
> 
> 标签：java, reflection

想将 arraylist 类型的参数传递给我要调用的方法。

我遇到了一些语法错误，所以我想知道这有什么问题。

场景一：

```
// i have a class called AW
class AW{}

// i would like to pass it an ArrayList of AW to a method I am invoking
// But i can AW is not a variable
Method onLoaded = SomeClass.class.getMethod("someMethod",  ArrayList<AW>.class );
Method onLoaded = SomeClass.class.getMethod("someMethod",  new Class[]{ArrayList<AnswerWrapper>.class}  ); 
```

场景2（不一样，但类似）：

```
// I am passing it as a variable to GSON, same syntax error
ArrayList<AW> answers = gson.fromJson(json.toString(), ArrayList<AW>.class); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:21:50.120

`AW`您的（主要）错误是在`getMethod()`参数中传递了不必要的泛型类型。我试图编写一个与您的类似但有效的简单代码。希望它可以以某种方式回答（某些）您的问题：

```
import java.util.ArrayList;
import java.lang.reflect.Method;

public class ReflectionTest {

  public static void main(String[] args) {
    try {
      Method onLoaded = SomeClass.class.getMethod("someMethod",  ArrayList.class );
      Method onLoaded2 = SomeClass.class.getMethod("someMethod",  new Class[]{ArrayList.class}  );    

      SomeClass someClass = new SomeClass();
      ArrayList<AW> list = new ArrayList<AW>();
      list.add(new AW());
      list.add(new AW());
      onLoaded.invoke(someClass, list); // List size : 2

      list.add(new AW());
      onLoaded2.invoke(someClass, list); // List size : 3

    } catch (Exception ex) {
      ex.printStackTrace();
    }
  }

}

class AW{}

class SomeClass{

  public void someMethod(ArrayList<AW> list) {
    int size = (list != null) ? list.size() : 0;  
    System.out.println("List size : " + size);
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:10:23.287

类文字没有以这种方式参数化，但幸运的是您根本不需要它。由于擦除，只有一种方法具有 ArrayList 作为参数（您不能重载泛型），因此您可以使用 ArrayList.class 并获得正确的方法。

对于 GSON，他们引入了一个[`TypeToken`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/reflect/TypeToken.html)类来处理类文字不表达泛型这一事实。

# java - 如何在java中的客户端套接字程序中知道客户端端口和IP地址

> ID：13876303
> 
> 赞同：0
> 
> 时间：2012-12-14T09:55:23.787
> 
> 标签：java, sockets, network-programming, client-server

我使用套接字在 java 中创建了多个客户端-服务器通信。我有一个服务器和一个客户端。我想用多个客户端测试我的程序。我计划创建一个动态创建 ip 和端口的模拟器。为此我只想知道如何在套接字程序中设置客户端 ip 和端口。任何人都可以帮助我.. 我使用 InetAddress.getByName 来获取客户端地址。

```
 public Socket(Proxy proxy)
  {
     if (proxy != null && proxy.type() == Proxy.Type.SOCKS) 
   { 
    SecurityManager security = System.getSecurityManager();
         InetSocketAddress epoint = (InetSocketAddress) proxy.address();
         if (security != null) {
             if (epoint.isUnresolved())
                epoint = new InetSocketAddress(epoint.getHostName(), epoint.getPort());
            if (epoint.isUnresolved())
                security.checkConnect(epoint.getHostName(),
                                      epoint.getPort());
            else
                security.checkConnect(epoint.getAddress().getHostAddress(),
                                      epoint.getPort());
        }
         impl = new SocksSocketImpl(proxy);
        impl.setSocket(this);
    } else {
        if (proxy == Proxy.NO_PROXY) {
            if (factory == null) {
                impl = new PlainSocketImpl();
                impl.setSocket(this);
             } else
                setImpl();
        } else
            throw new IllegalArgumentException("Invalid Proxy");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:08:33.523

试试这个

```
clientString = "Remote client: " + socket.getRemoteSocketAddress().toString().substring(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:14:40.043

简单的。要创建客户端 IP 和端口，您应该在主程序中传递如下参数。

试试这样

```
 java Client localhost 1112 //To run

           (ip: localhost
           port: 1112)

            // Code for main

                 public static void main(String[] args)

            {

          try

             {

                    ipAdd=args[0];

                    portNo=Integer.parseInt(args[1]);

                    Client s=new Client();  

             }

           catch (Exception e)

                {

                        System.out.println(e);
                }

} 
```

# python - Spyder - UMD 已删除：模块

> ID：13876306
> 
> 赞同：22
> 
> 时间：2012-12-14T09:55:31.567
> 
> 标签：python, graphics, spyder, pythonxy

我现在已经用 python 鬼混了大约一个月，有些事情困扰着我。我使用简洁的 Spyder IDE 附带的 python(x,y) 工具包。我的问题涉及 Spyder 的 UMD（用户模块删除器）。

我在互联网上找到[了这个](http://mcsp.wartburg.edu/zelle/python/graphics/graphics/index.html) 图形模块，它可以帮助人们在 python 脚本中做一些简单的图形工作（据我所知）。

这不像我被卡住了，但是当我执行以下代码时：

```
import pylab as p
import graphics as g

window = g.GraphWin("tryout", 600, 600)
window.close()
print p.sqrt(4) 
```

输出是：

```
>>>runfile(r'C:\some\folders\tryout.py', wdir=r'C:\some\folders')
>>>UMD has deleted: graphics
>>>2.0 
```

第 1 行显然没问题，第 3 行也是如此，但我没有得到第 2 行。此外，被激怒的窗口在屏幕上闪烁，应该如此。第 2 行似乎没有造成任何伤害，我可以完美地重新运行文件多次，但我想知道它来自哪里。

AFAIK UMD 强制解释器在每次运行脚本时重新加载模块。显示的消息是否意味着“它”已经删除了对模块的引用，因为它不再使用，或者是别的什么？或者这是否意味着有问题，我以后应该添加更多代码会“伤害”我的代码吗？

注意：第一个问题，所以请评论它的废话，以帮助我提高我的提问技巧。

**编辑：**我尝试在测试线周围移动`print p.sqrt(4)`，发现我把它放在哪里并不重要。如果它是导入模块后的第一行，它仍然会在显示 sqrt(4) 之前引发消息

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-15T15:51:38.310

**简短的回答：**

也许*删除*不是您提到的消息中最好的词。它应该被*重新加载*，这正是 UMD 真正在做的事情，因为它不那么令人困惑。我将在我们的问题跟踪器中为此填写一个问题。

**长答案：**

UMD 不仅会重新加载您的脚本，还会重新加载它所依赖的所有本地模块。*本地*是指 Python 安装之外的模块，并且您拥有写入权限。

这个想法是在你的脚本旁边，也许你已经开发了一个辅助函数库来配合它。因此，您很可能也想重新加载该库，以便在运行时反映对它的任何更改。

我知道这不是你的情况，所以如果你想删除该消息，你可以去：

*工具*>*首选项*>*控制台*>*高级设置*>*用户模块删除器*

并停用该选项

*显示重新加载的模块列表*

# c++ - 如何不擦除迭代器（来自“Effective STL”）

> ID：13876309
> 
> 赞同：0
> 
> 时间：2012-12-14T09:55:40.693
> 
> 标签：c++, containers

我一直在阅读有效的stl。我被困在这里：

```
assoccontainer<int> c
for(container<int>::iterator i=c.begin();i!=c.end();++i)
  if(badvalue(*i))
    c.erase(i); 
```

给定的代码有什么问题？我不明白那里的解释。

我还有其他问题：

1.  一个是什么`assoccontainer`意思？我找不到任何相关的文章。
2.  是`badvalue`某种关键字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:01:22.810

> assoccontainer 是什么意思？

它表示某种关联容器，例如`std::set`. 请注意，它以斜体字打印，这意味着它不是真正的代码，而是实际容器类型的占位符。

> 'badvalue' 是某种关键字吗？

不，它是由程序定义的一个函数，用于确定是否应该从容器中删除一个值。它在上一页中介绍过，其中说“让我们消除以下谓词为其返回 true 的每个对象”。

> 给定的代码有什么问题

这在本书的代码示例之后立即进行了解释。`erase(i)`使迭代器无效——这意味着你不能再用它做任何事情——所以`++i`立即这样做会产生未定义的行为。相反，您需要使用稍后在同一页面上的代码：

```
for (AssocContainer<int>::iterator i = c.begin(); i != c.end(); /* nothing */) {
    if (badValue(*i)) c.erase(i++);
    else ++i;
} 
```

在擦除和使其旧值无效`i` *之前*递增。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:06:51.343

`assoccontainer`并且`badvalue`与主要问题无关。只是假装`assoccontainer`是一些容器，并且`badvalue`是一些返回布尔值的函数。主要问题是在用于删除元素后使用迭代器。之后`erase`迭代器无效，不能再使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:11:37.860

assoccontainer 相当于字典或哈希图，尽管作者（Scott Meyers？）可能在一般意义上使用它。AFAIK，STL 中没有该名称的容器；用 std::map 替换它。我想这应该可以解决问题。

您将在此处找到有关它的更多信息： [http](http://en.wikipedia.org/wiki/Associative_containers_(C%2B%2B) ://en.wikipedia.org/wiki/Associative_containers_(C%2B%2B )

它有一个计算字符串出现次数的简洁示例。

很可能 Scott Meyers 的意思是 badvalue() 是一个用户定义的函数，用于确定使用迭代器取消引用的值是否有效。

HTH。

# c# - 市场测试失败 PhoneApplicationService

> ID：13876316
> 
> 赞同：0
> 
> 时间：2012-12-14T09:55:54.067
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我正在尝试将我的应用程序传递给 Microsoft 市场，但是我的后台代理中有 3 个错误，我不明白。

是说：

```
 Unsupported API cannot be used by a background agent. Assembly contoso.dll was trying to 
use Micosoft.Phone.Shell.PhoneApplicationService::get_Current 

Unsupported API cannot be used by a background agent. Assembly contoso.dll was trying to 
use Micosoft.Phone.Shell.PhoneApplicationService::get_State

Unsupported API cannot be used by a background agent. Assembly contoso.dll was trying to 
use Micosoft.Phone.Shell.PhoneApplicationService 
```

所以我一直在寻找不受支持的 API ( `http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962(v=vs.105).aspx`)

我正在使用`ShellToast`类，但它应该被支持？？

我不明白为什么或何时使用此 PhoneApplicationService，它没有在我的后台代理中引用，并且我在`Microsoft.Phone.Shell`命名空间中使用的唯一类是`ShellToast`......

我也在使用 IsoStorage 但后台代理允许

没有代码的任何猜测？你知道这个错误什么时候会触发吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:00:36.693

好的，我很愚蠢，我找到了解决方案。

事实上，这不是我的`ShellToast`班级，而是我的 TempDataStorage`PhoneApplicationService.Current.State`用于临时存储。

对不起'回合

# php - 如果未找到 ID，则显示错误消息

> ID：13876317
> 
> 赞同：0
> 
> 时间：2012-12-14T09:55:54.813
> 
> 标签：php, ajax, forms

我有一个简单的 html 表单，可以通过输入 ID 自动填充字段。它工作正常。但是，如果在数据库中没有找到 ID，它只能返回 null 到表单字段。我试图显示一条错误消息（可以是一个弹出窗口），说**找不到 ID！**但我没能做到。这是我将信息回显到表单字段的代码：

```
if (strlen($param) > 0) {
    $result = mysql_query("SELECT * FROM contact 
     WHERE contactid LIKE '$param%'");
    if (mysql_num_rows($result) == 1) {
        while ($myrow = mysql_fetch_array($result)) {
            $agentname = $myrow["contactfullname"];
            $agenttel = $myrow["contacttel"];
            $agentsal = $myrow["contactsalutation"];
            $agentid = $myrow["contactid"];
            $textout .= $agentid . ", " . $agentname . ", " . $agenttel . ", " . $agentsal;
        }
    } else {
        $textout = " , , ," . $param;
    }
}
echo $textout; 
```

这是我的ajaxFunction：

```
function ajaxFunction(e){
    var e=e || window.event;
    var keycode=e.which || e.keyCode;
    if(keycode==13 || (e.target||e.srcElement).value==''){ 
    var http;  // The variable that makes Ajax possible! 

    try{ 
        // Opera 8.0+, Firefox, Safari 
        http = new XMLHttpRequest(); 
    } catch (e){ 
        // Internet Explorer Browsers 
        try{ 
            http = new ActiveXObject("Msxml2.XMLHTTP"); 
        } catch (e) { 
            try{ 
                http = new ActiveXObject("Microsoft.XMLHTTP"); 
            } catch (e){ 
                // Something went wrong 
                alert("Your browser broke!"); 
                return false; 
            } 
        }
    }
 var url = "getagentids.php?param=";
                var idValue = document.getElementById("agid").value;
                var myRandom = parseInt(Math.random()*99999999);  // cache buster
                http.open("GET", "getagentids.php?param=" + escape(idValue) + "&rand=" + myRandom, true);
                http.onreadystatechange = handleHttpResponse;
                http.send(null);

                function handleHttpResponse() {
                    if (http.readyState == 4) {
                        results = http.responseText.split(",");
                        document.getElementById('agfn').value = results[0];
                        document.getElementById('agsal').value = results[1];
                        document.getElementById('agtel').value = results[2];
                        document.getElementById('agid').value = results[3];
                    }
           } 
    }   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:13:36.987

1.  不要使用 mysql_* 函数，而是使用[PDO](http://php.net/manual/en/ref.pdo-mysql.php)或[Mysqli](http://php.net/manual/en/book.mysqli.php)。
2.  [注意](http://php.net/manual/en/function.mysql-real-escape-string.php)$param 值
3.  如果您的查询应该返回 1 个结果，您可以使用[LIMIT](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm) 1 ，也不需要使用 while。

改变这个：

```
$result = mysql_query("SELECT * FROM contact 
     WHERE contactid LIKE '$param%'");
if (mysql_num_rows($result) == 1) {
        while ($myrow = mysql_fetch_array($result)) { 
```

到

```
$result = mysql_query("SELECT * FROM contact 
     WHERE contactid LIKE '$escaped_param%' LIMIT 1");
if (mysql_num_rows($result) == 1) {
     $myrow = mysql_fetch_array($result); 
```

4\. 如果你想在你的 ajax 响应中显示一条消息，你可以使用 json 或 .... 作为一个简单的例子，在错误时返回这个字符串：

```
error|" , , ," . $param; 
```

并检查您的客户端是否发生错误：

```
var result = "error|anything";
if(result.substr(0,6) == 'error|')
{
    alert('An error occured.');
}
else
{
    //do what you need!
} 
```

**编辑 ：**

```
function handleHttpResponse() 
{
    if (http.readyState == 4) 
    {
        results = http.responseText;
        if(results.substr(0,6) == 'error|')
        {
            alert('An error occured.');
        }
        else
        {
            results = results.split(",");
            document.getElementById('agfn').value = results[0];
            document.getElementById('agsal').value = results[1];
            document.getElementById('agtel').value = results[2];
            document.getElementById('agid').value = results[3];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:11:51.933

尝试在您的 sql 中执行此操作

```
 LIKE '%" . $param . "%' 
```

# javascript - 如何强制包装器 div 根据其子级保持其最佳宽度

> ID：13876319
> 
> 赞同：3
> 
> 时间：2012-12-14T09:55:58.320
> 
> 标签：javascript, html, css

我在 Chrome 中遇到问题（可能在其他浏览器中也是如此）。我有一个向左浮动的包装 div。它包含一些子 div，这些 div 也向左浮动，并且根据其内容具有不同的宽度。我为包装器 div 定义了一个最大宽度属性，正如您在小提琴代码中看到的那样，当包装器达到这个最大宽度时，包装器中的最后一个子级移动到下一行，但包装器保持最大宽度并且有右边有很多空白空间。我假设应该重新计算包装器的大小并且应该具有更小的宽度，因为它是浮动的。

我喜欢它，因为在我的真实代码中，包装器有“性感”的 css，但它看起来很粗鲁，有空格。

对不起我的英语，我希望你能理解我的问题。有谁知道我如何在没有任何 JS（或只是一点点 JS）的情况下解决这个问题？

谢谢！

[http://jsfiddle.net/Xd9PV/1/](http://jsfiddle.net/Xd9PV/1/)

```
 <div class="wrapper">
        <div class="float float-1">apple</div>
        <div class="float float-2">banana</div>
        <div class="float float-3">orange</div>
        <div class="float float-4">some very delicious strawberries</div>
    </div>​

    .wrapper {
        border: 1px solid red;
        float: left;
        max-width: 300px;
    }

    .float {
        border: 1px solid blue;
        float: left;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:06:51.543

使用 CSS 是不可能的。当您设置最大宽度时，它不会在 x 浮点数因溢出而下降到其他行后重新计算其宽度。

您可以使用 javascript/jQuery 为您计算这个值，而不是在需要的地方插入一个中断，f.ex：

```
var width = 0,
    maxWidth = 300, w;
$('.wrapper .float').each(function() {
    width += ( w = $(this).outerWidth() );
    if ( width > maxWidth ) {
        $(this).before('<div style="clear:left"></div>');
        width = w;
    }
});​ 
```

演示：http: [//jsfiddle.net/2mfbY/](http://jsfiddle.net/2mfbY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:15:05.277

添加 clear:both 到最后一个 div 元素，如下所示：

```
.float {
    border: 1px solid blue;
    float: left;
    margin-right: 5px;
}
.float:last-child {

    clear:both;
} 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:02:43.617

您可以尝试使用`ellipsis`（但我不确定您是否可以使用）

```
.float  {
    border: 1px solid blue;
    float: left; padding:0 2px;
    margin-right: 5px; max-width:90px; 
    text-overflow:ellipsis ; 
    white-space:nowrap; overflow:hidden
}
​ 
```

**[演示](http://jsfiddle.net/Xd9PV/5/)**

# cloud-foundry - vmc 未被识别为内部或外部命令

> ID：13876320
> 
> 赞同：1
> 
> 时间：2012-12-14T09:56:05.640
> 
> 标签：cloud-foundry, vmc

我安装了 Ruby 1.9.3 并按照[http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html](http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html)上的说明成功安装了 vmc 但是当我尝试使用“使用 Ruby 启动命令提示符”cmd 运行 vmc ，我收到“vmc”无法识别错误，我知道这通常意味着我需要将 vmc 添加到系统路径，但我找不到它的安装位置。

运行windows xp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:58:12.033

执行“gem uninstall vmc”，它将显示您的 vmc 安装。您可以采取另一个步骤并卸载 vmc，然后重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:52:47.737

在我的机器上它就在这里:)

C:>哪个vmc

/cygdrive/c/Ruby193/bin/vmc

# java - java - 如何在java中生成随机的15位长

> ID：13876322
> 
> 赞同：4
> 
> 时间：2012-12-14T09:56:11.803
> 
> 标签：java, random

> **可能重复：**
> [给定长度的 Java 随机数](https://stackoverflow.com/questions/5392693/java-random-number-with-given-length)

我一直在尝试在 java 中生成一个 15 位长的数字，但似乎我没有做到这一点，因为使用：

这将产生最多 10 位数字。

```
 Random random = new Random();
  int rand15Digt = random.nextInt(15); 
```

如何成功生成它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:58:18.637

使用[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)的方法 `public long nextLong()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T09:59:00.177

首先， an`int`可以容纳 和 之间`-2,147,483,648`的数字`2,147,483,647`。

利用[`Random.nextLong()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextLong%28%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T10:05:18.847

当以字符串形式显示时，任何数字都可以格式化为 15 位十进制数字。这是在将数字转换为字符串时实现的，例如：

```
System.out.println(String.format("%015d", 1));

// prints: 000000000000001 
```

如果要生成介于 之间的随机数，`100,000,000,000,000`则`999,999,999,999,999`可以[执行以下技巧](https://stackoverflow.com/a/5392715/474189)：

```
Random random = new Random();    
long n = (long) (100000000000000L + random.nextFloat() * 900000000000000L); 
```

如果您的最终目标是拥有一个包含随机十进制数字的 15 个字符的字符串，并且您对第三方库感到满意，请考虑 Apache commons [`RandomStringUtils`](http://commons.apache.org/lang/api/index.html?org/apache/commons/lang3/RandomStringUtils.html)：

```
boolean useLetters = false;
boolean useNumbers = true;
int stringLength = 15;

String result = RandomStringUtils.random(stringLength, useLetters, useNumbers) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T10:22:48.447

尝试一下`BigInteger`，请参阅此 StackOverflow 链接以获取更多信息[Random BigInteger Generation](https://stackoverflow.com/questions/2290057/how-to-generate-a-random-biginteger-value-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:22:30.267

在 Hibernate 中`UUIDGenerator`使用这个类，我们也可以创建安全随机数和唯一数。

```
public Serializable generate(SessionImplementor session, Object object)
        throws HibernateException {
    String uuid = (String)super.generate(session, object);
    return uuid.substring(uuid.length()-15, uuid.length());
} 
```

我认为这是生成唯一和随机数的最佳方法......

# ios - 如何解决 SUP 服务器超时错误？

> ID：13876324
> 
> 赞同：1
> 
> 时间：2012-12-14T09:56:26.937
> 
> 标签：ios, sybase, sup

从 ios 代码连接到 sup 服务器时，我收到此错误“由于未捕获的异常 'SUPApplicationTimeoutException' 导致应用程序终止，原因：'注册时间比 @i 长'”请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:08:04.220

我试图通过 sup 端的中继服务器进行连接，因为我遇到了超时错误。后来我尝试直接连接到 SUP，现在它连接到 sup 服务器并注册设备。

```
 SUP server side required details are
    SUPServerName:xxx
    SUPServerPort:xxx
    SUPUserName:xxx
    SUPFarmID:0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:49:16.740

您需要在初始化 SUP 客户端时捕获 Timeout（或通用 NSException）以避免崩溃（允许您管理网络错误）

```
 @try
        {
            [app registerApplication:SUP_TIMEOUT];
        }
        @
        catch (NSException *exception)
        {
            MBOLogError(@"%@: %@", [exception name], [exception reason]);
        } 
```

# visual-c++ - 如何在编辑控件中插入字符串

> ID：13876330
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:56:42.487
> 
> 标签：visual-c++, mfc

我将在运行时在编辑控件中添加字符串，我尝试了不同的方法和策略，但它不会插入，或者如果插入但不显示在编辑控件中！！！如何制作这个！请给我解决方案。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:57:59.083

使用 Windows API `SetWindowText`。

如果你有控制使用：

```
edit.SetWindowText( _T("Text" ) ); 
```

# google-chrome - Chrome favicon 覆盖问题

> ID：13876335
> 
> 赞同：2
> 
> 时间：2012-12-14T09:56:54.330
> 
> 标签：google-chrome

我有一个 Html 页面，其中包含两个不同的 favicon 引用，我想用第一个覆盖第二个 favicon (favicon2)。IE ：

```
<head>
    <link rel="shortcut icon" href="/assets/images/favicon1.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="/assets/images/favicon2.ico" type="image/x-icon" />
</head> 
```

在 Firefox 中显示 favicon2，但在 Chrome 和 IE 中显示 favicon1，如何让 Chrome 显示 favicon2？

请帮帮我。我被困住了。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:15:55.010

在文件夹的根目录中添加您的 favicon 并将 url 路径更新为 favicon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T09:42:29.393

```
function myFunction() {
document.getElementById('myIcon').href = "favicon2.ico";
}
```

```
<!DOCTYPE html>
<html>

<head>
  <link id="myIcon" rel="shortcut icon" href="favicon1.ico" type="image/x-icon" />
</head>

<body>
  <p>Click the button to change the value of the src attribute of the icon.</p>
  <button onclick="myFunction()">Try it</button>
</body>

</html>
```

# vba - 将参数从 VBS 传递到 VBA

> ID：13876338
> 
> 赞同：7
> 
> 时间：2012-12-14T09:56:57.760
> 
> 标签：vba, vbscript, argument-passing

我尝试从 VBS 调用 VBA 子例程，将字符串变量从 VBS 传递到 VBA，但找不到合适的语法：

```
'VBS:
'------------------------
Option Explicit

Set ArgObj = WScript.Arguments 
Dim strPath

mystr = ArgObj(0) '?

'Creating shell object 
Set WshShell = CreateObject("WScript.Shell")

'Creating File System Object
Set objFSO = CreateObject("Scripting.FileSystemObject")

'Getting the Folder Object
Set ObjFolder = objFSO.GetFolder(WshShell.CurrentDirectory)

'Getting the list of Files
Set ObjFiles = ObjFolder.Files

'Creat a Word application object
Set wdApp = CreateObject("Word.Application")
wdApp.DisplayAlerts = True
wdApp.Visible = True

'Running macro on each wdS-File
Counter = 0
For Each objFile in objFiles
  If UCase(objFSO.GetExtensionName(objFile.name)) = "DOC" Then
    set wdDoc = wdApp.Documents.Open(ObjFolder & "\" & ObjFile.Name, 0, False) 
    wdApp.Run "'C:\Dokumente und Einstellungen\kcichini\Anwendungsdaten\Microsoft\Word\STARTUP\MyVBA.dot'!Test_VBA_with_VBS_Args" (mystr) 'how to pass Argument???
    Counter = Counter + 1
  End if
Next

MsgBox "Macro was applied to " & Counter & " wd-Files from current directory!"

wdApp.Quit
Set wdDoc = Nothing
Set wdApp = Nothing

'------------------------
'VBA:
'------------------------
Sub Test_VBA_with_VBS_Args()

    Dim wdDoc As Word.Document
    Set wdDoc = ActiveDocument
    Dim filename As String
    Dim mystr As String

    'mystr = how to recognize VBS-Argument ???

    filename = ActiveDocument.name
    MsgBox "..The file: " & filename & " was opened and the VBS-Argument: " & mystr & "recognized!" 

    wdDoc.Close

End Sub
'------------------------ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T12:25:31.033

您需要在 VBA 中指定参数`Sub`并像从 VBA 中正常使用它一样使用它们。

例如，我尝试了以下 VBScript

```
dim wd: set wd = GetObject(,"Word.Application")
wd.Visible = true
wd.run "test", "an argument" 
```

和 VBA

```
Sub Test(t As String)
    MsgBox t
End Sub 
```

成功运行，生成了一个消息框。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-10T22:08:26.223

@user69820 答案的附录，如果参数是 VBScript 变量，则需要在调用子例程之前将它们转换为适当的类型：

这不起作用：

```
dim argumentVariable
argumentVariable = "an argument"
wd.run "test", argumentVariable 
```

这样做：

```
dim argumentVariable
argumentVariable = "an argument"
wd.run "test", CStr(argumentVariable) 
```

在 Excel 2010、Win7SP1 x64 上测试

# c++ - std::set 的替代方案（能够将元素从一个集合移动到另一个集合）

> ID：13876340
> 
> 赞同：2
> 
> 时间：2012-12-14T09:57:01.180
> 
> 标签：c++, stl, set

我正在寻找`std::set`. 我需要它来支持更多的操作`std::set`：

1.  将元素从一组移动到另一组，无需“*创建新的->复制->删除旧*的”。

2.  在某个位置拆分集合以获得两个集合（可以使用 获得类似的行为`std::list splice`）

3.  设置操作（如联合），无需不必要的复制。`std::set_union`会将元素从集合 A 和 B 复制到集合 C，如果我只需要集合 C 而不再需要 A 和 B，这将是低效的。

是否有任何支持这些操作的实现，或者我需要自己编写一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-11-07T08:10:36.833

我和你有同样的问题`std::set`，C++11、C++14 似乎没有任何理智的方法。然而，在 C++17 中，添加了`std::set`两个看起来很有前途的新成员。 `std::set::extract`允许从集合中提取整个节点。移除的节点允许获得对基础值的非常量引用，从而有效地允许将元素移出集合。它也可以插入到另一个集合中，而无需复制或移动基础值。`std::set::merge`允许合并两个集合而不复制或移动任何元素，只更新内部指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:17:37.450

尝试用 a 做你建议的事情的问题`std::set`是我不相信你可以把一个值移出一个。这是因为设置迭代器只返回 const 引用以阻止您更改值并破坏内部结构。你可能可以`const_cast`解决这个问题，但我不推荐它。即使您采用这种方法，您仍然在树中分配了节点，并且您无法采取任何措施来避免这种开销。

如果您决定实现自己的支持移动值的集合，您应该能够获得 Boost::Intrusive 库 (http://www.boost.org/doc/libs/1_52_0/doc/html/intrusive.html ) 来完成保持一组排序值的繁重工作。您需要实现用于管理对象生命周期的代码，但这比构建 RB-tree 实现更容易。

我为将节点存储在`std::list`. 这允许在地图之间移动元素，而无需复制节点结构或存储的值。如果我有时间，我会尝试整理并在此处发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T10:00:40.720

对于第 1 点和第 3 点，您可以使用`set<shared_ptr>`或其他一些智能指针，而不是直接将对象存储在`set`. 在这种情况下，您应该实施

```
bool operator<(shared_ptr<T> const & a, shared_ptr<T> const & b) 
```

对于第 2 点，不会有这种仅由索引确定的方法，因为`set`. `filter`但是，您可以在 ruby​​ 中使用类似的东西。这里的谓词可以是函数、函数对象或闭包。

```
remove_copy_if(foo.begin(), foo.end(), back_inserter(bar), some_predicator); 
```

# android - 显示没有动画的键盘

> ID：13876343
> 
> 赞同：10
> 
> 时间：2012-12-14T09:57:15.083
> 
> 标签：android, android-softkeyboard

自 ICS 以来，我对软键盘的动画有疑问。我使用软键盘进行了数据输入活动。窗口设置为“adjustResize”，以使所有视图都适合软键盘上方的屏幕。自从 Android 4 以来，打开键盘的花哨动画，让我们屏幕上的视图“弹跳”。

看起来，好像视图被布局了，然后键盘打开，然后屏幕被重新布局，导致一种跳跃的用户体验。

有一个类似的问题：（[如何在Java中显示/隐藏没有任何动画（例如淡入淡出）的软键盘？](https://stackoverflow.com/questions/13191414/how-to-show-hide-the-soft-keyboard-without-any-animation-e-g-fade-in-java)）但是，那里的解决方案对我不起作用。（在 4.2.1 测试）

如果有人对实现以下解决方案之一有一些线索，我会很高兴：

*   禁用活动的软键盘动画
*   检索软键盘的大小以手动设置屏幕大小

干杯，弗洛里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:49:02.470

**您无法获得 soft-keyboard 的高度**。我认为没有必要这样做，您可以通过尝试不同的方法来实现相同的用例。

如果您不想重新布局屏幕，您可以使用`android:windowSoftInputMode`属性以便在软键盘出现时对屏幕渲染有更多的控制。

**例如**：如果您不想调整视图大小，可以将以下行放入`manifest`文件中。这将简单地在活动顶部显示键盘。

```
<activity android:windowSoftInputMode="adjustPan"> 
```

您可以检查[***其他选项***](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)以获得所需的功能。

为了更好的理解和更多的控制，你可以参考**[*这个教程*](http://android-developers.blogspot.in/2009/04/updating-applications-for-on-screen.html)**。

希望这会给您一些有关实现用例的提示。

# objective-c - 对象被释放了，它们仍然给出了它们的值。ARC 未标记（表示关闭）

> ID：13876349
> 
> 赞同：0
> 
> 时间：2012-12-14T09:57:34.817
> 
> 标签：objective-c, copy, release, retain

**对象被释放了，它们仍然给出了它们的值。ARC 未标记（表示关闭）**

```
-(void)viewDidLoad
{   
     [super viewDidLoad];

     // Do any additional setup after loading the view, typically from a nib.
     //test of retain and copy

      NSString *s1 = [[NSString alloc] initWithString:@"String1"];
      NSString *s2 = [s1 copy];

      [s1 release];
      [s1 release];
      [s2 release];

      if(s1!=nil)
      {
            NSLog(@"11111");
            NSArray *array = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
            [array release];

            NSLog(@"S1 - %@ \n S2 - %@ \n Array - %@",s1,s2,array);
       }
  } 
```

===输出===

2012-12-14 15:04:01.165 testMM[940:207] 11111 2012-12-14 15:04:01.168 testMM[940:207] S1 - String1 S2 - String1 数组 - S1 - String1 S2 - String1 数组 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:31:10.527

首先，访问已释放的对象是**未定义的行为**。它可能会访问看起来像原始对象的东西（如果它使用的内存没有被覆盖），或者它可能会访问另一个对象（碰巧稍后被分配），或者它可能会访问随机垃圾（根本不是一个对象） )，否则它可能会崩溃或做其他奇怪的事情。没有办法判断一个对象是否被释放，除非你在启动僵尸的情况下运行以捕获对释放对象的调用。

不仅如此，即使在释放对象上的所有保留后，也无法保证何时释放对象。一个对象在其保留计数变为 0 时被释放。但即使您分配并释放了一个对象，也有可能某些 API 可能已保留然后自动释放它。例如，您分配然后立即释放数组，但它可能会在`initWithObjects:`其中保留和自动释放自身（保留和自动释放对象永远不会不正确），尽管在`init`.

特别是在这种情况下，对于字符串来说，`@"String1"`是一个存在于静态内存和内存管理操作中的字面量字符串，它喜欢`retain`并且`release`不做任何事情。`NSString`，当您基于常量字符串创建新字符串时，只需返回该常量字符串；并且`copy`在常量字符串上也返回该常量字符串。所以基本上`s1`，`s2`两者都指向静态内存中永远存在的字符串文字。`release`对他们没有影响。（但从内存管理规则的角度来看仍然是不正确的。）

`array`被分配和释放。这里可能发生的事情（我猜这里，由于上述原因）是数组确实被释放了，但是那部分内存在你打印它时并没有被覆盖，因为它的时间太短了。同样，这是未定义的行为。

# git - 我想从我的 vpsdepot 终端安装 git 吗？

> ID：13876350
> 
> 赞同：-1
> 
> 时间：2012-12-14T09:57:37.570
> 
> 标签：git, webserver

我使用 root 登录我运行 yum install git

显示一些依赖错误，还有这个：

> 仍有未完成的交易。您可以考虑先运行 yum-complete-transaction 来完成它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:38:22.087

你应该做这个：

`yum install yum-utils`

`yum-complete-transaction`（如果这个不工作添加`--cleanup-only`选项）

`yum install git`

Yum 应该自动解决依赖关系，无论如何您可以尝试手动执行，搜索丢失的包并安装它们：

`yum search perl`

您应该找到两个缺少的包：`perl-git`和`perl-dbi`，然后您应该安装它们。

# silverlight - 取消关闭浏览器中的 Silverlight 应用程序

> ID：13876359
> 
> 赞同：0
> 
> 时间：2012-12-14T09:57:57.080
> 
> 标签：silverlight

我需要在退出 Silverlight 应用程序之前和关闭应用程序之后执行一些异步操作。
例如：

```
 RoutedEventArgs re;
 private void Application_Exit(RoutedEventArgs e){
    re=e;
    e.Cancel=true;
    ExecuteAsincOperation();
 }
 .....
 private void AsincOperationCompleted(){
     e.Cancel=false;
 } 
```

我该怎么做（如果可能的话）？

# scala - ParMap 值方法替代

> ID：13876365
> 
> 赞同：1
> 
> 时间：2012-12-14T09:58:22.627
> 
> 标签：scala, parallel-collections

[ParMap](http://www.scala-lang.org/api/current/index.html#scala.collection.parallel.immutable.ParMap)（在 Scala 2.9 中）似乎没有 .values 方法。为什么会这样，如果我特别热衷于维护如下的并行处理链，我该如何解决？

```
myParSeq.collect{case i: Interesting => i}.groupBy(_.content).values. ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:43:15.930

显然是疏忽。

[添加缺少的 ParMap 和 GenMap 方法。](https://github.com/scala/scala/commit/68031b3af11a2f79b186607f44d5c327051d19bd)

```
$ scala
Welcome to Scala version 2.10.0-RC2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_06).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import collection.parallel.immutable._
import collection.parallel.immutable._

scala> ParMap("a"->1)
res0: scala.collection.parallel.immutable.ParMap[String,Int] = ParMap(a -> 1)

scala> res0.values
res1: scala.collection.parallel.ParIterable[Int] = ParIterable(1) 
```

怎么样：

```
$ scala29
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_22).
Type in expressions to have them evaluated.
Type :help for more information.

scala> Map("a"->1, "b"->2).par
res0: scala.collection.parallel.immutable.ParMap[java.lang.String,Int] = ParMap(a -> 1, b -> 2)

scala> .unzip._2
res1: scala.collection.parallel.immutable.ParIterable[Int] = ParVector(1, 2) 
```

# c++ - 如何使用 openCV c++ 拍摄 kinect 视频图像和深度图像？

> ID：13876366
> 
> 赞同：9
> 
> 时间：2012-12-14T09:58:26.743
> 
> 标签：c++, opencv, kinect

我是 opencv(c++) 和 kinect 的新手。我尝试使用 kinect 中的 c++ 拍摄视频图像。我到处搜索，但什么也没找到。因为人们是使用 openNI 或 OpenKinect 制作的。我不想使用这个库。我该怎么做？？

谢谢！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T16:43:33.667

您可以使用 kinect for windows SDK 来抓取帧，然后将它们转换为 opencv 格式。请参阅在 Visual Studio 中执行此操作的代码示例（在微软论坛上的此[线程](http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/c5c00b90-28d7-49f5-b451-d79609604ec0)中找到），不幸的是我现在没有 kinect 来测试代码：

```
#include "stdafx.h"

#define COLOR_WIDTH 640    
#define COLOR_HIGHT 480    
#define DEPTH_WIDTH 320    
#define DEPTH_HIGHT 240    
#define SKELETON_WIDTH 640    
#define SKELETON_HIGHT 480    
#define CHANNEL 3

BYTE buf[DEPTH_WIDTH * DEPTH_HIGHT * CHANNEL];

int drawColor(HANDLE h, IplImage* color)    
{
    const NUI_IMAGE_FRAME * pImageFrame = NULL;
    HRESULT hr = NuiImageStreamGetNextFrame(h, 0, &pImageFrame);
    if (FAILED(hr)) 
    {
        cout << "Get Image Frame Failed" << endl;
        return -1;
    }
    NuiImageBuffer * pTexture = pImageFrame->pFrameTexture;
    KINECT_LOCKED_RECT LockedRect;
    pTexture->LockRect(0, &LockedRect, NULL, 0);
    if (LockedRect.Pitch != 0)
    {
        BYTE * pBuffer = (BYTE*) LockedRect.pBits;
        cvSetData(color, pBuffer, LockedRect.Pitch);
    }
    cvShowImage("color image", color);
    NuiImageStreamReleaseFrame(h, pImageFrame);
    return 0;
}

int drawDepth(HANDLE h, IplImage* depth)
{
    const NUI_IMAGE_FRAME * pImageFrame = NULL;
    HRESULT hr = NuiImageStreamGetNextFrame(h, 0, &pImageFrame);
    if (FAILED(hr))
    {
        cout << "Get Image Frame Failed" << endl;
        return -1;
    }
    //  temp1 = depth;
    NuiImageBuffer * pTexture = pImageFrame->pFrameTexture;
    KINECT_LOCKED_RECT LockedRect;
    pTexture->LockRect(0, &LockedRect, NULL, 0);
    if (LockedRect.Pitch != 0)
    {
        USHORT * pBuff = (USHORT*) LockedRect.pBits;
        for (int i = 0; i < DEPTH_WIDTH * DEPTH_HIGHT; i++)
        {
            BYTE index = pBuff[i] & 0x07;
            USHORT realDepth = (pBuff[i] & 0xFFF8) >> 3;
            BYTE scale = 255 - (BYTE)(256 * realDepth / 0x0fff);
            buf[CHANNEL * i] = buf[CHANNEL * i + 1] = buf[CHANNEL * i + 2] = 0;
            switch (index)
            {
            case 0:
                buf[CHANNEL * i] = scale / 2;
                buf[CHANNEL * i + 1] = scale / 2;
                buf[CHANNEL * i + 2] = scale / 2;
                break;
            case 1:
                buf[CHANNEL * i] = scale;
                break;
            case 2:
                buf[CHANNEL * i + 1] = scale;
                break;
            case 3:
                buf[CHANNEL * i + 2] = scale;
                break;
            case 4:
                buf[CHANNEL * i] = scale;
                buf[CHANNEL * i + 1] = scale;
                break;
            case 5:
                buf[CHANNEL * i] = scale;
                buf[CHANNEL * i + 2] = scale;
                break;
            case 6:
                buf[CHANNEL * i + 1] = scale;
                buf[CHANNEL * i + 2] = scale;
                break;
            case 7:
                buf[CHANNEL * i] = 255 - scale / 2;
                buf[CHANNEL * i + 1] = 255 - scale / 2;
                buf[CHANNEL * i + 2] = 255 - scale / 2;
                break;
            }
        }
        cvSetData(depth, buf, DEPTH_WIDTH * CHANNEL);
    }
    NuiImageStreamReleaseFrame(h, pImageFrame);
    cvShowImage("depth image", depth);
    return 0;
}

int drawSkeleton(IplImage* skeleton)
{
    NUI_SKELETON_FRAME SkeletonFrame;
    CvPoint pt[20];
    HRESULT hr = NuiSkeletonGetNextFrame(0, &SkeletonFrame);
    bool bFoundSkeleton = false;
    for (int i = 0; i < NUI_SKELETON_COUNT; i++)
    {
        if (SkeletonFrame.SkeletonData[i].eTrackingState
                == NUI_SKELETON_TRACKED)
        {
            bFoundSkeleton = true;
        }
    }
    // Has skeletons!
    //
    if (bFoundSkeleton)
    {
        NuiTransformSmooth(&SkeletonFrame, NULL);
        memset(skeleton->imageData, 0, skeleton->imageSize);
        for (int i = 0; i < NUI_SKELETON_COUNT; i++)
        {
            if (SkeletonFrame.SkeletonData[i].eTrackingState
                    == NUI_SKELETON_TRACKED)
            {
                for (int j = 0; j < NUI_SKELETON_POSITION_COUNT; j++)
                {
                    float fx, fy;
                    NuiTransformSkeletonToDepthImageF(
                            SkeletonFrame.SkeletonData[i].SkeletonPositions[j],
                            &fx, &fy);
                    pt[j].x = (int) (fx * SKELETON_WIDTH + 0.5f);
                    pt[j].y = (int) (fy * SKELETON_HIGHT + 0.5f);
                    cvCircle(skeleton, pt[j], 5, CV_RGB(255, 0, 0), -1);
                }

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HEAD],
                        pt[NUI_SKELETON_POSITION_SHOULDER_CENTER],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_SHOULDER_CENTER],
                        pt[NUI_SKELETON_POSITION_SPINE], CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_SPINE],
                        pt[NUI_SKELETON_POSITION_HIP_CENTER],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HAND_RIGHT],
                        pt[NUI_SKELETON_POSITION_WRIST_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_WRIST_RIGHT],
                        pt[NUI_SKELETON_POSITION_ELBOW_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_ELBOW_RIGHT],
                        pt[NUI_SKELETON_POSITION_SHOULDER_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_SHOULDER_RIGHT],
                        pt[NUI_SKELETON_POSITION_SHOULDER_CENTER],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_SHOULDER_CENTER],
                        pt[NUI_SKELETON_POSITION_SHOULDER_LEFT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_SHOULDER_LEFT],
                        pt[NUI_SKELETON_POSITION_ELBOW_LEFT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_ELBOW_LEFT],
                        pt[NUI_SKELETON_POSITION_WRIST_LEFT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_WRIST_LEFT],
                        pt[NUI_SKELETON_POSITION_HAND_LEFT], CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HIP_CENTER],
                        pt[NUI_SKELETON_POSITION_HIP_RIGHT], CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HIP_RIGHT],
                        pt[NUI_SKELETON_POSITION_KNEE_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_KNEE_RIGHT],
                        pt[NUI_SKELETON_POSITION_ANKLE_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_ANKLE_RIGHT],
                        pt[NUI_SKELETON_POSITION_FOOT_RIGHT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HIP_CENTER],
                        pt[NUI_SKELETON_POSITION_HIP_LEFT], CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_HIP_LEFT],
                        pt[NUI_SKELETON_POSITION_KNEE_LEFT], CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_KNEE_LEFT],
                        pt[NUI_SKELETON_POSITION_ANKLE_LEFT],
                        CV_RGB(0, 255, 0));

                cvLine(skeleton, pt[NUI_SKELETON_POSITION_ANKLE_LEFT],
                        pt[NUI_SKELETON_POSITION_FOOT_LEFT], CV_RGB(0, 255, 0));
            }
        }
    }
    cvShowImage("skeleton image", skeleton);
    return 0;
}

int main(int argc, char * argv[])
{
    IplImage* color = cvCreateImageHeader(cvSize(COLOR_WIDTH, COLOR_HIGHT), IPL_DEPTH_8U, 4);

    IplImage* depth = cvCreateImageHeader(cvSize(DEPTH_WIDTH, DEPTH_HIGHT),IPL_DEPTH_8U, CHANNEL);

    IplImage* skeleton = cvCreateImage(cvSize(SKELETON_WIDTH, SKELETON_HIGHT),IPL_DEPTH_8U, CHANNEL);

    cvNamedWindow("color image", CV_WINDOW_AUTOSIZE);

    cvNamedWindow("depth image", CV_WINDOW_AUTOSIZE);

    cvNamedWindow("skeleton image", CV_WINDOW_AUTOSIZE);

    HRESULT hr = NuiInitialize(
            NUI_INITIALIZE_FLAG_USES_DEPTH_AND_PLAYER_INDEX
            | NUI_INITIALIZE_FLAG_USES_COLOR
            | NUI_INITIALIZE_FLAG_USES_SKELETON);

    if (hr != S_OK)
    {
        cout << "NuiInitialize failed" << endl;
        return hr;
    }

    HANDLE h1 = CreateEvent(NULL, TRUE, FALSE, NULL);
    HANDLE h2 = NULL;
    hr = NuiImageStreamOpen(NUI_IMAGE_TYPE_COLOR, NUI_IMAGE_RESOLUTION_640x480,
            0, 2, h1, &h2);
    if (FAILED(hr))
    {
        cout << "Could not open image stream video" << endl;
        return hr;
    }

    HANDLE h3 = CreateEvent(NULL, TRUE, FALSE, NULL);
    HANDLE h4 = NULL;
    hr = NuiImageStreamOpen(NUI_IMAGE_TYPE_DEPTH_AND_PLAYER_INDEX,
            NUI_IMAGE_RESOLUTION_320x240, 0, 2, h3, &h4);
    if (FAILED(hr))
    {
        cout << "Could not open depth stream video" << endl;
        return hr;
    }

    HANDLE h5 = CreateEvent(NULL, TRUE, FALSE, NULL);
    hr = NuiSkeletonTrackingEnable(h5, 0);
    if (FAILED(hr))
    {
        cout << "Could not open skeleton stream video" << endl;
        return hr;
    }

    while (1)
    {
        WaitForSingleObject(h1, INFINITE);
        drawColor(h2, color);
        WaitForSingleObject(h3, INFINITE);
        drawDepth(h4, depth);
        WaitForSingleObject(h5, INFINITE);
        drawSkeleton(skeleton);

        //exit
        int c = cvWaitKey(1);
        if (c == 27 || c == 'q' || c == 'Q')
            break;
    }

    cvReleaseImageHeader(&depth);
    cvReleaseImageHeader(&color);
    cvReleaseImage(&skeleton);
    cvDestroyWindow("depth image");
    cvDestroyWindow("color image");
    cvDestroyWindow("skeleton image");

    NuiShutdown();

    return 0;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T17:33:18.077

OpenCV 不提供连接和处理来自 Kinect 传感器的数据的能力；除非您将 Kinect 视为普通网络摄像头。您将希望使用其中一个 API 获取数据并将其发送到 OpenCV。要从 Kinect 获取数据，您可以使用：

*   [适用于 Windows SDK 的 Microsoft Kinect](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)
*   [OpenKinect 的 libfreenect API](http://openkinect.org/wiki/Main_Page)
*   [OpenNI + OpenKinect](http://openni.org/)

如果您的雇主对其中一种 API 有疑问，那就可以选择。但是使用 OpenCV 并不能消除您使用其中之一的需要。

在[MSDN 上快速搜索](http://social.msdn.microsoft.com/Search/en-US/?query=opencv%20c%2B%2B&rq=meta%3aSearch.MSForums.ForumID%2882100fe2-5d35-44fd-b00d-e8d6383af8f2%29+site%3amicrosoft.com&rn=NUI+API+and+Programming%E2%80%94Kinect+for+Windows+SDK+Forum&ac=8)会发现有关该主题的多个线程。我读过的最直接的方法是`cvSetData`在转换图像后使用导入数据：

**RGB**

```
IplImage * ovImage = NULL;
ovImage = cvCreateImage(cvSize(640, 480), 8, 4);
cvSetData(ovImage, pBuffer, ovImage->widthStep); 
```

**深度**

```
ovImage = cvCreateImage(cvSize(640, 480), 8, 1); 
```

我还在 GitHub 上找到了[freenomad_vision](https://github.com/freenomad/freenomad_vision)项目，它通过 OpenCV 和 OpenGL 提供 libfreenect 支持。如果您不喜欢使用 libfreenect，那么代码可以很容易地用作参考，因为传入的数据都是相同的，并且（很可能）会被相同地转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-16T10:34:54.737

如果有人被重定向到这里寻找更简单的方法来可视化 Kinect 深度流，我可以通过以下方式为 KinectV2 执行此操作。

```
Mat CDepthMap::getFrame()
{
    IDepthFrame* frame;
    Mat depthImage;
    hr = _depth_reader->AcquireLatestFrame(&frame);
    if (SUCCEEDED(hr)) {
            const UINT imgSize = sDepthWidth*sDepthHeight; //512*424
            UINT16 pixelData[imgSize];
            hr = frame->CopyFrameDataToArray(imgSize, pixelData);
            if (SUCCEEDED(hr)) {
            depthImage = Mat(sDepthHeight,sDepthWidth, CV_8U);
                for (UINT i = 0; i < imgSize; i++) {
                    UINT16 depth = pixelData[i];
                    depthImage.at<UINT8>(i) = LOWORD(depth);
                }
        }
        SafeRelease(frame);
    }
    return depthImage;
} 
```

# php - 具有不同列搜索方法的php mysql多表

> ID：13876368
> 
> 赞同：0
> 
> 时间：2012-12-14T09:58:30.213
> 
> 标签：php, mysql

我正在网站上进行搜索，我总共有 10 个应该搜索的表。

我不想使用这样的多个查询：

```
SELECT `manufacturer` FROM `auto` WHERE ....
SELECT `city`,`address` FROM `estate` WHERE ....
SELECT `title`,`content` FROM `news` WHERE ....
... and 6 more queries 
```

相反，我想使用单个查询来获取所有所需的数据并分配要访问的结果网站 URL。

我应该如何表现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:26:12.653

使用分隔查询是很好的解决方案。如果您将在一个查询中使用所有表，则所有表都将锁定查询时间。如果您将使用 LIKE 或全文搜索，那么您将锁定您的网站。

您可以对每个表使用单独的查询。或者您可以在外部索引进行搜索。例如，您可以使用 sphinx - 构建索引和按索引搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:04:14.773

通常的方法是`UNION`您的查询

```
SELECT * FROM (
    (
        SELECT `manufacturer` AS sval FROM `auto` WHERE ....
    )
    UNION
    (
        SELECT CONCAT(`city`,`address`) AS sval FROM `estate` WHERE ....
    )
    UNION
    (
        SELECT CONCAT(`title`,`content`) AS sval FROM `news` WHERE ....
    )
) 
```

# c - linux-kernel模块中的系统调用拦截（内核3.5）

> ID：13876369
> 
> 赞同：9
> 
> 时间：2012-12-14T09:58:32.377
> 
> 标签：c, module, linux-kernel, kernel-module

我需要用我自己的实现替换标准系统调用（例如 SYS_mkdir）。

正如我在一些资料中读到的，包括Stackoverflow 上的[这个问题](https://stackoverflow.com/questions/12613301/loadable-kernel-module-programming-and-system-call-interception)`sys_call_table`， is not export symbol since kernel version `2.6`。

我尝试了以下代码：

```
 #include <linux/module.h> 
    #include <linux/kernel.h> 
    #include <linux/unistd.h> 
    #include <asm/syscall.h> 

    int (*orig_mkdir)(const char *path); 

    ....

    int init_module(void) 
    { 
            orig_mkdir=sys_call_table[__NR_mkdir]; 
            sys_call_table[__NR_mkdir]=own_mkdir;  
            printk("sys_mkdir replaced\n"); 
            return(0); 
    } 

    .... 
```

不幸的是，我收到编译器错误：

```
 error: assignment of read-only location ‘sys_call_table[83]’ 
```

如何替换系统调用？

**编辑：**有没有没有内核补丁的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T21:29:02.073

这对我有用。

请参阅 [Linux 内核：系统调用挂钩示例](https://stackoverflow.com/questions/2103315/linux-kernel-system-call-hooking-example) 和 [https://bbs.archlinux.org/viewtopic.php?id=139406](https://bbs.archlinux.org/viewtopic.php?id=139406)

```
asmlinkage long (*ref_sys_open)(const char __user *filename, int flags, umode_t mode);
asmlinkage long new_sys_open(const char __user *filename, int flags, umode_t mode)
{
  return ref_sys_open(filename, flags, mode);
}

static unsigned long **aquire_sys_call_table(void)
{
  unsigned long int offset = PAGE_OFFSET;
  unsigned long **sct;

  while (offset < ULLONG_MAX) {
    sct = (unsigned long **)offset;

    if (sct[__NR_close] == (unsigned long *) sys_close) 
      return sct;

    offset += sizeof(void *);
  }
  print("Getting syscall table failed. :(");
  return NULL;
}

// Crazy copypasted asm stuff. Could use linux function as well...
// but this works and will work in the future they say.
static void disable_page_protection(void) 
{
  unsigned long value;
  asm volatile("mov %%cr0, %0" : "=r" (value));

  if(!(value & 0x00010000))
    return;

  asm volatile("mov %0, %%cr0" : : "r" (value & ~0x00010000));
}

static void enable_page_protection(void) 
{
  unsigned long value;
  asm volatile("mov %%cr0, %0" : "=r" (value));

  if((value & 0x00010000))
    return;

  asm volatile("mov %0, %%cr0" : : "r" (value | 0x00010000));
}

static int __init rootkit_start(void) 
{

  //Hide me

  print("loaded");

  if(!(sys_call_table = aquire_sys_call_table()))
    return -1;

  disable_page_protection(); 
  {
    ref_sys_open = (void *)sys_call_table[__NR_open];
    sys_call_table[__NR_open] = (unsigned long *)new_sys_open;
  }
  enable_page_protection();
  return 0;
}

static void __exit rootkit_end(void) 
{
  print("exiting");

  if(!sys_call_table) {
    return;
  }

  disable_page_protection();
  {
    sys_call_table[__NR_open] = (unsigned long *)ref_sys_open;
  }
  enable_page_protection();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-15T07:48:00.710

是的，有一个无需修补/重建内核的解决方案。使用[Kprobes](http://sourceware.org/systemtap/kprobes/index.html)基础设施（或 SystemTap）。

这将允许您使用内核模块在内核中的任何点放置“探针”（函数）。

现在可以防止通过修改 sys_call_table 来做类似的事情（它是只读的）并且被认为是肮脏的黑客！Kprobes/Jprobes/etc 是一种“干净”的方法。此外，内核源代码树中提供的文档和[示例](http://lxr.linux.no/linux+v3.7/samples/kprobes/)非常好（查看内核 src 树 - [Documentation/kprobes.txt](http://lxr.linux.no/linux+v3.7/Documentation/kprobes.txt)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:05:46.270

该问题是由于 sys_call_table 是只读的。为了避免错误，在操作 sys_call_table 之前，您还必须使其可写。内核提供了一个函数来实现它。该函数以**set_mem_rw()**的形式给出。

只需在操作 sys_call_table 之前添加以下代码片段

```
set_mem_rw((long unsigned int)sys_call_table,1); 
```

在内核模块的退出函数中，请不要忘记将 sys_call_table 恢复为只读。可以实现如下。

```
set_mem_ro((long unsigned int)sys_call_table,1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:57:54.213

Use LSM infrustructure.

Look at LSM hooks `path_mkdir` or `inode_mkdir` for details. One question that needs to be solved is how to register your own LSM module while the system don't allow it explicitly. See the answer for details here:

[How can I implement my own hook function with LSM?](https://stackoverflow.com/questions/10428212/how-can-i-implement-my-own-hook-function-with-lsm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T13:14:01.193

首先，您需要确定 sys_call_table 的位置。见[这里](http://www.gadgetweb.de/linux/40-how-to-hijacking-the-syscall-table-on-latest-26x-kernel-systems.html)。

在写入刚刚定位的系统表之前，您必须使其内存页可写。对于[这里](http://www.linuxforums.org/forum/kernel/133982-cannot-modify-sys_call_table.html#post666831)的检查，如果这不起作用，试试[这个](https://stackoverflow.com/a/6742086/479753)。

# multithreading - 使用 FileSystemMonitoring 读取 app.config 中的更改并实时写入 app.config

> ID：13876372
> 
> 赞同：4
> 
> 时间：2012-12-14T09:58:58.430
> 
> 标签：multithreading, c#-4.0, app-config, filesystemwatcher, configurationsection

我正在使用 FileSystemWatcher 来监视 app.config 文件中的任何更改。而且，写入配置文件。

这是我的代码：

MyApplication是主项目，DataCache是​​MyApplication中引用的类库。

```
using System;
using System.Threading;
using System.IO;
namespace MyApplication
{  

  public class Program
  {
    public static string rootFolderPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);
    public static string configFilePath = Path.Combine(rootFolderPath, "MyApplication.exe.config");static void Main(string[] args)
    {
        //First Time initializing the config file.
        ConfigFileMonitor.SetConfigFileAtRuntime(configFilePath);

        //Initializing the config file monitor on a separate thread.
        Thread monitorThread = new Thread(ConfigFileMonitor.BeginConfigFilesMonitor);
        monitorThread.Start();

        WriteToConfigFile();

    }

    static void WriteToConfigFile()
    {
        Console.WriteLine(String.Format("Hello {0} {1}", DataCache.Section1Data.FirstNameString, DataCache.Section1Data.LastNameString));

        string _firstName, _lastName = string.Empty;
        do
        {
            Console.WriteLine("");
            Console.Write("First Name : ");
            _firstName = Console.ReadLine();

            Console.Write("Last Name : ");
            _lastName = Console.ReadLine();

            if(_firstName.Length>0)
                DataCache.Section1Data.FirstNameString = _firstName;

            if(_lastName.Length>0)
                DataCache.Section1Data.LastNameString = _lastName;

            Console.WriteLine(String.Format("Hello {0} {1}", DataCache.Section1Data.FirstNameString, DataCache.Section1Data.LastNameString));
        }
        while (true);
    }
  }
}

using System;
using System.IO;

namespace MyApplication
{
    /// <summary>
    /// Monitors for any change in the app.config file
    /// </summary>
    public class ConfigFileMonitor
    {
         private static FileSystemWatcher _watcher;
         private static string _configFilePath = String.Empty;
         private static string _configFileName = String.Empty;

        /// <summary>
    /// Texts the files surveillance.
    /// </summary>
    public static void BeginConfigFilesMonitor()
    {
        try
        {
            string fileToMonitor = Program.configFilePath;
            if (fileToMonitor.Length == 0)
                Console.WriteLine("Incorrect config file specified to watch");
            else
            {
                _configFileName = Path.GetFileName(fileToMonitor);
                _configFilePath = fileToMonitor.Substring(0, fileToMonitor.IndexOf(_configFileName));
            }
            // Use FileWatcher to check and update only modified text files.
            WatchConfigFiles(_configFilePath, _configFileName);
        }
        catch (Exception e1)
        {
            Console.WriteLine(e1.Message);
        }
    }

    /// <summary>
    /// Watches the files.
    /// </summary>
    /// <param name="targetDir">The target dir.</param>
    /// <param name="filteredBy">The filtered by.</param>
    static void WatchConfigFiles(string targetDir, string filteredBy)
    {
        try
        {
            _watcher = new FileSystemWatcher();
            _watcher.Path = targetDir;
            _watcher.Filter = filteredBy;
            _watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite;
            _watcher.EnableRaisingEvents = true;

            _watcher.Changed += new FileSystemEventHandler(FileChanged);
            _watcher.WaitForChanged(WatcherChangeTypes.Changed);
        }
        catch (Exception e1)
        {
            Console.WriteLine(e1.Message);
        }
    }

    /// <summary>
    /// Handles the Changed event of the File control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.IO.FileSystemEventArgs"/> instance containing the event data.</param>
    protected static void FileChanged(object sender, FileSystemEventArgs e)
    {
        try
        {
            _watcher.EnableRaisingEvents = false;

            string filechange = e.FullPath;

            Console.WriteLine("Configuration File: " + filechange + "changed");

            //Since the file is changed - We have reload the configuration settings again.
            SetConfigFileAtRuntime(Path.Combine(Program.rootFolderPath, "MyApplication.exe.config"));

            Console.WriteLine(String.Format("New Name : {0} {1}", DataCache.Section1Data.FirstNameString, DataCache.Section1Data.LastNameString));

        _watcher.EnableRaisingEvents = true;
        }
        catch (Exception e1)
        {
            Console.WriteLine(e1.Message);
        }
    }

    /// <summary>
    /// Sets the config file at runtime.
    /// </summary>
    /// <param name="configFilePath"></param>
    public static void SetConfigFileAtRuntime(string configFilePath)
    {
        string runtimeconfigfile;
        try
        {
            if (configFilePath.Length == 0)
                Console.WriteLine("Please specify a config file to read from ");
            else
            {
                runtimeconfigfile = configFilePath;
                _configFileName = Path.GetFileName(configFilePath);
                _configFilePath = configFilePath.Substring(0, configFilePath.IndexOf(_configFileName));
            }

            // Specify config settings at runtime.
            //System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            DataCache.DataConfigSection.config = System.Configuration.ConfigurationManager.OpenExeConfiguration(configFilePath);
            //Similarly you can apply for other sections like SMTP/System.Net/System.Web etc..
            //But you have to set the File Path for each of these
            //config.AppSettings.File = runtimeconfigfile;

            //This doesn't actually going to overwrite you Exe App.Config file.
            //Just refreshing the content in the memory.
            DataCache.DataConfigSection.config.Save(System.Configuration.ConfigurationSaveMode.Modified);

            //Refreshing Config Section
            //ConfigurationManager.RefreshSection("appSettings");
            System.Configuration.ConfigurationManager.RefreshSection("MySectionGroup/Section1");                

            DataCache.Section1Data.configSection1 = null;
        }
        catch (Exception e1)
        {
            Console.WriteLine(e1.Message);
        }
    }
 }
}

<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="MySectionGroup">
      <section name="Section1"  type="DataCache.DataConfigSection, DataCache"     allowLocation="false" allowDefinition="Everywhere"/>
      <section name="Section2"  type="DataCache.DataConfigSection, DataCache"     allowLocation="false" allowDefinition="Everywhere"/>
    </sectionGroup>
  </configSections>
  <MySectionGroup>
    <Section1>
      <name
        firstName ="Pierce"
        lastName ="Brosnan"
        />
    </Section1>
  </MySectionGroup>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup>

</configuration> 
```

以下是 DataCache 类：

```
using System;
namespace DataCache
{
    public sealed class DataConfigSection : System.Configuration.ConfigurationSection
    {
        public static System.Configuration.Configuration config = System.Configuration.ConfigurationManager.OpenExeConfiguration(
        System.IO.Path.Combine(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetAssembly(typeof(DataConfigSection)).Location), "MyApplication.exe"));

    // Create a "name" element.
    [System.Configuration.ConfigurationProperty("name")]
    public NameElement Name
    {
        get
        {
            return (NameElement)this["name"];
        }
        set
        {
            this["name"] = value;
        }
    }

    // Define the "name" element
    // with firstName, secondName attributes.
    public class NameElement : System.Configuration.ConfigurationElement
    {
        [System.Configuration.ConfigurationProperty("firstName", DefaultValue = "abcd", IsRequired = true)]
        public String FirstName
        {
            get
            {
                return (String)this["firstName"];
            }
            set
            {
                this["firstName"] = value;
            }
        }

        [System.Configuration.ConfigurationProperty("lastName", DefaultValue = "xyz", IsRequired = true)]
        public String LastName
        {
            get
            {
                return (String)this["lastName"];
            }
            set
            {
                this["lastName"] = value;
            }
        }
    }
  }
}

namespace DataCache
{
    public class Section1Data
    {
        public static volatile DataConfigSection configSection1;
        private static object syncRoot = new System.Object();

    public const string Section1ConfigSectionName = "MySectionGroup/Section1";

    private Section1Data() { }

    public static DataConfigSection ConfigSection1
    {
        get
        {
            lock (syncRoot)
            {
                if (configSection1 == null)
                {
                    DataConfigSection.config = System.Configuration.ConfigurationManager.OpenExeConfiguration(System.IO.Path.Combine(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetAssembly(typeof(DataConfigSection)).Location), "MyApplication.exe"));
                    configSection1 = (DataConfigSection)DataConfigSection.config.GetSection(Section1ConfigSectionName);                   
                }
            }
            return configSection1;
        }
    }
    public static string FirstNameString
    {
        get
        {
            return ConfigSection1.Name.FirstName.ToString();
        }
        set
        {
            ConfigSection1.Name.FirstName = value;
            DataConfigSection.config.Save();
        }
    }
    public static string LastNameString
    {
        get
        {
            return ConfigSection1.Name.LastName.ToString();
        }
        set
        {
            ConfigSection1.Name.LastName = value;
            DataConfigSection.config.Save();
        }
    }
  }
} 
```

问题是，如果从控制台输入对名称进行了任何更改，则 FileChanged 会被调用一次，并且后续更改不会触发它。此外，如果手动对配置文件进行更改，它可以正常工作，直到从控制台进行更改为止，事件会一直触发。

我不确定为什么这行为很奇怪。有人能帮我一下吗。

谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:47:48.773

简短版本是：

```
this.Watcher = new FileSystemWatcher();
this.Watcher.Path = this.Dir;
this.Watcher.Filter = this.File;
this.Watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;
this.Watcher.EnableRaisingEvents = true;
this.Watcher.Changed += this.OnFileChange; 
```

但是，这里有一个更复杂（和丑陋）的示例，它是从需要一些额外处理（除了读取文件之外）的实时源中取出的。

```
public partial class FileModule
{
    private ConcurrentDictionary<string, InputFileInfo> inputFileList = new ConcurrentDictionary<string, InputFileInfo>();

    public FileModule()
    {
        this.InitializeInputFileWatchers();
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    public void EnableOrDisableRaisingEventsForFileWatchers(bool enable)
    {
        foreach (var el in this.inputFileList)
        {
            el.Value.Watcher.EnableRaisingEvents = enable;
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private void InitializeInputFileWatchers()
    {
        for (int i = 0; i < this.InputFiles.Count; i++)
        {
            if (File.Exists(this.InputFiles[i]))
            {
                InputFileInfo info = new InputFileInfo();
                info.Fullpath = ((FileModuleSettings)this.Settings).InputFiles[i];
                info.Watcher.Changed += this.OnFileChange;

                this.inputFileList.AddOrUpdate(info.Fullpath, info, (e, v) => { return info; });
            }
        }
    }

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private void OnFileChange(object source, FileSystemEventArgs e)
    {
        InputFileInfo info;
        if (this.inputFileList.TryGetValue(e.FullPath, out info))
        {
            DateTime lastWriteTime = System.IO.File.GetLastWriteTime(e.FullPath);
            if (info.LastHandledChange != lastWriteTime)
            {
                TimeSpan span = lastWriteTime.Subtract(info.LastHandledChange);
                if (span.Days == 0 && span.Hours == 0 && span.Minutes == 0 && span.Seconds == 0 && span.TotalMilliseconds < this.MinimumFileChangePeriod)
                {
                    // Event ignored due to required minimum file change period;
                }
                else
                {
                    info.LastHandledChange = lastWriteTime;
                    this.inputFileList.AddOrUpdate(e.FullPath, info, (a, v) => { return info; });

                    lock (this.readLockerObject)
                    {
                        this.ReadFile(e.FullPath);
                    }
                }
            }
        }
    }

    private bool ReadFile(string filepath, int count, bool directReading)
    {
        StreamReader sr = this.OpenStreamReader(file);

        if (sr != null)
        {
            string line;
            string[] split;
            int signalId;
            double value;

            while ((line = sr.ReadLine()) != null)
            {
                // do sth. with line
            }
        }
    }
}

internal class InputFileInfo : IDisposable
{
    public string Dir { get; private set; }

    public string File { get; private set; }

    public FileSystemWatcher Watcher { get; private set; }

    public DateTime LastHandledChange { get; set; }

    private string fullpath;

    public string Fullpath
    {
        get
        {
            return this.fullpath;
        }

        set
        {
            this.fullpath = BaseHelper.GetFullFilePath(value);
            this.Dir = Directory.GetParent(this.fullpath).ToString();
            this.File = this.fullpath.Replace(this.Dir + "\\", string.Empty);
            this.Watcher = new FileSystemWatcher();
            this.Watcher.Path = this.Dir;
            this.Watcher.Filter = this.File;
            this.Watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;
            this.Watcher.EnableRaisingEvents = true;
        }
    }

    public void Dispose()
    {
        if (this.Watcher != null)
        {
            this.Watcher.Dispose();
            this.Watcher = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:41:49.813

你有非常复杂的代码。我的 watcher 代码大约有 10 行。

无需将观察者的初始化卸载到另一个线程。在主线程上初始化它。观察者在后台线程中监视文件并在发生更改时触发事件，因此无需调用 WaitForChanged() 方法。

我检查了我的工作代码并将其与您的代码进行了比较，唯一的两个区别是： 1\. 我的过滤器是： NotifyFilters.LastWrite | NotifyFilters.文件名 | NotifyFilters.DirectoryName 2\. 我不调用 WaitForChanged() 方法 3\. 我已 `[PermissionSet(SecurityAction.Demand, Name = "FullTrust")]`应用到所有与观察者交互的方法。

此外，请确保您正在监视的文件不在系统目录之一中...观察程序无法很好地处理这些文件。我在墙上撞了半天，因为我试图在 C: 上观看文件。

# php - 使用 ajax 传递单选按钮信息

> ID：13876377
> 
> 赞同：3
> 
> 时间：2012-12-14T09:59:26.760
> 
> 标签：php, jquery, ajax

我有这段代码，我用它来用 ajax 发布变量。

我正在传递一个单选按钮，它采用一个值，我的意思是它不采用选定的值，默认情况下采用一个。

这是我的代码：HTML

```
<input type="radio"  id="status" name="status" value="1" /> Mbyllur<br />
<input type="radio"  id="status" name="status" value="0" /> Hapur<br /> 
```

Javascript

```
 var js_status = $("#status").val(); 
```

它取第一个值。我究竟做错了什么？谢谢

PHP

```
$postStatus = filter_var($_POST["postStatus"], FILTER_SANITIZE_STRING); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:07:49.710

你给了他们两个相同的ID。当你通过ID搜索它时，它是参考哪一个？

你想要这样的东西：

```
var js_status = $('input[name=status]:checked').val() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:07:35.297

您正在选择 ID 为“状态”的单选按钮，它将始终是第一个按钮。.val() 只会给你 1 的值。

您正在寻找的是 CHECKED 单选按钮的当前值。如下所示。

```
$('input:radio[name=status]:checked').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:09:30.770

1）ID在您的页面中必须是唯一的

2）如果你想要选择的选项使用 ':checked' ：

```
var js_status = $('input[name="status"]:checked').val(); 
```

编辑：[链接](http://api.jquery.com/checked-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:11:38.783

尝试

```
var status = $("#status input[type='radio']:checked").val();

or 

var status = $("input[type='radio'][name='status']:checked").val(); 
```

# mysql - 是一样的使用|| 代替 OR 和 && 而不是 MYSQL 中的 AND？

> ID：13876378
> 
> 赞同：0
> 
> 时间：2012-12-14T09:59:29.590
> 
> 标签：mysql, comparison-operators

我的问题是标题中所述的问题：“在 MYSQL 中使用 || 代替 OR 和 && 代替 AND 是否相同？”

我知道通常您在 SQL 中使用“AND”或“OR”作为比较运算符，但它（似乎）也适用于“&&”和“||” （如 Java/Javascript 等）在 MYSQL 中。那是对的吗？

谢谢你的夸奖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:14:11.667

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:01:22.263

是：[http ://dev.mysql.com/doc/refman/5.0/en/logical-operators.html](http://dev.mysql.com/doc/refman/5.0/en/logical-operators.html)

该手册非常详尽:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:01:50.220

看看[http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)是一样的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:02:11.480

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/non-typed-operators.html "文档")，是的，它是一样的。

# eclipse - 在 Eclipse CDT 中禁用自动“更新项目...”操作

> ID：13876380
> 
> 赞同：1
> 
> 时间：2012-12-14T09:59:30.020
> 
> 标签：eclipse, eclipse-cdt

我在 Eclipse 中使用了一个相当大的项目，由不同的库组成，这些库可以独立构建，这要归功于专用的“Make Target”元素。编译其中一个库时，编译工作正常，但之后，Eclipse 忙于“构建目标。更新项目......”（如进度视图中所命名）。由于我的项目相当大，这个操作需要几分钟，阻止我开始新的编译或更改 Eclipse 设置。有什么方法可以在 Eclipse 中禁用此自动更新？

我在 Eclipse Helios 和 Eclipse Juno 中观察到了这种行为。

* * *

我试图删除我的“Make target”对象，并提供无效的 C/C++ Build 配置（例如，提供无效的 make 命令）。正如预期的那样，在构建项目时，Eclipse 尝试执行无效的 make 命令（失败），但随后继续执行此“更新项目......”无论如何......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T23:34:24.900

构建后 Eclipse 正在寻找新创建的可执行文件。如果您的项目是基于 Makefile 的，Eclipse 无法确定在哪里搜索和浏览整个源代码树。假设您的可执行文件都进入文件夹 bin-XXX，您可以减少这些搜索，如下所示：

1.  选择顶部项目（比如“src”）并转到右侧菜单对话框“Properties”（或者：顶部菜单 Project-Properties）。然后转到“C++ build”-“Refresh policy”。在这里选择文件夹“src”，然后按“添加例外”。然后将除“bin-XXX”之外的所有文件夹添加为例外。

2.  选择顶部项目“src”并转到右侧菜单对话框“Properties”（或者：顶部菜单 Project-Properties）。然后转到“C++ 常规 - 路径和符号 - 输出位置”。添加文件夹“bin-XXX”并删除文件夹“src”</p>

# c# - Socket编程控制客户端数量

> ID：13876382
> 
> 赞同：0
> 
> 时间：2012-12-14T09:59:30.160
> 
> 标签：c#, sql-server-2005, sockets

我正在开发一个 C# 数据库应用程序。我使用 SQL Server 2005 作为后端，使用 C# .NET 2010 作为前端。

我的应用程序安装在每台客户端机器上。当数据库更新时，我系统的所有客户端都会通过 SQL Server 事件依赖技术得到通知。

但现在我想控制连接到服务器的客户端数量。那就是我只想授予 3 个客户端的访问权限。为此，我想使用套接字编程在我的应用程序中添加一些客户端/服务器代码。

请在这个问题上指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:16:54.833

从MSDN 上的[SqlDependency 类：](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)

*SqlDependency 设计用于 ASP.NET 或中间层服务，在这些服务中，相对少量的服务器对数据库具有活动的依赖项。**它不是为在客户端应用程序中使用而设计的，在客户端应用程序**中，成百上千的客户端计算机将为单个数据库服务器设置 SqlDependency 对象。如果您正在开发的应用程序在数据更改时需要可靠的亚秒级通知，请查看SQL Server 联机丛书中的“[规划通知](http://msdn.microsoft.com/en-us/library/ms187528.aspx)”主题中的规划有效的查询通知策略和查询通知的替代方案部分。*

在您的特定场景中，我想拥有一个中间层服务器来管理客户端机器并将使用它`SQLDependency`来通知数据库中的更改是一个好主意。然后，它将按照您期望的逻辑将通知推送到*n 个客户端机器的批次。*

# objective-c - 为 BeaaS 创建一个包装器（Parse/Stackmob/...）

> ID：13876388
> 
> 赞同：5
> 
> 时间：2012-12-14T09:59:56.447
> 
> 标签：objective-c, ios, parsing, wrapper, stackmob

我目前正在使用 Parse 开发一个应用程序，我想开始抽象他们的 SDK，因为我不知道我是否以及何时将他们的后端替换为其他提供商或我们的另一个提供商。

另一个动机是分离问题：我所有的应用程序代码都将使用相同的框架，而我可以针对任何后端细节更新框架。

我首先创建了一些通用类来替换它们的主类。这个通用类定义了每个适配器必须实现的协议。然后我会有一个 Parse 适配器，它将调用转发到 Parse SDK。

我可以预测的一些问题是，这将需要很多不同的类。在某些情况下，例如 Parse，他们也有处理 Facebook 的类。或者某些部分的架构可能如此不同，以至于没有共同点来允许这样的事情。

实际上，我从未像使用 Parse 那样使用 Stackmob，所以我猜第一个版本将共享 Parse 自己的架构。

*   这样的最佳实践是什么？
*   外面有这样的东西吗？我已经搜索过但没有成功，但也许我看错了方向；
*   我应该坚持使用 Parse SDK 以确保使用它的代码得到很好的识别和包含吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:59:56.977

我是 Applicasa 的开发人员布道师。我们为移动应用程序开发人员构建了一套很酷的工具，其中一部分包括提供 BaaS 服务，与 Parse、StackMob 等相比，该服务采用了一些不同的方法。我认为它为解决从第三方 SDK API 中抽象出来的问题提供了一个有用的视角，这种方式允许您用其他提供商或您自己的提供商替换后端。/免责声明

> 外面有这样的东西吗？我已经搜索但没有成功，但也许我看错了方向

虽然有其他 BaaS 提供商提供类似和差异化的功能，但我不知道有一种产品以不可知的方式完全抽象出第三方提供商。

> 这样的最佳实践是什么？

我认为您已经为朝着正确的方向开始奠定了坚实的基础。

首先，您的预测是正确的，您最终会得到许多不同的类，这些类以与后端无关的方式封装对象和所需的功能。当然，数量取决于您所追求的抽象和封装类型。您概述的方法听起来也像我开始这样一个项目的方式 - 为我的应用程序需要与之交互的所有对象创建类，并在这些类（或它们都扩展的基类）上实现自定义方法这将完成与后端提供者交互的实际工作。

因此，如果我正在构建一个应用程序，例如，具有`Foo`、`Bar`和`Baz`对象，我将创建这些类作为我的内部 API 的一部分，并具有我的应用程序所需的所有必要功能。所有应用程序逻辑和功能操作都只会与这些类交互，并且所有应用程序逻辑和功能都与数据后端无关（这意味着没有内部功能可以依赖于数据后端，但对象类将提供一致的接口，允许操作执行，同时保持数据处理方法私有）。

然后，我可能会让每个类都从一个类继承`BaseObject`，其中包括实际与数据后端（基于提供程序或我自己的自定义远程后端）对话的方法。`BaseObject`该类可能具有`saveObject`, `getById:`,之类的方法`getObjects`（带有一些用于执行对象过滤/搜索的适当参数）。然后，当我将来想替换我的后端数据服务时，我只需要专注于更新`BaseObject`处理数据交互的类方法，而我所有的应用程序逻辑和功能都与`Foo`、`Bar`和`Baz`类相关联，并且不实际上并不关心获取/保存/更新/删除操作如何在幕后工作。

现在，为了让自己尽可能轻松，我将构建我的 BaaS 模式以匹配内部对象类名称（根据 BaaS 要求，我可以使用 an`isKindOfClass:`或`NSStringFromClass:`调用）。这意味着如果我使用 Parse，我想让我的`save`方法获取`NSStringFromClass:`类名的 ，以执行数据操作。如果我正在使用像 Applicasa 这样的服务，它会生成用于数据交互的本地对象的自定义 SDK，我希望基于`isKindOfClass:`结果的自定义数据操作。如果我想要比这**更大的**灵活性（可能允许使用多个后端提供程序，或者其他一些复杂的要求），我会让所有子类`BaseObject`通过某种自定义方法准确地告诉数据操作使用什么模式名称， 像`getSchemaName`. 我可能会将其定义为`BaseObject`默认情况下将类名作为字符串返回的方法，然后在子类上实现以进一步自定义。因此，`BaseObject` `save`方法的内部可能看起来像这样：

```
- (BOOL) save {
  // call backend-specific method for saving an object
  BaasProviderObject *objectToSave = [BaasProviderObject
                                      objectWithClassName:[self getSchemaName]];

  // Transfer all object properties to BaasProviderObject properties
  // Implement however it makes the most sense for BaasProvider

  // After you've set all calling object properties to BaasProviderObject
  // key-value pairs or object properties, you call the BaasProvider's save
  [objectToSave save];

  // Return a BOOL value to indicate actual success/failure
  return YES;  // you'll want this to come from BaaS
} 
```

然后在`Foo`类中，我可能会`getSchemaName`这样实现：

```
- (NSString) getSchemaName {
  // Return a custom NSString for BaasProvider schema
  return @"dbFoo";
} 
```

我希望这是有道理的。

> 我应该坚持使用 Parse SDK 以确保使用它的代码得到很好的识别和包含吗？

进行这样的内部抽象将是大量的前期工作，但它不可避免地会提供很大的灵活性，可以按照您的意愿实现。你可以实现 CoreData，拒绝 CoreData，做任何你想做的事。以与数据无关的方式构建内部应用程序逻辑/功能具有明显的优势，即使它可以让您轻松地在应用程序代码的自定义分支中尝试另一个 BaaS，以了解您对另一个提供商的喜爱程度（或为您提供开发自己的数据解决方案的简单途径）。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:27:44.907

我是 StackMob 的平台宣传员，我想我会加入这个问题。我们使用 Core Data 接口构建了我们的 iOS SDK。您将使用常规的核心数据，并且我们已经覆盖了 NSIncremental 存储以持久保存到 StackMob 而不是 SQLLite。

您可以查看 Core Data 代码的示例。
[http://developer.stackmob.com/tutorials/ios/Create-an-Object](http://developer.stackmob.com/tutorials/ios/Create-an-Object)

如果您想查看 Core Data 使用哪些方法与 StackMob 进行通信。 [http://developer.stackmob.com/tutorials/ios/Lower-Level-CRUD-API](http://developer.stackmob.com/tutorials/ios/Lower-Level-CRUD-API)

# winforms - WinForm 的 FormClosing 事件不会被触发是否有原因？

> ID：13876395
> 
> 赞同：1
> 
> 时间：2012-12-14T10:00:20.627
> 
> 标签：winforms

我有一个订阅 FormClosing 事件的 WinForm。当我单击 X 时，将触发事件。但是，在 WinForm 上执行 Close() 时，不会触发该事件。此 WinForm 从未显示过。这可能是原因吗？

事件处理程序在 WinForm 的构造函数中订阅（而不是在 Onload 中），因此它们已被注册。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:40:06.743

这是设计使然，FormClosing 只有在您实际使表单可见时才会触发。或者更准确地说，是在创建本机 Windows 窗口时。如果您从未调用过 Show()，则 Close() 根本不会做任何事情。您只创建了类对象，FormClosing 不能替代析构函数。

# c# - 在datagridview c#的组合框列中添加值时遇到问题

> ID：13876399
> 
> 赞同：0
> 
> 时间：2012-12-14T10:00:31.993
> 
> 标签：c#, datagridview, datagridviewcolumn

我有一个datagridview，在这个datagirdview中，我添加了两个未绑定的列，一个是组合框，第二个是文本框类型的列，除此之外，我还有一些行的数据表。

我正在用我的数据表设置网格数据源，然后我试图向组合框控件添加值，它应该显示三个值（卡车、飞机、船舶）

当网格加载时它显示商店，但组合框中没有值，我尝试了各种方法，例如创建组合框数据列并通过绑定数据表向其添加值，我还尝试通过在设计器和代码中添加 column.items 但组合框永远不会得到价值。

作为一个实验，我也试图通过下面的代码添加一个新列，但第二列也没有显示任何值。

```
DataGridViewComboBoxColumn dgvcbc = new DataGridViewComboBoxColumn();
        DataTable dt = new DataTable();
        dt.Columns.Add("Media", typeof(string));
        dt.Rows.Add("Truck");
        dt.Rows.Add("Car");
        dgvcbc.DataSource = dt;
        dgvcbc.DisplayMember = "Media";
        dgvcbc.ValueMember = "Media";
        this.grdDestShops.Columns.Add(dgvcbc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:26:42.657

认为这解决了你的问题..

```
namespace activator
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
       {
        DataTable dt = new DataTable();
        dt.Columns.Add("Media", typeof(string));
        dt.Rows.Add("Truck");
        dt.Rows.Add("Car");            
        ComboBox combo = new ComboBox();
        List<string> media=(from x in dt.AsEnumerable()
                            select x.Field<string>(0)).ToList();
        combo.DataSource = media;
        dataGridView1.Controls.Add(combo);           
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:08:05.983

您的代码正在添加一个新列！，如果您在设计模式中添加了一个 ComboBox 列，为什么不使用`FindControl`函数找到它然后绑定它？

# c# - 抓住浏览器关闭

> ID：13876403
> 
> 赞同：0
> 
> 时间：2012-12-14T10:00:40.377
> 
> 标签：c#, javascript, asp.net, session, browser

我需要知道是否有可能捕获关闭浏览器窗口的用户。我尝试过使用`<body onbeforeunload="run_closeScripts()">`which 工作正常，但这会在每次回发时触发！因此，如果用户点击刷新按钮或转到另一个页面，它没有多大用处。

有没有一种可靠的方法来检测它是否是一个完整的浏览器关闭而不是回发？

```
<body onbeforeunload="run_closeScripts()">

<script type="text/javascript">

    function run_closeScripts() {

        //check if the browser is closing and not a postback
        window.alert("Your checkout will be removed!");
        window.location.replace("Exit.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:06:26.913

做到这一点的唯一方法是使用 JavaScript，你可以用[谷歌搜索](https://www.google.co.uk/search?q=detect%20browser%20close%20javascript&aq=f&oq=detect%20browser%20close%20javascript&aqs=chrome.0.57j0j60l2j0l2.4963&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)，但是值得注意的是，你不能依赖 JavaScript 运行。不要把你需要发生的东西放进去，因为你不能依赖它。

# starteam - StarTeam 合并更改

> ID：13876406
> 
> 赞同：2
> 
> 时间：2012-12-14T10:00:46.453
> 
> 标签：starteam

我是 StarTeam 的新手，之前在项目中使用过 Subversion。为了了解变更包是如何工作的，我做了一些实验——但并没有完全得到我想要的结果。

我尝试执行以下步骤：（我有 2 个视图，一个称为“主干”，一个称为 branch1.1，它是主干的子级）

1.  主干：使用内容“A”创建文件 TestMerge.txt
2.  主干：TestMerge.Txt -> 添加内容为“B”的新行
3.  主干：TestMerge.Txt -> 添加内容为“C”的新行我转到“显示更改透视图”并找到我的 3 个签到。

    *   我选择1和3，右键，高级，查看比较/合并。
    *   我选择以主干作为源和分支1.1 作为目标的变基。
    *   在包含下，我选择“选定的更改包”。
    *   我不更改选项或属性。
    *   完成现在会弹出一个名为“Rebase from trunk”的窗口
    *   TestMerge.txt 具有合并状态：已解决，合并操作：忽略。
    *   我只能将其更改为“共享”（如果它被忽略，我将无法提交，因为没有任何更改）。

当我提交这些更改时，branch1.1 现在包含一个名为 TestMerge.txt 的文件 - 但是该文件包含 AB 和 C。

我只希望它包含 A+C，因为我没有要求将我的第二次提交包含在更改包中。

这只是 StarTeam（不）工作的方式，还是在某个地方我可以得到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:12:24.793

StarTeam 不支持在*同一视图中合并**同一文件*的两个版本， 尤其是不通过“*更改数据包*”过程或“*视图比较/合并*”工具。

 ***“ *Change-Packets* ”过程和“ *View Compare/Merge* ”工具设计
用于合并来自不同视图的文件和文件夹。

（尝试使用位于不同视图中的相同文件的两个版本。）***

# android - 如何将 Mathml 转换为 ASCII 码

> ID：13876408
> 
> 赞同：0
> 
> 时间：2012-12-14T10:00:52.683
> 
> 标签：android, ascii, mathml

我检查了许多转换工具，但有人可以建议我

```
PAID OR FREE mathml to ASCII converter or any tool 
```

在android中显示数学方程`textView.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:12:49.377

[http://mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html)上的jqMath是一个您可以使用的 JavaScript 库。

由于它在 javascript 中，您可以使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)来呈现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:21:14.437

您可以从 www.wiris.com 访问解决方案。使用 WIRIS 编辑器，您可以将 MathML 转换为适合在任何浏览器和任何应用程序中显示的 PNG 图像，特别是也适用于 android。

不清楚你所说的 mathml 到 ASCII 是什么意思。作为可访问性解决方案的一部分，WIRIS 工具可以生成公式的文本表示。例如，对于 ½，“ascii”版本将是“1 over 2”。

# javascript - 检测用户设备并在js/jquery中分配不同的jquery（桌面/移动（ipad））？

> ID：13876411
> 
> 赞同：1
> 
> 时间：2012-12-14T10:01:05.540
> 
> 标签：javascript, jquery, device

```
<script src="jsv3/jquery.js"></script>
<!--<script src="jsv3/jquery.mobile-1.2.0.min.js"></script>--> 
```

目前我只有桌面版的插入脚本，因为我发现声明两个jquery会发生错误。有没有办法检查设备类型并为相应的设备选择不同的 jquery 插件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:13:03.377

有很多方法可以检测客户端。以下示例涉及`userAgent`检测客户端设备的类型。

```
 $(document).ready(function(e) {

        if(navigator.userAgent.match(/Android/i)
             || navigator.userAgent.match(/webOS/i)
             || navigator.userAgent.match(/iPhone/i)
             || navigator.userAgent.match(/iPad/i)
             || navigator.userAgent.match(/iPod/i)
             || navigator.userAgent.match(/BlackBerry/i)
             || navigator.userAgent.match(/Windows Phone/i)) {

          var file=document.createElement("link");
          file.setAttribute("rel", "stylesheet");
          file.setAttribute("type", "text/css");
          file.setAttribute("href", "css/alternate_css_file.css");
          document.getElementsByTagName("head")[0].appendChild(file);

          var file_2= document.createElement("script");
          file_2.setAttribute("type", "text/javascript");
          file_2.setAttribute("src", "js/alternate_js_file.js");
          document.getElementsByTagName("head")[0].appendChild(file_2);

    }

    }); 
```

这是检测客户端设备的通用解决方案。您可能必须为 iPad 等平板电脑客户端使用不同的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:14:29.327

```
if (navigator.userAgent=="<type>"){ //check your device type

  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 } 
```

高温高压

# javascript - jquery datepicker 不适用于克隆的元素

> ID：13876412
> 
> 赞同：6
> 
> 时间：2012-12-14T10:01:06.190
> 
> 标签：javascript, jquery, jquery-ui-datepicker

`Add`我有一个 jquery 日期选择器字段，当用户单击按钮时我正在克隆它。我希望日期选择器出现在屏幕上随后添加的字段中。现在日期选择器只出现在第一个字段和`not for the added/cloned fields`.

在检查了很多关于类似主题的帖子之后，我能够达到这个阶段。以下是我到目前为止的代码。

```
<div class="repeatingSection">
<a href="#" class="deleteDate" style="display: none;">-Delete</a>
<input type="text" class="dateListValues" style="position: relative; z-index:100000;" 
       id="dateListValues_1" size="15" />
</div>
<a href="#" class="addDate">+ Add</a> 
```

JS：

```
// Add a new repeating section
$('.addDate').click(function(){
    var currentCount =  $('.repeatingSection').length;
    var newCount = currentCount+1;
    var newID;
    var lastRepeatingGroup = $('.repeatingSection').last();
    var newSection = lastRepeatingGroup.clone();
    newSection.insertAfter(lastRepeatingGroup);
    newSection.find("input").each(function (index, input) {
        input.id = input.id.replace("_" + currentCount, "_" + newCount);
        input.name = input.name.replace("_" + currentCount, "_" + newCount);
        input.value = "";
            //removing the additional hasDatepicker class 
        $('#'+input.id).removeClass('hasDatepicker');
    });

    return false;
});

   $('.dateListValues').each(function(){
    $(this).datepicker();
   }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:08:00.710

您需要`datepicker`在新创建的元素上初始化插件。尝试在您之前添加此行`return false;`：

```
newSection.find(".dateListValues").datepicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:10:05.380

在点击函数中初始化日期选择器..

```
$('.addDate').click(function(){
var currentCount =  $('.repeatingSection').length;
var newCount = currentCount+1;
var newID;
var lastRepeatingGroup = $('.repeatingSection').last();
var newSection = lastRepeatingGroup.clone();
newSection.insertAfter(lastRepeatingGroup);
newSection.find("input").each(function (index, input) {
    input.id = input.id.replace("_" + currentCount, "_" + newCount);
    input.name = input.name.replace("_" + currentCount, "_" + newCount);
    input.value = "";
        //removing the additional hasDatepicker class 
    $('#'+input.id).removeClass('hasDatepicker');

});
  newSection.find(".dateListValues").datepicker(); //here
  return false;
}); 
```

# git - 使用 git 时如何告诉 TeamCity 将合并视为一次提交？

> ID：13876417
> 
> 赞同：31
> 
> 时间：2012-12-14T10:01:35.877
> 
> 标签：git, continuous-integration, teamcity

我们最近从 SVN 迁移到了 git。我们使用主要的“发布”分支（主），以及开发人员正在处理的每个功能的功能分支。在[TeamCity](http://www.jetbrains.com/teamcity/)中，我们为每个功能分支都有一个项目，当然还有一个主项目。

当我们使用 SVN 时，每当有人从 master 合并到他的特性分支或反之亦然时，TeamCity 将合并视为一次提交。现在，使用 git，每次合并都会导致 TeamCity 显示此合并附带的所有提交。

这会导致一些问题，例如当某人从 master 合并到他的功能分支时，现在他的 TeamCity 项目由于该合并而显示“283 个未决更改”，如果构建失败，这些更改的作者将被通知，就好像他们做了一样功能分支上的这些更改。

有没有办法告诉 TeamCity 将 git 合并视为单一提交？

我们可以使用压缩合并来解决它，但这是我们真正想要避免的事情。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-21T15:48:19.243

我很确定这与我们几天前遇到的问题相同，反之亦然。我们将一个 dev 分支合并到 master 中，这导致 TC 尝试构建作为合并一部分的每个签入。显然不是我们想要的。

要修复它，请`Trigger build on each check-in`在`Build Trigger`.

您可以从源分支获取完整的更改历史记录，但 TeamCity 只会使用最新的合并代码构建目标分支。如果构建失败，合并应该是唯一通知的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T01:38:52.180

这是一个很长的镜头，您可能已经尝试过，但是将`per check-in`触发选项应用于 是否可行`Include several check-ins in build if they are from the same committer`？这可能足以诱使 TC 将提交构建为单个包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T16:56:55.430

这是两种可能的解决方案：

1.  解决此问题的一种方法（尽管可能非常尴尬，取决于您的情况）是在构建配置级别通知用户，而不是通知谁提交/合并。为不同的主题分支创建单独的构建配置，并为每个构建配置配置通知，以便只通知主题分支的“所有者”。

2.  不太确定，但值得一试：您可以为每个主题分支配置通知，例如通过分支路径上的通配符模式。这应该可以通过使用分支名称属性 [teamcity.build.vcs.branch.<my_vcs_name>的 DYI](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.1#What%27sNewinTeamCity7.1-VCSbranchparameter)*自定义通知插件来*实现。

TeamCity 电子邮件通知的一个特定限制（应该很容易支持）是您不能通过*组合*构建配置和“忽略不是由我的更改引起的失败”来过滤通知。然后至少您可以为主分支配置构建，以便通知提交者，并仅为主题分支项目创建特定设置。

# c# - 修复自定义控件之间的关键处理冲突，以防表单上有多个控件？

> ID：13876418
> 
> 赞同：-2
> 
> 时间：2012-12-14T10:01:36.520
> 
> 标签：c#

我制作了一个自定义文本编辑器控件，它处理箭头键。问题是当表单中有多个控件时，箭头键处理排队：第一次使用焦点控件处理事件，下一次使用另一个自定义控件，然后再次使用焦点控件等等。那么我应该怎么做才能只使用自定义文本编辑器控件而不是表单上的所有控件来处理箭头键呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:05:06.590

您应该使用 KeyEventArgs 对象进行处理。使用键事件的任何控件都应将 KeyEventArgs.Handled 属性设置为 true 以指示它们已这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:00:45.600

一个问题实际上是因为 WinForm 导航带有箭头键。所以我禁用了我的文本编辑器的导航。对于该 OnPreviewKeyDown 事件，如示例中所示：

```
 protected override void OnPreviewKeyDown(PreviewKeyDownEventArgs e)
    {
        base.OnPreviewKeyDown(e);

        switch (e.KeyCode)
        {
            case Keys.Up:
            case Keys.Down:
            case Keys.Left:
            case Keys.Right:
                e.IsInputKey = true;
                break;
            default:
                break;
        }
    } 
```

# javascript - 在 try 块、nodeJS、JavaScript 之外抛出异常

> ID：13876419
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:01:39.800
> 
> 标签：javascript, node.js, exception, try-catch, block

是否可以在块外抛出异常`try`？如果我没记错的话，`Java`您可以将函数声明`throws`为异常，然后将其抛出函数链，`try/catch`函数内部没有。有没有类似的方法`nodeJS`？

另外，我注意到，如果我尝试将异常从回调函数抛出到代码中调用它的位置，我将无法做到。我知道可以使用 解决它`domains`，但我仍然不知道。我对吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:13:22.073

在 javascript 中，您可以从任何地方抛出异常：

阅读[MDN：抛出](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Statements#throw_Statement)

为了更好地理解错误处理，[请参阅](https://developer.mozilla.org/en-US/docs/JavaScript/Reference)并搜索“错误构造函数”

# javascript - 如何检查 JavaScript 中的字符串并返回布尔值？

> ID：13876420
> 
> 赞同：-4
> 
> 时间：2012-12-14T10:01:42.263
> 
> 标签：javascript, vbscript

如何将以下语句转换为 JavaScript？

```
Set oTextRange = frmSearch.OrderNumList.createTextRange()
lFound = oTextRange.FindText(aOrderNumList(nI)) 
```

`lFound`应该是一个布尔值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:04:14.183

```
var lFound = oTextRange.indexOf(aOrderNumList(nI))!=-1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:05:18.087

看一下[`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)

SO 不是代码示例站点，但我们可以帮助您朝着正确的方向前进。

# asp.net - 如何在 vb.net 中将日期从字符串转换为日期？

> ID：13876423
> 
> 赞同：0
> 
> 时间：2012-12-14T10:01:55.213
> 
> 标签：asp.net, vb.net

我有字符串格式的日期，如“14-12-2012”。将日期从字符串转换为日期后，它给出的是这样的“#12/14/2012#”

然后我试图将日期保存在数据库中，它给出了错误。

`Dim queryString As String = "UPDATE [ARIBA_CUST_ADMIN] SET [CUST_CRED_ID] = '" + eCustomer.CUST_CRED_ID + "',[CUST_NAME] = '" + eCustomer.CUST_NAME + "',[STREET1] = '" + eCustomer.STREET1 + "',[STREET2] = '" + eCustomer.STREET2 + "',[CITY] = '" + eCustomer.CITY + "',[State] = '" + eCustomer.STATE + "',[POSTAL_CD] = '" + eCustomer.POSTAL_CD + "',[COUNTRY] = '" + eCustomer.COUNTRY + "',[CUST_CRED_DOMAIN] = '" + eCustomer.CUST_CRED_DOMAIN + "',[SUBCHARGE] = '" + eCustomer.SUBCHARGE + "',[TAX_AT_LINE] = '" + eCustomer.TAX_AT_LINE + "',[PO_FLIP] = '" + eCustomer.PO_FLIP + "',[STATUS] = '" + eCustomer.STATUS + "',[CONFIMRATIONS] = '" + eCustomer.CONFIMRATIONS + "',[SHOP_NOTICES] = '" + eCustomer.SHOP_NOTICES + "',[INVOICE_TYPE] = '" + eCustomer.INVOICE_TYPE + "',[EFFECTIVE_DATE] = " + eCustomer.EFFECTIVE_DATE + ",[DISTRIBUTION_XML] = '" + eCustomer.DISTRIBUTION_XML + "' WHERE [CUST_ID] = " + eCustomer.CUST_ID`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:22:09.173

您应该使用参数化查询，然后您无需担心特定格式，您只需将日期作为参数传递（假设您的数据库列是日期类型 - 如果不是，则应该是）：

沿着这些思路

```
Dim d as Date= new Date(2012, 12, 3)'or ParseExact from a string in a known format
Dim sql As String = "INSERT INTO foo (DateValue) VALUES (@DateValue)"

Using cn As New SqlConnection("Your connection string here"), _
    cmd As New SqlCommand(sql, cn)

    cmd.Parameters.Add("@DateValue", SqlDbTypes.Date).Value = d
    cmd.ExecuteNonQuery
End Using 
```

看看[这个问题](https://stackoverflow.com/questions/542510/how-do-i-create-a-parameterized-sql-query-why-should-i)以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:03:38.690

```
Dim dateString, format As String
        Dim result As Date
        Dim provider As Globalization.CultureInfo = Globalization.CultureInfo.InvariantCulture

        ' Parse date and time with custom specifier.
        dateString = "20121216"
        format = "yyyyMMdd"

        result = Date.ParseExact(dateString, format, provider) 
```

这将以您在格式变量中指定的任何格式输出日期。

**对于您希望使用的日期格式：**

```
format = "dd-MM-yyyy" 
```

# sorting - Lucene.Net 是先排序再过滤，还是先过滤再排序？

> ID：13876427
> 
> 赞同：0
> 
> 时间：2012-12-14T10:02:21.777
> 
> 标签：sorting, filtering, lucene.net

我们正在使用 Lucene.Net [IndexSearch.Search](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/search/IndexSearcher.html#search%28org.apache.lucene.search.Weight,%20org.apache.lucene.search.Filter,%20int,%20org.apache.lucene.search.Sort%29)方法。我们正在传递一个过滤器和一个排序，但我们看到了一些奇怪的行为。逻辑告诉我，出于性能原因，过滤将在排序之前完成，但想确保。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:05:09.187

过滤然后排序。

Lucene 中的排序是通过将文档按顺序收集到队列中来完成的。它保留前 X 个文档，其中 X 是您要求的最大结果数。`Filter`收集者不会比较与或不匹配的文件`Query`。

当您不指定排序时，分数用于将文档优先排序到队列中，如果您使用排序，则使用您要求的排序的比较器。

如果您更好奇，请查看`Collector`源代码中的不同类，Collect() 方法包含您想要的所有信息。

# c# - 将值从弹出窗口传递到父窗口

> ID：13876428
> 
> 赞同：0
> 
> 时间：2012-12-14T10:02:25.620
> 
> 标签：c#, javascript, asp.net, c#-4.0, query-string

我创建了一个带有按钮的页面（creation.aspx）。当我单击按钮时，会在新的浏览器窗口中打开一个弹出页面（pass.aspx）。在弹出窗口中进行一些操作，然后单击弹出窗口中的提交按钮。但我有一个疑问。我想将值从弹出窗口传输到父窗口。

不管有没有可能。如果可能意味着如何？请帮我解决这个问题。

在父页面中：

```
<asp:ImageButton ID="img_pass" style="vertical-align:bottom;" runat="server" OnClientClick= "window.open('pass.aspx','','location=0,resizable=0,ScrollBars=1,statusbar=1,width=550,height=550,left=20,top=10,moveable=0') ;return false;" ImageUrl="~/images/bnt_pass.png" Width="20px" Height="20px" /> 
```

在弹出窗口中：

```
Response.Redirect("creation.aspx?id =" + value1.Text + "&" + value.Text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:14:40.117

```
string redirectUrl = "creation.aspx?id =" + value1.Text + "&" + value.Text;
ScriptManager.RegisterStartupScript(this, GetType(), "Redirect", "window.parent.location = " + redirectUrl , true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:15:22.197

使用`Session`变量将值从一页传递到另一页。（即）`Session[""]`在弹出页面的服务器端事件（buttonclick、dropdownchanged 等）中保存所需的值，并使用`Session[""]`父页面中的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T21:46:55.607

您可以使用以下 javascript 代码将值返回到父窗口。

函数 fnOk() {

```
 top.returnValue = "Data";
    window.close();
    return true;

} 
```

# python - 在 matplotlib 1.20 中显示 quvier 密钥和补丁的错误的解决方法

> ID：13876441
> 
> 赞同：1
> 
> 时间：2012-12-14T10:03:52.043
> 
> 标签：python, numpy, matplotlib

嘿嘿，

我正在使用与 macports 一起分发的最新版本（1.2.0）的 matplotlib。我遇到了运行此代码的 AssertionError（我猜是内部测试引起的）

```
#!/usr/bin/env python

import numpy as np
import matplotlib.pyplot as plt

X,Y = np.meshgrid(np.arange(0, 2*np.pi, .2), np.arange(0, 2*np.pi, .2))
U = np.cos(X)
V = np.sin(Y)

Q = plt.quiver(U, V)
plt.quiverkey(Q, 0.5, .9, 1., 'Label')

plt.gca().add_patch(plt.Circle((10, 10), 1))
plt.savefig('test.pdf') 
```

我需要此代码的三个部分来重现错误：

1.  quiver plot 必须有一个用 quiver key 创建的键
2.  必须向当前轴添加额外的补丁
3.  我必须将图形保存为 PDF（我可以很好地显示它）

该错误不依赖于后端。我得到的回溯读取

```
Traceback (most recent call last):
  File "./test_quiver.py", line 15, in <module>
    plt.savefig('test.pdf')
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/pyplot.py", line 472, in savefig
    return fig.savefig(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/figure.py", line 1363, in savefig
    self.canvas.print_figure(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py", line 2093, in print_figure
    **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.py", line 1845, in print_pdf
    return pdf.print_pdf(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_pdf.py", line 2301, in print_pdf
    self.figure.draw(renderer)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/figure.py", line 999, in draw
    func(*args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.py", line 2086, in draw
    a.draw(renderer)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/quiver.py", line 306, in draw
    self.vector.draw(renderer)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/collections.py", line 755, in draw
    return Collection.draw(self, renderer)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py", line 54, in draw_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/collections.py", line 259, in draw
    self._offset_position)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_pdf.py", line 1548, in draw_path_collection
    output(*self.gc.pop())
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_pdf.py", line 2093, in pop
    assert self.parent is not None
AssertionError 
```

如果它很重要：我在 Mac OS X 10.7.5 上，使用 python 2.7.3 和 matplotlib 1.2.0。你也得到这个错误吗？它是 matplotlib 中的错误吗？它依赖于系统吗？有一些解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:14:47.623

您可以保存为 eps 或 svg 并转换为 pdf。我发现生成小 pdf 文件的最佳方法是在 matplotlib 中另存为 eps，然后使用 epstopdf。

svg 也可以正常工作，您可以使用 Inkscape 转换为 pdf。svg 的一个副作用是文本被转换为路径（没有嵌入字体），这在某些情况下可能是可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T03:46:23.063

与 Ubuntu 13.04（稀有）一起分发的 matplotlib（v 1.2.1）也有这个错误。我不知道在新版本中它是否仍然是一个问题。

另一个解决方法（似乎对我有用）是完全`draw_path_collection`删除`.../matplotlib/backends/backend_pdf.py`.

# c# - 对流的困惑

> ID：13876444
> 
> 赞同：2
> 
> 时间：2012-12-14T10:04:06.677
> 
> 标签：c#, stream

我正在尝试从 SharePoint 下载文件。经过一番研究，我得到了这个，它说如果我们使用缓冲区，性能会更好。

备注 - 文件是 SPFile

```
using (System.IO.Stream strm = file.OpenBinaryStream())
{
    byte[] buffer = new byte[BUFFER_SIZE];
    int bytesRead;
    do
    {
        bytesRead = strm.Read(buffer, 0, BUFFER_SIZE);
        response.OutputStream.Write(buffer, 0, bytesRead);
        response.Flush();
    } while (bytesRead > 0);
} 
```

一旦我们分配 like `response.BinaryWrite(file.OpenBinary());`，我们是否在 strm 对象中获取整个流（开始消耗 RAM）？假设文件是​​ 10MB ，那么这个 strm 在 RAM 中会是 10 MB 吗？

或者一旦我们开始阅读它就会开始消耗内存？`bytesRead = strm.Read(buffer, 0, BUFFER_SIZE);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:07:49.567

A`Stream`是管道，不是桶；它（通常）不“包含”数据——它只是管理对数据的*访问*。就示例而言，您的应用程序在任何时候加载的数据都是`BUFFER_SIZE`字节（加上任何其他层使用的任何其他缓冲区）。

您也不需要`Flush()`在每次写入时都这样做（尽管`Flush()`最后的 a 可能是合适的）。

你所拥有的很好；我唯一要说的是，您可以在最新版本的 .NET 中对此进行简化：

```
using (System.IO.Stream strm = file.OpenBinaryStream())
{
    strm.CopyTo(response);
    // response.Flush(); // optional: only included because it is in the question
} 
```

# android - 我的 Facebook 应用程序无法运行 android 2.1

> ID：13876450
> 
> 赞同：-3
> 
> 时间：2012-12-14T10:04:15.293
> 
> 标签：android, facebook

我在我的应用程序中使用 Facebook sdk 来获取用户个人资料信息，例如姓名、个人资料图片 URL。它在所有高于 android 2.2 但不适用于 android 2.1 的模拟器中工作。我没有得到用户的状态。请帮助我如何获取状态信息。请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:33:44.740

您需要安装 Android 2.2 (API 8) 组件才能使用 Facebook SDK。这意味着它在 Android 2.2 下无法工作
Source = [Facebook SDK for Android](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# iphone - 在每个段索引添加视图控制器内的段控制

> ID：13876451
> 
> 赞同：1
> 
> 时间：2012-12-14T10:04:17.753
> 
> 标签：iphone, objective-c, ios6, xcode4.5

每个 selectedSegmentIndex 添加不同的视图控制器。

在第一次segmentindex 点击，呈现新的视图控制器和第二段索引，呈现另一个视图控制器。

和段控制只显示底部。（不在导航栏中添加）。

段控制，因为它是可见的每个视图控制器（如标签栏控制器）。

我的问题是当新控制器弹出段控制器禁用时。需要帮助才能完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:15:24.397

在 .h 文件中尝试此代码添加

# 进口

```
@interface SegmentManagingViewController : UIViewController <UINavigationControllerDelegate> {
    UISegmentedControl    * segmentedControl;
    UIViewController      * activeViewController;
    NSArray               * segmentedViewControllers;
   IBOutlet UILabel *theLabel;
    IBOutlet UIImageView *image;
   }
//-(void)setTextColorsForSegmentedControl:(UISegmentedControl*)segmented;
@property (nonatomic, retain, readonly) IBOutlet UISegmentedControl * segmentedControl;
@property (nonatomic, retain, readonly) UIViewController * activeViewController;
@property (nonatomic, retain, readonly) NSArray * segmentedViewControllers;

@end 
```

在 .m 文件中添加

```
 #import "SegmentManagingViewController.h"
     #import "CategoryViewController.h"
     #import "AtoZViewController.h"

    @interface SegmentManagingViewController ()

    @property (nonatomic, retain, readwrite) IBOutlet UISegmentedControl * segmentedControl;
    @property (nonatomic, retain, readwrite) UIViewController            * activeViewController;
    @property (nonatomic, retain, readwrite) NSArray                     * segmentedViewControllers;
    - (void)didChangeSegmentControl:(UISegmentedControl *)control;
    - (NSArray *)segmentedViewControllerContent;

    @end

    @implementation SegmentManagingViewController

    @synthesize segmentedControl, activeViewController, segmentedViewControllers;

    - (void)viewDidLoad {
        [super viewDidLoad];
        self.navigationItem.title =@"Breadworks";
        //self.navigationItem.
        [image release];
        theLabel = [[UILabel alloc] initWithFrame:CGRectMake(140,-40,180,60)];
            theLabel.backgroundColor = [UIColor colorWithRed:120.0f/255.0f green:69.0f/255.0f blue:53.0f/255.0f alpha:1.0f ];

        [theLabel setFont:[UIFont fontWithName:@"Noteworthy " size:15]];
        //[self.view addSubview:theLabel];
        self.segmentedViewControllers = [self segmentedViewControllerContent];
        //self.navigationController.navigationBarHidden=YES;
        NSArray * segmentTitles = [self.segmentedViewControllers arrayByPerformingSelector:@selector(title)];
        self.segmentedControl = [[UISegmentedControl alloc] initWithItems:segmentTitles];
        self.segmentedControl.tintColor = [UIColor colorWithRed:255.0f/255.0f green:252.0f/255.0f blue:235.0f/255.0f alpha:1.0f];
        self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:120.0f/255.0f green:69.0f/255.0f blue:53.0f/255.0f alpha:1.0f ];
        self.segmentedControl.frame=CGRectMake(0,0,768, 73);
        self.segmentedControl.selectedSegmentIndex = 0;
        self.segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
        //self.navigationController.navigationBar.frame = CGRectMake(0, 0,760, 100);
        [self.segmentedControl addTarget:self
                                  action:@selector(didChangeSegmentControl:)
                        forControlEvents:UIControlEventValueChanged];
        self.view.frame = CGRectMake(0,4,330, 53);
        self.view.backgroundColor = [UIColor colorWithRed:255.0f/255.0f green:252.0f/255.0f blue:235.0f/255.0f alpha:1.0f];

       [segmentedControl setTitle:@"1" forSegmentAtIndex:0]
           [segmentedControl setTitle:@"2" forSegmentAtIndex:1];
           [self.view addSubview:segmentedControl];
        [self.segmentedControl release];

        [self didChangeSegmentControl:self.segmentedControl]; // kick everything off

    }

    - (NSArray *)segmentedViewControllerContent {

        UIViewController * controller1 = [[CategoryViewController alloc] initWithParentViewController:self];
        UIViewController * controller2 =[[AtoZViewController alloc] initWithParentViewController:self] ;
        NSArray * controllers = [NSArray arrayWithObjects:controller1, controller2, nil];

        [controller1 release];
        [controller2 release];

        return controllers;
    }

    #pragma mark -
    #pragma mark Segment control

    - (void)didChangeSegmentControl:(UISegmentedControl *)control {
        if (self.activeViewController) {
            [self.activeViewController viewWillDisappear:NO];
            [self.activeViewController.view removeFromSuperview];
            [self.activeViewController viewDidDisappear:NO];
        }
        //self.segmentedControl.frame=CGRectMake(5,4,300, 50);

        self.activeViewController = [self.segmentedViewControllers objectAtIndex:control.selectedSegmentIndex];

        [self.activeViewController viewWillAppear:NO];
        [self.view addSubview:self.activeViewController.view];
        [self.activeViewController viewDidAppear:NO];

        NSString * segmentTitle = [control titleForSegmentAtIndex:control.selectedSegmentIndex];
        self.navigationItem.backBarButtonItem  = [[UIBarButtonItem alloc] initWithTitle:segmentTitle style:UIBarButtonItemStylePlain target:nil action:nil];
        /*if(self.segmentedControl.selectedSegmentIndex == 0)
         {
         segmentedControl.tintColor = [UIColor colorWithRed:255.0f/255.0f green:252.0f/255.0f blue:235.0f/255.0f alpha:10.0f];
         }
         else
         {

         //self.segmentedControl.tintColor = [UIColor redColor];
         }*/
    }

    #pragma mark -
    #pragma mark View life cycle

    - (void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];
        [self.activeViewController viewWillAppear:animated];
    }

    - (void)viewDidAppear:(BOOL)animated {
        [super viewDidAppear:animated];
        [self.activeViewController viewDidAppear:animated];
    }

    - (void)viewWillDisappear:(BOOL)animated {
        [super viewWillDisappear:animated];
        [self.activeViewController viewWillDisappear:animated];
    }

    - (void)viewDidDisappear:(BOOL)animated {
        [super viewDidDisappear:animated];
        [self.activeViewController viewDidDisappear:animated];
    }

    #pragma mark -
    #pragma mark Memory management

    - (void)didReceiveMemoryWarning {
        [super didReceiveMemoryWarning];

        for (UIViewController * viewController in self.segmentedViewControllers) {
            [viewController didReceiveMemoryWarning];
        }
    }

    - (void)viewDidUnload {
        self.segmentedControl         = nil;
        self.segmentedViewControllers = nil;
        self.activeViewController     = nil;
        //[self.segmentedControl release];
        [super viewDidUnload];

    }

    @end 
```

# javascript - SignalR javascript客户端计时器锤击服务器以进行连接

> ID：13876457
> 
> 赞同：1
> 
> 时间：2012-12-14T10:04:34.623
> 
> 标签：javascript, signalr

我有一个 SignalR 的实现，它被用作聊天客户端。问题似乎是我有一个客户端计时器，它正在 ping 服务器以通知所有其他客户端用户的状态。

在这种情况下，我有一个心跳和一个最新的活动。心跳每隔 15 秒左右就会触发一次服务器，最新的活动会跟踪用户的交互性。这两个值被传递给服务器，以便所有其他客户端都可以收到其他人的状态通知。即：如果用户 A 超过一分钟没有移动鼠标，当他们的心跳到达服务器时，它将通过 SignalR 向所有其他用户广播他们现在“离开”..

无论如何，我有一个问题，SignalR 连接似乎呈指数增长，连接到聊天应用程序的用户数量越多。

这是我怀疑是可疑的客户端 js 计时器的来源，但我不确定为什么：

```
define(['jquery', 'underscore', 'backbone'],
function ($, _, Backbone) {

    var Timer = Backbone.Model.extend({
        defaults: {
            interval: 1 * 10 * 1000,
            timeout: null
        },

        initialize: function (options) {
            _.bindAll(this, 'start', 'tick', 'stop', 'tickNow');
            if (options.interval) {
                this.set('interval', options.interval);
            }
        },

        start: function () {
            var timer = setTimeout(this.tick, this.get('interval'));
            this.set('timeout', timer);
        },

        tick: function () {
            var self = this;
            self.trigger('timerexpired', this);
            self.start();
        },

        tickNow: function () {
            var self = this;
            self.stop();
            self.trigger('timerexpired', this);
            self.start();
        },

        stop: function () {
            clearTimeout(this.get('timeout'));
        }
    });

    return Timer;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:32:41.070

我注意到您`this`在启动计时器方法中使用了关键字。可能是您的 call`this.tick`调用在实际触发时脱离了上下文。尝试：

```
start: function () {
    var self = this;
    var timer = setTimeout(this.tick, self.get('interval'));
    this.set('timeout', timer);
}, 
```

在您的浏览器中，在方法中插入一个断点`tick`并检查您是否确实引用了正确的计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:08:36.370

我看不出进展如何必然是指数级的，但线性进展肯定会趋于它。基本上，您可以在这里做两件主要的事情：

*   在客户端使用长轮询/限制，但您已经每 15 秒发送一次请求，因此这不会违反浏览器限制。
*   在服务器端，如果你想要一个大规模的 ajax 应用程序，你肯定需要一个负载均衡器。在云中选择 Amazon 自动扩展，这可能会对您有所帮助，并且只需使用负载均衡器即可。这并不便宜，而且与您体验的活动成正比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T19:19:41.847

您不应该简单地将`this.tick`第一个参数传递给`setTimeout`，因为当`tick`方法执行`this`时将绑定到全局`window`对象而不是`Timer`实例。

您还应该确保在实例已经运行`start`时没有调用。`Timer`我会像这样更改以下方法：

```
 start: function () {
        var self = this;
        if (this.get('timeout') !== null) {
            throw "start must not be called when the Timer is already running";
        }
        // creating a closure ensures this is bound correctly in tick()
        var timer = setTimeout(function () {
            self.tick(); 
        }, this.get('interval'));
        this.set('timeout', timer);
    },

    tick: function () {
        this.set('timeout', null);
        this.trigger('timerexpired', this);
        this.start();
    },

    stop: function () {
        clearTimeout(this.get('timeout'));
        this.set('timeout', null);
    } 
```

检查 Timer 是否正常工作的明显方法是将对 console.log 的调用绑定到 timerexpired 事件，以确保触发事件的次数不会超出预期。

如果您需要帮助确定并发连接数增长失控的原因，您应该在停止和启动 SignalR 连接的位置发布代码。

# breeze - 乐观并发异常

> ID：13876458
> 
> 赞同：1
> 
> 时间：2012-12-14T10:04:35.757
> 
> 标签：breeze

未正确返回 Optimistic ConcurrencyException。我使用微风 ToDo 示例和我的应用程序对此进行了测试。

如果我引发 OptimisticConcurrencyException，这就是返回的内容：

```
{"$id":"1","$type":"System.Web.Http.HttpError, System.Web.Http","Message":"An error has occurred."} 
```

缺少 ExceptionType。在 VS 的调试模式下，这可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:19:57.507

嗯...，当我在测试用例中尝试并发异常时。

```
// assuming this causes a concurrency exception
em.saveChanges().then(

).fail(function(error) {
   // error object detailed below        
}) 
```

我得到以下与“错误”参数一起返回

```
error.message: "Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries."

error.responseText:    {"$id":"1","$type":"System.Web.Http.HttpError, System.Web.Http","Message":"An error has occurred.","ExceptionMessage":"Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.","ExceptionType":"System.Data.OptimisticConcurrencyException","StackTrace":"   at System.Data.Mapping.Update.Internal.UpdateTranslator.ValidateRowsAffected(Int64 <... more here ...> }

error.detail:  < an even more detailed error object
error.detail.ExceptionType: "System.Data.OptimisticConcurrencyException" 
```

还有其他属性，但这些是重要的。

我想知道我们在做什么不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:03:58.700

`<customErrors>`@sascha -如果您在 IIS 中运行，那么您在工作正常的事情上击败了我（如果您是极少数会自行托管 Web Api 的人之一， 请参阅[Jimmy Bogard 的替代方案）。](http://lostechies.com/jimmybogard/2012/04/18/custom-errors-and-error-detail-policy-in-asp-net-web-api/)

但我很确定最终这样做是错误的。现在这是权宜之计，但正如 Jimmy 在他的帖子中所说，“这可能不是我们在生产中想要的东西。” 应用程序不应将未过滤的异常暴露给客户端，以解决诸如乐观并发或验证错误之类的常规问题。

我打算找到一种更好的方法，很可能涉及[此处描述的 HttpResponseException](http://www.codeguru.com/csharp/.net/net_asp/handling-exceptions-in-asp.net-web-api.htm)。我将重点考虑使用“自定义异常过滤器”以受控方式处理未处理的异常。

我不认为*这种方法*属于 Breeze 本身。我觉得它需要一个*特定于应用程序的解决方案*……一个知道应该公开哪些异常以及应该如何表达它们的解决方案。但是这个机制很好教。一旦你知道如何去做，你就可以滚动你自己的自定义异常处理......并且不理会 Web.config。

希望尽快写出这份指南。随意击败我:)

# bash - 其他变量中的 Bash 脚本命令结果以定义提示

> ID：13876459
> 
> 赞同：0
> 
> 时间：2012-12-14T10:04:36.273
> 
> 标签：bash, shell

我想定义一个提示，用颜色指示命令是否正确执行以及是否找到命令。至于现在我有这样的东西，但我不能正常工作。

```
PS1="\`COMMAND_RESULT=\$\?;

if [ $COMMAND_RESULT -eq 127 ]; then echo \[\e[33m\] ---=== Command not found ===--- ;  

elif [ $COMMAND_RESULT -ne 0 ]; then echo \[\e[33m\]---=== \[\e[31m\]Oh noes, bad command \[\e[33m\]==---; 

fi\`

\n\[\e[0;37m\][\[\e[1;31m\]\@\[\e[0;37m\]] 

\[\e[0;32m\]\u\[\033[1;33m\]@\[\033[0;32m\]\h 
```

至于现在我在 bash start 上收到此错误：

```
-bash: [: -eq: unary operator expected
-bash: [: -ne: unary operator expected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:27:50.663

不要污染你`PS1`的功能。您应该使用特殊`PROMPT_COMMAND`变量来执行此操作。的值`PROMPT_COMMAND`在发出每个主要提示之前作为命令执行。

这是一个例子：

```
_check_command(){
   local COMMAND_RESULT=$?
   if [ $COMMAND_RESULT -eq 127 ]
   then
       echo -e "\e[1;33m---=== Command not found ===---\e[m"
   elif [ $COMMAND_RESULT -ne 0 ]
   then
       echo -e "\e[1;31m---=== Oh noes, bad command ===---\e[m"
   fi
}
PROMPT_COMMAND='_check_command'
PS1="\[\e[0;37m\][\[\e[1;31m\]\@\[\e[0;37m\]] \[\e[0;32m\]\u\[\033[1;33m\]@\[\033[0;32m\]\h " 
```

您可以在网上找到许多 bash 提示来指导您。[这](https://github.com/sharfah/dotfiles/blob/master/.bash/.bash_prompt)是一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:14:26.360

您可能不应该`$?`以`\$\?`. 看起来它是按字面意思解释的。

您还可以查看[Arch Wiki](https://wiki.archlinux.org/index.php/Color_Bash_Prompt#.2Fetc.2Fbash.bashrc)文章，该文章展示了如何实现与您想要的类似的东西。看看这一行：

```
PS1="$(if [[ ${EUID} == 0 ]]; then echo '\[\033[01;31m\]\h'; else echo '\[\033[01;32m\]\u@\h'; fi)\[\033[01;34m\] \w \$([[ \$? != 0 ]] && echo \"\[\033[01;31m\]:(\[\033[01;34m\] \")\$\[\033[00m\] " 
```

特别是这部分：

```
([[ \$? != 0 ]] && echo \"\[\033[01;31m\]:(\[\033[01;34m\] \") 
```

# css - 如何使dl列表水平

> ID：13876460
> 
> 赞同：4
> 
> 时间：2012-12-14T10:04:38.940
> 
> 标签：css

我有一个看起来像这样的列表：

```
<dl>
    <dt>Something</dt>
    <dd><div>Div with an image</div></dd>
    <dt>Second</dt>
    <dd><div>Second Div</div></dd>
</dl> 
```

当你在页面上运行它时，它看起来是垂直的，我希望它看起来是水平的。代码如下所示：

```
Something
Div with an image
Second
Second Div 
```

但我想要这样的东西：

```
Something                     Second
Div with an image             Second Div 
```

我无法更改 dl 和 dt 元素的顺序，因为它是我无法修改的代码的一部分。但是它们都用类或ID标记，所以我可以修改CSS。

那么，有没有什么办法可以让这个结构的列表看起来是水平的呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-11-26T13:42:31.317

解决方案使用`grid`.

```
dl {
    display: grid;
    grid-template-rows: auto auto;
    grid-auto-columns: 1fr;
    grid-auto-flow: column;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:08:48.247

```
<dl>
    <dt>Something</dt>
    <dd><div>Div with an image</div></dd>
    <dt>Second</dt>
    <dd><div>Second Div</div></dd>
</dl> 
```

用浮动CSS它

```
dt{ float: left; }
dd{ float: right; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-20T03:33:07.107

对于其他使用 Bootstrap 的人，有一个[水平描述](http://getbootstrap.com/css/#horizontal-description)类：

```
<dl class="dl-horizontal">
    <dt>Something</dt>
    <dd><div>Div with an image</div></dd>
    <dt>Second</dt>
    <dd><div>Second Div</div></dd>
</dl> 
```

[https://jsfiddle.net/rh2otd6e/](https://jsfiddle.net/rh2otd6e/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T13:28:43.977

看看这篇文章[http://www.alistapart.com/articles/multicolumnlists/](http://www.alistapart.com/articles/multicolumnlists/)

此解决方案也适用于 dl。

HTML

```
<dl>
    <dt class="col-1">Something</dt>
    <dd class="col-1"><div>Div with an image</div></dd>
    <dt class="col-2 reset">Second</dt>
    <dd class="col-2"><div>Second Div</div></dd>
</dl> 
```

CSS

```
dt, dd {line-height: 2em;}
.col-1 {width: 48%;}
.col-2 {margin-left: 50%;}
.reset {margin-top: -4em;} 
```

这是工作示例[http://jsfiddle.net/YNxCa/](http://jsfiddle.net/YNxCa/)

或者您可以使用其他方法，例如。绝对定位

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-24T12:52:08.077

看看这个简短的网格版本：

```
dl {
    display: grid;
    grid-template-columns: 50% 50%;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-03T08:02:31.703

你可以使用 flexbox 解决这个问题。缺点是您必须指定容器的高度。

```
dl {
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    height: 5em;
}

dd, dt {
    flex-basis: 50%;
} 
```

它的工作原理是将内容放在列 ( ) 中，并在高度超过 100% (= 2 * ) 时每隔第二个元素`flex-direction`强制换行 ( )。`flex-wrap``flex-basis`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-14T12:48:39.160

我会为此使用一张桌子。

或者，如果它必须是定义列表，请尝试：

```
dt {
float:left;
}
dd {
float:left;
clear:right;
} 
```

# vb.net-2010 - VB.Net中SQL查询中的动态表名

> ID：13876461
> 
> 赞同：1
> 
> 时间：2012-12-14T10:04:43.213
> 
> 标签：vb.net-2010, ms-access-2010

我正在尝试找到一种方法来根据另一个表中的值动态确定/引用表名。

在概念上，这就是我想要的：

```
SELECT * FROM TTestCase 
WHERE TTestCase.ElementNo = (
    SELECT TControlTables.ControlTable from TControlTables 
WHERE TControlTables.MessageType in (
    SELECT TTestCaseParameter.MessageType 
    FROM TTestCaseParameter).ElementNo 
```

“ **SELECT TControlTables.ControlTable from TControlTables WHERE TControlTables.MessageType in (SELECT TTestCaseParameter.MessageType FROM TTestCaseParameter** ”是确定哪个表的ElementNo应该与TestCase.ElementNo进行比较的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:46:53.337

一些非常粗略的注释，你会在这里得到更好的代码[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand(v=vs.71).aspx)。希望这会让你开始。

```
 Dim tablename As String
    Dim cn As New OleDbConnection("connection here")
    cn.Open()
    Dim query = "SELECT TControlTables.ControlTable " _
              & "FROM TControlTables " _
              & "WHERE TControlTables.MessageType in (  " _
              & "SELECT TTestCaseParameter.MessageType " _
              & "FROM TTestCaseParameter)"

    Dim dc = New OleDbCommand(query, cn)
    Dim tname As OleDb.OleDbDataReader
    tname = dc.ExecuteReader

    If tname.HasRows Then
        tname.Read()
        tablename = tname("ControlTable")
        tname.Close()
        query = "SELECT * FROM TTestCase WHERE TTestCase.ElementNo = ( " _
              & "SELECT ElementNo FROM [" & tablename & "])"
        dc.CommandText = query
        Dim rows As OleDb.OleDbDataReader
        rows = dc.ExecuteReader

    End If 
```

# jvm - 如何在 Windows 上为我的 JDK 分配 8 GB（不是 1 GB）RAM

> ID：13876462
> 
> 赞同：2
> 
> 时间：2012-12-14T10:04:43.943
> 
> 标签：jvm, memcached, java, terracotta

Windows 上的 JDK 最多占用大约 2 GB RAM。即使我们为 JDK 分配更多 RAM；它不接受它。如果我需要在 Windows 上运行需要 8 GB RAM 的进程；我怎样才能实现它？

我们是否有任何其他供应商提供的可以支持它的 JDK？Memcached 为我们提供了可以使用的额外缓存……但这不是我想要的。假设我需要在我的 Windows 机器上运行我的 jMeter 和 8 GB RAM；Memcached 肯定不会有帮助.. 有没有提供给我的提供商？以前我认为 Terracotta 是这样做的。但看起来那也像 Memcached。

我正在使用 Windows 7。如果需要，我也可以使用 Windows Server。我只需要让它运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:07:52.037

在 64 位操作系统上使用 64 位 JDK 修复它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:08:01.723

据我所知，Windows 上每个 32 位进程有 2GB 内存限制。但是，此页面似乎表明有寄存器设置可将其扩展到 3GB。特别是 IMAGE_FILE_LARGE_ADDRESS_AWARE

[http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366778(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366778(v=vs.85).aspx)

因此，如果您使用的是 32 位 JDK 并坚持使用它，那是您最好的选择，但是如果您可以升级到 64 位 JDK，请这样做，就像您在 64 位版本的 Windows 上使用 64 位 JDK 一样限制变为 8TB

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:01:23.390

如果您使用`-ms8g -mx8g`并且它正确启动，那么它的“最小”堆大小为 8 GB。但是，如果您的程序不使用 8 GB，它仍然可能只有 2 GB 或更少。即无论你给它什么设置，一个hello World 程序都不会使用8 GB。（除了一个不起眼的，我认为没有任何用途；）

是什么让一个 32 位应用程序，32 位是它拥有的有限地址空间。它仍然可以使用 64 位甚至 128 位数据。区别在于它可以寻址的有限内存量。Windows 将分配的地址空间用于自己的目的，这意味着堆的实际限制约为 1.2-1.5 GB（不是 2^32，即 4 GB）

值得注意的是，64 位 JVM 仍然使用 32 位引用，最大堆大小约为 30 GB。即引用不是普通的内存地址，因为它们是用于 32 位程序的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:09:55.780

如果您有大量缓存数据，它们最好位于 Java 堆之外。否则，GC 将花费大量时间遍历它，反复无果。

Terracotta 的 BigMemory 通过将数据直接放入 Java 堆之外的 ByteBuffer 中来做到这一点。也许也有免费/开放的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:36:24.273

我已经`-Xmx12G`在我的 64 位 Windows 机器上成功使用了 12G ( )，并且（64 位）JVM 使用了它的每个字节。

我偶然发现的唯一问题是，有时需要`-d64`在命令行上明确提供事件，如果它是 64 位 JDK/JRE。

# haml - 如何设置动态类值？

> ID：13876467
> 
> 赞同：0
> 
> 时间：2012-12-14T10:04:58.270
> 
> 标签：haml

我希望将以下`html.erb`代码移至 Haml：

```
<span class="<%= item.dashboardstatus.cssclass %>" >

<%= item.dashboardstatus.status %>

</span> 
```

它将当前分配状态的 CSS 类与 span 相关联是什么？

这在 Haml 中是如何完成的？我确定我错过了一些非常简单的东西。

编辑：嘎。我不敢相信我没有自己解决这个问题。只是表明两组眼睛比一组更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:11:40.383

这是 HAML 中的等效代码：

```
%span.{#item.dashboardstatus.cssclass}
     = item.dashboardstatus.status 
```

有两种工具可用于将 HTML 转换为 HAML：

1)`html2haml`终端应用工具

2）在线工具：[http ://html2haml.heroku.com/](http://html2haml.heroku.com/)

# r - 在 R 中重新格式化数据（大量的行）

> ID：13876468
> 
> 赞同：0
> 
> 时间：2012-12-14T10:05:00.203
> 
> 标签：r, aggregate, reshape

在此先感谢您的帮助。我正在使用 R，假设我有一个数据表（或最终带有 zoo 的时间序列），格式如下：

```
Col1: time   Values
Day1 H1      Value
Day1 H2      Value
Day1 H3      Value
Day1 H4      Value

Day2 H1      Value
Day2 H2      Value
Day2 H3      Value
Day2 H4      Value

Day3 H1      Value
... 
```

假设我想构造一个格式如下的矩阵：行：天

```
 H1       H2       H3       H4
D1  Values   Values   Values   Values
D2  Values   Values   Values   Values
D3  Values   Values   Values   Values 
```

并且：

```
 average(H1,H2)       average(H3,H4)
D1  Values               Vales
D2  Values               Vales
D3  Values               Vales 
```

在某些语言（例如 C++）中，我们可能会使用双 'for'，但我不确定这是在这里进行的最佳方式。非常感谢，我是 R 的新手，我对不同的逻辑很迷茫（但非常有趣）。

我已经看到有关该主题的其他问题，但我根本不清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:24:47.210

这可以通过一些基本`reshape`工作来完成，`aggregate()`或者`within()`通过以下方式完成：

首先，一些示例数据非常有帮助：

```
set.seed(1)
temp <- data.frame(Col1 = paste("Day", rep(1:4, each = 4), sep=""),
                   times = paste("H", rep(1:4, times = 4), sep=""),
                   Values = runif(16, min=0, max=10))
temp
#    Col1 times    Values
# 1  Day1    H1 2.6550866
# 2  Day1    H2 3.7212390
# 3  Day1    H3 5.7285336
# 4  Day1    H4 9.0820779
# 5  Day2    H1 2.0168193
# 6  Day2    H2 8.9838968
# 7  Day2    H3 9.4467527
# 8  Day2    H4 6.6079779
# 9  Day3    H1 6.2911404
# 10 Day3    H2 0.6178627
# 11 Day3    H3 2.0597457
# 12 Day3    H4 1.7655675
# 13 Day4    H1 6.8702285
# 14 Day4    H2 3.8410372
# 15 Day4    H3 7.6984142
# 16 Day4    H4 4.9769924 
```

二、用于`reshape`从长格式到宽格式

```
tempwide <- reshape(temp, direction = "wide", idvar="Col1", timevar="times")
tempwide
#    Col1 Values.H1 Values.H2 Values.H3 Values.H4
# 1  Day1  2.655087 3.7212390  5.728534  9.082078
# 5  Day2  2.016819 8.9838968  9.446753  6.607978
# 9  Day3  6.291140 0.6178627  2.059746  1.765568
# 13 Day4  6.870228 3.8410372  7.698414  4.976992 
```

第三，`rowMeans`在所需的列子集上使用。`aggregate`如果您愿意，也可以使用，但这是转换原始`data.frame`.

```
tempwide <- within(tempwide, {
  mean.H1H2 <- rowMeans(tempwide[2:3])
  mean.H3H4 <- rowMeans(tempwide[4:5])
})
tempwide
#    Col1 Values.H1 Values.H2 Values.H3 Values.H4 mean.H3H4 mean.H1H2
# 1  Day1  2.655087 3.7212390  5.728534  9.082078  7.405306  3.188163
# 5  Day2  2.016819 8.9838968  9.446753  6.607978  8.027365  5.500358
# 9  Day3  6.291140 0.6178627  2.059746  1.765568  1.912657  3.454502
# 13 Day4  6.870228 3.8410372  7.698414  4.976992  6.337703  5.355633 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:20:07.527

确实有很多方法可以做到这一点。您可以使用该`data.table`包进行聚合。为什么使用`data.table`？它**很快**（见[这里](https://stackoverflow.com/questions/11533438/why-is-plyr-so-slow)）。

利用 Ananda Mahto 的回答，我们切入正题`tempwide`，创建`temp wide.table`.

```
require(data.table)
set.seed(1)
temp <- data.frame(Col1 = paste("Day", rep(1:4, each = 4), sep=""),
                   times = paste("H", rep(1:4, times = 4), sep=""),
                   Values = runif(16, min=0, max=10))

tempwide <- reshape(temp, direction = "wide", idvar="Col1", timevar="times")

tempwide.table <- data.table(tempwide)

tempwide.table[, H1n2 := sum(Values.H1, Values.H2)/2, by=Col1]
tempwide.table[, H3n4 := sum(Values.H3, Values.H4)/2, by=Col1] 
```

所以，打印`tempwide.table`产量：

```
 Col1 Values.H1 Values.H2 Values.H3 Values.H4     H1n2     H3n4
1: Day1  7.176185  9.919061 3.8003518  7.774452 8.547623 5.787402
2: Day2  9.347052  2.121425 6.5167377  1.255551 5.734239 3.886144
3: Day3  2.672207  3.861141 0.1339033  3.823880 3.266674 1.978891
4: Day4  8.696908  3.403490 4.8208012  5.995658 6.050199 5.408230 
```

语法很灵活，对于多列的意思，你可能想要这样的东西：

```
tempwide.table[, list(mean(sum(Values.H1, Values.H2)/2)), by=Col1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:02:46.327

试试这个（如果它来自文件并且日期不是字面意思，则进行适当的更改`Day1`，等等）：

```
Lines <- "Col1 times    Values
Day1    H1 2.6550866
Day1    H2 3.7212390
Day1    H3 5.7285336
Day1    H4 9.0820779
Day2    H1 2.0168193
Day2    H2 8.9838968
Day2    H3 9.4467527
Day2    H4 6.6079779
Day3    H1 6.2911404
Day3    H2 0.6178627
Day3    H3 2.0597457
Day3    H4 1.7655675
Day4    H1 6.8702285
Day4    H2 3.8410372
Day4    H3 7.6984142
Day4    H4 4.9769924"

library(zoo)
z <- read.zoo(text = Lines, header = TRUE, index = 1, split = 2, FUN = identity) 
```

结果是：

```
> z
           H1        H2       H3       H4
Day1 2.655087 3.7212390 5.728534 9.082078
Day2 2.016819 8.9838968 9.446753 6.607978
Day3 6.291140 0.6178627 2.059746 1.765567
Day4 6.870228 3.8410372 7.698414 4.976992 
```

请参阅`?read.zoo`和`vignette("zoo-read")`了解更多信息。

# php - 如何使用 PHP 通过 unixodbc 和 freetds 连接 MSQL？

> ID：13876473
> 
> 赞同：0
> 
> 时间：2012-12-14T10:05:21.483
> 
> 标签：php, macos, odbc, osx-lion, freetds

[如前一个问题中所述](https://stackoverflow.com/questions/13872340/odbc-unable-to-connect-to-mssql-data-source-on-os-x-lion)，`freetds`并且`unixodbc`安装在 Lion 上并经过测试`isql`，我尝试使用 PHP 连接到 MSSQL：

```
$connection = odbc_connect('SMS_GTWY', 'username', 'password'); 
```

但是，它返回：

```
PHP Warning:  odbc_connect(): SQL error: [iODBC][Driver Manager]Specified driver could not be loaded, SQL state IM003 in SQLConnect in testodbc.php line 3

[iODBC][Driver Manager]Specified driver could not be loaded 
```

我该如何解决？

`$ cat /tmp/odbc_trace`上述PHP执行后的PS输出：

```
** iODBC Trace file
** Trace started on Fri Dec 14 18:03:27 2012
** Driver Manager: 03.52.0607.1008

[000000.000472]
php             7FFF738F8960 EXIT  SQLConnect with return code -1 (SQL_ERROR)
        SQLHDBC           0x7fbec48a77d0
        SQLCHAR         * 0x10e2e8ea8
        SQLSMALLINT       -3 (SQL_NTS)
        SQLCHAR         * 0x10e2e7300
        SQLSMALLINT       -3 (SQL_NTS)
        SQLCHAR         * 0x10e1873fa
        SQLSMALLINT       -3 (SQL_NTS)

[000000.000540]
php             7FFF738F8960 ENTER SQLError
        SQLHENV           0x7fbec48a7560
        SQLHDBC           0x7fbec48a77d0
        SQLHSTMT          0x0 (SQL_NULL_HANDLE)
        SQLCHAR         * 0x7fff6d1adf42
        SQLINTEGER      * 0x7fff6d1adf3c
        SQLCHAR         * 0x7fff6d1adf48
        SQLINTEGER        511
        SQLSMALLINT     * 0x7fff6d1adf3a

[000000.000598]
php             7FFF738F8960 EXIT  SQLError with return code 0 (SQL_SUCCESS)
        SQLHENV           0x7fbec48a7560
        SQLHDBC           0x7fbec48a77d0
        SQLHSTMT          0x0 (SQL_NULL_HANDLE)
        SQLCHAR         * 0x7fff6d1adf42
                  | IM003                                    |
        SQLINTEGER      * 0x7fff6d1adf3c (0)
        SQLCHAR         * 0x7fff6d1adf48
                  | [iODBC][Driver Manager]Specified driver  |
                  | could not be loaded                      |
        SQLINTEGER        511
        SQLSMALLINT     * 0x7fff6d1adf3a (59)

[000000.000784]
php             7FFF738F8960 ENTER SQLFreeConnect
        SQLHDBC           0x7fbec48a77d0

[000000.000807]
php             7FFF738F8960 EXIT  SQLFreeConnect with return code 0 (SQL_SUCCESS)
        SQLHDBC           0x7fbec48a77d0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:03:21.490

要修复，请使用`FREETDSCONF`、`ODBCINI`和设置环境`ODBCINSTINI`：

```
<?php

  putenv("FREETDSCONF=/Users/ohho/.freetds.conf");
  putenv("ODBCINI=/Users/ohho/.odbc.ini");
  putenv("ODBCINSTINI=/Users/ohho/.odbcinst.ini");

  $connection = odbc_connect('SMS_GTWY', 'sms_gtwy', 'sms_gtwy');

?> 
```

# sql - 选择查询以在其类别（组）下至少有一个非空值时选择行

> ID：13876478
> 
> 赞同：3
> 
> 时间：2012-12-14T10:05:40.033
> 
> 标签：sql, sql-server, sql-server-2008

```
Table1

    CatId     Name
    1       Category1
    2       Category2
    3       Category3

Table2

FieldId     FieldName    FieldValue   Category
1            Field1        Value1        1
2            Field2        NULL          1
3            Field3        NULL          2
4            Field4        NULL          2
5            Field5        Value2        3
6            Field6        Value3        3 
```

我有一个如上所示的表结构。当该类别下的任何 Fieldvalue 不为空时，我想获取该类别下的字段。对于我上面的示例结果应该是：

```
FieldId     FieldName    FieldValue   Category
    1         Field1        Value1        1
    2         Field2        NULL          1
    5         Field5        Value2        3
    6         Field6        Value3        3 
```

正如您在 category1 下看到的，field2 具有空值，但仍显示。在类别 2 下，field3 和 field4 都具有空值，因此不应选择它。

有人可以帮我解决上述问题的 sql 查询吗？我认为的一种方法是使用 groupby 类别并查看 count(FieldValue)>0 ，其中 fieldvalue 不为空。但我被卡住了如何将这个逻辑带入sql？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:12:00.037

```
select *
from table2
where category in (select distinct category 
                   from table2 
                   where fieldvalue is not null) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:14:39.003

```
SELECT
    FieldId 
  , FieldName 
  , FieldValue 
  , Category
FROM 
    Table2 AS t
WHERE
    EXISTS
        ( SELECT *
          FROM Table2 AS tn
          WHERE tn.Category = t.Category
            AND tn.FieldValue IS NOT NULL
        ) ; 
```

或者：

```
SELECT
    t.FieldId 
  , t.FieldName 
  , t.FieldValue 
  , t.Category
FROM 
        Table2 AS t
    JOIN
        ( SELECT Category
          FROM Table2
          GROUP BY Category
          HAVING MIN(FieldValue) IS NOT NULL
        ) AS tn 
      ON tn.Category = t.Category ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T11:07:45.977

选择 * 从 (

选择不同的 FieldId,FieldName,FieldValue,Category from table1 a,table2 b where a.CatId = b.category )

其中字段值不为空；

# javascript - 如何通过书签调用休息服务

> ID：13876481
> 
> 赞同：1
> 
> 时间：2012-12-14T10:06:00.670
> 
> 标签：javascript, jquery, google-chrome, rest, bookmarklet

我有一个接受 URL 参数的休息服务：`myService/add?pageUrl=www.google.com`

我正在尝试将此添加为书签，因此每当用户单击书签时，当前页面 URL 都会发送到我的休息服务。

这是我正在使用的 javascript 代码，但没有调用该服务

```
javascript:function savePage() {
    window.open('myService/add?pageUrl=' + document.URL) 
    alert('Page saved');
}
savePage(); 
```

我收到错误：

> 未捕获的 SyntaxError：意外的标识符

如何修改上述 javascript，以便当我将代码添加到书签时调用我的服务并将用户正在访问的当前 URL 发送到服务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:08:37.420

像这样创建书签：

```
javascript:(function(){/* your code here */})(); 
```

所以，在你的情况下：

```
javascript:(function(){window.open('myService/add?pageUrl='+document.URL)})(); 
```

在该`javascript:`部分之后，您有一个自执行（匿名）函数：

```
(function(){})() 
```

那里的代码将被评估。
此外，请确保您没有遗漏任何分号 ( `;`)。这些会破坏您在书签中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:09:23.410

少了一个分号。

```
javascript:function savePage(){ window.open('myService/add?pageUrl='+document.URL
);
alert('Page saved');
} savePage(); 
```

# iphone - 今天的希伯来语日期写在标签上

> ID：13876483
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:06:09.460
> 
> 标签：iphone, ios, nsdate

我想用标签（不是日历）显示今天的日期（希伯来日期）。

我怎么做`NSDate`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:27:53.107

查看这[两个](https://stackoverflow.com/questions/4644451/gregorian-to-hebrew) [链接](https://stackoverflow.com/questions/13109624/nsdate-hebrew-date-label)...可能对您有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:22:35.007

使用它来格式化日期：

```
NSLocale *hebrew = [[NSLocale alloc] initWithLocaleIdentifier:@"he_IL"];
NSDateFormatter *format = [[NSDateFormatter alloc] init];
format.locale = hebrew;
[format setDateFormat:@"MMM dd, yyyy HH:mm"];

NSDate *now = [NSDate date];
NSString *today = [format stringFromDate:now];
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(30, 40, 240, 30)];
lbl.text = today;
NSLog(@"today: %@", today); 
```

# java - Eclipse 如何创建他们的安装程序和 exe

> ID：13876491
> 
> 赞同：0
> 
> 时间：2012-12-14T10:06:59.323
> 
> 标签：java, eclipse, installation

eclipse 是如何为他们的程序创建安装程序的？它如何创建一个 .exe 文件？

我问是因为 eclipse 是用 java 编写的，这不是 jws 安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:20:22.873

Eclipse 不使用任何安装程序，因为它不需要在注册表或其他东西中注入任何数据。

至于启动器，请看本文的“Eclipse Boot Process”[部分](http://www.eclipsezone.com/articles/eclipse-vms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:32:21.867

eclipse 启动器只是一个特殊的 JNLP 文件，它启动第一帧以为编辑器框架本身准备设置/环境

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T12:32:52.907

它是使用 Java 构建的，但可能某些 c、c++ 或 ASM 代码仅用于创建该 exe 文件。:)

# c# - 在 ac# wpf 应用程序上删除 Tobit 电子邮件 (eml)

> ID：13876492
> 
> 赞同：1
> 
> 时间：2012-12-14T10:07:00.453
> 
> 标签：c#, wpf, eml

我有一个关于在 wpf 应用程序上删除电子邮件（eml 文件）的问题。我的问题是我的应用程序存储了 eml 文件，但如果我打开它，我的 Tobit 电子邮件客户端会显示一个空邮件。放在桌面上并打开它完美无缺。就像图像或文本文件等其他文件也可以工作一样。

谢谢你的每一个帮助。

这是我的代码：

```
private void listViewDocumentsSA_Drop(object sender, DragEventArgs e)...

        string[] format = e.Data.GetFormats();

        System.Windows.DataObject obj = (System.Windows.DataObject)e.Data;

        Object item = (object)e.Data.GetData(typeof(System.String));            

        try
        {

            string[] fileNames = null;
            string dir = System.Configuration.ConfigurationSettings.AppSettings["dir"];

            if (!Directory.Exists(dir))
                Directory.CreateDirectory(dir);

            string filename = "";

            if (e.Data is System.Windows.DataObject && ((System.Windows.DataObject)e.Data).ContainsFileDropList())
            {
                foreach (string filePath in ((System.Windows.DataObject)e.Data).GetFileDropList())
                {
                    filename = dir + "test" + "$" + System.DateTime.Now.Ticks.ToString() + "$" + System.IO.Path.GetFileName(filePath);
                    filename = filename.Replace("\\\\", "\\");

                    File.Copy(filePath, filename, false);
                }

            }

            if (e.Data.GetDataPresent("FileGroupDescriptor"))
            {

                Stream theStream = (Stream)e.Data.GetData("FileGroupDescriptor");
                byte[] fileGroupDescriptor = new byte[512];
                theStream.Read(fileGroupDescriptor, 0, 512);

                StringBuilder fileName = new StringBuilder("");

                for (int i = 76; fileGroupDescriptor[i] != 0; i++)
                {
                    fileName.Append(Convert.ToChar(fileGroupDescriptor[i]));
                }
                theStream.Close();

                string path = dir + "test" + "$" + System.DateTime.Now.Ticks.ToString() + "$";
                path = path.Replace("\\\\", "\\");

                string theFile = path + fileName.ToString();

                if (e.Data.GetDataPresent("FileContents", false))
                {

                    string[] formats = e.Data.GetFormats();

                    MemoryStream ms = e.Data.GetData("FileGroupDescriptorW") as MemoryStream;

                    byte[] fileBytes = new byte[ms.Length];

                    ms.Position = 0;
                    ms.Read(fileBytes, 0, (int)ms.Length);

                    FileStream fs = new FileStream(theFile, FileMode.Create);
                    fs.Write(fileBytes, 0, (int)fileBytes.Length);

                    fs.Close();
                }
                else
                    throw new System.Exception("...");
            }
        }
        catch (Exception ex)
        {
            System.Windows.Forms.MessageBox.Show(ex.Message);
        } 
```

# objective-c - 如何在一个应用程序中使用多个应用程序？目标 C

> ID：13876493
> 
> 赞同：-2
> 
> 时间：2012-12-14T10:07:04.953
> 
> 标签：objective-c, ios, xcode, ipad

我想要一个具有不同其他应用程序的应用程序，如 Skype、Safari、iBooks 等嵌入。我可以使用按钮使用 Skype 和 Safari，但是当我启动 Skype 或 safari 时，我启动这些应用程序的主应用程序会关闭。我希望这些应用程序在主应用程序视图本身中打开。
主应用程序 - 是用于启动 Skype 或 safari 的自定义应用程序

任何方法？有什么建议可以继续吗？任何API？任何教程？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:10:52.873

这是不可能的。您所能做的就是使用每个“应用程序”的公共可用 API，并使用它们创建您自己的应用程序流。但是你必须自己做大部分事情。

# java - Android 设备上的套接字打开

> ID：13876494
> 
> 赞同：0
> 
> 时间：2012-12-14T10:07:06.857
> 
> 标签：java, android, sockets

我知道这似乎是一个重复的问题，但实际上并非如此。我想通过套接字与一些传感器通信。连接在模拟器上工作正常，但是当我将它上传到 Android 设备上时它不会工作。调试后，我将我的应用程序缩小到使用以下代码简单地打开一个套接字。

```
try
{
 Socket socket = new Socket(InetAddress.getByName(ipAddress).getHostAddress(), 10001);
}
catch (Exception e)
{
 Toast.makeText(context, "Error: "+e.getMessage(), duration).show();
} 
```

我只是打开一个套接字。这在模拟器上运行良好，但是当我在设备上运行这个应用程序时，它会挂起一段时间，甚至没有显示任何异常消息......任何想法可能是什么问题。（最初是 StrictMode 问题，但我解决了）。LogCat 上没有错误。我已经安装了android终端模拟器并尝试ping，回复很好。提前致谢

* * *

这是代码

```
import java.net.InetAddress;
import java.net.Socket;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {
    Button btn;
    private CharSequence text = "";
    private Socket s;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
        .detectDiskReads()
        .detectDiskWrites()
        .detectNetwork()   // or .detectAll() for all detectable problems
        .penaltyLog()
        .build());
        StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
        .detectLeakedSqlLiteObjects()
        .detectLeakedClosableObjects()
        .penaltyLog()
        .penaltyDeath()
        .build());

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(this);
    }

    public void onClick(View view){
        //detect the view that was "clicked"
        switch(view.getId())
        {
          case R.id.button1:
              new LongOperation().execute("");
          break;

        }

    }

    private class LongOperation extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params) {

              try {
                    s = new Socket(InetAddress.getByName("o2215.airq.org").getHostAddress(), 10001);
                    text = "Connection Made";
                } catch (Exception e) {
                    text = "Error : ";
                    for(int i=0;i<e.getStackTrace().length;i++)
                    {
                        text = text +"\n"+ e.getStackTrace()[i];
                    }
                    e.printStackTrace();
                }
                return "";
          }      

          @Override
          protected void onPostExecute(String result) {
                TextView txt = (TextView) findViewById(R.id.output);
                txt.setText(text);
          }
    }
} 
```

这在模拟器上可以正常工作，但在设备上却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:12:38.687

也许，这是因为您尝试在主 UI 线程中建立连接。看起来你将上面的代码片段放在你的`Activity`类中。

您应该创建一个单独的线程来与网络进行通信。

使用简单 [`Thread`](http://developer.android.com/reference/java/lang/Thread.html)或Android的精彩[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

# javascript - 如何从 flash as3 中获取文本和矩形颜色？

> ID：13876497
> 
> 赞同：2
> 
> 时间：2012-12-14T10:07:10.500
> 
> 标签：javascript, actionscript-3, flash, flash-cs4

我想从 flash 到 javascript 获取文本颜色和矩形背景颜色。最好的方法是什么？例如，当 Flash 电影加载时，我想将其文本颜色和矩形背景颜色发送到 javascript。然后 javascript 将在 html 文本框中显示此颜色。任何想法，如何做到这一点？
谢谢阿什什
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:30:07.150

您可以使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)类

**动作脚本**

*在初始化你的 Flash 电影时，你应该添加你想要的可能的回调。这种情况下不需要回调，只需要调用JS即可。反正你知道怎么做，我会解释怎么做的）*

```
import flash.external.ExternalInterface;

function init(){
    var jsready:Boolean = ExternalInterface.available;
    if(jsready) { //checks if External callbacks can be made
        sendColors();//send the colors when movie is initializing
        try{
            //You add the callback, when JS calls getColors, actionscript will call sendColors() function
            ExternalInterface.addCallback("getColors", sendColors);     
        } catch (error:SecurityError) { 
            trace("A SecurityError occurred: " + error.message + "");
        } catch (error:Error) {
            trace("An Error occurred: " + error.message + "");
        }
    }
}
function sendColors(){
    //send your colors to JS
    ExternalInterface.call('receiveColorsFromFlash',color1,color2);
} 
```

**Javascript**

如果您使用了：

```
<object id="myflash1">
    <embed id="myflash2">
    </embed>
</oject> 
```

或者：

```
<object id="myflash1">
    <object id="myflash2">
    </object>
</oject> 
```

将 Flash 嵌入代码中的方式，适用于多种浏览器。确保嵌入和对象标签具有**不同**的 ID。或者，例如，对于火狐浏览器的第二个对象将不会进行调用。

你可以通过添加这个函数来解决这个问题，它总是返回正确的 flash 对象，加载到 DOM 中。这是一个过时的（5 年旧）片段，可能不再起作用，请使用 JQuery 或您想要的任何其他解决方案。

如果您使用另一种嵌入 flashobject 的方式（SWFObject.js 或任何其他方式），您可以只使用 jquery / getElementByid 来定位一个对象。

```
function thisMovie() {
        if (navigator.appName.indexOf("Microsoft") != -1) {
            return document.getElementById("myflash1");
        }else if (navigator.vendor.indexOf("Apple") != -1) {
            return document.getElementById("myflash1");
        } else {
            return document.getElementById("myflash2");
        }
} 
```

Flash会调用的JS函数：

```
function receiveColorsFromFlash(color1,color2) {
    //do your thing with the colors
} 
```

向 flash 请求颜色的 JS 函数

```
thisMovie().getColors(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:12:11.667

您可以查看 ExternalInterface 类[http://www.spikything.com/blog/index.php/2009/08/23/externalinterface_howto/](http://www.spikything.com/blog/index.php/2009/08/23/externalinterface_howto/)

# c# - 实体框架 - 创建导航属性

> ID：13876498
> 
> 赞同：5
> 
> 时间：2012-12-14T10:07:14.190
> 
> 标签：c#, sql, visual-studio, entity-framework

我在 Visual Studio 中使用实体框架向导创建了一个 db-model。有 2 个表（job、stocktype）与表 stocktype2job 相互关联。

![在此处输入图像描述](../Images/958d46592c89ba5ab7c7933d1974c09a.png)

```
Job <------- no direct relation / navigation property --------> StockType
 |                                                                  |
 |                                                                  |
 ---------------------> StockType2Job -----------------------------> 
```

使用作业对象，我可以做这样的事情......

```
EntitiesObject db = new EntitiesObject();
Job job = db.Jobs.SingleOrDefault(j => j.IdJob == 40);

List<StockType> stockTypes = new List<StockType>;
foreach (StockType2Job st2j in job.StockType2Jobs)
    {
        stockTypes.add(st2j.StockType);
    } 
```

那应该工作得很好。但是有没有办法在工作实体中创建一个导航属性，这样我就可以写这样的东西了？

```
EntitiesObject db = new EntitiesObject();
Job job = db.Jobs.SingleOrDefault(j => j.IdJob == 40);

List<StockType> stockTypes = job.StockTypes; // <<----- 
```

谢谢你的帮助阿波

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:55:25.687

很明显（来自自我参考）`StockType2Jobs`不仅包含 StockType 和 Job 的外键，因此您无法将多对多关系映射到导航属性`job.StockTypes`。所以你不能做任何其他事情，然后`StockType`通过收集`job.StockType2Jobs`。但这没什么大不了的：

```
List<StockType> stockTypes = job.StockType2Jobs.Select(x => x.StockType); 
```

您可能很想将其包装在未映射的属性`job.StockTypes`中，但通常这样做不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:53:23.423

尝试这样的事情：

```
 var stocksTypes = from st in db.StockType 
     from stj in st.StockType2Job where stj.Job.IdJob==40 select st; 
```

*   此代码没有创建任何新的导航属性，它只是“加入”表格。我认为 StockType2Jobs 表的存在是有充分理由的。

我建议你看看如何处理与 EF 的 N 对 N 关系。

一些链接[[1]](http://weblogs.asp.net/zeeshanhirani/archive/2008/08/21/many-to-many-mappings-in-entity-framework.aspx) [[2]](http://smehrozalam.wordpress.com/2010/06/29/entity-framework-queries-involving-many-to-many-relationship-tables/)

希望有帮助

# iphone - 空格 NSlog 后的单词

> ID：13876502
> 
> 赞同：-2
> 
> 时间：2012-12-14T10:07:40.787
> 
> 标签：iphone, objective-c, ios, xcode, nslog

我是 xcode 的新手，问题可能很愚蠢，但我的家庭作业落后了。在一个文件中，我想在字符串之后读取一个特定的字符。

我想阅读空格后的所有字符。

前任：

asasasasasas
wewewewewewewe
qwqwqwqwqwqw xyz_ 22 aaaaaaaaaaa bbbbbbbbbbb ccccccccccccccc dddddddddddddd
fgfgfgfgfgfgfg
erererererererer

abc_ 12 bbbbbbbbbb dddddddd
jkjkjkjkjkjkjk
lalallalalalal

* * *

一切都很好..但我想在“xyz_ 22”之后打印为 aaaaaaa 然后 bbbb ccc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:15:37.603

我认为你用 whiteSpace 分隔你的字符串

```
NSArray*dd=[contentfile componentsSeperatedByString:@" "]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:14:49.083

不应该只是：

```
NSArray*dd=[contentfile componentsSeparatedByString:@" "]; 
```

然后你有一个所有字符串的数组。

# android - 广播接收器不工作

> ID：13876507
> 
> 赞同：0
> 
> 时间：2012-12-14T10:07:59.157
> 
> 标签：android, android-intent, broadcastreceiver

[嗨，我在这里](https://stackoverflow.com/questions/13872686/broadcast-receiver-active-only-when-activity-is-running-else-deactivated)问了一个与广播相关的问题

他们建议我在 Manifest 文件中添加广播接收器类，然后在 Activity 的 onCreate 方法中注册它的实例，所以这是我的清单文件的代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.riteshmapsapplicationdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />

    <uses-permission android:name="android.permission.VIBRATE" />

    <application
        android:icon="@drawable/app_icon"
        android:label="Tring On Train"
        android:theme="@style/AppTheme" >
          <uses-library android:required="true" 
                 android:name="com.google.android.maps"/>
        <activity
            android:name=".MainActivity"
            android:label="Tring On Train" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
     <activity
         android:name=".AlarmActivity"
         android:label="Alarm" />
        <activity
            android:name=".Address_List_Activity"
            android:label="Saved Locations" />
         <receiver android:name=".ProximityAlertReceiver" >

        </receiver>

    </application>

</manifest> 
```

这是 onCreate 方法的代码段，我在其中注册 BroadCast Receiver 类的实例。

```
String s=System.currentTimeMillis()+"";

  PendingIntent proximityIntent = PendingIntent.getBroadcast(getApplicationContext(), i, intent, PendingIntent.FLAG_UPDATE_CURRENT);

locationManager.addProximityAlert(

           latitude, // the latitude of the central point of the alert region

           longitude, // the longitude of the central point of the alert region

           1000, // the radius of the central point of the alert region, in meters

           -1, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration

           proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected

      );

IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT+s); 

     registerReceiver(new ProximityAlertReceiver(), filter); 
```

我的 ProximityAlert 类的代码是

```
public class ProximityAlertReceiver extends BroadcastReceiver {

    private static final int NOTIFICATION_ID = 1000;
    public static final String PREFS_NAME = "MyPrefsFile";

    @Override

    public void onReceive(Context context, Intent intent) {

        String key = LocationManager.KEY_PROXIMITY_ENTERING;
SharedPreferences shared=context.getSharedPreferences(MainActivity.PREFS_NAME,0);

        Boolean entering = intent.getBooleanExtra(key, false);
Double longitude=intent.getDoubleExtra("longitude", 0.0);
Double latitude=intent.getDoubleExtra("latitude",0.0);

Intent in = new Intent(context,AlarmActivity.class);
in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
in.putExtra("longitude", longitude);
in.putExtra("latitude", latitude);
Log.i("cont1", shared.getInt("count", 0)+"");
in.putExtra("count",shared.getInt("count", 0));
context.startActivity(in);
}

} 
```

现在上次广播接收器在活动处于前台时工作，但这次广播接收器在任何情况下都不工作，谁能告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:13:16.940

您希望在前台不运行 Activity 时接收广播。`intent-filter`为此，您需要`receiver`在**AndroidManifest.xml中添加 valid**

例如：

```
<receiver android:name=".ProximityAlertReceiver" >
  <intent-filter>
        <action android:name="com.your.app.example_filter_1" />
        <action android:name="com.your.app.example_filter_2" />
        <!-- etc -->
  </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:19:24.567

你没有定义你想要接收什么类型的广播接收器..尝试在清单接收器标签中添加意图过滤器。安卓会发给你。

# json - 使用 WCF 服务进行 Windows Mobile 和服务器通信？

> ID：13876510
> 
> 赞同：0
> 
> 时间：2012-12-14T10:08:05.610
> 
> 标签：json, wcf, windows-phone-7, windows-mobile

我正在使用[此代码进行 Windows 手机和服务器通信，使用 WCF](http://www.c-sharpcorner.com/UploadFile/dhananjaycoder/how-to-consume-wcf-rest-service-returning-json-in-windows-ph/)将我的数据从手机发送到服务器并获得响应。但我收到错误“远程服务器返回错误：NotFound。”

这个 URI 是如何创建的：

```
string ServiceUri = "http://localhost:30576/Service1.svc/Rest/add/"
                    + Number1 + "/" + Number2; 
```

我不明白`/Rest/add/`从哪里来的。由于这个原因，我可能会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:09:41.917

查看 web.config 的“RESTEndPoint”部分。他的端点基地址是“rest”。因此，您必须使用 web.config 端点地址中的任何内容。

# ios - 如何使用 AVAudioPlayer 从 wav 音频文件中获取静音时间

> ID：13876513
> 
> 赞同：1
> 
> 时间：2012-12-14T10:08:12.423
> 
> 标签：ios

我正在播放带有语音动画的 wav 音频文件，我想在 wav 音频文件中的静音之间更改动画。请帮忙。

# sql-server-2008 - 将两行合并为一

> ID：13876514
> 
> 赞同：0
> 
> 时间：2012-12-14T10:08:26.280
> 
> 标签：sql-server-2008, stored-procedures

当我运行下面的书面程序时，我得到的返回结果集就像

![我的结果集](../Images/d1831f1e02188276276f3c4eef02d405.png)

![结果集 2](../Images/1bc1dbd180d1cca078f882a4a0cb4a5b.png) 但实际上根据场景，我想要的是针对 @ContractId 参数的单个记录。所以，我想合并我的结果集返回的行。

PS：这张图片只显示了几列，还有一些其他的列有不同的值。

这是我的程序：

```
ALTER PROCEDURE [dbo].[sp_Tbl_Contract_SearchOne]
    -- Add the parameters for the stored procedure here
    @ContractID int
AS
BEGIN

    select  
    tbl_Contract.ContractID,
    KeyWinCountNumber, 
    ItemName,
    BrandName,
    CountName,
    SellerName,
    BuyerName,
    ContractNumber,
    ContractDate,
    CountryFromName,
    CountryToName,
    TotalQty,
    Vans,
    UnitPrice,
    Amount
    from tbl_Contract

    inner join tbl_CountDetail
    on
    tbl_CountDetail.ContractID = Tbl_Contract.ContractID
    inner join tbl_Count tcount
    on
    tcount.CountID = tbl_CountDetail.CountID
    INNER JOIN Tbl_Item
    on Tbl_Contract.ItemID = Tbl_Item.ItemID 
    INNER JOIN Tbl_Brand
    on Tbl_Contract.BrandID = Tbl_Brand.BrandID
    INNER JOIN Tbl_Seller
    on Tbl_Contract.SellerID = Tbl_Seller.SellerID
    INNER JOIN Tbl_Buyer 
    on Tbl_Contract.BuyerID = Tbl_Buyer.BuyerID
    INNER JOIN Tbl_CountryFrom
    ON Tbl_Contract.CountryFromID=Tbl_CountryFrom.CountryFromID
    INNER JOIN Tbl_CountryTo 
    ON Tbl_Contract.CountryToID = Tbl_CountryTo.CountryToID
    inner join tbl_CostUnit
    on Tbl_Contract.CostUnitID = tbl_CostUnit.CostUnitID    
    where Tbl_Contract.ContractID = 1
    and Tbl_Contract.IsDeleted = 0 and tbl_CountDetail.IsDeleted = 0
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:34:21.057

这属于聚合，通常聚合意味着对要压缩为单行的行进行操作（总和、平均值、标准差）。例如，如果您的数据包含每人每天的 cookie 销售数量：

```
day    person    sales
======================
1      Bob       5
1      Jane      8
2      Bob       2
2      Jane      10 
```

你想看看每一天的*总*销售额是多少，你会选择`person`并按`sum(sales)`人分组

```
select  
   person
   sum(sales)
from salesData
group by person 
```

您的案例不太标准，因为您正在尝试聚合基于字符或字母数字的文件。这很好，有点，因为有一些聚合可以与字符字段一起使用。`MIN`仍然可以正常工作`MAX`- 分别返回第一个和最后一个字段。

即，对集合 , 执行 a将按`min`原样`a`返回（按字符串排序规则排序的最小值）。您似乎还有其他一些数字字段（, , ） - 这些您可以选择正确的聚合 - 我怀疑很可能`b``c``a``Amount``UnitPrice``TotalQty``SUM`

所以你可以这样做：

```
select  
    tbl_Contract.ContractID,
    KeyWinCountNumber, 
    ItemName,
    BrandName,
    MIN(CountName) as FirstCountName,
    SellerName,
    BuyerName,
    ContractNumber,
    ContractDate,
    CountryFromName,
    CountryToName,
    SUM(TotalQty) AS SumTotalQuantity,
    Vans,
    SUM(UnitPrice) as TotalUnitPrice,
    SUM(Amount) AS TotalAmount
    from tbl_Contract
      [...snip...]
    group by  tbl_Contract.ContractID,
    KeyWinCountNumber, 
    ItemName,
    BrandName,
    SellerName,
    BuyerName,
    ContractNumber,
    ContractDate,
    CountryFromName,
    CountryToName,
    Vans 
```

现在将返回 1 行，其中`FirstCountName`的值 `Count1 502`是聚合字段中的第一个（最小）值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:20:47.003

这取决于您想对 CountName 字段（两者之间唯一不同的值）做什么，但理论上您可以使用`GROUP BY`（如果您排除 CountName）将它通过聚合，或者如果您想包含 CountName，那么可能`PIVOT`会做工作。

# normalization - 表分解中的依赖关系保留

> ID：13876524
> 
> 赞同：1
> 
> 时间：2012-12-14T10:08:50.493
> 
> 标签：normalization, database-normalization

我对数据库关系（表）的依赖保留属性感到困惑。我们是否必须查看初始 FD 集或其他什么？我试图解决关于这个主题的一些问题。这个问题之前的问题都满足了我的初步估计，即“查看给定的 FD 集”。如果您在新关系集中没有丢失它们中的任何一个，那么这就是依赖保留。

但是当我谈到这个问题时，我感到很困惑。

考虑关系 R = (ABCDEFGH) 和以下 FD 集：

*   FD1 E -> D
*   FD2 B, E -> CG
*   FD3 D, G -> E
*   FD4 C -> AB
*   FD5 E, G -> C
*   FD6 A, E -> BD
*   FD7 C, E, D -> G
*   FD8 A, G -> E

这些是给定的关系

*   R1 (EFGH)
*   R2 (ABEG)
*   R3 (CDEG)
*   R4 (ABC)

答案说这种分解是依赖保留的。根据我的估计，我们失去了 FD2，所以这一定不是依赖保留。

我需要一位专家为我澄清这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:42:43.170

这个问题是家庭作业问题的一部分。当我做作业时，我不确定自己的想法是否正确。

在我的回答中，我写道：这种分解不是保留依赖关系，因为在这种分解中我们失去了 FD DF--> BC 。

我的数据库老师接受了这个答案作为正确答案，我也想在这里澄清这个主题。

费尔达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T03:52:47.833

分解是依赖保留的，因为 FD2 BE->CG 可以通过关系 R2(BE->G) 和 R3(EG->C) 来实现。BE 的闭合给出了 CG。

# java - JsonMappingException：无法实例化没有单长参数构造函数/工厂方法类型的值

> ID：13876525
> 
> 赞同：5
> 
> 时间：2012-12-14T10:08:50.920
> 
> 标签：java, json, jackson, deserialization, zk

您好，尝试在 zk 框架上将 json 响应解析为 java 时出错

这是杰森的回复

```
{"currentTime":1355390722038,"text":"OK","data":{"limitExceeded":false,"references":{"stops":[],"situations":[],"trips":[],"routes":[],"agencies":[{"id":"AG1","privateService":false,"phone":"","timezone":"Asia/Kuala_Lumpur","disclaimer":"","name":"Panorama","lang":"en","url":"http://www.allcompanyonline.com/company/33/8/26/62438/PM-Cultural--Tourism-Sdn-Bhd.html"}]},"list":[{"lonSpan":0.1766824722290039,"lon":102.2011971473685,"agencyId":"AG1","lat":2.2659808772471948,"latSpan":0.15555363245723042}]},"code":200,"version":2} 
```

我不断收到此错误

```
com.fasterxml.jackson.databind.JsonMappingException: Can not instantiate value of type [simple type, class com.panorama.tripplan.pojo.Agency_coverage] from Long integral number; no single-long-arg constructor/factory method 
```

这是根变量的pojo

```
@JsonRootName(value = "currentTime")
public class Agency_coverage{
private Number code;
private Number currentTime;
private Data data;
private String text;
private Number version;

public Agency_coverage(){}

public Number getCode(){
    return this.code;
}
public void setCode(Number code){
    this.code = code;
}
public Number getCurrentTime(){
    return this.currentTime;
}
public void setCurrentTime(Number currentTime){
    this.currentTime = currentTime;
}
public Data getData(){
    return this.data;
}
public void setData(Data data){
    this.data = data;
}
public String getText(){
    return this.text;
}
public void setText(String text){
    this.text = text;
}
public Number getVersion(){
    return this.version;
}
public void setVersion(Number version){
    this.version = version;
} 
```

这是我尝试调用api并解析响应的代码

```
java.net.URLConnection connection = new URL(url + "?" + query+ "&" + queryLat+ "&" + queryLon).openConnection();
       connection.setRequestProperty("Accept-Charset", charset);
       if ( connection instanceof HttpURLConnection)
       {
         //Jackson 2.X configuration settings
            mapper.configure(DeserializationFeature.UNWRAP_ROOT_VALUE, true);

            mapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);
            mapper.configure(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT, true);
            mapper.configure(DeserializationFeature.USE_JAVA_ARRAY_FOR_JSON_ARRAY, true);
            mapper.configure(DeserializationFeature.READ_ENUMS_USING_TO_STRING, true);
            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);

            //Tell Jackson to expect the JSON in PascalCase, instead of camelCase
            mapper.setPropertyNamingStrategy(new PropertyNamingStrategy.PascalCaseStrategy());

          HttpURLConnection httpConnection =(HttpURLConnection) connection;  
        //Make the HTTP request, and deserialize the JSON response into the object

          Agency_coverage agencyData= new Agency_coverage();
          agencyData = mapper.readValue(agenturl, Agency_coverage.class);

          //System.out.println(agencyData.getData().getList().get(0).);
          System.out.println(agencyData.getCurrentTime());
          System.out.println(httpConnection.getResponseCode());

       } 
```

如果您能理解这个问题，请提供帮助，我对 Java 开发有点陌生，我全力以赴

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T15:43:25.907

第一件事是`@JsonRootName(value = "currentTime")`按照@aymeric 的建议删除注释。此注释告诉 Jackson 映射器，当您的 POJO 将此事物称为“Agency_coverage”时，匹配的 JSON 对象将称为“currentTime”。事实并非如此。

现在，除此之外，您的 JSON 应该看起来更像这样：

```
{"Agency_coverage":{"currentTime":1355390722038,"text":"OK","data":"etc..."}} 
```

这里的不同之处在于您为 Jackson 提供了根元素来展开。

您现在可以看到 Jackson 的错误在说什么。使用您提供的 JSON 和您正在使用的注释，它找到`currentTime`了映射到`Agency_coverage`POJO 的 JSON 元素，但值为`currentTime`a`long`并且无法映射。

# magento - 使用 Varnish 时的 Magento Onepagechekout 登录问题

> ID：13876529
> 
> 赞同：2
> 
> 时间：2012-12-14T10:09:13.677
> 
> 标签：magento, varnish

我在用着：

*   Magento v1.7.0.2,
*   清漆缓存 v3.0.3 和
*   IWD (v2.0.9) 的一页结账 (OPC) 模块

我已将路由“onepagecheckout”和“onestepcheckout”添加到应从 Varnish 缓存中排除的路由。

我可以看到 OPC 页面不是从 Varnish 加载的，并且可以正常工作，但是，当在 OPC 页面上使用快速登录表单时，它不能与 Varnish 一起正常工作。即使在 Magento 缓存管理中禁用了所有缓存项（包括 Varnish 整页缓存）。

我得到的是 /onepagecheckout/index/login/ 脚本的以下响应：

```
{"success":true,"redirect":"http:\/\/myhost.com\/onepagecheckout\/index\/index\/"} 
```

页面被重定向到购物车，但我仍然没有登录。

关闭清漆时，它工作得很好。

有人有这方面的经验吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:25:42.660

最后通过在 Varnish 的 VCL 文件中添加以下行解决了这个问题：

```
if (req.url ~ "^/(index.php/)?(checkout|onepagecheckout)")
{
     return(pipe);
} 
```

虽然，这两个路由已经添加到 MADE 配置中的“要从缓存中排除的路由”中（似乎将它们放在例外列表中）导致`return(pass)`后台简单。

重要的是使用`return(pipe);`而不是`return(pass);`将所有 cookie 传递给客户端。

# php - 警告：date() 期望参数 2 很长

> ID：13876531
> 
> 赞同：2
> 
> 时间：2012-12-14T10:09:24.443
> 
> 标签：php

收到以下错误：

> 警告：date() 期望参数 2 很长，字符串在 /home/15063/brooks/www.brooks-shopping.co.uk/public_html/wp-content/themes/sandbox/functions.php 第 546 行

这指向该行：

```
$day = date("l, F jS", get_post_meta($post->ID, 'date_value', true)); 
```

有人可以建议，请对上述行进行哪些更改才能解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:12:40.000

假设`get_post_meta`返回字符串中的时间，试试这个，看看它是否有效

```
$day = date("l, F jS", strtotime(get_post_meta($post->ID, 'date_value', true))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:15:05.940

Date 期望参数 2 很长。即它期望返回一个数字。

您返回一个字符串（假设），`get_post_meta` 您需要先将其转换为时间，然后才能返回它（长日期）

而是尝试

```
$day = date("l, F jS", strtotime(get_post_meta($post->ID, 'date_value', true))); 
```

该`strtotime`函数返回一个`int`如下[所示](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:14:41.453

首先将其转换为 int，如下所示：

```
$day = date("l, F jS", (int) get_post_meta($post->ID, 'date_value', true)); 
```

# bash - Bash - 列出带有附加信息的目录

> ID：13876532
> 
> 赞同：0
> 
> 时间：2012-12-14T10:09:28.440
> 
> 标签：bash

我想列出带有附加信息的目录，即 LOCKED 或 FREE 状态，具体取决于名为“lock”的文件的存在。

示例：-我有一个名为“dir”的主目录，-在该目录中有子目录“dir1”、“dir2”、“dir3”，-“dir2”包含文件“lock”，其他目录不包含文件这样的文件名， - 我想要一个结果列表看起来像：

```
dir1 - FREE
dir2 - LOCKED
dir3 - FREE 
```

如何用 Bash 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:29:34.203

这应该工作：

```
for i in *  #loop through current directory
do
if [ -d "$i" ] #if you see a directory
then
 cd "$i";  #go in
 echo -n "$i "
 if [ -f "lock" ] #see if the file is there
 then
 echo "Locked"
 else
 echo  "Free" 
 fi
 cd ..
fi
done 
```

您必须在父目录中运行它（`dir`我想在您的情况下）

样品运行：

```
aman@aman-VPCEB14EN:~/test$ ls -R
.:
dir1 dir2 dir3 dir4 dir5 try.sh

./dir1:

./dir2:
锁

./dir3:

./dir4:

./dir5:
锁
aman@aman-VPCEB14EN:~/test$ ./try.sh
目录 1 免费
dir2 锁定
目录 3 免费
dir4 免费
dir5 锁定

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T11:07:44.010

该脚本将目录名称作为参数，并打印出下一级目录的锁定状态（根据您的定义）：

```
#!/bin/bash
find $1 -mindepth 1 -maxdepth 1 -type d -print0 | while read -r -d '' dirname
do
  [[ -f "$dirname/lock" ]] && STATUS="LOCKED" || STATUS="FREE"
  echo "${dirname#$1} - $STATUS"
done 
```

示例用法：

```
[me@home]$ ls -R dir/
dir/:
dir1  dir2  dir3  dir with spaces

dir/dir1:

dir/dir2:
lock

dir/dir3:

dir/dir with spaces:

[me@home]$ ./status_check.sh dir/
dir1 - FREE
dir with spaces - FREE
dir2 - LOCKED
dir3 - FREE 
```

PS find-while 习惯用法（看似不必要的复杂）确保脚本不会因包含空格的文件名而中断。看到[这个](http://mywiki.wooledge.org/ParsingLs)和[这个](http://mywiki.wooledge.org/BashPitfalls#for_i_in_.24.28ls_.2A.mp3.29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T11:45:17.933

现在是一个简单的单行：

```
for DIR in */ ; do echo -n "$DIR - " ; ls "${DIR}lock" >/dev/null 2>&1 && echo LOCKED || echo FREE ; done 
```

你只得到`*/`目录。`echo -n`省略尾随换行符，因此它只打印目录名称。然后在每个目录中查找文件`lock`，并丢弃 ls 的输出（有效和错误）。如果 ls 成功，则回显 FREE，否则回显 LOCKED。完毕。

# javascript - 在javascript中减少时间

> ID：13876546
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:10:08.080
> 
> 标签：javascript

(second.innerHTML) -1 有效，但 (num.innerHTML) -1 无效，为什么？

```
function doDcrements() {
     var hidden = document.getElementById('hidden');
     var second = document.getElementById('second');  // the second is 20.
     var loopTimer = 0;
     if (second.innerHTML != "0") {
         second.innerHTML = (second.innerHTML) -1;
         second.style.color = "blue";
         loopTimer = setTimeout('doDecrements()',1000);
     }else {
         second.style.color = "grey"; 
         hidden.style.display = "block";   
     }
 } 
```

..................................................... ..................................................... ..................................................... …………………………………………………………………………

```
function doDcrements() {
         var hidden = document.getElementById('hidden');
         var second = document.getElementById('second'); // the second is 20\. 
         var loopTimer = 0; 
         var num = document.getElementById('num'); // the number is 20\. 
         if (second.innerHTML != "0") {
             second.innerHTML = (num.innerHTML) -1;
             second.style.color = "blue";
             loopTimer = setTimeout('doDecrements()',1000);
         }else {
             second.style.color = "grey";  
             hidden.style.display = "block";   
         }
     } 
```

当我通过 for 循环创建它时，它不会发生：

```
function doDcrements() {
    var hidden = document.getElementById('hidden');
    var second = document.getElementById('second');
    for (i=20; i<=0; i--) {
           if (second.innerHTML != "0") {
             second.innerHTML = i;
             second.style.color = "blue";
             loopTimer = setTimeout('doDecrements()',1000);
         }else {
             second.style.color = "grey";  
             hidden.style.display = "block";   
         }
    }
} 
```

html代码：

```
<div id="hidden">started</div>
<p id="second">20</p>
<div onClick="doDcrements();">Download</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:24:31.763

请查看您的 for 循环：

```
for (i=20; i<=0; i--) 
```

i=20 并且 i<=0。它永远不会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:29:24.577

`(second.innerHTML) -1 that worked but (num.innerHTML) -1 that not working why?`

没有看到你的代码，唯一的猜测是 num.innerHTML 没有给你一个可转换为数字的字符串。例子：

`'20' - 1 = 20`

`'<input name="xyz" val="20"/>' - 1 = NaN`

您的 HTML 没有任何 id="num" 的元素。如果是这种情况，num 将为空。

变化
`setTimeout(doDecrements,1000);
for (i=20; i >=0; i--)`

# perl - 请帮助执行基本的 Perl 代码

> ID：13876547
> 
> 赞同：2
> 
> 时间：2012-12-14T10:10:12.210
> 
> 标签：perl

```
#!/usr/local/bin/perl
use warnings;
use strict;

print "Hello, world!\n"; 
```

这是我保存`test.pl`为`cgi-bin`.

这是代码，我用来在单独的 html 文档中运行脚本

```
 <html> 
 <head> 
 <title>A Very Basic Example of an HTML page created by the CGI</title> 
 </head> 
 <body> 
 <script type="text/javascript" src="http://csvlife.com/cgi-bin/test.pl"></script> 
 </body> 
 </html> 
```

我安装了 Perl。模块。我在我的 Hostgator 面板中验证了程序路径。可能是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T10:21:02.250

与 Javascript 不同，Perl 脚本在服务器端执行。这意味着您通过将浏览器直接指向脚本来运行 Perl 脚本，而不是将脚本嵌入 HTML 页面中。

使用模块来处理 CGI 被认为是一种很好的做法。经典选项简称为`CGI`. [在这里可以找到使用此模块的 hello world 示例](http://perldoc.perl.org/CGI.html#PROGRAMMING-STYLE)。

Quentin 还提到了[Plack](http://plackperl.org/)作为另一种选择。我没有使用过这个，但它看起来是一个更强大的解决方案。不过，对于初学者来说可能有点多。

[这些 Perlmonks 教程](http://www.perlmonks.org/?node_id=519640)是 CGI 编程的一个很好的资源。*警告：*他们大多很老。检查文档以确保您以最新的方式做事。

玩得开心，如果您需要帮助，请随时提出更多问题！

# bash - 由同时运行的 2 个不同脚本进行 mmv 编辑的文件会发生什么情况？

> ID：13876550
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:10:25.777
> 
> 标签：bash, concurrency, cron

假设我有 2 个不同的脚本，它们对来自同一目录但到不同目标目录的文件执行 mmv。它们同时运行（cron）。

匹配 mmv 模式的文件会发生什么？它们是否分散在两个目标目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:14:09.670

这是一个时间问题。谁先移动它们就是赢家。

如果您将它们移动到同一文件系统内的目录中，其中仅移动条目或跨文件系统，复制然后删除文件，这会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:37:30.590

不可预测的结果：

第一个（总有一个）会成功，

后来者将失败->生成一些错误报告。

# javascript - jQuery.get 没有收到服务器上最新版本的文件

> ID：13876551
> 
> 赞同：7
> 
> 时间：2012-12-14T10:10:28.600
> 
> 标签：javascript, apache, jquery

> **可能重复：**
> [防止缓存 AJAX 调用](https://stackoverflow.com/questions/367786/prevent-caching-of-ajax-call)

我正在使用 jQuery 读取 Web 服务器上的一个小文本文件：

```
jQuery.get('scores.txt', function(data) {
    parseScores(data);
}); 
```

这几乎可以正常工作——但它不能可靠地加载文件的最新版本。即使`story.txt`已更改，刷新页面也会返回完全相同的值`data`。

服务器是标准的 Mac OS Apache，没有启用缓存，它与客户端是同一台机器——所以理论上我和它之间没有其他缓存。

如果我加载`http://127.0.0.1/scores.txt`到浏览器中，它总是会打开最新版本。

查看 Apache 日志，对于页面无法更新的时间，jQuery GET 请求永远不会到达服务器。

我怀疑我可能需要将此问题移至 serverfault.com，但任何人都可以看到我的 JavaScript 有问题会导致它以这种方式运行吗？

有没有办法使用 JavaScript/jQuery 强制浏览器请求文件的新副本？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:13:08.373

您可以为每个请求添加一个唯一标识符，以停止浏览器缓存响应。仅仅因为客户端与 Web 服务器位于同一设备上，这不会阻止浏览器缓存响应（也不会阻止某些代理服务器参与正确的环境）。

```
jQuery.get('scores.txt', {
    now: jQuery.now()
}, function(data) {
    parseScores(data);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T10:13:40.877

尝试添加[`cache: false`](http://api.jquery.com/jQuery.ajax/)到您的 AJAX 选项：

```
jQuery.ajax({
    url: 'scores.txt',
    dataType: 'text',
    type: 'GET',
    cache: false,
    success: parseScores
}); 
```

jQuery 会自动为每个请求添加一个防止缓存的时间戳。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T10:12:36.410

像这样在文件名中添加一个cachebuster（例如时间戳）。

```
jQuery.get('scores.txt?' + (+new Date()), function(data) {
   parseScores(data);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:14:38.717

使用缓存破坏器。

JQuery 的 Ajax 方法有一个缓存设置可以为您执行此操作：[https ://learntech.imsu.ox.ac.uk/blog/?p=266](https://learntech.imsu.ox.ac.uk/blog/?p=266)

如果您不想在单个页面上缓存任何服务器内容，@Peter J 的解决方案是最干净的：[https ://stackoverflow.com/a/735101/109941](https://stackoverflow.com/a/735101/109941)

# javascript - window.load 函数不起作用

> ID：13876553
> 
> 赞同：1
> 
> 时间：2012-12-14T10:10:35.793
> 
> 标签：javascript

我在加载函数的 JavaScript 窗口中遇到了一个小问题。该脚本的目标是使我的#headerdiv 的高度始终等于屏幕的大小。

当我打开页面时，它没有显示我的`#headerdiv`（我猜是因为我的 JavaScript 代码没有添加高度）。一旦我调整浏览器窗口的大小，#headerdiv 就会向上调整并调整到屏幕的高度。所以我猜它只是不起作用的窗口加载功能？有人有建议吗？

这是我的代码：

**Javascript：**

```
<script>
$(function(){
    $(window).load(function(){ // On load
        $('#headerdiv').css({'height':(($(window).height()))  +'px'});
    });

    $(window).resize(function(){ // On resize
        $('#headerdiv').css({'height':(($(window).height()))+ 'px'});
    });
});     
</script> 
```

**html + css：**

```
<style>
    #headerdiv {width:100%; background:blue;padding:0;margin:0;overflow:auto;}​
</style>

<div id="headerdiv"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:14:44.173

您不需要像现在那样需要那里`$( window ).load()`（`$(function(){`有关快捷方式，`$( document ).ready()`请参阅官方[文档）](http://api.jquery.com/ready/)

所以此时您的代码已经加载。试试看嘛：

```
$(function(){

   $('#headerdiv').css({'height':(($(window).height()))  +'px'});

   $(window).resize(function(){ // On resize
    $('#headerdiv').css({'height':(($(window).height()))+ 'px'});
   });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:23:50.170

根据您是否需要等待所有图像加载，使用：

```
$(window).load(function(){ // On load
  $('#headerdiv').css({'height':(($(window).height()))  +'px'});
});

$(function(){
   $(window).resize(function(){ // On resize
      $('#headerdiv').css({'height':(($(window).height()))+ 'px'});
   });
}); 
```

或@antyrat 给出的答案。你不应该`$(window).load`把`$(function()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:34:11.163

我会像这样扩展[antyrat的答案](https://stackoverflow.com/a/13876621/561731)
：（ 无需重复代码）：

```
$(function(){

   $(window).resize(function(){ // On resize
       $('#headerdiv').css({'height':  $(window).height() + 'px'});
   }).trigger('resize'); //do the resize function on start

}); 
```

# javascript - YUIDocs 中的类和模块的文档

> ID：13876554
> 
> 赞同：8
> 
> 时间：2012-12-14T10:10:36.650
> 
> 标签：javascript, yui, documentation-generation

我在为一组分组模块编写文档时遇到了一些麻烦。我认为这部分是对什么`@class`和代表`@module`的误解。`@namespace`（或者这可能是雅虎试图将“经典”语言词汇硬塞进 JS 的结果。）

我在下面有一个粗略的示例，显示了我的大部分代码是如何编写的，以及我尝试以 YUIDoc 样式记录它。前两部分 (`Foo`和`BazManager`) 非常简单。大部头书：

*   `Foo`是一个`@class`；
*   `Baz`是一个`@class`；
*   `BazManager`是一个`@module`（或者可能是一个`@class`只包含`@static`成员的）；
*   `Qux`也是一个`@module`但只包含方法。

我的问题是：

1.  如果`BazManager`是 a `@module`，则`Foo`显示在`BazManager`;
2.  如果`BazManager`是 a `@class`，如果你不添加所有内容，里面的方法`Baz`就会被吸入其中`@for`；
3.  如果`BazManager`是 a `@class`，那么记录`Baz`的可见性就变得非常棘手；
4.  我真的不知道我应该如何记录`Qux`。在我看来它是一个模块，但由于它没有`@class`es，它会吞噬它周围的所有东西，包括`BazManager`. 所以它必须是一个`@class`.

谁能建议我应该怎么做？只要文档中的所有内容都正确生成，我真的不在乎我是否正确地使用了这些条款。

这是我的示例代码：

```
// File: Widgets.js

/**
MyNamespace namespace
@namespace MyNamespace
*/
var MyNamespace = window.MyNamespace || {};

//--------------------PART 1: Foo-------------------//

/**
This is a description of Foo.
@class Foo
*/
MyNamespace.Foo = function () {
    this.toString = function () {
        return "I am a foo";
    };

    /**
    This is Foo's private method description.
    @method privateMethod
    @private
    */
    var privateMethod = function () {};

    /**
    This is Foo's public method description.
    @method publicMethod
    */
    this.publicMethod = function () {};
};

//--------------------PART 2: Baz-------------------//
/**
This is a description of BazManager.
@module BazManager
@namespace MyNamespace
*/
MyNamespace.BazManager = (function () {
    var self = {};

    /**
    This is a description of Baz.
    @class Baz
    */
    var Baz = function (type) {
        /**
        toString description
        @method toString
        @returns {String}
        */
        this.toString = function () {
            return "I am a baz and I'm " + type;
        };
    };

    /**
    This is BazManager's privateBaz description.
    @method privateBaz
    @private
    */
    var privateBaz = new Baz("private");

    /**
    This is BazManager's publicBaz description.
    @method publicBaz
    */
    self.publicBaz = new Baz("public");

    return self;
} ());

//--------------------PART 3: Qux-------------------//

MyNamespace.Qux = (function () {
    var self = {};
    /**
    execute description
    @method execute
    @private
    */
    var execute = function () {
        console.log("Qux is done");
    };

    /**
    start description
    @method start
    */
    self.start = function () {
        setTimeout(execute, 1000);
    };

    return self;
} ()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T15:32:12.643

在 YUIDoc`@class`中用于经典类和包含一堆方法的对象。打算实例化的类也用 标记`@constructor`。这主要是因为这些类在模板中的显示方式。跟踪一个类比许多单独的函数要容易得多。

YUI 团队和社区中的许多人（包括我自己）似乎正在远离`@namespace`. 很难做对。相反，我们正在编写带有点的类名，即：`@class Plugin.NodeMenuNav`。

模块是指 YUI 意义上的模块，主要可以理解为包含一个或多个类的“脚本”。

所以一个典型的模块看起来像这样：

```
/**
A series of utilities to do stuff

@module Stuff
**/

/**
A class that does foo very well

@class Foo
@constructor
@param {Object} [config] Configuration object
@param {Boolean} [config.jumpHigh] Whether foo should jump really high
**/
function Foo(config) {
  config = config || {};
  var high = config.jumpHigh;
}
/**
@method jump
@chainable
**/
Foo.prototype.jump = function () {
    // jump
    return this;
};

/**
A series of utilities to make Foo do more stuff

@class FooUtils
**/
var FooUtils = {
    /**
    @method doSomeStuff
    @static
    **/
    doSomeStuff: function () {

    }
}; 
```

最后，`@for`适用于扩展其他模块的模块。例如，您可以有一个模块 Bar 来向 Foo 的原型添加方法：

```
/**
Adds extra functionality to Foo

@module Bar
**/

/**
Run really fast

@method run
@for Foo
**/
Foo.prototype.run = function () {};bv 
```

# regex - 正则表达式匹配数字模式

> ID：13876559
> 
> 赞同：2
> 
> 时间：2012-12-14T10:10:54.233
> 
> 标签：regex

如何匹配以 1 开头且不包含我尝试过的数字 1612 的四位数字

```
1[0-9]^6[0-9]^1[0-9]^2 
```

但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:15:26.220

这对你有用吗？

```
(?!1612)(1[0-9]{3}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:13:49.173

你可以试试 ：

```
^1(?!692)[0-9]{3}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:42:46.443

试试这个代码

```
\\b1(?!612)\\d{3}\\b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:13:34.370

```
String str = ...
if (str.matches("1[\\d]{3}") && !"1612".equals(str)) {
    // good to go
} 
```

# android - ADD ACCOUNT 在我的 Android 模拟器中不起作用

> ID：13876576
> 
> 赞同：1
> 
> 时间：2012-12-14T10:12:12.307
> 
> 标签：android, android-intent, android-emulator

在我的 android Emulator 中，我无法使用添加帐户配置 Gmail 帐户详细信息。如果我单击该按钮，则模拟器没有响应。

我还尝试使用 Intent 访问添加帐户功能（使用 StartActivity(new Intent(Settings.ACTION_ADD_ACCOUNT)) ）。即使这样也没有打开配置屏幕。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T15:05:58.017

这个答案有点晚了，但我把它留给后代。我有一个类似的问题，原来我在设置模拟器时必须使用google api（具体为17）进行目标设置，希望这对某人有所帮助。

# java - 像 Seam-Gen 一样的 Spring 开发

> ID：13876577
> 
> 赞同：1
> 
> 时间：2012-12-14T10:12:26.257
> 
> 标签：java, spring, spring-mvc, seam, seam-gen

Spring MVC 是否具有与 Seam-Gen 相同的**项目自动创建器？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:13:51.650

它具有[Spring Roo](http://www.springsource.org/spring-roo)，它可以生成项目并帮助您创建实体以及应用程序的服务和控制器层。它还有助于视图层和其他功能，例如安全性。

# php - wordpress 类别 child_of 变量而不是整数

> ID：13876587
> 
> 赞同：0
> 
> 时间：2012-12-14T10:12:49.297
> 
> 标签：php, wordpress

您好我想知道有没有办法在`child_of`参数中包含一个变量而不是一个整数。我试图根据当前的类别检索子类别，但是因为有 32 个类别，所以我似乎必须写出 32 个`elseif`，这似乎是错误的。

```
$current_cat = get_query_var('cat');
$category = get_category($current_cat);
 if ( $category->parent == '16'  {
$cats=get_categories('child_of=16'); 
        } 
```

但我不想一遍又一遍地重复这个，我宁愿做类似的事情......

```
 $current_cat = get_query_var('cat');
    $category = get_category($current_cat);
    $cat_parent = $category->parent;
    $cats = get_categories('child_of=$cat_parent); 
```

这可能吗？（ps我还在学习，所以我可能错过了一些简单的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:16:07.713

我不确定这是否是您要查找的内容：

```
$current_cat = get_query_var('cat');
$category = get_category($current_cat);
$cat_parent = $category->parent;

//adding the variable
$cats = get_categories('child_of='.$cat_parent); 
```

# sql - 嵌套选择中的临时表没有数据

> ID：13876589
> 
> 赞同：1
> 
> 时间：2012-12-14T10:12:57.473
> 
> 标签：sql

```
CREATE TABLE #AvailableDate (
    CustomKey INT IDENTITY (1,1),
    SelectedFaceID INT,
    FromDate DATETIME,
    ToDate DATETIME,
    TempDate DATETIME,
    Diff INT)

INSERT INTO #AvailableDate(SelectedFaceID, FromDate, ToDate, TempDate, Diff)
    SELECT
        SelectedFaceID,
        FromDate,
        ToDate,
        (SELECT TOP 1 ToDate FROM #AvailableDate WITH(NOLOCK) ORDER BY #AvailableDate.CustomKey DESC),
        (SELECT DATEDIFF(
                    d,
                    ToDate,
                    (SELECT TOP 1 ToDate FROM #AvailableDate ORDER BY CustomKey DESC)
                )
        )
    FROM
        SelectedFace WITH(NOLOCK) 
```

在这里，我没有得到`SELECT TOP 1 ToDate FROM #AvailableDate WITH(NOLOCK) ORDER BY #AvailableDate.CustomKey DESC`上述查询中的值或任何与`#AvailableDate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:48:02.307

您正在创建一个全新的临时表并期望它具有一些值，因为您正在对刚刚创建的同一个表进行选择。只有在您填充它之后，值才会存在。

您仍然可以使用临时表，但您必须重新安排批次并首先进行插入，然后使用 TempDate 和 Diff 字段更新记录。

# javascript - Angularjs $scope 不更新 UI

> ID：13876592
> 
> 赞同：1
> 
> 时间：2012-12-14T10:13:04.863
> 
> 标签：javascript, angularjs

我是 AngularJS 的新手，我正在四处寻找我能做什么。我有一个简单的表格：

```
<div ng-controller="EditContactCtrl">
  <div class="row-fluid" ng-repeat="email in contact.emails">
    {{email.type}} - {{email.email_address}}
  </div>
  <form name="emailForm" ng-controller="EditContactCtrl" ng-submit="addEmail()">
   <select class="span4" name="type">
     <option vlaue="Work">Work</option>
     <option vlaue="Personal">Personal</option>
     <option vlaue="Other">Other</option>
   </select>
   <input class="span6" type="text" name="email_address" placeholder="Email Address">
   <input type="submit" class="btn span2 pull-right" value="Add"/>
  </form>
</div> 
```

在控制器中，我有一个简单的操作来将新的电子邮件地址推送到联系人对象上，例如

```
function EditContactCtrl($scope, Contacts, $routeParams){
  $scope.contact = {emails:[], contact_numbers: [], addresses: []};
  $scope.isNew = $routeParams.contactId == '';

  if(!$scope.isNew){
    $scope.contact = Contacts.get({contactId: $routeParams.contactId});
  }

  $scope.addEmail = function(){
    $scope.contact.emails.push({type:emailForm.type.value, email_address: emailForm.email_address.value});
    console.log($scope.contact.emails);
    emailForm.reset();
  }
} 
```

当我运行这段代码时，一切都很好，我可以看到新的电子邮件地址被添加到联系人对象的电子邮件列表中。但问题是 UI 没有使用新的电子邮件地址进行更新。我期待它在我拥有的地方吐出上面的新地址`ng-repeat="email in contact.emails"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T20:43:13.903

看起来您已经在其内部声明了相同的控制器“EditContactCtrl”。可能是这个嵌套问题导致了您的问题。尝试删除`ng-controller`你的`<form>`，看看这是否能解决你的问题。

# database - 发现数据库的位置

> ID：13876596
> 
> 赞同：0
> 
> 时间：2012-12-14T10:13:25.753
> 
> 标签：database, web, ip, wireshark

我正在尝试查找特定网站保存到的数据库的位置。该网站正在保存到我们系统中的某个本地数据库，但我无法发现在哪里。

我曾尝试使用 WireShark 来查找网站向其发送数据的机器的 IP（即具有数据库的机器），但目前唯一显示的数据包是从网站到我的机器的数据包，反之亦然。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:10:28.720

我将从跟踪代码和网站配置开始。如果您有足够的权限在主机上运行 Wireshartk，您是否可以不搜索配置文件、查找服务器端代码等？

如果您在网络接口上看不到数据包，并且您知道已找到所有网络接口，那么似乎数据库必须在同一台机器上。使用您喜欢的工具检查最近更改的文件（Windows 资源管理器/搜索、在 Unix 上查找等）。

它是否正在缓存，所以您还没有让它在观看时读取/写入远程数据库？尝试在启动时观看 Wireshark。

根据数据的性质，它可能是内存数据库或在启动时从磁盘文件读取到内存的东西。

# string - 如何防止在特定位置之前编辑 TextBox？

> ID：13876606
> 
> 赞同：6
> 
> 时间：2012-12-14T10:13:58.140
> 
> 标签：string, vb6, textbox, keypress

如何`TextBox`防止在给定位置之前被编辑？

例如，如果 a`TextBox`包含字符串：

> 示例文本：黑猫。

如何防止用户之前编辑任何内容`"The"`？

我可以尝试`Backspace`使用事件来捕获键`KeyPress`，但是如何使用它`MouseClick`来防止用户将光标移动到之前的位置`"The"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T08:29:01.540

您可以使用单行`RichTextBox`并像这样保护前缀

```
Private Sub Form_Load()
    Const STR_PREFIX = "Example Text: "

    RichTextBox1.Text = STR_PREFIX & "The black cat."
    RichTextBox1.SelStart = 0
    RichTextBox1.SelLength = Len(STR_PREFIX)
    RichTextBox1.SelProtected = True
    RichTextBox1.SelLength = 0
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:25:11.040

As long as it's a static text item you have pre-defined then I would take this approach:

Have the default value of the texbox as "The black cat " so the user can immediately see it.

Then use the **OnGotFocus** event of the textbox to remove the first 14 characters (The black cat ) with a space at the end. The user can then freely type what they want (this will preserve anything they have already typed if editing for a second or further time)

```
TextBox = Right(TextBox, Len(Textbox) - 14) 
```

Then using the **OnLostFocus** event you can place the 14 characters back at the beginning of the textbox.

```
TextBox = "The black cat " & TextBox.Value 
```

This method should avoid any complications from the user clicking the mouse anywhere in the field, you also don't need to track the physical data with the **Change** events.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:11:19.710

好的，2路。1）在change事件上，测试“the”是否还在开头，如果不是，添加它。2）将“the”放在文本框之前的标签中。您甚至可以对其进行格式化，使其在用户看来就像是同一个控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:23:06.767

将您的文本框设置为锁定，然后试试这个。

```
Private Sub Text2_KeyDown(KeyCode As Integer, Shift As Integer)
   Dim TextMin As Integer
   TextMin = 3
   If Text2.SelStart > TextMin Then
      Text2.Locked = False
   ElseIf Text2.SelStart <= TextMin Then
      Text2.Locked = True
   End If
end sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T16:56:25.520

假设：

*   `TextBox`您希望控件中有一个静态的“不可编辑”字符串

*   您可以单击此字符串，选择它，它看起来就像文本框中的任何其他文本，唯一的区别是您将无法更改它

*   `TextBox`名字是`txt1`

> ```
> Dim str As String
> Dim oldStr As String
> Private Sub Form_Load()
>     str = "The"                     ' static string that you do not want to be edited
>     oldStr = str + " black cat"     ' default string to start with in the text box
> End Sub
> 
> Private Sub txt1_Change()
>     If UCase(Left(txt1.Text, Len(str))) <> UCase(str) Then
>         ' the static string was edited, so we restore it to previously 'good' value
>         txt1.Text = oldStr
>     Else
>         ' string was changed, but the change is 'good'. Save the new value
>         oldStr = txt1.Text
>     End If
> End Sub 
> ```

此代码将阻止`str`在文本框中编辑预定义字符串 ( )。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T11:05:08.083

您可以使用`TextBox_Changed`事件，然后检查其`Text`属性。如果它不以“The”开头，则放回“The black cat”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T09:37:37.847

当您在标记的开始位置之前，以下示例不接受键盘输入，并且当在该位置之前的框内单击时，它会移动到开始位置

这些是针对不需要的操作的 2 个不同答案。您可能希望在 _keypress 和 _click 事件中使用相同的操作

```
'1 form with
'    1 textbox : name=Text1
Option Explicit

Private mintStart As Integer

Private Sub Form_Load()
  Text1.Text = "Example text: The black cat"
  mintStart = Len("Example text: ")
End Sub

Private Sub Form_Resize()
  Text1.Move 0, 0, ScaleWidth, ScaleHeight
End Sub

Private Sub Text1_Click()
  With Text1
    If .SelStart < mintStart Then
      .SelStart = mintStart
    End If
  End With 'Text1
End Sub

Private Sub Text1_KeyPress(KeyAscii As Integer)
  If Text1.SelStart < mintStart Then
    KeyAscii = 0
  End If
End Sub 
```

# java - 在方法参数中设置实例字段值

> ID：13876607
> 
> 赞同：0
> 
> 时间：2012-12-14T10:14:02.337
> 
> 标签：java, observer-pattern

我在查找观察者模式的示例时遇到了以下代码。第 4 个参数是一个字符串，但我想知道那里会发生什么：它是否将实例字段设置`lastName`为新`lastName`值然后返回 this `lastName`？

这种形式的缩短是常见的做法吗？

```
 public void setLastName(String lastName) {
  notifyListeners(this, "lastName", lastName, this.lastName = lastName);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:16:56.593

这有效地做到了这一点：

```
public void setLastName(String lastName) {
  this.lastName = lastName;
  notifyListeners(this, "lastName", lastName, lastName);
} 
```

例如，首先将实例成员`lastName`设置为参数`lastName`，然后在调用函数时再次使用相同的值。

我不会说它很常见，尽管有一些成语使用它（见下文）；在这种特定情况下，没有特别好的理由这样做。这个想法是“从变量中获取”操作读取`lastName`只需要发生一次，然后将该值分配给`this.lastName`并传递给函数。但是编译器和 JVM 不仅要确保清晰的代码（在合理范围内）是有效的，而且它们不能帮助人们理解令人困惑的代码。:-)

正如[jlordo](https://stackoverflow.com/users/1749753/jlordo)在评论中指出的那样，在一些习语中这种分配和使用很常见，例如：

```
while ((line = in.readLine()) != null) {
    // ...
} 
```

调用函数时比较少见，但在这种循环中很常见。

您还可以在复合赋值中看到它，例如：

```
x = y = z = foo(); 
```

...调用`foo()`，设置`z`为返回值，然后设置`y`为相同的值，然后设置`x`为相同的值（显然，没有重复调用）。

# android - 翻译数据库中不同语言的字符串

> ID：13876608
> 
> 赞同：2
> 
> 时间：2012-12-14T10:14:08.113
> 
> 标签：android

你好朋友我做了一个应用程序，我从数据库中获取数据。我的应用程序中的所有数据都来自数据库。我已经用英语制作了这个应用程序，但现在我也想将我的应用程序转换成印地语和其他语言。实际上如果我将 XML 用于字符串，那么我为每种语言制作不同的 string.xml，然后设置语言环境，这不是问题，而是在数据库中转换字符串，然后 fetch.so 请建议我如何采用这个想法。任何帮助都会很明显.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:19:06.190

您可以：

*   使用翻译将列添加到表中：

    表格消息：ID、CONTENT、CONTENT_FR、CONTENT_ES、...

然后根据设备中设置的区域设置选择列（如果区域设置为 FR，则使用列 CONTENT_FR，如果区域设置是应用程序尚未提供的内容，则回退到 CONTENT 列）

*   使用多个数据库文件（如果您的数据库是静态的并且不会更新）：

加载与用户区域设置对应的 DB 文件。那么您的查询将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T07:55:15.273

你也可以有 db like

```
id, type, lang_id, str 
```

*   `id`- 字符串标识
*   `type`- 在哪里使用（1-登录消息、2-错误消息、3-字符名称、4-攻击名称等）
*   `lang_id`- 语言 id，您可以使用 2 位代码（EN-English、FR-French、DE-German 等）或您自己的 id 定义（1-English、2-French、3-German 等）
*   `str`- 显示字符串

# visual-studio-2012 - IIS Express 8 需要几分钟来提供文件

> ID：13876611
> 
> 赞同：5
> 
> 时间：2012-12-14T10:14:16.237
> 
> 标签：visual-studio-2012, iis-express

我有一个调试时在 IIS Express 上运行的 ASP.NET MVC 3 项目。几天前，当我安装 VS2012 时，IIS Express 突然开始花费很长时间来处理每个文件（JS 文件、CSS 文件）。我们的视图有大约十几个 JS 文件。浏览器中的强制刷新 (Ctrl+F5) 会导致它等待 4 分钟，直到页面完全加载。在开发人员工具中，我可以看到有进展，但每个文件都需要数秒才能收到。

看来VS2012安装了IIS Express 8。我之前有7.5。这个性能问题是 IIS Express 8 的一个已知问题吗？到目前为止，我的谷歌搜索并不成功。有人知道与它有关的任何事情吗？

**更新：**我可以确认通过卸载 8、删除 MyDocuments\IISExpress 目录并安装 7.5，我可以解决问题。我的一位同事也遇到了同样的问题：安装 VS2012 后，升级了他的 IIS Express 安装，他花了 4 分钟来加载我们的 Web 应用程序的页面。

# javascript - jquery中的下拉值

> ID：13876612
> 
> 赞同：2
> 
> 时间：2012-12-14T10:14:18.873
> 
> 标签：javascript, jquery

我有两个下拉列表，分别是项目 2 和 6。当我选择第一个下拉项目时，第二个中的项目列表将为 6，当我在第一个下拉列表中选择其他值时，第二个下拉列表中的项目列表应为 5，

请在此处找到代码：

```
<select id="firstdropdown">
    <option value="1">Test</option>
    <option value="2">Testing</option>
</select>
<select id="seconddropdown">
    <option value="1">test1</option>
    <option value="2">test2</option>
    <option value="3">test3</option>
    <option value="4">test4</option>
    <option value="5">test5</option>
    <option value="6">test6</option>
</select> 
```

谁能建议我在 jquery 或 javascript 中的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:18:26.297

你可以这样做，我假设你想显示/隐藏`last`项目。您可以通过给它更改为您想要的`index`。

**[现场演示](http://jsfiddle.net/tu858/)**

```
$('#firstdropdown').change(function(){
    if($(this).val() == "2")
        $('#seconddropdown option:eq(5)').hide();
    else
        $('#seconddropdown option:eq(5)').show();
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:18:45.917

据我了解，您正在删除第一个下拉选项的第二个选项的项目

```
 $("#firstdropdown").change(function() {
    if(this.value === "2") $("#seconddropdown option:last").remove();
    //here you are just removing last item    
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:17:29.170

像这样的东西：

```
$("#firstdropdown").change(function() {
    if(this.value === "1") $("#seconddropdown").val("6");
    else $("#seconddropdown").val("5");
}) 
```

* * *

**编辑：**添加了一个 jsfiddle：http: [//jsfiddle.net/scaillerie/WGhLA/](http://jsfiddle.net/scaillerie/WGhLA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T11:24:49.137

如果你需要隐藏下拉列表中的任何项目，你只需要改变'eq'的索引

```
 $('#firstdropdown').change(function(){
     if($(this).val() == "2")
        $('#seconddropdown option:eq(3)').hide(); // change the index of 'eq' 
     else
        $('#seconddropdown option:eq(3)').show();
  });​ 
```

# php - 如何在php中检查索引是否存在且不为空

> ID：13876624
> 
> 赞同：3
> 
> 时间：2012-12-14T10:14:47.233
> 
> 标签：php, null, isset

我总是使用以下代码来检查索引是否存在并且不为空：

```
if(!(isset($_POST['service']) and $_POST['service']))
   die('The service parameter is not available.'); 
```

在这里，我正在检查两个条件。是否可以使用单个内置功能来做到这一点？例如：-

```
if(!isSetAndNotNull($_POST['service']))
   die('The service parameter is not available.'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:16:31.630

您应该为此使用 empty() 。

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

为空（假）或空（空）返回假

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:19:49.153

而不是`empty`我会使用`!`：

```
if(!$_POST['service'])
   die('The service parameter is not available.'); 
```

如果将其与功能一起使用，则可以避免麻烦。

此处说明： [https ://stackoverflow.com/a/4328049/1081396](https://stackoverflow.com/a/4328049/1081396)

# dynamics-crm - 插件调试 - 用户总是需要登录？

> ID：13876629
> 
> 赞同：5
> 
> 时间：2012-12-14T10:15:11.010
> 
> 标签：dynamics-crm, dynamics-crm-2011, remote-debugging

我刚刚在我的 CRM 服务器上将插件远程调试器设置为服务，现在我可以毫无问题地连接到它并调试插件。

我的问题是用户是否总是需要登录到服务器才能使服务运行和工作？我将其设置为作为 LocalSystem 运行，但是当用户未登录并且我尝试调试它说我无法连接到它的任何内容时。

那么这是否意味着我必须始终让用户保持开启状态，或者是否有一些我错过的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:29:25.127

您需要登录才能运行远程调试器——它被设计为用于短期调试并在您完成调试后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:49:28.000

使用 PluginTool 在工作站上进行本地调试是另一种选择：

[是否可以将组织置于自己的进程中](https://stackoverflow.com/questions/8401537/is-it-possible-to-place-an-org-in-its-own-process/8406398#8406398)

# java - 如何在 jenkins 上访问 com.sun.management.ThreadMXBean 的 ThreadMx，junit 测试

> ID：13876636
> 
> 赞同：4
> 
> 时间：2012-12-14T10:15:35.370
> 
> 标签：java, jenkins, hudson

我有一个带有类的 junit 测试用例来监视线程的分配字节。从eclipse我能够得到有效的结果。但是在 jenkins 中它不起作用，因为没有提供 com.sun.management.ThreadMXBean 。

这是我的代码

`((com.sun.management.ThreadMXBean)ManagementFactory.getThreadMXBean()).getThreadAllocatedBytes(Thread.currentThread().getId())))`

如何获取 com.sun.management.ThreadMXBean 因为我需要检索 getThreadAllocatedBytes() ？我怎样才能正确设置太阳/甲骨文虚拟机？

java.lang.ClassCastException：sun.management.ThreadImpl 无法转换为 com.sun.management.ThreadMXBean

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T06:55:14.543

包中的代码`com.sun.*`仅适用于 Sun/Oracle JVM，[其他实现](http://en.wikipedia.org/wiki/List_of_Java_virtual_machines)可能无法访问这些不属于官方 JDK 的专有类。本质上，Sun 添加了一些附加功能`ThreadMXBean`（令人困惑的是并没有更改名称），但不想强制所有 JVM 实现都类似地实现此行为。

可能 Jenkins 不使用（或者你的配置不使用）Oracle 的 JVM。疯狂的猜测，但它可能正在使用 JRockit。

一般来说，您应该`com.sun.*`在默认情况下假设类不可用的情况下实现代码，并且应该在运行时检查它们是否确实可用。例如，这是我目前如何处理该`ThreadMXBean`问题的片段：

```
private static boolean enableBeanInspection = true;
private ThreadMXBean tBean = null;
private com.sun.management.ThreadMXBean sunBean = null;

public ThreadInspector() {
    // Ensure beans are null if we can't / don't want to use them
    if(enableBeanInspection) {
        tBean = ManagementFactory.getThreadMXBean();
        if(tBean instanceof com.sun.management.ThreadMXBean) { 
            sunBean = (com.sun.management.ThreadMXBean)tBean;
        }

        if(tBean.isThreadCpuTimeSupported()) {
            if(!tBean.isThreadCpuTimeEnabled()) {
                tBean.setThreadCpuTimeEnabled(true);
            }
        } else {
            tBean = null;
        }

        if(sunBean != null && sunBean.isThreadAllocatedMemorySupported()) {
            if(!sunBean.isThreadAllocatedMemoryEnabled()) {
                sunBean.setThreadAllocatedMemoryEnabled(true);
            }
        } else {
            sunBean = null;
        }
    }
}

protected long getThreadTime() {
    if(tBean != null) {
        return tBean.getThreadCpuTime(threadId);
    }
    return -1;
}

protected long getThreadMemory() {
    if(sunBean != null) {
        return sunBean.getThreadAllocatedBytes(threadId);
    }
    return -1;
} 
```

This defensive assume-we-don't-have-beans pattern lets you safely get as much information as the JVM will allow.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:41:38.380

我只是用

```
ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean(); 
```

不自暴自弃。你有同样的尝试吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-03T12:02:34.780

It appears that the execution was somewhat running on a jvm that doesn't support ThreadMXBean . In my ant configuration I added fork to a new thread. It worked great.

# mysql - MySQL Workbench 导出更改脚本截断注释

> ID：13876638
> 
> 赞同：3
> 
> 时间：2012-12-14T10:15:38.053
> 
> 标签：mysql, mysql-workbench

我正在使用 Workbench v5.2.44 CE。

当我运行导出 ALTER 脚本命令时，无论文本长度如何，所有注释都会被截断。例子 ：

> ALTER TABLE mydb.mytable CHANGE COLUMN `type` `type` TINYINT(4) NOT NULL COMMENT ' /* 注释被截断 */' ;

导出到创建脚本时不是这种情况。我无法找到可以改变这种行为的地方。

可能吗 ？

# tridion - 停止 Tridion 发布异常

> ID：13876643
> 
> 赞同：6
> 
> 时间：2012-12-14T10:16:18.650
> 
> 标签：tridion

当 Tridion 2011 中存在某种情况时，我想停止发布。在 Razor 模板中，我尝试：

```
throw new Exception("Exceptional condition!"); 
```

但是，在模板生成器中它说“成功”。

有任何想法吗？

在 VBScript 模板中，我们会执行 Err.Raise，它会将错误扔回发布队列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T14:25:28.547

基本 Razor Mediator 代码中绝对没有任何 try/catch 机制，模板中的错误应该会出现（正如您看到的常见的 null 引用错误，您可能会在剃刀时遇到很多错误！）。有些事情你一定要检查：

1.  是否正在执行带有异常的代码路径？正如 Bart 建议的那样，您应该通过 Template Builder 运行它，看看那里是否有任何有用的日志。还可以输入您自己的调试语句来定位代码路径的去向。

2.  您的异常是否在格式正确的剃刀语句中？

3.  如果是新 CT，页面模板的代码是否允许渲染您的 CT？

我只是设置了一个示例 TBB，如下所示（并将 TBB 添加到组件模板中）：

```
<div>Testing an Error</div>
@{ throw new Exception("Exceptional condition"); } 
```

通过模板生成器运行在输出窗口中显示错误。使用 CT 预览带有组件的页面将失败并显示错误。发布页面显示“失败”状态，已处理项目详细信息显示“异常情况！” 信息。

希望对您有所帮助，如果您仍然遇到问题，请随时发布您的代码，我会进一步调试它！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T11:56:59.413

在我看来，Razor Mediator 正在捕捉你的异常，而不是重新抛出它。但是快速浏览一下[代码](http://code.google.com/p/razor-mediator-4-tridion/source/browse/trunk/Tridion.Extensions.Mediators.RazorMediator/#Tridion.Extensions.Mediators.RazorMediator/Tridion.Extensions.Mediators.RazorMediator)并没有直接告诉我会发生在哪里。

那里有很多 try, catch 块（有些可能是正确的和预期的），大多数是记录警告。

您在模板构建器日志中得到什么有趣的东西吗？如果不是，我会尝试加载 Razor Mediator 代码并在您运行模板时对其进行调试，以查看是什么捕获了您的异常以及是否可以轻松更改它（好在它是开源的）。

# wordpress - 自定义 WordPress 主题没有选择 style.css 文件

> ID：13876644
> 
> 赞同：0
> 
> 时间：2012-12-14T10:16:19.400
> 
> 标签：wordpress

我刚刚遵循了一个关于创建自定义 WordPress 主题的教程，从静态到动态转换的每一件事都很好，但是当我激活该主题时，我想出了一个带有蓝色超链接的纯 HTML 文档，这意味着该网站没有收到style.css 的 css 文件

难道我做错了什么？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:39:34.413

检查您的源 HTML 并查看您的 CSS 的路径是否正确。

您可以使用 bloginfo() 通过以下方式找到正确的路径：

```
<link rel="stylesheet" href="<?php bloginfo('template_directory'); ?>/style.css"> 
```

如果您的 style.css 位于模板的根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:28:42.970

你在哪里添加文件的链接？- 查看页面的来源以查看链接是否存在并尝试导航到它以查看它是否返回 404（未找到）或其他错误。

我首选的包含主题样式表的方法是在我的functions.php 中添加类似的内容。

```
add_action('wp_enqueue_scripts','enqueue_my_styles_scripts');

function enqueue_my_styles_scripts() {
    wp_enqueue_style('my-styles',get_stylesheet_directory_uri().'/style.css');
} 
```

检查[wp_enqueue_style](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)并确保您的头文件中有[wp_head()](http://codex.wordpress.org/Function_Reference/wp_head)调用

# facebook - 使用 FQL 获取所有 2012 年的股份

> ID：13876646
> 
> 赞同：2
> 
> 时间：2012-12-14T10:16:30.743
> 
> 标签：facebook, share, facebook-fql

我需要在其他数据中检索一个人在过去一年（在我的案例中为 2012 年）在他的 Facebook 帐户上所做的所有共享。

我发现可以通过名为“stream”的 FQL 表访问共享，选择 stream.type = 80。在“created_time”和 source_id 上使用 where 子句应该可以解决问题：

```
SELECT post_id,message,likes,attachment 
FROM stream 
WHERE source_id = me() 
AND created_time > 1325397600 
AND type=80 
ORDER BY likes.count desc 
```

事实是……查询流表时，facebook的引擎似乎需要一个限制。如果您不提供一个，则没有结果。我想这是因为如果没有设置限制，响应时间可能会非常长......无论如何我相信他们有很多理由。所以 ：

```
SELECT post_id,message,likes,attachment 
FROM stream 
WHERE source_id = me() 
AND created_time > 1325397600 
AND type=80 
ORDER BY likes.count desc 
LIMIT 100 
```

**但是**：这个限制参数似乎是在我的一些 where 子句*之前*应用的，与 SQL server 等 SQL 语句不同，这意味着 fb 对我的示例查询所做的操作是顺序的：

*   从流中随机抽取 100 个元素，任何类型（可能是状态、分享、照片、地点、朋友在墙上的帖子等）和任何时间。实际上，我的 source_id 子句似乎是在限制之前应用的。

*   然后按类型 80 和 created_time 过滤，但不确定如何

就我而言，我需要 2012 年的所有共享，但我永远无法确定设置为 2000 或 5000 的任意限制会在应用过滤器之前捕获所有 2012 流元素。

也许还有其他方法？

非常感谢你的帮助。

# java - 从尚未由运行配置启动的 Eclipse 调试 Java 应用程序

> ID：13876656
> 
> 赞同：0
> 
> 时间：2012-12-14T10:16:58.493
> 
> 标签：java, eclipse, debugging

我有一个通过 Debug 配置运行的 Eclipse Java 项目。该应用程序启动了一堆其他外部 Java 应用程序。是否可以从 Eclipse 中调试这些应用程序？

我能想到的唯一方法是以某种方式使用远程调试，但是随着应用程序在本地运行，必须有一种更简单的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:24:14.023

是的，这是可能的。

我认为这会有所帮助...
[http://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:35:08.983

您必须以调试模式启动这些应用程序。看看这个[http://javarevisited.blogspot.cz/2011/07/java-debugging-tutorial-example-tips.html](http://javarevisited.blogspot.cz/2011/07/java-debugging-tutorial-example-tips.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:36:24.197

你只需要一个**Eclipse 远程调试**。

查看本教程以进行设置

[http://java.dzone.com/articles/how-debug-remote-java-applic](http://java.dzone.com/articles/how-debug-remote-java-applicat)

确保您还在远程应用程序启动器中设置了调试端口

# geocoding - 新加坡 Google Maps API v3 的标准地点/子地点列表？

> ID：13876663
> 
> 赞同：0
> 
> 时间：2012-12-14T10:17:24.393
> 
> 标签：geocoding

有没有可以查看新加坡标准地区/次地区列表的地方？

我正在开发一个网络应用程序，该应用程序将地点标记到新加坡的小区域，例如市中心、圣淘沙岛。新加坡是一个小国家，但它是一个大城市。这已经由我现在无法联系的另一位开发人员完成（也许小区域是手动创建的，根本不可能使用 Google Maps API？）

[我从这里](http://ubilabs.github.com/geocomplete/)借了一些代码，但没有显示子位置，所以我想知道出了什么问题。也许，在谷歌地图看来，新加坡根本就没有地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:04:40.613

[**Geonames**](http://download.geonames.org/export/dump/)地理数据库可根据知识共享署名许可免费下载。SN.zip文件**包含**新加坡的数据。

# java - 内存泄漏，Android 的 Spring

> ID：13876666
> 
> 赞同：6
> 
> 时间：2012-12-14T10:17:29.837
> 
> 标签：java, android, spring, memory-leaks

我的代码可能存在内存泄漏，我正在尝试寻找解决方案。我正在使用 Spring for Android 框架。更具体的

```
 RestTemplate.exchange(); 
```

为了进行即时绑定。但是，当我进行内存分析时，我得到以下信息：

由“dalvik.system.PathClassLoader @ 0x43692b80”加载的“com.products.Product”的 1.628 个实例占用 1.363.064 (22,20%) 个字节。这些实例引用自“java.lang.Object[]”的一个实例，由“”加载。支配树如下：

> class com.products.ProductList @ 0x436d7ea8 系统类| 1.628 | 8 | 130.240 | 8
> 
> > > > mFilteredProducts java.util.ArrayList @ 0x43a4eab0| 1.628 | 24 | 130.240 | 6.552
> > > > 
> > > > > > > 数组 java.lang.Object[1628] @ 0x43bdc888| 1.628 | 6.528 | 130.240 | 6.528
> > > > > > > 
> > > > > > > > > > [274] com.products.Product@0x4398b038| 1 | 80 | 80 | 760
> > > > > > > > > > 
> > > > > > > > > > [1175] com.products.Product@0x43b26868| 1 | 80 | 80 | 808
> > > > > > > > > > 
> > > > > > > > > > ...........

以上是支配树。但是我想知道是否有一种安全的方法来激活垃圾收集器。是个

```
 System.gc(); 
```

安全的？但是，有没有办法停止这种内存泄漏？com.products.Product 类只是一个简单的 POJO，它将 JSON 字段绑定到相应的属性。一般用于绑定 JSON 的 POJO 如下：

```
@JsonIgnoreProperties(ignoreUnknown = true) //must be there all times most likely
public class MyPojo {

@JsonProperty("Products")
private ArrayList<Product> products;

public ArrayList<Product> getProducts() {
    return products;
}

public void setProducts(ArrayList<Product> products) {
    this.products = products;
}
} 
```

com.products.产品：

```
@JsonIgnoreProperties(ignoreUnknown = true) //must be there all times most likely
public class Products {

 @JsonProperty
 private String prodnum;
 @JsonProperty
 private String brand;
 @JsonProperty
 private String name;

       //get/set
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:35:21.440

打电话`System.gc()`是安全的。但这并不一定会触发实际的垃圾收集。调用此方法仅*建议*JVM 尽一切努力执行垃圾收集。Java中没有办法强制它。

关于内存泄漏。看看`ProductList`，为什么它拿着所有这些对象。如果仍然从应用程序中的任何位置引用 ProductList，则不会发布所有这些产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:22:04.993

System.gc() 正如@wajda 已经说过的那样是安全的

今天我在桌面应用程序中遇到了类似的问题，问题是我在使用后没有关闭 PreparedStatement 和 ResultSet 对象。在大约 600 次查询之后，我填满了 256mb 的分配空间。在使用 JVisualVM（你的 JDK 中应该有它）并分析堆积的内容后，我看到 char 数组占用了 80% 的空间，而且它们都是空的。

每次使用后尝试关闭所有 JSON 对象，看看是否有帮助。

干杯

# asp.net - 缺少树状结构图标

> ID：13876667
> 
> 赞同：2
> 
> 时间：2012-12-14T10:17:33.863
> 
> 标签：asp.net

我使用 Visual Studio 和标准树结构编写了一个 CMS 系统。在本地看起来不错，但在我的实时系统上，“+”图标丢失了，只有通常的“丢失图像”图标不允许树打开。

谁能告诉我在哪里找到“+”图标以便我可以替换它们？

# string - 在 BASH 脚本中操作包含引用字符串的变量

> ID：13876668
> 
> 赞同：1
> 
> 时间：2012-12-14T10:17:40.647
> 
> 标签：string, bash, variables, spaces, double-quotes

我必须将一个变量传递`data='Type=Eatable Fruits="Apple Orange"'`给一个 bash 脚本（print.sh），它只逐行打印第一个、第二个、第三个命令行参数。

当我通过`data`运行将变量传递给脚本时：`sh print.sh $data`，输出是

```
Type=Eatable
Fruits="Apple
Orange" 
```

但那时需要的是

```
Type=Eatable
Fruits="Apple Orange" 
```

第二行也应该打印双引号。（第三个参数应该是 NULL/Nothing ）

我应该改变什么来获得像上面这样的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:39:50.677

当你运行时`sh print.sh $data`，它会像这样被标记化：

[ `sh`, `print.sh`, `$data`]

因为`$data`没有被引用，所以变量的值`data`被标记为

[ `Fruits="Apple`, `Orange"`]

然后将其添加到原始命令中

[ `sh`, `print.sh`, `Fruits="Apple`, `Orange"`]

`print.sh`并被调用 $1= , `Fruits="Apple`$2=`Orange"`

听起来您实际上希望这是一个参数`print.sh`，而不是两个。根据 Pierre-Louis Laffont 的回答，使用`"$data"`代替`$data`会实现这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:22:16.840

让你的电话在双引号之间变数：

```
$ ./script.sh $data
Fruits="Apple
Orange"

$ ./script.sh "$data"  
Fruits="Apple Orange" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:27:01.553

我的两分钱，脚本需要修改。你正在用吗

```
echo $1
echo $2 
```

你应该试试

```
echo $1 $2 
```

当您传递字符串时，我怀疑所有内容都被视为 arg1 而 arg2 为空。通过打印 $# 进行确认。

# asp.net-mvc-3 - 为什么我的身份验证 cookie 在 Windows7 上的 IE8 中在约 30 分钟后过期？

> ID：13876671
> 
> 赞同：0
> 
> 时间：2012-12-14T10:17:50.323
> 
> 标签：asp.net-mvc-3, windows-7, internet-explorer-8, iis-6, windows-authentication

我有一个应用程序需要 Windows 身份验证并回退到表单身份验证。我以这种方式构建它：http: [//msdn.microsoft.com/en-us/library/ms972958.aspx](http://msdn.microsoft.com/en-us/library/ms972958.aspx)，一切正常。

所以基本上我根据 Windows 身份验证的结果为域创建表单身份验证 cookie。只要浏览器保持打开状态，cookie 就有效。我在 Firefox 或 Chrome 中没有问题，甚至在 Windows XP 机器上的 IE8 也没有。不幸的是，所有带有 IE8 的 Windows7 机器都遇到了同样的问题：当您在大约 30 分钟不活动后尝试刷新页面时，会出现登录提示。即使我提供了有效的 Windows 凭据，我仍然无法登录应用程序。没有什么帮助，但关闭浏览器并重新启动它。然后我再次自动登录，只要我保持活跃就可以了。30 分钟不活动后 - 再次登录提示。经过一番研究，我发现如果我使用开发人员工具（F12）删除身份验证cookie然后刷新，

你们中的任何人都知道会出现什么问题，我怎样才能让它在 Windows7 机器上正常工作？或者也许关于在哪里看的想法？是 IIS 问题（我在 Windows 2003 Server 上使用 IIS6），还是客户端问题？是什么让 Win7 IE8 如此特别以至于它失败了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:45:15.943

我不知道它为什么会过期，但我设法摆脱了这个问题。不知何故，在 Win7 上的 IE8 上它无法继续，因为它尝试进行身份验证，但提供了旧的身份验证 cookie。如果我清理请求中的 cookie，然后转发到登录页面，它就可以工作。这不是问题的解决方案，但至少用户得到了重新认证......

# android - 通过 Eclipse 中的 AsyncTasks 和 Threads 进行 Android 调试

> ID：13876677
> 
> 赞同：0
> 
> 时间：2012-12-14T10:18:15.560
> 
> 标签：android, multithreading, debugging, android-asynctask

我已经阅读了一些问题，寻求有关调试 AsyncTasks 的帮助，这些问题与内部的断点问题有关。但是，我对您如何继续调试整个应用程序并在并行线程（例如`AsyncTask`）中导航很感兴趣。我特别感兴趣，例如，当你的代码中有一个`new XTask.execute()`句子，你想在其中调试它，然后返回 UI 线程时该怎么做。抱歉问题的笼统性。

编辑：我正在考虑一些帮助，如[Eclipse 中的多线程调试](https://stackoverflow.com/questions/5375538/debugging-multiple-threads-in-eclipse)

# c++ - 有没有办法在 QDomDocument 中执行 javascript？

> ID：13876678
> 
> 赞同：1
> 
> 时间：2012-12-14T10:18:18.900
> 
> 标签：c++, qt, qthread

在 QWebView 我可以执行 javascript 代码。但是 QWebView 不适用于在线程中运行，我想将执行移至线程。

有没有办法在 QDomDocument 中执行 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:38:41.093

如果您想在不同于 UI 线程的线程中执行 Javascript 代码，您可能需要查看[WorkerScript QML 元素](http://doc.qt.digia.com/qt/qml-workerscript.html)和解释 Javascript 和 QML 之间关系的[文档。](http://doc.qt.digia.com/qt/qdeclarativejavascript.html)我从未尝试过，但这应该是按照您的要求做的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:14:46.420

QDomDocument 与 Javascript 无关，它仅用于操作 XML 文档。你可能想看看 QScriptEngine。

# php - 我想从javascript向隐藏元素发送一个值

> ID：13876679
> 
> 赞同：-4
> 
> 时间：2012-12-14T10:18:21.553
> 
> 标签：php, javascript, html

这是我在 JavaScript 中的代码，我想创建 innerhtml 按钮，它将填充我的 html 表单中的一些隐藏字段，当我尝试填充 AirportsForm.kod 变量时，我可能遇到引号问题......

```
function EditTableCell(a)
{
    var Myp= document.getElementById(a);
    var nam=Myp.textContent;
    var kod=Myp.id;
    alert(kod);
    var newHTML='<p id="'+a+'"><input size="35" type="text" name="edit'+a+'" id="edit'+a+'" value="'+nam+'" /><input type="button" value="Change" onclick="document.AirportsForm.kod.value='+"'a'"+'.value;document.AirportsForm.promena.value=document.AirportsForm.edit'+a+'.value;document.AirportsForm.submit();"/></p>';
} 
```

这是html：它的形式是AirportsForm

```
<input type="hidden" name="promena" id="promena" value="" />
<input type="hidden" name="kod" id="kod" value="" /> 
```

而在 PHP 中，我`$variable=$_POST["kod"]`为其他隐藏元素做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:33:29.493

让它更干净一点......在里面调用一个函数`onclick`并在那里做你的步骤

```
var newHTML='<p id="'+a+'"><input size="35" type="text" name="edit'+a+'" id="edit'+a+'" value="'+nam+'" /><input type="button" value="Change" onclick="someFunction(\''+ a +'\')"/></p>';

function someFunction(a){
  document.AirportsForm.kod.value=a.value;
  document.AirportsForm.promena.value=document.AirportsForm.edita.value;
  document.AirportsForm.submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:33:31.007

您可以使用 getAttribute() 函数将属性值更改为：

```
var kod=Myp.getAttribute('id'); 
```

更多阅读请点击[这里](http://www.w3schools.com/jsref/met_element_getattribute.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:13:22.633

在这里我为你完成了它并且这种方式有效，因为你在这里得到一个 htmlObject 元素或输入元素你应该做它 object.id 或 value 或任何你想得到的东西，而不是以后使用它......

函数 EditTableCell(a) {

```
var Myp= document.getElementById(a);
var nam=Myp.textContent;
var newHTML='<p id="'+a+'"><input size="35" type="text" name="edit'+a+'" id="edit'+a+'" value="'+nam+'" /><input id="'+a+'" type="button" value="Change" onclick="document.AirportsForm.promena.value=document.AirportsForm.edit'+a+'.value;return subb(this);"/></p>';
Myp.innerHTML = newHTML;
Myp.onclick=null;
}
function subb(b)
 {
  document.AirportsForm.kod.value=b.id; 
    document.AirportsForm.submit();
 } 
```

# iphone - 阻止模态 UIViewController 旋转

> ID：13876682
> 
> 赞同：4
> 
> 时间：2012-12-14T10:18:30.740
> 
> 标签：iphone, ios, uiviewcontroller, modalviewcontroller, autorotate

modal`UIViewController`的父级自动旋转，但是当 modal VC 启动时，我只希望它以纵向出现而不是可旋转的。我尝试`shouldAutorotate`在模态VC中简单地从...返回NO，但没有任何乐趣。支持iOS 5+。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T13:34:07.300

基本上，如果您在***任何容器控制器***（即 UINavigationController）上呈现模态控制器，则默认情况下它具有自动旋转方法返回**YES**。所以你必须为你的 UINavigation 控制器创建子类并在那里弃用自动旋转。

iOS 5 使用方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

    return (toInterfaceOrientation == UIInterfaceOrientationPortrait) : self.enableRotations;
} 
```

对于 iOS 6：

```
- (NSUInteger)supportedInterfaceOrientations {

    switch ([UIDevice currentDevice].userInterfaceIdiom) {

        case UIUserInterfaceIdiomPad:   return UIInterfaceOrientationMaskAll;
        case UIUserInterfaceIdiomPhone: return UIInterfaceOrientationMaskPortrait;
    }
}

- (BOOL)shouldAutorotate {

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:48:26.757

这是可行的，但在这样做之前我会三思而后行。

作为用户；

*   我启动应用程序并横向使用。
*   触发事件（例如按下按钮）。
*   看到一个纵向的视图。
*   旋转手机并纵向查看。
*   关闭模态视图。
*   再次获得风景。
*   需要再次旋转手机

不好用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T12:57:58.077

您必须在新的导航控制器上展示该新控制器。这将解决您的问题

# android - 加载 Android tabhost 全屏

> ID：13876683
> 
> 赞同：1
> 
> 时间：2012-12-14T10:18:33.703
> 
> 标签：android, android-tabhost, android-tabs

我正在开发一个 Android`TabWidget`应用程序。单击选项卡按钮后，它的内容应该全屏加载，而不是作为选项卡项，我检查了设置全屏标志和清单中的主题，但也没有工作，

```
// Remove title bar
this.requestWindowFeature( Window.FEATURE_NO_TITLE );

// Remove notification bar
this.getWindow().setFlags( WindowManager.LayoutParams.FLAG_FULLSCREEN,
                           WindowManager.LayoutParams.FLAG_FULLSCREEN ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:28:02.703

你很难过你想让标签全屏加载，这意味着它必须是一个活动。那你为什么不像Activity那样打开它呢？我不认为某些部分`TabWidget`可以显示全屏，因为`TabWidget`会失去他的规范。我的意思`TabWidget`是 Tabs ，但你想打开一些标签，比如 Activity

问候海克·纳哈佩蒂安

# php - php mysql_fetch_array() 错误

> ID：13876688
> 
> 赞同：-7
> 
> 时间：2012-12-14T10:18:52.963
> 
> 标签：php, mysql, sql, database

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我在尝试删除查询正在工作的记录时收到此错误，但此行仍保留在页面上。我想回显写在 while 中的“已删除”应该出现，但 while 循环不起作用，我已经尝试并搜索了很多没有任何帮助！

```
 mysql_fetch_array() expects parameter 1 to be resource, boolean given in delete.php on line 27 
```

**删除.php**

```
<html>
<body>
<form method="post">
Id : <input type="text" name="id">
Name : <input type="text" name="name">
Description  : <input type="text" name="des">
<input type="submit" value="delete" name="delete">
</form>
<?php 
include("connect.php");
 $id = $_POST['id'];
 $name = $_POST['name'];
 $des = $_POST['des'];

 $result = mysql_query("DELETE FROM fact WHERE id='$id'") or die(mysql_error());

 while($row = mysql_fetch_array($result))
  {

   echo "Deleted";
   }

 mysql_close($con);  ?>
 </body>
 </html> 
```

**连接.php**

```
<?php 
  $con = mysql_connect("localhost","root","");
 if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
   mysql_select_db("Dataentry", $con);
  ?> 
```

我应该如何使while循环工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:21:04.247

问题是删除语句不会产生结果集！

```
$result = mysql_query("DELETE FROM fact WHERE id='$id'") or die(mysql_error());
if (mysql_affected_rows() > 0)
{
    echo 'Record deleted!';
} 
```

另外：正如评论中提到的，您很容易受到 SQL 注入的攻击，并且还使用了不推荐使用的扩展。请查看[这篇很棒的帖子](https://stackoverflow.com/q/60174/1207346)以获取有关这些问题的一些指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:20:53.560

当您运行`DELETE`命令时，我相信没有返回任何内容，因此您不能使用 mysql_fetch_array()。如果你正在做一个`SELECT`. 在这种情况下，您正在删除某些内容，因此只需删除该循环和 echo()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:24:56.677

1.  不要使用 mysql_* 函数，而是使用[PDO](http://php.net/manual/en/ref.pdo-mysql.php)或[Mysqli](http://php.net/manual/en/book.mysqli.php)。
2.  [注意](http://php.net/manual/en/function.mysql-real-escape-string.php)$id 值。[更多信息](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)
3.  我们使用 mysql_fetch_array 来获取 SELECT 查询的返回结果。

你可能想要这个

```
if(mysql_affected_rows()  > 0)
{
   echo "Deleted";
}
else
{
  echo "An error occured.";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T10:28:05.943

```
 <html>
   <body>
    <form method="post">
      Id : <input type="text" name="id">
       Name : <input type="text" name="name">
   Description  : <input type="text" name="des">
     <input type="submit" value="delete" name="delete">
   </form>
   <?php 
    include("connect.php");
     $id = $_POST['id'];
     $name = $_POST['name'];
     $des = $_POST['des'];

   $result = mysql_query("DELETE FROM fact WHERE id='$id'") or die(mysql_error());

    if($result) //if(mysql_affected_rows($result) > 0)
    {

       echo "Deleted";
    }
    else
    {
        echo mysql_error();
    }

    mysql_close($con);  ?>
   </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T10:31:43.060

不要使用 mysql_* 函数，试试 PDO 例子

```
<?php
$dbh = new PDO('mysql:host=localhost;dbname=test', 'user', 'password');
$count = $dbh->exec("DELETE FROM fact WHERE id='$id'");
if($count > 0){
    echo 'Deleted';
}else{
    echo 'Not Deleted';
}
?> 
```

$count 将返回 no。删除的行数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T10:44:59.373

```
$result = mysql_query("DELETE FROM fact WHERE id='$id'") or die(mysql_error());

if($result)
{
    echo "Deleted";
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-14T10:26:59.537

在某些时候会产生问题，所以你可以像这样使用它 **$result = mysql_query("DELETE FROM fact WHERE id='$id'");**

# asp.net - 无法从 asp.net 处理程序中的 AJAX 调用获取正确的发布数据

> ID：13876689
> 
> 赞同：2
> 
> 时间：2012-12-14T10:18:55.017
> 
> 标签：asp.net, jquery, httphandler

我正在通过 AJAX 调用调用处理程序。 **代码**

```
var PostData = {"MyName": myName };
$_.ajax(
        {
            type: "POST",
            async: true,                                
            url: 'SomeGenericHandler.ashx',                                
            data: JSON.stringify(PostData),
            success: function (msg)
            {
                var ObjJson = eval(msg);        
            },
            error: function (msg)
            {   
            }
        }); 
```

在 ProcessRequest 中，我得到了这些值：

```
context.Request.Form.Count = 1 
context.Request.Form[0] = "{'MyName':'dave'}"
context.Request.Form["MyName"] = null 
```

如何将发布的数据获取为： context.Request.Form["MyName"] = "dave"

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:28:30.347

您需要以帖子的格式发送数据：

```
$_.ajax(
        {
            type: "POST",
            async: true,                                
            url: 'SomeGenericHandler.ashx',                                
            data: 'MyName=dave&MoreData=SecondName',
            success: function (msg)
            {
                var ObjJson = eval(msg);        
            },
            error: function (msg)
            {   
            }
        }); 
```

还看一下`encodeURIComponent`，您可能需要对参数进行编码：

[结合两个 Javascript 和 jQuery 脚本](https://stackoverflow.com/questions/6477106/combining-two-javascript-and-jquery-scripts/6477174#6477174)

# android - 使用 API 14 或更低版本打开日历

> ID：13876699
> 
> 赞同：0
> 
> 时间：2012-12-14T10:19:37.617
> 
> 标签：android

我想从小部件应用程序打开日历，对于 API 15 或更高版本，它可以使用以下代码：

```
RemoteViews updateViews = new RemoteViews(context.getPackageName(),
            R.layout.medium_layout);
    Intent calendar = Intent.makeMainSelectorActivity(
             Intent.ACTION_MAIN, 
             Intent.CATEGORY_APP_CALENDAR);
    PendingIntent pendingIntent2 = PendingIntent.getActivity(context, 0,
            calendar, 0);

    updateViews.setOnClickPendingIntent(R.id.calendar, pendingIntent2); 
```

但是对于 15 之前的版本，它不起作用，有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:26:14.027

您无法为低于 15 的 API 打开日历。但是您可以创建自定义日历。[点击这里查看](http://w2davids.wordpress.com/android-simple-calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:21:54.267

Android 4.0 之前没有官方的 Calendar API

# ios - stringWithContentsOfURL 返回 (null)

> ID：13876700
> 
> 赞同：1
> 
> 时间：2012-12-14T10:19:40.120
> 
> 标签：ios, xcode, nsstring

我正在尝试使用以下代码将 URL 转换为字符串：

```
NSURL *urlOfOpenedFile = _service.myURLRequest.URL;
NSString *fileThatWasOpened = [NSString stringWithContentsOfURL:urlOfOpenedFile encoding:NSASCIIStringEncoding error:nil];

NSLog(@"url: %@", urlOfOpenedFile);
NSLog(@"string: %@", fileThatWasOpened); 
```

这将返回：

```
url: file://localhost/Users/User/Library/Application%2520Support/iPhone%2520Simulator/6.0/Applications/72AA03A1-3967-4F22-9745-0722C8DE9FAC/Documents/downloads/My%20Document%20.pdf
string: (null) 
```

谁能告诉我如何将 URL 转换为字符串？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:21:32.263

您可以使用

```
NSString* yourURLString = [urlOfOpenedFile absoluteString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:34:30.057

您使用的方法不是将 NSURL 转换为 NSString。而是像方法名称一样，它从该 URL 的内容中返回字符串。由于您在该 URL 上有 PDF 文件（不是字符串），因此它返回 nil。

对于转换，您可以使用以下 NSURL 实例方法

`- (NSString *)absoluteString;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:23:10.070

你可以使用喜欢

`NSString *fileThatWasOpened = [NSString stringWithFormat:@"%@", url];`

# windows - 是否有一个 Windows 套接字 API 调用/选项来“阻止”一系列端口 à la SO_EXCLUSIVEADDRUSE

> ID：13876701
> 
> 赞同：2
> 
> 时间：2012-12-14T10:19:43.070
> 
> 标签：windows, api, sockets, port, block

在[这篇](http://technet.microsoft.com/library/bb878133)（相当旧的）文章中，作者指出：

“端口阻塞

端口阻塞允许应用程序阻止其他应用程序对指定范围内的端口执行特定绑定。阻止端口范围时，应用程序必须选择介于 MaxUserPort 设置值（默认为 5000）+1 和 49151（对于未安装服务包的 Windows XP 和 Windows Server 2003）之间的连续端口号范围，或者65535（适用于 Windows Server 2003 Service Pack 1）。在被阻止的端口范围内，不应存在与端口的现有绑定。Windows 套接字返回阻塞范围内的最后一个端口号作为句柄。解除阻塞（删除块）时，Windows 套接字解除阻塞与解除阻塞请求具有相同左边缘的范围。”

我从阅读这篇文章中得到的暗示是，应用程序可以使用一些 api 来设置/取消设置它，但我已经完全空白，试图搜索任何此类东西的文档，我也不记得在我的套接字编程中看到过这样的功能天。

Windows 中是否有这样的功能，如果有，将非常感谢指向它的文档的指针！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:29:21.703

winsock API 本身没有这样的调用，但我相信[LSP 特性](http://en.wikipedia.org/wiki/Layered_Service_Provider)中有。另一种（简单但肮脏的 <3）方法是将 bind() 绑定到您想要阻止的所有端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:20:22.230

您可以通过 MaxUserPort 注册表值（从 Vista 开始适用）设置将用于系统上动态客户端（绑定到任何可用套接字）的端口范围。可以为 tcp 和 udp 套接字设置动态端口范围。以下链接中的更多详细信息：

[最大用户端口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)

[KB929851](http://support.microsoft.com/kb/929851)

因此，您可以根据需要设置范围（允许）

# sharepoint - 搜索属于特定 OU 的用户的自定义人员选择器

> ID：13876702
> 
> 赞同：1
> 
> 时间：2012-12-14T10:19:44.113
> 
> 标签：sharepoint, sharepoint-2010

我们需要有一个自定义人员选择器，它只能搜索属于 AD 中特定 OU 的用户。我们可以使用自定义 LDAP 查询创建自定义人员选择器吗？

同样对于特定页面，人员选择器应在一个 OU 中搜索用户，并在不同 OU 中搜索其他页面。因此，排除了使用 powershell 设置 LDAP 查询的选项。我必须制作自己的自定义人员选择器，但问题是我们不明白如何在代码中设置这些过滤器。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T14:07:30.513

我在传递中所做的是查询 /_vti_bin/search.asmx 共享点搜索服务。

范围设置为 SPSPeople。我喜欢使用 MSSQLFT 查询

您也应该能够过滤域名

# knockout.js - Knockoutjs 自定义绑定样式子

> ID：13876723
> 
> 赞同：0
> 
> 时间：2012-12-14T10:21:00.687
> 
> 标签：knockout.js, ko-custom-binding

我有一个自定义绑定。

```
<div data-bind="autocomplete : { inputStyle : { marginRight : marginR }}"></div> 
```

在我的初始化函数中，我这样做了。我添加了一个需要设置样式的输入框。

```
$element.append("<input type='text' data-bind='style='" + value.inputStyle + "' />"); 
```

我知道这行不通，但请有人帮我做对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:03:37.247

这是执行您要求的自定义绑定：

```
function toStyleStr (obj) {
    var result = "";
    $.each(obj, function (k,v) {
        result += k.toString() + ": " + ko.utils.unwrapObservable(v).toString() + ";"; 
    });    
    return result;               
}

ko.bindingHandlers.autocomplete = {
    init: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
            $element = $(element);
        $element.append("<input type='text' style='" + toStyleStr(value.inputStyle) + "' />");     
    }            
};

var model = {
    marginR: ko.observable("10px")
};
ko.applyBindings(model); 
```

这是一个工作小提琴：http: [//jsfiddle.net/RYnbR/2/](http://jsfiddle.net/RYnbR/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:53:23.130

好吧，我真的不明白你想做什么。但有一些评论：

```
$element.append("<input type='text' data-bind='style='" + value.inputStyle + "' /> 
```

不起作用。样式绑定接收具有样式和值的对象：类似于

```
$element.append("<input type='text' data-bind='style:{color:#ff0000}' />"); 
```

所以你可以做

```
$element.append("<input type='text' data-bind='style:{color:"+value.inputStyle.marginRight +"}'/>"); 
```

这假设 marginR 有一个颜色作为字符串。

但是为什么要对它进行数据绑定呢？你可以这样做：

```
$element.append("<input type='text' style='color:"+value.inputStyle.marginRight +"'/>") 
```

# git - git 的 CVS_RSH

> ID：13876731
> 
> 赞同：0
> 
> 时间：2012-12-14T10:21:42.403
> 
> 标签：git, ssh

我想为 git 指定 openssh 二进制文件的路径。对于 CVS，您可以使用

```
CVS_RSH="~/openssh/bin/ssh" 
```

在您的点文件中。git有等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:39:02.760

使用“GIT_SSH”。有关文档，请参阅[git(1)](http://www.kernel.org/pub/software/scm/git/docs/git.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:51:36.277

GIT_SSH 答案可能是您正在寻找的答案，但请注意，为了更好地控制连接，您可以指定 core.gitproxy 可执行文件。这将采用两个参数指定主机和端口，并可用于根据您尝试从中提取的主机进行任意复杂的连接（例如，通过代理或 ssh 隧道等）。

# asp.net-mvc - 视图内的 mvc 函数返回路由值

> ID：13876732
> 
> 赞同：0
> 
> 时间：2012-12-14T10:21:42.403
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在尝试使用函数在我的视图中返回路由值：

看法：

```
@functions {    
    public Dictionary<string, object> GetFilters()
    {
        var filters = new Dictionary<string, object>();
        var f_phrase = this.Request["f_phrase"] ?? string.Empty;
        var f_site = this.Request["f_site"] ?? string.Empty;
        var f_device = this.Request["f_device"] ?? string.Empty;
        var f_startdate = this.Request["f_startdate"] ?? string.Empty;
        var f_enddate = this.Request["f_enddate"] ?? string.Empty;
        var f_package = this.Request["f_package"] ?? string.Empty;

        filters.Add("f_phrase", f_phrase);
        filters.Add("f_site", f_site);
        filters.Add("f_device", f_device);
        filters.Add("f_startdate", f_startdate);
        filters.Add("f_enddate", f_enddate);
        filters.Add("f_package", f_package);

        return filters;
    }
} 
```

然后在我的链接上我希望能够做到这一点：

```
@Html.ActionLink("Export file", "Export", "Log", new { @GetFilters() }, new { @class="iconDocumentText"}) 
```

但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:26:32.950

从[MSDN](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)上的`routeValues`参数：

> 包含路由参数的对象。通过检查对象的属性通过反射检索参数。对象通常是使用对象初始值设定项语法创建的。

因此，您需要构造一个对象并返回它，而不是返回一个字典（不确定，但也许您可以使用`dynamic`/来实现这一点，`ExpandoObject`或者只是创建一个具有根据您的路由值命名的属性的自定义类型）。

例子：

```
public class FilterRouteValues
{
    public string f_phrase { get; set; }
    // ...
}

public FilterRouteValues GetFilters()
{
    // Read from request, fill an instance of FilterRouteValues
} 
```

标记：

```
@Html.ActionLink("Export file", "Export", "Log", GetFilters(), ...) 
```

# sql - 学说在多对多自引用关系上被计算在内

> ID：13876733
> 
> 赞同：2
> 
> 时间：2012-12-14T10:21:43.810
> 
> 标签：sql, symfony, doctrine-orm

我有一个可以有很多朋友的用户。表示关系是自引用的。我现在需要根据他们的性别计算我朋友的朋友数。到目前为止，我想出了以下解决方案。

我的用户实体：

```
<?php

namespace Acme\UserBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity(repositoryClass="Acme\UserBundle\Entity\Repository\UserRepository")
 * @ORM\Table(name="users")
 */
class User extends BaseUser
{

    /**
     * @ORM\ManyToMany(targetEntity="Acme\UserBundle\Entity\User", inversedBy="friendsOf")
     * @ORM\JoinTable(name="map_user_friend",
     *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="friend_id", referencedColumnName="id")}
     *      )
     */
    protected $friends;

    /**
     * @ORM\ManyToMany(targetEntity="Acme\UserBundle\Entity\User", mappedBy="friends")
     */
    private $friendsOf;

    /**
     * @ORM\Column(type="string", length=1, nullable=true)
     */
    protected $gender;

    // other fields ...

} 
```

我的 UserRepository 有以下方法：

```
public function getFriendsQuery(User $user)
{
    return $this->getEntityManager()->createQueryBuilder()
        ->select('u as user, COUNT(DISTINCT mf.id) as male_friends, COUNT(DISTINCT ff.id) as female_friends')
        ->from('Oneup\UserBundle\Entity\User', 'u')
        ->leftJoin('u.friendsOf', 'f')
        ->leftJoin('u.friendsOf', 'mf', 'with', 'mf.gender = :gender')->setParameter('gender', 'm')
        ->leftJoin('u.friendsOf', 'ff', 'with', 'ff.gender = :gender')->setParameter('gender', 'w')
        ->where('f = :user')->setParameter('user', $user)
        ->groupBy('u.id')
    ;
} 
```

在控制器中，我现在首先转储 SQL，`Doctrine\Common\Util\Debug::dump($qb->getQuery()->getSQL());`然后返回

```
SELECT u0_.username AS username0,
       u0_.username_canonical AS username_canonical1,
       -- ... --
       u0_.gender AS gender19,
       -- ... --
       COUNT(DISTINCT u1_.id) AS sclr32,
       COUNT(DISTINCT u2_.id) AS sclr33
FROM users u0_
LEFT JOIN map_user_friend m4_ ON u0_.id = m4_.friend_id
LEFT JOIN users u3_ ON u3_.id = m4_.user_id
LEFT JOIN map_user_friend m5_ ON u0_.id = m5_.friend_id
LEFT JOIN users u1_ ON u1_.id = m5_.user_id
AND (u1_.gender = ?)
LEFT JOIN map_user_friend m6_ ON u0_.id = m6_.friend_id
LEFT JOIN users u2_ ON u2_.id = m6_.user_id
AND (u2_.gender = ?)
WHERE u3_.id = ?
GROUP BY u0_.id 
```

参数适用`m`于男性、`f`女性和`21`当前用户。现在遵循奇怪的行为。`Doctrine\Common\Util\Debug::dump($qb->getQuery()->execute());`还给我

```
array (size=2)
  0 =>
    array (size=3)
      'user' => string 'Oneup\UserBundle\Entity\User' (length=28)
      'male_friends' => string '2' (length=1)
      'female_friends' => string '2' (length=1)
  1 =>
    array (size=3)
      'user' => string 'Oneup\UserBundle\Entity\User' (length=28)
      'male_friends' => string '0' (length=1)
      'female_friends' => string '0' (length=1) 
```

如果我直接在 mysql 中执行查询，我会得到另一个计数：

```
+--------------+-----------------+-----------------+
| username0    | sclr32 (male)   | sclr33 (female) |
+--------------+-----------------+-----------------+
| foobar12     | 1               | 2               |
+--------------+-----------------+-----------------+
| foobar2      | 2               | 0               |
+--------------+-----------------+-----------------+ 
```

哪个是对的。这是一个教义错误，还是我只是做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:44:15.800

要回答我自己的问题，错误在于存储库中的参数

```
 ->leftJoin('u.friendsOf', 'mf', 'with', 'mf.gender = :gender')->setParameter('gender', 'm')
   ->leftJoin('u.friendsOf', 'ff', 'with', 'ff.gender = :gender')->setParameter('gender', 'w') 
```

was wrong. doctrine takes the second value for both entries.

```
 ->leftJoin('u.friendsOf', 'mf', 'with', 'mf.gender = :male')->setParameter('male', 'm')
   ->leftJoin('u.friendsOf', 'ff', 'with', 'ff.gender = :female')->setParameter('female', 'w') 
```

# objective-c - Facebook 提要对话框中的 URL 方案

> ID：13876735
> 
> 赞同：0
> 
> 时间：2012-12-14T10:21:51.593
> 
> 标签：objective-c, xcode, facebook, facebook-graph-api

所以我终于在我的 facebook 帖子中使用属性参数获得了一个链接。我想我可以把我的 url 方案放在那里。但不幸的是，它说它不是一个有效的 url，这是有道理的。所以我再次寻找另一种解决方案。但是每个人似乎都在谈论 fb:// 而不是他们自己的应用程序 url 方案。

所以我创建了这个线程，希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:13:17.943

尝试使用 bit.ly（或其他一些 URL 缩短器）。

我最后一次尝试时，bit.ly 接受了任何 URI 模式，只是做了一个重定向。我过去曾成功地使用它来解决需要 HTTP 或 HTTPS 模式的输入。

此外，如果您愿意，可以在您自己的服务器上完成类似的逻辑。只需在 Facebook 上共享指向您自己服务器的链接，然后让您的服务器端脚本对您拥有的任何应用程序特定 URI 执行 301。

# curl - 是否可以使用 curl for couchdb 获得各种键的结果？

> ID：13876740
> 
> 赞同：1
> 
> 时间：2012-12-14T10:22:11.747
> 
> 标签：curl, couchdb

我在 couchdb 的关键字段中有一个键。我的密钥因每个文档而异。我需要获取各种键的文档：说第一个键是“123123”，第二个键是“234234”，我必须在一个查询中传递这些并使用 curl 命令获取两个键的结果。

在 SQL 中，我们可以这样做：

```
select * from table where user_id in "123123,234234"; 
```

同样，我需要使用 curl 在 couchdb 中执行此操作。这可以使用 curl 命令吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:15:40.727

是的：

`curl -X POST http://localhost:5984/mydb/_design/users/_view/by_user_id -d '{"keys": ["123123", "234234"]}' -H "Content-Type: application/json"`

[有关 CouchDB 视图查询选项的更多信息](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

# ruby-on-rails - 如何从 html 页面获取参数我 ruby

> ID：13876747
> 
> 赞同：0
> 
> 时间：2012-12-14T10:22:26.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

就像在java中一样，如果我们使用request.GetParameterById，我们可以从html页面中获取ID，然后我们将ID用于所需的查询，然后使用prepare语句形成完整的查询。

在rails中我发现我们必须使用find_by_id ..我还没有得到完整的细节如何使用它。任何人请清楚地解释我如何使用它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:22:05.757

如果你有这样的表格

```
<form action="/users/create" class="new_user" id="new_user" method="post">
  <label for="user_email">Email<br />
  <input id="user_email" name="user[email]" size="30" type="email" value="" /></div>
  <input name="commit" type="submit" value="Sign in" />
</form> 
```

在您的控制器“创建”操作中

```
def create
   email = params[:user][:email]
   #your code
end 
```

一个更简单的例子是

```
<input id="search" name="search" size="30" value="" /> 
```

你可以从相应的控制器动作中得到这个

```
search = params[:search] 
```

如果您看到日志，您可以看到这些参数是如何传递的（例如：log/development.log）

这是一个样本

```
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SOTgZaxt3oGsn0UQrK8Bz9dQgDjACGOIoJoxGsfCM7Q=", "user"=>{"email"=>"", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"} 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:24:36.067

使用哈希`params`来获取您的请求参数。它包含所有 post 和 get 参数。

在询问一些简单的东西之前，您应该阅读文档。

# android - 打包后是否可以提供 Android 应用配置

> ID：13876750
> 
> 赞同：0
> 
> 时间：2012-12-14T10:22:33.277
> 
> 标签：android

有没有办法在打包后配置 Android 应用程序的配置？

更具体地说，这里有一个有用的场景：

一家供应商公司 (Vendor) 正在开发一种应用程序，该应用程序可与通常由客户在内部托管的某些（非云）系统配合使用……例如 Exchange 服务器。

客户购买了此应用程序并希望为他们的环境配置它 - 配置服务器的主机，为 ssl 连接添加证书等。

在安装过程中是否有标准的方式来配置此配置？假设应用程序使用标准 SharedPreferences，而 IT 部门只是在将 APK 部署到设备上之前“丰富”了 APK，并使用了一些特定于其环境的值？

谢谢

瓦西尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:41:16.707

无法修改已签名的 apk 包。因此，您唯一的选择是在外部交付配置或使用正确的配置打包应用程序。

如果您的客户拥有自己的基础架构并且您的应用程序使用它运行。考虑为每个客户定制构建。

如果您的应用程序是对第三方制作的现有知名软件的补充。而且您假设会有很多客户，那么第一个选择不是您想要的。因此，您可以在用于安装应用程序的 URL 中传递一些配置。看看[这个](http://www.localytics.com/docs/android-market-campaign-analytics/)

# eclipse - 如何将 Eclipse 项目导入 IntelliJ IDEA？

> ID：13876752
> 
> 赞同：41
> 
> 时间：2012-12-14T10:22:42.417
> 
> 标签：eclipse, intellij-idea

我想将我的 Eclipse 项目导入 IntelliJ IDEA，所以我去了[IntelliJ IDEA 帮助页面](http://www.jetbrains.com/idea/webhelp/importing-eclipse-project-to-intellij-idea.html)：

> 如果 IntelliJ IDEA 中当前没有打开任何项目，请单击欢迎屏幕上的 Import Project。否则，选择文件 | 导入项目。

问题是欢迎屏幕上没有导入项目选项，文件菜单中也没有导入项目选项。

任何想法如何做到这一点？

我检查了更新，它告诉我我的 11.1.3 版本是最新的，即使帮助页面的标题栏中有 12.0。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-09-27T09:04:44.457

在**IntelliJ IDEA 14.1.4**中，您可以使用以下现有源导入项目：

*   **Eclipse**项目 ( `.project`) 或类路径 ( `.classpath`) 文件
*   **Maven**项目文件 ( `pom.xml`)
*   **Bnd/Bndtools**工作区 ( `workspace/cnf`)
*   **Flash Builder**项目文件 ( `.project`, `*.fxp`, `*.fxpl`)
*   **Gradle**构建脚本 ( `*.gradle`)

转到**File** → **New** → **Project from Existing Sources...</strong>，将打开一个对话框，允许您打开一个受支持的文件或目录。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-14T10:37:25.877

在 IntelliJ IDEA 11.1 中，您可以在“新建项目”对话框中找到导入选项。您可以在**文件 |找到它 新项目**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T10:39:46.777

在 IntelliJ IDEA 11 中，您应该使用`File`| `New Project`,**从外部模型导入项目**。

还要检查是否在|中启用了[Eclipse 互操作性](https://i.imgur.com/RlqKhKN.png)插件。.`Settings``Plugins`

# ruby-on-rails - Rails 应用程序 - jquery 在生产中损坏，在开发中很好。链轮错误？

> ID：13876754
> 
> 赞同：1
> 
> 时间：2012-12-14T10:22:45.047
> 
> 标签：ruby-on-rails

我有一个在本地开发环境中运行良好的小型 Rails 应用程序。我已经由一名自由职业者完成了一些工作，在本地运行良好，但似乎在我的生产服务器上造成了许多问题。

有一大堆 Gem 问题（主要围绕 therubyracer 和 libv8）阻止应用程序启动。我通过 Gemfile 的反复试验修复了问题，并且已经能够启动该应用程序。

现在，虽然应用程序启动了，但 jQuery 根本不工作，我在浏览器中看到以下错误：

```
Uncaught Error: Sprockets::FileNotFound: couldn't find file 'jquery-fileupload/basic'
(in /home/pastonpaper/pastpaper/app/assets/javascripts/application.js:19) application.js:1
Uncaught ReferenceError: $ is not defined www.pastonpaper.com:19
Uncaught ReferenceError: jQuery is not defined 
```

我不知道如何解决这个问题 - 谁能给我一些指示？正如我所说，在我单独的开发环境中一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-16T03:45:08.233

只需将此行包含在 config 目录下的 production.rb 文件中，它就可以正常工作。

```
config.assets.debug = true 
```

# ruby-on-rails - Rails finder 方法中的类型转换

> ID：13876758
> 
> 赞同：0
> 
> 时间：2012-12-14T10:23:02.040
> 
> 标签：ruby-on-rails, ruby

我有一个名为 bill_date 的列，其数据类型为没有时区的时间戳。

现在我想用 bill_date 搜索记录。用户将输入日期，如 2012-12-09。

我想使用 Bill.find_by_bill_date(2012-12-09)。

以上不会给出结果。因为我们必须进行类型转换。请给我一些建议。我不想使用 where 子句或条件。我只想使用 find_by 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:28:57.857

您可以像这样向 Bill 类添加一个方法：

```
def self.find_by_bill_date(date)
  where("DATE(bill_date) = DATE(?)", date).first
end 
```

我知道您说过您不想使用 where 子句，但无论如何，动态查找器方法 (find_by_*) 做的事情完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:32:11.840

将 Date.today 放入时间戳字段不是一个好习惯。如果您想现在使用它，最好使用 Time.now 而不是 Date.today ，或者将列更改为 date 。

编辑：在类型转换上：

```
>> h.published_at_before_type_cast
=> "2012-11-15 19:11:15.517923" 
```

# unity3d - CG：指定不在顶点和片段着色器之间插值的变量

> ID：13876763
> 
> 赞同：5
> 
> 时间：2012-12-14T10:23:27.517
> 
> 标签：unity3d, shader, interpolation, cg

我`GC`用于在里面编写着色器`Unity3D`。

我正在使用顶点颜色属性将一些参数传递给着色器。它们不会用于定义颜色，并且应该从顶点着色器转发到像素着色器而不修改它们。

这是我从 Unity3D 输入到顶点着色器的结构：

```
struct appdata_full {
    float4 vertex : POSITION;
    float4 tangent : TANGENT;
    float3 normal : NORMAL;
    float4 texcoord : TEXCOORD0;
    float4 texcoord1 : TEXCOORD1;
    fixed4 color : COLOR;
#if defined(SHADER_API_XBOX360)
    half4 texcoord2 : TEXCOORD2;
    half4 texcoord3 : TEXCOORD3;
    half4 texcoord4 : TEXCOORD4;
    half4 texcoord5 : TEXCOORD5;
#endif
}; 
```

这是顶点着色器作为片段输入返回的结构：

```
struct v2f {
  float4 pos : SV_POSITION;
  float2  uv : TEXCOORD0;
  fixed4 col: COLOR;           
}; 
```

如果我只是简单地将参数转发给片段着色器，当然它会被插值：

```
v2f vert (appdata_full v)
{

  v2f output;
  //....
  output.col = v.color;
} 
```

我想将`v.color`未插值的参数传递给片段着色器。这可能吗？如果是的话怎么办？

* * *

编辑

就像蒂姆指出的那样，这是预期的行为，因为如果颜色从顶点着色器传递到片段，着色器除了插值颜色之外什么也做不了。我将尝试更好地解释我想要实现的目标。我使用每个顶点颜色来存储颜色以外的其他类型的信息。在不告诉我正在做什么的所有细节的情况下，假设您可以将每个颜色顶点视为一个 id（同一三角形的每个顶点将具有相同的颜色。实际上是同一网格的每个顶点）。

所以我使用颜色技巧来掩盖一些参数，因为我没有其他方法可以做到这一点。现在，这条信息必须以某种方式在片段着色器中可用。如果作为顶点着色器的输出参数传递，则编码为颜色的此信息将被插值到无法再使用的片段中。

我正在寻找一种在片段着色器之前传播此信息不变的方法（也许可以使用全局变量或类似的东西？如果是的话如何？）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T22:07:38.667

我不确定这是否可以作为答案，但对于评论来说有点多。正如 Bjorke 指出的那样，片段着色器总是会收到一个插值。如果/当 Unity 支持 Opengl 4.0 时，您可能可以访问[Interpolation qualifiers](http://www.opengl.org/wiki/Type_Qualifier_%28GLSL%29#Interpolation_qualifiers)，即禁用插值的 'flat'，从[激发的 vertex](http://www.opengl.org/wiki/Provoking_Vertex#Provoking_vertex)派生所有值。

也就是说，尝试为三角形的所有顶点分配相同的“颜色”值的问题是顶点着色器迭代顶点一次，而不是每个三角形。总会有一个“边界”区域，其中某个顶点与具有不同“颜色”或“id”的其他顶点共享多条边，请参见下面我的愚蠢示例。当应用于 (0,0,0) 处的框时，顶部为红色，底部为绿色，中间为蓝色。

```
Shader "custom/colorbyheight" {
Properties {
 _Unique_ID ("Unique Identifier", float) = 1.0
}
SubShader {
Pass {
  CGPROGRAM
  #pragma vertex vert
  #pragma fragment frag
  #include "UnityCG.cginc"
  struct v2f {
      float4 pos : SV_POSITION;
      fixed4 color : COLOR;
  };
  uniform float _Unique_ID;
  v2f vert (appdata_base v)
  {
      v2f o;
      o.pos = mul (UNITY_MATRIX_MVP, v.vertex);
      float3 worldpos = mul(_Object2World, v.vertex).xyz;
      if(worldpos[1] >= 0.0)
        o.color.xyz = 0.35;  //unique_id = 0.35
      else
        o.color.xyz = 0.1;   //unique_id = 0.1
      o.color.w = 1.0;
      return o;
  }

  fixed4 frag (v2f i) : COLOR0 { 
    // local unique_id's set by the vertex shader and stored in the color
    if(i.color.x >= 0.349 && i.color.x <=0.351)
        return float4(1.0,0.0,0.0,1.0); //red
    else if(i.color.x >= 0.099 && i.color.x <=0.11)
        return float4(0.0,1.0,0.0,1.0); //green

    // global unique_id set by a Unity script
    if(_Unique_ID == 42.0)
        return float4(1.0,1.0,1.0,1.0); //white

    // Fallback color = blue
    return float4(0.0,0.0,1.0,1.0);
  }
  ENDCG
}
} 
} 
```

在您的附录说明中，您说“实际上是同一网格的每个顶点”。如果是这样，为什么不使用可修改的属性，就像我上面提到的那样。每个网格只需要一个脚本来更改 unique_id。

```
public class ModifyShader : MonoBehaviour {
public float unique_id = 1;
// Use this for initialization
void Start () {

}

// Update is called once per frame
void Update () {
    renderer.material.SetFloat( "_Unique_ID", unique_id );
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-22T12:37:28.400

我知道这是一个旧线程，但无论如何都值得回答，因为这是谷歌搜索结果中的佼佼者。您现在可以对常规 CG 着色器中的变量使用 nointerpolation 选项。IE

```
nointerpolation fixed3 diff : COLOR0; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-14T09:54:52.143

这是一个非常古老的线程，但我最近遇到了类似的问题，我找到了一个超级简单的答案。OSX Mavericks 现在支持 OpenGL 4.1，所以很快它就不会成为问题，但 Unity3d 可能需要一段时间才能接受它。无论如何，即使在早期的 OSX（例如 Mountain Lion）上，也有一种巧妙的方法可以在 Unity 中启用平面着色！

下面的着色器将完成这项工作（关键部分是带有#extension 的行，否则使用关键字 flat 会出现编译错误”

```
Shader "GLSL flat shader" {
SubShader {
  Pass {
     GLSLPROGRAM

     #extension GL_EXT_gpu_shader4 : require
     flat varying vec4 color;

     #ifdef VERTEX
     void main()
     {
        color = gl_Color;
        gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
     }
     #endif

     #ifdef FRAGMENT
     void main()
     {
        gl_FragColor = color; // set the output fragment color
     }
     #endif

     ENDGLSL
  }
  }
} 
```

通过结合以下内容得到它： [http://poniesandlight.co.uk/notes/flat_shading_on_osx/](http://poniesandlight.co.uk/notes/flat_shading_on_osx/) [http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Debugging_of_Shaders](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Debugging_of_Shaders)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T06:19:04.930

GPU 将始终在值之间进行插值。如果您想要一个三角形的常数值，您需要为该三角形的所有顶点设置相同的值。这有时可能效率低下，但这就是 OpenGL（和 DirectX）的工作方式。没有“面子”价值的固有概念。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T19:47:48.443

你可以这样做：[glShadeModel(GL_FLAT)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368583%28v=vs.85%29.aspx)。这会关闭所有片段着色器输入的插值，并且在较旧的 OpenGL 中也可用（4.0 之前）。

如果您有一些想要插值的输入而一些您没有，则使用 GL_FLAT 渲染一次到与输出分辨率相同的纹理，然后使用 GL_SMOOTH 再次渲染并采样纹理以读取每个像素的平面值（同时也以通常的方式获得插值）。

如果您可以改用 DirectX9，则可以在单个片段着色器输入（着色器模型 4 或更高版本）上使用[nointerpolation修改器。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509668%28v=vs.85%29.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-22T06:45:18.610

以下步骤对我有用。

不幸的是，DX 使用顶点 0 作为激发顶点，而 GL 默认使用 2。

您可以在 GL 中更改它，但 glProvokingVertex 似乎没有暴露。

我们正在做平面着色，这显着减少了我们的顶点数。

我们必须重新排序三角形并以特殊方式计算法线（如果有人感兴趣，我可以发布示例源）。

问题是我们必须在 GL 和 DX 上有不同的网格，因为三角形索引需要旋转，以便三角形使用适当的激发顶点。

也许有一些方法可以通过插件执行 GL 命令。

# android - Viewpager 显示两个图像，高分辨率和低分辨率，加载时屏幕黑屏

> ID：13876767
> 
> 赞同：0
> 
> 时间：2012-12-14T10:23:56.763
> 
> 标签：android, image, background, loading, android-viewpager

再次面临一个“奇怪”的问题。

我使用 Viewpager 来显示 2 个单独的图像（Viewpager 仅包含一个布局和 2 个图像视图）。这个概念是，从本地文件缓存（立即）显示一个低分辨率图像，同时加载高分辨率图片并显示它。

问题是：只使用低分辨率图片，图片立即显示，一切都很完美，但是一旦启用高分辨率图片（要显示），如果用户滑动非常快，屏幕会“短时间”保持黑色"（500 毫秒到 1.5 秒）和低分辨率图像从不显示。只有高清图片。。

也许有人遇到过类似的问题，请提供任何帮助:)谢谢！

ViewPager 代码：

```
/**
 * Create and add a new page of the image at the given position.
 * 
 * @param collection
 * @param position
 */
@Override
public Object instantiateItem (View collection, final int position) {

    Log.v(TAG, "instantiateItem: pos: " +position);

    final Context context = collection.getContext();

    RelativeLayout layout = new RelativeLayout(context);
    ImageViewTouch imageView = new ImageViewTouch(context);
    ImageViewTouch imageView2 = new ImageViewTouch(context);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

    layout.addView(imageView, lp);        
    layout.addView(imageView2, lp);

    imageView.setOnSingleTapConfirmedListener((OnImageViewSingleTapConfirmedListener) context);
    imageView2.setOnSingleTapConfirmedListener((OnImageViewSingleTapConfirmedListener) context);
    imageView2.setVisibility(View.GONE);

    if (position == restorePageNumber) {
        loadBitmap(context, position, imageView, imageView2, restoreZoomLevel);

        Log.w(TAG, "zoom level regocnized for pos: " + position + " resetting...");
        restorePageNumber = Constants.INVALID_INT;
        restoreZoomLevel = Constants.INVALID_LONG;          
    } else {
        loadBitmap(context, position, imageView, imageView2, Constants.INVALID_LONG);
    }

    imageView.setFitToScreen(true);
    imageView2.setFitToScreen(true);

    activePages.put(position, imageView2);
    ((ViewPager) collection).addView(layout);

    return layout;
} 
```

> ```
> protected void loadBitmap (Context context, int position, 
>   ImageViewTouch imageView, ImageViewTouch imageView2, 
>   float restoreZoomLevel) {
>     Photo photo = getPhotoAtPosition(position);
>     Log.v(TAG, "loading photo. pos: " + position + " id: " + photo.getId());
>     // show small image first
>     if (!(photo instanceof CameraPhoto)) {
>         StorageManager.retrieveBitmapBackgroundWithImageview(context, photo,
>                 Photo.SIZE_SMALL, imageView, true, Constants.INVALID_LONG);
>     }
>     // afterwards replace with big image
>     StorageManager.retrieveBitmapBackgroundWithImageview(context, photo,
>             Photo.SIZE_LARGE, imageView2, true, restoreZoomLevel);
> } 
> ```

在那些方法 (retrieveBitmapBackgroundWithImageview) 中，图像在背景中加载，然后设置为图像视图。

设置大位图似乎有一些问题。即使带有大位图的 Imageview 保持隐藏 (View.GONE)，并且只显示本地缓存图像，如果快速滑动，ViewPager 在加载页面时会保持黑色一段时间（如上，500ms 到 1.5s）： )

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:54:13.077

如果您的意思是快速滑动到很多页面，那么加载所有这些视图就会出现问题。您是否取消/中断超出范围`ViewPager`（不在视图或缓存中）的 loadBitmap 任务？

而且，您是否处理线程中的并发性？如果您总是想首先加载`ViewPager's`视图或缓存中的页面，您应该覆盖`Comparator`并让它在页面上进行比较。比较器可以用在一个`PriorityBlockingQueue`可以用在一个`Executor`

# windows - 使用批处理文件查找文件并返回完整路径

> ID：13876771
> 
> 赞同：17
> 
> 时间：2012-12-14T10:24:12.230
> 
> 标签：windows, file, batch-file, directory

是否可以创建一个搜索文件名的批处理文件，然后返回其路径以便我可以在变量中使用它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T10:33:00.290

```
for /r C:\folder %%a in (*) do if "%%~nxa"=="file.txt" set p=%%~dpnxa
if defined p (
echo %p%
) else (
echo File not found
) 
```

如果找到您搜索的文件，它会将变量设置为`%p%`文件的完整路径，包括名称和扩展名。

如果您只想要路径（如在没有文件的文件夹路径中），请`set p=%%~dpa`改用。

***注意***：如果有超过 1 个同名文件，则该变量将设置为找到的最后一个。循环行之后的脚本`for`也不是必需的，只是为了告诉你它是否找到任何东西:)

如果您想使用`dir`命令执行此操作，请使用此命令，同样的规则适用

```
for /f "tokens=*" %%a in ('dir acad.exe /b /s') do set p=%%a 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-21T18:45:42.550

做这个： -

`for /f "delims=" %%F in ('dir /b /s "C:\File.txt" 2^>nul') do set MyVariable=%%F`

假设您正在搜索`C`驱动器`File.txt`。

# javascript - Knockout.js：如果绑定具有给定值，则设置默认文本

> ID：13876777
> 
> 赞同：2
> 
> 时间：2012-12-14T10:24:30.843
> 
> 标签：javascript, knockout.js

`text=''`只要 model.id 为空，我想重置输入字段 ( ) 的值。

如何绑定输入值以响应可观察对象的某个值？看起来像：

```
<input type="text" data-bind="text: if (model.value == null) { '' }" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:32:04.593

您可以`?`在数据绑定属性中使用运算符：

```
<input type="text" data-bind="value: model.id() == null ? 'Default Value' : model.value()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:28:40.380

在您的视图模型中，启动属性值如下：

```
var model.value = ko.observable(''); 
```

在 HTML 中，您不必使用条件表达式

```
data-bind="text: model.value" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:45:19.397

检查这些代码

```
<input type="text" data-bind="value: id() == true? 'Value is Red' : value()" />

function viewModel() {
    this.id = ko.observable(true);
    this.value = ko.observable("Value is Green");
}
ko.applyBindings(new viewModel()); 
```

[http://jsfiddle.net/d4SKr/](http://jsfiddle.net/d4SKr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T21:11:58.587

正确的答案应该是创建一个计算的 observable 来获取标签。

```
self.getLabel = ko.pureComputed(function() {
    return this.value() === null ? 'Value is red' : value();
});

<input type="text" data-bind="text: getLabel" /> 
```

# ios-simulator - 有没有办法在 iPhone 模拟器中使用 url 启动 MobileSafari.app

> ID：13876781
> 
> 赞同：2
> 
> 时间：2012-12-14T10:24:42.587
> 
> 标签：ios-simulator, mobile-safari

我们想在尽可能多的浏览器中测试我们的网站，在我们的持续集成服务器中，在 ios 中也是如此。我们想通过打开 safari 的 url 来启动 ios 模拟器。我们可以这样开始 safari：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator6.0.sdk/Applications/MobileSafari.app/MobileSafari

但是我们还没有弄清楚如何将 url 作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T12:54:51.667

它适用于 Jan 命令，但您必须更正 SDK“iPhoneSimulator6.0.sdk”的路径。我将命令运行到 iOS 7 SDK 并且每次我想打开的页面都打开了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:17:09.337

试试 -u：

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator6.0.sdk/Applications/MobileSafari.app/MobileSafari -u [http://www.google.com](http://www.google.com)

# python - 从列表理解输出有效地生成 numpy 数组？

> ID：13876789
> 
> 赞同：2
> 
> 时间：2012-12-14T10:25:17.537
> 
> 标签：python, numpy

有没有比使用`numpy.asarray()`以 a 形式从输出生成数组更有效的方法`list`？

这似乎是在复制内存中的所有内容，这对于非常大的数组似乎不会那么有效。

**（更新）示例：**

```
import numpy as np
a1 = np.array([1,2,3,4,5,6,7,8,9,10]) # pretend this has thousands of elements
a2 = np.array([3,7,8])

results = np.asarray([np.amax(np.where(a1 > element)) for element in a2]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T18:20:17.897

我通常使用`np.fromiter`：

```
results = np.fromiter((np.amax(np.amax(np.where(a1 > element)) for element in a2), dtype=int, count=len(a2)) 
```

您不需要指定`count`，但它允许 numpy 预分配数组。以下是我在[https://www.pythonanywhere.com/try-ipython/](https://www.pythonanywhere.com/try-ipython/)上所做的一些时间安排：

```
In [8]: %timeit np.asarray([np.amax(np.where(a1 > element)) for element in a2])                                 
1000 loops, best of 3: 161 us per loop

In [10]: %timeit np.frompyfunc(lambda element: np.amax(np.where(a1 > element)),1,1)(a2,out=np.empty_like(a2))   
10000 loops, best of 3: 123 us per loop

In [13]: %timeit np.fromiter((np.amax(np.where(a1 > element)) for element in a2),dtype=int, count=len(a2))
10000 loops, best of 3: 111 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:58:14.840

`np.vectorize`不会按照您想要的方式工作，因为它不尊重`out`参数。但是，较低级别`np.frompyfunc`将：

```
np.frompyfunc(lambda element: np.amax(np.where(a1 > element)),
              1, 1)(a2, out=np.empty_like(a2)) 
```

# php - 最小的 PHP Phar 存根

> ID：13876791
> 
> 赞同：6
> 
> 时间：2012-12-14T10:25:36.237
> 
> 标签：php, phar

我目前正在为我的框架试验一种扩展机制。每个模块至少包含一个 PHP 文件（定义一个类）和一个 XSL 样式表，但可能会涉及到其他几个文件，所以我立即想到了使用 Phars。

一切都很好地结合在一起，但我注意到如果我不使用`createDefaultStub()`而是按照以下代码片段构建 Phar，那么结果是大小的四分之一 - 并且比压缩版本小。

```
$phar = new Phar('Example.phar', 0, 'Example.phar');
$phar->buildFromDirectory(__DIR__ . '/src');
$phar->setStub('<?php __HALT_COMPILER();');
$phar->setSignatureAlgorithm(Phar::SHA256);
$phar->compress(Phar::GZ); 
```

示例文件大小：

```
8799 14 Dec 09:37 ExampleCog.phar (using createDefaultStub())
2143 14 Dec 10:08 ExampleCog.phar (using __HALT_COMPILER())
3373 14 Dec 10:08 ExampleCog.phar.gz (consistent with either method) 
```

Phar 将仅用于将特定于模块的文件捆绑在一起，并将包含在框架中——在这种情况下独立运行没有任何意义。我想我的问题是，我错过了什么——如果有的话——使用最小的存根代码？为什么压缩版本总是一样的大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T22:15:16.440

> 我想我的问题是，我错过了什么——如果有的话——使用最小的存根代码？

在[文件格式文档](http://php.net/phar.fileformat.stub)中，默认存根被描述为：

> 基于 phar 的 Phar 存档的默认存根包含大约 7k 的代码，用于提取 phar 的内容并执行它们。

然后它指向[Phar::createDefaultStub](http://php.net/phar.createdefaultstub)，它说：

> 此方法提供了一种简单易用的方法来创建将从 phar 存档运行启动文件的存根。此外，可以指定不同的文件来从命令行和通过 Web 服务器运行 phar 存档。加载程序存根还调用 Phar::interceptFileFuncs() 以允许轻松捆绑访问文件系统的 PHP 应用程序。**如果 phar 扩展不存在，加载程序存根会将 phar 存档解压缩到临时目录，然后对文件进行操作。**关闭功能会在退出时擦除临时文件。

添加了重点，因为这就是默认存根如此大的原因。如果您可以假设您将始终在 PHP 5.3 或更高版本下运行，那么您可能不需要默认存根并且可以坚持使用最小存根`__HALT_COMPILER`

> 为什么压缩版本总是一样的大小？

再次深入文件格式文档，有一个[归档格式之间的比较](http://php.net/phar.fileformat.comparison)，这解释了 Phar 执行每个文件和整个归档压缩。您可能会看到类似的压缩大小，因为 gzip 无法进一步压缩数据。这是猜测。

# hibernate - 一对多关系的 JPA/Hibernate 映射表

> ID：13876799
> 
> 赞同：5
> 
> 时间：2012-12-14T10:26:06.720
> 
> 标签：hibernate, jpa, one-to-many

我只使用 JPA 注释并使用休眠 4.0.1 作为 JPA 实现。

我有一`Assessment`堂课有两组`Comment`：

```
@Entity
@Table(name = "ASSESSMENT")
public class Assessment{

    @OneToMany(fetch = FetchType.EAGER)
    private Set<Comment> auditComments = new HashSet<Comment>();

    @OneToMany(fetch = FetchType.EAGER)
    private Set<Comment> comments = new HashSet<Comment>();
} 
```

*（我跳过了 getter、setter、级联注释和其他不相关的代码行）*

评论：

```
@Entity
@Table(name = "COMMENT")
public class Comment{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(columnDefinition = "text")
    private String text;
} 
```

现在，因为 a`Comment`没有返回的引用`Assessment`（这是故意的），我不能使用*mappedBy*属性，Hibernate 需要在`Comment`and之间创建一个映射表`Assessment`。默认情况下，它被命名为 ASSESSMENT_COMMENT。

如果我只有一组`Comment`in `Assessment`，那会很好用。ASSESSMENT_COMMENT 将只有两列：

```
[ASSESSMENT_ID, COMMENT_ID] 
```

这将完美地代表一对多的关系。

**现在问题来了：**

因为我`Comment`只有两个，所以 Hibernate 尝试仅使用一个 ASSESSMENT_COMMENT 表来映射这两个集合。该表有 3 列：

```
[ASSESSMENT_ID, COMMENT_ID, AUDITCOMMENT_ID] 
```

最重要的是，这 3 列设置为不可为空。

那肯定行不通。例如，如果我在 auditComments 中只有一项，而在评论中没有，hibernate 会尝试在 COMMENT_ID 中插入一行空值，这会创建 SQL 异常。

**问题：**

对我来说，它看起来像一个错误。应该有两个映射表，而不是一个。

那么，1）它是 Hibernate 中的一个已知错误吗？2）有没有办法解决这个问题？我可以强制 Hibernate 创建两个映射表，每个映射表一个。请记住，我无法更改`Comment`类以引用`Assessment`（业务逻辑要求）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T10:38:17.857

首先，您可以使用评论表中的两列来指向他们的评估：

```
@OneToMany(fetch = FetchType.EAGER)
@JoinColumn(name = "audit_commented_assessment_id")
private Set<Comment> auditComments = new HashSet<Comment>();

@OneToMany(fetch = FetchType.EAGER)
@JoinColumn(name = "commented_assessment_id")
private Set<Comment> comments = new HashSet<Comment>(); 
```

如果您想要两个连接表，只需这样说：

```
@OneToMany(fetch = FetchType.EAGER)
@JoinTable(name = "assessment_audit_comment",
           joinColumns = @JoinColumn(name = "assessment_id"),
           inverseJoinColumns = @JoinColumn(name = "comment_id"))
private Set<Comment> auditComments = new HashSet<Comment>();

@OneToMany(fetch = FetchType.EAGER)
@JoinTable(name = "assessment_comment",
           joinColumns = @JoinColumn(name = "assessment_id"),
           inverseJoinColumns = @JoinColumn(name = "comment_id"))
private Set<Comment> comments = new HashSet<Comment>(); 
```

这当然在[文档](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html_single/#collections-mapping)中进行了解释。

# oracle - 具有两列的 LISTAGG 函数

> ID：13876802
> 
> 赞同：23
> 
> 时间：2012-12-14T10:26:16.087
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我有一张这样的桌子（报告）

```
--------------------------------------------------
|  user_id |  Department | Position  | Record_id |
--------------------------------------------------
|  1       |  Science    | Professor |  1001     |
|  1       |  Maths      |           |  1002     |
|  1       |  History    | Teacher   |  1003     |
|  2       |  Science    | Professor |  1004     |
|  2       |  Chemistry  | Assistant |  1005     |
-------------------------------------------------- 
```

我想得到以下结果

```
 ---------------------------------------------------------
   | user_id  |  Department+Position                       |
   ---------------------------------------------------------
   |  1       | Science,Professor;Maths, ; History,Teacher |
   |  2       | Science, Professor; Chemistry, Assistant   |
   --------------------------------------------------------- 
```

这意味着我需要将空白空间保留为“”，如您在结果表中所见。现在我知道如何使用 LISTAGG 函数，但仅限于一列。但是，我无法完全弄清楚如何同时处理两列。这是我的查询：

```
SELECT user_id, LISTAGG(department, ';') WITHIN GROUP (ORDER BY record_id)
FROM report 
```

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-14T10:28:38.723

它只需要在聚合中明智地使用连接：

```
select user_id
     , listagg(department || ',' || coalesce(position, ' '), '; ')
        within group ( order by record_id )
  from report
 group by user_id 
```

即`department`用逗号聚合连接，如果为NULL，则用空格`position`替换。`position`

# zend-framework - Zend_Navigation - 将菜单项设置为在控制器中可见？

> ID：13876805
> 
> 赞同：1
> 
> 时间：2012-12-14T10:26:22.790
> 
> 标签：zend-framework, zend-navigation

Zend_Navigation 问题

我希望菜单项仅在某些条件适用时才可见。所以最初在我的 nav.xml 我有

```
 <item_one>...<visible>0</visible></item_one> 
```

如果满足条件，是否可以设置`item_one`为可见？`controller->init()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:18:43.133

```
$this->view->navigation()->findBy('property_name','value')->setVisible(true); 
```

# python - tkinter 快捷方式无法启用

> ID：13876809
> 
> 赞同：2
> 
> 时间：2012-12-14T10:26:37.470
> 
> 标签：python, tkinter, keyboard-shortcuts

我正在编写的程序中的快捷方式用完了，而且其中有很大一部分我发现无法启用。我开始认为它可能与操作系统或桌面相关，所以我告诉你我在 KDE 下运行 Fedora Linux。

这是我用来探索关键问题的小程序：

```
#!/usr/bin/env python   
from Tkinter import *    
root = Tk()
text=Text(root)    
text.pack(side=LEFT, fill=BOTH, expand = YES)

def key(event):
    print "pressed", repr(event.char)

def testfun(a):
    print"test worked, pressed %s: control key %s" % (repr(event.char),str(a))  

text.bind("<Key>", key)
for i in range(10):
    text.bind('<Control-'+str(i)+'>',  lambda event,arg=i:testfun(arg,event))

mainloop() 
```

（我只对 ctrl-number 快捷方式有问题，但让我们从这里开始）。

我的问题： Ctrl-6...Ctrl-0 被拦截，但我找不到制作 Ctrl-1..Ctrl-5 的方法！

1..6 的示例输出为：

1：按下“1”

2：按下''

3：按下'\x1b'

4：按下'\x1c'

5：按下'\x1d'

6：测试成功，按下'\x1e'：控制键6

我还尝试将快捷方式绑定到 root，并执行*return 'break'*，但没有任何效果。

你有什么主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:04:40.750

以下是对您的代码的一些修复，使其可以正常工作：

首先，`key`函数应该使用`keysym`member 而`char`不是`event`：

```
def key(event):
    print "pressed", repr(event.keysym) 
```

那么你的绑定函数应该只使用这个`key`函数，不需要那个 lambda。你也应该 bind `<Control-Key-1>`, not `<Control-1>`, （后者指的是缪斯按钮），所以：

```
for i in range(10):
    text.bind('<Control-Key-'+str(i)+'>',  key) 
```

你可以擦除这条线：

```
#text.bind("<Key>", key) 
```

您还可以像这样绑定小写字母：

```
for i in range(ord('a'), ord('z') + 1):
    text.bind('<Control-Key-'+chr(i)+'>',  key) 
```

希望这可以帮助。

# android - 一般：如何更改 Android 核心 API 类？

> ID：13876810
> 
> 赞同：4
> 
> 时间：2012-12-14T10:26:42.180
> 
> 标签：android, api, operating-system, patch

这只是我的信息的一般问题。我知道如何创建标准的 Android 应用程序，但我想知道：人们怎么可能/如何增强 Android 核心功能并更深入地挖掘系统？

例如：假设我想修改被许多应用程序使用的[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)类。因此，例如，可以调整类，以便在下载进度下方的通知栏中显示的下载文本以某种方式更改。

对不起以下愚蠢的问题，但我不知道这些高级主题，这就是我在这里问的原因;-)

*   可以更改（例如）DownloadManager 类，使其具有扩展功能，然后由 3rd 方应用程序使用，对吗？
*   然后可以将修补的类放在 Play 商店中供其他人下载/扩展他们的 DownloadManager 功能吗？
*   人们是否需要 Root 才能安装这样的更改？
*   最重要的是：有人如何更改 Android API 类？我在这里真的是个菜鸟：我不知道从哪里获取源代码，如何用增强的类替换标准，需要什么等等。甚至有关于这样的高级主题的教程吗？

请给我一点启发:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:45:22.793

> 可以更改（例如）DownloadManager 类，使其具有扩展功能，然后由 3rd 方应用程序使用。

是的，当然，Android 源代码是在 Apache 许可下开放的，你可以修改这个源代码，并公开发布到世界上。关于类和许多其他类的一些细节`DownloadManager`，在 Android OS 结构中，这些类是在上层编程的，通常完全用 Java 编写。

> 然后可以将修补的类放在 Play 商店中供其他人下载/扩展他们的 DownloadManager 功能吗？

我不太明白你的问题。在 Play 商店（和另一个 android 应用商店）中，人们上传他们的**应用程序**（用有趣的一句话，上传的源代码已经编译），那么如何上传源代码以供用户扩展他们的应用程序呢？

您可以将您的源代码公开到 github，或者程序员经常遇到的其他地方，这样他们就可以查看您的源代码，并且经常给您提供有价值的想法和意见:)

> 人们是否需要 Root 才能安装这样的更改？

如果是高级用户，他们可以为他们的设备安装新的 Android 操作系统。但我认为，这个答案比你真正需要的还要远。

> 从哪里获得源代码，如何用增强的类替换标准，需要什么等等。甚至有关于这样的高级主题的教程吗？

在 Android SDK 文件夹中，有一个名为“Source”的文件夹，你可以去那里看到很多 Android 源代码。您可以接受、阅读和修改您想要的内容。Android的某些部分不在这里，您应该为此谷歌，在互联网上很容易找到。

但是你应该记住，当你修改这个或那个类时，它不再属于Android OS，你必须将这个类文件作为普通类导入到你的项目中。

所以，如果你想修改基本的 Android API：这些 API 通常都是用 Java 编写的，你仔细阅读并理解它们，如果你想修改一些部分，然后将这个类导入你的项目。

最后一句话，为什么你应该这样做:) 因为你可以**扩展**你想要的类，并为这个类添加一些额外的特性。它更容易，更好。

希望这有帮助:)

# c# - 如何在 BLToolkit.3 中使用 InsertOrReplace

> ID：13876811
> 
> 赞同：3
> 
> 时间：2012-12-14T10:26:41.687
> 
> 标签：c#, identity-column, bltoolkit

我开始使用 BLToolkit 并且有一个新的优势：InsertOrReplace 当我尝试使用它时出现异常：“InsertOrUpdate 方法不支持标识字段'Margin.id'” 我的模型在这里：

```
[TableName("Margin")]
    public class Margin
    {
      [PrimaryKey, Identity]    public int      id;
      [NotNull]                 public string   StoreID;
      [PrimaryKey]              public int?     PrTypeID;
                                public decimal  MarginRate;
      [Association(ThisKey = "PrTypeID", OtherKey = "ProductID", CanBeNull = true)] public Product Product;

    } 
```

调用方法：

```
 db.InsertOrReplace(new CSSWarranty.DataModel.DataModel.Margin()
                                      {
                                          MarginRate = newMargin.Margin,
                                          PrTypeID = newMargin.ProductTypeID == 0 ? null : newMargin.ProductTypeID,
                                          StoreID = newMargin.StoreID,
                                          id = newMargin.MarginID
                                      }); 
```

可能有人可以说如何使用下一个构造： db.Margin.InsertOrUpdate(x,y) 大家好！

我不明白为什么这个例子有效：

```
[TableName("Notification")]
    public class Notification
    {
        [PrimaryKey]    public      string NotificationID;
                        public      string     Note;
    } 
```

称呼：

```
 var db = new RetailerDb()
db.InsertOrReplace(new DataModel.DataModel.Notification()
                              {
                                  Note = note,
                                  NotificationID = "ConfirmNote"
                               }); 
```

数据库类：

```
private var db = new RetailerDb();

public class RetailerDb : DbManager
{
    public RetailerDb() : base("DBConnection")
    {
    }

    public Table<DataModel.Margin> Margin
    {
        get { return GetTable<DataModel.Margin>(); }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:54:00.793

到目前为止，我已经设法从[bltoolkit / Source / Data / Linq / Query.cs](https://github.com/igor-tkachev/bltoolkit/blob/master/Source/Data/Linq/Query.cs)类中找到：

```
public static int InsertOrReplace(IDataContextInfo dataContextInfo, T obj)
{
    ...
    else if (field.IsIdentity)
    {
        throw new LinqException("InsertOrUpdate method does not support identity field '{0}.{1}'.", sqlTable.Name, field.Name);
    }
    ...
} 
```

[从bltoolkit/Source/Data/Linq/Extensions.cs](https://github.com/igor-tkachev/bltoolkit/blob/master/Source/Data/Linq/Extensions.cs)类调用静态方法：

```
public static int InsertOrReplace<T>(this IDataContext dataContext, T obj)
{
    return Query<T>.InsertOrReplace(DataContextInfo.Create(dataContext), obj);
} 
```

似乎**`Identity`**字段引发了异常。

```
[PrimaryKey, Identity]    public int      id; //remove this field or change the column definition 
```

**[编辑]**

看看以下类是如何定义的：

```
public class Patient
{
    [PrimaryKey]
    public int    PersonID;
    public string Diagnosis;

    //more class definition
}

public class Person
{
    //some class definition

    [Identity, PrimaryKey]
    //[SequenceName("PostgreSQL", "Seq")]
    [SequenceName("Firebird",   "PersonID")]
    [MapField("PersonID")] public int    ID;
                           public string FirstName { get; set; }
                           public string LastName;
    [Nullable]             public string MiddleName;
                           public Gender Gender;

    [MapIgnore]            public string Name { get { return FirstName + " " + LastName; }}

    [Association(ThisKey = "ID", OtherKey = "PersonID", CanBeNull = true)]
    public Patient Patient;

    //more class definition
} 
```

这是测试方法中的示例用法：

```
[Test]
public void InsertOrUpdate1()
{
    ForEachProvider(db =>
    {
        var id = 0;

        try
        {
            id = Convert.ToInt32(db.Person.InsertWithIdentity(() => new Person
            {
                FirstName = "John",
                LastName  = "Shepard",
                Gender    = Gender.Male
            }));

            for (var i = 0; i < 3; i++)
            {
                db.Patient.InsertOrUpdate(
                    () => new Patient
                    {
                        PersonID  = id,
                        Diagnosis = "abc",
                    },
                    p => new Patient
                    {
                        Diagnosis = (p.Diagnosis.Length + i).ToString(),
                    });
            }

            Assert.AreEqual("3", db.Patient.Single(p => p.PersonID == id).Diagnosis);
        }
        finally
        {
            db.Patient.Delete(p => p.PersonID == id);
            db.Person. Delete(p => p.ID       == id);
        }
    });
} 
```

可以看到，对于 class 没有使用 of `InsertOrUpdate`，`Person`但是对于`Patient`class 有使用。因此，仅当您传入非**`Identity`**字段时才支持该方法。

**注意：** *`InsertOrUpdate`已过时，但仍在项目源代码的测试中使用。不过，它应该没有影响，只是将其视为`InsertOrReplace`.*

# class - 将 self classes Tkinter Entry 数据发送到其范围之外的函数

> ID：13876813
> 
> 赞同：0
> 
> 时间：2012-12-14T10:26:49.410
> 
> 标签：class, function, python-3.x, scope, tkinter

我已经设置了两个输入框，目标是按下一个按钮并使用范围之外的函数将某种类型的数学应用于输入数字。（我省略了包装和框架代码，因为我认为它与问题无关。）

```
class class1:
    def __init__(self):
        self.entry1= tkinter.Entry(self.uframe, width=10)
        self.entry2= tkinter.Entry(self.uframe, width=10)

        self.calcButton = tkinter.Button(self.frame, text="Submit", command = self.doMathFunction)

def doMathFunction():
    #what do I put here that allows me to either run a .get on self.entry1 and 2 
```

我考虑过让条目在范围内是全局的，但这会阻止我对它们进行获取？我认为有一种方法可以让最终用户在输入框中输入数字时运行一个事件，因为它在 ktinker 文档中被提及为“需要更多解释”。我不确定最好的方法是什么，我的研究得到了相互矛盾的答案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:37:30.790

让您的按钮调用类上的方法，然后调用该方法`doMathFUnction`，将值传递给它。这样做意味着您的`doMathFunc`函数不需要了解有关 GUI 内部工作的任何信息。

```
class class1:
    def __init__(self):
        ...
        self.calcButton = tkinter.Button(..., command=self.doCalc)

    def doCalc(self):
        a = self.entry1.get()
        b = self.entty2.get()
        doMathFunction(a,b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:56:19.117

如果 doMathFunction**必须**超出范围，您可以使用 lambda 语句并将变量添加到您的 doMathFunction。

```
class class1:
    def __init__(self):
        self.entry1= tkinter.Entry(self.uframe, width=10)
        self.entry2= tkinter.Entry(self.uframe, width=10)

        self.calcButton = tkinter.Button(self.frame, text="Submit", command = \
             lambda e1 = self.entry1.get(), e2 = self.entry2.get(): doMathFunction(e1,e2))

def doMathFunction(e1, e2):
    print(e1*e2) # Or whatever you were going to do 
```

通常，在命令语句中使用函数就像声明变量一样，执行函数并将返回语句分配给变量。但是，对于 lambda，其背后的函数仅在调用时执行。

因此，当 calcButton 被推送并调用它的命令语句时，将执行 lambda“函数”（带有 e1 和 e2）。这就像创建一个中间人函数来处理调用。

```
class class1:
    def __init__(self):
        self.entry1= tkinter.Entry(self.uframe, width=10)
        self.entry2= tkinter.Entry(self.uframe, width=10)

        self.calcButton = tkinter.Button(..., command = self.middleman)

    def middleman(self):
        e1 = self.entry1.get()
        e2 = self.entry2.get()
        doMathFunction(e1, e2)

def doMathFunction(e1, e2):
    print(e1*e2) # Or whatever you were going to do 
```

# routing - Web API 路由

> ID：13876816
> 
> 赞同：1
> 
> 时间：2012-12-14T10:27:02.037
> 
> 标签：routing, asp.net-mvc-4, asp.net-web-api

我有以下网址：

本地主机/api/机器/somecode/all

我有以下控制器：

```
 public class MachineController : ApiController
{
    public IEnumerable<Machine> Get()
    {
        return new List<Machine>
                   {
                       new Machine
                           {
                               LastPlayed = DateTime.UtcNow,
                               MachineAlertCount = 1,
                               MachineId = "122",
                               MachineName = "test",
                               MachinePosition = "12",
                               MachineStatus = "test"
                           }
                   };
    }

    public IEnumerable<Machine> All(string code)
    {
        return new List<Machine>
                   {
                       new Machine
                           {
                               LastPlayed = DateTime.UtcNow,
                               MachineAlertCount = 1,
                               MachineId = "122",
                               MachineName = "test",
                               MachinePosition = "12",
                               MachineStatus = "test"
                           }
                   };
    }
} 
```

以及以下路线：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
          name: "MachineApi",
          routeTemplate: "api/machine/{code}/all"
      );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

    }
} 
```

但由于某种原因，它没有解决 - 有什么明显的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:18:06.420

是的，通过使用方法名称，所有你都在推断一个动作，你还需要指出要匹配的控制器，所以这可能会起作用：

```
config.Routes.MapHttpRoute(
      name: "MachineApi",
      routeTemplate: "api/machine/{code}/all",
      defaults: new { Action = "All", Controller = "Machine" }
  ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:54:11.097

它从哪里获取代码？

```
 routeTemplate: "api/machine/{code}/all" 
```

我假设那是失败的路线。

你不需要`defaults:`设置吗？

事实上，这不会默认为：

```
 api/machine/all/{code} 
```

您是否尝试过在 Firefox 上查看“网络”选项卡？这将告诉你它试图去的路线。

# javascript - 如何实现项目列表的橡皮筋选择

> ID：13876817
> 
> 赞同：1
> 
> 时间：2012-12-14T10:27:02.013
> 
> 标签：javascript, jquery, html

我有一个项目列表，我需要通过拖动选择来选择多个项目。我试图实现它。我的代码无法正常工作。

[演示](http://jsfiddle.net/zZTfA/3/)

```
var dragging=false,rbt,rbl;
$(".itemlist").bind({"mousedown":handleMouseDown,
                     "mousemove":handleMouseMove,
                     "mouseup":handleMouseUp,});

function handleMouseDown(e){
    var rubberband = $("<div/>").addClass("fmgrRubberBand").appendTo(this);
    rubberband.css({
        top : e.pageY,
        left : e.pageX
    });
    rbt = e.pageX;
    rbl = e.pageY;
    dragging=true;
}
function handleMouseMove(e){
    e.preventDefault();
    if (dragging) {
        var t = $(this).children(".fmgrRubberBand").offset().top;
        var l = $(this).children(".fmgrRubberBand").offset().left;
        if (l < e.pageX) {
            $(this).children(".fmgrRubberBand").css({
                "width" : e.pageX - l + "px"
            })
        } else {
            $(this).children(".fmgrRubberBand").css({
                "width" : rbl - e.pageX + "px",
                "left" : e.pageX
            });
        }
        if (t < e.pageY) {
            $(this).children(".fmgrRubberBand").css({
                "height" : e.pageY - t + "px"
            })
        } else {
            $(this).children(".fmgrRubberBand").css({
                "height" : rbt - e.pageY + "px",
                "top" : e.pageY
            })
        }

    }

}
function handleMouseUp(e){
    e.preventDefault();

    dragging = false;

    $(this).children(".fmgrRubberBand").remove();
} 
```

如何使用波段选择来选择多个项目？

我的需求是：

1.  将乐队拖到列表项上。
2.  并选择带覆盖​​区域下的项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:13:20.363

只需使用 jquery ui 可选插件。

这是工作演示。

[演示](http://jsfiddle.net/zZTfA/11/)

```
$(".itemlist").selectable({filter:"li"}); 
```

# java - 安卓APP+SQL

> ID：13876819
> 
> 赞同：3
> 
> 时间：2012-12-14T10:27:16.317
> 
> 标签：java, android, mysql, sql

我已经读过，没有那么简单，直接从 Android APP（Java 代码）连接到 Internet 上服务器上的一些 SQL（例如 MySQL 等）。

我会很高兴，有人可以向我解释这个问题。也许更简单的方法是只创建一些网页（在 JSF、ASP.NET 等上）......虽然我更喜欢原生 APP。应该有登录，然后，只有在正确登录后，才能插入（INSERT INTO...）数据和下载（SELECT...）数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:34:06.890

尝试[how-to-connect-android-with-php-mysql](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)和[android-login-and-registration-with-php-mysql-and-sqlite](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。

# camera - 提高我的threejs的性能

> ID：13876821
> 
> 赞同：1
> 
> 时间：2012-12-14T10:27:29.153
> 
> 标签：camera, rotation, three.js

我的模型有一些问题。是一个简单的模型，我不能让它很好地工作......

我在这里上传我的项目：[http ://webgl.drapps.info](http://webgl.drapps.info)

我有一个汽车模型，其中一些零件在鼠标悬停时会改变材料。我使用带有“on”功能的threex.domevent.js 库。我的模型由 json 文件加载。

## 第一期

当鼠标不在画布上时，threejs 检测到鼠标在我的模型的一块上，但这不是真的，并且那块改变了它的材质（触发 mouseOver 事件）。

此外，我试图获得更好的鼠标悬停事件，因为即使鼠标真的在一块上，该事件也不会触发。

## 第 2 期

这是关于 TrackballControls 的。有什么办法可以控制我的世界的旋转？我的意思是：仅在一个轴上旋转，仅旋转 180 度等......有没有教程或文章来学习如何旋转和平移相机？

谢谢你所做的一切，我会很高兴任何想要回答这个问题的人......因为我有点失落

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:49:09.407

对不起，但你运气不好。

**问题 1**。哎呀！您使用的是一个将近*一年*`threex.js`没有更新的第三方应用程序，所以我无法帮助您。

 *您还使用的是旧版本的`three.js`. 请更新到当前版本。

如果您仍然有问题，请通过简单的演示发布一个新问题——而不是您的整个项目。更好的是，首先谷歌你的问题。

**问题 2**。`TrackballControls`不是库的一部分——它是示例的一部分——所以它不受官方支持。如果您对此不满意，您将不得不自己破解代码。

这个问题出现了很多。去谷歌上查询。据我所知，没有一个好的解决方案。

就个人而言，我会`OrbitControls`在你的情况下使用 - 它使场景保持正面朝上，并且你可以限制*最大极角*，使相机保持“在地面之上”。

最好的示例/教程是官方`three.js`示例，它将与库的当前版本一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:22:53.853

我对问题 1 无能为力。

问题2：

我还在做一个可视化车辆的项目，需要能够旋转。我也尝试过 Trackballcontrolls，但它不适合我的需要。

我最终做的是创建一个主 Object3d，然后我没有将对象/模型添加到场景中，而是将它们添加到主 Object3d 中。这样旋转场景中的所有东西，我只需要旋转主对象。为了实际进行旋转，我只使用了其中一个立方体示例中的代码。*

# flattr - API 查找找不到东西 - 我使用的是正确的 URL 吗？

> ID：13876823
> 
> 赞同：1
> 
> 时间：2012-12-14T10:27:39.380
> 
> 标签：flattr

我目前正在为流行的开源 RSS 阅读器（微小的 RSS）开发 Flattr 插件。

我是第一次使用查找 API，但不确定为什么会得到不同的结果。所以我不确定我是否正确使用了 API，如果我遇到了一些基本错误，我想与各位专家确认一下。

首先，让我们看看我是否可以想出一个成功查找事物的 API 调用。我查看了 1066706 的 Flattr 页面（我不能在这里发布整个 URL，因为 SO 只允许我为整个帖子提供两个 URL）。在该页面上，我找到了 Flattr 为该内容存储的官方 URL，并使用 API 进行查找：请参阅[此处](https://api.flattr.com/rest/v2/things/lookup/?url=http://taz.de/!107392)

这会返回`{"type":"thing","resource":"https:\/\/api.flattr.com\/rest\/v2\/things\/1066706", ...`，这很好。

但似乎这种方法不是测试事物是否存在的可靠方法。这是一个不起作用的示例：我打开事物 e7579b349cb7b319b28d883cd4064e1e 的 Flattr 页面。

我在该页面上找到的那个 URL 确实是那篇文章的 URL，我看不到它可能有任何其他 URL。我以与上面相同的方式查找它：检查[这个](http://api.flattr.com/rest/v2/things/lookup/?url=http://www.zeilensturm.de/?p=3919)

唉，我明白了 `{"message":"not_found","description":"No thing was found"}`

（我也用编码的 URL 尝试了这两种方法，但得到了相同的结果。我认为这对你来说更容易阅读。）

那么，为什么找不到第二件事呢？感谢您的任何启发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:55:26.543

id "e7579b349cb7b319b28d883cd4064e1e" 不是一个真实的东西 id 而是一个哈希，它为尚未提交的东西标识一个临时的东西 - 它是 Flattr 的自动提交功能的一部分：http: [//developers.flattr.net/auto-submit/](http://developers.flattr.net/auto-submit/)

因此，系统非常正确地告诉您该 URL 的某个事物不存在 - 有人需要对该事物进行扁平化，才能使其真正提交并在系统中创建，并带有一个真实的 id。

（仅供参考 - 对于某些 URL:s，如 Twitter URL:s，Flattr 实际上可以回答该 URL 是可扁平化的，即使它在系统中找不到它：`{"message": "flattrable", "description": "Thing is flattrable "}`这样你现在可以扁平化了无需使用作者提供的任何类型的 flattr-button/url 就可以使 URL 变平）

另外-如果您还不知道，那么对于 RSS 阅读器，您应该主要寻找 rel-payment 链接以了解条目是否可扁平化，请参阅[http://developers.flattr.net/feed/](http://developers.flattr.net/feed/)和[http://relpayment.com/](http://relpayment.com/)

# sql - 为什么我可以从 SQL 的外部查询中引用字段

> ID：13876825
> 
> 赞同：0
> 
> 时间：2012-12-14T10:27:47.043
> 
> 标签：sql

鉴于这些表格：

```
create temporary table a(pid integer, cid integer);
create temporary table b(id integer, code varchar); 
```

这有效，但返回错误的结果：

```
select pid 
from a 
where cid in (select cid from b where code like 'AE%') 
```

我刚刚有一个这样的查询，我使用了错误的字段，令我惊讶的是，该查询甚至可以工作。**这样的查询不只是返回表a**中的所有行吗？

您有任何这样编写的查询示例有用吗？

也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:42:05.090

您经常需要内部查询的 where 子句中的外部查询字段：

```
 select * from a
    where exists ( select 1 from b where id = cid ); 
```

或者

```
 select * from a
    where 'HELLO' in (select code from b where id = cid ); 
```

我们还可以构建外部字段在 select 子句中（某种）有用的示例：

```
 select * from a
    where 1 = any (select id-cid from b where code like 'HE%'); 
```

因此，访问外部查询的字段是绝对必要的。

# python - BeautifulSoup 4 解析属性错误

> ID：13876834
> 
> 赞同：1
> 
> 时间：2012-12-14T10:28:19.533
> 
> 标签：python, beautifulsoup

我正在尝试解析 HTML 文档，但 bs4 无法解析特定标签中的属性：

```
<select class="inputNormal" id="TipoImmobileDaNonImportare" name="TipoImmobileDaNonImportare" style="width:100%">
            <option value=""></option>
            <option value="unità immobiliare urbana">unità immobiliare urbana</option>            
            <option value="particella terreni">particella terreni</option>
</select> 
```

当我打印时，错误

```
AttributeError: 'tuple' object has no attribute 'items'`
the tag and attribute i print:`select: (u'style', u'class', u'name')`
instead of (for example):  `input: {u'type': u'hidden', u'name': u'Immobile_Note', u'value': u'Ubicazione occupazione', u'id': u'Immobile_Note'}` 
```

* * *

更新：如果我尝试`soup.find_all( attrs= {'id' : 'somevalue' } )`失败，因为尝试访问树的所有属性！

如果我尝试：

```
s = BeautifulSoup( """<select class="inputNormal" id="TipoImmobileDaNonImportare" name="TipoImmobileDaNonImportare" style="width:100%">
<option value=""></option>
<option value="unità immobiliare urbana">unità immobiliare urbana</option>
<option value="particella terreni">particella terreni</option>
</select>""") 
```

解析器正确检测到它：

```
select: {'id': 'TipoImmobileDaNonImportare', 'style': 'width:100%', 'class': ['inputNormal'], 'name': 'TipoImmobileDaNonImportare'} 
```

我尝试用 lxml 解析器和 html5lib 解析器解析它，但结果是一样的。

感谢您的任何回复。

编辑：感谢阿曼达，但我的代码中有一个错误，我尝试存储在`tag.attrs`一个 touple 对象中，因为此代码正在从 bs3 移植到 bs4！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:16:19.367

我不完全确定您在这里尝试使用 Beautiful Soup 访问什么，但是如果您想获取选择或选项的属性，您可以执行以下操作：

```
html = """<select class="inputNormal" id="TipoImmobileDaNonImportare" name="TipoImmobileDaNonImportare" style="width:100%">
        <option value=""></option>
        <option value="unità immobiliare urbana">unità immobiliare urbana</option>
        <option value="particella terreni">particella terreni</option></select>"""

soup = BeautifulSoup(html) 
```

您可以显示第一个“选择”的属性：

```
print soup.find('select').attrs 
```

或者显示所有选项的属性：

```
for option in soup.find_all('option'):
    print option.attrs 
```

或者，如果您要查找可用项目的名称，请使用：

```
for option in soup.find_all('option'):
    print option.text 
```

或者，如果您想要选项值而不是显示的文本，请使用：

```
for option in soup.find_all('option'):
    print option['value'] 
```

如果这没有帮助，也许您可​​以举一个您期望的输出示例

# c++ - Qt raw vs std::shared_ptr

> ID：13876835
> 
> 赞同：4
> 
> 时间：2012-12-14T10:28:28.397
> 
> 标签：c++, qt, c++11, shared-ptr

我注意到在 QT 中用 shared_ptr 替换原始指针时，我的代码不再工作了。例如，如果不是

```
 QTreeWidgetItem* vItem(new QTreeWidgetItem(ItemTitle)); 
```

我用

```
 std::shared_ptr<QTreeWidgetItem> vItem(new QTreeWidgetItem(ItemTitle)); 
```

然后，要么程序崩溃，要么什么都不做（即使我稍后在代码中使用 .get() 函数从共享指针中获取原始指针）。有谁知道可能是什么原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T10:43:29.623

将共享指针与 Qt 模型项一起使用会导致所有权冲突：获取您传递给它`QTreeWidget`的任何内容的所有权。也拥有它的物品。两者都假设他们可以自己删除该项目，并且没有其他人会在他们背后删除它。`QTreeWidgetItem``std::shared_ptr`

在这种情况下，Qt 取得指针的所有权（其他示例：父`QObject`项取得其子项的所有权），不能同时使用`std::shared_ptr`/ `QSharedPointer`。`std::shared_ptr`仅在使用`std::shared_ptr`并`std::weak_ptr`专门保存指向该特定对象的指针时才能正常工作。

# php - 如何使用 zend 服务器在 localhost 上运行 .php？

> ID：13876837
> 
> 赞同：0
> 
> 时间：2012-12-14T10:28:29.317
> 
> 标签：php, zend-server, htdocs

我已经安装了 Zend 服务器。当我登录到 Zend 服务器，监视器和服务器信息时，它说：

> 安装路径：/usr/local/zend/share/ZendFramework

我无法访问这些文件夹中的任何一个，甚至无法看到它们存在于我的 Mac 上。如何使用 zend 服务器运行 .php 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:33:32.007

`/usr`一般是Finder中的隐藏文件夹。您可以通过终端访问它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-22T18:51:43.357

您必须在 ZendServer 存储的地方找到 Zend\Apache\htdocs 文件夹。将您的网站文件添加到 htdocs 文件夹，以便您可以在本地主机中运行它们：

例子：

> C:\Program Files (x86)\Zend\Apache2\htdocs\index.php

# mysql - mysql 按名称排序，asc ingore 前导“the”

> ID：13876838
> 
> 赞同：0
> 
> 时间：2012-12-14T10:28:31.973
> 
> 标签：mysql

我怎样才能按这个顺序返回这些：

```
1: aaaa
2: bbbb
3: the cccc
4: dddd 
```

所以忽略领先的'the'

目前我正在使用。

```
select * from houses order by name asc 
```

并按此顺序返回。

```
1: aaaa
2: bbbb
3: dddd
4: the cccc 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:48:41.330

一个更正确但更慢的答案是：

```
ORDER BY CASE WHEN SUBSTR(name, 1, 4) = 'the ' THEN SUBSTR(name, 5) ELSE name END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:34:58.733

如果你想删除`the`订单，那么你可以使用：

```
select id, name
from yourtable
order by replace(name, 'the ', '') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e926e/3)

或者：

```
select id, name
from yourtable
order by ltrim(replace(name, 'the', '')) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e926e/9)

甚至使用以下内容：

```
select id, name
from yourtable
order by 
  case 
    when substring(name, 1, 4) = 'the ' 
    then substring(name, 5) 
    else name end 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e926e/17)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T10:32:44.500

Hey Man 它的升序意味着**`a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z`**。由于 d 在 t 之前出现，所以它首先呼应它！ORDER BY 只检查字符串的第一个字母，然后对它们进行排序。如果您希望他们像这样订购：

1：啊啊啊

2：bbbb

3：cccc

4：dddd

然后再制作一列整数类型的id，根据您的口味取值，并为其添加自动增量属性，然后按升序排列它们！

# windows-phone-8 - Windows 8 和 WP8：将用户发送到商店中我的开发人员应用程序列表的 URL？

> ID：13876846
> 
> 赞同：0
> 
> 时间：2012-12-14T10:28:46.603
> 
> 标签：windows-phone-8, windows-8, windows-store-apps, windows-store

任何人都知道将用户发送到我的开发者应用程序列表的 URL 是什么：

*   Windows 8 商店？
*   WP8 商店？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T04:33:04.900

对于 Windows 8 应用，您可以使用以下 Uri 来启动您的应用：

```
ms-windows-store:Publisher?name=[your publisher display name] 
```

发布者名称中的任何空格都应呈现为 %20。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:15:51.247

对于 Windows 8 商店，似乎没有等效于 MarketplaceSearchTask。查看此[SO Question](https://stackoverflow.com/questions/13186465/windows-8-equivalent-for-windows-phone-marketplacesearchtask)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:34:18.497

在 WP8 上：http: [//msdn.microsoft.com/en-us/library/hh394001 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh394001(v=VS.92).aspx)

使用您的出版商名称作为搜索词。

```
MarketplaceSearchTask marketplaceSearchTask = new MarketplaceSearchTask();

marketplaceSearchTask.ContentType = MarketplaceContentType.Apps;
marketplaceSearchTask.SearchTerms = "*publisher name*";

marketplaceSearchTask.Show(); 
```

# javascript - 从 ASP.NET MVC3 中的局部视图加载 Javascript

> ID：13876849
> 
> 赞同：1
> 
> 时间：2012-12-14T10:28:51.893
> 
> 标签：javascript, asp.net-mvc-3, partial-views

我在 C# 和 Razor 中有一个 ASP.NET MVC3 应用程序。

我`_Layout.cshtml`在 VS2010 中使用 MVC3 应用程序模板中的标准。我想在渲染`Partial View`时在其中一个中添加 Javascript 代码，`View`而不是直接在`_Layout`.

我的`View`样子是这样的：

```
@model MyNameSpace.ViewModels.MyViewModel

@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Filters</legend>

        @{ Html.RenderPartial("Filters", Model.Filters);  }

        <p>
            <input type="submit" value="Submit" />
        </p>

    </fieldset>
} 
```

我的`Partial View` `Filters.cshtml`样子是这样的：

```
@model MyNameSpace.ViewModels.FiltersViewModel

<p>
@Html.DropDownListFor(
    x => x.Type, 
    new SelectList(Model.Types, "Value", "Text"),
    "-- select type --"
)
</p>

<p>
@Html.DropDownListFor(
    x => x.Category, 
    new SelectList(Model.Categories, "Value", "Text"),
    "-- select category --"
)</p>

<script type="text/javascript">
   //Some Javascript
</script> 
```

如果我这样离开`View`，Javascript 会在内部呈现，`<body>`并且看起来非常难看。我可以直接在`<head>`_Layout 部分添加 Javascript，但这不是我想要的。我怎样才能达到我的目的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T11:42:56.667

在主布局（母版页）中添加`@RenderSection("HeadContent", required: false)`，然后添加类似

```
 @section HeadContent {
        <link href="@Url.Content("~/Content/styles/admin.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>    
    } 
```

在你的部分观点中

当 razor 编译 html 页面时，它会将部分视图中的 @section 块中的内容放置到您在布局（母版页）上放置 @RenderSection("HeadContent", required: false) 的位置。如果局部视图上没有 @section 块，则不会添加任何内容。

# php - 带有自定义帖子的 Wordpress 分页计数不正确

> ID：13876850
> 
> 赞同：0
> 
> 时间：2012-12-14T10:28:53.360
> 
> 标签：php, wordpress, pagination

我正在使用[WP-PageNavi](http://wordpress.org/extend/plugins/wp-pagenavi/)插件对我的新闻区域进行分页。它并没有按预期工作。

我总共发布了 6 条新闻，但我已将其抵消了 1，因此它不会显示最新的。使用分页，它在第 1 页和第 2 页上显示相同的 5 个新闻项目。我已将每页的帖子设置为 5，因此它甚至不应该显示第 2 页的链接。但是，该 url 确实更改为 page1 和 page2。

我可能做错了什么愚蠢的事情！

```
<?php $portfolioloop = new WP_Query( array( 'paged' => get_query_var('paged'), 'post_type' => 'blog', 'posts_per_page' => 5, 'sort_order' => 'DESC', 'offset' => 1)); ?>
<?php while ( $portfolioloop->have_posts() ) : $portfolioloop->the_post(); ?>

<div class="blog-item"> <img width="163" src="<?php echo the_field('image'); ?>" alt="<?php echo the_title(); ?>" />
  <div class="news-item">
    <p><?php echo the_time('F j, Y'); ?></p>
    <h2><?php echo the_title(); ?></h2>
    <p>
      <?php $content = get_the_content();
        if(strlen($content) > 120 ){     
            echo substr($content,0,120) . "..."; 
        }else{
            echo substr($content,0,120); 
        } ?>
      <br />
      <a class="read-more" href="<?php echo get_page_link($post->ID) ?>">Read more...</a> </p>
  </div>
  <div style="clear:both"></div>
</div>
<?php endwhile; // end of the loop.  ?>
<p class="news-page"><?php echo wp_count_posts('blog')->publish; ?> news items</p>
<?php if (function_exists('wp_pagenavi')) { wp_pagenavi( array( 'query' => $portfolioloop ) ); } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:33:15.360

见[法典](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

**分页参数**

*   offset (int) - 要替换​​或通过的帖子数。注意：设置偏移参数将忽略分页参数。

做一个测试，看看你是否在第一页并使用偏移量，否则，不要设置它。

# php - 使用 CURL php 获取数据时出现错误 500 内部服务器？

> ID：13876851
> 
> 赞同：2
> 
> 时间：2012-12-14T10:28:52.503
> 
> 标签：php, facebook, curl, facebook-comments

```
$query = "https://api.facebook.com/method/fql.query?format=JSON&query=";
$urls = array('about 500 link');
foreach ($urls as $url)
{
    $query .= urlencode("select post_fbid, fromid, object_id, text, time from comment where object_id in (select comments_fbid from link_stat where url ='$url')"); 
    $query .= "&pretty=1";

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $query);
    curl_setopt($ch, CURLOPT_TIMEOUT ,900); 
    $data = curl_exec($ch); 
    $response = json_decode($data, true);
    echo '<pre>';print_r($response);echo '</pre>';
    curl_close($ch);
} 
```

当我在数组中有大约 500 个链接时运行此代码时`$urls`，我得到一个错误结果：`ERROR 500 - Internal Server Error`，但`$urls`只包含 5 个链接，没有错误。如何在不超时的情况下获取所有 500 个链接的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:30:28.727

It's not curl error, it's your server error, because there is a limit to request duration. Requesting 500 pages takes awhile, and your script terminates. Try the following:

1.  Set `set_time_limit(200);` or more
2.  Run the script by using SSH connection, there's no timeout at all
3.  Use `curl_multi_init` to do multiple request in parallel

# c# - 测试表单仅适用于以原始类型为参数的方法

> ID：13876855
> 
> 赞同：2
> 
> 时间：2012-12-14T10:29:07.120
> 
> 标签：c#, asp.net, web-services, asmx

我想调试我的 web 方法以查看返回列表是否包含已作为参数传递的对象。

**我的网络方法如下：**

```
[WebMethod]
       public List<Vehicle> GetCustomerList(Vehicle obj)
            {
                //List<Vehicle> newL = new List<Vehicle> { obj };

                return new List<Vehicle> { obj };

            } 
```

它说“测试表单仅适用于以原始类型作为参数的方法”。所以我想知道我需要进行哪些更改才能检查该方法传递的内容。

**> 后续问题的编辑代码**

```
public class Service1 : System.Web.Services.WebService
    {

   [WebMethod]
             public List<Vehicle> GetCustomerList(Vehicle vehi)
            {
                List<Vehicle> newL = new List<Vehicle> { vehi };
                return new List<Vehicle> { vehi };

            }

            [WebMethod]
            public void simpleCase()
            {
                Vehicle obj = new Vehicle();
                obj.VehicleID = "KL-9876";
                obj.VehicleType = "Nissan";
                obj.VehicleOwner = "Sanjiva";
                GetCustomerList(obj);
            }
    }

    public class Vehicle
    {
        public string VehicleID { get; set; }
        public string VehicleType { get; set; }
        public string VehicleOwner { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-13T21:13:36.737

声明的方法需要一个 Vehicle 对象，这是您无法在表单中键入的东西，因此是消息。在一个表单中，您显然只能输入原始类型（int 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-11T16:15:59.580

要测试非原始参数类型，您需要创建一个使用 Web 服务的测试应用程序，因此在与您的 Web 服务相同的解决方案中创建一个新应用程序（Windows/Web 并不重要）。在同一解决方案中添加对服务的 Web 引用。然后照常使用服务（即创建服务实例，然后调用其上的方法，传入任何复杂的参数类型）。

# objective-c - 移除了一种本地化语言的 iOS 应用程序更新

> ID：13876856
> 
> 赞同：0
> 
> 时间：2012-12-14T10:29:08.633
> 
> 标签：objective-c, ios, localization, app-store

我正在开发一款适用于 iOS 的应用程序。应用程序已在 App Store 上。但是在新版本中，我必须从本地化语言（德国）中删除一个。在此之后，我观察到非常奇怪的行为：当我在没有旧版本以前的应用程序的手机上部署应用程序时，一切都很好 - 如果我将 iOS 设置为德国，应用程序是英文的。但是当我在已经安装旧版本的情况下部署它时，应用程序不会显示英文翻译，而只有键来自不存在的德国版本（“terms_header”等等......）。

我的问题是：当我将新版本发送到 App Store 时，应用程序将如何运行，并且用户会将他们的手机更新到我的应用程序的新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:42:32.730

当您在任何 iOS 设备上更新应用程序时，它的捆绑资源总是会更新。但是，您可以使用以下方法测试场景
- 从带有本地化的 xcode 安装旧应用程序
- 测试本地化是否正常工作
- 使用来自 xcode 的新版本更新应用程序
- 通过更改语言重新测试应用程序。

在更新期间，只有用户生成的数据保持不变并且捆绑资源得到更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:31:25.313

如果您从管理器中删除应用程序然后重新安装会发生什么情况？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:53:34.493

好的，我找到了。有一种方法可以检查应用程序在从 App Store 更新时的行为：

1.  从设备中删除应用程序
2.  通过 Xcode（产品->存档）从您的应用程序的旧版本生成存档
3.  作为 Ad-Hoc 部署分发归档的应用程序
4.  重复第 2 点和第 3 点。对于您的应用程序的新版本。
5.  将带有旧版本应用程序的 .ipa 文件放入 iTune。
6.  通过 iTune 将其安装在您的设备上并同步设备。
7.  检查您设备上的旧版本应用程序。
8.  将带有新版本应用程序的 .ipa 文件放入 iTune。
9.  在 iTunes 中按“更新”，然后同步设备。
10.  在您的设备上检查新版本的应用程序。

在这种情况下，我的应用程序是有效的。

# performance - 从结构数组中删除“行”

> ID：13876858
> 
> 赞同：0
> 
> 时间：2012-12-14T10:29:15.370
> 
> 标签：performance, matlab, for-loop, runtime-error

这与我之前提出的问题相似，但略有不同：

所以我在matlab中有一个非常大的结构数组。假设，为了论证，为了简化情况，假设我有类似的东西：

structure(1).name, structure(2).name, structure(3).name structure(1).returns, structure(2).returns, structure(3).returns（在我的真实程序中，我有 647 个结构）

进一步假设 structure(i).returns 是一个向量（非常大的向量，大约 2,000,000 个条目），并且出现了一个条件，我想从 structure(i).returns 中删除所有 i 的第 j 个条目。你怎么做到这一点？或者更确切地说，您如何合理快速地做到这一点？我已经尝试了一些东西，但它们都非常慢（我将在一秒钟内展示它们）所以我想知道社区是否知道更快的方法来做到这一点。

我以两种不同的方式解析了我的数据；第一种方法将所有内容都保存为单元格数组，但由于对我来说效果不佳，我再次解析数据并将所有内容都放置为向量。

我实际上在做的是尝试删除 NaN 数据，以及我的数据文件的同一相应行中的所有数据，然后在应用 Hampel 过滤器后做同样的事情。在此尝试中，我的代码的相关部分是：

```
for i=numStock+1:-1:1
    for j=length(stock(i).return):-1:1
        if(isnan(stock(i).return(j)))
            for k=numStock+1:-1:1
                stock(k).return(j) = [];
            end
        end
    end
    stock(i).return = sort(stock(i).return);
    stock(i).returnLength = length(stock(i).return);
    stock(i).medianReturn = median(stock(i).return);
    stock(i).madReturn = mad(stock(i).return,1);
end;

for i=numStock:-1:1
    for j = length(stock(i+1).volume):-1:1
        if(isnan(stock(i+1).volume(j)))
            for k=numStock:-1:1
               stock(k+1).volume(j) = [];
            end
        end
    end
    stock(i+1).volume = sort(stock(i+1).volume);
    stock(i+1).volumeLength = length(stock(i+1).volume);
    stock(i+1).medianVolume = median(stock(i+1).volume);
    stock(i+1).madVolume = mad(stock(i+1).volume,1);
end;

for i=numStock+1:-1:1
    for j=stock(i).returnLength:-1:1
        if (abs(stock(i).return(j) - stock(i).medianReturn) > 3*stock(i).madReturn)
            for k=numStock+1:-1:1
                stock(k).return(j) = [];
            end
        end;
    end;
end;

for i=numStock:-1:1
    for j=stock(i+1).volumeLength:-1:1
        if (abs(stock(i+1).volume(j) - stock(i+1).medianVolume) > 3*stock(i+1).madVolume)
            for k=numStock:-1:1
                stock(k+1).volume(j) = [];
            end
        end;
    end;
end; 
```

但是，这会返回错误：

“矩阵索引超出删除范围。

失败错误（第 110 行）stock(k).return(j) = [];"

因此，我尝试将所有内容解析为向量。然后我决定在构建结构数组之前尝试删除向量中的适当条目。这不会返回错误，但速度很慢：

```
%% Delete bad data, Hampel Filter

% Delete bad entries
id=strcmp(returns,'');
returns(id)=[];
volume(id)=[];
date(id)=[];
ticker(id)=[];
name(id)=[];
permno(id)=[];
sp500(id) = [];

id=strcmp(returns,'C');
returns(id)=[];
volume(id)=[];
date(id)=[];
ticker(id)=[];
name(id)=[];
permno(id)=[];
sp500(id) = [];

% Convert returns from string to double
returns=cellfun(@str2double,returns);
sp500=cellfun(@str2double,sp500);

% Delete all data for which a return is not a number
nanid=isnan(returns);
returns(nanid)=[];
volume(nanid)=[];
date(nanid)=[];
ticker(nanid)=[];
name(nanid)=[];
permno(nanid)=[];

% Delete all data for which a volume is not a number
nanid=isnan(volume);
returns(nanid)=[];
volume(nanid)=[];
date(nanid)=[];
ticker(nanid)=[];
name(nanid)=[];
permno(nanid)=[];

% Apply the Hampel filter, and delete all data corresponding to
% observations deleted by the filter.

medianReturn = median(returns);
madReturn = mad(returns,1);

for i=length(returns):-1:1
    if (abs(returns(i) - medianReturn) > 3*madReturn)
        returns(i) = [];
        volume(i)=[];
        date(i)=[];
        ticker(i)=[];
        name(i)=[];
        permno(i)=[];
    end;
end

medianVolume = median(volume);
madVolume = mad(volume,1);

for i=length(volume):-1:1
    if (abs(volume(i) - medianVolume) > 3*madVolume)
        returns(i) = [];
        volume(i)=[];
        date(i)=[];
        ticker(i)=[];
        name(i)=[];
        permno(i)=[];
    end;
end 
```

正如我所说，这很慢，可能是因为我在一个非常大的数据集上使用了 for 循环；但是，我不确定其他人会如何做到这一点。很抱歉这篇巨大的帖子，但有没有人建议我如何以合理的方式去做我所要求的事情？

编辑：我应该补充一点，让向量方法工作可能更可取，因为我的目标是将所有返回向量放入一个矩阵并将所有体积向量放入一个矩阵并对它们执行 PCA，我不知道我会如何使用单元阵列（或者即使 princomp 可以在单元阵列上工作）。

EDIT2：我已经更改了代码以符合您的建议（尽管我确实决定放弃速度并保持 for 循环以保持结构数组，因为重新解析这些数据在时间上会更糟）。新的代码片段是：

```
stock_return = zeros(numStock+1,length(stock(1).return));

for i=1:numStock+1
    for j=1:length(stock(i).return)
        stock_return(i,j) = stock(i).return(j);
    end
end

stock_return = stock_return(~any(isnan(stock_return)), : ); 
```

这会返回一个索引超出矩阵尺寸错误，我不知道为什么。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:12:16.533

我找不到一种方便的方法来处理结构，因此我将重组代码，以便它使用数组而不是结构。
例如，而不是`stock(i).return(j)`我会做`stock_returns(i,j)`.

我在部分代码中向您展示了如何摆脱 for 循环。

假设我们处理这段代码：

```
for j=length(stock(i).return):-1:1
    if(isnan(stock(i).return(j)))
        for k=numStock+1:-1:1
            stock(k).return(j) = [];
        end
    end
end 
```

现在，删除包含任何`NaN`数据的列如下所示：

```
stock_return = stock_return(:, ~any(isnan(stock_return)) ); 
```

至于与 medianVolume 的绝对差值，可以写一段类似的代码：

```
% stock_return_length is a scalar
% stock_median_return is a column vector (eg. [1;2;3])
% stock_mad_return is also a column vector.

median_return = repmat(stock_median_return, stock_return_length, 1);
is_bad = abs(stock_return - median_return) > 3.* stock_mad_return;
stock_return = stock_return(:, ~any(is_bad)); 
```

使用标量`stock_return_length`当然意味着返回长度是相同的，但无论如何你都隐含地假设它在你的原始代码中。

我回答的重点是使用`any`. 逻辑索引本身是不够的，因为在您的原始代码中，如果其中任何一个值是错误的，您将删除所有值。

参考任何： http: [//www.mathworks.co.uk/help/matlab/ref/any.html](http://www.mathworks.co.uk/help/matlab/ref/any.html)。

* * *

如果你想保留原始结构，所以你坚持使用 stock(i).return，你可以使用基本相同的方案来加速你的代码，但你只能少一个 for 循环，这意味着你的程序将会慢很多。

# ghostscript - 由 ghostscript 创建的图像变色

> ID：13876863
> 
> 赞同：1
> 
> 时间：2012-12-14T10:29:35.870
> 
> 标签：ghostscript

我正在使用 ghostscript 将 pdf 转换为图像

它几乎可以产生良好的图像，但对于一个 pdf，创建的图像具有白色条带

但是，原始 pdf 中不存在此条带。

我使用的脚本如下

gs -dNOPAUSE -sDEVICE=jpeg -dFirstPage=1 -dLastPage=2 -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sOutputFile=fileName.gif -dJPEGQ=100 -r300 -q pdfName.pdf -c 退出

这里创建的图像[http://www.pictureshack.us/images/65486_1.gif](http://www.pictureshack.us/images/65486_1.gif)

我正在使用 Ghostscript 8.70，该问题已针对最新更新（即 9.06）进行了修复，但我无法升级到此...此外，发现问题是由于 -r300，所以当我指定分辨率为 100 时，它适用于此 pdf 但不适用于许多其他 pdf...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:16:11.323

您没有说您使用的是什么版本的 Ghostscript，也没有提供原始 PDF 文件，所以我无法在当前代码上对其进行测试。然而，这个“看起来”像一个透明错误，并且很可能在最新版本的 Ghostscript 中得到修复。

如果您还没有升级到 9.06，我建议您尝试一下。[如果问题仍然存在，请在http://bugs.ghostscript.com](http://bugs.ghostscript.com)打开错误报告请附上原始 PDF 文件和您正在使用的命令行。

# java - 在单个进程中运行 DB2 java 存储过程

> ID：13876864
> 
> 赞同：0
> 
> 时间：2012-12-14T10:29:36.340
> 
> 标签：java, db2

看起来，当在其中运行 java 存储过程时，DB2 会为每个连接创建新进程（例如，在某些表更新事件上从触发器调用的过程）。问题是：是否有任何方法可以在单个进程中运行所有 java 存储过程，以便我们可以在它们之间共享静态值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:08:04.480

不幸的是，我不得不对我自己的问题给出否定的答案。根据这篇论文：[Java 例程中的静态和非最终变量](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2.doc.java/src/tpc/imjcc_javastaticnonfinalvars.htm)正是我想做的事情是**不可能**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:08:45.300

DB2 将强制执行存储过程的多进程模型。

我建议您将数据发送到消息队列，并让监听该队列的应用程序处理数据并进行日志记录。看看例如[RabbitMQ](http://www.rabbitmq.com/devtools.html#java-dev)、[Apache ActiveMQ](http://activemq.apache.org/)或[ZeroMQ](http://www.zeromq.org/)。

这可能很容易实现，但通常需要您有一个运行应用程序逻辑的守护程序。除非您将消息队列产品配置为自动生成应用程序逻辑，否则这是正确的 - 这通常可以使用消息队列产品，但需要更多配置。

# google-app-engine - 在 BigQuery 上加载 Google App Engine 备份时出错

> ID：13876866
> 
> 赞同：1
> 
> 时间：2012-12-14T10:29:48.320
> 
> 标签：google-app-engine, google-bigquery

在我的 GAE 应用程序中，我只是为所有种类做一个 datastore_backup。

当我尝试将其加载到 BigQuery 时，几乎 Kinds 已成功加载，但是使用一种 Kind 时出现此错误：

> 无效 - 无效的字段名称“rows.pedido_automatico”。字段只能包含字母、数字和下划线，以字母或下划线开头，并且长度最多为 128 个字符。

我的 GAE 种类：

```
class StockRow(ndb.Model):
  pedido_automatico = ndb.StringProperty(default="N",choices=set(["S","N"]))

class Stock(ndb.Model):
  rows = ndb.StructuredProperty(SemAlmacenPedidoRutaRow, repeated=True) 
```

这是一个已知的错误 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:06:27.077

这是一个已知的错误，我们已经在内部进行了修复，应该在我们的下一个版本中。

# c - 带有 void 参数列表的 main 与带有空参数列表的 main 是否不同？

> ID：13876868
> 
> 赞同：10
> 
> 时间：2012-12-14T10:29:57.073
> 
> 标签：c, main, void

> **可能重复：**
> [为什么 C 和 C++ 中的 main 函数的类型留给用户定义？](https://stackoverflow.com/questions/5296163/why-is-the-type-of-the-main-function-in-c-and-c-left-to-the-user-to-define)

什么是**空**？有人提供一些例子，正确使用**void**吗？`void main (void)`当我们写or时有什么区别`main()`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T10:32:12.267

在 C 中，通常`(void)`意味着函数调用中不需要参数，而`()`意味着未指定数量的参数。

例如

```
void foo(void)
{
   // body
}

void bar()
{
    //body
} 
```

在调用环境中，

```
foo();  // Correct 
foo(1); // Incorrect
bar();  // Correct
bar(1); // Also correct 
```

这是一般的解释。

但是对于您的 main() 情况，C99 标准说，

> **5.1.2.2.1 程序启动**
> 
> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数： `int main(void) { /* ... */ }`

或者

> 带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）： `int main(int argc, char *argv[]) { /* ... */ }`或等效的；

或者

> 以其他一些实现定义的方式。

所以，在这个`void main(void)`返回类型中应该是`int`.

最后，对于`main()`返回类型没有给出隐含的返回类型`int`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:49:17.740

排除 main 的返回类型，如

```
main(){
} 
```

并不意味着它是一种`void`类型，它取决于编译器。我认为可以说它通常被解释为

```
int main(){
} 
```

该`void`类型告诉编译器没有“实体”（没有“存储”），所以

```
void func(int i) 
```

接受一个 int 但什么也不返回。在参数的情况下：

```
void func() 
```

相当于：

```
void func(void) 
```

这更明确地表明它不带参数。不同的故事是类型`void *`，它**是**一种类型，是指向无量纲事物的指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T11:06:47.540

基本上，**void**是一种数据类型，基本上与方法声明一起使用。这意味着**没有**或**没有类型**。例如：

1) `int myFunc(void)`-- 该函数什么都不带。

2) `void myFunc(int)`-- 函数不返回任何内容

3) `void* data;`-- 'data' 是一个指向未知类型数据的指针，不能被取消引用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T10:34:13.457

Void 的意思是“空”。在您的 void main() 示例中，这意味着函数 main() 不返回值。我觉得有义务告诉你应该不惜一切代价避免使用 void main() （不是双关语），而是使用 int main() 。int main() 确保您的程序可以在关闭时向操作系统返回一个 int 类型的值。void 还有许多其他用途，如果您想了解更多信息，请查看[此网站。](http://www.cplusplus.com/doc/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T13:12:25.187

`void`是没有值的数据类型。它也是一种无法完成的*不完整数据类型。*当用作函数的返回类型时，表示该函数不返回值：

```
void foo(int x); 
```

当用作参数列表时，它表示该函数不接受任何参数：

```
void bar(void); 
```

这与空参数列表不同，空参数列表表示函数接受*未指定*数量的参数（在 C 中；在 C++ 中，空参数列表与 using 相同`void`）：

```
void bletch(); 
```

不能键入任何对象（变量）`void`。但是，您可以声明 type 的指针`void *`：这些是“通用”指针，并且可以在没有显式转换的情况下与其他指针类型相互转换。标准内存分配函数`malloc`,`calloc`和`realloc`所有返回`void *`：

```
double *darr = malloc(sizeof *darr * rows); 
```

在托管实现中（基本上，任何带有操作系统的东西），`main`必须声明为

```
int main(void) 
```

或者

```
int main(int argc, char **argv) // the parameter names can be whatever you want,
                                // but argc and argv are the usual convention;
                                // char **argv is equivalent to char *argv[] 
```

或以*其他一些实现定义的方式*；一个实现*可以*接受

```
void main() 
```

作为合法签名`main`，*但它必须在某处明确记录*。

# c# - .NET Framework 3.5 和 .NET 4.0 下的并行执行

> ID：13876872
> 
> 赞同：0
> 
> 时间：2012-12-14T10:30:10.413
> 
> 标签：c#, .net, .net-4.0, .net-3.5, versioning

我遇到了与在不同版本的 .NET 下运行的程序集相关的问题。

引用某些第三方 SDK 的程序集必须始终编译为 .NET 4.0 版。（这是一个dll）。

另一个程序集 ( .exe ) 引用了 100 个其他程序集，这些程序集是在 3.5 版本中编译的。此程序集 ( .exe ) 需要引用上述程序集 ( .dll ，在 .NET 4.0 上编译) 并且需要在其引用中包含为项目依赖项。

我应该怎么做才能解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:38:53.840

您不能将 v3.5 项目的版本提升到 v4 以包含 v4 dll 吗？您仍然可以引用所有 v3.5 程序集（最多带有可解决的警告）。

# java - 将android java代码转录为Objective-C Xcode

> ID：13876873
> 
> 赞同：1
> 
> 时间：2012-12-14T10:30:15.077
> 
> 标签：java, android, objective-c, xcode

我知道一点Android java，我必须实现一个已经用这种语言完成的应用程序，才能通过Xcode在Objective-C中调整它。

问题是我对 Objective-C 语言太陌生了。我意识到了几个教程，所以我并没有完全迷失在这种语言中。但我想知道在这些语言中匹配的类/函数。我想让你告诉我如何将下面的代码从 Android Java 转换为 Obj-C Xcode

```
公共类 ThreadRecuperationIP 扩展了 Thread
{
    静态 ThreadRecuperationIP 线程；

    受保护的 ThreadRecuperationIP()
    {
        极好的（）;
        线程=这个；
        开始（）;
    }

        公共静态无效 demarrer()
    {
        if (thread == null || !thread.isAlive())
        {
            线程 = 新的 ThreadRecuperationIP();
        }
    }
}

```

这段代码只是代码的一小部分。
如果你们能帮我把这段代码翻译成 Obj-C，那将对我理解如何做和理解逻辑有很大帮助。
我不知道我问的是否复杂，但我希望有人能帮助我:)

# wpf - WPF DataGrid，Ctrl+C后复制到剪贴板，OnCopyingRowClipboardContent

> ID：13876874
> 
> 赞同：15
> 
> 时间：2012-12-14T10:30:17.387
> 
> 标签：wpf, xaml, datagrid, clipboard

对于 WPF，数据网格我试图将我的自定义文本数据复制到剪贴板，在`Ctrl+C` Diverse 尝试使用覆盖 `OnCopyingRowClipboardContent(DataGridRowClipboardEventArgs args)`或`CopingRowClipboardContent event`之后，没有帮助。

剪贴板中的任何一个都是空的或标准的行文本，但不是我想放在那里的。例如

```
protected override void OnCopyingRowClipboardContent(DataGridRowClipboardEventArgs args)
{
    Clipboard.SetText("Abc-hello");
    bool b1 = Clipboard.ContainsText();
    string s1 = Clipboard.GetText();
} 
```

`s1`获取所需的文本，但在退出此方法后剪贴板变空。知道是否可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-23T13:25:04.793

正确的方法是在 XAML 网格上添加这个属性

```
ClipboardCopyMode="ExcludeHeader" 
```

并为您要复制的每个属性添加此 XAML

```
 <DataGridTemplateColumn  ClipboardContentBinding="{Binding XXXXXX} ..... 
```

其他兼性步骤是实现 dataGrid 事件 CopyingRowClipboardContent 来修改剪贴板数据

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:47:32.550

您需要设置 DataGridRowClipboardEventArgs 的 ClipboardRowContent 属性

```
static void dataGrid_CopyingRowClipboardContent(object sender, DataGridRowClipboardEventArgs e)
{
    e.ClipboardRowContent.Clear();
    e.ClipboardRowContent.Add(new DataGridClipboardCellContent(e.Item, (sender as DataGrid).Columns[0], "Abc-hello"));
} 
```

# linux - 如何使 rpm 自动安装依赖项

> ID：13876875
> 
> 赞同：159
> 
> 时间：2012-12-14T10:30:17.763
> 
> 标签：linux, installation, package, rpm, yum

我已经构建了两个 RPM 包

*   `proj1-1.0-1.x86_64.rpm`
*   `libtest1-1.0-1.x86_64.rpm`

`proj1`取决于`libtest1.so`存在的文件，并且它正确反映在 RPM 包中，如下所示：

```
user@my-pc:~$ rpm -qp --requires proj1-1.0-1.x86_64.rpm
libtest1.so()(64bit)

user@my-pc:~$ rpm -qp --provides libtest1-1.0-1.x86_64.rpm
libtest1.so()(64bit) 
```

`proj1`由于缺少依赖项，安装失败。

```
user@my-pc:~$ rpm -ivh proj1-1.0-1.x86_64.rpm
error: Failed dependencies:
libtest1.so()(64bit) is needed by proj1-1.0-1.x86_64.rpm 
```

如何确保`libtest1-1.0-1.x86_64.rpm`在安装过程中自动安装`proj1-1.0-1.x86_64.rpm`？

我确实尝试了[这里](http://www.redhat.com/advice/tips/rhce/rpm.html)描述的`--aid`选项，但它对我不起作用。`rpm -i`

还有其他方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2013-05-06T20:32:24.033

@gertvdijk 提供的链接显示了一种无需配置本地存储库即可实现所需结果的快速方法：

```
$ yum --nogpgcheck localinstall packagename.arch.rpm 
```

只需更改`packagename.arch.rpm`为您要安装的 RPM 文件名即可。

**编辑**只是澄清一下，这将自动安装通过系统 YUM 存储库已经可用的所有依赖项。

如果您的依赖项由不在系统存储库中的其他 RPM 满足，则此方法将不起作用，除非`packagename.arch.rpm`在命令行中同时指定了每个 RPM。

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-12-14T11:24:07.013

创建一个（本地）存储库并使用`yum`它来为您解决依赖关系。

CentOS wiki 有一个不错的页面，提供了这方面的操作方法。[CentOS wiki HowTos/CreateLocalRepos](http://wiki.centos.org/HowTos/CreateLocalRepos)。

* * *

总结并进一步最小化（不理想，但最快）：

1.  为您的本地存储库创建一个目录，例如`/home/user/repo`.
2.  将 RPM 移动到该目录中。
3.  修复一些所有权和文件系统权限：

    ```
    # chown -R root.root /home/user/repo 
    ```

4.  `createrepo`如果尚未安装，请安装包，然后运行

    ```
    # createrepo /home/user/repo
    # chmod -R o-w+r /home/user/repo 
    ```

5.  创建一个存储库配置文件，例如`/etc/yum.repos.d/myrepo.repo`包含

    ```
    [local]
    name=My Awesome Repo
    baseurl=file:///home/user/repo
    enabled=1
    gpgcheck=0 
    ```

6.  使用安装你的包

    ```
    # yum install packagename 
    ```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-08-20T18:05:23.467

对于 dnf 用户，不再需要使用`dnf install *.rpm`, 。`localinstall`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-09-25T18:18:40.117

对我来说，只是和

```
# yum install ffmpeg-2.6.4-1.fc22.x86_64.rpm 
```

并自动请求授权以下载依赖项。在示例下方，我使用的是 Fedora 22

```
[root@localhost lukas]# yum install ffmpeg-2.6.4-1.fc22.x86_64.rpm
Yum command has been deprecated, redirecting to '/usr/bin/dnf install  ffmpeg-2.6.4-1.fc22.x86_64.rpm'.
See 'man dnf' and 'man yum2dnf' for more information.
To transfer transaction metadata from yum to DNF, run:
'dnf install python-dnf-plugins-extras-migrate && dnf-2 migrate'

Last metadata expiration check performed 0:28:24 ago on Fri Sep 25 12:43:44 2015.
Dependencies resolved.
====================================================================================================================
 Package               Arch           Version                                  Repository                      Size
====================================================================================================================
Installing:
 SDL                   x86_64         1.2.15-17.fc22                           fedora                         214 k
 ffmpeg                x86_64         2.6.4-1.fc22                             @commandline                   1.5 M
 ffmpeg-libs           x86_64         2.6.4-1.fc22                             rpmfusion-free-updates         5.0 M
 fribidi               x86_64         0.19.6-3.fc22                            fedora                          69 k
 lame-libs             x86_64         3.99.5-5.fc22                            rpmfusion-free                 345 k
 libass                x86_64         0.12.1-1.fc22                            updates                         85 k
 libavdevice           x86_64         2.6.4-1.fc22                             rpmfusion-free-updates          75 k
 libdc1394             x86_64         2.2.2-3.fc22                             fedora                         124 k
 libva                 x86_64         1.5.1-1.fc22                             fedora                          79 k
 openal-soft           x86_64         1.16.0-5.fc22                            fedora                         292 k
 opencv-core           x86_64         2.4.11-5.fc22                            updates                        1.9 M
 openjpeg-libs         x86_64         1.5.1-14.fc22                            fedora                          89 k
 schroedinger          x86_64         1.0.11-7.fc22                            fedora                         315 k
 soxr                  x86_64         0.1.2-1.fc22                             updates                         83 k
 x264-libs             x86_64         0.142-12.20141221git6a301b6.fc22         rpmfusion-free                 587 k
 x265-libs             x86_64         1.6-1.fc22                               rpmfusion-free                 486 k
 xvidcore              x86_64         1.3.2-6.fc22                             rpmfusion-free                 264 k

Transaction Summary
====================================================================================================================
Install  17 Packages

Total size: 11 M
Total download size: 9.9 M
Installed size: 35 M
Is this ok [y/N]: y 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-10-25T05:52:40.323

我找到了一个更简单的解决方案。如果您在同一个目录中拥有所有 RPM，那么您需要做的就是，

```
$ sudo rpm -i *.rpm 
```

`rpm`似乎找出了安装这些并安装 RPM 的正确顺序。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-30T08:54:52.200

马修的回答激起了许多情绪，因为它仍然缺少一个小细节。一般命令是：

```
# yum --nogpgcheck localinstall <package1_file_name> ... <packageN_file_name> 
```

以上`package_file_name`可以包括本地绝对或相对路径，或者是 URL（甚至可能是 URI）。

Yum 将在命令行上给出的所有包文件之间搜索依赖关系，如果无法找到那里的依赖关系，它还将使用任何已配置和启用的 yum 存储库。

不会搜索当前工作目录或任何目录的路径`package_file_name`，除非这些目录中的任何一个先前已配置为启用的`yum`存储库。

因此，在 OP 的情况下，`yum`命令：

```
# cd <path with pkg files>; yum --nogpgcheck localinstall ./proj1-1.0-1.x86_64.rpm ./libtest1-1.0-1.x86_64.rpm 
```

会这样做，就像这样做`rpm`：

```
# cd <path with pkg files>; rpm -i proj1-1.0-1.x86_64.rpm libtest1-1.0-1.x86_64.rpm 
```

这些`yum`和`rpm`调用之间的差异只有在列出的要安装的软件包之一对命令行上未列出的软件包有进一步的依赖关系时才可见。

在这种情况下`rpm`，将拒绝继续，而`yum`将使用任何已配置和启用的 yum 存储库来搜索依赖项，并且可能会成功。

当前工作目录在任何情况下都不会被搜索，除非它之前已配置为启用的`yum`存储库。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-09T06:33:59.233

对于 openSUSE Leap 15，我收到了类似的错误：

```
> sudo rpm -i opera-stable_53.0.2907.68_amd64.rpm 
[sudo] password for root: 
warning: opera-stable_53.0.2907.68_amd64.rpm: Header V4 RSA/SHA512 Signature, key ID a5c7ff72: NOKEY
error: Failed dependencies:
    at is needed by opera-stable-53.0.2907.68-0.x86_64 
```

我运行这个命令来找出依赖项是什么：

```
> sudo zypper install opera-stable_53.0.2907.68_amd64.rpm 
Loading repository data...
Reading installed packages...
Resolving package dependencies...

The following 4 NEW packages are going to be installed:
  at libfl2 libHX28 opera-stable

4 new packages to install.
Overall download size: 50.3 MiB. Already cached: 0 B. After the operation, additional 176.9 MiB will be used.
Continue? [y/n/...? shows all options] (y): n 
```

然后我运行这个命令来安装依赖项：

```
> sudo zypper in at
Loading repository data...
Reading installed packages...
Resolving package dependencies...

The following 3 NEW packages are going to be installed:
  at libfl2 libHX28

3 new packages to install.
Overall download size: 208.6 KiB. Already cached: 0 B. After the operation, additional 600.4 KiB will be used.
Continue? [y/n/...? shows all options] (y): y 
```

然后我运行它来安装`rpm`文件：

```
> sudo rpm -i opera-stable_53.0.2907.68_amd64.rpm 
```

我**不确定**这是否是最佳做法，但它解决了我的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-03T02:32:05.243

将所有 RPM 复制到一个目录中，然后按如下方式安装：

`yum install -y --cacheonly --disablerepo=* /var/rpm_dir/*.rpm`

对于您可以使用的特定包`yumdownloader`，例如在另一个线程中：[https ://stackoverflow.com/a/66927190/5078874](https://stackoverflow.com/a/66927190/5078874)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-05T01:26:10.897

我遇到了这个问题，对我`yum localinstall enterPkgNameHere.rpm`有用的是从 .rpm 文件所在的目录中运行。

注意：将 替换为`enterPkgNameHere.rpm`.rpm 文件的名称。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-12T15:31:43.237

Step1：复制给定位置的所有rpm pkg

步骤2：如果尚未安装createrepo，默认情况下不会安装，请安装它。

```
[root@pavangildamysql1 8.0.11_rhel7]# yum install createrepo 
```

Step3：创建存储库元数据并授予以下权限

```
[root@pavangildamysql1 8.0.11_rhel7]# chown -R root.root /scratch/PVN/8.0.11_rhel7
[root@pavangildamysql1 8.0.11_rhel7]# createrepo /scratch/PVN/8.0.11_rhel7
Spawning worker 0 with 3 pkgs
Spawning worker 1 with 3 pkgs
Spawning worker 2 with 3 pkgs
Spawning worker 3 with 2 pkgs
Workers Finished
Saving Primary metadata
Saving file lists metadata
Saving other metadata
Generating sqlite DBs
Sqlite DBs complete
[root@pavangildamysql1 8.0.11_rhel7]# chmod -R o-w+r /scratch/PVN/8.0.11_rhel7 
```

Step4: 在 /etc/yum.repos.d/mysql.repo 创建包含以下内容的存储库文件

```
[local]
name=My Awesome Repo
baseurl=file:///scratch/PVN/8.0.11_rhel7
enabled=1
gpgcheck=0 
```

Step5 运行此命令进行安装

```
[root@pavangildamysql1 local]# yum --nogpgcheck localinstall mysql-commercial-server-8.0.11-1.1.el7.x86_64.rpm 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2018-03-30T03:06:38.123

简单只需运行以下命令。

```
sudo dnf install *package.rpm 
```

输入您的密码，您就完成了。

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2016-03-21T12:45:53.400

从源文件生成 RPM 的过程： 1) 下载扩展名为 .gz 的源文件。2) 从 yum install 安装 rpm-build 和 rpmdevtools。（将生成 rpmbuild 文件夹...SPECS、SOURCES、RPMS .. 文件夹应在 rpmbuild 文件夹内生成）。3) 将源代码.gz 复制到 SOURCES 文件夹。(rpmbuild/SOURCES) 4) 使用以下命令解压缩 tar 球。转到存在 tar 文件的 SOURCES 文件夹 :rpmbuild/SOURCES。命令：例如 tar -xvzf httpd-2.22.tar.gz httpd-2.22 文件夹将在同一路径下生成。检查 apr 和 apr-util 是否在 httpd-2.22/srclib 文件夹中。如果 apr 和 apr-util 不存在，请从 apache 站点下载最新版本，解压并将其放在 httpd-2.22/srclib 文件夹中。还要确保您的系统中安装了 pcre。

5）转到提取的文件夹，然后键入以下命令：./configure --prefix=/usr/local/apache2 --with-included-apr --enable-proxy --enable-proxy-balancer --with-mpm= worker --enable-mods-static=all 6）配置成功后运行以下命令：make 7）成功执行 od make 命令运行后：checkinstall 在同一文件夹中。（如果您没有 checkinstall 软件，请从网站下载最新版本） checkinstall 软件也有错误，可以通过以下方式解决：::::: 找到 checkinstallrc，然后使用 vim 命令将 TRANSLATE = 1 替换为 TRANSLATE=0。还要检查排除包：EXCLUDE="/selinux" 8)checkinstall 将询问选项（如果您想为源文件构建 rpm，请键入 R） 9)已完成的 .rpm 文件将构建在 rpmbuild/RPMS 文件内的 RPMS 文件夹中。 .. 祝一切顺利 ....

问候， 普雷拉纳

# c# - 在 Visual Studio 2010 中创建 .exe

> ID：13876877
> 
> 赞同：1
> 
> 时间：2012-12-14T10:30:30.990
> 
> 标签：c#, .net, visual-studio-2010, crystal-reports

我在 C# 中开发了一个基于窗口的应用程序。我已经使用 Crystal 报表来显示数据和 a.mdf 数据库现在我想创建**一个 exe 文件，其中包含 Crystal 报表，数据库在其 perquisites**中，当我将它安装在任何计算机上时，它会从相同的位置安装 Crystal 报表和数据库可执行程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:34:29.623

[使用Inno Setup](http://jrsoftware.org/isdl.php)创建一个设置并让它安装你的先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:36:55.800

您可以使用 Visual Studio 安装项目。在设置项目中，按照`New Project > Other Project Types > Setup and Deployment > Visual Studio Installer`. 查看[面向开发人员的 .NET Framework 部署指南](http://msdn.microsoft.com/en-us/library/ee942965.aspx)

# ios - iOS从pdf获取文本

> ID：13876878
> 
> 赞同：0
> 
> 时间：2012-12-14T10:30:46.850
> 
> 标签：ios, ios5, pdf, pdf-generation, pdf-extraction

您好，我正在开发一个速读应用程序，我正在寻找一些提示或建议。在这个应用程序中，我必须使用不同的阅读技术，这需要从 pdf 中格式化不同大小的文本。用于无图片自动滚动的技术。有人已经知道谁来做这件事了吗？或者有我的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:40:44.853

如果 PDF 包含格式奇怪的文本或包含在图像中的文本，那么您就没有运气，否则有几个 ObjC 库可用（在 github 上）

它们都封装了 CoreGraphics CDPDF* 函数

这不是那么容易，也不能用一条线来回答，但基本方法是：

1.  得到一个 CGPDFDocument
2.  获取每个 PDFPage
3.  获取每个页面的 CGPDFDictionary 并解析它。它会给你pdf页面中的所有对象
4.  对于您遇到的每个字符串，调用 CGPDFStringCopy 并将其附加到一个 mutableString 用作您的缓冲区
5.  缓冲区是文档的文本

# namespaces - 你如何命名一个 Dart 类？

> ID：13876879
> 
> 赞同：37
> 
> 时间：2012-12-14T10:30:54.190
> 
> 标签：namespaces, dart

如何为 Dart 类创建命名空间？我来自 C# 背景，人们只会使用`namespace SampleNamespace { }`.

你如何在 Dart 中达到同样的效果？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-14T13:38:03.097

Dart 没有命名空间的概念，但它有库。您可以认为库在某种程度上等同于命名空间，因为库可以由多个文件组成，并包含多个类和函数。

Dart 中的隐私也在库中，而不是在类级别（任何带有下划线前缀的东西都是该库私有的）。

定义库的示例（使用实用程序库的示例：

```
// utilities.dart
library utilities; // being the first statement in the library file 
```

`part`您可以使用关键字使其他文件成为同一库的一部分。零件文件仅用于帮助组织您的代码；您可以将所有类放在一个库文件中，或者将它们拆分为几个部分文件（或部分文件和库文件） - 它对执行没有影响。将主库文件放在父文件夹中，将部分文件放在`src/`文件夹中是一种风格。

扩展示例以显示零件文件。

```
// utilities.dart
library utilities;

part "src/string_utils.dart";
part "src/date_utils.dart"; 
```

然后，这些部分文件使用以下`part of`语句链接回它们所属的库：

```
// src/string_utils.dart
part of utilities;

// functions and classes
String reverseString(s) => // implementation ....

String _stringBuilder(strings) => // a private (to the library) function, 
                                  // indicated by the leading underscore

//... snip other classes and functions 
```

现在您有了一个包含函数的库，您可以通过`import`ing 库在其他地方使用该库：

```
 // my_app.dart;
 import "path/to/library/utilities.dart";

 main() {
   var reversed = reverseString("Foo");
   // _stringBulider(["a","b"]); // won't work - this function is 
                                 // only visible inside the library
 } 
```

如果你想给你的库起别名以避免冲突（你可能会导入两个库，都包含一个`reverseString()`函数，你可以使用`as`关键字：

```
 // my_app.dart;
 import "path/to/library/utilities.dart";
 import "some/other/utilities.dart" as your_utils;

 main() {
   var reversed = reverseString("Foo"); 
   var your_reversed_string = your_utils.reverseString("Bar");
 } 
```

import 语句还使用了由 Dart 的包管理器 pub 导入的包，因此您也可以在 github 或其他地方托管您的库，并像这样引用您的库：

```
 // my_app.dart;
 import "package:utilities/utilities.dart";

 main() {
   var reversed = reverseString("Foo");        
 } 
```

pub 依赖项在一个`pubspec.yaml`文件中定义，该文件告诉 pub 在哪里可以找到库。[您可以在pub.dartlang.org](http://pub.dartlang.org/doc/)找到更多信息

需要注意的是，只有库文件可以：

*   包含`import`语句。零件文件不能。
*   包含`library`关键字。零件文件不能。
*   包含`part`文件。零件文件不能。

最后一点是，可运行的应用程序文件可以（并且可能是）库文件，也可以由部分文件组成

```
 // my_app.dart;
 library my_app;

 import "package:utilities/utilities.dart";

 part "src/edit_ui.dart";
 part "src/list_ui.dart";
 part "src/foo.dart";

 main() {
   var reversed = reverseString("Foo");    
   showEditUi(); // perhaps defined in edit_ui.dart....?
 } 
```

# xamarin.ios - 更改颜色标题 UITable 静态部分

> ID：13876880
> 
> 赞同：2
> 
> 时间：2012-12-14T10:30:58.897
> 
> 标签：xamarin.ios, tableview

我的应用程序中有两个 UITable 静态部分，它们都有不同的标题。由于自定义背景，必须更改标题的颜色。

如何在我的 MonoTouch 应用程序中执行此解决方案，例如（[链接）？](https://stackoverflow.com/questions/3715390/change-uitable-section-title-color)

因为我使用静态部分，所以我没有可以在其中执行操作的 UITableViewSource。

### 我的解决方案（感谢 Krumelur）

```
[Export("tableView:viewForHeaderInSection:")]
UIView GetViewForHeaderInSecion (UITableView tableview, int section)
{
    UIView view = new UIView (new RectangleF (0, 0, 300, 0));
    view.BackgroundColor = UIColor.Clear;

    UILabel label = new UILabel (new RectangleF (15, 5, 300, 25));
    label.BackgroundColor = UIColor.Clear;
    label.TextColor = UIColor.White;
    label.ShadowColor = UIColor.Black;
    label.ShadowOffset = new SizeF(0, 1);
    label.Font = UIFont.BoldSystemFontOfSize(18);

    if (section == 0) {
        label.Text = "First section";
    } else {
        label.Text = "Second section";
    }

    view.AddSubview(label);
    return view;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:39:22.357

您必须在控制器中导出缺少的方法。就像是：

```
[Export("tableView:viewForHeaderInSection:")]
UIView GetViewForHeaderInSection(UITableView tableview, int section
{
// return your UIView with whatever background color here
} 
```

请注意，您不能更改预定义视图的颜色，而必须返回整个视图。

# c# - 在不使用类字段的情况下返回静态数组

> ID：13876882
> 
> 赞同：4
> 
> 时间：2012-12-14T10:30:59.583
> 
> 标签：c#

我有以下基类和派生类（部分，为简洁起见）：

```
class Base {
     public abstract int[] someArray { get; }
}

class Derived : Base {
     private readonly static int[] _someArray = new int[] { 1,2,3,4 };
     public override int[] someArray { 
         get {
              return _someArray;
         }
     }
} 
```

我现在想要的是把getter`new int[] { 1,2,3,4 }`的`return`一部分。但是，每次调用 getter 时都会创建一个新数组。

是否可以直接返回某种对象，该对象对于 class 的所有对象都保持不变`Derived`？

类似于（我知道这是无效的 C#）：

```
 get {
        return (int[]) { 1, 2, 3, 4 };
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T10:38:31.457

如果您只想将`new int[] { 1,2,3,4 }`零件放入吸气剂中，那很容易...

```
 private static int[] _someArray = null;
 public override int[] someArray { 
     get {
          return _someArray ?? (_someArray = new int[] { 1,2,3,4 });
     }
 } 
```

不过，你会失去只读的。

**更新：泛型解决方案**

或者您可以为此滥用泛型的功能：

```
// Of course you still want to use the non-generic class Base
abstract class Base {
    public abstract int[] someArray { get; }
}

abstract class Base<T> : Base where T: Base<T> {
     // Will be created once for every T, i.e. every derived class.
     private static int[] _someArray;

     public override int[] someArray {
        get { return _someArray ?? (_someArray = CreateArray()); }
     }

     protected abstract int[] CreateArray();
}

sealed class Derived : Base<Derived> {
     protected sealed override int[] CreateArray() { 
         return new int[] { 1,2,3,4 };
     }
}

sealed class DerivedB : Base<DerivedB> {
    protected sealed override int[] CreateArray() {
        return new int[] { 2,3,4,5 };
    }
} 
```

请注意，这只适用于一个继承级别，所以我密封了一些东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:41:48.310

据我所知，这在 C# 中不起作用。您可以使用字段或在属性/方法中创建变量。在 VB.NET 中，您有`Static`局部变量的关键字（见下文）。

您已经评论说您有许多派生类，并且您不希望每个派生类都有一个静态字段数组。我会建议使用不同的方法。您可以在基类中使用静态变量`Dictionary`，并为每个派生类使用枚举：

```
abstract class Base
{
    public abstract DerivedType Type { get; }

    protected static readonly Dictionary<DerivedType, int[]> SomeDict;

    static Base()
    {
        SomeDict = new Dictionary<DerivedType, int[]>();
        SomeDict.Add(DerivedType.Type1, new int[] { 1, 2, 3, 4 });
        SomeDict.Add(DerivedType.Type2, new int[] { 4, 3, 2, 1 });
        SomeDict.Add(DerivedType.Type3, new int[] { 5, 6, 7 });
        // ...
    }

    public static int[] SomeArray(DerivedType type)
    {
        return SomeDict[type];
    }
}

public enum DerivedType
{
    Type1, Type2, Type3, Type4, Type5
}

class Derived : Base
{
    public override DerivedType Type
    {
        get { return DerivedType.Type1; }
    }
} 
```

* * *

但是，在 VB.NET 中，可以使用-keyword[使用](http://msdn.microsoft.com/en-us/library/z2cty7t8%28v=vs.110%29.aspx)[静态局部变量](http://weblogs.asp.net/psteele/pages/7717.aspx)：[`Static`](http://msdn.microsoft.com/en-us/library/z2cty7t8%28v=vs.110%29.aspx)

```
MustInherit Class Base
    Public MustOverride ReadOnly Property someArray() As Integer()
End Class

Class Derived
    Inherits Base
    Public Overrides ReadOnly Property someArray() As Integer()
        Get
            Static _someArray As Int32() = New Integer() {1, 2, 3, 4}
            Return _someArray
        End Get
    End Property
End Class 
```

`_someArray`对于 的每个实例都是相同的`Derived`。

# c - 为什么这段代码会触发分段错误？

> ID：13876883
> 
> 赞同：2
> 
> 时间：2012-12-14T10:31:09.627
> 
> 标签：c, pthreads, posix

我正在获取`Segmentation Fault`以下代码，这很奇怪，因为我看不到我在哪里访问未初始化的内存。我试图调试代码，发现这个分段错误与`*g`内部线程过程有关。这是代码：

```
void *Func(void *arg);

int main()
{
    pthread_t tid;
    void *x;

    pthread_create(&tid,NULL,Func,NULL);
    pthread_join(tid,&x);
    int i=*(int *)x;
    printf("Data returned from the thread %d\n",i);

    return 0;
}

void *Func(void *arg)
{
    int *g;
    int i=2,j=3;
    printf("inside thread\n");      
    *g=i+j;
    printf("%d\n",*g);

    return g;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:34:07.997

问题出在下面的代码上

```
int *g;
....
*g=i+j; 
```

`g`是一个未初始化的指针。当您取消引用它时，您正在尝试写入内存中未定义的位置。这样做的影响是不确定的，但很可能是段错误。

有很多方法可以解决这个问题，包括

*   分配内存`g`
*   观点`g`一些分配的内存
*   `g`在堆栈中声明`main`并将指向它的指针传递给您的子线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T10:35:02.773

in `int *g;` g 是未分配的位置地址，您正试图在该位置分配。

这样做：

`int *g=calloc(1, sizeof(int)) ;`

也不要忘记`free`记忆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:35:23.303

你正在做：

```
int *g;
...
*g=i+j; 
```

`g`是一个未初始化的指针，您正在尝试写入它指向的位置，这会导致未定义的行为。

# gmail - 使用邮件服务器使用 api 与 jira 通信

> ID：13876887
> 
> 赞同：0
> 
> 时间：2012-12-14T10:31:22.517
> 
> 标签：gmail, jira, jira-plugin

我是 jira 及其邮件处理程序的新手。我想使用 jira 的邮件处理程序扫描我邮箱中的两个文件夹。并更新与这些文件夹相关的两个项目。我做到了。

但现在我想扩展该功能。我想将邮件保留在这些文件夹中（阻止邮件处理程序在处理后删除它）并使其能够通过将相关邮件从文件夹移动到项目中移动问题/任务其他文件夹。导致从该项目中删除原始问题/任务并在另一个文件夹中创建它。请帮助使这成为可能。

对于那些不理解我的问题的人：想象一下我将 php 开发人员职位的简历发送到邮件中。当收件人检查它时，他把它放在他邮箱的php文件夹中。所以然后在项目php开发人员中创建了一个任务。但接下来接收者认为我更适合 web 开发而不是 php。所以他只是将邮件从 php 文件夹移动到 web 文件夹。所以 php 项目中的现有任务被删除，并在 web 开发项目下创建一个新任务。我可以这样做吗？如果是这样怎么办？请指导我..

***更新***

叹息..我不知道如何与企业人员合作。现在情况发生了变化。我希望你能帮我解决这个问题。很抱歉问题的突然变化……再次……现在我的老板想要这样的东西。

我使用 imap 功能创建了一个邮件客户端来访问邮件服务并将这些邮件检索到 Web 功能。没有问题。但现在我的老板也想通过同一个应用程序处理 jira。就像移动时我的问题一样，将邮件放入文件夹中，应用程序本身应该与jira通信并进行必要的问题创建和删除..这可能@Kuf吗？如果是这样，请帮忙。因为我的截止日期是星期三。我几乎要惊慌失措了..lol..请原谅我改变这样的问题。因为这不是我的意愿..

***编辑***

我已经看到rest api可以做到这一点。但是如何使用呢？有什么答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:52:55.167

我发现最简单的方法是在您的主帐户中接收电子邮件并将它们[转发](http://support.google.com/mail/bin/answer.py?hl=en&answer=10957)到第二个帐户，同时在邮件服务器上保存一份副本。然后，告诉 Jira 从第二封电子邮件中提取电子邮件。

**更新**

过去，我一直在寻找一种方法来更改 Jira 的电子邮件处理程序功能，如您在[此处的问题](https://stackoverflow.com/questions/11490478/jira-creating-issues-and-comments-from-email-with-no-subject)中所见。使用 Jira 的电子邮件处理程序不可能实现您的要求，因为它的工作方式是，它不会记录哪些电子邮件已被阅读，Jira 的服务会检查新电子邮件，根据预定义的过滤器（垃圾邮件或用户定义），处理其余的电子邮件，并删除它们，因此它不会再次处理它们。

我能想到的获得你想要的功能的方法是重新编写电子邮件处理程序，你可以获取[源代码](https://confluence.atlassian.com/download/attachments/267257008/CreateOrCommentHandler.java?version=1&modificationDate=1254798618002)，重新编写它，并将[其构建](https://developer.atlassian.com/display/DOCS/Set+up+the+Atlassian+Plugin+SDK+and+Build+a+Project) [到你的 Jira 应用程序](https://developer.atlassian.com/display/JIRADEV/Component+Plugin+Module)中。

另一种我觉得更简单的方法是将所有电子邮件放入 Jira，然后从 Jira 内部将问题从一个项目转移到另一个项目。您甚至可以使用[Jira Scripting Suite](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)创建预定义按钮，以便在项目之间轻松移动问题（创建发布功能并将其附加到工作流转换）。

如果您需要任何帮助，请告诉我。祝你好运！

**编辑 2**

您使用哪个 Jira 版本？您打算使用远程 API 执行哪些操作？Jira REST API 是最新的，但一些旧 API 具有 REST 所缺乏的功能。要尝试确定适合您的 API，请查看[JIRA Remote API Reference](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)。

如果您决定使用 REST API，我建议您阅读 Jira 的[REST 入门](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference)手册，其中介绍了如何使用 REST API。有关完整文档，请查看[JIRA REST API 文档](https://developer.atlassian.com/static/rest/jira/5.2.2.html)（确保根据您的 Jira 版本使用正确的版本）。

# wso2 - 可配置治理工件（RXT）：扩展或组合

> ID：13876888
> 
> 赞同：1
> 
> 时间：2012-12-14T10:31:23.207
> 
> 标签：wso2, wso2carbon

我正在 WSO2 治理注册表上创建可配置的治理工件。

注册表扩展文件支持工件之间的关系，但我想扩展或组合它们。例如，我需要定义一个**具有**其他对象的工件。而且我想用一些字段定义一个工件，并用其他字段扩展它。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:58:18.323

是的，您可以根据需要扩展现有的 rxt。您需要做的是，打开存储的 RXT 文件和新字段，然后重新启动服务器。进入管理控制台->查看 rxt 文件，您将看到新添加的字段..

# jquery - 元素单击上的 jQuery 函数仅适用于外部文件

> ID：13876896
> 
> 赞同：0
> 
> 时间：2012-12-14T10:31:52.987
> 
> 标签：jquery, html, file, external

我有带有 id 的 html 元素：

```
<img id = "ShowOrHideImage" src="~/Images/show_expander.png"/> 
```

当我将脚本放置到 html 时，单击后我可以收到消息：

```
<script>
    $("#ShowOrHideImage").click(function () {
        alert("function invoked");
    });
</script> 
```

但是当我将脚本放到外部文件 MyScript.js 中时：

```
alert("Script is there");

$("#ShowOrHideImage").click(function () {
    alert("function invoked");
}); 
```

我收到消息“脚本在那里”但从未“调用函数”我不知道是什么原因。有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:33:18.370

您`external`的 javascript 文件将在`DOM`使用`document.ready`. 还要确保`jQuery`在外部 javascript 文件之前包含该文件。

```
$(document).ready(function(){

  $("#ShowOrHideImage").click(function () {
      alert("function invoked");
  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:34:49.183

尝试这个：

```
alert("Script is there");

$(function () {
  $("#ShowOrHideImage").click(function () {
    alert("function invoked");
  });
}); 
```

`$(function() {`只是 的缩写`$(document).ready(function () {`。

此外，它嵌入到您的文档中的原因是因为您将它放在`<body>`标签中，我猜想是在所有内容（或没有）后面的某个地方。如果你将它嵌入到`<head>`标签中，它仍然不起作用，需要`$(function () {`.

# reporting-services - SSRS：如何从具有不同搜索字符串的长过滤多选列表中选择两个或多个值

> ID：13876907
> 
> 赞同：0
> 
> 时间：2012-12-14T10:32:32.847
> 
> 标签：reporting-services, ssrs-2008, mdx, olap-cube

让我们考虑一个报表上的多项选择参数：***员工***

这个参数有*很多*可能的值。最初，列表上没有显示任何内容，并且有一个关联的文本字段搜索参数，它使用搜索字符串的前*n 个匹配项更新****Employee***选择列表。

 *如果输入的搜索查询是**John Doe**，我们可以想象现在选择列表显示：

*   约翰·多伊
*   ...
*   泽维尔·约翰·杜森

现在我可以从这个过滤列表中选择任意数量的项目，**但是**如果我想同时选择**John Doe**和**Alicia Keys**，会发生以下情况：

*   首先，当我输入搜索字符串“John Doe”时，选择列表会相应地填充
*   我选择**John Doe** - 好的
*   我输入搜索字符串“Alicia Keys”，选择列表也被填充
*   John Doe 的选择消失了 - 我希望能够同时选择**Alicia**和**John**，但我不想通过数千个名字的长选择列表

## 更新：

忘了提到我们在后台有一个维度为“员工”的 OLAP 多维数据集。该维度用作参数的来源，参数数据集使用 MDX 获取值，因此此处无法应用 SQL 解决方案。

当前解决方案使用 MDX 过滤器和头函数创建自定义集，然后在 MDX 查询的 ROWS 部分中使用该集。

以下是该集合的创建方式：

```
SET setEmployees AS { 
HEAD(
  FILTER( [Employees].[Employees].ALLMEMBERS, 
      INSTR([Employees].[Employees].CURRENTMEMBER.Name,@EmployeeSearch,1 >= 1 ) 
      )
,100) 
} 
```

基本上这个解决方案的问题是如何将多个搜索字符串添加到 instr 函数

这种情况有通用的解决方案吗？我是否从错误的方向解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:08:48.773

您可以做的是使搜索参数更加灵活，因此您可以处理以下输入：

> 约翰或简

如果“OR”查询比“AND”查询更常见，您可以使用以下查询来支持它：

> 约翰简

请注意，这可能会让人们望而却步，因为他们习惯使用的搜索功能（例如 Google 搜索）通常倾向于以“AND”的含义解释多个单词。

**无论如何，棘手的一点当然是Employee**数据集背后的 SQL 。这应该以更灵活的方式使用搜索参数。您尚未指定当前的工作方式，但我想您可能正在使用类似的东西：

```
WHERE Employee.FullName LIKE '%' + @SearchParameter + '%' 
```

您需要扩展它以支持“OR”查询。有各种各样的解决方案，从快速'n 脏手工 SQL（例如[字符串拆分](https://stackoverflow.com/questions/2647/split-string-in-sql)结合`WHERE...IN`）到全文查询。选择最适合您情况的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:41:15.920

如果您有固定数量的搜索词，则可以执行以下操作。

```
FILTER( [Employees].[Employees].ALLMEMBERS, 
  INSTR([Employees].[Employees].CURRENTMEMBER.Name,@EmployeeSearch1,1 >= 1) OR
  INSTR([Employees].[Employees].CURRENTMEMBER.Name,@EmployeeSearch2,1 >= 1) 
  ) 
```

即使你能做到，我也不推荐。您没有像 SQL 那样对 Analysis Services 进行索引的奢侈。更好的方法是查询您的数据仓库中的员工并返回适当的键，然后在您的 MDX 语句中按这些键进行过滤。*

# xml - 页面确实返回了错误的收集警报

> ID：13876910
> 
> 赞同：0
> 
> 时间：2012-12-14T10:32:39.790
> 
> 标签：xml, nunit, htmlunit

当转到一个页面时，它应该通过警报 javascript 显示一个消息框。但似乎没有错误（这应该发生，因为我已经更改了检索页面列表所需的 xml 文件中的内部文本）。

这是aspx页面内的内容：

```
If list = Null
alert("Sorry there's nothing to retrieve.") 
```

对于测试：

```
Dim docu As New XmlDocument
Dim path As String = "C:\Hallbjorn.xml"
docu.Load(path)
docu.SelectSingleNode("/Aria/Icelandic").InnerText = "Suburban"
docu.Save(path)

webCLient.getPage("https:/Storyline.com/Character1.htm")
collectedAlerts = New java.util.ArrayList()
webCLient.setAlertHandler(New CollectingAlertHandler(collectedAlerts))

Dim newPage = oldPage.getElementById("background").click
Assert.AreEqual("Sorry there's nothing to retrieve.", Convert.ToString(collectedAlerts)) 
```

错误消息应该是警报中的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:32:09.883

警报处理程序的设置必须在单击要转到另一个页面的按钮之前发生。

# ruby-on-rails-3 - Rails 3.0.9 中的ckeditor

> ID：13876911
> 
> 赞同：0
> 
> 时间：2012-12-14T10:32:40.540
> 
> 标签：ruby-on-rails-3, ckeditor

我有我的 Rails 3.0.9 项目，我添加了 CKeditor 3.6.3，在开发中工作正常，在 Heroku 的暂存中也工作正常，但在生产中使应用程序崩溃。

这是我必须生产的配置：

配置/应用程序.rb

```
 config.autoload_paths += %W(#{config.root}/app/models/ckeditor) 
```

配置/环境/production.rb

```
 #config.assets.precompile += Ckeditor.assets 
```

我评论了这条线，因为 config.assets 在 Rails 3.1 之前不可用，但我现在不想升级 Rails。

应用程序/模型/ckeditor/attachment_file.rb

```
 class Ckeditor::AttachmentFile < Ckeditor::Asset
      has_attached_file :data,
                        :storage => :s3,
                        :s3_credentials => "#{Rails.root}/config/s3.yml",
                        :path => ":attachment/:id/:style.:extension",
                        :url => ":s3_domain_url"

      validates_attachment_size :data, :less_than => 100.megabytes
      validates_attachment_presence :data

      def url_thumb
        @url_thumb ||= Ckeditor::Utils.filethumb(filename)
      end
    end 
```

应用程序/模型/ckeditor/picture.rb

```
 class Ckeditor::Picture < Ckeditor::Asset
      has_attached_file :data, :styles => { :content => '800>', :thumb => '118x100#' },
                               :storage => :s3,
                               :s3_credentials => "#{Rails.root}/config/s3.yml",
                               :path => ":picture/:id/:style.:extension",
                               :url => ":s3_domain_url"

     validates_attachment_size :data, :less_than => 2.megabytes
     validates_attachment_presence :data

     def url_content
       url(:content)
     end
   end 
```

我收到了下一个错误：

```
/home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing_from_s3_library': uninitialized constant Ckeditor::Asset (NameError)
from /home/jorge/trabajos/blanet/app/models/ckeditor/attachment_file.rb:1:in `<top (required)>'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/engine.rb:138:in `block (2 levels) in eager_load!'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/engine.rb:137:in `each'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/engine.rb:137:in `block in eager_load!'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/engine.rb:135:in `each'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/engine.rb:135:in `eager_load!'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/application.rb:108:in `eager_load!'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/application/finisher.rb:41:in `block in <module:Finisher>'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/initializable.rb:25:in `instance_exec'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/initializable.rb:25:in `run'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/initializable.rb:50:in `block in run_initializers'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/initializable.rb:49:in `each'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/initializable.rb:49:in `run_initializers'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/application.rb:134:in `initialize!'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/application.rb:77:in `method_missing'
from /home/jorge/trabajos/blanet/config/environment.rb:5:in `<top (required)>'
from /home/jorge/trabajos/blanet/config.ru:3:in `block in <main>'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/builder.rb:46:in `instance_eval'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/builder.rb:46:in `initialize'
from /home/jorge/trabajos/blanet/config.ru:1:in `new'
from /home/jorge/trabajos/blanet/config.ru:1:in `<main>'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/builder.rb:35:in `eval'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/builder.rb:35:in `parse_file'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/server.rb:162:in `app'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/server.rb:253:in `wrapped_app'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/rack-1.2.3/lib/rack/server.rb:204:in `start'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/commands/server.rb:65:in `start'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/commands.rb:30:in `block in <top (required)>'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/commands.rb:27:in `tap'
from /home/jorge/.rvm/gems/ruby-1.9.2-p290@rails3/gems/railties-3.0.9/lib/rails/commands.rb:27:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

任何人都可以帮助我吗？

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:05:25.647

看起来它无法为您的附件加载父类。在`Ckeditor::Asset`某处定义？是否正在加载？也许你需要一个`require ckeditor/asset`地方？

# maven - 无法执行 Findbugs: java.lang.OutOfMemoryError: Java heap space, while running mvn sonar:sonar -X

> ID：13876912
> 
> 赞同：7
> 
> 时间：2012-12-14T10:32:42.417
> 
> 标签：maven, build, out-of-memory, sonarqube

我正在尝试使用 maven 3 在声纳 2.11 中进行代码分析。

我正面临这个错误

`java.lang.OutOfMemoryError: Java heap space`.

我试图将 MAVEN_OPTS 增加到`-Xmx1024m -Xms512m -XX:MaxPermSize=256m`但没有用。

该项目的大小约为900MB。我`mvn sonar:sonar -X`在 maven 3 中使用该命令。但构建失败。我没有在我的 superPOM 中运行测试或使用任何万能插件。所以我无法找到问题的原因。请帮我找出问题出在哪里。在此先感谢...这是日志...

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] PHOENIX JAVA MODULE COMPONENT ..................... SKIPPED
[INFO] PHOENIX JAVA COMPONENT ............................ FAILURE [1:27:23.969s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:27:26.229s
[INFO] Finished at: Fri Dec 14 14:14:24 IST 2012
[INFO] Final Memory: 287M/1016M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project XXX: Can not execute Sonar: Can not execute Findbugs: java.lang.OutOfMemoryError: Java heap space -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project XXX: Can not execute Sonar   
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Can not execute Sonar
    at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:118)
    at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:65)
    at org.codehaus.mojo.sonar.SonarMojo.execute(SonarMojo.java:90)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: org.sonar.api.utils.SonarException: Can not execute Findbugs
    at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:120)
    at org.sonar.plugins.findbugs.FindbugsSensor.analyse(FindbugsSensor.java:58)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
    at org.sonar.batch.phases.Phases.execute(Phases.java:93)
    at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:143)
    at org.sonar.batch.bootstrap.Module.start(Module.java:89)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:110)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:105)
    at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:100)
    at org.sonar.batch.bootstrap.Module.start(Module.java:89)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:96)
    at org.sonar.batch.bootstrap.Module.start(Module.java:89)
    at org.sonar.batch.Batch.execute(Batch.java:74)
    at org.sonar.maven3.SonarMojo.executeBatch(SonarMojo.java:147)
    at org.sonar.maven3.SonarMojo.execute(SonarMojo.java:136)
    at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:113)
    ... 23 more
Caused by: java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:112)
    ... 38 more
Caused by: java.lang.OutOfMemoryError: Java heap space
    at java.util.ArrayList.<init>(ArrayList.java:112)
    at edu.umd.cs.findbugs.ba.Frame.<init>(Frame.java:110)
    at edu.umd.cs.findbugs.ba.vna.ValueNumberFrame.<init>(ValueNumberFrame.java:58)
    at edu.umd.cs.findbugs.ba.vna.ValueNumberAnalysis.createFact(ValueNumberAnalysis.java:148)
    at edu.umd.cs.findbugs.ba.vna.ValueNumberAnalysis.createFact(ValueNumberAnalysis.java:55)
    at edu.umd.cs.findbugs.ba.Dataflow.execute(Dataflow.java:309)
    at edu.umd.cs.findbugs.classfile.engine.bcel.ValueNumberDataflowFactory.analyze(ValueNumberDataflowFactory.java:72)
    at edu.umd.cs.findbugs.classfile.engine.bcel.ValueNumberDataflowFactory.analyze(ValueNumberDataflowFactory.java:47)
    at edu.umd.cs.findbugs.classfile.impl.AnalysisCache.analyzeMethod(AnalysisCache.java:332)
    at edu.umd.cs.findbugs.classfile.impl.AnalysisCache.getMethodAnalysis(AnalysisCache.java:282)
    at edu.umd.cs.findbugs.ba.ClassContext.getMethodAnalysis(ClassContext.java:942)
    at edu.umd.cs.findbugs.ba.ClassContext.getValueNumberDataflow(ClassContext.java:361)
    at edu.umd.cs.findbugs.detect.FindInconsistentSync2.findObviouslyLockedCallSites(FindInconsistentSync2.java:963)
    at edu.umd.cs.findbugs.detect.FindInconsistentSync2.visitClassContext(FindInconsistentSync2.java:311)
    at edu.umd.cs.findbugs.DetectorToDetector2Adapter.visitClass(DetectorToDetector2Adapter.java:68)
    at edu.umd.cs.findbugs.FindBugs2.analyzeApplication(FindBugs2.java:979)
    at edu.umd.cs.findbugs.FindBugs2.execute(FindBugs2.java:230)
    at org.sonar.plugins.findbugs.FindbugsExecutor$FindbugsTask.call(FindbugsExecutor.java:137)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :XXX 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T13:14:27.443

这是一个众所周知的问题：Findbugs 真的很耗内存，所以对于一个 900MB 的项目，你必须大量增加 JVM 内存选项我并不感到惊讶。

你可以做的3件事：

1.  再次增加 JVM 内存选项，直到没问题

2.  减少声纳质量配置文件中激活的 Findbugs 规则的数量

3.  重构您的项目是更小的模块，以便每个模块需要更少的内存来被 Findbugs 分析

如果我是你，我真的会选择至少选项 #3，因为单个项目的 900MB 真的很大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-17T07:53:48.923

我有类似的问题，它曾经挂在 Journal Flushing 上并最终超时，无论我在 Findbags Java default timeout in sonarqube 中设置的值还是给出内存不足错误。

我在运行 sonar maven 命令时使用以下选项解决了这个问题：- MAVEN_OPTS="-Xms256m -Xmx4096m -XX:+UseSerialGC"

这为我解决了这个问题。

帮助我的帖子：- [http://sonarqube-archive.15.x6.nabble.com/SonarQube-terminates-at-quot-Journal-Flusher-quot-warning-and-heap-size-error-td5027066.html](http://sonarqube-archive.15.x6.nabble.com/SonarQube-terminates-at-quot-Journal-Flusher-quot-warning-and-heap-size-error-td5027066.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-24T04:53:54.400

将 jenkins 服务器上的 JDK 版本更新到 64 位为我解决了这个问题。

`set SONAR_SCANNER_OPTS=-Xmx1024m`尝试在*sonar-scanner.bat*中设置参数， 或者`export SONAR_SCANNER_OPTS=-Xmx1024m`如果通过 shell 脚本调用。

# jquery - jquery header 在页面向下滚动时将保持静态

> ID：13876916
> 
> 赞同：0
> 
> 时间：2012-12-14T10:32:52.963
> 
> 标签：jquery

我一直在寻找一个示例来创建一个在页面向下滚动时将保持静态的标题。就像[这个例子](http://www.pixedelic.com/plugins/camera/)一样。

我查看了[这个](https://stackoverflow.com/questions/9684259/fixed-header-whilst-scrolling)、[这个](http://forum.jquery.com/topic/fixed-header-with-scroll-to-problem)和其他一些，但没有找到正常工作的示例。

提前致谢

```
<!DOCTYPE html> 
<html> 

<head>
    <style>
    #header { height: 100px; background:#EEEEEE; }
    #footer { height: 100px; background:#EEEEEE; }
    #content { height: 1000px; background:#CCCCCC; }
    </style>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
</head>
<body>

    <div id="container">
      <div id="header">Header</div>
      <div id="content">Content</div>
      <div id="footer">Footer</div>
    </div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:34:38.747

CSS`position:fixed`是您正在寻找的：

```
 #header { height: 100px; background:#EEEEEE;top:0;left:0;position:fixed } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:35:00.870

没有必要为此使用 jQuery。这可以通过[css`position`属性](http://www.w3schools.com/css/css_positioning.asp)轻松实现。

# logging - 如何在 Weblogic 服务器中使用 log4j

> ID：13876919
> 
> 赞同：3
> 
> 时间：2012-12-14T10:33:03.913
> 
> 标签：logging, log4j, weblogic-10.x

我在 Win7 上使用 Jdeveloper 11.1.1.6、WL 10.3。JDK 1.6.0.3x64 我尝试根据网上的指南和信息配置 1 天。但不幸的是，我无法让它工作。在我启动 wls 之后，遇到了这个：

```
<14-12-2012 10:42:00 o'clock EET> <Error> <Log Management> <BEA-170022> <Log4j failed to initialize for DefaultServer. The default JDK Logging implementation will be used.
java.lang.ClassNotFoundException: weblogic.logging.log4j.JDKLog4jAdapterFactory
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Truncated. see log file for complete stacktrace 
```

我基本上通过这些链接跟进[https://forums.oracle.com/forums/thread.jspa?threadID=1061248](https://forums.oracle.com/forums/thread.jspa?threadID=1061248)和[http://docs.oracle.com/cd/E15051_01/wls/docs103/logging/config_logs.html #using_log4j](http://docs.oracle.com/cd/E15051_01/wls/docs103/logging/config_logs.html#using_log4j)

我从 JDK 将 Logging 实现更改为 Log4j：[http ://www.2hotfile.com/image.php?di=72YU](http://www.2hotfile.com/image.php?di=72YU)

我在 %DOMAINHOME%\config 下创建了 log4j.xml 文件：[http ://www.2hotfile.com/image.php?di=JHLI](http://www.2hotfile.com/image.php?di=JHLI)

```
<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"> 
<log4j:configuration> 
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
<param name="Threshold" value="INFO"/>
<layout class="org.apache.log4j.PatternLayout">
<param name="ConversionPattern"
value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
</layout>
</appender> 
<appender name="FILE" class="org.apache.log4j.DailyRollingFileAppender">
<param name="File" value="/log/daily.log"/> 
<param name="Append" value="false"/>
<!-- Rollover at midnight each day -->
<param name="DatePattern" value="'.'yyyy-MM-dd"/>
<layout class="org.apache.log4j.PatternLayout">
<param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
</layout>
</appender>
<logger name="org.apache">
<level value="WARN"/>
</logger>
<root>
<level value="DEBUG"/>
<appender-ref ref="FILE"/>
<!-- <appender-ref ref="CONSOLE"/> -->
</root>
</log4j:configuration> 
```

我将 log4j.jar、wllog.jar 复制到我的 %DOMAINHOME%\lib 中：[http](http://www.2hotfile.com/image.php?di=BYB3) : //www.2hotfile.com/image.php?di=BYB3 即使我复制了 commons-logging-1.0.4.jar 和 com.bea .core.weblogic.commons.logging_1.4.0.0.jar 文件到 lib 文件夹中，然后我相应地设置 CLASSPATH，结果是否定的。

我将这些行添加到 startWeblogic.cmd

```
@REM customized here for log4j
set LOG4J_CONFIG_FILE=%DOMAIN_HOME%\config\log4j.xml
set SAVE_JAVA_OPTIONS=%JAVA_OPTIONS% -Dweblogic.log.Log4jLoggingEnabled=true -Dlog4j.debug -Dlog4j.configuration=%LOG4J_CONFIG_FILE%

set SAVE_CLASSPATH=%CLASSPATH%;%DOMAIN_HOME%\config; 
```

此外，由于怀疑类加载问题，我尝试将 log4j.jar 添加到 sysyem 类路径中：[http](http://www.2hotfile.com/image.php?di=7Y3N) ://www.2hotfile.com/image.php?di=7Y3N查看此链接[http://www.coderanch.com/t/ 479763/BEA-Weblogic/Log-Weblogic-ClassNotFoundException](http://www.coderanch.com/t/479763/BEA-Weblogic/Log-Weblogic-ClassNotFoundException) 问题的原因可能是什么，请帮帮我

18.12.2012

我解决了异常；Jdeveloper 11.1.1.4 也安装在我的电脑上。这就是问题的原因。系统正在查找属于 11.1.14 版本的 11.1.1.4 服务器文件夹上的一些路径。现在，创建了我在 log4j.xml 中定义的服务器日志，但在文件中*找不到日志行*，根据 log4j.xml 配置文件没有记录任何内容，并且 wls 仍然将自己的日志写入其自己的日志文件，该文件位于 $domain_home$\servers\ DefaultServer\logs\DefaultServer.log。可能是什么原因？

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"
                     debug="true">
 <!-- A time/date based rolling appender -->
 <appender name="FILE" class="org.apache.log4j.DailyRollingFileAppender">
  <param name="File" value="./server.log"/>
  <param name="Append" value="false"/>
  <!-- Rollover at midnight each day -->
  <param name="DatePattern" value="'.'yyyy-MM-dd"/>
  <!-- Rollover at the top of each hour
      <param name="DatePattern" value="'.'yyyy-MM-dd-HH"/>
      -->
  <layout class="org.apache.log4j.PatternLayout">
   <!-- The default pattern: Date Priority [Category] Message\n -->
   <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
   <!-- The full pattern: Date MS Priority [Category] (Thread:NDC) Message\n
         <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
          -->
  </layout>
 </appender>
 <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
  <param name="Target" value="System.out"/>
  <param name="Threshold" value="INFO"/>
  <layout class="org.apache.log4j.PatternLayout">
   <!-- The default pattern: Date Priority [Category] Message\n -->
   <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
  </layout>
 </appender>
 <category name="org.apache">
  <priority value="DEBUG"/>
 </category>
 <category name="com.weblogic">
  <priority value="DEBUG"/>
 </category>
 <category name="com.roketsan">
  <priority value="DEBUG"/>
 </category>
 <category name="org.hibernate">
  <priority value="DEBUG"/>
 </category>
 <category name="log4j.category.org.hibernate">
  <priority value="DEBUG"/>
 </category>
 <category name="log4j.category.org.hibernate.SQL">
  <priority value="STDOUT"/>
 </category>
 <root>
  <appender-ref ref="CONSOLE"/>
  <appender-ref ref="FILE"/>
 </root>
</log4j:configuration> 
```

*jdeveloper集成weblogic控制台输出：* [http ://www.2hotfile.com/image.php?di=TPY2](http://www.2hotfile.com/image.php?di=TPY2)

```
*** Using port 7101 ***
C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\bin\startWebLogic.cmd
[waiting for the server to complete its initialization...]
this is suuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuun
'LOG4J_CONFIG_FILE' i‡ ya da dis komut, ‡alistirilabilir
program ya da toplu is dosyasi olarak taninmiyor.
.
.
JAVA Memory arguments: -Xms256m -Xmx1024m -XX:CompileThreshold=8000 -XX:PermSize=128m -XX:MaxPermSize=512m
.
WLS Start Mode=Development
.
CLASSPATH=C:\Oracle\MIDDLE~1.6\ORACLE~1\modules\oracle.jdbc_11.1.1\ojdbc6dms.jar;C:\Oracle\MIDDLE~1.6\patch_wls1035\profiles\default\sys_manifest_classpath\weblogic_patch.jar;C:\Oracle\MIDDLE~1.6\patch_jdev1111\profiles\default\sys_manifest_classpath\weblogic_patch.jar;C:\PROGRA~1\Java\JDK16~1.0_3\lib\tools.jar;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\lib\weblogic_sp.jar;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\lib\weblogic.jar;C:\Oracle\MIDDLE~1.6\modules\features\weblogic.server.modules_10.3.5.0.jar;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\lib\webservices.jar;C:\Oracle\MIDDLE~1.6\modules\ORGAPA~1.1/lib/ant-all.jar;C:\Oracle\MIDDLE~1.6\modules\NETSFA~1.0_1/lib/ant-contrib.jar;C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\wcps-lib\derby-10.6.1.0.jar;C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\wcps-lib\derbytools-10.6.1.0.jar;C:\Oracle\Middleware_11.1.1.6\jdeveloper\webcenter\modules\oracle.portlet.server_11.1.1\oracle-portlet-api.jar;C:\Oracle\Middleware_11.1.1.6\jdeveloper\webcenter\modules\wcps_11.1.1.6.0\wcps-connection-mbeans.jar;C:\Oracle\MIDDLE~1.6\ORACLE~1\modules\oracle.jrf_11.1.1\jrf.jar;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\common\derby\lib\derbyclient.jar;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\lib\xqrl.jar;.
.
PATH=C:\Oracle\MIDDLE~1.6\patch_wls1035\profiles\default\native;C:\Oracle\MIDDLE~1.6\patch_jdev1111\profiles\default\native;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\native\win\32;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\bin;C:\Oracle\MIDDLE~1.6\modules\ORGAPA~1.1\bin;C:\PROGRA~1\Java\JDK16~1.0_3\jre\bin;C:\PROGRA~1\Java\JDK16~1.0_3\bin;C:\Program Files\Java\jre6X64;C:\Program Files\Java\jre6X64\bin;C:\Oracle\database\app\oracle\product\11.2.0\server\bin;C:\Oracle\database\app\oracle\product\11.2.0\server;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Dell\Dell Wireless WLAN Card;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\OpenVPN\bin;C:\Users\Dijitaluser\Desktop\Yeni klas”r\commons-logging-1.0.4.jar;;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\native\win\32\oci920_8
.
***************************************************
*  To start WebLogic Server, use a username and   *
*  password assigned to an admin-level user.  For *
*  server administration, use the WebLogic Server *
*  console at http:\\hostname:port\console        *
***************************************************
starting weblogic with Java version:
java version "1.6.0_30"
Java(TM) SE Runtime Environment (build 1.6.0_30-b12)
Java HotSpot(TM) 64-Bit Server VM (build 20.5-b03, mixed mode)
Starting WLS with line:
C:\PROGRA~1\Java\JDK16~1.0_3\bin\java -client   -Xms256m -Xmx1024m -XX:CompileThreshold=8000 -XX:PermSize=128m -XX:MaxPermSize=512m -Dweblogic.Name=DefaultServer -Djava.security.policy=C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\lib\weblogic.policy -agentlib:jdwp=transport=dt_socket,server=y,address=52130 -Djavax.net.ssl.trustStore=C:\Oracle\Middleware_11.1.1.6\wlserver_10.3\server\lib\DemoTrust.jks -Dweblogic.nodemanager.ServiceEnabled=true  -Xverify:none  -da -Dplatform.home=C:\Oracle\MIDDLE~1.6\WLSERV~1.3 -Dwls.home=C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server -Dweblogic.home=C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server  -Djps.app.credential.overwrite.allowed=true -Dcommon.components.home=C:\Oracle\MIDDLE~1.6\ORACLE~1 -Djrf.version=11.1.1 -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.Jdk14Logger -Ddomain.home=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1 -Djrockit.optfile=C:\Oracle\MIDDLE~1.6\ORACLE~1\modules\oracle.jrf_11.1.1\jrocket_optfile.txt -Doracle.server.config.dir=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\config\FMWCON~1\servers\DefaultServer -Doracle.domain.config.dir=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\config\FMWCON~1  -Digf.arisidbeans.carmlloc=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\config\FMWCON~1\carml  -Digf.arisidstack.home=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\config\FMWCON~1\arisidprovider -Doracle.security.jps.config=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\config\fmwconfig\jps-config.xml -Doracle.deployed.app.dir=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\servers\DefaultServer\tmp\_WL_user -Doracle.deployed.app.ext=\- -Dweblogic.alternateTypesDirectory=C:\Oracle\MIDDLE~1.6\ORACLE~1\modules\oracle.ossoiap_11.1.1,C:\Oracle\MIDDLE~1.6\ORACLE~1\modules\oracle.oamprovider_11.1.1 -Djava.protocol.handler.pkgs=oracle.mds.net.protocol  -Dweblogic.jdbc.remoteEnabled=false -Dwsm.repository.path=C:\Users\DIJITA~1\AppData\Roaming\JDEVEL~1\SYSTEM~1.92\DEFAUL~1\oracle\store\gmds  -DUSE_JAAS=false -Djps.policystore.hybrid.mode=false -Djps.combiner.optimize.lazyeval=true -Djps.combiner.optimize=true -Djps.auth=ACC -Doracle.core.ojdl.logging.usercontextprovider=oracle.core.ojdl.logging.impl.UserContextImpl -noverify -Doracle.webcenter.analytics.disable-native-partitioning=false -Doracle.webcenter.tagging.scopeTags=false -XX:+UseParallelGC -XX:+DisableExplicitGC -Dportlet.oracle.home=C:\Oracle\Middleware_11.1.1.6\jdeveloper -Dwc.oracle.home=C:\Oracle\Middleware_11.1.1.6\jdeveloper  -Dweblogic.management.discover=true  -Dwlw.iterativeDev= -Dwlw.testConsole= -Dwlw.logErrorsToConsole= -Dweblogic.ext.dirs=C:\Oracle\MIDDLE~1.6\patch_wls1035\profiles\default\sysext_manifest_classpath;C:\Oracle\MIDDLE~1.6\patch_jdev1111\profiles\default\sysext_manifest_classpath -Dlog4j.ignoreTCL=true -Dweblogic.log.Log4jLoggingEnabled=true -Dlog4j.debug   weblogic.Server
Listening for transport dt_socket at address: 52130
Debugger connected to local process.
<18-Dec-2012 13:58:09 o'clock EET> <Info> <Security> <BEA-090905> <Disabling CryptoJ JCE Provider self-integrity check for better startup performance. To enable this check, specify -Dweblogic.security.allowCryptoJDefaultJCEVerification=true> 
<18-Dec-2012 13:58:10 o'clock EET> <Info> <Security> <BEA-090906> <Changing the default Random Number Generator in RSA CryptoJ from ECDRBG to FIPS186PRNG. To disable this change, specify -Dweblogic.security.allowCryptoJDefaultPRNG=true> 
<18-Dec-2012 13:58:10 o'clock EET> <Notice> <WebLogicServer> <BEA-000395> <Following extensions directory contents added to the end of the classpath:
C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\com.bea.core.weblogic.commons.logging_1.4.0.0.jar;C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\commons-logging-1.0.4.jar;C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\log4j-1.2.15.jar;C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\mbeantypes\csp-id-asserter.jar;C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\mbeantypes\jps-wls-trustprovider.jar;C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\lib\wllog4j.jar> 
<18-Dec-2012 13:58:10 o'clock EET> <Info> <WebLogicServer> <BEA-000377> <Starting WebLogic Server with Java HotSpot(TM) 64-Bit Server VM Version 20.5-b03 from Sun Microsystems Inc.> 
<18-Dec-2012 13:58:11 o'clock EET> <Info> <Management> <BEA-141107> <Version: WebLogic Server 10.3.5.0  Fri Apr 1 20:20:06 PDT 2011 1398638 > 
<18-Dec-2012 13:58:12 o'clock EET> <Notice> <WebLogicServer> <BEA-000365> <Server state changed to STARTING> 
<18-Dec-2012 13:58:12 o'clock EET> <Info> <WorkManager> <BEA-002900> <Initializing self-tuning thread pool> 
<18-Dec-2012 13:58:12 o'clock EET> <Notice> <LoggingService> <BEA-320400> <The log file C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultServer.log will be rotated. Reopen the log file if tailing has stopped. This can happen on some platforms like Windows.> 
<18-Dec-2012 13:58:12 o'clock EET> <Notice> <LoggingService> <BEA-320401> <The log file has been rotated to C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultServer.log00016\. Log messages will continue to be logged in C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultServer.log.> 
<18-12-2012 13:58:12 o'clock EET> <Notice> <Log Management> <WL-170019> <The server log file C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultServer.log is opened. All server side log events will be written to this file.> 
log4j: Trying to find [log4j.xml] using context classloader java.net.URLClassLoader@7df44ec7.
log4j: Using URL [file:/C:/Users/Dijitaluser/AppData/Roaming/JDeveloper/system11.1.1.6.38.61.92/DefaultDomain/log4j.xml] for automatic log4j configuration.
log4j: Preferred configurator class: org.apache.log4j.xml.DOMConfigurator
log4j: System property is :null
log4j: Standard DocumentBuilderFactory search succeded.
log4j: DocumentBuilderFactory is: weblogic.xml.jaxp.RegistryDocumentBuilderFactory
log4j: debug attribute= "true".
log4j: reset attribute= "false".
log4j: Threshold ="null".
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [org.apache] additivity to [true].
log4j: Level value for org.apache is  [DEBUG].
log4j: org.apache level set to DEBUG
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [com.weblogic] additivity to [true].
log4j: Level value for com.weblogic is  [DEBUG].
log4j: com.weblogic level set to DEBUG
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [com.roketsan] additivity to [true].
log4j: Level value for com.roketsan is  [DEBUG].
log4j: com.roketsan level set to DEBUG
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [org.hibernate] additivity to [true].
log4j: Level value for org.hibernate is  [DEBUG].
log4j: org.hibernate level set to DEBUG
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [log4j.category.org.hibernate] additivity to [true].
log4j: Level value for log4j.category.org.hibernate is  [DEBUG].
log4j: log4j.category.org.hibernate level set to DEBUG
log4j: Retreiving an instance of org.apache.log4j.Logger.
log4j: Setting [log4j.category.org.hibernate.SQL] additivity to [true].
log4j: Level value for log4j.category.org.hibernate.SQL is  [STDOUT].
log4j: log4j.category.org.hibernate.SQL level set to DEBUG
log4j: Class name: [org.apache.log4j.ConsoleAppender]
log4j: Setting property [target] to [System.out].
log4j: Setting property [threshold] to [INFO].
log4j: Parsing layout of class: "org.apache.log4j.PatternLayout"
log4j: Setting property [conversionPattern] to [%d{ABSOLUTE} %-5p [%c{1}] %m%n].
log4j: Adding appender named [CONSOLE] to category [root].
log4j: Class name: [org.apache.log4j.DailyRollingFileAppender]
log4j: Setting property [file] to [./server.log].
log4j: Setting property [append] to [false].
log4j: Setting property [datePattern] to ['.'yyyy-MM-dd].
log4j: Parsing layout of class: "org.apache.log4j.PatternLayout"
log4j: Setting property [conversionPattern] to [%d %-5p [%c] %m%n].
log4j: setFile called: ./server.log, false
log4j: setFile ended
log4j: Appender [FILE] to be rolled at midnight.
log4j: Adding appender named [FILE] to category [root].
<18-12-2012 13:58:12 o'clock EET> <Warning> <NodeManager> <WL-300043> <Node manager native library not found - server process id not saved.> 
<18-12-2012 13:58:13 o'clock EET> <Error> <Socket> <WL-000438> <Unable to load performance pack. Using Java I/O instead. Please ensure that wlntio.dll is in: 'C:\PROGRA~1\Java\JDK16~1.0_3\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Oracle\MIDDLE~1.6\patch_wls1035\profiles\default\native;C:\Oracle\MIDDLE~1.6\patch_jdev1111\profiles\default\native;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\native\win\32;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\bin;C:\Oracle\MIDDLE~1.6\modules\ORGAPA~1.1\bin;C:\PROGRA~1\Java\JDK16~1.0_3\jre\bin;C:\PROGRA~1\Java\JDK16~1.0_3\bin;C:\Program Files\Java\jre6X64;C:\Program Files\Java\jre6X64\bin;C:\Oracle\database\app\oracle\product\11.2.0\server\bin;C:\Oracle\database\app\oracle\product\11.2.0\server;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Dell\Dell Wireless WLAN Card;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\OpenVPN\bin;C:\Users\Dijitaluser\Desktop\Yeni klasör\commons-logging-1.0.4.jar;;C:\Oracle\MIDDLE~1.6\WLSERV~1.3\server\native\win\32\oci920_8;.'
> 
<18-12-2012 13:58:19 o'clock EET> <Notice> <Security> <BEA-090082> <Security initializing using security realm myrealm.> 
<18-12-2012 13:58:20 o'clock EET> <Warning> <Store> <WL-280101> <The persistent file store "_WLS_DefaultServer" is forced to use buffered I/O and so may have significantly degraded performance. Either the OS/hardware environment does not support the chosen write policy or the native wlfileio library is missing. See store open log messages for the requested and final write policies. See the documentation on store synchronous write policy configuration for advice.> 
<18-Dec-2012 13:58:20 o'clock EET> <Notice> <LoggingService> <BEA-320400> <The log file C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\access.log will be rotated. Reopen the log file if tailing has stopped. This can happen on some platforms like Windows.> 
<18-Dec-2012 13:58:20 o'clock EET> <Notice> <LoggingService> <BEA-320401> <The log file has been rotated to C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\access.log00001\. Log messages will continue to be logged in C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\access.log.> 
<18-12-2012 13:58:23 o'clock EET> <Notice> <StdErr> <BEA-000000> <java.util.logging.ErrorManager: 0: oracle.core.ojdl.weblogic.DomainLogHandler ERROR: unable to find instance of weblogic.logging.DomainLogBroadcastHandler> 
<18-12-2012 13:58:25 o'clock EET> <Notice> <WebLogicServer> <WL-000365> <Server state changed to STANDBY> 
<18-12-2012 13:58:25 o'clock EET> <Notice> <WebLogicServer> <WL-000365> <Server state changed to STARTING> 
<18-12-2012 13:58:29 o'clock EET> <Warning> <J2EE> <WL-160195> <The application version lifecycle event listener oracle.security.jps.wls.listeners.JpsAppVersionLifecycleListener is ignored because the application Roketsan is not versioned.> 
<18-Dec-2012 13:58:37 o'clock EET> <Notice> <LoggingService> <BEA-320400> <The log file C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultDomain.log will be rotated. Reopen the log file if tailing has stopped. This can happen on some platforms like Windows.> 
<18-Dec-2012 13:58:37 o'clock EET> <Notice> <LoggingService> <BEA-320401> <The log file has been rotated to C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultDomain.log00016\. Log messages will continue to be logged in C:\Users\Dijitaluser\AppData\Roaming\JDeveloper\system11.1.1.6.38.61.92\DefaultDomain\servers\DefaultServer\logs\DefaultDomain.log.> 
<18-12-2012 13:58:37 o'clock EET> <Notice> <Log Management> <WL-170027> <The Server has established connection with the Domain level Diagnostic Service successfully.> 
<18-12-2012 13:58:37 o'clock EET> <Notice> <WebLogicServer> <WL-000365> <Server state changed to ADMIN> 
<18-12-2012 13:58:37 o'clock EET> <Notice> <WebLogicServer> <WL-000365> <Server state changed to RESUMING> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[11]" is now listening on 0:0:0:0:0:0:0:1:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Warning> <Server> <WL-002611> <Hostname "AD190", maps to multiple IP addresses: 169.254.50.94, 192.168.26.212, fe80:0:0:0:a1be:61f:f156:325e%38> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[3]" is now listening on fe80:0:0:0:a1be:61f:f156:325e:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[10]" is now listening on 127.0.0.1:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[1]" is now listening on fe80:0:0:0:0:5efe:a9fe:325e:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[7]" is now listening on fe80:0:0:0:a0d0:352d:6b23:d7dc:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[8]" is now listening on fe80:0:0:0:648c:26dc:32a5:1300:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[4]" is now listening on fe80:0:0:0:0:5efe:c0a8:1ad4:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[5]" is now listening on fe80:0:0:0:34a0:7762:7e2f:fca8:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[9]" is now listening on fe80:0:0:0:0:100:7f:fffe:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default" is now listening on 192.168.26.212:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[2]" is now listening on 169.254.50.94:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <Server> <WL-002613> <Channel "Default[6]" is now listening on fe80:0:0:0:fdaf:7651:30df:acb6:7101 for protocols iiop, t3, ldap, snmp, http.> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <WebLogicServer> <WL-000331> <Started WebLogic Admin Server "DefaultServer" for domain "DefaultDomain" running in Development Mode> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <WebLogicServer> <WL-000365> <Server state changed to RUNNING> 
<18-12-2012 13:58:38 o'clock EET> <Notice> <WebLogicServer> <WL-000360> <Server started in RUNNING mode> 
IntegratedWebLogicServer startup time: 30110 ms.
IntegratedWebLogicServer started. 
```

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-17T11:39:31.823

您想记录 weblogic 本身的输出还是仅来自您的应用程序的输出？如果您只想从应用程序中登录，则无需将 Log4j 放入域中。只需将*log4j.jar*放在应用程序的 lib 文件夹中（'WEB-INF/lib' 或 'APP-INF/lib'），然后将'log4j.properties' 放在应用程序类路径中（'WEB-INF/classes' 或 ' APP-INF/类'）。

# c++ - 如何使用 C++ 剪切或删除字符串中的某些字符

> ID：13876921
> 
> 赞同：1
> 
> 时间：2012-12-14T10:33:08.700
> 
> 标签：c++, string

我有以下代码：

```
#include <iostream>
using namespace std;
#include <string.h>

int main(){

 string track2;
 string Track2;
 string end_character("?");
 Track2={";80221000000100018A1301000000000000000?"};
 track2=Track2;

 cout<<"Track2={"<<Track2<<"}\n";

  if((track2.length()>=24 )  && (track2.find_first_not_of('0', 24) ==string::npos)){
     track2.erase (track2.begin()+24, track2.end());
  cout<<"\nTrack2={"<<track2<<"}\n";
  Track2=track2 + end_character;

  cout<<"\nTrack2={"<<Track2<<"}\n";
}
  else
     cout<<"Track2 has not more than 24 characters.\n";
} 
```

我想首先检查字符串**track2**的长度，如果它大于或等于 24 个字符，那么如果第 24 个字符之后的其余字符 =0 并且最后一个字符 = **？**. 然后我将在第 24 个字符的开头剪切字符串**track2**直到**track2**的结尾。之后，我将插入**?** 字符串 track2 末尾的字符并打印出来。这是预期的输出：

```
Track2={;80221000000100018A1301000000000000000?}

Track2={;80221000000100018A13010}

Track2={;80221000000100018A13010?} 
```

但是我有一个问题，当我输入字符时，我无法进入我的 if 循环**？**在我的字符串中。我的程序直接执行**else**循环。

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:41:10.410

像这样的东西怎么样：

```
if (Track2.length() > 24)
{
    auto question_mark_pos = Track2.find_first_not_of('0', 24);

    // If there is a character after the zeros AND
    // if that character is last AND
    // if that character is a question mark
    if (question_mark_pos != std::string::npos &&
        question_mark_pos == Track2.length() - 1 &&
        Track2[question_mark_pos] == '?')
    {
        // Get the first 24 characters of the string
        Track2 = Track2.substr(0, 24);

        // And append the special end character
        Track2 += end_character;
    }
} 
```

经过测试，似乎可以工作，[here](http://ideone.com/2SHFrE)。

# image - Joomla 2.5 在博客视图上显示子类别图像

> ID：13876922
> 
> 赞同：3
> 
> 时间：2012-12-14T10:33:14.097
> 
> 标签：image, joomla2.5, categories

我无法在我的 blogview 上显示子类别的图像。

我得到的最远的是用这条线显示父类别的图像：

```
$this->category->getParams()->get('image'); 
```

这一行虽然显示了子类别的标题

```
$this->escape($this->item->category_title); 
```

因此，我尝试添加`item`该顶行，但没有成功。我对 Joomla 和 php 的了解不足以弄清楚如何更改它以显示子类别图像。

任何帮助将非常感激。

**编辑：** 详细地说，我使用的博客视图是“趋势”类别中所有文章的视图。然而，趋势类别不包括任何文章，但它的所有子类别都包括。

所以结构如下：

*   -趋势
*   --趋势1
*   - -第1条
*   ----第2条
*   ---趋势2
*   - -第1条
*   ---第二条

通过这个博客，我想展示与文章相关的子类别的图像。在 Joomla 参数中，我设置了显示类别图像的选项，但是这只显示父类别图像而不是子类别图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:47:18.517

**解决方案1：**

无需为此更改代码。

当您看到“$this->category-> **getParams()** ->get('image');”时 在代码中，表示模板正在读取参数是否显示图像。

您可以更改管理员界面右上角的`com_content`with按钮的全局参数，也可以在mode 中更改特定类别的参数。`Option``Edit Category`

我可以在`Category Image`那里看到一个参数！

**解决方案2：**

用于`print_r`查看 的所有属性`item`，例如：`print_r($this->item)`，然后您将查看 是否`item`有类似的东西`category_image`。如果它包含图像，请使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T09:18:19.003

我是通过 catid 创建一个新的 JCategories 实例来实现的。然后我通过 getParams() 从中获取了一张图片。

```
$options    = array();
$categories = JCategories::getInstance('Content', $options);
$category   = $categories->get($this->item->catid);

<img src="<?php echo $category->getParams()->get('image'); ?>"/> 
```

# java - 是否有一种解决方法可以使 DateAxis 从范围内的第一个日期开始绘制刻度

> ID：13876924
> 
> 赞同：0
> 
> 时间：2012-12-14T10:33:15.520
> 
> 标签：java, jfreechart

[我认为我的问题与以前的帖子](https://stackoverflow.com/questions/11010228/is-there-a-workaround-to-make-dateaxis-draw-tick-from-the-first-day-of-the-week)非常相似。在 JFreeChart 中，我使用 DateAxis 的 setRange 方法在时间序列图中设置轴的边界。

```
DateAxis dateAxis = (DateAxis)plot.getDomainAxis();
plot.setDomainAxis(dateAxis);
dateAxis.setRange(firstDate, lastDate); 
```

但是，当我使用它并尝试减少显示的刻度单位数时

```
DateFormat dateFormat = new SimpleDateFormat("MMM-yyyy");
TickUnits tickUnits = new TickUnits();
tickUnits.add(new DateTickUnit(DateTickUnitType.YEAR, 1, dateFormat));
dateAxis.setStandardTickUnits(tickUnits); 
```

显示的第一个刻度单位是从 firstDate 开始的下一个 Jan 1。我见过类似的方法，`dateAxis.setTickMarkPosition(DateTickMarkPosition.START);`但它们并没有达到我的期望。我希望第一个刻度单位是我指定的 firstDate。

为了更清楚起见，我的问题与另一个站点上的此[帖子](http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=116019)相同，但没有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:46:20.563

我做了一些小技巧来让事情正常进行。而不是使用`firstDate`和`lastDate`设置`dateAxis`我使用`firstDate`减一天`lastDate`和加一天。

# magento - 如何为购物车块实现magento缓存打孔

> ID：13876929
> 
> 赞同：2
> 
> 时间：2012-12-14T10:33:31.710
> 
> 标签：magento, caching

我使用启用了全页缓存的 Magento EE 1.12 版

a）我的产品详细信息页面被缓存 b）因此我在此页面中的购物车不显示动态项目计数 c）所以我无法在我的产品详细信息页面中显示有效的购物车项目计数

我遵循的步骤

1）我创建了一个块并从 header.phtml 调用 2）试图使该 topcart.phtml 块不被缓存

作为magento的新手，我得到了一些缓存打孔的链接

我按照以下链接但没有成功

我的文件结构

app-代码-本地-企业-PageCache->等-cache.xml

和 PageCache - 模型 - 容器 - TopCart.php

代码如下图

[帮助链接一](https://stackoverflow.com/questions/12948235/hole-punching-mage-catalog-block-product-price-in-magento-ee-fpc)

[帮助链接二](https://stackoverflow.com/questions/9147120/unable-to-prevent-magento-from-caching-a-block)

[链接三](https://stackoverflow.com/questions/8126548/trying-get-dynamic-content-hole-punched-through-magentos-full-page-cache)

我创建了文件 cache.xml 和 cart.php 容器文件

```
 <page_html_topcart>
        <block>page/html_topcart</block>
        <name>topcart</name>
        <placeholder>PAGE_HTML_HEADER_CART</placeholder>
        <container>Enterprise_PageCache_Model_Container_TopCart</container>
        <cache_lifetime>36400</cache_lifetime>
    </page_html_topcart> 
```

这是我的 topcart.php 容器文件看起来像

```
 protected function _getIdentifier()
{
    $cacheId = $this->_getCookieValue(Enterprise_PageCache_Model_Cookie::COOKIE_CUSTOMER, '')
        . '_'
        . $this->_getCookieValue(Enterprise_PageCache_Model_Cookie::COOKIE_CUSTOMER_LOGGED_IN, '');

    return $cacheId;
}

 protected function _getCacheId()
{
    return 'CONTAINER_TOPCART_' . md5($this->_placeholder->getAttribute('cache_id') . $this->_getIdentifier());
}

protected function _renderBlock()
{
    $block = $this->_getPlaceHolderBlock(); //('page/html_header_cart');
    Mage::dispatchEvent('render_block', array('block' => $block, 'placeholder' => $this->_placeholder));
    return $block->toHtml();
} 
```

请通过有用的链接和步骤帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:25:32.140

我遇到了同样的问题。所以，我认为，问题在于，在这种情况下我们没有可缓存的模板。因此，如果您按照您的方式缓存它（我也是如此），您最终会在缓存文件中得到一个 base64 编码的链接列表。为了验证这一点，我解压缩了 var/full_page_cache 中的文件 - 我们开始了：购物车计数被缓存，即使您的购物车更改也不会更改，并且它在服务器端不可替换（至少在干净的方式）。

这种行为的原因很简单：对于 FPC，您只渲染模板，传递一些值。但是模板只在这种特殊情况下呈现一个列表，只访问一个块方法（getLinks）。在您的布局 xml 文件中，您会发现一些“addLink”调用，它提供该块，这就是为什么所有结果都变成 base64 编码并最终出现在您的缓存文件中的原因。您的容器无法访问它们。

但我认为，有办法解决这个问题。只需收集您想要呈现的链接并为此创建自定义模板和自定义块。您现在可以以适当的方式缓存它。

# iphone - 我的应用程序的图标

> ID：13876934
> 
> 赞同：0
> 
> 时间：2012-12-14T10:34:05.143
> 
> 标签：iphone, xcode, project-settings

我在苹果开发人员文档中看到我需要在主包中放置图标，然后设置 CFBundleIcons 使其具有文件名。

但我正在查看我的 info.plist，但我在任何地方都看不到任何 CFBundleIcons……我如何让它出现？我尝试创建一个新行并编写它，但它没有帮助。

谢谢…

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:01:03.750

在 info.plist 中应该有一个键，例如：**Icon file**检查下面的屏幕截图：

![图标](../Images/38ae2b0dd04f3ca745913f8d7e8cd4d8.png)

如果没有这样的键，请添加一个键并为自己赋值。

当您需要为视网膜显示添加不同的图标文件时，请添加 info.plist 的键，例如：

![不同的图标](../Images/ae8ff35b81885cc35afa25deb9aadbbb.png)

# javascript - Text centered over video in html5

> ID：13876937
> 
> 赞同：1
> 
> 时间：2012-12-14T10:34:11.460
> 
> 标签：javascript, jquery, css, html, html5-video

I have my container `div` that contain a video and a `div` with some text.

I would like that the text is above the video and in the central position, also when I resize browser window.

I realize this [demo](http://jsfiddle.net/TjjEP/18/), but I think is only a starting point.. how can I improve my code?

Here is the code.

```
/**CSS**/

video {
  position:relative;
  z-index:-1;
}

#custom-message {
  position:relative;
  color: rgb(230, 200, 98);
  z-index:1;
  top: -200px;       
}
```

```
<!--**HTML**-->

<div id="container" align="center">
  <video width="640" height="320" autoplay>
    <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4"/>
  </video>
  <div id="custom-message">CENTERED TEXT ABOVE</div>
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:40:09.723

Okay, `z-index: -1` will screw things up in Firefox. Use this:

```
<div id="video-container">
// all the video stuff goes in here.
<a id="your-text"></a>
</div>

#video-container {
   text-align: center;
   height: 400px;//or whatever you want
   line-height:400px;//should be equal to the height
   position: ..
   z-index: 1;
}

#custom-message {
    position: relative;
    display: inline-block;
    height:..;
    width:..;
    z-index: 10;
} 
```

Best way to do this is with JavaScript though. You need to use `z-index` no matter what, so position the video container relatively, the custom message absolute, but inside of the video container, and then simply use JavaScript to compute the `left` and `top` of the custom message. The bellow is the raw JavaScript(no library) way of doing things.

```
window.onload = funciton() {
    var video = document.getElementById('video-container');
    var customMessage = document.getElementById('custom-message');
    var customMessageTop = video.offsetHeight / 2 - customMessage.offsetHeight / 2;
    var customMessageLeft = video.offsetWidth / 2 - customMessage.offsetWidth  / 2;
    customMessage.style.left = customMessageLeft + 'px';
    customMessage.style.top = customMessageTop + 'px';
}; 
```

or if you are already using jQuery for your stuff.

```
$(function() {
    $('#customMessage').css({
        top: $('#video').height() / 2 - $('#customMessage').height() / 2,
        left: $('#video').width() / 2 - $('#customMessage').width() / 2
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:45:14.663

See snippet here: [DEMO](http://jsfiddle.net/TjjEP/20/)

```
var $vid = $('video','#container');
var $msg = $('#custom-message'); 
$msg.css({
    top:$vid.offset().top + (($vid.height()/2) - ($msg.height()/2)),
    left:$vid.offset().left + (($vid.width()/2) - ($msg.width()/2))
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T10:42:30.130

css:

```
video {
    position:relative;
    z-index:-1;
}

#custom-message {
    position:relative;
    color: rgb(230, 200, 98);
    z-index:1;
    top: 0;
    text-align: center;    
}​ 
```

html:

```
<div id="container" align="center">
     <div id="custom-message">CENTERED TEXT ABOVE</div>

    <video width="640" height="320" autoplay>
      <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4"/>
    </video>
</div>​ 
```

# sql - 如何使数据访问用户？当两台服务器都在 MIRRORING 中关闭时

> ID：13876939
> 
> 赞同：-4
> 
> 时间：2012-12-14T10:34:16.343
> 
> 标签：sql, sql-server, sqlite, tsql, sql-server-2008-r2

使用“镜像概念”解决这三种情况的方法是什么

```
Server A=PRINCIPLE OR PRIMARY,
Server B=MIRROR,
Server C=WITNESS 
```

1）如果服务器 A 和服务器 B 完全宕机怎么办，

2）如果服务器 B 和服务器 C 完全宕机怎么办，

3）如果服务器 A 和服务器 C 完全宕机怎么办

如何使数据访问用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:01:15.173

我建议查看以下文章，该文章将解释有关数据库镜像概念的所有内容：

[数据库镜像概念 - MSDN](http://msdn.microsoft.com/en-us/library/bb934127%28v=sql.105%29.aspx)

# sql - 优化在两个单独的步骤中运行时快速的慢速 SQL 查询

> ID：13876942
> 
> 赞同：0
> 
> 时间：2012-12-14T10:34:20.040
> 
> 标签：sql, postgresql

我在优化以下 SQL 查询时遇到了麻烦（使用 postgresql 9.1）：

```
WITH regions AS (
    SELECT r1.region_id
      FROM region r1, 
           (SELECT * 
              FROM region 
             WHERE region_id = 1) r2
     WHERE (r1.region_country = r2.region_country
             OR r2.region_country = 0) 
       AND (r1.region_province = r2.region_province 
             OR r2.region_province = 0) 
       AND (r1.region_area = r2.region_area 
             OR r2.region_area = 0))

SELECT id 
  FROM users 
 WHERE user_region in (SELECT region_id 
                         FROM regions); 
```

解释产生以下输出

```
Nested Loop  (cost=85.02..42405.93 rows=13217 width=4) (actual time=0.447..970.132 rows=527444 loops=1)                                                                                                                          
  Buffers: shared hit=464136                                                                                                                                                                                                     
  CTE regions                                                                                                                                                                                                                    
    ->  Nested Loop  (cost=0.00..32.11 rows=5 width=4) (actual time=0.029..0.237 rows=135 loops=1)                                                                                                                               
          Join Filter: (((r1.region_country = region.region_country) OR (region.region_country = 0)) AND ((r1.region_province = region.region_province) OR (region.region_province = 0)) AND ((r1.region_area = region.region_area) OR (region.region_area = 0))) 
          Buffers: shared hit=7                                                                                                                                                                                                  
          ->  Index Scan using region_pkey on region  (cost=0.00..8.27 rows=1 width=6) (actual time=0.015..0.016 rows=1 loops=1)                                                                                                 
                Index Cond: (re_nr = 1)                                                                                                                                                                                          
                Buffers: shared hit=3                                                                                                                                                                                            
          ->  Seq Scan on region r1  (cost=0.00..9.67 rows=567 width=10) (actual time=0.007..0.072 rows=567 loops=1)                                                                                                             
                Buffers: shared hit=4                                                                                                                                                                                            
  ->  HashAggregate  (cost=0.11..0.16 rows=5 width=4) (actual time=0.326..0.449 rows=135 loops=1)                                                                                                                                
        Buffers: shared hit=7                                                                                                                                                                                                    
        ->  CTE Scan on regions  (cost=0.00..0.10 rows=5 width=4) (actual time=0.032..0.278 rows=135 loops=1)                                                                                                                    
              Buffers: shared hit=7                                                                                                                                                                                              
  ->  Bitmap Heap Scan on users  (cost=52.79..8441.69 rows=2643 width=8) (actual time=1.442..6.459 rows=3907 loops=135)                                                                                                   
        Recheck Cond: (user_region = regions.region_id)                                                                                                                                                                            
        Buffers: shared hit=464129                                                                                                                                                                                               
        ->  Bitmap Index Scan on user_region  (cost=0.00..52.13 rows=2643 width=0) (actual time=0.675..0.675 rows=3909 loops=135)                                                                                              
              Index Cond: (user_region = regions.region_id)                                                                                                                                                                        
              Buffers: shared hit=1847                                                                                                                                                                                           
Total runtime: 1003.867 ms 
```

如果我只是添加区域查询的输出，那么一切都和预期的一样快。

```
SELECT id
FROM users
WHERE user_region in (1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110) 
```

解释产生以下输出。

```
Bitmap Heap Scan on users  (cost=5643.57..135774.21 rows=322812 width=4) (actual time=138.339..365.676 rows=527444 loops=1)                                                                                                                                                                                                                                                                                                                                                                         
  Recheck Cond: (user_region = ANY ('{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110}'::integer[]))     
  Buffers: shared hit=72973 read=1302                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
  ->  Bitmap Index Scan on user_region  (cost=0.00..5562.86 rows=322812 width=0) (actual time=114.446..114.446 rows=527752 loops=1)                                                                                                                                                                                                                                                                                                                                                                      
        Index Cond: (user_region = ANY ('{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110}'::integer[])) 
        Buffers: shared hit=546 read=1301                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Total runtime: 397.975 ms 
```

自行计算区域查询也非常快。

```
Nested Loop  (cost=0.00..32.11 rows=5 width=4) (actual time=0.059..12.323 rows=135 loops=1)                                                                                                                              
  Join Filter: (((r1.region_country = region.region_country) OR (region.region_country = 0)) AND ((r1.region_province = region.region_province) OR (region.region_province = 0)) AND ((r1.region_area = region.region_area) OR (region.region_area = 0))) 
  Buffers: shared hit=1 read=6                                                                                                                                                                                           
  ->  Index Scan using region_pkey on region  (cost=0.00..8.27 rows=1 width=6) (actual time=0.044..0.046 rows=1 loops=1)                                                                                                 
        Index Cond: (re_nr = 1)                                                                                                                                                                                          
        Buffers: shared read=3                                                                                                                                                                                           
  ->  Seq Scan on region r1  (cost=0.00..9.67 rows=567 width=10) (actual time=0.005..12.122 rows=567 loops=1)                                                                                                            
        Buffers: shared hit=1 read=3                                                                                                                                                                                     
Total runtime: 12.379 ms 
```

如果我将更多列添加到`select from users`.

有没有办法在一个快速查询中计算所有内容？

任何帮助或解决方案的指针都非常感谢。

**[编辑]**根据评论中的要求添加区域表示例用户可以选择一个区域（user_region），可以是国家、省或城市/城市的一部分。区域查询尝试查找该国家、省或城市中的所有 region_id。如果用户选择奥地利 (region_id = 1)，则应返回来自奥地利的所有其他 region_id。如果用户选择“下奥地利”（region_id = 26），则应返回下奥地利省的所有地区（在样本数据 27、28、29、30 中）。

```
select * from region limit 30;
 region_country | region_province | region_area |     region_name     | region_id 
----------------+-----------------+-------------+---------------------+-----------
              1 |               0 |           0 | Austria             |         1
              1 |               1 |           0 | Vienna              |         2
              1 |               1 |           1 | Vienna 1            |         3
              1 |               1 |           2 | Vienna 2            |         4
              1 |               1 |           3 | Vienna 3            |         5
              1 |               1 |           4 | Vienna 4            |         6
              1 |               1 |           5 | Vienna 5            |         7
              1 |               1 |           6 | Vienna 6            |         8
              1 |               1 |           7 | Vienna 7            |         9
              1 |               1 |           8 | Vienna 8            |        10
              1 |               1 |           9 | Vienna 9            |        11
              1 |               1 |          10 | Vienna 10           |        12
              1 |               1 |          11 | Vienna 11           |        13
              1 |               1 |          12 | Vienna 12           |        14
              1 |               1 |          13 | Vienna 13           |        15
              1 |               1 |          14 | Vienna 14           |        16
              1 |               1 |          15 | Vienna 15           |        17
              1 |               1 |          16 | Vienna 16           |        18
              1 |               1 |          17 | Vienna 17           |        19
              1 |               1 |          18 | Vienna 18           |        20
              1 |               1 |          19 | Vienna 19           |        21
              1 |               1 |          20 | Vienna 20           |        22
              1 |               1 |          21 | Vienna 21           |        23
              1 |               1 |          22 | Vienna 22           |        24
              1 |               1 |          23 | Vienna 23           |        25
              1 |               2 |           0 | Lower Austria       |        26
              1 |               2 |           1 | St.Pölten           |        27
              1 |               2 |           2 | Amstetten           |        28
              1 |               2 |           3 | Baden               |        29
              1 |               2 |           4 | Bruck an der Leitha |        30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:53:12.840

A`join`通常比`in`从句更有效：

```
.
.
.
SELECT id FROM users 
  INNER JOIN regions ON user_region = region_id; 
```

假设每个用户只匹配一个区域（从您的查询来看似乎是真的），这将为您提供相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T17:40:03.600

您是否尝试过分析您的表格？

从您发布的解释中，我可以看到 Postgres 预期的行数比实际返回的行*数少39 倍。*

当 Postgres 的期望与实际结果集有很大差异时，它可以选择次优计划，从而产生较差的查询计划并花费更长的时间来完成查询。

# python - 无法在美洲狮上导入 twisted.internet.protocol 模块

> ID：13876944
> 
> 赞同：3
> 
> 时间：2012-12-14T10:34:24.893
> 
> 标签：python, tcp, twisted, osx-mountain-lion

我正在尝试实现 TCP 服务器并使用 python 脚本。所以我`server.py`在我的桌面上创建了一个并导入了以下模块：

```
from twisted.internet.protocol import Factory,Protocol 
```

那时它已经失败了，因为如果我运行：`python server.py`，我会得到以下输出：

```
Traceback (most recent call last):
  File "server.py", line 4, in <module>
    from twisted.internet.protocol import Factory,Protocol
ImportError: No module named twisted.internet.protocol 
```

我还`sys.path`用来打印我的 Python 目录并得到以下输出：

```
['/Users/Alfred/Desktop',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',
'/Library/Python/2.7/site-packages'] 
```

我的 python 设置可能出了什么问题？

是因为我的账户特权吗？我在这台机器上以管理员身份登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:05:40.773

的输出`python -v -c 'import twisted.internet.protocol'`可能会揭示问题。但是，作为第一个检查，请确保您没有一个名为“twisted.py”的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T20:15:01.453

根据您的`sys.path`，您已经从 python.org 安装了 Python，或者编译了自己的 Python，而不是使用预先安装了 Twisted 的内置 Python。如果您安装自己的 Python，则必须将您自己的 Twisted 版本安装到该版本的 Python 中。您可以使用`pip`或`easy_install`直接从[Twisted 站点](http://twistedmatrix.com)下载并运行`setup.py`.

`type -p python`在 shell 中会告诉你你正在使用哪个版本；我怀疑它会在`/usr/local/bin/`.

`/usr/bin/python2.7 -c 'from twisted.internet.protocol import Factory,Protocol'`应该会成功。如果没有，那么我不知道您对系统 Python 安装做了什么:)。

# java - JDeveloper - 如何生成存根类

> ID：13876953
> 
> 赞同：0
> 
> 时间：2012-12-14T10:34:56.813
> 
> 标签：java, jdeveloper, stub

我是 Java 和 JDeveloper 的新手。我必须维护两个应用程序——第一个是网站的公共部分，第二个是网站的管理部分。两个项目都使用相同的数据库。我在表格中添加了两个新字段。在 JDeveloper 中，我成功地更新了第一个应用程序公共部分中的模型项目 - 实体和视图 - 从数据库添加了属性，还为这些属性编辑了必要的 java 类。但是在第二次管理申请中我遇到了问题。第二个应用程序使用第一个应用程序的模型类。当我从数据库更新时，JDeveloper 向我显示带有 .class 扩展名的文件，该文件具有以下标题：这是 Oracle 存根生成的类，我需要再次重新生成该类以显示并使用两个新属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:57:17.407

您需要创建一个 ADF 库，其中包含来自您的第一个应用程序的模型项目。然后将此 jar 文件添加到您的第二个应用程序中 - 您将能够使用更新的 ADF BC。在此处阅读有关 ADF 库的更多信息：http: [//docs.oracle.com/cd/E16162_01/web.1112/e16182/reusing_components.htm#BEIGHHCG](http://docs.oracle.com/cd/E16162_01/web.1112/e16182/reusing_components.htm#BEIGHHCG)

# java - 允许中文字符的正则表达式

> ID：13876955
> 
> 赞同：1
> 
> 时间：2012-12-14T10:35:00.103
> 
> 标签：java, xml, regex, character

我有一个正则表达式可以阻止字符串中的无效字符，但它也阻止了中文字符，我不想要它。请帮帮我。下面是我正在使用的正则表达式字符串。

```
String re = "[^\\x09\\x0A\\x0D\\x20-\\xD7FF\\xE000-\\xFFFD\\x10000-x10FFFF]"; 
```

感谢期待！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T11:36:45.357

从 Java 7 开始，您可以使用[Unicode 属性/脚本](http://www.regular-expressions.info/unicode.html)。

例如，您可以使用该属性`\p{L}`来匹配任何语言的字母。`\p{IsHiragana}`或匹配平假名中包含的字符的脚本。您需要检查哪些脚本适合您的需求。

有关正则表达式和 Unicode 的更多详细信息，请参见[docs.Oracle.com上的此处](http://docs.oracle.com/javase/tutorial/essential/regex/unicode.html)

也可以匹配相反的内容，例如匹配**不是**`\P{L}`字母的每个字符，或者您只是添加到您的否定字符类，而不是应该定义字母的范围。**`\p{L}`**

# vba - Word 2003 VBA - 如何禁用“Word 内存不足”警告

> ID：13876959
> 
> 赞同：3
> 
> 时间：2012-12-14T10:35:05.957
> 
> 标签：vba, ms-word, word-2003

我正在运行 Word 2003。

我有一个 Word 文档，我从中运行一个宏，该宏可以打开其他 Word 文档并在保存和关闭它们之前对其执行任务。

由于更改的数量，我不断点击“ `Word has insufficent memory. You will not be able to undo this action once it is completed. Do you want to continue?`”提示。

我已经“用谷歌搜索”了这个错误，除了以下似乎不起作用的东西之外，我没有发现任何其他东西：

*   `Application.DisplayAlerts = False`
*   `Application.DisplayAlerts = wdAlertsNone`

我认为这可能是因为代码适用于运行宏的文档，而不是宏正在处理的文档。

下面的代码是我正在使用的代码的精简版本。我删除的只是一些日志记录功能。

```
Function open_word_file(file_name)

    Call wd_backup_current_file_first(file_name) ' backup the current file - so that if damage is done, it can be undone.

    Documents.Open FileName:=file_name, ConfirmConversions:=False, ReadOnly:=False, AddToRecentFiles:=False, PasswordDocument:="", PasswordTemplate:="", Revert:=False, WritePasswordDocument:="", WritePasswordTemplate:="", Format:=wdOpenFormatAuto, XMLTransform:=""

    Application.DisplayAlerts = False
    'Application.DisplayAlerts = wdAlertsNone

    '<do_work>
    Call do_something_with_the_opened_file
    '</do_work>

    ActiveDocument.Save ' save the changes
    ActiveDocument.Close
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:16:30.737

经过大量的试验和错误，导致问题的是撤消缓冲区。

我将以下行放在正在处理文件的循环中，并且不再显示该消息。

```
ActiveDocument.UndoClear 
```

# php - 如何确保用户输入是 CSS 而不是恶意代码？

> ID：13876961
> 
> 赞同：7
> 
> 时间：2012-12-14T10:35:08.230
> 
> 标签：php, css, security, input

在我的网站上，我想包含一个文本框，允许成员在他们的个人资料中更改他们想要的任何内容。并破坏了一切或访问了他们不应该访问的东西。

有没有简单的方法来验证他们输入的文本是否只是 css？我在这里看到另一个类似的问题，它有 XSS 备忘单和禁用什么的提示（< 和 ]]> 和 <![），但我不知道这是否足够。不过，我肯定会使用该信息。

本质上，我只想让 PHP 调用任何自定义 css 并将其插入用户配置文件的脚本标记之间。我想允许尽可能多的 CSS。这是最好的方法吗？我不知道如何组成一个系统来生成安全文件，也没有耐心用选项组成整个部分（特别是因为我想给成员更多的个人资料自由度）。

任何建议都值得赞赏，如果有人知道一些已经这样做的脚本，那也会摇滚并帮助我弄清楚该怎么做：D。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T10:42:34.950

当用户登录时，`<link>`为该用户添加一个单独的元素。href 可以指向为用户生成 css 的脚本，例如`customcss.php?userid=1234&version=2`*)。该脚本只需要返回用户之前输入的所有内容。因为您将它作为一个单独的 CSS 文件包含在内，所以浏览器将始终这样对待它，并且永远不会运行任何脚本。任何 HTML 或 Javascript 都被视为无效 CSS。

但是请注意，无论如何包含脚本并没有什么坏处，因为它们只会在登录用户的浏览器中运行，因此它们只能破解他们自己对您网站的看法。如果他们想注入 Javascript，他们仍然可以通过编写自己的浏览器插件来做到这一点，因此您不会打开以前没有的可能性。

*您*需要担心的主要问题是

*   可用性。如果用户犯了一个错误，不小心隐藏了 Body 元素怎么办。他们将如何重置它？
*   SQL注入。无论您做什么或不允许做什么，请始终确保您的输入是经过消毒的。
*   PHP 注入。不要执行（评估）用户内容。曾经。
*   隐藏用户信息。将代码添加到 customcss.php url 以防止其他用户猜测用户 id，从而深入了解其他用户的自定义。

*) 我在 CSS url 中添加了一个版本号，每次用户更新他们的 CSS 时，你都应该在数据库中更新它。如果您不这样做，浏览器将缓存旧的 CSS，用户将开始向您抱怨，因为他们的更改将不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:41:41.703

我想这应该足够了

```
$style = $_POST['style'];

$style = strip_tags($style);

    $forbiddenStuff = array(
        '-moz-binding',
        'expression',
        'javascript:',
        'behaviour:',
        'vbscript:',
        'mocha:',
        'livescript:',
    );

    $style = str_ireplace($forbiddenStuff, '', $style); 
```

将 $style 存储在 db 中，并在用户配置文件中呈现。

请注意，这个解决方案是从一个知名软件复制而来的，它有一个很大的社区，所以我希望这应该是完美的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-14T11:27:50.870

哦，我的空间…</p>

只需让用户能够从 Web 表单中指定颜色和图像，并从中构建用户特定的样式表。允许用户完全指定他们自己的 CSS 只会导致丑陋、丑陋的页面。请参阅：MySpace 1.0。

# redis - RedisMQ中out队列的作用是什么？

> ID：13876963
> 
> 赞同：2
> 
> 时间：2012-12-14T10:35:11.837
> 
> 标签：redis, servicestack

在 RedisMQ 的可重用性用例项目中，有一个 SMessageService 具有以下处理程序。

```
SMessageService :Service{

    public object Any(EmailMessage request)
    {
        var sw = Stopwatch.StartNew();
        Db.InsertAll(Email.Process(request));
        return new SMessageResponse { TimeTakenMs = sw.ElapsedMilliseconds };
    }...
} 
```

当服务返回时，它会将消息放入 mq:SMessageResponse.inq 列表中。

我的问题是，如果我返回 null 而不是 new SMessageResponse{...}，则会在 mq:EmailMessage.outq 列表中放入一条消息，这是什么原因？

另外，如果我根本不想返回响应，我将如何执行此操作，或者在消息传递领域这是不好的做法？换句话说，我总是需要记录所发生的事情。

# windows-phone-7 - NavigationService.GoBack() 未经授权的异常

> ID：13876970
> 
> 赞同：0
> 
> 时间：2012-12-14T10:35:40.247
> 
> 标签：windows-phone-7

```
void CallBackVerifiedResponse(OAuthAccessToken at, TwitterResponse response)
    {
        if (at != null)
        {

            SerializeHelper.SaveSetting<TwitterAccess>("TwitterAccess", new TwitterAccess
            {
                AccessToken = at.Token,
                AccessTokenSecret = at.TokenSecret,
                ScreenName = at.ScreenName,
                UserId = at.UserId.ToString()
            });

        }    
    }

    private void ok_Click_1(object sender, EventArgs e)
    {
        if (String.IsNullOrEmpty(pinText.Text))
            MessageBox.Show("Please enter PIN");
        else
        {
            try
            {
                var cb = new Action<OAuthAccessToken, TwitterResponse>(CallBackVerifiedResponse);
                service.GetAccessToken(_requestToken, pinText.Text, CallBackVerifiedResponse);
            }
            catch
            {
                MessageBox.Show("Something is wrong with the PIN. Try again please.", "Error", MessageBoxButton.OK);
            }

        }

    } 
```

我的问题在这里，当我在方法`NavigationService.GoBack()`内部使用`CallBackVerifiedResponse`我得到未经授权的访问异常时，如果我在点击事件中使用它，我`CallBackVerifiedResponse`不会被触发。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:24:44.353

您可以使用 Dispatcher.BeginInvoke 访问 UIThread

```
Dispatcher.BeginInvoke(() =>
              {
                   NavigationService.GoBack();
              }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:19:46.660

它已通过使用 UIThread 解决

```
public static class UIThread
{
    private static readonly Dispatcher Dispatcher;

    static UIThread()
    {
        // Store a reference to the current Dispatcher once per application
        Dispatcher = Deployment.Current.Dispatcher;
    }

    /// <summary>
    ///   Invokes the given action on the UI thread - if the current thread is the UI thread this will just invoke the action directly on
    ///   the current thread so it can be safely called without the calling method being aware of which thread it is on.
    /// </summary>
    public static void Invoke(Action action)
    {
        if (Dispatcher.CheckAccess())
            action.Invoke();
        else
            Dispatcher.BeginInvoke(action);
    }
} 
```

在这个静态类之后

我在里面叫它

> CallBackVerifiedResponse 像这样 UIThread.Invoke(()=>NavigationService.GoBack());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:53:47.410

或者你可以使用你自己的智能调度器，像这样使用：

```
SmartDispatcher.BeginInvoke(() =>
{                    
    MissionAccomplished();                    
}); 
```

编码如下：

```
{
    using System.ComponentModel;
    using System.Windows.Threading;
    using System.Windows;
    using System;

    public static class SmartDispatcher
    {
        /// <summary>
        /// A single Dispatcher instance to marshall actions to the user
        /// interface thread.
        /// </summary>
        private static Dispatcher _instance;

        /// <summary>
        /// Backing field for a value indicating whether this is a design-time
        /// environment.
        /// </summary>
        private static bool? _designer;

        /// <summary>
        /// Requires an instance and attempts to find a Dispatcher if one has
        /// not yet been set.
        /// </summary>
        private static void RequireInstance()
        {
            if (_designer == null)
            {
                _designer = DesignerProperties.IsInDesignTool;
            }

            // Design-time is more of a no-op, won't be able to resolve the
            // dispatcher if it isn't already set in these situations.
            if (_designer == true)
            {
                return;
            }

            // Attempt to use the RootVisual of the plugin to retrieve a
            // dispatcher instance. This call will only succeed if the current
            // thread is the UI thread.
            try
            {
                _instance = Application.Current.RootVisual.Dispatcher;
            }
            catch (Exception e)
            {
                throw new InvalidOperationException("The first time SmartDispatcher is     used must be from a user interface thread. Consider having the application call Initialize, with or without an instance.", e);
            }

            if (_instance == null)
            {
                throw new InvalidOperationException("Unable to find a suitable Dispatcher instance.");
            }
        }

        /// <summary>
        /// Initializes the SmartDispatcher system, attempting to use the
        /// RootVisual of the plugin to retrieve a Dispatcher instance.
        /// </summary>
        public static void Initialize()
        {
            if (_instance == null)
            {
                RequireInstance();
            }
        }

        /// <summary>
        /// Initializes the SmartDispatcher system with the dispatcher
        /// instance.
        /// </summary>
        /// <param name="dispatcher">The dispatcher instance.</param>
        public static void Initialize(Dispatcher dispatcher)
    {
        if (dispatcher == null)
        {
            throw new ArgumentNullException("dispatcher");
        }

        _instance = dispatcher;

        if (_designer == null)
        {
            _designer = DesignerProperties.IsInDesignTool;
        }
    }

    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    public static bool CheckAccess()
    {
        if (_instance == null)
        {
            RequireInstance();
        }

        return _instance.CheckAccess();
    }

    /// <summary>
    /// Executes the specified delegate asynchronously on the user interface
    /// thread. If the current thread is the user interface thread, the
    /// dispatcher if not used and the operation happens immediately.
    /// </summary>
    /// <param name="a">A delegate to a method that takes no arguments and 
    /// does not return a value, which is either pushed onto the Dispatcher 
    /// event queue or immediately run, depending on the current thread.</param>
    public static void BeginInvoke(Action a)
    {
        if (_instance == null)
        {
            RequireInstance();
        }

        // If the current thread is the user interface thread, skip the
        // dispatcher and directly invoke the Action.
        if (_instance.CheckAccess() || _designer == true)
        {
            a();
        }
        else
        {
            _instance.BeginInvoke(a);
        }
    }
}
} 
```

# php - Symfony2：无法从实体类访问 web 目录

> ID：13876978
> 
> 赞同：0
> 
> 时间：2012-12-14T10:36:27.283
> 
> 标签：php, symfony, path, doctrine-orm

我正在尝试使用食谱示例来了解如何使用 symfony2 上传文件：http: [//symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html)

问题是我无法获取 web 文件夹的路径。

以下是一些细节： 在我的 web 文件夹中，我有这样的结构：

```
/web
    /bundles
        /sciforumversion2
            /images 
```

从实体中，我试图获取文件夹路径并将我的图像保存在 /images 文件夹中

为此，我正在使用：

```
protected function getUploadRootDir()
{
    // the absolute directory path where uploaded
    // documents should be saved
    return __DIR__ . '/../../../../web/'.$this->getUploadDir();
}

protected function getUploadDir()
{
    // get rid of the __DIR__ so it doesn't screw up
    // when displaying uploaded doc/image in the view.
    return 'sciforumversion2/bundles/images';
} 
```

但是我得到了无法创建目录的异常：

```
Unable to create the "/home/milos/workspace/conference2.0/src/SciForum/Version2Bundle/Entity/../../../../web/sciforumversion2/bundles/images/conference" directory 
```

任何关于如何获取 web 文件夹 url 以及为什么 symfony 食谱提出的解决方案不起作用的想法都非常受欢迎。

非常感谢你。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:53:19.147

路径似乎是正确的。

可能你应该给它正确的权限。

先试试这个：

```
chmod 777 /home/milos/workspace/conference2.0/src/SciForum/Version2Bundle/Entity/../../../../web/sciforumversion2/bundles/images/ 
```

如果可行，那就是权限问题。使用以下命令将所有者和组设置为 www-data：

```
chown www-data:www-data /home/milos/workspace/conference2.0/src/SciForum/Version2Bundle/Entity/../../../../web/sciforumversion2/bundles/images/
chmod 755 /home/milos/workspace/conference2.0/src/SciForum/Version2Bundle/Entity/../../../../web/sciforumversion2/bundles/images/ 
```

# r - 如何从 Rcpp 定义 R 函数？

> ID：13876980
> 
> 赞同：3
> 
> 时间：2012-12-14T10:36:34.757
> 
> 标签：r, rcpp

这是一个最小的例子：

```
require(Rcpp)
require(inline)

src <- '
 Rcpp::Environment glob =  Rcpp::Environment::global_env();
 glob.assign( "foo" , "function(x) x + 1" );
'

myFun <- cxxfunction(body=src,plugin = "Rcpp")
myFun()

foo
[1] "function(x) x + 1" 
```

毫不奇怪，我得到的是一个字符变量而不是一个函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:14:34.290

您需要通常的`parse/eval`组合将字符串转换为对象。

```
foo <- eval( parse( text = "function(x) x+1") ) 
foo( 1:10 )
# [1]  2  3  4  5  6  7  8  9 10 11 
```

在`Rcpp`中，您可以使用`ExpressionVector`.

```
// [[Rcpp::export]]
void fun(){
    ExpressionVector exp( "function(x) x+1" ) ;
    Function f = exp.eval();

    Rcpp::Environment glob =  Rcpp::Environment::global_env();
    glob.assign( "foo" , f );
} 
```

# .htaccess - RewriteCond - 从子文件夹加载 index.html

> ID：13876984
> 
> 赞同：1
> 
> 时间：2012-12-14T10:36:56.640
> 
> 标签：.htaccess

我有这个重写规则，将我重定向到一个子文件夹并加载 index.html

```
Options -Indexes
RewriteEngine On
RewriteBase /

SetEnvIf HOST        ^sub.mydomain.de          allow
Order allow,deny
Allow from env=allow
Satisfy any

RewriteCond %{HTTP_HOST} ^(www.)?sub.mydomain.de$
RewriteRule ^(/)?$ folder [L,R=301] 
```

到目前为止：这有效 - 但它在 url 中显示 /folder/ - 是否可以在 url 中“隐藏” /folder/？

有人对我有提示吗？

谢谢马雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:54:03.973

从规则中删除该`R=301`位，使其看起来像这样：

```
RewriteRule ^(/)?$ folder [L] 
```

# android - 共享 Eclipse WorkSpace 的最佳方式

> ID：13876986
> 
> 赞同：-1
> 
> 时间：2012-12-14T10:37:01.230
> 
> 标签：android, eclipse, workspace

在我的计算机和笔记本电脑（Windows 7 和 Windows 8）之间共享我的 Eclipse 工作区的最佳方式是什么。我对 SVN 很熟悉，但过了一段时间我的 SVN 崩溃了，我无法提交，因为我的所有文件都已过时（它们不是）。

您如何在多台计算机之间共享您的工作区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:53:03.267

我认为最简单的方法是通过 Dropbox 或 UbuntuOne 同步工作区文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:29:36.463

更简洁的解决方案可能是在每台计算机上创建一个工作区，然后只使用 SCM。我为我的 3 台计算机（我的工作笔记本电脑 - fedora 17，我的个人笔记本电脑 - MacOSX 和我的台式机 - Win7）中的每台计算机都使用了一个工作区，它们有自己的工作区，但我通过 github 共享更新我的项目。

**更新：**

但是为了达到您的目标，您还可以将您的工作区设置上传到您的 SCM：

[我在这里](http://eclipse.dzone.com/news/create-new-eclipse-workspace-w)找到了这个有用的信息。

> 所以简短的回答是：如果您想创建一个新的 Eclipse 工作区并保留所有设置，只需将 .metadata/.plugins/org.eclipse.core.runtime/.settings 目录复制到新的工作区目录中即可。

但..

> 不要复制其他目录！有项目特定的设置，并且由于您的旧项目留在旧工作区中，因此复制的设置将无效，并且您会在 eclipse 启动时遇到一些令人讨厌的异常。

# javascript - Firefox document.all 问题

> ID：13876990
> 
> 赞同：0
> 
> 时间：2012-12-14T10:37:13.417
> 
> 标签：javascript, firefox, internet-explorer-8, document

我正在尝试使我的应用程序与所有浏览器和我的代码兼容

```
 ClientScript.RegisterClientScriptBlock(this.GetType(), "theAction",
   "<script type='text/javascript'>
      function DoSave() {
        try {
          document.all('" + lbnSave.ClientID + "').click();
        } catch(e){}
      }
   </script>"); 
```

可以在 IE8、Chrome 和 Opera 中运行，但不能在 Firefox 中运行。我知道 document.all 是特定于 IE 的，但是我如何重写它以在 Firefox 中工作呢？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:38:37.113

使用[`getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)哪个是跨浏览器：

```
 ClientScript.RegisterClientScriptBlock(this.GetType(), "theAction",
   "function DoSave() {
     try {
       document.getElementById('" + lbnSave.ClientID + "').click();
     } catch(e){}
   }", true); 
```

此外，您可以使您的代码更清洁。第四个参数设置为`true`将自动添加`<script>`标签。

# oop - 模型应该能够访问我的搜索器类吗？

> ID：13876991
> 
> 赞同：1
> 
> 时间：2012-12-14T10:37:15.220
> 
> 标签：oop, model-view-controller

我对我的应用程序结构中的“最佳实践”有一些疑问。我使用瘦模型，并拥有完成大部分（全部）数据库交互的服务层。模型在需要数据库事务时调用服务层。

我还有一个工厂类，它可以返回表单、模型和服务层类。这个工厂类也可能返回一个“搜索”类，它充当一个非常简单的 DBAL，并由我的服务层使用。

该搜索类具有 getAll() 和 getById() 等辅助方法。

我对我的应用程序的哪些部分应该可以访问搜索类有点困惑。目前我的模型在需要通过其 ID 检索实体时使用静态工厂来构建搜索类。我的模型是否应该调用我的服务层来进行此调用，从而消除使用我的工厂类返回搜索器的需要？

我想我不喜欢我的数据库可以从我的应用程序的多个部分访问的想法，而实际上我宁愿一切都需要首先通过我的服务层。

非常感谢提示和反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:50:45.837

我最终会创建一个`SearchService`（它实现了一个接口，即 ISearchService）类，模型或任何其他想要访问的代码`Searcher`将与之交互。

这样，您就可以与`Searcher`班级或工厂保持清晰的分离，这在未来可能会发生变化。另一个好处是，通过将所有与搜索相关的代码放在 中`SearchService`，开发人员更容易理解代码，因为他们知道与搜索相关的代码`SearchService`在等等

此外，通过使用 ISearchService，您可以选择使用依赖注入，这是一种为您初始化对象的好方法，而不必担心实现更改。

这只是我的偏好，而不是这是一种正确/错误的做事方式。

# python - 在 eval(...) 中自动导入所需的模块

> ID：13876994
> 
> 赞同：1
> 
> 时间：2012-12-14T10:37:33.067
> 
> 标签：python, import, eval

我想使用`eval`. 该对象被转储到文件中，因此它是一个有效的 python 表达式 - 所有类型都使用它们的 fqdn 给出，如下所示：

```
mod1.Class1(
    attr1=mod2.Class2(a=1,b=2),
    attr2=[1,2,3,4],
    attr3=mod1.submod1.Class3(),
) 
```

当我将它输入`eval`时，并非所有这些模块都被导入到`eval`被调用的范围内，所以我要么`NameError: name 'mod1' is not defined`得到顶级模块，要么得到`AttributeError: 'module' object has not attribute 'submod1'`子模块。

有没有优雅的方法来处理它？我可以解析`NameError`、运行`__import__`和重试`eval`，但我不知道如何从中找出问题所在`AttributeError`。

我可以将表达式输入到`compile`AST 并导入任何必要的内容吗？从来没有使用过 AST，有什么例子吗？

注意我对这里的安全性**不**感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:58:29.887

如果你热衷于使用完整的 Python（而不是像 JSON 或 YAML 这样更容易解析的东西）来处理数据，那么走 AST 听起来相当可行。您想要实现[ast.NodeVisitor](http://docs.python.org/2/library/ast.html)并跟踪访问的 Attribute 节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:48:04.623

为什么不`pickle`用于这个？您甚至可以`__getstate__`在`__setstate__`您的类上使用方法来控制序列化和实例化的各个方面。似乎比做自己的`eval()`事情要好得多。

否则，您的序列化格式中的值如何控制？即，也许您可​​以预测将需要哪些模块。

# ios - 同步 icloud 数据库的问题

> ID：13876995
> 
> 赞同：8
> 
> 时间：2012-12-14T10:37:33.387
> 
> 标签：ios, core-data, gps, icloud

在这段代码中，我遇到了几个没有阻塞的错误：

```
 [psc lock];

    NSError *error = nil;
    if (![psc addPersistentStoreWithType:NSSQLiteStoreType
                           configuration:nil
                                     URL:localStore
                                 options:options
                                   error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    [psc unlock]; 
```

类似于以下内容（注意：在过程结束时，数据似乎正确同步，没有抛出异常并且错误为零，但是同步需要一些时间）；错误有两种，一开始似乎缺少一个文件（或更多），然后它说明了数据完整性（一些不满足的外键），也许这两个问题是相关的？

这是正常情况吗？

（顺便说一句，该应用程序已在商店中，[https://itunes.apple.com/app/id582749801](https://itunes.apple.com/app/id582749801)，它会记住来自gps的曲目并将其提供给其他设备，曲目可能包含大量数据，第二条记录2条）

（对不起，很长的日志，我已经剪掉了一点，但是了解正在发生的事情可能很有用）

```
2012-12-14 11:18:25.489 CloudGPSTracker[9303:907] -[PFUbiquityTransactionLog loadPlistAtLocation:withError:](485): CoreData: Ubiquity:  Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1ddf3ee0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt, NSUnderlyingError=0x1ddf3e50 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}
2012-12-14 11:18:25.491 CloudGPSTracker[9303:907] -[PFUbiquityTransactionLog loadContents:](290): CoreData: Ubiquity:  Error encountered while trying to load the comparison metadata for transaction log: <PFUbiquityTransactionLog: 0x1f083450>
    transactionLogLocation: <PFUbiquityLocation: 0x1f005420>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt
    transactionNumber: (null)

Error: Error Domain=NSCocoaErrorDomain Code=134302 "The operation couldn’t be completed. (Cocoa error 134302.)" UserInfo=0x1f2c1ae0 {reason=Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1ddf3ee0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt, NSUnderlyingError=0x1ddf3e50 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}}
userInfo: {
    reason = "Error reading the log file at location: (null)\nuserInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 \"The operation couldn\U2019t be completed. (Cocoa error 256 - The item failed to download.)\" UserInfo=0x1ddf3ee0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt, NSUnderlyingError=0x1ddf3e50 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\", NSDescription=The item failed to download.}\nuserInfo: {\n    NSDescription = \"The item failed to download.\";\n    NSURL = \"file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt\";\n    NSUnderlyingError = \"Error Domain=UBErrorDomain Code=0 \\\"The operation couldn\\U2019t be completed. (UBErrorDomain error 0.)\\\"\";\n}";
}
2012-12-14 11:18:25.495 CloudGPSTracker[9303:907] -[_PFUbiquityRecordsImporter createSortedOperationsArrayForLogLocationsInContext:isFirstImport:](256): CoreData: Ubiquity:  Error loading comparison metadata for transaction log: (null)
Error: Error Domain=NSCocoaErrorDomain Code=134302 "The operation couldn’t be completed. (Cocoa error 134302.)" UserInfo=0x1f2c1ae0 {reason=Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1ddf3ee0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt, NSUnderlyingError=0x1ddf3e50 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}}
 User Info: {
    reason = "Error reading the log file at location: (null)\nuserInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 \"The operation couldn\U2019t be completed. (Cocoa error 256 - The item failed to download.)\" UserInfo=0x1ddf3ee0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt, NSUnderlyingError=0x1ddf3e50 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\", NSDescription=The item failed to download.}\nuserInfo: {\n    NSDescription = \"The item failed to download.\";\n    NSURL = \"file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/542E2269-592C-4CCA-AA47-A783C78DE466.1.cdt\";\n    NSUnderlyingError = \"Error Domain=UBErrorDomain Code=0 \\\"The operation couldn\\U2019t be completed. (UBErrorDomain error 0.)\\\"\";\n}";
}
2012-12-14 11:20:10.991 CloudGPSTracker[9303:907] -[PFUbiquityTransactionLog loadPlistAtLocation:withError:](485): CoreData: Ubiquity:  Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1f50b7e0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt, NSUnderlyingError=0x1f50b850 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}
2012-12-14 11:20:10.993 CloudGPSTracker[9303:907] -[PFUbiquityTransactionLog loadContents:](290): CoreData: Ubiquity:  Error encountered while trying to load the comparison metadata for transaction log: <PFUbiquityTransactionLog: 0x1f50f490>
    transactionLogLocation: <PFUbiquityLocation: 0x1f18f940>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt
    transactionNumber: (null)

Error: Error Domain=NSCocoaErrorDomain Code=134302 "The operation couldn’t be completed. (Cocoa error 134302.)" UserInfo=0x1f5106f0 {reason=Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1f50b7e0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt, NSUnderlyingError=0x1f50b850 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}}
userInfo: {
    reason = "Error reading the log file at location: (null)\nuserInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 \"The operation couldn\U2019t be completed. (Cocoa error 256 - The item failed to download.)\" UserInfo=0x1f50b7e0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt, NSUnderlyingError=0x1f50b850 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\", NSDescription=The item failed to download.}\nuserInfo: {\n    NSDescription = \"The item failed to download.\";\n    NSURL = \"file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt\";\n    NSUnderlyingError = \"Error Domain=UBErrorDomain Code=0 \\\"The operation couldn\\U2019t be completed. (UBErrorDomain error 0.)\\\"\";\n}";
}
2012-12-14 11:20:10.996 CloudGPSTracker[9303:907] -[_PFUbiquityRecordsImporter createSortedOperationsArrayForLogLocationsInContext:isFirstImport:](256): CoreData: Ubiquity:  Error loading comparison metadata for transaction log: (null)
Error: Error Domain=NSCocoaErrorDomain Code=134302 "The operation couldn’t be completed. (Cocoa error 134302.)" UserInfo=0x1f5106f0 {reason=Error reading the log file at location: (null)
userInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 "The operation couldn’t be completed. (Cocoa error 256 - The item failed to download.)" UserInfo=0x1f50b7e0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt, NSUnderlyingError=0x1f50b850 "The operation couldn’t be completed. (UBErrorDomain error 0.)", NSDescription=The item failed to download.}
userInfo: {
    NSDescription = "The item failed to download.";
    NSURL = "file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt";
    NSUnderlyingError = "Error Domain=UBErrorDomain Code=0 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\"";
}}
 User Info: {
    reason = "Error reading the log file at location: (null)\nuserInfo: (null), local error: Error Domain=NSCocoaErrorDomain Code=256 \"The operation couldn\U2019t be completed. (Cocoa error 256 - The item failed to download.)\" UserInfo=0x1f50b7e0 {NSURL=file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt, NSUnderlyingError=0x1f50b850 \"The operation couldn\U2019t be completed. (UBErrorDomain error 0.)\", NSDescription=The item failed to download.}\nuserInfo: {\n    NSDescription = \"The item failed to download.\";\n    NSURL = \"file://localhost/private/var/mobile/Library/Mobile%20Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8EEB401B-05C5-4221-AEA3-EC377BB51CAB.1.cdt\";\n    NSUnderlyingError = \"Error Domain=UBErrorDomain Code=0 \\\"The operation couldn\\U2019t be completed. (UBErrorDomain error 0.)\\\"\";\n}";
}
2012-12-14 11:20:45.173 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44d50> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2718:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.174 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44be0> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2771:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.176 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44a60> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2695:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.177 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44960> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2620:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.179 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd447e0> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2614:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.180 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44680> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2715:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.181 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd44500> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2688:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.183 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934

 Unable to find relationship destination object: <PFUbiquityGlobalObjectID: 0x1dd443c0> (3F7NTNZ29A.com.3bsoft.CloudGPSTracker:POINT:p2617:mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14)
2012-12-14 11:20:45.185 CloudGPSTracker[9303:907] -[_PFUbiquityRecordImportOperation processObjects:withState:andImportContext:outError:](845): CoreData: Ubiquity:  <_PFUbiquityRecordImportOperation: 0x20979220>:
    localPeerID: mobile.00857B2E-B835-504A-8FD6-C666D92AD889
    logScore: <PFUbiquityKnowledgeVector: 0x2096eb70> (mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14:1)
transactionLog: <PFUbiquityTransactionLog: 0x20893c90>
    transactionLogLocation: <PFUbiquityLocation: 0x1f190a20>: /private/var/mobile/Library/Mobile Documents/3F7NTNZ29A~com~3bsoft~CloudGPSTracker/Logs/mobile.B9FC1B68-3090-52E4-905D-BBDC71020D14/3F7NTNZ29A.com.3bsoft.CloudGPSTracker/ViY1iUzbKktwTFRopnBhAMma63MPeM1zqnkmJnh39V4=/8F59A23C-CEB2-4B0B-A663-1616726A5F77.1.cdt
    transactionNumber: 2934 
```

# java - 双重操作麻烦

> ID：13876997
> 
> 赞同：0
> 
> 时间：2012-12-14T10:37:36.003
> 
> 标签：java

假设 n 是一个 Double 类型的变量。

```
double right=n-(Math.ceil(n)-1);

//Here I am trying to get the right part of the number. 
```

现在如果`n=1234.78`

然后`right=0.7799999999999727`

为什么不`.78`呢？

什么时候

```
n=1234.89 
```

然后`right=0.8900000000001`

为什么不`89`呢？为什么不`9999`......在这里而不是`000000`......？

现在假设我想在右边找到数字的总和......就像在我的例子中 1234.89 它的 8+9=17 或 1234.781 它的 7+8+1-16。那么，我该怎么办？

但是我不能使用浮点算术来做到这一点？喜欢

```
double temp=0.0; 
while(right>0) 
{ 
right=rigth*10; 
temp=Math.floor(right); 
right=right-temp; 
suml+=temp; 
} 
```

以我上面提到的某种方式？我是java新手。请解释我的问题。这对我会有很大的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:48:58.447

浮点在几乎所有语言中的工作方式都相同，您会看到相同的问题。如果你想要你应该使用的小数部分。

```
double fract = n - (long) n; 
```

我怀疑您使用的公式不适用于负数。（而且速度较慢）

如您所见，这可能会产生舍入误差，因此您需要选择一个精度级别。您可以选择 2 位或 6 位数字。您可以在计算时对值进行四舍五入，但在打印时对其进行四舍五入通常更简单。

```
System.out.printf("%.2f%n", fract); 
```

`0.78`这将按您的`0.89`预期打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T10:40:01.300

嘿，您可以使用以下代码

```
 double roundTwoDecimals(double d) {
                DecimalFormat twoDForm = new DecimalFormat("#.##");
            return Double.valueOf(twoDForm.format(d));
    }
right=roundTwoDecimals(right);
    System.out.println(right); 
```

你会得到想要的结果。

# eclipse - eclipse打开X11窗口

> ID：13876999
> 
> 赞同：0
> 
> 时间：2012-12-14T10:37:36.823
> 
> 标签：eclipse, x11

我想看看[FFMpeg](http://ffmpeg.org/)的代码是如何工作的。所以我所做的就是在eclipse中导入这个项目。当我从命令行运行二进制文件时，它会毫无问题地解码整个视频并显示它。但是，如果我从 Eclipse 运行完全相同的二进制文件，它就会失败。当二进制文件执行以下语句时它会失败 -

`instance->display = XOpenDisplay (NULL);`

谁能告诉在 Eclipse 中运行 X11 应用程序是否有任何特殊要求？我已经在代码中链接了必要的库。二进制文件也可以从命令行完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T09:41:34.613

使用 ROOT gui 类开发时遇到了类似的问题。我解决了在运行配置选项卡中将环境变量 DISPLAY 添加到 :0 的问题。