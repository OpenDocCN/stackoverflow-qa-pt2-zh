# StackOverflow 问答 14663000-14663999

# php - 将验证码验证添加到我的自定义表单以进行前端发布

> ID：14663002
> 
> 赞同：0
> 
> 时间：2013-02-02T14:40:25.160
> 
> 标签：php, wordpress, validation, captcha, recaptcha

我已经实现了前端表单，它使未注册的用户能够在我的网站上发布。

一切正常，我唯一的问题是验证码的实施。

我发现的所有验证码解决方案都需要将一些外部文件放入表单操作中。但我的表格有这样的语法：

```
<form action=""> 
```

我不知道该怎么办？如果我将文件放在操作字段中，我将无法再添加帖子。我如何将验证码的验证码放在与表单相同的文件中？还是有更好的解决方案？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:44:18.833

如果你很了解 php，请使用 Zend 框架。我将它用于我所有的验证码。查看[http://framework.zend.com/manual/2.0/en/modules/zend.captcha.operation.html](http://framework.zend.com/manual/2.0/en/modules/zend.captcha.operation.html)了解更多信息。它通常与[http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#zend-form-quick-start](http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#zend-form-quick-start)结合使用，因此您可能想熟悉两篇文章。

此外，我不知道您获得了多少流量，但如果您是一个低流量网站，那么验证码的替代品效果很好，并且不会因翻译文本的困难而吓跑用户。例如，用户可以解决像二加二这样的数学问题。机器人无法解决这个问题，或者你可以使用一个空白的隐藏字段，如果机器人填写了它，那么用户就无法注册。

编辑：那么你最好的选择是使用这些替代品。它们适用于 99.9% 的机器人，我在使用它们时从来没有遇到过问题，尤其是在组合使用时。添加类似的东西

```
<input type="hidden" value="" name="blah" /> 
```

然后用 php 测试表单

```
if (strlen($_POST["blah"]) > 0)
{
     die();
} 
```

这应该可以阻止大多数机器人。如果您需要更多安全性，请添加类似的内容。

```
<p>Add two plus two</p>
<input type="text" name="check" /> 
```

和PHP

```
if ($_POST["check"] != 4)
{
    die();
} 
```

那应该对你有用。

# python - 如何获取 pandas DataFrame 的最后 N 行？

> ID：14663004
> 
> 赞同：219
> 
> 时间：2013-02-02T14:40:31.973
> 
> 标签：python, pandas, dataframe

我有 pandas 数据框`df1`和`df2`（df1 是 vanila 数据框，df2 由“STK_ID”和“RPT_Date”索引）：

```
>>> df1
    STK_ID  RPT_Date  TClose   sales  discount
0   000568  20060331    3.69   5.975       NaN
1   000568  20060630    9.14  10.143       NaN
2   000568  20060930    9.49  13.854       NaN
3   000568  20061231   15.84  19.262       NaN
4   000568  20070331   17.00   6.803       NaN
5   000568  20070630   26.31  12.940       NaN
6   000568  20070930   39.12  19.977       NaN
7   000568  20071231   45.94  29.269       NaN
8   000568  20080331   38.75  12.668       NaN
9   000568  20080630   30.09  21.102       NaN
10  000568  20080930   26.00  30.769       NaN

>>> df2
                 TClose   sales  discount  net_sales    cogs
STK_ID RPT_Date                                             
000568 20060331    3.69   5.975       NaN      5.975   2.591
       20060630    9.14  10.143       NaN     10.143   4.363
       20060930    9.49  13.854       NaN     13.854   5.901
       20061231   15.84  19.262       NaN     19.262   8.407
       20070331   17.00   6.803       NaN      6.803   2.815
       20070630   26.31  12.940       NaN     12.940   5.418
       20070930   39.12  19.977       NaN     19.977   8.452
       20071231   45.94  29.269       NaN     29.269  12.606
       20080331   38.75  12.668       NaN     12.668   3.958
       20080630   30.09  21.102       NaN     21.102   7.431 
```

我可以通过以下方式获取 df2 的最后 3 行：

```
>>> df2.ix[-3:]
                 TClose   sales  discount  net_sales    cogs
STK_ID RPT_Date                                             
000568 20071231   45.94  29.269       NaN     29.269  12.606
       20080331   38.75  12.668       NaN     12.668   3.958
       20080630   30.09  21.102       NaN     21.102   7.431 
```

同时`df1.ix[-3:]`给出所有行：

```
>>> df1.ix[-3:]
    STK_ID  RPT_Date  TClose   sales  discount
0   000568  20060331    3.69   5.975       NaN
1   000568  20060630    9.14  10.143       NaN
2   000568  20060930    9.49  13.854       NaN
3   000568  20061231   15.84  19.262       NaN
4   000568  20070331   17.00   6.803       NaN
5   000568  20070630   26.31  12.940       NaN
6   000568  20070930   39.12  19.977       NaN
7   000568  20071231   45.94  29.269       NaN
8   000568  20080331   38.75  12.668       NaN
9   000568  20080630   30.09  21.102       NaN
10  000568  20080930   26.00  30.769       NaN 
```

为什么 ？如何获取`df1`(dataframe without index) 的最后 3 行？熊猫 0.10.1

* * *

## 回答 #1

> 赞同：509
> 
> 时间：2013-02-07T21:03:22.430

别忘了`DataFrame.tail`！例如`df1.tail(10)`

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-02-03T05:02:23.223

这是因为使用了整数索引（通过 -3 而不是*位置的**标签*`ix`选择那些，这是设计使然：请参阅[pandas "gotchas"](http://pandas.pydata.org/pandas-docs/dev/gotchas.html#integer-indexing) * 中的整数索引）。

 ***在较新版本的熊猫中，更喜欢 loc 或 iloc 来消除 ix 作为位置或标签的歧义：

```
df.iloc[-3:] 
```

*请参阅[文档](http://pandas.pydata.org/pandas-docs/dev/indexing.html#different-choices-for-indexing-loc-iloc-and-ix)*。

正如 Wes 指出的那样，在这种特定情况下，您应该只使用 tail！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-01-22T07:40:09.400

> ## 如何获取 pandas DataFrame 的最后 N 行？

如果您按位置切片`__getitem__`（即使用 切片`[]`）效果很好，并且是我为这个问题找到的最简洁的解决方案。

```
pd.__version__
# '0.24.2'

df = pd.DataFrame({'A': list('aaabbbbc'), 'B': np.arange(1, 9)})
df

   A  B
0  a  1
1  a  2
2  a  3
3  b  4
4  b  5
5  b  6
6  b  7
7  c  8 
```

```
df[-3:]

   A  B
5  b  6
6  b  7
7  c  8 
```

例如，这与调用 相同`df.iloc[-3:]`（`iloc`内部委托给`__getitem__`）。

* * *

顺便说一句，如果要查找每个组的最后 N 行，请使用[`groupby`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html)and [`GroupBy.tail`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.tail.html)：

```
df.groupby('A').tail(2)

   A  B
1  a  2
2  a  3
5  b  6
6  b  7
7  c  8 
```**

# ruby-on-rails - 如何在 Ruby on Rails 中跳过过滤器自定义类？

> ID：14663006
> 
> 赞同：3
> 
> 时间：2013-02-02T14:40:53.190
> 
> 标签：ruby-on-rails, before-filter

我有一个`before_filter`使用自定义类的 Ruby on Rails 控制器：

```
class ApplicationController
  before_filter CustomBeforeFilter      
end 
```

我有另一个控制器继承自`ApplicationController`，我想跳过`CustomBeforeFilter`：

```
class AnotherController < ApplicationController
  skip_before_filter CustomBeforeFilter
end 
```

那是行不通的。`before_filter`仍在执行。

如何在使用自定义类的过滤器之前跳过 Ruby on Rails？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:16:22.133

您可以将自定义类包装在如下方法中：

```
before_filter :custom
def custom
  CustomBeforeFilter.filter(self)
end 
```

然后在任何你想要的地方禁用该过滤器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:31:56.420

类回调在添加到过滤器链时会被分配一个随机回调名称。我能想到的唯一方法是首先找到回调的名称：

```
skip_before_filter _process_action_callbacks.detect {|c| c.raw_filter == CustomBeforeFilter }.filter 
```

如果你想让你的控制器更干净一些，你可以覆盖 ApplicationController 中的 skip_before_filter 方法，让它对所有控制器都可用：

```
class ApplicationController < ActionController::Base
  def self.skip_before_filter(*names, &block)
    names = names.map { |name|
      if name.class == Class
        _process_action_callbacks.detect {|callback| callback.raw_filter == name }.filter
      else
        name
      end
    }

    super
  end
end 
```

然后你可以这样做：

```
class AnotherController < ApplicationController
  skip_before_filter CustomBeforeFilter
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:03:51.640

如果当前控制器是您要跳过的控制器，最简单的解决方案是从您的 before_filter 方法返回：

```
class CustomBeforeFilter
  def self.filter(controller)
    return if params[:controller] == "another"
    # continue filtering logic
  end
end 
```

编辑：

遵循 phoet 建议，您也可以使用`controller.controller_name`而不是`params[:controller]`

# c++ - 将 1000x1000 复数矩阵的求逆从 Matlab 移植到 C++

> ID：14663008
> 
> 赞同：1
> 
> 时间：2013-02-02T14:41:00.953
> 
> 标签：c++, matlab, matrix, porting

Matlab代码：

```
invD = inv(D);
Dew=2*invD-E; 
```

D 是 1000x1000 的复数矩阵。它在 0.5 秒或更短的时间内反转。

我尝试了几种将这段代码移植到 C++ 的方法，使用不同的方法，但它总是慢于 10 秒。我究竟做错了什么？Matlab 如何优化该代码？

这个matlab代码不是我写的，我只需要移植它。抱歉，我在数学方面的编码要好得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:00:25.143

我很确定您使用`Eigen`不正确。我尝试使用八度音阶（MATLAB 的免费替代品，可能稍微不那么优化）和以下特征码反转随机 1000x1000 矩阵。Octave 大约需要 1 秒，Eigen 大约需要 1.5 秒（我正在使用`boost::timer`而不是您的计时解决方案，但这只是因为它不那么麻烦）：

```
#include <iostream>
#include <Eigen/Dense>
#include <boost/timer/timer.hpp>

using Eigen::MatrixXcd;

int main() {
    MatrixXcd m,mi;
  {
    boost::timer::auto_cpu_timer t;
    m = MatrixXcd::Random(1000,1000);
  }
  {
    boost::timer::auto_cpu_timer t;
    mi = m.inverse();
  }
    std::cout << mi(4,4) << std::endl;
} 
```

我能想到的第一个可能的罪魁祸首是编译器选项。`-O2`您是否至少编译了您的 C++ 代码？

您的矩阵仍有可能具有特殊结构，因此在您的特定情况下，数值考虑会使 Eigen 算法变慢，但在考虑之前我会在别处寻找问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:45:11.360

[您可以使用boost::ublas](http://www.boost.org/doc/libs/1_52_0/libs/numeric/ublas/doc/index.htm)并按照[这些说明](http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?LU_Matrix_Inversion)进行操作，而不是重新发明轮子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T14:45:18.873

我不清楚你在用那个倒数做什么。我的第一反应是大多数人不会反转矩阵。例如，LU 分解比完全反演更有效、更稳定。

我建议找到一个[用 C++ 编写的线性代数库](http://math.nist.gov/lapack++/)。其他在数学和编程方面都比你好得多的人已经解决了这个问题。使用他们的代码；不要自己写。

如果您有 GPU ，我还建议您查看[CUDA 。](http://developer.download.nvidia.com/CUDA/training/GTC_Express_Sarah_Tariq_June2011.pdf)

1000x1000 并不是一个非常大的矩阵。解决数百万自由度的问题并非闻所未闻。

# html - Windows 8 Store 应用程序中的 HTML5 表单

> ID：14663009
> 
> 赞同：1
> 
> 时间：2013-02-02T14:41:07.313
> 
> 标签：html, windows-8, windows-store-apps, winjs

我有一个看起来像这样的 HTML5 表单：

```
 <form id="myData">
            <p>Email
            <input type="email" title="myEmail" id="email" required />
            </p> 

            <p>Some Text
            <input type="text" title="myText" id="text" required />
            </p>

            <button type="submit" id="submitButton">Submit</button>
        </form> 
```

然后按下提交按钮会导致表单从屏幕上消失。我正在为应用程序使用导航模板，虽然查看 DOM Explorer，但它并没有离开页面，只是摆脱了表单。这显然是设计使然，但奇怪的是我找不到对此功能的任何引用。

我的问题是：它为什么要这样做，我怎样才能阻止它，同时仍然保持我通过表单获得的免费验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:56:57.960

您可以处理表单提交事件。调用`preventDefault`以阻止表单提交到`action`您尚未定义的表单，然后处理提交。

```
ready: function (element, options) {
    document.getElementById("myData").addEventListener("submit", function (e) { 
        e.preventDefault(); 

        // handle your form submission here

    });
}, 
```

# c# - 我需要深拷贝吗？

> ID：14663017
> 
> 赞同：2
> 
> 时间：2013-02-02T14:42:23.743
> 
> 标签：c#, winforms

我有一个对象列表，比如说`List<Bar> barlist`。这些`Bar`对象相当复杂，我很乐意在不深度复制它们的情况下继续进行。

但是，我想允许用户使用 a 和 a 来`BindingSource`修改`BindingNavigator`它们`DataGridView`。但是，如果我将 设置`DataSource`为我的 barlist 并修改值，则会`BindingSource`修改我的列表（因为它显然不包含自己的列表，或者仅使用浅拷贝）。

这样做的问题是：如果用户想放弃他的更改怎么办？`BindingSource`如果我提供深度复制的列表，我将不得不手动还原它们或不将它们应用于原始列表。但是，我想避免深度复制。

有替代路径吗？还是我别无选择，只能将对象标记为`Serializable`并深度复制它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:19:15.637

作为记录，我使用以下深度克隆功能来解决问题。它可能不是最好的解决方案，但它已经足够并且工作得很好（尽管仅适用于 Serializable 对象）

```
// Creates a deep copy of an Object
public static T DeepClone<T>(T obj)
{
    using (var ms = new MemoryStream())
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(ms, obj);
        ms.Position = 0;

        return (T)formatter.Deserialize(ms);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:02:50.093

我建议使用[Memento Pattern](http://en.wikipedia.org/wiki/Memento_pattern)。

您基本上需要创建一个单独的对象，该对象可以将每个 Bar 的状态恢复到用户开始编辑之前的状态。这通常比深拷贝更容易且更便宜。

# java - 在 AlertDialog 中从用户那里检索信息

> ID：14663019
> 
> 赞同：0
> 
> 时间：2013-02-02T14:42:32.847
> 
> 标签：java, android, input, android-edittext, android-alertdialog

我一直在简化和简化，试图从 AlertDialog 中的 EditText 获取一串文本，但没有成功

```
private void showAddSectorDlg() {
   if (BuildConfig.DEBUG) {
           Log.i(Constants.TAG_ACTSECTORS, "showAddSectorDialog() called.");
   }
   LayoutInflater inflater = getLayoutInflater();
   new AlertDialog.Builder(ActSectors.this)
   .setTitle(R.string.menu_new_sector)
   .setMessage(R.string.dlg_sect_add_msg)
   .setView(inflater.inflate(R.layout.dlg_sector_add, null))
   .setPositiveButton(R.string.dlg_save,
           new DialogInterface.OnClickListener() {
               public void onClick(
                       DialogInterface dialog,
                       int whichButton) {
                    EditText mNewSectorName = (EditText) findViewById(R.id.dlg_edt_nsector);   
                            //NullPointerException happens here:
                    String val = mNewSectorName.getText().toString();
                       if (BuildConfig.DEBUG) {
                        Log.i(Constants.TAG_ACTSECTORS, "New Sector Name: "+val);
                       }
                       grabVal(val);
                       dialog.dismiss();
                   }
           })
   .setNegativeButton(R.string.dlg_cancel,
           new DialogInterface.OnClickListener() {
               public void onClick(
                       DialogInterface dialog,
                       int whichButton) {
               }
           }).create().show();
   }

   private void grabVal(String newSector){
   mNSN = newSector;
   callCtlr(Constants.R_DB_ADDSECT);
   } 
```

如果有人能解释我的错误在哪里，我将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:49:39.607

更改代码以从 AlertDialog 的 EditText 获取值：

```
 LayoutInflater inflater = getLayoutInflater();
  View view=inflater.inflate(R.layout.dlg_sector_add,null);
   new AlertDialog.Builder(ActSectors.this)
   .setTitle(R.string.menu_new_sector)
   .setMessage(R.string.dlg_sect_add_msg)
   .setView(view)
   //... your code here 
```

现在使用 view 从 AlertDialog 访问 EditText ：

```
EditText mNewSectorName = (EditText)view.findViewById(R.id.dlg_edt_nsector); 
```

# ios - UIViewContentMode 与 UIControlContentHorizo ntalAlignment

> ID：14663027
> 
> 赞同：1
> 
> 时间：2013-02-02T14:43:46.533
> 
> 标签：ios, objective-c, uiimageview, uibutton, uicontrol

我有 UIButton，我想将它的 imageView 对齐到 left 。当我尝试： **self.cancelButton.imageView.contentMode = UIViewContentModeLeft;**

它似乎不起作用，因为 imageView 仍然在中心（UIViewContentModeCenter）

但是当我使用 **self.cancelButton.contentHorizo​​ntalAlignment = UIControlContentHorizo​​ntalAlignmentLeft;**

它完美地对齐了 imageView。有人可以向我解释为什么这种行为，因为 UIViewContentModeLeft 也应该起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T17:06:26.077

任何 UIControl 元素都将使用**contentHorizo​​ntalAlignment**和**contentVerticalAlignment**属性来覆盖其子 UIView 和 UIImageView 的**contentMode**。默认 contentHorizo​​ntalAlignment 将覆盖您的 contentMode，直到您将按钮的 contentHorizo​​ntalAlignment 明确设置为您想要的。

# html - 背景图像溢出不起作用

> ID：14663029
> 
> 赞同：0
> 
> 时间：2013-02-02T14:43:48.843
> 
> 标签：html, css, image, overflow

我在正确显示此图像时遇到了一些麻烦。

我的站点设置宽度为 940 像素，我想保持这个宽度，但其中有一个更宽且溢出的 div，这样你仍然可以在更大的显示器上看到它。

```
<div id="cinema-wrapper">
<div id="cinema-displays"></div>
</div>

#cinema-wrapper {
width:940px; 
height:764px;
}
#cinema-displays {
background-image: url(../mackbyte_files/img/cinema-bg.png);
height: 764px;
width: 3109px;
background-repeat: no-repeat;
position: absolute;
left:50%;
margin-left:-1554.5px;
overflow:visible !important;
} 
```

这可行（有点），但我有两个问题。

1.  它在 safari 中不起作用（chrome/firefox 很好）
2.  它仅在右侧留下滚动选项。（例如，我可以进一步向右滚动以查看溢出的图像）。

对于 2，我只希望用户根据他们的屏幕分辨率看到图像的数量。

PS。我知道 3109px 对于网络和屏幕分辨率来说是巨大的，但我正在努力修复，然后再继续使用图像以使其更小；但是，当我这样做时，我仍然会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:31:21.933

控制内部 div 在cinema-wrapper 外部是否可见是父级的溢出，您没有设置。所以，你应该这样做

```
#cinema-wrapper {
    width:940px; 
    height:764px;
    overflow:visible;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T00:04:59.900

我也遇到过这种问题，所以这是我的方法。

对于 HTML：

```
<div id="cinema-wrapper">
    <div id="cinema-subwrapper">
        <div id="cinema-displays"></div>
    </div>
</div> 
```

对于 CSS：

```
#cinema-wrapper {
    width: 940px; 
    height: 764px;
    overflow: visible;
    position: relative;
}

#cinema-subwrapper {
    display: inline-block;
    position: relative;
    right: -50%;
}

#cinema-displays {
    background: url(../mackbyte_files/img/cinema-bg.png) center top no-repeat;
    height: 764px;
    width: 3109px;
    position: absolute;
    left: -50%;
} 
```

希望这可以帮助。:)

# twitter-bootstrap - 使用 LESS Hat 和 Twitter Bootstrap LESS 混合

> ID：14663035
> 
> 赞同：1
> 
> 时间：2013-02-02T14:44:48.367
> 
> 标签：twitter-bootstrap, less

好吧，标题几乎总结了我的问题的症结所在。我正在评估使用 LESS + LESS Hat mixins (lesshat.com) + Twitter Bootstrap mixins 的可能性。如果有人能阐明可能出现的潜在问题，我将不胜感激。或者，如果首先建议这样做。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-15T18:53:49.810

新版本 2（2013 年 11 月）允许您通过引入前缀版本（带有`.lh-`）来使用 LESS Hat 而不会发生任何冲突。应该没有其他问题。

[来自https://github.com/csshat/lesshat/blob/master/README.md](https://github.com/csshat/lesshat/blob/master/README.md)的自述文件：

> **Bootstrap 友好**——您现在可以使用前缀 LESS Hat 版本并愉快地使用 Bootstrap。是的，就是这么简单。

直接下载：[https ://raw.github.com/csshat/lesshat/master/build/lesshat-prefixed.less](https://raw.github.com/csshat/lesshat/master/build/lesshat-prefixed.less)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:04:01.223

显然，有证据表明他们之间存在一些潜在的冲突问题。这是 4 个月前在[lesshat 网站](http://lesshat.com/)上的引述：

> 它有一个问题，我正在使用 Twitter Bootstrap 和 csshat，并且喜欢将其添加到框架中。但它与 Twitter Bootstraps 样式冲突 [原文如此]，并且想知道 [原文如此] 这是否可以轻松修复？

这些冲突在过去 4 个月内是否得到处理尚不得而知。我没有将两者结合在一起的个人经验，因此我无法比上面找到的信息进一步作证。

# c# - 随时间插值点

> ID：14663040
> 
> 赞同：0
> 
> 时间：2013-02-02T14:45:33.207
> 
> 标签：c#, matlab, interpolation

我将首先说我不擅长数学，如果这个问题看起来简单或愚蠢，我很抱歉，但我之前可能一直在问错误的问题，我似乎陷入了死胡同。

我有一组数据，它给我一个对象在特定时间的 x、y 和 z 坐标。物体的路径通常是抛物线或三次（有时是线性）。我想在不同时间获取对象的 x、y 和 z 坐标。

例如从数据：

```
TIME   X   Y   Z
0.1    0   1   1
0.2    2   2   4
0.4    3   2   7 
```

我想在 time=0.3 获取对象的坐标

我的问题是：我认为我需要一个插值程序来解决这个问题。我想我需要一个 4d 例程。这个对吗？

如果是这样，我可以在 c# 或 MATLAB 中找到可用的 4d 插值例程吗？有没有其他方法可以解决这个问题？

谢谢

# c# - LINQ to SQL 表类性能

> ID：14663043
> 
> 赞同：2
> 
> 时间：2013-02-02T14:46:13.473
> 
> 标签：c#, performance, linq-to-sql

我找不到 System.Data.Linq.Table<T entity> 方法的性能特征！我指的是像 insertonSubmit 和 deleteonSubmit 这样的方法。这些方法是 O(1) 还是 O(n)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:59:16.767

`InsertOnSubmit`and采用`DeleteOnSubmit`单个对象，因此它们的性能应该是`O(1)`：它们所做的只是附加到插入队列，该队列对于所有无序容器都是一个`O(1)`或一个摊销`O(1)`。

`InsertAllOnSubmit``DeleteAllOnSubmit`另一方面，是，`O(N)`其中`N`是`IEnumerable`传递给方法的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:01:22.467

我假设您的意思是 O(n) 就基础表的大小而言，并且一旦提交，您就在谈论它们，而不仅仅是调用函数（如上所述是 O(1) ）。我没有看到任何 LINQ 的实现，但仅从使用它的经验和我对 SQL 的理解来看，插入方法在现有表方面应该是 O(n)，在如何方面应该是 O(n)有很多意见书。

由于整个事情是一次提交的，我假设它是一个事务，或者插入语句的联合，这意味着只有第一个插入遭受 O(n)，其余的只是 O(1)。

我认为没有办法让删除语句比 O(n) 更快地发生，所以我假设这需要多长时间。

当然，由于 LINQ 只是转换为 SQL 并将实际的实现留给数据库服务器，因此很大程度上取决于数据库服务器。

# c++ - regex_match 未按预期工作

> ID：14663051
> 
> 赞同：0
> 
> 时间：2013-02-02T14:46:55.617
> 
> 标签：c++, regex

这是我的代码：

```
#include <iostream>
#include <string.h>
#include <regex>

using namespace std;

int main () {

    string test = "COPY" ;
    regex r1 = regex ("(COPY\b)(.*)") ; 
    if (regex_match (test,r1) ) {
        cout << "match !!" ;
    } else {
        cout << "not match !!";
    } 
```

好的，我认为这段代码打印我“匹配！！” ，这就是我想要的。
但是，它给了我一个“不匹配！！”
我应该怎么办 ？

**注意：**
我希望“COPY”匹配，但不是“COPYs”或“COPYYY”，因为我在代码中使用了“\b”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:58:00.853

您需要对您的字符进行双重转义`\b`，因为该`\`字符是 C/C++ 中的“转义”序列，就像在放置换行符时一样，`\n`即使这是一个字符，而不是两个字符，您也可以使用。所以你的表达从 this:`"(COPY\b)(.*)"`到 this: `"(COPY\\b)(.*)"`。

对于极端情况，如果要匹配`\`正则表达式中的字符，则需要这样做：`"\\\\"`因为该`\`字符也是转义字符，因此您正在转义转义。

仅供参考，这就是为什么在 .NET 中他们经常将其原始字符串语法用于正则表达式，然后您不需要转义它。其他一些语言没有这个作为转义字符，所以正则表达式更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:51:08.730

首先，修复你的括号（使用`if`语句）。

其次尝试：

```
regex r1 = regex ("(COPY)(\\b|$)") ; 
```

这将查找“ *COPY* ”，后跟分词符或字符串末尾。

这意味着您的代码应如下所示：

```
#include <iostream>
#include <string.h>
#include <regex>

using namespace std ;

int main () {

    string test = "COPY" ;
    regex r1 = regex ("(COPY)(\\b|$)") ; 
    if (regex_match (test,r1) ) {
        cout << "match !!" ;
    } else {
        cout << "not match !!";
    }
} 
```

# c++ - C++ 面向对象代码的重载问题

> ID：14663055
> 
> 赞同：-3
> 
> 时间：2013-02-02T14:47:26.767
> 
> 标签：c++

我一直在做这个项目，我非常接近完成，但有一个问题是函数超载 - 任何提示都会令人惊叹！这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string.h>
#include <algorithm>
#include <string>
using namespace std;

class OpAmps 
{
private:
  string Name;
  unsigned int PinCount; 
  double SlewRate; 
public:
  void Enter();
  void Save();
  void Load();
  void Sort();
  void Display();

  friend bool SortName(const OpAmps &, const OpAmps &);
  friend bool SortSlewRate(const OpAmps &, const OpAmps &);
};

#define DATABASE_MAX 10
#define DATABASE_FILENAME "database.txt"

int main()
{
  OpAmps OpAmp[DATABASE_MAX]; 
  OpAmps Menu;
  unsigned long database_length = 0; 
  char UserInput;
while (1) 
{
    cout << endl;
    cout << "Op-amp database menu" << endl;
    cout << "--------------------" << endl;
    cout << "1\. Enter a new op-amp into the database" << endl;
    cout << "2\. Save the database to disk" << endl;
    cout << "3\. Load the database from disk" << endl;
    cout << "4\. Sort the database" << endl;
    cout << "5\. Display the database" << endl;
    cout << "6\. Exit from the program" << endl << endl;
    cout << "Enter your option: ";

    cin >> UserInput;

    cout << endl;

    switch(UserInput) 
    {
        case '1':
        Menu.Enter();
        break;

        case '2':
        Menu.Save();
        break;

        case '3':
        Menu.Load();
        break;

        case '4':
        Menu.Sort();
        break;

        case '5':
        Menu.Display();
        break;

        case '6':
        return 0;

        default:
        cout << "Invalid entry" << endl << endl;
        break;
    }
}
}

void OpAmps::Enter(OpAmps& Op, unsigned long& database_length)
{
if (database_length == DATABASE_MAX) 
{
    cout << "The database is full" << endl;
}
else 
{
    cout << "Add new data" << endl;
    cout << "------------" << endl;
    cout << "Enter op-amp name: ";
    cin >> Op.Name;
    cout << "Enter number of pins: ";
    cin >> Op.PinCount;
    cout << "Enter slew rate: ";
    cin >> Op.SlewRate;
    cout << endl;
    database_length++;
}
}

void OpAmps::Save(const OpAmps* Op, unsigned long database_length)
{
fstream output_file;
output_file.open(DATABASE_FILENAME, ios::out);
if(output_file.good()) 
{
    output_file << database_length << endl << endl;
    for (unsigned long i=0;i<database_length;i++) 
    {
        output_file << Op[i].Name << endl;
        output_file << Op[i].PinCount << endl;
        output_file << Op[i].SlewRate << endl << endl;
    }
}
output_file.close();
}

void OpAmps::Load(OpAmps* Op, unsigned long& database_length)
{
fstream input_file; 
input_file.open(DATABASE_FILENAME, ios::in);
if(input_file.good()) 
{
    input_file >> database_length;
    for (unsigned long i=0;i<database_length;i++) 
    {
        input_file >> Op[i].Name;
        input_file >> Op[i].PinCount;
        input_file >> Op[i].SlewRate;
    }
}
input_file.close();
}

void OpAmps::Sort(OpAmps* Op, unsigned long database_length)
{
char UserInput;
cout << endl;
cout << "Sorting options" << endl;
cout << "---------------" << endl;
cout << "1\. To sort by name" << endl;
cout << "2\. To sort by slew rate" << endl;
cout << "3\. No sorting" << endl << endl;
cout << "Enter your option: ";
cin >> UserInput;
cout << endl;
switch(UserInput) 
{
    case '1':
    cout<<"sortName"<<endl;
    std::sort(Op, Op + database_length, SortName);
    break;

    case '2':
    cout<<"sortslew"<<endl;
    std::sort(Op,Op + database_length, SortSlewRate);
    break;

    case '3':
    return;
    default:
    cout << "Invalid entry" << endl << endl;
    break;
}
}

bool SortName(const OpAmps &First, const OpAmps &Second)
{
  return First.Name < Second.Name;
}

bool SortSlewRate (const OpAmps &First, const OpAmps &Second)
{
  return First.SlewRate < Second.SlewRate;
}

void OpAmps::Display(const OpAmps* Op, unsigned long database_length)
{
if (database_length == 0) 
{
    cout << "No elements in the database" << endl;
}
else 
{
    cout << endl;
    for (unsigned long i=0;i<database_length;i++) 
    {
        cout << "Name: " << Op[i].Name <<endl;
        cout << "Number of Pins: " << Op[i].PinCount << endl;
        cout << "Slew Rate: " << Op[i].SlewRate << endl;
        cout << endl;
    }
}
} 
```

我得到的错误是：

```
error C2511: 'void OpAmps::Enter(OpAmps &,unsigned long &)' : overloaded member     function not found in 'OpAmps'

see declaration of 'OpAmps'

error C2511: 'void OpAmps::Save(const OpAmps *,unsigned long)' : overloaded member function not found in 'OpAmps'

see declaration of 'OpAmps'

error C2511: 'void OpAmps::Load(OpAmps *,unsigned long &)' : overloaded member function not found in 'OpAmps'

see declaration of 'OpAmps'

error C2511: 'void OpAmps::Sort(OpAmps *,unsigned long)' : overloaded member function not found in 'OpAmps'

see declaration of 'OpAmps'

error C2511: 'void OpAmps::Display(const OpAmps *,unsigned long)' : overloaded member function not found in 'OpAmps'

see declaration of 'OpAmps' 
```

任何帮助都会很棒！谢谢xx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:51:27.910

您使用一个签名声明了函数，例如：

```
void Enter(); 
```

但后来你用另一个实现了它们：

```
void OpAmps::Enter(OpAmps& Op, unsigned long& database_length) 
```

函数签名必须在声明和定义之间匹配。您可以实现多个名称相同但签名不同的函数，这称为“重载”，但在这种情况下，您提供的重载是您从不声明的，并声明您从未实现的函数。

虽然我不明白为什么你需要函数参数开始。这些函数看起来像是要在调用它们的 OpAmps 对象上工作。那么为什么要传递运算放大器作为参数呢？您确定您不是要处理该`this`对象吗？`this`是指向调用成员函数的对象的指针。例如：

```
cin >> this->Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:51:52.777

您将函数声明为不带参数：

```
void Enter();
void Save();
void Load();
void Sort();
void Display(); 
```

但是然后您将它们定义为接受参数：

```
void OpAmps::Enter(OpAmps& Op, unsigned long& database_length)
{
     ...
}

void OpAmps::Save(const OpAmps* Op, unsigned long database_length)
{
     ...
} 
```

等等。编译器无法将这些定义与任何声明相匹配，因此它会发出这些错误消息。

要解决此问题，请按如下方式更改您的类定义：

```
class OpAmps
{
private:
    string Name;
    unsigned int PinCount;
    double SlewRate;
public:
    void Enter(OpAmps& Op, unsigned long& database_length);
    void Save(OpAmps const* Op, unsigned long& database_length);
    void Load(OpAmps* Op, unsigned long& database_length);
    void Sort(OpAmps* Op, unsigned long& database_length);
    void Display(OpAmps const* Op, unsigned long& database_length);

    friend bool SortName(const OpAmps &, const OpAmps &);
    friend bool SortSlewRate(const OpAmps &, const OpAmps &);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:52:46.037

你原型这个函数：

```
void Enter(); 
```

然后你将它实现为：

```
void OpAmps::Enter(OpAmps& Op, unsigned long& database_length) 
```

这一点都没有意义。

要么更改签名，要么更改实现，我认为在这种情况下你最好更改签名。

但即便如此，我认为`OpAmps&`实现中的第一个参数是不必要的。你应该使用`this`. 所以把方法原型改成：

```
void Enter(unsigned long&); 
```

并实施成：

```
void OpAmps::Enter(unsigned long& database_length) 
```

并使用关键字更改对不必要`op`参数的任何使用。`this`对于`OpAmps::?`您没有正确原型化/实现的任何功能也是如此。

这样做的原因是因为您声明的函数是非静态成员函数，这意味着它们始终属于一个实例。您不需要像在 C 中那样将实例传递给方法，而是可以使用`this`关键字调用该方法的实例。`this`关键字是指向调用该方法的实例的常量指针（在您的情况下，这将是指向 的指针）`Menu`。

因此，您可以使用：

```
cin >> this->Name; 
```

代替：

```
cin >> op.Name; 
```

但是，在这种情况下，没有必要使用`this`关键字。C++ 将自行判断字段/函数是否是实例绑定的：

```
cin >> Name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T14:51:37.853

函数类声明的签名与实现版本的签名不同。它们必须相同。所以改变：

```
void Enter(); 
```

到

```
Enter(OpAmps &, unsigned long &); 
```

以及您执行此操作的所有其他实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T14:54:28.743

用以下内容替换您的方法原型：

```
void Enter(OpAmps& Op, unsigned long& database_length);
  void Save(OpAmps& Op, unsigned long& database_length);
  void Load(OpAmps& Op, unsigned long& database_length);
  void Sort(OpAmps& Op, unsigned long& database_length);
  void Display(OpAmps& Op, unsigned long& database_length); 
```

# python - 在 python 中打印希伯来语在 Eclipse 中有效，但在 shell 中无效

> ID：14663059
> 
> 赞同：0
> 
> 时间：2013-02-02T14:48:32.740
> 
> 标签：python, unicode, character-encoding

我有一些代码可以将希伯来文本文件的 Unicode 表示形式转换为希伯来语以供显示

例如：

```
f = open(sys.argv[1])
for line in f:
    print eval('u"' + line +'"') 
```

当我在 PyDev (eclipse) 中运行它时，这很有趣，但是当我从命令行运行它时，我得到

```
UnicodeEncodeError: 'latin-1' codec can't encode characters in position 9-10: ordinal not in range(256) 
```

输入文件中的示例行是：

```
\u05d9\u05d5\u05dd 
```

问题是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T14:55:08.730

不要使用`eval()`；而是使用`unicode_escape`编解码器来解释该数据：

```
for line in f:
    line = line.decode('unicode_escape') 
```

`unicode_escape`编码解释`\uabcd`字符序列的方式与 Python 在源代码中解析 unicode 文字时的方式相同：

```
>>> '\u05d9\u05d5\u05dd'.decode('unicode_escape')
u'\u05d9\u05d5\u05dd' 
```

您看到的异常*不是*由`eval()`语句引起的；我怀疑它是由尝试打印结果引起的。Python 将尝试`unicode`自动对值进行编码，并检测当前终端使用的编码。

您的 Eclipse 输出窗口使用与终端不同的编码；如果后者配置为支持 Latin-1，那么您将看到确切的异常，因为 Python 尝试将希伯来语代码点编码为不支持这些的编码：

```
>>> u'\u05d9\u05d5\u05dd'.encode('latin1')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'latin-1' codec can't encode characters in position 0-2: ordinal not in range(256) 
```

解决方案是重新配置您的终端（UTF-8 将是一个不错的选择），或者不打印`unicode`具有无法编码为 Latin-1 的代码点的值。

如果要将 Python 的输出重定向到文件，则 Python 无法自动确定输出编码。在这种情况下，您可以使用[`PYTHONIOENCODING`环境变量](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONIOENCODING)来告诉 Python 标准 I/O 使用什么编码：

```
PYTHONIOENCODING=utf-8 python yourscript.py > outputfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:28:20.093

谢谢，这解决了我的问题。

```
line.decode('unicode_escape') 
```

成功了。

跟进 - 这现在有效，但如果我尝试将输出发送到文件：

```
python myScript.py > textfile.txt 
```

文件本身有错误：

```
'ascii' codec can't encode characters in position 42-44: ordinal not in range(128) 
```

# html - 包含 PDF 的 iFrame 的布局问题

> ID：14663065
> 
> 赞同：2
> 
> 时间：2013-02-02T14:49:01.447
> 
> 标签：html, css, iframe

我正在将 MVC 4 与 Bootstrap 一起用于我正在开发的网站。相当简单的布局，我有一个保持在顶部的引导导航栏（navbar-fixed-top），然后我有一个页面标题，一个具有绝对位置和高度的 div 就在菜单下方。

然后对于页面内容，我有一个 div，再次使用绝对 pos，它的顶部设置为它从页面标题下方开始。正文上的溢出设置为无，并在页面内容上设置为自动。

```
body, html
{
    height: 100%;
    overflow: hidden;
}

.PageTitle
{
    position: absolute;
    top: 40px;
    left: 0;
    right: 0;
    height: 60px;
    color: #fdf4f4;
    background-color: #4266cd;
    border-color: #bce8f1;
}

.Content
{
    overflow: auto;
    position: absolute;
    top: 100px;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

这适用于其他页面，但我需要显示每月传单 (PDF) 并希望它填充内容区域并允许用户滚动它。问题当然是，如果我添加一个高度为 100% 的 iFrame，它会占用内容 div（它是父级）的高度，这就是浏览器窗口的高度。如果我能告诉它将高度设置为 100% - 100px，那就太酷了。

我曾尝试使用 jQuery 更改大小，但没有任何成功。

有人有一些想法可以帮助我吗？

谢谢。

**更新：** 我阅读了 Akshay Khandelwal 的帖子，并创建了一个简单的 HTML 页面，其中包含我想要做的基础知识。在重现我之前遇到的问题的过程中，我可能已经找到了解决方案。看起来下面的代码有效。不确定这是否是一个好方法。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>PDF View Test</title>

        <style>
            body
            {
                margin: 0;
                overflow: hidden;
            }

            .NavBarTop
            {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                height: 40px;
                margin-bottom: 0;
                background: #778899;
            }

            .PageTitle
            {
                position: absolute;
                top: 40px;
                left: 0;
                right: 0;
                height: 60px;
                color: #fdf4f4;
                background-color: #4266cd;
                border-color: #bce8f1;
            }

            .Content
            {
                overflow: hidden;
                position: absolute;
                top: 100px;
                left: 0;
                right: 0;
                bottom: 0;
            }

            h3
            {
                color: rgb(253, 244, 244);
                display: block;
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 25px;
                font-weight: bold;
                height: 40px;
                line-height: 40px;
                margin-bottom: 10px;
                margin-left: 0;
                margin-right: 0;
                margin-top: 10px;
                text-align: center;
            }

            h4
            {
                color: rgb(253, 244, 244);
                display: block;
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 20px;
                font-weight: bold;
                height: 20px;
                line-height: 20px;
                margin-bottom: 5px;
                margin-left: 0;
                margin-right: 0;
                margin-top: 10px;
                text-align: center;
            }

            iframe
            {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div class="NavBarTop">
            <h4>This is the menu bar.</h4>
        </div>

        <div class="PageTitle">
            <h3>The Page Title</h3>
        </div>

        <div class="Content">
            <iframe src="http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/content-server/pdfs/adobe-ebook-platform-whitepaper.pdf"/>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:00:24.233

我找到了我所问问题的答案，尽管我不相信这是最好的方法。为了完整起见，这里的 HTML 将为您提供嵌入在网页中的 PDF，其滚动条仅滚动 PDF 文档，而不滚动页面标题和菜单。

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>PDF View Test</title>

        <style>
            body
            {
                margin: 0;
                overflow: hidden;
            }

            .NavBarTop
            {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                height: 40px;
                margin-bottom: 0;
                background: #778899;
            }

            .PageTitle
            {
                position: absolute;
                top: 40px;
                left: 0;
                right: 0;
                height: 60px;
                color: #fdf4f4;
                background-color: #4266cd;
                border-color: #bce8f1;
            }

            .Content
            {
                overflow: hidden;
                position: absolute;
                top: 100px;
                left: 0;
                right: 0;
                bottom: 0;
            }

            h3
            {
                color: rgb(253, 244, 244);
                display: block;
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 25px;
                font-weight: bold;
                height: 40px;
                line-height: 40px;
                margin-bottom: 10px;
                margin-left: 0;
                margin-right: 0;
                margin-top: 10px;
                text-align: center;
            }

            h4
            {
                color: rgb(253, 244, 244);
                display: block;
                font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
                font-size: 20px;
                font-weight: bold;
                height: 20px;
                line-height: 20px;
                margin-bottom: 5px;
                margin-left: 0;
                margin-right: 0;
                margin-top: 10px;
                text-align: center;
            }

            iframe
            {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <div class="NavBarTop">
            <h4>This is the menu bar.</h4>
        </div>

        <div class="PageTitle">
            <h3>The Page Title</h3>
        </div>

        <div class="Content">
            <iframe src="http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/content-server/pdfs/adobe-ebook-platform-whitepaper.pdf"/>
        </div>
    </body>
</html> 
```

# php - 使用简单的 html dom 解析外部 html 出现致命错误

> ID：14663066
> 
> 赞同：0
> 
> 时间：2013-02-02T14:49:01.197
> 
> 标签：php, simple-html-dom

我正在尝试获取 TNT 包裹的最新状态（在本例中为“发货状况良好”），但无法使用简单的 html dom 解析外部 html。出现*致命错误：在第 6 行调用非对象上的成员函数 find()*

```
<?php 
include("simple_html_dom.php");

$html = file_get_html('http://www.tnt.com/webtracker/tracking.do?&cons=323626321');

$e=$html->find('table.appTable', 1)->find('tr[valign=top]', 0)->find('td', 3);

echo $e;
?> 
```

[甚至来自http://simplehtmldom.sourceforge.net/index.htm](http://simplehtmldom.sourceforge.net/index.htm)的示例代码也给了我同样的错误

```
<?php
$html = file_get_html('http://www.google.com/');
foreach($html->find('img') as $element) 
   echo $element->src . '<br>';
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:53:58.343

```
 file_get_html 
```

利用

```
 file_get_contents 
```

从 url 读取 html 页面。您需要确保此功能未被阻止。在你的情况下，它似乎是

```
 allow_url_fopen = Off 
```

在 php.ini 中阻止了它。

但无论如何，最好使用

```
 if ($html) 
```

在做任何事情之前确保一切顺利。

# .htaccess - 在共享主机上安装 CakePHP 时链接断开

> ID：14663068
> 
> 赞同：0
> 
> 时间：2013-02-02T14:49:07.763
> 
> 标签：.htaccess, cakephp, routing, shared-hosting, addon-domain

我已经在共享主机上设置了 CakePHP，在一个子目录 (cakeDomain) 中。在根目录 (mainDomain) 中使用 htaccess，我将另一个域指向它 (cakeDomain)，如下所示：

```
# /.htaccess
# cakeDomain redirect rules
RedirectMatch 301 ^/cakeDomain/$ http://cakeDomain.com/
# handle domain root and skip subfolders
RewriteCond %{HTTP_HOST} cakeDomain.com
RewriteCond %{REQUEST_URI} !^/cakeDomain/
RewriteCond %{REQUEST_URI} \..+$
RewriteRule ^(.*)$ cakeDomain/$1 [L]

# add trailing slash to subfolders (eg abc to: abc/)
RewriteCond %{HTTP_HOST} cakeDomain.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} [^/]$
RewriteRule ^(.*)$ $1/ [L,R=301]

# handle files in subfolders
RewriteCond %{HTTP_HOST} cakeDomain.com
RewriteCond %{REQUEST_URI} !^/cakeDomain/
RewriteRule ^(.*)$ cakeDomain/$1/ [L]

RewriteCond %{HTTP_HOST} www.mainDomain.com/cakeDomain/
RewriteRule %{HTTP_HOST} www.cakeDomain.com [L] 
```

访问 mainDomain.com/cakeDomain 会正确地将您重定向到 cakeDomain.com

CakePHP 的文件是这样存储的：

```
/cakeDomain/app/...
/cakeDomain/lib/...
/cakeDomain/...
etc. 
```

访问 cakeDomain.com 会显示正确的首页，但所有链接的前面都有安装目录：

```
cakeDomain.com/cakeDomain/controller/action/param1 
```

代替：

```
cakeDomain.com/controller/action/param1 
```

任何想法如何解决这一问题？

请注意，根据我的多次搜索，似乎很多人立即建议使用虚拟主机。这不是一个选项；我的主机*是*虚拟主机。我认为这个解决方案需要 htaccess 和/或路由技巧。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:18:10.407

基本上，您将网站 B（Cake）放在网站 A（主域）的公共网络目录中。

我真的不鼓励您这样做，因为这样所有的“私有”CakePHP 目录也都在您的公共 Web 目录中（例如 cakeDomain/app/tmp/logs/error.log）。请正确检查这些位置是否正确固定

您是否有权访问公共网络脚“外部”的目录？

话虽如此，这可能会有所帮助： [http ://cookingwithcakephp.blogspot.nl/2008/04/installing-cakephp-into-subdirectory.html](http://cookingwithcakephp.blogspot.nl/2008/04/installing-cakephp-into-subdirectory.html)

# spreadsheet - 如何在 Google 电子表格中反转 vlookup？

> ID：14663070
> 
> 赞同：4
> 
> 时间：2013-02-02T14:49:08.823
> 
> 标签：spreadsheet, google-drive-api

我有一个包含键值对、A 中的键和 B 中的值的表：

```
 A   B
  +-------
1 | a   x
2 | b   y
3 | c   z 
```

可以使用以下函数获取键的值`vlookup`：

```
=VLOOKUP("a";A1:B3;2;FALSE) 
```

但是如何执行反向查找呢？如何获取值的键？

[这](https://docs.google.com/spreadsheet/ccc?key=0AotCeBHq3wFtdENHOG8tMjJyTFZMdDl0WDFiUWh4MUE&usp=sharing)是一个例子。

*更新：我添加了狼的答案。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T09:00:58.903

鉴于您的示例，请尝试以下操作：

```
=index(A:A,match(C1,B:B,0)) 
```

它是在[Google 产品论坛上](http://productforums.google.com/forum/#!topic/docs/hKbBWDZmhRo)找到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-04T17:22:42.570

Ben Collins 的这篇博文有一个完全符合您需要的答案。基本上，您可以强制等式向后读取范围，并*相信*您的右列是第一个，而您的左列是第二个。

这就是您的公式的样子：

```
=VLOOKUP("a";{B$1:B$3, A$1:A$3};2;FALSE) 
```

[此处有更多详细信息的博客文章](http://www.benlcollins.com/formula-examples/vlookup-left/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-05T19:56:19.713

Vlookup 是一种查找函数，它与 Excel 的 INDEX-MATCH 类似，在一个表的最左侧列中搜索一个值，然后从其右侧的列中检索信息。与 INDEX-MATCH excel 函数相比，VLOOKUP 通过指定在找不到所搜索的键时应该发生的情况来提供对检索到的信息的更多控制 - 不返回任何内容（默认值），按照定义插入在下方或上方找到的新数据另一个搜索词，或者在搜索正数时只需输入一个“零”值 答案：

反向 Vlookup Tableau 函数 等于 = Tableau("vlookup", "您要从中查找的列 A 的行", "具有进入表的值的列/工作表") 几乎等于 -1 * Tableau("vlookup"... ) = 真。

拥有正确的公式和语法以获得所需的结果非常重要，因此此函数称为“反向 Vlookup”。
[这](https://www.exceltrick.com/formulas_macros/vlookup-in-excel/)是一篇关于 Excel Vlookups 的有用文章，在您开始之前阅读

# python - 将数组从 MATLAB 转换为 numpy

> ID：14663071
> 
> 赞同：1
> 
> 时间：2013-02-02T14:49:16.767
> 
> 标签：python, arrays, matlab, numpy

我正在定义一个由两个组成的数组，两端各有一个。在 MATLAB 中，这可以通过

```
x = [1 2*ones(1,3) 1] 
```

然而，在 Python 中，numpy 给出了完全不同的东西：

```
import numpy
numpy.array([[1],2*numpy.ones(3),[1]]) 
```

在 Python 中执行此 MATLAB 命令的最有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:03:58.787

```
In [33]: import numpy as np

In [34]: np.r_[1, 2*np.ones(3), 1]
Out[34]: array([ 1.,  2.,  2.,  2.,  1.]) 
```

* * *

或者，您可以使用`hstack`：

```
In [42]: np.hstack(([1], 2*np.ones(3), [1]))
Out[42]: array([ 1.,  2.,  2.,  2.,  1.]) 
```

* * *

```
In [45]: %timeit np.r_[1, 2*np.ones(300), 1]
10000 loops, best of 3: 27.5 us per loop

In [46]: %timeit np.hstack(([1], 2*np.ones(300), [1]))
10000 loops, best of 3: 26.4 us per loop

In [48]: %timeit np.append([1],np.append(2*np.ones(300)[:],[1]))
10000 loops, best of 3: 28.2 us per loop 
```

`r_`感谢 DSM 指出从一开始就预先分配正确大小的数组，比追加、使用或`hstack`在较小的数组上要快得多：

```
In [49]: %timeit a = 2*np.ones(300+2); a[0] = 1; a[-1] = 1
100000 loops, best of 3: 6.79 us per loop

In [50]: %timeit a = np.empty(300+2); a.fill(2); a[0] = 1; a[-1] = 1
1000000 loops, best of 3: 1.73 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:57:46.440

使用 numpy.ones 而不仅仅是一个：

```
numpy.array([[1],2*numpy.ones(3),[1]]) 
```

# c# - 带有 Ajax 的页面将窗口标题刷新为 RGICLLayout3

> ID：14663075
> 
> 赞同：0
> 
> 时间：2013-02-02T14:49:33.877
> 
> 标签：c#, ajax, jquery

我不知道这是否是典型的、与 SharePoint 相关的或其他东西，但我发现在页面上使用一些简单的 Ajax，在代码完成执行后，页面/窗口标题为“RGICLLayout3”。

即我有一个标题为“我的网站- 我的页面”的.aspx 页面，在那里我有一些控件，其中一个使用JavaScript/Ajax 进行延迟加载。当该控件完成加载时，窗口/页面标题从“我的网站 - 我的页面”更改为“RGICLLayout3”。

有人见过这个吗？谷歌搜索“RGICLLayout3”显示零结果。

QMK凯文

**[更新]**
这里有一些通用代码来解释我在做什么：

```
<asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional" OnPreRender="up_PreRender">
<ContentTemplate>
    ...
</ContentTemplate>
</asp:UpdatePanel>
<asp:UpdateProgress ID="updProgressTab" runat="server" AssociatedUpdatePanelID="up"  >
 <ProgressTemplate>
    ...
 </ProgressTemplate>
</asp:UpdateProgress>
<script language="javascript" type="text/javascript">
function pageLoad(sender, e) {
    if (!e.get_isPartialLoad()) {
        __doPostBack('<%= up.ClientID %>', 'aaaa');
    }
}
</script> 
```

然后在代码文件中

```
 protected void up_PreRender(object sender, EventArgs e)
    {
        if (Request["__EVENTTARGET"] == up.ClientID && Request.Form["__EVENTARGUMENT"] == "aaaa")
        {
            System.Threading.Thread.Sleep(1000);
            upPanel.Visible = true;
            updProgressTab.Visible = false;
        }
    } 
```

这主要是我需要的，但正如我所说，一旦 JavaScript 强制回发完成，页面标题就会更改。希望这能让我的情况更清楚，但如果需要，请进一步澄清。

# c# - InstanceContextMode.Single 中的许多回调

> ID：14663084
> 
> 赞同：1
> 
> 时间：2013-02-02T14:50:25.843
> 
> 标签：c#, wcf, .net-4.0, callback, wsdualhttpbinding

我将服务`InstanceContextMode`设置为`Single`模式。

我正在与许多客户端连接到该服务，获取它的回调通道`OperationContext.Current.GetCallbackChannel<IMyService>()`并尝试向每个连接的客户端发送一些消息，但我只在一个客户端中收到两次相同的消息（这个稍后连接）

如果我拥有`InstanceContexMode` `PerSession`一切都很好。

我错过了什么？因为默认我想这是可能的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:20:03.847

WSDualHttpBinding（又名“双工”绑定）需要会话才能正常工作。该会话用于跟踪每个客户端的回调通道，IIRC。

# .htaccess - 为什么 index.php 出现在 url 中，当网站第一次加载时（yii）

> ID：14663085
> 
> 赞同：0
> 
> 时间：2013-02-02T14:50:28.073
> 
> 标签：.htaccess, url, yii, rewrite

我已经使用我的 htaccess 文件和 yii 规则从我的 url 中隐藏了 index.php，除了第一次加载网站时，它一切正常，可以在 url 中看到 index.php。谁能解释为什么会发生这种情况？看看 www.whitecollarboxinglondon.com

谢谢。

凯伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:11:40.153

在您的 URL 管理器中尝试以下配置：

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    ..............................
    ..............................
 ) 
```

# android - 在新任务中创建新实例时销毁另一个任务中活动的旧实例

> ID：14663090
> 
> 赞同：1
> 
> 时间：2013-02-02T14:51:15.000
> 
> 标签：android, android-activity

我有 3 个活动 A、B 和 C。流程是这样的：

`A->B->Home->C->B`.

我`singleTask`在活动 B 上使用过。但是，这会产生副作用，当我这样做时`A->B->Home->recent`，它会返回 A 而不是 B。必须将活动 B 置于前台。

还有什么方法可以在创建新 B 时销毁旧 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:05:08.247

你可以打电话给`finish()`你的`onPause`回调。但是您应该处理旋转，否则您的应用程序将在该事件中退出。

# javascript - 有一个更好的方法来隐藏和显示带有收音机检查的 div 吗？

> ID：14663092
> 
> 赞同：0
> 
> 时间：2013-02-02T14:51:30.970
> 
> 标签：javascript, jquery, joomla, input, radio

我创建了这段代码几天，但我相信可以改进它，有人可以帮助我创建一个更聪明的方法吗？

```
// Hide registered or customized field if not checked.
function checkUserType(value) {
  if (value == 2) {
    $('#registered').hide();
    $('#customized').show();
  } else if (value == 1) {
    $('#registered').show();
    $('#customized').hide();
  }
}

checkUserType($('input:radio[name="jform[place_type]"]:checked').val());

$('#jform_place_type').on('click', function () {
  checkUserType($('input:radio[name="jform[place_type]"]:checked').val());
}); 
```

演示：http: [//jsbin.com/emisat/3](http://jsbin.com/emisat/3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:12:20.967

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

```
 $('#jform_place_type').on('click', function () {
//show is true if the val() of your jquery selector equals 1
// false if it's not
      var show= ($('input:radio[name="jform[place_type]"]:checked')
        .val()==1);
//set both divs to visible invisible / show !show(=not show)
// (not show) means that if show=true then !show would be false
      $('#registered').toggle(show);
      $('#customized').toggle(!show);
    }); 
```

如果您多次需要选择器然后缓存它，我认为它被称为对象缓存，正如 Claudio 已经提到的，这就是为什么您会看到很多：

```
$this=$(this);
$myDivs=$("some selector"); 
```

保存 jquery 函数（jquery 对象）结果的变量的约定是它们以 $ 开头，但由于它只是一个变量名，您可以随意调用它，以下内容也可以：

```
me=$(this);
myDivs=$("some selector"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:54:33.560

```
// Hide registered or customized field if not checked.
function checkUserType(value) {

}

var t = function () {
  var value = $('input:radio[name="jform[place_type]"]:checked').val();
  if (value == 2) {
    $('#registered').hide();
    $('#customized').show();
  } else if (value == 1) {
    $('#registered').show();
    $('#customized').hide();
  }
};

$('#jform_place_type').on('click', t); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:55:48.860

您可以通过存储 DOM 元素并缓存其余元素来改进 Jquery（用于性能）。我猜这是你能达到的最大的东西。

```
function checkUserType(value) {
  var r = $("#registered");
  var c = $("#customized");
  if (value == 2) {
    r.hide();
    c.show();
  } else if (value == 1) {
    r.show();
    c.hide();
  }
}

var func = function () {
  checkUserType($('input:radio[name="jform[place_type]"]:checked').val());
};

$('#jform_place_type').on('click', func); 
```

如需进一步阅读，请检查此[JQuery 性能](http://www.artzstudio.com/2009/04/jquery-performance-rules/)

特别是阅读文件的第三段

缓存 jQuery 对象

养成将 jQuery 对象保存到变量的习惯（很像我们上面的示例）。例如，从不 (eeeehhhhver) 这样做：

```
$('#traffic_light input.on').bind('click', function(){...});
$('#traffic_light input.on').css('border', '3px dashed yellow');
$('#traffic_light input.on').css('background-color', 'orange');
$('#traffic_light input.on').fadeIn('slow'); 
```

相反，首先将对象保存到局部变量，然后继续您的操作：

```
var $active_light = $('#traffic_light input.on');
$active_light.bind('click', function(){...});
$active_light.css('border', '3px dashed yellow');
$active_light.css('background-color', 'orange');
$active_light.fadeIn('slow'); 
```

提示：因为我们想记住我们的局部变量是一个 jQuery 包装集，所以我们使用 $ 作为前缀。请记住，切勿在您的应用程序中多次重复 jQuery 选择操作。

# python - Django 检查对象是否有结果

> ID：14663099
> 
> 赞同：0
> 
> 时间：2013-02-02T14:52:26.803
> 
> 标签：python, django

我想检查一个对象是否在我的views.py中返回一个值，这是我的代码......

```
 city = City.objects.get(name=form.cleaned_data['autocompleteCity']) 
```

所以，我在想这样的事情......

```
 city = City.objects.get(name=form.cleaned_data['autocompleteCity'])

  if city:
     #we have results do something with city object
   else: 
     #no results display error and stop processing form. 
```

解决此问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:05:02.380

如[文档所述](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get)，`.get()`将*始终*返回*单个*模型，或者将引发两个异常之一。只需[将调用放在一个`try`块中，捕获相关异常，并适当处理](http://docs.python.org/2/tutorial/errors.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:15:26.847

你也可以试试：

```
city = City.objects.filter(name=form.cleaned_data['autocompleteCity'])

if city.count():
   # if you are expecting only one record to be returned, you can access the first record
   # Else you will have to iterate through the result set returned
   print city[0]         
else:
   #no records present
   pass 
```

# wpf - 具有动态列和绑定的 datagridcheckboxcolumn...

> ID：14663100
> 
> 赞同：2
> 
> 时间：2013-02-02T14:52:34.837
> 
> 标签：wpf, binding, checkbox, auto-generate, datagridtemplatecolumn

在过去的几个月里，我一直在阅读有关 StackOverflow 的问题、答案和建议。我是 C#、.Net、WPF 和 MVVM 的初学者。我正在为朋友的酒店开发 PMS（物业管理系统）。

我经常被一些问题困住好几天。这么多要学！！

无论如何..这是一个很烦人的问题，我只是想我终于直接征求意见了......

我有一个带有一个冻结列的 DataGrid，其中包含一个便利设施（文本）列表。以下列的标题包含房间的名称（或者更确切地说，房间类型）。有些房间类型有空调，有些没有，有些有电视，有些没有……这个数据网格应该用复选框填充，以允许旅馆经理指示哪些房间类型拥有哪些设施。

我有一个类，我想将它用于 itemssource 的绑定 observable 集合。

```
public class RoomTypesAmenityItem 
{
    public string AmenityName { get; set; }
    public IList<RoomTypeItem> RoomTypeList { get; set; }
    public IList<bool> AmenitiesCheckList { get; set; }

    public RoomTypesAmenityItem(string name, IList<RoomTypeItem> list, IList<bool> checklist)
    {
        AmenityName = name;
        RoomTypeList = list;
        AmenitiesCheckList = checklist;
    }
} 
```

带有布尔值的列表将用于设置复选框的 IsChecked 值。RoomTypeItem 对象的列表应该有助于更快/更轻松地识别已选中/未选中哪个对象的复选框。（我想我会使用它，所以我已经把它放在那里了......）

现在，我不知道如何进行。我正在考虑**手动在 XAML 中添加冻结列。然后自动生成其他列**，使用数据模板或使用 IMultiValueConverter 设置 IsChecked 值（传递列的索引和当前行的对象）。我也考虑过**不自动生成任何东西，而只是手动添加列**..但是我需要一个可以复制的模板列，它会使用类似 string.Format(AmenitiesCheckList[{0}], columnIndex 的东西设置绑定) ...

这些是我的想法..但我不知道如何真正让一个工作。这在我的脑海里都是一个巨大的混乱。误解，我认为我理解但显然没有理解的东西，我还没有学到的东西，......

如果有人清楚地了解我的需求，可以帮助我提供一些准确的建议或好的代码。我将非常感激！我以前从未寻求过帮助。指向体面的文档的指针，关于学习/阅读什么的提示，以便自己能够做到这一点.. 欢迎大家。但是我有点急于快速完成这个看起来很简单的小屏幕......所以代码会很棒！

对不起，很长的消息。

让我知道是否需要更多信息..？

（关于单击复选框时如何处理更改..我想这是另一个主题..但如果您有建议已经采用可能的解决方案，我将不胜感激..）

# gwt - 将小部件拖放到 AbsolutePanel gwt dnd 之外

> ID：14663103
> 
> 赞同：0
> 
> 时间：2013-02-02T14:53:11.220
> 
> 标签：gwt, drag-and-drop

我正在尝试将可拖动的小部件从边界面板（AbsolutePanel）中删除。在我的情况下，可拖动的小部件是一个图像。我想放下它，这样只有一部分图像可见，但是当我放下它时，以及绝对面板之外的一些图像部分，它会自动下降到绝对面板内。我试过 ：

dragController.setBehaviorConstrainedToBoundaryPanel(false);

并认为这意味着我可以将它放在任何我想要的地方，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:10:59.977

和工作解决方案:) 这是我的代码：

```
public class myEntripointClass implement EntryPOint{
    AbsolutePanel droper;
    public void onModuleLoad() {
        Panel main = new AbsolutePanel();
        droper = new AbsolutePanel();
        droper.setHeight("300px");
        droper.setWidth("500px");
        main.add(droper);
        content=new AbsolutePanel();
        bt = new Button("Drag and drop it");
        content.add(bt);
        lb = new Label("Label drag and drop");
        content.add(lb);            
        main.add(content);
        manageDnD();
        RootPanel.get().add(main);
    }

    private void manageDnD() {
        PickupDragController dragController = new PickupDragController(
                (AbsolutePanel) content, true);
        dragController.makeDraggable(bt);
        dragController.makeDraggable(lb);
        dragController.addDragHandler(new DragHandler() {

            @Override
            public void onPreviewDragStart(DragStartEvent event)
                    throws VetoDragException {}

            @Override
            public void onPreviewDragEnd(DragEndEvent event) throws VetoDragException {}

            @Override
            public void onDragStart(DragStartEvent event) { 
            }
            @Override
            public void onDragEnd(DragEndEvent event) {
                // TODO Auto-generated method stub
                DragContext context = event.getContext();
                int x=context.mouseX;
                int y= context.mouseY;
                droper.add(context.selectedWidgets.get(0),x,y);
            }
        });
        NameDropController dropController = new NameDropController(droper);
        dragController.registerDropController(dropController);
        dragController.setBehaviorDragProxy(true);
    } 
```

我的 DropController 类是：

```
public class NameDropController extends AbstractDropController{
    public NameDropController(Widget dropTarget) {
        super(dropTarget);
    }
    @Override
    public void onDrop(DragContext context) {
        int x=getDiff(getDropTarget().getAbsoluteLeft(), context.mouseX);
        int y=getDiff(getDropTarget().getAbsoluteTop(), context.mouseY);
        ((AbsolutePanel)getDropTarget()).add(context.selectedWidgets.get(0),x,y);
        System.out.print("("+context.mouseX+"::,::"+context.mouseY+")");
      }

    @Override
    public void onMove(DragContext context){
    }

    private int getDiff(int val1,int val2){
        return Math.abs(val1-val2);
    }
} 
```

# phpstorm - PhpStorm 没有启动

> ID：14663104
> 
> 赞同：11
> 
> 时间：2013-02-02T14:53:12.980
> 
> 标签：phpstorm

我刚刚在我非常新鲜的 ubuntu 上下载了 PhpStorm 5。在第一次启动时，我安装了几个插件。现在 - 在安装这些插件之后 - PhpStorm 不再启动。没有启动画面出现。终端上没有写入错误：

```
gue@ubuntu:~$ phpstorm
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
gue@ubuntu:~$ 
```

我该怎么处理那个喝醉的水手？我在我的主目录中找不到任何日志文件，也没有配置文件/目录。

因为我习惯了 Eclipse，所以我不知道在哪里可以找到这个 IntelliJ 派生的踪迹......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T15:45:03.500

某些插件可能会导致问题并阻止IDE启动，如果发生这种情况，您应该手动删除包含插件的目录。此目录的位置取决于系统和产品，[详细信息可在 FAQ 中找到](http://devnet.jetbrains.com/docs/DOC-181)。

对于 Linux 上的 PhpStorm，它将是`~/.WebIde50/config/plugins`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-04T09:46:20.430

这也发生在我身上，我创建了一个自定义 vmoptions 文件，并输入了错误的值。我通过删除它来修复它`~/.WebIde50/phpstorm.vmoptions`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-31T09:07:15.593

在 linux 中，我通过删除 PhpStorm 的 vmoptions 文件然后再次启动它来修复它：

```
rm  ~/.config/JetBrains/PhpStorm*/phpstorm64.vmoptions 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-12T08:58:35.950

我有同样的问题，我只是通过删除文件 C:\Users\.PhpStorm2016.2 来修复它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-28T06:24:33.333

如果安装了 openjdk 则可能没有打开 phpstorm。

因此，请先删除，然后按照以下链接中给出的步骤进行操作。我以同样的方式解决问题。

wiki.jetbrains.net/intellij/Installing_and_running_PHPStorm_on_Ubuntu

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-19T17:07:24.663

这是您解决此问题的方法：将 C:\Users\USERNAME.PhpStorm2016.3 重命名为其他名称（任何名称，例如 PhpStorm2016.whatever），如果您单击 phpStorm 图标，它将启动程序，然后选择导入设置，然后你很高兴去;）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-23T02:53:22.730

我正在使用 PhpStorm2020.2.1。我提到了[配置目录](https://www.jetbrains.com/help/idea/tuning-the-ide.html?_ga=2.156315643.1385029791.1600828916-374460765.1600828916#plugins-directory)。我访问了该文件夹`%AppData%\JetBrains\PhpStorm2020.2`，将其重命名以防我将来需要一些文件。

瞧！我可以再次启动我的 PhpStorm2020.2.1！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-04T08:10:36.273

我昨天遇到了这个问题，我的操作系统是 Windows 10。phpStorm 突然无法正常工作，当我点击它时什么也没发生。[我刚刚从这个链接（ https://www.oracle.com/java/technologies/javase-downloads.html](https://www.oracle.com/java/technologies/javase-downloads.html) ）下载了 JDK，安装后，我在系统设置中为我的 java 目录设置了环境值。您可以使用此链接设置环境（[https://javatutorial.net/set-java-home-windows-10](https://javatutorial.net/set-java-home-windows-10)）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-19T10:32:18.287

如果您在 Windows 上删除以下目录对我有帮助：

```
C:\Users\<user>\AppData\Roaming\JetBrains\ 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-10T14:22:34.927

对我来说，我必须删除`cache`位于以下位置的 IDE 的所有内容：

```
~/.cache/JetBrains/ 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2021-04-12T13:45:05.907

打开终端 Linux Ubuntu 20.10

1.  `YOU@USER:~$ cd ~/.config`
2.  `YOU@USER:~/.config$ ls`

Obs：找到 >>> **JetBrains** <<< 文件夹，然后将其删除，您的默认应用设置将消失，它会再次打开

3.  `YOU@USER:~/.config$ sudo rm -rf JetBrains/`

4.  打开***PHPSTORM***

# php - 检测到 PHP 会话劫持

> ID：14663109
> 
> 赞同：0
> 
> 时间：2013-02-02T14:53:28.470
> 
> 标签：php, security, session, session-hijacking

我有这个代码：

```
if (isset( $_SESSION['user_agent'] )) {
    if ($_SESSION['user_agent'] != md5( $_SERVER['HTTP_USER_AGENT'] )) {
        die('Session error.');
    }   
} 
```

一切正常。但是每次我登录（每 24 小时一次）时，我都会收到错误消息。用户代理是改变还是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:58:36.487

会话的生命周期有限[http://www.php.net/manual/en/session.configuration.php](http://www.php.net/manual/en/session.configuration.php)通常是几分钟或几个小时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T05:08:37.023

一旦经过身份验证的用户出现，任何能够劫持会话（即通过嗅探未加密的 HTTP）的人都拥有通往王国的钥匙。

`HTTP_USER_AGENT`? 是的，这也是明文发送的，攻击者可以欺骗它。任何窃取/欺骗会话 cookie 的 MitM 应用程序通常也会冒充用户浏览器的用户代理。

这里唯一的解决方案是 HTTPS，多亏了[Let's Encrypt](https://letsencrypt.org) ，它现在是免费的。

# php - 一页中有两个while循环

> ID：14663110
> 
> 赞同：0
> 
> 时间：2013-02-02T14:53:33.697
> 
> 标签：php, loops, while-loop

我可以在一页中有两个条件相同但 if 语句不同的 while 循环吗？

例如：

```
$qtytoAdd = $rec_qty[$mat_key];

while($qtytoAdd > 0){
    if(($remBalance - $qtytoAdd) >= 0) {
    //do something
    $qtytoAdd = 0
    }else{
    //do something
    $qtytoAdd = $qtytoAdd - $remBalance
    }
} 
```

像这样的东西：

```
while($qtytoAdd > 0){
    if(($reqRemBal- $qtytoAdd) >= 0) {
    //do something
    $qtytoAdd = 0
    }else{
    //do something
    $qtytoAdd = $qtytoAdd - $reqRemBal
    }
} 
```

该`$qtytoAdd`变量实际上是在循环之前的开头定义的。我想要做的是同时运行两个while循环`$qtytoAdd`，每个while循环首先具有相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:23:19.573

首先，`$qtytoAdd = 0`您可以简单地使用`break`来完全跳出循环或`continue`跳到循环的下一步，而不是使用破坏循环。

然后你可以用这种方式合并循环： $qtytoAdd = $rec_qty[$mat_key];

```
while($qtytoAdd > 0){
    if (($remBalance - $qtytoAdd) >= 0 || ($reqRemBal- $qtytoAdd) >= 0) {
        // Do something
        break;
    }
    if (($remBalance - $qtytoAdd) < 0) {
        $qtytoAdd = $qtytoAdd - $remBalance
    } elseif (($reqRemBal- $qtytoAdd) < 0) {
        $qtytoAdd = $qtytoAdd - $reqRemBal
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:56:37.090

当然可以，但是如果你每个之后都有一个，然后打破第一个，你要么需要强制休息，要么让`$qtytoAdd != 0`

如果是后者，则会导致第二个循环不被执行。

如果你解释你想要做什么，应该有一个更优雅的方式来做到这一点。

* * *

我认为您实际上正在寻找的是：

```
$qtytoAdd = $rec_qty[$mat_key];

while($qtytoAdd > 0){
    if(($remBalance - $qtytoAdd) >= 0) {
    //do something
    $qtytoAdd = 0
    }else{
    //do something
    $qtytoAdd = $qtytoAdd - $remBalance
    }
    //second block
    if(($reqRemBal- $qtytoAdd) >= 0) {
    //do something
    $qtytoAdd = 0
    }else{
    //do something
    $qtytoAdd = $qtytoAdd - $reqRemBal
    }
} 
```

# android - android中的GregorianCalendar比较，设备与模拟器差异

> ID：14663114
> 
> 赞同：2
> 
> 时间：2013-02-02T14:53:54.477
> 
> 标签：android, calendar

我需要比较一个 android 应用程序中的两个 GregorianCalendar 对象。我试过：

```
myCalendar.compareTo(otherCalendar)

myCalendar.getTimeInMillis() > otherCalendar.getTimeMillis() 
```

在模拟器中，在 ubuntu 64bit 下运行，两者都可以正常工作。然后我在三星galaxy s2设备上尝试了，但没有成功。真实设备上的比较是倒置的，结果越大越小，反之亦然。在两个系统上打印值：

```
Long.toString(myCalendar.getTimeMillis()) 
```

我发现模拟器中的值 1359716008000（我认为这是正确的）对应于实际设备中的 -636369904720。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:26:51.213

只是为了后代，问题是 GregorianCalendar 值本身，我用

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss");
myCalendar.setTime(sdf.parse(myStringDate)); 
```

它只需要一个

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss",Locale.US) 
```

[如此处](http://developer.android.com/reference/java/util/Locale.html#default_locale)所述，模拟器的默认语言环境（可能是美国）与设备（意大利语）不同，所以我认为它在字母中错误地解析了星期几（“EEE”）

# android - 设置背景后ListView不显示onclick颜色

> ID：14663124
> 
> 赞同：1
> 
> 时间：2013-02-02T14:54:54.080
> 
> 标签：android, listview, colors, onclick

我有一个带有适配器的列表视图，它工作正常，但后来我添加了一些代码，因为我希望行是不同的颜色，之后，onclick 颜色不显示。

这是我添加的代码：

```
if (position % 2 == 0)
            vi.findViewById(R.id.parentL).setBackgroundColor(ctx.getResources().getColor(R.color.row1));
        else
            vi.findViewById(R.id.parentL).setBackgroundColor(ctx.getResources().getColor(R.color.row2)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T16:58:54.903

## TL:博士

*   对列表视图项使用选择器
*   您需要将整体列表视图背景设置为透明。

## 指示

首先，您需要将 ListView 设置为透明

在适配器的`onCreate()`方法中，设置：

```
 ((ListView) findViewById(R.id.main_list)).setBackgroundColor(0); 
```

`Adapter`接下来，inside`getView()`包含以下代码

```
if (position%2 == 0) {
    view.setBackgroundResource(R.drawable.selector);
} else {
    view.setBackgroundResource(R.drawable.selector2);
} 
```

selector.xml 在哪里

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="false" android:state_focused="false"
        android:drawable="@color/blue" />
    <item android:state_enabled="false" android:state_focused="true"
        android:drawable="@color/translucent_red" />
    <item android:state_enabled="true" 
     android:state_pressed="true" android:drawable="@color/translucent_red" />
    <item android:state_enabled="true"
     android:state_focused="true" android:drawable="@color/translucent_red" />
    <item
     android:drawable="@color/android:transparent" />
</selector> 
```

和 selector2.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="false" android:state_focused="false"
        android:drawable="@color/green" />
    <item android:state_enabled="false" android:state_focused="true"
        android:drawable="@color/opaque_red" />
    <item android:state_enabled="true" 
     android:state_pressed="true" android:drawable="@color/opaque_red" />
    <item android:state_enabled="true"
     android:state_focused="true" android:drawable="@color/opaque_red" />
    <item
     android:drawable="@color/android:transparent" />
</selector> 
```

不要忘记包含一个colors.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <color name="opaque_red">#f00</color>
   <color name="translucent_red">#80ff0000</color>
   <color name="blue">#00f</color>
   <color name="green">#0f0</color>
</resources> 
```

## 示例项目

[这是我为您配置的示例项目](https://docs.google.com/file/d/0BwoEtwD1VShWT1FmLWhYa3Y5UFk/edit?usp=sharing)的文件。您可能想先做一个项目 > 清洁。

在这个应用程序中可以忽略一些文件，因为我修改了一个现有的样本，它做了一些非常不同的事情。

## 截屏

这是我的示例应用程序的样子

![在此处输入图像描述](../Images/d5699a3bbc5b0991f017ce28d89b5bc0.png) ![在此处输入图像描述](../Images/66ba389f4d7c88b8e2f67a41486629ce.png) ![在此处输入图像描述](../Images/4a5c8565d477170b00bf631654e54015.png)

# xtext - xtext 关键字和终端规则

> ID：14663128
> 
> 赞同：0
> 
> 时间：2013-02-02T14:55:21.353
> 
> 标签：xtext

我不明白关键字（''->单引号）是符号和终端符号（''->单引号）的区别。关键字是一种终端规则文字。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:14:01.430

关键字是一种终端规则文字。例如，org.eclipse.xtext.common.Terminals 中的 ID 规则以关键字开头：终端 ID : '^'? .. ;我从 Xtext 文档中获取这个 pragraf。但是我们定义了终端规则 '' 。我不明白'^'是关键字？另外为什么要使用“”（双引号）作为关键字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:00:44.893

我不太明白你的问题。你指的是什么区别？关键字是终端符号，与终端规则相比，它在生产规则中内联定义，终端规则提供更大的句法灵活性但不能内联定义。

# windows - 无线网卡的mac地址规范是否与无线网卡一致？

> ID：14663131
> 
> 赞同：-1
> 
> 时间：2013-02-02T14:55:41.467
> 
> 标签：windows, networking, wifi, ethernet, mac-address

通过使用 OID_802_3_PERMANENT_ADDRESS，我可以查询以太网卡的 mac 地址。直觉上，我认为应该存在对应的OID_802_11_PERMANENT_ADDRESS。但是，我没有找到。

如果我直接使用OID_802_3_PERMANENT_ADDRESS查询802.11的mac地址，结果似乎是正确的。

所以我的问题是：802.3和802.11的mac地址在各自的规范中是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:03:33.953

尽管由于冲突检测的性质，以太网和无线链路层的媒体访问控制非常不同，但为了简化 Internet 协议，MAC 地址（无论链路层如何）始终是全球唯一的 48 位数字。这对于以太网和 802.11 来说意义重大，因为路由器通常将设备聚合到单个子网上。

因此，要回答您的问题，MAC 地址将不一样。

# php - 在 wp_user 表中添加新列

> ID：14663137
> 
> 赞同：2
> 
> 时间：2013-02-02T14:56:10.463
> 
> 标签：php, wordpress

在表 WP_USER 中添加新列是否很好 - 或者 - 我应该在 metauser 表中添加内容吗？我在质疑这个，因为有一个 WP 功能

```
/* Get full WP_User object instance. */ 
$user = new WP_User ($user->ID); 
```

在 WP_USER 中添加列后，这是否也有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:27:31.603

如果您希望将自定义字段添加到您的用户，请使用 usermeta 或创建一个以用户名作为主键的新表。这将使您在更新方面成为未来的证明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-07T19:21:45.953

问问自己：我要存储的数据是否与用户表条目具有 1-1 关系？如果是这样，请将其放入由用户 ID 索引的单独表中（称为 [prefix]_user_auxdata 或类似名称），并在此处添加其他 1-1 数据，以防再次出现需要。如果没有，请将其作为键值对放入 usermeta 中。

单独存储它的原因是因为这可以让您的数据库免受 WordPress 可能想要对用户表进行的更改的影响。它通过首先消除冲突的可能性来避免潜在的冲突。

# javascript - SetInterval 只调用一次，不知道为什么？

> ID：14663144
> 
> 赞同：1
> 
> 时间：2013-02-02T14:57:13.260
> 
> 标签：javascript, jquery, animation, frontend

> **可能重复：**
> [setInterval 只运行一次？](https://stackoverflow.com/questions/10182714/setinterval-only-runs-once)

在我继续之前，让我说作为一个设计师逻辑来得很困难，所以我感谢你忍受我的无知。

我正在制作一个简单的滑块，我希望这样当用户用鼠标移动图片时，程序可以记下 mouseup() 之前的最后一秒所覆盖的距离，这样我就可以计算出多少图片必须像被刷过一样移动才能模拟。

我有我的基本事件处理程序：

```
$('.testdiv').mousedown(function(){

    pretestFunction();

    //mouse is pressed
    mousepressed = 1;

    //set first X point
    prevX = event.pageX;

}).mouseup(function(){

    //get stop X point
    stopX = event.pageX;
    mousepressed = 0;

}); 
```

pretestFunction 调用 setInterval，如下所示：

```
function pretestFunction(){
    window.setInterval(testFunction(), 1000);
} 
```

测试函数（）：

```
function testFunction(){
    console.log('1 second');
} 
```

我的问题是设置间隔函数只调用一次，而不是像我试图让它做的那样每秒调用一次。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:00:24.697

```
window.setInterval(testFunction(), 1000); 
```

应该

```
window.setInterval(testFunction, 1000); 
```

首先，您传递了**调用** `testFunction`的值（恰好是`undefined`，但这并不重要）

在第二个中，您将传递的值**（** `testFunction`即一个函数，这就是您想要的。）

# javascript - 如何从一组数组中获取所有组合

> ID：14663145
> 
> 赞同：0
> 
> 时间：2013-02-02T14:57:26.360
> 
> 标签：javascript, jquery

我有例如这些数组：

```
a1 = ["1", "2", "3"];
a2 = ["a", "b"];
a3 = ["q", "w", "e"];

result = ["1aq", "1aw", "1ae", "1bq", "1bw", ... "3be"]; 
```

没有嵌套循环（例如，也使用 jquery）如何获得这个？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:23:15.200

我看不出嵌套循环有什么问题，但这是一个通用的解决方案：

```
var a = [a1, a2, a3];

var result = [""]; // start with the empty string,
for (var i=0; i<a.length; i++) { // and repeatedly
        var ai = a[i],
            l = ai.length;
    result = $.map(result, function(r) { // make result a new array of
        var ns = []; // new combinations of
        for (var j=0; j<l; j++) // each of the letters in ai
            ns[j] = r + ai[j]; // and the old results
        return ns;
    }); // using the odds of jQuery.map with returned arrays
}
return result; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T17:17:59.867

没有嵌套循环。可以根据需要处理任意数量的数组。

```
var result = combine(a1, a2, a3);

function combine() {
    return processArrays([].slice.call(arguments), "", []);

    function processArrays(arrays, str, res) {
        for (var i = 0; i < arrays[0].length; i++) {
            if (arrays.length > 1) {
                processArrays(arrays.slice(1), str + arrays[0][i], res);
            } else {
                res.push(str + arrays[0][i]);
            }
        }
        return res;
    }
} 
```

* * *

或对该功能略有不同的看法：

```
function combine() {
    return processArrays([].slice.call(arguments), "", []);

    function processArrays(arrays, str, res) {
        if (arrays.length === 0)
            res.push(str)
        else
            for (var i = 0; i < arrays[0].length; i++)
                processArrays(arrays.slice(1), str + arrays[0][i], res);
        return res;
    }
} 
```

* * *

这是一个*无循环*版本：

```
var result = combine(a1, a2, a3);

function combine() {
    return processArrays(arguments[0], [].slice.call(arguments, 1), "", []);

    function processArrays(head, tail, str, res) {
        if (head === undefined)
            res.push(str)
        else
            processArray(head[0], head.slice(1), tail, str, res);
        return res;
    }
    function processArray(head, tail, arrays, str, res) {
        if (head) {
            processArrays(arrays[0], arrays.slice(1), str + head, res);
            processArray(tail[0], tail.slice(1), arrays, str, res)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:24:32.307

通用递归解决方案：

```
function combine() {
    var target = arguments[0];

    if (arguments.length === 1) {
        return target; // end of chain, just return the array
    }

    var result = [];
    // compute all combinations without the first array
    var combinations = combine.apply(null, Array.prototype.slice.call(arguments, 1));

    // put things together
    for (var i = 0, l = target.length; i < l; i++) {
        var element = target[i];
        for (var j = 0, lj = combinations.length; j < lj; j++) {
            result.push(element + combinations[j]);
        }
    }
    return result;
}

// Usage
var result = combine(a1, a2, a3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T15:33:11.217

另一个通用解决方案。

```
var reduce = function(a, b) {
    var r = [];
    $.each(a, function(i, ai) {
        $.each(b, function(j, bj) {
            r.push(ai + bj);
        });
    });
    return r;
}; 
```

```
var result = reduce(reduce(a1, a2), a3); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-02T15:08:27.530

```
var outputArray = [];
for(var i = 0, finalLength = a1.length * a2.length * a3.length; i < finalLength; i++) {
   outputArray[i] = a1[i % a1.length].toString() + a2[i % a2.length].toString() + a3[i % a3.length].toString(); 
} 
```

但这真的只是一个噱头。为什么要避免循环？我可以猜到：您事先不知道您将拥有多少个阵列。但这仍然是一个挑战。

# php - 我在使用函数和 SRAND 的 php 代码中得到一个未定义的偏移量

> ID：14663149
> 
> 赞同：-3
> 
> 时间：2013-02-02T14:58:00.660
> 
> 标签：php

我在下面的代码中的列表行上得到一个未定义的偏移量。任何想法为什么？即使我收到偏移错误，仍然会生成密码

```
function generatePassword($length=6,$level=2){

   list($usec, $sec) = explode(' ', microtime(true));
   srand((float) $sec + ((float) $usec * 100000));  

   $validchars[1] = "23456789abcdefghjkmnpqrstuvwxyz";
   $validchars[2] = "23456789abcdefghjkmnpqrstuvwxyzABCDEFGHIJKLMNPQRSTUVWXYZ";
   $validchars[3] = "23456789_!@#$%&*()-= /abcdefghjkmnpqrstuvwxyzABCDEFGHIJKLMNPQRSTUVWXYZ_!@#$%&*()-= /";

   $password  = "";
   $counter   = 0;

   while ($counter < $length) {
     $actChar = substr($validchars[$level], rand(0, strlen($validchars[$level])-1), 1);

     // All character must be different
     if (!strstr($password, $actChar)) {
        $password .= $actChar;
        $counter++   ;
   }
   }

   re 
```

转$密码；

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:00:12.960

[`microtime(true)`](http://php.net/microtime)返回一个从不包含空格的浮点值。因此，`explode()`返回一个只有一个项目和`list`两个参数的数组会失败，因为这需要数组中至少有两个项目。改用`microtime(false)`：

```
list($usec, $sec) = explode(' ', microtime(false)); 
```

# php - 什么是... mysql_real_escape_string？危险的？

> ID：14663151
> 
> 赞同：-2
> 
> 时间：2013-02-02T14:58:04.867
> 
> 标签：php

> **可能重复：**
> [为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

嘿，我可以在 php 中使用这样的代码吗：

```
$s_username = addslashes(strip_tags($_POST['username'])); 
$s_password = addslashes(strip_tags($_POST['password'])); 
```

在此之前使用此

```
$email = mysql_real_escape_string(strip_tags($_POST['email']));
$username = mysql_real_escape_string(strip_tags($_POST['username'])); 
```

...因为很多人说 mysql_real_escape_string 使用起来很危险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:02:01.683

它已贬值，这意味着它没有得到维护，因此如果发现安全漏洞，PHP 开发人员将不会修复它。不过这并不危险，它只是转义了所有可用于 sql 注入的坏字符。

请改用 mysqli_* 函数或 PDO。这些实际上正在被维护并且更加安全。

# android - 在 Android 的服务中使用数据报

> ID：14663152
> 
> 赞同：0
> 
> 时间：2013-02-02T14:58:12.877
> 
> 标签：android, service, datagram, forceclose

我正在尝试编写一个接收数据报数据包并播放该数据包（音频数据包）的 Android 应用程序。

我想为此目的使用服务，因此音频不会中断。为此，我有这样的服务：

```
public class MyService extends Service {
  ... 
  AudioTrack track;
  DatagramSocket sock;
  DatagramPacket pack;
  ...

  @Override
  public IBinder onBind(Intent intent) {
    return null;
  }

  @Override
  public void onCreate() {
    ...
    track = new AudioTrack(...)
    track.play();
    sock = new DatagramSocket(AUDIO_PORT);
    pack = new DatagramPacket(...)
    ...
    }

  @Override
  public void onStart(Intent intent, int startid) {
    ...
    while(true)
    {
        try {
            sock.receive(pack);
        } catch (IOException e) {
            e.printStackTrace();
        }
        track.write(pack.getData(), 0, pack.getLength());
    }
  }
 } 
```

在我的主要活动中，我有一个“开始”按钮，当按下它时它会运行：

```
startService(new Intent(this, MyService.class)); 
```

该应用程序运行良好并且可以很好地播放接收到的音频，但是在按下开始按钮后：

1.  它不响应任何其他按钮

2.  过了一会儿，我收到这条消息：“应用程序 MyAppName 没有响应”，它提供了两个选项`Forceclose`和`Wait`. 如果我按`Wait`audo 继续播放良好但 UI 不再响应。

对我来说，这似乎是造成这种情况`while(true)`的原因。`onStart`

感谢以正确方式执行此操作的任何帮助和指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:02:49.007

这是一个例子：

```
public void onStart(Intent intent, int startid) {
    ...
    Thread streamer = new Thread() {

        @Override
        public void run() {
            while(true) {
                try {
                    sock.receive(pack);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                track.write(pack.getData(), 0, pack.getLength());
            }
        }
    });
    streamer.setPriority( Thread.MAX_PRIORITY );
    streamer.start();
  } 
```

显然，在您的代码的最终版本中，您将希望跟踪您创建的[线程](http://developer.android.com/reference/java/lang/Thread.html)，以便您可以检查它的状态或终止它，和/或在线程中创建一个处理程序，以便您可以从服务中控制它.

# android - 我可以实现 Holo 主题并保留旧主题以支持旧设备吗？

> ID：14663155
> 
> 赞同：0
> 
> 时间：2013-02-02T14:58:34.023
> 
> 标签：android

我正在尝试为我的应用程序实现全息主题，到目前为止一切都很好......但该应用程序无法在 3.0 之前的旧设备上运行

所以我在 values dir 和 values-v11 dir 中制作了一个自定义主题，以使 android 在运行时切换到正确的主题...

我还将目标 sdk 级别设置为 7 以支持 android 2.1

现在无法识别全息主题

我的目标是不可能的事情吗？

**我想要的是 3.0 之前的设备使用默认的 android 主题以及支持 holo 的所有设备使用 holo 主题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:00:51.063

在值/styles.xml 中：

```
<style name="AppTheme" parent="@android:style/Theme.Light"> 
```

值-v11/styles.xml：

```
<style name="AppTheme" parent="@android:style/Theme.Holo.Light" /> 
```

值-v14/styles.xml：

```
<style name="AppTheme" parent="@android:style/Theme.DeviceDefault.Light" /> 
```

# c++ - 给定一个期货容器，如何以非阻塞方式执行所有获取？

> ID：14663157
> 
> 赞同：4
> 
> 时间：2013-02-02T14:58:43.540
> 
> 标签：c++, c++11, future, stdasync

因此，我正在尝试创建一种通用方式来创建期货容器，并以非阻塞方式执行所有 future.get()'。

我预计任务的完成时间应该在几百毫秒之间，通常最多 2 分钟。然而，有些可能根本无法完成。在典型的运行中将至少执行 10,000 个任务。

我希望返回最快的任务结果，而不会被期货容器中其他更长时间运行的任务所阻碍。

到目前为止，这是我使用虚拟睡眠时间来模拟任务完成延迟的内容（设计在很大程度上要归功于这里发表的好帖子，例如[this](https://stackoverflow.com/questions/10902230/stdasync-variant-which-works-over-a-collection "std::async 变体，适用于集合")和[this](https://stackoverflow.com/questions/11910051/implement-search-using-futures-async-and-thread-in-c11?rq=1 "在 C++11 中使用 futures、async 和 thread 实现搜索")）：

```
#include <future>
#include <vector>
#include <iostream>
#include <random>
#include <chrono>
#include <ratio>
#include <thread>
#include <algorithm>

size_t rand_from_range(const size_t, const size_t);
int rand_sleep_range(const size_t, const size_t);
template<class CT> size_t get_async_all( CT& );

// Given a function and a collection,
//  return a vector of futures.
template<class Function, class CT>
auto async_all( Function f, CT coll )
    -> std::vector<decltype(std::async(f, *std::begin(coll)))>
{
  std::vector<decltype(std::async(f, *std::begin(coll)))> futures;
  futures.reserve(coll.size());
  for (auto& element : coll)
    futures.push_back(std::async(f, element));
  return futures;
}

// Given the beginning and end of a number
//  range, return a random number therein.
size_t rand_from_range( const size_t range_begin, 
                        const size_t range_end )
{
  std::uniform_int_distribution<size_t> 
    distr(range_begin, range_end);
  std::random_device dev;
  return distr(dev);
} 

// Given a shortest and longest duration, put the calling
//  thread to sleep for a random duration therein. 
// (in milliseconds)
int rand_sleep_range( const size_t shortest_time, 
                      const size_t longest_time )
{
  std::chrono::milliseconds 
    sleep_time(rand_from_range(shortest_time, longest_time));
  std::this_thread::sleep_for(sleep_time);
  return (int)sleep_time.count();
} 

// Given a container of futures, perform all
//  get()'s.
template<class CT>
size_t get_async_all( CT& async_coll )
{
  size_t get_ctr(0);
  const size_t future_cnt = async_coll.size();
  std::vector<size_t> completed;
  completed.reserve(future_cnt);

  while (true) {
    for (size_t ndx = 0; ndx < future_cnt; ++ndx) {
      // Check to see if this ndx' future has completed already.
      if (std::none_of(std::begin(completed), std::end(completed), 
            [=](size_t x) {
              return (x == ndx);
            }))
      { // No, this one hasn't completed 
        //  yet, attempt to process it.
        auto& f = async_coll[ndx];
        if (f.wait_for(std::chrono::milliseconds(10)) 
              == std::future_status::ready) 
        {
          f.get(); // The future's work gets done here.
          ++get_ctr;
          completed.push_back(ndx);
          if (completed.size() == future_cnt) 
            break; // for()
        }
      }
    }
    if (completed.size() == future_cnt) 
      break; // while()
  }
  return get_ctr;
}

int main()
{
  // A dummy container of ints.
  std::vector<int> my_vec(100);
  for (auto& elem : my_vec)
    elem = rand_from_range(1, 100);

  // A dummy function lambda.
  auto my_func = [](int x) { 
    int x_ = x;
    int sleep_time = rand_sleep_range(100, 20000); // in ms.
    x *= 2;
    std::cout << " after sleeping " << sleep_time << "ms \t"
              << "f(" << x_ << ") = " << x << std::endl;
  };

  // Create and execute the container of futures.
  auto async_coll = async_all(my_func, my_vec);
  size_t count = get_async_all(async_coll);

  std::cout << std::endl << count << " items completed. \n";
} 
```

所以，我的问题是：

*   我使用的方法有什么问题吗？
*   get_async_all() 是否有比我正在使用的更好/更优雅的方法？或者我正在做的任何其他事情，就此而言。

感谢任何人花时间查看代码，并给我任何建设性的批评或反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:19:30.320

至少有一个陷阱。您`std::async`在未指定启动策略的情况下调用，这意味着部分或全部任务可能会延迟运行。但是在您的测试中查看任务是否已完成，您只测试`std::future_status_ready`. 如果一个任务被推迟，你总是会回来`std::future_status_deferred`，这意味着你的测试永远不会返回 true。

这个问题的最简单的解决方案是指定一个启动策略`std::launch::async`，但是你会冒着超额订阅系统的风险。另一种方法是修改您的测试以检查延迟任务，但问题是如何处理它们。如果你打电话给他们`get`，`wait`你会阻塞任意时间。

关于您的一般方法，与其在轮询它们时阻塞 10 毫秒以等待每个任务完成，不如考虑等待 0 毫秒，即进行纯轮询以查看任务是否完成。这可能会减少任务完成和处理它之间的延迟，但它可能会增加监听到的轮询，从而使整个系统运行速度变慢。

一种完全不同的方法可能是放弃轮询每个任务，而是让每个任务将“我完成”标志写入共享数据结构（例如 a `std::deque`），然后定期轮询该数据结构以查看其中是否有任何内容. 如果是这样，则处理已完成的任务，将它们从数据结构中删除，然后重新进入睡眠状态，直到再次轮询。如果您的任务`push_back`在数据结构上执行，您自然可以按照它们完成的顺序处理它们。这种设计的一个缺点是共享数据结构可能成为性能瓶颈。

# ruby - 使用 Torquebox 和 RubyMine 进行调试

> ID：14663159
> 
> 赞同：1
> 
> 时间：2013-02-02T14:59:11.520
> 
> 标签：ruby, debugging, rubymine, torquebox

我有 RubyMine 4.5（我也有带有 Ruby 插件的 Idea 12）和 Torquebox 2.3。RubyMine 似乎没有对 Torquebox 的原生支持，就像它对Passenger、Trinidad 等一样。

我不知道如何使用 RubyMine 在 Torquebox 服务器上调试应用程序。有什么想法吗？

**还：**

我尝试了 RubyMine 5 EAP，但它似乎不能开箱即用。

我收到以下错误：

```
exception:
javax.servlet.ServletException: org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- ruby/debug/ide

root cause:
org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- ruby/debug/ide 
```

但是安装了“ruby-debug-ide”gem。

不知道是 RubyMine 还是 Torquebox 的问题。

**另外：** 我能够通过将以下字符串添加到 Gemfile 来解决前面的问题

```
gem 'ruby-debug-base'
gem 'ruby-debug-ide' 
```

似乎调试器附加到了 Torquebox 服务器进程，但是现在当应用程序到达断点时，调试器进程就会默默地死掉：

```
Process finished with exit code 143 
```

然而 Torquebox 仍然有效，但给了我一个运行时错误：

```
@last_breakpoint supposed to be nil. is #<Debugger::Breakpoint:0x1adad4f> 
```

使用以下堆栈跟踪：

```
ruby-debug-ide (0.4.17.beta16) lib/ruby-debug-ide/event_processor.rb:18:in `at_breakpoint'
ruby-debug-base-0.10.4 (java) lib/ruby-debug-base.rb:43:in `at_breakpoint'
app/controllers/orders_controller.rb:5:in `index'
org/jruby/RubyBasicObject.java:1659:in `__send__'
org/jruby/RubyKernel.java:2086:in `send'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:417:in `_run__837017838__process_action__370397448__callbacks'
org/jruby/RubyBasicObject.java:1659:in `__send__'
org/jruby/RubyKernel.java:2086:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:390:in `_run_process_action_callbacks'
org/jruby/RubyBasicObject.java:1665:in `__send__'
org/jruby/RubyKernel.java:2090:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `action'
org/jruby/RubyProc.java:261:in `call'
org/jruby/RubyProc.java:249:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `call'
org/jruby/RubyArray.java:1613:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.4) lib/rack/etag.rb:23:in `call'
rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
torquebox-web-2.3.0 (java) lib/torquebox/session/servlet_store.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.11) lib/active_support/callbacks.rb:408:in `_run__521886712__call__4409452__callbacks'
org/jruby/RubyBasicObject.java:1659:in `__send__'
org/jruby/RubyKernel.java:2086:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:390:in `_run_call_callbacks'
org/jruby/RubyBasicObject.java:1659:in `__send__'
org/jruby/RubyKernel.java:2086:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.4) lib/rack/runtime.rb:17:in `call'
rack (1.4.4) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
org/jruby/RubyBasicObject.java:1665:in `__send__'
org/jruby/RubyKernel.java:2090:in `send'
railties (3.2.11) lib/rails/railtie/configurable.rb:30:in `method_missing' 
```

我得到了数百个与 jruby 相关的 IDE 错误。

**编辑：**

使用适当版本的 gem 修复 Gemfile 后：

```
gem 'ruby-debug-base', '>= 0.10.5.rc3'
gem 'ruby-debug-ide', '>= 0.4.17.beta14' 
```

调试器似乎正在工作，但是当我的应用程序出现异常时，调试器崩溃：进程死亡，我得到以下信息：

```
@last_breakpoint supposed to be nil. is #<Debugger::Breakpoint:0x1d91ad6> 
```

我想我最好等待 RubyMine 5 RC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:35:58.853

根据[这个评论](http://youtrack.jetbrains.com/issue/RUBY-9177#comment=27-436002)，它已经实现并且将在 RubyMine 5.0 和下一个 IDEA 插件中可用。

您已经可以在[RubyMine 5.0 EAP](http://confluence.jetbrains.com/display/RUBYDEV/RubyMine+EAP)中试用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T17:13:35.683

请检查您的文件夹名称。你的项目名称应该是正常的。一旦我在OSX系统下使用“jim的项目”作为项目文件夹名称，就会出现上述错误。改成“jims project”后，一切正常。

# android - 如何在 DialogFragment 中添加选项按钮

> ID：14663165
> 
> 赞同：0
> 
> 时间：2013-02-02T15:00:11.143
> 
> 标签：android, android-dialogfragment

我有以下代码：

```
public void startDatePickerDialog(View v) {
    DatePickerFragment newFragment = new DatePickerFragment();
    newFragment.setType("start");
    newFragment.show(getSupportFragmentManager(), "startDatePicker");
} 
```

使用 DatePickerFragment

```
 private String type = "none";

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
}

@Override
public void onCancel(DialogInterface dialog) {
    Toast.makeText(getActivity(), "works?", Toast.LENGTH_LONG).show();
    if (type.equals("start")) {
        EditText e = (EditText) getActivity().findViewById(
                R.id.date_of_task);
        e.setText("");
    } else {
        EditText e = (EditText) getActivity().findViewById(
                R.id.deadlineDate);
        e.setText("");
    }
    super.onCancel(dialog);
}

public void setType(String t) {
    type = t;
}

@Override
public void onDateSet(DatePicker view, int year, int month, int day) {
    if (type.equals("start")) {
        EditText e = (EditText) getActivity().findViewById(
                R.id.date_of_task);
        e.setText("" + day + "." + (month + 1) + "." + year);
    } else {
        EditText e = (EditText) getActivity().findViewById(
                R.id.deadlineDate);
        e.setText("" + day + "." + (month + 1) + "." + year);
    }
} 
```

我现在的问题是 onCancel 不起作用。因此，我想在 DialogFragment 上添加一个按钮，它会导致 onCreate 中的操作。如何添加按钮或如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:16:14.837

好的，我通过设置 DatePickerDialog 的方法“setButton2”解决了我的问题。我生成了一个 OnclickListener 并将我的代码放入 onClick 方法中，它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:40:11.667

日期/时间选择器对话框存在错误。它是这样的：

现在：单击确定-日期设置两次单击取消-日期清除然后设置单击返回-日期设置一次

预期：单击确定-单击取消后设置日期-重置日期单击返回-ntng并保持原样

作为一种解决方法，您可以保留一个在您第一次调用 OnDateSetListener 时设置的计数器，如果计数器 > 1，则返回并重置计数器。

# jquery - 使用 JQuery 将 div/image 部分滑出

> ID：14663167
> 
> 赞同：1
> 
> 时间：2013-02-02T15:00:21.017
> 
> 标签：jquery, html, slide, slidetoggle, jquery-effects

我面临一个我自己无法解决的问题：

我有一个带有背景图像的 div，我想在单击 div 时向上/向下切换幻灯片。问题是图像总是完全向上滑动（100%）所以它消失了。我希望它保持 20%，这样你就可以点击它，它会再次滑落 100%。

我试过 .animate() 但它改变了图片的纵横比，它不会滑出。

我检查了[http://spoonfedproject.com/jquery/jquery-slide-with-minimum-height/](http://spoonfedproject.com/jquery/jquery-slide-with-minimum-height/)之类的解决方案，其中 div 滑入/滑出，但没有背景图片...

有人有想法吗？我真的很感激！

JS 小提琴：http: [//jsfiddle.net/JmLqp/105/](http://jsfiddle.net/JmLqp/105/)

HTML 代码

```
<div id="contact"></div> 
```

CSS 代码

```
#contact{
 width:162px;
 height:336px;
 background: url(http://s18.postimage.org/kl4b1rly1/bg_contact.png) no-repeat;
} 
```

JS代码

```
$("#contact").click(function () {
  $(this).hide("slide", {direction: "up"}, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T15:07:08.227

你在正确的轨道上`animate()`：

```
$("#contact").css('position', 'relative').click(function () {
    if($(this).offset().top == -250) {
         $(this).animate({'top': '0px'}, 1000);
    }
    else {
         $(this).animate({'top': '-250px'}, 1000);
    }
}); 
```

请注意，您必须如上所述为自己`position`设置。`relative`

[工作小提琴](http://jsfiddle.net/JmLqp/106/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:13:33.897

只需设置`position: relative`为您的动画 div，请参阅[**工作 jsfiddle**](http://jsfiddle.net/shaGV/1/)

```
#contact{
    position:relative;
    width:162px;
    height:336px;
    background: url(http://s18.postimage.org/kl4b1rly1/bg_contact.png) no-repeat;

}

$("#contact").click(function () {
    tp = $(this).css('top') == '0px' ? '-270px' : '0px';
    $(this).animate( {top: tp }, 1000);
}); 
```

**更新：**
我还更新了我的 jsfiddle 以使其同时上升和下降，这是一个小的补充。

# c# - 一个整数数组作为字典的键

> ID：14663168
> 
> 赞同：24
> 
> 时间：2013-02-02T15:00:22.667
> 
> 标签：c#, arrays

我希望有一个使用整数数组作为键的字典，如果整数数组具有相同的值（甚至不同的对象实例），它们将被视为相同的键。我该怎么做？

`b`以下代码与不同的对象实例一样不起作用。

```
 int[] a = new int[] { 1, 2, 3 };
 int[] b = new int[] { 1, 2, 3 };
 Dictionary<int[], string> dic = new Dictionary<int[], string>();
 dic.Add(a, "haha");
 string output = dic[b]; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-02T15:07:52.017

您可以创建一个`IEqualityComparer`来定义字典应如何比较项目。如果项目的顺序是相关的，那么这样的事情应该可以工作：

```
public class MyEqualityComparer : IEqualityComparer<int[]>
{
    public bool Equals(int[] x, int[] y)
    {
        if (x.Length != y.Length)
        {
            return false;
        }
        for (int i = 0; i < x.Length; i++)
        {
            if (x[i] != y[i])
            {
                return false;
            }
        }
        return true;
    }

    public int GetHashCode(int[] obj)
    {
        int result = 17;
        for (int i = 0; i < obj.Length; i++)
        {
            unchecked
            {
                result = result * 23 + obj[i];
            }
        }
        return result;
    }
} 
```

然后在创建字典时将其传入：

```
Dictionary<int[], string> dic
    = new Dictionary<int[], string>(new MyEqualityComparer()); 
```

注意：此处获得的哈希码计算： [什么是覆盖 System.Object.GetHashCode 的最佳算法？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-18T15:02:39.257

也许您应该考虑使用元组

```
var myDictionary = new Dictionary<Tuple<int,int>, string>(); 
myDictionary.Add(new Tuple<int,int>(3, 3), "haha1"); 
myDictionary.Add(new Tuple<int,int>(5, 5), "haha2"); 
```

根据[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.tuple-2.equals?redirectedfrom=MSDN&view=net-5.0#System_Tuple_2_Equals_System_Object_)， Tuple 对象`Equals`方法将使用两个 Tuple 对象的值

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-08T00:56:35.213

如果您不关心实际散列，最简单的方法可能就是将数组转换为字符串。添加空格以避免数字加入。

```
dic.Add(String.Join(" ",a), "haha"); 
```

# database - 设计一个遵循第三范式的简单数据库

> ID：14663171
> 
> 赞同：1
> 
> 时间：2013-02-02T15:00:30.987
> 
> 标签：database, sql-server-2008, database-design

我正在尝试为小型数据库作业完成[3NF](http://en.wikipedia.org/wiki/Third_normal_form)或第三范式。

我有学生、班级和家长。

这是我需要制作的表格：

*   **学生：**身份证、姓名、年级（平均）

*   **班级：** class_id、profile（班级类型）、class_master、班级*内的学生*

*   **家长：**姓名、地址、*在校学生*

**我应该指出的事情：**

由于我的英语不是那么好，我想我应该指定：

*   班级是一对多的关系，因为一个学生可以是一个班级的一部分，而且只有一个班级（因此班级是学生的集合，没有别的）。

*   Profile 是一个类的特化（同样，学生分组机制称为类）。*例如：简介：数学、文学、计算机科学*

**[/我应该指出的事情]**

同样，我必须制作符合 3NF 准则的表格，而不是与我刚才提到的表格完全相同的表格

我刚在想：

```
Class: 
   class_id primary key, foreign key (class_master_name) 

Profile: 
   class_master_name primary key, profile_name

Student: 
   student_id primary key, name, grade (avg), foreign key (class_id)

Parent: 
   parent_id primary key, name, address 
```

因此，Class、Profile、Student 和 Parent 将是 3NF，因为所有非关键元素都严格指代键、整个键，并且仅指键。

**我的问题（或者说需要回答的具体问题）：**

*   学生 <-> 班级关系好吗？学生参考班级就够了吗？[我无法想象在没有与2NF](http://en.wikipedia.org/wiki/Second_normal_form)或[1NF](http://en.wikipedia.org/wiki/First_normal_form)冲突的重复数据的情况下，课堂可以引用学生的方式。

*   每个学生最多有两个父母（一个或两个都可能死了或根本不知道）。我想有一张桌子`Relationship: student_id, parent_1_id, parent_2_id`，但我不知道如何实现这一点。我怎么能（在*SQL Server Management Studio 2008*中）制作这个表（其中`parent_1_id != parent_2_id` **和也是** `student_id`但`primary key`也是一个`foreign key`）

*   这实际上是[3NF](http://en.wikipedia.org/wiki/Third_normal_form)还是我做错了什么？

我是如何想到实施的`Relationship: student_id, parent_1_id, parent_2_id`

```
CREATE TABLE Relationship (
     student_id int NOT NULL PRIMARY KEY,
     parent_1_id int,
     parent_2_id int,
     CONSTRAINT (parent_1_id, parent_2_id) FOREIGN KEY 
         REFERENCES Parent (parent_id, parent_id),
     CONSTRAINT  (student_id) FOREIGN KEY 
         REFERENCES Student (student_id)
) 
```

可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:29:03.853

看起来你需要类似的东西：

![在此处输入图像描述](../Images/a52404aa10c8d7a11510f102efcd3c56.png)

*( `Class.ProfileId`and`Student.ClassId`不为 NULL，而`Parent1Id`and`Parent2Id`可以为 NULL。)*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T15:38:11.103

```
ClassType:    
classtype (primary key)
name
etc...    

Class:
classid (primary key)
classtype (foreign key)
classname
etc...

Person:
personid (primary key)
name
dob
etc....

ClassStudent:
studentid (primary key)
classid (foreign key)
personid (foreign key)
grade
etc

PersonRelation:
relationid (primary key)
prim_personid (foreign key)
sec_personid (foreign key)
relationship (parent, sibling, etc)
etc 
```

# file-upload - 是否可以获得远程服务器来测试上传文件功能？

> ID：14663179
> 
> 赞同：0
> 
> 时间：2013-02-02T15:01:43.877
> 
> 标签：file-upload, ftp

我有一个如下所示的简单程序，可以将文件上传到远程位置

```
 public static void main(String[] args) {
    String server = "www.myserver.com";
    int port = 21;
    String user = "user";
    String pass = "pass";
    FTPClient ftpClient = new FTPClient();
    try {
        ftpClient.connect(server, port);
        ftpClient.login(user, pass);
        ftpClient.enterLocalPassiveMode();
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
        File firstLocalFile = new File("D:/Test/Projects.zip");
        String firstRemoteFile = "Projects.zip";
        InputStream inputStream = new FileInputStream(firstLocalFile);
        System.out.println("Start uploading first file");
        boolean done = ftpClient.storeFile(firstRemoteFile, inputStream);
        inputStream.close();

} 
```

我的问题是，是否可以测试这个程序，因为我目前没有远程服务器。

意味着是否可以让远程服务器临时上传文件（对不起，请只开源）

有人知道这样的网站吗？？

截屏

![在此处输入图像描述](../Images/eb6ca54f1e9ea2dc79869bb9fbe30a6a.png)

# php - 在 php 中向登录脚本添加 if 语句？

> ID：14663180
> 
> 赞同：0
> 
> 时间：2013-02-02T15:01:54.670
> 
> 标签：php

嗨，有人可以帮助我吗，我有一个登录脚本，我想添加一个条件，如果我的数据库中的一列 = '0' 然后登录并重定向到dashboard.php，

否则执行正常的登录过程。

这是我的功能：

```
function initial_prompt() {
            global $connection;
            global $_SESSION;
            $query = "SELECT initial_prompt
                        FROM ptb_users
                        WHERE id = ".$_SESSION['user_id']." ";
            $initial_prompt = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $initial_prompt;
        } 
```

这是我试图添加为 if 语句的一段代码：

```
<?php

    $initial_prompt = initial_prompt();
    while ($initial = mysql_fetch_array($initial_prompt)) 

     if ($initial['initial_prompt'] == '0')  {

     redirect_to("dashboard.php"); } ?> 
```

登录脚本：

```
<?php

    if (logged_in()) 
{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p>We are login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}

    include_once("includes/form_functions.php");

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('email', 'password');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $fields_with_lengths = array('email' => 30, 'password' => 30);
        $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        $email = trim(mysql_prep($_POST['email']));
        $password = trim(mysql_prep($_POST['password']));
        $hashed_password = md5($password);

        if ( empty($errors) ) {
            // Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // email/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                $_SESSION['user_id'] = $found_user['id'];
                $_SESSION['email'] = $found_user['email'];
                $_SESSION['sub_expires'] = $found_user['subscription_expires'];

                $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error());

if($result) 
{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p> We are login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}

            }else{

                // email/password combo was not found in the database
                $message = "<div class=\"infobox_out\"><strong>Email / Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
                    echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>";

            }

                } else {
            if (count($errors) == 1) {
                $message = "<div class=\"infobox_out\">There was 1 error in the form.<div>";

            } else {
                $message = "<div class=\"infobox_out\">There were " . count($errors) . " errors in the form.<div>";
            }
        }

    } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 1) {
            $message = "<div class=\"infobox\">You are now logged out.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close3\"></div></a>";

    } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 2) {
            $message = "<div class=\"infobox_out\">Sorry, we've had to log you out. Your session has expired.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>";

            } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 1) {
            $message = "<div class=\"infobox\">You are now logged out.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close3\"></div></a>";

        }

        } 

    }

        $email = "";
        $password = "";
    }
?>

<br/>
            <?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>
            <?php if (!empty($errors)) { display_errors($errors); } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:14:46.010

尝试这样的事情。`integer`0 可能在 MySQL 中被格式化为一个。也使用`header()`代替`redirect_to()`.

```
 $initial_prompt = initial_prompt();
    while ($initial = mysql_fetch_array($initial_prompt)) {

     if ($initial['initial_prompt'] === 0)  {  
       header("Location:dashboard.php"); 
     } 
     else {
       //normal login process code
     }

    } 
```

# c++ - 具有类名的函数

> ID：14663182
> 
> 赞同：-5
> 
> 时间：2013-02-02T15:02:23.967
> 
> 标签：c++

这是一个链接列表类的代码，我对函数有疑问。`Singly_linked_list *GetNext()`如果在函数名之前声明了类名，这意味着什么？那是数据类型吗？另外，关于数据成员的同样问题`Singly_linked_list *nextPtr`。我请帮助谢谢

```
class Singly_linked_list // Use a class Singly_linked_list to represent an object{
public:
// constructor initialize the nextPtr
Singly_linked_list()
{
    nextPtr = 0; // point to null at the beginning
}

// get a number
int GetNum()
{
    return number;
}

// set a number
void SetNum(int num)
{
    number = num;
}

// get the next pointer
Singly_linked_list *GetNext()
{
    return nextPtr;
}

// set the next pointer
void SetNext(Singly_linked_list *ptr)
{
    nextPtr = ptr;
}

 private:
int number;
Singly_linked_list  *nextPtr;
 }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:03:55.627

```
// get the next pointer
Singly_linked_list *GetNext()
{
    return nextPtr;
} 
```

这意味着该函数`GetNext`返回一个指向类实例的指针`Singly_linked_list`。

同样地

```
Singly_linked_list  *nextPtr; 
```

手段`nextPtr`是一个指向类的实例的指针`Singly_linked_list`。

# java - Java 对象：方法没有按应有的方式打印

> ID：14663191
> 
> 赞同：0
> 
> 时间：2013-02-02T15:03:28.983
> 
> 标签：java, object

我有两个课程：公寓和建筑。公寓类：

```
public class Apartment {
    private String familyName;
    private int rent;
    private boolean isRented;
} 
```

Building 类有一个 Apartment 数组和一个 numOfApartments 变量，它指示该建筑物有多少个公寓，还有一个 FINAL 变量，它指示一栋建筑物中公寓的最大数量。

```
private Apartment[] apartments;
private int numOfApartments;
private final int MAX_APARTMENTS=20;

public Building() {
    this.apartments=new Apartment[MAX_APARTMENTS];
    this.numOfApartments=0;
} 
```

现在我想制作一种方法，将公寓的租金提高一个作为参数的金额：

```
public void raiseRent(int amount) {
    for (int i=0; i<numOfApartments; i++) {
        apartments[i].setRent(apartments[i].getRent() + amount);
    }
} 
```

addAppartment 方法：

```
public boolean addApartment(Apartment a){ //adds an appartment to the building if
                                           //there's enough space in the array.
        if (this.numOfApartments<this.MAX_APARTMENTS)
        {
            this.apartments[this.numOfApartments]=new Apartment(a);
            this.numOfApartments++;
            return true;
        }
        return false;
    } 
```

**公寓类字符串 ToS​​tring 方法：**

```
public String toString()
{
    if (this.isRented) //if the apartment is rented, prints:
    {
        return "Apartment rent: " + this.rent + ". rented to " + this.familyName + " family.";
    }
    else
        return "Apartment rent: " + this.rent  + ". not rented yet.";
} 
```

主要是：

```
String familyName; int rent;
System.out.println("enter family name and rent by this order");
familyName=scan.next();
rent=scan.nextInt();

Apartment a=new Apartment(familyName,rent);  //build new apartment object.
Building b=new Building();
System.out.println(b.addApartment(a));
b.raiseRent(200); //initiate the raiseRent method. 
```

这里的一切都有效，但是当我写这个时：

```
 System.out.println(a); 
```

租金显示为旧租金，而不是更新后的租金。当我写这个时：

```
System.out.println(b.apartments[0]); 
```

有用。

为什么当我写 System.out.println(a); 它不工作？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:15:07.797

问题出在您的`addApartment`方法中：您不是将传入的对象添加到数组中，而是添加一个通过调用复制构造函数`Apartment`创建的全新对象。`new`这打破了`a`您传入的变量与数组索引为零的元素之间的连接`apartments`，从而解释了打印值的差异。

您在 中的复制语义`addApartment`实际上是一件好事：它使您免于以后出现不寻常的别名，因为实现不再依赖于调用者来传递不同的对象。将代码更改为

```
apartments[this.numOfApartments] = a; // No copy 
```

产生问题，因为`Apartment`是*mutable*。考虑这个调用序列：

```
Apartment a = new Apartment();
for (int i = 100 ; i <= 1000 ; i += 100) {
    a.setRent(i);
    building.addApartment(a);
} 
```

预计会有 10 套公寓，租金在 100 到 1000 之间。但是，如果进行无副本更改，您最终会得到十个相同的公寓，所有公寓的租金都设置为 1000。这是因为在引擎盖下，`apartment`数组中的所有十个项目都将引用同一个`Apartment`对象 - 您在`for`循环之前创建的那个. 这会导致很多麻烦，因此最好保留复制代码，并知道租金增加应该检查建筑物内的对象，而不是您传递给`addApartment`方法的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:15:18.740

在你的

`public boolean addApartment(Apartment a)`方法：

```
this.apartments[this.numOfApartments]=new Apartment(a); 
```

创建一个似乎是从现有公寓建造的新公寓。这是一个副本。

提高租金后，

`Apartment a=new Apartment(familyName,rent); //build new apartment object.`

你传递给

`b.addApartment(a)`

不会有更新的租金。这是因为 Java 是按值传递的。`int`它是`new Apartment`您的 Building集合包含的“新” `Apartment[]`，即使您从现有集合中设置它 ( `this.rent = other.rent`)

# antlr4 - antlr4 puppet 风格的声明性语法问题

> ID：14663201
> 
> 赞同：2
> 
> 时间：2013-02-02T15:04:03.567
> 
> 标签：antlr4

我正在尝试为木偶风格的声明性语言编写语法。我有我的基本语法和一个 JUnit 测试，试图实现一个 Listener 方法来加载它。JUnit 测试捕获第一个资源而不是第二个资源，这几乎就像`resources`规则从未被评估一样。我在我的加载器中添加了日志语句，并且永远不会进入/退出资源。

```
 grammar Bosse;
    resources : resource+;
    resource : ID LBRACE STRING COLON attributes RBRACE ;
    attributes : keyvalue ( COMMA keyvalue )* COMMA? ;
    keyvalue : ID ASSIGN expr ;
    expr    : STRING
            | INT
            | FLOAT
            ;

    ID      : [a-z]+ ;

    STRING  : SQUOTE (SQESC|.)*? SQUOTE;

    SQESC   : '\\\'' | '\\\\' ;

    INT : DIGIT+ ;

    FLOAT   : DIGIT+ '.' DIGIT*
    | '.' DIGIT+
    ;

    ASSIGN : '=>' ;
    LBRACE : '{' ;
    RBRACE : '}' ;

    fragment
    SQUOTE : '\'' ;

    COLON  : ':' ;
    COMMA  : ',' ;

    WS     : (' '|'\n'|'\t'|'\r')+ -> skip ;

    fragment
    DIGIT  : [0-9] ; 
```

我的 BaseListener 实现：

```
 public class BosseLoader extends BosseBaseListener {
            private List<Resource> resources = new ArrayList<Resource>();
    private String resourceType;
    private String resourceTitle;
    private Map<String,Object> attributes = new HashMap<String,Object>();

    private String parseString(String str) {
        str = str.substring(1, str.length()-1);
        str.replaceAll("\\\\(.)", "\1");
        return str;
    }

    public List<Resource> getResources() {
        return resources;
    }

    @Override
    public void enterResources(ResourcesContext ctx) {
        log.finest("entered "+ctx);
    }

    @Override
    public void exitResources(ResourcesContext ctx) {
        log.finest("entered "+ctx);
    }

    @Override
    public void enterResource(ResourceContext ctx) {
        log.finest("entered "+ctx);
        resourceType = ctx.ID().getText();
        resourceTitle = parseString(ctx.STRING().getText());
    }

    @Override
    public void exitResource(ResourceContext ctx) {
        log.finest("entered "+ctx);

        Resource r = new Resource() {
            public String getTitle() {
                return resourceTitle;
            }

            public String toString() {
                String type = resourceType.substring(0,1).toUpperCase()+resourceType.substring(1);
                return type+"["+resourceTitle+"]";
            }
        };
        resources.add(r);
        System.out.println(r);
        super.exitResource(ctx);
    }

    @Override
    public void enterAttributes(AttributesContext ctx) {
        log.finest("entered "+ctx);
        attributes = new HashMap<String,Object>();
    }

    @Override
    public void exitKeyvalue(KeyvalueContext ctx) {
        log.finest("entered "+ctx);
        attributes.put(ctx.ID().getText(),ctx.expr().getText());
    }
} 
```

我的 JUnit 测试

```
 @Test
public void testSyntaxDouble() {
    System.out.println("testSyntaxDouble()");
    String data = "user { 'ruckc' : ensure => 'present' }\n"+
                  "user { 'cruck' : ensure => 'present' }\n";

    BosseLoader loader = new BosseLoader();

    BosseLexer lexer = new BosseLexer(new ANTLRInputStream(data));
    CommonTokenStream tokens = new CommonTokenStream(lexer);
    BosseParser parser = new BosseParser(tokens);
    ParseTree tree = parser.resource();
    ParseTreeWalker walker = new ParseTreeWalker();
    walker.walk(loader, tree);

    assertEquals(2,loader.getResources().size());
    Resource r = loader.getResources().get(0);
    assertEquals("ruckc", r.getTitle());
    assertEquals("User[ruckc]", r.toString());
    r = loader.getResources().get(1);
    assertEquals("cruck", r.getTitle());
    assertEquals("User[cruck]", r.toString());
} 
```

我的测试输出：

```
testSyntaxDouble()
FINEST: AM org.cruck.bosse.language.BosseLoader enterResource  entered []
FINEST: AM org.cruck.bosse.language.BosseLoader enterAttributes  entered [19]
FINEST: AM org.cruck.bosse.language.BosseLoader exitKeyvalue  entered [22 19]
FINEST: AM org.cruck.bosse.language.BosseLoader exitResource  entered []
User[ruckc]
Failed tests: 
  testSyntaxDouble(org.cruck.bosse.language.BosseLanguageTest): expected:<2> but was:<1> 
```

# session - ColdFusion SessionTracker 并强制会话结束

> ID：14663205
> 
> 赞同：4
> 
> 时间：2013-02-02T15:04:23.697
> 
> 标签：session, coldfusion, coldfusion-9

我正在使用 ColdFusion 9`coldfusion.runtime.SessionTracker`使用以下代码监视当前登录的用户。

```
app = application.getApplicationSettings().name;
sessiontracker = createObject("java","coldfusion.runtime.SessionTracker");
sessionCollection = sessionTracker.getSessionCollection(app); 
```

它为所有当前活动的会话返回 a `struct`of`jsessionid`和会话的变量。

鉴于我`jsessionid`有效地强制用户退出，是否可以强制会话结束？

谢谢，

理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:39:18.713

因此，当用户登录时，我`user`会在他们的会话中设置一个结构，以便删除他们的登录状态。使用`sessionTracker`I 可以获得特定用户的会话，只需删除`user`他们当前会话中的结构。

```
app = application.getApplicationSettings().name;
sessiontracker = createObject("java","coldfusion.runtime.SessionTracker");
sessionCollection = sessionTracker.getSessionCollection(app);

userSession = sessiontracker.getSession(app, sessionID));

structDelete(userSession, "user"); 
```

不确定这是否是最好的方法，但它似乎对我有用。希望它可以帮助人们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:25:41.973

您是否尝试过在 application.cfc 中使用 onSessionEnd？因为我们可以在注销过程中手动触发它，或者如果用户关闭浏览器或其他任何效果很好的东西，它会自动触发。这就是我们使用它的方式。

在 application.cfc 中，我们触发 onSessionEnd 并触发同样在 application.cfc 中的注销功能，并执行所有清理工作和日志记录。

```
<cffunction name="OnSessionEnd" access="public" returntype="void"
                 output="false" hint="Fires when the session is terminated.">
        <cfargument name="SessionScope" type="struct" required="true" />
        <cfargument name="ApplicationScope" type="struct"
                                  required="false" default="#StructNew()#" />
        <cfargument name="timedOut" type="boolean" required="false" default="true">
                <cfinvoke thisSessionScope="#SessionScope#"
                      timedOut="#arguments.timedOut#" method="logout">
                </cfinvoke>
            <cfset structClear(arguments.sessionScope) >
         <!--- Return out. --->
        <cfreturn />
    </cffunction> 
```

希望这可以帮助

# c - 我们可以在 C 中反转这个字符串吗？

> ID：14663206
> 
> 赞同：-2
> 
> 时间：2013-02-02T15:04:25.597
> 
> 标签：c, string, format

我希望这很简单。这些是由反斜杠分隔的 20 个十六进制值`\`，C 编译器确实使它们成为 33 个字符的字符串，因为`\NUMBER`单个值`\NUMBER+ALPHA`= 2 个字节和`\ALPHA+NUMBER`2 个字节。

```
char str[] =
"\b3\bc\77\7\de\ed\44\93\75\ce\c0\9\19\59\c8\f\be\c6\30\6";
//when saved is 33 bytes 
```

我的问题是在它被保存到磁盘上的 33 个字节之后，我们可以（在读取 33 个字节之后）重新制作我们在 C 中的相同表示吗？所以程序打印`"\b3\bc\77\7\de\ed\44\93\75\ce\c0\9\19\59\c8\f\be\c6\30\6"`，这里有问题解决者吗？

```
"\b3\bc\77\7\de\ed\44\93\75\ce\c0\9\19\59\c8\f\be\c6\30\6";
//when read back program should output this ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:29:40.010

您拥有的字符串文字：

```
"\b3\bc\77\7\de\ed\44\93\75\ce\c0\9\19\59\c8\f\be\c6\30\6" 
```

将产生根据[C89](http://flash-gordon.me.uk/ansi.c.txt)的未定义行为（不确定 C89 的源是否可以信任，但我在下面的观点仍然成立）和根据[C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)标准的实现定义的行为。特别是，`\d`, `\e`, `\9`,`\c`是标准中未定义的转义序列。`gcc`不会抱怨`\e`，因为它是代表 ESC 的 GNU 扩展。

由于存在实现定义的行为，因此我们有必要知道您使用的是什么编译器，因为结果可能会有所不同。

另一件事是，您没有*清楚地*表明您在编译后知道字符串的内容。（更清晰的显示方法是包含字符串在内存中的样子的十六进制转储，并显示您如何知道转义序列）。

这就是编译器识别*看起来像十六进制字符串的方式：*

```
String: \b  3 \b  c \77 \7 \d  e \e  d \44 \9  3 \75 \c  e \c 0  \9 \1  9 \5  9 \c  8 \f \b  e \c  6 \20 \6
Char:   \b  3 \b  c \77 \7  d  e \e  d \44 \9  3 \75  c  e  c 0   9 \1  9 \5  9  c  8 \f \b  e  c  6 \20 \6
Hex:    08 33 08 63  3f 07 64 65 1b 64  24 39 33  3d 63 65 63 30 39 01 39 05 39 63 38 0c 08 65 63 36  18 06 00 
```

拐弯抹角就够了。假设您正在使用`gcc`编译代码（忽略警告）。运行代码时，整个代码`char[]`使用`fwrite`. 我还假设源代码中只使用小写字符。

您应该将所有可能的转义序列`\xy`（看起来像 2 位十六进制数）映射到 1 或 2 个字节的序列。它们的数量并不多，您可以编写一个程序来模拟编译器的行为：

*   如果`x`是`a`, `b`, `f`（其他转义序列，如`\n`不是十六进制数字）和`e`（由于 GNU 扩展）中的任何一个。它被映射到特殊字符。
*   （如果您在源代码中使用大写字符，请注意`\E`映射到 ESC）
*   如果`xy`形成一个有效的八进制序列。它映射到具有相应值的字符。
*   如果`x`形成一个有效的八进制序列。它映射到具有相应值的字符。
*   否则，`x`保持不变。
*   如果`y`不消耗，则`y`保持不变。

请注意，实际`char`可能来自 2 种不同的方式。例如，`\f`and`\14`将映射到相同的`char`. 在这种情况下，可能无法取回源中的字符串。您最多可以猜测源中的字符串是什么。

以您的字符串为例，开头，`08`并且`33`可以来自`\b3`，但也可以来自`\10\63`。

使用映射生成，有些情况下映射很清楚：大于`3f`不能来自八进制转义序列的十六进制，并且必须来自对原始字符串中字符的直接解释。由此可知，如果`e`遇到，一定是looks-like-hex序列中的第二个字符。

您可以使用地图作为指导，并将模拟作为检查地图是否会返回 ASCII 码的方法。在对源代码中声明的字符串一无所知的情况下，您最多可以得出源代码中原始（损坏）字符串的候选列表。如果您至少知道源代码中字符串的长度，则可以减少候选列表的大小。

# java - 在 Eclipse 中更改 .classpath 文件的名称和/或路径

> ID：14663211
> 
> 赞同：3
> 
> 时间：2013-02-02T15:05:08.820
> 
> 标签：java, eclipse, scala, classpath, sbt

我使用 Dropbox 在三台不同的机器之间共享一个 Eclipse 项目。现在的问题是 .classpath 文件中的路径在所有机器上都不相同。我试图替换`/Users/username`为，`~`但这不起作用。但是，Dropbox 在不同的机器上同步该文件，这会导致问题。

有没有办法在每个项目的基础上配置该 .classpath 文件的名称和/或路径？

PS：这与版本控制无关。我知道并在这个项目中使用它，但我需要一个解决方案才能在没有版本控制的情况下工作。

目录结构如下

*   .metadata（从同步中排除）
*   src（版本控制）
    *   .classpath
    *   我的其他文件

.classpath 文件由 sbt eclipse 命令生成。目前，它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/scala-2.10/classes" path="src/main/scala"/>
    <classpathentry kind="src" output="target/scala-2.10/classes" path="src/main/java"/>
    <classpathentry kind="src" output="target/scala-2.10/test-classes" path="src/test/scala"/>
    <classpathentry kind="src" output="target/scala-2.10/test-classes" path="src/test/java"/>
    <classpathentry kind="con" path="org.scala-ide.sdt.launching.SCALA_CONTAINER"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.typesafe.akka/akka-actor_2.10/bundles/akka-actor_2.10-2.1.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.typesafe.akka/akka-actor_2.10/srcs/akka-actor_2.10-2.1.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.typesafe/config/bundles/config-1.0.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.typesafe/config/srcs/config-1.0.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.typesafe.akka/akka-remote_2.10/bundles/akka-remote_2.10-2.1.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.typesafe.akka/akka-remote_2.10/srcs/akka-remote_2.10-2.1.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/io.netty/netty/bundles/netty-3.5.8.Final.jar" sourcepath="/Users/USERNAME/.ivy2/cache/io.netty/netty/srcs/netty-3.5.8.Final-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.google.protobuf/protobuf-java/jars/protobuf-java-2.4.1.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.google.protobuf/protobuf-java/srcs/protobuf-java-2.4.1-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.uncommons.maths/uncommons-maths/jars/uncommons-maths-1.2.2a.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.uncommons.maths/uncommons-maths/srcs/uncommons-maths-1.2.2a-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.kryo/kryo/jars/kryo-2.20.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.kryo/kryo/srcs/kryo-2.20-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.reflectasm/reflectasm/jars/reflectasm-1.07-shaded.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.reflectasm/reflectasm/srcs/reflectasm-1.07-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.ow2.asm/asm/jars/asm-4.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.ow2.asm/asm/srcs/asm-4.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.minlog/minlog/jars/minlog-1.2.jar" sourcepath="/Users/USERNAME/.ivy2/cache/com.esotericsoftware.minlog/minlog/srcs/minlog-1.2-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.objenesis/objenesis/jars/objenesis-1.2.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.objenesis/objenesis/srcs/objenesis-1.2-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/ch.ethz.ganymed/ganymed-ssh2/jars/ganymed-ssh2-build210.jar" sourcepath="/Users/USERNAME/.ivy2/cache/ch.ethz.ganymed/ganymed-ssh2/srcs/ganymed-ssh2-build210-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/commons-codec/commons-codec/jars/commons-codec-1.7.jar" sourcepath="/Users/USERNAME/.ivy2/cache/commons-codec/commons-codec/srcs/commons-codec-1.7-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/junit/junit/jars/junit-4.8.2.jar" sourcepath="/Users/USERNAME/.ivy2/cache/junit/junit/srcs/junit-4.8.2-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.specs2/specs2_2.10/jars/specs2_2.10-1.13.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.specs2/specs2_2.10/srcs/specs2_2.10-1.13-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-core_2.10/jars/scalaz-core_2.10-7.0.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-core_2.10/srcs/scalaz-core_2.10-7.0.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-concurrent_2.10/jars/scalaz-concurrent_2.10-7.0.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-concurrent_2.10/srcs/scalaz-concurrent_2.10-7.0.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-effect_2.10/jars/scalaz-effect_2.10-7.0.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.specs2/scalaz-effect_2.10/srcs/scalaz-effect_2.10-7.0.0-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.specs2/classycle/jars/classycle-1.4.1.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.specs2/classycle/srcs/classycle-1.4.1-sources.jar"/>
    <classpathentry kind="lib" path="/Users/USERNAME/.ivy2/cache/org.mockito/mockito-all/jars/mockito-all-1.9.0.jar" sourcepath="/Users/USERNAME/.ivy2/cache/org.mockito/mockito-all/srcs/mockito-all-1.9.0-sources.jar"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="lib" path="/Users/USERNAME/Downloads/Java-WebSocket-master/dist/java_websocket.jar"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:22:08.520

我不熟悉 sbteclipse，但是根据他们的[wiki page](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse)，运行`sbt eclipse`会生成 .classpath 文件。您运行它的方式是为您不想要的依赖库生成绝对路径。

有一个名为的设置`relativizeLibs`看起来像是问题所在。您应该将其设置为`true`（这显然是默认值）。然后，您可能必须确保`sbt eclipse`从相同的相对位置运行到每台计算机上的项目和库文件，但您应该能够使该结构在您的开发机器之间保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:34:19.347

到目前为止，第一个似乎确实有效的解决方案有点难看，但很容易。我只是在目录中创建了一个符号链接，`/Users/`以使 Eclipse 找到所需的文件。

```
cd /Users/
sudo ln -s USERNAME-ON-THE-CURRENT-MACHINE/ USERNAME-IN-THE-PATH-OF-THE-CLASSPATH-FILE 
```

这样我就可以轻松地在不同机器之间共享代码。

还有关于版本控制的说明：是的，我们使用版本控制。实际上，我们在一个大学项目的 Github 分支上工作，该项目有很多拉取请求、分支和几个开发人员。因此 Dropbox 解决方案不能替代 SCM。然而，它帮助我在不同计算机之间快速切换时非常灵活，我不必为了保持文件最新而处理分支、提交等。但是，当然，所有更改都准备好后提交到 Github。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:08:56.687

您可以从保管箱中删除二进制文件夹，每次保管箱同步时这样做只会覆盖您的代码，并且 Eclipse 将不得不再次构建，问题应该得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:37:07.193

无法重命名该`.classpath`文件，它是 Eclipse 需要硬编码才能工作的极少数事情之一（它与 .project 文件一起是管理 Java 项目的引导程序；Eclipse JDT 具有固有地“知道”这些文件在哪里）。

我对 sbt 一无所知，但总的来说，Eclipse Java 项目中有几种功能/技术可以保持`.classpath`清洁（不受绝对或特定于机器的路径的影响）。在典型的 Java 项目中，用户通过 Build Path 属性对项目进行更改，从而导致对`.classpath`; sbt 会定期重新生成该文件吗？可以发一下你的内容`.classpath`吗？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T00:26:49.327

虽然你可能不会这样做，因为你已经回答了这个问题......你真的不应该：

*   签入`.project`和`.classpath`文件
*   在不同的计算机之间共享项目文件，而不是使用 SCM（尤其是在您使用 Git 之后）。

我相信**Ivy**、**Gradle**、**SBT**和**Maven**都有管理`.classpath`和`.project`. 您应该调查这些选项。Eclipse 也有一个 Maven 和 Ivy 插件（[http://ant.apache.org/ivy/ivyde/](http://ant.apache.org/ivy/ivyde/)），它将根据 Ivy 和 Maven 文件自动为您管理您的类路径。

作为一名从事许多其他项目的开发人员，当有人签入`.project`和`.classpath`. 在不同的机器（`.class`和`.project`，`.classpath`）之间共享输出的文件也很危险。那是因为你可能有不同版本的 Eclipse 和不同的 JDK 编译器，更不用说 Eclipse 部分编译 Java 文件了。它现在可能对你有用，但它是一个黑客。

另外，正如我在评论中指出的那样，您要么必须记住重新获取 ivy 依赖项，要么将它们包含在同步中（即，您的`.ivy2`目录可能绝对庞大），并且由于您必须记住重新获取 ivy 依赖项，您是否那么懒惰不再生你的`.classpath`（除非SBT完全缺乏）？

# gtk - 如何知道 Gtk 窗口何时完全显示？

> ID：14663212
> 
> 赞同：3
> 
> 时间：2013-02-02T15:05:16.030
> 
> 标签：gtk

我想知道当 a`Gtk.Window`完全显示时会发出哪个信号，完全显示是指显示窗口本身及其小部件。

我尝试了几个信号：

*   显示
*   意识到
*   可见性通知事件
*   设置焦点

但它们都不能正常工作。

我在网上找到的唯一有趣的答案是[这个](http://ubuntuforums.org/showthread.php?t=1456787)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:28:24.310

[在GtkWidget::draw](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-draw)信号之后连接一个回调（之前`expose`在 GTK+2 中调用）。

**附录**

还有其他一些东西可以发挥作用：[双缓冲](http://developer.gnome.org/gtk3/stable/chap-drawing-model.html#double-buffering)、[客户端窗口](http://developer.gnome.org/gtk2/stable/gtk-migrating-ClientSideWindows.html)和（为什么不呢？）小部件可以在空闲回调中延迟其绘制的事实。

如果您想知道您的主窗口第一次出现的时间，那么在通话[`g_idle_add`](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-idle-add)后添加一个会更容易（也更明智）。`show_all`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:19:53.787

它应该是：

```
window.get_property("visible")
#Returns true if the window is visible 
```

# javascript - 不执行主干验证

> ID：14663213
> 
> 赞同：2
> 
> 时间：2013-02-02T15:05:42.783
> 
> 标签：javascript, validation, backbone.js, coffeescript

似乎没有考虑我的 Coffeescript 验证：

```
 class PokerRange extends Backbone.Model
    defaults:
        id:0
        cards:[[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12]]

    validate: (attributes) ->
        if attributes.id<0 then "id should be positive"

window.firstrange= new PokerRange id:5
console.log window.firstrange.toJSON()
window.firstrange.set("id",-4)
console.log window.firstrange.toJSON() 
```

这是结果：

```
Object {id: 5, cards: Array[13]}
Object {id: -4, cards: Array[13]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:28:38.537

我找到了原因，我只是忘记将选项传递给 set 方法 {validate:true}

```
 class PokerRange extends Backbone.Model
    defaults:
        id:0
        cards:[[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12],[0..12]]
    validate: (attributes) ->
        if attributes.id<0 then "id should be positive"

window.firstrange= new PokerRange id:5

window.firstrange.on "invalid", (model, error) ->  alert(error)

console.log window.firstrange.toJSON()
window.firstrange.set {id:-4}, {validate:true}
console.log window.firstrange.toJSON() 
```

# ruby-on-rails - 在运行测试用例时更改环境

> ID：14663218
> 
> 赞同：-2
> 
> 时间：2013-02-02T15:06:26.090
> 
> 标签：ruby-on-rails, unit-testing

我必须在运行测试用例时更改我的 rails 环境。

```
if Rails.env.production?
  # Do something
else
  # Do something else
end 
```

我如何在测试用例中更改我的 Rails 环境。我正在使用 rails 2.3.16 和 ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:49:59.587

如果您想测试该代码，您需要通过执行类似的操作来存根该调用。

`Rails.stub_chain(:env, :production?).and_return(true)`

这基本上会使任何调用`Rails.env.production?`返回 true。

您没有提供太多用于运行测试用例的框架，以便在带有模拟的 RSpec 中工作。

这将使您所做的任何调用都进入该代码块，以便您可以针对它编写测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:01:33.450

要测试上面提到的代码，如果您使用 RSpec，您可以更改 @Leo 提到的环境。如果您使用 Rails 内置框架来编写测试用例，那么您可以这样做。

```
Rails.env.stubs(:production?).returns(true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:49:17.507

利用

```
Rails.env.stubs(:production?).returns(true) 
```

如果您使用 Rails 内置的测试框架来编写测试用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T04:59:42.350

**像这样更好地表达这个问题（见下文）。我尝试将这些作为对原始问题的编辑提交，但一些“聪明”的审稿人决定拒绝我的编辑。有趣的是，那些拒绝我的编辑的人似乎对 ruby​​/rails 的经验为零**

我必须为一段依赖于 rails 环境的应用程序代码编写测试用例。代码如下所示：

```
if Rails.env.production?
   # Do something
else
   # Do something else
end 
```

如何在我的测试用例中模拟 Rails 环境，以便我可以测试`if`部分和`else`部分逻辑？

我正在使用 rails 2.3.16 和 ruby​​ 1.9.3

# android - ACTION_DOWN 的行为类似于 ACTION_MOVE

> ID：14663220
> 
> 赞同：0
> 
> 时间：2013-02-02T15:06:47.673
> 
> 标签：android, touch-event, motionevent

我正在创建一个简单的 OpenGL“应用程序”来旋转三角形。我希望在第一次触摸时保存触摸位置对应的角度。然后，在运动时，将形状旋转对应于当前位置减去第一次触摸角度的角度。

我的理解是第一步应该在 中完成，第二步应该`MotionEvent.ACTION_DOWN`在`MotionEvent.ACTION_MOVE`. 但是，似乎在运动过程中调用了 ACTION_DOWN。也就是说，下面的代码会导致形状在手指被拖动时旋转（我知道它只会旋转到初始触摸的位置）：

```
private double mTheta;      

@Override
public boolean onTouchEvent(MotionEvent e) {

    super.onTouchEvent(e);

    float x = e.getX();
    float y = e.getY();

    switch (e.getAction()) {

    case MotionEvent.ACTION_DOWN:
        x -= getWidth() / 2;
        y -= getHeight() / 2;
        mTheta = Math.atan2(-x,-y) * 180.0f / Math.PI;
        GL20Renderer.mAngle = (float) mTheta;
        requestRender();
    }
    return true;
} 
```

我的代码是错误的，还是模拟器的一些奇怪行为？（我目前无法访问安卓设备。）

（附录：我最初尝试完全实现上述内容，并带有一个`MotionEvent.ACTION_MOVE`用于计算新角度和渲染的案例。该`ACTION_DOWN`案例仅保存了起始偏移角度。这不起作用，因为形状没有旋转 - 因为偏移角度在移动过程中被重新计算——这就是我在这一点上的最终结果。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:47:18.880

可能是你忘记在你的 switch/case 中放置一个 break 语句。所以一旦 ACTION_MOVE 完成，ACTION_DOWN 紧随其后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:54:20.853

需要使用 getActionMasked() 而不是 getAction()。请参阅 WarrenFaith 的评论。

# jquery - jquery mobile中的自定义数据角色

> ID：14663221
> 
> 赞同：0
> 
> 时间：2013-02-02T15:06:50.350
> 
> 标签：jquery, jquery-mobile

有没有办法通过 jquery mobile core 为加载的数据创建自定义处理程序。例如，如果在我的表单提交 jquery mobile 后得到这个：

```
<div data-role="message">
    <message>Error</message>    
    <selector>#password, #login</selector>
</div> 
```

Jquery mobile 不必将空白页面呈现为内容，而只需执行如下操作：

```
//grab
var message = $(response).find('message').text();
var selector = $(response).find('selector').text();

//show and highlight
$.mobile.showPageLoadingMsg($.mobile.pageLoadErrorMessageTheme, message, true);
setTimeout($.mobile.hidePageLoadingMsg, 1500);
if (selector) $(selector).addClass('error'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:16:08.790

这是我令人毛骨悚然的解决方案

```
(function($){
    $(document).on('pageload', function(event, data) {

        var $this = $(data.xhr.responseText);

        if ($this.attr('data-role')=='message') {
            //grab
            var message = $this.find('message').text();
            var selector = $this.find('selector').text();

            //show and highlight
            $.mobile.showPageLoadingMsg($.mobile.pageLoadErrorMessageTheme, message, true);
            setTimeout($.mobile.hidePageLoadingMsg, 1500);
            if (selector) $(selector).addClass('error');

            //stop defaults
            data.deferred.reject(data.absUrl, data.options);
        }
  });
})(jQuery); 
```

# ruby-on-rails - 如何删除“？”之后自动生成的字符串？

> ID：14663222
> 
> 赞同：1
> 
> 时间：2013-02-02T15:06:52.200
> 
> 标签：ruby-on-rails

在生产模式下，当显示上传图片的路径时，额外的随机数总是显示在 url 中。

我是这样的

**看法**

```
http://example.com<%=  commynity.image_url %> 
```

**html**

```
http://example.com/images/576/34/sample.jpg?473373516 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:37:44.363

尝试这个：

```
http://example.com<%=  commynity.image_url.split("?")[0] %> 
```

# java - 从终端捕获 System.in 事件

> ID：14663227
> 
> 赞同：0
> 
> 时间：2013-02-02T15:07:33.110
> 
> 标签：java, events

我正在开发一个应用程序，它必须从用户终端接收多条输入，同时优雅地处理无效输入并提示用户重新输入。我的第一个想法是有一个`while`循环，其主体将接受输入并验证其有效性，当它获得有效输入时设置一个标志。该标志将标记应用程序所处的阶段，并将确定下一步需要什么类型的输入，还将用作循环的终止条件。

虽然是功能性的，但这似乎相当不雅，我想知道是否有一种方法可以简单地编写一个函数，只要按下返回键以指示有新的输入要解析，就会调用该函数。类似的东西

```
public class Interface {
    public void receiveInput( final String input ){
        // Parse 'input' for validity and forward it to the correct part of the program
    }
} 
```

也许这可以通过`extending`一些 Java 类来实现，并重新实现通常会处理此类事件的其中一个函数，但这可能是我的 C++ 背景讨论。

除了构建和单元测试所需的库外，我不允许使用任何外部库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:02:37.460

从控制台读取时，您可以使用 BufferedReader

```
BufferedReader br = new BufferedReader( new InputStreamReader( System.in)); 
```

并通过调用 readLine 函数，它将处理新行：

```
String readLine = br.readLine(); 
```

你可以肯定有一个类，其中有一个读取信息并继续的函数。

这是供您参考的示例代码

```
public class TestInput {

    public String myReader(){
        boolean isExit = true;
        while (isExit){
            System.out.print("$");
            BufferedReader br = new BufferedReader( new InputStreamReader( System.in));

            try {
                String readLine = br.readLine();
                if (readLine != null && readLine.trim().length() > 0){
                    if (readLine.equalsIgnoreCase("showlist")){
                        System.out.println("List 1");
                        System.out.println("List 2");
                        System.out.println("List 3");
                    } if (readLine.equalsIgnoreCase("shownewlist")){
                        System.out.println("New List 1");
                        System.out.println("New List 2");
                    } if (readLine.equalsIgnoreCase("exit")){
                        isExit = false;
                    }
                } else {
                    System.out.println("Please enter proper instrictions");
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        return "Finished";
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println("Please Enter inputs for the questions asked");
        TestInput ti = new TestInput();
        String reader = ti.myReader();
        System.out.println(reader);
    } 
```

这是输出：

```
Please Enter inputs for the questions asked
$showlist
List 1
List 2
List 3
$shownewlist
New List 1
New List 2
$exit
Finished 
```

希望这可以帮助。

# ruby-on-rails - 将html转换为haml

> ID：14663229
> 
> 赞同：1
> 
> 时间：2013-02-02T15:07:38.973
> 
> 标签：ruby-on-rails, highcharts, haml

上面有一个 projects.html 文件。该文件可以成功运行，但是当我使用[http://html2haml.heroku.com/](http://html2haml.heroku.com/)将此 html 文件转换为 haml 文件时，haml 文件不起作用。

你能看出两个文件之间有什么区别吗？

**项目.html.erb**

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript">
  $(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Sectoral Statistics'
            },
            tooltip: {
              pointFormat: '{series.name}: <b>{point.percentage}% - {point.y} proje</b> ',
              percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return '<b>'+ this.point.name +'</b>: '+ Math.round(this.percentage) +' % - '+ this.y +' proje';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Browser share',
                data: [
                    <% @results.each do |key,value| %>     
                      ['<%= key %>',<%= value %>,<%= value %>],
                    <% end %> 
                  ]
            }]
        });
    });

});
</script> 
```

**项目.html.haml**

```
%script{:src => "http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", :type => "text/javascript"}
%script{:src => "http://code.highcharts.com/highcharts.js"}
%script{:src => "http://code.highcharts.com/modules/exporting.js"}
:javascript
  $(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Sectoral Statistics'
            },
            tooltip: {
              pointFormat: '{series.name}: {point.percentage}% - {point.y} proje ',
              percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function() {
                            return ''+ this.point.name +': '+ Math.round(this.percentage) +' % - '+ this.y +' proje';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'Browser share',
                data: [
                     @results.each do |key,value|      
                      [' key ', value , value ],
                  ]
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:37:12.707

我认为这是`html2haml`.

在您的 HTML 中，您的最后一个`script`标签看起来像这样（为简洁起见，我已将其删减）：

```
<script type="text/javascript">
  $(function () {
  ...
});
</script> 
```

第一行是缩进的，但最后一行不是。`html2haml`在确定如何缩进 javascript 时只查看第一行，这导致 Haml 看起来像：

```
:javascript
  $(function () {
  ...
}); 
```

最后一行 – `});`– 没有缩进。

要解决它，您应该在您的 HTML 或生成的 Haml 中修复缩进。

请注意，您应该注意[另一个过滤器错误](https://github.com/haml/html2haml/issues/9)。`:javascript`它认为在这种情况下你应该对那个没问题。

# gwt - GWT CustomScrollPanel - 如何停止默认滚动条显示在我的自定义滚动条之上？

> ID：14663230
> 
> 赞同：1
> 
> 时间：2013-02-02T15:07:40.713
> 
> 标签：gwt, scroll, scrollbar, vaadin, custom-scrolling

我尝试`CustomScrollPanel`使用我自己的实现`HorizontalScrollbar`和`VerticalScrollbar`实现，每个都`DrawingArea`从`asWidget()`. `DrawingArea`似乎被渲染但仅在本机滚动条下方（不是*小*部件的一部分`DrawingArea`）。我期待它们显示*而不是*原生滚动条。我如何确保是这种情况？

（PS 我在[GWT CustomScrollPanel 示例](https://stackoverflow.com/questions/11020102/gwt-customscrollpanel-example)中尝试了该示例，但无济于事。）

# hibernate - Maven 中的休眠依赖项在 bean 中不可用

> ID：14663235
> 
> 赞同：0
> 
> 时间：2013-02-02T15:08:16.307
> 
> 标签：hibernate, jsf, maven

我试图设置一个在 jboss 容器中运行的 jsf、hibernate 项目。我的 pom 文件应该引入我的依赖项并让我访问我的 bean 类中的休眠注释。然而，休眠 jar 文件被拉入我的目标文件夹，并且来自这些 jar 的注释在我的类文件夹中对我不可用，即使我尝试导入 org.hibernate。在我用 maven 将它们拉入后，我应该手动添加这些罐子，我想这应该自动完成吗？

下面是我的pom文件。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>net.bluedash</groupId>
<artifactId>jsfdemo</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>jsfdemo Maven Webapp</name>
<url>http://maven.apache.org</url>

<repositories>
    <repository>
        <id>jvnet-nexus-releases</id>
        <name>jvnet-nexus-releases</name>
        <url>https://maven.java.net/content/repositories/releases/</url>
    </repository>
    <repository>
        <id>jboss-public-repository-group</id>
        <name>JBoss Public Repository Group</name>
        <url>http://repository.jboss.org/nexus/content/groups/public/</url>
        <layout>default</layout>
        <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
        </releases>
        <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
        </snapshots>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>jboss-public-repository-group</id>
        <name>JBoss Public Repository Group</name>
        <url>http://repository.jboss.org/nexus/content/groups/public/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <!-- MySQL database driver -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.9</version>
</dependency>

<!-- Hibernate framework -->
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-core</artifactId>
<version>4.1.9.Final</version> 
```

```
<!-- Hibernate library dependecy start -->
<dependency>
    <groupId>dom4j</groupId>
    <artifactId>dom4j</artifactId>
    <version>1.6.1</version>
</dependency>

<dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency>

<dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2.1</version>
</dependency>

<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2</version>
</dependency>
<!-- Hibernate library dependecy end -->

<dependency>
    <groupId>javax.transaction</groupId>
    <artifactId>jta</artifactId>
    <version>1.1</version>
</dependency>
</dependencies>

<build>
    <!-- This lets maven know where the hibernate cfg file is -->
    <resources>
        <resource>
            <filtering>true</filtering>
            <directory>resources.hibernate</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>deploy</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>

    <finalName>jsfdemo</finalName>
</build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:39:59.293

请加：

```
<dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>                      
</dependency> 
```

其中：
hibernate.version = 3.4.0.GA 用于 JPA1
4.1.x.final 用于 JPA2

hibernate-entitymanager 将下载 hibernate-annotations 和 hibernate-jpa-2.0-api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:37:26.210

Inside eclipse, once I downloaded the maven extensions, I was able to right click on my project->select Maven->update project. This cause my project to build itself and produced the project as it should be.

# java - 通过定时器类执行批处理

> ID：14663240
> 
> 赞同：0
> 
> 时间：2013-02-02T15:08:31.860
> 
> 标签：java

我的 C: 驱动器中有一个名为 abc.bat 的批处理文件，我想每两分钟执行一次。我必须用 Java 来做这件事。我需要使用这个`TimerTask`类。以下是我当前的代码：

```
import java.util.TimerTask;
import java.util.Date;
import java.util.Timer;

// Create a class extends with TimerTask
public class ScheduledTask extends TimerTask {

    // Add your task here
    public void run() {
        Runtime.getRuntime().exec("cmd.exe /c start abc.bat");
    }
}

//Main class
public class SchedulerMain {
    public static void main(String args[]) throws InterruptedException {

        Timer time = new Timer(); // Instantiate Timer Object
        ScheduledTask st = new ScheduledTask(); // Instantiate SheduledTask class
        time.schedule(task, now ,TimeUnit.SECONDS.toMillis(2));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:26:55.573

如果您的`abc.bat`文件位于`c:\`然后使用

```
Runtime.getRuntime().exec("cmd.exe /c start c:\\abc.bat"); 
```

您还需要创建

```
java.util.Date now = new java.util.Date(); 
```

如果你想使用它`time.schedule(task, now ,TimeUnit.SECONDS.toMillis(2));`
或只是使用`time.schedule(task, new java.util.Date() ,TimeUnit.SECONDS.toMillis(2));`

# php - 用数组中的实际价格替换价格简码

> ID：14663244
> 
> 赞同：0
> 
> 时间：2013-02-02T15:09:00.297
> 
> 标签：php, regex

我有一个这样的价格简码：

```
[price ELEPHANT]
[price MONKEY_345]
[price TIGER.3TAIL] 
```

其中大写字母（带有扩展名，如果有的话）是产品 SKU。

我已经对 SKU 和 PRICE 运行了数据库查询，所以现在我想将文本中的简码替换为商品的实际价格。

`[price ELEPHANT]`变成`46.97`

1.) 我一直在使用 preg_replace，但无法使用“。” 或 SKU 中的“_”：

```
$text = '<p>We have the price: [price CANOPY3.75B]. This is some more text.</p>';
$pattern = '/\[(\w+) (\w+)\]/';
$replacement = '$2';
echo preg_replace($pattern, $replacement, $text); 
```

2.) 一旦我确定了简码 SKU 值，我如何使用它在数组中搜索相关价格？

（希望我的代码块没问题——这是我在这里的第一篇文章。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:14:30.220

假设您有以下带有“名称-价格”对的数组：

```
$prices = array('ELEPHANT' => 46.97, 'CANOPY3.75B' => 20.35, 'TIGER.3TAIL' => 30 ... etc.); 
```

然后您可以使用以下代码：

```
$prices = array('ELEPHANT' => 46.97, 'CANOPY3.75B' => 20.35, 'TIGER.3TAIL' => 30,);

$text = '<p>We have the price: [price CANOPY3.75B]. This is some more text.</p>';
$pattern = '/\[price (.*?)\]/';
echo preg_replace_callback($pattern, 
        function($match)
        { 
            global $prices;
            return isset($prices[$match[1]]) ? $prices[$match[1]] : $match[1]; 
        }, 
        $text);
//output: We have the price: 20.35\. This is some more text. 
```

# sql-server-2008 - 将 Visual Studio 2008 升级到 SP1 以安装 SQL Server 2008 Management Studio

> ID：14663245
> 
> 赞同：0
> 
> 时间：2013-02-02T15:09:01.997
> 
> 标签：sql-server-2008, visual-studio-2008, ssms

如果我已经拥有 Microsoft Visual Studio 2010，为什么需要将我的 Visual Studio 2008 升级到 SP1 才能安装 SQL Server 2008 Management Studio？如何避免不再将我的 Visual Studio 2008 升级到 SP1 以成功安装 SQL Server 2008 Management Studio？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:40:16.540

如果您有 Visual Studio 2008 和一个或多个 2008 Express Edition，则必须将它们全部升级到 SP1。

# connectivity - c#服务器和android客户端，连接

> ID：14663247
> 
> 赞同：1
> 
> 时间：2013-02-02T15:09:28.520
> 
> 标签：connectivity

我正在尝试在 C# 中开发一个应用程序，它充当 Android 手机的服务器。我在 C# 中将 32feet.net 用于蓝牙，我有一个在 android 中运行的服务器，它只是向服务器发送一个套接字。在 pc 中运行的服务器需要监听连接并显示连接状态。所有这些都是我项目的基础。服务器代码如图所示：

```
namespace testserver
{
class Program
{

    static void Main(string[] args)
    {

        BluetoothClient bc = new BluetoothClient();
        BluetoothDeviceInfo[] dev;
        BluetoothDeviceInfo td=null;
        Guid id = new Guid("{00112233-4455-6677-8899-aabbccddeeff}");
      //  Console.WriteLine(id.ToString());
       // Console.Read();
        dev = bc.DiscoverDevices();
        foreach (BluetoothDeviceInfo d in dev)
        {
            if (d.DeviceName == "ST21i")//my phone name
            {
                td=d;
                break;
            }
        }
        try
        {

            BluetoothAddress addr = td.DeviceAddress;
            BluetoothListener bl = new BluetoothListener(addr, id);
            bl.Start();
            if (bl.AcceptSocket() != null)
                Console.WriteLine("Success");
        }
        catch (Exception e)
        {
            Console.WriteLine("Exception : "+e.Message);
            Console.Read();
        }

    }
} 
```

}

这是我的安卓代码：

```
public class MainActivity extends Activity {

 BluetoothAdapter adapter;
     BluetoothDevice bd;
BluetoothSocket sock;
OutputStream ostr;
int REQUEST_ENABLE_BT;
String str="5C:AC:4C:DD:CC:0D";

private static final UUID id=UUID.fromString("00112233-4455-6677-8899-         aabbccddeeff");
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    adapter=BluetoothAdapter.getDefaultAdapter();

   if (!adapter.isEnabled()) {
Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    }

    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
 Toast.makeText(getApplicationContext(), "clicked button",            Toast.LENGTH_LONG).show();
    try
    { 
        bd=adapter.getRemoteDevice(str);                      Toast.makeText(getApplicationContext(),"Server is    running at   "+bd.getName().toString()+"...", Toast.LENGTH_LONG).show();
                   sock=bd.createInsecureRfcommSocketToServiceRecord(id);                    sock.connect();
                ostr=sock.getOutputStream();
                ostr.write(0);
            }
            catch(Exception e)
            {
                 Toast.makeText(getApplicationContext(),e.getMessage(), Toast.LENGTH_LONG).show();
            }
        }
    });

} 
```

}

我的问题是：

1）在 pc 中我遇到异常，请求的地址在其上下文中无效（因此服务器无法运行） 2）在电话中，服务发现失败（因为服务器不可用）

如何更正服务器并运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:20:03.727

我将蓝牙监听器对象的创建从 `BluetoothListener bl = new BluetoothListener(addr, id);`更改为 `BluetoothListener bl = new BluetoothListener(id);`，一切正常..

# if-statement - 很奇怪：if x not in statement Python 2.7

> ID：14663248
> 
> 赞同：0
> 
> 时间：2013-02-02T15:09:40.437
> 
> 标签：if-statement, python-2.7

我遇到了一件很奇怪的事情，至少对我来说是这样。

```
if month not in (02, 04, 06, 11):
        print "Good" 
```

每当我添加`09`到元组时，我都会收到一个错误：`SyntaxError: invalid token`它只针对这个特定的数字。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:11:40.743

当您在数字上使用前导`0`时，Python 将其解释为[base-8（八进制）数字](http://docs.python.org/2/reference/lexical_analysis.html#grammar-token-octinteger)。删除前导`0`：

```
>>> 10
10
>>> 010
8
>>> 9
9
>>> 09
  File "<stdin>", line 1
    09
     ^
SyntaxError: invalid token 
```

Python 3 对此进行了改进；*现在所有*带前导的数字`0`都被认为是无效的，要创建一个八进制数字，您*总是*必须使用`0o`前缀：

```
>>> 010
  File "<stdin>", line 1
    010
      ^
SyntaxError: invalid token
>>> 0o10
8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:12:00.107

带前导`0`s 的数字被认为是八进制，因此`09`无效...只需删除 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:14:00.727

我认为您需要在可能将其解释为八进制数的数字之前去掉零...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T15:18:36.190

你可以试试这个。（已经回答了为什么 09 提供错误的原因）

```
month='05'
if month not in ('02', '04', '06', '11','09'):
        print "Good" 
```

# android - 使用流媒体广播 URL 开发商业应用程序是否合法？

> ID：14663250
> 
> 赞同：-7
> 
> 时间：2013-02-02T15:10:31.170
> 
> 标签：android, iphone, audio-streaming, radio

一个简单的问题是：我们可以使用音频流广播 URL（来自广播站点或广播链接或类似的）来开发一个小的广播流商业应用程序（iPhone 或 Android）吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:14:17.883

首先通过电话或电子邮件联系广播电台办公室，并从他们那里获得书面“OK”。

实现：对于android是没有问题的。对于 iOS：在 Apple 评论中，您必须解释为什么这不仅仅是通过浏览器打开一个简单的 URL。因此，您应该添加一些平台功能以被接受。

联系他们不仅是为了法律，而且他们（应该）了解您，也许他们会使用 2 个链接更新他们的网站：从 Google Play 或 AppStore 下载（这 2 个链接）

如果他们知道有 15000 台设备在监听他们，也许他们也会升级硬件，也升级带宽。

我希望它有所帮助。

# css - 用 feColorMatrix 匹配 SVG 中的颜色

> ID：14663252
> 
> 赞同：8
> 
> 时间：2013-02-02T15:10:42.737
> 
> 标签：css, svg, vector-graphics, colormatrix, svg-filters

我在 SVG 中使用阴影创建了一个投影`SourceAlpha`，所以它是纯黑色的。使用`feColorMatrix`我稍微降低了不透明度，但它仍然不像我想要的那样 - 我希望阴影的颜色与特定的颜色值相匹配。所以我更深入地研究了`feColorMatrix`.

现在我不用`SourceAlpha`作阴影的来源，但是`SourceGraphic`. 由于我的矢量图是纯白色`rgba(255, 255, 255, 1)`的，我可以这样计算阴影的颜色：

```
<feColorMatrix in="the-shadow" result="color-out" type="matrix"
                values="0.0157 0      0      0 0
                        0      0.3059 0      0 0 
                        0      0      0.7765 0 0 
                        0      0      0      1 0  "/> 
```

结果应该是一个深蓝色的阴影又名`rgba(4, 78, 198, 1)`。

实际上这是可行的，我相信计算都是正确的，但是当使用相同颜色的 CSS3 创建阴影时，有一个明显的区别：SVG 过滤器似乎渲染颜色有点太亮了。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T15:21:51.363

feColorMatrix 像大多数过滤器一样在线性RGB 颜色空间中运行。如果您想要 sRGB 颜色，请尝试将[color-interpolation-filters](http://www.w3.org/TR/SVG/painting.html#ColorInterpolationFiltersProperty) ="sRGB" 设置为 feColorMatrix 上的属性。

```
 <svg width="100%" xmlns:xlink="http://www.w3.org/1999/xlink"

    viewBox="0 0 640 480" height="100%"
    xmlns="http://www.w3.org/2000/svg">

    <filter id="cm">

    <feColorMatrix in="SourceGraphic" type="matrix"
                    values="0.0157 0      0      0 0
                            0      0.3059 0      0 0 
                            0      0      0.7765 0 0 
                            0      0      0      1 0  "/>

    </filter>

    <filter id="cmRGB">

    <feColorMatrix color-interpolation-filters="sRGB" in="SourceGraphic" type="matrix"
                    values="0.0157 0      0      0 0
                            0      0.3059 0      0 0 
                            0      0      0.7765 0 0 
                            0      0      0      1 0  "/>

    </filter>

    <rect width="100%" height="50%" fill="white" filter="url(#cm)"/>

    <rect y="50%" width="100%" height="100%" fill="white" filter="url(#cmRGB)"/>

    </svg>
```

它在 Firefox 上对我来说确实看起来不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T09:51:57.013

虽然我的回答重复了同样的想法，但我必须添加的内容太多了，无法发表评论。

我不确定`linearRGB`标准中有什么，但我希望它是，呃，*线性*的。即白色转换为（变暗两次）

```
R | ½ 0 0 0 0
G | 0 ½ 0 0 0
B | 0 0 ½ 0 0
A | 0 0 0 1 0 
```

应该产生与 相同的颜色`rgb(50%, 50%, 50%)`，不是吗？

以及用 (ligthen-twice) 转换的黑色

```
R | ½ 0 0 0 ½
G | 0 ½ 0 0 ½
B | 0 0 ½ 0 ½
A | 0 0 0 1 0 
```

预计是相同的 50% 灰色。

但是我实际看到的结果比预期的要轻得多，颜色选择器显示`#BCBCBC`而不是`#808080`. 另一方面，`color-interpolation-filters="sRGB"`使结果正确（检查了macbook和win10华硕笔记本的默认设置）。

[https://jsfiddle.net/7wvy57fq/2/](https://jsfiddle.net/7wvy57fq/2/)

# php - PHP+.htaccess：如何创建像ID+文章名称一样的URL？

> ID：14663256
> 
> 赞同：1
> 
> 时间：2013-02-02T15:11:14.877
> 
> 标签：php, .htaccess, friendly-url

我正在考虑如何创建这样的路由系统：

```
http://website.com/something/12345-my-new-car 
```

它说在 URL 中放置了文章的 ID 和 slug 名称。我当前的设置如下（[http://website.com/something/12345](http://website.com/something/12345)）：

```
RewriteRule ^something/(.*)$  index\.php?id=something&something_id=$1 [L,QSA] 
```

现在我想在文章 ID 后面添加 slug 名称。第一个想法 - 手动构建它 - 类似于：

```
<a href="/something/<?php echo $id.'-'.$slug;?>">link</a> 
```

然后获取当前 URL 并`explode()`解析 url( `/`)，然后再次`explode()`解析返回 me`-`的=> 。现在我会挑选相应的文章。`12345-my-new-car``12345`

但我不是很喜欢这种方式，有点笨拙。

有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:14:38.897

这是我的`.htaccess`文件：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([a-zA-Z-_0-9_/]+)/?$ index.php?args=$1 [L] 
```

在我的代码中，我使用这种方法：

```
$agri = explode("/",$_GET['args']); 
```

我和我的争论者有一张桌子。现在我可以用这一切来做。

# html - Html 5 doctypes & quirksmode

> ID：14663257
> 
> 赞同：0
> 
> 时间：2013-02-02T15:11:27.423
> 
> 标签：html, doctype

我的问题是关于 HTML 文档类型。doctype 指示浏览器在解析 html 文档时要遵循哪些规则。当 html 文档具有 ie html 5 规则但浏览器是旧的 ex ie 6,7 时会发生什么？旧浏览器会以不可预知的方式行为不端吗？文档会以 quirksmode 呈现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:10:18.987

> doctype 指示浏览器在解析 html 文档时要遵循的规则

不，它没有。它向验证器指示应该使用哪些规则来验证 HTML 文档，并且它已被浏览器供应商选为页面年龄和作者能力的有用指标，允许浏览器在[标准之间切换，几乎标准和怪癖模式](https://developer.mozilla.org/en-US/docs/Quirks_Mode_and_Standards_Mode)，以便大多数页面，甚至是旧页面，都按照原作者的预期呈现。它通常不会对解析产生任何影响，例如 HTML5 解析规则要求文档以与 DOCTYPE 相同的方式进行解析。

> 当 html 文档具有 ie html 5 规则但浏览器是旧的 ex ie 6,7 时会发生什么？

期望浏览器以标准模式呈现页面，但不支持[任何新元素或功能](http://caniuse.com/)。

> 旧浏览器会以不可预知的方式行为不端吗？

大多数情况下，它们会以可预测的方式行为不端，鉴于完全相同的内容，任何单个浏览器都不太可能做两种不同的事情。如果旧浏览器的用户占您受众的很大一部分，那么要做的关键是在这些旧浏览器中进行测试。

> 文档会以 quirksmode 呈现吗？

不，HTML5 DOCTYPE 是触发所有浏览器以标准模式呈现的最短字符串。这就是为什么它被选为 HTML5 DOCTYPE。

# ios6 - 如何处理继承自 iOS UIViewController 类的 GLKViewController 的 RootViewController？

> ID：14663259
> 
> 赞同：1
> 
> 时间：2013-02-02T15:11:41.607
> 
> 标签：ios6, opengl-es-2.0

我需要`OpenGL ES 2.0`在 iOS 中包含用于视频渲染的函数，这些函数由`GLKViewController`该类处理。问题是，我的主类是`UIViewcontroller`并且我需要在`GLKViewController`其中派生（我以`GLCameraRipple`示例作为参考）。`UIViewController`处理`rootviewcontroller`并且它不允许创建用于渲染我的视频的纹理，即使来自样本缓冲区的图像数据很好。我对调用`appDelegate`函数`UIViewController`而不是`GLKViewController`（根据`GLCameraRipple`示例）感到困惑。我是新手`OpenGL`。请有人让我知道如何正确处理这个问题，我真的被困在这一点上，不知道如何继续前进。

提前致谢。

* * *

编辑：您好 Valentin Radu，非常感谢您的回复。浏览了您的回复和您建议的链接并解决了它们，我的问题仍然没有得到解答。让我详细说明我的情况。我应该在 iOS 设备（iPhone 或 iPod）上捕获 YUV 视频，对捕获的 YUV 视频进行编码和解码，然后显示解码后的视频。就捕获、编码和解码而言，一切都完美无缺。由于将 YUV 像素格式转换为 BGRA 像素格式需要大量时间，我选择了 openGL（参考 GLCamera 波纹示例）。就我的应用而言，主类是 UIViewController。为了显示 YUV 数据，我使用了 GLKViewController 类。问题是如何从 UIViewController 类访问 GLKViewController 类。我无法从 appdelegate 调用 GLKViewController 或 GLKView。流程类似于，appdelegate  UIViewController  GLKViewController（在这个类中调用 GLKView） 显示 YUV 像素数据。我别无选择，只能遵循这个流程，因为 UIViewController 位于处理其他相关项目的顶部。问题的下一部分。根据 Valentin Radu 的建议，我尝试使用 GLKView 并尝试渲染我的视频。如果 GLKView 是在 GLKViewController 中定义的，那么我在处理 rootViewController 时遇到了困难。请原谅我并纠正我的错误。问题的下一部分。根据 Valentin Radu 的建议，我尝试使用 GLKView 并尝试渲染我的视频。如果 GLKView 是在 GLKViewController 中定义的，那么我在处理 rootViewController 时遇到了困难。请原谅我并纠正我的错误。问题的下一部分。根据 Valentin Radu 的建议，我尝试使用 GLKView 并尝试渲染我的视频。如果 GLKView 是在 GLKViewController 中定义的，那么我在处理 rootViewController 时遇到了困难。请原谅我并纠正我的错误。

提前致谢！

# c# - 我需要帮助了解 C# 项目在 Visual Studio 中的组织方式

> ID：14663260
> 
> 赞同：4
> 
> 时间：2013-02-02T15:11:52.087
> 
> 标签：c#, visual-studio-2010, installation

在过去的几周里，我一直在自学 C#，作为一个选择 IDE 是记事本的人，我在过渡到 Visual Studio 时遇到了一些困难（我使用的是 2010 express）。特别是，我想知道 Namespace-Class-Method 层次结构的组织如何在界面中以视觉方式表现出来。我很难理解它，更重要的是，如何使用界面来有效地组织和跟踪我的项目。

例如，有“解决方案资源管理器”，但没有 C#“解决方案”之类的东西（我知道）。我怀疑这是微软的营销代表了一个更通用的开发术语，但我想不通。我可以选择创建新的“项目”。“项目”是“解决方案”吗？

我对命名空间也有些模糊。我怀疑命名空间相当于 Java 中的类库。在现实世界中如何使用命名空间有哪些示例？比如说，我正在开发一个个人理财应用程序。我会将与该应用程序相关的所有内容都放在一个解决方案中吗？或者我会创建一个命名空间，比如说，现金账户和投资账户的命名空间？

命名空间中有我的 *.cs 文件，但我似乎无法弄清楚如何在我的命名空间中创建一个新的 *.cs 文件。根据资源管理器层次结构，我希望任何使用命名空间的类都会出现在该列表中，并且我可以根据需要使用它。例如，我可以创建 enterDeposits.cs 和 enterWithdrawals.cs 而无需创建新项目。

我在网上找到了一些教程，告诉我如何做事（比如创建一个新项目），但是如果没有对 IDE 的词汇有扎实的理解，我不确定我是否能尽可能地组织好一切. 帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:17:14.027

Visual Studio 中的解决方案和项目是组织代码的方式——它们是 IDE 用来根据需要向编译器和其他构建组件发出命令的容器。

解决方案包含项目 - 项目包含代码文件。

每个项目都将编译为单独的 DLL 或 EXE，即*部署*单元。

命名空间可以*分布*在项目和解决方案中，并位于不同的 DLL/EXE 中。它们是*逻辑*分离的单位。

在 Visual Studio 中，您可以在其属性中为每个项目设置一个基本命名空间。默认情况下，您创建的每个目录都将作为内部命名空间的一部分附加到该目录。默认情况下，在目录中创建的任何源代码文件都将获得该命名空间。

通常，命名空间是一种纯代码结构。

在 C# 文件中，您有一个[`namespace`声明](http://msdn.microsoft.com/en-us/library/014batd5.aspx)- 这可以是*任何*有效的命名空间标识符，并且可以在*任何*项目/解决方案/代码文件中。

我确实建议看一下 MSDN——它是 C# 和 Visual Studio 的一个很好的资源。

*   [解决方案和项目基础](http://msdn.microsoft.com/en-us/library/b142f8e7.aspx)
*   [创建解决方案和项目](http://msdn.microsoft.com/en-us/library/zfzh36t7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:20:35.080

*   您的第一个问题已在此处得到解答：[Visual Studio 项目与解决方案](https://stackoverflow.com/questions/2389226/visual-)
*   您可以在此处找到有关您的发送问题的大量信息：[命名空间（C# 参考）](http://msdn.microsoft.com/en-gb/library/z2kcy19k%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T11:59:43.590

奥德的伟大概述。RE：根据资源管理器层次结构，任何使用命名空间的类都会出现在该列表中，我将能够根据需要使用它。你是对的，IDE 将识别 SAME 命名空间中的类。

欺骗新用户的一件事是命名空间不会继承。如果您有一个命名空间 MyProject 和另一个命名空间 MyProject.SubNamespace，编译器将不会自动链接 SubNamespacetwo。您需要指定一个 Using 语句，例如“Using MyProject.SubNamespace”，让 IDE 知道使用该命名空间中的类。

# wpf - 如何将 DateTime 绑定为 DependencyObject 的 DepedencyProperty 以便它显示在文本框中？

> ID：14663265
> 
> 赞同：0
> 
> 时间：2013-02-02T15:12:03.447
> 
> 标签：wpf, wpf-controls

我想学习如何使用依赖对象和属性。我创建了这个类，

```
 public class TestDependency : DependencyObject
    {
        public static readonly DependencyProperty TestDateTimeProperty =
            DependencyProperty.Register("TestDateTime", 
            typeof(DateTime), 
            typeof(TestDependency), 
            new PropertyMetadata(DateTime.Now));

        public DateTime TestDateTime
        {
            get { return (DateTime) GetValue(TestDateTimeProperty); }
            set { SetValue(TestDateTimeProperty, value); }
        }
    } 
```

窗口类是这样的

```
public partial class MainWindow : Window
{
    private TestDependency td;
    public MainWindow()
    {
        InitializeComponent();
        td = new TestDependency();
        td.TestDateTime = DateTime.Now;
    }
} 
```

现在我想用它来显示 TextBlock 中的当前 DateTime ，它***每秒***更新一次，方法是将它添加到网格中

```
<Grid>
    <TextBlock Text="{Binding TestDateTime,ElementName=td}" Width="200" Height="200"/>
</Grid> 
```

我可以看到 TextBlock，但其中根本没有 Date Time 值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:46:56.347

首先，如果您想每秒更新一次显示时间，您将需要一个计时器来触发更新。DispatchTimer 可以很好地解决这个问题。

```
public class TestDependency : DependencyObject
{
    public static readonly DependencyProperty TestDateTimeProperty =
        DependencyProperty.Register("TestDateTime", typeof(DateTime), typeof(TestDependency),
        new PropertyMetadata(DateTime.Now));

    DispatcherTimer timer;

    public TestDependency()
    {
        timer = new DispatcherTimer(new TimeSpan(0,0,1), DispatcherPriority.DataBind, new EventHandler(Callback), Application.Current.Dispatcher);
        timer.Start();

    }

    public DateTime TestDateTime
    {
        get { return (DateTime)GetValue(TestDateTimeProperty); }
        set { SetValue(TestDateTimeProperty, value); }
    }

    private void Callback(object ignore, EventArgs ex)
    {
        TestDateTime = DateTime.Now;
    }

} 
```

接下来，我们需要修改 XAML，使其正确绑定到更新的依赖对象。

```
<Window.DataContext>
    <local:TestDependency/>
</Window.DataContext>
<Grid>
    <TextBlock Text="{Binding TestDateTime}" />
</Grid> 
```

由于我们在 XAML 中设置了 DataContext，因此您实际上可以删除 MainWindow 构造函数中代码背后的所有代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:56:51.507

If you just want to show some values in your TextBlock, you don't need a Dependency Object here. Try something like this:

```
public partial class MainWindow : Window
{
    public DateTime Test
    { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        this.Test = DateTime.Now;
    }
}

<Grid>
    <TextBlock Text="{Binding Path=Test,RelativeSource={RelativeSource AncestorType=Window,Mode=FindAncestor}}"></TextBlock>
</Grid> 
```

Here I am not showing the code which can update the value every second. I just want to clarify that this is not the right situation to use Dependency Property. Of course you can use Dependency Property to do this. But Dependency Object and Dependency Property can offer you some extension functionality such as Data Binding. But it doesn't mean that you need to use a Dependency Object or Dependency Property as the source of the Data Binding.

# php - Firefox 尝试在本地 apache 服务器上下载 .php 文件而不是渲染结果

> ID：14663266
> 
> 赞同：1
> 
> 时间：2013-02-02T15:12:05.647
> 
> 标签：php, apache, apache2

我一直在尝试从源代码安装 Apache 和 PHP，以便它们一起工作，作为“看看我是否可以”项目。

但是，当我尝试加载“localhost”文件时，firefox 只是开始下载 .php 页面而不是打开它。

我很确定我在 ./conf/httpd.conf 中添加了正确的处理程序，它们如下所示

```
#configure for php
AddHandler php-script .php

AddType text/html .php
AddType application/x-httpd-php-source phps
AddType application/x-httpd-php5 .php 
```

我也试过更换

```
AddType application/x-httpd-php5 .php 
```

和

```
AddType application/x-httpd-php5 php 
```

和

```
AddType application/x-httpd-php .php 
```

和

```
AddType application/x-httpd-php php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:18:31.883

你有没有配置 apache 来加载 php 模块？看看这里： [http ://www.petefreitag.com/item/516.cfm](http://www.petefreitag.com/item/516.cfm)

# excel - EXCEL 将 2 列相互匹配

> ID：14663269
> 
> 赞同：1
> 
> 时间：2013-02-02T15:12:17.610
> 
> 标签：excel, formula

我有两列数据，它们看起来像这样：

```
 A         B         C          D

       1                   2        SOME RECORD
       2                   6        SOME RECORD
       3                   10       SOME RECORD
       4                   
       5
       6
       7
       8
       9
      10 
```

所以基本上A列是一个索引列表，其中一些出现在C列中，相应的记录保存在D列中。B列当前是空的，我想要做的是如果说索引2同时出现在A列和列中C（它们匹配），然后将记录放在 C2 旁边的单元格 B2 中。所以基本上我希望它看起来像这样：

```
 A         B             C          D

       1                       2        SOME RECORD
       2      SOME RECORD      6        SOME RECORD
       3                       10       SOME RECORD
       4                   
       5
       6      SOME RECORD
       7
       8
       9
      10      SOME RECORD 
```

有人可以帮忙吗？！谢谢！！！

更新：我试过这个，但它不起作用。D 列中的数据是使用 UDF 计算的，并且每 1 秒刷新一次。即使我可以看到 2 个索引相同，VLOOKUP 函数也会失败！！是因为单元格或列的格式吗？即 vlookup 是否也比较数据类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:18:42.837

假设您在 A 中的数据从 A1 开始 - 将以下内容放入 B1 并自动填充：

```
=IFERROR(VLOOKUP($A1,$C:$D,2,0),"") 
```

这包括处理缺失值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:17:40.823

你会想要这个：

B1=VLOOKUP(A1, C:D, 2, FALSE)

这将在跨越列 C 和 D 的数组中查找列 A 中的值。它将为您提供在第二列 (D) 中找到的值。FALSE 使其完全匹配，否则您可能会得到 2 和 20 匹配，因为嘿，它们有点相似......

# java - 在java中同时调用所有类的对象中的方法

> ID：14663277
> 
> 赞同：0
> 
> 时间：2013-02-02T15:12:57.403
> 
> 标签：java

我在java编程中有一个问题，我怎样才能让一个类的所有对象在java中同时调用它们自己的方法？

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:44:51.633

根据我对您的问题的理解，您为什么不将类的所有实例保存在一个集合中，然后遍历它们并在所有实例上调用您希望的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:00:25.723

这是我对您的问题的理解的示例代码：

```
public class Flip {

    private static List<Flip> instances = new ArrayList<Flip>();

    [... fields, etc]

    public Flip() {
         [...init the fields]
         synchronized(instances) {
             // if you access the instances list, you have to protect it
             instances.add(this); // save this instance to the list
         }
    }

    [... methods]

    public void calculate() {
        synchronized(instances) {
            // if you access the instances list, you have to protect it
            for (Flip flip : instances) {
                // call the doCalculate() for each Flip instance
                flip.doCalculate();
            }
        }
    }

    private void doCalculate() {
       [... here comes the original calculation logic]
    }
} 
```

关键是您必须以某种方式注册 Flip 的所有实例。稍后您可以遍历它们。

# java - listview onclick android

> ID：14663290
> 
> 赞同：2
> 
> 时间：2013-02-02T15:14:15.327
> 
> 标签：java, android, listview, android-listview, android-contacts

我正在创建一个里面有一个联系人列表的应用程序。目前该列表可以正常工作并以我想要的方式显示我的所有联系人。但是我需要为它们添加一个点击功能。一旦我按下其中一个，我想给他们打电话。我怎样才能做到这一点？由于 rss 阅读器，我已经在同一活动中有一个 onListItemClick 方法。我怎样才能过滤掉它？看看我的代码：

```
 //Load contacts into ListView on people screen
    contactListView = (ListView) findViewById(R.id.contactsListView);
    contactstock = new ArrayList<ContactStock>();

    mCursor = managedQuery(ContactsContract.Data.CONTENT_URI, null, Data.MIMETYPE + "='" + Phone.CONTENT_ITEM_TYPE + "'", null,
            ContactsContract.Data.DISPLAY_NAME + " ASC");
    int number = mCursor.getColumnIndex(Phone.NUMBER);      
    int name = mCursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME);
    while (mCursor.moveToNext()) {
        String phName = mCursor.getString(name);
        String phNumber = mCursor.getString(number);
        contactstock.add(new ContactStock(phName, phNumber));
    }
    contactListView.setAdapter(new ContactListAdapter(MainActivity.this,
            contactstock)); 
```

ContactStock.java：

```
public class ContactStock {

    private String name;
    private String number;

    public ContactStock(String name, String number) {
        this.name = name;
       this.number = number;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setNumber(String number) {
        this.number = number;
    }

    public String getName() {
        return this.name;
    }

    public String getNumber() {
        return this.number;
    }

} 
```

ContactListAdapter.java：

```
public class ContactListAdapter extends ArrayAdapter {
private final Activity activity;
private final List stocks;

public ContactListAdapter(Activity activity, List objects) {
    super(activity, R.layout.listview_detail_tab_contact_list, objects);
    this.activity = activity;
    this.stocks = objects;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View rowView = convertView;
    ContactStockView sv = null;
    if (rowView == null) {
        // Get a new instance of the row layout view
        LayoutInflater inflater = activity.getLayoutInflater();
        rowView = inflater.inflate(
                R.layout.listview_detail_tab_contact_list, null);

        // Hold the view objects in an object,
        // so they don't need to be re-fetched
        sv = new ContactStockView();
        sv.name = (TextView) rowView.findViewById(R.id.contact_name);

        sv.number = (TextView) rowView.findViewById(R.id.contact_number);

        // Cache the view objects in the tag,
        // so they can be re-accessed later
        rowView.setTag(sv);
    } else {
        sv = (ContactStockView) rowView.getTag();
    }
    // Transfer the stock data from the data object
    // to the view objects
    ContactStock currentStock = (ContactStock) stocks.get(position);
    sv.name.setText(currentStock.getName());
    sv.number.setText(currentStock.getNumber());

    // TODO Auto-generated method stub
    return rowView;
}

protected static class ContactStockView {
    protected TextView name;
    protected TextView number;
}
} 
```

我当前的列表视图代码（用于 rss 查看器）：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Uri uri = Uri.parse(links.get(position).toString());
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent);
} 
```

ListView 行 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:src="@drawable/defaultavatar" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
        android:id="@+id/contact_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:text="Who am I"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/contact_number"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:text="000000000" />

</LinearLayout> 

</LinearLayout> 
```

我使用以下代码从我点击的联系人那里获得了电话号码：

```
contactstock.get(arg2).getNumber() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:00:08.373

您应该设置两个列表视图并为每个视图设置 onItemClickListener。

```
ListView l1 = (ListView)findViewById(R.id.list1);
ListView l2 = (ListView)findViewById(R.id.list2);

// listener for the first one 
l1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }

    });

 // listener for the other
 l2.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:58:40.617

我想你说的是你有 2 个列表视图。您可以将 setOnItemClickListener 用于列表视图，而不是使用 onListItemClick。

```
 contactListView.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub

        }}); 
```

# html-agility-pack - Html Agility 包额外标签

> ID：14663295
> 
> 赞同：1
> 
> 时间：2013-02-02T15:14:55.270
> 
> 标签：html-agility-pack

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:15:40.983

您只能选择那些`<a>`具有例如`href`属性集的标签：

```
var doc = new HtmlDocument();
doc.LoadHtml(html);
var anchors = doc.DocumentNode
    .SelectNodes("//a[@href]")
    .ToList();

foreach (var anchor in anchors)
{
    //process your node here
} 
```

# java - 找不到或无法加载主类 ERROR

> ID：14663300
> 
> 赞同：0
> 
> 时间：2013-02-02T15:15:27.780
> 
> 标签：java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:25:12.043

在 Eclipse 中单击项目 -> 右键单击​​ -> 导出。选择可运行 Jar 文件。

选择在 Eclipse 中工作的启动配置。

Eclispe 将为您生成该 MANIFEST.MF 文件到您的 jar 文件中。

然后 oyu 可以在你的 cmd 上运行：java -jar niceJarfile.jar 一切都会正常工作。

如果没有打开 jar 文件并查看那里是否提到了正确的主类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:19:23.020

如果你想要一个可执行的 jar，你需要一个 MANIFEST.MF 文件来定义要运行的主类...

```
Main-Class: net.test.Class 
```

如果你想从命令行运行，你必须告诉它要运行什么类，可能还有类路径。这可以进入 .bat

# visual-studio - 在VS中自动生成局部变量？

> ID：14663301
> 
> 赞同：3
> 
> 时间：2013-02-02T15:15:48.817
> 
> 标签：visual-studio

在 Visual Studio 2012 中，当将表达式（具有已知类型）分配给未定义的标识符（例如：）`xxxx=2;`导致编译错误*"The name 'xxxx' doesn't exist in the current context"*时，建议的修复是`Generate property stub`和`Generate field stub`。

我想知道为什么没有类似的`Generate local variable`选项，以及是否有一些快捷方式以便我不需要键入它。

# git - 获取最终分支列表（这是最终提示）

> ID：14663303
> 
> 赞同：6
> 
> 时间：2013-02-02T15:16:27.403
> 
> 标签：git, tree, branch, hierarchy, git-branch

我如何获得仅是最终分支（不是任何其他提交的父级）的分支列表 - 换句话说，分支是提交树的提示（最终节点）。我希望在命令中有一些选项，例如 --final 或 --tips，`git branch`但只有 --merged、--no-merged 和 --contains 选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-21T08:12:51.073

已经有一些有用的答案，但没有给出要求的内容：列表或分支（对我来说，这意味着分支名称，而不是提交 ID）。

# 获取提示分支名称列表

```
{
        echo "** Below is list of tip branches a.k.a. final nodes."
        echo "** These aren't reachable from any other branches."
        echo "** Removing them is potentially DANGEROUS: it would make some commit unreachable."
        TIPS=$( git rev-list --branches --children | grep -v ' ' | sort )
        { while read branchname commitid message
                do grep $commitid < <(echo $TIPS) -q && echo $branchname
                done
        } < <(git branch -v --no-abbrev | sed 's/\*//' )
        echo "** end of list"
} 
```

结果如下所示：

```
** Below is list of tip branches a.k.a. final nodes.
** These aren't reachable from any other branches.
** Removing them is potentially DANGEROUS: it would make some commit unreachable.
feature-workingonit
dev
** end of list 
```

# 获取非提示分支名称列表

整理东西时，您可能希望看到非尖端分支。这是一种获取它们列表的方法。唯一的变化是`&&`成为`||`。

```
{
        echo "** Below is list of non-tip branches a.k.a. inner nodes."
        echo "** These are reachable from other branches."
        echo "** If you remove them, all commits would stay reachable, but be careful anyway."
        TIPS=$( git rev-list --branches --children | grep -v ' ' | sort )
        { while read branchname commitid message
                do grep $commitid < <(echo $TIPS) -q || echo $branchname
                done
        } < <(git branch -v --no-abbrev | sed 's/\*//' )
        echo "** end of list"
} 
```

结果如下所示：

```
** Below is list of non-tip branches a.k.a. inner nodes.
** These are reachable from other branches.
** If you remove them, all commits would stay reachable, but be careful anyway.
feature-alreadymerged
master
** end of list 
```

# 获取带有提交 ID 和消息的非提示分支名称列表

您可以根据需要进行装饰，例如通过更改：

```
echo $branchname 
```

进入

```
echo -e "$branchname\t$commitid\t$message" 
```

结果如下所示：

```
** Below is list of non-tip branches a.k.a. inner nodes.
** These are reachable from other branches.
** If you remove them, all commits would stay reachable, but be careful anyway.
feature-alreadymerged   426ac5186841876163970afdcc5774d46641abc4    Cool feature foo, ref task #1234
master  39148238924687239872eea425c0e837fafdcfd9    Some commit
** end of list 
```

然后，您可以在您最喜欢的工具中查看这些分支，看看删除它们是否有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T03:40:28.633

```
git show -s --oneline --decorate $(
        git show-branch --independent -a
) 
```

或者

```
git show -s --format=%d $(
        git show-branch --independent -a
) 
```

也许`sed`'d品尝。例如，每行拆分所有引用名称并去除分组标点符号

```
git show -s --format=%d $(git show-branch --independent -a) \
| sed 's/,/\n/g; s/[ ()]//g' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T19:57:02.003

如果您获得所有 ref 的列表，则可以列出所有不是另一个 ref 的父级的 ref：

```
refs=`git show-ref -s`
git log --oneline --decorate $refs --not `echo "$refs" | sed 's/$/^/'` 
```

这通过过滤掉所有父提交来工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T19:35:21.113

由于分支只是在工作目录中处于活动状态时添加新提交时移动的标签——所有分支都是树的“定义”叶节点。

但是我认为您要的是那些与另一个分支的叶子提交没有共同祖先的分支。这样你想要`C`and `E`，但不是`A`，`B`or`D`在下面。

```
-A-o-B-o-C
      \
       D-o-E 
```

如果是这种情况，就有可能找到所有分支的列表，这些分支不共享一个共同的祖先，即另一个分支的叶子提交。例如，`D`共享当前叶子提交`E`的共同祖先。`D`

这很可能通过脚本来完成，但我不知道有一个 git 命令可以为您完成所有分支。但是 git 过去让我感到惊讶，因为它可以通过组合（有时是晦涩的）命令参数来完成。

* * *

在您发表评论后，我做了更多思考，我想我更好地理解了为什么您的要求不可能（或可能有用）作为命令。这是因为类似的命令`git merge --squash <branch>`不会创建合并提交。创建的提交只是另一个常规提交——不包含任何表明它来自另一个分支的内容。

例如，从以下开始：

```
-A-o-B-o-C
      \
       D-o-E 
```

并且 with `HEAD`at`C`命令`git merge --squash E`将把包含在`E`索引中的所有更改都准备好提交。一旦提交，树看起来像

```
-A-o-B-o-o-C    <== notice branch `C` has moved forward one commit
      \
       D-o-E 
```

现在的提交`C`包含所有更改`D-o-E`，没有说明它来自哪里。 `D-o-E`现在可能不需要了，但除了项目知识外，没有什么可以告诉你的。

有了它，您就知道您要做的是手动过程；我确实想到了一些可以帮助您确定是否可以删除分支的命令。

此`git log`命令仅生成已修饰的提交（分支、标签和 HEAD）的图表。

```
git log --all --graph --oneline --simplify-by-decoration --decorate 
```

运行此程序将为您提供视觉效果，让您可以快速查看“端点”分支的位置。提示：添加`>> <filename>.txt`以将图形转储到可以用铅笔标记的文本文件中。

此外，一旦您确定了要保留的“端点”分支，请运行以下命令以查看来自`<branch>`. 这是列出完全合并（通过合并提交）到`<branch>`.

```
git branch --merged <branch> 
```

这可能不是你想要的——但正如我上面解释的那样，我认为这是不可能的。希望这些命令会有所帮助。

# html - Facebook“喜欢”按钮错误

> ID：14663304
> 
> 赞同：0
> 
> 时间：2013-02-02T15:16:33.413
> 
> 标签：html, facebook-like

我在页面上添加了一个“喜欢”按钮，它指向不同的 URL。我还在目标页面中添加了 OG 标签。

但是，它无法正常工作。我已经通过调试器运行了两个页面，并且都显示错误。

**带有“赞”按钮的页面**（[http://www.ilovefish.co/test.html](http://www.ilovefish.co/test.html)）：

*必须修复的错误：无法下载：无法从 URL 检索数据。*

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>

</head>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0">

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<fb:like href="http://www.ilovefish.co/target.html" send="false" width="450" show_faces="true"></fb:like>

</body>
</html> 
```

**目标页面**（[http://www.ilovefish.co/target.html](http://www.ilovefish.co/target.html)）：

*必须修复的错误：对象无效值：URL 'http://www 处的对象。'website' 类型的 ilovefish.co/target.html' 无效，因为属性 'fb:app_id' 的给定值 '133031083521499' 无法解析为类型 'fbid'。*

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta property="og:title" content="Join The Fish Club" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.ilovefish.co/target.html" />
<meta property="og:image" content="http://www.ilovefish.co/images/fish_club.png" />
<meta property="og:site_name" content="The Fish Club" />
<meta property="fb:app_id" content="133031083521499" />

</head>

<body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0">

</body>
</html> 
```

任何人都可以对此有所了解吗？

干杯

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:10:56.173

请改用以下内容...

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和

```
<div class="fb-like" data-href="http://www.ilovefish.co/target.html" data-send="true" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:21:08.813

您可以访问互联网吗？我试过你给的链接。幸运的是，它似乎对我有用。你不需要做任何事情。或者可能是您的互联网连接速度很慢

# vpn - 如何在局域网上公开goagent服务

> ID：14663315
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:17:57.280
> 
> 标签：vpn

127.0.0.1:8087 上的默认 goagent 设置。我想在 192.168.1.101:8080 上公开我的 goagent 代理服务，以便我的 iphone 也可以访问 facebook。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T08:56:58.710

您只需要配置 proxy.ini（在文件夹 'local' 中），如下所示：

```
[listen]
ip = your-hostname
port = 8087
visible = 1
debuginfo = 0 
```

将 your-hostname 替换为您的真实主机名。

# ada - 派生自 Unchecked_Union

> ID：14663316
> 
> 赞同：1
> 
> 时间：2013-02-02T15:17:58.757
> 
> 标签：ada, gnat

我声明一个这样的联合类型：

```
type Access_Kind is (Named, Indexed);
type Array_Type is array (0 .. 1) of Integer;

type Record_Type (Kind : Access_Kind := Access_Kind'First) is record
   case Kind is
      when Named =>
         X, Y : Integer;
      when Indexed =>
         S : Array_Type;
   end case;
end record;
pragma Unchecked_Union (Record_Type);
pragma Convention (C_Pass_By_Copy, Record_Type);

function Create (X, Y : Integer) return Record_Type; 
```

现在，当我尝试创建派生类型时：

```
type Integer2 is new Record_Type; 
```

GNAT 给了我以下警告：

```
warning: in instantiation at line [pragma Convention...]
warning: variant record has no direct equivalent in C
warning: use of convention for type "Integer2" is dubious 
```

所以看起来 pragma 约定适用于派生类型，但 Unchecked_Union 不是。我无法再次将其应用于派生类型，因为`Record_Type`已经定义了原始操作（`Integer2`在另一个包中定义）。

这是正确的行为还是 GNAT 错误？如何正确地从 Unchecked_Union 类型派生，以便新类型继承 Unchecked_Union pragma？

GNAT 版本：GNAT GPL 2012 (20120509)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:34:24.507

一种可能性是`Record_Type`在嵌套包中声明 的操作，例如`Ops`，这样它们就不是原始的：

```
package Union is

   type Access_Kind is (Named, Indexed);
   type Array_Type is array (0 .. 1) of Integer;

   type Record_Type (Kind : Access_Kind := Access_Kind'First) is record
      case Kind is
         when Named =>
            X, Y : Integer;
         when Indexed =>
            S : Array_Type;
      end case;
   end record;
   pragma Unchecked_Union (Record_Type);
   pragma Convention (C_Pass_By_Copy, Record_Type);

   --  If P was declared immediately within Union, it would be
   --  primitive, and it wouldn't be possible to declare
   --  representation aspects for Integer2.
   package Ops is
      procedure P (R : Record_Type) is null;
      --  "is null" only so that I can use -gnatR without needing a
      --  body.
   end Ops;

   type Integer2 is new Record_Type;
   pragma Unchecked_Union (Integer2);
   pragma Convention (C_Pass_By_Copy, Integer2);

end Union; 
```

使用`-gnatR`显示选择的表示，我得到

```
$ gnatmake -c -u -f -gnatwa union.ads -gnatR
gcc -c -gnatwa -gnatR -gnat05 union.ads

Representation information for unit Union (spec)
------------------------------------------------

for Array_Type'Size use 64;
for Array_Type'Alignment use 4;
for Array_Type'Component_Size use 32;

for Record_Type'Size use 64;
for Record_Type'Alignment use 4;
for Record_Type use record
   Kind at ?? range  0 ..  -1;
   X    at  0 range  0 .. 31;
   Y    at  4 range  0 .. 31;
   S    at  0 range  0 .. 63;
end record;

for Integer2'Size use 64;
for Integer2'Alignment use 4;
for Integer2 use record
   Kind at ?? range  0 ..  -1;
   X    at  0 range  0 .. 31;
   Y    at  4 range  0 .. 31;
   S    at  0 range  0 .. 63;
end record; 
```

也就是说，我认为 GNAT 的行为是错误的。

[ARM 13.1(0.1)](http://www.ada-auth.org/standards/12rm/html/RM-13-1.html#p0.1)表示存在*表示*和*操作*方面，并且[(1)](http://www.ada-auth.org/standards/12rm/html/RM-13-1.html#p1)定义了表示方面。[(10)](http://www.ada-auth.org/standards/12rm/html/RM-13-1.html#p10)这就是为什么我们需要避免原始操作。[(15)](http://www.ada-auth.org/standards/12rm/html/RM-13-1.html#p15)表示表示方面由派生类型继承；但是[（15.1）](http://www.ada-auth.org/standards/12rm/html/RM-13-1.html#p15.1)表示操作方面**不是**，“除非指定”特定方面。我猜“指定”的意思是“在 ARM 中用于语言定义的方面，或者由供应商用于供应商定义的方面”。

[B3.3(3.1)](http://www.ada-auth.org/standards/12rm/html/RM-B-3-3.html#p3.1)声明这`Unchecked_Union`是一个表示方面。因此，它应该被继承。

[B3.1(0.1)](http://www.ada-auth.org/standards/12rm/html/RM-B-1.html#p0.1)声明接口方面，包括`Convention`，是表示方面。`C_Pass_By_Copy`所以应该继承。

我会写一个错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:19:19.250

在 Ada 2012 中，[`pragma Unchecked_Union`](http://www.ada-auth.org/standards/12rm/html/RM-J-15-6.html)已过时，您现在可以指定 aspect [`Unchecked_Union`](http://www.ada-auth.org/standards/12rm/html/RM-B-3-3.html)。在这两种情况下，正如[*Ada 2005 的基本原理：6.4 Pragmas and Restrictions*](http://www.adaic.org/resources/add_content/standards/05rat/html/Rat-6-4.html)中所讨论的，该警告提醒人们，未经检查的联合类型“在 Ada 2005 中引入的唯一目的是与 C 程序接口，而不是为了危险地生活。” 派生的类型`Record_Type`不被禁止；这只是一个坏主意，因为它会传播*错误执行*的机会，如[*注释*](http://www.ada-auth.org/standards/12rm/html/RM-B-3-3.html)部分所示。相反，将联合封装在绑定的主体中并从更高级别的类型派生。

附录：检查旧版本以供参考，

```
GNAT 4.6
版权所有 1996-2010，自由软件基金会，Inc。
...
未选中的单元的表示信息（主体）
-------------------------------------------------- --

对于 Array_Type'Size 使用 64；
对于 Array_Type'Alignment 使用 4；
对于 Array_Type'Component_Size 使用 32；

对于 Record_Type'Size 使用 64；
对于 Record_Type'Alignment 使用 4；
对于 Record_Type 使用记录
   亲切?? 范围 0 .. -1;
   X 在 0 范围 0 .. 31;
   Y 在 4 范围 0 .. 31;
   S 在 0 范围内 0 .. 63;
结束记录；

对于 Integer2'Size 使用 96；
对于 Integer2'Alignment 使用 4；
对于 Integer2 使用记录
   种类在 0 范围 0 .. 7;
   X 在 4 范围 0 .. 31;
   Y 在 8 范围 0 .. 31;
   S 在 4 范围内 0 .. 63;
结束记录；

```

# sql - SQLite - 通过减去不同年份的月份的负值

> ID：14663317
> 
> 赞同：0
> 
> 时间：2013-02-02T15:17:58.930
> 
> 标签：sql, sqlite, date

我正在尝试检索计算的月份值：

```
SELECT strftime('%m', 'now') - strftime('%m', e.date) AS something FROM ... 
```

但这是我得到的结果以及我真正想要的结果：

```
NOW - 2012-02-03 = 0 // want 11
NOW - 2012-11-02 = -9 // want 3
NOW - 2012-02-02 = 0 // want 12
NOW - 2012-01-02 = 1 // want 13 
```

正如我所看到的，我几乎可以通过这样做`sqlResult + 12`（第一个示例除外）获得正确的值，但是有没有办法直接在 SQL 语句中实现这一点并在每种情况下获得准确的值？

**编辑：**最后这里是解决方案

```
SELECT CAST ((julianday('now') - julianday(e.date_retour)) / 30 AS integer) AS something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:33:42.617

您需要将年份考虑在内。你可以这样做：

```
select strftime('%Y', 'now')*12+strftime('%m', 'now') -
       (strftime('%Y', e.date)*12+strftime('%m', e.date)) 
```

月份返回一年中的月份。因此，像 2（二月）- 9（九月）这样的数字会产生负数也就不足为奇了。

要处理月份中的某一天，我认为您必须自己处理日期算术：

```
select (strftime('%Y', 'now')*12+strftime('%m', 'now') -
        (strftime('%Y', e.date)*12+strftime('%m', e.date))
       ) -
       (case when strftime('%d', 'now') < strftime('%d', e.date) then 0 else 1 end) 
```

SQLite 能够为日期添加月份。不幸的是，它似乎没有能力计算日期之间的月差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:42:25.253

您并不是真的在看两个月之间的差异，而是考虑到他们的年份。

所以你需要这样做：

[SQLite (SQL.js) 演示](http://www.sqlfiddle.com/#!5/11090/20)

```
SELECT round((julianday(Date('now')) - 
        julianday(Dates))/30) as MonthsDiff
from demo;

| MonthsDiff |
--------------
|       11.0 |
|        2.0 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:33:33.153

你得到了奇怪的数字，因为你要求 strftime 函数只返回月份，然后你只减去月份......

你这样做怎么样？

```
SELECT strftime('%s', date()) - strftime('%s', '2012-03-03') as blah 
```

这将减去 unix 时间戳，然后您可以将其转换回可读的月份或其他...

或者这可以给你天数......

```
SELECT julianday(date()) - julianday('2012-03-03') as blah 
```

# ruby-on-rails-3 - 从 Rails 中的 request.referer 获取控制器名称

> ID：14663324
> 
> 赞同：31
> 
> 时间：2013-02-02T15:18:48.280
> 
> 标签：ruby-on-rails-3

我知道我可以用来`request.referrer`在 Rails 中获取完整的引用 URL，但是有没有办法从 URL 中获取控制器名称？

我想看看[http://myurl.com/profiles/2](http://myurl.com/profiles/2)的 URL 是否包含“profiles”

我知道我可以使用正则表达式来做到这一点，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-02-03T10:15:04.847

请记住，`request.referrer`它会在当前请求之前为您提供请求的 url。也就是说，您可以通过以下方式转换`request.referrer`为控制器/操作信息：

```
Rails.application.routes.recognize_path(request.referrer) 
```

它应该给你类似的东西

```
{:subdomain => "", :controller => "x", :action => "y"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-09T20:03:33.273

这是我在 Rails 3 和 4 上的尝试。此代码在注销时提取一个参数并将用户重定向到自定义登录页面，否则它会重定向到一般登录页面。您可以通过这种方式轻松提取`:controller`。控制器部分：

```
def logout
  auth_logout_user
  path = login_path
  begin
    refroute = Rails.application.routes.recognize_path(request.referer)
    path = subscriber_path(refroute[:sub_id]) if refroute && refroute[:sub_id]
  rescue ActionController::RoutingError
    #ignore
  end
  redirect_to path
end 
```

测试也很重要：

```
test "logout to subscriber entry page" do
  session[:uid] = users(:user1).id
  @request.env['HTTP_REFERER'] = "http://host/s/client1/p/xyzabc"
  get :logout
  assert_redirected_to subscriber_path('client1')
end

test "logout other referer" do
  session[:uid] = users(:user1).id
  @request.env['HTTP_REFERER'] = "http://anyhost/path/other"
  get :logout
  assert_redirected_to login_path
end

test "logout with bad referer" do
  session[:uid] = users(:user1).id
  @request.env['HTTP_REFERER'] = "badhost/path/other"
  get :logout
  assert_redirected_to login_path
end 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2013-02-02T15:21:35.527

在控制器内部，您拥有`controller_name`只返回名称的方法。在您的情况下，它将返回“配置文件”。您也可以使用`params[:controller]`which 返回相同的字符串。

# android - OpenTok Android 演示不工作 - 找不到类“com.opentok.helloworld.MainActivity”

> ID：14663326
> 
> 赞同：5
> 
> 时间：2013-02-02T15:19:04.490
> 
> 标签：android, eclipse, opentok, tokbox

我一直在尝试让 OpenTok [Android hello world](https://github.com/opentok/Android-Hello-World)正常工作，但它在启动时一直崩溃。导入Hello world项目后，将opentok android sdk复制到项目中，在eclipse中重新构建项目。错误都消失了，但是当我在 Galaxy Nexus 上运行它时，出现以下错误：

```
02-02 10:01:39.321: E/AndroidRuntime(17238): FATAL EXCEPTION: main
02-02 10:01:39.321: E/AndroidRuntime(17238): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.opentok.helloworld/com.opentok.helloworld.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.opentok.helloworld.MainActivity" on path: /data/app/com.opentok.helloworld-2.apk
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.os.Looper.loop(Looper.java:137)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at java.lang.reflect.Method.invoke(Method.java:511)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at dalvik.system.NativeStart.main(Native Method)
02-02 10:01:39.321: E/AndroidRuntime(17238): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.opentok.helloworld.MainActivity" on path: /data/app/com.opentok.helloworld-2.apk
02-02 10:01:39.321: E/AndroidRuntime(17238):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
02-02 10:01:39.321: E/AndroidRuntime(17238):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
02-02 10:01:39.321: E/AndroidRuntime(17238):    ... 11 more 
```

难道我做错了什么？我应该对构建路径做些什么吗？我不知道该怎么做/怎么做。

我也看到了[这篇](https://github.com/opentok/Android-Hello-World/issues/8)文章，但找不到解决方案。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T15:13:08.257

我以前遇到过这个问题。

我所做的是：

1.  删除项目中的“libs”文件。
2.  在项目中创建新文件夹“libs”。
3.  将罐子从“opentok-android-sdk”文件夹移动到“libs”
4.  配置构建路径。

然后它正在工作。

帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T20:00:01.117

将 tokbox 库 jars（我记得有 5 或 6 个 jars）放入 libs 文件夹。这对我有帮助。

# javascript - 使用 javascript 的正则表达式获取 url 中查询字符串项的值

> ID：14663329
> 
> 赞同：1
> 
> 时间：2013-02-02T15:19:26.657
> 
> 标签：javascript, regex, string

我有一个 URL，其中包含可以采用以下格式的产品 ID：

一个字母后跟任意数量的数字，然后是下划线，然后是任意数量的数字和下划线。

所以这是一个有效的产品 id:`c23_02398105` 和 this: `c23_02398105_9238714`。

当然，在 URL 中，它夹在其他查询字符串项之间，所以在这个 url 中，我只想提取 id：

```
http://www.mydomain.com/product.php?action=edit&id=c23_02398105&side=1 
```

我一直在尝试这样的正则表达式，但无济于事：

```
/&id=[a-z]_[(0-9)*]&/ 
```

提取产品ID的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:21:08.657

```
function qry(sr) {
  var qa = [];
  for (var prs of sr.split('&')) {
    var pra = prs.split('=');
    qa[pra[0]] = pra[1];
  }
  return qa;
}

var z = qry('http://example.com/product.php?action=edit&id=c23_02398105&side=1');
z.id; // c23_02398105 
```

[来源](http://github.com/svnpenn/bm/blob/d4a71431beeb94901d68daec508bf6/yt.js#L1-L8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:25:43.157

下面为每个键返回一个值数组，因此如果您想为下面获取一个字符串，请使用一些分隔符（例如`params.id.join(',')`）将这些值连接起来以获取以逗号分隔的 ID 字符串。

## [见小提琴](http://jsfiddle.net/vol7ron/B6gTb/)

* * *

```
http://someurl.com?key=value&keynovalue&keyemptyvalue=&&keynovalue=nowhasvalue#somehash 
```

### 把手：

*   常规键/值对 ( `?param=value`)
*   没有值的键（`?param`：没有等号或值）
*   带空值的键（`?param=`：等号，但等号右侧没有值）
*   重复键 ( `?param=1&param=2`)
*   删除空键（`?&&`：没有键或值）

### 代码：

*   ```
    function URLParameters(_querystring){
        var queryString = _querystring || window.location.search || '';
        var keyValPairs = [];
        var params      = {};

        queryString = queryString.replace(/^[^?]*\?/,''); // only get search path

        if (queryString.length)
        {
           keyValPairs = queryString.split('&');
           for (pairNum in keyValPairs)
           {
              if (! (!isNaN(parseFloat(pairNum)) && isFinite(pairNum)) ) continue;
              var key = keyValPairs[pairNum].split('=')[0];
              if (!key.length) continue;
              if (typeof params[key] === 'undefined')
                 params[key] = [];
              params[key].push(keyValPairs[pairNum].split('=')[1]);
           }
        }
        return params;
    } 
    ```

### 如何调用：

*   ```
    var params = URLParameters(<url>); // if url is left blank uses the current page URL
    params.key;                    // returns an array of values (1..n) for the key (called 'key' here) 
    ```

### 使用上述 URL 的给定键 ('key','keyemptyvalue','keynovalue') 的示例输出：

*   ```
    key            ["value"]
    keyemptyvalue  [""]
    keynovalue     [undefined, "nowhasvalue"] 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:45:11.653

您可以使用 JavaScript 字符串函数代替正则表达式，如下所示：

```
var url = "http://www.example.com/product.php?action=edit&id=c23_02398105&side=1";
var idToEnd = url.substring(url.search("&id")+4, url.length);
var idPure = idToEnd.substring(0, idToEnd.search("&"));
alert(idPure); 
```

输出是`c23_02398105`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T19:25:55.353

以下表达式符合您的描述

```
/&id=([a-z]\d*_[\d_]*)/ 
```

它假设字母是小写的，并且指定格式的url中只有一个id，或者你想要的就是第一个。

```
var url =
   'http://www.mydomain.com/product.php?action=edit&id=c23_02398105&side=1';

var m = url.match( /&id=([a-z]\d*_[\d_]*)/ );

console.log( m && m[1] );    // 'c23_02398105' 
```

# javascript - jQuery 在指定页面上加载或附加脚本

> ID：14663333
> 
> 赞同：1
> 
> 时间：2013-02-02T15:20:19.447
> 
> 标签：javascript, jquery

我对以下情况有点线索，我正在建立一个网站，现在我所有的 js 函数都在一个 js 文件中，是的，我知道这是一个非常糟糕的主意。

我不熟悉的是，当我检查其他网站时，我看到它们在页眉和页脚中包含 jQuery，加载了不同的脚本。

我不熟悉，请善待我有点初学者。人们为此使用某种插件吗？或者他们在按钮的指定文件中手动包含每个脚本？

我想将脚本分成几部分，而不是将所有内容都包含在一个文件中。我的意思是，一些功能仅在个人资料页面中需要，一些在设置中，一些在登录中。

如果有人可以请给我一些有关这方面的信息，这对我真的很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:24:03.147

这就是人们使用 RequireJS 来做的事情。

[http://requirejs.org/docs/start.html](http://requirejs.org/docs/start.html)

它将允许您为不同的 JS 文件设置依赖项。然后将根据需要加载这些依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:30:04.563

> 人们为此使用某种插件吗？或者他们在按钮的指定文件中手动包含每个脚本？

好吧，通常网站是由单个组件用 PHP 制作的。把它想象成砖头。其中一些砖块包含 JS 代码。当它们放在一起时，您最终会看到一些页面在不同的地方具有独特的 javascript 代码部分。它不是特别好，但可以极大地简化和加速开发。

> 我想将脚本分成几部分，而不是将所有内容都包含在一个文件中。

通常您希望`<script>`在网站标题中包含带有标签的 JS。如果出于某种原因您想动态包含外部 JS，那么您可以尝试使用这个简单的函数：[include()](http://phpjs.org/functions/include/)；

> 我正在建立一个站点，现在我所有的 js 函数都在一个 js 文件中，是的，我知道这是一个非常糟糕的主意。

从开发的角度来看这很糟糕，但是在部署网站时，这是一个非常好的习惯，因为它可以减少网站的加载时间（加载时间是最重要的事情之一）。甚至有应用程序将多个 .js 文件编译成单个缩小文件以获得最佳性能。

# intellisense - Phpstorm Intellisense / 继承属性的代码完成

> ID：14663336
> 
> 赞同：2
> 
> 时间：2013-02-02T15:20:30.697
> 
> 标签：intellisense, phpstorm, code-completion

我对 Phpstorm 的继承属性代码完成有疑问。下面是我的代码中的一个示例。

```
class ParentClass
{
  public $repository;
}

/*
 * @property Entity\SubClassRepository $repository
 */
class SubClass extends ParentClass
{
  public function __construct()
  {
    $this->repository= $this->em->getRepository('Entity\Subclass');
  }

  public function ExampleFunction()
  {
    $this->repository-> !Here i need the code completion!
  }
} 
```

getRepository 函数为 param = Entity\SubClass 返回 SubClassRepository 或为 param = Entity\OtherClass 返回 OtherClassRepository。顺便说一句，它没有返回的确切类型。因此; 我需要说 Phpstorm 父类的 $repository 对象是什么类型。

我知道 Phpstorm 使用 Phpdoc 符号来完成代码。因此我尝试使用@property 表示法并将下面的行添加到子类中。

```
/*
 * @property Entity\SubClassRepository $repository
 */ 
```

它不起作用。你有什么主意吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:48:02.540

正如@LazyOne 在他的评论中所说，问题在于我在注释中缺少 * 字符。@property 标签现在工作完美。

它应该是：

```
/**
 * @property Entity\SubClassRepository $repository
 */ 
```

# java - 从输入流将内容写入文件

> ID：14663346
> 
> 赞同：0
> 
> 时间：2013-02-02T15:22:16.923
> 
> 标签：java, io, streaming

我想将输入流写入java中的文件。如何将内容写入java中的文本文件？

```
 try {

                BufferedReader in = new BufferedReader(new
                InputStreamReader(client.getInputStream()));

            //I want to write the content to a file line by line here
                 while (!in.ready()) {}

                 System.out.print("'\n");
                 in.close();
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:24:01.610

```
 FileWriter fstream = new FileWriter("fileName");
        BufferedWriter fbw = new BufferedWriter(fstream);

        while ((line = in.readLine()) != null) {

            fbw.write(line + "\n");

        } 
```

# java - Java服务器套接字发送多条消息问题

> ID：14663348
> 
> 赞同：0
> 
> 时间：2013-02-02T15:22:54.357
> 
> 标签：java, sockets

我们有一个 java 套接字程序，服务器从许多设备获取数据并且工作正常。有时服务器需要向设备发送一些命令。当它发送单个命令时，它工作正常。当它发送多个命令时，问题就来了，只有第一个是成功的。我们无法弄清楚为什么其余的都失败了。下面是显示消息如何发送的片段。我应该在发送消息后设置延迟吗？

```
public static void main(String[] args) {   

      new sServer7888();

   }
sServer7888() {

    try{
    final ServerSocket serverSocketConn = new ServerSocket(7888);               
    while (true){
    try{
       Socket socketConn1 = serverSocketConn.accept();
          new Thread(new ConnectionHandler(socketConn1)).start();                       
    }
    catch(Exception e){
        e.printStackTrace(System.out);
    }
       }
    } 
    catch (Exception e)     {
         e.printStackTrace(System.out);
    }

}

class ConnectionHandler implements Runnable {

  private Socket receivedSocketConn1;
    ConnectionHandler(Socket receivedSocketConn1) {
      this.receivedSocketConn1=receivedSocketConn1;
    }

    public void run() {

      while ((nextChar=readIn1.read()) != -1) {

         completeMessage += (char) nextChar;     
         if (nextChar == '*')
    {
         String[] splitResult = completeMessage .split(",");    
         String header=splitResult[0].trim().substring(0,4);

         if((header.equals("$ACK")){

          //update the message sent from the server as already acknowledge.
         }     
         else{
          //run query to find if there are any message to be sent out to the devices
          while(rsOC1.next()){
            commandText = rsOC1.getString("commandText");
            writeOut1.write(commandText);
            writeOut1.write("\r\n");
            writeOut1.flush(); 
          }

          //now process the normal message receive from the devices.
         } 
        completeMessage="";
       }   
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T17:36:29.813

如果您的设备在每条消息上都发送 ACK 并且服务器能够接收到它，那么您可以按照以下方式使用您的服务器端程序。
**编辑**
我已经根据需求分析更新了代码。让我知道在实施后是否发现任何差异。

> `Thread.sleep(1000)`不是上述情况的可靠解决方案，因为我们不知道设备可能需要多长时间才能执行服务器发送的先前命令。

```
 public void run() 
    {

        int i = -1;
        ArrayList<String> list = new ArrayList<String>();
        while ((nextChar=readIn1.read()) != -1) 
        {
            boolean isCompleteMessage = readMessage(nextChar);
            if (isCompleteMessage)
            {
                String[] splitResult = completeMessage .split(",");    
                String header=splitResult[0].trim().substring(0,4);
                if((header.equals("$ACK"))
                {
                    String id = null;
                    if (i != -1)
                    {
                        id = list.get(i);
                        id = id.substring(0,id.indexOf("^"));
                    }
                    //update the message sent from the server as already acknowledge using id extracted above.
                    if ( i == 0)
                    {
                        list.remove(i);
                        if (list.size() == 0)
                        {
                            i = -1;
                        }
                        else
                        {
                            commandText = list.get(i);
                            writeOut1.write(commandText.substring((commandText.indexOf("^")) + 1));
                            writeOut1.write("\r\n");
                            writeOut1.flush(); 
                        }
                    }
                }     
                else
                {
                    //process here the normal message receive from the devices.
                    if (i == -1)
                    {
                        list = getRecords();
                        if (list.size() > 0)
                        {
                            i = 0;
                            commandText = list.get(i);
                            writeOut1.write(commandText.substring((commandText.indexOf("^")) + 1));
                            writeOut1.write("\r\n");
                            writeOut1.flush(); 
                        }
                    }
                    else 
                    {
                        commandText = list.get(i);
                        writeOut1.write(commandText.substring((commandText.indexOf("^")) + 1));
                        writeOut1.write("\r\n");
                        writeOut1.flush(); 
                    }
                } 
                completeMessage = "";
            }   
        }
   }
   public boolean readMessage(int nextChar)
   {
        completeMessage += (char)nextChar;
        if (((char)nextChar) == '*')
        {
            return true;
        }
        else
        {
            return false;
        }
   }
   //Retreive all commands from database and returns the ArrayList containing those commands.
   public ArrayList<String> getRecords()
   {
       ArrayList<String> list = new ArrayList<String>();
       Statement stat = null;
       ResultSet rsOC1 = null;
       try
       {
            stat = con.createStatement();
            rsOC1 = stat.executeQuery("Query for message retrieval from database");
            while (rsOC1.next())
            {
                String sElement = rs0C1.getString("commandID") + "^" + rs0C1.getString("commandText");
                list.add(sElement);
            }
       }
       catch (Exception ex){}
       finally
       {
           if (rs0C1 != null)
           {
               try
               {
                    rs0C1.close();   
               } catch () {}
           }
           if (stat != null)
           {
               try
               {
                    stat.close();   
               } catch () {}
           }
           return list;
       }
   } 
```

# ruby-on-rails - 如何测试简单的 rake 应用程序

> ID：14663350
> 
> 赞同：0
> 
> 时间：2013-02-02T15:22:56.680
> 
> 标签：ruby-on-rails, ruby, rspec, rake

我正在使用[grape](https://github.com/intridea/grape)来创建rest api我创建了api并且它现在工作正常我必须测试这个api。当我们创建rails api时，现在像往常一样自动生成spec_helper.rb文件第一行测试是

需要 spec_helper

请告诉 spec_helper.rb 文件的代码应该是什么

以及在测试一个简单的 rake 应用程序时我应该关注的其他事情。我给出了一个小代码片段，例如我必须测试

```
require 'grape'
require 'sequel'
require 'json'
module Twitter
  class API < Grape::API

    version 'v1', :using => :header, :vendor => 'twitter'
    format :json

    helpers do
      def current_user
        @current_user ||= User.authorize!(env)
      end

      def authenticate!
        error!('401 Unauthorized', 401) unless current_user
      end
    end

    resource :users do

      desc "Return a status."
      params do
        requires :id, :type => Integer, :desc => "Status id."
        optional :include , :type => String , :desc =>"parameter to include in "

      end
      get ':id' do
"Hello World"
end 
```

在这个葡萄应用程序中，当我调用 localhost:9292/users/1234 时，响应应该是“Hello World” 如何测试这个应用程序 spec_helper.rb 文件的内容应该是什么进行测试。我只使用葡萄而不使用导轨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:58:52.353

这完全取决于您要测试的内容。

想必你要测试的路由（localhost:9292/users/1234）是一个UsersController。在这种情况下，你会想要做这样的事情（使用 rspec）：

```
 describe UsersController do
      context "GET#show" do
        it "should return 'Hello World'" do
          get :show, id: 1234
          response.body.should include 'Hello World'
        end
      end
    end 
```

现在对于 rake 任务测试，我将创建一个集成测试，从命令行执行 rake 任务，并将预期结果与 rake 任务的输出进行比较，如下所示：

```
 describe "My Rake Task" do
      it "should return hello world" do
        results = `bundle exec rake my:rake:task`  
        results.should include 'Hello World'
      end
    end 
```

希望这些粗略的例子对你有用！祝你好运！

更新：

您应该始终尽可能多地在类上编写单元测试，以便您的 rake 任务测试非常简单甚至不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:20:58.980

我想你的意思是机架应用程序。Grape 的 README 中有一个相当不错的测试部分。你应该从那里开始。 [https://github.com/intridea/grape#writing-tests](https://github.com/intridea/grape#writing-tests)

# c++ - C++代码优化

> ID：14663352
> 
> 赞同：0
> 
> 时间：2013-02-02T15:23:12.663
> 
> 标签：c++, optimization, bit-manipulation

这是我对[Spoj 11373 的解决方案。可乐疯狂](http://www.spoj.com/problems/RPLC/)

```
#include <cstdio>

int main(){
    int T; scanf("%d",&T);

    for(int j = 1; j <= T; j++){
        int n;
        scanf("%d",&n);
        long long sum = 0, small = 0;
        int t;
        for(int i = 0; i < n; i++) {
            scanf("%d",&t);
            sum += t;
            if( sum < small) small = sum;
        }
        printf("Scenario #%d: %lld\n", j, -1*small+1);
    }
} 
```

问题很简单。这个解决方案在 Spoj 上需要 0.12 秒，尽管有 0.01 秒的解决方案。我很好奇可以对这段代码进行哪些优化以提高速度。我认为`-1*small+1`可能会使用按位运算，但没有找到方法。我也无法摆脱 long long 因为 sum 可能超过 int。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T15:26:01.213

你进行了太多的 I/O 调用。一次读取整个文件，然后解析它，然后创建输出，然后一次全部写入。

# mysql - MySql DATE_ADD 函数正在为时间戳添加抛出 BLOB

> ID：14663354
> 
> 赞同：2
> 
> 时间：2013-02-02T15:23:18.273
> 
> 标签：mysql, sql, datetime

我尝试使用以下查询，它未能将秒数添加到时间戳值

```
select DATE_ADD('2012-02-27 00:00:00', INTERVAL 3600 second) as new_time 
```

输出显示为

![在此处输入图像描述](../Images/e4c486e88639ceaf4e67b907e11bf19d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:26:11.917

它似乎适用于 sql fiddle。[您在 SQL Fiddle 上测试的原始代码](http://www.sqlfiddle.com/#!2/d41d8/6844)

试试这个，

```
SELECT DATE_ADD(CAST('2012-02-27 00:00:00' AS DATETIME), INTERVAL 3600 second) as new_time 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/6845)

# extjs - Ext.Component 和 Ext.Container 的比较

> ID：14663355
> 
> 赞同：0
> 
> 时间：2013-02-02T15:23:18.397
> 
> 标签：extjs, sencha-touch-2

任何人都可以让我清楚地知道如何`Ext.Component`和`Ext.Container`不同吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:14:08.570

Ext.Container 可以包含其他组件并使用定义的布局对其进行布局。

# c++ - 使用 QRegExp 过滤程序参数

> ID：14663361
> 
> 赞同：1
> 
> 时间：2013-02-02T15:24:12.280
> 
> 标签：c++, regex, qt, path, qregexp

我想过滤一个像 QRegExp 这样的命令

```
/path/to/executable --long-parameter -s /path/which/has/a/space/and/a/dash/\ -end 
```

我尝试删除所有以`-`和程序名称开头的参数（`/path/to/executable`）

```
QString str(...);
str.remove(QRegExp("^\\S*")).remove(QRegExp("\\s-\\S*")).trimmed(); 
```

这会删除参数，但如果有`/a/dash/\ -end`，这将被视为参数，当它应该离开时，因为空格前面有一个反斜杠。有什么办法可以处理吗？

/path/to/executable 不是执行的程序 - 它只是一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:32:25.100

为什么不将它们作为**QStringList**处理？

您可以使用**QString::split(...)**方法将其拆分为标记（字符串，空格分隔），然后将其拆分为

*   检查每个字符串的第一个字符是否是破折号（或任何其他检查）并将其删除（或执行任何您想要的操作）。

*   删除第一个字符串（即您显示的可执行文件的路径）

# java - 多线程客户端服务器代理java

> ID：14663377
> 
> 赞同：-2
> 
> 时间：2013-02-02T15:26:39.247
> 
> 标签：java, network-programming

我目前正在用java实现一个多线程代理服务器，它将接受来自客户端的消息并将它们转发到另一台服务器，然后该服务器将确认接收到消息。但是，我在这样做时遇到了麻烦。有人能指出我做错了什么吗？谢谢。

```
import java.io.*;
import java.net.*;
import java.util.Scanner;

public class Client{

public static void main(String[] args)
{
    try
    {
        Socket client = new Socket(InetAddress.getLocalHost(), 6789);
        if(client.isBound())
        {
            System.out.println("Successfully connected on port 6789");
        }
        Scanner scanner = new Scanner(System.in);
        DataInputStream inFromProxy = new DataInputStream(client.getInputStream());
        DataOutputStream outToProxy = new DataOutputStream(client.getOutputStream());
        while(true)
        {
             String message;
                System.out.print("Enter your message: ");
                message = scanner.next();
                outToProxy.writeUTF(message);
                System.out.println(inFromProxy.readUTF());
        }
    }
    catch(IOException io)
    {
        System.err.println("IOException: " + io.getMessage());
        System.exit(2);
    }
    }
} 
```

服务器代码Server.java：

```
import java.io.*;
import java.net.*;

/** 
 *  the client send a String to the server the server returns it in UPPERCASE thats all
 */

public class Server {

public static void main(String[] args)
{
    try
    {
        ServerSocket server = new ServerSocket(6780);
        if(server.isBound())
        {
            System.out.println("Server successfully connected on port 6780");
        }
        Socket client = null;
        while(true)
        {
            client = server.accept();
            if(client.isConnected())
            {
                System.out.println("Proxy is connected");
            }

            DataInputStream inFromProxy = new DataInputStream(client.getInputStream());
            DataOutputStream outToProxy = new DataOutputStream(client.getOutputStream());
            System.out.println(inFromProxy.readUTF());
            outToProxy.writeUTF("Message has been acknowledged!");
        }
    }
    catch(IOException io)
    {
        System.err.println("IOException: " + io.getMessage());
        System.exit(2);
    }
}
}   

import java.io.*;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.*;

public class Proxy{

    public static ServerSocket server = null;

    public static Socket client = null;

public static void main(String[] args)
{
try
{
    server = new ServerSocket(6789);
    Socket clientsocket = null;

    while(true)
    {
        client = server.accept();      

        if(client.isConnected())
        {
            System.out.println("Proxy is currently listening to client on port 6789");
        }
        clientsocket = new Socket(InetAddress.getLocalHost(), 6780);
        Thread t1 = new ProxyHandler(client, clientsocket);
        t1.start();

        if(clientsocket.isBound())
        {
            System.out.println("Clientsocket successfully connected on port 6780");
        }

        Thread t2 = new ProxyHandler(clientsocket, client);
        t2.start();                                                               

    }
}
catch(IOException io)
{
    System.err.println("IOException: " + io.getMessage());
}
}
} 
```

代理代码是：

```
import java.io.*;
import java.net.*;

public class ProxyHandler extends Thread {
private Socket socket;
private String message;
public ProxyHandler(Socket socket, Socket clientsocket)
{
    this.socket = socket;        
}

public void run()
{       
    message = "";
    try
    {
        DataInputStream in = new DataInputStream(socket.getInputStream());
        DataOutputStream out = new DataOutputStream(socket.getOutputStream());
        while(true)
        {
            message = in.readUTF();
            out.writeUTF(message);

            System.out.println(message);
        }
    }
    catch(IOException io)
    {
        System.err.println("IOException: " + io.getMessage());
        System.exit(2);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:36:40.417

*   这里没有多线程。应该有。每个接受的套接字都应该在其自己的线程中完全处理，在服务器和代理中。
*   在创建和连接一个 Socket 之后立即测试 isBound() 是没有意义的。它永远不会是假的。
*   在 accept() 之后立即测试 isConnected() 是没有意义的。它永远不会是假的。
*   一旦完成，服务器必须关闭每个接受的套接字，即一旦它从其中获得 EOS（read() 返回 -1）。
*   一旦完成，代理还必须关闭每个接受的套接字，同上。
*   任何类型的代理都应该只复制字节。它不应该对数据的格式做出假设。不要使用 readUTF()，使用 count = read(byte[]) 和 write(buffer, 0, count)。这也意味着您不需要代理中的 DataInput/OutputStreams。

# coffeescript - “意外'='”

> ID：14663378
> 
> 赞同：0
> 
> 时间：2013-02-02T15:26:48.560
> 
> 标签：coffeescript

我尝试将此 .coffee 文件编译为 .js，但它给了我错误：

```
In projekt.coffee, Parse error on line 122: Unexpected '=' 
```

这是具体部分：

```
#line122 -># quotes = ["The people who were trying to make this world worse are not taking the day off. Why should I? <br> -Bob Marley", "Don't worry about a thing, every little thing is gonna be alright<br> -Bob Marley", "Better to die fighting for freedom then be a prisoner all the days of your life.<br> -Bob Marley", "Herb is the healing of a nation, alcohol is the destruction of mankind<br> -Bob Marley", "When you smoke the herb, it reveals you to yourself.<br> -Bob Marley", "My music fights against the system that teaches to live and die.<br> -Bob Marley"]
        quoteNumber = Math.floor(Math.random() * quotes.length) 
        $('#cytat').html '<p> #{quotes[quoteNumber]} <p>'.css 
            font-family : Finger Paint 
```

这里是整个代码：

[http://jsfiddle.net/BNMa7/](http://jsfiddle.net/BNMa7/)

我真的不知道发生了什么，因为它告诉我'='是出乎意料的，但它清楚地定义了一个数组。帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:23:00.600

在您描述的语法错误之前，我们应该解决多个问题。

`font-family`不是有效的独立密钥。您需要引用它才能正确编译它。同样`Finger Paint`——我不知道那是怎么回事。

字符串插值不适用于单引号字符串。如果要`#{quotes[quoteNumber]}`替换为该索引处的引号，则需要使用双引号。

修复了这些问题后，我们仍然存在运算符优先级的大问题：

```
$('#cytat').html "<p> #{quotes[quoteNumber]} <p>".css 
    'font-family': 'Finger Paint' 
```

这相当于：

```
$('#cytat').html("<p> #{quotes[quoteNumber]} <p>".css('font-family': 'Finger Paint')); 
```

这*可能*不是您的意思，因为字符串没有`.css()`方法。在调用周围添加括号`.html()`以使其具有正确的含义：

```
$('#cytat').html("<p> #{quotes[quoteNumber]} <p>").css
    'font-family': 'Finger Paint' 
```

现在，最后，语法错误。乍一看，这似乎是完全有效的代码，并且错误消息不是很有帮助......但是这个代码有一个致命的错误。你看到了吗？您发布的示例没有任何问题；这仅在文件其余部分的上下文中是错误的。那是什么？

您混合了制表符和空格。*切勿*混合制表符和空格。CoffeeScript 编译器显然使用了与您的编辑器不同的选项卡宽度，因此它吓坏了，并给您一个疯狂的错误消息。

考虑使用文本编辑器，它会自动将制表符转换为（数量一致的）空格，或者至少可以让您查看不可见字符。我喜欢 Sublime Text，但有很多选择。

# vim - vim 在 "(" 之后自动完成

> ID：14663380
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:26:59.747
> 
> 标签：vim, autocomplete

我有这样的c代码

```
char path[512];
FILE *fd;

fd = fopen(pa 
```

我想要 vim 完成 "pa" 到 "path"，使用 cn/cx,cn/cx,co

但它不起作用，显示“找不到模式”

我必须在“（”之后添加一个空格，如下所示：

```
fd = fopen( pa 
```

然后它工作，但我不想在“（”之后添加空格。

我怎样才能让它工作？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:17:24.130

大多数补全使用光标前的*关键字作为补全基础。*看起来您已包含`(`在`'iskeyword'`设置中。（默认文件类型设置`c`不要添加这个！）如果我是对的**，**

```
:setlocal iskeyword-=( 
```

应该解决问题。找出为什么以及从哪里包含它。

# java - Magento Rest“找不到管理员角色”错误

> ID：14663382
> 
> 赞同：10
> 
> 时间：2013-02-02T15:27:17.523
> 
> 标签：java, magento, oauth, magento-1.7, scribe

我正在玩 scribe 库（[https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)），试图访问 Magento 商店产品，但我遇到了一些问题（可能是 Magento 配置）。

我正在使用以下代码：

```
OAuthService service = new ServiceBuilder().provider(Magento17Api.class).apiKey(MAGENTO_API_KEY).apiSecret(MAGENTO_API_SECRET).build();
OAuthRequest request = new OAuthRequest(Verb.GET, MAGENTO_REST_API_URL
    + "/products");
service.signRequest(accessToken, request);
Response response = request.send();
System.out.println(response.getBody()); 
```

但我总是收到这样的回复：

```
{"messages":{"error":[{"code":0,"message":"Admin role not found"}]}} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T16:27:10.507

我找到了解决方案...

您应该转到 Magento 管理员 -> 系统 -> 权限 -> 用户 -> 编辑您的用户并在“休息角色”选项卡中为其授予“管理员”权限。

# ruby - 没有乘积方法的组合数组

> ID：14663383
> 
> 赞同：1
> 
> 时间：2013-02-02T15:27:28.787
> 
> 标签：ruby, arrays, ruby-1.8

我有两个数组

```
a = [1,2,3,4]  
b = [a,b,c,d,e,f] 
```

我需要结合起来创建：

```
c = [[1,a],[1,b],[1,c],[1,d],[1,e],[1,f],[2,a],[2,b],...] 
```

我会在`product`Ruby 1.9 或更高版本中使用该方法，但我运行的是旧版本的 Ruby，并且此方法不存在。我不确定如何在`c`不使用该`product`方法的情况下创建。可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:31:08.300

```
a.map {|ma| b.map { |mb| [ma, mb]} } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T21:06:48.340

```
class Array
  def product(other)
    if block_given? then
      each {|el| other.each {|other_el| yield [el, other_el]}}
    else
      res=[]
      each{|el| other.each {|other_el| res << [el, other_el]}}
      res
    end
  end
end

a = [1,2,3,4]  
b = %w(a b c d e f)

p a.product(b) #[[1, "a"], [1, "b"], [1, "c"],...
a.product(b){|e| puts e.join}
#1a
#1b
#1c
#1d... 
```

对于最近的 Ruby 版本，这段代码中会有一个`return to_enum unless block_given?`地方，但 AFAIK`to_enum`在旧的 Ruby 中不可用。实数`product`需要多个参数；我还没有找到一种方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T19:11:17.987

```
c = a.map{|x| b.map{|y| [x,y]}}.flatten(1) 
```

根据您的 Ruby 版本的年龄，您可能需要使用：

```
c = a.map{|x| b.map{|y| [x,y]}}.inject([],:concat) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T22:11:32.320

你正在做的是试图获得笛卡尔积。

我创建了一个名为的类`CartesianArray`，它继承自`Array`并为您提供了一个`#product`方法。

```
class CartesianArray < Array

  def initialize(array_one, array_two)
    @array_one, @array_two = array_one, array_two
  end

  def product
    results = []
    @array_one.each do |a1|
      @array_two.each do { |a2| results << [a1, a2] }
    end

    results
  end

end 
```

你可以像这样使用它：

```
# Test Code
numbers = [1,2,3,4]
letters = ['a','b','c','d','e','f']

cart_array = CartesianArray.new(numbers, letters)
p cart_array.product
[[1, "a"], [1, "b"], [1, "c"], [1, "d"], [1, "e"], [1, "f"], [2, "a"], [2, "b"], [2, "c"], [2, "d"], [2, "e"], [2, "f"], [3, "a"], [3, "b"], [3, "c"], [3, "d"], [3, "e"], [3, "f"], [4, "a"], [4, "b"], [4, "c"], [4, "d"], [4, "e"], [4, "f"]] 
```

如果您不喜欢将其保留在该类中，那么我很确定您可以拉出该`#product`方法并对其进行修改以适合您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-11T13:12:01.240

# 反向移植宝石

获取`Array#product`旧版 Rubies 的最简单方法是使用[backports gem](https://rubygems.org/gems/backports)。它将这个方法添加[到 Ruby 1.87](https://github.com/marcandre/backports/blob/master/lib/backports/1.8.7/array/product.rb)和[Ruby 1.9.2](https://github.com/marcandre/backports/blob/master/lib/backports/1.9.2/array/product.rb)中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T15:47:07.240

当然，有比 -

```
(a+b).combination(2).map {|c| c if a.include?(c.join.to_i)}.compact 
```

但我喜欢你可以用 Ruby 编写的不同可能的一种衬里。

# jquery - 当窗口滚动超过另一个元素时显示一个新元素

> ID：14663386
> 
> 赞同：1
> 
> 时间：2013-02-02T15:27:38.957
> 
> 标签：jquery, css, fixed

一旦用户滚动过页面中的特定元素然后如果他们向上滚动它会再次动画出来，我的 jquery 代码似乎在让我的克隆导航进入视图时遇到了一些问题。

我写的jQuery代码是：

```
$(window).scroll(function() {
var homeHeight = $('#header').outerHeight() + $('.homeIntro').outerHeight();
var scrollPosition = $(this).scrollTop(); 
if( homeHeight <= scrollPosition ) {
    $('#clonedHeader').animate({'top': '0'}, 300);      
} else {
    $('#clonedHeader').animate({'top': '-100px'}, 300); 
} 
```

});

这是一个小提琴：http: [//jsfiddle.net/ABdLh/](http://jsfiddle.net/ABdLh/)

因此，当您滚动经过 homeIntro 部分时，会有一个克隆的标题滑入视图，这就是我想要的想法，但它不会发生在我身上！

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:34:08.850

我之前忽略了一些代码。通过简单地添加`.stop()`- 方法，你可以让它工作：

```
if(homeHeight <= scrollPosition) {
    $('#clonedHeader').stop().animate({'top': '0'}, 300);      
} else {
    $('#clonedHeader').stop().animate({'top': '-100px'}, 300); 
} 
```

[在这里](http://jsfiddle.net/PG3wx/)试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:55:24.790

是的，（未选择 jQuery）是它为什么不起作用的核心问题。但有几点建议——

像这样复制 html 标记真的很糟糕。您应该使用 jQuery/CSS 来调整标题在不同滚动位置的外观。

此外，如果您在 Chrome/Firefox 中使用控制台，它可能会帮助您进行一些调试——如果没有 jQuery，它会立即给您错误。如果你在这里打开我的小提琴，我会在其中留下 console.log() 语句，以显示基于滚动触发函数的位置。

像这样为标题设置动画会导致很多问题。如果您非常快速地上下滚动，使用 jQuery 动画可能会导致构建问题，这可能会导致相同的标题同时出现在页面上。*注意 - 您提到的停止方法将对此有所帮助，但对于大多数动画问题（特别是悬停），这还不够，您应该研究像“HoverIntent”这样的插件。*

最后，在不断更新的函数之外声明+计算尽可能多的变量是一种很好的做法——您不需要不断重新计算要比较的标题的高度，它将是一个固定数字.

```
// this height will be the same, you dont need to constantly calculate it on scroll
var homeHeight = $('#header').outerHeight() + $('.homeIntro').outerHeight(),
    scrollPosition;

$(window).on('scroll', function () {
    scrollPosition = $(this).scrollTop();
    animateHeight(scrollPosition);
});

function animateHeight(scrollPosition) {
    if (scrollPosition >= homeHeight) {
        console.log('yes');
        $('#clonedHeader').animate({
            'top': '0'
        }, 300);
    } else {
        console.log('no');
        $('#clonedHeader').animate({
            'top': '-100px'
        }, 300);
    }
} 
```

[http://jsfiddle.net/ndreckshage/ecUAc/](http://jsfiddle.net/ndreckshage/ecUAc/)

# actionscript-3 - 针对所有屏幕尺寸进行优化 - Flash AS3

> ID：14663387
> 
> 赞同：0
> 
> 时间：2013-02-02T15:28:11.553
> 
> 标签：actionscript-3, flash

我正在制作一个在启动时进入全屏模式的游戏。我希望能够针对所有用户的屏幕尺寸优化我的游戏资产。我有一些跟踪用户屏幕尺寸的代码，但我不确定如何使用它来优化游戏资产以适应用户的屏幕尺寸。

有人知道我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:04:56.310

这取决于游戏中的许多因素，但如果您只想知道如何在游戏中创建调整大小方法，请查看以下答案： [https ://stackoverflow.com/a/14681344/2009788](https://stackoverflow.com/a/14681344/2009788)

# ruby-on-rails - Rails CSV 数据库填充

> ID：14663388
> 
> 赞同：1
> 
> 时间：2013-02-02T15:28:23.277
> 
> 标签：ruby-on-rails, validation, csv, carrierwave, uploading

我有这种情况，我需要一些设计建议，也许是一些结构定义：

我有一个可以上传 csv 文件的用户，并且根据该文件的内容，我必须填充数据库，听起来很简单 - 嗯！

好的，到目前为止一切都很好，现在问题是这个 csv 非常大，我的意思是它有大约 100 多个标题字段（听起来很疯狂），谁知道每个文件有多少记录，但无论如何，到目前为止，我们已经上传了这个 csv db 人口。但是等等，这个 csv 文件需要根据一个字段（“DIVISION”）进行分类/分类。Division 是一个整数列，根据它的值，我需要确定这个 csv 属于哪个 Division。到目前为止，我们有以下要求：

```
 => CSV file uploading
    => File classification based on div id
    => record insertion 
```

事情还没有解决。Division 本身进一步分为两种类型：REGULAR 和 PROMO

我有样本，其中每种类型都有标题。所以我们现在还需要识别这个csv属于哪个分区类型，然后开始处理。

```
 => CSV file uploading
    => File classification based on div id and headers (counting and matching the headers for div-sub type using some already defined hash of headers for each division) 
```

因此，在识别文件后，即文件属于哪个部门和子类型后，我需要对字段进行一些验证，例如存在，然后进行一些格式检查等。

我想使用carrierwave进行文件上传，使用smarter_csv gem进行csv处理，然后使用一些jquery插件进行前端文件处理和上传进度，例如jquery.fileupload插件和一些后台作业集成，以在后台进行所有处理和类型检查。

我需要一些数据库设计/结构帮助，因为我是新手。非常感谢任何帮助，:)。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T05:52:57.483

是的，您可以使用 smarter_csv 导入您的 CSV 文件。

对于每一行，您将获得一个包含 100 多个键/值对的散列，其中键是 CSV 文件中的标题（在可能的修改之后）。

为简单起见，假设您的 CSV 文件中的一列确定您要在数据库中创建哪种记录，例如“除法”或“类型”

假设您尝试将广告数据从 CSV 文件上传到数据库，那么您需要相应地创建模型。如果您的 100 多列从不更改名称，那么最好使用单表继承 (STI) 对其进行建模：

```
 class Ad < ActiveRecord::Base
 ...
 end

 class  AdRegular < Ad
 end

 class AdPromo < Ad
 end 
```

在用于上传的控制器中，您需要执行以下操作：

```
 require 'smarter_csv'{:chunk_size => 1} ) do |array|
   row_hash = array.first 
   case row_hash[:type]
   when 'regular'
      AdRegular.create( row_hash )
   when 'promotion'
      AdPromo.create( row_hash )
   else
      puts "ERROR, unexpected :type in CSV file: #{row_hash[:type]}"
   end
 end 
```

您还可以从字符串创建类名`row_hash[:type]`，然后`create`调用生成的类

另请参阅：[从字符串创建类](https://stackoverflow.com/questions/5924495/how-do-i-create-a-class-instance-from-a-string-name-in-ruby)

# java - 在 Java 中合并双精度类型数组

> ID：14663391
> 
> 赞同：1
> 
> 时间：2013-02-02T15:28:49.153
> 
> 标签：java, arrays, methods, double

有没有一种简单的方法，比如一行代码，可以将两个 double 类型的数组组合成一个数组？

如果没有，最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:30:14.240

您可能正在寻找[**System.arrayCopy()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:38:39.053

[ArrayUtils.addAll(array1, array2)](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/ArrayUtils.html#addAll%28T%5B%5D,%20T...%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:38:13.100

如果您可以自由使用 Apace commons，这就是解决方案。

[如何在 Java 中连接两个数组？](https://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T15:43:09.733

或者你可以这样写：

```
public static double[] unite(double[]... arrays)
{
    int length = 0;
    for(double[] array: arrays)
        length += array.length;

    double[] united = new double[length];

    int pos = 0;
    for(double[] array: arrays) {
        System.arraycopy(array, 0, united, pos, array.length);
        pos += array.length;
    }

    return united;
}

public static void main(String... args) {

    double[] d1 = {0.1, 0.2};
    double[] d2 = {0.3, 0.4, 0.5};
    double[] d3 = {0.6, 0.7, 0.8, 0.9};
    double[] d4 = {};
    double[] d5 = {1.0};

    double[] united = unite(d1, d2, d3, d4, d5);

    System.out.println(Arrays.toString(united));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T16:12:22.100

不能为这种事情推荐 Google Guava 库

# php - 用于消息和删除消息的 mysql 数据库逻辑

> ID：14663392
> 
> 赞同：3
> 
> 时间：2013-02-02T15:28:54.440
> 
> 标签：php, mysql

我目前坚持我的逻辑。

我为 snedimg 消息创建了一个数据库表

表`messages`看起来像这样

```
id | sender_id | reciver_id | msg                      | send_date |
1  | 2         |  6         | hello there i am testing | 2013-01-15 
```

所以我完全坚持的是删除消息逻辑。我不明白如何解决的问题是，让我们说`user`获取`id 6`消息，并通过 id 将其删除，这样发送消息的人也无法看到它。

所以我对此有点迷茫，如果有人能给我一个关于逻辑的提示，我真的会很高兴

**编辑更多解释的细节**

所以问题是

```
id | sender_id | reciver_id | msg                      | send_date |
1  | 2         |  6         | hello there i am testing | 2013-01-15 
```

这是桌子。用户收到消息，阅读它，并出于某种原因想要删除它。

问题是`DELETE LOGIC`，我知道如何删除行，我不知道如何解决问题，如果接收方删除消息，发件人将能够在他/她删除它时看到它。

例如在 facebook 他们使用存档而不是删除，这是我不明白的逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:41:13.590

只需在删除时将接收者或发送者 id 设置为 -1，然后检查两者是否为 -1（或将是 -1）删除该行。

例如

```
on deletion by reciver:
if ($sender_id == -1) {
  $query = "DELETE FROM messages WHERE id=$id";
} else {
  $query = mysql_query("UPDATE messages SET reciver_id=-1 WHERE id=$id";
}
mysql_query($query) 
```

这样它仍然可用，直到两者都删除它

**编辑：**
正如对该解决方案的额外考虑：
您可以将两者都设置为 -1 而不是在第二次删除用户时将其删除，这样您就可以获得一种存档并通过 cronjob 删除太旧的存档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:37:52.763

如果您想`sender`在被 删除后看到该消息`receiver`，您可以使用以下逻辑：

1.  向您的表中添加一个名为 的新列`deleted`，其中 values`1`表示该消息已被删除，并且`0`表示它尚未删除。
2.  如果这是`receiver`尝试查看他们的消息：`WHERE deleted = 0`
3.  如果这是`sender`简单的展示全部；不要使用上述`WHERE`条款。
4.  要删除消息，请在您的 PHP 删除函数中首先检查 的值`deleted`，如果是，`1`您可以使用 SQL 从表中永久删除该行`DELETE`。否则，您只需要将`deleted`列的值更新为`1`

# objective-c - 使用 AHAlertView 项目时应用程序崩溃

> ID：14663394
> 
> 赞同：1
> 
> 时间：2013-02-02T15:29:04.937
> 
> 标签：objective-c, custom-controls

我正在尝试显示自定义 UIAlertView 并且我正在使用 AHAlertView：

[https://github.com/warrenm/AHAlertView](https://github.com/warrenm/AHAlertView)

我将 AHAlertView.m 和 .h 添加到我的项目中，并将以下内容添加到 viewDidLoad 方法中：

```
 NSString *title = @"Alert View Title";
    NSString *message = @"This is a message that might prompt you to do something.";

    AHAlertView *alert = [[AHAlertView alloc] initWithTitle:title message:message];
    __weak AHAlertView *weakAlert = alert;
    [alert setCancelButtonTitle:@"Cancel" block:^{
        weakAlert.dismissalStyle = AHAlertViewDismissalStyleTumble;
    }];
    [alert addButtonWithTitle:@"OK" block:^{
        weakAlert.dismissalStyle = AHAlertViewDismissalStyleZoomDown;
    }];
    [alert show]; 
```

问题是当我点击其中一个按钮时，应用程序崩溃：“应用程序窗口在应用程序启动结束时应该有一个根视图控制器”

我不知道我做错了什么，我查看了示例项目，这就是使用警报的方式。如何正确实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:23:16.460

您是否激活了*-fno-objc-arc*选项？如果您这样做了，请停用它，AHAlertView 支持 ARC

# html - 如何在 AngularJS 的循环中使用标签

> ID：14663397
> 
> 赞同：47
> 
> 时间：2013-02-02T15:29:22.080
> 
> 标签：html, angularjs

所以我在里面是`ng-repeat`这样的：

```
<li ng-repeat="x in xs">
    <form>
       <label for="UNIQUELABEL">name</label>
       <input  id="UNIQUELABEL">
       <label for="ANOTHERUNIQUELABEL">name2</label>
       <input  id="ANOTHERUNIQUELABEL">
    </form>
</li> 
```

哪个应该产生类似的东西

```
<li>
    <form>
       <label for="UNIQUELABEL1">name</label>
       <input  id="UNIQUELABEL1">
       <label for="ANOTHERUNIQUELABEL1">name2</label>
       <input  id="ANOTHERUNIQUELABEL1">
    </form>
</li>
<li>
    <form>
       <label for="UNIQUELABEL2">name</label>
       <input  id="UNIQUELABEL2">
       <label for="ANOTHERUNIQUELABEL2">name2</label>
       <input  id="ANOTHERUNIQUELABEL2">
    </form>
</li>
... 
```

我是 AngularJS 的新手，不确定处理这个问题的正确方法（根本没有文档使用`label`）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-02T15:40:10.103

正确的解决方案是 Gleno 的。

`$id`保证对于每个创建的范围都是唯一的，同时`$index`随着对下划线集合计数的任何更改而更改。

您需要在中继器的范围内添加可用的 $index 属性（从零开始）

```
<li ng-repeat="x in xs">
    <form>
       <label for="UNIQUELABEL{{$index+1}}">name</label>
       <input  id="UNIQUELABEL{{$index+1}}">
       <label for="ANOTHERUNIQUELABEL{{$index+1}}">name2</label>
       <input  id="ANOTHERUNIQUELABEL{{$index+1}}">
    </form>
</li> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-08-09T17:45:30.303

由于`ng-repeat`在每次迭代中提供了一个新的范围对象，我更喜欢使用类似的东西

```
<li ng-repeat="x in xs">
    <form>
       <label for="UNIQUELABEL{{::$id}}_1">name</label>
       <input  id="UNIQUELABEL{{::$id}}_1">
       <label for="UNIQUELABEL{{::$id}}_2">name2</label>
       <input  id="UNIQUELABEL{{::$id}}_2">
    </form>
</li> 
```

这种方法的优点是保证您不会在文档上有具有相同 id 的重复选择器。否则，在路由或制作动画时很容易出现重复。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-09-24T16:39:31.430

对于许多情况，更好的解决方案可能是将 the`<input>`和 label 文本包含在单个`<label>`元素中。这是完全有效的 HTML，在所有浏览器中都能正常工作，并且具有易于使用分层数据的额外好处，因为您不需要使用迭代器变量：

```
<li ng-repeat="x in xs">
   <label>
       Label Text
       <input type="text">
   </label>
</li> 
```

# php - Node.JS(+ Socket.io) 和 PHP 的结合，用户和改变 Socket ID 呢？

> ID：14663399
> 
> 赞同：0
> 
> 时间：2013-02-02T15:29:30.483
> 
> 标签：php, node.js, authentication, socket.io

我已经玩 Node.js 两天了，我正在慢慢理解它是如何工作的。我现在检查了多个线程和帖子，但我似乎要么误解了它们，要么我对这个应用程序的思考方式完全错误。

我的应用程序主要基于 PHP，并使用 Node.js 作为通知系统。我最初只想在 Node.js 中实现这一点，但我更熟悉 PHP，所以我只想将 Node.js 用作通知系统。

我没有任何真正的代码要展示，因为我主要是在玩，看看 Node 可以做什么，到目前为止，这似乎是我需要的东西，有一件事我只是想不通或似乎错了理解。到目前为止，我想出了如何在用户和服务器之间发送数据并为此使用了 socket.io。

那么，如果我有一个在我的应用程序上注册并登录的用户怎么办。然后他有一个来自 socket.io 的套接字 ID，但是当用户离开我的应用程序并在第二天回来时，他的套接字 ID 会更改，因为它似乎在每个连接上都会更改。我需要让我的用户以某种方式始终拥有相同的套接字 ID 或其他告诉我的 node.js 服务器它应该只将数据发送给一个特定用户或多个用户的东西。此外，由于 socketid 似乎在每次请求时都会发生变化，因此当用户访问不同的页面时它甚至会发生变化，所以我似乎不知道哪个用户是什么。

我有点困惑，同时使用 PHP 和 Node.js 的流程对我来说仍然有点神秘，所以我希望我的问题很清楚。我不想依赖很多模块，因为我发现所有这些不同的模块对于像我这样的初学者来说有点令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:45:23.497

只要 PHP-Node.js 使用存储在标志文件会话以外的其他位置的会话，就可以说缓存服务或数据库 mysql 或 nosql ..

您可以使用“相同的平面文件”会话，认为缓存或数据库可以使您的应用程序“更多”当然还有其他做法可以通过控制**何时**呈现包含要连接的信息的 javascript 代码来
允许经过身份验证的用户尝试连接到socket.io服务器，其中一个附加列表存储在所有连接的内存中，具有用户名/日志/时间戳/会话变量/等信息。

# java - java date / calendar -> 无时区，无转换

> ID：14663401
> 
> 赞同：0
> 
> 时间：2013-02-02T15:29:46.677
> 
> 标签：java, android, jakarta-ee

实际上我是一个 .NET 人，我想知道为什么像处理日期/时间对象这样简单而琐碎的事情会如此复杂

我需要的一切都是一个对象，它包含日、月、年、小时、分钟、秒......的参数以及操纵这些值的可能性。

我不想转换到任何时区。参数的值应该已经设置好了！

问题 1：如何从分钟创建日期对象？问题 2：如何从 int 中创建日期对象？

我已经花了几个小时来完成它，我不敢相信我真的必须用 Java 创建我自己的 DateTime 实现！

我尝试使用 Calendar(GMC, UTC...) 和 Date 但始终相同。从我的 Date-TimePicker 获得的值将转换为夏令时或与我定义的日历相对应的其他规则。我真正想知道的一件事是，当我只使用“日期”对象时，我的时间也会发生变化......

干杯，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-08T07:15:08.773

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:43:57.360

Date 和 Calendar 不是 Java 库中最好的 API（委婉地说，我认为它们是缺陷互补的），这就是为什么很多 Java 程序员都在使用[Joda-Time](http://joda-time.sourceforge.net/)并且许多人期待包含在标准分发中[JSR-310](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=ThreeTen)，旧日期和日历混乱的全新替代品。Joda 的另一个好处是，在 Date 和 Joda 的类型之间转换非常容易（通过使用 .toDate() 或通过使用接受 Date 的相关构造函数），因此在代码中使用 Joda 的类型和在“外边缘”使用 Date与基于日期的代码交互的地方一点也不痛苦。

对于您的问题 2，仍然有一个接受 int 的 Date 构造函数，虽然它已被弃用，但您仍然可以使用它，请参阅[此线程](https://stackoverflow.com/questions/460423/why-was-new-dateint-year-int-month-int-day-deprecated)。但我只建议你在切换到 Joda 不适合你的情况下走这条路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:40:35.533

我建议您看一下 Joda Time，它的 java 日期设计正确。

# backbone.js - 主干.js 必须定义一个 url 属性

> ID：14663404
> 
> 赞同：1
> 
> 时间：2013-02-02T15:30:10.100
> 
> 标签：backbone.js, backbone-model

我正在尝试使用 Backbone.localStorage 作为应用程序的后端。

我编写了一个名为 Era 的模型，以及一个相应的 EraView。在 EraView 中按 enter 会导致模型被保存，这就是我得到错误的地方：

```
Uncaught Error: A "url" property or function must be specified 
urlError     backbone.js:1509
_.extend.url     backbone.js:515
_.result     underscore-min.js:1060
Backbone.sync     backbone.js:1410
Backbone.sync     backbone.localStorage.js:188
_.extend.sync     backbone.js:276
_.extend.save     backbone.js:476
karass.EraView.Backbone.View.extend.close     era.js:61
karass.EraView.Backbone.View.extend.updateOnEnter     era.js:75 
```

这是 EraView 的代码

```
var karass = karass || {};

// Era Item View

// the DOM element for an era item
karass.EraView = Backbone.View.extend({
    tagName: 'li',
    className: 'era',
    template: _.template( $('#era-template').html() ),

    // The DOM events specified to an item
    events: {
        'dblclick .edit-input': 'edit',
        'keypress .edit-input': 'updateOnEnter',
        //'blur .edit': 'close',
    },

    // The EraView listens for changes to its model, re-rendering. Since there's
    // a one-to-one correspondence between an era and a EraView in this karass, 
    // we set a direct reference on the model for convenience.
    initialize: function(){
        _.bindAll(this);
        this.model.on('change', this.render, this);
    },

    // Re-renders the era item to the current state of the model and
    // updates the reference to the era's edit input within the view
    render: function(){
        this.$el.html( this.template(this.model.attributes));
        this.$era_start = this.$('.era-start');
        this.$era_end = this.$('.era-end');

        this.$era_start.attr('disabled', true);
        this.$era_end.attr('disabled', true);

        return this;
    },

    // Switch this view into editing mode, displaying the input field
    edit: function(){
        this.$('.edit-input').removeAttr('disabled');

        this.$el.addClass('editing');
        this.$('.edit-input').addClass('editing');
    },

    // Close the editing mode, saving changes to the era
    close: function(){
        this.$('.edit-input').attr('disabled', true);

        var start = this.$era_start.val().trim();
        var end = this.$era_end.val().trim();

        if(start && end){
            this.model.save({from: start, until: end});
        }

        this.$el.removeClass('editing');
        this.$('.edit-input').removeClass('editing');

        this.trigger('close');
    },

    updateOnEnter: function(e){
        if(e.which !== ENTER_KEY && (!this.$era_start.val().trim() || !this.$era_end.val().trim())){
            return;
        }

        this.close();
    }
}); 
```

这是时代模型的代码：

```
var karass = karass || {};

karass.Era = Backbone.Model.extend({

    defaults: {
        from: '', 
        until: ''
    },

}); 
```

我以为我在使用 localStorage 时不需要 url。

**编辑：**我忘了提到，虽然这种行为发生在 Era/EraView 本身中，但它也发生在扩展 Era 的 Name 模型中。Name 又属于 Names 集合。我不知道这是否有区别，但我想我添加它。

**编辑 2：**名称集合如下所示：

```
karass.Names = History.extend({

    model: karass.Name,

    localStorage: new Backbone.LocalStorage('karass-names'),

}); 
```

**编辑 3：**我在 jsfiddle 上发布了所有代码：http: [//jsfiddle.net/herrturtur/CRv6h/](http://jsfiddle.net/herrturtur/CRv6h/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:02:39.190

使用 localStorage 时不需要 url。但是您需要`localStorage`在模型或集合上设置属性（如果在集合`localStorage`上设置，集合内的模型将“继承”此设置）：

```
karass.Era = Backbone.Model.extend({

    localStorage: new Backbone.LocalStorage("EraCollection"), 
    // the EraCollection should be an unique name within your app.

    defaults: {
        from: '', 
        until: ''
    },

}); 
```

如果您不设置该`localStorage`属性，则插件会退回到默认的 ajax 同步，因此您会得到 uri 丢失异常。

# javascript - js 进行平滑滚动

> ID：14663407
> 
> 赞同：5
> 
> 时间：2013-02-02T15:30:20.567
> 
> 标签：javascript, jquery, css, scroll

我真的对滚动事件有疑问。我试图整夜解决它，但我不能。

我正在尝试在顶部粘贴导航。`$(window).scrollTop()`在导航之前通过点时将处理棒效果。

问题是，在 IE 和 Chrome 上会出现“闪烁”效果（类似于延迟过程），但在 Firefox 上不会。

在我的研究中，我知道 Firefox 默认具有“平滑滚动”功能。

但是，请在 Chrome 或 IE 上查看此示例

[http://www.backslash.gr/demos/jquery-sticky-navigation/](http://www.backslash.gr/demos/jquery-sticky-navigation/)

像火狐一样流畅，代码就是这么简单......

关键是，我正在做与此示例完全相同的事情，但为什么我有“眨眼”效果？

**是 CSS 的诀窍吗？**

**有什么方法可以像 js 上的 firefox 一样创建平滑的 scrool 吗？**

非常感谢您的帮助。

```
$(window).on('scroll', Sticky);

function Sticky(){
    $(this).scrollTop() > anchor.offset().top
    ? nav.css({ 'position': 'fixed', 
                      'z-index': z_index, 
                       top: y, 
                       left: x, })
    : nav.css({ 'position': 'static', });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:58:29.580

查看不完整的示例代码真的很难确定发生了什么，所以请用完整的代码更新您的问题，或者更好 - 上传一个[JSFiddle](http://jsfiddle.net/)作为示例，我们可以直接对其进行必要的更改。`flickering`到目前为止（根据我之前所说的），由于**示例代码中的拼写错误，您**似乎得到了影响：

```
? nav.css({ 'position': 'fixed', 
                  'z-index': z_index, 
                   top: y, 
                   left: x, })
: nav.css({ 'position': 'static', }); 
```

您没有终止需要应用的 CSS 属性和值的数组（您以逗号结尾`,`），并且您没有将一些 CSS 属性括在单引号`'`中。**您的代码应该是**：

```
? nav.css({ 'position': 'fixed', 
                  'z-index': z_index, 
                   'top': y, 
                   'left': x })
: nav.css({ 'position': 'static' }); 
```

当然，前提是您已经设置了 variables `z_index`，`y`并且`x`事先。

**编辑和免责声明：**我用原始演示代码创建了一个新的[JSFiddle 。](http://jsfiddle.net/q3XSg/)您提到的演示是受版权保护的，所以如果对您有帮助，请感谢原作者而不是我。不过，我发布[JSFiddle](http://jsfiddle.net/q3XSg/)的代码可以免费下载。所以我想也可以将它用于演示目的。更改该代码以符合您的要求，并在您更新它的每个步骤将其更新为新版本。它将帮助您跟踪您做错了什么（如果有的话）。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:03:43.400

我想你可能在这里混淆了两件事。

1.  查看您链接到的工作代码。如果您使用鼠标滚轮在 chrome 或 IE 或 firefox 上滚动，那里会出现闪烁。
2.  眨眼是因为你突然改变了姿势。尝试更改 js，使其确实为位置设置动画，而不是突然更改其值。

正如其他人所说，链接到工作代码并通过展示技巧来期待答案可能对我们所有人都没有帮助。尝试在js的位置变化线上添加动画，看看是否有帮助。

这里没有诀窍。它全部在代码中，因此请阅读源代码并享受。

# matlab - 以编程方式调用平移工具

> ID：14663412
> 
> 赞同：0
> 
> 时间：2013-02-02T15:30:44.147
> 
> 标签：matlab, matlab, plot, pan

在[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题")中，如何以编程方式更改绘图盘？

文档中的函数语法：

```
pan on
pan xon
pan yon
pan off
pan
pan(figure_handle,...)
h = pan(figure_handle) 
```

该代码似乎用于启用和禁用该工具并确定*垂直*或*水平*平移方向，我如何`pHandle`使用`pan`函数或以编程方式更改带有句柄的绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:35:32.980

改变平移，我一般使用轴限位功能

```
xlim(aHandle, [xlow xhigh])
ylim(aHandle, [ylow yhigh])
axis(aHandle, [xliw xhigh ylow yhigh]) 
```

要专门平移，例如向左平移 5 个单位，您可以使用：

```
xlim(aHandle, xlim(pHandle)+5); 
```

最后一个函数使用`xlim`命令读取当前的 x 轴范围，加 5，然后使用相同的函数将 x 范围设置为高 5 的值。

如果省略轴句柄`aHandle`，则`gca`使用 的结果。

# html - 表单，标签和输入的单独 div

> ID：14663413
> 
> 赞同：0
> 
> 时间：2013-02-02T15:30:54.407
> 
> 标签：html, forms

为输入设置单独的 div 为标签设置单独的 div 是否正确？例如：

```
<div class="labels">
     <label for="place-name">Place name: </label>
     <label for="place-cat">Category: </label>
</div>

<div class="inputs">
     <input type="text" name="place-name">
     <select name="place-cat">
          <option value="value-01">Value 01</option>
          <option value="value-02">Value-02</option>
     </select>
</div> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:43:39.840

```
You can use this 

<style>
.clear{
clear:both;
margin:5px;
padding:5px 0px;
}
.labels{
float:left;
width:100px;
}
.inputs{
float:left;
}
</style>

<div class="clear">
<div class="labels"><label for="place-name">Place name: </label></div>
<div class="inputs"><input type="text" name="place-name"></div>
</div>

<div class="clear">
<div class="labels"><label for="place-cat">Category: </label></div>
<div class="inputs"><select name="place-cat">
          <option value="value-01">Value 01</option>
          <option value="value-02">Value-02</option>
     </select></div>
</div> 
```

# automatic-ref-counting - 更新到 iOS 6.1 后出现 ARC Retain Cycle

> ID：14663418
> 
> 赞同：3
> 
> 时间：2013-02-02T15:31:24.183
> 
> 标签：automatic-ref-counting, afnetworking, ios6.1

更新到 iOS 6.1 后，我在 AFNetworking 框架的 AFImageRequestOperation.m 和 AFHTTPClient.m 中收到此警告：

> 在此块中强烈捕获“操作”可能会导致保留周期

基于[这个答案，](https://stackoverflow.com/a/12802487/1449151)我可以通过使用 __weak 变量来修复 ARC 中的保留周期。它也说

> 块将被捕获的对象保留

有谁知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:04:55.197

我们很幸运，XCode 4.6 显示了一个警告来避免这个问题它可以通过提供一个弱引用来解决

```
AFImageRequestOperation *requestOperation = [[AFImageRequestOperation alloc] initWithRequest:urlRequest];

**__weak AFImageRequestOperation *tempRequestOperation = requestOperation;**

[requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    if (success) {
        UIImage *image = responseObject;
        if (imageProcessingBlock) {
            dispatch_async(image_request_operation_processing_queue(), ^(void) {
                UIImage *processedImage = imageProcessingBlock(image);

                dispatch_async(**tempRequestOperation**.successCallbackQueue ?: dispatch_get_main_queue(), ^(void) {
                    success(operation.request, operation.response, processedImage);
                });
            });
        } else {
            success(operation.request, operation.response, image);
        }
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    if (failure) {
        failure(operation.request, operation.response, error);
    }
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:56:17.203

好的，这就是问题所在。我一直在从 GitHub 下载[Master 分支](https://github.com/AFNetworking/AFNetworking/archive/master.zip)，现在我尝试[从这里](http://afnetworking.com/)下载 AFNetworking （版本 1.1.0），它不再向我显示警告。

我不明白为什么我下载时最新的提交没有包含在 master 分支中，但很明显他们已经在之前的块警告中解决了这些强 refs。

始终检查[网站](http://afnetworking.com/)以查看最新发布的版本或从 GitHub 同步最新提交 :) （它没有在我的 iOS 6.0 应用程序中显示任何内容，但 Xcode 4.6 刚刚显示它们）

# google-drive-api - 转换标志为 TRUE 的插入操作失败

> ID：14663419
> 
> 赞同：1
> 
> 时间：2013-02-02T15:31:43.833
> 
> 标签：google-drive-api

我正在使用 xdocreport 生成生成 WORD 文件的报告。

从生成的报告中，我`InputStreamContent`使用 MIME-TYPE `"application/vnd.openxmlformats-officedocument.wordprocessingml.document"`(MS WORD - DOCX) 创建了一个写入 Google Drive 的文件：

```
// create Word file stream using xdocreport
OutputStream2InputStream outputStream = new OutputStream2InputStream(); // buffer
report.process(context, outputStream);
// create inputstream for Google Drive
InputStreamContent inputStream = new InputStreamContent("application/vnd.openxmlformats-officedocument.wordprocessingml.document",
        outputStream.getInputStream());
inputStream.setLength(outputStream.size()); 
```

**编写 MSWORD 文档工作正常（CONVERT= FALSE）：**

```
File file = new File();
Insert insertOperation = service.files().insert(file, inputStream).setConvert(false);
file.setTitle("test.docx");
file.setMimeType(inputstream.getType());
File result = insertOperation.execute(); 
```

结果在我的 Google Drive 上创建了一个 WORD DOCX 文件。

**使用 CONVERT=TRUE 编写相同的输入流失败**

```
File file = new File();
Insert insertOperation = service.files().insert(file, inputStream).setConvert(true);
file.setTitle("test");
//file.setMimeType(inputstream.getType()); // what here ? 
File result = insertOperation.execute(); 
```

**结果**

*1.不设置mime类型时：*新创建的文件`result`有**0字节**和**MIME类型：application/vnd.google-apps.kix**

*2\. 设置 mime 类型时：* MIME-TYPE 设置为“application/vnd.google-apps.document”并且 convert = true，结果为 400: BAD REQUEST。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:44:02.253

这是一个常见的问题。不要在请求元数据中设置 MIME 类型。Google Drive 将决定要转换的 MIME 类型。

您标记的行`// what here ?`应该被排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T22:19:47.787

您需要做的就是使用正确的 .docx MIME 类型更新您的 getType()。

```
docx=>   application/vnd.openxmlformats-officedocument.wordprocessingml.document 
```

我有同样的问题，这段代码修复了它！

# jquery - jQuery: if ($('#indicador').width()

> ID：14663424
> 
> 赞同：2
> 
> 时间：2013-02-02T15:32:43.183
> 
> 标签：jquery, conditional

我能够制作一个动画到宽度 150 像素的栏。现在我试着让它回到原来的位置，但只有当它到达终点时。为什么条件： if ($('#indicator').width() > '149px') 不起作用？如何做好这件事？

```
$(function(){        
  $("#play").click(function() {
    $("#indicator").animate({"width": "150px"}, 8400);
  });

  // indicador back to 0
  if ($('#indicator').width() > '149px') {
      $("#indicator").animate({"width": "1px"}, 100);
  }
}); 
```

在这里查看和播放：http: [//jsfiddle.net/SwkaR/](http://jsfiddle.net/SwkaR/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:36:32.880

### 问题 1

在 DOM 准备好 ( `$(function() { /* code for when the dom is ready */ });`.

### 问题2

由于 Javascript 是异步的，你应该为你的动画创建一个回调：

```
$(function(){

  $("#play").click(function() {
      $("#indicator").animate({"width": "150px"}, { duration: 8400, complete: function() {
          $("#indicator").animate({"width": "1px"}, 100);
      }});
  });

}); 
```

[http://jsfiddle.net/zEwHx/](http://jsfiddle.net/zEwHx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:34:29.467

```
if ($('#indicator').width() > 149) 
```

jQuery`width()`函数返回一个整数宽度值，而不是字符串，其单位也为 px。

您在程序中有逻辑错误。您可以链接`animate()`功能。一旦第一个功能完成，它会自动移动到第二个。

```
$(function(){
  $("#play").click(function() {
      $("#indicator").animate({"width": "150px"}, 8400).animate({ "width" : "1px" }, 100);
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:36:07.920

[宽度](http://api.jquery.com/width/)返回一个数字：

> .css(width) 和 .width() 的区别在于后者返回一个没有单位的像素值（例如，400），而前者返回一个单位完整的值（例如，400px）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T15:49:27.783

Try this... not use `$(function)` use the `.on`...

```
$("#play").on('click', function() {  
      $("#indicator").animate({"width": "150px"}, {duration:8400, complete:function(){
          $("#indicator").animate({"width": "1px"}, 100);
      }});
}); 
```

[jsFiddle Example](http://jsfiddle.net/SwkaR/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T15:35:45.843

您不能对像`'149px'`. 相反，您需要使用`> 149`. 或者更好（更具可读性），`>= 150`

# javascript - 以编程方式侦听 html 输入更改

> ID：14663425
> 
> 赞同：1
> 
> 时间：2013-02-02T15:32:46.257
> 
> 标签：javascript, html, internet-explorer

我想听听在 html 输入字段中所做的更改。更改不是由用户完成的，而是由脚本设置值（因此 onchange 不起作用）。不幸的是，我无法访问脚本/代码。

浏览器是 IE 7 或 8。我不知道该页面是否显示在真正的浏览器中，而是显示在使用 IE 引擎显示我的 html 页面的应用程序中。

该应用程序是一种通过 GUI 而非文本代码编程的状态机。我可以让它显示我想要的任何页面，我还可以将内部变量与 html 页面中的输入字段/DOM 元素链接起来。应用程序按原样加载页面，加载完成后（并执行 body 中的 onload 方法），它将用变量的内容填充链接的元素。

图形编程是一团糟，我想用 Javascript 在 HTML 页面中做同样多的工作，但我还没有找到一种方法来添加我的脚本，以便在执行之前填充内部变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:43:08.220

如果您只使用 IE，就像您提到的 IE 7 和 8，请尝试 onpropertychange。来自另一篇文章：[JS Events: hooking on value change event on text input](https://stackoverflow.com/questions/1847893/js-events-hooking-on-value-change-event-on-text-inputs)

# python - python清洗词造句

> ID：14663428
> 
> 赞同：0
> 
> 时间：2013-02-02T15:32:56.490
> 
> 标签：python, string, python-2.7

我正在尝试编写一个接受字符串（句子）然后清理它并返回所有字母、数字和连字符的函数。但是代码似乎出错了。请知道我在这里做错了什么。

示例：Blake D'souza is an !d!0t
应该返回：Blake D'souza is an d0t

Python：

```
def remove_unw2anted(str):
    str = ''.join([c for c in str if c in 'ABCDEFGHIJKLNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890\''])
    return str

def clean_sentence(s):
    lst = [word for word in s.split()]
    #print lst
    for items in lst:
        cleaned = remove_unw2anted(items)
    return cleaned

s = 'Blake D\'souza is an !d!0t'
print clean_sentence(s) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:35:21.437

你只返回最后一个干净的词！

应该：

```
def clean_sentence(s):
    lst = [word for word in s.split()]

    lst_cleaned = []
    for items in lst:
        lst_cleaned.append(remove_unw2anted(items))
    return ' '.join(lst_cleaned) 
```

一个更短的方法可能是这样的：

```
def is_ok(c):
    return c.isalnum() or c in " '"

def clean_sentence(s):
    return filter(is_ok, s)

s = "Blake D'souza is an !d!0t"
print clean_sentence(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:14:09.493

使用`string.translate`哪个有好处的变体*？*易于扩展并且是`string`.

```
import string

allchars = string.maketrans('','')

tokeep = string.letters + string.digits + '-'

toremove = allchars.translate(None, tokeep)

s = "Blake D'souza is an !d!0t"

print s.translate(None, toremove) 
```

输出：

```
BlakeDsouzaisand0t 
```

OP 说只保留字符、数字和连字符 - 也许他们也意味着保留空格？

# c# - 来自字符串不同部分的子字符串

> ID：14663434
> 
> 赞同：-4
> 
> 时间：2013-02-02T15:33:59.767
> 
> 标签：c#

我有一个包含白色字符的字符串，我想从中提取一些值。

```
string mystring = "1\. JoshTestLowdop 192";
 (from 1\. to J there's a whitespace)
string FirstNO = mystring.Substring(0, mystring.IndexOf(' '));
string Name = mystring.Substring(mystring.IndexOf(' '), mystring.LastIndexOf(' '));
string ID = mystring.Substring(mystring.LastIndexOf(' '); 
```

但不幸的是，字符串 Name 还包含 192 中的数字 1 ..这不应该。

有人可以解释..怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:36:40.297

第二个参数`Substring`是一个“长度”参数，而不是字符串中的位置。您需要减去起始位置。

也不是您当前的版本包含“1。”之后的空格，所以名称实际上是“JoshTestLowdop”。您需要将 1 添加到第一个子字符串以获取实际名称。

```
string mystring = "1\. JoshTestLowdop 192";
int start = mystring.IndexOf(' ');
string FirstNO = mystring.Substring(0, start);
string Name = mystring.Substring(start + 1, mystring.LastIndexOf(' ') - (start + 1));
string ID = mystring.Substring(mystring.LastIndexOf(' ') + 1);
Console.WriteLine(FirstNO);
Console.WriteLine(Name);
Console.WriteLine(ID);

// outputs:
1.
JoshTestLowdop
192 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:38:55.353

使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法：

```
string mystring = "1\. JoshTestLowdop 192";

var splitted = mystring.Split(new(){' '});

string FirstNo = splitted[0];
string name = splitted[1];
string ID = splitted[2]; 
```

这是假设名称也不包含空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:38:27.470

问题出在 Substring 函数的第二个参数上。它应该是：

```
string Name = mystring.Substring(mystring.IndexOf(' '), mystring.LastIndexOf(' ')-mystring.IndexOf(' ')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T15:39:02.653

你可以试试这个：

```
string mystring = "1\. JoshTestLowdop 192";    

string[] strs = mystring.Split(' ');

string FirstNO =strs[0];
string Name = strs[1];
string ID = strs[2]; 
```

# android - 使用 Asynctask 时如何通知用户文件下载完成

> ID：14663439
> 
> 赞同：1
> 
> 时间：2013-02-02T15:34:19.527
> 
> 标签：android, android-asynctask

我正在使用 Asynctask 在我的 Android 应用程序中下载文件。由于文件大小通常很大，我在后台启动文件下载。没有进度条或任何显示，以便用户可以在下载过程中访问应用程序的其他部分。

文件下载完成后，我想通知用户他的文件已成功下载。

使用 onPostexecute() 方法会产生问题，因为下载过程开始时用户不再处于同一活动中。结果，我无法使用 onPostExecute() 中的警报对话框和通知，因为上下文存在问题。

我已将 Asynctask 的代码粘贴在下面。所以，请给我一个解决这个问题的方法。

```
class DownloadProcess extends AsyncTask<Void,Void,Void>{

        Context cxt;

        public DownloadProcess(Context context) {
            cxt=context;
        }

        @Override
        protected Void doInBackground(Void... arg0) {
             try {
                    String fileurl="http://www.bigfiles/" + filenm;
                    URL url = new URL(fileurl); 
                    HttpURLConnection c = (HttpURLConnection) url.openConnection();
                    c.setRequestMethod("GET");
                    c.setDoOutput(true);
                    c.connect();

                    Path = Environment.getExternalStorageDirectory() + "/download/";
                    File pth=new File(Path);
                    File file = new File(pth,filenm);
                    FileOutputStream fos = new FileOutputStream(file);

                    InputStream is = c.getInputStream();

                    byte[] buffer = new byte[1024];
                    int len1 = 0;
                    while ((len1 = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, len1);
                    }
                    fos.close();
                    is.close();

                } catch (IOException e) {
                    Log.d("amit", "Error: " + e);
                }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            if (((Activity) AppDet.this).isFinishing() == false) {      
                AlertDialog.Builder builder = new AlertDialog.Builder(AppDet.this);
                builder.setMessage("The app download is complete. Please check " +Path+ " on your device and open the " + filenm+ " file downloaded");
                builder.setCancelable(true);
                builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                    });
                AlertDialog alert = builder.create();
                alert.show();
                MediaPlayer md=MediaPlayer.create(AppDet.this, R.raw.ding);
                md.start();
            }
            else {
                //Not sure what to do here
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:42:04.707

改用 IntentService 怎么样……它有一个上下文，所以你可以使用通知……对话框很烦人，必须死

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:37:59.373

我认为你应该使用

AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());

在你的代码中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T15:47:48.543

正如@QAMAR 指出的那样，将通知（不是警报弹出窗口，这是糟糕的用户体验）与应用程序上下文一起使用。

但是，在我们的应用程序中，我们显示了来自`android.app.Service`管理任务子集的通知（我们*不会*直接从 AsyncTask 将结果添加到 UI - 当您的活动生命周期结束时，它们可能会被杀死，这是一项服务更明确地控制服务及其子任务何时结束）

```
final NotificationCompat.Builder builder = new NotificationCompat.Builder(this)
.setContentIntent(pendingIntent)
.setSmallIcon(<some drawable>)
.setWhen(System.currentTimeMillis())
.setAutoCancel(true)
.setContentTitle(<some internationalised message>)
.setContentText(<some internationalised subtitle>);

// Send the notification.
((NotificationManager) getSystemService(NOTIFICATION_SERVICE)).notify(<notification id>, builder.getNotification()); 
```

如果您需要异步任务的结果来影响您正在使用的活动，那么您需要绑定服务。我今天将深入研究这些内容，所以我会回复我的任何见解......

# spring - 多个命令名称

> ID：14663441
> 
> 赞同：0
> 
> 时间：2013-02-02T15:34:27.390
> 
> 标签：spring, jsp

JSP中如何声明多个commandName？普通示例（一个命令名称）：

```
<form:form method="post" action="saveContact.do" commandName="newContact"> 
```

我想：

```
<form:form method="post" action="saveContact.do" commandName="newContact" commandName="newAdress"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:56:42.717

每个表单允许只有一个对象，您可以使用字段 newContact 和 newAdress 创建另一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:40:36.177

我建议你制作一个`newContact`包含`newAdress`.

```
public class Contact{    
Address adress;    

getAddress(){
    return address
}

setAddress(Address address){
     this.address=address;
} 
```

修复表单以这种方式工作并且一切正常。

```
<form:form method="post" action="saveContact.do" commandName="newContact">
     <form:input name="address.street" />
</form:form> 
```

# google-app-engine - 拥有的一对多字段突然无法修改 - DatastoreRelationFieldManager.checkForParentSwitch 中的 ClassCastException

> ID：14663445
> 
> 赞同：0
> 
> 时间：2013-02-02T15:34:32.720
> 
> 标签：google-app-engine, google-cloud-datastore, one-to-many, jdo

我的网络应用突然不允许人们购买我们的产品。我不知道该怎么办。

昨晚我们的一位工程师不小心`@Persistent`从拥有的一对多字段（在父类中）中删除了标签。他在没有对其进行测试的情况下将其上传到 App Engine 服务器。我们收到报告说人们买不到东西，所以我们查看了更改，进入并恢复了`@Persistent`标签。

**但是现在每次代码尝试修改该字段时都会**出现异常。

请帮助-我不知道该怎么做-我们已经添加了`@Persistent`注释-为什么会发生这种异常？

```
@PersistenceCapable
public class Published {
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @PrimaryKey
    private Long id;

    ...
    // see note about this field above
    @Persistent(defaultFetchGroup = "true", mappedBy = "pub")
    private List<License> licenses;
    ...
}

@PersistenceCapable
public class License {
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @PrimaryKey
    private Key id;
    @Persistent
    private Published pub;
    ...
} 
```

当我创建一个新的 Published 并调用时，会发生以下异常`pub.getLicensed().add(new Licensed(...))`

```
Uncaught exception from servlet
java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.String
    at org.datanucleus.store.appengine.DatastoreRelationFieldManager.checkForParentSwitch(DatastoreRelationFieldManager.java:203)
    at org.datanucleus.store.appengine.DatastoreRelationFieldManager$1.setObjectViaMapping(DatastoreRelationFieldManager.java:134)
    at org.datanucleus.store.appengine.DatastoreRelationFieldManager$1.apply(DatastoreRelationFieldManager.java:113)
    at org.datanucleus.store.appengine.DatastoreRelationFieldManager.storeRelations(DatastoreRelationFieldManager.java:82)
    at org.datanucleus.store.appengine.DatastoreFieldManager.storeRelations(DatastoreFieldManager.java:959)
    at org.datanucleus.store.appengine.DatastorePersistenceHandler.storeRelations(DatastorePersistenceHandler.java:585)
    at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertPostProcess(DatastorePersistenceHandler.java:320)
    at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObjects(DatastorePersistenceHandler.java:272)
    at org.datanucleus.store.appengine.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:256)
    at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:3185)
    at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:3161)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1298)
    at org.datanucleus.sco.SCOUtils.validateObjectForWriting(SCOUtils.java:1476)
    at org.datanucleus.store.mapped.scostore.ElementContainerStore.validateElementForWriting(ElementContainerStore.java:380)
    at org.datanucleus.store.mapped.scostore.FKListStore.validateElementForWriting(FKListStore.java:609)
    at org.datanucleus.store.mapped.scostore.FKListStore.internalAdd(FKListStore.java:344)
    at org.datanucleus.store.appengine.DatastoreFKListStore.internalAdd(DatastoreFKListStore.java:146)
    at org.datanucleus.store.mapped.scostore.AbstractListStore.add(AbstractListStore.java:105)
    at org.datanucleus.sco.backed.List.add(List.java:649)
    at (my servlet) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:21:12.250

看起来 App Engine 错误阻止我上传代码。一旦 GAE 赶上并切换到新代码，一切正常。

作为记录，我不确定是什么修复了它 - 它可能只是添加了`@Persistent`注释，或者它可能已经更改`Published.id`为 a`Key`而不是`Long`.

# iphone - NSMutableDictionary 上的 EXC_BAD_ACCESS

> ID：14663446
> 
> 赞同：1
> 
> 时间：2013-02-02T15:34:37.250
> 
> 标签：iphone, ios, objective-c, exc-bad-access, nsmutabledictionary

我从 iOS 开发开始，我有这个代码：

首先我声明 listOfItems NSMutableArray：

```
@interface SAMasterViewController () {
    NSMutableArray *listOfItems;
}
@end 
```

现在，这是给我“EXC_BAD_ACCESS（代码=1，地址=0x5fc260000）”错误的代码部分。错误在“individual_data”对象的最后一行给出。

```
listOfItems = [[NSMutableArray alloc] init];
for(NSDictionary *tweetDict in statuses) {
    NSString  *text          = [tweetDict objectForKey:@"text"];
    NSString  *screenName    = [[tweetDict objectForKey:@"user"] objectForKey:@"screen_name"];
    NSString  *img_url       = [[tweetDict objectForKey:@"user"] objectForKey:@"profile_image_url"];
    NSInteger unique_id      = [[tweetDict objectForKey:@"id"] intValue];
    NSInteger user_id        = [[[tweetDict objectForKey:@"user"] objectForKey:@"id"] intValue ];

    NSMutableDictionary *individual_data = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                            text, @"text_tweet",
                                            screenName,@"user_name",
                                            img_url, @"img_url",
                                            unique_id, @"unique_id",
                                            user_id, @"user_id", nil];
    [listOfItems addObject:individual_data];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:41:44.307

您不能将`NSInteger`s 或任何其他非 Objective-C 类放入数组或字典中。您需要将它们包装在一个[`NSNumber`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html).

```
NSMutableDictionary *individual_data = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                            text, @"text_tweet",
                                            screenName,@"user_name",
                                            img_url, @"img_url",
                                            [NSNumber numberWithInteger:unique_id], @"unique_id",
                                            [NSNumber numberWithInteger:user_id], @"user_id", nil];
//Or if you want to use literals
NSMutableDictionary *individual_data = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                            text, @"text_tweet",
                                            screenName,@"user_name",
                                            img_url, @"img_url",
                                            @(unique_id), @"unique_id",
                                            @(user_id), @"user_id", nil]; 
```

# groovy - 本地包链接的 groovydoc

> ID：14663448
> 
> 赞同：2
> 
> 时间：2013-02-02T15:34:45.340
> 
> 标签：groovy, groovydoc

在我的 groovy 文件中，我有一个 groovydoc 链接，如下所示：

```
/**
 * This links to {@link MyClassInSamePackage}
 */
def myMethod() {

} 
```

因为 的类`myMethod`与 相同的包`MyClassInSamePackage`，所以这应该可以工作，但它不会在文档中生成链接，而是在`<code>`标签中将其包围。我最近打开了[https://issues.apache.org/jira/browse/GROOVY-5957](https://issues.apache.org/jira/browse/GROOVY-5957)，但根据[https://issues.apache.org/jira/browse/GROOVY-3745](https://issues.apache.org/jira/browse/GROOVY-3745)，看起来这个问题应该是已修复（我使用的是 groovy 2.0.5）。

如果不使用完整的包名，任何人都可以确认（或反驳）同一包中的链接是否在 groovydoc 中正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:15:45.163

`@link`我将 Grails 2.2 与 Groovy 2.0.5 一起使用，我看到了相同的行为，除了 GroovyDoc 创建标签和标签的功能似乎`@see`是不可预测的，有时它的工作原理 - 有时不是。

它也可能是我的 IDE 中的一个错误（IntelliJ IDEA 12.0 Ultimate - 30 天试用版），但如果您也看到这种行为，可能是其中的一些错误`Groovydoc`？

您使用哪个 IDE？

# android - 将 android:onClick 与来自另一个活动的方法一起使用？

> ID：14663449
> 
> 赞同：1
> 
> 时间：2013-02-02T15:34:46.313
> 
> 标签：android, attributes, onclick

我有包含在我的活动中的菜单 xml，我使用 onClick 属性而不是绑定每个 startActivity。

我的问题是，如何在 xml onClick attr 上定义以调用例如位于我的 mainActivity 上的方法？

我想过类似 android:onClick="mainActivity.doSomething" 但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:41:05.050

在 xml 中使用 onclick 是个[坏主意。](https://stackoverflow.com/questions/5400234/in-android-is-it-better-applying-an-onclicklistener-or-use-androidonclick)事实是它只试图找到当前类正在使用它的方法。如果您真的想这样做，一种方法是：

开始活动：

```
public void callOtherMethod(){
   mainActivity.doStuff();
} 
```

主要活动：

```
public static void doStuff(){
//dosomething.
} 
```

开始活动.xml：

```
android:onClick="callOtherMethod" 
```

你的 doStuff 方法也必须是静态的，除非你可以获得目标方法 Activity 的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:40:15.993

> 我想过类似 android:onClick="mainActivity.doSomething" 但它不起作用。

这很正常，Android*仅*`onClick`在使用该布局文件的当前活动中查找在 xml 布局中声明的方法（无论如何查看其他活动是没有意义的，因为当您调用该方法时，这些活动可能会被破坏）。

 *> 我的问题是，如何在 xml onClick attr 上定义以调用例如位于我的 mainActivity 上的方法？

你应该解释你想要做什么。`Activity` 应该避免从另一个访问方法`Activity`，这不是在 Android 中做事的正确方式。*

# url - 第 N 个谷歌搜索结果的 URL

> ID：14663453
> 
> 赞同：0
> 
> 时间：2013-02-02T15:34:55.650
> 
> 标签：url, search, web

我建立了一个网站，我有一个文本字段，用户可以在其中放置文本以在 Google 上搜索。当用户选择“搜索”时，我想用谷歌搜索的前 5 个结果打开新标签。

Google 是否提供了任何类型的 URL 参数来执行此操作？例如，特定搜索短语的第二个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:01:58.957

我还没有看到任何方法可以做到这一点。

您可以通过将**btnI=1**添加到您的 URL 来仅对第一个结果执行此操作。例如， http: [//google.com/search](http://google.com/search?btnI=1&q=rtf) ?btnI=1&q=rtf会将您带到第一个结果（就像单击“我感觉很幸运！”一样）。

**但**仔细想想，开放 5 个不知名的网站是个坏主意。如果这些站点之一是网络钓鱼站点怎么办。或者它有一些将在用户机器上运行的恶意软件？

当我查看谷歌的结果时，我只点击“有信誉的”网站。我觉得你的想法有点冒险。我可能永远不会使用这样的服务。

# mysql - 选择出现最大值的 id 和 value

> ID：14663460
> 
> 赞同：1
> 
> 时间：2013-02-02T15:35:48.193
> 
> 标签：mysql, select, max

我已经解决了一个问题并遇到了另一个问题。基本上我想选择 question_id、答案和最大出现次数。我从收集问题和答案的基本表运行我的查询（问题 id 代表问题，答案代表从 0 到 5 的答案，对应于其他表，但没关系）。

```
**survey_result**
question_id
answer (int from 0 to 5) 
```

样本调查结果：

```
question_id answer
1           3
1           5
1           2
2           2
2           0
2           4 
```

这是查询，其目的是检查每个问题，哪个答案（从 0 到 5）出现次数最多。

```
select question_id, answer, max(occurence_number) FROM
(select question_id, answer, count(*) as occurence_number
from survey_result
group by question_id, answer
order by question_id asc, occurence_number desc) as results
GROUP BY question_id 
```

所以一个**子查询**会产生这样的结果：

```
question_id answer occurence_number
1           0      12
1           1      20
1           2      34
1           3      5
1           4      9
1           5      15 
```

但主要查询结果是这样的：

```
question_id answer occurence_number
1           0      12
2           0      20
3           0      34
4           0      5 
```

所以问题是它总是显示答案 0，我想得到正确的答案号码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:07:23.190

遗憾的是，由于 MySQL 缺少`WITH`声明，这有点多余，但这应该可以满足您的需求。如果出现平局，它将返回更高的答案。

```
SELECT s1.question_id, MAX(s1.answer) answer, MAX(s1.c) occurrences
FROM
   (SELECT question_id, answer, COUNT(*) c 
    FROM survey_result GROUP BY question_id,answer) s1
LEFT JOIN
   (SELECT question_id, answer, COUNT(*) c
    FROM survey_result GROUP BY question_id,answer) s2
  ON s1.question_id=s2.question_id
 AND s1.c < s2.c
WHERE s2.c IS NULL
GROUP BY question_id 
```

[一个可以玩的 SQLfiddle](http://sqlfiddle.com/#!2/ddb55/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:59:29.640

我认为你过于复杂了，试试这个：

```
select question_id, answer, count(*) as occurence_number
from survey_result
group by question_id, answer 
```

# javascript - amd 和咖啡脚本

> ID：14663461
> 
> 赞同：2
> 
> 时间：2013-02-02T15:35:50.963
> 
> 标签：javascript, coffeescript, amd

我正在研究 AMD 的`coffeescript`组合`require.js`。

问题是我必须为每个加载的模块返回一个值`require.js`，我就这样做了。但是..coffeescript 帮助我并附加：`(function() {`和`}).call(this);`. 这破坏了我的代码。

`main.js`

```
require.config( {
    paths: {
        'backbone':         'libs/AMDbackbone-0.5.3',
        'underscore':       'libs/underscore-1.2.2',
        'text':             'libs/require/text',
        'jquery':           'libs/jquery-1.7.1',
    },
    baseUrl: '/app'
} );

require(
        ['require', 'backbone', 'jquery', 'underscore' ],
        function( require, Backbone, $, _ ) {
            // framework loaded
            require(
                    ['require', 'app'],
                    function( require, app) {
                        return {};
                    } );
        } ); 
```

`app.js`

```
define( [
    'jquery',
    'underscore',
    'backbone',
    'views/gameview',
], function( $, _, Backbone, GameView, ) {
    "use strict";

    window.app = {};

    $(function(){

        var app = window.app = _.extend({

            views: {
                GameView: new GameView
            },
            //code..
        }, window.app);

    //code...
    return window.app;
} ); 
```

**还有咖啡稿：**

`/views/gameview.coffee`

```
define ["jquery", "underscore", "backbone"], ($, _, Backbone, RankView) ->
  "use strict"
  GameView = Backbone.View.extend()
  GameView 
```

翻译为：

`/views/gameview.js`

```
(function() {

  define(["jquery", "underscore", "backbone"], function($, _, Backbone) {
    "use strict";

    var GameView;
    GameView = Backbone.View.extend({...});
    return GameView;
  });

}).call(this); 
```

但我想翻译成：

```
 define(["jquery", "underscore", "backbone"], function($, _, Backbone) {
    "use strict";

    var GameView;
    GameView = Backbone.View.extend({...});
    return GameView;
  }); 
```

在控制台中使用它会很好：`var GameView = new app.views.GameView;`在控制台中。

我如何强制coffeescript编译器不这样做？有没有旗帜或其他东西？

再次：我只是想切断`(function() {`-`}).call(this);`它背后的 amd 代码并不重要，无论它是否是全球性的......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:05:32.820

您可以`--bare`在编译咖啡文件时使用该标志：

> `-b`,`--bare` 在没有顶级函数安全包装器的情况下编译 JavaScript。

# file - 在文本文件中搜索用户给定的字符串

> ID：14663472
> 
> 赞同：1
> 
> 时间：2013-02-02T15:37:32.797
> 
> 标签：file, text, python-3.x, full-text-search

我编写了一个工作游戏，它给用户一个由 7 个字母组成的随机字符串，用户必须只使用这些字母来组合单词和非单词，每个字母只使用一次。这已经接近完美，偶尔会出现错误。

我的主要问题是，在尝试确定字符串的点值时，我会考虑三个因素：长度、每个字母的值（基于 Scrabble 值）以及它是否是一个真实的单词。[我下载了在这里](http://www.zyzzyva.net/wordlists.shtml)找到的字典。该文件在我的 Ubuntu 计算机上保存为`.txt`文件，我使用了几种不同的方法来搜索文件的输入（因为文件中的所有单词都是大写字母，所以我将变量 'capital' 设置`input.upper().`为添加的点取`(length+lettervalues) * realword`. 如果`realword == 2`, 分数加倍

```
dictionary = open('wordlist.txt', 'r')
for line in dictionary:
    if capitals in line:
        realword = 2
    else:
        realword = 1
dictionary.close() 
```

我还尝试了[stackoverflow](https://stackoverflow.com/questions/4785244/how-would-i-search-a-text-file-in-python)的解决方案。这也没有给我任何可行的解决方案。每次尝试时，它都不会崩溃或出现任何错误——它只是每次都转到 else 语句。如果这个问题得到解决，我将非常感激。这两天我一直在敲键盘。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:11:05.080

您不需要 else 语句。只有在字典中找到并中断时，才将 realword 初始化为 1 并更改为 2。此外，大多数字典在同一行上都有单词和含义，因此请尝试将其拆分，即选择空格键之前的第一个单词。

```
capitals= input('enter word').upper()

realword = 1
dictionary = open('wordlist.txt', 'r')
for line in dictionary:
    if capitals == line.split()[0]:
        realword = 2
        break

print (realword)
dictionary.close() 
```

# vb.net - VB.NET | 如何获得 Windows 窗体工作区，而不是桌面工作区

> ID：14663473
> 
> 赞同：0
> 
> 时间：2013-02-02T15:37:33.530
> 
> 标签：vb.net, winforms, opacity, bounds

我想要淡化面板控件和其中的控件/对象的效果。我发现一些具有 opacity 属性的容器只会改变背景颜色的不透明度。

所以我想出了自己的解决方案。我创建了另一个包含我需要的控件的表单，我得到了我想要的，但是我在定位创建的新表单时遇到了一些问题。我不知道如何获取其父窗体的工作区来设置初始位置。我对工作区的意思是，它不包括控制框/标题栏。不同的操作系统有不同的标题栏大小（据我所知）所以我需要正确调整它

Form2，持有不透明控件的那个

```
Public Class Form2

    Private Const dif As Integer = 23

    Private Const GWL_EXSTYLE As Integer = (-20)
    Private Const WS_EX_TRANSPARENT As Integer = &H20

    Private Declare Function SetWindowLong Lib "user32" Alias "SetWindowLongA" (ByVal hwnd As IntPtr, ByVal nIndex As Integer, ByVal dwNewLong As Integer) As Integer
    Private Declare Function GetWindowLong Lib "user32" Alias "GetWindowLongA" (ByVal hwnd As IntPtr, ByVal nIndex As Integer) As Integer

    Public Sub resizeFrom(ByVal parent As Form)
        Me.Height = parent.Height - dif
        Me.Width = parent.Width
        Me.Top = (parent.Top + ((parent.Height - Me.Height) / 2) + (dif / 2))
        Me.Left = parent.Left + ((parent.Width - Me.Width) / 2)
    End Sub

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.TopMost = True
    Me.FormBorderStyle = Windows.Forms.FormBorderStyle.None
    Me.BackColor = Color.Red

    SetWindowLong(Me.Handle, GWL_EXSTYLE, GetWindowLong(Me.Handle, GWL_EXSTYLE) Or WS_EX_TRANSPARENT)
    End Sub
End Class 
```

父/主窗体

```
 Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Show()
        Form2.Show()
        Form2.resizeFrom(Me)
    End Sub

    Private Sub Form1_Move(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Move
        Form2.resizeFrom(Me)
    End Sub

    Private Sub Form1_Resize(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Resize
        Form1_Move(Me, New EventArgs)
    End Sub

    Private Sub HScrollBar1_Scroll(ByVal sender As System.Object, ByVal e As System.Windows.Forms.ScrollEventArgs) Handles HScrollBar1.Scroll
        Form2.Opacity = HScrollBar1.Value / 100
        Me.Text = "Opacity: " & HScrollBar1.Value & "%"
    End Sub
End Class 
```

它应该看起来像这样 [http://i48.tinypic.com/25qubk0.jpg](http://i48.tinypic.com/25qubk0.jpg)

不透明表单用于显示目的，它被设置为“Ghost Like Form”或“Click-through Form”

有什么解决方案可以让我获得表格的正确工作区吗？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:49:48.210

你需要的是绝对位置`ClientRectangle`。这个位置是，`(0, 0)`但您可以神奇地将其转换为屏幕值：

```
Form2.Location = PointToScreen(Me.ClientRectangle.Location)
Form2.Size = Me.ClientRectangle.Size 
```

# sql - 在包含或自由文本中将数据库列作为参数传递

> ID：14663475
> 
> 赞同：0
> 
> 时间：2013-02-02T15:37:38.010
> 
> 标签：sql, sql-server-2008, contains, freetext

我正在尝试将可搜索列作为参数传递给存储过程，但它永远不会起作用

```
contains(@RTitleColumn, @searchTerm) 
```

我将@RtitleColumn 作为第一个 CONTAINS 参数传递

这是完整的查询

```
SELECT  Lid As ItemID, Lhits As Hits, LImageID As ImageID, LNAME As Title
            , LCategory AS CategoryID, Lactive AS isActive,LRate AS SumRate,LRAteNo AS CommentCount,
            ROW_NUMBER() OVER (ORDER BY LID desc) AS RowRank
            FROM    dbo.tblRecipes
            where
            contains(@RTitleColumn, @searchTerm) and (@Activeflag is null or LActive=@Activeflag) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-29T05:13:25.217

（假设参数@`searchTerm`被声明为`nvarchar(50)`

```
Declare @MainSQL nvarchar(200)

set @MainSQL =  

    N'SELECT Lid As ItemID, Lhits As Hits,LImageID As ImageID, 
       LNAME As Title, LCategory AS CategoryID, Lactive AS isActive, 
       LRate AS SumRate,LRAteNo AS CommentCount, 
       ROW_NUMBER() OVER (ORDER BY LID desc) AS RowRank 
       FROM    dbo.tblRecipes 
       where                                  
       contains(' + @RTitleColumn + ', @searchTerm)'

Execute sp_executesql, @MainSQL, N'@searchTerm nvarchar(50)',@searchTerm = @searchTerm 
```

# node.js - 尝试按 id 获取文档时出现 mongo-db 错误

> ID：14663487
> 
> 赞同：1
> 
> 时间：2013-02-02T15:38:51.050
> 
> 标签：node.js, mongodb

我有这个 mongo-db.js 文件：

```
var MongoClient = require('mongodb').MongoClient,
    ObjectID = require('mongodb').ObjectID;

exports.MongoDB = function() {
    this.DB_NAME = "myDBNAME";
    this.MongoClient = MongoClient;

    return this;
};

exports.MongoDB.prototype.openDB = function(action) {
    console.log("Open DB");
    var scope = this;
    this.MongoClient.connect(this.generateMongoUrl(), function(err, db) {
        if (!err) {
            console.log("Open DB Success");
            if (action && typeof action === "function") {
                action(db, scope);
            }
        } else {
            console.log("DB Connect Error: " + err);
        }
    });
};

exports.MongoDB.prototype.closeDB = function(db, action) {
    var scope = this;
    return function() {
        console.log("Close DB and apply action with arguments");
        db.close();
        action.apply(this, arguments);
    };
};

exports.MongoDB.prototype.getItemById = function(id, callback) {
    this.openDB(function(db, scope) {
        console.log("Retrieving item: " + id);
        db.collection("items", function(err, collection) {
            if (err) { callback(err); }
            else {
                collection.findOne({ _id: ObjectID.createFromHexString(id) }, scope.closeDB(db, callback));
            }
        });
    });
};

exports.MongoDB.prototype.getAllItems = function(callback) {
    this.openDB(function(db, scope) {
        console.log("Retrieving all items");
        db.collection("items", function(err, collection) {
            if (err) { callback(err); }
            else {
                collection.find({ }).toArray(scope.closeDB(db, callback));
            }
        });
    });
}; 
```

我运行以下命令：

```
var scope = this;
var _items = [];
var counter = 0;

var done = function() {
    console.log("done!");
};

var getItem = function(error, item) {
    if (error) { }
    else {
        console.log("done loading item " + item._id);
        _items.push(item);
        if (_items.length === counter) {
            done();
        }
    }
};

this.db.getAllItems(function(error, items) {
    if (error) { }
    else {
        for (var i = 0; i < items.length; i++) {
            var id = items[i]._id;
            if (id) {
                counter++;
                console.log("load item " + id);
                scope.db.getItemById(id, getItem);
            }
        }
    }
}); 
```

运行此代码时，我得到：

```
Open DB
Open DB Success
Retrieving all items
Close DB and apply action with arguments
load item 50fb26263d47b70000000001
Open DB
load item 50fb277f172a5d0000000001
Open DB
load item 50fb2aa7865d870000000001
Open DB
load item 5102b7ddfe581ce5c7000001
Open DB
load item 5109678839aefde9fe000001
Open DB
load item 51096a91d0b50572ff000001
Open DB
load item 51096b06405d398bff000001
Open DB
load item null
Open DB
load item 51098b6b58bc1d0000000001
Open DB
load item 51098e16fb0e710000000001
Open DB
load item 51098e31a725100000000001
Open DB
load item 510991f20bc7690000000001
Open DB
load item 51099261258c710000000001
Open DB
load item 5109928b7edf7a0000000001
Open DB
load item 510992f0c73ccc0000000001
Open DB
load item 51099336e8a0090000000001
Open DB
load item 5109938d5fc9ce0000000001
Open DB
load item 510993cc8159610000000001
Open DB
load item 51099530ab74fb0000000001
Open DB
load item 5109956e8b059e0000000001
Open DB
load item 510995965f38da0000000001
Open DB
load item 510995ca14c0610000000001
Open DB
load item 5109963f2acd750000000001
Open DB
load item 5109966fc7001b0000000001
Open DB
Open DB Success
Retrieving item: 5109928b7edf7a0000000001

/myproj/node_modules/mongodb/lib/mongodb/connection/server.js:481
        throw err;
              ^
Error: Argument passed in must be a single String of 12 bytes or a string of 24 hex characters
    at Function.createFromHexString (/myproj/node_modules/mongodb/node_modules/bson/lib/bson/objectid.js:212:11)
    at exports.MongoDB.getItemById (/myproj/js/mongo-db.js:95:52)
    at Db.collection (/myproj/node_modules/mongodb/lib/mongodb/db.js:496:44)
    at exports.MongoDB.getItemById (/myproj/js/mongo-db.js:92:12)
    at exports.MongoDB.openDB (/myproj/js/mongo-db.js:72:17)
    at MongoClient.connect (/myproj/node_modules/mongodb/lib/mongodb/mongo_client.js:112:5)
    at _finishConnecting (/myproj/node_modules/mongodb/lib/mongodb/db.js:2126:7)
    at Db.open (/myproj/node_modules/mongodb/lib/mongodb/db.js:249:14)
    at Server.connect.connectCallback (/myproj/node_modules/mongodb/lib/mongodb/connection/server.js:277:7)
    at g (events.js:192:14) 
```

当我放`console.log(typeof id);`之前`Object.createFromHexString(...)`，我得到对象。
尝试通过这样做来更改 id`id=id+"";`犯了同样的错误。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:17:41.190

使用 MongoClient 时，返回的文档包含 BSON ObjectID 值而不是字符串。使用本机 MongoClient 的 BSON ObjectId 具有如下结构：

```
_id = {
    id : "{12 bytes of binary data}",
    _bsontype : "ObjectID"
} 
```

所以，如果你尝试在 createFromHexString 方法上运行它，它会崩溃，因为它已经是一个 BSON ObjectID。

这是一个简单的示例，展示了如何不需要从最初返回的 Id 进行转换。

```
var
    mongodb = require('mongodb'),
    MongoClient = mongodb.MongoClient;

MongoClient.connect("mongodb://localhost:27017/default?w=1", function (err, db) {
    db.collection("research").find({}, {'_id' : 1}).toArray(function(err, results) {
        results.forEach(function(doc) {
            console.log(doc._id + " type " + typeof doc._id);
            // now async get all docs            
            db.collection("research").findOne({'_id': doc._id}, function(err, doc) {
                console.log("# " + doc._id);
                console.log(doc);
            });
        });

    });
}); 
```

# iphone - 如何使用 StackMob 作为后端获取 sm_owner 用户对象

> ID：14663490
> 
> 赞同：0
> 
> 时间：2013-02-02T15:39:28.193
> 
> 标签：iphone, ios, core-data, stackmob

我发现 User 有一个 sm_owner 字段。但是如何让用户使用 sm_owner。我的代码是这样的：

```
 [self.client getLoggedInUserOnSuccess:^(NSDictionary *result) {
        NSString *currentLogginedUser = [result valueForKey:@"sm_owner"];
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"User" inManagedObjectContext:self.managedOjbectContext];
        [request setEntity:entity];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"sm_owner like user/%@", currentLogginedUser];
        [request setPredicate:predicate];
        self.user = [[self.managedOjbectContext executeFetchRequest:request error:nil] objectAtIndex:0];
    } onFailure:^(NSError *error) {

    }]; 
```

并且崩溃消息是：原因：'未实现的 SQL 生成谓词（sm_owner LIKE user / "user/test"）'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:37:46.477

我是 StackMob 的平台布道者。

getLoggedInUserOnSuccess 方法的结果通常包含主键“用户名”。所以下面的代码应该可以工作。

```
[self.client  getLoggedInUserOnSuccess:^(NSDictionary *result) {                
    NSString *currentLogginedUser = [result objectForKey:@"username"];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"User" inManagedObjectContext:self.managedOjbectContext];
    [request setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"username == %@", currentLogginedUser];
    [request setPredicate:predicate];
    self.user = [[self.managedOjbectContext executeFetchRequest:request error:nil] objectAtIndex:0];
} onFailure:^(NSError *error) {

}]; 
```

或者，如果您宁愿从 NSDictionary 结果中获取 sm_owner 。我会做以下事情。

```
NSString *sm_owner = [result valueForKey:@"sm_owner"];

NSArray *myArray = [sm_owner componentsSeparatedByString:@"/"];
NSString *currentLogginedUser = [myArray objectAtIndex:1]; 
```

然后执行您的提取。

# javascript - onchange 无需点击其他位置

> ID：14663493
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:40:09.597
> 
> 标签：javascript, jquery

我在输入元素上使用了 onchange，但事件处理函数在字段失去焦点之前不会运行。

我希望 onchange 中的函数实时运行。Onkeyup 似乎不是一个解决方案，因为它会在按下任何键时触发该功能，即使它不会更改字段内容（例如，`SHIFT`和`CTRL`）。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:16:00.883

尝试使用事件 onpropertychange (IE) 或 DOMAttrModified (FF, Opera)。或者还有所有现代浏览器都支持的 oninput 事件。

# iphone - 从 UILocalNotification 显示 AlertView 对话框

> ID：14663495
> 
> 赞同：0
> 
> 时间：2013-02-02T15:40:13.350
> 
> 标签：iphone, objective-c

在我的应用程序中，当覆盖一定距离时应该会发出警报。本来，当条件满足的时候，我想把app移到前台，显示一个AlertView并播放声音。由于对我以前的帖子的回答，我已经实现了 UILOcaLnotifications，它可以很好地播放 AlertSound。即使我的应用程序在后台，那也很棒。目前还有一个问题没有解决。我真的很想在满足条件时弹出一个对话框（AlertView）。

此时 ALert 消息显示在屏幕顶部（如收到的消息或未接来电），但我想向用户显示一个对话框（如在时钟应用程序中）

有谁知道这个问题的解决方案？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:53:19.190

您是否尝试分配 alertBody 和 alertAction？

```
notification.alertBody = @"Some message";
notification.alertAction = @"View"; //title of action button
notification.hasAction = YES; //it YES by default 
```

# javascript - 如何在外部文件中创建一个js原型类

> ID：14663497
> 
> 赞同：0
> 
> 时间：2013-02-02T15:40:19.430
> 
> 标签：javascript

我用原型创建了一个外部 .js 文件：

```
function Logger() {
    var log = new Array("");
}

Logger.prototype.AddLine = function (value) {
    if (value) {
        Logger.log.push("\t" + value);
    }
}

Logger.prototype.ReadLog = function () {
    return this.log.join("");
} 
```

现在我尝试在我的页面上使用它。我在标题中包含了我的文件。我有简单的js：

```
$(document).ready(function () {

        var log = new Logger();
        log.AddLine("User entered the page");
}); 
```

Firebug 错误：TypeError: Logger.log is undefined [Break On This Error]
Logger.log.push("\t" + value);

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:47:53.220

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:44:13.473

要将实例设置`log`为`Logger`空数组，请使用`this.log = []`，而不是`var log`。后者创建一个私有变量，您无法在函数外部访问该变量。

另外，`Logger.log`意味着：访问函数的`log`属性。`Logger`在这里你想要实例，所以使用`this.log`（就像你在 中所做的那样`ReadLog`）。

# c# - 通过发布-订阅模式可取消的事件

> ID：14663502
> 
> 赞同：2
> 
> 时间：2013-02-02T15:40:50.263
> 
> 标签：c#, publish-subscribe

由于无论我如何措辞都没有搜索结果，我很确定我在想这个错误。

我有一个程序将创建大量对象，并且应该连接许多事件以侦听所有其他实例，尤其是在创建实例后。通过纯粹的事件来管理这个对我来说没有意义。这就是我使用 pub/sub 模式让事情更容易处理的想法。此外，该计划是让发布/订阅完全在进程中，因此事件不会跨越任何边界。此外，事件不会在内存之外的任何地方持续存在，因此不会播放事件。

问题来自通常是[CancelEventArgs](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.aspx)的事件。**有没有办法发布订阅者可以标记为已取消的事件？**

这是我目前对可能解决方案的想法：

*   发布一个`ShouldCancelEventX`事件并等待一段时间`EventXCancelled`才能发布回一个事件。如果在时间跨度内没有发布，则发布`EventX`事件。我看到的最大问题是等待事件的任意时间跨度。

*   让 pub/sub 实现有更多的逻辑，以便在所有订阅者都收到事件后通知发布者。这将允许发布者`ShouldCancelEventX`知道所有订阅者何时收到消息。这只是感觉不对，因为我见过的每个 pub/sub 实现都提供了`void`Publish 方法。因此，这再次让我相信我正在以错误的方式思考这个问题。

# django - 尝试使用工头在本地测试 django 应用程序

> ID：14663504
> 
> 赞同：3
> 
> 时间：2013-02-02T15:41:06.693
> 
> 标签：django, heroku, terminal, gunicorn, foreman

我正在开发一个 django 应用程序，并尝试在推送到 heroku 之前使用工头在本地测试我的应用程序。我可以使用 python manage.py 服务器成功运行它。但是，当使用 forman 运行它时，它会失败 - 每当我`foreman start`在目录内部执行操作时，它都会返回给我：

```
09:21:09 web.1  | started with pid 9956
09:21:09 web.1  | /usr/local/foreman/bin/foreman-runner: line 41: exec: gunicorn: not found
09:21:09 web.1  | exited with code 127
09:21:09 system | sending SIGTERM to all processes
SIGTERM received 
```

这是什么意思？

下面是我的Procfile：

```
web: gunicorn myapp.wsgi 
```

下面是我的requirements.txt

```
Django==1.4.3
distribute==0.6.31
dj-database-url==0.2.1
psycopg2==2.4.6
#wsgiref==0.1.2
gunicorn==0.16.1 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T01:47:34.777

看起来 gunicorn 没有正确安装在您的系统上。运行 pip install -r requirements.txt 然后手动运行 gunicorn 命令以检查它是否有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-08T21:28:50.633

我遇到了这个问题，在运行“工头启动”时发现 gunicorn 时遇到了同样的问题，但最终在其他来源中发现我没有在新的 bash 会话中重新创建 virtualenv。我最初是按照[Heroku](https://devcenter.heroku.com/articles/django#start-a-django-app-inside-a-virtualenv)的说明进行操作的，但是几天后有了新的会话，我需要记住运行

```
source venv/bin/activate 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T21:28:43.187

有问题 - 单独安装**gunicorn**就可以了

`pip install gunicorn`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T16:35:53.767

我遇到过同样的问题：

```
sudo apt-get install libpq-dev python-dev 
```

然后重新安装 heroku-toolbelt 解决了它！

# javascript - HTML 特殊字符在 js 中无法正确显示

> ID：14663507
> 
> 赞同：2
> 
> 时间：2013-02-02T15:41:23.227
> 
> 标签：javascript, html, special-characters, alert

我正在为法国客户端使用 PHP、Smarty 开发 Web 应用程序。我在 java 脚本警报和确认框中遇到问题。如何在 javascript 消息框中使用 HTML 特殊字符。这是我的代码

```
<script type="text/javascript">
    function delConfirm(key){

        if(confirm('&Ecirc;tes vous certain de vouloir supprimer ce client ?')){
            window.location = "deleteClient.php?e="+key;
        }

    }
</script> 
```

这是页面第一部分的页面源。请也看一下编码部分，

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Sunil"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:43:40.087

这是正确的，因为`confirm`不接受 HTML。不过，您可以在 JavaScript 中使用 unicode 转义序列。[您可以在此处](http://unicode.org/)查找 Unicode 代码点值。相当于`&Ecirc;`是`U+00CA`（它在[这个图表上](http://www.unicode.org/charts/PDF/U0080.pdf)），所以：

```
if(confirm('\u00CAtes vous certain de vouloir supprimer ce client ?')){
    window.location = "deleteClient.php?e="+key;
} 
```

或者，确保您的文件正确编码（例如 UTF-8），您的编辑器理解以这种方式编码的文件，并且文件正确提供（服务器告诉浏览器它是 UTF-8），甚至可能抛出在标题中的[`meta charset="xxx"`标签](http://www.w3.org/TR/html5/document-metadata.html#attr-meta-charset)中运气好，您可以直接在文件中键入法语字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:44:28.470

改用这个

```
<script type="text/javascript">
    function delConfirm(key){

        if(confirm('\u00CAtes vous certain de vouloir supprimer ce client ?')){
            window.location = "deleteClient.php?e="+key;
        }

    }
</script> 
```

# java - 如何在肥皂网络服务中管理身份验证

> ID：14663514
> 
> 赞同：0
> 
> 时间：2013-02-02T15:42:29.857
> 
> 标签：java, web-services, authentication

我第一次使用 Axis2 在 Tomcat 上开发 Soap Web 服务。我需要的是管理身份验证。因此，用户在调用 rpc 之前必须先登录。现在我正在做的是将 passFrase 存储到数据库中，以便在用户登录时回馈用户，所以我检查它是否存在，如果是，则允许调用 rpc。问题是这种方式效率太低了。

有没有办法更轻松、更有效地处理用户身份验证？也许一些图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:00:23.770

您可以使用以下三种方法之一：

1.  使用传输级别身份验证，例如 BASIC 或 DIGEST AUTH，（请在此处使用 HTTPS）。
2.  使用带有用户名令牌的 WS-Security（最好是 WS-Policy）。
3.  在应用层处理它（你现在在做什么）。

根据您的需求/口味，选择上述最能满足您需求的一种。

我应该警告您，从今天开始，（2）对于当前稳定版本的 Axis2 和 Rampart（1.6.2）是不可能的，您必须使用早期版本（1.5.x），我[在这里](https://stackoverflow.com/questions/13817145/axis2-user-authentication)解释了原因。

# c# - 在 Windows 上更改任务栏按钮颜色

> ID：14663515
> 
> 赞同：1
> 
> 时间：2013-02-02T15:42:47.520
> 
> 标签：c#, c++, windows, delphi, winapi

同一应用程序的多个实例同时运行，并且由于每个实例都有多个窗口，因此用户在它们之间导航并不容易。我通过将不同应用程序实例的**标题栏颜色**设置为不同的值来帮助用户。例如，第一个启动的应用程序实例的所有窗口都有红色标题栏，第二个实例的所有窗口都有绿色标题栏，等等。

**将应用程序实例的任务栏按钮颜色**设置为我用于标题栏的颜色也会很有用。这可能吗？如果不是，那么我会对具有类似差异化效果的解决方案感到满意，例如设置任务栏按钮上的文本颜色、为其添加覆盖图标等。

该解决方案应该适用于 Windows XP 和更高版本的 Windows。语言可以是 C/C++、C# 或 Delphi。非常感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T16:45:39.150

您不能希望实现不同颜色的任务栏按钮。

您可以安装自己的 shell 并完全控制任务栏，但您不能指望您的客户这样做。

您不能期望在 Windows 任务栏的顶部进行绘制。任务栏是动画的。你将如何跟上它？你怎么知道按钮在哪里？我不相信有一个公共 API 会告诉你这一点。我认为你必须排除这个想法。

有一个 API 允许您更改任务栏按钮的颜色。它是 Windows 7 中添加的任务栏进度 API。您可以使用它使任务栏按钮变为黄色、绿色或红色。我个人不建议这样做，因为用户会认为您正在显示进度。

您可以使用的主要选项是更改窗口标题，以及任务栏按钮中显示的文本。或更改图标。

# sql - SQL INSERT INTO 避免特定字段的重复

> ID：14663518
> 
> 赞同：0
> 
> 时间：2013-02-02T15:43:02.320
> 
> 标签：sql, sql-server, insert

我目前有一个 SQL insert into 语句，它将项目从一个相同的表复制到另一个表。

源表有许多相同的记录或可能有小的变化的记录。

例子...

源表和目标表的格式为：

```
ItemDATE // ItemTIME // SITENAME // SERIAL_NO // RPM // Power // Voltage1 // Voltage2 // etc 
```

来源可能包含：

```
ItemDATE // ItemTIME // SITENAME // SERIAL_NO // RPM // Power // Voltage1 // Voltage2 // etc

2013-01-01 00:00:00.000 // 17:00:00.1 // Oxford College // 0014617 // 1500 // 250 // 250.8 // 249.2
2013-01-01 00:00:00.000 // 17:00:00.1 // Oxford College // 0014617 // 1499// 249 // 253.5 // 240.6
2013-01-01 00:00:00.000 // 17:00:00.1 // Oxford College // 0014617 // 1502// 251 // 239.8 // 269.8 
```

我的插入语句是：

```
INSERT INTO ReportingSystem.dbo.HistoryLog(ItemDATE, ItemTIME, SITENAME, SERIAL_NO, RPM, Power, Voltage1, Voltage2)
SELECT ItemDATE, ItemTIME, SITENAME, SERIAL_SN, RPM, Power, Voltage1, Voltage2      
FROM ReportingSystem.dbo.RTCU

EXCEPT
SELECT ItemDATE, ItemTIME, SITENAME, SERIAL_SN, RPM, Power, Voltage1, Voltage2
FROM ReportingSystem.dbo.HistoryLog 
```

其中 HistoryLog 是目标，RTCU 是源。

我不关心 RPM、Power、Voltage1 和 Voltage2 字段中的不同值，但应该没有 itemDATE、ItemTIME、SITENAME 和 SERIAL_NO 相同的记录。

但是对于例外声明，我仍然会被重复，因为它考虑了整个记录。

我尝试了以下但没有成功：

```
INSERT INTO HistoryLog
(ItemDATE, ItemTIME, SITENAME, SERIAL_NO, RPM, Power, Voltage1, Voltage2)

SELECT ItemDATE, ItemTIME, SITENAME, SERIAL_NO, RPM, Power, Voltage1, Voltage2
FROM RTCU
WHERE not exists (select * from HistoryLog
WHERE HistoryLog.ItemDATE = rtcu.ItemDATE
and HistoryLog.ItemTIME = rtcu.ItemTIME
and HistoryLog.SITENAME = rtcu.SITENAME 
and HistoryLog.SERIAL_NO= rtcu.SERIAL_NO
); 
```

请帮忙....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:18:11.243

```
INSERT INTO dbo.HistoryLog
(
  ItemDATE, ItemTIME, 
  SITENAME, SERIAL_NO, 
  RPM, Power, Voltage1, Voltage2
)
SELECT 
  ItemDATE, ItemTIME, 
  SITENAME, SERIAL_NO, 
  RPM, Power, Voltage1, Voltage2
FROM 
(
  SELECT 
    ItemDATE, ItemTIME, 
    SITENAME, SERIAL_NO, 
    RPM, Power, Voltage1, Voltage2,
    rn = ROW_NUMBER() OVER 
    (
      PARTITION BY ItemDATE, ItemTIME, 
        SITENAME, SERIAL_NO
      ORDER BY RPM DESC
    )
  FROM dbo.RTCU
) AS RTCU
WHERE rn = 1
AND NOT EXISTS 
(
  SELECT 1 FROM dbo.HistoryLog
    WHERE ItemDATE  = rtcu.ItemDATE
      AND ItemTIME  = rtcu.ItemTIME
      AND SITENAME  = rtcu.SITENAME 
      AND SERIAL_NO = rtcu.SERIAL_NO
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:52:09.823

您的最后一个查询应该可以正常工作。`ItemDATE`或其他 3 接受`NULL`值吗？它们无法与 进行比较`=`，例如

```
(HistoryLog.ItemDATE = rtcu.ItemDATE or HistoryLog.ItemDATE is null and rtcu.ItemDATE is null) 
```

排序规则是否区分大小写？如果是这样，则不会按预期比较具有不同大小写的字符串。用于`COLLATE`指定另一个排序规则，例如：

```
HistoryLog.SITENAME = rtcu.SITENAME COLLATE Cyrillic_General_CI_AS 
```

# python - 外键 Django 模型

> ID：14663523
> 
> 赞同：62
> 
> 时间：2013-02-02T15:43:28.170
> 
> 标签：python, django, django-models

我正在尝试创建 3 个模型；`Person`,`Address`和`Anniversy`. 计划是为每个人设置一个地址和一个纪念日。但是每个地址和纪念日可以有多个人。

到目前为止，我有以下内容，但我认为这些`OneToMany(foreign key)`关系可能是错误的。即每个地址可以有一个人，但每个人可以有多个地址。

```
from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=50)
    birthday = models.DateField()

    def __unicode__(self):
        return u'%s' % (self.name)

class Address(models.Model):
    person = models.ForeignKey(Person)
    address = models.CharField(max_length=150)

    def __unicode__(self):
        return u'%s' % (self.address)

class Anniversy(models.Model):
    person = models.ForeignKey(Person)
    anniversy = models.DateField()

    def __unicode__(self):
        return u'%s' % (self.anniversy) 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-02-02T15:48:07.897

您以相反的方式创建关系；将外键添加到`Person`类型以创建多对一关系：

```
class Person(models.Model):
    name = models.CharField(max_length=50)
    birthday = models.DateField()
    anniversary = models.ForeignKey(
        Anniversary, on_delete=models.CASCADE)
    address = models.ForeignKey(
        Address, on_delete=models.CASCADE)

class Address(models.Model):
    line1 = models.CharField(max_length=150)
    line2 = models.CharField(max_length=150)
    postalcode = models.CharField(max_length=10)
    city = models.CharField(max_length=150)
    country = models.CharField(max_length=150)

class Anniversary(models.Model):
    date = models.DateField() 
```

任何一个人只能连接到*一个*地址和*一个*周年纪念日，但地址和周年纪念日可以从多个`Person`条目中引用。

`Anniversary`并且`Address`对象也将被赋予反向的、反向的关系；默认情况下会调用它，`person_set`但如果需要，您可以配置不同的名称。请参阅查询文档中的[“向后”关系。](https://docs.djangoproject.com/en/stable/topics/db/queries/#backwards-related-objects)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-02-10T10:08:23.303

我建议，`ForeignKey`如果使用基于应用程序的方法来分离逻辑关注点，使用字符串模型引用来进行关系会稍微好一些。

因此，扩展 Martijn Pieters 的答案：

```
class Person(models.Model):
    name = models.CharField(max_length=50)
    birthday = models.DateField()
    anniversary = models.ForeignKey(
        'app_label.Anniversary', on_delete=models.CASCADE)
    address = models.ForeignKey(
        'app_label.Address', on_delete=models.CASCADE)

class Address(models.Model):
    line1 = models.CharField(max_length=150)
    line2 = models.CharField(max_length=150)
    postalcode = models.CharField(max_length=10)
    city = models.CharField(max_length=150)
    country = models.CharField(max_length=150)

class Anniversary(models.Model):
    date = models.DateField() 
```

# css - 如何在不影响我的容器 div 的情况下移动 div？

> ID：14663524
> 
> 赞同：0
> 
> 时间：2013-02-02T15:43:31.740
> 
> 标签：css, html

所以我有一个导航菜单，我漂浮在左边。我想在不影响容器的情况下将其更向右移动。当我使用填充或边距时，它会移动它，当我尝试时

```
 position: absolute; 
```

它只是将容器移动到左侧并将其最小化。

[解决]

感谢所有帮助，对于 html/css 来说还是很新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:47:25.603

你正在寻找

```
position: relative;
left: 100px; /* or however far you want to move it to the right */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:49:44.957

在菜单上

```
position: absolute; 
margin-left: 100px; 
```

# java - Groovy 和 grails jdk 问题

> ID：14663528
> 
> 赞同：13
> 
> 时间：2013-02-02T15:43:42.277
> 
> 标签：java, eclipse, grails, groovy

我希望我能给你们更多关于发生了什么的信息，但我真的不知道。我正在尝试从 springsource 安装 groovy 和 grails 工具套件，但无法将其配置为正常工作。我拥有最新的 JDK，并且首选项显示了它，但我仍然收到警告并且它没有构建。我在下面发布了一些图片以显示发生了什么。

![在此处输入图像描述](../Images/9044914a37df11c08e3fe5baa959edbe.png)

![显示找到并安装的 JDK](../Images/f0864dbf0e783a8b671a4c0d42392d45.png)

![爪哇之家](../Images/04f95c821af40092a07f404ea207f041.png) ![在此处输入图像描述](../Images/16204bdf389e48508c35ad525a4e0152.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-14T02:46:01.737

1.  在您的 GGTS 上转到窗口
2.  选择java
3.  选择已安装的 JRE
4.  添加-> 标准虚拟机
5.  jRE home 选择目录到 C:\Program Files\Java\jdk1.6.0_18
6.  从已安装的 JRE 中选择 jdk1.6.0_18

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T19:42:07.203

我遇到了类似的问题（我确信这是确切的问题） - 以下是确保它正常工作的步骤，我最初很努力，但这让它成功了。

1.  [从http://www.java.com](http://www.java.com)安装 JDK ，在路径中**没有空格**的目录中
2.  将**JAVA_HOME 设置**为您的 JDK 安装
3.  确保 **%JAVA_HOME%\bin;** 在您的**PATH**变量中。
4.  在命令提示符下运行***java -version***，它应该为您提供安装 JDK 的路径
5.  安装 STS Springsource 工具套件。
6.  运行您的 STS 并创建一个新的 grails 项目并运行它。

如果这不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:38:12.920

即使您在工作区中安装了作为编译器之一的 JDK，您也可能正在使用 JRE 启动 Eclipse。要确定您是使用 JRE 还是 JDK 启动，请转到帮助 -> 关于 GGTS -> 安装详细信息 -> 配置

查找该`-vm`选项并确保它是 JDK 而不是 JRE。

# microsoft-metro - mediawiki 的水平滚动皮肤

> ID：14663530
> 
> 赞同：0
> 
> 时间：2013-02-02T15:43:45.243
> 
> 标签：microsoft-metro, mediawiki, skin, mediawiki-templates

我想创建一个基于 wikipedia metro 应用程序的 mediawiki 水平滚动皮肤。

[维基百科地铁github](https://github.com/wikimedia/WikipediaMobile/tree/master/WikipediaMetro/WikipediaMetroTest)

[维基百科地铁的视频](https://www.mediawiki.org/wiki/Mobile/Windows_8_Metro)

该皮肤适用于普通网站，而不是 Metro 应用程序。那么，如何将已经为 mediawiki 平台创建的代码转换为我可以使用的皮肤？我应该从哪里开始。我试图了解 Metro 应用程序并进行转换但我不知道它是如何工作的。你能给出一些指导吗？（我在 linux 电脑上，所以我无法测试应用程序本身）我找不到任何其他用于 mediawiki 的水平滚动皮肤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:32:09.897

Windows 8 应用程序不仅仅是一个皮肤，它还是一个单独的 HTML 页面。它使用 API（特别是 MobileFrontend 扩展[中的`mobileview`模块）。](https://www.mediawiki.org/wiki/Extension%3aMobileFrontend#action.3Dmobileview)它还使用 WinJS（特定于 Windows 8 应用程序的 JS 库）。

我不确定它是否适合成熟的皮肤（如 Vector），但我认为您可以将其用作单独查看 wiki 的基础。您必须做的大部分工作是替换 Windows 8 特定的东西，比如 WinJS。

大多数 HTML 代码似乎都在[`default.html`](https://github.com/wikimedia/WikipediaMobile/blob/master/WikipediaMetro/WikipediaMetroTest/default.html)，而实际运行应用程序的大多数 JavaScript 都在[`default.js`](https://github.com/wikimedia/WikipediaMobile/blob/master/WikipediaMetro/WikipediaMetroTest/js/default.js).

# mysql - 每天合并表记录以创建“上周”页面

> ID：14663534
> 
> 赞同：0
> 
> 时间：2013-02-02T15:44:17.200
> 
> 标签：mysql, date, count

如果之前有人问过这个问题，我深表歉意。我对开发很陌生，虽然我尝试了很多搜索，但我不确定要寻找什么。

无论如何，所以我有一个表格，可以计算每天输入的记录。它看起来像这样（每条记录由一个字母表示）（假设今天的日期是 27/01/2013）：

```
RECORD | COUNT | DATE 
------A-----|-----4-----|27/01/2013  
------B-----|-----7-----|27/01/2013
------B-----|-----3-----|24/01/2013
------C-----|-----8-----|22/01/2013 
------A-----|-----2-----|19/01/2013 
```

在表中检查每个新帖子，如果记录在当天已经存在，则更新计数，否则创建新记录。

对于打印已添加“今天”的记录的页面，我有 MySQL 查询

```
SELECT * FROM `table` ORDER BY `date` DESC, `count` DESC LIMIT 1000 
```

并使用 php 'if' 语句仅打印表中 date('Ymd') = 的记录`date`。所以只打印当天输入的记录和相应的计数。- 上表将产生结果：

```
1\. B 7 
2\. A 4 
```

我想要的是一个打印上周输入的记录的页面。我知道我可以使用`DATE_SUB(now(),INTERVAL 1 WEEK) AND NOW()`, 来打印上周的记录，但我需要复制要合并的记录并将计数加在一起。所以该表的结果如下所示：

```
1\. B 10
2\. C 8 
3\. A 4 
```

我将如何组合这些重复记录并按计数排序记录列表？这是获得“上周”记录数的最佳方法，还是有另一个更好的表结构？

如果这是一个愚蠢的问题或者我的解释冗长，我再次感到抱歉，但只有一些简单的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:03:29.167

使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)将允许您将相关记录组合在一起

```
SELECT `record`
     , SUM(`count`) AS `count`
FROM `table` 
WHERE `date` > `date` - INTERVAL 1 WEEK
GROUP BY `record`
ORDER BY `count` DESC 
LIMIT 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:04:07.760

试试这个

```
SELECT `record`, SUM(`count`) AS `count` 
  FROM `table` 
 WHERE `date` > DATE_SUB(CURDATE(),INTERVAL 1 WEEK)
 GROUP BY `record`
 ORDER BY `count` DESC 
```

`LIMIT 1000`如果需要，您可以对结果集进行分组

# java - Android 编程 - 从 SQLite 数据库表中的特定列中检索 STRING 值并将其传递给 JAVA 中的变量

> ID：14663535
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:44:26.420
> 
> 标签：java, android, database, sqlite, sms

我想知道**如何传递从我的数据库类（即 DBUser.java）的列*号*中检索到的值，并将其分配给另一个类的变量？**. 我在我的 DBUser.java 中尝试过这种方法：

```
public String getNumber() throws SQLException  
{  
    String number;
    Cursor mCursor = db.query(DATABASE_TABLE, new String[] {KEY_NUMBER}, null, null, null, null, null);

    number = mCursor.getString(mCursor.getColumnIndex(KEY_NUMBER)); // KEY_NUMBER ="numbers"
    mCursor.close();

    return number; // I think I'm missing something here???? IDK
} 
```

这是我的主类中的方法，我想传递列*号*的值：

```
public void onACU (View view) {
    String messageToSend = "ACU ON";

    DBUser dbUser = new DBUser(AleccMainActivity.this);  
    dbUser.open();  // I opened the DB
    // recipient is a global variable.
    recipient = dbUser.getNumber();//then I assigned the method in my string var thinking that the value will be passed to it.
    dbUser.close(); // then i close the DB

    SmsManager.getDefault().sendTextMessage(recipient, null, messageToSend, null,null);
} 
```

我的直觉告诉我，我的 db.query 和 return 语句似乎不正确，所以请告诉我如何让它工作。虽然我是 Java 新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:00:47.040

即使光标只有一行，您也必须调用 moveToFirst() 或 moveToNext()。

# android - Android 通过 Bundle 传递 ArrayList

> ID：14663537
> 
> 赞同：1
> 
> 时间：2013-02-02T15:44:29.157
> 
> 标签：android

我昨天在 Java 论坛上发布了这个问题，但在 Android 部分可能更合适：

[添加到 ArrayList 的 Java 对象未显示](https://stackoverflow.com/questions/14656755/java-object-added-to-arraylist-not-showing)

因此，我通过一个包传递了一个 ArrayList，但是每当我获取一个主题的任务 ArrayList 并添加一些更改时，这些更改并未出现在 ArrayList 中。

为了解决这个问题而不是强制转换主题，我在 ArrayList 中传递了索引并从索引中进行了主题分配。

所以主题分配是`subject = subjectsList.get(index);`而不是：

```
Bundle bundle = getIntent().getExtras();
  if (bundle != null) {
    subject = (Subject) bundle.get("selected_subject");
    subjectsList = (ArrayList<Subject>) bundle.get("subjects_list");
   } 
```

我仍在投射 ArrayList，所以我不确定为什么在投射主题时它不起作用。谁能解释一下。我认为这可能与主题与 ArrayList 中的主题不同，但我不确定。

同样，在一个活动中创建并通过捆绑传递给另一个活动的主题和 ArrayList 肯定是指同一个对象吗？

# c++ - 使用在模板化类型名中定义的 typedef

> ID：14663538
> 
> 赞同：0
> 
> 时间：2013-02-02T15:44:36.847
> 
> 标签：c++, templates

是否可以使用由另一个类型**X内部的 typedef 定义的类型****Y**，来自第三个*模板化*类型**Z**，其中**X**充当**Z**的模板参数？

 *******这个（非编译）伪代码说明了所需的行为：

```
struct X {
  typedef float Y;
};

template<typename T>
struct Z {
  void DoSomething(T::Y with_this);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:45:56.437

是的，这是可能的。您只需要让编译器知道这`T::Y`是一种类型，因为它取决于`T`：

```
void DoSomething(typename T::Y with_this); 
```*******

# java - 处置当前jframe时如何设置前一个jframe可见

> ID：14663539
> 
> 赞同：0
> 
> 时间：2013-02-02T15:44:37.200
> 
> 标签：java, swing, jframe, visibility

我正在制作一个 Java gui 项目，它由两个框架组成。

问题是，当我从第一帧调用第二帧时，我已将其设置为第一帧可见性设置为 false。问题是如何使用第二帧中的按钮使第一帧再次可见。

我应该放弃这种方法并创建一个新的 jpanel 吗？？？jpanel 是否具有与 jframe 类似的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:47:15.447

考虑使用`CardLayout`. 通过这种方式，您可以通过多个 UI 进行切换，而无需其他框架。[以下是如何使用它。](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

**编辑：**正如纪尧姆在他的评论中发布的那样，安德鲁的[这个](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)答案也涵盖了如何使用布局。

**Edit2：**
当你要求更多关于我最新帖子的信息时，这样的类可能看起来像这样：

```
import javax.swing.JFrame;

public abstract class MyFrameManager {
    static private JFrame   startFrame,
                        anotherFrame,
                        justAnotherFrame;

static public synchronized JFrame getStartFrame()
{
    if(startFrame == null)
    {
        //frame isnt initialized, lets do it
        startFrame = new JFrame();
        startFrame.setSize(42, 42);
        //...
    }

    return startFrame;
}

static public synchronized JFrame getAnotherFrame()
{
    if(anotherFrame == null)
    {
        //same as above, init it
    }

    return anotherFrame;
}

static public synchronized JFrame getJustAnotherFrame()
{
    //same again
    return justAnotherFrame;
}

public static void main(String[] args) {
    //let's test!

    JFrame start = MyFrameManager.getStartFrame();
        start.setVisible(true);

    //want another window
    JFrame another = MyFrameManager.getAnotherFrame();
        another.setVisible(true);

    //oh, doenst want start anymore
    start.setVisible(false);
}
} 
```

这样你只会实例化`JFrame`一次，但你总是可以通过你的经理类访问它们。在那之后你对他们做什么是你的决定。
我也只是让它成为线程安全的，这对于单例来说是至关重要的。

# arduino - Arduino 的内存限制

> ID：14663543
> 
> 赞同：11
> 
> 时间：2013-02-02T15:45:08.103
> 
> 标签：arduino

我最近买了一个[Arduino Uno](http://en.wikipedia.org/wiki/Arduino#ArduinoUno)，现在我正在用它做一些试验。我有几个 18B20 传感器和一个 ENC28J60 网络模块连接到它，然后我正在制作一个草图，允许我从浏览器连接到它，并以简单的网页或[JSON](http://en.wikipedia.org/wiki/JSON)的形式读出温度。制作网页的代码如下所示：

```
client.print("Inne: ");
client.print(tempin);
client.println("<br />");
client.print("Ute: ");
client.print(tempout);
client.print("<br /><br />");
client.println(millis()/1000);
//    client.print("<a href=\"/json\">j</a>"); 
```

奇怪的是：如果我取消注释最后一行，草图编译正常，上传正常，但我无法连接到板。如果我在其他一些打印输出中添加更多字符，也会发生同样的事情。因此，在我看来，好像我遇到了某种内存限制（草图的总大小约为 15 KB，并且代码中的其他地方还使用了一些其他字符串 - 是的，我知道，我会重写它使用数组来存储临时文件，我刚刚从示例中窃取了一些代码）。

我可以使用多少内存在 Arduino 中存储字符串是否有任何限制，有没有办法解决这个问题？（在带有 GCC-AVR 4.3.5 和[AVR Libc](http://www.nongnu.org/avr-libc/) 1.6.8的[Debian](http://en.wikipedia.org/wiki/Debian) PC上使用[GUI](http://en.wikipedia.org/wiki/Graphical_user_interface) v 1.0.1 ）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T17:52:06.713

RAM 相当小，因为 UNO 的 328 只有 2K。您可能只是用完了 RAM。我了解到，当它用完时，它只是坐在那里。

我建议从这个库中阅读[自述](https://github.com/mpflaga/Arduino-MemoryFree)文件以获取 FreeRAM。它提到了“.print”如何同时消耗 RAM 和 ROM。

我现在总是使用（对于 Arduino IDE 1.0.+）

```
Serial.print(F("HELLO")); 
```

相对

```
Serial.print("HELLO"); 
```

因为它节省了 RAM，这对于 lcd.print 应该是正确的。我总是放一个

```
Serial.println(freeMemory(), DEC);  // print how much RAM is available. 
```

在代码的开头，并注意。注意需要有空间来运行实际代码并重新诅咒到它的子例程中。

对于 1.0.0 之前的 IDE，该库提供 getPSTR())。

IDE 1.0.3 现在开始在编译结束时显示预期的 RAM 使用情况。但是，我发现它通常很短，因为它只是一个估计值。

* * *

我还建议您查看[Webduino](https://github.com/sirleech/Webduino)，因为它有一个支持 JSON 的库。它的例子很快就能上手。但是它不直接支持 ENC28J60。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-17T08:38:01.820

我使用以下代码来获得可用的 RAM

```
int getFreeRam()
{
  extern int __heap_start, *__brkval; 
  int v;

  v = (int) &v - (__brkval == 0 ? (int) &__heap_start : (int) __brkval);

  Serial.print("Free RAM = ");
  Serial.println(v, DEC);

  return v;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T13:58:14.330

[您可以使用一个名为memoryFree](https://github.com/maniacbug/MemoryFree)的小库检查内存使用情况。

当剩余内存时，您可能会推动串行缓冲区限制而不是内存限制。如果是这样，你可以`SERIAL_BUFFER_SIZE`增加`HardwareSerial.cpp`

（`C:\Program Files (x86)\Arduino\hardware\arduino\cores\arduino`在 Windows 机器上）

不过要小心，ram 和串行缓冲区都存储在 SRAM 上。增加串行缓冲区将导致变量的可用内存减少。

为了在 arduino 上玩 JSON，有一个非常好的库，称为[aJson](https://github.com/interactive-matter/aJson)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T08:08:57.553

添加此函数并在设置和循环中不时调用它，以确保 RAM 没有被用完。

```
// Private function: from http://arduino.cc/playground/Code/AvailableMemory  
int freeRam () {
  extern int __heap_start, *__brkval; 
  int v; 
  return (int) &v - (__brkval == 0 ? (int) &__heap_start : (int) __brkval); 
} 
```

例如，您需要在打印中调用它：Serial.println(freeRam());

# perl - 在perl中从文件中读取西里尔字符

> ID：14663545
> 
> 赞同：2
> 
> 时间：2013-02-02T15:45:31.327
> 
> 标签：perl, file, encoding

我无法从 perl 文件中读取西里尔字符。

文本文件用记事本编写，包含“абвгдежзийклмнопрстуфхцчшщъьюя”。这是我的代码：

```
#!/usr/bin/perl

use warnings;
use strict;

open FILE, "text.txt" or die $!;

while (<FILE>) {
    print $_;   
} 
```

如果我使用 ANSI 编码保存文本文件，我得到：

```
рстуфхцчшщъыьэюяЁёЄєЇїЎў°∙·№■ 
```

如果我使用 UTF-8 编码保存它，并使用包 Encode 中的函数 decode('UTF-8', $_) ，我得到：

```
Wide character in print at test.pl line 11, <TEXT> line 1. 
```

和一堆不可读的字符。

我在 Windows 7x64 中使用命令提示符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:00:48.290

您正在解码您的输入，但“忘记”对您的输出进行编码。

您的文件可能是使用[cp1251](http://en.wikipedia.org/wiki/Cp1251)编码的。

您的终端需要[cp866](http://en.wikipedia.org/wiki/Code_page_866)。

采用

```
use open ':std', ':encoding(cp866)';
use open IO => ':encoding(cp1251)';
open(my $FILE, '<', 'text.txt')
   or die $!; 
```

或者

```
use open ':std', ':encoding(cp866)';
open(my $FILE, '<:encoding(cp1251)', 'text.txt')
   or die $!; 
```

如果您保存为 UTF-8，请使用`:encoding(UTF-8)`而不是。`:encoding(cp1251)`

# c - C程序列出隐藏和只读文件

> ID：14663548
> 
> 赞同：1
> 
> 时间：2013-02-02T15:45:52.180
> 
> 标签：c, linux

我正在创建一个列出目录内容的简单 C 程序。有谁知道如何只列出隐藏？以下代码从目录中提取每个文件并完美运行，但我只需要隐藏文件。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T15:52:06.690

在 GNU/Linux 上，隐藏文件以点开头。

```
#include <string.h>

int is_hidden(const char *name)
{
  return name[0] == '.' &&
         strcmp(name, ".") != 0 &&
         strcmp(name, "..") != 0);
} 
```

要检查文件是否为只读文件，最好使用该`stat`函数。

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

int is_readonly(const char *name)
{
  struct stat buf;

  stat(name, &buf);

  return buf->st_mode & /* ... */;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T15:47:03.937

*   要确定文件是否“隐藏”，请检查其名称是否以`.`
*   要确定文件是否为只读，请执行 a`stat(2)`并检查权限 ( `st_mode`)

`access(2)`或者，如果你小心的话，你可以使用第二点。如果你想要`open(2)`那个文件，你不应该相信`access(2)`返回的任何东西。一般`access(2)`是要避免的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T11:15:49.703

要检查文件是否为只读，可以使用 sys/stat.h（参考：[http](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/stat.h.html) ://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/stat.h.html ）

您需要做的就是在 st_mode 上执行 &（二进制与）操作。

```
struct stat st; 

if (stat(fileName, &st) == 0)
    cout << " user write permission: " << (st.st_mode & 00200 ) ; 
```

如果输出为 0，则用户无权写入（只读）。否则文件不是只读的。

其他权限位：

```
 S_IRWXU     00700   mask for file owner permissions
       S_IRUSR     00400   owner has read permission
       S_IWUSR     00200   owner has write permission
       S_IXUSR     00100   owner has execute permission
       S_IRWXG     00070   mask for group permissions
       S_IRGRP     00040   group has read permission
       S_IWGRP     00020   group has write permission
       S_IXGRP     00010   group has execute permission
       S_IRWXO     00007   mask for permissions for others
                           (not in group)
       S_IROTH     00004   others have read permission
       S_IWOTH     00002   others have write permission
       S_IXOTH     00001   others have execute permission 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-02T18:24:38.373

下面的代码片段将帮助您检查文件是否在 Windows 中隐藏。

```
int is_hiddenfile(char* file_name)
{
    FILE * batch_file = NULL;
    FILE * output_file = NULL;
    int count = 0;
    batch_file = fopen ("D:\\bat.bat", "w");
    fputs ("dir /ah ", batch_file);
    fputs (file_name, batch_file);
    fputs (" 2>D:\\out.txt", batch_file);
    fclose (batch_file);
    ShellExecuteA (NULL, "open", "D:\\bat.bat", NULL, NULL, SW_SHOWNORMAL);
    output_file = fopen("D:\\out.txt", "r");
    while(feof(output_file) == 0)
    {
        fgetc(output_file);
        count++;
    }
    if (count <= 1)
        return 1;
    else
        return 0;
} 
```

要在 windows 中检查文件是否为只读文件，`/ar`需要使用而不是`/ah`在`dir`命令中使用。

```
int is_readonlyfile(char* file_name)
{
    ... //same as is_hiddenfile function
    fputs ("dir /ar ", batch_file);
    ... //same as is_hiddenfile function
} 
```

# iphone - 调用 Web 服务时出错，无法完成操作

> ID：14663551
> 
> 赞同：0
> 
> 时间：2013-02-02T15:46:09.750
> 
> 标签：iphone, ios, objective-c, nsurlrequest

我打电话给网络服务，我得到 0 个字节作为响应，并得到如下错误：

> 错误域=kCFErrorDomainCFNetwork 代码=303 “操作无法完成。（kCFErrorDomainCFNetwork 错误 303。）” UserInfo=0xa9b8ef0 {NSErrorFailingURLKey= [http://quantuminfoways.com/crossfit_wodgenius/webservice/sync.php](http://quantuminfoways.com/crossfit_wodgenius/webservice/sync.php) , NSErrorFailingURLStringKey= [http:// /quantuminfoways.com/crossfit_wodgenius/webservice/sync.php](http://quantuminfoways.com/crossfit_wodgenius/webservice/sync.php) }

我将数据作为 [示例链接](http://quantuminfoways.com/crossfit_wodgenius/webservice/sync.php?udid=123&new=yes&uid=45&data=%7B%7D)传递。

在数据中我传递了这个：

```
{
    createwod =     {
        deletedcreatewod =         (
        );
        newcreatewod =         (
        );
    };
    favorite =     {
        deletedfavorite =         (
        );
        newfavorite =         (
        );
    };
    gym =     {
        deletedgym =         (
        );
        newgym =         (
        );
    };
    workoutlog =     {
        deletedworkoutlog =         (
        );
        deletedworkoutlogtime =         (
        );
        newworkoutlog =         (
        );
    };
} 
```

任何人都可以帮我解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:58:05.540

将 POST 方法作为 GET 调用时出现错误“kcferrordomaincfnetwork 错误 303”的原因之一。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-02T16:11:41.490

303 错误是重定向错误。

您可能想查看使用 NSURLConnection 自动处理重定向： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/RequestChanges.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/RequestChanges.html)

如果您想手动处理它，重定向 url 位于响应的“位置”标头中。以下是在连接中获取它的方法：didReceiveResponse 委托方法。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
    // ... if the response status is 303 ...
    if ([response respondsToSelector:@selector(allHeaderFields)]) {
        NSString* location = [[httpResponse allHeaderFields] valueForKey:@"Location"];
            // do whatever with the redirect url 
    }
} 
```

您还可以尝试 urlEncoding 您的 url，包括数据。试试如果你只调用以下 URL 会发生什么：http: //quantuminfoways.com/crossfit_wodgenius/webservice/sync.php?udid=123&new=yes&uid=45&data=%20%7B%20createwod%20=%20 [%7B%20deletedcreatewod %20=%20(%20);%20newcreatewod%20=%20(%20);%20%7D;%20favorite%20=%20%7B%20deletedfavorite%20=%20(%20);%20newfavorite %20=%20(%20);%20%7D;%20gym%20=%20%7B%20deletedgym%20=%20(%20);%20newgym%20=%20(%20);%20 %7D;%20workoutlog%20=%20%7B%20deletedworkoutlog%20=%20(%20);%20deletedworkoutlogtime%20=%20(%20);%20newworkoutlog%20=%20(%20);%20 %7D;%20%7D](http://quantuminfoways.com/crossfit_wodgenius/webservice/sync.php?udid=123&new=yes&uid=45&data=%20%7B%20createwod%20=%20%7B%20deletedcreatewod%20=%20(%20);%20newcreatewod%20=%20(%20);%20%7D;%20favorite%20=%20%7B%20deletedfavorite%20=%20(%20);%20newfavorite%20=%20(%20);%20%7D;%20gym%20=%20%7B%20deletedgym%20=%20(%20);%20newgym%20=%20(%20);%20%7D;%20workoutlog%20=%20%7B%20deletedworkoutlog%20=%20(%20);%20deletedworkoutlogtime%20=%20(%20);%20newworkoutlog%20=%20(%20);%20%7D;%20%7D)

# visual-studio-2010 - 字符串到货币数据类型的转换

> ID：14663557
> 
> 赞同：0
> 
> 时间：2013-02-02T15:46:46.070
> 
> 标签：visual-studio-2010, sql-server-2005, insert, sql

我很难为我的问题找到解决方案，我正在 Visual Studio（Visual Basic Windows 窗体应用程序）和 SQL SERVER 2005 中创建一个程序作为我的后端，我的一个列有一个`money`（数据类型），我没有不知道如何为我的（按钮）应用正确的`SELECT`STATEMENT 。`INSERT`

谁能告诉我如何在此转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:52:20.510

尝试这个

```
Dim price As Single = Single.Parse(txtprice.Text)
txtPrice.Text = String.Format("{0:C}", price) 
```

# django - 单元测试中的权限

> ID：14663558
> 
> 赞同：8
> 
> 时间：2013-02-02T15:46:50.137
> 
> 标签：django, unit-testing, permissions

我想将单元测试引入 Django 应用程序。虽然我开始在我想测试的第一件事上失败了。你能告诉我我做错了什么吗？

我要测试的视图

```
@user_passes_test(lambda u: u.has_module_perms('myModule'))
def myView(request):
    ...someCode... 
```

我想测试 user_passes_test 位，我还有更复杂的测试，所以我想知道我的测试是否让正确的用户并且只有他们才能访问视图。我专注于不起作用的部分并对其进行了一些简化。

```
from django.contrib.auth.models import User
from django.test import TestCase
from settings import DJANGO_ROOT

class PermissionsTestCase(TestCase):
    fixtures = [DJANGO_ROOT + 'testdata.json']

    def setUp(self):
        self.user = User.objects.create(username='user', password='pass')
        self.user.save()

    def test_permissions_overview(self):
        url = '/secret/'

        #User not logged in (guest)
        response = self.client.get(url)
        self.assertRedirects(response, 'http://testserver/accounts/login/?next=/secret/')

        #Logged in user that should not be able to see this page
        response = self.client.get(url)
        self.client.login(username='user', password='pass')
        self.assertRedirects(response, 'http://testserver/accounts/login/?next=/secret/')

        #Logged in user that has 'myModule' module permissions 
        self.user.user_permissions.add('myModule.view_myThing')
        self.user.save()
        self.assertTrue(self.user.has_module_perms('myModule')) #This one fails
        self.client.login(username='user',password='pass')
        response = self.client.get(url)
        self.assertContains(response,  "What to look for") #This one too 
```

最后一点一直失败。权限没有通过。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-13T22:14:08.523

这不会将密码转换为哈希

```
User.objects.create(username='user', password='pass') 
```

创建用户的正确方法是：

```
User.objects.create_user(username='user', password='pass') 
```

* * *

这是完整的摘要

```
>>> from django.contrib.auth.models import User
>>> x=User.objects.create(username='user', password='pass')    
>>> x.password
'pass'
>>> from django.test import Client
>>> c = Client()
>>> c.login(username='user',password='pass')
False

# But create_user works
>>> y=User.objects.create_user(username='user2', password='pass')    
>>> y.password
u'pbkdf2_sha256$12000$oh55gfrnCZn5$hwGrkUZx38siegWHLXSYoNDT2SSP1M5+Whh5PnJZD8I='
>>> c.login(username='user2',password='pass')
True 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-02T21:14:05.900

权限是字符串。

```
# this tests to see if a user has 'myModule'
@user_passes_test(lambda u: u.has_module_perms('myModule'))

#gives the user a completely different permission called 'myModule.view_myThing'
self.user.user_permissions.add('myModule.view_myThing')

#tests to see if user has a permission called 'myModule' which is not 'myModule.view_myThing'
self.assertTrue(self.user.has_module_perms('myModule')) 
```

根据您所写的内容，我无法推断您的意图，但您至少有 2 个尝试添加/检查的不同权限。我将更改您授予用户的权限，如下所示： self.user.user_permissions.add('myModule')

# jax-ws - Wsgen 与 javaSE 的使用

> ID：14663566
> 
> 赞同：1
> 
> 时间：2013-02-02T15:47:31.623
> 
> 标签：jax-ws, wsgen

我正在研究如何仅使用 javaSE 6 或更高版本来构建和发布 Jax-WS Web 服务。我正在阅读的书说，对于文档样式的 ws，您需要在发布 ws 之前调用 wsgen 实用程序，以便创建充当请求和响应消息中数据的包装器的 java 类。但是，我尝试在不调用 wsgen 的情况下发布 ws，并且一切似乎都运行良好： Endpoint.publish 发布了 ws 实例，并且请求和响应消息按预期包装（我正在使用 SoapUI 来测试 WS）。

我的jdk版本是1.7，jax-ws版本是2.2.4。这本书谈到了 jax-ws 2.1。jax-ws 2.2 是否有可能自动调用 wsgen 或动态生成包装器？

非常感谢你的帮助。

尼科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:34:58.330

在谈到如何使用 wsgen 生成 wsdl 时，我在书中找到了这个注释：

“在当前的 Metro 版本中，如果程序员不这样做，Endpoint 发布者会自动生成 wsgen 工件......Metro 版本的这个方便的特性将及时进入核心 Java，以便 wsgen 步入文档样式可以避免服务。”

我认为这就是当前版本的 Jax-WS 所发生的情况。

# javascript - JavaScript - 如何获取字符串中最后一个不同的索引但是

> ID：14663568
> 
> 赞同：0
> 
> 时间：2013-02-02T15:47:35.563
> 
> 标签：javascript, string, split

嗨，我要做一个计算器，我想要一个 +/- 按钮。我想在字符串中获取最新的`*`, `-`, `+`,`/`并定义最后一个字符串。

例如：

```
str="2+3*13" 
```

我希望将其拆分为：

```
strA="2+3*"

strB="13" 
```

另一个例子：

```
str="3-2+8" 
```

应拆分为：

```
strA="3-2+"

strB="8" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:58:08.027

使用[`lastIndexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)和[子字符串方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/prototype#Methods)之一：

```
var strA, strB,
    // a generic solution for more operators might be useful
    index = Math.max(str.lastIndexOf("+"), str.lastIndexOf("-"), str.lastIndexOf("*"), str.lastIndexOf("/"));
if (index < 0) {
    strA = "";
    strB = str;
} else {
    strA = str.substr(0, index+1);
    strB = str.substr(index+1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:30:04.267

您可以使用[replace](http://www.w3schools.com/jsref/jsref_replace.asp)、[match](http://www.w3schools.com/jsref/jsref_match.asp)和正则表达式：

```
str="3-2+8"
strA = str.replace(/\d+$/, "")
strB = str.match(/\d+$/)[0]

console.log(str, strA, strB);
> 3-2+8 3-2+ 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:34:46.910

您可以使用正则表达式和拆分方法：

```
var parts = "2 + 4 + 12".split(/\b(?=\d+\s*$)/); 
```

会给你和数组：

```
["2 + 4 + ", "12"] 
```

几个测试：

```
"(2+4)*230" -> ["(2+4)*", "230"]
"(1232-74) / 123 " -> ["(1232-74) / ", "123 "]
"12 * 32" -> ["12 * ", "32"] 
```

# css - IE中的CSS渐变，透明颜色？

> ID：14663569
> 
> 赞同：3
> 
> 时间：2013-02-02T15:47:37.577
> 
> 标签：css

我可以在 IE 中使用带有渐变的透明颜色吗？

我试过了

```
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=transparent, endColorstr=red); 
```

奇怪的是，这会产生从蓝色到黑色的渐变，即使在 IE9 中也是如此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T16:18:29.297

没有提及`(start|end)ColorStr`属性支持的“透明”值。对于 Internet Explorer 8 及以下版本，您可以尝试以下代码：

```
.transparentGradient {

    /* The element needs layout */
    zoom: 1;

    filter: progid:DXImageTransform.Microsoft.gradient(
        gradientType=1, startColor=0, endColorStr=#FFFFFF
    );
    -ms-filter: progid:DXImageTransform.Microsoft.gradient(
        gradientType=1, startColor=0, endColorStr=#FFFFFF
    );
} 
```

这是[**一个工作示例**](http://jsfiddle.net/JMtM5/embedded/result/)。我已经在 IE8、它的兼容模式和 IE6 中测试过它。

# 开始颜色/结束颜色

和参数接受`startColor`：`endColor`

> **指定或接收颜色值的整数**，范围从 **0（透明）**到 4294967295（不透明白色）。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms532929 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532929(v=vs.85).aspx)

# startColorStr / endColorStr

您还可以使用`startColorStr`or/and `endColorStr`which 接受：

> **指定或接收范围从#FF000000 到#FFFFFFFF 的值的字符串**。****

 **因此，您可以以“#RRGGBB”（如示例）或“#AARRGGBB”格式指定颜色，后者定义为：

> 颜色以#AARRGGBB 格式表示，其中AA 是alpha 十六进制值，RR 是红色十六进制值，GG 是绿色十六进制值，BB 是蓝色十六进制值。alpha 值控制对象的不透明度。**alpha 值 00 是透明的，而 FF 值是不透明的。**

默认值为`#FF0000FF`（不透明的蓝色），如果您传递的值超出范围，则默认为该值。请参阅：http: [//msdn.microsoft.com/en-us/library/ms532930 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532930(v=vs.85).aspx)

* * *

不要忘记：

> 对象必须具有过滤器才能呈现的布局。

请参阅：http: [//msdn.microsoft.com/en-us/library/ie/ms530752 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms530752(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T16:19:18.073

这有效：

```
#000000FF 
```

所以：

```
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#000000FF, endColorstr=red); 
```

而且，未经测试，但我听说 0 也可以。然后是 startColor，而不是 startColorstr。**

# r - 在 R 中的 qountmod 数据框中添加计算列

> ID：14663571
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:47:42.210
> 
> 标签：r

我正在尝试使用 MFI 生成买入/卖出信号来测试策略。它实际上应该很简单，但是 R 让我很难过。

这是我的代码：

```
q <- get(getSymbols('spy',src='yahoo'))
q$mfi <- MFI(q[,2:4],q[,5],5)
sig <- function(row) { 
if (row$mfi < 20) { return (1)} 
else if (row$mfi > 80) { return (-1)} 
else { return (0)}}
q$result<-apply(q,1,sig) 
```

我得到的错误是：

```
Error in row$mfi : $ operator is invalid for atomic vectors 
```

如果有更好的方法使用简单的条件测试策略，我将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:57:02.780

这里不需要使用`apply`，使用`ifelse`，它是矢量化的

```
mfi <- c(10,15,20,50,70,90,100)
res <- ifelse(mfi < 20, 1, ifelse( mfi < 80,0,-1))

rbind(mfi,res)  ## rbind here just to show you the result and you can compare
    [,1] [,2] [,3] [,4] [,5] [,6] [,7]
mfi   10   15   20   50   70   90  100
res    1    1    0    0    0   -1   -1 
```

**编辑**对 OP 的校准

```
q <- getSymbols('XXX')
q$mfi <- ....
q$rsi <- ....
sig <- function(q,...) {
  if('mfi' %in% names(q))
    res <- ifelse(mfi < 20, 1, 
                  ifelse( mfi < 80,0,-1))
  else 
    res <- NULL
  res
}
 sig(q)
[1]  1  1  0  0  0 -1 -1 
```

# android - use of view to display digits images

> ID：14663581
> 
> 赞同：0
> 
> 时间：2013-02-02T15:48:15.537
> 
> 标签：android

I m creating an clock which will show the present time on the UI I want to show the digitd through the pictures from 0 to 1 For this i m taking the images from 0 to 9 one over the another making a stack and then changing the tranparancy of the image according to the number i want to show

```
@Override
protected void onCreate(Bundle savedInstanceState) {
setContentView(R.layout.activity_main);
super.onCreate(savedInstanceState);
i0.setAlpha(1);
i1.setAlpha(1);
i2.setAlpha(1);
i3.setAlpha(1);
i4.setAlpha(1);
i5.setAlpha(1);
i6.setAlpha(1);
i7.setAlpha(1);
i8.setAlpha(1);
i9.setAlpha(1);
Timer Tim=new Timer();
Tim.schedule(new TimerTask() 
{   @Override
    public void run() 
    {    runThread();   }
},1000,1000);

}

private void runThread()
{   runOnUiThread (new Thread(new Runnable() 
    {   public void run() 
        {   

        if(x==0){
            i0.setAlpha(1000);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==1){
            i0.setAlpha(1);
            i1.setAlpha(1000);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==2){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1000);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==3){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1000);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==4){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1000);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==5){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1000);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==6){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1000);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==7){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1000);
            i8.setAlpha(1);
            i9.setAlpha(1);}

        if(x==8){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1000);
            i9.setAlpha(1);}

        if(x==9){
            i0.setAlpha(1);
            i1.setAlpha(1);
            i2.setAlpha(1);
            i3.setAlpha(1);
            i4.setAlpha(1);
            i5.setAlpha(1);
            i6.setAlpha(1);
            i7.setAlpha(1);
            i8.setAlpha(1);
            i9.setAlpha(1000);}

        x=x+1;
        if (x==10){x=0;}
        }
    }));
} 
```

}

I cannot take 10 images for each digit i want to show can any 1 suggest any other way to do that. Is it possible through "view"..? can any1 tel me how to use views in android..?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:51:39.620

我认为如果您使用字体而不是所有图像，这可能会更容易。我相信你可以通过使用你投入时间的 TextView 然后改变背景来达到同样的效果。

有关如何使用资产文件夹中的字体，请参阅[http://www.youtube.com/watch?v=kOJGmVXuuFA](http://www.youtube.com/watch?v=kOJGmVXuuFA)

编辑（新答案）：在 xml 布局中为您的时钟创建 ImageButtons，具体取决于您的时钟有多少位数。

```
 int[] x = {....} \\the digits you wish to display
    int[] images = { R.drawable.0, R.drawable.1,...,R.drawable.9); //the saves of your images 0-9
    int[] btnArray = { R.id.b1, R.id.b2,...}; //the ImageButtons used to display your digits
    for(int i = 0; i < numberofbuttons; i++) {
        ImageButton btn = (ImageButton) findViewById(btnArray[i-1]);
        btn.setBackgroundDrawable(getResources().getDrawable(
                images[x[i]])); 
    } 
```

# algorithm - Efficiently calculate next permutation of length k from n choices

> ID：14663583
> 
> 赞同：5
> 
> 时间：2013-02-02T15:48:20.313
> 
> 标签：algorithm, permutation

I need to **efficiently** calculate the next permutation of length `k` from `n` choices. Wikipedia lists [a great algorithm](http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order) for computing the next permutation of length `n` from `n` choices.

The best thing I can come up with is using that algorithm (or [the Steinhaus–Johnson–Trotter algorithm](http://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm)), and then just only considering the first `k` items of the list, and iterating again whenever the changes are all above that position.

Constraints:

*   The algorithm must calculate the next permutation given nothing more than the current permutation. If it needs to generate a list of all permutations, it will take up too much memory.
*   It must be able to compute a permutation of only length `k` of `n` (this is where the other algorithm fails

Non-constraints:

*   Don't care if it's in-place or not
*   I don't care if it's in lexographical order, or any order for that matter
*   I don't care *too much* how efficiently it computes the next permutation, within reason of course, it can't give me the next permutation by making a list of all possible ones each time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:53:29.597

你可以把这个问题分成两部分：

1)`k`从一组 size中找到所有 size 的子集`n`。

2）对于每个这样的子集，找到 size 子集的所有排列`k`。

引用的 Wikipedia 文章提供了第 2 部分的算法，因此我不会在此重复。第 1 部分的算法非常相似。为简单起见，我将其描述为“查找`k`整数大小的所有子集`[0...n-1]`。

1）从子集开始`[0...k-1]`

2）为了得到下一个子集，给定一个子集`S`：

2a) 找到最小的`j`使得`j ∈ S ∧ j+1 ∉ S`. 如果`j == n-1`，则没有下一个子集；我们完成了。

2b）小于`j`形成序列的元素`i...j-1`（因为如果缺少任何这些值，则`j`不会是最小的）。如果`i`不为 0，则将这些元素替换为`i-i...j-i-1`. 将元素替换`j`为元素`j+1`。

# windows - Windows 7 Screen Display Direction Got Change?

> ID：14663584
> 
> 赞同：0
> 
> 时间：2013-02-02T15:48:29.443
> 
> 标签：windows

I am using windows 7 .

position for the **screen** and **Taskbar** got change to right side of pc also the view for pc showing at right side direction. i am dragging through mouse its not working.

i dont know which is the combination of keys e.g: ctrl+p or any other using which i can make the screen position and task bar as prior.

regards, tousif shaikh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:55:46.080

右键单击任务栏->取消选择锁定任务栏->将其拖动到您想要的位置->检查锁定任务栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:05:27.140

我试过下面的链接 [http://www.ehow.com/how_8138538_change-windows-vista-horizo​​ntal -vertical.html](http://www.ehow.com/how_8138538_change-windows-vista-horizontal-vertical.html)

它对我有用。

问候，图西夫·谢赫。

# javascript - Acess referenced variable in indexed array avoiding eval() function

> ID：14663586
> 
> 赞同：0
> 
> 时间：2013-02-02T15:48:45.833
> 
> 标签：javascript, arrays, eval

Using jsbin.com tool to test Javascript code I used eval() function, but an warning from JSBin says "Eval is Evil". I did some searches about the use of eval() function and some sources says that is always possible avoid of use eval().

My code need access an array using parameters from other array. See this code:

```
var Collection = {
                  "cell"  : "value[3]", 
                  "lines" : "source[1..7]", 
                  "title" : "greeting"
                 };

var Data = {
            source : ["a", "b", "c"],

            value   : [
                       "done",
                       "easy", 
                       "f", 
                       "g", 
                       "h", 
                       "i", 
                       "j" 
                      ],

            greeting : "Hi!"         

       };

function Process()
 {
  var x = "cell";

  console.log("value[4] = " + Data.value[4]);
  console.log("C : " + Collection[x]);
  console.log("value['cell'] = " + eval("Data." + Collection[x]));
 } 
```

The output is

```
value[4] = h
C : value[3]
value['cell'] = g 
```

The recomendations says to access using dot notation, like I do in access to value[4], but the value to be accessed will go in a variable, like 'x', in this case with content "cell". This value is used to access Collection array, and select the value that will be used and Data array. I solve it using eval() function.

Are there a way to do this without eval() ??

# android - Android-Require an option from the popup menu to be selected

> ID：14663587
> 
> 赞同：0
> 
> 时间：2013-02-02T15:48:51.010
> 
> 标签：android, option, popupwindow, togglebutton

In Android, is there a way to require the user to select an option from the popup menu? I don't want to use a dialog fragment because I think it would be too obstructive. So if they click outside of the popup menu, the menu should still stay there, until they select an option.

```
public void showPopup(View view){
    autonButton = (ToggleButton)view;

    pw = new PopupWindow(getApplicationContext());
    pw.setTouchable(true);
    pw.setFocusable(true);
    pw.setOutsideTouchable(true);
    pw.setTouchInterceptor(new OnTouchListener(){
        public boolean onTouch(View v, MotionEvent event){
            if(event.getAction() == MotionEvent.ACTION_OUTSIDE)
            {
                //pw.dismiss();
                Log.d("popup window", "popup outside");
                return false;
            }
            else if(event.getAction() == MotionEvent.ACTION_DOWN)
                Log.d("popup window", "popup down");

            return true;//if I put true here, the entire screen freezes, and i can't get any input
        }

    });
    pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setOutsideTouchable(false);
    pw.setContentView(autonPopup);
    pw.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
    pw.showAsDropDown(view, 0, 0);

    View popupView = pw.getContentView();

    optionR = (Button) popupView.findViewById(R.id.auton_select1);

    optionR.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {

            autonButton.setChecked(true);
            autonButton.setText("Red");
        }

    });

    optionB = (Button) autonPopup.findViewById(R.id.auton_select2);
    optionB.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){
            autonButton.setChecked(true);
            autonButton.setText(" Blue");               
        }
    });

} 
```

# drupal - Drupal My Account Block Personalisation

> ID：14663592
> 
> 赞同：0
> 
> 时间：2013-02-02T15:49:36.920
> 
> 标签：drupal, drupal-7

When users login into my new Drupal site they and go their my Account page, they are greeted with several options including the ability to change their times zones. Weirdly they are also greeted with a Customization block to switch on or off the Main Menu. However the configuration for this is set to no personalisation and is called superfish not Main-Menu. How can i find out what is setting this to allow users to customize?

![Strange Customisation option appearing for users](../Images/0cdbbd1588cec9ced01ac8e15a71fb3a.png)

thanks

Lee

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:56:52.893

这肯定是权限问题。转到以管理员身份登录的权限，并删除为您的用户角色个性化块的权限。

如果您有任何问题，请告诉我

# c++ - gluUnproject returning 0, seems to be related to modelview matrix

> ID：14663594
> 
> 赞同：0
> 
> 时间：2013-02-02T15:49:42.257
> 
> 标签：c++, qt, opengl, model-view

I'm working on a 2D image viewer, I want to retrieve openGL mouse position on texture but I can't get it to work if glTranslatef() or glScalef() calls are made on the modelview matrix. I'm using a QGLWidget , of the famous Qt library.

Here are the important calls : Resize function :

```
void ViewerGL::resizeGL(int width, int height){

     glViewport (0, 0, width, height); 
```

Display function :

```
void ViewerGL::paintGL()
{        int w = width();
         int h = height();

        glMatrixMode (GL_PROJECTION);
        glLoadIdentity();

        //transX,transY are for panning around the image in the viewer
        float left = (0.f+transX) ; 
        float right = (w+transX) ; 
        float bottom = (h-transY);
        float top = (0.f-transY) ;        
        glOrtho(left, right, top, bottom, -1, 1); 
```

... later in paintGL:

```
 glMatrixMode (GL_MODELVIEW);
        glLoadIdentity ();

        //padx,pady are used to translate the image from the bottom left corner 
        // to the center of the viewer
        float padx,pady;
        padx= ((float)width() - _dw.w()*zoomFactor)/2.f; // _dw.w is the width of the texture
        pady =((float)height() - _dw.h()*zoomFactor)/2.f ;// _dw.h is the height of the texture
        glTranslatef( padx , pady, 0);

        //zoomX,zoomY are the position at which the user required a zoom
        glTranslatef(-zoomX,-zoomY, 0.f);
        glScalef(zoomFactor, zoomFactor,0.f); 
        glTranslatef(zoomX ,zoomY, 0.f); 
```

Now here is my function to retrieve the openGL coordinates :

```
QPoint ViewerGL::openGLpos(int x,int y){
   GLint viewport[4];
   GLdouble modelview[16];
   GLdouble projection[16];
   GLfloat winX=0, winY=0, winZ=0;
   GLdouble posX=0, posY=0, posZ=0;
   glGetDoublev( GL_MODELVIEW_MATRIX, modelview );
   glGetDoublev( GL_PROJECTION_MATRIX, projection );
   glGetIntegerv( GL_VIEWPORT, viewport );
   winX = (float)x;
   winY = height()- y;
   if(winY == 0) winY =1.f;
   glReadPixels( x, winY, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &winZ );
   gluUnProject( winX, winY, winZ, modelview, projection, viewport, &posX, &posY, &posZ);
   return QPoint(posX,posY); 
```

}

So far , here is what I noticed: The code like this returns always (0,0) and GLU_FALSE is returned from gluUnproject. I read somewhere on a forum that it could be because of the modelview matrix, so I put the identity matrix instead, but,if I do it, I get exactly the coordinates of the mouse in the window...

Before , I dealt with the zoom using the orthographic projection, but I couldn't make it work perfectly, so to make it simpler I decided to retrieve openGL position, and use glTranslatef/glScalef instead .

If I remove all the translating / scaling stuff in the paintGL function, everything is working...but the zoom doesn't work :x)

I'm requesting your help to make this damned zoom to point working, using the gluUnProject solution;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:41:30.787

Aigth，没关系，我找到了解决方案：我将 glScalef(x,y,z) 中的 z 归零，所以它使矩阵不可逆......

# javascript - How to use Selenium to interact with javascript in python?

> ID：14663595
> 
> 赞同：0
> 
> 时间：2013-02-02T15:49:43.210
> 
> 标签：javascript, python, selenium

First I use python and selenium to load a website in firefox. Then I fill in a simple javascript type form. The site is poorly made but usually if I tell selenium to use (Keys.RETURN) then it will drop down a list of options. The problem is I don't know how to click on one of these because they didn't load with the web page. I tried using (Keys.ARROW_DOWN) to go through them but it still doesn't really work.

How can I interact with javascript through selenium using python?

Thanks.

P.S. I know almost nothing about javascript so if there is some way to do it, I still would be clueless on how to use javascript anyway...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:08:02.660

您可能必须告诉浏览器等待几毫秒。

一些要看的地方：

[使用 Selenium 在 Firefox 上单击 Javascript 链接](https://stackoverflow.com/questions/11018796/clicking-on-a-javascript-link-on-firefox-with-selenium)

[http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

# php - PHP - 导出 CSV 文件

> ID：14663597
> 
> 赞同：-4
> 
> 时间：2013-02-02T15:49:45.223
> 
> 标签：php

我写了一个脚本，它从 Mysql 数据库中导出一个包含信息的 CSV 文件。该脚本在 Linux Server(Apache) 下运行没有问题，但在 Windows Server(Apache) 下无法运行。

我认为问题出在这个标题上！！！

```
header('Content-Type: text/x-csv');
header('Expires: ' . gmdate('D, d M Y H:i:s') . ' GMT');
header('Content-Disposition: attachment; filename=iBlock_download.csv');
header('Pragma: no-cache');
header("Content-Type: text/html; charset=UTF-8"); 
```

这里有人可以帮忙吗？

谢谢

脚本在这里：

```
header('Content-Type: text/x-csv');
header('Expires: ' . gmdate('D, d M Y H:i:s') . ' GMT');
header('Content-Disposition: attachment; filename=iBlock_download.csv');
header('Pragma: no-cache');
header("Content-Type: text/html; charset=UTF-8");

    include('./lib/sqlString.php');
    $_id=$_GET['_id'];

$ResultPointer = mysql_query("SELECT * FROM projekte where pro_id='$_id'");
for($i = 0, $Export = ""; $i < mysql_num_rows($ResultPointer); $i++)
{

$Daten = mysql_fetch_object($ResultPointer);

$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_id);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_desc);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_exp);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_animal_nr);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_organ);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_treatment);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_comment);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_genotype);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_start_date);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_aktion);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_txt1);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_aktion);
$Spalte[] = str_replace("\"", "\"\"", $Daten->pro_user_name);

$ResultPointer2 = mysql_query("SELECT * FROM pro where fn_pro_id ='$Daten->pro_id'");
$sume=mysql_num_rows($ResultPointer2);

for($i = 0, $Export = ""; $i < mysql_num_rows($ResultPointer2); $i++)
{
$sume=mysql_num_rows($ResultPointer2);

$Daten2 = mysql_fetch_object($ResultPointer2);
$Spalte[] = str_replace("\"", "\"\"", $Daten2->fn_desc);
$Spalte[] = str_replace("\"", "\"\"", $Daten2->fn_order_date);

    }

for($j = 0; $j < count($Spalte); $j++)
{
$Export .= "\"" . $Spalte[$j] . "\"";
if($j != count($Spalte)-1)
{
$Export .= ";";
}
}
$Export .= "\r\n";
$Spalte = "";
}
echo $Export; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:56:46.873

首先...不知道您的脚本是如何做到的，但是在使用 csv 时这是一个非常有用的功能。( [http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php) )

但是...为什么您有 2 个定义内容类型的标头函数？不需要 text/html，我会坚持

```
header('Content-Type: text/csv'); 
```

或者

```
header('Content-Type: text/plain'); 
```

# javascript - JavaScript中奇怪的意外令牌非法

> ID：14663602
> 
> 赞同：0
> 
> 时间：2013-02-02T15:51:06.110
> 
> 标签：javascript, encoding, error-handling

我有一个无法解决的语法错误。基于 W3 jQuery 学校，这应该没问题。任何人都可以帮忙吗？

```
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $(“a”).click(function(){
            **Uncaught SyntaxError: Unexpected token ILLEGAL**
                $(#content).toggle(400);
            });
        });
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:55:49.870

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T15:53:19.227

你的选择器需要是一个字符串

```
$(#content).toggle(400); 
```

应该

```
$("#content").toggle(400); 
```

在这里查看更多阅读 jQuery 选择器。[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# drupal - 在 drupal 7 网站中集成 twitter

> ID：14663611
> 
> 赞同：4
> 
> 时间：2013-02-02T15:52:03.680
> 
> 标签：drupal, twitter, oauth

我正在尝试让 twitter 模块 (7.x-5.4) 在我的本地 drupal 7.19 网站上运行。已经安装了 Oauth 并注册了一个 twitter 应用程序。我正在使用该 Twitter 应用程序的密钥。

回调地址 `http://localhost/drupal-7.19/twitter/oauth`

推特主机 [http://twitter.com](http://twitter.com)

推特 API [https://api.twitter.com](https://api.twitter.com)

推特搜索 [http://search.twitter.com](http://search.twitter.com)

TinyURL [http://tinyurl.com](http://tinyurl.com)

当我想添加至少我自己的 Twitter 帐户以便网站可以显示我的推文时。当我想添加此帐户时，出现错误：

注意：未定义的属性：Twitter->request() 中的 stdClass::$data（root\modules\twitter\twitter.lib.php 的第 131 行）。无法从 Twitter API 获取有效令牌。请检查配置。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:14:42.030

在我的情况下，取消注释行 extension=php_openssl.dll 在 php.ini 解决了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T15:15:46.447

在您的 Drupal 站点上安装 oauth_common 和 twitter

检查是否启用了 Oauth 和 Twitter 模块。我没有使用任何其他 Twitter 模块来执行此操作

转到 Drupal 中的 twitter 模块

转到配置（按钮）-> 设置（选项卡）（请注意，回调 URL`http://localhost/yourwebsite/twitter/oauth`即*它不必是 127.0.0.1*）

单击显示注册您的应用程序的链接

转到 Twitter 并登录成为开发人员

添加一个新应用程序，创建一个不同的提要名称

输入您的站点详细信息 对于 localhost 使用：`http://127.0.0.1:8000/twitter/oauth`对于网站**和**回调 URL 完成后按保存

接下来转到“测试 OAuth”按钮 -**这将为您提供虚幻的消费者密钥和消费者密钥**

返回 Drupal 网站和 twitter 模块进行配置（按钮）-> 设置（选项卡）

复制并粘贴您刚刚获得的这些消费者和消费者密钥

按保存配置

希望没有错误。

转到模块中的 twitter 选项卡，希望您的 twitter 头像已经出现

阅读页面顶部，上面写着“通过运行 cron 从 Twitter 中提取推文。您可以在推文视图中查看完整的推文列表。”

选择查看推文复选框并单击查看 - 您的推文可能不会显示在下一个窗口中 - 尚未

转到您的 Drupal 配置屏幕并进入 [System] Cron 并按“运行 cron”

现在返回查看来自 twitter 模块的推文，它们应该都会出现

[这是一头猪要弄清楚]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:02:42.347

我不确定这对你有用，但这对我有用。即使我遵循了文档，我也遇到了同样的错误。这是测试：转到 admin/reports/status。如果您看到以下警告：“HTTP 请求状态失败”，这意味着您的 drupal/LAMP 堆栈无法使用 DNS 回调自身。在我的例子中，我使用我机器的 IP 来访问我的 Drupal 实例。因此，与其使用“localhost”，不如使用您机器的 IP 地址（您可以在 MSWin 上使用 ipconfig 或在 Mac/Linux 上使用 ifconfig）并使用它来完成 twitter 帐户设置过程。

再次，不是

```
http://localhost/drupal-7.19/twitter/oauth 
```

但

```
http://10.0.1.9/drupal-7.19/twitter/oauth 
```

（替换您机器的 IP 地址）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:41:40.030

我得到了完全相同的错误，我通过添加适当的代理服务器详细信息修复了该错误。

`Notice: Undefined property: stdClass::$data in Twitter->request() (line 131 of C:\wamp\www\test_twitter\sites\all\modules\twitter\twitter.lib.php`

问题是由于代理设置。我在**settings.php**中添加了值`$conf['proxy_server']`，这个错误消失了。`$conf['proxy_port']`

 **我还验证了如果我删除代理设置，此错误会再次重现。**

# php - 如何转换为图像和标准输出

> ID：14663612
> 
> 赞同：-1
> 
> 时间：2013-02-02T15:52:04.860
> 
> 标签：php, bash, stdout, ghostscript

我使用 php 和 ghostscript 将 pdf 转换为图像并显示

```
<?php
if(empty($_GET['page'])) die;
$numPage=$_GET['page'];
header('Content-type:image/jpeg');
system("gs ".
"-dNOPAUSE ".
"-sDEVICE=jpeg ".
"-dFirstPage={$numPage} ".
"-dLastPage={$numPage} ".
"-sOutputFile=%stdout ".
"-dJPEGQ=90 ".
"-r100x100 ".
"-q file.pdf ".
"-c quit");
?> 
```

谢谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:41:00.603

1.  使用`passthru`而不是`system`
    根据[PHP 手册](http://php.net/manual/en/function.passthru.php) `This function[passthru()] should be used in place of exec() or system() when the output from the Unix command is binary data which needs to be passed directly back to the browser.`

2.  更改`%stdout`为`-`
    [gs 手册页](http://www.bigbiz.com/cgi-bin/manpage?1%20ghostscript)：

    `You can also send output to stdout for piping with the switch`

    ```
     -sOutputFile=- 
    ```

下面的代码应该修复它。

```
<?php

if(empty($_GET['page'])) die;

$numPage=$_GET['page'];

header('Content-type:image/jpeg');

passthru("gs ".
"-dNOPAUSE ".
"-sDEVICE=jpeg ".
"-dFirstPage={$numPage} ".
"-dLastPage={$numPage} ".
"-sOutputFile=- ".
"-dJPEGQ=90 ".
"-r100x100 ".
"-q file.pdf ".
"-c quit");

?> 
```

# python - 添加确认以在 Python 中使用正则表达式进行搜索和替换

> ID：14663618
> 
> 赞同：1
> 
> 时间：2013-02-02T15:52:27.673
> 
> 标签：python, regex, preview, substitution, confirmation

我有一个小的 python 脚本，它遍历一堆文件，并在每个文件中应用一些正则表达式。我想添加一个确认步骤，其中显示旧文本和新文本。有什么有效的方法可以做到这一点。现在，在一个字符串中，我正在执行一个`.search`.，然后`.sub`在匹配的文本中执行 a，如果用户确认我将新文本插入到原始字符串中（通过索引）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:39:15.437

您可以将 re.sub 与要求用户确认的回调一起使用：http:
[//docs.python.org/2/library/re.html#text-munging](http://docs.python.org/2/library/re.html#text-munging)

```
text = 'This is a dummy dummy text'

def callback(m):
    string = m.group()
    subst = string.upper()
    start = m.start()
    question = 'subst {:s} at pos {:d}:'.format(string, start)
    ans = raw_input(question)
    if ans[0] in 'Yy':
        return subst
    else:
        return string

print re.sub(r'\bdummy\b', callback, text) 
```

哪个打印

```
subst dummy at pos 10:n
subst dummy at pos 16:y
This is a dummy DUMMY text 
```

# linux - 在 Ubuntu Minimal 中关闭帧缓冲控制台

> ID：14663619
> 
> 赞同：1
> 
> 时间：2013-02-02T15:52:29.757
> 
> 标签：linux, framebuffer

我正在尝试设置一个基于 Ubuntu Minimal 的虚拟机来测试使用帧缓冲区/DirectFB。我希望虚拟机只显示我放在帧缓冲区上的内容，而我通过 SSH 控制虚拟机。因此，理想情况下，它会在没有控制台的情况下启动到空白屏幕。

我通过将 video=vesafb 和 vga=0x305 添加到内核参数来启用帧缓冲设备。帧缓冲区正在工作，因为“cat /dev/urandom > /dev/fb0”（通过 ssh）会使屏幕充满噪音。

但是，VM 仍然显示控制台 1/tty1，即使在我用数据填充帧缓冲区之后，仍然有一个闪烁的光标。

如何关闭帧缓冲控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:37:31.030

尝试添加 console=/dev/null 作为内核参数，它应该会有所帮助。

# java - ArrayList 一直返回 0

> ID：14663623
> 
> 赞同：0
> 
> 时间：2013-02-02T15:52:59.213
> 
> 标签：java, sql, arraylist

我从数据库中检索数据并通过一个数组循环它以显示类似的数量。

```
 public void SetUpLikeAmount() {
    int likes = 0;
    ArrayList <Integer> likeArray = new ArrayList <Integer>();
    for (int count = 0; count < likeArray.size();count++){
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select likeDislike_likes from forumLikeDislike WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            likeArray.add(Integer.parseInt(resultSet.getString("likeDislike_likes")));
            likes += likeArray.get(count);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }

    }
    jLabel_like.setText(Integer.toString(likes));
} 
```

但是，它一直返回 0。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T15:54:51.117

（顺便说一句，它从不*返回*任何东西——你已经发布了一个`void`方法。）

看看这段代码：

```
ArrayList <Integer> likeArray = new ArrayList <Integer>();
for (int count = 0; count < likeArray.size();count++){
    ...
} 
```

您刚刚创建了一个*new* `ArrayList<Integer>`，因此它的大小为 0。因此，循环总是立即完成，而无需执行主体。

如果您尝试从其他地方创建的列表中获取输入，您可能应该将其传递到您的方法中。（您还应该使用`PreparedStatement`带有参数的 a，而不是直接在 SQL 中包含该值。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T15:55:21.850

您正在遍历`likeArray`空列表。所以它不会进入循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:18:35.913

可能在这里是您应该参考的新代码：

```
public void SetUpLikeAmount() {
     int likes = 0;
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select likeDislike_likes from forumLikeDislike WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            likes += Integer.parseInt(resultSet.getString("likeDislike_likes"));
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }

    jLabel_like.setText(Integer.toString(likes));
} 
```

您可能不需要我相信的数组列表，因为您仅在结果集的迭代期间获取值并将其求和。

# ios - NSFileWrapper 从 iCloud 失败并从本地目录工作

> ID：14663625
> 
> 赞同：2
> 
> 时间：2013-02-02T15:53:10.653
> 
> 标签：ios, crash, icloud, nsfilewrapper

我在将 NSFileWrapper 文档与 iCloud 同步时遇到问题。我能够创建我的包装器并将其保存到我无处不在的容器中。

当我尝试从创建它的设备中读取它时，它可以工作。当我尝试从另一个从 iCloud 获取它的设备上读取时，它崩溃了。

一些代码：

这个函数添加一个带有 NSString 的包装容器

```
- (void) addNSString:(NSString*)_string toFileWrapper:(NSFileWrapper*)_wrapper forKey:(NSString*)_key {

    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:_string];

    if(data) {

        [_wrapper addRegularFileWithContents:data preferredFilename:_key];
    } 
```

}

然后是我如何解码它：

```
- (id) unarchiveObjectFromWrappers:(NSDictionary*)_wrappers withKey:(NSString*)_key {

    id value = nil;

    NSFileWrapper *wrapper = [_wrappers valueForKey:_key];
    if(wrapper) {

        NSData *data = [wrapper regularFileContents];

        if(data) {

            value = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        }
    }

    return value;
} 
```

解码部分适用于一台设备，而不适用于其他设备（当 NSKeyedUnarchiver 尝试从 NSData 取消存档时，EXC_BAD_ACCESS。NSData 看起来不错，它具有适当的长度和所有内容，但是当我尝试记录其数据时，例如它崩溃）。

我的猜测是 NSFileWrapper 不下载它的全部内容，只下载它的结构，我必须做一些事情才能使它可用。但我不知道是什么。

有任何想法吗？

========

编辑：

NSURLUbiquitousItemIsDownloadedKey 说文件已下载，但如果我尝试将其复制到沙箱，则会失败并出现以下错误：“操作无法完成。文件描述符错误”

所以文件要么没有正确上传到 iCloud，要么没有正确下载......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T23:44:15.207

这也让我发疯了。该解决方案相当简单，但 Apple 完全没有记录。您必须专门下载该文件。只有文件包装器会自动下载，但不会自动下载其内容。这就是为什么检查说文件存在。

在复制文件之前，调用如下代码：

```
[[NSFileManager defaultManager]startDownloadingUbiquitousItemAtURL:cloudURL error:nil]; 
```

相关：[无法与 iCloud 同步简单文本文件（错误的文件描述符）](https://stackoverflow.com/questions/8714525/cannot-sync-simple-text-file-with-icloud-bad-file-descriptor)

# jquery - Rails ajax 文件上传（remotipart）

> ID：14663631
> 
> 赞同：2
> 
> 时间：2013-02-02T15:54:09.947
> 
> 标签：jquery, ruby-on-rails, ajax, file-upload

我构建了一个使用 remotipart gem 将文件上传到服务器的 web 服务。用于传输数据的表单是 ajax 表单（remote => true）。一切正常，文件被保存等。

然而问题是，当对象更新时，jquery 库会触发 ajax:error 事件作为对服务器（a`200 OK`或）完全正确答案的响应。`201`控制器用 format.json 回答

```
 format.json { render json: @author, status: :created, location: @author } 
```

负责评估响应的 javascript 遵循文档

```
 .bind("ajax:error", function (xhr, status, error ... 
```

浏览器中的答案是`200`，甚至 jQuery 对象中的状态码也是`200`. 但是类型是`ajax:error`. 有谁知道这怎么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:45:58.710

我想到了。添加（必需）i-frame 传输库时已解决。那个在我身上。

```
//= require jquery.iframe-transport 
```

# angularjs - 带有 AngularJS 的 Jquery 砌体

> ID：14663632
> 
> 赞同：0
> 
> 时间：2013-02-02T15:54:20.810
> 
> 标签：angularjs, jquery-masonry, angularjs-directive

在我的项目中，我尝试实现 jquery masonry。但它开始工作了。我尝试谷歌搜索，但发现了一些帖子。但我试过它不工作。

我的指令代码是

```
shout.directive("shoutList", function($timeout) {
    return  {
        restrict : 'E',

        replace : true,

        templateUrl : 'views/shout/shout-list.html',

        scope : {
            shouts : "="
        },

        //require : "ShoutController",

        controller : function($scope)   {
            $scope.deleteShout = function() {
                console.log('shout deleted');
            }
        },

        link : function(scope, element, attr)   {
            scope.$watch('shouts', function()   {
                // console.log("changing......");
                // scope.$evalAsync(
                    document.getElementById("shout-content-holder").masonry({
                        itemSelector: '.shout'
                    })
                // );
            });
        }
    }
}); 
```

指令模板是

```
<div id="shout-content-holder">
    <div class="shout" ng-repeat="shout in shouts">
        <p>{{shout.message}}</p>
        <img src="media/images/delete.png" width="32" height="32" ng-click="deleteShout()"/>
    </div>
</div> 
```

我从网络服务加载呼喊声。请帮我完成这项工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T13:27:07.927

把我在评论中提到的作为答案。这实际上可以使用模板而不是使用 .append() 来完成，它会更干净。您需要的是一个包含列列表和 ng-repeat 的模板，应该也可以正常工作，但是您必须等待插入第一项，然后才能计算插入第二项的位置；因此在这里使用 .append() 。

```
.directive('columns', function(){
  return {
    restrict: 'E',
    scope: {
        itemList: '=', // a list of items
        colCount: "@"  // number of columns
    },
    link: function(scope, elm, attrs) {
      //console.log(scope.itemList);
      var numCols = parseInt(scope.colCount);
      var colsArr = [];
      for(var i=0; i< numCols; i++){
        colsArr.push(angular.element("<div class='column' style='width:"+(100/numCols -.5)+"%' >Col "+(i+1)+"</div>"));
         elm.append(colsArr[i]); 
      }

      angular.forEach(scope.itemList, function(value, key){
        var item = angular.element("<div class='item' style='height:"+value.height+"px; background:"+'#'+Math.floor(Math.random()*16777215).toString(16)+"'>"+value.value+"</div>");
        var smallestColumn = getSmallestColumn();
        angular.element(smallestColumn).append(item);
      });

      function getSmallestColumn(){
        var smallestHeight = colsArr[0][0].offsetHeight;
        var smallestColumn = colsArr[0][0]; 
        angular.forEach(colsArr, function(column, key){ 
          if(column[0].offsetHeight < smallestHeight){
            smallestHeight = column[0].offsetHeight;
            smallestColumn = colsArr[key]; 
          }
        }); 
        return smallestColumn;
      }
    }
  };
}); 
```

plnkr.co/edit/UyRS0clrCwDpSrYgBsXS?p=preview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:19:45.793

您可能希望在 $last ng-repeat 上触发 masonry() 调用，而不是使用 $watch。我最近刚刚回答了一个关于这个的问题，所以我会在那里推荐你： [https ://stackoverflow.com/a/14656888/215945](https://stackoverflow.com/a/14656888/215945)

# c - 在 C 中使用 strstr

> ID：14663640
> 
> 赞同：4
> 
> 时间：2013-02-02T15:55:28.573
> 
> 标签：c, strstr

这个程序没有给出任何输出......如果输入匹配的字符串，函数 find_track 应该返回轨道。

```
#include<stdio.h>
#include<string.h>

char tracks[][80] = {
    "I left my heart in Harward Med School",
    "Newark, Newark - a wonderful town",
    "Dancing with a Dork",
    "From here to maternity",
    "The girl from Iwo Jima",
};

void find_track(char search_for[])
{
    int i;
    for(i = 0; i< 5 ; i++)
    {
        if(strstr(tracks[i],search_for))
        {
            printf("Track %i: '%s'\n",i,tracks[i]);
        }
    }
}

int main()
{
    char search_for[80];
    printf("Search for : ");
    fgets(search_for,80,stdin);
    find_track(search_for);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:07:39.820

fgets() 读取您输入的行，正如文档所说，这包括您输入到程序中的任何换行符。所以你输入“with”并回车，你的程序将得到字符串“with\n”。

所以摆脱那个换行符：

```
if (fgets(search_for,80,stdin)  && search_for[0]) [
    search_for[strlen(search_for) - 1] = 0;
    find_track(search_for);
} 
```

# wpf - 在 WPF 图像上高效显示多个标记

> ID：14663641
> 
> 赞同：1
> 
> 时间：2013-02-02T15:55:29.410
> 
> 标签：wpf, image, drawing, adorner

我需要在 WPF 图像上显示许多标记。标记可以是线、圆、正方形等，并且可以有数百个。

图像源和标记数据都每隔几秒更新一次。标记与图像上的特定像素相关联，它们的大小相对于屏幕应该是绝对的（即，当我移动图像时，标记应该随之移动，但是如果我放大，它们应该占据与屏幕相同的空间屏幕和以前一样）。

目前，我已经使用`AdornerLayer`. 这个解决方案有几个问题，但最重要的一个是即使对于 120 个这样的标记，UI 在负载下也表现不佳。

我想问一下实现这一点的最佳方法是什么？我想到了两个解决方案：

*   继承`Canvas`并确保它不是对每个添加的标记都无效，而是对一系列标记同时无效

*   创建一个包含图像的控件并更改它`OnDraw`以绘制所有标记

我将不胜感激有类似问题经验的人的一些指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:06:28.463

您的用例看起来非常专业，因此似乎需要专门的解决方案。我会尝试你的第二个选项的变体 - extend `Image`，覆盖它的`OnRender`方法。

# embedded - How to simulate a scheduler?

> ID：14663644
> 
> 赞同：1
> 
> 时间：2013-02-02T15:55:56.583
> 
> 标签：embedded, scheduling, scheduler, spi

In my firmware I write to MicroSD in a background task, and I've got a lot of higher-priorities interrupts enabled, some of which can take several milliseconds.

So the writing/reading from SPI can be interrupted at any moment, and for writes that may not be such a problem (if SPI behaves anything like UART), but during reads I'm afraid that my hardware SPI FIFO's will overflow if the task just happens to be interupted while the MicroSD card is sending a datablock.

Now the obvious solution would be to decrease the time that the higher priority interrupts take, but this seems very hard, because sometimes they have to wait on other peripherals too, and too prevent that I have to rewrite a lot of code that does polling now, to an interrupt-structure, which would make the overall code much more complicated.

I think in modern OSes this is solved by letting all those tasks run synchronously at the same priority, and give them all an equal time slice. But I don't have any mechanisms for threading, or an OS, so what would be the simplest way to solve this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:47:07.840

> 写入 MicroSD [...] 硬件 SPI FIFO 将溢出

**您**是 SPI 的**主人**：您控制 SPI 时钟。SPI Master 只有在有数据帧要传输时才会产生时钟信号——否则时钟处于空闲状态。对于读操作也是如此：SPI 总是同时读取和写入。

总之，如果你是主人，SPI**永远不会溢出。**硬件 FIFO 不会改变这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:02:07.773

“我认为在现代操作系统中，这是通过让所有这些任务以相同的优先级同步运行并给它们一个相同的时间片来解决的。但我没有任何线程机制或操作系统，所以会是什么？解决这个问题的最简单方法？”

操作系统中的多任务处理与中断不同。

我会布局以下内容：

用于读取和写入的 SPI 中断处理程序。您已经获得了需要注意的 SPI FIFO。您可能会因溢出和“水印”情况而中断。一定要处理好这些。阅读您的 MCU 用户指南了解详情。在软件中为您的中断处理程序提供自己的循环队列。给定 FIFO 的大小，适当调整队列的大小（这是基于硬件 FIFO 大小、您正在读取/写入的设备的页面大小和可用内存的选择。）

要从您的应用程序调用的状态机模块。这应该有自己的循环队列。状态机应该具有读取和写入数据的功能，以及“泵”功能（即从主循环定期调用的功能，也就是从主循环“调度”的功能）。

从 SPI 设备状态机读取和写入的“任务”也应该是状态机，它们还应该能够处理无法写入或没有数据准备好的情况。一般来说，不要阻塞！编写你的函数，以便如果他们需要的东西没有准备好/可用，他们就会退出，期待被调用，也就是稍后的“计划”。

所以一般流程是：

【要写的任务】->队列->【设备状态机】->队列->【SPI中断】->硬件队列->【硬件】->连线

线 -> [硬件 -> 硬件队列 -> [SPI 中断] -> 队列 -> [设备状态机] -> 队列 -> [要读取的任务]

如果没有关于您的架构的细节，很难提供更多细节。但是我已经在许多嵌入式设备驱动程序中成功地使用了这种模式。

# c++ - Objects cache with references counter

> ID：14663647
> 
> 赞同：3
> 
> 时间：2013-02-02T15:56:27.440
> 
> 标签：c++, qt, caching

I want to create a C++ objects factory that will create some objects by id. Each object must have a references counter. If an object with the same id is requested again, the same object must be returned if it's still in memory.

While there is something keeping a pointer to an object, this object will not be deleted. When there is no pointers to the object but pointer in factory cache, this object is placed in QCache and will be deleted if it will not be requested again for some time.

What's the best way to implement this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:21:29.837

这是我将如何做到的。

首先，`factory`该类将只保存指向它实例化的对象的**观察指针。**这样，当不存在对它们的拥有引用时，将立即删除对象，而不会将它们放入队列中。

然后，`factory`该类将返回**指向**它实例化的对象的共享指针，这些共享指针将指定一个**自定义删除器**，以便在销毁时从工厂的映射中注销已删除的对象。

假设您要实例化的对象有一个接受其 ID 作为参数的构造函数和一个`get_id()`返回其 ID 的函数，这里是工厂类的代码：

```
#include <memory>
#include <unordered_map>
#include <functional>

using namespace std;
using namespace std::placeholders;

template<typename T>
class factory
{

public:

    shared_ptr<T> get_instance(int id)
    {
        auto i = m_map.find(id);
        if (i == m_map.end())
        {
            return create(id);
        }
        else
        {
            shared_ptr<T> p = i->second.lock();
            if (p == nullptr)
            {
                p = create(id);
            }

            return p;
        }
    }

    shared_ptr<T> create_instance()
    {
        shared_ptr<T> p = create(nextId);
        nextId++;
        return p;
    }

    void unregister(T* p)
    {
        int id = p->get_id();
        m_map.erase(id);
        delete p;
    }

private:

    shared_ptr<T> create(int id)
    {
        shared_ptr<T> p(new T(id), bind(&factory::unregister, this, _1));
        m_map[id] = p;
        return p;
    }

    unordered_map<int, weak_ptr<T>> m_map;
    int nextId = 0;

}; 
```

这就是你将如何使用它：

```
struct A
{
    A(int id) : _id(id) { }
    int get_id() const { return _id; }
    int _id;
};

int main()
{
    factory<A> f;

    {
        shared_ptr<A> pA = f.get_instance(5);
        shared_ptr<A> pB = pA;
        // ...
        // The object with ID 5 will go out of scope and get unregistered
    }

    shared_ptr<A> pA = f.get_instance(3);
    shared_ptr<A> pB = f.get_instance(3); // This will return the existing object
    //
    // Instance with ID 3 will go out of scope and get unregistered
} 
```

# c# - 如何将 JSON 动态转换为正确的 DTO 类？

> ID：14663656
> 
> 赞同：2
> 
> 时间：2013-02-02T15:57:15.963
> 
> 标签：c#, casting, mono, type-conversion, dynamic-data

我有 JSON 数据，我想将其转换为正确的类型，然后对其进行处理。我正在使用 MONO 和 NewtonSoft 的 JSON 库。IE JSON 和对象必须匹配属性 1:1 才能转换为正确的 DTO。DTO 始终具有独特的属性。

Activator.CreateInstance() 和 Convert.ChangeType() 似乎都没有编译。

DTO：

```
class JSONDTO
{

}

class JSONCommandDTO : JSONDTO
{
    public string cmd;
}

class JSONProfileDTO : JSONDTO
{
    public string nick;
    public string name;
    public string email;
}

class JSONMessageDTO : JSONDTO
{
    public string msg;
} 
```

服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using Newtonsoft.Json;

class Server
{
    protected static List<JSONDTO> DTOList; 

    static void Main()
    {
        DTOList = new List<JSONDTO>();

        DTOList.Add(new JSONProfileDTO());
        DTOList.Add(new JSONCommandDTO());
        DTOList.Add(new JSONMessageDTO());

        // ...

    }

    protected static void OnMessage (string message)
    {
        dynamic rawObject;

        try
        {
            // Or try to convert to right DTO here somehow?
            rawObject = JsonConvert.DeserializeObject<dynamic>(message);
        } catch (JsonReaderException ex) {
            // Invalid JSON
            return;
        }

        int dtoCount = DTOList.ToArray().Length;
        int errCount = 0;

        JSONDTO DTOObject;

        foreach (var dto in DTOList.ToList()) {
            try {
                // Doesn't compile:

                // DTOObject = Activator.CreateInstance(dto.GetType(), rawObject);
                // DTOObject = Convert.ChangeType(rawObject, dto.GetType());
                break; // Match found!
            } catch (Exception ex) {
                // Didn't match
                errCount++;
            }
        }

        if (errCount == dtoCount) {
            // Right DTO was not found
            return;
        }

        if (DTOObject is JSONProfileDTO) {
            AssignProfile((JSONProfileDTO) DTOObject);
        }
        else if (DTOObject is JSONCommandDTO)
        {
            RunCommand((JSONCommandDTO) DTOObject);
        }
        // etc ..

    }

    protected static void RunCommand (JSONCommandDTO command)
    {
        string cmd = command.cmd;

        Console.WriteLine("command == " + cmd);
    }

    protected static void AssignProfile(JSONProfileDTO profile)
    {
        Console.WriteLine("got profile!");
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:57:08.207

我将假设您没有自己从 DTO 类创建序列化数据，因为在这种情况下，您可以简单地让它在输出中包含类型信息。有了这些信息，反序列化器将能够自动重新创建正确的实例。

由于这很可能不是您的情况，因此您需要解决以下问题：

1.  解析 JSON 并创建具有相应属性的对象
2.  确定哪个 DTO 实例与给定数据匹配
3.  创建 DTO 实例并使用在步骤 1 中创建的对象填充它

我假设您拥有或可以找到一个 JSON 反序列化器来处理第一步。

您可能有更简单的方法来执行第 2 步，但简单的方法只是比较 JSON 数据中可用的属性名称并找到完全匹配的 DTO。这可能看起来像这样（使用[Fasterflect](http://fasterflect.codeplex.com)协助反射位）：

```
var types = [ typeof(JSONCommandDTO), typeof(JSONProfileDTO), typeof(JSONMessageDTO) ];
var json = deserializer.GetInstance( ... );
var jsonPropertyNames = json.GetType().Properties( Flags.InstancePublic )
    .OrderBy( p => p.Name );
var match = types.FirstOrDefault( t => t.Properties( Flags.InstancePublic )
    .OrderBy( p => p.Name )
    .SequenceEqual( jsonPropertyNames ) );
if( match != null ) // got match, proceed to step 3 
```

第 3 步的代码可能如下所示：

```
// match is the DTO type to create
var dto = match.TryCreateInstance( json ); 
```

TryCreateInstance 是另一个 Fasterflect 助手——它会自动找到一个构造函数来调用和复制任何剩余的匹配属性。

我希望这能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:25:38.083

我让它工作。我必须添加带有 MissingMemberHandling.Error 的 JsonSerializerSettings 以便在 JSON 不适合对象时引发异常。我也错过了 Microsoft.CSharp 参考。

```
class Server
{
    protected static List<Type> DTOList = new List<Type>(); 

    static void Main()
    {
        DTOList.Add(typeof(JSONProfileDTO));
        DTOList.Add(typeof(JSONCommandDTO));
        DTOList.Add(typeof(JSONMessageDTO));
    }

    protected static void OnMessage (string rawString)
    {
        dynamic jsonObject = null;
        int DTOCount = DTOList.Count;
        int errors = 0;

        var settings = new JsonSerializerSettings ();

        // This was important
        // Now exception is thrown when creating invalid instance in the loop
        settings.MissingMemberHandling = MissingMemberHandling.Error;

        foreach (Type DTOType in DTOList) {
            try {
                jsonObject = JsonConvert.DeserializeObject (rawString, DTOType, settings);
                break;
            } catch (Exception ex) {
                errors++;
            }
        }

        if (null == jsonObject) {
            return;
        }

        if (errors == DTOCount) {
            return;
        }

        if (jsonObject is JSONProfileDTO) {
            AssignProfile((JSONProfileDTO) jsonObject);
        }
        else if (jsonObject is JSONCommandDTO)
        {
            RunCommand((JSONCommandDTO) jsonObject);
        }

    }

} 
```

# javascript - Jquery tablesorter sort via two fields

> ID：14663658
> 
> 赞同：0
> 
> 时间：2013-02-02T15:57:44.307
> 
> 标签：javascript, jquery, tablesorter

I have such html table: here: [http://jsfiddle.net/zrjaM/1/](http://jsfiddle.net/zrjaM/1/)

And such js for sorting:

```
$(document).ready(function() { 
    $(".sortable") 
    .tablesorter({sortList: [[4,0]], widgets: ['zebra']});
}); 
```

But i need to sort via 0-th column to.... i write:

```
$(document).ready(function() { 
        $(".sortable") 
        .tablesorter({sortList: [[0,0],[4,0]], widgets: ['zebra']});
    }); 
```

but it works strange...

Also i need to do that, tr's with price value (4-th column) are on top, but now, when i sort only by price - all is ok, but when via two columns, i could have tr's with price both in end or middle.... How to send them to top, and sort first via 0-th, then via sorter 0-th sort via 4-t column.... How to do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:34:23.497

@charlietfl 的解决方案即使没有添加`ZZZZZZZ`到空单元格的代码也可以工作。但是因为该演示使用的是原始版本的 tablesorter，所以必须删除第一个 tbody。

但是，因为看起来您正在使用我[的 tablesorter 分支](http://mottie.github.com/tablesorter/docs/)，它确实允许[对多个 tbodies 进行排序](http://mottie.github.com/tablesorter/docs/example-multiple-tbodies.html)，所以您需要做的就是将[`emptyTo`选项](http://mottie.github.com/tablesorter/docs/#emptyto)设置为`none`.

该`emptyTo`选项`bottom`默认设置为。因此，所有空单元格将始终排序到底部。第三列看起来根本没有排序的原因是因为该列中的所有链接都具有相同的文本。这是一个[演示](http://jsfiddle.net/Mottie/abkNM/363/)。

更新：也`tablesorter-headerSortDown`从第四列中删除，它仍在 css 中，但插件`tablesorter-headerDesc`现在正在使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:11:39.757

我想出了一个可能的解决方案。

首先检查没有价格的行，如果没有价格，则在第一列的项目名称之前添加一个隐藏的跨度，其中的文本`ZZZZZZZ`。这会强制所有`ZZZZZZZ`项目到底部，并且您会在第一行获得双重排序字母

```
$('tbody tr').each(function(){
    if( $.trim( $(this).find('td').eq(4).text())==''){
       $(this).find('td').eq(0).prepend('<span style="display:none">ZZZZZZZZ</span>')
       }
});

$(".sortable") .tablesorter({
      sortList: [[0,0],[4,0]], widgets: ['zebra']});
}); 
```

演示：http: [//jsfiddle.net/zrjaM/6/](http://jsfiddle.net/zrjaM/6/)

# python - Parse HTML using LXML in Python

> ID：14663659
> 
> 赞同：3
> 
> 时间：2013-02-02T15:57:44.113
> 
> 标签：python, html, parsing, html-parsing, lxml

I am trying to parse a website for

```
blahblahblah 
<a  href="THIS IS WHAT I WANT" title="NOT THIS">I DONT CARE ABOUT THIS EITHER</a>
blahblahblah 
```

(there are many of these, and I want all of them in some tokenized form). Unfortunately the HTML is very large and a little complicated, so trying to crawl down the tree might take me some time to just sort out the nested elements. Is there an easy way to just retrieve this?

Thanks!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T15:59:17.310

如果您只想要 href 的`a`标签，请使用：

```
data = """blahblahblah 
<a  href="THIS IS WHAT I WANT" title="NOT THIS">I DONT CARE ABOUT THIS EITHER</a>
blahblahblah"""

import lxml.html
tree = lxml.html.fromstring(data)
print tree.xpath('//a/@href')

# ['THIS IS WHAT I WANT'] 
```

# c++ - Overloaded '+' Operator Not Compiling

> ID：14663663
> 
> 赞同：2
> 
> 时间：2013-02-02T15:58:05.687
> 
> 标签：c++

I'm trying to understand the concept of operator overloading by writing some simple, silly tests. I thought this might be useful as this helps me understand C++ better.

Why does this example implementing a concatenation operator of `Animal` class and `std::string` not compile? G++ gives me the following error:

> extra qualification 'Animal::' on member 'operator+' [-fpermissive]

This is the code:

```
#include <iostream>
using namespace std;

class Animal {

public:
    string _type;
    string _name;
    string _sound;

    Animal & Animal::operator+(const string & o);
};

Animal & Animal::operator+(const string & o) {
    cout << "plus operator \n";
    this->_name=o;
    return *this;
}

int main( int argc, char ** argv ) {
    Animal a;

    a+"hhh";
    cout<<a._name;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T15:59:54.097

```
Animal & Animal::operator+(const string & o); 
```

是无效的。它应该是：

```
Animal & operator+(const string & o); 
```

此外，您对简单加法运算符的实现会导致对其中一个操作数的修改。对于加法运算符来说，这**绝不**是一件好事。

例如：

```
int a, b = 5, c = 3;
a = b + c; 
```

这不会改变任何一个操作数的值；它离开`b`并`c`保持不变，并返回一个完全不同的实例。

因此，您不应重载加法运算符，而应重载加法赋值复合运算符 ( `+=`)：

```
Animal & operator+=(const string & o); 
```

当然，更改实现并相应地调用它：

```
Animal & Animal::operator+=(const string & o) {
    cout << "plus operator \n";
    this->_name=o;
    return *this;
} 
```

和：

```
a += "hhh"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T16:00:10.523

类内部的声明`operator+`不需要限定，正是因为它是在类中声明的：

```
class Animal {
  // ...
  Animal& operator+(const string& o);
} 
```

*当您定义*函数时，此限定是必要的，因为您在类之外定义它 - 编译器需要知道该函数属于哪个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:00:09.797

原型中不需要`Animal::`，因为它已经在`Animal`类中了。只需使用：

```
Animal & operator+(const string & o); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T16:00:39.213

`Animal::`限定应在成员函数的定义*中*使用，而不是在*声明*中。因此，将您的运营商声明更改为：

```
Animal & operator+(const string & o); 
```

# powershell - powershell调用表达式问题

> ID：14663672
> 
> 赞同：1
> 
> 时间：2013-02-02T15:59:04.340
> 
> 标签：powershell

我有一个使用 7z 提取文件的命令，它在 DOS 命令行中工作。命令是：

```
"C:\Documents and Settings\e.DEV\My Documents\7z.exe" x -o"C:\Documents and Settings\e.DEV\My Documents\utils" "C:\Documents and Settings\e.DEV\My Documents\rsasecureidtoken411.zip" 
```

现在我必须在 powershell 中运行上面的命令，我使用`call operator`& 来调用它（在 Powershell 命令行中），但它似乎有一些错误。当我按下回车键时，它只在下一行显示*>> ，我必须按下 Ctrl + c 来停止命令。*

```
PS C:\> & "C:\Documents and Settings\e.DEV\My Documents\7z.exe" x -o"C:\Documents and Settings\e.DEV\My Documents\utils" "C:\Documents and Settings\e.DEV\My Documents\RSASecurIDToken411.zip"
>>
>>
>>
>>
>>
>>
PS C:\> 
```

我也尝试过`invoke-expression`，但仍然无法使其工作。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:24:42.983

试试这个：

```
[string]$pathToZipExe = "C:\Documents and Settings\e.DEV\My Documents\7z.exe"
[Array]$arguments = "x", "-oC:\Documents and Settings\e.DEV\My Documents\utils", "C:\Documents and Settings\e.DEV\My Documents\RSASecurIDToken411.zip"

& $pathToZipExe $arguments 
```

# wpf - 如何通过绑定清除列表框的选定项

> ID：14663675
> 
> 赞同：2
> 
> 时间：2013-02-02T15:59:34.580
> 
> 标签：wpf, mvvm, listbox, selection, itemscontrol

我有一个 WPF`ListBox`通过`ItemsSource`. 选中的项目以双向模式绑定到 VM 上的属性。当我为集合中不存在的模型属性分配值时，我希望在 UI 上“取消选择”所选项目。

那可能吗？如果没有，是否有清除所选项目的替代方法？

请记住，我正在使用 MVVM 模式，因此我无法从代码中访问列表本身。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T21:51:56.043

我将假设以下内容：

1.  列表框的 ItemsSource 属性绑定到 ViewModel 中的某个列表（即 VM_List）。
2.  列表框的 SelectedItem 属性通过 TwoWay 绑定绑定到 ViewModel 中的某个属性（即 VM_SelectedItem）。

如果以上内容不准确，请提供有关您的实施的更多信息。

您的视图模型应该有一些看起来像这样的代码：

```
public class VM : INotifyPropertyChanged
{
    private ObservableCollection<Student> vmlist = new ObservableCollection<Student>();
    private Student vmselecteditem;

    public event PropertyChangedEventHandler PropertyChanged;

    public VM()
    {
        PropertyChanged = new PropertyChangedEventHandler(VM_PropertyChanged);
    }

    private void VM_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
    }

    public ObservableCollection<Student> VM_List
    {
        get
        {
            return vmlist;
        }
    }

    public Student VM_SelectedItem
    {
        get
        {
            return vmselecteditem;
        }
        set
        {
            vmselecteditem = value;
        }
    }

    public void AddNewStudent(Student NewStudent)
    {
        VM_SelectedItem = null;
        PropertyChanged(this, new PropertyChangedEventArgs("VM_SelectedItem"));
        VM_SelectedItem = NewStudent;
        SaveStudent();
        PropertyChanged(this, new PropertyChangedEventArgs("VM_SelectedItem"));
        //The last line is optional, if you want to select the new student just added.
    }

    private void SaveStudent()
    {
        //A fake operation to save the student.
        //To stick with MVVM, the save function should be in the model
        //And this function should just call the one in the model.
        BackgroundWorker b = new BackgroundWorker();
        b.DoWork += new DoWorkEventHandler(b_DoWork);
        b.RunWorkerCompleted += new RunWorkerCompletedEventHandler(b_RunWorkerCompleted);
        b.RunWorkerAsync();
    }

    private void AddStudentToList()
    {
        VM_List.Add(VM_SelectedItem);
    }

    private void b_DoWork(object sender, DoWorkEventArgs e)
    {
        //Simulating a long save operation
        System.Threading.Thread.Sleep(2000);
    }

    private void b_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        AddStudentToList();
    }
} 
```

# regex - 正则表达式 - 如何将空格添加到固定数量的数字？

> ID：14663693
> 
> 赞同：-1
> 
> 时间：2013-02-02T16:00:46.433
> 
> 标签：regex

我需要为银行帐号创建一个正则表达式。据我所知：

```
Regex(@"^([0-9]{26})$"); 
```

这只接受 26 个数字。我希望它接受 26 个数字和无限数量的空格，以便用户可以随意格式化这个字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:10:51.187

试试这个正则表达式

```
^\s*([0-9]\s*){26}$ 
```

# mysql - 如何将时间间隔代码添加到 SQL

> ID：14663695
> 
> 赞同：0
> 
> 时间：2013-02-02T16:00:55.030
> 
> 标签：mysql, sql

`SELECT COUNT(*) AS cnt FROM ( (SELECT 'used' FROM b_names_1) UNION ALL (SELECT 'used' FROM b_names_2)) AS t WHERE 'used' = 1`

这个码字很好..

但我想按时间间隔对结果进行排序，所以当我试图在底部添加这一行时，它不起作用：

```
AND registration_date_time >= STR_TO_DATE( '2013-01-28 00:00:00', '%Y-%m-%d %H:%i:%s' ) AND registration_date_time < STR_TO_DATE( '2013-02-02 00:00:00', '%Y-%m-%d %H:%i:%s' ) 
```

这段代码看起来像这样：

```
SELECT COUNT(*) AS cnt FROM ( (SELECT 'used' FROM b_names_1) UNION ALL
(SELECT 'used' FROM b_names_2)) AS t
WHERE 'used' = 1 AND registration_date_time >= STR_TO_DATE( '2013-01-28 00:00:00', '%Y-%m-%d %H:%i:%s' ) AND registration_date_time < STR_TO_DATE( '2013-02-02 00:00:00', '%Y-%m-%d %H:%i:%s' ) 
```

它给了我以下错误：#1054 - 'where 子句'中的未知列'registration_date_time'

知道如何正确地将日期代码实现到 SQL 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:06:58.887

这些列必须来自**某个**地方，将它们添加到内部查询中：

```
SELECT COUNT(*) AS cnt 
FROM ( 
    (SELECT 'used', registration_date_time FROM b_names_1) 
    UNION ALL
    (SELECT 'used', registration_date_time FROM b_names_2)
) AS t
WHERE 'used' = 1 
AND registration_date_time >= STR_TO_DATE( '2013-01-28 00:00:00', '%Y-%m-%d %H:%i:%s' ) 
AND registration_date_time < STR_TO_DATE( '2013-02-02 00:00:00', '%Y-%m-%d %H:%i:%s' ) 
```

# codeigniter - codeigniter：复杂的 mysql 选择不再起作用

> ID：14663696
> 
> 赞同：0
> 
> 时间：2013-02-02T16:01:07.220
> 
> 标签：codeigniter

我有这个工作正常的简单代码：

```
$sQuery = $this->db->query("SELECT domain FROM domainmarket.inventory_domains"); 
```

但是当我使用这个

```
$sQuery = $this->db->query("SELECT
                              invDom.domain,
                              sldPhr.phrase1
                            FROM domainmarket.inventory_domains invDom
                              INNER JOIN lux.domain_info domInfo
                                ON invDom.domain = domInfo.domain
                              JOIN lux.sld_stats sldStats
                                ON domInfo.sld = sldStats.sld
                              JOIN lux.sld_phrase sldPhr
                                ON sldPhr.sld = sldStats.sld"); 
```

或这个

```
$sQuery = $this->db->query("SELECT
                              invDom.domain,
                              sldPhr.phrase1
                            FROM domainmarket.inventory_domains invDom
                              INNER JOIN lux.domain_info domInfo
                                ON invDom.domain = domInfo.domain
                              JOIN lux.sld_stats sldStats
                                ON domInfo.sld = sldStats.sld
                              JOIN lux.sld_phrase sldPhr
                                ON sldPhr.sld = sldStats.sld
                            WHERE SOUNDEX(SUBSTRING_INDEX(invDom.domain, ".", 1)) = SOUNDEX('love')
                            ORDER BY invDom.appraised_price DESC"); 
```

它已经给出了这个错误：

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to
allocate 32 bytes) in
C:\xampp\htdocs\ci_test\system\database\drivers\mysql\mysql_result.php
on line 152 
```

或者

> 错误号：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行 SELECT invDom.domain, sldPhr.phrase1 FROM domainmarket.inventory_domains invDom 附近的 ' 1) ) = SOUNDEX('love') ORDER BY invDom.app' 附近使用正确的语法INNER JOIN lux.domain_info domInfo ON invDom.domain = domInfo.domain JOIN lux.sld_stats sldStats ON domInfo.sld = sldStats.sld JOIN lux.sld_phrase sldPhr ON sldPhr.sld sldStats.sld WHERE SOUNDEX(SUBSTRING_INDEX(invDom.domain,, 1 )) = SOUNDEX('love') ORDER BY invDom.appraised_price DESC 文件名：C:\xampp\htdocs\ci_test\system\database\DB_driver.php 行号：33

分别。不过，这两个代码在 heidiSQL 中都可以正常工作。为什么我在 codeigniter 中出现此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:30:02.763

这是一个引用问题。您将查询包装起来`"`，然后在查询中使用它们。

```
$sQuery = $this->db->query("
SELECT invDom.domain, sldPhr.phrase1 FROM domainmarket.inventory_domains invDom
INNER JOIN lux.domain_info domInfo ON invDom.domain = domInfo.domain
JOIN lux.sld_stats sldStats ON domInfo.sld = sldStats.sld
JOIN lux.sld_phrase sldPhr ON sldPhr.sld = sldStats.sld
WHERE SOUNDEX( SUBSTRING_INDEX(invDom.domain, '.', 1) ) = SOUNDEX('love')
ORDER BY invDom.appraised_price DESC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:20:54.027

不要在查询中使用双逗号，而是使用单逗号，因为它是冲突的。

```
SELECT
  invDom.domain,
  sldPhr.phrase1
FROM domainmarket.inventory_domains invDom
  INNER JOIN lux.domain_info domInfo
    ON invDom.domain = domInfo.domain
  JOIN lux.sld_stats sldStats
    ON domInfo.sld = sldStats.sld
  JOIN lux.sld_phrase sldPhr
    ON sldPhr.sld = sldStats.sld
WHERE SOUNDEX(SUBSTRING_INDEX(invDom.domain, '.', 1)) = SOUNDEX('love')
ORDER BY invDom.appraised_price DESC 
```

# codeigniter - codeigniter 2.1.3 多语言网站如何？

> ID：14663697
> 
> 赞同：1
> 
> 时间：2013-02-02T16:01:21.677
> 
> 标签：codeigniter, multilingual

codeigniter 2.1.3 多语言网站如何？

我有 /language/english 和 /language/french

这个法语 $lang['user_login'] = 'Connecté';

这个英文 $lang['user_login'] = 'Login';

语言文件称为 user_lang.php

在控制器构造器上我有这个：

```
$this->load->helper('url');         
    $this->load->helper('language'); 
```

在函数索引上我有这个：

```
public function index()
{

           $this->lang->load('user', 'french'); 
```

……

在视图上我有以下几点：

```
<div class="pageTitle"><?php echo $this->lang->line('user_login');?></div>

/*
| -------------------------------------------------------------------
|  Auto-load Language files
| -------------------------------------------------------------------
| Prototype:
|
|   $autoload['language'] = array('lang1', 'lang2');
|
| NOTE: Do not include the "_lang" part of your file.  For example
| "codeigniter_lang.php" would be referenced as array('codeigniter');
|
*/

$autoload['language'] = array('user'); 
```

问题是该网站正在访问 user_lang.php 以获取登录一词

但只进入英文文件

```
 $this->lang->load('user', 'french'); 
```

我在上面做这个，它不工作从不读取法语文件

我还有一个问题，我怎样才能让它工作，这样我就可以用锚或href切换语言

谢谢佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:48:07.290

我会创建一个函数，如：

```
function language($language){

        $language = urldecode($language);

        switch($language){

            case "French":
                $this->session->set_userdata('lang_id', 2);
                $this->session->set_userdata('lang_name', 'french');
                redirect('/', 'refresh');

            break;

            case "Russian":
                $this->session->set_userdata('lang_id', 3);
                $this->session->set_userdata('lang_name', 'russian');
                redirect('/', 'refresh');

            break;

            default: //default is English
                $this->session->set_userdata('lang_id', 1);
                $this->session->set_userdata('lang_name', 'english');
                redirect('/', 'refresh');

            break;  

        }

    } 
```

我会更改导航到的语言：http: [//www.domain.com/controller/language/French](http://www.domain.com/controller/language/French)

然后在每个控制器或每个控制器类的构造函数中，我会检查 lang_id 和 lang_name 会话。如果设置了会话，我会使用它们。否则配置中的默认语言将自动加载。例如：

```
$lang = $this->session->userdata('lang_name');
if(!isset($lang)){ //load default language 
                $this->lang->load('home');
                $data = array(
                    'title' => lang('page_title')
                );
//etc etc

            }else{ //load language from session
                $this->lang->load('home', $this->session->userdata('lang_name'));

                $data = array(
                    'title' => lang('page_title')
                );      
//etc etc       
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:30:08.473

在我的欢迎控制器中

```
public function french()
    {
        $this->session->set_userdata('lang_id', 2);
        $this->session->set_userdata('lang_name', 'french');
         $DContent['page_details'] = array('page_title' => 'Index of onplans');
         $Dheader = array();
         $Dsidebar = array();
         $Dfooter = array();
         $Dmeta = array('meta_title'=>'Welcome to onplans','meta_descricao'=>'onplans');

         $this->template->write_view('meta', 'html/meta',  $Dmeta, true);
         $this->template->write_view('header', 'html/header', $Dheader, true);
         $this->template->write_view('content', 'onplans/frenchset', $DContent,true);
         $this->template->write_view('sidebar', 'html/sidebar');
         $this->template->write_view('footer', 'html/footer');
         $this->template->render();

    }

    public function english()
    {
        $this->session->set_userdata('lang_id', 3);
        $this->session->set_userdata('lang_name', 'english');
         $DContent['page_details'] = array('page_title' => 'Index of onplans');
         $Dheader = array();
         $Dsidebar = array();
         $Dfooter = array();
         $Dmeta = array('meta_title'=>'Welcome to onplans','meta_descricao'=>'onplans');

         $this->template->write_view('meta', 'html/meta',  $Dmeta, true);
         $this->template->write_view('header', 'html/header', $Dheader, true);
         $this->template->write_view('content', 'onplans/englishset', $DContent,true);
         $this->template->write_view('sidebar', 'html/sidebar');
         $this->template->write_view('footer', 'html/footer');
         $this->template->render();

    } 
```

在称为用户的目标控制器上

```
$this->load->helper('url');

        $this->load->helper('language');

        print_r('lang_session'.$this->session->userdata('lang_name'));

        $lang = $this->session->userdata('lang_name');

        if(!isset($lang)){ //load default language 

                $this->lang->load('user');

            }else{ //load language from session
 print_r('lang :'.$this->session->userdata('lang_name'));
                $this->lang->load('user',$this->session->userdata('lang_name')); //);    
            } 
```

现在它的工作

# r - 在 R 2.15.2 上安装 Ime4 和 ggplot2 时出现问题

> ID：14663702
> 
> 赞同：6
> 
> 时间：2013-02-02T16:02:17.700
> 
> 标签：r, ggplot2, lme4

我在安装 lme4 和 ggplot 包时遇到了困难

我尝试通过选择 CRAN 镜像（尝试了几个）然后选择软件包来安装它们，并且还尝试了以下方法；

```
install.packages("lme4",repos="http://r-forge.r-project.org") 
```

和

```
install.packages("ggplot2", dependencies=TRUE) 
```

但是我尝试调用这些包我收到警告消息

```
package ‘lme4’ is not available (for R version 2.15.2) 
```

或者

```
package ‘ggplot2’ is not available (for R version 2.15.2) 
```

对于安装这些软件包的问题，​​我能找到的唯一答案建议将 R 升级到最新版本，但我使用的是 2.15.2，我认为这是最新版本。

有没有其他人有这个问题？

任何帮助将不胜感激！！

谢谢。

连

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:47:01.143

我遇到了完全相同的问题。这是为我解决的问题：

为方便起见，我在我的`Rprofile.site`文件中添加了一个默认的 cran 镜像：

```
local({r <- getOption("repos")
   r["CRAN"] <- "http://cran.stat.sfu.ca/"
   options(repos=r)}) 
```

然后按此顺序安装软件包即可：

```
install.packages("Matrix")
install.packages("nlme")
install.packages("minqa")
install.packages("RcppEigen")
install.packages("lme4",repos="http://lme4.r-forge.r-project.org/repos")
install.packages("ggplot2", dependencies=TRUE) 
```

希望它也适用于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:39:46.220

这些包应该可以正常工作，也许可以尝试更多的镜像，例如奥地利的那个。虽然有些包已经被 CRAN 抛出，例如 colorout 包已经离开 CRAN 有一段时间了。解决方案是手动从 CRAN 下载包，并在本地安装。

# singleton - Websphere 集群中的集群范围的单例

> ID：14663703
> 
> 赞同：18
> 
> 时间：2013-02-02T16:02:34.327
> 
> 标签：singleton, websphere, cluster-computing, apache-camel, spring-integration

我需要在 WAS ND 8.0 集群下使用 Apache Camel（或 Spring Integration）运行组件。它们都在启动时运行一些线程，并在正常关闭时停止它们。提供 WAS 管理的线程池没有问题。但是这些线程必须同时在*单个*集群的节点上运行。此外，它必须是高可用的，即当活动节点下降时切换到其他节点。

我找到的解决方案是 WAS Partitioning Facility。它需要额外的扩展部署许可证。这是唯一的方法，还是有某种方法可以仅使用 Network Deployment 许可证来实现？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T15:05:48.153

我认为没有一个功能可以解决这个有趣的要求。我可以想象一个“技巧”：

1.  Timer EJB 在队列上发送消息（假设每分钟 1 个）
2.  配置具有高可用性和无可扩展性的服务集成总线 (SIB)，因此 HA 管理器确保只有一个消息传递引擎 (ME) 处于活动状态。
3.  为高性能和低资源消耗创建一个不可靠的队列。
4.  应将激活规范配置为仅侦听本地 ME。
5.  MDB 实现以下逻辑：当消息到达时，它检查单例线程是否处于活动状态，否则启动线程。

是否有意义？

# javascript - 在Javascript中使用带引号的字符串中的变量？

> ID：14663706
> 
> 赞同：0
> 
> 时间：2013-02-02T16:02:47.507
> 
> 标签：javascript

在 php 中，您可以在双引号内使用变量。例如：

```
$dog = "scooby";
echo "$dog $dog doo"; 
```

是否可以在 javascript 中做类似的事情**而不**将字符串分成几部分：

```
var dog = "scooby";
alert($dog + " " + $dog + " doo"); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:05:43.607

不，你不能。Javascript没有[字符串插值](https://en.wikipedia.org/wiki/String_interpolation)，所以你必须连接：

```
var dog = "fido"
dog + " " + dog + " doo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:04:35.000

不，因为 JavaScript 中的变量没有转义字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T16:17:06.857

在本地，不可能。但是，如果您不介意使用库，则可以使用[sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)的这个 Javascript 实现。

代替：

```
var dog = "scooby";
alert($dog + " " + $dog + " doo"); 
```

你会使用：

```
alert(sprintf('%s %s doo', 'dog', 'dog')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T16:10:20.103

您需要做的就是使用字符串替换

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

如果您希望根据令牌完成它，您需要做更多的工作：

```
function replacer(match, p1,  string){
  // p1 is the first group (\w+)
  var stuff = {
     dog: "woof", 
     cat: "meow"
  };
  return stuff[p1] || "";
};
newString = "A dog says $dog. A cat says $cat.".replace(/\$(\w+)/g, replacer); 
```

结果是

```
"A dog says woof. A cat says meow." 
```

编辑：实际上，如果您想对全局变量进行一种字符串插值，这也很容易，尽管*我不推荐这样做*。 **请不要**，除非你有一个非常好的理由。如果你说你有充分的理由，我可能不会相信你。我的第一个例子，我给一个特定的字典/对象搜索，*要*好得多。 *请不要仅仅因为这有效而污染全局命名空间！*

```
var dog ="woof";
var cat = "meow";
function replacer(match, p1,  string){
  return window[p1] || "";
};
newString = "A dog says $dog. A cat says $cat.".replace(/\$(\w+)/g, replacer); 
```

# c# - C# winform：从其他表单访问公共属性以及静态和公共属性之间的区别

> ID：14663710
> 
> 赞同：7
> 
> 时间：2013-02-02T16:03:36.257
> 
> 标签：c#, winforms, public

我试图了解静态属性和公共属性之间的区别。但是当我尝试以其他形式访问我的公共财产“测试”时，它显示为“空”。

继承人Form1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private string _test;

    public string Test
    {
        get { return _test; }
        set { _test = value; }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        _test = "This is a test";
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.Show();
    }
} 
```

这是表格2：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        Form1 frm1 = new Form1();
        label1.Text = frm1.Test;
    }
} 
```

为了检查 Form1 中 'Test' 的值，我在这一行设置了一个断点：

```
label1.Text = frm1.Test; 
```

但该值为“空”。

请帮助我如何访问其他表单的公共属性。

顺便说一句，我试图让这个公共财产成为“公共静态”。我可以使用这个来访问它：

```
Form1.Test 
```

但我注意到我可以从我不想发生的 Form2 中更改“测试”值。这就是为什么我试图使用公共财产但没有运气的原因。有人可以澄清我这些事情。感谢您的所有帮助！

```
EDIT: (For follow up question) 
```

John Koerner 爵士的回答是对我问题的最佳回答。但我有一个后续问题，我试图将这些“测试”属性设为“静态”，我注意到即使我将此属性设为静态或公共属性，它仍然可以在 Form2 中编辑。为了让自己清楚，这里有一个示例：

```
public partial class Form2 : Form
{
    private Form1 f1;
    public Form2(Form1 ParentForm)
    {
        InitializeComponent();
        f1 = ParentForm;
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        label1.Text = f1.Test;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        f1.Test = "This test has been changed!";

        this.Close();
    }
} 
```

Form2 关闭后，我尝试在 Form1_Load 中再次中断以检查“Test”的值，它被更改了！如何将 Form1 中的公共属性设置为在 Form2 中只读且无法编辑？请向我澄清。非常感谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T16:06:59.830

您的属性是一个实例变量，因此不同实例的值可能不同`Form1`。

如果您尝试从父窗体访问实例变量，最简单的方法是将 Form1 传递给 Form2 的构造函数。

```
public partial class Form2 : Form
{
    private Form1 f1;
    public Form2(Form1 ParentForm)
    {
        InitializeComponent();
        f1 = ParentForm;
    }

    private void Form2_Load(object sender, EventArgs e)
    {
        label1.Text = f1.Test;
    }
} 
```

然后当你从 Form1 创建一个新的 Form2 时，你可以这样做：

```
Form2 frm2 = new Form2(this); 
```

如果您希望您的属性是只读的，您可以简单地不指定设置器：

```
public string Test
{
    get { return _test; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:51:34.867

使用此方法“静态”

一开始控制标签属性Modifiers=Public

在下面的程序代码中

```
public static Form1 frm1 = new Form1();
public static Form2 frm2 = new Form2(); 
```

在下面的 Form1 代码中

```
Program.frm2.show(); 
```

在下面的 Form2 代码中

```
label1.Text=Program.frm1.text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:07:37.070

不是您的`frm1`主要表单对象。它是新创建的对象，属性`Test`在加载时初始化（在`Form1_Load`事件处理程序中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T16:08:56.777

的第一个实例`Form1`显示 的实例`Form2`，然后`Form2`创建的*另一个*实例`Form1`。这可能有效，但您`_test`在[`Form.Load`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件中设置，其中：

> 在第一次显示表单之前发生。

您没有显示`Form1`您尝试从中读取的实例`Test`，因此它的`Load`事件不会发生并且`Test`仍然存在`null`。

您可以添加构造函数重载或属性来传递 @JohnKoerner 提到的 Form1 引用，但我更愿意只传递所需的变量，甚至可能封装在一个事件中，以减少耦合。`Form2`通常不需要知道所有关于`Form1`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-02T16:14:18.387

***上市***

类型或成员可以由同一程序集或引用它的另一个程序集中的任何其他代码访问。

***静止的***

类上的 static 修饰符意味着该类不能被实例化，并且它的所有成员都是静态的。无论创建了多少个其封闭类型的实例，静态成员都有一个版本。

静态类与非静态类基本相同，但有一个区别：静态类不能被外部实例化。换句话说，您不能使用 new 关键字来创建类类型的变量。因为没有实例变量，所以您可以使用类名本身来访问静态类的成员。

但是，有一个静态构造函数。任何类都可以有其中之一，包括静态类。它们不能直接调用并且不能有参数（除了类本身的任何类型参数）。在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。看起来像这样：

静态类 Foo() { 静态 Foo() { Bar = "fubar"; }

```
public static string Bar { get; set; } 
```

}

静态类通常用作服务，您可以像这样使用它们：

MyStaticClass.ServiceMethod(...);

# html - 960.gs 框架 + 带有奇数成员的页脚

> ID：14663711
> 
> 赞同：0
> 
> 时间：2013-02-02T16:03:37.840
> 
> 标签：html, css, 960.gs

我在 960GS 框架的帮助下在 CSS 中设置样式时遇到了布局问题。

该页面的宽度为 960 像素，这是该框架所要求的，因此这不是真正的问题..

我似乎无法在指定为页脚的区域中放置奇数个元素（例如：）。

“页脚”有一个包装器 div，其样式根据有关如何将 960.gs 框架与自定义布局一起使用的各种示例进行样式设置。我在该包装 div 上使用 container_12 类，这意味着我应该有 12 列可以使用，但是，我的页脚中有奇数个元素（正如我之前所说的），这意味着我可以'并没有真正将元素除以可用的列数，此外，其中一些 div 完全采用 960.gs 类在宽度方面定义的内容，虽然我可以“破解”一些定位，但我不能真的让这些元素均匀分布:(

我应该将其他容器类（16 或 24）与之前使用的其他 container_12 类结合使用吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:12:12.497

您是否查看过用于 960GS 框架的后缀和前缀？[更多信息](http://sixrevisions.com/web_design/the-960-grid-system-made-easy/) 如果这不起作用，那么最好使用 16 或 24 网格，但你不能将它们混合在一起。例如，如果您选择 16，则所有网格都必须设置为 16 网格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:15:14.917

还可以选择为页脚中的任何元素创建特定的 div。然后，您可以简单地将它们放入一个大的页脚 div 中，然后将每个单独的元素 div 放入 12 列中，定位为 inline-block 并与中心对齐。

这将使您在页脚中拥有的内容部分的数量上有很大的灵活性，而不必担心将内容放入其他限制列中。

# python - python中PIL无法识别mjpeg流中保存的jpeg文件

> ID：14663716
> 
> 赞同：1
> 
> 时间：2013-02-02T16:03:52.607
> 
> 标签：python, image, jpeg, python-imaging-library, mjpeg

我正在尝试从网络摄像头的 MJPEG 流中获取有效的 JPEG 帧。我成功地将它写入磁盘，并且可以在 Infranview 之类的程序中打开它，但 Python 和其他图形程序不认为它是有效的 JPEG 文件。我编写了这个函数，将其捕获并将其写入磁盘

```
def pull_frame(image_url,filename):
    flag = 0
    # open the url of the webcam stream
    try:
            f = urllib.urlopen(image_url)
    except IOError:
            print "uh oh"
    else:
            # kill first two lines
            try:
                    null = f.readline()
            except:
                    print "duh"
            null = f.readline()
            pop = f.readline()
            # this pulls the length of the content
            count = pop[16:] # length of content.
            print "Size Of Image:" + count
            # read just the amount of the length of content
            if int(count):
                    s = f.read(int(count))
                    flag = 1
                    # write it to a file name
                    p = file(filename,'wb')
                    p.write(s)
                    p.close() 
```

所以我弄坏了JPEG，我什至尝试了一个笨拙的解决方法，尝试使用FFMPEG从损坏的jpeg中制作一个有效的PNG，它从comamnd行而不是从子进程中工作。python有没有办法用正确的jpeg头从mjpeg蒸汽中拉出这个jpeg？

这是一个camera1.jpg的链接，它是该例程中保存的数据的示例，该例程无法识别并且也没有缩略图（尽管infraview可以将其打开为jpg） [http://www.2shared.com/photo/的Zh2XeD/camera1.html](http://www.2shared.com/photo/OfZh2XeD/camera1.html)

# android-widget - 从主屏幕小部件打开 QuickContactBadge Android 4+

> ID：14663717
> 
> 赞同：-1
> 
> 时间：2013-02-02T16:04:07.197
> 
> 标签：android-widget, android-contacts

我正在尝试从主屏幕小部件显示快速联系人徽章，该小部件以网格布局显示最喜欢的联系人图片。[我在这里查看](https://stackoverflow.com/questions/3435239/how-to-display-quickcontact-card-from-widget)了提示，但我仍然无法弄清楚。

当我点击一个联系人时，我总是收到以下错误：

`java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gridwidget/com.example.gridwidget.ContactBadge}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.contacts.action.QUICK_CONTACT`

尽管我正在调用“ContactsContract.QuickContact.showQuickContact();” 从一个活动。

这种意图导致了问题：`com.android.contacts.action.QUICK_CONTACT`

我试图将它添加到我的清单文件中但没有成功：

```
<activity
        android:name="com.example.gridwidget.ContactBadge"
        android:label="@string/title_activity_contact_badge"
        android:theme="@android:style/Theme.NoDisplay" >

         <intent-filter>
            <action android:name="com.android.contacts.action.QUICK_CONTACT" />
            <action android:name="com.example.gridwidget.BADGE_ACTION" />
        </intent-filter>
</activity> 
```

有什么建议吗？因为我正在展示一个集合，所以我使用了[这里](http://developer.android.com/guide/topics/appwidgets/index.html)`RemoteViewsService`描述的模式

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:46:28.640

我发现了问题。我传递给的 URI`ContactsContract.QuickContact.showQuickContact()`格式错误。

它现在工作正常

# mysql - 根据相关表上的最大值更新记录

> ID：14663719
> 
> 赞同：1
> 
> 时间：2013-02-02T16:04:17.457
> 
> 标签：mysql, sql, sql-update

我有 2 张桌子

表A如下：

```
ID NAME VALUE
1  abc  0
2  lmn  0
3  xyz  0 
```

表B如下：

```
ID SUB_GROUP   VALUE
1  Category 1  10
1  Category 2  4
1  Category 3  8
1  Category 4  12
3  Category 1  6
3  Category 2  14
3  Category 3  0
3  Category 4  3 
```

我想通过匹配 ID 列将其 VALUE 列设置为表 B 中的最大 VALUE 来更新表 A，但仅适用于 Category2 或 Category 3 中表 B 中的值

MySQL 查询可能是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:22:19.163

```
UPDATE  tableA a
        INNER JOIN
        (
            SELECT  ID, MAX(Value) max_val
            FROM    tableB
            WHERE   SUB_GROUP IN ('Category 2','Category 3')
            GROUP   BY ID
        ) b ON a.ID = b.ID
SET a.VALUE = b.Max_Val 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/97ef6/1)

# oracle - 将文件发送到 Oracle Data Integrator 中的 Windows 服务器目录

> ID：14663721
> 
> 赞同：0
> 
> 时间：2013-02-02T16:04:38.260
> 
> 标签：oracle, oracle-data-integrator

我有一个接口，它是一个数据库到文件接口。

处理完记录后，我将生成的文件放在 Unix 目录路径上。我的要求是将输出文件发送到 Windows Server 目录而不是 Oracle Data Integrator 中的 Unix。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T18:10:07.977

这里有（2）个选项：

1.  在 ODI/Unix 服务器上生成文件后，使用`[OdiFtpPut]`步骤将文件 FTP 到 Windows 服务器
2.  编写将驻留在 ODI/Unix 服务器上的 Java 应用程序，生成文件后，使用 OS 命令步骤调用 Java 应用程序（使用参数）以执行文件移动或 FTP

# android - 使用密码关闭android服务

> ID：14663722
> 
> 赞同：0
> 
> 时间：2013-02-02T16:04:48.907
> 
> 标签：android, passwords, android-service

我正在开发一个在后台运行的服务的 android 应用程序，我需要确保用户只有在输入密码时才会关闭应用程序/服务（例如市场上的应用程序锁定仅适用于服务和应用程序）。有关如何实现此类功能的任何想法建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:12:35.067

在 android 2.3 上，用户不可能杀死您的应用程序，但从 Android 4.0 和设备管理员开始，它是：合理的。看看卡巴斯基的家长控制应用程序。

# android - 列表视图过滤器 Android

> ID：14663725
> 
> 赞同：96
> 
> 时间：2013-02-02T16:05:17.657
> 
> 标签：android, listview, search, filter, android-listview

我在android中创建了一个列表视图，我想在列表上方添加编辑文本，当用户输入文本时，列表将根据用户输入进行过滤

谁能告诉我是否有办法过滤android中的列表适配器？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-02-02T16:16:23.250

在 .xml 布局文件中的列表视图顶部添加一个 EditText。在你的活动/片段中..

```
lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

// Adding items to listview
adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name,    products);
lv.setAdapter(adapter);       
inputSearch.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        // When user changed the Text
        MainActivity.this.adapter.getFilter().filter(cs);
    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) { }

    @Override
    public void afterTextChanged(Editable arg0) {}
}); 
```

这里的基本操作是将**OnTextChangeListener**添加到您的编辑文本中，并在其回调方法中将过滤器应用于您的列表视图的适配器。

**编辑**

要过滤到您的自定义 BaseAdapter，您需要实现**Filterable**接口。

```
class CustomAdapter extends BaseAdapter implements Filterable {

    public View getView(){
    ...
    }
    public Integer getCount()
    {
    ...
    }

    @Override
    public Filter getFilter() {

        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                arrayListNames = (List<String>) results.values;
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults results = new FilterResults();
                ArrayList<String> FilteredArrayNames = new ArrayList<String>();

                // perform your search here using the searchConstraint String.

                constraint = constraint.toString().toLowerCase();
                for (int i = 0; i < mDatabaseOfNames.size(); i++) {
                    String dataNames = mDatabaseOfNames.get(i);
                    if (dataNames.toLowerCase().startsWith(constraint.toString()))  {
                        FilteredArrayNames.add(dataNames);
                    }
                }

                results.count = FilteredArrayNames.size();
                results.values = FilteredArrayNames;
                Log.e("VALUES", results.values.toString());

                return results;
            }
        };

        return filter;
    }
} 
```

在**performFiltering()**中，您需要将搜索查询与数据库中的值进行实际比较。它将其结果传递给 **publishResults()**方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-23T18:15:15.653

实现您的适配器可过滤：

```
public class vJournalAdapter extends ArrayAdapter<JournalModel> implements Filterable{
private ArrayList<JournalModel> items;
private Context mContext;
.... 
```

然后创建您的过滤器类：

```
private class JournalFilter extends Filter{

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults result = new FilterResults();
        List<JournalModel> allJournals = getAllJournals();
        if(constraint == null || constraint.length() == 0){

            result.values = allJournals;
            result.count = allJournals.size();
        }else{
            ArrayList<JournalModel> filteredList = new ArrayList<JournalModel>();
            for(JournalModel j: allJournals){
                if(j.source.title.contains(constraint))
                    filteredList.add(j);
            }
            result.values = filteredList;
            result.count = filteredList.size();
        }

        return result;
    }
    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        if (results.count == 0) {
            notifyDataSetInvalidated();
        } else {
            items = (ArrayList<JournalModel>) results.values;
            notifyDataSetChanged();
        }
    }

} 
```

这样，您的适配器是可过滤的，您可以将过滤器项传递给适配器的过滤器并完成工作。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T18:34:23.497

如果有人仍然对这个主题感兴趣，我发现过滤列表的最佳方法是创建一个通用的 Filter 类并将其与 Java old school SDK 包中包含的一些基本反射/泛型技术一起使用。这是我所做的：

```
public class GenericListFilter<T> extends Filter {

    /**
     * Copycat constructor
     * @param list  the original list to be used
     */
    public GenericListFilter (List<T> list, String reflectMethodName, ArrayAdapter<T> adapter) {
        super ();

        mInternalList = new ArrayList<>(list);
        mAdapterUsed  = adapter;

        try {
            ParameterizedType stringListType = (ParameterizedType)
                    getClass().getField("mInternalList").getGenericType();
            mCompairMethod =
                    stringListType.getActualTypeArguments()[0].getClass().getMethod(reflectMethodName);
        }
        catch (Exception ex) {
            Log.w("GenericListFilter", ex.getMessage(), ex);

            try {
                if (mInternalList.size() > 0) {
                    T type = mInternalList.get(0);
                    mCompairMethod = type.getClass().getMethod(reflectMethodName);
                }
            }
            catch (Exception e) {
                Log.e("GenericListFilter", e.getMessage(), e);
            }

        }
    }

    /**
     * Let's filter the data with the given constraint
     * @param constraint
     * @return
     */
    @Override protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults results = new FilterResults();
        List<T> filteredContents = new ArrayList<>();

        if ( constraint.length() > 0 ) {
            try {
                for (T obj : mInternalList) {
                    String result = (String) mCompairMethod.invoke(obj);
                    if (result.toLowerCase().startsWith(constraint.toString().toLowerCase())) {
                        filteredContents.add(obj);
                    }
                }
            }
            catch (Exception ex) {
                Log.e("GenericListFilter", ex.getMessage(), ex);
            }
        }
        else {
            filteredContents.addAll(mInternalList);
        }

        results.values = filteredContents;
        results.count  = filteredContents.size();
        return results;
    }

    /**
     * Publish the filtering adapter list
     * @param constraint
     * @param results
     */
    @Override protected void publishResults(CharSequence constraint, FilterResults results) {
        mAdapterUsed.clear();
        mAdapterUsed.addAll((List<T>) results.values);

        if ( results.count == 0 ) {
            mAdapterUsed.notifyDataSetInvalidated();
        }
        else {
            mAdapterUsed.notifyDataSetChanged();
        }
    }

    // class properties
    private ArrayAdapter<T> mAdapterUsed;
    private List<T> mInternalList;
    private Method  mCompairMethod;
} 
```

之后，您唯一需要做的就是将过滤器创建为成员类（可能在视图的“onCreate”中）传递您的适配器引用、列表和为过滤而调用的方法：

```
this.mFilter = new GenericFilter<MyObjectBean> (list, "getName", adapter); 
```

现在唯一缺少的是覆盖适配器类中的“getFilter”方法：

```
@Override public Filter getFilter () {
     return MyViewClass.this.mFilter;
} 
```

全部完成！您应该成功过滤您的列表 -*当然，您还应该以描述您需要的最佳方式实现您的过滤算法，下面的代码只是一个示例。*. 希望有帮助，保重。

# objective-c - 如何从任意位置（在 iPhone 上）播放 ogg 音频文件？

> ID：14663729
> 
> 赞同：2
> 
> 时间：2013-02-02T16:05:27.850
> 
> 标签：objective-c, audio, cocos2d-iphone, ogg, xcode4.6

我想用 .ogg 音频文件制作声音循环（在 iPhone ios6.1 的 Objective-C 中）。它们具有非常重复的音乐，就像游戏音乐一样，所以另外，我想通过随机化它们使它们更有趣（即避免音频疲劳）。首先，我想在某个随机点开始播放它们。

我按照说明（[iPhone sdk 中的 OGG Vorbis](https://stackoverflow.com/questions/4745618/ogg-vorbis-in-iphone-sdk)）构建了一个 vorbis 库（libvorbis.a）并播放 ogg 文件。这有效：

```
[PASoundMgr sharedSoundManager];
[[[PASoundMgr sharedSoundManager] listener] setPosition:CGPointMake(0, 0)];
self.audioSource = [[PASoundMgr sharedSoundManager] addSound:@"test_sound_file" withExtension:@"ogg" position:CGPointMake(0, 0) looped:YES];
[self.audioSource setGain:0.5f];
[self.audioSource playAtListenerPosition]; 
```

使用界面中的@property，以及.m文件中对应的@synthesize：

```
@property (nonatomic, strong) PASoundSource *audioSource; 
```

**但是如何从与 ogg 开始不同的点开始呢？**

方法 playAtPosition(CGPoint) 是可用的，所以我首先尝试了，而不是 playAtListenerPosition：

```
[self.audioSource playAtPosition:(CGPointMake(15.0, 50.0))]; 
```

和其他值而不是 (15, 50)，以防它们映射到相似的位置。然而，在任何情况下，声音文件都是从头开始的。

我还尝试更改包含 CGPointMake 的两个初始化语句中的值，但这也没有什么区别。（另外，这两个数值是什么意思？我只能找到指向图形文件的解释 - 所以我猜是二维的 - 没有声音文件。）

任何帮助或想法将不胜感激！

# css - 如何将字体图标添加到手风琴 - zurb Foundation

> ID：14663731
> 
> 赞同：1
> 
> 时间：2013-02-02T16:06:00.240
> 
> 标签：css, zurb-foundation, font-awesome

我正在使用 Zurb Foundation，正在研究手风琴。Zurb 手风琴带有一个用作切换器的 CSS 三角形，但**我想使用两个字体很棒的图标，这取决于 li 是否具有活动类**。现在我得到了图标图像的占位符。

如果可能的话，宁愿只用 CSS 来做这件事。

这是我的**CSS**：

```
 ul.accordion > li > div.title:after { content:"\f067"; display: block; width: 0; 
height: 0; position: absolute; right: 20px; top: 8px;}

    ul.accordion > li.active .title:after { content:"\f068"; display: block; width: 0; 
height: 0; } 
```

这是**HTML**：

```
<ul class="accordion">
  <li class="active">
    <div class="title">
      <h5>Accordion Panel 1</h5>
    </div>
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
  </li>

 <li>
    <div class="title">
      <h5>Accordion Panel 1</h5>
    </div>
    <div class="content">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:16:32.830

显示的 CSS 未指定`font-family: FontAwesome;`. 尝试添加。

看起来这不是权限问题，但如果其他人出现，我会留下链接。

对于 localhost 更改字体本身的权限可能会有所帮助：[Icon font (@font-face) not rendering on localhost](https://stackoverflow.com/questions/13886817/icon-font-font-face-not-rendering-on-localhost)

或者 Firefox 可能存在跨域问题：[http ://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default](http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default)

# r - 函数不填充 R 中的空向量

> ID：14663734
> 
> 赞同：0
> 
> 时间：2013-02-02T16:06:21.723
> 
> 标签：r

我要让向量 simualted_results 取“模拟”返回的值，该值根据迭代产生不同长度的向量。

最初我有这段代码可以工作，但速度很慢：

```
simulated_results<-NULL
while(as.numeric(Sys.time())-start<duration){
  simulated_results <- cbind(simulated_results,simulation(J,4* (length(J)^2),0.0007,duration,start))

 } 
```

但它非常慢，所以我修改了它：

```
start<-as.numeric(Sys.time())
duration<-10
simulated_results<-NULL
simulated_results <- cbind(simulated_results,
                       replicate(n=10000,expr=(while(as.numeric(Sys.time())-start<duration)
                         {simulation(J,4*(length(J)^2),0.0007,duration,start)}))) 
```

现在使用新代码，我的问题是，尽管一切都在运行，但我无法将模拟结果传递给 simualted_results，而是 simualted_results jsut 采用 NULL 值的列向量我没有收到错误消息

我将不胜感激任何帮助！

供参考的模拟代码是：

```
iter<-as.numeric(Sys.getenv("PBS_ARRAY_INDEX"))

if(iter <= 40){J<-1:500
}else if(iter <= 80){J<-1:1500
}else if(iter <= 120){J<-1:2500
}else if(iter <= 160){J<-1:5000}

set.seed(iter)
simulation <- function(J,gens,v=0.1,duration,start){

  species_richness <- function(J){
    a <- table(J)
    return(NROW(a))
  }

  start<-as.numeric(Sys.time())

  species_richness_output <- rep(NA,gens)
  for(rep in 1:gens){

    if (as.numeric(Sys.time())-start<duration){

      index1 <- sample(1:length(J),1)

      if(runif(1,0,1) < v){
        J[index1] <- (rep+100)
      } 
      else{
        index2 <- sample(1:length(J),1)
        while(index1==index2) {
          index2 <- sample(1:length(J),1)
        }
        J[index1] <- J[index2]
      }
      species_richness_output[rep] <- species_richness(J)} else break
  }

  species_abundance <- function(J){
    a <- table(J)
    return(a)
  }

  abuntable <- species_abundance(J)

  octaves <- function(abuntable)
  {
    oct<-rep(0,floor(log2(length(J))+1))

    for(i in 1:length(abuntable)){
      oct2 <- floor(log2(abuntable[i])+1)
      oct[oct2] <- oct[oct2]+1
    }

    return(oct)
  }   

  octaves(abuntable)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:29:18.287

我同意@Nathan G 的观点，但有些事情确实引起了我的注意：您正在尝试`cbind`两种无法绑定在一起的东西，因为它们具有不同的维度。我们不知道你的`simulation`函数返回什么样的数据类型，但显然不是`NULL`。考虑一下：

```
df1 <- NULL
df2 <- data.frame(x = 1:10, y = 11:20)
cbind(df1, df2)
cbind(df2, df1) 
```

这两个`cbind`语句都给出了错误。你有错误吗？如果这是正在发生的事情，`simulated_results`则不应将其初始化为函数返回`NULL`的任何内容的空版本，而应将其初始化为空版本。`simulation`

**编辑**

```
iter = 10
set.seed(iter)
J <- 1:1500
# critical to preallocate the list size for speed
res <- vector("list", iter)
for (i in 1: iter) {
    res[[i]] <- simulation(J,4* (length(J)^2),0.0007,duration = 10,start)
}
str(res)
res[[1]] 
```

现在我不认为我正在以您最终想要的方式使用它，但也许这会给您足够的东西来获得您真正想要的东西。

# jquery - 函数参数中的 var 不起作用

> ID：14663737
> 
> 赞同：0
> 
> 时间：2013-02-02T16:06:37.857
> 
> 标签：jquery, parameters, var

我在函数的参数中添加了一个var：

```
//
msg = "test message";
date = "02-28-2013";
cal.setData({ date : msg});
//
//this can't work 
```

但是，以下一个效果很好

```
//
msg = "test message";
cal.setData({ "02-28-2013" : msg});
// 
```

但我需要使用包含**var**的那个。我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:08:08.573

尝试这个：

```
var param = {}
param[ date ] = msg;
cal.setData( param ); 
```

为了将变量设置为对象的属性名称，您必须使用括号表示法。为此，首先创建一个空对象，然后添加动态属性，如上所示。

在您的第一个示例中，传递给函数的对象包含一个名为`date`的属性，而不是具有变量值名称的属性`date`。

# php - ftp_get 适用于本地主机，但不适用于生产服务器

> ID：14663743
> 
> 赞同：3
> 
> 时间：2013-02-02T16:07:10.767
> 
> 标签：php, ftp

我正在使用 ftp_get 从另一个 ftp 服务器获取文件。

我的代码在我的本地 WAMP 服务器上运行良好，但是当我将它应用到我的实际网络托管时，连接失败。

```
$conn = ftp_connect('ftp.server.com') or die('Could not connect');
ftp_login($conn,'myusername','mypassword');
$local_file = 'new/two.txt';
$remote_file = 'games/minecraft/craftbukkit/plugins/VisitCounter/config.yml';
$get = ftp_get($conn,$local_file,$remote_file,FTP_ASCII);

if ($get){

    echo 'Connection Successful';
} else{

    echo 'Connection failure';
}

exec($get);
ftp_close($conn); 
```

我在想必须在我的网络服务器上禁用建立 ftp 连接所需的东西。

你们中的任何人都可以提供帮助吗？

谢谢，

贾里德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T10:22:11.137

您的服务器不是被动模式，您只需要使用 php 函数打开服务器的被动模式：-

```
$conn_id = ftp_connect($ftp_server);   

// login with username and password

$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// turn passive mode on

$ps = ftp_pasv($conn_id, true); 
```

希望它会奏效。

# c# - MVC 2 - 基于下拉选择更新视图

> ID：14663746
> 
> 赞同：0
> 
> 时间：2013-02-02T16:07:25.023
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在学习 ASP.NET MVC 2，我想做的很简单：

1.  我用产品类型列表填充下拉列表
2.  当下拉值更改时，我发布到模型并传递所选值。
3.  用该特定产品类型的产品列表填充集合

到目前为止，一切正常，但我的视图尚未更新，并且未显示特定产品类型的产品列表。

我在想也许是因为`[HTTPPost]`只是发布到视图模型并且它实际上并没有更新视图？

关于如何根据下拉选择更新视图的任何建议？

**模型：**

公共类供应商模型{公共供应商模型（）{}

```
public SuppliersModel(string type)
{
    ProductsByType = Products.Where(i => i.Type == type);
}

public IEnumerable<Products> ProductsByType { get; set; }

public List<Products> Products
{
    get 
    {
        List<Products> mockProducts = new List<Products>()
        {
            new Products{Type="Fruit", Name="Apple"},
            new Products{Type="Fruit", Name="Orange"},
            new Products{Type="Vegetables", Name="Potato"},
            new Products{Type="Vegetables", Name="Carrot"}
        };
        return mockProducts;
    }
}

public SelectList ProductTypes
{
    get { return GetProductTypes(); } 
}

private SelectList GetProductTypes()
{
    var productTypes = new List<SelectListItem>
        {
            new SelectListItem{ Value="Fruit",Text="Fruit"},
            new SelectListItem{ Value="Vegetables",Text="Vegetables"}
        };

    var list = new SelectList(productTypes, "Value", "Text");
    return list;
} 
```

}

公共类产品 { 公共字符串类型 { 获取；放; } 公共字符串名称 { 获取；放; } }

**看法：**

```
<script type="text/javascript">
    $(function () {
        $('#products').change(function () {
            $.post('<%=Url.Action("GetProductsByType", "Suppliers")%>', { type: $(this).val() },
            function (result) {
            });
        });
    });
</script>
<h2>
    Suppliers</h2>
<%= Html.DropDownList("products",Model.ProductTypes) %>
<table>
    <% if (Model.ProductsByType != null) foreach (var item in Model.ProductsByType)
           { %>
    <tr>
        <td>
            <%= item.Name %>
        </td>
        <td>
            <%= item.Type %>
        </td>
    </tr>
    <% } %>
</table> 
```

**控制器：**

```
public class SuppliersController : Controller
{
    public ActionResult Suppliers()
    {
        SuppliersModel model = new SuppliersModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult GetProductsByType(string type)
    {
        //This executes when the value in the drop down changes
        SuppliersModel model = new SuppliersModel(type);
        return View(model);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:14:59.400

看起来你没有对你的控制器在发布后返回的 html 做任何事情，

```
<script type="text/javascript">
    $(function () {
        $('#products').change(function () {
            $.post('<%=Url.Action("GetProductsByType", "Suppliers")%>', { type: $(this).val() },
            function (result) {
                //result will have the html that your controller returns after the post
                // you can do something like,
                $('#some-div').html(result);
            });
        });
    });
</script> 
```

# asp.net - 在 DropDownList SelectedIndex Changed 事件中更改 ASP.net 中的图表类型

> ID：14663749
> 
> 赞同：3
> 
> 时间：2013-02-02T16:07:48.090
> 
> 标签：asp.net, drop-down-menu, charts, selectedindexchanged

我有一个 DropDownList 和一个在 ASP.net 中创建的图表。它的现有项目是条形图和饼图。

我需要将我的图表选择为在 DropDownList 中选择的格式。有没有办法做到这一点？提前谢谢你....！

我的编码如下。

```
<asp:DropDownList ID="drpChart" runat="server" AutoPostBack="True" Height="24px" Width="142px">
                            <asp:ListItem>Bar Chart</asp:ListItem>
                            <asp:ListItem>Pie Chart</asp:ListItem>
                            </asp:DropDownList>

<asp:Chart ID="Chart2" runat="server" style="margin-left: 40px">
                    <Series>
                        <asp:Series Name="Series1">
                        </asp:Series>
                    </Series>
                    <ChartAreas>
                        <asp:ChartArea Name="ChartArea1">
                        </asp:ChartArea>
                    </ChartAreas>
                </asp:Chart> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T06:25:16.053

`DropDownList`如果我使用相同的功能，请使用您的代码

这是我的代码：

```
protected void Dd_Graph_Selection_SelectedIndexChanged(object sender, EventArgs e)
    {
        string chartType = Dd_Graph_Selection.SelectedValue;
        switch (chartType)
        {
            case "Column Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Column;
                break;
            case "Pie Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Pie;
                break;
            case "Bar Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Bar;
                break;
            case "BoxPlot Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.BoxPlot;
                break;
            case "Funnel Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Funnel;
                break;
            case "Point Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Point;
                break;
            case "Spilinr Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Spline;
                break;
            case "Bubble Chart":
                Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Bubble;
                break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:29:16.123

一个简单的 switch 语句就可以解决问题：

**ASPX：**

```
<asp:DropDownList ID="drpChart" runat="server" AutoPostBack="True" Height="24px"
    Width="142px">
    <asp:ListItem>Bar Chart</asp:ListItem>
    <asp:ListItem>Pie Chart</asp:ListItem>
</asp:DropDownList><br />
<asp:Chart ID="Chart1" runat="server">
    <Series>
        <asp:Series Name="Series1">
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart> 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    var employees = new Dictionary<int, string>
        {
            {10, "Product A"},{20, "Product B"},{30, "Product C"}
        };

    foreach (KeyValuePair<int, string> employee in employees)
    {
        Chart1.Series[0].Points.AddXY(employee.Value, employee.Key);
    }

    string chartType = drpChart.SelectedValue;
    switch(chartType)
    {
        case "Bar Chart":
            Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Bar;
            break;
        case "Pie Chart":
            Chart1.Series[0].ChartType = System.Web.UI.DataVisualization.Charting.SeriesChartType.Pie;
            break;
    }
} 
```

# c# - 如何在运行时将属性添加到属性

> ID：14663763
> 
> 赞同：78
> 
> 时间：2013-02-02T16:09:07.073
> 
> 标签：c#, attributes

```
//Get PropertyDescriptor object for the given property name
var propDesc = TypeDescriptor.GetProperties(typeof(T))[propName];

//Get FillAttributes methodinfo delegate
var methodInfo = propDesc.GetType().GetMethods(BindingFlags.Instance | BindingFlags.Public |
                                                      BindingFlags.NonPublic)
    .FirstOrDefault(m => m.IsFamily || m.IsPublic && m.Name == "FillAttributes");

//Create Validation attribute
var attribute = new RequiredAttribute();
var  attributes= new ValidationAttribute[]{attribute};

//Invoke FillAttribute method
methodInfo.Invoke(propDesc, new object[] { attributes }); 
```

您好我正在尝试使用上面的代码在运行时添加验证属性。但是我收到以下异常：

> 集合是固定大小的

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2014-06-25T15:40:26.220

不要让别人告诉你你做不到。如果你愿意，你可以竞选总统:-)

为了您的方便，这是一个完整的示例

```
public class SomeAttribute : Attribute
{
    public SomeAttribute(string value)
    {
        this.Value = value;
    }

    public string Value { get; set; }
}

public class SomeClass
{
    public string Value = "Test";
}

[TestMethod]
public void CanAddAttribute()
{
    var type = typeof(SomeClass);

    var aName = new System.Reflection.AssemblyName("SomeNamespace");
    var ab = AppDomain.CurrentDomain.DefineDynamicAssembly(aName, AssemblyBuilderAccess.Run);
    var mb = ab.DefineDynamicModule(aName.Name);
    var tb = mb.DefineType(type.Name + "Proxy", System.Reflection.TypeAttributes.Public, type);

    var attrCtorParams = new Type[] { typeof(string) };
    var attrCtorInfo = typeof(SomeAttribute).GetConstructor(attrCtorParams);
    var attrBuilder = new CustomAttributeBuilder(attrCtorInfo, new object[] { "Some Value" });
    tb.SetCustomAttribute(attrBuilder);

    var newType = tb.CreateType();
    var instance = (SomeClass)Activator.CreateInstance(newType);

    Assert.AreEqual("Test", instance.Value);
    var attr = (SomeAttribute)instance.GetType()
        .GetCustomAttributes(typeof(SomeAttribute), false)
        .SingleOrDefault();
    Assert.IsNotNull(attr);
    Assert.AreEqual(attr.Value, "Some Value");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-16T17:04:42.417

使用我开发的[FastDeepCloner 。](https://www.nuget.org/packages/FastDeepCloner/)

```
public class test{
    public string Name{ get; set; }
}

var prop = DeepCloner.GetFastDeepClonerProperties(typeof(test)).First();
prop.Attributes.Add(new JsonIgnoreAttribute());
// now test and se if exist 
prop = DeepCloner.GetFastDeepClonerProperties(typeof(test)).First();
bool containAttr = prop.ContainAttribute<JsonIgnoreAttribute>()
// or 
JsonIgnoreAttribute myAttr = prop.GetCustomAttribute<JsonIgnoreAttribute>(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-12-18T15:14:06.003

对不起，我参加晚会很晚了。这是给那些以后可能来这里的人的。最佳答案太棒了。最近，开发了一个库，它抽象了所有这些复杂性，并为您提供了一些简单的东西：

```
var attributeType = typeof(CustomAAttribute);
var attributeParams = new object[] { "Jon Snow" };
var typeExtender = new TypeExtender("ClassA");
typeExtender.AddProperty("IsAdded", typeof(bool), attributeType, attributeParams); 
```

跟...共事。有关如何安装和使用该库的详细信息，请参见[此处](https://github.com/NdubuisiJr/TypeExtender)

免责声明：我开发了这个库，我已经在很多项目中使用它，它就像魔法一样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:59:44.867

它不起作用，因为该`FillAttributes`方法需要 IList 类型的参数并且您正在传递一个数组。下面是[MemberDescriptor.FillAttributes](http://msdn.microsoft.com/en-us/library/system.componentmodel.memberdescriptor.fillattributes.aspx)的实现：

```
protected virtual void FillAttributes(IList attributeList) { 
    if (originalAttributes != null) {
        foreach (Attribute attr in originalAttributes) {
            attributeList.Add(attr);
        } 
    }
} 
```

如您所见，只需使用属性的所有属性`FillAttributes`填充参数。`attributeList`为了使您的代码正常工作，请更改以下`var attributes= new ValidationAttribute[]{attribute};`行：

```
var attributes = new ArrayList { attribute }; 
```

此代码与在运行时向类型属性添加属性无关。这是“将属性添加到`PropertyDescriptor`从类型中提取的”，除非您尝试在运行时构建基于现有类型的类型，否则没有任何意义。

* * *

## 回答 #5

> 赞同：-13
> 
> 时间：2013-02-02T17:05:08.027

无法在运行时添加属性。属性是静态的，不能添加或删除。

类似的问题：

*   [可以在 C# 中动态添加属性吗？](https://stackoverflow.com/questions/129285/can-attributes-be-added-dynamically-in-c)
*   [动态删除属性的 C# 属性](https://stackoverflow.com/questions/2483124/remove-c-sharp-attribute-of-a-property-dynamically)

# javascript - 如何使用 JayData 自定义 OData 服务器？

> ID：14663769
> 
> 赞同：3
> 
> 时间：2013-02-02T16:10:36.450
> 
> 标签：javascript, node.js, mongodb, odata, jaydata

我对 JayData 很陌生，所以这听起来像是一个愚蠢的问题。我在这里阅读了 OData 服务器教程：http: [//jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb](http://jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb) - 可以设置 OData 提供程序，这令人印象深刻就这样。但是，本教程没有详细介绍如何自定义提供程序。

我有兴趣了解如何使用自定义数据库进行设置，以及如何向 OData 服务器添加一层身份验证/授权。我的意思是，不是每个用户都有权访问每个实体，也不是每个用户都有权添加新实体。

我将如何使用 JayData 处理此类用例？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:07:17.717

## 更新：

这里有两篇文章可以帮助您入门：

*   [如何使用 odata-server npm 模块](http://jaydata.org/blog/how-to-set-up-a-nodejs-odata-endpoint-with-odata-server)
*   [如何设置身份验证/授权](http://jaydata.org/blog/super-easy-authentication-and-authorization-with-odata-server)

帖子中经常使用的`$data.createODataServer`方法是一种方便的方法，它对您隐藏连接/快递管道。要与管道交互，请检查`$data.createODataServer`node_modules/odata-server 文件夹中的函数方法体。

* * *

忽略下面的文字

身份验证必须通过连接管道来解决，为此有大量的中间件。

对于授权 EntityContext 构造函数接受一个必须知道承诺的授权函数。

all-allow 授权者看起来像这样。

```
 function checkPerm(access, user, entitysets, callback) {
        var pHandler = new $data.PromiseHandler();
        var clbWrapper = pHandler.createCallback(callback);
        var pHandlerResult = pHandler.getPromise();
        clbWrapper.success(true); // this grants a joker rw permission to everyone
        //consult user, entitySet and acces to decide on success/error
        //since you return a promise you can call async stuff (will not be fast though)
        return pHandlerResult;
    } 
```

我必须就让您将其传递到构建过程的语法咨询其中一位团队成员 - 但我可以确认这是可行的并且受支持。我会尽快回复答案。

对用户进行身份验证后，您还可以使用[EntityContext 级别事件](http://jaydata.org/blog/entitycontext-and-entityset-scoped-event-handlers-in-jaydata-1.2)来拦截读取/更新/创建/删除操作。

```
$data.EntityContext.extend({
   MySet: { type: $data.EntitySet, elementType: Foobar,
            beforeDelete: function(items) {
               //if delete was in batch you'll get multiple items
               //check items here,access this.request.user 
               return false // deny access
            }

}); 
```

还有一种声明方式，您可以使用实体集上的权限注释角色名称，这要求您的用户对象实际上有一个角色字段，其中包含角色名称数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:28:52.900

我最近也在研究 oData，当我们在 node 和 C# 中开发我们的平台时，自然而然地看着 JayStorm。根据我对 JayStorm 技术细节的理解，Connect 和 Express 的全部功能可以使这个主题成为可能。我们使用 Restify 来提供我们平台的私有 API，并且我们已经为这种情况编写了许多中间件模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T01:46:30.433

我们也将 JayData 用于我们的 OData 服务层，并且我已经用它实现了一个非常简单的基本身份验证。由于 JayData 使用的是 Express，因此我们可以利用 Express 的功能。对于基本身份验证，最简单的方法是：

```
app.use(c.session({ secret: 'session key' }));
// Authenticator
app.use(c.basicAuth('admin', 'admin'));
app.use("/odata.svc", $data.JayService.OData.Utils.simpleBodyReader()); 
```

你也可以参考这篇文章了解更多关于 Express 身份验证的详细信息：http: [//blog.modulus.io/nodejs-and-express-basic-authentication](http://blog.modulus.io/nodejs-and-express-basic-authentication)

谢谢。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-02T16:36:33.640

我写了那篇博文，我为 JayData 工作。自定义数据库是什么意思？我们编写了一个用于身份验证和授权的中间件，但它不是开源的。我们可能会在稍后发布它。我们有一个叫 JayStorm 的服务，它有一个免费版本，也许这对你有好处。我们可能会发布它的设备版本。

# java - Android OpenGL 移动相机和绘图对象

> ID：14663773
> 
> 赞同：0
> 
> 时间：2013-02-02T16:11:10.563
> 
> 标签：java, android, opengl-es, camera, rotation

我正在创建一个应用程序，它应该在场景中的恒定位置绘制对象，但是当我移动手机时，相机应该改变视图并且我应该看到周围的所有对象（当我用手机进行完全旋转时）。

当我在我的 onDrawFrame 方法中使用 gl.glMultMatrixf(rotationMatrix, 0) 然后绘制对象时，它的工作完美（旋转矩阵是从 SensorManager 获得的）

```
 @Override
    public void onDrawFrame(GL10 gl) {

        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();

        gl.glMultMatrixf(rotationMatrix, 0);

        gl.glTranslatef(0f, 0f, -10f);
        //draw object
        pyramid.draw(gl);

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {

        gl.glViewport(0, 0, width, height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 45.0f, (float) width / (float) height, 0.1f, 100.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
    } 
```

但是当我尝试使用时：

```
 GLU.gluLookAt( gl, 0.0f, 0.0f, 0.0f, x, y, z, 0.0f, 1.0f, 0.0f ); 
    gl.glPushMatrix();
    //draw object
    pyramid.draw(gl); 
```

我的对象一直在屏幕上的同一个地方，并跟随相机移动。我在第二个例子中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:16:36.013

我认为您不清楚 glulookat() 的实际作用。您要求的矩阵表示 glulookat(currentrotationmatrix, mylocation.x, mylocation.y, mylocation.z, whereImlooking.x, whereImlooking.y, whereImlooking.z, upvector.x, upvector.y, upvector.z)

因此，使用该代码，您告诉 opengl 旋转所有内容（假设代码仍然存在），然后您说“我在原点 (0.0, 0.0, 0.0) 并查看 xyz”（不确定 xyz 在您的案例。或者你想要达到什么效果。）

# reference - 为什么要在 go 中分配对结构的引用？

> ID：14663774
> 
> 赞同：7
> 
> 时间：2013-02-02T16:11:11.400
> 
> 标签：reference, struct, initialization, go

我正在查看此页面上的代码：

[http://golang.org/pkg/net/http/](http://golang.org/pkg/net/http/)

还有一件事我不明白 - 在某些时候，一个新的结构被创建和初始化是这样的：

```
client := &http.Client{
    CheckRedirect: redirectPolicyFunc,
} 
```

为什么`&`在创建这个结构时使用？

我也读过这篇[博文](http://golangtutorials.blogspot.com/2011/06/structs-in-go-instead-of-classes-in.html)，结构是这样初始化的：

```
r := Rectangle{} 
```

两者有什么区别，我应该如何知道使用哪一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T16:58:17.117

区别在于变量的类型。

```
client := &http.Client{ 
```

`client`类型_`*http.Client`

尽管

```
client := http.Client{ 
```

构建一个`http.Client`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T16:18:48.393

最上面的是返回一个指针。这是一个 Go 习惯用法，而不是使用 new。第二个只是一个值对象。如果您需要指针，请使用顶部。

查看有效的 go doc 了解更多信息

[http://golang.org/doc/effective_go.html#allocation_new](http://golang.org/doc/effective_go.html#allocation_new)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T02:51:25.290

在面向对象编程中，为了使对象具有动态生命周期（即不绑定到当前函数调用），它需要动态分配到当前堆栈帧以外的位置，因此您可以通过指针来操作对象. 这是一种常见的模式，以至于在许多面向对象的语言中，包括 Java、Python、Ruby、Objective-C、Smalltalk、JavaScript 等，您只能处理指向对象的指针，而不能处理“作为值的对象”本身。（不过，有些语言，比如 C++，确实允许您将“对象作为值”；它带有 RAII 习语，这增加了一些复杂性。）

Go 不是一种面向对象的语言，但它能够定义自定义类型和定义对自定义类型进行操作的方法，可以使其非常像类和方法一样工作。从“构造函数”函数返回指向类型的指针允许“对象”具有动态生命周期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-28T19:13:41.330

当我们使用引用时，我们在整个程序运行时使用单个项目。即使我们将其分配给新变量或通过函数传递。但是，当我们使用价值时，我们会制作单个项目的新副本。

（`Reference is not right word according to golang convention. "Address of value" would be more appropriate here` [https://golang.org/ref/spec#Package_initialization](https://golang.org/ref/spec#Package_initialization)）

我希望举个例子就很清楚了。

```
type Employee struct {
    ID      int
    Name    string
    Address string
}

func main() {

    andy := &Employee{}

    andy.Name = "Andy"

    brad := andy

    brad.Name = "Brad"

    fmt.Println(andy.Name)
} 
```

此代码块的结果将是：

```
Brad 
```

因为我们从中创建了新变量，但仍然引用相同的数据。但是如果我们使用值而不是引用并保持其余代码相同。

```
// from 
andy := &Employee{}
// to
andy := Employee{} 
```

这一次的结果是：

```
Andy 
```

因为这次它们都是单独的项目，不再引用相同的数据。

# android - 如何在Android中旋转具有矩形形状的Drawable？

> ID：14663776
> 
> 赞同：1
> 
> 时间：2013-02-02T16:11:20.897
> 
> 标签：android

我正在使用此代码将可绘制对象旋转 45 度：

```
public static Drawable rotateImage(Context ctx) {
      // load the origial Bitmap
      Bitmap BitmapOrg = BitmapFactory.decodeResource(ctx.getResources(),
              R.drawable.car);

      int width = BitmapOrg.getWidth();
      int height = BitmapOrg.getHeight();
      int newWidth = 90;
      int newHeight = newWidth * height / width;

      // calculate the scale
      float scaleWidth = ((float) newWidth) / width;
      float scaleHeight = ((float) newHeight) / height;

      // create a matrix for the manipulation
      Matrix matrix = new Matrix();
      // resize the Bitmap
      matrix.postScale(scaleWidth, scaleHeight);
      // if you want to rotate the Bitmap
      matrix.postRotate(-45);

      // recreate the new Bitmap
      Bitmap resizedBitmap = Bitmap.createBitmap(BitmapOrg, 0, 0,
                                                 width, height, matrix, true);

      // make a Drawable from Bitmap to allow to set the Bitmap
      // to the ImageView, ImageButton or what ever
      return new BitmapDrawable(resizedBitmap);

    } 
```

问题是虽然我给了它一个newWidth，但Drawable的大小还是一样的，旋转的图像看起来被拉伸了。如果它是一个矩形，我如何旋转可绘制对象以获得旋转图像的良好外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:38:36.523

我为你试过了 :) 我认为你已经在 xml 中设置了你的图像大小是小的。所以，任何图像都会被设置为小。试试下面的事情......

在您的 XML 中

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/ic_launcher" >

  <ImageView
    android:id="@+id/imageButton1"
    android:layout_width="1000dp"
    android:layout_height="5000dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="49dp"
    android:src="@drawable/ic_launcher"
    android:contentDescription="Rakesh" />

</RelativeLayout> 
```

在你的 Java 文件中

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   /* this.requestWindowFeature(Window.FEATURE_NO_TITLE); */
    setContentView(R.layout.activity_main);
    ImageView im=(ImageView)findViewById(R.id.imageButton1);
  /*  this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);*/
im.setImageDrawable(rotateImage(this));
}

public static Drawable rotateImage(Context ctx) {
    // load the origial Bitmap
    Bitmap BitmapOrg = BitmapFactory.decodeResource(ctx.getResources(),
            R.drawable.vijay);

    int width = BitmapOrg.getWidth();
    int height = BitmapOrg.getHeight();
    int newWidth = 90;
    int newHeight = newWidth * height / width;

    // calculate the scale
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;

    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the Bitmap
    matrix.postScale(scaleWidth, scaleHeight);
    // if you want to rotate the Bitmap
    matrix.postRotate(-45);

    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(BitmapOrg, 0, 0,
                                               width, height, matrix, true);

    // make a Drawable from Bitmap to allow to set the Bitmap
    // to the ImageView, ImageButton or what ever
    return new BitmapDrawable(resizedBitmap);

  }
  } 
```

现在你会得到你尺寸的图片:)

如果有任何错误让我恢复..

# json - 如何使用 Servlet 和 Ajax 填充表

> ID：14663781
> 
> 赞同：0
> 
> 时间：2013-02-02T16:11:32.003
> 
> 标签：json, ajax, servlets, html-table, populate

就个人而言，我有一个通过 Json 返回 Map 的 servlet，我想使用这个映射的值（键和值）通过 Ajax 填充表。

我在 Ajax 中的代码如下：

```
success:function(responseJson){
$(".results").show();
$(".content").show();

var headTable = $(".tablesorter > thead > tr");
var bodyTable = $(".tablesorter > tbody > tr");

$.each(responseJson, function(key, value){
    $("<th>").html(key).appendTo(headTable);

    for (var i = 0; i < value.length; i++){
        $("<td>").val(key).html(value[i]).appendTo(bodyTable);
    }
}); 
```

我的 Map 的键我希望它是表头的值，而 Map 的值是表的主体。

我想在下面填充以下表格：

```
<table cellspacing="1" class="tablesorter">
<thead>
    <tr>

    </tr>
</thead>
<tbody>
    <tr class="even">

    </tr>
</tbody> 
```

但是，我的代码不是使用 Map 中的值创建行，而是创建多个列。

我应该如何处理我的代码行为正确？

# c# - 大小和位置的通用名称？

> ID：14663783
> 
> 赞同：3
> 
> 时间：2013-02-02T16:11:48.490
> 
> 标签：c#, location, size, naming, naming-conventions

这可能是一个有点愚蠢的问题，因为它都是关于术语和命名的，但我发现正确命名我的方法对我来说很重要。

我正在创建一个 Windows 窗体，我需要一种方法来设置按钮和文本框的大小和位置（在初始化过程中，以及每次我的窗体调整大小时）。这个方法应该叫什么？

目前我正在使用 name `SetSizeAndLocation();`，但我觉得这很令人不安。大小和位置是否有通用术语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:15:49.313

我经常发现窗口的位置+尺寸被一起称为窗口的“几何”，例如在[tcl/tk windowmanagement](http://www.tcl.tk/man/tcl8.4/TkCmd/wm.htm#M26)中。

你也可以在 X-window 系统中找到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T16:17:54.900

在 Windows 窗体中，该[`Control.Bounds`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bounds.aspx)属性允许您获取或设置一个包含控件大小和位置的[Rectangle](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.aspx)`SetBounds` ，因此我认为这将是您的方法的好名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:20:36.507

长方形。像窗户的形状。矩形对象由矩形形状的位置和大小组成。

# ruby-on-rails - BlueCloth Markdown 支持剧透

> ID：14663786
> 
> 赞同：1
> 
> 时间：2013-02-02T16:12:30.007
> 
> 标签：ruby-on-rails, markdown, bluecloth

BlueCloth for Ruby on Rails 是否支持剧透？它似乎存在于大多数这样的降价实现中：你输入`>! This is a spoiler`并得到：

> 这是剧透

这似乎不适用于 BlueCloth。

# android - Android：一个对象的 360 度视图

> ID：14663787
> 
> 赞同：5
> 
> 时间：2013-02-02T16:12:31.543
> 
> 标签：android, object, view, 360-degrees

有没有办法从照片中创建 360 度对象视图？我有一组 71 张从不同角度观看的单车照片。我想将它们结合起来，并能够在触摸屏幕时从不同角度旋转汽车。我已经完成了研究，但我在 android 中找不到任何东西。[在这里](http://blog.stableflow.com/jquery-plugins/360-degrees-product-view/)可以找到一个示例

这个例子是用 Jquery 做的。我需要的是直接在 android 应用程序中实现它。我怎样才能做到这一点？

**Edit1：**到目前为止，我设法以[这种](http://developer.android.com/guide/topics/graphics/drawable-animation.html)方式在图像之间创建动画：

问题是动画在点击时开始并自行运行。当按住手指并向右或向左移动时，我希望能够将汽车从左向右和从右向左移动。我该怎么做才能从我想要的角度看到汽车？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:13:53.003

我刚刚在我的设备上测试了那个 Jquery 插件页面，它似乎工作正常。因此，您可能仍然可以使用该插件来制作一些 html 内容，然后您可以将其加载到 WebView 中。这将在您的应用程序内部提供旋转的东西。

如果您不想使用 html/javascript 来执行此操作，则必须使用附加了 TouchListener 的 ImageView，通过以适当的时间间隔切换到下一个图像来处理拖动事件。

或者可能以某种方式使用 Canvas，尽管我对此并不熟悉，但我会打结如何描述您需要做什么才能使其以这种方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:18:03.477

经过数小时尝试完成此任务后，我停止使用 Drawable 动画方法，因为此时我正在加载应用程序由于内存不足而崩溃的图像。

相反，我找到了另一种方法，我现在就使用它。[例子](http://jbk404.site50.net/360DegreeView/mobile/common.html)

我用我需要的图像和我想要的布局更改了 .html，然后我使用 webview 在我的应用程序中实现它。工作得很好。

# python - 在python中将通知从Web服务器推送到桌面应用程序

> ID：14663789
> 
> 赞同：0
> 
> 时间：2013-02-02T16:12:38.437
> 
> 标签：python, django, comet, long-polling

我为此服务（在 wxpython 上）提供用户服务（在 django 中）和桌面客户端。我需要将通知从服务器发送到特定用户的桌面应用程序。

我可以用它做什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:57:32.650

我不知道wxPython，但是如果你想使用长轮询、彗星或其他基于HTTP协议的技术，那么你需要编写HTTP客户端或使用任何网络框架。

例如[扭曲](http://twistedmatrix.com/trac/)。

连接到您的 django 服务器并使用 HTTP 协议通过 TCP 传输发送数据。

# mysql - MySQL Join 表根本没有公共列，只是按顺序

> ID：14663790
> 
> 赞同：0
> 
> 时间：2013-02-02T16:12:51.903
> 
> 标签：mysql, sql, join

我在另一个问题中描述了同样的问题：

[MySQL / PHP连接表而不总是有公共列](https://stackoverflow.com/questions/11471641/mysql-php-joining-tables-without-always-having-common-column)

但是我的表没有共同的字段，我只想将它们加入“第一个与第一个”，“第二个与第二个”等等。

例子：

## 表格1

*   约翰
*   玛丽
*   查尔斯

## 表_2

*   史密斯
*   好人
*   衬套

## 表格结果

*   约翰 | 史密斯
*   玛丽 | 好人
*   查尔斯 | 衬套

表应该总是有相同数量的项目，但如果没有，不存在的项目可以用 null 填充，如“henrry | null”。

也许可以先添加一个字段来为每一行编号，或者其他什么，但性能在这里很关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:26:37.397

这确实不是一个好主意，并且永远不能保证一致的结果，但是您可以获取每个表的行号并将其用作您的连接字段。

尝试这样的事情：

```
SELECT Field1, Field2
FROM (SELECT Field1, @curRow := @curRow + 1 AS row_number
      FROM Table1
         JOIN    (SELECT @curRow := 0) r) t1
 JOIN (SELECT Field2, @curRow2 := @curRow2 + 1 AS row_number
      FROM Table2
         JOIN    (SELECT @curRow2 := 0) r) t2 on t1.row_number = t2.row_number 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!2/218c5/4)。

这仅在两个表具有相同行数时才有效。如果没有，您将丢失数据...

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:18:30.443

如果您想要性能，只需使用整数主键，但您确实需要键。您不能也不应该按照您描述的方式进行操作。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:27:08.313

**编辑：**

鉴于您的要求是专门为实现随机结果，我认为您可以使用`cross join`.

下面的[小提琴](http://www.sqlfiddle.com/#!2/23c00/8/0)捕捉了我为证明这一点所做的努力。

--

否则，如果您的数据确实是恒定的（在这种情况下，为什么要使用数据库？）那么它可以产生一致的结果 - 但您可以轻松定义键并完成它。如果不是，请考虑当您扩展数据库时，您期望“不存在的 [原文如此] 项目可能填充为 null”会发生什么情况：

## 前

**表格1**

```
foo
bar 
```

**表 2**

```
qux 
```

**结果**

```
foo qux
bar null 
```

## 后

**表格1**

```
foo
bar
baz 
```

**表 2**

```
qux
quxx 
```

**结果**

```
foo qux
bar quxx
baz null 
```

您无法添加`baz quxx`到数据库中。

# simple-html-dom - simple_html_dom：在非对象上调用成员函数 find()

> ID：14663791
> 
> 赞同：0
> 
> 时间：2013-02-02T16:12:59.643
> 
> 标签：simple-html-dom

这段代码几个月来一直运行良好。输出由几行组成，其中包含给定用户名的统计信息。取html页面的网站没有宕机，页面内容`file_get_html`也没有变化。突然之间（我检查并没有人修改它）它停止工作。这是相关部分：

```
[...]if ($FileAge > ($expiretime * 60) || 0 == filesize($cachename))
{
    include_once('simple_html_dom.php');
    $html = file_get_html('http://www.foo.com/search?what=user%3A'.YOUR_USER.'&search=Search');
    var_dump($html); //TEST
    $link = $html->find('.likeh4 lightGrey.', 0)->find('a', 0)->href;   // Get the last activity link
[...] 
```

错误日志说：

```
[02-Feb-2013 17:02:19 Europe/Berlin] PHP Fatal error:  Call to a member function find() on a non-object in /foo.php on line 22 (the line with $link). 
```

`var_dump($html)`给`bool(false)`

我有一个类似的脚本，可以解析另一个网站的 html 页面。它也停止了工作。

```
[...]include_once('simple_html_dom.php');
$html = file_get_html('http://my.flightmemory.com/'.FLIGHTMEMORY_USER);
$chilometri_table = $html->find('table', 2);    [...] 
```

我试图在我的网络服务器上保存其中一个 html 页面，但没有收到此类错误。我的主机是否出于安全原因禁用了某些 php 功能？（实际上，file_get_html 来自 simple_html_dom 而不是来自 php 原生函数）

有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T13:54:11.100

可能为时已晚，但是：
Simple_html_dom 有一个常量来检查给定的 html 大小 - `MAX_FILE_SIZE`。默认为 600KB。对于大多数情况来说这已经足够了，但是如果您给定的 html 比这更大，它将失败并返回`false`并导致该致命错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T12:36:07.917

如果您尝试获取 [href] 我遇到了同样的问题并修复了它。需要有效它是一个 simple_html_dom_node

```
if(is_a($html->find('.likeh4 lightGrey. a', 0),'simple_html_dom_node' )
  $link = $html->find('.likeh4 lightGrey. a', 0)->href; 
```

或者

```
foreach ( $$html->find('.likeh4 lightGrey. a') as $links ) {
 $link =$links->href;
} 
```

# java - “显示一次”屏幕布尔问题

> ID：14663792
> 
> 赞同：0
> 
> 时间：2013-02-02T16:13:11.870
> 
> 标签：java, android, boolean, splash-screen

我有一个应用程序显示一个启动屏幕，然后是一个“Showonce”屏幕，我使用了应用程序首选项和一个布尔值“user_accept”来决定屏幕是否显示，无论 boolean = true 是否仍然显示页面都很麻烦，请参阅我的页面代码，非常感谢您的帮助:)。

```
package com.overclockerz.webtest;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.view.Window;
import android.widget.Toast;

public class SplashScreen extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.splash_layout);
        final SharedPreferences settings = getSharedPreferences("APP_PREFS",
                MODE_PRIVATE);
        final boolean hasAgreed = settings.getBoolean("user_accepted", false);
        Handler handler = new Handler();

        // run a thread after 2 seconds to start the home screen
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {
                if (hasAgreed == false){
                    Intent intent = new Intent(SplashScreen.this, ShowOnce.class);
                    SplashScreen.this.startActivity(intent);
                    Toast.makeText(getApplicationContext(), "DEBUG: USER HAS NOT ACCEPTED",Toast.LENGTH_LONG).show();
                }else if (hasAgreed == true){
                    Toast.makeText(getApplicationContext(), "DEBUG: USER HAS ACCEPTED",Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
                    startActivity(intent);
                    finish();
                }

                finish();
            }

        }, 2000); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called

    }
}

package com.overclockerz.webtest;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.Toast;

public class ShowOnce extends Activity implements OnClickListener {
    Button show_options_dialog, accept_button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.show_once);
        show_options_dialog = (Button) findViewById(R.id.show_options_dialog);
        accept_button = (Button) findViewById(R.id.accept_button);
        show_options_dialog.setOnClickListener(this);
        accept_button.setOnClickListener(this);

        }

    @Override
    public void onClick(View v) {
        if (v == show_options_dialog){
            Intent intent = new Intent(getApplicationContext(), SettingScreen.class);
            startActivity(intent);
        }
        else if (v == accept_button){
            SharedPreferences settings = getSharedPreferences("APP_PREFS",
                    MODE_PRIVATE);
            SharedPreferences.Editor prefEditor = settings.edit();
            prefEditor.putBoolean("user_accept", true);
            Toast.makeText(getApplicationContext(), "DEBUG: USER CLICKED ACCEPT", Toast.LENGTH_LONG).show();
            prefEditor.commit();
            Intent intent = new Intent(getApplicationContext(), MainActivity.class);
            startActivity(intent);
            finish();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:19:59.927

您正在保存`user_accept`并检查`user_accepted`

请使用 public static final String 来避免此类问题：

```
public static final String USER_ACCEPTED = "accepted";
.........
prefEditor.putBoolean(USER_ACCEPTED , true);
.........
 settings.getBoolean(USER_ACCEPTED , false); 
```

# qt - 如何将关于对话框添加到项目

> ID：14663794
> 
> 赞同：0
> 
> 时间：2013-02-02T16:13:35.917
> 
> 标签：qt, qt5, qdialog, about-box

我刚刚完成了我的第一个 Qt 5 项目，我想添加一个 About 对话框。是否有默认值，您如何使用它？如果没有，添加并编辑它并使用“帮助”菜单操作显示其内容的最佳方法是什么？任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:18:37.123

向项目中添加对话框的方式在一定程度上取决于您使用的开发环境。您始终可以使用 QtDesigner（Qt 的一部分）来设计您的 About 对话框，然后将其添加到您的项目中。要显示它，只需在连接到About QAction 对象的信号的插槽中调用类的`exec()`函数。`QDialog``triggered()`

# c - 使用 GMP 计算 Pi

> ID：14663795
> 
> 赞同：0
> 
> 时间：2013-02-02T16:13:38.510
> 
> 标签：c, gmp, pi

我正在尝试在这个系列中使用[GMP](http://gmplib.org/) (5.1.0) 计算 Pi： ![Pi = 3 + 4 / (2 * 3 * 4) - 4 / (4 * 5 * 6) + 4 / (6 * 7 * 8) - ...](../Images/1a15448e80401fe4a41d55fa387ecba3.png)

**我所做的是：**

```
#include <stdio.h>
#include <gmp.h>

mpz_t pi;
mpz_t next; // Every number in the serie that comes after 3

int a = 2, b = 3, c = 4; // Divisors. Everytime add 2 to all of them at the end of the loop
int i; // Loop counter

int main (void) {
    mpz_init (pi); mpz_init (next);
    mpz_set_str (pi, "3", 10);

    for (i = 2 ;; ++i) {
        printf ("%s\n", mpz_get_str (NULL, 10, pi));

        mpz_set_d (next, 4 / (a * b * c));

        if (i % 2 == 0)
            mpz_add (pi, pi, next);
        else
            mpz_sub (pi, pi, next);

        a += 2; b += 2; c += 2;
    }

    mpz_clear (next);
    mpz_clear (pi);
} 
```

**我在 64 位 Linux 上编译：**

```
gcc -Wall -pedantic -o foo foo.c -lgmp 
```

**输出：**

```
3
3
3
and so on 
```

**预期输出：**

```
3
3.1666...
3.1333...
3.1452...
3.1396...
and so on 
```

* * *

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:17:48.740

您的问题很可能在这一行：

```
mpz_set_d (next, 4 / (a * b * c)); 
```

在这一行上，您实际上是将 0 传递给`mpz_set_d`函数，我假设它设置了您的号码。

那是因为您正在`4 / (a * b * c)`使用整数算术进行评估。`(a * b * c)`总是大于`4`，所以这个表达式总是计算为 0。这*不是*你想要的。

您可能应该将`4`和`(a * b * c)`放入两个单独的 GMP 浮点数并使用 GMP 函数进行除法，将结果视为您的`next`变量。

**编辑：**查看 GMP 文档，`mpz`函数族处理整数。您可能需要使用`mpf`处理浮点数的`mpq`函数或处理有理数的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:20:40.257

你做整数除法：

```
mpz_set_d (next, 4 / (a * b * c));
//               ^   ^^^^^^^^^^^
//              int      int 
```

除以两个整数会将它们四舍五入到零，`0`在这种情况下，因为`a * b * c > 4`在每次迭代中。

你*可以*通过写来解决这个问题

```
mpz_set_d (next, 4.0 / (a * b * c));
//               ^^^   ^^^^^^^^^^^
//             double      int 
```

但是，您应该使用 GMP 执行除法，因为上面的代码受到本机数字类型的限制。此外，此除法的结果不应存储在 GMP 整数中，而应存储在 GMP 浮点数中：

```
mpf_t next;
//...
mpf_set_d(next, 4.0);
mpf_div(next, a);
mpf_div(next, b);
mpf_div(next, c); 
```

请注意，a、b、c 也必须是 GMP 浮点数才能使这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:24:08.727

`4 / (a * b * c)`始终为零。

# matlab - 如何使用符号对象求解简单的线性代数方程？

> ID：14663796
> 
> 赞同：3
> 
> 时间：2013-02-02T16:13:44.337
> 
> 标签：matlab, linear-algebra, symbolic-math, algebra

这可能非常简单，但我在设置矩阵以使用符号对象求解两个线性方程时遇到了麻烦。

方程在表格上：

```
(1) a11*x1 + a12*x2 + b1 = 0
(2) a21*x1 + a22*x2 + b2 = 0 
```

所以我有一个向量 {E}：

```
 [ a11*x1 + a12*x2 + b1 ]
{E} = [ a21*x1 + a22*x2 + b2 ] 
```

我想得到一个矩阵 [A] 和一个向量 {B}，这样我就可以解方程，即 [A]*{X} + {B} = 0 => {X} = -[A]{B}。

在哪里

```
 [ x1 ]
{X} = [ x2 ]

      [ a11 a12 ]
[A] = [ a21 a22 ]

      [ b1 ]
{B} = [ b2 ] 
```

矩阵 [A] 只是 {E} 的雅可比矩阵，但我必须对 {E} 执行什么操作才能得到 {B}，即不包含 x 的项？

这就是我所做的：

```
x = sym('x', [2 1]);
a = sym('a', [2 2]);
b = sym('b', [2 1]);

E = a*x + b;
A = jacobian(E,x);

n = length(E);
B = -E;
for i = 1:n
    for j = 1:n
        B(i) = subs(B(i), x(j), 0);
    end
end

X = A\B 
```

我在想一定有一些功能可以在一行中执行此操作。

所以基本上我的问题是：我能做些什么来代替那些 for 循环？

（我意识到这是非常简单的东西，很容易通过搜索找到。问题是我不知道这叫什么，所以我不知道要找什么。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:24:25.480

这只是`B = subs(B,x,[0 0])`

# java - 编写一个计算数组中完美和的函数？

> ID：14663797
> 
> 赞同：-6
> 
> 时间：2013-02-02T16:13:54.723
> 
> 标签：java, algorithm

完美和是两个或多个数组元素的总和，其和等于给定数。如果没有找到返回 999。

我的方法签名是：

```
public static int persfectSum(int arr[], int input) 
```

例如：

```
arr={2,3,5,6,8,10}
input = 10;

5+2+3= 10
2+8 = 10
So, the output is 2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:19:06.927

**它是[子集和问题的一种变体——对子集](http://en.wikipedia.org/wiki/Subset_sum_problem)**的大小有额外的限制（大于 1）。

问题是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)，但是对于相对较小的整数，可以使用[伪多项式时间内的动态规划](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)来解决。

对于小型数组可行的一种可能更简单的替代方案是蛮力 - 只需搜索所有可能的子集，并验证每个子集是否与总和匹配。

我相信这些指南足以让您开始编写问题并自行解决问题（HW？）。

祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-10-13T12:41:56.757

```
int PerfectSums(int n, int a[], int sum)
{

    int dp[n + 1][sum + 1] ;
    dp[0][0] = 1;

    for (int i = 1; i <= sum; i++)
        dp[0][i] = 0;

    for (int i = 1; i <= n; i++)
        dp[i][0] = 1;

    for (int i = 1; i <= n; i++)
    {
        for (int j = 1; j <= sum; j++)
        {

            if (a[i - 1] > j)
                dp[i][j] = dp[i - 1][j];

            else
            {
                dp[i][j] = dp[i - 1][j] + dp[i - 1][j - a[i - 1]];
            }
        }
    }

    return (dp[n][sum] == 0 ? 999 : dp[n][sum] ) ;
} 
```

# iphone - 如果其他代码以更好的方式检查，我怎么能写这个？

> ID：14663798
> 
> 赞同：1
> 
> 时间：2013-02-02T16:14:02.490
> 
> 标签：iphone, ios, objective-c, conditional

如果其他代码检查，这是编写此代码的最佳方法吗？

```
// set the default to Italy if countrySaved is null
if (lang == NULL) {
    lang = @"it";
}

// otherwise set the correct lang based on the country chosed and saved in nsuserdefaults
if ([countrySaved isEqual:@"Brazil"]) {
    lang = @"br";
}

else if ([countrySaved isEqual:@"Spain"]) {
    lang = @"es";
}

else if ([countrySaved isEqual:@"Italy"]) {
    lang = @"it";
}

else if ([countrySaved isEqual:@"United States"]) {
    lang = @"us";
}

else if ([countrySaved isEqual:@"United Kingdom"]) {
    lang = @"uk";
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T16:16:09.773

将语言 ID 存储在字典中：

```
NSDictionary *languageIDs = @{
    @"Brazil" : @"br",
    @"Spain" : @"es",
    @"Italy" : @"it",
    @"United States" : @"us",
    @"United Kingdom" : @"uk"
}; 
```

`lang`然后简单地从所述字典中分配：

```
lang = languageIDs[countrySaved];

if (!lang) {
    lang = languageIDs[@"Italy"];
} 
```

或者我使用三元运算符的更短的方法：

```
lang = languageIDs[countrySaved] ?: languageIDs[@"Italy"]; 
```

* * *

此外，您可能应该从 plist 文件中加载它们或使用它们`NSString consts`，以避免最终出现冗余以及分散在您的代码中的不可维护的文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T16:18:46.053

您可以使用 Dictionary`(key="Country", value="code")`进行高效操作。

# css - CSS 两列在小屏幕上变成一列

> ID：14663800
> 
> 赞同：2
> 
> 时间：2013-02-02T16:14:08.027
> 
> 标签：css, css-float, multiple-columns

我刚开始不再做所有事情，而是在玩 div 和 floats。

我有一个主页，需要在顶部有两列，在下方有一个。 ![大屏幕](../Images/5ee9b035923ecdd314662693fe22d209.png)

当用户有一个小屏幕作为手机时，它需要将每个盒子放在每一行上作为例子。 ![在此处输入图像描述](../Images/f2eddb60bce191439405d5a3359e9d53.png)

**这样做的正确方法是什么？这显示了代码：http: [//jsfiddle.net/boje/cMF4P/1/](http://jsfiddle.net/boje/cMF4P/1/)**

这就是主页现在所做的。 ![在此处输入图像描述](../Images/39f13a81f4faa285bdea283374e32f09.png)

部分代码

```
/* =====  form2  ===== */
fieldset.fieldsetLeft {
    width:47%;
    float:left;
    padding: 10px;
    margin-bottom: 15px;
}
fieldset.fieldsetRight {
    width: 45%;
    float:right;
    padding: 10px;
    margin-bottom: 15px;
}
.clearBoth {
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:24:02.097

在您的代码中，您可以将右侧浮动更改为在右侧框中向左浮动，它将按预期工作。

[http://jsfiddle.net/PzAsJ/](http://jsfiddle.net/PzAsJ/)

```
fieldset.fieldsetRight {
    width: 45%;
    float:left;
    padding: 10px;
    margin-bottom: 15px;
} 
```

但是看看*css3 媒体查询*，它给了你更多的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:22:15.673

对于智能手机和平板电脑，您可以制作一个专用的 css 文件，该文件将重载普通 css 样式表：

在您的标头 .html 中：

```
<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="smart_tablet.css" type="text/css" /> 
```

然后进入 smart_tablet.css 重新定义具体的：

```
fieldset.fieldsetLeft {
    width:100%;
    float: none;
}
fieldset.fieldsetRight {
    width: 100%;
    float: none;
} 
```

# javascript - 代码仅限于纯 Javascript；需要jquery翻译

> ID：14663805
> 
> 赞同：-1
> 
> 时间：2013-02-02T16:14:36.547
> 
> 标签：javascript, jquery

所以，我正在为我的一个好朋友写一个网站。我知道纯 JavaScript，但 jQuery 对我来说只是一团糟。我没有花时间学习它。不过，当我在互联网上找到它时，我不介意使用它。这就是这个[jsFiddle](http://jsfiddle.net/jtbowden/ykbgT/2/)发生的事情。当我找到它并用它在我构建的漫画阅读器上切换页面时，我非常高兴。

我希望更改的代码在下面的一个工作示例中（如果 jsFiddle 死了并且有人想要 jsFiddle 用户 jtbowden 提供的这个很棒的代码）。

```
<html>
<head>

<script type="text/javascript" src="./jquery-1.js"></script>

<script type="text/javascript">

$(window).load(function(){
$('.box').click(function() {

$(this).animate({
    left: '-50%'
}, 500, function() {
    $(this).css('left', '150%');
    $(this).appendTo('#container');
});

$(this).next().animate({
    left: '50%'
}, 500);
});
})

</script>

<style type="text/css">
body {
padding: 0px;    
}

#container {
position: absolute;
margin: 0px;
padding: 0px;
width: 100%;
height: 310px;
overflow: hidden; 
background-color:black; 
}

.box {
position: absolute;
width: 23%;
height: 300px;
line-height: 300px;
font-size: 50px;
text-align: center;
border: 2px solid black;
left: 150%;
top: 5px;
margin-left: -25%;
}

img.cover {
position:absolute;
display:block;
margin-left:5%;
margin-right:auto;
top:5%;
height:90%
}

img.cover:hover {
position:absolute;
display:block;
margin-left:auto;
margin-right:auto;
top:0%;
height:100%
}

#box1 {
background-color: green;
left: 30%;
}

#box2 {
background-color: yellow;
}

#box3 {
background-color: red;
}

#box4 {
background-color: orange;
}

#box5 {
background-color: blue;
}
</style>
</head>

<body>
<div id="container">
<div id="box1" class="box"></div>
<div id="box2" class="box">Div #2</div>
<div id="box3" class="box">Div #3</div>
<div id="box4" class="box">Div #4</div>
<div id="box5" class="box">Div #5</div>
</div>
</body>
</html> 
```

然而，我的朋友不喜欢这个代码，因为他和我一样，看不懂它。这是他的网站，他付给我的薪水足够高，所以他是老板。他要求我将这段代码从 jQuery 重写为纯 JavaScript，以便他能够理解它，这将允许他在未来需要或只是觉得喜欢时进行自己的更改。问题是，我不知道怎么做。我只是找到了我想要的代码，将其添加到站点，并编辑了 CSS 以适应我的需要。我不知道这段代码是如何工作的，也不知道我需要做什么才能使它成为纯 JavaScript。

我告诉他，但他没有退缩。我被限制在网站上使用纯 JavaScript、HTML5 和 CSS3。他不会把剩下的钱付给我，直到它被放入纯 JavaScript 并且租金到期。所以，我有点希望有人能帮助我重新发明轮子，并将这个[jsFiddle](http://jsfiddle.net/jtbowden/ykbgT/2/)中的 jQuery 代码翻译成纯 JavaScript。

至少，你能不能带我浏览一下 jQuery 库中的代码和位，并告诉我这是在做什么，而不是移动 left 属性？它是如何显示动画的（我认为，这是 .animate 部分）？我以为浏览器会在中间跳过帧？

我、我的朋友和（最终）我的房东将不胜感激任何帮助。

提前致谢。

编辑：我用 CSS 动画重写了这个：

```
 <html>
    <head>

    <script type="text/javascript">
    function divSwitch(num) {
    var currentBox=document.getElementById("box"+num);
    if (num>=5) {
    num=0;
    }
    var nextBox=document.getElementById("box"+(num+1));

    var checkedButton = getCheckedRadio(document.forms.setOption.elements.aniOption);
    if (checkedButton) {
    switch(checkedButton.value) {
    case "R":
    currentBox.className="outFromRtL";
    nextBox.className="inFromRtL";
    break;

    case "L":
    currentBox.className="outFromLtR";
    nextBox.className="inFromLtR";
    break;  

    case "N":
    if (currentBox.className!="box") {
    for (var q=1; q<=5; q++) {
    var setBoxBack=document.getElementById("box"+q);
    setBoxBack.className="box";
    }
    }
    currentBox.style.left='-50%';
    nextBox.style.left='50%';
    break;

    default:
    alert("Well... That's not supposed to happen!  How did you break it!?");
    break;
    }
    }
    }

    function getCheckedRadio(radio_group) {
        for (var i = 0; i < radio_group.length; i++) {
            var button = radio_group[i];
            if (button.checked) {
                return button;
            }
        }
        return undefined;
    }
    </script>

    <style type="text/css">
        body {
        padding: 0px;    
    }

    #container {
        position: absolute;
        margin: 0px;
        padding: 0px;
        width: 100%;
        height: 310px;
        overflow: hidden; 
    background-color:black; 
    }

    .box {
        position: absolute;
        width: 23%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: 150%;
        top: 5px;
    }

    .inFromRtL {
        position: absolute;
        width: 23%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: 50%;
        top: 5px;

    -moz-animation-duration: 850ms;
    -moz-animation-name: rightSlideIn;
    -moz-animation-fill-mode: forwards;
    }

    @-moz-keyframes rightSlideIn {
          from {
            left:150%;
          }
          to {
            left:50%;
          }
    }

    .outFromRtL {
        position: absolute;
        width: 23%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: -50%;
        top: 5px;

    -moz-animation-duration: 850ms;
    -moz-animation-name: rightSlideOut;
    -moz-animation-fill-mode: forwards;
    }

    @-moz-keyframes rightSlideOut {
          from {
            left:50%;
          }
          to {
            left:-150%;
          }
    }

    .inFromLtR {
        position: absolute;
        width: 23%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: 50%;
        top: 5px;

    -moz-animation-duration: 850ms;
    -moz-animation-name: leftSlideIn;
    -moz-animation-fill-mode: forwards;
    }

    @-moz-keyframes leftSlideIn {
          from {
            left:-150%;
          }
          to {
            left:50%;
          }
    }

    .outFromLtR {
        position: absolute;
        width: 23%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: 150%;
        top: 5px;

    -moz-animation-duration: 850ms;
    -moz-animation-name: leftSlideOut;
    -moz-animation-fill-mode: forwards;
    }

    @-moz-keyframes leftSlideOut {
          from {
            left:50%;
          }
          to {
            left:150%;
          }
    }

    #box1 {
        background-color: green;
        left: 50%;
    }

    #box2 {
        background-color: yellow;
    }

    #box3 {
        background-color: red;
    }

    #box4 {
        background-color: orange;
    }

    #box5 {
        background-color: blue;
    }
      </style>
    </head>

    <body>
    <div id="container">
    <div id="box1" class="box" onclick="divSwitch(1);">Div #1</div>
    <div id="box2" class="box" onclick="divSwitch(2);">Div #2</div>
    <div id="box3" class="box" onclick="divSwitch(3);">Div #3</div>
    <div id="box4" class="box" onclick="divSwitch(4);">Div #4</div>
    <div id="box5" class="box" onclick="divSwitch(5);">Div #5</div>
    </div>
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <div id="animationOptions">
    <form id="setOption">
    <input type="radio" name="aniOption" id="L" value="L" checked="true">Left to Right
    <input type="radio" name="aniOption" id="R" value="R">Right to Left
    <input type="radio" name="aniOption" id="N" value="N">None
    </form>
    </div>
    </body>
    </html> 
```

是的，它需要更多的代码，但它仍然只有 5kb，而且我不需要 75kb 的 jQuery 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:34:07.263

有两种方法可以解决这个问题，首先使用[jsapi.info](http://jsapi.info/jquery/1.8.0/ "jsapi.info")它会显示具体方法和函数的来源，另一种方法只是查看和研究[源代码](http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js)，这就是我在某些人没有好的文档时所做的模块或一些库，正如 Paul Irish 所说的“专业文档”，因为你知道纯 JavaScript，所以你应该很容易阅读。希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T16:52:05.607

它不可能比它更简单。如果你展开 jQuery，你会发现它背后的代码相对于你现在看到的来说非常复杂。查看 jquery.com 文档中的方法会更容易。我会为你评论。

```
// when the window is loaded, do the code within
$(window).load(function() {
  // now i can assign events since the dom is loaded
  // but you could use $(document).ready instead

  // when any class with "box" is clicked, do the code within
  // this is binding a click event to all elements having a "box" class
  $('.box').click(function() {

    // animate the currently clicked "box" element
    $(this).animate({
      // move it left 50% and take 500 milliseconds to do it
      left: '-50%' 
    }, 500, function() {
      // the code here is called once the animation has completed
      // set the style to left 150%
      $(this).css('left', '150%');
      // put the box inside the element with id=container
      $(this).appendTo('#container');
    });

    // animate the element just next to the box element 
    // moving it left 50% taking 500 milliseconds to do it.
    $(this).next().animate({ left: '50%' }, 500);

  });

}); 
```

现在想象一下，您必须使用 setInterval 和缓动函数编写动画代码，更不用说跨浏览器事件了。让这段代码更长更复杂 10 倍，你可能会做类似的事情。

# spring - spring 集成上下文文件（或路由）的动态加载

> ID：14663809
> 
> 赞同：0
> 
> 时间：2013-02-02T16:14:57.777
> 
> 标签：spring, spring-integration

我有 spring MVC 应用程序，我将在运行时加载多个组件（jar）。每个组件都可以创建自己的主题/队列。在加载新组件时，我还需要构建一个特殊的集成路由（包括通道和其他组件）。并在我删除组件时删除路线。我在考虑动态生成一个带有路由的spring xml文件并加载到容器中。这是可能的还是我有更好的选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:56:34.200

该[`dynamic-ftp`](https://github.com/SpringSource/spring-integration-samples/tree/master/advanced/dynamic-ftp)示例使用该技术...

它使用 Spring 3 环境特性将属性传递给上下文的每个实例。如果这些上下文需要访问主上下文中的元素（通道等），您可以将动态上下文设置为它的子上下文。[在这里](http://forum.springsource.org/showthread.php?128303-Dynamic-Inbound-Channel-Adapter-creation)讨论...

# url - 在 URL 中使用逗号有时会破坏 URL？

> ID：14663813
> 
> 赞同：7
> 
> 时间：2013-02-02T16:15:55.313
> 
> 标签：url, url-rewriting, hyperlink, seo

有人知道在 SEO 友好的 URL 中使用逗号有什么问题吗？我正在使用一些在其 SEO 友好 URL 中使用大量逗号的软件；但我 100% 确定我已经看到一些情况，其中某些程序/平台无法正确识别 URL 并在第一个逗号后切断 URL 的“链接”。

我刚刚在 SMF 论坛上用 Thunderbird、gmail、hotmail 和没有问题的方式进行了测试；但是我知道我以前见过这个问题。

所以我的问题是，有什么特别的东西会导致某些平台停止用逗号链接 URL？比如逗号后面的某个字符？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-03T20:43:58.843

届时将有*无数*的实现将切断自动链接。与许多其他角色一样。但这不是因为使用了这些字符而导致的问题，而是因为错误/不完整的实现。

例如，请参见这个站点 Stack Overflow。`*`它会在手动输入/粘贴此 URL 时切断链接（[请参阅错误](https://webapps.meta.stackexchange.com/q/2254/24166)；如果它得到修复，这是[它的屏幕截图](https://i.stack.imgur.com/52W7W.png)）：

*   [http://wayback.archive.org/web/*/http://www.example.com/](http://wayback.archive.org/web/*/http://www.example.com/)

但是当使用超链接语法时，它可以正常工作：

*   [http://wayback.archive.org/web/*/http://www.example.com/](http://wayback.archive.org/web/*/http://www.example.com/)

`*`HTTP URL 路径中允许使用该字符，因此链接检测*应该*识别出第一个 URL，而不是在`*`.

* * *

关于逗号：

逗号是[保留字符](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)，其含义与 URL[路径](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)相关（粗体强调我的）：

> 除了层次路径中的点段之外，路径段被通用语法认为是不透明的。生成 URI 的应用程序通常使用段中允许的保留字符来分隔特定于方案或特定于解引用处理程序的子组件。例如，分号 (";") 和等号 ("=") 保留字符通常用于分隔适用于该段的参数和参数值。 **逗号 (",") 保留字符通常用于类似目的。** 例如，一个 URI 生产者可能使用诸如“name;v=1.1”之类的段来指示对“name”版本 1.1 的引用，而另一个 URI 生产者可能使用诸如“name,1.1”之类的段来指示相同。

因此，如果您不打算将逗号用作保留字符的函数，则可能需要使用`%2C`. 用户从浏览器的地址栏中复制这样的 URL 会将其粘贴到编码形式中，因此它几乎可以在任何地方工作。

然而，特别是*因为*它是一个保留字符，未编码的形式也应该可以工作。

# javascript - jquery插入方法

> ID：14663820
> 
> 赞同：0
> 
> 时间：2013-02-02T16:16:18.220
> 
> 标签：javascript, jquery

看看这段代码：

```
 $('li').add('<p id="new">new paragraph</p>')
 .css('background-color', 'red'); 
```

尽管新段落已经创建并且它的背景颜色发生了变化，但它仍然没有出现在页面上。要将其放置在页面上，我们可以将其中一种插入方法添加到链中。但是该方法是什么以及如何将其插入到链中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:17:43.410

使用 append 而不是 add ：

```
$('li').append('<p id="new">new paragraph</p>')
  .css('background-color', 'red'); 
```

[add](http://api.jquery.com/add/)仅更改 jQuery 集，而不更改 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:24:05.170

为什么不做这样的事情

```
$('#li-id').html('< p id="new">new paragraph< /p>'); 
```

或者

```
$('#li-id').append('< p id="new">new paragraph< /p>');
$('#new').css('background-color', 'red'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:31:31.043

你似乎想要这个：

```
$('<p id="new">new paragraph</p>')
  .css('background-color', 'red')
  .appendTo(something); // a selector, jQuery element etc 
```

# android - Android - 是否可以在运行时判断当前设备是亚马逊 Kindle 还是 Barnes and Noble 的 NOOK？

> ID：14663824
> 
> 赞同：0
> 
> 时间：2013-02-02T16:16:37.027
> 
> 标签：android, kindle, nook

我有一个 apk 文件，我上传到 Kindle 商店和 NOOK 商店（都是阅读器平板电脑），我在应用程序中有一个位置，我想知道该设备是亚马逊设备还是来自 Barnes and Noble。那可能吗？如何在运行时找出这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:27:09.757

角落颜色规格： [https ://nookdeveloper.barnesandnoble.com/product/nook-color-specs.html](https://nookdeveloper.barnesandnoble.com/product/nook-color-specs.html)

包含 CommonsWare 提到的 android.os.Build。

Kindle 也是如此： [https ://developer.amazon.com/sdk/fire/specifications.html](https://developer.amazon.com/sdk/fire/specifications.html)

无论如何，使用 android.os.Build.MANUFACTURER 似乎更好。它将是“亚马逊”与否。

它的副本是：[检测应用程序正在 Kindle Fire 上运行](https://stackoverflow.com/questions/8309624/detect-app-is-running-on-kindle-fire)

# qr-code - 从缺少最后 2 行的 QR 码中恢复数据

> ID：14663828
> 
> 赞同：0
> 
> 时间：2013-02-02T16:17:10.993
> 
> 标签：qr-code

比特币。我在一个二维码上有 250BTC，我现在才发现最后两行丢失了。

如果我的数学是正确的，2 行（宽度约为 25 像素，所以 2 行 = 50 个只能是黑色或白色的框）

```
2^50 = 10^15 combinations. 
```

二维码产生一个 30 个字符的散列，我有散列的前 13 个字符。

你有什么方法建议我试着追回这笔钱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:27:39.177

最后两行中的一些是左下角的查找器模式的一部分，它没有任何信息（您可以轻松地将其重新绘制）。它被 1 个模块的白色排水沟包围，下一列（向右移动）是格式信息部分的一部分。这本身是可纠错的，但也在右上角复制。你不需要这个位。

其余的确实是 v2 代码中的信息。您只缺少 16*2 = 32 位或 4 个码字。QR 码 L 级的最小纠错有 10 个 EC 码字。它可以纠正10个错误。只需将该区域留白，所有的代码字都会出错，但这很容易纠正，任何解码器都有空间。

只需退回取景器模式即可。

# php - symfony2 唯一验证器无法更新一行

> ID：14663830
> 
> 赞同：0
> 
> 时间：2013-02-02T16:17:21.533
> 
> 标签：php, symfony, doctrine-orm, yaml

我创建了一个具有唯一变量的实体。我将 ORM 和验证器都设置为唯一的。这允许我创建具有唯一名称的新行，但不允许我更新现有行，即使我只是指定更新它。

验证.yml：

```
# src/Battlemamono/DatabaseBundle/Resources/config/validation.yml

Battlemamono\DatabaseBundle\Entity\Mamono:
    constraints:
        - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: 
            fields: name
            message: A mamono with this name already exists.
    properties:
        id:
            - Type: 
                type: integer

        name:
            - NotBlank: ~
            - MaxLength: 30
            - Type: 
                type: string

        family1:
            - NotBlank: ~
            - MaxLength: 30
            - Type: 
                type: string
            - Choice : { callback: getFamily }

        family2:
            - MaxLength: 30
            - Type: 
                type: string
            - Choice : { callback: getFamily }

        element1:
            - NotBlank: ~
            - MaxLength: 30
            - Type: 
                type: string
            - Choice : { callback: getElements }

        element2:
            - MaxLength: 30
            - Type: 
                type: string
            - Choice : { callback: getElements }

        disposition:
            - NotBlank: ~
            - MaxLength: 100
            - Type: 
                type: string
        diet:
           - NotBlank: ~
           - MaxLength: 100
           - Type: 
                type: string

        previousForm:
           - MaxLength: 30
           - Type: 
                type: string

        nextForm:
           - MaxLength: 30
           - Type: 
                type: string

        evolution:
           - MaxLength: 30
           - Type: 
                type: string

        evolutionLove:
          - Type: 
                type: bool

        tags:
          - Type: 
                type: string
          - MaxLength: 100

        description:
         - Type: 
                type: string
         - NotBlank: ~ 
```

执行此操作的操作：

```
public function editProccessAction($id, Request $request)
    {
        $form = $this->createForm(new MamonoType());
        if ($request->isMethod('POST'))
        {
            $form->bind($request);

            if ($form->isValid())
            {
                $FormData = $form->getData();
                $em = $this->getDoctrine()->getManager();
                $mamono = $em->getRepository('BattlemamonoDatabaseBundle:Mamono')->find($id);

                    if (!$mamono) {
                        $this->get('session')->getFlashBag()->add('notice', 'There is no such mamono in the database. Create it instead!');
                        return $this->redirect($this->generateUrl('battlemamono_database_create'));
                    }
                $mamono->setName($FormData->getName());
                $mamono->setFamily1($FormData->getFamily1());
                $mamono->setFamily2($FormData->getFamily2());
                $mamono->setElement1($FormData->getElement1());
                $mamono->setElement2($FormData->getElement2());
                $mamono->setDisposition($FormData->getDisposition());
                $mamono->setDiet($FormData->getDiet());
                $mamono->setPreviousForm($FormData->getPreviousForm());
                $mamono->setNextForm($FormData->getNextForm());
                $mamono->setEvolution($FormData->getEvolution());
                $mamono->setEvolutionLove($FormData->getEvolutionLove());
                $mamono->setTags($FormData->getTags());
                $mamono->setDescription($FormData->getDescription());
                $mamono->setUpdatedBy();
                $em->flush();

                $this->get('session')->getFlashBag()->add('notice', 'the Mamono was updated.');
                return $this->redirect($this->generateUrl('battlemamono_database_homepage'));
            }
            else
            {
                return new Response($form->getErrorsAsString());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:25:15.247

您实际上并没有保存您的实体：

```
//...
$mamono->save();
$em->flush(); 
```

# hibernate - save(flush: true) 不刷新会话

> ID：14663836
> 
> 赞同：0
> 
> 时间：2013-02-02T16:17:51.897
> 
> 标签：hibernate, session, grails, transactions, grails-orm

我正在创建一个带有多个域类和控制器的新 grails 应用程序。我所有的控制器都有 save()、update() 和 list() 的工作方法，例如

```
def update(Long id, Long version) {
    def crawlerConfigInstance = CrawlerConfig.get(id)
    if (!crawlerConfigInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'crawlerConfig.label', default: 'CrawlerConfig'), id])
        redirect(action: "list")
        return
    }

    if (version != null) {
        if (crawlerConfigInstance.version > version) {
            crawlerConfigInstance.errors.rejectValue("version", "default.optimistic.locking.failure",
                    [message(code: 'crawlerConfig.label', default: 'CrawlerConfig')] as Object[],
                    "Another user has updated this CrawlerConfig while you were editing")
            render(view: "edit", model: [crawlerConfigInstance: crawlerConfigInstance])
            return
        }
    }

    crawlerConfigInstance.properties = params

    if (!crawlerConfigInstance.save(flush: true)) {
        render(view: "edit", model: [crawlerConfigInstance: crawlerConfigInstance])
        return
    }

    flash.message = message(code: 'default.updated.message', args: [message(code: 'crawlerConfig.label', default: 'CrawlerConfig'), crawlerConfigInstance.id])
    redirect(action: "show", id: crawlerConfigInstance.id)
} 
```

这实际上是 IDE 自动生成/搭建的方法

但是，现在我添加了一个额外的控制器方法，它应该通过域对象列表运行并相应地更新它们。获取列表，更改属性和验证成功。

save(flush:true) 不会抛出任何错误并按预期返回更新的域对象。但是，检查休眠 SQL 语句，我看到的只是 SELECTS，没有更新。事实上，如果我在 save() 之后直接在域对象上调用 delete()，我会在域对象上得到并发事务异常。

我的控制器方法看起来像

```
def doSomething() {     

    def results = CrawlerConfig.findAll(bQ)

    results.each { crawlerConfigInstance ->

            crawlerConfigInstance.needsReview = true

            if (!crawlerConfigInstance.save(flush:  true)) {
                render(view: "show", model: [crawlerConfigInstance: crawlerConfigInstance])
                return
            }
    }

    redirect(action: "list")
} 
```

很简单。如果我检查脏字段，needsReview 在 save() 之前被标记为脏。save() 更新对象的版本。

我目前仍然使用 h2:mem 作为数据库。

对我来说，交易似乎还没有完成。但我不明白为什么或如何才能完成它。

提前谢谢

**Ondrej POST 后编辑**

创建了一个服务（被注入并正常调用）

```
package lizard 
```

导入 org.springframework.transaction.annotation.Transactional

@Transactional 类 CrawlerConfigPersistenceService {

```
static transactional = true

def checkRequirementsForCrawlerConfigList(String query) {

    def results = CrawlerConfig.findAll(query)

    results.each { crawlerConfigInstance ->

        crawlerConfigInstance.needsReview = true

        if (!crawlerConfigInstance.save(flush: true)) {
            println crawlerConfigInstance.errors.getAllErrors()
            return
        }

    }
}
} 
```

但这会导致完全相同的行为，一切看起来都很好，除了 hibernate 没有更新语句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:25:30.620

将 save()、update() 和 list() 的方法从控制器移到服务。在执行此操作之前，请查看此处并阅读服务章节： http: [//grails.org/doc/latest/guide/services.html](http://grails.org/doc/latest/guide/services.html)

# wcf - 添加了 WCF 服务参考。但是 Reference.svcmap 和 Reference.cs 在哪里呢？

> ID：14663840
> 
> 赞同：0
> 
> 时间：2013-02-02T16:18:29.070
> 
> 标签：wcf

我正在从客户端访问 WCF 服务。客户端已正确配置以访问代理。但是，我希望在 Visual Studio 2012 的 SERVICE REFERENCES 文件夹下找到 2 个文件（reference.svcmap、reference.cs）。相反，我只能看到一个 localhost（这是指创建的客户端代理的命名空间）。从哪里可以看到reference.svcmap 和reference.cs？ ![WCF](../Images/21fe315180c158ab9b633094bfb60b27.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:49:24.033

您需要在解决方案资源管理器中突出显示项目 ( `ClientIndigo`)，然后单击`Show All Files`解决方案资源管理器顶部工具栏中的按钮。

在 Visual Studio 2010 中，这看起来像这样（我自己还没有升级到 VS2012）：

![在此处输入图像描述](../Images/5b4b80482ec1444d2d04c56d109169a3.png)

这些文件“嵌套”在服务参考下方，默认情况下不显示。

# objective-c - 将 NSString 转换为 Json

> ID：14663847
> 
> 赞同：1
> 
> 时间：2013-02-02T16:18:42.067
> 
> 标签：objective-c

我搜索了很多，我确实找到了很多答案，但不是我需要的特定答案——这很简单。

我想采用 2 个**不同** `NSString`的用户类型，并从它们创建一个 json 以发送到 server 。

我写了这个：

```
-(id)stringToJason:(NSString*)stringData 
{
    NSData *data = [stringData dataUsingEncoding:NSUTF8StringEncoding];
    id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
    return json;
} 
```

但是有些东西我不明白。这将 1 个 nsstring 作为 json 返回。

我将如何取 2 个不同`NSStrings`的，并从它们一起创建 json？可以说：（`userName:me` 当每个都来自文本字段时）

json 应该看起来像：

```
"Username": "me",
    "Firstname": "r",
    "Lastname": "k", 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T16:51:42.517

如果您想生成如下所示的 JSON：

```
{
   "Username":"me",
   "Firstname":"r",
   "Lastname":"k"
} 
```

Where`r`和`k`是从文本字段中获取的值，您可以按照以下方式编写一个方法：

```
-(NSData*)jsonFromFirstName:(NSString*)firstName andLastName:(NSString*)lastName
{
    NSDictionary* dic = @{@"Username" : @"me", @"Firstname" : firstName, @"Lastname" : lastName};
    // In production code, _check_for_errors!
    NSData* json = [NSJSONSerialization dataWithJSONObject:dic options:0 error:nil];
    return json;
} 
```

您将调用此方法，将`r`( `firstName`) 和`k`( `lastName`) 值传递给它。它将构造一个具有所需 JSON 结构和所需值的字典。然后，您将使用`NSJSONSerialization`'`-dataWithJSONObject:options:error`选择器将字典转换为 JSON 数据对象（存储在 NSData 对象中）。然后，您可以将数据发送到服务器！

在方法的第一行创建的字典可以任意扩展，甚至可以传入非字符串（例如数字、数组，甚至其他字典！）。

# google-apps-script - 以 HTML 格式获取 Google 文档

> ID：14663852
> 
> 赞同：19
> 
> 时间：2013-02-02T16:18:53.957
> 
> 标签：google-apps-script, google-docs

我有一个疯狂的想法，我可以使用 Google Drive Documents 为不成熟的用户朋友建立一个网站博客来支持它。我能够创建一个 contentService 来编译文档列表。但是，我看不到将文档转换为 HTML 的方法。我知道 Google 可以在网页中渲染文档，所以我想知道是否有可能获得渲染版本以用于我的内容服务。

这可能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-02-13T15:59:22.223

你可以试试这段代码：

```
 function getGoogleDocumentAsHTML(){
  var id = DocumentApp.getActiveDocument().getId() ;
  var forDriveScope = DriveApp.getStorageUsed(); //needed to get Drive Scope requested
  var url = "https://docs.google.com/feeds/download/documents/export/Export?id="+id+"&exportFormat=html";
  var param = {
    method      : "get",
    headers     : {"Authorization": "Bearer " + ScriptApp.getOAuthToken()},
    muteHttpExceptions:true,
  };
  var html = UrlFetchApp.fetch(url,param).getContentText();
  Logger.log(html);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-04T19:01:29.187

**Node.js 解决方案**

使用[Google APIs Node.js 客户端](https://www.npmjs.com/package/googleapis)

以下是如何使用 google drive 的 node.js 客户端库将 google doc 获取为 html 的方法。

```
// import googleapis npm package
var google = require('googleapis');

// variables
var fileId = '<google drive doc file id>',
    accessToken = '<oauth access token>';

// oauth setup
var OAuth2 = google.auth.OAuth2,
    OAuth2Client = new OAuth2();

// set oauth credentials
OAuth2Client.setCredentials({access_token: accessToken});

// google drive setup
var drive = google.drive({version: 'v3', auth: OAuth2Client});

// download file as text/html
var buffers = [];
drive.files.export(
    {
        fileId: fileId,
        mimeType: 'text/html'
    }
)
    .on('error', function(err) {
        // handle error
    })
    .on('data', function(data) {
        buffers.push(data); // data is a buffer
    })
    .on('end', function() {
        var buffer = Buffer.concat(buffers),
            googleDocAsHtml = buffer.toString();
        console.log(googleDocAsHtml);
    }); 
```

查看[Google Drive V3 下载文档](https://developers.google.com/drive/v3/web/manage-downloads#downloading_google_documents)以了解更多语言和选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T17:22:14.523

GAS 中没有直接的方法来获取文档的 HTML 版本，这是一个相当古老的[增强请求](http://code.google.com/p/google-apps-script-issues/issues/detail?id=585)，但Henrique Abreu[最初描述的解决方法](http://productforums.google.com/forum/#!searchin/apps-script/convert$20html/apps-script/gjEVtRd-kIo/rrRPCq4hRAQJ)效果很好，我一直在使用它......

授权过程中唯一烦人的事情需要从脚本编辑器中调用，这使得在共享应用程序中使用起来很困难（对于“脚本无法”的用户），但这只会发生一次；）。

还有一个由[Romain Vialard创建的](https://stackoverflow.com/users/1370762/romain-vialard)[库](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/driveservice)，它使事情（有点）更容易......并添加了一些其他有趣的功能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-24T10:23:10.637

以下是根据 Enrique 发布的想法对新版本的 goole AOuth 进行的一些剪辑：

```
function exportAsHTML(){
  var forDriveScope = DriveApp.getStorageUsed(); //needed to get Drive Scope requested
  var docID = DocumentApp.getActiveDocument().getId();
  var url = "https://docs.google.com/feeds/download/documents/export/Export?id="+docID+"&exportFormat=html";
  var param = {
    method      : "get",
    headers     : {"Authorization": "Bearer " + ScriptApp.getOAuthToken()},
    muteHttpExceptions:true,
  };
  var html = UrlFetchApp.fetch(url,param).getContentText();
  return html; 

} 
```

然后使用通常的mailApp：

```
function mailer(){
   var docbody = exportAsHTML();
   MailApp.sendEmail({
     to: "email@mail.com",
     subject: "document emailer",
     htmlBody:  docbody  });
} 
```

希望新的解决方法有所帮助

京东

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-11-02T08:29:59.047

谷歌文档目前有一个功能来做到这一点。只需下载到 zip(.html)，您就可以拥有一个带有 html 和图像的 zip 存档（如果已插入）

我知道这不是基于代码的解决方案，而是它的工作:)

[![导出菜单](../Images/59dfd5bd449bb32bfaedca2e1fb58234.png)](https://i.stack.imgur.com/vY0lO.jpg)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-07T02:08:33.430

您可以在[这里使用解决方案](https://ctrlq.org/code/19768-send-google-document-html-email)

```
/**
 * Converts a file to HTML. The Advanced Drive service must be enabled to use
 * this function.
 */
function convertToHtml(fileId) {
  var file = Drive.Files.get(fileId);
  var htmlExportLink = file.exportLinks['text/html'];
  if (!htmlExportLink) {
    throw 'File cannot be converted to HTML.';
  }
  var oAuthToken = ScriptApp.getOAuthToken();
  var response = UrlFetchApp.fetch(htmlExportLink, {
    headers:{
      'Authorization': 'Bearer ' + oAuthToken
    },
    muteHttpExceptions: true
  });
  if (!response.getResponseCode() == 200) {
    throw 'Error converting to HTML: ' + response.getContentText();
  }
  return response.getContentText();
} 
```

作为 fileId 传递，谷歌文档的 id 并按照[此处](https://developers.google.com/apps-script/guides/services/advanced)的说明启用高级驱动器服务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-13T20:34:43.867

我也遇到过这个问题。Document HTML Export 吐出的 HTML 真的很难看，所以这是我的解决方案：

```
/**
 * Takes in a Google Doc ID, gets that doc in HTML format, cleans up the markup, and returns the resulting HTML string.
 *
 * @param {string} the id of the google doc
 * @param {boolean} [useCaching] enable or disable caching. default true.
 * @return {string} the doc's body in html format
 */
function getContent(id, useCaching) {

  if (!id) {
    throw "Please call this API with a valid Google Doc ID";
  }

  if (useCaching == null) {
    useCaching = true;
  }

  if (typeof useCaching != "boolean") {
    throw "If you're going to specify useCaching, it must be boolean.";
  }

  var cache = CacheService.getScriptCache();
  var cached = cache.get(id); // see if we have a cached version of our parsed html
  if (cached && useCaching) {
    var html = cached;
    Logger.log("Pulling doc html from cache...");
  } else {

    Logger.log("Grabbing and parsing fresh html from the doc...");

    try {
      var doc = DriveApp.getFileById(id);
    } catch (err) {
      throw "Please call this API with a valid Google Doc ID. " + err.message;
    }

    var docName = doc.getName();

    var forDriveScope = DriveApp.getStorageUsed(); // needed to get Drive Scope requested in ScriptApp.getOAuthToken();
    var url = "https://docs.google.com/feeds/download/documents/export/Export?id=" + id + "&exportFormat=html";
    var param = {
      method: "get",
      headers: {"Authorization": "Bearer " + ScriptApp.getOAuthToken()},
      muteHttpExceptions:true,
    };

    var html = UrlFetchApp.fetch(url, param).getContentText();

    // nuke the whole head section, including the stylesheet and meta tag
    html = html.replace(/<head>.*<\/head>/, '');
    // remove almost all html attributes
    html = html.replace(/ (id|class|style|start|colspan|rowspan)="[^"]*"/g, '');
    // remove all of the spans, as well as the outer html and body
    html = html.replace(/<(span|\/span|body|\/body|html|\/html)>/g, '');
    // clearly the superior way of denoting line breaks
    html = html.replace(/<br>/g, '<br />');

    cache.put(id, html, 900) // cache doc contents for 15 minutes, in case we get a lot of requests

  }

  Logger.log(html);

  return html;

} 
```

[https://gist.github.com/xd1936/cc229d14a89e6327336177bb07ac2980](https://gist.github.com/xd1936/cc229d14a89e6327336177bb07ac2980)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-02-03T15:41:58.797

也许这对你有用......

```
function doGet() {
  var blob = DriveApp.getFileById('myFileId').getAsHTML();
  return HtmlService.createHtmlOutput(blob);
} 
```

# c++ - 什么最适合编写一次本机库并通过语言绑定在多种语言中使用它？

> ID：14663854
> 
> 赞同：1
> 
> 时间：2013-02-02T16:19:08.777
> 
> 标签：c++, c, cross-platform, native-code, language-binding

哪种语言（C 或 C++）最适合编写一次本机库并在具有语言绑定的不同语言中使用它（例如，使用 JNI 或 Ruby 的 C 扩展），为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T16:25:12.737

C、因为

1.  用 C++ 编写的程序可以使用 C 库，反之则要复杂得多——C++ 中可用但 C 中不可用的任何构造都不能导出到 C 程序，这可能会使导出变得复杂。
2.  AC 库将具有较少的依赖关系。C++ 库通常会依赖于 libstdc++，它很大，例如在嵌入式系统上或更一般地在资源不足的系统上，它并不总是可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T16:24:10.353

如果您愿意，您可以用 C++ 编写您的库，只要您为其提供 extern "C" 绑定/导出，以便其他运行时可以使用它。

# perforce - p4python：获取 diff2 表单库

> ID：14663858
> 
> 赞同：3
> 
> 时间：2013-02-02T16:19:21.950
> 
> 标签：perforce, p4python

我想检索下一个命令的输出（其中 p4 是标准 perforce 客户端）：

```
p4 diff2 //depot/...#1 //depot/...#2 
```

在终端它正在产生这样的东西：

```
==== //depot/bin/build.sh#1 (xtext) - //depot/bin/build.sh#2 (xtext) ==== content
1a2
> #added something 2
9c10
< fi---
> fi
==== //depot/bin/README#1 - <none> ===
==== //depot/bin/status_ok#1 - <none> === 
```

假设我在 python 中有下一个脚本：

```
from P4 import P4
p4 = P4()
p4.port = "1818"
p4.host = "localhost"
p4.user = "psih"
p4.client = "build_verificator_ws2"
p4.connect()
changes = p4.run_diff2("//depot/...#1", "//depot/...#2")
print changes
p4.disconnect() 
```

执行 python 脚本后，我将收到类似的内容：

```
[{'status': 'content', 'depotFile2': '//depot/bin/build.sh', 'rev': '1', 'rev2': '2', 'type': 'xtext', 'depotFile': '//depot/bin/build.sh', 'type2': 'xtext'}, {'status': 'left only', 'type': 'text', 'rev': '1', 'depotFile': '//depot/bin/README'}, {'status': 'left only', 'type': 'text', 'rev': '1', 'depotFile': '//depot/bin/status_ok'}] 
```

仓库中包含修订但没有差异的文件列表。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:10:18.977

答案是使用未标记的响应：

```
changes = p4.run_diff2("//depot/...#1", "//depot/...#2", tagged=False) 
```

# java - 默认变量的值与默认初始化

> ID：14663859
> 
> 赞同：20
> 
> 时间：2013-02-02T16:19:30.793
> 
> 标签：java, bytecode, compiler-optimization

我们都知道，根据[JLS7 p.4.12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)，每个实例变量都使用默认值初始化。例如（1）：

```
public class Test {
    private Integer a;  // == null
    private int b;      // == 0
    private boolean c;  // == false
} 
```

但我一直认为，这样的类实现（2）：

```
public class Test {
    private Integer a = null;
    private int b = 0;
    private boolean c = false;
} 
```

绝对等于例（1）。我预计，复杂的 Java 编译器会看到 (2) 中的所有这些初始化值都是多余的并忽略它们。

但是突然对于这两个类，我们有两个不同的字节码。

例如（1）：

```
 0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return 
```

例如（2）：

```
 0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   aconst_null
   6:   putfield    #2; //Field a:Ljava/lang/Integer;
   9:   aload_0
   10:  iconst_0
   11:  putfield    #3; //Field b:I
   14:  aload_0
   15:  iconst_0
   16:  putfield    #4; //Field c:Z
   19:  return 
```

**问题是：**为什么？但这显然是需要优化的事情。什么原因？

**UPD：**我使用 Java 7 1.7.0.11 x64，没有特殊的 javac 选项

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-02T16:24:23.750

不，它们不相等。在对象实例化时*立即*分配默认值。字段初始值设定项中的赋值发生在调用超类构造函数时......这意味着您*可以*在某些情况下看到差异。示例代码：

```
class Superclass {
    public Superclass() {
        someMethod();
    }

    void someMethod() {}
}

class Subclass extends Superclass {
    private int explicit = 0;
    private int implicit;

    public Subclass() {
        System.out.println("explicit: " + explicit);
        System.out.println("implicit: " + implicit);
    }

    @Override void someMethod() {
        explicit = 5;
        implicit = 5;
    }
}

public class Test {
    public static void main(String[] args) {
        new Subclass();
    }
} 
```

输出：

```
explicit: 0
implicit: 5 
```

在这里，您可以看到显式字段初始化在构造函数完成后但在子类构造函数*主体*执行之前将值“重置”`explicit`回 0 。的值仍然具有在构造函数的多态调用中分配的值。`Superclass`*`implicit``someMethod``Superclass`*

# jquery - 在 iframe（外部域）中查找元素

> ID：14663862
> 
> 赞同：0
> 
> 时间：2013-02-02T16:20:02.057
> 
> 标签：jquery, iframe

有什么方法可以访问 iframe 中加载的元素？

我正在尝试这个但似乎不起作用：

```
if($('#cboxLoadedContent iframe').contents().find('#customer-login')[0] ){ ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:21:55.957

如果 iframe 的内容是由另一个域提供的，那么您可以从页面中查看其内容的唯一方法是该内容带有适当的[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。

这是一种称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的保护方案。

请注意，还有一种解决方案是通过使用代理让浏览器只看到一个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:44:34.437

它起作用了，我在本地（`file://`）打开文件，而内容是用`http://`协议加载的。

# c++ - 如何获取锁定文件的大小？

> ID：14663864
> 
> 赞同：0
> 
> 时间：2013-02-02T16:20:33.837
> 
> 标签：c++, file, winapi, locking

我尝试使用这种方法：

```
#include <windows.h>
#include <iostream>

int main() {
  LARGE_INTEGER size;
  HANDLE hFile = CreateFile("c:\\pagefile.sys", GENERIC_READ, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
  if (hFile == INVALID_HANDLE_VALUE) return(1);
  GetFileSizeEx(hFile, &size);
  CloseHandle(hFile);
  std::cout << size.QuadPart << std::endl;
} 
```

但正如你所见，我指向被锁定的“pagefile.sys”，程序遇到 INVALID_HANDLE_VALUE。但非系统应用程序可以看到锁定文件的大小。例如，总指挥官给了我大约 1GB，它必须从某个地方获取这个值（更不用说简单的右键单击该文件，但那是系统进程，因此文件没有被锁定）。那么，这种情况下是否有任何 winapi 调用？

我已经更新了代码以包含建议的更正，但它仍然不起作用：

```
#include <windows.h>
#include <iostream>

int main() {
  LARGE_INTEGER size;
  HANDLE hFile = CreateFile("c:\\pagefile.sys", 0, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
  std::cout << "GetLastError: " << GetLastError() << std::endl;
  //says: 5 (0x5) ERROR_ACCESS_DENIED
  if (hFile == INVALID_HANDLE_VALUE) return(1);
  GetFileSizeEx(hFile, &size);
  CloseHandle(hFile);
  std::cout << size.QuadPart << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T16:34:16.217

您可以从文件的目录条目中获取信息，没有机制可以锁定它。这需要 FindFirstFile/FindNextFile 来迭代目录。返回的 WIN32_FIND_DATA.nFileSizeHigh/Low 为您提供所需的信息。

The actual number you get is not reliable, it is merely a snapshot and it is likely to be stale. Especially so for the paging file, Windows can rapidly change its size. Getting a reliable size requires locking the file so nobody can change it, like you did. Which will not work for the paging file, the operating system keeps a hard lock on it so nobody can mess with the file content or read security sensitive data from the file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:35:08.057

According to MSDN, you should set the `dwDesiredAccess` parameter to 0 (zero) if you only want information without opening the file.

# asp.net - 如何将值发布到不在同一域中的页面

> ID：14663868
> 
> 赞同：0
> 
> 时间：2013-02-02T16:21:21.703
> 
> 标签：asp.net

我在网页上有这个 html 代码：

```
<form action="" type=post>
      <label for="name"><div><br>Account</br></div></label> <input type=text id="name" name="account" size=20 maxlength=32 /><br>
       <label for="name"><div><br>Password</br></div></label> <input type=password id="name" name="password" size=20 maxlength=14 /><br> 
      <button type=submit>Okay</button>
    </form> 
```

如何在“帐户”和“密码”标签的另一页上从我的 asp.net webproject 值发送？

## 包含标签的页面不在同一个域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:47:38.960

`action`您可以在属性中放置一个绝对 URL ，如下所示：

```
<form action="https://othersite.com/login.aspx" type=post>
  <label for="name"><div><br>Account</br></div></label> <input type=text id="name" name="account" size=20 maxlength=32 /><br>
   <label for="name"><div><br>Password</br></div></label> <input type=password id="name" name="password" size=20 maxlength=14 /><br> 
  <button type=submit>Okay</button>
</form> 
```

这对你不起作用吗？

# magento-1.7 - 需要自定义菜单脚本协助

> ID：14663870
> 
> 赞同：1
> 
> 时间：2013-02-02T16:21:28.193
> 
> 标签：magento-1.7

我正在使用 Magento 的自定义菜单扩展。我有一个问题。菜单上会出现一个弹出下拉框。当我使用 firebug 跟踪编码时，我发现：

```
<div id="popup6" class="wp-custom-menu-popup" onmouseover="wpPopupOver(this, event, 'popup6', 'menu6')" onmouseout="wpHideMenuPopup(this, event, 'popup6', 'menu6')" style="display: none; top: 20px; left: 20px; z-index: 10000;"> 
```

我在扩展的文件中的任何地方都找不到此代码，所以我找到了这个：

```
<script type="text/javascript">
//<![CDATA[
var CUSTOMMENU_POPUP_WIDTH = <?php echo Mage::getStoreConfig('custom_menu/popup/width') + 0; ?>;
var CUSTOMMENU_POPUP_TOP_OFFSET = <?php echo Mage::getStoreConfig('custom_menu/popup/top_offset') + 0; ?>;
var CUSTOMMENU_POPUP_DELAY_BEFORE_DISPLAYING = <?php echo Mage::getStoreConfig('custom_menu/popup/delay_displaying') + 0; ?>;
var CUSTOMMENU_POPUP_DELAY_BEFORE_HIDING = <?php echo Mage::getStoreConfig('custom_menu/popup/delay_hiding') + 0; ?>;
var CUSTOMMENU_RTL_MODE = <?php echo $_rtl; ?>;
var wpCustommenuTimerShow = {};
var wpCustommenuTimerHide = {};
//]]> 
```

我需要更改 top:20px 我应该在哪里寻找这个？它不在 js 文件中，也不在 css 文件中……在任何地方都找不到。有任何想法吗？我是初学者！据我了解，它必须是 JS 文件，我不知道如何阅读它。JS在这里：

```
function wpShowMenuPopup(objMenu, popupId)
{
if (typeof wpCustommenuTimerHide[popupId] != 'undefined') clearTimeout(wpCustommenuTimerHide[popupId]);
objMenu = $(objMenu.id); var popup = $(popupId); if (!popup) return;
wpCustommenuTimerShow[popupId] = setTimeout(function() {
    popup.style.display = 'block';
    objMenu.addClassName('active');
    var popupWidth = CUSTOMMENU_POPUP_WIDTH;
    if (!popupWidth) popupWidth = popup.getWidth();
    var pos = wpPopupPos(objMenu, popupWidth);
    popup.style.top = pos.top + 'px';
    popup.style.left = pos.left + 'px';
    wpSetPopupZIndex(popup);
    if (CUSTOMMENU_POPUP_WIDTH)
        popup.style.width = CUSTOMMENU_POPUP_WIDTH + 'px';
    // --- Static Block width ---
    var block2 = $(popupId).select('div.block2');
    if (typeof block2[0] != 'undefined') {
        var wStart = block2[0].id.indexOf('_w');
        if (wStart > -1) {
            var w = block2[0].id.substr(wStart+2);
        } else {
            var w = 0;
            $(popupId).select('div.block1 div.column').each(function(item) {
                w += $(item).getWidth();
            });
        }
        //console.log(w);
        if (w) block2[0].style.width = w + 'px';
    }
}, CUSTOMMENU_POPUP_DELAY_BEFORE_DISPLAYING);
}

function wpHideMenuPopup(element, event, popupId, menuId)
{
if (typeof wpCustommenuTimerShow[popupId] != 'undefined') clearTimeout(wpCustommenuTimerShow[popupId]);
element = $(element.id); var popup = $(popupId); if (!popup) return;
var current_mouse_target = null;
if (event.toElement) {
    current_mouse_target = event.toElement;
} else if (event.relatedTarget) {
    current_mouse_target = event.relatedTarget;
}
wpCustommenuTimerHide[popupId] = setTimeout(function() {
    if (!wpIsChildOf(element, current_mouse_target) && element != current_mouse_target) {
        if (!wpIsChildOf(popup, current_mouse_target) && popup != current_mouse_target) {
            popup.style.display = 'none';
            $(menuId).removeClassName('active');
        }
    }
}, CUSTOMMENU_POPUP_DELAY_BEFORE_HIDING);
}

function wpPopupOver(element, event, popupId, menuId)
{
if (typeof wpCustommenuTimerHide[popupId] != 'undefined') clearTimeout(wpCustommenuTimerHide[popupId]);
}

function wpPopupPos(objMenu, w)
{
var pos = objMenu.cumulativeOffset();
var wraper = $('custommenu');
var posWraper = wraper.cumulativeOffset();
var xTop = pos.top - posWraper.top
if (CUSTOMMENU_POPUP_TOP_OFFSET) {
    xTop += CUSTOMMENU_POPUP_TOP_OFFSET;
} else {
    xTop += objMenu.getHeight();
}
var res = {'top': xTop};
if (CUSTOMMENU_RTL_MODE) {
    var xLeft = pos.left - posWraper.left - w + objMenu.getWidth();
    if (xLeft < 0) xLeft = 0;
    res.left = xLeft;
} else {
    var wWraper = wraper.getWidth();
    var xLeft = pos.left - posWraper.left;
    if ((xLeft + w) > wWraper) xLeft = wWraper - w;
    if (xLeft < 0) xLeft = 0;
    res.left = xLeft;
}
return res;
}

function wpIsChildOf(parent, child)
{
if (child != null) {
    while (child.parentNode) {
        if ((child = child.parentNode) == parent) {
            return true;
        }
    }
}
return false;
}

function wpSetPopupZIndex(popup)
{
$$('.wp-custom-menu-popup').each(function(item){
   item.style.zIndex = '9999';
});
popup.style.zIndex = '10000';
}

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T14:36:49.647

自定义菜单设置中有一个选项——顶部偏移，可能是这个选项定义了**顶部：20px；**属性。

# html - 当内容包含在流布局中时，如何将单选按钮或复选框及其标签保持在一起

> ID：14663873
> 
> 赞同：16
> 
> 时间：2013-02-02T16:21:53.477
> 
> 标签：html, css, checkbox, radio-button, flowlayout

当浏览器窗口变窄时文本换行时，如何将单选按钮 ( ) 或复选框 [ ] 及其标签保持在一起，这样我们就不会这样结束：

```
 [ ] pepperoni   [ ] anchovies   [ ] mushrooms    [ ]
          olives 
```

编辑以响应 nowrap 建议。谢谢你的建议。差不多好了。它在 Chrome、FF 和 Opera 中完美运行，**但在 IE9**中无法正常运行。当页面 CSS 为`label {white-space: nowrap}`且标记为：

```
 <td>
          <div>
          <label>
          <input type="radio" name="pizza" checked="true" 
           id="pepperoni" value="pepperoni"  />pepperoni  </label>
          <label>
          <input type="radio" name="pizza"  
           id="anchovies" value="anchovies"  />anchovies  </label>
           <label>
          <input type="radio" name="pizza" 
           id="mushrooms" value="mushrooms"  />mushrooms  </label>
          <label>
          <input type="radio" name="pizza" 
           id="olives" value="olives"  />olives           </label>
          </div>
          </td> 
```

**TD在 IE9 中**变为固定宽度；当浏览器窗口变窄时，TD不会缩小，我明白了：

```
 ( ] pepperoni   ( ) anchovies   ( ) mushrooms   ( )  olives 
```

当我需要这个时：

```
 ( ) pepperoni   ( ) anchovies   
          ( ) mushrooms   ( ) olives 
```

IE9有什么额外的技巧吗？我尝试在标签之间放置一个包含单个空格的跨度： `...</label><span> </span><label>...`但这不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T16:23:41.193

`<span>`用一个容器包围它们并[`white-space: nowrap;`](https://developer.mozilla.org/en-US/docs/CSS/white-space)放在上面。

```
<span style="white-space: nowrap;"> 
  <input type="checkbox" id="in1" /> 
  <label for="in1">pepperoni</label>
</span>
<span style="white-space: nowrap;"> 
  <input type="checkbox" id="in2" /> 
  <label for="in2">anchovies</label>
</span>
<span style="white-space: nowrap;"> 
  <input type="checkbox" id="in3" /> 
  <label for="in3">mushrooms</label>
</span>
<span style="white-space: nowrap;"> 
  <input type="checkbox" id="in4" /> 
  <label for="in4">olives</label>
</span> 
```

**编辑**

正如@xiaoyi 所提到的，您也可以将其`<label>`本身用作容器：

```
<label style="white-space: nowrap;"> <input type="checkbox" />  pepperoni</label>
<!-- etc --> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-25T20:20:58.707

您可以将输入和标签包装在 a 中，也可以将输入`<span>`包装在标签内。无论哪种方式，外部容器（跨度或标签）都应该有 style `white-space:nowrap; display:inline-block`。这适用于 IE9 以及其他浏览器。所以你的最终标记应该是：

```
<span style="white-space:nowrap; display:inline-block"> 
  <input type="checkbox" name="pizza" checked="true"
   id="pepperoni" value="pepperoni" /> 
  <label for="pepperoni">pepperoni</label>
</span> 
```

或者

```
<label style="white-space:nowrap; display:inline-block">
  <input type="checkbox" name="pizza" checked="true" 
   id="pepperoni" value="pepperoni"/>
  pepperoni
</label> 
```

# ruby - rvm 不会更新 ruby ，无法使用 brew 安装多个 gem - OS X Mountain Lion

> ID：14663874
> 
> 赞同：1
> 
> 时间：2013-02-02T16:21:55.220
> 
> 标签：ruby, macos, rvm, osx-mountain-lion

我正在使用最新的 GCC 安装程序（[https://github.com/kennethreitz/osx-gcc-installer/downloads](https://github.com/kennethreitz/osx-gcc-installer/downloads)）（我理解这意味着我不需要 Xcode 命令行工具）、最新的 Homebrew、最新的 RVM

我的机器不会更新 ruby​​ 版本。尝试卸载并重新安装后，我回到了 ruby​​ 版本 ruby​​ 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]，现在无法恢复到 1.9.3。

这一切都源于由于 eventmachine 的问题而无法安装瘦客户端 gem。

尝试安装 1.9.3 的 makelog 输出如下：

```
ld: library not found for -lssl
collect2: ld returned 1 exit status
make[2]: *** [../../../.ext/x86_64-darwin12.2.0/digest/md5.bundle] Error 1
make[1]: *** [ext/digest/md5/all] Error 2
make: *** [build-ext] Error 2 
```

我认为这是我的路径的问题，它找不到库。例如，如果我尝试

```
brew install postgresql 
```

我收到一条错误消息，说它找不到加密库，即使我在 usr/lib 中有它们

我的 .bash_profile 如下：

```
function parse_git_branch () {
   git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}
RED="\[\033[0;31m\]"
YELLOW="\[\033[0;33m\]"
GREEN="\[\033[0;32m\]"
NO_COLOUR="\[\033[0m\]"

PS1="$NO_COLOUR\u@iMac$NO_COLOUR:\w$YELLOW\$(parse_git_branch)$NO_COLOUR\$ "

homebrew=/usr/local/bin:/usr/local/sbin
export PATH=$homebrew:$PATH

export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH" 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:56:12.563

尝试“rvm get head && rvm reload && rvm install 1.9.3 && rvm use 1.9.3”。

# jquery - jquery 下拉列表的无限高度（slideUp 和 slideDown）

> ID：14663884
> 
> 赞同：1
> 
> 时间：2013-02-02T16:22:36.763
> 
> 标签：jquery, drop-down-menu, height, slidedown, infinite

基本上，我使用slideUp 和slideDown 函数用jquery 创建了一个下拉菜单。一切都很好，直到我发现如果我继续将鼠标悬停在列表中，子按钮的高度将不会停止。我们可以通过左边界扩展看到这一点。有什么办法可以避免这种情况？

我创建了一个小提琴，这样你们就可以知道我在说什么[http://jsfiddle.net/WGm8q/](http://jsfiddle.net/WGm8q/)

无论如何，这是代码：

**JS**

```
$('.button').hover(
    function () {
        $('.sub', this).stop().slideDown(100);
    }, 
    function () {
        $('.sub', this).stop().slideUp(100);
    }
); 
```

**CSS**

```
.menu {
    width: 850px;
}
.button .main {
    padding-bottom: 5px;
    cursor: pointer;
}
.button .sub {
    display: none;
    margin-left: 10px;
    padding: 10px 0 10px 0;
    border-left: 1px solid #CCC;
}
.button .sub p {
    background-color: #FFF;
    margin: 0;
    padding-left: 5px;
} 
```

**HTML**

```
<div class="menu">
    <div class="button">
        <div class="main">Menu 1</div>
        <div class="sub">                    
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>                 
            <p>Submenu 1</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:22:04.023

[**你的小提琴**](http://jsfiddle.net/Bt2Au/)

改变这个：

```
.button .sub {
display: none;
margin-left: 10px;
padding: 10px 0 10px 0;
border-left: 1px solid #CCC;
} 
```

进入：

```
.button .sub {
display: none;
margin-left: 10px;
border-left: 1px solid #CCC;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:30:28.730

这个家伙有一个小提琴的宝石，我相信它也可以解决你的问题：

[http://jsfiddle.net/nick_craver/GgdEM/1/](http://jsfiddle.net/nick_craver/GgdEM/1/)

这个问题是一个跳动的菜单，我认为这可能是您的边界问题的原因（事件触发非常糟糕）。

关键是有一个超时，当再次悬停时会自动清除。

[悬停时使用上滑和下滑的 JQuery 下拉菜单很跳跃](https://stackoverflow.com/questions/3713513/jquery-dropdown-menu-using-slideup-and-slidedown-on-hover-is-jumpy)

他通过每个菜单项的数据属性来做到这一点，因此每个项目都是独立处理的。

看一看：

```
$(function () {    
  $('#nav li').hover(function () {
     clearTimeout($.data(this, 'timer'));
     $('ul', this).stop(true, true).slideDown(200);
  }, function () {
    $.data(this, 'timer', setTimeout($.proxy(function() {
      $('ul', this).stop(true, true).slideUp(200);
    }, this), 200));
  });
}); 
```

他的小提琴似乎也没有任何边界问题，所以也许看看他的标记和 css。

# css - 如果选择了某些项目，如何在rails中使用变量设置css样式？

> ID：14663885
> 
> 赞同：0
> 
> 时间：2013-02-02T16:22:40.080
> 
> 标签：css, ruby-on-rails-3

我正在做 Ryan Bates[可排序表列](http://railscasts.com/episodes/228-sortable-table-columns?autoplay=true)截屏视频

如果该项目位于`th`标签内，并且如果选择了该项目，我想应用一种样式，我该怎么做？

瑞安屏幕演员代码：

控制器

```
class ProductsController < ApplicationController
  helper_method :sort_column, :sort_direction

  def index
    @products = Product.order(sort_column + " " + sort_direction)
  end

  # ...

  private

  def sort_column
    Product.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end
end 
```

帮手

```
def sortable(column, title = nil)
  title ||= column.titleize
  css_class = column == sort_column ? "current #{sort_direction}" : nil
  direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
  link_to title, {:sort => column, :direction => direction}, {:class => css_class}
end 
```

index.html.erb

```
<tr>
  <th><%= sortable "name" %></th>
  <th><%= sortable "price" %></th>
  <th><%= sortable "released_at", "Released" %></th>
</tr> 
```

概念

```
<tr>
  <th class=<%= @selected %> ><%= sortable "name" %></th>
  <th class=<%= @selected %> ><%= sortable "price" %></th>
  <th class=<%= @selected %> ><%= sortable "released_at", "Released" %></th>
</tr> 
```

CSS

```
.pretty th .current {
  padding-right: 12px;
  background-repeat: no-repeat;
  background-position: right center;
}

.pretty th .asc {
  background-image: url(/images/up_arrow.gif);
}

.pretty th .desc {
  background-image: url(/images/down_arrow.gif);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:15:44.023

我不确定什么是最好的约定，但我认为这样的事情会起作用：

```
<tr>
  <%= stylized_th(@selected) { sortable "name" } %>
  <%= stylized_th(@selected) { sortable "price" } %>
  <%= stylized_th(@selected) { sortable "released_at", "Released" } %>
</tr> 
```

使用额外的助手：

```
def stylized_th(selected, &block)
  content = capture(&block)
  content_tag(:th, content, class: selected)
end 
```

您可以在其中放置一些逻辑，以根据`selected`. 如果您不想上课，请使用`nil`.

我受到这个 RailsCast 的启发： [http: //railscasts.com/episodes/208-erb-blocks-in-rails-3](http://railscasts.com/episodes/208-erb-blocks-in-rails-3)

我希望它有所帮助。

# java - 为什么这些数组元素为空？

> ID：14663886
> 
> 赞同：0
> 
> 时间：2013-02-02T16:22:45.873
> 
> 标签：java, arrays, null

我有一个已经用另一个初始化的数组。

```
a1 = a2; //right hand side is actually a method returning an array 
```

我可以将返回的数组元素附加到 JTextArea，但将它们打印出来会在控制台中产生 null。

```
for (int i = 0; i < a1.lenght; i++) {
    outputTextArea.append(a1[i]);
    System.out.println(a1[i]);
} 
```

为什么是这样？谢谢你。

这是方法：

```
public String[] searchString(ArrayList<String> content, String string){
    stringArray = new String[content.size()];

    for(int i = 0; i < content.size(); i++){
        if(string.equals(content.get(i))){
            if(content.indexOf(string) == 0) {
                stringArray[i] = content.get(i) + " " + content.get(i+1) + "\n";
            } else if ((content.indexOf(string) > 0) && (content.indexOf(string) < (content.size()-1))) {
                stringArray[i] = content.get(i-1) + " " + content.get(i) + " " + content.get(i + 1) + "\n";
            } else if ((content.indexOf(string)) == (content.size()-1)) {
                stringArray[i] = content.get(i -1) + " " + content.get(i);
            }
        }
    }
    return stringArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:05:08.440

输出**NULL**不是来自**a1**而是来自**a2**

你有**if**语句：

```
if (string.equals(content.get(i))) {
   .....
} 
```

没有**else**，所以如果**字符串 != content.get(i)**，那么它将在（ **a2**）的这个索引中返回**null**

 **所以你可能需要用值初始化 a2 ，或者像这样进行检查：**if(a1[i] != null)**

```
for(int i = 0; i < a1.lenght; i++){
       if(a1[i]!=null){///////////to avoid the null values
        outputTextArea.append(a1[i]);
        System.out.println(a1[i]);
        }
   } 
```

您将在此代码中遇到的第二个问题（当您在**内容**数组中重复**字符串时）：**

 **```
stringArray[i] = content.get(i) + " " + content.get(i + 1) + "\n"; 
```

如果 i = content.size() ，那么 ( i+1 ) 将**IndexOutOfBoundsException******

# java - 使用 Restlet 时如何跟踪日志中的请求？

> ID：14663888
> 
> 赞同：0
> 
> 时间：2013-02-02T16:23:02.090
> 
> 标签：java, logging, restlet, slf4j

在 Restlet servlet 的日志文件中跟踪特定请求的最佳方法是什么？

如果同时有多个请求，我希望能够在日志文件中跟踪单个请求。

由于我使用的是 slf4j Restlet 扩展，所以我考虑使用 slf4j.MDC 并向其添加源 IP+端口+时间戳的哈希。或者随着每次请求而增加的数字。

但也许还有另一种更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:28:47.183

可能更容易使用线程 ID，并确保记录每个请求的开始和结束。无需任何额外的编码（或 CPU 周期）即可为您提供所需的东西。

**更新**：

如果您在每个线程运行多个请求，那么您可能应该只生成一个随机 ID 并将其用于跟踪。就像是：

```
import java.security.SecureRandom;

public class StringUtils
{
  private static final SecureRandom RANDOMSOURCE;
  private static String CANDIDATES = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

  static
  {
    RANDOMSOURCE = new SecureRandom();
  }

 /**
  * Generate a random string of alphanumeric characters.
  * <p>
  * The string returned will contain characters randomly
  * selected from upper- and lower-case a through z as
  * well as the digits 0 through 9.
  * @param length the length of the string to generate
  * @return a string of random alphanumeric characters of the requested length
  */
  public static String generateRandomString(int length)
  {
    final StringBuffer sb = new StringBuffer(length);
    for (int i = 0; i < length; i++)
    {
      sb.append(CANDIDATES.charAt(RANDOMSOURCE.nextInt(62)));
    }
    return sb.toString();
  }
} 
```

然后，正如您所说，您可以使用 MDC 为每个请求创建请求 ID，并将详细信息记录在过滤器中（这是一个 Jersey 过滤器，但对于 Restlet 应该看起来相似）：

```
 ...
  private static final String REQUESTHIDEADER = "Request-ID";
  private static final String REQUESTID = "REQUESTID";
  private static final String REQUESTSTARTTIME = "RSTARTTIME";

  @Override
  public ContainerRequest filter(final ContainerRequest request)
  {
    final String requestid = Long.toHexString(Double.doubleToLongBits(Math.random()));
    MDC.put(REQUESTID, requestid);
    MDC.put(REQUESTSTARTTIME, String.valueOf(System.currentTimeMillis()));
    if (LOGGER.isInfoEnabled())
    {
      LOGGER.info("Started: {} {} ({})", request.getMethod(), request.getPath(), requestid);
    }

    return request;
  }

  @Override
  public ContainerResponse filter(final ContainerRequest request, final ContainerResponse response)
  {
    try
    {
      final Long startTime = Long.parseLong(MDC.get(REQUESTSTARTTIME));
      final String rid = MDC.get(REQUESTID);
      final long duration = System.currentTimeMillis() - startTime;
      response.getHttpHeaders().add(REQUESTHIDEADER, rid);
      LOGGER.info("Finished: {} {} ({} ms)", request.getMethod(), request.getPath(), String.valueOf(duration));
    }
    catch (Exception e)
    {
      LOGGER.warn("Finished {} {}", request.getMethod(), request.getPath());
    }
    return response;
  } 
```

作为奖励，这还将请求 ID 传递回请求者，以便在出现问题时进行跟踪。

# html - 样式表未在 Mozilla Firefox 中加载

> ID：14663889
> 
> 赞同：5
> 
> 时间：2013-02-02T16:23:12.277
> 
> 标签：html, css, cross-browser, stylesheet, mozilla

我难住了。在无法在 FireFox 中正确加载的网站上工作。它在 Chrome 甚至 IE 中加载得很好，但由于某种原因，样式表没有在 FireFox 中加载。

网站： http: [//gregsonaccounting.com](http://gregsonaccounting.com)

我正在使用 html5 代码，并使用了 html5 Boiler Plate 中的基本重置等。不确定问题出在我的 html 还是 CSS 中。

任何见解都*非常*有帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T16:43:51.033

样式表应以格式定义；

```
<link rel="stylesheet" type="text/css" href="css/stylesheet.css"> 
```

您还可以包括`media`属性，它们指定如何在不同的媒体上呈现文档：在屏幕上、在纸上、使用语音合成器、使用盲文设备等。

在您的页面中，它是；

```
<link rel="stylesheet" href="stylesheets/style.css" rel="stylesheet" />//Here is the problem
<link rel="stylesheet" href="nivo-slider/nivo-slider.css" type="text/css" media="screen" />
<link rel="stylesheet" href="nivo-slider/themes/default/default.css" type="text/css" media="screen" /> 
```

因此该行可以修改为；

```
<link rel="stylesheet" href="stylesheets/style.css" type="text/css" media="screen" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T16:52:21.993

您的问题来自 style.css，它以`@charset "IBM437"` Replace it with开头，`@charset "UTF-8";`它会更好！

它接缝了这个字符集 IBM437 是由 SASS 自动添加的：

[CSS 伪元素 ▼ 在 IE 中变得乱码](https://stackoverflow.com/questions/9759955/css-pseudo-element-becomes-gibberish-in-ie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:29:56.827

尝试改变：

```
<link rel="stylesheet" href="stylesheets/style.css" rel="stylesheet" /> 
```

到

```
<link rel="stylesheet" href="stylesheets/style.css" type="text/css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-19T08:54:35.780

我的 CSS 代码在**Chrome**上运行良好，但**在 IE 和 Firefox 上总是崩溃**。然后我发现问题出在预处理不当的 CSS 中。

**只需将您的 CSS 复制粘贴到[http://csslint.net/](http://csslint.net/)**，如果您**遇到任何错误**，只需修复它就可以了 :)

值得尝试！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-15T04:04:42.803

将其插入到您的 html 文档中。我不是在写代码，只是给你关键词，让你知道并可以输入。

链接 rel="stylesheet" type="text/css" href="stylesheet.css"

它可以正常工作，因此请确保您正确使用此功能，否则您的 html 文档将不会与样式表一起加载。祝你好运，继续工作吧。

# sql - 自然与平等加入

> ID：14663891
> 
> 赞同：0
> 
> 时间：2013-02-02T16:23:18.313
> 
> 标签：sql, join

当一个表（P）中的公共列是唯一的，但在其他表（Q）中不是唯一的时，我正在寻找 Natural 和 Equi Join 之间的区别。然后将显示其他表（Q）中的哪一行，问题是因为Q中的公共列不是唯一的，所以会有很多行与Q中该公共属性的单个相同值相关联。

两者都在'='比较器上运行。只是自然连接自动找出公共列并隐式应用'='比较器的区别。

说两张表

```
P(a(unique),b,c) and Q(a(not unique),d) 
```

如果我申请`P natural join Q` 并且`P equi join Q`

那么 Natural join 中会生成哪些行，Equi join 中会生成哪些 tuples 呢？表示将显示表 Q 中的哪一行（因为 'a' 的相同值与 Q 中的许多行相关联，但在 P 中不相关）..？会不会有区别..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:33:57.847

自然连接只是等值连接的简写。当使用相同的列进行比较时，应该创建相同的元组。

数据库开发人员往往不喜欢自然连接。表中列的添加、删除或重命名会影响现有查询。而且，一般来说，如果我们可以避免的话，我们不想破坏现有的代码。

就个人而言，我更喜欢表中列的显式命名条件。外键应该与主键具有相同的名称，因此它们所指的内容很清楚。我也更喜欢连接的“身份”或“自动增量”主键。然而，这偏离了你的问题。当自然连接为连接选择相同的列时，应该生成相同的元组。

# actionscript-3 - 如何从 B 类引用 A 类中的实例

> ID：14663897
> 
> 赞同：0
> 
> 时间：2013-02-02T16:23:54.733
> 
> 标签：actionscript-3, flash, class, instance

我有四个类：*document*、*topPanel*、*listPanel*和*detailsPanel*。在此特定示例中，*topPanel*检查何时提前*一天（**文档*中的一个函数）。当*AdvanceDay*被激活时，*文档*告诉*topPanel*去*calculateDate*，*listPanel*去*sortList*和*detailsPanel*去*refreshDetails*。*计算日期*然后计算出日期并尝试更新动态文本字段但找不到它的实例。*sortList*和*refreshDetails*也会出现类似的问题。

**顶部面板：**

```
function advanceLoop(a:Event)
{
    loopCounter +=  simSpeed;
    if ((loopCounter >= 24))
    {
        loopCounter = 0;
        document.advanceDay();
    }
}

public static function calculateDate()
{
    ... // sets moonCounter and yearCounter using day
    date.text = document.prettyNumbers[moonCounter] + " moon of the year " + yearCounter + " B.C.";
} 
```

**文档：**

```
public static var prettyNumbers:Array = ["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth"];

...

public static function advanceDay()
{
    topPanel.day++;
    topPanel.calculateDate();           
    listPanel.sortList();
    detailsPanel.refreshDetails();
} 
```

返回的错误：

```
Line 278 1120: Access of undefined property date. 
```

*date*是 topPanel 中实例（动态文本字段）的名称。当*AdvanceDay*函数位于*topPanel*类中并且“公共静态”位被删除时， *calculateDate*函数可以完美运行。感谢阅读，希望对您有所帮助！

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:41:41.750

标记为静态的函数只能访问本身为静态的属性。我相信“日期”不是静态成员变量，这就是为什么编译器说它找不到具有必要“静态”限定符的“日期”**

# jquery - 在自定义 div 上显示 JQuery 验证错误

> ID：14663908
> 
> 赞同：1
> 
> 时间：2013-02-02T16:24:41.860
> 
> 标签：jquery, jquery-validate

我有以下 HTML 表单：

```
<form method="post" action="register.php" class="form-horizontal" id="form-registrazione">
          <fieldset>
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                <h3 id="registrazioneLabel">Registrazione</h3>
              </div>
              <div class="modal-body">
                <div class="control-group">
                      <!-- Username -->
                      <label class="control-label">Username</label>
                      <div class="controls">
                        <div class="input-prepend">
                          <span class="add-on"><i class="icon-user"></i></span>
                          <input name="username" class="span2" placeholder="Leonardo" id="username" type="text">
                        </div>
                        <div id="username_msg"></div>
                      </div>

                    </div>

                <div class="control-group">
                      <!-- Email -->
                      <label class="control-label">Email</label>
                      <div class="controls">
                        <div class="input-prepend">
                          <span class="add-on"><i class="icon-envelope"></i></span>
                          <input name="email" class="span2" placeholder="mario@rossi.com" id="email" type="email">
                        </div>
                        <div id="email_msg"></div>
                      </div>
                    </div>

                <div class="control-group">
                      <!-- Password -->
                      <label class="control-label">Password</label>
                      <div class="controls">
                        <div class="input-prepend">
                          <span class="add-on"><i class="icon-key"></i></span>
                          <input name="password" class="span2" placeholder="Password" id="password" type="password">
                        </div>
                        <div id="password_msg"></div>
                      </div>
                    </div>

                <div class="control-group">
                  <!-- Conferma password -->
                  <label class="control-label">Conferma password</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on"><i class="icon-key"></i></span>
                      <input name="repassword" class="span2" placeholder="Password" id="repassword" type="password">
                    </div>
                    <div id="repassword_msg"></div>
                  </div>
                </div>

              </div>
              <div class="modal-footer">
                <input type="submit" value="Registrati" class="btn btn-primary">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Chiudi</button>
              </div>
        </fieldset>
      </form> 
```

以及以下 Javascript 验证代码：

```
<script>
    // SI ACCETTANO SOLO USERNAME CON CARATTERI ALFANUMERICI, SPAZI, TRATTINI E UDNERSCORE
    jQuery.validator.addMethod("alphanumeric", function(value, element) {
        var stringa = new String(value);
        stringa = stringa.replace(" ", "");
        stringa = stringa.replace("-", "");
        stringa = stringa.replace("_", "");
        return this.optional(element) || /^[a-zA-Z0-9]+$/.test(stringa.valueOf());
    });

    // SCRIPT CHE CONVALIDA IL FORM DI REGISTRAZIONE
    $(document).ready(function(){
        $('#form-registrazione').validate({
        rules: {
          username: {
            minlength: 6,
            maxlength: 15,
            alphanumeric: true,
            // L'USERNAME NON DEVE ESSERE GIA' USATO
            remote: {
                url: "do_action.php?action=username_used",
                type: "post",
                async: false,
                data: {
                  email: function() {
                    return $("#username").val();
                  }
                }
            },
            required: true
          },
          email: {
            required: true,
            email: true,
            // L'EMAIL NON DEVE ESSERE GIA' UTILIZZATA
            remote: {
                url: "do_action.php?action=email_used",
                type: "post",
                async: false,
                data: {
                  username: function() {
                    return $("#email").val();
                  }
                }
            },
          },
          password: {
            minlength: 8,
            required: true
          },
          repassword: {
            minlength: 8,
            required: true,
            equalTo: "#password"
          }
        },
        messages: {
            username: {
                required: "Scegli il tuo nome utente.",
                minlength: "Inserisci almeno almeno 6 caratteri.",
                maxlength: "Inserisci meno di 15 caratteri.",
                alphanumeric: "Si accettano soltanto caratteri alfanumerici, spazi, trattini e underscore.",
                remote: "L'username &egrave; gi&agrave; utilizzato da un altro giocatore, per favore scegline un altro."
            },
            password: {
                required: "Imposta una password.",
                minlength: "La password deve essere lunga almeno 8 caratteri.",
            },
            repassword: {
                required: "Conferma la tua password.",
                minlength: "La password deve essere lunga almeno 8 caratteri.",
                equalTo: "Le due password non combaciano."
            },
            email: {
                required: "Inserisci un indirizzo email.",
                email: "L'indirizzo email inserito non &egrave; corretto.",
                remote: "L'email &egrave; gi&agrave; utilizzata da un altro giocatore, puoi utilizzare un'altra email oppure <a href='recover.php'>recuperare i dati del tuo account</a>."
            }
        },
        highlight: function(label) {
            $(label).closest('.control-group').removeClass("success").addClass('error');
        },
        success: function(label) {
            label
                .addClass('valid')
                .closest('.control-group').addClass('success');
        }
      });
    });
</script> 
```

该代码有效，它还检查用户名/电子邮件是否已被使用。问题是如果错误字符串太长，文本会超出页面（没有新行），所以我创建了四个 div，我想在其中放置错误消息，以便文本在需要时换行。

我的目标是在 div "#username_msg" 中显示每个用户名错误，在 div "#email_msg" 中显示每个电子邮件错误等。我尝试了很多东西，我搜索和谷歌，我也尝试了 showErrors 方法，但我不能解决我的问题...所以我在这里。

我正在使用 Twitter Bootstrap，并且表单正确显示为模态（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:47:19.297

> **引用**：“我的目标是在 div 中显示每个用户名错误，在 div 中显示`#username_msg`每个电子邮件错误`#email_msg`等。

您不能将每个单独的消息放在它们自己的唯一标记`div`中。但是，您可以将消息放在`div`元素中而不是`label`. 但是，这不会比简单地使用 CSS 格式化`label`元素更好地解决您的问题。

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

> **errorElement**，字符串，默认值：“标签”
> 
> 使用此元素类型来创建错误消息并查找现有的错误消息。默认值“label”具有使用 for 属性（无论元素类型如何，始终使用该属性）在错误消息和无效字段之间创建有意义链接的优点。

根据评论，使用`div`因为 OP 希望消息显示*在*`input`元素下。

```
errorElement: "div" 
```

然后你可以控制如何`div`使用 CSS 显示...

```
div.error {
    width: 200px; // whatever you need
    white-space: normal;  // to ensure wrapping despite twitter bootstrap css
} 
```

**工作演示：http:** [//jsfiddle.net/f9Ut4/1/](http://jsfiddle.net/f9Ut4/1/)

* * *

**编辑：**

解释 - 在 Twitter Bootstrap CSS 文件中，有一条规则 ,`white-space: nowrap`由您继承`div.error`，告诉其文本内容不换行。我在上面建议的规则`white-space: normal`，只是颠倒了`nowrap`规则，因为它有一个*更具体*的目标，`div.error`，它将*优先*于 Twitter Bootstrap CSS 中的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:43:28.320

尝试为打印错误的 div 提供最大宽度。因此，如果错误字符串很大，它们会自动将它们包装到新行中

# jquery - jQuery：单击并获取宽度

> ID：14663910
> 
> 赞同：0
> 
> 时间：2013-02-02T16:25:01.627
> 
> 标签：jquery

如果用户单击条中的某个位置，指示器能否获得该宽度。（类似于视频中的进度条）

```
$(function(){        
  $("#play").click(function() {
    $("#indicador").animate({"width": "150px"}, 8400);
  });
}); 
```

在这里尝试和玩：http: [//jsfiddle.net/SwkaR/7/](http://jsfiddle.net/SwkaR/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:35:09.107

您可以从[`Event`](http://api.jquery.com/category/events/event-object/)作为第一个参数传递给`click`事件处理程序的对象中获取用户单击的坐标。您只需减去相对于页面的元素偏移量[`$.offset()`](http://api.jquery.com/offset/)即可获得相对于元素的位置。

```
$("#bar").click(function(e) {
    var offset = $(this).offset();
    var relativeX = e.pageX - offset.left;
    var relativeY = e.pageY - offset.top;
    // Do something with these
}); 
```

例如，这是一个[分叉的小提琴](http://jsfiddle.net/MattiasBuelens/SNzBZ/)，它允许您通过单击栏中的任意位置来放置指标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:33:35.170

我去了[http://jsfiddle.net/SwkaR/13/](http://jsfiddle.net/SwkaR/13/)和[http://jsfiddle.net/SwkaR/18/](http://jsfiddle.net/SwkaR/18/)

```
$(function(){

  $("#play").click(function() {
    $("#indicator").animate({"width": "150px"}, 8400);
  });
    $('#bar').click(function(e) {
        var parentOffset = $(this).parent().offset();
         var relX = e.pageX - parentOffset.left;
        $("#indicator").animate({"width": relX + "px"});
    });
    $('#indicator').click(function(e) {
        var parentOffset = $(this).parent().offset();
         var relX = e.pageX - parentOffset.left;
        $("#indicator").animate({"width": relX + "px"});
    });        
}); 
```

将指示器宽度设置为用户在栏中单击的点

使用[jQuery 获取元素内的鼠标位置](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)作为参考，以获取栏中的鼠标单击位置并将指示器设置为该位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:32:06.020

要获得指标宽度，请使用`$("#indicator").width()`

## 查询：

```
$(function(){

  $("#play").click(function() {
    $("#indicator").animate({"width": "150px"}, 8400);
  });

    $("#indicator").click(function() {
        alert($(this).width());
    });

}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/SwkaR/14/)**

# javascript - phonegap javascript变量在回调函数中为空

> ID：14663915
> 
> 赞同：0
> 
> 时间：2013-02-02T16:25:18.217
> 
> 标签：javascript, sqlite, cordova

我目前正在使用phonegap 中的webkit SQLite 构建一个带有phonegap 的应用程序。这样做我在将变量插入 SQLite 表时遇到问题：

```
function addTrack(track){

    var trackItem = track;
    alert(trackItem.name);
    db.transaction(addingTrack, errorCB);

    function addingTrack(tx) {

        alert (trackItem.name);
        tx.executeSql('INSERT INTO Tracks (name) VALUES ("' + trackItem.name + "')');
}

} 
```

正如我所料，第一个警报返回轨道的名称，而第二个警报返回一个空字符串。请注意，第二个警报中的属性 trackItem.name 似乎已定义，但仅包含一个空字符串，而不是根本没有定义。

trackItem 不会在脚本中的其他任何地方使用。此外，在脚本开头全局声明 trackItem 不会改变任何内容。有谁知道为什么没有将变量传递给回调函数？

# iis - 在 IIS 中设置网站别名以隐藏端口号

> ID：14663920
> 
> 赞同：3
> 
> 时间：2013-02-02T16:25:47.040
> 
> 标签：iis, alias

有人曾经告诉我，可以在 IIS 中为您的网站创建某种别名，这样用户就可以导航到（内部网）页面，而不必为端口号而烦恼。

例如

`intranet.company.net:8081`

可以别名为

`application.intranet.company.net`

我不知道在哪里寻找在 IIS 中创建这些别名，令人惊讶的是，在 Google/SO 上搜索“别名 iis”并没有给我带来有意义的点击。也许这根本不可能，但我真的认为它是......

有任何想法吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:15:28.273

对于 IIS7，您可以配置一个网站`application.intranet.company.net`，其唯一目的是重定向到实际 url，即`intranet.company.net:8081`.

您可以通过多种方式执行此操作，包括 web.config。最简单的方法是使用 IIS 管理 UI。[有关说明，请参见此处](http://technet.microsoft.com/en-us/library/cc770409%28v=ws.10%29.aspx)。

# windows - ShellExecute 在启用 UAC 的情况下无法打开屏幕键盘

> ID：14663924
> 
> 赞同：0
> 
> 时间：2013-02-02T16:26:09.747
> 
> 标签：windows, keyboard, uac

我正在尝试从我的程序以编程方式在屏幕键盘（osk.exe）上打开 Windows 7。[我在这个页面上](http://www.news2news.com/vfp/?example=582&ver=vcpp&PHPSESSID=1113b506b0284ef357922a17a7586663)找到了一个很好的指南，当 UAC 关闭时它工作得很好。

打开UAC时，它根本没有打开程序，我找不到原因。从开始菜单打开键盘时没有显示 UAC 提示，因此它似乎不需要管理权限。

是否只是因为可执行文件位于 Windows 系统文件夹中，如果是这样，是否有另一种方法可以启动可以运行的程序？

返回的错误是 3，ERROR_PATH_NOT_FOUND，可能是因为“sysnative”路径在启用 UAC 的情况下不起作用。

尝试在没有路径的情况下运行“osk.exe”也会失败，并出现错误“无法启动屏幕键盘”

最后，运行 "C:\Windows\system32\osk.exe" 失败，错误代码 5: SE_ERR_ACCESSDENIED 当我尝试在重定向关闭的情况下使用它时（如[this question](https://stackoverflow.com/questions/509989/how-to-allow-32-bit-apps-on-64-bit-windows-to-execute-64-bit-apps-provided-in-wi)中所建议）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T18:16:13.547

我测试了您在消息中引用的 c++ 代码示例。该例程从 VS devenv 或作为独立 exe 启动，在任何可用的 UAC 模式下总是显示屏幕键盘。我的操作系统：Windows 7 Ult。SP1 64 位。

# c# - Excel 互操作 - 绘制范围内的所有边框

> ID：14663926
> 
> 赞同：12
> 
> 时间：2013-02-02T16:26:19.573
> 
> 标签：c#, excel, interop

我从 Microsoft 的文档中看到，我可以使用“xlBordersIndex”属性访问单元格的特定边框边缘，例如为单元格的左边缘设置边框样式：

```
range.Borders[Microsoft.Office.Interop.Excel.XlBordersIndex.xlEdgeLeft].LineStyle =     Excel.XlLineStyle.xlContinuous; 
```

但是，如果我只想绘制所有边界怎么办？我试过了

```
range.BorderAround2(); 
```

但这只是在范围本身周围画了一个框，我理解。所以我尝试了

```
range.Cells.BorderAround2(); 
```

认为它将遍历范围内的每个单元格并在每个单元格周围放置所有边框。这不是发生的事情。因此，为了获得一个范围内所有单元格的所有边框，我必须手动访问四个边框索引中的每一个吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T20:47:30.610

```
private void AllBorders(Excel.Borders _borders)
    {
        _borders[Excel.XlBordersIndex.xlEdgeLeft].LineStyle = Excel.XlLineStyle.xlContinuous;
        _borders[Excel.XlBordersIndex.xlEdgeRight].LineStyle = Excel.XlLineStyle.xlContinuous;
        _borders[Excel.XlBordersIndex.xlEdgeTop].LineStyle = Excel.XlLineStyle.xlContinuous;
        _borders[Excel.XlBordersIndex.xlEdgeBottom].LineStyle = Excel.XlLineStyle.xlContinuous;
        _borders.Color = Color.Black;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-04T02:15:01.107

```
oRange = SHEET2.get_Range("a1", "a10");
oRange.Borders.get_Item(Excel.XlBordersIndex.xlEdgeLeft).LineStyle = Excel.XlLineStyle.xlContinuous;
oRange.Borders.get_Item(Excel.XlBordersIndex.xlEdgeRight).LineStyle = Excel.XlLineStyle.xlContinuous;
oRange.Borders.get_Item(Excel.XlBordersIndex.xlInsideHorizontal).LineStyle = Excel.XlLineStyle.xlContinuous;
oRange.Borders.get_Item(Excel.XlBordersIndex.xlInsideVertical).LineStyle = Excel.XlLineStyle.xlContinuous; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-02T16:33:44.147

我还不熟悉 C#，但在 VBA 中有`Range.Borders(xlInsideVertical)`和`Range.Borders(xlInsideHorizontal)`属性。尝试使用宏记录器并为任何工作簿区域应用所有边框。也许这会有所帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-10T11:24:28.980

终于我明白了。我这样做也没有影响性能。我在这里用一个简单的excel来解释：

**之前**

[![在此处输入图像描述](../Images/9e7be63a5cd2a0b539b7e14e9d58903f.png)](https://i.stack.imgur.com/pZdk8.jpg)

我设法将范围作为`A1:C4`变量动态存储在**exRange**中，并使用下面的代码给出边框

```
((Range)excelSheet.get_Range(exRange)).Cells.Borders.LineStyle = XlLineStyle.xlContinuous; 
```

**后**

[![在此处输入图像描述](../Images/c985c745972bc60553064ccfd3fa501b.png)](https://i.stack.imgur.com/ItdCr.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-22T09:49:19.710

```
For Each range In ranges
    For Each row As Range In .Range(range).Rows
        row.Cells.BorderAround(XlLineStyle.xlContinuous)
        row.Cells.Borders.Item(XlBordersIndex.xlInsideHorizontal).LineStyle = XlLineStyle.xlContinuous
        row.Cells.Borders.Item(XlBordersIndex.xlInsideVertical).LineStyle = XlLineStyle.xlContinuous
    Next
Next 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-10T08:45:30.630

为什么不简单地做：

```
Excel.Range tRange = xlWorkSheet.UsedRange;
tRange.Borders.LineStyle = Excel.XlLineStyle.xlContinuous;
tRange.Borders.Weight = Excel.XlBorderWeight.xlThin; 
```

*注意：在填充数据的行和单元格（范围）之后应用边框以获取范围，只需使用函数**.UsedRange()***

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-22T12:28:54.133

```
Microsoft.Office.Interop.Excel.Range tRange = xlWorkSheet.UsedRange;
        tRange.Borders.LineStyle = Microsoft.Office.Interop.Excel.XlLineStyle.xlContinuous;
        tRange.Borders.Weight = Microsoft.Office.Interop.Excel.XlBorderWeight.xlThin; 
```

# ios - 删除 UIBarButtonItem 图像

> ID：14663930
> 
> 赞同：1
> 
> 时间：2013-02-02T16:26:38.787
> 
> 标签：ios, objective-c, cocoa-touch

我有一个`UIBarButtonItem`我最初将背景图像更改为的。但我希望能够将其更改`UIBarButtonItem`回默认外观（特别是完成按钮）。然后再次回到以前的方式（这应该不是问题）。

以下是我最初更改外观的方式：

```
 [menuButton setBackButtonBackgroundImage:[UIImage imageNamed:@"menuButton.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

然后回来我正在尝试类似的事情：

```
menuButton.style = UIBarButtonItemStyleDone;
menuButton.title = @"Done";

//the above didn't do anything, so I tried to make my own image to
//replace the first image. But below did't do anything either.

[menuButton setBackButtonBackgroundImage:[UIImage imageNamed:@"doneButton.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:32:38.390

使用`setBackgroundImage:...`而不是`setBackButtonBackgroundImage:...`，您只是设置*后退按钮*的外观（在导航栏中）。

# java - 如何在图片上添加按钮？

> ID：14663932
> 
> 赞同：0
> 
> 时间：2013-02-02T16:26:50.803
> 
> 标签：java, image, swing, jbutton

我目前正在为游戏创建 GUI。我目前正在使用 JLabel 将图像加载到我的 JPanel 上，我想知道是否可以在图像的各个部分添加按钮，例如 (5,7) 和 (12,12)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:30:03.500

如果您希望`JButtons`出现在您的图像上，更好的方法是覆盖`paintComponent`并`JPanel`使用[drawImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)来绘制类似于[此示例](https://stackoverflow.com/questions/299495/java-swing-how-to-add-an-image-to-a-jpanel)的图像。这将允许您将组件添加到容器中。

但是，绝对定位（`null`布局）通常不适合设置组件位置。这个[DragLayout](http://tips4java.wordpress.com/2011/10/23/drag-layout/)应该是照顾组件大小的更好的替代品。

> DragLayout 旨在替换空布局。它将尊重组件的位置。默认情况下，它将使用组件的首选大小来确定其大小。最后，它会自动计算 Container 的首选大小。

# passwords - 更改位置时保存密码提示消失

> ID：14663934
> 
> 赞同：1
> 
> 时间：2013-02-02T16:27:06.950
> 
> 标签：passwords, location, save, reload, prompt

*我正在运行一个登录表单，如果成功，它会通过 JS location.href*将用户转发到特定页面。浏览器正确地将表单识别为登录表单并提供保存密码。现在仅在 Google Chrome 中，一旦位置更改，提示就会消失。因此，提示仅在一瞬间可见，因此无法保存密码。
有什么解决办法吗？登录成功后刷新是很常见的事情，所以应该有办法解决这个问题。

**编辑：**

这是表单的样子：

```
<form id="loginform" action="process.php" target="processframe" method="POST">
<input id="login_name" name="name" type="text" placeholder="Username"><br>
<input id="login_password" name="password" type="password" placeholder="Password"><br>
<button>Submit</button>
</form>
<iframe src="" id="processframe" name="processframe" style="display:none;"></iframe> 
```

所以请求在 iframe 中处理。*process.php*然后调用一个javascript函数：

```
window.setTimeout("parent.loginsuccess()", 1000); 
```

loginsuccess() 函数：

```
function loginsuccess()
{
location.href="/home.php";
} 
```

# php - PHP 函数到 jQuery 函数

> ID：14663939
> 
> 赞同：0
> 
> 时间：2013-02-02T16:27:16.350
> 
> 标签：php, javascript, jquery, strpos

我在 PHP 中有这个脚本

```
// To prevent complications using scientific numbers less than 0 ex 7.2341232E-23
if (false !== ($cal = strpos($a, 'E-'))) { $a = 0; }

// Split $a so we only get the numbers before '.'
if (false !== ($cal = strpos($a, '.'))) { $a = substr($a, 0, $cal); } 
```

我想知道一种在 jQuery 中制作相同功能的简单方法。有什么想法吗？

我照你说的做了……但在我完成剧本的其余部分之前，你能告诉我这是否正确吗？

```
var a1 = a.indexOf("E-");
if (a1) { a = 0; }

var a2 = a.indexOf(".");
if (a2) { Math.floor(a); } 
```

编辑：我现在创建了一个[JS Fiddle](http://jsfiddle.net/m54Du/)，其中包含我根据您的帮助创建的脚本.. 非常感谢.. 不幸的是，有些东西似乎无法正常工作.. 任何人都可以看看它，并告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:37:09.147

我的工具包中的一个功能可能会帮助你，

```
function strpos (haystack, needle, offset) {
// http://kevin.vanzonneveld.net
// +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
// +   improved by: Onno Marsman
// +   bugfixed by: Daniel Esteban
// +   improved by: Brett Zamir (http://brett-zamir.me)
// *     example 1: strpos('Kevin van Zonneveld', 'e', 5);
// *     returns 1: 14
var i = (haystack + '').indexOf(needle, (offset || 0));
return i === -1 ? false : i;
} 
```

或者，如果您想使用 jQuery 选择器，此答案可能会对您有所帮助

[jQuery 或 JavaScript 等效于 PHP strpos 函数，用于在页面上查找字符串](https://stackoverflow.com/questions/3978204/jquery-or-javascript-equivalent-of-php-strpos-function-to-find-string-on-a-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:08:30.387

这很简单..只需使用这个：

```
a = Math.floor(a); 
```

# c# - WCF JSON - 返回对象列表

> ID：14663940
> 
> 赞同：1
> 
> 时间：2013-02-02T16:27:18.950
> 
> 标签：c#, json, wcf

我有小型 JSON WCF 服务。几天前，我决定更改我的一个函数中的某些内容，并且与其他更改一起，我已将函数的返回类型从

```
ListJSONResponse<MyClass> 
```

至

```
ListJSONResponse<Object> 
```

希望我可以返回匿名对象。不幸的是，在我这样做之后，我无法从我的服务中获得响应 - 我总是收到 HTTP 错误 101：连接已重置。

我也尝试过更改返回类型并将函数的其余部分保持在“原始”状态。不幸的是，同样的错误发生了，所以我很确定使用`Object`返回类型会导致错误。

任何想法我能做些什么来解决它？

# ruby-on-rails-3 - 在 Rails 中为具有命名空间的模型使用关系

> ID：14663952
> 
> 赞同：0
> 
> 时间：2013-02-02T16:28:44.597
> 
> 标签：ruby-on-rails-3, namespaces, database-relations

如何为具有命名空间的模型编写关系？

如果我有`Class Foo::Bar`并且`Class Employee`我想在他们之间有 habtm 我会写吗

```
Class Foo::Bar

has_and_belongs_to_many :employees

end 
```

并且在

```
Class Employee
has_and_belongs_to_many ???? # <- how do I write this part?
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:43:27.610

您可以执行以下操作：

```
class Employee
  has_and_belongs_to_many :foo_bars, :class_name => "Foo::Bar"
end 
```

然后你应该能够访问一个实例`Foo::Bar`上的所有对象`Employee``employee.foo_bars`

# php - php用户定义函数参数范围分配问题

> ID：14663954
> 
> 赞同：0
> 
> 时间：2013-02-02T16:28:57.933
> 
> 标签：php, scope, user-defined-functions

在 php 代码第 1 行和第 2 行之后，我收到了通知和错误消息。

> 注意：未定义变量：dbc in ...
> 警告：mysqli_get_host_info() 期望参数 1 为 mysqli，在 ...

```
connectdb();
echo mysqli_get_host_info($dbc); 
```

你能帮我解决我的通知和警告吗？

如何使 $dbc 也为外部函数定义？我目前正在处理错误级别-1。请不要告诉不要显示通知作为解决方案。不幸的是，我无法理解自定义函数变量通过问题。谢谢。

 ````
function connectdb() 
{
    $dbc = mysqli_connect (db_host, db_user, db_password, db_name);
    if (!$dbc) 
        {
            $txt = mysqli_connect_errno().mysqli_connect_error();
            db_connect_error_mail($txt);
            unset ($txt);
            die('error message.');
        } 
    else 
        {
            return $dbc;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:34:39.563

您没有在任何地方分配 connectdb() 方法的返回值。你要：

```
$connection = connectdb();
echo mysqli_get_host_info($connection); 
```

为清楚起见，我使用了与您在函数中使用的变量名称不同的变量名称，因为它们是不同的变量，因为它们是在不同的范围内定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:35:01.340

想一想，你`$dbc`从函数中返回 ，但你没有`connectdb()`在第 1 行分配函数的返回值。编译器如何知道你将返回值保存在 中`$dbc`？

```
$dbc = connectdb(); 
```

这将解决您的错误。`

# c# - CRM 2011 C# 确认框

> ID：14663956
> 
> 赞同：1
> 
> 时间：2013-02-02T16:29:00.260
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm

我可以在同步（或异步）插件中有一个确认框吗？我需要确认导入：将创建 3 个新产品 将创建 2 个新部门（单击 OK 继续）

目前有一个用于从 excel 定期导入价目表的临时实体；插件在此实体的“创建时”注册并创建或更新产品和价目表项目（并创建但不更新部门、帐户和分类）

用户不希望每次供应商发布新的价目表时都必须执行多次导入；有没有更好的方法来处理整个情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:56:56.510

我不认为你可以有一个消息框（或插件中的任何其他 UI 交互。有时，一个插件将由一个服务或工作流调用，而根本没有用户登录。输出窗口会发生什么在这种情况下？

据我了解，如果你想和用户交流，你需要依赖 JS。.NET 的良好编码在 CRM 中是为服务器操作保留的。

如果要执行的操作数量很大（或者可能会变得越来越大，就像您的情况一样），我会采用以下方法。

由于该过程应该在用户交互时被调用，我将使用 JavaScript，并实现一个适当的*onSomeEvent*方法，该方法创建一个辅助实体*Hazaa*的单个实例（或者可能是 ProducLineSetter*，更明确地说明它的作用） .

然后，我会部署一个插件来响应*Create*消息并为我完成所有的魔法。这包括创建/配置所有必需的实体（价格、产品等等）。

我喜欢 C#，所以为了保持我的回答温和，我觉得我还需要补充一点，第二步也可以通过 JavaScript 中的一些调用来解决。在这种情况下，看在上帝的份上，将其放在单独的 JS 文件中，并将其添加为 Web 资源。:)

# c++ - 如何计算cpp文件中的所有全局变量

> ID：14663961
> 
> 赞同：2
> 
> 时间：2013-02-02T16:29:18.980
> 
> 标签：c++, parsing

是否存在任何 cpp 代码解析器来解决此问题？例如

```
// B.cpp : Defines the entry point for the console application.
//
#include<iostream>
#include<vector>
#include<algorithm>

size_t N,M;
const size_t MAXN = 40000;
std::vector<std::pair<size_t,size_t> > graph[MAXN],query[MAXN],qr;
size_t p[MAXN], ancestor[MAXN];
bool u[MAXN];
size_t ansv[MAXN];
size_t cost[MAXN];

size_t find_set(size_t x){
   return x == p[x] ? x : p[x] = find_set(p[x]);
}

void unite(size_t a, size_t b, size_t new_ancestor){

}

void dfs(size_t v,size_t ct){

}

int main(int argc, char* argv[]){

return 0;
  } 
```

该文件有 10 个全局变量：**祖先**、**ansv**、**成本**、**图**、**M**、**N**、**p**、**qr**、**query**、**u**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T16:34:19.780

您可以使用以下 shell 命令调用编译器并计算导出的全局变量：

```
$ g++ -O0 -c B.cpp && nm B.o | grep ' B ' | wc -l
10 
```

如果你删除行数，你会得到他们的名字

```
$ g++ -O0 -c B.cpp && nm B.o | egrep ' [A-Z] ' | egrep -v ' [UTW] '
00000004 B M
00000000 B N
00111740 B ancestor
00142480 B ansv
00169580 B cost
00000020 B graph
000ea640 B p
000ea620 B qr
00075320 B query
00138840 B u 
```

让我们看看这是如何工作的。

1.  `g++ -O0 -c B.cpp`：这会在没有优化的情况下调用编译器，因此输出（`B.o`默认情况下）几乎是没有删除标识符的编译文件。

2.  `nm B.o`：调用[nm](http://linux.die.net/man/1/nm)一个工具（引用链接）“列出目标文件中的符号”。例如，如果“符号在未初始化的数据部分中”，则存在“B”。

3.  我们想要全局值（表示大写），但不是 U、T 或 W。这就是 grep 的作用。

# ruby-on-rails - 编写此 rake 命令的更快方法 - rake db:drop db:create db:migrate db:seed

> ID：14663963
> 
> 赞同：7
> 
> 时间：2013-02-02T16:29:37.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

每次对架构或新迁移文件进行更改时，我都会运行以下命令：

```
rake db:drop db:create db:migrate db:seed 
```

是否有预先构建的等效方法来执行此操作？

我从我所读到的内容中认为`rake db:reset`这并不完全一样，但我可能是错的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T20:39:49.097

您可以为此创建一个自定义 rake 任务 - lib/tasks/db_rebuild_all.rake

```
namespace :db_tasks do
  desc "Rebuild database"
  task :rebuild, [] => :environment do
    raise "Not allowed to run on production" if Rails.env.production?

    Rake::Task['db:drop'].execute
    Rake::Task['db:create'].execute
    Rake::Task['db:migrate'].execute
    Rake::Task['db:seed'].execute
  end
end 
```

然后运行`bundle exec rake db_tasks:rebuild`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T07:48:36.377

> *   运行`rake db:reset && rake db:seed`（注意：您必须更新 db/schema.rb 文件） **或** 
> *   跑`rake db:migrate:reset && rake db:seed`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T16:37:13.957

你可以运行`rake db:drop`然后`rake db:setup`。

`db:setup`会跑`rake db:create db:schema:load and db:seed`

但是，为什么每次进行新迁移时都要删除并重新创建数据库？这就是迁移的目的，对现有数据库进行增量更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T22:47:33.187

首先使用以下命令创建任务文件 (lib/tasks/db.rake)：

```
rails g task db reseed 
```

然后在里面写：

```
namespace :db do
  desc "Reseed database task"
  task reseed: [ 'db:drop', 'db:create', 'db:migrate', 'db:seed' ] do
    puts 'Reseeding completed.'
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-01T11:33:56.460

从 Rails 6 开始，您可以运行`rake db:prepare`创建数据库、运行迁移和种子

如果要完全重置数据库，请运行`rake db:drop && rake db:prepare`

[https://guides.rubyonrails.org/v6.0/6_0_release_notes.html#active-record-notable-changes](https://guides.rubyonrails.org/v6.0/6_0_release_notes.html#active-record-notable-changes)

# silverlight-5.0 - SL5 超出浏览器主窗口大小 - 保留最小值

> ID：14663964
> 
> 赞同：0
> 
> 时间：2013-02-02T16:29:51.053
> 
> 标签：silverlight-5.0, out-of-browser

我们允许用户调整浏览器外应用程序的大小，但我们希望保留最小大小。

我们像这样处理 SizeChanged 事件：

```
 if (e.NewSize.Width < MINWIDTH)
        {
            App.Current.MainWindow.Width = MINWIDTH;
        }
        if (e.NewSize.Height < MINHEIGHT)
        {
            App.Current.MainWindow.Height = MINHEIGHT;
        } 
```

不幸的是，这会导致一些非常不吸引人的闪烁。
还有其他设置最小尺寸的技术吗？

感谢您的任何想法....

# c++ - 使子类能够使用父类的功能？

> ID：14663967
> 
> 赞同：0
> 
> 时间：2013-02-02T16:30:02.827
> 
> 标签：c++, sfml

我希望 struct MenuItem 能够使用 HighlightRectOutline。我该怎么做呢？

文本.h

```
 class Text {

public:
             ....

    void Text::highlightRectOutline(sf::RenderWindow &window, sf::Color color);

    struct MenuItem {
        public:
            Menu::MenuResult action;
    }; 
```

高亮矩形轮廓：

```
void highlightRectOutline(sf::RenderWindow &window, sf::Color color) {
    sf::RectangleShape outlineRect;

    sf::Vector2f size(Text::getWidth(), Text::getHeight());

    outlineRect.setSize(size);
    outlineRect.setPosition(Text::getPosition());

    outlineRect.setFillColor(sf::Color::Transparent);

    outlineRect.setOutlineColor(color);
    outlineRect.setOutlineThickness(5);

    window.draw(outlineRect);
} 
```

这个功能是固定的。向下滚动菜单.h

```
class Menu {

    public:
        static enum MenuResult { Exit, Options, Back, ChangeResolution, Play, Nothing };

        MenuResult showMMenu(sf::RenderWindow &window);
        MenuResult showOMenu(sf::RenderWindow &window);

    private:
        MenuResult getMenuResponse(sf::RenderWindow &window);
        MenuResult handleClick(int x, int y);
        Menu::MenuResult Menu::handleButtonHover(sf::RenderWindow &window, Text::MenuItem menuItem, int x, int y);
        std::list<Text::MenuItem> menuItems;

}; 
```

手柄按钮悬停：

```
Menu::MenuResult Menu::handleButtonHover(sf::RenderWindow &window, Text::menuItem menuItem, int x, int y) {

    sf::Color color(255, 122, 40);

    std::list<Text::MenuItem>::iterator it;

    for(it = menuItems.begin(); it != menuItems.end(); it++)
    {
        sf::floatRect menuItemRect = (*it).getRect();

        if( menuItemRect.contains(x, y)) 
            menuItem.highlightRectOutline(window, color);
    }

    return Nothing;

} 
```

这不能使用 getRect 或 menuItem。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:16:15.227

除了不是已经提到的 sftrabbit 的子类之外，您还应该将基类的方法声明为受保护的。这样，它们对子类可见。

# java - 从 maven 调用时无法使用 ant 构建

> ID：14663969
> 
> 赞同：2
> 
> 时间：2013-02-02T16:30:03.270
> 
> 标签：java, maven, ant, build

我有一个 ant 构建文件，它在自己调用时可以工作。当我从 Maven 调用它时，前几个任务执行良好（初始化、清理等），但构建失败并显示：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run (compile) on project maven-stream: An Ant BuildException has occur
ed: The following error occurred while executing this line:
[ERROR] C:\maven_projects\cm\Qlarius Underwriter\build.xml:24: Unable to find a javac compiler;
[ERROR] com.sun.tools.javac.Main is not on the classpath.
[ERROR] Perhaps JAVA_HOME does not point to the JDK.
[ERROR] It is currently set to "C:\Program Files\Java\jdk1.7.0_07\jre"
[ERROR] around Ant part ...<ant antfile="C:\maven_projects\cm/Qlarius Underwriter/build.xml">... @ 4:69 in C:\maven_projects\cm\target\antrun\build-ma
in.xml 
```

为什么ant在直接调用而不是通过maven时会找到java？

pom.xml 文件的 ant 部分是：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>compile</id>
        <phase>compile</phase>
        <configuration>
          <target>
            <ant antfile="${basedir}/Qlarius Underwriter/build.xml">
              <target name="LifeQuote"/>
            </ant>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:34:16.840

正如错误所暗示的那样，您没有指向 JDK。您需要将 JAVA_HOME 更改为 JDK 的根目录，而不是 JRE。这样就可以找到了`javac`。

其他任务`init`，`clean`如果他们不使用可能会没问题`javac`

# c# - 在列表中使用 Linq 选择列表

> ID：14663971
> 
> 赞同：20
> 
> 时间：2013-02-02T16:30:21.653
> 
> 标签：c#, .net, linq

使用 LINQ 如何从列表中的列表中进行选择

```
public class Model
{
    public string application { get; set; }

    public List<Users> users { get; set; }
}

public class Users
{
    public string name { get; set; }

    public string surname { get; set; }
}

List<Model> list = new List<Model>(); 
```

我需要选择应用程序=“应用程序名称”的列表和姓氏=“姓氏”的用户到一个列表中。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-02T16:37:29.363

如果您想通过以下方式过滤模型`applicationname`并通过以下方式过滤剩余模型`surname`：

```
List<Model> newList = list.Where(m => m.application == "applicationname")
    .Select(m => new Model { 
        application = m.application, 
        users = m.users.Where(u => u.surname == "surname").ToList() 
    }).ToList(); 
```

如您所见，它需要创建新模型和用户列表，因此它不是最有效的方法。

如果您不想过滤用户列表，而是按具有给定用户名的至少一个用户的用户过滤模型，请使用`Any`：

```
List<Model> newList = list
    .Where(m => m.application == "applicationname"
            &&  m.users.Any(u => u.surname == "surname"))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-02T16:33:52.197

您必须[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)在纯 LINQ 中使用扩展方法或其等效语法。

```
(from model in list
 where model.application == "applicationname"
 from user in model.users
 where user.surname == "surname"
 select new { user, model }).ToList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T16:39:27.077

```
list.Where(m => m.application == "applicationName" && 
           m.users.Any(u => u.surname=="surname")); 
```

如果您想按照 TimSchmelter 的评论*过滤用户，您可以使用*

```
list.Where(m => m.application == "applicationName")
    .Select(m => new Model
    {
        application = m.application,
        users = m.users.Where(u => u.surname=="surname").ToList()
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-02T16:57:35.683

在我之前的回答灾难之后，我将尝试其他方法。

```
List<Model> usrList  = 
(list.Where(n => n.application == "applicationame").ToList());
usrList.ForEach(n => n.users.RemoveAll(n => n.surname != "surname")); 
```

# javascript - 如何将收缩包装应用于 WordPress 的 NextGen 画廊？

> ID：14663972
> 
> 赞同：-19
> 
> 时间：2013-02-02T16:30:24.610
> 
> 标签：javascript, html, image, wordpress

我正在为我的网站使用 wordpress 主题，并为画廊页面使用[NextGen 画廊](http://wordpress.org/extend/plugins/nextgen-gallery/)插件（缩略图，单击时放大），我想保护我的图像不被盗。

我禁用了鼠标功能，但我也想做收缩包装

我有这个收缩包装的代码：

```
<table style="display: inline;" border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr height="600">
<td style="background-image: url(1.jpg);" width="800"><img src="2.gif" width="800" height="600" /></td>
</tr>
</tbody>
</table> 
```

问题是，我在哪里放置这段代码？（缩略图和放大图像都需要这个）

如果您需要更多信息（ftp 屏幕截图、我网站的 url 或其他任何内容）请告诉我，我会编辑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T16:41:01.167

您无法阻止用户“窃取”您的图像。如果图像在网站上，它们将被下载到用户计算机的*某个地方*（据说可以在 Chrome 的开发工具中轻松找到某个地方），并且专门的小偷将能够窃取它们。相反，请降低您将提供的图片的分辨率，这样它们的价值就会降低（另外，它们会加载得更快！）并添加水印。

禁用鼠标功能将不起作用，因为用户可以简单地禁用 JavaScript（一项非常简单的任务）。

哎呀，用户可以启动类似[Awesome Screenshot](https://chrome.google.com/webstore/detail/awesome-screenshot-captur/alelhddbbhepgpmgidjdcjakblofbmce?hl=en)之类的东西，然后裁剪除图像之外的所有内容。

这个故事的寓意是，您网站前端的任何东西都是公平的游戏。有很多方法可以保护自己，但没有什么是完美的。

# functional-programming - SML 中的 foldl 操作

> ID：14663975
> 
> 赞同：0
> 
> 时间：2013-02-02T16:30:51.507
> 
> 标签：functional-programming, sml, smlnj, fold, ml

我执行以下`foldl`操作

```
foldl (fn (acc,y) => if acc>y then acc else y+1) 0 [1,3] 
```

所以，我希望这会产生一个结果，`4`但它会产生一个输出`3`。我错过了什么？

我的痕迹是这样的：

```
acc: 0   y: 1
acc: 2   y: 3 
```

由于 acc > y，即 2>3，它应该进入 else 分支并返回 4 (3+1)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T16:34:20.273

累加器是`foldl`的第一个参数的第二个参数。所以试试这个：

```
foldl (fn (y,acc) => if acc>y then acc else y+1) 0 [1,3] 
```

看[这里](http://www.standardml.org/Basis/list.html#SIG%3aLIST.foldl%3aVAL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:24:52.293

进展：

```
fn(0,1) => not(0>1) = 1+1 = 2: new acc 
fn(3,2) => is(3>2) = 3: new acc
fn([],3) => 3: final answer 
```

foldl 立即计算一个新值， foldr 只有在达到 [] 时才开始返回一个值。

# database-design - 我们是否应该总是消除计算属性，即使它是一个关键和复杂的计算？

> ID：14663978
> 
> 赞同：2
> 
> 时间：2013-02-02T16:30:56.687
> 
> 标签：database-design, attributes, pattern-recognition, maintainability, robustness

数据库设计的“第三范式”要求您删除功能依赖关系。它旨在消除冗余，从表中删除可以从其他字段计算的任何属性（字段）。例如，当您引用另一个实体时，您只存储它的键。您不存储这些引用实体的属性副本，因为这意味着每次更改引用实体时都必须更新它们。

另一种情况是高度等属性。您想知道一个人的身高，但在您的应用程序中，您可能希望以不同的单位了解它：米、英尺、天文单位。但是您不会存储所有这些值，您应该删除计算字段，因此您只保留其中一个（当然是米），并在需要时“即时”计算转换后的值。

您也不存储年龄之类的东西，而是从出生日期计算它们。在这种情况下，年龄随时间变化的事实也起作用。如果你不这样做，你的数据很快就会不正确，除非你不断地更新它。

现在假设您有一个显示每个用户的星座的社交网络。对于每个用户，我们都会显示他或她的星座，这是根据出生日期和时间以及用户选择的占星术传统（例如西方或中国）计算得出的。计算某人的星座是一项非常专业和复杂的计算，但您仍然可以从占星术库中调用并计算。你会如何设计这个数据库，你会删除这个功能相关的属性，或者你会计算一次用户的符号，或者每次她更新她的出生日期，然后将它存储在数据库中并忘记计算登录的可能性你的系统的其余部分，或者你会强制执行“3NF” 用铁腕统治？如果用户坚持认为她的符号应该与您的算法计算的符号不同，那么您如何看待能够调整用户符号的潜在好处？

现在假设一个新的应用程序。你正在为军队建立一个系统，为新的应征者选择可能的职业。你的系统的一部分是一个巨大的模式识别机器，由 ORNL 开发，它会根据来自你数据库的大量数据告诉你允许应征入伍者从事哪些职业。这种模式识别方法会查看每个人的身高、出生日期、医疗记录、学校成绩单，并且还会查看该人对两份问卷之一的一长串答案。它还考虑了上级军官填写的评估问卷，并同时分析每年的所有应征入伍者，得出一堆参数，例如前馈神经网络。这个神经网络比整个模式识别系统更简单，但它仍然是一个相当复杂的计算，而不仅仅是温度单位的转换。然而，你可以把它看作一个“黑匣子”，当你从数据库中提取他的记录时，它可以告诉你每个应征者的命运。

在陆军日历中的特定日期，进行分析，找到 ANN 参数，现在您可以运行黑匣子并告诉每个应征者他将在接下来的一两年内做什么。这是一件非常重要的事情。您将决定人们的职业，您将派一些人在厨房操作烤箱，而另一些人则负责驾驶坦克。每个人都将登录陆军网络查看他们的职业，并在他们的个人网页中查看结果。

现在，小黑盒就在那里，它根据从数据库中提取的属性输出这个重要的值。属性和参数可能永远不会改变，而应征者命运的计算可能永远是正确的，永远是第一天的相同值。但是你真的会把它留在数据库之外，只是为了遵循“删除计算的属性”规则吗？

这不仅仅是年龄、星座或温度转换的一些计算。模式识别系统确实是计算属性的路径。但是你真的想把它永远保存在你的系统中，一遍又一遍地重新计算这个非常重要的事情吗？还是您认为最好计算一次，然后忘记这个神奇的黑匣子的存在？*我的意思是，只要有一天*运行所有这些疯狂的模式识别代码，然后挑选结果，并将它们记录在数据库中。当有人登录查看他的分析输出时，让查询只是一个无聊的数据获取过程，而将所有的识别“兴奋”留到下一次。

另一个更明显的情况：您经营着像亚马逊这样的网上商店。您有一种模式识别方法可以向人们推荐书籍，该方法来自数据库中的用户记录。你会在需要当前推荐的时候一直运行这个东西，还是将模式识别框视为与系统其余部分分开的东西，只是将其结果提供给其他程序可以读取的数据库？拥有一个控件不是很好吗，例如，以确保您不会在尴尬的时刻切换建议？...不要太担心计算负担，假设有出色的内存和计算资源。

TL;DR -- 你认为删除计算属性的规则永远不应该被打破，还是你会说可以将非常重要的属性的结果存储在数据库中，这些属性是通过非常复杂和精细的模式识别方法计算出来的？是否存在我们应该假装您实际上无法“按需”执行计算的情况，然后将这些结果记录在那里，无论如何都不会更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T21:25:50.250

**蓄意的、司法**的非规范化被“允许”用于缓存昂贵计算的结果。转换单位或计算年龄将是可能不应缓存的廉价操作的示例，但您引用的其他示例看起来很合适。

根据 DBMS，您可以使表标准化，并在它们“顶部”实现缓存：

*   一些 DBMS 支持[物化视图](http://en.wikipedia.org/wiki/Materialized_view)- 就像常规 VIEW 但持久化，因此每次查询时都不需要重新计算。
*   一些支持计算字段（又名计算列）的 DBMS，也支持*持久*化它们（一个例子是MS SQL Server 下的[PERSISTED关键字）。](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)

# ios - 无法解析格式字符串错误

> ID：14663979
> 
> 赞同：0
> 
> 时间：2013-02-02T16:31:00.123
> 
> 标签：ios, objective-c, core-data, nspredicate

我的代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"File" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];
    cellText = @"Crysis 3 - 'The Nanosuit' Gameplay Trailer";
    NSPredicate *predicate = [NSPredicate predicateWithFormat:cellText];
    [fetchRequest setPredicate:predicate]; 
```

构建后我有错误

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法解析格式字符串“Crysis 3 - 'The Nanosuit' Gameplay Traile”'**

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:34:38.023

您正在将一些 DB 值文本传递给带有格式的谓词。请参阅[NSPredicate 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)。它需要一个非常结构化格式的字符串：

这将是这样的： `@"gameName like Crysis 3"`

# android - android呼叫应答/拒绝应用程序

> ID：14663981
> 
> 赞同：0
> 
> 时间：2013-02-02T16:31:22.933
> 
> 标签：android, call

任务有正确的解决方案吗？

在来电时隐藏默认接听/拒绝活动并使用两个按钮“接听”（接听电话）和“拒绝”（拒绝通话）显示我的活动

在 2.3.3 I9001 我使用

1.  使用 TelephonyManager.listen 服务拦截呼叫

2.  使用标志 FLAG_ACTIVITY_NEW_TASK Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 显示我的活动（延迟 1 秒）

3.  在回答我使用模拟 KEYCODE_HEADSETHOOK

4.  在 regect 我使用 ITelephony hack

但这不适用于 4.0.4。

a) 我的活动显示但默认隐藏

b）可能所有版本都有正确的方法

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:40:43.863

```
TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
Class c = Class.forName(tm.getClass().getName());
Method m = c.getDeclaredMethod("getITelephony");
m.setAccessible(true);
ITelephony telephonyService;
telephonyService = (ITelephony)m.invoke(tm);
telephonyService.silenceRinger();
telephonyService.answerRingingCall(); 
```

# c# - 我可以在用于 SQLite 的类中使用字符串列表吗？

> ID：14663984
> 
> 赞同：14
> 
> 时间：2013-02-02T16:31:44.397
> 
> 标签：c#, sqlite, type-conversion, windows-store-apps, sqlite-net

SQLite-net 将用于表示表的类中使用的数据类型有哪些限制？具体来说，我可以使用这个：

```
public List<string> CoconutWaterBrands { get; set; } 
```

...或者我需要这个：

```
public string[] CoconutWaterBrands { get; set; } 
```

……还是别的什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-03-12T21:37:28.523

与 Sandy 的回答类似，在序列化/反序列化列表方面，您可以使用`Text blobbed properties`SQLite [-Net Extensions library](https://bitbucket.org/twincoders/sqlite-net-extensions)。因此，例如在您的 Model 类中：

```
public class SomethingToDoWithCoconuts
{
    [TextBlob(nameof(CoconutWaterBrandsBlobbed))]
    public List<string> CoconutWaterBrands { get; set; }
    public string CoconutWaterBrandsBlobbed { get; set; } // serialized CoconutWaterBrands
} 
```

来自[Text blobbed properties 的文档](https://bitbucket.org/twincoders/sqlite-net-extensions#markdown-header-text-blobbed-properties)：

> Text-blobbed 属性在保存时序列化为文本属性，并在加载时反序列化。这允许将简单对象存储在同一表中的单个列中。
> 
> Text-blobbed 属性在序列化和反序列化对象方面有少量开销和一些限制，但它是存储简单对象（如基本类型或简单关系的 List 或 Dictionary）的最佳方式。文本块属性需要一个声明的字符串属性，其中存储了序列化的对象。
> 
> 文本块属性不能与其他对象有关系，也不能与其父对象有反向关系。
> 
> 如果没有使用 TextBlobOperations.SetTextSerializer 方法指定其他序列化程序，则使用基于 JSON 的序列化程序。要使用 JSON 序列化程序，项目中必须包含对 Newtonsoft Json.Net 库的引用，也可以作为 NuGet 包提供。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-02T16:45:35.340

ORM（又名抽象泄漏）会有这种问题。类中的字段将对应于表中的列。如果你使用 List 或数组，那么 ORM 要么必须以某种方式将列表中的这些值组合在一个列中，因为它必须选择某种分隔符，如果分隔符出现在你的字符串值中怎么办，最终你会在兔子洞里慢慢找到自己。

我不认为 SQLite-net 支持数组/列表。您将需要使用字符串（并根据需要拆分和连接它）或创建一个新表来表示一对多关系。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-08T12:39:10.490

要为该问题提供更具体的解决方案，您可以使用 Newtonsoft.Json 序列化为 JSON blob：

IE

```
private string coconutWaterBrands;

[Ignore]
public List<string> CoconutWaterBrands { 
    get
    {
        return JsonConvert.DeserializeObject<List<string>>(coconutWaterBrands);
    } 
    set
    {
        coconutWaterBrands = JsonConvert.SerializeObject(value);
    }
} 
```

# ruby-on-rails - Rails 3：未设置虚拟属性

> ID：14663986
> 
> 赞同：0
> 
> 时间：2013-02-02T16:32:00.437
> 
> 标签：ruby-on-rails, nested-forms, virtual-attribute

我有以下`User`具有`artist_attributes`虚拟属性的模型：

```
class User < ActiveRecord::Base
  attr_accessor :artist_attributes
  attr_accessible :artist_attributes

  belongs_to :artist
  accepts_nested_attributes_for :artist, update_only: true
end 
```

这是艺术家模型：

```
class Artist < ActiveRecord::Base
  has_one :user
end 
```

问题是没有设置虚拟属性。例如，这里是我的用户控制器：

```
class Members::UsersController < Members::BaseController
  def update
    current_user.artist_attributes = params[:user].delete(:artist_attributes)
    p current_user.artist_attributes # => nil
    # ...
  end
end 
```

这是提交的表格：

```
<%= simple_form_for current_user, url: members_profile_path do |f| %>
  <%= f.simple_fields_for :artist do |ff| %>
    <%# ... %>
  <% end %>

  <%= f.submit "Edit profile", class: "btn btn-primary", disable_with: "Editing profile..." %>
<% end %> 
```

为什么没有设置`artist_attributes`虚拟属性？是因为嵌套形式吗？

更新

这是我提交表单后的参数哈希：

```
Parameters: {
  "utf8"=>"✓",
  "authenticity_token"=>"XQI4y7x7CSjxUhdYvEv2bLEjitwCfXxeTBUU3+kYS4g=",
  "user"=> {
    "email"=>"youjiii@gmail.com",
    "forename"=>"You",
    "surname"=>"Jiii",
    "password"=>"[FILTERED]",
    "password_confirmation"=>"[FILTERED]",
    "artist_attributes" => {
      "bio"=>"NERVO is awesome!",
      "phone_number"=>"",
      "city"=>"",
      "country"=>"Afghanistan"
    }
  },
  "commit"=>"Edit profile"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:14:03.713

尝试这个：

改变

```
current_user.artist_attributes = params[:user].delete(:artist_attributes) 
```

至

```
if current_user.update_attributes(params[:user])
  # happy result
end 
```

嵌套属性应该由 Rails 自动处理。如果您需要自定义设置器，请定义`artist_attributes=`并且您应该很好。我相信 Rails 4 将支持 Postgresql 中的哈希值。同时在这里寻找 Rails 3：[http ://travisjeffery.com/b/2012/02/using-postgress-hstore-with-rails/](http://travisjeffery.com/b/2012/02/using-postgress-hstore-with-rails/)

## 编辑

根据您的评论，如果目标只是将其发送到您的 API，我不会将其存储在虚拟属性中。

```
# Controller
def update
  if User.update_artist(params[:user][:artist_attributes])
    # happy thoughts
  end
end

# User model
def update_artist(artist_attributes)
  begin
    # API call
  rescue api exception
    log a message like "Couldn't update at this moment"   
  end
end 
```

# dart - 如何在 Dart 中调度事件？

> ID：14663991
> 
> 赞同：1
> 
> 时间：2013-02-02T16:32:30.507
> 
> 标签：dart

我读了这个问题：[如何在 Dart 中监听自定义事件？](https://stackoverflow.com/questions/13897091/how-do-i-listen-for-custom-events-in-dart)

它告诉您调度事件，例如：

```
window.on['foo'].dispatch(new CustomEvent('foo')); 
```

但是，在最新版本的 Dart SDK 中，`on`不推荐使用。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T16:38:46.203

最新 SDK 中的等效代码如下：

```
window.dispatchEvent(new CustomEvent('foo')); 
```

它不需要比这更难；）

# drupal - 是否可以使用任何 Drupal 图表模块创建这种图表？

> ID：14663994
> 
> 赞同：1
> 
> 时间：2013-02-02T16:32:47.653
> 
> 标签：drupal, charts, google-visualization

我想弄清楚如何创建一个类似于这个的图表：

![在此处输入图像描述](../Images/1e7d6916ecb937827f777956a2645b95.png)

此类图表将使用任何用于创建图表的可用 Drupal 模块来创建。

我习惯使用[图表](http://drupal.org/project/chart)模块，但我不知道如何用它来实现这种图表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:45:53.390

根据此[示例](http://code.google.com/p/drupal-chart-api/wiki/Examples)链接，我认为您绝对应该能够做到。如果您在阅读后仍然无法弄清楚，请告诉我，我可以看到您在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:02:15.117

我已经设法使用[Google 图表工具模块](http://drupal.org/project/google_chart_tools)做到了。我真的更喜欢这个模块，因为它允许构建交互式图表。我的代码可以在下面找到：

```
function test_chart() {
  $settings = array();

  $settings['chart']['chartOne'] = array(  
    'header' => array('2004', '2005', '2006'),
    'rows' => array(array('100', '500', '300') , array('900', '800','200')),
    'columns' => array('Sales', 'Expenses'),
    'chartType' => 'BarChart',
    'containerId' =>  'org_chart',
    'options' => array( 
      'forceIFrame' => FALSE, 
      'title' => 'Bar Chart Test',
      'width' => 550,
      'height' => 250,
      'vAxis' => array(title => 'Year',titleTextStyle=>array(color=>'red'))
    )   
  );
  //Draw it.
  draw_chart($settings); 
  return '<p>Example org chart:</p><div id="org_chart" class="org_chart"></div>';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T02:20:33.213

请注意，示例链接（用于 [图表](https://www.drupal.org/project/chart)模块）的答案不再是查找有关此模块的文档的推荐 URL。在此期间，我在此处添加了一些相关信息...

现在确实有很多与[图表相关的模块](https://www.drupal.org/node/2363985)可用于在 Drupal 中创建图表。

[Chart](https://www.drupal.org/project/chart)模块的项目页面包含一些信息，表明它“正在折旧，建议用户移至[Charts](https://www.drupal.org/project/charts)模块”。尽管最近图表问题队列中的一些评论包含一些细节，说明正在重新考虑折旧。有关详细信息，请参阅该问题队列。

如果需要，请不要犹豫，在模块的问题队列中创建问题。作为替代方案，在此站点（或 Drupal Answers）上创建一个新问题，并找到一种方法让我知道它（例如，通过我在此处的任何问题或答案中的一些评论）。

**请注意**：我是[Chart](https://www.drupal.org/project/chart)和[Charts](https://www.drupal.org/project/charts)模块的维护者，也是我的回答开头提到[的图表模块比较](https://www.drupal.org/node/2363985)文档的作者。

# android - 如何在 ImageView 中更改 LayerDrawable？

> ID：14663995
> 
> 赞同：3
> 
> 时间：2013-02-02T16:33:03.237
> 
> 标签：android, android-layout, layerdrawable, gradientdrawable

我正在`ImageView`以`LinearLayout`编程方式添加几个，它们`ImageView`的`src`设置为`R.drawable.rectangle`.

我正在尝试创建一个仅在左侧有边框的纯色矩形。

**R.drawable.rectangle**看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
            <solid android:color="#000000" />
            <stroke android:width="1dp" android:color="#999" />
        </shape>
    </item>
    <item 
        android:top="0dp" android:left="1dp" android:bottom="0dp" android:right="0dp">
        <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
            <solid android:color="#283BCB"/>
            <size android:width="100dp" android:height="8dp" />
        </shape>
    </item>
</layer-list> 
```

在我的活动中，我正在膨胀包含的布局，`LinearLayout`并且我正在以编程方式将 ImageViews 添加到它，这一切都在工作。问题是我无法操纵矩形宽度。如果我做：

```
imageView.getLayoutParams().width = 10; 
```

矩形需要有不同的大小和颜色。但是，如果我这样做，矩形会奇怪地变形，如果我不使用图层列表，而只使用形状（但这样我无法添加左边框），则不会发生这种情况。

所以我猜我需要得到`LayerDrawable`，然后得到`GradientDrawable`并改变它。但是我没有任何运气来实现这一点。

```
LayerDrawable layer = (LayerDrawable)imageView.getDrawable();
GradientDrawable rectangle = (GradientDrawable)layer.getDrawable(1);
// rectangle.setBounds
// rectangle.setColor NOT working 
```

有什么提示吗？谢谢

# google-chrome-extension - 在 chrome 中启用多线程下载

> ID：14663998
> 
> 赞同：7
> 
> 时间：2013-02-02T16:33:36.943
> 
> 标签：google-chrome-extension, download

我想创建一个可以启用多线程下载文件的 chrome 扩展。chrome 是否公开了一些可用于使用 javascript 读取文件流的 API？

我想知道为什么chrome默认不支持多线程下载？另外，如果现在有什么方法可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T02:04:24.667

[下载 API](https://developer.chrome.com/extensions/downloads.html) （截至目前，仅在开发频道上可用）似乎支持您的请求。[chrome.downloads.download](https://developer.chrome.com/extensions/downloads.html#method-download)方法的每次调用都构成了在单独的线程（或进程，就此而言）中自己的下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T09:18:21.630

查看 Metalink 下载器：[https ://chrome.google.com/webstore/detail/metalink-downloader/jnpljlobbiggcdikagmiepniibjdinap](https://chrome.google.com/webstore/detail/metalink-downloader/jnpljlobbiggcdikagmiepniibjdinap)

Metalink Downloader 可以设置 10 个同时连接从一个 url 下载。