# StackOverflow 问答 14437000-14437999

# android - Gps 提供商返回 Null 位置

> ID：14437001
> 
> 赞同：0
> 
> 时间：2013-01-21T10:49:56.607
> 
> 标签：android

我正在尝试在我的应用程序中获取当前位置（纬度和经度值）。我使用了下面的代码。

问题是----------------->

```
 When the Best provider is GPS,Location returned  is null. 
```

我学习了一些 SO 帖子并将 LocationListener 添加到我的代码中，然后它可以工作，但是当我重新启动设备并再次运行应用程序时，当 Provider 是 GPS 时，它会给出相同的 NULL 值。我不明白为什么它现在不起作用。

我还了解到 Gps 提供程序在获取值方面很慢，所以我必须添加 LocationListener 来解决这个问题。所以，我将它添加到我的代码中

```
 LocationListener locationListener = new MyLocationListener();
            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 35000, 10, locationListener); 
```

完整代码在这里------------>

```
 public void getCurrentlocation()
    {
        String providers = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        Log.e("provider"," "+providers);
        if(!providers.contains("gps")){
          final Intent poke = new Intent();
          poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
          poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
          poke.setData(Uri.parse("3")); 
          sendBroadcast(poke);
          Log.e("your gps is","enabled");
        }
        LocationListener locationListener = new MyLocationListener();
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 35000, 10, locationListener);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 35000, 10, locationListener);
           // Define the criteria how to select the locatioin provider -> use
           // default
           Criteria criteria = new Criteria();
           String provider = locationManager.getBestProvider(criteria,true);
           Log.e("location provider",""+provider);
           Location location = locationManager.getLastKnownLocation(provider);

           // Initialize the location fields
           if (location != null) 
           {
            System.out.println("Provider " + provider + " has been selected.");
            strLatitude=String.valueOf(location.getLatitude());
                  strLongitude=String.valueOf(location.getLongitude());
                  Log.e("lattitude",strLatitude);
                  Log.e("logntitude",strLongitude);
                  latituteField.setText( strLatitude);
                  longitudeField.setText(strLongitude);
           }
           else 
           {

                  strLatitude=String.valueOf(0);
                  strLongitude=String.valueOf(0);
                  Log.e("lattitude",strLatitude);
                  Log.e("logntitude",strLongitude);
                  latituteField.setText( strLatitude);
                  longitudeField.setText(strLongitude);
           }

     } 

    private class MyLocationListener implements LocationListener
    {

        @Override
        public void onLocationChanged(Location location)
        {

//            mLattitude = location.getLatitude();
//            mLongitude = location.getLongitude();
//
//            Log.w("value : ",
//                    String.valueOf(location.getLatitude()) + String.valueOf(location.getLongitude())
//                            + 
//
//
//            context.sendBroadcast(new Intent(Constants.BRDCAST_LOCATION_UPDATED));

        }

        @Override
        public void onProviderDisabled(String provider)
        {
            // Log.w("provider", provider);

        }

        @Override
        public void onProviderEnabled(String provider)
        {
            // Log.w("provider", provider);

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {
            // Log.w("status", String.valueOf(status));

        }

} 
```

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:46:30.023

好吧，我尝试了以下代码，它获取了纬度和经度：

公共类 MainActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

/* Use the LocationManager class to obtain GPS locations */

  LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
  List<String> providers = lm.getProviders(true); 
```

/* 向后循环数组，如果你得到一个准确的位置，然后打破循环*/

```
 Location location = null;

      for (int i=providers.size()-1; i>=0; i--) {
              location = lm.getLastKnownLocation(providers.get(i));
              if (location != null) break;
      }

      String Text = "My current location is: " +
              "Latitud = " + location.getLatitude() +
              "Longitud = " + location.getLongitude();

              Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
   } 
```

AndroidManifest.xml：

看到设置了以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

# jboss - JBoss VPS 外部 ip 设置 - 在本地浏览器中工作正常，但在外部浏览器中无法正常工作

> ID：14437002
> 
> 赞同：0
> 
> 时间：2013-01-21T10:50:04.427
> 
> 标签：jboss, ip, external, vps, host

事先我不得不说我是一个新手。

我已经订阅了带有 Ubuntu 11.04 服务器的 VPS，我安装了 Jboss 并使用 -b 0.0.0.0 选项启动它。

现在，如果我在 VPS 本身的浏览器上查找地址 ip:8080，它工作正常，但如果我尝试在外部机器上的浏览器上查找它，则无法访问该页面。

我试图修改主机文件但没有成功。也许它的iptables？或者是其他东西？

我真的很感激任何帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T03:49:19.007

获取服务器的静态 IP，使用 ping 从命令行工具对其进行 ping。如果您成功 ping 服务器，则一切就绪。现在转到外部PC的浏览器并输入静态IP并将端口指定为8080。它肯定会工作。

我这边的一些好建议是，现在尝试 PaaS（平台即服务），因为它比 VPS 容易得多，您将在几分钟内启动并运行。试试[Jelastic](http://jelastic.com)。它有 JBoss 托管。在那里部署您的 WAR 文件，您可以立即访问它。让我知道你是否真的继续使用它。

苏里亚

# scala - 是否可以在初始定义后将字段添加到表单的映射中？

> ID：14437003
> 
> 赞同：2
> 
> 时间：2013-01-21T10:50:07.677
> 
> 标签：scala, playframework-2.0

假设我有一个小表格，例如：

```
val myForm = Form(
  mapping(
    "street" -> nonEmptyText,
    "streetNumber" -> nonEmptyText
  )(myApply)(myUnapply)
) 
```

以后有没有办法将字段添加到 myForm 的映射中？（即添加`"apartmentFloor" -> text`映射，或`"houseName" -> text`根据某些标准添加）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:07:38.263

如[本答案](https://stackoverflow.com/questions/13714673/how-can-i-apply-a-play-2-uniqueness-validation-only-when-an-object-is-being-crea/14306301#14306301)中所述，映射可以单独定义并以各种形式组合。

您还可以动态构建表单，如下所示：

```
def passwordResetRequest() = Action {
   Form("email" -> email).bindFromRequest(...,...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:17:44.250

这似乎是不可能的。

该框架定义了[`Mapping`-Trait](http://www.playframework.org/documentation/api/2.0/scala/play/api/data/Mapping.html)，它似乎不允许修改（即它是不可变的）。您可能可以实现自己的 Mapping 允许稍后进行修改，但我认为 Play 开发人员在设计这样的 trait 时会考虑一些事情。

# c# - 使用 XmlSerializer 反序列化

> ID：14437004
> 
> 赞同：0
> 
> 时间：2013-01-21T10:50:07.657
> 
> 标签：c#, .net, windows-8, xml-serialization, windows-store-apps

我正在编写一个 Windows 应用商店应用程序，我需要在漫游存储中存储一些数据；为此，我需要序列化/反序列化一些数据。我的序列化器/反序列化器功能如下：

```
public string Serialize()
    {
        try
        {
            StringWriter sw = new StringWriter();

            XmlSerializer xs = new XmlSerializer(typeof(RssData));
            xs.Serialize(sw, this);

            return sw.ToString();
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex);
            return String.Empty;
        }
    }

    public void Deserialize(string serialized)
    {
        try
        {
            XmlSerializer xs = new XmlSerializer(typeof(RssData));
            XmlReader xr = XmlReader.Create(new StringReader(serialized));
            RssData rd = xs.Deserialize(xr) as RssData;
            this.categoryList = rd.categoryList;
            this.defaultCategory = rd.defaultCategory;
        }
        catch(Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex);
        }
    } 
```

综上所述，RssData 有一个 RssCategory 列表，每个 RssCategory 都有一个 RssFeed。序列化没有问题，以下字符串是我使用上面的 Serialize 函数生成的示例：

```
<?xml version="1.0" encoding="utf-16"?>
<RssData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <CategoryList>
    <RssCategory>
      <Name>No Category</Name>
      <RssList>
        <RssFeed>
          <Title>HABERTURK.COM</Title>
          <Url>http://www.haberturk.com/rss</Url>
          <Image>http://www.haberturk.com/images/htklogo2.jpg</Image>
          <Subtitle>HABERTÜRK - Türkiye'nin En Büyük İnternet Gazetesi</Subtitle>
        </RssFeed>
      </RssList>
    </RssCategory>
  </CategoryList>
</RssData> 
```

但是，当我反序列化此 XML 时，生成的 RssData 有一个具有 2 个 RssCategories 的 CategoryList，一个是名为“No Category”的 RssCategory，带有一个空 RssList，另一个是 XML 中定义的正确一个；即带有一个 RssFeed 的“无类别”。

是我的代码有问题还是 XmlSerializer 有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:04:00.543

好的，似乎 XmlSerializer 首先使用其无参数构造函数构造对象，然后将 XML 中的每个项目添加到适当的列表中。因此，如果构造函数将一些项目添加到该列表中，反序列化将生成一个列表，其中包含构造函数中添加的任何项目。

编辑：因此，如果您对具有 Array/List/Container 等类型属性的类进行序列化/反序列化，则必须在无参数构造函数中对其进行初始化，但不要向其中添加任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:18:31.790

试试这个并告诉我：

`Class c = new Class(); //class name of data which was serialized
using (var sr = new StringReader(Serialized data, wherever you are fetching it from)
{
var xs = new XmlSerializer(typeof(Class));
c= (Class)xs.Deserialize(sr);
}`

# android - 如何在 Android 中实现基于语音命令的导航

> ID：14437005
> 
> 赞同：1
> 
> 时间：2013-01-21T10:50:07.447
> 
> 标签：android, voice, voice-recognition

我有一个带有几个屏幕的应用程序。在每个屏幕中，有几个链接。假设当用户说“设置”时，它应该打开设置屏幕，当用户在设置屏幕中说“选择某物”时，它应该选择相应的。

我看过一些使用教程，`RecognizerIntent`但问题是它会打开“Speak Now”弹出窗口来收听语音命令，并且只有在触发某些事件时才会触发。我想知道它是否可能，如果可能的话如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:02:57.487

[您可以通过使用SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)类来避免“现在说话”弹出窗口，但它需要比使用 Intent 更多的编码。因为您想在用户开始说话时开始识别，所以您应该使用一些[语音活动检测算法](https://stackoverflow.com/questions/12552091/how-to-catch-voice-input-when-user-speaks/12554418#12554418)，并在检测到语音活动后调用`startRecognition`方法。

# ruby-on-rails - 使用 will_paginate 对带有分页的结果集进行排序

> ID：14437009
> 
> 赞同：1
> 
> 时间：2013-01-21T10:50:22.547
> 
> 标签：ruby-on-rails, pagination, will-paginate

我在 Rails 3 站点中使用[will_paginate进行分页。](https://github.com/mislav/will_paginate)我希望能够单击每个输出字段的表头（例如“名称”、“创建于”）并在该字段上排序结果。能够再次单击以进行反向排序也很好。有什么东西可以很好地与 will_paginate 一起订购吗？我可以只使用 will_paginate 来做到这一点吗？

我使用的表格格式非常通用：

```
<%= will_paginate %>
<table>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Updated</th>
    </tr>   
    <% @shops.each do |shop| %>
    <tr>
        <td><%= shop.id %></td>
        <td><%= shop.name %></td>
        <td><%= shop.updated_at.strftime("%a %b %d %H:%M ") %></td>
    </tr>
    <% end %>
</table>
<%= will_paginate %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:03:20.763

您会在这里找到您所期望的所有内容：[http ://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:27:24.640

我在用

```
gem "meta_search" 
```

与 will_paginate

[Github 项目站点](https://github.com/ernie/meta_search)

[Railscasct #251 元位置和元搜索](http://railscasts.com/episodes/251-metawhere-metasearch)

索引控制器示例

```
@search =  Customer.search(params[:search])
@customer = @search.paginate(:page => params[:page], :per_page => 50) 
```

并查看示例

```
<th><%= sort_link @search, :name%></th>
<th><%= sort_link @search, :surname %></th>
<th><%= sort_link @search, :address %></th> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-21T11:02:01.547

**备择方案：**

**1）使用强大的jquery插件：**

使用 jquery 插件，排序和分页变得简单。

[这里](http://tablesorter.com/docs/)有一个强大的 jquery 插件。

[jQuery Tablesorter](http://www.novell.com/communities/node/8797/jquery-tablesorter-pagination-and-sorting-made-simple)的更多内容：分页和排序变得简单。

**2）可排序的表列：**

[如果你想在没有 jquery 插件的情况下进行排序，那么你会在这里](http://railscasts.com/episodes/228-sortable-table-columns)得到你想要的一切。上述方法添加了通过单击标题按升序或降序对表格列进行排序的功能。

# java - 使用 Java 内部类的最佳方式

> ID：14437010
> 
> 赞同：0
> 
> 时间：2013-01-21T10:50:32.240
> 
> 标签：java, inner-classes

考虑以下类结构：

```
public class OuterClass {

    public static class InnerClass {
    }

} 
```

调用 InnerClass（1 或 2）的最佳方式是什么，为什么？

1)

```
import OuterClass.InnerClass;

InnerClass innerClass = new InnerClass(); 
```

2)

```
import OuterClass;

OuterClass.InnerClass innerClass = new OuterClass.InnerClass(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:55:56.190

我个人更喜欢第二种方式。在这种情况下，很明显这是内部类，程序员总是可以看到它在哪个类中。在第一种方式中，它有点“隐藏”。当然，在这种情况下你会有更多的打字：）

# android - NullpointerException 从我在 Activity 中投入价值的服务中获取共享偏好的价值

> ID：14437012
> 
> 赞同：0
> 
> 时间：2013-01-21T10:50:45.593
> 
> 标签：android, service, android-activity, nullpointerexception

我正在尝试`sharepreference`从一项活动访问一项服务的价值，但它正在抛出`NullPointerException`，我尝试了很多但仍然遇到同样的问题，我搜索了许多与此相关的问题并尝试了他们的解决方法，但它没有奏效。如果你能在这方面指导我，你会很棒。提前致谢，

这是代码

我在我的服务类中将 SharePreferences 定义为

```
SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
Editor editor=preferences.edit(); 
```

而不是我试图在我的活动中将其价值作为

```
foregroundService.editor.putString(foregroundService.com, data.getComponent().toString());
foregroundService.editor.commit(); 
```

并再次返回服务类以访问该值

```
preferences.getString(com, "not available"); 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:55:02.043

您可以使用以下方法在活动中添加值：

```
SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
Editor editor=preferences.edit(); 
editor.putString(foregroundService.com, data.getComponent().toString());
editor.commit(); 
```

它始终是相同的首选项，因为您使用的是默认选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:07:08.930

查看您将名称命名为的行`foregroundService.com`

```
foregroundService.editor.putString(foregroundService.com, data.getComponent().toString()); 
```

你正试图成为

```
preferences.getString(com, "not available"); 
```

put 和 get 的名称必须相同。

改成`preferences.getString(foregroundService.com, "not available");`

试试看..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:59:39.213

假设 Activity 和 Service 都使用相同的包并因此共享相同的 Context，我认为这与 Service 内部的 Context = null 的事实有关，因为 getApplicationContext() 不可用。

解决方案是：

```
SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(context); 
```

如果上下文在您的服务中不可用，您需要在实例化服务时将其传递给您的服务的 onCreate 函数。

# java - 创建位图 NullPointerException

> ID：14437013
> 
> 赞同：3
> 
> 时间：2013-01-21T10:50:52.833
> 
> 标签：java, android, bitmap

我的应用程序崩溃了，我似乎无法解决。

我像这样从资源中获得位图。

```
Bitmap bmp1 = BitmapFactory.decodeResource(getResources(), R.drawable.map_distance_tag); 
```

现在，当从该位图创建位图时，这似乎在极少数设备上存在问题。例如...

```
Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig()); 
```

`NullPointerException`当它创建类的`Bitmap`第 468行时，我得到`Bitmap`了一个，我已经查看了它，当它从其源位图设置新位图的密度比例时。

```
// The new bitmap was created from a known bitmap source so assume that
467        // they use the same density scale
468        bitmap.setDensityScale(source.getDensityScale()); 
```

现在我似乎无法重新创建问题，但是当在原始位图上调用 getWidth() 时我没有得到异常的事实告诉我源不为空。

这是整个堆栈跟踪。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.app/com.my.app.recording.TrackingActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
at com.my.app.maps.MapFragment.createTabOverlay(MapFragment.java:663)
at com.my.app.maps.MapFragment.addMarkersForToolType(MapFragment.java:474)
at com.my.app.maps.MapFragment.onActivityCreated(MapFragment.java:405)
at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551)
at com.my.app.recording.TrackingActivity.onStart(TrackingActivity.java:272)
at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
at android.app.Activity.performStart(Activity.java:3781)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2636)
... 11 more 
```

**我的想法**

不包括针对不同屏幕密度的不同位图可能与我有关吗？提供的所有位图都用于 mdpi 屏幕。

我注意到还有一个 BackStackRecord。当用户按下时，这会崩溃吗？

**提前致谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:10:12.343

您指向的来源`Bitmap.java:468`来自 Android 1.5，可能不是您的问题。

[v1.5 位图.java:468](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/graphics/Bitmap.java/#468)

```
bitmap.setDensityScale(source.getDensityScale()); 
```

[v1.6-v2.2 Bitmap.java:468](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/graphics/Bitmap.java/#468)

```
Bitmap bm = nativeCreate(null, 0, width, width, height, config.nativeInt, true); 
```

任何比 2.2 更新的版本中的第 468 行要么是 javadoc 块的一部分，要么是不相关的函数，所以我猜你正在查看 1.6-2.2 版本，而不是你试图从中排除故障的那个。

我看到那条线上唯一可能真正以 null 结束的是`config`. 在您的代码中，您使用`getConfig()`从当前位图对象中获取它。它的[文档](http://developer.android.com/reference/android/graphics/Bitmap.html#getConfig%28%29)显示：

> public final Bitmap.Config getConfig()
> 
> 在 API 级别 1 中添加
> 
> 如果位图的内部配置是其中一种公共格式，则返回该配置，否则返回 null。

所以，它可能没有找到“公共”格式，并返回 null，它传递给`createBitmap()`，并炸毁你的代码。

您可以始终使用[静态配置](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)，例如`Bitmap.Config.ARGB_8888`，或者在`getConfig()`上一行执行并对其进行空检查。如果为 null，则转到刚才提到的后备配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:45:02.973

你可以这样做：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.icon);
Bitmap bmpCompressed = Bitmap.createScaledBitmap(bitmap, 600, 400, true);

ByteArrayOutputStream bos = new ByteArrayOutputStream();

// CompressFormat set up to JPG, you can change to PNG
bmpCompressed.compress(CompressFormat.JPEG, 90, bos);
imageByteArray = bos.toByteArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T10:57:53.117

yourSelectedImageBitmap = BitmapFactory.decodeFile(filePath, options);

```
 if (yourSelectedImageBitmap != null) {
        // ----------resize for set in imageView------------
        int width = yourSelectedImageBitmap.getWidth();
        int height = yourSelectedImageBitmap.getHeight();
        int newWidth = 140;
        int newHeight = 140;

        // calculate the scale - in this case = 0.4f
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;

        Matrix matrix = new Matrix();
        // resize the bit map
        matrix.postScale(scaleWidth, scaleHeight);
        if (exifOrientation.equals("6")) {
            matrix.postRotate(90);
        }

        Bitmap resizedBitmap = Bitmap.createBitmap(yourSelectedImageBitmap,
                0, 0, width, height, matrix, true);
        image.setImageBitmap(resizedBitmap);

        // Toast.makeText(getApplicationContext(),
        // "in the select image loop", 2000).show();

        // ----------resize for upload------------
        int width1 = yourSelectedImageBitmap.getWidth();
        int height1 = yourSelectedImageBitmap.getHeight(); 
```

您可以通过这种方式尝试一下。从文件源或相机获取图像后。

然后通过这样做。

```
Matrix matrix1 = new Matrix();
        // resize the bit map
        matrix.postScale(width1, height1);
        if (exifOrientation.equals("6")) {
            matrix1.postRotate(90);
        }
        Bitmap resizedBitmap1 = Bitmap.createBitmap(
                yourSelectedImageBitmap, 0, 0, width1, height1, matrix1,
                true);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        resizedBitmap1.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] image_bytes = baos.toByteArray();

        try {
            baos.flush();
            baos.close();

        } catch (IOException e) {
            e.printStackTrace();
            Log.e("~~~~~~~~IOException~~~~~~~~~eeeeee~~~~",
                    "~~~~~~IOException~~~~~~~~~eeeee~~~~" + e.getMessage());
        }
        image_string = Base64.encodeToString(image_bytes, 0); 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T15:56:54.327

我有同样的问题，这让我发疯。我最终通过改变解决了这个问题

```
Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig()); 
```

至

```
Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), Bitmap.Config.ARGB_8888); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T02:40:37.903

我认为这会奏效

```
 BitmapFactory.Options opt = new BitmapFactory.Options();
 opt.inMutable = true;  //you have to set bitmap to mutable
 bmp1 = BitmapFactory.decodeResource(getResources(), R.drawable.map_distance_tag,opt);
 Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), Bitmap.Config.ARGB_8888);

 //if you want to copy the bmp1 to bmOverlay
 bmOverlay=Bitmap.createScaledBitmap(bmp1, bmp1.getWidth, bmp1.getHeight, false);

         OR

//if did not work replace bmOverlay to this:
 bmOverlay = Bitmap.createBitmap(bmp1); 
```

# ajax - 加载文档时加载 Joomla 模块

> ID：14437017
> 
> 赞同：1
> 
> 时间：2013-01-21T10:51:08.687
> 
> 标签：ajax, joomla, module

我写了一个模块，但它减慢了页面的加载时间。我搜索了如何使用 ajax 加载模块，但没有找到任何有用的主题（或者只是不理解它们，英语不是我的母语）。我的问题是：如果我有一个模块，它列出了游戏服务器上的在线成员（但前提是它们存在于本地数据库中），那么在加载页面后加载该模块的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:19:39.337

尝试这个。

对您的任何自定义组件任务进行 ajax 调用。该任务中的代码应该是

```
 $document = &JFactory::getDocument();
 $renderer = $document->loadRenderer('module');

 $Module = &JModuleHelper::getModule('mod_fmDataGrid');

 $Params = "param1=bruno\n\rparam2=chris";
 $Module->params = $Params;
 echo $renderer->render($Module); 
```

您可以通过 ajax 返回的结果，并在您的 html 中使用。

其他选项是

[链接](http://gruz.org.ua/en/about-joomla/25-faq/50-joomla-15-ta-17-25-jak-zavantazhuvaty-moduli-za-dopomogoju-ajax.html)也描述了一个很好的细节，但它使用通过模块覆盖概念。您可以按照这些方法中的任何一种

希望这可以帮助你..

# php - CodeIgniter 内连接第三张表

> ID：14437019
> 
> 赞同：-1
> 
> 时间：2013-01-21T10:51:21.350
> 
> 标签：php, codeigniter

我在尝试添加第三张桌子时遇到了一些小麻烦。

这是表结构：

```
products = 
id  name    code
5   product1    002
522 product1    002

warehouses = 

id  code    name    address     city
1   store1  store1  store1    store1

warehouses_products = 

id  product_id  warehouse_id    quantity
2       5           1             -3
3       522         1             -2
4       446         1              0 
```

这是获取数据的函数：

```
 $this->load->library('tables');
           $this->tables
                ->select("products.id as productid, name, code (CASE WHEN sum(warehouses_products.quantity) Is Null THEN 0 ELSE sum(warehouses_products.quantity) END) as totalQuantity, warehouses.name");
                $this->tables->from('products');
                $this->tables->join('warehouses_products', 'products.id=warehouses_products.product_id', 'left');
                $this->tables->join('warehouses', 'warehouses_products.id=warehouses.warehouse_id', 'left');

$this->tables->group_by("products.id");
$this->tables->unset_column('productid');

echo $this->tables->generate(); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:07:27.240

您的联接查询看起来不错..只是我注意到（如果没有磨损）您 的选择查询中有一个`,`而不是..试试这个`.`

换这个。。

```
$this->tables->select("table1.id as table1id, column1, column2, table2.column1, table3,column2") 
```

和

```
$this->tables->select("table1.id as table1id, column1, column2, table2.column1, table3.column2") //notice the '.' here table3.column2 
```

并确保（检查）您正在运行的查询是否正确..您可以通过在 CI 中打印最后运行的查询来做到这一点..

```
 echo $this->db->last_query();exit; //after query is made .. 
```

以及您更新的问题..加入不正确..

**更新**

这个

```
$this->tables->join('table2', 'table3.product_id=table1.id', 'left');
$this->tables->join('table3', 'table2.id=table3.warehouse_id', 'left'); 
```

用。。。来代替

```
$this->tables->join('table3', 'table3.product_id=table1.id', 'left'); //join the thrid table first
$this->tables->join('table2', 'table2.id=table3.warehouse_id', 'left');//and thn the second table with third tables warehouse_id 
```

# ide - 在嵌入式 linux 设备上运行的 C++ ide

> ID：14437027
> 
> 赞同：0
> 
> 时间：2013-01-21T10:51:50.070
> 
> 标签：ide, embedded-linux

我正在组装一个非常简单的设备，用于在旅途中开发 C++ 应用程序。像aa psp，大小明智，用小键盘编写代码和用于输出的LCD屏幕。这个设备还有一个 DVI 输出，所以我也可以输出到屏幕上。

现在，我正在为 X11 寻找一个非常轻量级的 C++ IDE（该设备在 OpenEmbedded 的 Linux 变体上运行）；能够在 DVI 显示器上正常工作的东西，但主要是在小液晶屏幕上（它是一个 4.3 英寸的屏幕，分辨率为 480x272）。

我知道 1024x768 以下的任何东西对于疼痛爱好者来说都是纯粹的快乐，但该设备仅在特定情况下使用；当笔记本电脑/上网本不可行时。

在使用 DVI 输出时，我运行 Gnome 没有任何问题，屏幕足够大，可以让我舒适地工作。问题是它在 480x272 屏幕上不能很好地缩放。

第一个想法是使用 nano 和 g++，甚至不加载 X11，但如果可能的话，我需要有代码完成和最小 UI 来执行标准操作（构建、运行、逐步调试、断点）。内存不是很大（256 Mb），所以IDE越小越好。

除了通过文本编辑器和 g++ 的方法之外，您还有什么建议？我是嵌入式 linux 世界的新手，我在 Ubuntu 上使用 Eclipse，但它非常庞大，在这么小的设备上只会杀死它。在 Windows 上我会使用 Dev-C++，而在 Mac 上我使用 code:blocks 或 Xcode，但我并不真的需要设备的所有这些功能。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T12:06:46.410

我遇到了同样的问题，在 ARM 处理器上运行 Linux的 ODroid ( [http://hardkernel.com ) 上进行开发。](http://hardkernel.com)有段时间用过Netbeans，但是太重了，最后还是放弃了，为此写了自己的开源IDE。

[https://github.com/amirgeva/coide](https://github.com/amirgeva/coide)

# php - 如何将旧的mysql转换为pdo

> ID：14437030
> 
> 赞同：-1
> 
> 时间：2013-01-21T10:51:57.230
> 
> 标签：php, mysql

我正在尝试将我的 mysql 代码转换为新的 pdo 代码我真的需要一些帮助，因为 mysql 已贬值。我是 php 和 mysql 的新手，需要一个很好的例子来学习。感谢我得到的任何帮助。

旧的 MSYQL

```
<?php
include_once("Connections/database.php");
$login = $_SESSION['login'];

$query = mysql_query("SELECT * FROM proryniti_members WHERE email='".$login."'");
if (mysql_num_rows($query)==0)
    die("member not found!");
else
{
    $row = mysql_fetch_assoc($query);
    $firstName = $row['firstName'];
    $lastName = $row['lastName'];
}

?> 
```

PDO 代码

```
<?php
include_once("Connections/database.php");
$login = $_SESSION['login'];

$qry = $dbh->prepare(
  'SELECT * FROM proryniti_members WHERE email = :'.$login.'');
$qry->execute(array($login));
$row = $qry->fetch();
if (!is_null($row)) {
    $firstName = $row['firstName'];
    $lastName = $row['lastName'];
} 
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:54:25.510

您不了解 PDO 中准备好的查询是如何工作的。我建议您回去阅读文档或网络上的示例。我在上面修改了你的代码，看看第 6-5 行：

```
 <?php
   include_once("Connections/database.php");
  $login = $_SESSION['login'];

  $qry = $dbh->prepare('SELECT * FROM proryniti_members WHERE email=:login');
  $qry->execute(array(':login'=>$login));
  $row = $qry->fetch();
  if (!is_null($row)) {
  $firstName = $row['firstName'];
  $lastName = $row['lastName'];
  } 
  ?> 
```

# symfony - 学说查询的语法错误 (Symfony2)

> ID：14437031
> 
> 赞同：4
> 
> 时间：2013-01-21T10:52:03.660
> 
> 标签：symfony, doctrine

我在此查询中遇到语法错误：

```
protected function _getimsg($id)
{
    $imsgRepository = $this->getDoctrine( )->getRepository( 'DonePunctisBundle:Imsg' );
    $imsg = $imsgRepository->findOneBy(array('to' => $id, 'read' => 0 ));
    if($imsg) {
        $em = $this->getDoctrine()->getEntityManager();
        $imsg->setRead('1');

        $em->persist( $imsg );
        $em->flush( );

        return $imsg->getContent();
    } else {
        return '';
    }

} 
```

## imsg 实体

```
<?php

namespace Done\PunctisBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Imsg
 *
 * @ORM\Table(name="imsg")
 * @ORM\Entity
 */
class Imsg
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="to", type="string", length=25)
 */
private $to;

/**
 * @var string
 *
 * @ORM\Column(name="content", type="string", length=255)
 */
private $content;

/**
 * @var integer
 *
 * @ORM\Column(name="read", type="integer", length=1)
 */
private $read;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set To
 *
 * @param string $to
 * @return Page
 */
public function setTo($to)
{
    $this->to = $to;

    return $this;
}

/**
 * Get to
 *
 * @return string 
 */
public function getTo()
{
    return $this->to;
}

/**
 * Set content
 *
 * @param string $content
 * @return Page
 */
public function setContent($content)
{
    $this->content = $content;

    return $this;
}

/**
 * Get content
 *
 * @return string 
 */
public function getContent()
{
    return $this->content;
}

/**
 * Set read
 *
 * @param integer $read
 * @return Imsg
 */
public function setRead($read)
{
    $this->read = $read;

    return $this;
}

/**
 * Get read
 *
 * @return integer 
 */
public function getRead()
{
    return $this->read;
}

} 
```

## 错误输出

> 执行 'UPDATE imsg SET read = 时发生异常？哪里 id = ？带参数 {"1":"1","2":1}：
> 
> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'read = '1' WHERE id = 1' 附近使用正确的语法

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-21T10:58:43.363

来自 MySQL 手册：[http](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html -`READ`是保留字。我猜这就是您收到语法错误的原因。

Doctrine 可以自动为您引用列名：

```
<?php
/** @Column(name="`number`", type="integer") */
private $number; 
```

为列名添加反引号 - 取自[http://docs.doctrine-project.org/en/latest/reference/basic-mapping.html#quoting-reserved-words](http://docs.doctrine-project.org/en/latest/reference/basic-mapping.html#quoting-reserved-words)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T09:29:20.367

如果你使用 yaml，你可以这样做

```
Number:
type: entity
table: `number ` 
```

# magento - 允许用户在 Magento CE 1.7.0.2 中选择默认存储/语言

> ID：14437032
> 
> 赞同：1
> 
> 时间：2013-01-21T10:52:10.790
> 
> 标签：magento, localization

我们希望允许用户选择“默认”或“首选”商店（或语言）并在他们的帐户中进行设置。

因此，例如，当法国用户登录该站点时，法国商店将作为他们的默认商店。

我已经寻找这个功能很久了，它是内置的吗？如果是这样，我该如何使用/激活它？任何有用的意见表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:19:13.757

开箱即用的 Magento 包中没有这样的东西。

现在，cookie 保存在客户浏览器上，以记住他选择的语言（商店视图）选择​​。如果这对您来说还不够，您可以创建一个额外的客户属性来存储该选择，然后在客户登录时读取该值。

# java - 为什么每次都自动重新创建模拟器

> ID：14437037
> 
> 赞同：0
> 
> 时间：2013-01-21T10:52:19.353
> 
> 标签：java, android

当我第一次运行我的应用程序时，它运行良好，但是第二次运行时，我认为会自动创建一个新的模拟器，这会导致错误。

我使用的是 Windows7 64 位，Eclipse Juno

我的错误是：

```
WARNING: Data partition already in use. Changes will not persist!
WARNING: SD Card image already in use: C:\Users\STS-040\.android\avd\android.avd/sdcard.img
WARNING: Cache partition already in use.Changes will not persist!
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
Failed to create Context 0x3005
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer. emulator: warning: opening audio input failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:00:15.233

关闭模拟器

在 ecpilse 窗口中单击

**在顶部栏中**导航，然后****运行配置****

 **将弹出一个新窗口

单击此处的**目标**选项卡并选择（**检查**）您的 AVD 管理器

点击运行按钮！！

它会像一个魅力;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:11:20.680

即使我面临同样的问题。需要重启eclipse或者有时重启电脑本身才能解决。

我建议您通过选择 DDMS 透视图并检查设备来检查模拟器是否在 eclipse 中被检测到。如果未检测到设备，您无需等待模拟器启动并浪费您的时间，因为 eclipse 中的程序不会在其中运行。**

# java - 在 EclipseLink 中的正常查找操作中批量获取

> ID：14437040
> 
> 赞同：0
> 
> 时间：2013-01-21T10:52:30.650
> 
> 标签：java, jpa, eclipselink, glassfish-3

我想将 @QueryHint(name=QueryHints.BATCH, value="pi.jrnls") 注释与主键 @Id 查找一起使用。我在哪里放置注释？看起来我只能将它放在@NamedQuery 中。但是默认的 pk 查找当然没有 @NamedQuery。

```
@Entity
@Table(schema="prd", name="PRDITEM", uniqueConstraints= {@UniqueConstraint(columnNames= {"prditmNO"})})
@Cache(expiry=com.quoka.qis.lib.persistence.Constants.SHORT_CACHE_PERIODE_MS)
@NamedQuery(name = "PrdItem.findByNo", query = "select pi from PrdItem pi where pi.no = ?1",
    hints={
        @QueryHint(name=QueryHints.BATCH, value="pi.jrnls"),
        @QueryHint(name=QueryHints.BATCH, value="pi.bookings")//,
    }
)
public class PrdItem {....

@Id 
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="prditmID", insertable = false, nullable=false, unique=true) 
private Long id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:14:01.730

EclipseLink 有一个 BatchFetch 注释，您可以添加到映射中： [http ://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_batchfetch.htm](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_batchfetch.htm)

JPA 2.0 还有一个查找签名，它接受类、键和属性映射。

# nhibernate - 如何停止 Fluently。配置自动连接

> ID：14437043
> 
> 赞同：3
> 
> 时间：2013-01-21T10:52:59.200
> 
> 标签：nhibernate, fluent-nhibernate, inversion-of-control, unity-container, informix

如何防止 Fluently.Configure 自动连接到数据库？

我们的设置详述如下。

我们有以下静态方法来创建会话工厂：

```
public static ISessionFactory CreateSessionFactory()
        {
          return Fluently.Configure()
              .Database(
                 IfxOdbcConfiguration
                .Informix
                .ConnectionString("DSN=ODBCCONNECTION")
                .Driver<CompanyCore.Nhibernate.Core.ProfiledODBCClientDriver>()
                .Dialect<InformixDialect1000>()
                .ShowSql() 
              )
              .Mappings(
              m => m.FluentMappings.AddFromAssemblyOf<Task>()
              )
              .BuildSessionFactory();
        } 
```

它与我们的 IOC 设置一起用于创建 SessionFactory，但是，由于我们的数据库团队的要求，每个用户都必须以他们的用户身份打开他/她自己的连接（使用非个人化） - 以允许进程识别，查看谁在 Informix 服务器上运行什么。

要创建我们使用的各个连接：

```
public static ISession GetMySession(ISessionFactory factory, string user)
{
    CompanyCore.Nhibernate.Core.ProfiledODBCClientDriver drv = new Enact.Nhibernate.Core.ProfiledODBCClientDriver();

    drv.Configure(new Dictionary<string, string>());

    string conn = "DSN=ODBCCONNECTION";

    IDbConnection db = drv.CreateConnection();

    db.ConnectionString = conn;
    db.Open();

    return factory.OpenSession(db);
} 
```

这些连接在我们的 UOW 调用 dispose 时关闭。

我们调用`CreateSessionFactory()`APP Start，然后通过 IOC 传递这个工厂，但是此时没有非个性化用户，因此在第一次加载时会导致应用程序错误。

我们考虑过使用标准用户来访问诸如首次加载之类的内容，但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:15:21.503

您需要禁用自动关键字引用： configuration.SetProperty(Environment.Hbm2ddlKeyWords, "none")

有关更多详细信息，请参阅有关“防止 NHibernate 在 configuration.BuildSessionFactory() 上连接到数据库”的帖子： [https ://groups.google.com/forum/?fromgroups=#!topic/nhusers/F8IxCgYN038](https://groups.google.com/forum/?fromgroups=#!topic/nhusers/F8IxCgYN038)

# sql - 将用户更改为 oracle 并在 shell 脚本中运行 sql

> ID：14437047
> 
> 赞同：0
> 
> 时间：2013-01-21T10:53:13.810
> 
> 标签：sql, bash, shell, unix

我是 root 用户，在 shell 脚本中我想将用户更改为 oracle 而不是运行 sql 脚本，我尝试了以下操作；

```
#!/bin/sh

portStatus=`lsof -ni:5060`
if [ ${#portStatus} -ne 0 ]
  then
    sudo -u oracle << EOF
    /oracle/product/102/db/bin/sqlplus -s a513s6p4/a513s6p4 @/oracle/product/102/db/GW_EP_List.sql;
    EOF
  else
    exit
fi 
```

它给了我以下错误；

```
./deneme2.sh: syntax error at line 12: `end of file' unexpected 
```

你能告诉我可能是什么问题吗？

谢谢，哈利特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:51:43.340

使用此处文档时，结束字符串必须位于行首！

尝试

```
#!/bin/sh

portStatus=`lsof -ni:5060`
if [ ${#portStatus} -ne 0 ]
  then
    sudo -u oracle << EOF
    /oracle/product/102/db/bin/sqlplus -s a513s6p4/a513s6p4 @/oracle/product/102/db/GW_EP_List.sql;
EOF
  else
    exit
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:58:52.963

```
sudo -u oracle /oracle/product/102/db/bin/sqlplus -s a513s.......... 
```

你在这里不需要EOF。像上面一样执行你的`sqlplus`命令。在这种情况下，您的`oracle`用户必须是`sudo`用户。

如果`oracle`是普通用户

```
su - oracle -c "/oracle/product/102/db/bin/sqlplus -s a513s.........." 
```

关于`su`命令的更多信息（来自手册页）：

> su 命令用于在登录会话期间成为另一个用户。在没有用户名的情况下调用，su 默认成为超级用户。可选参数 - 可用于提供与用户直接登录时所期望的环境相似的环境。额外的参数可以在用户名之后提供，在这种情况下，它们被提供给用户的登录 shell。特别是， -c 的参数将导致下一个参数被大多数命令解释器视为命令。该命令将由 /etc/passwd 中为目标用户指定的 shell 执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T10:59:58.903

您可以使用`su`. 记住获取环境`su -`：

```
COMMAND="/oracle/product/102/db/bin/sqlplus -s a51... "
su - oracle -c $COMMAND 
```

一个不错 [的基于 oracle 的示例站点，Automating Database Startup and Shutdown on Linux Post](http://www.oracle-base.com/articles/linux/automating-database-startup-and-shutdown-on-linux.php)：

```
case "$1" in
    'start')
        # Start the Oracle databases:
        # The following command assumes that the oracle login 
        # will not prompt the user for any values
        su - $ORA_OWNER -c "$ORA_HOME/bin/lsnrctl start"
        su - $ORA_OWNER -c $ORA_HOME/bin/dbstart
        touch /var/lock/subsys/dbora
        ;; 
```

# c++ - 如何使用 Qt SDK 为 Gentoo 64 位（Linux 内核 2.6）构建本机应用程序？

> ID：14437049
> 
> 赞同：0
> 
> 时间：2013-01-21T10:53:18.577
> 
> 标签：c++, qt, cross-compiling, fastcgi, gentoo

不幸的是，我是 Linux 新手。我用 Linux Mint 13（32 位）制作了一个虚拟机，用 Qt Creator 安装了 Qt 5.0。我的任务是为运行 Gentoo 64 位的服务器创建一个简单的 FastCGI 应用程序。这个应用程序必须使用 Qt 的东西。由于 libSM.so.6（共享对象）缺失，通过 SSH 安装 64 位 Qt 5.0 失败。我怎样才能使这些东西起作用？我是否应该使用 Gentoo 64 位创建另一个 VM，以便使用 Qt 安装进行训练，而不是混合 32 位和 64 位？我的简单 FastCGI 应用程序将用作网站的后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:59:35.020

您可以随心所欲地开发。当您想要部署时，只需在 Gentoo 机器上构建项目即可。

请注意，您不需要在 Gentoo 上手动安装 Qt 5。它在“qt”叠加层中提供。你用外行添加它：

```
外行 -a qt
```

然后，您可以使用插槽 5 出现您需要的 Qt 组件。例如，要获取 Qt Core：

```
出现 -a qt-core:5
```

如果您以前从未使用过 Layman，它位于“app-portage/layman”包中，您可以在此处找到文档：

[http://layman.sourceforge.net](http://layman.sourceforge.net)

# php - Facebook php sdk 发布到用户墙向用户显示用户

> ID：14437051
> 
> 赞同：0
> 
> 时间：2013-01-21T10:53:37.303
> 
> 标签：php, facebook-graph-api

我使用 Facebook php sdk 发布到用户墙

```
$userId = $_POST["chckuser"][$i];
$facebook->api('/'.$userId.'/feed', 'post', array('message' => 'Hi')); 
```

我使用这个权限：

```
$loginUrl =$facebook>getLoginUrl(array('redirect_uri'=>$homeurl,'scope'=>'publish_stream,user_groups,manage_pages')); 
```

但出现在用户墙“用户对用户”

问题出现在这张图片中

[http://i.imm.io/TA9F.jpeg](http://i.imm.io/TA9F.jpeg)

请问有什么问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:58:09.940

从图像中我可以看到当前用户和具有 id 的用户`$userId`是不同的用户。如果你想发布到当前用户的墙上（你听起来像你想那样做）你不必检查你可以简单地使用`me/feed`：

```
$facebook->api('/me/feed', 'post', array('message' => 'Hi')); 
```

这将发布到经过身份验证且当前正在使用您的应用的用户的墙上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:49:27.310

```
$userId = $_POST["chckuser"][$i]; 
```

这是你的问题。你在别人的墙上发帖。如果你在别人的墙上发帖，你会得到用户到用户的消息。这不是一个错误，它是一个非常明智的功能。

正如 Konrad 上面所说，只需发布​​到 /me/feed 即可。

# ios - 获取 Facebook 等周边地区名称的简单方法？

> ID：14437052
> 
> 赞同：1
> 
> 时间：2013-01-21T10:53:55.000
> 
> 标签：ios, facebook, location, geonames

![Facebook 应用程序 - 发布新消息](../Images/e048aa01ce661e2405e8560480065aac.png)

大家好，

在 Facebook 应用程序中，当添加新帖子时，应用程序会显示**周围区域名称**。

这种分享地点的方式很酷，因为它是自动的，用户不需要像 Instagram 应用程序那样从场地名称列表中进行选择。

什么是获得与 Facebook 应用程序相同结果的快速方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:48:02.810

我发现 iOS 有一个内置的 api `CLGeocoder`，这比 Web API 使用起来更方便：

```
- (void)reverseGeocodeLocation:(CLLocation *)location completionHandler:(CLGeocodeCompletionHandler)completionHandler; 
```

这会为您返回`CLPlacemark`地点和区域。

[http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLPlacemark_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:11:07.447

这是所有地理定位解决方案的详细比较 - Foursquare、Facebook、Google 等 - [http://crschmidt.net/blog/archives/463/working-with-place-apis-aka-how-i-spent-my-春假/](http://crschmidt.net/blog/archives/463/working-with-place-apis-aka-how-i-spent-my-spring-vacation/)

但是，如果您打算将 Facebook Graph API 用于“地点”，这实际上就是您正在寻找的东西 - [https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-nearby-places/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-nearby-places/)

具体步骤 3 (https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-nearby-places/#step3)

> 现在您有了当前位置，将它与 FBPlacePickerViewController 对象一起使用，以在用户点击“你在哪里？”菜单选项时显示位置选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:04:30.237

我之前通过 google maps api 等服务使用过类似的东西。

[https://developers.google.com/maps/](https://developers.google.com/maps/)

您可以将它们传递给经纬度并获取各种信息。

不过，我不确定这是否是一项付费服务​​。这不是我上次使用它的时候，但我认为它改变了。

可能还有其他类似的服务可用。

来自 Google maps api 的更具体的页面...

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# php - 没有 Zend 表单的 Zend 表单验证和过滤

> ID：14437053
> 
> 赞同：4
> 
> 时间：2013-01-21T10:54:01.930
> 
> 标签：php, zend-framework, zend-validate, zend-filter

有没有办法使用 Zend Validation 和 Zend Filter 类来验证和过滤纯 HTML 表单？如果你有，请举个例子，我找不到任何例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T10:58:24.817

```
$email           = $this->_getParam('email');// form's $_POST or $_GET
$email_validator = new Zend_Validate_EmailAddress();

if(!$email_validator->isValid($email)){
    // Error, throw(Exception)
} 
```

要查看您可以使用哪些验证，请打开您的库文件夹并转到 library/Zend/Validate/ 路径，您将看到许多文件/类。这些是可用于验证的类，如 Alnum.php、Alpha.php、Barcode.php、CreditCard.php 等。只需创建实例并调用方法 isValid();

```
new Zend_Validate_FileName(); 
```

过滤器也是如此，在路径 library/Zend/Filter/ 上你可以看到很多类。几乎它们都实现了 Zend_Filter_Interface(Interface.php) 接口，您可以在其中找到一种方法：

```
public function filter($value); 
```

# python-3.x - 为什么我应该给 `savetxt` 一个以二进制而不是文本模式打开的文件？

> ID：14437054
> 
> 赞同：4
> 
> 时间：2013-01-21T10:54:04.497
> 
> 标签：python-3.x, numpy

我被以下`numpy`行为咬伤：

```
In [234]: savetxt(open('/tmp/a.dat', 'wt'), array([1, 2, 3]))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-234-2adef92da877> in <module>()
----> 1 savetxt(open('/tmp/a.dat', 'wt'), array([1, 2, 3]))

/local/gerrit/python3.2/lib/python3.2/site-packages/numpy/lib/npyio.py in savetxt(fname, X, fmt, delimiter, newline)
   1007         else:
   1008             for row in X:
-> 1009                 fh.write(asbytes(format % tuple(row) + newline))
   1010     finally:
   1011         if own_fh:

TypeError: must be str, not bytes

In [235]: savetxt(open('/tmp/a.dat', 'wb'), array([1, 2, 3]))
# success 
```

我觉得这很奇怪。我正在尝试将我的数组保存到*文本*文件中。那我为什么要以*二进制*模式打开文件呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T10:57:37.670

因为您的数据是字节（即二进制）数据。

出来的仍然是一个文本文件。不用担心。:-) “文本”文件被定义为仅包含人类可读文本的内容，而不是您打开它的模式。该模式只是在处理给定数据的方式上有所不同。

文本模式意味着它需要 Unicode 数据，它会为您将其编码为字节格式。二进制模式意味着它需要以字节为单位的数据，并且不会对其进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-15T04:28:22.833

很可能是因为 numpy 维护者尚未更新此函数以与 python 3 完全兼容。名称“savetxt”当然意味着纯文本文件就足够了，并且没有什么可以阻止他们调用 fh.write((format % tuple(行）+换行）。编码（））。

使用二进制模式也没有什么问题，只是它在某些情况下会导致意外，正如您所发现的那样。如果没有别的，我认为这是 api 设计中的错误。

# cakephp - 如何在 CakePHP 的插件中覆盖模型和控制器？

> ID：14437055
> 
> 赞同：3
> 
> 时间：2013-01-21T10:54:08.840
> 
> 标签：cakephp

如何从应用程序中覆盖 CakePHP 插件？我看到覆盖视图非常简单（[http://book.cakephp.org/2.0/en/plugins.html#overriding-plugin-views-from-inside-your-application](http://book.cakephp.org/2.0/en/plugins.html#overriding-plugin-views-from-inside-your-application)），但我怎样才能覆盖控制器还是模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T17:56:50.067

您可以覆盖和扩展插件视图建模和控制器。下面的链接中有一个很好的例子。

[https://github.com/CakeDC/users#how-to-extend-the-plugin](https://github.com/CakeDC/users#how-to-extend-the-plugin)

基本上这是摘要......在您的模型中，您需要像这样声明它。

`App::uses('UsersController', 'Users.Controller');`

`class AppUsersController extends UsersController {`

`}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:38:43.117

不，您不能像对视图文件那样覆盖应用程序中的任何插件类文件。只需复制插件并修改所需的类文件。

# javascript - iOS 版 PhoneGap 中的通知

> ID：14437061
> 
> 赞同：1
> 
> 时间：2013-01-21T10:54:25.593
> 
> 标签：javascript, iphone, ios, html, cordova

 我需要在iOS的**PhoneGap 2.2.0 中使用通知。**

我添加到 PhoneGap.plist -> plugin ->com.phonegap.notification （也尝试通知）但它不起作用。

这里是PhoneGap文档： **[PhoneGap Notification](http://docs.phonegap.com/en/2.2.0/cordova_notification_notification.md.html#Notification)**

iOS 无法识别通知

这是我在通知中的用途：

```
 navigator.notification.confirm(
        'EXIT?',  // message
        onConfirm,              // callback to invoke with index of button pressed
        'Good-Bay',            // title
        'Cancle,OK'          // buttonLabels
    ); 
```

我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:36:19.143

Apache Cordova 文档说，您需要在***App/Supporting Files/Cordova.plist中添加以下行***

```
<key>Plugins</key>
<dict>
    <key>Notification</key>
    <string>CDVNotification</string>
</dict> 
```

并在此处找到示例代码

```
<!DOCTYPE html>
<html>
  <head>
    <title>Notification Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    function onConfirm(buttonIndex) {
        alert('You selected button ' + buttonIndex);
    }

    function showConfirm() {
        navigator.notification.confirm(
             'EXIT?',  
              onConfirm,          
             'Good-Bay',          
             'Cancle,OK'          
        );
    }

    </script>
  </head>
  <body>
    <p><a href="#" onclick="showConfirm(); return false;">Show Confirm</a></p>
  </body>
</html> 
```

我认为这对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:32:17.423

试试这个，

```
 function onConfirm()
 {}
  navigator.notification.alert(
    'EXIT?',                 // message
    onConfirm,              // callback to invoke with index of button pressed
    'Good-Bay',            // title
    'OK'                  // button
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:49:17.790

我不知道 2.2 版有什么问题，

我下载了最新版本的 PhoneGap (2.3.0) 并且它工作..

# python - Python将字符串转换为数组赋值

> ID：14437064
> 
> 赞同：0
> 
> 时间：2013-01-21T10:54:35.747
> 
> 标签：python, string, list

在我的应用程序中，我收到一个字符串`'abc[0]=123'`

我想将此字符串转换为项目数组。我试过`eval()`它对我不起作用。我知道数组名称`abc`，但每次的项目数都会不同。

我可以拆分字符串，获取数组索引并执行。但我想知道是否有任何直接的方法可以将此字符串转换为数组插入。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:30:37.317

这是一个根据php规则解析url的函数（即使用方括号创建数组或嵌套结构）：

```
import urlparse, re

def parse_qs_as_php(qs):

    def sint(x):
        try:
            return int(x)
        except ValueError:
            return x

    def nested(rest, base, val):
        curr, rest = base, re.findall(r'\[(.*?)\]', rest)
        while rest:
            curr = curr.setdefault(
                sint(rest.pop(0) or len(curr)), 
                {} if rest else val)
        return base

    def dtol(d):
        if not hasattr(d, 'items'):
            return d
        if sorted(d) == range(len(d)):
            return [d[x] for x in range(len(d))]
        return {k:dtol(v) for k, v in d.items()}

    r = {}
    for key, val in urlparse.parse_qsl(qs):
        id, rest = re.match(r'^(\w+)(.*)$', key).groups()
        r[id] = nested(rest, r.get(id, {}), val) if rest else val
    return dtol(r) 
```

例子：

```
qs = 'one=1&abc[0]=123&abc[1]=345&foo[bar][baz]=555'
print parse_qs_as_php(qs)
# {'abc': ['123', '345'], 'foo': {'bar': {'baz': '555'}}, 'one': '1'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:00:13.777

你在找类似的东西吗

```
In [36]: s = "abc[0]=123"

In [37]: vars()[s[:3]] = []

In [38]: vars()[s[:3]].append(eval(s[s.find('=') + 1:]))

In [39]: abc
Out[39]: [123] 
```

但这不是创建变量的好方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:14:00.027

您的其他应用程序做错了。它不应该在参数键中指定索引值。在 GET 中为单个键指定多个值的正确方法是简单地重复该键：

```
http://my_url?abc=123&abc=456 
```

Python 服务器端应该正确地将它解析为一个类似字典的对象：你没有说你正在运行什么框架，但是例如 Django 使用一个[QueryDict](https://docs.djangoproject.com/en/1.4/ref/request-response/#querydict-objects)，然后你可以使用`request.GET.getlist('abc')`它来访问它，它将返回`['123', '456']`。其他框架将类似。

# excel - VBA：如何检查单元格范围？

> ID：14437065
> 
> 赞同：0
> 
> 时间：2013-01-21T10:54:35.780
> 
> 标签：excel, vba

我有一个名为的单元格名称，如果单元格在范围内（ ） `Book.a`，我必须检查条件。如何做到这一点？我为此尝试了“相交”方法，但对我不起作用。请提出一些答案。`if``B1:I10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:43:57.373

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim rng As Range

    With Sheets("Sheet1")
        On Error Resume Next
        Set rng = Application.Intersect(.Range("Book.a"), .Range("B1:I10"))
        On Error GoTo 0

        If Not rng Is Nothing Then
            MsgBox "Range `Book.a` is a part of `B1:I10`"
        Else
            MsgBox "Range `Book.a` not found or is not a part of `B1:I10`"
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:36:01.467

在一个范围内搜索命名范围似乎是不可能的。所以我收回我的评论。您可以尝试的是：对于每个类似的命名范围`book.a`，**您可以检查其地址是否[`intersect`](http://www.ozgrid.com/VBA/vba-intersect.htm)为给定的主范围**..

```
Dim objName As Name
Dim mainRange as Range

Sheet1.Unprotect
Set mainRange = ActiveWorkbook.Sheets(1).Range("B1:I10")
For Each objName In ActiveWorkbook.Names
    strName = objName.Name
    If InStr(1, strName, "book.a", vbTextCompare) > 0 Then
      If Intersect(objName.Address, mainRange) Is Nothing then
        '-- not within
      Else
        '-- within
      End If
    End If
Next
Sheet1.Protect 
```

# ios - 如何为 iOs 导出交互式 PDF？

> ID：14437066
> 
> 赞同：1
> 
> 时间：2013-01-21T10:54:53.573
> 
> 标签：ios, pdf, interactive

我有一个交互式 PDF，一个目录，您必须在其中单击图像才能转到特定页面。所有图像都转换为带有“转到目的地”选项的按钮。在 Windows 和 Mac 上它可以完美运行。但在 iPad 上，所有链接、所有图像都没有显示。

我已经在许多论坛上阅读过有关 iO 和交互式 PDF 之间的常见问题的信息。但我有一些旧的 PDF，原理相同，在 iPad 上运行良好。显示图像，链接有效......

这就是为什么我想知道这是否不是我的错，或者我以错误的方式导出 PDF。

PDF的链接。

[m.hconline.eu/Baby%20Catalogue.pdf](http://m.hconline.eu/Baby%20Catalogue.pdf)

[m.hconline.eu/LA 目录 2013.pdf](http://m.hconline.eu/LA%20Catalog%202013.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:59:22.970

“按钮”与大多数 pdf 阅读器不兼容（Acrobat 阅读器和其他一些阅读器除外）。iPad 上的标准 pdf 阅读器无法识别此类按钮。我检查了 iPad 上的旧文件，它也不能正常工作。

您需要做的是使用常规的 pdf 链接而不是按钮。为此，您可以使用 Acrobat Pro、删除按钮并使用链图标创建新链接。您可以指定链接的区域，因此用户体验将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T13:56:11.937

这是一个老问题，但我确实找到了有关此的更多信息。（我会在已接受的答案中添加评论，但唉，我没有 50 分。）

根据 George Johnson 的说法，“InDesign 的问题在于使用 InDesign [按钮] 中的转到下一页/上一页选项，它在导出为 PDF 时会创建一个执行菜单项操作，并且由于 iOS 阅读器没有菜单项目或解释此类行为，否则它们将被忽略。” - [https://forums.adobe.com/thread/1142056?tstart=0](https://forums.adobe.com/thread/1142056?tstart=0)

至于变通方法，我找到了 Steve Werner 的教程，概述了更改工作流程的方法，并在 Adob​​e Acrobat 中添加按钮，作为一种后期制作链接过程。- [http://indesignsecrets.com/navigation-button-tricks-for-interactive-pdf-on-an-ipad.php](http://indesignsecrets.com/navigation-button-tricks-for-interactive-pdf-on-an-ipad.php)

# php - 从 Zend 框架 2 开始，类未找到错误

> ID：14437069
> 
> 赞同：5
> 
> 时间：2013-01-21T10:55:11.093
> 
> 标签：php, apache, zend-framework2

我正在尝试从一个简单的 LAMP 站点开始，但似乎无法让 Zend 框架被我的本地 Apache 实例拾取。我从 Windows 上的 XAMPP 开始，然后尝试了一个带有手动 Apache/PHP 安装的 Centos 6 VM，但仍然在下面两个上得到相同的错误。phpinfo() 工作正常，站点的其余部分也是如此。

```
Fatal error: Class 'Zend\Log\Logger' not found in /var/www/html/site/public/test.php on line 20 
```

我的网站代码是调用 Zend 框架记录器的一个相当简单的测试，如下所示

```
use Zend\Log\Logger;
use Zend\Log\Writer;
echo "<p>Hello world</p>";
echo $_POST["VIN"]; 
phpinfo();
$logger = new Zend\Log\Logger;
$writter = new Zend\Log\Writer\Stream('php://output');
$logger->addWriter($writer);
?> 
```

我的 Apache linux httpd.conf 是

```
<VirtualHost *:80>

DocumentRoot /var/www/html/site/public
<Directory /var/www/html/site/public>              
    DirectoryIndex test.php 
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

我的 Zend 框架位于 /var/www/html/site/library/Zend 中，并且我也将 /var/www/html/site/library 添加到了 php.ini 包含中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:25:18.193

对于遇到此错误的其他人，您需要使用自动加载器，这在 Zend 框架入门 wiki 中未提及。

```
<?php 
use Zend\Loader\StandardAutoloader;
use Zend\Log\Logger;
use Zend\Log\Writer;
require_once dirname((__DIR__)).'\library\Zend\Loader\StandardAutoloader.php';
$loader = new StandardAutoloader(array('autoregister_zf' => true));
$loader->register();

echo "<p>Hello world</p>";
echo $_POST["VIN"]; 
phpinfo();

$logger = new Zend\Log\Logger;
$writer = new Zend\Log\Writer\Stream('php://output');
$logger->addWriter($writer);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:04:30.200

我认为您在 *include_path* 中包含了错误的路径，包括`/var/www/html/site/Library`not `/var/www/html/site/Library/Zend`。

检查： [https ://github.com/zendframework/zf2/blob/master/INSTALL.md](https://github.com/zendframework/zf2/blob/master/INSTALL.md)

或者在此处粘贴您的 php.ini 配置或 phpinfo() 响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T06:45:53.313

自动加载器确实是需要的。如果您的 php.ini 中包含库的路径，则可以添加以下代码以使 Zend 按预期工作：

```
require_once 'Zend/Loader/StandardAutoloader.php';
$loader = new Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));
$loader->register(); 
```

# javascript - Firefox中可调整大小的div宽度轮廓

> ID：14437070
> 
> 赞同：2
> 
> 时间：2013-01-21T10:55:14.780
> 
> 标签：javascript, css, jquery-ui, firefox

如果我在 div 上应用可调整大小的功能，轮廓位置就会出错。

ui-resizable-handle-s（在演示中显示为灰色）扩展了轮廓（红色），尽管它们的位置设置为绝对。

我该如何解决？该问题仅出现在 FF 中。

看看[演示](http://jsbin.com/ekokex/1/edit)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:18:57.030

```
.ui-resizable-s {
    cursor: s-resize;
    height: 7px;
    width: 100 % ;
    bottom: -5px;
    left: 0;
} 
```

此 css 规则将`ui-resizable-s`大小绑定到其父大小。

```
width:100%
bottom:-5px;
left:0; 
```

这3个意思是：

*   拥有父级的全宽
*   `5px`顶部边缘在 y 轴上保持低于父底部边缘
*   左边缘保持`0`在 x 轴上的父母左边缘

与这三个一起，它总是会在调整大小时让父母放松，而且它们确实可以正常工作，因为`position`是`absolute`

# android - netbean android，使用 ADB 似乎有些问题

> ID：14437074
> 
> 赞同：0
> 
> 时间：2013-01-21T10:55:25.493
> 
> 标签：android, netbeans, adb

![似乎亚行从未连接到设备](../Images/67e2c6a93d0631c99c764b2c46abe35f.png)

我是 java android 新手，我喜欢使用 netbean 编写 android 应用程序。

当我做同样的事情时`TUT Android demo`，我收到了这个奇怪的东西。很长一段时间，我认为 ADB 无法连接到设备。

# c# - 带有搜索模式的 StorageFolder.GetFilesAsync() 方法？

> ID：14437087
> 
> 赞同：3
> 
> 时间：2013-01-21T10:56:04.140
> 
> 标签：c#, windows-runtime, windows-store-apps, storagefile

在常规 .NET Framework 中，有许多方法可以根据搜索模式检索目录中的文件子集，例如[DirectoryInfo.GetFiles(string searchPattern)](http://msdn.microsoft.com/en-us/library/8he88b63.aspx)。

Windows Store应用有对应的方法吗？*适用于 Windows 应用商店应用的 .NET*不包含`Directory`或`DirectoryInfo`类，并且*Windows API中的*[StorageFolder.GetFilesAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefolder.getfilesasync.aspx)重载都不支持搜索模式。

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:06:54.843

[Windows.Storage.Search](http://msdn.microsoft.com/library/windows/apps/BR208106)命名空间允许您使用模式进行文件搜索。此外，来自 Microsoft 的[Programmatic 文件搜索示例](http://code.msdn.microsoft.com/windowsapps/Programmatically-searching-25e1a56b/sourcecode?fileId=43715&pathId=589460989)演示了如何使用 api。*

# mpi - MPI-有什么方法可以使用 Visual Studio 找出并显示 MPI 中每个核心所做的工作？

> ID：14437093
> 
> 赞同：0
> 
> 时间：2013-01-21T10:56:17.280
> 
> 标签：mpi

有没有办法使用 Visual Studio 找出并显示 MPI 中的每个核心所做的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:15:45.250

Microsoft MPI 基于 MPICH，因此包括 MPICH 跟踪功能。您可以指定`-trace`选项`mpiexec`，它将产生多个跟踪文件。最重要的是`CLOG2`文件，然后可以使用*Jumpshot*工具查看该文件。它还可以生成 OTF 痕迹，供*Vampir*之类的工具分析。

如果您碰巧使用英特尔 MPI 库，则很有可能捆绑了英特尔跟踪分析器和收集器 (ITAC)。它在单个 GUI 包中完成所有检测和可视化。

Visual Studio 2010（可能还有 2012）还包括一个用于 MPI 程序的粗略并行调试器。

# android - Android AccountManager 不应该基于每个应用程序/UID 存储 OAuth 令牌吗？

> ID：14437096
> 
> 赞同：62
> 
> 时间：2013-01-21T10:56:28.920
> 
> 标签：android, security, authentication, oauth, accountmanager

Android 的 AccountManager 似乎为具有不同 UID 的应用程序获取相同的缓存身份验证令牌 - 这安全吗？它似乎与 OAuth2 不兼容，因为不应该在不同客户端之间共享访问令牌。

## 背景/上下文

我正在构建一个 Android 应用程序，它使用 OAuth2 对我的服务器（一个 OAuth2 提供程序）的 REST API 请求进行身份验证/授权。由于该应用程序是“官方”应用程序（相对于第三方应用程序），它被认为是受信任的 OAuth2 客户端，因此我使用资源所有者密码流程来获取 OAuth2 令牌：用户（资源所有者）将他的用户名/密码输入应用程序，然后将其客户端 ID 和客户端密码以及用户凭据发送到我的服务器的 OAuth2 令牌端点，以换取可用于进行 API 调用的访问令牌，以及长- live refresh token 用于在过期时获取新的访问令牌。理由是在设备上存储刷新令牌比用户密码更安全。

我正在使用[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)来管理设备上的帐户和关联的访问令牌。由于我提供自己的 OAuth2 提供程序，因此我通过扩展[AbstractAccountAuthenticator](http://developer.android.com/reference/android/accounts/AbstractAccountAuthenticator.html)和其他必需组件创建了自己的自定义帐户类型，如[本 Android 开发指南](http://developer.android.com/training/id-auth/custom_auth.html)中所述并在 SampleSyncAdapter 示例项目中进行了演示。我能够从我的应用程序中成功添加我的自定义类型的帐户，并从“帐户和同步”Android 设置屏幕管理它们。

## 问题

但是，我担心 AccountManager 缓存和发布身份验证令牌的方式 - 具体来说，**用户已授予访问权限的任何应用程序似乎都可以访问给定帐户类型和令牌类型的相同身份验证令牌。**

要通过 AccountManager 获取身份验证令牌，必须调用[AccountManager.getAuthToken()](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)，其中传递获取身份验证令牌的[Account](http://developer.android.com/reference/android/accounts/Account.html)实例和所需的`authTokenType`. 如果指定帐户和 authTokenType 存在身份验证令牌，并且用户授予对已发出身份验证令牌请求的应用程序的访问权限（通过[“访问请求”](http://1.bp.blogspot.com/-2H_e7jCKEyQ/UJdvyERleHI/AAAAAAAAJiE/3ce0q6Mguyk/s400/gls-gb-gant-screen.png)屏幕）（在这种情况下，请求应用程序的 UID 不匹配）验证者的 UID），然后返回令牌。如果缺少我的解释，[这个有用的博客条目](http://nelenkov.blogspot.com/2012/11/android-online-account-management.html)解释得很清楚。基于该帖子，并在检查了[AccountManager](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/accounts/AccountManager.java)和[AccountManagerService的来源之后](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/accounts/AccountManagerService.java)（一个为 AccountManager 完成繁重工作的内部类）对于我自己来说，似乎**每个 authTokenType/account 组合只存储了 1 个 auth 令牌。**

**因此，如果恶意应用程序知道我的身份验证器使用的帐户类型和 authTokenType(s)，它可以调用 AccountManager.getAuthToken() 来访问我的应用程序存储的 OAuth2 令牌，**假设用户授予对恶意程序的访问权限，这似乎是可行的。应用程序。

对我来说，问题是 AccountManager 的默认缓存实现是建立在一个范式之上的，如果我们要分层 OAuth2 身份验证/授权上下文，它会将电话/设备视为服务/资源提供者的单个 OAuth2 客户端. **然而，对我来说有意义的范例是每个应用程序/UID 都应该被视为它自己的 OAuth2 客户端。**当我的 OAuth2 提供者发出访问令牌时，它是为发送了正确客户端 ID 和客户端密码的特定应用程序发出访问令牌，而不是设备上的所有应用程序。例如，用户可能同时安装了我的官方应用程序（称为应用程序客户端 A）和使用我的 API 的“许可”第三方应用程序（称为应用程序客户端 B）。对于官方客户端 A，我的 OAuth2 提供者可能会发布一个“超级”类型/范围令牌，它授予对我的 API 的公共和私有部分的访问权限，而对于第三方客户端 B，我的提供者可能会发布一个“受限”类型/scope 令牌，仅授予对公共 API 调用的访问权限。**应用客户端 B 应该无法获取应用客户端 A 的访问令牌，**因为，即使用户为客户端 A 的超级令牌授予客户端 B 的授权，事实仍然是我的 OAuth2 提供者仅打算将该令牌授予客户端 A。

我在这里忽略了什么吗？我认为应该基于每个应用程序/UID（每个应用程序是一个不同的客户端）发布身份验证令牌是合理/实用的，还是每个设备的身份验证令牌（每个设备都是客户端）是标准/接受的实践？

还是我对 / 周围的代码/安全限制的理解存在一些缺陷`AccountManager`，`AccountManagerService`以至于这个漏洞实际上并不存在？我已经使用`AccountManager`我的自定义身份验证器测试了上述客户端 A/客户端 B 场景，我的测试客户端应用程序 B 具有不同的包范围和 UID，能够获取我的服务器为我的测试颁发的身份验证令牌通过传入相同的客户端应用程序A `authTokenType`（在此期间我被提示“访问请求”授予屏幕，我批准了，因为我是一个用户，因此一无所知）......

## 可能的解决方案

**一个。"Secret" authTokenType**
为了获得认证令牌，[`authTokenType`](https://stackoverflow.com/a/4774158/1429387)必须知道；是否应该将`authTokenType`其视为一种客户端机密，以便为给定机密令牌类型颁发的令牌只能由那些知道机密令牌类型的“授权”客户端应用程序获得？这似乎不太安全；在有根设备上，可以检查系统中的表`auth_token_type`列`authtokens``accounts`数据库并检查与我的令牌一起存储的 authTokenType 值。因此，在我的应用程序（以及设备上使用的任何授权第三方应用程序）的所有安装中使用的“秘密”身份验证令牌类型将在一个中心位置公开。至少对于 OAuth2 客户端 ID/秘密，即使它们必须与应用程序一起打包，它们也会分散在不同的客户端应用程序中，并且可能会尝试混淆它们（这总比没有好）以帮助阻止那些会解包/反编译应用程序。

**湾。自定义身份验证令牌**
根据[AccountManager.KEY_CALLER_UID](http://developer.android.com/reference/android/accounts/AccountManager.html#KEY_CALLER_UID)和[AuthenticatorDescription.customTokens](http://developer.android.com/reference/android/accounts/AuthenticatorDescription.html#customTokens)的文档以及我之前引用的`AccountManagerService`源代码，我应该能够指定我的自定义帐户类型使用“自定义令牌”并在其中旋转我自己的令牌缓存/存储实现我的自定义身份验证器，其中我可以获取调用应用程序的 UID，以便按 UID 存储/获取身份验证令牌。基本上，我会有一个`authtokens`像默认实现一样的表，除了会添加一个`uid`列，以便在u̲i̲d̲，a̲c̲c̲o̲u̲n̲t̲和a̲u̲t̲h̲t̲o̲t̲o̲k̲e̲e̲n̲t̲y̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲p̲e̲u̲u̲u̲u̲u̲u̲n̲t̲t̲t̲t̲t̲t̲t̲ 这似乎是比使用“秘密”authTokenTypes 更安全的解决方案，因为这将涉及`authTokenTypes`在我的应用程序/身份验证器的所有安装中使用相同的解决方案，而 UID 因系统而异，并且不容易被欺骗。除了编写和管理我自己的令牌缓存机制带来的快乐开销之外，这种方法在安全性方面还有哪些缺点？是不是矫枉过正？我真的保护了任何东西，还是我错过了一些东西，即使有了这样的实现，一个恶意应用程序客户端仍然很容易获得另一个应用程序客户端'`AccountManager``authTokenType`(s) 不能保证是秘密的（假设所述恶意应用程序不知道 OAuth2 客户端秘密，因此不能直接获取新令牌，而只能希望获得一个已经`AccountManager`代表授权缓存的令牌应用程序客户端）？

**C。发送带有 OAuth2 令牌的客户端 ID/机密**
我可以坚持使用`AccountManagerService`默认令牌存储实现并接受未经授权访问我的应用的身份验证令牌的可能性，但我可以强制 API 请求始终包含 OAuth2 客户端 ID 和客户端机密，除了访问令牌，并在服务器端验证应用程序是首先为其颁发令牌的授权客户端。但是，我想避免这种情况，因为**A)** AFAIK，OAuth2 规范不需要对受保护的资源请求进行客户端身份验证 - 只需要访问令牌，并且**B)**我想避免在每个客户端上验证客户端的额外开销要求。

> 这在一般情况下是不可能的（服务器获得的只是协议中的一系列消息 - 无法确定生成这些消息的代码）。——[迈克尔](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)

但是对于 OAuth2 流程中的初始客户端身份验证也是如此，在此期间客户端首次获得访问令牌。唯一的区别是，不仅对令牌请求进行身份验证，对受保护资源的请求也将以相同的方式进行身份验证。（请注意，客户端应用程序将能够通过`loginOptions`参数 of传递其 c̲l̲i̲e̲n̲t̲ ̲i̲d̲ 和 c̲l̲i̲e̲n̲t̲ ̲s̲e̲c̲r̲e̲t̲ `AccountManager.getAuthToken()`，根据 OAuth2 协议，我的自定义身份验证器将仅将其传递给我的资源提供者）。

* * *

# 关键问题

1.  **一个应用程序确实可以通过调用具有相同 authTokenType 的 AccountManager.getAuthToken()**来获取另一个应用程序的authToken 吗？****
***   如果这是可能的，这是否**是 OAuth2 上下文中有效/实际的安全问题？**

    > 您永远不能依赖给用户的身份验证令牌，该用户仍然是该用户的秘密......因此，Android 在其设计中通过模糊目标忽略这种安全性是合理的——[迈克尔](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)

    **但是**- 我不担心用户（资源所有者）在未经我同意的情况下获取身份验证令牌；我担心*未经授权的客户*（应用）。如果用户想成为自己受保护资源的攻击者，那么他可以将自己击倒。我的意思是，用户安装我的客户端应用程序，并且无意中安装了一个“冒名顶替者”客户端应用程序，因为它传入了正确的 authTokenType 并且用户是太懒/不知道/急于检查访问请求屏幕。这个类比可能有点过于简单了，但我不认为我安装的 Facebook 应用程序无法读取我的 Gmail 应用程序缓存的电子邮件是“默默无闻的安全”，这与我（用户）对我的手机进行 root 并检查缓存不同内容自己。

    > 用户需要接受（Android 系统提供的）应用程序访问请求才能使用您的令牌...鉴于此，Android 解决方案似乎还可以 - 应用程序不能在不询问的情况下静默使用用户的身份验证 - [Michael](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)

    **但是**- 这也是*授权*问题- 为我的“官方”客户端颁发的身份验证令牌是一组受保护资源的关键，该客户端并且*只有该客户端*被授权。我想有人可能会争辩说，由于用户是这些受保护资源的所有者，如果他接受来自第三方客户端的访问请求（无论是“受制裁的”合作伙伴应用程序还是某些网络钓鱼者），那么他实际上是在授权第三方-请求访问这些资源的一方客户端。但我对此有疑问：

    *   普通用户的安全意识不足，无法胜任做出此决定。我不认为我们应该仅仅依靠用户的判断来点击 Android 的访问请求屏幕上的“拒绝”来防止即使是粗暴的网络钓鱼尝试。当用户收到访问请求时，我的身份验证器可以非常详细并枚举所有类型的敏感受保护资源（只有我的客户应该能够访问），如果他接受请求，用户将授予这些资源，并且在大多数情况下，用户仍然不会意识到并且会接受。在其他更复杂的网络钓鱼尝试中，“冒名顶替”应用程序看起来太“官方”了，用户甚至无法在访问请求屏幕上挑眉。或者，这里'*“不要接受这个请求！如果你看到这个屏幕，恶意应用程序正试图访问你的帐户！”*希望在这种情况下，大多数用户会拒绝该请求。但是 - 为什么它甚至应该走那么远？如果 Android 只是将身份验证令牌与为其颁发的每个应用程序/UID 的范围隔离，那么这将不是问题。让我们简化一下——即使我只有一个“官方”客户端应用程序，因此我的资源提供者甚至不担心向其他第三方客户端发布令牌，作为开发人员，我应该可以选择对AccountManager，“不！锁定此身份验证令牌，以便只有我的应用程序可以访问。” 如果我沿着“自定义令牌”路线走，我可以做到这一点，但即使在这种情况下，我也无法阻止用户首先看到访问请求屏幕。至少，
    *   甚至 Android 文档也将 OAuth2 视为身份验证（并且可能是授权）的“[行业标准](http://developer.android.com/training/id-auth/authenticate.html)”。OAuth2 规范明确指出，访问令牌不得在客户端之间共享或以任何方式泄露。那么，为什么默认的 AccountManager 实现/配置使客户端能够如此轻松地获得与另一个客户端最初从服务获得的相同的缓存身份验证令牌？AccountManager 中的一个简单修复是仅将缓存的令牌重新用于相同的应用程序/UID，它们最初是从服务中获取的。如果给定的 UID 没有本地缓存​​的身份验证令牌，则应从服务中获取。或者至少使它成为开发人员的可配置选项。
    *   在 OAuth 3-legged 流程（涉及用户授予对客户端的访问权限）中，它不应该是服务/资源提供者（而不是操作系统），它会到达**A）**对客户端和**B进行身份验证)*如果***客户端是有效的，向用户提供授权访问请求？似乎Android（错误地）在流程中篡夺了这个角色。

    > 但是用户可以明确地允许应用程序重新使用以前对服务的身份验证，这对用户来说很方便。--[迈克尔](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)

    **但是**- 我不认为便利的投资回报率保证安全风险。如果用户的密码存储在用户的帐户中，那么实际上，为用户购买的唯一便利是，无需向我的服务发送 Web 请求以获取实际授权的新的、不同的令牌请求客户端，返回一个本地缓存的未授权给客户端的令牌。因此，用户可以在几秒钟内看到“正在登录...”进度对话框，从而获得轻微的便利，但用户可能会因资源被盗/滥用而造成极大的不便。

    *   请记住，我致力于**A)**使用 OAuth2 协议来保护我的 API 请求，**B)**提供我自己的 OAuth2 资源/身份验证提供程序（而不是使用 Google 或 Facebook 进行身份验证），以及**C)**利用 Android 的 AccountManager管理我的自定义帐户类型及其令牌**，我提出的任何解决方案是否有效？**哪个最有意义？我是否忽略了任何优点/缺点？有没有我没有想到的有价值的替代方案？

    > **[使用] 替代客户端**没有试图仅由官方客户端访问的秘密 API；人们会绕过这个。无论用户使用什么（未来）客户端，确保所有面向公众的 API 都是安全的[——Michael](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)

    **但是**- 这不是首先破坏了使用 OAuth2 的主要目的之一吗？如果所有潜在的被授权者都被授权使用相同范围的受保护资源，那么授权有什么用？

    *   **有没有其他人觉得这是一个问题，你是如何解决这个问题的？**我做了一些广泛的谷歌搜索，试图找出其他人是否认为这是一个安全问题/担忧，但似乎大多数涉及 Android 的 AccountManager 和身份验证令牌的帖子/问题都是关于如何使用 Google 帐户进行身份验证，而不是具有自定义帐户类型和 OAuth2 提供程序。此外，我找不到任何人担心不同应用程序使用相同的身份验证令牌的可能性，这让我想知道这是否确实是一种可能性/值得关注（请参阅我的前 2 个“关键问题“ 以上所列）。** 

 **感谢您的意见/指导！

* * *

## 作为回应...

**[迈克尔的回答](https://stackoverflow.com/questions/14437096/shouldnt-android-accountmanager-store-oauth-tokens-on-a-per-app-uid-basis/14468836#14468836)**- 我认为我对你的回答的主要困难是：

1.  我仍然倾向于将应用程序视为服务的独立的、不同的客户端，而不是用户/电话/设备本身是一个“大”客户端，因此，一个已为一个应用程序授权的令牌不应该通过默认，可转让给没有的。似乎您可能暗示将每个应用程序视为不同的客户端是没有实际意义的，因为有可能，

    > 用户可能正在运行有根手机，并读取令牌，获得对您的私有 API 的访问权限...... [或]如果用户的系统受到威胁（在这种情况下，攻击者可以读取令牌）

    因此，从总体上看，我们应该将设备视为服务的客户端，因为我们无法保证设备本身上的应用程序之间的安全性。如果系统本身已被入侵，则无法保证从该设备向服务发送验证/授权请求。但同样可以说，比如 TLS；如果端点本身不能得到保护，则传输安全是无关紧要的。对于绝大多数没有受到影响的 Android 设备，我认为将每个应用程序客户端视为一个不同的端点会更安全，而不是通过共享相同的身份验证令牌将它们全部归为一个。

2.  当出现“访问请求”屏幕时（类似于我们在同意和安装之前总是通读的软件用户许可协议），我不相信用户的判断来区分恶意/未经授权的客户端应用程序和非恶意/未经授权的客户端应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T22:00:03.813

## 这是一个有效/实际的安全问题吗？

> 对于官方客户端 A，我的 OAuth2 提供者可能会发布一个“超级”类型/范围令牌，授予对我的 API 的公共和私有部分的访问权限

在一般情况下，您永远不能依赖*从该用户*提供给用户的身份验证令牌。例如 - 用户可能正在运行有根手机，并读取令牌，获得对您的私有 API 的访问权限。如果用户的系统被攻破（在这种情况下攻击者可以读取令牌），则同上。

换句话说，没有任何经过身份验证的用户可以同时访问的“私有”API 这样的东西，因此 Android 在其设计中通过模糊目标忽略这种安全性是合理的。

> 恶意应用程序...可以访问我的应用程序存储的 OAuth2 令牌

对于恶意应用案例，恶意应用不应该能够使用客户端令牌听起来更合理，因为我们希望 Android 的权限系统能够提供恶意应用的隔离（前提是用户阅读/关心他们的权限）当他们安装它时接受）。但是，正如您所说，用户需要接受（Android 系统提供的）应用程序访问请求才能使用您的令牌。

鉴于此，Android 解决方案似乎没问题 - 应用程序不能在不询问的情况下静默使用用户的身份验证，但用户可以明确允许应用程序重新使用以前的服务身份验证，这对用户来说很方便。

## 可能的解决方案审查

> “秘密” authTokenType ...似乎不是很安全

同意——这只是通过默默无闻的另一层安全；听起来任何希望共享您的身份验证的应用程序无论如何都必须查找 authTokenType 是什么，因此采用这种方法只会让这个假设的应用程序开发人员更加尴尬。

> 发送带有 OAuth2 令牌的客户端 ID/秘密 ... [以] 验证服务器端应用程序是授权客户端

这在一般情况下是不可能的（服务器获得的只是协议中的一系列消息 - 无法确定生成这些消息的代码）。在这种特定情况下，它可以防止（非根）替代客户端/恶意应用程序的更有限的威胁 - 我对 AccountManager 的评论不够熟悉（对于您的自定义身份验证令牌解决方案也是如此）。

## 建议

您描述了两种威胁 - 用户不希望访问其帐户的恶意应用程序，以及您（开发人员）不希望使用部分 API 的替代客户端。

*   恶意应用程序：考虑您提供的服务有多敏感，如果它不比谷歌/推特帐户更敏感，则只需依靠 Android 的保护（安装权限、访问请求屏幕）。如果它*更*敏感，请考虑您使用 Android 的 AccountManager 的限制是否合适。为了有力地保护用户免受恶意使用其帐户的影响，请尝试对危险操作进行两因素身份验证（参见在网上银行中添加新收款人的帐户详细信息）。

*   替代客户端：没有试图仅由官方客户端访问的秘密 API；人们会绕过这个。无论用户使用什么（未来）客户端，都要确保所有面向公众的 API 都是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T07:52:00.280

你的观察是正确的。Authenticator 将使用与安装应用程序相同的 UID 运行。当另一个应用程序连接到 Account manager 并获取此身份验证器的令牌时，它将绑定到您提供的身份验证器服务。它将作为您的 UID 运行，因此新帐户将与此 Authenticator 相关联。当应用程序调用 getAuthToken 时，将发生绑定并且 Authenticator 仍将在相同的 UId 中运行。默认内置权限检查帐户的 UID，以便不同的 Authenticator 无法从不同的 Authenticator 访问另一个帐户。

您可以通过对 addAccount 和 GetAuthToken 使用“调用 UID”来解决此问题，因为客户经理服务会将其添加到捆绑包中。您的身份验证器实现可以检查这一点。

```
 @Override
    public Bundle getAuthToken(AccountAuthenticatorResponse response, Account account,
            String authTokenType, Bundle loginOptions) throws NetworkErrorException {
        Log.v(
                TAG,
                "getAuthToken() for accountType:" + authTokenType + " package:"
                        + mContext.getPackageName() + "running pid:" + Binder.getCallingPid()
                        + " running uid:" + Binder.getCallingUid() + " caller uid:"
                        + loginOptions.getInt(AccountManager.KEY_CALLER_UID));
          ...
} 
```

我建议遵循授权流程，而不是将客户端密码存储在您的本机应用程序中，因为其他开发人员可以提取该密码。你的应用不是网络应用，不应该有秘密。

添加账号时，也可以查询callingUId。您需要在**addAccount相关活动中设置用户数据，****该**活动将作为应用的 UID 运行，因此它可以调用**setUserData**。

**getUserData**和**setUserData**使用内置的 sqllite 数据库，因此您不需要自己构建缓存。您只能存储字符串类型，但您可以解析 json 并存储每个帐户的额外信息。

当不同的第三方应用查询账号并使用您的账号调用getAuthtoken时，您可以在账号的userdata中查看UID。如果未列出调用 UID，您可以执行提示和/或其他操作以获得许可。如果允许，您可以向帐户添加新的 UID。

**在应用程序之间共享令牌**：每个应用程序通常使用不同的 clientid 注册，它们不应共享令牌。令牌用于客户端应用程序。

**存储**：AccountManager 未加密您的数据。如果您需要更安全的解决方案，您应该加密令牌然后存储它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T08:39:00.047

我面临着同样的应用程序架构问题。

我得到的解决方案是将 oauth 令牌与应用程序供应商令牌（例如 facebook 提供给应用程序的令牌）和设备 ID（`android_id`）关联/散列。因此，只有经过授权的应用程序才能使用来自客户经理的令牌。

当然，这只是一个新的安全层，但不是防弹的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-10T11:45:07.373

我认为@Michael 完美地回答了这个问题；但是，为了让那些寻求快速答案的人更明智、更简短，我正在写这篇文章。

您对 android 安全性的担忧`AccountManager`是正确的，但这就是 OAuth 的意义所在，android`AccountManager`依赖于它。

换句话说，如果您正在寻找一种非常安全的身份验证机制，这对您来说不是一个好选择。您不应该依赖任何缓存的令牌进行身份验证，因为如果用户设备上存在任何安全漏洞，例如无意中授予入侵者访问权限、运行 root 设备等，它们很容易暴露给入侵者。

在更安全的身份验证系统（例如在线银行应用程序）中，OAuth 的更好替代方案是使用使用公钥和私钥的非对称加密，其中用户每次使用服务时都需要输入密码。然后使用设备上的公钥加密密码并发送到服务器。在这里，即使入侵者知道了加密密码，他也无法对此做任何事情，因为他无法使用该公钥解密它，并且只需要服务器的私钥。

无论如何，如果一个人想要使用`AccountManager`android 系统并保持高水平的安全性，则可以通过不在设备上保存任何令牌来实现。然后可以像这样覆盖`getAuthToken`from的方法：`AbstractAccountAuthenticator`

```
@Override
public Bundle getAuthToken(AccountAuthenticatorResponse response, Account account, String
        authTokenType, Bundle options) throws NetworkErrorException {
    AuthenticatorManager authenticatorManager = AuthenticatorManager.authenticatorManager;
    Bundle result;
    AccountManager accountManager = AccountManager.get(context);
    // case 1: access token is available
    result = authenticatorManager.getAccessTokenFromCache(account, authTokenType,
            accountManager);
    if (result != null) {
        return result;
    }
    final String refreshToken = accountManager.getPassword(account);
    // case 2: access token is not available but refresh token is
    if (refreshToken != null) {
        result = authenticatorManager.makeResultBundle(account, refreshToken, null);
        return result;
    }
    // case 3: neither tokens is available but the account exists
    if (isAccountAvailable(account, accountManager)) {
        result = authenticatorManager.makeResultBundle(account, null, null);
        return result;
    }
    // case 4: account does not exist
    return new Bundle();
} 
```

在这种方法中，情况 1、情况 2 和情况 4 都不成立，因为没有保存的令牌，即使`account`存在。因此，只会返回 case 3，然后可以在相关回调中设置它以打开`Activity`用户输入用户名和密码进行身份验证的情况。

我不确定在此处进一步描述这一点是否走在正确的轨道上，但[我在网站上发布的帖子`AccountManager`](http://www.digigene.com/category/android/accounts-in-android/)可能会有所帮助，以防万一。**

# c++ - 如何取消注册测试用例以及如何将特定测试用例注册到 Gtest

> ID：14437098
> 
> 赞同：1
> 
> 时间：2013-01-21T10:56:40.090
> 
> 标签：c++, c, visual-studio-2010, googletest, gmock

如我们所知，在 gtets 中，当控件找到`TEST`或`TEST_F`运行时，它`registers`会`test cases`进入`gtest`. 但根据我的要求，在 gtest 注册完所有测试用例后，我需要搜索`testcasename`列表中是否存在？如果`tesetcasename`存在，那么我需要注销所有测试用例并仅注册找到的`testcasename`. 怎么做？？？认为

```
TEST_F(testcasename, testname){}
TEST_F(testcasename1, testname1){}
TEST_F(testcasename3, testname3){}
..
..
TEST_F(testcasenameN, testnameN){} 
```

假设我`"testcasename3"`在`registered testcasename`. 它是可用的。现在我希望 gtest 只执行找到的测试用例而不是全部......

怎么做？

任何答案表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:40:09.680

这可以使用高级指南中描述的命令行来完成，所以

```
./foo_test --gtest_filter=testcasename3.* 
```

只会运行`testcasename3`及其所有测试。命令行语法很广泛，可以使用通配符进行测试并包含和排除。有关详细信息，请参阅[高级文档](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#running-test-programs-advanced-options)

# java - 每 24 小时执行一次代码，但前提是应用程序打开

> ID：14437100
> 
> 赞同：0
> 
> 时间：2013-01-21T10:57:01.073
> 
> 标签：java, android

我想每 24 小时在我的应用程序中执行特定代码。

我知道如何使用 AlarmManager 但问题是如果应用程序未运行，我不希望执行该代码。

我希望它在应用程序启动时执行，但前提是在上次执行后 24 小时过去。

24小时过去了没关系

例如，如果用户第一次打开我的应用程序，代码将执行。如果它在 20 分钟后再次打开，则不会发生任何事情。如果它在 24 小时后打开它或将执行更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:01:53.123

我会将程序启动的时间保存到文件中。你可以在写之前检查一下，看看它已经有多长时间了。

注意：如果有一个任务你想至少间隔 24 小时运行，你真的希望最后一次执行任务。例如，如果应用程序每 8 小时打开一次，您仍然希望它运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:08:23.923

为什么不使用`Shared Preferences`Android 平台提供的存储选项来存储上次访问信息，然后采取相应措施。有关更多详细信息，请参阅此链接：[存储选项的 Android 开发人员参考](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c# - 将excel数据写入数据表

> ID：14437102
> 
> 赞同：1
> 
> 时间：2013-01-21T10:57:03.387
> 
> 标签：c#, excel, datatable

我已经编写了下面的代码来将数据从 excel 文件写入数据表，但是由于某种原因，在写入数据表时，索引 0 和 1 处的行的数据不显示。有没有人知道为什么会这样..

```
var excelDataTable = new DataTable();
            var excelAdapter = new OleDbDataAdapter();

            var excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source= " + excelFileName + ";Extended Properties=Excel 12.0;";
            // Create Connection to Excel Workbook
            using (var excelConnection = new OleDbConnection(excelConnectionString))
                {                    
                    excelConnection.Open();

                    var dt = excelConnection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
                    if (dt != null)
                    {
                        var excelSheet =  new String[dt.Rows.Count];
                        int i = 0;
                        foreach (DataRow row in dt.Rows)
                        {
                            excelSheet[i] = row["Table_Name"].ToString();
                            i++;
                        }

                        var command = new OleDbCommand
                            ("Select  * FROM [" + excelSheet[0] + "]", excelConnection); // should be first sheet not the name of the sheet, should be index

                        excelAdapter.SelectCommand = command;
                    }
                    excelAdapter.Fill(excelDataTable);
                    excelConnection.Close();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:13:13.990

您的连接字符串有问题.....................如果您想避免标题或想要包含标题行或从第一行开始，您需要包含excel连接字符串的另一个扩展属性。

请检查[这个](https://stackoverflow.com/questions/6690604/c-sharp-excel-skipping-first-row)

[在读取 Excel 文件时跳过第一行](https://stackoverflow.com/questions/9713048/skip-first-row-in-read-of-excel-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:08:27.287

About data from`row[0]`可以帮助将属性包含`HDR=No;`在您的连接强的扩展属性中。

# php - 缓存库未加载

> ID：14437106
> 
> 赞同：3
> 
> 时间：2013-01-21T10:57:15.370
> 
> 标签：php, codeigniter

在 codeigniter(2.1.3) 中加载缓存库时出错。它的意思是这样的：

> 遇到错误
> 
> 无法加载请求的类：缓存

我的代码看起来像这样

```
if (!$data['foo'] = $this->cache->file->get('details')) {
        $data['foo'] = $this->foo->getdetails();
        $this->cache->file->save('details', $data['foo'], 600);
    } 
```

我的自动加载文件是这样的：

```
$autoload['libraries'] = array('database','form_validation','session','driver','cache'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:59:06.090

大家好，我得到了这个问题的答案。

最后我制作了一个自定义库并在我的自动加载文件中调用它。它解决了我的问题。

代码在这里

```
class CallCache  {

public function __construct($config = array())
{
            $ci = &get_instance();
            $ci->load->driver('cache', array('adapter' => 'apc', 'backup' => 'file')); 
}
} 
```

最后感谢上帝

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:10:10.327

确保你没有错过 CI 的加载库函数......看起来你没有加载类..

> 在您的任何控制器函数中，您可以使用标准初始化您的类： $this->load->library('someclass');

尝试这个

```
$this->load->library('cache');  //library name  // put it on your controller.. 
```

这是使用[指南](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T16:07:06.953

Solution for me was to rename folder name from: "libraries/cache" to "libraries/Cache" in system folder :)

Loader uses ucfirst() to uppercase first letter folder name and search in it to find driver.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T11:10:41.530

我认为您需要事先加载缓存库。你可以这样做：

```
$this->load->library('cache'); 
```

或者你可以把缓存库放在你的 autoload.php

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T14:26:58.453

您如何比较本地和服务器中的 php 版本。我在 charset utf-8 方面做了一段时间，结果发现如果您的 php 版本低于 5.4 或本机版本，CI 将无法正常工作。您必须在您的 cpanel 或您的服务器使用的任何东西中升级它。干杯!

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-02T13:58:12.467

你实际上可以这样做

```
$autoload['drivers'] = array('cache'); 
```

# shell - 如何将值插入特定的列和行？

> ID：14437107
> 
> 赞同：-1
> 
> 时间：2013-01-21T10:57:28.263
> 
> 标签：shell

例如 cat testing_file.txt 给出

**输入：**

```
ABC
ABC 
```

**预期输出：**

```
ACB
CBA 
```

**问题：**

1）如何将值插入特定的列和行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:08:54.173

这必须在Shell中完成吗？在 Perl 中很简单：

```
#! /usr/bin/perl

use warnings;
use strict;

while (<>)
{
  unless (/^<234>/)
  {
    my ($from_pos, $length, $to_pos)
        = /^<!!!>/ ? (21, 4, 6) : (7, 3, 21);
    my $old = substr $_, $from_pos, $length, '0' x $length;
    substr $_, $to_pos, $length, $old;
  }

  print;
} 
```

请注意，它`substr`是从零开始的，因此它`$from_pos`是 21 或 7，而不是 22 或 8。

# javascript - 通信 javascript 和 android 服务（广播）？

> ID：14437108
> 
> 赞同：1
> 
> 时间：2013-01-21T10:57:30.770
> 
> 标签：javascript, android, mobile

有什么方法可以从 JavaScript 通信或接收 android 广播消息。我的场景如下。

我的同事已经开发了一个 android 应用程序，它将向后端连接器提出请求并收听其广播。收到响应后，它会解析并将其显示给用户。

现在新的需求变成了移动网络。（即）我正在努力在 jquery mobile 中创建前端，并且必须与相同或相似类型的 android 服务进行通信。我在 android 应用程序开发方面为零。有没有办法做到这一点？

# node.js - 查找包含与 mongodb+node.js 中传递的参数最接近的值的文档

> ID：14437109
> 
> 赞同：0
> 
> 时间：2013-01-21T10:57:31.047
> 
> 标签：node.js, mongodb, express, node-mongodb-native

我有一个名为lights的mongodb集合，这个集合中的一个文档看起来像，

```
{
    "_id": "50eea4a53004cc6233d12b02",
    "Physicalentity": "Light",
    "Sensor": "Tinkerforge",
    "Unit": "Lux",
    "value": "47.2",
    "time": "12:23:17",
    "date": "10.01.2013"
  }, 
```

我想根据时间检索文档，因此为了实现这一点，我写了以下内容：

```
 app.get('/lights/:time', function(req, res) {
    var time = req.params.time;
console.log('Retrieving value: ' + time);
db.collection('lightsensor', function(err, collection) {
        collection.findOne({'time':new BSON.ObjectID(time)}, function(err, item) {
            res.send(item);
        });
    }); 
    }); 
```

但是当我输入网址时`http://localhost:3000/lights/12:23:17`

我得到错误：`Argument passed in must be a single String of 12 bytes or a string of 24 hex characters`

问题究竟出在哪里？

是否可以输入时间并允许 mongodb 查找 URL 中指定的时间最近的文档。

例如，我输入`http://localhost:3000/lights/12:23:20`

这不在我的收藏中，但存在时间为 12:23:17 的文档。

我如何告诉 mongodb 找到包含最接近传递参数的值的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:09:13.723

首先，您应该使用 Date 作为时间而不是字符串。我建议使用 javascript 日期对象将日期和时间字段替换为单个日期时间字段，因为这样您就可以在 mongodb 的查询中使用日期。如果您需要匹配 url 中的时间之类的内容，您只需将该字符串映射到日期对象，以便查询文档。

# eclipse - 耶拿 ExceptionInInitializerError

> ID：14437112
> 
> 赞同：1
> 
> 时间：2013-01-21T10:57:40.203
> 
> 标签：eclipse, exception, jena

我是jena新手，我有这个错误：

```
 Exception in thread "AWT-EventQueue-0" java.lang.ExceptionInInitializerError
    at com.hp.hpl.jena.rdf.model.impl.RDFReaderFImpl.<clinit>(RDFReaderFImpl.java:74)
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.<clinit>(ModelCom.java:54)
    at com.hp.hpl.jena.rdf.model.ModelFactory.createDefaultModel(ModelFactory.java:142)
    at com.hp.hpl.jena.rdf.model.ModelFactory.createDefaultModel(ModelFactory.java:136)
    at com.hp.hpl.jena.vocabulary.OWL.<clinit>(OWL.java:37)
    at com.hp.hpl.jena.ontology.ProfileRegistry.<clinit>(ProfileRegistry.java:47)
    at com.hp.hpl.jena.ontology.OntModelSpec.<clinit>(OntModelSpec.java:53)
    at myprogram.Connection.<init>(Connection.java:46) 
```

跳转到此异常的代码部分是这样的（Connection.java:46）：

```
 m = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM, null ); 
```

我定义的用户库包含：

```
commons-codec-1.5.jar
httpclient-4.1.2.jar
httpcore-4.1.3.jar
jcl-over-slf4j-1.6.4
jena-arq-2.9.4.jar 
jena-core-2.7.4.jar 
jena-iri-0.9.4.jar 
jena-tdb-0.9.4.jar 
log4j-1.2-16.jar 
slf4j-api-1.7.2.jar 
slf4j-log4j12-1.6.4.jar 
xercesimpl-2.10.0.jar 
xml-apis-1.4.01.jar 
```

Java版本是jdk1.7.0_11

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:46:02.510

AWT-EventQueue-0 -- 你在什么环境下运行？

一种可能性是存在另一个版本的 Jena，因为 stacktrace 与 2.7.4 代码库不太一致。

# vb.net - vb.net Ms Word 表格单元格。如何在字符串中插入换行符？

> ID：14437116
> 
> 赞同：0
> 
> 时间：2013-01-21T10:57:57.660
> 
> 标签：vb.net, ms-word, openxml

在 Word 中使用 OpenXML（不是 Office 互操作），使用 regex.replace 将 ###Field### 替换为字符串。一个###Field3#### 在表格单元格中，替换字符串需要换行。注意似乎可以在 Word 表格单元格中的字符串中插入换行符。

VbCrLf..没有

CrLf...没有

chr(13) 没有

Environment.NewLine....没有

必须有一种方法可以将字符串分成表格单元格中的行：

“12345”+???? + "DDDDDD" ---->

12335

DDDDDD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:36:02.970

您需要在包含字段的 Run 之后将新的 Run 插入到同一段落中。

# python - 授权在下拉列表中选择选项

> ID：14437117
> 
> 赞同：0
> 
> 时间：2013-01-21T10:58:13.317
> 
> 标签：python, authorization, pyramid

我在 python-pyramid 中有一个网络工具。在一个页面上，我们有一个包含 20 个选项的下拉菜单。登录网络工具的每个人都可以看到此页面。我在此页面上对用户可用的选项进行了授权/限制。

我目前的设计是一个 2D 矩阵，它告诉哪个用户有哪些可用选项。我正在查询矩阵并向用户显示选项。现在我在想是否可以在`pyramid.authorization`这里使用？

我的理解是，`pyramid.authorization`当我们有不同的页面时，我们会使用用户（管理员、普通用户等）的关联视图（编辑、视图、创建）。由于我只有一页，`pyramid.authorization`无法使用。

我对么 ？或者如果我可以`pyramid.authorization`在我的设计中使用，那么如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:08:13.617

目前还不太清楚“2D 选项矩阵”是什么，但我假设您正在谈论指向其他页面的链接（或提交给其他视图的表单），并且您希望根据用户是否有显示/隐藏选项查看目标页面或调用目标表单提交处理程序的权限。

在这种情况下，[pyramid.security.has_permission](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/api/security.html#pyramid.security.has_permission)应该可以解决您的问题。只需使用适当的权限保护您的*目标*视图，并在您的“主页”视图中使用此功能来确定是否应向当前用户显示每个特定的菜单项。

# jquery - jQuery，Sortabtable：我想在中心拖动，但是高度不对？

> ID：14437119
> 
> 赞同：0
> 
> 时间：2013-01-21T10:58:15.170
> 
> 标签：jquery, jquery-ui-sortable

我有以下可拖动的列表项结构：

```
<ul id="dadCol_0" class="dad-list ui-sortable">
<li class="dad-item ui-draggable" id="sl1" style="position: relative;">1</li>
<li class="dad-item ui-draggable" id="sl2" style="position: relative;">2</li>
<li class="dad-item ui-draggable" id="sl3" style="position: relative;">3</li>
<li class="dad-item ui-draggable" id="sl4" style="position: relative;">4</li>
<li class="dad-item ui-draggable" id="sl5" style="position: relative;">5</li>
</ul> 
```

jQuery：

```
dad_list.sortable({
    connectWith: 'ul.dad-list',
    containment: '#containment',
    items: 'li.dad-item',
    cursorAt: {
        top: Math.round($(this).outerHeight() / 2)
    },
    stop: function(event, ui) {
        serializedads();
    }       
}); 
```

这一切都可以，但看起来 .outerHeight() 为 0，拖动的项目卡在顶部。我需要高度/ 2 位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:17:06.577

尝试

```
cursorAt: function(ui){
    top: Math.round($(ui.item).outerHeight() / 2)
} 
```

# macos - 自定义 Apple 菜单

> ID：14437120
> 
> 赞同：10
> 
> 时间：2013-01-21T10:58:23.853
> 
> 标签：macos

如何自定义 Apple 菜单？我应该学习哪些 SDK 等？我想插入一个菜单项：

![在此处输入图像描述](../Images/9a23ce73966ebc0c41d3b70662f644ab.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T02:55:22.603

**苹果菜单特定**

[这个 AskDifferent 问题](https://apple.stackexchange.com/questions/22535/can-i-remove-the-log-out-item-from-the-apple-menu)解决了从 Apple 菜单中删除项目的问题。似乎您可以使用相同的技术来添加项目。请务必备份您编辑的任何系统文件。

以下帖子推荐了类似的解决方案，但有些过时了。但是，系统文件路径似乎相同。

*   [隐藏不需要的 Apple 菜单项](http://hints.macworld.com/article.php?story=20021127054406250)
*   [删除“获取 Mac OS X 软件”菜单项](http://hints.macworld.com/article.php?story=20011031140329668)

在 AskDifferent 问题中也提到，[FruitMenu 允许菜单自定义](http://www.unsanity.com/haxies/fruitmenu)。但是，不支持最新版本的 OS X。

> 版本 3.8.4 于 2011 年 3 月 3 日发布
> 需要 Mac OS X 10.5.8 或 Mac OS X 10.6.x；Rosetta
> 与 Mac OS X 10.6 雪豹兼容。

**OS X 菜单项教程**

*   [创建独立的 StatusItem 菜单](http://www.sonsothunder.com/devres/livecode/tutorials/StatusMenu.html) ¹

    > 本教程将向您展示如何在菜单栏中创建可供所有应用程序使用的 StatusItem 菜单。
    > 
    > 完成后，您将拥有一个简单的菜单，该菜单将作为“通用”后台应用程序单独出现在菜单栏中，并包含两个菜单项，可让您在控制台中输入字符串并自行退出。请注意，您需要自己为添加或修改的任何菜单项编写功能代码，但这将帮助您入门。
    > 
    > ![在此处输入图像描述](../Images/e538327153363301c812dbbeacb970a5.png)

*   [创建状态栏应用程序](http://cocoatutorial.grapewave.com/2010/01/creating-a-status-bar-application/)

    > 本教程假设您具有 Objective-C 的基本知识。在本教程中，我们将介绍如何为 Mac OS X 创建仅状态栏的应用程序。
    > 
    > ![应用程序窗口示例](../Images/062e5ac7d368e4a07025eb77f713127e.png)

¹ [Mac 菜单栏教程？](https://stackoverflow.com/questions/6239399/mac-menu-bar-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T03:39:13.707

它只是系统文件夹中一个名为“Apple Menu Items”的文件夹，您可以通过多种方式对其进行操作。但不要重命名它或将其移出系统文件夹。

[http://www.macoptions.com/os85/applemenu.html](http://www.macoptions.com/os85/applemenu.html)

# angularjs - 每个模型的angularjs自定义视图

> ID：14437121
> 
> 赞同：2
> 
> 时间：2013-01-21T10:58:24.507
> 
> 标签：angularjs

我想在 ng-repeat 中呈现不同的 html 模板（绑定到模型）。

```
<div ng-repeat="section in sections | filter:unansweredSections">

    // Here i want something like
    if section == children
        render div#children
    else if section == work
        render div#work

</div>

<div style="display:none" id="children">
    // i want to bind this to sections info
    <input ng-model="???.totalChildren" />
</div>

<div style="display:none" id="work">
    // i want to bind this to sections info
    <input ng-model="???.work1" />
    <input ng-model="???.work2" />
</div> 
```

现在在最后两个 div 中，我实际上希望输入绑定到具体部分的参数。

我的模型如下所示：

```
$scope.sections = [
    {"name" : "children","totalChildren" : 0},
    {"name" : "work","work1" : "","work2" : ""}
] 
```

我可以把它变成一个对象而不是一个数组

```
$scope.sections = {
    "children"  : {"totalChildren" : 0},
    "work"      : {"work1" : "","work2" : ""}
} 
```

然后轻松绑定到它

```
<div style="display:none" id="children">
    <input ng-model="sections.childern.totalChildren" />
</div> 
```

但是我不能在上面使用过滤器和排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T14:13:36.507

有很多方法可以做到这一点。

1.  您可以使用`ng-show`(和/或`ng-hide`) 像 if 一样操作，并仅显示与每个模型（子模型或工作模型）相对应的元素。这种方法的问题在于，它只会从反对模型中隐藏元素而不删除它们，这会不必要地增加 DOM。

    ```
    <div class="work" ng-show={{isWork()}}>work template</div>
    <div class="child" ng-show={{isChild()}}>child template</div> 
    ```

2.  使用[Angular-UI](http://angular-ui.github.com/) `ui-if`之类的指令（这将避免维护不必要的 DOM 元素的问题）。

    ```
    <div class="work" ui-if={{isWork()}}>work template</div>
    <div class="child" ui-if={{isChild()}}>child template</div> 
    ```

3.  创建一个自定义指令来为每个模型呈现您自己的模板，就像在这个示例小提琴中一样：http: [//jsfiddle.net/bmleite/kbxJm/](http://jsfiddle.net/bmleite/kbxJm/)

# iphone - 应用只对Portrait启用，但UIImagePickerController在iOS6中旋转

> ID：14437124
> 
> 赞同：6
> 
> 时间：2013-01-21T10:58:32.120
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiimagepickercontroller

**请注意下面的答案 - 不适用于 iOS6，所以我仍然需要答案！**

我的应用程序仅启用纵向模式。

但是，如果我将 UIImagePickerController 作为子视图嵌入其中并旋转设备，则顶部和底部栏保持在同一位置，但 UIImagePickerController 确实会旋转。

我怎样才能防止它旋转？

这是代码：

```
 [self.view.window addSubview:self.imagePickerController.view];
    self.imagePickerController.showsCameraControls = NO; 
    self.imagePickerController.view.frame = CGRectMake(0, 90, 320, 320);
    self.imagePickerController.allowsEditing = NO; 
```

**已编辑**

我正在使用未调用 shouldAutorotate 的 iOS6

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T11:16:12.943

在您的课程中添加此`UIImagePickerController`类别，

```
@interface UIImagePickerController(Nonrotating)
- (BOOL)shouldAutorotate;
@end

@implementation UIImagePickerController(Nonrotating)

- (BOOL)shouldAutorotate {

  return NO;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:27:58.750

在您的控制器中包含以下内容，这将起作用，我只是在创建类别`UIImagePickerController`

```
@interface UIImagePickerController (private)

- (BOOL)shouldAutorotate;
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation;
- (NSUInteger)supportedInterfaceOrientations;
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;

@end

@implementation UIImagePickerController (Private)

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {

    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{  
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T10:49:32.797

投票最多的答案中的类别有效，但由于不鼓励使用类别，您也可以创建 UIImagePickerController 的子类并使用它。

如果要避免 UIImagePickerController 的旋转，请添加以下类

UINonRotatableImagePickerController.h

```
@interface UINonRotatableImagePickerController : UIImagePickerController

@end 
```

UINonRotatableImagePickerController.m

```
@implementation UINonRotatableImagePickerController

- (BOOL)shouldAutorotate
{
    return NO;
}

@end 
```

您必须更改情节提要中的 UIImagePicker 类才能使用 UILandscapeImagePickerController，或者如果您在代码中分配它，请更改

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init]; 
```

至

```
UIImagePickerController *picker = [[UINonRotatableImagePickerController alloc] init]; 
```

并在您的代码中包含 UINonRotatableImagePickerController.h。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T11:18:46.287

一种可能性是覆盖

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation; 
```

的方法`UIImagePickerController`。我不确定这是否是最好的可能性，但它会起作用。

因此，如果您只想将 UIImagePickerController 旋转为纵向，请使用以下代码

```
@interface PortraitUIImagePickerController : UIImagePickerController

@end 
```

并且实现应该如下所示

```
@implementation PortraitUIImagePickerController

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(toInterfaceOrientation);
}

@end 
```

# css - 即使在重置后也继承不透明度

> ID：14437129
> 
> 赞同：0
> 
> 时间：2013-01-21T10:58:54.367
> 
> 标签：css

我有一个“浮动”固定位置 div，它显示在标签的单击上。在固定的 div 中是一个表单按钮。

现在，因为 div 可能会显示在页面上的任何位置，并且当用户滚动其下方的页面时，我给它的不透明度为 0.8。但是，我仍然希望 div 内的按钮完全不透明度（1），但它不会重置按钮不透明度。

这是CSS

```
#delHolder { 
width:280px; 
text-align:center; 
position:fixed; 
background:#fff; 
opacity:0.8; 
height:60px; 
top:150px; 
left:50%; 
margin-left:-140px; 
z-index:2322;  
border-radius:8px;
}

#multiDel { position:relative; z-index:232323; opacity:1.0; }

.className { opacity:1.0; } 
```

html 类似于：

```
<div id="delHolder"><input type="submit" class="className" id="multiDel"></div> 
```

我怎样才能只对持有人 div 有透明度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:01:00.627

代替

```
opacity:0.8;
background: #fff; 
```

采用

```
background-color: rgba(255, 255, 255, 0.8); 
```

这样，应用于父级的不透明度不会从子级继承。
注意：`rgba()`不会工作`IE<=8`

# actionscript-3 - 在 AS3 中移除子级

> ID：14437130
> 
> 赞同：0
> 
> 时间：2013-01-21T10:58:55.943
> 
> 标签：actionscript-3

我的 Flash 游戏存在多帧时间线（我知道我应该避免使用时间线） 游戏的重点是点击式冒险。当您进入和离开房间时，您能够拾取的对象会相应地生成和销毁。现在我的问题是当进入第 14 帧（从第 12 帧访问）时，它会创建一张纸，如果您有其他物品，您可以拿起它。现在我的问题是当您不能或不拿起纸并返回第 12 帧时（仅退出到第 12 帧），您无法单击任何其他对象，并且您基本上被卡在第 12 帧。离开和进入其他房间时，它可以正常工作，但由于某种原因，它在第 14 帧的纸上不能正常工作。

我删除对象的代码如下

在我的 Main.as Documentclass 中，我有一个在游戏开始后立即调用的函数，它执行以下操作

```
if (lastframe == 14)
{
    trace (prop.numChildren);
    while (prop.numChildren )
    {
        prop.removeChildAt(0);
    }
} 
```

lastframe 变量是在从帧移动时建立的

```
function exitKantine(event:MouseEvent):void
{
    Main.lastframe = 14;
    gotoAndStop(12);
} 
```

删除道具的功能实际上将其删除，但随后会导致所有其他可点击对象不可用。

感谢您查看我的问题并提前感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T04:15:39.997

我想说不是删除孩子，而是在开头添加一次，在开头添加所有侦听器，然后切换可见性，而不是每次想要隐藏它时都尝试添加和 removeChild。使用一个数组，这样你就可以同时发生一些事情。

像这样的东西：

私有函数 init():void

```
{

assignVars();
addListeners();

  stage.addChild   // make sure this is in document class or you are passing stage to the class using it

}

for (var i = 0; i < _thingsAry.length; i++)
{

if (_thingsAry[i] == 14)
{
    _thingsAry[i].visible = false;
    trace("the visibility of _thingsAry[" + i + "] is " + _thingsAry[i].visible
}
} 
```

# android - android listview在使用Activity而不是listActivity实现时不会出现

> ID：14437131
> 
> 赞同：0
> 
> 时间：2013-01-21T10:59:07.267
> 
> 标签：android, android-layout, android-listview

我想将**listview 放入布局**中，我只想使用**Activity 类，而不是 listActivity**，我看到了这两个问题

[第一的](https://stackoverflow.com/questions/6698731/listview-without-listactivity)

[第二](https://stackoverflow.com/questions/2242136/how-can-i-implement-a-listview-without-listactivity-use-only-activity)

我完全按照他们所说的做了，但列表视图中仍然没有任何内容

Java 代码

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class FoodsMenu extends Activity {

    String foods[] = { "Betza" };
    ListView lvFoods;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.foodsmenu);
        initialize();
    }

    private void initialize() {
        // TODO Auto-generated method stub
        lvFoods = (ListView) findViewById(R.id.lvFoods);
        lvFoods.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, foods));

    }

} 
```

布局代码`foodsmenu.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/lvFoods"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#333333"
        android:fillViewport="true" >
    </ListView>

    <LinearLayout
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ffffff"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvA"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="A"
            android:textColor="#025f7c"
            android:textSize="13dp" />

        <TextView
            android:id="@+id/tvB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="B"
            android:textColor="#025f7c"
            android:textSize="13dp" />

        <TextView
            android:id="@+id/tvC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="C"
            android:textColor="#025f7c"
            android:textSize="13dp" />

        <TextView
            android:id="@+id/tvD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="D"
            android:textColor="#025f7c"
            android:textSize="13dp" />

    </LinearLayout>

</LinearLayout> 
```

请问我的作品有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:20:42.290

![在此处输入图像描述](../Images/41f597745bb58a2c262c59774a50692d.png)

检查附加的图像。这是 samsung galxy 选项卡的屏幕截图，仅包含您的代码及其工作。

下面是我测试的完整代码。

导入android.app.Activity；导入android.os.Bundle；导入 android.widget.ArrayAdapter；导入 android.widget.ListView；

```
public class TestSamplesActivity extends Activity {
 String foods[] = { "Betza", "Betza1", "Betza2", "Betza3", "Betza4" };
    ListView lvFoods;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.foodsmenu);
        initialize();
    }

    private void initialize() {
        // TODO Auto-generated method stub
        lvFoods = (ListView) findViewById(R.id.lvFoods);
        lvFoods.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, foods));

    }
} 
```

食物菜单.xml。

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
<ListView
    android:id="@+id/lvFoods"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#333333"
    android:fillViewport="true" >
</ListView>

<LinearLayout
    android:layout_width="40dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="#ffffff"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvA"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="A"
        android:textColor="#025f7c"
        android:textSize="13dp" />

    <TextView
        android:id="@+id/tvB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="B"
        android:textColor="#025f7c"
        android:textSize="13dp" />

    <TextView
        android:id="@+id/tvC"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="C"
        android:textColor="#025f7c"
        android:textSize="13dp" />

    <TextView
        android:id="@+id/tvD"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="D"
        android:textColor="#025f7c"
        android:textSize="13dp" />

</LinearLayout>

</LinearLayout> 
```

显现

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".TestSamplesActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

如果有任何遗漏，请与您的代码进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:35:39.587

*   将listview的width="match_parent"和linear的width="40dp"替换为0dp
*   相应地调整您的权重，例如列表为 0.8，线性为 0.2 等

# android - 具有静态选定位置的 Android 列表视图

> ID：14437132
> 
> 赞同：0
> 
> 时间：2013-01-21T10:59:07.537
> 
> 标签：android, listview, gallery

我正在开发需要自定义列表视图的应用程序...

列表视图应该像某种垂直画廊。在图库中，所选项目始终位于中心。

在我的应用程序中，我只使用导航键或遥控器。所以没有弹跳或常规滚动效果。

例如，我需要始终选择列表中的第二个元素。如果我想向上移动，所有元素都会向上滚动一个位置，并且必须更改选定的项目，但在屏幕上的相同位置，就像之前的选定项目一样。

这和画廊只有垂直的一样。

有没有一种简单的方法可以做到这一点？是否有垂直画廊实施？如何使画廊小部件垂直？或者如何自定义列表视图以使其行为？

天呐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:06:14.317

尝试在 ListView 上设置 onClick 侦听器

```
ListView listView1=(ListView) findViewById(R.id.listView1); 
```

然后实现一个类类 SearchItemClickListener 实现 OnItemClickListener

并设置 listview.onItemClickListenr 您将获得位置和视图。

```
 Hope this helps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:36:19.143

您可以通过使用获取当前可见的第一个位置，

```
mListView.getFirstVisiblePosition(); 
```

在获取当前可见位置及其各自的数据后，您可以执行您想要的任务（即在获​​取缩略图后显示大图像或类似的东西）。

**或者**

如果您不想仅依赖第一个或最后一个位置并想选择其他一些可见行，那么您可以执行以下操作，

```
 public View getView(int position, View convertView, ViewGroup parent)
    {

        int visiblePosition = position % nObjects; // nObjects if the total number of objects to display

        if(visiblePosition == yourDesiredPosition){

         // do your custom work here.

        }

    } 
```

这是[垂直幻灯片放映](https://github.com/blessenm/SlideshowDemo)的演示，

希望这会给您一些有关实现功能的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:34:40.990

我已经使用 ListView 项目上的 setSelected() 方法管理了这个......并管理关键侦听器。没有找到更聪明的方法来处理这个问题。

# java - 从 PduRequest 获取短消息

> ID：14437135
> 
> 赞同：4
> 
> 时间：2013-01-21T10:59:31.587
> 
> 标签：java, sms, smpp

我正在使用[cloudhopper-smpp](https://github.com/twitter/cloudhopper-smpp)通过 SMPP 接收短信。在实现 a 之后`DefaultSmppSessionHandler`，SessionHandler 正在接收 PDU 请求（在被覆盖的`firePduRequestReceived`方法中）。

是否有任何帮助类/实用程序可以从`PduRequest`类型中提取 SMS `deliver_sm`？找不到任何`PduRequest`获取器来访问 SMS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T09:14:47.427

找到了答案。

```
 if (pduRequest.getCommandId() == SmppConstants.CMD_ID_DELIVER_SM) {
         DeliverSm mo = (DeliverSm) pduRequest;
         int length = mo.getShortMessageLength();
         Address source_address = mo.getSourceAddress();
         Address dest_address = mo.getDestAddress();
         byte[] shortMessage = mo.getShortMessage();
         String SMS= new String(shortMessage);
        } 
```

# html - 我如何设置 ol 小数的样式？

> ID：14437137
> 
> 赞同：0
> 
> 时间：2013-01-21T10:59:39.067
> 
> 标签：html, css, html-lists

我需要能够添加紫色圆圈背景并仅更改`ol li`十进制 html 元素中数字的颜色。

如果没有任何额外的标记，这可能吗？我尝试过背景、列表样式图像等，但似乎都没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:06:29.073

我使用另一个`span`元素来格式化每个数字的背景`li`。[您可以在 JSBin 上](http://jsbin.com/abamat/3/edit)查看演示

# php - Amazon S3 获取特定对象以及其中的文件和文件夹的大小

> ID：14437138
> 
> 赞同：3
> 
> 时间：2013-01-21T10:59:41.340
> 
> 标签：php, amazon-s3

我将我的每个用户数据存储在一个存储桶中，并将他的用户名对象存储在一个存储桶中。就像我的桶是“my.bucket/bob1”“my.bucket/bob2”等等。我可以使用 Amazon S3 获取存储桶的大小。`$s3->get_bucket_filesize($bucket,true);` 但我需要计算我尝试使用的“my.bucket/bob1”的大小

```
$s3->get_object_filesize($bucket, "bob1"); 
```

但这仅返回该对象的大小，并且为 0，因为在我的客户端我将其视为文件夹。

但是我需要以一种有效的方式来获取用户文件夹级别的大小，以节省成本和时间。

**编辑：**

使用下面的代码但这很慢，我有数千个从 1KB 到 1GB+ 的文件，而且这段代码花费了太多时间。

```
 function get_size($bucket,$path,$s3){
    $size = 0;

    $response = $s3->list_objects($bucket,array(
    'prefix' => $path.'/'

));
        foreach ($response->body as $object)
        {
            //print_r($object);
             $object->Key.'('.$object->Size.')</br>';
            $size  = $size+$object->Size;

        }
       // $size = number_format($size / 1024 / 1024, 2); 

        return $size;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-19T15:40:31.110

您可以使用以下代码获取文件夹大小。如果其中没有文件，这将返回 0，否则这将汇总文件夹中所有文件的大小，并以 GB、MB 或 KB 为单位返回大小。

```
public function FolderSize($folder) {
    $s3 = S3Client::factory(array(
                'key' => "your key",
                'secret' => "your secret key",
    ));

    $size = 0;
    $bucket = "your bucket name";
    $objects = $s3->getIterator('ListObjects', array(
        "Bucket" => $bucket, // or env('AWS_BUCKET')
        "Prefix" => $folder
    ));
    foreach ($objects as $object) {
        $size = $size+$object['Size'];
    }

    return $this->formatSizeUnits($size);

}
public function formatSizeUnits($bytes) {
    if ($bytes >= 1073741824) {
        $bytes = number_format($bytes / 1073741824, 2) . ' GB';
    } elseif ($bytes >= 1048576) {
        $bytes = number_format($bytes / 1048576, 2) . ' MB';
    } elseif ($bytes >= 1024) {
        $bytes = number_format($bytes / 1024, 2) . ' KB';
    } elseif ($bytes > 1) {
        $bytes = $bytes . ' bytes';
    } elseif ($bytes == 1) {
        $bytes = $bytes . ' byte';
    } else {
        $bytes = '0 bytes';
    }
    return $bytes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T10:42:42.290

使用以下两个函数：

首先检索所有对象：

```
$objs = $awsobject->fetchObjs('folderpath/','bucket_name'); 
```

二是获取检索到的对象的大小

```
$used = $awsobject->folderSizeRawPrettyFromSource($objs); 
```

它将以 MB 为单位返回大小。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-21T15:33:17.917

[请使用getObjectInfo](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation#getObjectInfo)尝试以下代码。

```
$objInfo = $s3->getObjectInfo($bucket, "bob1");
echo $objInfo['size']; 
```

# javascript - SlickGrid 列选择器：设置默认列以从更大的列表中显示

> ID：14437140
> 
> 赞同：5
> 
> 时间：2013-01-21T10:59:49.810
> 
> 标签：javascript, slickgrid

我目前正在使用 SlickGrid 并允许用户使用 ColumnPicker 选择要显示的列。

按照[http://mleibman.github.com/SlickGrid/examples/example4-model.html](http://mleibman.github.com/SlickGrid/examples/example4-model.html)上的示例，我已经能够很好地工作。

我不确定的下一步是是否可以选择在第一次渲染时显示的默认列列表。

例如，假设我有一个包含 5 列的数组，声明如下：

```
{
                    name: "Name"
                    field: "Name"
                    id: "Name" 
                    sortable: true
                    minWidth: 120
                    editor: Slick.Editors.Text
                }, 
                {
                    name: "Address"
                    field: "Address" 
                    id: "Address"
                    sortable: true
                    minWidth: 175
                    editor: Slick.Editors.Text
                },
                {
                    name: "Town"
                    field: "Town"
                    id: "Town"
                    sortable: true
                    minWidth: 80
                    editor: Slick.Editors.Text
                }, 
                {
                    name: "Country"
                    field: "Country"
                    id: "Country"
                    sortable: true
                    minWidth: 80
                    editor: Slick.Editors.Text
                }, 
                {
                    name: "Network"
                    field: "Network"
                    id: "Network"
                    sortable: true
                    minWidth: 80
                    editor: Slick.Editors.Text
                } 
```

目前，所有这些列都将显示出来，并且可以选择隐藏在 ColumnPicker 中。我正在寻找的功能是，例如，说我只希望显示列名称、地址和网络，但仍然让其他列作为 ColumnPicker 中的选项。

这是到位还是有实现这一目标的可用方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T14:32:13.707

对于任何可能遇到此问题的人，我找到了一个可行但可能不是最好的解决方案。

它本质上使用 2 个单独的数组，1 个包含要渲染的默认列，另一个包含您可以选择的所有列的名称，包括默认列数组。

渲染时，我用默认列的数组实例化我的网格：

`@Grid = new Slick.Grid(@ElementId, @Data, @DefaultColumns, @GridOptions)`

然后在设置列选择器时，使用所有列的数组：

`columnpicker = new Slick.Controls.ColumnPicker(@Columns, @Grid, @GridOptions)`

# ios - 在相机应用程序中单击“使用时保存照片”按钮

> ID：14437141
> 
> 赞同：0
> 
> 时间：2013-01-21T10:59:55.450
> 
> 标签：ios, xcode, camera, uiimagepickercontroller

我当前的代码是：

```
- (IBAction)cameraButtonAction:(id)sender {   
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.allowsEditing = NO;
    picker.sourceType = (sender == cameraButton) ? UIImagePickerControllerSourceTypeCamera : UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentModalViewController:picker animated:YES]; 
} 
```

这是调出默认相机，但是当我选择`use`它时不会保存图片。我努力了 ：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
    [self dismissModalViewControllerAnimated:YES];
} 
```

我看过的每个教程，他们都使用 a 制作了一个自定义相机应用程序，`UIImageView`但这不是我想要做的，我不想在应用程序中显示图像并希望保留默认的相机功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:34:48.070

你的代码是正确的。但是你没有设置委托

您在这里缺少一行：

```
picker.delegate = self; 
```

您需要在您的`cameraButtonAction`方法中添加它。

```
- (IBAction)cameraButtonAction:(id)sender
{   
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsEditing = NO;
    picker.sourceType = (sender == cameraButton) ? UIImagePickerControllerSourceTypeCamera : UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentModalViewController:picker animated:YES]; 
} 
```

# android - Android XML Parsing 技术选择

> ID：14437147
> 
> 赞同：1
> 
> 时间：2013-01-21T11:00:09.577
> 
> 标签：android, xml-parsing

android 中有 DOM 、 SAX 和 XmlPull 解析等方法。我如何决定在特定情况下必须使用哪种解析？请建议在特定情况下哪个 1 更优化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:22:24.503

我正在给你一些关于 SAX 和 Dom Parser 的信息。

Java 中的 SAX XML 解析器

SAX 代表用于 XML 解析的简单 API。这是一个基于事件的 XML 解析，它逐步解析 XML 文件，非常适合大型 XML 文件。SAX XML Parser 在遇到开始标记、元素或属性时触发事件，并相应地进行解析。推荐使用 SAX XML 解析器来解析 Java 中的大型 xml 文件，因为它不需要在 Java 中加载整个 XML 文件，它可以读取小部分的大型 XML 文件。Java 提供对 SAX 解析器的支持，您可以使用 SAX 解析器解析 Java 中的任何 xml 文件，我在这里介绍了使用 SAX 解析器读取 xml 文件的示例。在 Java 中使用 SAX Parser 的一个缺点是，与 DOM Parser 相比，使用 SAX Parser 在 Java 中读取 XML 文件需要更多代码。

DOM 和 SAX XML 解析器之间的区别 以下是 Java 中 DOM 解析器和 SAX 解析器之间的一些高级差异：

1) DOM 解析器将整个 xml 文档加载到内存中，而 SAX 仅将 XML 文件的一小部分加载到内存中。

2) DOM 解析器比 SAX 更快，因为它访问内存中的整个 XML 文档。

3) Java 中的 SAX 解析器比 DOM 解析器更适合大型 XML 文件，因为它不需要太多内存。

4) DOM 解析器适用于文档对象模型，而 SAX 是基于事件的 xml 解析器。

这就是 Java 中 SAX 和 DOM 解析器之间的区别，现在取决于您要选择哪种 XML 解析器。如果 XML 文件足够小，我建议使用 DOM 解析器而不是 SAX 解析器；如果您不知道要处理的 xml 文件的大小或它们很大，我建议使用 SAX 解析器。

还有用于 XML 解析的 XMLPullParser，但我没有更多的想法，因为我没有使用它。

# java - AWS 中的 Flex 通信失败

> ID：14437155
> 
> 赞同：0
> 
> 时间：2013-01-21T11:00:22.033
> 
> 标签：java, apache-flex, amazon-s3, amazon-elastic-beanstalk

我正在使用 java + blazeds + flex。在我的电脑上一切正常，

访问 localhost:8080/project。

- 问题 -

1 - 我将我的项目上传到 Amazon Elastic Beanstalk

2 - 我运行我的弹性应用程序

3 - 我尝试登录我的应用程序（信息发送到后端，Java）

4 - 我收到此错误，故障代码：Client.Error.MessageSend

- 我知道的 -

*   当我输入 xxxx.elasticbeanstalk.com/messagebroker/amf 时，我的消息代理看起来不错

（白屏）

*   将跨域文件放在我的项目根目录上，但我收到相同的错误

这是我的 crossdomain.xml：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="*" to-ports="*"/>
    <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

-

似乎 AWS 正在阻止从 flex 到 java 的访问，有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:26:02.573

我弄清楚了问题所在。当您在本地运行项目时，您需要

提供上下文根。在 Flash Builder 上，此信息位于项目 > 属性 >

Flex 服务器，以及“根 URL”和“上下文根”字段。但是当你运行你的

服务器主机上的应用程序，比方说 www.yoursite.com，您不需要上下文根。

所以你的“根 URL”应该是“http://localhost:8080/”和“上下文根”为空。后

更改您的上下文根目录，删除您的 java projet 上的所有文件并编译您的 flex

Flash Builder 上的文件。

# javascript - 使用 phonegap 与 facebook 集成

> ID：14437156
> 
> 赞同：0
> 
> 时间：2013-01-21T11:00:24.527
> 
> 标签：javascript, facebook, phonegap-plugins

我正在使用带有phonegap的sencha touch。我最近遇到了我的应用程序的问题，即它需要与 facebook 集成。我正在关注链接

```
https://github.com/davejohnson/phonegap-plugin-facebook-connect 
```

用于连接到 facebook。我按照教程做所有事情，但是当我在 XCode 中运行 aap 时发现错误。错误如下。

```
Lexical or Preprocessor Issue 'Facebook.h' file not found. 
```

我陷入了困境。对此有任何想法吗？任何帮助，将不胜感激。谢谢

我正在我的 plist 文件中进行此更改..

```
 <strong><strong>
    <key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>com.swenggco.facebook.myscheme</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fb362599863837976</string>
            </array>
        </dict>
    </array>
</strong></strong> 
```

此代码是在关闭 dict 标签之前编写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:25:37.880

确保您已从已弃用的标头文件夹中添加标头**(DeprecatedHeaders)**。这些可以在**FacebookSDK.framework/Versions/A/DeprecatedHeaders**下找到。我很难在我的应用程序中完成这项工作。我不得不尝试两次才能看到输出。请尝试此步骤。清理构建并运行它。

# tfs - TFS 本地与云

> ID：14437157
> 
> 赞同：1
> 
> 时间：2013-01-21T11:00:25.893
> 
> 标签：tfs, azure-devops

我刚开始使用 Team Foundation 服务器并阅读了不同的教程，然后在默认云服务器上进行了尝试。如前所述，我们最多只能免费使用团队基金会服务器，最多 5 名成员。这就是为什么我想在我的服务器上设置 TFS。

请建议我应该去吗？

在云上使用 TFS 而不是在我自己的本地服务器上使用它有什么好处吗？

还有什么好的教程可以在我的机器上设置 TFS 并为我的其他团队成员远程启用它吗？（我正在关注[这个](http://blog.hinshelwood.com/installing-tfs-2012-on-server-2012-with-sql-2012/)）。

祖克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:29:52.933

TF 服务是一种快速启动和运行的好方法，无需担心基础架构、备份等。您失去的是一些自定义、实验室管理和 SSRS 报告，[更多信息](http://blogs.msdn.com/b/slange/archive/2013/01/17/team-foundation-server-vs-team-foundation-service.aspx)：

![在此处输入图像描述](../Images/be94d93b6da8ff64103eb5ae8db0f911.png) 所以使用哪一种取决于你的情况。

有关安装 TFS 的教程

看看我的 2 **Guides** about installed TFS 2012 and 2010，你会找到分步教程，向你解释你应该做什么以及如何在进入下一个步骤之前验证每个步骤，他们有视频和包含所需每个详细步骤的文档。

我建议查看整个部分，因为有时用于配置不同 TFS 组件的服务帐户非常重要。

[TFS 2012 指南](http://tfs2012visualguide.codeplex.com/)

[TFS 2010 指南](http://tfs10enterprise.codeplex.com/)

# php - 在 URL 中保留一个 GET 变量

> ID：14437162
> 
> 赞同：3
> 
> 时间：2013-01-21T11:00:43.217
> 
> 标签：php, .htaccess, session, cookies, session-cookies

我有一个奇怪的问题，我相信你们中的大多数人都意识到这些问题是由开发人员无法控制的某些情况引起的！

我想弄清楚如何始终在 URL 中保留查询字符串参数。如果未设置参数，我希望将默认值附加到 URL ?param=something

我问了一个与此相关的先前问题，并且已经能够使用 htaccess 添加默认查询 - 但这仅适用于初始请求，而我需要确保它始终存在于地址中。

我正在考虑使用 cookie - 使用 PHP 设置，然后使用 .htaccess 进行查询。

所以，我问这是否可能，是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:40:00.557

在不更改所有 URL 的情况下，我看不到这是可能的，正如所讨论的那样，这是一种非常老套的方法。

我建议您给他们一个“特殊”按钮，用于复制链接。让他们使用此按钮来复制链接而不是 URL。然后，您可以在不入侵网站的情况下正确控制数据。

**编辑**：您“可以”添加一些 JQuery 以将所有链接附加到您的参数中。你有没有想过这个？

```
$(document).ready(function() {
  $('a[href]').each(function() {
    this.href = this.href + '?something=<?php echo $_SESSION["myparam"]; ?>'
  });
}); 
```

您可以从初始页面加载/会话中获取参数，但这需要您的用户启用 JS（现在大多数人都这样做）。

ps 未经测试的半伪代码。如果你决定走这条路，我可以正确地测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:07:58.093

`$_GET`和`$_POST`超全局变量不应该像这样使用。而且我不知道为什么需要它，但无论如何您都可以使用[Session](http://www.w3schools.com/php/php_sessions.asp)或[Cookies](http://www.w3schools.com/php/php_cookies.asp)获得所需的功能。您尝试做的事情是不切实际的。行业标准是使用会话和 cookie。试试看，我相信它肯定会帮助你。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:09:47.080

如果您使用的是 Apache 2，那么您可以添加一个重写规则，将 GET 参数附加到其 URL 中没有“param=...”的每个请求。类似（未经测试）：

```
RewriteCond %{QUERY_STRING} !(\A|&)param=
RewriteRule (.*) $1?param=defaultvalue [QSA] 
```

有关详细信息，请参阅[modrewrite 的文档](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)。如果您想将其限制为某个 URL，`RewriteCond`您可以添加另一个。`%{REQUEST_URI}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:15:53.697

我大约 3 个月前才学会了 php，所以我希望我不会带你走上一条路，这是我会尝试的。

* * *

编辑：自从我学习 php 到现在已经大约 5 个月了。我在此编辑之前的上一个版本仅“构建”了 get to append（它可能不起作用）。

```
if (!isset($_GET['param'])) {$_GET['param'] = 'something';} 

$var = '';
while ($other_gets = $_GET)
{
    foreach ($other_gets as $key=>$value)
    {
    if ($key = 'something') {}//do nothing we want the other gets
    else {$var .= '&'.$key.'='.$value;}
    }
}
$get = '?'.$user_param.$other_gets; 
```

preg_replace 你的扩展

```
$string = 'your webpage before output';
$patterns = array();
$patterns[0] = '/.html/';
$patterns[1] = '/.php/';
$patterns[2] = '/yoursite.com /';//with space
$replacements = array();
$replacements[0] = '.html'.$get;
$replacements[1] = '.php'.$get;
$replacements[2] = 'yoursite.com/index.php'.$get; 
```

然后打印你的字符串

```
echo preg_replace($patterns, $replacements, $string); 
```

# c# - 使用 .Invoke("setValue") 从 Silverlight WebResource 设置日期/时间表单字段

> ID：14437164
> 
> 赞同：1
> 
> 时间：2013-01-21T11:00:53.917
> 
> 标签：c#, silverlight, dynamics-crm

我尝试从 Silverlight Web 资源内部在我的表单上设置一个日期字段，但表单字段仍然为空：

```
var xrm = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
var page = (ScriptObject)xrm.GetProperty("Page");
var startdate = (ScriptObject)page.Invoke("getAttribute", "scheduledstart");
startdate.Invoke("setValue", DateTime.Now.ToUniversalTime().ToString("MM/dd/yyyy")); 
```

虽然上述代码适用于其他字段类型（字符串、int、OptionSet 等），但我尝试设置日期值的方式似乎存在错误。

* * *

*旁注：我不使用`dynamic`，因为在 MS CRM 在线环境中部署时它似乎不起作用（但在本地工作）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:39:04.793

您正在将日期格式化为字符串，因此它试图将字符串传递到 Javascript 日期字段中。只需将其作为 DateTime 传递。ScriptObject 类旨在正确地从 .Net 转换为 Javascript。 [参考这里](http://msdn.microsoft.com/en-us/library/cc645074%28v=vs.95%29.aspx)

```
startdate.Invoke("setValue", DateTime.Now); 
```

# c# - Windows Phone - 如何调出标准拨号盘？

> ID：14437166
> 
> 赞同：3
> 
> 时间：2013-01-21T11:00:58.793
> 
> 标签：c#, windows-phone-8, windows-phone

简而言之，如何调出拨号盘？

**编辑**

除了接受的答案之外，`InputScope`a 上的属性`TextBox`还可以设置为`TelephoneNumber`。

资料来源：[布兰肯博客](http://www.jeffblankenburg.com/2010/10/10/31-days-of-windows-phone-day-10-inputscope-textboxes/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:04:58.607

*实际上，似乎 the`PhoneCallTask`可能不会做你想做的事。*

如果不按照我原来的答案修订版拨打电话，我不确定这实际上是否可行。但是，您可以做的是在您自己的应用程序中模拟屏幕（您可以调出一个只显示有点像内置拨号盘的数字），然后用于`TextBox`实际拨打电话。`InputScope="TelephoneNumber"``PhoneCallTask`

~~您将使用 a`PhoneCallTask`来显示电话拨号器界面。~~

 ~~```
var phoneCallTask = new PhoneCallTask();
phoneCallTask.PhoneNumber = "";
phoneCallTask.Show(); 
```~~ 

~~[MSDN 上的电话呼叫任务。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.phonecalltask%28v=vs.105%29.aspx)~~

# c++ - 使用未压缩的音频录制可加快视频速度

> ID：14437168
> 
> 赞同：1
> 
> 时间：2013-01-21T11:01:01.577
> 
> 标签：c++, windows, encoding, libavcodec, libav

很长一段时间以来，我一直在令人满意地使用记录器（基于 muxer 示例）来处理各种格式。现在我需要使用未压缩的音频来处理 MJPEG 视频，并且我注意到录制文件中的视频速度相当快（比如快 10 倍）。音频还可以，如果我使用压缩的音频格式（如 mp3），视频就可以了。有谁知道为什么我使用未压缩音频（CODEC_ID_PCM_S16LE）时视频会加快速度？

# google-app-engine - 同类根实体的id

> ID：14437174
> 
> 赞同：0
> 
> 时间：2013-01-21T11:01:34.243
> 
> 标签：google-app-engine, objectify

据说自动生成的@Id Long id 在特定父级中是唯一的。这是否意味着相同类型的根实体可能具有相同的 id。如果这是真的，我如何确保同类的根实体没有相同的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:52:29.153

不，你为什么会这样想？实际上，根实体具有相同的（空）父实体，因此它们都将具有唯一的 ID。

# ruby-on-rails - rails 设计确认邮件

> ID：14437177
> 
> 赞同：2
> 
> 时间：2013-01-21T11:01:48.947
> 
> 标签：ruby-on-rails, devise, confirmation-email

我正在使用设备进行身份验证并能够发送确认电子邮件。我想知道是否有任何配置可用于在一定时间后使电子邮件中的确认链接失效？
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T11:10:10.390

看看[http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable) - 您正在寻找的配置选项是`confirm_within`. 确认令牌应在创建用户记录之前生成，即如果模型包含该`:confirmable`选项。

# android - 在 Android 中加载位图时出现内存不足问题

> ID：14437180
> 
> 赞同：2
> 
> 时间：2013-01-21T11:01:54.107
> 
> 标签：android, android-imageview, android-image, android-memory

我正在使用 Fedor 的代码（https://github.com/thest1/LazyList）来加载位图。根据我的要求，我修改了几行代码。每当堆内存超过阈值时，我就会出现内存不足错误。在同一主题上发布了各种问题。他们中的大多数人建议使用 SoftReference 和位图 recycle()。我正在使用 SoftReference，但我仍然面临问题。而且我对在哪里使用位图回收方法感到困惑。

MemoryCache.java

```
public class MemoryCache {

private static final String TAG = "MemoryCache";
private static Map<String, SoftReference<Bitmap>> cache=Collections.synchronizedMap(
        new LinkedHashMap<String, SoftReference<Bitmap>>(16,0.75f,false));//Last argument true for LRU ordering
private long size=0;//current allocated size
private long limit=30000000;//max memory in bytes

public MemoryCache(){

    long cacheSize = Runtime.getRuntime().maxMemory();
    setLimit(cacheSize);
}

public void setLimit(long new_limit){
    limit=new_limit;

}

public Bitmap get(String id){
    try{
        if(!cache.containsKey(id))
            return null;
        //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
        return cache.get(id).get();
    }catch(NullPointerException ex){
        ex.printStackTrace();
        return null;
    }
}

public void put(String id, Bitmap bitmap){
    try{
        if(cache.containsKey(id))
            size-=getSizeInBytes(cache.get(id).get());
        cache.put(id, new SoftReference<Bitmap>(bitmap));
        size+=getSizeInBytes(bitmap);
        checkSize();
    }catch(Throwable th){
        th.printStackTrace();
    }
}

private void checkSize() {
    Log.i(TAG, "cache size="+size+" length="+cache.size());

    if(size>limit+5000000){
       cache.clear();
        }
        Log.i(TAG, "Clean cache. New size "+cache.size());

}

public void clear() {
    try{
        //NullPointerException sometimes happen here http://code.google.com/p/osmdroid/issues/detail?id=78 
        cache.clear();
        size=0;
    }catch(NullPointerException ex){
        ex.printStackTrace();
    }
}

long getSizeInBytes(Bitmap bitmap) {
    if(bitmap==null)
        return 0;
    return bitmap.getRowBytes() * bitmap.getHeight();
}
} 
```

ImageLoader.java

```
public class ImageLoader {

MemoryCache memoryCache = new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews = Collections
        .synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService;
Handler handler = new Handler();
Context con;
ProgressBar pb;

public ImageLoader(Context context) {
    fileCache = new FileCache(context);
    this.con = context;
    executorService = Executors.newFixedThreadPool(5);
}

final int stub_id = R.drawable.icon_loading;

public void DisplayImage(String url, ImageView imageView, ProgressBar pb) {
    this.pb = pb;

    imageViews.put(imageView, url);
    Bitmap bitmap = memoryCache.get(url);
    if (bitmap != null) {
        pb.setVisibility(View.GONE);
        imageView.setImageBitmap(bitmap);

    } else {
        queuePhoto(url, imageView);

    }
}

private void queuePhoto(String url, ImageView imageView) {
    PhotoToLoad p = new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) {
    Bitmap result = null;

    File f = fileCache.getFile(url);

    // from SD cache
    Bitmap b = decodeFile(f);
    if (b != null)
        return b;

    // from web
    try {
        Bitmap bitmap = null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) imageUrl
                .openConnection();
        conn.setInstanceFollowRedirects(true);
        InputStream is = conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        is.close();
        conn.disconnect();
        bitmap = decodeFile(f);
        //Log.v("bitmap size", bitmap.getByteCount() + "");
        //bitmap.recycle();
        return bitmap;
    } catch (Throwable ex) {
        ex.printStackTrace();
        if (ex instanceof OutOfMemoryError)
            memoryCache.clear();
        return null;
    }

}

// decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f) {
    try {

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        FileInputStream stream1 = new FileInputStream(f);
        BitmapFactory.decodeStream(stream1, null, o);
        stream1.close();

        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;

        BitmapFactory.Options o2 = new BitmapFactory.Options();

        if (f.length() > 300000) {

            o2.inSampleSize = 4;
        } else if (f.length() > 200000) {

            o2.inSampleSize = 2;
        } else {

            o2.inSampleSize = 1;
        }
        FileInputStream stream2 = new FileInputStream(f);
        Bitmap bitmap = BitmapFactory.decodeStream(stream2, null, o2);
        stream2.close();
        return bitmap;
    } catch (FileNotFoundException e) {
    } catch (IOException e) {
        memoryCache.clear();
        e.printStackTrace();
    }
    return null;
}

// Task for the queue
private class PhotoToLoad {
    public String logo_url;
    public ImageView imageView;

    public PhotoToLoad(String u, ImageView i) {
        logo_url = u;
        imageView = i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;

    PhotosLoader(PhotoToLoad photoToLoad) {
        this.photoToLoad = photoToLoad;
    }

    @Override
    public void run() {
        if (imageViewReused(photoToLoad))
            return;
        Bitmap bmp = getBitmap(photoToLoad.logo_url);
        // Log.v("bitmap size",bmp.getByteCount()+"");

        memoryCache.put(photoToLoad.logo_url, bmp);

        if (imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad);
        //bmp.recycle();
        // Activity a=(Activity)photoToLoad.imageView.getContext();
        // a.runOnUiThread(bd);
        handler.post(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad) {
    String tag = imageViews.get(photoToLoad.imageView);
    if (tag == null || !tag.equals(photoToLoad.logo_url))
        return true;
    return false;
}

// Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable {
    Bitmap bitmap;
    PhotoToLoad photoToLoad;

    public BitmapDisplayer(Bitmap b, PhotoToLoad p) {
        bitmap = b;
        photoToLoad = p;
    }

    public void run() {
        if (imageViewReused(photoToLoad))
            return;
        if (bitmap != null) {
            //bitmap.recycle();
            // pb.setVisibility(View.GONE);
            photoToLoad.imageView.setImageBitmap(bitmap);
            //bitmap.recycle();
        } else {
            // photoToLoad.imageView.setImageResource(stub_id);
            // pb.setVisibility(View.VISIBLE);
        }
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

} 
```

附上 Logcat 输出：

```
01-21 16:54:47.348: D/skia(20335): --- decoder->decode returned false
01-21 16:54:47.408: I/dalvikvm-heap(20335): Clamp target GC heap from 69.438MB to 64.000MB
01-21 16:54:47.408: D/dalvikvm(20335): GC_FOR_ALLOC freed 67K, 5% free 62767K/65416K, paused 54ms, total 54ms
01-21 16:54:47.408: I/dalvikvm-heap(20335): Forcing collection of SoftReferences for 228816-byte allocation
01-21 16:54:47.468: I/dalvikvm-heap(20335): Clamp target GC heap from 69.438MB to 64.000MB
01-21 16:54:47.468: D/dalvikvm(20335): GC_BEFORE_OOM freed <1K, 5% free 62767K/65416K, paused 64ms, total 64ms
01-21 16:54:47.468: E/dalvikvm-heap(20335): Out of memory on a 228816-byte allocation.
01-21 16:54:47.468: I/dalvikvm(20335): "pool-21-thread-4" prio=5 tid=63 RUNNABLE
01-21 16:54:47.468: I/dalvikvm(20335):   | group="main" sCount=0 dsCount=0 obj=0x42e4e878 self=0x67693b00
01-21 16:54:47.468: I/dalvikvm(20335):   | sysTid=20520 nice=0 sched=0/0 cgrp=apps handle=1735190240
01-21 16:54:47.468: I/dalvikvm(20335):   | state=R schedstat=( 2851815000 268321000 1461 ) utm=276 stm=9 core=0
01-21 16:54:47.468: I/dalvikvm(20335):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
01-21 16:54:47.468: I/dalvikvm(20335):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:529)
01-21 16:54:47.468: I/dalvikvm(20335):   at com.main.util.ImageLoader.decodeFile(ImageLoader.java:211)
01-21 16:54:47.468: I/dalvikvm(20335):   at com.main.util.ImageLoader.getBitmap(ImageLoader.java:85)
01-21 16:54:47.468: I/dalvikvm(20335):   at com.main.util.ImageLoader.access$1(ImageLoader.java:79)
01-21 16:54:47.468: I/dalvikvm(20335):   at com.main.util.ImageLoader$PhotosLoader.run(ImageLoader.java:244)
01-21 16:54:47.468: I/dalvikvm(20335):   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
01-21 16:54:47.468: I/dalvikvm(20335):   at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-21 16:54:47.468: I/dalvikvm(20335):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-21 16:54:47.468: I/dalvikvm(20335):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-21 16:54:47.468: I/dalvikvm(20335):   at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T07:32:12.967

我的答案有两个（大）部分。第一部分更直接地针对您的问题，第二部分退后一步，因为我分享了我如何学会实施自己的解决方案，该解决方案更多地针对第一次遇到此问题的人。

不要使用`bitmap.recycle()`，因为你真的不应该这样做。虽然这会清除用于该位图的内存，但您可能会遇到仍然在某处使用位图的问题。

您还应该`WeakReference`在任何可能对象挂在位图上的地方使用（加载任务、ImageViews 等）。从[文档](http://developer.android.com/reference/java/lang/ref/WeakReference.html)中：

> 弱引用对于一旦不再引用（从外部）就应该自动删除其条目的映射很有用。SoftReference 和 WeakReference 之间的区别在于决定清除引用并将其入队的时间点：
> 
> *   应尽可能晚地清除 SoftReference 并将其加入队列，也就是说，以防 VM 面临内存不足的危险。
> *   一旦已知弱引用，就可以清除 WeakReference 并将其加入队列。

理论上两者都应该有效，但我们有一个小问题：Java 终结器。它们不能保证及时运行，不幸的是，这就是我们的小朋友 Bitmap 正在清除它的内存的地方。如果有问题的位图创建得足够慢，GC 可能有足够的时间来识别我们的`SoftReference`或`WeakReference`对象并将其从内存中清除，但实际上并非如此。

简而言之，在处理使用诸如位图之类的终结器的对象时，很容易超过垃圾收集器（我认为一些 IO 类也使用它们）。A`WeakReference`将比 a 更好地帮助我们解决计时问题`SoftReference`。是的，如果我们可以在内存中保存一堆图像以获得疯狂的性能，那就太好了，但是许多 Android 设备根本没有内存来执行此操作，而且我发现无论缓存有多大如果您不尽快清除引用，则仍然会遇到此问题。

就您的缓存而言，我要做的第一个更改是放弃您自己的内存缓存类，而只使用`LruCache`在 Android 兼容性库中找到的缓存类。并不是说您的缓存有问题或任何东西，而是它消除了另一个令人头疼的问题，它已经为您完成了，您不必维护它。

否则，**我看到的最大问题是`PhotoToLoad`对 ImageView 的强引用**，但是整个类中的更多内容可以使用一些调整。

可以在 Android 的博客[Multithreading for Performance](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)上找到一篇简短但写得很好的博客文章，解释了在下载图像时保存对正确 ImageView 的引用的好方法。您还可以在 Google 的 I/O 应用程序上看到这种做法，该应用程序的源代码可用。我在第二部分对此进行了一些扩展。

无论如何，与其尝试将正在加载的 URL 映射到它打算使用 Collection 的 ImageView，不如按照上面博客文章中所做的操作是一种优雅的方式来引用有问题的 ImageView，同时避免使用错误地回收了 ImageView。当然，这是一个很好的例子，说明 ImageView 是如何被弱引用的，这意味着我们的垃圾收集器可以更快地释放内存。

好的。现在是第二部分。

在我继续更笼统地讨论这个问题并变得更加冗长之前，我会说你走在正确的轨道上，我的其余答案可能涉及你已经涵盖并了解的很多领域，但我希望它也能让新人受益，所以请耐心等待。

如您所知，这是 Android 上一个非常常见的问题，之前已经介绍过相当长的解释（*在终结器上摇拳*）。在连续数小时将自己的头撞在墙上之后，尝试了加载器和缓存器的各种实现，无休止地观察日志中的“堆增长/清理竞赛”，并使用各种实现分析内存使用和跟踪对象，直到我的眼睛流血，我已经清楚了一些事情：

1.  如果您发现自己试图告诉 GC 何时触发，那么您就走错了路。
2.  **如果您尝试调用`bitmap.recycle()`UI 中使用的位图（例如 ImageViews），您将陷入痛苦的世界。**
3.  这是如此令人头疼的一个主要原因是因为关于如何解决问题的这个主题有太多的错误信息。那里的许多教程或示例在理论上看起来不错，但在实践中绝对是垃圾（我上面提到的所有分析和跟踪都证实了这一点）。真是个迷宫啊！

你有两个选择。首先是使用一个知名且经过测试的库。二是学习完成这项任务的正确方法，并在此过程中获得一些有见地的知识。对于某些库，您可以同时执行这两个选项。

如果您查看[这个问题](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)，您会发现一些库可以完成您正在尝试做的事情。还有一些很好的答案指向非常有用的学习资源。

我自己选择的路线比较困难，但我痴迷于理解解决方案，而不仅仅是使用它们。如果你想走同样的路线（这是值得的），你应该首先遵循谷歌的教程[“高效显示位图”](http://developer.android.com/training/displaying-bitmaps/index.html)。

如果没有，或者您想研究 Google 自己在实践中使用的解决方案，请查看在其 I/O 2012 应用程序[中处理位图加载和缓存的实用程序类。](http://code.google.com/p/iosched/source/browse/#git%2Fandroid%2Fsrc%2Fcom%2Fgoogle%2Fandroid%2Fapps%2Fiosched%2Futil)特别要学习以下课程：

*   [DiskLruCache.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/DiskLruCache.java)
*   [ImageCache.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/ImageCache.java)
*   [ImageFetcher.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/ImageFetcher.java)
*   [ImageWorker.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/ImageWorker.java)
*   [`public static ImageFetcher getImageFetcher(final FragmentActivity activity)`在 UIUtils.java](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/util/UIUtils.java#294)

当然，研究一些活动，看看他们如何使用这些类。在官方的 Android 教程和 I/O 2012 应用程序之间，我能够成功地推出自己的应用程序，以更具体地适应我正在做的事情并了解实际发生的情况。您也可以随时研究我在上面链接的问题中提到的一些库，以查看一些略有不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:07:22.717

使用后回收位图。你可以这样做

```
bitmap.recycle(); 
```

# javascript - 我怎样才能创建真正的循环？

> ID：14437188
> 
> 赞同：0
> 
> 时间：2013-01-21T11:02:21.557
> 
> 标签：javascript, css

```
 var resimler = Array('uludağ.jpg', 'yesilturbe.jpg', 'taksi.jpg');
        var sayi = resimler.length - 1;
        var now = 0;
        function slideback()
        {
            $('body').css('background-image','url(' + resimler[now] + ')');
            now = now + 1;
            if(now==sayi)
            {
                now = 0;
            }
        }

        while(true){
            $(function() {
                    setTimeout(slideback, 2200);
            });
        } 
```

我上面的 Javascript 代码，下面的 css 代码..

```
body{
                background-image:url('taksi.jpg');
                background-size:100%; 
                background-attachment:fixed;
                -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
                src='taksi.jpg',
                sizingMethod='scale')";
                filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
                src='taksi.jpg',
                sizingMethod='scale');
            } 
```

我想每 2200 毫秒更改一次背景图像。如您所见，我有 3 张图片，我想创建无限循环

> 而（真）{}

但是我的firefox掉了下来。我怎样才能为我的目的创建真正的循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:03:54.827

你不需要循环。代码的“最直接”翻译是`setTimeout(slideback, 2200)`在方法结束时调用`slideback`。这几乎是在说“并在大约 2 秒内再次做同样的事情）。

更好的是使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

```
setInterval(slideback, 2200); 
```

请记住，JS 和 HTML 交互几乎是基于事件的。这意味着您几乎从不希望直接在代码中使用无限循环（对于*大多数*现代开发环境来说都是如此）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T11:04:44.477

`while(true)`将使您的浏览器进入一个可怕的无限循环并锁定它。不要那样做。

查看 Javascript`setInterval`方法（例如`setInterval(slideback, 2200)`）以每 2200 毫秒重复一次该方法。

# asp-classic - 经典 ASP：RecordSet 字段没有价值

> ID：14437195
> 
> 赞同：4
> 
> 时间：2013-01-21T11:02:54.757
> 
> 标签：asp-classic, vbscript, field, ado, recordset

我不是真正的 ASP 开发人员，所以有点迷茫。

我有以下数据访问代码：

```
sSQL = "SELECT answer_id, company_name, old_access_company_name, answer, flag_asker_notified FROM Q01_ask_sheiiba_answer_company2 WHERE question_id="& sQuestion_id &" ORDER BY answer_id"
rs.open sSQL, conn  
DO WHILE NOT rs.EOF
    Response.Write(rs.Fields("answer"))
    rs.MoveNext
LOOP 
```

我已经通过在调用之前将其输出到响应来测试是否正确构建了 sql 查询。它产生以下查询：

```
SELECT answer_id, company_name, old_access_company_name, answer, flag_asker_notified 
FROM Q01_ask_sheiiba_answer_company2 
WHERE question_id=988 
ORDER BY answer_id 
```

当我将该确切查询复制到 sql management studio 并运行它时，我得到了 5 行的预期结果，并且每行包含每个单元格中的数据，但是，当我通过上面的代码运行它时，我得到相同的 5 行单元格数据，除了为`answer`空的列！

我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T23:17:24.767

您可能想尝试两件事：

将您的文本字段放在查询的末尾。例如：

选择 answer_id、company_name、old_access_company_name、flag_asker_notified、answer

如果这没有给您结果，您可能想尝试：

```
WHILE NOT rs.EOF
theanswer=rs("answer")
Response.Write(theanswer)
rs.movenext
wend 
```

文本和备注字段可能会对 ASP 造成一些破坏。

**编辑**：您可以尝试的另一件事是：

```
rs.CursorLocation = adUseClient 
```

或者

```
rs.CursorLocation = 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T23:26:50.347

问题是 ODBC 驱动程序不能以字符串的形式访问大文本块；您需要将它们作为[分块的 BLOB 数据](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681747%28v=vs.85%29.aspx)进行访问。

我建议转储 ODBC 连接并[直接使用 OLE-DB 驱动程序进行连接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677227%28v=vs.85%29.aspx)。这将让您访问该列，就好像它只是另一个 varchar 列一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-16T09:27:39.203

我只是有一个类似的问题（我认为）。我将 varchar 字段转换为文本。当我这样做时，我发现文本字段似乎从我选择的记录集中“消失”了。我的情况是，我发现您只能引用一次文本字段。在那之后，它似乎消失了。因此，对于文本字段，我现在只需将其移动到字符串变量中，然后对字符串进行操作。这解决了我的问题。

约翰

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T13:11:52.930

有同样的问题，在这里找到了解决方案[http://www.4guysfromrolla.com/aspfaqs/ShowFAQ.asp?FAQID=80](http://www.4guysfromrolla.com/aspfaqs/ShowFAQ.asp?FAQID=80)
基本上，当您打开记录集（不是 connection.execute）时，使用选项 adOpenKeyset（val 1）和 adUseClient （val 3），并且文本字段应该是 strSql
示例中字段列表中的最后一个：rs.Open strSql、dbConn、adOpenKeyset、adUseClient

# iphone - 在 iTunesConnect 上添加应用购买只允许免费订阅

> ID：14437198
> 
> 赞同：6
> 
> 时间：2013-01-21T11:03:02.137
> 
> 标签：iphone, ios, objective-c, app-store-connect, iphone-developer-program

在 App Purchase 中只允许我`Free Subscription`在 App 中创建，任何机构都可以帮我解决它。

我知道你可以说这个问题是重复的，但我没有从这些链接中找到任何帮助。

所以请认真对待这个问题并回答。谢谢。

[免费订阅是唯一的应用内购买类型](https://stackoverflow.com/questions/13619332/free-subscription-is-the-only-in-app-purchase-type) ![在此处输入图像描述](../Images/73626e40fc9b2b99f0d1725642325ecb.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T11:09:54.800

您必须同意 iTune Connect 付费应用程序的条款和条件。转到 iTuneConnect 主屏幕并选择**联系人、税务和银行业务**，您必须在此处发送**iOS 付费应用**请求。接受条款，完成。现在您将能够在应用内购买中看到所有类型。

# java - 使用谷歌驱动器使用 java web 应用程序存储/检索文件

> ID：14437201
> 
> 赞同：4
> 
> 时间：2013-01-21T11:03:08.533
> 
> 标签：java, web-applications, google-drive-api, restlet

我们想开发一个基于 restlet 的 java web 应用程序，用于存储和检索来自 Google Drive 的文件。现在，数据文件存储在本地磁盘上，当用户单击链接时，文件会从服务器上的本地磁盘呈现。我们希望将文件移动到**google 驱动器**，该驱动器将自动处理云存储和磁盘大小限制。我们想要的是，当最终用户单击链接时，文件被下载和/或直接在其浏览器中透明地打开，即没有任何额外的身份验证步骤或用户输入。我们的应用程序应该在后台处理身份验证。Google Drive API 从今天开始支持吗？任何相关文档/文章/示例应用程序？

谢谢，深

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:45:51.813

如果用户使用`webContentLink`文件资源登录到他们的 Google 帐户，您可以实现此目的。

[Google Drive SDK 网站](https://developers.google.com/drive/manage-downloads#downloading_files_in_a_browser)上有一个示例。

# android - 布局花费太多时间来加载android

> ID：14437203
> 
> 赞同：3
> 
> 时间：2013-01-21T11:03:12.667
> 
> 标签：android, android-layout

我的布局需要太多时间才能在实际设备上加载大约 2-3 秒。我的布局有很多视图，范围从 40-60 视图。我也在检查各种条件`OnCreate()`。所以任何人都可以建议我如何更快地加载我的活动。而且大多数视图都有背景图片。实际上，我的整个布局都是`ImageView`. 下面是代码片段`onCreate()`

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fueladd_layout);

    face2=Typeface.createFromAsset(getAssets(),"digital.ttf");
    typewriter=Typeface.createFromAsset(getAssets(),"veteran_typewriter.ttf");

    Display display=getWindowManager().getDefaultDisplay();
    width=display.getWidth();
    height=display.getHeight();

    dbc=new Databaseconnection(this);
    sdb=dbc.getWritableDatabase();
    sdb=dbc.getReadableDatabase();

    c = Calendar.getInstance();
    fyear = c.get(Calendar.YEAR);
    month = c.get(Calendar.MONTH);
    day = c.get(Calendar.DAY_OF_MONTH);
    date();

    mp1=MediaPlayer.create(getBaseContext(), R.raw.button_click);
    newcarmenu=(RelativeLayout) findViewById(R.id.newcarmenu);
    topmenu=(RelativeLayout) findViewById(R.id.topmenu);
    newnotelayout=(RelativeLayout) findViewById(R.id.newnotelayout);
    layout_mileage=(RelativeLayout) findViewById(R.id.layout_mileage);

    img_tabdashboard=(ImageView) findViewById(R.id.img_tabdashboard);
    img_tabdashboard.setOnClickListener(this);

    img_tabexpenses=(ImageView) findViewById(R.id.img_tabexpenses);
    img_tabexpenses.setImageDrawable(img_tabexpenses.getResources().getDrawable(R.drawable.tabexpensespressed));
    img_tabexpenses.setOnClickListener(this);

    img_tabfinancial=(ImageView) findViewById(R.id.img_tabfinancial);
    img_tabfinancial.setOnClickListener(this);

    img_tabtrip=(ImageView) findViewById(R.id.img_tabtrip);
    img_tabtrip.setOnClickListener(this);

    img_menu=(ImageView) findViewById(R.id.img_menu);
    img_menu.getLayoutParams().width=(int) (width*0.109375);
    img_menu.setOnClickListener(this);

    img_preferences=(ImageView) findViewById(R.id.img_preferences);
    img_preferences.getLayoutParams().width=(int) (width*0.109375);
    img_preferences.setOnClickListener(this);

    img_mycar=(ImageView)findViewById(R.id.img_mycar);
    img_mycar.setOnClickListener(this);

    imgnotesdone=(ImageView)findViewById(R.id.imgnotesdone);
    imgnotesdone.setOnClickListener(this);

    img_aboutus=(ImageView)findViewById(R.id.img_aboutus);
    img_aboutus.setOnClickListener(this);

    img_editcar=(ImageView)findViewById(R.id.img_editcar);
    img_editcar.setOnClickListener(this);

    img_exit=(ImageView)findViewById(R.id.img_exit);
    img_exit.setOnClickListener(this);

    img_fuel=(ImageView) findViewById(R.id.img_fuel);
    img_fuel.setBackgroundResource(R.drawable.fuel2);
    img_fuel.setOnClickListener(this);

    img_toll=(ImageView) findViewById(R.id.img_toll);
    img_toll.setOnClickListener(this);

    img_parking=(ImageView) findViewById(R.id.img_parking);
    img_parking.setOnClickListener(this);

    img_puc=(ImageView) findViewById(R.id.img_puc);
    img_puc.setOnClickListener(this);

    img_oil=(ImageView) findViewById(R.id.img_oil);
    img_oil.setOnClickListener(this);

    img_service=(ImageView) findViewById(R.id.img_service);
    img_service.setOnClickListener(this);

    img_add=(ImageView) findViewById(R.id.img_save);
    img_add.setOnClickListener(this);

    img_view=(ImageView) findViewById(R.id.img_view);
    img_view.setOnClickListener(this);

    img_addnewcar=(ImageView) findViewById(R.id.img_addnewcar);
    img_addnewcar.setOnClickListener(this);

    img_addnewbike=(ImageView) findViewById(R.id.img_addnewbike);
    img_addnewbike.setOnClickListener(this);

    img_usedcar=(ImageView) findViewById(R.id.img_usedcar);
    img_usedcar.setOnClickListener(this);

    img_usedcar=(ImageView) findViewById(R.id.img_usedbike);
    img_usedcar.setOnClickListener(this);

    img_menuexit=(ImageView) findViewById(R.id.img_menuexit);
    img_menuexit.setOnClickListener(this);

    img_loc_picker = (ImageView) this.findViewById(R.id.img_loc_picker);
    img_loc_picker.setOnClickListener(this);

    txt_title=(TextView) findViewById(R.id.txttitle);
    txt_title.setTypeface(face2,Typeface.BOLD);
    txt_title.setText("FUEL");

    layout_list=(RelativeLayout) findViewById(R.id.layout_list);

    animationBottomIn = AnimationUtils.loadAnimation(layout_list.getContext(), R.anim.slide_in_up);
    animationBottomOut = AnimationUtils.loadAnimation(layout_list.getContext(), R.anim.slide_out_down);

    animationRightIn = AnimationUtils.loadAnimation(layout_list.getContext(), R.anim.slide_in_right);
    animationRightOut = AnimationUtils.loadAnimation(layout_list.getContext(), R.anim.slide_out_right);

    list_type= (ListView) findViewById(R.id.list_type);
    list_type.setOnItemClickListener(this);

    list_location= (ListView) findViewById(R.id.list_location);
    list_location.setOnItemClickListener(this);

    txt_type_loc=(TextView) findViewById(R.id.txt_type_loc);
    txt_type_loc.setTypeface(typewriter);

    img_arrow_down = (ImageView) this.findViewById(R.id.img_arrow_down);
    img_arrow_down.setOnClickListener(this);

    txtselectdate=(TextView) findViewById(R.id.txt_currentdate);
    txtselectdate.setTypeface(typewriter);

    txtnewnotes=(TextView) findViewById(R.id.txtnewnotes);
    txtnewnotes.setTypeface(typewriter);

    txtcdate=(TextView) findViewById(R.id.txtcdate);
    txtcdate.setTypeface(typewriter);
    txtcdate.setOnClickListener(this);

    txtcurrentkm=(TextView) findViewById(R.id.txt_currentkm);
    txtcurrentkm.setTypeface(typewriter);

    txtpreviouskm=(TextView) findViewById(R.id.txt_previouskm);
    txtpreviouskm.setTypeface(typewriter);

    txtfuel=(TextView) findViewById(R.id.txt_quantity);
    txtfuel.setTypeface(typewriter);

    txtrate=(TextView) findViewById(R.id.txt_rate);
    txtrate.setTypeface(typewriter);

    txtamount=(TextView) findViewById(R.id.txt_amount);
    txtamount.setTypeface(typewriter);

    txtmileage=(TextView) findViewById(R.id.txt_mileage);
    txtmileage.setTypeface(typewriter);

    txtlocation=(TextView) findViewById(R.id.txt_location);
    txtlocation.setTypeface(typewriter);

    txtbrand=(TextView) findViewById(R.id.txt_brand);
    txtbrand.setTypeface(typewriter);

    txtnote=(TextView) findViewById(R.id.txt_note);
    txtnote.setTypeface(typewriter);

    editbrand=(EditText) findViewById(R.id.edit_brand);
    editbrand.setTypeface(typewriter);

    editlocation=(EditText) findViewById(R.id.edit_location);
    editlocation.setTypeface(typewriter);

    editnewnotes=(EditText) findViewById(R.id.editnewnotes);
    editnewnotes.setTypeface(typewriter);

    img_date_picker = (ImageView) this.findViewById(R.id.img_date_picker);
    img_date_picker.setOnClickListener(this);

    img_loc_picker = (ImageView) this.findViewById(R.id.img_loc_picker);
    img_loc_picker.setOnClickListener(this);

    img_brand_picker = (ImageView) this.findViewById(R.id.img_brand_picker);
    img_brand_picker.setOnClickListener(this);

    imgnotepicker = (ImageView) this.findViewById(R.id.imgnotepicker );
    imgnotepicker .setOnClickListener(this);

    //this will set the text of edit view
    //the 1st record value is retrived and displayed
    //if no record is present than editview is empty

    loc_select_Query = "select  item From FuelLocation";
    Cursor cursor_loc = sdb.rawQuery(loc_select_Query, null);
    int count=cursor_loc.getCount();
    cursor_loc.moveToFirst();
    if(count>1)
    {
        editlocation.setText(cursor_loc.getString(0));
    }

    //this will set the text of edit view of brand
    //the 1st record value is retrived and displayed
    //if no record is present than editview is empty

    brand_select_Query = "select  brand From FuelBrand";
    Log.i("select_Query", brand_select_Query);
    Cursor cursor_brand = sdb.rawQuery(brand_select_Query, null);
    int count1=cursor_brand.getCount();
    cursor_brand.moveToFirst();
    if(count1>1)
    {
        editbrand.setText(cursor_brand.getString(0));
    }

    editcurrentkm=(EditText) findViewById(R.id.edit_currentkm);
    editcurrentkm.setTypeface(typewriter);

    editpreviouskm=(EditText) findViewById(R.id.edit_previouskm);
    editpreviouskm.setTypeface(typewriter);
    editpreviouskm.setOnFocusChangeListener(new OnFocusChangeListener()
    {
        public void onFocusChange(View v, boolean hasFocus) 
        {
            if(!hasFocus)
            {
                String select="Select Fuel_CurrentKm from Fuel ";
                Cursor selectcur = sdb.rawQuery(select, null);
                selectcur.moveToLast();
                Log.i("Record Count",Integer.toString(selectcur.getCount()));

                if(selectcur.getCount()>0)
                {   
                    Log.i("currentkm",editcurrentkm.getText().toString());
                    Log.i("currentkm",editcurrentkm.getText().toString());
                    if(Integer.valueOf(editpreviouskm.getText().toString())<Integer.valueOf(selectcur.getString(0).toString()))
                    {
                        msg="Enter previous odometer greater than"+selectcur.getString(0).toString();
                        showToastMessage(msg);
                    }
                }
            }
        }
    });
    editcurrentkm.setOnFocusChangeListener(new OnFocusChangeListener() 
    {
        public void onFocusChange(View v, boolean hasFocus) 
        {
            if(!hasFocus)
            {
                ckm=editcurrentkm.getText().toString();

                if(ckm.equalsIgnoreCase(""))
                {
                    msg="Enter Current Odometer reading";
                    showToastMessage(msg);
                }
                else
                {
                    if(Integer.valueOf(editcurrentkm.getText().toString())>Integer.valueOf(editpreviouskm.getText().toString()))
                    {
                        if(pcount>1)
                        {
                            currentkm=Integer.valueOf(ckm);
                            calmileage=(currentkm-previouskm)/pquantity;
                            editmileage.setText(Float.toString(calmileage));
                            Log.i("Mileage",Float.toString(calmileage));
                        }
                    }
                    else 
                    {
                        msg="Enter Current Odometer reading Greater than Previous Odometer reading";
                        showToastMessage(msg);
                    }

                }
            }
        }
    });
    editfuel=(EditText) findViewById(R.id.edit_quantity);
    editfuel.setTypeface(typewriter);

    editrate=(EditText) findViewById(R.id.edit_rate);
    editrate.setTypeface(typewriter);
    editrate.setOnFocusChangeListener(new OnFocusChangeListener() 
    {
        public void onFocusChange(View arg0, boolean arg1) 
        {
            if(!arg1)
            {
                if(!editfuel.getText().toString().equalsIgnoreCase(""))
                {
                    fquantity=editfuel.getText().toString();
                    quantity=Float.valueOf(fquantity);
                    if(!editrate.getText().toString().equalsIgnoreCase(""))
                    {
                        frate=editrate.getText().toString();
                        total=quantity*Float.valueOf(frate);
                        editamount.setText(Float.toString(total));

                    }                       
                }   
            }
        }
    });

    editamount=(EditText) findViewById(R.id.edit_amount);
    editamount.setTypeface(typewriter);
    editamount.setOnFocusChangeListener(new OnFocusChangeListener() 
    {
        public void onFocusChange(View arg0, boolean arg1) 
        {
            if(!arg1)
            {
                if(!editfuel.getText().toString().equalsIgnoreCase(""))
                {
                    fquantity=editfuel.getText().toString();
                    quantity=Float.valueOf(fquantity);
                    if(!editamount.getText().toString().equalsIgnoreCase(""))
                    {
                        famount=editamount.getText().toString();
                        rate=Float.valueOf(famount)/quantity;
                        editrate.setText(Float.toString(rate));
                    }                       
                }   
            }
        }
    });

    editmileage=(EditText) findViewById(R.id.edit_mileage);
    editmileage.setTypeface(typewriter);

    editnote=(EditText) findViewById(R.id.edit_note);
    editnote.setTypeface(typewriter);

    SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    readsound=myPrefs.getBoolean(SOUND,sound);
    car_id= myPrefs.getInt(MY_CAR,count);
    Log.i("car id",Integer.toString(car_id));
    if(car_id==0)
    {
        car_id=1;
        Log.i("Car_ID",Long.toString(car_id));
    }

    Intent editintent=getIntent();
    String action=editintent.getAction();
    Log.i("Action",action);

    if(action.equalsIgnoreCase("com.curioussolutions.autoistdiary.fuel.EDIT"))
    {
        Log.i("inside","edit");
        record=(Integer) getIntent().getSerializableExtra("Id");
        Log.i("Record",Integer.toString(record));

        Cursor editcursor = sdb.rawQuery("select Fuel_Date,Fuel_CurrentKm,Fuel_PreviousKm,Fuel_Quantity,Fuel_Rate,Fuel_Amount,Fuel_Milege,Fuel_Brand,Fuel_Location,Fuel_Note from Fuel where Fuel_Id="+record, null);
        count=editcursor.getCount();

        editcursor.moveToFirst();

        udate=editcursor.getString(0).toString();
        Log.i("date",udate);
        txtcdate.setText(udate);
        Log.i("date",udate);

        currentkm=Integer.valueOf(editcursor.getString(1).toString());
        editcurrentkm.setText(Integer.toString(currentkm));
        Log.i("currentkm",Integer.toString(currentkm));

        pkm=Integer.valueOf(editcursor.getString(2).toString());
        Log.i("previouskm",Integer.toString(pkm));
        editpreviouskm.setText(Integer.toString(pkm));
        Log.i("previouskm",Integer.toString(pkm));

        quantity=Float.valueOf(editcursor.getString(3).toString());
        editfuel.setText(Float.toString(quantity));
        Log.i("quantity",Float.toString(quantity));

        rate=Float.valueOf(editcursor.getString(4).toString());
        editrate.setText(Float.toString(rate));
        Log.i("rate",Float.toString(rate));

        total=Float.valueOf(editcursor.getString(5).toString());
        editamount.setText(Float.toString(total));
        Log.i("cost",Float.toString(total));
        if(record>1)
        {
            calmileage=Float.valueOf(editcursor.getString(6).toString());
            editmileage.setText(Float.toString(calmileage));
            Log.i("mileage",Float.toString(calmileage));
        }
        if(record==1)
        {
            layout_mileage.setVisibility(RelativeLayout.GONE);
        }
        location=editcursor.getString(7).toString();
        editlocation.setText(location);
        Log.i("location",location);

        fbrand=editcursor.getString(8).toString();
        editbrand.setText(fbrand);
        Log.i("date",fbrand);

        notes=editcursor.getString(9).toString();
        editnote.setText(notes);
        Log.i("notes",notes);
    }
    if(action.equalsIgnoreCase("com.curioussolutions.autoistdiary.fuel.ADD"))
    {
        Log.i("inside","add");
        String select1="select Fuel_CurrentKm,Fuel_Quantity,Fuel_Rate from Fuel";
        Cursor cur = sdb.rawQuery(select1, null);
        pcount=cur.getCount()+1;
        cur.moveToLast();

        if(pcount>1)
        {   
            previouskm=Integer.valueOf(cur.getString(0).toString());
            pquantity=Float.valueOf(cur.getString(1).toString());
            rate=Float.valueOf(cur.getString(2).toString());
            editpreviouskm.setText(Integer.toString(previouskm));
            editrate.setText(Float.toString(rate));
        }
        else
        {
            layout_mileage.setVisibility(RelativeLayout.GONE);
            editpreviouskm.setText("0");
        }
        date();
        txtcdate.setText(date);

    }
    else
    {
        layout_mileage.setVisibility(RelativeLayout.GONE);
        editpreviouskm.setText("0");
        date();
        txtcdate.setText(date);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:09:06.860

这里有一个很好的解释，如何优化你的 UI 使其加载速度更快：[Romain Guy 的 Android Performance in Practice](http://www.curious-creature.org/2012/12/06/android-performance-in-practice/)。我建议你看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:10:09.913

尝试使用线程，或者如果无法在您的方法 OnCreate 中观察是否有调用在布局完成渲染之前消耗资源的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:12:12.507

让 onCreateComplete 尽快完成。不要拿着它来加载你的视图。启动 AsyncTasks 以加载 findViewById 中的视图。然后在 asyntasks onPostsExecute 中，您可以为视图设置值，例如将图像设置为图像视图等。

值得一试。

# c# - 从类/对象列表中查找匹配字符串

> ID：14437207
> 
> 赞同：2
> 
> 时间：2013-01-21T11:03:30.933
> 
> 标签：c#, string, arrays

我有一个字符串数组：

```
string[] PropertyIds= new string[5]; 
```

A`List`类( `Property`)

```
List<Property> properties = new List<Property>(); 
```

该类`Property`具有以下字段：（ `PropertyId`字符串）和`PropertyDesc`（字符串）

我必须在数组 PropertyIds 中找到 PropertyId 的所有值，这些值不在 List 属性中。

例如

```
 string[] PropertyIds= new string[] { "one", "two", "three" };
List<Property> properties = new List<Property>()
{ 
  new Property("one","This is p1"),
  new Property("Five","This is p5"),   
  new Property("six","This is p6"),
}; 
```

那么我的结果应该是**二**和**三**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T11:06:09.970

使用[Enumerable.Except](http://msdn.microsoft.com/en-us/library/bb300779.aspx)从两个序列中获取差异：

```
var result = PropertyIds.Except(properties.Select(p => p.PropertyId)); 
```

# android - 如何在不使用 ksoap 的情况下从 android 调用 dot net webservice？

> ID：14437210
> 
> 赞同：1
> 
> 时间：2013-01-21T11:03:43.827
> 
> 标签：android, web-services

有没有官方的方法可以在不使用 ksoap 库的情况下从 Android 调用 dot net webservice，官方我的意思是 Android 团队推荐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:05:29.673

```
String METHOD_NAME = "----------------"   // change
String SOAP_ACTION = "---------------";   // change
String NAMESPACE = "----------"
String URL="------------"; 

SoapObject Request = new SoapObject(NAMESPACE,METHOD_NAME);
Request.addProperty("  ","  ");
.
.
.
Object response;
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.encodingStyle = SoapEnvelope.ENC;

envelope.dotNet = true;
envelope.setOutputSoapObject(Request);
HttpTransportSE httptransport = new HttpTransportSE(URL);  // HTTP call that URl

httptransport.debug=true;

httptransport.call(SOAP_ACTION,envelope);    // change
response = envelope.getResponse();

System.out.println("The response is:\n\n "+response);

String resp=response.toString();
System.out.println(resp); 
```

# javascript - 如何修复这些计算？

> ID：14437218
> 
> 赞同：2
> 
> 时间：2013-01-21T11:04:17.173
> 
> 标签：javascript

我正在取一个数字，除以 100，然后将其乘以 100 以使其返回原始值。然而，一些返回值有点偏离。

```
var num = 57,
    num = num / 100,

    // this should return the number to the original
    // however in this example it returns 56.99999999999999
    num = num * 100; 
```

这是一个小提琴：http: [//jsfiddle.net/njsdW/](http://jsfiddle.net/njsdW/)

事实上，我想做的只是在数字前面添加两个 0，但我并不总是确定小数点在哪里。

编辑：我的解决方案：

```
var num = 57,
    num = (parseFloat((num / 100).toPrecision(15)));

    // this should return the number to the original
    num = (parseFloat((num * 100).toPrecision(15))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:16:18.100

您必须保存数字的精度并在除以 100 后恢复

```
prec = num.length;

// adjust for decimal point
if (num.indexOf('.') != -1)
    prec--;

// adjust for leading zero
if (num < 1)
    prec--;

num /= 100;
self.find('h2').append(num.toPrecision(prec)); 
```

[JSFiddle](http://jsfiddle.net/njsdW/44/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:11:53.947

您可以使用 JavaScript bignum 实现，如[javascript-bignum](https://github.com/jtobey/javascript-bignum)或[gmp.js](https://github.com/kripken/gmp.js)来获得任意精度。如果你想使用 gmp.js，你必须用 C/C++ 重写你的应用程序或者为 JavaScript 编写 gmp.js 绑定。作为回报，您将从 GNU GMP 获得久经考验的可靠性和最佳算法效率。

# asp.net - 无法在我的asp.net mvc 4中嵌入youtuve视频

> ID：14437219
> 
> 赞同：0
> 
> 时间：2013-01-21T11:04:28.323
> 
> 标签：asp.net, asp.net-mvc, youtube

我已经安装了`Microsoft.Windows.Helpers`参考，并在我的视图中写了以下内容：

```
@Video.Flash(path:"http://www.youtube.com/watch?v=5k-mqaaT5RQ&list=UUCd6RY4fxnRbI7VGeg5rajA&index=1",
width:"400",
height:"600",
play:true,
loop:true,
menu: false,
quality: "medium",
scale: "exactfit",
windowMode: "transparent") 
```

但是当我打开视图时，页面会持续加载一段时间，然后没有显示视频，那么可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:10:07.980

由于视频未本地存储在您的网站上，您是否最好对视频进行 iframe？

`@Video.Flash(path: /media/videoname.swf)`当我将视频本地存储在我的托管站点上时，我只使用过。

```
<iframe width="400" 
        height="600" 
        src="  NEED YOUR EMBED TAG HERE" 
        frameborder="0" 
        allowfullscreen></iframe> 
```

您可以找到更多信息[http://www.asp.net/web-pages/tutorials/files,-images,-and-media/10-working-with-video](http://www.asp.net/web-pages/tutorials/files,-images,-and-media/10-working-with-video)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:15:14.327

视频的路径应该是格式`youtube.com/v/{id}`，不是`youtube.com/watch?v={id}`所以试试

```
@Video.Flash(path:"http://www.youtube.com/embed/5k-mqaaT5RQ&list=UUCd6RY4fxnRbI7VGeg5rajA&index=1",
width:"400",
height:"600",
play:true,
loop:true,
menu: false,
quality: "medium",
scale: "exactfit",
windowMode: "transparent") 
```

# eclipse - 如何从 Eclipse 项目资源管理器中隐藏 src 文件夹？

> ID：14437227
> 
> 赞同：33
> 
> 时间：2013-01-21T11:04:48.847
> 
> 标签：eclipse, package-explorer

我为我的项目使用 Maven 标准目录布局。

下图是我要自定义的视图的“不是那么最小的工作示例”的典型项目浏览器视图。

![我的典型项目资源管理器视图布局](../Images/9020446a55a9b3f1d832e764544741e6.png)

如您所见，所有相关文件夹都标记为源文件夹，因此无需显示 src 文件夹层次结构，因为它显示在包含的库下方。

所以问题是，我怎样才能摆脱多余的 src 文件夹显示，即如何只显示源文件夹和库？

我玩过视图的过滤器和内容配置，但找不到方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T08:47:16.607

单击右上角的第三个按钮，然后单击“过滤器”，然后选中“命名过滤器模式”并写入“src”。然后隐藏第二个 src 文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:24:50.710

这实际上没有添加两次，因为您使用的是资源管理器视图，只需将其更改为导航器视图，您的问题就会得到解决。

[检查这篇文章可能对您有更多帮助，它与您的回答无关，但显示如何选择导航器视图](https://stackoverflow.com/questions/12558896/how-to-display-bin-folder-of-android-project-in-eclipse/12558950#12558950) 希望这会对您有所帮助:)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-26T09:52:25.397

[Andreas B. 的回答](https://stackoverflow.com/a/15289959/1744774)中的描述是指*Package Explorer*视图。在*Project Explorer*视图中，它是：

*查看菜单*→*过滤器和自定义...* →*用户过滤器*→*新建*→ *`src`*→ 激活/检查 →`OK`

# symfony - 预期的已知功能，得到“MD5”

> ID：14437229
> 
> 赞同：1
> 
> 时间：2013-01-21T11:04:51.530
> 
> 标签：symfony, doctrine-orm

我需要做这样的搜索：

```
//Project\MyBundle\Repository

$query = $this->getEntityManager()->getRepository('ProjectMyBundle:Product')->createQueryBuilder('p')
        ->where('MD5(p.id) = :id')
        ->setParameter('id', $id )
        ->getQuery()
        ->getSingleResult(); 
```

我得到了 MD5 上的 id，并且必须在数据库中搜索 MD5 上的 id。

当我进行搜索时，我出现了，给了我以下错误：

> [语法错误] 第 0 行，第 51 列：错误：预期的已知函数，得到 'MD5'

表示lib：

[https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Md5.php](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Md5.php)

但是我已经把它放在文件夹里了，现在我需要知道它应该放在哪里。

我在 Symfony 2.1.6 中使用 MySQL，Doctrine 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:28:37.317

您需要将 MD5 注册为自定义 DQL 函数：

```
# app/config/config.yml
doctrine:
    orm:
        # ...
        entity_managers:
            default:
                # ...
                dql:
                    string_functions:
                        MD5: Acme\HelloBundle\DQL\MD5Function 
```

有关详细信息，请参阅：[http ://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html](http://symfony.com/doc/2.0/cookbook/doctrine/custom_dql_functions.html)

# wso2 - WSO2 BAM 2.1.0 安装

> ID：14437232
> 
> 赞同：1
> 
> 时间：2013-01-21T11:05:06.643
> 
> 标签：wso2

我已将 WSO2 Bam 2.1.0 安装到我的本地环境中，并且我已将我的日志重定向到 bam。我可以在 cassandra 上看到我的日志，但是当我尝试在 bam 上执行 service_stats 时出现异常。您可以在下面看到错误。

你有什么建议吗？

ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) 原因：org.h2.jdbc.JdbcSQLException：找不到列“D.ID”；SQL 语句：SELECT d.ID AS DATABASE_ID, d.NAME, d.TENANT_ID, s.NAME AS RSS_INSTANCE_NAME, s.SERVER_URL, s.TENANT_ID AS RSS_INSTANCE_TENANT_ID, d.TYPE FROM RM_SERVER_INSTANCE s, RM_DATABASE d WHERE s.ID = d。 RSS_INSTANCE_ID 和 d.TENANT_ID = ? [42122-140] 在 org.h2.message.DbException.getJdbcSQLException(DbException.java:327) 在 org.h2.message.DbException.get(DbException.java:167) 在 org.h2.message.DbException.get( DbException.java:144) 在 org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:127) 在 org.h2.expression.Alias.optimize(Alias.java:47) 在 org.h2.command.dml.Select .prepare(Select.java:738) 在 org.h2.command.Parser。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:25:36.040

你能把完整的异常跟踪吗？您是否将租户添加到 BAM 并且您是否在租户模式下运行？您在这里使用的端口偏移量是多少？

您可能需要使用正确的详细信息更新 $BAM_HOME/repository/conf/advanced/hive-rss-config.xml。如下所述：

rss-server-url - 您可以为此使用相同的 BAM 服务器/外部 BAM 服务器/存储服务器。请输入您要用于 RSS 的正确服务器。如果您只想在独立模式下运行，那么`https://127.0.0.1:9443+<port-offset>`/ 将起作用。

rss-server-admin-userName - 具有所有权限用户名的超级管理员/超级管理员用户。

rss-server-admin-password - 具有所有权限密码的超级管理员/超级管理员用户。

请重新启动服务器以反映更改。

# c# - 为什么 makecert 不制作 *valid* 证书？

> ID：14437237
> 
> 赞同：2
> 
> 时间：2013-01-21T11:05:27.480
> 
> 标签：c#, x509certificate, x509certificate2, makecert

我想为测试目的创建一个 X509 证书。该证书必须由 3 个开发人员在他们的本地计算机上共享（即所有人共享相同的证书，因此我们可以使用相同的指纹）。

因此，此证书中的私钥必须是可导出的。

我使用以下命令创建证书：

```
makecert -r -pe -n "CN=mytestsite.local" -b 01/01/2000 -e 01/01/2036 -ss my -sr localMachine -sky exchange localhost.cer 
```

此证书工作正常，但问题是调用 Certificates.Find 时 isValid 参数必须为 false...

```
 var store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
        store.Open(OpenFlags.ReadOnly);

        var cert = store.Certificates.Find(
                                X509FindType.FindByThumbprint,
                                Config.PdfCertificateThumbprint, 
                                false  //********************* This has to be false.
                              ).OfType<X509Certificate>().FirstOrDefault(); 
```

一旦我将该 IsValid 属性设置为 True，Find 方法就不再返回我的证书。为什么 makecert 会生成“无效”证书？或者我如何弄清楚为什么证书被视为无效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:07:28.540

嗯，这是因为它不是像互联网上使用的“真实”ssl 证书那样由“受信任的证书颁发机构”颁发。（例如由 VeriSign 发行）

您可以在本地执行的操作是在您的用户和/或本地计算机的受信任证书中手动添加证书。但是必须为使用它的每个人完成此过程，直到您获得由 CA（证书颁发机构）颁发的有效 SSL 证书。

但是您的问题指出了它仅用于开发目的的情况，因此您可以做的是将证书手动添加到 Trusted，或者您可以覆盖 .Net 中的证书验证机制并编写将认为您的证书有效的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:24:02.653

您可能想尝试以下设置，可在客户端配置中使用以绕过证书验证过程：

```
 <serviceCertificate>
      <authentication certificateValidationMode="None"
                      revocationMode="NoCheck" />
    </serviceCertificate> 
```

# linq - 将 LINQ 表达式谓词从一种类型更改为另一种类型

> ID：14437239
> 
> 赞同：3
> 
> 时间：2013-01-21T11:05:35.847
> 
> 标签：linq, entity-framework

我有两个不相关的课程。一种作为 API 公开，另一种由 3rd 方 API 在内部使用。

Entity 从我们的 API 中公开，而 EntityProvider 来自第 3 方程序集。

```
class Entity
{
  public A { get; set; }
}

class EntityProvider
{
  public A { get; set; }
} 
```

我们 API 的使用者将提供表单的谓词，`Expression <Func<Entity, bool>>`我需要对其进行修改，`Expression <Func<EntityProvider, bool>>`以便我可以将其传递给内部 3rd 方程序集。请帮助进行此转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:52:51.213

由于 .NET 中的表达式是不可变的，因此唯一的方法是重建整个表达式。为此，通常涉及从[ExpressionVisitor](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)类继承。根据您必须转换的表达式的复杂性，这可能非常复杂。

这是一个简单的访问者示例，它将使用简单的表达式（如 x=>x.Someproperty == somevalue ）。这只是一个让您入门的示例，它还没有完成或测试（例如，它不会处理表达式中的方法调用）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
//Type from which to convert
public class A
{
    public int Property1 { get; set; }
    public int Property2 { get; set; }
}

//Type to which we want the Expression converted
public class B
{
    public int Property1 { get; set; }
    public int Property2 { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        //the expression we want to convert expresion
        Expression<Func<A, bool>> expA = x => x.Property1 == 6 && x.Property2 == 3;

        var visitor = new ParameterTypeVisitor<A,B>(expA);
        var expB = visitor.Convert();
        var b = new B() { Property1 = 6, Property2 = 3 };

        //try the converted expression
        var result = expB.Compile().Invoke(b);

    }
}    

public class ParameterTypeVisitor<TFrom,TTo> : ExpressionVisitor
{

    private Dictionary<string, ParameterExpression> convertedParameters;
    private Expression<Func<TFrom, bool>> expression;

    public ParameterTypeVisitor(Expression<Func<TFrom,bool>> expresionToConvert )
    {
        //for each parameter in the original expression creates a new parameter with the same name but with changed type 
        convertedParameters = expresionToConvert.Parameters
            .ToDictionary(
                x => x.Name,
                x => Expression.Parameter(typeof (TTo), x.Name)
            );

        expression = expresionToConvert;
    }

    public Expression<Func<TTo,bool>> Convert()
    {
        return (Expression<Func<TTo, bool>>)Visit(expression);
    }

    //handles Properties and Fields accessors 
    protected override Expression VisitMember(MemberExpression node)
    {
        //we want to replace only the nodes of type TFrom
        //so we can handle expressions of the form x=> x.Property.SubProperty
        //in the expression x=> x.Property1 == 6 && x.Property2 == 3
        //this replaces         ^^^^^^^^^^^         ^^^^^^^^^^^            
        if (node.Member.DeclaringType == typeof(TFrom))
        {
            //gets the memberinfo from type TTo that matches the member of type TFrom
            var memeberInfo = typeof (TTo).GetMember(node.Member.Name).First();

            //this will actually call the VisitParameter method in this class
            var newExp = Visit(node.Expression);
            return Expression.MakeMemberAccess(newExp, memeberInfo);
        }
        else 
        {
            return base.VisitMember(node);
        }
    }

    // this will be called where ever we have a reference to a parameter in the expression
    // for ex. in the expression x=> x.Property1 == 6 && x.Property2 == 3
    // this will be called twice     ^                   ^
    protected override Expression VisitParameter(ParameterExpression node)
    {            
        var newParameter = convertedParameters[node.Name];
        return newParameter;
    }

    //this will be the first Visit method to be called
    //since we're converting LamdaExpressions
    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        //visit the body of the lambda, this will Traverse the ExpressionTree 
        //and recursively replace parts of the expression we for which we have matching Visit methods 
        var newExp = Visit(node.Body);

        //this will create the new expression            
        return Expression.Lambda(newExp,convertedParameters.Select(x=>x.Value));
    }        
} 
```

# android - 如何淡入 1 张图像淡出第 2 张图像？

> ID：14437245
> 
> 赞同：0
> 
> 时间：2013-01-21T11:06:03.603
> 
> 标签：android

我发现本教程[http://android-er.blogspot.com/2012/02/animate-fade-infade-out-by-changeing.html](http://android-er.blogspot.com/2012/02/animate-fade-infade-out-by-changing.html) 淡入淡出同一张图片 如何更改此代码以使用两个图片淡入淡出在 1 个图像中自动淡出第 2 个？？？

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.ImageView;

 public class AndroidAnimTranslateActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button buttonFadeOut = (Button)findViewById(R.id.fadeout);
    final ImageView image = (ImageView)findViewById(R.id.image);

     Animation animationFadeIn = AnimationUtils.loadAnimation(this, R.anim.fadein);

    image.startAnimation(animationFadeIn);
    animationFadeIn.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub

            image.startAnimation(animationFadeOut);

        }
    });
    final Animation animationFadeOut = AnimationUtils.loadAnimation(this,  
 R.anim.fadeout);
    buttonFadeOut.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            image.startAnimation(animationFadeOut);
        }});
 }
}

        <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
   android:layout_height="fill_parent"
  android:orientation="vertical" >

 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:text="@string/hello" />
 <Button
    android:id="@+id/fadein"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Fade In"/>
 <Button
    android:id="@+id/fadeout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Fade Out"/>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:gravity="center">

    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />

</LinearLayout>    

     </LinearLayout>

         <!-------fadein.xml-->>

        <?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android"
 android:interpolator="@android:anim/linear_interpolator">
 <alpha 
    android:fromAlpha="0.1" 
    android:toAlpha="1.0" 
    android:duration="2000" 
    />
     </set>

 <!--------fadeout.xml----->

               <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator">
<alpha 
    android:fromAlpha="1.0" 
    android:toAlpha="0.1" 
    android:duration="2000" 
    />
</set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:09:14.813

我认为你应该使用 Animationlistener：

```
image.startAnimation(animationFadeIn);
animationFadeIn.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub

                    image.startAnimation(animationFadeOut);

                }
            }); 
```

所以第二个动画将开始，而第一个动画将结束

# python - 根据输入文件名生成输出文件名

> ID：14437247
> 
> 赞同：0
> 
> 时间：2013-01-21T11:06:08.330
> 
> 标签：python

下面是从分子动力学轨迹数据中读取速度值的脚本。我有许多轨迹文件，其名称模式如下：

```
waters1445-MD001-run0100.traj
waters1445-MD001-run0200.traj
waters1445-MD001-run0300.traj
waters1445-MD001-run0400.traj
waters1445-MD001-run0500.traj
waters1445-MD001-run0600.traj
waters1445-MD001-run0700.traj
waters1445-MD001-run0800.traj
waters1445-MD001-run0900.traj
waters1445-MD001-run1000.traj
waters1445-MD002-run0100.traj
waters1445-MD002-run0200.traj
waters1445-MD002-run0300.traj
waters1445-MD002-run0400.traj
waters1445-MD002-run0500.traj
waters1445-MD002-run0600.traj
waters1445-MD002-run0700.traj
waters1445-MD002-run0800.traj
waters1445-MD002-run0900.traj
waters1445-MD002-run1000.traj 
```

每个文件有 200 帧数据进行分析。所以我计划以这样一种方式，该代码应该一个接一个地读取每个 traj 文件（如上所示），并提取速度值并写入特定文件（text_file = open("Output.traj.dat", "a") 对应于各自的输入轨迹文件。

所以我定义了一个名为'loops（mmm）'的函数，其中'mmm'是函数'loops'的轨迹文件名解析器。

```
#!/usr/bin/env python
'''
always put #!/usr/bin/env python at the shebang
'''
#from __future__ import print_function
from Scientific.IO.NetCDF import NetCDFFile as Dataset
import itertools as itx
import sys
#####################

def loops(mmm): 
  inputfile = mmm

  for FRAMES in range(0,200):
      frame = FRAMES
      text_file = open("Output.mmm.dat", "a")

      def grouper(n, iterable, fillvalue=None):
        args = [iter(iterable)] * n
        return itx.izip_longest(fillvalue=fillvalue, *args)

    formatxyz = "%12.7f%12.7f%12.7f%12.7f%12.7f%12.7f"
    formatxyz_size = 6
    formatxyzshort = "%12.7f%12.7f%12.7f"
    formatxyzshort_size = 3

    #ncfile = Dataset(inputfile, 'r')
    ncfile = Dataset(ppp, 'r')

    variableNames = ncfile.variables.keys()
    #print variableNames

    shape = ncfile.variables['coordinates'].shape
    '''
    do the header
    '''

    print 'title ' + str(frame)
    text_file.write('title ' + str(frame) + '\n')
    print "%5i%15.7e" % (shape[1],ncfile.variables['time'][frame])
    text_file.write("%5i%15.7e" % (shape[1],ncfile.variables['time']\
    [frame]) + '\n')

    '''
    do the velocities
    '''
    try:
        xyz = ncfile.variables['velocities'][frame]
        temp = grouper(2, xyz, "")

        for i in temp:
            z = tuple(itx.chain(*i))
            if (len(z) == formatxyz_size): 
                print formatxyz % z
                text_file.write(formatxyz % z + '\n')
            elif (len(z) == formatxyzshort_size): 
                print formatxyzshort % z
                text_file.write(formatxyzshort % z + '\n' )

    except(KeyError):
        xyz = [0] * shape[2] 
        xyz = [xyz] * shape[1]
        temp = grouper(2, xyz, "")

        for i in temp:
            z = tuple(itx.chain(*i))
            if (len(z) == formatxyz_size): 
                print formatxyz % z
            elif (len(z) == formatxyzshort_size): 
                print formatxyzshort % z
            x = ncfile.variables['cell_angles'][frame]
            y = ncfile.variables['cell_lengths'][frame]

 #text_file.close()

# program starts - generation of file name
for md in range(1,3):
   if md < 10:
      for pico in range(100,1100, 100):
        if  pico >= 1000:
            kkk = "waters1445-MD00{0}-run{1}.traj".format(md,pico)
            loops(kkk)
        elif pico < 1000:
            kkk = "waters1445-MD00{0}-run0{1}.traj".format(md,pico)
            loops(kkk)

        #print kkk 
```

在 (# program starts - generation of file name) 行，代码应该生成文件名并相应地调用函数并提取速度并将值转储到 (text_file = open("Output.mmm.dat", "一个”）

执行此代码时，程序正在运行，但遗憾的是无法根据输入轨迹文件名生成输出文件。

我希望输出文件名是：

```
velo-waters1445-MD001-run0100.dat
velo-waters1445-MD001-run0200.dat
velo-waters1445-MD001-run0300.dat
velo-waters1445-MD001-run0400.dat
velo-waters1445-MD001-run0500.dat
.
.
. 
```

我无法追踪我需要在哪里进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:52:29.670

您的代码的缩进被破坏：第一个分配`formatxyz`和以下代码既不对齐`def grouper`，也不对齐`for FRAMES`。

主要问题可能是（就像 Johannes 已经评论过的那样）您打开文件进行写入以及实际将数据写入文件的时间。

查看：

```
for FRAMES in range(0,200):
    frame = FRAMES
    text_file = open("Output.mmm.dat", "a") 
```

输出文件名为（硬编码）`Output.mmm.dat`。更改为`"Output.{0}.dat".format(mmm)`。但是，变量`mmm`在循环内永远不会改变。如果所有帧都应该写入同一个文件，这可能没问题。

通常，请使用您为变量和函数选择的名称。`loops`非常通用， 和 也是`kkk`如此`mmm`。更具体地说，它有助于调试。如果您不知道发生了什么以及程序出错的地方，请插入`print("dbg> do (a)")`带有一些描述性文本的语句和/或使用[Python 调试器](http://docs.python.org/2.7/library/pdb.html)来单步调试您的程序。尤其是交互式调试对于学习一门新语言和新概念是必不可少的，恕我直言。

# java - 用 Java 监控文件

> ID：14437252
> 
> 赞同：2
> 
> 时间：2013-01-21T11:06:28.187
> 
> 标签：java, performance, file

我以 2 分钟的连续计划在 Linux 机器上读取 Java 日志文件，以查找某些消息。我存储最后一个偏移量（RandomAccessFile getFilePointer）并在我检测到 LastModified 已更改时从它开始读取；这是最佳做法，甚至是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:10:55.530

如果您使用的是 Java 7，那么您可以使用 WatchService 在目录中的文件发生更改时通知您。这类似于中断，不需要连续轮询。有关WatchService 的更多详细信息，请参阅[此内容。](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)否则，您最好使用您已经使用的轮询方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:11:14.957

试试这个 Tailer： [http ://commons.apache.org/io/apidocs/org/apache/commons/io/input/Tailer.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/input/Tailer.html)

这是“tail -f”Unix 功能的 Java 实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:11:16.873

为了检测文件的更改或目录内任何内容的更改，您可以查看该目录中的新内容、现有内容的修改以及任何目录内任何现有内容的删除。

见帖子：[目录监视java中的变化](https://stackoverflow.com/questions/13998379/directory-watching-for-changes-in-java/14144798#14144798)

# windows-store-apps - windows8商店应用开发

> ID：14437256
> 
> 赞同：0
> 
> 时间：2013-01-21T11:06:43.580
> 
> 标签：windows-store-apps

我们需要开发一种工具，可以在 Windows 8 平板电脑和 Windows Phone 8 环境中与我们的存储设备进行通信。我们的设计就像有两个模块，一个具有 UI 控件，另一个具有设备访问权限（DLL 或 EXE）。我们曾计划使用 Windows 商店应用程序进行 UI 开发，但是对于使用文件系统 IOCTL 访问设备的第二个模块，我们没有获得如何实现的明确参考点。请让我们知道如何从 Windows 商店应用程序中使用 IOCTL 或将我们指向参考文档。谢谢。

# user-defined-functions - 登录 Pig UDF

> ID：14437257
> 
> 赞同：1
> 
> 时间：2013-01-21T11:06:51.910
> 
> 标签：user-defined-functions, apache-pig

我正在从 Pig 脚本调用用 Java 编写的 UDF。

在 UDF 中，如果由于某种原因输入不正确，我将返回`null`并跳过特定的行/行。

现在有很多原因我可以跳过当前行/行。我目前在我的 UDF 中使用以下日志语句

```
warn("XML is null, so skipping it", PigWarning.UDF_WARNING_1);
....
warn("Entity is null, so skipping it", PigWarning.UDF_WARNING_5);
.... and so on 
```

完成 Pig 脚本后，这会给我一个综合信息，如下所示

```
2013-01-21 07:03:42,163 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning UDF_WARNING_5 5473 time(s).
2013-01-21 07:03:42,163 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning UDF_WARNING_1 1466 time(s). 
```

但现在我想知道每条线路失败的原因，而不仅仅是数字。有没有办法在 Pig 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:05:02.633

我发现了一个名为[penny](https://cwiki.apache.org/confluence/display/PIG/PennyToolLibrary)的库，它允许我在 Pig 中进行日志记录和过滤。

# java - 使用 SAXParser 针对 XSD 验证 XML 会导致错误

> ID：14437259
> 
> 赞同：2
> 
> 时间：2013-01-21T11:06:55.757
> 
> 标签：java, xml, xsd, validation

我有一个 XML 文件和一个 XSD 文件，我想根据 XSD 验证 XML。

但我不断收到以下错误：

```
org.xml.sax.SAXParseException; schema_reference.4: Failed to read schema document '/connector/connector.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

我打印了`canonical path`以确保我正在尝试使用正确的文件。但它不会工作。

XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <Content>
<commandLine>
<commandCode>A1</commandCode>
<marks><mark><code>mail</code><value>test@test.com</value></mark></marks>
<customerID>1</customerID>
<MessageType>2</MessageType>
</commandLine>
<Antwoordregel></Antwoordregel>
</Content>
</xs:schema> 
```

XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema id="Message" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="Content">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="commandLine" minOccurs="1" maxOccurs="1">
                    <xs:complexType>
                        <xs:sequence minOccurs="1" maxOccurs="1">
                            <xs:element name="commandCode" type="xs:string" minOccurs="1" maxOccurs="1"/>
                            <xs:element name="marks" minOccurs="0" maxOccurs="1">
                                <xs:complexType>
                                    <xs:sequence >
                                        <xs:element name="mark" minOccurs="1" maxOccurs="unbounded">
                                            <xs:complexType>
                                                <xs:sequence >                                                             
                                                    <xs:element name="code" type="xs:string" minOccurs="1" maxOccurs="1"/>
                                                    <xs:element name="value" type="xs:string" minOccurs="1" maxOccurs="1"/>                                                                
                                                </xs:sequence>
                                            </xs:complexType>
                                        </xs:element>
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>   
                            <xs:element name="customerID" type="xs:string" minOccurs="0" maxOccurs="1"/>
                            <xs:element name="MessageType" type="xs:string" minOccurs="0" maxOccurs="1"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
                <xs:element name="Antwoordregel" minOccurs="1" maxOccurs="1">
                    <xs:complexType>
                        <xs:sequence minOccurs="0" maxOccurs="1">
                            <xs:element name="resultCode" type="xs:string" minOccurs="0" maxOccurs="1"/>
                            <xs:element name="statusInfo" minOccurs="0" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="transactionInfo" type="xs:string" minOccurs="1" maxOccurs="1"/>
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我用来验证的代码：

```
static boolean validateAgainstXSD(String xml){
        try{
            File xsd = new File("connector/connector.xsd");
            System.out.println(xsd.getCanonicalPath());
            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
            Schema schema = factory.newSchema(new StreamSource("/connector/connector.xsd"));

            System.out.println(schema.toString());
            Validator validator  = schema.newValidator();
            validator.validate(new StreamSource(xml));
            return true;
        }catch(Exception exe){
            exe.printStackTrace();
        return false;
        }
    } 
```

它总是返回 false。我尝试使用在线工具通过 XSD 验证 XML，该工具可在此处找到：[www.utilities-online.info/xsdvalidation](http://www.utilities-online.info/xsdvalidation)。此验证器返回：

```
Not valid.
Error - Line 2, 122: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 122; cvc-elt.1: Cannot find the declaration of element 'xs:schema'. 
```

我能做些什么来解决这个问题？

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:14:18.230

从 XML 文件中删除第二行

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
elementFormDefault="qualified" attributeFormDefault="unqualified"> 
```

正确的 XML 是

```
<?xml version="1.0" encoding="UTF-8"?>
<Content>
    <commandLine>
        <commandCode>A1</commandCode>
        <marks><mark><code>mail</code><value>test@test.com</value></mark></marks>
        <customerID>1</customerID>
        <MessageType>2</MessageType>
    </commandLine>
    <Antwoordregel></Antwoordregel>
</Content> 
```

解决方案 ：

请检查文件夹结构并再次运行。

源代码：

```
package com.shashi.mpoole;

import java.io.File;

import javax.xml.XMLConstants;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;

public class XMLValid {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub

        if(validateAgainstXSD(new File("connector/connector.xml")))
        {
            System.out.println("Success");
        }
        else
        {
            System.out.println("Failure");
        }
    }

    static boolean validateAgainstXSD(File xml){
        try{

            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
            Schema schema = factory.newSchema(new StreamSource("connector/connector.xsd"));

            Validator validator  = schema.newValidator();
            validator.validate(new StreamSource(xml));
            return true;
        }catch(Exception exe){
            exe.printStackTrace();
        return false;
        }
    }

} 
```

文件夹结构

```
-----Project

    ------------- src

                  -------------XMLValid.java

    ------------- connector

                  -------------connector.xsd

                  -------------connector.xml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T23:51:08.897

**我能够通过更改命名空间前缀为“ xs:** ”的 XSD 并将所有实例搜索/替换为“ **xsd:** ”（以及 xmlns:xsd= 定义）来解决此类问题。然后我在内部服务器上托管了这个 XSD，在 XML 中的 schemaLocation 属性中指向那里，一切正常。

由于措辞准确的错误，我尝试了这个：

*   3) 文档的根元素不是**<xsd:schema>**。

我知道，我知道，这不应该奏效，但它确实奏效了。没有翻译对我不起作用的外部 XSD 是[http://camel.apache.org/schema/spring/camel-spring.xsd](http://camel.apache.org/schema/spring/camel-spring.xsd)

我不确定这是否是 SAX 或 Eclipse 中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T04:26:49.013

试试这个代码来验证你的 XSD，这个是避免你得到的异常的正确标准（这个是完整的证明代码）。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema id="Message" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">

    <xs:element name="commandCode"  type="xs:string"/>
    <xs:element name="code"  type="xs:string"/>
    <xs:element name="value" type="xs:string" />
    <xs:element name="customerID" type="xs:string" />
    <xs:element name="MessageType" type="xs:string" />
    <xs:element name="resultCode" type="xs:string" />
    <xs:element name="transactionInfo" type="xs:string" />

<xs:element name="mark" >
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="code" minOccurs="1" maxOccurs="1"/>
            <xs:element ref="value" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="marks" >
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="mark" minOccurs="1" maxOccurs="unbounded" />
         <!--End element Mark -->
    </xs:sequence>
    </xs:complexType>
</xs:element> 
<xs:element name="commandLine">
    <xs:complexType>
        <xs:sequence minOccurs="1" maxOccurs="1">
            <xs:element ref="commandCode"  minOccurs="1" maxOccurs="1"/>
            <xs:element ref="marks" minOccurs="0" maxOccurs="1"/>
            <xs:element ref="customerID" minOccurs="0" maxOccurs="1"/>
            <xs:element ref="MessageType"  minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="statusInfo">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="transactionInfo" minOccurs="1" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="Antwoordregel" >
    <xs:complexType>
        <xs:sequence minOccurs="0" maxOccurs="1">
            <xs:element ref="resultCode" minOccurs="0" maxOccurs="1"/>
            <xs:element ref="statusInfo" minOccurs="0" maxOccurs="unbounded" />
        </xs:sequence>  
    </xs:complexType>
</xs:element>

<!-- First Content Document Element -->
<xs:element name="Content">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="commandLine" minOccurs="1" maxOccurs="1" />
                <xs:element ref="Antwoordregel" minOccurs="1" maxOccurs="1"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

# c# - 执行服务器上命名的javascript方法

> ID：14437262
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:07.497
> 
> 标签：c#, asp.net-mvc-3, jquery

**目标：**

在服务器端命名的 $.ajax 上执行一个 javascript 函数并在结果中获取它。

**问题：**

在 data.ExecuteClientCode 上，我将获得在这种情况下应该执行的函数的名称：“AfterFamilySelectedUpdateParameters()”，但我的问题是我不知道如何设置该字符串以便执行。

**编码：**

看法：

```
function AfterFamilySelected()
           {
                $.ajax({
                        url: "/@Model.ControllerAfterEntitySelected/@Model.ActionAfterEntitySelected" ,
                        type: "POST",
                        async: false,
                        success: function(data, status, xhr) {
                                     **data.ExecuteClientCode;**
                                  },
                        error: function(xhr, status, err) {
                            alert('error');
                        }
                    });
           } 
```

控制器：

```
 [HttpPost]
        public ActionResult AfterFamilySelected() 
        {
            return Json(new { ExecuteClientCode = "AfterFamilySelectedUpdateParameters()" });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:14:22.773

假设该方法附加到您可以执行的窗口：

**服务器**

```
 HttpPost]
 public ActionResult AfterFamilySelected() 
 {
    return Json(new { ExecuteClientCode = "AfterFamilySelectedUpdateParameters" });
 } 
```

**客户**

```
 var callback = window[data.ExecuteClientCode];
 if (callback)
     callback(); 
```

您需要从服务器返回的值中删除括号。

# ios - 将声音 60 秒长度分配给 UILocalNotification

> ID：14437264
> 
> 赞同：9
> 
> 时间：2013-01-21T11:07:10.553
> 
> 标签：ios

我的本地通知运行良好，有声音名称调用 Alarm.wav 22 秒长度，我分配给本地通知，例如

```
notificaiton.soundName = @"Alarm.wav"; 
```

我的本地通知响了 22 秒

现在我的问题是，将声音分配给具有特定长度限制的 UILocalNotification 是否有任何限制

因为当我分配 Alarm.wav 60 秒长度时，它不起作用

有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T11:14:04.300

如果您阅读[`UILocalNotification`](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)它的文档说明该[`soundName`](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009565-CH1-SW8)属性最多只能播放 30 秒。

> 不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-21T11:15:54.730

您可以将此声音文件的长度最长为 30 秒。

通知未采取超过 30 秒长度的文件。

不支持持续时间超过 30 秒的声音……Apple doc 提供。

看看这个[Apple 文件](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

# ios - 将双引号添加到 NSString 附加到变量

> ID：14437266
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:16.127
> 
> 标签：ios, objective-c, nsstring, nsdictionary

> **可能重复：**
> [如何将 NSString 初始化为带双引号的文本](https://stackoverflow.com/questions/3115924/how-to-initialize-nsstring-as-text-with-double-quotes)

如何将 tan 实际双引号添加到 NSString 内部的变量以在 NSDictionary 中使用？例子

```
NSString *ename=@"John Doe";
NSDictionary *profile=@{@"Profile":@{"Name":ename}}; 
```

我需要像这样显示 "Profile":{"Name":"John Doe"}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:23:27.920

> 我需要像这样显示 "Profile":{"Name":"John Doe"}

您要创建 JSON 格式吗？然后你可以使用内置类`NSJSONSerialization`：

```
NSString *ename = @"John Doe";
NSDictionary *profile = @{@"Profile":@{@"Name":ename}};

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:profile options:0 error:NULL];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

NSLog(@"%@", jsonString); 
```

*输出：*

```
{"Profile":{"Name":"John Doe"}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T11:08:41.517

使用转义字符**\** ...

```
NSString *ename=@"This is double \" quote \""; 
```

如果您要求在字典的**键**中添加引号，则必须添加一些特殊字符（非字母和非数字），然后键才显示双引号。

`[... description] simply wraps things in quotes for display that have non-alphanumeric characters in them.`

**并且调试器中的“abc”和abc没有区别。这仅用于调试，实际值始终是 NSString @"abc"。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:12:44.487

检查这个

```
NSString *string=@"This is test \" for \""; 
```

希望对你有帮助。。

# java - 如何在 MuPDF 中实现页面卷曲

> ID：14437269
> 
> 赞同：10
> 
> 时间：2013-01-21T11:07:20.710
> 
> 标签：java, android, page-curl, mupdf

我有两个库，一个是在 android`MuPDF`中查看文件，第二个是实现页面卷曲效果，但它适用于位图。现在，我不知道如何将这两者集成以在文件中获得页面卷曲效果，由. 如果有人已经实现了这个或者知道一些链接，那么请帮助我。`PDF``pageCurl``PDF``MuPDF`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T14:44:17.687

据我所知，没有简单的方法可以做到这一点。我为广泛传播的全国性报纸制作了一个真实世界的应用程序：似乎唯一的方法是使用位图。他们对 iOS 设备使用服务器端 pdf，对 Android 设备使用 jpg 位图。

请记住，使用大型位图在 android 中是一件痛苦的事情。这就是 pdf 查看器以块的形式呈现它们的原因：如果滚动太多，在缩放模式下，已经加载到内存中的高分辨率块会继续被垃圾收集和丢失。使用您选择的任何 pdf 实现（甚至是 muPDF）对其进行测试。

一次 2 个位图（例如首页和背面），分辨率约为 1200x800 会占用整个应用程序堆内存，从而导致臭名昭著的不可恢复的 OutOfMemory 异常。每个设备都有固定（和不同）数量的堆内存用于内存中的对象，并且也受到最大分配限制。

我的建议是：
节省您的时间并将实现更改为 pdf 中的预渲染图像（如果可能，服务器端最好，或直接在设备上预渲染）并管理具有不同分辨率的低内存受限设备。

我是一名 Android 发烧友开发人员，但我正在等待一些全 PDF 组件，这些组件可以完美地完成 iOS 设备已经完成的工作。祝你好运。

# jquery - 如何使用 jQuery.getScript 在 eval 之前执行代码

> ID：14437271
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:23.303
> 
> 标签：jquery

[在jQuery.getScript](http://api.jquery.com/jQuery.getScript/)中调用 eval 之前是否有执行代码的钩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:15:36.623

来自以下[文档](http://api.jquery.com/jQuery.getScript/)：`$.getScript()`

> 这是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  url: url,
  dataType: "script",
  beforeSend: function ( xhr ) {
    // code to execute before query
  }
}); 
```

# requirejs - 使用 require.js 获取 JSON 响应并保存到文件

> ID：14437273
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:28.220
> 
> 标签：requirejs, gruntjs

我正在尝试为 require.js 制作一个插件，该插件允许我调用外部 api、转换 json 响应并将其保存到文件中。

问题：

*   我不确定我是否正确编写插件
*   我似乎无法使用节点文件系统 - 尽管我使用的是 r.js

我希望在构建时执行此操作，以便在 concat 方法发生之前准备好文件（将所有文件放在一个中）

这甚至可能吗？我应该改用 grunt 任务吗？任何指针或示例或教程或任何东西都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:46:38.887

最后我使用了[https://npmjs.org/package/grunt-curl](https://npmjs.org/package/grunt-curl)。

容易多了，只是稍微修改了文件以将响应包装在 define();

它允许在构建时下载文件并稍后在应用程序中使用

# sql - 通过结构化表数据递归查询/流程设计

> ID：14437276
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:40.587
> 
> 标签：sql, ms-access, database-design

在我第一次尝试盗用 Ms-Access 后 - 在您的[帮助下](https://stackoverflow.com/questions/13986215/relational-database-performance-for-a-date-time-point-interval)- 取得了巨大的成功，我被派回去做“更多的事情”。

如果您愿意，可以跳过一些介绍：

我正在建立一个关于某些项目的数据基础，我想从中创建分析和概述。

数据和发现将在 Excel 或 Powerpoint 等程序中表示，因此过程本身非常开放。它可能会非常直观，并根据要求提供详细的点。

但是，数据可能会定期更改，如果结果良好，我可能会重复该过程。
因此，我认为理想的方法是拥有一个数据层，然后对该数据进行一组固定的查询，然后我会（半）手动将结果编译成任何格式的报告，可能使用外部数据分析工具，例如作为介于两者之间的 R。

麻烦的是，我唯一可以访问的数据库是.. 嗯.. Access 2010 女士。我不能在这台机器上安装任何东西。
如果您对此有建议，我当然可以使用非安装或在线工具。

tl;dr：我想使用 Ms Access 将关系数据库中的数据查询为表格格式，以便手动进一步处理，尽可能少地使用 Ms-Access VBA 和表单。

* * *

从那以后，我开始在标准关系数据库 ms-Access 中实现原型。

我在这种设计中遇到的一个有趣的问题是，我为参与项目的公司准备了一张桌子。除此之外，我还有一张“关系”表——比如持股、所有权或合作。
因此，假设 A 公司正在建设项目 A，但它只是 B 公司的子公司，然后由 C 公司部分拥有，依此类推。

现在假设我想查询参与一个项目的所有公司，但作为所有者，我只想显示链的最后一个“元素”。
想象一下，我想按净资产对列表进行排序，这通常是一个仅适用于链末端的上市公司的数字，而不是链上的项目子公司等。

（Ms-）SQL可以做到这一点，还是我需要在VBA中做到这一点？
现在我想我可以设法编写一个 VBA 函数并将其转储到一个临时表中，但是我必须创建表单等。

另一个由此产生的想法是“通过查询来回答“C 公司在哪个项目中拥有股份”的问题。你可以看到这是怎么回事。

我希望数据库和查询尽可能灵活（在这种情况下，独立于实际访问）。所以这一次，没有模拟程序或用户界面。在上一个项目中从 Access 中获得我想要的东西是一件很痛苦的事情，那是一个非常具体的问题集......

但总的来说，如果可以的话，我也愿意使用不同的工具。

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:19:12.353

在 RDBMS 中建模层次结构是一个相当棘手的过程 - 有些（如 Oracle）具有查询层次结构数据的内置功能，但我认为 Access 没有。

最好的解决方案是使用[“嵌套集”模型。](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)这允许您在使用标准 SQL 的同时对分层数据进行建模；查询也非常快。

如果您的数据不是分层的，那么嵌套集就没那么有用了；在这种情况下，典型的解决方案是引入一个表来映射关系——通常包括两个相关实体，并且通常带有“关系类型”字段（例如“父”、“部分所有者”等）。这通常称为有向无环图或 DAG。有几种方法可以在数据库中对它们进行建模；“闭包表”可能是最有效的。这篇[文章](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)展示了如何做到这一点 - 这是一个沉重的阅读，但我认为它回答了你的问题。

# asp.net-mvc-4 - MVC4 Razor URL 解析不起作用

> ID：14437281
> 
> 赞同：0
> 
> 时间：2013-01-21T11:07:54.130
> 
> 标签：asp.net-mvc-4, visual-studio-2012, razor-2

我最近将我的项目从 VS2010 MVC3 升级到 VS2012 MVC4，发现新`Razor URL resolution`功能不起作用。

例如我有最喜欢的图标

Razor 不会自动解析 ~/ 路径。如果我使用旧式（MVC3）Url.Content 解析器一切正常。

如果我创建新的 MVC4 项目，则路径已成功解析。我认为当 VS2012 升级我的项目但找不到什么时，有些东西没有启用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:13:58.760

我自己发现了问题。看来项目升级了，它仍然使用 MVC3，项目 MVC 版本没有自动更改。

# windows - 为 lync 服务器准备活动目录时出错

> ID：14437282
> 
> 赞同：1
> 
> 时间：2013-01-21T11:07:57.203
> 
> 标签：windows, active-directory, windows-server-2008-r2, lync-2010

为 lync 服务器准备活动目录时出错“尝试检查架构状态时发生故障，请确保活动目录可访问”。

我还将此服务器与域服务器连接。

# c# - 如何从android创建类似菜单的东西？

> ID：14437291
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:08:36.990
> 
> 标签：c#, user-interface, windows-phone-8

我想在 Windows Phone 的 android 中创建类似菜单的东西。我发现有些东西会很好，但我什至无法在任何地方找到它是如何命名的。我在屏幕截图上将其标记为红色。

![在此处输入图像描述](../Images/54966995bb9fe422b333f5163bf88c36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:44:30.837

您所指的元素是`ApplicationBar`或“AppBar”。

您可以在[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813(v=vs.105).aspx的官方文档中了解更多信息](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813(v=vs.105).aspx)

有关如何使用它进行编程的示例，请参见[http://www.jeffblankenburg.com/2010/10/06/31-days-of-windows-phone-day-6-application-bar/](http://www.jeffblankenburg.com/2010/10/06/31-days-of-windows-phone-day-6-application-bar/)

请注意，这是一个原生 Windows Phone 元素，并不直接对应于 Android 菜单，并且每个平台的用户可能希望他们在每个平台上表现不同。

# c# - 一种事件，多种形式

> ID：14437292
> 
> 赞同：0
> 
> 时间：2013-01-21T11:08:37.447
> 
> 标签：c#, wpf, forms, events

我目前面临一项微不足道的任务，但我想不出解决方案。

为了解释它应该如何工作的理论......

有一种认证形式。[http://prntscr.com/pwat5](http://prntscr.com/pwat5)

此表单适合`TabControl`->`TabItem`并`TabControl`依次放置在组件上`Grid`。实际上，在该键输入上是通过单击身份验证并将登录表单更改为另一个表单的事件。

这种形式的认证，我需要更多，我按照以下方式进行，并将表单数据放置到特定组件中，结构如下所示：

```
Grid
 ListBoxItem
  MyAuthForm
   ... //Well, actually imposed on the rest of the crap form MyAuthForm 
```

对于我的表单的相同副本，我`MyAuthForm`克隆了该对象，更准确地说，我将`ListBoxItem`其所有内容连同其所有内容一起克隆到新对象中，从而将其添加到组件网格中，即获得一个新的克隆对象。

```
Grid
 ListBoxItem
  MyAuthForm
   ... //Well, actually imposed on the rest of the crap form 
 ListBoxItemСlone
  MyAuthFormСlone
   ... //And so on 
```

但问题是我的原始对象承载了各种事件，但克隆的对象无法传递原始对象中的某些事件。

如何解决这个问题？以某种方式克隆一个对象可以引用原始对象的事件吗？

总的来说，尽我所能解释，我希望最容易理解我想要的东西，非常感谢你的任何提示和想法，第二天我遇到了这个案子，到目前为止还没有想法。

**ps**在每个克隆对象的手册中，我不能为这种形式的身份验证创建事件可能绰绰有余，一切都必须快速，所以唯一的选择是以某种方式引用已经存在的事件，wpf 是否允许这种可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:15:22.317

也许因为您正在使用 WPF，如果您将事件绑定到命令或任何其他机制，那么克隆的窗口，给定相同的数据上下文，将针对相同的方法，您的问题将得到解决。

我希望我理解正确。

过去我将 Caliburn 与 WPF 一起使用，那里有一个名为[ActionMessage](http://devlicio.us/blogs/rob_eisenberg/archive/2010/07/17/caliburn-micro-soup-to-nuts-pt-3-all-about-actions.aspx)的东西可能对您有用。

它在数据上下文中冒泡，直到找到具有指定名称的方法，否则抛出异常。也许您可以使用它，再加上 2 个克隆共享数据上下文实例的事实，使您能够使它们都指向相同的身份验证方法。

希望我做对了。

# php - 查询以检查 MYSQL 表上是否存在触发器

> ID：14437293
> 
> 赞同：11
> 
> 时间：2013-01-21T11:08:37.913
> 
> 标签：php, mysql, sql, database

是否有一个查询列出了为特定表上的任何事件创建的所有触发器。

假设我有一个名为 的表`client`，并且我想列出为该表上的任何事件（例如插入/更新/删除等）创建的所有触发器。

任何形式的帮助表示赞赏

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T11:13:51.600

[显示触发器](http://dev.mysql.com/doc/refman/5.6/en/show-triggers.html)

```
SHOW TRIGGERS LIKE '<tablename>' 
```

例如

```
SHOW TRIGGERS LIKE 'client' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-09T22:01:07.150

公认的答案是正确的，也是最直接的方法，但要增强表上触发器的视图并更好地控制返回的内容，请使用 INFORMATION_SCHEMA：

`select * from INFORMATION_SCHEMA.TRIGGERS where EVENT_OBJECT_TABLE='client';`

有了这个，您可以过滤诸如`EVENT_OBJECT_TABLE`（表名）、`TRIGGER_SCHEMA`（`EVENT_MANIPULATION`插入、更新、删除等）之类的内容，以及许多其他属性。

正如上面评论中所指出的，您还需要拥有此方法的 TRIGGER 权限。

# php - XML 字符串第一行的空白行

> ID：14437295
> 
> 赞同：0
> 
> 时间：2013-01-21T11:08:42.727
> 
> 标签：php, xml, xmlwriter

我输出到 XML 阅读器的字符串有一点问题，字符串的第一行是一行空白，当我尝试读取字符串时，我似乎无法摆脱它由于最顶部的空白行给我这个错误。

```
Error on line 5 of document: 
The processing instruction target matching "[xX][mM][lL]" is not allowed. 
Nested exception: 
The processing instruction target matching "[xX][mM][lL]" is not allowed." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:12:37.463

你确定这是错误的根源吗？错误消息抱怨第 5 行。

[根据 XML 规范](http://www.w3.org/TR/REC-xml/#sec-common-syn)，看起来您创建了一个以非法开头的标记`xml`名称：

> 以 string 开头的名称`"xml"`，或以任何匹配的 string 开头的名称`(('X'|'x') ('M'|'m') ('L'|'l'))`，在本规范的本版本或未来版本中保留用于标准化。

# java - 针对 Java 服务器的 PHP SoapClient

> ID：14437299
> 
> 赞同：0
> 
> 时间：2013-01-21T11:08:54.840
> 
> 标签：java, php, soap

我已经走到了尽头，所以是时候向社区寻求帮助了，我一直在网上掠夺我能找到的关于这个问题的任何资源，但没有一个能帮助我。

我目前正在尝试通过 PHP 与 Java Webservice 服务器通信。我可以下拉一个 WSDL 并通过和列出它的功能和`__getFunctions();`类型`__getTypes();`

我正在以这种格式创建客户端

`new SoapClient("https://username:password@ip:port/path/to/wsdl?wsdl");`

现在最初这没有问题，但是当我尝试对此服务进行函数调用时，我得到 2 个响应中的 1 个。

我知道其中一个是超时错误，第二个我还不明白。

错误 ：`SoapFault exception: [SOAP-ENV:Client] [MT-IP] SOAP message is not well formed in...`

这是代码：

```
// All of this works

$options["login"]    = "login";
$options["password"] = "password";

$wsdl   = "https://" . $options["login"] . ":" . $options["password"] . "@ip:port/path/to/wsdl?wsdl";
$client = new SoapClient($wsdl, $options);

try {
    $functions = $client->__getFunctions();
    $types     = $client->__getTypes();

    $params = new stdClass();
    $params->pong = (string)"Hello World!";

    // This fails

    $result = $client->ping($params);
    var_dump($result);
} catch (SoapFault $exception) {
    echo $exception;
} 
```

要补充的是，我还尝试以所有可用的方式调用方法，例如

```
$client->__soapCall("ping", array($params));
$client->__soapCall("ping", array(array("pong" => "Hello World!)));
$client->__soapCall("ping", array("pong" => "Hello World"));
$client->__soapCall("ping", array("parameters" => array("pong" => "Hello World"));

// and some more.. 
```

您还可以查看我正在针对 WSDL 测试的 [WSDL](http://moenbjollefabrikk.no/wsdl)

你也可以查看我尝试调用webservice [SOAP TEST的页面](http://moenbjollefabrikk.no/soap.php)

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="com.computas.mt.extern.Ping">
    <SOAP-ENV:Body>
        <ns1:ping>
            <pong>Hello World!</pong>
        </ns1:ping>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:18:45.343

在我的情况下，服务器想要的示意图与 PHP 发出的请求不同。解决方案是通过扩展 SoapClient 在发送请求 XML 之前对其进行物理更改。一旦我们拥有服务器通常提供的 XML 布局，我们就发现了问题的变化。

```
class MySoapClient extends SoapClient {
    function __doRequest( $request, $location, $action, $version, $one_way = NULL ) {
        $request = str_replace("SOAP-ENV", "soapenv", $request);
        $request = str_replace("xsi", "com", $request);
        $request = str_replace("ns1", "com", $request);
        var_dump($request);
        return parent::__doRequest( $request, $location, $action, $version, $one_way );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:29:06.160

不要将用户名和密码放入 url。SoapClient 接受一个为此目的提供参数的选项数组。[http://de2.php.net/manual/en/soapclient.soapclient.php](http://de2.php.net/manual/en/soapclient.soapclient.php)

# javascript - 如何使用 jQuery 将音频文件动态添加到 div

> ID：14437300
> 
> 赞同：0
> 
> 时间：2013-01-21T11:09:04.540
> 
> 标签：javascript, jquery, ajax

我想动态添加音频文件。我已经声明了像这样的标签

```
<div>
  <audio id="myaudio">
  </audio>
</div> 
```

现在我想动态添加源。如何添加到 div 或音频标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:15:52.253

你可以这样做

```
$('#myaudio').attr('src','track1.mp3'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:35:17.257

您可以像这样使用jQuery的[附加](http://api.jquery.com/append/ "附加")： `$('audio').append('<source src="yourfile.ogg" type="audio/ogg" />');`

参见这个小提琴的例子：http: [//jsfiddle.net/hCkPY/1/](http://jsfiddle.net/hCkPY/1/)

# php - PHP 中的会话处理问题

> ID：14437305
> 
> 赞同：1
> 
> 时间：2013-01-21T11:09:20.507
> 
> 标签：php, session

我正在尝试验证会话是否存在。为此，我尝试了以下方法：

在以下情况下进行新会话：

1.  `if(session_id() == '')`

2.  `if(isset($_SESSION))`

3.  `if(session_status() == PHP_SESSION_ACTIVE)`

以上都不起作用。任何线索我可能会出错？

我这样做的原因是因为我需要根据会话是否存在来做单独的事情 - 比如

```
if (session exists)

 ....

else

 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:15:47.703

可以尝试的两种选择是：

1.  `if (!session_id())`
2.  `if (empty(session_id())`

如果其中任何一个返回`true`，请确保首先启动会话，然后检查您知道应该存在的任何值。例如：

```
// Start the session when no id is set
if (!session_id()) {
    session_start();
}

// Double-check for a known session variable
if (array_key_exists('username', $_SESSION) && !empty($_SESSION['username'])) {
    // Session is good, continue here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:12:46.887

1.  您需要 session_start ，这将导致发送会话 cookie
2.  该变量始终存在
3.  与 1 相同

您可以检查用户会话中是否有任何内容。
`isset($_SESSION['some flag])` 因为使用 session 需要一个`session_start`调用，这将导致发送一个 session cookie 并最终创建一个 session，这将永远是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:11:57.173

试试这个：

```
public function session_exists(){
    if(ini_get('session.use_cookies') == '1' && isset($_COOKIE[session_name()])){
        return true;
    } 
    else if(!empty($_REQUEST[session_name()])){
        return true;
    }
    return false;
} 
```

# jquery - CSS/Javascript 防止光标样式改变，ondrag 事件

> ID：14437306
> 
> 赞同：0
> 
> 时间：2013-01-21T11:09:29.917
> 
> 标签：jquery, html, css

这是我的暂存器[http://jsbin.com/aledig/1/edit](http://jsbin.com/aledig/1/edit) 当绘制光标从指针改变时，如何防止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:22:00.320

我在这个便签本中找不到任何问题。光标在 IE 和 FireFox 中始终是指针。你有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:36:23.647

这似乎是铬的错误。简单的解决方法可能是防止 mousedown 处理程序中的默认行为，这里使用 draw_start：

[http://jsbin.com/aledig/7/edit](http://jsbin.com/aledig/7/edit)

```
function draw_start(e) {
        e.preventDefault();
        x = e.pageX;
        y = e.pageY;
        draw(x-30, y-30, 5, 5);
        canvas.onmousemove =getmxy;
        canvas.onmousedown = getmxy;        
      } 
```

# android - OnItemClickListener 不起作用

> ID：14437308
> 
> 赞同：0
> 
> 时间：2013-01-21T11:09:37.627
> 
> 标签：android, listview, click, onitemclicklistener

我有一个列表视图。我需要点击列表视图中的每个元素。但`onItemClickListener`不工作。我尝试将每个 textView`focusable="false"`放入并放入 `android:descendantFocusability="blocksDescendants"`，但没有任何效果，我不知道我的错误在哪里。这是我的代码

listview中每个元素的xml

```
 **xml_item_list**
  <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
  android:paddingTop="5dip"
  android:paddingBottom="8dip"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:minHeight="?android:attr/listPreferredItemHeight"
  android:background="@android:drawable/list_selector_background"
  android:clickable="true"
  android:longClickable="true"
  android:descendantFocusability="blocksDescendants">

 <TextView
    android:id="@+id/lDate"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_marginRight="3dp"
    android:background="@drawable/et_style"
    android:gravity="center"
    android:textColor="#c2c2c2"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:focusable="false" />

<TextView
    android:id="@+id/lDescription"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="3dp"
    android:layout_marginRight="3dp"
    android:layout_weight="1"
    android:gravity="center"
    android:background="@drawable/et_style"
    android:textColor="#c2c2c2"
    android:textAppearance="?android:attr/textAppearanceMedium" 
    android:focusable="false"/>

 <TextView
    android:id="@+id/lMissValue"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="3dp"
    android:gravity="center_horizontal|center"
    android:layout_gravity="center"
    android:textColor="#DDCC2EFA"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:focusable="false"/>
   </TableRow>

   **main_xml_list**

  <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@drawable/background_tile"
   android:orientation="vertical" >

  <LinearLayout
    android:layout_width="match_parent" 
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginBottom="50dp">

    <ImageView 
        android:id="@+id/bankTransaction"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="false"/>

    <TextView
        android:id="@+id/contextLabel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/et_style"
        android:textSize="28dp"
        android:layout_gravity="bottom" />
 </LinearLayout>

 <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:descendantFocusability="blocksDescendants">

    </ListView>

 </LinearLayout> 
```

**活动onCreate()**的 onCreate() 函数内的代码

 **```
 listView = getListView();
    listView.setClickable(true);
    listView.setOnItemClickListener(
      new OnItemClickListener()
          {
                @Override
                public void onItemClick(AdapterView<?> arg0, View view,int position, long id) {                      
                   Log.w(TransactionView.class.getName(), "Item click listener");
                   Toast.makeText(TransactionView.this, "Item clicado", Toast.LENGTH_LONG).show();
                }   
            }       
    ); 
```

任何人都可以帮助我吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:24:05.237

试试这样

```
 lvlList = (ListView)findViewById(R.id.lvlList);
lvlList.setOnItemClickListener(new OnItemClickListener() 
{
    @Override
    public void onItemClick(AdapterView<?> a, View v,int position, long id) 
    {
        Toast.makeText(getBaseContext(), "Click", Toast.LENGTH_LONG).show();

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:11:52.503

首先，检查您是否在代码中添加了这一行。

```
public class MyActivity extends Activity implements OnItemClickListener 
```

然后将此代码添加到您的**onCreate()**活动中...

```
ListView listView = (ListView) findViewById(R.id.lisview);
 listView.setOnItemClickListener(this);

    @Override
    public boolean onItemClick(AdapterView<?> parent, View v, int pos,long id) 
    {
        System.out.println("~~~~~~Item Clicked");
        return false;
    } 
```

改变这个::

```
 android:id="@+id/list" 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:20:33.347

我的解决方案......

```
 public class TransactionView extends ListActivity implements **AdapterView.OnItemClickListener**{}

 **onCreate()**{
      adapter = new SimpleCursorAdapter(
            this, 
            R.layout.transaction_item_view, 
            c, 
            new String[]{MySQLiteHelper.C_TRANSACTION_DUE, MySQLiteHelper.C_TRANSACTION_DESCRIPTION, MySQLiteHelper.C_TRANSACTION_VALUE, MySQLiteHelper.C_TRANSACTION_COVERVALUE, MySQLiteHelper.C_TRANSACTION_STATE, MySQLiteHelper.C_TRANSACTION_SOURCE}, 
            new int[]{ R.id.lDate, R.id.lDescription, R.id.lMissValue},SimpleCursorAdapter.IGNORE_ITEM_VIEW_TYPE);

   }

    setListAdapter(adapter);    
    listView = getListView();
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener()
            {
                @Override
                public void onItemClick(AdapterView<?> arg0, View view,int position, long id) {

                   Log.w(TransactionView.class.getName(), "Item click listener");
                   Toast.makeText(TransactionView.this, "Item clicado", Toast.LENGTH_LONG).show();
                }   
            } 
        );

      **item_list_row**
        <TableRow xmlns:android="http://schemas.android.com/apk/res/android"
  android:paddingTop="5dip"
  android:paddingBottom="8dip"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:minHeight="?android:attr/listPreferredItemHeight"
  android:background="@android:drawable/list_selector_background"
>

<TextView
    android:id="@+id/lDate"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_marginRight="3dp"
    android:background="@drawable/et_style"
    android:gravity="center"
    android:textColor="#c2c2c2"
    android:textAppearance="?android:attr/textAppearanceMedium"
    />

<TextView
    android:id="@+id/lDescription"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="3dp"
    android:layout_marginRight="3dp"
    android:layout_weight="1"
    android:gravity="center"
    android:background="@drawable/et_style"
    android:textColor="#c2c2c2"
    android:textAppearance="?android:attr/textAppearanceMedium" 
    />

<TextView
    android:id="@+id/lMissValue"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="3dp"
    android:gravity="center_horizontal|center"
    android:layout_gravity="center"
    android:textColor="#DDCC2EFA"
    android:textAppearance="?android:attr/textAppearanceMedium"
    /> 
```

```
 **main_xml_list**
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:background="@drawable/background_tile"
   android:orientation="vertical" >

 <ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
  </ListView>

 </LinearLayout> 
```**

# java - 字符串赋值会导致内存泄漏吗？

> ID：14437310
> 
> 赞同：1
> 
> 时间：2013-01-21T11:09:43.767
> 
> 标签：java, memory-leaks, java-me

在我的 J2ME 代码中，我有一个看起来像这样的循环，

```
 Enumeration jsonEnumerator = someJSONObject.keys();

while(jsonEnumerator.hasMoreElements()){

String key = (String) jsonEnumerator.nextElement();
String value = someJSONObject.getJSONObject(key);
someOtherJson.put(value,key);
} 
```

考虑到上述代码中的字符串分配

```
String key = (String) jsonEnumerator.nextElement(); 
```

这是使用字符串池而不是实例化新对象的正确方法，还是分配字符串以避免内存泄漏的其他方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:33:16.957

字符串分配不会导致内存泄漏。

该代码中的其他地方是否存在字符串泄漏取决于从该代码中无法辨别的几件事：

*   JSON 实现如何创建键和值字符串。（如果它`String.substring()`在更大的字符串上使用，您可能会通过共享字符串支持数组泄漏存储。）
*   是否`someOtherJson`被泄露。

正常的方法（在 Java SE 中）是不用担心它......直到您从内存分析中获得证据表明存在*泄漏*。在 Java ME 实现中，内存通常更受限制，而 GC 实现可能相对较慢。因此有必要减少对象（包括字符串）的数量和大小。但这不是内存泄漏问题......我仍然建议*先*进行分析，而不是跳入可能浪费精力的内存效率活动。

* * *

> 这是使用字符串池而不是实例化新对象的正确方法，还是分配字符串以避免内存泄漏的其他方法是什么？

正如我所说，上面的代码没有泄漏。

字符串池不会消除泄漏，也不一定会降低垃圾对象的创建率。他们*可以*在任何给定时间减少活动的 String 对象的数量，但这是有代价的。

如果您想尝试这种方法，使用它`String.intern()`来管理您的字符串池是最简单的。但这不一定有帮助。而且实际上会使事情变得更糟。（如果没有足够的共享潜力，interned string pool 的空间开销可能会超过节省的空间。此外，interned string pool 为 GC 创造了更多的工作 - 更多的跟踪，以及更有效的弱引用处理。 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:07:32.033

No, String assignment, by itself does not create anything. The only thing resembling a "leak" in Java is when you put a whole bunch of references into some array or other structure and then forget about it -- leave the structure "live" (accessible) but don't use it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:35:32.930

如果您在谈论*实习字符串*，那么这里就不会发生。只有在源代码中找到的常量字符串才会自动发生。

任何其他字符串都将被垃圾收集，就像任何其他对象一样。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-21T11:17:35.330

我的建议是：

```
Enumeration jsonEnumerator = someJSONObject.keys();

while(jsonEnumerator.hasMoreElements()) {
    String key = (String) jsonEnumerator.nextElement();
    someOtherJson.put(someJSONObject.getJSONObject(key), key);
} 
```

字符串实例化会导致 J2ME 中的内存泄漏，因为 J2ME 使用不良的垃圾收集方法来减少资源使用。

当您尝试开发 J2ME 应用程序时，请注意内存和 CPU 使用情况。

# sql - SQL 到休眠条件

> ID：14437312
> 
> 赞同：0
> 
> 时间：2013-01-21T11:09:51.250
> 
> 标签：sql, nhibernate, fluent-nhibernate

我将 ClassA 类映射到表 TableA。如何将下一个 sql 转换为 NHibernate 标准？

```
 SELECT DISTINCT t.Id, (Select COUNT(*) FROM TableA WHERE [Id] = t.Id)
  FROM TableA AS t 
```

**更新 1：** TableA 确实是一个视图。它用于合并来自两个表的统计信息。ID 不是身份，只是字段，如有歧义，请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:23:10.103

来自[http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection](http://nhibernate.info/doc/nh/en/index.html#querycriteria-projection)：

```
List results = session.CreateCriteria(typeof(ClassA))
    .SetProjection( Projections.ProjectionList()
        .Add( Projections.RowCount() )
        .Add( Projections.GroupProperty("Id") ) )
    .List(); 
```

或者使用 Linq：

```
from a in session.Query<ClassA>
group a by a.Id into g
select new { g.Key, g.Count()) 
```

# c# - .net 最大班级规模

> ID：14437321
> 
> 赞同：1
> 
> 时间：2013-01-21T11:10:10.353
> 
> 标签：c#, asp.net, compiler-construction

ASP.NET 3.5 中类的大小是否存在限制（可能是编译器限制）？

我有一个单独的类文件，它会不断增长并且可能会变得非常大（很容易有 100k 行代码，或 10k 个成员）。

我只需要知道代码行数、原始文件大小或单个类中的成员数量是否有限制。

请不要问我为什么要做一些听起来既愚蠢又疯狂的事情；我很清楚这种方法的后果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:13:40.170

绝对不是，没有一个类的最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T20:27:05.267

FWIW，我有一个包含 165k 行代码（~6MB）的文件，它是我用我的工具生成的（它旨在加载一些测试数据）。

在 Linux (Ubuntu 16.04) 上，当我尝试使用文件中的类型时收到 System.AccessViolationException。

所以看起来确实有一些限制。

我应该提到这是使用 .NET Core 2.0

# django - 部署 django 站点（wsgi）

> ID：14437324
> 
> 赞同：0
> 
> 时间：2013-01-21T11:10:21.170
> 
> 标签：django, deployment, mod-wsgi

尝试对生产和开发使用 2 个不同的设置文件。

我设置 DJANGO_SETTINGS_MODULE='mysite.settings_production'
在运行服务器时完美运行`runserver`

但是，当我使用 apache 运行它时，apache 似乎没有使用 wsgi.py 文件中的设置，`~/.bash_profile`而是使用`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")`wsgi.py 文件中的设置

我想这可能是因为 apache 在不同的用户上运行，而不是我的.. 好的.. 所以它似乎在我的 ec2 ubuntu 上作为 www-data 运行。

所以我必须创建 /home/www-data/.bash_profile 并设置环境变量？

使用不同的设置文件似乎很麻烦。
有没有明显更简单的方法来做到这一点？（我不想更改 wsgi.py 文件，因为它是源代码控制的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:35:32.140

好吧，这真是错误的方式。对不同环境进行单独设置的常用方法是将环境相关存储在 local_settings.py （或您命名的任何名称）中并从 settings.py 中导入

```
from local_settings.py import * 
```

不要将 local_settings.py 放在项目存储库下，因为您将在每次提交时覆盖它。如果您想保留本地设置的样本，请将其放入单独的文件中，例如 local_settings.py.example

您可以在 settings.py 的开头导入本地设置（因此 settings.py 设置将覆盖本地设置），也可以在最后导入本地设置，或者在这两种情况下都有两个本地设置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:25:57.363

使用 bash_profile 是完全错误的方法。

正确的方法是使用 wsgi.py 文件。但是，由于您不想这样做（尽管我不明白版本控制与任何事情有什么关系），因此您可以使用 SetEnv 直接在 Apache 配置中设置环境变量：

```
SetEnv DJANGO_SETTINGS_MODULE mysite.settings 
```

# java - 如何沿旋转方向移动对象？

> ID：14437325
> 
> 赞同：1
> 
> 时间：2013-01-21T11:10:26.117
> 
> 标签：java, android, language-agnostic, lua

我想问一下在物体旋转的方向上移动物体的正确方法是什么？

现在我有：

```
 local ang = body:getAngle() * 180 / 3.14      /// get body's rotation in degrees
    local x, y = body:getPosition();      /// get current position
    ang = ang%360

    x = x + math.sin(ang) 
    y = y + math.cos(ang)

    print(ang)

    body:setPosition(x,y) 
```

然而身体的动作却很诡异。任何想法我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:54:17.427

您需要以弧度为单位的角度，并对 x 值使用余弦函数，对 y 值使用正弦函数。lua 中的这个函数（未经测试）看起来像这样：

```
function moveAlongAngle(body, angleInRadians, dt, speedVector)
    local x, y = body:getPosition()
    x = x + math.cos(angleInRadians) * dt * speedVector.x
    y = y + math.sin(angleInRadians) * dt * speedVector.y
    body:setPosition(x,y)
end 
```

这是因为您将角度从极坐标转换为笛卡尔坐标：[http ://en.wikipedia.org/wiki/Polar_coordinate_system#Converting_between_polar_and_Cartesian_coordinates](http://en.wikipedia.org/wiki/Polar_coordinate_system#Converting_between_polar_and_Cartesian_coordinates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:31:40.837

你正在混合弧度和度数。首先，您将角度转换为弧度，但之后您尝试使用模数对度数进行归一化。你不需要归一化，因为 sin 和 cos 是周期函数。

math.sin 和 math.cos 实际上期望以弧度而不是度为单位的角度，因此您需要除以 180 并乘以 pi。

这当然是假设您的初始变量 ang 以度为单位。

# java - 如何使用 Framework Simple 将数据映射到正确的继承类

> ID：14437327
> 
> 赞同：1
> 
> 时间：2013-01-21T11:10:34.147
> 
> 标签：java, xml, inheritance, simple-framework

如何将后续 XML 文件映射到正确的继承类。问题是，我有四种不同的 API 方法，这是名为“api_search_location”的方法之一的响应

```
<?xml version="1.0" encoding="UTF-8"?>
<ft>
  <response>
    <client device="" appName="" clientId="123" appVersion=""/>
    <responseType>api_search_location</responseType>
    <responseTime>2013-01-21 11:55:43</responseTime>
    <locations status="list">
      <location name="60201040" title="Praterstern" municipality="Wien" type="stop" listIndex="0:1" coordName="wgs84" wgs84Lat="48.21815" wgs84Lon="16.39176" coordX="" coordY="" distanceMeter="" durationMinutes=""/>
      <location name="60201848" title="Praterstern/Lassallestraße" municipality="Wien" type="stop" listIndex="1:2" coordName="wgs84" wgs84Lat="48.21962" wgs84Lon="16.39382" coordX="" coordY="" distanceMeter="" durationMinutes=""/>
    </locations>
    <message messageCode="1">ok</message>
  </response>
</ft> 
```

对于所有四种响应类型，我都有以下类“FtResponse”：

```
package model.response;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

@Root(name="ft")
public class FtResponse {
    @Element
    private Response response;

    public FtResponse() {
        super();
    }

    public FtResponse(Response response) {
        super();
        this.response = response;
    }

    public Response getResponse() {
        return response;
    }

    public void setResponse(Response response) {
        this.response = response;
    }

    @Override
    public String toString() {
        return "FtResponse [response=" + response + "]";
    }

} 
```

我有“响应”类。所有特定的响应类都继承自这个通用类：

```
package model.response;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

    @Root(name = "request")
    public class Response {
        @Element
        private Client client;
        @Element
        private String responseType;
        @Element
        private String responseTime;

        public Response() {
            super();
        }

        public Response(Client client, String responseType, String responseTime) {
            super();
            this.client = client;
            this.responseType = responseType;
            this.responseTime = responseTime;
        }

        public Client getClient() {
            return client;
        }

        public void setClient(Client client) {
            this.client = client;
        }

        public String getResponseType() {
            return responseType;
        }

        public void setResponseType(String responseType) {
            this.responseType = responseType;
        }

        public String getResponseTime() {
            return responseTime;
        }

        public void setResponseTime(String responseTime) {
            this.responseTime = responseTime;
        }

        @Override
        public String toString() {
            return "Response [client=" + client + ", responseType=" + responseType
                    + ", responseTime=" + responseTime + "]";
        }

    } 
```

这是我的特定响应类之一：

```
package model.response;

import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

@Root(name = "response")
public class SearchLocationStopsNearbyResponse extends Response {
    @Element
    private Client client;
    @Element
    private String responseType;
    @Element
    private String responseTime;
    @Element
    private LocationCentre locationCentre;
    @Element
    private Locations locations;
    @Element
    private Message message;

    public SearchLocationStopsNearbyResponse() {
        super();
    }

    public SearchLocationStopsNearbyResponse(Client client,
            String responseType, String responseTime,
            LocationCentre locationCentre, Locations locations, Message message) {
        super();
        this.client = client;
        this.responseType = responseType;
        this.responseTime = responseTime;
        this.locationCentre = locationCentre;
        this.locations = locations;
        this.message = message;
    }

    public Client getClient() {
        return client;
    }

    public void setClient(Client client) {
        this.client = client;
    }

    public String getResponseType() {
        return responseType;
    }

    public void setResponseType(String responseType) {
        this.responseType = responseType;
    }

    public String getResponseTime() {
        return responseTime;
    }

    public void setResponseTime(String responseTime) {
        this.responseTime = responseTime;
    }

    public LocationCentre getLocationCentre() {
        return locationCentre;
    }

    public void setLocationCentre(LocationCentre locationCentre) {
        this.locationCentre = locationCentre;
    }

    public Locations getLocations() {
        return locations;
    }

    public void setLocations(Locations locations) {
        this.locations = locations;
    }

    public Message getMessage() {
        return message;
    }

    public void setMessage(Message message) {
        this.message = message;
    }

    @Override
    public String toString() {
        return "SearchLocationStopsNearbyResponse [client=" + client
                + ", responseType=" + responseType + ", responseTime="
                + responseTime + ", locationCentre=" + locationCentre
                + ", locations=" + locations + ", message=" + message + "]";
    }

} 
```

我的问题是，当我尝试将所有数据读入嵌套类时，出现以下异常：

```
org.simpleframework.xml.core.ElementException: Element 'locationCentre' does not have a match in class model.response.Response at line 7
    at org.simpleframework.xml.core.Composite.readElement(Composite.java:527)
    at org.simpleframework.xml.core.Composite.readElements(Composite.java:445)
    at org.simpleframework.xml.core.Composite.access$400(Composite.java:59)
    at org.simpleframework.xml.core.Composite$Builder.read(Composite.java:1383)
    at org.simpleframework.xml.core.Composite.read(Composite.java:201)
    at org.simpleframework.xml.core.Composite.read(Composite.java:148)
    at org.simpleframework.xml.core.Composite.readVariable(Composite.java:623)
    at org.simpleframework.xml.core.Composite.readInstance(Composite.java:573)
    at org.simpleframework.xml.core.Composite.readUnion(Composite.java:549)
    at org.simpleframework.xml.core.Composite.readElement(Composite.java:532)
    at org.simpleframework.xml.core.Composite.readElements(Composite.java:445)
    at org.simpleframework.xml.core.Composite.access$400(Composite.java:59)
    at org.simpleframework.xml.core.Composite$Builder.read(Composite.java:1383)
    at org.simpleframework.xml.core.Composite.read(Composite.java:201)
    at org.simpleframework.xml.core.Composite.read(Composite.java:148)
    at org.simpleframework.xml.core.Traverser.read(Traverser.java:92)
    at org.simpleframework.xml.core.Persister.read(Persister.java:625)
    at org.simpleframework.xml.core.Persister.read(Persister.java:606)
    at org.simpleframework.xml.core.Persister.read(Persister.java:584)
    at org.simpleframework.xml.core.Persister.read(Persister.java:543)
    at org.simpleframework.xml.core.Persister.read(Persister.java:521)
    at org.simpleframework.xml.core.Persister.read(Persister.java:426)
    at TestRead.main(TestRead.java:19) 
```

我理解 Simple 试图在“Response”类中找到元素“locationCentre”，但没有合适的元素。但是我怎么能对 Simple 说它应该选择正确的特定类，在这种情况下是“SearchLocationStopsNearbyResponse”，具体取决于 XML 响应文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:39:58.383

如果我理解正确，您`<responseType>...</responseType>`可以决定哪个实现`Response`是正确的。*我猜Simple*中没有这样的功能。

**[工会](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#union)**可能会在这里为您提供帮助。

但是 - 您可以使用[`Converter`](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/convert/Converter.html)或自定义序列化/反序列化的过程[`Visitor`](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/strategy/Visitor.html)。这可能不像某些注释那么容易，但应该能够解决您的问题。

因此，如果您使用 a ，您必须执行以下操作`Converter`：

*   实现一个新类，例如。`ResponseConverter`它实现了`Converter`-Interface （如果你不需要它，你可以离开`write()`- 方法）
*   用注释（例如）标记你的`Response`-class（以及扩展它的类？），这样*简单*地知道你想使用你自己的。`@Convert``@Convert(ResponseConverter)`
**   添加`AnnotationStrategy`到您的`Serializer`（例如`Serializer ser = new Persister(new AnnotationStrategy());`）*

 ***也可以看看：**

*   [使用转换器覆盖序列化](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#converters)
*   [拦截序列化过程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#intercept)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:14:37.043

为位置中心尝试@Element(required=false)。它应该工作。*

# c - 远程登录我的套接字侦听端口正在关闭套接字

> ID：14437328
> 
> 赞同：3
> 
> 时间：2013-01-21T11:10:34.230
> 
> 标签：c, sockets, telnet, forceclose

我是这个网站的新手，所以如果这个问题之前已经回答过，我会提前道歉，尽管我在向这里的每个人开放之前已经搜索过它。

我在我的一个 C 程序中使用套接字编程。它具有服务器和客户端模块，其中服务器和客户端可以双向通信。程序运行良好，因为我能够双向发送文件和消息。我的服务器程序正在使用端口`3873`，我已经确认了这一点`netstat -anp | grep 3873`

我观察到套接字的一种奇怪行为，尤其是当我尝试使用浏览器连接套接字时，例如`http://localhost:3873`or `telnet localhost 3873`。它立即关闭套接字和随后的'netstat -anp | grep 3873' 输出确认 localhost 不再侦听端口`3873`。

如果有人能阐明这种行为，我将不胜感激。这是预期的行为吗？

这是服务器代码的相关部分：主程序启动一个专用线程并调用startFileServerMT，随后调用handleClient为套接字上连接到服务器的每个客户端提供服务

```
int handleClient(void *ptr){
    DEBUG("Inside the %s %s() \n",__FILE__,__func__);
    int  connectSOCKET;
    connectSOCKET = (int ) ptr;
    char recvBUFF[4096],sendBUFF[4096];
    char *filename;
    FILE * recvFILE;
    char *header[4096];    
    while(1){
        if( recv(connectSOCKET, recvBUFF, sizeof(recvBUFF), 0) > 0){
            if(!strncmp(recvBUFF,"FBEGIN",6)) {                          
                recvBUFF[strlen(recvBUFF) - 2] = 0;
                parseArgs(header,recvBUFF);                                 
                filename = (char*) strngDup(header[1]);                                
                DEBUG("  About to receive file: %s\n", filename);
            }

            char *rfile = ALLOC(sizeof(char) * (strlen(This.uploadDIR) + strlen(filename) + 35));
            strcpy(rfile,This.uploadDIR);

            if (strngLastChar(rfile) == '/'){
                strcat(rfile,filename);
            }else{
                strcat(rfile,"/");
                strcat(rfile,filename);        
            }
            DEBUG("  Absolute file is : %s\n", rfile);
            recvBUFF[0] = 0;
            if ((recvFILE = fopen (rfile,"w" )) == NULL){
                LogError("Server could not create file %s on the shared location %s.\n",filename,This.uploadDIR);                
            }else{
                bzero(recvBUFF,4096);
                int fr_block_sz, write_sz;
                while((fr_block_sz = recv(connectSOCKET, recvBUFF, 512, 0)) > 0 ){
                    write_sz = fwrite (recvBUFF , sizeof(recvBUFF[0]) , fr_block_sz , recvFILE );
                    DEBUG("  Received buffer is : %s\n", recvBUFF);
                    if(write_sz < fr_block_sz){
                        LogError("Failed writing file %s on the Server shared location.\n",filename);
                        break;
                    }
                    bzero(recvBUFF,4096);
                    recvBUFF[0] = 0;
                    if(write_sz == 0 || fr_block_sz != 512 ){   
                        break;
                    }
                }

                if(fr_block_sz < 0){
                    if(errno == EAGAIN){
                        LogError("Server collection file %s receive timed out.\n",filename);
                    }else{
                        LogError("Failed file %s transfer due to error %d\n",filename,errno);
                        fclose(recvFILE);
                        FREE(rfile);
                        // Start - Following code send failed status to client    
                        sprintf(sendBUFF,"FSTATUS:FAILED\r\n");    

                        if (send(connectSOCKET, sendBUFF, sizeof(sendBUFF), 0) >= 0){
                            DEBUG("File transfer status for file %s sent\n",filename);
                        }else{
                            DEBUG("Failed sending transfer status for file %s\n",filename);
                            return FALSE;
                        } 

                        // End

                        close(connectSOCKET);
                        return FALSE;
                    }
                }
                    DEBUG("File %s received on OM Server successfully.\n",filename);

                    // Start - Following code send failed status to client    
                    sprintf(sendBUFF,"FSTATUS:SUCCESS\r\n");    

                    if (send(connectSOCKET, sendBUFF, sizeof(sendBUFF), 0) >= 0){
                        DEBUG("File transfer status for file %s sent\n",filename);
                    }else{
                        DEBUG("Failed sending transfer status for file %s\n",filename);
                        return FALSE;
                    } 
                    // End

                    fclose(recvFILE);
                    updateTargets(rfile);
                    FREE(rfile);
                    close(connectSOCKET);
                    break;

            }
        }
        else {
            LogInfo("Client dropped connection\n");
        }

/** End*/  
        return TRUE;
    }    
}

int startFileServerMT(){
    DEBUG("Inside %s %s() \n",__FILE__,__func__);

    int listenSOCKET, connectSOCKET[512],thread_status;
    int socketINDEX = 0;

    pthread_t clientFileThread[512];
    socklen_t clientADDRESSLENGTH[512];
    struct sockaddr_in clientADDRESS[512], serverADDRESS;    

    if((listenSOCKET = socket(AF_INET, SOCK_STREAM, 0)) < 0 ){
        LogAbortError("File server could not create socket.\n");
        close(listenSOCKET);
        return FALSE;        
    }

    serverADDRESS.sin_family = AF_INET;
    serverADDRESS.sin_addr.s_addr = htonl(INADDR_ANY);  
    serverADDRESS.sin_port = htons(This.serverport);

    if (bind(listenSOCKET, (struct sockaddr *) &serverADDRESS, sizeof(serverADDRESS)) < 0) {
        LogAbortError("File server could not bind socket and will stop server now.\n");
        close(listenSOCKET);
        This.stopped = TRUE;
        return FALSE;
    }

    if(listen(listenSOCKET, 5) == -1){
        LogAbortError("Server failed to listen on port %d and will stop server now.\n",This.serverport);
        close(listenSOCKET);
        This.stopped = TRUE;
        return FALSE;        
    }else{
        LogInfo("Server listening on port %d successfully.\n",This.serverport);        
    }

    clientADDRESSLENGTH[socketINDEX] = sizeof(clientADDRESS[socketINDEX]);

    while(TRUE){   
       // DEBUG("  Inside the file server main loop index[%d].\n",socketINDEX);

        connectSOCKET[socketINDEX] = accept(listenSOCKET, (struct sockaddr *) &clientADDRESS[socketINDEX], &clientADDRESSLENGTH[socketINDEX]);
            if(connectSOCKET[socketINDEX] < 0){
            LogError("Server could not accept connection.\n");
            close(listenSOCKET);
            return FALSE;
        }else
            DEBUG("  Another client connected to server socket.\n");

        ThreadCreateDetached( &clientFileThread[socketINDEX], handleClient, connectSOCKET[socketINDEX]);     

        if(socketINDEX=512) {
            socketINDEX = 0;
        } else { 
            socketINDEX++;
        }                                  

        if (This.stopped == TRUE){
            close(listenSOCKET);
            return TRUE;
        }      
/** End*/  
//        return TRUE;
    }

    close(listenSOCKET);
    return TRUE;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:59:27.243

这是你的问题——或者至少是你问题的一部分。这不仅是一个错误的错误（connectSOCKET 接受 0-511 的索引，*所以*如果你在 512，你已经写过了 connectSOCKET 数组的末尾），但你做了一个分配而不是比较：

```
 if(socketINDEX=512) { // Error: you are *setting* socketINDEX to 512, 
                          // then immediately *resetting* it back to 0\. So
                          // every new connection overrides the existing
                          // socket.
        socketINDEX = 0;
    } else { 
        socketINDEX++;
    } 
```

作为旁注，你真的应该重构你的代码并尝试清理它。

# mysql - mysql导入具有巨大blob表字段的大文件

> ID：14437332
> 
> 赞同：0
> 
> 时间：2013-01-21T11:10:44.587
> 
> 标签：mysql, import

您好我正在尝试导入 sql 文件，但有一个问题。我的字段是 LONGBLOB 14MB，当 mysql 尝试执行此查询时，它会失败，并显示 `ERROR 2006 (HY000) at line 612: MySQL server has gone away`如何导入此类表。

我使用命令行来导入这个文件。

编辑：仅倾倒这一行后，它的重量为 28MB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:20:00.613

在 my.ini 文件中，有一个名为 max_allowed_pa​​cket 的属性，它指定可以传输到 mysql 客户端或服务器或从 mysql 客户端或服务器传输的最大可能数据包。您应该将 max_allowed_pa​​cket 属性设置为更高的值。并重启mysql。

如果您无权访问 my.ini 文件，请使用以下查询

```
SET GLOBAL max_allowed_packet=524288000; 
```

根据需要输入值而不是 524288000

# python - 带有 wx gui 的应用程序很忙并且崩溃

> ID：14437336
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:02.527
> 
> 标签：python, multithreading, wxpython

首先对不起我的英语。

我用我的`Agilent`. 我写了一些高级函数来简单地做到这一点。现在我想在测量过程中绘制结果。我使用`wxPython`和`matplotlib`。

我的代码（简化）：

```
class MyInstr():
    def __measurement(self, start, step, stop, plt, result):
        if plt:
            app = wx.PySimpleApp()
            app.f = MeasGraph(result)
            app.f.Show()
            def st(app):
                app.MainLoop()

        th = threading.Thread(target=st, args=(app,))
        th.start()

        for ...
            get_data():
                ...
                result.append(new_data)
                app.f.redraw_plot(result)

    def bsweep(self, start, step, stop, plt=True):
        result = {'info': {}, 'prim': [], 'sec': [], 'swp:' []}
        self.__measurement(start, step, stop, plt, result)

class MeasGraph(wx.Frame):
    def __init__(self, result):
        self.data = result
        wx.Frame.__init__(self, None, -1, 'Measurement Result')
        self.create_main_panel()

    def create_main_panel(self):
        self.panel = wx.Panel(self)
        self.init_plot()
        self.canvas = FigureCanvas(self.panel, -1, self.fig)
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        self.vbox.Add(self.canvas, 1, flag=wx.LEFT | wx.TOP | wx.GROW)
        self.panel.SetSizer(self.vbox)
        self.vbox.Fit(self)

    def init_plot(self):
        self.fig = Figure()
        self.axes = self.fig.add_subplot(111)
        self.primary = self.axes.plot([0], [0])[0]

    def redraw_plot(self, result):
        self.data = result
        self.primary.set_xdata(self.data['swp'])
        self.primary.set_ydata(self.data['prim'])
        self.canvas.draw()

def main():
    instr = MyInstr()
    instr.bsweep(0, -0.1, -5, plt=True) 
```

除了带有绘图的窗口外，它工作正常。它很忙，当我点击它时，我的应用程序崩溃了。

谢谢你。

* * *

**UPD 1：**好的，但我希望能够多次运行测量，并且我想同时查看所有以前的图和当前图。例如：

```
instr.bsweep(0, -0.1, -5, plt=True) # measurement (up to 5 Volts) and plot 
```

现在我发现我需要在高达 10 伏的电压下进行测量。因此：

```
instr.bsweep(0, -0.1, -10, plt=True) 
```

我想将一个情节与另一个情节进行比较。

但我不能这样做，因为以前的情节（如果它将在主线程中）阻塞了我的 shell 或我的应用程序。

# node.js - 静态变量更改不生效，nodeJS

> ID：14437337
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:03.733
> 
> 标签：node.js, static, static-variables, static-functions

我正在编写一个基于 nodeJS 的小型电子邮件服务器。我有一个`Request`对象，其中有一个存储所有用户的静态变量，其定义如下：

```
Request.publicMemory = new Object();
Request.publicMemory.users = new Object();

Request.prototype.getPublicMemory = function() {
    return (Request.publicMemory);
}; 
```

我在其中存储`User`对象：

```
function User(params) {
    this.mails = new Array();
    this.sent = new Array();
    var details = new Object();
    details.username = params.username;
    details.password = params.password
    return;
} 
```

如您所见，还有一个返回它的静态函数。

现在，我可以添加 uesrs 并且实际上进行了更改，但是当我更改任何内容时`Request.publicMemory.usesrs[someuser]`，更改始终是函数本地的，并且不会在其他地方生效。这是我如何做的一个例子：

```
function addMail(request) { 
    var users = request.getPublicMemory().users;
    var to = request.parameters['to'];
    users[to].mails.push(mail);
} 
```

我以前从未在 nodeJS 中使用过静态变量，而且我对它很陌生，所以这可能很愚蠢，但我仍然无法解决它。有任何想法吗？

谢谢！

# java - 无状态企业 Bean 中的 Web 服务客户端

> ID：14437338
> 
> 赞同：0
> 
> 时间：2013-01-21T11:11:05.240
> 
> 标签：java, web-services, ejb

实现无状态 EJB 3.1 以调用 Web 服务的正确方法是什么。我的客户端作为 Servlet 工作，但我想将调用移动到 EEJ bean 中。我必须在 SOAP 标头信封中添加用户名和密码才能访问 WS，这工作正常。

servlet 使用的服务如下所示；

```
@WebServiceClient(name = "MessageService", targetNamespace = "http://...", wsdlLocation = "...wsdl")
public class MessageService
    extends Service 
```

我可以包装`MessageService`在无状态 EJB 中还是应该使用 bean 本身`@WebServiceRef`（如教程中所示）而不包装 MessageService ？

[教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnayn.html#bnayx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T06:16:37.507

### 本地服务

如果*客户端*和*提供者*位于应用服务器上的相同 EAR 或 WAR 中，则可以像*序号*EJB 一样调用。例如

```
@WebService
@Stateless
public class CalculatorBean implements Calculator {
    public int add(int a, int b) {
        return a + b;
    }
} 
```

`CalculatorBean`是线程安全的。方法中发生的所有业务逻辑`add`都是容器管理事务的一部分，不参与任何全局事务。

或者，客户端代码可以在 JNDI 名称空间中查找。

### 远程服务

运行时可以将服务对象或端口对象注入到使用 注释的成员变量中`javax.xml.ws.WebServiceRef`。

```
@WebServiceRef(CalculatorService.class)
private Calculator port; 
```

该类使用具有属性`CalculatorService`的`javax.xml.ws.WebServiceClient`注解（服务的客户端）进行注解`wsdlLocation`。

* * *

如果您想将 WebService 包装到 EJB 中，请参阅此[答案](https://stackoverflow.com/a/11357999/870248)。要阅读有关此内容的讨论，请参阅[EJB 和 Web 服务：两全其美](http://veithen.github.io/2009/11/15/ejb-and-web-services.html)。

# c# - 外部 jar 文件包含在 monodroid 的 java 绑定库中吗？

> ID：14437339
> 
> 赞同：2
> 
> 时间：2013-01-21T11:11:07.910
> 
> 标签：c#, android, visual-studio-2010, jar, xamarin.android

我刚开始在 monodroid 中开发，我也知道 android 和 c#。我已经使用 viewflow 示例创建了 android 应用程序。所以我现在有了 viewflow 库的 jar 文件，我已将该 .jar 文件包含在我的 monodroid java 绑定库中，如[http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar) )中定义的那样. 但是当我构建那个 java 库项目时，我遇到了以下错误。我已经坚持了将近 3 个小时。'Org.Taptwo.Android.Widget.ViewFlow' 没有实现继承的抽象成员 'Android.Widget.AdapterView.RawAdapter.set'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:29:03.330

这已被归档为[错误 11279](https://bugzilla.xamarin.com/show_bug.cgi?id=11279)。解决方法是在绑定项目中添加一个文件，其内容如下：

```
using Android.Runtime;

namespace Org.Taptwo.Android.Widget {

  partial class ViewFlow {
    protected override Java.Lang.Object RawAdapter {
      get {return Adapter.JavaCast<Java.Lang.Object>();}
      set {Adapter = value.JavaCast<global::Android.Widget.IListAdapter>();}
    }
  }
} 
```

根据需要更改命名空间和类型名称以修复其他绑定项目。

# mongodb - 如何使用 MongoMapper 重命名 Mongodb 集合中的列？

> ID：14437341
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:09.510
> 
> 标签：mongodb, mongomapper

Mongodb 提供了一个重命名列名的选项，如下所示

```
db.collection.update({},{'$rename'=> {'old_name' => 'new_name'}}, false,true) 
```

是否可以使用 MongoMapper 来做同样的事情？该文档没有指定任何内容。

我还尝试从 MongoMapper 获取 Mongodb 连接句柄

```
connection = MongoMapper.connection 
db = MongoMapper.database
collection = db.collection('collection_name')
collection .update(....) 
```

并执行相同的查询，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:45:50.120

MongoMapper 使用 10gen Ruby 驱动程序，MongoMapper::Document 提供对底层驱动程序对象的访问。

以下工作测试表明您可以使用 Model.collection.update 来做您想做的事情，重命名模型“模型”的字段。如果要更新/重命名多个文档，请确保使用 :multi => true 选项进行更新。

应用程序/模型/model.rb

```
class Model
  include MongoMapper::Document
end 
```

测试/单元/model_test.rb

```
require 'test_helper'

class ModelTest < ActiveSupport::TestCase
  def setup
    Model.remove
  end

  test "rename" do
    puts "Model.collection.class: #{Model.collection.class}"
    puts "Model.database.class: #{Model.database.class}"
    Model.create( 'old_name' => 'name value 0', 'another_key' => 'another value 0' )
    Model.create( 'old_name' => 'name value 1', 'another_key' => 'another value 1' )
    assert_equal(2, Model.where( 'old_name' => { '$exists' => true } ).count)
    Model.collection.update( {}, { '$rename' => { 'old_name' => 'new_name' } }, :multi => true )
    assert_equal(0, Model.where( 'old_name' => { '$exists' => true } ).count)
    p Model.all
  end
end 
```

$耙子测试

```
Rack::File headers parameter replaces cache_control after Rack 1.5.
Run options: 

# Running tests:

Model.collection.class: Mongo::Collection
Model.database.class: Mongo::DB
[DEPRECATED] The 'safe' write concern option has been deprecated in favor of 'w'.
[#<Model _id: BSON::ObjectId('5101809d7f11ba1256000001'), another_key: "another value 0", new_name: "name value 0">, #<Model _id: BSON::ObjectId('5101809d7f11ba1256000002'), another_key: "another value 1", new_name: "name value 1">]
.

Finished tests in 0.012344s, 81.0110 tests/s, 162.0220 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

# php - 从 MySQL 数据库中获取数组

> ID：14437342
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:09.480
> 
> 标签：php, mysql, sql, arrays

我正在尝试创建一个页面，用于将激活邮件重新发送给我的站点中尚未收到它的成员。我无法从中获取所需的数据`mysql`。这是我尝试过的 -

```
$act = mysql_query("SELECT activate FROM users WHERE email='$mail'"); 
```

其中`users`是表名，`activate`是要从中获取数据的列名。要获取代码的电子邮件地址存储在其中，`$mail`并且`email`是表中的列名。

我想从与 column`activate`的`email`值与`$email`.

这是我目前得到的输出 -`Resource id #11`

虽然正确的输出必须类似于 -`55445513`

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:27:54.677

用这个：

```
$act = mysql_query("SELECT activate FROM users WHERE email='$mail'");
$act_array = mysql_fetch_array($act); 
```

然后，您可以为数组元素结果引用 $act_array。

# c# - 从客户端（JavaScript）调用代码隐藏（安全页面）中的方法

> ID：14437344
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:13.470
> 
> 标签：c#, javascript, asp.net, ajax, code-behind

首先让我说我对 ASP.NET 和 C# 非常陌生。我有一个简单的 Web 表单，其中包含要发送到代码隐藏页面的数据。这个想法是捕获数据并将其作为 JSON 对象发送到代码隐藏方法。请注意，这是通过 JavaScript/AJAX 完成的（参见下面的代码）。然后，代码隐藏方法将执行一个简单的 HTTP“PUT”请求来更新数据。.apsx 页面位于 Secure 文件夹中（使用 Secure Master）。不知道会不会影响方法调用？

以下是我到目前为止的代码。

**JavaScript/AJAX：**

```
var saveOptions =
{
  url: "Profile.aspx/UpdateVendor",
  type: "PUT",
  dataType: 'json',
  data: JSON.stringify({ vendor: ko.mapping.toJS(vendor) }),
  contentType: "application/json",

  success: function (response)
    {
    }
} 
```

**代码隐藏：**

```
namespace PartyAtVendors.Secure
{
  [WebService]
  public partial class Profile : System.Web.UI.Page
  {
    [WebMethod]
    public static bool UpdateVendor(PartyAtApi.Models.Vendors vendor)
    {
      return true;
    }
  }
} 
```

**更新：**

问题如下。不调用代码隐藏方法。当我运行和测试代码并使用 Chrome 的“检查元素”时，我收到错误：

```
PUT http://localhost:50671/Secure/Profile.aspx/UpdateVendor 404 (Not Found) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:34:44.447

这样的静态方法在 asp.net 中称为页面方法。

您可以在同一页面上将它们称为 javascript，如下所示：

```
string data = "{mydata:myvalue}";
PageMethods.UpdateVendor(data); 
```

您需要在页面上有一个 ScriptManager 并且它应该启用 PageMethods

```
<asp:ScriptManager runat="server" EnablePageMethods="true">
</asp:ScriptManager> 
```

页面方法必须在页面上定义。它不能在控件、母版页或基本页中定义。

PageMethods 仅支持 HTTP POST（即使您在没有 PageMethods 的 javascript 代理的情况下调用它们）。[您可以在Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2007/04/04/json-hijacking-and-how-asp-net-ajax-1-0-mitigates-these-attacks.aspx)的这篇博文中阅读此安全限制的详细信息。使用 PUT 动词会导致 404 错误。

> 默认情况下，ASP.NET AJAX 1.0 仅允许在使用 JSON 调用 Web 方法时使用 HTTP POST 动词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T04:53:23.267

嗨设法解决了问题所在。

我只是将 HTTP 方法更改为“POST”，如下所示：

```
var saveOptions =
{
  url: "Profile.aspx/UpdateVendor",
  type: "POST",
  dataType: 'json',
  data: JSON.stringify({ vendor: ko.mapping.toJS(vendor) }),
  contentType: "application/json",

  success: function (response)
  {
  }
}

$.ajax(saveOptions); 
```

这似乎解决了问题，现在我可以使用 AJAX 将 JSON 数据发送到代码隐藏方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:45:54.377

您的 webmethod 和 javascript 方法应该在同一页面上。

# mysql - 哪个版本的 MySQL 支持 CUBE？

> ID：14437349
> 
> 赞同：1
> 
> 时间：2013-01-21T11:11:22.510
> 
> 标签：mysql, sql, cube

据我所知，MySQL 不支持`CUBE`，但只支持`ROLLUP`. 但是，当我尝试执行以下查询（使用`CUBE`）时：

`select ifnull(CountryCode,'total') as Country_Code, ifnull(Name,CountryCode) as Name ,sum(Population) from City GROUP BY CountryCode, NAME with CUBE;`

我收到以下错误消息：

`ERROR 1235 (42000): This version of MySQL doesn't yet support 'CUBE'`.

关于错误消息，是否有任何版本的 MySql 支持`CUBE`，或者`CUBE`已从以前版本的 MySQL 中删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:22:42.260

似乎`CUBE`MySQL 尚不支持。但是，Oracle 和 SQLServer（可能还有其他）支持它。

# magento - 将字符添加到 Magento 价格

> ID：14437350
> 
> 赞同：0
> 
> 时间：2013-01-21T11:11:30.993
> 
> 标签：magento

这是给 Magento 的。我想在产品列表页面上的所有价格中添加 *。我已经完成了其中的一些，但想知道我可以在哪里专门将它添加到捆绑、“到”和“从”价格中。我查看了 app/design/frontend/base/default/template/bundle/catalog/product/price.phtml 并找到了 price-from 和 price-to 类。我不知道在这个区块的哪个位置我可以在价格中添加星号。我想添加一些代码，但它不想在尝试发布时正确显示所有内容。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:01:30.877

为不同的产品类型输出不同的价格格式有点棘手。但是既然你已经找到了 CSS 类，为什么不用一些 JS 来做呢？

```
$$('.price-from > .price').each(function(element){ element.insert({after: '*'})}); 
```

# mobile - 智能手机移动银行应用架构

> ID：14437351
> 
> 赞同：2
> 
> 时间：2013-01-21T11:11:45.597
> 
> 标签：mobile, architecture, restful-architecture, banking

我的公司决定为我们的客户开发一个移动银行应用程序。但是我们在为移动银行选择最佳架构时感到困惑。我们的要求是

1.  移动客户端-本机/混合/基于网络（使用 phonegap 或任何其他框架）
2.  服务器-Tomcat
3.  服务层-REST web services(Jersey)
4.  DAO-休眠/可选

我的问题是——使用上述技术的移动银行业务的最佳架构是什么。

# c++ - C++ 通用输出运算符重载

> ID：14437357
> 
> 赞同：1
> 
> 时间：2013-01-21T11:12:10.987
> 
> 标签：c++, generics, overloading, operator-keyword, output

```
class W
{
private:
    long m_val1, m_val2;
public:
    W(long& val1, long& val2):m_val1(val1), m_val2(val2) {}
    template<class T>
    friend std::ostream& operator<<(std::ostream& os, const T& w);
};

class X
{
private:
    long m_val1, m_val2;
public:
    X(const long& val1, long& val2):m_val1(val1), m_val2(val2) {}
    template<class T>
    friend std::ostream& operator<<(std::ostream& os, const T& x);
};

template<class T>
std::ostream& operator<<(std::ostream& os, const T& obj)
{
    os << "m_val1: " << obj.m_val1 << ", m_val2: " << obj.m_val2 << endl;
} 
```

这没用。谁能指出我想念什么？谢谢。此外，这会导致“错误 C2593：'操作 <<' 不明确”，无论“cout << “some string”;” 用来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:16:15.067

您已经创建了一个可以为*所有*类型调用的输出运算符，很明显它应该只能用于`W`and`X`类。您需要缩小输出运算符函数的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:27:00.587

编译器可以从调用中推断出模板。因此，当您调用时`os << "m_val1: "`，根据您的模板实现，它会创建

```
template<class T>
std::ostream& operator<<(std::ostream& os, const string& obj) 
```

女巫已经存在。有关模板参数推导的更多信息[http://accu.org/index.php/journals/409](http://accu.org/index.php/journals/409)

# ruby-on-rails-3 - 从 ip 访问时产生到端口 80 的多个连接

> ID：14437362
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:29.330
> 
> 标签：ruby-on-rails-3, networking, ip

我有一个托管在共享服务器中的 rails 应用程序。最近几天，我一直在体验网站的缓慢。

当我联系托管支持时，他们说，似乎每次我们访问域时都会产生 20 个到端口 80 的连接

有什么可能成为这样的东西。

1.  可能是网络设置问题
2.  可能是rails配置问题

任何帮助将不胜感激，谢谢

我的网站在

Rails 3.2.9 乘客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:14:29.393

这听起来像是客户端的编程错误，除非您的服务器创建自连接，在这种情况下服务器端需要注意。

# javascript - 进度加载运行时禁用页面的其余部分......！

> ID：14437364
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:33.427
> 
> 标签：javascript, jsp, spinner

我是 Javascript 新手

我编写了简单的 javascript 来使用动画 gif 显示进度。

问题是虽然它工作正常，但我可以点击该 gif 图像下方的表单。

谁能指导我..??

我的js函数是

```
function search()
{
    /* doOverlayOpen('dvLoading', 470); */
    var opts = {
          lines: 17, // The number of lines to draw
          length: 10, // The length of each line
          width: 4, // The line thickness
          radius: 21, // The radius of the inner circle
          corners: 1, // Corner roundness (0..1)
          rotate: 13, // The rotation offset
          color: '#000', // #rgb or #rrggbb
          speed: 1, // Rounds per second
          trail: 60, // Afterglow percentage
          shadow: false, // Whether to render a shadow
          hwaccel: false, // Whether to use hardware acceleration
          className: 'spinner', // The CSS class to assign to the spinner
          zIndex: 2e9, // The z-index (defaults to 2000000000)
          top: 'auto', // Top position relative to parent in px
          left: 'auto' // Left position relative to parent in px
        };
    var target = document.getElementById('myDiv');
    var spinner = new Spinner(opts).spin(target);
    ...Some code.....!!!!!
} 
```

# python - 同时发生多次的简单事件

> ID：14437367
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:36.837
> 
> 标签：python, simpy

我正在使用Simpy 模拟器的[SimEvent](http://simpy.sourceforge.net/SimPy_Manual/Manuals/Manual.html#creating-and-signalling-simevents)类来定义一些事件（比如*a,b,c*）。现在我有一个等待事件*a、b*和*c*的进程，如下所示。

```
yield waitevent, self, (a, b, c) 
```

一旦发生这些事件中的任何一个，该过程将被重新激活。在我的情况下，事件可以发生多次。即两个或多个进程可以在同一*仿真时间*调用a.signal() 。如果，假设事件*a*发生 3 次，我如何获得该信息？**eventsFired**数组是否重复了相同的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T14:04:50.470

一个事件只能在给定时刻触发一次（即在模拟时间向前移动之前）。如果 a.signal() 被多次调用，它将保持被触发。有几种方法可以处理这个问题：

```
yield waitevent, self, (a, b, c)
for ev in self.eventsFired:
    if ev == a:
        print 'a fired'
    elif ev == b:
        print 'b fired'
    elif ev == c:
        print 'c fired'
    else:
        print 'discontinuous event occured' 
```

那就是如果您希望它独立响应每个触发的事件。如果这无关紧要，并且所要做的就是让代码继续执行，那么标准构造将执行以下操作：

```
yield waitevent, self, (a, b, c)
print 'event fired was', self.eventsFired[0].name 
```

# php - 显示来自 php 和 mysql 的每周 Highcharts 图表

> ID：14437372
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:48.103
> 
> 标签：php, mysql, highcharts

我正在尝试使用 Highcharts 显示图表。我正在使用 php 从 mysql db 中提取数据并创建数据数组并将它们插入到 Highcharts Jquery 中。

我需要以这种格式显示数据（不是图形表示）：

```
mon = 0
tues = 4
wed = 2
thu = 0
fri = 4
sat = 20
sun = 45 
```

星期一总是第一个，星期天最后一个。

但是我的数据是使用日期范围从数据库中提取的，我可能只能从数据库中获取一个如下所示的数组：

```
Array
(
    [0] => Array
        (
            [TotalClicksPerDay] => 35
            [weekDay] => 4 (which is my case is Thurs)
        )
} 
```

所以在这种情况下需要显示：（TotalClicksPerDay 是重要的一点）

```
mon = 0
tues = 0
wed = 0
thu = 35
fri = 0
sat = 0
sun = 0 
```

我如何将数组值添加到 Highchart 并仍然让一周中的几天显示和定位“周四”的值在正确的位置？

有没有人做过类似的事情？你能指出我正确的方向吗？我什至不知道如何开始。

这是我的 highcharts Jquery，这样您就可以看到我是如何使用数组的：

```
 jQuery(document).ready(function($) {
          var chart;
            $(document).ready(function() {
              chart = new Highcharts.Chart({
                chart: {
                  renderTo: 'container',
                  type: 'column'
                },
                title: {
                  text: '$type'
                },

   subtitle: {
              text: 'Xbox landscape'
            },
            xAxis: {
              categories: 
              $categoryGraph //php array
              ,labels: {
              rotation: 0,
                align: 'center',
                x: 0,
                y: 20,
                style: {
                  fontSize: '8px',
                  fontFamily: 'Verdana, sans-serif'
                }
              }
            },
            yAxis: {
              min: 0,
              title: {
                text: 'Clicks'
              }
            },
            legend:  {
                    enabled: false
                }, /*{
              layout: 'Vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 0,
                y: 30,
                floating: false,
                shadow: true
              },*/
             tooltip: {
                formatter: function() {
                  return ''+
                    this.x +': '+ this.y +' Clicks';
                  }
              },
              plotOptions: {
                column: {
                  pointPadding: 0.2,
                    borderWidth: 0
                }
              },
              series: [{name: '$type', data:[$clickTotalArray //php array }]
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:24:11.353

您在询问如何将您的数据解析为 highcharts 可以理解的内容？

好吧，您要正确设置的主要动态选项是 the`xAxis.categories`和 the `series.data`，您似乎已经弄清楚了。

## `categories`

需要是一个字符串数组，不会接受更多或更少。

例如：-`categories=['Mon','Tue','Wed']`

## `data`

需要是数组数组或对象数组或值数组。[有关更多详细信息，请参阅文档](http://api.highcharts.com/highstock#series.data)

由于您的数据大多是简单的值，xValue 是一个字符串，因此属于类别，您的`data`对象需要是一个数字数组。

例如：-`data=[100,200,300]`

所以现在我们有了数据的最终形式，我们需要将可用的数据结构/对象图解析为这种形式。您可以选择在 PHP 或 JavaScript 中执行此操作。

这就是您可以在 javascript 中执行此操作的方法，请确保在调用`Highchart`构造函数之前执行此操作，并在设置选项时使用派生对象。

```
var superData = [{
    propertyA: 'A',
    propertyB: 10
}, {
    propertyA: 'B',
    propertyB: 15
}, {
    propertyA: 'C',
    propertyB: 1
}];

var seriesData = [],
    categories = [];
for (var i = 0; i < superData.length; i++) {
    //you may want to do a parseInt/parseFloat it this value is a string
    seriesData.push(superData[i].propertyB);
    categories.push(superData[i].propertyA);
}

...
    xAxis: {
        categories: categories
    },
    series: [{
        name: 'serie',
        type: 'column',
        data: seriesData
        }]
... 
```

**[将复杂的 JSON 解析成 highchart 形式 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/XhzYb/)**

请参阅[将 mysql 结果集转换为 (name, data) 对象以输入 HighCharts](https://stackoverflow.com/questions/12520865/convert-mysql-resultset-into-a-name-data-object-to-be-fed-into-highcharts/12525219#12525219)以查看如何在 PHP 中完成类似的事情

# android - 屏幕支持不同的屏幕尺寸

> ID：14437375
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:55.210
> 
> 标签：android, android-layout

在我的应用程序中，我的布局如下

```
layout/example.xml
layout-land/example.xml

layout-small/example.xml
layout-small-land/example.xml

layout-large/example.xml
layout-large-land/example.xml

layout-xlarge/example.xml
layout-xlarge-land/example.xml 
```

我用 HTC sense 和 LG optimus Net P699 (320x480) 测试了我的应用程序。对于 HTC 感觉，它采用了布局， `layout-large/example.xml layout-large-land/example.xml` 但对于 P699，它采用了`layout/example.xml`横向和纵向模式的布局。为什么会这样？？？对于风景，它必须从`layout-land/example.xml`右边开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:43:13.633

即使您为尺寸或密度指定布局，也会根据设备的适用性来选择布局。

由于 android 布局的范围有重叠的边界，所以在很多情况下它往往会混淆它们。只需**为纵向模式布局添加另一个文件夹并进一步分类它们**。

删除`layout/example.xml`并制作`layout-port/example.xml`

# xml-rpc - 我的 XML-RPC 插件的稳健性

> ID：14437376
> 
> 赞同：0
> 
> 时间：2013-01-21T11:12:59.340
> 
> 标签：xml-rpc, theory, robustness

我编写了一个 jQuery 插件，它使从客户端 JavaScript 与 XML-RPC 服务器的通信比其他方式更容易。我已经在我自己的应用程序中使用了它，它可以与 rtorrent 客户端成功通信。我将它作为独立插件发布：[jquery-xmlrpc](https://github.com/maelstrom/jquery-xmlrpc/)

用户已针对插件记录了两个问题（[#1](https://github.com/maelstrom/jquery-xmlrpc/issues/1)和[#2](https://github.com/maelstrom/jquery-xmlrpc/pull/2)），指出它无法解析无效的 XML-RPC。有问题的无效 XML-RPC 是空`<value>`节点。用户正在处理发送无效 XML-RPC 文档的 XML-RPC 服务器。考虑以下 XML-RPC 文档，其中包含一个`<nil>`空字符串和一个不正确的空`<value>`节点：

```
<struct>
    <member>
        <!-- A null value -->
        <name>nilElement</name>
        <value><nil /></value>
    </member>
    <member>
        <!-- An empty string -->
        <name>emptyString</name>
        <value><string></string></value>
    </member>
    <member>
        <!-- Invalid XML-RPC -->
        <name>badEmptyValue</name>
        <value></value>
    </member>
</struct> 
```

最初，我很乐意处理错误的空`<value>`节点，并将它们视为`<nil/>`/null 元素。这似乎是一个奇怪的极端案例，但很容易处理，并且符合鲁棒性原则的精神：

> “在你接受的东西上要自由，
> 在你发送的东西上要保守”
> 
> > [RFC 1122](https://www.rfc-editor.org/rfc/rfc1122#page-12)

但随后问题被更新为表现不佳的服务器也在`<value>`节点中发送了原始字符串，如下所示：

```
<!-- Correct string encoding -->
<value><string>Hello, World!</string></value>

<!-- Incorrect string encoding -->
<value>Raw, incorrect string</value> 
```

在这一点上，远程服务器完全不正确。这根本不是有效的 XML-RPC。但是鲁棒性原则指出，我应该在我接受的东西上保持自由。

鲁棒性原则应该走多远？我应该接受原始字符串吗？我是否应该拒绝，告诉其他用户针对表现不佳的 XML-RPC 服务器记录一个错误？在什么时候接受错误的输入会走得太远？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:08:25.590

实际上，XML-RPC 规范说`<value>`没有子元素的节点应该被视为字符串节点。我一定错过了那个部分。在这种情况下，正确的答案是符合规范并正确处理`<value>`节点中的字符串。

# hibernate - JPA 实体中的枚举字段

> ID：14437384
> 
> 赞同：28
> 
> 时间：2013-01-21T11:13:23.863
> 
> 标签：hibernate, jpa, enums

我觉得问这个有点愚蠢，但我找不到任何简单的答案。

以这个简单的实体为例：

```
@Entity
@Table( name="clienti" )
public class Cliente implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    private String nome;

    private String cognome;

//...
} 
```

它代表一个人，所以我想添加一个“**性别**”属性。

它将是“男性”或“女性”。所以呢？

我可以使用字符串，并记住“m”代表男性，“f”代表女性。

或者我可以使用布尔值“isMale”，真或假。

但是，我认为无论哪种情况，Hibernate 纯粹主义者都不会高兴:)

谷歌搜索了一下，我发现最好的做法是使用**enum**。

我对如何使用它有点困惑。你能帮我举个例子吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-21T12:43:59.853

您可以将您的映射`enum`到 a`String`或序数。映射到`String`是更便携的方法，因为映射将在更改枚举顺序后继续存在。

使用您的示例：

```
@Entity
@Table( name="clienti" )
public class Cliente implements Serializable {

...
    @Enumerated(EnumType.STRING)
    private Gender gender;
...
} 
```

字符串映射将使用枚举类型的简单名称，因此您将在 DB 中有两个可能的值 - 'Male' 和 'Female'

```
public enum Gender { MALE, FEMALE } 
```

持久性提供程序负责映射，因此在您的代码中，您可以继续使用`Gender`枚举，而不必担心字符串或序数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-03T08:39:24.870

```
public enum Gender{ 
    MALE, FEMALE 
}

@Entity
@Table( name="clienti" )
public class Cliente implements Serializable {
...

// **1 case** - If database column type is number (integer) 
// (some time for better search performance)  -> we should use 
// EnumType.ORDINAL as @O.Badr noticed. e.g. inserted number will
// index of constant starting from 0... in our example for MALE - 0, FEMALE - 1.
// **Possible issue (advice)**: you have to add the new values at the end of
// your enum, in order to keep the ordinal correct for future values.

@Enumerated(EnumType.ORDINAL)
    private Gender gender;

// **2 case** - If database column type is character (varchar) 
// and you want to save it as String constant then ->

@Enumerated(EnumType.STRING)
    private Gender gender;

...
}

// in all case on code level you will interact with defined 
// type of Enum constant but in Database level 
```

*第一种情况（EnumType.ORDINAL）*

```
╔════╦══════════════╦════════╗
║ ID ║    NAME      ║ GENDER ║
╠════╬══════════════╬════════╣
║  1 ║ Jeff Atwood  ║    0   ║
║  2 ║ Geoff Dalgas ║    0   ║
║  3 ║Jarrod Jesica ║    1   ║
║  4 ║ Joel Lucy    ║    1   ║
╚════╩══════════════╩════════╝ 
```

*第二种情况（EnumType.STRING）*

```
╔════╦══════════════╦════════╗
║ ID ║    NAME      ║ GENDER ║
╠════╬══════════════╬════════╣
║  1 ║ Jeff Atwood  ║  MALE  ║
║  2 ║ Geoff Dalgas ║  MALE  ║
║  3 ║Jarrod Jesica ║ FEMALE ║
║  4 ║ Joel Lucy    ║ FEMALE ║
╚════╩══════════════╩════════╝ 
```

# ruby-on-rails-3 - Rails 3 Scope with :has_many :through 关联

> ID：14437387
> 
> 赞同：1
> 
> 时间：2013-01-21T11:13:30.263
> 
> 标签：ruby-on-rails-3, activerecord, scope

在我最新的 Rails 应用程序中，我有这 3 个模型-`Entries`和. 该应用程序仅用于为“政治家”添加“条目”。让我们假设一个条目有（条目）。政治家的政党记录在会员模型中，我还记录了每个会员的时间范围。因此，成员资格中的记录如下所示。`Politician``Parties``name, date`

```
politician_id, party_id, date_from, date_to 
```

模型

```
class Politician < ActiveRecord::Base
  has_many :memberships
  has_many :parties, :through => :memberships do
  has_many :entries
end

class Party < ActiveRecord::Base
  has_many :memberships
  has_many :politicians, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :politician
  belongs_to :party
end 
```

现在假设我们`"148","My entry name", "2010-01-25"`在表格中有政治家 id 148 的条目记录，我需要根据两个表格上的日期为该条目找到**该政治家的党员身份。**假设在成员资格表中我们有这些记录。我认为这是我必须在这里使用的范围？

```
politician_id | party_id | date_from | date_to 

148 | 10 | 2012-01-22 | 2013-01-22
148 | 16 | 2010-01-21 | 2012-01-21
148 | 45 | 2009-01-19 | 2010-01-20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:52:56.033

我推荐这种方式，使用链式作用域，它将为您工作，并且在未来更加灵活

为政治家添加范围以按名称查找；

```
scope :by_name, lambda{|name| name: name } 
```

然后在您的会员模型中添加一个范围，以查找适合您范围的所有会员列表

```
scope :by_date, lamda{|x,y| where("date_from > ? and date_to < ?, x,y) } 
```

这将允许你说类似的话

```
Party.memeberships.by_date(YOURFROMDATE, YOURTODATE).by_name(YOURPOLITICIAN) 
```

这些是实现此目的的几种方法，但我喜欢在路上重用 illy 的 sere pare t 范围。虽然可能只有一个示波器可以完成所有工作”

# ios - IOS 5.1 中的方向问题？

> ID：14437388
> 
> 赞同：0
> 
> 时间：2013-01-21T11:13:35.500
> 
> 标签：ios, uiinterfaceorientation

我已经在 IOS 6.0 中实现了具有方向支持的示例代码，但如果我在 ipad 1 (IOS 5.1) 方向上运行，相同的应用程序不支持。我知道 IOS 6.0 不推荐使用 iOS 5.1 中的某些方法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:18:22.950

您需要在视图控制器中实现旧的旋转方法以支持 iOS 5 或更低版本的旋转。

是的，这些方法已被弃用，但旧版本的 iOS 仍然需要这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:23:07.823

对于 iOS 6+，请使用这些方法

```
- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {

    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

对于 iOS 5.0 和所有以前的使用这个

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{  
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T06:47:37.707

在 .m 文件中使用以下代码。

```
// Override to allow orientations other than the default portrait orientation.

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

if(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)  {
           return NO;
}
else {
    return YES;
}

} 
```

这适用于 iOS 5.1、6.1.3 和 7.0.2。

# jquery - 文本旋转背景问题 - IE8 和 IE7

> ID：14437394
> 
> 赞同：5
> 
> 时间：2013-01-21T11:13:52.067
> 
> 标签：jquery, html, css, rotation, carousel

我有一个旋转木马，需要将标题旋转 270 度，它看起来很可爱，但在 IE8 和 IE7 上，文本中有一个可怕的黑色轮廓。

从Firefox-IE9，Chrome和Opera都一样-> ![图片来自 FF，在 IE9、Opera 和 Chrome 中相同](../Images/de06a43fbae0b54a8611740b42700c2a.png)

从 IE8，IE7 显示相同。-> ![从IE8，IE7完全一样](../Images/eb2a6df0d0b08fc7c72d02511f501631.png)

我试过css方法`filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);`，但这搞砸了IE9，即使`-ms-transform`在那里对付它。

我也有-

*   包括 Cufon 以尝试创建文本的图像画布，然后使用 css 过滤器/变换旋转它 - 结果相同。
*   [使用来自jQuery Rotate](http://code.google.com/p/jqueryrotate/)的 jQuery Rotate 插件

如果有人对如何克服这一点有任何想法，我将不胜感激。谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:18:02.637

看看 Raphael [http://raphaeljs.com/](http://raphaeljs.com/) 我在一些项目中使用过这个并且有很好的经验。

# javascript - 如何在父级中打开 javascript 链接到 iframe

> ID：14437400
> 
> 赞同：1
> 
> 时间：2013-01-21T11:14:10.570
> 
> 标签：javascript, iframe, javascript-events

我正在尝试将 javascript 中动态创建的链接调用到 iframe 中。正在创建动态链接，但链接在父窗口而不是 iframe 中打开。

```
 <li><a href="#">New Member Name</a>
  <ul>
    <li><script type="text/javascript">
<!--
var d = new Date()

month=(d.getUTCMonth()+1).toString();
if(month.length<2) month = "0" + month;

day=(d.getUTCDate()).toString();
if(day.length<2) day = "0" + day;

hour=(d.getUTCHours()).toString();
if(hour.length<2) hour = "0" + hour;

minute=(d.getUTCMinutes()).toString();
if(minute.length<2) minute = "0" + minute;

for (x=1 ; x<=10 ; x++)
{
    xx = x.toString();  
    if (xx.length<2) xx = "0" + xx;

    h= "http://apps.facebook.com/evonyoffical/facebook.Uprising.php?F=100002319241135&C=878988&SID=NA46&T=" + d.getUTCFullYear() + "." + month + "." + day + "+" + hour + "." + minute + "." + xx + "&SX=0&FEEDID=10001&GUID=220B83CD-91F8-D26A-B411-25BC9BAF1B5E&k=070d6091c63e5a21b5a1e9b829262396"; target="_rightfb"
    document.writeln("<p>"+("Link "+x).link(h)+"</p>");
}
//-->
</script></li>
  </ul>
</li> 
```

iframe div 属性在哪里：

```
 <div id=facebook><iframe src='javascript:""' name="rightfb"  width:"900" height:"450"></iframe></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:52:43.233

我将创建链接以写入 iframe 的 src。以下生成将 url 加载到 iframe 中的链接，但是当我尝试它时，我得到一个响应，即出于安全原因，网站将不允许将内容写入框架（可能是因为我只是从文件系统打开 html 文件而不是通过服务器）。

```
url= "http://apps.facebook.com/evonyoffical/facebook.Uprising.php?F=100002319241135&C=878988&SID=NA46&T=" + d.getUTCFullYear() + "." + month + "." + day + "+" + hour + "." + minute + "." + xx + "&SX=0&FEEDID=10001&GUID=220B83CD-91F8-D26A-B411-25BC9BAF1B5E&k=070d6091c63e5a21b5a1e9b829262396";
html='<p><a onClick="document.getElementById(\'rightfb\').src=\'' + url + '\'" style="color:blue;cursor:pointer">Link' + x + '</a></p>';
document.write(html); 
```

# wordpress - 在页面中显示类别图像

> ID：14437401
> 
> 赞同：0
> 
> 时间：2013-01-21T11:14:13.533
> 
> 标签：wordpress, plugins

我使用分类图像插件来存储每个类别的图像。现在我想显示类别图像。但我找不到任何设置来显示这些图像。有没有更好的插件来显示具有类别名称的类别图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:42:46.110

要显示类别图像，只需使用以下命令：

```
$terms = apply_filters( 'taxonomy-images-get-terms', '' );
if ( ! empty( $terms ) ) {
    print '<ul>';
    foreach( (array) $terms as $term ) {
        print '<li><a href="' . esc_url( get_term_link( $term, $term->taxonomy ) ) . '">' . wp_get_attachment_image( $term->image_id, 'detail' ) . '</li>';
    }
    print '</ul>';
} 
```

默认显示“类别”

# php - 会话上传进度

> ID：14437406
> 
> 赞同：4
> 
> 时间：2013-01-21T11:14:25.377
> 
> 标签：php, kohana

我正在尝试让会话上传进度功能（[http://php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)）在 Kohana 中工作。我已经设法让它在没有 Kohana 的情况下使用以下代码在本地工作：

```
<?php
    session_start();
    if (isset($_GET['progress']))
    {
        // does key exist
        $key = ini_get("session.upload_progress.prefix") . 'demo';
        if ( !isset( $_SESSION[$key] ) ) exit( "uploading..." );

        // workout percentage
        $upload_progress = $_SESSION[$key];
        $progress = round( ($upload_progress['bytes_processed'] / $upload_progress['content_length']) * 100, 2 );

        exit( "Upload progress: $progress%" );
    }
?>
<!doctype html>
<head>
</head>
<body>
    <section>
        <h1>Upload Form</h1>
        <form action="" method="POST" enctype="multipart/form-data" target="upload-frame">
            <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="<?php //echo $uid; ?>demo">
            <p>
                <label>File:</label>
                <input type="file" name="file" required="required">
            </p>
            <p><input type="submit" name="submit" value="Upload"></p>
        </form>

        <iframe id="upload-frame" name="upload-frame" width="1280" height="600"></iframe>

        <div id="file_upload_progress"></div>
    </section>

    <script src="jquery-1.7.1.min.js"></script>
    <script>
        $(document).ready(function() {

            var uploading = false;
            $('form').submit(function() {

                uploading = true;
                $('#upload-frame').one('load', function(){
                    uploading = false;
                });

                function update_file_upload_progress() {
                    $.get("?progress", function(data) {
                        $("#file_upload_progress").html(data);
                        if (uploading) {
                            setTimeout( update_file_upload_progress, 500 );
                        }
                    })
                    .error(function(jqXHR, error) { 
                        alert(error); 
                    });
                }

                // first call
                update_file_upload_progress();
            });
      });
    </script>
</body>
</html> 
```

但是，当我在 Kohana 中使用此代码时（当然是将 PHP 分离到控制器中），`$_SESSION`不会创建变量来跟踪上传进度。

我相信这与 Kohana 中的会话如何工作有关。我不能`session_start()`在脚本的开头使用，因为它与已经运行的 Kohana 会话冲突。如果我转储`$_SESSION`或`Session::instance()`内容，则应由 PHP 上传进度功能添加的变量不存在。

那么如何让会话变量与 Kohana 一起使用呢？

**更新**

我已经创建了一个全新的 Kohana 安装来帮助缩小这个问题的范围。我发现通过不实例化`Session`Kohana 中的类，我可以使用上面的代码并且它工作正常。

但是，当`Session`实例化需要用于我的 Web 应用程序的类时，它会停止工作，并且`$_SESSION`不再创建包含上传进度的变量。这让我相信问题在于 Kohana 如何管理会话信息。我尝试使用配置设置关闭加密，但这并没有什么不同。

我正在使用本机会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:27:48.413

会话 cookie 名称必须与 php config ( ) 中设置的名称完全相同`session.name`，例如：

```
return array(
    'native' => array(
        'encrypted' => FALSE,
        'name'      => ini_get('session.name'),
    ),
); 
```

如果您不想使用 PHP 的默认会话 cookie 名称，您*将无法*通过在运行时设置值来解决此问题，即这不起作用：

```
ini_set('session.name', 'my_kohana_session_name'); 
```

您*将*通过在 .htaccess 文件中设置值来解决此问题：

```
php_flag session.name "my_kohana_session_name" 
```

这样，您可以保持 php.ini 不变，但您可以保留 Kohana 应用程序的自定义 cookie 名称。

我的测试证明，使用本机会话驱动程序时，会话加密不会影响上传进度信息。那肯定是因为在使用本机驱动程序时不使用加密设置。;)

PS。我还建议一件事 - 确保 ajax 请求没有被缓存。有很多情况下它被缓存并且没有显示新的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:35:06.977

我找到了解决方案。

我所做的是隔离将 PHP 生成的`$_SESSION`变量读取到它自己的`Controller`. 在我的情况下，我有一个 AJAX 控制器，用于通用 AJAX 检查，例如验证电子邮件、Web URL 等。`extends`默认的控制器，`Controller`因此它不会从我的自定义控制器（这是我的其他控制器扩展的）继承任何会话信息。

所以我的新独立`Controller`看起来像这样：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Ajax extends Controller {

    public function action_upload_progress()
    {
            // get upload progress key
            $key = (!empty($_POST['key'])) ? $_POST['key'] : FALSE; 

            // start session to get PHP 5.4 generated $_SESSION variables
            session_start();

            // does key exist
            $key = ini_get("session.upload_progress.prefix") . $key;
            if ( !isset( $_SESSION[$key] ) ) {
                exit( "uploading..." );
            }

            // workout percentage
            $upload_progress = $_SESSION[$key];
            $progress = round( ($upload_progress['bytes_processed'] / $upload_progress['content_length']) * 100, 2 );
            exit( "Upload progress: $progress%" );
    }
} 
```

我对实际表单使用与以前相同的代码，并对 JavaScript 进行小幅调整，请求此控制器/操作来检索上传进度数据。问题解决了！

# jsf-2 - 注入自定义验证器

> ID：14437412
> 
> 赞同：6
> 
> 时间：2013-01-21T11:14:40.413
> 
> 标签：jsf-2, validation

> **可能重复：**
> [FacesValidator 中的依赖注入（JSF 验证）](https://stackoverflow.com/questions/7572335/dependency-injection-in-facesvalidator-jsf-validation)

也许，我缺少一些基本的东西——但我不能在自定义验证器类中使用注入来使用消息资源吗？下面的代码给了我一个 null on `msg`，所以注入显然不起作用，但为什么呢？如果不可能，我如何访问消息资源？到目前为止，我发现的所有示例都在验证器消息中使用硬编码文本，这对于本地化不是很有用。

```
public class BirthdateValidator implements Validator {
    @Inject
    private transient ResourceBundle msg;

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
            if ( [some validation fails] ) {
                FacesMessage message = new FacesMessage(msg.getString("validator.birthday"));
                message.setSeverity(FacesMessage.SEVERITY_ERROR);
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T12:26:50.050

至于为什么它不能那样工作，请参阅这个答案：[如何使用@EJB、@PersistenceContext、@Inject、@Autowired 注入@FacesValidator](https://stackoverflow.com/questions/7572335/dependency-injection-in-facesvalidator-jsf-validation/7572413#7572413)。简而言之，注释它`@Named`而不是`@FacesValidator`引用它`<h:inputXxx validator>`或`<f:validator binding>`引用它`#{birthdateValidator}`。这个问题是由 JSF/CDI 人员的疏忽引起的。这在即将发布的 JSF 2.2 中得到修复。

* * *

> *好的，因为我只需要访问消息包，我如何在不注入的情况下访问它？*

使用以下方式以编程方式对其进行评估`Application#evaluateExpressionGet()`：

```
ResourceBundle msg = context.getApplication().evaluateExpressionGet(context, "#{msg}", ResourceBundle.class);
// ... 
```

你甚至可以选择一个特定的键：

```
String msg = context.getApplication().evaluateExpressionGet(context, "#{msg.key}", String.class);
// ... 
```

### 也可以看看：

*   [读取托管 bean 中的资源包属性](https://stackoverflow.com/questions/13655540/read-i18n-variables-from-properties-file-in-a-bean)

# ios - 如何设置 uitableview 样式以创建漂亮的菜单

> ID：14437413
> 
> 赞同：2
> 
> 时间：2013-01-21T11:14:42.257
> 
> 标签：ios, facebook, menu, styles

我一直在开发具有侧面菜单的应用程序。我受到其他应用程序的启发，我希望我的菜单看起来与他们的相似。以下是一些示例（steam 应用程序菜单、fb 菜单） ![面子书菜单](../Images/4ce307f965651638e1183d18b51465fb.png)![蒸汽菜单](../Images/fd0302e27ab02536a52329aac2e033d4.png)

基本上我的问题是，这个菜单中使用了什么样的网点？我的第一个想法是，那些是带有部分和静态单元格的表格视图。但是，即使它们是表格视图，我也不知道如何以这种方式设置表格视图的样式。我想出的只是这个糟糕的设计：D ![我的菜单](../Images/b0cadc0b24aac538c784a282d004c216.png)

如果有人能告诉我正确的方法，我会很高兴:)谢谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T11:52:24.167

有很多类似的开源控件可用。

请检查以下链接：

1.  [**SAS幻灯片菜单**](http://www.cocoacontrols.com/platforms/ios/controls/saslidemenu)
2.  [**JWS幻灯片菜单**](http://www.cocoacontrols.com/platforms/ios/controls/jwslidemenu)
3.  [**CHSlide控制器**](http://www.cocoacontrols.com/platforms/ios/controls/chslidecontroller)
4.  [**NVS滑动菜单控制器**](http://www.cocoacontrols.com/platforms/ios/controls/nvslidemenucontroller)
5.  [**DDMenu控制器**](http://www.cocoacontrols.com/platforms/ios/controls/ddmenucontroller)

![SAS滑块](../Images/a483369e1491b8ce795b00cdba5e57d1.png)-![JWS滑块](../Images/b8fb57bfec95d378f643b5c1f99486db.png)

![CH滑块](../Images/7cf5dd5a7b711c68373ef1355740ec36.png)-![NVS滑块](../Images/ac4f7dc994dbb698a109a224161f6852.png)

![DDS滑块](../Images/2d350fcd27ed4b2c8dd79b98932e227a.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T11:18:59.613

你看在正确的道路上。不幸的是，这只是设计方面和您使用的资产。

[该项目](https://github.com/gresrun/GHSidebarNav)以与 Facebook 非常相似的方式重新创建菜单。

# jquery - 单击按钮时如何删除文本输入

> ID：14437417
> 
> 赞同：0
> 
> 时间：2013-01-21T11:15:05.317
> 
> 标签：jquery

当上传完成时，我在下面有一个 jquery 函数，它将文件名存储在字符串中，并将其 id 存储在文本输入中。现在在功能的底部，如果用户单击`deletevideofile`按钮，则可以删除文件名，这很好，但我的问题是如何删除文本输入？我似乎无法删除要删除的文本输入。

下面是代码：

```
function stopVideoUpload(success, videoID, videofilename){

      var result = '';
      videocounter++;

      if (success == 1){
         result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
          $('.listVideo').eq(window.lastUploadVideoIndex).append('<input type="text" name="vidid" value="' + videoID + '" />');
          $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename) + '<button type="button" class="deletefilevideo" video_file_name="' + videofilename + '">Remove</button><br/><hr/></div>');      }

  var _videocounter = videocounter;

$('.listVideo').eq(window.lastUploadVideoIndex).find(".deletefilevideo").on("click", function(event) {
    var video_file_name = $(this).attr('video_file_name');

    jQuery.ajax("deletevideo.php?videofilename=" + video_file_name)
        .done(function(data) {

        $(".videomsg" + _videocounter).html(data);
    });

    $(this).parent().remove();
});

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:29:34.910

你应该试试这个：

```
$(this).parent().siblings('input[name="vidid"]').val('').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:34:14.740

```
$('input[name="vidid"]').remove(); 
```

试试这个：

```
$(this).parent().siblings('input[name="vidid"]').andSelf().remove(); 
```

对于 jQuery 1.8+ 使用[`addBack()`](http://api.jquery.com/addBack/)而不是[`andSelf()`](http://api.jquery.com/andSelf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:27:21.023

```
 $('.listVideo').eq(window.lastUploadVideoIndex).append('<input type="text" name="vidid" value="' + videoID + '" id="'+  videofilename +'" />');
          $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename) + '<button type="button" class="deletefilevideo" video_file_name="' + videofilename + '">Remove</button><br/><hr/></div>');      }

var video_file_name = $(this).attr('video_file_name');
$('#'+video_file_name).remove(); 
```

在您的代码中替换此代码并尝试检查...您是否获得了所需的 putput

# android - 在模拟器中正常工作时应用程序在设备中崩溃：NullPointerException

> ID：14437420
> 
> 赞同：0
> 
> 时间：2013-01-21T11:15:20.367
> 
> 标签：android, sockets, nullpointerexception

我正在开发一个基于套接字的应用程序。但问题是我的应用程序在模拟器中正常工作但是当我在真实设备中测试时它崩溃了很多次。

这是我的 Logcat ：

```
01-21 16:24:38.667: E/AndroidRuntime(3525): FATAL EXCEPTION: main
01-21 16:24:38.667: E/AndroidRuntime(3525): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.inextrix.automation/org.inextrix.automation.MainActivity}: java.lang.NullPointerException
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.os.Looper.loop(Looper.java:137)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at dalvik.system.NativeStart.main(Native Method)
01-21 16:24:38.667: E/AndroidRuntime(3525): Caused by: java.lang.NullPointerException
01-21 16:24:38.667: E/AndroidRuntime(3525):     at org.inextrix.automation.MainActivity$1.updateStatus(MainActivity.java:272)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at org.inextrix.automation.MainActivity$1.run(MainActivity.java:250)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at org.inextrix.automation.MainActivity.startRepeatingTask(MainActivity.java:485)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at org.inextrix.automation.MainActivity.onCreate(MainActivity.java:205)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.Activity.performCreate(Activity.java:4492)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-21 16:24:38.667: E/AndroidRuntime(3525):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-21 16:24:38.667: E/AndroidRuntime(3525):     ... 11 more 
```

这是我的**MainActivity.java**

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);

    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);            
    getSharedSettings();

    fanDimmer1=(ToggleButton)findViewById(R.id.button_fan1);
    fanDimmer2=(ToggleButton)findViewById(R.id.button_fan2);
    dimmerLight1=(ToggleButton)findViewById(R.id.button_light1);
    dimmerLight2=(ToggleButton)findViewById(R.id.button_light2);

    fanDimmer1.setOnClickListener(this);
    fanDimmer2.setOnClickListener(this);
    dimmerLight1.setOnClickListener(this);
    dimmerLight2.setOnClickListener(this);

    if(ip.equals("") || port.equals(""))
    {
        new AlertDialog.Builder(MainActivity.this)
        .setTitle("Warning !")
        .setMessage("Please set IP and PORT first")
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setNeutralButton("ok", null)
        .show();
    }
    else
    {
        new Thread(new Runnable() 
        {   
            @Override
            public void run()
            {
                Log.v(TAG, "openconnection");
                openConnection();
            }
        }).start();
        m_handler = new Handler();
        startRepeatingTask();

    }

}

public void openConnection()
{
    // TODO Auto-generated method stub
    try 
    {
        s = new Socket(ip, Integer.parseInt(port));
        i = s.getInputStream();
        iD = new DataInputStream(i);
        o = s.getOutputStream();
        oD = new DataOutputStream(o);
        Log.v(TAG, "openconnection 2");

    }
    catch (UnknownHostException e) {
        // TODO: handle exception
        Log.v("UnknowHostException :::::", "In Catch Block");
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO: handle exception
        Log.v("IOException :::::", "In Catch Block");
        e.printStackTrace();
    }
}

Runnable m_statusChecker = new Runnable() 
{
    @Override
    public void run() 
    {
        if (count == 0) {
            updateStatus();
            count = 1;
        } else {
            updateStatus1();
            count = 0;
        }
        m_handler.postDelayed(m_statusChecker,1000);
    }

    private void updateStatus() 
    {
        // TODO Auto-generated method stub
        Log.v("test", "1");
        try {
            byte[] data1 = new byte[1024], packet1 = 
                { 
                    (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                    (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                    (byte) 0x01,(byte) 0x01,(byte) 0x00,
                    (byte) 0x00,(byte) 0x00,(byte) 0x19
                };

            o.write(packet1); //line number 272
            i.read(data1, 0, 1024);

            byte_to_hex = ConversionMethods.bytesToHex(data1).substring(18, 26);

            /*Log.d(TAG,"Original String ::: "+ byte_to_hex);*/

            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) 
            {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result=new String(arr);
            result = ConversionMethods.hexStringToNBitBinary(swapped_result, 32);

            int counter = 0;
            for( int i=0; i<result.length(); i++ ) 
            {
                if( result.charAt(i) == '1' )
                {
                    counter++;        
                }  
            }

            status=Integer.toString(counter);
            txt_status.setText(status);
            Log.v(TAG, "status is ::"+status);

            char[] c=result.toCharArray();
            int count=0;
            for (int i=0;i<result.length();i++)
            {
                count++;
                char j=c[i];
                //Log.v(TAG, count+"::"+j);
                if(count==1)
                    toggleButton=dimmerLight1;
                else if(count==2)
                    toggleButton=fanDimmer2;
                else if(count==3)
                    toggleButton=fanDimmer1;
                else if(count==4)
                    Log.v(TAG, "Count 4 is 0");

                if(j=='1')
                    toggleButton.setChecked(true);
                else
                    toggleButton.setChecked(false); 
            }

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private void updateStatus1() 
    {
        Log.v("test", "2");
        try {
            byte[] data1 = new byte[1024], packet1 = 
                { 
                    (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                    (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                    (byte) 0x01,(byte) 0x03,(byte) 0x00,
                    (byte) 0x01,(byte) 0x00,(byte) 0x04
                };

            o.write(packet1);
            i.read(data1, 0, 1024);

            /*Log.v("::::TX::::", ConversionMethods.bytesToHex(data1).substring(0, 34));
            Log.v("::::RX::::", ConversionMethods.bytesToHex(packet1));*/

            d1=ConversionMethods.bytesToHex(data1).substring(20, 22);
            d2=ConversionMethods.bytesToHex(data1).substring(24, 26);
            d3=ConversionMethods.bytesToHex(data1).substring(28, 30);
            d4=ConversionMethods.bytesToHex(data1).substring(32, 34);

            Log.v(TAG, "D1="+d1);
            Log.v(TAG, "D2="+d2);
            Log.v(TAG, "D3="+d3);
            Log.v(TAG, "D4="+d4);

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
};

void startRepeatingTask() {
    m_statusChecker.run();
}

void stopRepeatingTask() {
    m_handler.removeCallbacks(m_statusChecker);
} 
```

我被这个问题困住了，无法找到发生这种情况的原因。请给我一些想法，我该如何解决这个问题？

任何想法和帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:43:11.230

我无法理解你的逻辑。为什么要从专用线程调用 openConnection，然后从 UI 线程使用套接字？

我认为在模拟器上你很幸运并且 openConnection 在你从 startRepeatingTask 调用 updateStatus 之前完成。这就是它起作用的原因。在真正的设备上你就没那么幸运了。用调试器检查 o 和 i 不为空。

此外，您在没有适当同步的情况下在线程之间共享多个数据对象。这会给你带来非常棘手的错误）

# python - 使用正则表达式从字符串中提取数字

> ID：14437422
> 
> 赞同：3
> 
> 时间：2013-01-21T11:15:29.180
> 
> 标签：python, regex

我有以下字符串：

```
fname="VDSKBLAG00120C02 (10).gif" 
```

如何`10`从字符串中提取值`fname`（使用`re`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T11:33:24.137

一个更简单的正则表达式是`\((\d+)\)`：

```
regex = re.compile(r'\((\d+)\)')
value = int(re.search(regex, fname).group(1)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T11:18:27.150

```
regex = re.compile(r"(?<=\()\d+(?=\))")
value = int(re.search(regex, fname).group(0)) 
```

**解释：**

```
(?<=\() # Assert that the previous character is a (
\d+     # Match one or more digits
(?=\))  # Assert that the next character is a ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:43:07.330

就个人而言，我会使用这个正则表达式：

```
^.*\(\d+\)(?:\.[^().]+)?$ 
```

有了这个，我可以选择括号中的最后一个数字，就在扩展名之前（如果有的话）。如果文件名中间有任何随机数，它不会去选择括号中的任何随机数。例如，它应该正确地`2`从`SomeFilmTitle.(2012).RippedByGroup (2).avi`. 唯一的缺点是，它无法区分数字何时在扩展名之前：`SomeFilmTitle (2012).avi`.

我假设文件的扩展名（如果有）不应包含`()`.

# java - 使用 PreparedStatement 构建查询

> ID：14437423
> 
> 赞同：2
> 
> 时间：2013-01-21T11:15:34.100
> 
> 标签：java, sql, prepared-statement

我想知道使用 PreparedStatement.setString() 动态构建查询是否是一个好主意（可能，明智？）。

例如 ：

sql代码：

```
SELECT * FROM table1 WHERE table1.category = ? ? 
```

爪哇代码：

```
ps.setString(1,"category1");
ps.setString(2,"AND table1.category = 'category2'"); 
```

此外，是否可以执行以下操作：

```
ps.setString(1,"category1");
ps.setString(2," AND table1.category = ?");
ps.setString(3,"category2"); 
```

此致

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T11:17:20.237

不幸的是，**没有**。

PreparedStatements 仅用于值。不允许使用表名和列名（*以及示例中的条件）。*所以最好的方法是将它与字符串连接起来。

```
String others = " AND table1.category = ?";
String query = "SELECT * FROM table1 WHERE table1.category = ? " + others; 
```

爪哇代码：

```
ps.setString(1,"category1");
ps.setString(2,"category2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:17:29.537

无论您放在 setString 中的什么内容都将包含在单引号 ' ' 中，并且不会被解释为查询。

# java - 如何在 java netbeans 中添加本机库 .so 文件

> ID：14437426
> 
> 赞同：1
> 
> 时间：2013-01-21T11:15:39.713
> 
> 标签：java

如何在netbeans中链接本机库.so文件

线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:19:49.903

`.so`将存储的目录添加到`java.library.path`或将库添加到路径中已存在的目录或使用库的完整路径名。如果您有办法确定它是什么，最后一个选项可能是最可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:19:50.993

*设置** .so 文件所在`-Djava.library.path=library\path`的库路径。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:22:04.253

显示 UnsatisfiedLinkError 是因为在您的 java.library.path 中没有找到具有指定名称的库

在加载库之前：

```
System.setProperty("java.library.path", "path_to_your_library"); 
```*

# node.js - Node.js 中的 util.error 和 console.error 有什么区别？

> ID：14437428
> 
> 赞同：14
> 
> 时间：2013-01-21T11:15:51.570
> 
> 标签：node.js

`util.error([...])`和之间究竟有什么区别`console.error([...])`？

在这两种方法中，它都会打印到 stderr。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T11:30:45.557

# 文档

## [util.error](http://nodejs.org/api/util.html#util_util_error)

> 与 util.debug() 相同，除了这将立即将所有参数输出到 stderr。

### [实用程序调试](http://nodejs.org/api/util.html#util_util_debug_string)

> 同步输出功能。将阻塞进程并立即将字符串输出到 stderr。

## [控制台错误](http://nodejs.org/api/stdio.html#stdio_console_error_data)

> 与 console.log 相同，但打印到 stderr。

### [控制台日志](http://nodejs.org/api/stdio.html#stdio_console_log_data)

> 使用换行符打印到标准输出。此函数可以以类似 printf() 的方式接受多个参数。例子：
> 
> ```
> console.log('count: %d', count); 
> ```
> 
> 如果在第一个字符串中找不到格式化元素，则在每个参数上使用 util.inspect。有关详细信息，请参阅[util.format()](http://nodejs.org/api/util.html#util_util_format_format)。

# 结论

根据[node.js的console.log是异步的吗？](https://stackoverflow.com/questions/5127532/is-node-js-console-log-asynchronous)console.log 是异步的（node>=0.6），因此也是 console.error。但是根据上面的文档，util.error 会阻塞进程并输出到stderr。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-17T17:24:20.497

以防万一有人再次遇到这个问题，`util.error`不**推荐**使用所以坚持`console.error`！

# android - getChildView 方法在 Expandable ListView 中运行 2 次

> ID：14437430
> 
> 赞同：3
> 
> 时间：2013-01-21T11:15:54.063
> 
> 标签：android, expandablelistview

我正在创建一个包含可扩展列表视图的应用程序。子视图是动态创建的。它运行成功。在调试过程中，我发现 getChildview 函数运行了 2 次。

我创建动态布局并将其放入列表中。当 getChildView 运行 2 次时，布局在列表中添加了 2 次..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:23:20.850

`getChildView()`不是一个适合创造孩子的地方。它可能经常被调用。无论如何，渲染过程需要访问孩子两次。

在没有更多信息的情况下，无法判断将孩子添加到列表中的合适位置，或者即使您的列表方法是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T12:11:28.507

我是 android 开发的新手，可能是错误的，但正如我所见，它`getChildView()`有第 4 个参数 View `convertView`，它是 null 第一次需要渲染视图。一旦创建，它就会被存储并在需要时再次使用。因此，如果您在其中创建新视图`getChildView()`就足够了

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
  if (convertView != null) {
      // View is already created here, update it if you like
      return convertView;
  }
  // Else create your view(s) here and return the root of view container as usual
  ...
  return convertView; // or whatever your root view is
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T13:13:35.647

如果您在组单击中重新生成列表，则将其删除可能是一种解决方案。例如，在下面的代码中，由于 myList.expandGroup(groupPosition)，getChildView() 总是被调用两次。

```
public boolean onGroupClick(ExpandableListView parent, View v,
            int groupPosition, long id) {

        //get the group header
        HeaderInfo headerInfo = medicationDate.get(groupPosition);
        myList.expandGroup(groupPosition);
        //set the current group to be selected so that it becomes visible
        //myList.setSelectedGroup(groupPosition);
        //display it or do something with it
        Toast.makeText(getBaseContext(), "Child on Header " + headerInfo.getHeaderInfo()+"with childsize"+headerInfo.getChildInfo().size(), 
                Toast.LENGTH_SHORT).show(); 

        return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T12:32:14.890

列表视图的高度应该是`match_parent`而不是`wrap_content`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T06:21:46.277

one thing worked for me was.

```
@Override
public boolean hasStableIds() {
    // To avoid refreshing return true and makesure Ids each position have same view.
    return true;
    //return false;
} 
```

# c++ - C++中sqlite3回调函数的正确使用

> ID：14437433
> 
> 赞同：15
> 
> 时间：2013-01-21T11:15:57.623
> 
> 标签：c++, sqlite

我有以下 C++ 代码用于与 SQLite3 一起进行测试。这是一个`customer`声明了回调函数的类。`sqlite3_exec()`每当从 SQLite 数据库返回结果（记录）时，都会调用此回调函数。

我不喜欢这种结构的是，处理结果的源代码位于类外部的回调函数中，而不是由`sqlite3_exec()`调用的类方法处理的结果。

在回调函数完成从 SQL 查询结果中提取值后，我可以使用将在类方法中使用的全局变量。但是如果有不止一条记录，并且回调函数被多次调用怎么办。然后我需要使用数组，除非我确保我只有一个结果。

我是否需要忘记回调函数并深入调用 SQLite API？

或者我是否需要使用 C++ 包装器，我想那里没有回调机制并且结果被传递回类方法本身？

```
// customer
#include "Customer\customer.h"
//## begin module%50E6CCB50119.additionalDeclarations preserve=yes
static int callback(void *NotUsed, int argc, char **argv, char **azColName)
{
  int i;
  char* columnName;
  char* columnValueString;
  short int columnValueShortInt = 0;
  int columnValueInt = 0;

  cout << "begin of callback function\n";

  for(i=0; i<argc; i++)
  {
    columnName = azColName[i];
    if (strcmp(columnName, "FirstName")==0 || strcmp(columnName, "LastName")==0)
    {
      columnValueString = argv[i];
      cout << "columnName = " << columnName << "; value = " << columnValueString <<"\n";
    }
    else
    {
      if(strcmp(columnName, "Age")==0)
      {
        stringstream(argv[i]) >> columnValueShortInt;
        cout << "columnName = " << columnName << "; value = " << columnValueShortInt <<"\n";
      }
      else // strcmp(columnName, "Id")==0)
      {
        stringstream(argv[i]) >> columnValueInt;
        cout << "columnName = " << columnName << "; value = " << columnValueInt <<"\n";
      }
    }
  }
  cout << "end of call back function \n";
  return 0;
}

//## end module%50E6CCB50119.additionalDeclarations

// Class customer

customer::customer ()
  //## begin customer::customer%50F969EE01E4.hasinit preserve=no
  //## end customer::customer%50F969EE01E4.hasinit
  //## begin customer::customer%50F969EE01E4.initialization preserve=yes
  //## end customer::customer%50F969EE01E4.initialization
{
  //## begin customer::customer%50F969EE01E4.body preserve=yes
  customerId = 0;
  zErrMsg = 0;

  customerDataBaseRc = sqlite3_open("customerdb", &customerDataBase);
  if(customerDataBaseRc)
  {
    fprintf(stderr, "Can't open database %s\n", sqlite3_errmsg(customerDataBase));
    sqlite3_close(customerDataBase);
  }

  const char * pSQL[6];
  const char * sqlStatement;

  pSQL[0] = "create table customerTable (Id int, FirstName varchar(30), LastName varchar(30), Age smallint)";

  // execute all the sql statements
  for(int i = 0; i < 1; i++)
  {
    customerDataBaseRc = sqlite3_exec(customerDataBase, pSQL[i], callback, 0, &zErrMsg);

    if( customerDataBaseRc !=SQLITE_OK )
    {
      fprintf(stderr, "SQL error: %s\n", zErrMsg);
      sqlite3_free(zErrMsg);
      break; // break the loop if error occur
    }
  }
  //## end customer::customer%50F969EE01E4.body
}

customer::~customer ()
{
  //## begin customer::~customer%50F93279003E.body preserve=yes
  const char *pSQL[6];

  // Remove all data in customerTable
  pSQL[0] = "delete from customerTable";

  // Drop the table from database
  pSQL[1] = "drop table customerTable";

  // execute all the sql statements
  for(int i = 0; i < 2; i++)
  {
    customerDataBaseRc = sqlite3_exec(customerDataBase, pSQL[i], callback, 0, &zErrMsg);
    if( customerDataBaseRc !=SQLITE_OK )
    {
      fprintf(stderr, "SQL error: %s\n", zErrMsg);
      sqlite3_free(zErrMsg);
      break; // break the loop if error occur
    }
  }
  cout << "destructor";
  //## end customer::~customer%50F93279003E.body
}

//## Other Operations (implementation)
unsigned int customer::createCustomer (char  iCustomerFirstName[20], char  iCustomerLastName[20], unsigned short iCustomerAge)
{
  //## begin customer::createCustomer%50EBFFA3036B.body preserve=yes
  const char *sqlStatement;

  string result;          // string which will contain the result

  ostringstream convert;   // stream used for the conversion

  convert << "insert into customerTable (Id, FirstName, LastName, Age) values (" << customerId << ", '" << iCustomerFirstName << "', '" << iCustomerLastName << "', " << iCustomerAge << ")";
  result = convert.str(); // set 'Result' to the contents of the stream

  sqlStatement = result.c_str();

  // Execute sql statement
  customerDataBaseRc = sqlite3_exec(customerDataBase, sqlStatement, callback, 0, &zErrMsg);
  // Check for errors
  if(customerDataBaseRc !=SQLITE_OK )
  {
    fprintf(stderr, "SQL error: %s\n", zErrMsg);
    sqlite3_free(zErrMsg);
  }

  return customerId++;
  //## end customer::createCustomer%50EBFFA3036B.body
}

char * customer::getCustomer (unsigned int iCustomerId)
{
  //## begin customer::getCustomer%50ED3D700186.body preserve=yes
  const char *sqlStatement;

  char *tmp ="blabla";

  string result;          // string which will contain the result

  ostringstream convert;   // stream used for the conversion

  convert << "select * from customerTable where Id = " << iCustomerId;
  result = convert.str(); // set 'Result' to the contents of the stream

  sqlStatement = result.c_str();

  // Execute the sql statement
  customerDataBaseRc = sqlite3_exec(customerDataBase, sqlStatement, callback, 0, &zErrMsg);
  // Check for errors
  if(customerDataBaseRc !=SQLITE_OK )
  {
    fprintf(stderr, "SQL error: %s\n", zErrMsg);
    sqlite3_free(zErrMsg);
  }

  return tmp;
  //## end customer::getCustomer%50ED3D700186.body
}

// Additional Declarations
  //## begin customer%50E6CCB50119.declarations preserve=yes
  //## end customer%50E6CCB50119.declarations

//## begin module%50E6CCB50119.epilog preserve=yes
//## end module%50E6CCB50119.epilog 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-21T11:19:02.387

在这种情况下，通常会利用回调的`void *`（您称之为`NotUsed`）参数——您在安装回调时定义的*参数*。对于 C++，您通常会将该参数设置为`this`指向您感兴趣的对象的指针，然后将回调（`extern "C"`c++ 源文件中的一个函数）作为`friend`类的方法（如有必要）。

这看起来像这样：

```
class customer
{
    ...
public:
    int callback(int argc, char **argv, char **azColName);
};

static int c_callback(void *param, int argc, char **argv, char **azColName)
{
    customer* cust = reinterpret_cast<customer*>(param);
    return cust->callback(argc, argv, azColName);
}

char* customer::getCustomer(int id)
{
    ...
    rc = sqlite3_exec(db, sql, c_callback, this, &errMsg);
    ...
}

int customer::callback(int argc, char **argv, char **azColName)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-21T12:06:09.440

Using[`sqlite3_exec`](http://sqlite.org/c3ref/exec.html)的缺点是您必须将一些值从字符串转换回数字，并且它需要为所有结果记录分配内存（这在读取大表时可能会导致问题）。此外，回调始终是一个单独的函数（即使它在同一个类中）。

对于您的示例查询，使用[`sqlite3_prepare`](http://www.sqlite.org/c3ref/prepare.html)// API 将如下所示[`sqlite3_step`](http://www.sqlite.org/c3ref/step.html)：[`sqlite3_finalize`](http://www.sqlite.org/c3ref/finalize.html)

```
void one_customer::readFromDB(sqlite3* db, int id)
{
    sqlite3_stmt *stmt;
    int rc = sqlite3_prepare_v2(db, "SELECT FirstName, LastName, Age"
                                    " FROM customerTable"
                                    " WHERE Id = ?", -1, &stmt, NULL);
    if (rc != SQLITE_OK)
        throw string(sqlite3_errmsg(db));

    rc = sqlite3_bind_int(stmt, 1, id);    // Using parameters ("?") is not
    if (rc != SQLITE_OK) {                 // really necessary, but recommended
        string errmsg(sqlite3_errmsg(db)); // (especially for strings) to avoid
        sqlite3_finalize(stmt);            // formatting problems and SQL
        throw errmsg;                      // injection attacks.
    }

    rc = sqlite3_step(stmt);
    if (rc != SQLITE_ROW && rc != SQLITE_DONE) {
        string errmsg(sqlite3_errmsg(db));
        sqlite3_finalize(stmt);
        throw errmsg;
    }
    if (rc == SQLITE_DONE) {
        sqlite3_finalize(stmt);
        throw string("customer not found");
    }

    this->id         = id;
    this->first_name = string(sqlite3_column_text(stmt, 0));
    this->last_name  = string(sqlite3_column_text(stmt, 1));
    this->age        =        sqlite3_column_int(stmt, 2);

    sqlite3_finalize(stmt);
} 
```

（此代码仅通过抛出`string`带有错误消息的 a 来处理错误。）

# android - 如何在服务android中取消alarmmanager

> ID：14437434
> 
> 赞同：-2
> 
> 时间：2013-01-21T11:15:59.367
> 
> 标签：android, alarmmanager

我使用 alarmManager 来控制 Locationmanager 以始终检查距离。我总是使用 setRepeating 警报 10 秒（用于检查）

我只想在用户外出区域（距离> 100 m）时第一次发出警报，但它每 10 秒发出一次警报（用户外出）。

第一次报警时如何取消？

非常感谢。

活动

```
 trackchk.setOnCheckedChangeListener(new OnCheckedChangeListener() {     
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if(trackchk.isChecked())
                {
                    Intent intrack = new Intent(hatebug.this,trackservice.class);
                    intrack.putExtra("LT", lattointent);
                    intrack.putExtra("LN", lontointent);

                    Calendar calendartrack = Calendar.getInstance();
                    calendartrack.setTimeInMillis(System.currentTimeMillis());
                    calendartrack.add(Calendar.SECOND, 3);
                    getPreferences(MODE_PRIVATE).edit().putBoolean("CHECKTRACK", true).commit();
                    tracklocal = PendingIntent.getService(hatebug.this, 0, intrack, PendingIntent.FLAG_UPDATE_CURRENT);
                    alarmtrack = (AlarmManager)getSystemService(ALARM_SERVICE);
                    alarmtrack.setRepeating(AlarmManager.RTC_WAKEUP, calendartrack.getTimeInMillis(), 6000, tracklocal);
                }
                else {
                    getPreferences(MODE_PRIVATE).edit().putBoolean("CHECKTRACK", false).commit();
                    alarmtrack = (AlarmManager)getSystemService(ALARM_SERVICE);
                    alarmtrack.cancel(tracklocal);
                }
            }
        }); 
```

服务（onStart）

```
public void onStart(Intent intent,int startId){
            // TODO Auto-generated method stub
        float latserv = intent.getFloatExtra("LT", 0);
        float lonserv  =intent.getFloatExtra("LN", 0);      
        String slat = String.valueOf(latserv);
        String slon = String.valueOf(lonserv);
        LocationManager locate = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        Location lm = locate.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        float lat = (float) lm.getLatitude();
        float lon = (float) lm.getLongitude();
        float dlat = (float) Math.toRadians(lat - latserv);
        float dlon = (float) Math.toRadians(lon - lonserv);
        float a1 = (float) ((Math.sin(dlat/2))*(Math.sin(dlat/2)));
        float a2 = (float) ((Math.cos(Math.toRadians(lon)))*(Math.cos(Math.toRadians(100.546652)))*(Math.sin(dlon/2))*(Math.sin(dlon/2)));
        float a = a1+a2;
        float c = (float) (2*Math.atan2(Math.sqrt(a), Math.sqrt(1-a)));
        float d = 6371000*c;

        String lool = String.format("Latitude\t\t: %1$s\nLongitude\t: %2$s\nDistance\t\t: %3$f",slat,slon,d);
        Toast.makeText(getApplicationContext(), lool, Toast.LENGTH_SHORT).show();
        if(d>100)
        {

                            Vibrator vibrator = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
                            vibrator.vibrate(1000);                     
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:19:19.603

通过调用[AlarmManager.cancel(PendingIntent 操作)](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)

# c - 如何在Type B中定义Type A，在Type A中定义Type B？

> ID：14437435
> 
> 赞同：7
> 
> 时间：2013-01-21T11:16:00.893
> 
> 标签：c, delphi, pointers, types, record

我有两种类型。一种 A 型和一种 B 型。问题 A 型包含 B 型，B 型包含 A 型。这样的事情是行不通的：

```
 type
    typeA = record
       test1 : typeB;
    end;
  type
    typeB = record
       test2 : typeA;
    end; 
```

**编辑：** 那不是我的设计。我将包含此类结构的 C 头文件（以访问 DLL）转换为 delphi。

**编辑 2：** “C++ 结构是 AFAIR 类的另一个名称。而且必须有指针，而不是值本身。 – Arioch '1 分钟前”是的，你是对的，它是一个指向类型的指针：

我在那里定义：

```
test1 : ^typeB; 
```

那会起作用吗？

```
test1 : Pointer; 
```

**Edit3：** C结构：

```
/* DLPDFPAGE */
typedef struct dlpdfpage
{
    CosObj              Page;
    CosObj      PrintSelect;
    ASFixedRect         PageBBox;
    ASFixedRect         ContentBBox;
    struct dlpdfpage    *Next;
    PDRotate            Angle;
    struct dlpdfdoc     *Doc;
    DLPDFSTREAM         *Content;
    long                PageNumber;
    char                Complete;
    char                FontSubstituted;
    char                FontMM;
    char                FontBad;
} DLPDFPAGE;

/* DLPDFDOC */
typedef struct dlpdfdoc
{
    DLPDFINSTANCE       *dliInstance;
    PDDoc               pdDoc;
    CosDoc              cosDoc;
    DLPDFOUTLINE        *Outlines;
    char                *PDFFileName;
    char                *PDFPostFileName;
    DLPOS               LastPageEnd;
    DLPOS               BeforeDef;
    ASFixedRect         DocBBox;
    long                PageCount;
    long                PageTreeWidth;
    long                PageTreeDepth;
    long                PageTreeDepthUsed;
    DLPDFPAGETREEARRAY  *AllPages;
    DLPDFFONTLIST       *AllFonts;
    DLPDFFORMLIST       *AllForms;
    DLPDFFORMLIST       *AllColors;
    DLPDFIMAGELIST      *AllImages;
    DLPDFSPOTCOLORLIST  *AllSpotColors;
    DLPDFSPOTCOLORLIST  *AllPatterns;
    DLPDFEXTGSTATELIST  *AllExtGStates;
    DLPDFPAGE           *PageList;
    DLPDFPAGE           *LastPage;
    DLPDFDEST           *DeferedDests;
    DLPDFSIGNATURE      *signatureHolder;
    struct dlpdfacroform *AcroFormBase;
    CosObj              PatternColorObj,
                        PatternColorRGBObj,
                        PatternColorCMYKObj,
                        PatternColorGrayObj,
            PrintSelect,
            PrintSelectCriteria;
    CosObj      IdentH, IdentV;
    ASAtom              DocumentEncoding;
    long                FontCount;
    long                FormCount;
    long                PatCount;
    long                ImageCount;
    char                Compress;
    char                Linearize;
    char                PageTreeComplete;
    char                EmbedFonts;
    char                PatternColorsDefined;
    char                MakeThumbNails;
    ASBool              psSevenBitSafe;
    ASInt32             EncryptKeyByteCount;

    char                condenseResDicts;
    CosObj              resourceDict;  

    ASInt16             pdfMajorVer;    
    ASInt16             pdfMinorVer;    

    DLPDFINCLUDEDRES    *InclRes;       

    DLPDFSPOTCOLORLIST  *AllShadings;
    long                ShadeCount;

} DLPDFDOC; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T11:38:11.003

您误解了那些 C 结构代表什么。那是因为 a`record`是一个值类型：它存储在你声明变量的地方。所以让我们做几层递归声明，你就会明白我的意思了；假设这两个结构并不完全相同：

```
type
  TA = record
     test1 : TB;
     SomethingElseFromA: Byte;
  end;

  TB = record
     test2 : TA;
     SomethingElseFromB: Byte;
  end; 
```

结构`TA`可以重写为：

```
type
  TA = record
    // Replaced test1 : TB with the actual content of TB, because that's
    // what a record means.
    test1_test2: TA;
    test1_SomethingElseFromB: Byte;

    SomethingElseFromA: Byte;
  end; 
```

当然，我们现在已经很好地将 self 递归包含到`TA`记录中，类似于：

```
 TA = record
    // Replaces test1_test: TA
    test1_test2: TA; // Oops, still not fixed, need to do it again...
    test1_SomethingElseFromB: Byte;
    SomethingElseFromA: Byte;

    test1_SomethingElseFromB: Byte;
    SomethingElseFromA: Byte;
  end; 
```

您可能想使用引用类型来获得看起来相似但并不相似的东西。引用类型始终是指针，因此它是固定大小的；编译器可以毫无问题地分配它。这将是有效的，使用指向记录的指针：

```
type
  pTypeB = ^typeB;
  pTypeA = ^typeA;

  typeA = record
     test1 : pTypeB;
  end;

  typeB = record
     test2 : pTypeA;
  end; 
```

或者，您可以使用类；出于同样的原因，类是引用类型；它们的工作方式与指针相同。当您声明一个指针类型的变量时，编译器会分配`SizeOf(Pointer)`字节。

* * *

既然你已经发布了 C 结构，我可以说它们太长了，我无法尝试完整的翻译，但我可以提出一些建议： 你应该在一个`Type`块中声明所有类型；不要`Type`在每个类型声明之前编写。这允许您在记录类型之前创建指针类型，如下所示：

```
Type
  PMyRecord = ^TMyRecord;

  // Somewhere in the same Type block
  TMyRecord = record
  end; 
```

对于需要指向记录的指针的每种类型，首先在`Type`关键字之后声明指针，这样更简单。接下来，您需要识别 C 指针。如果`*`数据类型的名称和字段的名称之间有一个，那就是一个指针。这通常是这样写的：

```
int *PointerToSomeInt; 
```

但这些同样有效：

```
int * PointerToSomeInt;
int* VarName1, * VarName1, * VarName3; // Three pointers to integer. 
```

最后，您需要处理对齐问题。如果可以，检查 C 端结构的大小，然后检查 Delphi 端的大小：你应该得到相同的大小。如果你不这样做，你应该`{$ALIGN}`在你的结构声明之前尝试几个随机的编译器指令并重复，直到你找到正确的对齐方式。如果所有其他方法都失败了，您需要找出问题所在（哪些字段在 Delphi 端的对齐方式不同）并放入一些对齐字节来人为地修复它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-21T11:20:12.547

也许最好的解决方案是重新考虑设计。但您可能也对所谓的类*前向声明*​​感兴趣：

```
type
  TTypeB = class;

  TTypeA = class
    test: TTypeB;
  end;

  TTypeB = class
    test: TTypeA;
  end; 
```

原文如此！这仅适用于课程，不适用于记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T20:30:36.717

您展示的 C 代码的 Delphi 翻译如下所示：

```
type
  DLPDFDOC = record; // forward declaration

  { DLPDFPAGE }
  DLPDFPAGE = record
    Page: CosObj;
    PrintSelect: CosObj;
    PageBBox: ASFixedRect;
    ContentBBox: ASFixedRect;
    Next: ^DLPDFPAGE;
    Angle: PDRotate;
    Doc: ^DLPDFDOC;
    Content: ^DLPDFSTREAM;
    PageNumber: Longint;
    Complete: AnsiChar;
    FontSubstituted: AnsiChar;
    FontMM: AnsiChar;
    FontBad: AnsiChar;
  end;

  { DLPDFDOC }
  DLPDFDOC = record
    dliInstance: ^DLPDFINSTANCE;
    pdDoc: PDDoc;
    cosDoc: CosDoc;
    Outlines: ^DLPDFOUTLINE;
    PDFFileName: PAnsiChar;
    PDFPostFileName: PAnsiChar;
    LastPageEnd: DLPOS;
    BeforeDef: DLPOS;
    DocBBox: ASFixedRect;
    PageCount: Longint;
    PageTreeWidth: Longint;
    PageTreeDepth: Longint;
    PageTreeDepthUsed: Longint;
    AllPages: ^DLPDFPAGETREEARRAY;
    AllFonts: ^DLPDFFONTLIST;
    AllForms: ^DLPDFFORMLIST;
    AllColors: ^DLPDFFORMLIST;
    AllImages: ^DLPDFIMAGELIST;
    AllSpotColors: ^DLPDFSPOTCOLORLIST;
    AllPatterns: ^DLPDFSPOTCOLORLIST;
    AllExtGStates: ^DLPDFEXTGSTATELIST;
    PageList: ^DLPDFPAGE;
    LastPage: ^DLPDFPAGE;
    DeferedDests: ^DLPDFDEST;
    signatureHolder: ^DLPDFSIGNATURE;
    AcroFormBase: ^DLPDFACROFORM;
    PatternColorObj: CosObj;
    PatternColorRGBObj: CosObj;
    PatternColorCMYKObj: CosObj;
    PatternColorGrayObj: CosObj;
    PrintSelect: CosObj;
    PrintSelectCriteria: CosObj;
    IdentH: CosObj;
    IdentV: CosObj;
    DocumentEncoding: ASAtom;
    FontCount: Longint;
    FormCount: Longint;
    PatCount: Longint;
    ImageCount: Longint;
    Compress: AnsiChar;
    Linearize: AnsiChar;
    PageTreeComplete: AnsiChar;
    EmbedFonts: AnsiChar;
    PatternColorsDefined: AnsiChar;
    MakeThumbNails: AnsiChar;
    psSevenBitSafe: ASBool;
    EncryptKeyByteCount: ASInt32;
    condenseResDicts: AnsiChar;
    resourceDict: CosObj;  
    pdfMajorVer: ASInt16;    
    pdfMinorVer: ASInt16;    
    InclRes: ^DLPDFINCLUDEDRES;       
    AllShadings: ^DLPDFSPOTCOLORLIST;
    ShadeCount: Longint;
  end; 
```

# zk - 将部分窗口标题设置为粗体

> ID：14437437
> 
> 赞同：0
> 
> 时间：2013-01-21T11:16:07.920
> 
> 标签：zk

我使用 ZK（刚开始学习），我想将模式窗口标题中的一些文本设置为粗体。

这是我使用的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<zk xmlns="http://www.zkoss.org/2005/zul">

<window apply="hidden-file-name" title="${msg:l('title')}"  width="390px" closable="true">

    <tablelayout columns="2">
        <!-- Some code -->
    </tablelayout>

</window>

</zk> 
```

我已经`title`在我的 .properties 文件中分为`title`和`info`. 我希望“信息”部分以粗体显示。

**以防万一，这里有一个例子：**

标题：“这是我的标题”

信息：“这是信息”

-> 我希望我的模态窗口有这个标题：“这是我的标题**，这是信息**”。

**我找到了一个肮脏的解决方案**，即将“信息”部分设置为标题，用于`float: left;`将其带到左侧，并通过设置固定宽度来更改“标题”部分的css以消除两者之间出现的空间部分，但正如你所看到的，这很糟糕..我想要一些干净的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:19:44.737

添加`Caption`到`Window`并且位置默认应该是
[Title here] **[Caption Here]**
所以只需将信息放在`Caption`s 标签中并将其设置为粗体。

据我所知
，在 zk 中直接设置不同的样式是不可能的。
当然，您可以通过 java 脚本更改它，但
在您的情况下，这将是矫枉过正。

## 编辑

请参阅[此](http://zkfiddle.org/sample/19v814u/2-Window-with-caption)示例。您会看到标题和说明都在左边。
所以这是正常的。

在我玩了一会儿之后，我找到了解决方案。看[这里](http://zkfiddle.org/sample/19v814u/4-Window-with-caption)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:49:25.487

您可以尝试覆盖 bind_ 函数以在客户端编程呈现的 dom 元素之后更新标题的内容，

例如，

```
<window border="normal" title="the bold title">
    <attribute w:name="bind_"><![CDATA[
        function (a, b, c) {
            this.$bind_(a, b, c);
            var cap = this.$n('cap');
            cap.innerHTML = cap.innerHTML.replace('bold', '<span style="font-weight: bold;">bold</span>');
        }
    ]]></attribute>
</window> 
```

参考：

[ZK 客户端编程](http://books.zkoss.org/wiki/Small_Talks/2010/April/Client_Side_Programming)

# ruby-on-rails - 设计是否可以与具有相同帐户的多个 email_id 一起使用？

> ID：14437439
> 
> 赞同：2
> 
> 时间：2013-01-21T11:16:10.727
> 
> 标签：ruby-on-rails, email, authentication, devise

[Devise](https://github.com/plataformatec/devise)是一个很棒的 gem，可用于基本或omniauth 身份验证注册和其他事情，如会话维护、重新发送确认密码等。

但是是否可以使用设计将多个电子邮件地址映射到同一用户？

就像我有 3,4 个电子邮件 ID，例如

1.  sahil@abc.com
2.  sahil@xyz.com
3.  sahil@mno.com

**用例和示例**

我已经使用我的第一个电子邮件 ID 进行了注册，即`sahil@abc.com`使用自动化系统并创建了帐户。但我总是更喜欢使用我的其他 email_id 即`sahil@xyz.com`。所以，我想建立一个系统，用户可以使用上述任何一个具有相同/不同密码的电子邮件地址登录。但是用户应该只有一个帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:28:40.157

这是我真正需要[的 RoR 设计：使用用户名或电子邮件登录](https://stackoverflow.com/questions/2997179/ror-devise-sign-in-with-username-or-email)

```
 def self.find_for_database_authentication(conditions={})
    (self.find_by_email(conditions[:email])) || (AuthorizedEmail.confirmed.find_by_email(conditions[:email]).user if AuthorizedEmail.confirmed.find_by_email(conditions[:email]).present?)
  end 
```

它的作用是：

1.  首先尝试通过搜索电子邮件ID来查找用户记录以进行身份​​验证。
2.  如果它得到记录，它会返回记录，否则我们进入下一部分。
3.  如果表中存在任何经过​​验证和确认的电子邮件，它会在授权电子邮件表中查找。如果有这样的条目，它会尝试查找与该特定授权电子邮件相关的用户并将其返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:52:29.313

我认为更酷的方法是尝试覆盖 'authentication_keys' 方法，因为它[允许您定义 keys](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-with-something-other-than-their-email-address)。

但是，以下链接有一个[可行的解决方案](https://stackoverflow.com/questions/2997179/ror-devise-sign-in-with-username-or-email):)

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:20:28.187

我会说：

*   你有一个电子邮件字段

*   您在某处存储了其他电子邮件

您可以告诉 Devise[您允许基于不同字段登录](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-with-something-other-than-their-email-address)。

# php - 如何仅打印或导出页面的一部分

> ID：14437442
> 
> 赞同：0
> 
> 时间：2013-01-21T11:16:15.120
> 
> 标签：php, pdf, yii, fpdf, print-style

我正在尝试在 Yii 中打印/导出页面的一部分。最好的方法是：创建打印样式表或导出为 pdf。怎么做？我要打印/导出的页面部分称为：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:36:36.333

导出是什么意思？

例如，当导出到 JSON 或 XML 时，我有“空白”模板，我在其中呈现 XML 或 JSON 格式的视图。

出口是为了什么？

# asp.net - ReportViewer 的表单标签是否需要操作？

> ID：14437443
> 
> 赞同：0
> 
> 时间：2013-01-21T11:16:15.893
> 
> 标签：asp.net, reportviewer, report-viewer2010

我`VS2010`用来创建一个简单的 aspx 页面，`ReportViewer`上面有一个控件。控件从`ReportViewer`服务器加载远程报告。这似乎工作正常。

但是当我填写报告的文本字段时，要过滤相同的数据，然后什么都不会显示......

我可以清楚地看到它正在通过`FireBug`. 但是请求通过了`localhost`，但是报告在不同的服务器上。

这是否意味着我必须在标签中指定 a`URL`或某些东西？和`form`都放置在带有 的标签中。`ReportViewer``ScriptManager``form``runat="server"`

所以我不确定我是否需要手动指定要请求的服务器才能`ReportViewer`正常工作。

因为我目前看到的只是`textfields`我可以过滤数据的报告。但没有显示报告，通常显示在`input`字段下方。其余的只是纯白色。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:07:18.940

runat="server" 指定它是否应该在服务器或客户端计算机上运行，​​它实际上与 ReportViewer 控件无关，这是 ASP.NET 的事情。

见这里：[runat="服务器"](https://stackoverflow.com/questions/304290/why-does-asp-net-webforms-need-the-runat-server-attribute)

为了从服务器获取报告，您应该查看远程模式，请参见此处：[远程模式](http://msdn.microsoft.com/en-us/library/ms251669%28v=vs.80%29.aspx)

希望这足以让您获得所需的结果。

# c# - 过度使用 switch 语句开销

> ID：14437445
> 
> 赞同：4
> 
> 时间：2013-01-21T11:16:18.843
> 
> 标签：c#, switch-statement

我有 xml 文件，其中包含必须在 html 控件上执行的特定步骤和操作：

```
<Item control="Dropdown" action="Click" value=""/>
<Item control="Button" action="GetText" value=""/>
<Item control="Input" action="WriteText" value="Sample Text"/> 
```

我将使用很多控件，每个控件都有几种方法，例如`Click`, `GetText`, `Exsists`..

目前我使用开关来处理它，但我听说这不是一个好习惯。我有一个选择特定控件的开关，并且每个控件都有调用特定方法的开关。

```
switch (control)
            {
                case "button":
                    return new Button;
                case "table":
                    return new Table;
                (...)
            }

(...)

        switch (action)
        {
            case "click":
                this.Click();
                return true;
            case "gettext":
                this.GetText();
                return true;
            default:
                return false;
        } 
```

我没有太多的编码经验，所以我不确定这是否是处理这个问题的好方法。你能给我一些建议如何做得更好吗？也许有一些编码模式在这里可能会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:21:21.367

我建议考虑创建一个“调度表”。您可以在此处查看 C# 示例：[https ://stackoverflow.com/questions/715457/how-do-you-implement-a-dispatch-table-in-your-language-of-choice](https://stackoverflow.com/questions/715457/how-do-you-implement-a-dispatch-table-in-your-language-of-choice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:17:52.153

为了使其类型更强（但这也引入了一些开销，因为您必须创建类），您可以为要获取的每个控件创建类并序列化/反序列化它们。

因此，您将拥有例如而不是 Item：

```
<Button action="Click" value="" /> 
```

它们都将从同一个基类继承或实现相同的接口，因此最终您将获得一个反序列化的 IMyControls :)

你可以根据他们拥有的类型做一个“switch case”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:27:24.380

```
public class BaseControl
{
  public object Click(){ }
  public object GetText() { }
  public virtual object ExecuteCommand() { }
}
public class TableControl : BaseControl
{
  public override object ExecuteCommand()
  {
    //Do your method
    return base.GetText();
  }
} 
```

然后返回`TableControl`而不是`Table`调用/覆盖执行命令，它将根据它的类型调用您的特定命令。

创建一个不同的类型来继承您的基本控件类，具体取决于您要执行的操作覆盖执行命令并调用操作。希望这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:12:07.723

您可以为您拥有的每种类型的控件创建一个类

```
namespace SomeNamespace {
    class Button {
    }
    public void Click(){
    }
} 
```

然后当你阅读 XML

```
//assemblyName is the full name of the assembly holding your control classes
var type = System.GetType(assemblyName, "SomeNamespace." + control);
var control = Activator.CreateInstance(type); //requires a default constructor
type.GetMethod(methodName).Invoke(control); //methodName could be click 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T11:25:08.520

如果您可以重命名控件的名称以匹配类名称，则可以通过反射创建实例；

```
string controlName = "System.Windows.Forms.Button";
Assembly assembly = typeof(Form).Assembly; 
Type type = assembly.GetType(controlName);
object controlObject = Activator.CreateInstance(type); 
```

此外，您也可以通过反射调用方法；

```
MethodInfo methodInfo = controlObject.GetType().GetMethod("Method Name");
methodInfo.Invoke(controlObject,null); 
```

# .net - asp net app 403 - 禁止访问：访问被拒绝。从远程客户端。视窗服务器 2008

> ID：14437447
> 
> 赞同：2
> 
> 时间：2013-01-21T11:16:25.620
> 
> 标签：.net, asp.net-mvc, permissions, windows-server-2008

我刚刚将一个 Asp.Net MVC 4 应用程序部署到我公司的一个全新的 Web 服务器上。它运行 Windows Server 2008、SQL Server 2008 和 IIS7.5

*   我在 IIS 中配置了应用程序
*   启用匿名身份验证和表单身份验证并指向正确的路径
*   我已将 NERTWORK SERVICES 添加到应用程序文件夹中，并且在 .NET Authorization All Users 中设置为允许。

尝试从我得到的远程客户端计算机访问应用程序

```
403 - Forbidden: Access is denied. 
```

我能够访问 IIS 页面。还有其他我应该查看的权限吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:07:27.707

当用户访问登录页面时，它还没有经过身份验证。我的应用程序池的匿名用户是 IUSR。

我需要在应用程序文件夹上添加具有读取和执行权限的 IUSR 来解决我的问题。

# vb.net - LinqToSQL 更新：每个更改的属性一个语句

> ID：14437448
> 
> 赞同：1
> 
> 时间：2013-01-21T11:16:26.453
> 
> 标签：vb.net, linq-to-sql

当我尝试更新 LinqToSQL 对象时，引擎会`DataContext.getChangeSet().Updates`为我更改的每个属性创建一个条目。由于覆盖检查，这显然失败了......

我该如何纠正这种行为（所有更改的一个更新）？

正如您在生成的 SQL 代码中所见，属性 ahvNo 和 insuranceNo 未被识别为已更改（不在更新列表中），但它们已更改（在 where 查询中）。

第一条语句成功运行，但第二条语句抛出异常`1 of 2 updates failed.`。

这是我使用的VB代码：

```
Using dc As New WatchStoreDC()
    Dim usr = If(dc.users.SingleOrDefault(Function(u) u.id = id), New AppUser())
    usr.employeeNo = employeeNo
    usr.ahvNo = dc.formatAHVNumber(ahvNo)
    usr.insuranceNo = dc.formatInsuranceNumber(insuranceNo)
    usr.badgeNo = badgeNo
    usr.birthdate = birthdate
    usr.lastName = lastName
    usr.firstName = firstName
    usr.title = title
    usr.roles = roles

    Dim usrAct = String.Empty, mdfTim = Now
    If usr.id = 0 Then
        usrAct = "ins" : usr.createdAt = mdfTim : usr.createdByID = GeneralInfo.userID : dc.users.InsertOnSubmit(usr) : dc.SubmitChanges()
    Else
        usrAct = "upd" : usr.modifiedAt = mdfTim : usr.modifiedByID = GeneralInfo.userID
    End If

    Dim prf = If(usr.profile, New AppProfile())
    prf.languageID = profileLanguage
    prf.cultureID = profileCulture
    prf.updatedAt = mdfTim

    If prf.id = Guid.Empty Then prf.id = usr.securityID : dc.profiles.InsertOnSubmit(prf)
    dc.SubmitChanges()
End Using 
```

这是 LinqToSQL 架构：

```
<Table Name="app.tblUsers" Member="users">
    <Type Name="AppUser">
        <Column Name="usrID" Member="id" Type="System.Int32" DbType="Int NOT NULL IDENTITY" IsPrimaryKey="true" IsDbGenerated="true" CanBeNull="false" />
        <Column Name="usrSecurityID" Member="securityID" Type="System.Guid" DbType="UniqueIdentifier NOT NULL" IsDbGenerated="true" CanBeNull="false" />
        <Column Name="usrCompanyCode" Member="companyCode" Type="System.String" DbType="NVarChar(25)" CanBeNull="true" />
        <Column Name="usrEmployeeNo" Member="employeeNo" Type="System.String" DbType="Char(6)" CanBeNull="true" />
        <Column Name="usrAHVNo" Member="ahvNo" Type="System.String" DbType="Char(14)" CanBeNull="true" />
        <Column Name="usrInsuranceNo" Member="insuranceNo" Type="System.String" DbType="Char(16)" CanBeNull="true" />
        <Column Name="usrTitle" Member="title" Type="System.String" DbType="VarChar(10)" CanBeNull="true" />
        <Column Name="usrLastName" Member="lastName" Type="System.String" DbType="NVarChar(50) NOT NULL" CanBeNull="false" />
        <Column Name="usrFirstName" Member="firstName" Type="System.String" DbType="NVarChar(50)" CanBeNull="true" />
        <Column Name="usrRole" Member="rolesInt" Type="System.Int32" DbType="Int NOT NULL" CanBeNull="false" />
    </Type>
</Table> 
```

这是生成的 SQL：

```
UPDATE [app].[tblUsers]
SET [usrModifiedBy] = @p14, [usrModifiedAt] = @p15
WHERE ([usrID] = @p0) AND ([usrSecurityID] = @p1) AND ([usrCompanyCode] IS NULL) AND ([usrEmployeeNo] IS NULL) AND ([usrAHVNo] IS NULL) AND ([usrInsuranceNo] IS NULL) AND ([usrTitle] IS NULL) AND ([usrLastName] = @p2) AND ([usrFirstName] = @p3) AND ([usrLanguage] IS NULL) AND ([usrBirthdate] IS NULL) AND ([usrAddressStreetNo] = @p4) AND ([usrAddressAddLine] IS NULL) AND ([usrAddressZIP] = @p5) AND ([usrAddressCity] = @p6) AND ([usrAddressCountry] = @p7) AND ([usrPhoneWork] IS NULL) AND ([usrPhoneHome] = @p8) AND ([usrPhoneMobile] IS NULL) AND ([usrEMailWork] IS NULL) AND ([usrLogin] IS NULL) AND ([usrSiteLocation] IS NULL) AND ([usrSiteNo] IS NULL) AND ([usrUnitCenter] IS NULL) AND ([usrDepartment] IS NULL) AND ([usrOE] IS NULL) AND ([usrOEName] IS NULL) AND ([usrCostCenter] IS NULL) AND ([usrCCResponsible] IS NULL) AND ([usrSuperior] IS NULL) AND ([usrJoinDate] IS NULL) AND ([usrExitDate] IS NULL) AND ([usrExitReason] IS NULL) AND ([usrBadgeNo] IS NULL) AND ([usrContractType] IS NULL) AND ([usrContractTypeName] IS NULL) AND ([usrPayrollContact] IS NULL) AND ([usrHRContact] IS NULL) AND ([usrApprovals] = @p9) AND ([usrPaymentType] = @p10) AND ([usrRole] = @p11) AND ([usrEMailContact] IS NULL) AND ([usrPhoneContact] IS NULL) AND ([usrCreatedBy] = @p12) AND ([usrCreatedAt] = @p13) AND ([usrModifiedBy] IS NULL) AND ([usrModifiedAt] IS NULL) AND ([usrSignature] IS NULL) AND ([usrSignatureMIME] IS NULL)

UPDATE [app].[tblUsers]
SET [usrModifiedBy] = @p15, [usrModifiedAt] = @p16
WHERE ([usrID] = @p0) AND ([usrSecurityID] = @p1) AND ([usrCompanyCode] IS NULL) AND ([usrEmployeeNo] IS NULL) AND ([usrAHVNo] = @p2) AND ([usrInsuranceNo] IS NULL) AND ([usrTitle] IS NULL) AND ([usrLastName] = @p3) AND ([usrFirstName] = @p4) AND ([usrLanguage] IS NULL) AND ([usrBirthdate] IS NULL) AND ([usrAddressStreetNo] = @p5) AND ([usrAddressAddLine] IS NULL) AND ([usrAddressZIP] = @p6) AND ([usrAddressCity] = @p7) AND ([usrAddressCountry] = @p8) AND ([usrPhoneWork] IS NULL) AND ([usrPhoneHome] = @p9) AND ([usrPhoneMobile] IS NULL) AND ([usrEMailWork] IS NULL) AND ([usrLogin] IS NULL) AND ([usrSiteLocation] IS NULL) AND ([usrSiteNo] IS NULL) AND ([usrUnitCenter] IS NULL) AND ([usrDepartment] IS NULL) AND ([usrOE] IS NULL) AND ([usrOEName] IS NULL) AND ([usrCostCenter] IS NULL) AND ([usrCCResponsible] IS NULL) AND ([usrSuperior] IS NULL) AND ([usrJoinDate] IS NULL) AND ([usrExitDate] IS NULL) AND ([usrExitReason] IS NULL) AND ([usrBadgeNo] IS NULL) AND ([usrContractType] IS NULL) AND ([usrContractTypeName] IS NULL) AND ([usrPayrollContact] IS NULL) AND ([usrHRContact] IS NULL) AND ([usrApprovals] = @p10) AND ([usrPaymentType] = @p11) AND ([usrRole] = @p12) AND ([usrEMailContact] IS NULL) AND ([usrPhoneContact] IS NULL) AND ([usrCreatedBy] = @p13) AND ([usrCreatedAt] = @p14) AND ([usrModifiedBy] IS NULL) AND ([usrModifiedAt] IS NULL) AND ([usrSignature] IS NULL) AND ([usrSignatureMIME] IS NULL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:18:30.920

在谷歌上进行了更多搜索后，我发现[了另一个](https://stackoverflow.com/questions/3017013/linq-to-sql-failing-to-update)解决我问题的问题。

问题如下：我正在根据这个属性生成哈希码。

我现在添加了一个私有变量来存储第一个生成的哈希码。

# java - linux 平台中的重绘问题

> ID：14437449
> 
> 赞同：0
> 
> 时间：2013-01-21T11:16:26.687
> 
> 标签：java, swing

当我在 Linux 平台上运行我的应用程序时，它会抛出异常，并且在框架/面板中看不到任何组件，而是显示灰色屏幕，当我们单击/移动鼠标点到组件上方时，将显示该组件。我也有动态测试更新按钮，每次鼠标移动到按钮上方都会更新。

注意：这个相同的应用程序在 Windows 平台上运行良好。

```
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 | Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 |     at javax.swing.plaf.basic.BasicButtonUI.getMinimumSize(BasicButtonUI.java:352)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 |     at javax.swing.JComponent.getMinimumSize(JComponent.java:1714)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 |     at java.awt.BorderLayout.minimumLayoutSize(BorderLayout.java:651)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 |     at java.awt.Container.minimumSize(Container.java:1651)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.995 |     at java.awt.Container.getMinimumSize(Container.java:1636)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at javax.swing.JComponent.getMinimumSize(JComponent.java:1716)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.FlowLayout.minimumLayoutSize(FlowLayout.java:448)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.minimumSize(Container.java:1651)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.getMinimumSize(Container.java:1636)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at javax.swing.JComponent.getMinimumSize(JComponent.java:1716)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.GridBagLayout.GetLayoutInfo(GridBagLayout.java:1094)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.GridBagLayout.getLayoutInfo(GridBagLayout.java:893)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.GridBagLayout.ArrangeGrid(GridBagLayout.java:2052)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.GridBagLayout.arrangeGrid(GridBagLayout.java:2008)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.GridBagLayout.layoutContainer(GridBagLayout.java:789)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.layout(Container.java:1421)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.doLayout(Container.java:1410)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validateTree(Container.java:1507)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validateTree(Container.java:1513)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validateTree(Container.java:1513)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validateTree(Container.java:1513)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validateTree(Container.java:1513)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.Container.validate(Container.java:1480)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at javax.swing.RepaintManager.validateInvalidComponents(RepaintManager.java:669)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:124)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:642)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventQueue.access$000(EventQueue.java:85)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventQueue$1.run(EventQueue.java:603)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventQueue$1.run(EventQueue.java:601)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.security.AccessController.doPrivileged(Native Method)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventQueue.dispatchEvent(EventQueue.java:612)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
INFO   | jvm 1    | main    | 2013/01/21 15:14:23.996 |     at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:09:04.833

好的，让我们研究一下你的堆栈跟踪：

> 在 javax.swing.plaf.basic.BasicButtonUI.getMinimumSize(BasicButtonUI.java:352)

让我们看一下那里的代码：

```
public Dimension getMinimumSize(JComponent c) {
    Dimension d = getPreferredSize(c);
View v = (View) c.getClientProperty(BasicHTML.propertyKey);
if (v != null) {
    d.width -= v.getPreferredSpan(View.X_AXIS) - v.getMinimumSpan(View.X_AXIS); // Line 352
}
return d;
} 
```

好的，所以你`NullPointerException`来自`getPreferredSize(JComponent c)`哪个返回`null`。

所以最后，要么你的按钮包含额外的组件，要么在 Linux 上选择的外观返回一个`null`值（无论出于何种原因，用这么少的细节几乎不可能找到）。

# ios - 在 PDFKitten 中无法进行特殊字符搜索

> ID：14437450
> 
> 赞同：1
> 
> 时间：2013-01-21T11:16:33.800
> 
> 标签：ios, pdf

我正在使用 PDFKitten 搜索功能，发现在此特殊字符无法搜索（例如，假设在 PDF 中有一个单词 RAVI，如果我搜索该单词，它将返回 NULL 值。请建议我如何解决这个问题问题。

## 谢谢

在scanner.m 中有一个函数didScanString

```
void didScanString(CGPDFStringRef pdfString, Scanner *scanner)
{
     NSString *tempStr = (NSString *)CGPDFStringCopyTextString(pdfString);
     NSLog(@"ScanString==%@",tempStr);

NSString *string = [[scanner stringDetector] appendPDFString:pdfString withFont:[scanner currentFont]];
    NSLog(@"didScanString====>>>%@",string);
    [ss appendString:string];
    [[scanner content] appendString: string];
    //NSLog(@"TOTAL: %@",[scanner content]);

} 
```

例如，搜索 PDF 字符串是 MGR KL445's 在上述函数中，两个 NSLog 输出第一个显示 ScanString==MGR KL445™s，第二个什么都不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:09:05.347

您的搜索文本*RAVI*包含一个竖撇号；您是否检查过 PDF 是否不包含该字符的向前或向后倾斜版本？毕竟那些不同的版本有不同的字符代码。

在[PDFKitten 突出显示错误位置](https://stackoverflow.com/questions/12914479/pdfkitten-is-highlighting-on-wrong-position/12932653)的问题的上下文中，该库将连字作为单个连字字符而不是“去连字”字符组返回似乎很明显。如果您的文本包含连字，这可能就是原因。

在同一个问题的上下文中，PDFKitten 字体数据解析在某些方面被证明是有缺陷的。作为对该问题的回应，针对此类缺陷的一种解决方法已添加到代码中，在我看来，它并没有解决一般情况，仅解决了一些特殊情况，参见。我在那里的回答中的建议。

此外，一些字体根本不包含将其字形映射回 unicode 字符的信息。您说*特殊字符无法搜索*--- 可能这些特殊字符取自不支持解析的不同字体。

从理论上讲，撇号甚至可能是使用图形的非文本运算符绘制的。在这种情况下，文本解析将找不到它。

如果这些想法都不能解释您的情况（或者您无法检查它们是否如此），请提供样本 PDF 以供检查。

**编辑**（考虑到您的[Brivo MR355 copy.pdf](https://www.filesanywhere.com/fs/v.aspx?v=8a726b865d6573b5a3ac)示例文件）

我再次假设撇号很麻烦，这次是在*MR355 中*。原始页面内容有两个精度，

```
/TT1 1 Tf
0.559 0 Td
(Brivo MR355\222s Ready Bar technology replaces 30 complex inputs with a single control, simplifying scan optimization )Tj 
```

和

```
/TT1 1 Tf
0.559 0 Td
(Brivo MR355\222s Ready Interface)Tj 
```

两次都使用字体资源/TT1，两次撇号都被编码为\222，它是十进制146的八进制，*WinAnsiEncoding*中的quoteright， PDFDocEncoding中的*商标*。

/TT1 是

```
/LastChar   146
/BaseFont   /REEDOQ+GEInspira
/Type   /Font
/Subtype    /TrueType
/Encoding   /WinAnsiEncoding
/Widths [232, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 198, 0, 0, 0, 530, 0, 0, 530, 0, 530, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 570, 0, 0, 0, 0, 0, 0, 243, 0, 0, 0, 764, 0, 0, 0, 0, 556, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 545, 545, 482, 545, 509, 297, 545, 544, 210, 0, 0, 210, 836, 544, 537, 545, 545, 341, 437, 317, 544, 474, 736, 471, 474, 427, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 190]
/FontDescriptor 32 0 R
/FirstChar  32 
```

/LastChar 是 146 和 /Encoding 是 /WinAnsiEncoding 应该使 PDFKitten 可以轻松地将 \222 识别为*quoteright*字符。

由于您的一条评论表明您没有使用最新的 PDFKitten 版本，因此我也会根据旧副本进行代码分析。

PDFKitten 在解析字体字典（`setEncodingNamed`在 Font.m 中）时识别字符串“WinAnsiEncoding”并将 WinAnsiEncoding（3）从枚举 CharacterEncoding（Font.h）中存储在 self.encoding 中；稍后，当将原始 PDF 数据转换为 unicode（`stringWithPDFString`在 SimpleFont.m 中）时，它调用并返回

```
NSString *string = [[NSString alloc] initWithData:rawBytes encoding:self.encoding]; 
```

但是 nsstring.h 映射中的编码常量

```
NSJapaneseEUCStringEncoding     = 3, 
```

因此，这里的 PDFKitten 尝试将原始数据解码为[EUC-JP](http://en.wikipedia.org/wiki/Extended_Unix_Code#EUC-JP)编码，对于 >127 的字节值应该惨遭失败，而 <= 127 的字节值被解释为 ASCII 字符。

[如果由于某种原因初始化失败（例如，如果数据不代表用于编码的有效数据），则](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/initWithData:encoding:)NSString initWithData返回 nil 。因此，PDFKitten 在处理 PDF 数据时会丢弃整个片段。

乍一看，当前代码库中的相关代码部分仍然相同。因此，您可能希望在 PDFKitten 站点上报告一个关于字符代码 > 127 的问题，该问题也适用于带有`/Encoding /WinAnsiEncoding`和最有可能带有 `/Mac*Encoding' 的字体。

# android - 从代码下载 PDF 时受保护

> ID：14437455
> 
> 赞同：1
> 
> 时间：2013-01-21T11:16:53.083
> 
> 标签：android, pdf

这可能看起来很奇怪，但是当我从我的 AsyncTask 下载 pdf 时，似乎受到保护，无法复制或编辑。我可以很好地打开。同样的文件，当我从浏览器下载时没有限制。怎么了？

这是我的问题的基础，我真正的问题是许多android pdf的阅读器无法打开文件。

我的下载代码：

我正在使用以下代码下载 PDF 文件：

```
 class DownloadFileAsync extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(DIALOG_DOWNLOAD_PROGRESS);
        }

        @SuppressLint({ "SdCardPath", "SdCardPath" })
        @Override
        protected String doInBackground(String... aurl) {
            int count;

        try {

        URL url = new URL(aurl[0]);
        URLConnection conexion = url.openConnection();
        conexion.connect();

        int lenghtOfFile = conexion.getContentLength();
        Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/Download/prueba.pdf");

        byte data[] = new byte[1024];

        long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                publishProgress(""+(int)((total*100)/lenghtOfFile));
                output.write(data, 0, count);
            }
            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {}
        return null;

        }
        protected void onProgressUpdate(String... progress) {
             Log.d("ANDRO_ASYNC",progress[0]);
             mProgressDialog.setProgress(Integer.parseInt(progress[0]));
        }

        @Override
        protected void onPostExecute(String unused) {
            dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
            operationsWithSD();
        }
    } 
```

我将文件传输回桌面（通过电子邮件），但我也无法在那里打开它。我刚刚发现，当我用 Adob​​e Reader 打开它时，我会得到一个“受保护”标签。我要疯了吗？

**从我的应用程序下载并从我的计算机打开的 pdf 的图像** ![在此处输入图像描述](../Images/d4fc50ad30072f8b138d651543a882d4.png)

请帮助我，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:56:14.797

首先，您需要使用[Environment](http://developer.android.com/reference/android/os/Environment.html)对象中的方法替换 SD 卡的硬编码路径。

*其次，问题仍然是您所说的copy*是什么意思。一个文件不可能打开但不能被同一用户复制，那么您是否尝试使用不同的用户 ID（应用程序）复制它？如果是这样，这显然是一个访问权限问题。您可能想要决定是否使用`Environment.getExternalStorageDirectory()`或`Environment.getExternalStoragePublicDirectory`并且您可能想要根据`MODE_`提供的用于与`FileOutputStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:09:38.817

首先，请不要像你一样扔掉错误。请至少在调试时使用 android.util.Log 来记录异常。

放置 android.util.Log.d("ANDRO_ASYNC", "发生异常", e); 在返回 null 之前；在 catch {} 块中。我想你甚至不知道什么时候发生了一些错误。

而且我相信只有在打开 url 流之后才能获得内容长度。我猜你使用 HTTP，它应该只在你打开流进行阅读时发送请求。如果你想要 POST 消息，你可以写入缓冲区，它怎么知道你想要什么？

并且应该在 try 子句之前创建流变量，并分配 null。您可以打开一个描述符，但第二个可能会因异常而失败。你应该在抓住它后关闭它。为此使用 finally 关键字。

```
 InputStream input = null;
    OutputStream output = null;
    try {

    URL url = new URL(aurl[0]);
    URLConnection conexion = url.openConnection();
    conexion.connect();

    input = new BufferedInputStream(url.openStream());
    output = new FileOutputStream(Environment.getExternalStorageDirectory()+"/Download/prueba.pdf");

    byte data[] = new byte[1024];

    int lenghtOfFile = conexion.getContentLength();
    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

    long total = 0;

        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
        }
    } catch (Exception e) {
        Log.d("ANDRO_ASYNC", "Exception thrown", e);
    } finally {
        if (output != null) {
            output.flush();
            output.close();
        }
        if (input != null)
          input.close();

    } 
```

请检查您下载的 PDF 的大小。我猜它的大小是 0 字节，因为发生了一些错误。您确定您在清单中使用了 android.permission.WRITE_EXTERNAL_STORAGE 权限吗？

# objective-c - NSMutableArray 到 NSString 的转换

> ID：14437457
> 
> 赞同：0
> 
> 时间：2013-01-21T11:17:02.303
> 
> 标签：objective-c, nsmutablearray

这是来自 NSMutableArray 的字符串：

```
(
    (
        "Some String Value"
    )
) 
```

此代码显示我想要的字符串值，但是，它显示时带有括号和引号。如何删除它们？

先感谢您！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:28:08.967

在您的情况下，它是二维数组：

像这样的东西：

```
NSArray *arr=[NSArray arrayWithObject:@"asdf"];
NSArray *arr2=[NSArray arrayWithObjects:arr, nil]; 
```

您需要进入第二级以将其检索为：

```
NSLog(@"=> %@",arr2[0][0]);
NSString *string=arr2[0][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:30:47.680

-(void)repeatArray:(NSArray *)array1 {

```
static NSMutableString *InsideString; // Better to use global Varaible declared in ViewDidLoad/loadView

NSArray *array = array1; //Its your array

for (int i = 0; i< [array count]; i++) {
    if ([[array objectAtIndex:i] isKindOfClass:[NSArray class]]) {
        [self repeatArray:[array objectAtIndex:i]];
    } else if ([[array objectAtIndex:i] isKindOfClass:[NSString class]]) {
        [InsideString appendString:[NSString stringWithFormat:@"%@ ", [array objectAtIndex:i]]];
    }
} 
```

}

# visual-studio-2010 - 如何安装实体框架 4.2？

> ID：14437461
> 
> 赞同：0
> 
> 时间：2013-01-21T11:17:19.910
> 
> 标签：visual-studio-2010, entity-framework, nuget

这过去通过 Nuget 很简单，但现在，我只能在 Nuget 中找到 5.0。如何专门安装 4.2 版？我们正在尝试从 4.0 升级到 4.2，但目前还没有准备好对 5.0 进行重大升级。这是当他们决定不发布 MSI（或者至少是其中包含 DLL 的 .ZIP，这正是我在这里所需要的）时出现的问题之一。

谢谢！

**注意：**这不是[这个问题](https://stackoverflow.com/questions/8054790/installing-entity-framework-4-2-in-vs2010)的重复。不同之处在于我在 Nuget 中找不到 4.2 了。在那个问题的时候，很容易/很明显找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:57:12.413

正如您所指出的，您可以通过添加`-Version <version you want>`到`Install-Package`命令来安装较旧的软件包。如果您查看 NuGet 库；当你选择一个包时，滚动到底部，你会找到*Version History*。在这里你可以选择你想要的版本：![NuGet 版本历史记录](../Images/fe99fd59223865d1dd6dd69eb4de713b.png)

单击其中一个版本将显示软件包详细信息以及安装所选版本的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:50:02.700

我想我想通了。看看[这个页面](https://nuget.org/packages/EntityFramework/5.0.0)。在底部，它列出了 EntityFramewor 的旧版本，当您单击它时，它会将您带到该特定版本的详细信息，包括安装它的 Nuget 命令。例如，[Entity Framework 4.2.0.0](https://nuget.org/packages/EntityFramework/4.2.0.0)可以通过以下方式安装：

```
PM> Install-Package EntityFramework -Version 4.2.0.0 
```

我实际上还没有这样做，但我认为这正是我想要的。

# c++ - 使用 MinGW 进行 Eclipse 调试：无法执行 MI 命令

> ID：14437467
> 
> 赞同：8
> 
> 时间：2013-01-21T11:17:39.537
> 
> 标签：c++, eclipse, mingw

我新安装了 Eclipse Juno 32 位，新安装了 MinGW 32 位，我的平台是 Windows 7 64 位。当尝试调试一个简单的程序时，我可以看到非常简单的表达式，但更复杂的一切都会让我出错。对于以下程序中的示例：

```
int main()
{
  vector<int> vRings;
  for(int i=0;i<50;i++) {
    vRings.push_back(i%5);
  }
  //std::cout << "result:" << getRingNumber(vRings,vDiscs);
  return 0;
} 
```

在监视窗口中，观看 vRing 正常工作，但尝试观看矢量的内容不起作用：

尝试观看 vRings[0]：

> 错误：报告了多个错误。\ 无法执行 MI 命令：-var-create - * vRings[0] 来自调试器后端的错误消息：找不到运算符 []。\ 无法创建变量对象

尝试观看 vRings.at(0)：

> vRings.at(0) 错误：报告了多个错误。\ 无法执行 MI 命令：-var-create - * vRings.at(0) 来自调试器后端的错误消息：无法评估函数 - 可能已内联\无法创建可变对象

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-05T01:29:23.377

您正在尝试查看函数调用的结果。`vRings.at()`和都是`vRings[]`返回对值的引用的函数（后者是重载函数）。在你的情况下 - 一个整数。

如果要查看`vRings`索引 0 处的值，可以尝试将其分配给某个变量，例如：

```
int main()
{
      vector<int> vRings;
      for(int i=0;i<50;i++) {
        vRings.push_back(i%5);
      }
      int watchme = vRings.at(0);
      //std::cout << "result:" << getRingNumber(vRings,vDiscs);
      return 0;
} 
```

然后你可以观察变量`watchme`。

# java - eclipse插件中jdom2的使用

> ID：14437468
> 
> 赞同：0
> 
> 时间：2013-01-21T11:17:40.130
> 
> 标签：java, eclipse, eclipse-plugin

我之前在使用 fatjar 构建它的普通和独立 java 项目中使用了 JDOM2 XML 解析器。现在我尝试在 Eclipse 插件中使用它，但我无法这样做。我尝试通过将其复制到 lib 文件夹并将其添加到类路径的运行时选项卡中的 plugin.xml 中来将其添加到我的插件中。这样做之后，插件甚至不再启动

无法创建视图：插件*** 无法加载类 ***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:30:45.903

从现有的 JAR 档案创建一个新的插件项目 -> 插件（来自 eactor 的评论）

添加未解析的jar

导出为插件

在主插件项目中搜索插件

将其添加到依赖项中

# javascript - JavaScript原型继承不起作用

> ID：14437471
> 
> 赞同：1
> 
> 时间：2013-01-21T11:17:46.967
> 
> 标签：javascript, prototypal-inheritance

我是 JS 的初学者，一直试图让以下代码工作，但它没有给我预期的结果：

```
cat = function(name) {
    this.name = name;
    this.talk = function() {
        alert("Cat "+name+" says meow.");
    }
}
cat1 = new cat("George");
cat1.talk();

cat.prototype.changeName = function(name) {
    this.name = name;
}
cat2 = new cat("Felix");
cat2.changeName("Bill");
cat2.talk(); 
```

从我读到的关于 JS 的内容中，从我应该得到的第二个警报中得到`"Bill says meow"`. 但看起来属性没有设置，我仍然得到`"Felix says meow."`

任何人都可以指出错误吗？这将非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:21:39.433

这不是继承问题，而是访问正确变量的问题。看看你的构造函数：

```
cat = function(name) {
    this.name = name;
    this.talk = function() {
        alert("Cat "+name+" says meow.");
    }
} 
```

具体来说`alert("Cat "+name+" says meow.");`。`name`将*始终*引用您传递给构造函数的参数。您应该访问`this.name`，因为您的`changeName`方法设置`this.name`为新值。

虽然没有理由在构造函数中定义这个方法，但也将它添加到原型中：

```
var Cat = function(name) {
    this.name = name;
}

Cat.prototype.talk = function() {
    alert("Cat " + this.name + " says meow.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:21:58.823

你没有使用继承。我看不出你从代码中需要它的地方。

首先：您的“谈话”功能需要访问此`name`属性。它不是。

```
Cat = function(name) {
    this.name = name;
    this.talk = function() {
        alert("Cat "+this.name+" says meow."); //needs the to access this' name property
    }
} 
```

下一篇：不需要每次创建实例时都重新声明talk方法：

```
Cat.prototype.talk = function(){
    ...
} 
```

如果你确实需要继承，你可以实现它：

```
var MainCoon = function(name){
    this.name = name;
}
MainCoon.prototype = new Cat();
MainCoon.prototype.be6ftTall = function(){

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:34:08.943

引用 this 指的是函数 cat 的实例，因此 this.name 是 cat 实例中 name 的值。引用name（不带this）是指构造函数后面的cat函数名。我想你读完这篇文章后可能会有更多的见解：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)

页面底部有一个 next 链接，当您进入关于闭包的部分时，您可能会了解 name 变量和 this.name 变量的范围。

此外，JavaScript 不是基于类的语言，而是（根据某些人的说法是一种糟糕的实现）原型语言：

[http://www.lshift.net/blog/2006/07/24/subclassing-in-javascript-part-1](http://www.lshift.net/blog/2006/07/24/subclassing-in-javascript-part-1)

如果您的子类“子类”了父类，或者更好地说：如果您的 childFunction 使用 parentFunction 作为其原型，请注意任何 chidFunction“实例”共享其父类的惰性副本，如本例所示：

```
var parent,child,bill,suzan;
parent=function(){
    this.name="parent";
    this.array=[];
}
child=function(){
}
child.prototype=new parent();
bill=new child();
bill.name="bill";
suzan=new child();
suzan.name="suzan";
suzan.array.push("done in suzan");
console.log(suzan.name);//correct is suzan
console.log(bill.name);//correct is bill
console.log(bill.array);//incorrect, shows ["done in suzan"] 
```

您可以通过将“孩子”更改为：

```
child=function(){
    parent.call(this);
} 
```

但这仅在使用 this 在父函数体中声明对象属性（不包括函数）时才有效。语法而不是原型。

# ssrs-2008 - 日期和时间的单独参数

> ID：14437475
> 
> 赞同：1
> 
> 时间：2013-01-21T11:18:00.650
> 
> 标签：ssrs-2008

我想在我的报告中使用一个参数作为日期，另一个参数作为时间，如下所示。开始时间`[16/01/2012][12.00 am]`

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:24:45.580

当然这是一个多步骤的过程：

1.  设置一个TEXT的变量为'DATE'作为变量值并提示
2.  将左窗格中的“默认值”设置为“2012 年 1 月 16 日”
3.  设置一个TEXT的变量为'TIME'作为变量值并提示
4.  将左窗格中的“默认值”设置为“00:00”
5.  设置一个数据集“AvailableDateTime”，将两者组合成一个合法的日期时间字段：

    ```
    SELECT        CAST(@Date + ' ' + @Time AS DateTime) AS Datetime 
    ```

6.  设置DATETIME的第三个变量为'DATETIME'作为变量值和提示。

7.  将此变量设置为使用属性左侧窗格中的“可用值”为“从查询中获取值”。使用步骤 5 中的数据集。

您现在已经为数据和时间设置了一个单独的字段。

进一步考虑避免用户输入错误。您可能希望将第一个变量绑定为只能从您在可用值中设置的值或从查询中选择。问题是，如果用户胖手指日期或时间，它将无法运行，因为系统只是试图组合两个字符串并从中生成日期时间。您可能希望直接从 getgo 的查询中列出值。

编辑更改前两个变量：

1.  您可以将第一个变量设置为 datetime，从而为最终用户提供日历。
2.  您可以设置第二个数据集以获取最终用户的可用时间：

    ```
    declare @time table ( tm int)

    declare @cursor int = 0

    while @cursor <= 23
    Begin
        insert into @time values (@cursor)

        set @cursor += 1
    End

    select cast(CAST(tm as varchar) + ':00' as time) as HourOfTheDay
    from @time 
    ```

3.  设置您的第二个变量以从直接在上面的步骤 2 中进行的查询中获取值。

您现在应该能够像上面那样将这些值放在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T11:56:37.190

正如我在评论中所说，`SSRS`不允许您为`Date`and设置单独的参数`Time`。它只有一个参数`Date/Time`。

如我所见，您有两个选择。

1.  添加一个文本参数并将其视为时间。然后，您可以根据您使用的技术进行一些验证。
2.  解决这个问题的另一种方法是创建一个可能值的列表。例如，您选择`Integer`类型，然后创建一个`Available Values`. （见图片）

![在此处输入图像描述](../Images/25ff49ea1f38590faec28cf35ab8407a.png)

![在此处输入图像描述](../Images/1c71feda0f99adab4ebff1b1e018575a.png)

# ios5 - Twitter登录兼容ios5.0,5.1,6.0

> ID：14437480
> 
> 赞同：0
> 
> 时间：2013-01-21T11:18:17.717
> 
> 标签：ios5, twitter, ios6, ios5.1

由于 ios5.0 中添加了 twitter 框架，我正在使用它的类`TWTweetComposeViewController`

```
if([TWTweetComposeViewController canSendTweet])
    {
        NSLog(@"can send tweet");
    }
    else{
         NSString *message = @"The application cannot send a tweet at the moment. This is because it cannot reach Twitter or you don't have a Twitter account associated with this device.";
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops" message:message delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alertView show];
    } 
```

在此步骤中，我需要向用户显示 twitter 的登录页面。为此，我是否应该将用户重定向到设置以登录用户？

如果是，则此代码不起作用

```
 NSURL *twitterURL = [NSURL URLWithString:@"prefs:root=TWITTER"];
    [[UIApplication sharedApplication] openURL:twitterURL]; 
```

我也读过一些这在 ios6 中不起作用的地方。那么我应该怎么做才能让用户登录一会儿而不直接发送推文。现在我只想让用户登录。

我也参考了[这个问题](https://stackoverflow.com/questions/13946062/twitter-framework-for-ios6-how-to-login-through-settings-from-app) 它与 ios6 一起工作得很好，但在这种情况下，我该如何处理 ios5.1 ？

任何帮助将不胜感激....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:11:16.443

我用下面的条件编码想通了。我只有这种方式。如果有人有任何其他方法，请建议我。

```
if (SYSTEM_VERSION_LESS_THAN(@"6.0")) {
        if(SYSTEM_VERSION_EQUAL_TO(@"5.0"))
        {
            NSURL *twitterURL = [NSURL URLWithString:@"prefs:root=TWITTER"];
            [[UIApplication sharedApplication] openURL:twitterURL];
        }else{
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"No_Tw", nil) message:NSLocalizedString(@"No_TW_Ac", nil) delegate:nil cancelButtonTitle:NSLocalizedString(@"Button_Ok", nil) otherButtonTitles:nil, nil];
            [alertView show];
        }
    }

    if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
        SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        tweetSheet.view.hidden=TRUE;

        [self presentViewController:tweetSheet animated:NO completion:^{
            [tweetSheet.view endEditing:YES];
        }];
    } 
```

如果 iOS 是 5.0，那么它将重定向到 Twitter 的登录，否则它将向用户显示警报以转到设置并进行登录。对于 iOS 6.0 及更高版本`SLComposeViewController`运行良好。

# oracle10g - 使用另一个字段的更改填充表格表单字段值

> ID：14437481
> 
> 赞同：1
> 
> 时间：2013-01-21T11:18:21.057
> 
> 标签：oracle10g, oracle11g, oracle-apex, tabular-form

`description, previous_value, unit_price`我的 Oracle Apex 应用程序中有一个包含字段的表格表单。

我需要用`previous_value`字段上的数据填充字段的值`description`。`previous_value`我有一个查询来从数据库中获取字段的值。我需要将`onChange`事件添加到`description`字段。随着字段的变化，`description`字段的值`previous_value`应该使用我的查询填充。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:36:35.017

您可以通过多种方式将更改事件绑定到字段。通过 td 标题定位，或编辑列，然后在“元素属性”字段中添加一个类（例如“fireAjax”）。然后，您可以使用 javascript 代码绑定到事件，或者通过动态操作执行此操作。

您可以使用以下两种形式中的任何一种进行 ajax 调用：通过 htmldb_Get 或使用 jquery.post：

```
$('td[headers="ENAME"] input').change(function(){   
   var ajaxRequest = new htmldb_Get( null , $v('pFlowId') , 'APPLICATION_PROCESS=get_job' , $v('pFlowStepId'));
   ajaxRequest.addParam('x01', $(this).val());
   ajaxResult = ajaxRequest.get();
   $(this).closest("tr").find("td[headers='JOB'] input").val(ajaxResult);
}); 
```

或者

```
$('td[headers="ENAME"] input').change(function(){
var that = this;
$.post('wwv_flow.show', 
       {"p_request"      : "APPLICATION_PROCESS=get_job",
        "p_flow_id"      : $v('pFlowId'),
        "p_flow_step_id" : $v('pFlowStepId'),
        "p_instance"     : $v('pInstance'),
        "x01"            : $(this).val()
        },
        function(data){ 
           var eJob = $(that).closest("tr").find("td[headers='JOB'] input");
           eJob.val(data);
        },
        "text"
      );
}); 
```

使用此应用程序进程，在页面上定义执行点“AJAX 回调”：
名称：get_job

```
DECLARE
   l_job emp.job%TYPE;
BEGIN
   SELECT job
   INTO l_job
   FROM emp
   WHERE ename = apex_application.g_x01;

   htp.p(l_job);
EXCEPTION WHEN no_data_found THEN
   htp.p('');
END; 
```

请记住，在此过程中处理错误和返回取决于您！确保捕获常见错误，例如`no_data_found`和/或`too_many_rows`. 如果它们发生并且没有被捕获，那么您很可能会遇到 javascript 错误，因为您的 javascript 回调代码无法处理错误（在 apex 中将是包含错误消息的整页 html）。
此外，如您所见，我正在使用该`x01`变量，它是 apex 中的 10 个全局临时变量之一。这样就不需要使用页面项目并将值提交给它的会话状态。

如果您想将此代码放入动态操作中，您可以。如果您选择动态操作，请选择“更改”作为事件和 jQuery 选择器，并选择执行 JavaScript 代码作为真正的操作。然后，您可以将功能代码放在那里。除了`$(this)`需要`$(this.triggeringElement)`

# vba - Access中数字列的AllowZeroLength是吗？

> ID：14437486
> 
> 赞同：0
> 
> 时间：2013-01-21T11:18:40.873
> 
> 标签：vba, ms-access

我想知道我们能否创建列以允许空值，即使它在 MS Access 中的默认值为 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:23:26.920

当然可以。如果它不是必需的条目——也就是说，Required 属性设置为 No——它将允许 null。将由您或用户决定清除您想要空值的 0。

# php - .htaccess 重写规则到骨干路由器转换

> ID：14437488
> 
> 赞同：1
> 
> 时间：2013-01-21T11:18:52.160
> 
> 标签：php, javascript, .htaccess, mod-rewrite, backbone.js

我已经在互联网上进行了一些挖掘，但没有什么让自己变得明显。

我正在寻找将自定义 CMS 与骨干网集成，以便可以使用原始 http 请求或通过骨干网的“状态”开关加载页面。CMS 目前专注于通过 htaccess/mod-rewrite 为其路由/url 自动重写规则，但是骨干网对其内部路由使用不同的格式结构。

我希望 CMS 可以将其重写规则转换为骨干格式，以便每当将页面添加到 CMS 时，骨干就会意识到它并自动更新。例如，CMS 将这样的页面负载输出到全局 SiteMap 对象：

```
....
"contact"       => array(
        "key"       =>      "contact",
        "url"       =>      "^(en|fr|de)/contact/$",
        "type"      =>      "page",
        "template"  =>      "contact",
        "method"    =>      "contact",
        "sitemap"   =>      TRUE,
        //other page config vars etc
    ),//..and so on
... 
```

然后有一个解析器，它向 .htaccess 写入规则，如下所示：

```
RewriteRule ^(en|fr|de)/contact$ index.php?page=contact&lang=$1&section=$2 
```

**问题：**

显然，[主干路由器格式](http://backbonejs.org/#Router)有点不同，需要在 PHP 中完成大量的翻译工作才能输出干净整洁的路由器配置。我不敢相信我是第一个遇到这种情况的人，因为这似乎是尝试将 Backbone 应用程序集成到 CMS 的必要步骤。谁能指出一些翻译这些字符串格式的方法的方向？也许我以错误的方式接近这个？

确实非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:53:28.337

[`router.route`](http://backbonejs.org/#Router-route)Backbone 支持使用该方法将路由定义为正则表达式。Apache mod_rewrite 规则也是正则表达式。因此，诸如此类的表达式`^(en|fr|de)/contact/$`已经是有效的主干路由。

你没有说你是否已经有一种机制来获取客户端的路由配置，无论是通过“站点地图”服务还是通过将数据引导到服务器上的 HTML 页面。但是，假设您可以像这样输出站点地图对象：

```
var sitemap = {
  "contact": {
    "url": "^(en|fr|de)/contact/$",
    "type": "page"
    //..other properties
   },
   //...other pages
} 
```

您可以通过迭代站点地图来注册路线：

```
var CMSRouter = Backbone.Router.extend({
  page: function(pageName, language) {
      console.log(pageName); // -> "contact"
      console.log(language); // -> "en"
  }
});

var router = new CMSRouter();
_.each(sitemap, function(entry, key) {
    //handler method based on type ("page")
    var handler = router[entry.type];

    //create a pre-applied callback function where the first argument
    //is always set to the sitemap entry key ("contact"), and the
    //rest of the arguments are filled from the capturing groups from
    //the regular expression.
    var callback = _.bind(handler, router, key);

    //register route
    router.route(new RegExp(entry.route), callback);
});

Backbone.history.start(); 
```

这可能没有考虑到系统的很多复杂性，但原则上它应该可以正常工作。如果您可以使用更准确的要求编辑您的问题，我将很乐意编辑答案。

# javascript - Javascript：选中取消选中分组复选框

> ID：14437491
> 
> 赞同：0
> 
> 时间：2013-01-21T11:19:01.940
> 
> 标签：javascript, function, checkbox

我有一个像这样的表格： -

```
<form name="frmChkForm" id="frmChkForm">
        <input type="checkbox" name="modules[1]" onclick="checkgroup(this)" value="1">Module 1<br>
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[1][1]">Unit 1
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[1][2]">Unit 2
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[1][3]">Unit 3<br>
        <input type="checkbox" name="modules[2]" onclick="checkgroup(this)" value="2">Module 2<br>
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[2][1]">Unit 4
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[2][2]">Unit 5
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[2][3]">Unit 6<br>
        <input type="checkbox" name="modules[3]" onclick="checkgroup(this)" value="3">Module 3<br>
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[3][1]">Unit 7
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[3][2]">Unit 8
        &nbsp;&nbsp;&nbsp;<input type="checkbox" name="units[3][3]">Unit 9
</form> 
```

我想选中/取消选中每个模块（主复选框）下包含的所有子复选框。

例如，如果我选中“模块 1”，则只应选中单元 1,2 和 3，而在取消选中“模块 1”时，应取消选中这些单元。其他模块也应该有同样的行为。

我正在寻找一个 Javascript 函数来执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:21:13.263

尝试这个

```
function checkgroup(obj){            
            var element = [];
            var inputs = document.getElementsByTagName("input");

            for(var i = 0; i < inputs.length; i++)
            {
                if(inputs[i].name.indexOf('units[' + obj.value + ']') == 0)
                {
                element.push(inputs[i]);
                }
            }

            if(obj.checked){
                for(i=0;i<element.length;i++){
                    element[i].checked = true;
                }
            }else{
                for(i=0;i<element.length;i++){
                    element[i].checked = false;
                }
            }
        } 
```

# android - Eclipse (Juno) 在启动时挂起

> ID：14437493
> 
> 赞同：0
> 
> 时间：2013-01-21T11:19:07.407
> 
> 标签：android, eclipse, adt

历史：

*   我安装了 ADT v21，它是基于 Eclipse Juno 构建的
*   已安装插件 SVNKIt 1.3.8、Subversive SVN 连接器、Sequoyah、Easy Shell 1.4

Eclipse 主要在重新启动时挂起，有时甚至在重新启动时挂起。它只有在删除 .metadata/.plugins/org.eclipse.e4.workbench 时才有效，我无法找到工作台是 Eclipse 挂起的根本原因。

任何人都可以为此提出建议的一次性解决方案吗？

# java - 速度模板#set 查询

> ID：14437504
> 
> 赞同：0
> 
> 时间：2013-01-21T11:19:43.990
> 
> 标签：java, templates, velocity

我正在尝试使用#set 并声明变量，但不知道为什么它不起作用。下面是我的代码：

```
#set( $emailContent = '<tr>
  <td style="color:#000;font-size:12px;line-height:16px;font-family:Arial;text-align:left;padding-top:15px" >
    <p style="font-size:12px;padding-top:15px;padding-bottom:15px">
        $userFirstName,<br /><br />
        Your sample account has been unlocked by your administrator. You should now be able to log back into your account. If you have further difficulty logging in, use the "Forgot password" link on the login page or contact your administrator for assistance.
    </p></td>
</tr>' ) 
```

我想知道在与#set 一起使用之前在服务器端声明$emailContent 是否重要。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:13:25.590

不，在与#set 一起使用之前，您不必在java 中声明它。但是您的措辞方式听起来好像并非所有内容都是“服务器端”，它应该是。速度是在服务器上处理的，而不是在客户端上。此外，并非每个版本的 Velocity 都支持多行字符串文字（如您的示例中所示）。确保您使用的是最新版本。

# c# - 我们如何在 WCF 中使用 RX 框架来实现长时间运行的进程和频繁的 UI 更新？

> ID：14437506
> 
> 赞同：0
> 
> 时间：2013-01-21T11:19:46.530
> 
> 标签：c#, wcf, system.reactive

最近我开始了解 Rx 框架，看起来很有前途。我对此表示怀疑。假设从我的 UI [可能是 winforms 或网页]，我调用 webservice 并发送一个列表。所以我的调用就像 --> myWCFServiceMethod(List empLists)。在这个服务方法中，对于每个员工对象，我需要再次进行另一个服务调用并获取它的结果并执行某种数据库操作[保存和更新]，最后将每个员工的状态发送回客户端。对于列表中的每个员工，我必须并行执行相同的操作。没有顺序。

Rx 框架有可能吗？为此，我是否需要为每个员工状态更新实施回调合同回到客户端 UI ？

我用数据网格制作了 UI，数据网格有 2 列。第一个是员工姓名，第二个是状态列。

当 UI 加载时，我在网格中加载了 100 名员工。然后点击开始按钮。因此，我将所有员工对象打包到一个列表中，并将该列表发送到 webservice 方法。

现在，我正在寻找要做的事情，即当员工经历不同流程时每个流程的状态更新。类似并行过程的东西。没有顺序过程。如果一些员工对象可以提前完成工作，而另一些则需要一些时间。所以没有过程的顺序。任何员工都可以调用自己关联的外部 Web 服务调用并从中获取结果。一个它得到这样的结果，然后它会尝试保存或更新数据库。对于所有这些过程，我想得到通知员工的每个过程的状态正在经历并最终完成它的工作。

如果没有回调合同，我不明白 Rx 怎么能做到这一点？

我没有看到任何类似类型的教程或指导我们如何做到这一点。

请引导我通过正确的方式。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:09:42.307

这是您的问题的快速答案。

要并行进行多个服务调用，然后在它们返回时获取结果，您需要这样的查询：

```
var query =
    from index in indexes.ToObservable()
    from result in webServiceCall(index)
    select new { index, result }; 
```

签名`webServiceCall`看起来像.`IObservable<R> webServiceCall(I index)`

然后，您使用以下命令执行查询：

```
query.Subscribe(ir =>
{
    // Do stuff with ir.index and ir.result
}); 
```

专注于实施`webServiceCall`以适应此代码。我希望这能给你一个起点。

# iphone - iOS 6.0 MPMoviePlayerController 全屏模式黑色？然后应用阻止了更多操作

> ID：14437511
> 
> 赞同：2
> 
> 时间：2013-01-21T11:19:55.017
> 
> 标签：iphone, xcode, ios6, mpmovieplayercontroller

MPMoviePlayerController 视频在屏幕为黑色时进入全屏模式。然后该应用程序被阻止。此问题仅适用于 iOS 6.0。但 iOS 5.1 运行良好。这是我的代码。如果我双击播放器全屏打开，但显示黑屏。

```
 self.moviePlayerController = [[MPMoviePlayerController alloc] init];
[self.moviePlayerController.view setFrame:_moviePlayerContentView.bounds]; 
[self.moviePlayerController setControlStyle:MPMovieControlStyleNone];
[self.moviePlayerController setAllowsAirPlay:NO];
[_moviePlayerContentView addSubview:self.moviePlayerController.view];
[self.moviePlayerController stop];
[self.moviePlayerController setContentURL:videoURL];
[self.moviePlayerController.view setHidden:NO];
[self.moviePlayerController prepareToPlay];
[self.moviePlayerController play]; 
```

我该如何处理这个问题？

达到 MPMovieFinishReasonPlaybackEnded 后，如何禁用全屏模式？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T11:46:16.970

在 iOS 6 中，MPMoviePlayerController 全屏调用 ViewDidDisappear 方法。您可能在 ViewDidDisappear 方法中停止播放器。如果是这样，请将其删除一段时间，然后再试一次。

# python - 用于 OpenCV 的 PyOpenNI 输入

> ID：14437512
> 
> 赞同：0
> 
> 时间：2013-01-21T11:19:55.240
> 
> 标签：python, kinect, openni, xt

我正在使用Python 中的**OpenCV**。我想从 Asus Xtion 获得输入。我能够从 PyOpenNI 成功运行示例。我想使用`igen.get_synced_image_map_bgr()`在opencv中获得的图像（str格式）。

igen-ImageGenerator

我想将其转换为`IplImage`. 我该怎么做，或者我如何才能在 Opencv python 代码中使用来自深度传感器的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T21:32:56.267

我最近在带有 OpenCV 的 PyOpenNI 中使用了来自 Kinect 的字符串格式深度数据。使用可以从字符串创建的 numpy 数组，它们是 Python 的 cv2 (OpenCV) 中的默认数据类型。

此处的代码示例：http: [//euanfreeman.co.uk/pyopenni-and-opencv/](http://euanfreeman.co.uk/pyopenni-and-opencv/)

不确定 Kinect 与您的深度传感器有何不同，但这可能是一个有用的起点。祝你好运！

编辑：添加代码

```
from openni import *
import numpy as np
import cv2

# Initialise OpenNI
context = Context()
context.init()

# Create a depth generator to access the depth stream
depth = DepthGenerator()
depth.create(context)
depth.set_resolution_preset(RES_VGA)
depth.fps = 30

# Start Kinect
context.start_generating_all()
context.wait_any_update_all()

# Create array from the raw depth map string
frame = np.fromstring(depth.get_raw_depth_map_8(), "uint8").reshape(480, 640)

# Render in OpenCV
cv2.imshow("image", frame) 
```

# git - Git 修订表达式

> ID：14437518
> 
> 赞同：3
> 
> 时间：2013-01-21T11:20:12.453
> 
> 标签：git, user-interface

我正在尝试开始使用 git，并且正在使用 Git GUI。我有我预先编写的代码，在它的目录中创建了一个 repo，但无法推送，因为没有分支。当我尝试制作一个时，它需要一个“修订表达式”。我不知道那是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:23:17.417

您推送到远程存储库。

你想要做的是`git add`和比`git commit`。

我建议，你自己通过[`git school`](http://try.github.com/levels/1/challenges/1)学习基础知识。

# django - 如何将所有剩余的子节点（即树）添加到 jstree 的选定节点？

> ID：14437530
> 
> 赞同：0
> 
> 时间：2013-01-21T11:20:47.510
> 
> 标签：django, jstree

我在windows上做django项目……我的jstree是这样的……

*   根

    > > *   父母1
    > > *   父母2

    当我单击 parent1 时，我想添加与 parent2 相同的所有剩余子节点（节点和所有子节点，这是一个 json 数据），依此类推。基本上当我点击父母时，只有它应该得到所有的孩子

# javascript - 如何从一批中删除字符串中所有不需要的字符？

> ID：14437532
> 
> 赞同：0
> 
> 时间：2013-01-21T11:20:51.313
> 
> 标签：javascript, regex, string

我有一个mac地址：`"22:33:44:12:34:56"`我想删掉所有的分号。如果我在没有正则表达式的情况下这样做，它将是：

```
"22:33:44:12:34:56".replace(":","") 
```

然后 `"2233:44:12:34:56".replace(":","")`直到我完成所有冒号。

在单个批次中执行此操作的正则表达式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:21:19.907

正则表达式标志`g`进行全局搜索：

```
"2233:44:12:34:56".replace(/:/g, ""); 
```

**参考：** [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:21:28.560

做这个 ：

```
"22:33:44:12:34:56".replace(/:/g,"") 
```

MDN 解释了[如何使用正则表达式替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)，尤其是`g`使函数替换所有出现的标志，而不仅仅是第一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:22:47.730

这个怎么样？

```
'22:33:44:12:34:56'.split(':').join('') 
```

# c++ - 更改名称文件，将我的文件 C++ 和 Qt 的第一行

> ID：14437535
> 
> 赞同：1
> 
> 时间：2013-01-21T11:20:53.877
> 
> 标签：c++, file, qt

我想更改文件的名称，但我不知道该怎么做。我有一个包含两行单词的 .txt，并且喜欢将第一行与我的文件 .txt 的名称相同。

这是我的代码：

```
void ventana1::on_ButtonGuardar_clicked()
{

QDir directory("C:/Users/Jaime/Desktop/interfaz/pacientes");
QString mFilename = directory.filePath("paciente.txt");

    QFile sFile(mFilename);
    if(sFile.open(QFile::WriteOnly | QFile::Text))
    {
        QTextStream out(&sFile);

        out << ui.lineEdit_2->text()<< "\n"
        << ui.lineEdit->text();

        sFile.flush();
        sFile.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:50:20.523

只需更换

`QString mFilename = directory.filePath("paciente.txt");`

经过

`QString mFilename = directory.filePath(ui.lineEdit_2->text());`

如果您需要将 lineEdit 的内容作为文件名。

# c++ - ZMQ：通过 ZMQ 队列发送自定义 CPP 对象

> ID：14437538
> 
> 赞同：5
> 
> 时间：2013-01-21T11:21:08.323
> 
> 标签：c++, zeromq, memcpy

我有一个名为 GenericMessage 的类，显示在下面的第一个代码片段中（在 GenericMessage.hxx 中定义）。

我有一个名为 TestFE.cpp 的 .cpp 文件（参见下面的第二个代码片段），它尝试通过 ZMQ 队列发送类 GenericMessage 的实例（另请参见下面的第四个代码片段 - ZmqHandler.hxx）。TesfFE.cpp 通过包含 ZmqHandler.hxx 来实现 ZMQ 推送模式。

我还有另一个名为 TestBE.cpp 的 .cpp 文件（参见下面的第三个代码片段），它通过 ZMQ 队列接收提到的 GenericMessage 实例。TestBE.cpp 在此处实现 ZMQ 拉取模式以通过 ZMQ 队列检索 GenericMessage 实例。

在 TestFE.cpp 中，我使用标准的 memcpy 函数将 GenericMessage 对象转换为 ZMQ 队列可以接受的形式。在 TestBE.cpp 的第 21 行（在注释中的第三个代码片段中标记），我得到一个分段错误，因为它看起来 memcpy 在发送方即 TestFE.cpp 上无法正常工作。执行 TestBE 时收到以下消息。我还在下面提供了 gdb 回溯。你能告诉我这里有什么问题吗？为什么你认为 memcpy 不能正确地将我的 GenericMessage 对象复制到 ZMQ message_t 格式？还是您认为问题出在其他问题上？任何意见将不胜感激。

**错误信息**

```
 $ ./TestBE
  Connecting to FE...
  RECEIVED: 1
  Segmentation fault (core dumped) 
```

**GDB 回溯**

```
 (gdb) r
   Starting program: /home/holb/HOLB_DESIGN/ZMQ/WORK1/TestBE 
  [Thread debugging using libthread_db enabled]
  Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
  [New Thread 0xb7c84b40 (LWP 4252)]
  [New Thread 0xb7483b40 (LWP 4253)]
  Connecting to FE...
  RECEIVED: 1

  Program received signal SIGSEGV, Segmentation fault.
  0xb7f371cc in std::basic_string<char, std::char_traits<char>, std::allocator<char>       >::basic_string(std::string const&) ()
  from /usr/lib/i386-linux-gnu/libstdc++.so.6
  (gdb) bt
  #0  0xb7f371cc in std::basic_string<char, std::char_traits<char>,      std::allocator<char> >::basic_string(std::string const&) ()
  from /usr/lib/i386-linux-gnu/libstdc++.so.6
  #1  0x08049621 in GenericMessage<std::string>::getData (this=0xbffff06c)
  at GenericMessage.hxx:18
  #2  0x08049075 in main () at TestBE.cxx:21
 (gdb) 
```

**代码片段 1 (GenericMessage.hxx)** #include #include #include

```
 template <class T>
  class GenericMessage {
  public:

         GenericMessage(int id, T msg): 
         beId(id), 
         data(msg)
         {}

         ~GenericMessage(){}

         T getData()
         {
           //LINE 18 is the following line!
           return data;
         }

          std::string toString()
          {
              std::ostringstream ss;
              ss << getBeId();
              std::string ret =  ss.str();

              return ret;
          }

          void setBeId(int id)
          {
              beId = id;
          }

          int getBeId()
          {
             return beId;
          }
 private:
        int beId;
        T data;
 }; 
```

**CODE SNIPPET 2 (TestFE.cxx ==> The sender)** #include "ZmqHandler.hxx" //ZmqHandler.hxx 内容见底部的第四个片段

```
 int main ()
 {
     ZmqHandler<std::string> zmqHandler;
     int counter = 1;

     while(1)
     {  
        std::string data = "Hello there!\0";
        GenericMessage<std::string> msg(counter, data);
        zmqHandler.sendToBE(&msg);
        counter++;
        sleep(1);
     }

     return 0;
 } 
```

**代码片段 3（TestBE.cxx ==> 接收器）**

```
 #include "zmq.hpp"
  #include "GenericMessage.hxx"
  #include <string>
  #include <iostream>

  int main ()
  {
      //  Prepare our context and socket
      zmq::context_t context (1);
      zmq::socket_t socket (context, ZMQ_PULL);

     std::cout << "Connecting to FE..." << std::endl;
     socket.connect ("tcp://localhost:5555");

    while(1){
        zmq::message_t reply;
            socket.recv (&reply);
            GenericMessage<std::string> *msg = (GenericMessage<std::string>*)(reply.data());                
            std::cout << "RECEIVED: " << msg->toString() << std::endl;

           /* *********************************  */
           /*  SEGMENTATION FAULT HAPPENS HERE   */
           /* The member "data" in class GenericMessage cannot be received while the  member "id" in the previous line can be received. */
           std::cout << "DATA: " << ((std::string)msg->getData())  << std::endl;
           /* ********************************** */
     }

     return 0;
 } 
```

**代码片段 4 (ZMQHandler.hxx)**

```
 #include "zmq.hpp"  
  #include "GenericMessage.hxx"
  #include <pthread.h>
  #include <unistd.h>
  #include <cassert>

  template <class T>
  class ZmqHandler {
  public:
        ZmqHandler():
    mContext(1),
    mOutbHandlerSocket(mContext, ZMQ_PUSH)
        {    
          mOutbHandlerSocket.bind ("tcp://*:5555");       
        }

       ~ZmqHandler() {}

       void *sendToBE(GenericMessage<T> *theMsg)
       {
         //  Place the new request to the zmq queue for BE consumption
         zmq::message_t msgToSend(sizeof(*theMsg));

         memcpy ( msgToSend.data(), ((GenericMessage<T>*)theMsg), sizeof(*  ((GenericMessage<T>*)theMsg)));

         mOutbHandlerSocket.send(msgToSend);

         std::cout << "SENT request: [" << theMsg->toString() << "]" << std::endl;

         return (NULL);
        }   

   private:  
        zmq::context_t mContext;
        zmq::socket_t mOutbHandlerSocket; 

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T11:49:02.633

我开始看到问题了。这是您发送完整的“结构”，其中包含一个具有指针的成员变量（`std::string`）。您不能这样做，因为指针仅在创建它们的程序中有效。

您必须在发送之前[序列化](http://en.wikipedia.org/wiki/Serialization)结构，然后在接收端反序列化。

您可以为此使用诸如[Boost 序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)之类的库，或[Google 协议缓冲区](https://developers.google.com/protocol-buffers/)，或任何其他数量的库。

# mysql - 如何将 row_count() 与事务操作一起使用？

> ID：14437539
> 
> 赞同：2
> 
> 时间：2013-01-21T11:21:11.943
> 
> 标签：mysql, stored-procedures, transactions, rowcount

我在mysql中有一个存储过程，如下所示：

```
BEGIN
START TRANSACTION;  
    INSERT INTO tbl1 (v1,v2) VALUES (p1,p2);
    UPDATE tbl2 SET s1 = 1 WHERE s2 = s3;
    SELECT ROW_COUNT();
COMMIT
END 
```

在这个查询中，即使事务没有提交，row_count 也将是 1。事实上我的问题是，如果发生回滚，我如何使用它返回 0 的 row_count？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:16:53.800

我最近遇到了类似的问题，但我设法通过选择事务块内的行数并在提交后返回它来解决它：

```
BEGIN
START TRANSACTION;  
    INSERT INTO tbl1 (v1,v2) VALUES (p1,p2);
    UPDATE tbl2 SET s1 = 1 WHERE s2 = s3;
    SET @rowCount = (SELECT ROW_COUNT());
COMMIT
SELECT @rowCount;
END 
```

我不知道这是否是解决它的最佳方法，但它似乎对我有用:-)

# navigation - 使用 Mono droid 和 slodge mvvmcross 从堆栈中删除活动

> ID：14437545
> 
> 赞同：0
> 
> 时间：2013-01-21T11:21:22.267
> 
> 标签：navigation, xamarin.android, mvvmcross

我正在尝试找到一种从堆栈中删除活动的方法-我们的应用程序中有一个流程：活动/视图模型 a -> 活动/视图模型 b -> 活动/视图模型 c。在 c 中，用户可以选择日期或返回。如果他回去，他应该回到b。但是，如果他选择了一个日期，他将被转发到活动/视图模型 b 的新实例，并且活动/视图模型 b 的“旧”实例已过时并且应该被删除。

Stuart Lodge 的一个建议（在类似的线程上，仅用于单声道触摸）是使用 RequestRemoveBackStep() 但我不知道如何使用它，我找不到一个例子。

谁能指出我正确的方向？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:29:19.113

该`RequestRemoveBackStep()`方法是`IMvxViewDispatcher`接口的成员，在某些平台上实现：

```
public interface IMvxViewDispatcher : IMvxMainThreadDispatcher
{
    bool RequestNavigate(MvxShowViewModelRequest request);
    bool RequestClose(IMvxViewModel whichViewModel);
    bool RequestRemoveBackStep();
} 
```

来自[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Interfaces/Views/IMvxViewDispatcher.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Interfaces/Views/IMvxViewDispatcher.cs)

然而，总是这样做并不完全简单......例如，在 Droid 上，它目前实现为：

```
 public bool RequestRemoveBackStep()
    {
        // not supported on Android? Not sure how to do this currently...
        return false;
    } 
```

来自[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxAndroidViewDispatcher.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxAndroidViewDispatcher.cs)

记录了有关此功能的问题 - 例如[https://github.com/slodge/MvvmCross/issues/80](https://github.com/slodge/MvvmCross/issues/80) - 但似乎此功能可能会从未来的 Mvx 实现中简单地删除 - 特别是因为它不是很容易做到每个平台上的每个视图。

* * *

如果您现在需要这种类型的功能，那么您需要找到自己的方式来实现此功能......取决于您的具体用例是什么（抱歉 - 我不清楚您当前用例的详细信息从问题）。

有几种可用的技术路线，包括：

*   使用`NoHistory`标志
*   使用`RequestClose(oldviewModel)`调用
*   将逻辑添加到您的`Presenter`
*   使用 a`Messenger`请求视图关闭自己。

# java - 释放鼠标时对 JTable 进行排序

> ID：14437547
> 
> 赞同：0
> 
> 时间：2013-01-21T11:21:29.247
> 
> 标签：java, swing, events, sorting, jtable

我有一个属性 AutoCreateRowSorter 设置为 true 的 JTable。单击时效果很好，但是如果我在单击期间将鼠标移动 1px，则不会出现排序，这在某些情况下会让人不舒服。如何解决这个问题？

UPD 我只想在鼠标释放时出现排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:22:29.227

一个肮脏的（阅读：*如果你不是绝对绝望并且确切地知道你在做什么，就不要这样做！*）方法是挂钩到由 uiDelegate 安装的 MouseListener 并将排序触发器移动到释放的方法中。这涉及

*   一个自定义的 MouseListener，它将除单击之外的所有事件委托给最初安装的事件，并在传递释放的事件之前进行排序
*   用自定义替换原来的
*   每当 LAF 更改时更新替换（因为原始由 ui 控制）。这需要 JTableHeader 的子类化并在 updateUI 中进行布线

自定义监听器：

```
public static class EventHook implements MouseListener {

    private JTableHeader header;
    private MouseListener delegate;

    public EventHook(JTableHeader header) {
        this.header = header;
        installHook();
    }

    protected void installHook() {
        MouseListener[] listeners = header.getMouseListeners();
        for (int i = 0; i < listeners.length; i++) {
            MouseListener l = listeners[i];
            if (l.getClass().getName().contains("TableHeaderUI")) {
                this.delegate = l;
                listeners[i] = this;
            }
            header.removeMouseListener(l);
        }
        for (MouseListener l : listeners) {
            header.addMouseListener(l);
        }
    }

    public void uninstallHook() {
        MouseListener[] listeners = header.getMouseListeners();
        for (int i = 0; i < listeners.length; i++) {
            MouseListener l = listeners[i];
            if (l == this) {
                listeners[i] = delegate;
            }
            header.removeMouseListener(l);
        }
        for (MouseListener l : listeners) {
            header.addMouseListener(l);
        }
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // sort before calling super
        sort(e);
        delegate.mouseReleased(e);
    }

    private void sort(MouseEvent e) {
        if (!header.isEnabled()) {
            return;
        }
        // do nothing if dragged
        if (header.getDraggedDistance() != 0) {
            return;
        }
        if (e.getClickCount() % 2 == 1 &&
                SwingUtilities.isLeftMouseButton(e)) {
            JTable table = header.getTable();
            RowSorter sorter;
            if (table != null && (sorter = table.getRowSorter()) != null) {
                int columnIndex = header.columnAtPoint(e.getPoint());
                if (columnIndex != -1) {
                    columnIndex = table.convertColumnIndexToModel(
                            columnIndex);
                    sorter.toggleSortOrder(columnIndex);
                }
            }
        }
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        // swallow the clicked - want to trigger sort on released
    }

    @Override
    public void mousePressed(MouseEvent e) {
        delegate.mousePressed(e);
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        delegate.mouseEntered(e);
    }

    @Override
    public void mouseExited(MouseEvent e) {
        delegate.mouseExited(e);
    }

} 
```

子类化的 JTableHeader

```
public static class MyTableHeader extends JTableHeader {
    private EventHook hook;
    public MyTableHeader(TableColumnModel model) {
        super(model);
    }
    @Override
    public void updateUI() {
        if (hook != null) {
            hook.uninstallHook();
            hook = null;
        }
        super.updateUI();
        hook = new EventHook(this);
    }

} 
```

用法，子类 JTable 并覆盖 createDefaultTableHeader 或手动设置标题：

```
// either subclass
JTable table = new JTable(new AncientSwingTeam()) {

    @Override
    protected JTableHeader createDefaultTableHeader() {
        return new MyTableHeader(getColumnModel());
    }

};
table.setAutoCreateRowSorter(true); 
```

# python - 在 Qt 中使用 QComboBox 快速查找项目

> ID：14437549
> 
> 赞同：0
> 
> 时间：2013-01-21T11:21:31.240
> 
> 标签：python, qt, pyqt, qcombobox

我正在使用 QComboBox 让用户选择大量的选项。目前用户可以键入一个字符，QComboBox 会选择该字符的第一行，但我觉得这还不够。用户是否已经通过输入文本直接搜索项目？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:27:19.687

您可以使用`void QComboBox::setCompleter(QCompleter *completer)`

# php - preg_replace 正则表达式 - 跳过与模式不匹配的行的输出

> ID：14437553
> 
> 赞同：1
> 
> 时间：2013-01-21T11:21:44.433
> 
> 标签：php, regex, csv

我有一个 CSV 文件，我想使用 PHP 解析（不想使用 php csv 函数，因为它们对我来说太慢了）。我使用 preg_replace 仅选择我需要的列并将输出写回标准输出。我有一个看起来像这样的模式

```
preg_replace("/^\"([^\"]*)\",\"([^\"]*)\"(.*)$/m", "$1;$2", $content); 
```

CSV 中有一些行格式错误。有没有办法跳过与上述模式不匹配的行的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:27:33.667

您可以分两步完成：

首先删除所有与您的正则表达式不匹配的行：

```
preg_replace("/^(?!\"([^\"]*)\",\"([^\"]*)\".*$).*\r?\n/m", "", $content); 
```

然后做原来的正则表达式替换。

但是，您需要*非常*小心。一旦您在 CSV 字段中出现换行符和/或转义引号，这些正则表达式可能会破坏并破坏您的文件。

或者想象一条畸形的线，比如

```
"foo","bar (missing quote!)
"baz", "bam" (correct line) 
```

正则表达式现在将删除不完整的行*和*正确的行，因为`[^\"]*`也会吃掉换行符。

# llvm - llvm 分配依赖项

> ID：14437555
> 
> 赞同：4
> 
> 时间：2013-01-21T11:21:59.573
> 
> 标签：llvm

我正在尝试从我的传递中确定某些 Load 指令，它们对应的 Alloca 指令（可以在其他先前的块中）。链可以类似于 : `TargetLoad(var) -> other stores/loads that use var (or dependencies on var) -> alloca(var).`，链接在几个基本块上。你知道我该怎么做吗？

我尝试使用 DependenceAnalysis 和 MemoryDe​​pendenceAnalysis 中的方法，但结果不正确。例如，`MemoryDependenceAnalysis::getDependency`选项“Def”应该很好，但仅适用于商店，不适用于加载。我在尝试使用`MemoryDependenceAnalysis::getNonLocalPointerDependency`or时也有段错误`MemoryDependenceAnalysis::getPointerDependencyFrom`。当我尝试使用 MemDepResult::getDef() 检查结果时，加载指令的结果是相同的指令！所以它取决于它自己，这很奇怪，因为它使用的是之前在代码中定义的变量。

在 target_load_instructions 使用的所有变量和所有分配的变量之间进行交集以识别公共部分的替代方法不是一种选择。因为可能有类似的东西：`alloca(a) ... c=a*b+4 .... load(c)`。

似乎 DependenceAnalysis::depends() 也不适合我的通行证。下一行代码仅供参考：`if(DA.depends(allocaInstrArray[i],loadInstrArray[j],true))`永远为假。在几种情况下应该是正确的。我想我没有正确使用它。

但是，我假设可能 depends() 不适用于 Alloca。所以我检查了保存在数组中的所有加载指令之间的依赖关系。某些结果并非应有的基于加载的变量。例如：`LOAD %3 = load i32* %c, align 4 IS DEPENDENT ON %1 = load i32* %j, align 4`。如您所见，一个正在加载 c，一个正在加载 j。在我的 Test.cpp 目标代码中，j 和 c 之间没有依赖关系。也许依赖关系不是基于使用的变量/内存位置？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:48:12.677

首先，使用`getOperand(0)`或使用`getOperand(1)`ICMP 指令。如果有`isa<LoadInst>`有效，则将它们转换为`LoadInst`. `getPointerOperand()`将获得 Value* ，它是被搜索的实际变量。其次，在Load指令和`Alloca`指令之间做同样的过程。`getOperand(0)`应用在 Load 上给出相应的`Alloca`指令。最后，通过检查依赖关系将两个结果链接在一起。

# java - 线程“AWT-EventQueue-0”中的 Java 异常 java.lang.NullPointerException 错误

> ID：14437560
> 
> 赞同：0
> 
> 时间：2013-01-21T11:22:10.697
> 
> 标签：java

我试图自己解决这个问题，但我不知道如何解决这个问题。

当我尝试运行 addressBookUi 类时出现此错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at addressBookUI.startComponents(addressBookUI.java:43)
at addressBookUI.<init>(addressBookUI.java:6)
at addressBookUI$2.run(addressBookUI.java:143)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

这是我的地址BookUi类

```
 import javax.swing.table.DefaultTableModel;

public class addressBookUI extends javax.swing.JFrame {

    public addressBookUI() {
        startComponents();
    }

    private void startComponents() {
        mainScrollPane = new javax.swing.JScrollPane();
        mainTable = new javax.swing.JTable();
        addButton = new javax.swing.JButton();
        saveButton = new javax.swing.JButton();
        deleteButton = new javax.swing.JButton();
        mainMenuBar = new javax.swing.JMenuBar();
        mainMenu = new javax.swing.JMenu();
        newMenuItem = new javax.swing.JMenuItem();
        openMenuItem = new javax.swing.JMenuItem();
        saveMenuItem = new javax.swing.JMenuItem();
        printMenuItem = new javax.swing.JMenuItem();
        quitMenuItem = new javax.swing.JMenuItem();
        editMenuBar = new javax.swing.JMenu();
        editPersonsMenuItem = new javax.swing.JMenuItem();
        sortNameMenuItem = new javax.swing.JMenuItem();
        sortPostcodeMenuItem = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        mainTable.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][] { { null, null, null, null },
                        { null, null, null, null }, { null, null, null, null },
                        { null, null, null, null } }, new String[] { "Title 1",
                        "Title 2", "Title 3", "Title 4" }));

        mainScrollPane.setViewportView(mainTable);

        addButton.setText("Add");

        saveButton.setText("Save Row");

        deleteButton.setText("Delete Row");

        refreshButton.setText("Refresh");
        refreshButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                refreshButtonActionPerformed(evt);
            }
        });

        mainMenu.setText("File");

        newMenuItem.setText("New");
        mainMenu.add(newMenuItem);

        openMenuItem.setText("Open");

        saveMenuItem.setText("Save");
        mainMenu.add(saveMenuItem);

        printMenuItem.setText("Print");
        mainMenu.add(printMenuItem);

        quitMenuItem.setText("Quit");
        mainMenu.add(quitMenuItem);

        mainMenuBar.add(mainMenu);

        editMenuBar.setText("Edit");

        editPersonsMenuItem.setText("Edit Selected Persons");
        editMenuBar.add(editPersonsMenuItem);

        sortNameMenuItem.setText("Sort by Name");
        editMenuBar.add(sortNameMenuItem);

        sortPostcodeMenuItem.setText("Sort by Postcode");
        editMenuBar.add(sortPostcodeMenuItem);

        mainMenuBar.add(editMenuBar);

//      mainMenuBar.add(helpMenuBar);

        setJMenuBar(mainMenuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
                getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(mainScrollPane)
                .addGroup(
                        layout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(addButton,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        155,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(saveButton,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        155,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(deleteButton,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        155,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(refreshButton,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        155,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap(51, Short.MAX_VALUE)));
        layout.setVerticalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        layout.createSequentialGroup()
                                .addComponent(mainScrollPane,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        163,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(
                                        javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(addButton)
                                                .addComponent(saveButton)
                                                .addComponent(deleteButton)
                                                .addComponent(refreshButton))
                                .addGap(0, 17, Short.MAX_VALUE)));

        pack();
    }

    private void refreshButtonActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_refreshButtonActionPerformed

    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new addressBookUI().setVisible(true);
            }
        });

    }

//  protected javax.swing.JMenuItem aboutHelpMenuBar;
    protected javax.swing.JButton addButton;
    protected javax.swing.JButton deleteButton;
    private javax.swing.JMenu editMenuBar;
    protected javax.swing.JMenuItem editPersonsMenuItem;
    private javax.swing.JMenu mainMenu;
//  private javax.swing.JMenu helpMenuBar;
    private javax.swing.JScrollPane mainScrollPane;
    private javax.swing.JMenuBar mainMenuBar;
    protected javax.swing.JTable mainTable;
    protected javax.swing.JMenuItem newMenuItem;
    protected javax.swing.JMenuItem openMenuItem;
    protected javax.swing.JMenuItem printMenuItem;
    protected javax.swing.JMenuItem quitMenuItem;
    protected javax.swing.JButton refreshButton;
    protected javax.swing.JButton saveButton;
    protected javax.swing.JMenuItem saveMenuItem;
    protected javax.swing.JMenuItem sortNameMenuItem;
    protected javax.swing.JMenuItem sortPostcodeMenuItem;
} 
```

如果有人可以提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:25:01.360

此行抛出异常：

```
refreshButton.setText("Refresh"); 
```

因为`refreshButton`没有被实例化。您可以使用：

```
refreshButton = new JButton(); 
```

请参阅：[如何阅读和理解 java 堆栈跟踪？](https://stackoverflow.com/questions/12688068/how-to-read-and-understand-the-java-stack-trace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:29:01.493

刷新按钮为空。做这个：

```
refreshButton = new javax.swing.JButton(); 
```

就在之前`refreshButton.setText("Refresh");`

# angularjs - AngularJS 插值属性 $observe

> ID：14437563
> 
> 赞同：0
> 
> 时间：2013-01-21T11:22:23.940
> 
> 标签：angularjs, directive

如何从 attrs.$observe 绑定作用域？

```
<test func="hohoho"></test>
app.directive('test', function(){
    return {
         restrict: 'E'
        , scope: { parentFunc: '@func'}
        , link: function(scope, element, attrs) {
                var func = '';

                attrs.$observe('func', function(val) {
                    func = val;
                    console.log(func);
                })
                console.log('end');
                console.log(func);
                            console.log(scope.parentFunc);

                });
        }
    };
}); 
```

当我运行时，它会打印

```
end
undefined
undefined

(an empty string)
hohoho 
```

为什么我在打印 func 和 parentFunc 时得到未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:17:08.060

我相信这些`undefined`行是在代码的其他地方而不是指令上打印的。

检查这个小提琴并查看控制台输出：http: [//jsfiddle.net/bmleite/Jx4hm/](http://jsfiddle.net/bmleite/Jx4hm/)

你应该得到这样的东西（这是预期的输出）：

> 结束
> 1
> 2 未定义
> 3 hohoho

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:41:37.327

> 我如何绑定 value func 以在观察之外为 scope.func2 设置值？

在[指令](http://docs.angularjs.org/guide/directive)页面的“属性”部分下：

> 在链接阶段，尚未评估插值，因此此时该值设置为未定义。

只有在 $observe 回调函数中，值才会包含插值。您必须将“观察之外”的代码移动到 $observe 回调函数中。

或者尝试@bmleite 的 Jx4hm/2 fiddle，其中使用“=”而不是“@”。如果您不需要插值（例如，您不需要执行类似 func="Hello {{modelInstance}}" 的操作），您可以使用 '='，它设置双向数据绑定，但值为在链接功能中可用。（'@' 设置单向数据绑定。）

# java - 录制音频不要在 Android 上归档

> ID：14437571
> 
> 赞同：8
> 
> 时间：2013-01-21T11:22:58.460
> 
> 标签：java, android

我想要 android.media.MediaRecorder。将音频录制到文件中，而不是录制到同一个变量中，例如 char[ ] 或 byte[ ] 或其他一些数据缓冲区结构。我想通过 Wi-Fi 将它发送到远程服务器，android.media.MediaRecorder 可以提供这个功能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T14:13:35.787

您可以在这里做的是利用 ParcelFileDescriptor 类。

```
//make a pipe containing a read and a write parcelfd
ParcelFileDescriptor[] fdPair = ParcelFileDescriptor.createPipe();

//get a handle to your read and write fd objects.
ParcelFileDescriptor readFD = fdPair[0];
ParcelFileDescriptor writeFD = fdPair[1];

//next set your mediaRecorder instance to output to the write side of this pipe.
mediaRecorder.setOutputFile(writeFD.getFileDescriptor());

//next create an input stream to read from the read side of the pipe.
FileInputStream reader = new FileInputStream(readFD.getFileDescriptor());

//now to fill up a buffer with data, we just do a simple read
byte[] buffer = new byte[4096];//or w/e buffer size you want

//fill up your buffer with data from the stream
reader.read(buffer);// may want to do this in a separate thread 
```

现在你有一个充满音频数据的缓冲区

或者，您可能希望将数据直接从记录器写入套接字。这也可以通过 ParcelFileDescriptor 类来实现。

```
//create a socket connection to another device
Socket socket = new Socket("123.123.123.123",65535);//or w/e socket address you are using

//wrap the socket with a parcel so you can get at its underlying File descriptor
ParcelFileDescriptor socketWrapper = ParcelFileDescriptor.fromSocket(socket);

//set your mediaRecorder instance to write to this file descriptor
mediaRecorder.setOutputFile(socketWrapper.getFileDescriptor()); 
```

现在，只要您的媒体记录器有数据要写入，它就会自动将其写入套接字

# ios - Google+ iOS SDK 获取好友列表？

> ID：14437578
> 
> 赞同：0
> 
> 时间：2013-01-21T11:23:32.263
> 
> 标签：ios, objective-c, google-plus

是否可以使用 Google+ iOS SDK 获取联系人列表？或者这可能使用 Google+ REST API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:17:14.273

**目前**这是不可能的。SDK 提供围绕 REST API 的包装器，而 REST API 当前不提供此功能。

Almas 关于使用 Contact API 的评论是一个很好的建议，但是对于大多数人来说，圈出的人员列表和联系人中的人员列表可能有很大的不同。

# java - 无法使用 http 请求获取页面

> ID：14437581
> 
> 赞同：0
> 
> 时间：2013-01-21T11:23:36.447
> 
> 标签：java, android, jsoup

这是代码，它必须加载一个页面并将其存储在`string[]`. 我不明白这个问题，因为它没有加载页面并且**没有抛出任何错误**。

如果有人知道**发送http请求的更好方法，请发布**或告诉我问题。

```
 //some code    
    btnShowLocation.setOnClickListener(new View.OnClickListener() {
                int j=0;
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    new MyTask().execute();});     
    //some code

    private class MyTask extends AsyncTask<Void, Void, Void> {
                    @Override
                    protected Void doInBackground(Void... params) {
                        // TODO Auto-generated method stub

                        try {

                            String ssr="";
                            URL n = new URL("http://maps.google.co.in/maps?hl=en&q=nagpur+to+pune");
                            URLConnection nc = null;
                            nc = n.openConnection();
                            BufferedReader in = null;
                            in = new BufferedReader(new InputStreamReader(nc.getInputStream()));
                            String inputLine;
                            while ((inputLine = in.readLine()) != null) {
                                ssr+=inputLine;
                            }

                            Document doc = Jsoup.parse(ssr);
                            Elements el = doc.getElementsByClass("dir-mrgnr");
                            String str = el.text();
                            str = str.replaceAll("[0-9]+[.] ", "\n");
                            string = str.split("\n");
                        } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                        return null;
                    }

                    @Override
                    protected void onProgressUpdate(Void... values) {
                        // TODO Auto-generated method stub
                        super.onProgressUpdate(values);
                        Toast.makeText(
                                getApplicationContext(),
                                "in Background",
                                Toast.LENGTH_LONG).show();
                        speakOut("not Working");
                        //speakOut("work in progress");
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        // TODO Auto-generated method stub

                        super.onPostExecute(result);

                    }

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T20:58:46.243

你不需要下载页面然后解析它。

```
List<String> list = new ArrayList<>(); // Better than an array

Document doc = Jsoup.connect("http://maps.google.co.in/maps?hl=en&q=nagpur+to+pune").get(); // Connect to url and parse its conntent
Elements el = doc.select("*.dir-mrgnr"); // Every tag with 'dir-mrgnr' class - or use getElementsByClass() as you did

for( Element element : el )
{
    list.add(element.text());
} 
```

顺便提一句。**不要**[`+=`在循环中](http://www.venishjoe.net/2009/11/java-string-concatenation-and.html)使用字符串；使用一个`StringBuilder`替代品！

# gigya - gigya redirectUrl 在 showLoginUI 中不起作用

> ID：14437582
> 
> 赞同：4
> 
> 时间：2013-01-21T11:23:39.107
> 
> 标签：gigya

我已经尝试并在我的 html 中使用了 gigya showLoginUI javascript 插件。该插件呈现社交图标。我正在尝试使用 gigya 的重定向功能。我在我的 javascript 中提到了 redirectURL。仍然 gigya 不会重定向到指定的 url。请找到下面的代码示例

```
gigya.socialize.showLoginUI({
            height: 85
               ,width: 100,
            showTermsLink:false // remove 'Terms' link
            ,hideGigyaLink:true // remove 'Gigya' link
            ,buttonsStyle: 'standard' // Change the default buttons design to "Full Logos" design
            ,enabledProviders: 'facebook,twitter'
            ,showWhatsThis: false // Pop-up a hint describing the Login Plugin, when the user rolls over the Gigya link.
                   ,containerID: 'loginDiv' // The component will embed itself inside the loginDiv Div 

            ,sessionExpiration:0,
            redirectURL:'https:...',
            authCodeOnly:'true',
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:27:25.930

根据 gigya 文档，如果 redirectURL 需要工作，showLoginUI js 应该有参数

```
authFlow:'redirect' 
```

包含在其中。您的 javascript 中缺少此参数。请参阅文档

[gigya 文档](http://developers.gigya.com/020_Client_API/010_Socialize/Socialize.showLoginUI)

# azure - 为 Windows Azure 网站配置 httpCompression 设置

> ID：14437583
> 
> 赞同：7
> 
> 时间：2013-01-21T11:23:46.603
> 
> 标签：azure, http-compression

无论如何控制windows azure网站中的压缩设置。

我想启用动态 json 压缩，并且可以通过相应地配置 applicationHosts.config 文件在本地站点上成功地做到这一点。

在 Windows azure 网站上是否有任何选项可以执行此操作？（不是网络角色）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T21:07:12.767

Windows Azure 网站不支持 HTTP 压缩。由于这是来自 Windows Azure 网站的一个非常常见的请求，因此 Azure 网站团队确实知道并正在处理它。如果您的应用程序必须使用 HTTP 压缩，我会说 Azure Web Role 是您的最佳选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-05T16:36:04.380

从 2014 年 1 月的 Windows Azure 版本开始，Azure 网站现在完全支持 HTTP 压缩以及其他几个未锁定的功能。

有关来自 Windows Azure 团队博客的优秀 MS 博客文章，请参阅：http: [//blogs.msdn.com/b/windowsazure/archive/2014/01/28/more-to-explore-configuration-options -unlocked-in-windows-azure-web-sites.aspx](http://blogs.msdn.com/b/windowsazure/archive/2014/01/28/more-to-explore-configuration-options-unlocked-in-windows-azure-web-sites.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T15:53:10.757

IIS 中的 HTTP 压缩通过 ApplicationHost.config 启用。我们将在 10 月发布的版本中启用对 WAWS 中此部分的访问（具体日期待定）。在 10 月版本中，这将通过用户必须上传的特殊文件启用（我们将在发布时提供文档）。稍后（12 月或 1 月发布）我们将在应用程序 web.config 中启用此部分。配置参考：[http ://www.iis.net/configreference/system.webserver/httpcompression](http://www.iis.net/configreference/system.webserver/httpcompression)

# php - 在对象中创建动态属性

> ID：14437584
> 
> 赞同：0
> 
> 时间：2013-01-21T11:23:46.587
> 
> 标签：php, models, controllers

我使用了 cakePHP，它有一个很好的特性，其中模型（如果存在的话，已经在你的控制器中创建为一个属性，所以实际上我可以在我的控制器中访问一个名为 $this->model_name 的属性，而无需创建模型对象。

据我了解，所有属性都必须在一个类中定义才能使用它，那么我还有其他方法可以完成上述操作吗？

```
 // Sample code:
  <?php
  class controller {
        public function create_model($model_name) {
              // Assuming that I have spl_autoload enabled to achieve the below:
              $this->$$model_name = new model_name();      
        }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:29:36.863

你可以用魔法方法来做这样的事情（查看[_ *set()*](http://php.net/manual/en/language.oop5.overloading.php#object.set)*和*[_get()](http://php.net/manual/en/language.oop5.overloading.php#object.get) )

这是一些示例代码：

```
class Controller
{
    protected $models;

    public function __get($key)
    {
        return $this->models[$key];
    }

    public function __set($key, $value)
    {
        $this->models[$key] = $value;
    }
} 
```

`__set()`您可以在和中实现自己的功能`__get()`。您可以使用 设置数据`$this->my_model = $something;`。

这是更适合您的特定示例的内容：

```
public function __get($key) // you will only need __get() now
    {

        if (array_key_exists($key, $this->models) && $this->models[$key] instanceof $key) { 
            return $this->models[$key];
        } else {
            $this->models[$key] = new $key;
            return $this->models[$key];
        }

    } 
```

所以现在， $this->my_model 尝试实例化 my_model 如果它不存在，如果它存在则返回当前对象。也许不是最好的解决方案，但在此处添加了它，以便您了解它的工作原理。

# android - 安卓中的 Facebook SDK

> ID：14437585
> 
> 赞同：1
> 
> 时间：2013-01-21T11:23:46.110
> 
> 标签：android, facebook, android-intent, android-emulator, android-facebook

我正在使用 Facebook SDK for android 作为外部库。我可以通过 facebook 登录。但是当我想共享图像并且应用程序没有通过 facebook 登录时，我正在尝试登录，但在这种情况下我会遇到异常和获取访问令牌为空。请帮助

W/com.facebook.Session(15670)：不应将读取权限（电子邮件）传递给发布或管理授权请求 W/com.facebook.Session（15670）：不应将读取权限（read_friendlists）传递给请求发布或管理授权

请找到代码：

```
String[] permissions = { "email",
            "user_birthday",
            "publish_stream",
            "user_checkins",
            "friends_checkins",
            "read_friendlists",
            "publish_checkins",
            "publish_actions" };
     final static int AUTHORIZE_ACTIVITY_RESULT_CODE = 0;
facebook = new Facebook(APP_ID);
                                    mAsyncRunner = new AsyncFacebookRunner(facebook);
                                    facebook.authorize(getActivity(), permissions, AUTHORIZE_ACTIVITY_RESULT_CODE,
                                            new DialogListener() {

                                                public void onComplete(Bundle values) {
                                                    System.err.println("Inside oncomplete");
                                                    //getProfileInformation();

                                                }

                                                public void onFacebookError(FacebookError error) {
                                                    System.err.println(error.toString()+ "Facebook.authorize Error: ");

                                                    try {
                                                        dialog.dismiss();
                                                    } catch (Exception e) {
                                                        // TODO: handle exception
                                                    }
                                                    dialog=null;
                                                }

                                                public void onError(DialogError e) {
                                                    System.err.println(e.toString()+ "Facebook.authorize DialogError: ");
                                                    Log.d(this.getClass().getName(),
                                                            "Facebook.authorize DialogError: "
                                                                    + e.toString());
                                                    try {
                                                        dialog.dismiss();
                                                    } catch (Exception e1) {
                                                        // TODO: handle exception
                                                    }
                                                    dialog=null;
                                                }

                                                public void onCancel() {
                                                    System.err.println("Facebook authorization canceled");
                                                    Log.d(this.getClass().getName(),
                                                            "Facebook authorization canceled");
                                                    try {
                                                        dialog.dismiss();
                                                    } catch (Exception e) {
                                                        // TODO: handle exception
                                                    }
                                                    dialog=null;
                                                }
                                            });

                                }

                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:32:01.137

首先下载[此](https://github.com/facebook/facebook-android-sdk)Facebbok SDK 并将其作为库项目包含在您的项目中。

在您的活动中，您想在哪里分享图片 ::

```
private static Bitmap b;
private static Facebook mFacebook;
private static AsyncFacebookRunner mAsyncRunner;
String[] permissions = {"photo_upload" };
final static int AUTHORIZE_ACTIVITY_RESULT_CODE = 0; 
```

在**onCreate()**中初始化这个变量::

```
if (Constant.FACEBOOK_APP_ID == null)
 {
        Util.showAlert(this, "Warning", "Facebook Applicaton ID must be "
                        + "specified before running this example: see FbAPIs.java");
        return;
 }

mHandler=new Handler();
mFacebook = new Facebook(Constant.FACEBOOK_APP_ID);
mAsyncRunner = new AsyncFacebookRunner(mFacebook);
SessionStore.restore(mFacebook, this);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch (requestCode) 
    {
        case AUTHORIZE_ACTIVITY_RESULT_CODE: 
        {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
        break;
        }
    }
} 
```

onButtonClick 从您要分享图片的地方::

```
if (!mFacebook.isSessionValid()) 
{
    mFacebook.authorize(TabNoteActivity.this, permissions, AUTHORIZE_ACTIVITY_RESULT_CODE, new LoginDialogListener());
}
else
{
     Bundle params = new Bundle();
     ByteArrayOutputStream stream = new ByteArrayOutputStream();
     Utils.b.compress(Bitmap.CompressFormat.PNG, 100, stream);//Here I am convert the JPG image into bitmap using declaring method in the Utils class 
     byte[] byteArray = stream.toByteArray();
     params.putString (Facebook.TOKEN, mFacebook.getAccessToken());
     params.putString ("message"," Facebook App Testing");
     params.putByteArray("picture",byteArray);
     mAsyncRunner.request("me/photos", params,"POST", new PhotoUploadListener(),null);
}

    public class PhotoUploadListener extends BaseRequestListener
    {
        //@Override
        public void onComplete(final String response, final Object state) 
        {

           mHandler.post(new Runnable() 
           {
            // @Override
            public void run() 
            {
                Toast.makeText(Activity.this,"Image has been shared Successfully",Toast.LENGTH_LONG).show();
            }
          });
        }

        public void onFacebookError(FacebookError error) 
        {
            Toast.makeText(getApplicationContext(), "Facebook Error: " + error.getMessage(),Toast.LENGTH_LONG).show();
        }
} 
```

# php - 安装作曲家时遇到问题

> ID：14437588
> 
> 赞同：30
> 
> 时间：2013-01-21T11:23:58.077
> 
> 标签：php, composer-php

我正在使用以下 cammand 安装作曲家

```
curl -s https://getcomposer.org/installer | php 
```

但我不断收到**错误消息**

```
Zafars-MacBook-Pro:etc zafarsaleem$ curl -s https://getcomposer.org/installer | php
#!/usr/bin/env php
Some settings on your machine make Composer unable to work properly.
Make sure that you fix the issues listed below and run this script again:

The detect_unicode setting must be disabled.
Add the following to the end of your `php.ini`:
detect_unicode = Off

A php.ini file does not exist. You will have to create one. 
```

如何安装作曲家以消除上述错误？

**编辑**

```
Zafars-MacBook-Pro:etc zafarsaleem$ php --ini
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         (none)
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none) 
```

**最新编辑**

经过一番研究，我发现`php.ini`正在使用的文件位于`/etc/php.ini`. 但是，当我在`/etc`文件夹中检查此文件时，它不存在。`/etc`文件夹包含`php.ini.default`链接到的文件夹`/private/etc/php.ini.default`。所以我添加`detect_unicode = Off`了`/etc/php.ini.default`这个文件并将其重命名为`php.ini`. 现在当我执行以下命令时

```
curl -s https://getcomposer.org/installer | php 
```

或者

```
sudo curl -s https://getcomposer.org/installer | php 
```

然后我得到以下错误

```
Zafars-MacBook-Pro:/ zafarsaleem$ sudo curl -s https://getcomposer.org/installer | php
#!/usr/bin/env php
All settings correct for using Composer
Downloading...
Download failed: failed to open stream: Permission denied
Downloading...
Download failed: failed to open stream: Permission denied
Downloading...
Download failed: failed to open stream: Permission denied
The download failed repeatedly, aborting. 
```

如何在我的计算机上安装 composer 并消除上述问题？请帮忙

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-23T16:41:26.843

要在 MacOSX 上下载/安装，您可以执行[以下步骤](https://getcomposer.org/doc/00-intro.md#globally) *或*尝试以下[自制](https://getcomposer.org/doc/00-intro.md#globally-on-osx-via-homebrew-)步骤：

1.  转到您可以写入的目录：

    光盘~

2.  获取作曲家：

    curl -sS [https://getcomposer.org/installer](https://getcomposer.org/installer) | php

3.  将作曲家移动到 $PATH var 中的 bin 目录中：

    sudo mv composer.phar /usr/local/bin/composer

4.  仔细检查作曲家作品

    作曲家关于

5.  （可选）更新作曲家：

    sudo 作曲家自我更新

**[家酿](https://getcomposer.org/doc/00-intro.md#globally-on-osx-via-homebrew-)**

```
brew update
brew tap homebrew/homebrew-php
brew tap homebrew/dupes
brew tap homebrew/versions
brew install php55-intl
brew install homebrew/php/composer 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-05-03T23:07:43.363

试试这个并动态更改设置，仅针对此命令

```
curl -sS https://getcomposer.org/installer | php -d detect_unicode=Off 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-24T03:35:37.650

在 Ubuntu 生动 15.04 中。尝试： 步骤：

1.  打开终端并写入： ***sudo su***并按 Enter。
2.  粘贴这个：***curl -sS [https://getcomposer.org/installer](https://getcomposer.org/installer) | php***然后按 Enter。（此安装作曲家，等待完成）
3.  最后写**出口**

注意：对不起，我的英语不好:(

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-21T12:49:17.677

我有同样的错误。我最终将 sudo 添加到 php 端，它对我有用。

```
curl -sS https://getcomposer.org/installer | sudo php 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-17T07:02:32.123

如果您的系统中没有 curl，您仍然可以使用以下命令安装 composer

转到可以写入的目录，

```
cd yourDirectory

php -r "readfile('https://getcomposer.org/installer');" | php -d detect_unicode=off 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T16:57:47.827

须藤卷曲-sS [https://getcomposer.org/installer](https://getcomposer.org/installer) | sudo php -- --install-dir=/usr/local/bin

运行此命令，它将起作用，所以我认为：D

# java - 如何修复图像裁剪的放大尺寸？

> ID：14437594
> 
> 赞同：1
> 
> 时间：2013-01-21T11:24:19.270
> 
> 标签：java, android, android-intent

我想修复图像裁剪的放大尺寸。如何做到这一点？我找到了很多并尝试了很多，但仍然无法获得正确的解决方案。裁剪的图像放大太多并且变得模糊。请有人帮助我我的这个问题。我的代码是。

```
intent.putExtra("crop", "true");
        intent.putExtra("outputX", 300);
        intent.putExtra("outputY", 300);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("scale", false);
        intent.putExtra("return-data", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:39:35.017

像这样试试

```
intent.putExtra("outputX", 200); //Set this to define the max size of the output bitmap
intent.putExtra("outputY", 200); //Set this to define the max size of the output bitmap
intent.putExtra("aspectX", 1); //Set this to define the X aspect ratio of the shape
intent.putExtra("aspectY", 1); //Set this to define the Y aspect ratio of the shape 
```

检查这个[链接](http://walletapp.net/en/cookbook/crop-image)

# c# - 创建动态图表工具提示

> ID：14437597
> 
> 赞同：2
> 
> 时间：2013-01-21T11:24:32.100
> 
> 标签：c#, visual-studio-2010, microsoft-chart-controls

我正在使用 Visual Studio 2010 和 WFC 创建数据点图。为了创建我的图表，我有一个包含 3 个不同列的数据表；这些是日期、值和序列。该表是根据 SQL 查询动态生成的，然后我在 x 轴上绘制日期，在 y 轴上绘制值。我想要实现的是，当鼠标悬停在图表上的某个点上时，工具提示会显示日期、值和与这些值相关的唯一序列号。目前我正在使用

```
myChart.Series["mySeries"].ToolTip = "XValue = #VALY \r\nDate = #VALX{d}"; 
```

但是很明显，这并没有根据这些值显示序列号。我尝试使用 ToolTip 事件，但是在尝试将像素数据点转换为图形上的精确绘图时遇到了一些问题。我希望这个问题是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:25:04.323

感谢@vikas，我解决了这个问题。我没有尝试分配通用工具提示，而是为每个点分配了单独的工具提示。

```
 int points = 0;

        //For every row in the values table, plot the date against the variable value
        foreach (DataRow row in Values.Rows)
        {
            myChart.Series[Variable].Points.AddXY(Convert.ToDateTime(row["Date"].ToString()), row["Variable"].ToString());               
            myChart.Series[Variable].Points[points].ToolTip = Variable + " = #VALY \r\nDate = #VALX{d} \r\nSerial = " + row["Serial"].ToString();
            points += 1;
        } 
```

因此，计数器从 0 开始，然后对于数据表中的每一行，将值 1 添加到点数，并为每个点单独分配一个唯一工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:32:32.827

只为创意

```
For i As Integer = 0 To dt.Rows.Count - 1
                    StrSeries = Convert.ToString(dt.Rows(i)("Engage_Title"))
                    ChartRecentActivities.Series.Add(StrSeries)
                    ChartRecentActivities.Series(StrSeries).ChartType = SeriesChartType.Line
                    ChartRecentActivities.Series(StrSeries).MarkerStyle = MarkerStyle.Circle
                    ChartRecentActivities.Series(StrSeries).MarkerSize = 7
                    ChartRecentActivities.Series(StrSeries).BorderWidth = 3
                    ChartRecentActivities.Series(StrSeries).ShadowOffset = 2
                    ChartRecentActivities.Series(StrSeries).Legend = "Default"
                    ChartRecentActivities.Series(StrSeries).LegendText = StrSeries
                    ChartRecentActivities.Series(StrSeries).LegendToolTip = StrSeries
                    ChartRecentActivities.Series(StrSeries).ToolTip = StrSeries

                    For j As Integer = 0 To ChartRecentActivities.ChartAreas(0).Axes(0).CustomLabels.Count - 1
                        dv.RowFilter = "Engage_Title = '" & StrSeries & "' AND Transaction_Date = '" & ChartRecentActivities.ChartAreas(0).Axes(0).CustomLabels(j).Text & "'"
                        If (dv.Count > 0) Then
                            dblPoint = Convert.ToDouble(dv.Item(0)(0))
                        Else
                            dblPoint = 0
                        End If
                        ChartRecentActivities.Series(StrSeries).Points.Add(dblPoint)
                        ChartRecentActivities.Series(StrSeries).Points(j).ToolTip = StrSeries & " = " & dblPoint.ToString()
                    Next
                Next 
```

看最后一行

```
ChartRecentActivities.Series(StrSeries).Points(j).ToolTip = StrSeries & " = " & dblPoint.ToString() 
```

# memory - Continus Process 虚拟内存增加

> ID：14437599
> 
> 赞同：0
> 
> 时间：2013-01-21T11:24:45.087
> 
> 标签：memory, process, virtual

我的应用程序将尝试将文件数据从一个文件复制到另一个文件，因此我启动 1000 个任务，该任务将执行此操作，然后进程虚拟内存将增加。我的问题是在完成 1000 个任务之后，我仍然尝试运行一个任务，那么为什么虚拟内存会增加？

我使用 top 命令检查进程内存使用情况，甚至我也使用 libumem 检查了任何内存泄漏。

请帮助我理解为什么虚拟内存会增加。

添加更多数据。当我多次执行相同的操作时，每次虚拟内存都没有增加，但有时内存会增加。我无法理解增加的原因。即使我也检查了内存泄漏，但没有内存泄漏。并且该操作包括 corba 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:31:25.590

每个“任务”，不管是什么，当然都需要资源来运行。这些资源包括内存，用于系统结构和您使用的数据。

# java - 是否需要 catch 块中的 null ？

> ID：14437601
> 
> 赞同：2
> 
> 时间：2013-01-21T11:24:51.360
> 
> 标签：java

```
A a = null;
try {
  a = setA(); // set A throws exception
} catch (AException e) {
  a = null;
} 
```

在上面的代码中，如果发生异常，我是否需要`a = null`在 catch 块中使用以确保为 null？`a`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:25:51.960

因为无论如何在赋值之前抛出异常，我假设 a 在这里总是为空......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:28:36.260

如果返回值的方法（在这种情况下是 class 的对象`A`）抛出异常，则它永远不会返回值。

由于`a`在这种情况下分配值的行是所说的方法，因此 a 永远不会获得值，因此`null`保留为变量的值。

# windows-7 - 在 Visual c++ 6 上编译的 com 对象不会在 Windows 7 上注册

> ID：14437605
> 
> 赞同：1
> 
> 时间：2013-01-21T11:24:56.477
> 
> 标签：windows-7, com, registration

我有一个 com 对象项目，它在 Windows XP 上注册没有问题。出于某种原因，当我尝试在 Windows 7 上注册它时，它卡住了，我的应用程序无法实例化 com 对象。

对我来说真正奇怪的是依赖walker会导致丢失的文件“x.dll”，而这样的文件甚至不存在。但是，com 项目有一个用于编译程序的“x.lib”文件。

我相信依赖项的定义存在某种问题，并且无法真正弄清楚它是什么。

# css - 悬停效果菜单响应内联

> ID：14437611
> 
> 赞同：1
> 
> 时间：2013-01-21T11:25:09.650
> 
> 标签：css, menu, responsive-design

我正在开发一个带有水平菜单和悬停 CSS 效果的响应式网站。当鼠标悬停菜单选项时，我添加了 padding-left 并放置了背景图片，麻烦是这样的：http: [//jsfiddle.net/khneM/1/](http://jsfiddle.net/khneM/1/)

我的菜单：

```
<nav class="menu-principal-container">
    <ul>
        <li ><a title="LA FIRMA" href="#"> LA FIRMA </a>
        </li>
        <li ><a title="DESPACHO" href="#">DESPACHO</a>
        </li>
        <li ><a title="SERVICIOS" href="#">SERVICIOS</a>
        </li>
        <li ><a title="GALERÍA" href="#">GALERÍA</a>
        </li>
        <li ><a title="VARIOS" href="#">VARIOS</a>
        </li>
        <li ><a title="CONTACTO" href="#">CONTACTO</a>
        </li>
        <li ><a title="LOGIN" href="#">LOGIN</a>
        </li>
    </ul>
</nav> 
```

我的 CSS：

```
.menu-principal-container {
    float: left;
    width: 514px;
    margin: 1%;
}
nav ul {
    list-style: none;
    list-style-image: none;
}
li {
    list-style: none;
    display: inline-block;
    margin: 0 15px;
    border-bottom-width: 4px;
    border-bottom-style: solid;
    border-color: white;
    -webkit-transition: all 0.2s ease-out;
    -moz-transition: all 0.2s ease-out;
    -o-transition: all 0.2s ease-out;
    -ms-transition: all 0.2s ease-out;
    transition: all 0.2s ease-out;
    margin: 0;
}
a {
    text-decoration: none;
    color: #979797;
}
li:hover {
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: solid;
    border-left-style: none;
    border-bottom-width: 4px;
    padding-left: 23px;
    border-color: #FFCE3B;
    text-align: right;
    background: url('http://abogados.drapps.info/wp-content/themes/araluce/img/services.png') no-repeat left top;
} 
```

在小宽度下，鼠标悬停在最后一个选项上，它会下降，无法单击它

有人对这样做有任何想法吗？

任何想法将不胜感激！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:10:15.647

据我所知，这很难做到。你必须为 li 选项菜单设置一个固定宽度，这样做并忘记 css 动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:28:56.607

只需使用此规则应用填充

```
li:hover a {
  padding-left: 23px;   
} 
```

并将其从`li:hover`. （可能您甚至可能需要为您的链接定义 padding-left 的动画）

示例：http: [//jsfiddle.net/32MFQ/1/](http://jsfiddle.net/32MFQ/1/)

# xml - 具有至少一种元素/类型的 XML 混合内容模型

> ID：14437619
> 
> 赞同：0
> 
> 时间：2013-01-21T11:25:46.633
> 
> 标签：xml, dtd

我正在尝试完成以下元素声明： XML 元素可能包含一个文本或/和一个元素，但它必须至少包含其中一个。

如果我做：

```
<!ELEMENT myelem (#PCDATA|myanotherelem)*> 
```

这意味着骨髓可能仍然是空的。我想过使用

```
(#PCDATA|myanotherelem)+ 
```

但混合内容模型应该是从零开始的。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:17:42.503

`(#PCDATA)`XML DTD中内容模型的唯一合法形式是`(#PCDATA | a | b | ... | z)*`对于某些数字元素（零或多个）a、b、...z。

请注意，表单的元素`<myelem></myelem>`实际上被 XML 规范视为具有 #PCDATA 内容——您想要指定非零长度的 #PCDATA 内容并非不合理，但这实际上不是关键字`#PCDATA`方法。您要强加的约束（#PCDATA 内容的最小长度 - 可能您也可能希望它不只包含空白字符）不能用 DTD 表示法表示。这是其他模式语言（例如 XSD 和 Relax NG）通过数据类型添加的内容之一。

# php - php sql将主键和外键链接在一起（链表）

> ID：14437623
> 
> 赞同：5
> 
> 时间：2013-01-21T11:26:00.673
> 
> 标签：php, mysql, sql, linked-list

所以这是我想做的事情。我在 sql 中有两个表，我想回显所有消息和消息发送者的用户名。

这是表格的设置方式。

```
table name: user   
user_id user_name
   1       abc
   2       bob  
   3       pqr

table2 name : message
intro_id       user_id        msg
    1              4          abc
    2              4          jkl 
    3              2          cbd 
```

期望的输出是这样的

新美国广播公司

新jkl

鲍勃 cbd

到目前为止，我的代码只输出消息

```
$result = mysql_query("SELECT * FROM message");

while($row = mysql_fetch_array($result))
  {
  echo  $row['msg']  ;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:29:23.397

尝试此查询以获取 user_name

```
mysql_query("SELECT user.user_name, message.msg FROM message INNER JOIN user ON message.user_id = user.user_id");
while($row = mysql_fetch_array($result))
{
   echo  $row['user_name'] . ": " . $row['msg']  ;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T11:31:43.073

```
$result = mysql_query("SELECT user.user_name,message.msg FROM user,message WHERE user.user_id=message.user_id");

while($row = mysql_fetch_array($result))
  {
  echo  $row['user_name']." ".$row['msg'];
  } 
```

这应该有效。

如果没有请评论

# android - 为什么使用 Android NDK 通过 JNI 将本机数组复制回 Java 无法正确填充？

> ID：14437624
> 
> 赞同：1
> 
> 时间：2013-01-21T11:26:25.510
> 
> 标签：android, arrays, android-ndk, java-native-interface, integer

以下是全局初始化器：

```
int width = 100;
int height = 100;
int cells = width * height;
int* pixels = (int*) malloc(sizeof(int) * cells);

int i;

for (i = 0; i < cells; i++) {

  pixels[i] = 255;

} 
```

以下是通过 JNI 调用将数组复制回 Java 的代码：

```
void Java_com_example_app_setPixels(
        JNIEnv *env, jobject obj, jintArray arr) {

    // initializations, declarations, etc
    jint *c_array;
    jint i = 0;

    // get a pointer to the array
    c_array = (*env)->GetIntArrayElements(env, arr, NULL);

    // do some exception checking
    if (c_array == NULL) {
        return; /* exception occurred */
    }

    for (i = 0; i < cells; i++) {

        c_array[i] = (jint) pixels[i];

    }

    // release the memory so java can have it again
    (*env)->ReleaseIntArrayElements(env, arr, c_array, 0);

} 
```

这导致了一个大部分被填充的 Java 数组 - 但是它在大约 80% 的过程中停止了。

但是，如果我改变：

```
 c_array[i] = (jint) pixels[i]; 
```

至

```
 c_array[i] = 255; 
```

修改后的 Java 数组被填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:45:04.707

一如既往，这是我自己的错。分配的数组（像素）和它复制到的数组大小不同。

固定数组大小后，一切正常。

# php - 如何检查当前用户 id 是否不等于数据库条目？

> ID：14437628
> 
> 赞同：0
> 
> 时间：2013-01-21T11:26:52.993
> 
> 标签：php, mysql, sql

我有一个从数据库中提取行的朋友页面，我只想显示当前用户的朋友，但它只从查询中返回当前用户。

数据库表：

![在此处输入图像描述](../Images/d604940f744675ccf9a78ec50de283e3.png)

当前代码：

```
function getFriends($user_id, $sqli_con) {
    $user_id = mysqli_escape_string($sqli_con, strip_tags($user_id));

    $results = $sqli_con->query("SELECT * FROM friends WHERE receiver_id = '$user_id' AND accepted = '1' OR sender_id = '$user_id' AND accepted = '1'");

    if($results->num_rows > 0) {

        while($row = $results->fetch_array(MYSQLI_ASSOC)) {
            if($row['receiver_id'] === $user_id || $row['sender_id'] === $user_id) {

            } else {
                $username_stmt = $sqli_con->prepare("SELECT id, username FROM members WHERE id = {$row['receiver_id']} OR id = {$row['sender_id']}");
                $username_stmt->execute();
                $username_stmt->store_result();
                $username_stmt->bind_result($id, $username);
                $username_stmt->fetch();
                $username_stmt->close();
                $results->free();

                return "

                    <div id='friend'>
                        <a href='profile.php?id=".$id."'><img src='". getProfileImagePath($id, $sqli_con) . "' /></a>
                        <a href='profile.php?id=".$id."'>". $username . "</a>
                    </div>

                ";
            }

        }

    } else {
        $results->free();
        return "You don't have any friends yet! :( Why not search for some?";
    }
} 
```

目前没有返回任何结果，但如果我取出用户 ID 检查它只返回当前用户。

编辑：我得到它的工作，解决方案：

```
function getFriends($user_id, $sqli_con) {
    $user_id = mysqli_escape_string($sqli_con, strip_tags($user_id));

    $results = $sqli_con->query("SELECT * FROM friends WHERE (receiver_id = '$user_id' OR sender_id = '$user_id') AND accepted = '1'");

    if($results->num_rows > 0) {

        while($row = $results->fetch_array(MYSQLI_ASSOC)) {
            if($row['sender_id'] !== $user_id) {
                $username_stmt = $sqli_con->prepare("SELECT username FROM members WHERE id = {$row['sender_id']}");
                $username_stmt->execute();
                $username_stmt->store_result();
                $username_stmt->bind_result($username);
                $username_stmt->fetch();
                $username_stmt->close();

                echo "

                    <div id='friend'>
                        <a href='profile.php?id=".$row['sender_id']."'><img src='". getProfileImagePath($row['sender_id'], $sqli_con) . "' /></a>
                        <a href='profile.php?id=".$row['sender_id']."'>". $username . "</a>
                    </div>

                ";
            }
            if($row['receiver_id'] !== $user_id) {
                $username_stmt = $sqli_con->prepare("SELECT username FROM members WHERE id = {$row['receiver_id']}");
                $username_stmt->execute();
                $username_stmt->store_result();
                $username_stmt->bind_result($username);
                $username_stmt->fetch();
                $username_stmt->close();

                echo "

                    <div id='friend'>
                        <a href='profile.php?id=".$row['receiver_id']."'><img src='". getProfileImagePath($row['receiver_id'], $sqli_con) . "' /></a>
                        <a href='profile.php?id=".$row['receiver_id']."'>". $username . "</a>
                    </div>

                ";
            }
        }

    } else {
        $results->free();
        return "You don't have any friends yet! :( Why not search for some?";
    }
} 
```

不漂亮，但它会做。感谢您的帮助。（经过多个条目测试并且有效）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:32:54.340

您从循环中返回。尝试类似：

```
$result_string = '';
// the loop definition here
$result_string .= "<div id='friend'>
                        <a href='profile.php?id=".$id."'><img src='". getProfileImagePath($id, $sqli_con) . "' /></a>
                        <a href='profile.php?id=".$id."'>". $username . "</a>
                   </div>";
// closing the loop
return $result_string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:41:13.027

不会`$user_id`总是出现在生成的记录集中吗？

而不是忽略记录，`$user_id`您需要从结果集中处理它们。提取记录中的其他ID，其他列给你一个朋友ID！

此外，实施 Lim 对记录集中多条记录的建议。

# hardware - 硬件仿真

> ID：14437630
> 
> 赞同：2
> 
> 时间：2013-01-21T11:27:02.497
> 
> 标签：hardware, driver, robot, device-emulation

我需要为一个非常专业且相当复杂的工业机器人编写控制软件。在测试最终软件之前，我不允许访问实际的机器人，因为它必须一直工作。有必要以某种方式模拟机器人，这样我就可以开发我的代码。我有机器人的驱动程序和一些手册，但由于它是一个复杂的东西，我不想从头开始构建模拟器。

我正在寻找的是一种软件，我只需在其中加载设备驱动程序并基于它们，可以模拟硬件及其所有功能。

那里是否存在类似的东西，还是我走错了路？

PS。不，我没有很好的编程技能，但我已经准备好学习了:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:58:07.230

通常机器人制造商提供模拟/仿真软件。例如。

*   Nachi 机器人在桌子上有 AX/FD，
*   Adept 机器人有 Adept Ace( [http://www.adept.com/products/software/pc/adept-ace/general](http://www.adept.com/products/software/pc/adept-ace/general) )
*   库卡有KUKA SIM
*   .... 等等

在这些程序中，您可以创建机器人程序、模拟机器人运动以及与所有输入和输出接口。您还可以导入已经在机器人上运行的程序并离线更改/调试它们

我相信创建整个机器人的模拟/仿真将是一项巨大的工作，特别是如果您没有很多编程经验。

# apache - TSocket：无法连接到服务器（连接超时 [110]）

> ID：14437634
> 
> 赞同：1
> 
> 时间：2013-01-21T11:27:21.520
> 
> 标签：apache, hadoop, hbase, hive, thrift

按照这篇文章

[http://nousefor.net/55/2011/12/php/hbase-and-hive-thrift-php-client/](http://nousefor.net/55/2011/12/php/hbase-and-hive-thrift-php-client/)

我下载了 HBase 和 Thrift php 客户端包并将它们放在我的 ubuntu 机器上的 var/www/thrift/ 目录中，并编写了这个简单的客户端代码来打开连接并显示数据库中的表。但服务器不断返回错误消息“连接超时 [110]”。有任何想法吗..？？当在服务器（Amazon EC2）上运行时，代码也可以正常执行`$transport = new TSocket('localhost', 10001);`

```
<?php

require_once('thrift/src/Thrift.php' );
require_once('thrift/src/transport/TSocket.php' );
require_once('thrift/src/transport/TBufferedTransport.php' );
require_once('thrift/src/protocol/TBinaryProtocol.php' );
require_once ('thrift/ThriftHive.php');

//open connection
$transport = new TSocket('107.xx.xx.101', 10001);
$protocol = new TBinaryProtocol($transport);
$client = new ThriftHiveClient($protocol);

try{
    $transport->open();
}
catch(Exception $ex)
{
    echo $ex->getMessage();
}

//show tables
$client->execute('SHOW TABLES');
$tables = $client->fetchAll();
foreach ($tables as $name){
echo( " found: {$name}\n" );
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-20T11:13:16.507

我认为您没有指向正确的主机，因为您安装了 Hive 主机。请检查您的`Hive Metastore host`ip地址在哪里。

可能对你有帮助，谢谢。

# c# - 在 ASP:Repeater 中使用 SqlDataSource FilterExpression 连接 2 个 dropDownLists

> ID：14437635
> 
> 赞同：0
> 
> 时间：2013-01-21T11:27:24.060
> 
> 标签：c#, asp.net, drop-down-menu, repeater, sqldatasource

在中继器行中使用 2 个 dropDownLists 如何使用第一个作为第二个的过滤器？

中继器布局很简单：`[category_dropDown][item_dropDown][add_button]`

问题是我无法连接两个下拉控件。SqlDataSource ControlParameter 找不到要调用的 ControlID（由中继器重命名的控件）。将 ControlID 值更改为“itemRepeater$dropDownCategory”显然没有帮助。如何绑定这些下拉菜单以成对工作？

主要想知道是否有标记代码解决方案，因为代码隐藏解决方案将更容易实现。

```
<asp:Repeater ID="itemRepeater" runat="server" OnItemCommand="itemRepeater_ItemCommand" onitemdatabound="itemRepeater_ItemDataBound">
    <HeaderTemplate>
        <table>
        <tr>
            <td>Category</td>
            <td>Item</td>
            <td></td>
        </tr>
    </HeaderTemplate>
    <ItemTemplate>        
        <tr>
            <td><asp:DropDownList ID="dropDownCategory" runat="server" DataSourceID="SqlDataSourceCategory" DataTextField="Category" 
                DataValueField="ID_cat" SelectedValue='<%# DataBinder.Eval(Container.DataItem,"Category") %>' AppendDataBoundItems="true">                    
                <asp:ListItem Value="%" Text="Pick category" Selected="True" />
                </asp:DropDownList></td>
            <td><asp:DropDownList ID="dropDownItem" runat="server" DataSourceID="SqlDataSourceItem" DataTextField="Item" 
                DataValueField="ID_item" SelectedValue='<%# DataBinder.Eval(Container.DataItem,"Item") %>' AppendDataBoundItems="true">
                <asp:ListItem Value="%" Text="Pick item" Selected="True"  />
                </asp:DropDownList></td>   
            <td><asp:Button ID="repeatedButton" runat="server" CommandName='<%# DataBinder.Eval(Container.DataItem, "Button") %>' Text='<%# DataBinder.Eval(Container.DataItem, "Button") %>' /></td>             
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater>

<asp:SqlDataSource ID="SqlDataSourceCategory" runat="server" ConnectionString="..." 
    SelectCommand="SELECT [Category], [ID_cat] FROM [Categories]">
</asp:SqlDataSource>

<asp:SqlDataSource ID="SqlDataSourceItems" runat="server" ConnectionString="..." 
    SelectCommand="SELECT [ID_item],[Item] FROM [Items]"  FilterExpression="WHERE [ID_cat] = @ID_cat" >
    <FilterParameters>
        <asp:ControlParameter Name="ID_cat" ControlID="dropDownCategory" PropertyName="SelectedValue" />
    </FilterParameters>
</asp:SqlDataSource> 
```

上面的 ControlID 绑定显然是错误的，因为 SqlDataSourceItems 在 ItemTemplate 中找不到名为“dropDownCategory”的 ControlID 并抛出已知异常：**Could not find control 'dropDownCategory' in ControlParameter 'ID_cat'**

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:35:22.017

嗨，下面的链接会给你诀窍：

[解决方案 1](http://forums.asp.net/t/1837973.aspx/1)

[解决方案 2](http://myaspsnippets.blogspot.ca/2012/10/bind-dropdownlist-based-on-another.html)

例如：像这样的东西：

```
 DropDownList ddlcity = (DropDownList)grow.FindControl("ddlcity"); // To get the value of dropdown

        cmd.Parameters.Add("@city", ddlcity.SelectedItem.ToString());  // This will add selected item to database 
```

# c - 如何评估是否存在外部显示器

> ID：14437643
> 
> 赞同：2
> 
> 时间：2013-01-21T11:27:50.900
> 
> 标签：c, macos, bash, applescript

我需要我的代码来评估是否通过迷你显示器端口连接了外部显示器。我想我应该能够通过使用 bash 命令来确定文件存在的布尔 True/False 值来做到这一点。我只是不确定我应该寻找什么文件，大概在 /dev/

我还注意到 WindowServer 进程在连接外部显示器时向控制台发送消息，例如：

> 21/01/2013 04:24:11.647 WindowServer[81]: Display 0x5b81c5c1: MappedDisplay Unit 1: Startup Mode 1920 x 1080, CGSThirtytwoBitColor, Resolution 1, IOMode 0x3e, IODepth 0x2, IOReturn 0x0

因此，也许另一种方法是让我的脚本监视这些消息的日志文件。然而，我不仅不能完全确定如何在不监控大量无用日志消息的情况下做到这一点，而且它似乎也有点笨拙。必须有一种更简洁的方法来获取视频端口的状态，对吧？？

关于如何做到这一点的任何建议（applescript、bash、objective-c 或普通 c 中的任何东西都可以）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:14:35.977

您可以从图像事件访问有关显示的信息。

```
tell application "Image Events"
    launch
    set myDisplays to properties of displays
    quit
end tell 
```

[MacScripter](http://macscripter.net/viewtopic.php?id=28627)

# sencha-touch-2 - 更改嵌套列表的 sencha 触摸详细信息卡中的后退按钮文本

> ID：14437645
> 
> 赞同：1
> 
> 时间：2013-01-21T11:27:58.170
> 
> 标签：sencha-touch-2

如何更改嵌套列表的 sencha 触摸详细信息卡中的后退按钮文本。

我在`detailcard`配置中所做的是：

```
detailCard: {
    xtype: 'panel',
    styleHtmlContent: true,
    scrollable: true,
    html: '  Loading ...... ',
    id: 'detailcard',
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T12:51:12.150

除了 backText，您还需要将[useTitleAsBackText](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList-cfg-useTitleAsBackText)属性设置为 false：

```
useTitleAsBackText: false,
backText: 'Go Back!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:18:43.710

您可以使用 NestedList 的[backButton](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.NestedList-cfg-backButton)配置来自定义文本。

```
Ext.Viewport.add({
    xtype: 'nestedlist',
    backButton: {
        text: 'Terug'
    },

    ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:39:36.483

将[`backText`](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.NestedList-cfg-backText)配置用于`Ext.dataview.NestedList`：

```
backText: 'Go Back!' 
```

[在这里查看。](http://www.senchafiddle.com/#ECuRQ)

# java - 从 intellij 检查中排除目录，但不从自动完成中排除

> ID：14437647
> 
> 赞同：18
> 
> 时间：2013-01-21T11:27:59.403
> 
> 标签：java, css, twitter-bootstrap, intellij-idea, static-analysis

据我所知，排除目录的唯一方法是将其标记为在项目结构中排除。但是，这会使 IntelliJ 完全忽略该目录。因此它不会出现在自动完成选项中。

我不想要这个。我希望排除在检查之外，但要包含在其他所有内容中。这可能吗？

我正在使用 Intellij 12.0.2。而且，实际上是引导 css 和 js 未通过检查。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T08:57:09.863

正如[Peter Lawrey](https://stackoverflow.com/users/57695/peter-lawrey)所建议的那样，正确的解决方案是使用[自定义检查范围](http://www.jetbrains.com/idea/webhelp/scopes.html)，排除您不希望运行检查的目录。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-15T13:25:11.347

使用 IntelliJ 15，您可以将目录标记为`Generated Sources Root`. 这会跳过检查，但自动完成仍然有效。

1.  右键单击所需的目录
2.  选择`Mark Directory As`/`Generated Sources Root`

注意：您似乎无法在`Project Structure`对话中选择此类型，只能通过右键单击。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-21T11:29:38.173

状态栏中有一个戴帽子的人。单击它并选择检查级别。

![在此处输入图像描述](../Images/78469389fcaee701cea2364ed5398dad.png)

另外，如果您有很多文件要禁止检查，请转到`.idea`并编辑`workspace.xml`，查找`<component name="HighlightingSettingsPerFile">`并添加如下行：

```
<setting file="file://$PROJECT_DIR$/src/main/config/config.xml" root0="SKIP_HIGHLIGHTING" /> 
```

我发现它比编辑检查级别更简单。

# java-me - 如何在 J2ME 中生成 UUID？

> ID：14437648
> 
> 赞同：1
> 
> 时间：2013-01-21T11:28:01.307
> 
> 标签：java-me, uuid

我想在 J2ME 中生成 UUID。但我无法得到它。请帮我。

我到处都找到了。。

```
UUID uuid= UUID.randomUUID();

System.out.println("UUID : " + uuid); 
```

但这在我的 NetBeans 中不起作用。它给我一个创建类randomUUID（）的错误，因为它是一个java类。所以.. ：（

在我的 Netbeans SDK 3.5 中。

我什至不想使用

```
LocalDevice.getLocalDevice().getBluetoothAddress() 
```

因为我使用它，但它仅限于具有蓝牙的设备。如果没有蓝牙，应用程序将无法运行。所以如果您找到另一种方法，请帮助我。提前致谢。

# android - 如何存储录制在特定路径中的视频

> ID：14437649
> 
> 赞同：0
> 
> 时间：2013-01-21T11:28:02.023
> 
> 标签：android, video, path, recording

我正在尝试使用默认的相机应用程序录制视频。这是传递给相机应用程序的意图。

```
Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
startActivityForResult(intent, CAPTURE_VIDEO_REQUEST_CODE); 
```

下面是`onResultActivity()`

```
if (resultCode == RESULT_OK) {
    String path=data.getData().getPath();
    File file=new File(path);
    boolean exists=file.exists();
    long idMedia = mApp.saveMedia(mFilePath, Type.VIDEO).getId();
} 
```

因此，返回的路径类似于“/external/video/media/15”

第一个问题是：/external 目录在哪里？我无法通过 adb shell 找到它，也没有在设备上使用文件资源管理器。

第二个问题：布尔存在是假的。为什么？

第三个（也是最重要的）问题：如何移动录制在 sdcard 上特定目录中的视频？

我尝试使用传递uri文件

```
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(videoFile)); 
```

但是当我按下录制按钮时相机应用程序卡住了，并且数据意图仍然`onResultActivity()`指向“/external/....”目录。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:08:08.017

> “/外部/视频/媒体/15”

不是绝对路径，而是它的 URI，您必须使用 contentproviders 找到绝对路径。要将其存储在您应该使用的特定路径中

> .putExtra（MediaStore.EXTRA_OUTPUT，路径）

在调用相机时有意

# wpf - 将项目添加到 ObservableCollection 时数据网格未更新

> ID：14437650
> 
> 赞同：0
> 
> 时间：2013-01-21T11:28:04.370
> 
> 标签：wpf, data-binding, datagrid, observablecollection

我有一个拥有一系列笔记的客户实体。

我的视图中有一个 DataGrid，它数据绑定到我的 Client.AuditableNotes 集合，如果它们已经存在于数据库中，我可以看到这些注释。但是，如果我将新的 AuditableNote 添加到集合中，它不会出现吗？

我的 ClientEditViewModel 对我的 Client 属性具有以下内容：

```
 //Backing Field
private Client _client;
.
.
.
//Property
public Client Client
{
    get { return _client; }
    set
    {
        _client = value;
        RaisePropertyChanged("Client");
    }
}
//Upon my NoteEdit usercontrol returning control back to clienteditviewmodel
public void NoteEditFinished(AuditableNote note)
{
    if (note != null)
    {
        note.AddedBy = _dbContext.SystemUsers.First();
        if (note.AuditableNoteId == 0)
        {
            if (this.Client.AuditableNotes != null)
            {
                this.Client.AuditableNotes.Add(note);
            }
            else
            {
                List<AuditableNote> notes = new List<AuditableNote>();
                notes.Add(note);
                this.Client.AuditableNotes = notes;
            }
        }
        else
        {
             AuditableNote existingNote = this.Client.AuditableNotes.Where(an => an.AuditableNoteId == note.AuditableNoteId).First();
            existingNote = note;
        }
    }
} 
```

我的 Datagrid 被定义为：

```
<DataGrid Name="grdNotes" MinWidth="180" 
          ItemsSource="{Binding Client.AuditableNotes, Mode=TwoWay}" 
          AutoGenerateColumns="False" 
          Background="Transparent"
          RowBackground="Transparent"
          IsReadOnly="True"
          SelectedItem="{Binding SelectedNote}"
          HorizontalScrollBarVisibility="Auto"
          DataContext="{Binding}">
    <DataGrid.Columns>
        <DataGridTemplateColumn
            Header="Warning">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Image x:Name="MyImage" Width="25" Height="20"/>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Warning}" Value="True">
                            <Setter Property="Source" TargetName="MyImage" Value="/Assets/Images/symbol_error.png"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Warning}" Value="False">
                            <Setter Property="Source" TargetName="MyImage" Value="/Assets/Images/symbol_information.png"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTextColumn Header="Note" Binding="{Binding Note, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="290"/>
        <DataGridTextColumn Header="Added By" Binding="{Binding AddedBy, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        <DataGridTextColumn Header="Date Added" Binding="{Binding DateAdded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
    </DataGrid.Columns>
</DataGrid> 
```

# oracle - 无效标识符错误

> ID：14437652
> 
> 赞同：0
> 
> 时间：2013-01-21T11:28:13.903
> 
> 标签：oracle

我有这个简单的表：

```
CREATE TABLE foo
(
 storeName varchar(50),
 keyName varchar(50),
 docname varchar(512),
 config clob,
 CONSTRAINT foo_pk PRIMARY KEY(storeName, keyName)
) 
```

而这个选择语句：

```
SELECT config ,docname
FROM foo 
WHERE storeName = 'SolutionFramework' 
AND keyName = 'Solutions' 
```

这是我得到的错误： (42000/904) ORA-00904: "KEYNAME": invalid identifier

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:49:07.973

删除 CREATE TABLE 命令中 keyName 周围的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T10:50:22.730

标识符只不过是给 oracle 对象的名称。对象可以是常量、变量、异常、游标、过程、函数、包、触发器、对象类型、保留字或标签。确保您使用了相同的列名。

# android - 比较 SOAP Web 服务的响应

> ID：14437656
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:28:38.523
> 
> 标签：android

我有以下 Soap Web 服务的响应。如何将 SonucBilgisi 与一些字符串进行比较。

响应通过解析`ksoap2`

```
anyType{sonucBilgisi=Basarili; uye=anyType{Adi=Test name; Soyadi=Test surname; AcilisKonusmasi=Sayın Emre AKKUŞ'un telefonu; MesguliyetNedeni=meshül; TelefonunAcilmasiniIstiyorMu=true; }; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:33:37.973

这看起来像 ksoap2。我会把它放在你的问题中。`getPropery`您可以使用以下方法或`getPropertyAsString`方法获取每个属性的值`SoapObject`：

```
yourSoapObject.getPropertyAsString("sonucBilgisi"); 
```

# php - 在数据库中的多个字段中搜索

> ID：14437658
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:28:43.513
> 
> 标签：php, mysql, database, codeigniter, search

我有三个字段，即（城市 - 名称 - 日期），我想让用户使用一个字段或两个字段或三个字段一起搜索。拜托，我需要一个最好的方法来做到这一点....我正在使用 php codeigniter 和 mysql 作为数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:46:51.660

Ex:

```
$sql = 'SELECT * FROM table_name WHERE 1=1 ';
if(isset($_POST['city']) && !empty($_POST['city']) )
    $sql .= ' AND city LIKE "%'.$_POST['city'].'%" '; 
```

And one more for each column or field to search.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:47:50.257

你的 SQL 字符串应该是这样的：

```
SELECT * FROM tabel WHERE city LIKE '%".$city."%' OR name LIKE '%".$name."%' OR date LIKE '%".$date."%' 
```

如果条件之一为真，上述查询将返回一行。Fx 如果我在 city 中输入“York”，在名称中输入“Alex”，它将返回“York”在城市单元格中的每一行（它将返回“New York”，因为 York 在该城市名称中）。但它也会返回名称中包含 Alex 的每一行。

如果您希望它只返回所有条件都为真的行，您需要输入“AND”而不是“OR”。

# c++ - 在fcgi c++程序中配置mongo c++驱动代码

> ID：14437659
> 
> 赞同：2
> 
> 时间：2013-01-21T11:28:42.803
> 
> 标签：c++, mongodb, nginx, fastcgi

我并尝试将 mongo c++ 驱动程序代码与我在此站点[http://www.nongnu.org/fastcgipp/](http://www.nongnu.org/fastcgipp/)上找到的 fcgi c++ 代码连接，我的代码如下。

```
/***************************************************************************
* Copyright (C) 2007 Eddie Carle [eddie@erctech.org]                       *
*                                                                          *
* This file is part of fastcgi++.                                          *
*                                                                          *
* fastcgi++ is free software: you can redistribute it and/or modify it     *
* under the terms of the GNU Lesser General Public License as  published   *
* by the Free Software Foundation, either version 3 of the License, or (at *
* your option) any later version.                                          *
*                                                                          *
* fastcgi++ is distributed in the hope that it will be useful, but WITHOUT *
* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or    *
* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public     *
* License for more details.                                                *
*                                                                          *
* You should have received a copy of the GNU Lesser General Public License *
* along with fastcgi++.  If not, see <http://www.gnu.org/licenses/>.       *
****************************************************************************/
#include <iostream>
#include "mongo/client/dbclient.h"

#include <fstream>
#include <boost/date_time/posix_time/posix_time.hpp>

#include <fastcgi++/request.hpp>
#include <fastcgi++/manager.hpp>
using namespace bson;
using namespace mongo;

///////////////////////////////////////////bson////////////////////////////

void iter(bo o) {
    /* iterator example */
    cout << "\niter()\n";
    for( bo::iterator i(o); i.more(); ) {
        cout << ' ' << i.next().toString() << '\n';
    }
}
////////////////////////////Mongo code /////////////////////////////////
void printIfAge(DBClientConnection& c, int age) {
    auto_ptr<DBClientCursor> cursor = c.query("tutorial.persons", QUERY( "age" << age ).sort("name") );
    while( cursor->more() ) {
        BSONObj p = cursor->next();
        cout << p.getStringField("name") << endl;
    }
}

void run() {

}

///////////////////////////////mongo code above////////////////////////////
// I like to have an independent error log file to keep track of exceptions while debugging.
// You might want a different filename. I just picked this because everything has access there.
void error_log(const char* msg)
{
    using namespace std;
    using namespace boost;
    static ofstream error;
    if(!error.is_open())
    {
        error.open("/tmp/errlog", ios_base::out | ios_base::app);
        error.imbue(locale(error.getloc(), new posix_time::time_facet()));
    }

    error << '[' << posix_time::second_clock::local_time() << "] " << msg << endl;
}

// Let's make our request handling class. It must do the following:
// 1) Be derived from Fastcgipp::Request
// 2) Define the virtual response() member function from Fastcgipp::Request()

// First things first let's decide on what kind of character set we will use.
// Since we want to be able to echo all languages we will use unicode. The way this
// library handles unicode might be different than some are used to but it is done
// the way it is supposed to be. All internal characters are wide. In this case UTF-32.
// This way we don't have to mess around with variable size characters in our program.
// A string with 10 wchar_ts is ten characters long. Not up in the air as it is with UTF-8.
// Anyway, moving right along, the streams will code convert all the UTF-32 data to UTF-8
// before it is sent out to the client. This way we get the best of both worlds.
//
// So, whenever we are going to use UTF-8, our template parameter for Fastcgipp::Request<charT>
// should be wchar_t. Keep in mind that this suddendly makes
// everything wide character and utf compatible. Including HTTP header data (cookies, urls, yada-yada).

class Echo: public Fastcgipp::Request<wchar_t>
{
    bool response()
    {
        using namespace Fastcgipp;
        wchar_t cookieString[] = { '<', '"', 0x0440, 0x0443, 0x0441, 0x0441, 0x043a, 0x0438, 0x0439, '"', '>', ';', 0x0000 };

        // Let's make our header, note the charset=utf-8\. Remember that HTTP headers
        // must be terminated with \r\n\r\n. NOT just \n\n.
        // Let's set a cookie just for fun too, in UTF-8.
        out << "Set-Cookie: echoCookie=" << encoding(URL) << cookieString << encoding(NONE) << "; path=/\n";
        out << "Content-Type: text/html; charset=utf-8\r\n\r\n";

        // Now it's all stuff you should be familiar with
        out << "<html><head><meta http-equiv='Content-Type' content='text/html; charset=utf-8' />";
        out << "<title>fastcgi++: Echo in UTF-8</title></head><body>";

        // This environment().data structure is defined in fastcgi++/http.hpp
        out << "<h1>Environment Parameters</h1>";
        out << "<p><b>FastCGI Version:</b> " << Protocol::version << "<br />";
        out << "<b>fastcgi++ Version:</b> " << version << "<br />";
        out << "<b>Hostname:</b> " << encoding(HTML) << environment().host << encoding(NONE) << "<br />";
        out << "<b>User Agent:</b> " << encoding(HTML) << environment().userAgent << encoding(NONE) << "<br />";
        out << "<b>Accepted Content Types:</b> " << encoding(HTML) << environment().acceptContentTypes << encoding(NONE) << "<br />";
        out << "<b>Accepted Languages:</b> " << encoding(HTML) << environment().acceptLanguages << encoding(NONE) << "<br />";
        out << "<b>Accepted Characters Sets:</b> " << encoding(HTML) << environment().acceptCharsets << encoding(NONE) << "<br />";
        out << "<b>Referer:</b> " << encoding(HTML) << environment().referer << encoding(NONE) << "<br />";
        out << "<b>Content Type:</b> " << encoding(HTML) << environment().contentType << encoding(NONE) << "<br />";
        out << "<b>Root:</b> " << encoding(HTML) << environment().root << encoding(NONE) << "<br />";
        out << "<b>Script Name:</b> " << encoding(HTML) << environment().scriptName << encoding(NONE) << "<br />";
        out << "<b>Request URI:</b> " << encoding(HTML) << environment().requestUri << encoding(NONE) << "<br />";
        out << "<b>Request Method:</b> " << encoding(HTML) << environment().requestMethod << encoding(NONE) << "<br />";
        out << "<b>Content Length:</b> " << encoding(HTML) << environment().contentLength << encoding(NONE) << "<br />";
        out << "<b>Keep Alive Time:</b> " << encoding(HTML) << environment().keepAlive << encoding(NONE) << "<br />";
        out << "<b>Server Address:</b> " << encoding(HTML) << environment().serverAddress << encoding(NONE) << "<br />";
        out << "<b>Server Port:</b> " << encoding(HTML) << environment().serverPort << encoding(NONE) << "<br />";
        out << "<b>Client Address:</b> " << encoding(HTML) << environment().remoteAddress << encoding(NONE) << "<br />";
        out << "<b>Client Port:</b> " << encoding(HTML) << environment().remotePort << encoding(NONE) << "<br />";
        out << "<b>If Modified Since:</b> " << encoding(HTML) << environment().ifModifiedSince << encoding(NONE) << "</p>";
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

 DBClientConnection c;
    c.connect("localhost"); //"192.168.58.1");
    cout << "connected ok" << endl;
    BSONObj p = BSON( "name" << "Joe" << "age" << 33 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Jane" << "age" << 40 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Abe" << "age" << 33 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Methuselah" << "age" << BSONNULL);
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Samantha" << "age" << 21 << "city" << "Los Angeles" << "state" << "CA" );
    c.insert("tutorial.persons", p);

    c.ensureIndex("tutorial.persons", fromjson("{age:1}"));

    cout << "count:" << c.count("tutorial.persons") << endl;
    out << "<h1>count:</h1>";
    out << "<b>" << c.count("tutorial.persons")  << ":</b> " << "<br />";

     cout << "\nprintifage:\n";
    auto_ptr<DBClientCursor> cursor = c.query("tutorial.persons", BSONObj());

    while( cursor->more() ) {
         cout << cursor->next().toString() << endl;
    }

    printIfAge(c, 33);

 bo empty;
    cout << "empty: " << empty << endl;

    /* make a simple { name : 'joe', age : 33.7 } object */
    {
        bob b;
        b.append("name", "joe");
        b.append("age", 33.7);
        b.obj();
    }

    /* make { name : 'joe', age : 33.7 } with a more compact notation. */
    bo x = bob().append("name", "joe").append("age", 33.7).obj();

    /* convert from bson to json */
    string json = x.toString();
     out << "<b>" << encoding(HTML) << json << encoding(NONE)  << ":</b> " << "<br />";
    cout << "json for x:" << json << endl;
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Let's see the Path Info
        out << "<h1>Path Data</h1>";
        if(environment().pathInfo.size())
        {
            std::wstring preTab;
            for(Http::Environment<wchar_t>::PathInfo::const_iterator it=environment().pathInfo.begin(); it!=environment().pathInfo.end(); ++it)
            {
                out << preTab << encoding(HTML) << *it << encoding(NONE) << "<br />";
                preTab += L"&nbsp;&nbsp;&nbsp;";
            }
        }
        else
            out << "<p>No Path Info</p>";

        // Let's see the GET data
        out << "<h1>GET Data</h1>";
        if(environment().gets.size())
            for(Http::Environment<wchar_t>::Gets::const_iterator it=environment().gets.begin(); it!=environment().gets.end(); ++it)
                out << "<b>" << encoding(HTML) << it->first << encoding(NONE) << ":</b> " << encoding(HTML) << it->second << encoding(NONE) << "<br />";
        else
            out << "<p>No GET data</p>";

        // Let's see the cookie data
        out << "<h1>Cookie Data</h1>";
        if(environment().cookies.size())
            for(Http::Environment<wchar_t>::Cookies::const_iterator it=environment().cookies.begin(); it!=environment().cookies.end(); ++it)
                out << "<b>" << encoding(HTML) << it->first << encoding(NONE) << ":</b> " << encoding(HTML) << it->second << encoding(NONE) << "<br />";
        else
            out << "<p>No Cookie data</p>";

        //Fastcgipp::Http::Post is defined in fastcgi++/http.hpp
        out << "<h1>POST Data</h1>";
        if(environment().posts.size())
        {
            for(Http::Environment<wchar_t>::Posts::const_iterator it=environment().posts.begin(); it!=environment().posts.end(); ++it)
            {
                out << "<h2>" << encoding(HTML) << it->first << encoding(NONE) << "</h2>";
                if(it->second.type==Http::Post<wchar_t>::form)
                {
                    out << "<p><b>Type:</b> form data<br />";
                    out << "<b>Value:</b> " << encoding(HTML) << it->second.value << encoding(NONE) << "</p>";
                }

                else
                {
                    out << "<p><b>Type:</b> file<br />";
                    // When the post type is a file, we have some additional information
                    out << "<b>Filename:</b> " << encoding(HTML) << it->second.filename << encoding(NONE) << "<br />";
                    out << "<b>Content Type:</b> " << encoding(HTML) << it->second.contentType << encoding(NONE) << "<br />";
                    out << "<b>Size:</b> " << it->second.size() << "<br />";
                    out << "<b>Data:</b></p><pre>";
                    // We will use dump to send the raw data directly to the client
                    out.dump(it->second.data(), it->second.size());
                    out << "</pre>";
                }
            }
        }
        else
            out << "<p>No POST data</p>";

        out << "</body></html>";

        // Always return true if you are done. This will let apache know we are done
        // and the manager will destroy the request and free it's resources.
        // Return false if you are not finished but want to relinquish control and
        // allow other requests to operate. You might do this after an SQL query
        // while waiting for a reply. Passing messages to requests through the
        // manager is possible but beyond the scope of this example.
        return true;
    }
};

// The main function is easy to set up
int main()
{
    try
    {
        // First we make a Fastcgipp::Manager object, with our request handling class
        // as a template parameter.
        Fastcgipp::Manager<Echo> fcgi;
        // Now just call the object handler function. It will sleep quietly when there
        // are no requests and efficiently manage them when there are many.
        fcgi.handler();
    }
    catch(std::exception& e)
    {
        error_log(e.what());
    }

try {
        run();
    }
    catch( DBException &e ) {
        cout << "caught " << e.what() << endl;
    }
} 
```

我使用这个命令编译了代码

```
 g++ -o echo.fcgi echo.cpp -I../include -L../src -lfastcgipp -lboost_thread-mt -pthread -lboost_date_time-mt -g -O2 -pthread -lmongoclient -lboost_thread-mt -lboost_filesystem -lboost_program_options -lboost_system 
```

现在一切都编译好了

但是当我尝试在我的 html 页面中显示 Mongodb 数据时

```
out << "<b>" << c.query("tutorial.persons", BSONObj()) << ":</b> " << "<br />"; 
```

我得到错误

```
 In file included from /usr/local/include/mongo/base/error_codes.h:20:0,
                     from /usr/local/include/mongo/base/status.h:21,
                     from /usr/local/include/mongo/util/assert_util.h:24,
                     from /usr/local/include/mongo/pch.h:76,
                     from /usr/local/include/mongo/client/dbclient.h:30,
                     from echo.cpp:20:
    /usr/local/include/mongo/base/string_data.h:162:19: note: std::ostream& mongo::operator<<(std::ostream&, const mongo::StringData&)
    /usr/local/include/mongo/base/string_data.h:162:19: note:   no known conversion for argument 1 from ‘std::basic_ostream<wchar_t>’ to ‘std::ostream& {aka std::b

asic_ostream<char>&}’ 
```

我想在 fcgi 代码中显示 mongodb 数据（例如以 HTML 的形式）我该怎么做请帮忙。

所以我找到了自己问题的答案

在 fcgi 代码（例如 HTML 的形式）中显示 show mongodb 数据的方式如下所示

```
while( cursor->more() ) {
         cout << cursor->next().toString() << endl;
string msg1 = cursor->next().toString();
         char *s2;

s2 = (char*)malloc(msg1.length() + 1); // don't forget to free!!!!
//s2 = msg1; // I forget if the string class can implicitly be converted to char*

strcpy(s2, msg1.c_str());

     out << "<b>" << s2<< ":</b> " << "<br />";
   free(s2);
    } 
```

但是现在当我使用 localhost/echo.fcgi 打开网页时，客户端页面上出现错误

我收到以下错误

```
Status: 500 Internal Server Error Content-Type: text/html; charset=ISO-8859-1
500 Internal Server Error 
```

有人可以帮助我。

# c#-4.0 - 如何对 KeyValuePair 与集合进行排序

> ID：14437660
> 
> 赞同：0
> 
> 时间：2013-01-21T11:28:46.400
> 
> 标签：c#-4.0

这里产品具有以下属性

1.  ID
2.  标签
3.  图形用户界面
4.  日期

以下代码不起作用

```
 rtn.Sort(delegate(KeyValuePair<string, List<Product>> h1, KeyValuePair<string, List<Product>> h2)
 {
                return h1.Value.Label.CompareTo(h2.Value.Label);
 }); 
```

# php - 如何在 php 中实现 mongodb 中的自动增量

> ID：14437663
> 
> 赞同：0
> 
> 时间：2013-01-21T11:28:53.560
> 
> 标签：php, javascript, mongodb

我在 php 中使用 mongodb 我希望我的 id 与我使用以下代码的其他字段一起自动递增，但它没有运行我的代码是

```
 $cnt =0;
 $count = ++$cnt;
 echo $count;
 $a =  $collection->insert(array('id'=>$count,'html' => $htmlData)); 
```

请尽快帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:56:24.300

在您的代码示例中，您将该`id`字段设置为递增的数字。基于此，我希望您会在插入的文档中*找到 、 和*`html`字段`id`。MongoDB 确实使用, not来存储文档标识符。如果您插入的数据中不存在该字段，驱动程序将创建一个新的 ObjectId（PHP 中的 MongoId 实例）并将其分配给该字段。 *`_id``_id``id`*

 *除非您迫切需要递增标识符，否则使用 ObjectId 会更好。话虽如此，除了 Sammaye 链接的文档（[此处](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)）之外，您可能会发现 Doctrine MongoDB ODM 中的自动增量生成器类是一个有用的示例（请参阅：[此处](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/Id/IncrementGenerator.php)）。*

# javascript - Uncaught SyntaxError: Unexpected token ILLEGAL - 完全相同的代码可以正常工作

> ID：14437666
> 
> 赞同：0
> 
> 时间：2013-01-21T11:29:05.247
> 
> 标签：javascript, dom

下面的代码应该将文本区域附加到 div 上，div 的内容进入文本框（`<?php echo $section[foo]; ?>`部分）。主要和侧边栏部分按预期工作，但 3 页脚部分会抛出一条`Uncaught SyntaxError: Unexpected token ILLEGAL`消息。它们使用完全相同的代码，除了 PHP 数组名称（完全复制 + 粘贴）。有任何想法吗？

```
 <script>
        function textarea(location,text)
        {
            window.alert(location);
            var textarea=document.createElement("textarea");
            var node=document.createTextNode(text);
            textarea.appendChild(node);
            var element=document.getElementById(location);
            element.appendChild(textarea);
        }
        </script>

               <div id="main">
                    <span onclick="textarea(this.parentNode.id,'<?php echo htmlentities($section['main']);?>');" class="edit"><img src="images/edit.png" alt="Edit" /> Edit Section</span>
                    <?php echo $section['main']; ?>
                </div>
                <div id="sidebar">
                    <span onclick="textarea(this.parentNode.id,'<?php echo htmlentities($section['sidebar']);?>');" class="edit"><img src="images/edit.png" alt="Edit" /> Edit Section</span>
                    <?php echo $section['sidebar']; ?>
                </div>

               <div id="left_column">
                    <span onclick="textarea(this.parentNode.id,'<?php echo htmlentities($section['footer_left']);?>');" class="edit"><img src="images/edit.png" alt="Edit" /> Edit Section</span>
                    <?php echo $section['footer_left']; ?>
                </div>
                <div id="right_column_outer">
                    <div id="right_column_left">
                        <span onclick="textarea(this.parentNode.id,'<?php echo htmlentities($section['footer_middle']);?>');" class="edit"><img src="images/edit.png" alt="Edit" /> Edit Section</span>
                        <?php echo $section['footer_middle']; ?>
                    </div>
                    <div id="right_column_right">
                        <span onclick="textarea(this.parentNode.id,'<?php echo htmlentities($section['footer_right']);?>');" class="edit"><img src="images/edit.png" alt="Edit" /> Edit Section</span>
                        <?php echo $section['footer_right']; ?>
                    </div>
                </div> 
```

**完整的数组。我没有在此处编写 HTML 标记（生成 NicEdit）**

```
array(5) {
  ["footer_left"]=>
  string(365) "<h2 class="article">About</h2>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sed justo in quam scelerisque pellentesque. Suspendisse erat tellus, sagittis eu venenatis non, eleifend vel arcu. Sed tempus magna sit amet nisi euismod ac cursus turpis faucibus. In eget nulla quam. Donec sagittis facilisis leo at porta. In libero lorem, aliquet vel vehicula a, fringilla ut odio. Praesent tincidunt porta hendrerit. Donec interdum augue eu nunc elementum bibendum. Etiam feugiat rhoncus quam, quis tincidunt justo imperdiet non. Donec bibendum congue arcu. Cras sollicitudin turpis ut tellus vehicula non ornare leo consectetur. Suspendisse dignissim faucibus felis non tempor. Mauris venenatis lorem in turpis facilisis tincidunt. Proin gravida, quam id ultrices ullamcorper, augue dolor porta massa, iaculis rhoncus felis purus quis diam. Morbi ultrices ultricies ipsum id placerat."
  ["footer_middle"]=>
  string(424) "<h2 class="article">Location</h2>
                        <iframe id="location_map" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://www.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=narre+warren&amp;aq=&amp;sll=-37.916385,145.019321&amp;sspn=0.057691,0.132093&amp;ie=UTF8&amp;hq=&amp;hnear=Melbourne+Victoria,+Australia&amp;t=m&amp;z=13&amp;ll=-38.027115,145.30304&amp;output=embed"></iframe>"
  ["footer_right"]=>
  string(294) "<h2 class="article">Contact</h2>
                        <strong>Skype:</strong> <a href="skype:sample?call">sample</a><br />
                        <strong>Phone Number:</strong> 999999999<br />
                        <strong>Email:</strong> <img id="email_address" src="images/email.png" alt="Email Address" />"
  ["main"]=>
  string(66) "<b>Hello. </b><i>This is sam </i><u>Testing this website&nbsp;</u>"
  ["sidebar"]=>
  string(721) "<blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><div style=\"text-align: right;\"><h5><span style=\"font-family: \'courier new\'; font-size: xx-large;\">This should all be right aligned.d</span></h5></div></blockquote></blockquote><blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><blockquote style=\"margin: 0 0 0 40px; border: none; padding: 0px;\"><div style=\"text-align: right;\"><h5><span style=\"font-family: \'courier new\'; font-size: xx-large;\">I don\'t think lists work.</span></h5></div></blockquote></blockquote></blockquote>"
} 
```

先感谢您。

**编辑：**这是[jsfiddle](http://jsfiddle.net/fXPkQ/) > 它现在按预期工作（单击“编辑部分”，它应该提醒您父 div id 是什么，然后添加一个包含该 div 内容的文本框）我'已经取出 PHP ...我想知道为什么这在我的网站中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:31:27.273

所以我更新了你的小提琴。我删除了所有内联 javascript，将 jQuery 和单击处理程序添加到具有“编辑”类的所有跨度。看到我添加了一个带有“.content”类的 div 包装器，以便更轻松地检索 html。

那么你的 js 就这么短：

```
$(document).ready(function () {
  var $parent;
  $('span.edit').on('click', function () {
    $parent = $(this).parent();
    $parent.append('<textarea>' + $parent.find('.content').html() + '</textarea>');
  });
}); 
```

更新的小提琴在这里：http: [//jsfiddle.net/fXPkQ/1/](http://jsfiddle.net/fXPkQ/1/)

# c# - Windows 应用程序通过 HTTPS 正常连接到本地 WCF 服务，Windows 服务失败并显示相同的代码

> ID：14437676
> 
> 赞同：0
> 
> 时间：2013-01-21T11:29:44.780
> 
> 标签：c#, wcf, iis, ssl

我在本地 IIS 上托管了带有自签名证书的 WCF 服务，该证书用于测试和 Windows 服务以及连接到该 WCF 服务并发送一些数据的 Windows 应用程序。

Windows 应用程序和 Windows 服务都使用相同的 dll 连接到 WCF 服务，但 Windows 服务失败并显示：

**System.ServiceModel.Security.SecurityNegotiationException：无法为具有“本地域”权限的 SSL/TLS 安全通道建立信任关系。---> System.Net.WebException：底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。---> System.Security.Authentication.AuthenticationException：根据验证程序，远程证书无效。**

Windows 服务帐户设置为**LocalSystem**，这可能是原因吗？如果是这样，我应该在哪个帐户下运行 Windows 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:47:22.383

这可能是因为当它作为应用程序运行时，您使用的是您的 Windows 凭据，但在服务下运行时，它可能作为本地系统运行。尝试更改您的 Windows 服务以使用您的凭据运行，看看是否可行。如果是这样，您应该创建一个专门用于运行服务的用户，这样如果您更改密码，就不会破坏服务。

# jquery - 使用 [Ctrl] 键选择多个织物对象

> ID：14437677
> 
> 赞同：4
> 
> 时间：2013-01-21T11:29:44.947
> 
> 标签：jquery, fabricjs

**用例**：我主要选择一个织物对象。接下来，我按住 [Ctrl] 并选择另一个织物对象。此时，必须突出显示两个对象（类似于在 Microsoft Word 中绘制的形状）。

有没有办法做到这一点？

PS：我希望在**不**使用鼠标拖动选择的情况下完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T11:04:49.483

通过fabric-1.0.0.js文件调试后发现我的**canvas.selection**设置为false。这对我来说是一个错误，因为是我早先设置了这个值以避免鼠标拖动组选择。

不过，感谢@kangax 让我知道 shiftKey 在织物中的使用！虽然我无法选择您的评论作为正确答案，但我在这里说明这一点。

# cakephp - 无法插入到蛋糕 PHP 中脚手架后添加的新列

> ID：14437682
> 
> 赞同：2
> 
> 时间：2013-01-21T11:30:13.603
> 
> 标签：cakephp

我是蛋糕 PHP 的新手。我正在研究 cakePHP 上的现有网站。由于客户的一些要求，我不得不在数据库中的一个表中添加一个新列。我可以输入除我最近创建的字段之外的所有字段。我想问题是因为在脚手架期间不存在。但我不知道如何解决这个问题。

我可以在从数据库中获取时访问该字段，只需添加`array('fields'=>'*'`) in即可`$this->Model_name->find('first',array('fields'=>'*'))`。

`$this->request->data['ModelName']['field_name'] = 'value';` 在使用保存功能之前，我尝试使用此方法进行新插入。但问题是除了我添加的这个新字段之外，所有字段都被插入。

我希望事情很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:30:54.417

请阅读文档 - ModelName 是 CamelCased：

```
$this->request->data['ModelName']['field_name'] = 'value'; 
```

如果仅未添加此新字段，则很可能您没有清除（永久/模型）缓存。您需要这样做才能让 cake 识别新添加的 db 字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:36:13.010

在你的情况下，提醒我我的 2 个错误使我无法保存我的新领域。

1 确保您的数据库表中有新字段。
2 在我的生产系统中，我将调试设置为 0，因此模型和持久缓存不会更新。

要清除模型和持久缓存，您可以在命令行中设置`Configure::write('debug', 2);`或`app/Config/Core.php`手动删除缓存。

```
rm -f app/tmp/cache/models/cake_model_*  
rm -f app/tmp/cache/persistent/cake_core_* 
```

# performance - 使用顶点缓冲区绘制大量相同的模型？

> ID：14437690
> 
> 赞同：3
> 
> 时间：2013-01-21T11:30:58.007
> 
> 标签：performance, xna, vertex-buffer

我面临一个问题，许多开发人员可能已经找到了解决方案。我有一个小项目，地板设计有小立方体（100X100）。如果我超过这个限制，我的游戏就会出现严重的减速和 Lagues！

这是我绘制地板的方式：

```
//Function to draw my ground ( 100 X 100 X 1)
    public void DrawGround(GameTime gameTime)
    {
        // Copy any parent transforms.
        Matrix[] transforms = new Matrix[this.model.Bones.Count];
        this.model.CopyAbsoluteBoneTransformsTo(transforms);

        //loop 1 cube high
        for (int a = 0; a < 1; a++)
        {
            //loop 100 along cube
            for (int b = 0; b < 100; b++)
            {
                //loop 100 cubic wide
                for (int c = 0; c < 100; c++)
                {
                    // Draw the model. A model can have multiple meshes, so loop.
                    foreach (ModelMesh mesh in this.model.Meshes)
                    {
                        // This is where the mesh orientation is set, as well 
                        // as our camera and projection.
                        foreach (BasicEffect effect in mesh.Effects)
                        {
                            effect.EnableDefaultLighting();
                            effect.World = transforms[mesh.ParentBone.Index] * Matrix.CreateTranslation(this.position);
                            effect.View = this.view;
                            effect.Projection = this.projection;

                        }

                        // Draw the mesh, using the effects set above.
                        mesh.Draw();
                    }
                }
            }
        }
    } 
```

我认为最好使用[VertexBuffer]“显卡的内存”，但我还没有找到我想做的教程......

你能给我一个在我的函数“DrawGround”中使用[VertexBuffer]的例子吗？ ![在此处输入图像描述](../Images/b0b36ceb36a2ebfa6561ec72ce956c72.png) 非常感谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T13:07:55.133

tl;博士;

使用[硬件实例](http://en.wikipedia.org/wiki/Geometry_instancing)来绘制立方体。可以选择使用[View Frustum Culling](http://en.wikipedia.org/wiki/Viewing_frustum)以避免绘制不可见的实例。通过阅读[Riemer 的教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/VertexBuffer_and_IndexBuffer.php)开始使用顶点和索引缓冲区。

* * *

# 实例化

*这个想法是，顶点和索引缓冲区绑定到设备一次，然后在一次*绘制调用中绘制多次。实例是一个小数据包，仅包含模型实例的唯一信息。该实例数据被写入一个额外的顶点缓冲区，并与包含实际顶点和索引的缓冲区一起绑定到设备。

## 你怎么能利用它？

在您的情况下，您将具有以下设置：

*   包含立方体网格索引的 IndexBuffer
*   包含立方体网格顶点的 VertexBuffer
*   第二个 VertexBuffer 包含您要绘制的所有立方体的变换
*   考虑实例数据的特殊输入布局

由于您的立方体仅在其位置上有所不同，您甚至不必将完整的变换矩阵发送到着色器。只需发送实例位置并将其添加到顶点位置。您还可以发送其他数据，例如每个实例的颜色。

## 你如何实施它？

一个快速的谷歌搜索给了我很多关于*xna instancing*的结果，所以这应该让你开始。这里有两个看起来很有希望的随机结果：

*   [关于 XNA 实例化的 SO 问题](https://stackoverflow.com/questions/9929103/need-help-using-instancing-in-xna-4-0)
*   [XNA 4 中的 PC 硬件实例化，带有纹理](http://www.float4x4.net/index.php/2011/07/hardware-instancing-for-pc-in-xna-4-with-textures/)

* * *

# 截锥体剔除

在任何时候，场景中只有一小部分网格实际上是可见的。一个物体可能被另一个物体遮挡，或者它完全位于玩家的视野之外。在绘制它们之前移除那些不可见的网格的过程称为*剔除*。View Frustum Culling 解决了第二种情况：

*所有不与相机体积相交的体积都是不可见的。*

相机的体积是多少？正交投影具有框形式的包围体。对于透视投影，这个盒子是锥形的，一个金字塔，被近平面和远平面裁剪；因此查看*截锥体*。

## 你怎么能利用它？

使用截锥体来识别当前帧中不可见的实例。仅绘制与相机的视锥体相交的那些立方体。当玩家仰望天空时，您的渲染负载可能会减少多达 100%。;-)

您可以将其与空间层次结构（[四叉树](http://en.wikipedia.org/wiki/Quadtree)或[八叉树](http://en.wikipedia.org/wiki/Octree)）相结合，以减少平截头体相交计算的数量。

## 你如何实施它？

Xna 提供了一个[BoundingBox Structure](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.aspx)以及一个[BoundingFrustum Class](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingfrustum.aspx)。您所要做的就是使用它们。

* * *

### 一个小小的缺点

[结合*视锥体剔除*和*硬件实例化*可能会很棘手。剔除实例意味着您还必须从实例缓冲区中删除它们 => 这意味着重新创建整个事物。也许考虑计算立方体可见性并仅每隔几帧或当相机快速移动时更新实例缓冲区。您最终如何以及在哪个扩展范围内实施这些技术取决于您并且取决于您的要求。]

* * *

我刚刚意识到您想知道顶点缓冲区是如何工作的：

# 顶点缓冲区

在将三角形绘制到屏幕上之前，必须准备好图形设备。这包括绑定着色器、采样器、纹理，当然还有绑定几何数据。当进行[绘图调用](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.graphicsdevice.drawinstancedprimitives.aspx)时，图形设备运行着色器并将输出写入渲染目标。

目前，您正在使用 XNA 的内置抽象，它简化了流程（并从您那里获得了所有控制权）。绑定着色器、常量、输入布局等目前都隐藏在您的 Effect 类中，而 Mesh 类负责事物的几何方面。

## 'mesh.Draw()' 有什么作用？

创建网格时会创建两个缓冲区，一个[VertexBuffer](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.vertexbuffer.aspx)和一个[IndexBuffer](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.indexbuffer.aspx)。创建这个缓冲区的成本很高，所以最好只做一次。当您调用 draw 方法时，缓冲区将绑定到设备，然后进行绘图调用。正如您在代码中正确注释的那样，必须首先设置效果状态。

但您也可以创建自己的顶点和索引缓冲区：

```
// Instantiate the VertexBuffer
var vertexBuffer = new VertexBuffer(
    device, 
    VertexPositionColorNormal.VertexDeclaration, 
    vertices.Length, 
    BufferUsage.WriteOnly
);

// Write data to the buffer
vertexBuffer.SetData(vertices);

// Instantiate the IndexBuffer
var indexBuffer = new IndexBuffer(
    device, 
    typeof(int), 
    indices.Length,      
    BufferUsage.WriteOnly
);

// Write data to the buffer
indexBuffer.SetData(indices); 
```

...并将它们手动绑定到设备：

```
device.Indices = myIndexBuffer;
device.SetVertexBuffer(myVertexBuffer); 
```

* * *

此代码直接取自[Riemer 的 XNA 教程](http://www.riemers.net/eng/Tutorials/xnacsharp.php)：

*   [使用 VertexBuffers 和 IndexBuffers 提高性能](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series1/VertexBuffer_and_IndexBuffer.php)

看看这个网站，当我第一次开始图形编程时，它真的帮了我很多。

# android - Android 布局问题，一个 ScrollView 中的几个 ListView

> ID：14437698
> 
> 赞同：0
> 
> 时间：2013-01-21T11:31:22.730
> 
> 标签：android, listview, layout, styles, scrollview

首先 - 我知道，我不应该将 ListView 放入 ScrollView，因为 ListView 负责自己的垂直滚动。

无论如何，在我的情况下它是不同的 - 问题：

我有一个视图，其中显示了一些信息，也有一些操作。这是一个示例屏幕：

![在此处输入图像描述](../Images/45570171825f5412fb5574a086692060.png)

Email1 是放置在 ListView 中的 ListItem。Homepage 也是放置在第二个 ListView 中的 ListItem。（*我使用了 ListViews，因为我无法像使用 ListItem 和 ListViews 那样设置按钮样式 - 另一个原因是，我可以显示 Second Mail: Email2 if exists*）

反正。现在的问题是，布局看起来像这样：

`<ScrollView>`（父）--> `<LinearLayout>`（子父）--> `<LinearLayout>`-->（（它描述了电子邮件，或“Sonstiges”，与主页）--> `<ListView>`（这里是列表视图）..

我遇到的问题是，当使用 ScrollView 时，它会切断第二个元素，我看不到它，看这里：

![在此处输入图像描述](../Images/03b7e32946083bc31370f5f5d4cf4414.png)

在这里，我用黄色标记了它，是我可以单击 ListItem 的地方。它只显示了一点点，甚至无法显示第三个项目：

![在此处输入图像描述](../Images/117340cc49fbca1d8153ec65abff97d3.png)

我尝试的是删除 ScrollView。好吧，现在它向我展示了第二个项目，但是在整个视图中，我需要滚动，因为信息和操作比我在一个“页面”上看到的要多。

一些 axml（它的“Aktionen”，来自屏幕上方），其余的看起来完全像这样：

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView
      style="@style/ScrollView"
      xmlns:local="http://schemas.android.com/apk/res/INMobileCRM4Android.INMobileCRM4Android"
        xmlns:android="http://schemas.android.com/apk/res/android">
      <LinearLayout style="@style/LinearLayout">
        <LinearLayout style="@style/LinearLayoutSmall">
          <TextView
            style="@style/TextAktionen"   
            android:text="Aktionen" />
          <Mvx.MvxBindableListView
            local:MvxBind="{'ItemsSource':{'Path':'ActionsList'},'ItemClick':{'Path':'ActionCommand'}}"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"
            local:MvxItemTemplate="@layout/addressshowdataactionlistitem"/>
        </LinearLayout>
      </LinearLayout>
    </ScrollView> 
```

风格：

```
 <style name="LinearLayout" parent="android:Theme">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:orientation">vertical</item>
    <item name="android:background">@string/backgroundPicture</item>
  </style>
    <style name="LinearLayoutSmall" parent="android:Theme">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:orientation">vertical</item>
  </style>
    <style name="ScrollView" parent="android:Theme">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
  </style> 
```

并且 ListItem 本身的 Style 不是必需的。我把它改成了LinearLayout、FrameLayout、RelativeLayout，它总是一样的。

我希望有一个人可以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:32:03.640

我设法解决了我的 TimePicker 问题，这可能对您和您的 ListViews 有用。本质上他们都想要同样的东西，控制你的触摸事件，所以你必须在你的 Java 文件中覆盖。

为此，我在一个单独的 Java 文件中创建了一个自定义 TimePicker，然后在 XML 中将其作为视图调用。

也许您可以创建一个自定义 ListView，然后在文件末尾调用以下代码：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {

    // Stop ScrollView from getting involved once you interact with the View
    if (ev.getActionMasked() == MotionEvent.ACTION_DOWN)
    {
        ViewParent p = getParent();
        if (p != null)
            p.requestDisallowInterceptTouchEvent(true);
    }
    return false;
} 
```

在执行第一个触摸事件后，视图将获得焦点，这将接管滚动任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:29:30.120

由于这似乎是一个已知问题，请参阅此处：[Scrolling with Multiple ListViews for Android](https://stackoverflow.com/questions/306626/scrolling-with-multiple-listviews-for-android)，我将自己回答这个问题。

至少我为每个元素使用了一个 ListView。这行得通，但它有点不友好，因为每个 ListView 现在只有一个 ListItem。

# c - 从指向 const 的指针中删除 const 是否遵守 C 中的严格别名，并引用同一个对象？

> ID：14437699
> 
> 赞同：14
> 
> 时间：2013-01-21T11:31:25.273
> 
> 标签：c, constants, language-lawyer, strict-aliasing

C 中的以下代码是否具有定义的行为？

```
int main() {
    const int i = 0;
    return *(int*)(&i);
} 
```

我问是因为 6.5/7 将“与对象的有效类型兼容的类型的限定版本”列为有效别名。但是对象的有效类型是`const int`，而且我不认为`int`它是一个合格的版本`const int`（尽管反过来也是如此）。`int`两者都不`const int`兼容（6.7.3/10）。

此外，6.3.2.3/2 表示您可以通过*添加*限定符来转换指针类型，并且生成的指针是相等的。6.3.2.3/7 说您可以转换任何两种指针类型（因此`(int*)(&i)`允许转换本身）。但并不是说结果指针指向同一个对象，甚至是相等的。它所说的只是它可以转换回原始类型（在这种情况下`const int*`）。也就是说，即使别名是合法的，我也不清楚标准是否保证我的指针转换确实会导致指向`i`.

那么，标准是否真的定义了我的代码的行为，如果是的话，它在哪里定义？

我知道代码在实践中有效。我想到了一个假设的（和奇怪的）实现，它不起作用。我可以询问该实现是否符合标准（如果不符合，它违反了哪一部分），但如果我想象的实现在其他方面不符合，我不想混淆。如果有人认为它会帮助他们回答问题，我将描述实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:49:09.503

§6.7.3 p5至少*暗示*它可以工作：

> 如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义。如果尝试通过使用具有非 volatile 限定类型的左值来引用使用 volatile 限定类型定义的对象，则行为未定义。

请注意，对于 volatile 限定的类型，它说的*是 refer*，但对于 const 限定的类型，它只是说*modify*，这意味着非修改访问是可以的（*“证明规则的异常*”）。

不过，在我看来，您可能已经发现了标准中的缺陷。

# php - 如何从经纬度找到城市？

> ID：14437701
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:31:31.500
> 
> 标签：php, google-maps

我有纬度和经度，现在必须找到城市名称。

我正在使用地理代码，但没有得到正确的城市名称。

但城市名称不正确。

有什么方法可以让我获得正确的城市名称吗？

```
$geocode_stats = file_get_contents("maps.googleapis.com/maps/api/geocode/…" . "&sensor=true");
$output_deals  = json_decode($geocode_stats);
$city          = $output_deals->results[0]->address_components[1]->short_name; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:30:30.393

您必须遍历结果的所有 address_components 并找到将 types-property 设置为数组的那个：

```
[ "locality", "political" ] 
```

例子：

```
<?php

$geocode_stats = file_get_contents(/*the url*/); 
$result='no city found';
$output_deals = json_decode($geocode_stats); 
if($output_deals->status=='OK'){
  $address_components=$output_deals->results[0]->address_components;

  for($i=0;$i<count($address_components);++$i){
    if(array("locality", "political")==$address_components[$i]->types){
      $result=$address_components[$i]->short_name;
      break;
    }
  }

} else{
  $result=$status;
}
echo $result;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T10:47:12.957

```
<?php
$deal_lat=30.469301;
$deal_long=70.969324;
$geocode=file_get_contents('http://maps.googleapis.com/maps/api/geocode/json?latlng='.$deal_lat.','.$deal_long.'&sensor=false');

        $output= json_decode($geocode);
enter code here
    for($j=0;$j<count($output->results[0]->address_components);$j++){
               $cn=array($output->results[0]->address_components[$j]->types[0]);
           if(in_array("locality", $cn))
           {
            $city= $output->results[0]->address_components[$j]->long_name;
           }
            }
            echo $city;
?> 
```

# javascript - 连续点击失败 - Jquery

> ID：14437702
> 
> 赞同：1
> 
> 时间：2013-01-21T11:31:33.330
> 
> 标签：javascript, jquery, click

我对这个 javascript 有一个奇怪的问题（使用 smarty 时，ldelim 和 rdelim 用于花括号）

```
$('#bouton').on('click',function() {ldelim}
        event.preventDefault();
        $.post(url,data,function(callback_data){ldelim}
                  ....
       {rdelim});
{rdelim}); 
```

该脚本将显示一个不可见的 div 标签 ('#thisdiv')。然后我加了

```
$('#thisdiv').on('click',function() {ldelim}
            event.preventDefault();
            $.post(url,data,function(callback_data){ldelim}
                      ....
           {rdelim});
{rdelim}); 
```

但是单击“#thisdiv”时什么也没有发生（即使我在“#thisdiv”上的单击功能中抑制了任何内容并发出警告消息）。有人可以帮忙吗？

编辑：在第一次调用之前，在第一次调用之后，我们删除了“invisible”类（“invisible”类是一个显示无类）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:37:02.157

`#thisdiv`此代码运行时不存在 - 因此它无法附加事件。您需要在文档的上层委派。例如：

```
$(document).on('click','#thisdiv',function(){...}); 
```

或者如果有一个正在加载的父元素，您可以使用它作为锚点：

```
$('#theparent').on('click','#thisdiv',function(){...}); 
```

[`jquery.on`文件](http://api.jquery.com/on/)

# visual-c++ - 在 Visual C++ 中链接到旧的第三方 DLL

> ID：14437703
> 
> 赞同：2
> 
> 时间：2013-01-21T11:31:37.960
> 
> 标签：visual-c++, dll

我正在将一个 C++ 项目从旧的 Borland 编译器移植到 VisualStudio 2008。这个项目使用了我没有源代码的第三方 DLL，因此我无法重新编译或修改它。DLL 的头文件定义的函数如下：

```
extern "C" {
void __stdcall Init(int a, int b);
} 
```

但是，当我尝试链接到这个 DLL 时，VisualStudio 说它找不到函数 _Init@8。当我查看 DLL 时，我发现函数名称是 _Init，而不是 _Init@8（似乎早于 Microsoft 的 DLL 将 @8 添加到 stdcall 名称修改）。

我的问题是：如何调用这个 DLL 中的函数？VisualStudio 是否根本不支持这些旧的 DLL，或者是否有我缺少的标志/设置。（我知道我可以使用 LoadLibrary/GetProcAddress 函数在运行时动态调用函数，但不希望这样做。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:41:26.180

我没有注意到任何可以告诉我您是在进行 32 位还是 64 位编码的信息。MSDN 提供了一些关于如何基于您没有源代码的 dll 创建导入库的信息。本文用于制作[32 位导入库](http://support.microsoft.com/KB/131313)。干杯！

# sql - SPHINX 中未旋转的索引

> ID：14437705
> 
> 赞同：1
> 
> 时间：2013-01-21T11:31:48.553
> 
> 标签：sql, sphinx

我想使用 2 个索引（查询），但是 sphinx 给出了这个警告：

```
[sphinx@reea3 ~]$ /usr/bin/indexer --config /home/sphinx/sphinx/sphinx.conf --all --rotate
Sphinx 0.9.9-release (r2117)
Copyright (c) 2001-2009, Andrew Aksyonoff

using config file '/home/sphinx/sphinx/sphinx.conf'...
indexing index 'job1'...
collected 6 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 6 docs, 837 bytes
total 0.005 sec, 152988 bytes/sec, 1096.69 docs/sec
indexing index 'job2'...
collected 8 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 8 docs, 151 bytes
total 0.002 sec, 53794 bytes/sec, 2850.01 docs/sec
total 10 reads, 0.000 sec, 0.2 kb/call avg, 0.0 msec/call avg
total 20 writes, 0.000 sec, 0.3 kb/call avg, 0.0 msec/call avg
WARNING: failed to open pid_file '/var/run/sphinx/searchd.pid'.
WARNING: indices NOT rotated. 
```

下面是源代码。我已经取出了sql查询和属性列表。

为了让 SPHINX 旋转索引，需要做什么？

```
#
# Minimal Sphinx configuration sample (clean, simple, functional)
#

source jobSource1
{
    type        = mysql
    sql_host    = localhost
    sql_user    = root
#   sql_pass    = 123456
    sql_pass    =
    sql_db      = dbx
    sql_port    = 3306
    sql_query   = sql_query
    sql_attr_uint = attributes go here
    sql_attr_str2ordinal = attributes go here
}

source jobSource2
{
    type        = mysql
    sql_host    = localhost
    sql_user    = root
#   sql_pass    = 123456
    sql_pass    =
    sql_db      = dbx
    sql_port    = 3306
    sql_query   = sql_query
    sql_attr_uint = attribute
    sql_attr_str2ordinal = attribute
}

index job1
{
    source      = jobSource1
    path        = /home/sphinx/jobs/job1
    docinfo     = extern
    charset_type    = utf-8
}

index job2
{
    source      = jobSource2
    path        = /home/sphinx/jobs/job1
    docinfo     = extern
    charset_type    = utf-8
}

indexer
{
    mem_limit   = 32M
}

searchd
{
    port        = 9312
    log     = /var/log/sphinx/searchd.log
    query_log   = /var/log/sphinx/query.log
    read_timeout    = 5
    max_children    = 30
    pid_file    = /var/run/sphinx/searchd.pid
    max_matches = 1000
    seamless_rotate = 1
    preopen_indexes = 0
    unlink_old  = 1
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T21:42:13.757

实际上，在与我的同事进行了一次头脑风暴之后，我们与管理员进行了交谈，结果发现 searchd 进程是使用 root 权限初始化的，因此只有 root 用户可以修改文件。

以正常权限重新启动该过程后，一切正常；

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-12T07:37:24.427

使用这个命令`sudo indexer --rotate --all`

# ruby - 使用 Nokogiri 解析 XML 提要不起作用

> ID：14437706
> 
> 赞同：0
> 
> 时间：2013-01-21T11:31:49.073
> 
> 标签：ruby, nokogiri

这是我的代码：

```
doc= Nokogiri::HTML(open("http://www.cincinnatisun.com/index.php?rss/90d24f4ad98a2793", 'User-Agent' => 'ruby'))
search=doc.css('item')
if !search.blank?
  search.each do |data|
    title=data.css("title").text

    link=data.css("link").text
  end
end 
```

但我没有得到链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:26:07.107

根据[http://nokogiri.org/tutorials/searching_a_xml_html_document.html](http://nokogiri.org/tutorials/searching_a_xml_html_document.html)类似：

```
@doc = Nokogiri::XML(File.read("feed.xml"))
@doc.xpath('//xmlns:link') 
```

应该做的工作。但请注意，您提供的 xml 片段根本不是有效的 xml 提要（没有根元素，未打开项目标签 - 仅关闭等）。该代码假定 xml 提要看起来即

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <item>
    <title>Atom-Powered Robots Run Amok</title>
    <link>http://example.org/2003/12/13/atom03</link>
  </item>
</feed> 
```

并提取：

```
<link>http://example.org/2003/12/13/atom03</link> 
```

结果。如果您有这样的问题，请先尝试查看文档/参考。如果您尝试了某些东西但没有像您期望的那样工作，那么您可以使用实际代码咨询 stackoverflow - 这样可以更容易地理解您的问题并提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:11:16.843

有几件事是错误的：

```
if !search.blank? 
```

将不起作用，因为`search`它将是由`doc.css`. `NodeSet`没有`blank?`办法。也许你的意思是`empty?`？

```
title=data.css("title").text 
```

不是找到的正确方法，`title`因为就像上面的问题一样，你得到的是 NodeSet 而不是 Node.js。从 NodeSet获取`text`可能会返回很多您不想要的垃圾。而是这样做：

```
title=data.at("title").text 
```

将代码更改为：

```
require 'nokogiri'
require 'open-uri'

doc= Nokogiri::HTML(open("http://www.cincinnatisun.com/index.php?rss/90d24f4ad98a2793", 'User-Agent' => 'ruby'))
search=doc.css('item')
if !search.empty?
  search.each do |data|
    title=data.at("title").text
    link=data.at("link").text
    puts "title: #{ title } link: #{ link }"
  end
end 
```

输出：

```
标题：前孟加拉虎拉拉队诉讼审判开始链接：
标题：自由中心提供周一免费入场链接：
标题：迈阿密大学乐队在就职游行中表演 链接：
标题：北肯塔基人将在就职典礼上展示色彩 链接：
标题：John Gumms 周一预报链接：
标题：奥巴马总统副总统拜登宣誓就职正式开始第二任期链接：
标题：Colerain Township 必胜客星期六晚上抢劫链接：
标题：寒潮来到三州链接：
标题： 2 名男子在肯塔基州北部被警方追捕后被捕 链接：

```

这`link`不起作用，因为 XML 格式不正确，根据我的经验，这在 Internet 上非常普遍，因为人们没有花时间检查他们的工作。

该修复将在 Nokogiri 接收内容之前对 XML 进行按摩，或者修改您的访问器。幸运的是，这个特定的 XML 很容易解决，所以这应该会有所帮助：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open("http://www.cincinnatisun.com/index.php?rss/90d24f4ad98a2793", 'User-Agent' => 'ruby'))
search = doc.css('item')
if !search.empty?
  search.each do |data|
    title = data.at("title").text
    link = data.at("link").next_sibling.text
    puts "title: #{ title } link: #{ link }"
  end
end 
```

哪个输出：

```
标题：前孟加拉虎啦啦队诉讼审判开始链接：http://www.cincinnatisun.com/index.php/sid/212072454/scat/90d24f4ad98a2793
标题：自由中心提供周一免费入场链接：http://www.cincinnatisun.com/index.php/sid/212072914/scat/90d24f4ad98a2793
标题：迈阿密大学乐队在就职游行中表演链接：http://www.cincinnatisun.com/index.php/sid/212072915/scat/90d24f4ad98a2793
标题：北肯塔基人将在就职典礼上展示色彩链接：http://www.cincinnatisun.com/index.php/sid/212072913/scat/90d24f4ad98a2793
标题：John Gumms 周一预报链接：http://www.cincinnatisun.com/index.php/sid/212070535/scat/90d24f4ad98a2793
标题：奥巴马总统副总统拜登宣誓就职正式开始第二任期链接：http://www.cincinnatisun.com/index.php/sid/212060033/scat/90d24f4ad98a2793
标题：Colerain 乡必胜客星期六晚上被抢劫链接：http://www.cincinnatisun.com/index.php/sid/212057132/scat/90d24f4ad98a2793
标题：寒潮来到三州链接：http://www.cincinnatisun.com/index.php/sid/212057131/scat/90d24f4ad98a2793
标题：肯塔基州北部警方追捕后逮捕 2 名男子链接：http://www.cincinnatisun.com/index.php/sid/212057130/scat/90d24f4ad98a2793

```

完成所有这些后，您可以更清楚地编写代码，例如：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open("http://www.cincinnatisun.com/index.php?rss/90d24f4ad98a2793", 'User-Agent' => 'ruby'))
doc.css('item').each do |data|
  title = data.at("title").text
  link = data.at("link").next_sibling.text
  puts "title: #{ title } link: #{ link }"
end 
```

* * *

有趣的是，现在示例页面的链接似乎已修复。

# axis2c - Apache Axis2/C 安装

> ID：14437711
> 
> 赞同：3
> 
> 时间：2013-01-21T11:32:06.573
> 
> 标签：axis2c

我尝试在 Linux 上安装 Apache Axis2/C 但没有成功.. 使用 libxml2

这是我的努力 1) libxml2 已成功安装标志： LIBXML2_CFLAGS = -I/usr/local/include/libxml2 LIBXML2_LIBS='-L/usr/local/lib/hpux32 -lxml2 -lz -lpthread -liconv -lm' AXIS2C_HOME = /tmp LD_LIBRARY_PATH = {$LD_LIBRARY_PATH}:$AXIS2C_HOME/lib

```
Ran --prefix=${AXIS2C_HOME} --enable-libxml2=yes
Installation fails with following error:

checking whether to build libxml2 xml parser library... checking pkg-config is at least        version 0.9.0... ./configure[21268]: /local/lib/hpux32.
no
yes
checking for LIBXML2... configure: error: The pkg-config script could not be found or is too old.  Make sure it
is in your PATH or set the PKG_CONFIG environment variable to the full
path to pkg-config.

Alternatively, you may set the environment variables LIBXML2_CFLAGS
and LIBXML2_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

我没有 pkg​​-config 实用程序，但我设置了 LIBXML2_CFLAGS 和 LIBXML2_LIBS，配置文件没有任何信息。

有人可以在这里帮忙吗？

谢谢， 希尔什

# css - 淘汰赛 foreach css 多类 $data

> ID：14437712
> 
> 赞同：1
> 
> 时间：2013-01-21T11:32:06.663
> 
> 标签：css, knockout.js

在这个例子中，我有两个额外的 css 类要添加到 DIV 中。

```
 <div data-bind="foreach: [{name: 'Hello', size:'Triple'}]">
      <div class="tile"
       data-bind="css: {'tile-selected': true, $data.size : true}">
      </div>
    </div> 
```

第一个是基于布尔值的“瓦片选择”。这很好用。

第二个实际上是“Triple”类的名称，（在此示例中，始终添加它，即“True”）

我得到错误：

> 未捕获的错误：无法解析绑定。消息：SyntaxError: Unexpected token .; 绑定值：css: {'tile-selected': true, $data.size : true}

我假设我不能使用 $data.size 部分从 'size' 属性中提取 'Triple' 文字。有没有办法我可以做到这一点？（$data['size'] 似乎也不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:07:16.050

您不能将 ko 可观察对象或属性用作类名。相反，您必须为此创建一个单独的属性，并将其用于动态 css 绑定，如下所示。

```
<div data-bind="css: sizeCSS">   Profit Information</div> 

var viewModel = {
/// some view model properties here.
        };

viewModel.sizeCSS = ko.computed(function() {
    return this.size();
}, viewModel); 
```

编辑：在这里检查动态 CSS 绑定示例：http: [//knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)

# cucumber - cucumber jvm CucumberException：在 [] 处未找到任何功能

> ID：14437715
> 
> 赞同：8
> 
> 时间：2013-01-21T11:32:11.820
> 
> 标签：cucumber, cucumber-jvm, cucumber-junit

在我的黄瓜 -jvm、Maven、junit 设置中，我的 testRunner 文件为

```
package com.lebara.testrunner;

import cucumber.junit.Cucumber;
import org.junit.runner.RunWith;

@RunWith(Cucumber.class)
@Cucumber.Options(

glue = {"com.lebara.stepdefs","com.lebara.framework.main", "com.lebara.testrunner"},
features = "C:/Users/sarthak.dayanand/Documents/WebRefreshTest/CukeAutomation/LebaraWebAutomationTest1/src/main/resources",
format = {"pretty", "html:target/cucumber-html-report", "json-pretty:target/cucumber-report.json"},
tags = {"@UserJourney"}

)
public class RunCukesTest {
} 
```

我在上述目录中有我的功能文件。

如果我运行它，我会得到以下异常：

```
cucumber.runtime.CucumberException: No features found at [C:/Users/sarthak.dayanand/Documents/WebRefreshTest/CukeAutomation/LebaraWebAutomationTest1/src/main/resources/cucumber]... 
```

如果我删除 testrunner 中的“功能”选项，它会尝试在与我的 testrunner.java 相同的目录中查找功能文件

```
cucumber.runtime.CucumberException: No features found at [com/lebara/testrunner] 
```

如果我把功能文件放在那里，它就可以工作。

我的问题是为什么没有从我以前的位置提取我的功能文件，我认为这是黄瓜的默认文件结构 - maven 设置。

我如何让它从那里拿起？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T06:22:22.893

您的测试运行程序和功能文件到底在哪里？我有以下完美的设置：

```
src/test/
    java/
        com/mypackage/
            TestRunner.java
            StepDefinition.java
    resources
        com/mypackage/
            fancy.feature 
```

Maven/Cuke 约定将从 tests/java 目录执行测试，并在 test/resources 目录中找到特性文件。我的测试运行器与您的基本相同，但选项较少：

```
import cucumber.api.junit.Cucumber;
import org.junit.runner.RunWith;

@RunWith(Cucumber.class)
@Cucumber.Options(format = {"pretty"})
public class TestRunner { } 
```

如果您还没有找到答案，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-24T16:35:19.560

我有一个类似于你的设置（不使用 Maven/Cucumber 约定）。在我的选项中，我没有指定从根目录开始的路径，而是从项目的源文件夹中指定功能所在的路径。这是有道理的，否则测试只能在您的机器上运行。

在你的情况下，我认为应该是：

```
features = "src/main/resources" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-16T16:16:41.007

```
//Removing the space between "**classpath**" and "**:com/**" helped.

@RunWith(Cucumber.class)
@CucumberOptions(
        features = {"classpath:com/tk/feature/"}, //NOTE: NO SPACE
        glue = {"classpath: com.tk.cucumber"}, 
        plugin = {
                "pretty", 
                "html:build/reports/cucumber" 
                ,"json:build/reports/cucumber-tests/test.json"}
        )
public class RunAPITests {} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-30T12:08:18.897

只需添加 features = { "classpath:features/feature.feature"}，并且该功能必须在**test/resources/features/feature.feature**下。

```
 @CucumberOptions(
        format = {"pretty", "html:target/html"},
        features = {"classpath:features/feature.feature"},
        snippets = SnippetType.CAMELCASE 
```

注意**类路径**。

如果您使用 maven 编译代码时打开**target/test-classes/features**，您将看到**feature.feature**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-24T07:31:26.660

如果您提供功能文件的完整路径，即

“C:/Users/sarthak.dayanand/Documents/WebRefreshTest/CukeAutomation/LebaraWebAutomationTest1/src/main/resources”在您的查询中，再试一次，用“\\”（双反斜杠）替换“/”字符，如下所示.

"C:\\Users\\sarthak.dayanand\\Documents\\WebRefreshTest\\CukeAutomation\\LebaraWebAutomationTest1\\src\main\\resources\\abc.feature"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-02T05:56:32.117

这是一个使用最新黄瓜版本的 git repo：[Cucumber- 示例](https://github.com/cucumber/cucumber-java-skeleton)

克隆这个 repo 并在你的本地机器上运行它。已`@Given`定义，它应该通过。`@Then`and`@When`应该显示为未定义。

它的输出应该是这样的： [Belly 功能的输出](https://i.stack.imgur.com/pNmvB.png)

使用提到的结构： `src / test / java/ io /cucumber /`{Step definitions java and run cucumber test files here} `src /test / resources/ io/ cucumber /`{feature files here}

您可以运行 gradle build using`./gradlew clean build` 和 cucumber test using`./gradlew clean test --info`

如果这可行，那么在您的项目中使用相同的格式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-28T09:54:28.340

```
@RunWith(Cucumber.class)
@CucumberOptions(
    features = {"src/main/resources/cucumber/features"},//your feature path
    tags = "not @Wip",
    glue = {"classpath:steps"},
    plugin = {"pretty", "html:target/cucumber/html"}) 
```

您必须正确设置功能目录

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-04T12:29:25.733

还有另一个发生“未找到功能”错误的实例。我在这个答案下发布了解决方案，因为没有类似的问题。

在 Maven 中设置 Cucumber 项目后第一次尝试运行 Runner 文件时出现此错误。我找到的解决方案如下：转到 Windows 资源管理器中存在“功能”文件的文件夹。检查您尝试运行的功能文件的大小。如果大小为“0”KB，则会显示“未找到功能”错误。对文件进行一些更改，直到显示大于零的值。进行更改后再次运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-27T12:13:30.037

只需将**.F**特征更改为**.f**特征，问题就为我解决了。

还要确保根据您的功能文件夹在**CucumberOptions中正确提及功能的路径**

网上的一些教程都有提到。**带来**这个问题的功能

所以改变大小写将解决这个问题

[![在此处输入图像描述](../Images/d82a46d9f24b951e467a5654fec4c397.png)](https://i.stack.imgur.com/6ypi4.png)

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2017-04-07T11:29:34.140

通过将功能文件放在**src/test/java**下运行程序和步骤文件的位置，或者将其放在**src/main/java**下，问题将得到解决。

# c++ - STL 容器类型作为模板参数

> ID：14437717
> 
> 赞同：5
> 
> 时间：2013-01-21T11:32:48.667
> 
> 标签：c++, c++11

我想创建在内部使用特定容器来确定不同类型的通用类模板。像这样的东西：

```
#include <vector>
#include <list>
template< typename F, template< class ... > class container_type = std::vector >
struct C
{
    C();
    template< typename U >
    C(container_type< U >);
    C(container_type< F >);
    C(container_type< int >);
    container_type< double > param;
};
C< unsigned, std::list > c; 
```

最自然的方法是什么？比如说，您是否想以任何形式提及容器分配器的存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:01:10.257

像这样的东西？

```
template< typename F, template<class T, class = std::allocator<T> > class container_type = std::vector >
struct C
{
    C() {}
    template< typename U >
    C(container_type< U >) {}
    C(container_type< F >) {}
    C(container_type< int >) {}

    container_type< double > param;
};

C< unsigned, std::list > c; 
```

**编辑：**

使用类似但更简单的方法，该方法`std::queue`由将在内部使用的容器类型参数化。希望这能证明这种方法是很自然的。上面的示例在 VC++10 中进行了测试，并展示了如何处理分配器。

# javascript - jquerymobile 弹出功能在 onClick 中不起作用

> ID：14437718
> 
> 赞同：0
> 
> 时间：2013-01-21T11:32:49.347
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我有：

```
<div data-role="page" class="type-interior">
    <div data-role="content" class="ui-body">
        <a href="#transitionExample" data-role="button" data-rel="popup">
          Pop Up
        </a>
        <div data-role="popup" id="transitionExample">This is a POP UP.</div>
        <a href=# onClick="$('transitionExample').popup('open')"
        data-rel="popup">OpenPopUp</a>
    </div>
</div> 
```

如果我单击 Button It Works，但如果我使用 Javascript 方法 .popup('open')，则不会发生任何事情。不显示弹出窗口。

怎么了？我使用 JqueryMobile 1.2.0 和 JQuery 1.8.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T11:34:30.177

```
$('transitionExample').popup('open') 
```

应该

```
$('#transitionExample').popup('open') 
```

欲了解更多信息，请参阅：[http ://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

那么你最好在 .ready() 中绑定你的链接，你应该尽量避免在 .ready() 中使用`Javascript`代码以`DOM`获得更好的可维护性。

```
 <a href='#' id='myButton' data-rel="popup">OpenPopUp</a> 
```

在你的`<script></script>`标签之间

```
$(function () {
    $("#myButton").click(function () {
        $('#transitionExample').popup('open');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:55:15.730

我在试图找到完全相同行为的原因时遇到了这个线程 - 单击 data-rel='popup' 链接正在工作，但 popup() 方法没有显示任何内容。在经历了很多挫折之后，我最终发现问题归结于我编码的事实

```
$('#popupid').popup(open) 
```

没有报价！没有人抱怨 - Chrome 没有抛出错误，但弹出调用什么也没做。

希望有一天，这将对其他人有所帮助。

# javascript - json数组到phonegap中的javascript

> ID：14437721
> 
> 赞同：1
> 
> 时间：2013-01-21T11:33:07.833
> 
> 标签：javascript, jquery, ajax, json, cordova

```
<script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
<script type="text/javascript" src="docs/assets/js/jquery.jsonp.js"></script>
<script> 
     $(document).ready(function(){
            var output = $('#output');
            $.ajax({
                url: 'http://musi.php/?oper=getds&dev_id=f587&cur_id=2',
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                timeout: 5000,
                success: function(data, status){
                    $.each(data, function(i,item){ 
                        var landmark ='<h1>'+item.Nick_Name+'</h1>';
                        output.append(landmark);
                    });
                },
                error: function(){
                    output.text('There was an error loading the data.');
                }
            });
        });
</script> 
```

我有一个 url（例如）及其 json 值如下：

```
{"RetVal":"Ok","ValueRsp":[{"Feedback_Id":"22","Customer_Id":"543","Feedback_Type_Id":"1","First_Name":"Tester Tester","Last_Name":"NA","Nick_Name":"Xgcfyxfu"}]}

error: invalid label
Line 1 [Break On This Error] 
{"RetVal":"Ok","ValueRsp":[{"Feedback_Id":"22","Customer_Id":"543","Feedback_Typ... 
```

我需要解析它并在我的应用程序中使用它。我是 javascript 新手。好心的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:35:44.023

您可以使用 jQuery.parseJSON

**[现场演示](http://jsfiddle.net/rajaadil/evvZq/1/)**

```
jsonobj = $.parseJSON('{"RetVal":"Ok","ValueRsp":[{"Feedback_Id":"22","Customer_Id":"543","Feedback_Type_Id":"1","First_Name":"Tester Tester","Last_Name":"NA","Nick_Name":"Xgcfyxfu"}]}');
alert(jsonobj.RetVal);
alert("jsonobj.ValueRsp[0].Customer_Id: " + jsonobj.ValueRsp[0].Customer_Id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:35:54.933

一点点谷歌搜索就可以了......

```
var obj = JSON.parse(yourString);
// now use obj.RetVal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:36:55.603

您可以使用以下功能：

```
var json_obj = JSON.parse("correct_json_format_string"); 
```

现在您可以使用 json_object 访问所有属性：

```
var return_value = json_obj.RetVal; 
```

希望有帮助。

# c# - 获取不在项目路径中的文件/文件夹的完整路径

> ID：14437723
> 
> 赞同：-2
> 
> 时间：2013-01-21T11:33:13.670
> 
> 标签：c#, winforms

我正在尝试获取位于 location 的文件/文件夹的完整路径

> D://Sachin//报告//excel.xls

但是当我打电话给我时`Path.getfullpath("excel.xls")`，它会返回我的位置

> C:\users\Projname\bin\debug\etc.

我需要的是它在项目中定位的路径以外的路径，因为我需要在我的数据源连接字符串中提供该路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:53:49.787

您将搜索系统上的所有文件，直到找到“excel.xls”。这将花费很长时间，甚至不能保证您找到正确的“excel.xls”。不要这样做。

我会推荐以下解决方案之一：

1.  使用恒定的完整路径。例如，该文件必须位于“C:\excel.xls”。

2.  使用恒定的相对路径。例如，该文件必须与可执行文件位于同一目录中。

3.  将路径存储在某种配置文件中，例如注册表。

4.  从用户处获取路径，例如使用`OpenFileDialog`.

# magento - 如何在 Magento 中提供从结帐到支付网关的折扣费用

> ID：14437728
> 
> 赞同：1
> 
> 时间：2013-01-21T11:33:35.513
> 
> 标签：magento

magento 在哪里获取总计和小计，同时将金额从结帐到支付网关？

我想从 magento 结帐中为每个订单扣除（每种付款方式的一些金额）。所以我写了一个观察者来扣除 Magento 中的每个订单的费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:37:55.017

您可以使用magento 内置功能的**购物车价格规则**轻松设置基于**付款方式的折扣费用。查看此 magento wiki**[链接](http://www.magentocommerce.com/knowledge-base/entry/what-are-shopping-cart-price-rules-and-how-do-i-use-them)

 **该链接描述了如何设置购物车价格规则。**

# xml - 从 xml 数据类型字段中提取数据

> ID：14437732
> 
> 赞同：0
> 
> 时间：2013-01-21T11:33:42.920
> 
> 标签：xml, tsql, types, field, record

我有一个数据以 xml 数据类型值存储在其中的字段：

```
<Inning xmlns="" ID="2866433" Company="Hamfekran">
    <Test ID="rs232lon">
        <Param Name="corel" Value="0.00000" />
        <Param Name="co2rel" Value="10.8000" />
        <Param Name="hcrel" Value="111.000" />
        <Param Name="o2rel" Value="0.95000" />
    </Test>   
    <Test ID="9" Name="CustomData">
        <param Name="TireFront" Value="3.00" />
        <param Name="TireBack" Value="2.00" />
    </Test>
</Inning> 
```

我怎么能得到这样的 TSQL 的结果：

```
corel       co2rel        hcrel        o2rel     TireFront      TireBack
-----------------------------------------------------------------------------       
0.00000     10.8000       111.000     0.95000       3.00          2.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:52:01.263

```
DECLARE @CocoJambo TABLE (
    ID INT IDENTITY PRIMARY KEY,
    XmlColumn XML NOT NULL
);

INSERT  @CocoJambo (XmlColumn)
VALUES  (N'<Inning xmlns="" ID="2866433" Company="Hamfekran">
    <Test ID="rs232lon">
        <Param Name="corel" Value="0.00000" />
        <Param Name="co2rel" Value="10.8000" />
        <Param Name="hcrel" Value="111.000" />
        <Param Name="o2rel" Value="0.95000" />
    </Test>   
    <Test ID="9" Name="CustomData">
        <param Name="TireFront" Value="3.00" />
        <param Name="TireBack" Value="2.00" />
    </Test>
</Inning>');

SELECT  a.*,
        b.c.value('(Test[@ID="rs232lon"]/Param[@Name="corel"]/@Value)[1]','NUMERIC(38,5)') AS corel,
        b.c.value('(Test[@ID="rs232lon"]/Param[@Name="co2rel"]/@Value)[1]','NUMERIC(38,5)') AS co2rel,
        b.c.value('(Test[@ID="rs232lon"]/Param[@Name="hcrel"]/@Value)[1]','NUMERIC(38,5)') AS hcrel,
        b.c.value('(Test[@ID="rs232lon"]/Param[@Name="o2rel"]/@Value)[1]','NUMERIC(38,5)') AS o2rel,

        b.c.value('(Test[@ID="9"]/param[@Name="TireFront"]/@Value)[1]','NUMERIC(38,5)') AS TireFront,
        b.c.value('(Test[@ID="9"]/param[@Name="TireBack"]/@Value)[1]','NUMERIC(38,5)') AS TireBack
FROM    @CocoJambo a
CROSS APPLY a.XmlColumn.nodes('/Inning') AS b(c) 
```

参考：

[SQL Server 中的 XML 方法](http://www.simple-talk.com/sql/learn-sql-server/the-xml-methods-in-sql-server/)

[nodes() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms188282.aspx)

[value() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms178030.aspx)

[xml 数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798.aspx)

# nginx - Rails 生产 - 新部署后所有图片都损坏了

> ID：14437733
> 
> 赞同：7
> 
> 时间：2013-01-21T11:33:56.147
> 
> 标签：nginx, ruby-on-rails-3.2, carrierwave, ubuntu-12.04, unicorn

我跟随[Ryan 的截屏视频](http://railscasts.com/episodes/335-deploying-to-a-vps)并部署到 VPS。所以我使用 Unicorn + nginx + github + Ubuntu 12.04 LTS + capistrano。我也使用 i18n 来翻译应用程序。

我还想注意我使用[Carriarewave](https://github.com/jnicklas/carrierwave)进行图片上传。Carriarewave 将图片保存在本地 VPS 上。当我上传图片时效果很好，上传的图片就会出现。

但是每次当我将新的更改部署到服务器时，我的所有图片都会损坏。实在是太可怕了。我尝试手动重启nginx：

```
sudo service nginx restart 
```

我试图重新启动独角兽：

```
/etc/init.d/unicorn_Chirch_app restart 
```

它也没有帮助。

当我尝试手动打开损坏的页面时，它说：

```
The page you were looking for doesn't exist.
You may have mistyped the address or the page may have moved. 
```

当我尝试在控制台中查找图片时：

```
> Photo.all
> => [#<Photo id: 3, description: nil, created_at: "2013-01-21 11:14:01", updated_at: "2013-01-21 11:14:01", image: "1320700703588.jpg">, #<Photo id: 4, description: nil, created_at: "2013-01-21 11:14:01", updated_at: "2013-01-21 11:14:01", image: "Seasonscape_by_alexiuss.jpg">, #<Photo id: 5, description: nil, created_at: "2013-01-21 11:30:30", updated_at: "2013-01-21 11:30:30", image: "Seasonscape_by_alexiuss.jpg">] 
```

据我了解，它们应该存在。

日志中的错误：

```
Started GET "/ru/uploads%2Fphoto%2Fimage%2F4%2FSeasonscape_by_alexiuss" for 89.178.205.47 at 2013-01-21 11:31:17 +0000

ActionController::RoutingError (No route matches [GET] "/ru/uploads%2Fphoto%2Fimage%2F4%2FSeasonscape_by_alexiuss"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing'
  unicorn (4.5.0) lib/unicorn/http_server.rb:552:in `process_client'
  unicorn (4.5.0) lib/unicorn/http_server.rb:628:in `worker_loop'
  unicorn (4.5.0) lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
  unicorn (4.5.0) lib/unicorn/http_server.rb:511:in `maintain_worker_count'
  unicorn (4.5.0) lib/unicorn/http_server.rb:277:in `join'
  unicorn (4.5.0) bin/unicorn:121:in `<top (required)>'
  /home/deployer/apps/My_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
  /home/deployer/apps/My_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>' 
```

我的**配置/deploy.rb**

```
require "bundler/capistrano"

server "my_ip_here", :web, :app, :db, primary: true

set :application, "My_app"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:MyName/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:54:18.590

好的，我找到了解决方案。出现问题是因为我没有更改默认文件夹以保留图像。您可以在 中找到您的默认文件夹`public/uploads`。这意味着每个`cap deploy`人都会创建一个新的空文件夹，其中不包含您的旧文件。

要解决此问题，您应该创建另一个不在您的应用程序中的文件夹。我选择最简单的方法。我创建了符号链接。

我的步骤：

1）在您的服务器上转到您的应用程序的共享文件夹（它通过 capistrano 自动生成）。然后创建您的文件夹以保留新图像：

```
$ mkdir uploads 
```

2) 为创建的文件夹赋予必要的权限：

```
$ sudo chmod 775 uploads 
```

3) 在本地机器上的 config/deploy.rb 添加：

```
task :symlink_config, roles: :app do
  ...
  run "ln -nfs #{shared_path}/uploads #{release_path}/public/uploads"
end 
```

4）然后推送git并部署：

```
$ git push
$ cap deploy:symlink
$ cap deploy 
```

现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:34:34.520

好一个！我已经扩展了你的 capistrano 食谱。

```
# config/recipes/carrierwave.rb

namespace :carrierwave do 
  task :uploads_folder do
    run "mkdir -p #{shared_path}/uploads"
    run "#{sudo} chmod 775 #{shared_path}/uploads"
  end
  after 'deploy:setup', 'carrierwave:uploads_folder'

  task :symlink do 
    run "ln -nfs #{shared_path}/uploads #{release_path}/public/uploads"
  end
  after 'deploy', 'carrierwave:symlink'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-15T08:33:13.717

@ExiRe 和 @Charlie 回答适用于 Capistrano 2.x。在 Capistrano 3.x 中， command **run**替换为 command **execute**。

所以，我通过以下步骤解决了这个问题：

1.  在目录中创建一个 rake 文件，`lib/capistrano/tasks/carrierwave.rake`内容如下：

```
命名空间：carrierwave 做
  任务：uploads_folder 做
    在角色（：应用程序）上做
      执行“mkdir -p #{shared_pa​​th}/uploads”
      执行“#{sudo} chmod 775 #{shared_pa​​th}/uploads”
    结尾
  结尾

  任务：符号链接做
    在角色（：应用程序）上做
      执行“ln -nfs #{shared_pa​​th}/uploads #{release_path}/public/uploads”
    结尾
  结尾
结尾

```

2.  `Capfile`如果没有 ，请在您的末尾添加以下行。`Dir.glob('lib/capistrano/tasks/*.rake').each { |r| import r }`

3.  将这些任务`config/deploy.rb`与其他任务一起添加。

*   `after 'deploy:publishing', 'carrierwave:uploads_folder'`
*   `after 'deploy:publishing', 'carrierwave:symlink'`

```
命名空间：部署做
  ..
  在'部署：发布'之后，'carrierwave：uploads_folder'
  在“部署：发布”之后，“载波：符号链接”
  ..
结尾

```

4.  推送 git 并部署

`shared/uploads`现在，即使是新部署，您上传的图像也将保存在文件夹中。

# android - 使用 BeanShell 启动的 robotsium 进行 Android 测试

> ID：14437735
> 
> 赞同：0
> 
> 时间：2013-01-21T11:34:00.890
> 
> 标签：android, android-emulator, robotium, beanshell

我对 beanshell 有疑问。我想创建一个 BeanShell 脚本，让我可以自动化 Robotium 测试。

我有一个可以工作的 shell 脚本，让我可以做任何我想做的事情，但我正在寻找 Beanshell 等价物：

* * *

```
#!/bin/bash

echo "on lance l'AVD"
emulator -avd test &

echo "wait the end of launch"
sleep 15

echo "Installation of the application under test"
adb install -r /home/marie/workspace/AndroidCalculator/bin/AndroidCalculator.apk

echo "Installation of the test application"
adb install -r /home/marie/workspace/TestProject/bin/TestProject.apk

echo "Launch of test"
adb shell am instrument -w com.calculator.test/com.neenbedankt.android.test.InstrumentationTestRunner

echo "Saving file results"
adb pull data/data/com.calculator/files/TEST-all.xml ./resultats.xml

echo "killing the AVD"
adb emu kill 
```

* * *

如何通过 BeanShell，我可以运行预先制作的脚本，或者当通过任何其他方式获得等效结果时，您可以建议我。

我正在寻找3天的答案，但我没有任何结论

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:13:21.117

玛丽，

你可以看看与詹金斯集成你的机器人项目。它是一个构建部署工具。它有允许控制android测试的插件。看看下面的链接： [http ://dnlkntt.wordpress.com/2012/08/02/robotium-jenkins-and-ant/](http://dnlkntt.wordpress.com/2012/08/02/robotium-jenkins-and-ant/)

它对我自动化测试执行过程帮助很大。

# visual-studio-2012 - 每次在 Visual Studio 中保存文件时，如何运行 Rake 任务？

> ID：14437741
> 
> 赞同：2
> 
> 时间：2013-01-21T11:34:19.970
> 
> 标签：visual-studio-2012, rake

每次在 Visual Studio 中保存文件时，如何自动运行 rake 脚本？我可以创建一个包装命令的批处理文件。我想触发它`CTRL + S`​​。但是，Visual Studio 2012 没有宏。

[JP Boodhoo](http://www.developwithpassion.com/)在他的许多屏幕截图中都这样做了，但没有分享实现。

* * *

仅供参考，我的`rakefile`长相是这样的

```
require 'albacore'

desc 'Build Solution'
msbuild :Build do |msb| 
  msb.properties :configuration => :Release 
  msb.targets :Clean, :Build 
  msb.solution = 'ProjoBot.sln' 
end 

desc 'Run Unit Tests' 
mspec :Test do |mspec| 
  mspec.command = 'Lib/Tools/MSpec/mspec-clr4.exe' 
  mspec.assemblies 'Src/Tests/ProjoBot.UnitSpecifications/bin/Release/ProjoBot.UnitSpecifications.dll'
end 

task :default => [:Build, :Test] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:23:02.310

可能有一些与命令行集成的选项不了解 Visual Studio。

## 红宝石/守卫方式

昨晚我在玩[Guard gem](https://github.com/guard/guard#readme)。您基本上安装了 Guard 和[Guard rake 插件](https://github.com/rubyist/guard-rake#readme)。

```
gem install guard
gem install guard-rake 
```

您可以创建一个 Guard “模板”，其中`Guardfile`包含一个普通的 Rake 任务

```
guard init rake 
```

例如，您可以对其进行编辑以查看`.cs`目录中的文件`source`。（和

```
guard 'rake', :task => 'default', :run_on_start => false do
  watch(%r{^source/.+\.cs$})
end 
```

然后启动Guard

```
guard 
```

您可能需要使用`-i`关闭此“交互”模式，这可能会在 Windows 上产生错误！

```
guard -i 
```

Guard 像一个小型本地服务器一样运行，显示日志

```
12:07:08 - INFO - Guard uses TerminalTitle to send notifications.
12:07:08 - INFO - Starting guard-rake default
12:07:08 - INFO - Guard is now watching at 'D:/temp'
[1] guard(main)> 
```

如果您强制更改文件（我将转到`touch`我在测试目录中设置的假文件），您将获得 rake 任务的输出！

```
12:07:08 - INFO - Guard uses TerminalTitle to send notifications.
12:07:08 - INFO - Starting guard-rake default
12:07:08 - INFO - Guard is now watching at 'D:/temp'
12:07:54 - INFO - running default
building!...
[1] guard(main)> 
```

## PowerShell 方式

没有什么花哨的东西可以包含文件系统轮询触发的操作，但这并不意味着您不能构建自己的！我写了一个`.\guard.ps1`位于我的解决方案根目录中的文件。它有一个[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/x7t1d0ky.aspx)并等待循环中的变化。

```
$here = Split-Path $MyInvocation.MyCommand.Definition

$watcher = New-Object System.IO.FileSystemWatcher
$watcher.Path = "$here\source"
$watcher.IncludeSubdirectories = $true

while($true) {
  # timeout here lets the console process kill commands and such
  $result = $watcher.WaitForChanged('All', 3000)

  if($result.TimedOut) {
    continue
  }

  # this is where you'd put your rake command
  Write-Host "$($result.ChangeType):: $($result.Name)"

  # and a delay here is good for the CPU :)
  Start-Sleep -Seconds 3
} 
```

当您`touch`或创建 ( `New-Item <name> -Type File`) 文件时，您可以看到它正在工作和打印。但是，我们也可以非常简单地执行 rake

```
rake 
```

PowerShell 将继续并将其作为本机命令执行。你可以花点心思让这个脚本看起来和感觉更像 Guard（好吧，不是更多，而是一点点！）

```
param(
  [string] $path = (Split-Path $MyInvocation.MyCommand.Definition),
  [string] $task = 'default'
)

$watcher = New-Object System.IO.FileSystemWatcher
$watcher.Path = $path
$watcher.IncludeSubdirectories = $true

while($true) {
  $result = $watcher.WaitForChanged('All', 3000)

  if($result.TimedOut) {
    continue
  }

  rake $task

  Start-Sleep -Seconds 3
} 
```

你会像这样执行它

```
.\guard.ps1 -Path "$pwd\source" -Task 'build' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:13:57.907

我使用外部工具来运行一个执行默认 Rake 任务的批处理文件。

```
@ECHO OFF
rake 
```

我为工具分配了快捷键`CTRL + S`，这样，当我保存时，就会触发 rake 任务！我希望这对希望做同样事情的人有所帮助。

# api - 根据 WSO2 Identity Server 提供的令牌获取用户信息

> ID：14437742
> 
> 赞同：0
> 
> 时间：2013-01-21T11:34:19.407
> 
> 标签：api, wso2, wso2is

如何根据 WSO2 Identity Server 提供的令牌获取用户信息？

我想向用户打印一条自定义欢迎消息，但除了访问令牌之外我什么都没有。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:06:49.580

我看到在 WSO2 Identity Server 中有一个 OpenId Connect 的实现，它允许从 OAuth 访问令牌中获取用户信息，但它只在 4.1.1 版本中（尚未发布，我希望它会尽快发布）。更多信息在这里：[http ://sureshatt.blogspot.fr/2013/03/openid-connect-basic-client-profile.html](http://sureshatt.blogspot.fr/2013/03/openid-connect-basic-client-profile.html)

您还可以使用 OAuth2TokenValidationService ：当您在令牌上调用 validate 函数时，与该令牌关联的用户名将在答案中发送（有关此服务的更多信息，请参阅 OAuth2TokenValidationService.wsdl：[https ://svn.wso2.org /repos/wso2/carbon/platform/branches/4.0.0/service-stubs/org.wso2.carbon.identity.oauth.stub/4.0.3/src/main/resources/OAuth2TokenValidationService.wsdl](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/service-stubs/org.wso2.carbon.identity.oauth.stub/4.0.3/src/main/resources/OAuth2TokenValidationService.wsdl)）

OAuth2TokenValidationService 在 WSO2 Identity Server 4.1.0 版本中可用

# java - 如何覆盖android中的操作栏后退按钮？

> ID：14437745
> 
> 赞同：99
> 
> 时间：2013-01-21T11:34:30.343
> 
> 标签：java, android

我想在操作栏中自定义活动后退按钮，而不是在硬键后退按钮中。我已经覆盖了该`onBackPressed()`方法。它适用于我的模拟器后退按钮，但不适用于操作栏后退按钮。

我希望它发生在操作栏上。我怎样才能做到这一点？

这是我的代码：

```
@Override
public void onBackPressed() {
    Toast.makeText(getApplicationContext(),"Back button clicked", Toast.LENGTH_SHORT).show(); 
    return;
} 
```

无论后按是否有效，我都使用了这个 toast，但实际的实现发生了变化，比如回到以前的活动。但这不适用于操作栏顶部的按钮（除了活动的标题）。

请任何人都可以指定我的问题。

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-01-21T11:38:46.137

我想你想覆盖主页按钮的点击操作。您可以在活动中像这样覆盖此功能。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        Toast.makeText(getApplicationContext(),"Back button clicked", Toast.LENGTH_SHORT).show(); 
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-01-06T22:02:35.770

如果您希望 ActionBar 后退按钮的行为方式与硬件后退按钮相同：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
            if (item.getItemId() == android.R.id.home) {
                    onBackPressed();
                    return true;
            }
            return false;
    } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-13T16:14:25.827

要记住两件事，用户可以按返回按钮或按操作栏主页按钮。
所以，如果你想将他重定向到同一个目的地，那么你可以这样做。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            onBackPressed();
            return true;
    }
    return false;
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    Intent intent = new Intent(CurrentActivity.this, NextActivity.class);
    startActivity(intent);
    finish();
} 
```

这将使用户按任意键或操作栏按钮进入意图。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-06-11T10:24:41.083

抱歉，我的回答迟了，但对于其他到达此页面且有相同问题的人，我已经尝试了上述方法：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
  ...
  if (item.getItemId() == android.R.id.home) {
    ....
  }
  ....
} 
```

但这未能抓住“返回”按钮的按下。

最终，我在[https://stackoverflow.com/a/37185334/3697478](https://stackoverflow.com/a/37185334/3697478)上找到了一种对我有用的方法，即在我使用“AppCompatActivity”支持库中的操作栏时覆盖“onSupportNavigateUp()”。（对于较新的操作栏/工具栏库，有一个等效的“onNavigateUp()”。）

```
@Override
public boolean onSupportNavigateUp(){  
  finish();  
  return true;  
} 
```

我从清单文件中删除了“android:parentActivityName=".MainActivity" 部分。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-07T07:49:01.963

```
 @Override
        public boolean onOptionsItemSelected(MenuItem item) {
                switch (item.getItemId()) {
                case android.R.id.home:
                       finish();
                   break;
                }
                return true;
        } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-24T06:58:22.743

我通过简单的两个步骤实现了这一点，

第 1 步：转到 AndroidManifest.xml 并在标签中添加参数 - android:parentActivityName=".home.HomeActivity"

例子 ：

```
 <activity
    android:name=".home.ActivityDetail"
    android:parentActivityName=".home.HomeActivity"
    android:screenOrientation="portrait" /> 
```

第 2 步：在 ActivityDetail 中为上一页/活动添加您的操作

例子 ：

```
 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
       case android.R.id.home:
           onBackPressed();
           return true;
    }
    return super.onOptionsItemSelected(item);
 } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-22T18:16:09.317

（1）为您的子活动添加父活动（AndroidManifest.xml）

```
<activity
        android:name=".ParentActivity" /> 
```

(2)覆盖子activity内部的onSupportNavigateUp方法

```
@Override
public boolean onSupportNavigateUp() {
    onBackPressed();
    return false;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-15T08:55:32.843

如果您想通过按下 ActionBar 主页按钮返回到**Activity 的上一个实例，****而不重新创建**它，您可以覆盖 getParentActivityIntent 方法以使用后堆栈中的一个：

```
@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
@Override
public Intent getParentActivityIntent() {
      return super.getParentActivityIntent().addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
} 
```

编辑：您也可以通过将父活动的启动模式 设置为**singleTop**
来实现相同的结果**。** 因此，在清单中设置为父活动。 或者，您可以将标志 FLAG_ACTIVITY_CLEAR_TOP 与 UP 意图一起使用。 参考：[提供向上导航](https://developer.android.com/training/implementing-navigation/ancestral.html)
 ****`android:launchMode="singleTop"`**** 

 ***** * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-19T12:03:47.720

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle action bar item clicks here. The action bar will
    // automatically handle clicks on the Home/Up button, so long
    // as you specify a parent activity in AndroidManifest.xml.
    int id = item.getItemId();
    if (id == android.R.id.home) {
        onBackPressed();
        return true;
    }
    //noinspection SimplifiableIfStatement
    if (id == R.id.signIn) {
        return true;
    }

    return super.onOptionsItemSelected(item);
}
///////////////////
@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-02T13:18:34.940

有几种方法可以在 bar 中设置返回按钮：

1）方法`.setDisplayHomeAsUpEnabled(true);`会做到这一点，然后你可以简单地覆盖`android.R.id.home`

2) 添加`<meta-data android:name="android.support.PARENT_ACTIVITY" android:value="my.package.parrent" />`Android Manifest，但在这种情况下，您**不能**`android.R.id.home`在 OnOptionsMenuSelected 中覆盖。

..对于那些想知道为什么它对他们不起作用的人...****

# r - 栅格包绘图功能的命名空间问题？

> ID：14437750
> 
> 赞同：3
> 
> 时间：2013-01-21T11:34:53.540
> 
> 标签：r, namespaces, raster

我在使用“光栅”包的“绘图”功能时遇到了一个奇怪的问题。

```
library(raster)
ras <- raster(ncol=10, nrow=10) 
```

编辑

```
values(ras) <- runif(ncell(ras)) 
```

结束编辑

```
plot(ras)

Erreur dans as.double(y) : 
cannot coerce type 'S4' to vector of type 'double' 
```

对于我在网上阅读的内容，此错误取决于用户，并且可能取决于加载的包。就我而言，问题来自于 r 使用 'graphics' 包中的标准 'plot' 方法，而它应该使用特定的 'raster' 方法，因为 'ras' 是 rasterLayer 对象。但是，由于我不明白的原因，'plot' 没有导入到 'raster' 命名空间中，而所有其他函数都是。

```
> raster::plot
Erreur : 'plot' n'est pas un objet exporté depuis 'namespace:raster' 
```

与之比较：

```
raster::persp
standardGeneric for "persp" defined from package "graphics"
function (x, ...) 
standardGeneric("persp")
<environment: 0x0cd9eb80>
Methods may be defined for arguments: x
Use  showMethods("persp")  for currently available ones. 
```

由于我不完全了解命名空间的行为方式，因此我正在寻求您的帮助！这种情况你是不是很熟悉，你有办法解决吗？同时，您是否知道显示命名空间内容的功能（这样我可以逐步检查栅格命名空间的内容）？

PS：我在 RStudio 中使用 R 2.15.2，加载了许多包，但都是最新的。

```
sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=French_Belgium.1252  LC_CTYPE=French_Belgium.1252          LC_MONETARY=French_Belgium.1252 LC_NUMERIC=C                   
[5] LC_TIME=French_Belgium.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] raster_2.0-41 sp_1.0-5     

loaded via a namespace (and not attached):
 [1] grid_2.15.0      hexbin_1.26.0    intervals_0.13.3 lattice_0.20-6   rgdal_0.8-4      spacetime_1.0-3  spam_0.29-2      tools_2.15.0    
 [9] xts_0.9-2        zoo_1.7-9 
```

谢谢，

弗朗索瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:00:27.730

使用它，您可以获得包栅格的所有对象列表

```
basevals <- ls(pos="package:raster") 
```

例如

```
 which(basevals == 'persp')  ## function persp shows up because it is the exported generic.
   141
   which(basevals == 'plot')   ## no function plot
   integer(0) 
```

不，当我这样做时，它对我有用：

```
library(raster)
r <- raster(ncol=10, nrow=10)
values(r) <- runif(ncell(r))
plot(r, main='Raster with 100 cells') 
```

所以这里肯定有情节方法。它不在上一个列表“basevals”中，因为它是一种 S4 方法。

要获取光栅包的绘图方法，请尝试以下操作：

```
 getMethod('plot',signature=signature(x='Raster', y='ANY')) 
```

或更有效地使用

```
findMethods("plot", "package:raster"). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T07:24:27.633

当您有一个陈旧的会话（通常是由于在启动时加载旧会话引起）时，有时会发生这种情况，如果您启动一个新的 R 会话（不加载以前保存的会话），这种情况就会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-18T15:32:59.843

我有同样的问题并重新安装光栅包修复它。

```
install.packages("raster") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T22:35:58.723

对我来说，解决这个 S4 类命名空间问题的方法是将`raster`包添加为依赖项。因此，使用该`attach()`函数也应该起作用，因为这就是依赖项所做的。我知道这不是一个理想的解决方案，但是嘿，它是一种统计语言；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T14:14:18.600

我一直在同样的错误中运行，也使用 RStudio。

我的问题是我在我的项目文件中加载了包`raster`。但是 Rprofile 中的代码在其他任何内容之前被加载，因此包（包含绘图通用）在光栅之后加载，导致问题。`library(raster)``.Rprofile``graphics`

解决方案：将`library(graphics)`before`library(raster)`放在 Rprofile 中，它对我有用。

# symfony - 在没有 for 循环的情况下计算树枝

> ID：14437751
> 
> 赞同：2
> 
> 时间：2013-01-21T11:34:54.257
> 
> 标签：symfony, twig

我想计算结果。我已经像总组结果和总结果一样完成了一个产品....

喜欢：-

总产品组 = 15

在一组显示 36 个产品。

在第二组显示 56 个产品。

我想显示总组产品结果 = 36+56 => 92。没有 for 循环。

树枝文件：

```
<table>
<h2> Showing {{ templates | length  }} Products</h2>

    {% for groupResults in templates %}
       {% if groupResults.doclist.docs[0].first_product_name is defined %}

            Show all {{ groupResults | length }} results

        <tr>
            <td>
            {{ groupResults.doclist.docs[0].first_product_name }}

            &nbsp;
            {% if groupResults.doclist.numFound > 4 %}
            <a href="{{ path("design_picker_catalog", { "productSlug": groupResults.doclist.docs[0].first_product_slug, "search": searchTerm }) }}" style="float:right">Show all {{ groupResults.doclist.numFound }} results</a>
            {% endif %}
            </td>
        </tr>

        <tr> 
        {% set count = 0 %}
        {% for template in groupResults.doclist.docs %}
            <td>
                <a href="{{ path("customer_design_editor", { "templateSlug": template.slug, "productSlug": template.product_slug[0] }) }}">
                    <img src="{{ path("design_template_thumbnail_by_slug", { "slug": template.slug}) }}" alt="" />
                </a>
            </td>
            {% set count = count + 1 %}
        {% endfor %}
        {% if count < 4 %}
        {% for i in count..3 %}
            <td>&nbsp;</td>
        {% endfor %}
        {% endif %}
    {% else %}
    {% endif %}     
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T20:05:07.947

怎么样：

```
{% set totalCount = firstGroup|length + secondGroup|length %} 
```

# blackberry - 如何设置日历的文本注释以单击并运行我的应用程序？

> ID：14437753
> 
> 赞同：0
> 
> 时间：2013-01-21T11:35:06.490
> 
> 标签：blackberry, calendar, onclicklistener

我想要这样，当我单击设备中安装的任何应用程序中的文本时，运行我的应用程序。就像您单击和 url 并自动运行浏览器一样。更具体地说，我需要单击日历的特定文本注释并运行我的应用程序。这可以做到吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:24:41.643

完成！

[https://developer.blackberry.com/java/documentation/ui_active_text_fields_1988859_11.html](https://developer.blackberry.com/java/documentation/ui_active_text_fields_1988859_11.html)中的一个完美示例

# java - JTextPane 仅在单行中显示插入的组件

> ID：14437756
> 
> 赞同：0
> 
> 时间：2013-01-21T11:35:14.560
> 
> 标签：java, jtextpane

我需要`JButtons`在`JTextPane`. 它是通过`insertComponent()`方法完成的。但有一个问题，组件在一条线上，`JScrollPane`既不垂直也不水平滚动（但我只想垂直滚动）。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:38:32.907

一个简单的解决方案是在按钮之间添加空格，这些空格允许`JTextPane`包裹按钮。

或者，您可以插入单个`JComponent`按钮并将按钮添加为该单个组件的子级。这将允许您对按钮使用任何您喜欢的布局（`FlowLayout`可能是您想要的）。

# jquery - jQuery Knockout - 动态添加和删除 html 属性

> ID：14437765
> 
> 赞同：2
> 
> 时间：2013-01-21T11:35:43.870
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin

我有一个看起来像这样的 html 元素：

```
<div data-bind="attr: { 'data-text': hasText && textMessage }"></div> 
```

Javascript

```
var viewModel = {
    hasText: ko.observable(false),
    textMessage: ko.observable()
}; 
```

我想要的是动态添加和删除“数据文本”属性并用属性值填充它`textMessage`。

现在，它输出的布尔结果`hasText && textMessage`：

```
<div data-text='0' /> 
```

或者

```
<div data-text='1' /> 
```

如何动态删除或添加属性并用数据填充它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:51:18.577

您需要创建一个计算的可观察属性，然后将其绑定到您的`data-text`属性：

```
var viewModel = {
    hasText: ko.observable(false),
    textMessage: ko.observable(),   
};
// the funny syntax is because viewModel is an object literal
viewModel.textAttr = ko.computed(function(){
        // you need to return null or undefinied then KO won't the attribute
        return viewModel.hasText() ? viewModel.textMessage() : null
}); 
```

然后您的绑定将如下所示：

```
<div data-bind="attr: { 'data-text': textAttr }">Div</div> 
```

演示[JSFiddle](http://jsfiddle.net/pp5Wz/)。

# android - 使用 Jenkins 和 SVN 时创建的随机 .r 文件

> ID：14437771
> 
> 赞同：1
> 
> 时间：2013-01-21T11:35:54.943
> 
> 标签：android, svn, build, jenkins, dropbox

我使用 Jenkins 从我的 Android 项目中获得了一个自动构建系统，该系统通过 SVN 同步。有时我会在工作区中添加新文件，我认为这些文件来自冲突的 SVN 进程。当资源文件夹中发生这种情况时，它会导致构建失败，因为文件扩展名被剥离并且存在名称空间冲突。

例如

```
 [aapt] res\drawable\icon.png.r584:0: error: Resource entry icon is already defined.
 [aapt] res\drawable\icon.png:0: Originally defined here.
 [aapt] res\drawable\icon.png.r588:0: error: Resource entry icon is already defined.
 [aapt] res\drawable\icon.png:0: Originally defined here. 
```

知道为什么我会得到这些 r584、r588 文件吗？可能更重要的是，我该如何阻止这种情况发生？

虽然 jenkins 构建是机器本地的，但我工作的原始 SVN 目录位于保管箱管理文件夹中（不要问！）。虽然我不认为这是一个问题，但我觉得我应该提到它，以防万一它确实有一个促成因素。

这些.r??? 我的原始源代码树或 SVN 结构中不存在文件，因此据我所知，只能通过 Jenkins 完成的 SVN 同步操作来制作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:56:38.450

它们看起来像冲突标记 - 当您合并时，如果它无法自动解决问题，它将在目录中放置 2 个临时文件，并将修订号作为文件扩展名的一部分。你应该使用 diff 应用程序来决定最终文件应该是什么样子，然后告诉 svn 你已经解决了冲突。然后 SVN 将删除旧的临时文件并让您提交更改。

您的提交今天将有垃圾 - 如果您查看同名文件，您会看到源代码中嵌入的差异标记。我很惊讶你可以提交，但我猜保管箱副本在某种程度上影响了这种情况 - 你是提交增量还是只是检查目录，就好像它是一堆新文件一样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:54:56.463

正如其他人所说，*.rNNN 是 SVN 合并冲突，其中 NNN 是冲突的修订号。同样，就像其他人所说的那样，Jenkins 必须是工作区的所有者，而不是其他东西。

让我试着在这里澄清一些事情。你说`"the original SVN directory I work in is inside a dropbox managed folder (don't ask!)."`。你是说：

a）您正在为 Jenkins 使用自定义工作区（您将不得不为此使用自定义工作区设置）
b）您（用户的）工作目录是一个保管箱管理的文件夹

如果 b) 为真，那没关系。但如果 a) 为真，这可能会导致各种问题。如果是这种情况，你真的需要让 Jenkins 管理自己的工作空间。是的，这可能意味着空间需求的两倍，但这是应该的方式。

现在，假设 Jenkins 的工作空间由 Jenkins 管理，它首先会尝试做的是`SVN Update`. 这绝不会导致合并问题（那些 *.rNNN 文件），除非某些东西正在修改工作空间。同样，如果 a) 点成立，请考虑为 Jenkins 提供自己的工作空间。构建本身可能正在修改工作区（我不熟悉 Android 构建或它对文件的作用）。

在任何一种情况下，您都想要做一个干净的 SVN 结帐。有两个选项适合您。

*   总是检查一个新的副本
*   在更新前使用 'svn revert' 尽可能使用 svn update

这两者都可以在作业配置中的“源代码管理”下的“签出策略”下找到。

第一个将清理 Jenkins 工作区并进行完整的结帐。这可能更长，但“更干净”。

第二个将尝试在进行 SVN 更新之前恢复对工作区的任何本地更改，从而消除合并冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:57:20.410

AFAIK，* .r### 文件就像你建议的那样，当与被检出的内容发生冲突时。（我试图找到一个好的参考，但没有。不过我自己也看过。）

由于这些通常发生在结帐时发生冲突时，因此我会考虑一些事情来解决这个问题。

1.  确保在 Jenkins 工作区中签出的文件没有被修改。如果它们应该被该过程修改，您可能需要查看[强制 SVN checkout to overwrite](https://stackoverflow.com/questions/312491/force-an-svn-checkout-command-to-overwrite-current-files)的答案。
2.  检查目录的权限与运行 Jenkins 的用户的权限。

一般来说，Jenkins 应该是工作区的所有者和唯一的操作者，以处理它正在运行的任何作业。

# html - 为 Google Maps V3 应用标记管理器

> ID：14437772
> 
> 赞同：0
> 
> 时间：2013-01-21T11:35:58.560
> 
> 标签：html, google-maps-api-3, google-maps-markers, markermanager

我创建了一个自定义地图，显示基于数组中保存的位置数据的标记。现在我正在尝试应用标记管理器，因为一些标记靠得很近，可能会导致混淆或可用性问题。

我真的很感激一些帮助，我不确定为什么标记没有显示在地图上，我可能将标记管理器代码放在错误的位置。

完整代码如下：

```
(function() {
var map, infowindow, marker;

//Create an array literal to store the weather icons
window.onload = function() {

    //Creating a map
    var options = {
        zoom:   2,
        center:     new google.maps.LatLng(25,25),
        mapTypeId:  google.maps.MapTypeId.ROADMAP
    };

     map = new google.maps.Map(document.getElementById('map'),options);

     var mgr = new MarkerManager(map);  

     var markers = [];        
     var locationIcons = [];

     //Add the factory icon
     locationIcons['factory'] = new google.maps.MarkerImage(
        'images/factory.png',
        new google.maps.Size(32.0, 37.0),
        null,
        new google.maps.Point(16.0, 18.0)
     );
     locationIcons['factoryHover'] = new google.maps.MarkerImage(
        'images/factory_over.png',
        new google.maps.Size(32.0, 37.0),
        null,
        new google.maps.Point(16.0, 18.0)
     );

     locationIcons['office'] = new google.maps.MarkerImage(
        'images/office.png',
        new google.maps.Size(32.0, 37.0),
        null,
        new google.maps.Point(16.0, 18.0)
     );
     locationIcons['officeHover'] = new google.maps.MarkerImage(
        'images/office_over.png',
        new google.maps.Size(32.0, 37.0),
        null,
        new google.maps.Point(16.0, 18.0)
     );     

     locationIcons['shadow'] = new google.maps.MarkerImage(
        'images/shadow.png',
        new google.maps.Size(51.0, 37.0),
        null,
        new google.maps.Point(16.0, 18.0)
     );           

     var locationData = {'location': [
     {
         'lat': 52.579924,
         'lng': -0.208772,
         'type': 'office',
         'title': 'xxxx',
         'addressl1': 'xxxx',
         'addressl2': '',
         'city': 'Peterborough',
         'pcode': 'PE1 5TP<br />United Kingdom',             
         'tel': 'xxxx',
         'url': 'www.abc.com'

     },
     {
         'lat': -25.522005,
         'lng': -49.31824,
         'type': 'factory',
         'title': 'xxxx',
         'addressl1': 'Rua Joao Chede, 2489 - CIC',
         'addressl2': '',
         'city': 'Curitiba',
         'pcode': '81170-220<br/>Brazil',            
         'tel': 'xxxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': -23.630333,
         'lng': -46.70722,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Rua Alexandre Dumas, 1711',
         'city': 'Sao Paulo',
         'pcode': '04717-004<br/>Brazil',            
         'tel': 'xxxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 31.520016,
         'lng': 120.455351,
         'type': 'factory',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Wuxi',
         'city': 'Jiangsu',
         'pcode': 'P.R. China',          
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 31.212302,
         'lng': 121.420866,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Room 2103, Le Shing International Plaza<br />1319 West Yan An Road',
         'city': 'Shanghai',
         'pcode': '200050<br />China',           
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },  
     {
         'lat': 48.9821,
         'lng': 2.513187,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Paris Nord II - Parc des Reflets<br />165 Avenue du Bois de la Pie',
         'city': 'Roissy CDG Cedex',
         'pcode': 'BP40064, F-95913<br/>France',             
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 49.99406,
         'lng': 9.07277,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Saalaeckerstrasse 4',
         'city': 'Kleinostheim',
         'pcode': 'D-63801<br />Germany',            
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 35.67148,
         'lng': 139.721313,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'AIG Aoyama Building<br />2-11-16 Minami-Aoyama',
         'city': 'Minato-ku',
         'pcode': 'Tokyo, 107-0062<br/>Japan',           
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 25.778658,
         'lng': -80.2969,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': '701 NW 62nd Ave # 200',
         'city': 'Miami',
         'pcode': 'FL 33126<br />USA',           
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },  
     {
         'lat': 52.584728,
         'lng': -0.21727,
         'type': 'factory',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': '',
         'city': 'Peterborough',
         'pcode': 'PE1 5FQ<br />United Kingdom',             
         'tel': 'xxxx',
         'url': 'www.abc.com'    
     }, 
     {
         'lat': 53.433981,
         'lng': -2.423279,
         'type': 'factory',
         'title': 'xxx',
         'addressl1': '',
         'addressl2': 'Northbank Industrial Park',
         'city': 'Irlam, Manchester',
         'pcode': 'M44 5PP<br />United Kingdom',             
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },          
     {
         'lat': 33.230917,
         'lng': -84.224603,
         'type': 'factory',
         'title': 'xxx',
         'addressl1': '325 Green Valley Road',
         'addressl2': 'Griffin',
         'city': 'Georgia',
         'pcode': '30224<br />USA',          
         'tel': 'xxxx',
         'url': 'www.abc.com'    
     },              
     {
         'lat': 1.324992,
         'lng': 103.70777,
         'type': 'office',
         'title': 'xxx',
         'addressl1': '14 Tractor Road',
         'addressl2': '',
         'city': 'Singapore',
         'pcode': '627973',          
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 1.297494,
         'lng': 103.631831,
         'type': 'factory',
         'title': 'xxx',
         'addressl1': '2 Tuas View Place #01-04M',
         'addressl2': '',
         'city': 'Singapore',
         'pcode': '637431',          
         'tel': 'xxx',
         'url': 'www.abc.com'    
     },
     {
         'lat': 40.837808,
         'lng': -89.554571,
         'type': 'office',
         'title': 'xxx',
         'addressl1': 'N4-AC6160',
         'addressl2': 'PO Box 610',
         'city': 'Mossville<br/>Illinois',
         'pcode': '61552-0610<br/>USA',          
         'tel': 'xxx',
         'url': 'www.abc.com'    
     }
     ]};

     for (var i = 0; i < locationData.location.length; i++) {
         //Create varaible to hold location data
        var locations = locationData.location[i];

        //Create marker
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations.lat, locations.lng),
            map: map,
            shadow: locationIcons['shadow'],
            title: locations.title
        });         
        markers.push(marker);           
        //Store the type which relates to the icon required in a varaible
        var iconImage = locationData.location[i].type

        //Set the the normal icon image to the desired type
        marker.setIcon(locationIcons[iconImage]);

        //Extending the bounds object with each LatLng
        (function(i, marker) {
            var iconHover = locationData.location[i].type+'Hover';              

            google.maps.event.addListener(marker, 'mouseover', function() {
                marker.setIcon(locationIcons[iconHover])
            });
        })(i, marker);

        (function(i, marker) {
            var newIcon = locationData.location[i].type

            google.maps.event.addListener(marker, 'mouseout', function() {
                marker.setIcon(locationIcons[newIcon])
            });
        })(i, marker);

        (function(i, marker) {
            var center = new google.maps.LatLng(locations.lat, locations.lng);

            google.maps.event.addListener(marker, 'rightclick', function() {
                map.setCenter(center);
            });
        })(i, marker);

        (function(i, marker) {
            google.maps.event.addListener(marker, 'click', function() {

            if(!infowindow) {
                infowindow = new google.maps.InfoWindow();
            }

            //First we create the container for the content
            var content = document.createElement('div');
            var p = document.createElement('p');

            //We then create a paragraph element that will contain some text
            if(locationData.location[i].addressl2 == '') {
                p.innerHTML = '<strong>' +locationData.location[i].title +'</strong></br />' +
                locationData.location[i].addressl1 + '<br />' +
                locationData.location[i].city + '<br />' +
                locationData.location[i].pcode + '<br />' +
                '<br />' +
                locationData.location[i].tel;                   
            } else {
                p.innerHTML = '<strong>' +locationData.location[i].title +'</strong></br />' +
                locationData.location[i].addressl1 + '<br />' +
                locationData.location[i].addressl2 + '<br />' +
                locationData.location[i].city + '<br />' +
                locationData.location[i].pcode + '<br />' +
                '<br />' +
                locationData.location[i].tel;                   
            };                  

            //We then create a second paragraph element that will contain the link
            var p2 = document.createElement('p');
            var p2Spacing = document.createElement('p2');

            //Creating the clickable link for zooming in
            var zoom = document.createElement('a');
            zoom.innerHTML = 'Zoom in';
            zoom.href ='#';

            zoom.onclick = function() {
                map.setCenter(marker.getPosition());
                map.setZoom(18);
                return false;
            };

            //Creating the clickable link for the more detail's page
            var moreInfo = document.createElement('a');
            moreInfo.innerHTML = 'More Info';
            moreInfo.href = locationData.location[i].url;

            p2Spacing.innerHTML = '&nbsp;&nbsp;&nbsp;&nbsp;';

            //Appending the link to the second paragraph element
            p2.appendChild(zoom);
            p2.appendChild(p2Spacing);
            p2.appendChild(moreInfo);

            //Appending the two paragraphs to the content container
            content.appendChild(p);
            content.appendChild(p2);

            infowindow.setContent(content);

            //Opening the Infowindow
            infowindow.open(map, marker);
            });
        })(i, marker);
     }
     mgr.addMarkers(markers, 1);
}
mgr.refresh();
}) (); 
```

# ejb-3.0 - JEE6：替代 EJB 声明

> ID：14437774
> 
> 赞同：1
> 
> 时间：2013-01-21T11:36:01.500
> 
> 标签：ejb-3.0, java-ee-6, jboss7.x, cdi

我正在使用带有 CDI 的 JBoss 7.1.1。

我在 JNDI 中有一个名为 ServiceAccount 的无状态 bean。这是真正的服务实现。我有另一个名为 ServiceAccountMock 的 Statelss bean，它是一个 Mock 服务。两者都继承自同一个接口，并封装在一个 service.ear 中。

我想要做的是在 bean.xml 中声明模拟服务作为替代，重新​​部署我的服务耳，然后所有客户端都看到模拟版本（不更改客户端的任何内容）。

当我部署我的 service.ear 时，JBoss 说：

```
java.lang.IllegalArgumentException: JBAS011046: A component named 'ServiceAccount' is already defined in this module 
```

确实如此，两种服务的声明方式相同（@Stateless(name="ServiceAccount")）。

如果我更改模拟版本的名称，我必须在客户端更改使用哪个 EJB（我不想这样做）。

有谁知道这是怎么做到的吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T23:27:33.683

我认为您无法在同一个应用程序中部署 2 个具有相同名称的 bean。

如果 bean 的客户端只是本地的，则应该使用 CDI 类型注入选择。

*   如果您确实需要一个名称，请删除 bean 的名称或输入不同的名称（模拟将具有与实际实现不同的名称）。
*   `@Alternative`将注释保留在模拟上。
*   在注入点，使用接口作为变量的类型（并且可能使用`@Inject`注释而不是注释`@EJB`可能会有所帮助）。

EJB 规范和 CDI 还没有完全一致。EJB 有一些元素，比如名称，需要在应用程序中是唯一的，并且在 CDI 替代功能中没有考虑到。

所以我认为您不能混合使用 EJB 名称注入选择和 CDI 替代注入选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:07:41.547

首先，您需要使用 , 进行注释`ServiceAccountMock`，`@Alternative`以告诉容器在没有指示的情况下不要使用它。

```
@Stateless(name="ServiceAccount")
@Alternative
public class ServiceAccountMock{
....
} 
```

然后`beans.xml`你需要告诉 A/S 选择模拟实现：

```
...
<alternatives>
    <class>xx.yy.ServiceAccountMock</class>
</alternatives>
... 
```

# sql-server-2008 - 将变量分配给临时表列

> ID：14437775
> 
> 赞同：0
> 
> 时间：2013-01-21T11:36:06.583
> 
> 标签：sql-server-2008

我正在处理一项任务，我应该在不知道表名的情况下从数据库中获取所有表中的数据。我打算做的是编写一个查询以获取所有表名和列名并将其存储在临时表中。

获得表名和列名后，我必须将值存储到变量中，例如`@Table_Name`和`@Column_Name`。然后我必须在循环中调用表名并且必须编写这样的查询

```
"select * from '''+@Table_Name+''' where '''+@Column_Name+''' = 1" 
```

早些时候，我曾经`cursor`获取值并将其存储在一个变量中并在循环中调用它。但似乎光标正在消耗更多的时间和内存。所以我想用临时表来改变它。

我的疑问是，是否可以将临时表值分配给变量以供以后使用。如果可能怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:29:01.563

我觉得您的想法可能行不通，因为您正试图在 SQL Server 中合并数组的概念。SQL Server 没有数组，但有表。您可以通过创建临时表来获取所需的数据。通过触发类似的查询插入其中 `select * from sys.tables`。然后尝试通过从该表中加载每一行来执行您的操作。完成工作后，请务必放下桌子。

# android - 找不到创建的文件夹

> ID：14437779
> 
> 赞同：0
> 
> 时间：2013-01-21T11:36:26.400
> 
> 标签：android

我创建一个新文件夹：

```
String homeDir = "MyApp";
String home = Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + homeDir;
File folder = new File(home);
        if (!folder.exists()) {
            return folder.mkdir();
        } 
```

但它永远不会被创造出来，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:39:02.267

我想父文件夹不存在。要创建文件夹，您必须调用`folder.mkdirs()`（注意 s）。

这是来自[文件](http://developer.android.com/reference/java/io/File.html#mkdirs%28%29)文档：

```
public boolean mkdirs ()
Creates the directory named by this file, creating missing parent directories if necessary. Use mkdir() if you don't want to create missing parents. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:43:48.900

使用 *mkdirs()*代替*mkdir()*并在你的清单文件中添加以下权限：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# seo - 如果我在 robots.txt 中允许，Google 和 Yandex 索引是否存在路径，但其他页面中不包含链接

> ID：14437782
> 
> 赞同：1
> 
> 时间：2013-01-21T11:36:39.780
> 
> 标签：seo, robots.txt

我有一些页面，比如说`/hidden_archive`，没有从任何其他页面引用。

我包括在我的`robots.txt`下一行`Allow: /hidden_archive`。

搜索爬虫会索引该页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:43:20.357

我会说：不。

为什么不能在页面上添加一些链接？没有人声称它们必须对人类可见......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T15:09:27.693

不，爬虫不会将该页面编入索引，除非它是从某个地方链接的（甚至是不同的网站）

# java - 为什么要使用嵌套类？

> ID：14437783
> 
> 赞同：19
> 
> 时间：2013-01-21T11:36:43.583
> 
> 标签：java, scope, inner-classes

什么时候可以嵌套类？我看到的最常见的优点是“共享范围”（跨类使用变量）。

与将嵌套类放在它自己的文件中并通过构造函数传递参数相比，这是否不太有吸引力/不是最佳实践？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T11:42:27.623

[使用嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)有几个原因，其中包括：

1.  这是一种对仅在一个地方使用的类进行**逻辑分组的方法。**

2.  它增加**了封装**。

3.  嵌套类可以产生更**易读和可维护的代码**。

4.  子类到父类的连接更简单，因为它**直观地说明**了每个类的变量和方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T14:08:17.400

除了已经提到的那些，另一个好处是：

*   嵌套类还可以帮助您实现**多重实现继承**（参考：Thinking in Java，第 369 页 - “为什么使用内部类”部分？）。据我所知，在 Java 中没有其他方法可以实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T05:08:48.620

根据我的说法，我知道何时使用嵌套类，当我们看到一个对象（OBJ1）与第二个对象（OBJ2）紧密绑定时，如果没有第二个对象（OBJ2），我们就无法创建第一个对象（OBJ1）。例如，我们有一个员工对象，一个关联的对象是薪水，我们不应该独立创建薪水对象。因为没有我们要给薪水的员工。
如果我错了，请提供您的反馈。

第二种情况，当我们使用 map 或 map 时，我们可以使用嵌套类来删除 map 的 map 以使代码易于理解。

第三，当我们想向客户端发送数据时，我们可以将其发送到具有所有数据的单个对象中:)

当我们需要可以定义外部类的组件或者我们想要定义适配器时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:11:58.330

当我需要将一组相关字段传递给一个方法并在类中的几个方法调用中操作同一组数据时，我发现私有静态类很有用。类似于 LinkedList.Node 类，它不暴露于外部，而是用于将链接分组为一个单元。

# cocoa - NSPredicate 在计算属性值后过滤记录

> ID：14437790
> 
> 赞同：0
> 
> 时间：2013-01-21T11:37:15.650
> 
> 标签：cocoa, core-data, hash, nspredicate

通常我们像这样使用 NSPredicate：

```
NSPredicate *matchName = [NSPredicate predicateWithFormat:
                             @"firstName == %@",@"Miraaj"]; 
```

有没有什么可以实现这样的：

```
NSPredicate *matchNameHash = [NSPredicate predicateWithFormat:
         @"hash(firstName) == %@",hash(@"Miraaj")]; 
```

IE。它将在匹配属性值的哈希值后过滤记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:12:39.203

根据[Predicate Programming Guide](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)`hash` ，核心数据/SQLite 中没有可用的功能。

无论如何，实体的什么属性应该是`hash`？在 Core Data 中，您应该使用与具有属性的其他实体的关系，而不是“哈希”。你需要的是类似

```
[NSPredicate predicateWithFormat:
        @"hashProperty.name = %@", localNameHash[@"Miraaj"]; 
```

假设您想比较某个“Person”实体的所有属性（您使用的是名字），您可以像这样检查持久存储中是否存在您的子类的实例

```
[NSPredicate predicateWithFormat:
        @"person = %@", miraajPersonObject]; 
```

# python - 使用 utf-8 处理页面

> ID：14437795
> 
> 赞同：0
> 
> 时间：2013-01-21T11:37:42.140
> 
> 标签：python, utf-8, urllib2

我只是在玩 urllib2 和带有 utf-8 的页面。

[http://www.columbia.edu/~fdc/utf8/](http://www.columbia.edu/~fdc/utf8/)

仅获取前 700 个字节（顶部段）

```
>>> import urllib2
>>> from urllib2 import HTTPError, URLError
>>> import BaseHTTPServer
>>> opener = urllib2.OpenerDirector()
>>> opener.add_handler(urllib2.HTTPHandler())
>>> opener.add_handler(urllib2.HTTPDefaultErrorHandler())
>>> response = opener.open('http://www.columbia.edu/~fdc/utf8/')
>>> content = response.read(700) 
```

现在从这里开始，我认为内容 var 中的字符串将是 utf-8 编码的，并且应该显示得很好。

然而

```
>>> content
'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\n<html>\n<head>\n<BASE href="http://kermit.columbia.edu">\n<META http-equiv="Content-Type" content="text/html; charset=utf-8">\n<title>UTF-8 Sampler</title>\n</head>\n<body bgcolor="#ffffff" text="#000000">\n<h1><tt>UTF-8 SAMPLER</tt></h1>\n\n<big><big>&nbsp;&nbsp;\xc2\xa5&nbsp;\xc2\xb7&nbsp;\xc2\xa3&nbsp;\xc2\xb7&nbsp;\xe2\x82\xac&nbsp;\xc2\xb7&nbsp;$&nbsp;\xc2\xb7&nbsp;\xc2\xa2&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa1&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa2&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa3&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa4&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa5&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa6&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa7&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa8&nbsp;\xc2\xb7&nbsp;\xe2\x82\xa9&nbsp;\xc2\xb7&nbsp;\xe2\x82\xaa&nbsp;\xc2\xb7&nbsp;\xe2\x82\xab&nbsp;\xc2\xb7&nbsp;\xe2\x82\xad&nbsp;\xc2\xb7&nbsp;\xe2\x82\xae&nbsp;\xc2\xb7&nbsp;\xe2\x82\xaf&nbsp;\xc2\xb7&nbsp;&#8377</big></big>\n\n\n\n<p>\n<blockquote>\nFrank da Cruz<br>\n<a hre' 
```

似乎 html 转义了，所以

```
>>> import HTMLParser
>>> h = HTMLParser.HTMLParser()
>>> h.unescape(content)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/HTMLParser.py", line 390, in unescape
    return re.sub(r"&(#?[xX]?(?:[0-9a-fA-F]+|\w{1,8}));", replaceEntities, s)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 151, in sub
    return _compile(pattern, flags).sub(repl, string, count)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 0: ordinal not in range(128) 
```

所以我不明白。我什至尝试过 .encode('utf-8') 不转义，但类似的错误。

从网站显示 utf-8 内容的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:46:06.530

You need to *decode* the page from UTF-8 to Unicode; there *are* UTF-8 sequences in there (next to non-breaking-space HTML entities):

```
>>> print h.unescape(content.decode('utf8'))
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<BASE href="http://kermit.columbia.edu">
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>UTF-8 Sampler</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<h1><tt>UTF-8 SAMPLER</tt></h1>

<big><big>  ¥ · £ · € · $ · ¢ · ₡ · ₢ · ₣ · ₤ · ₥ · ₦ · ₧ · ₨ · ₩ · ₪ · ₫ · ₭ · ₮ · ₯ · &#8377</big></big>

<p>
<blockquote>
Frank da Cruz<br>
<a hre 
```

You got encoding and decoding confused; the content is already UTF-8 encoded.

Note that the `&#8377` is an error in the page itself, the `;` was omitted. A HTML5 parser or browser would probably assume that the `;` can be added and decode it anyway:

```
>>> print h.unescape('&#8377;')
₹ 
```

You'd have to fix those entities with a regular expression first:

```
>>> import re
>>> brokenrefs = re.compile(r'(&#x?[a-e0-9]+)\b', re.I)
>>> print h.unescape(brokenrefs.sub(r'\1;', content.decode('utf8')))
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<BASE href="http://kermit.columbia.edu">
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>UTF-8 Sampler</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<h1><tt>UTF-8 SAMPLER</tt></h1>

<big><big>  ¥ · £ · € · $ · ¢ · ₡ · ₢ · ₣ · ₤ · ₥ · ₦ · ₧ · ₨ · ₩ · ₪ · ₫ · ₭ · ₮ · ₯ · ₹&lt;/big></big>

<p>
<blockquote>
Frank da Cruz<br>
<a hre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:47:24.013

你误解了你的输出。那里没有任何 HTML 编码：但是当您简单地输入`content`REPL 时，它会向您显示`repr()`文本的 -ed 版本。

做`print content`给你你所期望的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<BASE href="http://kermit.columbia.edu">
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>UTF-8 Sampler</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<h1><tt>UTF-8 SAMPLER</tt></h1>

<big><big>&nbsp;&nbsp;¥&nbsp;·&nbsp;£&nbsp;·&nbsp;€&amp;nbsp;·&nbsp;$&nbsp;·&nbsp;¢&nbsp;·&nbsp;₡&amp;nbsp;·&nbsp;₢&amp;nbsp;·&nbsp;₣&amp;nbsp;·&nbsp;₤&amp;nbsp;·&nbsp;₥&amp;nbsp;·&nbsp;₦&amp;nbsp;·&nbsp;₧&amp;nbsp;·&nbsp;₨&amp;nbsp;·&nbsp;₩&amp;nbsp;·&nbsp;₪&amp;nbsp;·&nbsp;₫&amp;nbsp;·&nbsp;₭&amp;nbsp;·&nbsp;₮&amp;nbsp;·&nbsp;₯&amp;nbsp;·&nbsp;&#8377</big></big>

<p>
<blockquote>
Frank da Cruz<br>
<a hre 
```

# c - 中断安全缓冲区

> ID：14437797
> 
> 赞同：5
> 
> 时间：2013-01-21T11:37:48.610
> 
> 标签：c, thread-safety, locking, interrupt, c99

我正在为嵌入式系统（Cortex M0）编写代码，并且没有互斥锁/自旋锁/等的所有奢侈品。有没有一种简单的方法可以将数据添加到共享缓冲区（日志文件），该缓冲区将从我的 Main() 循环刷新到磁盘？

如果只有一个生产者（1 个中断）和一个消费者（主循环），我可以使用一个简单的缓冲区，生产者增加“头部”，消费者增加“尾部”。这将是完全安全的。但是现在我有多个生产者（中断），我似乎被困住了。

我可以为每个中断提供自己的缓冲区，并将它们组合在 Main() 中，但这将需要大量额外的 RAM 和复杂性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T14:13:38.467

您可以通过一个简单的[环形缓冲区](http://en.wikipedia.org/wiki/Ring_buffer)（循环数组）来实现这一点，您可以在访问期间关闭硬件中断源。它只需要函数 init、add 和 remove。

我不确定您的特定 MCU 如何处理中断，但很可能它们将保持挂起状态，只要您仅启用/禁用特定硬件外围设备的中断。根据您的应用程序的性质，您还可以禁用全局中断掩码，但这相当粗糙。

通常，您不必担心错过中断，因为如果处理传入中断的代码比中断频率慢，那么世界上没有软件可以修复它。您要么必须接受数据丢失，要么增加 CPU 时钟以避开此类情况。但当然，您应该始终尽量保持 ISR 中的代码尽可能紧凑。

# ruby - 将 XML 映射到 Ruby 对象

> ID：14437799
> 
> 赞同：0
> 
> 时间：2013-01-21T11:37:52.207
> 
> 标签：ruby, xml, xsd

我想在 ruby​​ 和 XML 中的其他应用程序之间进行通信。我已经为这种通信定义了一个模式，并且我正在寻找将 Ruby 中的数据转换为 XML 的最佳方法，反之亦然。

我有一个 XML 文档`my_document.xml`：

```
<myDocument>
  <number>1</number>
  <distance units="km">20</distance>
</myDocument> 
```

它符合 Schema `my_document_type.xsd`（我不会在这里写出来）。

现在我想*从*XSD 自动生成以下类 - 这是合理的还是可行的？

```
# Represents a document created in the form of my_document_type.xsd
class MyDocument
  attr_accessor :number, :distance, :distance_units

  # Allows me to create this object from data in Ruby
  def initialize(data)
    @number = data['number']
    @distance = data['distance']
    @distance_units = data['distance_units']
  end

  # Takes an XML document of the correct form my_document.xml and populates internal systems
  def self.from_xml(xml)
    # Reads the XML and populates:
    doc = ALibrary.load(xml)

    @number = doc.xpath('/number').text()
    @distance = doc.xpath('/distance').text()
    @distance_units = doc.xpath('/distance').attr('units') # Or whatever
  end

  def to_xml
    # Jiggery pokery
  end
end 
```

所以现在我可以这样做：

```
require 'awesomelibrary'

awesome_class = AwesomeLibrary.load_from_xsd('my_document_type.xsd')

doc = awesome_class.from_xml('my_document.xml')

p doc.distance # => 20
p doc.distance_units # => 'km' 
```

我也可以

```
doc = awesome_class.new('number' => 10, 'distance_units' => 'inches', 'distance' => '5')

p doc.to_xml 
```

并得到：

```
<myDocument>
  <number>10</number>
  <distance units="inches">5</distance>
</myDocument> 
```

这对我来说听起来像是相当强大的功能，所以我不期待一个完整的答案，但是关于已经这样做的库的任何提示（我试过使用 RXSD，但我不知道如何让它去做这个）或任何可行性想法等等。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:08:15.130

你试过Nokogiri吗？Slop[装饰器](http://nokogiri.org/Nokogiri.html#method-c-Slop)以这样一种方式实现`method_missing`到文档中，即它基本上复制了您正在寻找的功能。

# wordpress - 多站点开发的项目设置

> ID：14437800
> 
> 赞同：0
> 
> 时间：2013-01-21T11:37:57.657
> 
> 标签：wordpress, setup-project

我即将使用具有多站点功能的 wordpress 开发两个网站。所以应该指向同一个wordpress安装`www.domain1.com`。`www.domain2.com`

我遇到的问题是这些域正在生产中使用，所以在开发尚未完成之前，我无法将它们指向其他地方。我也没有（也不想购买）两个未使用的域来创建开发设置，所以我想知道的是：

**我可以为开发设置子域并稍后将其更改为“真实”域吗？**

我想知道的是如何设置项目，以便在开发完成后，部署尽可能轻松。项目设置应该尽可能接近“真实世界场景”，我对任何类型的提示、建议、链接和指导我设置项目的东西感兴趣。

哪些是陷阱，“危险”部分在哪里？

问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:56:17.880

我建议以下路线：

*在将成为主博客*( )的第三个域中安装具有*子域*设置的多站点。在您的主机中，您需要启用通配符子域。否则，必须手动创建每个子域。使用通配符，创建新站点只需单击。*`example.com``Add site`*

 *然后，在 中`/wp-admin/network/sites.php`，添加两个站点：`domain1.example.com`和`domain2.example.com`。并开发，直到他们准备好。

您需要插件[WordPress MU 域映射](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)将顶级域映射到子站点/子域。有了它，`domain1.example.com`将是一个完整的工作`domain1.com`。

一切就绪后，只需将 NameServers 更改为指向多站点地址即可。

* * *

好吧，这看起来很简单，但 Multisite 不适合胆小的人。***但是***，WordPress.org 的一位奇才 Mika Epstein，又名 Ipstenu，有两本很棒的电子书，涵盖了很多领域。请在我引用它们的 WordPress StackExchange 中检查[以下答案](https://wordpress.stackexchange.com/search?q=user:12615%20110%20101)。

一个有趣的[案例研究文件](https://docs.google.com/document/d/1h1CejwUCKU9SNLtTwHxxZKfGjTWtUkpiMM4wyZdQS8s/edit?hl=en_US)。

感兴趣的插件：

*   [BackupBuddy](http://ithemes.com/purchase/backupbuddy/)：付费解决方案，虽然它被认为是测试版，但在网络中导出和导入站点都可以。
*   [为 WPMU (batch) 添加克隆站点](http://wordpress.org/extend/plugins/add-cloned-sites-for-wpmu-batch/)，在存储库中，虽然有一段时间没有更新，但仍然可以正常工作，不导出/导入，但对于在网络内复制站点很有用。*

# android - 如何在 Google Maps API V2 中获取当前位置

> ID：14437801
> 
> 赞同：11
> 
> 时间：2013-01-21T11:38:10.320
> 
> 标签：android, null, google-maps-android-api-2

我正在创建一个应用程序，用户需要使用 getMyLocation() 查看他/她的地理位置，但这会返回 null。是否有任何解决方案，因为我确实读到 getMyLocation() 方法总是返回 null。我是谷歌地图的新手，所以任何帮助将不胜感激！

代码：

```
GoogleMap map = ((SupportMapFragment)  getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
map.setMyLocationEnabled(true);
Location myLocation = map.getMyLocation();

if( myLocation != null ){
    helper.showToast( "Latitude: " + myLocation.getLatitude() + "\nLongitude: " + myLocation.getLongitude() );
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-30T10:29:19.390

```
private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            mMap.setMyLocationEnabled(true);
            // Check if we were successful in obtaining the map.
            if (mMap != null) {

             mMap.setOnMyLocationChangeListener(new GoogleMap.OnMyLocationChangeListener() {

           @Override
           public void onMyLocationChange(Location arg0) {
            // TODO Auto-generated method stub

             mMap.addMarker(new MarkerOptions().position(new LatLng(arg0.getLatitude(), arg0.getLongitude())).title("It's Me!"));
           }
          });

            }
        }
    } 
```

在创建函数中调用此函数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T12:19:36.030

我不喜欢新的谷歌地图 API，因为它们的局限性和缺陷。在您的情况下，我认为最好的方法是使用[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html)和[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)类。当您的手机找到卫星时，您将获得位置，然后您可以在地图上添加标记。如果您需要快速获取位置，也可以使用[getLastKnownLocation()方法。](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)我认为谷歌地图`getMyLocation()`方法返回 null 因为手机没有太多时间知道它的位置，当应用程序启动时。在 Google Maps API v2 中没有某种`onLocationChanged()`方法。我不喜欢这个 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-06T23:30:17.127

`map.getMyLocation() return null`因为没有位置`onCreate();`

第一次获取地图位置是在第一个 onCameraChange() 事件之后。

所以用

```
map.setOnCameraChangeListener( new ...) 
```

在您的地图上并在第一次发生后执行您的实施

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T08:51:01.487

我已经这样做了：

```
private GoogleMap mGoogleMap;
private SupportMapFragment mMapFragment; 
```

在**onCreate()**上：

```
mMapFragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);
mGoogleMap = mMapFragment.getMap();

mGoogleMap.setOnMyLocationChangeListener(myLocationChangeListener); 
```

现在添加**MyLocationChangeListener**：

```
private GoogleMap.OnMyLocationChangeListener myLocationChangeListener = new GoogleMap.OnMyLocationChangeListener() {
    @Override
    public void onMyLocationChange(Location location) {
      Log.i(TAG, "Latitude: "+String.valueOf(location.getLatitude())+" - Longitude: "+String.valueOf(location.getLongitude()));
   }
}; 
```

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T12:50:01.600

请检查示例代码`Google Maps Android API v2`，使用它您将解决您的问题。

[示例代码](https://github.com/googlemaps/android-samples/blob/master/ApiDemos/app/src/main/java/com/example/mapdemo/MyLocationDemoActivity.java)

# python - 使用 OpenCL 从灰度图像中过滤全白像素

> ID：14437803
> 
> 赞同：1
> 
> 时间：2013-01-21T11:38:14.123
> 
> 标签：python, opencv, opencl, pyopencl

我的目标是将值 = 255 的图像像素转换为 0。即删除所有纯白色像素。这是使用 opencv 和 opencl 在 python 中的代码：

```
import os
import glob
import cv2 as cv
import numpy as np
import pyopencl as cl

def filter_image( ):

    platforms = cl.get_platforms()
    devices = platforms[0].get_devices( cl.device_type.ALL )
    context = cl.Context( [devices[0]] )
    cQ = cl.CommandQueue( context )
    kernel = """
        __kernel void filter( global uchar* a, global uchar* b ){
                int y = get_global_id(0);
                int x = get_global_id(1);

                int sizex = get_global_size(1);

                if( a[ y*sizex + x ] != 255 )
                        b[ y*sizex + x ] = a[ y*sizex + x ];
            }"""

    program = cl.Program( context, kernel ).build()

    for i in glob.glob("*.png"):

        image = cv.imread( i, 0 )        
        b = np.zeros_like( image, dtype = np.uint8 )
        rdBuf = cl.Buffer( 
                context,
                cl.mem_flags.READ_ONLY | cl.mem_flags.COPY_HOST_PTR,
                hostbuf = image
                          )

        wrtBuf = cl.Buffer( 
                context,
                cl.mem_flags.WRITE_ONLY,
                b.nbytes
                          )

        program.filter( cQ, image.shape, None, rdBuf, wrtBuf ).wait()
        cl.enqueue_copy( cQ, b, wrtBuf ).wait()
        cv.imshow( 'a', b )
        cv.waitKey( 0 )

def Filter( ):
    os.chdir('D:\image')
    filter_image( )
    cv.destroyAllWindows() 
```

我面临的问题是，一旦我使用上述程序中的循环，逻辑仅适用于第一张图像。即仅针对第一张图像去除白色像素，但在后续图像中看不到任何效果，即输出图像与输入图像相同，对值为 255 的像素没有任何影响。这应该很简单。我找不到任何解决方案。

请帮助我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:44:17.733

在您的内核中，如果图像中的像素为白色，则您不会将图像中的像素设置`b`为任何值。`a`您应该将其更改为如下所示：

```
b[y * sizex + x] = (a[y * sizex + x] == 255) ? 0 : a[y * sizex + x]; 
```

如果图像 a 中的像素为白色，则将图像 b 中的像素设置为零，否则复制像素不变。还可以考虑就地进行这种操作，这样只需要一个缓冲区。

# iphone - 在 iphone 中缓存 youtube 视频

> ID：14437805
> 
> 赞同：0
> 
> 时间：2013-01-21T11:38:15.310
> 
> 标签：iphone, ios, xcode, ios5, youtube

我想开发一个像播放管这样的 iphone 应用程序，曾经播放过的 youtube 视频会被缓存，并且可以在没有流媒体或互联网访问的情况下再次播放。如何在 iphone 中缓存 youtube 视频？

# inno-setup - Inno Setup：如何在 64 位操作系统中重命名 system32 文件

> ID：14437806
> 
> 赞同：1
> 
> 时间：2013-01-21T11:38:26.870
> 
> 标签：inno-setup, pascalscript

System32 和 syswow64 文件夹存在于 64 位操作系统的 C:\Windows 下。

`xyz.sys`我在文件夹下有一个文件`System32\drivers`。我尝试重命名`xyz.sys`为`xyz1.sys`使用以下代码：

```
if FileExists(ExpandConstant('{sys}\drivers\xyz.sys')) then
  RenameFile(ExpandConstant('{sys}\drivers\xyz.sys'), ExpandConstant('{sys}\drivers\xyz1.sys')); 
```

但在 64 位操作系统中，innosetup 是`{sys}='Driveletter:\Windows\syswow64'`默认设置。

即使我尝试下面的代码来重命名`xyz.sys`文件`System32\drivers`：

```
if FileExists(ExpandConstant('{win}\System32\drivers\xyz.sys')) then
  RenameFile(ExpandConstant('{win}\System32\drivers\xyz.sys'), ExpandConstant('{win}\System32\drivers\xyz1.sys')); 
```

但上面的代码也不起作用，谁能建议我如何在 64 位操作系统中重命名 system32 文件。

我正在使用windows2008R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:49:51.323

默认情况下，32 位应用程序（以及 32 位应用程序的安装程序）只能访问 32 位系统文件夹。`64bit`例如，如果需要为 32 位应用程序安装特定的 64 位文件，则可以使用各种条目上的标志来覆盖它。

`[Code]`您可以使用[`EnableFsRedirection`](http://www.jrsoftware.org/ishelp/topic_isxfunc_enablefsredirection.htm)支持功能执行相同的操作。该帮助页面显示了执行 64 位命令提示符的示例；`{sys}`您可以类似地从该块中访问 64 位。之后别忘了恢复之前的状态，如图。

但是请记住，重命名已安装的驱动程序文件通常不是一个好主意——目录和 INF 文件仍指向其旧名称，系统可能会对此感到困惑。最好正确卸载驱动程序并重新安装新的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:44:53.690

InnoSetup 以 32 位模式运行安装，除非您将[ArchitecturesInstallIn64BitMode](http://www.jrsoftware.org/ishelp/index.php?topic=setup_architecturesinstallin64bitmode)设置为`x64`.

如果要使用 访问 64 位文件`{sys}`，则应设置该值。

[文档](http://www.jrsoftware.org/ishelp/index.php?topic=consts)`{sys}`标题下的更多解释。

# iphone - iOS 旋转动画在 CAAnimationGroup 中发生不顺畅

> ID：14437807
> 
> 赞同：0
> 
> 时间：2013-01-21T11:38:28.110
> 
> 标签：iphone, ios, rotation, caanimation, cabasicanimation

我有 3 个动画在一组中运行：位置、缩放和旋转

但是我的旋转动画并不顺利。它在开始时突然发生，而其他动画则顺利发生。

这是我的代码：

```
//CABasicAnimation *scaleAnimation
//CABasicAnimation *moveAnimation
CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
rotationAnimation.autoreverses = NO;  

rotationAnimation.toValue = [NSNumber numberWithFloat: 0];//-(M_PI/3)];
//below line shows the end state, if removed, the layer will assume its initial position after animation, something which I don't want.
[layer setTransform:CATransform3DMakeRotation(0, 0, 1, 0)];    

CAAnimationGroup *theGroup = [CAAnimationGroup animation];
//Code for adding all 3 animations to the group 
```

编辑：

rotationAnimation.toValue = [NSNumber numberWithFloat: -(M_PI/3)];

从动画声明处移除最终变换值，并将其添加到委托。（请注意，在动画组的情况下，单个动画代表不会受到影响，只有组代表起作用）。

根据委托：

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)flag
{   
    NSString * animName = [theAnimation valueForKey:@"animationName"];
    CALayer* layer = [theAnimation valueForKey:@"animationLayer"];

    if ([animName isEqualToString:@"MoveZoomOut"])
    {

       if ([layer.name isEqualToString:@"Layer1"])
          [layer setTransform:CATransform3DMakeRotation(-M_PI/3, 0, 1, 0)];
       else if ([layer.name isEqualToString:@"Layer2"])
          [layer setTransform:CATransform3DMakeRotation(M_PI/3, 0, 1, 0)];
       else
          [layer setTransform:CATransform3DMakeRotation(0, 0, 1, 0)];
    }

    if ([layer respondsToSelector:@selector(setContentsScale:)])
    {
        layer.contentsScale = [UIScreen mainScreen].scale;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:07:24.677

> 我有 3 个动画在一组中运行：位置、缩放和旋转

我怀疑由于您正在通过`transform`属性完成缩放和旋转的动画，因此可能会发生冲突。

通过将 2 个变换连接为一个，尝试在单个动画中设置缩放和旋转动画：

```
CATransform3D t = CATransform3DMakeRotation(0, 0, 1, 0)];
[layer setTransform:CATransform3DScale(t, sx, sy, sz)]; 
```

编辑：

我知道正在发生的事情很不寻常，所以我会给你一些提示，告诉你一些在几个场合对我有帮助的技巧。我明白，你有 3 层动画。

1.  将每一层动画包装在`[CATransaction begin]/[CATransaction commit]`;

如果这没有帮助，

1.  不要在创建动画本身后立即设置要设置动画的属性的最终值；而是在动画委托`animationDidStop:finished:`方法中设置它。

换句话说，给定您的代码：

```
CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
rotationAnimation.autoreverses = NO;  

rotationAnimation.toValue = [NSNumber numberWithFloat: 0];//-(M_PI/3)];
//below line shows the end state, if removed, the layer will assume its initial position after animation, something which I don't want.
[layer setTransform:CATransform3DMakeRotation(0, 0, 1, 0)];    

CAAnimationGroup *theGroup = [CAAnimationGroup animation]; 
```

不要在`[layer setTransform:CATransform3DMakeRotation(0, 0, 1, 0)];`那里做。相反，在：

```
- (void)animationDidStop:(CAAnimation*)anim finished:(BOOL)flag {
   [layer setTransform:CATransform3DMakeRotation(0, 0, 1, 0)];
} 
```

由于您将进行多个动画（并且可能对所有动画都使用相同的委托），因此您将需要一种方法来判断该`animationDidStop:`方法引用的是哪个动画。为此，您可以执行以下操作，例如：

```
//-- se the delegate
rotationAnimation.delegate = self;
[rotationAnimation setValue:layer forKey:@"animationLayer"]; 
```

在委托方法中：

```
- (void)animationDidStop:(CAAnimation*)anim finished:(BOOL)flag {

   [CATransaction begin];
   [CATransaction setDisableActions:YES];

   CALayer* layer = [anim valueForKey:@"animationLayer"];
   layer.transform = ...;

   [CATransaction commit];

} 
```

我知道这似乎有点做作。它是。但这是我可以解决类似于您所报告的问题的唯一方法。

希望这可以帮助。

编辑：

对于使用时的故障`animationDidStop:`，请尝试将`animationDidStop:`内容包装在：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
...
[CATransaction commit]; 
```

# vb.net - KeyDown 事件到下一行

> ID：14437810
> 
> 赞同：0
> 
> 时间：2013-01-21T11:38:41.370
> 
> 标签：vb.net, gridview, keydown

我在 VS 中创建了这个表单

![在此处输入图像描述](../Images/96bc11d15177bda30941180e76cf6d28.png)

`NumPlace TextBox`是自动的`1`，我想在按下`Enter`键时`NumPlace`自动增加下一行的值。

这是我写的代码：

```
Private Sub DataGridView1_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles DataGridView1.KeyDown
        If e.KeyCode = Keys.Enter Then
            MsgBox("Enter key is pressed !")
        End If
    End Sub 
```

但它不起作用，它仅在我选择某个行结束时按“Enter”但当我更改 ComboBox 的值或当我选择`NumPlace TextBox`然后按下`Enter`事件时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:43:40.327

您需要检查 ColIndex 和 RowIndex ............

```
Dim currCell As DataGridViewCell = DataGridView1.CurrentCell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:05:31.857

该`DataGridView1_KeyDown`事件只会在焦点打开时触发`DataGridView1`。尝试处理`Form1_KeyDown`事件。

```
Private Sub Form1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
        If e.KeyCode = Keys.Enter Then
            MsgBox("Enter key is pressed !")
        End If
    End Sub 
```

但是，您应该将 Form1`KeyPreview`属性设置为`True`in`Form Designer`或 in，`Form Load`以便表单在事件传递给具有焦点的控件之前接收键事件。

看到[这个](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:18:48.287

解决方案是使用事件`KeyUp`而不是`KeyDown`

# c# - 没有得到正确答案的价值

> ID：14437815
> 
> 赞同：3
> 
> 时间：2013-01-21T11:38:57.323
> 
> 标签：c#

```
int c;
int f = 20;
c = 5 / 9 * (f - 32);
Console.WriteLine(c);
Console.ReadLine(); 
```

如果我运行此代码 c 最终为 0，这是错误的。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:39:43.343

因为您的计算是以**整数类型**进行的。我相信`c`是双类型变量。

```
c = 5d / 9 * (f - 32.0); 
```

使用`32.0`or`32d`这样**的操作数之一是`double`**，也对 . 执行相同的操作`5/9`。

您还**需要定义`c`为双精度。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:40:33.987

问题出在下面一行；

```
5 / 9 
```

因为 c 和 f 是整数。例如，如果我让你将 11 除以 10；你会告诉我结果是 1.1。假设您不了解浮点运算，那么您会说要么不能将 11 除以 10；要么 或者你会说它是 1。运行时环境也是如此，它说它是 0，因为你声明了一个整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:58:44.457

哈比卜已经解释了正在发生的事情。如果您不想更改`c`为浮点数或双精度数，可以执行以下操作：

```
c = (int)Math.Round(5.0 / 9.0 * (f - 32.0)); 
```

# c++ - QT 创建者不链接

> ID：14437818
> 
> 赞同：2
> 
> 时间：2013-01-21T11:39:14.590
> 
> 标签：c++, qt, compiler-construction, linker, qt-creator

我有一个包含 2 个子项目（Sub1 和 Sub2）的项目：

```
ESI
|
|__Sub1
|
|__Sub2 
```

在 Sub2 (demo1.cpp) 项目中的类的实现文件 (.cpp) 中，我需要包含 Sub1 项目的类。所以在 demo1.cpp 我已经声明：

```
#include "../sub1/controller.h" 
```

为什么链接器找不到控制器的构造函数？（说未定义的参考）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:10:51.400

你`#include`告诉*编译器*它可以在哪里找到你的类的*定义*`controller`（即你的`controller.h`文件的内容）。

为了链接到您的类的*实现*`controller`，链接器需要一个包含已编译实现的库。-`Sub2`项目不会`Sub1`再次编译 的内容，除非您在项目中包含 的`.cpp`文件，这将是不好的做法，并且可能导致进一步的问题。`Sub1``Sub2`

* * *

假设`Sub1`是一个库，它将生成为`sub1.lib`：

您需要将以下行添加到您的项目`.pro`文件中`Sub2`：

```
LIBS += -L../Sub1 \
        -lsub1 
```

这告诉链接器有一个包含库的“../Sub1”目录，并且有一个名为“sub1.lib”的库。使用`-L`and`-l`语法的优点是它适用于所有平台（Windows、Linux、Mac 等）。

* * *

如果`Sub1`和`Sub2`都是可执行文件（即项目产生一个`.exe`）文件，您需要将公共内容提取到一个单独的项目中，该项目在其文件`Sub3`中`TEMPLATE = lib`而不是`TEMPLATE = app`在其`.pro`文件中。

# tfs - sqlproj post-build $(Configuration) 在 TFS 上不正确

> ID：14437824
> 
> 赞同：0
> 
> 时间：2013-01-21T11:39:57.367
> 
> 标签：tfs, msbuild, tfsbuild, database-project, sql-server-data-tools

我正在使用最新版本的 SSDT 编写 sqlproj，但使用 TFS 似乎无法正确评估构建后事件 $(Configuration) 宏。

我在项目中编写了以下构建后事件命令

```
"$(ProjectDir)$(ProjectName).Config\$(Configuration)\DeployCommand.cmd" 
```

在我使用 Visual Studio 的机器上，这可以正确评估为

> “C:\Workspaces\MyProject\Dev\Src\MyProject.Database\MyProject.Database.Config\Debug\DeployCommand.cmd”

当我使用 IDE 在各种构建配置（发布、UAT 等）之间切换时，上述更改正确。然而，使用 TFS 2012 时它不正确（请参阅调试文件夹）评估为（即使我的构建配置未设置为调试）

> “C:\Workspaces\MyProject\Dev\Src\MyProject.Database\MyProject.Database.Config\Debug\DeployCommand.cmd”

我有其他正确评估 $(Configuration) 宏的 C# 项目。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:50:25.647

事实证明，我在解决方案中的构建配置是非常微妙的错误。我手动纠正了它们。

```
{31173859-02F5-4CFC-BD9A-C7BA45F8A7B7}.Dev|Any CPU.ActiveCfg = Dev|Any CPU
{31173859-02F5-4CFC-BD9A-C7BA45F8A7B7}.Dev|Any CPU.Build.0 = Dev|Any CPU
{31173859-02F5-4CFC-BD9A-C7BA45F8A7B7}.Dev|Mixed Platforms.ActiveCfg = Dev|Any CPU
{31173859-02F5-4CFC-BD9A-C7BA45F8A7B7}.Dev|Mixed Platforms.Build.0 = Dev|Any CPU
{31173859-02F5-4CFC-BD9A-C7BA45F8A7B7}.Dev|x86.ActiveCfg = Dev|Any CPU 
```

# c++ - 使用带有谓词的 std::find

> ID：14437825
> 
> 赞同：17
> 
> 时间：2013-01-21T11:40:00.183
> 
> 标签：c++, vector, find, predicate

我想将`std::find`函数与谓词一起使用（不确定我是否使用了正确的词）。这是代码

```
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;
class foo {
public:
  typedef pair< int, vector<int> > way;
  typedef pair< int, int > index;
  typedef pair< index, vector<way> > entry;
  vector< entry > table;

  void bar() 
  {
     vector<int> v1;
     v1.push_back(1);
     v1.push_back(2);

     way w = make_pair( 1, v1 );
     vector<way> v2;
     v2.push_back(w);

     index id = make_pair( 10, 20 );
     entry en = make_pair( id, v2 );
     table.push_back( en );
  }
  void insert()
  {
     index new_id = make_pair( 10, 20 );
     if ( find(table.begin(), table.end(), new_id) != table.end() ) {
        // index matched in the table
        // then I will push back a new pair (way)
        // to the second part of the entry
     }
  }
};
int main()
{
  foo f;
  f.bar();
  f.insert();
  return 0; 
} 
```

如您所见，`find()`应该`table`根据每个条目中的第一个元素进行搜索。现在，它说`==`比较 a 并没有超载`pair`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-21T11:47:34.020

你想要[`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
...
if(find_if(table.begin(), table.end(), [&new_id](const entry &arg) { 
                                           return arg.first == new_id; }) != ...) 
```

**编辑：**如果您没有 C++11（因此没有 lambdas），您必须创建一个自定义仿函数（函数或函数对象）来`entry::first`与搜索的进行比较`index`：

```
struct index_equal : std::unary_function<entry,bool>
{
    index_equal(const index &idx) : idx_(idx) {}
    bool operator()(const entry &arg) const { return arg.first == idx_; }
    const index &idx_;
};

...
if(find_if(table.begin(), table.end(), index_equal(new_id)) != ...) 
```

**编辑：**由于 an`index`只是一对`int`s，您也可以通过值而不是 const 引用来捕获它，以使代码更清晰、更简洁，但这也无关紧要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-10T18:14:04.563

在 C++11 中，您还可以使用[`std::any_of`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)

```
if (std::any_of(table.cbegin(), table.cend(),
                [&new_id](const entry &arg) { return arg.first == new_id; })) 
```

# javascript - 通过向形状添加事件来创建画布 [KineticJs]

> ID：14437827
> 
> 赞同：1
> 
> 时间：2013-01-21T11:40:06.113
> 
> 标签：javascript, html5-canvas, kineticjs

我正在尝试使用 KineticJs 创建绘图画布，这是 jsfiddle 上的代码：http: [//jsfiddle.net/thekucays/k7ZMc/2/](http://jsfiddle.net/thekucays/k7ZMc/2/)

在我上面的代码中，我正在尝试创建一个矩形，并为我创建的每个矩形添加一个事件侦听器..（第 115 行）

```
var item = layer.get('.rect1');
item.on('click', function(){
    item.setFill('RED');
}); 
```

但是当我执行它时，如果我单击画布上的任何矩形，事件会在我创建的最后一个矩形上触发。我上面的代码有什么问题？

最好的问候，卢基·R·罗皮斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:06:02.947

hy :) 嗯..是的，在我的代码上，我使用 rect_counter 的原因是我想跟踪我绘制的最后一个 rect..所以我不需要从第一个 rect 重新开始循环来绑定事件。 .

现在我已经（在 mouseup 事件上）更改为：

```
var rects = stage.get('.rect'+rect_counter);
rects.on('click', function(){
    this.setAttrs({
        fill: 'red'
    });
    //layer.draw();
}); 
```

现在它可以工作了..到目前为止一切都很好..感谢您的帮助:)

此致，

卢基·R·罗皮斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:29:59.557

您正在使用：

```
 var item = layer.get('.rect1'+rect_counter); //dont user "+rec_counter" as this is what binds it to the LAST element
 item.on('click', function(){
    item.setFill('RED');
 }); 
```

尝试更基本的解决方法：-------- 这个最适合我 -----------

```
 var itemsList = layer.getChildren(); //gets all shapes in this layer
 for(var i=0; i<itemsList.length; i++){
      if(itemsList.getName == 'rect1'){ //since you named your rectangles 'rect1' check name
          itemsList[i].on('click', function(){
             item.setFill('RED');
          });
      }
 }; 
```

或者干脆尝试使用：

```
 var item = layer.get('.rect'); //all rectangles, without number
 item.on('click', function(e){ // I think you need an 'e' here
     item.setFill('RED');
 });
 // I doubt this will work as ALL your rectangles need to have the same name if you want to .get() them all 
```

# android - 如何在android中获取显示键盘事件

> ID：14437830
> 
> 赞同：1
> 
> 时间：2013-01-21T11:40:21.740
> 
> 标签：android

我有`android:layout_height="match_parent"`带有 Editboxes 的 GridView，在`LinearLayout`修复**android:layout_height**中。

当我触摸编辑框时，出现键盘。

**键盘出现和消失时如何更改LinearLayout中的android：layout_height？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:43:57.507

试试下面的链接希望对你有帮助

[http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html](http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html)

[http://davidwparker.com/2011/08/30/android-how-to-float-a-row-above-keyboard/](http://davidwparker.com/2011/08/30/android-how-to-float-a-row-above-keyboard/)

```
private OnSoftKeyboardListener onSoftKeyboardListener;

@Override
protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
    if (onSoftKeyboardListener != null) {
        final int newSpec = MeasureSpec.getSize(heightMeasureSpec); 
        final int oldSpec = getMeasuredHeight();
        if (oldSpec > newSpec){
            onSoftKeyboardListener.onShown();
        } else {
            onSoftKeyboardListener.onHidden();
        }
    }
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

public final void setOnSoftKeyboardListener(final OnSoftKeyboardListener listener) {
    this.onSoftKeyboardListener = listener;
}

public interface OnSoftKeyboardListener {
    public void onShown();
    public void onHidden();
} 
```

# ruby - 验证后强制重建 SOAP-Header

> ID：14437837
> 
> 赞同：1
> 
> 时间：2013-01-21T11:40:43.960
> 
> 标签：ruby, soap, savon

我的 SOAP-Server 期望每个请求在soap-header 中都有一个有效的令牌来验证soap-client。这个令牌只在一段时间内有效，所以我不得不期望它在每次调用中都是无效的。

在我（重新）使用 SOAP-Server 进行身份验证后，我试图找到一种方法来强制 savon 重建 SOAP-Header（即使用新的 auth-token）。我不确定，这是一个 savon 问题还是一个红宝石问题。这是我到目前为止所拥有的。

```
class Soapservice
  extend Savon::Model

  # load stored auth-token
  @@header_data = YAML.load_file "settings.yaml"

  client wsdl: 'locally-cached-wsdl.xml', 
    soap_header: {'verifyingToken' => @@header_data}

  operations :get_authentification_token, :get_server_time

  # request a new auth-token and store it
  def get_authentification_token
    response = super(:message => {
        'oLogin' => {
            'Username' => 'username', 
            'Userpass' => 'password'
        }
    })

    settings = {
      'UserID' => response[:user_id].to_i,
      'Token' => response[:token], 
    }

    File.open("settings.yaml", "w") do |file|
        file.write settings.to_yaml
    end

    @@header_data = settings
  end

  def get_server_time
    return super()
    rescue Savon::SOAPFault => error
      fault_code = error.to_hash[:fault][:faultstring]
      if fault_code == 'Unauthorized Request - Invalide Token'
          get_authentification_token
          retry
      end
  end
end 
```

当我打电话

```
webservice = Soapservice.new
webservice.get_server_time 
```

使用无效令牌，它会重新验证并成功保存新令牌，但`retry`不会加载新标头（结果是无限循环）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:17:52.447

[我在这里添加了来自 GitHub-Issue 的](https://github.com/savonrb/savon/issues/371#issuecomment-12738511)rubiii 的答案以供将来参考：

```
class Soapservice

  # load stored auth-token
  @@header_data = YAML.load_file "settings.yaml"

  def initialize
    @client = Savon.client(wsdl: 'locally-cached-wsdl.xml')
  end

  def call(operation_name, locals = {})
    @client.globals[:soap_header] = {'verifyingToken' => @@header_data}
    @client.call(operation_name, locals)
  end

  # request a new auth-token and store it
  def get_authentification_token
    message = {
      'Username' => 'username', 
      'Userpass' => 'password'
    }
    response = call(:get_authentification_token, :message => message)

    settings = {
      'UserID' => response[:user_id].to_i,
      'Token'  => response[:token], 
    }

    File.open("settings.yaml", "w") do |file|
      file.write settings.to_yaml
    end

    @@header_data = settings
  end

  def get_server_time
    call(:get_server_time)
    rescue Savon::SOAPFault => error
      fault_code = error.to_hash[:fault][:faultstring]
      if fault_code == 'Unauthorized Request - Invalide Token'
        get_authentification_token
        retry
      end
  end

end 
```

rubiii 补充说：

> 请注意，我删除了 Savon::Model，因为您实际上不需要它，而且我不知道它是否支持此解决方法。如果您查看#call 方法，它会在每次请求之前访问并更改全局变量。

# java - Arraylist 中的比较器

> ID：14437842
> 
> 赞同：0
> 
> 时间：2013-01-21T11:41:05.157
> 
> 标签：java, sorting

我有一个我的用户定义类的列表。

```
class Customer{
  Integer age;
  String name;
  //getter & setter
}

Collections.sort(customerList, new Comparator <Customer>() {        
  public int compare(Customer o1, Customer o2) {
    // TODO Auto-generated method stub              
    if(o1.getAge()!=null && o2.getAge() != null)
        return o1.getDistance().compareTo(o2.getDistance());
    else
      return 1;
  }
}); 
```

现在我的**年龄**变量可能有一个**空**值或**客户的年龄**。所有**空**值都应**附加**在末尾，其余值应按**升序或降序排序（一切正常）？**

但是这段代码**抛出了一个异常：**

```
java.lang.IllegalArgumentException: Comparison method violates its general contract! 
```

请告诉我应该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:44:04.693

> 当且仅当 c.compare(e1, e2)==0 与 e1.equals(e2) 对于 >every S 中的 e1 和 e2。

参考[链接](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

元素集必须一致。不一致的等号将表现得散乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:48:35.233

您没有正确处理只有一个客户有年龄而另一个没有的情况。

此外，在其他情况下返回 1 似乎是不正确的。如果根据年龄没有差异，则返回 0 而不是 1。

# iphone - NSInternalInconsistencyException 添加比预期更多的元素

> ID：14437845
> 
> 赞同：0
> 
> 时间：2013-01-21T11:41:17.280
> 
> 标签：iphone, xcode, uitableview

我有以下代码

```
[self.tV beginUpdates];
NSIndexPath *iP = [NSIndexPath indexPathForRow:indexArray.count inSection:0];
[indexArray addObject:iP];
[self.tV insertRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationFade];
[self.tV endUpdates]; 
```

我收到以下错误

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:
'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an 
existing section after the update (2) must be equal to the number of rows contained in 
that section before the update (1), plus or minus the number of rows inserted or deleted
from that section (2 inserted, 0 deleted) and plus or minus the number of rows moved into
or out of that section (0 moved in, 0 moved out).' 
```

我不确定插入的 2 来自哪里。每次单击按钮时都会调用此代码。第一次在 indexArray 中有一个元素，如代码中所示，我又添加了一个元素，但似乎它正在尝试再次添加这两个元素。那是对的吗？

**更新**

```
-(UITableViewCell *)tableView:(UITableView *)tableView
    cellForRowAtIndexPath:(NSIndexPath *)indexPath{

  static NSString *CellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
      cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];
  }

  if(_imgList.count>0)
  {
      NSMutableString *fileName = [[NSMutableString alloc]
                                    initWithString:[NSString stringWithFormat: @"img"]];
      [fileName appendString: [_imgList objectAtIndex: _resultTag]];
      UIImage *image = [UIImage imageNamed: fileName];
      UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
      imageView.frame = CGRectMake(_xPos, 0, image.size.width, image.size.height);
      [cell addSubview: imageView];

      _xPos += SPACING;
  }

  return cell;
}

- (IBAction)btn:(UIButton *)sender {
    [self.resultList beginUpdates];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:indexArray.count inSection:0];
    [indexArray addObject:indexPath];
    [self.resultList insertRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationFade];
[self.resultList endUpdates];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:53:23.953

The issue is that you aren't changing the size of `_imgList` (from which, I assume, is derived the return value of the `tableView:numberOfRowsInSection:` method, but you don't show this method). By inserting a row in the table view, but not updating the data source to reflect that new row, you have created an inconsistency in your application.

To ensure that this doesn't happen, make the changes to your data source that reflect exactly the changes you are making to the rows, and do so before inserting or deleting any rows.

You don't show code that declares or instantiates `_imgList` so if it's not an `NSMutableArray` you'll need to make it one, and use methods like `addObject:`, `insertObject:atIndex:`, and `removeObjectAtIndex:` to insert and remove the appropriate objects. In your case, your code would become something like this:

```
NSInteger indexToAdd = _imgList.count;
[_imgList addObject:@"whatever"];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:indexToAdd 
                                            inSection:0];
[self.resultList insertRowsAtIndexPaths:@[indexPath]
                       withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:57:53.640

**。H**

```
int insertRow; 
```

**.m**

```
- (void)viewDidLoad
{
     self.insertRow = self.YourArr.count;
}

[self.tV beginUpdates];
    NSIndexPath *iP = [NSIndexPath indexPathForRow:self.insertRow inSection:0];
    [indexArray addObject:iP];
    [self.tV insertRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationFade];
    [self.tV endUpdates];

self.insertRow = self.insertRow + 1; 
```

**它可能会解决你的问题:)**

# html - 如何在不考虑浮动元素的情况下对齐元素中心的文本

> ID：14437846
> 
> 赞同：0
> 
> 时间：2013-01-21T11:41:17.940
> 
> 标签：html, css, twitter-bootstrap

好的，我得到了这个标记

```
<th class="ai1ec-weekday <?php if( $day['today'] ) echo 'ai1ec-today' ?>">
    <span class="ai1ec-weekday-date"><?php
    echo Ai1ec_Time_Utility::date_i18n( 'l', $date, true );
    ?> </span>
</th> 
```

它产生这个输出，因为跨度有`text-align: center`

![在此处输入图像描述](../Images/4a61909140f862d78b7269cebd7e6278.png)

现在我想添加一个浮动到右侧的按钮

```
<th class="ai1ec-weekday <?php if( $day['today'] ) echo 'ai1ec-today' ?>">
    <div class="btn-group pull-right">
        <button class="btn ai1ec-reveal-events"><?php _e( 'Reveal all events', AI1EC_PLUGIN_NAME ) ?></button> 
    </div>
    <span class="ai1ec-weekday-date"><?php
    echo Ai1ec_Time_Utility::date_i18n( 'l', $date, true );
    ?> </span>
</th> 
```

这就是我得到的

![在此处输入图像描述](../Images/bf4ccdb5ab88c9ae9cfe0b62439f11b2.png)

我想得到的是 mondais 仍然像以前一样居中，但我想在不使用绝对定位的情况下做到这一点（当然，如果可能的话）

CSS（我的意思是引导 CSS 除外）

```
.ai1ec-week-view th .ai1ec-weekday-date,
.ai1ec-oneday-view th .ai1ec-weekday-date {
  font-size: 10.5pt !important;
  font-weight: normal !important;
}
.ai1ec-week-view th .ai1ec-weekday-day {
  font-size: 9pt !important;
  font-weight: normal !important;
}
.ai1ec-month-view th, .ai1ec-oneday-view th {
    text-align: center !important;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:19:42.990

看到这种方法： http: [//jsbin.com/uxejes/1/edit](http://jsbin.com/uxejes/1/edit)
（仅在 Fx18 和 Chrome 上测试）

相关的CSS

```
button {
  float: right; 
  margin-right: -100%;
  position: relative;
  left: -100%;
}

span {
  display: block;
  text-align: center;
} 
```

按钮（带有`position: relative`）不会影响`span`元素内包含的文本的位置

# emacs - 无法在 emacs 中切换只读模式

> ID：14437847
> 
> 赞同：1
> 
> 时间：2013-01-21T11:41:18.143
> 
> 标签：emacs

我正在使用`emacs-live`作为我的`emacs`启动配置。我有`.jade`在 emacs 中打开时说的文件`Buffer is read only`。

但是，我可以在 Sublime Text 中编辑这些相同的文件。

我试图切换只读`C-x``C-q`无效。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:38:57.187

文件权限不应阻止 Emacs 允许您切换关联缓冲区的只读状态。

您可以尝试`M-x` `toggle-read-only` `RET`检查它是功能还是键绑定不起作用？

我假设这`C-x``C-q` *通常*适用于其他缓冲区？

# knockout.js - 剔除数组获取对象的不同值

> ID：14437849
> 
> 赞同：4
> 
> 时间：2013-01-21T11:41:27.550
> 
> 标签：knockout.js

我想像`ko.utils.arrayGetDistinctValues`在[这个小提琴](http://jsfiddle.net/rniemeyer/vdcUA/)中一样在一个数组中的多个属性上使用，所以我将数组映射到一个只有我想要的两个属性的数组

```
viewModel.justCategories = ko.dependentObservable(function() {
    var categories = ko.utils.arrayMap(this.items(), function(item) {
        return { catid : item.catid(), category : item.category() };
    });
    return categories.sort();
}, viewModel); 
```

然后我尝试使用`arrayGetDistinctValues`，但它似乎不适用于对象。

```
viewModel.uniqueCategories = ko.dependentObservable(function() {
    return ko.utils.arrayGetDistinctValues(viewModel.justCategories()).sort();
}, viewModel); 
```

[我修改过的小提琴在这里](http://jsfiddle.net/jimconstable/dDA4M/1/)

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-16T21:34:48.637

`arrayGetDistinctValues`仅适用于原始值。对于对象，您将需要不同的方法。这是一个有效的版本。

```
viewModel.uniqueCategories = ko.dependentObservable(function() {
    var seen = [];
    return viewModel.justCategories().filter(function(n) {
        return seen.indexOf(n.catid) == -1 && seen.push(n.catid);
    });
}); 
```

[http://jsfiddle.net/mbest/dDA4M/2/](http://jsfiddle.net/mbest/dDA4M/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T15:40:25.967

作为对 Michael Best 答案的更新，这里有一些使用更新的 KnockoutJS v3 代码约定（例如，dependentObservable = computed 和使用 arrayFilter 方法）：

```
var uniqueSizes = ko.computed({read: function() {
    var seen = [];
    return ko.utils.arrayFilter(viewModel.collection.vendorGearFilters(), function(f) {
        return seen.indexOf(f['size_abbr']()) == -1 && seen.push(f['size_abbr']());
    });
}, deferEvaluation: true}) 
```

# javascript - 在windows8中动态添加项目到listview

> ID：14437851
> 
> 赞同：0
> 
> 时间：2013-01-21T11:41:33.507
> 
> 标签：javascript, html, listview, windows-8

> **可能重复：**
> [ListView 在 Metro 应用程序中添加更多项目？](https://stackoverflow.com/questions/12783833/listview-add-more-items-in-metro-apps)

根据下图[第一部分]，我想在列表视图的末尾放置一个带有文本“更多”的图块（使用数组中的数据创建），点击后应该有一个弹出窗口 [如第二part of image] 在我使用 HTML/JavaScript 创建的 Windows8 应用程序中带有文本框和按钮。

任何人都可以帮我这个....

![在此处输入图像描述](../Images/ff8a79a3e1c3f683987584331e763d53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:26:11.627

这与您之前提出的问题相同，我在这里回答了这个问题： [ListView 在 Metro 应用程序中添加更多项目？](https://stackoverflow.com/questions/12783833/listview-add-more-items-in-metro-apps/12792437#12792437)

# php - how to install oembed to ckeditor

> ID：14437852
> 
> 赞同：0
> 
> 时间：2013-01-21T11:41:35.493
> 
> 标签：php, ckeditor, oembed

I want to add embed video in ckeditor.

is this correct?

1.  copy the folder into your plugins directory
2.  setting /ckeditor/config.js

> CKEDITOR.editorConfig = function( config ) {
> config.extraPlugins = 'oembed';
> 
> ```
> config.oembed_maxWidth = '560';
> 
> config.oembed_maxHeight = '315'; 
> ```
> 
> };

and include the plugin in the toolbar (how do I do this).

please help..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:05:20.033

您还应该将按钮添加到工具栏，如下所示：

```
CKEDITOR.replace( 'editor1', {
    extraPlugins: 'magicline,oembed,iframe',
    oembed_maxWidth: '560',
    oembed_maxHeight:  '315',
    toolbar: [
        [ 'Bold', 'Italic', 'oembed']
    ]
}); 
```

# wcf - Azure:Use different blobs in staging and production

> ID：14437857
> 
> 赞同：0
> 
> 时间：2013-01-21T11:42:10.267
> 
> 标签：wcf, azure, lucene.net

I'm developing a WCF clous service in windows Azure, and i use lucene indexing. I would like to implement new feutures in my service, and it will use a different different blob file, becouse the new feuture requires a different index structure. Is there any way to do it easyly?

For example: the production will use blob called: "index", and the staging will use a blob called "index_staging". I cant modify the current blob, because the current service will not able to work on the new index.

Thank for help.

T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:09:28.657

我建议您使用不同的存储帐户。将存储帐户用于生产，将一个存储帐户用于测试环境。例子：

*   myapp.blob.core.windows.net
*   myapp-test.blob.core.windows.net

当您部署到生产环境时，您将转到第一个，当您在本地开发或部署到测试环境时，您将转到第二个存储帐户。

# android - Storing large Number of images

> ID：14437863
> 
> 赞同：0
> 
> 时间：2013-01-21T11:42:28.390
> 
> 标签：android, image

I have lots of Images in my app right now i put all in drawable. images have been pre-compressed/optimized for mobile viewing. (But I want these all images in sdcard and use that location instead of drawable. because of large amount of images)

One of my requirements is that I be able to provide offline access for users. I am wondering what would be the most efficient way

of storing a large amount of images (around four hundred-several thousand)

So My Plan is that I will Store all images in sdcard(by making a folder in it) and now store link of these images in data base Table.

So App first fetch image path from DB Table then fetch file from sdcard and display it.

But my problem is Where should i put these images while developing app.

(Should i put all my images in drawable and then copy it sdcard programitically and then start using that location !!! )

1) How to store all these images in sd-card at the time of development of application. ? 2) So when I will deploy my app these all images should available inside package ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:48:44.233

如果您有大量图像，那么在第一次启动应用程序时，从远程位置下载图像并将它们存储在您的 SD 卡上并构建您的数据库表。将它们放在您的可绘制对象中然后将它们复制到您的 SD 卡是没有意义的。

编辑

如果您想从可绘制对象中复制图像并将其存储在 SD 卡上，那么您可以这样做 -

您必须首先将可绘制对象转换为位图对象。

```
Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.filenameindrawable); 
```

现在使用 FileOutputStream 将其存储在您的 SD 卡上

```
try {
       FileOutputStream out = new FileOutputStream("file on sd card");
       bmp.compress(Bitmap.CompressFormat.PNG, 90, out);
} catch (Exception e) {
       e.printStackTrace();
} 
```

虽然这不是推荐的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:59:29.513

在 SD 卡上存储应用程序图像不是一个好主意。因为如果有人在您的应用程序安装后没有 sd 卡或移除了 sd 卡，这些图像将无法用于 uor 应用程序。并且任何人都可以访问存储在 sd 卡中的那些图像。因此，投注者通过从远程位置下载图像并将它们存储在您的 SD 卡/内部文件系统上并更新您的数据库表，在应用程序首次启动时将这些图像存储在应用程序的内部文件系统中。

# python - 使用子进程将系统命令的结果保存到变量中

> ID：14437864
> 
> 赞同：0
> 
> 时间：2013-01-21T11:42:31.823
> 
> 标签：python, command, subprocess

我想获得在 linux 机器上运行的第一个界面。我正在使用`subproces` 并且我有以下代码：

```
def get_eth_iface():
    awk_sort = subprocess.Popen( ["-c", "ifconfig | cut -d ' ' -f 1 | grep eth | head -n 1" ], stdin= subprocess.PIPE, shell=True )
    awk_sort.wait()
    output = awk_sort.communicate()[0] 
```

但是这个结果将被打印到控制台并且不会被保存到变量中。如何将其重定向到变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:47:06.793

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)：

> 类似地，要在结果元组中获得除 None 以外的任何内容，您也需要给出`stdout=PIPE`和/或`stderr=PIPE`。

听起来是个好建议。添加`stdout=subprocess.PIPE`并看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:51:48.043

重定向`stdout`到`subprocess.PIPE`。以下对我有用。

```
import subprocess
def get_eth_iface():
    awk_sort = subprocess.Popen( ["dir" ], stdin= subprocess.PIPE, stdout= subprocess.PIPE)
    awk_sort.wait()
    output = awk_sort.communicate()[0]
    print output.rstrip()
get_eth_iface() 
```

# c# - 单元测试未显示在测试视图 VS2010 中

> ID：14437868
> 
> 赞同：0
> 
> 时间：2013-01-21T11:42:52.760
> 
> 标签：c#, visual-studio-2010, unit-testing, resharper

所以我在 Visual Studio 2010 中有这些单元测试，但它们没有出现在测试视图中。它们出现在 ReSharper 中，但我也很想在测试视图中看到它们。我已经尝试重建，进行完整构建，取消选中“禁用测试方法的后台发现”，我什至尝试在 ReSharper 中禁用单元测试，但无济于事。有任何想法吗？

# performance - OpenCL 和 CUDA 之间的非凡性能差距

> ID：14437875
> 
> 赞同：2
> 
> 时间：2013-01-21T11:43:10.403
> 
> 标签：performance, cuda, kernel, opencl

我在 CUDA 中编写了一个简单的平铺矩阵乘法。就像这样：

```
__global__ void matrixMultiplyShared(float * A, float * B, float * C,
                         int numARows, int numAColumns,
                         int numBRows, int numBColumns,
                         int numCRows, int numCColumns) {

    __shared__ float ds_A[TILE_WIDTH][TILE_WIDTH];
    __shared__ float ds_B[TILE_WIDTH][TILE_WIDTH];

    int bx = blockIdx.x; int by = blockIdx.y;
    int tx = threadIdx.x; int ty = threadIdx.y;

    int row = by * TILE_WIDTH + ty;
    int col = bx * TILE_WIDTH + tx;

    float Cvalue = 0.0;

// Loop over the M and N tiles required to compute the Pd element
    for (int m = 0; m < (numAColumns-1)/TILE_WIDTH+1; ++m) {
        if(row<numARows && m*TILE_WIDTH+tx < numAColumns){
            ds_A[ty][tx] = A[row*numAColumns + m*TILE_WIDTH+tx];
        } else {
            ds_A[ty][tx] = 0;
        }
        if(m*TILE_WIDTH+ty < numBRows && col < numBColumns){
            ds_B[ty][tx] = B[(m*TILE_WIDTH+ty)*numBColumns+col];
        } else {
            ds_B[ty][tx] = 0;
        }
        __syncthreads();
        if(row < numCRows && col < numCColumns){
            for (int k = 0; k < TILE_WIDTH; ++k)
                Cvalue += ds_A[ty][k] * ds_B[k][tx];
        }
        __syncthreads();
    }
    if(row < numCRows && col < numCColumns)
        C[row*numCColumns+col] = Cvalue;
} 
```

之后，我在 OpenCL 版本中使用了与上述相同的内核（有一些小的改动）来比较 CUDA 和 OpenCL 的性能。但结果却远远超出了我的预期。OpenCL 比 CUDA 快 6-7 倍。它有效吗？Nisght 的输出如下：

**CUDA：** ![CUDA Nisght 输出：Kernel Ex 时间：3.78s](../Images/b4b98e4d5d03f5b27a0281af2e0e12e3.png)

**开放式CL：** ![CUDA Nisght 输出：内核 Ex 时间：0.53s](../Images/14f1189528d672fd689b4f6a79112d01.png)

您可以看到启动应用程序和执行内核之间的巨大差距。为什么会这样？

* * *

我的 GPU 是：GTX 580 | 内核执行时间 (CUDA)：3.78s | Kernel Ex time (OpenCL): 0.53s |

CUDA 代码： http: [//pastebin.com/VQMp3Hba](http://pastebin.com/VQMp3Hba)

OpenCL 主机代码： http: [//pastebin.com/cjGYSLQf](http://pastebin.com/cjGYSLQf)

OpenCL 内核代码： http: [//pastebin.com/KKw3Ayz7](http://pastebin.com/KKw3Ayz7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:01:53.183

您可以尝试在代码中插入显式计时器，而不是信任工具的输出。可能是工具错误的情况。

# css - 100% 浏览器宽度 Div 在较小的 Div 内

> ID：14437878
> 
> 赞同：1
> 
> 时间：2013-01-21T11:43:20.010
> 
> 标签：css, html, width

我有一个 div ，`width: 1000px`里面是一个孩子，我希望跨越浏览器窗口的整个宽度。

问题是，我不知道如何覆盖以前的宽度继承。

我可以将它放在我的容器 div 之外，但这将是一个巨大的不便和解决方法，除非这当然同样麻烦。

**标记：**

```
<div class="centreContainer">

    <div class="menuContainer"></div>

</div> 
```

**CSS：**

```
html, body
{
    margin: 0;
    padding: 0;
}

.centreContainer
{
    margin: auto;
    width: 1000px;
}

.menuContainer
{
    width: <what to do>;
    height: 420px;
} 
```

最好我想要一个仅使用 CSS 的解决方法，我正在考虑一些愚蠢的 Javascript 解决方案，您可以在其中获取浏览器窗口的宽度，然后将 menuContainer 的宽度设置为：

`<variable> / 10` *（10 因为 1000 / 100 = 10，其中 1000 是中心容器的宽度）*

并设置 menuContainer`margin: auto;`使其居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:10:31.297

您可以尝试将 .menuContainer 作为绝对位置放入相对父位置。[JSfiddle](http://jsfiddle.net/9rJ7h/)

```
#root{
display:block;
position: relative; 
```

}

```
.menuContainer{
position:absolute;
top: 50px;
left: 0; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:50:05.373

只需使用`position:absolute`此[jsfiddle中显示的](http://jsfiddle.net/ygGvm/)

```
.menuContainer
{
    width: 100%;
    height: 420px; 
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:47:07.877

Just use `position`:

```
.menuContainer
{
    position: absolute;
    width: 100%;
    height: 420px;
} 
```

# html - Segoe UI 可以在 Mac 上运行吗？

> ID：14437881
> 
> 赞同：16
> 
> 时间：2013-01-21T11:43:27.970
> 
> 标签：html, css, fonts

Segoe UI 字体是否内置在浏览器中？如果我的访问者从 Mac 上查看，它会正常工作还是我必须为此设置 CSS url？我的设计师说它只有在我们设置 URL 时才会起作用，但是我删除了

```
@font-face
{
    font-family: "Segoe UI";
    src: url("fonts/Segoe UI.ttf") format("truetype");
    font-style: normal;
    font-weight: normal;
} 
```

并且它至少在 Windows 7 上仍然有效。不过我没有 Mac 来测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T13:51:04.697

Segoe UI 字体未内置在浏览器中。它附带一些 Microsoft 软件。在 Mac 上，它很可能不可用，尽管用户可能已经单独或作为某些软件包的一部分获得了它。

您应该删除`@font-face`规则和上传到服务器的字体文件。Segoe UI 受版权保护，未经版权所有者 Microsoft（可能不会给予许可）的许可，不得将其用作网络字体。

您将需要一些其他策略，例如使用另一种字体作为基本字体或作为系统中没有 Segoe UI 的访问者的备用字体。[Google 字体](http://www.google.com/webfonts)Open Sans与Segoe UI 非常相似，而且它是免费的（它有 10 种样式，包括 Book、Normal、Semi-Bold、Bold 和 Extra-Bold 粗细）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T11:47:16.047

它适用于任何装有 Office 2007、2010、Vista 或 7 的计算机：

> Segoe UI 字体系列可以作为 Microsoft Office 2007、Microsoft Office 2010、Windows Vista 或 Windows 7 的一部分获得。

如果用户下载了 Windows Live 软件包，也可以在 XP 上运行：

> 如果用户安装了 Windows Live Messenger 或 Windows Live Mail，则 Segoe UI 会安装到 Windows XP 中

[来源](http://en.wikipedia.org/wiki/Segoe)

对于没有上述内容的任何计算机，您需要使用`@font-face`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-27T12:24:15.100

我想补充一点，网络字体（谷歌字体）现在已经是欧盟法律的数据保护问题（因为谷歌会保护一些个人信息），但它们的真正问题是，它们会导致时间滞后加载（0.6 秒），然后还会导致布局移位（CLS）。我使用网络字体 10 年了。现在我回到一些预装的字体......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T11:47:55.483

是的。

您可能还想在 OTF 中提供字体。

您可以在此处找到提供字体的可用格式列表：http: [//www.w3.org/TR/css3-webfonts/#font-reference](http://www.w3.org/TR/css3-webfonts/#font-reference)

您可以在此处找到将 TTF 转换为各种网络字体的转换器：http: [//www.font2web.com/](http://www.font2web.com/)

# c# - 如何使用 C# 获取所有正在运行的 SQL 作业的包？

> ID：14437882
> 
> 赞同：0
> 
> 时间：2013-01-21T11:43:27.983
> 
> 标签：c#, sql, sql-server, ssis

我想制作一个桌面应用程序来读取 SQL 管理工作室上的所有工作并在树视图中返回它们.. 我所需要的只是了解或读取所有工作并返回每个工作的包的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:59:03.727

对于像您这样的问题，MSDN 通常是一个很好的资源。这是枚举给定 SQL 服务器上的 SQL 作业的方法。[这](http://msdn.microsoft.com/en-us/library/ms210360.aspx)是在 C# 上下文中使用的示例。干杯！

# jquery - jquery查找具有匹配属性值的元素

> ID：14437883
> 
> 赞同：3
> 
> 时间：2013-01-21T11:43:29.403
> 
> 标签：jquery, attributes, selector, match

我尽量保持简单，

我在每个循环中生成了一个隐藏的 html 结构，将视频标题作为文本，将视频 ID 作为`data-id=""`属性

```
<ul id="videoholder" style="display:none;">
<li class="videodata" data-id="sD__BIzTVlE">great title</li>
<li class="videodata" data-id="GN8B2l3ouxc">even greater</li>
</ul> 
```

在同一个循环中，我正在生成用于更改视频标题的文本字段，如下所示：

```
<input type="text" name="titel[0]" class="float videotitel" data-id="sD__BIzTVlE" value="great title" id="titel[0]" /></div> 
```

`<li>`现在我需要绑定更改文本字段，将匹配中的文本替换为data-id

我试过这样做：

```
$('.videotitel').bind('keyup', function(){
var data = $(this).attr('data-id');
var title = $(this).val();  
$('.videodata[data-id*='data']').text(title) ;
}) 
```

但我无法插入变量`data`

```
SyntaxError: missing ) after argument list 
```

有人知道如何完成这项工作吗？多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:45:33.863

您需要在选择器中连接数据。

改变

```
$('.videodata[data-id*='data']').text(title) ; 
```

到

```
$('.videodata[data-id*='+ data + ']').text(title) ; 
```

# codeigniter - CodeIgniter 将多个文件上传到多个目录

> ID：14437886
> 
> 赞同：2
> 
> 时间：2013-01-21T11:43:35.707
> 
> 标签：codeigniter

```
 $configUpload = array();
        $configUpload['upload_path'] = './directory_1/';
        $configUpload['max_size'] = '6000';
        $configUpload['max_width'] = '9500';
        $configUpload['max_height'] = '9500';
        $configUpload['allowed_types'] = 'png|jpg|jpeg|gif|bmp';
        $this->load->library('upload',$configUpload);
        $upload_1 = $this->upload->do_upload('product_image');

        if($upload_1 === FALSE)
            $product_data = $this->upload->data();              
               continue;            
        $config = array();
        $config['upload_path'] = './directory_2/';
        $config['max_size'] = '5000';
        $config['max_width'] = '10000';
        $config['max_height'] = '10000';
        $config['allowed_types'] = 'png|jpg|jpeg|gif|bmp';
        $this->load->library('upload', $config);
        $upload = $this->upload->do_upload('product_image_2'); 
```

当我提交上传时，图像文件位于同一目录（directory_1）中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T10:10:17.450

需要初始化你的类

```
$configUpload = array();
                    $configUpload['upload_path'] = 'uploads/canvas_uploads/upload_save/';
                    $configUpload['allowed_types'] = 'png|jpg|jpeg|gif|bmp';
                    $configUpload['file_name'] = date("Ymd") . time();
                    $configUpload['overwrite'] = true;
                    $this->load->library('upload', $configUpload);
                    $this->upload->initialize($configUpload);
                    $upload_1 = $this->upload->do_upload('file_input');

                    $config['upload_path'] = 'uploads/canvas_uploads';
                    $config['allowed_types'] = 'jpg|png|jpeg|gif|bmp|tif';
                    $config['file_name'] = date("Ymd") . time();
                    $config['overwrite'] = true;
                    $this->load->library('upload', $config);
                    $this->upload->initialize($config);
                  $this->upload->do_upload("file_input");
```

# c++ - 编译器内存屏障和互斥锁

> ID：14437895
> 
> 赞同：11
> 
> 时间：2013-01-21T11:44:08.060
> 
> 标签：c++, multithreading, compiler-construction

posix 标准说，诸如互斥锁之类的东西将强制执行内存同步。但是，编译器可能会重新排序内存访问。说我们有

```
lock(mutex);
setdata(0);
ready = 1;
unlock(mutex); 
```

它可能会通过编译器重新排序更改为下面的代码，对吧？

```
ready = 1;
lock(mutex);
setdata(0);
unlock(mutex); 
```

那么互斥锁如何同步内存访问呢？更准确地说，编译器如何知道不应该在锁定/解锁之间发生重新排序？

实际上在这里对于单线程方面，就绪分配重新排序是完全安全的，因为在函数调用锁（互斥锁）中不使用就绪。

已编辑：因此，如果函数调用是编译器无法通过的，我们可以将其视为编译器内存屏障，例如

```
asm volatile("" ::: "memory") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:53:48.197

一般的答案是，如果你想将它用于 POSIX 目标，你的编译器应该支持 POSIX，并且这种支持意味着它应该知道避免在锁定和解锁之间重新排序。

也就是说，这种知识通常以一种微不足道的方式获得：编译器不会在调用可能使用或修改它们的外部函数时重新排序对（不可证明的本地）数据的访问。它应该知道一些*特别*的东西`lock`并且`unlock`能够重新排序。

不，这并不像“对全局函数的调用始终是编译器障碍”那么简单——我们*应该*添加“除非编译器知道该函数的特定内容”。它确实发生了：例如`pthread_self`在 Linux (NPTL) 上声明了`__const__`属性，允许`gcc`跨`pthread_self()`调用重新排序，甚至完全消除不必要的调用。

We can easily *imagine* a compiler supporting function attributes for acquire/release semantics, making `lock` and `unlock` less than a *full* compiler barrier.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T11:51:37.483

编译器不会在不清楚是否安全的地方重新排序。在您的“假设”示例中，您不是在提议重新排序的内存访问，而是在询问如果编译器完全更改代码顺序会怎样——它不会。编译器可能会做的事情是改变实际内存读/写的顺序，而不是函数调用（无论是否考虑这些内存访问）。

编译器可能重新排序内存访问的示例...假设您有以下代码：

```
a = *pAddressA;
b = *pAddressB; 
```

让我们考虑一下值`pAddressB`在寄存器`pAddressA`中而不在寄存器中的情况。编译器首先读取地址 B 是公平的游戏，然后将值移动`pAddressA`到同一个寄存器中，以便可以接收新位置。如果这些访问之间碰巧有函数调用，编译器就不能这样做。

# asp.net-web-api - 测试项目扫描我的控制器两次

> ID：14437897
> 
> 赞同：3
> 
> 时间：2013-01-21T11:44:29.640
> 
> 标签：asp.net-web-api, structuremap, nservicebus, specflow, fakeiteasy

我为这个特定的帖子创建了一个 github 存储库，可以在[https://github.com/CrazyInCode/WebApiNServiceBus找到](https://github.com/CrazyInCode/WebApiNServiceBus)

我要做的是为我的 WebApi 应用程序编写测试。在我的规格测试中，我...

1.  创建一个 HttpClient 来使用 WebApi
2.  通过 HttpClient 调用我的 WebApi
3.  将结果序列化为列表
4.  确保已调用 NServiceBus

所有这些都可以在[这里](https://github.com/CrazyInCode/WebApiNServiceBus/blob/master/WebApiNServiceBus.Proj.Specs/Steps/GetItemsSteps.cs)找到。

我也在使用 StructureMap，我猜它会扫描我的 ApiControllers。NServiceBus 似乎也扫描了我的 ApiControllers，因为当我尝试运行我的测试时，我得到了错误：

```
Multiple types were found that match the controller named 'values'. This can happen if the route that services this request ('api/{controller}/{id}') found multiple controllers defined with the same name but differing namespaces, which is not supported. The request for 'values' has found the following matching controllers: WebApiNServiceBus.Proj.Controllers.ValuesController WebApiNServiceBus.Proj.Controllers.ValuesController 
```

真正发现错误并不容易。我必须...

1.  在 Global.cs（Specs 项目）的第 21 和 26 行放置一个断点
2.  调试测试并确保测试在第一个断点处停止
3.  浏览`http://localhost:81/ValService/api/values/assets`将加载的...
4.  继续测试并确保测试在最后一个断点处停止
5.  在网络浏览器中查看结果

如果我删除所有包含 IBus 的行，并执行上述步骤 - 测试通过。显然 NServiceBus 与测试失败有关。

正如我之前所说，NServiceBus 似乎会扫描我的程序集以查找控制器。为了防止这种情况，我尝试在 Global.cs 中添加这一行来指定 NServiceBus 应该扫描的内容 - 但没有成功。

```
Configure.With(Enumerable.Empty<Assembly>()); 
```

解决方案中的主要组件是 WebApi、NServiceBus、StructureMap、FakeItEasy 和 SpecFlow。

我被困住了。我怎样才能使我的测试通过？

编辑：也许解决方案是让 WebApi 不注册控制器 - 把它留给 NServiceBus？我怎么能试试这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:41:31.620

这可能不是您可能正在寻找的答案，但这些程序集被加载了两次（只需使用`System.AppDomain.CurrentDomain.GetAssemblies()`）：

```
System.AppDomain.CurrentDomain.GetAssemblies()
{System.Reflection.RuntimeAssembly[70]}
    [0]: {mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [1]: {JetBrains.ReSharper.TaskRunnerFramework, Version=6.1.1000.82, Culture=neutral, PublicKeyToken=1010a0d8d6380325}
    [2]: {System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [3]: {System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [4]: {JetBrains.ReSharper.UnitTestRunner.nUnit, Version=6.1.1000.82, Culture=neutral, PublicKeyToken=1010a0d8d6380325}
    [5]: {System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [6]: {nunit.core.interfaces, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77}
    [7]: {nunit.core, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77}
    [8]: {nunit.util, Version=2.5.10.11092, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77}
    [9]: {WebApiNServiceBus.Proj.Specs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [10]: {System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [11]: {StructureMap, Version=2.6.4.0, Culture=neutral, PublicKeyToken=e60ad81abae3c223}
    [12]: {System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [13]: {TechTalk.SpecFlow, Version=1.9.0.77, Culture=neutral, PublicKeyToken=0778194805d6db41}
    [14]: {nunit.framework, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77}
    [15]: {Anonymously Hosted DynamicMethods Assembly, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null}
    [16]: {System.Web.Http.SelfHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [17]: {System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [18]: {WebApiNServiceBus.Proj, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [19]: {System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [20]: {System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [21]: {SMDiagnostics, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [22]: {System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [23]: {System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [24]: {Newtonsoft.Json, Version=4.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed}
    [25]: {System.ComponentModel.DataAnnotations, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [26]: {Microsoft.VisualStudio.Debugger.Runtime, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [27]: {NServiceBus, Version=3.3.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c}
    [28]: {FakeItEasy, Version=1.7.4626.65, Culture=neutral, PublicKeyToken=eff28e2146d5fd2c}
    [29]: {Castle.Core, Version=3.1.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc}
    [30]: {FakeItEasy, Version=1.7.4626.65, Culture=neutral, PublicKeyToken=eff28e2146d5fd2c}
    [31]: {log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821}
    [32]: {Newtonsoft.Json, Version=4.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed}
    [33]: {NServiceBus.Core, Version=3.3.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c}
    [34]: {NServiceBus, Version=3.3.0.0, Culture=neutral, PublicKeyToken=9fc386479f8a226c}
    [35]: {nunit.framework, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77}
    [36]: {StructureMap, Version=2.6.4.0, Culture=neutral, PublicKeyToken=e60ad81abae3c223}
    [37]: {System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [38]: {System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [39]: {System.Web.Http.SelfHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [40]: {System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [41]: {TechTalk.SpecFlow, Version=1.9.0.77, Culture=neutral, PublicKeyToken=0778194805d6db41}
    [42]: {WebApiContrib.IoC.StructureMap, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [43]: {WebApiNServiceBus.Proj, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [44]: {WebApiNServiceBus.Proj.Specs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [45]: {Castle.Core, Version=3.1.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc}
    [46]: {System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [47]: {System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [48]: {System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [49]: {System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [50]: {System.Transactions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [51]: {log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821}
    [52]: {System.ComponentModel.Composition, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [53]: {System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [54]: {System.Data.SqlXml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [55]: {System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [56]: {System.ServiceModel.Internals, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [57]: {System.Runtime.DurableInstancing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [58]: {System.Xaml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089}
    [59]: {System.Messaging, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [60]: {System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [61]: {Microsoft.Transactions.Bridge, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [62]: {System.Web.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [63]: {DynamicProxyGenAssembly2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=a621a9e7e5c32e69}
    [64]: {WebApiContrib.IoC.StructureMap, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null}
    [65]: {Accessibility, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [66]: {System.Configuration.Install, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [67]: {System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35}
    [68]: {System.DirectoryServices.Protocols, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a}
    [69]: {System.Xml.Linq, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089} 
```

当您实际查看该位置时，它会显示以下内容：

```
System.AppDomain.CurrentDomain.GetAssemblies()[43].Location
"C:\\Users\\alik\\GitHub\\WebApiNServiceBus\\WebApiNServiceBus.Proj.Specs\\bin\\Debug\\WebApiNServiceBus.Proj.dll"
System.AppDomain.CurrentDomain.GetAssemblies()[44].Location
"C:\\Users\\alik\\GitHub\\WebApiNServiceBus\\WebApiNServiceBus.Proj.Specs\\bin\\Debug\\WebApiNServiceBus.Proj.Specs.dll"
System.AppDomain.CurrentDomain.GetAssemblies()[9].Location
"C:\\Users\\alik\\AppData\\Local\\Temp\\nfx3urho.nhb\\WebApiNServiceBus.Proj.Specs\\assembly\\dl3\\6d69b640\\baacb725_f5f7cd01\\WebApiNServiceBus.Proj.Specs.dll"
System.AppDomain.CurrentDomain.GetAssemblies()[18].Location
"C:\\Users\\alik\\AppData\\Local\\Temp\\nfx3urho.nhb\\WebApiNServiceBus.Proj.Specs\\assembly\\dl3\\180be185\\4a3f842e_f3f7cd01\\WebApiNServiceBus.Proj.dll" 
```

**我相信这与单元测试的运行方式有关。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T14:25:48.403

**更新：从[FakeItEasy 1.19.0 开始](https://github.com/FakeItEasy/FakeItEasy/releases/tag/1.19.0)，这不应该发生。[如果您通过实现自定义 Bootstrapper 明确要求此行为，](https://github.com/FakeItEasy/FakeItEasy/wiki/Bootstrapper#what-does-the-bootstrapper-do) FakeItEasy 只会扫描磁盘上的程序集。**

我不知道 StructureMap 和 NServiceBus 是如何工作的，但幸运的是，就在今天早上，我发表了一篇关于[FakeItEasy 如何扫描程序集](http://blairconrad.wordpress.com/2013/07/08/better-formatter-auto-discovery-in-fakeiteasy-1-13-0/)的博客文章，我认为它可以为您提供一些答案。

亮点：您看到的程序集副本以及使用 列出的@Aliostad`System.AppDomain.CurrentDomain.GetAssemblies()`是卷影副本，几乎可以肯定是由 ReSharper 测试运行程序制作的。您可以指示跑步者不要制作这些副本。

1.13 版之前的 FakeItEasy 将扫描应用程序域中的所有程序集和应用程序目录中的所有 DLL - 这将导致在启用卷影复制时加载重复的程序集。

对于 1.13，有两个优化。*第一个是如果一个程序集已经加载，如果位置匹配*，它将不会从文件系统重新加载它。不幸的是，卷影副本无法通过此检查。

第二个优化*可能*对您有所帮助 - FakeItEasy 将从磁盘加载程序集仅用于反射，如果程序集不引用 FakeItEasy，则不会完全加载，也不会扫描其类型。由于应完全加载更少的程序集，因此您可以避免重复类型问题。

我建议选择 FakeItEasy 1.13。尝试打开和关闭卷影副本。哎呀，即使只是关闭当前版本的卷影副本也可能会有所帮助。

# deployment - 覆盖现有的 Heroku 应用程序

> ID：14437903
> 
> 赞同：21
> 
> 时间：2013-01-21T11:44:59.510
> 
> 标签：deployment, heroku, overwrite

我有一个托管在 Heroku 上的 Sinatra 应用程序。最近，我一直在从不同的文件夹开发相同的应用程序。它不是一个分支，它只是一个内容相同但代码不同的并行应用程序/目录。我想将这个新应用推送到 Heroku，覆盖当前存在的应用。我不想在本地合并两者，只是从新的继续，同时保留旧的。正确的命令顺序是什么？我对 running 有疑问`heroku create`，因为这将导致一个新的应用程序。谢谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-22T21:09:15.080

首先，这当然是可能的。这个过程非常简单，首先我们需要将 Heroku 作为新的远程存储库添加到您的新应用程序中。

```
heroku git:remote -a project 
```

您可以用您的 Heroku 应用程序名称替换“项目”。其次，您需要强制推动 Heroku。

```
git push -f heroku master 
```

注意：我们使用“-f”来强制推送。

# asp.net - 在没有安装 Excel 的情况下将 MS Excel 与 ASP.NET WebForms 一起使用？

> ID：14437904
> 
> 赞同：1
> 
> 时间：2013-01-21T11:45:00.477
> 
> 标签：asp.net, excel, ms-office

急需帮助！！！

我正在开发一个 ASP.NET Webforms 应用程序，该应用程序读取 MS Excel 电子表格并将数据加载到 SQL Server 中。该应用程序在 Win Server 2003（安装了 MS Office）上运行良好。

在我们将软件迁移到 Win Server 2008（未安装 MS Office）期间，应用程序失败并显示 COM 错误消息，“正在检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂由于以下错误而失败：80040154”。

我假设这是因为即使我们在应用程序子目录中有 Microsoft.Office.Interop.Excel.dll，应用程序也找不到 Excel 应用程序。

现在，问题来了。我们的基础架构团队拒绝在服务器上安装 MS Office 或 Excel。他们坚持声称有一些变通方法可以让应用程序在不安装 ms office 或 excel 的情况下与 Excel 一起工作。

就个人而言，我从来没有遇到过任何这样的解决方案，我读过的文章似乎证实了这一点？？？

有没有人知道在没有安装 MS Office 或 Excel 时是否有任何方法可以让 ASP.NET 应用程序与 MS Excel 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:28:19.850

MS 不支持 ASP.Net [http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)的 office 互操作，因为它可能表现出不稳定的行为。

有很多库可以让您在不安装 Excel 的情况下使用 Excel 文档，例如：[NPOI](http://npoi.codeplex.com/)、[MS Open XML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)和[EPPlus](http://epplus.codeplex.com/)

# android - MediaMetadataRetriever setdatasource 出错

> ID：14437905
> 
> 赞同：1
> 
> 时间：2013-01-21T11:45:01.537
> 
> 标签：android, android-mediaplayer

我对 MediaMetadataRetriever setdatasource 方法有疑问。我创建了一个简单的项目。main.xml 只有一个 textview，它应该显示 music.mp3 的参数。mp3 在项目原始文件中。mainActivity 看起来像：

```
public class MainActivity extends Activity {

 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tvMain = (TextView)findViewById(R.id.textView_songParam);
    // load data file
    MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
    metaRetriever.setDataSource(R.raw.music);

    String out = "";
    // get mp3 info
    out += metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE);
    out += "\n";
    out += metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST);
    out += "\n";
    //out += metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUM);
    //out += "\n";
    //out += metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_YEAR);
    //out += "\n";
    // convert duration to minute:seconds
    String duration = metaRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
    long dur = Integer.parseInt(duration);
    String seconds = String.valueOf(dur % 60);
    String minutes = String.valueOf(dur / 60000);
    out += "Length: [ " + minutes + "m" + seconds + "s ]\n";

    // close object
    metaRetriever.release();
    // display output
    tvMain.setText(out);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

我在这里做错了什么，我在哪里设置数据源？我不明白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:35:49.447

您将整数传递给 setDataSource 因为 R.raw.music 返回与文件相关的资源 id，而不是文件的路径。您需要将路径或文件描述符作为参数传递给 setDataSource。试试这个代码：

```
 AssetFileDescriptor afd = getResources().openRawResourceFd(R.raw.music);
    if (afd != null) {
        MediaMetadataRetriever metaRetriever = new MediaMetadataRetriever();
        metaRetriever.setDataSource(afd.getFileDescriptor());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T21:27:15.713

实际上，您可以使用类似的东西：

```
final AssetFileDescriptor afd=getResources().openRawResourceFd(R.raw.music);
final MediaMetadataRetriever mediaMetadataRetriever=new MediaMetadataRetriever();
mediaMetadataRetriever.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T15:26:33.697

我有同样的错误。我的解决方案与@android 开发人员的方向相同。

检查您是否可以通过`ExtractMetadata`. 如果不是，则呼叫可能有问题`setDataSource()`或视频格式/编解码器错误。

这段代码对我有用。

```
AssetFileDescriptor afd=getAssets().openFd("t.mp4");
mediaMetadataRetriever.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

我必须提供`afd.getStartOffset()`和`afd.getLength()`

也许它可以帮助您走上正轨。

# linq - 限制使用 LINQ 返回的深度嵌套的子记录

> ID：14437908
> 
> 赞同：0
> 
> 时间：2013-01-21T11:45:09.637
> 
> 标签：linq, nhibernate, linq-to-sql

给定这个对象结构，我如何带回一个 WorkItem，它是报告、行和学生，但只有学生的名字是“鲍勃”的行（我想省略包含“爱丽丝”的行'和'克莱尔'）。

> WorkItem
> ----Report1（保存在 WorkItem.Reports 集合中）
> --------ReportRow1（保存在 Report.ReportRows 集合中）
> ------------Student.Name = 'Alice'
> 
> --------ReportRow2（保存在 Report.ReportRows 集合中）
> ------------Student.Name = 'Bob'
> 
> --------ReportRow3（保存在 Report.ReportRows 集合中）
> ------------Student.Name = 'Claire'

（对不起格式）

我认为这样的事情会起作用，但它仍然会带回所有 3 行

```
 WorkItem found = (from workItem in session.Query<WorkItem>()
                      from report in workItem.Reports
                      from row in report.ReportRows
                      where workItem.Id == 1 && row.Student.Name == "Bob"
                      select workItem)
                     .SingleOrDefault<WorkItem>(); 
```

**更新** 我也试过这个，认为它只会在我实际尝试使用它们时带回结果（它确实如此）但查看日志，它仍然为每个学生做一个选择（我希望'where'子句在最后的 foreach 循环**只会**带回我感兴趣的那个。

```
 var query = from workItem in session.Query<WorkItem>()
                      where workItem.Id == 1 
                      select workItem;

    WorkItem found = query.SingleOrDefault<WorkItem>();

    foreach (var report in found.Reports)
    {
        foreach (var row in report.ReportRows.Where(x => x.Student.Name == "Bob"))
        {
            Console.WriteLine("--" + row.Student.Name);
        }
    } 
```

在 Ocelot20 的帮助下，这是我目前最好的尝试：

```
 var result = (from workItem in session.Query<WorkItem>()
                      .FetchMany(x => x.Reports) 
                      .ThenFetchMany(y => y.ReportRows.Where(z => z.Student.Name == "Bob"))
                  where workItem.Id == 1
                  select workItem); 
```

唯一不起作用的是学生姓名的*Where*子句。如果我删除它，我会得到一个结果（尽管行太多）。如果我能正确使用*where*子句，我认为它将带回我想要的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:07:30.190

从我在这里看到的，你只选择了一个*`WorkItem`*. 您正在执行限制`WorkItems`返回的连接，但您仍然*只选择*a`WorkItem`而不是告诉它选择特定`Reports`的 ,`ReportRows`等。所以基本上您的查询是说：“只给我`WorkItems`一个`Id`可以与学生连接的 1叫鲍勃”。请注意缺少：“然后*仅*使用`WorkItem`适当的`ReportRows`.

我的猜测是你正在做这样的事情：

```
WorkItem found = (from workItem in session.Query<WorkItem>()
                      from report in workItem.Reports
                      from row in report.ReportRows
                      where workItem.Id == 1 && row.Student.Name == "Bob"
                      select workItem).SingleOrDefault<WorkItem>();

// Doing something to select `ReportRows` without filtering them:
var someSelection = found.Reports.First().ReportRows; 
```

根据你如何设置延迟加载，`ReportRows`在你在线调用它之前甚至不会被查询`someSelection`。此时，它对您要过滤的内容一无所知。您在这里有几个选择。首先，一旦您已经加载了`WorkItem`类似的内容，您就可以过滤第二个查询中的项目：

```
// Filter on the second query:
var someSelection = found.Reports.First().ReportRows
                                         .Where(rr => rr.Student.Name == "Bob"); 
```

或者您可以更改您的查询以显式选择工作项和相关行：`select new { workItem, reportRows = // select specific rows with a where clause here. }`.

最后，休眠功能可以指定应将哪些相关实体预加载到您选择的实体中。我知道实体框架允许您`Where`在相关实体上添加子句，但我没有使用 nhibernate 来知道您是否可以执行以下操作：

```
var customers = session.Query<Customer>()
                       .FetchMany(c => c.Orders.Where(o => o.Amount == 100); 
```

如果这可行，这可以应用于您的查询，以告诉 nhibernate 加载名称为“Bob”`WorkItem`的相关行。`Student`

# android - Achartengine 组合图

> ID：14437911
> 
> 赞同：2
> 
> 时间：2013-01-21T11:45:19.810
> 
> 标签：android, achartengine

我想创建节点和边，所以我使用了带有散点图和折线图的组合图。但是我无法将一个根节点连接到它的子节点..相反，它只是连接所有子节点，只有两个子节点连接到根...任何人都可以告诉我哪里出错了...下面我使用的代码

```
public GraphicalView combinedChart(){

       int[] x = {3};

       double[] values = {50};

       XYSeries series = new XYSeries("App");
       int length = x.length;

       for (int k = 0;k < length; k++)
       {
           series.add(x[k], values[k]); 
       }

       int[] x1 = {1,2,4,5};

       double[] values1 = {70,30,30,70};

       XYSeries series1 = new XYSeries("Info");
       int length1 = x1.length;

       for (int k = 0;k < length1; k++)
       {
           series1.add(x1[k], values1[k]); 
       }

       /*int[] x2 = {1,5};

       double[] values2 = {70,70};

       XYSeries series2 = new XYSeries("Dest");
       int length2 = x2.length;

       for (int k = 0;k < length2; k++)
       {
           series2.add(x2[k], values2[k]); 
       }*/

        int[] x3 = {3,1,3,2,3,4,3,5};
        int[] y3 = {50,70,50,30,50,30,50,70};

        TimeSeries series3 = new TimeSeries("Line1");

        for(int i=0; i<x3.length; i++){
            series3.add(x3[i], y3[i]);
        }

       XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
       dataset.addSeries(series);
       dataset.addSeries(series1);
       //dataset.addSeries(series2);
       dataset.addSeries(series3);

       XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
       XYSeriesRenderer renderer = new XYSeriesRenderer();
       XYSeriesRenderer renderer1 = new XYSeriesRenderer();
       //XYSeriesRenderer renderer2 = new XYSeriesRenderer();
       XYSeriesRenderer renderer3 = new XYSeriesRenderer();

       renderer.setColor(Color.BLUE);
       renderer.setPointStyle(PointStyle.SQUARE);
       renderer.setFillPoints(true);

       renderer1.setColor(Color.GREEN);
       renderer1.setPointStyle(PointStyle.CIRCLE);
       renderer1.setFillPoints(true);

       /*renderer2.setColor(Color.MAGENTA);
       renderer2.setPointStyle(PointStyle.CIRCLE);
       renderer2.setFillPoints(true);*/

       renderer3.setColor(Color.RED);

       mRenderer.addSeriesRenderer(renderer);
       mRenderer.addSeriesRenderer(renderer1);
       //mRenderer.addSeriesRenderer(renderer2);
       mRenderer.addSeriesRenderer(renderer3);
       mRenderer.setPointSize(10f);

       String[] types = new String[] { ScatterChart.TYPE,ScatterChart.TYPE,LineChart.TYPE};
       final GraphicalView lv = ChartFactory.getCombinedXYChartView(this, dataset, mRenderer, types);

      // final GraphicalView lv = ChartFactory.getScatterChartView(this, dataset, mRenderer);
       return lv;

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:08:25.963

AChartEngine 用于显示数据图表而不是用于显示图形。我建议你将你的值添加到系列中，X 以升序排列，否则你会得到不可预测的行为。

# ios - UIImagePickerController 在 iPad 模拟器上崩溃

> ID：14437913
> 
> 赞同：0
> 
> 时间：2013-01-21T11:45:29.530
> 
> 标签：ios, ipad, crash, uiimagepickercontroller, uipopovercontroller

我正在尝试在弹出窗口中显示 UiImagePicker，因为它应该为 iPad 完成。But when a picture is selected and *imagePickerController:didFinishPickingMediaWithInfo:* is triggered, I get the following log:

**未找到命名服务“com.apple.PersistentURLTranslator.Gatekeeper”。assetsd 已关闭或配置错误。事情不会像你期望的那样工作。**

这是我的代码：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   // Do any additional setup after loading the view from its nib.

   imagePickerController = [[UIImagePickerController alloc] init];
   imagePickerController.allowsEditing = NO;
   imagePickerController.delegate = self;
   imagePickerController.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   // Check device
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
       [self dismissModalViewControllerAnimated:YES];
   }
   else {
       [popoverController dismissPopoverAnimated:YES];
   }

   // More code here to save the selected image
}

- (IBAction)showImagePicker:(id)sender
{
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
       [self presentModalViewController:imagePickerController animated:YES];
   }
   else {
       popoverController=[[UIPopoverController alloc]
                          initWithContentViewController:imagePickerController];
       [popoverController presentPopoverFromRect:((UIButton *)sender).frame
                                          inView:self.view
                        permittedArrowDirections:UIPopoverArrowDirectionAny
                                        animated:YES];
} 
```

我可能会错过什么或做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:04:16.133

这可能是 Xcode for ML 中的一个[错误](https://stackoverflow.com/questions/7645553/log-message-referring-to-gatekeeper-appears-occasionally-when-running-simulator)。尝试退出模拟器并重新启动，看看是否有帮助。

# java - Date formatting not working in Java

> ID：14437925
> 
> 赞同：0
> 
> 时间：2013-01-21T11:46:02.393
> 
> 标签：java, date

I need to check the validity of date against a specified format. After googling, I found one:

```
public static boolean isThisDateValid(String dateToValidate, String dateFromat){

        SimpleDateFormat sdf = new SimpleDateFormat(dateFromat);
        sdf.setLenient(false);
        ParsePosition position = new ParsePosition(0);  
        Date date = sdf.parse(dateToValidate,position);
        return date != null && position.getIndex() == dateFromat.length();

} 
```

but it is not working..When I ran this, it returned true instead of false.Month value specified is invalid i.e. 13

```
System.out.println(isThisDateValid("20101331","yyyymmdd")); 
```

Did I miss anything?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:46:58.413

```
yyyymmdd 
```

should be

```
yyyyMMdd 
```

note `MM` for **Month** and `mm` is for **Minutes**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T11:47:05.713

Use capital `M` for months:

```
System.out.println(isThisDateValid("20101331","yyyyMMdd")); 
```

This invalid test date will return `false` as expected as you've called `setLenient(false)`

[Date Format doc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:01:24.907

您应该使用“yyyyMMdd”而不是“yyyymmdd”

[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#month)提供了解释。

另外，为什么在您的问题中，月份值被分配给 13？

# ios - facebook mobile app install ads track the install routes

> ID：14437929
> 
> 赞同：5
> 
> 时间：2013-01-21T11:46:08.383
> 
> 标签：ios, facebook, sdk, installation, ads

Is there a way to know if my app was installed over the **facebook Mobile App install Ads** using the Facebook SDK ?
The publish install is called every time my app getting installed but I want to know if the app is being installed via the Facebook ads service.
Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:59:34.073

It seems to be possible, I found this ([http://ampush.com/facebook-mobile-app-install-ads-good-gets-better/](http://ampush.com/facebook-mobile-app-install-ads-good-gets-better/)):

**Tracking can come through integration of a Facebook or Third Party SDK:**

An application does not require a Facebook login option in order to be promoted using Mobile App Install Ads, but the app must first be registered with Facebook. In order to track installs at the ad level, developers must install the most recent Facebook Software Development Kit (3.0 or greater for iOS, and the latest SDK for Android) or work with a 3rd-party mobile measurement provider.

# google-chrome - Flot graph and Google Chrome

> ID：14437930
> 
> 赞同：0
> 
> 时间：2013-01-21T11:46:11.583
> 
> 标签：google-chrome, graph, flot

I'm having an issue with flot graph and Google Chrome.

The problem is reproduceable as follows:

1.  Open an flot graph
2.  Lock your screen
3.  Unlock your screen and you will have to refresh the page to repaint the graph

It works fine under Firefox and IE.

Does anybody know how to resolve this issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:48:14.690

这可能是 Chrome 硬件加速的画布错误。尝试访问 chrome://flags 并关闭硬件加速画布，然后查看问题是否仍然存在。如果它消失了，那么您就知道这是由于 Chrome、您的图形驱动程序和您的图形卡之间的某些交互造成的，您应该向 Chrome 团队提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:09:39.467

感谢您的回复

我的设置是

禁用加速 2D 画布 启用

我假设硬件加速现在已关闭，并且它不起作用单击启用并且它正在工作。

问题与硬件加速有关，我现在可以解决。但我必须打开它而不是关闭它才能让它工作

再次感谢

# android - ImageLoader - Don't download image if it's already being cached

> ID：14437933
> 
> 赞同：3
> 
> 时间：2013-01-21T11:46:21.650
> 
> 标签：android, universal-image-loader, image-caching

I don't want to download images if they are already cached. I am using ImageLoader library by NOSTRA. Please tell me if there is any way to do that. Following is the code:-

```
 DisplayImageOptions options = new DisplayImageOptions.Builder()
                        .showStubImage(R.drawable.ic_stub)
                        .showImageForEmptyUri(R.drawable.ic_sample)
                        .resetViewBeforeLoading()
                        .cacheInMemory()
                        .cacheOnDisc()
                        .imageScaleType(ImageScaleType.EXACTLY_STRETCHED)
                        .bitmapConfig(Bitmap.Config.ARGB_8888)
                        .build();
                imageLoader.displayImage(url2.toString()
                                          ,thumbnail,options, new                                 
                    ImageLoadingListener() {
                    @Override
                    public void onLoadingStarted() {

                       // progressBar.setVisibility(grid.VISIBLE);
                        //  grid.notify();
                    }

                    @Override
                    public void onLoadingFailed(FailReason failReason) {

                       //progressBar.setVisibility(grid.GONE);
                        //  grid.notify();

                    }

                    @Override
                    public void onLoadingComplete(Bitmap bitmap) {

                      //  progressBar.setVisibility(grid.GONE);
                        // grid.notify();
                    }

                    @Override
                    public void onLoadingCancelled() {

                       //  progressBar.setVisibility(grid.GONE);
                        //grid.notify();

                    }
                }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:44:09.513

您尚未在`DisplayImageOption`.

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(this)
    .threadPoolSize(5)
    .threadPriority(Thread.MIN_PRIORITY + 3)
    .denyCacheImageMultipleSizesInMemory()
    // 1MB=1048576 
    .memoryCacheSize(1048576 * 5)
    .discCache(new UnlimitedDiscCache(cacheDir))
    .build(); 
```

在这里，`cacheDir`可能是一个目录`SD card`（需要权限“android.permission.WRITE_EXTERNAL_STORAGE”）或`application's cache`目录。

我已经`cacheDirectory`在我的申请中提供了。

```
File cacheDir = new File(this.getCacheDir(), "name of directory");
    if (!cacheDir.exists())
        cacheDir.mkdir(); 
```

`ImageLoader`现在，在下载任何图像之前，通过以下代码提供您的配置，

```
imageLoader.init(config); 
```

# sql - Oracle SQL Two Group 函数为什么不能在同一个选择中？

> ID：14437942
> 
> 赞同：1
> 
> 时间：2013-01-21T11:46:47.930
> 
> 标签：sql, oracle, count, group-by, sum

我有两个表，由这个 create 语句定义

```
CREATE TABLE PROJECT (project_name varchar(255), project_budget int, dedicated_project_leader int, dedicated_lead_developer int, dedicated_lead_consultant int, company_id int, project_id int, PRIMARY KEY (project_id));
CREATE TABLE WORKER (worker_name varchar(255), worker_salary int, worker_anual_bonus int, worker_type varchar(255), leader int, company_id int, project_id int, worker_id int, PRIMARY KEY (worker_id)); 
```

我想问的是项目预算的总和，而不是除以工人的数量---）

```
SELECT (SUM(p.project_budget) / (SELECT count(WORKER.WORKER_NAME) from WORKER)) as AVG_BONUS
  FROM PROJECT p; 
```

不幸的是，这引发了“ORA--00937:not a single-group group function”异常。

但是，如果我执行此查询：

```
SELECT count(WORKER.WORKER_NAME) from WORKER) 
```

结果将是：

```
16 
```

如果我将预算总和除以数字而不是结果：

```
SELECT (SUM(p.project_budget) / 16) as AVG_BONUS
      FROM PROJECT p; 
```

我也得到了一个完美的结果，例如：

```
294117,647058823 
```

解决方案是我需要按项目表中定义的一些 id 进行分组，但不认为这是合乎逻辑的......

```
SELECT (SUM(p.project_budget) / (SELECT count(WORKER.WORKER_NAME) from WORKER)) as AVG_BONUS
  FROM PROJECT p
   GROUP BY p.company_id; 
```

它也在工作。

有没有人建议我为什么不能使用它？（我感觉这只是一个 sql 语言规范，在没有 group by 的情况下不能在 select 中存在两个 group 函数......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:08:01.700

在这种情况下，您必须将每个聚合推送到其自己的非依赖视图中。例如：

```
select budget/workers
  from (select (select sum(p.project_budget) from project p) budget,
               (select count(w.worker_name) from worker w) workers
          from dual); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:17:29.933

或者您可以尝试`join`：

```
select sum(p.project_budget),
count(w.worker_name),
sum(p.project_budget)/
count(w.worker_name) as avgbonus
from project p
join
worker w
on w.project_id = p.project_id
; 
```

[sqlfiddle 演示](http://www.sqlfiddle.com/#!4/b1224/2)

```
| SUM(P.PROJECT_BUDGET) | COUNT(W.WORKER_NAME) | AVGBONUS |
-----------------------------------------------------------
|                150000 |                    4 |    37500 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:19:50.477

这个查询怎么样？

```
SELECT  sum(project_budget/AVG_BONUS) as AVG_BONUS from(
  SELECT p.project_budget, (SELECT count(WORKER.WORKER_NAME) from WORKER) as AVG_BONUS
  FROM PROJECT p
  )x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T11:54:00.073

我会这样做：

```
SELECT (SUM(p.project_budget) / MAX(worker_count)) as AVG_BONUS
FROM 
  PROJECT p
  ,(SELECT count(WORKER.WORKER_NAME) AS worker_count  
    FROM WORKER) wc
GROUP BY p.company_id; 
```

我认为您的方式行不通，因为子查询既不是聚合也不是组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T12:01:05.220

尝试类似的东西
`select
project_name,
project_budget / case when w_cnt > 0 then w_cnt else 1 end as w_cnt
from
PROJECT p, ( select project_id, count(*) w_cnt from WORKER w group by project_id ) w
where p.project_id = w.project_id`

# python - Python Multiprocessing storing data until further call in each process

> ID：14437944
> 
> 赞同：3
> 
> 时间：2013-01-21T11:46:54.100
> 
> 标签：python, multiprocessing, scikit-learn

I have a large object of a type that cannot be shared between processes. It has methods to instantiate it and to work on its data.

The current way I'm doing it is I first instantiate the object in the main parent process and then pass it around to subprocesses when some event happens. The problem is that whenever the subprocesses run, they copy the object in memory every time which takes a while. I want to store it in memory that is only available to them so that they don't have to copy it each time they call that object's function.

How would I store an object just for that process's own use?

**Edit: Code**

```
class MultiQ:
    def __init__(self):
        self.pred = instantiate_predict() #here I instantiate the big object

    def enq_essay(self,essay):
        p = Process(target=self.compute_results, args=(essay,))
        p.start()

    def compute_results(self, essay):
        predictions = self.pred.predict_fields(essay) #computation in the large object that doesn't modify the object 
```

This copies the large object in memory every time. I am trying to avoid that.

**Edit 4: short code sample that runs on 20 newsgroups data**

```
import sklearn.feature_extraction.text as ftext
import sklearn.linear_model as lm
import multiprocessing as mp
import logging
import os
import numpy as np
import cPickle as pickle

def get_20newsgroups_fnames():
    all_files = []
    for i, (root, dirs, files) in enumerate(os.walk("/home/roman/Desktop/20_newsgroups/")):
        if i>0:
            all_files.extend([os.path.join(root,file) for file in files])
    return all_files

documents = [unicode(open(f).read(), errors="ignore") for f in get_20newsgroups_fnames()]
logger = mp.get_logger()
formatter = logging.Formatter('%(asctime)s: [%(processName)12s] %(message)s',
                              datefmt = '%H:%M:%S')
handler = logging.StreamHandler()
handler.setFormatter(formatter)
logger.addHandler(handler)
logger.setLevel(logging.WARNING)
mp._log_to_stderr = True

def free_memory():
    """
    Return free memory available, including buffer and cached memory
    """
    total = 0
    with open('/proc/meminfo', 'r') as f:
        for line in f:
            line = line.strip()
            if any(line.startswith(field) for field in ('MemFree', 'Buffers', 'Cached')):
                field, amount, unit = line.split()
                amount = int(amount)
                if unit != 'kB':
                    raise ValueError(
                        'Unknown unit {u!r} in /proc/meminfo'.format(u=unit))
                total += amount
    return total

def predict(large_object, essay="this essay will be predicted"):
    """this method copies the large object in memory which is what im trying to avoid"""
    vectorized_essay = large_object[0].transform(essay)
    large_object[1].predict(vectorized_essay)
    report_memory("done")

def train_and_model():
    """this is very similar to the instantiate_predict method from my first code sample"""
    tfidf_vect = ftext.TfidfVectorizer()
    X = tfidf_vect.fit_transform(documents)
    y = np.random.random_integers(0,1,19997)
    model = lm.LogisticRegression()
    model.fit(X, y)
    return (tfidf_vect, model)

def report_memory(label):
    f = free_memory()
    logger.warn('{l:<25}: {f}'.format(f=f, l=label))

def dump_large_object(large_object):
    f = open("large_object.obj", "w")
    pickle.dump(large_object, f, protocol=2)
    f.close()

def load_large_object():
    f = open("large_object.obj")
    large_object = pickle.load(f)
    f.close()
    return large_object

if __name__ == '__main__':
    report_memory('Initial')
    tfidf_vect, model = train_and_model()
    report_memory('After train_and_model')
    large_object = (tfidf_vect, model)
    procs = [mp.Process(target=predict, args=(large_object,))
             for i in range(mp.cpu_count())]
    report_memory('After Process')
    for p in procs:
        p.start()
    report_memory('After p.start')
    for p in procs:
        p.join()
    report_memory('After p.join') 
```

**Output 1:**

```
19:01:39: [ MainProcess] Initial                  : 26585728
19:01:51: [ MainProcess] After train_and_model    : 25958924
19:01:51: [ MainProcess] After Process            : 25958924
19:01:51: [ MainProcess] After p.start            : 25925908
19:01:51: [   Process-1] done                     : 25725524
19:01:51: [   Process-2] done                     : 25781076
19:01:51: [   Process-4] done                     : 25789880
19:01:51: [   Process-3] done                     : 25802032
19:01:51: [ MainProcess] After p.join             : 25958272
roman@ubx64:$ du -h large_object.obj
4.6M    large_object.obj 
```

So maybe the large object is not even large and my problem was in the memory usage from the transform method of tfidf vectorizer.

now if I change the main method to this:

```
report_memory('Initial')
large_object = load_large_object()
report_memory('After loading the object')
procs = [mp.Process(target=predict, args=(large_object,))
         for i in range(mp.cpu_count())]
report_memory('After Process')
for p in procs:
    p.start()
report_memory('After p.start')
for p in procs:
    p.join()
report_memory('After p.join') 
```

I get these results: **Output 2:**

```
20:07:23: [ MainProcess] Initial                  : 26578356
20:07:23: [ MainProcess] After loading the object : 26544380
20:07:23: [ MainProcess] After Process            : 26544380
20:07:23: [ MainProcess] After p.start            : 26523268
20:07:24: [   Process-1] done                     : 26338012
20:07:24: [   Process-4] done                     : 26337268
20:07:24: [   Process-3] done                     : 26439444
20:07:24: [   Process-2] done                     : 26438948
20:07:24: [ MainProcess] After p.join             : 26542860 
```

Then I changed the main method to this:

```
report_memory('Initial')
large_object = load_large_object()
report_memory('After loading the object')
predict(large_object)
report_memory('After Process') 
```

And got these results: **Output 3:**

```
20:13:34: [ MainProcess] Initial                  : 26572580
20:13:35: [ MainProcess] After loading the object : 26538356
20:13:35: [ MainProcess] done                     : 26513804
20:13:35: [ MainProcess] After Process            : 26513804 
```

At this point I have no idea what's going on, but the multiprocessing definitely uses more memory.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:42:17.517

Linux 使用[copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)，这意味着当一个子进程被分叉时，每个子进程中的全局变量共享相同的内存地址，直到值被修改。只有当一个值被修改时，它才会被复制。

所以理论上，如果大对象不被修改，它可以被子进程使用，而不会消耗更多的内存。让我们测试一下这个理论。

这是您的代码，经过了一些内存使用记录：

```
import sklearn.feature_extraction.text as ftext
import sklearn.linear_model as lm
import multiprocessing as mp
import logging

logger = mp.get_logger()
formatter = logging.Formatter('%(asctime)s: [%(processName)12s] %(message)s',
                              datefmt='%H:%M:%S')
handler = logging.StreamHandler()
handler.setFormatter(formatter)
logger.addHandler(handler)
logger.setLevel(logging.WARNING)
mp._log_to_stderr = True

def predict(essay="this essay will be predicted"):
    """this method copies the large object in memory which is what im trying to avoid"""
    vectorized_essay = large_object[0].transform(essay)
    large_object[1].predict(vectorized_essay)
    report_memory("done")

def train_and_model():
    """this is very similar to the instantiate_predict method from my first code sample"""
    tfidf_vect = ftext.TfidfVectorizer()
    N = 100000
    corpus = [
        'This is the first document.',
        'This is the second second document.',
        'And the third one.',
        'Is this the first document?', ] * N
    y = [1, 0, 1, 0] * N
    report_memory('Before fit_transform')
    X = tfidf_vect.fit_transform(corpus)
    model = lm.LogisticRegression()
    model.fit(X, y)
    report_memory('After model.fit')
    return (tfidf_vect, model)

def free_memory():
    """
    Return free memory available, including buffer and cached memory
    """
    total = 0
    with open('/proc/meminfo', 'r') as f:
        for line in f:
            line = line.strip()
            if any(line.startswith(field) for field in ('MemFree', 'Buffers', 'Cached')):
                field, amount, unit = line.split()
                amount = int(amount)
                if unit != 'kB':
                    raise ValueError(
                        'Unknown unit {u!r} in /proc/meminfo'.format(u=unit))
                total += amount
    return total

def gen_change_in_memory():
    f = free_memory()
    diff = 0
    while True:
        yield diff
        f2 = free_memory()
        diff = f - f2
        f = f2
change_in_memory = gen_change_in_memory().next

def report_memory(label):
    logger.warn('{l:<25}: {d:+d}'.format(d=change_in_memory(), l=label))

if __name__ == '__main__':
    report_memory('Initial')
    tfidf_vect, model = train_and_model()
    report_memory('After train_and_model')
    large_object = (tfidf_vect, model)
    procs = [mp.Process(target=predict) for i in range(mp.cpu_count())]
    report_memory('After Process')
    for p in procs:
        p.start()
    for p in procs:
        p.join()
    report_memory('After p.join') 
```

它产生：

```
21:45:01: [ MainProcess] Initial                  : +0
21:45:01: [ MainProcess] Before fit_transform     : +3224
21:45:12: [ MainProcess] After model.fit          : +153572
21:45:12: [ MainProcess] After train_and_model    : -3100
21:45:12: [ MainProcess] After Process            : +0
21:45:12: [   Process-1] done                     : +2232
21:45:12: [   Process-2] done                     : +2976
21:45:12: [   Process-3] done                     : +3596
21:45:12: [   Process-4] done                     : +3224
21:45:12: [ MainProcess] After p.join             : -372 
```

报告的数字是可用内存（包括缓存和缓冲区）的 KiB 变化。因此，例如，“Initial”和“After train_and_model”之间的可用内存变化约为 150MB。因此，`large_object`需要大约 150MB。

然后，在完成 4 个子进程后，消耗的内存量要少得多——总共大约 12MB。消耗的内存可能是由于创建子进程加上`transform`and `predict`方法使用的内存。

所以看起来`large_object`没有被复制，因为如果我们应该看到消耗的内存增加了大约 150MB。

* * *

**关于您在 20 个新闻组上的评论**：

以下是可用内存的变化：

关于 20 个新闻组的数据：

```
| Initial               |       0 |
| After train_and_model |  626804 | <-- Large object requires 627M
| After Process         |       0 |
| After p.start         |   33016 |
| done                  |  200384 | 
| done                  |  -55552 |
| done                  |   -8804 |
| done                  |  -12152 |
| After p.join          | -156240 | 
```

所以看起来实例化大对象需要 627MB。我不知道为什么在`done`达到第一个之后又消耗了 200+MB。

使用 load_large_object：

```
| Initial                  |       0 |
| After loading the object |   33976 |
| After Process            |       0 |
| After p.start            |   21112 |
| done                     |  185256 |
| done                     |     744 |
| done                     | -102176 |
| done                     |     496 |
| After p.join             | -103912 | 
```

显然，large_object 本身只需要 34MB，其余的内存，627-34 = 593MB 肯定已经被调用的`fit_transform`and`fit`方法消耗掉了`train_and_model`。

使用单一进程：

```
| Initial                  |     0 |
| After loading the object | 34224 |
| done                     | 24552 |
| After Process            |     0 | 
```

这是有道理的。

因此，您积累的数据似乎支持大对象*本身*没有被每个子进程复制的说法。但是出现了一个新的谜团：为什么在“After p.start”和第一个“done”之间会有大量的内存消耗。我不知道答案。

* * *

您可以尝试`report_memory`拨打电话

```
vectorized_essay = large_object[0].transform(essay) 
```

和

```
large_object[1].predict(vectorized_essay) 
```

查看消耗额外内存的位置。我的猜测是这些 scikit-learn 方法之一是选择分配这个（相对）大量的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:01:12.470

我最终使用了使用 Rabbit MQ 的 RPC 服务器。[Rabbit MQ RPC/Python 教程](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)。所以我创建的服务器数量与我机器上的 CPU 数量相等。这些服务器启动一次，并为模型和矢量化器分配一次内存，并在运行时保留它。其他优点是

1.  如果一台机器不堪重负，一些处理可以很容易地发送到另一台机器
2.  如果在一台服务器上计算失败，则可以轻松地将其发送到另一台服务器
3.  原始代码中的内存分配过程不是即时的，因此我的数据集的总体运行时间从每次查询的 18 秒下降到 12 秒，因为内存是预先分配的。

总的来说，我的代码也变得更加简洁。

# mobile-website - Pictonic Cube 奇怪的字符

> ID：14437950
> 
> 赞同：0
> 
> 时间：2013-01-21T11:47:05.903
> 
> 标签：mobile-website, webfonts

我在网站上使用 Pictonic Cube [https://pictonic.co/](https://pictonic.co/)。当我通过 Android 2.3 或 Symbian 等“旧”智能手机连接到该站点时，我会收到奇怪的字符，例如汉字或正方形。我做错了什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:53:52.990

连接它的字体的所有版本。`.woff`是必须的。几乎无处不在。你可以找到一些在线工具来制作一整套必要的字体。然后只需通过 CSS 导入它并唱歌。

# drupal - 在 drupal 7.15 中粘贴视图代码 *

> ID：14437954
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:47:09.663
> 
> 标签：drupal

*****我正在创建一个与 stackoverflow 类似的网站，有人可以帮我解决这个问题吗？我已经创建了我的自定义内容类型以及视图，但不知道我应该在 drupal 站点的“你在这里主页»管理»结构»视图”中的这个字段中写什么。*******

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:52:24.970

有关如何在 Drupal 中构建堆栈溢出的说明，请参阅此处：

[https://drupal.stackexchange.com/a/24814](https://drupal.stackexchange.com/a/24814)

看起来您也可以使用视图教程：

[http://www.youtube.com/watch?v=5MSr3UnRkPI](http://www.youtube.com/watch?v=5MSr3UnRkPI)

祝你好运！**

# graph - Broken axis in Google charts

> ID：14437955
> 
> 赞同：4
> 
> 时间：2013-01-21T11:47:13.350
> 
> 标签：graph, google-visualization

Is there any way to create a break in my vertical scale on the Google charts api?

I have a couple of dozen data points all about 600-2000 on the y-axis except for one value which is almost 300,000; this makes all the smaller data points nearly unreadable. I need to represent all this data and a logarithmic scale is not an option.

![Current Graph](../Images/4495a3db43191b8f5cf4bd2057e4c769.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T04:19:27.787

简单的回答：不，这是不可能的。

断轴（通常）在可视化社区中不受欢迎，因此大部分时间在各种软件中不受支持。

如果您想变得棘手，您可以创建一个函数来查找异常值，然后将它们移动到数据中的第二个系列。在第二个轴上绘制该系列，并使用不同的颜色。这就是说，“这个数字不同，不适合”，这增加了对它的关注，同时仍然允许以相同的比例查看其余数据。

就个人而言，我会在任意值处截断图形，将该点的值设置为最大值，然后添加一个工具提示，说“离群值：300,000”或其他任何值。这将允许人们看到其他数字，但表明该数字本身是一个异常值，而无需对其进行不同的着色或将其从单个系列中删除。

无论哪种方式都是可行的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-05T18:15:07.880

您需要使用对数刻度。这是一个 vAxis 和 hAxis 属性。支持的值为：

log：常规对数刻度

mirrorLog：允许 0 值的对数刻度

```
var options = {
    vAxis: {
        scaleType: 'mirrorLog',
    }
};

var data = {};//your data

chart.draw(data, options); 
```

# javascript - 无法重新评估绑定到表行 knockout.js 样式的属性

> ID：14437956
> 
> 赞同：0
> 
> 时间：2013-01-21T11:47:14.653
> 
> 标签：javascript, knockout.js

我无法从从服务器加载的对象数组中更新列。

我有这样的东西：

```
self.tenants = ko.observableArray([{"Id":1,"Name":"Tenant 1","IsActive":true}]);
self.selectedTenant = ko.observable(null); 
```

用户界面：

```
<tbody data-bind="foreach: tenants">
  <tr data-bind="css: { 'active-row': $root.selectedTenant() === $data }">
    <td><a href="#" data-bind="click: $root.select">Select</a></td>
    <td data-bind="text: Name"></td>
    <td data-bind="text: Count"></td>
    <td></td>
    <td></td>
    <td data-bind="text: IsActive"></td>
  </tr>
</tbody> 
```

现在我试图确保当我设置为**IsActive**时UI 显示它`false`。

我知道理想情况下 IsActive 是可观察的，但由于我直接从服务器获取数组，我不确定我会如何做到这一点。

其次，我以某种方式试图淘汰以重新评估阵列。

我尝试了几种替代方法，其中一种如下所示：

```
var selected = self.selectedTenant();
selected.IsActive = true;
var idx = self.tenants.indexOf(selected);
//self.tenants.remove(selected);
var newArray = self.tenants().splice(idx, 1, selected);
self.tenants(newArray);
//self.tenants.valueHasMutated(); 
```

但这一切似乎都是徒劳的，该列始终显示原始值。我哪里错了，或者我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:51:43.487

您需要手动或使用 Ko 映射插件将服务器数据映射到使用 observables 的 TenantViewModels

如果您手动执行此操作，则可以使用 ko.utils.arrayMap 函数将数组中的每个元素从服务器映射到具有 TenantViewModels 的新数组

# ruby-on-rails - 我应该将 gem 版本放在我的 Gemfile 中吗？

> ID：14437968
> 
> 赞同：3
> 
> 时间：2013-01-21T11:47:59.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3

到目前为止，我只使用 gem 名称并避免提及版本号，这是一个好习惯吗（优点：gems 会不断自动更新，缺点：应用程序可能会崩溃）

如果使用版本号是个好主意，那么使用它的标准做法是什么？

编辑 - 我刚刚做了“捆绑秀”，它显示了大约 30 多个宝石，即使我在 Gemfile 中只列出了 6 个宝石，我假设其余的是在我创建应用程序时安装的核心宝石，所以如何锁定它们还是我应该让它们保持原样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:25:43.783

bundler 的目的之一是将您的 gem 依赖项固定到特定版本。因此，`bundle`在您将 gem 添加到 Gemfile 后的第一次，这些 gem 将被固定到特定版本。您必须专门`bundle update <gemname>`对特定的 gem 进行更新。Just `bundle update`（将所有 gem 更新到最新的兼容版本）在很大程度上违背了 bundler 的目的，应该避免。

也就是说，我认为只有在有特定原因的情况下才应该在 Gemfile 中提及版本。示例：您想专门运行 rails 版本 3.2.8，或者您必须使用 ruby​​-net-ldap 0.0.1，因为 0.0.2 破坏了某些功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T11:55:01.367

我认为**是**的，因为在早期，我对自行更新且不向后兼容的 gem 有很多问题。

通常，当您从一个主要版本切换到另一个主要版本时会发生这种情况，对我来说，它是 Rails 2.x 到 3.x。

所以底线是在 Gem 文件中有版本是件好事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T11:56:02.250

我一开始也是这么想的。

但是会有一些更新与我的编码不太匹配，或者会有不兼容的更改导致功能停止工作。

它发生在我身上至少两次，我会在 gem 被推送的那一刻更新一个 gem，而我是最早看到它全部崩溃的人之一，因为一些在推送时没有修复的 bug。所以你尝试调试它不会工作。从那时起，我会锁定有问题的 gem，只在我唯一要做的事情时升级它们，并确保功能保持不变。

建议使用您知道可以工作的版本。

之后，您可以使用[gemnasium](http://gemnasium.com/)跟踪宝石

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T13:43:49.783

我的建议是**YES**。

原因是我将外部依赖视为潜在的断点，因为它们在一定程度上不受我的控制；任何不是由我发起的外部依赖项的更改都可能导致失败。

由于软件开发已经很复杂，我强烈认为限制和控制外部依赖项更改对我们有利。

惊喜越少，维护代码就越容易。

高温高压

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T12:05:15.460

最好使用准确的版本号。您可能总是可以将其锁定到一个主要版本，或者从不指定任何版本，并且没关系，但是如果您真的想要那种细粒度的控制水平并且在您的程序在其他机器上运行时对您的程序有 100% 的信心，使用确切的版本号。

我一直处于未指定确切版本号的情况，当我或其他人执行 . 时`bundle install`，该项目因升级到较新版本而中断。这在部署到生产环境时尤其糟糕。

`Bundler`确实锁定了您的 gem 规范，但是如果您告诉它只使用主要版本，那么它会锁定它。

此外，如果没有`Gemfile.lock`，将代码部署到生产将是一个主要问题，因为依赖项和 gem 版本可能会发生变化。

# actionscript-3 - Actionscript 计算不带括号的错误除法

> ID：14437969
> 
> 赞同：2
> 
> 时间：2013-01-21T11:48:00.853
> 
> 标签：actionscript-3, flash, math, division, brackets

给定这个类定义：

```
package {
  public class Calc {
    public static function I(i:Number, s:Number):Number {
      var A:Number = helper_A(s);
      var B:Number = helper_B(s);
      var C:Number = helper_C(s);      
      return A * i + (Math.exp(B * i + C) - Math.exp(C) / B);
    }   
  }
} 
```

静态函数`helper_A`，`helper_`B 和`helper_C`做一些数学运算（带有基本计算的单行代码和`Math.pow()`）。

当用

```
trace(Calc.I(27, 1985)); 
```

返回语句中括号位置的以下差异如何`function I`影响计算结果？

* * *

这个版本 1)

```
 return A * i + (Math.exp(B * i + C) - Math.exp(C) / B); 
```

痕迹`0.01721552341268775`

* * *

虽然这个版本 2)

```
 return A * i + ((Math.exp(B * i + C) - Math.exp(C)) / B); 
```

痕迹`0.017092065919602526`

* * *

据我所知，数学上的结果应该是相同的。Actionscript/Flash 怎么会在没有括号的情况下计算出**错误的结果？**是否有一些奇怪的内部缓存、顺序、内存、foobar ......这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:54:20.880

`(Math.exp(B * i + C) - Math.exp(C) / B);`

首先执行不带括号`Math.exp(C) / B`的除法，因为除法`/`的优先级高于减法`-`。

`((Math.exp(B * i + C) - Math.exp(C)) / B);`

这里`(Math.exp(B * i + C) - Math.exp(C))`由于括号的原因先执行，然后结果除以B。这和第一个版本明显不同。

这与 AS3 无关。这是定义明确的数学规则。除法，乘法的优先级高于加法，减法和括号需要在乘法，除法之前进行加法，减法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:58:00.003

检查运算符的[优先级](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fd1.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f6c)，顺便说一句，您不需要外括号：

```
return A * i + (Math.exp(B * i + C) - Math.exp(C)) / B; 
```

# php - GD 库不工作

> ID：14437970
> 
> 赞同：3
> 
> 时间：2013-01-21T11:48:01.920
> 
> 标签：php, gd

generate.php 正在工作，但是如果我尝试使用我的 index.php 检索图像，`<img src="generate.php"/>`我会得到一个空白屏幕。

生成.php

```
<?php
    header('Content-type: image/png');

    if(isset($_GET['email'])){
        $email = $_GET['email'];
    }else{
        $email = 'No email specified';
    }
    $email_length = strlen($email);

    $font_size = 4;

    $image_height = ImageFontHeight($font_size);
    $image_width = ImageFontWidth($font_size) * $email_length;

    $image = imagecreate($image_width, $image_height);

    imagecolorallocate($image, 255, 255, 255);
    $font_color = imagecolorallocate($image, 0, 0, 0);

    imagestring($image, $font_size, 0, 0, $email, $font_color);
    imagepng($image);
?> 
```

## 索引.php

```
Name:<br>
Dave
<br><br>
Email: <br>
<img src="generate.php"/> 
```

# c# - 如何读取文本文件

> ID：14437971
> 
> 赞同：0
> 
> 时间：2013-01-21T11:48:09.243
> 
> 标签：c#, datagridview

我读取了文本文件并显示在`DataGridView`数据正在显示中，但是在上面的文本文件中与日志文件有关，我想按月显示该日志文件`DataTable`，如果可能的话，不使用 .

```
private void BtnUser_Click(object sender, EventArgs e)
{
  dgv1.Columns.Add("col1", "Ipaddress");
  dgv1.Columns.Add("col2", "Sysname");
  dgv1.Columns.Add("col3", "username");
  dgv1.Columns.Add("col4", "text");
  dgv1.Columns.Add("col5", "datetime");

  string line;
  StreamReader strRead = new StreamReader("D:\\login.lgl");
  {
    int row = 0;

    while ((line = strRead.ReadLine()) != null)
    {
      string[] columns = line.Split('|');
      dgv1.Rows.Add();
      for (int i = 0; i < columns.Length; i++)
      {
        dgv1[i, row].Value = columns[i];
      }
      row++;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:59:56.017

您可以使用 Linq 按月分组：

```
var logMonthGroups = File.ReadLines("D:\\login.lgl")
    .Select(l => new { Cols = l.Split('|') })
    .Select(x => new
    {
        Ipaddress = x.Cols.ElementAtOrDefault(0),
        Sysname = x.Cols.ElementAtOrDefault(1),
        username = x.Cols.ElementAtOrDefault(2),
        text = x.Cols.ElementAtOrDefault(3),
        datetime = x.Cols.ElementAtOrDefault(4) == null ? DateTime.MinValue : DateTime.Parse(x.Cols[4])
    })
    .GroupBy(x => new { Year = x.datetime.Year, Month = x.datetime.Month })
    .OrderBy(g => g.Key.Year).ThenBy(g => g.Key.Month);

foreach(var group in logMonthGroups)
{
    // add to the DataGridView ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:18:43.277

我建议您为从文件中解析的结构创建一个类，例如：

```
public class LogFileItem
{
   public string IpAddress {get; set;}
   public string Sysname {get; set;}
   public string Username {get; set;}
   public string Text {get; set;}
   public DateTime DateTime {get; set;}

   public static List<LogFileItem> ParseLogFile(string path)
   {
     List<LogFileItem> result = new List<LogFileItem>();

     //in a real scenario, this code should have a lot more error checks
     string line;
     StreamReader strRead = new StreamReader(path);

     while ((line = strRead.ReadLine()) != null)
     {
       string[] columns = line.Split('|');

       LogFileItem item = new LogFileItem();
       item.IpAddress = columns[0];
       item.Sysname = columns[1];
       item.Username = columns[2];
       item.Text = columns[3];
       //this assumes that the dateTime column is parsable by .net
       item.DateTime = DateTime.Parse(columns[4]);

       result.add(item); 
     }
     return result;
   }

} 
```

那么你可以这样做：

```
private void BtnUser_Click(object sender, EventArgs e)
{
   List<LogFileItem> logItems = LogFileItem.ParseLogFile(@"D:\login.lgl");
   dgv1.DataSource = logItems;
} 
```

来显示数据。您也可以按照您想要的任何方式过滤数据，如果您有`month`/`year`对过滤，您可以这样做：

```
 List<LogFileItem> logItems = LogFileItem.ParseLogFile(@"D:\login.lgl");
   var logsPerMonth = logItems.Where(li => li.DateTime.Year = year && li.DateTime.Month == month); 
```

请注意，日期时间解析在某种程度上是一种黑暗艺术，因此您可以查看一下[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)以使其工作。另外，看看使用[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，或从文本文件中读取行[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/vstudio/s2tte0y1%28v=vs.110%29.aspx)。

# jquery - 保留jquery链的空函数

> ID：14437973
> 
> 赞同：2
> 
> 时间：2013-01-21T11:48:13.957
> 
> 标签：jquery, function, placeholder, chaining, noop

是否有（可能未记录的）占位符`$.noop`用于 jQuery 连接？

要在以下内容中使用：

```
$('selector')[true ? 'method' : '<function that does nothing>']().doSomething(); 
```

我已经尝试了很多并最终得到了这个：

```
$.fn.noop = function(){ return this; }; 
```

但也许jQuery核心中已经有这样的功能了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:31:36.450

选项一：

使用`$.fn.splice`. 它在那里并且一直存在，但它也没有记录（因此它可能在未来不存在），不可读，并且不需要任何参数。

选项二：

`$.fn.noop = function(){return this}`. 可靠、可读、可预测、快速。喜欢#1 的唯一原因是开发时间。

选项三（首选）：使用条件插件插件，这是需要可链接无操作的唯一原因，例如[Ben Alman 的 IFF 插件](http://benalman.com/projects/jquery-iff-plugin/)（或自己编写）。

优点：转弯

```
 ... [condition?'method':'noop']() ... 
```

进入：

```
 ... .iff(condition).method().end() ... 
```

也就是说，它比 #2 更具可读性，而且您不仅限于一次通话。`iff`只要您正确展开堆栈，您甚至可以遍历或嵌套您的条件。

缺点：它是一个插件，你需要获取它；它要求您在对空集合进行操作时调用的方法是无操作的。所有标准的 jQuery 函数（除了`add`）都是。

# objective-c - UIAlertView 按钮显示 viewController

> ID：14437975
> 
> 赞同：3
> 
> 时间：2013-01-21T11:48:20.090
> 
> 标签：objective-c, button, uialertview, viewcontroller

我一直在互联网上寻找解决此问题的方法，但找不到我能理解的方法。就这样吧。我有我的 iOS 应用程序，在第一次启动应用程序时，它会显示一个 UIAlertView。我想要其中一个按钮将用户发送到新的 viewController 以查看一些基本信息。

我已经正确配置了 UIAlertView，这是 actionSheet 的代码：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
if (buttonIndex == 0)
{

//Code to open a new viewController???

}

if (buttonIndex == 1)
{

//User can exit the application if they do not wish to continue

exit(0);    }

}
} 
```

我创建了一个名为 webViewViewController 的 viewController，这就是我希望用户在点击第一个按钮时达到的内容。关于如何做到这一点的任何想法？我禁用了 ARC，我遇到的其他“解决方案”不断给我错误。

谢谢大家，希望能得到一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:56:40.490

如果您当前的视图控制器位于导航控制器中：

```
UIViewController *myViewController = [[UIViewController alloc] init];
myViewController.title = @"My First View";
//to push the UIView.
[self.navigationController pushViewController:myViewController animated:YES]; 
```

并且永远不要使用exit（0）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:11:06.720

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
if (buttonIndex == 0)
{

 NewViewController *controller=[[NewViewController alloc]initWithNibName:@"NewViewController" bundle:nil];
            self.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;
            [self presentViewController:controller animated:YES completion:nil];

} 
```

drasick 已经给出了足够的答案，但是如果您需要使用模型视图控制器，请参考上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:54:57.683

利用：

```
UIViewController *yourViewController = [[UIViewController alloc] init];
[self.navigationController presentModalViewController:myViewController animated:YES]; 
```

推送一个modalViewController。（这在iOS 6中被贬低，但会起作用）

# macos - iTerm2 - 用鼠标滚动更少的输出

> ID：14437979
> 
> 赞同：43
> 
> 时间：2013-01-21T11:48:36.000
> 
> 标签：macos, terminal, scroll, mouse, iterm

我刚从 OSX 终端切换到 iTerm2，我似乎失去了一项功能。在终端中，我可以用鼠标**滚动`less`命令**的输出，因为我已经安装了[MouseTerm](https://bitheap.org/mouseterm/)。

但是，当我尝试`less`在 iTerm2 中滚动输出时，窗口的滚动条会移动。奇怪的是，滚动按预期工作`vim`。

**如何`less`在 iTerm2 中用鼠标滚动输出？**

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2016-06-03T09:34:19.973

现在它在 iTerm2 中实现，可以通过

**设置**->**高级**->**滚轮在交替屏幕模式下发送箭头键**并将其更改为 **是**

![的图像](../Images/d3eb713111c6c0e78f9d65313fffb82b.png)

（`defaults write com.googlecode.iterm2 AlternateMouseScroll -bool true`仍然有效，但它只是改变了相同的设置）

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-07-11T10:25:01.313

iTerm2 问题现在被标记为“已修复”——但修复是添加一个隐藏选项，因此如何启用新`AlternateMouseScroll`选项并不是很明显。

正如 Filippo Valsorda（补丁的作者）[所写](https://filippo.io/native-scrolling-and-iterm2/)，一旦你安装了 iTerm2 的夜间构建（仍然不存在于 1.0.0.20140629 中），只需运行以下命令：

```
$ defaults write com.googlecode.iterm2 AlternateMouseScroll -bool true 
```

重新启动 iTerm2，当终端处于 less、vim、emacs 等程序使用的“备用屏幕”（直接寻址）模式时，所有窗口都会将滚动事件报告为向上/向下箭头键转义。

对于 vim 和 emacs 等提供额外鼠标支持的应用程序，您仍需要启用鼠标报告模式，因为此自动模式切换仅启用滚动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-01T15:11:46.093

终于做到了，我花了很多时间在这里和那里寻找没有运气，最简单的步骤是：

1.  **安装 2.9 测试版**

2.  完毕

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T20:37:21.323

目前尚未实施。

iTerm 2 问题跟踪器中有一个关于实现它的未解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-02T00:40:30.640

不是 OP 的问题，但对于任何试图让它在 tmux 中工作的人来说，通过[这个 github 评论](https://github.com/tmux/tmux/issues/157#issuecomment-150612608)归功于[choco](https://github.com/choco)这里有一个片段添加到你的 tmux.conf 以让它正确处理备用屏幕（例如更少，vim） ：

```
# Check if copy-mode or any mouse flags, then send mouse events
# or check if we're in alternate screen end send navigation keys (up, down)

bind -n WheelUpPane if-shell -Ft='#{?pane_in_mode,1,#{mouse_any_flag}}' \
        'send -Mt=' 'if-shell -Ft= "#{alternate_on}" \
        "send -t= Up" "copy-mode -et= ; send -Mt="'
bind -n WheelDownPane if-shell -Ft= '#{?pane_in_mode,1,#{mouse_any_flag}}' \
        'send -Mt=' 'if-shell -Ft= "#{alternate_on}" \
        "send -t= Down" "send -Mt="' 
```

请注意，这不需要[其他答案中提到的 Iterm 偏好更改](https://stackoverflow.com/a/37610820/197789)，但它也不会受到伤害。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-29T23:07:55.847

最新版本的 less 支持 the`--mouse`和相关标志，因此无需将箭头键发送到备用屏幕。

# php - Zend 框架 - 未找到“LEV”货币

> ID：14437981
> 
> 赞同：4
> 
> 时间：2013-01-21T11:48:58.270
> 
> 标签：php, zend-framework, currency

我有以下保加利亚货币“lev”的代码；

```
try
{
    $currency = new Zend_Currency("lev");
}
catch(Exception $e)
{
    echo $e->getMessage();
    die;
} 
```

抛出异常

> 未找到货币“列弗”

我该如何解决这个问题，`USD`一切`GBP`正常。这与设置正确的语言环境有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:59:27.700

我认为您需要将语言环境传递给 Zend_Currency，试试这个。

```
$currency = new Zend_Currency('bg_BG'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:59:43.320

看起来 BGN 是正确的代码，而不是 LEV。

此处详述为 ISO 4217 代码。

[http://en.wikipedia.org/wiki/Bulgarian_lev](http://en.wikipedia.org/wiki/Bulgarian_lev)

# git - 如何让 Git 停止在 Windows 上的 git gui 中跟踪文件夹

> ID：14437982
> 
> 赞同：3
> 
> 时间：2013-01-21T11:49:02.340
> 
> 标签：git

我一直在研究我的 android 项目，并且一直在推动和承诺给一个主机。我希望 Git GUI 停止跟踪该`bin`文件夹。我怎样才能做到这一点。请注意，我无法使用它，`BASH interface`因为它有点错误。

如何将 bin 文件夹添加到`.gitignore`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:51:41.987

`.gitignore`您必须在 git 存储库的根目录中创建一个名为（使用纯旧文本编辑器）的文件，并指定`bin`目录的路径。创建和编辑此文件后，您必须将其提交到 git。

或者您可以编辑`.git/info/excludes` （使用普通的旧文本编辑器）并指定`bin`目录的路径。该文件不需要提交。

请注意，如果您已经将该文件添加到 git 的版本跟踪中，则应该将其删除（小心，从存储库中删除它也会删除文件本身，因此请进行备份）。

AFAIK 从版本跟踪中删除文件不是强制性的，因为 git 应该忽略它们，并且下次提交时应该跳过它们。但是让文件处于版本跟踪中并且从不更改它们几乎没有意义（有一些情况）。

# javascript - 如何仅在 mvc3.net 中注销后禁用浏览器后退按钮

> ID：14437987
> 
> 赞同：11
> 
> 时间：2013-01-21T11:49:21.630
> 
> 标签：javascript, asp.net-mvc-3, form-authentication

我正在使用 FormsAuthentication 进行用户登录。用户成功注销后我遇到问题，后退按钮是浏览器允许用户查看页面。我尝试使用 javascript

```
 <script type = "text/javascript" >
        function preventBack() { window.history.forward(1); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
</script> 
```

但是后退按钮被完全禁用。它工作正常，我不想在用户登录时禁用后退按钮功能。我希望我的登录用户正常使用浏览器后退按钮。但是一旦他选择了退出，他就不能按返回看到任何内容。我也尝试过使用

```
Session.Abandon();
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
 Response.Cache.SetExpires(DateTime.Now); 
```

但这也不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T12:04:35.630

您可以在用户注销时清除浏览器历史记录：

```
var url = window.location.href;
window.history.go(-window.history.length);
window.location.href = url; 
```

但是，这不会特别健壮-它依赖于javascript，它不能跨多个选项卡工作，并且可能只会惹恼用户。IMO 最好的选择是设置适当的缓存标头，以便浏览器不会通过适当应用的 NoCacheAttribute 缓存任何“登录”页面：

```
public class NoCacheAttribute : ActionFilterAttribute
{  
  public override void OnResultExecuting(ResultExecutingContext filterContext)
  {
      filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
      filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
      filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
      filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
      filterContext.HttpContext.Response.Cache.SetNoStore();

      base.OnResultExecuting(filterContext);
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-13T09:17:02.903

在需要控制后退按钮的 html 页面中使用此代码。

```
$().ready(function() {
    if(document.referrer != 'http://localhost:8181/'){ 
        history.pushState(null, null, 'login');
        window.addEventListener('popstate', function () {
            history.pushState(null, null, 'login');
        });
    }
}); 
```

此代码将阻止返回按钮事件。如果上一页是' [http://localhost:8181/](http://localhost:8181/) '，if 条件是允许返回按钮。[如果上一页不是“ http://localhost:8181/](http://localhost:8181/) ” ，则后退按钮将不起作用。如果您需要阻止所有以前的页面，请避免使用 if 条件。**history.pushState**语句会将浏览器地址栏上的url 替换为“登录”。因此，我建议您使用您的页面网址更改“登录”。

这种方法的优点：-

1.  无需控制缓存。
2.  我们可以允许指定先前页面的后退按钮事件，并可以阻止其余的。

希望我的回答对某人有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-21T12:17:55.757

禁用后退按钮不是满足您需求的正确方法。相反，您可以在 html 文件中添加以下三个标签，这将负责清除缓存。

```
<META Http-Equiv="Cache-Control" Content="no-cache">
<META Http-Equiv="Pragma" Content="no-cache">
<META Http-Equiv="Expires" Content="0"> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-27T13:19:12.103

我发现最简单的方法是使用[OutputCache 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.118%29.aspx)

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public class HomeController  : Controller
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-06T09:20:28.680

```
 <script language="JavaScript" type="text/javascript">
    window.history.forward();              
 </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-04T05:15:10.847

请浏览文章 [http://www.aspdotnet-suresh.com/2011/11/disable-browser-back-button.html](http://www.aspdotnet-suresh.com/2011/11/disable-browser-back-button.html)。我在我的布局页面中使用了作者提供的 javacript 功能来防止后退按钮问题，因为我需要向我网站的所有访问者提供对某些页面的访问权限。

该解决方案适用于 IE 11 和 Chrome 版本 43.0.2357.130 m。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-20T17:12:25.323

如果您希望所有页面都使用此功能，您可以在 Global.asax 中编写：

```
protected void Application_BeginRequest()
{
Response.AddHeader("Cache-Control", "no-cache, no-store, must-revalidate");
Response.AddHeader("Pragma", "no-cache");
Response.AddHeader("Expires", "0");
} 
```

这不会缓存您网站的任何页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-24T08:42:52.107

```
var url = window.history.forward();
window.history.go(-window.history.length); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-10-11T05:12:04.397

请在您的母版页加载事件中使用此代码。

```
if(!IsPostBack)
        {
            if (Session["LoginId"] == null)
                Response.Redirect("frmLogin.aspx");
            else
            {
                Response.ClearHeaders();
                Response.AddHeader("Cache-Control", "no-cache, no-store, max-age=0, must-revalidate");
                Response.AddHeader("Pragma", "no-cache");
                            }
        } 
```

希望能帮助到你！:)

# javascript - 在函数表达式中传递参数

> ID：14437988
> 
> 赞同：0
> 
> 时间：2013-01-21T11:49:24.040
> 
> 标签：javascript

```
(function() {
    var theArg;
     google = function(arg) {
        theArg = arg;
        alert(theArg);
     }

     yahoo = function() {
       alert(theArg);
     }
})();

google("hello"); 
```

我没有收到`yahoo`功能警报。我在这里缺少什么以及出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:06:05.053

为主要问题中的评论提供一个简单的例子。

脚本

```
(function(exports) {

    var theArg, google, yahoo;

    google = function(arg) {
        theArg = arg;
        alert(theArg);
    }

    yahoo = function() {
        alert(theArg);
    }

    exports.yahoo = yahoo; // This is now available to the window

})(window);

// This will set initial value of 
google("Hello World"); 
```

网页

```
<!-- This should now alert Hello World! -->
<button onclick="yahoo()">Yahoo</button> 
```

根据我的经验，如果您在没有分配给窗口的情况下调用它，它不会发出任何警报，因为该函数将是未定义的。正如评论中提到的，这是一个范围问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:51:26.063

您正在定义一个名为 的函数`yahoo`，但您没有在任何地方调用它 - 因此我不希望您看到此警报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T11:51:26.297

您永远不会调用该`yahoo`函数。

这如你所料：

```
google("hello");   
yahoo(); 
```

# drupal - Drupal 停产产品

> ID：14437989
> 
> 赞同：0
> 
> 时间：2013-01-21T11:49:25.927
> 
> 标签：drupal

我有一个使用 Drupal 6.16 的电子商务网站的客户。

当他们停止产品时，他们将产品更改为未发布，然后为普通用户和谷歌返回 403 错误。这显然不是 SEO 的最佳选择。

人们在类似情况下做了什么？我正在考虑使用 CustomError 模块将它们重定向到类别页面或类似页面，但这会影响网站上的所有 403，并暂时停止访问网站管理员。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:53:05.010

最好的办法可能是保持产品发布，禁止购买（取决于电子商务模块/解决方案），并参考替换产品和/或有关停产的信息更新描述。这样，与停产产品的现有链接仍然有效，并链接到相关且准确的信息。哪个是您可以拥有的最佳 SEO。

# c# - 将方法传递给泛型函数并调用它

> ID：14437993
> 
> 赞同：0
> 
> 时间：2013-01-21T11:50:00.557
> 
> 标签：c#, generics, lambda

我正在尝试编写某种强类型路由系统。想象一下，我有一个带有方法 A 的类，它接受并返回字符串

```
public class SomeClass
{
    public string MethodA(string str)
    {
        return string.Format("SomeClass :: MethodA {0}", str);
    }
} 
```

我希望我的主要方法看起来像这样

```
class Program
{
    static void Main(string[] args)
    {
        var col = new SomeCollection();
        col.Add<SomeClass>("url", c => c.MethodA("test")); //Bind MethodA to "url"
    }
} 
```

所以我的问题是：

1.  添加方法签名应该是什么？
2.  如何在 SomeCollection 中调用 MethodA？

我想它会是这样的

```
public class SomeCollection
{
    public void Add<TController> (string url, Func<TController, string> exp)
    {
      // Add func to dictionary <url, funcs>
    }

    public void FindBestMatchAndExecute (Request request)
    {
       //Search url in collection and invoke it's method.
       //Method params we can extract from request.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:55:08.693

首先，我认为您希望将类的实例添加到集合中，而不是类型。否则，您将需要使用反射。如果我的假设是正确的，那么不要声明`Func<x,y,z,...>`只是使用`Action`能够调用具有任意数量参数的任何方法。

```
Dictionary<object, Action> tempDictionary = new Dictionary<object, Action>();
SomeClass someClass = new SomeClass();
tempDictionary.Add(someClass, () => someClass.MethodA("test"));
tempDictionary.Single(q => q.Key == someClass).Value(); 
```

但是如果您需要返回值，则必须使用`Func`而不是`Action`;

```
Dictionary<object, Func<string>> tempDictionary = new Dictionary<object, Func<string>>();
SomeClass someClass = new SomeClass();
tempDictionary.Add(someClass, () => someClass.MethodA("test"));
string temp = tempDictionary.Single(q => q.Key == someClass).Value(); 
```

# css - 更改了德语字母的字体粗细

> ID：14437995
> 
> 赞同：0
> 
> 时间：2013-01-21T11:50:03.850
> 
> 标签：css, font-face

我正在尝试在网站上使用 androids roboto 字体，它可以正常工作，直到我在文本中收到一个德语字母，然后看起来字体粗细发生了变化。

它的导入是这样的：

```
@font-face {
font-family: 'RobotoLight';
src: url('Roboto-Light-webfont.eot');
src: url('Roboto-Light-webfont.eot?#iefix') format('embedded-opentype'),
     url('Roboto-Light-webfont.woff') format('woff'),
     url('Roboto-Light-webfont.ttf') format('truetype'),
     url('Roboto-Light-webfont.svg#RobotoLight') format('svg');
font-weight: normal;
font-style: normal;

} 
```

然后看起来像下面这样。

![在此处输入图像描述](../Images/65a04c09e372607616ec1e659e365aba.png)

这是字体错误还是css设置？关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:17:31.477

答：字体有问题。如果您想使用非英文字符和 Roboto 字体，请不要下载网络准备的字体。它似乎被减少以更快地加载并且缺少一些字符。下载原版并自行转换字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:37:45.550

字体有问题，但没有更多信息（你从哪里得到字体，你用它做了什么？），不可能说出哪里出了问题。但是假设您指的是在 developer.android.com 上分发的[Roboto](http://developer.android.com/design/style/typography.html)字体（它与同名的 Google 字体不同，由不同的设计师设计），只需下载他们的字体包，解压缩，使用 Fontsquirrel [@font-face处理它generator](http://www.fontsquirrel.com/fontface/generator)，并使用生成器提供的 CSS。我刚刚测试过，德语字符看起来还可以。

看起来更粗的字符可能来自该字体的普通（粗细为 400）字体，或者来自不同的字体，可能是因为浅色字体不包含它们。

# android - 在画布上绘制 2 个圆圈

> ID：14437997
> 
> 赞同：7
> 
> 时间：2013-01-21T11:50:07.733
> 
> 标签：android, graphics, canvas

我正在尝试画两个这样的圆圈：

![在此处输入图像描述](../Images/b8895e3454d87772db869852085240f4.png)

这就是我尝试这样做的方式：

```
Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444);

Canvas c = new Canvas(bmp);

RectF rect = new RectF(0,0,width,width);
Paint paint = new Paint();
drawCircles(paint, c, width, height, width);
ImageView img = (ImageView) findViewById(R.id.imageView1);
img.setImageBitmap(bmp);
img.setScaleType(ScaleType.FIT_CENTER); 
```

这是我的`drawCircles()`方法：

```
private void drawCircles(Paint paint, Canvas c, int width, int height, int radius) {
        paint.setARGB(255, 255 , 10, 21);
        paint.setStrokeWidth(10);
        paint.setAntiAlias(true);
        paint.setStrokeCap(Paint.Cap.BUTT);
        paint.setStyle(Paint.Style.STROKE);
        if(width < height && radius == 0){
            radius = width/2;
            height = width;
        } else if (radius == 0){
            radius = height/2;
            width = height;
        }
        Paint paint2 = new Paint();
        paint2.setARGB(255, 255 , 10, 21);
        paint2.setStrokeWidth(10);
        paint2.setAntiAlias(true);
        paint2.setStrokeCap(Paint.Cap.BUTT);
        paint2.setStyle(Paint.Style.STROKE);
        c.drawCircle(width/2, height/2, radius-10, paint);
        c.drawCircle(width/2, height/2, 50, paint2);
} 
```

我不知道为什么，但我只得到一个圆圈，小的圆圈（用 绘制的那个`paint2`）。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:16:36.693

试试这个代码。希望它可以帮助:)

```
public class SimpleCircleActivity extends Activity
{

       private CircleDemoView circledemoView ;

       public void onCreate(Bundle savedInstanceState)
       { 
        super.onCreate(savedInstanceState);

        circledemoView =new CircleDemoView(this);
        setContentView(circledemoView);

       }

       private class CircleDemoView extends View
       {
         public CircleDemoView(Context context)
         {
             super(context);
         }

         @Override
         protected void onDraw(Canvas canvas) 
         {

             super.onDraw(canvas);
             Paint p = new Paint();
             p.setColor(Color.RED);
             DashPathEffect dashPath = new DashPathEffect(new float[]{5,5}, (float)1.0);

             p.setPathEffect(dashPath);
             p.setStyle(Style.STROKE);

             for (int i = 0; i < 2; i ++) {
                 canvas.drawCircle(200, 200, 50+(i*40), p);
             }

             invalidate();

     }
     }

} 
```

# javascript - Firefox 扩展 - 突出显示文本时调用函数

> ID：14437998
> 
> 赞同：2
> 
> 时间：2013-01-21T11:50:15.903
> 
> 标签：javascript, firefox-addon, xul

我目前正在编写一个 Firefox 扩展，它允许用户突出显示电话号码，然后使用上下文菜单中的按钮调用它。目前上下文菜单只显示“呼叫号码”，但我希望它说“呼叫'0xxxxxxxxxx'”，即突出显示的号码是什么。为此，我需要一个在突出显示文本时触发的事件。

我尝试使用这两种方法添加 mouseup 事件：

```
Window.addEventListener("mouseup", test(), true);

var overlay = getElementById("aca-button-overlay");
overlay.addEventListener('mouseup', test(), true); 
```

但这些都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:13:55.097

通过在 XUL 代码中为“onpopupshowing”设置监听器来更改标签。例如：

```
<script>
function insertPhone() {
   var pitem = document.getElementById("phoneNumber");
   pitem.label = "Call " + phoneNum;
}
</script>

<menupopup id="mymenu" onpopupshowing="insertPhone()">
   <menuitem id="phoneNumber" label="Call" />
</menupopup> 
```

有关详细信息，请参阅以下内容：

[https://developer.mozilla.org/en-US/docs/XUL/PopupGuide/ContextMenus](https://developer.mozilla.org/en-US/docs/XUL/PopupGuide/ContextMenus)

# php - 切换主机，.htaccess 301 从旧网站重定向到新网站有问题

> ID：14437999
> 
> 赞同：1
> 
> 时间：2013-01-21T11:50:27.870
> 
> 标签：php, wordpress, .htaccess, redirect, http-status-code-301

我有一个最初建立在 blogengine.net 上的博客；我切换到 Wordpress，并更改为不同的托管公司。

我正在使用他们的 Cpanel 重定向 3 或 4 个页面以反映他们的新 URL。具体来说，我正在尝试在一个实例中烫发 301 重定向：

[http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays](http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays)

至

[http://www.realtruthnow.org/ny-governor-signs-nations-first-gun-control-bill-since-newtown/](http://www.realtruthnow.org/ny-governor-signs-nations-first-gun-control-bill-since-newtown/)

当我使用主机的 Cpanel 执行此操作时，它会在我的根 .htaccess 中创建一个条目，如下所示：

```
RewriteCond %{HTTP_HOST} ^realtruthnow\.org$ [OR]
RewriteCond %{HTTP_HOST} ^www\.realtruthnow\.org$
RewriteRule ^blog\/post\/2013\/01\/01\/What\-do\-people\-in\-Newtown\-want\-for\-the
\-holidays$ "http\:\/\/www\.realtruthnow\.org\/ny\-governor\-signs\-nations\-first
\-gun\-control\-bill\-since\-newtown\/" [R=301,L] 
```

这没有用。所以我用谷歌搜索，并尝试将它放在 .htaccess 的底部：

```
Options +FollowSymLinks
RewriteEngine on
Redirect 301 /http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-
in-Newtown-want-for-the-holidays http://www.realtruthnow.org/ny-governor-signs-nations-
first-gun-control-bill-since-newtown/ 
```

那也没有用。我只需要对我知道的 3 或 4 页执行此操作。有谁知道我如何完成从旧主机到新主机的重定向，所以当有人点击旧链接时，他们会 301 跳转到新链接？任何指导将不胜感激！

**解决了**

[我安装了“简单的 301 重定向”插件，当我将旧 URL http://www.realtruthnow.org/](http://www.realtruthnow.org/)放入 ... 但当我忽略它时，它不起作用，只是把 /blog/post/2013 /01/01/What-do-people-in-Newtown-want-for-the-holidays 输入我的旧网址 BAM——它奏效了！如果有人需要，下面是插件。

[http://wordpress.org/extend/plugins/simple-301-redirects/](http://wordpress.org/extend/plugins/simple-301-redirects/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:08:38.840

你可以试试这个；

```
RewriteCond %{HTTP_HOST} ^realtruthnow\.org$ [OR]
RewriteCond %{HTTP_HOST} ^www\.realtruthnow\.org$
RewriteRule ^blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays/?$  http://www.realtruthnow.org/ny-governor-signs-nations-first-gun-control-bill-since-newtown/ [R=301,L,NC] 
```

这与 cPanel 生成的规则相同，没有引号和转义。

它永久重定向这个

`http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays`

对此

`http://www.realtruthnow.org/ny-governor-signs-nations-first-gun-control-bill-since-newtown/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:13:49.450

如果有人遇到类似的问题，我解决了将旧 blogengine.net 链接（从 Windows 服务器）重定向到新主机的 Wordpress 链接的问题。

事实证明，这是一种古怪的 Wordpress 类型的东西。

我安装了“简单的 301 重定向”插件，当我把旧的**ENTIRE** URL [http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-in- Newtown-want-for-the-holiday](http://www.realtruthnow.org/blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays) in ...

但是，当我省略了根目录时，只需将 /blog/post/2013/01/01/What-do-people-in-Newtown-want-for-the-holidays 放入我的旧 URL 中，BAM——它就起作用了！

如果有人需要，下面是插件。

[http://wordpress.org/extend/plugins/simple-301-redirects/](http://wordpress.org/extend/plugins/simple-301-redirects/)