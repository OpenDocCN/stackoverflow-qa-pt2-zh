# StackOverflow 问答 16073000-16073999

# javascript - 无法通过单击按钮更改文本

> ID：16073000
> 
> 赞同：0
> 
> 时间：2013-04-18T01:26:13.080
> 
> 标签：javascript, html

我正在尝试更改表单内的一行文本；更具体地说，我希望文本在某些条件下发生变化。条件是检查用户何时单击按钮。在这种情况下，我希望在用户将输入字段留空时更改文本。此代码包括我正在使用的整个表单和脚本。我遇到的问题是单击按钮时文本似乎会发生变化，但只有一秒钟或只要警报消息出现。之后，它又回到原来的文本。我脚本中正在访问的行是第 5 行代码。

```
<div id="userRegistration"> <!--  Registration Form Shell -->

            <form name="registration">
            <div id="leftSideForm"> <!--  Left side of the Registration Form -->

                <span style="color:red">*</span>
                Enter a Username: <input type="text" name="userName" /> <br />
                 <b id="yy">test </b> <br />

                <span style="color:red">*</span>
                Enter Password: <input type="password" name="userPassword" /><br />

                <span style="color:red">*</span>
                Confirm Password: <input type="password" name="cUserPassword" /><br /> <br /> <br />

                <span style="color:red">*</span>
                First name: <input type="text" name="firstName" /><br />

                Middle initial: <input type="text" name="middleName" /><br />

                <span style="color:red">*</span>
                Last name: <input type="text" name="lastName" /><br /> <br />

            </div> <!-- end of Left sideform -->

            <div id="rightSideForm">

                <span style="color:red">*</span>
                Email Address: <input type="text" name="userEmail" /><br />

                <span style="color:red">*</span>
                Confirm Email: <input type="text" name="confirmUserEmail" /><br /> <br /> <br /> <br />

                <button type="submit" onclick="validateUsername()" >Register</button>
            </div> <!-- end of right sideform -->

            </form>

</div> <!-- End of registration -->

<script type="text/javascript">
function validateUsername()
{
var x=document.forms["registration"]["userName"].value;
if (x == null || x== "")
{
document.getElementById("yy").innerHTML = "WHY WON'T YOU WORK GRRRR";
alert("First name must be filled out");
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:31:50.180

您的文本替换工作正常。但是，一旦您关闭警报框，就会发送表单以刷新页面。

更改`onclick="validateUsername()"`为单击处​​理程序函数`onclick="return validateUsername()"`并将其添加`return false`到末尾。

一旦掌握了窍门，请考虑在表单 HTML 中使用 addEventListener() 而不是硬编码的 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:32:12.740

问题是您没有停止表单提交事件。在您的情况下，这可以通过`return validateUsername()`在失败时的功能中`onclick`完成`return false`：`validateUsername`

[http://jsfiddle.net/rqUdT/](http://jsfiddle.net/rqUdT/)

但是，最好使用标准事件注册（通过`addEventListener`并使用事件对象的`preventDefault`方法来停止默认的点击行为。

[http://jsfiddle.net/rqUdT/1/](http://jsfiddle.net/rqUdT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:35:44.553

[jsFiddle 演示](http://jsfiddle.net/Class/xbBpY/)

使用 jquery 并删除 onclick 可能会更容易，例如：

**JS：**

```
$('#submit').click(function (e) {
    e.preventDefault();
    var x = document.forms["registration"]["userName"].value;
    if (x === null || x === "") {
        document.getElementById("yy").innerHTML = "WHY WON'T YOU WORK GRRRR";
        alert("First name must be filled out");
    }
}); 
```

**HTML：**

```
<button id="submit" type="submit">Register</button> 
```

# php - 将代码从一个 php 页面传递到另一个页面的方法

> ID：16073001
> 
> 赞同：0
> 
> 时间：2013-04-18T01:26:15.243
> 
> 标签：php, session, include, require

对不起，如果这是一个简单的问题，我对 php 还很陌生！

无论如何，我的问题如下：我在一个页面上有几行代码，其中我使用了 mysql、html 和 php，我想将它传递到另一个 php 页面。我一开始的想法是我会使用 $_SESSION，但是虽然它可以正常处理文本/变量，但它不适用于更广泛的代码。我想它不是为此而生的。我想到的另一种选择是使用 include/require 函数，但这意味着占用整个代码页面，尽管我只需要其中的一小部分。我有哪些选择？

例如，如果我有以下内容：

```
<html>
<table>
<td><select name="Example">
<?php
while ($example_variable=mysqli_fetch_array($example_mysql_select)){
echo "<option>" . $example_variable['field'] . "</option>";
}
?>
</html> 
```

...它不适用于会话。我有其他选择吗，还是我坚持使用 require/include？有没有办法让会话做到这一点？

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:31:30.750

尝试序列化它：

```
$_SESSION['var'] = serialize($var); 
```

然后通过以下方式访问它：

```
 $var = unserialize($_SESSION['var']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:39:41.177

在一个 PHP 页面上创建一个简单的函数：

```
function db_fetch($example_mysql_select){
    return mysqli_fetch_array($example_mysql_select)
} 
```

在您的 HTML 页面中，只需使用：

```
<html>
 <table>
  <td>
    <select name="Example">
    <?php echo "<option>" . db_fetch($example_mysql_select) . "</option>"; ?>
</html> 
```

# mysql - MYSQL子查询性能不一致

> ID：16073005
> 
> 赞同：0
> 
> 时间：2013-04-18T01:26:33.473
> 
> 标签：mysql, subquery

G日，

我对以下内容感到有些困惑。当我运行此查询时，需要很长时间才能解决：

```
Select *
from test
where id in (select id from test2 where customer = 'HARRY'); 
```

当我自己运行子查询时，它很快就会解析为“13454”。当我将主查询的 where 语句更改为 in ('13454') 时，它也会立即解决。

有人知道为什么它不会以原始格式运行吗？

干杯，

雷内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:29:26.630

原因是 MySQL 的一个怪癖。对外部表的每一行执行子查询。

要解决此问题，请使用`exists`：

```
Select *
from test
where exists (select id from test2 where test2.customer = 'HARRY' and test2.id = test.id); 
```

如果你有一个索引，这将最有效地工作`test2(customer, id)`。

我应该补充一点，这取决于 MySQL 的版本（我认为它在 5.5 中已修复）。较旧的[文档](https://dev.mysql.com/doc/refman/5.0/en/subquery-optimization-with-exists.html)将其解释为：

> 考虑以下子查询比较：
> 
> outer_expr IN (SELECT inner_expr FROM ... WHERE subquery_where)
> 
> MySQL“从外到内”评估查询。也就是说，它首先获取外部表达式outer_expr 的值，然后运行子查询并捕获它产生的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:27:55.087

采用`JOIN`

```
SELECT  DISTINCT a.*
FROM    Test a
        INNER JOIN Test2 b
            ON a.ID = b.ID
WHERE   b.customer = 'Harry' 
```

为了获得更快的性能，请确保`ID`在两个表上都有`KEY`。

# java - CM 和 KG 中的 Android BMI 计算

> ID：16073008
> 
> 赞同：-1
> 
> 时间：2013-04-18T01:26:56.207
> 
> 标签：java, android

嘿，我想创建 BMI 简单的 android 应用程序。我找到了这段代码，但这段代码以 LBS 和英寸计算。但是，我的程序需要在 KG 和 CM 中创建。我已经尝试重新编码。但是，我仍然找不到解决方案。

这是代码。

```
package com.example.bmicalculator;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.TextView;
    import android.widget.EditText;
    import android.widget.Button;
    import android.view.View;

    public class BMICalculatorActivity extends Activity {

    private EditText txtheight;
    private EditText txtweight;
    private TextView txtresult;
    private Button btncalculate;
    private double bmi = 0;
    private double valueheight = 0;
    private double valueweight = 0;
    private String resulttext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initControls();
        /*TextView tv = new TextView(this);
        tv.setText("BMI Calculator");
        setContentView(tv);*/

   }

    private void initControls() {
        txtheight = (EditText)findViewById(R.id.txtheight);
        txtweight = (EditText)findViewById(R.id.txtweight);
        txtresult = (TextView)findViewById(R.id.txtresult);
        btncalculate = (Button)findViewById(R.id.btncalculate);
        //btnreset = (Button)findViewById(R.id.btnreset);
        btncalculate.setOnClickListener(new Button.OnClickListener() { public void onClick (View v){ calculate(); }});
        //btnreset.setOnClickListener(new Button.OnClickListener() { public void onClick (View v){ reset(); }});
    }

    private void calculate()    {
        valueheight =Double.parseDouble(txtheight.getText().toString());
        valueweight =Double.parseDouble(txtweight.getText().toString());
        bmi = (valueweight / (valueheight * valueheight));
        //txttipamount.setText(Double.toString(bmi));
        if (bmi >= 30) { /* obese */
            resulttext = "Your BMI of " + Double.toString(bmi) + " is OBESE.";
            txtresult.setText(resulttext);
        } else if (bmi >= 25) {
            resulttext = "Your BMI of " + Double.toString(bmi) + " is OVERWEIGHT.";
            txtresult.setText(resulttext);
        } else if (bmi >= 18.5) {
            resulttext = "Your BMI of " + Double.toString(bmi) + " is IDEAL.";
            txtresult.setText(resulttext);
        } else {
            resulttext = "Your BMI of " + Double.toString(bmi) + " is UNDERWEIGHT.";
            txtresult.setText(resulttext);
        }
    }
    private void reset()
    {
        txtresult.setText("Your BMI is unknown.");
        txtheight.setText("0");
        txtweight.setText("0");
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T01:34:35.020

要获得以公制为单位的 BMI（身体质量指数），您需要用以千克为单位的体重除以以米为单位的身高^2。因此，如果您要求以厘米为单位的身高，请在进行计算之前将其除以 100。例子：

```
private void calculate()    {
    valueheight =Double.parseDouble(txtheight.getText().toString());
    valueweight =Double.parseDouble(txtweight.getText().toString());
    Double valueheightmeters;

    valueheightmeters = valueheight / 100; // Converting to meters.
    bmi = (valueweight / (valueheightmeters * valueheightmeters));

    //txttipamount.setText(Double.toString(bmi));
    if (bmi >= 30) { /* obese */
        resulttext = "Your BMI of " + Double.toString(bmi) + " is OBESE.";
        txtresult.setText(resulttext);
    } else if (bmi >= 25) {
        resulttext = "Your BMI of " + Double.toString(bmi) + " is OVERWEIGHT.";
        txtresult.setText(resulttext);
    } else if (bmi >= 18.5) {
        resulttext = "Your BMI of " + Double.toString(bmi) + " is IDEAL.";
        txtresult.setText(resulttext);
    } else {
        resulttext = "Your BMI of " + Double.toString(bmi) + " is UNDERWEIGHT.";
        txtresult.setText(resulttext);
    }
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-10T09:21:44.773

int dCentimeter = selectedValue; int feetPart = (int) ((dCentimeter / 2.54) / 12); int 英寸Part = (int) ((dCentimeter / 2.54) - (feetPart * 12)); tvMyHeight.setText(feetPart + "'" + inchesPenter 代码 hereart + "\" ft in");

# php - 无法让 PHP 字符串变量展开

> ID：16073015
> 
> 赞同：0
> 
> 时间：2013-04-18T01:27:31.193
> 
> 标签：php, argument-passing

我定义了一个这样的字符串变量：

```
$menu = '../views/menus/documentation-menu.html'; 
```

稍后在脚本中我尝试像这样使用它：

```
$content = file_get_contents("{$menu}"); 
```

但是当我运行脚本时，它会警告我“警告：file_get_contents(): Filename cannot be empty in”。

事实上，我已经尝试过各种双引号和单引号且没有大括号的组合，但总是错误的。如果我直接将字符串放入，它会按预期工作：

```
 $content = file_get_contents("../views/menus/documentation-menu.html"); 
```

但我希望 $menu 成为 file_get_contents 的参数，而不是硬编码字符串。

我可能遗漏了一些非常简单的东西，因为我不太了解 PHP....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:29:17.663

你试过`$content = file_get_contents($menu);`吗？

也就是说，您真的想操作文件内容，还是只是将其包含在页面中？如果是后者，只需使用`include`or `require`。

# ios - UIScrollView 以编程方式滚动

> ID：16073020
> 
> 赞同：2
> 
> 时间：2013-04-18T01:28:19.113
> 
> 标签：ios, objective-c, uiscrollview, uitextview, uitextviewdelegate

我在 UIScrollView 中有一个 UITextView，一旦用户开始编辑它就需要自动滚动。这是因为键盘会覆盖文本视图。

这是代码 -

在`viewDidLoad:`

```
feedBackformView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, segmentedControl.frame.origin.x + self.segmentedControl.frame.size.height, self.view.frame.size.width, self.view.frame.size.height)];
feedBackformView.backgroundColor = [UIColor whiteColor];
feedBackformView.scrollEnabled = YES;
feedBackformView.delegate = self;
feedBackformView.userInteractionEnabled = YES;
feedBackformView.showsVerticalScrollIndicator = YES;
feedBackformView.contentSize = CGSizeMake(320, 700);

commentsView = [[UITextView alloc] initWithFrame:CGRectMake(5, emailField.frame.origin.y + 40, 250, 150)];
commentsView.delegate = self;
commentsView.layer.borderWidth = 2.0f;
commentsView.layer.cornerRadius = 5; 
```

这是委托方法的实现 -

```
-(void)textViewDidBeginEditing:(UITextView *)textView{
    CGPoint point = textView.frame.origin;
    [scrollView setContentOffset:point animated:YES];
} 
```

然而，什么也没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:49:58.543

你做得很好但是使用**feedBackformView**而不是 **scrollView**，同时在方法中设置内容偏移量， `textViewDidBeginEditing:`看看下面的代码

```
feedBackformView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 50, 320, 200)];
feedBackformView.backgroundColor = [UIColor whiteColor];
feedBackformView.scrollEnabled = YES;
feedBackformView.delegate = self;
feedBackformView.userInteractionEnabled = YES;
feedBackformView.showsVerticalScrollIndicator = YES;
feedBackformView.contentSize = CGSizeMake(320, 700);

commentsView = [[UITextView alloc] initWithFrame:CGRectMake(5, 40, 250, 150)];
commentsView.delegate = self;
commentsView.layer.borderWidth = 2.0f;
commentsView.layer.cornerRadius = 5;

[feedBackformView addSubview:commentsView];
[self.view addSubview:feedBackformView]; 
```

在 textview 委托方法中，

```
-(void)textViewDidBeginEditing:(UITextView *)textView{
  CGPoint point = textView.frame.origin;
  [feedBackformView setContentOffset:point animated:YES];
 } 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:22:16.923

您可以使用 scrollView`scrollRectToVisible:animated`或`setContentOffset:animated`此处描述的方法： [UIScrollView Class Reference](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW26)

请记住，UITextView 带有自己的滚动视图。所以你可能不需要将它嵌套在另一个滚动视图中。但是，如果您的应用程序那么有趣，您可能需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:34:46.303

您的滚动点是否已经在可见点？

```
-(void)textViewDidBeginEditing:(UITextView *)textView{
    // try this instead
    CGPoint point = CGPointMake(textView.frame.origin.x, 
                                textView.frame.origin.y + textView.frame.size.height);
    [scrollView setContentOffset:point animated:YES];

    // What does this produce?
    NSLog(@"%@ %@", NSStringFromCGPoint(scrollView.contentOffset),
                    NSStringFromCGRect(textView.frame));
} 
```

# php - SimpleXml 无法访问子级

> ID：16073023
> 
> 赞同：0
> 
> 时间：2013-04-18T01:28:32.207
> 
> 标签：php, simplexml

这是我正在使用的 XML 片段：

```
<category name="pizzas">
    <item name="Tomato &amp; Cheese">
        <price size="small">5.50</price>
        <price size="large">9.75</price>
    </item>
    <item name="Onions">
        <price size="small">6.85</price>
        <price size="large">10.85</price>
    </item>
    <item name="Peppers">
        <price size="small">6.85</price>
        <price size="large">10.85</price>
    </item>
    <item name="Broccoli">
        <price size="small">6.85</price>
        <price size="large">10.85</price>
    </item>
</category> 
```

这是我的 php 的样子：

```
$xml = $this->xml;
$result = $xml->xpath('category/@name');
foreach($result as $element) {
    $this->category[(string)$element] = $element->xpath('item');
} 
```

一切正常，除了 $element->xpath('item'); 我也尝试过使用： $element->children(); 以及其他 xpath 查询，但它们都返回 null。为什么我不能访问某个类别的子项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:42:16.480

看起来您正在尝试基于类别构建一棵树，并以类别名称为键。为此，您应该将代码更改为如下所示：

```
$xml = $this->xml;

//Here, match the category tags themselves, not the name attribute.
$result = $xml->xpath('category'); 
foreach($result as $element) {
   //Iterate through the categories. Get their name attributes for the 
   //category array key, and assign the item xpath result to that.
   $this->category[(string)$element['name']] = $element->xpath('item');
} 
```

使用您的原始代码：`$result = $xml->xpath('category/@name');`您的结果是名称属性节点，作为属性，不能有子节点。

现在，如果您只是想要一个所有项目的列表，您可以使用`$xml->xpath('category/items')`，但这似乎不是您想要的。

# java - 在 Java 中，为什么 ResultSet 不允许您运行 next() 超过 1 次？

> ID：16073024
> 
> 赞同：0
> 
> 时间：2013-04-18T01:28:35.150
> 
> 标签：java, database, resultset

看看这段代码：

```
ResultSet results=preparedStmt.executeQuery();

while (results.next()){
   String subject=results.getString(1);
   System.out.println(subject +" 1st time");
}

while (results.next()){
   String subject=results.getString(1);             
   System.out.println(subject+ " 2nd time");
} 
```

为什么系统第一次只打印结果，第二次不打印结果？

如果我们想运行 results.next() 超过 1 次，那么正确的编码方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:33:13.637

您没有运行 .next() 一次。单个 while 循环将多次运行它，直到您到达结果集的末尾。当到达第二个 while 循环时，结果集中没有任何东西可以重复：你已经结束了。您必须再次运行查询才能重新开始或生成[可滚动的结果集](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)：

> ```
>  Statement stmt = con.createStatement(
>                                       ResultSet.TYPE_SCROLL_INSENSITIVE,
>                                       ResultSet.CONCUR_UPDATABLE);
>        ResultSet rs = stmt.executeQuery("SELECT a, b FROM TABLE2");
>        // rs will be scrollable, will not show changes made by others,
>        // and will be updatable 
> ```

并打电话`rs.first()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:32:18.817

`while( rs.next() )`会将“当前行”光标前进到集合的末尾。

默认情况下，a`ResultSet`是只读的并且只转发，所以一旦你到达最后，你需要调用 first() 重新开始。注意：`first()`是一种可选方法，您的驱动程序可能不支持。

# cocoa - 更改 NSTextField 的边框“发光”颜色

> ID：16073026
> 
> 赞同：8
> 
> 时间：2013-04-18T01:28:50.167
> 
> 标签：cocoa, colors, border, nstextfield

我在 MainMenu.xib 中有一个 NSText 字段，并且我设置了一个操作来验证它的电子邮件地址。我希望 NSExFields 边框颜色（蓝色发光）在我的操作返回 NO 时为红色，而在操作返回 YES 时为绿色。这是动作：

```
-(BOOL) validEmail:(NSString*) emailString {
    NSString *regExPattern = @"^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$";
    NSRegularExpression *regEx = [[NSRegularExpression alloc] initWithPattern:regExPattern     options:NSRegularExpressionCaseInsensitive error:nil];
    NSUInteger regExMatches = [regEx numberOfMatchesInString:emailString options:0 range:NSMakeRange(0, [emailString length])];
    NSLog(@"%ld", regExMatches);
    if (regExMatches == 0) {
        return NO;
    } else
        return YES;
} 
```

我现在调用这个函数并设置文本颜色，但我想设置 NSTextField 的发光颜色。

```
- (void) controlTextDidChange:(NSNotification *)obj{
    if ([obj object] == emailS) {
        if ([self validEmail:[[obj object] stringValue]]) {
            [[obj object] setTextColor:[NSColor colorWithSRGBRed:0 green:.59 blue:0 alpha:1.0]];
            [reviewButton setEnabled:YES];
        } else {
            [[obj object] setTextColor:[NSColor colorWithSRGBRed:.59 green:0 blue:0 alpha:1.0]];
            [reviewButton setEnabled:NO];
        }
    }
} 
```

我对子类 NSTextField 持开放态度，但最干净的方法将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-13T10:02:17.350

我对 Swift 2 的解决方案是

```
 @IBOutlet weak var textField: NSTextField! ``...

// === set border to red ===
// if text field focused right now
NSApplication.sharedApplication().mainWindow?.makeFirstResponder(self)
// disable following focusing
textField.focusRingType = .None
// enable layer
textField.wantsLayer = true
// change border color
textField.layer?.borderColor = NSColor.redColor().CGColor
// set border width
textField.layer?.borderWidth = 1``  * * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2014-03-26T23:32:47.227

The way to go about this is to subclass `NSTextFieldCell` and draw your own focus ring. As far as I can tell there's no way to tell the system to draw the focus ring using your own color, so you'll have to call `setFocusRingType:NSFocusRingTypeNone`, check if the control has first responder status in your drawing method, and if so draw a focus ring using your own color. 

If you decide to use this approach remember that the focus ring is a user defined style (blue or graphite), and there's no guarantee future versions of OSX won't allow the user to change the standard color to red or green. It's also likely the focus ring drawing style will change in future versions of OSX, at which point you'll have to update your drawing code in order for things to look right. 
```

# ios - 设置导航标题文本

> ID：16073036
> 
> 赞同：0
> 
> 时间：2013-04-18T01:29:50.733
> 
> 标签：ios, objective-c, uinavigationcontroller, uicollectionview

我有一个 UICollectionViewController 并试图设置导航标题..但这些都不起作用......它不显示文本！

```
self.titleLabel = [[UILabel alloc] initWithFrame:CGRectZero];
self.titleLabel.backgroundColor = [UIColor clearColor];
self.titleLabel.font = [UIFont fontWithName:@"ArialHebrew-Bold" size:15];
self.titleLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
self.titleLabel.textAlignment = NSTextAlignmentCenter;
self.titleLabel.textColor = [UIColor whiteColor];
self.titleLabel.text = [self.navigationItem title];
self.navigationItem.titleView = self.titleLabel;
[self.titleLabel setText:@"title"];

self.navigationItem.title = @"The title"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:38:32.550

使新标签的框架更大。导航栏的高度固定为 44 像素。

例如：CGRectMake(100,0,120,44);

宽度和原点取决于导航栏上的其他内容以及导航栏的宽度。

# python - 属性 Python 添加设置值

> ID：16073038
> 
> 赞同：1
> 
> 时间：2013-04-18T01:30:14.723
> 
> 标签：python, python-2.7

对于作文课，我需要存储成绩的属性应该是公开的，并且始终在 0.0 和 4.0 之间。我在想的是 set_grade(self,grade) 但是你如何实现一个 if 语句来确保它返回一个介于 4.0 之间的数字 0.0

```
class Assessment:

        grade = 0
        def get_grade(self):
        return self.grade

    """This operation is creating a concrete subclass of Assessment"""  
class Essay (Assessment):   

    """This operation is getting the grade the grade for the Essay class which will return a grade"""

        def get_grade(self):
        return self.grade

    """This operation is creating a TeamProject Class with an individual score and a team score grade"""    

class Teamproject(Assessment):

         ind_sc = 0

          ts_sc = 0
    """This operation is getting the grade to individual score and team score and returning the average"""

        def get_grade(self):
        return (self.ind_sc +self.ts_sc) / 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:35:14.207

> 如何实现 if 语句以确保它返回 4.0 之间的数字 0.0

尝试这个：

```
 def set_grade(self, grade):
      if grade < 0.0 or grade > 4.0:
          raise ValueError('out of range')
      self.grade = grade 
```

如果您在*Assessent*和*Essay*中使用它，*TeamScore*也将在界内。

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:37:07.137

```
if 0.0 <= grade <= 4.0:
    <do something>
else:
    raise ValueError("Error message) 
```

# javascript - Mongo: How to return a cursor with partial value match?

> ID：16073039
> 
> 赞同：0
> 
> 时间：2013-04-18T01:30:15.447
> 
> 标签：javascript, mongodb

I have a collection `Posts` and each post has a title and an author.

```
Posts : {
    id     : 7867887687,
    title  : unnamed-1,
    author : joe 
},{
    id     : 2867887687,
    title  : unnamed-2,
    author : joe 
},{
    id     : 1867337687,
    title  : happyhour,
    author : joe 
},{
    id     : 2367337687,
    title  : crappyhour,
    author : deb 
} 
```

I want to return a cursor with only the posts by joe that have a title unnamed*. The next step is to sort the unnamed posts and add a new unnamed post with the next available -x number. (if one had been previously deleted the next available -x might be in the middle of others ... (sort of like creaiting new folders in windows))

How would I do that in Mongo?

Or should I return all posts by joe and then do a forEach to find the unnamed ones somehow?

Or some other method?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:00:27.197

使用正则表达式：

```
db.Posts.find({author:'joe', title:/^unnamed/i}) 
```

这里有更多要阅读的内容[http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex](http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex)

# python - Call CMake from python script results in "Could not create named generator"

> ID：16073040
> 
> 赞同：6
> 
> 时间：2013-04-18T01:30:16.637
> 
> 标签：python, cmake

I'm building a project that should be able to move freely between machines. In order to not have hundreds of MB of libs I'm writing a series of python scripts that download and build the dependencies as well as my own project. I'm using CMake to generate VS projects.

To call CMake I build a command line and I use python `subprocess.check_call` as below

```
cmakeCmd = ["cmake.exe", '-G "Visual Studio 11 Win64"', build_path]
retCode = subprocess.check_call(cmakeCmd, stderr=subprocess.STDOUT, shell=True) 
```

The problem is that if I use `-G` option from CMake I get the following error regardless of the generator I choose:

```
CMake Error: Could not create named generator  "Visual Studio 11 Win64" 
```

I was thinking that should be some enviroment variable missing but the python path is complete with all my systems' variables.

What is odd is that if I don't set the generator and let CMake choose the default one the script runs fine. I have no ideia why.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T02:50:59.007

您需要将`-G`标志与其在命令中的值分开。Python 似乎在有效地调用

```
cmake "-G Visual Studio 11 Win64" <build_path> 
```

你想要的更像是：

```
cmakeCmd = ["cmake.exe", "-G", "Visual Studio 11 Win64", build_path] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:51:40.803

应该：

```
cmakeCmd = ['cmake', '-G', 'Visual Studio 11 Win64', build_path] 
```

为了*跨平台*，我建议执行以下操作：

```
if sys.platform.startswith('win'):
    shell = True
else:
    shell = False

retCode = subprocess.check_call(cmakeCmd, stderr=subprocess.STDOUT, shell=shell) 
```

如果您计划在多个平台（包括 Unix OS 系列）上使用该项目。顺便说一句，由于您`shell=True`在 Windows 上使用，您可以省略`.exe`中的后缀`cmakeCmd`（如果此脚本也用于 Unix OS 系列，这很好，因为没有类似的东西`.exe`）。

# java - 为客户端使用轴 2 从 wsdl 生成存根

> ID：16073041
> 
> 赞同：3
> 
> 时间：2013-04-18T01:30:23.877
> 
> 标签：java, web-services, wsdl, axis2, wsdl2java

我是 web 服务领域的新手，我必须开发客户端代码，即 java 代码，我已经获得了一个 wsdl，我可以通过在浏览器中打开该 wsdl 来查看它，因为我可以访问 wsdl，我正在使用 Axis 2 ，我必须使用 wsdl2java 工具，该工具在axis2发行版中可用以生成存根。使用这些存根我需要编写我的客户端，所以你能否分享任何从wsdl生成存根的url或示例使用轴 2 显示，因为最终我必须从 wsdl 生成客户端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:01:38.710

本教程[http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#createclients](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#createclients)可能会对您有所帮助。在那里你也得到了客户端 java 类。

# c# - 如果 URL 中有多个参数，SSRS 报告将不会启动

> ID：16073044
> 
> 赞同：0
> 
> 时间：2013-04-18T01:30:46.527
> 
> 标签：c#, asp.net, reporting-services, parameters, ssrs-2008

我正在尝试将参数从 .NET 应用程序传递给我的 SSRS 报告。

我有 3 个参数要传递：instanceID、EL 和 OL。

在我的代码隐藏中，我的代码如下：

```
 string params = Session["instanceID"].ToString() + "&EL=unhide&OL=unhide";
        string script = "<SCRIPT LANGUAGE='JavaScript'> ";
        script += "OpenLink1(" + params + ");";
        script += "</SCRIPT>";
        Page.RegisterStartupScript("ClientScript", script); 
```

我的javascript代码如下：

```
function OpenLink1(params ) {
    var str = "http://server/ReportServer/Pages/ReportViewer.aspx?%2f<path>%2f<report name>%2<report name>&rs:Command=Render&instanceID=" + params;

    window.open(str, "List", "scrollbars=yes,resizable=yes,width=800,height=600");
    return false;
} 
```

无论我做什么，报告都不会启动（弹出）。

EL 和 OL 参数应该隐藏 SSRS 报告中的表格。

例如`=IIF(Parameters!EL.Value = "hide", false, true)`

如果我从报告中删除这 2 个参数并在后面的代码中删除 URL 中的参数，SSRS 报告将毫无问题地启动。

让我困惑的是，如果我直接在浏览器中输入 URL，报告工作正常 - 这让我相信与我的编码和传递参数有关的事情是错误的？

有任何想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:04:25.417

问题在于您在后面的代码中生成的 javascript。在生成的 javascript 中创建函数调用时，需要在 params 变量周围加上单引号。

```
 script += "OpenLink1('" + params + "');"; 
```

# java - 将参数传递给函数 JSF

> ID：16073051
> 
> 赞同：0
> 
> 时间：2013-04-18T01:31:30.863
> 
> 标签：java, hibernate, jsf

大家好，我需要将一些参数传递给 actionListener 这是我的代码

```
<p:dialog id="dialog" header="Acceso Restringido" widgetVar="dlgRegister" modal="true">  
<h:form>  

    <h:panelGrid columns="2" cellpadding="5">  
        <h:outputLabel for="username" value="Nombre de Usuario:" />  
        <p:inputText value="#{loginBean.usuario.username}"   
                id="username" required="true" label="username" />  

        <h:outputLabel for="password" value="Contraseña:" />  
        <h:inputSecret value="#{loginBean.usuario.password}"   
                id="password" required="true" label="password" />

        <h:outputLabel for="correo" value="Correo:" />  
        <h:inputSecret value="#{loginBean.usuario.correo}"   
                id="correo" required="true" label="correo" />

        <f:facet name="footer">  
            <p:commandButton id="regButton" value="Registrar" update=":growl"   
                             actionListener="#{loginBean.login(actionEvent)}"   
                oncomplete="handleLoginRequest(xhr, status, args)"/>  
        </f:facet>  
    </h:panelGrid>  

</h:form> 
```

好吧，我需要将 svalue="#{loginBean.usuario.username}" 示例传递给 actionListener="#{loginBean.login(actionEvent,---HERE----)}"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:34:56.717

```
actionListener="#{loginBean.login(actionEvent)}" 
```

这个不对。范围内根本不存在托管 bean `#{actionEvent}`。JSF 已经`ActionEvent`为动作侦听器方法准备了真正的参数本身。只需省略它：

```
actionListener="#{loginBean.login}" 
```

JSF 将隐式创建并传递正确的参数。

您可以直接在方法内部访问用户名：

```
public void login(ActionEvent event) {
    System.out.println(usario.getUsername()); // Look, it's already been set by JSF.
} 
```

### 也可以看看：

*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:28:23.980

1.  该值已在 loginBean.usario.username 中设置
2.  您可以像 loginBean.usario.username 一样设置它

# oracle - SQL脚本未在bash中执行

> ID：16073052
> 
> 赞同：1
> 
> 时间：2013-04-18T01:31:33.193
> 
> 标签：oracle, bash, unix

我正在从 bash 运行 SQL 脚本。其中一个脚本似乎运行良好，但另一个脚本失败。您能否告知可能是什么原因？

```
#!/bin/bash
sqlplus -S user/password@database << EOF
whenever sqlerror exit sql.sqlcode;
set echo off 
set heading off
@MyScript1
@MyScript2
exit;
EOF 
```

错误： `SP2-0310: unable to open file "MyScript2.sql"`

在 Unix 中，两者的访问级别是：

```
 -rwxrwxrwx  MyScript1.sql
 -rwxrwxrwx  MyScript2.sql 
```

该错误确实表明它无法访问该文件`MyScript2.sql`。但我很好奇的是它为什么可以访问`MyScript1.sql`同一个文件夹中存在的文件，但不能访问`MyScript2.sql`？

此外，如果我从文件所在的文件夹中仅在 unix（使用 SQL*Plus）中运行该文件，它就可以正常工作。但是，如果我从不同的文件夹中运行相同的内容，则不会。下面的例子将更好地解释它

`/Folder/having/the/files`

两者都 `MyScript1.sql`运行`MyScript2.sql` 良好

`/Some/random/folder`

`MyScript1.sql`运行良好，但`MyScript2.sql`出现错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:10:14.733

你说：

> 如果我从文件所在的文件夹中仅在 unix 中运行该文件（使用 SQL*Plus），它就可以正常工作。但是，如果我从不同的文件夹中运行相同的内容，则不会。

如果您从另一个文件夹运行 bash 脚本到您拥有 SQL 文件的位置，那么您如何期望 SQL*Plus 知道在哪里可以找到这些文件？问题不是“为什么看不见`MyScript2.sql`，而是为什么*能*看见” `MyScript1.sql`。显而易见的答案是它看不到，或者至少看不到您认为它正在看到的文件版本。

从[SQL*Plus 文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_two.htm#sthref67)中：

> SQL*Plus 在当前目录中搜索 SQL 脚本，包括 login.sql，然后在 SQLPATH 指定的目录以及 SQLPATH 目录的子目录中搜索。

因此，如果您没有给出 SQL 文件的完整路径，它将在当前工作目录中搜索 - 当您执行 bash 脚本时，您所在的位置，而不是 bash 脚本所在的目录，即`pwd`显示的内容 - 和在`$SQLPATH`如果它被设置。

这表明您在其中一个地方有一份副本`MyScript1.sql`，或者可能是指向您的真实文件的软链接。如果我不得不猜测，我推测您最初编写`MyScript.sql`了与脚本相同的目录，然后在编写之前将其复制到另一个目录`MyScript2.sql`。无论如何，`MyScript1.sql`您正在运行的可能已经过时，或者将来可能会变得如此。

简短的回答是提供 SQL 文件的完整路径，或者作为`@`命令的一部分，或者在启动 SQL*Plus 之前在 bash 脚本中切换到该目录。

# ruby-on-rails-3.2 - 在 Rails 中实现虚拟概念

> ID：16073054
> 
> 赞同：0
> 
> 时间：2013-04-18T01:31:38.017
> 
> 标签：ruby-on-rails-3.2

我的问题更笼统。

我知道rails中的范围，但我遇到了一个我无法理解的概念

我在数据库中有几张表 - 比如客户、产品、销售等。我有各种销售人员正在登录查看他们的销售情况等。我想实现一个“我的”概念，所以当销售人员来的时候因为他们只能看到他们的销售额、他们的客户、他们销售的产品等。所以像 my.customers 或 my.sales 或 my.territories 等。

我该如何实施？我怎样才能在客户、销售等前面加上“我的”来优雅地实现这一点？

指导表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:41:16.760

你应该看看：

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

这是您用来关联和管理用户看到的内容以及您在控制器/视图中访问它的方式。例如：

```
class Client < ActiveRecord::Base
  has_many :sales
end

class Sale < ActiveRecord::Base
  belongs_to :client
end 
```

这将使客户有很多销售，`Client.first.sales...`例如，您可以使用它来访问它。

要`my`代替`User.first`，您可以使用：

```
private

def my
  User.first
end 
```

# dynamics-crm - MS Dynamics-CRM 如何使用 JS 通过“显示名称”找到现有视图的 GUID？

> ID：16073055
> 
> 赞同：0
> 
> 时间：2013-04-18T01:31:39.597
> 
> 标签：dynamics-crm, lookup, fetchxml, defaultview

我有类别 1、类别 2 和类别 3。Cat1 是 cat2 的父级。Cat2 是 cat3 的父级。查看按父级过滤的每个类别。

**问题：**如果在选择 cat1 时未指定 cat2，则不会过滤类别 3。

**需要：**除了现有功能外，我还需要能够按祖父母过滤。

**我的解决方案**：我现在在做什么 -> 我能够创建自定义视图。在表单加载或更改 cat1 时，我正在运行一个设置默认自定义视图的脚本。但在这种情况下 - 我需要在指定类别 2 时将视图改回来。（因为用户可以选择类别 1 -> 然后选择类别 2 和类别 3）。要设置默认视图，我需要提供所需视图的 GUID。

**问题1：**这是这样做的方法吗？

**问题2：**如何使用JS通过“显示名称”找到现有视图的GUID？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:28:19.183

实际上，我不知道为什么我以前想不到，但我需要做的就是在同一个查询中指定第二个条件。“从这个地方选择这个 cat1=1 和 cat2=2

# ruby-on-rails - 如果数据库中为 nil，Rails DateTime 字段具有当前日期/时间

> ID：16073059
> 
> 赞同：0
> 
> 时间：2013-04-18T01:32:04.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, rails-activerecord

我有一个带有`datetime`字段的表格。由于 Rails 3.2.13 还不支持`type="datetime-local"` `input`字段（而且我还没有准备好迁移到 4.0 beta），所以我手动执行此操作：

```
<input type="datetime-local" name="person[my_date_time]"<% if @person.my_date_time %> value="<%=@person.my_date_time.strftime('%FT%T')%>"<% end %>/> 
```

`nil`问题是 @person.my_date_time 如果它在数据库中，它将是当前日期/时间。它也以秒为单位输出，这破坏了 Chrome 对日期时间的处理。`nil`如果它在数据库中，我希望该字段为空。我怎么知道？Rails 的`datetime_select`方法以我想要的方式处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:36:44.767

如果 datetime 字段`nil`在数据库中，则应用程序中的某些内容必须更改或覆盖该值。也许您在某处有默认设置？如果没有看到比现在发布的更多的代码，就不可能说出发生了什么。您可以为您的`Person`模型和任何其他相关代码（任何可能影响事物的宝石等）发布代码吗？

```
strftime("%FT%R")  # Will output without seconds, e.g. "2013-04-18T21:43" 
```

[http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

# jquery - 使用 .load 后，我的 jquery 在 div 上不起作用

> ID：16073063
> 
> 赞同：0
> 
> 时间：2013-04-18T01:32:15.173
> 
> 标签：jquery, html, wordpress

我不明白为什么会这样，真的很奇怪。由于我是 Jquery 新手，我可能会遗漏一些东西。这是我的代码

```
<script type="text/javascript">
$(document).ready(function(){
$(".photos_container > a").mouseover(function() {
  $(this).fadeTo("slow", 0.6);
 }).mouseout(function(){
  $(this).fadeTo("slow", 1);
});

$('.pagination a').on('click', function(e){  
e.preventDefault();  
var link = $(this).attr('href');  
$('.tab-pane.active').html('Loading...');
$('.tab-pane.active').load(link+' .tab-pane.active > *');
});
});
</script> 
```

HTML

```
<div class="photos_container tab-pane active" id="1">
    <a href="javascript:void(0)" data-name="Chameleon Minds" data-photo-medium="http://localhost/site/wp-content/uploads/2013/04/Chameleon-medium.png" data-title="Art Projects for Kids - Status : Client work">
        <img class="thumb_image" src="http://localhost/site/wp-content/uploads/2013/04/Final.png">
    </a>
    <div class="pagination">
        <a class="page-numbers" href="">1</a>
        <span class="page-numbers current">2</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:34:40.770

没有看到你的 HTML 很难说，但如果`.tab-pane.active`包含`.pagination a`初始点击/鼠标悬停事件绑定的元素将被破坏。您可以使用事件委托解决此问题（绑定到不会被删除的包含元素 - 尽可能具体）。

```
$(document).on('click', ".pagination a", function (e) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:22:29.593

```
$('.pagination a').on('click', fun… 
```

在该行中，您将事件处理程序直接绑定到实时 DOM 元素（元素内的所有锚标记都带有类分页）。然后在事件处理程序中调用 jQuery 的 .load 方法覆盖部分 DOM。

```
$('.tab-pane.active').load(link… 
```

问题是您覆盖的 DOM 部分包含您将事件侦听器绑定到的元素。

新内容被加载到“.tab-pane.active”区域。因此，您绑定单击处理程序的元素不再存在。它们已被删除并替换为新内容。因此，单击事件处理程序不再绑定到任何东西。

为了解决这个问题，您需要使用事件委托（有很多关于 javascript 中的事件委托的精彩文章）。Explosion Pills 的回答实际上是正确的，建议使用选择器绑定到文档以指定要执行的元素。

```
$(document).on('click', ".pagination a", function (e) {
    e.preventDefault();  
    var link = $(this).attr('href');
    $('.tab-pane.active').html('Loading...');
    $('.tab-pane.active').load(link);
}); 
```

您的代码中还有另一个错误。

```
$('.tab-pane.active').load(link+' .tab-pane.active > *'); 
```

+ 运算符是连接到 url 的字符串。我很确定这是一个错误。

# signalr - SignalR 和集线器持久性

> ID：16073065
> 
> 赞同：0
> 
> 时间：2013-04-18T01:32:30.880
> 
> 标签：signalr, signalr-hub

我正在尝试 SignalR，但我不太明白如何以调用同一个集线器的方式从我的客户端调用方法。

我的中心有两种方法：

```
 private ctlDataManager myManager;
    public void StartConnection()
    {
        myManager = new ctlDataManager("test");

        myManager.UpdateItemEvent += myManager_UpdateItemEvent;

        myManager.Connect();
    }

    public void StopConnection()
    {
        myManager.Disconnect();
    } 
```

在我的客户中，我尝试这样称呼他们：

```
var notificationHub = $.connection.notificationHub;

    $.connection.hub.start()
        .done(function (state) {
            $("#submit").click(function (e) {
                e.preventDefault();
                notificationHub.server.startConnection();
                return false;
            });

            $("#stop").click(function (e) {
                e.preventDefault();
                notificationHub.server.stopConnection();
                return false;
            });
        }); 
```

现在，当我单击开始按钮时，它工作正常，它也会启动它并接收数据。但是当我单击停止按钮时，它会引发对象错误的实例。'myManager' 似乎为空。这几乎就像一个新的枢纽开放了。当然，我需要它与我需要关闭连接的相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T19:30:12.803

据我了解，服务器端集线器类没有持久化。因此，myManager 对象是由来自客户端的每个方法调用创建的。我的建议是在您的应用程序的其他地方声明 myManager ，您可以确保 100% 的正常运行时间，并让您的服务器端集线器方法以这种方式与之通信。

验证这一点的一种方法是调试集线器类的构造函数。您会注意到，每次客户端->服务器端方法调用都会调用它。

# javascript - 悬停在不同元素上时 CSS3 动画开始？

> ID：16073066
> 
> 赞同：2
> 
> 时间：2013-04-18T01:32:42.427
> 
> 标签：javascript, jquery, css, css-animations

我有一个导航栏，当我将鼠标悬停在列表中的一个链接上时，我试图从页外获取两个动画链接并在我的其他链接旁边结束。

当前导航链接：

```
<div class="links">
  <ul>
     <li>
         <a href="#">link 1</a>
     </li>
     <li>
         <a href="#">link 2</a>
     </li>
     <li>
         <a href="#">link 3</a>
     </li>
  </ul>
</div> 
```

和.links的css：

```
.links ul {
    white-space: nowrap;
    list-style-type: none;
    position: fixed;
    top: 8px;
    left: 60%;
    z-index: 4; 
    width: auto;
    height: 67px;
}

.links li  {
    white-space: nowrap;
    display: inline-block;
    margin-right: 30px;
    z-index: 4;
    height: 40px;
} 
```

这是相关的 css，以及我目前可以正常工作的动画：

```
.extralinks {
    position: fixed;
    top: 8px;
    left: 90%;
    animation-name: slidey;
    animation-duration: 1s;
    animation-timing-function: ease;
    animation-delay: 0s;
    animation-iteration-count: 1;
    animation-direction: normal;
    animation-play-state: running;
/* Safari and Chrome */
    -webkit-animation-name: slidey;
    -webkit-animation-duration: 1s;
    -webkit-animation-timing-function: ease;
    -webkit-animation-delay: 0s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-direction: normal;
    -webkit-animation-play-state: running;
    z-index: 4;
}

@keyframes slidey {
    0% {left: 90%; top: 8px;}
    100% {left: 40%; top: 8px;}
}

@-webkit-keyframes slidey /* Safari and Chrome */ {
    0% {left: 90%; top: 8px;}
    100% {left: 40%; top: 8px;}
}

.links li:nth-child(3) {
    background-color: Red;
} 
```

.extralinks 的标记

```
<div class="extralinks">
<ul>
    <li>
       <a href="#">link 4</a>
    </li>
    <li>
       <a href="#">link 5</a>
    </li>
</ul>
</div> 
```

我需要这样做，以便当有人将鼠标悬停在“链接 3”上时，动画链接从右侧滑入并在我的链接旁边结束。我不太确定如何将动画准确链接到列表中的“链接 3”。有什么帮助吗？我不会反对使用 javascript/jquery，我只是不精通。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:26:55.830

我并不完全清楚你的目标，但我做了一些假设并一起拍了一个[jsFiddle](http://jsfiddle.net/Bushwazi/fMtz6/)。我改用 css 过渡，因为我认为它是一个 :hover 动画，这允许子菜单返回到它的位置。

```
* {
    padding:0;
    margin:0;
}
.links {
    width:100%;
}
.links > menu {
    width:100%;
    text-align:center;
}

.links menu li  {
    display: inline-block;
    position:relative;
    padding:0.75em 1em;
}
.l3 .extralinks {
    position:absolute;
    top:2em;
    left:100%;
    z-index: 4;

    -webkit-transition:all 1s ease-in-out 0s;
    -moz-transition:all 1s ease-in-out 0s;
    -o-transition:all 1s ease-in-out 0s;
    -ms-transition:all 1s ease-in-out 0s;
    transition:all 1s ease-in-out 0s;
}
.l3:hover .extralinks {
    left:0;    
}
.l3:hover .extralinks li {
    display:block;
}
.links li:nth-child(3) {
    background-color: Red;
}

    <div class="links">
      <menu>
         <li>
             <a href="#">link 1</a>
         </li>
         <li>
             <a href="#">link 2</a>
         </li>
         <li class="l3">
             <a href="#">link 3</a>
             <menu class="extralinks">
                 <li>
                     <a href="#">link 4</a>
                 </li>
                 <li>
                     <a href="#">link 5</a>
                 </li>
             </menu>
         </li>
      </menu>
    </div> 
```

# image - 如何确保图像是流畅的并且会调整大小？

> ID：16073069
> 
> 赞同：0
> 
> 时间：2013-04-18T01:33:16.283
> 
> 标签：image, fluid-layout

我正在尝试使用 CSS 来确保如果屏幕低于某个分辨率或窗口低于某个大小，我页面上的图像将调整大小。我已阅读使用 {max-width:100%}，已将其合并到我的代码中，但图像根本没有调整大小。图像宽 500 像素。

谢谢！

CSS 和 HTML：

```
.left{
float:left;
width:600px;
}

.right{
float:right;
width:400px;
}

#logoimage{
width: 100%;
margin: 50px auto;
max-width: 100%;
}

#navbar{
text-align: center;
font-family: 'Special Elite', cursive;
color:white;
font-size: 80px;
font-style: bold;
display: block;
margin: 60px auto;

}

<body>
<div class="left">
<div id="logo">
<img src="/pictures/logo.png">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:52:09.743

您的 ID 的 CSS`logoimage`未应用于任何内容。您有一个 img 元素，但没有指定 ID。更改`<img src="/pictures/logo.png">`为`<img id="logoimage" src="/pictures/logo.png" />`使其生效。

此外，没有必要设置`width`为 100% 和`max-width`100%。这是多余的。将宽度设置为 100% 以确保元素为 100% 宽度，*或者将 max-width**设置*为 100% 以确保元素自动宽度最大为 100%。

# c# - 如何从 youtube api 返回一位用户的订阅者？

> ID：16073070
> 
> 赞同：1
> 
> 时间：2013-04-18T01:33:21.577
> 
> 标签：c#, .net, youtube-api

我很难在糟糕的官方文档和社区中找到它

任何方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:51:15.260

在 3.0 版实验性 API 之前，这似乎[是不可能的。](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/3rN_WDaMgTs)如果您使用 V3 API，您可以获取[Channels 列表](https://developers.google.com/youtube/v3/docs/channels/list)并将`mySubscribers`过滤器设置为`true`. 在参数中设置您要检索的属性`part`（例如`contentDetails`其中包含订阅者的 Google+ ID 等信息）。此过滤器已授权，因此您需要获得用户的许可才能调用此方法。

# arrays - 数组元素（MovieClips）在我添加新元素时被删除。为什么？

> ID：16073075
> 
> 赞同：0
> 
> 时间：2013-04-18T01:34:16.213
> 
> 标签：arrays, flash, actionscript-2, movieclip

我在 ActionScript 2.0 中遇到了一些奇怪的行为。我正在尝试向舞台添加一定数量的页面（MovieClips），同时将引用存储在一个方便的数组中以供以后访问。这是我的代码（假设所有变量都已正确声明）：

```
 _adPages = new Array();

    _adPages[0] = adPageTrack.attachMovie("adPage", "adpage0" + 0, getNextHighestDepth());
    _adPages[0].init( _adItems[0] );
    _adPages[0]._x = 0 * 10;

    _adPages[1] = adPageTrack.attachMovie("adPage", "adpage0" + 1, getNextHighestDepth());
    _adPages[1].init( _adItems[1] );
    _adPages[1]._x = 1 * 10;

    _adPages[2] = adPageTrack.attachMovie("adPage", "adpage0" + 2, getNextHighestDepth());
    _adPages[2].init( _adItems[2] );
    _adPages[2]._x = 2 * 10;

    _adPages[3] = adPageTrack.attachMovie("adPage", "adpage0" + 3, getNextHighestDepth());
    _adPages[3].init( _adItems[3] );
    _adPages[3]._x = 3 * 10;

    trace(_adPages);
    for (var i:Number = 0; i < 4; i++) {
        trace("Ad page x coordinate: " + _adPages[i]._x);
        trace("Ad page y coordinate: " + _adPages[i]._y);
    } 
```

这最初是一个循环，它已被分解，因此我可以更仔细地检查它。注意跟踪语句。它们应该输出一组 MovieClip 句柄，后跟一个 x 和 y 坐标列表。相反，他们输出这个：

```
,,,_level0.main.adPageTrack.adpage03
Ad page x coordinate: undefined
Ad page y coordinate: undefined
Ad page x coordinate: undefined
Ad page y coordinate: undefined
Ad page x coordinate: undefined
Ad page y coordinate: undefined
Ad page x coordinate: 30
Ad page y coordinate: 0 
```

除了最后一个要设置的项目外，所有项目都已被删除。如果我删除第四个项目，那么第三个项目现在完好无损，而其他所有项目都消失了。

有谁知道这里发生了什么？这是一个错误还是我只是错过了一些关于语言的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:40:25.150

附加影片剪辑时需要使用 adPageTrack.getNextHighestDepth() ，否则每个 attachMovie 调用都会删除前一个。

```
_adPages[0] = adPageTrack.attachMovie("adPage", "adpage0" + 0, adPageTrack.getNextHighestDepth());
[...] 
```

# php - 为用户存储密码历史的最佳技术？

> ID：16073079
> 
> 赞同：3
> 
> 时间：2013-04-18T01:34:31.223
> 
> 标签：php, sql, passwords, history

我正在开发一个PHP登录系统。我想实施一个限制，以便用户不能使用他们以前使用过的密码（最多 5 个旧密码）。存储密码的最佳选择是什么？我想出了两个想法：

1) 表：密码列：PasswordID、UserID、Password1、Password2、Password3、Password4、Password5、LastChanged、CurrentPassword。每个用户都有自己的行。随着时间的推移填满列并相应地重写。

或者

2) 表：密码列：PasswordID、UserID、Password、DateChanged。每个用户最多有 6 行。PHP 将处理确定哪个是当前通过日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:52:04.493

选项 2 是两个选项中较好的一个，只是您不必担心删除行。大多数 RDBMS 都有一种基于某些东西选择前 N 条记录的方法。

选项 2 更好的主要原因是，如果您增加或减少必须查询的记录数，您可以简单地更新数据库记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-21T07:36:57.330

虽然我的回答来晚了，但你的#2 更好。但是，我只是通过创建一个触发器来创建用户密码历史记录，该触发器在另一个表上更新之前存储用户表行。从这里开始，php 脚本将新密码与此备份表上的最后五个密码进行反检查。

这避免了用垃圾记录过度填充用户表，从而加快了登录身份验证和新密码过程。

# java - JDBC 错误：运算符不存在：日期 = 整数

> ID：16073084
> 
> 赞同：3
> 
> 时间：2013-04-18T01:35:04.427
> 
> 标签：java, sql, postgresql, jdbc

```
 String checkAvailable_flight = String.format("SELECT Flightid, flightdate,"
            + " origin, destination FROM flight"
            + " WHERE  Flightdate::Date = %s  AND origin = %s"
            + " AND destination = %s;", date_, origin_, destination_);

    ResultSet rs = stmt.executeQuery(checkAvailable_flight);

    if (!rs.next()) {

        System.out.println("no data inserted");
    } else {

        do {
            int flightid = rs.getInt("flightid");
            String date = rs.getString("flightdate");
            String origin = rs.getString("origin");
            String destination = rs.getString("destination");

            System.out.printf("%-10d %5s %5s %7s\n",flightid, date, origin, destination);

        } while (rs.next());
    } 
```

发生错误：

```
SQLException : ERROR: operator does not exist: date = integer
  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.
  Position: 86
SQLState : 42883
SQLCode : 0 
```

你好，我在 JDBC 上工作，想执行 sql 查询并打印出表格..但我得到了上面的错误..

我尝试以另一种方式投射飞行日期，例如：

```
CAST(Flightdate AS TEXT) LIKE '2013-04-12%' 
```

但错误仍然发生....

任何建议都会不胜感激..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T01:43:58.980

我猜你的日期可能会被替换而不引用，比如`2012-01-01`而不是`'2012-01-01'`. `2012-01-01`是导致 number 的整数数学表达式`2010`，因此您将日期与整数进行比较。你需要引用你的日期，或者更好的是，使用适当的准备好的陈述。

为什么使用准备好的语句？

*   更容易做对
*   [lil'鲍比桌](http://bobby-tables.com/)
*   [维基百科：SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

为了证明我认为您的代码的问题是什么，我认为您正在这样做：

```
regress=> SELECT DATE '2012-03-12' = 2012-03-12;
ERROR:  operator does not exist: date = integer
LINE 1: SELECT DATE '2012-03-12' = 2012-03-12;
                                 ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

观察：

```
regress=> \x
Expanded display is on.
regress=> SELECT 
              2012-03-12 AS unquoted,
              pg_typeof(2012-03-12) AS unquotedtype,
              '2012-03-12' AS quoted,
              pg_typeof('2012-03-12') AS quotedtype, 
              DATE '2012-03-12' AS typespecified,
              pg_typeof(DATE '2012-03-12') AS typespecifiedtype;
-[ RECORD 1 ]-----+-----------
unquoted          | 1997
unquotedtype      | integer
quoted            | 2012-03-12
quotedtype        | unknown
typespecified     | 2012-03-12
typespecifiedtype | date

(1 row) 
```

如果您不使用准备好的语句，请替换`%s`为`DATE '%s'`，但*请*使用准备好的语句。

您可以添加一条语句以打印`checkAvailable_flight`格式化后的内容，然后将其输出粘贴到此处以确认或反驳我的猜测吗？

# php - 试图理解 Zend/Registry.php 中的 offsetExists 函数

> ID：16073088
> 
> 赞同：-1
> 
> 时间：2013-04-18T01:35:42.130
> 
> 标签：php, zend-framework

```
 public function offsetExists($index)
    {
        return array_key_exists($index, $this);
    } 
```

这取自 Zend/Registry.php，我的问题是： `$this`是当前对象，对吗？但这里似乎也是一个数组？那么 `$this`这里的实际含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:38:14.213

你会注意到[`Zend_Registry`](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Registry.php)extends `ArrayObject`。这允许它*像*数组一样使用。

进一步阅读 - [http://php.net/manual/en/class.arrayobject.php](http://php.net/manual/en/class.arrayobject.php)

`Zend_Registry`覆盖的原因`ArrayObject::offsetExists()`是由于这个错误 - [https://bugs.php.net/bug.php?id=40442](https://bugs.php.net/bug.php?id=40442)

# c# - 有没有办法创建一个委托来获取和设置 FieldInfo 的值？

> ID：16073091
> 
> 赞同：30
> 
> 时间：2013-04-18T01:36:00.490
> 
> 标签：c#, delegates, expression-trees, setvalue, fieldinfo

对于属性`GetGetMethod`，`GetSetMethod`我可以这样做：

```
Getter = (Func<S, T>)Delegate.CreateDelegate(typeof(Func<S, T>), 
                                             propertyInfo.GetGetMethod()); 
```

和

```
Setter = (Action<S, T>)Delegate.CreateDelegate(typeof(Action<S, T>), 
                                               propertyInfo.GetSetMethod()); 
```

但是我该怎么做`FieldInfo`呢？

我不是在寻找代表`GetValue`和`SetValue`（这意味着我每次都会调用反射）

```
Getter = s => (T)fieldInfo.GetValue(s);
Setter = (s, t) => (T)fieldInfo.SetValue(s, t); 
```

但如果这里有`CreateDelegate`办法？**我的意思是[由于 assignments 返回一个 value](https://stackoverflow.com/questions/3807192/why-do-assignment-statements-return-a-value)，我可以将 assignments 视为一种方法吗？**如果是这样，有没有一个`MethodInfo`句柄？换句话说**，我如何将`MethodInfo`设置和从成员字段获取值的权利传递给`CreateDelegate`方法，以便我得到一个可以直接读取和写入字段的委托？**

```
Getter = (Func<S, T>)Delegate.CreateDelegate(typeof(Func<S, T>), fieldInfo.??);
Setter = (Action<S, T>)Delegate.CreateDelegate(typeof(Action<S, T>), fieldInfo.??); 
```

*我可以构建表达式并编译它，但我正在寻找更简单的东西。最后，如果问的问题没有答案，我不介意走表达路线*，如下图：

```
var instExp = Expression.Parameter(typeof(S));
var fieldExp = Expression.Field(instExp, fieldInfo);
Getter = Expression.Lambda<Func<S, T>>(fieldExp, instExp).Compile();
if (!fieldInfo.IsInitOnly)
{
    var valueExp = Expression.Parameter(typeof(T));
    Setter = Expression.Lambda<Action<S, T>>(Expression.Assign(fieldExp, valueExp), instExp, valueExp).Compile();
} 
```

还是我在追求不存在（因为我还没有看到类似的东西）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-25T19:12:44.293

正如 Peter Ritchie 所建议的，您可以在运行时编译自己的代码。一旦您第一次调用委托，该方法就会被编译。所以第一次调用会很慢，但是任何后续调用都将尽可能快地在没有非托管指针/联合的情况下进入 .NET。除了第一次调用外，委托比直接使用 FieldInfo 快大约 500 倍。

```
class DemoProgram
{
    class Target
    {
        private int value;
    }

    static void Main(string[] args)
    {
        FieldInfo valueField = typeof(Target).GetFields(BindingFlags.NonPublic| BindingFlags.Instance).First();
        var getValue = CreateGetter<Target, int>(valueField);
        var setValue = CreateSetter<Target, int>(valueField);

        Target target = new Target();

        setValue(target, 42);
        Console.WriteLine(getValue(target));
    }

    static Func<S, T> CreateGetter<S, T>(FieldInfo field)
    {
        string methodName = field.ReflectedType.FullName + ".get_" + field.Name;
        DynamicMethod setterMethod = new DynamicMethod(methodName, typeof(T), new Type[1] { typeof(S) }, true);
        ILGenerator gen = setterMethod.GetILGenerator();
        if (field.IsStatic)
        {
            gen.Emit(OpCodes.Ldsfld, field);
        }
        else
        {
            gen.Emit(OpCodes.Ldarg_0);
            gen.Emit(OpCodes.Ldfld, field);
        }
        gen.Emit(OpCodes.Ret);
        return (Func<S, T>)setterMethod.CreateDelegate(typeof(Func<S, T>));
    }

    static Action<S, T> CreateSetter<S,T>(FieldInfo field)
    {
        string methodName = field.ReflectedType.FullName+".set_"+field.Name;
        DynamicMethod setterMethod = new DynamicMethod(methodName, null, new Type[2]{typeof(S),typeof(T)},true);
        ILGenerator gen = setterMethod.GetILGenerator();
        if (field.IsStatic)
        {
            gen.Emit(OpCodes.Ldarg_1);
            gen.Emit(OpCodes.Stsfld, field);
        }
        else
        {
            gen.Emit(OpCodes.Ldarg_0);
            gen.Emit(OpCodes.Ldarg_1);
            gen.Emit(OpCodes.Stfld, field);
        }
        gen.Emit(OpCodes.Ret);
        return (Action<S, T>)setterMethod.CreateDelegate(typeof(Action<S, T>));
    }
} 
```

请记住，结构是按值传递的。这意味着`Action<S, T>`如果它作为第一个参数按值传递，则不能用于更改结构的成员。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-07-12T01:02:39.597

[ **2019 年编辑：**由于这篇文章一直是我的最爱之一，令人苦乐参半的是，在我自己的项目中，我在这里展示的方法已被一种更新的、完全不同的、更时尚的技术完全取代，我[此答案](https://stackoverflow.com/a/56512720/147511)的详细信息]。

* * *

使用新的“<a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7#ref-locals-and-returns" rel="noreferrer">ref **C# 7.0**中的return” 功能可以使创建和使用运行时动态生成的 get/set 访问器的过程更加简单和语法透明。不必使用[DynamicMethod](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.emit.dynamicmethod?view=netframework-4.7)来发出单独的**getter**和**setter**函数来访问该字段，您现在可以拥有一个返回*托管指针*类型对该字段的引用的单一方法，本质上是一个单一的访问器，它（反过来）可以方便地、广告-hoc*得到*a̲n̲d̲*集*使用权。下面，我提供了一个辅助实用函数，它简化了为任何类中的任意（即私有）实例字段生成*ByRef getter 函数。*

      ➜***对于“只是代码”，请跳到下面的注释。***

作为一个运行示例，假设我们要访问一个私有实例字段`m_iPrivate`，该字段`int`在类中定义`OfInterestClass`：

```
public class OfInterestClass
{
    private int m_iPrivate;
}; 
```

接下来假设我们有一个静态字段“reference-getter”函数，它接受一个实例并使用新的**C# 7** “<a href="https://docs.microsoft.com/en-us***通过引用***`OfInterestClass`返回所需的字段值/dotnet/csharp/whats-new/csharp-7#ref-locals-and-returns" rel="noreferrer">ref return" 功能（下面，我将提供代码以在运行时通过[DynamicMethod](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.emit.dynamicmethod)生成此类函数）：

 ***```
public static ref int __refget_m_iPrivate(this OfInterestClass obj)
{
     /// ...
} 
```

这样一个函数（比如说“ref-getter”）是我们对私有字段进行完全读/写访问所需要的。在以下示例中，请特别注意调用*setter*的操作以及使用 (ie)`++`和运算符的演示，因为如果您不熟悉，`+=`将这些运算符直接应用于*方法调用可能看起来有点不寻常***C#7**。

```
void MyFunction(OfInterestClass oic)
{
    int the_value = oic.__refget_m_iPrivate();      // 'get'
    oic.__refget_m_iPrivate() = the_value + 100;    // 'set'

    /// or simply...
    oic.__refget_m_iPrivate() += 100;                // <-- yes, you can

    oic.__refget_m_iPrivate()++;                     // <-- this too, no problem

    ref int prv = ref oic.__refget_m_iPrivate();     // via "ref-local" in C#7
    prv++;
    foo(ref prv);                                    // all of these directly affect…
    prv = 999;                                       // …field m_iPrivate 'in-situ'
} 
```

重点是，这些示例中显示的每个操作都`m_iPrivate` [*在原地*](https://en.wikipedia.org/wiki/In_situ)（即*直接*在其包含的实例中`oic`）进行操作，以便*任何和所有*更改都立即在那里公开可见。重要的是要意识到这意味着`prv`尽管 是`int`-typed 和本地声明的，但它的行为不像典型的“本地”变量。这对于并发代码尤其重要；不仅*b̲e̲f̲o̲r̲e̲* `MyFunction`已退出可见更改，而且现在使用**C# 7**，调用者能够*保留***ref 返回**托管指针（作为ref [local](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/ref-returns#ref-locals)) 并因此在任意长的时间内继续修改目标*a̲f̲t̲e̲r̲wards*（尽管必须保持在重新获取堆栈帧的*下方*，即）。

当然，在这里和其他地方使用托管指针的一个主要和明显的优势是它继续保持有效（同样，在其堆栈帧的生命周期内），即使它本身是在[GC](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection)堆中`oic`分配的引用类型实例— 可能在垃圾收集期间四处移动。这是与本机指针的巨大差异。

如上所述，ref-getter 是一种`static` [扩展方法](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods)，可以在任何地方声明和/或使用。但是，如果您能够创建自己的派生类`OfInterestClass`（即，如果`OfInterestClass`不是[密封](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/sealed)的），则可以使它变得更好。在派生类中，您可以公开 C# 语法以使用基类的私有字段，就好像它是派生类的公共字段一样。为此，只需向您的类添加一个 C# 只读***ref 返回*属性**，该属性将静态 ref-getter 方法绑定到当前实例`this`：

```
public ref int m_iPrivate => ref __refget_m_iPrivate(this); 
```

在这里，创建了属性，`public`因此任何人都可以访问该字段（通过对派生类的引用）。我们基本上已经公开发布了基类的私有字段。现在，在派生类（或其他地方，视情况而定）中，您可以执行以下任何或所有操作：

```
int v = m_iPrivate;                             // get the value

m_iPrivate = 1234;                              // set the value

m_iPrivate++;                                   // increment it

ref int pi = ref m_iPrivate;                    // reference as C# 7 ref local

v = Interlocked.Exchange(ref m_iPrivate, 9999); // even do in-situ atomic operations on it! 
```

如您所见，因为*property*和前面的*method*一样，也有一个**引用**返回值，所以它的行为几乎与字段完全相同。

所以现在详细介绍。你如何创建我上面展示的静态**ref-getter**函数？使用`DynamicMethod`，这应该是微不足道的。例如，下面是传统（按值）静态 getter 函数的[IL代码：](https://www.ecma-international.org/publications/standards/Ecma-335.htm)

```
// static int get_iPrivate(OfInterestClass oic) => oic.m_iPrivate;
IL_0000: ldarg.0    
IL_0001: ldfld Int32 m_iPrivate/OfInterestClass
IL_0006: ret 
```

这是我们想要的 IL 代码（ref-return）：

```
// static ref int refget_iPrivate(OfInterestClass oic) => ref oic.m_iPrivate;
IL_0000: ldarg.0    
IL_0001: ldfld̲a Int32 m_iPrivate/OfInterestClass
IL_0006: ret 
```

与按值获取器的唯一区别是我们使用的是`ldflda`（加载字段地址）操作码而不是`ldfld`（加载字段）。所以如果你熟练使用`DynamicMethod`它应该没问题，对吧？

> ***错误的！***...
>     **不幸`DynamicMethod`的是，不允许*按引用*返回值！**

如果您尝试调用`DynamicMethod`指定`ByRef`类型作为返回值的构造函数...

```
var dm = new DynamicMethod(
        "",                                 // method name
        typeof(int).MakeByRefType(),        // by-ref return type   <-- ERROR
        new[] { typeof(OfInterestClass) },  // argument type(s)
        typeof(OfInterestClass),            // owner type
        true);                              // private access 
```

...函数抛出`NotSupportedException`以下消息：

> 返回类型包含一些无效类型（即 null、ByRef）

显然，这个函数没有得到 C#7 的备忘录和 ref-return。幸运的是，我找到了一个简单的解决方法，让它工作。如果您将非引用类型作为临时“虚拟”传递给构造函数，但随后立即在新创建的`DynamicMethod`实例上使用反射将其`m_returnType`私有字段更改为您实际想要的**ByRef**类型（*原文如此*） ，然后一切似乎都正常。

为了加快速度，我将切入已完成的通用方法，该方法通过为 type 的私有实例字段创建/返回静态 ref-getter 函数来自动化整个过程，该函数`U`具有提供的名称，并在 class 中定义`T`。

* * *

如果您***只想要完整的工作代码***，请从此处复制到末尾

* * *

首先，我们必须定义一个代表 ref-getter 的`Func<T,TResult>`委托，因为不能声明使用 ByRef 的委托。幸运的是，旧的`delegate`语法确实可以做到这一点（*唷！*）。

```
public delegate ref U RefGetter<T, U>(T obj); 
```

将委托以及以下静态函数放在一个集中的实用程序类中，在整个项目中都可以访问它们。这是最终的 ref-getter 创建函数，可用于为任何类中的所谓实例字段创建静态 ref-getter。

```
public static RefGetter<T, U> create_refgetter<T, U>(String s_field)
{
    const BindingFlags bf = BindingFlags.NonPublic |
                            BindingFlags.Instance |
                            BindingFlags.DeclaredOnly;

    var fi = typeof(T).GetField(s_field, bf);
    if (fi == null)
        throw new MissingFieldException(typeof(T).Name, s_field);

    var s_name = "__refget_" + typeof(T).Name + "_fi_" + fi.Name;

    // workaround for using ref-return with DynamicMethod:
    //   a.) initialize with dummy return value
    var dm = new DynamicMethod(s_name, typeof(U), new[] { typeof(T) }, typeof(T), true);

    //   b.) replace with desired 'ByRef' return value
    dm.GetType().GetField("m_returnType", bf).SetValue(dm, typeof(U).MakeByRefType());

    var il = dm.GetILGenerator();
    il.Emit(OpCodes.Ldarg_0);
    il.Emit(OpCodes.Ldflda, fi);
    il.Emit(OpCodes.Ret);

    return (RefGetter<T, U>)dm.CreateDelegate(typeof(RefGetter<T, U>));
} 
```

现在回到本文的开头，我们可以轻松地提供`__refget_m_iPrivate`启动一切的函数。我们将使用静态 ref-getter 创建函数在运行时创建函数体并将其存储在静态委托类型字段（具有相同的签名）中，而不是直接用 C# 编写的静态函数。在实例属性（如上所示，并在下面重复）或其他地方调用它的语法与编译器能够编写函数相同。

最后，要缓存动态创建的 ref-getter 委托，请将以下行放在`static`您选择的任何类中。替换`OfInterestClass`为基类的类型，替换`int`为私有字段的字段类型，并更改字符串参数以匹配私有字段的名称。如果您无法创建自己的派生自`OfInterestClass`（或不想）的类，那么您就完成了；只需创建此字段`public`，您就可以像调用函数一样调用它，传递任何`OfInterestClass`实例以获取引用，该引用可让您读取、写入或监视其`int`值`private`字段“ `m_iPrivate`。”

```
// Static delegate instance of ref-getter method, statically initialized.
// Requires an 'OfInterestClass' instance argument to be provided by caller.
static RefGetter<OfInterestClass, int> __refget_m_iPrivate = 
                                create_refgetter<OfInterestClass, int>("m_iPrivate"); 
```

可选地，如果您想使用更简洁或更自然的语法发布隐藏字段，您可以定义自己的（非静态）代理类，它*包含*一个实例，或者甚至更好（如果可能），*派生自*——字段隐藏类`OfInterestClass.`不要在类中部署之前全局显示的代码行，而是`static`将其放在代理类中，然后还添加以下行：

```
// optional: ref-getter as an instance property (no 'this' argument required)
public ref int m_iPrivate => ref __refget_m_iPrivate(this); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-20T17:16:50.150

字段访问不是通过方法（如 getter 和 setter）执行的——它是通过 IL 指令执行的——所以没有什么可以*分配*给委托的。您必须使用表达式路由来创建可以分配给委托的代码“块”（实际上是 IL）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-21T22:25:26.033

不，没有简单的方法可以创建委托来获取/设置字段。

您必须编写自己的代码来提供该功能。我会建议共享库中的两个函数来提供这个。

使用您的代码（在此示例中，我仅展示了 get-delegate 的创建）：

```
static public class FieldInfoExtensions
{
    static public Func<S, T> CreateGetFieldDelegate<S, T>(this FieldInfo fieldInfo)
    {
        var instExp = Expression.Parameter(typeof(S));
        var fieldExp = Expression.Field(instExp, fieldInfo);
        return Expression.Lambda<Func<S, T>>(fieldExp, instExp).Compile();
    }
} 
```

这使得从 FieldInfo 创建一个 get-delegate 变得很容易（假设该字段是 int 类型）：

```
Func<MyClass, int> getter = typeof(MyClass).GetField("MyField").CreateGetFieldDelegate<MyClass, int>(); 
```

或者，如果我们稍微更改您的代码：

```
static public class TypeExtensions
{
    static public Func<S, T> CreateGetFieldDelegate<S, T>(this Type type, string fieldName)
    {
        var instExp = Expression.Parameter(type);
        var fieldExp = Expression.Field(instExp, fieldName);
        return Expression.Lambda<Func<S, T>>(fieldExp, instExp).Compile();
    }
} 
```

这使它变得更加容易：

```
Func<MyClass, int> getter = typeof(MyClass).CreateGetFieldDelegate<MyClass, int>("MyField"); 
```

也可以使用 IL 创建这些委托，但该代码会更复杂，并且没有更高的性能（如果有的话）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T12:26:04.673

我不知道您是否会使用`Expression`，那么为什么要避免反射？大多数操作`Expression`依赖于反射。

`GetValue`and他们`SetValue`自己是字段的`get method`and `set method`，但它们不适用于任何特定的字段。

字段不像属性，它们是字段，没有理由为每个字段生成 get/set 方法。但是，类型可能会随着不同的字段而变化，因此`GetValue`并被`SetValue`定义为`parameter/return value`as `object`for variance。`GetValue`甚至是一个抽象方法，也就是说，对于覆盖它的每个类（仍然是反射），必须在相同的签名内。

如果您不*键入*它们，则应使用以下代码：

```
public static void SomeMethod(FieldInfo fieldInfo) {
    var Getter=(Func<object, object>)fieldInfo.GetValue;
    var Setter=(Action<object, object>)fieldInfo.SetValue;
} 
```

但如果你愿意，有一种受限制的方式：

```
public static void SomeMethod<S, T>(FieldInfo fieldInfo)
    where S: class
    where T: class {
    var Getter=(Func<S, object>)fieldInfo.GetValue;
    var Setter=(Action<S, T>)fieldInfo.SetValue;
} 
```

由于`Getter`仍然是`Func<S, object>`，您可能想看看：

[C# 中的协变和逆变，第三部分：](http://blogs.msdn.com/b/ericlippert/archive/2007/10/19/covariance-and-contravariance-in-c-part-three-member-group-conversion-variance.aspx) Lippert 先生博客上的方法组转换方差。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-06T13:48:16.380

`ref return`**至少在 v4.0.30319 上**`DynamicMethod`似乎没有限制。

 **[Glenn Slayden](https://stackoverflow.com/a/45046664/4932128)使用[来自微软文档](https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/how-to-define-and-execute-dynamic-methods#to-define-and-execute-a-dynamic-method)的信息修改了这个答案：

```
using System;
using System.Reflection;
using System.Reflection.Emit;

namespace ConsoleApp {
    public class MyClass {
        private int privateInt = 6;
    }

    internal static class Program {
        private delegate ref TReturn OneParameter<TReturn, in TParameter0>(TParameter0 p0);

        private static void Main() {
            var myClass = new MyClass();

            var method = new DynamicMethod(
                "methodName",
                typeof(int).MakeByRefType(), // <- MakeByRefType() here
                new[] {typeof(MyClass)}, 
                typeof(MyClass), 
                true); // skip visibility

            const BindingFlags bindings = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;

            var il = method.GetILGenerator();
            il.Emit(OpCodes.Ldarg_0);
            il.Emit(OpCodes.Ldflda, typeof(MyClass).GetField("privateInt", bindings));
            il.Emit(OpCodes.Ret);

            var getPrivateInt = (OneParameter<int, MyClass>) method.CreateDelegate(typeof(OneParameter<int, MyClass>));

            Console.WriteLine(typeof(string).Assembly.ImageRuntimeVersion);
            Console.WriteLine(getPrivateInt(myClass));
        }
    }
} 
```

输出：

```
6 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-02T15:13:49.387

只是为了添加更多的方法：D

```
 public static Func<T, TResult> CreatePropertyOrFieldReaderDelegate<T, TResult>(string field)
        {
            var input = Expression.Parameter(typeof(T));
            return Expression.Lambda<Func<T, TResult>>(Expression.PropertyOrField(input, field), input).Compile();
        } 
```

这将创建一个返回值的方法..

测试用例

```
class Testing {
  public int Data = 2;
  public string PropData { get; } = "Default";
 }

  [Fact]
  public void CreateSingleFieldReader()
        {
            var a = ReflectionHelper.CreatePropertyOrFieldReaderDelegate<Testing, int>("Data");
            Assert.Equal(2, a(new Testing()));

        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-16T18:18:38.307

这是在使用对象时创建委托的另一种选择（不知道字段的特定类型）。虽然如果 field 是一个结构（因为装箱），它会更慢。

```
public static class ReflectionUtility
{
    public static Func<object, object> CompileGetter(this FieldInfo field)
    {
        string methodName = field.ReflectedType.FullName + ".get_" + field.Name;
        DynamicMethod setterMethod = new DynamicMethod(methodName, typeof(object), new[] { typeof(object) }, true);
        ILGenerator gen = setterMethod.GetILGenerator();
        if (field.IsStatic)
        {
            gen.Emit(OpCodes.Ldsfld, field);
            gen.Emit(field.FieldType.IsClass ? OpCodes.Castclass : OpCodes.Box, field.FieldType);
        }
        else
        {
            gen.Emit(OpCodes.Ldarg_0);
            gen.Emit(OpCodes.Castclass, field.DeclaringType);
            gen.Emit(OpCodes.Ldfld, field);
            gen.Emit(field.FieldType.IsClass ? OpCodes.Castclass : OpCodes.Box, field.FieldType);
        }
        gen.Emit(OpCodes.Ret);
        return (Func<object, object>)setterMethod.CreateDelegate(typeof(Func<object, object>));
    }

    public static Action<object, object> CompileSetter(this FieldInfo field)
    {
        string methodName = field.ReflectedType.FullName + ".set_" + field.Name;
        DynamicMethod setterMethod = new DynamicMethod(methodName, null, new[] { typeof(object), typeof(object) }, true);
        ILGenerator gen = setterMethod.GetILGenerator();
        if (field.IsStatic)
        {
            gen.Emit(OpCodes.Ldarg_1);
            gen.Emit(field.FieldType.IsClass ? OpCodes.Castclass : OpCodes.Unbox_Any, field.FieldType);
            gen.Emit(OpCodes.Stsfld, field);
        }
        else
        {
            gen.Emit(OpCodes.Ldarg_0);
            gen.Emit(OpCodes.Castclass, field.DeclaringType);
            gen.Emit(OpCodes.Ldarg_1);
            gen.Emit(field.FieldType.IsClass ? OpCodes.Castclass : OpCodes.Unbox_Any, field.FieldType);
            gen.Emit(OpCodes.Stfld, field);
        }
        gen.Emit(OpCodes.Ret);
        return (Action<object, object>)setterMethod.CreateDelegate(typeof(Action<object, object>));
    }
} 
```*****

# javascript - innerHTML 添加文本但不添加 html 标签

> ID：16073093
> 
> 赞同：4
> 
> 时间：2013-04-18T01:36:14.293
> 
> 标签：javascript, html, windows-8, innerhtml

首先对这个初学者问题感到抱歉，但我最近才学习 JavaScript，现在正在学习开发 Windows 8 应用程序。这是有问题的代码：

```
 var numbers = [1, 2, 3, 4, 5];
        id('numberList').innerHTML = '<ul>';
        for (var x in numbers) {
            id('numberList').innerHTML += '<li>' + x + '</li>';
        }
        id('numberList').innerHTML = '</ul>'; 
```

我在我的 JS 文件中的“就绪”函数（适用于任何 Windows 8 开发人员）中有这个，并且“numbersList”指的是（HTML 文件的）正文中的部分标记。当我运行应用程序时，该列表根本不显示。但是，当我只是尝试添加文本而不是像这样的列表时

```
 id('numberList').innerHTML = 'hello'; 
```

文字确实出现了。我尝试插入 html 元素的方式可能有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:38:11.887

你不能像那样添加非法的 HTML。带有 no的`<ul>`标签`</ul>`是非法的。在字符串变量中构建整个 HTML 字符串，然后添加一段合法的 HTML 或构建单独的 DOM 元素，将内容放入其中并将它们添加到 DOM。

此外，您不会迭代数组，`for (var x in numbers)`因为它会迭代对象的属性，而不仅仅是数组元素，虽然它在某些情况下会起作用，但通常是不应该使用的不好的做法。

您可以修复这些错误并构建一个 HTML 字符串，然后在末尾添加一次，如下所示：

```
 var numbers = [1, 2, 3, 4, 5];
    var str = '<ul>';
    for (var x = 0; x < numbers.length; x++) {
        str += '<li>' + numbers[x] + '</li>';
    }
    str += '</ul>';
    id('numberList').innerHTML = str; 
```

为了完整起见，您还可以构建单独的 DOM 元素：

```
 var numbers = [1, 2, 3, 4, 5];
    var ul = document.createElement("ul"), li, tx;
    for (var x = 0; x < numbers.length; x++) {
        li = document.createElement("li");
        tx = document.createTextNode(numbers[x]);
        li.appendChild(tx);
        ul.appendChild(li);
    }
    var parent = id('numberList');
    parent.innerHTML = "";
    parent.appendChild(ul); 
```

您可能还需要注意，您最初编写的代码不是检索数组元素`numbers[x]`，而是使用数组索引`x`（恰好与内容相同，因此您不会注意到示例代码中的差异）。由于这可能不是您想要的，您可能也想解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T01:39:15.273

你永远不应该使用`+=`with `innerHTML`。相反，构建字符串，然后一次将其全部放入，否则引擎将尝试更正您不完整的 HTML。

```
var numbers = [1,2,3,4,5], str;
str = "<ul>";
for( var x in numbers) str += "<li>"+x+"</li>";
str += "</ul>";
id("numberList").innerHTML = str; 
```

话虽如此，“更好”的方法如下：

```
var numbers = [1,2,3,4,5], ul = document.createElement('ul');
for( var x in numbers) ul.appendChild(document.createElement('li')).appendChild(document.createTextNode(x));
var nl = id("numberList");
while(nl.firstChild) nl.removeChild(nl.firstChild);
nl.appendChild(ul); 
```

# c# - .base.cs 文件扩展名到底是什么

> ID：16073096
> 
> 赞同：1
> 
> 时间：2013-04-18T01:36:23.510
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2008

.base.cs 文件扩展名到底是什么？它与常规的 .cs 类文件有何不同？以及它的使用方式有何不同？我使用了一个代码生成工具，这就是它生成的内容，并且项目构建了，但我不确定它们是用 .base.cs 制作的，而不仅仅是 .cs - 这些类都是部分类，不确定是否这是一个线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:39:38.967

它只是代码生成工具使用的一个扩展名，用于确保生成的文件的名称不会与您项目中的任何现有文件冲突。由于生成的类是`partial`您可以创建自己的具有相同名称（减去`.base`）的代码文件来扩展它们。例如：

```
MyClass.base.cs   // classes created by the code generator
MyClass.cs        // custom extensions to the generated classes 
```

它将像任何其他代码文件一样编译。

# javascript - 存在赋值语句时在 javascript 文件中提供命名空间

> ID：16073113
> 
> 赞同：0
> 
> 时间：2013-04-18T01:38:49.213
> 
> 标签：javascript, jquery, html

我有一段 javascript 代码，我想为其添加命名空间。在此代码中，在函数之外发生了赋值操作。有人可以告诉我如何将它放在命名空间中吗？代码如下。

```
var mynameSpace={
canvasPanel:{},
stage:{},
someShape:{},

drawLineGraph:function(dataList,color,baseY)
{
//Create a shape
this.dataList=dataList;
this.index=0;
this.currentDay=1;
},

myNameSpace.drawLineGraph.prototype = new createjs.Shape(); //Getting the problem here
myNameSpace.drawLineGraph.prototype.constructor = drawLineGraph; //Getting the problem here**
,
drawLegend:function(){
}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:50:38.093

您可以将函数和后续分配包装在另一个函数中，然后立即调用它，如下所示：

```
drawLineGraph: (function() {
   var f = function(dataList, color, baseY {
       // Create a shape
          ... function code ...
   };
   f.prototype = new createjs.Shape();
     ... more assignments ...

   return f; // this will be assigned to drawLineGraph
})(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:46:10.140

只需替换`drawLineGraph`为`this.drawLineGraph`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:54:17.860

看起来您正在对象文字定义中进行原型分配。因此，当您尝试修改它的原型时，mynameSpace 的 drawLineGraph 属性不存在。将 drawLineGraph 原型属性分配移到对象文字下方。

```
var mynameSpace={
    canvasPanel:{},
    stage:{},
    someShape:{},

    drawLineGraph:function(dataList,color,baseY)
        {
        //Create a shape
        this.dataList=dataList;
        this.index=0;
        this.currentDay=1;
    },

    drawLegend:function(){
    }

};
myNameSpace.drawLineGraph.prototype = new createjs.Shape(); //No longer a problem
myNameSpace.drawLineGraph.prototype.constructor = drawLineGraph; //No longer a problem 
```

# sql - 当新记录发生时保存并在数据发生编辑时更新

> ID：16073115
> 
> 赞同：0
> 
> 时间：2013-04-18T01:39:02.537
> 
> 标签：sql, vb.net, sql-update

我有保存按钮和更新按钮的代码，但是有没有办法可以将这两个命令组合在一个按钮中？

例如，当我单击“保存/更新按钮”时，如果它是新记录，它将保存在数据库中，如果系统发现数据库中已有记录并保存已编辑的数据，它将更新

保存按钮代码

```
Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"
    Try
        Dim myCommand As New SqlCommand
        sqlconn.Open()
        myCommand = New SqlCommand("INSERT INTO tblOfficeEquipmentProfile(OE_Category,OE_SubCategory,OE_ID,OE_Name,OE_User,OE_Brand,OE_Model,OE_Specs,OE_SerialNo,OE_PropertyNo,OE_MacAddress,OE_Static_IP,OE_Vendor,OE_PurchaseDate,OE_WarrantyInclusiveYear,OE_WarrantyStatus,OE_Status,OE_Dept_Code,OE_Location_Code,OE_Remarks) VALUES('" & cmbCategory.Text & "','" & cmbSubCategory.Text & "','" & txtOEID.Text & "','" & txtName.Text & "','" & txtUser.Text & "','" & cmbBrand.Text & "','" & cmbModel.Text & "','" & txtSpecs.Text & "','" & txtSerialNo.Text & "','" & txtPropertyNo.Text & "','" & txtMacAddress.Text & "','" & txtStaticIp.Text & "','" & txtVendor.Text & "','" & txtPurchaseDate.Text & "','" & txtWarrantyInclusiveYear.Text & "', '" & txtWarrantyStatus.Text & "','" & txtStatus.Text & "','" & cmbDeptCode.Text & "','" & cmbLocationCode.Text & "','" & txtRemarks.Text & "')", sqlconn)
        myCommand.ExecuteNonQuery()
        MessageBox.Show("Office Equipment Profile Successfully Added")
        sqlconn.Close()
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

更新按钮的代码（注意：但我的更新按钮仍然有一些错误仍在尝试修复）

```
Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim myCommand As New SqlCommand

    Try

        'update command
        sqlconn.Open()

        myCommand = New SqlCommand("UPDATE tblOfficeEquipmentProfile SET OE_Category = '" & cmbCategory.Text & "',OE_SubCategory = '" & cmbSubCategory.Text & "', OE_Name = '" & txtName.Text & "', OE_User = '" & txtUser.Text & "', OE_Brand = '" & cmbBrand.Text & "', OE_Model = '" & cmbModel.Text & "', OE_Specs = '" & txtSpecs.Text & "', OE_SerialNo = '" & txtSerialNo.Text & "', OE_PropertyNo = '" & txtPropertyNo.Text & "', OE_MacAddress = '" & txtMacAddress.Text & "', OE_Static_IP = '" & txtStaticIp.Text & "', OE_Vendor = '" & txtVendor.Text & "', OE_PurchaseDate = '" & txtPurchaseDate.Text & "', OE_WarrantyInclusiveYear = '" & txtWarrantyInclusiveYear.Text & "', OE_WarrantyStatus = '" & txtWarrantyStatus.Text & "', OE_Status = '" & txtStatus.Text & "', OE_Dept_Code = '" & cmbDeptCode.Text & "', OE_Location_Code = '" & cmbLocationCode.Text & "', OE_Remarks ='" & txtRemarks.Text & "' WHERE OE_ID ='" & txtOEID.Text & "'", sqlconn)
        Dim iCnt As Integer = myCommand.ExecuteNonQuery()
        MessageBox.Show("Office Equipment Profile Successfully Updated  " & iCnt & "  Records")
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:16:27.733

编写一个存储过程来检查记录是否存在。如果是，请更新它。否则，插入它。

从您的 vb.net 代码中调用此存储过程。此外，更改您的 .net 代码，以便将查询参​​数发送到您的存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:18:07.800

您的问题是关于 SO 的一个常年最喜欢的问题：如何更新现有行或插入它？答案总是错误的。

执行此操作的标准 SQL 没有`if`语句。标准的方法是插入不存在约束的行，然后更新它：

```
insert into T values (...)
where not exists (
  select 1 from T as t 
  where T.key = t.key
) 
```

可选择检查行数，仅在为 0 时更新

```
update T set ... 
where T.key = value 
```

如果您不从 中检查行数`insert`，则`update`是多余的。

最好将所有这些都放在一个存储过程中，但即使不这样做，您也应该能够将两个语句放在一个准备好的语句中，并将其附加到 GUI 中的一个按钮上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:51:44.513

您可以创建一个包含状态的枚举：

```
 Enum DataState
      Editing
      Adding
      None
 End Enum 
```

然后设置一个类级变量：

```
 private mDataState as DataState 
```

然后根据您是添加还是编辑记录进行设置，然后在 Save_Click 子例程中使用 If-Then。

# c# - 如何添加用户 ID 在 mvc4 中验证 cookie

> ID：16073119
> 
> 赞同：2
> 
> 时间：2013-04-18T01:39:26.723
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

如何添加用户 ID TI AUTHENTICATED A cookie

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;
using System.Security.Cryptography;
using System.Text;

namespace project.Controllers
{
    public class LoginController : Controller
    {
        // GET: /Login/
        private DataContext db = new DataContext();

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult index(Loginmodel model)
        {
            if (ModelState.IsValid)
            {
                String username = model.Username;
                User Login = db.Users.Where(m => m.Name == username).First();
                String pass = Convert.ToBase64String(new MD5CryptoServiceProvider().ComputeHash(new UTF8Encoding().GetBytes(model.Password)));

                if (Login != null && pass == Login.Password)
                {
                    FormsAuthentication.SetAuthCookie(model.Username, false);
                    return RedirectToAction("index", "Project");
                }

                ModelState.AddModelError("", "Invalid username or password");
            }

           return View();
        }            
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:43:48.437

这是一篇非常好的代码项目文章，它非常详细地解释了完成您正在尝试做的事情的不同方法。[http://www.codeproject.com/Articles/36836/Forms-Authentication-and-Role-based-Authorization](http://www.codeproject.com/Articles/36836/Forms-Authentication-and-Role-based-Authorization)

```
if (!FormsAuthentication.CookiesSupported)
{
    //If the authentication ticket is specified not to use cookie, set it in the Uri
    FormsAuthentication.SetAuthCookie(encrypetedTicket, createPersistentCookie);
}
else
{
    //If the authentication ticket is specified to use a cookie, wrap it within a cookie.
    //The default cookie name is .ASPXAUTH if not specified 
    //in the <forms> element in web.config
    HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encrypetedTicket);

    //Set the cookie's expiration time to the tickets expiration time
    if(ticket.IsPersistent)
        authCookie.Expires =ticket.Expiration ;

    ////Set the cookie in the Response
    HttpContext.Current.Response.Cookies.Add(authCookie);
} 
```

# php - PHP常量封装字符串php错误

> ID：16073123
> 
> 赞同：-3
> 
> 时间：2013-04-18T01:39:55.183
> 
> 标签：php

这是我得到的错误。“解析错误：语法错误，第 188 行出现意外的 T_CONSTANT_ENCAPSED_STRING”我想要做的是连接到数据库并将数据插入表中，但我无法弄清楚这个错误。

```
$tableName = "customer";
$nullStr = "NULL";

$SQLstring = "INSERT INTO $tableName VALUES
            ('".$nullstr."','".$fname."', '".$lname."','".$address."','".$state."','".$zip."',          '".$phone"','".$email"')";
$result = $mysqli->query($SQLstring); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:45:42.873

您`.`在几个地方缺少字符串连接运算符。

代替

```
$SQLstring = "INSERT INTO $tableName VALUES
        ('".$nullstr."','".$fname."', ".$lname."','".$address."','".$state."','".$zip."','".$phone"','".$email"')"; 
```

和

```
$SQLstring = "INSERT INTO $tableName VALUES
        ('".$nullStr."','".$fname."', '".$lname."','".$address."','".$state."','".$zip."','".$phone."','".$email."')"; 
```

顺便说一句，变量名区分大小写。您定义`$nullStr`然后尝试使用`$nullstr`. 我在上面的代码中修复了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T01:49:18.747

请改用带有参数绑定的准备好的语句。它不仅使这更清洁，而且还避免了 SQL 注入。

```
$query = "INSERT INTO $tableName VALUES (NULL, ?, ?, ?, ?, ?, ?, ?)";
$stmt = $mysqli->prepare($query);
$stmt->bind_param('sssssss', $fname, $lname, $address, $state,
    $zip, $phone, $email);
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T01:46:33.753

你错过了一些时期。尝试这个...

```
$SQLstring = "INSERT INTO $tableName VALUES ('".$nullstr."','".$fname."','".$lname."','".$address."','".$state."','".$zip."','".$phone."','".$email."')"; 
```

# input - 你如何使 Scite 具有交互性？

> ID：16073127
> 
> 赞同：0
> 
> 时间：2013-04-18T01:40:34.410
> 
> 标签：input, ide, command-prompt, scite

一旦我用 Scite 编译，我的命令提示符就不会出现。如何设置它以便我可以使用 Scite 从我的程序中接受命令提示符的输入和输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T04:41:29.293

在 scite 属性文件中编辑如下：

改变

```
 command.go.*.c=$(FileName) 
```

至

```
command.go.*.c=start $(FileName) 
```

按 go 在新的 cmd 窗口中打开 tatget 文件，现在可以交互 现在您可以输入

如果您使用不同的语言，请将 ***.c**替换为对应的语言 ，并将**start**放在命令之前。

# ruby-on-rails - 通过 has_many 将新对象与现有对象相关联

> ID：16073129
> 
> 赞同：0
> 
> 时间：2013-04-18T01:40:35.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有两个类用户和项目。一个用户可以拥有多个项目，一个项目可以由多个用户拥有。但是，一个项目必须至少有一个用户，而一个用户不一定必须有一个项目。

这是我目前拥有的：

```
class Project < ActiveRecord::Base
    attr_accessible :prj_id, :name
    has_many :ownerships, foreign_key: "project_id", dependent: :destroy
    has_many :users, through: :ownerships
end

class User < ActiveRecord::Base
    attr_accessible :first_name, :last_name, :email, :password, :password_confirmation

    has_many :ownerships, foreign_key: "user_id", dependent: :destroy
    has_many :projects, through: :ownerships
    validates :first_name, presence: true, length: { maximum: 25 }
    validates :last_name, presence: true, length: { maximum: 25 }
    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
    validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
        uniqueness: { case_sensitive: false }
    validates :password, presence: true, length: { minimum: 6 }
    validates :password_confirmation, presence: true
end

class Ownership < ActiveRecord::Base
    attr_accessible :project_id

    belongs_to :user, class_name: "User"
    belongs_to :project, class_name: "Project"

    validates :user_id, presence: true
    validates :project_id, presence: true
end 
```

因此，在我们创建项目之前，用户必须首先存在。我目前遇到的问题是当我尝试创建一个新项目并将用户附加到新项目时，它不允许我保存，因为用户已经存在于 User 表中。更具体地说，在 rails 控制台中：

```
>> prj = Project.new(prj_id: 'hello', name: 'hello')
>> usr = User.find_by_id(1)
>> prj.users<<usr
>> prj.save 
```

prj.save 行未能给出此消息：

```
(0.1ms)  SAVEPOINT active_record_1
User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE (LOWER("users"."email") = LOWER('example@example.com') AND "users"."id" != 1) LIMIT 1
(0.1ms)  ROLLBACK TO SAVEPOINT active_record_1
=> false 
```

有没有办法将新项目与现有用户关联，在项目表和所有权表中创建一个新条目，同时检查用户是否存在于用户表中（而不是尝试创建新用户）？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:11:11.653

尝试将您对`ownership`课程的验证更改为

```
validates :user, presence: true
validates :project, presence: true 
```

不确定验证实际关联 ( `project`) 与 id ( `project_id`) 的区别是否会有所不同，但值得尝试。也就是说，如果您是从项目端创建关联（并且项目必须始终有一个用户，而不是其他方式），那么根据您的业务规则，您*实际上*只需要验证的用户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:24:18.933

您的项目的*所有权*记录是无效的，因为它需要存在一个`project_id`，这是`nil`一个新项目。您需要先创建项目或更改`Ownership`模型中的验证。

您可以通过检查所涉及模型的错误对象来看到这一点：

```
> prj.errors.full_messages
=> ["Ownerships is invalid"]
> prj.ownerships.first.errors.full_messages
=> ["Project can't be blank"] 
```

# ios - 使用 NSNumberFormatter 将 9999999 格式化为 9,999,999（每三位数后的逗号）

> ID：16073135
> 
> 赞同：1
> 
> 时间：2013-04-18T01:41:10.367
> 
> 标签：ios, nsnumberformatter

类似于[逗号分隔的千 NSString stringWithFormat](https://stackoverflow.com/questions/1853305/comma-separated-thousand-nsstring-stringwithformat)但具有特定用例。

如何在每三个数字后插入一个逗号 (,)？

一些案例：

*   9999999 → 9,999,999
*   1234 → 1,234
*   3432423455435435 → 3,432,423,455,435,435

无论语言环境或任何其他情况如何，结果都是预期的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:56:45.980

您正在寻找一个[`NSNumberFormatter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html). 最简单的使用方法是这样的：

```
NSString *formatted = [NSNumberFormatter localizedStringFromNumber:@(1234) numberStyle:NSNumberFormatterDecimalStyle];
NSLog(@"%@", formatted); // probably logs "1,234", depending on your locale. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:16:05.210

我需要的不是关心用户语言环境的东西，而且这样做更容易做一些字符串杂耍。如果有人在乎，我可以挖掘该代码...

但是，如果您确实关心语言环境，请选择 Dave DeLong 的另一个答案。但是从技术上讲，它并没有回答这个问题。

# c - 如何在linux中通过C程序打开新终端

> ID：16073136
> 
> 赞同：5
> 
> 时间：2013-04-18T01:41:13.720
> 
> 标签：c, linux, unix, gnome-terminal

我编写了有很多连接的客户端-服务器代码，假设每个节点代表同一台机器上的不同进程。为此，我显然使用了 fork()。

但现在的问题是所有结果都显示在同一个终端上。我想知道是否有任何方法可以在每个`fork()`或进程创建后打开新终端并在特定终端上显示该进程的所有结果。

PS：我已经尝试过`system("gnome-terminal")` ，但它只是打开了新终端，但所有结果只在同一个终端上再次显示。所有新终端都只是打开并保持空白，没有任何结果。

我也浏览了这个链接[How to invoke another terminal for output programmatically in C in Linux](https://stackoverflow.com/questions/3445645/how-to-invoke-another-terminal-for-output-programmatically-in-c-in-linux)但我不想用参数或其他东西运行我的程序。它应该就像`./test`

这是我的代码：-

```
for(int i=0;i<node-1;i++)
  {
    n_number++;
    usleep(5000);
    child_pid[i]=fork();
    if(!child_pid[i])
    {
      system("gnome-terminal");
      file_scan();
      connection();          
      exit(0);
    }     
    if(child_pid[i]<0)
      printf("Error Process %d cannot be created",i);
  }
  for(int i=0;i<node-1;i++)
    wait(&status); 
```

所以基本上我想要的是每个进程应该有新的终端只显示那个进程信息或结果。

我到底想要什么：

*   在 fork() 之后，我有一些与进程 1 相关的数据，然后我希望将其输出到一个终端
*   每个过程也是如此。因此，如果我有 3 个进程，则必须有 3 个终端，并且每个终端必须只显示与进程相关的数据。

我知道使用 IPC（进程间通信）是可行的，但还有其他方法吗？我的意思是只有2-3个命令左右？因为我不想在这部分编码上投入太多。

提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T07:08:56.547

也许你想要这样的东西。该程序使用 unix98 伪终端 (PTS)，它是主从之间的双向通道。因此，对于您所做的每个分叉，您都需要通过在主端调用三元组 posix_openpt、grantpt、unlockpt 和在从端调用 ptsname 来创建一个新的 PTS。不要忘记更正每一侧的初始文件描述符（stdin、stdout 和 sdterr）。

请注意，这只是一个证明概念的程序，所以我没有做任何形式的错误检查。

```
#define _XOPEN_SOURCE 600 
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <libgen.h>
#include <string.h>
#include <fcntl.h>

int main() {
  pid_t i;
  char buf[10];
  int fds, fdm, status;

  fdm = posix_openpt(O_RDWR);
  grantpt(fdm);
  unlockpt(fdm);

  close(0);
  close(1);
  close(2);

  i = fork();
  if ( i != 0 ) { // father
    dup(fdm);
    dup(fdm);
    dup(fdm);
    printf("Where do I pop up?\n");
    sleep(2);
    printf("Where do I pop up - 2?\n");
    waitpid(i, &status, 0);
  } else {  // child
    fds = open(ptsname(fdm), O_RDWR);
    dup(fds);
    dup(fds);
    dup(fds);
    strcpy(buf, ptsname(fdm));
    sprintf(buf, "xterm -S%c/2", basename(buf));
    system(buf);
    exit(0);
  }
} 
```

# eclipse - java和eclipse中基于REST的网络聊天

> ID：16073140
> 
> 赞同：1
> 
> 时间：2013-04-18T01:41:34.253
> 
> 标签：eclipse, rest, jakarta-ee, acceptverbs

我想使用 Eclipse 在 Java 中创建一个基于 REST 的聊天应用程序，但我不知道如何开始。我如何处理资源、动词和 HEATOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:28:33.750

看看这个[链接](http://jersey.java.net/)，或者这个[链接](http://restlet.org)，或者这个[链接](http://www.jboss.org/resteasy/)。我个人会推荐泽西岛。restelt 非常强大，但可能相当复杂。RESTeasy 比 jersey 有更多的功能，但是在 JBoss 之外进行配置也很痛苦，而且他们的社区没有那么“活跃”。我会推荐 Jersey，他们的启动教程很容易上手。

你也可以看看这[本书](http://shop.oreilly.com/product/9780596521134.do)，还有这[本书](http://shop.oreilly.com/product/9780596158057.do)。抱歉，我无法提供任何硬性答案，因为我不知道您在该主题上的专业水平。希望这可以帮助。

# php - URL 重写和 robots.txt

> ID：16073142
> 
> 赞同：0
> 
> 时间：2013-04-18T01:41:38.967
> 
> 标签：php, .htaccess, url, seo

我已经使网址 SEO 友好，即

```
http://mydomain.com/topic/title-of-page 
```

之前，上述页面的 url 是

```
http://mydomain.com/search?id=6567889 
```

现在 Google 仍在搜索结果中显示第二个 URL。我的问题是，如果我不允许`/search`进入`robots.txt`，Google 会完全停止抓取该页面还是仍会抓取`mydomain.com/topic/title-of-page`新的 URL？

非常感谢你的帮助。抱歉 URL 中的空格，因为 SO 不允许我发布它们

塞布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:59:18.937

你会想马上解决这个问题。在 SEO 方面，网站上的重复内容将会出现问题。

要从您的网站减少一半的搜索引擎流量，请将其添加到您的 robots.txt 文件中：

```
User-agent: *
Disallow: /search.php 
```

这样，任何搜索引擎都不会挖掘旧链接。他们可能仍会为他们的搜索结果缓存它。话虽如此，您需要使用 301 重定向来处理他们提供的每个页面，这样您就不会受到惩罚。这将告诉他们更新他们的缓存。

此外，您需要添加一个 sitemap.xml 文件，其中包含服务器上所有正确 URL 的优先级顺序。

假设您将新路径存储在数据库中，您需要对`search.php`. 这样您就可以保留您的 SEO 网址。[301 是永久重定向。](http://en.wikipedia.org/wiki/URL_redirection)

```
if(preg_match('!^/search!',$_SERVER['REQUEST_URI'])){
  $tempID = $_GET['id'];
  $tempID = mysqli_real_escape_string($tempID);

  $query = "select count(*) from table where id=$tempID";

  $count = mysqli_result(mysqli_query($db_link,$query),0);

if($count==1){

 $query2 = "select correctPath  from table where id=$tempID";

 $correctPath = mysqli_result(mysqli_query($db_link,$query2),0);
   header( "HTTP/1.1 301 Moved Permanently" );
   header( "Location: $correctPath" );
   exit();
  } else {
  //non-existent ID
   header( "HTTP/1.1 301 Moved Permanently" );
   header( "Location: /" );
   exit();
  } 
} 
```

否则，您可以将第二个查询替换为您用于构建路径的函数。

您可以像这样为每个条目向 .htaccess 文件中添加一些内容，但这不是未来的证明，并且列表越大，处理的时间就越长（更多的服务器开销）。

```
RewriteEngine On
RewriteRule ^search\.php\?id=1  /page1_new_path/ [L,R=301]
RewriteRule ^search\.php\?id=2  /page2_new_path/ [L,R=301] 
```

# java - 如何阻止 ProGuard 从类中剥离 Serializable 接口

> ID：16073144
> 
> 赞同：16
> 
> 时间：2013-04-18T01:41:59.007
> 
> 标签：java, android, proguard, serializable

是否有明确的方法来阻止 ProGuard 更改类以实现接口？

我有一个实现的类`java.io.Serializable`，我们称之为`com.my.package.name.Foo`。我发现通过 ProGuard 运行后，它不再实现`Serializable`. 我`null`从`Serializable`to 转换后得到`Foo`，`false`如果我用`instanceof Serializable`. 我确保将 ProGuard 设置为忽略此类：

```
-keep class com.my.package.name.Foo 
```

我也试过：

```
-keep class com.my.package.name.Foo { *; } 
```

我也通过这样做尝试了整个包：

```
-keep class com.my.package.name.** { *; } 
```

或者：

```
-keep class com.my.package.** { *; } 
```

也只是为了保留所有`Serializable`课程：

```
-keep class * implements java.io.Serializable { *; } 
```

但无济于事。我在同级包中有另一个类（大致：）`com.my.package.name2.Bar`，它也实现`Serializable`和​​使用类似但没有问题。

我不确定它是否相关，但我将它包装在一个罐子中以供 Android 使用。使用这些类的代码包括将它们放在`Bundle`s 中，这就是我需要`Serializable`. 我认为 ProGuard 可能以某种方式认为它`Foo`从未用作 a `Serializable`，但考虑到我将它作为参数传递给`Bundle.putSerializable(String, Serializable)`并且我做了一个隐式转换，这似乎不太可能：`Serializable serializable = foo;`。事实上，当我调试时，我可以看到`Foo`get 放入了`Bundle`，我可以检查`Bundle`并查看那里的实例`Foo`，但是在检索它时，强制转换失败。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-05-29T14:49:18.917

我使用下面的配置解决了同样的问题。

```
-keepnames class * implements java.io.Serializable
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    !static !transient <fields>;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

官方文档 [http://proguard.sourceforge.net/manual/examples.html#serializable](http://proguard.sourceforge.net/manual/examples.html#serializable)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T22:42:48.680

ProGuard 永远不会从处理的代码中的类（如 Foo）中剥离库中定义的接口（如 Serializable）。库代码可能会转换为这些接口，因此无法删除它们。

> 从 Serializable 转换为 Foo 后我得到 null

这意味着实例必须为 null 才能开始。如果您得到 ClassCastException，您的分析将是正确的。您可以检查 Foo 是否仍然实现 Serializable with `javap`。问题可能出在其他地方。有关序列化的提示，您可以查看 ProGuard 手册 > 示例 >[处理可序列化类](http://proguard.sourceforge.net/manual/examples.html#serializable)。

**更新：**

在这种情况下，它原来是一个配置问题。ProGuard 只能处理类文件，如果它知道所有关于它们的层次结构（就像编译器一样）。您确实必须指定运行时类：

```
-libraryjars <java.home>/lib/rt.jar 
```

或安卓：

```
-libraryjars /usr/local/android-sdk/platforms/android-17/android.jar 
```

Android Ant/Eclipse 构建会自动为您指定所有必要的 -injars/-outjars/-libraryjars 选项，但在自定义构建过程中，您必须自己指定它们。参照。ProGuard 手册 > 示例 >[一个完整的 Android 应用程序](http://proguard.sourceforge.net/manual/examples.html#androidapplication)。

请注意，选项 -dontwarn 使警告消失，但不是问题。仅在确实需要时才使用它。

# python - 通过 UDP 将数据从 Simulink 读入 Python

> ID：16073146
> 
> 赞同：0
> 
> 时间：2013-04-18T01:42:13.910
> 
> 标签：python, udp, simulink

我想将数据从 Simulink 模型（实时运行）发送到 Python 脚本（也实时运行。我正在使用 Simulink 的内置“UDP Send”块，它可以工作，但我不知道如何解码我得到的数据。这就是我的python脚本的样子：

```
import sys, struct
from socket import *

SIZE = 1024      # packet size

hostName = gethostbyname('0.0.0.0')

mySocket  = socket( AF_INET, SOCK_DGRAM )
mySocket.bind((hostName,5002))

repeat = True
while repeat:
    (data,addr) = mySocket.recvfrom(SIZE)
    data = struct.unpack('d',data)
    print data 
```

我怀疑数据流应该是双精度的，但是虽然它给了我数字，但它们没有意义：

*   如果 simulink 发送一个常量“1”，我会得到“3.16e-322”的输出

*   如果 Simulink 发送一个常数“2”，我会得到“3.038e-319”的输出

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T04:45:50.377

原来我的网络正在反转数据包位。解决方案是将其读取为位反转：

```
data = struct.unpack('!d',data) 
```

我不知道为什么这会发生在某些网络上而不是其他网络上。有人可以评论一种判断我是否需要使用位反转的方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T12:28:12.367

当发送方和接收方的字节顺序不同时，就会出现问题。请参阅 sys.byteorder。最佳实践应该是在发送时始终转换为网络顺序，并在接收时再次转换。

# c++ - Premake OpenGL SDK 无法从教程中构建项目

> ID：16073147
> 
> 赞同：2
> 
> 时间：2013-04-18T01:42:21.703
> 
> 标签：c++, opengl, sdk, linker, premake

我正在尝试从[http://www.arcsynthesis.org/gltut/index.html](http://www.arcsynthesis.org/gltut/index.html)构建教程，但我似乎无法超越链接部分。这就是当我转到 Tut 01 文件夹并在之后输入“premake4 gmake”和“make”时得到的。

```
==== Building framework (debug) ====
==== Building Tut 01 Main (debug) ====
Linking Tut 01 Main
/usr/bin/ld: cannot find -lglloadD
/usr/bin/ld: cannot find -lglimgD
/usr/bin/ld: cannot find -lglutilD
/usr/bin/ld: cannot find -lglmeshD
/usr/bin/ld: cannot find -lfreeglutD
collect2: error: ld returned 1 exit status
make[1]: *** [Tut 01 MainD] Error 1
make: *** [Tut 01 Main] Error 2 
```

如您所见，将项目链接在一起存在问题。我从这里下载了教程 0.3.8.7z：[https ://bitbucket.org/alfonse/gltut/downloads](https://bitbucket.org/alfonse/gltut/downloads)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T17:28:30.917

好吧，我找到了答案，以防万一有人想知道如何修复，你所要做的就是打开 framework/framework.lua 中的文件并向下滚动直到你看到

```
 configuration "linux"
        links {"GL", "GLU"} 
```

并将其更改为

```
configuration "linux"
        links {"GL", "GLU", "X11"} 
```

这将允许您编译所有教程。

# c# - 实体框架性能 - 我如何让它快速工作？

> ID：16073150
> 
> 赞同：0
> 
> 时间：2013-04-18T01:42:36.570
> 
> 标签：c#, entity-framework, entity

我有一个包含子对象列表的对象，基本上它是一个有多个部门的机构。可以根据部门的布尔属性禁用或启用部门。当有 1 个或多个部门被禁用时，我想将机构的属性触发为 false。我的部分机构课程中有以下代码：

```
public bool AllSet
{
    get
    {
        return !(Departments.Where(i => i.Active == false && i.IsDeleted == false).Count() > 0);
    }
} 
```

这行得通，但是当我启用它时，我的页面的性能显示机构列表缓慢爬行并且内存使用量激增，显然我在这里做了一些根本错误的事情，有没有人有其他方法可以做到这一点？

**工作解决方案**

```
 var institutions = from x in ent.Institutions let hasDepartments = 
!x.Departments.Any(d => d.Active == false && d.IsDeleted == false) select new { 
                FullTitle = x.Title + " - " + x.Address.Line1 + ", " + x.Address.City + ", " + x.Address.State, Department = x, AllSet = hasDepartments, Guid = x.Guid
            };
            instList.DataSource = institutions; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:46:41.693

您可以使用：

```
public bool AllSet
{
    get
    {
        return !(Departments.Count(i => i.Active == false && i.IsDeleted == false) > 0);
    }
} 
```

有一些提示可以提高您的 EF 性能，请查看此[链接](http://rahulgbhatia.wordpress.com/2013/03/12/tips-to-improve-entity-framework-performance/)。（对于使用EF的人来说，这值得一读）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:05:49.907

您应该使用以下查询发现边际性能优势。然而，主要问题是 Linq 性能不佳。根据定义，它在运行时生成 SQL 查询，为此会生成大量元数据。您会发现 .net 4.5 在这方面的开销低于 .net 4。

如果第一次查询的成本似乎很大，也可能是由于视图创建过程。您可以查看预编译的视图。但最终，如果您需要速度，请寻找其他地方。甚至可能是内联 SQL。

```
public bool AllSet
{
    get
    {
        return !(Departments.Any(i => i.Active == false && i.IsDeleted == false));
    }
} 
```

编辑：我刚刚意识到你真正的问题。它看起来像是`AllSet`机构类上的一个方法，你在一个紧密的循环中调用它。由于延迟加载，我认为它“工作”。

这是非常糟糕的，因为您将要进行数据库调用的每个循环，这将是 IO/延迟绑定，因此非常慢。此外，不仅仅是从数据库中加载一个，而是按需加载`bool`每个相关联的，然后在 .net 上本地运行（因此内存占用很大）。`Department``.Count()`

如果他们有活跃的部门，请尝试预取每个机构。

```
var institutions = from x in context.Institutions
                   where {blah}
                   let hasDepartments = x.Departments.Any(d => d.Active == false 
                                   && i.IsDeleted == false)
                   select new { Department = x, AllSet = hasDepartments};
foreach(var institution in institutions)
{
    //DO STUFF
} 
```

总的来说，真正的 WTF 是您依赖 EF 延迟加载。

# php - 将值插入多个表时要走什么路？

> ID：16073151
> 
> 赞同：0
> 
> 时间：2013-04-18T01:42:44.570
> 
> 标签：php, sql-server-2008, cakephp, auditing

我`employees`在控制器中使用这个将一些值插入到表中：

```
 $this->Employee->create();
            if ($this->CoreProgram->save($this->request->data)) {
                $this->Session->setFlash('Program has been added.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add record.');
            } 
```

但是，我想向另一个表插入一条记录`audit`。更具体地说，当前日期以及`employee_id`我用于的字段`employees`。做到这一点的最佳方法是什么？我应该创建`$this->Audit->create();`吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:08:37.457

**在员工**表上使用插入触发器，将审计条目插入**审计**表：

```
CREATE TRIGGER tr_employees_ins ON dbo.employees FOR INSERT AS  
BEGIN  

    INSERT dbo.audit( [op] ... employee_id ...)
    SELECT 'INS' ... employee_id
    FROM Inserted

END 
```

# python - Python 变量范围和惰性查询集

> ID：16073152
> 
> 赞同：0
> 
> 时间：2013-04-18T01:42:52.377
> 
> 标签：python, django, django-queryset

我正在使用 Django 及其开箱即用的 ORM。如果有一些模块级变量，它们是否仅在应用程序启动时评估？或者，如果在视图中修改了每个请求，它们是否也会对其进行评估？一个例子：

```
from news.models import News

# Module level variables
draft_news = News.objects.filter(status='draft') 
live_news = News.objects.filter(status='prod')

def view(request):
    # outputs 10 an 10, respectively.
    print 'There are %d news objects and %d live objects. Adding a draft article' % (draft_news.count(), live_news.count()) 

    n = News(
        content='This is test content',
        status='draft',
        slug='this-is-a-test3',
        pubdatetime=datetime.now(),
    )
    n.save()

    print '...done. There are %d draft news objects.' % draft_news.count() # 11 objects
    print 'Changing status to live...'

    n.status='prod'
    n.save()

    print 'There are now %d live objects.' % live_news.count() # 11 objects 
```

由于查询集是惰性的，它们是在模块级别还是视图级别有关系吗？我最初在管理命令中测试了上述代码。

让我们假设重构不是一种选择。

附加信息：我有几个应用服务器 (uWSGI) 共享同一个数据库。似乎模块级变量只有在我重新启动所有这些 uWSGI 进程时才会更改。换句话说，新的 News 对象在视图中使用 get_object_or_404 时返回 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:46:21.190

不，它们是在模块级别还是视图级别都没有关系。

声明本身不会触发数据库请求。只有当您要求具体结果（例如计数或开始迭代）时，才会发生实际的数据库命中。

建议将它们保持在视图级别以保持全局命名空间清洁。

**更新：**
给出过时结果 的问题`.count()`更多地与 django db 查询[缓存](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)有关，而不是懒惰。请考虑[此问题](https://stackoverflow.com/questions/1886909/how-to-disable-django-query-cache)页面以获取解决方法。

# vb.net - 在 Visual Basic 2010 中播放没有 URL 的电影文件

> ID：16073154
> 
> 赞同：-2
> 
> 时间：2013-04-18T01:43:08.817
> 
> 标签：vb.net, visual-studio-2010, video, resources, movie

现在在我的项目中，我有 windows 媒体播放器对象，我可以通过将电影 URL 输入到 URL 属性中来播放电影。如何让它播放当前在我的资源中的电影？因为当我将可执行文件传输到我的另一台笔记本电脑进行测试时，它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:33:28.980

如果我没记错的话，当您将视频文件嵌入到应用程序中时，您只会嵌入它的数据，并且扩展名会被剥离。因此，为了查看它，您需要将其复制到一个临时目录并自己添加扩展名，然后从该位置播放它。

自 2005 年以来，我还没有发现需要做这样的事情，所以 Visual Studio 可能已经做了一些改变。

最简单的方法是将您想要播放的视频文件存储在与您的程序可执行文件相同的位置，并使用其名称简单地引用它。

# c++ - 不允许抽象类类型“矩形”的对象

> ID：16073156
> 
> 赞同：1
> 
> 时间：2013-04-18T01:43:14.133
> 
> 标签：c++, abstract-class, virtual-functions

```
//QuizShape.h
#ifndef QUIZSHAPE_H
#define QUIZHAPE_H
#include <iostream>
#include <iomanip>
#include <string>

using namespace std;

class QuizShape
{
protected:
    //outer and inner symbols, and label
    char border, inner;
    string quizLabel;
public:
    //base class constructor with defaults
    QuizShape(char out = '*', char in = '+', string name = "3x3 Square")
    {
        border = out;
        inner = in;
        quizLabel = name;
        cout << "base class constructor, values set" << endl << endl;
    };

    //getters
    char getBorder() const
    { return border; }
    char getInner() const
    { return inner; }
    string getQuizLabel() const
    { return quizLabel; }

    //virtual functions to be defined later
    virtual void draw( ) = 0;
    virtual int getArea( ) = 0;
    virtual int getPerimeter( ) = 0;

};

class Rectangle : public QuizShape
{
protected:
    //height and with of a rectangle to be drawn
    int height, width;
public:
    //derived class constructor
    Rectangle(char out, char in, string name,
                int h = 3, int w = 3):QuizShape(out, in, name)
    {
        height = h;
        width = w;
        cout << "derived class constructor, values set" << endl << endl;
    }

    //getters
    int getHeight() const
    { return height; }
    int getWidth() const
    { return width; }

    //*********************************************
    virtual void draw(const Rectangle &rect1)
    {
        cout << "draw func" << endl;
        cout << rect1.height << endl;
        cout << rect1.getWidth() << endl;
        cout << rect1.getQuizLabel() << endl;
    }

    virtual int getArea(const Rectangle &rect2)
    {
        cout << "area func" << endl;
        cout << rect2.getInner() << endl;
        cout << rect2.getBorder() << endl;
    }

    virtual int getPerimeter(const Rectangle &rect3)
    {
        cout << "perim func" << endl;
        cout << rect3.height << endl;
        cout << rect3.getWidth() << endl;
        cout << rect3.getQuizLabel() << endl;   
    }
    //************************************************
};

#endif 
```

到目前为止，这些是类类型。

```
//QuizShape.cpp
#include "QuizShape.h" 
```

目前，这只是桥接文件。

```
//pass7.cpp
#include "QuizShape.cpp"

int main()
{
    Rectangle r1('+', '-', "lol", 4, 5);

    cout << r1.getHeight() << endl;
    cout << r1.getWidth() << endl;
    cout << r1.getInner() << endl;
    cout << r1.getBorder() << endl;
    cout << r1.getQuizLabel() << endl;

    system("pause");
    return 0;
} 
```

由于 Rectangle 应该是一个抽象类，因此代码无法编译，当将鼠标悬停在 in 的声明上`r1`时`main`，我收到错误

> “不允许抽象类类型“矩形”的对象”。

我已经检查了该站点和其他站点上的其他答案，但没有遇到解决问题的方法。

**注意：我了解以 =0; 结尾的虚函数语句。使类成为抽象类。QuizShape 应该是抽象的。我已经在 Rectangle 中定义了虚函数，但它仍然是一个抽象类。**

如何修改虚函数 Rectangle 类，使 Rectangle 不再是抽象的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:45:48.653

您在抽象类中的方法`QuizShape`是：

```
virtual void draw( ) = 0;
virtual int getArea( ) = 0;
virtual int getPerimeter( ) = 0; 
```

但是在`Rectangle`它们`const Rectangle &rect1`作为参数时，您可以隐藏方法并且根本不会覆盖抽象方法。您需要有`Rectangle`与抽象基类中的方法具有相同签名的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:45:15.467

被覆盖的方法必须具有完全相同的签名，在派生类中您已为它们提供了参数。

# ssrs-2008 - 计算文本框中的 SSRS

> ID：16073157
> 
> 赞同：1
> 
> 时间：2013-04-18T01:43:21.463
> 
> 标签：ssrs-2008, reporting-services

我有一个场景，我需要根据 - 具有特定值的记录数/总记录数来计算百分比。这将进入标题中的文本框。我正在尝试以下操作，但我不断收到错误消息“未为 Pulbic Function Iif 的参数 FalsePart 指定参数。

有人可以对此有所了解吗？

```
=Count((Iif((Fields!Confirmed.Value, "KPI_Calculation")= True,1,Nothing)),"KPI_Calculation")
/Count(Fields!Confirmed.Value, "KPI_Calculation") 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:57:11.857

这在一个简单的测试中对我有用：

```
=Sum(IIf(Fields!ConfirmedValue.Value, 1, 0), "KPI_Calculation") / CountRows("KPI_Calculation") 
```

看起来在上面的示例中，您声明了 Scope 太多次，因此出现语法错误。

# ruby - 如何在 sahi for ruby 中通过多个属性查找对象

> ID：16073170
> 
> 赞同：0
> 
> 时间：2013-04-18T01:45:12.690
> 
> 标签：ruby, sahi

在 Sahi 控制器中，这工作正常

```
_div({className:"/class.*/",id:"id"}) 
```

但是我在 sahi 下面尝试了 ruby​​，它总是返回 false。

```
@browser.div('{className:"/class.*/",id:"id"}').exists? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T06:19:13.963

现在试试这个：

```
assert @browser.div(@browser.eval('({className:"class",id:"id"})')).exists 
```

这将起作用。

# android - 为什么我的分数计数器总是重置？

> ID：16073172
> 
> 赞同：2
> 
> 时间：2013-04-18T01:45:17.673
> 
> 标签：android

我正在尝试制作游戏，但似乎无法让计分器工作。问题是每次单击按钮时，整数的值都会回到 0。

```
public void button(View view){
    Integer counter = Integer.valueOf(0);
    counter = counter++;
    final TextView score = (TextView) findViewById(R.id.score);
    score.setText("Score: " + counter);
} 
```

我显然明白为什么每次得分都回到 0，但我不知道如何解决它。我是开发新手，所以一些示例代码将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:55:30.217

[这是来自http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)的一些修改代码

```
public class MyActivity extends Activity {

    int counter = 0; // Counter variable.

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         setContentView(R.layout.content_layout_id);

         final Button button = (Button) findViewById(R.id.button_id);
         button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
             counter = counter++;
             final TextView score = (TextView) findViewById(R.id.score);
             score.setText("Score: " + counter);
         }
     });
 } 
```

}

这应该做你想要的。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:52:54.143

因为你正在重置它。

```
Integer counter = Integer.valueOf(0); // here
counter = counter++; 
```

改为使用全局变量。

```
public class MyActivity extends Activity{
    int counter;

    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(...);
        counter = 0; 
    }

public void button(View view){
    counter = counter++;
    final TextView score = (TextView) findViewById(R.id.score);
    score.setText("Score: " + counter);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:54:39.447

您需要做的是在程序中更持久的部分或什至将计数器初始化为全局变量。每次调用函数时，都会初始化一个**新**计数器。

为了解决这个问题，你应该研究变量范围。（来自 Google 搜索“Java 变量范围”的示例链接。[（1）](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)）

# php - PHP - 尝试并捕获块（异常）处理

> ID：16073180
> 
> 赞同：1
> 
> 时间：2013-04-18T01:46:02.270
> 
> 标签：php, exception-handling, try-catch

我对异常处理有疑问。

如果我有一个函数`foo();`，就好像我这样处理它：

```
try {
    foo();
} catch (Exception $e) {
    // do someting
} 
```

或者如果我这样做是这样的：

```
foo() {
    try {
       // function body
    } catch (Exception $e) {
       // do someting
    }
} 
```

如果我不扔怎么办`Exception`？即使出现错误，代码也会继续执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:09:01.303

是的，代码将继续。在 php 中存在错误和异常。您可以使用函数处理错误，使用函数`set_error_handler()`处理无法处理的异常，`set_exception_handler()`并且可以使用处理异常`try .. catch`

# c++ - 在 Visual Studio 2012 中关闭后恢复 cpp 文件中的更改

> ID：16073188
> 
> 赞同：1
> 
> 时间：2013-04-18T01:46:48.773
> 
> 标签：c++, visual-c++

我用 C++ 写了很多代码并保存。之后我只想尝试一些我找到的示例代码。所以我将此代码粘贴到我的项目 main.cpp 文件中（我有我的代码）。我尝试了示例代码并错误地关闭了此文件。之后，我打开 main.cpp 文件，但无法通过 Ctrl-Z 撤消更改。我只想尝试示例代码，然后我想通过 Ctrl Z 撤消更改，但我的错误是关闭文件。关闭文件或恢复文件后是否可以撤消更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:50:21.210

您的原始代码可能永远消失了。但是，也许现在是您考虑将[版本控制系统](https://stackoverflow.com/questions/138621/best-version-control-for-lone-developer)添加到您的工具集的好时机，这将帮助您避免将来出现此类错误，并为您带来许多其他好处。

此外，出于您发现的原因，以您已经完成的方式将示例代码粘贴到您自己的工作上也不是一个明智的主意。在您的项目中插入一个新文件，或创建一个单独的项目来测试示例代码。为此，我有一个单独的 Visual Studio 解决方案。

编辑：我说“可能”，因为我不能根据您提供的信息排除所有恢复的可能性（例如，您可能有某种预定备份，它捕获了您以前的版本）。此外，如果您粘贴的代码比原始代码短，则其中一些可能仍然作为未使用的数据块存在于您的硬盘驱动器上，并且可能是可恢复的，假设其他内容尚未覆盖它们。

# javascript - JQuery .animate() 仅适用于 Chrome

> ID：16073189
> 
> 赞同：4
> 
> 时间：2013-04-18T01:46:49.850
> 
> 标签：javascript, jquery, internet-explorer, firefox, cross-browser

我正在使用 JQuery .animate() 函数在容器 div 中滑动 div。这在 Google Chrome 中没有问题，但是当我在 Firefox 或 IE 中尝试时，div 变得乱七八糟，实际上并没有滑动。我是 Javascript 新手，对浏览器兼容性一无所知，谁能指出我正确的方向？以下是相关代码：

的HTML

```
<div id="slider">
  <div id="main" class="content">
  </div>

  <div id="projects" class="content">
  </div>

  <div id="about" class="content">
  </div>

  <div id="contact" class="content">
  </div>
</div> 
```

CSS

```
#slider {
  width: 100px;
  height: 100px;
  overflow: hidden;
  position: relative;
}

#main {
  background-color: red;
  width: inherit;
  height: inherit;
  position: absolute;
}

#projects {
  background-color: blue;
  width: inherit;
  height: inherit;
  position: absolute;
}

#about {
  background-color: yellow;
  width: inherit;
  height: inherit;
  position: absolute;
}

#contact {
  background-color: green;
  width: inherit;
  height: inherit;
  position: absolute;
}

.content {
  left: 0;
  top: 0;
} 
```

JavaScript

```
$(document).ready(function() {

var contentWidth = '100px';

for( var i=0; i < 2; i++) {
  $('.gallery' + (i + 1)).colorbox({ opacity:0.5 , rel:'gallery' + (i+1)});
}

$('.content').css({
  position: 'absolute',
  left: contentWidth
});

$('#main').addClass('visible');
document.getElementById('main').style.left = "0";

$("li a").click(function () {
  event.preventDefault();
  var $blockID = $( $(this).attr('href') );

  if ($blockID.hasClass('visible')) { return; }

  $('.content.visible')
    .removeClass('visible')
    .animate({ left: '-=100px' }, {  
      duration: 'slow',
      complete: function () {
        $(this).css('left', '100px');
      }
    }
 );

$blockID
  .addClass('visible')
  .animate({ left: 0 }, {duration: 'slow'});
});

}); 
```

JSFiddle：http: [//jsfiddle.net/bwvVZ/](http://jsfiddle.net/bwvVZ/)

我也可以提供相关网站的链接，但我会推迟，因为我不确定它是否违反规则。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:56:38.037

您缺少`event`点击处理程序中的参数

```
$("li a").click(function(){ 
    event.preventDefault();
    //...
}); 
```

它应该是

```
$("li a").click(function (event){
    event.preventDefault();
    //...
}); 
```

[**演示**](http://jsfiddle.net/bwvVZ/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:03:32.750

自己无法在 IE 中进行测试，但这可以修复 Firefox，returnValue 应该可以修复 IE。[CSSDeck 测试](http://cssdeck.com/labs/ooqguf1p)- 我无法从当前位置访问 jsfiddle。

```
$("li a").click(function (event){
    event.returnValue = false; //ie
    if(event.preventDefault) //prevents error if not found
        event.preventDefault();

    var $blockID = $($(this).attr('href'));

    ... 
```

# macos - 如何使用 Cocoa 将文本转换为二进制？

> ID：16073192
> 
> 赞同：0
> 
> 时间：2013-04-18T01:47:18.783
> 
> 标签：macos, cocoa, binary

我正在制作一个简单的 Cocoa 程序，可以将文本编码为二进制并将其解码回文本。我试图制作这个脚本，但我什至还没有接近完成它。谁能帮我？这必须包括两个文本框和两个按钮或任何最好的，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:10:35.410

这有两个部分。

第一种是将字符串的字符编码为字节。您可以通过向字符串发送`dataUsingEncoding:`消息来做到这一点。您选择的编码将决定它为每个字符提供哪些字节。从 开始`NSUTF8StringEncoding`，然后尝试其他编码，例如`NSUnicodeStringEncoding`，一旦你开始工作。

第二部分是将每个字节的每一位转换为`'0'`字符或`'1'`字符，例如，以 UTF-8 编码为单个字节的字母 A 将表示为`01000001`.

因此，将字符转换为字节，并将字节转换为表示位的字符。这两个是*完全独立*的任务；第二部分应该适用于任何字节流，包括任何有效的编码字符流、任何*无效*的编码字符流，以及实际上任何不是文本的东西。

第一部分很简单：

```
- (NSString *) stringOfBitsFromEncoding:(NSStringEncoding)encoding
    ofString:(NSString *)inputString
{
    //Encode the characters to bytes using the UTF-8 encoding. The bytes are contained in an NSData object, which we receive.
    NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];

    //I did say these were two separate jobs.
    return [self stringOfBitsFromData:data];
} 
```

对于第二部分，您需要遍历`bytes`数据。交流`for`回路将在那里完成工作，看起来像这样：

```
//This is the method we're using above. I'll leave out the method signature and let you fill that in.
- …
{
    //Find out how many bytes the data object contains.
    NSUInteger length = [data length];
    //Get the pointer to those bytes. “const” here means that we promise not to change the values of any of the bytes. (The compiler may give a warning if we don't include this, since we're not allowed to change these bytes anyway.)
    const char *bytes = [data bytes];

    //We'll store the output here. There are 8 bits per byte, and we'll be putting in one character per bit, so we'll tell NSMutableString that it should make room for (the number of bytes times 8) characters.
    NSMutableString *outputString = [NSMutableString stringWithCapacity:length * 8];

    //The loop. We start by initializing i to 0, then increment it (add 1 to it) after each pass. We keep looping as long as i < length; when i >= length, the loop ends.
    for (NSUInteger i = 0; i < length; ++i) {
        char thisByte = bytes[i];

        for (NSUInteger bitNum = 0; bitNum < 8; ++bitNum) {
            //Call a function, which I'll show the definition of in a moment, that will get the value of a bit at a given index within a given character.
            bool bit = getBitAtIndex(thisByte, bitNum);

            //If this bit is a 1, append a '1' character; if it is a 0, append a '0' character.
            [outputString appendFormat: @"%c", bit ? '1' : '0'];
        }
    }

    return outputString;
} 
```

### 位 101（或 1100101）

位实际上只是以 2 为基数的数字。西方世界的人类通常以 10 为基数写出数字，但数字是一个数字，无论它是用什么基数写的，每个字符，每个字节，甚至每个位，都是只是一个数字。

数字（包括位）从最低的位置开始计数，根据基数被提高到的指数来计算该位置的大小。我们想要位，所以基数是 2，所以我们的位置值是：

*   2^0 = 1：个位（最低位）
*   2^1 = 2：二进制位（下一个高位）
*   2^2 = 4：四人组
*   2^3 = 8：八分之二

依此类推，最多 2^7。（请注意，最高指数正好比我们所追求的位数小一；在这种情况下，7 对 8。）

如果这一切让你想起小时候读过的“个位”、“十位”、“百位”等，那应该是：原理完全相同。

因此，一个字节（如 65）（在 UTF-8 中）完全表示字符“A”，是以下各项的总和：

```
 2^7 × 0 = 0
+ 2^6 × 0 = 64
+ 2^5 × 1 = 0
+ 2^4 × 0 = 0
+ 2^3 × 0 = 0
+ 2^2 × 0 = 0
+ 2^1 × 0 = 0
+ 2^0 × 1 = 1
= 0 + 64 +0+0+0+0+0 + 1
= 64 + 1
= 65 
```

当您小时候学习以 10 为底的数字时，您可能注意到十是“10”，一百是“100”，等等。在底数 2 中也是如此：因为 10^x 是“1”，然后是 x以 10 为底的“0”，2^x “1”后跟以 2 为底的“x”0。因此，例如，以 2 为底的 64 是“1000000”（计算零并与表格进行比较以上）。

我们将使用这些精确的二的幂数来*测试*每个输入字节中的每个位。

### 寻找比特

C 有一对“移位”运算符，它们将在数字的低端插入零或删除数字。前者叫做“左移”，写成`<<`，你可以猜反了。

我们要左移。我们想将 1 左移我们所追求的位数。这完全等同于将 2（我们的基数）提高到该数字的幂；例如，`1 << 6`= 2^6 = “1000000”。

### 测试位

C 也有一个用于位测试的运算符；它是`&`按位与运算符。（不要将此与`&&`逻辑*AND*运算符混淆。`&&`用于在做出决策时使用整个真/假值；`&`是处理值中的位的工具之一。）

严格来说，`&`不测试单个位；它遍历两个输入值的位，并返回一个新值，其位是每个输入对的按位与。所以，例如，

```
 01100101
& 00101011
----------
  00100001 
```

当且仅当*两个*相应的输入位也是 1 时，输出中的每个位都是 1。

### 把这两件事放在一起

我们将使用左移运算符给我们一个数字，其中设置了一位，即第 n 位，*即*2^n，然后使用按位与运算符来测试在我们的输入字节。

```
//This is a C function that takes a char and an int, promising not to change either one, and returns a bool.
bool getBitAtIndex(const char byte, const int bitNum)
//It could also be a method, which would look like this:
//- (bool) bitAtIndex:(const int)bitNum inByte:(const char)byte
//but you would have to change the code above. (Feel free to try it both ways.)
{
    //Find 2^bitNum, which will be a number with exactly 1 bit set. For example, when bitNum is 6, this number is “1000000”—a single 1 followed by six 0s—in binary.
    const int powerOfTwo = 1 << bitNum;

    //Test whether the same bit is also set in the input byte.
    bool bitIsSet = byte & powerOfTwo;

    return bitIsSet;
} 
```

### 我应该承认一点魔法

按位 AND 运算符不会*计算*为单个位 - 它不会仅计算为 1 或 0。请记住上面的示例，其中`&`运算符返回 33。

`bool`类型有点神奇：任何时候将任何值转换为，`bool`它都会自动变为 1 或 0。任何不是 0 的都变为 1；任何东西都`0`变成了`0`。

Objective-C`BOOL`类型*不这样做*，这就是我`bool`在上面的代码中使用的原因。你可以随意使用任何你喜欢的东西，除了你通常应该`BOOL`在处理任何需要 a 的东西时使用`BOOL`，特别是在覆盖子类中的方法或实现协议时。您可以自由地来回转换，但不是无损的（因为`bool`如上所述会更改非零值）。

### 哦，是的，你也谈到了文本框

当用户单击您的按钮时，获取`stringValue`您的输入字段，`stringOfBitsFromEncoding:ofString:`使用合理的编码（例如 UTF-8）和该字符串进行调用，并将结果字符串设置为`stringValue`您的输出字段的新字符串。

额外积分：添加一个弹出按钮，用户可以使用该按钮选择编码。

额外的额外功劳：使用所有可用编码填充弹出按钮，无需硬编码或硬敲击列表。

# sql - 获取 SQL 中出现次数最多的属性

> ID：16073193
> 
> 赞同：0
> 
> 时间：2013-04-18T01:47:19.910
> 
> 标签：sql

使用 SQL，我有一个包含用户名列表的表，我试图在不使用 MAX 的情况下输出重复次数最多的一个。我对 SQL 很陌生，所以任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:51:41.380

您可以使用聚合函数来获取 a重复`count()`的总次数：`username`

```
select username, count(username) Total
from yourtable
group by username
order by total desc 
```

然后根据您的数据库，您可以返回出现最多的用户名。

在 MySQL 中，您可以使用`LIMIT`：

```
select username, count(username) Total
from yourtable
group by username
order by total desc
limit 1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7e9db/1)

在 SQL Server 中，您可以使用`TOP`：

```
select TOP 1 with Ties username, count(username) Total
from yourtable
group by username
order by total desc 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4f03d/1)

# javascript - javascript函数不会运行onchange

> ID：16073195
> 
> 赞同：1
> 
> 时间：2013-04-18T01:47:46.587
> 
> 标签：javascript, onchange

```
window.onload = init;

function init(){
    var allSelect = document.getElementsByTagName("option");
    for (var i = 0; i < allSelect.length; i++){
        allSelect[i].onchange = loadLink;
    }
}

function loadLink(){
     alert("TEST");
} 
```

所以我正在为一个班级解决这个问题，而且功能非常简单。我用一个简单的警报替换了所需的代码，因为即使逐点跟踪断点也不会运行 loadLink() 函数。AllSelect 已填充，并且都具有 {} 中指定代码的 onchange 值。

我也尝试过手动将其放入 html 元素中，但仍然无法正常工作。

有任何想法吗？如果有人想知道的话，我正在使用 IE 和 Chrome 在我的计算机上本地运行。提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:51:21.620

onchange 事件属于 select 元素，而不是 option 元素。所以：

```
window.onload = init;

function init(){
    var allSelect = document.getElementsByTagName("select");
    for (var i = 0; i < allSelect.length; i++){
        allSelect[i].onchange = loadLink;
    }
}

function loadLink(){
     alert("TEST");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:53:10.597

我想你想要

```
 var allSelect = document.getElementsByTagName("select"); 
```

相反，您正在查询 DOM 中的选择项中的选项元素。

# android - 将日历添加到 API 10 (2.3.3) 到 API (14) 的 SyncAdapter 帐户？

> ID：16073196
> 
> 赞同：0
> 
> 时间：2013-04-18T01:47:47.630
> 
> 标签：android, android-contentprovider, android-calendar, android-syncadapter

我已经创建了一个 SyncAdapter 以及身份验证。现在我可以将同步的帐户添加到我的设备，我希望该帐户能够关联日历。

*   我的 SyncAdapter 同步到自定义日历网络服务器
*   我计划支持**Android 2.3.3 到 4.x**

我知道在 API 14 之前，Android 的内部日历存储并没有正式为开发人员提供支持，并且不存在 ContentProvider。但是日历数据库模式是否与 2.3.3 及更高版本相同？具体来说，我是否可以为 2.3.3 编写自定义日历 ContentProvider 并使其在 4.0+ 上正常运行？

有没有什么地方可以获取 2.3.3 和 4.0 的 Android 日历的数据库模式来调查这个？

此外，日历数据库是否存储给定日历关联的 SyncAdapter 帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:04:27.697

尝试使用这个工具——http: **[//www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx](http://www.cellobject.net/Tools/CellObjectSQLiteXMLBrowser.aspx)**来可视化日历数据库。**这将给出日历数据库的架构。**

**具体来说，我是否可以为 2.3.3 编写自定义日历 ContentProvider 并使其在 4.0+ 上正常运行？**

*   是的，您可以使用 contentProviders。（只需检查您要使用的列是否存在于两者中）

**但是日历数据库模式是否与 2.3.3 及更高版本相同？**

*   是的，大多数项目是相同的**，但 column_name 有变化**。你可以在这里查看[http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html)

希望这会有所帮助。如果您正在寻找特定的东西，请告诉我

# c++ - malloc 的内存与 std::make_shared 创建的对象重叠

> ID：16073197
> 
> 赞同：0
> 
> 时间：2013-04-18T01:48:40.053
> 
> 标签：c++, c, memory-management, malloc, fuse

调用`malloc`返回一个指向与已分配的内存重叠的内存块的指针`make_shared`。我正在构建一个 FUSE 客户端，malloc 调用在 FUSE 库中，但我不确定这是否相关。我无法在我的程序之外重现该错误，而且我不知道下一步该做什么。`shared_ptr`直到由 管理的对象中的指针被损坏然后被使用，Valgrind 才发现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:45:32.730

此错误是创建 a `shared_ptr`with `new`，然后将其类型转换为 a`weak_ptr`并删除它的结果。我必须对它进行类型转换，因为我使用的是 C 库（FUSE）并将其传递给 a 的指针`weak_ptr`，并且它提供了 a`uint64_t`来存储句柄。然后该库调用我的函数并向它们传递一个包含指针类型转换为`uint64_t`.

# vim - 在 Vim 中自动换行/合并行

> ID：16073198
> 
> 赞同：1
> 
> 时间：2013-04-18T01:49:03.250
> 
> 标签：vim, formatting

我正在用乳胶创建一个文档，我希望所有行都在大约 80 个字符处断开。这在编写新文本时很容易手动完成，但编辑旧文本通常会导致行长或短。修复它会导致其他需要更改的行等等。

vim 中是否有自动方法在 80 个字符后换行并在可能的情况下合并它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:09:35.517

要使行只有 80 个字符长，您可以使用[textwidth](http://vimdoc.sourceforge.net/htmldoc/options.html#%27textwidth%27)

假设您的乳胶文件具有扩展名`.tex`，您可以将以下行添加到您的 vimrc

`autocmd BufReadPost *.tex setlocal textwidth=80`

要格式化当前段落，您可以使用[`gqap`](http://vimdoc.sourceforge.net/htmldoc/change.html#gqap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:24:16.167

我使用以下设置。

```
set textwidth=80 
```

（手动或在您的`~/.vimrc`）。然后，如果我在文件中有要格式化的文本块，我首先将其标记为可视模式（即`shift-V`切换到可视行模式，然后标记要格式化的所有行），然后使用`gq`. 另请参阅`:help gq`。

# sql - sql - 多层相关子查询

> ID：16073199
> 
> 赞同：2
> 
> 时间：2013-04-18T01:49:07.493
> 
> 标签：sql, sql-server, correlated-subquery

我有`table A, B and C`

我想返回表 A 中不存在于表 B 中且该列表中的所有条目在表 C 中不存在。

```
select * from table_A as a
where not exists (select 1 from table_B as b
where a.id = b.id) 
```

这给了我 A 中不在 B 中的条目的第一个结果。但是现在我只想要该结果中也不在 C 中的那些条目。

我尝试了以下口味：

```
select * from table_A as a
where not exists (select 1 from table_B as b
where a.id = b.id)
AND
where not exists (select 1 from table_C as c
where a.id = c.id) 
```

但这不是正确的逻辑。如果有办法存储第一个查询的结果，然后从表 C 中不存在的结果中选择 *。但我不知道该怎么做。我很感激帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:53:37.933

尝试这个：

```
select * from (
  select a.*, b.id as b_id, c.id as c_id 
  from table_A as a
  left outer join table_B as b on a.id = b.id
  left outer join table_C as c on c.id = a.id
) T
where b_id is null
  and c_id is null 
```

另一个实现是这样的：

```
select a1.*
from table_A as a1
inner join (
  select a.id from table_A
  except  
  select b.id from table_B
  except
  select c.id from table_c
) as a2 on a1.id = a2.id 
```

[请注意此处](http://www.tsqltutorials.com/except.php)描述的对子查询形式的限制。第二种实现，通过最简洁和清晰地描述 SQL Server 所需的操作，可能是最有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:06:19.703

`WHERE`您在第二个查询（的外部部分）中有两个子句。那不是有效的 SQL。如果删除它，它应该可以按预期工作：

```
select * from table_A as a
where not exists (select 1 from table_B as b
                  where a.id = b.id)
AND
      not exists (select 1 from table_C as c            -- WHERE removed
                  where a.id = c.id) ; 
```

在**[SQL-Fiddle](http://sqlfiddle.com/#!3/5e760/2)**中测试（thnx @Alexander）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T01:51:33.893

如何使用`LEFT JOIN`

```
SELECT  a.*
FROM    TableA a
        LEFT JOIN TableB b
            ON a.ID = b.ID
        LEFT JOIN TableC c
            ON a.ID = c.ID
WHERE   b.ID IS NULL AND
        c.ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/4f2da/1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T20:40:23.897

NOT EXISTS 运算符的另一种选择

```
SELECT *
FROM dbo.test71 a 
WHERE NOT EXISTS(
                 SELECT 1
                 FROM (SELECT b.ID
                       FROM dbo.test72 b
                       UNION ALL
                       SELECT c.ID
                       FROM dbo.test73 c) x
                 WHERE a.ID = x.ID
                 ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/e4100/1)上的演示[](http://sqlfiddle.com/#!3/e4100/1)

 **来自@ypercube 的选项。感谢您的礼物；）

```
SELECT *
FROM dbo.test71 a 
WHERE NOT EXISTS(
                 SELECT 1
                 FROM dbo.test72 b
                 WHERE a.ID = b.ID  
                 UNION ALL
                 SELECT 1
                 FROM dbo.test73 c
                 WHERE a.ID = c.ID
                 ); 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/5e760/4)上的演示[](http://sqlfiddle.com/#!3/5e760/4)

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T03:21:27.063

我不喜欢“不存在”，但如果出于某种原因它对你来说似乎更合乎逻辑；那么您可以为您的第一个查询使用别名。随后，您可以重新应用另一个“不存在”子句。就像是：

```
SELECT * FROM 
  ( select * from tableA as a
  where not exists (select 1 from tableB as b
  where a.id = b.id) )
AS A_NOT_IN_B
WHERE NOT EXISTS (
  SELECT 1 FROM tableC as c
  WHERE c.id = A_NOT_IN_B.id
) 
```****

# java - 比较两棵二叉树，看它们是否具有相同的结构

> ID：16073201
> 
> 赞同：1
> 
> 时间：2013-04-18T01:49:13.577
> 
> 标签：java, data-structures, binary-tree, binary-search-tree

另一个简单的，但我似乎无法得到它。我需要编写一个方法来比较两棵二叉树的结构并返回它们是否相同的天气。数据和数据类型不仅仅是结构重要。这里有些例子：

![例子！](https://i.stack.imgur.com/eR88O.png)

这是我到目前为止的代码。我认为它真的很接近。

```
public boolean sameStructure(OrderedSet<E> other) {
    if (other.size() != size)
        return false;
    return sameStructureHelp(other, root, other.root);
}

private boolean sameStructureHelp(OrderedSet<E> other, TreeNode ref,
        TreeNode otherRef) {
    if (otherRef == null && ref != null)
        return false;
    if (otherRef != null && ref == null)
        return false;
    sameStructureHelp(other, ref.left, otherRef.left);
    sameStructureHelp(other, ref.right, otherRef.right);
    return true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:51:49.260

您粘贴的内容大部分是正确的，只是遗漏了一个关键部分：您应该返回它们的值，而不是只检查左右子树，`and`这意味着植根于当前节点的树是否满足相同结构的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:45:20.940

谢谢@Ziyao Wei 这是解决问题的代码：

```
public boolean sameStructure(OrderedSet<E> other) {
    if (other.size() != size)
        return false;
    return sameStructureHelp(other, root, other.root);
}

private boolean sameStructureHelp(OrderedSet<E> other, TreeNode ref,
        TreeNode otherRef) {
    if (otherRef == null && ref != null)
        return false;
    if (otherRef != null && ref == null)
        return false;
    if (otherRef == null && ref == null)
        return true;

    return sameStructureHelp(other, ref.left, otherRef.left) 
        && sameStructureHelp(other, ref.right, otherRef.right);

} 
```

# spring - 如何在 Spring Data JPA 中显示具有特定格式的 timdstamp 列

> ID：16073203
> 
> 赞同：1
> 
> 时间：2013-04-18T01:49:28.870
> 
> 标签：spring, jpa

我正在使用 Spring Data JPA，我有一个如下表：

```
public class Apk {

  @Temporal(TemporalType.TIMESTAMP)
  @Column
  private java.util.Date creationTime;

} 
```

我的 DBMS 是 MySQL5.x，上面的列是在其中定义的 datetime 类型。我只是在存储库类中调用 findAl() 方法扩展 PaginAndSortingRepository。

```
public interface ApksRepository extends PaginAndSortingRepository<Apk, Long>{

}

public class ApksServiceImpl implements ApksService {

    public PagingRes<Apk> findAll(PageInfo pageInfo){
        PaginRes<Apk> result = new PagingRes<Apk>();

        Page page = apksRepos.findAll(pageInfo.toPageRequest());
        result.fromPage(page);

        return result;
    }
}

public class PageInfo {

  private int page;
  private int rp;
  private String sortname;
  private String sortorder;
  private String query;
  private String qtype;

  //getters and setters

  public PageRequest toPageRequest() {

     Sort.Direction direction = Sort.Direction.ASC;
     if (sortorder!=null && "DESC".equals(sortorder))
         direction = Sort.Direction.DESC;
     return new PageRequest(page-1, rp, direction, sortname);
  }
}

public class PagingRes<T> {

   private long total;
   private int page;
   private int rowPerPage;
   private List<T> rows;

   //getters and setters

   public PagingRes<T> fromPage(Page page) {
       this.page = page.getNumber();
       this.rowPerPage = page.getSize();
       this.total = page.getTotalElements();
       this.rows = page.getCotent();
       return this;
   }
} 
```

我试图在表中显示数据，包括列，但是当我这样做时，列显示为长类型。我想以格式“dd-MM-yyyy hh:mm:ss”显示列。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:07:10.070

我知道用于 JSON 响应的 Jackson 映射器给出了奇怪的结果。所以在搜索之后，我使用 JsonSerializer 来修复它，如下所示：

```
Entity class

              @JsonSerialize(using=AuDateSerializer.class)  
              private java.util.Date eventTime;

Custom Serializer
              public class AuDateSerializerextends JsonSerializer<Date> {
              @Override
              public void serialize(Date value, JsonGenerator gen, SerializerProvider provider) throws IOException, JsonProcessingException {
                DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
                jgen.writeString(formatter.format(value));
              }
            } 
```

现在它工作正常。谢谢。

# google-drive-api - 如果您使用的是文档列表 API 和更改提要，如何排除用户打开的文件？

> ID：16073204
> 
> 赞同：0
> 
> 时间：2013-04-18T01:49:31.360
> 
> 标签：google-drive-api, google-docs-api

驱动 SDK 包含订阅 drive.changes.list。Documents List 中是否有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:05:50.427

根据我目前的知识，没有等价物。

# sql - 选择查询连接 3 个表

> ID：16073208
> 
> 赞同：1
> 
> 时间：2013-04-18T01:49:59.143
> 
> 标签：sql, sql-server, sql-server-2008, select, join

我有 3 张桌子

**Personel** : id, name
**Department** : id, name
**Match_Dept_Per** : dept_id, pers_id, workInfo

**外键：**
dept_id --> Department.id
pers_id --> Personel.id

**示例数据：人员**

**：**
1，Emir Civas
2，Sercan Tuncay

**部门：**
1、销售
2、企划

**Match_Dept_Per :**
1,1,经理

我想要做的是，列出人们的姓名、他们的部门名称和 workInfos，例如：

```
ID | Pers. Name | Dept Name | Work Info
---------------------------------------
1  | Emir Civas | Sales     | Manager 
```

我可以通过一个简单的选择查询来做到这一点：

```
select p.id, p.name, d.name, m.workInfo
  from personel p, department d, match_dept_per m
 where p.id = m.pers_id and d.id = m.dept_id; 
```

这是我的架构和此查询的[示例小提琴](http://www.sqlfiddle.com/#!2/8d65b/5)。

但是，我需要显示其他人的 ID 未插入到 match_dept_per 表中。并将“未知”设置为空值。喜欢：

```
ID | Pers. Name    | Dept Name | Work Info
------------------------------------------
1  | Emir Civas    | Sales     | Manager
2  | Sercan Tuncay | Unknown   | Unknown 
```

由于我使用的是 Match_Dept_Per 表，如果没有添加 Personel ID，我将无能为力。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:55:04.660

用于`left outer join`包括所有人员，即使他们与其他表没有关联：

```
select p.id,
       p.name,
       ifnull(d.name, 'Unknown') DepName,
       ifnull(m.workInfo, 'Unknown') workInfo
  from personel p
       left outer join match_dept_per m
           on p.id = m.pers_id
       left outer join department d
           on d.id = m.dept_id 
```

这是一个[演示小提琴](http://www.sqlfiddle.com/#!2/8d65b/9)。

由于您似乎使用 MS SQL，您可能需要使用`isnull()`而不是`ifnull()`. 但无论如何我都会忽略这一点，因为我认为最好`NULL`在代码中使用数据（Java、C# 等）。您可以在那里控制输出。

# c++ - 无法弄清楚如何执行此代码

> ID：16073213
> 
> 赞同：0
> 
> 时间：2013-04-18T01:50:32.640
> 
> 标签：c++

我一直在做这个模拟银行账户的项目。用户可以存款、取款，并在屏幕上显示所有取款和存款。在选择菜单的顶部需要是当前余额。就像这样，储蓄：100。每当我存钱或取钱时，我都需要将余额更改为正确的金额。金额从 100 美元起。如果我第一次存款或取款，它会很好地工作，但第二次它会重置回 100 美元，然后交易就完成了。如何在不重置的情况下使余额保持正确的金额？这是一个学校项目，我不是在找人提供代码。我只是在寻求一些正确方向的提示或指导。这是我的 int main() 的代码：

```
int main ()
{
    saving sa;
    creditCard cca;
    checking ca;

    string n;
    int option;
    int exit = 1;
    int x = 1;
    do{
    cout << endl;
    cout << "Checking Balance:" << ca.getBalance() << "       " << "Savings balance:" << sa.getBalance() << "       " << "Credit Card balance:" << cca.getBalance() << endl;
    cout << endl;

    cout << " (1) Savings Deposit " << endl;
    cout << " (2) Savings withdrawel " << endl;
    cout << " (3) Checking Deposit " << endl;
    cout << " (4) Write A Check " << endl;
    cout << " (5) Credit Card Payment " << endl;
    cout << " (6) Make A Charge " << endl;
    cout << " (7) Display Savings " << endl;
    cout << " (8) Display Checkings " << endl;
    cout << " (9) Display Credit Card " << endl;
    cout << " (0) Exit " << endl;
    cin >> option;

    switch ( option )

    {
        case 1 : {
                 double SamtD;
                 cout << " Please enter how much you would like to deposit into savings " << endl;
                 cin >> SamtD;
                 sa.makeDeposit(SamtD);
                 break;
                 };
        case 2 : {
                 int SamtW;
                 cout << " Please enter how much you would like to withdraw "<< endl;
                 cin >> SamtW;
                 sa.doWithdraw(SamtW);
                 break;
                 }
        case 3 : {
                 double CamtD;
                 cout << " Please enter how much you would like to deposit into checkings " << endl;
                 cin >> CamtD;
                 ca.makeDeposit(CamtD);
                 break;
                 }
        case 4 : {
                 double CamtW;
                 int chkNum;
                 cout << " Please enter how much you wrote on the check " << endl;
                 cin >> CamtW;
                 cout << " Please enter the check number " << endl;
                 cin >> chkNum;
                 ca.writeCheck(chkNum, CamtW);
                 break;
                 }
        case 5 : {
                 double CCmkP;
                 cout << " Please enter the amount you would like to deposit " << endl;
                 cin >> CCmkP;
                 cca.makePayment(CCmkP);
                 break;
                 }
        case 6 : {
                 double DoC;
                 string Nm;
                 cout << " Please enter the amount charged to your credit card " << endl;
                 cin >> DoC;
                 cout << " Please enter where the charge was made " << endl;
                 cin >> Nm;
                 getline(cin, Nm);
                 cca.doCharge(Nm,DoC);
                 break;
                 }
        case 7 : {
                 sa.display();
                 break;
                 }
        case 8 : {
                 ca.display();
                 break;
                 }
        case 9 : {
                 cca.display();
                 break;
                 }
        case 0 : exit = 0;
                 break;
        default : exit = 0;
                 cout << " ERROR ";
    }
    }
    while(exit==1);

    return 0;
} 
```

这是正在设定的平衡：

```
double curbalance = 100;
void account::setBalanceD(double balance) // This is for deposit
{
    itsBalance = balance;
}

void account::setBalanceW(double balance) // This is for withdraw
{
    double newBalance = curBalance - balance;
    itsBalance = newBalance;
}

double account::getBalance()
{
    return itsBalance;
} 
```

这是我菜单中选项 2 将调用的代码：

int 储蓄:: doWithdraw(int amount)

```
{
    if (amount > 0)
    {
        for (int i = 9; i != 0; i--)
        { 
            last10withdraws[i] = last10withdraws[i-1];
        }
        last10withdraws[0] = amount; 
        setBalanceW(amount);  
    }
    else
    {
        cout << " ERROR. Number must be greater then zero. " << endl;
    }
    return 0;
} 
```

有任何想法吗？我就是无法让天平保持准确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:00:30.613

问题是你的`setBalanceW()`函数从不扣除`curBalance`，所以它停留在`100`。

```
void account::setBalanceW(double balance) // This is for withdraw
{
    curBalance -= balance;
} 
```

您的其他参考也应该是`curBalance`，因为应该只有一个当前余额。

```
void account::setBalanceD(double balance) // This is for deposit
{
    curBalance += balance;
}

double account::getBalance()
{
    return curBalance;
} 
```

不过，最好的解决方案（假设那`itsBalance`是`account`班级的成员，那就是完全消除，然后用初始存款`curBalance`打开你的账户：`main()`

```
int main ()
{

  saving sa;
  creditCard cca;
  checking ca;

  sa.makeDeposit(100.0);
  /* other code */
}

/* Note no curBalance variable? */
void account::setBalanceW(double balance) // This is for withdraw
{
    itsBalance -= balance;
}
void account::setBalanceD(double balance) // This is for deposit
{
    itsBalance += balance;
}

double account::getBalance()
{
    return itsBalance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:58:06.320

您执行存款的实施似乎不正确。它应该是：

```
void account::setBalanceD(double balance) // This is for deposit
{
    itsBalance += balance;
} 
```

请注意，我们现在将存入的金额添加到当前余额中，而不是显式设置它的值。与 Ken 指出的类似，这同样适用于执行撤回。

```
void account::setBalanceW(double balance) // This is for withdraw
{
    itsBalance -= balance;
} 
```

# mysql - 在 where 子句中查找空值时查询不起作用

> ID：16073218
> 
> 赞同：1
> 
> 时间：2013-04-18T01:50:54.650
> 
> 标签：mysql, null, where, isnull

我得到了这个完美的查询：

```
SELECT FOLDER.folderid, FOLDER.foldername
FROM FOLDER
INNER JOIN COLLABORATORS ON COLLABORATORS.folderid = FOLDER.folderid
WHERE COLLABORATORS.userid = 23 
```

但是当我在 where 子句中添加它时：“and FOLDER.parent = NULL”它不起作用。完整的查询是：

```
SELECT FOLDER.folderid, FOLDER.foldername
FROM FOLDER
INNER JOIN COLLABORATORS ON COLLABORATORS.folderid = FOLDER.folderid
WHERE COLLABORATORS.userid = 23 and FOLDER.parent = NULL 
```

有谁知道发生了什么事？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:52:35.507

处理时`NULL`，您不能使用`=`or`<>`因为值是**未知**的，而是使用`IS NULL`or `IS NOT NULL`,

```
WHERE COLLABORATORS.userid = 23 and FOLDER.parent IS NULL 
```

*   [MySQL - 使用 NULL 值](http://dev.mysql.com/doc/refman/5.5/en/working-with-null.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:52:35.320

更改此查询

```
WHERE FOLDER.parent = NULL 
```

到

```
WHERE FOLDER.parent IS NULL 
```

> 因为任何与 NULL 的算术比较的结果也是 NULL，所以您无法从此类比较中获得任何有意义的结果。

[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:21:20.357

要从表中获取空记录，需要使用 where [column] 为空。查询 FOLDER.parent = NULL 中指定的条件将在所需列中查找“NULL”字符串（字）。您可以通过在上列中插入“NULL”字符串（单词）来检查这一点。

# php - 如何暂停每次迭代php初学者

> ID：16073227
> 
> 赞同：0
> 
> 时间：2013-04-18T01:52:03.007
> 
> 标签：php, foreach

由于某种原因，这段代码不会在迭代之间暂停，我希望它在加载缩略图之间暂停一秒钟。我究竟做错了什么？

```
foreach ($media->data as $data) {
  echo "<img src=\"{$data->images->thumbnail->url}\">";
  sleep(1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:58:28.360

如果您希望生成的代码在终止脚本之前到达客户端，您可能必须强制刷新它：

```
foreach ($media->data as $data) {
    echo "<img src=\"{$data->images->thumbnail->url}\">";
    @ ob_flush();
    @ flush();
    sleep(1);
} 
```

但这是非常愚蠢的，很可能会导致客户端出现格式问题。你为什么不像其他人一样一次发送整个页面？

或者为了更好地控制加载的内容和速度，请使用 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:55:12.410

包含的代码是服务器端代码。它在服务器上运行，生成 html，然后将其发送到客户端。所以很可能你会看到的唯一效果是你的页面加载速度会更慢。

为了获得您想要的效果，您需要使用 javascript，它在用户的浏览器中运行，可以动态生成带有暂停和动画等效果的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T01:55:28.957

这种延迟只会发生在服务器上。页面和图像文件仍然需要下载到客户端并在那里呈现。如果您想要实际加载图像的东西，两者之间有延迟，您可能需要研究加载图像的 JavaScript 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T01:57:20.260

仅发生在`sleep`服务器端（在输出到客户端计算机之前）。您需要通过 js 或 css3 选择器执行此操作

你最好的选择是使用 css3 选择器而不是 js，但你可以使用任何一个。

```
-webkit-transition: opacity 1s;
-moz-transition: opacity 1s;
transition: opacity 1s; 
```

# c++ - C++ & Allegro 4.2 - 我需要在窗口模式下拉伸图形

> ID：16073230
> 
> 赞同：1
> 
> 时间：2013-04-18T01:52:12.267
> 
> 标签：c++, pixel, stretch, allegro, windowed

我正在使用带有 Allegro 4.2 的 C++ 来构建 Windows 游戏。

我想要窗口模式下的可拉伸图形。

我喜欢为我的程序的用户提供很多选择；当我在窗口模式下玩游戏时，我总是讨厌我要么不允许拉伸窗口，要么窗口内的内容不会随之拉伸（这对于在高分辨率屏幕上玩的 640x480 尺寸的游戏来说很糟糕甚至不允许全屏播放；需要放大工具才能正确播放）。我想知道 Allegro 中是否有某种方法，或者是否有另一个编程库允许图形随着窗口本身的形状而拉伸。我已经知道如何让我的 Allegro 应用程序切换到全屏模式；我正在尝试改进窗口模式。

一个很大的原因是因为我的艺术风格是低分辨率艺术（我称之为“位图兄弟”风格）；它非常适合游戏，因为它有条理且易于编辑。我不想超过 640x480 来增加尺寸，因为它对于低分辨率艺术来说太高了，但是在窗口模式下我的窗口仍然太小。

我注意到 Allegro 5.0.8 有这行代码： `al_set_new_display_flags(ALLEGRO_WINDOWED | ALLEGRO_RESIZABLE);`

最后它说“ALLEGRO_RESIZABLE”，这可能是我正在寻找的功能吗？如果是这样，Allegro 从 4.2 到 5+ 的变化有多大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:42:22.770

Allegro 4 不支持用户可调整大小的窗口。

Allegro 5 确实如此（正如您所指出的），但它被完全重写并且根本不向后兼容。尽管如此，我还是强烈建议您切换到它，因为 Allegro 4 上的开发几乎已经死了。

# batch-file - 提取和使用系统输出（批处理）

> ID：16073231
> 
> 赞同：0
> 
> 时间：2013-04-18T01:52:14.780
> 
> 标签：batch-file

我想编写一个批处理文件，允许使用 A86 汇编器更快地组装多个汇编文件并查看结果。有两种情况，有组装错误和没有错误。

示例汇编器输入：

```
A86 FILE1.ASM FILE2.ASM FILE3.ASM FILE4.ASM 
```

案例1：错误。假设 FILE3.ASM 有错误，系统会在第 4 行输出：

```
Error messages inserted into FILE3.ASM 
```

情况2：没有错误。系统将在第 4 行输出：

```
Object: FILE1.BIN 
```

在案例 1 中，我想使用 Notepad++ 打开生成错误的文件，使用命令`notepad++ FILENAME.ASM`.

在案例 2 中，我想使用命令在十六进制编辑器中打开生成的对象`HxD FILENAME.BIN`。

如何从系统输出中提取错误/成功文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:24:14.620

对不起，我不熟悉`A86`，但我有一两个想法。如果`A86`成功返回零，失败返回非零，那么我会这样做：

```
@echo off
setlocal enabledelayedexpansion

if defined PROGRAMFILES(X86) (set "pf=%PROGRAMFILES(X86)%") else set "pf=%PROGRAMFILES%"

:: path to notepad++
set "npp=%pf%\Notepad++\notepad++.exe"

:: path to hxd (fix this, please)
set "hxd=%pf%\HXD\hxd.exe"

set idx=1

for /f "tokens=1-5*" %%A in (
    'A86 FILE1.ASM FILE2.ASM FILE3.ASM FILE4.ASM 2^>^&1'
) do (
    if !idx! equ 4 (
        rem if %errorlevel% is non-zero (is 1 or higher)
        if ERRRORLEVEL 1 (
            start "" "%npp%" %%E
        ) else (
            start "" "%hxd%" %%B
        )
    )
    echo(%%A %%B %%C %%D %%E %%F
    set /a "idx+=1"
) 
```

如果返回的 errorlevel`A86`不是一个可靠的指标，则更`if ERRORLEVEL 1`改为`if "%%J"==""`

你没有提到错误输出`A86`是通过 stderr 还是 stdout 发送的，所以我在`for`循环中将 stderr 重定向到 stdout `2^>^&1`。我不知道是否需要它，但如果不需要它应该不会伤害任何东西。

# gnuplot - gnuplot：在 y 轴上绘制一个有 4 列的文件

> ID：16073232
> 
> 赞同：37
> 
> 时间：2013-04-18T01:52:15.873
> 
> 标签：gnuplot, curves

我有一个包含 4 个数字（最小值、最大值、平均值、标准导数）的文件，我想用 gnuplot 绘制它。

样本：

```
24 31 29.0909 2.57451
12 31 27.2727 5.24129
14 31 26.1818 5.04197
22 31 27.7273 3.13603
22 31 28.1818 2.88627 
```

如果我有一列有 4 个文件，那么我可以这样做：

```
gnuplot "file1.txt" with lines, "file2.txt" with lines, "file3.txt" with lines, "file4.txt" with lines 
```

它将绘制 4 条曲线。我不关心 x 轴，它应该只是一个恒定的增量。

我怎么能请情节？我似乎找不到一种方法来让 4 条曲线和 1 个文件和 4 列，只是有一个不断增加的 x 值。

谢谢你。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-18T07:34:19.313

您可以像这样绘制同一文件的不同列：

```
plot 'file' using 0:1 with lines, '' using 0:2 with lines ... 
```

（`...`表示继续）。关于这个符号的一些注意事项：`using`指定要绘制哪一列，即第一`using`条语句中的第 0 列和第 1 列，第 0 列是一个伪列，它转换为数据文件中的当前行号。请注意，如果只有一个参数与`using`(eg `using n`) 一起使用，则它对应于说`using 0:n`（感谢您指出*mgilson*）。

如果您的 Gnuplot 版本足够新，您将能够使用 for 循环绘制所有 4 列：

```
set key outside
plot for [col=1:4] 'file' using 0:col with lines 
```

结果：

![for循环图](https://i.imgur.com/9pJibMM.png)

如果它们在数据文件中，Gnuplot 可以使用列标题作为标题，例如：

```
min max mean std
24 31 29.0909 2.57451
12 31 27.2727 5.24129
14 31 26.1818 5.04197
22 31 27.7273 3.13603
22 31 28.1818 2.88627 
```

和

```
set key outside
plot for [col=1:4] 'file' using 0:col with lines title columnheader 
```

结果是：

![带有列标题的 for 循环图](https://i.imgur.com/qj16Ang.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-04T09:27:44.190

只是要补充一点，您可以将 for 循环中的增量指定为第三个参数。如果要绘制每第 n 列，这很有用。

```
plot for [col=START:END:INC] 'file' using col with lines 
```

在这种情况下，它什么都没有改变，但无论如何：

```
plot for [col=1:4:1] 'file' using col with lines 
```

# objective-c - 如何在背景窗口上设置 [NSTextView selectedTextAttributes]？

> ID：16073233
> 
> 赞同：8
> 
> 时间：2013-04-18T01:52:21.587
> 
> 标签：objective-c, cocoa, nstextview

的默认值`[NSTextView selectedTextAttributes]`在我的应用程序中不可用，因为我允许用户选择与背景颜色几乎完全相同的颜色（语法突出显示）。

我已经写了一些数学来确定合适的颜色，并且可以使用它来设置它：

```
textView.selectedTextAttributes = @{
  NSBackgroundColorAttributeName: [NSColor yellowColor],
  NSForegroundColorAttributeName: [NSColor redColor]
  }; 
```

但是当窗口在后台时，它仍然使用系统默认的浅灰色。

我附上了上述代码的屏幕截图，其中包含活动窗口和非活动窗口。— 如何更改非活动窗口的选定文本背景颜色？

![积极的](https://i.stack.imgur.com/LPb3S.png) ![不活跃](https://i.stack.imgur.com/BXEZW.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-01-03T15:49:33.857

您可以通过覆盖 的绘图方法来覆盖颜色`NSLayoutManager`。

```
final class LayoutManager1: NSLayoutManager {
    override func fillBackgroundRectArray(rectArray: UnsafePointer<NSRect>, count rectCount: Int, forCharacterRange charRange: NSRange, color: NSColor) {
        let color1 = color == NSColor.secondarySelectedControlColor() ? NSColor.redColor() : color
        color1.setFill()
        super.fillBackgroundRectArray(rectArray, count: rectCount, forCharacterRange: charRange, color: color1)
        color.setFill()
    }
} 
```

并替换`NSTextView`它的布局管理器。

```
textView.textContainer!.replaceLayoutManager(layoutManager1) 
```

这是[完整的工作示例](https://github.com/eonil/CocoaProgrammaticHowtoCollection/blob/b32ca88d3561abda47de4a85a15cf5beb1db1b3b/ComponentUsages/NSTextViewWithCustomInactiveSelectionBackgroundColor/main.swift)。

* * *

正如@Kyle 询问原因`setFill`，我添加了一些更新。

来自苹果手册：

> ... charRange 和 color 参数仅用于提供信息；颜色已经设置在图形状态。如果出于任何原因修改它，则必须在从此方法返回之前恢复它。...

这意味着将其他颜色传入`super`call 无效，您只需要 `NSColor.setFill`使其与`super`call 一起工作。此外，手册要求将其设置回原始版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-11T02:33:15.127

不是当窗口在后台时，而是在未选择 NSTextView 时。我不认为你可以改变这种行为。 ![在此处输入图像描述](https://i.stack.imgur.com/OwWnx.png)

您可以创建一个属性字符串并将 NSBackgroundColorAttributeName 属性添加到所选文本失去焦点时的范围。即使失去焦点，属性字符串也会保持相同的颜色。

```
NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:@"hello world"];
[string addAttribute:NSForegroundColorAttributeName value:[NSColor redColor] range:NSMakeRange(1, 7)];
[string addAttribute:NSBackgroundColorAttributeName value:[NSColor yellowColor] range:NSMakeRange(1, 7)];
[self.myTextView insertText:string]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/4Ywhe.png)

**由 Abhi Beckert 编辑：**这就是我实现这个答案的方式（注意我还必须禁用内置的选定文本属性，否则它们会覆盖我设置的那些）：

```
@implementation MyTextView

- (id)initWithCoder:(NSCoder *)aDecoder
{
  if (!(self = [super initWithCoder:aDecoder]))
    return nil;

  // disable built in selected text attributes
  self.selectedTextAttributes = @{};

  return self;
}

- (id)initWithFrame:(NSRect)frameRect textContainer:(NSTextContainer *)container
{
  if (!(self = [super initWithFrame:frameRect textContainer:container]))
    return nil;

  // disable built in selected text attributes
  self.selectedTextAttributes = @{};

  return self;
}

- (void)setSelectedRanges:(NSArray *)ranges affinity:(NSSelectionAffinity)affinity stillSelecting:(BOOL)stillSelectingFlag
{
  // remove from old ranges
  for (NSValue *value in self.selectedRanges) {
    if (value.rangeValue.length == 0)
      continue;

    [self.textStorage removeAttribute:NSBackgroundColorAttributeName range:value.rangeValue];
  }

  // apply to new ranges
  for (NSValue *value in ranges) {
    if (value.rangeValue.length == 0)
      continue;

    [self.textStorage addAttribute:NSBackgroundColorAttributeName value:[NSColor yellowColor] range:value.rangeValue];
  }

  [super setSelectedRanges:ranges affinity:affinity stillSelecting:stillSelectingFlag];
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T09:35:03.790

您可以通过从[NSLayoutManager覆盖](https://developer.apple.com/documentation/uikit/nslayoutmanager)[layoutManagerOwnsFirstResponder(in:)](https://developer.apple.com/documentation/appkit/nslayoutmanager/1403026-layoutmanagerownsfirstresponder)来指定您的 NSTextView 应被视为第一响应者，并且选择将使用您定义的属性。

在**Swift 5.1**中将是：

```
override func layoutManagerOwnsFirstResponder(in window: NSWindow) -> Bool {
    true
} 
```

# c++ - 表达式在指针上必须具有整数或无范围枚举类型

> ID：16073238
> 
> 赞同：-1
> 
> 时间：2013-04-18T01:52:41.460
> 
> 标签：c++

我正在尝试打开一个链接来记录用户名`uNameAddr`。
网址：`http://zzz.com?username=MyNameIsJack`。
所以我需要这样做`"http://zzz.com?username=" + uNameAddr`。
但我遇到了一个错误。我想我的语法似乎错误？

```
curl_easy_setopt(curl, CURLOPT_URL, "http://zzz.com?username=" + uNameAddr); 
```

整个代码：

```
char *uNameAddr = (char*) ExeBaseAddress + 0x34F01C;
printf("%s \n", uNameAddr);

CURL *curl;
CURLcode res;

curl = curl_easy_init();
if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://zzz.com?username=" + uNameAddr);

    res = curl_easy_perform(curl);

    curl_easy_cleanup(curl);
} 
```

* * *

*更新*

所以我尝试了：

```
char username[512];
strcpy ( username, "http://zzz.com?username=" );
strcat ( username, uNameAddr ); 
```

但是在处理这部分时应用程序崩溃了。

```
curl_easy_setopt(curl, CURLOPT_URL, username); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:08:57.127

```
 #include <iostream>
 #include <string>

 using namespace std;
 ...
 ...

 string str1 = "Hello world.";
 const char* cstr = " Goodbye.";

 string str2(cstr);
 string combined = str1 + str2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:08:44.940

```
char username[512];
strcpy ( username, "http://zzz.com?username=" );
strcat ( username, uNameAddr ); 
```

> 但是在处理这部分时应用程序崩溃了。

不，编译器会给你一个错误，说在你进行函数调用之前 uNameAddr 是未声明的。事情是这样的：C++ 不是一种你可以随便乱搞的语言。这是一种非常复杂的语言。编码时不能捏造东西——你必须知道你输入的内容是完全正确的。

我建议您忘记您的函数调用并尝试获取一个仅打印出您的字符串的示例。一旦你得到它的工作，你可以尝试用字符串调用你的函数。

# c# - 实体框架代码优先迁移问题与链接表

> ID：16073242
> 
> 赞同：0
> 
> 时间：2013-04-18T01:53:14.707
> 
> 标签：c#, entity-framework, .net-4.5, entity-framework-migrations

我首先使用 EF 5.0 代码，通过 PM 控制台使用自动迁移。

我正在尝试将第四次迁移应用于项目，并且基于约定的链接表命名导致它们被删除并使用不同的名称重新创建。在之前的任何迁移过程中都没有发生这种情况。

例子 ：

我有 2 个类用户和站点。

**初始创建迁移**

按照惯例，这创建了一个名为“UserSites”的链接表。

```
CreateTable(
           "dbo.UserSites",
            c => new
                {
                    User_Id = c.Guid(nullable: false),
                    Site_Id = c.Guid(nullable: false),
                })
            .PrimaryKey(t => new { t.User_Id, t.Site_Id })
            .ForeignKey("dbo.Users", t => t.User_Id, cascadeDelete: true)
            .ForeignKey("dbo.Sites", t => t.Site_Id, cascadeDelete: true)
            .Index(t => t.User_Id)
            .Index(t => t.Site_Id); 
```

一切正常。

跳到今天：

**第四次迁移**

这将删除 UserSites 链接表并创建一个 SiteUsers 链接表。

显然不理想！

```
public override void Up()
    {
        DropForeignKey("dbo.UserSites", "User_Id", "dbo.Users");
        DropForeignKey("dbo.UserSites", "Site_Id", "dbo.Sites");
        DropIndex("dbo.UserSites", new[] { "User_Id" });
        DropIndex("dbo.UserSites", new[] { "Site_Id" });

        CreateTable(
            "dbo.SiteUsers",
            c => new
                {
                    Site_Id = c.Guid(nullable: false),
                    User_Id = c.Guid(nullable: false),
                })
            .PrimaryKey(t => new { t.Site_Id, t.User_Id })
            .ForeignKey("dbo.Sites", t => t.Site_Id, cascadeDelete: true)
            .ForeignKey("dbo.Users", t => t.User_Id, cascadeDelete: true)
            .Index(t => t.Site_Id)
            .Index(t => t.User_Id);

        DropTable("dbo.UserSites"); 
```

我无法解释这一点。

自第一次实施以来，这两个类都没有改变......我想如果我应用它，我将遭受数据丢失。

所以对于问题：

1.  我可以从迁移脚本中删除此代码并继续使用我现有的结构吗？

2.  是否有一个我不知道的问题可能导致了这种情况？

非常感谢任何/所有帮助！

编辑：

我只是简单地定义了如下类，并允许按照约定构建模型。我已经更改了 dbcontext 的命名空间，但仅此而已！让我迷惑不解。

```
public class User
{
   public virtual ICollection<Site> Sites { get; set; }
}

public class Site
{
    public virtual ICollection<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:03.563

这是一个奇怪的情况。你有没有改变你的任何东西`DbContext`？你如何在你的类中声明`Sites`和`Users`属性？

我认为您应该在您的数据库上下文中显式添加多对多关系，如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);

    modelBuilder.Entity<User>()
                .HasMany<Sites>(u => u.Sites)
                .WithMany(e => e.Users)
                .Map(
                    m =>
                        {
                            m.MapLeftKey("User_Id");
                            m.MapRightKey("Site_Id");
                            m.ToTable("UserSites");
                        });

    //for prevent error 'The referential relationship will result in a cyclical reference that is not allowed'
    modelBuilder.Entity<Sites>()
                .HasRequired(s => s.User)
                .WithMany()
                .WillCascadeOnDelete(false);
} 
```

然后删除您的第 4 次迁移并尝试再次添加它

如果您删除迁移代码，您将发现导航错误，例如外键问题、不正确的表名等。

# iphone - 在 UIView 中绘制三角形

> ID：16073246
> 
> 赞同：0
> 
> 时间：2013-04-18T01:53:41.013
> 
> 标签：iphone, ios, objective-c, drawrect

我有一个三角形，我试图`drawRect`在 a中绘制`UIView`，一切似乎大部分都有效，除非我试图绘制一个超出视图边界的三角形。我认为我没有采取正确的方法，我目前正在尝试将三角形缩放到视图，而不是将视图缩放到三角形，但我不知道如何做得更好......任何帮助，在这里是我现在的`drawRect`：

```
- (void)drawRect:(CGRect)rect
{
IMTriangle *triangle = [self.dataSource triangle];
if (!triangle) return;
NSLog(@"incoming triangle %@", triangle);
IMTriangle *drawTri = [[IMTriangle alloc] init];
drawTri.shouldUseDegrees = NO;

CGRect bounds = [self bounds];

/*Find point A and B, 
 pointA is the lower left side, pointB is the lower right side*/
CGPoint pointA = CGPointMake(  bounds.origin.x + bounds.size.width * .05 , bounds.origin.y+bounds.size.height - bounds.size.height*.05  );
CGPoint pointB = CGPointMake(  bounds.origin.x + bounds.size.width * .95 , bounds.origin.y+bounds.size.height - bounds.size.height*.05  );

//find the distance between Point A and B, (sideC)
CGFloat c = pointB.x - pointA.x;
NSLog(@"side c display length = %f" , c);
NSLog(@"point A = %f, %f, point B = %f, %f", pointA.x, pointA.y, pointB.x ,pointB.y);

//use distance from of the new side C and the angles of the passed in triangle to find pointC
drawTri.sideC = c;
drawTri.angleA = triangle.angleA;
drawTri.angleB = triangle.angleB;
[drawTri solve];

NSLog(@"drawTri %@" , drawTri);
CGPoint pointC = CGPointMake( (pointA.x + (drawTri.sideB * cos(drawTri.angleA )) ) , (pointA.y - ([drawTri height])));

/*****************************************************************************************************/
//THIS SEEMS LIKE THE APROPRIATE POINT TO SCALE THE TRIANGLE (AGAIN) IF IT IT WILL EXCEED IT'S BOUNDS//
/*****************************************************************************************************/

if (pointC.x - pointB.x > drawTri.sideC) {
    //do something, 
}
else if (pointB.x - pointA.x > drawTri.sideC)
{
    //do something else. 
}

//Draw the triangle. 

//get the currant drawing context, 
CGContextRef ctx = UIGraphicsGetCurrentContext();

CGContextSetLineWidth(ctx, LINE_WIDTH);
[[UIColor blackColor] setStroke];

//plot it's path
CGContextMoveToPoint (ctx, pointA.x, pointA.y);
CGContextAddLineToPoint(ctx, pointB.x, pointB .y);

CGContextAddLineToPoint(ctx, pointC.x, pointC.y);
CGContextClosePath(ctx);
CGContextStrokePath(ctx);

[self setNeedsDisplay];

} 
```

# ruby-on-rails - 跟踪活动记录更改及其关联的历史记录

> ID：16073248
> 
> 赞同：0
> 
> 时间：2013-04-18T01:53:44.830
> 
> 标签：ruby-on-rails, activerecord, history

我想跟踪活动记录和关联的历史记录。我有一个`many to many` 协会：

```
class BookList
  has_many :book_list_items
  has_many :books, through: :book_list_items
end

class BookListItem
  belongs_to :book
  belongs_to :book_list

  attr_accessable :position
end

class Book
  has_many :book_list_items
  has_many :book_lists, through: :book_list_items
end 
```

我如何跟踪这样的历史`BookList`：

*   将书添加到书单
*   从书单中删除书
*   更新一本书在书单中的位置

我如何实现这个结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T12:54:00.393

[http://railscasts.com/episodes/255-undo-with-paper-trail](http://railscasts.com/episodes/255-undo-with-paper-trail)

这是一个很棒的 Rails 演员阵容，根据您提供的信息对您很有帮助

# php - 动态构建水平菜单

> ID：16073251
> 
> 赞同：-1
> 
> 时间：2013-04-18T01:54:10.173
> 
> 标签：php, html, mysql

我有这个 JavaScript 代码，它允许我创建一个带有子菜单的水平菜单，如下所示：

```
<ul id="menu">
<li>Menu 1
  <ul>
   <li>Sub Menu 1</li>
  </ul>
</li>
</ul> 
```

我可以创建任意数量的子菜单，问题是我正在使用 PHP 从 MySQL 数据库中获取链接，但不知道如何动态构建这些子菜单，而无需一遍又一遍地手动检查子菜单. 例如在 MySQL 表中：

字段：Menu_ID Menu_Name Menu_Link Menu_ParentID

所以菜单 ID 只是一个自动增量，menu_parentid 允许我将子菜单名称/链接分配给父菜单。但为了做到这一点，我目前对 2 个子菜单检查执行此操作：

```
$query = "SELECT * FROM site_menu WHERE Menu_ParentID = 0";

foreach($query AS $q)
{
//run through the results
$query2 = "SELECT * FROM site_menu WHERE Menu_ParentID = $q['id']";

foreach($query2 AS $q2)
{
//run through the results
}
} 
```

如您所见，我必须查询两次才能获得第一个子菜单，如果有第三个子菜单怎么办？我必须运行 3 个查询吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:11:41.507

也许一个函数或一个do..while循环可能是有序的？概念证明：

```
function menuQuery($id)
{
    $query = "SELECT * FROM site_menu WHERE Menu_ParentID = $id";

    if ($query) {
        foreach($query AS $q) {
            //run through the results
            menuQuery($q->id);
        }
    }
}

//initial call of top level menu items
menuQuery(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:43:45.607

```
$data=array(
array('Menu_ID'=>1, 'Menu_Name'=>'Catalog', 'Menu_Link'=>'#', 'Menu_ParentID'=>0),
array('Menu_ID'=>2, 'Menu_Name'=>'Reports', 'Menu_Link'=>'#', 'Menu_ParentID'=>0),
array('Menu_ID'=>3, 'Menu_Name'=>'Products','Menu_Link'=> '#','Menu_ParentID'=> 1),
array('Menu_ID'=>4, 'Menu_Name'=>'Sales','Menu_Link'=> '#', 'Menu_ParentID'=>2),
array('Menu_ID'=>5, 'Menu_Name'=>'Customers','Menu_Link'=> '#', 'Menu_ParentID'=>2),
array('Menu_ID'=>6, 'Menu_Name'=>'Tvs','Menu_Link'=> '#','Menu_ParentID'=> 3));

print_r(loop_menu($data));

// Menu_ID Menu_Name Menu_Link Menu_ParentID
function loop_menu($rows,$parent = 0){
 $arr=array();
 $i=0;
  foreach ($rows as $row)
  { 
        if (array_key_exists('Menu_ParentID',$row) && $row['Menu_ParentID'] == $parent){

                if(array_key_exists($i,$arr)){
                    $arr[$i]=array();
                }
                $arr[$i]['data']=$row;
                $arr[$i]['child']= loop_menu($rows,$row['Menu_ID']);
                $i++;
        }
  }
    return $arr;
} 
```

然后

```
Array
(
    [0] => Array
        (
            [data] => Array
                (
                    [Menu_ID] => 1
                    [Menu_Name] => Catalog
                    [Menu_Link] => #
                    [Menu_ParentID] => 0
                )

            [child] => Array
                (
                    [0] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 3
                                    [Menu_Name] => Products
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 1
                                )

                            [child] => Array
                                (
                                    [0] => Array
                                        (
                                            [data] => Array
                                                (
                                                    [Menu_ID] => 6
                                                    [Menu_Name] => Tvs
                                                    [Menu_Link] => #
                                                    [Menu_ParentID] => 3
                                                )

                                            [child] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        )

    [1] => Array
        (
            [data] => Array
                (
                    [Menu_ID] => 2
                    [Menu_Name] => Reports
                    [Menu_Link] => #
                    [Menu_ParentID] => 0
                )

            [child] => Array
                (
                    [0] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 4
                                    [Menu_Name] => Sales
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 2
                                )

                            [child] => Array
                                (
                                )

                        )

                    [1] => Array
                        (
                            [data] => Array
                                (
                                    [Menu_ID] => 5
                                    [Menu_Name] => Customers
                                    [Menu_Link] => #
                                    [Menu_ParentID] => 2
                                )

                            [child] => Array
                                (
                                )

                        )

                )

        )

) 
```

然后将数组之类的代码编码为 ul

[http://sandbox.onlinephpfunctions.com/code/2b3ab04f959413ebf75b65034edd60da61ed0020](http://sandbox.onlinephpfunctions.com/code/2b3ab04f959413ebf75b65034edd60da61ed0020)

更新

另一种数组样式

```
$arr[$i]['data'] = $row;
$arr[$i]['child']= loop_menu($rows,$row['Menu_ID']); 
```

改成

```
$row['child'] = loop_menu($rows,$row['Menu_ID']);
$arr[$i] = $row; 
```

得到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:22:02.300

1.  编写一个查询，按顺序排列`Menu_ParentID`
2.  处理一次查询一行。您将从根开始，因为它的 ID 为 0。对于每一行，遍历所有其他行并找到该行的子行，即父 ID 等于您正在处理的行的 ID 的那些行。使用此过程构建数据结构，如下所示：

    ```
    [ Root Item 1, [Child1, Child2, [SubChild1, SubChild2], Child3], Root Item 2, ...] 
    ```

3.  像这样编写一个辅助函数（未经测试）：

    ```
    function displayItem($item) {
      if (is_array($item)) {
        $html = '<li><ul>';
        foreach ($item as $subitem) $html .= displayItem($subItem);
        $html .= '</ul></li>';
        return $html;
      }
      else return '<li>' . $item . '</li>';
    } 
    ```

4.  循环遍历您在 2\. 中创建的结构，为每个元素调用 displayItem

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:16:24.630

存储网站导航树的最佳技术称为[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)。

这里有一个很好的示例实现：[Dealing with nested sets in mysql?](https://stackoverflow.com/questions/6299905/dealing-with-nested-sets-in-mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T02:01:01.837

我建议在您的菜单表中放置一个排序或排序列。然后，您可以使用排序列拉回所有结果。这将允许您订购菜单的顶层，子菜单项位于彼此下方。

这样，您可以只使用数据库结果创建一个循环，并根据是否填充 parent_id 来选择要编写的菜单部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T04:02:02.693

这是一个示例，它仅在数据库上运行一次，并且仅使用一个简单的递归函数，它就可以分层地带来数组。

```
# table
CREATE TABLE foo (
    menu_id int not null auto_increment primary key, 
    menu_name varchar(255) not null, 
    menu_link varchar(255) not null default '#',
    menu_parent_id int not null default 0
);

# data 
INSERT INTO `test`.`foo`
    (`menu_id`,`menu_name`,`menu_link`,`menu_parent_id`)
VALUES
    (1, 'Catalog', '#', 0),
    (2, 'Reports', '#', 0),
    (3, 'Products', '#', 1),
    (4, 'Sales', '#', 2),
    (5, 'Customers', '#', 2),
    (6, 'Tvs', '#', 3); 
```

这是您的 php 代码：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'root', '****');

$stmt = $db->query("SELECT * FROM foo");
$resultSet = $stmt->fetchAll(PDO::FETCH_ASSOC);

$setMenu = function ($data, $index = 0) use (&$setMenu){
                $menu = array();

        foreach ($data as $row) {
            if ((int) $row['menu_parent_id'] !== $index)
                continue;

            $menu[$row['menu_id']] = array(
                'name' => $row['menu_name'],
                'link' => $row['menu_link'],
                'submenus' => $setMenu($data, (int) $row['menu_id']),
            );
        }

        return $menu;
};

// your menu 
$menu = $setMenu($resultSet, 0);

var_export($menu); 
```

它会给你准备好进入你的列表（ul）的信息。

干杯!

# function - Haskell 的 Int 和 Num 类型

> ID：16073254
> 
> 赞同：1
> 
> 时间：2013-04-18T01:54:18.423
> 
> 标签：function, variables, haskell, types

我有下面的代码来获取参数来设置一些偏移时间。

```
setOffsetTime :: (Ord a, Num b)=>[a] -> b
setOffsetTime [] = 200
setOffsetTime (x:xs) = read x::Int 
```

但是编译器说“**无法从 setOffsetTime :: (Ord a, Num b) => [a] -> b 的类型签名绑定的上下文 (Ord a, Num b) 中推断出 (b ~ Int)**

此外，我发现如果我希望 float 作为默认值，我无法使用 200.0。编译器说“无法从文字 '200.0' 推导出（小数 b）”

任何人都可以向我展示一些代码作为函数（不是在前奏中），它需要一个 arg 来存储一些变量，以便我可以在其他函数中使用？我可以在 main = do 中做到这一点，但希望使用一个优雅的函数来实现这一点。Hasekll 中是否有任何全局常量？我google了一下，好像没有。

我想用 Haskell 来替换我的一些 python 脚本，虽然这并不容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T04:08:54.003

我认为这种类型签名并不完全意味着您认为它的作用：

`setOffsetTime :: (Ord a, Num b)=>[a] -> b`

意思是“如果你给我一个 type 的值，对于**你**`[a]`选择的任何类型的成员，我会给你一个 type 的值，对于**你**选择的任何类型的成员班级”。*调用者*可以选择每次调用时使用的特定类型。`a` **`Ord``b``b`**`Num`*`a``b``setOffsetTime`*****

 *****因此，尝试返回类型`Int`（或`Float`，或任何特定类型）的值是没有意义的。`Int`确实是类型类的成员`Num`，但它不是类型类的*任何*成员`Num`。根据该类型签名，我应该能够创建一个`Num`您以前从未见过的全新实例，`setOffsetTime`从您的模块导入，并调用它以获取我的新类型的值。

要得出一个可接受的返回值，您*只能*使用同样返回任意`Num`. 您不能使用特定具体类型的任何功能。

存在类型本质上是一种允许被调用者为类型变量选择值的机制（然后调用者必须被写入才能工作，而不管该类型是什么），但这并不是你真正想要进入的东西'还在学习。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T02:48:48.580

如果您确信您的函数的实现是正确的，即它应该将其输入列表中的第一个元素解释为要返回的数字，`200`如果没有这样的参数则返回，那么您只需要确保类型签名匹配该实现（它现在不这样做）。

为此，例如，您可以删除类型签名并要求 ghci 推断类型：

```
$ ghci
GHCi, version 7.6.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> :{
Prelude| let setOffsetTime []       = 200
Prelude|     setOffsetTime (x : xs) = read x :: Int
Prelude| :}
Prelude> :t setOffsetTime
setOffsetTime :: [String] -> Int
Prelude> :q
Leaving GHCi.

$ 
```

确实，

```
setOffsetTime          :: [String] -> Int
setOffsetTime []       =  200
setOffsetTime (x : xs) =  read x :: Int 
```

编译得很好。

如果您想要更通用的类型，可以`:: Int`从第二种情况中删除归属。然后上面的方法告诉你可以写

```
setOffsetTime          :: (Num a, Read a) => [String] -> a
setOffsetTime []       =  200
setOffsetTime (x : xs) =  read x 
```

* * *

从您添加到问题的评论中，我了解到您希望您的函数返回一个浮点数。在这种情况下，你可以写

```
setOffsetTime          :: [String] -> Float
setOffsetTime []       =  200.0
setOffsetTime (x : xs) =  read x 
```

或者，更一般地说：

```
setOffsetTime          :: (Fractional a, Read a) => [String] -> a
setOffsetTime []       =  200.0
setOffsetTime (x : xs) =  read x 
```*****

# .htaccess - htaccess rewrite 没有按预期工作只是在地址栏中更改我的地址，根本没有重写

> ID：16073260
> 
> 赞同：0
> 
> 时间：2013-04-18T01:55:12.200
> 
> 标签：.htaccess, mod-rewrite

我的文件夹/文件结构为：

```
rootFolder/
  lowRes/lowres.php
  hiRes/hires.php
  sys.php 
```

基本上，我想做重写，例如当用户调用页面site.com/img_0001_hq.html，.htaccess 将其重写为sys.php?1=img_0001_hq。此外，我想将可接受的 emdings 限制为“.html”和“/”，如果不存在这样的结尾，我想调用 sys.php?1=p_404。重写按预期进行，但是当涉及到错误时......

当我调用页面 site.com/hiRes/hires.php 或 site.com/lowRes/lowres.php 时，重写不起作用，脚本（hires.php 和 lowres.php）运行，并报告错误，通常缺少变量来自未触发的 sys.php。此外，当我调用页面 site.com/hiRes 或 site.com/lowRes 时，sys.php 运行，但是，错误。此外，调用这些地址时，浏览器中的地址会更改为 site.com/hiRes/?1=p_404 或 site.com/lowRes/?1=p_404。到底他妈发生了什么？！:D

哦，是的，我的 .htaccess 看起来像这样：

```
IndexIgnore *
RewriteEngine on
RewriteRule ^(.*)(/|.html)$ sys.php?1=$1 [L]
RewriteRule ^(.*)$ sys.php?1=p_404 [L] 
```

我要疯了... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:27:02.880

尝试添加一些排除 sys.php 的条件（以及您不想重写的任何其他内容）。可能发生的情况是，在第一次重写后，URI 变为`sys.php`并通过重写引擎放回（mod_rewrite 将执行此操作，直到 URI 停止更改或达到内部重定向的最大数量，导致 500 服务器错误）：

```
IndexIgnore *
RewriteEngine on

RewriteCond %{REQUEST_URI} !sys\.php
RewriteRule ^(.*)(/|.html)$ sys.php?1=$1 [L]

RewriteCond %{REQUEST_URI} !sys\.php
RewriteRule ^(.*)$ sys.php?1=p_404 [L] 
```

# django - 从站点地图的模型中覆盖 get_absolute_url

> ID：16073262
> 
> 赞同：0
> 
> 时间：2013-04-18T01:55:25.080
> 
> 标签：django, models, subclassing, sitemap.xml

嘿，我有一个可以通过 2 个不同的 url 访问的模型（取决于域）。我在视图和模板中像这样使用它们没有问题。

在构建站点地图时，get_absolute_url 不应该返回相同的结果，所以我想：我可以子类化模型并覆盖 get_absolute_url 方法：

```
class FanpitConcert(BandtasticConcert):
    def get_absolute_url(self):
        return ('event_checkout',(),{'artist_slug':self.slug_name,
                                     'year': self.get_date().year,
                                     'month': self.get_date().month,
                                     'day': self.get_date().day,
                                    })
    class Meta:
        abstract = True 
```

然后将这个子类模型用于站点地图类

```
class ConcertsSiteMap(Sitemap):
    def items(self):
        return FanpitConcert.objects.all().filter(app='Fanpit') 
```

但是当我访问 /sitemap.xml django 仍然从原始模型调用 get_absolute_url

django 在这里有什么黑魔法吗？还是我错过了一些明显的东西？

更新

我尝试删除 abstract = True 部分并使用 class Meta: db_table = 'same_table_as_base_model'

但是现在 django 抱怨找不到列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:13:06.163

在这种情况下，最好使用代理模型，而不是抽象。

所以子类模型会有

```
class Meta:
    proxy = True 
```

更多关于代理模型的信息在[这里](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)。

# javascript - 我需要 javascript 密码验证方面的帮助吗？

> ID：16073267
> 
> 赞同：1
> 
> 时间：2013-04-18T01:55:57.583
> 
> 标签：javascript, validation

我正在研究密码验证脚本。

以下代码适用于数字、大小写字母。

唯一的问题。按空格键，长度大于8，显示返回true。

不允许只有特殊字符。

```
$("#password").keyup(function () {
    var validated = true;
    if (this.value.length < 8)
        validated = false;
    if (!/\d/.test(this.value))
        validated = false;
    if (!/[a-z]/.test(this.value))
        validated = false;
    if (!/[A-Z]/.test(this.value))
        validated = false;
    if (!/[@#$%\&^\-\+=!*.?~]/.test(this.value))
        validated = false;
    if (/[^0-9a-zA-Z@#$%^&+=!*,.?~]/.test(this.value))
        validated = false;
    $('#password_strength').text(validated ? "Good" : "Too Weak"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:01:15.293

使用正则表达式检查密码中的符号时，您需要对它们进行转义，以便将它们视为文字字符，而不是字符的正则表达式含义。有关更多信息，我建议您查看：

[http://www.javascriptkit.com/javatutors/redev2.shtml](http://www.javascriptkit.com/javatutors/redev2.shtml)

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# mysql - 创建表时的 SQL 整数范围

> ID：16073268
> 
> 赞同：3
> 
> 时间：2013-04-18T01:55:57.943
> 
> 标签：mysql, integer, range

我试图在我的一个创建语句中为我的 INT 提供一系列可能的值，即

```
创建表站点（
    **SiteID INT (1,4),**
    UserID INT UNSIGNED 不为空，
    名称 varchar(128) 唯一非空，
    外键（UserID）引用用户（UserID），
    主键 (SiteID)
);

```

我忘记了您用于范围的语法，而且当我尝试按原样使用它时，我很确定我错了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T02:31:18.300

**作者注**：此答案的前两部分不正确。我认为 MySQL 支持`CHECK`约束，但它没有。还是不行。要将列限制为简单的值列表，请使用`ENUM`此答案末尾的方法。如果逻辑更复杂（值范围、基于另一列的值等），唯一的 MySQL 选项是触发器。

* * *

如果它是一个，你需要一个`CHECK`约束`INT`：

```
CREATE TABLE Site (
  SiteID INT,
  CONSTRAINT SiteID_Ck CHECK (SiteID IN (1, 2, 3, 4)),
  ... and the rest 
```

或者：

```
CREATE TABLE Site (
  SiteID INT,
  CONSTRAINT SiteID_Ck CHECK (SiteID BETWEEN 1 AND 4),
  ... and the rest 
```

或者，如果您可以使用字符串 SiteID，那么：

```
CREATE TABLE Site (
  SiteID ENUM('1', '2', '3', '4'),
  ... and the rest 
```

# python - (Python) 用换行符解析制表符分隔的字符串

> ID：16073272
> 
> 赞同：0
> 
> 时间：2013-04-18T01:56:34.053
> 
> 标签：python

我正在尝试读取一个以制表符分隔的文件，但字段可能包含换行符，我想维护具有换行符的字段。我当前的实现从每个“\n”创建新字段。

我已经尝试了 csv 模块，只是在 "\t" 上拆分，但我正在寻找的内容没有成功。以下是给定文件的示例行：

*Field_1 \t Field_2 \t Field_3 \n 附加文本 \n 更多文本 \t Field_4*

我想从上面的数据中生成一个包含 4 个元素的列表。

*["Field_1", "Field_2", "Field3 \n Additional Text \n More text", "Field_4"]*

任何想法或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:59:43.727

您是否尝试过像这样在标签上拆分？

```
data = 'Field_1 \t Field_2 \t Field_3 \n Additional Text \n More text \t Field_4'
print data.split('\t') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:26:12.907

替换`fileName`为您正在读取的文件的路径：

```
inFile = open(fileName, "r")
rawData = inFile.read() # Entire file's contents as one multiline string (if there's a line break)
data = rawData.split("\t")
inFile.close() 
```

还有使用`with`File I/O 语句的选项（通常推荐）：

```
with open(fileName, "r") as inFile:
    rawData = inFile.read() # Entire file's contents as one multiline string (if there's a line break)
    data = rawData.split("\t")
# you can omit the inFile.close() statement. 
```

使用该`with`语句，如果在运行时出现错误，打开的文件流将自动关闭，但对于学习 File I/O 的人来说，它是如何工作的就不太清楚了。

# c# - CRC-CCITT (0xFFFF) 缺少什么？

> ID：16073276
> 
> 赞同：2
> 
> 时间：2013-04-18T01:57:11.370
> 
> 标签：c#, crc16

基于[**在线 CRC 计算**](http://www.lammertbies.nl/comm/info/crc-calculation.html)，当我输入十六进制字符串数据 =

> 503002080000024400003886030400000000010100

我得到结果**CRC-CCITT (0xFFFF)** =

> 0x354E（预期结果）

.

我使用下面的代码，但**CalcCRC16()**的结果是**0xACEE**。下面缺少什么脚本？

```
using System;
using System.Windows.Forms;
using System.Runtime.Remoting.Metadata.W3cXsd2001;
using System.Diagnostics;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {

        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) {
            string result = CalcCRC16("503002080000024400003886030400000000010100");            
            Debug.Print(result);
            // result = ACEE
            // result expected = 354E
        }

        // CRC-CCITT (0xFFFF) with poly 0x1021
        // input (hex string) =  "503002080000024400003886030400000000010100"
        // result expected (hex string) = "354E"
        public string CalcCRC16(string strInput) {
            ushort temp = 0;
            ushort crc = 0xFFFF;
            byte[] bytes = GetBytesFromHexString(strInput);
            for (int j = 0; j < bytes.Length; j++) {
                crc = (ushort)(crc ^ bytes[j]);
                for (int i = 0; i < 8; i++) {
                    if ((crc & 0x0001) == 1)
                        crc = (ushort)((crc >> 1) ^ 0x1021);
                    else
                        crc >>= 1;
                }
            }
            crc = (ushort)~(uint)crc;
            temp = crc;
            crc = (ushort)((crc << 8) | (temp >> 8 & 0xFF));
            return crc.ToString("X4");
        }

        public Byte[] GetBytesFromHexString(string strInput) {
            Byte[] bytArOutput = new Byte[] { };
            if (!string.IsNullOrEmpty(strInput) && strInput.Length % 2 == 0) {
                SoapHexBinary hexBinary = null;
                try {
                    hexBinary = SoapHexBinary.Parse(strInput);
                    if (hexBinary != null)
                        bytArOutput = hexBinary.Value;
                }
                catch (Exception ex) {
                    MessageBox.Show(ex.Message);
                }
            }
            return bytArOutput;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:54:48.560

我找到了答案，我将在这里分享..可能对其他人有用。

> str输入 = 503002080000024400003886030400000000010100
> 
> 初始 = 0xFFFF
> 
> 聚 = 0x1021
> 
> str输出 = 354E
> 
> 参考 =[在线 CRC 计算](http://www.lammertbies.nl/comm/info/crc-calculation.html)

```
public string CalcCRC16(string strInput) {
    ushort crc = 0xFFFF;
    byte[] data = GetBytesFromHexString(strInput);
    for (int i = 0; i < data.Length; i++) {
        crc ^= (ushort)(data[i] << 8);
        for (int j = 0; j < 8; j++) {
            if ((crc & 0x8000) > 0)
                crc = (ushort)((crc << 1) ^ 0x1021);
            else
                crc <<= 1;
        }
    }
    return crc.ToString("X4");
}

public Byte[] GetBytesFromHexString(string strInput) {
    Byte[] bytArOutput = new Byte[] { };
    if (!string.IsNullOrEmpty(strInput) && strInput.Length % 2 == 0) {
        SoapHexBinary hexBinary = null;
        try {
            hexBinary = SoapHexBinary.Parse(strInput);
            if (hexBinary != null) {
                bytArOutput = hexBinary.Value;
            }
        }
        catch (Exception ex) {
            MessageBox.Show(ex.Message);
        }
    }
    return bytArOutput;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T07:07:12.447

这是一个适用于我的应用程序的示例。我有点挣扎，现在我知道了，因为我必须使用 char ptrs 而不是 16 位 int 指针（因为 CCIT 是 LSB 顺序优先，所以我们从缓冲区中选择 1 个字节，将其移动 8 次使其成为 16 位以验证上MSB 位 0x8000)。

当人们与 16 位 CRC 作斗争时发现的大多数原因（而 8 位大部分时间都有效）：

*   缓冲区应该由 8bit ptr 调用
*   在 XOR 之前移动！
*   永远不要使用 int 或 unsigned int.. 而是使用 short！我的应用程序在 16 位和 32 位 Microchip PIC 上运行，使用 int 在 16 位 pic 上产生 16 位值，在 32 位平台上产生 32 位值（这么多零！）。

BOOL = 无符号字符。UINT16 = 无符号短。该函数在代码中运行，因此不是 while/forloop。完成后，CRC 被复制到 *crc 指向的地址。这样所有其他任务（M95 调制解调器、MCP 的 I2C、Flash 日志、TCP/IP 等都将在没有太大延迟的情况下处理）。

```
BOOL CRC_16(UINT16 ui16_Bytes, char *src, UINT16 *crc)
{    
    static BOOL bNew = FALSE;
    static UINT16  remainder = 0;   
    static UINT16 i = 0;
    static UINT16 ui16_Loc_bytes;
    static char *ptr;
    static char locData;
    if(!bNew)
    {
    ui16_Loc_bytes = ui16_Bytes;
    ptr = src;
    locData = *ptr;
    i = 8;
    remainder = 0x0000;
    bNew = TRUE;
    }
    if(ui16_Loc_bytes)
    {
    if(i == 8)
    {
        remainder ^= (((UINT16)locData)<<8);                //Only 8bits at a time filled with zeros
    }
    if(i)
    {
        if (remainder & 0x8000)
        {
        remainder = (remainder << 1);
        remainder ^= POLYNOMIAL_16;
        }
        else
        {       
        remainder = (remainder << 1);
        }       
        i--;
    }
    else
    {
        ui16_Loc_bytes--;
        ptr++;
        locData = *ptr;
        //ptr++;
        i = 8;
    }

    }
    else
    {
    bNew = FALSE;
    *crc = remainder;
    return TRUE;
    }
    return FALSE;
}

if(SDKaart.ui16_RecBytes >= SDKaart.ui16_ByteLen)//30-5-2018 edited SDKaart.CMD[SDKaart.ui8_ActiefCMD].ui16_RecLen)
                    {
                    SD_DESELECT;
                    if(SDKaart.bInitReady && SDKaart.b_BlockRead)
                    {
                        if(CRC_16(512,(char*)&SDKaart.Mem_Block.SD_Buffer[0], &SDKaart.ui16_MemBlock_CRC))
                        {                       
                        if((((UINT16)SDKaart.Mem_Block.SD_Buffer[512]<<8)|(UINT16)SDKaart.Mem_Block.SD_Buffer[513]) == SDKaart.ui16_MemBlock_CRC)
                        {
                            SDKaart.bRXReady = TRUE;
                            SDKaart.TXStat = SPI_IDLE;
                            printf("CRC16 OK %x\r\n",SDKaart.ui16_MemBlock_CRC);
                        }
                        else
                        {
                            SDKaart.bRXReady = TRUE;
                            SDKaart.TXStat = SPI_IDLE;
                            printf("CRC16 %u != 0x%x 0x%x\r\n",SDKaart.ui16_MemBlock_CRC,SDKaart.Mem_Block.SD_Buffer[512], SDKaart.Mem_Block.SD_Buffer[513] );
                        }
                        //printf("CRC citt: %u\r\n", Calculate_CRC_CCITT((char *)&SDKaart.Mem_Block.SD_Buffer[0],512));
                        }
                    }
                    else
                    {
                        SDKaart.bRXReady = TRUE;
                        SDKaart.TXStat = SPI_IDLE;
                    }
                    }
                    else
                    {                       
                    if(SD_SPI_TX_READY)
                    {
                        SDKaart.bNewSPIByte = TRUE;
                        SPI1BUF = SD_EMPTY_BYTE;                        
                    }
                } 
```

我用了很多网上找到的crcs，但一个lottt没有用。请注意，许多在线“示例”确实在 XOR 后面使用 <<1，但必须在 xor 之前完成。

POLY_16 是 0x1021。下一个机会是构建一个表格选择器。:)

格雷茨，约翰

# android - JAR 注册广播接收器

> ID：16073281
> 
> 赞同：0
> 
> 时间：2013-04-18T01:57:50.680
> 
> 标签：android, jar, broadcastreceiver

我的 BroadcastReceiver 类名是`net.push.MyReceiver`

和 JAR 中的 Mainfest：

```
<receiver android:name="net.push.MyReceiver" >
            <intent-filter>
                <action android:name="MyReceiver_Action" />
            </intent-filter>
        </receiver> 
```

而注册BroadcastReceiver，Receiver不能接收广播。

如果我改变 Mainfest 如下：

```
<receiver android:name="net.push.MyReceiver" >
            <intent-filter>
                <action android:name="MyReceiver_Action" />
            </intent-filter>
        </receiver> 
```

然后它可以接收广播。

我想知道如何在 JAR 中注册 mainFest 时接收广播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:23:09.237

AndroidManifest.xml 是为应用程序指定的，而不是为 jar 指定的。因此，如果您希望接收器实际工作，您需要将该声明放入应用程序清单中，该清单应位于应用程序项目文件夹的根目录中。

> 每个应用程序的根目录中都必须有一个 AndroidManifest.xml 文件（具有该名称）

在这里阅读更多内容：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# php - 修复托管服务上的 Google API PHP 客户端

> ID：16073283
> 
> 赞同：0
> 
> 时间：2013-04-18T01:58:03.840
> 
> 标签：php, codeigniter, google-api

我正在使用 Google API 的 PHP 客户端来访问 gmail 联系人。我的代码在 localhost 中运行良好，但是当我将其移至托管服务时它停止工作。是的，我确实验证了所有 oauth 参数并在 Google API 控制台中更新了相同的参数。
有没有办法调试它？我正在使用codeigniter 2.1。

1.  config.php -`$config['uri_protocol']= 'AUTO';` 并在控制器方法中添加`parse_str(substr(strrchr($_SERVER['REQUEST_URI'], "?"), 1), $_GET);`if 条件。

2.  然后来自 [博客][1]。config.php -`$config['uri_protocol'] = "PATH_INFO";`和控制器方法与`parse_str($_SERVER['QUERY_STRING'], $_GET);`之前的 if 条件。

控制器方法是

```
function gmail_invite()
{
session_start();
$gmailContacts = array();
$client = new Google_Client();
$client->setApplicationName('tets');
$client->setScopes("http://www.google.com/m8/feeds/");
$client->setClientId('222222.apps.googleusercontent.com');
$client->setClientSecret('secret');
$client->setRedirectUri('http://testsite.com/gmail_invite');

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['token']);
  $client->revokeToken();
}

if ($client->getAccessToken()) {
  $req = new Google_HttpRequest("https://www.google.com/m8/feeds/contacts/default/full?max-results=500");
  $val = $client->getIo()->authenticatedRequest($req);
  $xml = simplexml_load_string($val->getResponseBody());
  $result = $xml->xpath('//gd:email');
  //print "<pre>" .print_r($result,false). "</pre>";
  foreach ($result as $title) {
    array_push($gmailContacts, mysql_real_escape_string($title->attributes()->address));
  }
  // The contacts api only returns XML responses.
  //$response = json_encode(simplexml_load_string($val->getResponseBody()));

  //print "<pre>" . print_r(json_decode($response, true), true) . "</pre>";

  // The access token may have been updated lazily.
  $_SESSION['token'] = $client->getAccessToken();
} else {

  redirect($client->createAuthUrl());
} 
```

**配置文件**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['base_url'] = '';

$config['index_page'] = '';

$config['uri_protocol'] = 'PATH_INFO';

$config['url_suffix'] = '';
$config['language'] = 'english';

$config['charset'] = 'UTF-8';

$config['enable_hooks'] = FALSE;

$config['subclass_prefix'] = 'MY_';

$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';

$config['allow_get_array']      = TRUE;
$config['enable_query_strings'] = FALSE;
$config['controller_trigger']   = 'c';
$config['function_trigger']     = 'm';
$config['directory_trigger']    = 'd'; // experimental not currently in use

$config['log_threshold'] = 4;

$config['log_path'] = '';

$config['log_date_format'] = 'Y-m-d H:i:s';

$config['cache_path'] = '';

$config['encryption_key'] = '';

$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE;

$config['global_xss_filtering'] = FALSE;

$config['csrf_protection'] = FALSE;
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name';
$config['csrf_expire'] = 7200;

$config['compress_output'] = FALSE;

$config['time_reference'] = 'local';
$config['rewrite_short_tags'] = FALSE;
$config['proxy_ips'] = '';

/* End of file config.php */
/* Location: ./application/config/config.php */ 
```

# c# - 应用范围的上下文菜单

> ID：16073287
> 
> 赞同：0
> 
> 时间：2013-04-18T01:58:17.307
> 
> 标签：c#, contextmenu

我在 .NET 应用程序中为文本框创建了一个上下文菜单，效果很好。现在我想为我的应用程序中的所有文本框使用相同的上下文菜单。目前，我正在使用如下代码来处理现有功能：

```
private void contextMenuStrip1_Opening(object sender, System.ComponentModel.CancelEventArgs e)
{
        // Disable Undo if CanUndo property returns false
        if (mainTextBox.CanUndo)
        {
            contextMenuStrip1.Items["Undo"].Enabled = true;
        }
        else
        {
            contextMenuStrip1.Items["Undo"].Enabled = false;
        }
} 
```

我的问题是如何转换此代码，以便所有文本框都可以使用相同的代码，而不是为所有文本框实例一遍又一遍地重写。我为所有文本框分配了相同的上下文菜单，但更具体地说，如何将调用文本框的名称传递给函数？我希望它可能很简单：

```
// Disable Undo if CanUndo property returns false
if (this.CanUndo)
{
   contextMenuStrip1.Items["Undo"].Enabled = true;
}
else
{
   contextMenuStrip1.Items["Undo"].Enabled = false;
} 
```

不幸的是，这不起作用。有任何想法吗？

# jsf - 基于域的 I18N 和 JSF2.0

> ID：16073291
> 
> 赞同：1
> 
> 时间：2013-04-18T01:58:34.143
> 
> 标签：jsf, jsf-2, facelets

我必须使用 JSF2 实现基于域的 I18N。

例如，如果域是

```
www.bookstore.com      --> it should go to english site
www.bookstore.com.cn   --> it should go to chinese site
www.bookstore.co.jp    --> it should go to japanese site 
```

我们拥有所有经过适当翻译的属性文件。当我更改浏览器语言/区域设置时，我可以看到翻译后的内容。但我们实际上并不需要这种行为。我在过滤器中根据域设置语言环境，它似乎不起作用。这是我的代码，这段代码有什么问题，问题出在哪里？

## AuthenticationFilter.java

```
public class AuthenticationFilter implements Filter {

    private static Log log = LogFactory.getLog(AuthenticationFilter.class); 

    @Override
    public void init(FilterConfig config) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {

        request.setCharacterEncoding("UTF-8");
        response.setCharacterEncoding("UTF-8");

        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;

        FacesContext facesContext = FacesUtil.getFacesContext(httpRequest, httpResponse);
        facesContext.getExternalContext().setResponseCharacterEncoding("UTF-8");        

        Locale requestLocale = LocaleUtil.getLocaleFromDomain(httpRequest);         
        if(requestLocale == null){
            requestLocale = LocaleUtil.getDefault();
        }

        facesContext.getViewRoot().setLocale(requestLocale);
        chain.doFilter(httpRequest, httpResponse);
    }

    @Override
    public void destroy() {
    }

} 
```

## FacesUtil.java

```
public class FacesUtil {

  public static FacesContext getFacesContext(HttpServletRequest request, HttpServletResponse response) {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    if (facesContext == null) {
      LifecycleFactory lifecycleFactory = (LifecycleFactory) FactoryFinder.getFactory(FactoryFinder.LIFECYCLE_FACTORY);
      Lifecycle lifecycle = lifecycleFactory.getLifecycle(LifecycleFactory.DEFAULT_LIFECYCLE);
      FacesContextFactory contextFactory = (FacesContextFactory) FactoryFinder.getFactory(FactoryFinder.FACES_CONTEXT_FACTORY);
      facesContext = contextFactory.getFacesContext(request.getSession().getServletContext(), request, response, lifecycle);
      UIViewRoot view = facesContext.getApplication().getViewHandler().createView(facesContext, "");
      facesContext.setViewRoot(view);
      FacesContextWrapper.setCurrentInstance(facesContext);
    }
    return facesContext;
  }

  // Wrap the protected FacesContext.setCurrentInstance() in a inner class.
  private static abstract class FacesContextWrapper extends FacesContext {
    protected static void setCurrentInstance(FacesContext facesContext) {
      FacesContext.setCurrentInstance(facesContext);
    }
  }

} 
```

## LocaleUtil.java

```
public class LocaleUtil {

    public static Locale getLocaleFromDomain(HttpServletRequest request){

           Locale locale=Locale.getDefault();

           String domain = request.getHeader("HOST");

           if(domain.contains(".com.cn"))
           {
               locale = new Locale(Locale.SIMPLIFIED_CHINESE.getLanguage(), Locale.CHINA.getCountry());

           }else if(domain.contains(".co.jp"))
           {
               locale = new Locale(Locale.JAPANESE.getLanguage(), Locale.JAPAN.getCountry());

           }else if(domain.contains(".co.kr"))
           {
               locale = new Locale(Locale.KOREAN.getLanguage(), Locale.KOREA.getCountry());

           }else if(domain.contains(".com.tw"))
           {
              locale = new Locale(Locale.CHINESE.getLanguage(), Locale.TAIWAN.getCountry());              
           }
           return locale;
        }        

    public static Locale getDefault() {
        Locale defaultLocale = new Locale("en", "US");
        return defaultLocale;
    }

    } 
```

## 面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <application>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>en_US</supported-locale>
            <supported-locale>zh</supported-locale>
            <supported-locale>zh_CN</supported-locale>
            <supported-locale>zh_TW</supported-locale>
            <supported-locale>ja</supported-locale>
            <supported-locale>ja_JP</supported-locale>
        </locale-config>
        <resource-bundle>
            <base-name>com.bookstore.component.BookStoreTextHandler</base-name>
            <var>msg</var>
        </resource-bundle>
    </application>

</faces-config> 
```

## BookStoreTextHandler.java

```
public class BookStoreTextHandler extends ResourceBundle {

    protected static final String BUNDLE_NAME = "/var/app/conf/bookstore";
    protected static final String BUNDLE_EXTENSION = "properties";
    protected static final Control UTF8_CONTROL = new UTF8Control();

    public BookStoreTextHandler() {
        Locale locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();
        setParent(ResourceBundle.getBundle(BUNDLE_NAME, locale, UTF8_CONTROL));
    }

    @Override
    protected Object handleGetObject(String key) {
        return parent.getObject(key);
    }

    @Override
    public Enumeration<String> getKeys() {
        return parent.getKeys();
    }

    protected static class UTF8Control extends Control {
        @Override
        public ResourceBundle newBundle(String baseName, Locale locale, String format, ClassLoader loader, boolean reload)
                throws IllegalAccessException, InstantiationException, IOException {

            String bundleName = toBundleName(baseName, locale);
            String resourceName = toResourceName(bundleName, BUNDLE_EXTENSION);
            ResourceBundle bundle = null;

            InputStreamReader reader = null;
            FileInputStream fis = null;
            try {
                File file = new File(resourceName);

                if (file.isFile()) { // Also checks for existance
                    fis = new FileInputStream(file);
                    reader = new InputStreamReader(fis, Charset.forName("UTF-8"));
                    bundle = new PropertyResourceBundle(reader);
                }
            } finally {
                IOUtils.closeQuietly(reader);
                IOUtils.closeQuietly(fis);
            }
            return bundle;
        }
    }

} 
```

我有`bookstore.properties, bookstore_en.properties, bookstore_en_US.properties, bookstore_zh.properties, bookstore_zh_CN.properties, bookstore_zh_TW.properties, bookstore.properties_ja, bookstore_ja_JP.properties`/var/app/conf/ 位置的文件。

## 介绍页.xhtml

```
<ui:composition lang="en" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <div class="frame">
        <h1>#{msg['bookstore.intro.title']}</h1>        
    </div>

    <div>
        <p style="line-height: 1.6em; font-family: Verdana, Arial, sans-serif;">
            <h:outputText value="#{msg['bookstore.intro.paragraph.1']}" escape="false"/>
        </p>
        <p style="line-height: 1.6em; font-family: Verdana, Arial, sans-serif;">
            <h:outputText value="#{msg['bookstore.intro.paragraph.2']}" escape="false"/>
        </p>
        <p style="line-height: 1.6em; font-family: Verdana, Arial, sans-serif; font-weight: bold;">
            <h:outputText value="#{msg['bookstore.intro.paragraph.3']}" escape="false"/>
        </p>
    </div>

</ui:composition> 
```

当我从不同的域尝试[我已经在本地更改了我的主机文件]时，当我调试过滤器代码时，它会根据域提供正确的区域设置。但不知道为什么总是得到英文内容。但是如果我更改浏览器语言，我可以看到翻译后的内容。这段代码有什么问题？

# java - Helloworld 不在模拟器上运行

> ID：16073292
> 
> 赞同：1
> 
> 时间：2013-04-18T01:58:34.300
> 
> 标签：java, android, adk

好吧，这真的让我很生气。我在我的模拟器和安卓设备上运行它。该代码不显示“Helloworld，Android -mykong.com”。我启动应用程序，在模拟器上找到它，单击它，然后进入应用程序界面。然而，这只是一个空白屏幕！这个错误不是我找到应用程序的问题，不是模拟器或安卓手机的问题，问题必须出在代码中或代码的结构/构建方式上。我知道 helloworld 代码是 100% 正确的，因为它来自一个有信誉的教程网站。这是我的三对代码。请帮忙，我急需！

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test123"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.test123.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

MainActivity.java

```
package com.example.test123;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    public void activity()
    {
    Intent helloWorld = new Intent(getApplicationContext(), HelloWorldjavaactivity.class );
    startActivity( helloWorld );
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

HelloWorldjavaactivity.java

```
package com.example.test123;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HelloWorldjavaactivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView text = new TextView(this);
        text.setText("Hello World, Android - mkyong.com");
        setContentView(text);
    }
} 
```

Activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="35dp"
        android:layout_marginTop="57dp"
        android:text="" 
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:05:43.743

您没有启动 HelloWorldjavaactivity.java 活动。您的 MainActivity 中需要以下内容：

```
Intent helloWorld = new Intent(getApplicationContext(), HelloWorldjavaactivity.class );
startActivity( helloWorld ); 
```

当然，您甚至需要通过某个按钮触发该代码，例如按下按钮。

消除第二个活动会更容易（因为您的 MainActivity 无论如何都没有做任何事情）并将代码放在您的 MainActivity 中。您还需要编辑 MainActivity 的布局，使其包含适当的视图。

# php - CSS - 图像的透明 bg 未在网站上呈现

> ID：16073293
> 
> 赞同：3
> 
> 时间：2013-04-18T01:58:43.050
> 
> 标签：php, css

我正在尝试重新设计我的网站，以便我原来的方形、基于平铺的图像渲染可以更像是图像的剪切......以摆脱那种网格图案。

这是它最初的样子......

![在此处输入图像描述](https://i.stack.imgur.com/A6HzJ.jpg)

这是我要做什么的粗略模型：

![在此处输入图像描述](https://i.stack.imgur.com/9nJ7A.jpg)

所以我重新保存了一个透明背景的图像缩略图......我只想让狗显示，而正方形是透明的，它将在下面显示网站的背景。

![在此处输入图像描述](https://i.stack.imgur.com/GGVjZ.jpg)

然而，当我在页面上渲染它时，它的背景是黑色的。

![在此处输入图像描述](https://i.stack.imgur.com/7sOSx.jpg)

我检查了我的 CSS 以查看是否有某种 img 类或渲染漫画的类......甚至引导程序查看可能将背景颜色分配给黑色的位置（并且还搜索了十六进制代码000000），但没有找到...

你知道为什么会发生这种情况吗？

谢谢！

* * *

**编辑：**我刚刚注意到一些事情......

我在顶部的徽标呈现为透明背景......并且元素是 png 文件......因此，它的 MIME 类型是 image/png。

我正在使用缩略图脚本来使缩略图更小，但现在元素是 thumber.php，它把它作为 MIME 类型的图像/jpeg。

![在此处输入图像描述](https://i.stack.imgur.com/mOlgw.png)

所以我猜是我的缩略图脚本改变了 MIME 类型。

所以我检查了它，它正在将文件创建为 jpeg

```
//imagejpeg outputs the image
imagejpeg($img); 
```

有没有办法改变它，以便将重新采样的图像输出为 png？

* * *

缩略图脚本：

```
 <?php
#Appreciation goes to digifuzz (http://www.digifuzz.net) for help on this

$image_file = $_GET['img']; //takes in full path of image
$MAX_WIDTH = $_GET['mw'];
$MAX_HEIGHT = $_GET['mh'];
global $img;

//Check for image
if(!$image_file || $image_file == "") { 
    die("NO FILE."); 
}

//If no max width, set one
if(!$MAX_WIDTH || $MAX_WIDTH == "") { 
    $MAX_WIDTH="100"; 
}

//if no max height, set one
if(!$MAX_HEIGHT || $MAX_HEIGHT == "") { 
    $MAX_HEIGHT = "100"; 
}

$img = null;
//create image file from 'img' parameter string
$img = imagecreatefrompng($image_file);

//if image successfully loaded...
if($img) {
    //get image size and scale ratio
    $width = imagesx($img);
    $height = imagesy($img);

    //takes min value of these two
    $scale = min($MAX_WIDTH/$width, $MAX_HEIGHT/$height);

    //if desired new image size is less than original, output new image
    if($scale < 1) {
        $new_width = floor($scale * $width);

        $new_height = floor($scale * $height);

        $tmp_img = imagecreatetruecolor($new_width, $new_height);

        //copy and resize old image to new image
        imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        imagedestroy($img);

        //replace actual image with new image
        $img = $tmp_img;
    }
}
//set the content type header
header("Content-type: image/png");

//imagejpeg outputs the image
imagealphablending($img, false);
imagesavealpha($img, true);
imagepng($img);

imagedestroy($img);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:05:41.540

您将需要在图像生成器中进行一些更改，看看是否适合您。关键的变化在于标题的设置和图像生成的方法。您将寻找以下两个

```
header('Content-Type: image/jpeg'); 
```

改成：

```
header('Content-Type: image/png'); 
```

* * *

```
imagejpeg($im); 
```

改成：

```
imagepng($im) 
```

在处理带有 alpha 通道的 png 图像时，您应该采取一些额外的步骤。在使用 imagepng() 将其吐出之前，需要添加这些行。

```
imagealphablending($img, false);
imagesavealpha($img, true); 
```

此信息可在[php.net上找到](http://php.net/manual/en/function.imagesavealpha.php)

**编辑：** 尝试对此代码进行这些更改：

```
 if($scale < 1) {
        $new_width = floor($scale * $width);

        $new_height = floor($scale * $height);

        $tmp_img = imagecreatetruecolor($new_width, $new_height);

        imagealphablending($tmp_img,true); // add this line

        //copy and resize old image to new image
        imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        $img = $tmp_img;

        // remove line here
    }
}

header("Content-type: image/png");
imagesavealpha($img, true);
imagepng($img);
imagedestroy($img);
imagedestroy($tmp_img); // add this line here 
```

基本上，您创建新图层并将它们放在一起。对于每一层，您都需要设置 Alpha 混合。我成功地创建了 alpha 图像。让我知道你的发现是什么.. :-) ..

# load - 将值加载到 LC3 中的寄存器中

> ID：16073294
> 
> 赞同：1
> 
> 时间：2013-04-18T01:58:54.173
> 
> 标签：load, lc3, cpu-registers

是否有一条 LC3 指令可以将值加载到寄存器中？我需要编写一些汇编代码，然后我需要编写一条指令来将值 1 存储在 R1 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:53:12.893

```
LD R1, value 
```

使用要加载到 R1 中的任何值对“值”进行 .fill。我不相信有一种方法可以用一行将文字值加载到寄存器中，但是您可以使用一条指令和一个标签来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T04:59:52.913

就在这里。它是： **LD R0,Param1**

这意味着它将把 Param1 的值加载到寄存器 0 中。

# c# - 执行web服务方法并立即返回

> ID：16073296
> 
> 赞同：3
> 
> 时间：2013-04-18T01:59:23.207
> 
> 标签：c#, wcf, asynchronous

C# ASP.NET 3.5

是否可以在非异步或单向的 Web 服务中“触发并忘记”一个方法？

有一种方法可以返回一个值（经过一些处理），我不需要。它被另一个组（谁编写了服务）使用。基本上，它只是通知用户 x 执行了操作 y。我只需要调用该方法并继续前进，而无需等待结果。

我尝试使用带有 RunWorkerAsync 的 BackgroundWorker()，但由于某种原因该方法没有触发。我无法更改 Web 服务方法，因为我无法访问他们的代码。我应该使用 BackgroundWorker、Invoke、ThreadPool 还是其他东西？我不需要返回的结果，也不需要知道它是否失败。基本上，调用该方法，如果它有效，那就太好了。如果没有，我不想停止或减慢处理速度。

```
public static void Test()
{
    var worker = new BackgroundWorker();
    worker.DoWork += Test2;
    worker.RunWorkerAsync(new object[] {12345, "test"});
}

private static void Test2(object sender, DoWorkEventArgs e)
{
   // Write to log that we got into the method - does not
   object[] args = e.Argument as object[];
   int num = Convert.ToInt32(args[0]);
   string name = (string)args[1];
   // call web service method here....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:56:20.680

使用后台工作人员可以尝试以下方法

```
 public static void Test()
    {
        System.Threading.ThreadPool.QueueUserWorkItem(delegate
        {
            Test2(new object[] { 12345, "test" });
        });
    }

    private static void Test2(object data)
    {
        // Write to log that we got into the method - does not
        object[] args = data as object[];
        int num = Convert.ToInt32(args[0]);
        string name = (string)args[1];
        // call web service method here....
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:28:25.653

根据定义，请求的功能是 WCF OneWay。完全在客户端实现所需的行为是不可能的。

默认情况下，IIS（WCF 服务的公共主机）允许终止任何由关闭的连接启动的进程。这意味着客户端必须在整个过程中保持连接（这实际上意味着等待结果）。此外，请求可能会超时，并且“即发即弃”过程被终止。

如果您只想在请求进行时将客户端占用的资源减少到最低限度，我将异步运行请求。如果您只能访问 .net<=4.0，那么最简单的方法是使用“添加服务引用”选项生成异步调用（我的意思是 APM 异步而不是异步/等待/TPL 异步）并勾选“生成异步方法”选项。

您还必须学习 APM 编程模型（这很讨厌）。

或者，您可以在单独的线程上运行 WCF 调用。但请注意，这会使用大量额外资源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T02:10:40.320

这里有一份关于 Asysn/Sync wfc 调用的文档。[http://msdn.microsoft.com/en-us/library/ms734701.aspx](http://msdn.microsoft.com/en-us/library/ms734701.aspx)。

# javascript - 根据从 Javascript 组件检索到的值列表在 JSF（或页面）中生成数据表

> ID：16073299
> 
> 赞同：0
> 
> 时间：2013-04-18T01:59:30.403
> 
> 标签：javascript, jsf

我有一个这样定义的数据表：

```
<div style="margin-top: 10px; padding: 3px 3px;">
                    <fieldset>                          
                        <legend>SourcePublicationDates</legend>
                         <f:facet name="header" >
                                <h:outputText value="Add SourcePub date:"/>
                         </f:facet>    
                         <h:inputText id="sourcePublicationDate" value="#{dataEntry.sourcePublicationDate}">
                             <c:ajax event="keyup" />
                             <c:ajax event="focus" />   
                             <f:ajax execute="@this" render="sourcePublicationDate" />
                         </h:inputText>
                         <h:panelGroup style="padding-left: 3px;">
                                    <button class="manualContent" id="showSourcePublicationDateCalendar" type="button"><img src="/sourceNavigateWeb/resources/images/cal.gif"/></button>
                                    <div id="sourcePublicationDateCalendarContainer" />
                         </h:panelGroup>
                         <h:commandButton value="Add" action="#{dataEntry.editSourcePubDates}">
                            <f:ajax execute="@this" render="dtSourcePubDate" />
                        </h:commandButton>
                        <h:dataTable id="dtSourcePubDate" value="#{dataEntry.sourcePubDates}" var="sourcePubDate">
                            <h:column>
                            <f:facet name="header" >
                                <h:outputText value="Source Publication Dates:"/>
                            </f:facet>    
                            <h:inputText id="sourcePubDate" value="#{sourcePubDate}"/>
                            </h:column>
                        </h:dataTable>
                    </fieldset>
                </div> 
```

该表中的值来自一个多选日历控件，我最终在下面的 javascript 中获得了该控件。我想将每个单独的 fullDate 显示到数据表的文本框字段部分中，该字段最终绑定到 jsf 支持 bean。如何将 fullDate 放入 datatable 的文本框字段中？甚至是不可编辑的数据表形式？

```
CalendarPopup.handleSelectForMultipleDates = function(type, args, obj, inputEl)
        {
        var arrDates = CalendarPopup.sourcePublicationDateCalendar.getSelectedDates();
        var length = arrDates.length;
        var i=0;
        while(i!=length)
        {
            var date = arrDates[i];
            var displayMonth = date.getMonth() + 1;
            var displayYear = date.getFullYear();
            var displayDate = date.getDate();
            var fullDate = displayMonth + "/" displayDate + "/" + displayYear;
            i++;
        }

        } 
```

# c# - 如何手动将数据从视图传递到控制器？

> ID：16073300
> 
> 赞同：0
> 
> 时间：2013-04-18T01:59:35.647
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一个可以编辑的表单视图。观点比较复杂。该表格用于合同。合同名称可以在顶部进行编辑。一份合同有很多广告，每个广告的详细信息都可以编辑。表格的长度取决于合同有多少广告。我在视图中有一个 for 循环，显示每个广告的所有表单字段。

此外，模型中有一些字段用于确定某些广告详细信息，但它们本身不应保存到数据库中（但它们必须在视图中显示为下拉菜单）。

此外，有些模型字段不需要出现在视图中，但在 POST 控制器方法中需要以正确保存数据库（我正在手动保存），因此它们必须以某种方式通过视图并且传回控制器。这是我的模型：

```
public class ModContract
{
    public int contract_id; // pk; needed
    public string contract_name { get; set; } // save
    public List<ModAds> ads { get; set; }
}

public class ModAds
{
    public int contr_ad_id; // pk; needed

    public string name { get; set; } // save

    public string print_product_id { get; set; } // used for product_name
    public string product_name { get; set; } // appear

    public string print_ad_option_id { get; set; } // save
    public string adv_product { get; set; } // appear

    public List<string> editions { get; set; } // save

    public double freq_disc { get; set; } // save
    public double other_dis_dol { get; set; } // save
    public double? other_dis_per { get; set; } // save
    public string non_cash_note { get; set; } // save
    public double non_cash_cons { get; set; } // save
} 
```

后面带有“保存”注释的字段应保存到数据库中。带有“出现”的必须在视图中，但在 POST 控制器方法中不需要。POST 控制器方法中需要带有“需要”的那些，但视图中不需要。

顺便说一句，这些模型类不会与数据库表进行一对一的映射，它们是由几个不同的表组成的。

据我所知，我不知道如何让模型绑定与它一起工作。例如，传回控制器的模型对于 ModContract 的 ads 字段有一个空值。我想知道如何在不依赖模型绑定的情况下手动将视图中的内容传递回控制器。

我知道我可能会将@Html.HiddenFor 用于POST 方法中所需的ID，但不是视图，但由于某种原因，当我使用contract_id 和_name 尝试它时，它不起作用。

```
<li data-role="fieldcontain">
        <label>Contract Name</label>
        @Html.HiddenFor(m => m.contract_id)
        @Html.EditorFor(m => m.contract_name)
</li> 
```

在 POST 方法中返回的 contract_id 为 0。

让我知道我的问题是否听起来很愚蠢，因为这是不可能的，或者因为我把事情复杂化了，我对这一切都很陌生。

提前致谢！

**编辑**

这是视图。我无法正确缩进，但希望它是可读的。

```
@model oulookmediaweb.Models.ModContract

@{
    ViewBag.Title = "ModifyContract";
}

@{
    var num = 1;
}

<h2>Modify Contract</h2>

@using (Html.BeginForm("ModifyContract", "Contract", FormMethod.Post, htmlAttributes: new {      data_ajax = "false" }))
{
    @Html.ValidationSummary();
    <ul data-role="listview" data-inset="true">

        <li data-role="fieldcontain">
            <label>Contract Name</label>
            @Html.HiddenFor(m => m.contract_id)
            @Html.EditorFor(m => m.contract_name)
        </li>

    </ul>

    <div>
    @foreach (var ad in Model.ads)
    {
        <div id="@num">
            <ul data-role="listview" data-inset="true">
                <li data-role="list-divider">@ad.name</li>
                <li data-role="fieldcontain">
                    <label><strong>Product Name</strong></label>
                    <div>@ad.product_name</div>
                    <div id="@num-drdn0" hidden="true">@Html.DropDownListFor(m => ad.print_product_id, ViewData["products_list"] as SelectList)</div>
                    <input id="@num-editbutton" type="button" onclick="edit(@num)" value="Edit" />
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Advertising Product</strong></label>
                    <div>@ad.adv_product</div>
                    <div id="@num-drdn1" class="hid">
                        <select></select>
                    </div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Editions to run in:</strong></label>
                    @foreach (var ed in ad.editions)
                    {
                        <div>@ed</div>
                    }
                    <div id="@num-drdn2" class="hid">
                        <select multiple="multiple" data-native-menu="false"></select>
                    </div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Frequency Discount (%)</strong></label>
                    <div>@Html.EditorFor(m => ad.freq_disc)</div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Other Discount ($)</strong></label>
                    <div>@Html.EditorFor(m => ad.other_dis_dol)</div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Other Discount (%)</strong></label>
                    <div>@Html.EditorFor(m => ad.other_dis_per)</div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Non Cash Note</strong></label>
                    <div>@Html.EditorFor(m => ad.non_cash_note)</div>
                </li>

                <li data-role="fieldcontain">
                    <label><strong>Non Cash Consideration</strong></label>
                    <div>@Html.EditorFor(m => ad.non_cash_cons)</div>
                </li>

            </ul>
            @{num++;}
        </div>
    }
</div>

<ul data-role="listview" data-inset="true">
    <li data-role="fieldcontain">
        <input type="submit" data-theme="e" value="Submit" />
    </li>
</ul>

}

<script type="text/javascript">
var nu;
window.onload = function () {
    // hide adv prods and editions select for now
    $(".hid select").closest('.ui-select').hide();
}

// called when the edit button for product is clicked
function edit(num) {
    nu = num;
    $("#" + nu + "-drdn0").show(); // show dropdown
    $("#" + nu + "-editbutton").closest('.ui-btn').hide(); // hide edit button; '.ui-btn'? WTF?

    // remove current product selection div
    // remove adv product selection div
    // remove editions div

    $("#" + nu + "-drdn0 select").change(prodChange); // on select change
    $("#" + nu + "-drdn0 select").trigger("change");  // trigger for default; happens twice; WHY?
}

// called when a magazine is selected
function prodChange() {
    // ajax
    var url = '@Url.Action("GetAdvProdList", "Contract")' + '?prod_id=' + this.value;

    $.getJSON(url, null, function (list) {
        // for adv list dropdown
        $("#" + nu + "-drdn1 select").empty(); // remove old stuff
        $("#" + nu + "-drdn1 select").closest('.ui-select').show(); // show dropdown
        var arr = list.advlist; // get the array from object

        $.each(arr, function (ind, val) {
            // add each item in list as an option of select
            $("#" + nu + "-drdn1 select").append('<option value=' + val.Value + '>' + val.Text + '</option>');
        });
        $("#" + nu + "-drdn1 select").selectmenu('refresh', true); // refresh menu

        // for ed list
        $("#" + nu + "-drdn2 select").empty(); // remove old stuff
        $("#" + nu + "-drdn2 select").closest('.ui-select').show(); // show list
        var lis = list.edlist; // get the array from object

        $.each(lis, function (ind, val) {
            // add each item to list
            $("#" + nu + "-drdn2 select").append('<option value=' + val.Value + '>' + val.Text + '</option>');
        });
        $("#" + nu + "-drdn2 select").selectmenu('refresh', true); // refresh menu
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:14:36.897

如果你有一个复杂的表格，你会遇到很多问题，这是可以理解的。因此，让我尝试总结您的问题，以提供最佳解决方案。

## 故障

> 模型中有一些字段......（它们）本身不应该保存到数据库中（但它们必须显示为视图中的下拉列表）

您将这些字段放入模型中并将它们视为**只读**。我稍后会展示如何。

> 有一些模型字段不需要出现在视图中，但在 POST 控制器方法中需要才能正确保存数据库（我手动保存）

你不需要这样做。您正在传递不必要的数据，并且您正在引入过度发布。此外，您不允许您的用户编辑它们，但您将其传递给客户端，接收它并将其保存回数据库。

它甚至会暴露系统中的安全漏洞。例如，您正在传递`product_name`到视图，不希望对其进行编辑，但随后将其保存到另一个表中。有人可以轻松破解该值，而您最终可能会得到`product_name`您从未预料到的结果。

> 后面带有“保存”注释的字段应保存到数据库中。

接受这些作为表单上的输入。代码将在稍后显示。

> 带有“出现”的必须在视图中，但在 POST 控制器方法中不需要。

正如我所提到的，这些应该是视图模型上的只读字段，代码稍后显示。

> POST 控制器方法中需要带有“需要”的那些，但视图中不需要。

您不需要传递它，也不需要立即查询它。当节省时间到来时，稍后从您的数据库中获取它。伪代码稍后显示。

## 建议的解决方案

在这一点上，我假设您通过回答您的问题的一些要点来理解我上面提到的内容。以下是这些解释的相关代码。

```
public class ContractViewModel {
    // start:read-only fields. 
    // These are the fields that will be used as read-only
    public string product_name { get; set; }
    public string adv_product { get; set; }
    public IEnumerable<SelectListItem> PrintAdOptions { get; set; }
    // end:read-only fields.
    public InputModel Contract {get;set;}    
}
// you use this class to capture "all your inputs"
public class InputModel {
    public int contract_id {get;set;}
    public string contract_name { get; set; }
    public IEnumerable<InputSubModel> ads {get;set;}
}    
public class InputSubModel {
    public int contr_ad_id {get;set;}
    public string print_ad_option_id {get;set;} // is this really a string?
    public string name {get;set;}
} 
```

您将创建一个名为“主”视图模型`ContractViewModel`并在您的视图上使用它（当然您可以使用任何您想要的名称）。它包含显示信息的字段和捕获所有输入的“输入”字段。它是您所有实体的**扁平化**表示。所谓的“输入”字段`InputModel`是所有实体的另一种扁平表示。该视图模型的输入将被正确分散和持久化。

## 建立模型

```
// method for creating a contract
public ActionResult Create() {
    // implement the ff methods, whatever method you're using ORM, plain ADO, etc.
    var product = getEntityFromYourDb();
    // you may eagerly load this (ORM) or query it separately, it's up to you
    // AdOption is a simple entity with structure: Id, Name
    IEnumerable<AdOption> adOptions = getAdOptionsFromDb();

    // map entity to model
    // I am guessing here that "product" has the following fields.
    // Just replace this accordingly based on you entities
    var model = new ContractViewModel{
        product_name = product.Name,
        adv_product = product.AdvProduct,
        PrintAdOptions = aOptions.Select(x=> 
             new SelectListItem{ Value = x.Id, Text = x.Name })     
        Contract  = getEntitiesFromDbAndMapToModel();
    };

    // at this point you have everything you need
    // (1) a field that you can just show (and not save)
    // (2) a list of fields that you can use on a drop-down
    // (3) input fields, the ONLY ones that you will POST
    return View(model);
} 
```

## 在视图上使用模型

这里给出的例子也解决了这个问题：

> 据我所知，我不知道如何让模型绑定与它一起工作。传回控制器的模型对于 ModContract 的 ads 字段有一个空值

永远不要在集合上使用 a `foreach`，因为 razor 引擎无法以您可以将其保存回来的方式正确写入它。原因是编写的元素具有相同的名称并且它们无法正确绑定（或绑定，我认为是英语中的正确单词 - 在编程中绑定:)。始终使用 a `for-loop`，在下面的代码中看到它。

```
@model ContractViewModel

<h2>Modify Contract</h2>
<p>@Model.product_name</p>
<p>@Model.adv_product</p>

@Html.HiddenFor(m=>m.Contract.contract_id) // your reference Id for saving
@Html.TextBoxFor(m=>m.Contract.contract_name)

@for(var i=0;i<Model.Contract.ads.Count();i++){
    @Html.HiddenFor(m=>m.Contract.ads[i].contr_ad_id) // your reference Id for saving
    @Html.TextBoxFor(m=>m.Contract.ads[i].name)
    @Html.DropdownListFor(m=>m.Contract.ads[i].print_ad_option_id, m.PrintAdOptions)
} 
```

## 最后，保存你需要的东西

在下面给出的示例中，您会注意到我们使用了该`Bind`属性。这告诉控制器只绑定并获取我们的“输入”模型，即`InputModel`. 无需回发您不需要保存或查询等的所有其他值。因此请注意，如果您需要一个字段，请说出`id`您稍后将用于查询的（例如产品 ID）产品表中的产品，**因为**您需要将其名称保存到`ModAds`表中，然后将其包含在`InputModel`. 这样你就会有，`InputModel.ProductId`。

```
[HttpPost]
public ActionResult Create([Bind(Prefix = "Contract")]InputModel model) {
    // map back the values from the flatten model into your entities
    // it could be a single entity or a complex one
    // but I'm sure you can easily determine how to do it
    // as an example:
    var modContract = getContractFromDb(model.contract_id);
    modContract.contract_name = model.contract_name;
    // do the rest of the mapping here
} 
```

## 结论

这是我可以根据您的模型和您正在尝试做的事情为您提供的最接近的示例。如果您仔细按照该示例进行操作，我相信它会解决您的问题。

# java - 看不到我在哪里除以 0？

> ID：16073309
> 
> 赞同：1
> 
> 时间：2013-04-18T02:00:57.777
> 
> 标签：java, dividebyzeroexception

这是我认为任何人都需要能够评估我的问题的所有代码

```
1 import.java.util.Scanner
2 public class ccattano_Sieve{
3         private boolean []  primes = new boolean [50001];
4         private int upper;
5         private int lower;
6 
7         public ccattano_Sieve(){
8             upper = 50000;
9             lower = 1;
10            for (int i = 2; i < primes.length; i++){
11                primes[i] = true;
12            }
13            primes[0] = false;
14            primes[1] = false;
15        }
16 
17        public void processSieve(){
18            for (int i = 2; i < Math.round(Math.sqrt(50000)); i++){
19                if (primes[i] == true){
20                    for (int c = 2; c < (primes.length - 1); i++){
21                        if (c % i == 0){
22                            primes[c] = false;
23                        }
24                        else{
25                            primes[c] = true;
26                        }
27                    }
28                }
29            }
30        } 
```

我很确定不需要第 24 - 26 行的 else 语句，我在尝试解决问题时添加了它。但是在第 21 行尝试运行代码时，我收到除以零错误。确切的错误如下。

```
Exception in thread "main" java.lang.ArithmeticException: / by zero
at ccattano_Sieve.processSieve(ccattano_Sieve.java:21)
at ccattano_SieveTest.main(ccattano_SieveTest.java:7) 
```

这一行“在 ccattano_SieveTest.main(ccattano_SieveTest.java:7)”调用了我粘贴的代码，因此可以忽略它。所以第 21 行是主要问题，我找不到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T02:05:50.720

模运算符是“除法的其余部分”，这意味着它涉及除法。

我相信你在第 20 行有一个错误，你在增加 i 而不是 c。这意味着 i 变量将溢出（达到如此之高以至于它将变为负数）并最终变为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:10:40.783

您永远不会在内部循环中更新 c 的值；相反`i`，您每次都会增加数组的长度 - 1，直到 50,000 的平方根。我怀疑这是一个错误，而不是您想要做的，但我等待相反的评论。

# ruby-on-rails - Rails 种子 JSON 忽略某些属性

> ID：16073316
> 
> 赞同：0
> 
> 时间：2013-04-18T02:01:55.627
> 
> 标签：ruby-on-rails, json, seed

我正在使用 rails JSON gem 快速为我的数据库添加 JSON 数据。在我的seeds.rb 文件中，我有这个方法

```
 businessPath = "#{Rails.root}/public/business2.json"
  businesses = JSON.parse(File.read(businessPath))
  businesses.each do |business|
  Business.create!(business)    
end 
```

然而，我得到的 JSON 数据是一些额外的属性，我不希望这个模型具有业务。当我尝试按原样播种时，出现此错误。

```
Can't mass-assign protected attributes: schools, categories, neighborhoods, longitude, latitude, type 
```

这些是我在 Rails 中的业务模型中没有的属性，它们是 JSON 文件中每个业务的属性。有没有办法在运行 Business.create 之前忽略这些属性？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T02:46:00.377

试试ActiveSupport 提供的[Hash#slice](http://api.rubyonrails.org/classes/Hash.html#method-i-slice)或[Hash#except](http://api.rubyonrails.org/classes/Hash.html#method-i-except)。你可以运行：

```
businessPath = "#{Rails.root}/public/business2.json"
businesses = JSON.parse(File.read(businessPath)) 
```

然后你可以将额外的属性列入黑名单

```
businesses.each do |business|
  Business.create!(business.except(:schools, :categories, :neighborhoods, :longitude, :latitude, :type))
end 
```

或仅将您要保留的属性列入白名单

```
businesses.each do |business|
  Business.create!(business.slice(:name, :owner, :etc))
end 
```

# sql - 访问查询语法

> ID：16073321
> 
> 赞同：1
> 
> 时间：2013-04-18T02:02:27.590
> 
> 标签：sql, ms-access

我只是将基于 SQL 的查询转换为在 SQL Server 上成功运行的 Access。我已将所有内容都转换为 Access 兼容格式，除了括号数有问题。我收到以下错误“来自 CLAUSE 的语法错误”，请帮助

```
SELECT CINT(MID(TC2.CHILDCOUNTER, 7, LEN(TC2.CHILDCOUNTER)) ) AS PKCHILDID
,tc2.VisitType
    ,MAX(IIf( tktResults.TaskCounter IN ( '001410' ,'001463' ,'001431' ),  tktResults.Result, NULL) ) AS KWA_QuitOffered
    ,MAX(IIf( tktResults.TaskCounter IN ( '001411' ,'001464' ,'001432' ),   tktResults.Result, NULL) ) AS KWA_QuitReferral
FROM ((tblConsultations tc2
INNER JOIN tblChild tc 
  ON tc2.ChildCounter = tc.ChildCounter)
LEFT  JOIN tblDelivery td 
  ON td.ChildCounter = tc.ChildCounter)
LEFT JOIN (
SELECT ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
FROM tblTaskResults ttr
LEFT JOIN tlkpKeyTasks tkt ON tkt.TaskCounter = ttr.TaskCounter
    AND tkt.TaskCounter IN (
        '001410'
        ,'001463'
        ,'001431'
        ,'001411'
        ,'001464'
        ,'001432'
        )
) AS tktResults 
    ON tc2.VisitType = tktResults.VisitType
AND tktResults.ChildCounter = tc2.ChildCounter
WHERE tc2.VisitType in (1, 2, 3, 4)
   AND tc2.ConsDate > '20130127' AND tc2.ConsDate < '20130228'
GROUP BY CINT(MID(TC2.CHILDCOUNTER, 7, LEN(TC2.CHILDCOUNTER)))
                                            ,TC2.VISITTYPE
                                            ,TC.CENTRECODE
                                            ,TC2.CENTRECODE
                                            ,TC2.COUNCILCODE
                                            ,TC2.CONSDATE
                                            ,TC.FEEDING3MONTHS
                                            ,TC.FEEDING6MONTHS
                                            ,TC.FEEDING12MONTHS
                                            ,TC2.WEIGHT
                                            ,TC2.HEADCIRC
                                    ORDER BY CINT(MID(TC2.CHILDCOUNTER, 7,   LEN(TC2.CHILDCOUNTER)) ), TC2.VISITTYPE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:08:52.320

当您有多个表并且您有导致问题的不匹配的括号时，MS Access 需要 JOIN 周围的括号。查询应该是：

```
SELECT ....
FROM (((tblConsultations tc2
INNER JOIN tblChild tc 
  ON tc2.ChildCounter = tc.ChildCounter)
LEFT JOIN tblDelivery td 
  ON td.ChildCounter = tc.ChildCounter)
LEFT JOIN 
(
  SELECT ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
  FROM tblTaskResults ttr
  LEFT JOIN tlkpKeyTasks tkt 
    ON tkt.TaskCounter = ttr.TaskCounter
    AND tkt.TaskCounter IN ('001410','001463'
                            ,'001431','001411'
                            ,'001464','001432')
) AS tktResults 
  ON tc2.VisitType = tktResults.VisitType
  AND tktResults.ChildCounter = tc2.ChildCounter)
WHERE ..... 
```

正如我在上一条评论中建议的那样，您应该为子查询创建并保存一个单独的查询，然后加入该查询。子查询可以任意调用，例如调用 myQuery：

```
 SELECT ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
  FROM tblTaskResults ttr
  LEFT JOIN tlkpKeyTasks tkt 
    ON tkt.TaskCounter = ttr.TaskCounter
    AND tkt.TaskCounter IN ('001410','001463'
                            ,'001431','001411'
                            ,'001464','001432') 
```

然后你将把它包含在你的 JOIN 中：

```
SELECT ....
FROM (((tblConsultations tc2
INNER JOIN tblChild tc 
  ON tc2.ChildCounter = tc.ChildCounter)
LEFT JOIN tblDelivery td 
  ON td.ChildCounter = tc.ChildCounter)
LEFT JOIN myQuery AS tktResults  -- this is the name of the saved query your create
  ON tc2.VisitType = tktResults.VisitType
  AND tktResults.ChildCounter = tc2.ChildCounter)
WHERE ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:49:42.040

将您的子查询转换为单独的命名查询，然后使用该命名查询代替子查询。还可以通过将内部连接查询另存为单独的查询来删除它：

所以先来看看这部分：

```
SELECT 
    CINT(MID(TC2.CHILDCOUNTER, 7, LEN(TC2.CHILDCOUNTER)) ) AS PKCHILDID
    ,tc2.VisitType
    ,MAX(IIf( tktResults.TaskCounter IN ( '001410' ,'001463' ,'001431' ),  tktResults.Result, NULL) ) AS KWA_QuitOffered
    ,MAX(IIf( tktResults.TaskCounter IN ( '001411' ,'001464' ,'001432' ),   tktResults.Result, NULL) ) AS KWA_QuitReferral
FROM tblConsultations tc2
   INNER JOIN tblChild tc 
     ON tc2.ChildCounter = tc.ChildCounter 
```

并将其保存为查询，例如**BaseQuery**

然后拿这个：

```
SELECT 
    ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
FROM tblTaskResults ttr
    LEFT JOIN tlkpKeyTasks tkt 
        ON tkt.TaskCounter = ttr.TaskCounter 
           AND tkt.TaskCounter IN (
                '001410'
                ,'001463'
                ,'001431'
                ,'001411'
                ,'001464'
                ,'001432'
            ) 
```

并将其保存为另一个查询，例如**SubQuery**（使用更好的名称）

然后您的查询变为：

```
SELECT 
   CINT(MID(TC.CHILDCOUNTER, 7, LEN(TC.CHILDCOUNTER)) ) AS PKCHILDID
   ,tc.VisitType
   ,MAX(IIf( tktResults.TaskCounter IN ( '001410' ,'001463' ,'001431' ),  tktResults.Result, NULL) ) AS KWA_QuitOffered
    ,MAX(IIf( tktResults.TaskCounter IN ( '001411' ,'001464' ,'001432' ),   tktResults.Result, NULL) ) AS KWA_QuitReferral    
FROM BaseQuery tc
    LEFT JOIN tblDelivery td 
      ON td.ChildCounter = tc.ChildCounter)
    LEFT JOIN SubQuery tktResults 
      ON tc.VisitType = tktResults.VisitType AND tktResults.ChildCounter = tc.ChildCounter)
WHERE tc.VisitType in (1, 2, 3, 4)
   AND tc.ConsDate > '20130127' AND tc.ConsDate < '20130228'
GROUP BY 
    CINT(MID(TC.CHILDCOUNTER, 7, LEN(TC.CHILDCOUNTER)))
    ,TC.VISITTYPE
    ,TC.CENTRECODE
    ,TC.CENTRECODE
    ,TC.COUNCILCODE
    ,TC.CONSDATE
    ,TC.FEEDING3MONTHS
    ,TC.FEEDING6MONTHS
    ,TC.FEEDING12MONTHS
    ,TC.WEIGHT
    ,TC.HEADCIRC
ORDER BY CINT(MID(TC.CHILDCOUNTER, 7,   LEN(TC.CHILDCOUNTER)) ), TC.VISITTYPE 
```

请注意 tc2.VisitType 和 tc2.ChildCounter 变为 tc.VisitType 和 tc.ChildCounter，因为它包含在 BaseQuery 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:22:12.733

谢谢大家，我只需稍加修改就可以做到。实际上，我在 TaskCounter 中缺少 CINT 函数，该函数在原始表中是字符串格式。我还将 date 中的 between 子句更改为 > 和 <。我的最终查询如下：

```
SELECT CINT(MID(TC2.CHILDCOUNTER, 7, LEN(TC2.CHILDCOUNTER)) ) AS PKCHILDID
,tc2.VisitType
    ,MAX(IIf( tktResults.TaskCounter IN ( '001410' ,'001463' ,'001431' ),  tktResults.Result, NULL) ) AS KWA_QuitOffered
    ,MAX(IIf( tktResults.TaskCounter IN ( '001411' ,'001464' ,'001432' ),   tktResults.Result, NULL) ) AS KWA_QuitReferral
FROM ((tblConsultations tc2
INNER JOIN tblChild tc 
  ON tc2.ChildCounter = tc.ChildCounter)
LEFT  JOIN tblDelivery td 
  ON td.ChildCounter = tc.ChildCounter)
LEFT JOIN (
SELECT ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
FROM tblTaskResults ttr
LEFT JOIN tlkpKeyTasks tkt ON CINT(tkt.TaskCounter) = CINT(ttr.TaskCounter)
WHERE tkt.TaskCounter IN (
        '001410'
        ,'001463'
        ,'001431'
        ,'001411'
        ,'001464'
        ,'001432'
        )
) AS tktResults 
    ON tc2.VisitType = tktResults.VisitType
AND tktResults.ChildCounter = tc2.ChildCounter
WHERE tc2.VisitType in (1, 2, 3, 4)
   AND tc2.ConsDate > '19980127' AND tc2.ConsDate < '20130228'
GROUP BY CINT(MID(TC2.CHILDCOUNTER, 7, LEN(TC2.CHILDCOUNTER)))
                                            ,TC2.VISITTYPE
                                            ,TC.CENTRECODE
                                            ,TC2.CENTRECODE
                                            ,TC2.COUNCILCODE
                                            ,TC2.CONSDATE
                                            ,TC.FEEDING3MONTHS
                                            ,TC.FEEDING6MONTHS
                                            ,TC.FEEDING12MONTHS
                                            ,TC2.WEIGHT
                                            ,TC2.HEADCIRC
                                    ORDER BY CINT(MID(TC2.CHILDCOUNTER, 7,  LEN(TC2.CHILDCOUNTER)) ), TC2.VISITTYPE 
```

# html - 每个下方的水平规则/线

> ID：16073323
> 
> 赞同：19
> 
> 时间：2013-04-18T02:02:40.937
> 
> 标签：html, css

我正在尝试在每个实例下方自动放置一条 100% 水平线（规则）

```
 <h1> 
```

使用 CSS 的标题标签。

我想看的例子：

--- 剪断 8< ---

介绍

* * *

--- 剪断 8< ---

我的 CSS 中有这个：

```
.mypage .headline {
    font-family: Calibri, "Helvetica", san-serif;
    line-height: 1.5em;
    color: black;
    font-size: 20px;
} 
```

我在我的主 HTML 页面中有这个：

```
<body class="mypage">
<h1><span class="headline">Introduction</span></h1> 
```

我无法弄清楚如何在每次使用标题类的下方出现一条水平线。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-18T02:13:00.440

您也可以尝试使用 Pseudoclass [:after。](http://www.w3.org/TR/CSS2/selector.html#before-and-after). 我在我的一个应用程序中使用了这种样式。

[http://jsfiddle.net/ffmFQ/](http://jsfiddle.net/ffmFQ/)

```
h1:after
{
    content:' ';
    display:block;
    border:2px solid black;
} 
```

您可以多整理一些以设计如下样式：- [http://jsfiddle.net/5HQ7p/](http://jsfiddle.net/5HQ7p/)

```
h1:after {
    content:' ';
    display:block;
    border:2px solid #d0d0d0;
    border-radius:4px;
    -webkit-border-radius:4px;
    -moz-border-radius:4px;
    box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
    -webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
    -moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-18T02:06:47.627

```
h1 { border-bottom: 1px solid black } 
```

根据喜好调整大小和颜色。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-18T05:52:48.847

您应该使用`border-bottom`CSS 属性。

对于 HTML，请使用以下代码：

```
<h1>Introduction</h1> 
```

对于 CSS，请使用以下代码：

```
h1
{
    border-bottom:1px solid #CCC;
    padding-bottom:3px;
} 
```

如果你想使用`float:left, float:right`属性，那么你也必须使用`width:100%`属性。`padding-bottom`是可选地在文本和水平线之间留出一些空间。

```
h1
{
    border-bottom:1px solid #CCC;
    float:left;
    width:100%;
    padding-bottom:3px;
} 
```

代码演示：http: [//jsfiddle.net/aASQe/](http://jsfiddle.net/aASQe/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-18T02:06:51.763

`border-bottom`是你需要的......并修改线与文本的距离，使用`padding-bottom`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T02:07:02.473

为什么不直接使用`border-bottom`？您也可以删除跨度..

HTML：

```
<h1 class="headline">Introduction</h1> 
```

CSS：

```
h1 {
  width:100%;
  border-bottom: solid 1px #666;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T03:37:18.267

如果您感觉有问题，您可以使用`zoom: 1;`. 看到**[这个小提琴](http://jsfiddle.net/HbdjT/)**

（我已删除`span`，但您可以将类设置为您的 h1 标签。）

### CSS

```
h1 {
    font-family: Calibri, "Helvetica", san-serif;
    line-height: 1.5em;
    color: black;
    font-size: 20px;
    border-bottom: 2px solid red;
    zoom: 1;
} 
```

HTML...

```
<h1>Introduction</h1> 
```

# android - Viewpager 位置 0 不适用于 onPageSelected(0)

> ID：16073326
> 
> 赞同：0
> 
> 时间：2013-04-18T02:02:53.143
> 
> 标签：android, android-pageradapter

我无法设置起始页的值（位置 0）

我的意思是 **QuestionPagerAdapter.tv.setText("default")** 必须在 MainActivity 的 onPageSelected(int position) case 0 中工作：但它给出了空点。但它适用于位置> 0

寻呼机适配器：

```
public class QuestionPagerAdapter extends PagerAdapter{

    public static TextView tv;

@Override
    public Object instantiateItem(View collection, int pos) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View page = inflater.inflate(R.layout.page_quiz, null);

         tv = (TextView)page.findViewById(R.id.questionText);

}
} 
```

主要活动：

```
 @Override
            protected void onCreate(final Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

               this.setContentView(R.layout.activity_main);

                mPager = (ViewPager)findViewById(R.id.pager);           
                    QuestionPagerAdapter mAdapter = new QuestionPagerAdapter();
                    mPager.setAdapter(mAdapter);

@Override
            public void onPageSelected(int position) {
                switch (position) {
            case 0: 
     //       QuestionPagerAdapter.tv.setText("default");  => doesnt works
                break;

                  default:
        QuestionPagerAdapter.tv.setText("default");  =>  works
                               break;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:21:44.760

由于您已将 textView 实例传递给 AsyncTask，因此您可以在任务开始执行之前使用 onPreExecute() 方法设置默认值。onPreExecute() 方法在 UI 线程上运行，所以应该不是问题。

[http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:32:26.750

视图寻呼机的大小必须>=2，因此请检查您的适配器的大小>0，否则，

```
@Override
public int getCount() {
    return 2;// a view pager has minimum 2 pages
} 
```

# c++ - 位移和赋值

> ID：16073327
> 
> 赞同：6
> 
> 时间：2013-04-18T02:02:53.770
> 
> 标签：c++, c, bit-shift

这有点让我发疯。

```
int a = 0xffffffff;
int b = 32;
cout << (a << b) << "\n";
cout << (0xffffffff << 32) << "\n"; 
```

我的输出是

```
-1
0 
```

为什么我没有得到

```
0
0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T02:16:31.580

简短的回答是，由于您使用的是 32-bit 的实现`int`，因此语言标准说 32-bit shift 是未定义的行为。C 标准（第 6.5.7 节）和 C++ 标准（第 5.8 节）都说

> 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

但如果你想知道*为什么*：

许多计算机都有可以移位寄存器中的值的指令，但硬件只处理实际需要的移位值。例如，当移位一个 32 位字时，只需要 5 位来表示 0 ... 31 的移位值，因此硬件可能会忽略高阶位，并且在 *86 机器上会这样做（8086 除外）。为了使编译器实现可以只使用指令而不生成额外的代码来检查移位值是否太大，C 标准的作者（其中许多代表编译器供应商）裁定较大量移位的结果是未定义的。

您的第一次移位是在运行时执行的，它遇到了这种情况……您的机器只考虑 b 的低 5 位，它们为 0，因此不会发生移位。您的第二次移位是在编译时完成的，编译器会以不同的方式计算该值，并且实际上会执行 32 位移位。

如果你想移动的量可能大于你移动的东西的位数，你需要自己检查值的范围。一种可能的方法是

```
#define LEFT_SHIFT(a, b) ((b) >= CHAR_BIT * sizeof(a)? 0 : (a) << (b)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T02:05:22.117

当您将一个值移位不少于其大小的位数（例如，对于 32 位整数，32 位或更多位）时，会发生未定义的行为。您刚刚遇到了这种未定义行为的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:12:03.167

C++ 标准说 :: 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。由于 GCC 无法处理负数或超出可预测的类型宽度或陷阱的数量的移位；它们始终被视为未定义。所以行为没有定义。

# python - Python 与 MAMP 一起工作

> ID：16073329
> 
> 赞同：0
> 
> 时间：2013-04-18T02:03:22.437
> 
> 标签：python, mysql, mamp

这几天我一直在为此苦苦挣扎。安装/卸载/重新开始。

我正在尝试使用 MAMP 让 python 与 mysql 一起工作，并遵循了许多教程，但似乎我一直在测试导入 MySQLdb 模块。

以下是我收到的错误。关于如何继续的任何建议？

```
>>> import MySQLdb
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.5-intel.egg/MySQLdb/__init__.py", line 19, in <module>
    import _mysql
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.5-intel.egg/_mysql.so, 2): Library not loaded: libmysqlclient.16.dylib
  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.5-intel.egg/_mysql.so
  Reason: image not found 
```

# c++ - C++ Builder - 文件传输

> ID：16073332
> 
> 赞同：2
> 
> 时间：2013-04-18T02:04:10.520
> 
> 标签：c++, c++builder, file-transfer

我正在使用 Embarcadero C++ Builder，我正在尝试收集尽可能多的信息，以便我可以开始制作我的程序。我想做一个客户端/服务器程序。我将使用数据库，我需要一种方法将数据库从客户端计算机传输到我的服务器计算机。如果客户端 PC 真的被破坏，我需要将客户端的数据库发回。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:53:15.623

我假设您将使用 Firebird 作为您的数据库，因为它是 C++Builder/Delphi 的默认设置。Firebird 在单个文件中维护其数据库，因此您需要使用网络组件传输它，例如[Indy](http://www.indyproject.org/)，这是 C++Builder 附带的一个很棒的套接字库。[这](http://delphi.about.com/od/networking/l/aa112602a.htm)是一篇关于使用 Delphi 通过网络传输数据的文章（可轻松翻译为 C++）。祝你好运！

# php - PHP 邮件未使用 ajax 发送表单数据。电子邮件中的数据为空白

> ID：16073336
> 
> 赞同：1
> 
> 时间：2013-04-18T02:04:38.787
> 
> 标签：php, ajax, codeigniter, email

我正在使用 codeignitor 安装一个简单的注册表单。

电子邮件正在发送，但表单数据未显示在电子邮件中。数据通过 AJAX 发送到欢迎文件并点击公共函数 signup()。

它正在访问文件，因为电子邮件正在发送，但没有表单数据。

形式：

```
<div class="form">
                                <form ONSUBMIT="return checkRequired(this)" method="post" id="subForm">
                                    <div class="signupbox">
                                         <span class="label"><label for="FirstName">First Name:</label></span>
                                            <span><input type="text" name="firstname" id="firstName" size="25" class="required" /></span>
                                    </div>
                                    <div class="signupbox">
                                        <span class="label"><label for="LastName">Last Name:</label></span>
                                            <span><input type="text" name="lastname" id="lastName" size="25" class="required" /></span>
                                    </div>
                                    <div class="signupbox">
                                        <span class="label"><label for="email">Email:</label></span>
                                            <span><input type="text" name="email" id="email" size="25" class="required" /></span>
                                    </div>
                                    <div class="signupbox">
                                        <span class="label"><label for="Company">Company:</label></span>
                                            <span><input type="text" name="company" id="company" size="25" /></span>
                                    </div>
                                    <div class="signupbox">
                                        <span class="label"><label for="Comments">Tell us about yourself:</label></span>
                                            <span><textarea name="comments" id="comments" cols="45" rows="5" ></textarea></span>
                                    </div>
                                    <div>
                                        <span class="button"><input type="submit" value="Sign Up" id="ajaxsubmit" /></span>
                                    </div>
                                </form>
                            </div> 
```

注册.js：

```
$(document).ready(function(){

$('#ajaxsubmit').click(function(){

    var formobj = new Object();

    formobj.firstName = $('#firstName').val();
    formobj.lastName = $('#lastName').val();
    formobj.email = $('#email').val();
    formobj.company = $('#company').val();
    formobj.comments = $('#comments').val();

    //alert(JSON.stringify(formobj));

            $.ajax({
              type: 'post',
              url: 'http://www.alloi.co/signup',
              dataType: 'json',
              data: JSON.stringify(formobj) 
              });
    })

}); 
```

欢迎.php：

```
public function signup()
{

    $fname = $this->input->post('firstname', TRUE);
    $lname = $this->input->post('lastname', TRUE);
    $email = $this->input->post('email', TRUE);
    $company = $this->input->post('company', TRUE);
    $comments = $this->input->post('comments', TRUE);
    $headers = "MIME-Version: 1.0";
    $headers = "Content-type: text/plain; charset=iso-8859-1";
    $headers = "X-Mailer: PHP/".phpversion();

    $message = $fname." ".$lname. " has signed up for COMPANY.\n\nYou can reach ".$fname." at ".$email."\n\n".$fname." works for ".$company. "\n\n \n\n" .$comments;        

    mail("someone@email.com", 'Alloi Account Sign-up', $message, $headers);
} 
```

电子邮件：

已注册 ALLOI。

您可以到达

效劳于

我敢肯定这很简单，但我仍在学习。我做错了什么不发送表单数据？

非常感谢您，

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:09:28.217

您在帖子中发送 json，但您尝试在服务器端以 application/x-www-form-urlencoded 的形式读取数据，如果您想在服务器端按原样读取数据，只需按`formobj`原样传递

```
$.ajax({
    type: 'post',
    url: 'http://www.alloi.co/signup',
    data: formobj
}); 
```

# knockout.js - 淘汰赛js：初始化嵌套在observableArray中的下拉列表的值

> ID：16073337
> 
> 赞同：0
> 
> 时间：2013-04-18T02:04:40.933
> 
> 标签：knockout.js

我已经在其他地方看到了这个问题的一些解决方案，但还没有找到如何在我的*具体情况下*完成这项工作。

observableArray 填充一个 html 列表。在列表中，用户可以编辑特定行的值之一。行中要编辑的项目本身就是一个填充下拉列表的 observableArray。当单击行上的编辑按钮时，下拉列表的数组通过 ajax 调用填充（编辑按钮未在下面的代码中显示）。

除了一个重要问题外，我的一切工作正常：到目前为止，下拉列表中的值尚未预先填充。

下面是真实代码在做什么的粗略模型。

如果我在 html 中调用，则填充初始值`selectedTeamType`，**但未**注册对选择框的进一步更改。如果我调用as just ，则初始值设置不正确，但**会**注册对选择框的进一步更改。`selectedTeamType()`**`selectedTeamType``selectedTeamType`**

 ******HTML**

```
<table>
    <tr>    <!-- ko foreach: my.TeamViewModel.Teams -->
      <td data-bind="text: TeamID"></td>
      <td data-bind="text: TeamText"></td>
      <td>  <!-- the TeamType will be editable, so we provide a dropdown list, but default to the current value -->
         <select data-bind="options: my.TeamViewModel.TeamTypes, 
             optionsText: 'TeamTypeText', 
             optionsValue: 'TeamTypeID', 
                 value: selectedTeamType"></select>
        </td>
   </tr> <!-- /ko -->
</table> 
```

**JAVASCRIPT**

```
var my = my || {};

$(function () {

my.TeamModel = function () {
    var self = this;
    self.TeamID = ko.observable();
         self.TeamText = ko.observable();
    self.TeamTypeID = ko.observable();
    self.selectedTeam = ko.observable(); 
         self.Edit = function () {
            my.TeamViewModel.load_TeamTypes();
        };
};

my.TeamTypesModel = function () {
    var self = this;
    self.TeamTypeID = ko.observable();
    self.TeamTypeText = ko.observable();
};

my.TeamViewModel = function () {
    var Teams = ko.observableArray([]),
        TeamTypes = ko.observableArray([]),
        load_TeamTypes = function () {
            $.ajax({
                      // only part of ajax call displayed here for sake of brevity...              
                                $.each(data, function (i, d) {
                                    TeamTypes.push(new my.TeamTypesModel()
                                            .TeamTypeID(d.TeamTypeID)
                                            .TeamTypeText(d.TeamTypeText)
                                    );
                                });
            });
        },
        load_Teams = function () {
            $.ajax({
                      // only part of ajax call displayed here for sake of brevity...   
                    $.each(data, function (i, d) {
                        Teams.push(new my.TeamModel()
                                .TeamID(d.TeamID)
                                .TeamText(d.TeamText)
                        );
                    });
                }
            });
        };
    return {
        Teams: Teams,
        TeamTypes: TeamTypes,
        load_TeamTypes: load_TeamTypes
    };
} ();

my.TeamViewModel.load_Teams();
ko.applyBindings(my.TeamViewModel); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:44:33.210

是在填充数组`selectedTeamType`之前设置的吗？`my.TeamViewModel.TeamTypes`如果是这样，这可能是未设置其初始值的原因。我在您发布的 javascript 中没有看到您设置初始值的任何地方`selectedTeamType`。

**更新**

您对自己问题的回答证实了我上面的怀疑。每次用户编辑团队时，您是否需要加载团队类型下拉列表？如果每个团队的选择选项都相同，为什么不加载一次呢？

例子：

```
my.TeamViewModel.load_Teams();
my.TeamViewModel.load_TeamTypes();
ko.applyBindings(my.TeamViewModel); 
```

这样，当用户单击编辑按钮时，选项列表应该已经加载。如果列表中的每个团队都不需要新的团队类型选项列表，它也可以为您的客户端/服务器节省一些汗水。

如果你想保证`$.ajax`在你做任何事情之前这两个调用都会完成，我建议你研究一下jQuery的`$.Deferred`方法和promise API。当您有超过 1 个`$.ajax`调用，并且只有在两者都成功后才需要执行操作时，您可以执行以下操作：

```
var defer_Teams = $.Deferred();
var defer_TeamTypes = $.Deferred();
$.ajax({ // initiate the server call to get teams
    url: '/teams',
    success: function(data) {
        defer_Teams.resolve(data); // tell the promise API this is ready
    }
});
$.ajax({ // initiate the server call to get team types
    url: '/team-types',
    success: function(data) {
        defer_TeamTypes.resolve(data); // tell the promise API this is ready
    }
});

$.when(defer_Teams, defer_TeamTypes).then(function(teamData, teamTypeData) {

    $.each(teamTypeData, function(i, d) {
        // populate team types array
        // could also do this with ko.mapping instead of $.each
    })

    $.each(teamData, function(i, d) {
        // populate teams array
        // could also do this with ko.mapping instead of $.each
    })

}); 
```

假设您的 /teams 呼叫快速返回，但您的 /team-types 呼叫滞后。使用上述方法，在两个调用完成之前不会填充团队数组。在用户单击编辑按钮并获得预填充的选定值之前，您确实需要完成类型调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:46:55.960

明显的修复涉及两个步骤：

`TeamType`首先，在函数中传递对当前项及其当前项的引用`Edit`。

```
self.Edit = function () {
    var that = this; 
    var _TeamType = self.TeamTypeID();
    my.TeamViewModel.load_TeamTypes(that, _TeamType);
}; 
```

然后，最重要的是，将这些引用传递给加载 TeamTypes 的函数，并在加载 TeamTypes 数组之后设置 selectedTeamType；在这种情况下， selectedTeamType 是在`complete`jQuery 的函数中设置的`ajax`。

```
load_TeamTypes = function (that, _TeamType) {
    $.ajax({
              // only part of ajax call displayed here for sake of brevity...              
                        $.each(data, function (i, d) {
                            TeamTypes.push(new my.TeamTypesModel()
                                    .TeamTypeID(d.TeamTypeID)
                                    .TeamTypeText(d.TeamTypeText)
                            );
                        });

                //...ajax continued
                complete: function () {
                    that.selectedTeamType(_TeamType);
                }
    });
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:23:39.263

你有没有试过改变你的构造函数来接受 d 喜欢这样

```
my.TeamTypesModel = function (data) {
        var self = this;
        self.TeamTypeID = ko.observable(data.TeamTypeId);
        self.TeamTypeText = ko.observable(data.TeamTypeText);
    }; 
```****

# c# - C#命令不写一行

> ID：16073338
> 
> 赞同：1
> 
> 时间：2013-04-18T02:04:49.573
> 
> 标签：c#

那么你好，我如何让这个控制台写一行？我设法让它在你处理它时运行 cmd.exe，但它不写行。

```
private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == "alpha")
        {
            progressBar1.Value = 100;
            if (progressBar1.Value == 100)
            {
                MessageBox.Show("Welcome back master!");
                System.Diagnostics.Process.Start(@"C:\Windows\System32\cmd.exe");
                Console.WriteLine("Hello!!!");
            }

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T02:23:37.097

如果你想与控制台进程交互，你需要这样做： -

```
var p = new Process
    {
        StartInfo =
            {
                FileName = "cmd.exe", 
                UseShellExecute = false, 
                RedirectStandardInput = true, 
                RedirectStandardOutput = true
            }
    };
p.Start();
var w = p.StandardInput;                
w.WriteLine("Dir");
w.WriteLine("Exit");            
var theDirectoryListing = p.StandardOutput.ReadToEnd();
p.WaitForExit();
w.Close();            
p.Close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T02:08:33.473

我假设这是一种您设法调用的方法。System.Diagnostics.Process.Start 调用将创建一个命令框。但是，Console.WriteLine 将尝试写入创建您的进程的任何一个（不是上面行中的 cmd.exe），如果它是桌面应用程序，则调用将没有控制台可写入，因此不会给您任何消息。

# java - 绘制选择排序的视觉效果

> ID：16073342
> 
> 赞同：0
> 
> 时间：2013-04-18T02:05:23.653
> 
> 标签：java, swing, sorting

我正在做一个程序，它创建一个由 50 个数字组成的数组，然后在面板中将它们绘制为矩形，大小基于数字。单击面板时，将对数组进行排序并重新绘制面板以显示正在排序的数字的某种动画。这是单击面板之前和之后的样子： [![图片](https://i.stack.imgur.com/SCbNz.png)](https://i.stack.imgur.com/SCbNz.png)

这是我的代码：

```
public class AnimatedSelectionSortPanel extends javax.swing.JPanel {

int[] numbers = new int[50];
int min = 20;
int max = 100;

private void loadArray() {
    int num;
    for (int i = 0; i < numbers.length; i++) {
        numbers[i] = min + (int) Math.random() * ((max - min) + 1);
    }
}

public static void selectionSort(int[] x) {
    for (int i = 0; i < x.length - 1; i++) {
        int minIndex = i;      // Index of smallest remaining value.
        for (int j = i + 1; j < x.length; j++) {
            if (x[minIndex] > x[j]) {
                minIndex = j;  // Remember index of new minimum
            }
        }
        if (minIndex != i) {
            //...  Exchange current element with smallest remaining.
            int temp = x[i];
            x[i] = x[minIndex];
            x[minIndex] = temp;
        }
    }
}

private void drawPass(Graphics g) {
    int xPos = 10;
    int yPos = 120;
    int rectWidth = 1;

    for (int num : numbers) {
        g.setColor(Color.black);
        g.drawRect(xPos, yPos, rectWidth, num);
        xPos += 11;
    }
}

@Override
public void paintComponent (Graphics g) {
    while (numbers.length == 0) {
        loadArray();
    }
    drawPass(g);
}

private void sortPanelMouseClicked(java.awt.event.MouseEvent evt) {
    selectionSort(numbers);
    sortPanel.repaint();
} 
```

我遇到的问题是，当我单击面板时，框架中没有任何内容被绘制。有人可以告诉我我在做什么有什么问题吗？

如果有帮助，这是来自 GUI 构建器的自动生成的代码：

```
 private void initComponents() {

    sortPanel = new javax.swing.JPanel();

    sortPanel.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
    sortPanel.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            sortPanelMouseClicked(evt);
        }
    });

    javax.swing.GroupLayout sortPanelLayout = new javax.swing.GroupLayout(sortPanel);
    sortPanel.setLayout(sortPanelLayout);
    sortPanelLayout.setHorizontalGroup(
        sortPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 398, Short.MAX_VALUE)
    );
    sortPanelLayout.setVerticalGroup(
        sortPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 165, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(sortPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addComponent(sortPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
}// </editor-fold> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:22:06.643

以下是一些建议：

1.  请发布一个可编译的示例 - *SSCCE*

2.  不要在这种方法中投入太多逻辑`paintComponent`，也不要分配数据。它的目的是绘画。提前准备好数字数组。

3.  `min + (int) Math.random() * ((max - min) + 1);`始终为 20，因为`(int) Math.random()`始终为零。您应该转换结果，即：`min + (int) (Math.random() * ((max - min) + 1));`

4.  将排序过程包装到线程或计时器中。在迭代之间等待并调用`repaint()`以绘制中间结果。`selectionSort`包装到 Swing 计时器中更干净，更可取，但在发布的代码中，将整个逻辑转储到线程中可能更容易/更快。有关一些示例，请参阅[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)教程。另请参阅[如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

5.  看起来像`drawPass`颠倒绘制矩形。

这是一个使用现有代码的示例，只进行了最少的更改：

![在此处输入图像描述](https://i.stack.imgur.com/9wUA4.png) ![在此处输入图像描述](https://i.stack.imgur.com/loEi7.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class AnimatedSelectionSortPanel extends javax.swing.JPanel {

    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.add(new AnimatedSelectionSortPanel());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }

    private int[] numbers = new int[50];
    private int min = 20;
    private int max = 100;
    private boolean shuffle = false;
    public static final int ITERATION_SLEEP = 100;

    public AnimatedSelectionSortPanel() {
        loadArray();
        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (shuffle)
                    loadArray();
                selectionSort(numbers);
                shuffle = true;
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(300, 100);
    }

    private void loadArray() {
        for (int i = 0; i < numbers.length; i++) {
            numbers[i] = min + (int) (Math.random() * ((max - min) + 1));
        }
    }

    public void selectionSort(final int[] x) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                    for (int i = 0; i < x.length - 1; i++) {
                    int minIndex = i; // Index of smallest remaining value.
                    for (int j = i + 1; j < x.length; j++) {
                        if (x[minIndex] > x[j]) {
                            minIndex = j; // Remember index of new minimum
                        }
                    }
                    if (minIndex != i) {
                        // ... Exchange current element with smallest remaining.
                        int temp = x[i];
                        x[i] = x[minIndex];
                        x[minIndex] = temp;
                    }
                    repaint();
                    try {
                        Thread.sleep(ITERATION_SLEEP);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }               
            }
        }).start();
    }

    private void drawPass(Graphics g) {
        int rectWidth = 1;

        int width = getWidth() - 1;
        int height = getHeight() - 1;
        int colSpan = Math.round((float)width / (float)numbers.length);
        int x = 0;

        for (int num : numbers) {
            int colHeight = (int) ((float) height * ((float) num / (float) 100));
            g.fillRect(x, height - colHeight, rectWidth, colHeight);
             x += colSpan;
        }
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        drawPass(g);
    }
} 
```

# javascript - 在 JS 中使用计时器和进度条

> ID：16073344
> 
> 赞同：0
> 
> 时间：2013-04-18T02:05:31.793
> 
> 标签：javascript, timer

我正在尝试创建一个简单的脚本，用户单击一个按钮，进度条慢慢填充到 100%（我知道令人兴奋吗？）

所以我把这个片段设置为我的计时器：

```
this.updateBar = setInterval(function () { that.update(); }, 50); 
```

我遇到的问题是正确编写方法，以便进度条慢慢填满。我很明显有逻辑错误，但我太深了，我看不到它们。这就是我所拥有的，显然是不完整的，但甚至没有让我开始着手。

```
ProgressBar.prototype.update = function () {
   if(this.bar.style.width == "0%")
   {
       this.bar.style.width = "20%";
   }

} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:19:26.610

在 ProgressBar 构造函数中，添加：

```
this.progress = 0; 
```

然后将更新函数更改为：

```
ProgressBar.prototype.update = function () {
    this.progress++; 
    this.bar.style.width = this.progress + "%";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:22:00.327

你有一个好的开始。在我看来，50 毫秒的更新间隔相当快，我建议接近 500 毫秒。但是对于您的功能，像这样的增量可能会更好：

```
ProgressBar.prototype.update = function () {
  current = this.bar.style.width.split('%')[0];
  if(current !>= 100) {
    current = current + 20;
    this.bar.style.width = current + "%";
  }
} 
```

# google-drive-api - Google Drive (401) 未授权错误

> ID：16073345
> 
> 赞同：1
> 
> 时间：2013-04-18T02:05:33.390
> 
> 标签：google-drive-api

自 10 月以来，我一直在使用 Google Drive SDK 集成。从那以后它一直运行良好，自从我开始工作以来，我没有修改项目中的代码。今天，由于某种未知的原因，每个下载或上传文件到驱动器的请求都会返回一个错误：

远程服务器返回错误 (401) 未授权。

我目前正在处理的代码部分是：

```
 public static Stream GetDownloadStream(string id)
    {
        File file = DriveService.Files.Get(id).Fetch();
        if (!String.IsNullOrEmpty(file.DownloadUrl))
        {
            Stream stream;
            var request = (HttpWebRequest) WebRequest.Create(
                new Uri(file.DownloadUrl));
            Auth.ApplyAuthenticationToRequest(request);
            try
            {
                var response = (HttpWebResponse)request.GetResponse();
                if (response.StatusCode == HttpStatusCode.OK)
                {
                    stream = response.GetResponseStream();
                }
                else
                {
                    throw new Exception(response.StatusDescription);
                }
                return stream;
            }
            catch(Exception e)
            {
                GetCredentials();
                return GetDownloadStream(id);
            }
        }
        throw new Exception("File Cannot Be Downloaded.");
    } 
```

在 request.GetResponse() 方法调用中返回错误。DriveService 正确加载文件，并且该文件具有格式正确的 DownloadURL。DriveService 的所有内容似乎都可以在其余代码中运行，它可以正确搜索和检索文件信息，但由于某种原因，它不会下载或上传。我需要合并到我的代码中的谷歌服务器端的 DownloadURL 的格式是否发生了一些变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T17:14:21.697

您是否禁用了网络安全？似乎谷歌驱动器正在检查那个。

--禁用网络安全

如果是这样，请启用网络安全。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T11:44:09.243

有时 downloadurl 已过期，以便有时间创建新请求并再次下载文件。也是因为不正确的刷新令牌和访问令牌。

# php - 试图理解一些与zend相关的函数

> ID：16073347
> 
> 赞同：0
> 
> 时间：2013-04-18T02:05:47.307
> 
> 标签：php, zend-framework

```
/**
    * getter method, basically same as offsetGet().
    *
    * This method can be called from an object of type Zend_Registry, or it
    * can be called statically.  In the latter case, it uses the default
    * static instance stored in the class.
    *
    * @param string $index - get the value associated with $index
    * @return mixed
    * @throws Zend_Exception if no entry is registerd for $index.
    */
public static function get($index)
    {
        $instance = self::getInstance();

        if (!$instance->offsetExists($index))
        {
            if ($instance->lazyLoad($index, $return))
            {
                return $return;
            }
            else
            {
                throw new Zend_Exception("No entry is registered for key '$index'");
            }
        }

        return $instance->offsetGet($index);
    }
...
public static function getDb()
    {
        return self::get('db');
    }

... 
```

这是取自Xenforo/Application.php，虽然注释很清楚，但还是有一些疑问：

1.  `$instance = self::getInstance();`这条线在这里是什么意思？
2.  `$instance->lazyLoad;`找不到这个方法的声明：lazyLoad，也是Zend文件吗？
3.  `$instance->offsetGet($index)`，我在**SPL.php**中看到了它的声明，是：
    `public function offsetGet ($index) {}`，但是在{}里面是空的，那么这个函数是怎么实现的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:28:38.330

这是关于您的三个问题的简要说明

**1\. $instance = self::getInstance(); 这条线在这里是什么意思？**

**答案 1.** getInstance 方法用于获取该类实例，无需执行 $test = new class_name(); getInstance 方法是静态的，因此您无需声明 new class_name(); 即可获取该类实例；在 getInstance 方法中，它的检查是否设置了 _instance？如果未设置，则创建自己的类实例，然后返回该实例。

**2\. $instance->lazyLoad；找不到这个方法的声明：lazyLoad，也是Zend文件吗？**

**回答 2。**您可以从下面的链接中了解延迟加载，以便您对延迟加载有更好的了解。[关联](http://tech.vg.no/2012/06/01/lazy-loading-resources-with-zend-framework-bootstrap/)

**3\. $instance->offsetGet($index)，我在SPL.php中看到了它的声明，是：public function offsetGet($index){}，但是{}里面是空的，那么这个函数是怎么实现的呢？**

**答案 3.**这个方法可以从 Zend_Registry 类型的对象调用，也可以静态调用。在后一种情况下，它使用存储在类中的默认静态实例。

参数：字符串 $index - 获取与 $index 关联的值 返回：mixed 异常：如果没有为 $index 注册条目，则 Zend_Exception。

如果我能帮助你更多，请告诉我..

# ruby-on-rails - 使用 fields_for 和回形针多个文件更新

> ID：16073353
> 
> 赞同：1
> 
> 时间：2013-04-18T02:06:21.920
> 
> 标签：ruby-on-rails, paperclip

我正在尝试使用回形针 gem 将多个文件上传到 S3 并参考[本](http://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads)教程。我有两个问题 1\. 上传标签只呈现一次，而不是控制器中指定的 6 次。2.其次，每当我尝试编辑文档时，都会出现以下错误。

> DocumentsController#edit 中的 ActiveRecord::UnknownAttributeError
> 
> 未知属性：document_id

任何建议如何解决这个问题？

**模型/文档.rb**

```
class Document < ActiveRecord::Base
  attr_accessible :documentId, :name, :notes, :user_id

  belongs_to :user
  has_many :photos, :dependent=>:destroy
  accepts_nested_attributes_for :photos

  acts_as_taggable

  validates :name, :length => {:minimum =>3}
  validates_date :dtReminder, :on_or_after => lambda { Date.current }, :allow_blank => true

  validates_associated :user
  validates_uniqueness_of :name, :scope => :user_id
end 
```

**模型/照片.rb**

```
class Photo < ActiveRecord::Base
  belongs_to :document

  has_attached_file :image, :style =>{:thumb => '150x150#',
          :medium => '300x300>',
          :large => '600x600>'
  }

  validates_attachment_size :photo, :less_than => 500.kilobytes

end 
```

**控制器/document_Controller.rb**

```
 def new
        @document = Document.new
        @document.user = current_user
        5.times {@document.photos.build}

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @document }
        end
      end

def create
    @document = Document.new(params[:document])
    @document.user = current_user
    5.times {@document.photos.build}

    respond_to do |format|
      if @document.save
        format.html { redirect_to user_documents_path(current_user), notice: 'Document was successfully created.' }
        format.json { render json: @document, status: :created, location: @document }
      else
        format.html { render action: "new" }
        format.json { render json: @document.errors, status: :unprocessable_entity }
      end
    end
  end 
```

视图/文档/_form.html.erb

```
<%= form_for(document) do |f| %>

        <table>
                <tr>
                        <td><%= f.label :name %></td>
                        <td><%= f.text_field :name %></td>
                </tr>
                <tr>
                        <td><%= f.label :notes  %></td>
                        <td><%= f.text_area :notes %></td>
                </tr>
                <tr>
                                         <td>Photos</td>
                        <td>
                                <%= fields_for :photos do |photo|%>
                                        <%= photo.file_field :image%>
                                <%end%>
                        </td>

                </tr>
                <tr>
                        <td></td>
                        <td><%= f.submit %></td>
                </tr>
        </table>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:54:06.463

对于多个图像上传字段，请查看 Ryan Bate 关于非常相似主题的截屏视频。

[http://railscasts.com/episodes/73-complex-forms-part-1](http://railscasts.com/episodes/73-complex-forms-part-1)

[http://railscasts.com/episodes/74](http://railscasts.com/episodes/74)

[http://railscasts.com/episodes/75](http://railscasts.com/episodes/75)

# actionscript-3 - ActionScript 编译器 UncaughtErrorEvent

> ID：16073357
> 
> 赞同：3
> 
> 时间：2013-04-18T02:06:50.797
> 
> 标签：actionscript-3, flash, air

在使用 asc2 编译 AIR 应用程序后，我发现在捕获 UncaughtErrorEvent 时缺少错误堆栈跟踪。

这是示例代码：

```
var root:Sprite = this;
root.loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR,errorHandle);
throw new Error("test");

protected function errorHandle(event:UncaughtErrorEvent):void
        {
            var message:String; 
            if (event.error is Error) { 
                message = Error(event.error).message; 
                message+="\n"+Error(event.error).getStackTrace();
            } else if (event.error is ErrorEvent) { 
                message = ErrorEvent(event.error).text;
            } else { 
                message = event.error.toString(); 
            } 
        } 
```

使用 ASC1 时，我可以在错误句柄中看到完整的堆栈跟踪。但是使用 ASC2，只是一个空的堆栈跟踪。

有人有同样的问题吗？

您如何获得 UncaughtErrorEvent 堆栈跟踪？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T06:25:32.867

不要投射`event.error`到`Error`，如：

```
Error(event.error).getStackTrace() 
```

获取错误的堆栈跟踪将在错误构造为字符串时返回错误的调用堆栈。请注意，堆栈跟踪的行号是强制转换的行。

相反，调用`getStackTrace()`from `event.error`，如下所示：

```
event.error.getStackTrace() 
```

根据您的示例，堆栈上没有什么重要的。

添加递归有助于证明问题：

```
package
{
    import flash.display.Sprite;
    import flash.events.UncaughtErrorEvent;

    public class ExceptionTest extends Sprite
    {
        public function ExceptionTest()
        {
            super();

            loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR, uncaughtErrorHandler);
            recursion();
        }

        protected function recursion(depth:uint=0):void
        {
            if (depth == 5)
                throw new Error("test");
            else
                recursion(++depth);
        }

        protected function uncaughtErrorHandler(event:UncaughtErrorEvent):void
        {
            trace(event.error.getStackTrace());
        }
    }
} 
```

...会产生：

```
Error: test
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:19]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:13]
[SWF] Users:jsturges:dev:flash-workspace:X:bin-debug:ExceptionTest.swf - 1,745 bytes after decompression
Error: test
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:19]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:13] 
```

如果`uncaughtErrorHandler()`更改为您的示例转换为`Error`，如：

```
protected function uncaughtErrorHandler(event:UncaughtErrorEvent):void
{
    trace(Error(event.error).getStackTrace());
} 
```

调试器捕捉到异常，但是`getStackTrace`是转换的行：

```
Error: test
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:19]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest/recursion()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:21]
    at ExceptionTest()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:13]
[SWF] Users:jsturges:dev:flash-workspace:X:bin-debug:ExceptionTest.swf - 1,519 bytes after decompression
Error: Error: test
    at ExceptionTest/uncaughtErrorHandler()[/Users/jsturges/dev/flash-workspace/X/src/ExceptionTest.as:26] 
```

`UncaughtErrorEvent`将 AS1 和 AS2 编组到支持从 Flash Player 10.1 开始的AS3 也可能存在细微差别。

除此之外，请确保每个 ActionScript 版本都有适当的调试播放器。在运行时的非调试器版本中，该`Error.getStackTrace()`方法返回`null`.

# powershell - 如何镜像具有给定模式的文件（通配符）

> ID：16073362
> 
> 赞同：0
> 
> 时间：2013-04-18T02:07:08.677
> 
> 标签：powershell, mirror, copy-item

我有一个文件夹，里面有很多安装文件。我想取其中一些（通过给定模式找到）并将它们镜像到闪存驱动器。

**资源：**

```
D:\ccleaner124.exe
D:\dfc221.exe
D:\abc.exe 
```

**目的地：**

```
H:\ccleaner123.exe
H:\dfc221.exe 
```

**模式：（**直接存储在脚本中或某个 .txt 文件中）

```
D:\ccleaner*.exe
D:\dfc*.exe 
```

**结果：**

*来源：*不变

*目的地：*

```
H:\ccleaner124.exe // deleted 123 as it had lower version number in pattern [a-zA-Z_-]*([0-9]*) and copied 124 instead
H:\dfc221.exe // current, so kept the same as it was (no copy) 
```

我查看了 Copy-Item 函数属性，但在那里我没有找到类似“mirror”参数的任何东西。甚至可以用 Power Shell 做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:51:58.153

贝娄工作脚本（我前一段时间写了一些类似的东西）。放到copy.ps1中，修改sourceDir、destDir、pattern数组

```
function removeName($txt)
{
    $inputPattern = "^[a-z]+"
    $txt = [System.Text.RegularExpressions.Regex]::Replace($txt, $inputPattern, "");
    $inputPattern = "[.][a-z]+"
    $txt = [System.Text.RegularExpressions.Regex]::Replace($txt, $inputPattern, "");
    return [int]$txt;
}

$pattern = @('a*.txt', 'b*.txt')
$sourceDir = 'C:\source'
$destDir = 'C:\dest'

$pattern | foreach{
    $p = $_;
    $s = Get-ChildItem -Filter $p -Path $sourceDir;
    $sName = removeName $s.Name
    $d = Get-ChildItem -Filter $p -Path $destDir;
    $dName = removeName $d.Name
    if($sName -gt $dName)
    {
        Write-Host $s.Name 
        Write-Host $sName
        rm -Force $d.FullName
        Copy-item $s.FullName $destDir
    }
} 
```

# android - Cocos2d-x admob 集成

> ID：16073365
> 
> 赞同：1
> 
> 时间：2013-04-18T02:07:48.460
> 
> 标签：android, admob, cocos2d-x

有什么好的链接可以在我的应用程序中集成 cocos2d-x admob 吗？我的活动正在扩展 CCLayer。

如何在该文件中集成 admob。请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T02:08:01.660

[http://rastergrid.com/blog/2013/03/admob-extension-for-cocos2d-x-android/](http://rastergrid.com/blog/2013/03/admob-extension-for-cocos2d-x-android/)

这是一个很好的教程，一步一步将admob集成到cocos2D-x（Android）中。我已经按照该教程进行操作，并且有效！

在 iOS 上，集成 admob 将非常容易，因为 c++ 和 object-c 可以一起工作。您需要做的是在 c++ 和用 object-c 编写的 admob iOS SDK 代码之间架起一座桥梁

事实上，我不认为会有一个完美的跨平台 3rd-party SDK 集成解决方案。您可能需要在每个平台上单独实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:56:44.553

您可以为您的项目选择 Plugin-x。[点击这里](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Plugin-X):)

# android - 当我设置 listView.onScrollListener(this) 时调用 onScroll，但没有任何触摸

> ID：16073368
> 
> 赞同：35
> 
> 时间：2013-04-18T02:07:59.837
> 
> 标签：android, android-listview, onscroll

当我`onScrollListener`为 my设置时`ListView`，它会调用`onScroll`. 这会导致崩溃，因为某些事情尚未初始化。

这是正常的吗？注意：这是在我什至没有触摸手机的情况下发生的。

```
public class MainActivity1 extends Activity implements OnClickListener, OnScrollListener {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout1);

    ListView lv = (ListView)findViewById(R.id.listview1);
    lv.setOnScrollListener(this);
    ...
}
...
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount){
    if( firstVisibleItem+visibleItemCount == totalItemCount ){
        pullContactList();
    }
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-08-22T15:57:52.070

只是提醒一下，根据 javadoc

> MotionEvent.ACTION_SCROLL **：**
> 
> 这个动作总是传递给指针下的窗口或视图，可能不是当前触摸的窗口或视图。
> 
> 这个动作不是一个触摸事件，所以它被传递给 onGenericMotionEvent(MotionEvent) 而不是 onTouchEvent(MotionEvent)。

因此，`motionEvent.getAction()`将永远不会获得 SCROLL 事件。检查 MOVE 将完成这项工作

你也可以在`onScrollStateChanged`方法中做类似的事情`OnScrollListener`

```
@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
        if(scrollState == OnScrollListener.SCROLL_STATE_TOUCH_SCROLL){
            userScrolled = true;
        }   
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-18T02:41:32.227

这很正常，因为`setOnScrollListener`in `AbsListView`（的超类`ListView`）的源代码是这样做的：

```
 public void setOnScrollListener(OnScrollListener l) {
        mOnScrollListener = l;
        invokeOnItemScrollListener();
    } 
```

并`invokeOnItemScrollListener`这样做：

```
/**
     * Notify our scroll listener (if there is one) of a change in scroll state
*/
    void invokeOnItemScrollListener() {
        if (mFastScroller != null) {
            mFastScroller.onScroll(this, mFirstPosition, getChildCount(), mItemCount);
        }
        if (mOnScrollListener != null) {
            mOnScrollListener.onScroll(this, mFirstPosition, getChildCount(), mItemCount);
        }
        onScrollChanged(0, 0, 0, 0); // dummy values, View's implementation does not use these.
    } 
```

根据您要执行的操作，有多种方法可以避免此问题。

编辑：

由于您只想在用户实际滚动时执行此操作，因此我想您可以执行以下操作：

```
 lv.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View view, MotionEvent motionEvent) {
                    if(view == lv && motionEvent.getAction() == MotionEvent.ACTION_SCROLL) {
                      userScrolled = true;
    }
return false;
                }
            }); 
```

然后..

```
lv.setOnScrollListener(new AbsListView.OnScrollListener() {
    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount){
        if(userScrolled && firstVisibleItem+visibleItemCount == totalItemCount ){
            pullContactList();
        }
    }

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-14T05:46:09.583

我使用这个解决方案，它对我来说很好：

```
public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_IDLE) {
                canScroll = false;
            } else if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_FLING ||
                    scrollState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {
                canScroll = true;

            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T07:23:49.373

只有当 visibleItemCount > 0 时，您才能完成需要的任务；

```
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount){
    if (visibleItemCount > 0 ){
        //perform the task to be done
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T06:11:57.893

为我工作的解决方案！！！结合上述答案，我提出了解决方案！感谢@LuxuryMode 和@CrazyGreenHand

**我的 TouchListener：** 因为 MotionEvent.ACTION_SCROLL 没有被触发，所以我使用了 MOVE 动作

```
 expandableListView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if(view == expandableListView && motionEvent.getAction() == MotionEvent.ACTION_MOVE) {
                userScrolled = true;
            }
            return false;
        }
    }); 
```

**我的滚动监听器：**

```
 expandableListView.setOnScrollListener(new AbsListView.OnScrollListener() {
        @Override
        public void onScrollStateChanged(AbsListView absListView, int i) {

        }

        @Override
        public void onScroll(AbsListView absListView, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            if (firstVisibleItem == 0){
                swipeRefreshLayout.setEnabled(true);
            }else {
                swipeRefreshLayout.setEnabled(false);
            }
            int lastVisibleItem = absListView.getLastVisiblePosition();
            if (userScrolled&&!isLoading && totalItemCount <= (lastVisibleItem + visibleThreshold)) {
                onLoadMore();
                isLoading = true;
            }
            Log.d(TAG, "onScroll: firstVisibleItem=>"+firstVisibleItem+"==>visibleItemCount=>"+visibleItemCount+"==>totalItemCount==>"+totalItemCount+"==>lastVisibleItem==>"+lastVisibleItem);
        }
    }); 
```

# python - 当我将 python 文件移动到 ubuntu 中的 scipy.stats 文件夹时，它怎么会消失？

> ID：16073371
> 
> 赞同：0
> 
> 时间：2013-04-18T02:08:19.607
> 
> 标签：python

我下载[了 http://projects.scipy.org/scipy/attachment/ticket/846/mvncdf.py](http://projects.scipy.org/scipy/attachment/ticket/846/mvncdf.py)

我：sudo mv ~/Downloads/mvncdf.py /usr/lib/pyshared/python2.7/scipy/stats

它消失了

我也尝试直接保存到 /usr/lib/pyshared/python2.7/scipy/stats 并且它仍然消失。

总的来说，我不确定如何移动它，以便如果我导入了 scipy.stats、scipy.stats.kde 等，我可以从 python 程序中调用它。这就是我真正想要解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:33:55.427

有几种方法可以在 python 中导入外部库。最简单的方法是从与文件相同的目录启动程序或解释器，所以

```
$ mkdir new_program
$ mv ~/Downloads/mvncdf.py new_program/.
$ cd new_program
$ python
>>> import mvncdf 
```

或者，正如@tcaswell 所建议的，您可以向`PYTHONPATH`环境变量添加本地路径，

```
$ mkdir ~/python_scripts 
$ mv ~/Downloads/mvncdf.py python_scripts/.
$ PYTHONPATH=$PYTHONPATH:$HOME/python_scripts
$ export PYTHONPATH 
```

最后两行可以放在`~/.bashrc`or中`~/.bash_profile`，以便每次登录时设置变量。

`sys.path` 一种更持久的方法是在您的本地用户“安装”程序应该去的地方找到一个目录。按照惯例，它位于`site-packages`您的发行版的目录之一中。如果您使用 python 2.7 版，这可能是：

```
$ sudo mv ~/Downloads/mvncdf.py /usr/lib/python2.7/site-packages/. 
```

您可以`sys.path`从 python shell检查哪些目录在您的

```
>>> import sys
>>> for i in sys.path:
...     print i
... 
```

但是，不鼓励将您自己的文件放在类似`/usr/lib/python2.7/site-packages/`的位置，因为它们可能会在 python 更新期间被覆盖。最合适的方式，也是最接近 FHS 的方式，是在`site-packages`下创建一个目录`/usr/local`，例如，

```
$ sudo mkdir -p /usr/local/lib/python2.7/site-packages 
```

然后编辑`/usr/lib64/python2.7/site.py`，找到`PREFIXES`变量，并将新目录添加到列表中，例如，

```
PREFIXES = [sys.prefix, sys.exec_prefix, '/usr/local'] 
```

Ubuntu 中可能已经有这个目录`sys.path`，所以在创建和编辑之前检查一下`site.py`。当然，如果您确实必须修改`site.py`. ，那么在升级 python 时会遇到相同的问题，只需将文件放在`/usr/lib`.

# ios - CGAffineTransformMakeRotation 未在 iOS 6 中调整视图大小

> ID：16073372
> 
> 赞同：1
> 
> 时间：2013-04-18T02:08:31.527
> 
> 标签：ios, objective-c, cocoa-touch, ios6

当我在视图上使用 CGAffineTransformMakeRotation 时，它不会调整视图的大小。它切断了部分视图。它在 iOS 5.1 上运行良好，但由于某种原因它在 iOS 6 上无法运行。

有人可以帮助解释我做错了什么/没有考虑到 iOS 6 中添加的内容吗？

这是我正在使用的代码：

```
zoomStepper.transform = CGAffineTransformMakeRotation(270.0/180*M_PI); 
```

虽然视图在 iOS 5 中按预期旋转，但在 iOS 6 中却没有。在 iOS 5 和 iOS 6 中，视图在旋转后具有相同的边界和框架。我想知道如何在 iOS 6 中获得 iOS 5 的旋转行为。

iOS 5：[![iOS 5 截图](https://i.imgur.com/8m6kvsc.png)](https://i.imgur.com/8m6kvsc.png)

iOS 6：[![iOS 6 截图](https://i.imgur.com/QKWwUop.jpg)](https://i.imgur.com/QKWwUop.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T00:05:20.897

我想到了。如果您创建一个新视图并将旋转应用于该视图，然后将您希望旋转的视图添加为子视图，它将为您旋转它并且它适用于 iOS 5 和 iOS 6：

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 94, 27)]; 
[myView setTransform:CGAffineTransformMakeRotation(270.0/180*M_PI)]; 
[self.view addSubview:myView]; 
[myView addSubview:zoomStepper]; 
```

# azure - 无法在 CreateQuery 上获取 Azure TableEntity etag

> ID：16073375
> 
> 赞同：6
> 
> 时间：2013-04-18T02:08:43.010
> 
> 标签：azure, azure-table-storage

我正在从表中查询实体，更改它们，然后执行替换操作。替换操作失败，因为 etag 上的 etag 属性为空。我检查了一下，当我从 CreateQuery() 调用中获取实体时，etag 为空，但在我执行 Retrieve() 时填充。有没有办法手动获取etag？

```
IEnumerable<MyEntity> query = from e in serviceContext.CreateQuery<MyEntity>(tableName)
                                        where e.Id == queryId
                                        select e;

MyEntity entity = query.FirstOrDefault();

// Update the MyEntity object

var replaceOperation = TableOperation.Replace(entity);
MyCloudTableClient.GetTableReference(tableName).Execute(replaceOperation);

// Exception is thrown here that eTag value is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T10:57:49.413

您是否尝试过使用 TableQuery 而不是 DataServiceQuery？

所以..

cloudTableClient.GetTableReference(TableName).CreateQuery() 而不是 serviceContext.CreateQuery..‏</p>

顺便说一句，我认为 TableQuery 在 2.1 中是新的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T09:27:39.237

问题源于您混合了两种不同的成分。

```
serviceContext.CreateQuery<MyEntity>(tableName) 
```

正在使用 System.Data.Services.Client 命名空间。在此模型中，实体本身不会跟踪 etag，上下文会为您执行此操作。

```
MyCloudTableClient.GetTableReference(tableName).Execute(replaceOperation) 
```

正在使用 Table.DataServices 命名空间。在此模型中，没有中心上下文，每个实体通过公开 Etag 属性来跟踪自己的状态。这是通过 ITableEntity 接口强制执行的。您在查询中使用的实体不打算与较新的库一起使用，这是问题的根源。

切换到使用

```
MyCloudTableClient.GetTableReference(tableName).CreateQuery<MyEntity>() 
```

创建您的查询，您的问题应该消失。

# c++ - 构造函数不工作

> ID：16073379
> 
> 赞同：0
> 
> 时间：2013-04-18T02:09:09.553
> 
> 标签：c++, constructor

我正在编写一个程序来展示康威在 C++ 中的生命游戏。我的教授给了我们一个主函数和一个描述“宇宙”的类，我们必须实现类中原型化的函数。我现在的问题实际上是让构造函数起作用。我将发布课程，然后是我为构造函数编写的内容。当我到达使用构造函数的第一行时使用 GDB (universe(width, height, wrap);) 我收到以下错误：libc++abi.dylib: terminate called throwing an exception

程序收到信号 SIGABRT，已中止。0x00007fff876fad46 in __kill()

任何帮助表示赞赏！代码如下。

```
 // Conways game of life

    class universe {             
private:
int* array;     // A pointer to a [width]X[height] array of cells that constitutes       the universe
                //    for the game of life. A value of 1 signifies a live cell at that location.
int width;      // The width of the universe.
int height;     // The height of the universe
int wrap;       // wrap = 1 means the universe wraps around on itself -- the right hand 
                //   side connects to the left and the top connects to the bottom.
                //   wrap = 0 means the universe ends at the array boundaries.
public:
universe();         // A null constructor: sets array, width, height, and wrap to 0.
universe(int,int,int);  // Constructor to allocate space for a universe of given width (first value) 
                    //    height (second value) and wrap setting (third value). Sets all cells to 0.
void display();     // Display the live cells in a graphics window.
void setup();       // Display the universe then allow the user to interactively modify 
                    //    the cell arrangement using the mouse.
void operator<<(char*); // Read in a universe from a file; first number has the width,
                            //    second number is the height,
                            //    third number is the wrap parameter,
                            //    then 1s/0s in a 2D integer array represent living/dead cells.   
void operator>>(char*); // Save the universe to a file with the specified name (format as above).
void operator=(universe);   // Copy the contents of one universe to another.
void operator<<(universe);  // Calculate the new generation by applying the rules, then
                            //    display the new generation.
int neighbors(int,int);     // Returns the number of neighbors of the cell at i,j.
int value(int,int);        // Returns the value at cell i,j (0 or 1).
void setvalue(int,int,int); // Sets the value of the cell at i,j.  
void free(); // Release the memory used to store the universe. Set array = 0\. 
};

// Implementation

universe::universe(){
array =0;               
width = 0;
height = 0;
wrap = 0;
}

universe::universe(int width1,int height1,int wrap1){

int i=0, j=0;
int* array = new int[width*height-1];       
for(i=0;i<width;i++){
    for(j=0;j<height;j++){
        array[j*width+i] =0;
                        }
                    }
width = width1;
height =height1;
wrap = wrap1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:10:52.123

```
int* array = new int[width*height-1]; 
```

应该

```
array = new int[width*height-1]; 
```

因为`array`是你的类成员，你不应该再次声明同名的局部变量。否则，您不会初始化类成员`array`。局部变量将隐藏类成员。

同时，您应该首先为它们赋值，`width`然后`height`再将它们与`new`.

您的代码应如下所示：

```
 universe::universe(int width1,int height1,int wrap1){
    width = width1;
    height =height1;
    wrap = wrap1;
    array = new int[width*height-1];       
    for(int i=0; i<width; i++){
      for(int j=0; j<height; j++){
         array[j*width+i] =0;
      }
    }
} 
```

如果您想初始化列表，最好将成员放在`int*array`后面。`wrap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:34:44.293

原始代码有很多问题，很难从列表中删除，但我可以尝试：

1.  成员`width`和`height`用于成员分配大小，甚至在它们包含确定值之前。因此它们的值使用是不确定的，因此内存分配表现出**未定义的行为**。

2.  分配被存储到本地指针，然后在退出构造函数后立即丢失。它永远不会分配给*成员变量* `array`。因此，您正在泄漏内存。此外，由于`array`（成员）从未被分配，因此即使在构造之后，它的值也是不确定的，因此使用它包含的地址的任何访问（读取或写入）都是**未定义的行为**。

3.  您没有类析构函数来清理在构造函数或成员函数中分配的内存。（假设您正确修复了 3-param 构造函数，并且它实际上*将*内存分配指针保存在`array`成员中）。因此，这会在销毁（假设 3-param 构造函数是固定的）或构造时（假设 3-param 构造函数不固定）泄漏内存。

4.  您`width`和`height`成员目前可以接受负值，这对于实际使用没有意义，并且会对您的分配造成潜在的破坏。所有不打算显式*允许*负值的成员都应该是无符号类型，`size_t`这是常见的。

5.  两个构造函数都没有初始化列表。他们都应该。

6.  `class universe`为局部成员变量动态分配内存。在不建立虚拟析构函数、复制构造函数和赋值运算符的情况下，将提供编译器默认实现，并且它们肯定会导致内存泄漏或内存损坏。这段代码应该实行**[三法则](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming))**，目前没有。

7.  您当前在 3-param 构造函数中的分配大小逻辑偏离了一个元素。(-1) 不属于那里，紧随其后的循环将写入一个超出分配大小的元素。这是**未定义的行为**。

8.  您正在使用标准库定义的类的名称作为本地定义的变量/类/成员的名称。虽然不是正式的“错误”，但*强烈建议*您避免这种做法。

我*强烈*建议一本[可靠的 C/C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

# java - 使我的计算器上的按钮具有交互性的最佳方法是什么，以便它们实际上可以加法、减法等？

> ID：16073385
> 
> 赞同：0
> 
> 时间：2013-04-18T02:10:21.690
> 
> 标签：java, swing, jbutton, jtextfield, calculator

我想制作一个有趣的小型计算器项目，以使用 Java Swing API 测试我的新 GUI 知识。我创建了 GUI，但缺少一个关键部分：数学！我的问题是，如何为每个按钮添加功能？简单来说：当用户单击按钮时，如何让按钮向文本框（2+2）添加一些内容，然后让系统实际将数字相加并为用户显示？

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class basicCalculatorDesign {

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } 
            catch (Exception e) {
            }
        basicCalculatorDesign calc = new basicCalculatorDesign();
        calc.start();
    }

    public void start() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JButton one = new JButton("1");
        JButton two = new JButton("2");
        JButton three = new JButton("3");
        JButton four = new JButton("4");
        JButton five = new JButton("5");
        JButton six = new JButton("6");
        JButton seven = new JButton("7");
        JButton eight = new JButton("8");
        JButton nine = new JButton("9");
        JButton zero = new JButton("0");
        JButton plus = new JButton("+");
        JButton minus = new JButton("-");
        JButton divide = new JButton("/");
        JButton multiply = new JButton("*");
        JButton sqrt = new JButton("SqRt");
        JButton percentage = new JButton("%");
        JButton equals = new JButton("=");

        JTextField input = new JTextField();

        JLabel label = new JLabel("Basic Calculator");
        frame.getContentPane().add(BorderLayout.NORTH, label);

        frame.getContentPane().add(BorderLayout.SOUTH, input);

        panel.setBackground(Color.BLUE);
        panel.setLayout(new GridBagLayout());

        JPanel panel2 = new JPanel();
        panel2.setLayout(new BoxLayout(panel2, BoxLayout.Y_AXIS));
        panel2.setBackground(Color.RED);
        frame.getContentPane().add(BorderLayout.EAST, panel2);

        frame.getContentPane().add(BorderLayout.CENTER, panel);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(210, 260);

        GridBagConstraints right = new GridBagConstraints();
        right.anchor = GridBagConstraints.WEST;
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.EAST;
        GridBagConstraints middle = new GridBagConstraints();
        middle.anchor = GridBagConstraints.CENTER;
        right.gridwidth = GridBagConstraints.REMAINDER;
        right.fill = GridBagConstraints.HORIZONTAL;

        // add buttons
        panel.add(one, left);
        panel.add(two, middle);
        panel.add(three, right);
        panel.add(four, left);
        panel.add(five, middle);
        panel.add(six, right);
        panel.add(seven, left);
        panel.add(eight, middle);
        panel.add(nine, right);
        panel.add(zero, right);

        panel2.add(equals);
        panel2.add(plus);
        panel2.add(minus);
        panel2.add(divide);
        panel2.add(multiply);
        panel2.add(sqrt);
        panel2.add(percentage);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:16:56.110

> 是否可以将其实现为单个内部类，然后将该内部类多次用于不同的按钮。

您可以对数字 (0-9) 按钮使用相同的操作 (ActionListener)。就像是：

```
public void actionPerformed(ActionEvent e)
{
    JButton source = (JButton)e.getSource();
    display.replaceSelection( source.getActionCommand() );
} 
```

其中“display”是显示数字和结果的文本字段。此代码只会将单击的按钮的数字附加到显示中。

对于其他按钮，您应该创建单独的操作，因为它们执行不同的功能。

# c# - 使用 Type 作为属性的自定义属性

> ID：16073386
> 
> 赞同：1
> 
> 时间：2013-04-18T02:10:33.430
> 
> 标签：c#, custom-attributes

我有以下自定义属性，我希望将类型名称作为属性。但是，我不想在使用属性时必须使用类型的字符串表示。例子：

```
public class HelpMeAttribute : Attribute
{
    public string TypeName { get; set; }
} 
```

为了使用它，我想这个

```
[HelpMe(TypeName = typeof(MyClass2).FullName]
public class MyClass1
{
}

public class MyClass2
{
} 
```

我收到错误：“属性必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式。”

我宁愿不这样做：

```
[HelpMe(TypeName = "MyClass2"] 
```

因为在字符串中输入类型似乎很糟糕。最好让编译器检查我放入属性的类型是否存在。

有人可以指出我的启蒙之路来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:12:14.187

属性初始化器只能使用编译时常量或`System.Type`属性。

那么为什么不直接使用`Type`呢？

```
public class HelpMeAttribute : Attribute
{
    public Type Type { get; set; }
    ...

    public HelpMeAttribute()
    {
    }
}

...
[HelpMe(Type = typeof(MyClass2))]
public class MyClass1
{
} 
```

# php - 从动态变量 PHP 创建数组

> ID：16073387
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:10:34.840
> 
> 标签：php, arrays, associative-array

我正在使用以下代码。每次从文件中准备好一行时，我都需要将其添加到关联数组中

```
$fp = fopen("printers.txt", "r"); // Open ptinters.txt to be read by fgets()

        // While not end of the file, read a line and store it in $printer
        while (!feof($fp)) {
            $printer = fgets($fp, 256);

            // Split the line of text into three sections and store them into
            // variables named $pName $printerType and $numPages.
            $tempArray = explode(":", $printer); 

            $pName = $tempArray[0];
            $printerType = $tempArray[1];
            $numPages = $tempArray[2];

            //Create 2 arrays. First stores $pName and $printerType 
            // second stores $pName and $numPages 

        }; // Close while !feof $fp loop.

fclose($fp); // close $fp file pointer stream. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:17:52.493

以下代码创建 array1 =`[name] => printertype`和 array2 = `[name] => numpages`。

```
$array1 = array();
$array2 = array();
$fp = fopen("printers.txt", "r"); // Open ptinters.txt to be read by fgets()
while (!feof($fp)) {
    $printer = fgets($fp, 256);
    $tempArray = explode(":", $printer); 
    $array1[$tempArray[0]] = $tempArray[1];
    $array2[$tempArray[0]] = $tempArray[2];
}
fclose($fp); 
```

如果您有重复的打印机名称，请执行以下操作，这将为您提供 array1`array{[0] => array([name] => printertype),...[n] => array([name] => printertype)}`和 array2`array{[0] => array([name] => numpages),...[n] => array([name] => numpages)}`

```
$i = 0;
while (!feof($fp)) {
    $printer = fgets($fp, 256);
    $tempArray = explode(":", $printer); 
    $array1[$i] = array($tempArray[0] => $tempArray[1]);
    $array2[$i] = array($tempArray[0] => $tempArray[2]);
    $i++;
} 
```

根据您的评论：

```
$pType = array();
$pages = array();
$fp = fopen("printers.txt", "r"); // Open ptinters.txt to be read by fgets()
while (!feof($fp)) {
    $printer = fgets($fp, 256);
    $tempArray = explode(":", $printer);

    $pName = $tempArray[0];
    $printerType = $tempArray[1];
    $numPages = $tempArray[2];

    $pType[$pName] = $printerType;
    $pages[$pName] = $numPages;
}
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:15:52.310

```
$types = $nums = array();

$fp = fopen('printers.txt', 'r');

while (!feof($fp)) {
    $printer = fgets($fp, 256);

    list($name, $type, $pages) = explode(':', $printer); 

    $types[] = compact('name', 'type');
    $nums[]  = compact('name', 'pages');
}

fclose($fp);

print_r($types);
print_r($nums); 
```

# postgresql - 如何处理 GWT 2.5 + RequestFactory 和 PostgreSQL 中的服务器错误/异常？

> ID：16073392
> 
> 赞同：2
> 
> 时间：2013-04-18T02:11:06.313
> 
> 标签：postgresql, gwt, eclipselink, requestfactory

# 环境

*   使用 RequestFactory 的 GWT 2.5
*   EclipseLink 2.4.1
*   PostgreSQL 9.1

# 问题

为了给我正在查看的 RequestFactory 部分提供上下文，我在下面插入了片段的结构：

```
 requestContext.persist().fire(new Receiver<ObjectProxy>(){
             @Override
             public void onSuccess(ObjectProxy response){
                    //Run code here...
             }

             @Override
             public void onFailure(ServerFailure error){
                   //See the description below for what needs to be done here.
             } 
```

在 onFailure() 函数中，我希望对 Postgresql 可能引发的错误有不同的响应，例如当用户尝试插入新的条形码或已经使用的新 ID 号时违反唯一性约束（用户必须能够选择 id）。

这不仅必须在 onFailure() 函数中 - 我正在寻找框架中的某个位置来执行此处理。

# 问题

*   您如何识别和响应 GWT RequestFactory 中数据库或服务器抛出的不同错误类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:17:45.660

我们在@SSR 的答案中使用 Step1，即 JSR-303 Bean Validation，它工作得很好。另外我认为您可以在服务器端抛出异常并`onFailure()`在客户端捕获该异常，这也应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:41:33.447

## 第 1 步 - DevGuideValidation

您应该在这里查看 GWT 验证支持及其示例[https://developers.google.com/web-toolkit/doc/latest/DevGuideValidation](https://developers.google.com/web-toolkit/doc/latest/DevGuideValidation)

验证组可用于指定在客户端上运行什么约束以及在服务器上运行什么。

上述特性基于 Java 的 JSR-303 Bean Validation。

## 第 2 步 - DevGuideLogging

将 Valiation 功能与 GWT 的简单远程日志记录功能相结合，您就有了处理异常的有效干净方式 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

# python - 用函数打破while循环？

> ID：16073396
> 
> 赞同：12
> 
> 时间：2013-04-18T02:12:18.443
> 
> 标签：python, function, break

我正在尝试创建一个包含 if/elif 语句的函数，并且我希望 if 中断一个 while 循环。该函数用于文本冒险游戏，是一个是/否的问题。这是我到目前为止想出的..

```
def yn(x, f, g):
    if (x) == 'y':
         print (f)
         break
    elif (x) == 'n'
         print (g)

name = raw_input('What is your name, adventurer? ')
print 'Nice to meet you, '+name+'. Are you ready for your adventure?'

while True:
    ready = raw_input('y/n ')
    yn(ready, 'Good, let\'s start our adventure!', 
       'That is a real shame.. Maybe next time') 
```

现在我不确定我是否正确使用了该功能，但是当我尝试使用它时，它说我不能中断该功能。因此，如果有人可以帮助我解决这个问题，并且如果函数和调用函数本身的格式错误，如果你可以帮助我，那将非常感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T09:44:30.540

您可以处理一个例外：

```
class AdventureDone(Exception): pass

def yn(x, f, g):
    if x == 'y':
         print(f)
    elif x == 'n':
         print(g)
         raise AdventureDone

name = raw_input('What is your name, adventurer? ')
print 'Nice to meet you, '+name+'. Are you ready for your adventure?'

try:
    while True:
        ready = raw_input('y/n ')
        yn(ready, "Good, let's start our adventure!",
           'That is a real shame.. Maybe next time')
except AdventureDone:
    pass
    # or print "Goodbye." if you want 
```

这会`while`一遍又一遍地循环循环，但是在`yn()`函数内部会引发一个异常，从而中断循环。为了不打印回溯，必须捕获并处理异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T09:45:55.803

您需要将函数内部的中断更改为返回，并且您需要有一个`else`声明，以防用户没有为您提供正确的输入。最后，您需要将您的调用`while loop`转换为 if 语句。

如果玩家输入所需的命令，这将允许您中断 while 语句，否则它将再次询问。我还更新了您的`yn`功能，以允许用户使用小写和大写字符，以及是和否。

```
def yn(input, yes, no):
    input = input.lower()
    if input == 'y' or input == 'yes':
        print (yes)
        return 1
    elif input == 'n' or input == 'no':
        print (no)
        return 2
    else:
        return 0

name = raw_input('What is your name, adventurer? ')
print 'Nice to meet you, %s. Are you ready for your adventure?' % name

while True:
    ready = raw_input('y/n ')
    if yn(ready, 'Good, let\'s start our adventure!',
       'That is a real shame.. Maybe next time') > 0:
        break 
```

这背后的想法很简单。该`yn`函数具有三种状态。用户回答是、否或无效。如果用户响应是或否，该函数将返回 1 表示是，2 表示否。如果用户没有提供有效的输入，例如空格，它将返回 0。

在循环内部，我们用一个检查函数是否返回大于 0 的数字`while True:`的 yn('....', '....') 函数包装。因为如果用户向我们提供有效输入，则返回 0 , 和 1 或 2 表示有效输入。`if statement``yn``yn`

一旦我们得到了一个有效的响应，`yn`我们调用了 break，这将停止`while loop`并且我们完成了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T02:20:19.130

您需要在循环本身内跳出 while 循环，而不是从另一个函数内跳出。

像下面这样的东西可能更接近你想要的：

```
def yn(x, f, g):
    if (x) == 'y':
        print (f)
        return False
    elif (x) == 'n':
        print (g)
        return True

name = raw_input('What is your name, adventurer? ')
print 'Nice to meet you, '+name+'. Are you ready for your adventure?'

while True:
    ready = raw_input('y/n: ')
    if (yn(ready, 'Good, let\'s start our adventure!', 'That is a real shame.. Maybe next time')):
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T02:17:23.303

一种方法是`yn`返回一个布尔值，然后将其用于跳出循环。否则`break`，函数内的 a 不能跳出调用函数中的循环。

```
def yn(x, f, g):
    if (x) == 'y':
        print (f)
        return True
    elif (x) == 'n'
        print (g)
        return False

name = raw_input('What is your name, adventurer? ')
print 'Nice to meet you, '+name+'. Are you ready for your adventure?'
done = False
while not done:
    ready = raw_input('y/n ')
    done = yn(ready, 'Good, let\'s start our adventure!', 'That is a real shame.. Maybe next time') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T02:19:23.327

使用 break ，即使不满足循环结束的条件，您也可以退出循环。你不能有 break 因为 'if /elif ' 不是一个循环，它只是一个条件语句。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-08-01T12:56:35.547

```
a = True

def b():
    if input("") == "Quit":
        global a
        a == False
    else:
        pass

while a == True:
    print('Solution') 
```

# python - 带有数据库的 Kivy-Python

> ID：16073399
> 
> 赞同：3
> 
> 时间：2013-04-18T02:12:45.193
> 
> 标签：python, database, kivy

我想用 Kivy/Python 构建一个应用程序，但我不知道 Kivy 和 MySQL 之间的连接如何。就像python一样吗？对不起，如果这个问题不恰当。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T12:55:49.587

这就像普通的蟒蛇。

Kivy 是一个用于构建用户界面的框架。如何在应用程序中与数据库交互取决于您。考虑使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模型，您可以在其中很好地分离逻辑。考虑使用[sqlalchemy](http://www.sqlalchemy.org/)作为数据库抽象层。

希望有帮助。

# c++ - QSyntaxHighlighter 的 QRegExp 和双引号文本

> ID：16073401
> 
> 赞同：0
> 
> 时间：2013-04-18T02:13:03.057
> 
> 标签：c++, regex, qt, qregexp

QRegExp 模式用于捕获 QSyntaxHighlighter 的引用文本是什么？

**测试图案**

> “一”或“二”或“三”

到目前为止，我已经尝试过：

```
QRegExp rx("\\0042.*\\0042");
QRegExp rx("(\\0042).*?\\1"); 
```

最后一个模式在 regexpal.com 上成功，但在 QRegExp 类上没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:42:28.263

编辑：如果您查看[Syntax Highlighter Example](http://qt-project.org/doc/qt-4.8/richtext-syntaxhighlighter.html)，那里已经有了这个。

[http://qt-project.org/doc/qt-4.8/richtext-syntaxhighlighter-highlighter-cpp.html](http://qt-project.org/doc/qt-4.8/richtext-syntaxhighlighter-highlighter-cpp.html)

```
 quotationFormat.setForeground(Qt::darkGreen);
 rule.pattern = QRegExp("\".*\"");
 rule.format = quotationFormat;
 highlightingRules.append(rule); 
```

只需从 Qt 的荧光笔示例中复制大部分代码，您就应该做好准备了。

## QRegEx 中的贪婪与懒惰匹配

在 Qt 对 RegEx 的变体的描述中，它说：

> 注意：量词通常是“贪婪的”。它们总是尽可能多地匹配文本。例如，0+ 匹配它找到的第一个零以及第一个零之后的所有连续零。应用于“20005”，它匹配“20005”。量词可以是非贪婪的，见 setMinimal()。

如果您使用`setMinimal(true)`惰性匹配而不是贪婪匹配来获得效果，则可以将其拉下来。其他正则表达式评估器使用类似`*?`or`+?`来执行惰性匹配。有时我使用[gskinner 的正则表达式引擎](http://gskinner.com/RegExr/)来测试我的表达式。

以下是您正在寻找的代码。它很大程度上基于[此处](http://qt-project.org/doc/qt-4.8/qregexp.html#indexIn)给出的示例。

```
#include <QCoreApplication>
#include <QRegExp>
#include <QDebug>
#include <QStringList>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QString str = "\"one\" or \"two\" or \"three\"";

    QRegExp rx("\".*\"");
    rx.setMinimal(true);
     int count = 0;
     int pos = 0;
     while ((pos = rx.indexIn(str, pos)) != -1) {
         ++count;
         pos += rx.matchedLength();
         qDebug() << rx.cap();
     }

    return a.exec();
} 
```

希望有帮助。

# javascript - Highcharts - 如何以编程方式切换图例项目并确定选择了哪些项目

> ID：16073403
> 
> 赞同：13
> 
> 时间：2013-04-18T02:13:05.270
> 
> 标签：javascript, jquery, highcharts

所以我有几个设计师的要求：

1) 允许用户通过单击图表容器外的链接来选择/取消选择所有图例项。这意味着我需要以编程方式打开或关闭图表中的所有项目，无论当前是否选择/取消选择任何项目。

2）确定在图表中选择（或启用）哪些特定的图例项，以便我们可以从选择中生成另一个图表。

我没有看到使用 API 的方法，所以我想知道是否有人提出了可能的解决方案（或两者）。

提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T06:24:48.767

Highcharts 确实允许我们从外部切换图例状态。

`series[0].hide(); series[0].show();` 由 highcharts 提供，我们可以使用它来实现您要求的功能。

这是一个供您参考的小提琴[http://jsfiddle.net/gfNYk/1/](http://jsfiddle.net/gfNYk/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-05T16:12:33.177

series[i].visible 是属性

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-16T12:41:23.510

如果您有很多系列，则**hide()**和**show()**可能会导致非常糟糕的性能。或者，您可以在每个系列上使用**setVisible()并在最后使用****redraw()**。

```
 $('#uncheckAll').click(function(){
        var chart = $('#container').highcharts();
        var series = chart.series;
        for(i=0; i < chart.series.length; i++) {
            series[i].setVisible(false, false);
        }
        chart.redraw();
    });

    $('#checkAll').click(function(){
        var chart = $('#container').highcharts();
        var series = chart.series;
        for(i=0; i < chart.series.length; i++) {
            series[i].setVisible(true, true);
        }
        chart.redraw();
    }); 
```

要确定是否选择了系列，您可以使用**series.visible**属性

# php - 有链接的电子邮件被视为垃圾邮件

> ID：16073409
> 
> 赞同：-3
> 
> 时间：2013-04-18T02:13:16.413
> 
> 标签：php, email, outlook, spam, hotmail

我整天都在解决这个疯狂的问题。

我创建了一封将大量发送的 HTML 电子邮件。我使用*PHPMailer*并尝试了*邮件*功能。PHPMailer ，它的*SMTP*功能和本*机邮件功能都**运行*良好。

 ****好 - 通过垃圾邮件过滤器**

问题是当我在 HTML 代码中放置一个链接时，电子邮件变成了垃圾邮件。但没有任何链接。如果我放置一个链接，href 是“ [http://www.google.com](http://www.google.com) ”，那么它会通过过滤器。我公司的域名“ [http://www.sequencedigitale.com](http://www.sequencedigitale.com) ”也一样，它也通过了过滤器。

```
<a href="http://www.google.com">This is Google Website</a> 
```

**错误 - 不要通过垃圾邮件过滤器**

让我抓狂的是，当我将同一个域名设置为处理电子邮件提交的服务器时。我有 3 个指向该服务器的域名，这 3 个域名中的每一个都没有通过过滤器。

```
<a href="http://careers.fieracapital.com">This doesn't pass the filter</a> 
```

我检查了一些黑名单检查器，并且 IP 没有在 100% 的列表中被阻止。

IP 为**184.107.100.61**

这个问题发生在我的*Hotmail*、*Outlook*和使用*Plesk*运行的服务器上。它通过了*GMail*上的过滤器。

任何帮助将不胜感激。

谢谢。

卡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:28:09.947

> 将大量发送的电子邮件。

这就是垃圾邮件，但您可以尝试减少垃圾邮件，使其通过更多过滤器。

最好将 From 地址设为来自 SMTP 服务器的地址（如果需要回复，请使用 Reply-To）。如果你能得到一个已经有信誉的电子邮件服务器，那会让你更接近你的目标。

它主要依赖于微软使用的专有过滤器，所以没有太多可以做的事情。**

# c++ - 在 C++ 中使用 fstream 写入输出文件

> ID：16073411
> 
> 赞同：0
> 
> 时间：2013-04-18T02:13:47.310
> 
> 标签：c++, fstream

假设您有正确的标题并且正在使用命名空间 std；这在使用 fstream 将字符串输出到某个输出文件方面是否有些正确？我只包含了我的代码的相关文件 API 部分，因为它的整体太长了。我已经包含了 iostream 和 fstream 标头。但是我似乎遇到了一些特殊的错误，我使用 myfile 类或对象的方式。

```
#include <curses.h>
#include <math.h>
#include "fmttime.h"
#include <sys/time.h>
#include <time.h>
#include <unistd.h>
#include <stdio.h>                      // Needed for the file API
#include <iostream>                     // File API headers for C++
#include <fstream>
using namespace std;

// Enumeration list for the colors of the grid, title, sin and cos waves
enum colors
{
        Gridcolor = 1,
        Titlecolor,
        Sincolor,
        Coscolor,
};

void Sim_Advance(int degrees);          // Function prototype for Phase angle
double Sim_Cos();                       // Function that calculates cos
double Sim_Sin();                       // Function that calculates Sin
char* usage();                          // Function which returns error mssg
static const double PI = (M_PI/180);    // Degrees to radian factor
static double PA = 0;                   // Phase angle
static double x;                        // X dimension of screen
static double y;                        // Y dimension of screen
static int delay1 = 300000;             // 300ms Delay
static int currenty = 0;                // Y index
static const int buffsize = 25;         // Size of the character buffer for time

// Function prototype for frame of plot function
void frame(const char* title, int gridcolor, int labelcolor);

// Function prototype for the symbols that form the plot
void mark(WINDOW* window, char ch, int color, double value);

int main(
        int argc,                       // Number of command line arguements
        char* argv[]                    // String of each command line
        )

{
    initscr();                          // Curses.h initilizations
    cbreak();
    nodelay(stdscr, TRUE);
    noecho();                           // Supress character inputs on screen
    start_color();                      // Enable Bg/Fg colors

    // Color Initializations for the enumeration list

    init_pair(Gridcolor, COLOR_RED, COLOR_BLACK);
    init_pair(Titlecolor, COLOR_GREEN, COLOR_BLACK);
    init_pair(Sincolor, COLOR_YELLOW, COLOR_BLACK);
    init_pair(Coscolor, COLOR_MAGENTA, COLOR_BLACK);

    int keyhit;                         // Holder for the getch command
    int ctr = 1;                        // Exit flag
    int degrees = 10;                   // Interval to be added to phase
    int enablelog = 0;                  // Flag for Logging enable
    int disabletrunc = 0;               // Flag for logging without truncation
    char* outputName = NULL;            // Name of output program

    FILE* pLog;                         // File pointer for O/P write
    getmaxyx(stdscr,y,x);               // Find max x and y values of stdscrn

    // Defining a new window in the terminal for printing the plot

    WINDOW* Window = newwin(y-4, x, 2, 0);

    x = x - 2 - buffsize;               // Move window to allow for timestamp
    scrollok(Window, TRUE);             // Enable scrolling window

    // Title string for the plotter

    char cTitle[] = {"Real time Sine/ Cosine Plot"};

    //  API Code for FILE output
    ofstream myfile (pLog);             //
    int i = 1;                          // Index for how many times getopt needs
                                        // to be called. Starts at 1 to offset
                                        // program call string, without options
    while (i < argc)
    {
        switch (getopt (argc, argv, "ao:"))
        {
                case 'a':
                disabletrunc = 1;
                break;

                case 'o':
                enablelog = 1;
                outputName = optarg;    // Gets the name of textfile

                // Open the file as designated by the user
                // and assign it to the file pointer pLog
                // The following if else statement opens the file for
                // logging in 2 distinct modes, extended and truncation

                if (disabletrunc == 1)
                {
                    pLog = myfile.open (outputName, ios::out | ios::app);
                }
                else
                {

                // Print with truncation

                    pLog = myfile.open (outputName, ios::out | ios::trunc);
                }

                break;

                // Case of error, print usage message

                case '?':
                endwin();
                puts(usage());
                return 0;

                break;

                // No more options on command line

                case -1:
                i = argc;
                break;
        }
        ++i;
    }

    // If only '-a' is enabled then this is still an error case
    // This if statement handles that case

    if (disabletrunc == 1 && enablelog == 0)
    {
        endwin();
        puts("\nWARNING: -a must be used in conjuction with -o FILENAME");
        puts(usage());
        return 0;
    }

        while (ctr == 1)                // This will run the program till
        {                               // exit is detected (CTRL-X)
            usleep(300000);             // Delays program execution
            keyhit = getch();

            frame(cTitle, Gridcolor, Titlecolor);  // Prints out the frame once
           struct timeval tv;
            char buf[buffsize];                    // Buffer being sent to formattime
            gettimeofday(&tv, NULL);               // calling function for epoch time
            formatTime(&tv, buf, buffsize);        // Calling formaTime for timestamp
            wattrset(Window, COLOR_PAIR(Gridcolor));
            wprintw(Window,"%s", buf);
            wrefresh(Window);

            mark(Window,'|', Gridcolor, 0);
            mark(Window,'C', Coscolor, Sim_Cos());
            mark(Window,'S', Sincolor, Sim_Sin());

            // Scroll to next y coordinate

            wmove(Window, currenty, buffsize + x);
            wrefresh(Window);
            wprintw(Window, "\n");
            wrefresh(Window);

            currenty = getcury(Window);

            // Print desired data into the output file

            if (enablelog == 1)
                myfile << buf << Sim_Sin() << Sim_Cos() << endl;
                //fprintf(pLog, "%s, %f, %f\n", buf, Sim_Sin(), Sim_Cos());

            Sim_Advance(degrees);       // Advances PA by "degrees" value (10)

                if (keyhit == 24)
                {
                    ctr = 0;            // Exit flag set
                }

        }

        // Only close the file if file exists to avoid error
        if (enablelog == 1)
        {
            myfile.close(pLog);
            //close(pLog);
        }

    endwin();
    return 0;
}

// This function will provide an usage message and give the user
// a list of acceptable option characters to use with the program
// when a non valid option character is used or used improperly

char* usage()
{
    // String to be printed as the error message

    static char errors[] = {"\nSorry Invalid Option entered\n\n"
                            "Please Enter a Valid Option specifier:\n"
                            "-o FILENAME      Enable logging to specified "
                            "output file: FILENAME\n"
                            "-a          Enable extended logging"
                            " rather than truncated logging\n\n"
                            "Please Note: -a cannot be used without -o"
                            " FILENAME\n"};

    return errors;
} 
```

然后将其打印到文件中我可以这样做吗？

```
myfile << buf << Sim_Sin() << Sim_Cos() << endl;
myfile.close(pLog); 
```

Sim_Sin() 和 Sim_Cos() 返回双精度值，而 buf 只是一个格式化字符串。我试图在互联网上应用一些资源，但它似乎与我的实现不一致（这显然是错误的）。

这是错误

```
plot.cc: In function 'int main(int, char**)':
plot.cc:93: error: no matching function for call to 'std::basic_ofstream<char, std::char_traits<char> >::basic_ofstream(FILE*&)'
/usr/include/c++/4.4/fstream:623: note: candidates are: std::basic_ofstream<_CharT, _Traits>::basic_ofstream(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/fstream:608: note:                 std::basic_ofstream<_CharT, _Traits>::basic_ofstream() [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.4/iosfwd:84: note:                 std::basic_ofstream<char, std::char_traits<char> >::basic_ofstream(const std::basic_ofstream<char, std::char_traits<char> >&)
plot.cc:117: error: expected ';' before 'pLog'
plot.cc:124: error: void value not ignored as it ought to be
plot.cc:208: error: no matching function for call to 'std::basic_ofstream<char, std::char_traits<char> >::close(FILE*&)'
/usr/include/c++/4.4/fstream:736: note: candidates are: void std::basic_ofstream<_CharT, _Traits>::close() [with _CharT = char, _Traits = std::char_traits<char>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:28:56.240

这几乎肯定是*不*正确的。

目前，我将忽略其他问题，*只*解决写作本身。写作本身最明显的问题是你几乎总是想要*一些东西*来将一个值与下一个值分开。它可以是一个空格、一个逗号、一个制表符、一个换行符，...，但你非常需要一些东西。没有它，基本上不可能弄清楚哪些数字属于哪个数字——例如：`1234.56789.876`

因此，在写出数据时，您希望在信息之间放置一些可识别的内容：

```
myfile << buf << "\t" << Sim_Sin() << "\t" <<  Sim_Cos() << endl; 
```

其次，*几乎*`endl`是不可取的。许多（大多数？）认为它只是在输出中添加一个换行符，但它也会*刷新*流。只要你只写一两行数据，这可能无关紧要，但如果你要写很多数据，它会大大降低你的代码速度。

 **```
myfile << buf << "\t" << Sim_Sin() << "\t" <<  Sim_Cos() << "\n"; 
```

在您确实想要刷新流的相对罕见的情况下，我建议您使用`std::flush`来明确该意图。

编辑：编辑后，您似乎也在尝试将 iostreams 与 C 样式混合`FILE *`（例如，尝试打开流，但提供 C 样式`FILE *`作为参数）。我通常建议选择 C ​​样式`FILE *`（如果您别无选择）或 iostream（如果可能）并始终坚持使用该样式。像你正在做的那样混合这两者不仅会导致很多混乱，而且在某些情况下也会减慢你的代码（额外的时间来保持两者的协调）。

```
std::ofstream myfile("name.txt");
myfile << buf << "\t" << Sim_Sin() << "\t" <<  Sim_Cos() << "\n"; 
```**

# php - SQLSTATE [42S22]：未找到列：1054

> ID：16073414
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:14:32.243
> 
> 标签：php, pdo

我是法国人，抱歉我的词汇量不好。我的代码有一个小问题，当我执行`SQL`查询时出现此错误：

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'ID' in 'where clause' 
```

这是代码：

```
UPDATE s_data_bans SET `name` = '$name', `text` = '$corps', `idCat` = '$cat', `on` = '$unpub' WHERE ID='$id' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:27:39.960

该错误表明您的 s_data_bans 表中没有名为 ID 的此类列，请检查并确保您的列表的字母大小写与您的查询匹配（如果它是小写字母（即 id）放置 WHERE id= .. . 在您的查询中）。

祝你好运

# c++ - ostream << istream 并在空文件上测试 EOF，从 istream 获取字符的替代方法

> ID：16073418
> 
> 赞同：0
> 
> 时间：2013-04-18T02:14:47.727
> 
> 标签：c++, file-io, get, eof

这是我在stackoverflow上的第一篇文章，所以如果我做错了，请告诉我。下周三我要参加 C++ 入门编程的期末考试，我无法检查我对教授练习题的回答。我主要关心在将输入文件的内容复制到输出文件之前检查输入文件是否为空。此外，从输入文件中获取字符。这是下面的问题和我的代码：

假设我们有以下枚举类型来列出可能的文件 I/O 错误：

```
enum FileError {
   NoFileError,       // no error detected
   OpenInputError,    // error opening file for input
   OpenOutputError,   // error opening file for output
   UnexpectedFileEnd, // reached end-of-file at unexpected spot in program
   EmptyFileError,    // file contained no data
}; 
```

为以下三个文件处理例程提供适当的实现：

```
FileError OpenInputFile(ifstream& infile, char *filename);
// open the named file for input, and return the opening status

FileError OpenOutputFile(ofstream& outfile, char *filename);
// open the named file for output, and return the opening status

FileError CopyNChars(ifstream& infile, ofstream& outfile, int NumChars);
// check to ensure the two files are open,
//    then copy NumChars characters from the input file to the output file 
```

现在我主要关心这里列出的最后一个函数。这是我的代码：

```
FileError CopyNChars(ifstream& infile, ofstream& outfile, int NumChars){
    char c;
    if (!infile.is_open()) return 1;
    if (!outfile.is_open()) return 2;
    if ((infile.peek()) == -1) return 4; //This right? (I'm using linux with g++ compiler.
    // Also, can I return ints for enum types?
    for (int i = 0; i < NumChars; i++){
        if (infile.eof()) return 3;
        else {
            infile.get(c); //Is this the way to do this?  Or is there another recommendation?
            outfile << c;
        }
    }
} 
```

在阅读之前，我已经查看了各种检查 EOF 的方法，但我还没有找到 -1 或 EOF 是有效检查的具体答案（类似于 NULL???）。我认为这只是我对术语的不熟悉，因为我查看了文档，但找不到这种检查的*示例。*我在这里正确地进行空文件检查吗？我没有编写驱动程序来测试此代码。另外，我担心我正在使用的 get 方法。在这种情况下是否有其他选择，以及一次获得一个角色的最佳方法是什么。最后，我是否可以提出关于堆栈溢出的推测性问题（例如“有哪些获取方法以及在这种情况下最好的方法是什么？”）。感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:10:41.523

检查 cplusplus.com。它有一些使用 ifstream 的好例子：[http ://www.cplusplus.com/reference/fstream/ifstream/](http://www.cplusplus.com/reference/fstream/ifstream/)

特别是，您可能想查看没有参数的 get() 函数。如果 EOF 被命中，它返回 EOF。此外，ifstream 有一个 eof() 函数，它会告诉您是否设置了 eof 位。另外，我不知道您检查 peek() 的返回值是否得到保证。CSTDIO定义了EOF宏，通常是-1，但我不认为是语言保证的。

此外，我不会返回整数值，而是返回枚举文字。这就是他们的目的。

# c - IP地址在C中的二进制

> ID：16073422
> 
> 赞同：0
> 
> 时间：2013-04-18T02:15:30.193
> 
> 标签：c, ip-address

我有一个像这样的IP地址：

```
address = '192.168.1.11'; 
```

并需要将其转换为二进制格式

```
11000000 10101000 00000001 00001011 
```

我对如何左移十进制数和使用 inet_addr 有一些想法，但不确定我将如何去做。

谢谢，我还是C的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T02:19:46.533

您可以使用该[`inet_addr(3)`](http://linux.die.net/man/3/inet_addr)函数将字符串转换为`in_addr_t`，然后将其转换为二进制。没有将数字转换为二进制的标准库函数，但使用按位逻辑运算符自己操作非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:20:58.557

有一个专门用于将文本 IP 转换为 32 位“longip”地址的套接字函数，但在这种情况下这可能是不必要的。一个简单的形式是使用解析它[`sscanf()`](http://www.cplusplus.com/reference/cstdio/sscanf/)：

```
char ip[] = "192.168.1.11";
int n1, n2, n3, n4;
sscanf(ip, "%d.%d.%d.%d", &n1, &n2, &n3, &n4).

// Result:

// n1 = 192
// n2 = 168
// n3 = 1
// n4 = 11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-27T03:53:15.947

我会这样做：

```
char *addrc = '127.0.0.1';
inet_addr_t addri = inet_addr(addrc);
__bswap_32(addri); /* ommit if network byte order == host order */
char addrb[40];
itoa(addri,addrb,2);
printf("%s = %s (binary)",addrc,addrb); 
```

# java - 黎曼积分求和问题

> ID：16073423
> 
> 赞同：0
> 
> 时间：2013-04-18T02:15:37.250
> 
> 标签：java, integral, calculus

这是我的黎曼积分器代码：

```
public class RiemannIntegrator {

    public static void main (String [] args)
    {
        double lower = Double.parseDouble(args[args.length -2]);
        double higher = Double.parseDouble(args[args.length -1]);

        double[] coefficients = new double[args.length - 3];

        if (args[0].equals("poly"))
        {
            for (int i = 1; i < args.length - 2; i++)
            {
                coefficients[i-1] = Double.parseDouble(args[i]);
            }

            System.out.println(integral("poly", coefficients, lower, higher));
        }
    }

    private static double integral(String s, double[] function, double lowBound, double highBound)
    {

        double area = 0; // Area of the rectangle
        double sumOfArea = 0; // Sum of the area of the rectangles
        double width = highBound - lowBound; 

            if (s.equals("poly"))
            {
                for (int i = 1; i <= ((highBound - lowBound) / width); i++) // Represents # of rectangles
                {
                    System.out.println("Rectangles:" + i);
                    for (int j = 0; j < function.length; j++) // Goes through all the coefficients
                    {   
                        area = width * function[j] * Math.pow ( (double)( (i * width + lowBound + (i -1.0) * width + highBound) / 2.0 ),function.length- 1- j);  
                        /*Above code computes area of each rectangle */

                        sumOfArea += area;
                    }
                }
            }
            width = width / 2.0;
            System.out.println("polynomial, function (of any length), lower boundary, higher boundary.");
            function.toString();
            System.out.println("Lower Bound:" + lowBound + ", Higher Bound: " + highBound + ".");
            System.out.println("The integral is:");
            return sumOfArea;
    }

} 
```

它在大多数情况下都有效，但是，数学经常出错，而且我不知道我哪里出错了。例如，如果我想求 x^3+2x^2+3x 的函数之和，我在计算器上得到 2.416667，在 Wolfram Alpha 上得到。但是，在我的程序中，它告诉我得到 6。我认为这可能与矩形的数量有关，因为它总是告诉我得到一个矩形。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:01:33.467

你需要另一个循环，类似于

```
double width = highBound - lowBound;
double epsilon = .001; // This determines how accurate you want the solution to be, closer to zero = more accurate
double prevValue = -1.0;
double curValue = -1.0; // initialize curValue to a negative value with greater magnitude than epsilon - this ensures that the while loop evaluates to true on the first pass
do {
    ... // this is where your for loop goes
    prevValue = curValue;
    curValue = sumOfArea;
    width /= 2.0;
} while(Math.abs(prevValue - curValue) > epsilon); 
```

这个想法是你不断减小矩形的宽度，直到宽度 = w 的 sumOfArea 与宽度 = 2w 的 sumOfArea 或多或少相同（即在 epsilon 内）。

那里有更快+更准确的集成算法，例如[Newton-Cotes](http://en.wikipedia.org/wiki/Newton%E2%80%93Cotes_formulas)，但我假设您在这件事上别无选择。

# c++ - 从微秒构建 boost::posix_time::time_duration

> ID：16073424
> 
> 赞同：2
> 
> 时间：2013-04-18T02:15:40.223
> 
> 标签：c++, datetime, boost

可以通过 total_microseconds 方法从 time_duration 获取总微秒数，但我不知道如何从该数字重新构造 time_duration。文档中似乎没有用于此目的的构造函数，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T03:08:52.653

有[boost::posix_time::microseconds](http://www.boost.org/doc/libs/1_53_0/doc/html/date_time/posix_time.html#time_duration_count_constr)：

```
#include <iostream>
#include <boost/date_time.hpp>
namespace bpt = boost::posix_time;
int main()
{
    bpt::time_duration td = bpt::microseconds(12345678);
    std::cout << td << '\n';
} 
```

# jira - JIRA REST API 性能 - OAuth 与 HTTP 基本身份验证

> ID：16073426
> 
> 赞同：3
> 
> 时间：2013-04-18T02:15:51.847
> 
> 标签：jira, jira-rest-java-api

继[JIRA](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+APIs#JIRARESTAPIs-Authentication) REST API 的文档之后，OAuth 和 HTTP Basic 是两种推荐的身份验证方式。我们使用 HTTP Basic 和 https，它运行良好且安全。

它们之间的性能有什么区别吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T03:00:45.907

排除初始令牌协商，考虑到安全有效负载的更大尺寸和签名要求，OAuth 在计算上仍然比基本身份验证更昂贵。需要执行的额外逻辑的非详尽列表：

*   请求参数规范化
*   请求 URI 规范化
*   生成随机数
*   请求签名计算
*   在接收端反转整个过程

与需要非常简单的散列来计算单个所需标头的基本身份验证相比，OAuth 无疑是一种更昂贵的身份验证。***但是***，要认识到的重要一点是，这两种身份验证机制服务于完全不同的目的。基本身份验证用于向主应用程序验证客户端。OAuth 用于授权第三方从主应用程序访问客户端数据。两者都有自己的位置，选择一个而不是另一个应该由实现的特定用例驱动。

# kml - kml，用于地图和地球的高性能 KML，不工作

> ID：16073428
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:16:04.367
> 
> 标签：kml, google-earth

我制作了一个 KML 文件来模仿 YouTube 链接上的“地图和地球的高性能 KML”中的一个示例（在 15:11-16:05 或仅 15:51）

我得到错误：

> 验证在第 2 行第 45 列停止：未找到元素“kml”的声明

当我尝试运行此代码时，GOOGLE EARTH 崩溃。

这是我的代码：

```
<?xml  version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark>
<gx:Track>
 <when>13:51</when>
  <gx:coord>-147.871 64.861</gx:coord>
    <ExtendedData>
     <SchemaData  schemaUrl="#schema">
       <gx:SimpleArrayData  name="PM 2.5">
            <gx:value>0.0</gx:value>
            <gx:value>-6.0511e+15</gx:value>
            <gx:value>180</gx:value>
        </gx:SimpleArrayData>
     </SchemaData>
    </ExtendedData>
</gx:Track>
</Placemark>
<Placemark>
 <gx:Track>
  <when>13:56</when>
   <gx:coord>-147.871 64.861</gx:coord>
    <ExtendedData>
     <SchemaData  schemaUrl="#schema">
       <gx:SimpleArrayData  name="PM 2.5">
            <gx:value>0.0</gx:value>
            <gx:value>-1.0001e+16</gx:value>
            <gx:value>180</gx:value>
        </gx:SimpleArrayData>
     </SchemaData>
    </ExtendedData>
   </gx:Track>
</Placemark>
</kml> 
```

这是我的实际完整 kml 文件的较短版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:54:44.270

您没有为 KML 文件使用正确的格式

首先，虽然这在大多数情况下都是正确的

```
<kml xmlns="http://www.opengis.net/kml/2.2"> 
```

我更喜欢使用它（我忘记了原因，但我确实这样做了）

```
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom"> 
```

但你的主要问题是你也错过了一个`<Document>`

所以实际的文件应该是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
<name>Name</name>
<Placemark>
...
</Placemark>
</Document>
</kml> 
```

# html - html文本标签在移动设备上运行到下一行

> ID：16073432
> 
> 赞同：1
> 
> 时间：2013-04-18T02:16:51.347
> 
> 标签：html, text, input, multiline

我的代码如下

```
<div data-role="content" id="div1" align="top" style="padding:3 !important;" >  
        <table border="0" align="CENTER" cellspacing="0" width="100%" style="vertical-    align: text-bottom;" >
        <tr>
        <td></td>
        <td>
            <div id="question1" class="question">
                <input type="text" id="question" />
            <Style>
                #question{
                  font:5px;
                  font-family:verdana;
                }
            </style>        
            </div>
        </td></tr><tr>
        <td width="50"><img id="img2" width="40" height="36" style="float:right; margin-top: 0px;" ></td>
        <td style="text-align:center;">
            <div class="ui-grid-b" >
                <div class="ui-block-a"><button id="button1" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>
                <div class="ui-block-b"><button id="button2" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>   
                <div class="ui-block-c"><button id="button3" type="submit" data-theme="b" style="font-size:0.8em;"></button></div>  
            </div>
        </td>
        </tr>
        </table>
</div> 
```

在上面的代码块中，在下面的代码行中

```
<input type="text" id="question" /> 
```

当通过 jQuery 填充值时，我所做的就是

```
$('.question').text(questionText); 
```

当我在我的 iPhone 中查看它时，当文本长于宽度时，它会转到下一行。我认为 textarea 是唯一具有多行的 HTML 标签。不知道为什么这里的文字是多行的，我该如何避免？我不介意文字被切断，但我真的不希望它变成多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:19:37.130

所以我现在修复它的方式是，我做了以下

```
<div id="question1" class="question" style="height: 12px;">
            <input type="text" id="question" />
        <Style>
            #question{
              font:5px;
              font-family:verdana;
            }
        </style>        
        </div> 
```

我至少让多行消失了，但如果有更优雅的方式（jQuery 省略号看起来不错，但我没有让它工作），请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:29:01.373

尝试应用`overflow: auto`到输入字段

```
<style type="text/css">
    input[type=text] { overflow: auto; }
</style> 
```

您可能需要设置输入元素的高度，我不确定您要在这里实现什么。您可以设置`overflow-x: auto`是否只希望它水平滚动或`overflow-y`垂直滚动

# javascript - MyFunction() 未捕获的引用错误

> ID：16073437
> 
> 赞同：1
> 
> 时间：2013-04-18T02:17:29.503
> 
> 标签：javascript

错误：未捕获的 ReferenceError：未定义 myFunction

这是我的 .js 文件，它不工作或调用我的 HTML

```
function = myFunction() 
{
    var ret = "";
    for (var i = 15; i < 26; i++) 
    {
        ret += i + "  " + i*2 + "  " + i*3 + "\n";    
    }
    alert(ret);
} 
```

这是我的 HTML 代码：

```
<!DOCTYPE HTML>
<html>

<head>
<script type="text/javascript" src="Test1.js"></script>

</head>

<body>

<h1> Exercise 4 - LAB 4  </h1>

<h2> Exercise 2.1 </h2>

<button type="button" onclick= "myFunction() "> Press Me </button>

</body>
</html> 
```

错误：未捕获的 ReferenceError：未定义 myFunction

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T02:22:28.643

干得好：

```
var myFunction = function ()
{
    var ret = "";
    for (var i = 15; i < 26; i++)
    {
        ret += i + "  " + i*2 + "  " + i*3 + "\n";
    }
    alert(ret);
}; 
```

`function = varName () {}`是语法错误。你可以这样做：`function varName () {}`没有等号，或者你可以像我一样做。

经过我们的一些发帖者的一些健康警告之后，我应该指出这两种编写函数的方式之间存在差异。引用 RobG 的话：“函数 foo(){} 和 var foo = function(){} 之间没有实际区别；除了函数创建时，第一个称为 FunctionDeclaration，第二个称为 FunctionExpression。” 在执行任何代码之前加载函数声明，因此您可以在任何地方调用它（在函数在文件中的位置之前或之后）。但是，再次就文件中的实际位置而言，如果在文件中的位置之前调用函数表达式，则会引发错误。（但是，您可以通过在文件开头声明稍后将分配给函数表达式的变量来解决此问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:23:43.623

```
function = myFunction() { /* body */ } 
```

是无效的语法。您没有因此在控制台中收到错误吗？正确的语法是

```
function myFunction() { /* body */ } 
```

或者

```
myFunction = function() { /* body */ } 
```

你也可以写：

```
somename = function myFunction()  { /* body */ }; 
```

但是，在这种情况下，名称的范围`myFunction`只是主体，它不是全局的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:13:53.557

The declaration of the function is wrong:
Javascript:

```
function myFunction() {
    var ret = "";
    for (var i=15; i<26; i++) {
        ret += i + "  " + (i*2) + "  " + (i*3) + "\n";    
    }
    alert(ret);
} 
```

HTML

```
<html>
  <head>
    <script type="text/javascript" src="Test1.js"></script>
  </head>

  <body>
    <h1>Exercise 4 - LAB 4</h1>
    <h2>Exercise 2.1</h2>
    <input type="button" value="Press Me" onclick="myFunction()" />
  </body>
</html> 
```

# javascript - 未捕获的错误：SecurityError：DOM Exception 18 Canvas

> ID：16073438
> 
> 赞同：1
> 
> 时间：2013-04-18T02:17:31.030
> 
> 标签：javascript

```
function getBase64Image(img) {
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    document.body.appendChild(canvas);
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    var dataURL = canvas.toDataURL("image/png");
    return dataURL;
} 
```

我似乎违反了什么，只是似乎找不到什么。有关如何修复它的任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:21:21.917

如果您从另一个域绘制到画布 id 的图像，那么您的画布已被污染，您无法从中生成数据 uri。将图像复制到与脚本相同的域以防止这种情况发生。

# android - 移动应用程序测试（设备与模拟器）

> ID：16073443
> 
> 赞同：-7
> 
> 时间：2013-04-18T02:17:40.217
> 
> 标签：android, ios, testing, mobile

在测试移动应用程序/游戏时发现/或需要在实际设备而不是模拟器上测试的典型错误是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:27:51.633

我想有很多事情可能会出错，尤其是在布局方面。除了使用具有不同屏幕尺寸的多个模拟器之外，当您将应用实际分发给有限的用户集并查看您得到什么样的反馈时，您还必须在 beta 测试中发现这一点。一般来说，只要您设计布局以适应多种屏幕尺寸，您不应该在这方面遇到太多问题。这种事情很难预料，尤其是在您定义了自己的情况时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:44:41.963

根据您的问题，模拟器有很多限制来测试应用程序。就像我们无法检查相机、GPS、振动和安卓手机的更多物理功能一样。

# c# - 如何防止 listView 在升级列上并将其绑定到 ViewModel？

> ID：16073446
> 
> 赞同：0
> 
> 时间：2013-04-18T02:17:47.007
> 
> 标签：c#, wpf

我有基于日期范围生成列的 C# WPF 列表视图。我如何防止列升级？我怎么不能在生成列时做单个实例？ ![列表显示](https://i.stack.imgur.com/gzNOb.jpg)

我怎样才能将它绑定到我的视图模型上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:27:21.613

每次单击“生成”按钮时都会附加列的问题吗？如果是这种情况，那么您唯一应该添加的是

```
private void CreateColumns()
{
    myView.Columns.Clear();
    //...
} 
```

到 CreateColumns 方法的开头。

# c++ - 这个 StackOverFlowException 是否需要指针才能正常工作？

> ID：16073450
> 
> 赞同：2
> 
> 时间：2013-04-18T02:18:16.233
> 
> 标签：c++, visual-c++

我制作了一个程序，通过从 .txt 文件中读取来搜索回文，然后将输出放到单独的 .txt 文件中。

它的工作原理与大约 50 个左右的字符一样。但是，如果我将大量单词复制并粘贴到 .txt 文件中以供其读取，则在运行时它将显示“由于 StackOverFlowException 而终止进程”。然后它会打开一个名为 chkstk.asm 的文件，并有一个箭头指向一个名为“test dword ptr [eax], eax ; probe page”的东西。接下来，一个框会出现一个中断并继续选项，并说：“palindrone.exe 中发生了 'System.StackOverflowException' 类型的未处理异常”

我目前正在努力改变事物以使用指针等，并可能将事物存储在向量中。但是，我仍然不确定错误的原因是什么，我想知道它为什么会起作用以及需要更改什么，以便我可以让它读取和处理大块文本。没有指针是它工作不正常的原因吗？

```
#include <iostream>
#include <string>
#include <ctype.h>
#include <iterator>
#include <algorithm>
#include <fstream>

using namespace std;

/**
    Recursivly reverses a string
    @ param word, the word being entered
    @ last_char, the last character currently in the string
    @ go, the recursive function to return the character and continue inside itself
**/
string string_reverse(string word)
{
    if (word.length() - 1 > 0)
    {
        char last_char = word[word.length()-1];
        word.erase(word.length()-1);
        string go = string_reverse(word);
        return go.insert(0, 1, last_char);
    }
    else  
        return word.substr(0,1);
}

/**
@param in, the input as the original string
@param la, the reverse string
**/
bool equals(string in, string la)
{
    if(in == la)
        return true;
    else 
        return false;
}

/**
processes the pal
**/
void process_pal(ofstream &outfile, string in, string la, bool sam)
{
    if (sam == true)
    {
        outfile << in << " EQUAL to backwards: " << la << "\n";
    }
    else
        outfile << in << " NOT equal to backwards: " << la << "\n";
}

/**
    Removes all Numbers, white spaces, and invalid symbols with !isalpha
    @param sentence, the sentence being entered
    @ it, the iterator to iterator through the sentence checking for invlaid sysmbols
**/
string remover(string sentence)
{
    string::iterator it = sentence.begin();

    while (it != sentence.end())
    {
         while( it != sentence.end() && !isalpha(*it))
         {
             it = sentence.erase(it);
         }
         if (it != sentence.end())
             ++it;
    }
return sentence;
}

/**
    Increments to find paladrome by starting at 3 from 0, then moving right 1 by 3 each time util
    it goes to the end. Once it hits the end, it will increment by four and do the same thing till
    it has become the full length of the text.
**/
void find_pal(ofstream &outfile, string input, int pos, int lin)
{
    int max_length = input.length()+1;
    int pos_last = max_length - lin;
    if(lin < input.length()){
        string sub_fwrd = input.substr(pos,lin);
        string sub_bck = string_reverse(sub_fwrd);
        bool same = equals(sub_fwrd, sub_bck);
        process_pal(outfile, sub_fwrd, sub_bck, same);
        pos++;
        if (pos == pos_last){
            pos = 0;
            lin++;
        }
        find_pal(outfile, input, pos, lin);
}
}

int main()
{
    bool con = true;
    while (con == true)
    {
        string input;
        ifstream infile;
        infile.open ("file_read.txt");    
        getline(infile,input); // Saves the lines from the file in string input.
        infile.close();

        transform(input.begin(), input.end(), input.begin(), ::tolower); // Goes to all Lower Case

        string inputer = remover(input); // Removes unwanted symbols, numbers, spaces, etc
        input = inputer; // Updates our orignal string input

        ofstream outfile ("file_out.txt");
        int pos = 0;
        int lin = 3;
        find_pal(outfile, input, pos, lin); // Start the palindron function up to sift       through purmutations

        string full_input = string_reverse(input); // Final Purmutation of reverse
        bool same = equals(input, full_input);
        process_pal(outfile, input, full_input, same); // Final analyzing process_pal

        string go;
        outfile.close();    
        cout << "Continue? y/n " << endl; // Continue on or not
        getline(cin, go);
        if(go != "y")
            con = false;
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:02:34.863

在 C/C++ 中有一个堆栈和一个堆。堆栈通常是一个固定大小的内存段，它可能比您想象的要小（默认值可能在 1-2MB 左右），而堆是内存的一个动态部分，它会一直增长直到超过总逻辑 RAM服务器。

对您的问题的简短回答是，每次嵌套函数调用时，您都会在所谓的“堆栈帧”中分配更多的内存。因此，如果您有“主要调用 A 调用 B 再次调用 B”，那么您有 4 个堆栈帧。如果您有一个随着输入大小而增长的递归方法，那么您将开始分配大量堆栈帧，最终您将遇到堆栈溢出异常（堆栈大小已超过固定限制）。

所以，一般来说，你的问题的根本原因是你的递归嵌套太深。有几种方法可以解决这个问题。评论中提到的一种常见方法是简单地放弃递归。另一种方法是使用[尾递归](http://en.wikipedia.org/wiki/Tail_call)，它避免在每次调用时添加新的堆栈帧，并允许您保持递归语义。

话虽如此，我应该提一下，如果您要切换到指针，您可能会看到*一点好处。*这是因为堆栈帧的大小取决于函数参数和局部变量的大小。指针可能小于您传入的其他结构，并可能导致更小的堆栈帧。但是，这不是您的问题的根本原因。

# java - 休眠一对一双向不工作

> ID：16073451
> 
> 赞同：1
> 
> 时间：2013-04-18T02:18:25.933
> 
> 标签：java, hibernate, one-to-one, bidirectional

我试图让我的代码具有双向关系（一对一）但显然代码不起作用。

这里是头等舱。

```
public class User {

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "USER_PROFILE_FK")
    private UserProfile userProfile;

    //Accessor methods and other stuff
} 
```

这是第二节课

```
@Entity
@Table(name ="USER_PROFILE")
public class UserProfile{

    @OneToOne(mappedBy="UserProfile")
    private User user;
    //Accessor methods
} 
```

现在，当我运行我的代码时，会发生此异常错误

```
Unknown mappedBy in: org.test.myApp.User, referenced property unknown: org.test.myApp.User.UserProfile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:59:17.633

关联另一端的字段是命名的`userProfile`，而不是命名`UserProfile`的，因此必须将 mappedBy 属性设置为`userProfile`。

# scripting - 如何强制电脑不重启

> ID：16073455
> 
> 赞同：0
> 
> 时间：2013-04-18T02:19:10.377
> 
> 标签：scripting, batch-file, installation, restart

我正在编写批处理脚本来自动化产品测试。产品安装完成后，我需要强制计算机不要重启。有没有办法用批处理脚本来做到这一点？感谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:42:21.887

试试`shutdown -a`。它将中止关机过程。

# javascript - 按顺序加载图像列表

> ID：16073460
> 
> 赞同：1
> 
> 时间：2013-04-18T02:19:57.680
> 
> 标签：javascript, jquery, image, caching, onload

我正在一个网站上工作，该网站使用 ExpressionEngine 创建以 img1、img2、img3 等为 ID 的图像列表，并使用它们的源 imgAddresses[1]、imgAddresses[2]、imgAddresses[3] 等创建一个数组。

我正在尝试创建一个加载第一个图像的函数，然后（当第一个完全加载时）加载第二个、第三个等。以下是我到目前为止的内容：

```
function loadImage(counter) {
    var i = document.getElementById("img"+counter);
    if(counter==imgAddresses.length) { return; }
    i.onload = function(){
        loadImage(counter+1)
    }; 
    i.src = imgAddresses[counter];
} 
document.onload=loadImage(0); 
```

它在刷新页面时有效，但在通过 URL 访问页面时无效。据我从研究中得知，这是因为加载缓存图像时不会触发 onload 事件，刷新页面会清除缓存，而通过 URL 访问页面则不会。

研究表明，在声明 onload 事件后分配图像的 src 可以解决这个问题，但在这种情况下似乎并没有解决它。我在想这可能是因为在这种情况下 onload 事件是递归的。

是否有人对如何确保浏览器加载图像的新副本而不是缓存版本有任何想法？或者是否有更好的方法来编写这个函数？谢谢你的帮助！

编辑：我发现的一种解决方案是将 img 源分配更改为：

```
i.src = imgAddresses[counter] + '?' + new Date().getTime(); 
```

这迫使用户每次都加载一个新副本，我想这不是一个解决方案，而是一种解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:56:42.027

我唯一能说的是您没有`document.onload`正确附加处理程序。我不知道它是否会解决您的问题，因为`image.onload`在所有浏览器中都不可靠，但是`onload`应该将其设置为函数引用，这不是您正在做的事情。

相反，你应该有类似的东西：

```
function loadImage(counter) {
    //initialize the counter to 0 if no counter was passed
    counter = counter || 0;
    var i = document.getElementById("img"+counter);
    if(counter==imgAddresses.length) { return; }
    i.onload = function(){
        loadImage(counter+1)
    }; 
    i.src = imgAddresses[counter];
}

document.onload = loadImage; //instead of loadImage(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:07:06.847

你可以知道浏览器将如何管理缓存的资源
看看 HTML5 缓存方法：

*   [HTML5：缓存清单文件](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

这样可以避免浏览器缓存指定资源。

# wpf - SQL 服务器 CE 4.0 windows XP

> ID：16073461
> 
> 赞同：1
> 
> 时间：2013-04-18T02:20:04.317
> 
> 标签：wpf, database, windows-xp, sql-server-ce

我已经制作了一个在 windows7 和 XP 上运行良好的 WPF 应用程序。但是，在添加了一些与数据库和实体框架相关的功能后，它仍然可以在 windows 7 下运行，但不能在 windows XP 上运行。每次尝试使用数据库时，我都会收到“此平台不支持操作”。

如您所见，我已经添加了所有需要的 dll 并修改了 .config，因此该应用程序可以在没有安装 sql server CE 4.0 的情况下运行。我也尝试在 windows xp 机器上安装 sql CE 并编辑 .config 以使用它而不是 dll，但我得到了相同的结果。

更多信息：该应用程序可在 .net framework 4.0 上运行

我应该尝试另一个嵌入式数据库吗？

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0"/>
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
  </system.data>
  <connectionStrings>
    <add name="Conexion" connectionString="Data Source=|DataDirectory|Database.sdf" providerName="System.Data.SqlServerCe.4.0" />

  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:10:15.197

好的，我发现了问题。好像sql server CE 4.0需要windows XP SP3，而测试机只有SP2，真丢人！

# asp.net-mvc - asp.net mvc 如何为 html.dropdownlist 添加占位符

> ID：16073464
> 
> 赞同：14
> 
> 时间：2013-04-18T02:20:27.310
> 
> 标签：asp.net-mvc, drop-down-menu, placeholder

我正在使用 asp.net mvc 3。

我有这个国家的下拉列表，我想为它添加一个占位符。这是我的代码：

```
@Html.DropDownList("country",
     new SelectList(ViewBag.countries as System.Collections.IEnumerable,
     "name", "name"), new { @class="chzn-select", @placeholder="-select-",
     @style="width:160px;" } ) 
```

但是占位符不起作用，而样式起作用。

如何为此设置占位符？

PS。我只是想用`@Html.DropDownList`，不是`@Html.DropDownListFor`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-20T11:31:40.263

你可以试试这个：

```
@Html.DropDownList("country", new SelectList(ViewBag.countries), "-select- ", new { @class="chzn-select", @style="width:160px;" }) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-11-14T15:54:18.603

一个涉及 jQuery 的快速且（不是那么）肮脏的解决方案。

不要在列表的开头添加一个虚拟项目，而是在前面添加一个禁用的新选项。主要优点是**您不必弄乱列表中的虚拟项目**，最重要的是，**您将无法在页面中选择该虚拟项目**：

```
@Html.DropDownList("yourName", yourSelectList, new { @class = "form-control select-add-placeholder" }) 
```

然后某处之后：

```
$(".select-add-placeholder").prepend("<option value='' disabled selected>Select an option...</option>"); 
```

看起来像：

[![在此处输入图像描述](https://i.stack.imgur.com/wwiyE.png)](https://i.stack.imgur.com/wwiyE.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T02:43:48.590

在您的集合 ViewBag.Countries 中，只需在集合的 from 处插入一个名为“-select-”的虚拟记录。您应该能够使用这样的替代构造函数强制选定项目：

```
@Html.DropDownList("country",
     new SelectList(ViewBag.countries as System.Collections.IEnumerable,
     "name", "name", "-select-"), new { @class="chzn-select", @style="width:160px;" } ) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-30T15:30:43.130

```
@Html.DropDownListFor(m => m.SelectedProductIDs, 
Model.AvaliableProducts.ToSelectList("ID","Name"),
                       new { @class = "chzn-select", 
                            data_placeholder="Please select a product" })... 
```

请查看更多详细信息：[http ://code.stylenet.ca/mvc3-data-placeholder-html5-attribute/](http://code.stylenet.ca/mvc3-data-placeholder-html5-attribute/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-03T20:14:28.073

我可以看到没有一个简单的答案。我开发了一个简单的解决方案，但它提供了一些工作。这适用于**DropDownList**和**DropDownListFor**

首先在任何你想要的地方创建一个扩展类。（必须是Static with static methods）然后添加如下扩展方法

```
public static MvcHtmlString DropDownList(this HtmlHelper htmlHelper,string name, IEnumerable<SelectListItem> selectList, string optionLabel, bool disableLabel)
{
    MvcHtmlString mvc = htmlHelper.DropDownList(name, selectList, optionLabel);
    if (disableLabel)
    {
        string disabledOption = mvc.ToHtmlString();
        int index = disabledOption.IndexOf(optionLabel);
        disabledOption = disabledOption.Insert(index - 1, " disabled");

        return new MvcHtmlString(disabledOption);
    }
    else
    {
        return mvc;
    }
} 
```

现在注意这个扩展只添加了一个新属性，**disableLabel** 这将检查你是否要禁用标签。

现在你让我们去查看端首先**声明你想使用**你创建的扩展类：`@using WF.Infrastructure.Extension;`

现在你像这样使用：`@Html.DropDownList("Unidade", lstUnidade, "Text of Option Disabled",true)`

**注意：**如果您希望它与 DropDownListFor 一起使用，只需使用此签名为您的扩展类添加另一个扩展方法：

`public static MvcHtmlString DropDownListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, string optionLabel,bool disableLabel)`

**PS：**如果您在像我这样的单独项目中声明扩展方法，则需要添加程序集（System.Web.Mvc，System.Web），并且在扩展类中您需要声明：

```
using System.Web.Mvc;
using System.Web.Mvc.Html; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-08T06:56:38.310

也许如果你愿意，试试这个：

```
@Html.DropDownList("country",null,"-SELECT-",new { @class="chzn-select",@style="width:160px;" }) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-04T09:32:03.720

试试这个：

```
@Html.DropDownList("MetadataId", (MultiSelectList)ViewData["category"], "All Categories",
    new { @class = "chk_dropdown d-none", @id = "categories", multiple = "multiple" }) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-18T04:16:09.157

试试这个

```
@Html.DropDownListFor(m => m.SelectedProductIDs, Model.AvaliableProducts.ToSelectList("ID","Name"), new { @class = "chzn-select", data-placeholder="Please select a product" }) 
```

或者

```
@Html.DropDownListFor(model => model.SelectedItemID, new SelectList(Model.employeeList, "Value", "Text"), new Dictionary<string, object> { { "data-placeholder", "Choose a sandbox..." }, { "class", "chzn-select" }, { "style", "width:200px;" } }) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-12-07T07:02:25.580

最好的办法

```
@Html.DropDownListFor(m => m.SelectedProductIDs,
                      Model.AvaliableProducts.ToSelectList("ID","Name"),
                      "Please select a product",
                      new { @class = "chzn-select"}) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-05-29T12:18:52.360

```
@Html.DropDownListFor(m => m.SelectedProductIDs,
                      Model.AvaliableProducts.ToSelectList("ID","Name"),
                      "Please select a product",
                      new {enter code here @class = "chzn-select"}) 
```

# delphi - 如何从 Delphi 7 中的 Grids 类继承？

> ID：16073465
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:20:32.770
> 
> 标签：delphi, delphi-7

这是我从 TStringGrid 类继承的类。我想创建一个将使用数据库中的数据填充的网格。但现在这只是一个简单的类存根：

```
unit clsTCustomStringGrid;

interface

    uses Grids, Dialogs;

    type
        TCustomStringGrid = class (TStringGrid)
            public
                procedure SayHello ();
        end;

implementation

    procedure TCustomStringGrid.SayHello ();
    begin
        ShowMessage('Hello World!');
        // procedure body
    end;

end. 
```

这是我的主要形式：

```
uses ...
     ...
    TCustomStringGrid; // here is where the compilation stops

    ...
    ...
    ...

    procedure TMyForm.FormShow (Sender: TObject);
    var
        MySG: TCustomStringGrid;
    begin
        MySG := TCustomStringGrid.Create(self);
        MySG.Left := 100;
        MySG.Top := 40;
        MySG.Parent := self;
        MySG.SayHello();
    end; 
```

我得到的错误：

```
File not found: 'TCustomStringGrid.dcu' 
```

请帮我弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:33:37.220

在 uses 子句中添加 clsTCustomStringGrid，而不是 TCustomStringGrid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:34:33.850

您的类在 中声明`unit clsTCustomStringGrid;`，但您的`uses`子句正在使用`TCustomStringGrid`（这是类名）。

更改您的使用条款：

```
uses ...
  ...
  clsCustomStringGrid; 
  ... 
```

# java - 用Java中的ArrayList按升序插入对象

> ID：16073466
> 
> 赞同：0
> 
> 时间：2013-04-18T02:20:50.577
> 
> 标签：java, netbeans, arraylist, sorting

因此，我来​​回尝试了多种不同的方法，但我似乎无法围绕这种方法的适当算法。我正在创建一个使用 ArrayList 的多项式类，其中 Term(int coeff, int expo) coeff 是多项式的系数，expo 是指数。在测试类中，我必须插入多个不同的 Term 对象，但它们需要按指数升序插入（例如，4x^1 + 2x^3 + x^4 + 5x^7）

这是我在 insert() 方法末尾的代码，它接受两个参数，即 coeff 和 expo：

```
public class Polynomial
{

   private ArrayList<Term> polynomials ;

   /**
     * Creates a new Polynomial object with no terms
     */
  public Polynomial()
  {
       polynomials = new ArrayList<>() ;
  }

  /**
    * Inserts a new term into its proper place in a Polynomial
    * @param coeff the coefficient of the new term
    * @param expo the exponent of the new term
    */
   public void insert(int coeff, int expo)
   {

      Term newTerm = new Term (coeff, expo) ; 

      if (polynomials.isEmpty())
      {
          polynomials.add(newTerm);
          return;
      }

      int polySize = polynomials.size() - 1 ;

      for (int i = 0 ; i <= polySize ; i++)
      {
            Term listTerm = polynomials.get(i) ;  
            int listTermExpo = listTerm.getExpo() ;

            if ( expo <= listTermExpo )
            {
                 polynomials.add(i, newTerm);
                 return;
            }

            else if ( expo > listTermExpo )
           {
                 polynomials.add(newTerm) ;
                 return ;
           }

    }

} 
```

问题出现在代码末尾附近。一旦我输入了一个系数不是 <= 索引处的 Term 的 Term，它就会转到 else if 语句并将其添加到列表的末尾。这是错误的，因为它需要添加到它刚刚变得大于下一个系数的地方。仅仅因为它大于该系数并不意味着它是最大的系数。我尝试向后执行 for 语句，其中：

```
for (i = polySize ; i >= 0 ; i--)
{
  etc.
} 
```

但这也不起作用，因为它反过来提出了同样的问题。如果有人可以提供一些解决方案或答案，将不胜感激，因为我很困惑。在这一点上，我确定我只是让它太复杂了。我只想知道如何识别指数较大，然后返回 for 循环，直到它小于或等于索引的指数。

另外，我应该提一下，我不允许使用任何其他集合或类，所以我必须使用 for、if、else 或 do while 语句来执行此操作。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:29:42.063

从 for 循环中删除它：

```
 else if (expo > listTermExpo)
       {
             polynomials.add(newTerm);
             return;
       } 
```

将其放在 for 循环之后：

```
polynomials.add(newTerm);
return; 
```

推理：您只想将术语添加到列表的末尾，前提是它不小于其中的任何术语 - 而不仅仅是第一个术语。

此外，使用 ; 也是一种很好的格式。紧接在语句之后的是 for，中间没有空格，for ()s 里面没有任何空格。我已经编辑了我从你那里复制的代码来说明我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:24:12.660

这应该具有您指定的确切行为：

```
public void insert(int coeff, int expo) {
    Term newTerm = new Term(coeff, expo);
    int max = polynomials.size();
    int min = 0;
    int pivot;
    while (max > min) {
        pivot = (min + max) / 2;
        if (expo > polynomials.get(pivot).getExpo()){
            min = pivot + 1;
        }
        else {
            max = pivot;
        }
    }
    polynomials.add(min, newTerm);
} 
```

如果列表中已经有任何此类术语，则此算法将在第一个术语的前面添加具有相同指数的新术语。

# asp.net-mvc-4 - 如何编码 URL 参数？

> ID：16073468
> 
> 赞同：0
> 
> 时间：2013-04-18T02:20:59.557
> 
> 标签：asp.net-mvc-4

我在类库中使用了这个方法，并从控制器调用了这个方法。但是我传递的值不是编码。我无法追查其背后的原因。

**类库**

```
using System.Web;

public static class CommonLogic    
{
   public static string UrlEncode(string value)
    {
        return HttpUtility.UrlEncode(value);
    }
} 
```

**控制器**

```
var test =   CommonLogic.UrlEncode("2") 
```

测试值为“2”且未编码。

**更新：**

我刚刚从下面的评论中意识到了原因。我真正需要的不是编码，而是加密和解密。我不希望将 Url 参数公开为纯文本，而是希望将其作为加密值，稍后在控制器中我将在处理该值之前再次对其进行解密。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:25:53.717

“2”不需要进行 UrlEncoded。它不是 Urls 中的保留符号。尝试测试诸如“<”之类的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:27:30.580

字符“2”是 RFC3986 [https://www.rfc-editor.org/rfc/rfc3986#section-2.3中定义的“未保留”集的一部分](https://www.rfc-editor.org/rfc/rfc3986#section-2.3)

“未保留”不需要进行百分比编码。

关于您关于在 URL 中公开它的评论：编码**不是**加密。如果您不想在 URL 中公开整数用户 ID，您可能需要为用户设置另一个可以公开的唯一标识符。例如，用户表中唯一的随机字符串（类似于 youtube.com 识别视频的方式）或 GUID。

如何使用 RijndaelManaged 在 C# 中进行简单对称加密的示例： [简单不安全的双向数据“混淆”？](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

确保对加密密钥保密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:30:16.110

UrlEncode 方法的目的是将字符串转换为可在 URL 中使用的格式。“2”已经可以在 URL 中使用，因此这是一个空转换，它将导致相同的值“2”。

[RFC 3986 的第 2 节](https://www.rfc-editor.org/rfc/rfc3986#section-2)概述了必须对哪些字符进行编码才能成为 URL 的一部分。

# matlab - Matlab：变量值显示“错误显示值”

> ID：16073470
> 
> 赞同：0
> 
> 时间：2013-04-18T02:21:13.370
> 
> 标签：matlab

我已将一些输出变量保存到 .mat 文件中。它在工作区中正确显示了它的值。不幸的是，工作区中的变量值现在显示“错误显示值”，而不是之前显示的适当大小值。我在另一台计算机上执行了相同的程序，但在那里我可以看到正确的值。

# php - 如何在格式错误的 URL 中捕获文件类型

> ID：16073472
> 
> 赞同：1
> 
> 时间：2013-04-18T02:21:40.060
> 
> 标签：php, regex, preg-match

只是想知道如何提取或匹配特定的文件类型，因为有很多格式错误的 URL 和目录。

所以我需要一个好的正则表达式来匹配真实的。

```
http://domain.com/1/image.jpg <-match .jpg
http://domain.com/1/image_1.jpg/.gif <-match first .jpg
http://domain.com/1/image_1.jpg/image.png <-match first .jpg
http://domain.com/1/image_1.jpg <-match .jpg
http://domain.com/1/image.jpg.jpeg <-match only the first .jpg
http://domain.com/1/.jpg <-not match
http://domain.com/.jpg.jpg <- not match
/1/.jpg <-not match
/.jpg.png <-match the first jpg
/image.jpg.png <-match the first jpg 
```

我正在尝试使用这段代码：

```
preg_match_all('([a-zA-Z0-9.-_](jpg))i', $url, $matches); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:27:54.900

```
preg_match('(^(http://domain.com/\w.*?\.jpg))i', $url, $matches); 
```

这将匹配从字符串开头到第一个的所有内容`.jpg`。文件名部分必须以字母、数字或`_`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:37:24.087

使用正则表达式解析 URL 通常是个坏主意。有关相关问题，请参阅[获取部分 URL (Regex)](https://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex)。特别是，看看[这个答案](https://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex/27821#27821)，然后意识到这[`parse_url`](http://docs.php.net/parse_url)可能是一个好的开始。获取`$result['path']`并在其上使用文件名解析 API 来提取扩展名。

不过，我不确定您要问的是什么。

```
http://domain.com/1/image_1.jpg/.gif <-match first .jpg
http://domain.com/1/image_1.jpg/image.png <-match first .jpg 
```

在这两种情况下*image_1.jpg*都是一个完全有效的目录名。您可以在“/”上拆分路径并检查每个路径的“有效性”。

**编辑**我刚刚注意到您也需要它来处理相对 URL。 `parse_url`在这种情况下效果不佳。

# php - 获取 Json 值

> ID：16073476
> 
> 赞同：0
> 
> 时间：2013-04-18T02:21:53.027
> 
> 标签：php, json

我从某个 URL 获得的以下结果。我需要从 php 中的以下 json 响应中获取一些值

```
{"request":{"airport":{"requestedCode":"IXJ","fsCode":"IXJ"},"date":{"year":"2013","month":"4","day":"18","interpreted":"2013-04-18"},"hourOfDay":{"requested":"12","interpreted":12},"numHours":{"requested":"6","interpreted":6},"utc":{"requested":"false","interpreted":false},"codeType":{},"maxFlights":{"requested":"1","interpreted":1},"extendedOptions":{},"url":"https://api.flightstats.com/flex/flightstatus/rest/v2/json/airport/status/IXJ/dep/2013/04/18/12"},"appendix":{"airlines":[{"fs":"G8","iata":"G8","icao":"GOW","name":"GoAir","active":true}],"airports":[{"fs":"BOM","iata":"BOM","icao":"VABB","name":"Chhatrapati Shivaji International Airport","city":"Mumbai","cityCode":"BOM","countryCode":"IN","countryName":"India","regionName":"Asia","timeZoneRegionName":"Asia/Kolkata","localTime":"2013-04-18T08:37:27.791","utcOffsetHours":5.5,"latitude":19.095508,"longitude":72.874969,"elevationFeet":27,"classification":1,"active":true,"delayIndexUrl":"https://api.flightstats.com/flex/delayindex/rest/v1/json/airports/BOM?codeType=fs","weatherUrl":"https://api.flightstats.com/flex/weather/rest/v1/json/all/BOM?codeType=fs"},{"fs":"SXR","iata":"SXR","icao":"VISR","name":"Srinagar Airport","city":"Srinagar","cityCode":"SXR","countryCode":"IN","countryName":"India","regionName":"Asia","timeZoneRegionName":"Asia/Kolkata","localTime":"2013-04-18T08:37:27.791","utcOffsetHours":5.5,"latitude":34.002308,"longitude":74.762631,"elevationFeet":5436,"classification":4,"active":true,"delayIndexUrl":"https://api.flightstats.com/flex/delayindex/rest/v1/json/airports/SXR?codeType=fs","weatherUrl":"https://api.flightstats.com/flex/weather/rest/v1/json/all/SXR?codeType=fs"},{"fs":"IXJ","iata":"IXJ","icao":"VIJU","name":"Satwari Airport","city":"Jammu","cityCode":"IXJ","countryCode":"IN","countryName":"India","regionName":"Asia","timeZoneRegionName":"Asia/Kolkata","localTime":"2013-04-18T08:37:27.387","utcOffsetHours":5.5,"latitude":32.68077,"longitude":74.842824,"elevationFeet":1029,"classification":4,"active":true,"delayIndexUrl":"https://api.flightstats.com/flex/delayindex/rest/v1/json/airports/IXJ?codeType=fs","weatherUrl":"https://api.flightstats.com/flex/weather/rest/v1/json/all/IXJ?codeType=fs"}],"equipments":[{"iata":"320","name":"Airbus Industrie A320","turboProp":false,"jet":true,"widebody":false,"regional":false}]},"flightStatuses":[{"flightId":294315800,"carrierFsCode":"G8","flightNumber":"387","departureAirportFsCode":"IXJ","arrivalAirportFsCode":"BOM","departureDate":{"dateLocal":"2013-04-18T15:15:00.000","dateUtc":"2013-04-18T09:45:00.000Z"},"arrivalDate":{"dateLocal":"2013-04-18T18:05:00.000","dateUtc":"2013-04-18T12:35:00.000Z"},"status":"S","schedule":{"flightType":"J","serviceClasses":"RFJY","restrictions":"","uplines":[{"fsCode":"BOM","flightId":294284559},{"fsCode":"SXR","flightId":294354303}]},"operationalTimes":{"publishedDeparture":{"dateLocal":"2013-04-18T15:15:00.000","dateUtc":"2013-04-18T09:45:00.000Z"},"publishedArrival":{"dateLocal":"2013-04-18T18:05:00.000","dateUtc":"2013-04-18T12:35:00.000Z"},"scheduledGateDeparture":{"dateLocal":"2013-04-18T15:15:00.000","dateUtc":"2013-04-18T09:45:00.000Z"},"scheduledGateArrival":{"dateLocal":"2013-04-18T18:05:00.000","dateUtc":"2013-04-18T12:35:00.000Z"}},"flightDurations":{"scheduledBlockMinutes":170},"airportResources":{"arrivalTerminal":"1B"},"flightEquipment":{"scheduledEquipmentIataCode":"320"}}]} 
```

就像我只想获取 carrierFsCode,flightNumber,departureAirportFsCode,arrivalAirportFsCode,departureDate,arrivalDate,status,scheduledGateDeparture,flightDurations,flightDurations

json 响应中有许多航班状态。有人可以帮我获得这些值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:30:09.360

你似乎已经用 json-decode 标记了这个。有什么特别的原因不适合你吗？

```
$json = ''; //your json string here
$obj = json_decode($json);

var_dump($obj); 
```

编辑：更新答案以免讨论延长这么长时间。为了获取所有状态，您需要为 flightStatuses 数组运行一个 foreach 循环。

```
foreach ($obj->flightStatuses as $flightstatus) {
    echo $flightstatus->flightId,"<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:37:29.103

[您可以使用json_decode](http://php.net/manual/en/function.json-decode.php)将此 JSON 转换为关联数组。然后，您可以轻松选择所需的值。假设您的 JSON 包含在名为 $data 的变量中

```
$associative_array = json_decode($data, true);
$carrierFsCode = $associative_array['carrierFsCode'];
$flightNumber = $associative_array['flightNumber']; 
```

... ETC

# asp.net-mvc - 带有 EF 的 ASP.NET，如何自动完成文本字段以从数据库中查找

> ID：16073482
> 
> 赞同：0
> 
> 时间：2013-04-18T02:22:23.013
> 
> 标签：asp.net-mvc, entity-framework

我什至不知道如何搜索这个 - 我正在使用 .NET MVC 4 和 EF，并且我有 2 个具有一对多关系的简单模型 - 公司和位置。一家公司可以有很多地方（例如，澳大利亚、美国、加拿大等）

我想创建一个具有文本字段的表单，用户可以在其中输入以逗号分隔的位置列表，这将自动完成现有位置，或者为新位置添加新位置。

即，如果他们开始输入“Aus”并且 Austrlia 和 Austria 都在 Locations 数据库表中，那么应该向用户显示这些以供选择——就像 StackOverflow 对标签所做的那样。但是，如果他们输入的位置在数据库表中尚不存在，那么这应该会创建一条新记录。

任何指针将不胜感激！

谢谢，罗比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:46:30.830

在呈现视图之前，我会从数据库中读取所有位置，并将它们序列化为 JSON 结构，或呈现视图中的简单 JavaScript 数组。这将在 jQuery 的帮助下用于客户端的自动完成（您可以使用一个插件，但应该足够简单，以便满足您的需要。我不会通过使用某种 Ajax 调用来使事情复杂化由 keydown 事件触发的服务器。

提交表单后，显然位置字段的内容将只是文本。因此，您需要在数据库中查找该位置，如果它没有返回任何内容，则需要在保存公司记录之前添加它。

我不知道您的确切型号，但代码可能如下所示：

```
var location = db.Locations.Find(l => l.LocationName == valueThatWasSubmitted);
if (location == null) 
{
    // save new location
} 
// location exists, proceed with the rest (saving the company, etc.) 
```

# java - 使用字符串/字符创建子菜单？

> ID：16073489
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:23:28.887
> 
> 标签：java

```
public static String getSubMenu(String submenu){
        Scanner keyboard = new Scanner(System.in);
        String chosen="", A="A",B="B", a="a", b="b";
        do{
        chosen = keyboard.next();
        keyboard.nextLine();
        System.out.print("\n\n");
        }while(chosen.compareTo(A));
        return chosen;
    }
    //This function below is fine.
    public static void Menu(){
        String unem="";
        do{
        System.out.println("Sub Menu");
        System.out.println("Select an Option\n\n");
        System.out.println("a.Sort by name\n" +                            
                           "b.Sort by time\n" +
                           "c.Exit sub-menu\n\n");
        System.out.print("Input the number for the selected option: ");
        unem= getSubMenu(unem);
        if("a".equals(unem)|| "A".equals(unem)){

        }
        if("b".equals(unem)|| "B".equals(unem)){

        }
    }while ("a".equals(unem) ||"b".equals(unem) || "A".equals(unem) || "B".equals(unem));

    }

} 
```

嗨，我正在尝试制作子菜单。正如你在函数中看到的`Menu`，当`getSubMenu`被调用时，用户必须在函数中输入一个选定的选项`getSubMenu`。我浏览了我的教科书和网上，似乎你不能`char`在诸如此类的论点中使用

```
char a="a";
if(a != b); 
```

如果您可以在上述函数中使用字符而不是字符串，请告知。

但继续前进。我现在要做的是`getSubMenu`返回一个包含其中任何一个的字符串`'A' || 'a' || 'b' || 'B' || 'c' || 'C'`，然后当用户没有将其中任何一个作为输入时循环。我试过尝试使用`compareTo`，但我收到了`Type mismatch: cannot convert from int to boolean error`如何改进这一点。我可以使用什么语法才能使它起作用。

感谢所有愿意为此提供帮助和贡献的人。

编辑：新的工作功能

```
 public static String getSubMenu(String submenu){
            Scanner keyboard = new Scanner(System.in);
            boolean looped = true;
            String chosen="";
            do{
            chosen = keyboard.next();
            keyboard.nextLine();
            System.out.print("\n\n");
            if("a".equals(option)|| "A".equals(option) || "b".equals(option)|| "B".equals(option) || "c".equals(option)|| "C".equals(option)){
                looped = false;
            }
            else
                System.out.println("Wrong input");
            }while(looped);
            return option; 
```

这可能不是我的目标，但它仍然发挥了作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:15:56.823

`while(chosen.compareTo(A))` is where you should get an error . The method `compareTo(String)` returns an `int` which you cannot use in `while(boolean expression)` , it requires a boolean expression which shall evaluate to `true` or `false`. I am pasting a code for reference , improvise on it :

```
 public static String getSubMenu(String submenu) {
    Scanner keyboard = new Scanner(System.in);
    List<String> list = Arrays.asList(new String[]{"A","B","C"});
    do {
        chosen = keyboard.next();
        keyboard.nextLine();
        System.out.print("\n\n");
    } while (chosen!=null && list.contains(chosen.toUpperCase()));
    return chosen;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:30:02.957

`compareTo()`比较 2 个对象并返回一个表示哪个对象更大的 int。由于它不是布尔值，因此您的`do while`循环无法编译。如果您正在寻找用户的特定输入，请使用此代码段。

```
 do
        {
            chosen = keyboard.next();
            keyboard.nextLine();
            System.out.print("\n\n");
        }
        while (!chosen.trim().equalsIgnoreCase("a")); 
```

您需要`trim()`字符串来删除空格等字符，您可以使用它`equalsIgnoreCase()`来匹配“A”和“a”。

# java - 我的 if 条件有什么问题？

> ID：16073498
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:24:19.677
> 
> 标签：java, sorting, arraylist

我已经尝试了三个小时来解决这个问题。我相信语法是正确的，但方法不起作用。这个类接受一个 Point2D 类型的 arrayList（我定义的类），它包含一个点的 x 和 y 元素。我正在尝试按升序大小对 arrayList 进行排序（例如（200、200）、（200、400）、（400、200）、（400、300）、（400、400）...等，所以排序 x 点，然后排序 y 点）。indexOfSmallest 最小的 for 循环中的 if 条件（如果我正确的话）应该可以工作，但它只会对 x 值进行正确排序。有任何想法吗？先感谢您！！

```
import java.util.ArrayList;

public class Point2DSelectionSort {
    public Point2DSelectionSort() {
    }

    public static void sort(ArrayList<Point2D> a) {
        int index, index2,indexOfNextSmallest;

            for (index = 0; index < a.size( ) - 1; index++){
              indexOfNextSmallest = 
                            indexOfSmallest(index, a);
              interchange(index,indexOfNextSmallest, a);
            }

            //a.get(0), a.get(1),...,a.get(index) are sorted.
     }

    /**
     * Precondition : i and j are legal indices for the ArrayList a.
     * Postcondition: a.get(i) and a.get(j) have been interchanged.
     */
     private static void interchange(
                                int i, int j, ArrayList<Point2D> a) {
        Point2D temp;
        temp = a.get(i);
        a.set(i, a.get(j));
        a.set(j, temp);
     }

    /**
     * @return  the index of the lexicographically first value among
     * a.get(startIndex), a.get(startIndex+1),...,a.get(a.size( ) - 1)
     */
    private static int indexOfSmallest(
                                 int startIndex, ArrayList<Point2D> a) {
        Point2D min = a.get(startIndex);
        int indexOfMin = startIndex;
        //Point2D otherPair = (Point2D) min;
        for (int index = startIndex + 1; index < a.size( ); index++){

            if((a.get(index).getFirst() < min.getFirst()) || (( a.get(index).getFirst() == min.getFirst() ) && ( a.get(index).getSecond() < min.getSecond() ))){
                   min = a.get(index);
                   indexOfMin = index; 
            }

        }
        return indexOfMin;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:37:41.010

你的整个课程是不必要的，因为它可以被调用来代替`Collection.sort()`

```
List<Point2D> list; // assuming

Collections.sort(list, new Comparator<Point2D>() {
    public int compare(Point2D a, Point2D b) {
        return a.x == b.x ? a.y - b.y : a.x - b.x;
    }
}); 
```

瞧！

* * *

如果这是一个作业，并且您必须使用该类，请将此代码合并到您的方法中（丢弃除 sort 方法之外的所有方法）：

```
public static void sort(ArrayList<Point2D> a) {
    Collections.sort(list, new Comparator<Point2D>() {
        public int compare(Point2D a, Point2D b) {
            return a.x == b.x ? a.y - b.y : a.x - b.x;
        }
    });
} 
```

任务完成。

要具体回答您“我的 if 语句有什么问题”的问题，答案是“它存在”。

# haskell - Haskell - 运行 monad 状态

> ID：16073502
> 
> 赞同：1
> 
> 时间：2013-04-18T02:25:04.277
> 
> 标签：haskell, monads, states

我被困在试图获得这个功能：

```
runArrayState :: Array arr => ArrayState arr e a -> arr e -> (a, arr e) 
```

**要运行ArrayState**操作，我们称它为与数组**arr**一起操作 并获取结果并将结果**res**和原始数组**arr'**作为一对 (res,arr') 返回。

ArrayState 定义为

```
data ArrayState arr e a = MkArrayState (arr e -> (a, arr e)) 
```

我以为会是：

```
runArrayState act arr = ((act arr), arr) 
```

或者

```
runArrayState MkArrayState (\ arr -> (res, arr)) arr' = (res, arr') 
```

但这一切都失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:31:58.380

我认为

```
runArrayState (MkArrayState act) arr = act arr 
```

就是你要找的。

您的类型`ArrayState`被定义为具有单个构造函数，该构造`MkArrayState`函数的参数是一个函数，该函数将数组成对，由结果和（可能）更新的数组组成。在上面的定义中，我们使用标识符`act`来引用这个函数和`arr`作为输入的数组。在定义的右侧，我们然后简单地应用函数`act`来`arr`获得所需的对。

或者，您可以将您的类型定义为

```
data ArrayState arr e a = MkArrayState {runArrayState :: arr e -> (a, arr e)} 
```

或者，（很可能）甚至更好，

```
newtype ArrayState arr e a = MkArrayState {runArrayState :: arr e -> (a, arr e)} 
```

这样，您将直接定义一个类型的析构函数`ArrayState arr e a -> arr e -> (a, arr e)`（即，没有类约束，在上述版本中也不需要）。

# web-services - 为 Web 服务模拟 Http-503

> ID：16073503
> 
> 赞同：3
> 
> 时间：2013-04-18T02:25:32.083
> 
> 标签：web-services, mocking, soapui, osb

当服务器由于临时过载或维护服务器而无法处理请求时，我想模拟 HTTP 503（错误 503--服务不可用）的 Web 服务响应。什么是最好的策略？感谢：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-21T06:24:57.570

这是我使用的：

[https://httpstat.us/503](https://httpstat.us/503)

无需外部软件或依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T20:06:09.137

You can use the following Groovy script:

```
mockRequest.getHttpResponse().sendError(503) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T09:58:40.047

使用 xml 模拟，您可以模拟几乎所有带有 http 响应的东西，而不需要真正的服务器。

[http://sourceforge.net/projects/xmlmimic/](http://sourceforge.net/projects/xmlmimic/)

[http://sourceforge.net/projects/xmlmimic/](http://sourceforge.net/projects/xmlmimic/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-17T17:48:52.110

使用：[https](https://designer.mocky.io/) ://designer.mocky.io/用于测试 503 http 请求

# intel-vtune - Vtune 报告 在任何已知模块之外

> ID：16073507
> 
> 赞同：5
> 
> 时间：2013-04-18T02:25:53.093
> 
> 标签：intel-vtune

我正在为我的 linux 应用程序热点收集使用 Intel(R) VTune(TM) Amplifier XE 2013 Update 5 (build 274450)，但报告说“[在任何已知模块之外]”消耗大部分时间，所以我想获取有关未知模块的更多信息。

当我阅读 vtune Amplifier 的发行说明时，它说“热点列表可能包含”在内核早于 2.6.20 (200233501) 的系统上的“任何已知模块之外””，但我的 linux 内核是“2.6.32”，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T09:45:09.327

检查您的程序是否没有即时生成代码（即不是 JIT-ing）。您可能还想将分组切换到“模块/代码位置/调用堆栈”并查看 VTune 无法将哪些虚拟地址映射到任何已知模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-22T09:53:43.877

我过去也曾遭受过这个问题的困扰，如果您不知道为什么会这样，那将非常令人沮丧。

2 周前，我安装了 Ubuntu 13.04 和 vtune update 14，我欣喜若狂，因为我可以（再次）看到我的代码中发生了什么。

在我的 Ubuntu 上做了一些更新后，vtune 开始显示你的问题

*   我安装了内核源..没有帮助..

*   我重装了驱动，没用。

*   我重新安装了英特尔 vtune .. 没有帮助。

然后我决定在root下运行，你知道什么......它有效；不再有“在任何已知模块之外”。我切换回我的普通用户，它停止工作。我切换回我的根目录，它可以工作。所以也许是某种访问问题。

也许你可以试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T19:24:48.990

可能你有一些被 kptr_restrict 隐藏的内核地址，你可以查看“/proc/sys/kernel/kptr_restrict”的值：

kptr_restrict = 0，提供无限制的内核地址（推荐）。

kptr_restict = 1，如果当前用户具有 CAP_SYSLOG 能力，则提供地址。

kptr_restrict = 2，不管当前用户有什么权限，内核地址都是隐藏的。

您可以在运行跟踪之前使用此选项：

sysctl -w kernel.kptr_restrict=0

更多详细信息：[https ://software.intel.com/en-us/vtune-help-enabling-linux-kernel-analysis](https://software.intel.com/en-us/vtune-help-enabling-linux-kernel-analysis)

希望这可以帮助！

# javascript - 增量运算符和 document.write 函数的工作

> ID：16073509
> 
> 赞同：0
> 
> 时间：2013-04-18T02:26:02.703
> 
> 标签：javascript

众所周知：

> i++ -> 先使用 i 然后增加它的值
> 
> ++i -> 先增加 i 然后使用 i 的新值

但是在下面的代码中有所不同

```
var n=5;
for(i=n;i>=1;--i)
{
   console.log(i);//output:5 why?
    for(j=1;j<=n;++j)
    {
       document.write(j);
    }
document.write("\n");
} 
```

即使我们使用预减运算符，为什么 vaule 在第一个循环中输出 5？此外，我们在 innerLoop 完成后使用新行但它没有显示。这背后的原因是什么？是因为每个循环 document.write() 运行 document.open() 函数吗？如果是，在哪个上下文 || 条件将 document.write 运行 document.open() 函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T02:27:17.257

`++j`in在循环中的语句执行后出现在循环的末尾，因此and`for(j=1;j<=n;++j)`之间的构造没有区别。`for``for``++j``j++`

你可以这样想你的循环：

```
for(j=1;j<=n;)
{
   document.write(j);
   ++j;
} 
```

至于`console.log(i);//output:5 why?`问题，那是因为`5`是`i`assign in的初始值`i=n`。

至于`document.write('/n');`, HTML 忽略换行符。如果您想要一个可见的换行符，请使用一个`<p>`或`<br>`其他一些腾出空间的 HTML 结构。换行符被忽略。

这个 HTML 没有区别：

```
<span>This is some text</span> 
```

和这个带有换行符的 HTML：

```
<span>
This is some text
</span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:35:36.367

> 此外，我们在完成 innerLoop 后使用新行，但它不显示

因为 HTML 中的新行是`<br>`，而不是`\n`空格，所以不会创建新行（根据 HTML 规范）。

# ruby-on-rails - Rspec：测试所有控制器动作

> ID：16073514
> 
> 赞同：1
> 
> 时间：2013-04-18T02:26:54.957
> 
> 标签：ruby-on-rails, rspec

我有 rspec 控制器测试：

```
describe TestController do
  it "test all actions" do
    all_controller_actions.each do |a|
      expect{get a}.to_not rais_error(SomeError)
    end
  end
end 
```

如何实现`all_controller_actions`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:50:32.237

更好的方法是为控制器中的每个操作方法编写不同的测试。

如果你看一下 Rails`TestCase`类的文档——控制器测试是从这个类创建的（甚至 rspec 只是包装了这个类），你会明白我的意思：

[http://api.rubyonrails.org/classes/ActionController/TestCase.html](http://api.rubyonrails.org/classes/ActionController/TestCase.html)

文档说：

> > 功能测试允许您测试每个测试方法的单个控制器操作。

目的是控制器测试对控制器中的每个操作都有不同的测试方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:10:35.260

虽然我更喜欢一一测试，但你的问题是可行的。

```
# Must state this variable to be excluded later because MyController has them. 
a = ApplicationController.action_methods

m = MyController.action_methods

# Custom methods to exclude
e = %w{"create", "post"} 

@test_methods = m - a - e

describe TestController do
  it "all GET actions got response" do
    @test_methods.each do |t|
      expect{get t}.to_not rais_error(SomeError)
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T13:48:51.100

您应该旨在为控制器的每个操作创建不同的测试，以使测试更具表现力且更易于理解。每个动作大多位于其自己的描述块中，每个有意义的输入都有自己的上下文块。

例如：

```
describe "Users" do
  describe "GET user#index" do
    context "when the user is logged in" do
      it "should render users#index"
    end

    context "when the user is logged out" do
      it "should redirect to the login page"
    end
  end
end 
```

该示例对登录和注销用户具有不同的身份验证，我们将其分隔在块下的不同上下文`describe "GET user#index"`块中。[您可以在此处](https://kolosek.com/rspec-controller-test/)找到更详细的说明。

# ms-access - 如何在 Access 中显示特定行

> ID：16073518
> 
> 赞同：0
> 
> 时间：2013-04-18T02:27:08.653
> 
> 标签：ms-access, row

如果我有一个带有主键“ID”的表，然后我在列中有其他数据（例如：姓名、地址、电话号码），我如何进行查询以显示姓名、地址和特定ID的PhoneNum（整行）垂直？

如果需要，我可以发布一张图片来解释我的意思。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:31:11.407

对于名为 [Clients] 的表中的示例数据

```
ID  LastName    FirstName   Email
--  --------    ---------   -----
1   Thompson    Gord        gord@example.com
2   Loblaw      Bob         bob@example.com
3   Kingsley    Hank        hank@example.com 
```

查询

```
SELECT "LastName" AS fld, LastName AS val FROM Clients WHERE ID=1
UNION ALL
SELECT "FirstName" AS fld, FirstName AS val FROM Clients WHERE ID=1
UNION ALL
SELECT "Email" AS fld, Email AS val FROM Clients WHERE ID=1; 
```

返回

```
fld         val
---         ---
LastName    Thompson
FirstName   Gord
Email       gord@example.com 
```

# ios - iOS 中的 NSURLErrorDomain 错误代码 -999

> ID：16073519
> 
> 赞同：84
> 
> 时间：2013-04-18T02:27:10.897
> 
> 标签：ios, lua, coronasdk, nsurl, nsurlerrordomain

我一直在尝试使用 Corona SDK 的 Facebook API 在我正在 Facebook 上开发的游戏上发布分数。但是，我有一个问题。在我第一次尝试发布到 facebook 时，登录和用户身份验证后出现此错误：

> NSURLErrorDomain 错误代码 -999

然后，它不会在 Facebook 上发布。此错误的可能原因是什么，我该如何解决？我尝试在网上搜索，但找不到有关它的信息。提前致谢。

顺便说一句，我没有在我的应用程序上使用 webview。只是我的 Facebook 类中的小部件 api 和 show_dialog 侦听器。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-04-18T06:38:08.883

该错误已记录在[Mac 开发人员库](https://developer.apple.com/documentation/foundation/nserror/1448136-nserror_codes)（iOS 文档）中

文档中的相关部分将是：

> ## URL 加载系统错误代码
> 
> 这些值作为域“NSURLErrorDomain”的 NSError 对象的错误代码属性返回。
> 
> ```
> enum
> {
>    NSURLErrorUnknown = -1,
>    NSURLErrorCancelled = -999,
>    NSURLErrorBadURL = -1000,
>    NSURLErrorTimedOut = -1001, 
> ```

如你看到的; [`-999`是由 引起的**`ErrorCancelled`**](https://developer.apple.com/documentation/foundation/1508628-url_loading_system_error_codes/nsurlerrorcancelled)。这意味着：*在前一个请求完成之前发出另一个请求。*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-29T07:31:52.797

hjpotter92 是绝对正确的，我只是想为我的案例提供解决方案。希望它对你也有用。这是我的情况：

在登录页面>按登录>弹出加载对话框>调用登录服务>关闭对话框>推送另一个屏幕>调用另一个服务->导致错误-999

为了解决这个问题，我在关闭对话框和推送新屏幕之间设置了一个延迟：

```
 [indicatorAlert dismissWithClickedButtonIndex:0 animated:YES];
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.01 * NSEC_PER_SEC), dispatch_get_main_queue(), ^{
                [self performSegueWithIdentifier:@"HomeSegue" sender:nil];
            }); 
```

奇怪的是，这个问题只发生在 iOS 7 上。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-01-14T09:34:50.830

只是想在这里补充一下，当收到`-999 "cancelled"`问题时，通常是以下两件事之一：

*   您再次执行完全相同的请求。
*   您正在维护对`manager`过早释放的对象的弱引用。（创建强引用）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-04T10:31:20.953

我在使用 Alamofire 时遇到了同样的错误，这是因为证书固定。该证书不再有效，因此我不得不将其删除并添加新证书。希望能帮助到你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-21T23:07:01.117

我没有使用 Corona SDK 的 Facebook API，但是我在使用 Alamofire 时遇到了这个问题`secondRequest`，根据我在互联网上找到的帖子，总是取消执行并出现错误 -999，原因是该`session`属性`deinit`在异步工作完成之前它超出了范围，我终于通过`deinit`会话属性手动解决了这个问题，所以编译器不会在错误的位置取消它：

```
class SessionManager {
    var session:SessionManager?

    init() {
        self.session = SessionManager(configuration:URLSessionConfiguration.ephemeral)
    }
    private func firstRequest() {
        guard let session = self.session else {return}
        session.request(request_url).responseData {response in
            if let data=response.data {
                self.secondRequest()
            }
    }
    private func secondRequest() {
        guard let session = self.session else {return}
        session.request(request_url).responseData {response in
            if let data=response.data {
                self.secondRequest()
            }
            //session will no longer be needed, deinit it
            self.session = nil
    }

    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-24T07:56:50.313

除了[Ramon](https://stackoverflow.com/users/3292837/ramon)写的以外，收到 a 时还有第三种可能的原因`NSURLErrorDomain -999 cancelled`：

您在执行任务时取消了任务，方法是调用`.cancel()`datatask 对象或因为您使用`.invalidateAndCancel()`了会话对象。如果您正在使用委托创建自定义会话，则应调用`.invalidateAndCancel()`或`.finishTasksAndInvalidate()`解析会话与其委托之间的强引用，如[Apple Developer Documentation](https://developer.apple.com/documentation/foundation/urlsession)中所述：

> 会话对象保持对委托的强引用，直到您的应用退出或显式使会话无效。如果您不使会话无效，您的应用程序会泄漏内存，直到它退出。

如果您想知道这种日志记录行为，我在[Apple 开发者论坛](https://forums.developer.apple.com/thread/88020)中找到了以下解释：

> 作为解释，早在 iOS 10 中，我们就引入了一个新的日志系统范围的日志架构（详情请观看[WWDC 2016 Session 721 Unified Logging 和 Activity Tracing](https://developer.apple.com/videos/play/wwdc2016/721/)），包括 CFNetwork 在内的许多子系统正在迁移到那。在该动作完全完成之前，您将遇到像这样的一些奇怪的边缘情况。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-26T03:47:58.237

我们公司的应用程序在iOS中有很多-999错误。找了一圈，发现原因有两个，比如网络任务被dealloc或者证书无效。但是我检查了我们的代码，这两个是不可能的。我正在使用使用 URLSession 的 Alamofire。幸运的是，我们公司的android app的网络是正常的。所以我们检查差异。我们发现iOS的http请求是Http2.0，而android是Http1.1。所以我们强制后端http支持版本降低到http1.1，然后-999错误计数下降！！！

我认为 Apple 的 URLSession 中可能存在一些错误。检查链接[New NSURLSession 每个 DataTask overkill？](https://forums.developer.apple.com/thread/84663)一些详细的想法

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-25T17:57:50.137

请检查如果您`cancel()`要求`URLSessionDataTask`修复

```
NSURLErrorDomain Code=-999 "cancelled" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-12T19:39:47.660

我在 iOS 特定版本的 Xamarin 应用程序中收到此错误。不确定根本原因，但在我的情况下，能够通过使用 post 方法而不是 get 来解决它，而不是在请求正文中传递服务器上下文的任何内容——无论如何这更有意义。Android / Windows / 服务都处理带有内容的 GET，但在 iOS 应用程序中将变得部分无响应，然后在日志中吐出 999 NSUrlErrorDomain 内容。希望这可以帮助其他人遇到这个问题。我假设网络代码陷入循环，但看不到有问题的代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-01T08:03:49.317

对于我的**Cordova 项目（或类似项目）**，原来是**插件问题**。确保您没有丢失任何插件，并确保它们已正确安装且没有问题。

验证这一点的最简单方法是通过**重新创建 Cordova 项目**( `cordova create <path>`) 以及所需的平台 ( `cordova platform add <platform name>`) 重新开始，并使用详细标志 (--verbose) 添加每个插件，以便您可以查看控制台日志中是否出现任何问题在为每个平台下载、添加到项目和安装插件时 ( `cordova plugin add cordova-plugin-device --verbose`)

回顾： `cordova create <path>` `cordova platform add <platform name>` `cordova plugin add cordova-plugin-device --verbose`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-11T17:43:12.087

就我而言，我使用了一个不需要正文内容的上传任务帖子：

```
// The `from: nil` induces error "cancelled" code -999
let task = session.uploadTask(with: urlRequest, from: nil, completionHandler: handler) 
```

解决方法是使用零字节数据而不是 nil，

```
let task = session.uploadTask(with: urlRequest, from: Data(), completionHandler: handler) 
```

框架文档没有说明为什么 from bodyData 是可选类型，或者当它为 nil 时会发生什么。

# android - 使宽网页适合移动设备的宽度

> ID：16073527
> 
> 赞同：2
> 
> 时间：2013-04-18T02:28:09.713
> 
> 标签：android, iphone, html, css

我有一个站点，为了适应某些页面的内容，站点的最小宽度为 1170px。我也无法制作单独的移动版本。

iPhone 和 Droids 通常会自动调整页面大小以适应宽度。但是，如果内容的高度小于屏幕的高度，然后宽度超出屏幕，他们似乎不会调整页面大小。

关于我应该改变什么的任何想法？我不知道进行哪些编辑不会弄乱桌面演示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:26:31.907

有一些方法可以在其他任何事情之前做到这一点非常重要

如果您的目标是在设备上工作，只需将该代码放在结束标记之前`</head>`

```
<meta name="viewport" content="width=device-width" /> 
```

然后，如果您不想重复您的代码，只需针对您希望网站使用[媒体查询显示的屏幕](http://css-tricks.com/css-media-queries/)

下面的例子：

```
@media handheld, screen and (max-width: 320px){
    .yourElementClassOrId {
        width:100%;  
    }
} 

@media handheld, screen and (max-width: 720px){
    .yourElementClassOrId {
        width:100%;  
    }
}  
@media handheld, screen and (max-width: 620px){
    .yourElementClassOrId {
        width:100%;  
    }
} 
```

[但是如果您的网站已经有灵活的网格](http://www.google.com.ph/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://alistapart.com/article/fluidgrids&ei=s59vUde7OuXniAeFsYDIBQ&usg=AFQjCNEu_D7VaMAVCvSGq6eZ6nH-huMFBA&sig2=yvsgCdKL5c10sVh6wVIZ1A&bvm=bv.45373924,d.aGc)，则很容易操作您的网站

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:42:51.613

您正在使用 twitter 引导程序，并且您的代码中缺少**bootstrap-responsive.css 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:12:34.203

尝试添加`target-densitydpi=device-dpi`到元视口。这是特定于 Android 的。

```
<meta name="viewport" content="width=device-width, target-densitydpi=device-dpi"> 
```

# google-chrome - 如何在 chrome 浏览器中获取 IHtmlDocument2？

> ID：16073532
> 
> 赞同：2
> 
> 时间：2013-04-18T02:29:08.277
> 
> 标签：google-chrome, chromium, ihtmldocument2

在 Internet Explorer 中，我可以使用 IHtmlDocument2 来获取 html 文档。

```
function GetCurrentBrowserDOM: WideString;
var
  hr: HRESULT;
  CurrentIE: IWebbrowser2;
  Wnd: HWND;
  WndChild:HWND;
  document: IDispatch;
  RootNode: IHTMLDocument2;
  innerHtml: WideString;
begin
  Result := '';
  Wnd := GetForegroundWindow;
  WndChild := FindWindowEx(Wnd, 0,'Frame Tab', nil);
  WndChild := FindWindowEx(WndChild, 0,'TabWindowClass', nil);
  WndChild := FindWindowEX(WndChild, 0, 'Shell DocObject View', nil);
  WndChild := FindWindowEX(WndChild, 0, 'Internet Explorer_Server', nil);//find Internet
  CoInitialize(nil);
  try
    hr := GetIEFromHWND(WndChild, CurrentIE);
    if hr = S_OK then
    begin
      document := CurrentIE.Document;
      document.QueryInterface(IID_IHTMLDocument2, RootNode);
      innerHtml := RootNode.body.innerHTML;
    end;
  finally
    CoUninitialize;
  end;
end;

function GetIEFromHWND(WHandle: HWND; var IE: IWebbrowser2): HRESULT;
type
  TObjectFromLResult = function(LRESULT: LRESULT; const IID: TGUID; wParam: WPARAM; out PObject): HRESULT; stdcall;
var
  hInst: HWND;
  lRes: Cardinal;
  MSG: Integer;
  pDoc: IHTMLDocument2;
  ObjectFromLresult: TObjectFromLresult;
begin

  hInst := LoadLibrary('Oleacc.dll');
  @ObjectFromLresult := GetProcAddress(hInst, 'ObjectFromLresult');
  if @ObjectFromLresult <> nil then begin
    try
      MSG := RegisterWindowMessage('WM_HTML_GETOBJECT');
      SendMessageTimeOut(WHandle, MSG, 0, 0, SMTO_ABORTIFHUNG, 1000, lRes);
      Result := ObjectFromLresult(lRes, IHTMLDocument2, 0, pDoc);
      Result := GetLastError;
      if Result = S_OK then
        (pDoc.parentWindow as IServiceprovider).QueryService(IWebbrowserApp, IWebbrowser2, IE);
    finally
      FreeLibrary(hInst);
    end;
end; 
```

我使用 spy++ 寻找镀铬框架手柄，我找到了它们。

```
 Wnd := GetForegroundWindow;
  WndChild := FindWindowEx(Wnd, 0, 'Chrome_WidgetWin_0', nil);
  WndChild := FindWindowEx(WndChild, 0, 'Chrome_RenderWidgetHostHWND', nil);
  WndChild := FindWindowEx(WndChild, 0, 'CompositorHostWindowClass', nil); 
```

但它无法在名为 ObjectFromLresult 的函数中捕获结果。

```
ObjectFromLresult(lRes, IHTMLDocument2, 0, pDoc); 
```

我得到的错误代码是 127。

这是否意味着 chrome 浏览器不支持这种方式来获取其 html 文档？

如果答案是肯定的，还有其他方法可以捕捉到它吗？

多谢。

PS：我尝试使用MSAA树，但它也不起作用。（只能获取标题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T15:04:24.347

这是不可能的，IHtmlDocument2 是仅在 IE 托管对象中支持的接口，Chrome 中使用的 WebKit 引擎不支持它。但是，您可以使用 MSAA 访问元素，但您需要先启用辅助功能：http: [//www.chromium.org/developers/design-documents/accessibility](http://www.chromium.org/developers/design-documents/accessibility)

或者您也可以通过远程调试协议访问 DOM：[https ://developers.google.com/chrome-developer-tools/docs/protocol/1.0/index](https://developers.google.com/chrome-developer-tools/docs/protocol/1.0/index)

# cuda - cuFFT 所需的缓冲区

> ID：16073534
> 
> 赞同：0
> 
> 时间：2013-04-18T02:29:12.780
> 
> 标签：cuda, cufft

这个问题是关于 cuFFT 所需的缓冲区。在用户指南中记录了

> 在最坏的情况下，CUFFT 库为 8*batch*n[0]*..*n[rank-1] cufftComplex 或 cufftDoubleComplex 元素分配空间（其中 batch 表示将并行执行的转换数量，rank 为输入数据的维数（参见多维变换）和 n[] 是变换维数的数组）分别用于单精度和双精度变换。

“变换维度数组”是什么意思？cuFFT 需要多少缓冲？我对上述内容的理解是，它至少需要 8 倍于被 FFT 处理的数组的大小，但这对我来说没有意义

提前致谢

丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:42:54.520

“变换维度数组”是包含每个维度中问题大小的数组，有关更多信息，请参见[多维变换部分。](http://docs.nvidia.com/cuda/cufft/index.html#unique_1110380025)

cuFFT 正在分配临时空间以容纳中间数据，您引用的文档部分说这是“最坏的情况”，所以它不是“至少 8 倍”，最多。医生[接着](http://docs.nvidia.com/cuda/cufft/index.html#topic_2)说：

> 根据计划的配置，可能会使用较少的内存。在某些特定情况下，临时空间分配可以低至 1*batch*n[0]*..*n[rank-1] cufftComplex 或 cufftDoubleComplex 元素。

因此对于 NxM 2D 单精度变换：

```
1*N*M*sizeof(cufftComplex) <= space for tmp data <= 8*N*M*sizeof(cufftComplex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T13:39:24.917

使用`cufftGetSize1d`and`cufftEstimate1d`给你分配给缓冲区的内存量。文档说`cufftPlan1d`给出了最大数量的估计并`cufftGetSize1d`提供了更精确的估计。

就我而言，我同时使用 64 点和 8192 点 FFT。我遇到了同样的问题，缓冲区大小只分配 1*batch*n[0] 个元素。我用不同的数据量和不同的 FFT 大小进行了测试，我得到了相同的值。

总而言之，如果您需要确定 FFT 使用的内存，CuFFT 库提供了一个函数来执行此操作。

# javascript - AngularJS - 为什么有多个控制器

> ID：16073536
> 
> 赞同：15
> 
> 时间：2013-04-18T02:29:50.903
> 
> 标签：javascript, angularjs

AngularJS 应用程序中有多个控制器的原因是什么？我现在已经构建了一些 Angular 应用程序，而且我从未遇到过我认为多个控制器会使事情变得更容易的问题。

我仍然有点n00b，从未编写过单元测试，而且我的代码不像它可以管理的那样易于管理，所以我确信这只是无知。而且我听说其他人有多个控制器。

换句话说：一个人怎么知道他们应该创建一个新的控制器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T05:03:47.120

从我所见，Angular 应用程序应该具有用于​​不同范围的单独控制器。例如，几乎所有应用程序都有用户数据。您需要将此数据附加到用户控制器内的用户模型：

```
function UserCtrl ($scope) {
    $scope.user = {
        name: "bmorrow",
        lastLogin: "4/16/2013"
    };
} 
```

并且模板（我们的视图）将位于应用程序结构的特定部分中。例如，导航栏的右侧，或用户详细信息页面上。我们通过使用 为它分配一个控制器来确定这部分的位置`ng-controller`。这将创建`scope`所述控制器的 并将相应的模型绑定到它。模型（我们的数据）通过控制器连接到视图（HTML）。

假设应用程序有一个用户撰写文章的页面。我们可以创建另一个控制器，仅限于专门保存文章内容的 HTML 部分。

```
function ArticleCtrl ($scope) {
    $scope.article = {
        title: "Hello World",
        body: "Lorem ipsum...."
    };
} 
```

在上面的简单示例中，组合两个控制器不会造成任何伤害。但是一旦你的应用程序开始增长，根据它所代表的数据逻辑地组织你的控制器/视图将使你的代码更清晰，更容易理解。减少不必要的复杂性将使您的**一切**变得更加轻松。使用一个控制器处理所有事情是不必要的复杂性。

您也可以在 Basarat 的回答中看到这一点。您不一定需要为每个路由使用一个控制器，但这样做有助于逻辑地构建应用程序。

因此，要回答您的问题，您通常应该为每个数据类别配备一个控制器。用户、文章、水果、蔬菜、交易等。

如果您还没有阅读有关[Angular 控制器](http://docs.angularjs.org/guide/controller)和[模型-视图-控制器模式的更多信息，请阅读。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)我希望这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T02:32:16.103

当您开始将应用程序拆分为多个视图时，您肯定会开始需要更多控制器。

例如，当您开始使用路由（也称为深度链接）时，您有一个模板 url 以及一个与该模板一起使用的控制器（查看[http://docs.angularjs.org/tutorial/step_07](http://docs.angularjs.org/tutorial/step_07)）例如

```
angular.module('phonecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T05:21:24.673

我喜欢将控制器视为“小部件”。我的后端一页一页，他们可以打开`ViewUsers`控制器（小部件），它可以打开更多的`UserDetail`控制器。

我想如果您习惯了 OOP，那么想要将它们的作用域分开和封装起来感觉很自然。

# php - 如何计算一个字段中的日期时间

> ID：16073541
> 
> 赞同：1
> 
> 时间：2013-04-18T02:30:39.220
> 
> 标签：php, mysql, sql

我在下面有一个名为 transaction_detail 的表

```
 id_transd | id_trans | id_cust | inputtime           |
 1         | 1        | 1       | 2013-04-15 16:55:58 | 
 2         | 1        | 1       | 2013-05-15 16:55:58 | 
 3         | 1        | 1       | 2013-06-15 16:55:58 |
 4         | 2        | 2       | 2013-06-15 16:55:58 | 
```

我想获取具有相同 id_cust 的输入时间（类型：日期时间）的数量。我已经完成了日期，但我不知道如何计算时间。这是我计算日期的 sql 语法：

```
select (date(max(inputtime)) - date (min(inputtime))) as total from transaction_detail where id_cust = '$idp' 
```

任何帮助将不胜感激。之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:35:45.393

使用 TIMESTAMPDIFF 函数以您想要的单位获取两个日期时间值之间的差异。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

单位可以是：MICROSECOND（微秒）、SECOND、MINUTE、HOUR、DAY、WEEK、MONTH、QUARTER 或 YEAR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:52:14.173

看看这个网站，这可能有助于你需要什么。 [http://www.sqlusa.com/bestpractices/datetimeconversion/](http://www.sqlusa.com/bestpractices/datetimeconversion/)

# extjs - Sencha Extjs 自定义按钮 UI 示例

> ID：16073542
> 
> 赞同：0
> 
> 时间：2013-04-18T02:30:48.297
> 
> 标签：extjs, uibutton, sass, compass-sass

我正在尝试使用 Sencha 的 Extjs SDK 4.1.3 版创建自定义按钮 ui，并且在尝试使用 compass 编译我的 sass 文件时不断出错。我自己尝试过故障排除，在网上四处寻找答案，并在 Sencha 论坛上发帖寻求帮助，但我似乎找不到答案。

有没有人有或知道一个实现了工作自定义按钮 UI 的示例文件？我确定只有一个小的设置或配置我有错误，因此将我所拥有的内容与示例文件进行比较会非常有帮助。

谢谢。

# c++ - 从文件中读取。C++

> ID：16073546
> 
> 赞同：0
> 
> 时间：2013-04-18T02:31:20.317
> 
> 标签：c++

所以当我的程序启动时，它会尝试从文件中读取产品列表。但如果该文件不存在，则会显示错误并继续。我遇到的问题是当它显示错误时，它不会继续执行 do while 循环

```
ifstream input;
    input.open("data.txt");

    if (input.fail())
    {
        cout << "\n Data file not found \n";
    }
    ListItemType data; 

    input >> data.productname;
    while(( !input.eof()))
    {
        input >> data.category;
        input >> data.productprice;
        addproduct(head, data); 
        input >> data.productname;
    }

    input.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:45:49.783

它的功能并不相同，但通常最好转向以下内容：

```
if (std::ifstream input("data.txt"))
{
    ListItemType data; 
    while (input >> data.productname >> data.category >> data.productprice >> data.productname)
        addproduct(head, data);
    if (!input.eof())
        std::cerr << "Error parsing input file.\n";
}    
else
    cout << "\n Data file not found \n"; 
```

如果您像上面那样构建 if/else 子句，无论发生什么，它都会按照您的意愿继续执行以下代码。

请注意，上面的代码会在每次输入操作后检查问题。即使读取 data.category 失败，您的代码也会尝试读取 data.productprice。你读 productname 两次有点奇怪，我假设你可以在 I/O 之后调用 addproduct - 如果不是，你需要一个 while 循环，如：

```
 while (input >> data.productname >> data.category >> data.productprice)
    {
        addproduct(head, data);
        if (!(input >> data.productname))
            break;
    } 
```

# extjs - 如何在extjs4中嵌入一个html页面

> ID：16073549
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:31:36.397
> 
> 标签：extjs, extjs4

我从 extjs 4 开始，我当前的问题：插入 html 代码。在这里，我需要将该代码插入到“项目”中。所以我的经验不足不应该做。期待得到人们的帮助

**“这是代码”**

```
 Ext.define('MyDesktop.mytree', {
        extend: 'Ext.ux.desktop.Module',
        requires: [
           'Ext.tree.Panel',
           'Ext.data.TreeStore',
            'Ext.form.field.HtmlEditor',

        ],

        id:'tree',

        init : function(){
            this.launcher = {         
                //title
                text: 'My Computer',
                //icon
                iconCls:'notepad'

            };
        },

        createWindow : function(){

            var desktop = this.app.getDesktop();
            var win = desktop.getWindow('tree');        
            if(!win){
                win = desktop.createWindow({
                    id: 'tree',
                    title:'MyComputer',

                    width:600,
                    height:400,
                    iconCls: 'notepad',
                    animCollapse:false,
                    border: false,
                    hideMode: 'offsets',
                    columns:3,

                      items: [
                            {

                            },

                        ]         
                });

            }

            return win;
        }   

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:48:55.660

您可以通过三种方式在 ExtJS 中应用 HTML 代码 1\. html config 2\. autoEl config 3\. XTemplate 类

请参阅以下链接以获取您的指南和示例。

[http://www.marcusschiesser.de/2009/01/3-ways-to-render-html-inside-of-a-extjs-container/](http://www.marcusschiesser.de/2009/01/3-ways-to-render-html-inside-of-a-extjs-container/)

谢谢。

# google-apps-script - 动态小工具大小（Google Apps 脚本）

> ID：16073551
> 
> 赞同：0
> 
> 时间：2013-04-18T02:31:47.970
> 
> 标签：google-apps-script

我使用 Google Apps 脚本创建了一个小工具（10 个包含内容的树项）。

在我创建了 10 个包含内容的树项后，我意识到我必须手动将小工具的大小设置为 7000 像素才能显示所有内容（如果我展开所有树项）。

我可以知道有什么方法/是否可以根据所采取的操作使小工具的大小灵活/动态（例如：扩展树项时小工具的大小会改变）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:11:02.570

与其调整您的小工具的大小，不如将树添加到滚动面板，然后我认为树的大小并不重要，因为用户可以使用滚动条来查看它。

```
function doGet(e) {

  var app = UiApp.createApplication();
  var tree = app.createTree();
  var scroll = app.createScrollPanel(tree).setWidth(800);

  //Add items to your tree

  app.add(scroll);
  return app;
} 
```

# c - 头文件帮助和结构

> ID：16073553
> 
> 赞同：0
> 
> 时间：2013-04-18T02:32:08.603
> 
> 标签：c, struct, header, malloc

我有一个头文件，`dimensions.h`其中：

```
#ifndef DIM_H
#define DIM_H

typedef struct Dimensions
{
    int width;
    int height;
} DIM;

DIM * GetHeader (FILE * fp);

#endif 
```

从这里我有 ac 文件确实有这个：

```
#include "dimensions.h"
.
.
.
DIM *  GetHeader (FILE * fp)
{
    char s[1024];
    struct Dimensions * d = (struct Dimensions *)malloc(sizeof(Dimensions));

    if (fgets(s, sizeof(s), fp) != NULL)
    {
        printf("%s", s);
        d->width = atoi(strtok(s, " \n\0"));
        d->height = atoi(strtok(NULL, " \n\0"));
    }

    return d;
} 
```

但是当我运行它时，我会收到类似`Dimensions undeclared`. 因此，我将代码更改`Dimensions`为`DIM`（仍然没有真正理解这两个名称“方案”。

```
struct DIM * d = (struct DIM *)malloc(sizeof(DIM)); 
```

然后我收到错误`d->width`并`d->height`说它正在取消引用指向不完整类型的指针，所以我交换`->`了`.`然后是一个错误`request for member width/height in something not a structure or union`。

所以不太确定发生了什么，可能是我想念的非常简单的事情，所以如果有人能提供帮助，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:40:27.327

## 第1部分：`Dimensions undeclared`

在您的原始代码中看到这一行？

```
struct Dimensions * d = (struct Dimensions *)malloc(sizeof(Dimensions)); 
```

如果您在某个地方使用，请`struct Dimensions`在任何地方使用它。将其更改`sizeof`为

```
sizeof(struct Dimensions) 
```

并且`Dimensions undeclared`应该消失。

## 第 2 部分：`DIM`版本

你的代码：

```
struct DIM * d = (struct DIM *)malloc(sizeof(DIM)); 
```

当您使用时`typedef struct {...} DIM`，您只需将其称为`DIM`- 不`struct DIM`。

```
DIM * d = (DIM *)malloc(sizeof(DIM)); 
```

## `->`第3 部分：交换`.`

`->`当左侧是指向结构的指针并且`.`左侧只是一个结构时使用。

## tl;博士

```
struct Dimensions * d = (struct Dimensions *)malloc(sizeof(struct Dimensions)); 
```

应该修复你的代码。

# legacy-code - 绘制效果草图 - 任何工具支持它？

> ID：16073558
> 
> 赞同：3
> 
> 时间：2013-04-18T02:32:50.200
> 
> 标签：legacy-code

谁能告诉我是否有任何工具可以帮助绘制 Michael Feathers 的书“有效地使用旧代码”中描述的效果草图？

Effect Sketches 的目的是在浏览代码时显示一组耦合类中的字段和方法之间的交互。

有关效果草图的更多信息，请参阅以下博客： http: [//www.markhneedham.com/blog/2009/11/04/reading-code-unity/](http://www.markhneedham.com/blog/2009/11/04/reading-code-unity/) [http://www.markhneedham.com/blog/ 2010/02/23/编码效果草图和天皇方法/](http://www.markhneedham.com/blog/2010/02/23/coding-effect-sketches-and-the-mikado-method/)

谢谢！

本武

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:59:33.567

第二篇文章实际上演示了这样一个工具：[graphviz](http://www.graphviz.org/)。只需查看给出的示例并编写一个点文件即可。然后通过`dot`命令行程序形式 graphviz 运行它，您最终会得到看起来像文章中的图形。

点文件只是对关系的描述。有关点文件语法的更多信息，请从 graphviz 站点或此维基百科条目中阅读文档：[http://en.wikipedia.org/wiki/DOT_(graph_description_language)](http://en.wikipedia.org/wiki/DOT_(graph_description_language))

# g-wan - 索引为 servlet，其余为静态内容

> ID：16073559
> 
> 赞同：0
> 
> 时间：2013-04-18T02:32:50.413
> 
> 标签：g-wan

不久前我拿起了 G-WAN，我正试图弄清楚如何使索引使用特定的 servlet，同时还具有可用的静态内容。

*我搬到`index.html`了那里，`index_old.html`所以我不会有任何冲突。*

我将以下内容放入处理程序中。

```
xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/", "/?hello"); 
```

重新启动 gwan 后，我看到`Hello, ANSI C!`了我想要的。

但是，我注意到所有其他内容都不再加载，甚至 404 页面都不一样了！

所以，然后我想到，这似乎是在做字符串替换，而不是精确匹配。

```
xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/", "/?"); 
```

现在，当点击 时`/`，我看到了 404，然后`/hello`，我又看到了 servlet。所以，这似乎不是我正在寻找的解决方案。

同样，我只想`/`点击我指定的特定 servlet，并且所有其他请求都不受这条规则的影响。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:52:29.147

似乎在 [G-WAN 处理程序重写解决方案中提出了类似的解决方案](https://stackoverflow.com/questions/15398849/g-wan-handler-rewriting-solution/15443785#15443785)

使用它，我派生了以下代码，不仅可以生成索引，还可以生成任何其他查询字符串。

```
char *szRequest = (char*)get_env(argv, REQUEST);
if(strncmp(szRequest, "GET / ", 6) == 0){
        xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
        xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/", "/!hello");
}else if(strncmp(szRequest, "GET /?", 6) == 0){
        xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
        xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/?", "/!hello&");
} 
```

如上所示，我不得不移动`!`以避免冲突。这意味着我必须在`init()`函数中添加以下内容。

```
u8 *query_char = (u8*)get_env(argv, QUERY_CHAR);
*query_char = '!'; 
```

我能够毫无问题地访问`/`，`/?blah`同时仍然能够访问文件，例如`100.html`没有获得 servlet 404。

*似乎任何其他类似的对 URL 的绑定，而不是阻止目录的其余部分，都可以通过宏变得更容易。*

# javascript - 传单地图未显示在 Backbone 中

> ID：16073560
> 
> 赞同：0
> 
> 时间：2013-04-18T02:33:25.870
> 
> 标签：javascript, backbone.js, leaflet

这是我的看法：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'bootstrap',
    'leaflet',
    'text!templates/map/MapTemplate.html'
], function($, _, Backbone, Bootstrap, L, MapTemplate){

    var MapView = Backbone.View.extend({
        el: '.body',
        template: _.template(MapTemplate),
        render: function() {

            // Load the map template
            this.$el.html(this.template());

            // Create the map
            var map = L.map('map', {
                dragging: false
            });

            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);

            map.locate({setView: true, maxZoom: 15});

            function onLocationFound(e) {
                var radius = e.accuracy / 2;

                L.marker(e.latlng).addTo(map);

                L.circle(e.latlng, radius).addTo(map);
            }

            map.on('locationfound', onLocationFound);

            function onLocationError(e) {
                alert(e.message);
            }

            map.on('locationerror', onLocationError);
        }
    });

    return MapView;
}); 
```

而我的下划线模板中只有一个 div，其 ID 为 map。我在控制台中没有收到任何错误，当我检查请求时，它实际上正在下载所有图块和所有内容，但它们都没有被渲染。对此有什么想法吗？

# jquery - jQuery 这个选择器不适用于 animate() 方法属性

> ID：16073563
> 
> 赞同：2
> 
> 时间：2013-04-18T02:33:55.560
> 
> 标签：jquery, jquery-animate, this

有人可以向我解释为什么“this”选择器不适用于 animate() 方法属性。

[请参阅http://jsfiddle.net/qZVv4/](http://jsfiddle.net/qZVv4/)上的第一个示例，没有产生任何错误，它只是忽略它。

```
 $('#test1 .bar[data-percentage]').animate({
     width: $(this).attr('data-percentage'),
     easing: 'easeOutBounce'
 }, 1000, function () {
     $(this).text($(this).attr('data-percentage'));
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:36:43.987

因为`this`不是指您的元素。你仍然在同一个范围内，所以`this`不会改变。你必须这样做：

```
// You need the easing plugin
// https://github.com/danro/jquery-easing

$('#test1 .bar[data-percentage]').each(function() {
    var $this = $(this);

    $this.animate({
        width: $this.data('percentage')
    }, {
        duration: 1000,
        //easing: 'easeOutBounce',
        step: function(value) {
            $(this).text(value + '%');
        }
    });
}); 
```

**演示：http: [//jsfiddle.net/qZVv4/4/](http://jsfiddle.net/qZVv4/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:38:00.663

Javascript只有函数范围，`this`在你的例子中不在回调函数中，它只是引用`window`对象。

# opengl - 为什么此 GLSL 代码不适用于旧英特尔卡（openGL 2.1）？

> ID：16073575
> 
> 赞同：0
> 
> 时间：2013-04-18T02:35:37.807
> 
> 标签：opengl, glsl, shader, intel, vertex-shader

众所周知，几乎所有 3D 软件的视图部分都有一个 XYZ 轴。假设像这样画一个坐标轴。这是我的方法。

首先，有一个名为**drawOneAxis()**的函数用于仅绘制一个轴。我们调用它三次。但是，每次绘制轴之前，都要更改模型矩阵，以便我们可以得到三个相互垂直的轴。这就是函数**changeUniform_MVP()**所做的。

```
void draw()
{
    for (int i = 0; i < 3; i++)  // 0 - X axis, 1 - Y axis, 2 - Z axis
    {
        changeUniform_MVP(i);
        drawOneAxis();
    }
} 
```

顶点着色器：

```
#version 110

uniform mat4 MVP;

void main()
{
    gl_Position = MVP * gl_Vertex;
} 
```

在函数**init()**中，着色器被成功编译和链接，我们得到一个名为*programID*的程序 ID 。在**init()**结束时，我们通过调用**glUseProgram( *programID* )**来使用着色器。

我的两台电脑上的结果：

```
PC 1: intel card, openGL 3.1, all is well
PC 2: intel card, openGL 2.1, only one axis is drew (Z axis) 
```

为什么我们在这里得到两个不同的结果？
一件神奇的事！！！**在函数draw()**中添加两行代码后，PC2 上的结果是正确的。

```
void draw()
{
    for (int i = 0; i < 3; i++)
    {
        glUseProgram(programID);  // 1
        changeUniform_MVP(i);
        drawOneAxis();
        glUseProgram(0);  // 2
    }
} 
```

看来我们每次画东西时都必须重新设置程序。但我认为这是不必要的，因为我们使用相同的着色器来绘制所有的东西。我对此感到非常困惑。

它是旧英特尔卡驱动程序的错误吗？为什么加上这两行代码就OK了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:10:17.883

很难回答。较旧的英特尔 OpenGL 驱动程序确实存在问题。

drawThreeAxes() 也许？

# linux - 在一段时间内从命名管道收集数据

> ID：16073581
> 
> 赞同：1
> 
> 时间：2013-04-18T02:36:29.100
> 
> 标签：linux, bash, pipe

我想分析命名管道中的一些数据，例如：

```
cat trace_pipe | awk '{print $6}' | head -100000 | sort | uniq -c |
  sort -k 1 -nr 
```

此命令将从 中收集前 100k 行数据`trace_pipe`。有没有办法让我收集 10 秒的数据而不是有限的行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:52:17.377

您可以使用 [`timeout`](http://linux.die.net/man/1/timeout) 命令，您可能需要拆分命令

```
timeout 10 cat trace_pipe > trace_pipe.cut
awk '{print $6}' trace_pipe.cut | sort | uniq -c | sort -k 1 -nr 
```

# c# - 显示类似的产品或变体

> ID：16073584
> 
> 赞同：1
> 
> 时间：2013-04-18T02:36:45.760
> 
> 标签：c#, asp.net-mvc

我想展示类似的产品，即产品的变体。目前我正在这样做：

```
public IList<Product> GetVariants(string productName)
{
    EFContext db = new EFContext();  //using Entity Framework
    return db.Products
           .Where(product = > product.ProductName == productName)
           .ToList();
} 
```

但是，这会导致完全匹配，即当前产品本身。我正在考虑使用**Levenshtein Distance**作为获得类似产品的基础。但是，在此之前，我想检查大多数开发人员为获取变体所做的工作？

1.  使用 Levenshtein Distance 好吗？它是否在工业中用于此目的？
2.  在将产品添加到数据库时，我是否必须在数据库中添加另一个表来显示产品的变体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:45:05.117

我有效地使用了[Jaro-Winkler 距离](http://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance)来解决我不久前写的一个系统中的拼写错误。IMO，它比简单的编辑距离计算要好得多，因为它可以相当有效地考虑字符串长度。 有关开源实现，请参阅SO 上的[这个问题。](https://stackoverflow.com/questions/1510593/jaro-winkler-distance-algorithm-in-net)

[我最终用 C# 编写它并将其作为SQL CLR](http://msdn.microsoft.com/en-us/library/w2kae45k%28v=vs.80%29.aspx)函数导入 SQL Server ，但它仍然相对较慢。它在我的情况下很有效，主要是因为此类查询很少执行（一天 100-200 次）。

如果您预计会有大量流量，则必须构建索引以加快这些查找速度。一种策略是定期计算每对产品之间的距离，如果距离超过某个阈值，则将其存储在索引表中。为了减少需要完成的工作量，您可以每天只运行一次或两次，并且您可以将其限制为仅自上次运行以来的新记录或修改过的记录。然后，您可以快速查找类似产品并按距离订购。

# php - 将Paypal返回字符串输入mysql数据库？

> ID：16073592
> 
> 赞同：0
> 
> 时间：2013-04-18T02:37:32.057
> 
> 标签：php, mysql, curl

```
public function run()
    {
        $postFields = 'cmd=_notify-validate';

        foreach($_POST as $key => $value)
        {
            $postFields .= "&$key=".urlencode($value);
        }

        $ch = curl_init();

        curl_setopt_array($ch, array(
            CURLOPT_URL => $this->_url,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_SSL_VERIFYPEER => false,
            CURLOPT_POST => true,
            CURLOPT_POSTFIELDS => $postFields
        ));

        $result = curl_exec($ch);
        curl_close($ch);

        $fh = fopen('result.txt', 'w');
        fwrite($fh, $result . ' -- ' . $postFields);
        fclose($fh);

        echo $result;
    }
}
?> 
```

我在一个文本文件中得到结果，如下所示：

?cmd=_notify-validate&test_ipn=1&payment_type=instant&payment_date=02:39:41 Oct 06, 2011 PDT&payment_status=Completed&address_status=confirmed&payer_status=verified&first_name=John&last_name=Smith&payer_email=buyer@paypalsandbox.com&payer_id=TESTBUYERID01&address_name=John Smith&address_country=United States&address_country_code=US&address_zip=95131&address_state= CA&address_city=San Jose&address_street=123, any street&business=seller@paypalsandbox.com&receiver_email=seller@paypalsandbox.com&receiver_id=TESTSELLERID1&residence_country=US&item_name=something&item_number=AK-1234&quantity=1&shipping=3.04&tax=2.02&mc_currency=USD&mc_fee=0.44&mc_gross=12.34&mc_gross_1=9.34&txn_type =web_accept&txn_id=41106939¬ify_version=2.1&custom=xyz123&charset=windows-1252&verify_sign=AB3bSjvFd3wXL7rCt.OOGW-nSKg-Ahh5RbboVG4bn9LSAon94Wjt2Oj9

如何解码此字符串并将其放入 mysql 数据库？

我需要将客户的名字、姓氏、地址、电子邮件、项目编号、项目名称、数量、运输和时间戳放入数据库。请我已经在代码中走了这么远，我只需要帮助解码它并将其输入数据库。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:45:36.217

您不需要解码字符串。

我刚刚检查了 PayPal 文档。唯一`notify-validate`返回的是字符串`VERIFIED`或`INVALID`. 您发布的所有内容都不是 PayPal 返回字符串的一部分。如果你想要姓氏，它在`$_POST['last_name']`.

要将其放入 mysql INSERT 语句中，请执行以下操作（我只显示 4 列，您可以推断出您想要的所有字段）：

```
$stmt = $con->prepare("INSERT INTO mytable (first_name, last_name, address, email) values (?, ?, ?, ?)");
$stmt->bind_param("ssss", $_POST['first_name'], $_POST['last_name'], $_POST['address'], $_POST['email']);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:45:10.997

使用[parse_str](http://php.net/manual/en/function.parse-str.php)。

```
parse_str($string,$array);
var_dump($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:51:12.810

您可以使用 & 展开字符串以获取每个参数及其值，然后您可以使用 = 展开以获取键和值。

```
$params = explode('&', $result);

$paypal_result_arr = array();

foreach($params AS $param) {
   $param_arr = explode('=', $param);

   if(count($param_arr) == 2) {
       $paypal_result_arr[$param_arr[0]] = $param_arr[1];
   }
} 
```

$paypal_result_arr 关联数组将为您提供从贝宝返回的所有值。之后，您可以使用代码 $paypal_result_arr['first_name'] 等获得名字......

# java - 为什么这里没有显示 JTextField？

> ID：16073597
> 
> 赞同：-2
> 
> 时间：2013-04-18T02:38:00.220
> 
> 标签：java, swing, jframe, jtextfield

```
public class WASD extends JFrame{
Ellipse2D.Double ball;
int ballx = 100;
int bally = 100;
static JTextField typingArea;
public static void main(String[] args){ 
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
private static void createAndShowGUI(){
    WASD frame = new WASD("frame");
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

    frame.addComponentsToPane();

    frame.pack();
    frame.setVisible(true);
}
private void addComponentsToPane(){
    typingArea = new JTextField(20);
    //typingArea.addKeyListener(this);
}
public WASD(String name){
    super(name);
}
} 
```

当我运行程序时，我得到的只是一个空窗口。JTextField 不显示。谢谢！

（显然我的帖子代码太多了，所以我添加这个让它让我提交。忽略这句话和上一个。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T02:41:41.557

`JTextField`创建后还需要将其添加到框架中。

```
private void addComponentsToPane(){
    typingArea = new JTextField(20);
    frame.add(typingArea);
} 
```

# drop-down-menu - 如何更改下拉列表的选项？

> ID：16073602
> 
> 赞同：0
> 
> 时间：2013-04-18T02:39:02.190
> 
> 标签：drop-down-menu

我是 asp.net 的新手，所以我希望你能给我一些关于绑定到表格的下拉列表的帮助。

这是场景：

我有一个表 Account，其中包含 UserId、UserName 和 Type 字段。类型字段包含 3 个项目：“S”、“A”和“U”。每个用户都有自己的类型。我有一个名为“ddlType”的下拉列表，它已经

绑定在 Account 表上。但是，我希望下拉列表的选项显示为“利益相关者”、“批准者”和“用户”，而不是仅显示字母/首字母。由于我不喜欢在数据库中进行任何更改，我如何通过后面的代码更改这些选项？

这是我的代码：

public void BindControls(int selectedUserId) { DataTable dtAccount = null;

```
try
{
    dtAccount = LogBAL.GetAccountDetails(selectedUserId);

    if (dtAccount.Rows.Count > 0)
    {
        lblUserId.Text = dtAccount.Rows[0]["UserId"].ToString();
        txtUserName.Text = dtAccount.Rows[0]["UserName"].ToString();
        ddlType.SelectedValue = dtAccount.Rows[0]["Type"].ToString();
    }
}
catch (Exception ex)
{
    throw ex;
}
finally
{
    dtAccount.Dispose();
} 
```

}

你们的任何帮助将不胜感激。先谢谢了！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:11:59.003

您可以在代码隐藏中绑定 Dropdownlist。

将您的数据“类型”放入数组中。使数组二维并为其赋值。

获得数据后，您的数组将如下所示， string[,] Types = { { "Stakeholder", "S" }, { "Approver", "A" }, { "User", "U" } };

现在为 Dropdown 赋值，int rows = Types.GetUpperBound(0);
int columns = Types.GetUpperBound(1);
ddlType.Items.Clear(); for (int currentRow = 0; currentRow <= rows; currentRow++)
{
ListItem li = new ListItem();
for (int currentColumn = 0; currentColumn <= columns; currentColumn++)
{
if (currentColumn == 0)
{
li.Text = Types[currentRow, currentColumn];
}
else
{
li.Value = Types[currentRow, currentColumn];
}
}
ddlType.Items.Add(li);
}

我还没有测试它，但希望它会工作。

# node.js - 如何将 package.json 中的每个依赖项更新到最新版本？

> ID：16073603
> 
> 赞同：2337
> 
> 时间：2013-04-18T02:39:04.573
> 
> 标签：node.js, npm

我从另一个项目复制`package.json`，现在想将所有依赖项升级到最新版本，因为这是一个新项目，如果它坏了我不介意修复一些东西。

最简单的方法是什么？

我知道的最好的方法是手动运行`npm info express version`然后更新每个依赖项。`package.json`一定会有更好的办法。

```
{
  "name": "myproject",
  "description": "my node project",
  "version": "1.0.0",
  "engines": {
    "node": "0.8.4",
    "npm": "1.1.65"
  },
  "private": true,
  "dependencies": {
    "express": "~3.0.3", // how do I get these bumped to latest?
    "mongodb": "~1.2.5",
    "underscore": "~1.4.2",
    "rjs": "~2.9.0",
    "jade": "~0.27.2",
    "async": "~0.1.22"
  }
} 
```

* * *

对于**Yarn**特定的解决方案，请参阅[此 Stack Overflow](https://stackoverflow.com/questions/62650640/how-do-i-update-each-dependency-in-package-json-to-the-latest-version-using-yarn)线程。

* * *

## 回答 #1

> 赞同：2783
> 
> 时间：2013-04-18T03:35:05.653

看起来[npm-check-updates](https://www.npmjs.org/package/npm-check-updates)是现在实现这一点的唯一方法。

```
npm i -g npm-check-updates
ncu -u
npm install 
```

* * *

在 npm <3.11 上：

只需将每个依赖项的版本更改为`*`，然后运行`npm update --save`​​. （**注意：** [在最近（3.11）版本的 npm 中损坏](https://github.com/npm/npm/issues/13555)）。

前：

```
 "dependencies": {
    "express": "*",
    "mongodb": "*",
    "underscore": "*",
    "rjs": "*",
    "jade": "*",
    "async": "*"
  } 
```

后：

```
 "dependencies": {
    "express": "~3.2.0",
    "mongodb": "~1.2.14",
    "underscore": "~1.4.4",
    "rjs": "~2.10.0",
    "jade": "~0.29.0",
    "async": "~0.2.7"
  } 
```

* * *

当然，这是更新依赖的钝锤。如果——正如你所说——项目是空的并且没有什么可以破坏，那很好。

另一方面，如果您在一个更成熟的项目中工作，您可能希望在升级之前验证您的依赖项中没有重大更改。

要查看哪些模块已过时，只需运行[`npm outdated`](https://docs.npmjs.com/cli/outdated). 它将列出所有已安装的具有较新版本的依赖项。

对于**Yarn**特定的解决方案，请参阅[此 StackOverflow 答案](https://stackoverflow.com/a/62650754/7344164)。

* * *

## 回答 #2

> 赞同：1147
> 
> 时间：2014-04-03T21:53:00.453

`npm-check-updates`是一个使用所有依赖项的最新版本自动调整 package.json 的实用程序

见[https://www.npmjs.org/package/npm-check-updates](https://www.npmjs.org/package/npm-check-updates)

```
$ npm install -g npm-check-updates
$ ncu -u
$ npm install 
```

[编辑] 如果您有现代版本，那么一种稍微不那么侵入性（避免全局安装）的方法`npm`是：

```
$ npx npm-check-updates -u
$ npm install 
```

* * *

## 回答 #3

> 赞同：422
> 
> 时间：2015-06-02T22:29:34.757

# 为 npm v2+ 更新

### npm 2+（节点 0.12+）：

```
 npm outdated
npm update
git commit package-lock.json 
```

### 古代 npm（大约 2014 年）：

```
npm install -g npm-check-updates
npm-check-updates
npm shrinkwrap
git commit package-lock.json 
```

一定要收缩你的部门，否则你可能会得到一个死项目。前几天我退出了一个项目，但它无法运行，因为我的部门都已过时/更新/一团糟。如果我收缩包装，npm 会完全安装我需要的东西。

* * *

# 细节

对于能走到这一步的好奇者，我推荐以下内容：

### 使用`npm-check-updates`或`npm outdated`建议最新版本。

```
# `outdated` is part of newer npm versions (2+)
$ npm outdated
# If you agree, update.  
$ npm update

#       OR

# Install and use the `npm-check-updates` package.
$ npm install -g npm-check-updates
# Then check your project
$ npm-check-updates
# If you agree, update package.json.
$ npm-check-updates -u 
```

###然后进行全新安装（没有 rm 我收到了一些依赖警告）

```
$ rm -rf node_modules
$ npm install 
```

### 最后，将确切的版本保存到`npm-shrinkwrap.json`with`npm shrinkwrap`

```
$ rm npm-shrinkwrap.json
$ npm shrinkwrap 
```

### 现在，`npm install`现在将在`npm-shrinkwrap.json`

如果您签`npm-shrinkwrap.json`入 git，所有安装都将使用完全相同的版本。

这是一种从开发（所有更新，一直）过渡到生产（没有人什么都不做）的方法。

*   [npm 已过时](https://docs.npmjs.com/getting-started/updating-local-packages)

*   [npm 检查更新](https://www.npmjs.com/package/npm-check-updates)

*   [npm 收缩包装](https://docs.npmjs.com/cli/shrinkwrap)

ps [Yarn 正在将您的包裹清单发送到 Facebook](https://code.fb.com/web/yarn-a-new-package-manager-for-javascript/)。

* * *

## 回答 #4

> 赞同：219
> 
> 时间：2014-04-30T14:51:12.420

要将**一个**依赖项更新到其最新版本而无需手动打开`package.json`并更改它，您可以运行

```
npm install {package-name}@* {save flags?} 
```

IE

```
npm install express@* --save 
```

作为参考，[npm-install](https://docs.npmjs.com/cli/install)

* * *

**更新**：最近的版本可能需要*最新*的标志，即`npm install express@latest`

* * *

正如用户*Vespakoen*在被拒绝的编辑中指出的那样，也可以通过这种方式一次更新多个包：

```
npm install --save package-nave@* other-package@* whatever-thing@* 
```

他还为基于`npm outdated`. 请参阅[编辑](https://stackoverflow.com/review/suggested-edits/12171909)以获取代码和解释。

* * *

PS：我也讨厌必须手动编辑`package.json`这样的东西；）

* * *

## 回答 #5

> 赞同：134
> 
> 时间：2017-03-27T20:00:30.770

如果您碰巧使用[Visual Studio Code](https://code.visualstudio.com/)作为您的 IDE，这是一个有趣的小扩展，可以让更新`package.json`一键式过程。

## **[版本镜头](https://marketplace.visualstudio.com/items?itemName=pflannery.vscode-versionlens)**

[![在此处输入图像描述](https://i.stack.imgur.com/NxI5v.gif)](https://i.stack.imgur.com/NxI5v.gif)

[GitLab 回购](https://gitlab.com/versionlens/vscode-versionlens)

* * *

## 回答 #6

> 赞同：69
> 
> 时间：2014-01-21T22:35:57.067

这适用于 npm 1.3.15。

```
"dependencies": {
  "foo": "latest"
} 
```

* * *

## 回答 #7

> 赞同：64
> 
> 时间：2015-01-23T03:45:26.570

1.  Use `*` as the version for the latest releases, including unstable
2.  Use `latest` as version definition for the latest stable version
3.  Modify the package.json with exactly the latest stable version number using [`LatestStablePackages`](https://github.com/mrsunlin/LatestStablePackages)

Here is an example:

```
"dependencies": {
        "express": "latest"  // using the latest STABLE version
    ,   "node-gyp": "latest"    
    ,   "jade": "latest"
    ,   "mongoose": "*" // using the newest version, may involve the unstable releases
    ,   "cookie-parser": "latest"
    ,   "express-session": "latest"
    ,   "body-parser": "latest"
    ,   "nodemailer":"latest"
    ,   "validator": "latest"
    ,   "bcrypt": "latest"
    ,   "formidable": "latest"
    ,   "path": "latest"
    ,   "fs-extra": "latest"
    ,   "moment": "latest"
    ,   "express-device": "latest"
}, 
```

* * *

## 回答 #8

> 赞同：51
> 
> 时间：2017-12-07T07:01:18.667

要查看哪些软件包有较新的版本可用，请使用以下命令：

```
npm outdated 
```

要仅更新**一个**依赖项，只需使用以下命令：

```
npm install yourPackage@latest 
```

例如：

我的`package.json`文件具有依赖性：

```
"@progress/kendo-angular-dateinputs": "^1.3.1", 
```

那么我应该写：

```
npm install @progress/kendo-angular-dateinputs@latest 
```

*是什么`--save-dev`意思？*

```
npm install @progress/kendo-angular-dateinputs@latest --save-dev 
```

[正如 npm install docs 所说：](https://docs.npmjs.com/cli/v7/commands/npm-install)

> -D, --save-dev：包会出现在你的devDependencies中。

* * *

## 回答 #9

> 赞同：47
> 
> 时间：2015-02-11T23:37:53.260

我发现上面最好的答案的唯一警告是它将模块更新到最新版本。这意味着它可以更新为不稳定的 alpha 版本。

我会使用那个 npm-check-updates 实用程序。我的小组使用了这个工具，它通过安装稳定的更新有效地工作。

正如 Etienne 上面所说：安装和运行这个：

```
$ npm install -g npm-check-updates
$ npm-check-updates -u
$ npm install 
```

* * *

## 回答 #10

> 赞同：42
> 
> 时间：2017-08-22T20:08:27.347

我真的很喜欢[npm-upgrade 的](https://www.npmjs.com/package/npm-upgrade)工作方式。它是一个简单的命令行实用程序，它遍历所有依赖项，让您查看当前版本与最新版本的比较，并根据需要进行更新。

`npm-upgrade`这是在项目的根目录（文件旁边）运行后发生的屏幕截图`package.json`：

[![npm 升级示例](https://i.stack.imgur.com/qiwIs.png)](https://i.stack.imgur.com/qiwIs.png)

对于每个依赖项，您可以选择升级、忽略、查看更改日志或完成该过程。到目前为止，它对我来说效果很好。

编辑：要清楚这是一个第三方包，需要在命令生效之前安装。它不附带 npm 本身：

```
npm install -g npm-upgrade 
```

然后从具有 package.json 文件的项目的根目录：

```
npm-upgrade 
```

* * *

## 回答 #11

> 赞同：25
> 
> 时间：2016-03-04T15:21:20.107

这是一个匹配语义版本号的基本正则表达式，因此您可以用星号快速替换它们。

### 语义版本正则表达式

```
([>|<|=|~|^|\s])*?(\d+\.)?(\d+\.)?(\*|\d+) 
```

### 如何使用

在 JSON 文件中选择要替换的包版本。

[![截图：选择要替换的文本](https://i.stack.imgur.com/YgEOd.png)](https://i.stack.imgur.com/YgEOd.png)

输入上面的正则表达式并验证它是否匹配正确的文本。

[![截图：输入上面的 semver 正则表达式](https://i.stack.imgur.com/N00l2.png)](https://i.stack.imgur.com/N00l2.png)

用星号替换所有匹配项。

[![截图：用星号替换软件包版本](https://i.stack.imgur.com/gfy2d.png)](https://i.stack.imgur.com/gfy2d.png)

跑`npm update --save`

* * *

## 回答 #12

> 赞同：21
> 
> 时间：2018-11-27T06:04:06.510

如果您想通过漂亮的（终端）交互式报告界面使用温和的方法，我建议使用[npm-check](https://github.com/dylang/npm-check)。

它不像一把锤子，让您对依赖更新有更多的相关知识和控制权。

为了让您了解等待这里的内容，这里有一个屏幕截图（从 npm-check 的 git 页面中抓取）：

[![在此处输入图像描述](https://i.stack.imgur.com/qZTKn.png)](https://i.stack.imgur.com/qZTKn.png)

* * *

## 回答 #13

> 赞同：20
> 
> 时间：2017-06-01T05:34:43.873

此功能已在`npm v5`. `npm install -g npm@latest`使用和更新到 npm

更新`package.json`

1.  删除`/node_modules`和`package-lock.json (if you have any)`

2.  运行`npm update`。这将根据[semver](https://docs.npmjs.com/misc/semver)将依赖项 package.json 更新到最新版本。

更新到最新版本。你可以去`npm-check-updates`

* * *

## 回答 #14

> 赞同：18
> 
> 时间：2014-04-28T19:14:44.033

我最近不得不更新几个使用 npm 和 package.json 来实现 gruntfile.js 魔法的项目。以下 bash 命令（多行命令）对我来说效果很好：

```
npm outdated --json --depth=0 | \
jq --ascii-output --monochrome-output '. | keys | .[]' | \
xargs npm install $1 --save-dev 
```

这里的想法：要将`npm outdated`输出作为 json 进行管道传输，到`jq`
（jq 是一个 json 命令行解析器/查询工具）
（注意`--depth`参数的使用`npm outdated`）
jq 会将输出剥离到仅顶级包名称。
最后 xargs 将每个 LIBRARYNAME 一次一个地放入`npm install LIBRARYNAME --save-dev`命令中

以上是在运行的机器上对我有用的： node=v0.11.10 osx=10.9.2 npm=1.3.24

这需要：
xargs [http://en.wikipedia.org/wiki/Xargs](http://en.wikipedia.org/wiki/Xargs)（我相信我的机器原生）
和
jq [http://stedolan.github.io/jq/](http://stedolan.github.io/jq/)（我安装它`brew install jq`）

注意：我只使用 将更新的库保存到 json 键内的 package.json `devDependancies`，`--save-dev`这是我的项目的要求，很可能不是你的。

之后我用一个简单的方法检查所有东西都是肉汁

```
npm outdated --depth=0 
```

此外，您可以检查当前顶级安装的库版本

```
npm list --depth=0 
```

* * *

## 回答 #15

> 赞同：18
> 
> 时间：2019-02-01T20:06:59.883

从 npm 版本 5.2.0 开始，有一种方法可以在一行中运行它，而无需在全局 npm 注册表或本地应用程序中安装任何额外的包。这可以通过利用`npx`与 npm 捆绑在一起的新实用程序来完成。（[点击这里了解更多。](https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b)）

在项目的根目录中运行以下命令：

```
npx npm-check-updates -u && npm i 
```

* * *

## 回答 #16

> 赞同：17
> 
> 时间：2018-04-17T13:14:24.043

如果您使用 yarn，以下命令会将所有包更新到最新版本：

`yarn upgrade --latest`

从他们的[文档中](https://yarnpkg.com/lang/en/docs/cli/upgrade/#toc-yarn-upgrade-package-latest-l-caret-tilde-exact-pattern)：

> 该`upgrade --latest`命令升级包与升级命令相同，但忽略 package.json 中指定的版本范围。相反，将使用由 latest 标签指定的版本（可能跨主要版本升级包）。

* * *

## 回答 #17

> 赞同：16
> 
> 时间：2017-04-17T14:16:30.400

我用它`npm-check`来实现这一点。

```
npm i -g npm npm-check
npm-check -ug #to update globals
npm-check -u #to update locals 
```

[![在此处输入图像描述](https://i.stack.imgur.com/QSI4Z.png)](https://i.stack.imgur.com/QSI4Z.png)

另一个有用的命令列表，它将保留准确的版本号`package.json`

```
npm cache clean
rm -rf node_modules/
npm i -g npm npm-check-updates
ncu -g #update globals
ncu -ua #update locals
npm i 
```

* * *

## 回答 #18

> 赞同：12
> 
> 时间：2016-05-27T22:24:01.040

更新！

> 基于 npm outdated，updtr 安装最新版本并为每个依赖项运行 npm test。如果测试成功，updtr 会将新版本号保存到您的 package.json。但是，如果测试失败，updtr 将回滚其更改。

[https://github.com/peerigon/updtr](https://github.com/peerigon/updtr)

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2017-06-13T10:00:29.320

如果您正在使用`yarn`,[`yarn upgrade-interactive`](https://yarnpkg.com/lang/en/docs/cli/upgrade-interactive/)是一个非常时尚的工具，可以让您查看过时的依赖项，然后选择要更新的依赖项。

更多使用 Yarn 的理由`npm`。呵呵。

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2017-11-01T13:02:35.993

我必须用来更新`package.json`的命令`NPM 3.10.10`：

```
npm install -g npm-check-updates
ncu -a
npm install 
```

背景：

我正在使用来自@josh3736 的最新命令，但我`package.json`没有更新。然后我在运行时注意到了描述文本`npm-check-updates -u`：

> 其声明的版本范围满足以下依赖关系，但安装的版本落后。您可以使用 npm update 安装最新版本，而无需修改包文件。如果您仍然想更新包文件中的依赖项，请运行 ncu -a。

阅读 npm-check-updates 的文档，您可以看到不同之处：

[https://www.npmjs.com/package/npm-check-updates](https://www.npmjs.com/package/npm-check-updates)

> -u, --upgrade：覆盖包文件
> 
> -a, --upgradeAll：甚至包括那些最新版本满足声明的semver依赖的依赖

`npm-check-updates`ncu 是键入时在消息中看到的别名`npm-check-updates -u`：

```
[INFO]: You can also use ncu as an alias 
```

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2020-10-30T08:09:40.327

**安全更新**

1.  使用“npm outdated”来发现过期的依赖项。

2.  使用“npm update”来执行安全的依赖升级。

3.  使用 'npm install @latest' 升级到软件包的最新主要版本。

**重大更新**

1.  使用“npx npm-check-updates -u”。

2.  'npm install' 将所有依赖项升级到最新的主要版本。

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2019-06-23T11:35:53.940

如果你不想安装全局[npm-check-updates](https://www.npmjs.com/package/npm-check-updates)你可以简单地运行：

```
node -e "const pk = JSON.parse(require('fs').readFileSync('package.json', 'utf-8'));require('child_process').spawn('npm', ['install', ...Object.keys(Object.assign({},pk.dependencies, pk.devDependencies)).map(a=>a+'@latest')]).stdout.on('data', d=>console.log(d.toString()))" 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2014-11-02T16:43:23.000

上述命令是不安全的，因为您可能会在切换版本时破坏您的模块。相反，我推荐以下

*   `npm shrinkwrap`使用命令将实际的当前节点模块版本设置为 package.json 。
*   如果它没有破坏您的测试，请使用[https://github.com/bahmutov/next-update](https://github.com/bahmutov/next-update)命令行工具将每个依赖项更新到最新版本

```
npm install -g 下次更新
// 从你的包中
下次更新

```

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2019-04-27T10:33:21.993

我为最新版本的 NPM 找到了另一个解决方案。我想要做的是用明确的最新版本号替换所有“*”依赖项。所讨论的方法都不适合我。

我做了什么：

1.  **将所有“*”替换为“^0.0.0”**
2.  跑`npm-check-updates -u`

package.json 中的所有内容现在都更新到了最新版本。

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2020-09-28T00:10:50.710

如果您正在寻找不涉及安装 npm 包的更简单的解决方案，我会查看[updatepackagejson.com](https://updatepackagejson.com)

[![updatepackagejson.com](https://i.stack.imgur.com/vJyHL.png)](https://i.stack.imgur.com/vJyHL.png)

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2017-08-04T11:48:43.460

如果您使用 npm 5 和节点 8，请尝试以下命令

npm 更新--保存

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2018-02-25T23:15:54.417

以下代码（已被接受）给我写了“它需要太长时间等等”之类的东西，但什么也没做。可能使用全局标志是问题，idk。

```
npm i -g npm-check-updates
ncu -u
npm install 
```

我决定使用我的文本编辑器并遵循半手动方法。

我从我的开发依赖项复制了一个这样的列表（只是更长的时间）`package.json`到记事本++文本编辑器：

```
"browserify": "10.2.6",
"expect.js": "^0.3.1",
"karma": "^0.13.22",
"karma-browserify": "^5.2.0", 
```

我将搜索模式设置为正则表达式，使用`^\s*"([^"]+)".*$`模式获取包名并将其替换为`npm uninstall \1 --save-dev \nnpm install \1 --save-dev`. 点击“全部替换”。输出是这样的：

```
npm uninstall browserify --save-dev 
npm install browserify --save-dev
npm uninstall expect.js --save-dev 
npm install expect.js --save-dev
npm uninstall karma --save-dev 
npm install karma --save-dev
npm uninstall karma-browserify --save-dev 
npm install karma-browserify --save-dev 
```

我将它复制回 bash 并按回车键。一切都升级了，工作正常。就这样。

```
"browserify": "^16.1.0",
"expect.js": "^0.3.1",
"karma": "^2.0.0",
"karma-browserify": "^5.2.0", 
```

我认为这没什么大不了的，因为您只需要时不时地这样做，但是您可以轻松编写一个脚本来解析`package.json`和升级您的软件包。我认为这种方式更好，因为如果你需要一些特殊的东西，你可以编辑你的列表，例如保留当前版本的 lib。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2018-05-22T14:17:11.140

我通过查看[https://github.com/tjunnone/npm-check-updates的说明解决了这个问题](https://github.com/tjunnone/npm-check-updates)

```
$ npm install -g npm-check-updates
$ ncu
$ ncu -u # to update all the dependencies to latest
$ ncu -u "specific module name"  #in case you want to update specific dependencies to latest 
```

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2014-04-12T16:40:08.387

替代方案是

```
"dependencies":{
    "foo" : ">=1.4.5"
} 
```

每次使用 npm update 时，它​​都会自动更新到最新版本。有关更多版本语法，您可以在这里查看：[https ://www.npmjs.org/doc/misc/semver.html](https://www.npmjs.org/doc/misc/semver.html)

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2016-04-27T14:29:49.353

**无需额外软件包的解决方案**

将每个依赖项的版本更改为`*`：

```
"dependencies": {
    "react": "*",
    "react-google-maps": "*"
  } 
```

然后运行`npm update --save`。

您的一些软件包已更新，但有些没有？

```
"dependencies": {
    "react": "^15.0.1",
    "react-google-maps": "*"
  } 
```

这是棘手的部分，这意味着您本地版本的“react”低于最新版本。在这种情况下，npm 下载并更新了“react”包。但是，您本地版本的“react-google-maps”与最新版本相同。

如果您仍想“更新”不变`*`，则必须从`node_modules`文件夹中删除这些模块。

例如删除`node_modules/react-google-maps`。

终于又跑了`npm update --save`。

```
"dependencies": {
    "react": "^15.0.1",
    "react-google-maps": "^4.10.1"
  } 
```

`npm update --save-dev`如果要更新开发依赖项，请不要忘记运行 。

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2017-01-08T23:22:08.280

如果您使用的是 Github，则为 Greenkeeper。[https://greenkeeper.io/](https://greenkeeper.io/)

这是一个 Github 集成，设置起来非常容易。安装后，它会自动在您指定的存储库（或所有如果需要）中创建拉取请求，并使您的代码始终保持最新，而无需您手动执行任何操作。然后 PR 应该在 CI 服务上触发构建，根据检查成功或失败，您可以继续找出触发问题的原因或 CI 何时通过，只需合并 PR。

[![绿卫PR 1](https://i.stack.imgur.com/8Bez5.png)](https://i.stack.imgur.com/8Bez5.png) [![绿色守护者 PR 2](https://i.stack.imgur.com/404IN.png)](https://i.stack.imgur.com/404IN.png)

在底部，您可以看到第一次构建首先失败，并且在提交（“升级到节点 v6.9”）之后测试通过，所以我最终可以合并 PR。还带有很多表情符号。

另一种选择是[https://dependencyci.com/](https://dependencyci.com/)，但是我没有对其进行深入测试。乍看之下，Greenkeeper 在 IMO 总体上看起来更好，并且具有更好的集成性。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2019-02-17T19:46:32.937

使用 NPM 脚本可以自动更新：

```
{
    "_cmd-update-modules": "npm run devops-update-modules",
    "scripts": {
        "create-global-node-modules-folder": "if not exist \"%appdata%\\npm\\node_modules\" mkdir %appdata%\\npm\\node_modules",
        "npm-i-g": "npm i npm@latest -g",
        "npm-check-i-g": "npm i npm-check@latest -g",
        "eslint-i-g": "npm i eslint@latest -g",
        "npm-check-u-l": "npm-check \"C:\\Program Files\\nodejs\\node_modules\\npm\" -y",
        "npm-check-u-g": "npm-check \"C:\\Program Files\\nodejs\\node_modules\\npm\" -y -g",
        "npm-deep-update-l": "npm update --depth 9999 --dev",
        "npm-deep-update-g": "npm update --depth 9999 --dev -g",
        "npm-cache-clear": "npm cache clear --force",
        "devops-update-modules": "npm run create-global-node-modules-folder && npm run npm-i-g && npm run npm-check-i-g && npm run eslint-i-g && npm run npm-check-u-l && npm run npm-check-u-g && npm run npm-deep-update-l && npm run npm-deep-update-g && npm run npm-cache-clear"
    }
} 
```

有关更多详细信息和分步手册：[https ://stackoverflow.com/a/34295664](https://stackoverflow.com/a/34295664)

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2017-01-15T21:27:38.873

*   npm 已过时
*   npm 更新

应该为您提供与您的应用程序兼容的最新想要的版本。但不是最新版本。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2019-04-29T15:23:26.127

The very easiest way to do this as of today is use pnpm rather than npm and simply type:

`pnpm update --latest`

[https://github.com/pnpm/pnpm/releases/tag/v3.2.0](https://github.com/pnpm/pnpm/releases/tag/v3.2.0)

# java - 如何将自定义类创建为子例程

> ID：16073604
> 
> 赞同：0
> 
> 时间：2013-04-18T02:39:24.233
> 
> 标签：java, android

我可能混淆了我的术语，但我正在创建一个 android 应用程序，并且我想封装一些常规功能。例如我的actionBar。起初，我的所有活动都有代码，如果我更改一件事，我必须在其他地方更改它。我想创建一个 NavigationActionBarManager.java 文件来处理初始设置、onNavigationListener、setListNavigationCallbacks 等。

这是到目前为止的课程：

```
import android.app.ActionBar;
import android.app.ActionBar.OnNavigationListener;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.SpinnerAdapter;

public class NavigationActionBarManager extends Activity {

    public ActionBar actionBar = getActionBar();    // actionbar object

    // METHOD: display
    public void display() {
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    }

    // METHOD: inflate
    public void inflate(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_adventurers_new, menu);
    }

    // METHOD: listen
    public void listen() {
        SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.array_character_views, android.R.layout.simple_spinner_dropdown_item);

        OnNavigationListener mOnNavigationListener = new OnNavigationListener() {
            //String[] strings = getResources().getStringArray(R.array.array_character_views);

            @Override
            public boolean onNavigationItemSelected(int position, long itemId) {
                Intent nextScreen = null;
                switch(position) {
                case 0:
                    break;
                case 1:
                    nextScreen = new Intent(getApplicationContext(), AdventurersNewAbilitiesActivity.class);
                    break;
                case 2:
                    break;
                }

                if(nextScreen != null) {
                    startActivity(nextScreen);
                }

                return false;
            }
        };

        actionBar.setListNavigationCallbacks(mSpinnerAdapter, mOnNavigationListener);
    }

} 
```

回到我的活动课，我想这样应用它：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_adventurer_new_character);

    navBar.display();
    navBar.listen();

} 
```

我遇到了一个错误，我不明白 LogCat 的输出。这是 LogCat 输出：

```
04-17 23:12:01.110: E/AndroidRuntime(14013): FATAL EXCEPTION: main
04-17 23:12:01.110: E/AndroidRuntime(14013): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.app/com.app.AdventurersNewCharacterActivity}: java.lang.NullPointerException
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1903)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2004)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.os.Looper.loop(Looper.java:137)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread.main(ActivityThread.java:4580)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at dalvik.system.NativeStart.main(Native Method)
04-17 23:12:01.110: E/AndroidRuntime(14013): Caused by: java.lang.NullPointerException
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.Activity.initActionBar(Activity.java:2071)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.Activity.getActionBar(Activity.java:2058)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at com.app.NavigationActionBarManager.<init>(NavigationActionBarManager.java:13)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at com.app.AdventurersNewCharacterActivity.<init>(AdventurersNewCharacterActivity.java:13)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at java.lang.Class.newInstanceImpl(Native Method)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at java.lang.Class.newInstance(Class.java:1319)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.Instrumentation.newActivity(Instrumentation.java:1025)
04-17 23:12:01.110: E/AndroidRuntime(14013):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)
04-17 23:12:01.110: E/AndroidRuntime(14013):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:46:43.557

您是否`onCreateOptionsMenu()`在活动中实施了该方法？

文档位于[https://developer.android.com/guide/topics/ui/actionbar.html](https://developer.android.com/guide/topics/ui/actionbar.html)

# mysql - 添加主键作为 INSERT INTO 表 VALUES 查询的一部分

> ID：16073605
> 
> 赞同：0
> 
> 时间：2013-04-18T02:39:43.830
> 
> 标签：mysql, mysqli

仅用于演示目的。我有两个表“测验”和“问题”。

**测验表**包含以下列

*   quiz_id (PK)

*   测验标题

**问题表**包含以下列

*   question_id (PK)
*   quiz_ID (FK)
*   问题文本

我正在尝试将问题文本插入问题表中的“question_text”。

我可以成功检索到最新的 quiz_id 并将其插入问题表中。

`INSERT INTO question (quiz_id) SELECT max(quiz_id) FROM quiz` 

但我还需要添加问题文本。我试过这个：

`INSERT INTO question (question_text) VALUES ("question_text_sample")`

但我收到一个错误，因为查询中未提供 FK 信息（quiz_id）。

我想结合上面的查询，但我想不出一个可行的解决方案。

我尝试了以下方法：

`INSERT INTO quiz (quiz_title) values ("quiz_title_sample") INSERT INTO question (quiz_id, question_text) VALUES (LAST_INSERT_ID(), "question_text")`

另一个尝试：

`INSERT INTO question (quiz_id, question_text) VALUES (SELECT max(quiz_id) FROM quiz , "question_text_sample")`

谁能给我一些指示？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:45:37.327

你很近，应该是这样

```
INSERT INTO question (quiz_id, question_text) SELECT max(quiz_id), "question_text_sample" FROM quiz 
```

更多关于`INSERT`语法：**[http ://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:46:57.217

您肯定需要先插入测验（因为 FK 关系，正如您所指出的）。

您不能将 LAST_INSERT_ID() 存储在用户变量中，然后执行 INSERT INTO...SELECT （抱歉，对 MySQL 不熟悉）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:47:28.313

您的 quiz_id 是 AUTO_INCREMENT ( [http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html) ) 吗？

插入测验（quiz_title）值（'quiz_title_sample'）

插入问题（quiz_id，question_text）值（LAST_INSERT_ID（），'问题文本'）

# c - 从 BST 返回当前节点

> ID：16073608
> 
> 赞同：0
> 
> 时间：2013-04-18T02:39:57.227
> 
> 标签：c, binary-search-tree, tree-traversal

您好，我遇到了一个似乎无法解决的问题。我有一个 BST，我正在遍历并检查排名。我有一个方法`checkRank(link head, targRank)` ，它接收头节点并遍历树，直到找到与 targRank 具有相同等级的节点。我想要做的是让 checkRank 函数返回它找到相同等级的当前节点。实现这一目标的最佳方法是什么，因为我所有的尝试似乎都将当前节点作为头部返回？

```
typedef struct node* link;

struct node 
{
    Item item;  // Data for this node
    link l, r;  // left & right links
    int rank;
}; 
```

函数调用：

```
link head;
checkRank(head, 13); 
```

功能：

```
link checkRank(link h,int targetRank)
{
    if (h != NULL)
    {
        if (h->rank < targRank)
        {
            checkRank(h->r, targRank);
        }

    if (h->rank > tarRank)
        {
            checkRank(h->l, targtRank);
        }

        if (h->rank == targRank)
        {
            return ??;
        }
    }
    else
    {
        printf("Equiv rank could not be found\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:50:06.760

首先，你需要`return`沿着每条路径做一些事情。您是否考虑过以下问题：

```
link check_rank(link h, int target) {
  if (h == NULL) {
    printf("equivalent rank could not be found\n");
    return NULL;
  }
  if (h->rank < target)
    return check_rank(h->r, target);
  if (h->rank > target)
    return check_rank(h->l, target);
  return h;
} 
```

函数必须始终返回一个值，并且许多递归函数将遵循以下模式：（1）在满足适当条件时返回哨兵以停止递归，或（2）递归并返回递归调用返回的任何内容。

# php - 通过更改 Mime 类型减少 Akamai 命中次数

> ID：16073609
> 
> 赞同：0
> 
> 时间：2013-04-18T02:39:59.837
> 
> 标签：php, magento, nginx, mime-types, akamai

我们目前正在努力减少 Akamai 记录的点击次数。外部承包商给出的建议之一是更改 html 页面的 mime 类型。

`Every instance of text/html on a web page generates a page view in Akamai`

建议的解决方案是`Remove or replace the mime type from text/html to text/JSON or other mime type.`

问题是，如果我让 php 应用程序将 mime 类型设置为**text/json**或[RFC](http://www.ietf.org/rfc/rfc4627.txt) rectified * application/json* 大多数浏览器将页面解释为文本文件，并且它们的引擎不会呈现 html。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T08:46:14.277

你的帖子很模糊。

通过减少命中，您的意思是减少对来源的命中，例如改进缓存？

或者你的意思是......在 Luna 控制面板中记录的点击？

无论哪种方式，更改 mime 类型都不会减少点击次数。

# iphone - EXC_BAD_ACCESS（代码=2，地址=0x3）

> ID：16073611
> 
> 赞同：0
> 
> 时间：2013-04-18T02:40:09.707
> 
> 标签：iphone, ios, objective-c

嗨，我从这段代码中收到以下错误：

```
EXC_BAD_ACCESS (code=2, address=0x3) 
```

当我按下播放时，我基本上是循环回 CFRetain。

我无法弄清楚这有什么问题。

XCode 专门指向这一行：

```
[NSDictionary dictionaryWithObjectsAndKeys:[self getCorrectName:oldController], @"ViewController", sec, @"duration", nil]; 
```

我检查了字典的两个值，它们似乎都检查出来了。

![在此处输入图像描述](https://i.stack.imgur.com/DqFIn.png)

```
- (NSString *)getCorrectName:(UIViewController *)viewController {
    if (viewController.class == [UINavigationController class]) {
        UIViewController *vc = [viewController.childViewControllers objectAtIndex:0];
        return NSStringFromClass(vc.class);
    } else {
        return NSStringFromClass(viewController.class);
    }
}

# pragma mark - UITabBarControllerDelegate

- (BOOL)tabBarController:(UITabBarController *)tbController shouldSelectViewController:(UIViewController *)viewController {
    // Tracking which controller will be clicked
    [[Mixpanel sharedInstance] track:@"tab_clicked"
                          properties:[NSDictionary dictionaryWithObjectsAndKeys:
                                      [self getCorrectName:viewController], @"ViewController", nil]];

    // Tracking how long was spent on the last controller
    UIViewController *oldController = [self.childViewControllers objectAtIndex:self.selectedIndex];
    if (viewController != oldController) {
        NSTimeInterval secondsBetween = [self.start timeIntervalSinceNow];
        NSInteger sec = -1 * (secondsBetween + 0.5);          // round up and down
        if (sec > 0) {
            NSLog(@"Changing controllers from %@, %d seconds", [self getCorrectName:oldController], sec);
            [NSDictionary dictionaryWithObjectsAndKeys:[self getCorrectName:oldController], @"ViewController", sec, @"duration", nil];
            /*
            [[Mixpanel sharedInstance] track:@"tab_viewed"
                                  properties:[NSDictionary dictionaryWithObjectsAndKeys:
                                              [self getCorrectName:oldController], @"ViewController", sec, @"duration",
                                              nil]];
             */
            self.start = [NSDate date];
        }
    }
    return YES;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:39:36.610

NSInteger 不是一个类。

使用 NSNumber

# c# - 哪个执行第一个后面的代码或查看模型

> ID：16073614
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:40:19.630
> 
> 标签：c#, wpf, xaml, mvvm, conceptual

根据我之前的问题[Accessing variables from XAML and object from ViewModel using Code Behind](https://stackoverflow.com/questions/16007054/accessing-variables-from-xaml-and-object-from-viewmodel-using-code-behind/16009306?noredirect=1#comment22915673_16009306)：我怎么知道哪个先执行？

是背后的代码还是 ViewModel？
我只想确保我的代码在 ViewModel 之前执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:01:29.363

View 和 ViewModel 都是被实例化的常规类。这是通过像在任何其他类中一样调用构造函数来完成的。因此，作为对您问题的简单回答：在每个构造函数中设置一个断点，然后查看哪个构造函数首先被命中。

您的问题没有通用答案，因为它取决于您的架构和用例。通常，某些控件绑定到其父视图模型的属性，该属性会在某些时候发生变化。那时，您的 View 已经存在，并且您不知道该属性设置的值已经存在多长时间。在其他情况下，您的 View 是为特定的 ViewModel 创建的，并将其作为构造函数参数。

确保 ViewModel 在 View 之前存在的一种方法是将 ViewModel 作为构造函数参数传递。构造函数参数背后的想法是表达：“此类需要创建 xy 类型的现有实例”，这就是您所要求的。但是，由于您将`DataContext`在构造函数中将其设置为 View，并且`DataContext`在创建 View 后可以更改，因此您无法确定 View 在创建后不会获得分配的新 ViewModel。更糟糕的是，您将无法再在 XAML 中使用您的控件，因为它不再具有默认构造函数。

根据您的第一个问题，尚不清楚为什么 ViewModel 应该在 View 之前存在。如果您需要从 View 中读取资源值并将其分配给 ViewModel 上的属性，我希望它会反过来吗？或者您是否正在访问 ViewModel 中的视图（不要！）？

问题是，为什么你必须首先问这个问题。您（或您的老板......）的概念有一些非常错误的地方：View 和 ViewModel 是两个实体，它们应该在不知道彼此的情况下真正工作。这个想法是构建可以在没有单个视图的情况下完美运行的应用程序，只需在 ViewModels 上获取/设置值，并让 Views 可以在没有 ViewModels 的情况下完美地编译任何运行，而无需显示或做任何事情......如果你尝试要破解这种方法，最好不要使用 MVVM。

# php - Facebook manage_groups 权限

> ID：16073616
> 
> 赞同：1
> 
> 时间：2013-04-18T02:40:38.697
> 
> 标签：php, api, permissions, facebook-opengraph

通过 OpenGraph API 管理 Facebook 群组的能力是否有任何更新。我正在尝试使用 API 从我的组中删除成员，但我需要 manage_groups 权限。

每当我尝试添加它时，我都会收到一个 API 错误，指出它无法识别它。

有没有人成功地让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T08:45:22.733

尝试使用权限“user_groups”并自动授予 manage_groups 权限

user_groups 检索会话用户所属的任何组的权限。user_managed_groups 权限可用于读取用户为管理员的组的组内容。如果应用还被授予了 publish_actions 权限，此权限还允许应用以用户身份在组中发帖。

[https://developers.facebook.com/docs/graph-api/reference/v2.3/group](https://developers.facebook.com/docs/graph-api/reference/v2.3/group)

坏消息是，facebook 会要求您提交评论，并且几乎不允许任何平台获得该权限。我用 PHP 制作了一个网络应用程序，当我发送评论时，他们拒绝了该权限，并给出了以下答案：

user_groups 权限仅授予在 Facebook 尚不可用的平台上构建 Facebook 品牌客户端的应用程序。例如，Android 和 iOS 应用程序不会获得此权限。此外，Web、桌面、车载和电视应用程序不会被授予此权限。

# ruby-on-rails - 如何在 Rails 中访问嵌套参数

> ID：16073617
> 
> 赞同：0
> 
> 时间：2013-04-18T02:40:41.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parameters

在控制器中，我试图访问一个深度嵌套的参数。这是我的参数跟踪。

`Parameters:`

```
{"utf8"=>"✓",
 "authenticity_token"=>"2j+Nh5C7jPkNOsQnWoA0wtG/vWxLMpyKt6aiC2UmxgY=",
 "inventory"=>{"ingredients_attributes"=>{"0"=>{"ingredient_name"=>"Bread"}},
 "purchase_date"=>"11",
 "purchase_price"=>"11",
 "quantity_bought"=>"11"},
 "commit"=>"Create Inventory"} 
```

我正在尝试从中检索“面包”。我尝试了`params[:inventory][:ingredient][:ingredient_name]`其他变体。什么是正确的语法？

如果重要的话，

`Inventory has_many :ingredients`
`Inventory accepts_nested_attributes_for :inventories`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:02:29.230

直接访问值“面包”实际上是：

```
params[:inventory][:ingredients_attributes]["0"][:ingredient_name] 
```

我敢打赌你不想那样做。

使用`accepts_nested_attributes_for`该哈希结构（也假设成分属性设置正确），您可以在库存实例上设置参数，并且值“面包”将设置为关联中成分对象之一的成分名称属性：

```
@inventory = Inventory.new(params[:inventory]) 
# or @inventory.attributes = params[:inventory] for an existing 
# inventory instance

ingredient = @inventory.ingredients.first
ingredient.ingredient_name
# => "Bread" 
```

# haskell - 如何使用createTransport？

> ID：16073623
> 
> 赞同：5
> 
> 时间：2013-04-18T02:41:46.773
> 
> 标签：haskell

我目前正在关注[Cloud-Haskell 教程](http://haskell-distributed.github.io/tutorials/tutorial2.html)并停留在`createTransport`. 在我看来，我只能在 127.0.0.1 为服务器打开传输，而无法为客户端打开连接到服务器的传输。我尝试使用两台机器`curl ifconfig.me`来获取我的 IP 地址，但是，`createTransport`它不会为我创建传输。有任何想法吗？

编辑：本地现在正在工作。

我的程序和教程一模一样，尝试在两台机器之间进行连接：

`curl ifconfig.me`返回`101.119.27.24`

服务器命令行：

```
ServerClientServer 101.119.27.24 9000 
```

返回错误：

```
bind: unsupported operation (Cannot assign rerquested address) 
```

编辑：服务器代码如下：

```
main :: IO ()
main = do
  [host, port]    <- getArgs
  serverDone      <- newEmptyMVar
  Right transport <- createTransport host port 
  Right endpoint  <- newEndPoint transport
  forkIO $ echoServer endpoint serverDone 
  putStrLn $ "Echo server started at " ++ show (address endpoint)
  readMVar serverDone `onCtrlC` closeTransport transport 
```

和函数在另一个模块中定义`echoServer`。`onCtrlC`

我`Right transport <- createTransport host port`改成

```
t <- createTransport host port defaultTCPParameters
let transport = case t of
  (Right t) -> t
  (Left e)  -> error $ show e 
```

这样我就可以看到错误消息是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-19T19:34:12.727

基于评论的社区维基回答：

您位于 NAT 设备（例如宽带路由器）后面，并且相关地址属于该设备，而不是您的计算机。你不能绑定到它。

尝试`ifconfig`命令（`ipconfig`在 Windows 上）。您将获得本地网络上的地址，或多个网络（例如有线和无线）上的多个地址。如果您有一个连接到宽带路由器的典型家庭网络，则这些地址将在您的家庭网络中可见，但在 Internet 中不可见。为了使您的服务器可以从外部访问，您需要在路由器中配置一个“洞”。这是所有基本的网络东西，如果你想做任何“多云”的事情，你必须学习它。

# android - 如何使用嵌套的 ViewFlipper 正确扩展布局？

> ID：16073624
> 
> 赞同：4
> 
> 时间：2013-04-18T02:42:13.463
> 
> 标签：android, android-linearlayout, viewflipper, findviewbyid

我曾经有一个简单的 main.xml 布局，只有 2 个视图通过 ViewFlipper 包装器翻转。它工作（仍然工作）很好，使用以下代码：

```
setContentView(R.layout.main);
mTV1 = (TextView) findViewById(R.id.textview01);
mTV2 = (TextView) findViewById(R.id.textview02);
mViewFlipper = (ViewFlipper)findViewById(R.id.flipper01); 
```

[我现在想在原始视图上添加 2 个按钮，方式](https://stackoverflow.com/a/6334526/1088880)类似于：

```
<LinearLayout
 android:id="@+id/linearLayout01" 
 android:layout_width="fill_parent" 
 android:layout_height="fill_parent" 
 android:orientation="vertical" 
 xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
 android:id="@+id/linearLayout02" 
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content">
    <Button android:id="@+id/button01" android:layout_height="wrap_content" android:text="Button 1" android:layout_width="0dip" android:layout_weight="1"></Button>
    <Button android:id="@+id/button02" android:layout_height="wrap_content" android:text="Button 2" android:layout_width="0dip" android:layout_weight="1"></Button>
</LinearLayout>

<RelativeLayout
 android:id="@+id/relativeLayout01" 
 android:layout_width="fill_parent" 
 android:layout_height="0dp"
 android:layout_weight="1">
    <ViewFlipper
        android:id="@+id/flipper01"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <TextView
        android:id="@+id/textview01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text"
        />  
        <TextView
        android:id="@+id/textview02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text2"
        />  

    </ViewFlipper>
    </RelativeLayout>
</LinearLayout> 
```

我的问题是我通过为复合布局插入 findViewById 直观地修改了原始代码：

```
setContentView(R.layout.main);
mCompositeLayout = (LinearLayout) findViewById(R.id.linearLayout02);
mTV1 = (TextView) findViewById(R.id.textview01);
mTV2 = (TextView) findViewById(R.id.textview02);
mViewFlipper = (ViewFlipper)findViewById(R.id.flipper01); 
```

但它显示的和以前完全一样！好像我从未添加过包含按钮的额外 linearLayout02。

我错过了什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:17:58.000

尝试 project->clean（如果您使用 Eclipse）并确保您正在编辑正确的 main.xml 文件。您的代码有效，CompositeLayout 和 ViewFlipper 都不重要，按钮已绘制。

如果您确定没有丢失任何内容并且按钮仍未绘制，请尝试将 android:layout_weight 添加到新的 LinearLayout（包含按钮）中。（对于我的 Galaxy Nexus，没有重量，一切都很好，但由于 android 设备碎片，可能会出现问题）

# python - 如何使用 Selenium/Python 获取由 JavaScript 编写的 html 内容

> ID：16073626
> 
> 赞同：4
> 
> 时间：2013-04-18T02:42:30.313
> 
> 标签：python, selenium

我正在使用 Selenium 进行网络爬网，并且我想在 Selenium 模拟单击​​假链接后获取由 JavaScript 编写的元素（例如链接）。

我尝试了 get_html_source()，但它不包含 JavaScript 编写的内容。

我写的代码：

```
 def test_comment_url_fetch(self):
        sel = self.selenium 
        sel.open("/rmrb")
        url = sel.get_location()
        #print url
        if url.startswith('http://login'):
            sel.open("/rmrb")
        i = 1
        while True:
            try:
                if i == 1:
                    sel.click("//div[@class='WB_feed_type SW_fun S_line2']/div/div/div[3]/div/a[4]") 
                    print "click"
                else:
                    XPath = "//div[@class='WB_feed_type SW_fun S_line2'][%d]/div/div/div[3]/div/a[4]"%i
                    sel.click(XPath)
                    print "click"
            except Exception, e:
                print e
                break
            i += 1
        html = sel.get_html_source()
        html_file = open("tmp\\foo.html", 'w')
        html_file.write(html.encode('utf-8'))
        html_file.close() 
```

我使用 while-loop 来单击一系列触发 js-actions 以显示额外内容的虚假链接，而这些内容正是我想要的。但是 sel.get_html_source() 没有给出我想要的。

有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T03:38:49.733

因为我通常对获取的节点进行后处理，所以我直接在浏览器中运行 JavaScript，使用`execute_script`. 例如要获取所有 a-tags：

```
js_code = "return document.getElementsByTagName('a')"
your_elements = sel.execute_script(js_code) 
```

编辑：`execute_script`并且`get_eval`是等效的，除了`get_eval`执行隐式返回，`execute_script`必须明确说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:23:21.803

你不能在你的 selenium 环境中调用浏览器对象吗？例如：

```
self.browser.find_elements_by_tag_name("div") 
```

应该返回一个 div 数组。您还可以按类、id 等查找。

**编辑**下面是创建“浏览器”对象的代码。

```
from selenium import webdriver #The browser object
self.browser = webdriver.Firefox() #I Use firefox, but can do chrome, IE, and safari i believe 
```

然后你应该可以用`find_elements_by_tag_name`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:45:48.980

您需要使用可以执行 Javascript 的浏览器引擎，例如[PhantomJS](http://phantomjs.org/)。Javascript 的更改仅对可以执行 Javascript 并为要触发的事件提供 DOM/Runtime 的客户端可见。

也非常接近：[Executing Javascript from Python](https://stackoverflow.com/questions/10136319/executing-javascript-from-python)

# c# - 如何使用 Windows 窗体控件创建分层数据的嵌套网格？

> ID：16073627
> 
> 赞同：0
> 
> 时间：2013-04-18T02:42:32.503
> 
> 标签：c#, .net, forms, datagridview

我正在寻找一种方法来创建具有行的 DataGridView，当单击这些行时会展开以显示它们正下方的另一个 datagridview。这是否可以在不创建全新的类似 datagridview 的控件的情况下完成，或者我最好在其他地方显示嵌套的 datagridview？

（这里有一篇文章解释了如何在 ASP.NET 中执行此操作。但是，尚不清楚是否可以使用 Windows 窗体完成：

[http://msdn.microsoft.com/en-us/magazine/cc164077.aspx](http://msdn.microsoft.com/en-us/magazine/cc164077.aspx)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:53:49.373

你总是需要一个自定义控件（免费或付费）来实现这一点。

[带列的树视图](http://www.codeproject.com/Articles/23746/TreeView-with-Columns)[（在 CPOL 下免费）](http://www.codeproject.com/info/cpol10.aspx)

[DevExpress XtraGrid（付费）](http://www.devexpress.com/Products/NET/Controls/WinForms/Grid/)

[Janus GridEx（付费）](http://www.janusys.com/controls/)

# jquery - jquery disable selectable 使元素变灰

> ID：16073628
> 
> 赞同：2
> 
> 时间：2013-04-18T02:43:11.743
> 
> 标签：jquery, selectable, jquery-ui-selectable

我正在尝试使用按钮打开和关闭页面上 div 的 .selectable 行为。我可以使用这些命令来做到这一点：

```
$('#selectable').selectable({disabled: true}) 
```

或者

```
$('#selectable').selectable("option", "disabled", true) 
```

该功能按预期工作，但唯一的问题是它会使整个可选择的元素变灰。启用可选择性会消除灰显的外观，但每次我禁用可选择项时，它都会变灰。

有谁知道如何在不使整个元素变灰的情况下禁用可选择性作为属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:48:00.063

只是销毁可选择的`$( "#selectable" ).selectable( "destroy" );`以及何时需要它回来怎么样`$( "#selectable" ).selectable();`

# buffer - netty中的自定义FrameDecoder

> ID：16073635
> 
> 赞同：0
> 
> 时间：2013-04-18T02:44:10.460
> 
> 标签：buffer, netty

我对netty的FrameDecoder有如下问题。

*   数据包被分成 {n} 帧，然后 FrameDecoder 正确处理。
*   如果多个数据包组成一个帧并发送到服务器（当客户端连续发送小数据包数据时），则 FrameDecoder 仅读取第一个数据包。剩余的被忽略。

我可以让 FrameDecoder 继续执行剩余的数据吗？

```
public class BinaryFrameDecoder extends FrameDecoder {
    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer){
        if(buffer.readableBytes() < 2){
            return null;
        }

        int length = buffer.getShort(buffer.readerIndex());
        if(buffer.readableBytes() < length + 2){
            return null;
        }
        buffer.skipBytes(2);                
        return buffer;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:34:01.297

如果您更换它应该可以工作：

```
return buffer; 
```

和：

```
return buffer.readBytes(length); 
```

因为它很可能`buffer`包含不止一条消息。

# c++ - 指向使用向量地址的临时指针

> ID：16073637
> 
> 赞同：0
> 
> 时间：2013-04-18T02:44:31.493
> 
> 标签：c++, parsing, pointers, binary-tree

我有一个关于将字符串 s 解析为二叉树的问题。

```
struct TreeNode {
string val;         // The data in this node.
TreeNode *left;   // Pointer to the left subtree.
TreeNode *right;  // Pointer to the right subtree.
};

string s="((OR (AND pass (NOT reject)) (AND (NOT pass) reject)))"; 
```

我做了一些笔画并消除了“（”和“）”并将所有单独的部分保留在向量后拆分中，后拆分有（底部）或并且通过不拒绝并且不通过拒绝（返回）

```
vector<string> aftersplit;
vector<TreeNode> parsetree;
while (!aftersplit.empty())//do the parsing 
{

     TreeNode *temp=new TreeNode;

    temp->val=aftersplit.back();
    temp->left=NULL;
    temp->right=NULL;        
    aftersplit.pop_back();
    if(temp->val=="AND"||temp->val=="OR"||temp->val=="=>"||temp->val=="<=>"){
        TreeNode *leftnode = new TreeNode; 

        leftnode=&parsetree.back();
        parsetree.pop_back();
        temp->left=leftnode;
        TreeNode *rightnode = new TreeNode; 

        rightnode=&parsetree.back();
        parsetree.pop_back();
        temp->right=rightnode;
        parsetree.push_back(temp); //can not put the temp into parsetree 
    }
    else if(temp->val=="NOT")
    {
        TreeNode *leftnode = new TreeNode; 

        leftnode=&parsetree.back();
        parsetree.pop_back();
        temp->left=leftnode;
        parsetree.push_back(temp);        
    }
    else {            
        parsetree.push_back(temp);
    } 
```

}

我从右到左处理字符串 s

但是，当我在运算符为“OR”时运行“TreeNode leftnode”时；左节点被分配了一个地址，该地址被第一个“与”的左孩子“pass”使用，也就是说，“与”指向他的左孩子地址0x00007fff6d8da7e0，新的临时左节点正在分配地址0x00007fff6d8da7e0 在那之后树就像

> ```
>  (AND)            
>        / \        
>       /   \       
>    pass  (NOT)         
>           /          
>       reject 
> ```

在那个leftnode被分配“pass”的地址之后，它会喜欢

> ```
>  (AND)            
>                  /    \        
>                 /      \       
>               (AND)    (NOT)         
>               /    \     /     
>              /      \   /          
>           (AND) (NOT) reject
>          /    \        
>         /      \       
>      (AND)    (NOT) 
> ```

等等，都指向自己，我知道指针可能有问题，但我无法弄清楚。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:48:17.770

```
if(temp.val=="AND"||temp.val=="OR"||temp.val=="=>"||temp.val=="<=>"){
    TreeNode leftnode;  //appear a bug here
    leftnode=parsetree.back();
    parsetree.pop_back();
    temp.left=&leftnode;
    TreeNode rightnode;
    rightnode=parsetree.back();
    parsetree.pop_back();
    temp.right=&rightnode;
    parsetree.push_back(temp);  
} 
```

你的变量`leftnode`和`rightnode`有一个有限的寿命。由于它们是在您的范围内声明的`if`，因此一旦您离开那里，它们就会被销毁。意味着他们的地址变得无效！因此，每次 temp.left 和 temp.right 的内容都会指向一些垃圾数据。

这实际上就是为什么您可以看到多次找到相同地址的原因：由于前一个对象已被销毁，它被用于存储您需要的新数据。但这并不是您想要的，因为您想保留您创建的所有对象。

最简单的方法是动态创建`TreeNode`您需要的 s （并相应地修改其余代码）：

```
TreeNode *leftnode = new TreeNode;
TreeNode *rightnode = new TreeNode; 
```

这样，即使在退出`if`. 但是，您以后一定不要忘记`delete`他们。

# shell - 如何将所有案例合并为一个

> ID：16073641
> 
> 赞同：-1
> 
> 时间：2013-04-18T02:44:55.050
> 
> 标签：shell

如何合并以下两个案例脚本？

**脚本 1**

```
#!/bin/bash
Ver=0
n="192.168.1.20:/backup/b1"
o1="192.168.1.20:/backup/b2"    
User="1234"
echo "n Latrest version"    
echo "o1 Previous version n-1"
echo "o2 Previous version n-2"
echo -n "Which version you want to backup [n or p]? "
read Ver    
case "$Ver" in    
(n|o1|o2) scp $User@${!n} . ;;    
(*) echo "UNKNOWN USER"    
esac 
```

上面的脚本不能正常工作错误

```
cannot stat `1234@': No such file or directory 
```

**脚本 2**

```
User=0    
av="34567"    
ma="4568"    
im="5678"    
mi="12345"    
pr="23456"    
echo "Please select av ma ji im pr"    
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "    
read User    
case "$User" in    
(av|ma|pr|mi|im) scp ${!User}@$n . ;;    
(*) echo "UNKNOWN USER"    
esac 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:52:41.290

`$n`变量和之间有点混淆，并且没有指定`$Ver`的值。`$o2`

```
#!/bin/bash
echo "want to download [yes no]? "
read response
[ "$response" = "yes" ] || exit

n="192.168.1.20:/backup/b1"
o1="192.168.1.20:/backup/b2"
o2="192.168.1.20:/backup/b3"
echo "n Latest version"
echo "o1 Previous version n-1"
echo "o2 Previous version n-2"
echo -n "Which version do you want to backup [n o1 o2]? "
read opt
case "$opt" in
    n|o1|o2)
        server="${!opt}"
        ;;
    *)
        echo "INVALID OPTION" >&2
        exit 1
        ;;
esac

av="34567"
ma="4568"
im="5678"
mi="12345"
pr="23456"
echo -n "Enter your initials [av ma im mi pr]: "
read opt
case "$opt" in
    av|ma|im|mi|pr)
        user="${!opt}"
        ;;
    *)
        echo "UNKNOWN USER" >&2
        exit 1
        ;;
esac

scp "${user}@${server}" . 
```

# actionscript-3 - 当电影剪辑的帧不在当前帧上时，如何更改它的帧？AS3

> ID：16073642
> 
> 赞同：0
> 
> 时间：2013-04-18T02:45:00.930
> 
> 标签：actionscript-3, movieclip, timeline

我希望能够更改当前不在屏幕上但稍后会回到屏幕上的影片剪辑帧。只有当整个时间线达到某个点时，我才希望电影剪辑上的帧从 1 变为 2。因此，如果时间线到达第 5 帧或指定的帧，则影片剪辑将从 1 变为 2。因此，当我回到带有影片剪辑的帧时，它会停留在影片剪辑 2 上。

**为了解释我正在尝试做的事情：** 我将具有电影剪辑的帧命名为“索引”，并且我希望观众导航到的部分已经成为改变颜色或动画的电影剪辑。当它们返回索引时，影片剪辑将停留在动画的第二帧上。

我是动作脚本的新手，我花了几个小时试图弄清楚如何做到这一点，所以任何帮助将不胜感激。

* * *

我真的不知道如何定位不在当前框架中的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:30:16.617

您可以将这样的内容放入 MovieClip：

```
function checkParent(e:Event):void
{
    gotoAndStop(1);
    if(parent && (parent as MovieClip).currentFrame > 5)
    {
        gotoAndStop(2);
    }
}

addEventListener(Event.ENTER_FRAME, checkParent); 
```

# iphone - 如何从故事板中的事件处理程序跳转到代码

> ID：16073645
> 
> 赞同：0
> 
> 时间：2013-04-18T02:45:18.790
> 
> 标签：iphone, ios

我在主视图中有一个“你好”按钮。我已将其 Touch Up Inside 处理程序设置为 HelloWorldViewController.m 中的 changeGreeting()。从 Connections Inspector 中，我可以清楚地看到这种关联： ![在此处输入图像描述](https://i.stack.imgur.com/0aB5Z.png)

我的问题是，如何从这里（故事板视图）跳转到 .m 文件中的 changeGreeting() 函数？

我希望只需单击“Hello World View Controller changeGreeting：”按钮即可将我带到源代码。但事实证明并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:13:45.153

没有办法（据我所知）直接从该面板跳转到该`changeGreeting:`方法。

您可以按 Command-Shift-O（或选择“文件”>“快速打开...”）并键入`changeGreeting:`（或某些前缀）以跳转到定义。

如果您希望 Apple 添加更好的方法，请访问[https://bugreport.apple.com/](https://bugreport.apple.com/)并提交功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:17:54.107

您可以转到“跳转栏”，它是主查看器顶部的水平栏。此处将文件更改为 .m 文件，然后开始输入“更改”或“问候”以查看此文件中与过滤器匹配的所有方法。

# java - 如何在 Java 中播放外部声音文件

> ID：16073648
> 
> 赞同：0
> 
> 时间：2013-04-18T02:45:42.523
> 
> 标签：java, audio, external, javasound, clip

java - 如何在java中播放没有内部保存在java项目中的声音？我已经尝试过这段代码，但它只适用于在 java 项目中编译的文件。我想让声音文件目录与 java 项目分开。

```
private void sound (int s)
{
    try {
      Clip clip = AudioSystem.getClip();
      AudioInputStream inputStream = AudioSystem.getAudioInputStream(Main.class.getResourceAsStream("Music/Sound"+s+".wav"));
      clip.open(inputStream);          
      clip.start();          
    } catch (LineUnavailableException | UnsupportedAudioFileException | IOException e) {
      System.err.println(e.getMessage());
    }
} 
```

# ruby-on-rails - 重定向有效，但在我的评论系统的同一路径上渲染失败

> ID：16073653
> 
> 赞同：0
> 
> 时间：2013-04-18T02:46:10.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

大家好~我对这里的rails有点陌生。我的创建操作中有一个这样的控制器，但是我创建失败的评论总是直接指向“模板缺失”。我想知道如何解决这个问题，因为我的成功是在相同的路径上工作的......非常感谢~

```
def create
  @book = Book.find(params[:book_id])
  @comment = @book.comments.build(params[:comment]) if signed_in?
  @comment.user = current_user

  if @comment.save
    flash[:success] = "Comment posted"
    redirect_to book_path(@book)
  else
    render book_path(@book)
  end
end 
```

路线

```
resources :books do
  resources :comments, only: [:create, :destroy]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:56:49.650

使用`render :show`.

`render`不接受这样的 URL。它接受您正在渲染的模板的名称等。查看[文档](http://apidock.com/rails/ActionController/Base/render)以获取更多可以传递给`render`.

# ms-access - 从一个列表框中的表/表单中选择记录并将其显示在另一个表/表单的列表框中

> ID：16073657
> 
> 赞同：1
> 
> 时间：2013-04-18T02:46:39.073
> 
> 标签：ms-access, vba, ms-access-2010

我在为按钮编写代码以将选定记录从一个列表框（ListBoxForm2）添加到另一个列表框（ListBoxForm1）时遇到一些麻烦。我有一个可以从 ListBoxForm1 中删除选定记录的工作按钮，我将在下面包含该记录。如果有人能够提供帮助，将不胜感激:-)

Form1 有一个 ListBox，它从 Table1 中读取记录（Table2 是内部连接的），如果 Table1 中的 ID 存在于 Table2 中，则显示它们。可以使用按钮选择和删除它们：

```
Private Sub RemoveMember_Callouts_Click()

Dim lngID As Long
Dim strSQL As String

If IsNull(ListBoxForm1) Then
    Exit Sub
End If

'get selected record's ID
lngID = ListBoxForm1.Value
strSQL = "DELETE * FROM [Table2] WHERE Table2ID = " & lngID
CurrentDb.Execute strSQL

'refresh the list
ListBoxForm1.Requery

End Sub 
```

但是，在以编程方式将 Table2(Form2) 中的选定记录添加到 Table1 时，我遇到了困难。我可以对我的删除点击事件执行类似的代码吗？有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:32:26.177

在执行 Delete 语句之前。编写一条语句，将表 2 中的记录插入表 1。

```
"INSERT INTO Table1(col1, col2) SELECT col1, col2 FROM Table2 WHERE Table2ID=" & lngID 
```

我希望这个能帮上忙

# python - 在python中创建默认参数

> ID：16073659
> 
> 赞同：1
> 
> 时间：2013-04-18T02:46:39.967
> 
> 标签：python, parameters, default-value

我有一个带有三个参数的函数，参数二和三具有默认值。参数三的默认值取决于参数一的属性。但是，我显然无法对“def”行中的参数一执行任何操作，因此我无法找到一种有效的方法来定义参数三的默认值。在 python 中执行此操作的标准方法是什么？

以下代码是我正在使用的。第一行会引发错误，因为我还没有真正定义“数据”。最好的解决方法是什么？

```
def stooge_sort(data, a = 0, b = len(data) - 1):
    if data[a] > data[b]:
        data[a], data[b] = data[b], data[a]
    if b + 1 - a >= 3:
        thirds = (b + 1 - a) / 3
        stooge_sort(data, a, b - thirds)
        stooge_sort(data, a + thirds, b)
        stooge_sort(data, a, b - thirds)
    return data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:49:54.100

请记住，默认参数仅在*创建*函数对象时计算*一次*，因此无法在其中放置这样的表达式。这与人们对分配可变值的默认参数的行为感到惊讶的原因相同。

 *通常的方法是选择一个你知道`b`永远不会的默认值。`None`通常是一个不错的选择。

```
def stooge_sort(data, a=0, b=None):
    if b is None:
        b = len(data) - 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:50:38.190

让变量默认为None，然后检查变量是否为None，如果是的话，把它改成你想要的值。

```
def stooge_sort(data, a = 0, b = None):
    if b is None:
        b = len(data) - 1
    if data[a] > data[b]:
        data[a], data[b] = data[b], data[a]
    if b + 1 - a >= 3:
        thirds = (b + 1 - a) / 3
        stooge_sort(data, a, b - thirds)
        stooge_sort(data, a + thirds, b)
        stooge_sort(data, a, b - thirds)
    return data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T02:50:00.123

我相信常见的解决方法是简单地分配`b`一些默认值，例如`None`，然后根据`data`函数内部进行调整：

```
def stooge_sort(data, a = 0, b = None):
    if b is None:
        b = len(data) - 1
    # continue doing work 
```*

# c# - 处理路径的最佳方法

> ID：16073660
> 
> 赞同：0
> 
> 时间：2013-04-18T02:46:47.813
> 
> 标签：c#, asp.net-mvc

在一个项目中，我有 2-3 个类具有指向我的本地文件系统文件夹的路径。如下所示：

第一类：

```
 private static string UPLOAD_ROOT = "~/Uploads/";
 private static string IMAGES_FOLDER = "Images"; 
```

第 2 类：

```
 private static string UPLOAD_ROOT = "~/Uploads/";
 private static string PSD_FOLDER = "Generated PhotoShop PSDs"; 
```

所以，正如我们所见，UPLOAD_ROOT 在我需要的地方重复。我想将这些路径保存在一个文件中。我该怎么做？

我可以看到的可能解决方案是将这些文件放在一个静态类中并按如下方式使用它：

```
public static class PathSettings
{
   public static string UPLOAD_ROOT = "~/Uploads/";
   public static string IMAGES_FOLDER = "Images";
   public static string PSD_FOLDER = "Generated PhotoShop PSDs";

} 
```

然后使用这个类如下：

```
file.SaveAs(PathSettings.UPLOAD_ROOT + filename); 
```

那我应该怎么保存呢？使用静态类是**最好**的解决方案吗？CMS 中使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:05:24.840

将它们作为设置放在您的 web.config 中。这可以通过 Visual Studio 中的编辑器完成：右键单击项目，选择属性。选择左侧的“设置”选项卡。或者，在项目下的“属性”文件夹中（在解决方案资源管理器中）应该有一个可以双击的设置文件。

您可以使用 Properties.Settings.Default.WhateverSettingName 访问此处的值。

此外，为了获得额外的功劳，请从您的字符串中创建一个 Path 对象，并在系统的其余部分中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:00:35.593

带有常量的静态类是完全有效的。这种方法的主要缺点是在移动目录的情况下需要重新编译应用程序。

因此，您可以考虑将常量移出到应用程序的`web.config`文件中。当您需要找出值时，只需将其从`web.config`文件中拉出，如本答案所示：

[在 Web.Config 文件中声明一个字符串](https://stackoverflow.com/questions/13152765/declare-a-string-in-web-config-file)

（不确定字符串中`~`是否允许使用`web.config`。阅读后很容易将其添加。）

编辑：

CMS一般使用配置文件来存储这些路径，然后使用一个普通的静态库来拉回路径信息。通常有一些用户界面供管理员更改路径，进而编辑充满路径信息的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:06:23.783

如果这些常量值根据操作系统、语言等发生变化，您最好使用资源文件来存储常量。

当您从字符串生成路径或 URI 时，最好使用[`Path Class`](http://msdn.microsoft.com/en-us/library/3bdzys9w.aspx)和的方法[`Uri Class`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

# ios - UIDatePicker 和日期未正确存储

> ID：16073664
> 
> 赞同：2
> 
> 时间：2013-04-18T02:47:04.023
> 
> 标签：ios, nsdate, uidatepicker

我有一个绑定到运行以下代码的 UIToolbarButton 的 IBAction 方法。

UIDatePicker 仅设置为向用户显示时间。因此，选择器随机选择日期：有时日期是今天，有时日期是明天。我希望选择器始终选择所选时间（但总是在将来）。例如，如果用户在 1 月 1 日晚上 10:00 选择上午 6:00，我希望日期存储在 1 月 2 日上午 6:00。

下面的 if 应该这样做，但是 NSLog 有 50% 的时间返回一个答案，而 50% 的时间返回另一个答案。

```
if (self.picker.date >= [NSDate dateWithTimeIntervalSinceNow:0]) {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSDate *pickerdate = self.picker.date;
    [defaults setObject:pickerdate forKey:@"pickerdate"];
    [defaults synchronize];
    NSLog(@"The date is more than now. Pickerdate is %@",pickerdate);
}
else {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSCalendar*       calendar = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
    NSDateComponents* components = [[NSDateComponents alloc] init];
    components.day = 1;
    NSDate * pickerdate = [calendar dateByAddingComponents: components toDate: self.picker.date options: 0];
    [defaults setObject:pickerdate forKey:@"pickerdate"];
    [defaults synchronize];
    NSLog(@"The date is less than now. Pickerdate is %@",pickerdate);
} 
```

编辑：修改了代码，我的逻辑是倒退的，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:08:33.417

您不能使用`>=`（或类似的）运算符来比较两个`NSDate`对象。这些是对象。您必须使用该`compare:`方法来比较两个日期。正如您所拥有的那样，您正在比较一个对象指针是否大于或等于另一个对象指针。绝对不是你想要的。

正确的替换是：

```
if ([self.picker.date compare:[NSDate date]] != NSOrderAscending) { 
```

请注意，`[NSDate date]`给出与 相同的结果`[NSDate dateWithTimeIntervalSinceNow:0]`。

# mysql - 如何计算mysql中字符串的值

> ID：16073665
> 
> 赞同：0
> 
> 时间：2013-04-18T02:47:06.693
> 
> 标签：mysql

我在 Mysql 中有一个存储过程，在这里我做了一些查询来获取一个字符串 @str = 5*2+1 然后我想计算这个字符串并返回一个数字。就像在 sql server 中我可以做的一样`exec ('select'+ @str)`，它返回 11

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:51:54.677

```
PREPARE stmt1 FROM 'SELECT 5*2+1 as eval';
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/10741)
*   [MySQL 准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:50:14.503

是的，从技术上讲，您可以这样做，但这是一种危险的[SQL 注入](http://bobby-tables.com/)形式，因此这可能是一个非常糟糕的主意。

人们不使用`eval`或类似的东西来做简单的数学是有原因的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:52:39.207

![MySQL Workbench 命令的屏幕截图](https://i.stack.imgur.com/80iRA.png)

您可以使用以下内容，但在使用动态查询时要小心 SQL 注入：

```
prepare stmt1 from 'select 5*2+1';
execute stmt1;
deallocate prepare stmt1; 
```

使用您的代码示例，试试这个（小心 SQL 注入！）

```
set @Calc = concat('select ', '5*2+1', ' as result');
prepare stmt1 from @Calc;
execute stmt1;
deallocate prepare stmt1; 
```

# ios - iOS6 社交框架弹出 No Account Alert

> ID：16073667
> 
> 赞同：0
> 
> 时间：2013-04-18T02:47:11.083
> 
> 标签：ios

类似于[iOS 6 社交框架不会设置或没有警报](https://stackoverflow.com/questions/14145322/ios-6-social-framework-not-going-to-settings-or-no-alert)，但我正在尝试使用 SLRequest：

当用户尚未在“设置”中登录 Facebook 时，我正在尝试显示“无 Facebook 帐户”警报。我发现警报出现在您提供 SLComposeViewController 之后，而不是在 if 语句中。

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{
    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    //setup controller and callback code

    [self presentViewController:controller animated:YES completion:nil];
} 
```

但是，我正在尝试使用 SLRequest，但我不想显示 SLComposeViewController，而是在检查帐户后弹出警报。我的代码在这里：

```
- (void)postImageFB
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    NSLog(@"can post");
} else {
    NSLog(@"cant post");
}

ACAccountStore *accountStore = [[ACAccountStore alloc] init];

ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];
NSLog(@"accounts: %i", [accountsArray count]);

// Is it possible to popup the alert here if accounts = 0?

NSDictionary *options = @{ ACFacebookAppIdKey: @"123456789", ACFacebookPermissionsKey: @[@"publish_stream"], ACFacebookAudienceKey: ACFacebookAudienceFriends };

[accountStore requestAccessToAccountsWithType:accountType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {

        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        if ([accountsArray count] > 0) {

            ACAccount *facebookAccount = [accountsArray objectAtIndex:0];

            NSDictionary *parameters = @{@"message": @"testing"};

            SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                            requestMethod:SLRequestMethodPOST
                                                                      URL:[NSURL URLWithString:@"https://graph.facebook.com/me/photos"]
                                                               parameters:parameters];

            [facebookRequest addMultipartData: [self getImageDataFromPlistWithFilename:@"image1.png"]
                                     withName:@"source"
                                         type:@"multipart/form-data"
                                     filename:@"TestImage"];

            facebookRequest.account = facebookAccount;

            [facebookRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
             {
                 if (error) {
                     NSLog(@"%@",error.description);
                 } else {
                     NSLog(@"responedata:%@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
                 }

             }];
        }
    }
}];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:26:16.923

好的，我发现[isAvailableForServiceType 总是返回 true？](https://stackoverflow.com/questions/12811906/isavailableforservicetype-always-returns-true) 于是开始在设备上进行测试。

我认为使用不可见的 SLComposeViewController 来显示警报似乎是一个合适的解决方法：

```
if (![SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    controller.view.hidden = YES;
    [self presentViewController:controller animated:NO completion:nil];

} else {

    // Put posting code here: SLComposeViewController or SLRequest

} 
```

# sql - 查找字符串中的任何字母 SQL Server 2008 R2

> ID：16073672
> 
> 赞同：0
> 
> 时间：2013-04-18T02:48:31.087
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, substring

我有一个包含数字和字母组合的字符串。它看起来像 1A 、 10C 、 15A 等。我有一个 case 语句，它根据数字和字母组合对这个数字应用一个相对值。该声明如下所示：

```
When [Page] like '%[A-Z]' then left([Page],1)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01) 
```

这在页码部分小于 10 时（如 1A）非常有效，但当您查看 10C 和 15A 时，它们应该分别为 10.02 和 15.01。基本上我想使用 charindex 在左侧的长度因子中找到 [AZ] 。

有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:41:47.793

```
When [Page] like '[0-9][A-Z]' then left([Page],1)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01) 
When [Page] like '[0-9][0-9][A-Z]' then left([Page],2)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01) 
When [Page] like '[0-9][0-9][0-9][A-Z]' then left([Page],3)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01) 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:59:40.100

尝试这个

```
When PATINDEX('%[A-Z]%', [Page]) > 0 
then left([Page],PATINDEX('%[A-Z]%', [Page])-1)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01) 
```

# apache-camel - 'moveFailed' 到底是做什么的？

> ID：16073673
> 
> 赞同：0
> 
> 时间：2013-04-18T02:48:38.427
> 
> 标签：apache-camel, fuseesb

我想创建一个行为如下的文件输入：

1.  处理交换
2.  尝试将输入文件复制到共享驱动器
3.  如果步骤 (2) 失败（例如共享已关闭），则改为移动到本地文件

在[文档](http://camel.apache.org/file2.html)之后 ，“moveFailed”参数允许“在处理（通过上面定义的移动配置）失败后移动文件时设置不同的目标目录”。所以这听起来像 moveFailed 将涵盖步骤 (3)。

但是，以下测试失败了……我做错了什么？我正在使用骆驼 2.10.0.fuse。

```
package sandbox.camel;

import java.io.File;    
import org.apache.camel.Endpoint;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.mock.MockEndpoint;
import org.junit.Test;

public class MoveFailedTest extends org.apache.camel.test.junit4.CamelTestSupport {

    private String failedDir = "move-failed";

    @Override
    protected RouteBuilder createRouteBuilder() throws Exception {
        return new RouteBuilder() {

            @Override
            public void configure() throws Exception {
                from("file:tmp/prepare").to("file:tmp/input");
                from("file:tmp/input?move=/doesnotexist&moveFailed=" + failedDir).to("file:tmp/output");
            }
        };
    }        

    @Test
    public void test_move() throws Exception {

        // arrange
        File moveFailedDir = new File("tmp/input/" + failedDir);
        moveFailedDir.mkdirs();
        File[] failedCount1 = moveFailedDir.listFiles();
        failedCount1 = failedCount1 == null ? new File[0] : failedCount1;
        String messagePayload = "Hello";

        Endpoint input = getMandatoryEndpoint("file:tmp/prepare");
        MockEndpoint output = getMockEndpoint("mock:file:tmp/output");
        output.setMinimumExpectedMessageCount(1);
        output.expectedBodiesReceived(messagePayload);

        // act
        template.asyncSendBody(input, messagePayload);
        Thread.sleep(3000);

        // assert: only 1 output
        assertMockEndpointsSatisfied();
        // assert: renamed failed, hence input file was moved to 'movefailed' directory
        File[] failedCount2 = moveFailedDir.listFiles();
        assertEquals("No file appeared in 'movefailed' directory", failedCount1.length + 1, failedCount2.length);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:16:04.410

您的测试很可能是错误的。autocreate 选项默认为 true，这意味着在需要时创建目录。

# c++ - 使用 PlaySound() API 同时播放多个文件

> ID：16073675
> 
> 赞同：2
> 
> 时间：2013-04-18T02:48:43.193
> 
> 标签：c++, winapi, playsound

我最近发现`wav`使用 Win32 API`PlaySound()`函数播放文件是多么容易。

我目前正在我的游戏中为我的背景音乐实现它。我还计划在每次我的分数增加一时使用它。不幸的是，当我这样做时，它会播放乐谱，然后停止背景音乐。

有没有办法让两个`wav`文件同时播放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:47:44.690

您可以使用`SND_NOSTOP`标志来实现这一点。但是，如果您正在编写游戏，最好使用 DirectX 技术来获得声音。

# javascript - 对象 [object HTMLAnchorElement] 没有方法“attr”

> ID：16073677
> 
> 赞同：0
> 
> 时间：2013-04-18T02:48:49.653
> 
> 标签：javascript, jquery, html, dom

我正在使用 console.log 检查一个 DOM 元素。DOM 元素是一个锚点：

```
 <a href="#" class="videoimage" data-id="ks3H_s3e-Wc"></a> 
```

当我尝试使用以下任一行访问其 id 并输出它时：

```
console.log($this.attr(data-id)); 
```

或者

```
console.log($this.data('id')); 
```

我收到一个错误：

> 对象 [object HTMLAnchorElement] 没有方法“attr”

（第二种情况下的“数据”）

锚元素是否没有 attr 或 data 方法，或者我的错误是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T02:50:36.130

看起来像它，因为您的`this`引用不是`jquery`对象。试试这些：

```
$(this).data('id')
$(this).attr('data-id') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:57:07.537

它准确地告诉你问题是什么。`.data`并且`.attr`是 jQuery 函数。如果您想使用 javascript 对象获取属性值，请在为您的元素提供 id 后执行以下操作：

```
console.log(document.getElementById("a").getAttribute("data-id")); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/pFdEj/](http://jsfiddle.net/hescano/pFdEj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:55:34.077

那么，您的页面中还有其他问题。以下**确实**有效：

```
$(this).data("id") 
```

[http://jsfiddle.net/RQw8E/](http://jsfiddle.net/RQw8E/)

你怎么用`$(this)`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T02:56:07.750

为我工作：

### HTML

```
<a href="#" class="videoimage" data-id="ks3H_s3e-Wc">Click</a> 
```

### JavaScript

```
$(".videoimage").click(function() {
    var dataID = $(this).data("id");
    var dataIDAttr = $(this).attr("data-id");
    console.log(dataID);
    console.log(dataIDAttr);
}); 
```

[JSFiddle](http://jsfiddle.net/7K7xm/)

您确定将某种事件附加到调用这些语句的函数吗？

你也可以使用香草 JS

```
var anchorArr = document.getElementsByTagName("a");
for (var i = 0; i < anchorArr.length; i++) {
    if(anchorArr[i].getAttribute("class")==="videoimage") {
        //^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
        //quick and dirty, there are better ways to do this
        console.log(anchorArr[i].getAttribute("data-id"));
    }
} 
```

[jsFiddle](http://jsfiddle.net/QuEmq/2/)

# c# - 当前上下文中不存在名称“GroupforA”

> ID：16073678
> 
> 赞同：0
> 
> 时间：2013-04-18T02:48:50.137
> 
> 标签：c#, naming-conventions

这是代码：

```
class Program
{
    static void Main(string[] args)
    {

      List<Item> cont1 = new List<Item>();
      cont1.Add(objA); //objA is local varible that has been defined. 
      cont1.Add(objB); //objB is local varible that has been defined. 
      cont1.Add(objC); //objC is local varible that has been defined. 
      cont1.Add(objD); //objD is local varible that has been defined. 
      cont1.Add(objE); //objE is local varible that has been defined.

      int count = cont1.Count; 

      List<Item> cont2 = GroupingA(cont1, count);

      for (int i = 0; i < cont1.Count; i++)
      {
         Console.Write(cont1[i].Name + " ");//output the item's name.

      }
      Console.WriteLine();
      Console.Write("Container 2: ");
      for (int i = 0; i < cont2.Count; i++)
      {
         Console.Write(cont2[i].Name + " ");//output the item's name.
      }
    }
} 
```

```
public class GroupItem
{
    public List<Item> GroupingA (List<Item> obj, int count)
    {
        List<Item> temp = new List<Item>();
        for (int i = 0; i < count; i++)
        {
            if (i == count - 1)
            {
                break;
            }
            else if (temp.Count > 0 )
            {
                break;
            }
            else
            {
                for (int j = i + 1; j < count; j++)
                {
                    bool equal = obj[i].EqualFirstPhase(obj[j]);
                    if (equal == true)
                    {
                        if (temp.Exists(element => element == temp[j]))
                        {
                            continue;
                        }
                        else
                        {
                            temp.Add(obj[j]);
                            if (temp.Exists(element => element == obj[i]))
                            {
                                continue;
                            }
                            else
                            {
                                temp.Insert(0, obj[i]);
                            }
                            i--;

                        }

                    }
                }

            }
            for (int k = 0; k < count; k++)
            {
                for (int l = 0; l < temp.Count; l++)
                {
                    if (obj[k].Name.Contains(temp[l].Name))
                    {
                        obj.RemoveAt(k);
                        count--;

                    }
                }
                if (obj.Count < count)
                {
                    k = 0;

                }
            }

        }
        return temp;
    }
} 
```

我想使用`GroupingA`方法重新组合`cont1`into `cont2`。但是，有一个错误。

> 当前上下文中不存在名称“GroupingA”。

谁能帮帮我？？？OOP 真的很弱，尤其是命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:56:28.177

您需要使用：-

```
GroupItem grpItem  = new GroupItem(); 
List<Item> cont2 = grpItem.GroupingA(cont1, count); 
```

原因：-

您的 GroupingA 方法是非静态的，并在 class 中定义`GroupingItem`。而且您正试图从您的 Program 类中访问它，就好像该方法`GroupingA`是该类的一部分一样。要从其他类访问非静态方法，您需要`Instantiate`该类并使用该对象来访问该类。如果是静态方法，您可以使用`.`该特定类上的运算符直接访问它们。前 Class.Method(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:02:48.110

该行 `List<Item> cont2 = GroupingA(cont1, count);`正在类中被调用`Program`。

如果没有说明方法所在位置的类名或对象标识符，它将在当前类中查找，在您的情况下为`Program`.

你有几个选择。

*   使`GroupingA`方法静态并将该行替换为`List<Item> cont2 = GroupItem.GroupingA(cont1, count);`

*   创建一个 GroupItem 的实例并引用它：

    ```
    GroupItem g = new GroupItem();
    List<Item> cont2 = your.GroupingA(cont1, count); 
    ```

*   将方法`GroupingA`移出`GroupItem`类并将其放置在`Program`类中，以便您的线路知道在哪里可以找到它。

# c++ - 当该插槽中没有输入时如何使数组打印零

> ID：16073680
> 
> 赞同：0
> 
> 时间：2013-04-18T02:49:14.777
> 
> 标签：c++, arrays

用户输入一个双精度和字符串，该字符串存储到两个数组中。像这样：

```
{
                 double DoC;
                 string Nm;
                 cout << " Please enter the amount charged to your credit card " << endl;
                 cin >> DoC;
                 cout << " Please enter where the charge was made " << endl;
                 cin >> Nm;
                 getline(cin, Nm);
                 cca.doCharge(Nm,DoC);
                 break;
                 } 
```

然后将 double 和 string 传递给 this ：

```
{
    if (amount > 0)
    {
        for (int i = 9; i != 0; i--)
        { 
            last10withdraws[i] = last10withdraws[i-1];
            last10charges[i] = last10charges[i-1];
        }

        last10withdraws[0] = amount;
        last10charges[0] = name;

        setBalanceW(amount);  
    }
    else
    {
        cout << " ERROR. Number must be greater then zero. " << endl;
    }
    return 0;
} 
```

这似乎非常适合将数据存储到数组中。但是，然后我使用此函数显示数组内部的数据：

```
{
    cout << " Account: Creditcard Withdraws " << " " << " Account: Creditcard Deposits " << " " << " Account: Creditcard last 10 charges " << endl;
    cout << "            " << last10withdraws[0] << "                       " << last10deposits[0] << "                       " << last10charges[0] << endl;
    cout << "            " << last10withdraws[1] << "                       " << last10deposits[1] << "                       " << last10charges[1] << endl;
    cout << "            " << last10withdraws[2] << "                       " << last10deposits[2] << "                       " << last10charges[2] << endl;
    cout << "            " << last10withdraws[3] << "                       " << last10deposits[3] << "                       " << last10charges[3] << endl;
    cout << "            " << last10withdraws[4] << "                       " << last10deposits[4] << "                       " << last10charges[4] << endl;
    cout << "            " << last10withdraws[5] << "                       " << last10deposits[5] << "                       " << last10charges[5] << endl;
    cout << "            " << last10withdraws[6] << "                       " << last10deposits[6] << "                       " << last10charges[6] << endl;
    cout << "            " << last10withdraws[7] << "                       " << last10deposits[7] << "                       " << last10charges[7] << endl;
    cout << "            " << last10withdraws[8] << "                       " << last10deposits[8] << "                       " << last10charges[8] << endl;
    cout << "            " << last10withdraws[9] << "                       " << last10deposits[9] << "                       " << last10charges[9] << endl;
    cout << endl;

} 
```

假设用户在存款数组中输入了三个双精度数。当我调用该函数来显示它时，我得到如下信息：

```
60
30
20
-9.25596e+061
-9.25596e+061
-9.25596e+061
-9.25596e+061
-9.25596e+061
-9.25596e+061 
```

我怎样才能使 -9.25596e+061 为 0？我一直无法找到任何真正帮助我的东西。同样对于包含字符串的数组，当它被调用来显示时，它什么也不显示。为什么是这样 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:52:04.327

将数组初始化为：

```
int last10withdraws[10] = {0}; 
```

现在所有元素都为零。

如果用户输入三个数字，那么前三个元素将为非零（假设只允许非零），其余元素将为零。

如果`last10withdraws`是类 m 的成员（并且您使用的是 C++03），那么您可以使用成员初始化器列表进行默认初始化，这会将所有元素初始化为零。

```
class myclass
{
      int last10withdraws[10];
   public:
      myclass() : last10withdraws() 
      {       //^^^^^^^^^^^^^^^^^^^ member initializer list
      }
}; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:03:10.890

您收到错误是因为您没有初始化这些值。首先说`int last10withdraws[10] = {0};`这会将所有值初始化为零。

# java - 遍历JAVA中的变量

> ID：16073687
> 
> 赞同：0
> 
> 时间：2013-04-18T02:50:11.463
> 
> 标签：java

可以遍历原始类型 char 的变量（使用 foreach 循环）？

我有三个字符

```
char char1 = 'A';
char charTest = 'P';
char character = 'R'; 
```

目前，我有一长串适用于 char1 的“if”语句：

```
if (char1 == 'A')
doSomething;
else if (char1 == 'K')
doSomethingElse;
else if (charPrev == 'G')
    doSomethingAgain;
else
    doSomethingYetAgain; 
```

但是，我将把同一组“if”语句应用于其他字符变量（在本例中为 charTest 和字符）。

什么是实现这一目标的简单方法？感谢您的任何意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T02:55:47.437

最简单的方法是将变量放入数组并循环遍历它们。就像是

```
char[] charArray = {char1, charTest, character};

// Essentially this says, for each char in charArray
for (char character : charArray) {
    if (character == 'A')
        // Do Something
    else if (character == 'K')
        // Do Something
    else
        // Do Something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:56:37.400

您可以将角色传递给运行开关的方法。

```
 public static void main(String[] args) {
    char char1 = 'A';
    char char2 = 'B';
    doStuff(char1);
    doStuff(char2);
  }

  public static void doStuff (char a)
  {
      switch (a) {
        case 'A':
          doSomething();
          break;
        case 'B':
          doSomethingElse();
          break;
        default:
          dontDoAnything();
          break;
      }
      return;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:05:50.363

在 Java 中创建字符数组：

```
char[] characters = {'a', 'b', 'c'}; 
```

**要使用 ' for each** ' 术语循环 char 数组，并且因为您有 ' **long list of if** '，我建议您使用 switch：

```
for(char character : characters){
    switch(character){
          case 'a' : 
             //do something 
             break;
          case 'b' :
             //do something 
             break;
           ..
           ..
    }
} 
```

# macos - 使用端口在 OS-X 上安装 scikit-learn 的正确方法

> ID：16073690
> 
> 赞同：0
> 
> 时间：2013-04-18T02:50:18.733
> 
> 标签：macos, python-2.7, scikit-learn

我想在 OS-X 上使用端口安装 scikit-learn。知道我在这里缺少什么。

端口版本

```
Version: 2.1.3 
```

操作系统-X

```
10.8.2 Build 12C60 
```

Xcode

```
Version 3.2.5 (1760) 
```

Python

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

安装 scikit-learn 的命令

```
sudo port install py27-scikit-learn
--->  Computing dependencies for py27-scikit-learn
--->  Cleaning py27-scikit-learn
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found. 
```

但是，看起来它没有正确安装或配置。我在这里想念什么？

```
>>> import sklearn
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named sklearn
>>> from sklearn import cluster, covariance, manifold
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named sklearn
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T05:42:59.703

我搬到了 Homebrew，之后的一切都很容易。

# c++ - C++ 多线程数据管理

> ID：16073691
> 
> 赞同：0
> 
> 时间：2013-04-18T02:50:20.187
> 
> 标签：c++, hierarchical-data, vision

我正在寻找有关在我的计算机视觉项目中管理大量数据的概念性建议。我在 a) 概念化和 b) 实现一个概念来协调这个大数据流的概念，这些数据流既作为来自相机的程序的输入又由代码生成。

所以我必须处理的数据可以分成五个独立的“流”，我称之为：

原始帧（从相机直接输入） 目标图像（子帧，取自前一个图像流） 时间戳（用于原始帧） 车辆姿态数据（GPS、车身角度等，来自与车辆的无线串行端口连接）态度数据时间戳

如果我们要完全按顺序执行此操作，一般流程将是：

```
Frame = grabInputFrame();
TargetsVector = searchForTargets(Frame);
VehicleData = getDataFromVehicle();

for each Target in TargetVector (
    targetData = processData(Target, VehicleData);
    updateTargetLog(targetData);
} 
```

所以这是交易：我试图通过线程来做到这一点，因为这些算法是处理器密集型的并且没有顺序相关（我的意思是我不需要颜色数据来获取目标的 GPS 坐标）。但是，我确实需要将图像与目标和时间戳与这些图像进行协调，这样我就可以将正确的车辆数据用于正确的图像等。

我的一个朋友建议使用关系数据库方法，但我使用的是 C++。我想知道的是，有没有办法在 C++ 中模拟关系数据库（让键与数据相关联，例如与数据或目标图像相关联的时间戳或目标 ID）？连接到 SQL DB 会更容易管理吗？这样做是否会导致显着的性能损失？这里最重要的一点是，无论我做什么，我都必须能够锁定共享数据，这样我才能安全地多线程。

我希望在这样的分层数据结构方面有一些经验的人可以对我的情况有所了解。我提前感谢您的想法和批评。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:29:35.603

OpenMP 可能有助于解决此类问题，为锁定和原子操作提供了内置函数。由于您有 5 个并行操作，因此您可以创建 5 个线程并根据 threadId 执行不同的操作。

# python - 嵌套的 Django 表单：“ManagementForm 数据丢失或已被篡改”

> ID：16073693
> 
> 赞同：3
> 
> 时间：2013-04-18T02:50:25.240
> 
> 标签：python, html, django, forms, nested-forms

所以我环顾四周，似乎没有人遇到过我不得不导致这个看似常见的错误的问题。我在我的 html 中呈现一些表单，如下所示：

```
<form method="post" action="">
{{ tags_formset.management_form }}

<!-- code displaying this formset -->
...
<!-- -->

    <form method="post" action="">
        {{ add_all_form.management_form }}
        {{ add_all_form.addTagsToAll }}
        <input type="submit" value="Add To Displayed Applicants" />
    </form>

    <form method="post" action="">
        {{ remove_all_form.management_form }}
        {{ remove_all_form.removeTagsFromAll }}
        <input type="submit" value="Remove From Displayed Applicants" />
    </form>
    <input type="submit" value="Save Changes" />
</form> 
```

当我没有两个内部表单时，表单集会正确显示，并且提交按钮可以提交表单。当我添加第二种形式时，出现了几个问题：

- 提交按钮停止工作（尽管在选择表单集的一个字段时按 Enter 仍会提交表单

- add_all_form 的提交工作正常（不是问题，但关于下一点很有趣......）

- 由于“ManagementForm 数据丢失或已被篡改”验证错误，remove_all_form 无法正常工作。

这是创建表单的 views.py 代码：

```
 TagsFormSet = formset_factory(TagsForm, formset=TagFormSet, extra=applicantQuery.count())
    if request.method == 'POST':
        tags_formset = TagsFormSet(request.POST, request.FILES, prefix='tags', applicants=applicantQuery)
        add_all_form = TagAddAllForm(request.POST, request.FILES, prefix='addForm', applicants=applicantQuery)
        remove_all_form = TagRemoveAllForm(request.POST, request.FILES, prefix='removeForm', applicants=applicantQuery)
        redirect = False
        if tags_formset.is_valid():
            for tagForm in tags_formset.forms:
                if 'tags' in tagForm.cleaned_data:
                    tagForm.saveTags()
                if 'removeTags' in tagForm.cleaned_data:
                    tagForm.deleteTags()                        
            redirect = True
        if add_all_form.is_valid():
            if 'addTagsToAll' in add_all_form.cleaned_data:
                add_all_form.saveTagsToAll()
            redirect = True
        if remove_all_form.is_valid():
            if 'removeTagsFromAll' in remove_all_form.cleaned_data:
                remove_all_form.deleteTagsFromAll()
            redirect = True
        if redirect:
            return http.HttpResponseRedirect('')
    else:
        initForms = []
        tags_formset = TagsFormSet(prefix='tags', applicants=applicantQuery)
        add_all_form = TagAddAllForm(prefix='addForm', applicants=applicantQuery)
        remove_all_form = TagRemoveAllForm(prefix='removeForm', applicants=applicantQuery) 
```

我真的无法弄清楚出了什么问题。我不知道为什么 add_all_form 工作而 remove_all_form 不工作，因为我基本上复制并粘贴了所有相关内容（如果你需要我可以从 Forms.py 文件中发布代码，但我认为问题不存在.. .)

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:50:30.203

您应该只使用一个`<form>`标签。您可以在此处拥有任意数量的提交按钮，并且可以显示任意数量的表单，但所有表单都应位于单个`<form>`标签内。

然后所有管理数据将在表单提交中正确发送，您的问题应该得到解决。

```
<form method="post" action="">
{{ tags_formset.management_form }}

<!-- code displaying this formset -->
...
<!-- -->

    {{ add_all_form.management_form }}
    {{ add_all_form.addTagsToAll }}
    <input type="submit" value="Add To Displayed Applicants" />

>
    {{ remove_all_form.management_form }}
    {{ remove_all_form.removeTagsFromAll }}
    <input type="submit" value="Remove From Displayed Applicants" />
<input type="submit" value="Save Changes" /> 
```

您的视图可以保持原样。

# php - 页面只加载一半的页面

> ID：16073697
> 
> 赞同：0
> 
> 时间：2013-04-18T02:50:50.173
> 
> 标签：php, jquery, loops, load

我真的不知道这里发生了什么，但是 php 代码有些错误。此页面包含 5 个网络研讨会：http: [//veteducation.com.au/webinar/](http://veteducation.com.au/webinar/)

问题是第一次加载时仅显示 1 个网络研讨会，但当您刷新它时，会显示另外 4 个网络研讨会。

为什么我的页面仅在首次加载时加载 1 个网络研讨会，而在刷新时加载 4 个网络研讨会？我想在第一次加载时查看 5 网络研讨会。

请帮我解决一下这个。

```
<?php
        $args = array( 'post_type' => 'webinars', 'orderby' => 'modified', 'posts_per_page'=>-1 );
        $loop = new WP_Query( $args );
        if ( $loop -> have_posts() ) : 
                while ( $loop -> have_posts() ) : $loop -> the_post(); ?>
                <?php include( TEMPLATEPATH."/"."includes/class.common.php" );
                $classObj = new Common_Class(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:57:01.290

我在 IE、Chrome 和 Opera 中加载了它，但它们都显示了所有 5 个。听起来您的浏览器正在积极缓存一个加载了 1 个网络研讨会的版本，然后在您按下刷新时实际加载页面。

尝试清除浏览器缓存或将其加载到新浏览器中（Chrome 的隐身模式非常适合此操作）。

# ruby - 为什么我应该避免使用 CGI？

> ID：16073700
> 
> 赞同：1
> 
> 时间：2013-04-18T02:51:05.190
> 
> 标签：ruby, cgi, fastcgi

我试图使用 CGI 和 ERB 创建我的网站，但是当我在网上搜索时，我看到有人说我应该始终避免`CGI`使用`Rack`.

我知道 CGI 会 fork 很多 Ruby 进程，但如果我使用`FastCGI`，只会创建一个持久化进程，并且它也被 PHP 网站采用。Plus`FastCGI`接口一次请求只创建一个对象，性能非常好，而 Rack 一次创建 7 个对象。

我不应该使用 CGI 有什么具体原因吗？或者这只是错误的假设，使用 CGI/FastCGI 完全可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:36:59.973

CGI，我的意思是接口以及围绕它的通用编程库和实践，是在不同的时间编写的。它将请求处理程序视为通过环境变量和标准 I/O 流连接到网络服务器的不同进程。

这在当时是最先进的，当时还没有我们今天所想的真正的“Web 框架”和“嵌入式服务器模块”。因此...

# CGI 往往很慢

同样，CGI 模型为每个连接生成一个新进程。虽然如今生成进程*本身*很便宜，但繁重的 Web 应用程序初始化——读取和解析大量模块、建立数据库连接等——使这变得相当昂贵。

# CGI 倾向于太低级（恕我直言）设计

同样，CGI 模型明确提到环境变量和标准输入作为请求和处理程序之间的接口。但谁在乎？这比应用程序设计师通常应该考虑的要低得多。如果您查看基于 CGI 的库和代码，您会发现其中大部分都鼓励“业务逻辑”以及表单解析和 HTML 生成，这现在被广泛视为一种危险的混合问题。

与 Rack::Builder 之类的东西相比，编码人员立即考虑将命名空间映射到操作，这对更广泛的 Web 应用程序意味着什么。（突然间，我们可以自由地争论语义网和 REST 的优点等等，因为我们没有考虑根据用户提供的输入生成单选按钮。）

是的，可以在 CGI 之上实现像 Rack::Builder 这样的东西，但这就是重点。它必须是建立*在 CGI 之上*的抽象层。

# CGI 往往会被冷嘲热讽

尽管 CGI 在其限制范围内工作得非常好，尽管它很简单且被广泛理解，但 CGI 经常被不可控地抛弃。如果您只知道 CGI，您也可能会被解雇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:09:40.917

不要使用 CGI。请。这不值得。回到 1990 年代，当时没有人知道这似乎是个好主意，但那时脚本并不常见，用于处理表单提交等特殊情况，而不是驱动整个网站。

FastCGI 是一种“更好的 CGI”的尝试，但它在很多方面仍然存在不足，特别是因为您必须管理您的 FastCGI 工作进程。

Rack 是一个更好的系统，而且效果很好。如果您使用 Rack，您有多种托管系统可供选择，甚至是非常简单可靠的[Passenger 。](https://www.phusionpassenger.com/)

我不知道你说 Rack 一次创建“7 个对象”是什么意思，除非你的意思是有 7 个不同的 Rack 进程以某种方式运行，或者你在实现中犯了错误。

我想不出一个 CGI 会比 Rack 等价物更好的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T17:38:47.830

关于 CGI、Rack 等到底是什么存在很多混淆。正如我在[这里](https://stackoverflow.com/questions/25009386/are-rack-based-web-servers-represent-fastcgi-protocol/33538573#33538573)所描述的，Rack 是一个 API，FastCGI 是一个协议。CGI 也是一种协议，但在狭义上也是一种实现，而且你所说的与 FastCGI 完全不同。所以让我们从背景开始。

早在 90 年代初期，Web 服务器只是从磁盘上读取文件（HTML、图像等）并将它们发送到客户端。人们开始希望在请求时进行一些处理，而出现的早期解决方案是运行一个程序，将产生的结果发送回客户端，而不仅仅是读取文件。用于此的“协议”是为 Web 服务器提供一个 URL，该 URL 被配置为作为程序执行（例如，`/cgi-bin/my-script`），然后 Web 服务器将在其中设置一组环境变量，其中包含有关请求的各种信息和使用标准输入上的请求正文运行程序。这被称为“[通用网关接口](https://en.wikipedia.org/wiki/Common_Gateway_Interface)”。

鉴于这为每个请求都派生了一个新流程，它显然效率低下，而且您几乎肯定不想在大容量网站上使用这种动态请求处理方式。（启动一个全新的过程在计算资源方面相对昂贵。）

一种提高效率的解决方案是，而不是启动一个新进程，而是将请求信息发送到一个已经在运行的现有进程。这就是 FastCGI 的全部意义所在；它维护了一个与 CGI 非常相似的接口（您有一组包含大部分请求信息的变量，以及请求正文的数据流）。但是，它不是设置实际的 Unix 环境变量并使用主体 on 启动一个新进程`stdin`，而是向已经在机器上运行的 FCGI 服务器发送一个类似于 HTTP 请求的请求，在该服务器上指定这些变量的值和请求主体内容。

如果 Web 服务器可以以某种方式将程序代码嵌入其中，这将变得更加高效，因为它只运行代码本身。您可以如何执行此操作的两个经典示例是：

*   将 PHP 嵌入 Apache，以便“Apache 服务器代码”只调用属于同一进程的“PHP 服务器代码”；和

*   根本不运行 Apache，而是让 Web 服务器用 Ruby（或 Python，或其他）编写，并加载和运行更多为处理请求而定制的 Ruby 代码。

那么 Rack 是从哪里来的呢？Rack 是一种**API**，它允许处理 Web 请求的代码以通用方式接收它，而不管 Web 服务器如何。因此，给定一些 Ruby 代码来处理使用 Rack API 的请求，Web 服务器可能会：

*   成为一个 Ruby Web 服务器，它只是在自己的进程中对其加载的符合 Rack 的代码进行函数调用；
*   成为一个使用 FastCGI 协议的 Web 服务器（以任何语言编写），使用 FastCGI 服务器代码与另一个进程通信，该服务器代码再次对处理请求的 Rack 兼容代码进行函数调用；或者
*   成为一个服务器，它启动一个全新的进程，解释传递给它的 CGI 环境变量和标准输入，然后调用符合 Rack 的代码。

因此，无论您使用的是 CGI、FastCGI、其他进程间协议还是进程内协议，都没有区别；您可以使用 Rack 执行任何操作，只要服务器知道它或正在与可以理解 CGI、FastCGI 或其他任何内容并根据该请求调用符合 Rack 的代码的进程交谈。

所以：

对于性能扩展，您绝对不想使用 CGI；您想使用 FastCGI、类似的协议（例如 Tomcat 协议），或直接在进程内调用代码。

如果您使用 Rack API，则无需在早期阶段担心您在 Web 服务器和程序之间使用哪种协议，因为像 Rack 这样的 API 的全部意义在于您可以在以后更改它。

# java - 驱动 API 电话

> ID：16073701
> 
> 赞同：1
> 
> 时间：2013-04-18T02:51:05.347
> 
> 标签：java, android, iphone, google-drive-api

我正在尝试创建一个 java 程序，该程序将创建 excel 文件并将其上传到谷歌驱动器中。上传后我需要它来授予权限。我已经完成了所有这些，但问题在于尝试将 excel 文件转换为 google 文件，以便使用表格的人能够用手机更新它们。我无法在 google api 上找到有关如何执行此操作的任何帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:28:44.773

假设您有 Excel 文件的路径：

```
java.io.File fileContent = new java.io.File(excelfilepath);
FileContent mediaContent = new FileContent("application/vnd.ms-excel", fileContent);

// File's metadata.
File body = new File();
body.setTitle(fileContent.getName());
body.setMimeType("application/vnd.ms-excel");

// THIS IS THE IMPORTANT PART
Insert request = service.files().insert(body, mediaContent);
request.setConvert(true);
File file = request.execute();
// END OF THE IMPORTANT PART

if (file != null) {
  showToast("Data Uploaded: " + file.getTitle());
} 
```

# c++ - 为什么不首先将班级成员设置为公开？

> ID：16073704
> 
> 赞同：2
> 
> 时间：2013-04-18T02:51:16.177
> 
> 标签：c++, class

我不明白为什么人们总是说，当你创建一个类时，你应该创建一个`get()`方法来获取类中的变量，以及一个`set()`方法来设置类中的变量。

如果你有一个`get()/set()`方法......那么为什么不首先公开变量呢？

反正你也不会不小心改变它，因为你仍然需要输入`myClassName.variable`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T03:01:27.430

使用 get/set 函数可以让您灵活地稍后更改您的类实现，而无需更改访问该类的所有代码。

例如，您可能会更改其中一个内部变量的类型，或者您想对变量可以设置的值添加限制。也许您可能只想按需计算一个值。

此外，您可以使 get/set 函数非内联，并在其上放置断点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T03:46:57.137

制作公共变量是一种非常糟糕的做法（在 OO 中），因为如果您想添加任何功能或限制，您将必须找到访问您的类的所有代码并替换它。

Getter 和 setter 解决了必须更改所有代码的问题，当您想要对变量的值添加限制以执行验证或其他功能时。

但是不要过度使用 get/set 函数，getter 和 setter 也违反了 OO 原则，因为它们仍然暴露了实现。如果你真的希望你的代码可以在不同的项目中重用，那么只有在没有其他可能的实现时才使用 get/set 函数。

如果您不相信我，请阅读这篇古老但仍然相关的文章，并得出自己的结论。

[http://www.idinews.com/quasiClass.pdf](http://www.idinews.com/quasiClass.pdf)

[http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html](http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html)

```
http://typicalprogrammer.com/?p=23 
```

# git - 强制“git status”在终端上输出颜色（在脚本内）

> ID：16073708
> 
> 赞同：77
> 
> 时间：2013-04-18T02:52:04.080
> 
> 标签：git, shell, unix, io, terminal

编辑：

我想提出一个建议，即解析颜色通常是一个考虑不周的想法。

我想要它的部分原因是我可以解析它并在我自己的脚本输出中传递它。这……好吧，但使用瓷器或类似的东西并自己重新制作彩色零件可能会更明智！

原始问题如下。

* * *

我喜欢看颜色，因为我的脚本足够强大（到目前为止）可以处理颜色代码。看起来我在这里违背了规律，但老实说，我不明白必须解析脚本中的转义码之类的东西有什么大不了的。如果颜色有助于交互式使用，为什么它们不能帮助脚本使用，我可能会聚合数据并处理比手动更多的数据？颜色不是*更重要*吗？

无论如何，我有一个整洁的小 shell 脚本，我编写了 munges`git status`输出，我只是想让这个脚本保持颜色完整。我的全局 git 配置已设置，以便更改和未跟踪文件的列表在 git 状态中以颜色显示。不幸的是，我找不到`git diff`强制颜色的选项。`git status`

说得很清楚，这就是问题所在：

```
$ git status 
```

产生完美的输出，但是（摘自我的脚本如下）

```
git status | sed "s/^#/\x1b[34m#[0m/" 
```

不产生彩色`git status`输出，您甚至可以在这里看到我明确地将前导哈希字符转换为蓝色，因为它有助于突出显示脚本中不同的输出区域。

有谁知道如何让它熄灭颜色？是否有可以用作“假终端”STDIN/STDOUT 管道的标准程序？事实上，我也在开发一个 pty 伪终端工具，所以我当然可以为此目的使用它，但它是一个相当笨拙的解决方案（并且还没有准备好使用，因为我还没有完成构建它）。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-08-18T23:21:19.543

为避免更改您的 git 配置，您可以通过将配置变量与`-c`.

对于**`status`**命令，变量是`color.status`：

```
 git -c color.status=always status | less -REX 
```

对于**`diff`**、和命令**`show`**，变量为：**`log`****`grep`**`color.ui`

```
 git -c color.ui=always diff | less -REX 
```

请注意，`-c`必须*在*`status`or参数之前，`diff`而不是之后。

或者，对于**`diff`**、**`show`**和命令**`log`**，**`grep`**您可以在命令`--color=always` *之后*使用：

```
 git diff --color=always | less -REX 
```

* * *

注意：正如 Steven 所说，如果您尝试提取有意义的数据，那么您可以使用解析颜色来提取含义，而不是解析颜色来`--porcelain`获得更友好的解析器输出。

```
 git status --porcelain | awk ... 
```

然后，如果您愿意，您可以稍后重新引入颜色。

要获取用户配置的颜色，您可以使用`git config --get-colour`：

```
 reset_color="$(tput sgr0)"
    remote_branch_color="$(git config --get-color color.branch.remote white)"

    echo "Pushing to ${remote_branch_color}${branch_name}${reset_color}" 
```

[这里](https://github.com/joeytwiddle/dotfiles/blob/3081c5d034c6c11907b9b290d97f815848fceb68/j/config/auto.sh/git_aliases#L1430-L1432)还有一些例子。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-18T03:01:20.900

编辑：

**我想强烈建议解析颜色通常是一个考虑不周的想法。**

我想要它的部分原因是我可以解析它并在我自己的脚本输出中传递它。这……好吧，但使用瓷器或类似的东西并自己重新制作彩色零件可能会更明智！

原始答案如下。

* * *

在提出问题后，我总是很快找到答案。与思考一个问题足够长的时间以将其写出来有关，以便您制定更好的方法来解决它。无论如何，解决这个问题只是

```
git config color.status always 
```

我想通用解决方案涉及`expect`或`pty`与强制任何需要它的程序认为它们在终端上有关的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-07T22:04:43.777

使用执行 shell 命令的 git 别名时，我遇到了同样的问题。显然 git shell 没有从当前环境继承，所以它对我的着色设置一无所知。

除了添加全局 git color ui 设置之外，我通过使我的别名如下所示来解决这个问题，它是需要被告知使用颜色的辅助命令，因为 git 默认情况下会在人们提到的任何 1.8.x 版本中使用。

```
[alias]
  ignored = !git ls-files -v|grep --color '^h' 
```

现在，当以别名运行时，这会产生等效的彩色输出，就像我刚刚运行命令一样。

对于 sed，这个其他答案似乎更可靠，使用 tput。 [https://unix.stackexchange.com/a/45954](https://unix.stackexchange.com/a/45954)

# instruments - Apple Instruments - 计数器 - 来源不可用

> ID：16073720
> 
> 赞同：2
> 
> 时间：2013-04-18T02:53:13.630
> 
> 标签：instruments, performancecounter, xcode-instruments

我遇到了 Apple Instruments 的问题（4.6，Xcode 4.6.2 on 10.8.3）。通常在使用时间探查器时，我可以查看我的源代码并查看热点而没有任何问题（同一个项目）。

这次我一直在尝试使用“计数器”模板来采样我的 CPU 性能计数器事件。它按应有的方式对事件进行采样，并且我也具有相同的基于时间的分析信息，但是当我尝试进入我的代码以查看热点时，就像我可以为“时间分析器”所做的那样，我得到的只是在我曾经有来源的地方是“不可用”。也没有大会。

该项目构建为：

*   发布版本
*   调试信息已开启且未剥离
*   DWARF + dsym 用于存储分析数据。

正如我所说，它与时间分析器的配置相同。我已经尝试过（几乎所有这里都说明了：[Xcode 4 Instruments doesn't show source lines](https://stackoverflow.com/questions/5268041/xcode-4-instruments-doesnt-show-source-lines)，除了做-O0，调试性能对我不感兴趣）

*   重新编译
*   使用“File -> Re-Symbolicate”重新定位dysm文件

一旦我明确关闭 Instruments，从 Xcode 启动另一个 Profile 并选择 Time Profiler，它就可以工作，如果我回到 Performance Counters，它就会停止。

这是默认行为吗？应该是这样吗？在当前的 Instruments 版本中，有人已经设法让它工作了吗？否则，向 Apple 提交错误可能是值得的。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T14:26:19.983

试试 Xcode 5.1 beta4。对我来说，它固定在那里：计数器现在工作。

种子笔记提到了他们所做的一些细节。不知道它是否在 NDA 下。

# python - 在范围内循环用户输入

> ID：16073721
> 
> 赞同：-4
> 
> 时间：2013-04-18T02:53:16.667
> 
> 标签：python, loops, python-3.x, while-loop

我有一些代码，我想向用户询问 1-100 之间的数字，如果他们在这些之间输入一个数字，它将打印 (Size: (input)) 并打破循环，但是如果他们在外面输入一个数字1-100 它将打印（大小：（输入）），然后继续向他们重新询问一个数字，但我遇到了一些问题。

```
c=100
while c<100:
    c=input("Size: ")
    if c == 1 or 2 or 3:
        print ("Size: "+c)
        break
    else:
        print ("Size: "+c)
        print ("Invalid input. Try again.") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:01:10.817

这应该这样做。

```
c=input("Size: ")
while int(c)>100 or int(c)<1: 
    #Will repeat until the number is between 1 and 100, inclusively.
    #It will skip the loop if the value is between 1 and 100.

    print ("Size: "+c)
    print ("Invalid input. Try again.")
    c=input("Size: ")

#once the loop is completed, the code following the loop will run
print ("Size: "+c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:03:35.787

你甚至从来没有进入你的循环。

```
c=100
while c<100: 
```

`c`从 100 开始并`while`检查它是否小于 100。

# python - Python：解压成数组元素

> ID：16073724
> 
> 赞同：0
> 
> 时间：2013-04-18T02:53:41.563
> 
> 标签：python, python-2.7, iterable-unpacking

当我尝试将目标设为数组元素时，为什么解包行为会发生变化？

```
>>> def foobar(): return (1,2)
>>> a,b = foobar()
>>> (a,b)
 (1, 2)
>>> a = b = [0, 0] # Make a and b lists
>>> a[0], b[0] = foobar()
>>> (a, b)
 ([2, 0], [2, 0]) 
```

在第一种情况下，我得到了我期望的行为。在第二种情况下，两个赋值都使用返回的元组中的最后一个值（即'2'）。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:56:31.533

当你这样做时`a = b = [0, 0]`，你正在制作两者`a`并`b`指向*同一个*列表。因为它们是可变的，所以如果你改变任何一个，你就会改变两者。改用这个：

```
a, b = [0, 0], [0, 0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:55:50.927

`a = b = [0, 0]`# 使 a 和 b 成为*同一个*列表

# zend-framework - 如何在 wamp 2.2 中测试/使用 zend？

> ID：16073726
> 
> 赞同：0
> 
> 时间：2013-04-18T02:53:57.577
> 
> 标签：zend-framework, wamp

我使用的是win 7系统，我已经安装了wamp 2.2，我打开`http://localhost/?phpinfo=1`，我可以看到一些zend信息，例如：Zend Extension 220090626...那么这是否意味着zend已经安装在wamp 2.2中？我做了一个测试：

```
<?php
$date=new Zend_Date();
echo $date; 
?> 
```

但它显示：

`D:\wamp\www\test.php`致命错误：第2 行中未找到类“Zend_Date”

那么我怎么知道zend是否已经安装呢？我该如何测试/使用它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:18:42.840

尝试这个

1.您配置 ZEND 库文件

2.下载 ZEND LIBRARY 文件并粘贴此位置 C:\wamp\bin

3.wamp服务器需要按照给出的步骤进行一些更改

你按照步骤做

1.将zendframework文件复制到=> C:\wamp\bin

2.环境变量添加bin路径

路径 => "C:\wamp\bin\zendframework\bin"

3.更改 wamp 服务器中的 php.ini 文件，如下所示：

; Windows: "\path1;\path2" include_path = ".;C:\wamp\bin\zendframework\library"

4.更改apache中的httpd.conf，如下所示：

LoadModule rewrite_module modules/mod_rewrite.so

这意味着删除#。

5.重启wamp服务器。

# .net - image WriteableBitmap image .Pixels 字段、构造函数或成员 'Pixels' 未定义？

> ID：16073735
> 
> 赞同：-2
> 
> 时间：2013-04-18T02:55:32.610
> 
> 标签：.net, graphics, f#, writeablebitmap

```
 let image = WriteableBitmap(100, 100, 300.0, 300.0, Media.PixelFormats.Bgra32, null);
            let pixel = image.Pixels 
```

错误 2 未定义字段、构造函数或成员“像素”

WriteableBitmap.Pixels 属性 MSDN

为什么不定义？

这是框架问题吗？或...范围？或者 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:17:33.173

`Pixels`是[`System.Windows.Media.Imaging.WriteableBitmap`](http://msdn.microsoft.com/en-us/library/aa347331%28v=vs.95%29.aspx)Silverlight 类的属性，它不同于[`System.Windows.Media.Imaging.WriteableBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)标准框架的类。

您应该参考框架的 Silverlight 版本以使用第一个类 - 并拥有该`Pixels`属性 - 但是您将编写 Silverlight 应用程序，而不是标准的 Windows 应用程序。

要使用标准框架访问像素值，您可以使用[`CopyPixels`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.copypixels.aspx)方法

# java - 无法显示 HTML + SVG

> ID：16073740
> 
> 赞同：4
> 
> 时间：2013-04-18T02:55:54.357
> 
> 标签：java, html, swing, svg, jeditorpane

我以前用过`JEditorPane`，但是只能显示HTML，不能显示SVG，嵌套的SVG HTML不能完整显示。

然后我用`JSVGCanvas`了，但是只能显示SVG，不能显示HTML。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T03:05:04.910

配置`JEditorPane`为使用`JSVGCanvas`SVG 画布。要做到这一点，你需要一个专家`HTMLEditorKit`。这是`HTLMEditorKit`Appleteer[的](http://pscode.org/appleteer/)。

```
package org.pscode.ui.applet.appleteer;

import java.awt.Component;
import java.awt.Dimension;

// placeholder component
import javax.swing.JButton;

import javax.swing.text.html.HTML;
import javax.swing.text.html.HTMLEditorKit;
import javax.swing.text.View;
import javax.swing.text.ComponentView;
import javax.swing.text.PlainView;
import javax.swing.text.ViewFactory;
import javax.swing.text.Element;
import javax.swing.text.AttributeSet;
import javax.swing.text.StyleConstants;

import org.pscode.ui.applet.appleteer.AppletElement;
import org.pscode.ui.applet.appleteer.AppletLoaderContainer;

import java.util.HashMap;
import java.util.Enumeration;

import java.net.URL;

import java.util.logging.*;

/** The AppletEditorKit extends HTMLEditorKit to support the applet element. */
public class AppletEditorKit extends HTMLEditorKit {

    URL documentBase;

    PseudoBrowser browser;

    static int appletCount;
    static boolean hasNamedApplet;

    public AppletEditorKit(URL documentBase, PseudoBrowser browser) {
        this.documentBase = documentBase;
        this.browser = browser;
        appletCount = 0;
        hasNamedApplet = false;
    }

    public ViewFactory getViewFactory() {
        return new AppletHTMLFactory(documentBase, browser);
    }

    public static class AppletHTMLFactory extends HTMLFactory implements ViewFactory {

        URL documentBase;
        PseudoBrowser browser;

        AppletHTMLFactory(URL documentBase, PseudoBrowser browser) {
            this.documentBase = documentBase;
            this.browser = browser;
        }

        public View create(Element element) {
            AttributeSet set = element.getAttributes();
            Object o =
                element.getAttributes().getAttribute(StyleConstants.NameAttribute);
            if (o instanceof HTML.Tag) {

                HTML.Tag kind = (HTML.Tag) o;

                Logger.getLogger("Appleteer").log(
                    Level.FINEST, "AEK.c  HTML.Tag: " + kind);

                if (kind == HTML.Tag.APPLET ) {

                    if(!contains(element.getAttributes().getAttributeNames(),"endtag")) {
                        View view;
                        try {
                            AppletElement ae = new AppletElement(
                                element,
                                browser,
                                "applet" + appletCount++);
                            view = new AppletView(ae);
                            if ( ae.getName()!=null ) {
                                hasNamedApplet = true;
                            }
                        } catch(Exception e) {
                            return new PlainView(element);
                        }

                        return view;
                    } else {
                        return new PlainView(element);
                        //return null;
                    }
                } else if (kind == HTML.Tag.PARAM) {
                    Logger.getLogger("Appleteer").log(
                        Level.FINEST, "HTML Param: " + kind);
                }
            }
            return super.create( element );
        }
    }

    public static boolean contains(Enumeration en, String name) {
        while( en.hasMoreElements() ) {
            Object o = en.nextElement();
            if (o instanceof HTML.Attribute) {
                Logger.getLogger("Appleteer").log(
                    Level.FINEST, "HTML.Attribute: " + 0);
                if (o.toString().equals(name)) {
                    return true;
                }
            }
        }
        return false;
    }
} 
```

# android - Android屏幕冻结，同时保存到数据库

> ID：16073747
> 
> 赞同：0
> 
> 时间：2013-04-18T02:56:38.690
> 
> 标签：android

以下是我从网络下载数据的编码，在执行后我将其保存到数据库，然后更新用于 GUI 的 ListAdapter。

问题是当保存到数据库时，屏幕在保存到数据库时冻结，对于 600 条记录，大约需要 20 秒。

请让我知道，我怎样才能改变它，这样 UI 就不会冻结。

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {

    public DownloadWebPageTask() {

    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();

            progressDialog = ProgressDialog.show(getActivity(),

            "Please wait...", "Retrieving data ...", true);

            progressDialog.setCancelable(true);

            }

        }

    }

    @Override
    protected String doInBackground(String... urls) {

        String response = "";

        for (String url : urls) {

            DefaultHttpClient client = new DefaultHttpClient();

            HttpGet httpGet = new HttpGet(url);

            try {

                InputStream content = client.execute(httpGet).getEntity()

                .getContent();

                BufferedReader buffer = new BufferedReader(

                new InputStreamReader(content));

                String s = "";

                while ((s = buffer.readLine()) != null) {

                    response += s;

                }

            } catch (Exception e) {

                e.printStackTrace();

            }

        }

        return response;

    }

    @SuppressLint("NewApi")
    @Override
    protected void onPostExecute(String result) {

        try {

            if (type.equalsIgnoreCase("ALL COURSES")) {
                dbList = db.getAllCourseDBs(type);

                if (dbList.isEmpty())

                {
                progressDialog.dismiss();

                }

            if((result==null)|| result.isEmpty())
            {

            }
            else
            {
                if (type.equalsIgnoreCase("ALL COURSES")) {
                    db.deleteAllCourseByTypeDB(type);
                }
                else
                {
                    db.deleteAllCourseByCategoryIdDB(category_id);

                }

            JSONArray jArray = new JSONArray(result);
            for (int i = 0; i < jArray.length(); i++)
            {
                JSONObject json_data_one = jArray.getJSONObject(i);

                db.deleteAllCourseCategoryByTypeDB(type);

                for (int j = 0; i < jArray.length(); i++)

                {

                    CourseDB nbnt = new CourseDB();

                    long insideStart = System.currentTimeMillis();

                    JSONObject json_data = jArray.getJSONObject(i);
                    String crsCd=null, crsTitle=null;
                    if (type.equalsIgnoreCase("Area of Training")) {

                            crsCd = json_data.getString("courseCd");

                         crsTitle = json_data.getString("courseTitle");

                    }
                    else{

                    crsCd = (json_data.getString("crsCd"));

                     crsTitle = (json_data.getString("crsTitle"));
                    }

                    nbnt.setcourse_crs(crsCd);

                    nbnt.setcategory_course_type(type);

                    nbnt.setcourse_name(crsTitle);
                    nbnt.setcat_foreign_id(category_id);

                    SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
                    String currentDateandTime = sdf.format(new Date());
                    System.out.println("date to be inseted in DB"+currentDateandTime);
                    nbnt.setcourse_time(currentDateandTime);
                    arrayofWebData.add(nbnt);
                    db.beginTransaction();

                    SQLiteDatabase sqlDB = db.getWritableDatabase();

                    long startTime = System.currentTimeMillis();
                    db.addcourseByType(nbnt, sqlDB);
                    db.setTransactionSuccessful();

                    db.endTransaction();

                    db.close();

                    long endTime = System.currentTimeMillis();

                    readWebpagerating();
                     Collections.sort(arrayofWebData, new CourseDBComparator ());
                    listAdapter = new SelectArralAdapter(getActivity(),
                                arrayofWebData);

                        lv123.setAdapter(listAdapter);
                        lv123.setFastScrollEnabled(true);

                lv123.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> parent, View view,

                    int position, long id) {

                        CourseDB planet = listAdapter.getItem(position);

                        String key = planet.getcourse_crs();

                        String KEY_ID_NOTEBOOK = db.CourseDB(key);

                        System.out.println("value if key_id" + KEY_ID_NOTEBOOK);

                        Intent intent25 = new Intent(getActivity(),

                        CourseDetailsActivity.class);
                        intent25.putExtra("course_id", key);

                        intent25.putExtra("category_id", category_id);
                        intent25.putExtra("type", type);

                        intent25.putExtra("category_name", category_name);

                        startActivity(intent25);
                        getActivity().finish();

                    }

                });

            }
            }
        }
        }

    catch (JSONException e) {

            Log.e("log tag", "Error parsing data" + e.toString());

        }

    }

} 
```

按照建议更改了代码，屏幕现在不会冻结，但如果我移动到另一个屏幕，它会在执行后崩溃。

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {

    public DownloadWebPageTask() {

    }

    @Override
    protected void onPreExecute() {

        super.onPreExecute();

        if (type.equalsIgnoreCase("ALL COURSES")) {
        dbList = db.getAllCourseDBs(type);
        if (dbList.isEmpty())

        {

            progressDialog = ProgressDialog.show(getActivity(),

            "Please wait...", "Retrieving data ...", true);

            progressDialog.setCancelable(true);

        }
        }else if(type.equalsIgnoreCase("SEARCH")){
            // DO NOTHING
        }
        else
        {
            dbList = db.getAllCourseDBByTypes(category_id, type);
            if (dbList.isEmpty())

            {

                System.out.println("the value of the dbList inside all coursestypes"+dbList.size());
                progressDialog = ProgressDialog.show(getActivity(),

                "Please wait...", "Retrieving data ...", true);

                progressDialog.setCancelable(true);

            }

        }

    }

    @Override
    protected String doInBackground(String... urls) {

        String response = "";

        for (String url : urls) {

            DefaultHttpClient client = new DefaultHttpClient();

            HttpGet httpGet = new HttpGet(url);

            try {

                InputStream content = client.execute(httpGet).getEntity()

                .getContent();

                BufferedReader buffer = new BufferedReader(

                new InputStreamReader(content));

                String s = "";

                while ((s = buffer.readLine()) != null) {

                    response += s;

                }

            } catch (Exception e) {

                e.printStackTrace();

            }

            System.out.println("value of the response"+response);

            //adding new */

            if((response==null)|| response.isEmpty())
            {

            }
            else
            {
                if (type.equalsIgnoreCase("ALL COURSES")) {
                    db.deleteAllCourseByTypeDB(type);
                }else if(type.equalsIgnoreCase("SEARCH")){
                    // DO NOTHING
                }
                else
                {
                    db.deleteAllCourseByCategoryIdDB(category_id);

                }

            JSONArray jArray;
            try {
                jArray = new JSONArray(response);

            for (int i = 0; i < jArray.length(); i++)
            {
                JSONObject json_data_one = jArray.getJSONObject(i);

                System.out.println("All the not empty");

                db.deleteAllCourseCategoryByTypeDB(type);

                for (int j = 0; i < jArray.length(); i++)

                {

                    CourseDB nbnt = new CourseDB();

                    long insideStart = System.currentTimeMillis();

                    JSONObject json_data = jArray.getJSONObject(i);
                    String crsCd=null, crsTitle=null;
                    if (type.equalsIgnoreCase("Area of Training")) {
                        System.out.println("im area of tarinin");

                            crsCd = json_data.getString("courseCd");

                         crsTitle = json_data.getString("courseTitle");

                    }
                    else{

                    crsCd = (json_data.getString("crsCd"));

                     crsTitle = (json_data.getString("crsTitle"));
                    }

                    System.out.println("Time for one JSON parsing "

                    + (System.currentTimeMillis() - insideStart));

                    nbnt.setcourse_crs(crsCd);

                    nbnt.setcategory_course_type(type);

                    nbnt.setcourse_name(crsTitle);
                    nbnt.setcat_foreign_id(category_id);

                    SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
                    String currentDateandTime = sdf.format(new Date());
                    System.out.println("date to be inseted in DB"+currentDateandTime);
                    nbnt.setcourse_time(currentDateandTime);
                    arrayofWebData.add(nbnt);
                    db.beginTransaction();

                    SQLiteDatabase sqlDB = db.getWritableDatabase();

                    long startTime = System.currentTimeMillis();
                    db.addcourseByType(nbnt, sqlDB);
                    db.setTransactionSuccessful();

                    db.endTransaction();

                    db.close();

            }
            }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        }

        return response;

    }

    @SuppressLint("NewApi")
    @Override
    protected void onPostExecute(String result) {

        if (type.equalsIgnoreCase("ALL COURSES")) {
            dbList = db.getAllCourseDBs(type);

            if (dbList.isEmpty())

            {
            progressDialog.dismiss();

            }
            }else if(type.equalsIgnoreCase("SEARCH")){
                // DO NOTHING
            }
            else
            {
                dbList = db.getAllCourseDBByTypes(category_id, type);

                if (dbList.isEmpty())

                {

                    System.out.println("the value of the dbList inside all coursestypes"+dbList.size());
                    progressDialog.dismiss();

                }

            }

                readWebpagerating();
                 Collections.sort(arrayofWebData, new CourseDBComparator ());
                listAdapter = new SelectArralAdapter(getActivity(),
                            arrayofWebData);

                    lv123.setAdapter(listAdapter);
                    lv123.setFastScrollEnabled(true);

            lv123.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,

                int position, long id) {

                    CourseDB planet = listAdapter.getItem(position);

                    String key = planet.getcourse_crs();

                    String KEY_ID_NOTEBOOK = db.CourseDB(key);

                    System.out.println("value if key_id" + KEY_ID_NOTEBOOK);

                    System.out.println("category id on lcick listnere inside the post ecexute" + category_id);

                    Intent intent25 = new Intent(getActivity(),

                    CourseDetailsActivity.class);
                    intent25.putExtra("course_id", key);

                    intent25.putExtra("category_id", category_id);
                    intent25.putExtra("type", type);

                    intent25.putExtra("category_name", category_name);

                    startActivity(intent25);
                    getActivity().finish();

                }

            });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:58:55.907

数据库操作应该在`doInBackground()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:57:40.273

正如 LuxuryMode 所说，所有阻塞操作都需要在后台进行。

您的方法的问题在于您将所有这些都放在了 Activity 中，其生命周期不适合后台操作。

创建位于外部的应用程序模型（通常在 Application 子类中）并将您的 AsyncTask 移动到那里。在活动中，使用简单的模式（如观察者/回调）绑定到该模型以更新您的适配器。

# c++ - 在 C++ 中拦截字段访问/修改

> ID：16073748
> 
> 赞同：0
> 
> 时间：2013-04-18T02:56:40.430
> 
> 标签：c++, object, process, intercept

每当修改或访问对象的字段时，我都想拦截它。我想在另一个进程中复制该操作，该进程也将包含同一对象的副本，因此需要对象的基地址、字段偏移量和设置的值。根据这些信息，我可以创建一条消息，告诉其他进程要修改的确切内容。我意识到两个进程中的基本指针不会相同，但这没关系。

关于如何做到这一点的任何建议？欢迎任何其他关于如何在其他流程中反映这些操作的建议，但需要有其他流程 - 这是任务的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:01:33.450

this 指针将帮助您找到对象的地址。复制构造函数将帮助您包含同一对象的副本。

# c# - 在构造函数中初始化一个类的数组

> ID：16073753
> 
> 赞同：2
> 
> 时间：2013-04-18T02:56:50.163
> 
> 标签：c#, visual-studio-2010, constructor

我有一个类`Garage`，它的属性是 type 的数组`Car`，它是程序中的另一个类。我已经尝试了几次迭代，并且大多数都出现了运行时错误。`NullRefernceException`每当我尝试运行它时，我都会得到一个。这发生在`Program`我尝试访问`CarLot`数组的长度属性的类中。

我知道这与类的`CarLot`属性有关，`Garage`它是一个数组，而不仅仅是`Car`. 我在这里缺少什么，以便在程序尝试使用数组时不会将数组设置为 null？

```
class Program
{
    static void Main(string[] args)
    {
        Garage g = new Garage();
        //this is where the exception occurs
        g.CarLot[0] = new Car(5, "car model");
        Console.ReadLine();
    }
}

public class Garage 
{
    public Car[] CarLot { get; set; }
    public Garage() { }
    //this should be able to be 0 or greater
    public Garage(params Car[] c)
    {
        Car[] cars = { };
        CarLot = cars;
    }
}

public class Car
{
    public int VIN { get; set; }
    public int Year { get; set; }
    public string Model { get; set; }
    public Car(int _vin, string _model)
    {
        _vin = VIN;
        _model = Model;
    }
    public Car() { }
    public void Print()
    {
        Console.WriteLine("Here is some information about the car {0} and {1} ");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:01:59.630

当在 Main 中调用无参数构造函数时，您可以使用私有变量来初始化数组，而不是使用数组的自动属性。

例如

```
private Car[] carLot = new Car[size];
public Car[] CarLot
{
     get { return carLot; }
     set { carLot = value; }
} 
```

或者，在 Garage 的无参数构造函数中，您可以继续并在该点初始化数组。

无论哪种方式，都必须先实例化您的数组，然后才能为其赋值。 [http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288453(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:16:42.000

我知道这不是您要的确切内容，但是这样的事情怎么样？会不会容易很多？

```
 static void Main(string[] args)
    {
        var garage = new List<Car>();
        //this is where the exception occurs
        garage.Add(new Car(5, "car model"));
    }

    public class Car
    {
        public int VIN { get; set; }
        public int Year { get; set; }
        public string Model { get; set; }
        public Car(int _vin, string _model)
        {
            _vin = VIN;
            _model = Model;
        }
        public Car() { }
        public void Print()
        {
            Console.WriteLine("Here is some information about the car {0} and {1} ");
        }

    } 
```

# matlab - MATLAB .m 文件到 mex 文件的转换

> ID：16073754
> 
> 赞同：0
> 
> 时间：2013-04-18T02:56:50.753
> 
> 标签：matlab, mex, matlab-deployment

我有一个需要从 php 调用的 MATLAB 程序。我在 deploytool 的帮助下将其转换为 exe，但速度太慢。所以我想把它转换成 mex 文件或 C 文件，然后再转换成 exe，这样可以加快执行时间。最好的方法是什么？我查看了 MATLAB 编码器，但我认为它不支持我的程序。那么有什么方法可以将 matlab .m 文件转换为 mex 文件可执行文件？

我想要一种加快执行时间的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:28:18.293

.mex 文件是编译后的 C 代码，带有一个允许您从 MATLAB 调用它的接口。它不是编译的 .m MATLAB 代码。

如果您想将您的 MATLAB 代码转换为 C 以加快速度，如果它支持您的代码，您可以使用 MATLAB Coder，如果不支持，您可以重新实现。请注意，它可能支持您的某些代码，您可以重新实现其余代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:20:26.633

我不相信仅仅[将](http://www.mathworks.nl/products/matlab-coder/).m 文件转换为 .mex 然后编译会加速你的程序（请注意你仍然需要安装 MCR）。也许，根据问题和程序员的技能，从头开始*重新实现其中的一些就可以了。*

# javascript - 通过使用javascript滚动加载数据

> ID：16073759
> 
> 赞同：0
> 
> 时间：2013-04-18T02:57:21.990
> 
> 标签：javascript, asp.net-mvc, knockout.js

我在我的页面上显示数据，当我单击`load more data`按钮时，它将在已显示数据下方的同一页面上加载更多数据。我想转换此功能，以便在用户向下滚动页面而不是单击时加载更多数据`load more data`。这是我所拥有的以及我所尝试的。

**html视图**

```
<section id="rosterImages">
    <section id="users">
        <div id="nameImage">
            <figure id="content" class="thumbnail">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                    <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                </figcaption>
            </figure>
            </div>
        </section>
    </section> 
```

**Javascript 滚动**

```
$(window).scroll(function (e) {
        if ($(window).scrollTop() >= ($(document).height() - $(window).height()) * 0.7) {
           $('#users').append(Next());
        }
    }); 
```

**下一个方法**

```
Next = function () {
    var _page = $.views.Roster.ViewModel.CurrentPage() + 1;
    $.views.Roster.ViewModel.CurrentPage(_page);
    $.views.Roster.GetPage("/api/Roster", 9, _page);
}; 
```

如果我将它链接到一个按钮而不是滚动条，则下一个方法有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:35:18.780

我们刚刚实现了类似的东西，我们的方法几乎就像其他答案一样，除了检查你是否真的到达了页面的末尾

```
<script>
        $(window).scroll(function () {
            //Will check if the user has reached bottom of a PAGE
            //-10 makes it such that you don't have to scroll all the way to the bottom
           //can be adjusted as needed for footers, etc,
            if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
                alert('Scrolling should be called now');
                $('#users').append(Next());
            }
        });

   </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:20:00.367

如果您尝试在用户滚动到*PAGE 的 END*时加载数据，是否可以？

然后你可以尝试： -

```
 <script>
        $(window).scroll(function () {
            //Will check if the user has reached bottom of a PAGE
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                alert('Just checking if End of the Scroll Works');
                $('#users').append(Next());
            }
        });

   </script> 
```

[更新]我尝试了同样的方法`$(document).ready(function () {));`，它就像魅力一样：-

```
 $(document).ready(function () {
        // Handler for .ready() called.
        $(window).scroll(function () {
            alert("Scrollbar Initiated");
            //Will check if the user has reached bottom of a PAGE
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                alert("Scrollbar appended");
                $('#users').append(Next());
            }
        });
    }); 
```

我尝试的完整代码如下所示：-

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<script>
    $(document).ready(function () {
        // Handler for .ready() called.
        $(window).scroll(function () {

            //Will check if the user has reached bottom of a PAGE
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                alert("Scrollbar appended");
                $('#users').append(Next());
            }
        });

        Next = function () {
            var text = "..............Appended to Lipsum......................";
            return text;
        };
    });

</script>
<body>
    <div id="users">
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sed tellus mauris, non tincidunt libero. Nullam eros tellus, posuere sit amet tempus laoreet, mattis fringilla nisl. Maecenas commodo arcu ac mauris sagittis nec iaculis justo vulputate. Nulla eros justo, consectetur fringilla iaculis gravida, eleifend quis metus. Suspendisse ut ante justo. Proin mollis pellentesque elit, in eleifend erat rhoncus vel. Aenean magna odio, pharetra in rhoncus et, venenatis sed nunc. Mauris convallis, nunc et gravida sagittis, leo urna porttitor lacus, vel pellentesque felis arcu eu metus. Suspendisse eget neque id risus pharetra sollicitudin.
        </p>
        <p>
            Fusce fermentum sollicitudin neque eu vestibulum. Donec adipiscing fermentum varius. Ut ut libero lacus, ut viverra dolor. Praesent bibendum elementum dui at consequat. Pellentesque pulvinar, lacus eu auctor aliquet, mi eros egestas orci, sit amet condimentum erat tortor nec felis. Aliquam erat volutpat. Donec fermentum molestie tempor. Donec non facilisis metus. Nam convallis tempor ipsum in scelerisque. Mauris cursus metus sed justo pretium fringilla. Nulla cursus scelerisque tellus vel ornare. Etiam sit amet sapien diam, ut commodo mi. Vestibulum nec enim id metus feugiat aliquet. Integer varius faucibus odio vel eleifend. Nunc convallis lectus at quam consequat ac accumsan nunc sodales.
        </p>
        <p>
            Nunc elementum augue quis velit hendrerit vel aliquam dui porta. Pellentesque sollicitudin tincidunt elit ac cursus. Sed iaculis, magna facilisis tincidunt ultricies, risus augue semper est, sit amet cursus lectus arcu iaculis elit. Nullam in massa felis, sit amet tempus urna. Vestibulum condimentum urna quis tortor volutpat sodales. Nullam sed nisl est, eget pulvinar elit. Pellentesque sagittis congue urna, nec molestie quam lacinia nec. Ut rhoncus fringilla tellus, eget molestie nibh mattis quis. Nunc nec purus elit. Cras vitae felis ac arcu iaculis egestas. Pellentesque aliquet, urna et ultrices porta, metus arcu consequat neque, quis vehicula quam magna sed risus. Nulla a nunc neque, sed fermentum risus. Vestibulum pellentesque elementum suscipit. Nulla dolor massa, lacinia vel vulputate ac, eleifend eu odio. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc lacinia justo in ante ornare consequat.
        </p>
        <p>
            Sed dapibus quam ut augue luctus rhoncus. Aliquam cursus semper velit ac feugiat. Nullam erat magna, adipiscing id pharetra vel, elementum ut odio. Phasellus facilisis, justo id adipiscing posuere, lectus tellus vehicula nunc, nec vulputate elit ligula vitae nisi. Nunc tristique velit et turpis viverra vel condimentum nibh varius. Vivamus magna ante, adipiscing et iaculis sed, rutrum sit amet diam. Nunc semper orci non risus rutrum eget ullamcorper nulla volutpat. Suspendisse auctor quam vitae nisl blandit vulputate. Praesent justo mi, condimentum non malesuada sit amet, molestie ac massa. Phasellus dictum tincidunt massa, sed dictum urna rutrum id. Praesent eu gravida risus.
        </p>
        <p>
            Nullam et neque tortor, ut accumsan nisl. Nullam pulvinar fermentum velit, eu tristique arcu sollicitudin eget. Praesent rhoncus malesuada mauris at fringilla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam ac massa lacus, et eleifend turpis. Proin fringilla imperdiet eros at venenatis. Fusce eu tempor lorem. Morbi ipsum tortor, condimentum quis pretium posuere, scelerisque sed purus. Maecenas in augue nunc, et ultrices risus. Fusce convallis tempus varius. Pellentesque eget nulla magna, ac ornare nibh. Morbi euismod dolor et nisl molestie in ornare eros gravida. Praesent sit amet lorem hendrerit diam ultrices egestas nec quis felis. Suspendisse nec nisl erat, ut ornare risus. Nulla nec pretium sapien.
        </p>
        <p>
            Proin urna tellus, commodo in rhoncus non, elementum aliquam nisl. In consequat pretium dolor vel sollicitudin. Aliquam quis mauris eu elit hendrerit ultrices a et justo. Phasellus nec sodales felis. Pellentesque venenatis mauris in magna fringilla vitae fringilla erat tempor. Proin posuere augue eu odio volutpat ultrices. Donec pulvinar interdum eros in auctor. Sed molestie, lacus id posuere elementum, erat odio eleifend ligula, vel euismod nibh libero sit amet dolor. Phasellus ac augue urna. Pellentesque feugiat suscipit semper. Pellentesque luctus tempus tincidunt. Ut scelerisque, eros et porta euismod, neque elit ornare quam, quis posuere sem nulla et velit. Nam purus neque, accumsan nec lacinia ut, varius vel arcu. Nullam at orci sem, et aliquet augue. Nam imperdiet suscipit feugiat. Suspendisse dictum mi eget magna commodo at tristique odio dictum.
        </p>
        <p>
            Ut a magna nec nulla ultrices faucibus. Praesent et est est. Aliquam vulputate lobortis tincidunt. Phasellus rhoncus imperdiet aliquet. Nullam id mi neque, sit amet tristique urna. Integer adipiscing, ipsum vel vestibulum vulputate, nulla ipsum blandit orci, et elementum quam lorem vitae mauris. Quisque consectetur ornare euismod. Nam vel iaculis risus. Proin lobortis dignissim lacus, sed feugiat lacus ultrices quis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
        </p>
        <p>
            Nullam bibendum posuere adipiscing. Suspendisse potenti. Praesent nisi sem, scelerisque et semper vitae, pulvinar eget nunc. Mauris ultrices ultricies sem, pulvinar convallis augue aliquet eu. Curabitur sed purus eu turpis congue egestas. Sed tempus orci quis elit hendrerit pretium. Nam dictum nibh non orci vestibulum elementum. Phasellus sit amet velit volutpat erat elementum venenatis. Quisque facilisis egestas libero, a gravida nibh rhoncus quis. Quisque risus diam, viverra eu lacinia eu, ultrices non eros. Curabitur placerat imperdiet neque, ut cursus purus posuere eu. Proin sed ipsum leo, vitae rutrum diam. Suspendisse placerat risus nec nisl adipiscing vitae sagittis ipsum hendrerit. Phasellus sollicitudin orci mauris, sit amet sollicitudin lectus. Vivamus et bibendum justo.
        </p>
        <p>
            Duis sed metus ac mi fermentum congue in vel nisl. Integer nunc magna, pulvinar a venenatis a, accumsan varius libero. Integer facilisis urna non enim viverra a porttitor ante lobortis. Pellentesque pharetra gravida porttitor. Morbi iaculis nibh sed urna malesuada ac facilisis mi vestibulum. Praesent euismod aliquam laoreet. Praesent at dolor eget augue convallis viverra vel ut ante. Praesent dictum est et nisi dictum ut vestibulum erat ullamcorper. Donec aliquam, quam in euismod pulvinar, augue mauris gravida lorem, a porta nunc felis at felis. Nam eget libero urna. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aenean iaculis massa sed purus tempor eu laoreet odio venenatis. Integer ultrices felis id ante pharetra bibendum. Sed at lorem vitae nunc vestibulum egestas. Fusce vel malesuada neque.
        </p>
        <p>
            Sed non pretium sem. Aliquam id elit malesuada mi commodo dignissim ac sit amet diam. Integer fringilla arcu id est tincidunt non vestibulum eros commodo. Sed dictum sapien in nisi dapibus id pretium ipsum rutrum. Nulla justo diam, auctor sit amet venenatis sed, volutpat non ante. Aenean eu tristique augue. Suspendisse nisl nibh, eleifend et adipiscing in, volutpat sed enim. Nunc eros urna, gravida vitae interdum eget, volutpat et ipsum. Suspendisse eget turpis varius magna pretium fermentum. Nam neque turpis, tristique ac semper eu, pellentesque sit amet dolor. Integer aliquam aliquam tortor, sit amet dignissim quam laoreet at. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec sit amet mi augue. Maecenas pretium accumsan sollicitudin.
        </p>
        <p>
            In at neque quam, sed sollicitudin eros. Praesent venenatis, neque quis molestie dapibus, nisl nibh tincidunt elit, sodales fermentum quam purus sed dolor. Nullam bibendum, nisl a scelerisque accumsan, dui nibh dapibus mi, ut pellentesque arcu massa aliquam lectus. Cras fermentum, libero eget pulvinar elementum, nibh orci fermentum justo, a bibendum lectus nisl sit amet felis. Mauris at lorem quis est auctor tristique. Quisque dui libero, congue vel fermentum vel, congue quis libero. Aenean cursus dolor at augue sodales rutrum. Aenean egestas vulputate nulla, at porta tortor venenatis id. Vivamus sit amet lectus vitae lorem pellentesque mollis sed a diam. Donec consectetur mi non sapien sagittis faucibus. Proin at lacus purus, in lobortis lorem. Praesent ac arcu justo, at elementum erat. Quisque vulputate accumsan turpis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis tempor erat vel tellus pellentesque tincidunt. Duis dolor mi, placerat id molestie laoreet, semper ut nibh.
        </p>
        <p>
            Suspendisse potenti. Sed eu risus dolor, vel semper libero. Sed accumsan est eget urna vulputate pretium. Integer varius venenatis quam. Praesent lacus diam, condimentum quis luctus in, convallis vitae est. Suspendisse potenti. Phasellus interdum mauris ut nisi feugiat sodales. Vivamus condimentum, leo sed placerat rhoncus, eros lacus ultricies sem, sit amet tempor libero nisl et lacus. In sed odio arcu. Proin id diam a lacus tristique posuere. Integer luctus urna et nulla ultrices interdum.
        </p>
        <p>
            Vestibulum a eros quam, et laoreet nisi. Duis convallis tincidunt augue nec pulvinar. Nunc malesuada urna ut sem placerat consequat. Nulla sollicitudin venenatis quam sollicitudin gravida. Curabitur elementum quam sit amet dolor euismod non dapibus elit tincidunt. In turpis augue, luctus et iaculis a, molestie at risus. Praesent sit amet ante ac ipsum fringilla dignissim. Aliquam elit orci, feugiat faucibus laoreet eu, sodales interdum velit. Aliquam dolor mi, pharetra vel suscipit id, tempor eu arcu. Aliquam sem turpis, rutrum quis porta sed, faucibus quis eros. Proin quis varius velit.
        </p>

    </div>

</body>
</html> 
```

# g++ - g++4.3和g++4.7系列ABI兼容吗？

> ID：16073766
> 
> 赞同：1
> 
> 时间：2013-04-18T02:58:26.670
> 
> 标签：g++, abi

另外，如果我用 c++11 标志编译一段代码，它会与另一个没有 c++11 标志编译的代码兼容吗？在哪里可以找到兼容性列表？

# maven - Maven本地安装工件在战争构建后不包括远程依赖项

> ID：16073767
> 
> 赞同：1
> 
> 时间：2013-04-18T02:58:37.923
> 
> 标签：maven

我正在构建一个目标 A.war，而 A.war 依赖于 B.jar。

B.jar 已在本地安装。B.jar 有一些在远程存储库中的依赖项。

当 A.war 被构建（它说成功）时，B.jar 的任何依赖项都不会包含在最终目标 A.war 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:50:19.787

你说的`B.jar`是“本地安装”。目前尚不清楚这意味着什么。

如果`B.jar`Maven 工件和“本地安装”的意思是“安装在本地 Maven 存储库中”，那么您应该查看`B.jar`'s`pom.xml`文件并检查`dependencies`元素。只有范围为`compile`,`runtime`的依赖项`test`才会最终包含在`A.war`.

您可以`mvn dependency:tree`针对`B`模块执行并查看如何计算依赖关系。

如果`B.jar`不是 Maven 工件，那么 Maven 就无法真正知道`B.jar`依赖项是什么。如果您碰巧将“依赖项”称为“`MANIFEST.MF`文件中的条目”，那么，这对 Maven 来说还不够好。

# windows - 装配 masm 无法弄清楚如何执行 if not less then 语句

> ID：16073769
> 
> 赞同：0
> 
> 时间：2013-04-18T02:59:17.827
> 
> 标签：windows, vb.net, assembly, if-statement, masm

你如何在汇编 masm 中做一个 if not less then 语句

我在 vb.net 中有这段代码

```
 If Not variable1 < variable2 Then
                count += 1
            End If

If Not variable1 < variable3 Then
                count += 1
            End If

msgbox.show(count) 
```

对于此代码计数 = 1

我尝试了以下所有代码，但它不起作用。它要么在最后给我 count = 2，要么在最后给我 count = 0。它应该给我 count = 1

这是组装masm的代码

```
.data

variable1        dd ?
variable2       dd ?
variable3       dd ? 
```

这就是假设发生的事情。我从文本文件中读取了 3 个值，它们是 500,109,500，它们被存储到 3 个变量中，所以

```
variable1 = 500
variable2 = 109
variable3 = 506 
```

然后我需要按从小到大的顺序列出这些，所以我尝试比较这些。

我尝试了所有这些变化，但都没有奏效

```
 mov esi, offset variable1
    mov ecx, offset variable2

    .if esi > ecx
    inc count
    .endif

 mov ecx, offset variable3

.if esi > ecx
    inc count
    .endif 
```

* * *

```
 .if variable1 > offset variable2
        inc count
        .endif

.if variable1 > offset variable3
        inc count
        .endif 
```

* * *

```
 mov esi, offset variable1
        mov ecx, offset variable2

    cmp esi,ecx
    JB n2
    inc count
    n2:

mov ecx, offset variable3

    cmp esi,ecx
    JB n3
    inc count
    n3: 
```

* * *

```
 mov esi, offset variable1
        mov ecx, offset variable2

    cmp esi,ecx
    JG n3
    inc count
    n3:

mov ecx, offset variable3

    cmp esi,ecx
    JG n4
    inc count
    n4: 
```

* * *

```
mov esi, [variable1]
mov ecx, [variable2]
cmp esi, ecx
ja n1
inc Level3DNS1rank
n1:

mov ecx, [variable3]
cmp esi, ecx
ja n2
inc Level3DNS1rank
n2: 
```

如何将上述 vb.net 代码转换为 masm 程序集

谢谢你

**更新**

这是这两个问题的答案

我需要做的是将字符串转换为整数。我使用此代码为我刚刚更改为`invoke atodw,ADDR variable1`的 if not in assembly 执行此操作`if not variable1 < variable2``if variable1 > variable2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:26:12.490

也许：

```
mov esi, [variable1]
mov ecx, [variable2]
cmp esi, ecx
jge n2 
```

## 更新

啊哈。我现在看到了问题。你有：

```
variable1        db "500",0
variable2       db "109",0
variable3       db "506",0 
```

它作为（十六进制字节）存储在内存中：

```
variable1  35 30 30 00
variable2  31 30 39 00
variable3  35 30 36 00 
```

但是当你从内存中加载一个寄存器时，它会以小端方式加载它。所以当你有：

```
mov esi, [variable1]
mov ecx, [variable2] 
```

`esi`is`00303035`和`ecx`is的内容`00393031`。最后一个值加载为`00363035`.

您正在尝试将字符串加载为无符号 32 位值。你真的想比较字符串吗？

# join - Crystal Reports & Raiser's Edge：从 2 个连接表中选择数据

> ID：16073771
> 
> 赞同：0
> 
> 时间：2013-04-18T02:59:37.820
> 
> 标签：join, crystal-reports, command-objects

我有一个奇怪的问题。我将数据存储在 2 个表中。

表 1：包含有关个人的数据

*   个人ID
*   出生日期
*   电子邮件

表 2：包含拆分为 3 个字段的个人名称，每个字段都有一个键。

*   个人ID
*   名称类型
*   姓名

这意味着对于 NameType = 1，我会得到姓氏，对于 NameType = 2，我会得到中间名，对于 NameType = 3，我会得到名字。

我需要创建一个水晶报表，该报表将在一行中列出此人的姓名，例如

姓氏 + 名字 + 中间名

我遇到的问题与如何提取这些数据和连接有关。

如果我只是在这两个表之间创建连接作为左外连接，那么我无法选择要选择的 NameType。这意味着有时我会得到姓氏，有时会得到中间名等。似乎连接不一致。此外，我无法迭代预期的 3 个值，所以似乎我每次只能拉同一个。

我试图通过添加一个命令来解决这个问题，该命令将依次从第二个表中选择每个名称。但是，此报告旨在集成到不支持命令对象的称为 Raiser's Edge 的东西中。换句话说，命令对象不是我的选择。

那么我在这里有什么选择呢？我不喜欢使用我知道会工作但有性能开销的子报表。有没有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:38:58.683

最简单的方法是分组`IndividualID`，然后通过变量跟踪名字、中间名和姓氏。真的，无需担心记录选择或加入。尝试这样的事情：

```
//Formula for group header
whileprintingrecords;
stringvar first := "";
stringvar middle := "";
stringvar last := "";

//Formula for details section
whileprintingrecords;
stringvar first;
stringvar middle;
stringvar last;
select {table2.NameType}
case 1 : first := {table2.Name}
case 2 : middle := {table2.Name}
case 3 : last := {table2.Name}

//Formula for group footer (the section to be displayed)
whileprintingrecords;
stringvar first;
stringvar middle;
stringvar last;

last + ", " + first + " " + middle 
```

# asp.net - 为什么我没有得到 .css 智能感知

> ID：16073780
> 
> 赞同：2
> 
> 时间：2013-04-18T03:01:26.333
> 
> 标签：asp.net, intellisense, single-page-application, durandal, hottowel

**问：**为什么我`.css`在 Durandal`~/App/Views/###.html`页面中编码 HTML 时没有获得智能感知。

**重新创建的步骤：** 在 Visual Studio Professional 2012 中，我开始了一个“空”的 ASP.NET Web 应用程序，并将[*Microsoft ASP.NET Web Optimization Framework 1.0.0*](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0) [Nuget](http://nuget.org/)包添加到我的解决方案中。我还包括[*了 Durandal 1.2.0*](http://nuget.org/packages/Durandal/)和[*Bootstrap 2.3.1*](http://nuget.org/packages/Twitter.Bootstrap/)。

将上述引用添加到我的应用程序后，我在[Nuget](http://nuget.org/)安装[*Durandal*](http://nuget.org/packages/Durandal/)包时生成的文件夹中添加了一个`shell.html`页面。`~/App/`[](http://nuget.org/packages/Durandal/)

 *作为旁注，`.css`一旦我调试应用程序，这些文件就可以正常工作。我的文件夹中有多个`.css`文件，包括`Bootstrap.css`文件（随[*Bootstrap 2.3.1*](http://nuget.org/packages/Twitter.Bootstrap/)安装（如上所述）），它们在运行时引用和使用文件。`~/Content/``~/App_Start/BundleConfig.cs``.css`

最后，当我阅读[*PluralSight*](http://pluralsight.com/training/) [*单页应用程序 JumpStart*](http://pluralsight.com/training/courses/TableOfContents?courseName=single-page-apps-jumpstart&highlight=john-papa_spajs-m1-spa%2a1,0#spajs-m1-spa)教程并进入[*使用 Durandal.js 编写 Shell*](http://pluralsight.com/training/courses/TableOfContents?courseName=single-page-apps-jumpstart&highlight=john-papa_spajs-m1-spa%2a1,0#spajs-m1-spa)部分时，我们清楚地看到我/我们应该获得智能感知，但我没有。

谢谢你。

**更新：** 我刚刚得知“*[问题已提交给 Visual Studio 产品团队进行分类和解决。](http://connect.microsoft.com/VisualStudio/feedback/details/790808/no-intellisense-in-html-editor-to-show-the-classes-in-my-css-file)* ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T20:02:16.517

CSS 应该在 VS 2012 中工作。我也总是安装 Web Essentials，因为它有很大帮助（它就像版本之间 VS 功能的孵化器）

对于 JavaScript 智能感知......当使用 require.js 时，更难得到它。我发现最好的方法是使用 Resharper 的 VS 插件。它给了我对 JavaScript 的智能感知，即使在使用 require.js 时也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T04:16:35.583

我通过在 Site.Master 中添加明确的 bootstrap.css 引用解决了这个问题（我在我的应用程序中使用母版页）

```
<head runat="server">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%: Page.Title %> - My ASP.NET Application</title>

    <asp:PlaceHolder runat="server">
        <%: Scripts.Render("~/bundles/modernizr") %>
    </asp:PlaceHolder>
    <webopt:bundlereference runat="server" path="~/Content/css" />
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="Content/bootstrap.css" rel="stylesheet" />

</head>
```*

# ruby-on-rails - Webrick Rails 服务器无法正常运行

> ID：16073784
> 
> 赞同：-1
> 
> 时间：2013-04-18T03:01:35.850
> 
> 标签：ruby-on-rails, webrick, mysql2

在过去的 6 个小时里，我一直在解决诸如修改 $PATH、安装 Gems 等问题，以最终得到应有的一切。但是在我使用它的组件创建项目文件夹并尝试运行服务器之后，我收到了这条消息：-

```
\KAMAL$ ls
Gemfile     README.rdoc app     config.ru   doc     log     script      tmp
Gemfile.lock    Rakefile    config      db      lib     public      test        vendor
\KAMAL$ rails server
=> Booting WEBrick
=> Rails 3.2.13 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': Access denied for user 'root'@'localhost' (using password: NO) (Mysql2::Error)
    from /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
    from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.13/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new' 
```

## “以及许多与上面相同的行”

宝石清单 *** 当地宝石 ***

```
actionmailer (3.2.13)
actionpack (3.2.13)
activemodel (3.2.13)
activerecord (3.2.13)
activeresource (3.2.13)
activesupport (3.2.13)
arel (3.0.2)
builder (3.0.4)
bundler (1.3.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.6.2)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.2)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.2.1)
json (1.7.7)
mail (2.5.3)
mime-types (1.22)
multi_json (1.7.2)
mysql2 (0.3.11)
polyglot (0.3.3)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.13)
railties (3.2.13)
rake (10.0.4)
rdoc (3.12.2)
rubygems-update (2.0.3)
sass (3.2.7)
sass-rails (3.2.6)
sprockets (2.2.2)
thor (0.18.1)
tilt (1.3.7)
treetop (1.4.12)
tzinfo (0.3.37)
uglifier (2.0.1)
webrick (1.3.1) 
```

* * *

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:12:21.280

This log entry

```
Access denied for user 'root'@'localhost' (using password: NO) (Mysql2::Error) 
```

Shows that you are using the user root at localhost without password as database. MySQL don't find this as a valid user. the following line should issue the same error message:

```
mysql -u root -h localhost 
```

So check your database user/password in your `db/database.yml` file

# ruby-on-rails - 从 Rails 3 中的“_user.html.erb”获取未定义的方法错误

> ID：16073786
> 
> 赞同：0
> 
> 时间：2013-04-18T03:01:53.903
> 
> 标签：ruby-on-rails, ruby, rubygems

如果我收到此错误

`undefined method impressionist_count' for nil:NilClass`在尝试在 _user.html.erb 中使用这一行之后

```
<%= @user.impressionist_count+@user.microposts.sum(&:impressionist_count) %> 
```

需要在哪里定义？我已经在 user.rb 中有这个

```
def impressionist_count
    impressions.size
  end 
```

我在各种助手中尝试过，但无济于事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:06:01.650

当您“渲染@users”时，每个用户都可以作为局部变量“user”访问。您的部分应如下所示：

```
<%= user.impressionist_count+user.microposts.sum(&:impressionist_count) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:04:38.130

方法已定义，但`@user`对象未定义。这应该已经在控制器中分配，以便它在您的视图中工作，或者在您渲染它时应该已经为您的部分提供了一个对象。

也许你有类似的东西：

```
<%= render(:partial => 'user') %> 
```

如果您有一个`user`变量，您可能需要的是：

```
<%= render(:partial => 'user', :object => user) %> 
```

包括短语“ `for nil`”在内的错误表明未正确使用未定义的值。

# iphone - 代码适用于 iPhone 5，不适用于 iPod touch 4

> ID：16073795
> 
> 赞同：4
> 
> 时间：2013-04-18T03:02:53.903
> 
> 标签：iphone, ios, objective-c

我正在不同的设备上测试我的应用程序。该应用程序在我的 iPhone 5 上运行良好，但是，当我在 iPod touch 4g 上测试它时，我得到了这个错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***  [__NSArrayMinsertObject:atIndex:]: object cannot be nil'
*** First throw call stack:
(0x33f252a3 0x3bba397f 0x33e6f8d9 0x51e25 0x35e180c5 0x35e1814d 0x35e180c5 0x35e18077 0x35e18055 0x35e1790b 0x35e17e01 0x35d405f1 0x35d2d801 0x35d2d11b 0x37a1f5a3 0x37a1f1d3 0x33efa173 0x33efa117 0x33ef8f99 0x33e6bebd 0x33e6bd49 0x37a1e2eb 0x35d81301 0x4fc8d 0x3bfdab20)
libc++abi.dylib: terminate called throwing an exception 
```

崩溃的代码是这个：

```
/********/
    NSMutableArray *titulosCampoTextArray = [[NSMutableArray alloc] init];
    for (int i = 0; i < campos.count; i++) {

        SignupCell *cell = (SignupCell*)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
        [titulosCampoTextArray addObject:cell.textField.text];
    }
/********/ 
```

我在 UIView 内的 UITableView 上使用自定义原型单元 (SignupCell.h)。

找不到错误，或者如何修复它。

**编辑：**两台设备都运行 iOS 6.1.3，我使用的是 Xcode 4.6.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:33:37.450

`UITableView`的`-cellForRowAtIndexPath:`方法返回`nil`，如果当你调用它时单元格在屏幕上不可见。

我的猜测是，在 iPhone 5 上，您的表格可以一次显示所有行，而在较短的 iPod touch 上，最后一两个单元格不可见，`-cellForRowAtIndexPath:`因此会返回`nil`，这会使您的应用程序崩溃。

您不应该依赖`-cellForRowAtIndexPath`请求模型数据！您的视图控制器负责数据，而不是表视图。

`-tableView:cellForRowAtIndexPath:`使用与在视图控制器的数据源方法中设置表格视图单元格文本相同的方式访问模型数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:09:20.757

只需这样做：

```
NSMutableArray *titulosCampoTextArray = [[NSMutableArray alloc] init];
for (int i = 0; i < campos.count; i++) {

    SignupCell *cell = (SignupCell*)[self.tableView 
        cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
    if (cell.textField.text) {
        [titulosCampoTextArray addObject:cell.textField.text];
    }
} 
```

我不知道为什么您显然可以`nil`在 iPhone 5 上添加，但不能在 iPod 上添加。可能是由于某些其他原因，当您的应用程序在 iPhone 5 上运行时，您从未碰巧拥有`nil`价值。`cell.textField.text`

# deployment - 应用程序 URL 部署后出现 404 错误

> ID：16073798
> 
> 赞同：1
> 
> 时间：2013-04-18T03:03:29.410
> 
> 标签：deployment, http-status-code-404, tomcat6, war

我正在使用 tomcat v.6.0 。我已成功将 .war 文件部署为管理器。我可以在tomcat的webapps目录中看到展开的文件夹。我可以访问`http://localhost:8080`. 但是当我尝试访问 /myapp 时，我收到 404 错误。当我在 Eclipse 上检查控制台（这是我处理 tomcat 和 myapp 的地方）时，我看到以下内容：

2013 年 4 月 17 日晚上 10:56:05 org.apache.catalina.startup.ContextConfig applicationWebConfig 严重：在 jndi:/localhost/submitServer/WEB-INF/web.xml org.xml.sax 的应用程序 web.xml 文件中解析错误.SAXParseException; systemId: jndi:/localhost/submitServer/WEB-INF/web.xml；行号：466；列号：19；(466, 19 处的错误：过滤器映射指定了未知的过滤器名称 SourceTextFilter

我检查了 web.xml 文件中的第 466 行，一切都很好

```
 463 <filter-mapping>
    464      <filter-name>SourceTextFilter</filter-name>
    465      <url-pattern>/view/project.jsp</url-pattern>
    466 </filter-mapping> 
    467 <filter-mapping>
    468 <filter-name>SourceTextFilter</filter-name> 
```

我在互联网和 stackoverflow 上搜索了类似的问题及其解决方案，但似乎没有一个对我有帮助。

# vb.net-2010 - NullReferenceException 不受管理。“表格”不返回任何内容。为什么？

> ID：16073799
> 
> 赞同：-1
> 
> 时间：2013-04-18T03:03:32.247
> 
> 标签：vb.net-2010

这是我的代码。这是我第一次在 vb.net。

```
Private Sub Accountnum_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Accountnum.KeyPress
    Dim index As Long = 0
    If Asc(e.KeyChar) = 13 Then
        Do While index <= 111000
            If Accountnum.Text = ds.Tables("dbo.AccountMaster").Rows(index).Item("AccountNumber").ToString Then
                Nameconsumer.Text = ds.Tables("dbo.AccountMaster").Rows(index).Item("ConsumerName")
                Address.Text = ds.Tables("dbo.AccountMaster").Rows(index).Item("ConsumerAddress")
            End If
        Loop
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:12:37.007

Null Reference 错误仅表示您正试图对尚未设置值的对象执行某些操作。人们在使用带有方便点符号的语言时忽略这些错误的来源并不少见。

看一下片段中第 5 行的示例： ds.Tables("dbo.AccountMaster").Rows(index).Item("AccountNumber").ToString

这并不少见，但您在这里将四个引用链接在一起并假设它们都是有效的。查看发生错误的行并检查语句中的每个组件的值。在上面的行中，您需要检查： - ds - ds.Tables("dbo.AccountMaster") - ds.Tables("dbo.AccountMaster").Rows(index) - 等等。

如果其中任何一个为空，那么您尝试对其结果执行的后续操作（例如 ToString）将导致空引用异常。

# c++ - 获取字符串流 C++ 的剩余部分

> ID：16073803
> 
> 赞同：6
> 
> 时间：2013-04-18T03:04:46.073
> 
> 标签：c++, string, stringstream

我有一个字符串流，我需要将第一部分取出，然后将其余部分放入单独的字符串中。例如，我有字符串`"This is a car"`，我需要以 2 个字符串结尾：`a = "This"`和`b = "is a car"`.

当我使用 stringstream 获取第一部分使用`<<`时，然后我使用`.str()`转换为字符串，这当然给了我整个东西“ `This is a car"`。我怎样才能让它按我想要的方式播放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T03:11:25.263

```
string str = "this is a car";

std::stringstream ss;
ss << str;

string a,b;
ss >> a;
getline(ss, b); 
```

**编辑：**更正感谢@Cubbi：

```
ss >> a >> ws; 
```

**编辑：**

此解决方案在某些情况下（例如我的测试用例）可以处理换行符，但在其他情况下会失败（例如 @rubenvb 的示例），而且我还没有找到一种干净的方法来修复它。**我认为@tacp 的解决方案更好、更健壮，应该被接受。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T03:11:46.290

您可以这样做：首先获取整个字符串，然后获取第一个单词，然后使用`substr`获取其余部分。

```
 stringstream s("This is a car");
 string s1 = s.str();
 string first;
 string second;

 s >> first;
 second = s1.substr(first.length());
 cout << "first part: " << first <<"\ second part: " << second <<endl; 
```

在 gcc 4.5.3 输出中对此进行测试：

```
first part: This 
second part: is a car 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:10:49.637

`getline`读出第一位后，您可以在流上进行操作....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T21:25:50.233

另一种方法是使用 rdbuf：

```
stringstream s("This is a car");
string first;
stringstream second;

s >> first;
second << s.rdbuf();
cout << "first part: " << first << " second part: " << second.str() << endl; 
```

如果您最终要将结果输出到流而不是字符串，这可能是一个不错的选择。

# vim - 如何阻止 Vim 创建/打开新文件？

> ID：16073807
> 
> 赞同：10
> 
> 时间：2013-04-18T03:05:30.903
> 
> 标签：vim, vi

当我们给一个不存在的文件命名时，Vim 会创建新文件。这对我来说是不可取的，因为有时我给出错误的文件名并且无意打开文件，然后关闭它。

有没有办法阻止 Vim 打开新文件？例如，当我这样做时`vi file1`，它应该说`File doesn't exist`并留在`bash`终端上（不打开`vi`窗口）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T03:23:44.203

您可以将此功能添加到您的 .bashrc （或等效）中。它在调用 vim 之前检查它的命令行参数是否存在。如果你真的想创建一个新文件，你可以通过`--new`覆盖检查。

```
vim() {
    local args=("$@")
    local new=0

    # Check for `--new'.
    for ((i = 0; i < ${#args[@]}; ++i)); do
        if [[ ${args[$i]} = --new ]]; then
            new=1
            unset args[$i]   # Don't pass `--new' to vim.
        fi
    done

    if ! (( new )); then
        for file in "${args[@]}"; do
            [[ $file = -* ]] && continue   # Ignore options.

            if ! [[ -e $file ]]; then
                printf '%s: cannot access %s: No such file or directory\n' "$FUNCNAME" "$file" >&2
                return 1
            fi
        done
    fi

    # Use `command' to invoke the vim binary rather than this function.
    command "$FUNCNAME" "${args[@]}"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T03:08:06.500

`:w`仅当您使用写入（例如，或`:x`，等效于`:wq`）选项时，它才会保存文件。

而是退出`:q`，并且不会创建任何文件。

# android - 使用 Cloud Endpoints for Google App Engine 对 Android 应用进行本地测试

> ID：16073815
> 
> 赞同：5
> 
> 时间：2013-04-18T03:06:31.017
> 
> 标签：android, google-app-engine, google-cloud-endpoints, endpoints-proto-datastore

我正在开发一个 Android 应用程序，它在 Google App Engine（Python）上使用 Google Cloud Endpoints 作为其后端。Android 应用程序授权用户在 Android 设备上使用 Google Play 服务，这一切都非常有效。

但是，既然我有实际用户，我希望能够在将任何应用程序引擎 API 更改部署到生产之前在本地测试这一切，而且我还没有弄清楚如何让 Android 应用程序与我的本地开发服务器通信任何地方。[测试建议](https://developers.google.com/appengine/docs/python/endpoints/test_deploy)建议我只是对API Explorer 进行一些手动修改，但由于我使用 Endpoints Proto Datastore 作为我的 API，这使得 Android 开发变得容易，它也使 API Explorer 基本上没用，因为我需要的调用制作比我手工生成的要复杂得多。

[这个问题](https://stackoverflow.com/questions/13416777/testing-google-cloud-endpoints-locally)的一个答案表明有一种方法可以将 Android 客户端指向本地服务器，但是虽然我可以使用 --host 参数让 dev_appserver 的默认服务器侦听 localhost 以外的其他东西，但我似乎无法找到一种对 API 服务器执行相同操作的方法。即使我能做到这一点，它也可能只是为我的 Android 应用程序建立完整的端到端本地测试设置的第一步。

有人可以发布有关我如何执行此操作的更多详细信息，或者缺少详细信息，请告诉我测试在 App Engine 上使用 Google Cloud Endpoints 的 Android 应用程序的最佳实践？提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T04:33:43.480

好的，终于成功了，谢谢你的提示，丹！以下是可以节省我几个小时的剩余细节 - 希望这对其他人有帮助。

1）正如我之前所预料和提到的，dev_appserver.py 需要使用 --host=0.0.0.0 运行，以便它可以在本地网络上监听。

2）为了正确解析 ID 令牌以使用户身份验证工作，您需要安装 PyCrypto 库 - 默认情况下未安装，因此仅在 app.yaml 中安装它是不够的。[我在这里](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)找到了适用于 Windows 的二进制文件。

3）然后，在我生成的 Tictactoe.java 等效类中，我必须将 DEFAULT_ROOT_URL 更改为`http://<my-local-machine>:8080/_ah/api/`（这是我的本地计算机运行的位置），以便请求进入本地网络。或者（也许侵入性更小），您可以使用 builder.setRootUrl 从您初始化构建器的任何位置到相同的地址。这样你就不会弄乱你生成的类。

4) 我还必须做出 Dan 提到的[改变](https://stackoverflow.com/questions/15393363/how-to-disable-gzipcontent-in-cloud-endpoints-builder-in-android)。

做完这四件事后，现在一切似乎都正常了，我可以在本地测试我的应用程序 - 万岁！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:17:09.207

在本地环境中，dev_appserver 是 API 服务器。如果您已将其配置为可以从 localhost 以外的机器（即网络上的另一台机器/设备）访问它，那么 API 请求也应该可以访问。

但是，当前本地服务器和 gzip 请求存在[问题。](https://code.google.com/p/googleappengine/issues/detail?id=9140)在解决此问题之前，您需要在 Android 应用程序的客户端库中禁用 gzipping（请参阅这篇[文章](https://stackoverflow.com/questions/15393363/how-to-disable-gzipcontent-in-cloud-endpoints-builder-in-android)）。

# python - 查询多个多对多字段

> ID：16073816
> 
> 赞同：0
> 
> 时间：2013-04-18T03:06:35.380
> 
> 标签：python, django

我有一个模型，`Entry`有一个`ManyToMany`字段：

```
tags = models.ManyToManyField(Tag) 
```

`Tag`模型很简单：

```
class Tag(models.Model):

    name = models.CharField(max_length=25)

    def __unicode__(self):
        return self.name 
```

我想创建一个函数，`getEntryByTags`它接受标签名称列表并返回具有这些标签的任何条目。如果我知道标签的数量和每个标签的名称，这将是微不足道的：

```
Entry.objects.filter(tags__name="tech").filter(tags__name="music").filter(tags__name="other") 
```

但由于这将基于用户输入，并且标签编号是可变的，所以我不确定如何继续。我将如何遍历一个多项目列表以获取一个对象，该对象包含每个 ManyToMany 对象以及列表中表示的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:12:34.667

你可以试试，

```
from django.db.models.query_utils import Q

tag_name_list = xxx # dynamic tag name list based on user input

query_list = [Q(tags__name=tag_name) for tag_name in tag_name_list]
query_set = Entry.objects
for query in query_list:
    query_set = query_set.filter(query)
return query_set 
```

# php - 在 JavaScript 中检查 PHP 数组是否为空

> ID：16073819
> 
> 赞同：0
> 
> 时间：2013-04-18T03:07:13.967
> 
> 标签：php, javascript, arrays

嗨，我有一个表单，用户可以在其中将一本书或多本书输入数据库。每当用户输入一本书并忘记输入标题时，就会出现 JavaScript 警报并提醒他输入标题。现在，如果他有两本书或更多本书并且忘记输入标题，则不会显示警报。

这是我的 JavaScript 函数。

```
function validateForm() 
{ 
 var a=document.forms["submit_books"]["title"].value; 
  if (a==null || a=="") 
    { 
    alert("Please enter a Title"); 
    return false; 
    }

 var status = false;     
 var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
      if (document.submit_books.email.value.search(emailRegEx) == -1) {
           alert("Please enter a valid email address.");
           return false;
      }
} 
```

这是我的 PHP 代码

```
<form method="post" name="submit_books" onsubmit="return validateForm()" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                <?php for ($i=1; $i<$num_of_books + 1; $i++){
                    echo "<strong>Book # $i</strong><br><br>";
                    ?>

                    <label for="title">*Title</label>: <input type="text" id="title" size="60" name="title[]" autocomplete="off"/><br><br>

              <?php }?>
<input type="submit" name="submit" value="Submit Books">
</form> 
```

我什至尝试将 PHP 数组放入 JavaScript 数组。

```
 <?
$js_array = json_encode($title);
echo "var title = ". $js_array . ";\n";
?>
var index = 1;
if( index < title.length)
{
    alert("Please enter a Title"); 
    return false; 
} 
```

必须有一种更简单的方法来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:10:34.377

你应该做

```
var index = 1;
if( index > title.length )
{
    alert("Please enter a Title"); 
    return false; 
} 
```

由于如果title.length = 0则没有记录，即如果1 > 0则没有标题。

你也可以检查

```
 if( title.length === 0 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:14:43.350

你可以这样做：

```
 <?
echo "var title_length = ". count($title) . ";\n";
?>
var index = 1;
if( index > title_length)
{
    alert("Please enter a Title"); 
    return false; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:23:16.693

尝试在 html 表单中使用

```
<label> 
<span>Book Title: (required)</span> 
<input name="book" type="text" placeholder="Please enter your books title" required autofocus> 
</label> 
```

然后使用javascript进行验证

```
(function() {

    // Create input element for testing
    var inputs = document.createElement('input');

    // Create the supports object
    var supports = {};

    supports.autofocus   = 'autofocus' in inputs;
    supports.required    = 'required' in inputs;
    supports.placeholder = 'placeholder' in inputs;

    // Fallback for autofocus attribute
    if(!supports.autofocus) {

    }

    // Fallback for required attribute
    if(!supports.required) {

    }

    // Fallback for placeholder attribute
    if(!supports.placeholder) {

    }

    // Change text inside send button on submit
    var send = document.getElementById('submit');
    if(send) {
        send.onclick = function () {
            this.innerHTML = '...Processing';
        }
    }

})(); 
```

# erlang - Mnesia 折叠记录，引用第二个表

> ID：16073821
> 
> 赞同：2
> 
> 时间：2013-04-18T03:07:18.133
> 
> 标签：erlang, mnesia

我有一个这样的架构：

```
-record(sale, {
  id,
  price,
  tax,
  sku,
  datetime
})

-record(refund, {
  id,
  sale_id,
  datetime
}) 
```

表中有大约 600,000 条记录，`sale`表中有大约 20,000条记录`refund`。

我需要折叠销售表中的数据，将每个数据`sku`与收到的金额（`price`）和退款金额（通过检查`#refund.sale_id`）分组。

有没有一种有效的方法可以使用 Mnesia 来避免 N+1 查询问题，对于`sale`折叠操作中的每个，我需要再次调用 mnesia 以查看是否存在退款？某种方式做一个幼稚的加入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:15:24.603

是你的`sale`桌子`ordered_set`吗？如果是，您可以像往常一样进行合并连接。首先获取所有`refund`并按`sale_id`. 然后只需折叠`sale`并按键累积到 dict 或 ets 中`sku`。

# c# - 当 PostBackUrl 属性设置为另一个页面时，服务器端单击事件不会在 LinkBut ton 上触发

> ID：16073823
> 
> 赞同：0
> 
> 时间：2013-04-18T03:07:36.890
> 
> 标签：c#, visual-studio-2010, linkbutton

我使用 VS 2010 在我的网页上放置了一个名为“Logout”的链接按钮控件。当用户按下“Logout”链接按钮时，我希望系统做两件事。首先是触发服务器端点击事件来做一些事情，例如清除所有会话变量等。其次是将用户重定向到另一个页面，例如 logon.aspx

所以我写了以下代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        LinkButton1.PostBackUrl = "LogOn.aspx";
    }
}

protected void LinkButton1_Click(object sender, EventArgs e)
{
    Session.Abandon(); 
    ....
    ....

} 
```

但是当程序运行时，任何用户点击链接按钮。LinkBut​​ton1_Click 的代码永远不会被执行，因为页面已经被重定向到 Logon.aspx 页面并且永远不会执行 LinkBut​​ton1_Click()

我的问题是为什么 LinkBut​​ton1 提供 PostBackUrl 属性和服务器端点击事件，但似乎他们并没有很好地配合~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:16:53.177

这是因为通过设置 PostBackUrl 您是在说当单击按钮时您希望它发布到 LogOn.aspx 页面而不是回发到自身。由于您发布到 LogOn.aspx，您将永远不会触发该事件。

相反，您应该在您的 session.abandon 之后在您的按钮单击中使用某种类型的重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:16:45.890

您可以检查是否有`LinkButton1_Click`订阅 a`LinkButton1`的事件`OnClick`吗？

然后对于您的第二个问题，因为您使用的是 ASP.Net，您可以使用您的 处理此问题，`Global.asax`每次会话被破坏时，您都会将任何用户重定向到登录页面。请参阅下面的参考链接：

1.) [SessionStateModule.End 事件](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemodule.end.aspx)

2.)[在 Global.asax 中使用 Session](http://forums.asp.net/t/1297917.aspx/1)

# hadoop - 从本地非 Hadoop 机器将数据上传到在 Amazon EC2 中运行的 HDFS

> ID：16073831
> 
> 赞同：2
> 
> 时间：2013-04-18T03:09:03.280
> 
> 标签：hadoop, amazon-ec2, hdfs

我在 Amazon EC2 上设置了一个包含两个节点的 hadoop 集群。它运作良好。我可以使用hadoop api（附加java程序）从主节点或与hadoop集群相同的亚马逊区域中的其他实例将数据上传到HDFS。

但是，当我想从我的本地非 hadoop 机器上执行此操作时，结果如下所示：

然后我登录到 hadoop 名称节点以使用命令行进行检查。创建文件夹“testdir”，但上传文件“myfile”的大小为0。

==================这是分隔符============================= ==

**这些是例外**

```
Apr 18, 2013 10:40:47 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream createBlockOutputStream
INFO: Exception in createBlockOutputStream 10.196.153.215:50010 java.net.ConnectException: Connection timed out
Apr 18, 2013 10:40:47 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream nextBlockOutputStream
INFO: Abandoning block blk_560654195674249927_1002
Apr 18, 2013 10:40:47 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream nextBlockOutputStream
INFO: Excluding datanode 10.196.153.215:50010
Apr 18, 2013 10:41:09 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream createBlockOutputStream
INFO: Exception in createBlockOutputStream 10.195.171.154:50010 java.net.ConnectException: Connection timed out
Apr 18, 2013 10:41:09 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream nextBlockOutputStream
INFO: Abandoning block blk_1747509888999401559_1002
Apr 18, 2013 10:41:10 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream nextBlockOutputStream
INFO: Excluding datanode 10.195.171.154:50010
Apr 18, 2013 10:41:10 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer run
WARNING: DataStreamer Exception: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /user/ubuntu/testdir/myfile could only be replicated to 0 nodes, instead of 1
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

    at org.apache.hadoop.ipc.Client.call(Client.java:1070)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.addBlock(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at $Proxy1.addBlock(Unknown Source)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3510)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3373)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2600(DFSClient.java:2589)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2829)

Apr 18, 2013 10:41:10 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream processDatanodeError
WARNING: Error Recovery for block blk_1747509888999401559_1002 bad datanode[0] nodes == null
Apr 18, 2013 10:41:10 AM org.apache.hadoop.hdfs.DFSClient$DFSOutputStream processDatanodeError
WARNING: Could not get block locations. Source file "/user/ubuntu/testdir/myfile" - Aborting...
Exception in thread "main" org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /user/ubuntu/testdir/myfile could only be replicated to 0 nodes, instead of 1
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

    at org.apache.hadoop.ipc.Client.call(Client.java:1070)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.addBlock(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at $Proxy1.addBlock(Unknown Source)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3510)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3373)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2600(DFSClient.java:2589)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2829) 
```

==================这是分隔符============================= ==

**这是我的java代码**

```
Path output = new Path("testdir");
Configuration conf = new Configuration();
conf.set("fs.default.name", "hdfs://ec2-23-22-12-173.compute-1.amazonaws.com:9000");
conf.set("hadoop.job.user",ubuntu);

FileSystem.mkdirs(FileSystem.get(conf), output, FsPermission.valueOf("drwxr-xr-x"));
FileSystem fs = FileSystem.get(conf);
fs.copyFromLocalFile(new Path("./myfile"), output); 
```

==================这是分隔符============================= == PS。我已经在安全组中打开了端口 9000、50010 并且已经关闭了 linux 防火墙。

有人有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-12T12:29:56.667

你找到这个问题的任何答案了吗...如果没有，这里是潜在的“原因”==>您的客户端正在尝试从 EC2 上的私有 IP 地址访问数据节点（仅对集群可见）不是公共IP。您可以验证查看您的错误日志：不包括 datanode 私有 ip 而不是公共 ip，但我不知道我们将如何克服这一点。我有同样的问题。有关更多信息，请查看此链接：[http ://www.hadoopinrealworld.com/could-only-be-replicated-to-0-nodes/](http://www.hadoopinrealworld.com/could-only-be-replicated-to-0-nodes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T21:22:44.237

此错误背后可能有几个原因： 1- DataNodes 未启动并运行。确保不是这种情况。如果您没有得到任何东西，请尝试挖掘每台服务器上的 DN 日志。

2- 运行 DN 的机器上的空间小于您通过“dfs.datanode.du.reserved”属性指定的空间。

3-您的 DN 机器上实际上没有剩余空间。

4- hdfs-site.xml 文件中“dfs.data.dir”指定的路径没有剩余空间。（可能作为 dfs.data.dir 的磁盘空间不足）。

5- DN 无法向 NN 发送心跳/块报告。确保没有网络相关问题。

高温高压

# java - “表达式的类型必须是数组类型，但它解析为 TextView”

> ID：16073836
> 
> 赞同：0
> 
> 时间：2013-04-18T03:09:47.627
> 
> 标签：java, android, arrays

我在编译一些源代码时遇到问题，我收到一条错误消息，指出“表达式的类型必须是数组类型，但它解析为 TextView”我试图在 Google 和 StackOverflow 上查找并且 SO 只返回一个（未回答的）结果。

有人可以指出我正确的方向或举一个如何解决这个问题的例子吗？

非常感激。- 蒂姆

我在以下两行中有两个此错误的实例：

```
beamMsg[i].setText(new String(msg[i].getRecords()[1].getPayload()));
beamMsg2[i].setText(new String(msg[i].getRecords()[1].getPayload())); 
```

资源：

```
 void processIntent(Intent intent) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);
    // only one message sent during the beam
    NdefMessage[] msg =  new NdefMessage[rawMsgs.length];
    for (int i = 0; i < msg.length; i++) {
        msg[i] = (NdefMessage) rawMsgs[i];
        // record 0 contains the MIME type, record 1 is the AAR, if present
        beamMsg[i].setText(new String(msg[i].getRecords()[1].getPayload()));
        beamMsg2[i].setText(new String(msg[i].getRecords()[1].getPayload()));
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:26:31.357

您试图在对象 beamMsg[i] 上调用 setText() 方法，编译器说 beamMsg 是 TextView 而不是 TextView[] 数组。同样适用于 beamMsg2

# c++ - 将对象地址转换为 char ptrs 然后在它们上使用指针数学

> ID：16073839
> 
> 赞同：1
> 
> 时间：2013-04-18T03:10:11.507
> 
> 标签：c++, pointers, portability

根据 Effective C++，“将对象地址转换为 char* 指针，然后对它们使用指针算术运算几乎总是会产生未定义的行为。”

对于普通的旧数据，这是真的吗？例如，在我很久以前编写的这个模板函数中，用于打印对象的位。它在 x86 上运行得非常好，但是……它是可移植的吗？

```
#include <iostream>

template< typename TYPE >
void PrintBits( TYPE data ) {
    unsigned char *c = reinterpret_cast<unsigned char *>(&data);

    std::size_t i = sizeof(data);
    std::size_t b;

    while ( i>0 ) {
        i--;
        b=8;
        while ( b > 0 ) {
            b--;
            std::cout << ( ( c[i] & (1<<b) ) ? '1' : '0' );
        }
    }
    std::cout << "\n";
}

int main ( void ) {
    unsigned int f = 0xf0f0f0f0;
    PrintBits<unsigned int>( f );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:00:41.743

它当然不是便携式的。即使您坚持基本类型，也有字节序和 sizeof，因此您的函数将在大字节序机器或 sizeof(int) 为 16 或 64 的机器上打印不同的结果。另一个问题是并非所有 POD 都是基本类型，结构也可能是 POD。

根据实现定义的对齐规则，POD 结构成员可能具有内部填充。因此，如果您传递此 POD 结构：

```
struct PaddedPOD
{
char c;
int i;
} 
```

您的代码也会打印填充的内容。即使在具有不同编译指示和选项的同一编译器上，填充也会有所不同。

另一方面，也许这正是你想要的。

所以，它不是便携式的，但它不是 UB。有一些标准保证：您可以在 char 或 unsigned char 数组中复制 POD，并且通过 char 缓冲区复制的结果将保持原始值。这意味着您可以安全地遍历该数组，因此您的函数是安全的。但是没有人保证这个具有相同类型和值的对象的数组（或对象表示）在不同的计算机上是相同的。

顺便说一句，我在 Effective C++ 中找不到那段话。你会引用它吗？我可以说，如果您的代码的一部分已经包含大量`#ifdef thiscompilerversion`. 从这个意义上说，是的，转换为 char * 通常会导致 UB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T03:51:49.907

是的，POD 类型始终可以被视为大小为 的字符数组`sizeof (TYPE)`。POD 类型就像相应的 C 类型（这就是它们“普通、旧”的原因）。由于 C 没有函数重载，因此编写“通用”函数来执行诸如将它们写入文件或网络流之类的操作取决于将它们作为 char 数组访问的能力。

# scipy - scipy中的线性最小二乘 - QR分解与其他方法的准确性

> ID：16073846
> 
> 赞同：2
> 
> 时间：2013-04-18T03:11:24.503
> 
> 标签：scipy, linear-algebra

我尝试使用以下方法在 scipy 中解决线性最小二乘问题 Ax = b：

```
x = numpy.linalg.inv(A.T.dot(A)).dot(A.T).dot(b) #Usually not recommended 
```

和

```
x = numpy.linalg.lstsq(A, b) 
```

两者都给出几乎相同的结果。我还尝试使用 QR 算法手动执行此操作，即：

```
Qmat, Rmat = la.qr(A)

bpr = dot(Qmat.T,b)
n=len(bpr)
x = np.zeros(n)
for i in xrange(n-1, -1,-1):
    x[i] = bpr[i]
    for j in xrange(i+1, n):
        x[i] -= Rmat[i, j]*x[j]
    x[i] /= Rmat[i,i] 
```

然而，这种方法给出了非常不准确的结果（大约 1e-2 的错误）。我在代码或数学上犯了 n00b 错误吗？或者，是方法的问题，还是 scipy 本身的问题？

我的 numpy 版本是 1.6.1（来自[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)的 mkl 编译版本），在 x86_64 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:32:39.163

如果您使用这些二进制文件，则 QR 分解由英特尔 MKL 计算，并且可能是正确的。

对我来说，上面的代码`1e-12`为随机矩阵提供了正确结果内的解决方案。你用什么矩阵来测试它，你如何测量误差？

在某些情况下，最小二乘问题是病态的。例如，对于具有大空空间的矩阵，舍入误差会影响结果。考虑 rank-1 矩阵：

```
np.random.seed(1234)
v = np.random.rand(100)
A = v[:,None] * v[None,:]
b = np.random.randn(100)

x = scipy.linalg.lstsq(A, b)[0]
print(np.linalg.norm(A.dot(x) - b))
# -> 9.63612833771

# xp obtained using your above code
print(np.linalg.norm(A.dot(xp) - b))
# -> 3262.61161684 
```

与 lstsq 中使用的更仔细编写的 LAPACK 例程相比，您自制的三角求解更容易出现舍入误差，因此它的准确度会有所降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T21:29:55.590

您也可以尝试使用截断的特征分解。这意味着使用前 k 个特征值。我使用以下代码对最小二乘回归进行正则化，y=kc

![在此处输入图像描述](https://i.stack.imgur.com/mVphl.png)

其中`u`是特征向量，`lambda`是特征值

线性模型的核矩阵：

```
k=np.dot(X,X.T) 
```

然后特征分解：

```
 w, v = scipy.linalg.eigh(k, eigvals=(lo, hi)) 
```

然后

```
temp= np.dot(np.dot(v,np.diag(1.0/w)),v.T)
c=np.dot(temp,y) 
```

同样对于正则化，您应该`0.001`在内核矩阵的对角线上添加一个小值（如 ），否则您将拥有负特征值，这会阻止您的内核矩阵不是正定的。

# iphone - 获取特殊格式的当前日期字符串

> ID：16073855
> 
> 赞同：-2
> 
> 时间：2013-04-18T03:12:36.920
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

我现在正在编写 iPhone 应用程序。我想按以下格式获取当前日期和时间。

```
Thu, 18 Apr 2013 01:41:13 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:41:10.833

[*NSDateFormatter Class Reference*](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-CJBEDIHH)[中](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-CJBEDIHH)的[文档`setDateFormat:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-CJBEDIHH)*链接到[*Data Formatting Guide*](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/DataFormatting/DataFormatting.html#//apple_ref/doc/uid/10000029i)。*

 *在*Data Formatting Guide*中，[Date Formatters > Use Format Strings to Specify Custom Formats > Fixed Formats](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW13)部分链接到[*Unicode Technical Standard #35 的附录](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)F。

附录 F，虽然有些迟钝，但告诉你一切：

*   用于`E`简短的工作日名称。
*   用于`d`当月的某一天。
*   用于`MMM`短月份名称。
*   用`y`一年。
*   使用`hh`一小时。
*   用`mm`一分钟。
*   用于`ss`第二个。

我们可以在不使用 Python 的 Cocoa 绑定编写整个 Objective-C 程序的情况下快速测试这一点：

```
:; python
Python 2.7.2 (default, Oct 11 2012, 20:14:37) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from Cocoa import *
>>> f = NSDateFormatter.new()         
>>> f.setDateFormat_('E, d MMM y hh:mm:ss')
>>> f.stringFromDate_(NSDate.new())
u'Wed, 17 Apr 2013 10:40:25' 
```

在 Objective-C 中，它看起来像这样：

```
NSDateFormatter *f = [NSDateFormatter new];
f.dateFormat = @"E, d MMM y hh:mm:ss";
NSLog(@"%@", [f stringFromDate:[NSDate new]]); 
```

请注意，创建`NSDateFormatter`. 如果您要格式化许多日期，您应该创建一次并保留它。*

# linq-to-sql - 如何使用 Linq to Sql 作为序列号生成器来避免间隙？

> ID：16073860
> 
> 赞同：0
> 
> 时间：2013-04-18T03:12:50.810
> 
> 标签：linq-to-sql

已创建以下 Linq to SQL 事务以尝试创建无间隙的发票编号。假设有 2 个表：

表 1：发票编号。- 列 ID、序列号、增量 - 示例：1、10001、1

表 2：发票。- 列：ID、InvoiceNumber、名称 - 示例：1、10001、“Bob Smith”

```
 Dim db As New Invoices.InvoicesDataContext
        Dim lastInvoiceNumber = (From n In db.InvoiceNumbers Order By n.LastSerialNumber Descending
                          Select n.LastSerialNumber, n.Increment).First
        Dim nextInvoiceNumber As Integer = lastInvoiceNumber.LastSerialNumber + lastInvoiceNumber.Increment
        Dim newInvoiceNumber = New Invoices.InvoiceNumber With {.LastSerialNumber = nextInvoiceNumber, .Increment = lastInvoiceNumber.Increment}
        Dim newInvoice = New Invoices.Invoice With {.InvoiceNumber = nextInvoiceNumber, .Name = "Test" + nextInvoiceNumber.ToString}
        db.InvoiceNumbers.InsertOnSubmit(newInvoiceNumber)
        db.Invoices.InsertOnSubmit(newInvoice)
    db.SubmitChanges() 
```

一切正常，但是否有可能使用这种方法，如果两个用户同时进行交易，他们可能会拿起相同的发票号码？如果是这样，是否有更好的方法使用 Linq to Sql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:54:52.677

您始终可以使用 lock() 确保事务不会同时在多个线程中运行：

```
private static object myLockObject = new object();
....
....
public class MyClass
{
...
public void TransactionAndStuff()
{
    lock(myLockObject) 
    {
        // your linq query
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:36:07.420

在处理**事务**数据库时，序列中的间隙是**不可避免的。**

 **首先，您不能使用`SELECT max(id)+1`，因为它可能会同时`id`执行 2 个事务。这意味着您必须使用数据库本机自动增量列（MySQL、SQLite）或数据库序列（PostgreSQL、MSSQL、Oracle）来获取下一个可用`id`的 .

但即使使用自增序列也不能解决这个问题。想象一下，您有 2 个数据库连接，几乎同时启动了 2 个并行事务。第一个`id`从自动增量序列中获得了一些，它变成了以前使用的值 +1。一纳秒后，第二笔交易获得 next `id`，现在是 +2。现在想象第一个事务由于某种原因回滚（遇到错误，您的代码决定中止它，程序崩溃 - 您命名它）。之后，第二个事务以`id`+2 提交，在`id`编号上造成了差距。

但是如果这样的并行事务的数量超过 2 个呢？您无法预测，也无法告诉当前正在运行的事务重用`id`被放弃的 s。

理论上可以重复使用废弃的 id。然而，在实践中，它在数据库上的成本非常高，并且当多个会话尝试做同样的事情时会产生更多的问题。

**TDLR：**别再打了，用过的 id 之间的差距是完全正常的。**

# php - php - 服务器端的 CURL HTTP 身份验证

> ID：16073864
> 
> 赞同：3
> 
> 时间：2013-04-18T03:14:18.670
> 
> 标签：php, xml, curl

我想更改 php 中的 xml 值但不要更改....

```
<?php

$url = "http://192.168.1.103:8080/ew.xml";
$xml = '<?xml version="1.0" ?>
<DDCConfig:getValue xmlns:DDCConfig="urn:SMUDDCConfiguration">
<DDCConfig:Network>
 <DDCConfig:LocalIP>192.168.103.223</DDCConfig:LocalIP>
 <DDCConfig:GlobalIP>168.188.127.123</DDCConfig:GlobalIP>
<DDCConfig:RootBridge>Yes</DDCConfig:RootBridge>
</DDCConfig:Network>
</DDCConfig:getValue>';

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_USERPWD, "lmk:alrud89");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_URL, "$url"); 
curl_setopt($ch, CURLOPT_PORT, 8080);
curl_setopt($ch, CURLOPT_PUT, 1); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS,array($xml));
$http_result = curl_exec($ch);
if($http_result){
echo $http_result;
}else{
echo curl_error($ch);
}

curl_close($ch); 
?> 
```

错误信息是

> * 即将 connect() 到 192.168.1.103 端口 8080 (#0) * 正在尝试 192.168.1.103...
> * 已连接
> * 服务器身份验证使用 Basic 和用户 'lmk'
> > PUT /ew.xml HTTP/1.1
> > 授权：基本 bG1rOmFscnVkODk =
> > Host: 192.168.1.103:8080 Accept: *//*
> Transfer-Encoding: chunked
> > Expect: 100-continue
> < HTTP/1.1 401 Unauthorized
> < Content-Length: 0
> <
> > WWW-Authenticate: Digest qop="auth", realm ="mydomain.com", nonce="1366254379"
> * 发送结束前的 HTTP 错误，停止发送
> * 关闭连接 #0

问题和解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:19:54.833

您的凭据不正确！（这就是错误 401 的含义）

有一个很棒的 Firefox 插件叫做`poster`- 安装它并使用它来仔细检查请求的格式是否正确。

顺便说一句，您可能想要添加以下标题：

```
curl_setopt ($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/xml")) 
```

另一件事：并不总是支持 PUT，尝试 POST - 有时它会起作用。

# python - 使用 pymongo 在 mongodb 中按 ObjectId 搜索

> ID：16073865
> 
> 赞同：99
> 
> 时间：2013-04-18T03:14:19.007
> 
> 标签：python, mongodb, pymongo

我需要使用 pymongo 使用 python 搜索 ObjectId，但我总是收到此错误。任何想法如何搜索？

```
import pymongo
from pymongo import MongoClient
from pymongo import ObjectId

gate = collection.find({'_id': ObjectId(modem["dis_imei"])})
print gate

    Traceback (most recent call last):
  File "C:\Users\gerswin\Documents\Proyectos\Demonio py\test.py", line 2, in <module>
    import pymongo
  File "C:\Python27\lib\site-packages\pymongo\__init__.py", line 80, in <module>
    from pymongo.connection import Connection
  File "C:\Python27\lib\site-packages\pymongo\connection.py", line 39, in <module>
    from pymongo.mongo_client import MongoClient
  File "C:\Python27\lib\site-packages\pymongo\mongo_client.py", line 45, in <module>
    from pymongo import (auth,
  File "C:\Python27\lib\site-packages\pymongo\database.py", line 22, in <module>
    from pymongo.collection import Collection
  File "C:\Python27\lib\site-packages\pymongo\collection.py", line 25, in <module>
    from pymongo.cursor import Cursor
  File "C:\Python27\lib\site-packages\pymongo\cursor.py", line 19, in <module>
    from bson import RE_TYPE
ImportError: cannot import name RE_TYPE 
```

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-04-18T05:09:13.030

我使用 pymongo 2.4.1。

```
from bson.objectid import ObjectId
[i for i in dbm.neo_nodes.find({"_id": ObjectId(obj_id_to_find)})] 
```

# ios - Xcode：为什么我可以从我的静态库中#import 一个“项目”标头的文件？

> ID：16073866
> 
> 赞同：3
> 
> 时间：2013-04-18T03:14:20.530
> 
> 标签：ios, objective-c, xcode, frameworks, static-libraries

我的工作区中有两个项目。我正在开发的一个框架项目，也是一个不同的应用程序。由于某种原因，在我的应用程序项目中，我无法包含我的框架项目的公共标头，但我可以包含唯一的项目标头文件。

我想如何导入我的框架：

```
#import <MyFramework/MyFramework.h> 
```

Xcode 只允许我编译的内容：

```
#import <MyFramework/SuperSecretClass.h> 
```

在我的框架中，我在构建阶段的“复制标头”部分正确配置了公共标头和项目标头（公共标头，项目中的其他“私有”标头。

有人有想法么？

# ios - 区分 UserLocation Pin 和用户添加的 pin

> ID：16073871
> 
> 赞同：0
> 
> 时间：2013-04-18T03:14:50.687
> 
> 标签：ios, annotations, mkannotationview, mkpinannotationview

我正在尝试解决一个我不确定如何解决的问题。在我的应用程序中，当 mapkit 启动时，我在用户的当前位置放置了一个图钉。mapkit 委托给 viewForAnnotation，它设置了 pin 的颜色，效果很好。

我遇到的问题是我无法区分注释，因此我可以将不同的颜色应用于“用户添加的位置”与我的“当前位置”图钉。我想添加一个按钮，以便他们可以删除他们添加的任何图钉，但不能删除他们的“当前位置”图钉。我似乎无法弄清楚如何提取任何可识别的信息，例如图钉的标题或副标题。

在此先感谢您的帮助。

这是我的代码...

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
    NSLog(@"OAAssignmentGPSViewController.m : mapView viewForAnnotation");

    if([annotation isKindOfClass: [MKUserLocation class]])
    return nil;

    NSLog(@" mapView.userLocation.title = %@", self.mapView.userLocation.title);
    static NSString* annotationIdentifier = @"currentlocation";
    MKPinAnnotationView *myPinView = (MKPinAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];
    if (!myPinView) {
    myPinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil] ;
    myPinView.pinColor = MKPinAnnotationColorRed;
    myPinView.canShowCallout = YES;
    myPinView.animatesDrop = YES;

    NSLog(@"mapView.description %@", self.mapView.userLocation.title);
    if( annotation   != self.mapView.userLocation)<<<<<----how do I check for UserLocation
    {
        myPinView.pinColor = MKPinAnnotationColorGreen;
        myPinView.rightCalloutAccessoryView =   [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    }
   }
    return myPinView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T12:43:09.907

为其他新手更新这个，这就是答案......

```
if ([annotation isKindOfClass:[MKUserLocation class]]) ....{

   this is the current location pin

}else {

    these are you custom locations pins
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:26:40.113

我唯一能想到的就是继承 MKPinAnnotationView 并添加一个简单的属性来索引它。在创建引脚时将它们添加到数组中并增加索引号。然后，对于您的“删除所有引脚”方法，您可以检查引脚的 index 属性以确保它不是第一个：

```
-(IBAction)deleteAllPins
{
   for (id pin in self.pinsArray) {
      if (pin.indexNumber >= 1) { //This is not the first pin...
         // Delete the pin
    }

  }
} 
```

无论如何，这就是我会尝试的。对不起，我没有时间亲自测试它。希望它能让你开始。祝你好运。

# size - 在 mac 上使用 AVFoundation 和 AVCaptureVideoDataOutput 时如何使用自定义视频分辨率

> ID：16073873
> 
> 赞同：6
> 
> 时间：2013-04-18T03:14:56.443
> 
> 标签：size, avfoundation, frame, capture

我需要处理捕获的视频帧的每一帧，虽然`AVCaptureDevice.formats`提供了这么多不同尺寸的帧大小，但似乎`AVCaptureSession`只支持预设中定义的那些帧大小。

我也尝试过设置`AVCaptureDevice.activeFormat`之前`AVCaptureInputDevice`或之后，无论我设置什么设置，如果我设置`AVCaptureSessionPresetHigh`，`AVCaptureSession`它总是给我一个1280x720的帧。类似的，如果我设置`AVCaptureSessionPreset`640x480，那么我只能得到 640x480 的帧大小。

那么，如何设置自定义视频帧大小，如 800x600？使用 windows 下的 Media Foundation 或 linux 下的 V4L2，可以在捕获时轻松设置任何自定义帧大小。

在mac下似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-23T06:35:25.930

对象上的设置`kCVPixelBufferWidthKey`和`kCVPixelBufferHeightKey`选项`AVCaptureVideoDataOutput`。最小样本如下（添加错误检查）。

```
_sessionOutput = [[AVCaptureVideoDataOutput alloc] init];

NSDictionary *pixelBufferOptions = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithDouble:width], (id)kCVPixelBufferWidthKey,
                              [NSNumber numberWithDouble:height], (id)kCVPixelBufferHeightKey,
                              [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA], (id)kCVPixelBufferPixelFormatTypeKey,
                              nil];
[_sessionOutput setVideoSettings:pixelBufferOptions]; 
```

注意：此宽度/高度将覆盖会话预设宽度/高度（如果不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T22:44:56.267

AFAIK 没有办法做到这一点。我见过的所有用于视频捕获的代码都使用了预设。

视频设置属性的[AVCaptureVideoDataOutput 文档说](https://developer.apple.com/library/mac/Documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html#jumpTo_8)

> 当前支持的唯一键是 kCVPixelBufferPixelFormatTypeKey 键。

所以传入视频设置的其他答案将不起作用，它只会忽略这些参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T17:45:56.330

使用 AVCapturwVideoDataOutput 的 videoSettings 属性来描述字典中的像素格式、宽度和高度。

# c - 用于日期时间格式验证的 C 代码。指定格式为“YYYYMMDDHHMMSSmmmmmm”

> ID：16073876
> 
> 赞同：0
> 
> 时间：2013-04-18T03:16:02.603
> 
> 标签：c, datetime, validation, datetime-format

我需要验证“ `YYYYMMDDHHMMSSmmmmmm`”格式的日期时间值。实际上我希望我需要找到一个已经测试过的工作 C 代码来验证上述格式的日期时间值。此外，我有一个日期时间值，例如`201304011031000000`. 我需要一个函数来验证这是否是一个有效的日期。[ `isdatetime()`]

以下是格式的各个部分。

```
YYYY : Year
MM : Month
DD : Day
HH : hour
MM : Minutes
SS : seconds
mmmmmm: micro-seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:25:47.200

如果您在 POSIX 系统上，这看起来应该用 处理[`strptime()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strptime.html)，但“毫秒”（或微秒）部分不由`strptime()`我知道的任何其他标准转换函数处理。

假设问题要求微秒，您可以使用以下主题提供的变体：

```
#include <stdio.h>
#include <string.h>
#include <time.h>

int main(void)
{
    const char  datetime[] = "20130417221633012345"; // YYYYMMDDHHMMSSFFFFFF
    struct tm   time_val;
    unsigned    microsecs;
    const char *end = strptime(datetime, "%Y%m%d%H%M%S", &time_val);
    if (end != 0)
    {
        int nbytes;
        if (strlen(end) == 6 && sscanf(end, "%6u%n", &microsecs, &nbytes) == 1 &&
            nbytes == 6)
        {
            char buffer[32];
            strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S", &time_val);
            printf("%s = %s.%.6u\n", datetime, buffer, microsecs);
        }
    }
    return 0;
} 
```

* * *

### 修订要求

```
#include <stdio.h>
#include <string.h>
#include <time.h>

int isdatetime(const char *datetime)
{
    // datetime format is YYYYMMDDHHMMSSFFFFFF
    struct tm   time_val;
    unsigned    microsecs;
    int         nbytes;
    const char *end = strptime(datetime, "%Y%m%d%H%M%S", &time_val);

    if (end != 0 && strlen(end) == 6 &&
        sscanf(end, "%6u%n", &microsecs, &nbytes) == 1 && nbytes == 6)
        return 1;   // Valid
    return 0;       // Invalid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:28:56.743

您可以`regex.h`用于[windows](https://stackoverflow.com/questions/8230905/regex-h-for-windows)或[linux](http://linux.die.net/man/3/regex)。

`"YYYYMMDDHHMMSSMSSSSS"`类似于：您可以[在此处](http://regexlib.com/DisplayPatterns.aspx?cattabindex=4&categoryId=5&AspxAutoDetectCookieSupport=1)`(\d{4}[0,1][0,9]\d{})...`找到您的特定格式，这取决于您是否启用或时钟等。`24``12`

# sql - XCode 中的 SQL 排序

> ID：16073877
> 
> 赞同：0
> 
> 时间：2013-04-18T03:16:24.247
> 
> 标签：sql, xcode

我想按变量排序数据，然后选择第一条记录。但它不起作用。这是我的代码：

```
NSString *s = [db stringForQuery:@"SELECT cardInfo.?, cardInfo.?, cardInfo.? FROM cardInfo WHERE cardInfo.currentBalance > ? ORDER BY cardInfo.? DESC, cardInfo.? DESC, cardInfo.? ASC ", first, second, third, [NSNumber numberWithDouble:money], first, second, third]; 
```

如果我将其更改为按常量排序，它会起作用。

```
NSString *s = [db stringForQuery:@"SELECT a, b, c FROM cardInfo WHERE cardInfo.currentBalance > ? ORDER BY a DESC, b DESC, c ASC ",[NSNumber numberWithDouble:money]]; 
```

有谁知道如何纠正它？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:48:24.873

我已经解决了这个问题。我换？使用 %@ 并且可以正常工作

```
[db stringForQuery:[NSString stringWithFormat:@"SELECT cardInfo.%@, cardInfo.%@, cardInfo.%@ FROM cardInfo WHERE cardInfo.currentBalance > %@ ORDER BY cardInfo.%@, cardInfo.%@,cardInfo.%@ ", first, second,third,  [NSNumber numberWithDouble:money], first, second, third]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:36:52.063

是的。 `ORDER BY cardInfo.?`尝试参数化元数据，列名。准备好的语句只允许您参数化*数据*。

你可以说

```
where tablename.colname = ? 
```

你不能说

```
where ?.colname = 'foo' 
```

HTH。

# .net - 如何将子例程名称作为函数的参数传递？

> ID：16073878
> 
> 赞同：0
> 
> 时间：2013-04-18T03:16:32.230
> 
> 标签：.net, vb.net, methods, arguments, argument-passing

我正在尝试创建一个通用函数来创建线程，然后我需要将一个子例程名称传递给该函数，但我只能传递一个函数名称（这是无用的）。

我怎么能做到这一点？

有一种方法可以在不将委托声明出函数的情况下做到这一点？...因为就像我说的那样，我将创建一个通用函数来简化事情。

这是我的代码：

```
Public Class Form1

' Desired usage:
' Make_Thread(Thread Variable, Thread Name, Thread Priority, Thread Sub)
'
' Example:
' Make_Thread(Thread_1, "Low thread", Threading.ThreadPriority.Low, AddressOf Test_Sub)

Private Thread_1 As Threading.Thread ' Thread Variable

Private Function Make_Thread(Of TKey)(ByRef Thread_Variable As Threading.Thread, _
                       ByVal Thread_Name As String, _
                       ByVal Thread_Priority As Threading.ThreadPriority, _
                       ByRef Thread_Sub As Func(Of String, TKey)) As Boolean ' I'd ByRef a function but really I will pass a Subroutine.

    ' See if the thread is already running.
    Dim is_running As Boolean
    If Thread_Variable Is Nothing Then _
         is_running = False _
    Else is_running = Thread_Variable.IsAlive

    ' If the thread is already running, do nothing.
    If is_running Then Return False : Exit Function

    ' Make the thread.
    Thread_Variable = New Threading.Thread(AddressOf Thread_Sub)
    Thread_Variable.Priority = Thread_Priority
    Thread_Variable.IsBackground = True
    Thread_Variable.Name = Thread_Name

    ' Start the thread.
    Thread_Variable.Start()
    Return True

End Function

Private Sub Test_Sub()
    MsgBox("A message from the thread!")
End Sub

End Class 
```

# iphone - 如何在 CAShapeLayer（Rounded-Recr 角 UIView）上设置 maskToBounds 效果？

> ID：16073879
> 
> 赞同：0
> 
> 时间：2013-04-18T03:16:33.757
> 
> 标签：iphone, ios, objective-c, uiview, cashapelayer

`I want to make the glow effect spread outside of thisView.`

我用这段代码来制作`Half-Rounded rect cornered UIVew`.

[UIView中的圆两个角](https://stackoverflow.com/questions/4847163/round-two-corners-in-uiview)

这是我的代码。

```
+ (UIView *)makeUpperHalfRoundedView:(UIView *)view {
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = view.bounds;
    UIBezierPath *roundedPath =
    [UIBezierPath bezierPathWithRoundedRect:maskLayer.bounds
                          byRoundingCorners:UIRectCornerTopLeft | UIRectCornerTopRight
                                cornerRadii:CGSizeMake(8.f, 8.f)];
    maskLayer.fillColor = [[UIColor blackColor] CGColor];
    maskLayer.backgroundColor = [[UIColor clearColor] CGColor];
    maskLayer.path = [roundedPath CGPath];
//    maskLayer.masksToBounds = NO;

    //Don't add masks to layers already in the hierarchy!
    UIView *superview = [view superview];
    [view removeFromSuperview];
    view.layer.mask = maskLayer;
    [superview addSubview:view];

    return view;
} 
```

并且`two image buttons`在这种观点中存在封闭的边界。如果按钮上发生触摸事件，发光效果显示（`showsTouchWhenHighlighted`）

在使用这段代码之前，我只是使用了

```
thisView.layer.cornerRadius = 8;
thisVIew.layer.masksToBounds = NO; 
```

并且发光效果散布在“thisView”之外。

但是在“thisView”中使用 CAShapeLayer 来掩盖半被唤醒的矩形后，发光效果被边界掩盖了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:24:54.843

你所看到的正是面具应该如何工作。您正在将蒙版应用于超级视图的图层。让我们调用该视图`superview`（就像在您的代码中一样）。好的，那会做什么呢？它将遮罩`superview`及其所有子层。*这包括它的子视图。*它的子视图实际上是它的子层。

因此，由于按钮是 的子视图`superview`，因此它们像内部的其他所有内容一样被屏蔽`superview`。

如果您不希望这种情况发生，请不要将按钮子视图设为`superview`. 例如，它们可以坐在上面`superview`而不是它的子视图。

# c++ - 无限无符号整数链表实现。减法不起作用

> ID：16073890
> 
> 赞同：0
> 
> 时间：2013-04-18T03:17:50.110
> 
> 标签：c++, algorithm, data-structures, unsigned-integer

因此，对于我正在处理的项目欧拉问题，我已经使用链表实现了一个完整的无限制无符号整数类。我已经验证了所有的逻辑位操作都是正确的（如果你想看的话我可以发布）。我已经实现了所有的操作符和操作。然而，减法（以及所有使用它的东西，即除法和模数）不起作用。当我运行以下测试时，这就是我得到的：

```
 LimitlessUnsigned limitless = 0x88888888u;
  limitless = limitless << 4;

  LimitlessUnsigned tester = 0x88888884u;
  tester = tester << 4;

  //limitless = limitless >> 5;
  LimitlessUnsigned another = limitless - tester; 
```

我从调试器中得到以下值：

```
 another LimitlessUnsigned   
integerList std::__1::list<unsigned int, std::__1::allocator<unsigned int> >    
[0] unsigned int    0b11111111111111111111111111111111
[1] unsigned int    0b00000000000000000000000001000000
limitless   LimitlessUnsigned   
integerList std::__1::list<unsigned int, std::__1::allocator<unsigned int> >    
[0] unsigned int    0b00000000000000000000000000001000
[1] unsigned int    0b10001000100010001000100010000000
tester  LimitlessUnsigned   
integerList std::__1::list<unsigned int, std::__1::allocator<unsigned int> >    
[0] unsigned int    0b00000000000000000000000000001000
[1] unsigned int    0b10001000100010001000100001000000 
```

似乎我错过了减法和两个恭维的定义。该代码一直有效，直到我需要添加额外的 32 位。我正在考虑从前 32 到下 32 的溢出。但是，我正在丢弃最高位的溢出（我认为我应该这样做）。显然，我没有正确地做到这一点。下面是相关的源代码。

```
void LimitlessUnsigned::Sub(const LimitlessUnsigned& other)
{
  if(*this <= other)
  {
    *this = 0u;
    return;
  }

  LimitlessUnsigned temp = other;  

  while(temp.integerList.size() > integerList.size())
    integerList.push_front(0u);

  while(integerList.size() > temp.integerList.size())
  temp.integerList.push_front(0u);  

  temp.TwosComp();  
  Add(temp, true);
}
void LimitlessUnsigned::Add(const LimitlessUnsigned& other, bool allowRegisterLoss)
{
  LimitlessUnsigned carry = *this & other;
  LimitlessUnsigned result = *this ^ other;

  while(carry != 0u)
  {
    carry.ShiftLeft(1, allowRegisterLoss);
    LimitlessUnsigned shiftedcarry = carry;
    carry = result & shiftedcarry;
    result = result ^ shiftedcarry;
  }

 *this = result;
}

void LimitlessUnsigned::Not()
{  
  for(std::list<unsigned>::iterator iter = integerList.begin(); iter != integerList.end(); ++iter)
   {      
      *iter = ~*iter;      
   }   
}

void LimitlessUnsigned::TwosComp()
{
  Not();
  Add(1u, true);
}

void LimitlessUnsigned::ShiftLeft(unsigned shifts, bool allowRegisterLoss)
{
  unsigned carry = 0u;
  bool front_carry = false;

  while(shifts > 0u)
  {    
    if((integerList.front() & CARRY_INT_HIGH) == CARRY_INT_HIGH)
      front_carry = true;     

    for(std::list<unsigned>::reverse_iterator iter = integerList.rbegin(); iter != integerList.rend(); ++iter)
    {      
     unsigned temp = *iter;

      *iter = *iter << 1;
      *iter = *iter | carry;       

      if((temp & CARRY_INT_HIGH) == CARRY_INT_HIGH)
        carry = CARRY_INT;
      else
        carry = 0u;
    }

    carry = 0u;

    if(front_carry && !allowRegisterLoss)
    {
      front_carry = false;
      integerList.push_front(1u);
    }

    --shifts;    
  }
} 
```

**更新** 我终于解决了这个问题。这是我的博客文章以及源代码：

[http://memmove.blogspot.com/2013/04/unlimited-unsigned-integer-in-c.html](http://memmove.blogspot.com/2013/04/unlimited-unsigned-integer-in-c.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:32:52.803

取二进制补码后添加，当宽度不相等时使用零扩展。当您将减数（现在是加数）扩展为与被减数一样宽时，您需要使用符号扩展，而不是零扩展。这是因为在这种情况下需要将二进制补码值视为负数（尽管其他地方的所有内容都未签名）。或者（也许更符合整体设计），减数和被减数必须具有相同的宽度，然后才能开始使用二进制补码业务。

你正在做这样的事情：

```
0110 - 10 = 0110 + (~(10) + 1)
          = 0110 + (01 + 1)
          = 0110 + 10
          = 0110 + 0010
          = 1000 
```

什么时候应该：

```
0110 - 10 = 0110 + (~(10) + 1)
          = 0110 + (01 + 1)
          = 0110 + 10
          = 0110 + 1110  <= sign-extended subtrahend
          = 0100 
```

或者：

```
0110 - 10 = 0110 - 0010  <= widths equalized
          = 0110 + (~(0010) + 1)
          = 0110 + (1101 + 1)
          = 0110 + 1110
          = 0100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:12:49.700

曾几何时，控制数据公司 (CDC) 的一些工程师发明了单周期加法器（在此之前，加法器需要一个周期来传播进位）并且 CDC 为该发明申请了专利。然后工程师被 Cray 雇佣，他们想要一个快速加法器。所以聪明的工程师发明了借位减法器背后的快速外观，克雷为此申请了专利。

故事的精神是加法和减法是一回事，你的减法代码应该和你的加法代码看起来几乎一样。

# javascript - 通过具有 jquery 可拖放/可拖放的类来定位特定的 div

> ID：16073891
> 
> 赞同：1
> 
> 时间：2013-04-18T03:17:53.293
> 
> 标签：javascript, jquery, css, jquery-ui

使用 jquery UI 拖动 div 并将其放入 UI droppable div 时，我想在 div 被放入该区域时触发 jquery 动画。当动画被触发时，它会在所有具有 class = "drag-element" 的 div 上调用，但我只希望对特定的拖放元素进行动画处理。我尝试包括 removeClass(".drag-element") 和 addClass(".animate-element") 并告诉 animate() 对此采取行动，但它仍在将动画应用于所有 .drag-element div。我该如何解决这个问题？

查询：

```
$(function() {
$( ".drag-element" ).draggable({ containment: ".container" }).removeClass(".drag-vid");
$( ".drop-field" ).droppable({
  drop: function( event, ui ) {
    $(".drag-element").animate({"left": "+=50px"}, "slow");
    $( this )
      .css("background-color", "silver");
  }
});
}); 
```

[http://jsfiddle.net/NBHMT/](http://jsfiddle.net/NBHMT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:19:34.900

利用：

```
ui.draggable.animate({"left": "+=50px"}, "slow"); 
```

代替：

```
$(".drag-element").animate({"left": "+=50px"}, "slow"); 
```

[http://jsfiddle.net/kAG6q/](http://jsfiddle.net/kAG6q/)

您的代码发生的事情是当您调用`$(".drag-element").animate(....`它时，它会选择所有拖动元素 div。取而代之的是 drop 函数有一个 ui 参数，它为您提供有关使用拖动元素的信息`ui.draggable`

# php - MongoCollection::aggregate() 在 Heroku PHP 中使用 MongoHQ 未定义

> ID：16073893
> 
> 赞同：0
> 
> 时间：2013-04-18T03:17:57.690
> 
> 标签：php, mongodb, heroku, mongodb-php, mongohq

`aggregate()`在 PHP 代码中使用 MongoDB 的函数时出现以下错误。此代码完美适用于运行 MongoDB 2.2.3 的本地设置

```
PHP Fatal error: Call to undefined method MongoCollection::aggregate() in /app/www/page.php on line 52, referer: http://referrer.url 
```

**代码**

```
foreach($cats as $key=>$val){
    $cats2[$val['lable']] = $myCollection->aggregate( array(
                                array('$match' => array('user_id' => $user_id )),
                                array('$unwind' =>"\$data"),
                                array('$match' => array('data.category'=> $val['category'])),
                                array('$project' => array('name'=> "\$data.name", 'id'=>"\$data.id")),
                                array('$group' => array('_id'=>'$id', 'name'=> array('$first' =>'$name'))),
                                array('$limit' => 12)
                                    ));
} 
```

**环境**

*   Heroku 上的 PHP
*   带有 MongoHQ 附加组件的 MongoDB 2.2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T14:55:51.250

你必须调查你的`phpinfo()`

如果在版本中您看到小于 的`1.3.0`内容，那么它将不起作用。

![在此处输入图像描述](https://i.stack.imgur.com/2z8YS.jpg)

转到[mongo 驱动程序页面](http://docs.mongodb.org/ecosystem/drivers/php/)下载并添加适当的驱动程序。重新启动服务器，它将工作。

# sass - 如何在我的零件文件夹中编译 scss 文件？

> ID：16073895
> 
> 赞同：1
> 
> 时间：2013-04-18T03:18:07.957
> 
> 标签：sass, compass-sass

我想将我的零件文件夹中的所有 scss 编译为 css。怎么做 ？
compass watch 命令只能将根 sass 文件夹编译为 css 文件夹。
例如：我想将top_menu.scss 编译成top_menu.css。

```
config.rb
sass
css
part
    top_menu
    |--top_menu.php
    |--sass
    |  |--top_menu.scss
    |--css
    |   |--top_menu.css 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:28:55.213

尝试执行**compass watch**命令，如下所示

```
compass watch --sass-dir part/top_menu/sass --css-dir part/top_menu/css -c config.rb 
```

我希望它有所帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:12:38.580

您应该将文件夹移动到`part`文件夹内`sass`并设置`config.rb`为监视`sass`文件夹：

```
sass_dir = 'sass' 
```

UPD1：如果要保留结构，请尝试指向`sass_dir`根文件夹。另一种选择是使这些文件部分嵌入到一个大的 css 文件中，而不是多个较小的文件中。

# c++ - C++ 模板类的模板特化

> ID：16073897
> 
> 赞同：0
> 
> 时间：2013-04-18T03:18:29.470
> 
> 标签：c++

我正在尝试专门化此模板方法“他”，但无法编译。怎么做才对？

```
 #pragma once
            template<typename A, typename B>
            class template_test
            {
            public:
                template_test();
                ~template_test();

              template<typename C>
              void he(C gg);

            };

            template<typename A, typename B>
            template<typename C>
            void template_test<A, B>::he( C gg )
            {

            }

            template<typename A, typename B>
            template<>
            void template_test<A, B>::he( int gg )
            {

            } 
```

错误 C1506：不可恢复的块作用域错误
无法将函数定义与现有声明匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:27:22.793

你也有专门的课程。您不能只专注于成员：

```
template<>
template<>
void template_test<int, int>::he<int>( int gg )
{

} 
```

但是，相反，我只会添加一个重载：

```
 void he(int gg){} 
```

# android - 如何在 Android 中将 imageView 翻转 45 度？

> ID：16073901
> 
> 赞同：0
> 
> 时间：2013-04-18T03:19:13.253
> 
> 标签：android, imageview

我知道

```
imageView.setRotationY(degree) 
```

可以进行水平（0度）翻转，并且

```
imageView.setRotationX(degree) 
```

可以进行垂直（90 度）翻转。

**如果我想要 45 度翻转怎么办？**

怎么做？

谢谢你的帮助。

# sql-server - SQL Server XQuery 在插入前检查数据值

> ID：16073902
> 
> 赞同：0
> 
> 时间：2013-04-18T03:19:19.030
> 
> 标签：sql-server, xml, tsql, xquery, sql-server-2012

这一切都在 SQL Server 2012 上。

我有 TSQL 来创建一个 XQuery 语句来切碎并插入一些 XML

代码看起来像这样：

```
declare @xmlasXML xml
set @xmlasXML = '
      <data Store="R262">
        <s Item1="10" Item2="-1" />
        <s Item1="33.2" Item2="55"  />
      </data>
'

insert TableX(OldPrice, Price) 
   select 
      c.value('@Item1[1]','decimal(15,2)') as OldPrice, 
      c.value('@ut[1]','int') as Price
   FROM 
      @xmlasXML.nodes('/data/s') T(c) 
```

我想在上面的插入语句中添加一些数据验证（我不想登陆数据然后不得不再次搅动它来验证每个数据点）......

当我说数据验证时，这就是我所说的：

*   如果 Item1 的值介于 1 和 15 之间，则将其用于插入，否则插入 NULL
*   如果 Item2 的值介于 -10 和 1000 之间，则将其用于插入，否则插入 NULL。

我看到了一些关于 XQuery 的信息，我认为 XQuery 具有可以处理的条件逻辑，但我发现的示例都与我构建和执行`INSERT`/`SELECT`语句的方式不符。

如果有更好的方法，我完全赞成 - 只要我不必两次粉碎数据。

在此先感谢您的时间！希望有人可以帮我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:37:50.117

```
declare @xmlasXML xml
    set @xmlasXML = '
          <data Store="R262">
            <s Item1="10" Item2="-1" />
            <s Item1="33.2" Item2="55"  />
          </data>';

;with TMP as (
    select c.value('@Item1[1]','decimal(15,2)') as OldPrice,
           c.value('@ut[1]','int') as Price
      FROM @xmlasXML.nodes('/data/s') T(c)
)
    insert TableX (OldPrice, Price) 
    select case when OldPrice between 1 and 15 then OldPrice end,
           case when Price between -1 and 1000 then Price end
      from TMP; 
```

# css - CSS 特异性主体 - 表单

> ID：16073903
> 
> 赞同：1
> 
> 时间：2013-04-18T03:19:19.643
> 
> 标签：css, css-specificity

我有几个页面和一个外部样式表。CSS 文件具有以下内容：

```
body {
    /*Set background image*/
    background: url("../img/background/main.jpg");
    padding: 20px 20px;
}

body form{
    border: double;
} 
```

根据我一直在学习的内容，*主体形式*会更具体，并且应该在主体内部的所有类型形式元素周围显示双线边框。

但是，在测试中，除非我将它移到 CSS *body* {} 选择器上方，这意味着 CSS 文件中的 body 选择器覆盖了*body form*。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:22:09.240

对于双边框，您可以使用边框和轮廓。

**例子**

```
body form {
    border: solid 1px #fff;
    outline: solid 2px #888;
    outline-offset: -5px;
} 
```

### [演示](http://jsfiddle.net/qvb2Y/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:32:51.153

您是正确的，`body form`优先于`form`，但问题出在边界声明中。在指定边框属性的值时，您还应该包括边框宽度和颜色以及样式。

```
border: double 3px #000; 
```

这会将元素边框设置为 double 样式，宽度为 3px，颜色为黑色。

请注意，当使用双边框样式时，使两个边框可见的最小边框宽度为 3 像素。

这是一个[例子](http://jsfiddle.net/bKQkJ/)。

# c# - 解析查询时出错。[令牌行号 = 1 ...]

> ID：16073904
> 
> 赞同：0
> 
> 时间：2013-04-18T03:19:33.153
> 
> 标签：c#, sql-server-2008, bulkinsert, stringbuilder

我尝试使用 stringbuilder 使过程更简单，但它显示错误，我不明白问题出在 stringbuilder 还是代码语法上。

代码：

```
 if (dataGridView4.RowCount == 0)
        {
            MessageBox.Show("Attendance form is empty");
        }
        else
        {
            //string att;
            int a = dataGridView4.RowCount;
            string[] s = new string[a];
            for (int i = 0; i < a; i++)
            {
                if (dataGridView4.Rows[i].Cells[1].Selected)
                {
                    s[i] = "Present";
                }
                else
                {
                    s[i] = "Absent";
                }
            }
            string[] s1 = new string[a];
            for (int i = 0; i < a; i++)
            {
                s1[i] = dataGridView4.Rows[i].Cells[0].Value.ToString();
            }
            string date = dateTimePicker1.Value.ToString("dd-MM-yyyy");
            StringBuilder command = new StringBuilder();
            for (int i = 0; i < a; i++)
            {
                command.Append("INSERT into Attendance (att_date, emp_code, is_present) values ('" + date + "','" + s1[i] + "','" + s[i] + "')");
            }
            SqlCeConnection conn = new SqlCeConnection(@"Data Source=C:\Users\admin\documents\visual studio 2010\Projects\WindowsFormsApplication1\WindowsFormsApplication1\hotel.sdf");
            conn.Open();
            SqlCeCommand cmd = new SqlCeCommand(command.ToString(),conn);
            cmd.ExecuteNonQuery();
            MessageBox.Show("Attendance Added"); 
```

请帮我解决这个错误，如果您有任何建议使上述代码更简单，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:23:37.510

您需要使用参数来避免 sql 注入攻击，并且您不需要像对日期时间参数所做的那样转换为字符串。

```
using (SqlCeConnection con = new SqlCeConnection(strConn))
{
    con.Open();
    using (SqlCeCommand cmd = new SqlCeCommand("insert into Attendance (att_date, emp_code, is_present) values (@att_date, @emp_code, @is_present)", con))
    {
        cmd.Parameters.AddWithValue("@att_date", dateTimePicker1.Value);
        cmd.Parameters.AddWithValue("@emp_code", emp_codeVal); //s1[i]
        cmd.Parameters.AddWithValue("@is_present", is_presentVal); //s[i]
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.ExecuteNonQuery();
    }
} 
```

如果您有许多记录要插入然后尝试使用[`SqlCeResultSet`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceresultset%28v=vs.100%29.aspx)，您可以查看该链接上给出的 MSDN 示例代码。

对于每个网格行，您可以执行以下操作

```
// this is only a sample you need to write for your table 
SqlCeUpdatableRecord rec = rs.CreateRecord();

rec.SetInt32(0, 34);
rec.SetDecimal(1, (decimal)44.66);
rec.SetString(2, "Sample text");

rs.Insert(rec); 
```

# javascript - 可编辑的 div 上的 javascript 亵渎过滤器

> ID：16073907
> 
> 赞同：1
> 
> 时间：2013-04-18T03:19:36.823
> 
> 标签：javascript, jquery

我目前正在一个网站上过滤数组上的坏词。每当用户在文本框中键入一个单词时，如果从数组中找到一个单词，就会出现一个警告框。我想做同样的事情，但我不想使用文本框，而是想使用 contenteditable div。我将需要 jquery，但我的代码似乎存在一些冲突，因为初始代码是在纯 js 中完成的。

小提琴链接：http: [//jsfiddle.net/br7TD/](http://jsfiddle.net/br7TD/)

这是javascript：

```
var swear_words_arr=new Array("bad","evil","freak");
var swear_alert_arr=new Array;
var swear_alert_count=0;

function reset_alert_count() {
swear_alert_count=0;
}

function validate_user_text() {
reset_alert_count();
var compare_text=document.form1.user_text.value;

for(var i=0; i<swear_words_arr.length; i++) {
    for(var j=0; j<(compare_text.length); j++)
    {
        if(swear_words_arr[i]==compare_text.substring(j,(j+swear_words_arr[i].length)).toLowerCase())
            {
                swear_alert_arr[swear_alert_count]=compare_text.substring(j,(j+swear_words_arr[i].length));
                swear_alert_count++;
            }
    }
}

var alert_text="";  
for(var k=1; k<=swear_alert_count; k++)
{
    alert_text+="\n" + "(" + k + ")  " + swear_alert_arr[k-1];
}

if(swear_alert_count>0) {
    alert("Please refrain from using offensive words"); /* + alert_text */
    document.form1.user_text.select();
    }
else {
    document.form1.submit();
}
}

function select_area() {
document.form1.user_text.select();
}

window.onload=reset_alert_count; 
```

我对此很陌生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:29:37.287

尝试

```
<div id="textArea">
    <span id="myInput" contenteditable="true">kfjdkfj</span>
</div> 
```

和

```
var swear_words_arr=new Array("bad","evil","freak");
var regex = new RegExp('\\b(' + swear_words_arr.join('|') + ')\\b', 'i' );

function validate_user_text() {
    var text = $('#myInput').text();

    if(regex.test(text)) {
        alert("Please refrain from using offensive words"); /* + alert_text */
        $('#myInput').focus();
        return false;
    }

} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rMJxR/3/)

可以[在此处找到更多类似 jQuery 的解决方案](http://jsfiddle.net/arunpjohny/rMJxR/4/)

# c++ - C ++在数组中存储任何子结构/类？

> ID：16073912
> 
> 赞同：2
> 
> 时间：2013-04-18T03:20:15.607
> 
> 标签：c++

在 C++ 中，我定义了一系列结构......

```
struct Component {};
struct SceneGraphNode : Component {};
struct Renderable : Component {};
struct Health : Component {}; 
```

这些很容易成为类，我被告知 C++ 几乎没有区别。

在 Java 中，可以声明一个类型数组`Component`并将任何继承自（继承）的类`Component`放入其中。Java 将它们视为所有组件，并且由于一切都使用智能指针，Java 的“数组”实际上只是一个大小相同的智能指针列表。

但是我知道 Java 处理数组与 C++ 有很大不同。当我检查每个结构的大小时，我得到了以下信息。

```
Component                   // 4
SceneGraphNode : Component  // 8
Renderable : Component      // 8
Health : Component          // 20 
```

这并不奇怪。现在，当我创建一个组件数组时，块的大小显然将是 4（字节），它不会包含任何其他结构。

所以我的问题是，我怎样才能存储一个松散`Components`的列表（即一个可以存储从 Component 继承的任何类/结构的列表）？在 Java 中，这非常简单。当然，在 C++ 中必须有一种简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:26:00.440

您可以有一个指向子类对象的基类指针，即 `Component * sgn = new SceneGraphNode`

所以分配一个 s 数组`Component*`（或者一个向量，如果它需要改变大小）并使每个入口点指向一个派生对象。

```
Component * components[100];
components[0] = new SceneGraphNode;
components[1] = new Renderable;
// so on and so on 
```

除此之外，对于您打算在子类中定义的任何成员函数，您必须在 Component 中有虚函数

```
class Component {
    public:
        virtual void method() = 0;
        virtual int method2(int arg) = 0;
};

class SceneGraphNode : public Component {
    public:
        virtual void method(){
            //body
        }
        virtual int method2(int arg){
            return arg*2;
        }
}; 
```

`virtual`关键字使它在运行时查看指向对象的实际类型并调用其方法，而不是调用指针类型方法。这就是java正常做事的方式。使`= 0`函数“纯虚拟”意味着子类**必须**定义该方法。使用我们上面定义的数组...

```
components[0]->method();
compenents[2]->method2(1); 
```

如果您更喜欢向量而不是数组，可以将数组版本替换为：

```
#include <vector>;
//...
std::vector<Component* > components;
components.push_back(new SceneGraphNode);
components.push_back(new Renderable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:24:49.123

您将它们存储如下

```
std::vector<Component *> components;
Component * c = new Health;
components.push_back( c ); 
```

调用 `components[0] -> method();`将`method()`调用`Health`

这就是 C++ 中多态性的实现方式。

还要确保`method()`Component 是`virtual`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:25:32.270

您可以存储一个`vector`指向基类对象的智能指针，然后可以将派生类对象添加到其中。

例如：

```
 std::vector<std::unique_ptr<Component> > base;
 Component.push_back( std_unique_ptr<Component>(new SceneGraphNode()) ); 
            //^^use correct constructor, this example just show the methodology
 Component.push_back( std_unique_ptr<Component>(new Renderable()) ); 
```

# android - 构建 Android 源代码（版本 4.1.1_r6）时出错：处理“javax/net/ServerSocketFactory.class”时出现问题：

> ID：16073915
> 
> 赞同：0
> 
> 时间：2013-04-18T03:20:38.837
> 
> 标签：android, android-source, android-build

我正在尝试构建 android 源代码版本 4.1.1_r6。一切正常，但突然我收到错误“处理问题”javax/net/ServerSocketFactory.class”

任何帮助将不胜感激。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:25:33.390

转到项目->属性-> java构建路径->库->删除所有包括android jars

转到项目浏览器，右键单击您正在处理的项目，然后 android tools---> fix project properties...

接下来，清理然后构建......

# r - 计算 R 中因子的出现次数，报告的计数为零

> ID：16073918
> 
> 赞同：12
> 
> 时间：2013-04-18T03:21:18.390
> 
> 标签：r, plyr

我想计算数据框中某个因素的出现次数。例如，在下面的代码中计算给定类型的事件数：

```
library(plyr)
events <- data.frame(type = c('A', 'A', 'B'),
                       quantity = c(1, 2, 1))
ddply(events, .(type), summarise, quantity = sum(quantity)) 
```

输出如下：

```
 type quantity
1    A        3
2    B        1 
```

但是，如果我知道有 3 种类型的事件`A`,`B`和`C`, 并且我还想查看是 的计数，`C`该`0`怎么办？换句话说，我希望输出为：

```
 type quantity
1    A        3
2    B        1
3    C        0 
```

我该怎么做呢？感觉应该在某个地方定义一个函数来执行此操作。

以下是我关于如何解决这个问题的两个不太好的想法。

**想法#1：**我知道我可以通过使用`for`循环来做到这一点，但我知道人们普遍认为，如果你在 中使用`for`循环`R`，那么你做错了什么，必须有更好的方法来做到这一点。

**想法#2：**向原始数据框添加虚拟条目。这个解决方案有效，但感觉应该有一个更优雅的解决方案。

```
events <- data.frame(type = c('A', 'A', 'B'),
                       quantity = c(1, 2, 1))
events <- rbind(events, data.frame(type = 'C', quantity = 0))
ddply(events, .(type), summarise, quantity = sum(quantity)) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T03:29:56.623

如果您将`events`变量正确定义为具有所需三个级别的因子，您将免费获得此功能：

```
R> events <- data.frame(type = factor(c('A', 'A', 'B'), c('A','B','C')), 
+                       quantity = c(1, 2, 1))
R> events
  type quantity
1    A        1
2    A        2
3    B        1
R> table(events$type)

A B C 
2 1 0 
R> 
```

简单地调用`table()`该因素已经做了正确的事情，`ddply()`如果你告诉它不要这样做也可以`drop`：

```
R> ddply(events, .(type), summarise, quantity = sum(quantity), .drop=FALSE)
  type quantity
1    A        3
2    B        1
3    C        0
R> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T03:41:19.193

```
> xtabs(quantity~type, events)
type
A B C 
3 1 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-11T08:08:03.743

使用 dplyr 库

```
library(dplyr)
data <- data.frame(level = c('A', 'A', 'B', 'B', 'B', 'C'),
                   value = c(1:6))

data %>%
  group_by(level) %>%
  summarize(count = n()) %>%
  View 
```

如果您还选择执行平均、最小、最大操作，试试这个

```
data %>%
  group_by(level) %>%
  summarise(count = n(), Max_val = max(value), Min_val = min(value)) %>%
  View 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T03:45:12.703

与@DWin 的回答非常相似：

```
> aggregate(quantity~type, events, FUN=sum)
  type quantity
1    A        3
2    B        1
3    C        0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-30T21:43:33.107

在数据中，您将数据框放入您的类别中。

```
table(factor(data, levels = 1:5)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-21T05:03:13.177

将`type`列转为因子并使用`count`.

```
library(dplyr)
library(tidyr)

events %>% count(type = factor(type, c('A', 'B', 'C')), .drop = FALSE)

#  type n
#1    A 2
#2    B 1
#3    C 0 
```

另一种选择是`complete`。

```
events %>%
  count(type) %>%
  complete(type = c('A', 'B', 'C'), fill = list(n = 0)) 
```

# ios6 - 在 Xcode 中连接多个蓝牙 LE 设备

> ID：16073923
> 
> 赞同：0
> 
> 时间：2013-04-18T03:21:49.487
> 
> 标签：ios6, core-bluetooth, bluetooth-lowenergy

最近我开发了一个与 BLE 设备配合良好的 APP，我在我的 APP 中添加了大部分选项和功能。它可以扫描设备，显示列表，然后用户可以选择要连接的设备。我的问题是我的代码只能连接到一个 BLE；如果用户想连接到其他设备，它必须与连接的设备断开连接。有什么选项或方法可以用来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T21:27:33.647

如果您需要一些实际帮助，您应该发布代码，但我可以告诉您，您的问题只是一个设计问题。很明显，您没有`CBCentralManager`以可扩展的方式实现您的方法，无论是对于底层连接还是用户界面。我可以从我的应用程序中的直接经验告诉您，当前 Apple 限制是在任何给定时间 10 个低功耗蓝牙连接（尽管人们可能会尝试声称不同）。然而，虽然系统能够处理 10 个，但该`BTServer`进程（Apple 的蓝牙进程）开始出现这么多连接并经常崩溃。

您需要重新考虑设计`CBPeripheral`和`CBCentralManager`类的实现方式。确保它们没有连接到特定的外围设备，只是您可能遇到的外围设备实例。进行一些设计更改，您应该能够解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:12:54.127

我不知道您的具体情况，但我知道可以连接到多个 BLE 设备，因为我目前正在 Linux 中使用 Bluez 堆栈进行连接。但是，BLE 硬件在可以连接的设备数量方面有所不同，因此可能存在一些仅允许一个连接的硬件。我有一个允许最多 3 个连接的加密狗和另一个最多允许 7 个连接的加密狗。当您尝试建立其他连接时，它会自动断开其他连接之一以建立新连接。

# firefox-addon - 如何使用附加 SDK 在 Firefox 扩展的面板中显示链接？

> ID：16073930
> 
> 赞同：0
> 
> 时间：2013-04-18T03:22:57.160
> 
> 标签：firefox-addon, firefox-addon-sdk

我目前正在使用附加 SDK（小部件）制作 Firefox 扩展。

我在点击小部件时尝试做的是：识别网页上的所有地址，突出显示地址，并显示一个面板（附加到小部件），其中包含指向带有地址的谷歌地图的链接。

我遇到的问题是在面板中显示一个链接。我已经能够在面板中打开和显示实际的站点和 HTML 文件，但想知道如果可能的话，如何在面板中显示可点击的链接。

我已经遍及 Panel API 并没有亲自发现方法。

任何提示表示赞赏。谢谢你。

编辑：我正在使用附加 sdk 版本 1.13.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:19:12.363

您可以只使用`myFile.html`放置在`data`目录中的本地文件。从该文件中，您可以接收`onClick`小部件功能中显示的端口消息。

```
var panel = require("sdk/panel").Panel({
  contentURL: require("sdk/self").data.url("myFile.html");
});

require("sdk/widget").Widget({
  id: "addrs",
  label: "Addresses",
  contentURL: "https://maps.gstatic.com/favicon3.ico",
  panel: panel,
  onClick: function() {
    panel.port.emit('addrs', arrayOfAddresses);
  }

}); 
```

有关文件结构和 myFile.html 代码的更多信息，请阅读 Panel 文档的[获取用户输入](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html#Getting%20User%20Input)部分。

# ruby - 带有负数的 Ruby 模 3 不直观

> ID：16073932
> 
> 赞同：7
> 
> 时间：2013-04-18T03:23:21.397
> 
> 标签：ruby, modulo

带有负数的 Ruby 模规则不清楚。在 IRB 中：

```
-7 % 3 == 2 
```

应该是`1`！为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T03:53:58.207

因为 -7/3 在 Ruby 的整数除法语义下是 -3。3*-3 为 -9，因此余数为 2。

根据[文档](http://ruby-doc.org/core-2.0/Numeric.html#method-i-25)，x 模 y 定义为：

```
x-y*(x/y).floor 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T03:55:33.683

当其中一个操作数`%`为负时，对于返回什么结果没有明确的最佳答案。每种编程语言都有自己的规则。[Modulo 操作](http://en.wikipedia.org/wiki/Modulo_operation)的 Wikipedia 页面有一个巨大的表格，其中列出了每种编程语言如何决定处理这个问题，并且没有明确的共识：

```
$ # Modulus sign is:
$
$ curl 'http://en.wikipedia.org/w/index.php?title=Modulo_operation&action=edit&section=1' \
    | egrep -o 'Divisor|Dividend|Always positive|Closest to zero|Not defined|Implementation defined' \
    | sort | uniq -c | sort -nr

  67 Dividend
  42 Divisor
   7 Always positive
   4 Closest to zero
   2 Not defined
   2 Implementation defined 
```

有些选择左侧操作数的符号，有些选择右侧操作数。其他人不指定。例如，[*The C Programming Language*](https://rads.stackoverflow.com/amzn/click/com/0131103628) 说：

> % [is] 负操作数的结果符号取决于机器

C 没有对如何处理这个问题做出特定的选择，而是返回所使用的特定硬件或编译器选择实现的任何内容！这似乎已在 C 编程语言标准的更新版本中标准化。

如果您想在 Ruby 中获取特定版本，您可以调用两种不同的方法，[`modulo`即 aka`%`](http://ruby-doc.org/core-2.0/Numeric.html#method-i-modulo)和[`remainder`](http://ruby-doc.org/core-2.0/Numeric.html#method-i-remainder)，它们对负数有不同的行为：

```
$ irb
irb(main):001:0> -7.modulo(3)
=> 2
irb(main):002:0> -7.remainder(3)
=> -1 
```

在其他没有内置方法的语言中，您最终可能会使用`%`两次来获得所需的符号。

# java - 需要帮助使用油漆显示我的图像

> ID：16073936
> 
> 赞同：0
> 
> 时间：2013-04-18T03:23:49.053
> 
> 标签：java, image, graphics, paint, game-engine

但我花了几个小时试图运行这段代码，但它只是不工作。首先它应该将图像打印到我的屏幕上。到目前为止，它不想打印我的图像，但它仍然会打印矩形和字符串。我已经尝试了很多东西，我什至不确定它是否正在加载图像。有谁知道我做错了什么？如果有帮助，我正在使用 NetBeans

```
 public class Screen extends JPanel implements Runnable {

        public Thread thread = new Thread(this);
        private Image Cat;

public Screen(Frame frame) {

        thread.start();
}
public void run(){
    System.out.println("this is running");
    loadPic();
    repaint();

        try{
        Thread.sleep(1);

    } catch(Exception e) {}
    }

public void loadPic(){
    Cat = new ImageIcon("catIcon1.png").getImage();
    System.out.println("Image Loaded!");
    repaint();
}
public void paint(Graphics g){

    g.drawString("sup tho!", 250, 250);
    g.fillRect(50,50,50,50);

    System.out.println("this works?");

          g.drawImage(Cat, 0, 0, null);
          System.out.println("Cat should be drawn");

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:38:30.787

我运行您的代码，一切似乎都正常，并且图像显示正确，您确定图像已加载吗？尝试另一个图像并确保图像在您项目的正确目录中。

# performance - 如何测试 Web 应用程序的性能？

> ID：16073937
> 
> 赞同：0
> 
> 时间：2013-04-18T03:24:01.950
> 
> 标签：performance, web-applications

我们有一个多年前（不是我的团队）设计的 Web 应用程序（uisng`ASP.Net`和）。`Alaska WAA`它主要`Alaska’s Xbase++` 通过WAA使用代码来查询数据库并生成`HTML`响应。早些时候它在 win 2003 和 IIS 6 上运行。现在这个 Web 应用程序已迁移到新环境.. Windows 2008 和 IIS7（我们进行了迁移）。

此应用程序`Mysql`用作后端并显示存储在共享驱动器中的一些图像。问题是该网站的性能并不令人满意。页面加载时间超过 10-12 秒（早期设置并非如此）。现在，我们要找出延迟的根本原因。我们怀疑数据库服务器和共享驱动器的性能。我们如何确认这一点？是否有任何工具可以帮助我们找出延迟的原因？( `Alaska WAA`– Web Application Adapter - 它是一种应用程序服务器，它将在服务器上运行 Xbase++ 代码。`IIS`将请求`WAA`（如 CGI 应用程序）`WAA`并将进行服务器端处理。如从 DB 获取详细信息，生成 HTML 响应并返回`IIS`) 或者 Xbase++ 代码库非常庞大，我们无法通过该代码来微调查询。有什么方法可以测试数据库服务器性能、共享驱动器性能、`CGI`性能..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:22:04.530

第一个问题是新平台是专门针对 Windows Server 2008 和 IIS 7.0 还是 Windows Server 2008 R2 与 IIS 7.5。Windows Server 2008 中存在显着的文件性能问题，这些问题很可能会导致迁移导致您的性能问题。迁移到 Windows Server 2008 R2（如果您不在的话）可能足以解决这些问题。

但是，在可以帮助隔离 Web 性能问题的位置和原因的工具领域内，您可能会从我们的[Web 性能监视器](http://www.solarwinds.com/web-performance-monitor.aspx)中找到一些价值。提供 30 天免费试用，这可能足以隔离和解决此问题。

# neo4j - 通过rest api在neo4j密码上创建索引节点

> ID：16073938
> 
> 赞同：0
> 
> 时间：2013-04-18T03:24:06.553
> 
> 标签：neo4j, cypher, py2neo

我正在尝试使用以下语法在密码中创建索引节点：

```
neo4j-sh (?)$ start m=node:person(UID= "1")  return m;
==> +------------+
==> | m          |
==> +------------+
==> | Node[64]{} |
==> +------------+
==> 1 row
==> 0 ms
==> 
neo4j-sh (?)$ start n = node(64) return n.UID;
==> EntityNotFoundException: The property 'UID' does not exist on Node[64] 
```

为什么节点似乎已创建，但我正在创建的属性似乎已成功返回，但不存在？

有没有更简单的方法？我曾经使用py2neo的功能：

```
neo4j.GraphDatabaseService("http://localhost:7474/db/data/").get_or_create_indexed_node(index='person', key='UID', value=self.id, properties={'UID' : self.id}) 
```

但这似乎已被弃用——它不再适用于最新版本的 py2neo，它似乎`properties`不再支持该论点（对于未来的人，`index`被替换为`index_name`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:25:56.820

索引和属性是两个不同的东西。

您的图表中似乎有一个节点，其索引名为`person`和键/值对 UID：“1”。您的第一个查询通过其索引获取您的节点。但是索引不是节点的属性。您可以启动 webadmin 以可视化图表中索引的管理方式。

据我所知，文档中没有关于如何使用密码创建索引的内容，但您可以轻松地使用 REST API 来操作它们（[链接](http://docs.neo4j.org/chunked/stable/rest-api-indexes.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:10:26.227

该方法尚未被弃用，并且`properties`参数仍然有效，与以前一样。正如您所确定的，唯一的变化是第一个参数的从`index`到的变化。`index_name`

文档在这里：

[http://book.py2neo.org/en/latest/graphs_nodes_relationships.html#py2neo.neo4j.GraphDatabaseService.get_or_create_indexed_node](http://book.py2neo.org/en/latest/graphs_nodes_relationships.html#py2neo.neo4j.GraphDatabaseService.get_or_create_indexed_node)

请注意，`properties`只有在节点不存在时才会实际使用，即在执行“创建”时而不是在执行“获取”时。否则，现有节点将保持原样。

# docpad - 向 Docpad 站点添加搜索表单

> ID：16073939
> 
> 赞同：2
> 
> 时间：2013-04-18T03:24:06.623
> 
> 标签：docpad

有没有办法让本地搜索表单在 Docpad 中索引搜索结果。动态搜索页面示例不起作用，查看代码对我没有任何帮助。我认为一个搜索表单示例和一个基本的联系表单示例对于像我这样希望采用 Docpad 并将其应用于他们的工作流程的新手来说会很有用。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T11:39:49.817

取决于你的意思是不工作。您是否能够安装 Kitchin Sink 骨架？此框架中的搜索页面从 URL 中读取查询词，并搜索网站中标题中包含“咖啡”一词的所有文档

```
@getCollection('documents').findAll({title:$like:query}) 
```

您应该只获得标题中带有“咖啡”的文档的链接列表——这本身并不令人兴奋。

如果您的意思是您正在尝试在自己的项目中实现此搜索页面，那么您必须确保在您的项目中安装了 docpad 插件[clean urls](https://npmjs.org/package/docpad-plugin-cleanurls)，这似乎有点“陷阱” 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T14:59:46.330

您可以像这样在 url 上传递参数：http: [//yoursite.com/search ?query=your-query](http://yoursite.com/search?query=your-query)

这是解决问题的代码

```
### coffee
layout: 'default'
title: 'Search Results'
dynamic: true
###

if @req.query.query
    query = @req.query.query

    h2 "Searching for #{query}"

    ul ->
        for document in @getCollection('documents').findAll({title:$like:query}).toJSON()
            li 'typeof': 'sioc:Page', about: document.url, class: ('active'  if @document.url is document.url), ->
                a href: document.url, property: 'dc:title', ->
                    text document.title

else
    h2 "No query provided" 
```

# matlab - 在 MATLAB 中执行数值积分时出现未定义的变量错误

> ID：16073942
> 
> 赞同：0
> 
> 时间：2013-04-18T03:24:25.697
> 
> 标签：matlab

对于 matlab 问题，我需要整合 `fun2 = @(x) 1/(sigma2*(2*pi)^(.5))*exp(-.5*((x-xbar2)/sigma2)^2)`, where `sigma2=50`, `xbar2=1500`.

曲线下的面积应为 0.05，因此我将其设置为`solve(integrate(fun2,-inf,u)==.05,u)`但出现错误“未定义的函数或变量 'u'”。

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:56:20.240

So here we go:

```
syms x u
fun = int(1./(50.*(2.*pi).^(.5)).*exp(-.5.*((x-1500)./50).^2),-Inf,u) - .05;
double(solve(fun,u)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:36:44.753

这是一个不需要符号工具箱的解决方案；Matlab的标准[寻根算法](http://en.wikipedia.org/wiki/Root-finding_algorithm)：

```
>> f = @(u) quadgk(fun2, -inf,u) - 0.05;
>> fzero(f,xbar2)

ans =

     1.417757318652430e+003 
```

（我使用`quadgk`是因为我在没有`integrate`. 的 R2010 上。无论如何都是一样的）。

求根算法`fzero`找到匿名函数的零通道`f`，它只是你的原始`fun2`值减去你想要的值——当原始积分的值达到你选择的值时，它正好通过零。

# c - 按位连接

> ID：16073943
> 
> 赞同：1
> 
> 时间：2013-04-18T03:24:27.870
> 
> 标签：c, bitwise-operators

我有以下内容：

```
char *pointer = decimal_to_binary(192) // yields 11000000
char *pointer2 = decimal_to_binary(168) // yields 10101000 
```

我正在尝试将它们连接成：

```
1100000010101000 
```

我正在参考：[连接不同长度的二进制数，](https://stackoverflow.com/questions/13222374/concatenate-binary-numbers-of-different-lengths)目前正在使用：

```
unsigned long pointer3 = (*pointer << 16) | *pointer2; 
```

这给出了输出：

```
1100010000000000110001 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:07:11.420

您没有展示如何打印任何内容，这使得您的问题难以解释。`pointer`然而，这个语句被不可挽回地破坏了，因为它对连接and指向的字符串没有任何作用`pointer2`：

```
unsigned long pointer3 = (*pointer << 16) | *pointer2; 
```

这采用`pointer`指向 (a `1`) 的第一个字符并将值左移 16 位，然后在`pointer2`指向 (another `1`) 的第一个字符中添加 (or)，并将整数分配给 misnamed `pointer3`。因此，它得到值：

```
pointer3 = 0x00310031; 
```

这个问题需要一些解释，但做出一些合理（但不一定准确）的假设，这段代码可能会做你所追求的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static char *decimal_to_binary(unsigned char byte)
{
    char *result = malloc(9);
    if (result != 0)
    {
        char *digit = result;
        for (int i = 0; i < 8; i++)
            *digit++ = ((byte >> (7 - i)) & 0x01) + '0';
        *digit = '\0';
    }
    return result;
}

int main(void)
{
    char *pointer1 = decimal_to_binary(192);
    char *pointer2 = decimal_to_binary(168);
    char  concatenated[17];
    unsigned long pointer3 = (*pointer1 << 16) | *pointer2;

    strcpy(&concatenated[0], pointer1);
    strcpy(&concatenated[8], pointer2);

    printf("P1 = <<%s>>; P2 = <<%s>>; P3 = 0x%08lX; C = <<%s>>\n",
           pointer1, pointer2, pointer3, concatenated);

    free(pointer1);
    free(pointer2);
    return(0);
} 
```

输出：

```
P1 = <<11000000>>; P2 = <<10101000>>; P3 = 0x00310031; C = <<1100000010101000>> 
```

请注意，使用的代码`decimal_to_binary()`并未注意避免（错误）使用空指针。的设计`decimal_to_binary()`也不尽如人意；那些`free()`电话很容易被遗忘。更好的设计是：

```
void decimal_to_binary(unsigned char byte, char buffer[9]); 
```

其中调用代码提供写入二进制输出的缓冲区。还有其他编写循环的方法`decimal_to_binary()`; 有些甚至可能比这里选择的更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:08:46.867

好的，首先你不应该用整数初始化指针；编译器可能会这样警告你：

```
warning: initialization makes pointer from integer without a cast [enabled by default]
   char* pointer1 = 0xc0; 
```

如果您不熟悉十六进制表示法，请参考[这里](http://en.wikipedia.org/wiki/Hexadecimal)；例如，您会看到从二进制转换为十六进制比从十进制转换为十六进制要简单得多。

如果您想表示这些 8 位数字，您可以将它们直接分配给`unsigned char`变量，就像我在这里所做的那样（例如，将此代码粘贴到文件“test.c”中）：

```
#include <stdio.h>

void main() {
  unsigned char num1 = 0xc0; /* Same as binary 11000000 in hex */
  unsigned char num2 = 0xa8; /* Same as binary 10101000 in hex */

  unsigned long result = (num1 << 8) | num2;
  printf("0x%x\n", result);
} 
```

您可以使用 编译它`gcc -o test test.c`，它在运行时输出：（`0xc0a8`这与 1100000010101000 相同）。

`*pointer`如果您像以前那样将数字分配给指针，当您尝试使用and取消引用它们时，您可能会遇到“分段错误”或“访问冲突” `*pointer2`，因为这意味着您希望将值存储在指针地址中，这可能不在您的程序地址空间中。

由于`result`是长（32 位），它肯定可以很好地保存您的 16 位数字，但`num1`必须`num2`是`unsigned char`，所以当您左移和 OR 时，它不会使整个事情变成负数 - 在有符号的二进制文件中number 最左边的位设置为 1 意味着它是一个负数，所以如果你使用普通的`char`，它会符号扩展 32 位结果，所以它仍然是负数：`0xffffffa8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:02:02.813

首先只在指针中分配一个数字，就像 在这16 次 `unsigned long pointer3 = *pointer;` 左移之后一样。`pointer3``pinter3=pointer3<<16;` `pointer3=pointer3|*pointer2;`

我认为这会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T08:59:12.783

不需要像你在做的那样移动 16

```
unsigned long pointer3 = (*pointer << 16) | *pointer2; 
```

*指针*只需要移动 8。
以下代码将实现您想要做的事情。

```
#include <stdio.h>
#include <string.h>

void print_binary(int num) {
    short rem[16] = {0};
    for (short i = 1; i <= 16; i++) {
        rem[16-i] = num%2;
        num = num >> 1;
    }
    for (short int i = 0; i < 16; i++) {
        printf("%d", rem[i]);
    }
    printf("\n");
}

int main (int argc, char* argv[]) {

    unsigned char num1 = 192;
    unsigned char num2 = 168;
    int num3 = 0;
    num3 = (num1 << 8) | num2;
    printf("first number: %d\n", num1);
    print_binary(num1);

    printf("second number: %d\n", num2);
    print_binary(num2);

    printf("The number is %d\n", num3);
    print_binary(num3);

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-01T19:53:22.883

这个看起来很容易理解）

```
 #include <iostream>
    #include <stdio.h>
    #include <stdlib.h>
    #include <math.h>
    using namespace std;

    int main()
    {
    int a = 32; // 100000
    int b = 5; // 101
    int step=0;
    int siz=0;
    while(1){
    if(pow(2,step) < b){
    step++;
    continue;
    }
    else{
    siz = step;
    break;
    }

    }
    a = a<<siz;
    a = a | b;
    cout<<a;
    } 
```

# java - 如何在 IntelliJ IDEA 中启动一个新的 vaadin 项目？

> ID：16073944
> 
> 赞同：3
> 
> 时间：2013-04-18T03:24:28.883
> 
> 标签：java, intellij-idea, vaadin

**基于 Maven 原型方法的答案有效。如果 Vaadin 的 IntelliJ 向导/模板得到修复，我将根据使用内置向导更新并接受答案。***

我设法从终端窗口使用 maven 原型创建了一个新项目，然后将其导入 IntelliJ IDEA，配置了 GWT 方面，但现在当我运行它时说：

```
"Error running unnamed: No GWT Modules found in 'projectname'" 
```

我承认自己是 Java、IntellIJ 和 Vaadin 的初学者，更不用说 GWT。

我还尝试使用 IntelliJ IDEA (Ultimate) 附带的本机 Vaadin 插件创建一个新的 Vaadin 项目。我正在使用 Ultimate，但这是一个试用版。

![在此处输入图像描述](https://i.stack.imgur.com/dv7Wo.png)

**更新：：**最初我在“新建项目”窗口的可用项目模板列表中看不到任何 Vaadin 项目。那是因为我对 IntelliJ 的新项目向导中的两层新项目的想法感到困惑。现在整理出来。

**Update2::**我可以按照以下两个答案中的任何一个的步骤操作，并获得一个可以构建但无法运行的项目。我认为我添加 GWT 运行目标是正确的，因为在我这样做之前，运行菜单完全变灰。我相信它是灰色的，因为 GWT 方面的模块列表中没有列出任何模块。

![在此处输入图像描述](https://i.stack.imgur.com/egPMv.png)

我假设我必须创建一个新的运行/调试配置，该配置必须是以下之一，并且 GWT 是有意义的，因为 vaadin 基于 GWT：

![在此处输入图像描述](https://i.stack.imgur.com/4vQfR.png)

添加 GWT 后，我仍然得到与从 maven 原型开始时最初遇到的相同的错误：没有 GWT 模块。而且我不知道人们在谈论从下拉模块中选择什么...

![在此处输入图像描述](https://i.stack.imgur.com/lQON4.png)

**Update3** 仍然无法使以下任一解决方案起作用。卡在这个屏幕上，无法让它显示“要加载的 GWT 模块”组合框中的任何模块，该组合框仍然灰显。我相信这是我应该选择的下拉模块，但下面没有任何内容告诉我如何让它不灰显（启用）：

![在此处输入图像描述](https://i.stack.imgur.com/pceyV.png)

我最终设法 (a) 手动添加 GWT facet，(b) 配置它，并且 (c) 现在它将运行。这会导致运行时错误（该应用程序无法在 Web 浏览器中打开，但很明显它非常接近工作。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T06:50:14.020

我是这样做的。

首先使用 maven artefact 创建 Vaadin 项目。

```
C:\dev> mvn archetype:generate -DarchetypeGroupId=com.vaadin -DarchetypeArtifactId=vaadin-archetype-application -DarchetypeVersion=7.0.4 -Dpackaging=war
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom >>>
[INFO]
[INFO] <<< maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom <<<
[INFO]
[INFO] --- maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom ---
[INFO] Generating project in Interactive mode
[INFO] Archetype repository missing. Using the one from [com.vaadin:vaadin-archetype-application:7.0.4] found in catalog remote
Define value for property 'groupId': : maba
Define value for property 'artifactId': : vaadin-app
Define value for property 'version':  1.0-SNAPSHOT: :
Define value for property 'package':  maba: :
Confirm properties configuration:
groupId: maba
artifactId: vaadin-app
version: 1.0-SNAPSHOT
package: maba
 Y: :
[INFO] ----------------------------------------------------------------------------
[INFO] Using following parameters for creating project from Archetype: vaadin-archetype-application:7.0.4
[INFO] ----------------------------------------------------------------------------
[INFO] Parameter: groupId, Value: maba
[INFO] Parameter: artifactId, Value: vaadin-app
[INFO] Parameter: version, Value: 1.0-SNAPSHOT
[INFO] Parameter: package, Value: maba
[INFO] Parameter: packageInPathFormat, Value: maba
[INFO] Parameter: package, Value: maba
[INFO] Parameter: version, Value: 1.0-SNAPSHOT
[INFO] Parameter: groupId, Value: maba
[INFO] Parameter: artifactId, Value: vaadin-app
[INFO] project created from Archetype in dir: C:\dev\vaadin-app
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 28.122s
[INFO] Finished at: Fri Apr 19 08:05:49 CEST 2013
[INFO] Final Memory: 12M/152M
[INFO] ------------------------------------------------------------------------
C:\dev> 
```

然后进入新创建的目录并运行`mvn install`以获取所有依赖项并重新开始。

```
c:\dev\vaadin-app> mvn install
[INFO] Scanning for projects...
    ...
    ------ LOTS OF STUFF GOING ON ------
    ...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3:30.373s
[INFO] Finished at: Fri Apr 19 08:13:07 CEST 2013
[INFO] Final Memory: 24M/296M
[INFO] ------------------------------------------------------------------------ 
```

现在通过指向新创建的`pom.xml`.

![在此处输入图像描述](https://i.stack.imgur.com/3rEMu.png)

一切看起来都很好。在右上角的绿色框中选择配置 GWT 框架。

![在此处输入图像描述](https://i.stack.imgur.com/zI7GT.png)

现在选择`Edit Configurations...`下拉菜单。

![在此处输入图像描述](https://i.stack.imgur.com/eNLoh.png)

选择`GWT Configuration`.

![在此处输入图像描述](https://i.stack.imgur.com/EnSSv.png)

给它一个名字，然后`Module`从下拉列表中选择。

![在此处输入图像描述](https://i.stack.imgur.com/uB3X1.png)

现在，您现在可以选择`GWT Module to load`两个选项。

![在此处输入图像描述](https://i.stack.imgur.com/8sAyF.png)

我选择运行应用程序。在这种情况下，它会给你一个错误。

![在此处输入图像描述](https://i.stack.imgur.com/1jVda.png)

目前这似乎是[一个已知错误](http://vaadin-support.myjetbrains.com/youtrack/issue/VS-17)。您必须`vaadin-client-compiler.jar`手动添加到类路径。

按工具栏中的`Project Structure`按钮。

![在此处输入图像描述](https://i.stack.imgur.com/x0qS1.png)

选择`Dependencies`选项卡`vaadin-app`并选择添加`Jars or directories...`。

![在此处输入图像描述](https://i.stack.imgur.com/Y4jPd.png)

导航到本地 maven 存储库并找到`vaadin-client-compiler-<version>.jar`.

在 Mac OS 和 Linux/Unix 上，可以在以下位置找到： `~/.m2/repository/com/vaadin/vaadin-client-compiler/7.0.4/...`

![在此处输入图像描述](https://i.stack.imgur.com/Nz2e3.png)

在窗口中再次按`Ok`和。`Ok``Project Structure`

现在再次运行应用程序。没有更多的错误。

![在此处输入图像描述](https://i.stack.imgur.com/JSOGb.png)

* * *

现在，我不是 Vaadin 专家，所以从这里开始你就靠你自己了。

玩得开心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:38:08.533

使用 Vaadin 插件：

新建项目，选择 Java 模块 - 输入项目名称和位置，然后单击下一步。

选择“Web Application”和“Vaadin Application”，勾选“Create Sample vaad application”并输入类名。选择一个 vaadin 版本。

点击完成。

请注意，生成的示例应用程序不会编译（！），因为我认为它来自 Vaadin 7 的 beta 版本。

```
/* As Generated */
public class MySampleVaadinApplication extends UI {
  @Override
  public void init(VaadinRequest request) {
    Label label = new Label("Hello Vaadin user");
    addComponent(label);
 }
} 
```

这就是它*应该*的样子

```
/* As it needs to be */
public class MySampleVaadinApplication extends UI {
  @Override
  public void init(VaadinRequest request) {
    Label label = new Label("Hello Vaadin user");
    setContent(label);
 }
} 
```

请注意，用于 intellij 的 Vaadin 插件不是由 Vaadin 开发团队创建或维护的，而是由其他人创建或维护的，因此它没有保持最新状态。没有它，在 IntelliJ 中开发 Vaadin 应用程序是绝对可能的——我们做到了。

> > 我承认自己是 Java、IntellIJ 和 Vaadin 的初学者，更不用说 GWT。

祝你好运 - 你有很多事情要搞定！

![选择 Java 模块](https://i.stack.imgur.com/IjTNW.png) ![选择](https://i.stack.imgur.com/WywFc.png)

# ember.js - mocha 测试在 yeoman ember 生成器中不起作用

> ID：16073949
> 
> 赞同：2
> 
> 时间：2013-04-18T03:25:03.120
> 
> 标签：ember.js, mocha.js, yeoman

我几乎没有修改 ember 生成器生成的代码

`yo ember`

并稍微改变一下 test/spec/test.js

```
'use strict';
(function () {
    describe('Give it some context', function () {
        describe('maybe a bit more context here', function () {
            it('should equal to the title', function () {
                var title = document.title;
                title.should.equal('Ember Starter Kit');
                            console.log(title) //doesn't output anything in the terminal
            });
            it('should equal to a number', function () {
                1.should.equal(1);
            });
        });
    });
})(); 
```

有两点很奇怪：

1.  console.log 不会在终端中输出任何内容
2.  它显示 0 测试：

    运行“mocha:all”（mocha）任务测试：http:// *。*.*.*/index.html

    0 个测试完成（1 毫秒）

    完成，没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T01:26:15.503

我注意到，当您获得“0 次测试完成”时，测试文件中存在错误。

你的测试有两个问题：

1.  console.log(title) 后缺少分号
2.  在 Integer 上执行方法是语法错误。尝试以下操作：

`expect(1).to.equal(1);`

此外，请务必在`index.html`Chai 包含之后包含以下行（这样才`should`有效）：

```
...
<!-- assertion framework -->
<script src="lib/chai.js"></script>
<script>var expect = chai.expect</script>
<script>var should = chai.should()</script>
... 
```

这会导致您的测试运行。但是，我没有控制台日志记录问题的答案。我自己在寻找答案。似乎是 grunt-mocha 和 PhantomJS 的东西。

**编辑：**原来，控制台登录 grunt-mocha 被禁用：[grunt-mocha source](https://github.com/kmiyashiro/grunt-mocha/blob/master/tasks/mocha.js#L100-L101 "来源在这里")。

如果您进入`node_modules/grunt-mocha/tasks/mocha.js`项目目录，您可以取消注释第 101 行，并且日志记录将适用于您的项目。

完整更新的测试文件：

```
/*global describe, it, document, expect */
'use strict';
(function () {
    describe('Give it some context', function () {
        describe('maybe a bit more context here', function () {
            it('should equal to the title', function () {
                var title = document.title;
                title.should.equal('Ember Starter Kit');
                            console.log(title); //doesn't output anything in the terminal
            });
            it('should equal to a number', function () {
                expect(1).to.equal(1);
            });
        });
    });
})(); 
```

**编辑：**来自 grunt-mocha 的开发者：

*是的，取消注释该行以在命令行中获取控制台输出......虽然通常您在运行自动化测试时不希望这样做，因此默认情况下它被禁用。如果你想真正调试，我建议在浏览器中打开规范并使用浏览器控制台/调试器。奖励是您可以单击套件/测试，以便它只运行您感兴趣的测试。*

# java - Long 型整数计算

> ID：16073963
> 
> 赞同：2
> 
> 时间：2013-04-18T03:26:35.763
> 
> 标签：java, long-integer

我现在正在制作一个计算长整数的源代码，但我不知道为什么这个计算给了我错误的答案。

```
long l;
//variable l is where you input long, signed int

l *= 0x6869L;
if(l == 0xeaaeb43e477b8487L)
    System.out.println("Correct!"); 
```

我做了 0xeaaeb43e477b8487 / 0x6869 = 0xFFFFCBBB6D375815 但是当我计算 0xFFFFCBBB6D375815 * 0x6869 时给出 0xEAAEB43E477BA89D。

为什么会发生这种事情？这个数学问题的真正答案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:45:18.333

这是因为当您将 0xeaaeb43e477b8487L / 0x6869 相除时，您会丢失余数，从而导致精度损失。

```
0xeaaeb43e477b8487L % 0x6869= -9238 
```

如果我们考虑到它，我们会得到

```
0xEAAEB43E477BA89DL -9238 =  0xeaaeb43e477b8487 
```

这行得通

```
if ((l - 9238) == 0xeaaeb43e477b8487L)
    System.out.println("Correct!"); 
```

# visual-studio - 构建后出错 - Web Essentials 2012

> ID：16073964
> 
> 赞同：16
> 
> 时间：2013-04-18T03:26:44.893
> 
> 标签：visual-studio, asp.net-mvc-4, web-essentials

对于我的 asp.net MVC4 应用程序，我经常遇到此错误。该项目确实构建正常，但它在输出中显示一条消息。

```
18/04/2013 3:17:57 p.m.: Object reference not set to an instance of an object.
at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder() 
```

我正在使用 VS2012 更新 1。Web Essentials 2012 版本 2.6。

这不是主要的，但很烦人。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-13T04:48:14.147

这是旧的，但我会添加我的问题。

它发生在带有 Web Essentials 的 VS2012 上，仅在选择文件夹并且我请求构建 (CTRL+SHIFT+B) 时才会发生。如果我选择一个项目，错误就会消失。

```
 13/04/2015 01:42:47: Parâmetro incorreto. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
13/04/2015 01:42:47: Parâmetro incorreto. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
13/04/2015 01:42:47: Parâmetro incorreto. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder()
   at EnvDTE.Properties.Item(Object index)
   at MadsKristensen.EditorExtensions.ProjectHelpers.GetRootFolder() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T16:09:35.607

这是一个较老的问题，但在 Google 上却是热门话题。所以这是我的答案。我发现这是由于 Visual Studio 和 Web Essential 2012 扩展中的某些版本冲突或早期错误造成的。通过 RTM 安装 Visual Studio 2012 和最新的 Web Essentials（发布本文时为 3.2 版），我可以重现此错误。

安装 Visual Studio 的最新更新为我解决了这个问题。更新

要确认您正在运行的 Visual Studio 版本，请转到`Help -> About`

更新 3 或更高版本应该可以解决问题

> Microsoft Visual Studio Ultimate 2012
> 版本 11.0.60610.01 更新 3

这是Microsoft 网站上[Visual Studio 更新的链接](http://go.microsoft.com/fwlink/?LinkID=290979)

# android - 如何在 Android 中杀死 PostDelayed 方法

> ID：16073968
> 
> 赞同：7
> 
> 时间：2013-04-18T03:27:02.563
> 
> 标签：android, android-intent, android-activity, postdelayed

我使用了postedDelayed 方法来刷新我的Activity，效果很好。但问题是，即使我按下后退按钮后延迟方法回调上一个活动..

//30000 毫秒后延迟刷新活动的处理程序

```
mHandler.postDelayed(new Runnable() {
public void run() {
               dostuff();

        }
            }, 30000);
    }

protected void dostuff() {
Intent intent = getIntent();
finish();startActivity(intent);
Toast.makeText(getApplicationContext(), "refreshed", Toast.LENGTH_LONG).show();
}

public void onBackPressed() {
        super.onBackPressed();
        finish();
        mHandler.removeCallbacks(null);
        }

protected void onStop() {
            mHandler.removeCallbacks(null);
        super.onStop();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T04:54:20.717

你就用这个它可能对你有帮助

```
 Runnable runobj=new Runnable() {
public void run()
{
 dostuff();

 }
  };
 mHandler.postDelayed(runobj, 30000);
   }
public void onBackPressed() 
{
super.onBackPressed();
mHandler.removeCallbacks(runobj);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T03:31:26.680

解决方法是：

在做 dostuff() 方法的时候，只要检查一下是否 Activity.isFinising() 就可以了。如果它正在完成，只需返回。

当您按下后，活动将完成，之后如果 doStuff() 执行，它不会做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:33:14.697

mHandler.removeCallbacks(null);。您将 null 作为参数传递。传递一个 Runnable onject 。那应该行得通。

```
public final void removeCallbacks (Runnable r) 
```

使用上述。

在 API 级别 1 中添加删除消息队列中的 Runnable r 的所有待处理帖子。

[http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29](http://developer.android.com/reference/android/os/Handler.html#removeCallbacks%28java.lang.Runnable%29)

编辑：示例

```
Runnable runnable = new Runnable() {
@Override
public void run() {
    // execute some code
}
};

Handler handler = new Handler();  
handler.postDelayed(runnable, 10000);
handler.removeCallbacks(runnable); 
```

# java - java.lang.ArrayIndexOutOfBoundsException 是什么意思？

> ID：16073971
> 
> 赞同：1
> 
> 时间：2013-04-18T03:27:16.047
> 
> 标签：java, arrays

我是 java 新手，今天我开始研究数组，但我迷路了。我正在尝试将一些值放入数组中，但出现错误`java.lang.ArrayIndexOutOfBoundsException`。

这是我到目前为止所做的。

```
 int n=6; 
      int[]A= new int [1];

      for(i=0;i<n;i++){
          A[i]=keyboard.nextInt();
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-12T20:46:26.977

java.lang.ArrayIndexOutOfBoundsException means you are trying to access a array index that doesn't exist.

The problem is that your array is of size one.However, you are going through that loop six times. You can either make n equal to one, or increase the size of your array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:32:40.637

问题是你的数组的大小是一。您将数组的大小设置在数组声明的括号之间。

您的 for 循环进行了 6 次。您可以将数组的大小更改为 6。

诠释 n = 6;

```
 int[]A= new int [6];

for(i=0;i<=n;i++)
   {
      A[i]=keyboard.nextInt();

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:31:35.807

这意味着它所说的那种。您正在尝试访问您定义的数组边界之外的元素。

你的数组 new int [1]; 只会容纳一个元素。我认为你的意思是 int [n];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T03:32:33.520

您正在尝试访问您无权访问的内存。您的数组被声明为大小为 1，并且您正在设置 n = 6。因此，遍历数组 A，您正在尝试访问尚未声明的数组的 5 个假想位置。因此，数组索引超出范围。

你可能想要的是这样的：

```
 int n=6;

      int[]A= new int [n];

    for(i=0;i<n;i++)
   {
      A[i]=keyboard.nextInt();

   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T03:33:23.303

在这里，您已将数组的大小声明为 1，但您正在遍历数组 6 次。

在你的 for 循环中你应该写

```
for (int i=0; i< A.length; i++ ){

  A[i]=keyboard.nextInt();
} 
```

所以在这种情况下，你的循环只会遍历一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T03:33:41.747

java.lang.ArrayIndexOutOfBoundsException 意味着您正在尝试访问不存在的数组索引。例如，您有一个数组

```
 int []array=new int[3]; 
```

如果您尝试访问数组 [4]，它将给您 ArrayIndexOutOfBoundsException。最重要的是，每当您访问超出其边界的数组时，您都会收到此异常。

:D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T03:50:48.223

每当你遇到错误时，总是首先检查它的 API。例如[这里](http://docs.oracle.com/javase/7/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)是 ArrayIndexOutOfBoundException 的文档。

在您的代码中，您通过说创建一个大小为 1 的数组`new int [1]`，现在当您遍历数组并检查 的值时`A[1]`，您正在尝试访问数组的第二个元素，该元素甚至不存在，因为数组索引以 0 开头. 因此，**您正在访问的索引超出范围**。

# vba - DoEvents、等待和编辑

> ID：16073972
> 
> 赞同：5
> 
> 时间：2013-04-18T03:27:18.707
> 
> 标签：vba, user-controls, wait, doevents

我有一组代码，其中包含：

```
Application.Wait (Now + TimeValue("4:00:00")) 
```

这实际上是将宏从凌晨 3 点（当它完成运行代码时）到早上 7 点（应该恢复时）暂停了四个小时的窗口。代码本质上是一个无限循环。

我希望用户能够在那段时间内控制编辑某些单元格。我努力了

```
DoEvents 
```

但是还没有找到保持宏运行的方法，但是在宏除了等待什么都不做的时候为用户提供控制。

任何见解将不胜感激。谢谢！

编辑：

还有一个后续问题。我创建了这个宏来引用实际的宏“Production_Board”。我希望这个宏一直运行并尽可能频繁地刷新。通过再次使用 goto startagain，由于“ontime”延迟间隔，它甚至在宏启动之前尝试再次启动宏。

我怎样才能让子 RunMacro 在宏“Production_Board”完成的第二秒重新启动？

```
Sub RunMacro
startagain:
Dim hour As Integer
Dim OT As String
hour = 0
OT = "Empty"
hour = Sheets("Calculations").Range("DR1").Value
OT = Sheets("Black").Range("D4").Value
If OT = "Y" Then
    If hour = 3 Or hour = 4 Then
    Application.OnTime TimeValue("05:00:00"), "Aespire_Production_Board"
    Else
    Application.OnTime Now + TimeValue("00:00:30"), "Aespire_Production_Board"
    End If
Else
    If hour = 3 Or hour = 4 Or hour = 5 Or hour = 6 Then
    Application.OnTime TimeValue("07:00:00"), "Aespire_Production_Board"
    Else
    Application.OnTime Now + TimeValue("00:00:30"), "Aespire_Production_Board"
    End If
DoEvents
GoTo startagain 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T04:07:39.603

而不是`Wait`，尝试`OnTime`。为了演示，将其粘贴到普通模块中并运行`Test`. 活动工作表的范围 A1 将每五秒增加一次，您将能够在两者之间工作。如果您在五秒钟后处于编辑模式，它也可以工作：

```
Sub test()
    test2
End Sub

Sub test2()
    ActiveSheet.Cells(1, 1).Value = ActiveSheet.Cells(1, 1).Value + 1
    Application.OnTime Now + TimeValue("00:00:5"), "test2"
End Sub 
```

请注意，`OnTime`sub 末尾的语句再次递归调用 sub。[这里](http://msdn.microsoft.com/en-us/library/office/aa195809%28v=office.11%29.aspx)有更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:19:25.307

```
Sub mySub()
    Do
        If Time() >= #3:00:00 AM# And Time() <= #7:00:00 AM# Then
            Aespire_Production_Board
        End If
    DoEvents
    Loop
End Sub 
```

一旦你启动 mySub() 它将无限期地运行。在凌晨 3 点到 7 点之间，它将在每个循环上运行 Aespire_Production_Board。它还允许用户进行交互。可以使用 CTRL-Break 将代码置于中断模式。

# ios - 带有位置值的 UIBackgroundModes，然后应用被拒绝

> ID：16073978
> 
> 赞同：0
> 
> 时间：2013-04-18T03:28:19.100
> 
> 标签：ios, background, core-location

我的应用程序在其文件中包含`UIBackgroundModes`密钥（带有位置值） 。`Info.plist`该应用程序被苹果拒绝。

**苹果拒绝的理由：**

*“我们注意到您的应用程序在 Info.plist 中的 UIBackgroundModes 键中声明支持位置，但不包括需要持久位置的功能。在应用程序运行时添加需要持久使用实时位置更新的功能是合适的后台或从 UIBackgroundModes 键中删除“位置”设置。如果您的应用程序不需要持久、实时的位置更新，我们建议使用显着变化位置服务或区域监控位置服务。"*

**使用它的原因：**

我的应用程序使用显着更改位置服务或标准位置服务，因为我的应用程序可用于 iPhone 和 ipod touch。如果重大变化的位置服务不可用，应用程序将使用标准位置服务。

**问题：**

*   当应用程序在后台运行时，该应用程序是否需要`UIBackgroundModes`在文件中添加键（带有位置值）`info.plist`？
*   如果不包括，应用程序可以使用标准定位服务成功定位吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T13:36:16.340

是的 user2082720，我们已经确定为什么我们在后台模式下使用定位服务。

请在您的应用说明中包含以下电池使用免责声明：

“继续使用在后台运行的 GPS 会大大缩短电池寿命。”

示例：-如果我们使用“地理围栏”时需要定位服务背景，那么我们必须在后台使用定位服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:53:49.697

你需要背景中的位置吗？如果您仅在应用程序处于前台时才需要该位置，请从 Info.plist 中删除 UIBackgroundModes 键，因为它会导致电池快速耗尽。

# java - SQL 锁定超时

> ID：16073979
> 
> 赞同：0
> 
> 时间：2013-04-18T03:28:28.040
> 
> 标签：java, sql, database

我不确定这是 Java 还是 DB 问题

```
public boolean addQualification(List<Qualification> qualificationList) throws SQLException {
    String sql = "insert into Qualification(QID,EID, Qualification) values (?,?,?)";
    boolean add = false;
    for (Qualification qualification : qualificationList) {
        Object[] data = {qualification.getQid(), qualification.getEid(),  qualification.getQualification()};
        int result = DBHandle.setData(connection, sql, data);
        if (result > 0) {
            add = true;
        } else {
            add = false;
            connection.rollback();
            break;
        }
    }
    return add;
} 
```

当我运行此代码时，我得到“java.sql.SQLException：超过锁定等待超时；尝试重新启动事务”异常

# r - 由多个实际参数匹配的形式参数“类型”

> ID：16073988
> 
> 赞同：6
> 
> 时间：2013-04-18T03:29:53.617
> 
> 标签：r, plot

我已经将一个程序从 R 翻译成 C++。有问题的程序使用不同的值对其自身进行多次迭代，然后生成直方图和绘图。C++ 图很挑剔，所以我决定将值保存为 csv 格式并将它们绘制在 R 中。这些文件相当大，对于较小的文件，10 次迭代会产生 23000 行和 3 列。当然，这会在 100 或 1000 次迭代中急剧增加。csv 文件的格式为 1,3,0.0107171，对应于 col num、row num 和 data。然后我将它运行到 R 中：

```
>data<-read.csv(file.choose(),header=T)
>plot(data,type="b", pch=19, xlab="X", ylab="Y")
Error in plot.default(...) : 
  formal argument "type" matched by multiple actual arguments 
```

作为旁注：

```
> hist(data[,3], xlab="Step length (m)", main="") 
```

直方图没有任何问题。请告诉我是否可以提供更多详细信息，我在 R 方面不是很好，所以我可能会遗漏一些明显的东西。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T03:42:05.383

您将 data.frame 传递给`plot`，它调度`plot.data.frame`，对于具有超过 2 列的 data.frame ，调用

```
pairs(data.matrix(data)) 
```

所以你可以传递对（不是）`...`有效的参数`pairs``type`

但是我认为您可能想考虑要从数据中绘制什么

*   x轴上应该是什么
*   y轴上应该是什么

然后根据需要创建对`plot`（或可能`matplot`）的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T09:08:01.157

就我而言，这表明我的输入数据结构不是数字的。我使用 解决了它`as.numeric`，如下所示：

```
plot(as.numeric(df[1, 1:9]), as.numeric(df[2, 1:9]),   
    las = 2, type = "l", 
    col = colrs[3],lwd = lwds[1], ylim = c(0, 1.05*maxnumb), xlim = c(-0.6, yAx), main = weDraw, ylab = "OD 600", xlab = "hours", xaxt = "n") 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-03-24T20:29:53.887

抱歉回复晚了。我遇到了这个问题，这是由于将绘图函数从另一个函数内部传递了一个 data.frame。解决方法是简单地执行此操作：

`do.plot <- function(df = plot.df[c(1, 2), ]) {` **as.matrix(df)** `plot(.....)}`

# jquery - 在 Django 上，cookie 被分配在字符串的边界之外

> ID：16073991
> 
> 赞同：0
> 
> 时间：2013-04-18T03:30:04.420
> 
> 标签：jquery, django

我尝试在 javascript/jquery 上同时使用`document.cookie`和`$.cookie("productId",productId)`，但似乎分配超出了它的界限。

当我**在 Chrome 中运行 document.cookie 命令时**，我期望得到：

```
"csrftoken=bh1n0k3sBKjXQtClAOwwT5DPgN22Dxqh; productId=2;" 
```

但相反，我得到：

```
"csrftoken=bh1n0k3sBKjXQtClAOwwT5DPgN22Dxqh; productId=; 2" 
```

我不确定是不是因为**csrftoken**已经被分配了。问题是，发生了什么，如何正确分配 productId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:58:38.423

我没有放入导入的 js 文件，而是将其分配在 html onclick 属性上，如下所示：

```
onclick='document.cookie="productId={{ product.id }}"'; 
```

# c++ - 指向类中的多维数组的指针

> ID：16073994
> 
> 赞同：0
> 
> 时间：2013-04-18T03:30:31.680
> 
> 标签：c++, pointers, multidimensional-array

我正在尝试找出错误的根源，不知道您是否可以提供帮助？我现在对数组指针有点问题。我有三个班级，可以这么说，一位家长和两个孩子。其中一个孩子有一个 struct 类型的二维数组，我正在尝试从另一个孩子访问它的元素。

我想知道，这段代码对我的数组指针的格式/语法是否有效？OChild1 创建并填充二维数组，我在 Parent 中保存指向该数组的指针，并将该指针传递给 OChild2，然后计划使用数组的内容进行进一步处理。

```
struct BOARDTILE
{
    float fPosX;
    float fPosY;

    BOARDTILES()
    {
        fPosX = 0.0f;
        fPosY = 0.0f;
    }
};

class CChild1
{
    public:
        BOARDTILE BoardTileArray[18][18];

    CChild1()
    {
    }

    writeBoardTileArray()
    {
        for (int i = 0; i <= 17; i++)
        {
            for (int j = 0; j <= 17; j++)
            {
                BoardTileArray[i][j].fPosX = (float) i * 5.0f;
                BoardTileArray[i][j].fPosY = (float) j * 7.0f;
            }
        }
    }
};

class CChild2
{
    public:
        BOARDTILE (*pBoardTileArray)[18][18];
        float fPosX;
        float fPosY;

    CChild2()
    {
    }

    void readBoardTileArray()
    {
        for (int i = 0; i <= 17; i++)
        {
            for (int j = 0; j <= 17; j++)
            {
                fPosX = (*pBoardTileArray[i][j]).fPosX;
                fPosY = (*pBoardTileArray[i][j]).fPosY;
                cout << fPosX;
                cout << fPosY;
            }
        }
    }

};

class CParent
{
    public:
        BOARDTILE (*pBoardTileArray)[18][18];
        CChild1 OChild1;
        CChild2 OChild2;

    CParent()
    {
        OChild1.writeBoardTileArray();
        pBoardTileArray = &(OChild1.BoardTileArray);
        OChild2.pBoardTileArray = pBoardTileArray;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:47:03.803

要存储二维数组的地址，您需要一个指向指针的指针，

**如果没有 typedef：**
您可以将成员指针声明为：

```
BOARDTILE (*pBoardTileArray)[18]; 
```

然后在构造函数中，你会写：

```
 pBoardTileArray = OChild1.BoardTileArray; 
```

但正如您所见，它使代码变得复杂。使用`typedef`可以简化它：

**使用 typedef：（**推荐方式）
使用`typedef`您可以在全局范围内编写以下内容：

```
typedef BOARDTILE BOARDTILE_ar18_t[18]; 
```

然后您可以将成员指针声明为：

```
BOARDTILE_ar18_t* pBoardTileArray; 
```

# python - 从 C 代码调用 numpy 函数

> ID：16073995
> 
> 赞同：5
> 
> 时间：2013-04-18T03:30:34.377
> 
> 标签：python, numpy, python-c-api, python-c-extension

我正在尝试将一些带有 Mex 扩展的 MatLab 代码移动到带有 numpy 和 scipy 库的 Python 中。使用这个精彩的教程[http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays](http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays)，我很快就采用了 C 函数从 Python 调用。但是一些 C 函数调用 MatLab 函数，所以我必须通过从 C 代码调用 numpy 和 scipy 函数来替换这段代码。

我试图做这样的事情[Extending and Embedding the Python Interpreter](http://docs.python.org/release/2.4.2/ext/pure-embedding.html)。但是，我遇到了一个问题：如何将数组传递给函数参数。此外，这种在模块中查找函数然后为参数构建元组的漫长方法似乎不是很优雅。

那么，例如，如何从 C 代码调用 numpy 模块中的 sum 函数？

我会感谢任何想法或链接。鲁本

PS这里是一个例子：

```
 PyObject *feedback(PyObject *self, PyObject *args){
    PyArrayObject *Vecin;
    double mp=0,ret;
    if( !PyArg_ParseTuple(args,"O!d",&PyArray_Type,&Vecin,&mp)
      ||  Vecin == NULL ) return NULL;
    /* make python string with module name */
    PyObject *pName = PyString_FromString("numpy");
    if( pName == NULL){
        fprintf(stderr,"Couldn\'t setup string %s\n","numpy");
        return NULL;
    }
    /* import module */
    PyObject *pModule = PyImport_Import(pName);
    Py_DECREF(pName);
    if( pModule == NULL){
        fprintf(stderr,"Couldn\'t find module %s\n","numpy");
        return NULL;
    }
    /* get module dict */
    PyObject *dic = PyModule_GetDict(pModule);
    if( dic == NULL){
        fprintf(stderr,"Couldn\'t find dic in module %s\n","numpy");
        return NULL;
    }
    /* find function */
    PyObject *pFunction = PyDict_GetItemString(dic, "sum");
    Py_DECREF(dic);
    if( pFunction == NULL){
        fprintf(stderr,"Couldn\'t find function  %s in dic\n","sum");
        return NULL;
    }
    Py_DECREF(pModule);
    /* create typle for new function argument */
    PyObject *inarg = PyTuple_New(1);
    if( inarg == NULL){
        fprintf(stderr,"Cannot convert to Build in Value\n");
        return NULL;
    }
    /* set one input paramter */
    PyTuple_SetItem(inarg, 0, (PyObject*)Vecin);
    /* call sunction from module and get result*/
    PyObject *value = PyObject_CallObject(pFunction, inarg);
    if( value == NULL){
        fprintf(stderr,"Function return NULL pointer\n");
        return NULL;
    }
    Py_DECREF(pFunction);
    if( !PyArg_ParseTuple(value,"d",&ret) ) return NULL;
    return Py_BuildValue("d",ret*mp);
} 
```

的结果

```
>>print mymod.FeedBack(np.array([1.,2.,3.,4.,5.]),2)

Traceback (most recent call last):
  File "mymodtest.py", line 10, in <module>
    print mymod.FeedBack(np.array([1.,2.,3.,4.,5.]),2)
SystemError: new style getargs format but argument is not a tuple
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:39:25.227

NumPy C API 有[`PyArray_Sum`](http://docs.scipy.org/doc/numpy/reference/c-api.array.html#PyArray_Sum)：

```
PyObject *sum = PyArray_Sum(arr, NPY_MAXDIMS, PyArray_DESCR(arr)->type_num, NULL); 
```

# java - 从处理程序调用时，异步任务未获取数组列表

> ID：16073996
> 
> 赞同：3
> 
> 时间：2013-04-18T03:30:35.633
> 
> 标签：java, android, android-asynctask, android-handler

我正在使用处理程序来启动异步任务，但是这样做时，我的应用程序崩溃了。我被卡住的原因是因为如果我通过其他任何东西（例如 onClickListener）启动异步任务，那么我可以多次运行它，一遍又一遍，并且每次都能完美运行。一旦我从我的处理程序执行 asynctask，它就会立即使用 NullPointerException 使应用程序崩溃。

我的处理程序看起来像这样

```
 public Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
      super.handleMessage(msg);
        handler.post(new Runnable() {
          @Override
          public void run() {
            new sortNearby().execute();
          }

        });
    }
  }; 
```

这是来自应用程序的堆栈跟踪的一部分，显示了异常

```
Caused by: java.lang.NullPointerException
at badams.android.app.fragments.MainMenu_NearbyFragment$sortNearby.doInBackground(MainMenu_NearbyFragment.java:100) 
```

我的代码的第 100 行是 doInBackground 下 asynctask 的第一行

```
protected String doInBackground(String... args) {
  for (int i = 0; i < global.places.size(); i++) { //this is line 100 
```

我知道异常很可能来自“global.places.size()”可能为空，但我坚持为什么它只有在从处理程序调用时才会这样做，因为如果我从我的代码的任何其他部分。

**编辑**

根据@Raghunandan 的要求，这是我的 asynctask 中 doInBackground 的整个代码块，它计算“地点”与用户之间的距离：

```
class sortNearby extends AsyncTask<String, Place, String> {
protected String doInBackground(String... args) {
  for (int i = 0; i < global.places.size(); i++) { //THIS IS LINE 100
    Location locationA = new Location("place");
    locationA.setLatitude(global.places.get(i).getLatitude());
    locationA.setLongitude(global.places.get(i).getLongitude());
    Location locationB = new Location("user");
    locationB.setLatitude(global.applicationLocationManager.getLatitude());
    locationB.setLongitude(global.applicationLocationManager.getLongitude());
    float dist = locationA.distanceTo(locationB);
    dist = dist / 1000;
    global.places.get(i).setDistance(dist);
  }
  return null;
} 
```

**编辑 2**

global 是一个扩展 Application 的类，在 Activity 中定义如下：

```
global = (ApplicationGlobal) getActivity().getApplicationContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:50:07.890

如果`NullPointerException`位于第 100 行，则要么 要么`global`正在`global.places`返回`null`。

您是否尝试过同样的调试？

调试将帮助您了解正在发生的事情。

同样从处理程序中，我看不到您的`doInBackground`方法是如何被调用的？

`global`变量在哪里定义？它在何时何地被初始化？

# css - 如何从一个 CSSStyleSheet 对象

> ID：16073998
> 
> 赞同：3
> 
> 时间：2013-04-18T03:30:37.087
> 
> 标签：css, stylesheet

One < style > corresponding one CSSStyleSheet object (in document.styleSheets), but how to find it, such as the CSSStyleSheet object corresponding < style id="-yCoder-styles" >...< /style>

```
console.log(document.styleSheets.length);

var style = document.createElement('style');
style.title = "-yCoder-styles";
style.type= 'text/css';
style.id = "-yCoder-styles";
document.head.appendChild(style);

//how to get the corresponding CSSStyleSheet instance from document.styleSheets

console.log(document.styleSheets.length);

var styleSheet = document.styleSheets[document.styleSheets.length - 1];
console.log(styleSheet.title == style.title); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T19:05:02.440

Based on the code you provided, you should be able to get your associated CSSStyleSheet with:

```
var styleSheet = style.sheet 
```

This will only work **after** the `<style>` element has been appended to the document.

Not exceptionally well documented and very difficult to find by poking around in console.