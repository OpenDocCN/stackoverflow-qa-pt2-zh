# StackOverflow 问答 15661000-15661999

# java - 替换 Android 的 TextWatcher 中输入的字符

> ID：15661003
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:10:52.923
> 
> 标签：java, android, textwatcher

我想在 Android 的 TextWatcher 中用“a”字符替换键入的字符，但也将真实键入的字符保存在变量中。为此，在 afterTextChanged 中，我编写了以下代码来替换字符：

```
if(s.toString().charAt(s.length()-1) != 'a'){                               
 txtfreak.setText(s.toString().substring(0, s.length()-1) + "a"); 
 txtfreak.setSelection(txtfreak.getText().length());
} 
```

我希望在替换之前保存真正键入的字符，并为此在 beforeTextChanged 中编写以下代码：

```
freaktext=s.toString(); 
```

但是 id 不起作用，并且freaktext 包含我在 afterTextChanged 中所做的更改！我的问题是 beforeTextChanged 在 afterTextChanged 之前运行？在我的代码中似乎不是！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:57:12.560

```
if(s.toString().charAt(s.length()-1) != 'a'){
freaktext=txtfreak.getText().toString();                               
 txtfreak.setText(s.toString().substring(0, s.length()-1) + "a"); 
 txtfreak.setSelection(txtfreak.getText().length());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:51:56.533

有一种替代方法可以使用 a`TextWatcher`来实现您想要的，这可能适用于您的情况。下面的方法将允许您显示“a”来代替每个字符并访问`EditText`字段中的原始文本。

我希望它对你有用，而不是`TextWatcher`.

***警告****：如果下面的方法不能满足您的目的，那么`TextWatcher`您已经开始使用它当然是可能的，但是即使您修复了您的错误，您也必须走得更远。您将不得不手动处理以任何可能方式编辑文本的用户，包括从 Span 的开头或中间或从剪贴板粘贴。*

* * *

您需要将`android:inputType="textPassword"`(*将所有文本更改为点 "."* ) 和实现`PasswordTransformationMethod`(*将默认点更改为 'a'* ) 的组合。

您将`freaktext`像这样设置变量：

```
freaktext.setTransformationMethod(new MyPasswordTransformationMethod()); 
```

您将不得不访问此链接以向@Eric 致敬以获取完整示例：[在 android 中，如何在具有 inputtype 为 textPassword 的 EditText 中显示星号 (*) 代替点？](https://stackoverflow.com/questions/11597648/in-android-how-to-show-asterisk-in-place-of-dots-in-edittext-having-inputtyp)

# ruby-on-rails-3 - 在铁轨上嘲讽

> ID：15661005
> 
> 赞同：0
> 
> 时间：2013-03-27T14:11:04.193
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

```
module gameSystem
 Class client
....
...
...

def accounts_by_id(account_id)

      response = query_account(CGI.escape(account_id))
      JSON.parse(response.body)
    end

...
...
...
end 
```

我有上面的代码，其中accounts_by_id 方法位于类Client 中。此方法返回 JSON.parse(response.body)。有谁知道我如何在rails中模拟或使用存根来返回一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:22:51.460

我已经使用 Mocha 来模拟/存根函数进行测试。它会导致类似

`Client.any_instance.expects(:query_account).with("my-account-id").returns([some object to return])`

在测试中调用此函数的行之前。

但是，这不会导致实际的断言，如果没有与预期匹配的函数调用，则只会失败，这在我看来并不理想。如果传入的帐户 ID 不是预期的，它也会失败（尽管`with`不是必需的。）

[这](http://gofreerange.com/mocha/docs/Mocha/API.html)是 Mocha 的文档，因此您可以更好地了解它的使用方式。我提供这个答案是因为这已经完成了我过去所需要的，但我很想看看是否有更好的解决方案。

# qt - QTextEdit 和 QPushButton 在一个 QAbstractModelItem

> ID：15661006
> 
> 赞同：0
> 
> 时间：2013-03-27T14:11:05.387
> 
> 标签：qt, qt-designer, qabstractitemmodel, qstyleditemdelegate

我使用 QTreeView 来可视化我的对象属性。它类似于 Qt 设计器中的属性编辑器。我有各种值，布尔值，文本，颜色值，枚举，浮点数，整数，文件名等。

我使用自定义模型来保存所有对象值并通过自定义委托显示它。因此，委托检测数据的类型并具有用于编辑的特殊表示，例如用于 int/float 的 Spinboxes 和用于 bool 的复选框。目前，我的代表为例如旋转框创建编辑器并覆盖paint() 函数以将值表示为复选框。

现在我想允许用户以两种方式编辑一个值。用户应使用普通文本字段进行编辑、复制/粘贴等来更改值或按下按钮打开 QFileDialog 并选择正确的文件。
它应该如下图所示：

[![图片](../Images/cb7f700dd94e9db8059018b28bfdd07f.png)](https://i.stack.imgur.com/ozrBr.png)

我怎样才能做到这一点？
我需要一个文本字段和一个按钮来打开 QFileDialog。

我使用 Qt 5.0。谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:09:58.940

你必须使用一个自定义小部件，你可以在你的委托`createEditor()`函数中创建一个这样的代码/沿着这些线：

```
QFrame *frame = new QFrame();
frame->setLayout( new QHBoxLayout() );
frame->layout()->addWidget( new QLineEdit() );
frame->layout()->addWidget( new QToolButton() );
return frame; 
```

或者您可以使用设计器创建一个自定义小部件并返回其中之一。

# c# - 窗口形成红色 x，但我找不到错误通知

> ID：15661007
> 
> 赞同：5
> 
> 时间：2013-03-27T14:11:13.710
> 
> 标签：c#, winforms, opentk

我正在使用 OpenTK GLControl（一个 .Net OpenGL winforms 控件）使用 opengl 绘制一些东西。我现在面临的问题是我在控件所在的窗口窗体上得到一个大的红十字或 x，并且它完全无法调试，因为我找不到知道错误发生在哪里的方法。

我没有看到错误通知/异常。我之前在使用 XNA 时也遇到过同样的问题，尽管我出于其他原因放弃了使用它。

也许我错过了一些东西。Visual Studio 中是否有一个窗口可以打开并查看这些错误？

在调试模式下自动打开的窗口是 Locals 和 Call Stack。他们完全是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:16:47.737

您可以尝试中断所有异常 -[中断 CLR 异常](http://msdn.microsoft.com/en-us/library/d14azbfh%28v=vs.80%29.aspx)。（Control/Alt + E 调出对话框，然后选中 Common Language Runtime Exceptions 复选框）。

在调试时，它应该在发生错误的地方停止。

如果您无法通过这种方式找到任何东西，您可以通过捕获整个 AppDomain 异常或 Threading 异常来查看某些内容 - 详细信息[在此处](http://msdn.microsoft.com/en-gb/library/system.appdomain.unhandledexception.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:17:55.430

Windows 窗体设计器中的红色 x 来自您的绘制代码中的错误。要调试这个：

*   在另一个 Visual Studio 实例中打开您的解决方案
*   菜单调试 > 附加到进程...
*   选择 devenv.exe

然后将调试您的第一个 Visual Studio 实例，您可以在绘制代码中设置断点。

# windows - qt在Windows中制作单边框窗口

> ID：15661009
> 
> 赞同：1
> 
> 时间：2013-03-27T14:11:17.470
> 
> 标签：windows, qt

给定一个继承自 QMainWindow 的窗口，如何在 Windows 中使其单边框？
我有一个检索它的窗口句柄的想法，但我不知道该怎么做。无论如何，如果有 Qt 原生的（组合）方法，将不胜感激。
提前致谢。
编辑：
我已经尝试过代码

```
HWND hWnd = (HWND)this->winId(); // the handle
unsigned old_styles = WS_OVERLAPPEDWINDOW & (~WS_THICKFRAME) | WS_VISIBLE;
SetWindowLongPtr(hWnd, GCL_STYLE, old_styles);
SetWindowPos(hWnd, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE   
| SWP_NOZORDER | SWP_FRAMECHANGED);
UpdateWindow(hWnd); 
```

尽管窗口句柄是正确的，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:14:42.900

为您想要访问的每个小部件设置一个 Qt::WA_NativeWindow 属性或调用其 QWidget::winId() 方法，该方法将返回您的句柄（并在此之前创建它）。

```
HWND hWidget = (HWND)pWidget->winId(); 
```

获取句柄，您可以更改/设置此窗口的任何标志，不是吗？据我记得，WS_BORDER 标志是负责它的标志：

```
WS_BORDER 0x00800000L The window has a thin-line border. 
```

# python - Python：将日期转换为日期时间的最有效方法

> ID：15661013
> 
> 赞同：12
> 
> 时间：2013-03-27T14:11:25.670
> 
> 标签：python, datetime, python-datetime

在 Python 中，我将 a 转换`date`为`datetime`：

1.  从转换`date`为`string`
2.  从转换`string`为`datetime`

代码：

```
import datetime
dt_format="%d%m%Y"
my_date = datetime.date.today()
datetime.datetime.strptime(my_date.strftime(dt_format), dt_format) 
```

我怀疑这远非最有效的方法。在 Python 中将日期转换为日期时间的最有效方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-27T14:12:12.130

[`datetime.datetime.combine()`](http://docs.python.org/2/library/datetime.html#datetime.datetime.combine)与时间对象一起使用，`datetime.time.min`表示`00:00`并匹配您的日期字符串日期时间路径的输出：

```
datetime.datetime.combine(my_date, datetime.time.min) 
```

演示：

```
>>> import datetime
>>> my_date = datetime.date.today()
>>> datetime.datetime.combine(my_date, datetime.time.min)
datetime.datetime(2013, 3, 27, 0, 0) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-23T16:38:44.333

或者，正如[这里](https://stackoverflow.com/questions/1937622/convert-date-to-datetime-in-python)所建议的，这可能更具可读性：

```
datetime(date.year, date.month, date.day) 
```

# .htaccess - 使用翻译 htaccess 重写 url

> ID：15661021
> 
> 赞同：0
> 
> 时间：2013-03-27T14:11:46.170
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个多语言网站，其中包含一些链接，例如`mysite.com/about.html`. 对于所有语言，我都有菜单中使用的单词的翻译。

我希望我的 url 对于不同的语言是动态的。比如我的关于页面的链接`de`将是`mysite.com/de/de-about-translation.html`。`de-about-translation.html`内容保存在该语言的文件中`de`。

# 更多说明：

我有一个用于在我的网站中选择语言的菜单。在这里用户可以在语言之间切换。当任何人想切换到不同的语言时，我想将所有菜单链接更改为选定的语言。

我有一个文件用于每种语言的菜单翻译。对于 Svenska，我的文件名是 sv.php，我的文件内容如下：

```
 $_lang["about_tr"] = "about-translation-of-Svenska ";
   $_lang["archive_tr"] = " archive-translation-of-Svenska ";

 For Deutsch language file contents:

  $_lang["about_tr"] = "about-translation-of-Deutsch ";
  $_lang["archive_tr"] = " archive-translation-of-Deutsch "; 
```

目前，我有如下链接：

```
mysite.com/about.html                 
mysite.com/archive.html 
```

我想要 Deutsch 语言的链接，例如：

```
mysite.com/de/about-translation-of-Deutsch.html
mysite.com/de/about-translation-of-Deutsch.html 
```

对于 Svenska 语言，这些链接应该是这样的：

```
mysite.com/se/about-translation-of-Svenska.html
mysite.com/se/archive-translation-of-Svenska.html 
```

等等每种语言。

```
What kind of `RewriteRule` should I use in htaccess ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:43:42.063

> 示例：`http://mysite.com/de/arkiv`到 `http://mysite.com/arkiv.html?lang=de`

您可以在根目录的一个 .htaccess 文件中尝试类似的操作。

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}   !\.html             [NC]
RewriteRule ^([^/]+)/([^/]+)/?  /$2.html?lang=$1 [L,NC] 
```

静默地图

`http://mysite.com/LangCode/filename`显示在浏览器的地址栏中

至：

`http://mysite.com/filename.html?lang=LangCode`

### 选项：

如果您希望使用单个脚本（例如 LanguageScript）来处理所有语言，只需替换此行：

```
RewriteRule ^([^/]+)/([^/]+)/?  /$2.html?lang=$1 [L,NC] 
```

有了这个：

```
RewriteRule ^([^/]+)/([^/]+)/?  /LanguageScript.html?lang=$1 [L,NC] 
```

# javascript - 隐藏 div 并在悬停时显示其他 DIV

> ID：15661024
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:11:53.453
> 
> 标签：javascript, css, hover

如何在悬停时更改 div？

这是我想做的一个例子：[JS FIDDLE](http://goo.gl/SJ7cL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:58:10.717

你真的想要JS吗？

```
<style>
    #container #divB{ display: none; }
    #container:hover #divB{ display: block; }
    #container:hover #divA{ display: none; }
</style>

<div id="container">
    <div id="divA">
        DIV A is visible until hover
    </div>
    <div id="divB">
        DIV B must show up after hover DIV A and DIV A must hide
    </div>
</div> 
```

工作小提琴[http://jsfiddle.net/KtckK/](http://jsfiddle.net/KtckK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:47:30.263

我更新了你的小提琴，这个例子使用了 jQuery。

```
$('#divA').hover(

function () { // On mouse over
    $(this).hide(); // this references the div.
}

//function () { // On mouse out
//   $(this).show(); // this references the div.
//}
); 
```

[http://jsfiddle.net/eJ6Rq/11/](http://jsfiddle.net/eJ6Rq/11/)

让我知道这是否是您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:52:39.453

你可以试试 jQuery，见[http://jsfiddle.net/eJ6Rq/3/](http://jsfiddle.net/eJ6Rq/3/)

```
$('#divA').hover(function(){$(this).hide(); $('#divB').show();}); 
```

# android - Android 如何使用 Edittext 更改字符串并在同一活动中重用

> ID：15661028
> 
> 赞同：0
> 
> 时间：2013-03-27T14:12:02.433
> 
> 标签：android, xml, string, credit-card-track-data

我有一个严重的问题，我有一个通过所有卡片数据的刷卡器应用程序抛出了一个 xml（xml 在我的代码中的结构方式是由 sdk 提供程序编写的）。我需要使用 2 个 EditText（1 个用于卡号，1 个用于 ExpDate）进行手动输入，然后将该数据传递给同一活动（或一个新活动）以在处理订单的 xml 中使用。这可以做到吗？如何才能做到这一点？以下是我的代码 - 编辑或更正将非常有帮助......提前谢谢你。

```
String tranXmlFmt =  
        "<?xml version=\"1.0\"?><TStream>" 
      + "<Transaction>" 
      + "<IpAddress>66.173.160.125</IpAddress>" 
      + "<MerchantID>002649</MerchantID> " 
      + "<OperatorID>50</OperatorID>" 
      + "<TranType>Credit</TranType>" 
      + "<CardType>VISA</CardType> " 
      + "<TranCode>Sale</TranCode> " 
      + "<OperatorID>55</OperatorID> "
      + "<InvoiceNo>100001</InvoiceNo>" 
      + " <RefNo>100001</RefNo> " 
      + "<PartialAuth>Allow</PartialAuth>"
      + "<Account>" 
      + "<AcctNo>4104891389583005</AcctNo>"  
      + "</Account> " 
      + "<ExpDate>0214</ExpDate>"
      + "<Amount><Purchase>13.00</Purchase></Amount>" 
      + "<UserTraceData>GBTE130116</UserTraceData>"
      + "</Transaction> " 
      + "</TStream>";
String initXml = "" 
    + "<?xml version=\"1.0\"?>" 
    + "<TStream><Admin>" 
    + "    <MerchantID>002649</MerchantID>"
           + "    <TerminalID>002</TerminalID><TranCode>SecureDeviceInit</TranCode>"
           + "    <PadType>None</PadType>" + "    <TranType>Setup</TranType>"
           + "    <SecureDevice>UniMagSecureMagDsi</SecureDevice>" 
           + "    <ComPort>1</ComPort>" 
           + "  </Admin>"
           + "</TStream>";
    ' 
```

帮助

```
Button btnNextScreen = (Button) findViewById(R.id.btnNextScreen);
    //Listening to button event
    btnNextScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) { 
            //Starting a new Intent

        }
    });
      Button btnInit = (Button) findViewById(R.id.btnInit);
    btnInit.setOnClickListener(new View.OnClickListener() {

        /**
         * initialize epay client 
         */
        @Override
        public void onClick(View v) {
            libReady = true;
            ca = new ClientActivity(getApplication(), readerType);
            Log.d("MAINACTIVITY", "reader type: " + readerType.toString());
            initReturn = ca.initialize(initXml);
            Log.d("MAINACTIVITY", "init return: " + initXml);
            libReady = true;
            EditText et = (EditText) findViewById(R.id.editXml);
            et.setText(initReturn);
            Log.d("MAINACTIVITY", "Library Loaded");

        }
    });

    Button btnClose = (Button) findViewById(R.id.Close_button);
    btnClose.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            LineDisplay ld = new LineDisplay();
            ld.open(DeviceCommon.DEVICE_MODE_COMMON, null);

            ld.clear();             
            ld.setBacklight(LineDisplay.LCD_BACKLIGHT_OFF);

            ld.close();         
            finish();
        }
    }); 
```

我只需要添加 2 Edittext 并更改要在同一活动中使用的 AcctNo 和 ExpDate STRING。请任何帮助将是巨大的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:21:19.343

You can get data from edittext and pass it to your secondactivtiy using intents.

```
 String s1,s2
     EditText ed1= (EditText)findViewById(R.id.editext); 
     EditText ed2= (EditText)findViewById(R.id.editext2);

         on Button click

     s1 = ed1.getText().toString(); 
     s2 = ed2.getText().toString();
     ed1.setText("");  
     ed2.setText(""); 
```

In same activity. Can keep other tags as above.

```
 String xml ="<AcctNo>"+s1+"</AcctNo>"  
          + "<ExpDate>"+s2+"</ExpDate>"; 

             OR

    Intent i= new Intent("com.example.secondactivity");
    i.putExtra("key1",s1);   
    i.putExtra("key2",s2);  
    startActivity(i); 
```

In Second Activity you can retrieve the values.

```
 String value1,value2;   
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
    value1 = extras.getString("key1"); 
    value2 = extras.getString("key2"); 
    } 
```

 Can keep other tags as above.

```
 String xml ="<AcctNo>"+value1+"</AcctNo>"  
          + "<ExpDate>"+value2+"</ExpDate>"; 
```

EDIT :

acitivity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="33dp"
    android:ems="10" >
</EditText>
<EditText
    android:id="@+id/editText2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:ems="10" />
<TextView
   android:id="@+id/textView1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_gravity="center"
   android:layout_marginTop="36dp"
   android:text="TextView" />
 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="TextView" />
  <TextView
      android:id="@+id/textView3"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_gravity="center"
      android:layout_marginTop="20dp"
      android:text="TextView" />
    <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Button" />
    </LinearLayout> 
```

MainActivity

```
 public class MainActivity extends Activity {

EditText ed1,ed2;
TextView tv1,tv2,tv3;
Button b;
String s1;
String s2;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ed1= (EditText) findViewById(R.id.editText1);
    ed2= (EditText) findViewById(R.id.editText2);
    tv1 = (TextView) findViewById(R.id.textView1);
    tv2 = (TextView) findViewById(R.id.textView2);
    tv3 = (TextView) findViewById(R.id.textView3);
    b= (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            s1= ed1.getText().toString();
            s2= ed2.getText().toString();
            System.out.println("................"+s1);
            System.out.println("................"+s2);
            tv1.setText(s1);
            tv2.setText(s2);
            String xml ="<AcctNo>"+s1+"</AcctNo>"  
                      + "<ExpDate>"+s2+"</ExpDate>";
            System.out.println("................"+xml);
            tv3.setText(xml);
            ed1.setText("");
            ed2.setText("");
        }

    });

}

} 
```

As you can see it works. See the snap shot. I have 3 text views, 2 editext's and a button. After user types in editext's i click the button and i set the values to textview. As you can see the values reflects in string xml which is the result set in textview3.

![enter image description here](../Images/e4e995a257c021a3ee585e8f24233205.png)

# ios - 在 iOS 中初始化 PhoneGap 插件 BarcodeScanner

> ID：15661034
> 
> 赞同：0
> 
> 时间：2013-03-27T14:12:09.543
> 
> 标签：ios, cordova, plugins, barcode

我想在我的应用程序中使用条形码扫描，并尝试使用 PhoneGap 的 BarcodeScanner [BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)插件（我为 iOS 构建了一个项目）。

由于给出的解释是针对以前版本的PhoneGap，我在初始化插件时遇到了麻烦。我认为这与*config.xml*文件中的插件集成有关。

目前我已经添加了以下行：

除此之外，我做了插件描述中提到的所有事情。

尝试使用以下方式扫描特定条形码时：

```
window.plugins.barcodeScanner.scan() 
```

我收到以下错误：

```
TypeError: 'undefined' is not an object (evaluating 'window.plugins.barcodeScanner') 
```

谢谢你的协助，

克里斯托夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:55:49.180

在我用这个替换我的配置中的行之前我遇到了麻烦

`<plugin name="org.apache.cordova.barcodeScanner" value="CDVBarcodeScanner" />`

并在 Classes/Commands/CDVPlugin.h 文件中，更改了这些行：

```
NSString* const CDVPageDidLoadNotification;
NSString* const CDVPluginHandleOpenURLNotification;
NSString* const CDVPluginResetNotification;
NSString* const CDVLocalNotification; 
```

对此：

```
extern NSString* const CDVPageDidLoadNotification;
extern NSString* const CDVPluginHandleOpenURLNotification;
extern NSString* const CDVPluginResetNotification;
extern NSString* const CDVLocalNotification; 
```

# python - 将文本文件内容解析为 Python 对象并将对象写回到可解析的文本文件中

> ID：15661035
> 
> 赞同：1
> 
> 时间：2013-03-27T14:12:11.157
> 
> 标签：python, file, parsing, text, configuration

我需要解析一个配置文件文件，以便能够添加/删除/修改软件配置，该配置由多个格式的文本块定义，如下所示：

```
portsbuild {
        path = /jails/portsbuild;
        allow.mount;
        mount.devfs;
        host.hostname = portsbuild.home;
        ip4.addr = 192.168.0.200;
        interface = nfe0;
        exec.start = "/bin/sh /etc/rc";
        exec.stop = "/bin/sh /etc/rc.shutdown";
} 
```

这些块是相当重复的，到目前为止，只有变量的值在变化。

我尝试过使用该`re`模块，但最终得到的代码过于臃肿和复杂。然后我尝试了该`iscpy`模块，代码非常简单（一行将整个文件转换为方便的字典），但解析的数据并不完全是它应该是的：

```
>>> conf = iscpy.ParseISCString(open('/etc/jail.conf', 'r').read())
>>> conf
{'portsbuild': {'allow.mount': True, 'interface = nfe0': True, 'exec.start = "/bin/sh /etc/rc"': True, 'ip4.addr': '= 192.168.0.200', 'exec.stop': '= "/bin/sh /etc/rc.shutdown"', 'exec.stop = "/bin/sh /etc/rc.shutdown"': True, 'ip4.addr = 192.168.0.200': True, 'path': '= /jails/portsbuild', 'interface': '= nfe0', 'path = /jails/portsbuild': True, 'mount.devfs': True, 'host.hostname': '= portsbuild.home', 'host.hostname = portsbuild.home': True, 'exec.start': '= "/bin/sh /etc/rc"'}} 
```

我也试过我的运气，`pyparsing`但它似乎只适合一种方式。所以，我想知道是否有其他模块或方法可以使用干净且易于理解的代码来解析该文件，这两种方式都可以使用，用于在修改 python 对象后读取和写入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:42:40.317

欧芹救命！似乎它是编写自定义解析器的最简单模块，并使用 python 对象生成结果，这些对象很容易转换回相同、精确格式的配置文件。下面带有稍大块的示例解决方案：

```
from parsley import makeGrammar, unwrapGrammar
from collections import OrderedDict

configFileGrammer = r"""

file = block+:bs end -> OrderedDict(bs)

block = ws name:b ws '{' ws members:m ws '}' ws -> (b, OrderedDict(m))

members = (setting:first (ws setting)*:rest ws -> [first] + rest) | -> []

setting = pair | flag

pair = ws name:k ws '=' ws name:v ws ';' ws -> (k, v)

flag = ws name:k ws ';' ws -> (k, True)

name = <(~('='|';'|'{') anything)+>:n -> n.strip()

"""

testSource = r"""
    portsbuild {
            path = /jails/portsbuild;
            allow.mount;
            mount.devfs;
            host.hostname = portsbuild.home;
            ip4.addr = 192.168.0.200;
            interface = nfe0;
            exec.start = "/bin/sh /etc/rc";
            exec.stop = "/bin/sh /etc/rc.shutdown";
    }

    web01 {
            path = /jails/web01;
            allow.mount;
            mount.devfs;
            host.hostname = web02.site.com;
            ip4.addr = 10.0.0.1;
            interface = eth0;
            exec.start = "/bin/sh /etc/rc";
    }

    db01 {
            path = /jails/db01;
            mount.devfs;
            host.hostname = db01.home;
            ip4.addr = 192.168.6.66;
            interface = if0;
            exec.start = "/bin/mysql";
    }

"""
ConfigFile = makeGrammar(configFileGrammer, globals(), name="ConfigFile")

config = unwrapGrammar(ConfigFile)(testSource).apply('file')[0]
for block in config:
    print "%s {" % block
    for key in config[block]:
        if config[block][key] == True:
            print "\t%s;" % key
        else:
            print "\t%s = %s;" % (key, config[block][key])
    print "}" 
```

# javascript - Bootstrap Popover 在任何点击时关闭

> ID：15661037
> 
> 赞同：1
> 
> 时间：2013-03-27T14:12:17.977
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

从这个[jsFiddle](http://jsfiddle.net/LRCNm/10/)可以看出，我有一个 Boostrap Popover，它可以通过外部点击以及点击“x”来关闭。

但是，当您单击另一个按钮弹出框时，第一个弹出框不会消失。

有没有办法更改 javascript，以便第一个弹出框在任何点击时消失？

HTML：

```
<form action="quote-calculator.php" method="post">

<div class="bs-docs-example" style="padding-bottom: 24px;">
  <a href="#" class="more-info btn btn-large btn-danger" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
</div>

<div class="bs-docs-example" style="padding-bottom: 24px;">
  <a href="#" class="more-info btn btn-large btn-danger" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
</div>

<div class="bs-docs-example" style="padding-bottom: 24px;">
  <a href="#" class="more-info btn btn-large btn-danger" data-toggle="popover" data-content="And here's some amazing content. It's very engaging. right?">Click to toggle popover</a>
</div>

</form> 
```

jQuery：

```
 var isVisible = false;
    var clickedAway = false;

    $('.btn-danger').popover({
            html: true,
            trigger: 'manual'
        }).click(function(e) {
            $(this).popover('show');
        $('.popover-content').append('<button class="close" style="position: absolute; top: 0; right: 6px;">&times;</button>');
            clickedAway = false
            isVisible = true
            e.preventDefault()
        });

    $(document).click(function(e) {
      if(isVisible & clickedAway)
      {
        $('.btn-danger').popover('hide')
        isVisible = clickedAway = false
      }
      else
      {
        clickedAway = true
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:37:05.660

添加

```
$('.popover').hide(); 
```

前

```
$(this).popover('show'); 
```

`popover`这会在显示当前元素之前隐藏所有类元素。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:20:20.223

尝试添加

```
$('.close:visible').trigger('click'); 
```

前

```
$(this).popover('show'); 
```

`[Updated Demo Fiddle](http://jsfiddle.net/LRCNm/12/)`

# java - 在 java 中使用 TimerTask 进行调度时出现异常延迟

> ID：15661040
> 
> 赞同：1
> 
> 时间：2013-03-27T14:12:25.287
> 
> 标签：java, timertask

我正在使用 TimerTask 为日常运行安排一个线程。这是代码。

```
private void scheduleDailyProcess() {
    Calendar c = Calendar.getInstance();
    c.add(Calendar.DATE, 1);
    c.set(Calendar.HOUR_OF_DAY, 0);
    c.set(Calendar.MINUTE, 5);
    c.set(Calendar.SECOND, 0);
    c.set(Calendar.MILLISECOND, 0);

    Timer timer = new Timer();

    int period = 24 * 60 * 60 * 1000; //24 hours
    timer.schedule(new DailyProcess(), c.getTime(), period );
} 
```

我希望线程在每天上午 00:05 运行。但是我注意到线程以 8 秒的未指定延迟开始。

我在代码中遗漏了什么吗？还是 TimerTask 有问题？

DailyProcess 内没有延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:18:03.140

在此任务之前可能正在运行其他东西，从而延迟了 DailyProcess 的初始执行。

**根据 TimerTask 文档**：

*对应于每个 Timer 对象的是单个后台线程，用于按顺序执行所有计时器的任务。定时器任务应该很快完成。如果一个定时器任务花费了过多的时间来完成，它就会“占用”定时器的任务执行线程。反过来，这可以延迟后续任务的执行，这些任务可能会在（如果）有问题的任务最终完成时“聚集”并快速连续执行。*

# android - 如何在 PageAdapter 之外更新 ViewPager 的视图？

> ID：15661044
> 
> 赞同：2
> 
> 时间：2013-03-27T14:12:40.690
> 
> 标签：android, android-viewpager

我正在尝试在`pageradapter`课堂外更新图像，但它不起作用。我已经通过其他方式做到了，但这样做效率不高。

```
int pos = mPager.getCurrentItem();
mAdapter.notifyDataSetChanged();
mPager.setAdapter(mAdapter);
mPager.setCurrentItem(pos); 
```

显示它的效果需要很多时间，任何其他方式都将受到高度赞赏。我有将近 20 多张图像，所以我无法删除和恢复视图。我正在尝试从`options menu`. 期待答案或建议。谢谢！

这是我的代码

```
public class pageAdapter extends PagerAdapter {
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return Global.imageList.length;
}

@Override
public boolean isViewFromObject(View view, Object object) {
    // TODO Auto-generated method stub
    return view.equals(object);
}
@Override
public Object instantiateItem(View container, final int position) {
    // TODO Auto-generated method stub

    View v = getLayoutInflater().inflate(R.layout.pager_item, null);
    ImageView ivBackground = (ImageView) v
            .findViewById(R.id.pager_image);

    final ImageView ivFavorite = (ImageView) v
            .findViewById(R.id.fav_image);

    ivFavorite.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if (!helper.isExist(Global.imageList[position])) {

    int i = helper.insertFavourites(Global.imageList[position]);

                if (i != -1) {

            ivFavorite.setImageResource(R.drawable.fav_selected);
                }
            } else {

                if (helper.removeFavorite(Global.imageList[position])) {

ivFavorite  .setImageResource(R.drawable.fav_unselected);

                }
            }

        }
    });
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                    Global.imageList[position]);

    ivBackground.setImageBitmap(bitmap);

    ((ViewPager) container).addView(v, 0);
    return v;

}

@Override
public void destroyItem(View container, int position, Object object) {
    // TODO Auto-generated method stub
    ((ViewPager) container).removeView((View) object);
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:56:24.520

您可以在初始化视图时使用 'setTag'(Object tag) 方法 - 在“PageAdapter”中使用“instantiateItem()”，然后通过“findViewWithTag(Object tag)”获取该视图

# javascript - 仅在 display=block 时验证文本字段

> ID：15661052
> 
> 赞同：0
> 
> 时间：2013-03-27T14:13:06.113
> 
> 标签：javascript, validation

我想验证我的表单，但前提是当时正在显示其周围的 div。这是我到目前为止所拥有的：

```
function validateForm()
 {
 var x=document.forms["config"]["itemname5"].value;
if (document.getElementById("customtext").style.display=="block" || x==null)
   {
   alert("Text box must be filled in");
   return false;
   }
 } 
```

HTML 片段：

```
<div class="hide" id="customtext">Enter the text you require on the module. eg. "DAVE" max 6 letters<br />
<input type=text name="itemname5"  class="nicebox" value='' maxlength="6" style="font-size:14; font-weight:bold; width:210px; vertical-align:top; height:20px;">
</div> 
```

我想要它，以便如果显示 div，它会告诉用户他们是否没有输入任何文本并且不会发布表单。

这是页面：[http ://www.censdigital.com/2012/earplugs-config.html](http://www.censdigital.com/2012/earplugs-config.html)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:22:51.727

当 customText div 的父级被隐藏时，您的逻辑可能会失败。如果你需要处理这样的情况，通过jquery会很简单。

您可以通过简单检查元素是否可见

```
$(x).is(":visible") /*returns true or false*/ 
```

编辑：

要使用 jQUery，请将其添加到页面的 head 部分，您也可以下载此 js 文件并将其托管在本地。

添加后，您可以通过以下方式检查您的元素 x 是否可见

```
if($(x).is(":visible"))
{
  //your element is visible
} 
```

我建议阅读更多关于 jQuery 的内容，这是一个非常强大的库。并且会帮到你很多。www.jquery.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:37:44.707

您的 if 语句仅说明元素`display`属性设置`"block"`为时元素可见的许多其他状态。我会测试它是否没有隐藏，就像这样

```
if (document.getElementById("customtext").style.display != "none" && x==""){
   alert("Text box must be filled in"); 
   return false;
} 
```

现在，如果该`display`属性未设置或未设置为，`"block"`您仍然会得到预期的结果。

您仍然提交表单的问题可能与您运行函数的方式有关。你能告诉我从哪里调用函数吗？看起来您的`return false`语句只是退出了您的功能，而不是阻止表单提交。

# maven - Maven依赖映射到存储库

> ID：15661057
> 
> 赞同：1
> 
> 时间：2013-03-27T14:13:20.830
> 
> 标签：maven, dependencies, repository

我是 Maven 的新手，虽然我对 Ant 有经验。我试图了解下载依赖项的过程。假设我定义了两个存储库：

*   存储库

    *   id:repo-one
    *   网址：[http ://repo-one.com/repos](http://repo-one.com/repos)
*   存储库

    *   id:repo-2
    *   网址：[http ://repo-two.com/repos](http://repo-two.com/repos)

还有一个依赖：

*   依赖
    *   groupId:org.mystuff
    *   artifactId:mystuff-core

我的问题：

1.  我假设必须将依赖项的 groupId 作为其中一个 repo URL 的子路径找到，例如[http://repo-one.com/repos/org/mystuff](http://repo-one.com/repos/org/mystuff)。那正确吗？

2.  如果是这样，则将 artifactId 作为附加子路径寻找，例如[http://repo-one.com/repos/org/mystuff/mystuff-core](http://repo-one.com/repos/org/mystuff/mystuff-core)。那正确吗？

3.  如果以上两项都是，如果同时存在[http://repo-one.com/repos/org/mystuff/mystuff-core](http://repo-one.com/repos/org/mystuff/mystuff-core)和[http://repo-two.com/repos/org/怎么办神秘的/神秘的核心](http://repo-two.com/repos/org/mystuff/mystuff-core)？列出的第一个存储库是否获胜？

4.  如果我完全偏离了轨道，那么在存储库上查找依赖项的过程是什么？

正如您可能知道的那样，我正在查看现有的 POM 并试图了解它是如何工作的。我已经查看了 Maven 站点上的文档，但到目前为止，我没有看到任何明确说明依赖项如何映射到存储库的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:57:35.377

Q1。和 Q2。你说的对。

更准确地说，默认情况下（即如果存储库布局未重新定义为非标准布局）：工件将在`<REPO_URL>/${groupId_with_dot_replaced_by_subdir}/${artifactId}/${version}/${artifactId}-${version}.${extension}`

Q3。是的，包含工件的第一个存储库获胜。注意

*   如果工件不是 SNAPSHOT 并且已经在您的本地存储库中，则不会再次下载。
*   如果工件是 SNAPSHOT 并且在本地存储库中的时间超过刷新策略指定的时间：它将再次下载。

Q4。[这是](http://docs.codehaus.org/display/MAVEN/Repository+Layout+-+Final)解释 Maven 存储库布局的博客文章的链接

# python - __repr__ 和 eval() 是什么关系，__repr__ 的主要用途是什么？

> ID：15661063
> 
> 赞同：3
> 
> 时间：2013-03-27T14:13:31.513
> 
> 标签：python, python-3.x

我刚刚遇到了这个问题[Python 之间的](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[区别`__str__`和`__repr__`](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)它提到的主要目的`__repr__`是明确的。但我听说 的主要目的`__repr__`是生成一个字符串，以便**`eval()`**以后可以重建 python 对象。其实主要目的是`__repr__`什么？python中的任何内置函数或任何默认模块是否固有地`__repr__`用于重建对象？`__repr__`如果我们只是覆盖它以使其总是返回一个常量字符串（例如“foo”），它会搞乱执行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:16:13.070

对于具有文字表示法（`str`、`int`、`float`、`list`等）的类型，`repr()`返回一个可用于再次创建该类型的字符串。

这*很好*，但不是必需的。

的主要目的`__repr__`是为*开发人员*提供关于他们在这里拥有什么对象的明确信息，以用于调试目的。

引用[`__repr__`文档](http://docs.python.org/3/reference/datamodel.html#object.__repr__)：

> 由`repr()`内置函数调用以计算对象的“官方”字符串表示。如果可能的话，这应该看起来像一个有效的 Python 表达式，可用于重新创建具有相同值的对象（给定适当的环境）。如果这不可能，`<...some useful description...>`则应返回表单的字符串。

但最重要的是：

> 这通常用于**调试**，因此表示信息丰富且明确是很重要的。

强调我的。

从您的自定义类型返回一个常量字符串在技术上不会破坏任何东西，但会使您作为开发人员的生活*更加艰难*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:30:55.500

约定是您`repr`用来获取表示对象的字符串并`str`对其进行描述。`repr`更多地用于调试，`str`用于常规打印。这个想法是 repr 的输出看起来像你可以评估的代码，而且通常是这样。但是，您不能依赖它。如果您必须将对象转换为字符串并返回，请使用`pickle`or `json`。

例如：

```
>>> greeting = "Hello"
>>> print str(greeting)
Hello

>>> print repr(greeting)
'Hello' 
```

如果您正在编写自己的类，并且非常简单，则可以`__repr__`返回可以评估的内容：

```
class Song(object):
    def __init__(self, title, artist):
        self.title = title
        self.artist = artist

    def __repr__(self):
        return "Song(%r, %r)" % (self.title, self.artist)

    def __str__(self):
        return "%s - %s" % (self.artist, self.title) 
```

请注意我是如何使用`%r`来获取`repr`标题和艺术家的。这会自动处理转义和引用（对于python），并允许我评估 的结果`repr(a_song)`，尽管我不会在调试之外这样做。再次，`str`返回您将打印给用户的内容，`repr`帮助您调试的内容。如果类变得比这更复杂，您将无法从`repr`. 这里的约定是返回一个简洁的字符串来标识您的实例，通常使用尖括号：

```
>>> repr(type(None))
"<type 'NoneType'>"

>>> import gtk
>>> win = gtk.Window()
>>> repr(win)
'<gtk.Window object at 0x10de45690 (GtkWindow at 0x7fdd89240000)>' 
```

# ios - 使用 facebook sdk3.2 ios 发布到墙上

> ID：15661064
> 
> 赞同：0
> 
> 时间：2013-03-27T14:13:33.917
> 
> 标签：ios, facebook

我编写 iphone 应用程序，我想在我的 facebook 墙上发帖，我使用 facebook SDK 3.2 for ios。有谁知道我是怎么做的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:48:50.677

```
- (void) postWall:(NSString *)caption:(NSString *)description:(NSString *) name:(NSString *)link{

    NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       name, @"name",
                                       caption, @"caption",
                                       description, @"description",
                                      link,@"link",

                                       nil];

    [FBRequestConnection startWithGraphPath:@"me/feed"
                                 parameters:postParams
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error){}

     ];

} 
```

# android - 在 Android 中查询大型数据集的最快方法

> ID：15661068
> 
> 赞同：0
> 
> 时间：2013-03-27T14:13:36.007
> 
> 标签：android, database, sqlite, orm

我即将将 iOS 应用程序移植到 Android 上。该应用程序使用核心数据支持的 150MB 的 SQLite 数据库。一些繁重的查询有时需要长达 10 秒。因此，我正在寻找在 Android 中查询数据的完美方式。在我开始之前有什么好的建议吗？

或者任何我可以用来让生活更轻松的库，比如 ORM 工具、GreenDAO、ORMLite？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:18:19.227

[`ORMLite`](http://ormlite.com/)并且[`GreenDAO`](http://greendao-orm.com/)都是很好的库，但我不知道它们是否符合您的需求。他们会使用反射（至少[`ORMLite`](http://ormlite.com/)我认为是这样），并且可能会让你的事情变慢一些。

我不完全知道您将如何使用您的数据，但一个不错的解决方案是使用`Loaders`，更具体[`CursorLoaders`](http://developer.android.com/reference/android/content/CursorLoader.html)地访问您的数据库。默认情况下，这将按顺序访问您的数据，因此默认情况下不会加载所有条目。

# c++ - 复数 C++ 实现性能

> ID：15661070
> 
> 赞同：0
> 
> 时间：2013-03-27T14:13:44.243
> 
> 标签：c++, visual-c++, gcc

我有一个程序花费大量时间进行复杂的指数微积分。它目前使用`cexp`来自 C99 数学库。（我将其称为复杂）

但我也必须让程序在 Windows 下运行。

ATM 我使用 MinGW，但如果性能更好，我想切换到 MSVC。但是，MSVC 不提供 C99 支持，因此它必须是 C++ Complex 模板类实现（我将其称为 Complex）；还包括 _complex typedef 但没有`cexp`，所以我必须使用 sin 和 cos 来“手动”计算它。

所以我想知道，哪个更好，性能更好：

*   留在MinGW并使用复杂。我研究了 libc6 的源代码，看起来无论如何都有对 sin 和 cos 的调用。
*   走向 MSVC，使用复杂的实现
*   进入 MSVC，使用 _complex 实现

此外，如果我选择 Complex 或 _complex ，是否值得保持复杂（对于 Unix 操作系统）？或者性能差异是否无关紧要（使用带有-O3的gcc 4.7和带有/O2的MSVC？）

谢谢。

# image-processing - 使用 trainCascadeObjectDetector 训练自定义分类器

> ID：15661072
> 
> 赞同：1
> 
> 时间：2013-03-27T14:13:45.800
> 
> 标签：image-processing, computer-vision, signal-processing, video-processing

是否有任何关于训练自定义分类器的好文档与MathWorks 提供的[不同。](http://www.mathworks.com/help/vision/ug/train-a-cascade-object-detector.html)我已经在 dsp.stackexchange 中问过[这个问题，但没有足够好的答案，所以不要评判我。在此先感谢。](https://dsp.stackexchange.com/questions/8373/training-custom-classifiers-using-traincascadeobjectdetector)

# oracle - 使用 sqlplus 连接到 Oracle 数据库

> ID：15661076
> 
> 赞同：11
> 
> 时间：2013-03-27T14:13:51.290
> 
> 标签：oracle, unix, sqlplus

我在 Unix 环境中使用以下命令连接到 Oracle 数据库：

```
sqlplus test/test@'(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=hostname.com )(PORT=1521)))(CONNECT_DATA=(SID=mysid))' 
```

但我得到以下错误：

```
Use SQL*Plus to execute SQL, PL/SQL and SQL*Plus statements.

Usage 1: sqlplus -H | -V

    -H             Displays the SQL*Plus version and the
                   usage help.
    -V             Displays the SQL*Plus version.

Usage 2: sqlplus [ [<option>] [{logon | /nolog}] [<start>] ]

  <option> is: [-C <version>] [-L] [-M "<options>"] [-R <level>] [-S] 
```

请帮助我在使用命令时出错的地方。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-24T14:02:28.643

尝试这个： `sqlplus USER/PW@//hostname:1521/SID`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T12:25:23.200

> sqlplus 用户名/密码@数据库

例如：

> sqlplus hr/hr@orcl

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-13T07:10:17.887

从 Unix 用户连接 Oracle 数据库的不同方法是：

```
[oracle@OLE1 ~]$ sqlplus scott/tiger

[oracle@OLE1 ~]$ sqlplus scott/tiger@orcl

[oracle@OLE1 ~]$ sqlplus scott/tiger@192.168.244.128:1521/orcl

[oracle@OLE1 ~]$ sqlplus scott/tiger@//192.168.244.128:1521/orcl

[oracle@OLE1 ~]$ sqlplus "scott/tiger@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=ole1)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)))" 
```

请参阅链接中的说明：[https ://stackoverflow.com/a/45064809/6332029](https://stackoverflow.com/a/45064809/6332029)

谢谢！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-01T19:38:31.567

简单的方法（使用 XE）：

1）。配置您的 tnsnames.ora

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = HOST.DOMAIN.COM)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  ) 
```

您可以将 HOST.DOMAIN.COM 替换为 IP 地址，默认情况下 TCP 端口是 1521（检查一下），看看这个配置的名称是 XE

2）。使用名为 sqlplus 的应用程序：

```
sqlplus SYSTEM@XE 
```

SYSTEM应替换为授权的USER，并在出现提示时输入您的密码

3）。查看防火墙以了解某些被阻止的 TCP 端口的任何可能性，并在出现时修复它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T08:25:09.853

如果你想连接oracle数据库

1.  打开 sql 提示符
2.  与 sysdba 连接 XE-conn / as sysdba for IE-conn sys as sysdba
3.  然后通过以下命令启动数据库；

一旦它启动意味着您现在可以访问 oracle 数据库。如果你想连接另一个用户，你可以写 conn 用户名/密码，例如 conn scott/tiger；它将显示已连接......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-08T20:52:10.140

会是这样的

```
sqlplus -s /nolog  <<-!
connect ${ORACLE_UID}/${ORACLE_PWD}@${ORACLE_DB};
whenever sqlerror exit sql.sqlcode;
set pagesize 0;
set linesize 150;
spool <query_output.dat> APPEND
@$<input_query.dat>
spool off;
exit;
! 
```

这里

```
ORACLE_UID=<user name>
ORACLE_PWD=<password>
ORACLE_DB=//<host>:<port>/<DB name> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-06T14:04:23.793

正如大卫奥尔德里奇解释的那样，你的括号应该在 sqlplus 命令之后开始，所以它应该是：

`sqlplus 'test/test@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=hostname.com )(PORT=1521)))(CONNECT_DATA=(SID=mysid))'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-05T16:57:05.577

```
tnsping xe --if you have installed express edition
tnsping orcl --or if you have installed enterprise or standard edition then try to run
--if you get a response with your description then you will write the below command
sqlplus  --this will prompt for user
hr --user that you have created or use system
password --inputted at the time of user creation for hr, or put the password given at the time of setup for system user
hope this will connect if db run at your localhost.
--if db host in a remote host then you must use tns name for our example orcl or xe
try this to connect remote
hr/pass...@orcl or hr/pass...@xe --based on what edition you have installed 
```

# ios - 从 NSMutableDictionary 中删除所有数据

> ID：15661077
> 
> 赞同：4
> 
> 时间：2013-03-27T14:13:51.990
> 
> 标签：ios, ipad, nsmutablearray, nsmutabledictionary

也许这是一个非常常见和书呆子的问题。我有一个 NSMutableDictionary，我正在向其中添加一些对象，然后将字典添加到 NSMutableArray。将字典添加到数组后，我将删除字典的所有对象并将其设置为 nil，这将从添加字典的数组中删除数据。我做错了什么导致数组丢失数据？

```
NSMutableDictionary *lDict = [[NSMutableDictionary alloc]init];
[lDict setObject:lDate forKey:@"date"];
[lDict setObject:presentationId forKey:@"pptId"];
[lDict setObject:presentationName forKey:@"PresentationName"];
[lDict setObject:presentationDesc forKey:@"PresentationDesc"];
[lDict setObject:presentationThumb forKey:@"presentationThumb"];
[lDict setObject:postCallRowId forKey:@"postCallId"];
[lDict setObject:userReaction forKey:@"userReaction"];
[lDict setObject:appDel.gRegion forKey:@"Region"];
[lDict setObject:@"Presentation" forKey:@"ContentType"];

[durationArray addObject:lDict];

 //here I am having data in array

[lDict removeAllObjects];
lDict=nil;

//here I lost data in array also 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:29:17.110

像这样的东西怎么样：

```
NSMutableDictionary *lDict = [[NSMutableDictionary alloc]init];

[lDict setObject:lDate forKey:@"date"];
[lDict setObject:presentationId forKey:@"pptId"];
[lDict setObject:presentationName forKey:@"PresentationName"];
[lDict setObject:presentationDesc forKey:@"PresentationDesc"];
[lDict setObject:presentationThumb forKey:@"presentationThumb"];
[lDict setObject:postCallRowId forKey:@"postCallId"];
[lDict setObject:userReaction forKey:@"userReaction"];
[lDict setObject:appDel.gRegion forKey:@"Region"];
[lDict setObject:@"Presentation" forKey:@"ContentType"];

//make a new dictionary and save it
[durationArray addObject:[[NSDictionary alloc] initWithDictionary:lDict]];

[lDict removeAllObjects];
lDict=nil; 
```

在从可变字典中删除所有对象之前，请创建一个具有相同内容的新字典并将其保存到数组中。

通过创建新字典，您仍然可以在原始字典中维护键/值对设置，而不仅仅是保存值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:19:08.927

自上而下，数组包含一个指向字典的指针，然后它包含指向您添加的所有对象的指针。将字典添加到数组并不意味着它们数组具有指向各个对象的指针——数组只知道字典，只有字典知道对象。当您从字典中删除所有对象时，数组看不到任何更改。就它而言，它仍然有一个指向字典的指针。

如果您要做的是将字典中的对象添加到数组中，那么您应该遍历字典并将各个对象一个接一个地添加到数组中。

```
 for (NSString *key in lDict)
 {
      [durationArray addObject:[lDict objectForKey:key]];
 }

 [lDict removeAllObjects];
 lDict=nil; 
```

此时您的数组中应该仍然有对象。

如果您想一次添加所有内容，可以尝试：

```
 [durationArray addObjectsFromArray:[lDict allValues]];
 [lDict removeAllObjects];
 lDict = nil; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:24:51.907

是否有特定的清洁原因`NSMutableDictionary`？正如其他人所提到的，`NSArray`持有指向对象的指针，所以这些也被“清理”了。

防止这种情况的一种方法是将您的副本添加`NSDictionary`到`NSArray`使用中`[durationArray addObject:[lDict copy]];`（或者`[lDict mutableCopy]`如果它应该是可变的，则调用）。如果要在循环中添加字典，只需在循环`NSDictionary`内部创建而不是在外部创建。

# android-source - Android Source：哪个类将原始触摸输入或鼠标输入转换为实际输入/导航？

> ID：15661084
> 
> 赞同：0
> 
> 时间：2013-03-27T14:14:11.310
> 
> 标签：android-source

...因为我需要修改源以使用游戏手柄实现类似的控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:19:18.390

在 Android 中有一个[MotionEvent](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/core/java/android/view/MotionEvent.java)类和一个[KeyEvent](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/core/java/android/view/KeyEvent.java)类描述了多种用户输入事件。InputManagerService将负责生成这些事件[。](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/services/java/com/android/server/input/InputManagerService.java)

例如，如果我需要为 android 生成一个滑动事件。我可以简单地获取一个 MotionEvent，然后通过 InputManagerService 将其注入到 android。

```
MotionEvent event = MotionEvent.obtain(when, when, action, x, y, pressure, DEFAULT_SIZE,DEFAULT_META_STATE, DEFAULT_PRECISION_X, DEFAULT_PRECISION_Y, DEFAULT_DEVICE_ID,DEFAULT_EDGE_FLAGS);
event.setSource(inputSource);
InputManager.getInstance().injectInputEvent(event,InputManager.INJECT_INPUT_EVENT_MODE_WAIT_FOR_FINISH); 
```

实际上我是从[Input.java](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/cmds/input/src/com/android/commands/input/Input.java)得到这个源代码的，它还展示了如何将用户输入注入 Android 的其他示例。

然后将目光移到 InputManagerService 上。injectInputEvent 是一个本地方法，它最终依赖[InputDispatcher](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/services/input/InputDispatcher.cpp)将事件排入队列并调度它们。然后它将在 Window 和 InputManager 之间创建一个名为[InputChannel](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.2_r1/core/java/android/view/InputChannel.java)的管道，以将事件分派到目标窗口。

# c++ - 在 C/C++ 中保持内存区域不变的方法

> ID：15661099
> 
> 赞同：-3
> 
> 时间：2013-03-27T14:14:51.657
> 
> 标签：c++, c

在 C++ 中，我在 char 指针的帮助下写入内存区域。我的 char 指针如下：

```
 unsigned char * writer;
  *(writer++)=0xF1; //example of write 
```

现在我的问题是，一旦我写......我的程序中的其他一些写能够覆盖这些数据......由于我在阅读时得到不正确的结果。因为我只写了一次..在 C/C++ 中有什么方法可以让我能够保持这个内存区域不变（不变）..这样程序的其他部分就不会覆盖它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:18:16.207

不便携，不。

您也许可以使用操作系统提供的工具将整个内存页面标记为只读。这可能对您有用，也可能对您不起作用，具体取决于您是否可以将相关字节隔离到专用内存页面中。这也有点像大锤的方法。

如果您想这样做以解决错误，那么更好的方法是找到并修复错误。例如，如果您怀疑存在内存损坏，[`valgrind`](http://valgrind.org/)这是一个非常有用的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:18:33.897

您没有提供足够详细的解释来给出确切的答案，但我原以为只需传递指针`const`就足以完成您想要的操作：

```
const unsigned char *writer; 
```

也许将写入功能包装到一个类中，并且只允许`const`访问内存：

```
class MemWriter
{
private:
    unsigned char *writer;
public:
    const unsigned char *getMemory() const
    {
        return writer;
    }
    //
    // Other methods to perform the writing defined here
    //
}; 
```

这实际上不会阻止代码将指针转换为 non-`const`并写入它，但它至少会表明您的意图是内存是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:58:42.540

在 C++ 中，没有什么可以阻止您写入程序可用的地址空间，只要您有它的地址 - 32 位/64 位整数。使用 const 之类的关键字来防止意外覆盖，并使读者清楚您的意图。在下面的代码中，让我们看看我们如何处理地址号，假设是一台 32 位机器。

```
int main()
{
    int i = 998979789;

    std::cout << i << std::endl;

    int j = (int)(&i);// get the address number

    char * m = (char*)j; // change to a char*

    char old = m[0]; // store the  char for later use

    m [0] = 'A'; // write over the memory

    std::cout << i << std::endl;

    m[0] = old; // again write to bring it back

    std::cout << i << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:26:52.293

如果您试图保护您可以信任的例程不会将指向 const 的指针转换为指向非 const 的指针，但可能会无意中写入应视为常量的缓冲区（例如，由于印刷错误或由于编写例程时的粗心大意），然后只需将指针转换为指向 const 的指针，然后仅将其传递给其他例程。当例程尝试通过指向常量的指针进行写入时，编译器通常会发出警告或错误。（其中有一些漏洞，例如`strchr`例程。）当您稍后释放内存时，您可能需要记录指向非常量的原始指针，或者您将不得不“强制”转换指针 - to-const 返回指向非 const 的指针。

如果您试图防止例程可能溢出缓冲区或以其他方式严重误入歧途的错误，请检查您的计算平台是否提供`mprotect`调用。这将需要在页面对齐的地址处以页面大小为单位分配内存（您的平台可能有这样的调用`valloc`）。同样，当需要释放内存时，您可能需要更改保护以允许再次写入。

# php - 日期间隔，计数 - 使用自己的日期/时间格式

> ID：15661100
> 
> 赞同：0
> 
> 时间：2013-03-27T14:14:55.727
> 
> 标签：php, mysql

我正在尝试分别统计今天和昨天的访客人数。

我的问题是我使用自己的日期和时间格式，它像这样保存在我的数据库中：HH：MM DD.MM.YYYY，现在为了让昨天的访问者我试过这个：

```
$sql="SELECT COUNT(*) as count FROM lst_visitors WHERE country = '$country' AND DATE(visits) = DATE_SUB(CURDATE(),INTERVAL 1 DAY)"; 
```

今天：

```
$sql="SELECT COUNT(*) as count FROM lst_visitors WHERE country = '$country' AND DATE(visits) = DATE(NOW())"; 
```

但这只是显示所有内容为 0。

然后我尝试了：

```
$today = date("H:i d.m.Y");
$sql="SELECT COUNT(*) as count FROM lst_visitors WHERE country = '$country' AND DATE(visits) = DATE($today())"; 
```

但这不会输出任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:17:06.143

您应该将其存储为一种`datetime`类型，并且应该将它们转换为这种类型。同时，您可以使用[`STR_TO_DATE`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)：

```
SELECT STR_TO_DATE('15:50 27.03.2013', '%H:%i %d.%m.%Y') 
```

**结果**

```
| STR_TO_DATE('15:50 27.03.2013', '%H:%I %D.%M.%Y') |
-------------------------------------------------- ---
| 2013 年 3 月 27 日 15:50:00+0000 |
```

应用你的领域：

```
$sql="SELECT COUNT(*) as count FROM lst_visitors WHERE country = '$country' 
          AND DATE(STR_TO_DATE(visits, '%H:%i %d.%m.%Y')) = DATE(NOW())";

$sql="SELECT COUNT(*) as count FROM lst_visitors WHERE country = '$country' 
          AND DATE(STR_TO_DATE(visits, '%H:%i %d.%m.%Y')) = DATE_SUB(CURDATE(),INTERVAL 1 DAY)"; 
```

# arrays - 循环在一次迭代后退出

> ID：15661105
> 
> 赞同：0
> 
> 时间：2013-03-27T14:15:26.173
> 
> 标签：arrays, loops, iteration

我有以下循环：

```
 public int getIsRepeated(int index)
    {
        long currentValue = myValues[index - 1];
        long previousValue = myValues[index - 2];

        int count = 0;

        for (int i = index - 5; i >= 4; i =- 4) 
        {
            if (myValues[i] == currentValue && myValues[i - 1] == previousValue)
                count++;
        }

        return count;
    } 
```

该表填充了数字，其中数字可以以 4 个为一组重复，例如：

```
 myValues[1] = 29;
    myValues[2] = 12;
    myValues[3] = 144;
    myValues[4] = 123;
    myValues[5] = 234;
    myValues[6] = 348;
    myValues[7] = 666;
    myValues[8] = 333;
    myValues[9] = 100;
    myValues[10] = 500;
    myValues[11] = 666;
    myValues[12] = 333;
    myValues[13] = 100;
    myValues[14] = 500;
    myValues[15] = 666;
    myValues[16] = 333;
    myValues[17] = 100;
    myValues[18] = 500;
    index= 19; 
```

该函数应该开始检查重复值并从索引 14 和 13 开始，并分别将它们与索引 18 和 17 进行比较。然后循环应该再迭代一次以比较索引 10 和 9 处的值，但它会在一次迭代后退出。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:19:48.213

这是一个错误：

```
for (int i = index - 5; i >= 4; i =- 4) 
```

应该

```
for (int i = index - 5; i >= 4; i -= 4) 
```

# iphone - 带有文本笔画/轮廓的 UIButton

> ID：15661106
> 
> 赞同：1
> 
> 时间：2013-03-27T14:15:29.690
> 
> 标签：iphone, ios, objective-c, xcode, uibutton

我想绘制一个`UIButton`使用轮廓的文本，即笔划。因此，我尝试使用 titleLabel 制作我自己的自定义标签并分配给`UIButton.titleLabel`哪个不起作用。有人提到我可以添加`UILabel`，`UIButton`但我不确定这个解决方案是否好。

有人可以推荐一个稳定的方法来解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:42:49.850

您可以使用

```
- (void)setAttributedTitle:(NSAttributedString *)title forState:(UIControlState)state 
```

的方法`UIButton`。

例如。像这样的属性字符串

```
NSAttributedString *attributedText =
[[NSAttributedString alloc] initWithString:title
                                       attributes:@{NSStrokeWidthAttributeName: [NSNumber numberWithInt:-6],
                       NSStrokeColorAttributeName: titleBorderColor,
                   NSForegroundColorAttributeName: [UIColor whiteColor]}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:38:41.993

您还可以将视图作为子视图添加到您的按钮。在此视图中，您可以放置​​您的标签，或者，如果您愿意，可以放置更多标签，例如一个带有两个不同格式文本行的按钮。

# android - 在android上实现平滑微调器的最佳方法

> ID：15661107
> 
> 赞同：0
> 
> 时间：2013-03-27T14:15:31.660
> 
> 标签：android, multithreading, performance

我很难在 android 上完成流畅的加载动画（没有滞后/口吃）。我正在使用 AsyncTask 异步获取数据，但似乎 UI 线程受它的影响。对于我的微调器（加载指示器），我使用的是 png 图标，并通过动画旋转它：

```
Animation mRotateAnim = AnimationUtils.loadAnimation(getActivity(), R.anim.rotate);
progressBar.startAnimation(mRotateAnim); 
```

加载数据时，微调器开始滞后。当我尝试在 webview 中加载内容时，情况会变得更糟 -> 加载动画会完全冻结长达 3 秒。

我正在使用 Galaxy S3 进行测试（多核！）。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:37:37.393

你不想使用标准的 Android 微调器，它应该会给你更好的性能。如果不查看[此](http://www.hrupin.com/2011/09/how-to-make-custom-indeterminate-progressbar-in-android-or-how-to-change-progressbar-style-or-color)链接以创建自定义`ProgressBar`，请查看下面的布局。

`WebView`我在我的 main`RelativeLayout`和 my`ProgressBar`在相同的布局中指定 my 。一旦加载布局，我`ProgressBar`就会显示在顶部，当`WebView`内容加载时，我会隐藏`LinearLayout`我`ProgressBar`的定义。

这在我的 HTC One X 上非常适合我

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView
    android:id="@+id/browserView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</WebView>

<LinearLayout
    android:id="@+id/browserProgressLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/back"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/widget_background_dark"
        android:gravity="center_vertical|center_horizontal"
        android:orientation="vertical"
        android:padding="@dimen/content_padding" >

        <TextView
            style="@style/ListLargeText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:text="@string/bus_loader_text"
            android:textStyle="bold"
            android:textColor="@color/terminal_text_color" />

        <ProgressBar
            android:id="@+id/browserProgress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal" />
    </LinearLayout>
</LinearLayout> 
```

您应该能够在`ProgressDialog`没有任何性能问题的情况下使用法线。这实际上是更好的方法，因为这将根据您应用于应用程序的主题进行样式设置。

```
ProgressDialog progDailog = ProgressDialog.show(_context,
                progressString, "Loading please wait...",
                true); 
```

# git - 行历史查看器 - Git

> ID：15661110
> 
> 赞同：69
> 
> 时间：2013-03-27T14:15:43.097
> 
> 标签：git, ide, line, versioning

我想知道你们中是否有人知道一种工具，它可以让我在代码中选择一行，然后逐个提交地查看该行历史记录的列表视图。

有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-08-21T21:30:29.757

也许[IntelliJ IDEA 中的注释](https://jetbrains.com/help/idea/viewing-changes-information.html#annotations)是您正在寻找的：

[![启用注释的左侧装订线](../Images/ac582f0ad6f11dc137c530b46cb39826.png)](https://i.stack.imgur.com/eWpil.png)

## 显示和隐藏注释

1.  在编辑器中打开所需的文件。
2.  要显示注释，请右键单击左侧装订线，然后选择*Annotate*：
    [![上下文菜单](../Images/6ddbf2c5c6a8744e273c1516011c217d.png)](https://i.stack.imgur.com/jO2qI.png)
3.  要隐藏注释，请右键单击注释装订线，然后选择*Close Annotations*。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-27T14:32:22.743

我只知道 IntelliJ IDEA“[查看选择的更改历史记录](https://www.jetbrains.com/help/idea/2017.1/viewing-changes-information.html#changes_history)”功能。

您还可以尝试使用几个`git blame`命令来迭代片段的历史记录。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2021-07-14T12:44:30.983

如果您想查看`inline`此类信息，则可以添加[GitToolBox](https://plugins.jetbrains.com/plugin/7499-gittoolbox)插件。[YT 上的实时示例](https://youtu.be/IndGlm2uZCU?t=115)

示例视图： [![在此处输入图像描述](../Images/cc53c540b7699a1f8300a044ae48cf1a.png)](https://i.stack.imgur.com/BZKDz.png)

如何设置： [![在此处输入图像描述](../Images/63d66faccc22e285827255ccccac8053.png)](https://i.stack.imgur.com/4d9Em.png) [![在此处输入图像描述](../Images/1a83fdd0b158e2d57bc3cd5abb84b70d.png)](https://i.stack.imgur.com/vLhMg.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-11T08:45:49.547

# 混帐责备^(（[文档](https://git-scm.com/docs/git-blame)）)

`git-blame`显示上次修改文件每一行的版本和作者。

## 使用示例

当您有兴趣查找文件 foo 的第 40-50 行的原点时，您可以像这样使用 -L 选项（它们的含义相同——都要求从第 40 行开始的 11 行）：

```
git blame -L 40,50 foo.txt
git blame -L 40,+11 foo.txt 
```

如果您想找出谁在特定提交之前编辑了该行（在此示例中为 fe25b6d；fe25b6d^ 是 fe25b6d 的父级），则可以指定 git blame 的修订版从（而不是默认的 HEAD）开始回顾：

```
git blame -L 40,+11 fe25b6d^ -- foo.txt 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-05-11T08:59:59.810

# git 日志^(([文档](https://git-scm.com/docs/git-log)))

`git-log`显示提交日志。

## 使用示例

您可以指定 -L 选项来跟踪由“，”给出的行范围的演变。您可以多次指定此选项。

```
git log -L 40,50:foo.txt 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-01-11T07:30:57.807

如果您使用的是 IntelliJ，那么它的注释功能提供了一个选项来对以前的版本进行注释。使用此选项，您可以返回该行的历史记录。

在下面的屏幕截图中找到显示，此选项及其在社区版中也可用。

[![在此处输入图像描述](../Images/7228dc7421c14866da3b83bc544c12be.png)](https://i.stack.imgur.com/LEgAB.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-28T08:27:16.037

[正如Can Git show history for selected lines?](https://stackoverflow.com/questions/10816578/can-git-show-history-for-selected-lines/22089607#22089607)中的评论之一所建议的那样？

```
git show $(git blame example.js -L 250,260 | awk '{print $1}') 
```

更多信息：[每一行代码都会被记录。](http://mislav.uniqpath.com/2014/02/hidden-documentation/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-11-25T17:46:12.040

在 IntelliJ 中，您可以在选择一行/多行后在 git 子菜单中使用 show history 进行选择。

[![在此处输入图像描述](../Images/e7170799ab48ee49e61a281448b3fbba.png)](https://i.stack.imgur.com/xKdm8.png)

# c# - Npgsql 命令超时值；0是不确定的吗？

> ID：15661112
> 
> 赞同：3
> 
> 时间：2013-03-27T14:15:46.073
> 
> 标签：c#, visual-studio-2010, npgsql

我还没有真正找到任何明确说明这一点的东西。如果我在 npgsql 中为连接对象设置 Commandtimeout 值，是否会将其设置为无限期等待？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T10:14:21.803

是的，0 是无限的。

Npgqlstate.cs 包含下面的代码，`context.Mediator.CommandTimeout > 0` 因此如果 CommandTimeout 为 0，Npgsql 将永远等待。

```
internal IEnumerable<IServerResponseObject> ProcessBackendResponsesEnum(NpgsqlConnector context,
    bool cancelRequestCalled)
{
    try
    {
    // Process commandTimeout behavior.

    if ((context.Mediator.CommandTimeout > 0) &&
            (!CheckForContextSocketAvailability(context, SelectMode.SelectRead))) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-15T09:06:21.040

请参阅[postgreSQL 文档](http://www.postgresql.org/docs/8.3/static/libpq-envars.html)：

> PGCONNECT_TIMEOUT 设置 libpq 在尝试连接到 PostgreSQL 服务器时将等待的最大秒数。如果未设置或设置为零，libpq 将无限期等待。不建议将超时设置为小于 2 秒。

# google-chrome-extension - 使用 chrome.app.window.create 时的自定义任务栏图标

> ID：15661116
> 
> 赞同：3
> 
> 时间：2013-03-27T14:15:57.600
> 
> 标签：google-chrome-extension, google-chrome-app

打开应用程序窗口时，是否可以使用与清单中指定的图标不同的图标`chrome.app.window.create`？

基本上我希望能够打开多个窗口，每个窗口都有自己的图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:51:57.007

目前，没有。在每个操作系统（尤其是 OS X）上都提供自定义图标是一项挑战，因此目前我们的目标只是让最终用户识别谁拥有给定窗口，这意味着为所有应用程序的窗口使用应用程序图标。如果您有一个您认为对不同操作系统有意义的特定用例，请您在[crbug.com](http://crbug.com)上描述它，以便我们在未来的版本中考虑它吗？谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T12:35:42.497

此功能自 Chrome M54 起可用。

现在可以在调用[chrome.app.window.create时将图像 URL 指定为](https://developer.chrome.com/apps/app_window#method-create)[CreateWindowOptions](https://developer.chrome.com/apps/app_window#type-CreateWindowOptions)`icon`中的属性

# uitableview - 如何从外部 tableview 方法更改 UITableViewCell

> ID：15661122
> 
> 赞同：0
> 
> 时间：2013-03-27T14:16:22.483
> 
> 标签：uitableview, uiswitch

我有一个 UITableView，它将 UISwitch 作为 UITableViewCell 附件视图。![在此处输入图像描述](../Images/1394000e0c83d364e970a41317cb75e1.png)

我正在尝试创建一种响应开关更改的方法。基本上在任何给定时间都应该只有一个阀门打开，所以我希望当我打开一个开关时，它会使已经打开的开关关闭。

我做了这样的事情：

```
-(IBAction)openCloseValve:(id)sender 
```

{

```
UISwitch *theSwitch = (UISwitch *)sender;

if ([theSwitch isOn])

{

    //Open Valve!

    NSLog(@"Opening Valve!");

    Storage *strg = [Storage sharedStorage];

    UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:strg.openValve.intValue-1 inSection:0]];

    UISwitch *newSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];

    newSwitch.onTintColor = [UIColor greenColor];

    newSwitch.on = NO;

    oldCell.accessoryView = newSwitch;

    strg.openValve= [[NSNumber alloc] initWithInt:theSwitch.tag + 1];

    NSLog(@"%d", strg.openValve.intValue);

} else {

    //Close Valve!

    NSLog(@"Closing Valve!");

} 
```

}

到目前为止，它什么也没做。我知道正在调用该方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:49:35.883

旧单元格需要通过 [tableView reloadCellsAtIndexPath:] 进行更新。您可以通过更新旧开关而不是创建新开关来避免这种情况：

```
UISwitch *oldSwitch = (UISwitch *)oldCell.accessoryView;
oldSwitch.on = NO; 
```

# ruby - 使用 Nokogiri::HTML 和 Ruby 进行 Web Scraping - 如何将输出放入数组？

> ID：15661125
> 
> 赞同：4
> 
> 时间：2013-03-27T14:16:32.810
> 
> 标签：ruby, nokogiri, scrape

我刚开始使用 nokogiri 从网站上抓取信息，但不知道如何完成以下工作。我有一些要抓取的 HTML 代码：

```
 <div class="compatible_vehicles">
    <div class="heading">
    <h3>Compatible Vehicles</h3>
    </div><!-- .heading -->
    <ul>
            <li>
        <p class="label">Type1</p>
        <p class="data">All</p>
    </li>
    <li>
        <p class="label">Type2</p>
      <p class="data">All</p>
    </li>
    <li>
        <p class="label">Type3</p>
      <p class="data">All</p>
    </li>
    <li>
        <p class="label">Type4</p>
      <p class="data">All</p>
    </li>
    <li>
        <p class="label">Type5</p>
      <p class="data">All</p>
    </li>
    </ul>
    </div><!-- .compatible_vehicles --> 
```

我已经设法在我的屏幕上获得了我想要的输出：

```
 i = 0
     doc.css('div > .compatible_vehicles > ul > li').each do |item|  
      label = item.at_css(".label").text
      data = item.at_css(".data").text
     print "#{label} - #{data}" + ','
    end  
    i += 1 
```

这给了我一个像这样的列表：Type1 - All,Type2 - All,Type3 - All,Type4 - All,Type5 - All，在屏幕上。

现在我想在数组中获取这个值，以便能够将其保存到 CSV 文件中。我尝试了几件事，但大多数尝试都收到“无法将字符串转换为数组”错误。希望有人可以帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:38:07.070

从 HTML 开始：

```
html = '
<div class="compatible_vehicles">
    <div class="heading">
        <h3>Compatible Vehicles</h3>
    </div><!-- .heading -->
    <ul>
        <li>
        <p class="label">Type1</p>
        <p class="data">All</p>
        </li>
        <li>
        <p class="label">Type2</p>
        <p class="data">All</p>
        </li>
        <li>
        <p class="label">Type3</p>
        <p class="data">All</p>
        </li>
        <li>
        <p class="label">Type4</p>
        <p class="data">All</p>
        </li>
        <li>
        <p class="label">Type5</p>
        <p class="data">All</p>
        </li>
    </ul>
</div><!-- .compatible_vehicles -->
' 
```

用 Nokogiri 解析它并遍历`<li>`标签以获取它们的`<p>`标签内容：

```
require 'nokogiri'

doc = Nokogiri::HTML(html)
data = doc.search('.compatible_vehicles li').map{ |li|
  li.search('p').map { |p| p.text }
} 
```

返回一个数组数组：

```
=> [["Type1", "All"], ["Type2", "All"], ["Type3", "All"], ["Type4", "All"], ["Type5", "All"]] 
```

从那里你应该能够将它插入到 CSV 类的示例中，并让它毫无问题地工作。

现在，将要输出到屏幕的字段的代码与以下内容进行比较：

```
data.map{ |a| a.join(' - ') }.join(', ')
=> "Type1 - All, Type2 - All, Type3 - All, Type4 - All, Type5 - All" 
```

我所要做的就是`puts`它会正确打印。

考虑返回有用的数据结构非常重要。在 Ruby 中，哈希和数组非常有用，因为我们可以遍历它们并将它们按摩成多种形式。从数组数组中创建一个哈希是微不足道的：

```
Hash[data]
=> {"Type1"=>"All", "Type2"=>"All", "Type3"=>"All", "Type4"=>"All", "Type5"=>"All"} 
```

这将使查找变得非常容易。

# full-text-search - 搜索和检索在线文档

> ID：15661130
> 
> 赞同：0
> 
> 时间：2013-03-27T14:16:42.077
> 
> 标签：full-text-search, search-engine

我需要用 Java 开发一个应用程序，该应用程序能够通过仅考虑一些特定的过滤条件（例如，包含的文本、域等）来查找 Web 上可用的文档（HTML、.doc、.pdf 等），然后全部下载。

最好的方法是什么？我应该使用已经提供这些功能的此类库（例如 Guava？）或工具吗？

我知道有很多库（Apache Solr、Apache Nutch 等），但我不确定它们能否完成我的所有任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:02:55.060

Apache Nutch 应该可以帮助您了解我所理解的内容。 [这](https://stackoverflow.com/questions/7506890/how-reading-nutch-generated-content-data-on-the-segment-folder-using-java/15764001?noredirect=1#comment22562363_15764001)和[allenday 的帖子](http://www-scf.usc.edu/~csci572/2013Spring/homework/nutch/allenday20080829.html)应该可以帮助您处理 Java 代码。一些关于 nutch 的阅读肯定会有所帮助。

# c# - 对同一类型的多个对象执行大量操作

> ID：15661137
> 
> 赞同：3
> 
> 时间：2013-03-27T14:17:03.587
> 
> 标签：c#, iteration

我有两个图形对象（比如某种`Table`s），我想设置它们的样式。简单的代码如下：

```
table1.BorderWidth = 2;
table1.BorderColor = Color.GloriousPink;

table2.BorderWidth = 2;
table2.BorderColor = Color.GloriousPink; 
```

（真正的代码有更多的行。）

更聪明的方法是使用方法。

```
void Format Table(int tableIndex)
{
    Table table;
    if(tableIndex == 1)
        table = table1;
    if(tableIndex == 2)
        table = table2;
    table.BorderWidth = 2;
    table.BorderColor = Color.GloriousPink;
} 
```

我正在考虑一种使其更具可扩展性的方法（`if`/`switch`部分增长迅速），我想出了：

```
foreach(Table table in new List<Table> { table1, table2 })
{
    table.BorderWidth = 2;
    table.BorderColor = Color.GloriousPink;
} 
```

这更短，并且任何潜在的附加表都非常简单地添加。它有什么缺点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:20:51.530

没有什么是错误的，但我会按照你最初的想法去做，实际上把它放在一个方法中，而不是传入实际的表。

```
public void Format(Table table)
{
    table.BorderWidth = 2;
    table.BorderColor = Color.GloriousPink;
}

foreach(Table table in tables) 
{
   Format(table);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:19:28.937

我不知道您的要求，但是一些功能样式怎么样：

```
Action<Table> formatTable = (table) => {
    table.BorderWidth = 2;
    table.BorderColor = Color.GloriousPink;
};

new List<Table> { table1, table2 }.ForEach(formatTable); 
```

* * *

如果你不喜欢所有这些`Action`东西：

```
void FormatTable(Table table)
{
    table.BorderWidth = 2;
    table.BorderColor = Color.GloriousPink;
}

new List<Table>{ table1, table2 }.ForEach(FormatTable); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T14:27:47.937

让编译器创建数组：

```
void FormatTable(params Table[] tables)
{
    foreach(var table in tables)
    {
        table.BorderWidth = 2;
        table.BorderColor = Color.GloriousPink;
    }
} 
```

并这样称呼它：

```
FormatTables( table1, table2); 
```

# symfony - 教义自定义类型总是改变表格

> ID：15661139
> 
> 赞同：11
> 
> 时间：2013-03-27T14:17:06.297
> 
> 标签：symfony, doctrine-orm

我添加了一个自定义类型，例如：

```
namespace My\SuperBundle\Types;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class Money extends Type
{
    const MONEY = 'money';

    public function getSqlDeclaration(
        array $fieldDeclaration,
        AbstractPlatform $platform
    ) {
        return 'DECIMAL(10,2)';
    }

    public function getName()
    {
        return self::MONEY;
    }
} 
```

在我的应用程序启动中：

```
namespace My\SuperBundle;

use Doctrine\DBAL\Types\Type;
use My\SuperBundle\Types\Money;

class MyBSuperBundle extends Bundle
{
    public function boot()
    {
        //add custom quantity and wight types
        $em = $this->container->get('doctrine.orm.entity_manager');

        if(!Type::hasType(Money::MONEY)) {
            Type::addType(Money::MONEY, 'My\SuperBundle\Types\Money');
        }
    }
} 
```

但是**，每次**我更新数据库时：

```
php app/console doctrine:schema:update --dump-sql 
```

我不断收到以下信息：

```
ALTER TABLE product_price CHANGE price price DECIMAL(10,2) DEFAULT NULL 
```

除此之外，一切都很好。数据库中的字段是正确的。为什么学说不断更新相同的数据是有原因的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-28T10:12:35.057

您必须覆盖该方法`requiresSQLCommentHint(AbstractPlatform $platform)`并返回`true`。像这样，学说会记住自定义类型。

```
namespace My\SuperBundle\Types;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class Money extends Type
{
    const MONEY = 'money';

    public function getSqlDeclaration(
        array $fieldDeclaration,
        AbstractPlatform $platform
    ) {
        return 'DECIMAL(10,2)';
    }

    public function getName()
    {
        return self::MONEY;
    }

    /**
     * @inheritdoc
     */
    public function requiresSQLCommentHint(AbstractPlatform $platform)
    {
        return true;
    }
} 
```

资料来源：[使用专栏评论进行进一步的学说类型推断](http://www.doctrine-project.org/jira/browse/DBAL-42)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-05T14:30:12.250

有另一种方法可以使用配置来做到这一点。

配置.yml：

```
doctrine:
    dbal:
        types: { money: My\SuperBundle\Types\Money }

    connections:
        your_connection_name:
            mapping_types: { money: money } 
```

资料来源：

*   [http://symfony.com/doc/current/cookbook/doctrine/dbal.html#registering-custom-mapping-types](http://symfony.com/doc/current/cookbook/doctrine/dbal.html#registering-custom-mapping-types)
*   [https://github.com/sonata-project/SonataUserBundle/issues/103#issuecomment-10083314](https://github.com/sonata-project/SonataUserBundle/issues/103#issuecomment-10083314)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T12:05:59.097

您没有告诉 DBAL 平台您的类型，因此很明显，DBAL 模式自省实用程序无法识别它。要注册类型，您可以执行以下操作：

```
use Doctrine\DBAL\Types\Type;
use My\SuperBundle\Types\Money;

class MyBSuperBundle extends Bundle
{
    public function boot()
    {
        /* @var $em \Doctrine\ORM\EntityManager */
        $entityManager = $this->container->get('doctrine.orm.entity_manager');

        if( ! Type::hasType(Money::MONEY)) {
            Type::addType(Money::MONEY, 'My\SuperBundle\Types\Money');
            $entityManager
                ->getConnection()
                ->getDatabasePlatform()
                ->registerDoctrineTypeMapping('decimal', Money::MONEY);
        }
    }
} 
```

这应该可以阻止 DBAL 抱怨模式差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T15:07:35.423

ZF2也有同样的问题。

我解决了它**删除了**我的自定义类型名称中的连字符。

错误的：

```
'doctrine_type_mappings' => [
    'custom-type' => 'custom-type'
], 
```

好的：

```
'doctrine_type_mappings' => [
    'customtype' => 'customtype'
], 
```

关于 Zend Framework 2 中实现的更多细节：[https ://github.com/doctrine/DoctrineORMModule/blob/master/docs/EXTRAS_ORM.md](https://github.com/doctrine/DoctrineORMModule/blob/master/docs/EXTRAS_ORM.md)

我希望这可以帮助某人。

# php - MySQL删除除NULL之外的重复行

> ID：15661141
> 
> 赞同：0
> 
> 时间：2013-03-27T14:17:09.863
> 
> 标签：php, mysql, sql, sql-delete

我的数据库中有一个表（最终），我想删除所有重复的行，除了
那些具有 NULL 值的行；
我试过上面的：

```
 DELETE FROM Final 
  WHERE event_id NOT IN (SELECT MIN(event_id) AS MinID 
                           FROM (SELECT * FROM Final) as x 
                          GROUP BY event_name
                            AND event_name IS NOT NULL) 
```

但没有用。

**编辑**

我的桌子看起来像：

编号 | 珊瑚
1 | 空
2 | 1
3 | 1 <- 删除
4 | 2
5 | NULL <- 保持原样
6 | 1 <-删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:11:04.063

只需将`AND event_name IS NOT NULL`部分移动到主子查询：

```
DELETE FROM Final 
  WHERE event_id NOT IN (SELECT MIN(event_id) AS MinID 
                           FROM (SELECT * FROM Final) as x 
                          GROUP BY event_name**)
    AND event_name IS NOT NULL** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:20:58.297

加入表格怎么样？

```
DELETE  a
FROM    Final a
        LEFT JOIN
        (
            SELECT  Event_name, MIN(Event_ID) MIN_ID
            FROM    Final
            WHERE   Event_name IS NOT NULL
            GROUP   BY Event_name
        ) b ON a.Event_name = b.Event_name AND
                a.Event_ID = b.MIN_ID
WHERE   a.Event_name IS NOT NULL AND 
        b.Event_name IS NULL 
```

# php - 使用 php 获取任何特定域的所有 baklink 域

> ID：15661142
> 
> 赞同：0
> 
> 时间：2013-03-27T14:17:11.093
> 
> 标签：php, hyperlink, dns, alexa

大家好，我被困在这里，我需要一个包含任何特定域的反向链接的所有域的列表。任何人都可以帮助我吗？请为我提供一些链接或一些 api 程序以获取所有反向链接。我在 alexa 上搜索过，他们提供了反向链接详细信息，但没有任何 api 请求。我有一个 php 脚本来获取它具有该域的所有反向链接计数的任何域的排名但我同时需要所有域名。

```
 $url="msn.com";
$xml = simplexml_load_file('http://data.alexa.com/data?cli=10&dat=snbamz&url='.$url);
$rank=(int)$xml->SD[1]->POPULARITY->attributes()->TEXT;
$web=(string)$xml->SD[1]->POPULARITY->attributes()->URL;
$backlink=(int)$xml->SD[0]->LINKSIN->attributes()->NUM;
echo $web." has Alexa Rank ".$rank." has backlink: ".$backlink; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:27:07.353

希望这对你有点用。我是从互联网世界找到的。

```
function check_back_link($remote_url, $your_link) {
  $match_pattern = preg_quote(rtrim($your_link, "/"), "/"); 
  $found = false;
  if($handle = @fopen($remote_url, "r")){
    while(!feof($handle)){
      $part = fread($handle, 1024);
      if(preg_match("/<a(.*)href=[\"']".$match_pattern."(\/?)[\"'](.*)>(.*)<\/a>/", $part)){
        $found = true;
        break;
      }
    }
    fclose($handle);
  }
  return $found;
} 
```

**正在使用的函数示例。**

```
if(check_back_link('http://www.google.com','http://www.yahoo.com')){
  echo 'link found';
}else{
  echo 'link NOT found';
};
// this prints 'link NOT found', unfortunately... 
```

**用 MSN 更新**

```
function msn_backs($url){ 
    $site = fopen('http://search.live.com/results.aspx?q=link%3A'.urlencode($url),'r'); 
    while($cont = fread($site,1024657)){ 
        $total .= $cont; 
    } 
    fclose($site); 
    $match_expression = '/<h5>Page 1 of (.*) results<\/h5>/Us'; 
    preg_match($match_expression,$total,$matches); 
    return $matches[1]; 
} 
```

# java - 在单独的 JAVA 文件中的两个公共类之间共享用户名

> ID：15661147
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:17:15.653
> 
> 标签：java, string, text, sharing

我有两个 JAVA 文件和两个公共类在其中我在 File1.java 中获取用户名，然后需要在 File2.java 中使用它，所以基本上我需要从 File1.java 中的用户获取用户名，然后将其传递给 File2 .java 进行处理。

现在我完成了使用 File1.java 从用户获取用户名的部分，但不知道如何将其提供给 File2.java 进行处理。这就是我从 File1.java 中的用户获取用户名并将其存储到变量用户中的方式。现在我需要将此用户数据移动到 File2.java。

```
 String user = jTextField1.getText(); 
```

所以请帮助我将用户名数据从 File1.java 传递到 File2.java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:21:26.203

What you need is to pass it to `File2.java`, so assuming that you have something like so:

```
public class File2
{
    ...
    //Constructor
    public File2(...)
    ...
} 
```

You would need to change it like so:

```
public class File2
{
    ....
    String userName = "";
    public File2(...String userName...)
    {
        this.userName = userName;
        ...
    }
    ....
} 
```

And call it like so (from your `File1` class):

```
String user = jTextField1.getText();
...
File2 file2 = new File2(..., user, ...); 
```

Alternatively, instead of passing the `userName` field, you can pass an instance of `File1` to your `File2` class and expose whatever fields you want to access through `Field2` by creating the appropriate `get` methods in your `File1` class. This usually comes in handy when you need to access more than one field.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:21:40.160

For sharing values across classes, you can make the variables as instance variables and have setters and getters to access them.

In your case, make `user` as a private instance variable of your class `File1` and then in your `File2` class, you can do something like :

```
public void someMethod(File1 f1Object){

  String s = f1Object.getUser();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:24:32.003

File1.java 和 File2.java 是*文件名*，它们对于您正在讨论的内容并不重要。更重要的是你有两个 java 类。谈论他们的类名而不是文件名。

希望您还拥有两个（或更多）Java**对象**，对吗？也就是说，这些类的实例。

如果第二类的**对象**需要做一些处理，那么就需要在这个第二类中定义一个方法，像这样：

```
public void doSomeProcessing(String userName)
{
} 
```

然后这样称呼它：

```
object2.doSomeProcessing(jTextField1.getText()); 
```

但是请给文件、类、对象和方法起有意义的名字！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:20:10.967

您可以将它作为 a 传递`parameter`给类中存在的方法，`File2`也可以在类中使用 getter 方法并`user`在`File1`类中创建类的新实例`File1`并使用该实例`File2`调用`getter`。

**在文件 1**

```
new File2().doSomethingMethod(user); 
```

**在文件 2 中**

```
public void doSomethingMethod(String user){
    //user has the value you wanted to pass.
} 
```

# html - 所有文本都应该放在段落标签中吗？

> ID：15661149
> 
> 赞同：11
> 
> 时间：2013-03-27T14:17:19.683
> 
> 标签：html, css

如果我有少量文本需要添加到网页中，它们是否应该始终在`<p>`标签中？还是可以偶尔将它们放在 div 中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T14:20:43.687

`<div>`'s 应该用于布局和定位目的，而不是用于存储文本。

在这种情况下，使用`<p>`标签在语义上是正确的——同样，语义上正确的页面由于各种原因（例如爬虫如何有效地解析您的网站等）在搜索引擎中的排名往往更高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:16:19.360

使用“p”标签对文本进行排序是更好的选择。如果要将特定样式应用于布局，可以将“p”标签放在“div”标签内。如果要保留文本的格式，可以使用“pre”标签。

# c++ - C ++中的访问冲突写入位置

> ID：15661152
> 
> 赞同：0
> 
> 时间：2013-03-27T14:17:25.313
> 
> 标签：c++, arrays, pointers, sizeof, dynamic-arrays

第一次在这里写。我已经看到了像我这样的其他几个问题，但无法解决我的问题。我有 4 个课程：歌曲、播放列表、专辑、艺术家。播放列表由一系列歌曲组成。专辑继承了播放列表并具有更多功能，艺术家由专辑数组和其他一些东西组成。

```
Album(char* _name, Song* songs,int _sales ,int _year,int n):Playlist(songs,n)
    {
        name = new char[strlen(_name)+1];
        strcpy(name,_name);
        salesCount=_sales;
        year = _year;
    };
Playlist::Playlist(Song* _songlist, int n)
{
    if(n > 20)
    {
        cout<<"The number of song must be lesser or equal to 20"<<endl;
        return;
    } 

    SongList = new Song[n];
    for(int i = 0 ; i<n; i++)
    {
        SongList[i] = _songlist[i];
    }
numberOfSongs=n;
} 
```

当我使用这个构造函数创建一个专辑时，我没有任何问题，但是当我尝试创建一个专辑数组时，它由使用这个构造函数创建的专辑组成，我遇到了内存访问冲突。有任何想法吗 ？

好的，所以我稍微更新了我的代码。这是我在主要方法中尝试做的事情：

```
Song newSong("My Song", 9, 231),mySong("Your Song", 8 , 180),yourSong("His Song",7,135), herSong("Her Song",8,431);
Song songs[4] = {newSong, mySong,yourSong,herSong};
Album yourAlbum("My Album",songs,200000, 2010, 4);
yourAlbum.PrintInfo(); //<------- WORKS
Album albums[1]; //<------ It calls the deffault constructor of Album and after it gives me //"Source not available"
//When I try to declare it like this Album albums[1] = { yourAlbum } ; it gives me access violation

Artist myArtist("blake", albums);
myArtist.PrintArtistInfo(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:20:35.460

```
Playlist::Playlist(Song* _songlist) {
    numberOfSongs = sizeof(*_songlist)/sizeof(_songlist);  // <-- THIS
    ... 
```

导致将意外（无意义）值分配给，`numberOfSongs` 因为它等于：

```
numberOfSongs = sizeof(Song) / sizeof(Song*); 
```

如果你需要你的函数知道动态分配数组的大小，你应该自己跟踪这个大小并将它传递给这个函数。

另请注意，由于您使用 C++ 进行编程，因此您应该使用该语言提供的功能。您应该使用`std::string`代替 C 样式的字符串和 STL 容器，例如`std::vector`代替 C 样式的数组（在 的情况下`std::vector`，对象内部保存有关其长度的信息，因此您不会处理此类问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:42:40.900

这里的问题是您正在分配一个`sizeof(*_songlist)/sizeof(_songlist);`元素数组。

也就是说，`Song`您分配的项目数等于用于存储 a`Song`的字节数除以用于存储指针（指向 a `Song`）的字节数。这是一个相当无意义的值。

此外，这个数字是一个常数值，它不依赖于您传递给它的数组中的歌曲数量。因此，无论传递什么，此函数的任何运行都将始终分配相同数量的内存。如果此数字大于实际传递的歌曲数，您将在数组之外进行索引，这是未定义的行为。这可以解释你的分段错误。

另一方面，如果您传递的歌曲多于该常量，您将使用适合您分配的数组的歌曲子集初始化您的数组，从而丢失一些数据。为了解决这个问题，要么传递一个（对 a）std::vector 歌曲的引用，要么添加一个额外的参数，其中包含数组中歌曲的实际数量，并将其用作数组的大小。

# ruby-on-rails - Capistrano 是否需要在 Gemfile 的开发组中？

> ID：15661159
> 
> 赞同：6
> 
> 时间：2013-03-27T14:17:48.373
> 
> 标签：ruby-on-rails, rubygems, gem, capistrano, bundler

在 Rails Gemfile 中，是否`gem 'capistrano'`需要在`:development`组内，或者将其放在任意组内有什么好处，比如`:tools`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:46:19.117

Simply put, no, it doesn't **need** to be, but it's good for the sake of best practices and keeping your gemsets uncluttered. The best way to do that is open for debate, but basically as long as Capistrano is available to you in the environment you're working in, it doesn't matter what groups it is or isn't associated with, though I can see little to no advantage of using an arbitrary `:tools` group since `:development` will exclude it in production cleanly and "auto-magically" in the first place.

# python - 设置本地角色后如何触发事件

> ID：15661161
> 
> 赞同：0
> 
> 时间：2013-03-27T14:17:52.253
> 
> 标签：python, plone, zope

我想用“manage_setLocalRoles”方法附加一个事件的触发。像这样：

```
def send_participation_request(self): 
    review_state = self.portal_workflow.getInfoFor(self.context, "review_state", "") 
    if review_state =="public":
        self.context.manage_setLocalRoles(user.id,["Role"]) #fire event
        self.context.reindexObjectSecurity()
    return False 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:34:12.373

`.manage_setLocalRoles()`不发出任何事件。该代码早于 Zope 3 事件。

您必须创建一个猴子补丁挂钩，或者在您自己的代码调用该方法时自己发出一个事件。

# android - 调用 Web 服务时应用程序崩溃

> ID：15661162
> 
> 赞同：0
> 
> 时间：2013-03-27T14:17:54.340
> 
> 标签：android, mysql, json

我需要从 MySQL 数据库中收集数据并显示在 Listview 中，因此我创建了一个 Web 服务并将其托管在服务器上。然后我开始开发应用程序，但我无法得到结果，我的应用程序在哪里崩溃并且错误日志上没有错误。

这是我显示结果的代码

```
package com.hotelapp.test;

import android.app.Activity;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.*;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class AllProductsActivity extends ListActivity {

    //Progress Dialog

    private ProgressDialog pDialog;

    //JSONPraser
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String,String>> productsList;

//url to get records
private static String url_all_products = "http://54.243.58.156/get_all_products.php";

//Json Node Names
private static final String TAG_SUCCESS="success";
private static final String TAG_PRODUCTS="products";
private static final String TAG_HID="hid";
private static final String TAG_NAME="name";

JSONArray products = null;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    //Hashmap for List

    productsList = new ArrayList<HashMap<String, String>>();

    //Load Products In Backgound
    new LoadAllProducts().execute();

    //GEt Listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
  lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // getting values from selected ListItem
            String hid = ((TextView) view.findViewById(R.id.hid)).getText().toString();
            //Starting new Intnet
            Intent in = new Intent(getApplicationContext(),EditProductActivity.class);
            in.putExtra(TAG_HID,hid);
            startActivityForResult(in,100);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */

class LoadAllProducts extends AsyncTask<String,String,String>{

    /**
     * Before starting background thread Show Progress Dialog
     * */

    protected void onPerExecute(){
        super.onPreExecute();
        pDialog = new ProgressDialog(AllProductsActivity.this);
        pDialog.setMessage("Loading Products...Please Wait");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    @Override
    protected String doInBackground(String... strings) {
       // Building Parameters
        List<NameValuePair> param = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_all_products,"GET",param);

        Log.d("All Products: ",json.toString());

        try {
            //Cehck for SUCCESS TAG

            int success = json.getInt(TAG_SUCCESS);

            if(success ==1){
               //Get Product Arra

                products = json.getJSONArray(TAG_PRODUCTS);

                //Looping arrays
                for(int i=0; i<products.length();i++){
                    JSONObject c = products.getJSONObject(i);

                    String id = c.getString(TAG_HID);
                    String name = c.getString(TAG_NAME);

                    //creating new Hashmap
                    HashMap<String, String>map = new HashMap<String, String>();

                    map.put(TAG_HID,id);
                    map.put(TAG_NAME,name);

                    productsList.add(map);

                }
            }  else {
                // no products found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        NewProductActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }

        }  catch (JSONException e){
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute (String file_url){
        //dismiss the dialog after getting all products
        pDialog.dismiss();

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                ListAdapter adapter = new SimpleAdapter(
                        AllProductsActivity.this,productsList,R.layout.list_item,new String[]{TAG_HID,TAG_NAME},
                        new int[]{R.id.hid,R.id.name}
                );

                setListAdapter(adapter);
            }
        });
    }
}
} 
```

这是我的 Json 解析器

```
 package com.hotelapp.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

  import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
                                  List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:20:56.187

我的猜测是您的问题是因为 AsyncTask 中的方法之一未正确命名：

```
protected void onPerExecute(){ 
```

它应该是：

```
protected void onPreExecute(){ 
```

您可能会得到一个 NULL 指针，因为您要在此方法中创建的资源实际上并未被创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T19:21:20.950

要检测此类拼写错误，最好使用注解@overwrite。如果名称不正确会产生编译错误。它似乎是被不小心删除了

# wordpress - 如何将可选菜单 css 类添加到 body_class？

> ID：15661170
> 
> 赞同：1
> 
> 时间：2013-03-27T14:18:07.907
> 
> 标签：wordpress

我试图弄清楚如何将菜单类（管理员中的可选字段）添加到`body_class`，因为我想在页面的其他元素上使用菜单项的颜色：

```
/** Add nav menu css class to body class */
function add_nav_menu_css( $classes ) {
    $classes[] = ‘optional-menu-class’;
    return $classes;
}
add_filter( ‘body_class’, ‘add_nav_menu_css’ ); 
```

什么应该取代“可选菜单类”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:14:39.133

我能找到的唯一方法是使用`wp_get_nav_menu_items($menuID)`

我在下面用我的菜单测试了`id`它`7`

```
$items = wp_get_nav_menu_items( 7 );
foreach ($items as $i) {
    echo $i->classes[0];
} 
```

`sample-page-class`我在外观菜单页面上输入的输出。

所有菜单类都作为类存储在函数`wp_get_nav_menu_items`中，因此您可以`foreach`像我上面那样循环它们。

然后将该数据传输到`body_class`.

### 进一步解释：

所以你`body_class`在functions.php中的过滤器应该像

```
add_filter('body_class','add_nav_menu_css');
function add_nav_menu_css($classes) {

        $items = wp_get_nav_menu_items( 7 ); // change to id of your menu

        foreach ($items as $i) {
                $menuClasses .= $i->classes[0].' ';
        }

        $classes[] = $menuClasses;

        return $classes;
} 
```

### 仅针对当前课程编辑

输入到functions.php页面

```
add_filter('body_class','my_class_names');
function my_class_names($classes) 
{
        $items = wp_get_nav_menu_items( 7 ); //change to suit your menu id
          foreach ($items as $item):
                $menuClasses = $item->classes;
                $objectId = $item->object_id.' ';

                if ( is_page($item->object_id) ):
                    $current[] = $menuClasses;
                endif;

          endforeach;

        $classes[] =  $current[0][0];

        return $classes;
} 
```

文档在[**这里**](http://codex.wordpress.org/Function_Reference/wp_get_nav_menu_items)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:02:11.957

如果您想向 body 标签添加自定义类，只需使用 body 类，

```
<body <?php body_class('class-name'); ?>> 
```

其中 'class-name' 是您的自定义类，如果您希望根据页面/帖子进行更改，只需将其添加到 header.php

```
<?php
if(is_page('your-page-name')){// or post
  $body_class = 'your-custom-page-class';
}
?>
<body <?php body_class($class_name); ?>> 
```

您还可以根据类别名称更改类别。

```
<?php
if( !is_front_page() && is_category() || is_single() ){
   // category single name
   $cat_name = single_cat_title('',false);
   // category id from category name
   $cat_id = get_category_id($cat_name);
   $body_class = $cat_name;
}
?>
<body <?php body_class($body_class); ?>> 
```

希望这对你有用。

米

ps：刚刚看到你的更新看看这里， [https://wordpress.stackexchange.com/questions/20110/add-custom-class-to-wp-nav-menu-using-filter-hook-nav-menu-css -班级](https://wordpress.stackexchange.com/questions/20110/add-custom-class-to-wp-nav-menu-using-filter-hook-nav-menu-css-class)

# ajax - jqplot动态改变系列数据

> ID：15661178
> 
> 赞同：1
> 
> 时间：2013-03-27T14:18:22.597
> 
> 标签：ajax, jqplot, dynamic-data

我的情况是这样的：我有一个由几行组成的情节。我需要的是在为特定行生成新数据的 ajax 调用之后更改其中一个系列的值。

ajax 脚本提供了一个数据字符串，例如：

> [[[['1354233600000'，13.0000]，['1354320000000'，13.0000]，['13544406400000'，17.0000]，['1354492800000'，18.0000]，['13544928.0000]，['1354579200000 ['1354752000000',21.0000],['1354838400000',21.0000],['1354924800000',20.0000],...]]

这些时间戳包含在绘制的图形 xaxis 中

我没有成功的尝试是将此数据字符串设置为新行数据：

> chart1.series[7].data = [ajaxString];
> 
> chart1.replot();

但具体的线实际上消失了，而如果我改变线的其他属性，重新绘制工作：

> chart.series[7].color='蓝色';

在图例 div 中生成蓝色样本。

我尝试修改括号的数量，给出日期字符串而不是时间戳，但没有任何反应。

# java - Java Tapestry5 动态布局

> ID：15661183
> 
> 赞同：1
> 
> 时间：2013-03-27T14:18:30.127
> 
> 标签：java, tapestry

我有一个关于 Tapestry 页面和模板的问题。

用户发送请求以获取页面。我知道该请求来自移动设备或桌面设备。我想显示具有不同布局的请求页面。

例如：

如果请求来自移动设备，我想加载 mobileLayout.tml 和 pages/mobile/index.tml，那个 index.tml 有 t:type="mobilelayout"。

如果它来自桌面设备，我想加载 layout.tml 和 pages/index.tml，那个 index.tml 有 t:type="layout"。

例子：

仅为桌面设备显示页面 pages/index.tml。

仅为移动设备显示页面 pages/mobile/index.tml。

*   请求的页面：/index
*   设备：电话
*   我想加载 mobileLayout 和 pages/mobile/index.tml

*   请求的页面：/index

*   设备：台式机
*   我想加载 layout.tml 和 pages/index.tml

基本上对于移动设备，我想从页面/移动设备获取内容，否则从页面/。

Tapestry5（5.3.6）中是否有类似的可能？

我尝试过类似下面的方法，但没有成功：

LayoutLoader.tml - 我知道请求来自哪里。

```
<t:delegate to="layout" />

<t:block t:id="mobileLayout">
   <t:mobileLayout />     
</t:block>

<t:block t:id="desktopLayout">
   <t:layout />   
</t:block> 
```

组件/布局.tml

```
<body t:type="layoutloader">...</body> 
```

组件/MobileLayout.tml

```
<body t:type="layoutloader">...</body> 
```

页面/索引.tml

```
<div t:type="layout">...</div> 
```

页面/移动/Index.tml

```
<div t:type="mobileLayout">...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:32:35.523

您可能会发现 Igor 的博客文章很有趣[http://blog.tapestry5.de/index.php/2011/06/24/template-skinning/](http://blog.tapestry5.de/index.php/2011/06/24/template-skinning/)

# perl - 检查 perl 中是否存在返回总是 true

> ID：15661184
> 
> 赞同：3
> 
> 时间：2013-03-27T14:18:30.503
> 
> 标签：perl

我在 perl 中有一个子例程来检查数组是否包含特定元素，如果它包含返回 TRUE，否则返回 false。下面的代码应该返回 false，因为搜索到的元素 http_TestABC 不在数组中但它仍然返回 TRUE。无法弄清楚为什么会发生这种情况.任何指针表示感谢

```
#!/usr/bin/perl

use strict;
use warnings;

my @result_listosp;     # defines an empty array

$result_listosp[0] = "origin-server-pool-1"; # array has one element
$result_listosp[1] = "http-pool-OSP2"; # array has 10 elements now
my $osp="http_TestABC";
my $status_osp_check= check_if_entity_exists(@result_listosp,$osp);
print $status_osp_check;

sub check_if_entity_exists()
{
    my @entityarray = @_;
    my $entity = $_[1];

    my $status="FALSE";

    if ( grep( /^$entity$/, @entityarray ) ) {
      $status="TRUE";
      return $status;
    }
    else {
      return $status;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T14:23:53.890

它总是返回 true，因为您误解了如何将参数传递给子例程。当你这样做时：

```
my @entityarray = @_;
my $entity = $_[1]; 
```

您将所有参数分配给`@entityarray`，并将第二个参数分配给`$entity`。因此，当然，如果您检查一个的所有元素，`$entity`它将是其中之一。

您也不应该使用原型，即子名称后面的括号。除非您知道它们的作用，否则最好忽略它们，因为它们具有非常特殊的功能。

解决方案，颠倒参数：

```
check_if_entity_exists($foo, @bar);
...
sub check_if_entity_exists {
    my $entity = shift;     # the first arg
    my @entityarray = @_;   # the rest 
```

发生这种情况是因为 perl 在将数组作为参数传递时将其展平，因此它只是参数列表中的元素，而不是单个变量。Perl 无法知道您是否传递了一个数组。*除非*你玩原型。除了作为练习之外，我**不建议这样做。**如果您执行以下操作：

```
sub foo (\@$) { 
```

然后，您实际上可以将数组作为参数传递，就像`push`and一样`shift`。

您还可以将数组作为参考传递，在这种情况下，您可以执行以下操作：

```
foo(\@array, $var);

sub foo {
    my $aref = shift;    # @$aref is now @array
    my $var  = shift; 
```

在这种情况下，您需要注意您使用的数组与传递给子例程的数组*相同*，而不是副本。因此，如果您更改它，则更改是永久性的。

注意：正如[PSIAlt](https://stackoverflow.com/users/1671032/psialt)指出的那样，如果您的意图是按字面匹配，则不应直接在正则表达式中使用任意字符串。其中可能有导致副作用的元字符。执行以下任一操作：

```
grep /^\Q$entity/, ..       # quote meta characters
grep { $_ eq $entity } ...  # check string equality 
```

正如 PSIAlt 建议的那样，`eq`是最直接的解决方案，除非您需要正则表达式功能，否则可能应该是您使用的解决方案。

# ios - ios - 无法复制 Target->Build Settngs 中的搜索路径设置

> ID：15661186
> 
> 赞同：0
> 
> 时间：2013-03-27T14:18:35.343
> 
> 标签：ios, xcode, ios5, ios6, urbanairship.com

我正在使用 UrbanAirship 创建推送通知。我正在使用此[https://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started:+iOS:+Push)

我在标题为“构建设置”的部分

他们有这样的截图：

![在此处输入图像描述](../Images/f25e144a81c164a34f27469cb72869e9.png)

但是当我尝试在我的 xCode 中执行此操作时，我只能这样设置：

![在此处输入图像描述](../Images/90bd91b3af3e6d86447f0c11fe1d5568.png)

所以我不能让设置出现在“标题搜索路径”行之后，而是出现在它的调试和发布部分中。

我这样做的方式与文档中描述的方式有什么区别？我怎样才能让它看起来像文档中的样子？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:23:32.057

如果您更仔细地查看 UA 提供的屏幕截图，您会看到标题搜索路径旁边有一个指向右侧的披露箭头。如果您可以单击此箭头，它将展开条目以显示调试和发布阶段，就像您在 Xcode 中看到的那样。在我看来你做的一切都是正确的:)

# javascript - slickgrid 通过它的 id 获取行的索引

> ID：15661188
> 
> 赞同：4
> 
> 时间：2013-03-27T14:18:43.690
> 
> 标签：javascript, slickgrid

有没有办法通过它的 ID 获取行的索引（可见网格中的行索引），这也适用于排序/分组的网格？

我正在尝试使用来自 Slickgrid 的函数 scrollRowIntoView，它需要行的索引。现在我的问题是我知道行的 ID，但不知道该行在网格中的索引。我还使用组，这意味着我无法在数据中搜索行索引。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T14:44:12.587

您可以`dataView.getRowById()`用来获取过滤后的网格的索引，也可以用来`dataView.getIdxById()`从整个数据集中获取 ID 的索引。

# c# - windows窗体隐藏面板和显示按钮

> ID：15661189
> 
> 赞同：0
> 
> 时间：2013-03-27T14:18:49.307
> 
> 标签：c#, winforms

我的 Windows 窗体上有一个面板，其中有两个文本框和一个用于用户登录的按钮。成功登录后，我隐藏面板并显示另一个名为 Process Cases 的按钮。一切都按我想要的方式进行。

```
myPanel.Visible = false;
btnProcessCases.Visible=true; 
```

Process Cases 按钮位于面板下方。隐藏后，我希望按钮占据面板之前占据的位置。我怎么做？现在它位于面板下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:23:43.453

添加以下内容：

```
 btnProcessCases.Left = myPanel.Left;
    btnProcessCases.Top = myPanel.Top; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:23:45.710

```
btnProcessCases.Location = myPanel.Location;
btnProcessCases.Size = myPanel.Size;
myPanel.Visible = false;
btnProcessCases.Visible=true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T14:27:12.913

将 的`Dock`属性设置`myPanel`为 Top，然后将您的按钮放在另一个面板 (buttonPanel) 中并将其停靠到顶部。然后切换可见性`myPanel`将使包含按钮的面板很好地滑到顶部。没有令人讨厌的按钮或面板物理位置的重置，也没有令人讨厌的重叠控件设计问题。Dock 物业将很快成为您最好的朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T14:21:14.423

您可以`Location`将按钮的属性设置为`myPanel`面板的位置：

```
btnProcessCases.Location = myPanel.Location;
btnProcessCases.Visible=true;
myPanel.Visible = false; 
```

# c# - C# 框架 2 数据表到 IENumerable

> ID：15661191
> 
> 赞同：1
> 
> 时间：2013-03-27T14:18:53.783
> 
> 标签：c#, sql, linq, frameworks

我需要将 DataTable 转换为 IEnumerable 然后正确使用 LinqBridge ...我需要将`SELECT * FROM X`查询解析为 a`Query.GroupBy(l => l.Field);`以便`foreach`正确使用一些循环对我的查询进行分组...

我试过了

```
public static IEnumerable<DataRow> getRows(DataTable table)
{
    foreach (DataRow row in table.Rows)
    {
        yield return row;
    }
} 
```

但我不能使用`getRows(myDataTable).Any()`或其他 Linq 功能......请帮忙。

我无法从 Framework 2 升级，我的部门想从我的 4.0 应用程序降级到 2.0，因为他们绝对拒绝升级计算机，所以现在我很沮丧，因为我的应用程序是 WPF 4.0，我正在将所有内容迁移到 WinForm (这是一团糟）并更新每种方法...

太感谢了。

**编辑**

发现了问题，我打电话`using LinqBridge`但忘记添加，`using System.Linq`现在问题解决了，一切正常......请删除这篇文章，或者把它留在这里，以指导像我这样的人，让他们知道他们需要打电话给 System.林克...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:21:03.207

尝试 DataTable.Select 方法

[http://msdn.microsoft.com/en-us/library/system.data.datatable.select(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.select(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:53:41.533

Found the problem, I was calling using LinqBridge but forgot to add after that `using System.Linq` now the problem is solved and everything working with the method I've posted on my question.

# php - 索引未定义？

> ID：15661193
> 
> 赞同：-3
> 
> 时间：2013-03-27T14:18:55.063
> 
> 标签：php, sql, arrays

我正在使用以下方法从 SQL 表中检索一行：

```
function fetchlevels($Competence_id){
    $this->query="SELECT * FROM levels WHERE comp_id=".$_REQUEST['levels'];
    $tulos=$this->suoritaKysely();
    return $tulos;
} 
```

我使用以下方法调用索引中的函数：

```
 $alllevels=$hr_object->fetchlevels($_GET['levels']);
 $page->assign('alllevels',$alllevels); 
```

然后在我的表单中，我想获取其中一列的值：

```
$s=$this->alllevels;
echo $s['lvl2']; 
```

但它告诉我

```
 Undefined index: lvl2 in C:\www\index\DevIT\forms\hr\competencelevels.php on line 6 
```

但是，当使用 print_r($s) 时，我可以看到该列有一个数组！

```
Array ( [0] => Array ( [id] => 1 [comp_id] => 1 [lvl1] => sas [lvl2] => scc [lvl3] => sxl [lvl4] => lxsi [lvl5] => azix ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:19:51.680

该值位于该数组内的数组内。所以，不，它实际上并不存在。要访问它，您需要使用：

```
$s[0]['lvl2']; 
```

# c# - 工具提示不适用于 C# 中的嵌套重复控件

> ID：15661200
> 
> 赞同：1
> 
> 时间：2013-03-27T14:19:06.230
> 
> 标签：c#

我有 2 条带单选按钮的电话线。在单选按钮的基础上，我在中继器控制中显示线路详细信息的详细信息。在页面加载时，第一个单选按钮被选中并且工具提示（正在工作。我在 C# 代码后面的 C# 下的 ITEM_databound 上添加了工具提示。当我选择第二个单选按钮时，中继器控件更新。当我悬停鼠标时，工具提示停止工作. 我检查了工具提示类所在的元素。

在 ASp.net(C#) 中，后面的代码：

```
Label1.Style.Add("Color", "Red");
Label1.CssClass = "normal_tooltip";
Label1.Attributes.Add("original-title", "The product is not available."); 
```

在 asp 中：

```
Label1.Attributes.Add("tipsy-gravity", "s"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:49:07.550

这是因为您的收音机可能在更新面板中导致回发。如果是这种情况，一旦导致回发，您将不​​得不重新初始化处理您的工具提示的 js。这可以使用脚本管理器从后面的代码中完成。

```
string strScript = null;
strScript = "alert('" + sInfo + "');";
ScriptManager.RegisterStartupScript(UpdatePanelID, UpdatePanelID.GetType, "ShowInfo", strScript, true); 
```

# html - HTML IE 将焦点放在没有 JavaScript 的按钮上

> ID：15661203
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:13.303
> 
> 标签：html, button, focus

是否可以在没有 javascript 的情况下将焦点设置在表单中的特定按钮上？

如果没有，怎么可能用js做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:22:40.023

In HTML5, the tag `<button>` has the attribute `autofocus`, which sets the focus to the button when the page loads.

To set the focus to a button via javascript:

```
document.getElementById("myButton").focus(); 
```

# php - PayPal IPN 自定义字段无法从下拉列表中获取变量

> ID：15661206
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:20.457
> 
> 标签：php, html, drop-down-menu, paypal, paypal-ipn

我想要完成的只是允许用户从下拉列表中选择他们的用户名，然后选择他们想要使用该帐户购买的物品。一个问题是，当单击 PayPal 按钮时，用户名未存储在自定义字段中，但交易顺利进行。

支付宝按钮代码：

```
 // Get information from database
    $result = mysql_query("SELECT username FROM account WHERE mainusername='".$username."'");

while($row = mysql_fetch_array($result)) {

echo "<option>".$row['username']."</option>";

}
?>
</select>
</tr>
</td>
<tr>
<td>
<input type="hidden" name="on0" value="itemforsale">
<select name="os0">
    <option value="shirt">shirt $5.55 USD</option>
    <option value="short">short $31.55 USD</option>
    <option value="skirt">skirt $62.75 USD</option>
</select>
</td>
</tr>
</table>
<br />
<input type="hidden" name="custom" value="
<?php 
if(isset($_POST['getusername'])) {

$getusername = $_POST['getusername']; 
echo "".$getusername."";

}
?>
">
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:29:15.647

您在遍历用户名时忘记设置“选项”值。它应该看起来像：

```
$result = mysql_query("SELECT username FROM account WHERE mainusername='".$username."'");
while($row = mysql_fetch_array($result)) {
     echo "<option value='".$row['username']."'>".$row['username']."</option>";
} 
```

我还建议为此使用 jQuery。该页面不必重新加载。

```
 <script type="text/javascript">
        $(document).ready(function() { 
            $("#username_select").change(function() { 
                $("#paypal_custom").val($(this).val());
            });
        });
    </script> 
```

将用户名 ID 设置为“username_select”，将 Paypal“自定义”隐藏输入 ID 设置为“paypal_custom”。

# html - 非平方PNG图像作为IE8中的背景图像问题

> ID：15661207
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:25.837
> 
> 标签：html, css, internet-explorer-8, image

在我的[**网站**](http://venkateshwar.github.com/)（仅用于测试）中，我在标题旁边添加了一个背景图像作为徽标`#title`。它在 Chrome 和 firefox 中运行良好，但在 IE8 中运行良好。

当我尝试将`jpg`格式图像添加为徽标时，它在 IE8 中运行良好。然后我尝试使用也可以使用的平方 png 图像。

然后我意识到如果我使用非平方图像，IE8 将无法正常工作，如下所示：

![在此处输入图像描述](../Images/c47e4efde50de619b3a4727f9b3c972c.png)

无论如何让它在IE8中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:30:36.483

问题是因为 IE8 不支持 CSS`background-size`属性。

如果你想支持 IE8 并且你想使用背景图片，你需要提供一个真正适合你给它的空间的图片，而不是让浏览器为你缩放它。

另一种方法是将其作为`<img>`标签中的前景图像而不是背景图像。这将允许它被缩放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:31:54.520

这是工作。你只是*觉得*不是。

[IE 8 ( http://caniuse.com/#search=background-size](http://caniuse.com/#search=background-size) )不支持背景大小；

因此，它使用图像的大小（800x800）。您正在查看图像。只是您看到的是图像的左上角，恰好是透明的。 ![在此处输入图像描述](../Images/3db5df091e9cce9d18ee15d59507f414.png)

想看看我的意思吗？打开你最喜欢的现代浏览器，打开你的检查器工具，然后删除 background-sizing 属性。“图像去哪儿了？” 它还在那里。现在，让 logo div 更大：实际上是 800x800。图像回来了。您基本上模拟了 IE8 如何显示图像（而不是调整 div 部分的大小）。

由于您知道您希望徽标的大小，因此只需使用适当大小的图像，您实际上不需要 background-size 属性。

# java - 背景类的按钮

> ID：15661210
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:27.197
> 
> 标签：java, android, list, android-activity, android-context

我有`BroadcastReceiver`，当它获得某些信息时，我想在活动中按下一个按钮。

此活动内的列表内的按钮删除\更新行。

怎么做？

我试过这样的事情：

```
// trying to invalidate !!!

    try {               
     Target_Activity ti = new Target_Activity();
     ti.refresh.performClick();     
     Log.d("Pleaase", "work");
         } catch (Exception e) {

         } 
```

但它不起作用，我的猜测是我需要以某种方式为该方法提供活动的上下文，但我真的不知道。

所以我只想在 `Target_Activity`可能的情况下按下刷新按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:26:14.590

试试这个，当你加载MainActivity时，它转到ActivityB，ActivityB点击MainActivity中创建的按钮。您必须确保您尝试单击的按钮不为空。

祝你好运

主要活动

```
 package com.example.testproject;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.RelativeLayout;
    import android.widget.Toast;

    public class MainActivity extends Activity {

        RelativeLayout lyt;
        public static Button button;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            lyt = (RelativeLayout) findViewById(R.id.main);
            button = new Button(this);
            button.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(MainActivity.this, "clicked the button",
                            Toast.LENGTH_SHORT).show();
                }
            });
            lyt.addView(button);
            Intent i = new Intent(MainActivity.this, ActivityB.class);
            startActivity(i);
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

    } 
```

活动B

```
 package com.example.testproject;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.Button;

    public class ActivityB extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MainActivity a = new MainActivity();
        Button button =  MainActivity.button;
        button.performClick();
    }
    } 
```

显现

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testproject"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.testproject.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.testproject.ActivityB" >
        </activity>
    </application>

    </manifest> 
```

# c - 将 GHashTable 转储到文件

> ID：15661213
> 
> 赞同：2
> 
> 时间：2013-03-27T14:19:34.490
> 
> 标签：c, hashtable, glib

在我的应用程序中，我需要将[Glib](https://developer.gnome.org/glib/stable/) GHashTable 实例保存到磁盘中，然后再加载到内存中。但我找不到任何直接转储实例的方法。

一种选择是不直接保存 GHashTable，而是一个接一个地保存条目。加载时，逐一加载条目，并插入到新的哈希表中。但是我发现执行这个操作需要很多时间：

```
g_hash_table_insert(hash, (gpointer) (mer_v), (gpointer) m); 
```

加载 6000 万个条目大约需要 20 分钟。如果我只是加载条目而不执行插入，则只需 10 秒。

那么有没有其他方法可以有效地保存 GHashTable 呢？谢谢

=======================

更新：

我的哈希表键是 uint64_t。此代码运行大约 10 秒：

```
for (i = 0; i < 60000000; i++) {
    tmp = (uint64_t*) malloc (sizeof(uint64_t));
    *tmp = i;
    g_hash_table_insert(hash, (gpointer) (tmp), (gpointer) tmp);
} 
```

但是这段代码运行了 10 多分钟：

```
for (i = 0; i < meta->n_kmers; i++) {
    m = g_ptr_array_index(kmer_list, i);
    tmp = (uint64_t*) malloc (sizeof(uint64_t));
    *tmp = m->s;
    g_hash_table_insert(hash, (gpointer) (tmp), (gpointer) tmp);
} 
```

我的大部分输入键`m->s`都有约 60 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:16:02.817

GHashTable 没有针对该数据集的大小进行优化。您最好编写自己的哈希表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:41:59.153

您可能应该查看当前对 GIO 和 dconf 私有的 gvdb 代码。gvdb 是一个为通过 mmap() 读取而优化的哈希表：

[https://git.gnome.org/browse/glib/tree/gio/gvdb/](https://git.gnome.org/browse/glib/tree/gio/gvdb/)

它使用 GVariant 以内存高效的二进制表示形式存储数据。该代码在 LGPL v2.1+ 下，因此只能在具有兼容许可证的项目中剪切和粘贴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:03:20.957

我同意 ebassi（以及 iain 和 unwind）的观点，即 GHashTable 可能不适合您的用例。

[SQLite](http://sqlite.org/)应该可以正常工作，但也有许多非常快速的嵌入式键值存储可用。[dbm 的维基百科页面](https://en.wikipedia.org/wiki/Dbm)列出了很多。如果我是你，我可能会使用[Tokyo Cabinet](http://fallabs.com/tokyocabinet/)，[LevelDB](https://code.google.com/p/leveldb/)，或者（如果你的项目是 GPL 兼容的），[Kyoto Cabinet](http://fallabs.com/kyotocabinet/)。

此外，您可能应该考虑使用[切片分配器](https://developer.gnome.org/glib/stable/glib-Memory-Slices.html)而不是 malloc 。你仍然会有很长的加载和保存（通过使用嵌入式数据库来消除），但它应该比 malloc 快很多。或者，如果您可以使用 32 位密钥而不是 64 位密钥，则可以只使用[GINT_TO_POINTER](https://developer.gnome.org/glib/stable/glib-Type-Conversion-Macros.html#GINT-TO-POINTER%3aCAPS)并加快速度。

# php - mysql的结果限制？

> ID：15661216
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:47.973
> 
> 标签：php, mysql, limit

我有一张大约有 1000 条记录的表。

我有个请求 ：

```
$select = "SELECT * FROM ophlm_ancien.patrimoine";
$result = mysql_query($select);
while($p = mysql_fetch_array($result)){
    //some actions
} 
```

如果运行我的脚本，我在 firefox 上有这个错误：`The connection was reset`

我添加了一个 LIMIT 500，它可以工作。也限制600。但是在我总是有这个错误之后。

你有什么想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:22:44.850

Increase your [`max_allowed_packet`](http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html) on the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:27:12.210

根据[文档](https://dev.mysql.com/doc/refman/5.1/en/select.html#id1026131)，您可以将 LIMIT 与偏移量结合起来：

```
[LIMIT {[offset,] row_count | row_count OFFSET offset}] 
```

这使您可以缓冲结果：

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。

您需要做的就是在循环中执行选择并匹配每一轮中的偏移量，直到获得所有结果。

# php - MYSQL 在加载时显示结果

> ID：15661222
> 
> 赞同：0
> 
> 时间：2013-03-27T14:19:52.967
> 
> 标签：php, mysql

我有一个包含 12000 种产品的数据库。我有一个查询会在一个页面上显示大约 3000 个产品，并且需要一段时间才能显示。然而，数据会在整个查询或循环完成后显示。无论如何，在它们被拉出时显示每个结果吗？以下是我的代码..

```
$result = mysql_query("SELECT title, model, description FROM products WHERE price > 500");
while($row = mysql_fetch_array($result)):
...
endwhile; 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:22:25.740

It's called lazy loading from db.

Take a look a this [article](http://www.dotnetcurry.com/ShowArticle.aspx?ID=390) or to this [tutorial](http://infinite-scroll.com/)

If I have to make a synthesis, basically you `LIMIT` your query to a certain quantity of record that have to be pulled out of db. Once some condition is reached (pagination change, scroll down, and so on) you fire an ajax call that will retrieve other records and so on.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:25:02.630

mysql 扩展已被弃用，最好切换到 mysqli 或 pdo。但由于不管 api/module 是什么，这都是同一个问题，所以我们现在还是坚持使用 mysql_* ......
当`mysql_query(...)`被调用时，该函数仅在完整的结果集从 MySQL 服务器传输到 php 进程的内存后才返回。
改用`mysql_unbuffered_query(...)`：

```
<?php
$result = mysql_unbuffered_query("SELECT title, model, description FROM products WHERE price > 500");
while($row = mysql_fetch_array($result)):
...
  // output
  // maybe flush() or ob_flush() here...
endwhile; 
```

有区别解释在

*   [https://dev.mysql.com/doc/refman/5.0/en/mysql-use-result.html](https://dev.mysql.com/doc/refman/5.0/en/mysql-use-result.html)
*   和[https://dev.mysql.com/doc/refman/5.0/en/mysql-store-result.html](https://dev.mysql.com/doc/refman/5.0/en/mysql-store-result.html)

您还必须牢记潜在的输出缓冲区：http: [//docs.php.net/flush](http://docs.php.net/flush)和[http://docs.php.net/ob_flush](http://docs.php.net/ob_flush)

对于 html 客户端/浏览器，您必须将部分数据放入可以在所有数据发送之前呈现的结构中。因此，例如，一个不固定的表很可能是次优的。参见例如[https://en.wikipedia.org/wiki/Incremental_rendering](https://en.wikipedia.org/wiki/Incremental_rendering)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:28:28.153

要达到这样的效果有很多变数。

首先，php 设置应该允许您使用输出缓冲（看看 output_buffering 参数，也许还有implicit_flush）。之后，您可能应该使用 flush() 和/或 ob_flush()

您应该考虑的另一件事是浏览器本身并不总是允许您使用输出缓冲，这是已知的“问题”。

对于查询本身，您可能想尝试使用 mysql_unbuffered_query（或更好的 MySQLi/PDO 等效项）。

综上所述，在我看来，达到这种效果的最好方法是使用 ajax 数据轮询。

# java - Java SWT Link 小部件 - 如何删除超链接下划线？

> ID：15661228
> 
> 赞同：3
> 
> 时间：2013-03-27T14:20:10.137
> 
> 标签：java, swt, hyperlink, underline

我知道我们可以使用：

```
setText("<a> href="url"> Link </a>"); 
```

建立一个链接。但它的输出带有下划线。

我想要一个没有下划线的链接，所以我尝试了

```
setText(<a> href="url" style="text-decoration: none" Link </a>); 
```

但它仍然不起作用。任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:14:33.470

好吧，你不能删除下划线。它是在 TextLayout 类的帮助下在内部绘制的，无法影响行为。顺便说一句，文本小部件的 HTML 代码仅在内部用于解析。实际上没有对 Link 小部件的 HTML 支持。这就是样式属性不起作用的原因。但是，您可以使用 StyledText 小部件进行更高级的文本布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:27:00.850

只是为了添加 Tobias Willig 的答案，如果您正在使用 JFace 和 Forms，那么您可以使用`org.eclipse.ui.forms.widgets.Hyperlink`它的`setUnderlined()`. 你可以在这里看到一个工作示例：[自定义组件](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/CustomComponents.htm)

# python - Python中的正则表达式 - 奇怪的行为

> ID：15661231
> 
> 赞同：2
> 
> 时间：2013-03-27T14:20:18.000
> 
> 标签：python, regex

我想解析`uptime`Unix 命令的输出。这是两个不同的样本：

```
14:25  up 1 day,  1:24, 2 users, load averages: 0,56 0,48 0,47
14:25  up 1:24, 2 users, load averages: 0,56 0,48 0,47 
```

（我使用的语言是 Python）

所以，假设上面的两个样本被保存到变量`s1`和`s2`.

这是我写的代码：

```
>>> RE = r'''
    ((\d) \s day)?        # this should match "n day" if it's there 
    .*?                   # this should match everything until the next regex
    \s(\d{1,2}):(\d{1,2}) # this should match a space followed by "hh:mm"
'''

>>> print re.match(RE, s1, re.VERBOSE).groups()
(None, None, '1', '24')
>>> print re.match(RE, s2, re.VERBOSE).groups()
(None, None, '1', '24') 
```

正则表达式的第二部分，即抓住正常运行时间的几小时-分钟的部分，完美运行。但是为什么元组的第一部分总是`None`？我错过了什么？这是一个*贪婪*与*非贪婪的*问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:24:23.383

您想将 移动`.*?` *到*可选的日期组并使用`.search()`：

```
RE = r'''
    (?:(\d) \s day.*?)?   # this should match "n day" if it's there
    \s(\d{1,2}):(\d{1,2}) # this should match a space followed by "hh:mm"
''' 
```

演示：

```
>>> RE = r'''
...     (?:(\d) \s day.*?)?        # this should match "n day" if it's there
...     \s(\d{1,2}):(\d{1,2}) # this should match a space followed by "hh:mm"
... '''
>>> print re.search(RE, s1, re.VERBOSE).groups()
('1', '1', '24')
>>> print re.search(RE, s2, re.VERBOSE).groups()
(None, '1', '24') 
```

模式锚定在 上`:`，然后回溯。然后`.*?`匹配拍号之前的整个文本，满足模式。

通过将`.*?`部分移动*到*可选`day`组中（在我的版本中不捕获），您可以保证它不会回溯到`day`文字文本之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:33:58.250

而不是从命令行读取另一种方法是直接从`/proc/uptime`

```
#!/usr/bin/python

from datetime import timedelta

with open('/proc/uptime', 'r') as f:
    uptime_seconds = float(f.readline().split()[0])
    uptime_string = str(timedelta(seconds = uptime_seconds))

print(uptime_string) 
```

输出：

```
35 days, 23:06:35.530000 
```

现在使用标记化或拆分内置函数更容易解析

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:30:30.050

匹配从字符串的开头开始，添加 .*? 一开始

```
In [37]: RE=r'.*?((\d) \s day) .*?  \s(\d{1,2}):(\d{1,2})'

In [38]: print re.match(RE, s1, re.VERBOSE).groups()
('1 day', '1', '1', '24') 
```

# delphi - 在 FireMonkey 中的球体上写入文本

> ID：15661241
> 
> 赞同：0
> 
> 时间：2013-03-27T14:20:51.877
> 
> 标签：delphi, text, 3d, firemonkey, geometry-surface

有没有办法在 FireMonkey 中的球体组件的表面上写入文本，而不是使用文本创建位图并将文本导入到`TextureMaterialSource`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:06:10.353

我不确定你会如何直接写到表面，因为我没有处理 Firemonkey 3D 方面的内部结构。但是，我可以用这样的解决方案半途而废。

一种可能的解决方案是使用`MakeScreenshot`函数（返回`TBitmap`结果）。例如，在您的表单中添加一个`TEdit`和一个`TLabel`（或`TText`）。使用实时绑定或良好的旧`label1.text := edit1.text`代码，您将能够使用您希望显示的文本设置屏幕截图源。

我假设你的表格上有一个`TSphere`和一个`TTextureMaterialSource`。在表单上添加一个`TButton`，并在 OnClick 事件中使用类似的东西；

```
var
  Bmp : TBitmap;
  mstream : TMemorystream;
begin
  mstream := TMemorystream.Create;
  bmp := Label1.MakeScreenshot;
  bmp.SaveToStream(mstream);
  tex.Texture.LoadFromStream(mstream);
  mstream.Free;
end; 
```

**注意：** `tex`是纹理对象。

我简要地写了下来，但无法让它工作（大概是因为在纹理加载后需要完成更多工作）。它应该让您对在哪里工作有一个基本的了解。

# c# - 使用 GZipStream 压缩位图

> ID：15661243
> 
> 赞同：2
> 
> 时间：2013-03-27T14:20:57.623
> 
> 标签：c#

我正在尝试压缩位图图像，但输出流始终为空。

有谁知道我做错了什么？

提前致谢！

```
public static byte[] CompressBitmap (Bitmap img)
    {
        using (MemoryStream outputStream = new MemoryStream ())
        {
            // Compress image
            using (GZipStream zipStream = new GZipStream (outputStream, CompressionMode.Compress))
            {
                // Convert image into memory stream and compress
                using (MemoryStream imgStream = new MemoryStream ())
                {
                    img.Save (imgStream, System.Drawing.Imaging.ImageFormat.Bmp);                                                        
                    imgStream.CopyTo (zipStream);
                    return outputStream.ToArray ();
                }
            }
        }
    } 
```

我改变了一点，似乎它的工作：

```
public static byte[] CompressBitmap (Bitmap img)
    {
        // Convertendo bitmap para memory stream
        using (MemoryStream inStream = new MemoryStream ())
        {
            // Para evitar memory leak
            using (img) 
            {
                img.Save(inStream, System.Drawing.Imaging.ImageFormat.Jpeg);
            }

            // Salva stream no array de byte
            byte[] buffer = new byte[inStream.Length];
            inStream.Read (buffer, 0, buffer.Length);

            // Comprime bitmap
            using (MemoryStream outStream = new MemoryStream())
            {
                using (GZipStream gzipStream = new GZipStream(outStream, CompressionMode.Compress))
                {
                    gzipStream.Write(buffer, 0, buffer.Length);
                    return outStream.ToArray();
                }
            }
        }            
    } 
```

但是现在，解压错了：

```
public static Bitmap DecompressBitmap (byte[] compressed)
    {
        try
        {
            using (MemoryStream inputStream = new MemoryStream (compressed))
            {
                using (GZipStream zipStream = new GZipStream (inputStream, CompressionMode.Decompress))
                {
                    // Decompress image and convert to bitmap
                    using (MemoryStream outputStream = new MemoryStream ())
                    {
                        zipStream.CopyTo (outputStream);
                        return (Bitmap)Bitmap.FromStream (zipStream);
                    }
                }
            }
        }
        catch (Exception ex)
        {

        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:56:13.543

我不知道您是否需要明确地将 BMP 转换为 JPEG。如果您只想压缩它、存储它并能够解压缩它，这将对您有所帮助。我在本地机器上用一个小屏幕截图进行了测试，它从 2.8MB 缩小到了 19KB，我可以使用这段代码并使用 7zip 打开它。

```
void Main()
{
    //set some test paths
    string originalfilepath = @"c:\temp\screenshot.bmp";
    string decompressedfilepath = @"c:\temp\screenshot.bmp.gz.bmp";
    string compressedfilepath = @"c:\temp\screenshot.bmp.gz";

    //read in the original file, this byte array could come from anywhere
    byte[] originalfilebytes = File.ReadAllBytes(originalfilepath);
    Console.WriteLine("original array size {0} bytes (as read from original file)",originalfilebytes.Length);

    //compress it
    byte[] compressedfilebytes = Compress(originalfilebytes);
    Console.WriteLine("compressed array size {0} bytes",compressedfilebytes.Length);

    //write it out so we can see it and test the compression with 7zip etc
    File.WriteAllBytes(compressedfilepath,compressedfilebytes);

    //write over our compressed bytes array by reading in the compressed file just to test
    compressedfilebytes = File.ReadAllBytes(compressedfilepath);
    Console.WriteLine("compressed array size {0} bytes (as read from compressed file)",compressedfilebytes.Length);

    //decompress the array
    byte[] decompressedfilebytes = Decompress(compressedfilebytes);
    Console.WriteLine("decompressed array size {0} bytes",decompressedfilebytes.Length);

    //write it to yet another file just to be sure decompress works
    File.WriteAllBytes(decompressedfilepath,decompressedfilebytes);
}
byte[] Compress(byte[] b)
{
using (MemoryStream ms = new MemoryStream())
{
    using (GZipStream z = new GZipStream(ms, CompressionMode.Compress, true))
        z.Write(b, 0, b.Length);
    return ms.ToArray();
}
}
byte[] Decompress(byte[] b)
{
    using (var ms = new MemoryStream())
    {
        using (var bs = new MemoryStream(b))
        using (var z = new GZipStream(bs, CompressionMode.Decompress))
            z.CopyTo(ms);
        return ms.ToArray();
    }
} 
```

# matlab - Reading text file using fscanf in octave / matlab into cell array

> ID：15661250
> 
> 赞同：1
> 
> 时间：2013-03-27T14:21:26.190
> 
> 标签：matlab, octave, textscan

I have a comma delimited single text file with strings and integers that I'm trying to import into a cell array. I then want to export it to several files based on the same Resonance Freq. and add text to the filename row

This is a sample of the text file to import: (please note the file will be much larger then this)

```
Resonance Freq,number,Filename,time,fs,Split-3675,Session Num
277.912902832031250,1,p000001,00:00:01,44100,3675,0
123.912902832031250,2,p000002,00:00:02,44100,3675,2
277.912902832031250,3,p000003,00:00:03,44100,3675,0
277.912902832031250,4,p000001,00:00:01,44100,3675,1
343.912902832031250,5,p000002,00:00:02,44100,3675,0
277.912902832031250,6,p000003,00:00:03,44100,3675,4 
```

And this is the exported text files I want created (text file1)

```
277.912902832031250,1,/tmp/p000001.wav,00:00:01,44100,3675,0
277.912902832031250,3,/tmp/p000003.wav,00:00:03,44100,3675,0
277.912902832031250,4,/tmp/p000001.wav,00:00:01,44100,3675,1 
```

And this is the exported text files I want created (text file2)

```
123.912902832031250,2,/tmp/p000002.wav,00:00:02,44100,3675,2 
```

And this is the exported text files I want created (text file3)

```
343.912902832031250,5,/tmp/p000002.wavadded ,00:00:02,44100,3675,0 
```

I'm having a problem with fscanf and using comma delimited data

```
fid = fopen('/tmp/freq_range_color_coded.txt');
m_s = fscanf(fid,'%f %f %s %s %f %f %f');
fclose(fid); 
```

when I access a cell like m_s(1,2) I get back a single letter instead of a field. How can I get it so when I type m_s(1,2) I get back the whole field example

> m_s(2,1) should give me 277.912902832031250

thanks

PS I'm using octave and textscan is not compatible with it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:36:51.027

使用 textscan 导入时尝试跳过标题行：

```
fid = fopen('/tmp/freq_range_color_coded.txt');
m_s = textscan(fid,'%f %f %s %s %f %f %f','delimiter', ',', 'HeaderLines', 1);
fclose(fid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T12:53:52.907

看起来 octave textscan 与 matlab 不完全兼容。Octave 3.4.0 中的 strread 和 textscan 与它们在 Matlab 2009b 中的实现不完全兼容（可能还有更高版本）。例如，在 Octave 3.4.0 中没有实现 N=-1 选项（重复读取格式直到字符串结束）。使用 N=a 正整数（读取格式 N 次）的值与在 Matlab 中的工作方式相同。我将不得不使用 fscanf 但它可以使用分隔符吗

# sql-server - Classic ASP cannot execute stored procedure

> ID：15661256
> 
> 赞同：0
> 
> 时间：2013-03-27T14:21:46.817
> 
> 标签：sql-server, asp-classic

I can execute the query in SQL Management Studio successfully. ASP code throws an error.

```
 Response.Write "<hr>" & sql & "<hr>"            
        conn3.Execute sql 
```

ASP Error:

> Microsoft OLE DB Provider for SQL Server hata '80040e07'
> 
> Error converting data type varchar to smalldatetime.

SQL query:

```
exec db.dbo.stored_proc1 @artID='6226', 
  @Odeme_Date='3-27-2013 15:47:24', @Odeme_Valor ='3-27-2013', 
  @OnceAnapara=0, @GecZamHemen= 1, @ODENEN_TUTAR = '263.69' , 
  @Odeme_Tip=3, @BankID=62, @MakbuzTanimID=45, @BilinmeyenID=NULL, 
  @CariAvansID=NULL, 
  @USERID=62, @MakbuzNO=NULL, @SelectedID='(817843)', 
  @Mesaj=NULL, @idleriGosterme=0, @CariCekID=NULL, 
  @CariSenetID=NULL 
```

I can copy & paste the query then execute it successfully. What's wrong with ASP?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T07:52:35.413

我使用了参数化查询并且它有效。

此链接有助于查找数据类型值：[http ://www.w3schools.com/ado/ado_datatypes.asp](http://www.w3schools.com/ado/ado_datatypes.asp)

PS：不要使用@Var_Date的查询字符串版本；即“MM-DD-YYYY”作为参数化输入。使用“YYYY-MM-DD”格式的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:55:00.893

错误来自提供者，所以它确实看到了数据类型不匹配。它可能在 SQL Server Management Studio 中运行，但在提供程序中仍然失败。我会再次查看日期文字并尝试更改日期格式，看看你是否可以让它工作。

如果提供者根本不传递 varchar，那么您可能必须重新连接存储过程以接受 varchar 参数，并将它们转换为过程中的日期类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:46:23.193

I suspect it has something to do with your server settings regarding date formats (from your parameter names, looks like you are probably not using USA date formatting). Try checking your "dateformat" on the target database:

```
use db
go

DBCC USEROPTIONS 
```

Regardless, you should *always* format date strings in one of the "unambiguous" formats: YYYYMMDD or YYYY-MM-DD. So I would change the date parameter string values:

```
@Odeme_Date='2013-03-27 15:47:24', @Odeme_Valor ='2013-03-27' 
```

# java - Retrieve the result page with htmlunit

> ID：15661259
> 
> 赞同：0
> 
> 时间：2013-03-27T14:22:03.147
> 
> 标签：java, web-crawler, htmlunit

I am trying to simulate a search site travel ticket with HtmlUnit. The goal is to have the page Result of the search. My code returns the search page(waiting for the result ...)

Here is the code:

```
public class TestHtmlUnit {

public static void main(String[] args) throws Exception {

    // Create and initialize WebClient object
    WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
    webClient.setThrowExceptionOnScriptError(false);
    webClient.setRefreshHandler(new RefreshHandler() {
        public void handleRefresh(Page page, URL url, int arg) throws IOException {
            System.out.println("handleRefresh");
        }

    });

    // visit Yahoo Mail login page and get the Form object
    HtmlPage page = (HtmlPage) webClient.getPage("http://www.voyages-sncf.com/");
    HtmlForm form = page.getFormByName("TrainTypeForm");

    // Enter login and passwd of 
    form.getInputByName("origin_city").setValueAttribute("paris");
    form.getInputByName("destination_city").setValueAttribute("marseille");
    form.getInputByName("outward_date").setValueAttribute("28/03/2013");

    // Click "Sign In" button/link
    page = (HtmlPage) form.getInputByValue("Rechercher").click();

    // Print the newMessageCount to screen
    //System.out.println("newMessageCount = " + newMessageCount);

   // System.out.println(page.asHTML());                    
    System.out.println(page.asText());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T23:28:23.557

您应该在点击后等待页面加载

尝试这个

```
webClient.waitForBackgroundJavaScript(1000); 
```

**或者**

```
 webClient.setAjaxController(new NicelyResynchronizingAjaxController());
            webClient.setAjaxController(new AjaxController(){
                @Override
                public boolean processSynchron(HtmlPage page, WebRequest request, boolean async)
               {
                    return true;
                }
            }); 
```

**或者**

```
JavaScriptJobManager manager = page.getEnclosingWindow().getJobManager();
            while (manager.getJobCount() > 0) {
                Thread.sleep(100);
            } 
```

# java - When will I ever need to use @WebServiceRef?

> ID：15661262
> 
> 赞同：18
> 
> 时间：2013-03-27T14:22:14.350
> 
> 标签：java, jax-ws

From the client side, if I want to access a web service, I would simply generate a proxy for it using `wsimport`. That is my web service reference.

Where then does the annotation [@WebServiceRef](http://docs.oracle.com/javaee/6/api/javax/xml/ws/WebServiceRef.html) come into play? Is it meant to be used at the server side only, to obtain injected references to web services hosted in the same environment?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T17:41:15.107

不一定，但它确实取决于服务器实现。例如，要访问远程服务，它需要能够访问生成的客户端以及可选的 WSDL 文档和方案文件（按照惯例应该在 中`WEB-INF/wsdl`），这样

```
public class HelloServlet extends HttpServlet {

    @WebServiceRef(HelloMessengerService.class) // class with @WebServiceClient
    private HelloMessenger port; // the SEI

    ...
} 
```

该类`HelloMessengerService`是存根并具有具有属性的`@WebServiceClient`注释 `wsdlLocation`（指向本地或远程 WSDL 文档）。

但你可以有类似的东西

```
@WebServiceRef(wsdlLocation = "META-INF/wsdl/AnyService/Any.wsdl")
private HelloMessengerService service; 
```

或者

```
@WebServiceRef
public HelloMessengerService service; 
```

如果您使用处理程序链来更改传入和传出的 SOAP 消息：

```
@WebServiceRef(HelloMessengerService.class)
@HandlerChain(file="handler-chain.xml")
private HelloMessenger port; 
```

注释的使用`@WebServiceRef`必须应用于 JAX-WS 管理的客户端，如 Servlet、EJB 或其他 Web 服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T03:10:07.497

只是为了补充 Paul Vargas 的回答，`@WebServiceRef`注释是一个工具，用于完成 Java EE 平台向完全托管环境的演变。这样想：

Almost every component within the Java EE stack is injectable by some means, EJBs, JSF managed beans, CDI beans, `@Resources` etc. Why not be able to inject a webservice reference? With the ability to inject a webservice reference using this annotation, the following are ready injection targets:

*   EJBs
*   Servlets (under Servlet 3.0)
*   JSF Managed Beans
*   CDI Beans
*   MDBs

# c++ - How to properly print a double to cout in C++

> ID：15661264
> 
> 赞同：2
> 
> 时间：2013-03-27T14:22:30.083
> 
> 标签：c++, printing, double, cout

I've had a look at some questions before posting this and couldn't find what I was looking for, so if it's a duplicate I'm sorry.

I have this code:

```
cout << "The balance at year " << i << " will be " << char(156) << std::setprecision(2)
     << balance << endl; 
```

To my knowledge this should print to the console something like:

```
£2.00
£100.46 
```

*fyi Above are just examples I know there's nothing to suggest those numbers, but the format should look like that, right?

But here's my output:

```
£1e+002
£1.1e+002 
```

Why is it doing this?

It was my understanding that using `setprecision` would show 2 decimal places and nothing more.

Oh and also noticed hardly any questions about printing doubles that said use `setprecision` actually state that this needs including:

```
#include <iomanip> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:24:30.633

`setprecision`设置精度，位数。

`fixed`设置固定格式。

我打赌那会解决的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:25:00.327

用于`std::fixed`设置固定格式，而不是科学计数法。

`cout << "The balance at year " << i << " will be " << char(156) << std::setprecision(2) << std::fixed << balance << endl;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T14:27:42.447

像这样做：

```
cout << "The balance at year " << i << " will be " << char(156) << std::setprecision(2) << std::fixed << balance << endl; 
```

# c# - Quartz.NET - Using/understanding cron based trigger and time zone/summertime (daylight saving time)

> ID：15661268
> 
> 赞同：3
> 
> 时间：2013-03-27T14:22:38.650
> 
> 标签：c#, timezone, quartz-scheduler, quartz.net

For sake of an example lets use the following cron expression: "0 0 14 1 * ?"
-> Fire on the 1st day of every month at 14:00 hours.

I used the Quartz CronScheduleBuilder to build the expession, but this is irrelevant.

My Local timezone is UTC+01:00 and the summertime (this year) begins on 31.03.2013 2:00, where the time is adjusted to 3:00.

When i schedule a new Job using the proposed trigger on lets say 20.02.2013, Quartz calculates the System.DateTimeOffset for the "NextFireTimeUtc" correctly to:
DateTime: 01.03.2013 13:00:00 (this is the UTC time, which is one hour behind the local timezone)
LocalDateTime: 01.03.2013 14:00:00

The job will correctly trigger on 14:00 hours as specified.

Now if i schedule the job on 20.03.2013, the "NextFireTimeUtc" results in:
DateTime: 01.04.2013 13:00:00 (this is the UTC time, which is now two hours behind the local timezone)
LocalDateTime: 01.04.2013 **15:00:00**

Notice, that the resulting NextFireTimeUtc now falls within the local summertime. As a result, the LocalDateTime was also "corrected" by an additional hour from the UTC. This results in the job running at 15:00 hours, which is not what i want.

What i (obviously) expected is that the "14" in the cron expression should always result in the trigger firing at 14:00, even during summertime.

There must be an easy way to deal with this phenomenon, i am probably just missing something conceptional. I am confused.

**EDIT:**
The problem seems to be, that Quartz calculates the **first** NextFireTimeUtc depending on the **current** timezone information. To test this, i scheduled two different cron triggers and called GetFireTimeAfter() on the trigger with an increasing offset to view the resulting fire times over the year.

Trigger 1: Fire on the 28th of every month at 14:00

> GetFireTimeAfter now + 00 months: 28.03.2013 **13:00:00 +00:00** <- this is correct
> GetFireTimeAfter now + 01 months: 28.04.2013 12:00:00 +00:00
> GetFireTimeAfter now + 02 months: 28.05.2013 12:00:00 +00:00
> GetFireTimeAfter now + 03 months: 28.06.2013 12:00:00 +00:00
> GetFireTimeAfter now + 04 months: 28.07.2013 12:00:00 +00:00
> GetFireTimeAfter now + 05 months: 28.08.2013 12:00:00 +00:00
> GetFireTimeAfter now + 06 months: 28.09.2013 12:00:00 +00:00
> GetFireTimeAfter now + 07 months: 28.10.2013 13:00:00 +00:00 <- summertime already ended
> GetFireTimeAfter now + 08 months: 28.11.2013 13:00:00 +00:00

The first fire time is correct, since it still falls into "wintertime". The times during "summertime" are off by an additional -1, resulting in the correct fire time after the local timezone adds +2.

Trigger 1: Fire on the first day of every month at 14:00

> GetFireTimeAfter now + 00 months: 01.04.2013 **13:00:00 +00:00** <- this is wrong?
> GetFireTimeAfter now + 01 months: 01.05.2013 12:00:00 +00:00
> GetFireTimeAfter now + 02 months: 01.06.2013 12:00:00 +00:00
> GetFireTimeAfter now + 03 months: 01.07.2013 12:00:00 +00:00
> GetFireTimeAfter now + 04 months: 01.08.2013 12:00:00 +00:00
> GetFireTimeAfter now + 05 months: 01.09.2013 12:00:00 +00:00
> GetFireTimeAfter now + 06 months: 01.10.2013 12:00:00 +00:00
> GetFireTimeAfter now + 07 months: 01.11.2013 13:00:00 +00:00 <- summertime already ended
> GetFireTimeAfter now + 08 months: 01.12.2013 13:00:00 +00:00

The first fire already falls within summertime, but its only offset by -1, resulting in a local trigger time of 15:00\.

So the trigger is fine, except for the first trigger time, if its scheduled during wintertime and the first execution falls within summertime. How to handle this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T18:24:51.230

我发现这实际上是 Quartz.NET 2.0.1 中的一个错误，但它已经在 2.1.0 中修复。

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/15689395/1790864)。

# javascript - html5 canvas strokeStyle?

> ID：15661270
> 
> 赞同：25
> 
> 时间：2013-03-27T14:22:40.507
> 
> 标签：javascript, html, canvas, 2d

I am trying to map an image to a "3d" grid that simulates cloth using strokeStyle and canvas, i have the image included but it is currently acting as a background image and not actually flowing with the "cloth" as is ripples, I.E the image is static as the grid flows. here's the [jsfiddle](http://jsfiddle.net/S7nBq/) which is self explanatory ( only works in Chrome). any help is much appreciated. here is the javascript that renders the image into the background, How do i stop from rendering as a background image and only make it fill the grid?:

```
function update() {

    var img = new Image();
    img.src = 'http://free-textures.got3d.com/architectural/free-stone-wall-   textures/images/free-stone-wall-texture-002.jpg';
    img.onload = function() {

        // create pattern
        var ptrn = ctx.createPattern(img, 'repeat');

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        physics.update();

        ctx.strokeStyle = ptrn;
        ctx.beginPath();
        var i = points.length;
        while (i--) points[i].draw();
        ctx.stroke();

        requestAnimFrame(update);
    }
} 
```

Hers's the original [codepen](http://codepen.io/stuffit/pen/KrAwx) I'm working from. `updated [fiddle](http://jsfiddle.net/S7nBq/) with image outside function update(): It currently seems to actually fill the cells as well as applying it as a background image. is there any way to stop it becoming a background image and only apply it to fill the grid? I've tried this:
ctx.fillStyle = ptrn; and removing line 260:
ctx.strokeStyle = ptrn; but it seems to remove the background image just displaying it as a black grid... thank you again for the patience

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-17T04:34:52.450

# javascript - Detect row data change in html (form) table (JavaScript / Jquery)

> ID：15661271
> 
> 赞同：3
> 
> 时间：2013-03-27T14:22:44.163
> 
> 标签：javascript, jquery

Hi I am a reader and getting a lot of help here. This is my first post. I know this could be a similar question, but I still could not find answer for it. Can someone please help me to write a JavaScript / jquery code: if a user modifies any of these fields, then the dbFlag value will set to "U" (init. as “N”). I am struggling to produce the correct code. Note: the data rows are populated from DB, so it could be 1 row, or N rows. Highly appreciate your time and efforts.

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <form name="form1" id="form1" action="saveData" method="POST">
            <table id="dataTable" border="1">
                <tbody>
                    <tr>
                        <th>Badge #</th>
                        <th>turn #</th>
                        <th>Comment</th>
                    </tr>   
                    <tr>
                        <td><input type="text" size="7" name="badge" id="badge" value="000000" /></td>
                        <td>
                            <select name="descMpoint" id="descMpoint2">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>                    
                        </td>
                        <td><textarea name="comment" cols="50" rows="2">txt area</textarea></td>             
                        <td><input type="hidden" name="dbFlag" id="dbFlag" value="N" />     
                    </tr>
                </tbody>
            </table>
            <br>
            <span class="tab"><input type="submit" name="updateData" value="Submit" id="updateData"/></span>
            <br><hr>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T14:35:45.163

使用`change`事件：

```
$('#form1').on('change', 'input, select, textarea', function(){
    $(this).closest('tr').find('input[name="dbFlag"]').val('U');
}); 
```

[jsFiddle](http://jsfiddle.net/ng5cZ/) & [.change()](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:37:05.167

在 jQuery 中，使用[更改](http://api.jquery.com/change/)事件函数。请注意，当相关字段未聚焦/模糊时，该函数会触发。

例子：

```
$("#badge").change(function(){
    var currentElement = $(this); //reference to the element that was changed
    //etc. etc.
}); 
```

JSFiddle：http: [//jsfiddle.net/kfdNs/](http://jsfiddle.net/kfdNs/)

# android - How to implement the below scenario to show the POPUP dialog based on Time and also append to Listview

> ID：15661273
> 
> 赞同：1
> 
> 时间：2013-03-27T14:22:50.837
> 
> 标签：android, listview, android-listview, android-dialog

![enter image description here](../Images/4336ef90b6ffa7d45d165f7e391b3d84.png)

Here is my code i implemented to show the popup dialog

```
 public class ExPopup extends Activity {

Dialog myDialog;
Button myButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    AlertDialog.Builder helpBuilder = new AlertDialog.Builder(ExPopup.this);
    helpBuilder.setTitle("Pop Up");
    helpBuilder.setMessage("This is a Simple Pop Up 1");
    helpBuilder.setPositiveButton("Accept",
            new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // Do nothing but close the dialog
        }
    });

    helpBuilder.setNegativeButton("Decline", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });
    // Remember, create doesn't show the dialog
    final AlertDialog helpDialog = helpBuilder.create();
    WindowManager.LayoutParams wmlp = helpDialog.getWindow().getAttributes();
     wmlp.gravity = Gravity.TOP | Gravity.LEFT;
     wmlp.x = 70;   //x position
     wmlp.y = 70; 
    helpDialog.show();
    final Handler handler = new Handler();
    Timer tshow = new Timer();
    tshow.scheduleAtFixedRate(
            new TimerTask()
            {
                @Override
                public void run() {
                    handler.post(new Runnable() {
                        public void run() {
                            helpDialog.show();
                        }
                    });
                }
            },0,10000);
    final Handler handler1 = new Handler();
    Timer thide = new Timer();
    thide.scheduleAtFixedRate(
            new TimerTask()
            {
                @Override
                public void run() {
                    handler1.post(new Runnable() {
                        public void run() {
                            helpDialog.dismiss();
                        }
                    });
                }
            },0,20000);
    AlertDialog.Builder infoBuilder = new AlertDialog.Builder(ExPopup.this);
    infoBuilder.setTitle("Pop Up");
    infoBuilder.setMessage("This is a Simple Pop Up 2");
    infoBuilder.setPositiveButton("Accept",
            new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // Do nothing but close the dialog
        }
    });

    infoBuilder.setNegativeButton("Decline", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Do nothing
        }
    });

    // Remember, create doesn't show the dialog
    final AlertDialog infoDialog = infoBuilder.create();
    WindowManager.LayoutParams wmlp1 = helpDialog.getWindow().getAttributes();
     wmlp1.gravity = Gravity.TOP | Gravity.LEFT;
     wmlp1.x = -75;   //x position
     wmlp1.y = -25; 
    helpDialog.show();
    infoDialog.show();
    final Handler handler11 = new Handler();
    Timer tshow1 = new Timer();
    tshow1.scheduleAtFixedRate(
            new TimerTask()
            {
                @Override
                public void run() {
                    handler11.post(new Runnable() {
                        public void run() {
                            infoDialog.show();
                        }
                    });
                }
            },0,10000);
    final Handler handler12 = new Handler();
    Timer thide1 = new Timer();
    thide1.scheduleAtFixedRate(
            new TimerTask()
            {
                @Override
                public void run() {
                    handler12.post(new Runnable() {
                        public void run() {
                            infoDialog.dismiss();
                        }
                    });
                }
            },0,20000);
            }

             } 
```

Here from above iam adding a popup based on time i mean for every 10 sec new popup is added and the old popup will come down so up on 2 to 3 added and old popups must be disappeared from the list ....So please help me in this scenario Thank you for your help .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T20:48:59.083

你走在正确的轨道上：

1.  绘制线性或相对的四个布局。
2.  将背景设置为透明
3.  使 popup2 到 popup4 不可见。
4.  每 10 分钟调用一次线程，并将相对布局的线性设置为可见。
5.  使用样式显示弹出动画。
6.  运行，您将在每 10 秒后弹出一个

# c++ - 使用 openCV 在 QT 中进行图像处理

> ID：15661277
> 
> 赞同：0
> 
> 时间：2013-03-27T14:22:53.883
> 
> 标签：c++, qt, opencv, image-processing

我在 QT 中使用 opencv2.3.1 来检测圆圈。

我的 Open CV 目录是 D:\OpenCV

这是我的代码：

项目文件：

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = ImgProcessing
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h \

FORMS    += mainwindow.ui

INCLUDEPATH +=D:\\opencv\\build\\include

LIBS += -LD:\\opencv\\build\\x86\\vc10\\lib \
    -lopencv_calib3d231d \
    -lopencv_contrib231d \
    -lopencv_core231d \
    -lopencv_features2d231d \
    -lopencv_flann231d \
    -lopencv_gpu231d \
    -lopencv_haartraining_engined \
    -lopencv_highgui231d \
    -lopencv_imgproc231d \
    -lopencv_legacy231d \
    -lopencv_ml231d \
    -lopencv_objdetect231d \
    -lopencv_ts231d \
    -lopencv_video231d 
```

在主窗口中，我将 QPushButton 放在 Click 事件上，我尝试进行图像处理

```
void MainWindow::on_pushButton_clicked()
{
    cv::Mat matOrg=cv::imread("D:\\temp\\Test_mar26-5-1.bmp");
    cv::Mat matProcessed;

    std::vector<cv::Vec3f> vecCircles;
    std::vector<cv::Vec3f>::iterator itrCircles;

    cv::inRange(matOrg,cv::Scalar(0,0,175),cv::Scalar(100,100,256),matProcessed);
    cv::GaussianBlur(matProcessed,matProcessed,cv::Size(9,9),1.5);
    cv::HoughCircles(matProcessed,vecCircles,CV_HOUGH_GRADIENT,2,matProcessed.rows/4,100,50,10,400);

    for(itrCircles =vecCircles.begin();itrCircles !=vecCircles.end();itrCircles++)
    {
        ui->plainTextEdit->appendPlainText(QString("X: ")+ QString::number((*itrCircles)[0]));
        ui->plainTextEdit->appendPlainText(QString("Y: ")+ QString::number((*itrCircles)[1]));
        ui->plainTextEdit->appendPlainText(QString("Radius: ")+ QString::number((*itrCircles)[2]));
    }
} 
```

项目建设没有任何问题。但问题是当我尝试运行程序时出现以下错误

> 开始
> 
> D:\ImgProcessing-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK\debug\ImgProcessing.exe...
> 
> 程序意外结束。
> 
> D:\ImgProcessing-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK\debug\ImgProcessing.exe 退出，代码为 -1073741515

我不明白为什么它没有运行？如果尝试评论它正在运行的整个块。（没有图像处理代码）。当我启用 cv::mat 变量时，我得到了运行时错误。

请帮我解决这个问题。我正在尝试处理的图像如下 ![在此处输入图像描述](../Images/cf5b33ff062e52777eb8ea1a58f392cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:20:23.277

代码对我来说很好，完全没有错误。但`vecCircles.size()`这里显示为零。请在调试模式下构建并找到断点（按住 F10）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:27:51.677

仅评论该块：

```
for(itrCircles =vecCircles.begin();itrCircles !=vecCircles.end();itrCircles++)
{
    ui->plainTextEdit->appendPlainText(QString("X: ")+ QString::number((*itrCircles)[0]));
    ui->plainTextEdit->appendPlainText(QString("Y: ")+ QString::number((*itrCircles)[1]));
    ui->plainTextEdit->appendPlainText(QString("Radius: ")+ QString::number((*itrCircles)[2]));
} 
```

vecCircles 可能有问题。但作为一种有效的方法，您应该逐步调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T13:51:03.630

您可以尝试根据您添加的 .lib 文件来打开 OpenCV .dll 文件，例如将*opencv_world320.dll*放入您的 .exe 文件的同一目录中。

请注意，.dll 文件在调试模式和发布模式上有所不同，例如*opencv_world320.dll*用于发布模式，而*opencv_world320 **d** .dll*用于调试模式。

.dll 文件可以在 opencv/build/bin 目录下找到。

# ios - 在 iOS 的 GameKit 中获得每周排行榜的排名

> ID：15661284
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:23:25.433
> 
> 标签：ios, gamekit, leaderboard

我想给在排行榜上的玩家一个反馈。

我这样做是为了每日排行榜：

```
GKScore* gkScore = [self createScoreForeCategory:kLeaderboardCategoryCumulativePoints];

if (!self.gameCenterFeaturesEnabled || !self.achievements){

    return;
}

if(gkScore.rank == 1) {
   ... do my stuff
} 
```

iOS GameKit 的每周排行榜可以获取玩家的排名吗？

某种：

```
if(gkScore.weeklyRank == 1) {
       ... do my stuff
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:38:46.510

我无法对此进行测试，但您也许可以使用 GKLeaderboard 获得您想要的结果...

加载排行榜后：

```
yourLeaderBoard.timeScope = GKLeaderboardTimeScopeWeek;
yourLeaderBoard leadScoresWithCompletionHandler:^(NSArray *scores, NSError *error){

}];
GKScore* gkScore = yourLeaderBoard.localPlayerScore;

(gkScore.rank == 1){
    //Do what you want to do
} 
```

[http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKLleaderboard_Ref/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKLeaderboard_Ref/Reference/Reference.html)

# bash - 无法获取文件夹的路径以在 linux 中工作

> ID：15661285
> 
> 赞同：1
> 
> 时间：2013-03-27T14:23:25.857
> 
> 标签：bash, ubuntu, path, amazon-web-services

我目前无法找到新的工作途径；

说明告诉我：

要将 eb 文件添加到您的路径： Linux/Mac OS X (Bash shell)：export PATH=$PATH：

该文件夹位于：

```
/home/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb 
```

使用这些指南：

[ubuntu 指南](https://askubuntu.com/questions/60218/how-to-add-a-directory-to-my-path)和[瘾君子](http://blog.jseibert.com/post/491585200/setting-your-path-on-ubuntu-everywhere)

我将此添加到我的 .bashrc 文件中：

```
export PATH="$PATH:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3:$PATH" 
```

然后我跑了：

```
play@ubuntu:~$ source .bashrc
play@ubuntu:~$ eb status
eb: command not found 
```

你们能告诉我我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:34:24.037

有几件事可能是您的问题的根源：

1.  您说 EB CLI 包的路径是`/home/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb`，但您`$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb`在示例中使用的是。根据您的提示，我猜您的用户名是`play`，所以最可能的值`$HOME`是`/home/play`。这意味着您正在使用`/home/play/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb`. 使用其中任何一种，但不要混合使用：

    ```
    /home/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb
    $HOME/AWS-ElasticBeanstalk-CLI-2.3.1/eb 
    ```

2.  您的 中有重复的成员`PATH`，因为您的导出语句包含`$PATH`两次。它应该看起来像这样：

    ```
    export PATH="$PATH:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3" 
    ```

此建议基于[此入门页面](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-reference-get-started.html)。

最后，你的这种变化`.bashrc`只会影响未来的 shell。要将其应用于您当前的 shell，请运行`source ~/.bashrc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:33:05.510

我想添加评论，但它需要一个完整的答案。

替换这个：

```
 export PATH="$PATH:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3:$PATH" 
```

经过：

```
 export PATH="$PATH:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3" 
```

还有一点，可能在/home/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3这个路径下有abin目录，所以检查一下并添加以下内容：

```
 export PATH="$PATH:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3:$HOME/play/AWS-ElasticBeanstalk-CLI-2.3.1/eb/linux/python3/bin" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:33:40.097

`$HOME`将成为您的主目录，例如`/home/yepUknow`. `PATH`将您的导出更改为

```
export PATH="/home/play/AWS-ElasticBeanstalk-CLI-2.3.1/:$PATH" 
```

（按照 Jonathan Leffler 的建议，删除 的主要副本`$PATH`）。我已经稍微调整了目录，但我可能已经取消了太多。确保您在冒号前添加的目录实际上包含`eb`您尝试调用的程序/脚本。

# c# - 从 SelectionChangedEventArgs e Windows Phone 8 获取对象

> ID：15661287
> 
> 赞同：6
> 
> 时间：2013-03-27T14:23:33.003
> 
> 标签：c#, object, windows-phone-8, selectionchanged

我正在使用 Telerik Slide View 控件，它支持`SelectionChanged`事件

```
private void radSlideView_SelectionChanged(object sender, SelectionChangedEventArgs e)
{        
    var addedItems = e.AddedItems;
} 
```

`e`包含`MainViewModel`包含该属性的对象`FileName`。我如何“提取”`FileName`财产`e`？`addedItems`是一种`System.Collection.IList`类型

![在此处输入图像描述](../Images/6a2d1f8453dca74125925b0f0d57a388.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T14:25:32.680

你需要投：

```
if(e.AddedItems.Length > 0)       // make sure there is at least one item..
{
   MainViewModel firstItem = e.AddedItems[0] as MainViewModel;    // cast..
   if(firstItem != null)                                          // if not null..
   {
       string fileName = firstItem.FileName;                      // get the file name
   }
} 
```

# recursion - 使用嵌套对象时，如何在 AngularJS 中制作递归模板？

> ID：15661289
> 
> 赞同：71
> 
> 时间：2013-03-27T14:23:35.157
> 
> 标签：recursion, angularjs

我正在尝试从 JSON 对象动态构建表单，该对象包含嵌套的表单元素组：

```
 $scope.formData = [
  {label:'First Name', type:'text', required:'true'},
  {label:'Last Name', type:'text', required:'true'},
  {label:'Coffee Preference', type:'dropdown', options: ["HiTest", "Dunkin", "Decaf"]},
  {label: 'Address', type:'group', "Fields":[
      {label:'Street1', type:'text', required:'true'},
      {label:'Street2', type:'text', required:'true'},
      {label:'State', type:'dropdown',  options: ["California", "New York", "Florida"]}
    ]},
  ]; 
```

我一直在使用 ng-switch 块，但是对于嵌套项，它变得站不住脚，就像上面的 Address 对象一样。

这是小提琴：http: [//jsfiddle.net/hairgamiMaster/dZ4Rg/](http://jsfiddle.net/hairgamiMaster/dZ4Rg/)

关于如何最好地解决这个嵌套问题的任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-03-27T15:59:11.377

我认为这可以帮助你。它来自我在[Google Group](https://groups.google.com/forum/?fromgroups=#!topic/angular/TbpjE-5XEM0)上找到的关于树中递归元素的答案。

建议来自 Brendan Owen：http: [//jsfiddle.net/brendanowen/uXbn6/8/](http://jsfiddle.net/brendanowen/uXbn6/8/)

```
<script type="text/ng-template" id="field_renderer.html">
    {{data.label}}
    <ul>
        <li ng-repeat="field in data.fields" ng-include="'field_renderer.html'"></li>
    </ul>
</script>

<ul ng-controller="NestedFormCtrl">
    <li ng-repeat="field in formData" ng-include="'field_renderer.html'"></li>
</ul> 
```

建议的解决方案是使用模板，如果当前元素有子元素，则该模板使用 ng-include 指令调用自身。

在您的情况下，我会尝试使用 ng-switch 指令创建一个模板（就像您所做的那样，每种标签类型一个案例），如果有任何子标签，则在末尾添加 ng-include 。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-11T18:23:15.340

结合@jpmorin 和@Ketan 的建议（@jpmorin 的回答略有变化，因为它实际上并没有按原样工作）......有一个`ng-if`防止“叶子孩子”产生不必要的`ng-repeat`指令：

```
<script type="text/ng-template" id="field_renderer.html">
  {{field.label}}
  <ul ng-if="field.Fields">
      <li ng-repeat="field in field.Fields" 
         ng-include="'field_renderer.html'">
      </li>
  </ul>
</script>
<ul>
  <li ng-repeat="field in formData" ng-include="'field_renderer.html'"></li>
</ul> 
```

[这是Plunker](http://plnkr.co/edit/500wvQNlB020vcqhc9gC)的工作版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:43:46.650

可能会考虑使用 ng-switch 来检查 Fields 属性的可用性。如果是这样，则针对该条件使用不同的模板。此模板将在 Fields 数组上有一个 ng-repeat。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-22T09:52:12.933

我知道这是一个老问题，但对于可能通过搜索来到这里的其他人，我虽然会留下一个对我来说更简洁的解决方案。

它建立在相同的想法上，但不必将模板存储在模板缓存等中。我希望有一个更“干净”的解决方案，所以我最终创建了[https://github.com/dotJEM/angular-tree](https://github.com/dotJEM/angular-tree)

使用起来相当简单：

```
<ul dx-start-with="rootNode">
  <li ng-repeat="node in $dxPrior.nodes">
    {{ node.name }}
    <ul dx-connect="node"/>
  </li>
</ul> 
```

由于该指令使用嵌入而不是编译（从最新版本开始），因此它应该比 ng-include 示例执行得更好。

基于此处数据的示例：

```
angular
  .module('demo', ['dotjem.angular.tree'])
  .controller('AppController', function($window) {

    this.formData = [
      { label: 'First Name', type: 'text', required: 'true' },
      { label: 'Last Name',  type: 'text', required: 'true' }, 
      { label: 'Coffee Preference', type: 'dropdown', options: ["HiTest", "Dunkin", "Decaf"] }, 
      { label: 'Address', type: 'group',
      "Fields": [{
        label: 'Street1', type: 'text', required: 'true' }, {
        label: 'Street2', type: 'text', required: 'true' }, {
        label: 'State',   type: 'dropdown', options: ["California", "New York", "Florida"]
      }]
    }, ];

    this.addNode = function(parent) {
      var name = $window.prompt("Node name: ", "node name here");
      parent.children = parent.children || [];
      parent.children.push({
        name: name
      });
    }

    this.removeNode = function(parent, child) {
      var index = parent.children.indexOf(child);
      if (index > -1) {
        parent.children.splice(index, 1);
      }
    }

  });
```

```
<div ng-app="demo" ng-controller="AppController as app">

   <form>
        <ul class="unstyled" dx-start-with="app.formData" >
            <li ng-repeat="field in $dxPrior" data-ng-switch on="field.type">
                <div data-ng-switch-when="text">
                    <label>{{field.label}}</label>
                    <input type="text"/>
                </div>
                <div data-ng-switch-when="dropdown">
                    <label>{{field.label}}</label>
                    <select>
                        <option ng-repeat="option in field.options" value="{{option}}">{{option}}</option>
                    </select>
                </div>
                <div data-ng-switch-when="group" class="well">
                    <h2>{{field.label}}</h2>
                    <ul class="unstyled" dx-connect="field.Fields" />
                </div>   
            </li>
        </ul>
            <input class="btn-primary" type="submit" value="Submit"/>
    </form>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
  <script src="https://rawgit.com/dotJEM/angular-tree-bower/master/dotjem-angular-tree.min.js"></script>

</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-03T09:27:41.953

如果是基于属性的结构，我只想扩展 jpmorin 帖子。

**JSON**：

```
{
  "id": 203,
  "question_text_id": 1,
  "yes": {
    "question_text_id": 25,
    "yes": {
      "question_text_id": 26
    }
  },
  "no": {
    "question_text_id": 4
  }
} 
```

如您所见，此处的 json 对象不包含数组结构。

**HTML**

```
<div>
    <script type="text/ng-template" id="tree_item_renderer.html">
        <span>{{key}} {{value}}</span>
        <ul>
            <li ng-repeat="(key,value) in value.yes" ng-include="'tree_item_renderer.html'"></li>
            <li ng-repeat="(key,value) in value.no" ng-include="'tree_item_renderer.html'"></li>
        </ul>
    </script>

    <ul>
        <li ng-repeat="(key,value) in symptomeItems" ng-include="'tree_item_renderer.html'"></li>
    </ul>
</div> 
```

在这种情况下，您可以对其进行迭代。

**ng-repeat over properties [here的](https://docs.angularjs.org/api/ng/directive/ngRepeat)**Angular**文档，**

 **并且可以在[此处](http://jsfiddle.net/kreqc6p8/)找到一些行实现。**

# php - 学说 2 和 ORM：如何缓存某个实体的每个查询？

> ID：15661296
> 
> 赞同：8
> 
> 时间：2013-03-27T14:23:56.670
> 
> 标签：php, caching, orm, doctrine-orm

我一直在与这个问题作斗争，并发现，正式地，我只能缓存一些自定义查询（查询对象上的 useResultCache(true)）。但是我需要将应用程序中的每个查询缓存到某个表中。EntityManager 上的 find* 方法呢？...

有人可以帮我找到一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T11:51:14.993

这尚不支持，您最终应该在服务层或扩展存储库中处理它。

您正在寻找的是[Hibernate 中的二级缓存](http://www.javalobby.org/java/forums/t48846.html)，它基本上允许您插入键值存储，例如 redis、riak、mongodb 等，以便在操作是简单的 fetch 操作时使事情变得非常快。

[在https://github.com/doctrine/doctrine2/pull/580](https://github.com/doctrine/doctrine2/pull/580)有一个正在进行的拉取请求，它可能会出现在 Doctrine ORM 2.5 中，所以请查看那个。

```
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\EntityManager;
use Doctrine\Common\Cache\Cache;
use Doctrine\Common\Cache\ArrayCache;

class MyBaseRepo extends EntityRepository
{
    public function __construct(EntityManager $entityManager)
    {
        parent::__construct($entityManager);
        $cache       = $em->getConfiguration()->getHydrationCache();
        $this->cache = $cache ?: new ArrayCache();
    }

    public function find($id)
    {
        if (!$object = $this->tryFetchFromCache($id)) {
            $object = parent::find($id);
            $this->cache->save($this->generateKey($id), $object);
        }

        return $object;
    }

    protected function tryFetchFromCache($id)
    {
        if (!$object = $this->cache->fetch($this->generateCacheKey($id))) {
            return null;
        }

        return $this->getEntityManager()->merge($object);
    }

    public function generateCacheKey($id) { /* ... */ }
} 
```

在引导应用程序时，您可以强制它成为配置中 ORM 的基本存储库：

```
$configuration = new \Doctrine\ORM\Configuration();

$configuration->setDefaultRepositoryClassName('My\MyBaseRepo'); 
```

当您的任何实体发生更新/保存时，这也会强制您清除缓存条目：

```
use Doctrine\Common\EventSubscriber;
use Doctrine\ORM\Event\OnFlushEventArgs;
use Doctrine\ORM\Events;

class IssueUpdateSubscriber implements EventSubscriber
{
    public function onFlush(OnFlushEventArgs $args)
    {
        $em  = $args->getEntityManager();
        $uow = $em->getUnitOfWork();

        if (!$cache = $em->getConfiguration()->getHydrationCache()) {
            return;
        }

        $busted = array_merge(
            $uow->getScheduledEntityUpdates(),
            $uow->getScheduledEntityDeletions(),
        );

        foreach ($busted as $entityToClear) {
            $className  = get_class($entityToClear);
            $metadata   = $em->getClassMetadata($className);
            $repository = $em->getRepository($className);
            $id         = $metadata->getIdentifierValues($entityToClear);

            $cache->delete($repository->generateCacheKey($id));
        }
    }

    public function getSubscribedEvents()
    {
        return array(Events::onFlush);
    }
} 
```

请注意，此实现不会拦截给定实体对数据库的所有访问。它不会拦截代理引起的延迟加载初始化，而且它非常脆弱，所以请设置一些适当的集成测试来支持它。

# jsf - 严重：javax.faces.FacesException：Erreur d'argument：le paramètre «text» est null

> ID：15661297
> 
> 赞同：0
> 
> 时间：2013-03-27T14:24:01.343
> 
> 标签：jsf, primefaces

我有 JSF 和 Primesfaces 的问题。我有一个包含如下列表的表单：

```
<h:form>
  <h:outputText value="Filtrer par client" for="filtreClient" />
  <p:selectOneMenu id="filtreClient" value="#{actionBean.action.codeClient}" effect="fade">
    <f:selectItem itemLabel="Sélectionnez" itemValue="" />
    <f:selectItems value="#{clientDao.listeClient}"  />
  </p:selectOneMenu>
</h:form> 
```

它返回给我这个`error ==>SEVERE: javax.faces.FacesException: Erreur d’argument : le paramètre «text» est null.`（这意味着参数“text”为空）。我不明白的是我的应用程序中没有参数文本以及什么参数？方法的参数？从一个`httpRequest`？

你见过这样的错误吗？

这是我的堆栈跟踪：

```
SEVERE: javax.faces.FacesException: Erreur d’argument : le paramètre «text» est null.
  javax.faces.FacesException: Erreur d’argument : le paramètre «text» est null.
  at com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:142)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:809)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505)
at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476)
at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305)
at servlet.Login.doPost(Login.java:85)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException: Erreur d’argument : le paramètre «text» est null.
at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.writeText(HtmlResponseWriter.java:877)
at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeOption(SelectOneMenuRenderer.java:368)
at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeSelectItems(SelectOneMenuRenderer.java:333)
at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeInput(SelectOneMenuRenderer.java:114)
at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeMarkup(SelectOneMenuRenderer.java:91)
at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeEnd(SelectOneMenuRenderer.java:65)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
... 36 more 
```

* * *

**更新**：这是`ClientDao`创建列表的：

```
public class ClientDao implements IClient, Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1951697664353493098L;

    public static String GET_ALL_CLIENT = "SELECT c.codeClient, c.nom , c.prenom FROM Client c ORDER BY c.name ASC ";

    @PersistenceContext(unitName = "dev")
    EntityManager em;

    private List<SelectItem> listeClient;
    private List<Client> resListeClient;
    private SelectItem selectItem;
    public List<SelectItem> getListeClient() {
        try {

            EntityManagerFactory emf = null;
            emf = Persistence.createEntityManagerFactory("dev");
            em = emf.createEntityManager();
            Query requete = em.createQuery("SELECT c FROM Client c ORDER BY c.nom ASC");
            resListeClient = requete.getResultList();
            listeClient = new ArrayList<SelectItem>();
                for (Client c : resListeClient) {
                    if (c.getNom() != null) {
                        selectItem = new SelectItem();
                        selectItem.setValue(c.getCodeClient());
                        selectItem.setLabel(c.getNom() + " " + c.getPrenom());
                        listeClient.add(selectItem);
                    }
                }

        } catch (NoResultException e) {

            System.out.println("Aucun client trouvé" + e.getMessage()
                    + e.getCause());

        } finally {
            if (em != null) {
                em.close();
            }
        }

        return listeClient;
        // return null;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:45:12.690

您的具体问题是您正在生成`SelectItem`错误的 getter 方法中的对象列表。迁移用于在方法中生成列表的代码`@PostConstruct`，并在 getter 中仅返回该列表：

```
@PostConstruct
public void init() {
  try {
    EntityManagerFactory emf = null;
    emf = Persistence.createEntityManagerFactory("dev");
    em = emf.createEntityManager();
    Query requete = em.createQuery("SELECT c FROM Client c ORDER BY c.nom ASC");
    resListeClient = requete.getResultList();
    listeClient = new ArrayList<SelectItem>();
        for (Client c : resListeClient) {
            if (c.getNom() != null) {
                selectItem = new SelectItem();
                selectItem.setValue(c.getCodeClient());
                selectItem.setLabel(c.getNom() + " " + c.getPrenom());
                listeClient.add(selectItem);
            }
        }

  } catch (NoResultException e) {

    System.out.println("Aucun client trouvé" + e.getMessage()
            + e.getCause());

  } finally {
    if (em != null) {
        em.close();
    }
  }
}

public List<SelectItem> getListeClient() {
  return listeClient;
} 
```

Getter 在 JSF 生命周期中被多次调用，所以这首先是因为性能问题。此外，您应该在初始请求和回发期间拥有相同的列表以正确设置值。

# javascript - 选择元素是否具有标准值属性？

> ID：15661298
> 
> 赞同：3
> 
> 时间：2013-03-27T14:24:04.997
> 
> 标签：javascript, dom, selectedvalue

这是一个简单的问题，但我找不到任何参考，所以在这里。

假设我有一个选择元素：

```
<select id="sel">
    <option value="1">1</option>
    <option value="2">2</option>
</select> 
```

现在我想得到它选择的选项的`value`. 大多数情况下，我看到这种片段被使用：

```
var sel = document.getElementById('sel');
console.log( sel.options[sel.selectedIndex].value ); //1 
```

效果很好。但是，我发现`select`元素也有一个 value 属性：

```
console.log( sel.value ); //1 
```

请参阅这两个示例的[**小提琴**](http://jsfiddle.net/h9Sba/)。

第二种形式不仅简单得多，而且可以一直使用到 IE6（是的，我确实对此进行了测试，这里是[IE6 友好版本](http://jsfiddle.net/h9Sba/1/show)）。

为什么第一种方法被广泛接受是有原因的吗？第二种方法是否存在一些不兼容或极端情况问题？

附言。我的“最常用方法”论文主要基于个人经验，但作为参考，[Get selected value in dropdown list using JavaScript? 中最受好评的两个答案？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)使用第一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:33:18.603

[**MDN 页面**](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)告诉我们

> `options` *nsIDOMHTMLOptionsCollection* 该元素包含的元素集。只读。
> 
> `selectedIndex` *long* 第一个选定元素的索引。
> 
> `value` *DOMString*此表单控件的值，即第一个选定选项的值。

然而它也说

> `selectedOptions` **未实现（请参阅错误 596681）** *HTMLCollection* 已选择的选项集。HTML5

因此，如果你想要一个多选但通用的兼容性，你将不得不循环`options`，但如果你有一个单选，`sel.options[sel.selectedIndex].value`并且`sel.value`是等价的，但先验与循环的形式“更相似” for多选需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:21:21.820

第一个选项被广泛接受只是因为它更广为人知。第二个选项非常好。

您是否验证过它可以在 Navigator 4 上运行？

# c# - 方法属性目标的目的是什么？

> ID：15661301
> 
> 赞同：7
> 
> 时间：2013-03-27T14:24:15.390
> 
> 标签：c#, attributes

在 C# 规范 (17.2) 中，它表示在指定属性时有多个属性目标。当您需要将属性应用于通常没有“真实”位置来指定属性的事物时，这很常见。例如，`return`平台Invoke中经常使用目标：

```
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SomeWin32Method(); //Assume this is valid, has a DllImport, etc. 
```

但是我注意到还有其他属性目标，例如`method`：

```
[method: DllImport("somelib.dll")]
static extern bool SomeWin32Method(); 
```

在什么情况下我需要明确定义`method`属性目标（比如解决歧义），还是为了完整性而存在？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:30:28.757

在这种情况下，您不需要指定目标（直接位于方法上方，`method`是默认目标），它只是为了完整性。就像您在向班级添加成员时不需要指定一样`private`，但很多人还是这样做了。在许多情况下，代码生成器喜欢对事物更加明确。

另外，我认为在这种情况下，附加说明符使事情更加清晰：

```
[method: SomeAttr]
[return: SomeOtherAttr]
int SomeMethod() { return 0; } 
```

# azure - 使用 azure 将数据上传到企业数据库

> ID：15661304
> 
> 赞同：1
> 
> 时间：2013-03-27T14:24:18.840
> 
> 标签：azure, cloud

目前，我作为 .NET 开发人员为我的一个客户开发一个项目。该项目的第一阶段是构建一个桌面 WPF 应用程序，该应用程序可以读取 csv 文件并将其存储到本地 sql 紧凑型数据库中。使用这些数据，用户可以创建绘图并使用它进行一些计算。到目前为止，一切都很好。最后，我们希望将此数据上传到位于公司网络内部的 SQL 数据库。这个想法是使用某种云服务，WPF 应用程序可以在其中连接并在企业网络中部署 Windows 服务，以将这些数据从云中获取到本地数据库。使用 WPF 应用程序的用户只能访问云服务，而不能访问公司网络。

我对云完全陌生，我想知道是否有人对这种设置有经验并给我一些建议。例如，这里应该使用什么样的云服务/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:58:19.433

由于个人用户将在本地拥有 csv 文件，并且您的要求是通过云存储和同步数据，我可以建议一个简单的解决方案，如下所示：

创建一个非常简单的 ASP.NET 云服务并添加一个界面，个人用户可以在其中将他们的 CSV 上传到 Azure，在您的云服务应用程序中，您可以将该 CSV 文件移动到 Azure 存储以进行持久保存。（您还可以创建一个 Web 服务前端，个人用户可以直接从 WPF 应用程序访问以上传 CSV，但需要更多代码）。如果您添加代码以将 csv 从 WPF 应用程序上传到 Azure 存储，您可能需要本地存储密钥，否则您可以使用 SAS（共享访问签名）来提供基于时间的访问。您可以将 csv 保留在云服务 VM 上，但它不会持续存在，这也是您需要使用 Azure 存储的原因。

将 CSV 文件上传到 Azure 存储后，您可以通过启用适当的防火墙设置将其同步到本地 SQL 数据库。

在云服务中，您可以添加更多代码以从 Azure Blob Storage 读取 CSV 并直接写入 Azure Cloud SQL 数据库，并且根本不需要本地 SQL Server，这是最佳选择。

# eclipse - 调试不起作用

> ID：15661311
> 
> 赞同：1
> 
> 时间：2013-03-27T14:24:32.880
> 
> 标签：eclipse, google-app-engine, debugging

我正在开发一个 Google App Engine 应用程序。我想调试它，但我不明白如果设置了断点，python 脚本是如何运行的。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:53:02.983

我不知道它在 Python 中是如何工作的。在 Java 中，如果您使用 Eclipse，您只需按 Debug 即可启动 Development Server。然后，您只需打开浏览器并转到即可`http://localhost:8888`！它与断点等完美配合......

# php - Code Igniter：解决 Windows Azure 存储工具的依赖关系

> ID：15661312
> 
> 赞同：0
> 
> 时间：2013-03-27T14:24:33.483
> 
> 标签：php, codeigniter, azure, azure-storage

我正在使用 Windows azure blob 存储来存储用户将上传到我的网站的数据。我的网站是使用 Code Igniter 框架并根据[Blob Service for PHP](http://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/#ConfigureStorage)的文档开发的：

> 此示例（以及本文中的其他示例）假设您已通过 Composer 安装了适用于 Windows Azure 的 PHP 客户端库。如果您手动安装这些库或作为 PEAR 包安装，则需要引用 WindowsAzure.php 自动加载器文件。

如何将这些 Pear 包合并到 Code Igniter 中以确保这些依赖关系仍然得到解决？我尝试将它们放在库文件夹中，但这不起作用，因为每次使用它们时我都需要加载它们。我什至尝试将它们设置为自动加载，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:37:52.023

设法让它工作！在网站的根文件夹中安装这些依赖项。并将 PEAR 包文件夹复制到根目录。

# java - JdbcTemplate queryForInt/Long 在 Spring 3.2.2 中被弃用。应该用什么代替？

> ID：15661313
> 
> 赞同：107
> 
> 时间：2013-03-27T14:24:34.287
> 
> 标签：java, spring, jdbc, jdbctemplate

JdbcTemplate 中的 queryforInt/queryforLong 方法在 Spring 3.2 中已弃用。我不知道为什么或什么被认为是使用这些方法替换现有代码的最佳实践。

一个典型的方法：

```
int rowCount = jscoreJdbcTemplate.queryForInt(
    "SELECT count(*) FROM _player WHERE nameKey = ? AND teamClub = ?",
    playerNameKey.toUpperCase(),
    teamNameKey.toUpperCase()
); 
```

OK 上面的方法需要改写如下：

```
Object[] params = new Object[] { 
   playerNameKey.toUpperCase(), 
   teamNameKey.toUpperCase()
};
int rowCount = jscoreJdbcTemplate.queryForObject(
    "SELECT count(*) FROM _player WHERE nameKey = ? AND teamClub = ?",
    params, Integer.class); 
```

显然，这种弃用使 JdbcTemplate 类更简单（或者是吗？）。QueryForInt 一直是一种方便的方法（我猜）并且已经存在了很长时间。为什么被删除了。结果代码变得更加复杂。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-04-05T16:40:01.743

我认为有人意识到 queryForInt/Long 方法具有令人困惑的语义，也就是说，从 JdbcTemplate 源代码中您可以看到它当前的实现：

```
@Deprecated
public int queryForInt(String sql, Object... args) throws DataAccessException {
    Number number = queryForObject(sql, args, Integer.class);
    return (number != null ? number.intValue() : 0);
} 
```

这可能会导致您认为如果结果集为空，它将返回 0，但是它会引发异常：

`org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0`

所以下面的实现基本上等同于当前的实现：

```
@Deprecated
public int queryForInt(String sql, Object... args) throws DataAccessException {
    return queryForObject(sql, args, Integer.class);
} 
```

然后现在必须用丑陋的代码替换非弃用代码：

```
 queryForObject(sql, new Object { arg1, arg2, ...}, Integer.class); 
```

或者这个（更好）：

```
 queryForObject(sql, Integer.class, arg1, arg2, ...); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-07-25T15:09:51.273

我同意原始发帖人的观点，即弃用便捷方法 queryForLong(sql) 会带来不便。

我使用 Spring 3.1 开发了一个应用程序，刚刚更新到最新的 Spring 版本（3.2.3），并注意到它已被弃用。

幸运的是，这对我来说是一行更改：

```
return jdbcTemplate.queryForLong(sql);  // deprecated in Spring 3.2.x 
```

改为

```
return jdbcTemplate.queryForObject(sql, Long.class); 
```

一些单元测试似乎表明，上述更改有效。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-27T14:33:59.223

已弃用，取而代之的是`queryForObject(String, Class)`.

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-08-06T09:22:43.013

替换这样的代码：

```
long num = jdbcTemplate.queryForLong(sql); 
```

使用此代码：

```
long num = jdbcTemplate.queryForObject(sql, Long.class); 
```

非常危险，因为如果列有 null 值 queryForObject 返回 null 并且我们知道原始类型不能为 null 并且您将有 NullPointerException。编译器没有就此向您发出警告。您将在运行时知道此错误。如果您有返回原始类型的方法，您将遇到同样的错误：

```
public long getValue(String sql) {
    return = jdbcTemplate.queryForObject(sql, Long.class);
} 
```

Spring 3.2.2 中 JdbcTemplate 中已弃用的方法 queryForLong 具有以下主体：

```
@Deprecated
public long queryForLong(String sql) throws DataAccessException {
    Number number = queryForObject(sql, Long.class);
    return (number != null ? number.longValue() : 0);
} 
```

您会看到在它们返回原始值之前检查这是否为空，如果为空，则返回 0。顺便说一下 - 应该是 0L。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-17T16:23:38.083

`JdbcTemplate#queryForInt`如果列值为 SQL NULL 或 0，则返回 0。无法区分一种情况与另一种情况。我认为这是该方法被弃用的主要原因。顺便说一句，`ResultSet#getInt`行为类似。不过，我们可以通过 区分这两种情况`ResultSet#wasNull`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-05T06:36:07.167

```
public int getCircleCount() {
    Object param = "1";
    String sql = "select count(*) from circle where id = ? ";
    jdbcTemplate.setDataSource(getDataSource());
    int result = getJdbcTemplate().queryForObject(sql, new Object[] { param }, Integer.class);
    return result;
} 
```

# emacs - Emacs 点对语法改进

> ID：15661315
> 
> 赞同：5
> 
> 时间：2013-03-27T14:24:37.707
> 
> 标签：emacs, elisp

我想在 Emacs Lisp 中创建一对虚线变量。但我能找到的唯一方法似乎真的很笨拙。作为一个简化的例子：

```
(let ((width (calculate-width)
      (height (calculate-height))
  `(,width . ,height)) 
```

这种反引号，双引号语法对我来说很臭，但是我找不到更整洁的方法，而且我的 Google-fu 让我失望了。

当值是变量时，是否有更好的方法来构造点对？

*（为澄清起见，它必须是一个点对。直接列表是不行的。）*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T14:33:47.123

你可以使用`cons`：

```
(let ((width (calculate-width))
      (height (calculate-height))
   (cons width height)) 
```

# iframe - 如何更改 iframe 中内容视口的大小

> ID：15661316
> 
> 赞同：0
> 
> 时间：2013-03-27T14:24:39.550
> 
> 标签：iframe, viewport

我想在 iframe 中更改窗口的大小。iframe 包含图片库。通过点击图片，图片会变大到窗口的大小。（如fancyBox）我需要图片来适应iframe 视口的大小，而我不能对iframe 来源的页面内容做任何事情。

我怎么能做到，甚至有可能吗

示例[http://jsfiddle.net/SVqx9/18/](http://jsfiddle.net/SVqx9/18/)

只需单击袋子，您就会看到。我需要隐藏页面顶部，因为它在那里看起来不太好，我需要 `margin-top: -290px;` 或者至少我认为我需要它？为了将内容的顶部边框向上移动一点。

谢谢

# ruby - ubuntu 上的 Firewatir

> ID：15661320
> 
> 赞同：3
> 
> 时间：2013-03-27T14:24:54.300
> 
> 标签：ruby, ubuntu, watir, firewatir

我正在尝试在 ubuntu 上使用 firewatir，但出现以下错误：

`irb(main):003:0> require 'firewatir' LoadError: cannot load such file -- watir/exceptions from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in`require' from /var/lib/gems/1.9.1/gems/firewatir-1.9.4/lib/firewatir/exceptions.rb:1:in `<top (required)>' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in`require' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from /var/lib/gems/1.9.1/gems/firewatir-1.9.4/lib/firewatir.rb:5:in`' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:60:in `require' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:60:in`rescue in require' from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:35:in `require' from (irb):3 from /usr/bin/irb:12:in`'`

有没有人知道为什么会这样？我忘了安装什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:57:48.760

Firewatir 已被弃用。要驱动 Firefox，您应该安装 Watir-webdriver。有关安装说明，请参阅[https://github.com/watir/watirbook/blob/master/installation/ubuntu.md](https://github.com/watir/watirbook/blob/master/installation/ubuntu.md)

# android - 应用程序从 android 上的应用程序抽屉中隐藏后未启动

> ID：15661329
> 
> 赞同：1
> 
> 时间：2013-03-27T14:25:18.757
> 
> 标签：android, hide, launch

我有一个应用程序，**我**使用`broadcast receiver`. 我使用这种方法将其从应用程序抽屉中隐藏起来：

```
public static void hideFromAppDrawer(Context c) {
        ComponentName componentToDisable = new ComponentName(
                "mypackage", "mypackage.MyMainActivity");

        c.getPackageManager().setComponentEnabledSetting(componentToDisable,
                PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                PackageManager.DONT_KILL_APP);
    } 
```

但是在隐藏之后（我隐藏了 laucher 活动，之后我想远程启动相同的活动）应用程序无法启动。日志说：

```
03-27 15:00:53.494: E/AndroidRuntime(23392): FATAL EXCEPTION: main
03-27 15:00:53.494: E/AndroidRuntime(23392): java.lang.RuntimeException: Unable to start receiver mypackage.receivers.myReceiver: android.content.ActivityNotFoundException: Unable to find explicit activity class {mypackage/mypackage.MyMainActivity}; have you declared this activity in your AndroidManifest.xml?
03-27 15:00:53.494: E/AndroidRuntime(23392):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2383) 
```

`broadcast receiver's` `onReceive()`当我尝试启动活动时，错误出现在方法中：

```
context.startActivity(i);

03-27 15:00:53.494: E/AndroidRuntime(23392):    at ... .onReceive(MyReceiver.java:36) 
```

可能是什么问题？如何在应用程序抽屉隐藏时启动我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:36:54.103

> 可能是什么问题呢

您禁用了该组件，这意味着它无法启动。

> 如何在应用程序抽屉隐藏时启动我的应用程序？

你可以试试这个：

*   设置一个`<activity-alias>`清单条目，指向您的活动，其中包含您的`MAIN`/ `LAUNCHER` `<intent-filter>`（从原始过滤器中删除`<activity>`）

*   禁用`<activity-alias>`使用上面的 Java 代码，保持原始活动不变

*   确保您`BroadcastReceiver`引用该活动，因为它应该已经

原则上，这应该可行，尽管我没有尝试过这个特定的食谱。

# r - 在R中的函数中访问变量名

> ID：15661330
> 
> 赞同：2
> 
> 时间：2013-03-27T14:25:21.633
> 
> 标签：r

我定义了以下函数：

```
plot_test <- function(data) {
  columns <- names(data)
  for (column in columns) {
    p <- ggplot(data, aes(x=get(column), y=cluster))
    p <- p + geom_jitter(position = position_jitter(height = .1, width=0.1))
    show(p)
  }
} 
```

带输入数据框：

```
a <- data.frame(id=c(1,2), cluster=c(3,4)) 
```

当我运行时：

```
plot_test(a) 
```

我收到以下错误消息：

```
Error in get(column) : object 'column' not found 
```

我没有适当地在 for 循环中确定列变量的范围。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:29:45.743

使用`aes_string`而不是`get`将列名传递给 ggplot：

```
for (column in columns) {
    p <- ggplot(data, aes_string(x=column, y="cluster"))
    p <- p + geom_jitter(position = position_jitter(height = .1, width=0.1))
    show(p)
} 
```

# xtrareport - 如何使用 asp.net mvc 和 XtraReports 打印选定的行

> ID：15661335
> 
> 赞同：1
> 
> 时间：2013-03-27T14:25:32.397
> 
> 标签：xtrareport

我希望能够使用 xtrareports 和 MVC4 仅打印数据源中的特定行。我可以得到任何帮助或我可以关注的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:25:41.553

您是否尝试仅使用必要的数据填充报表数据源？这种方式对我完成你的任务是最明显的。请从 DX 支持中心查看这些与您的方案类似的示例：

*   [如何根据 ASPxGridView 中的选定行过滤 XtraReport 数据](http://www.devexpress.com/Support/Center/Example/Details/E1613)
*   [如何为 ASPxGridView 控件中的选定行创建和打印报表](http://www.devexpress.com/Support/Center/e/E1905.aspx)

# python - 在 python 程序中执行 linux 命令

> ID：15661337
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:25:43.803
> 
> 标签：python, subprocess

我正在linux中编写一个python程序。

在我的 python 程序中，我需要从 python 程序本身内部执行另一个工作目录中的 linux 命令。

示例：我的程序 test.py 在目录 dir1/dir2 中。

./wlst.sh 是 dir1/dir2/dir3/dir4 中的一个程序。

所以我需要从位于 dir2 的 python 程序执行 dir4 中的 .wlst.sh。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:50:29.197

```
import subprocess
try:
  output = subprocess.check_output(
    [ './wlst.sh' ],
    cwd='dir1/dir2/dir3/dir4',
    stderr=subprocess.STDOUT)
except subprocess.CalledProcessError as problem:
  print "Error", problem.returncode
  print "  while calling subprocess, output was:", problem.output
else:
  print "No error while calling subprocess, output was:", output 
```

我不得不提一下，这捕获了子进程的所有输出，所以如果这个子进程做了很多很多（并且可能永远不会终止），这将填满你的 RAM。在这种情况下考虑使用`check_call()`而不是`check_output()`，也许将输出重定向到`/dev/null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:28:50.233

```
import subprocess
subprocess.call(['./wlst.sh'], cwd='dir1/dir2/dir3/dir4') 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T14:51:35.077

```
 import os ,subprocess
    os.chdir("dir3/dir4")
    os.system("./wlst.sh") 
```

否则你可以使用子进程

```
 os.chdir("dir3/dir4")
    subprocess.call("./wlst.sh") 
```

# javascript - 如何修复 HTML5 画布中的模糊文本？

> ID：15661339
> 
> 赞同：102
> 
> 时间：2013-03-27T14:25:47.173
> 
> 标签：javascript, html, html5-canvas

我是一个总*n00b*并且`HTML5`正在使用`canvas`渲染形状、颜色和文本。在我的应用程序中，我有一个动态创建画布并用内容填充它的*视图适配器。*这非常有效，除了我的文本被渲染得非常模糊/模糊/拉伸。我已经看到了很多其他关于为什么定义*宽度*和*高度*会`CSS`导致这个问题的帖子，但我在`javascript`.

相关代码（查看[Fiddle](http://jsfiddle.net/65maD/)）：

```
var width  = 500;//FIXME:size.w;
var height = 500;//FIXME:size.h;

var canvas = document.createElement("canvas");
//canvas.className="singleUserCanvas";
canvas.width=width;
canvas.height=height;
canvas.border = "3px solid #999999";
canvas.bgcolor = "#999999";
canvas.margin = "(0, 2%, 0, 2%)";

var context = canvas.getContext("2d");

//////////////////
////  SHAPES  ////
//////////////////

var left = 0;

//draw zone 1 rect
context.fillStyle = "#8bacbe";
context.fillRect(0, (canvas.height*5/6)+1, canvas.width*1.5/8.5, canvas.height*1/6);

left = left + canvas.width*1.5/8.5;

//draw zone 2 rect
context.fillStyle = "#ffe381";
context.fillRect(left+1, (canvas.height*5/6)+1, canvas.width*2.75/8.5, canvas.height*1/6);

left = left + canvas.width*2.75/8.5 + 1;

//draw zone 3 rect
context.fillStyle = "#fbbd36";
context.fillRect(left+1, (canvas.height*5/6)+1, canvas.width*1.25/8.5, canvas.height*1/6);

left = left + canvas.width*1.25/8.5;

//draw target zone rect
context.fillStyle = "#004880";
context.fillRect(left+1, (canvas.height*5/6)+1, canvas.width*0.25/8.5, canvas.height*1/6);

left = left + canvas.width*0.25/8.5;

//draw zone 4 rect
context.fillStyle = "#f8961d";
context.fillRect(left+1, (canvas.height*5/6)+1, canvas.width*1.25/8.5, canvas.height*1/6);

left = left + canvas.width*1.25/8.5 + 1;

//draw zone 5 rect
context.fillStyle = "#8a1002";
context.fillRect(left+1, (canvas.height*5/6)+1, canvas.width-left, canvas.height*1/6);

////////////////
////  TEXT  ////
////////////////

//user name
context.fillStyle = "black";
context.font = "bold 18px sans-serif";
context.textAlign = 'right';
context.fillText("User Name", canvas.width, canvas.height*.05);

//AT:
context.font = "bold 12px sans-serif";
context.fillText("AT: 140", canvas.width, canvas.height*.1);

//AB:
context.fillText("AB: 94", canvas.width, canvas.height*.15);

//this part is done after the callback from the view adapter, but is relevant here to add the view back into the layout.
var parent = document.getElementById("layout-content");
parent.appendChild(canvas);
```

```
<div id="layout-content"></div>
```

我看到的结果（在*Safari*中）比 Fiddle 中显示的更偏斜：

**矿**

![在 Safari 中渲染输出](../Images/711973aea5bbeb983f27c7cd4971b4e3.png)

**小提琴**

![JSFiddle 上的渲染输出](../Images/8565a2a309fde780b5308611a9779efe.png)

我做错了什么？每个文本元素是否需要单独的画布？是字体吗？我需要先在 HTML5 布局中定义画布吗？有错别字吗？我搞不清楚了。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-03-27T18:03:36.770

画布元素独立于设备或显示器的像素比率运行。

在 iPad 3+ 上，这个比率是 2。这基本上意味着你的 1000 像素宽度的画布现在需要填充 2000 像素以匹配它在 iPad 显示屏上的规定宽度。对我们来说幸运的是，这是由浏览器自动完成的。另一方面，这也是您在直接适合其可见区域的图像和画布元素上看到较少定义的原因。因为你的画布只知道如何填充 1000 像素，但被要求绘制到 2000 像素，所以浏览器现在必须智能地填充像素之间的空白，以便以适当的大小显示元素。

我强烈建议您阅读[HTML5Rocks中的](http://www.html5rocks.com)[这篇文章](http://www.html5rocks.com/en/tutorials/canvas/hidpi/)，其中更详细地解释了如何创建高清元素。

tl;博士？这是我在自己的项目中使用的示例（基于上面的 tut）以正确的分辨率吐出画布：

```
var PIXEL_RATIO = (function () {
    var ctx = document.createElement("canvas").getContext("2d"),
        dpr = window.devicePixelRatio || 1,
        bsr = ctx.webkitBackingStorePixelRatio ||
              ctx.mozBackingStorePixelRatio ||
              ctx.msBackingStorePixelRatio ||
              ctx.oBackingStorePixelRatio ||
              ctx.backingStorePixelRatio || 1;

    return dpr / bsr;
})();

createHiDPICanvas = function(w, h, ratio) {
    if (!ratio) { ratio = PIXEL_RATIO; }
    var can = document.createElement("canvas");
    can.width = w * ratio;
    can.height = h * ratio;
    can.style.width = w + "px";
    can.style.height = h + "px";
    can.getContext("2d").setTransform(ratio, 0, 0, ratio, 0, 0);
    return can;
}

//Create canvas with the device resolution.
var myCanvas = createHiDPICanvas(500, 250);

//Create canvas with a custom resolution.
var myCustomCanvas = createHiDPICanvas(500, 200, 4); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-27T14:44:49.737

**解决了！**

我决定看看是什么改变了我设置的*宽度*和*高度*属性`javascript`，看看它是如何影响画布大小的——但它没有。它改变了分辨率。

为了得到我想要的结果，我还必须设置`canvas.style.width`属性，它会改变`canvas`:

```
canvas.width=1000;//horizontal resolution (?) - increase for better looking text
canvas.height=500;//vertical resolution (?) - increase for better looking text
canvas.style.width=width;//actual width of canvas
canvas.style.height=height;//actual height of canvas 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-12-03T11:16:39.027

虽然@MyNameIsKo 的答案仍然有效，但它在 2020 年现在有点过时了，可以改进：

```
function createHiPPICanvas(w, h) {
    let ratio = window.devicePixelRatio;
    let cv = document.createElement("canvas");
    cv.width = w * ratio;
    cv.height = h * ratio;
    cv.style.width = w + "px";
    cv.style.height = h + "px";
    cv.getContext("2d").scale(ratio, ratio);
    return cv;
} 
```

总的来说，我们做了以下改进：

*   我们删除了`backingStorePixelRatio`这些引用，因为这些引用并没有真正在任何浏览器中以任何重要的方式实现（事实上，只有 Safari 返回除 之外的其他内容`undefined`，并且这个版本在 Safari 中仍然可以完美运行）；
*   我们将所有比率代码替换为`window.devicePixelRatio`，[它具有出色的支持](https://caniuse.com/?search=window.devicePixelRatio)
*   这也意味着我们少声明了一个全局属性——万岁！！
*   我们也可以去掉`|| 1`fallback on `window.devicePixelRatio`，因为它是没有意义的：所有不支持这个属性的浏览器都不支持`.setTransform`or `.scale`，所以这个函数对他们不起作用，不管 fallback 与否；
*   我们可以替换`.setTransform`为`.scale`，因为传入宽度和高度比传入变换矩阵更直观一些。
*   该函数已从 重命名`createHiDPICanvas`为`createHiPPICanvas`。正如@MyNameIsKo 自己在他们的回答评论中提到的那样，DPI（每英寸点数）是打印术语（因为打印机用彩色墨水的微小点组成图像）。虽然类似，但显示器使用像素显示图像，因此 PPI（每英寸像素数）是我们用例的更好缩写。

* * *

这些简化的一大好处是，这个答案现在可以在没有的 TypeScript 中使用`// @ts-ignore`（因为 TS 没有类型 for `backingStorePixelRatio`）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-17T19:56:40.433

这 100% 为我解决了这个问题：

```
var canvas = document.getElementById('canvas');
canvas.width = canvas.getBoundingClientRect().width;
canvas.height = canvas.getBoundingClientRect().height; 
```

（它接近 Adam Mańkowski 的解决方案）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-08-27T13:30:45.587

我通过 css 调整画布元素的大小以获取父元素的整个宽度。我注意到我的元素的宽度和高度没有缩放。我正在寻找设置大小的最佳方法。

```
canvas.width = canvas.clientWidth;
canvas.height = canvas.clientHeight; 
```

无论您将使用什么屏幕，这种简单的方式都将完美地设置您的画布。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-05-31T11:20:42.063

在你的画布上尝试这一行 CSS： `image-rendering: pixelated`

根据[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering)：

> 放大图像时，必须使用最近邻算法，使图像看起来由大像素组成。

因此，它完全防止了抗锯齿。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-01-03T17:48:39.593

我注意到其他答案中没有提到的一个细节。**画布分辨率截断为整数值。**

默认画布分辨率尺寸为`canvas.width: 300`和`canvas.height: 150`。

在我的屏幕上，`window.devicePixelRatio: 1.75`.

因此，当我将`canvas.height = 1.75 * 150`值从所需的值截断`262.5`为`262`.

一种解决方案是为给定选择 CSS 布局尺寸，以便`window.devicePixelRatio`在缩放分辨率时不会发生截断。

例如，我可以使用`width: 300px`and`height: 152px`乘以`1.75`.

**编辑**：另一个解决方案是利用 CSS 像素可以是分数的事实来抵消缩放画布像素的截断。

下面是使用此策略的演示。

**编辑**：这是 OP 的小提琴更新以使用此策略：http: [//jsfiddle.net/65maD/83/](http://jsfiddle.net/65maD/83/)。

```
main();

// Rerun on window resize.
window.addEventListener('resize', main);

function main() {
  // Prepare canvas with properly scaled dimensions.
  scaleCanvas();

  // Test scaling calculations by rendering some text.
  testRender();
}

function scaleCanvas() {
  const container = document.querySelector('#container');
  const canvas = document.querySelector('#canvas');

  // Get desired dimensions for canvas from container.
  let {width, height} = container.getBoundingClientRect();

  // Get pixel ratio.
  const dpr = window.devicePixelRatio;

  // (Optional) Report the dpr.
  document.querySelector('#dpr').innerHTML = dpr.toFixed(4);

  // Size the canvas a bit bigger than desired.
  // Use exaggeration = 0 in real code.
  const exaggeration = 20;
  width = Math.ceil (width * dpr + exaggeration);
  height = Math.ceil (height * dpr + exaggeration);

  // Set the canvas resolution dimensions (integer values).
  canvas.width = width;
  canvas.height = height;

  /*-----------------------------------------------------------
                         - KEY STEP -
   Set the canvas layout dimensions with respect to the canvas
   resolution dimensions. (Not necessarily integer values!)
   -----------------------------------------------------------*/
  canvas.style.width = `${width / dpr}px`;
  canvas.style.height = `${height / dpr}px`;

  // Adjust canvas coordinates to use CSS pixel coordinates.
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);
}

function testRender() {
  const canvas = document.querySelector('#canvas');
  const ctx = canvas.getContext('2d');

  // fontBaseline is the location of the baseline of the serif font
  // written as a fraction of line-height and calculated from the top
  // of the line downwards. (Measured by trial and error.)
  const fontBaseline = 0.83;

  // Start at the top of the box.
  let baseline = 0;

  // 50px font text
  ctx.font = `50px serif`;
  ctx.fillText("Hello World", 0, baseline + fontBaseline * 50);
  baseline += 50;

  // 25px font text
  ctx.font = `25px serif`;
  ctx.fillText("Hello World", 0, baseline + fontBaseline * 25);
  baseline += 25;

  // 12.5px font text
  ctx.font = `12.5px serif`;
  ctx.fillText("Hello World", 0, baseline + fontBaseline * 12.5);
}
```

```
/* HTML is red */

#container
{
  background-color: red;
  position: relative;
  /* Setting a border will mess up scaling calculations. */

  /* Hide canvas overflow (if any) in real code. */
  /* overflow: hidden; */
}

/* Canvas is green */ 

#canvas
{
  background-color: rgba(0,255,0,.8);
  animation: 2s ease-in-out infinite alternate both comparison;
}

/* animate to compare HTML and Canvas renderings */

@keyframes comparison
{
  33% {opacity:1; transform: translate(0,0);}
  100% {opacity:.7; transform: translate(7.5%,15%);}
}

/* hover to pause */

#canvas:hover, #container:hover > #canvas
{
  animation-play-state: paused;
}

/* click to translate Canvas by (1px, 1px) */

#canvas:active
{
  transform: translate(1px,1px) !important;
  animation: none;
}

/* HTML text */

.text
{
  position: absolute;
  color: white;
}

.text:nth-child(1)
{
  top: 0px;
  font-size: 50px;
  line-height: 50px;
}

.text:nth-child(2)
{
  top: 50px;
  font-size: 25px;
  line-height: 25px;
}

.text:nth-child(3)
{
  top: 75px;
  font-size: 12.5px;
  line-height: 12.5px;
}
```

```
<!-- Make the desired dimensions strange to guarantee truncation. -->
<div id="container" style="width: 313.235px; height: 157.122px">
  <!-- Render text in HTML. -->
  <div class="text">Hello World</div>
  <div class="text">Hello World</div>
  <div class="text">Hello World</div>

  <!-- Render text in Canvas. -->
  <canvas id="canvas"></canvas>
</div>

<!-- Interaction instructions. -->
<p>Hover to pause the animation.<br>
Click to translate the green box by (1px, 1px).</p>

<!-- Color key. -->
<p><em style="color:red">red</em> = HTML rendered<br>
<em style="color:green">green</em> = Canvas rendered</p>

<!-- Report pixel ratio. -->
<p>Device pixel ratio: <code id="dpr"></code>
<em>(physical pixels per CSS pixel)</em></p>

<!-- Info. -->
<p>Zoom your browser to re-run the scaling calculations.
(<code>Ctrl+</code> or <code>Ctrl-</code>)</p>
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-12T04:01:39.353

我稍微修改了[canvg](https://github.com/canvg/canvg)下的[MyNameIsKo](https://stackoverflow.com/a/15666143/3045952)代码（SVG 到 Canvas js 库）。我困惑了一段时间，为此花了一些时间。希望这对某人有所帮助。

**HTML**

```
<div id="chart"><canvas></canvas><svg>Your SVG here</svg></div> 
```

**Javascript**

```
window.onload = function() {

var PIXEL_RATIO = (function () {
    var ctx = document.createElement("canvas").getContext("2d"),
        dpr = window.devicePixelRatio || 1,
        bsr = ctx.webkitBackingStorePixelRatio ||
              ctx.mozBackingStorePixelRatio ||
              ctx.msBackingStorePixelRatio ||
              ctx.oBackingStorePixelRatio ||
              ctx.backingStorePixelRatio || 1;

    return dpr / bsr;
})();

setHiDPICanvas = function(canvas, w, h, ratio) {
    if (!ratio) { ratio = PIXEL_RATIO; }
    var can = canvas;
    can.width = w * ratio;
    can.height = h * ratio;
    can.style.width = w + "px";
    can.style.height = h + "px";
    can.getContext("2d").setTransform(ratio, 0, 0, ratio, 0, 0);
}

var svg = document.querySelector('#chart svg'),
    canvas = document.querySelector('#chart canvas');

var svgSize = svg.getBoundingClientRect();
var w = svgSize.width, h = svgSize.height;
setHiDPICanvas(canvas, w, h);

var svgString = (new XMLSerializer).serializeToString(svg);
var ctx = canvas.getContext('2d');
ctx.drawSvg(svgString, 0, 0, w, h);

} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-23T15:24:35.327

对于那些在 reactjs 工作的人，我改编了 MyNameIsKo 的答案，效果很好。这是代码。

```
import React from 'react'

export default class CanvasComponent extends React.Component {
    constructor(props) {
        this.calcRatio = this.calcRatio.bind(this);
    } 

    // Use componentDidMount to draw on the canvas
    componentDidMount() {  
        this.updateChart();
    }

    calcRatio() {
        let ctx = document.createElement("canvas").getContext("2d"),
        dpr = window.devicePixelRatio || 1,
        bsr = ctx.webkitBackingStorePixelRatio ||
          ctx.mozBackingStorePixelRatio ||
          ctx.msBackingStorePixelRatio ||
          ctx.oBackingStorePixelRatio ||
          ctx.backingStorePixelRatio || 1;
        return dpr / bsr;
    }

    // Draw on the canvas
    updateChart() {

        // Adjust resolution
        const ratio = this.calcRatio();
        this.canvas.width = this.props.width * ratio;
        this.canvas.height = this.props.height * ratio;
        this.canvas.style.width = this.props.width + "px";
        this.canvas.style.height = this.props.height + "px";
        this.canvas.getContext("2d").setTransform(ratio, 0, 0, ratio, 0, 0);
        const ctx = this.canvas.getContext('2d');

       // now use ctx to draw on the canvas
    }

    render() {
        return (
            <canvas ref={el=>this.canvas=el} width={this.props.width} height {this.props.height}/>
        )
    }
} 
```

在此示例中，我将画布的宽度和高度作为道具传递。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-30T17:50:27.847

以下代码直接为我工作（而其他代码则没有）：

```
 const myCanvas = document.getElementById("myCanvas");
    const originalHeight = myCanvas.height;
    const originalWidth = myCanvas.width;
    render();
    function render() {
      let dimensions = getObjectFitSize(
        true,
        myCanvas.clientWidth,
        myCanvas.clientHeight,
        myCanvas.width,
        myCanvas.height
      );
      const dpr = window.devicePixelRatio || 1;
      myCanvas.width = dimensions.width * dpr;
      myCanvas.height = dimensions.height * dpr;

      let ctx = myCanvas.getContext("2d");
      let ratio = Math.min(
        myCanvas.clientWidth / originalWidth,
        myCanvas.clientHeight / originalHeight
      );
      ctx.scale(ratio * dpr, ratio * dpr); //adjust this!
    }

    // adapted from: https://www.npmjs.com/package/intrinsic-scale
    function getObjectFitSize(
      contains /* true = contain, false = cover */,
      containerWidth,
      containerHeight,
      width,
      height
    ) {
      var doRatio = width / height;
      var cRatio = containerWidth / containerHeight;
      var targetWidth = 0;
      var targetHeight = 0;
      var test = contains ? doRatio > cRatio : doRatio < cRatio;

      if (test) {
        targetWidth = containerWidth;
        targetHeight = targetWidth / doRatio;
      } else {
        targetHeight = containerHeight;
        targetWidth = targetHeight * doRatio;
      }

      return {
        width: targetWidth,
        height: targetHeight,
        x: (containerWidth - targetWidth) / 10,
        y: (containerHeight - targetHeight) / 10
      };
    } 
```

该实现改编自[这篇](https://medium.com/wdstack/fixing-html5-2d-canvas-blur-8ebe27db07da)Medium 帖子。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-11T14:16:50.347

对我来说，不仅是图像，而且文字质量也很差。视网膜/非视网膜显示器最简单​​的跨浏览器工作解决方案是将图像渲染为预期大小的两倍，并像这个人建议的那样缩放画布上下文：[https ://stackoverflow.com/a/53921030/4837965](https://stackoverflow.com/a/53921030/4837965)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-11T21:36:06.357

对我来说，只有不同的“像素完美”技术的组合有助于存档结果：

1.  按照@MyNameIsKo 的建议获取和缩放像素比率。

    **pixelRatio = window.devicePixelRatio/ctx.backingStorePixelRatio**

2.  在调整大小时缩放画布（避免画布默认拉伸缩放）。

3.  将 lineWidth 与 pixelRatio 相乘以找到正确的“真实”像素线粗细：

    **context.lineWidth = 厚度 * pixelRatio;**

4.  检查线的粗细是奇数还是偶数。将一半的 pixelRatio 添加到奇数粗细值的行位置。

    **x = x + 像素比/2；**

奇数线将放置在像素的中间。上面的行用于移动它一点点。

```
function getPixelRatio(context) {
  dpr = window.devicePixelRatio || 1,
    bsr = context.webkitBackingStorePixelRatio ||
    context.mozBackingStorePixelRatio ||
    context.msBackingStorePixelRatio ||
    context.oBackingStorePixelRatio ||
    context.backingStorePixelRatio || 1;

  return dpr / bsr;
}

var canvas = document.getElementById('canvas');
var context = canvas.getContext("2d");
var pixelRatio = getPixelRatio(context);
var initialWidth = canvas.clientWidth * pixelRatio;
var initialHeight = canvas.clientHeight * pixelRatio;

window.addEventListener('resize', function(args) {
  rescale();
  redraw();
}, false);

function rescale() {
  var width = initialWidth * pixelRatio;
  var height = initialHeight * pixelRatio;
  if (width != context.canvas.width)
    context.canvas.width = width;
  if (height != context.canvas.height)
    context.canvas.height = height;

  context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
}

function pixelPerfectLine(x) {

  context.save();
  context.beginPath();
  thickness = 1;
  // Multiple your stroke thickness  by a pixel ratio!
  context.lineWidth = thickness * pixelRatio;

  context.strokeStyle = "Black";
  context.moveTo(getSharpPixel(thickness, x), getSharpPixel(thickness, 0));
  context.lineTo(getSharpPixel(thickness, x), getSharpPixel(thickness, 200));
  context.stroke();
  context.restore();
}

function pixelPerfectRectangle(x, y, w, h, thickness, useDash) {
  context.save();
  // Pixel perfect rectange:
  context.beginPath();

  // Multiple your stroke thickness by a pixel ratio!
  context.lineWidth = thickness * pixelRatio;
  context.strokeStyle = "Red";
  if (useDash) {
    context.setLineDash([4]);
  }
  // use sharp x,y and integer w,h!
  context.strokeRect(
    getSharpPixel(thickness, x),
    getSharpPixel(thickness, y),
    Math.floor(w),
    Math.floor(h));
  context.restore();
}

function redraw() {
  context.clearRect(0, 0, canvas.width, canvas.height);
  pixelPerfectLine(50);
  pixelPerfectLine(120);
  pixelPerfectLine(122);
  pixelPerfectLine(130);
  pixelPerfectLine(132);
  pixelPerfectRectangle();
  pixelPerfectRectangle(10, 11, 200.3, 443.2, 1, false);
  pixelPerfectRectangle(41, 42, 150.3, 443.2, 1, true);
  pixelPerfectRectangle(102, 100, 150.3, 243.2, 2, true);
}

function getSharpPixel(thickness, pos) {

  if (thickness % 2 == 0) {
    return pos;
  }
  return pos + pixelRatio / 2;

}

rescale();
redraw();
```

```
canvas {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  width: 100vh;
  height: 100vh;
}
```

```
<canvas id="canvas"></canvas>
```

Resize 事件不会在 snipped 中触发，因此您可以尝试[github上的文件](https://github.com/ievgennaida/js-animation-timeline-control/blob/master/demo/pixel-perfect-example.html)

# sql - SQL ContainsTable 为精确匹配返回低排名

> ID：15661341
> 
> 赞同：2
> 
> 时间：2013-03-27T14:26:02.087
> 
> 标签：sql, sql-server-2008, search, full-text-search, containstable

对于名为“带有升级赛车框架的红色自行车”的产品，包含表搜索返回以下内容：

```
containstable(tbl, col, '"red bike"') Rank: 100
containstable(tbl, col, '"red bike with upgraded racing frame"') Rank: 255 
```

我的问题是：

*   为什么第二次搜索返回 255 而不是 1000 - 我应该使用不是 containstable 的东西吗？
*   有没有更好的方法来实现我的最终结果？

我正在寻找的最终结果是一种快速搜索产品名称的方法。我选择使用 containstable 是因为我的测试表明它比执行 'tbl.col.field = "" 或 tbl.col.field like '%%'' 快得多，还因为我希望能够进行全文搜索除了部分和完全匹配搜索。

产品名称结果正在与其他结果聚合 - 例如，当用户运行搜索时，产品名称和产品描述都被搜索并组合结果。出于这个原因，我希望确切的产品名称匹配排名最高，但目前，正在发生的情况是，有时描述全文匹配会超过确切的产品名称匹配。

我试图避免为每种搜索类型和硬编码排名值编写多个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:36:40.340

我不相信无论如何要为具有`CONTAINSTABLE`您想要的全文搜索结果的列指定加权值。

您可以通过在各个列上使用来实现您自己的自定义“排名”系统`FREETEXTTABLE`，然后将结果与排名结果的自定义加权值联合起来，从而为“产品名称”提供更高的优先级作为解决方法。

# javascript - 检查事件目标是否为超链接

> ID：15661343
> 
> 赞同：54
> 
> 时间：2013-03-27T14:26:09.840
> 
> 标签：javascript, html

我里面有一个大 div，里面有更小的 div、achor 标签和其他元素。我程序中的每个大 div 都绑定到“mousedown”事件，并且在 onMouseDown 处理程序中，我基本上检查了 event.target。

如果用户单击作为超链接的项目，我想检查 event.target 是否是超链接，如果 event.target 是超链接，则导航到该链接。怎么可能呢？

这是 divsa 和元素的结构。

```
<div class="camp-name">
    <span class="btnCampaign"><div class=""></div></span>
    <span class="campaign-name">
       <a href="http://www.google.com">Some Link here</a>
    </span>
</div>
<div class="campaign-name-sub">
   <span class="campaign-accountname">Some Text here</span>
   <span class="seprator">|</span>
   <span class="brandname">Some Text here</span>
</div> 
```

JS

```
var label = label.createElement("DIV");
label.innerHMTL = src //src is the above html that is seen here
    Plugin.addEventListener(label, "mousedown", params.onMouseDown);

Plugin.onMouseDown() = function(event) {
var target = (event.currentTarget) ? event.currentTarget : event.srcElement;
        if (target.tagName.toLowerCase() === "a" && target !== undefined) {
            console.log(target.href);
            Plugin.stopPropagation(event);
        }
}; 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-27T14:34:19.017

你应该通过它

```
if(event.target.tagName.toLowerCase() === 'a')
{
    event.target.href; //this is the url where the anchor tag points to.
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-05-31T09:42:49.813

`tagName`正如@parthik-gosar 所说，您可以检查该属性。另一种方法是使用`instanceof`运算符检查元素类（超链接类型为`HTMLAnchorElement`）：

```
if (event.target instanceof HTMLAnchorElement) {
  console.log(event.target.href);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:27:11.417

我尝试修改您的代码，代码存在多个问题并更正了它们。

这是 JavaScript 部分

```
var src = '<div class="camp-name"><span class="btnCampaign"><div class=""></div></span><span class="campaign-name"><a href="http://www.google.com">Some Link here</a></span></div>';

var label = document.createElement('DIV')
label.innerHTML = src;
var topdiv = document.getElementById("test");
console.log(label)
topdiv.appendChild(label);

label.addEventListener('click', test, false);

function test(event) {
    if(event.target.tagName.toLowerCase() === 'a') {
        var href = event.target.href;
        console.log(href);
    }
    window.location = href;
}; 
```

这是它的 HTML 部分

```
<div id="test">
 test
</div> 
```

我在 jsfiddle [http://jsfiddle.net/KDejm/1/中做到了这一点](http://jsfiddle.net/KDejm/1/)

如果通风口被正确捕获，请告诉我。

# c# - 如何重新考虑此 c# 树填充方法以避免使用递归

> ID：15661344
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:26:21.417
> 
> 标签：c#, .net

下面的代码有效，但我想避免使用递归。*ListOfAllNodes*是数据库中所有节点的平面列表，其中包含 Id 和 ParentId 字段。

```
private Node FillChildNodes(Node node)
{
   foreach (var childNode in ListOfAllNodes.Where(i => i.ParentId == node.Id).OrderBy(x => x.Name))
   {
           node.Children.Add(childNode);
           FillChildNodes(childNode);
   }
   return node;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:33:07.540

这是将平面列表解析为字典的代码：

```
Dictionary<IComparable, List<Node>> nodes = new Dictionary<IComparable, List<Node>>();
Node parentNode = null;
foreach(var node in ListOfAllNodes)
{
    if(node.ParentId == null)
    {
        parentNode = node;
    }else
    {
        if(!nodes.ContainsKey(node.ParentId)){
           nodes.Add(node.ParentId, new List<Node>());
        }
        nodes[node.ParentId].Add(node);
    }
} 
```

上面的代码假定所有节点都有一个有效的（即非空的）ParentId，除了一个节点，它的`null`ParentId 将是顶部节点。然后你可以使用字典作为`FillChildNodes`函数的参数：

```
private Node FillChildNodes(Node node, Dictionary<IComparable, List<Node>> dict)
{
   foreach (var childNode in dict[node.Id].OrderBy(x => x.Name))
   {
       node.Children.Add(childNode);
       FillChildNodes(childNode);
   }
   return node;
}

// call this on the variables build above:
FillChildNodes(parentNode, nodes); 
```

# ios - 更改视图时 pullToRefresh 崩溃

> ID：15661345
> 
> 赞同：0
> 
> 时间：2013-03-27T14:26:24.690
> 
> 标签：ios, objective-c

当我在两个视图之间切换时，在 4-5 更改我的应用程序崩溃时，我使用僵尸来找出对象被调用，它是

```
[UIViewController _setViewAppearState:isAnimating:] 
```

我在第一个视图中使用 SVPullToRefresh 库我有一个轮播，第二个是 SVPullToRefreshView

UIViewController 与它一样通用我无法确定崩溃的原因

这是xcode在崩溃时显示的方法

```
- (void)addPullToRefreshWithActionHandler:(void (^)(void))actionHandler {
LogDebug(@"START - init pull to refresh");

if(!self.pullToRefreshView) {
    LogDebug(@"Pull to refresh view is nil, we create it");
    SVPullToRefreshView *view = [[SVPullToRefreshView alloc] initWithFrame:CGRectMake(0, -SVPullToRefreshViewHeight, self.bounds.size.width, SVPullToRefreshViewHeight)];
    view.pullToRefreshActionHandler = actionHandler;
    view.scrollView = self;
    [self addSubview:view];

    view.originalTopInset = self.contentInset.top;

    self.pullToRefreshView = view;
    self.showsPullToRefresh = YES;
} 
```

}

这是父调用者

```
- (void) viewWillAppear:(BOOL)animated{
[super viewWillAppear:animated];

__block BlogViewController *blockSelf = self;
[self.articleScrollView addPullToRefreshWithActionHandler:^{
    LogDebug(@"start refresh");
    [blockSelf refresh];
    [blockSelf.articleScrollView.pullToRefreshView stopAnimating];
}]; 
```

}

编辑：如果我删除测试`(!self.pullToRefreshView)`它可以工作，但是分配会堆积起来

# javascript - 如何更新 favicon、vimeo 样式

> ID：15661346
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:26:26.527
> 
> 标签：javascript, html, css, vimeo, favicon

Vimeo 有这个漂亮的图标，在上传视频时会发生变化，它以饼图样式图标显示上传内容的数量。有人能指出我如何创造这样一个东西的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:33:28.913

只需`<link>`通过普通的 DOM 方法将其更改为 favicon。

看[一个活生生的例子](http://jsbin.com/egaqor/1)：

```
<link rel=icon href="http://www.bluejag.co.uk/favicon.ico">
<!-- ... -->
<script>
function changeFav() {
  document.querySelector('link[rel=icon]').href = "http://www.solaripedia.com/favicon.ico";
}
document.querySelector('input').addEventListener('click', changeFav);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:31:20.550

是的，[在这里查看](https://github.com/Dlom/favicon.js?utm_source=javascriptweekly&utm_medium=email)和[演示](http://dlom.github.com/favicon.js/#)预览。

# xpages - 如何在 Xpages 中扩展 oneuiv3？

> ID：15661347
> 
> 赞同：1
> 
> 时间：2013-03-27T14:26:28.560
> 
> 标签：xpages, xpages-ssjs

我尝试将新的 oneuiv3.0.2 样式应用于我的应用程序，但失败了。
我的主题包含这个：

```
<theme extends="oneuiv3.0.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="platform:/plugin/com.ibm.designer.domino.stylekits/schema/stylekit.xsd"> 
```

但没有应用样式。我可以在调试器中看到 css 文件已加载。

如果我改回：

```
<theme extends="oneuiv2.1_orange" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="platform:/plugin/com.ibm.designer.domino.stylekits/schema/stylekit.xsd"> 
```

它像以前一样工作。

如果我将 xsp 属性中的应用程序主题更改为“oneuiv3.0.2”，那么我的应用程序将获得新的“黑色”，但是我无法获得我在主题中所做的怪癖。

请就如何使用主题和覆盖 oneuiv3 提出建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:02:29.203

尝试使用以下内容创建一个简单的主题：

```
<theme extends="oneuiv3.0.2" /> 
```

我有一个非常简单的应用程序，它使用这样的主题并且它可以工作。我还可以在 OneUI v1、OneUI v2 和 OneUI v3 之间切换：http: [//notesnet.dk/phlconsult/domino9.nsf](http://notesnet.dk/phlconsult/domino9.nsf)

# c# - 在 C#.net 应用程序中创建窗口句柄时出错

> ID：15661354
> 
> 赞同：0
> 
> 时间：2013-03-27T14:26:48.230
> 
> 标签：c#, memory-leaks

项目简介：

我是一个相对初级的程序员。我的应用程序是`C#.net`使用`VS2008`.net 3.5 编写的，它是一个相当大的程序（按照我的标准），大约有 200 个表单 + 30 个类和 50K 行代码。程序的一个部分从文本文件中导入数据，计算一堆东西，然后将结果写入 Access 数据库。

导入过程通常可以运行 20 分钟或更长时间，具体取决于文本文件中的行数。最终，程序崩溃了，我得到“错误创建窗口句柄错误 - 总是在我的代码中的不同位置。当它运行时，它似乎也在不断变慢。（可能是分页问题？）我的操作系统是带 SP3 的 XP , 32 bit, 3Gig RAM if that matter. 这个问题也发生在我的 W7 64 位机器上，它有 4Gig 的 RAM。

我已经阅读了该错误并与任务管理器进行了一些侦探工作，显然我遇到了内存泄漏。这是我收集的一些数据。

```
startup - memory usage = 48M / Handles = 428 / Threads = 17 / User Objects = 111

1 minute memory usage  = 65M / Handles = 520 / Threads = 22 / User Objects = 523

2 minutes memory usage = 81M / Handles = 520 / Threads = 19 / User Objects = 952

3 minutes memory sage = 98M / Handles = 510 / Threads = 19 / User Objects = 1359

4 minutes memory usage = 113M / Handles = 510 / Threads = 18 / User Objects = 1766 
```

这种情况一直持续到程序崩溃..

从网上寻找答案。我期待看到导致问题的句柄数量增加。看来问题是用户对象的数量正在耗尽我的内存，也许这最终导致了崩溃？崩溃发生时，内存使用量一般在450M到600M之间。

我尝试在数据处理过程中多次调用的类之一中添加一些 .Dispose() 代码，但这没有效果。（也许是因为我没有做对......）

1.  越来越多的对象/内存使用量是否会导致问题？
2.  如何找出正在增长的用户对象（类或表单？）？
3.  一旦我找到它，我该如何修复它？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:56:43.703

我建议使用内存分析器，例如 ANTS Memory Profiler。我已经非常成功地使用它来准确追踪哪些对象正在增长。

他们有免费试用版和[入门](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/walkthrough)指南。他们还有一些很好的[技术论文](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/technical-papers/)，可以更好地理解 .NET 内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:37:08.593

如果您使用主窗体-子窗体（或 mdi 窗体）结构并注册到主窗体事件，您可能会导致关闭的子窗口永远存在。

您还可以使用内存分析器来查看哪些对象被过度创建。

# android - 从 String Android 中获取 JSON 对象

> ID：15661362
> 
> 赞同：0
> 
> 时间：2013-03-27T14:26:54.463
> 
> 标签：android, json

我正在尝试获取 DATA 数组中的信息，但一无所获。我正在从 Dark Sky API 解析这些数据：

```
hourly: {
summary: "Mostly cloudy later this morning.",
icon: "partly-cloudy-day",
data: [
{
time: 1364389200,
summary: "Partly Cloudy",
icon: "partly-cloudy-night",
precipIntensity: 0,
temperature: 29.8,
windSpeed: 2.44,
windBearing: 60,
cloudCover: 0.41,
humidity: 0.88,
pressure: 831.54,
visibility: 6.15
},
{
time: 1364392800,
summary: "Partly Cloudy",
icon: "partly-cloudy-day",
precipIntensity: 0,
temperature: 29.26,
windSpeed: 2.95,
windBearing: 45,
cloudCover: 0.36,
humidity: 0.88,
pressure: 832.05,
visibility: 6.14
}..................} 
```

我想循环遍历数据数组。

我通过这样做获得每小时数据：

```
String hourly = json.getString("hourly"); 
```

但是，我没有从每小时字符串中获取数据数组。我错过了什么？

我在正确的道路上吗：

```
 JSONObject h = json.getJSONObject("hourly");
    String d = json.getString("data");

JSONArray a = h.getJSONArray("data");

                for(int i = 0; i < a.length(); i++){
                    // Pulling items from the array
                    String s = h.getString("summary");
                    String t = h.getString("temperature");
                    aq.id(R.id.tv).text("Summary: " + s + "Temp: " + t);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:29:28.343

`JSONArray`正如您自己提到的那样，您需要使用该数据`array`在您的`JSONObject`.

```
JSONArray dataArray = hourlyObj.getJSONArray("data"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:34:16.250

您`Hourly`是一个 JSONObject 并且在其中`JSONArray`使用 org.json API 命名数据，您可以使用以下代码轻松循环抛出它们：

```
 JSONObject hourly = new JSONObject(json.getString("hourly"));
   JSONArray array = hourly.getJSONArray("data");
   for (int i=0; i< array.length(); i++){
       JSONObject obj = data.getJSONObject(i);
         //do whatever you want with your data 
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:32:45.713

用于`JSONArray`获取`data`值和`JSONObject`获取`hourly`.

**每小时对象**

```
JSONObject hourlyObj = json.getJSONObject("hourly"); 
```

**数据数组**

```
JSONArray yourdataArray = hourlyObj.getJSONArray("data"); 
// loop it
 for(int i=0;i<jsonArray.length();i++){  
         JSONObject json_data = jsonArray.getJSONObject(i);
         String time = json_data.getString("time");
         // and so on 
     } 
```

您将获得数据中的所有值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:36:51.403

这是一个可以帮助您的示例片段。

```
JSONObject jObj = new JSONObject(results);
                JSONArray albums = jObj.getJSONArray("pickups");

                for (int i = 0; i < albums.length(); i++) {
                    JSONObject c = albums.getJSONObject(i);
                    String  id = c.getString("id");

                    Record objRecord=new Record();
                    objRecord.setId(c.getString("id"));
                    objRecord.setName(c.getString("name"));
                    objRecord.setNumber(c.getString("number"));
                    objRecord.setTime(c.getString("time"));

                    PickupList.arrayList.add(objRecord);

                } 
```

# java - 加速度计+按钮

> ID：15661363
> 
> 赞同：0
> 
> 时间：2013-03-27T14:26:55.193
> 
> 标签：java, android, button, accelerometer

大家早上好！

我有以下问题：我有传感器加速度计并添加了一个按钮，可以帮助我输入另一个意图，但不知道为什么这个按钮不起作用！！！有什么建议吗？谢谢你的帮助！！

程序是这样的：

```
package com.dani;

import android.app.Activity;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class FM extends Activity implements SensorEventListener,OnClickListener{
private static final double nbElements = 30;
private SensorManager sensorManager;
private Sensor accelerometer;
Button boton1;

   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.fm);
      boton1 = (Button) findViewById(R.id.button1);

      sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        boolean accelSupported = sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),  
     SensorManager.SENSOR_DELAY_FASTEST);
        accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        if (!accelSupported) {
            sensorManager.unregisterListener(this, accelerometer);
            ((TextView) findViewById(R.id.textView1)).setText("Accelerometer not
   detected");
        }

        }  

@Override
public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}
long now = 0;
long time = 0;
int temp = 0;

public void onSensorChanged(SensorEvent event) {
    long tS;
    // only if the event is from the accelerometer
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

        tS = event.timestamp;

        if (now != 0) {
            temp++;
            if (temp == nbElements) {
                time = tS - now;
                ((TextView) findViewById(R.id.textView1)).setText("Frecuencia : " + 
 (nbElements * 1000000000 / time)
                        + " Hz");
                temp = 0;
            }
        }
        // To set up now on the first event and do not change it while we do not have  
 "nbElements" events
        if (temp == 0) {
            now = tS;
        }
    }

boton1.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    startActivity( new Intent(FM.this,PruebaActivity.class));

 }
 });
}

public void onClickQuit(View v) {
finish();
}

@Override
public void onClick(View v) {
// TODO Auto-generated method stub

}

}

` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:23:02.340

你有2个onClick方法，不实现onClickListener，所以试试你的代码：

```
package com.dani;

import android.app.Activity;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class FM extends Activity implements SensorEventListener {
private static final double nbElements = 30;
private SensorManager sensorManager;
private Sensor accelerometer;
Button boton1;

   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.fm);
      boton1 = (Button) findViewById(R.id.button1);

      sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
      boolean accelSupported = sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),  
      SensorManager.SENSOR_DELAY_FASTEST);
        accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        if (!accelSupported) {
            sensorManager.unregisterListener(this, accelerometer);
            ((TextView) findViewById(R.id.textView1)).setText("Accelerometer not
   detected");
        }

        }  

@Override
public void onAccuracyChanged(Sensor arg0, int arg1) {
    // TODO Auto-generated method stub

}
long now = 0;
long time = 0;
int temp = 0;

public void onSensorChanged(SensorEvent event) {
    long tS;
    // only if the event is from the accelerometer
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

        tS = event.timestamp;

        if (now != 0) {
            temp++;
            if (temp == nbElements) {
                time = tS - now;
                ((TextView) findViewById(R.id.textView1)).setText("Frecuencia : " + 
 (nbElements * 1000000000 / time)
                        + " Hz");
                temp = 0;
            }
        }
        // To set up now on the first event and do not change it while we do not have  
 "nbElements" events
        if (temp == 0) {
            now = tS;
        }
    }

boton1.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent(FM.this, PruebaActivity.class);
    startActivity(i);   
 }
 });
}

public void onClickQuit(View v) {
finish();
}

} 
```

AndroidManifest.xml 添加这一行（而不是 com.example.stackoverflowtesting 是你的包名，我认为它的 com.dani）：

```
 <activity
        android:name="com.example.stackoverflowtesting.PruebaActivity"> 
    </activity> 
```

并在 PruebaActivity 中执行此操作（例如，只需设置与第一个活动相同的视图进行测试，稍后将其更改为您想要的任何内容）

```
public class PruebaActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fm);
    }

} 
```

这应该工作！

# emacs - 在新的 Emacs 24.3 中调整术语面

> ID：15661372
> 
> 赞同：13
> 
> 时间：2013-03-27T14:27:26.963
> 
> 标签：emacs, emacs-faces

如何`term`在新的 Emacs 中调整面以获得与`ansi-term-color-vector`.

Emacs 24.3中的[新特性](http://www.masteringemacs.org/articles/2013/03/11/whats-new-emacs-24-3/)之一似乎是它改进了控制`term`缓冲区面的机制，即：

> 变量`term-default-fg-color`和`term-default-bg-color`现在已弃用，取而代之的是可定制的 face `term`。
> 
> `term-color-COLOR`您可以通过自定义相应的,`term-color-underline` 和`term-color-bold`面来自定义如何显示 ANSI 终端颜色和样式。

来自 Mastering Emacs 的 Mickey[评论如下](http://www.masteringemacs.org/articles/2013/03/11/whats-new-emacs-24-3/)：

> 如果像我一样，您自定义`ansi-color-names-vector`更改默认术语颜色，我建议您现在切换到使用面孔。这里的好消息是，您可以（应该希望）更改的不仅仅是每种 ANSI 颜色的颜色：没有什么能阻止您为某些颜色强制使用不同的字体

像 Mickey 一样，我也`ansi-color-names-vector`用来确保`term`缓冲区的颜色在深色主题上看起来很好（例如`tango-dark`）

```
(setq ansi-term-color-vector [unspecified “black” “red3” “lime green” “yellow3” “DeepSkyBlue?3” “magenta3” “cyan3” “white”]) 
```

但这现在会导致错误：

```
"error in process filter: Invalid face; unspecified" 
```

为了尝试使用新面孔`term`，当我转到 时`M-x describe-face term`，我看到以下内容：

```
[] Font Family
[] Font Foundry
[] Width
[] Height
[] Weight
[] Slant
[] Underline
[] Overline
[] Strike-through
[] Box around text
[] Inverse-video
[] Foreground
[] Background
[] Stipple
[x]  Inherit 
```

但是如何调整这些设置以获得与使用相同的效果`ansi-term-color-vector`？

## 更新

我仍然无法修复颜色。这是我得到的菜单`M-x customize-theme tango-dark`：

![在此处输入图像描述](../Images/26bab9545fc62c81d639c27976a6295e.png)

这是终端中难以看到的颜色/面之一的示例：

                              ![在此处输入图像描述](../Images/574cc6cecd53ea84cba44f3151e94550.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-02T23:54:32.913

这在 Emacs 24.3.1 中对我有用，可以设置 term 和 ansi-term 的颜色。只需将颜色更改为您喜欢的值（相应调整背景）。

```
;; term
(defface term-color-black 
  '((t (:foreground "#3f3f3f" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-red
  '((t (:foreground "#cc9393" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-green
  '((t (:foreground "#7f9f7f" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-yellow
  '((t (:foreground "#f0dfaf" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-blue 
  '((t (:foreground "#6d85ba" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-magenta 
  '((t (:foreground "#dc8cc3" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-cyan
  '((t (:foreground "#93e0e3" :background "#272822"))) 
  "Unhelpful docstring.")
(defface term-color-white
  '((t (:foreground "#dcdccc" :background "#272822"))) 
  "Unhelpful docstring.")
'(term-default-fg-color ((t (:inherit term-color-white))))
'(term-default-bg-color ((t (:inherit term-color-black))))

;; ansi-term colors
(setq ansi-term-color-vector
  [term term-color-black term-color-red term-color-green term-color-yellow 
    term-color-blue term-color-magenta term-color-cyan term-color-white]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T15:06:41.397

在 Emacs 24.3 中，您需要调整以下面：

```
 ;; term
   `(term-color-black ((t (:foreground ,zenburn-bg
                                       :background ,zenburn-bg-1))))
   `(term-color-red ((t (:foreground ,zenburn-red-2
                                       :background ,zenburn-red-4))))
   `(term-color-green ((t (:foreground ,zenburn-green
                                       :background ,zenburn-green+2))))
   `(term-color-yellow ((t (:foreground ,zenburn-orange
                                       :background ,zenburn-yellow))))
   `(term-color-blue ((t (:foreground ,zenburn-blue-1
                                      :background ,zenburn-blue-4))))
   `(term-color-magenta ((t (:foreground ,zenburn-magenta
                                         :background ,zenburn-red))))
   `(term-color-cyan ((t (:foreground ,zenburn-cyan
                                       :background ,zenburn-blue))))
   `(term-color-white ((t (:foreground ,zenburn-fg
                                       :background ,zenburn-fg-1))))
   '(term-default-fg-color ((t (:inherit term-color-white))))
   '(term-default-bg-color ((t (:inherit term-color-black)))) 
```

此代码来自[Zenburn](https://github.com/bbatsov/zenburn-emacs)的最新版本。个人觉得自定义人脸的新方法是对使用模糊向量的改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-17T08:33:01.300

我建议`M-x` `customize-group` `RET` `term` `RET`
作为定制这些颜色的最简单的切入点。

# c# - 打印到新页面的转义序列

> ID：15661375
> 
> 赞同：3
> 
> 时间：2013-03-27T14:27:43.713
> 
> 标签：c#, wpf, flowdocument

我正在尝试使用 Flow 文档打印一个很长的字符串。

我正在生成这样的字符串：

```
foreach (item listitem in mylist)
{
    string aa += listitem.firststring + " " + listitem.secondstring + "\n";
    string aa += "---------------------------\n";
} 
```

由于 ，我将每个值打印到新行`\n`，但我需要将每个列表项打印到新页面。

在 " 结尾我需要什么转义序列`string aa+="---------------------------\n";"`来实现这一点？

这是我用于打印的代码

```
if (printDialog.ShowDialog() == true)
{
   // Create a FlowDocument dynamically. 
   FlowDocument doc = CreateFlowDocument(aa );
   doc.Name = "FlowDoc";
   doc.FontWeight = FontWeights.Normal;
   doc.PageHeight = printDialog.PrintableAreaHeight;
   doc.PageWidth = printDialog.PrintableAreaWidth;
   doc.PagePadding = new Thickness(25);
   IDocumentPaginatorSource idpSource = doc;
   printDialog.PrintDocument(idpSource.DocumentPaginator, "Printing");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:30:44.873

我认为您正在寻找[分页符](http://en.wikipedia.org/wiki/Page_break) `\f`

```
string aa += "---------------------------\f"; 
```

# java - 在非本地应用程序中将号码添加到 iPhone 或 Android 手机联系人列表

> ID：15661378
> 
> 赞同：0
> 
> 时间：2013-03-27T14:27:54.567
> 
> 标签：java, javascript, android, iphone, html

我需要以编程方式在 iPhone 或 Android 手机的联系人列表中添加一个号码。我正在用 Java 编写代码，并且还使用 javascript 和 HTML5。到目前为止，我找到的任何解决方案都是针对本机应用程序的。有没有人有任何可以在非本机应用程序中使用的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:51:35.217

iPhone 和 Android 浏览器无法访问各自的联系人列表。您将不得不使用本机应用程序来完成此操作。

# javascript - 函数没有正确地将数据从控制台日志中的对象拆分出来，但显示为锚点？

> ID：15661379
> 
> 赞同：1
> 
> 时间：2013-03-27T14:27:55.067
> 
> 标签：javascript, jquery, html, jquery-mobile, javascript-objects

似乎我的函数在单击后无法正确显示控制台日志中的名称，因为我正在尝试正确实现。它给了我这里显示的这个未定义的错误： ![在此处输入图像描述](../Images/6cb418ca52cb105e920040cbedc7d4af.png)

但是，它出错的代码 "response.data[i]" 正确显示在锚标记的 html 端，如代码（来自下面的链接）和此屏幕截图所示：

![在此处输入图像描述](../Images/3522bba987f07406f2f673145654e345.png)

那么，当单击以拆分控制台日志中的名称时，它是如何未定义的，但在显示时显然可以工作？还有 console.log(response.data); 命令清楚地显示 response.data ，如下所示：

![在此处输入图像描述](../Images/0cb53a86f9aa332118a14d61ed7c954a.png)

因此，我只是不知道如何解决此问题以在单击后正确显示控制台日志中的名称，无论是 2 字名称还是 3 字名称。

代码：

```
function getGroupWall() {
    $("#groupUL").html("");
    FB.api('/421727124532461/feed', 'get', function(response){
        console.log(response.data);
        for (i=10, j=response.data.length; i<=j; i++) {
            function splitName(txt){
                var myString = txt;

                var mySplitResult = myString.split(" ");

                console.log("The first element is " + mySplitResult[0]); 
                console.log("<br /> The second element is  " + mySplitResult[1]); 
                console.log("<br /> The third element is  " + mySplitResult[2]); 

            };
            $("#groupUL").append("<li>" + "<h4>Item Description:</h4> " + response.data[i].message + "<br /> " + "<h2>Posted By:</h2> <a href='#' id='splitNames'>" + response.data[i].from.name + "</a>" + "<br />"+ "<h4># of Replys: </h4>" + response.data[i].comments.count + "<br />" +  "<a href='" + response.data[i].link + "' target='new' style='text-align:right;'>(external url)</a>" + "<br /> " + "<img src='"+response.data[i].picture+"'>" + "</li><br />");
            $("#splitNames").click(function(){ splitName(response.data[i].from.name) });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:35:33.130

这是一个典型的闭包问题。

的值`i`将是`response.data.length`处理`click`程序触发的时间。

您必须像这样**绑定**值`i`：

```
$("#splitNames").click((function (i) { // extra "(" indicating immediate invocation
    // return an anonymous function that has a value for "i" in it's scope
    return function (event) { // event is the click event, or whatever is usually passed to it
        splitName(response.data[i].from.name)
    }
}(i))); // immediate invocation to bind "i" 
```

你也可以这样做：

```
$("#splitNames").click((function (item) {
    return function (event) {
        splitName(item.from.name)
    }
}(response.data[i]))); 
```

我希望这可以帮助您了解闭包的工作原理。

# css - @font-face 仿粗体 ie7-ie8

> ID：15661380
> 
> 赞同：0
> 
> 时间：2013-03-27T14:27:58.083
> 
> 标签：css, internet-explorer-8, internet-explorer-7, font-face, webfonts

我一直在 IE7-8 中使用粗体和斜体。我已经阅读了多篇关于此的文章，但它们都针对谷歌网络字体。我主持我自己的。请参阅此屏幕截图示例：

![在此处输入图像描述](../Images/aa538ea6731a21fd03522fbabf0d9bb0.png)

以下是我编写样式声明的方式：

```
@font-face{
    font-family:"myfont";
    src:url("font.eot");
    src:url("font.eot?#iefix") format("embedded-opentype"),
        url("font.woff") format("woff"),
        url("font.ttf") format("truetype"),
        url("font.svg#a89d6ad1-a04f-4a8f-b140-e55478dbea80") format("svg");
    font-weight:normal;
    font-style:normal;
}
@font-face{
    font-family:"myfont";
    src:url("bold.eot");
    src:url('bold.eot?#iefix') format('embedded-opentype'),
        url("bold.woff") format("woff"),
        url("bold.ttf") format("truetype"),
        url("bold.svg#ed104d8c-7f39-4e8b-90a9-4076be06b857") format("svg");
    font-style:normal;
    font-weight:bold;
} 
```

它们在 IE9 和 FF/webkit 中都可以正常工作，但无论我做什么，IE7-8 都会显示人造粗体。有什么我想念的吗？

（我还在我的代码中添加了粗斜体和斜体，但在这里省略了它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T06:57:53.910

我可以解决这个问题的唯一可靠方法是使用 IE 并为粗体声明一个不同的 @font-face 名称。保留 CSS3 解决方案（就像您发布的那样），但添加一个具有不同名称的粗体的附加声明。使用您的示例，它可能看起来像：

```
/* THESE FIRST TWO ARE LEFT THE SAME */
@font-face{
    font-family:"myfont";
    src:url("font.eot");
    src:url("font.eot?#iefix") format("embedded-opentype"),
        url("font.woff") format("woff"),
        url("font.ttf") format("truetype"),
        url("font.svg#a89d6ad1-a04f-4a8f-b140-e55478dbea80") format("svg");
    font-weight:normal;
    font-style:normal;
}
@font-face{
    font-family:"myfont";
    src:url("bold.eot");
    src:url('bold.eot?#iefix') format('embedded-opentype'),
        url("bold.woff") format("woff"),
        url("bold.ttf") format("truetype"),
        url("bold.svg#ed104d8c-7f39-4e8b-90a9-4076be06b857") format("svg");
    font-style:normal;
    font-weight:bold;
}
/* SAME AS THE ABOVE BOLD FAMILY, BUT WITH A NEW NAME AND NO font-weight */
@font-face{
    font-family:"myfont-bold";
    src:url("bold.eot");
    src:url('bold.eot?#iefix') format('embedded-opentype'),
        url("bold.woff") format("woff"),
        url("bold.ttf") format("truetype"),
        url("bold.svg#ed104d8c-7f39-4e8b-90a9-4076be06b857") format("svg");
} 
```

在这里，我放弃了“font-weight: bold”，因为在这种情况下，这会使字体加粗。

然后，**在 IE 6-8 CSS 文件中**添加如下内容：

```
b, strong, h1, h2, h3, h4, h5, h6, #top_navigation {
    font-family: 'myfont-bold', 'Arial Bold', Arial, times;
    font-weight: normal !important;
} 
```

将您想要加粗的任何内容添加到列表中，并将“Arial Bold 等”替换为足够接近备份的其他类似字体。唯一的问题是如果字体没有加载，这些东西会有正常的重量。我认为这是一个值得冒的风险。

这是一个很好的来源，更详细地解释了这个问题：[在 IE 8 及以下版本中消除 CSS3 字体上的仿斜体和仿粗体](http://itsravenous.com/blog/banishing-faux-italic-and-faux-bold--on-css3-fonts-in-IE-8-and-below)

祝你好运！

# ios - 使用 AFNetworking 登录 Instapaper

> ID：15661381
> 
> 赞同：0
> 
> 时间：2013-03-27T14:28:02.377
> 
> 标签：ios, objective-c, ios5, ios6, afnetworking

如果我想在用户将用户名和密码放在 UITextField 中并使用 AFNetworking 登录的应用程序中登录 Instapaper ( [http://www.instapaper.com/user/login )，我将如何完成此操作？](http://www.instapaper.com/user/login)

和这个方法有关吗？[http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/postPath:parameters:success:failure](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/postPath:parameters:success:failure)：

基本上我想获取凭据，登录到 Instapaper，然后与加载的网站进行交互。

如果是上述方法，我是否将 NSDictionary 用于“用户名”->“”和“密码”->“”之类的参数？响应是登录后显示的页面的 HTML（我在寻找什么）？

我是网络新手，所以我有点困惑如何使用 AFNetworking 来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:35:58.863

使用`AFHTTPRequestOperation`变体`AFHTTPClient`，如果您将用户名和密码作为参数发送，则将它们添加到 NSDictionary 中，如下所示并将它们作为参数发送，否则如果您想在正文中发送它们，您可以将它们作为 formData 发送。

```
NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
 [parameters setObject:username.text forKey:@"username"];
 [parameters setObject:password.text forKey:@"password"];   

AFHTTPClient  *afHttpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://yourbaseURL"]];

NSMutableURLRequest *request = [afHttpClient multipartFormRequestWithMethod:@"POST" path:@"/pathifAny" parameters:parameters constructingBodyWithBlock:^(id <AFMultipartFormData>formData)
                                        {
                                        // here you can send as body if you not setting as parameters
                                        [formData appendPartWithFormData:[username.text dataUsingEncoding:NSUTF8StringEncoding] name:@"username"];
                                        [formData appendPartWithFormData:[password.text dataUsingEncoding:NSUTF8StringEncoding] name:@"password"];

                                        }];

AFHTTPRequestOperation  *afHttpReqOperation = [[AFHTTPRequestOperation alloc] initWithRequest:request]; 
```

[这是关于 GET/POST 的简单教程](http://samwize.com/2012/10/25/simple-get-post-afnetworking/)

# c# - 如何从未知类型中实例化通用列表？

> ID：15661382
> 
> 赞同：-4
> 
> 时间：2013-03-27T14:28:14.660
> 
> 标签：c#, generic-list

我有一个对象作为参数，我想从该对象类型中创建一个通用列表。大多数时候我想发送一个自定义对象类型。这段代码声明了我的问题的概念。

```
public void myMethod(object myObject)
{
    List<typeof(myObject)> _NewList=new List<typeof(myObject)();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:35:25.307

通过反射：

```
var type = myObject.GetType();
var genericListType = typeof(List<>).MakeGenericType(new[] { type });

var list = (IList)Activator.CreateInstance(genericListType); 
```

但最好使用泛型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:32:31.003

您可以使该方法通用：

```
public void myMethod<T>(T myObject)
{
    List<T> _NewList = new List<T>();
} 
```

如果您的方法需要对这些对象执行任何一致的操作，您可以将类型限制为接口或基类。

# python - Python 看不到 pygraphviz

> ID：15661384
> 
> 赞同：46
> 
> 时间：2013-03-27T14:28:21.990
> 
> 标签：python, installation, pygraphviz

我已经使用 easy_install 安装了 pygraphviz 但是当我启动 python 时出现错误：

```
>>>import pygraphviz as pgv
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named pygraphviz
>>> 
```

使用 Ubuntu 12.04 和 gnome 终端。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-03-27T19:40:52.857

假设您使用的是 Ubuntu，请查看以下步骤

1.  `sudo apt-get install graphviz libgraphviz-dev pkg-config`
2.  如果需要，创建并激活[virtualenv 。](http://www.clemesha.org/blog/modern-python-hacker-tools-virtualenv-fabric-pip/)命令看起来像`sudo apt-get install python-pip python-virtualenv`
3.  跑`pip install pygraphviz`
4.  运行终端并通过导入检查它是否有效

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-17T10:37:56.280

在 Ubuntu 14.04 上，自动检测 graphviz 库和包含文件存在问题。如果您按照以下步骤操作，您可能会很安全。

```
1) sudo apt-get install graphviz libgraphviz-dev pkg-config python-pip
2) pip install pygraphviz --install-option="--include-path=/usr/include/graphviz" --install-option="--library-path=/usr/lib/graphviz/" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-03T19:35:48.813

The quick and easy solution is:

```
sudo apt-get install -y python-pygraphviz 
```

using pip will also work, but make sure you have graphviz, libgraphviz-dev, and pkg-config already installed.

```
sudo apt-get install -y graphviz libgraphviz-dev pkg-config python-pip
sudo pip install pygraphviz 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-10-11T11:35:17.793

在 Mac OSX 上，以下对我有用：

```
pip install graphviz
pip install cgraph
export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig 
cd /usr/local/include/graphviz 
sudo ln -s . graphviz 
pip install pygraphviz 
```

[如建议的那样，修复了从以前的 /urs/local/ 到 /usr/local/ 的错字]

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-15T04:41:50.360

在 Mac OSX El Capitan 上，Bart Theeten 的解决方案有效，但有两点需要注意。最初，请确保您在计算机上安装了 graphviz。您可以使用自制软件：

```
brew install graphviz 
```

另一件事是确保将包的路径添加到 PYTHONPATH

```
export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages/ 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-22T20:03:03.513

在 Ubuntu 15.10+（即 2015ish Debian）下，快速简单的解决方案是：

```
sudo apt-get install python-pygraphviz 
```

apt 正确提取任何依赖项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-11T12:12:06.673

在 Colab 中，

```
!apt  install  libgraphviz - dev
!pip install pygraphviz 
```

学分：[https ://gist.github.com/korakot/a80c04a1945b06e2f4a053f92fecfbf9](https://gist.github.com/korakot/a80c04a1945b06e2f4a053f92fecfbf9)

# mysql - 选择不重复

> ID：15661393
> 
> 赞同：1
> 
> 时间：2013-03-27T14:28:53.380
> 
> 标签：mysql

为简洁起见，假设我有一个如下所示的表格：

```
item_name    item_location    item_price
PROMO_A      local            5
B            local            7
PROMO_A      global           8 
```

现在，我正在做的是选择 item_location 为“本地”或`item_name`包含单词`PROMO`但`item_location`不是“本地”的所有记录。这在我的 SQL 查询中看起来很简单：

```
SELECT * FROM mytable WHERE item_location='local' OR (item_name like 'PROMO%' AND item_location != 'local'); 
```

现在，它可能会发生，就像我在上面设置的示例数据一样，我会得到两个相同`item_name`的 '，所以我想知道如何修复这个查询，以便不添加后一个查询？我可以通过编写一个 PHP 程序来解决这个问题，该程序将遍历记录并删除重复项（我需要删除具有 item_location=='global' 的重复项（具有相同 item_name 的那些））但我想知道这是否可以仅使用 SQL 完成？我正在考虑制作上述查询的临时表，然后查询不同的 item_name 记录，但在这种情况下，我将如何删除 item_location 为“全局”的记录？

无论如何，任何帮助表示赞赏。

编辑：我[为此设置了一个 SQL Fiddle 链接](http://sqlfiddle.com/#!2/2490c/1)。

edit2：我设法使用以下查询来解决这个问题：

> SELECT * FROM mytable WHERE item_location = 'local'
> 
> 联盟
> 
> SELECT * FROM mytable WHERE item_name LIKE 'PROMO%' AND item_name NOT IN
> (SELECT item_name from mytable WHERE item_location = 'local' )

这个 sql fiddle 链接在[这里](http://sqlfiddle.com/#!2/49800/2)。

现在，我相信这可以以更好的方式处理，所以如果有人有更好的方法，我想听听你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:38:24.730

您的`UNION`查询可能会简化为

```
SELECT * FROM mytable
WHERE item_location = 'local'
OR item_name LIKE 'PROMO%' AND item_name NOT IN
   (SELECT item_name FROM mytable
    WHERE item_location = 'local' ) 
```

另一个使用 a 而不是子查询给出相同结果`LEFT JOIN`的查询是

```
SELECT mt.* FROM mytable AS mt
LEFT JOIN mytable as mt2
ON mt2.item_name = mt.item_name      -- check for similar items
AND mt2.item_location = 'local'      -- whose location is 'local'
WHERE mt.item_location = 'local'
OR mt.item_name LIKE 'PROMO%'
AND mt2.item_location IS NULL;       -- only include if not found locally 
```

# javascript - javascript 源地图：将地图文件保存在本地仅用于调试生产 javascript

> ID：15661395
> 
> 赞同：18
> 
> 时间：2013-03-27T14:28:59.180
> 
> 标签：javascript, google-chrome, source-maps

我想调试生产网站，但我不想在服务器上上传地图文件（出于隐私原因，因为它是公共权利？）。

可能吗 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T16:53:13.507

我不相信任何浏览器目前允许从本地文件按需加载源地图，所以你必须以某种方式将源地图放到网上。

一种解决方案可能是创建一个 .htaccess 文件（或类似的文件，如果您不使用 Apache），它将对源映射（和原始源文件）的访问限制为非本地网络的客户端。

但是您应该意识到，如果您出于安全原因想要阻止对源地图的访问，那么您将获得的只是一种错误的安全感。Javascript 是公开的，即使它被缩小和加密，也很容易解密它。不要在您的 javascript 中放置任何敏感数据**。**即使您缩小和加密它也不会。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T04:20:15.573

以下可能对您有用

[多级源地图](http://www.thecssninja.com/javascript/multi-level-sourcemaps)- CSS Ninja

该链接还解释了使用[UglifyJS2](https://github.com/mishoo/UglifyJS2)可以指定输入源映射。但是，我没有使用本地输入源进行测试

此外，您可以尝试在本地托管文件并将文件更改为`hosts`指向. 然后指定为 Source Root`local.mydomain.com``localhost``local.mydomain.com/js/my-orig-js-file.js`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T11:26:13.223

另一种解决方案是将地图文件和缩小的js上传到服务器上，并将原始js文件保存在本地。然后像这样修改你的地图文件：

```
{
    "version":3,
    "sources":["http://localhost/library.js"],
    "names":["example","console","log"],
    "mappings":"AAAA,QAASA,YACRC,QAAQC,IAAI","file":"script.min.js"
} 
```

# maven - JDT-Core 和 Jasper 报告不能一起工作

> ID：15661403
> 
> 赞同：0
> 
> 时间：2013-03-27T14:29:22.103
> 
> 标签：maven, jasper-reports, tomcat6, eclipse-jdt

我一直在使用 Tomcat 6 和 Jasper Reports，但是当我启动 tomcat jdt 编译器崩溃时，因为 tomcat 中的 jasper jar 使用了另一个版本的 jdt 编译器。我正在使用最新版本的 jasper 报告 5.01；

我已经在谷歌上搜索了这个问题 2 天。我发现这个人似乎有同样的问题。

[http://grokbase.com/t/tomcat/users/10bjk6d3cb/tomcat-jasperreports-and-jar-files](http://grokbase.com/t/tomcat/users/10bjk6d3cb/tomcat-jasperreports-and-jar-files)

这是堆栈跟踪：

```
java.lang.NoSuchMethodError: org.eclipse.jdt.internal.compiler.CompilationResult.getProblems()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem;
    at org.apache.jasper.compiler.JDTCompiler$2.acceptResult(JDTCompiler.java:370)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:335) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T04:45:22.350

问题是您正在使用不兼容的库组合。

org.drools.commons.jci.compilers.EclipseJavaCompiler 类试图使用 org.eclipse.jdt.internal.compiler.CompilationResult.getProblems()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem 但该方法没有存在于您正在使用的 Eclsipe 库中。

我将 jasper-compiler-jdt-5.5.15 添加到我的类路径开始工作...... :)

# asp.net - TempData 键是否区分大小写？

> ID：15661404
> 
> 赞同：0
> 
> 时间：2013-03-27T14:29:26.513
> 
> 标签：asp.net, asp.net-mvc

不确定是否有人问过这个问题，我在搜索提供的标题时找不到它。我的问题是：

**ASP.NET 中的 TempData 键是否区分大小写？**

例子：

```
TempData["sampleKey"] = 5; 
```

如果我尝试使用以下方式访问它：

```
TempData["SampleKey"] 
```

我会得到价值吗？

**编辑：**

我知道这很容易尝试（我现在有）我发布这个问题的原因是因为我无法通过搜索找到解决方案。尝试它永远是解决问题的最佳方法，但我想我还是会问这个问题，让所有人都能看到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:51:10.620

它们不区分大小写。您可以放入任何您想要的情况作为密钥，它仍然每次都会出现。为什么他们选择这样做，谁知道...

**编辑** 这也适用于`ViewData`.

# python - 在python中打开具有特定pid的进程

> ID：15661407
> 
> 赞同：1
> 
> 时间：2013-03-27T14:29:35.007
> 
> 标签：python, process, pid

如何使用**特定的 pid**在 python 中打开一个进程。我的意思是我想***设置***进程PID。

**编辑：**

我想确定与进程一起运行的进程的 PID（例如，使用类`Popen`的方法`subprocess`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:40:09.897

PID 由操作系统提供，您不能为子进程使用特定的 PID。

要确定子进程的 PID，您可以向子进程询问它：

```
import subprocess

dateProc = subprocess.Popen([ 'date' ])
print dateProc.pid 
```

如果您的意思是您想知道当前进程的 PID，请使用`os.getpid()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:59:26.553

如果需要知道进程的进程 ID（例如 firefox），则以下代码适用于我（在 Linux 环境中）。在运行代码之前，需要在 env 中安装**psutil**模块。要安装 psutil，请使用“ **easy_install psutil** ”命令。

```
#!/usr/bin/python

import psutil

process = filter(lambda p: p.name == "firefox", psutil.process_iter())
for i in process:
  print i.name,i.pid 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T15:27:49.637

要检索（例如）“pythoh”进程的 PID，您至少需要两行代码：

```
import subprocess
pid = int(subprocess.Popen(['pgrep','python'],stdout=subprocess.PIPE).stdout.readline()[:-1]) 
```

如果有可能没有具有该名称的进程正在运行，请添加一个 try-except 子句。

如果有很多 'python' 进程，则迭代读取行直到返回 ''。

您可能还需要*sudo apt-get install pgrep*。

**无法**设置**PID** ==>在 linux中[更改进程 ID](https://stackoverflow.com/questions/6692667/changing-the-process-id-in-linux)

# ms-access - VBA将列表框设置为多个值

> ID：15661411
> 
> 赞同：1
> 
> 时间：2013-03-27T14:29:45.823
> 
> 标签：ms-access, vba

我在 Access 中有一个列表框，其中多选值设置为 true。我希望能够通过 VBA 代码设置选定的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:41:16.900

使用该`.Selected`方法，并传递您要选择的项目的索引值。

```
'Populate the listbox (probably you are doing this elsewhere):

'Select items items 1 and 2 (remembering ListBox is 0-index, so this selects the 2nd and 3rd items in the list:
ListBox1.Selected(1) = True
ListBox1.Selected(2) = True 
```

另外，请确保`.MultiSelect = fmMultiSelectMulti`或`.MultiSelect = fmMultiSelectExtended`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:13:59.937

正如对上述内容的补充说明。假设我有一个区域列表框，用户在其中选择各个区域，那么此代码可用于根据与所选区域匹配的第五列（4，从零开始计数）从多选列表框 HospCounty 中选择医院。

```
For Each itm In Me.Region.ItemsSelected
    For i = 0 To Me.HospCounty.ListCount - 1
        If Trim(Me.HospCounty.Column(4, i)) = Trim(Me.Region.Column(0, itm)) Then
            Me.HospCounty.Selected(i) = True
        End If
    Next
Next 
```

# php - cURL php 上传文件被检测为 IPS 攻击

> ID：15661415
> 
> 赞同：1
> 
> 时间：2013-03-27T14:30:04.017
> 
> 标签：php, curl, firewall

为什么我的 cURL 上传文件被 forti 防火墙检测为 IPS 攻击：

```
function post_files($url, $files,$data=array()) {

    if (!is_array($files)) {
        //Convert to array
        $files[] = $files;
    }
    $n = sizeof($files);
    for ($i = 0; $i < $n; $i++) {
        $data['file' + $i] = "@" . $files[$i];
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

    $response = curl_exec($ch);
    return $response;
} 
```

有卷曲选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:33:24.870

有了这个，请求似乎来自 Firefox：

```
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.6 (KHTML, like Gecko) Chrome/16.0.897.0 Safari/535.6'); 
```

这样上传似乎来自实际站点：

```
curl_setopt ($ch, CURLOPT_REFERER, "http://domain you should have come from"); 
```

# sql - Teradata SQL 语法 - 公用表表达式

> ID：15661416
> 
> 赞同：3
> 
> 时间：2013-03-27T14:30:07.533
> 
> 标签：sql, common-table-expression, teradata, recursive-query

在 MSSQL 2008 中使用多个 CTE 时，我通常用逗号分隔它们。

但是，当我在 Teradata 环境中尝试此操作时，语法出现错误。

在 MS SQL 中工作：

```
WITH CTE1 AS 
(SELECT TOP 2 Name FROM Sales.Store)
,CTE2 AS 
(SELECT TOP 2 ProductNumber, Name FROM Production.Product)
,CTE3 AS 
(SELECT TOP 2 Name FROM Person.ContactType)
SELECT * FROM CTE1,CTE2,CTE3 
```

现在，尝试放入 Teradata 语法：

```
WITH RECURSIVE CTE1 (Name) AS 
(SELECT TOP 2 Name FROM Sales.Store)
,RECURSIVE CTE2 (ProductNumber, Name) AS 
(SELECT TOP 2 ProductNumber, Name FROM Production.Product)
,RECURSIVE CTE3 (Name) AS 
(SELECT TOP 2 Name FROM Person.ContactType)
SELECT * 
FROM CTE1,CTE2,CTE3 
```

> 语法错误，在 ',' 和 'RECURSIVE' 关键字之间应有名称或 Unicode 分隔标识符。

第二次尝试（不使用 RECURSIVE 多次）

```
WITH RECURSIVE CTE1 (Name) AS 
(SELECT TOP 2 Name FROM Sales.Store)
,CTE2 (ProductNumber, Name) AS 
(SELECT TOP 2 ProductNumber, Name FROM Production.Product)
,CTE3 (Name) AS 
(SELECT TOP 2 Name FROM Person.ContactType)
SELECT * 
FROM CTE1,CTE2,CTE3 
```

> *不支持多个 WITH 定义。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:12:30.823

Teradata 14.0 版支持多个 CTE。您可以从 Teradata Developer Network 网站下载适用于 VMware 的 TD v14 并进行测试。

# android - 安卓屏幕冻结

> ID：15661418
> 
> 赞同：1
> 
> 时间：2013-03-27T14:30:17.870
> 
> 标签：android

每隔一段时间（并且没有明显的复制步骤），设备就会进入屏幕完全卡住的状态。我所说的“抓住”是指绝对不会吸引任何东西。这种行为很像我们在主线程上进行了阻塞调用，但我已经能够在调试器上捕获该行为并确认这不是问题（更不用说我们没有收到来自安卓）。

更令人困惑的是，当我与屏幕交互时，我注意到应用程序通过我们的日志语句正常运行。因此，当我做出滚动手势时，我能够看到我们正在膨胀视图、进行适当的网络调用等等。该应用程序功能齐全，但屏幕未绘制任何内容。

在 Eclipse 中使用 UI XML 快照工具甚至可以显示*应该*出现在屏幕上的视图（尽管绘制的图像仍然是冻结的“屏幕截图”）。

我会注意到我们最近引入了动画，特别是使用 Nineoldandroids 项目来帮助我们向后移植一些功能。这个问题似乎出现在所有手机上（包括我的 4.2.2 Galaxy Nexus），但是，再一次，复制很困难。

我们完全无法解释这种行为，并希望能深入了解导致此问题的原因和/或如何解决此问题！

**编辑：**今天经过大量测试，似乎没有在任何视图上调用 draw(...) 。这可以解释为什么屏幕被“冻结”。Measure*被*调用（这解释了为什么 UI XML 快照正确地显示了屏幕上*应该显示的内容）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:58:00.870

我们已经弄清楚出了什么问题，希望这对将来的某人有所帮助。

尽管我们仍然不确定具体是*如何实现*的，但我们的应用程序可以进入一个 onPreDraw 监听器已注册但从未取消注册的状态。此外，onPreDraw 监听器内部有一个状态**会**导致它返回 false。因此，当 Android 遍历所有 onPreDraw 侦听器以确保它可以绘制时，我们不再引用的这个侦听器不断返回 false。消除这种情况似乎解决了我们的问题。

# c# - 使用 C# 4.0 验证日期格式

> ID：15661419
> 
> 赞同：0
> 
> 时间：2013-03-27T14:30:18.093
> 
> 标签：c#, validation, date

在我们现有的网站代码中，我遇到了以下代码：

```
private static bool IsDate(string inputText)
        {
            try
            {
                DateTime.Parse(inputText);
                return true;
            }
            catch
            {
                return false;
            }
        } 
```

这段代码可以使用 .NET 4.0 框架特性进行优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:31:40.847

不可以。但它可以使用其他已经存在比 4.0 更长的框架功能进行优化：

```
private static bool IsDate(string inputText)
{
    DateTime d;
    return DateTime.TryParse(inputText, out d);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:33:08.213

```
bool IsDate(string Input)
    {
        DateTime RV;
        return DateTime.TryParse(Input, out RV);
    } 
```

# node.js - 获取 node.js 程序所需的所有文件

> ID：15661420
> 
> 赞同：1
> 
> 时间：2013-03-27T14:30:21.163
> 
> 标签：node.js

有没有办法通过节点进程在需要的地方（使用 require("...")）获取文件列表？

UPD，解决方案：模块对象本身包含指向所有必需子模块的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:01:32.613

加载的模块存储在 require.cache 对象中。您应该能够检查以查看使用 require() 加载的内容。

[http://nodejs.org/docs/latest/api/globals.html#require.cache](http://nodejs.org/docs/latest/api/globals.html#require.cache)

# pdo - PDO 分页 - 不显示结果

> ID：15661424
> 
> 赞同：0
> 
> 时间：2013-03-27T14:30:30.653
> 
> 标签：pdo, pagination

该代码正确地提取了数据库中的结果数量，但没有显示任何结果。它不是显示结果，而是显示“其他”条件消息“无法显示结果”。

我无法弄清楚我在这里做错了什么......我查看了很多文章并且无法找到答案。

```
<font size="+3" face="Verdana">Database</font>
<br><br>
<form name="form" action="" method="get">
<input type="text" name="q" size="60" />
<input type="submit" name="Submit" value="Search">
</form>

<?php

include 'connect.php';

$var = $_GET['q'];
echo $var;

try {

// Find out how many items are in the table
$total = $conn->query('
SELECT
COUNT(*)
FROM
customers
')->fetchColumn();

// How many items to list per page
$limit = 20;

// How many pages will there be
$pages = ceil($total / $limit);

// What page are we currently on?
$page = min($pages, filter_input(INPUT_GET, 'page', FILTER_VALIDATE_INT, array(
'options' => array(
'default'   => 1,
'min_range' => 1,
),
)));

// Calculate the offset for the query
$offset = ($page - 1)  * $limit;

// Some information to display to the user
$start = $offset + 1;
$end = min(($offset + $limit), $total);

// The "back" link
$prevlink = ($page > 1) ? '<a href="?page=1" title="First page">&laquo;</a> <a 
href="?page=' . ($page - 1) . '" title="Previous page">&lsaquo;</a>' : '<span   
class="disabled">&laquo;</span> <span class="disabled">&lsaquo;</span>';

// The "forward" link
$nextlink = ($page < $pages) ? '<a href="?page=' . ($page + 1) . '" title="Next  
page">&rsaquo;</a> <a href="?page=' . $pages . '" title="Last page">&raquo;</a>' : 
'<span class="disabled">&rsaquo;</span> <span class="disabled">&raquo;</span>';

// Display the paging information
echo '<div id="paging"><p>', $prevlink, ' Page ', $page, ' of ', $pages, ' pages,  
displaying ', $start, '-', $end, ' of ', $total, ' results ', $nextlink, ' </p></div>';

// Prepare the paged query
$stmt = $conn->prepare('
SELECT * FROM customers 
WHERE 
statusstring LIKE :statusstring OR 
company LIKE :company OR 
city LIKE :city OR 
state LIKE :state OR 
zip LIKE :zip OR 
mainphone LIKE :mainphone OR 
contact LIKE :contact OR 
function LIKE :function OR 
cellphone LIKE :cellphone OR 
email LIKE :email OR 
nextcontactdate LIKE :nextcontactdate 
LIMIT :limit 
OFFSET :offset');

// Bind the query params

$stmt->execute(array(':statusstring' => '%'.$_GET['q'].'%',
                 ':company' => '%'.$_GET['q'].'%',
                 ':city' => '%'.$_GET['q'].'%',
                 ':state' => '%'.$_GET['q'].'%',
                 ':zip' => '%'.$_GET['q'].'%',
                 ':mainphone' => '%'.$_GET['q'].'%',
                 ':contact' => '%'.$_GET['q'].'%',
                 ':function' => '%'.$_GET['q'].'%',
                 ':cellphone' => '%'.$_GET['q'].'%',
                 ':email' => '%'.$_GET['q'].'%',
                 ':nextcontactdate' => '%'.$_GET['q'].'%',
                 ':limit' => $limit,
                 ':offset' => $offset));

// Do we have any results?
if ($stmt->rowCount() > 0) {
    // Define how we want to fetch the results
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    $iterator = new IteratorIterator($stmt);

    // Display the results
    foreach ($iterator as $row) {
        echo "<tr>

  <td align=center>"; if($row['status']==1)
                        {
                        echo "Contacted";
                        }
                      elseif($row['status']==2)
                        {
                        echo "Uncontacted";
                        }
                      elseif($row['status']==3)
                        {
                        echo "Do Not Call";
                        }
                        echo "</td>
  <td align=center>". $row['company'] ."</td>
  <td align=center>". $row['city'] ."</td>
  <td align=center>". $row['state'] ."</td>
  <td align=center>". $row['zip'] . "</td>
  <td align=center>". $row['mainphone'] ."</td>
  <td align=center>". $row['contact'] ."</td>
  <td align=center>". $row['function'] ."</td>
  <td align=center>". $row['cellphone'] ."</td>
  <td align=center>". $row['email'] ."</td>
  <td align=center>". $row['lastcontactdate'] ."</td>
  <td align=center>". $row['nextcontactdate'] ."</td>
  <td align=center valign=middle width=100>
  <form action=customerdetails.php method=POST>
  <input type=hidden value=" . $row['id'] . " name=id>
  <input type=image src=images/details.png height=30>
  </form>
  </td></tr>";
    }

} else {
    echo '<p>No results could be displayed.</p>';
}

} catch (Exception $e) {
echo '<p>', $e->getMessage(), '</p>';
}
?> 
```

# php - mysql - 在逗号分隔的文本字段中查找匹配项

> ID：15661430
> 
> 赞同：0
> 
> 时间：2013-03-27T14:30:45.207
> 
> 标签：php, jquery, mysql, autosuggest

我的（MySQL）数据库的输出出现问题。

景点数据库

```
 id |  tags
-------------------------------------

 1  |  castle a, castle b, fakecastle c
 2  |  museum a, fakemuseum b, museum c
 ... 
```

在一个网站上，我有一个输入字段，它具有 autoSuggest 功能。因此，在我的 jQuery 中，我有一个 .keyup 事件，它将数据发送到 ajax 文件，并且 ajax 文件输出建议列表（自动建议）。

所以现在如果我输入“castle a...”，它将输出“1”（我正在输出 id）。如果我输入“museum a”，它将返回“2”。

所以我的问题是......如果我输入“fakecastle”，它是否有可能返回“1”？我知道这可以用`explode(',', $string)`.

我一直在搞乱 FIND_IN_SET()，但不知何故我没有达到我想要的结果。所以我仍然坚持

`mysql_query("SELECT tags FROM attractionData WHERE (tags LIKE '$search%') ")` $search = 输入字段中的文本。

编辑

```
if(isset($_POST['search']) == true && empty($_POST['search']) == false){
    $search = $_POST['search'];
    $search = mysql_real_escape_string($search);

    $query = mysql_query("SELECT tags FROM attractionData WHERE (tags LIKE '$search%') ")
    while(($row = mysql_fetch_assoc($query)) !== false){
        echo "<li class='auto'>".$row['friendEmail'] ."</li>";
} 
```

任何帮助，将不胜感激

泰，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:03:08.790

[在此处](http://en.wikipedia.org/wiki/1NF)、[此处](http://en.wikipedia.org/wiki/2NF)和[此处](http://en.wikipedia.org/wiki/3NF)阅读有关数据库规范化的信息，如果您按照规范化步骤进行操作，这些问题可能会同时自动解决，并且您的数据库将更加有用。

# iphone - SKPaymentQueue addPayment 后应用内购买 UIViewController 被取消

> ID：15661431
> 
> 赞同：1
> 
> 时间：2013-03-27T14:30:45.843
> 
> 标签：iphone, ios, in-app-purchase

我正在使用应用内购买为 iPhone 和 iPad 创建一个应用程序，但是我在 iPhone 上遇到了问题。当我点击我的可购买物品之一时，一旦将`SKPayment`其添加到`SKPaymentQueue`，我的 ViewController 就会自行关闭，使付款未处理。这导致崩溃，直到我添加`[[SKPaymentQueue defaultQueue] removeTransactionObserver:self]`到我的`dealloc`.

一旦我重新启动该应用程序，它将按预期处理付款并授予用户他们购买的内容。它不会处理付款，除非它已完全退出并重新启动。

我添加付款的方式如下：

```
- (void)purchaseConnector: (NSIndexPath *)indexPath
{
    SKProduct *selectedProduct = productDetailsList[indexPath.row];
    SKPayment *payment = [SKPayment paymentWithProduct:selectedProduct];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
} 
```

之后它进入这里：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
                break;
            default:
                break;
        }
    }
} 
```

事务的状态是`SKPaymentTransactionStatePurchasing`并因此继续，之后 ViewController 关闭并`UIAlert`弹出“确认您的应用内购买”。

同样，对于 iPad，一切都按预期完美运行，这些问题仅在使用 iPhone 时才会出现。

**编辑**

我想澄清一下，问题是商店 ViewController 正在解雇。我自己从不忽略它，而且似乎无法通过它接收该命令的位置。解雇不会发生在 iPad 上，只是在 iPhone 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:39:29.060

你的代码看起来不错。

看看[这个](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)，以防你错过了什么。

# apache - 简单的 mod_rewrite 不起作用/删除“www.”？

> ID：15661432
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:30:48.260
> 
> 标签：apache, .htaccess, mod-rewrite

我试图让一个非常简单的 mod_rewrite 规则在我的网站上工作。

到目前为止，我的 .htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteRule ^http://mywebpage.com/study$ http://mywebpage.com/jobs.html [L]
</IfModule> 
```

我想`http://mywebpage.com/jobs.html`在`http://mywebpage.com/study`. 我已经确保 .htaccess 文件没有被忽略 - 一切都很好，如果我在文件中输入垃圾，网页就会崩溃。那么为什么这不起作用呢？

* * *

另外，我计划使用 HTML5 Boilerplate 中的以下代码段：

```
# Rewrite "www.example.com -> example.com".

<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
</IfModule> 
```

所以我想在我的研究重写规则*之前有这个片段是明智的吗？*将上述代码段与我的自定义重写规则一起使用是否有任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:36:03.360

您不能在`RewriteRule`正则表达式中输入完整的 url，试试这段代码：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteBase /

  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

  RewriteRule ^study$ jobs.html [L]
</IfModule> 
```

# c++ - Bison 语法中的无用规则和非终结符

> ID：15661433
> 
> 赞同：1
> 
> 时间：2013-03-27T14:30:53.093
> 
> 标签：c++, grammar, bison, yacc

我有以下 Bison 文件来描述我的脚本语言语法：

```
%error-verbose
%{
#include "node.h"
NBlock *programBlock;

#define YYDEBUG 1

extern int yylex();
void yyerror(const char *) { printf("Error: %s\n", s); }
%}

%union {
    Node *node;
    NBlock *block;
    NBody *body;
    NHeader *header;
    NExpression *expression;
    NStatement *statement;
    NIdentifier *identifier;
    NVariableDeclaration *variableDeclaration;
    NDoWhileStatement *doWhileStatement;
    NWhileStatement *whileStatement;
    NIfStatement *ifStatement;
    NForStatement *forStatement;
    std::vector<NVariableDeclaration*> *variableDeclarations;
    std::vector<NExpression*> *expressions;
    std::vector<NStatement*> *statements;
    std:string *string;
    int token;
}

%token <string> TIDENTIFIER TINTEGER TDOUBLE
%token <token> TCEQ TCNE TCLT TCLE TCGT TCGE TEQUAL
%token <token> TLPAREN TRPAREN TLBRACE TRBRACE TCOMMA TDOT
%token <token> TPLUS TMINUS TMUL TDIV TDO TDOUBLE_TYPE TINT_TYPE
%token <token> TELSE TFOR TIF TSEMICOLON TTHEN TWHILE

%type <expression> expression term factor
%type <block> program body header tail statements
%type <statement> statement forStatement ifStatement doWhileStatement whileStatement variableDeclaration
%type <token> comparison
%type <string> identifier_type

%left TPLUS TMINUS
%left TMUL TDIV

%start program

%%

program:                TLBRACE body TRBRACE { printf("Reduce body to program\n"); }
                        ;

body:                   header TLBRACE block TRBRACE tail { printf("Reduce header block tail to body\n"); }
                        ;

header:                 TLBRACE variableDeclarations TRBRACE { printf("Reduce variableDeclarations to header\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to header\n"); }
                        ;

variableDeclarations:   variableDeclaration TSEMICOLON { printf("Reduce variable declaration to header\n"); }
                        | variableDeclarations variableDeclaration TSEMICOLON { printf("Reduce variable declaration list to header\n"); }
                        ;

tail:                   TLBRACE statements TRBRACE { printf("reduce statement list to tail\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to tal\n"); }
                        ;                   

statements:             statement TSEMICOLON { printf("Reduce statement to statement list\n"); }
                        | statements statement TSEMICOLON { printf("Reduce statement list to statement list\n"); }
                        ;

statement:              ifStatement { printf("Reduce if to statement\n"); };
                        | forStatement { printf("Reduce for to statement\n"); };
                        | doWhileStatement { printf("Reduce doWhile to statement\n"); };
                        | whileStatement { printf("reduce while to statement\n"); }
                        | expression { printf("Reduce expression to statement\n"); };
                        ;

forStatement:           TFOR TLPAREN expression TSEMICOLON expression TSEMICOLON expression TRPAREN block { printf("Reduce for to for statement\n"); }
                        ;

ifStatement:            TIF expression TTHEN block { printf("Reduce if to if statement\n"); }
                        | TIF expression block TELSE block { printf("Reduce ifelse to if statement\n"); }
                        ;

doWhileStatement:       TDO block TWHILE expression { printf("reduce dowhile to while statement\n"); }
                        ;

whileStatement:         TWHILE block expression { printf("Reduce while to while statement\n"); }
                        ;

block:                  TLBRACE statements TRBRACE { printf("Reduce statement list to block\n"); }
                        | TLBRACE TRBRACE { printf("Reduce empty to block\n"); }
                        ;

variableDeclaration:    identifier_type TIDENTIFIER { printf("reduce uninitialized identifier to variable declaration\n"); }
                        | identifier_type TIDENTIFIER TEQUAL expression { printf("Reduce initialized identifier to variable declaration\n"); }
                        ;

identifier_type:        TINT_TYPE { printf("Reduce int to identifier type\n"); }
                        | TDOUBLE_TYPE { printf("Reduce double to identifier type\n"); }
                        | { printf("Reduce empty to identifier type\n"); }
                        ;

expression:             TIDENTIFIER TEQUAL expression { printf("Reduce assignment to expression\n"); }
                        | TIDENTIFIER { printf("reduce identifier to expression\n"); }
                        | expression comparison expression { printf("Reduce comparison to expression\n"); }
                        | TLPAREN expression TRPAREN { printf("Reduce nested expression to expression\n"); }
                        | expression TPLUS term { printf("Reduce addition to expression\n"); }
                        | expression  TMINUS term { printf("Reduce subtraction to expression\n"); }
                        | term { printf("Reduce term to expresson\n"); }
                        | factor { printf("Reduce factor to expression\n"); }
                        ;

term:                   term TMUL factor { printf("Reduce multiplication to term\n"); }
                        | term TDIV factor { printf("Reduce division to term\n"); }
                        ;

factor:                 TIDENTIFIER { printf("Reduce identifier to factor\n"); }
                        | TINTEGER { printf("Reduce integer to numeric\n"); }
                        | TDOUBLE { printf("Reduce double to numeric\n"); }
                        ;

comparison:             TCEQ { printf("Reduce eq to comparison\n"); }
                        | TCNE { printf("Reduce ne to comparison\n"); }
                        | TCLT { printf("Reduce lt to comparison\n"); }
                        | TCLE { printf("Reduce le to comparison\n"); }
                        | TCGT { printf("reduce gt to comparison\n"); }
                        | TCGE { printf("Reduce ge to comparison\n"); }
                        | TPLUS { printf("Reduce plus to comparison\n"); }
                        | TMINUS { printf("Reduce minus to comparison\n"); }
                        | TMUL { printf("Reduce mul to comparison\n"); }
                        | TDIV { printf("Reduce div to comparison\n"); }
                        ; 
```

我真的不明白为什么我会收到与无用非终结符和无用规则相关的错误。

运行命令：

```
bison -d -o parser.cpp parser.y 
```

我收到以下错误：

```
$ bison -d -o parser.cpp parser.y
parser.y: attention: 1 nonterminal useless in grammar
parser.y: attention: 5 rules useless in grammar
parser.y:52.31-34: attention: nonterminal useless in grammar: term
parser.y:135.51-118: attention: rule useless in grammar: expression: expression TPLUS term
parser.y:136.51-123: attention: rule useless in grammar: expression: expression TMINUS term
parser.y:137.51-96: attention: rule useless in grammar: expression: term
parser.y:141.41-103: attention: rule useless in grammar: term: term TMUL factor
parser.y:142.51-107: attention: rule useless in grammar: term: term TDIV factor
parser.y: conflicts: 20 shift/reduce, 14 reduce/reduce
parser.y:145.41-96: attention: rule useless in parser due to conflicts: factor: TIDENTIFIER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:54:57.780

我认为冲突在于解析器在找到 TIDENTIFIER 时将不知道选择哪个规则。原因是

`TIDENTIFIER`可以减少到`expression`
`factor`可以减少到`expression`
`TIDENTIFIER`可以减少到`factor`

因此，当解析器获得标识符时，它可以通过两种方式到达表达式。

```
TIDENTIFIER -> expression  
TIDENTIFIER -> factor -> expression 
```

在您的情况下，我认为您可以安全地`TIDENTIFIER`从因素中删除，因为无论如何`factor`都会减少到**ONLY** `expression`。

**然而，一种更合适的方法（至少对于大多数常用语言而言）**可能是保留`TIDENTIFIER`并`factor`处理`statement`. 例如`TIDENTIFIER ASSIGN expression`可以是一个有效的`statement`.

顺便说一句，您的`statement`包括`expression`. 这可能不是你想要的。`statement`应该总是不同于`expression`（毕竟这就是为什么你需要两个规则）。

我认为你应该检查这样的情况。如果您的规则仅使用另一个规则（没有任何其他标记或其他规则），那么它可能是错误的。*从某种意义上说错了，这不是你想要*的。

# octave - 使用向量化的八度矩阵拼接

> ID：15661436
> 
> 赞同：1
> 
> 时间：2013-03-27T14:31:03.230
> 
> 标签：octave, vectorization

我有一个非常大的矩阵，`A`我想计算. 具体来说，我想应用于每个 sub-matrix ，其中和是向量的一部分：并在向量中获取结果。我使用了一个 for 循环，但它很慢，我想知道是否可以使用矢量化来做到这一点。`f``A``f``A(:, x:y)``x``y``v = [x y x y x y x y ...]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:08:59.380

理想情况下，您的功能`f`已经为您做到了。如果`f()`始终为任何矩阵返回单个值，则以下内容应该有效：

```
arrayfun (@(x,y) f(A(:,x:y)), V(1:2:end), V(2:2:end)) 
```

# jquery - 使用 jquery（插件）验证表单时遇到问题

> ID：15661440
> 
> 赞同：0
> 
> 时间：2013-03-27T14:31:07.720
> 
> 标签：jquery, jquery-validate, validation

该插件似乎工作正常。如果我将两个字段留空，我会收到通知，它们是必需的并且它们必须是有效数字。

我遇到的问题是，如果我用正确的数据填写两个文本字段并点击我的添加按钮，我会在下面的代码中遇到错误。数据仍会发送到我的控制器并执行我的添加，但警报正在从我的错误部分触发。

```
 $(document).ready(function (e) {
            $("#frmOverride").validate({
                rules: {
                    maintenancePercentage: {
                        required: true,
                        number: true
                    },
                    officePercentage: {
                        required: true,
                        number: true
                    }
                }
            });
     } 
```

这部分在我的保存按钮的点击事件中：

```
 var seg1 = dataItem.Seg1_Code;
        var maintPercentage = $("#maintenancePercentage").val();
        var officePercentage = $("#officePercentage").val();

        if ($('#frmOverride').validate().form()) {
            $.ajax({
                type: "POST",
                url: "/PayrollMarkup/AddPayrollMarkupOverride",
                data: {
                    seg1: seg1,
                    maintenancePercentage: maintPercentage,
                    officePercentage: officePercentage
                },
                success: function (data) {
                    //console.log(data);
                    var window = $("#window").data("kendoWindow");
                    $('#window_wnd_title').text("");
                    window.close();
                    $("#maintenancePercentage").val('');
                    $("#officePercentage").val('');

                    readDefaultsGrid();

                    readNotDefaultsGrid();
                },

                error: function (e) {
                    console.log(e);
                    alert("There was an error setting custom values. Maintenance % and Office % are required.");
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:00:37.327

您需要清理代码，您的代码正在搜索相同的标签 4(!) 次。

而不是重复 $('#PayrollMarkupDefaultsGrid').data("kendoGrid") 四次将其存储在一个变量中，并通过该变量使用其方法和成员。

至于你的问题，我相信你的剑道对象在你已经尝试使用它时还没有初始化。我相信您的代码会在这里引发异常：

```
$('#PayrollMarkupDefaultsGrid').data("kendoGrid").dataSource.read(); 
```

因为标签不存在或未初始化为 kendo 对象或 kendo 对象没有公共 dataSource 成员或 dataSource 成员没有 read() 函数。请检查这些并让我知道您的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:25:26.810

没有必要这样做...

```
if ($('#frmOverride').validate().form()) {
        $.ajax({ ... 
```

而且您当然不想在`click`事件处理程序中执行任何此类操作。这是因为 jQuery Validate 插件已经在捕获`click`事件，检查有效的表单，并提供一个`submitHandler`回调函数，该函数完全用于通过`ajax`.

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，

> **submitHandler**，回调，默认：默认（本机）表单提交回调，用于*在表单有效时*
> 
> 处理实际提交。获取表单作为唯一参数。替换默认提交。**验证后通过 Ajax 提交表单的正确位置**。

 ***```
$(document).ready(function () {

    $("#frmOverride").validate({
        rules: {
            maintenancePercentage: {
                required: true,
                number: true
            },
            officePercentage: {
                required: true,
                number: true
            }
        },
        submitHandler: function (form) {
            // your ajax goes here
            return false; // to block page redirect since you're using ajax
        }
    });

}); 
```

**简单演示：http: [//jsfiddle.net/4kn3y/](http://jsfiddle.net/4kn3y/)*****

# arrays - 从 bash 数组中清除重复项并保存到文件中

> ID：15661442
> 
> 赞同：0
> 
> 时间：2013-03-27T14:31:11.557
> 
> 标签：arrays, bash

我正在尝试从文件中清除重复项。内容是数字和名称，名称可以是（例如重复名称）：ABC ABCxxyy ABC123 ABClmn 等...（所以这里我只希望 ABC 在我的文件中）。为此，我编写了以下代码。目前它使用文件读/写。我想使用数组更改此代码，但无法计算。

这是当前代码：

```
for h in `cat name.list`
do
count=`grep -c $h name.list`
if (( $count >= 1 ))
then
    echo $h >> name.list.new            #building the new list
    grep -v $h name.list > name.list.tmpcopy    #rebuilding the name.list file...
    mv name.list.tmpcopy name.list
fi
done 
```

我试过了，但我得到了与输出相同的原始列表：

```
while read line
do
    array+=("$line")
done < name.list

#loop thru the array:...
for ((i=0; i < ${#array[*]}; i++))
do
    h=${array[i]}
    match=$(echo "${array[@]:0}" | tr " " "\n" | grep -c $h)
    if (( $match >= 1 ))
    then
        # remove all matched names from array..... Longest match from front of string(s)
        array=${array[@]##$h}

        #save the current name to new array
        array3[${#array3[*]}]=$h
    fi
done

for ELEMENT in "${array3[@]}"
do
 echo $ELEMENT
done > name.list.new 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:22:09.407

尝试这个：

```
declare -a names=( $(<name.list) )

len=${#names[@]}

for i in $(seq 0 $len); do
  if [ "${names[$i]}" != "" ]; then
    m=${names[$i]}
    for j in $(seq 0 $len); do
      if [ $i -ne $j ]; then
        if [ "$m" == "${names[$j]:0:${#m}}" ]; then
          unset names[$j]
        fi
      fi
    done
  fi
done

for name in "${names[@]}"; do
  echo $name
done > name.list.new 
```

**一步步：**

代码首先声明一个数组

```
declare -a names=( ... ) 
```

并将 的内容读`name.list`入其中：

```
$(<name.list) 
```

然后它遍历数组的所有索引：

```
for i in $(seq 0 $len); do
  ...
done 
```

作为安全卫士，空白字段被跳过：

```
 if [ "${names[$i]}" != "" ]; then
    ...
  fi 
```

非空字段被读入变量`$m`（为方便起见）

```
 m=${names[$i]} 
```

然后一个内部循环遍历数组的所有索引，除了当前在外部循环中处理的索引（`$i`）：

```
 for j in $(seq 0 $len); do
      if [ $i -ne $j ]; then
        ...
      fi
    done 
```

如果索引处字段的第一个字符*长度`$m`*`$j`与删除该字段相同`$m`：

```
 if [ "$m" == "${names[$j]:0:${#m}}" ]; then
          unset names[$j]
        fi 
```

最后将剩余的值写入输出文件：

```
for name in "${names[@]}"; do
  echo $name
done > name.list.new 
```

# sql - SQL*Loader-605：发生与数据无关的 ORACLE 错误——加载已停止

> ID：15661444
> 
> 赞同：0
> 
> 时间：2013-03-27T14:31:18.283
> 
> 标签：sql, oracle10g, sqlplus, sql-loader

当我尝试加载 Incl_c.ctl 时出现错误，所有其他控制文件都加载得很好。这是错误：

```
[navy10@sit ~]$ sqlldr navy10@studb10g Incl_C.ctl
Password:

SQL*Loader: Release 10.2.0.3.0 - Production on Wed Mar 27 10:26:52 2013

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

SQL*Loader-2028: load discontinued to user interrupt (Ctrl-C) [103]
SQL*Loader-605: Non-data dependent ORACLE error occurred -- load discontinued. 
```

这是 Incl_C 的控制文件：

```
LOAD DATA
INFILE 'Incl_C.dat'
REPLACE INTO TABLE Includes_C
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY "'"
(Tnum, ConfID) 
```

这是 Incl_C 的 .log 文件：

```
SQL*Loader: Release 10.2.0.3.0 - Production on Wed Mar 27 10:26:52 2013

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Control File:   Incl_C.ctl
Data File:      Incl_C.dat
  Bad File:     Incl_C.bad
  Discard File:  none specified

 (Allow all discards)

Number to load: ALL
Number to skip: 0
Errors allowed: 50
Bind array:     64 rows, maximum of 256000 bytes
Continuation:    none specified
Path used:      Conventional

Table INCLUDES_C, loaded from every logical record.
Insert option in effect for this table: REPLACE

   Column Name                  Position   Len  Term Encl Datatype
------------------------------ ---------- ----- ---- ---- ---------------------
TNUM                                FIRST     *   ,  O(') CHARACTER
CONFID                               NEXT     *   ,  O(') CHARACTER

Record 22: Rejected - Error on table INCLUDES_C, column TNUM.
Column not found before end of logical record (use TRAILING NULLCOLS)
SQL*Loader-2028: load discontinued to user interrupt (Ctrl-C) [103]
ORA-01013: user requested cancel of current operation

SQL*Loader-605: Non-data dependent ORACLE error occurred -- load discontinued.

Table INCLUDES_C:
  0 Rows successfully loaded.
  1 Row not loaded due to data errors.
  0 Rows not loaded because all WHEN clauses were failed.
  0 Rows not loaded because all fields were null.

Space allocated for bind array:                  33024 bytes(64 rows)
Read   buffer bytes: 1048576

Total logical records skipped:          0
Total logical records rejected:         1
Total logical records discarded:        0

Run began on Wed Mar 27 10:26:52 2013
Run ended on Wed Mar 27 10:27:01 2013

Elapsed time was:     00:00:09.17
CPU time was:         00:00:00.03 
```

请告诉我哪里出错了？我无法显示来自 Incl_C.dat 的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T02:39:15.910

看来`tablespace`是满了。

这是我的代码：

```
 select a.tablespace_name,
       a.bytes / 1024 / 1024 "Sum MB",
       (a.bytes - b.bytes) / 1024 / 1024 "used MB",
       b.bytes / 1024 / 1024 "free MB",
       round(((a.bytes - b.bytes) / a.bytes) * 100, 2)||'%' "percent_used"
  from (select tablespace_name, sum(bytes) bytes
          from dba_data_files
         group by tablespace_name) a,
       (select tablespace_name, sum(bytes) bytes, max(bytes) largest
          from dba_free_space
         group by tablespace_name) b
 where a.tablespace_name = b.tablespace_name
 order by ((a.bytes - b.bytes) / a.bytes) desc 
```

# javascript - 使用 jQuery 创建具有 JSON 结果的分组动态行

> ID：15661446
> 
> 赞同：1
> 
> 时间：2013-03-27T14:31:23.773
> 
> 标签：javascript, jquery, html

我有一个 JSON 请求，它返回如下结果：

```
[
{"ID":"57","BookName":"Title1","AuthorID":"2" "AuthorName":"Paul"}
{"ID":"57","BookName":"Title1","AuthorID":"3" "AuthorName":"Mark"},
{"ID":"58","BookName":"Title2","AuthorID":"4" "AuthorName":"Bob"},
{"ID":"58","BookName":"Title2","AuthorID":"5" "AuthorName":"John"},
{"ID":"58","BookName":"Title2","AuthorID":"6" "AuthorName":"Chris"}
] 
```

我想要完成的是以下 HTML 输出。为每个唯一 ID`div`创建一个具有唯一作者的新 ID。当一个新的 ID 被识别时，一个新的表格行被创建并且新的作者名字被添加到其中作为新的 div。

HTML：

```
<tr>
    <td>ID: 57</td>
    <td>BookName: Title1</td>
</tr>
<tr>
    <td colspan="2">
        <div class="author">
            AuthorID : 2 Author Name: Paul
        </div>
        <div class="author">
            AuthorID : 3 Author Name: Mark
        </div>
    </td>
</tr>
<tr>
    <td>ID: 58</td>
    <td>BookName: Title2</td>
</tr>
<tr>
    <td colspan="2">
        <div class="author">
            AuthorID : 4 Author Name: Bob
        </div>
        <div class="author">
            AuthorID : 5 Author Name: John
        </div>
        <div class="author">
            AuthorID : 6 Author Name: Chris
        </div>
    </td>
</tr> 
```

这是我的 jQuery 代码，其中包含一些伪逻辑：

```
$.getJSON(fullurl, function(json) {
    var bookid = '';
    $.each(json, function(i,d) {
        if(d.ID!= bookid){
            make new book row
            bookid= d.ID
         }
        else 
            use same row to show author div
         }
     }//end foreach 
```

有人可以帮我理解我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:43:00.947

如果您无法在可以使用的结构中获得 JSON 输出，则必须对其进行操作。您想按书籍对作者进行分组。

```
var books = {};
$.each(json, function () {
    if (!books.hasOwnProperty(this.ID)) {
        books[this.ID] = {
            "ID": this.ID,
            "BookName": this.BookName,
            "authors": []
        };
    }
    books[this.ID].authors.push({"AuthorID": this.AuthorID, "AuthorName":
        this.AuthorName});
}); 
```

它应该相对容易循环`books`，它具有所需的结构，并按照您在上面解释的那样附加表行。

[http://jsfiddle.net/rAYFZ/](http://jsfiddle.net/rAYFZ/)

# qt - 如果文件不存在，qmake INSTALL 的安装选项（qt .pro 选项）

> ID：15661447
> 
> 赞同：1
> 
> 时间：2013-03-27T14:31:29.397
> 
> 标签：qt, qmake

我正在使用 qmake 的安装选项来定义生成的 Makefile 的“make install”行为，例如在 myProject.pro 我有：

```
myFiles.path=/final/destination
myFiles.files=*.cfg

INSTALLS += myFiles 
```

然后

```
qmake myProject.pro
make install 
```

将所有 .cfg 文件移动到 /final/destination

现在我想将这些文件移动到 /final/destination ，如果它们不存在的话。

例如，如果 /final/destination/myConf.cfg 存在，请不要替换它。

这样做是否可以向 myProject.pro 添加一些规则？

我不想编辑 Makefile，如果可能的话，我想保留 .pro 中的所有规则。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:40:25.843

我没有测试过，但如果我正确理解了你的问题，你需要一种方法来测试文件的存在。您应该可以使用该功能 exists(/path/to/file)

找到了这个例子

```
EXTRAS = handlers tests docs
for(dir, EXTRAS) {
    exists($$dir) {
        SUBDIRS += $$dir
    }
} 
```

来自：http: [//qt-project.org/doc/qt-4.8/qmake-project-files.html](http://qt-project.org/doc/qt-4.8/qmake-project-files.html)

# css - 为什么当我使用 rem 时我的 index.html 文件看起来与本地和远程服务器不同

> ID：15661450
> 
> 赞同：2
> 
> 时间：2013-03-27T14:31:33.097
> 
> 标签：css

当我使用时`rem`，我的**index.html**文件从本地和远程服务器输出不同的字体大小。但我的浏览器大小都是 Chrome。

例如，我的本地服务器输出**index.html**，`font-size: 14px`但我的远程服务器输出它`font-size: 17px`。

为什么会这样？

我应该`em`改用还是我的css错了？

我的css文件是这样的......

```
html {
  font-size: 62.5%;
}

body {
  font-size: 1rem;
}

.page {
  font-size: 1.4rem;
} 
```

提前致谢。

# python - pandas 在 Python 中合并时删除索引索引？

> ID：15661455
> 
> 赞同：7
> 
> 时间：2013-03-27T14:31:41.210
> 
> 标签：python, pandas

我正在合并两个数据框，`merge(..., how='left')`因为我只想保留与“左”数据框匹配的条目。问题是合并操作似乎删除了我最左边的数据框的索引，如下所示：

```
import pandas
df1 = pandas.DataFrame([{"id": 1,
                         "name": "bob"},
                        {"id": 10,
                         "name": "sally"}])
df1 = df1.set_index("id")
df2 = pandas.DataFrame([{"name": "bob",
                         "age": 10},
                        {"name": "sally",
                         "age": 11}])

print "df1 premerge: "
print df1
df1 = df1.merge(df2, on=["name"],
                how="left")
print "merged: "
print df1
# This is not "id"
print df1.index
# And there's no "id" field
assert ("id" in df1.columns) == False 
```

合并前，`df1`被`id`. 合并操作后，合并数据框只有默认数字索引，并且该`id`字段被删除。如何进行这种合并操作但保留最左侧数据框的索引？

澄清一下：我希望将 的所有列`df2`添加到`df1`具有匹配`id`值的每个条目中。如果 in 中的条目`df2`的`id`值不在 中`df1`，则不应将其合并到中（因此是`how='left'`）。

**编辑**：我可以作为一个黑客做：`df1.reset_index()`但合并然后再次设置索引，但如果可能的话我不喜欢，似乎合并不应该删除索引。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T18:19:05.813

您已经指出在合并之前执行 reset_index 并在之后执行 set_index，这是可行的。我知道在合并中保留索引的唯一方法是让合并在至少一个正在合并的数据帧上包含一个索引。所以在这里，你可以这样做：

```
In [403]: df2 = df2.set_index('name')

In [404]: df1.merge(df2, left_on='name', right_index=True)
Out[404]: 
     name  age
id            
1     bob   10
10  sally   11 
```

将 df2 的索引（我们从其“名称”列中获取）与 df1 上的“名称”列合并。

这是有道理的，因为否则生成的数据帧的索引是不明确的，因为它可能来自任一数据帧。

# c# - 这些方法在哪个线程中运行？

> ID：15661460
> 
> 赞同：0
> 
> 时间：2013-03-27T14:32:00.297
> 
> 标签：c#, multithreading, timer

我想要一个能够在与其父级分开的线程中执行定时任务的类，但我有点困惑各个部分属于哪个线程，任何信息将不胜感激。

我的目的是使定时任务独立于父级运行，因为父级包装对象控制的这些任务不止一个。

这就是我想出的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

public class timed_load_process {
    private object _lock;
    protected string process;
    protected Timer timer;
    protected bool _abort;
    protected Thread t;

    protected bool aborting { get { lock (_lock) { return this._abort; } } }

    public timed_load_process(string process) {
        this._abort = false;
        this.process = process;
        this.t = new Thread(new ThreadStart(this.threaded));
        this.t.Start();
    }

    protected void threaded() {
        this.timer = new Timer(new TimerCallback(this.tick), false, 0, 1000);
        while (!this.aborting) {
            // do other stuff
            Thread.Sleep(100);
        }
        this.timer.Dispose();
    }

    protected void tick(object o) {
        // do stuff
    }

    public void abort() { lock (_lock) { this._abort = true; } }
} 
```

由于计时器是在线程内部实例化的，它是在线程内部`t`还是在线程内部运行`timed_load_process`，我假设操作滴答将在与计时器相同的线程中运行`t`。

结束于：

```
public class timed_load_process : IDisposable {
    private object _lock;
    private bool _tick;
    protected string process;
    protected Timer timer;
    protected bool _abort;

    public bool abort {
        get { lock (_lock) { return this._abort; } }
        set { lock (_lock) { this.abort = value; } }
    }

    public timed_load_process(string process) {
        this._abort = false;
        this.process = process;
        this.timer = new Timer(new TimerCallback(this.tick), false, 0, 1000);
    }

    public void Dispose() {
        while (this._tick) { Thread.Sleep(100); }
        this.timer.Dispose();
    }

    protected void tick(object o) {
        if (!this._tick) {
            this._tick = true;
            // do stuff
            this._tick = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:48:05.107

看起来你正在使用`System.Threading.Timer`. 如果是这样，则该`tick`方法在池线程上运行。它肯定*不是*应用程序的主线程。

仅供参考，Windows 窗体计时器在 GUI 线程上执行经过的事件。

的默认行为`System.Timers.Timer`是在池线程上执行`Elapsed`事件。但是，如果您将 设置`SynchronizingObject`为引用 Windows 窗体组件，则该事件将被编组到 GUI 线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:54:56.870

来自[http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

“该方法不在创建计时器的线程上执行；它在系统提供的 ThreadPool 线程上执行。”

# c# - 我可以申请哪种设计模式来处理命令应用程序？

> ID：15661461
> 
> 赞同：0
> 
> 时间：2013-03-27T14:32:08.073
> 
> 标签：c#

如果我有处理命令和处理的应用程序，是否应该使用合适的设计模式，因为目前我有很长的 switch case 语句？

```
switch(command)

{
   case ACK : // process(); break;
   case NAK : // process(); break;
   case POLL: // process(); break;
   ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:19.803

你绝对可以在这里做一些事情。如果它真的像将命令绑定到值一样简单，您可以使用 simple`Dictionary`将命令名称绑定到它执行的委托，例如：

```
private static IDictionary<string, Action> _actionsByCommand;

static MyClass() {
    _actionsByCommand[ACK] = Acknowledge;
    _actionsByCommand[POLL] = Poll;
}

private static void Acknowledge() { }
private static void Poll() { }

static void Main() {
    string command = ...;
    _actionsByCommand[command]();
} 
```

或者代替委托，您可以使用共享的基类或接口为每个命令定义类，并使用`Go`某种执行的方法。如果您以后需要，这将使您受益于将附加属性或值绑定到每个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:38:46.557

假设您有三个具有相同签名的方法。

```
public Func<string, int> Ack = (i) => return 1;
public Func<string, int> Nack= (i) => return 1; 
public Func<string, int> Poll = (i) => return 1; 
```

并且您想在没有 case 语句的情况下调用它们。

```
public int Call(string commandName)
{
    //Find method
    var method = this.GetType().GetFields().First(x=>x.Name == commandName);
    if (method == null) return null;
    //Convert it to Func
    var m = (Func<string, int>) method.GetValue(this);
    return m.Invoke("");
} 
```

你会像使用它一样。

```
new MethodRunner().Call("Ack"); 
```

# ruby-on-rails - 如何使用 Cancan 修复权限错误？

> ID：15661463
> 
> 赞同：1
> 
> 时间：2013-03-27T14:32:13.250
> 
> 标签：ruby-on-rails, authorization, cancan

我正在尝试在我的 Rails 应用程序中使用 Cancan 进行身份验证，但在这样做时遇到了麻烦。我的用户表中有 2 列名为 admin 和 owner，它们都是布尔值。我的ability.rb 文件检查这是否属实，然后提供适当的权限。似乎未登录的用户的权限 + 管理员工作的用户。但是，所有者的许可似乎不起作用。我无法在我的视图中查看使用此权限的链接。

我已将 load_authorize_resource 放在 PlacesController 的顶部。

```
def initialize(user)
    user ||= User.new  # Guest user
    if user.admin?
        can :manage, :all
    else
        can :read, :all
        if user.owner?
            can :create, Place
        end
    end

    # can :read, :all
end 
```

我可以以管理员的身份查看此内容，但不能以所有者的身份查看...但我应该能够以所有者的身份查看。

```
<% if can? :create, @place %>
    <%= link_to 'New place', new_place_path %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:50:07.400

你应该写，

```
 <% if can? :create, Place %>
  <%= link_to 'New place', new_place_path %>
 <% end %> 
```

在类级别而不是对象上创建作品。

# python - 错误：[Errno 1] 不允许操作 - Django runserver

> ID：15661465
> 
> 赞同：1
> 
> 时间：2013-03-27T14:32:17.507
> 
> 标签：python, django, virtualenv, pip

我目前正在尝试在我购买的远程服务器上启动我的新 django 站点。我使用 python 2.7、Django 1.4.2 和 MySQL 作为数据库。我还使用 virtualenv 和 pip 来确保我的环境符合这些要求。

设置环境并同步我的数据库后，我运行

```
python manage.py runserver 
```

但是我在终端中得到了这个输出：

```
Validating models...

0 errors found
Django version 1.4.2, using settings 'mysite.settings'
Development server is running at http://127.0.0.1:8080/
Quit the server with CONTROL-C.
Error: [Errno 1] Operation not permitted 
```

有人有这个问题的经验吗？

帮助将不胜感激:)

# c# - double.TryParse 错误？

> ID：15661472
> 
> 赞同：-4
> 
> 时间：2013-03-27T14:32:39.713
> 
> 标签：c#, visual-studio-2010

看起来我的 VS2010 表现得很奇怪（或者可能只是我）！

以下论点中有什么无效的？

![在此处输入图像描述](../Images/f4319b3977e939027d8e9dcd843c6ea8.png)

我是唯一收到此错误的人吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:49:08.040

你误解了`TryParse`它的作用。如果您确定`lati.Text`是有效的替身，请使用`double.Parse(lati.Text)`. 它接受一个字符串并返回一个双精度值。你的吸气剂看起来像：

```
get { return double.Parse(lat1.Text); } 
```

在这种情况下，如果`lat1.Text`不是有效的双精度，它将引发异常并中断。如果这不是您想要的行为，您应该使用`double.TryParse`它返回一个布尔值（如果成功解析文本，则为 true，否则为 false）。in 的第二个参数`TryParse`必须是一个持有者变量，它在`TryParse`完成之后 - 将保存您所追求的解析值。使用这种方法，您的代码将如下所示：

```
get
{
    double lat;
    if (double.TryParse(lat1.Text, out lat))
        return lat;
    else
    {
        // This line is reached if lat1.Text is not a valid double.
        // You decide what's best to do here
        return -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T14:36:34.640

您需要传递一个实际的双精度来存储结果。TryParse 方法将第二个参数声明为`out double`，这意味着它打算在那里存储一些东西。

```
get
{
    double d;
    double.TryParse(lat1.Text, out d);
    return d;
} 
```

具有讽刺意味的是，这种行为可能被认为是“错误的”。
在赤裸裸的 C 的古老时代，这样的错误可能会毁掉你的硬盘。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T14:34:44.450

您不能将 a 分配给`const double`-`out`参数。给它一个`double`-变量！

```
string s = "1.23";
double d = 0.0;
double.TryParse(s, out d); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T14:38:10.550

你的吸气剂应该是这样的

```
get {
 double result;
 if(!double.TryParse(lati.Text, out result))
    throw new Exception("your message");
 return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T14:36:45.980

TryParse 中的第二个参数需要是一个变量。你传入一个常数，0。

# entity-framework - ASP EF 模型设计策略

> ID：15661473
> 
> 赞同：0
> 
> 时间：2013-03-27T14:32:43.557
> 
> 标签：entity-framework, database-design

“电影”表

```
public int movieId { get; set; }
public String movieName { get; set; }
public virtual Genres Genres { get; set; } 
```

“流派”表

```
public int genreId { get; set; }
public String genreName { get; set; } 
```

我正在寻找的是构建模型以完成以下场景的策略：

1.  管理员输入所有类型名称，之后不再添加

2.  非管理员进入电影并在同一屏幕上提供一个下拉列表，其中包含所有“管理员键入”的流派名称

我的问题是，当他们创建电影时，linq 也想创建一个新的流派记录

我不想再创建任何流派记录，我只希望查看流派列表的表格

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:47:33.310

我会更改属性名称和类名称以使其更具可读性。如果您将`Genre`表的主键列名称保留为`GenreId`，则 EF Codefirst 将创建名称为`Genre_GenreId`!! 的外键（在电影中）表。所以我将 Movie 类的主键列名称更改为 simple `ID`，以便它将外键列生成为`Genre_ID`

```
public class Movie
{
    public int ID { get; set; }
    public String MovieName { get; set; }
    public virtual Genre Genres { get; set; }
}
public class Genre
{
    public int ID { get; set; }
    public String Name { get; set; }
} 
```

现在在您的 UI 中，您提供了一个下拉列表，其中列出了可用的`Genre`记录。当用户提交表单时，像这样保存

```
using (YourDBContext dbContext = new YourDBContext())
{
    Movie movie= new Movie { MovieName = "Read it from UI Please" };
    var genr=dbContext.Find(2); 
    // TO DO : replace 2 by selected value from dropdown in the UI
    movie.Genres =genr;

    dbContext.Movies.Add(movie);
    dbContext.SaveChanges();     
} 
```

您首先从 db 上下文中加载 Genre 对象，并将其设置为`Genres`新电影对象的属性。我们正在使用该`Find`方法找出其主键是传递给该函数的值的项目（在本例中为 2）。这将在电影表中添加一条新记录，并将`GenreID`列值设置为，假设您在 Genre 表中`2`有一条带有 ID 的记录`2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:13:13.610

`Genre`当你创建一个新的时创建一个新的没有意义`Movie`，你可能在插入时做错了什么`Movie`。下面是关于如何使用 EF 和 MVC 的提示：

```
// Model with foreign key
public class Movie {
    public int MovieId { get; set; }
    public string Name { get; set; }
    public Genre Genre { get; set; }
    public int GenreId { get; set; }
}

public class Genre {
    public int GenreId { get; set; }
    public string Name { get; set; }
}

// Movie Controller setting the genres for the view
public ViewResult Create() {
    // ...
    var genres = repository.Genres.All();
    ViewBag.GenreId = genres;
}

// View
@Html.DropDown("GenreId")

// Movie controller, GenreId on the model will be 
// automatically populated via model binding and the
// correct genre will be inserted
[HttpPost]
public ActionResult Create(Movie movie)
{
    if (ModelState.IsValid)
    {
        repository.Movies.Add(movie);
        repository.SaveChanges();
        // ...
    }
} 
```

祝你好运。

# javascript - 具有 [title] 属性的元素的样式工具提示

> ID：15661475
> 
> 赞同：1
> 
> 时间：2013-03-27T14:32:47.197
> 
> 标签：javascript, jquery, html, css

如何为带有 [title] 的元素设置工具提示样式以便在 IE8 上工作。

这里有几个小提琴的例子：http: [//jsfiddle.net/Dqr76/9/](http://jsfiddle.net/Dqr76/9/)

```
a[title]:hover:after {
  content: attr(title);
  padding: 4px 8px;
  color: #333;
  position: absolute;
  left: 0;
  top: 100%;
  white-space: nowrap;
  z-index: 20px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  -moz-box-shadow: 0px 0px 4px #222;
  -webkit-box-shadow: 0px 0px 4px #222;
  box-shadow: 0px 0px 4px #222;
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #eeeeee),color-stop(1, #cccccc));
  background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -ms-linear-gradient(top, #eeeeee, #cccccc);
  background-image: -o-linear-gradient(top, #eeeeee, #cccccc);
} 
```

[http://jsfiddle.net/tDQWN/](http://jsfiddle.net/tDQWN/)

```
a[data]:hover:after {
  content: attr(data);
  padding: 4px 8px;
  color: rgba(0,0,0,0.5);
  position: absolute;
  left: 0;
  top: 100%;
  white-space: nowrap;
  z-index: 2;
  border-radius: 5px ;
  background: rgba(0,0,0,0.5);
} 
```

我怎样才能让它们在 IE8 上工作？

谢谢！

# javascript - CSS Mask 在幻灯片上不起作用

> ID：15661481
> 
> 赞同：0
> 
> 时间：2013-03-27T14:32:56.533
> 
> 标签：javascript, jquery, html

在我的网站上，我有一个免责声明弹出窗口（供用户点击我同意）用一些“不透明度”掩盖主页，它完美地掩盖了主页上的图像和文本。CSS 如下。当我将图像更改为几张图像的幻灯片时，遮罩和弹出窗口位于隐藏弹出窗口的幻灯片下方（但遮罩适用于文本，而不是图像 div）。如何使幻灯片也被蒙版，并且只有在单击“我同意”时才可以在没有透明蒙版的情况下看到？它与幻灯片的类型有什么关系吗？我希望我不必发布脚本。如果需要请告诉我。谢谢。

```
 #mask 
       {
       position: absolute;
       left:0;
       top:0;
       z-index:99;
       background-color:#666666;
       filter:alpha(opacity=60);
       opacity: 0.6;
       -moz-opacity:0.6;
       } 
```

下面的图片是我放幻灯片之前和之后的照片

[![在图像和文本顶部的遮罩上弹出](../Images/93e0124a7ab2b554e8f4683fa623cbf6.png)](https://i.stack.imgur.com/Y60wd.png) [![幻灯片图像下方的弹出窗口和遮罩](../Images/cc18fa062d736cd5230effab0db0beb9.png)](https://i.stack.imgur.com/K787I.png)

# ruby-on-rails - 独角兽不关闭数据库连接

> ID：15661482
> 
> 赞同：6
> 
> 时间：2013-03-27T14:33:00.330
> 
> 标签：ruby-on-rails, unicorn, postgresql-9.2

我正在使用 rails 3.2 + unicorn + postgres DB，我有一个问题 - unicorn 如何处理 DB 连接？

我是怎么理解的：

1.  独角兽主进程分叉 X 子进程。
2.  每个子进程建立数据库连接——在 before_fork 中关闭，在 after_fork 中建立连接。
3.  我们使用每个进程的连接（如果我们使用 Rails DB 连接池，我们会为每个进程创建 Y（从 database.yml）DB 连接） - 即如果进程正在工作（它总是工作，直到我们不杀死它）我们保持连接打开并且每个Web 请求使用相同的连接（在 after_fork 中打开）。
4.  打开的连接将在 postgres（或任何其他 DB）中显示为空闲或活动。

是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T10:03:44.843

Yes you are right. If you set "worker_processes 5" in unicorn.conf, and "pool: 4" in database.yml, will be create d 20 connections to database.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T14:33:13.920

我写信给 Eric Wong，他是 unicorn gem 的创始人，他确认这是正确的。

# mysql - Mysql RLIKE - 匹配字符串结尾或另一个字符

> ID：15661486
> 
> 赞同：0
> 
> 时间：2013-03-27T14:33:04.077
> 
> 标签：mysql, rlike

我正在尝试使用 RLIKE 来匹配数据字符串后跟特定字符或字符串结尾 ($) 的位置。我只使用字符串字符 ($) 的结尾，或者只使用预期的字符，或者实际上是方括号内的任何预期字符集，得到预期的结果，但是一旦我进入方括号以获得预期的字符 OR 和结尾字符串字符，行尾不匹配。

这是一个例子：

**SQL 数据：**

```
CREATE TABLE test_table (id int auto_increment primary key, search_string varchar(8));
INSERT INTO test_table (search_string) VALUES("123456789");
INSERT INTO test_table (search_string) VALUES("1234567");
INSERT INTO test_table (search_string) VALUES("123456");
INSERT INTO test_table (search_string) VALUES("12345");
INSERT INTO test_table (search_string) VALUES("12345E"); 
```

**对此数据的示例查询：**

```
SELECT count(*) FROM test_table WHERE search_string RLIKE "56[7]";
# the above returns fine - 2 rows (first and second)

SELECT count(*) FROM test_table WHERE search_string RLIKE "56[7YE]";
# the above returns fine - 2 rows (rows 2 and 5) as expected

SELECT count(*) FROM test_table WHERE search_String RLIKE "56$";
# the above returns fine - 1 rows (the third) as expected as 6 is followed by end of string

SELECT count(*) FROM test_table WHERE search_string RLIKE "56[7$]";
# the above returns only 1 row and should be 2 (rows 2 and 3 - '56' should be followed by a 7 or end of string) 
```

有没有一种特殊的方法来处理方括号中的 $ 字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:45:14.390

正则表达式可能只需要稍作调整。相反，`56[7$]`您应该使用以下之一

```
56($|7)  
56($|[7YE]) 
```

在 [] 中，$ 试图匹配文字美元符号。相反，您正在寻找 $ 以匹配行尾，因此它不能在方括号内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:51:48.650

当我对您的测试数据进行尝试时，这个有效：

```
SELECT COUNT(*) FROM test_table WHERE search_string RLIKE '567{0,1}$' 
```

我试过`56($|7)`了，它有第 2 行和第 3 行，但它也有第 1 行

[编辑：（`{0,1}`一个或多个匹配项）是由 表示的特殊情况`?`，因此表达式也可以是`567?$`。]

# php - 我可以设置一个 JavaScript 函数运行，同时从控制器加载它的视图吗？

> ID：15661489
> 
> 赞同：0
> 
> 时间：2013-03-27T14:33:08.080
> 
> 标签：php, javascript, cakephp-2.0

我正在使用 Cakephp，我正在使用注销控制器中的索引功能从我的网站注销用户。当用户注销时，我应该能够运行 javascript Logout 功能需要什么。

我基本上希望从注销控制器加载登录页面时应该运行特定的 Javascript 函数？通过在控制器中进行更改或在目标视图页面的 javascript 中进行更改。

这是注销控制器的索引函数：-

```
 function index(){
       $isSessionExp = true;

    if( $this->session->userdata('is_sess') )
          $isSessionExp=false;

       $login_session_id = $this->session->userdata('login_session_id');
       $this->login_model->updateLogoutTime($login_session_id);
       $this->session->sess_destroy();

    if($isSessionExp)
       redirect($this->url."/logout/session_expired");
    else
       redirect($this->url."/login");// What I want that I should be able to indicate a particular Javascript function to run after this view is created, ofcourse this behavior should happen only during logout.

     } 
```

在登录类控制器中，我有一个加载登录页面的索引函数。它的代码是这样的。

```
 class Login extends CI_Controller {

      public function index() {

       if ($this->session->userdata('is_sess'))
           $this->session->sess_destroy();

           $data = array();
           $data['msg'] = null;
           $this->load->view('login', $data);
        } 
```

我基本上希望从注销控制器加载登录页面时应该运行特定的 Javascript 函数。

这可能吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:57:08.073

将您的代码同步为我的

```
function index($foo = null){

if($foo)
$this->set('just_logged_out','yeah');
// your codes here
} 
```

现在重定向喜欢

```
redirect($this->uri.'login/index/bar'); 
```

现在在 login.ctp

```
if(isset($just_logged_out))
echo 'you have just logged out'; 
```

此代码未经测试，但无论是否有轻微更正都应该可以使用。如果您遇到错误，请评论我。但对不起，我现在在手机上。

# .htaccess - .htaccess 将 2 个 http 页面重定向到 https 页面

> ID：15661492
> 
> 赞同：0
> 
> 时间：2013-03-27T14:33:11.000
> 
> 标签：.htaccess, redirect

我在重定向 2 个简单的 html 页面时遇到了一些麻烦。

我需要设置重定向：

1.  http://example.com/Folder1/page1.html 到[https://example.com/Folder1/page1.html](https://example.com/Folder1/page1.html)
2.  http://example.com/Folder1/Folder2/page2.html [https://example.com/Folder1/Folder2/page2.html](https://example.com/Folder1/Folder2/page2.html)

只有这两个页面必须从 http 重定向到 https。任何其他页面都必须可用于 http 和 https。

我尝试了这些规则：

```
RewriteCond %{SERVER_PORT} !=443 
rewriterule ^(Folder1)$ https://%{HTTP_HOST}/$1 [R=301,L] 
RewriteCond %{SERVER_PORT} 1=443 
RewriteCond $1 ^Folder1/Folder2 
rewriterule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L] 
```

但只有第二个重定向有效。第一个仍然打开http页面。

有人可以帮我写正确的规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:15:14.913

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^(/Folder1/(page1\.html|Folder2/page2\.html))$ [NC]
rewriterule ^.*$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# c# - 只读值的优雅解决方案

> ID：15661493
> 
> 赞同：5
> 
> 时间：2013-03-27T14:33:13.540
> 
> 标签：c#, wpf, xaml, resize, constants

我正在开发一个 WPF 应用程序，其窗口大小和组件位置必须在初始化时动态计算，因为它们基于我使用的主要 UserControl 大小和一些其他次要大小设置。因此，目前，我已将这些常量值放在我的 Window 代码中，如下所示：

```
public const Double MarginInner = 6D;
public const Double MarginOuter = 10D;
public const Double StrokeThickness = 3D;

public static readonly Double TableHeight = (StrokeThickness * 2D) + (MarginInner * 3D) + (MyUC.RealHeight * 2.5D);
public static readonly Double TableLeft = (MarginOuter * 3D) + MyUC.RealHeight + MarginInner;
public static readonly Double TableTop = MarginOuter + MyUC.RealHeight + MarginInner;
public static readonly Double TableWidth = (StrokeThickness * 2D) + (MyUC.RealWidth * 6D) + (MarginInner * 7D);
public static readonly Double LayoutHeight = (TableTop * 2D) + TableHeight;
public static readonly Double LayoutWidth = TableLeft + TableWidth + MarginOuter; 
```

然后，我只是在我的 XAML 中使用它们，如下所示：

```
<Window x:Class="MyNS.MainWindow" ResizeMode="NoResize" SizeToContent="WidthAndHeight">
    <Canvas x:Name="m_Layout" Height="{x:Static ns:MainWindow.LayoutHeight}" Width="{x:Static ns:MainWindow.LayoutWidth}"> 
```

嗯……没什么好说的。它有效......但它看起来非常丑陋，我想知道是否有更好的解决方案。我不知道......也许是设置文件、绑定、内联 XAML 计算或其他任何东西......这会让它看起来更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:45:21.890

我通常将所有静态我的应用程序设置放在一个称为通用的静态或单例类中，例如`ApplicationSettings`（或者`MainWindowSettings`如果这些值仅由`MainWindow`.

如果这些值是用户可配置的，它们会进入 app.config 并在静态类的构造函数中加载。如果没有，我只是在我的静态类中对它们进行硬编码，以便以后很容易找到/更改它们。

```
public static class ApplicationSettings
{
    public static Double MarginInner { get; private set; }
    public static Double MarginOuter { get; private set; }
    public static Double StrokeThickness { get; private set; }

    static ApplicationSettings()
    {
        MarginInner = 6D;
        MarginOuter = 10D;
        StrokeThickness = 3D;
    }
} 
```

对于 XAML 中的计算值，我通常使用我编写的[MathConverter](http://rachel53461.wordpress.com/2011/08/20/the-math-converter/)，它允许我编写与数学表达式的绑定，并将值传递给它以使用。

我在我的博客上发布的版本只是一个`IValueConverter`，但它很容易扩展成一个`IMultiValueConverter`，因此它可以接受多个绑定值。

```
<Setter Property="Height">
   <Setter.Value>
      <MultiBinding Converter="{StaticResource MathMultiConverter}"
                    ConverterParameter="(@VALUE1 * 2D) + (@VALUE2 * 3D) + (@VALUE3 * 2.5D)">
         <Binding RelativeSource="{x:Static ns:ApplicationSettings.StrokeThickness }" />
         <Binding RelativeSource="{x:Static ns:ApplicationSettings.MarginInner}" />
         <Binding ElementName="MyUc" Path="ActualHeight" />
      </MultiBinding>
   </Setter.Value>
</Setter> 
```

通常，我会将所有这些杂乱无章的 XAML 隐藏在某处的样式中，这样它就不会弄乱我的主要 XAML 代码，只需在需要的地方应用样式即可。

这是我用于的转换器代码的副本`IMultiValueConvter`

```
// Does a math equation on a series of bound values. 
// Use @VALUEN in your mathEquation as a substitute for bound values, where N is the 0-based index of the bound value
// Operator order is parenthesis first, then Left-To-Right (no operator precedence)
public class MathMultiConverter : IMultiValueConverter
{
    public object  Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        // Remove spaces
        var mathEquation = parameter as string;
        mathEquation = mathEquation.Replace(" ", "");

        // Loop through values to substitute placeholders for values
        // Using a backwards loop to avoid replacing something like @VALUE10 with @VALUE1
        for (var i = (values.Length - 1); i >= 0; i--)
            mathEquation = mathEquation.Replace(string.Format("@VALUE{0}", i), values[i].ToString());

        // Return result of equation
        return MathConverterHelpers.RunEquation(ref mathEquation);
    }

    public object[]  ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

public static class MathConverterHelpers
{
    private static readonly char[] _allOperators = new[] { '+', '-', '*', '/', '%', '(', ')' };

    private static readonly List<string> _grouping = new List<string> { "(", ")" };
    private static readonly List<string> _operators = new List<string> { "+", "-", "*", "/", "%" };

    public static double RunEquation(ref string mathEquation)
    {
        // Validate values and get list of numbers in equation
        var numbers = new List<double>();
        double tmp;

        foreach (string s in mathEquation.Split(_allOperators))
        {
            if (s != string.Empty)
            {
                if (double.TryParse(s, out tmp))
                {
                    numbers.Add(tmp);
                }
                else
                {
                    // Handle Error - Some non-numeric, operator, or grouping character found in string
                    throw new InvalidCastException();
                }
            }
        }

        // Begin parsing method
        EvaluateMathString(ref mathEquation, ref numbers, 0);

        // After parsing the numbers list should only have one value - the total
        return numbers[0];
    }

    // Evaluates a mathematical string and keeps track of the results in a List<double> of numbers
    private static void EvaluateMathString(ref string mathEquation, ref List<double> numbers, int index)
    {
        // Loop through each mathemtaical token in the equation
        string token = GetNextToken(mathEquation);

        while (token != string.Empty)
        {
            // Remove token from mathEquation
            mathEquation = mathEquation.Remove(0, token.Length);

            // If token is a grouping character, it affects program flow
            if (_grouping.Contains(token))
            {
                switch (token)
                {
                    case "(":
                        EvaluateMathString(ref mathEquation, ref numbers, index);
                        break;

                    case ")":
                        return;
                }
            }

            // If token is an operator, do requested operation
            if (_operators.Contains(token))
            {
                // If next token after operator is a parenthesis, call method recursively
                string nextToken = GetNextToken(mathEquation);
                if (nextToken == "(")
                {
                    EvaluateMathString(ref mathEquation, ref numbers, index + 1);
                }

                // Verify that enough numbers exist in the List<double> to complete the operation
                // and that the next token is either the number expected, or it was a ( meaning 
                // that this was called recursively and that the number changed
                if (numbers.Count > (index + 1) &&
                    (double.Parse(nextToken) == numbers[index + 1] || nextToken == "("))
                {
                    switch (token)
                    {
                        case "+":
                            numbers[index] = numbers[index] + numbers[index + 1];
                            break;
                        case "-":
                            numbers[index] = numbers[index] - numbers[index + 1];
                            break;
                        case "*":
                            numbers[index] = numbers[index] * numbers[index + 1];
                            break;
                        case "/":
                            numbers[index] = numbers[index] / numbers[index + 1];
                            break;
                        case "%":
                            numbers[index] = numbers[index] % numbers[index + 1];
                            break;
                    }
                    numbers.RemoveAt(index + 1);
                }
                else
                {
                    // Handle Error - Next token is not the expected number
                    throw new FormatException("Next token is not the expected number");
                }
            }

            token = GetNextToken(mathEquation);
        }
    }

    // Gets the next mathematical token in the equation
    private static string GetNextToken(string mathEquation)
    {
        // If we're at the end of the equation, return string.empty
        if (mathEquation == string.Empty)
        {
            return string.Empty;
        }

        // Get next operator or numeric value in equation and return it
        string tmp = "";
        foreach (char c in mathEquation)
        {
            if (_allOperators.Contains(c))
            {
                return (tmp == "" ? c.ToString() : tmp);
            }
            else
            {
                tmp += c;
            }
        }

        return tmp;
    }
} 
```

但老实说，如果这些值仅以单一形式使用，那么我只需`Loaded`在 View 后面的代码中设置事件中的值 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:38:43.837

将那些静态的放在 app.config 中，它们会更干净。

使用 app.config，您首先必须引用`System.Configuration`.

然后你可以这样做（**可能涉及一些类型转换**）：

```
 ConfigurationManager.AppSettings["MarginInner"]; 
```

要检索：

```
<configuration>
    <appsettings>
        <add key="MarginInner" value="6D" />
    </appsettings>
</configuration> 
```

然后可能有一个静态类来保存动态计算，例如：

```
public class CalculationHelper
{
    //your dynamic properties in here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:43:46.260

mattytommo 的答案仅解决您拥有的常量值（边距和笔画粗细），而不是计算字段。

我会结合 Matty 所说的添加一个设置类，该类从 app.config 文件中检索常量值并进行所需的适当计算，然后我可以在 XAML 中引用适当的属性

IE

```
{ Settings.MainWindow.LayoutWidth } 
```

编辑 ：

看起来马蒂和他在我发帖之间编辑的一样；）

# ios - 这些注册表单是如何在 ios 中创建的？

> ID：15661497
> 
> 赞同：1
> 
> 时间：2013-03-27T14:33:25.403
> 
> 标签：ios, objective-c, xcode

这些表单是如何在ios中创建的？ ![在此处输入图像描述](../Images/ce88d1f14503ea69b67a2458a09fb5d1.png)

它是一个表格视图，每个单元格内都有一个 UILabel 和 UITextLabel，并且图片上有一个（UIImageView 和 UILabel？

我需要设计一个可以动态的表单，我猜这可能是这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:34:38.550

> 它是一个表格视图，每个单元格内都有一个 UILabel 和 UITextLabel，并且图片上有一个（UIImageView 和 UILabel？

是的。

使用`UITableView`. 基`UITableViewCell`类已经有一些您可以使用的标签。`textLabel`用于左侧的粗体文本。除了使用它之外，您还可以将自定义设置`accessoryView`为`UITextField`.

还有一些有用的链接：

[QuickDialog](http://maniacdev.com/2011/08/open-source-easy-uitableview-replacement-library-great-for-login-screensconfig-screens/) - 开源表单库
[创建表单](http://windrealm.org/tutorials/uitableview_uitextfield_form.php)- 解释如何自己做的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:36:14.040

是的，它看起来像一个`UITableView`带有分组样式和一些页脚文本，带有标签和单元格内的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:35:08.493

您必须使用表格视图样式`UITableViewStyleGrouped`

```
UITableView * mytableView = [[UITableView alloc] initWithFrame:frame style:UITableViewStyleGrouped]; 
```

# listview - JavaFX - 带有图像按钮的 ListView 项

> ID：15661500
> 
> 赞同：20
> 
> 时间：2013-03-27T14:33:33.997
> 
> 标签：listview, javafx

我想知道是否可以在每个 ListView 项之后添加一个图像按钮。例如：![样本](../Images/e8250dc27c86feb19b6ba2f2f6c90b97.png)

那些红色方块应该有一个按钮。如果可能，我该如何处理项目按钮的点击事件？

编辑：如果有另一个控件可以做到这一点，请告诉我。我正在测试 TableView。

提前致谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-28T20:02:53.813

我最近正在测试这个。我的解决方案：

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ListCell;
import javafx.scene.control.ListView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Pane;
import javafx.scene.layout.Priority;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
import javafx.util.Callback;

public class SO extends Application {
    static class XCell extends ListCell<String> {
        HBox hbox = new HBox();
        Label label = new Label("(empty)");
        Pane pane = new Pane();
        Button button = new Button("(>)");
        String lastItem;

        public XCell() {
            super();
            hbox.getChildren().addAll(label, pane, button);
            HBox.setHgrow(pane, Priority.ALWAYS);
            button.setOnAction(new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent event) {
                    System.out.println(lastItem + " : " + event);
                }
            });
        }

        @Override
        protected void updateItem(String item, boolean empty) {
            super.updateItem(item, empty);
            setText(null);  // No text in label of super class
            if (empty) {
                lastItem = null;
                setGraphic(null);
            } else {
                lastItem = item;
                label.setText(item!=null ? item : "<null>");
                setGraphic(hbox);
            }
        }
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        StackPane pane = new StackPane();
        Scene scene = new Scene(pane, 300, 150);
        primaryStage.setScene(scene);
        ObservableList<String> list = FXCollections.observableArrayList(
                "Item 1", "Item 2", "Item 3", "Item 4");
        ListView<String> lv = new ListView<>(list);
        lv.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
            @Override
            public ListCell<String> call(ListView<String> param) {
                return new XCell();
            }
        });
        pane.getChildren().add(lv);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

单元格将如下所示：

![带按钮的自定义列表单元格](../Images/09a170273e754f469892cf82c187de87.png)

相关部分是`XCell.updateItem`方法和`setGraphic`调用。通常应该为标签设置一个图标，`setGraphic()`但设置一个复杂的节点同样有效 - 在这种情况下是带有标签和按钮的 HBox。

您需要确保 Button 的事件处理程序引用列表中的正确项目。在下面的第一个链接中，提到了当前选择的项目现在可能就足够了。所以在处理按钮的事件时获取列表中当前选择的索引。

你可能想看看这些：

*   [http://fxexperience.com/2012/05/listview-custom-cell-factories-and-context-menus/](http://fxexperience.com/2012/05/listview-custom-cell-factories-and-context-menus/)
*   [http://docs.oracle.com/javafx/2/ui_controls/list-view.htm](http://docs.oracle.com/javafx/2/ui_controls/list-view.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-11T10:15:42.610

您还可以使用自定义 HBox 对象列表。下面的示例展示了使用此类自定义 HBox 内部类以及将此类对象列表嵌套到 ListView 控件中的过程。

```
import java.util.ArrayList;
import java.util.List;
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.stage.Stage;

public class ListViewDemo extends Application {

     public static class HBoxCell extends HBox {
          Label label = new Label();
          Button button = new Button();

          HBoxCell(String labelText, String buttonText) {
               super();

               label.setText(labelText);
               label.setMaxWidth(Double.MAX_VALUE);
               HBox.setHgrow(label, Priority.ALWAYS);

               button.setText(buttonText);

               this.getChildren().addAll(label, button);
          }
     }

     public Parent createContent() {
          BorderPane layout = new BorderPane();

          List<HBoxCell> list = new ArrayList<>();
          for (int i = 0; i < 12; i++) {
               list.add(new HBoxCell("Item " + i, "Button " + i));
          }

          ListView<HBoxCell> listView = new ListView<HBoxCell>();
          ObservableList<HBoxCell> myObservableList = FXCollections.observableList(list);
          listView.setItems(myObservableList);

          layout.setCenter(listView);

          return layout;
     }

     @Override
     public void start(Stage stage) throws Exception {
          stage.setScene(new Scene(createContent()));
          stage.setWidth(300);
          stage.setHeight(200);
          stage.show();
     }

     public static void main(String args[]) {
          launch(args);
     }
} 
```

此实现的结果将如下所示：

![在此处输入图像描述](../Images/9448c09dcc819a0e8d71b5014af10aa8.png)

但是，为了有效地管理 Buttons 事件，您应该考虑在 HBoxCustom 构造方法中添加额外的自定义 Button 对象，并创建一个适当的方法，该方法将允许您控制按钮单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T17:26:23.507

当我的列表不大并且我没有添加更多控件使节点更复杂时，以前的解决方案工作正常。当我添加更多控件时，我发现并发问题，可能也是因为我正在绘制具有超过 12000 个对象（线和多边形）的地图。问题（我可以看到）是 ListView 中的某些项目将在内部重复，这意味着 cellfactory 将被创建两次和/或不被创建。似乎“updateItem”是线程队列中的最后一个。所以要解决这个问题，我必须在创建 ListView 之前创建节点。像这样的东西：

```
 ObservableList<Node> list = FXCollections.observableArrayList();
    for (AisaLayer layer : listLayers) {
        mapLayers.put(layer.getLayerName(), layer);
        list.add(new AisaNode(layer));
        System.out.println("Ordered:" + layer.getLayerName());
    }
    lv.setItems(list);
    lv.setCellFactory(new Callback<ListView<Node>, ListCell<Node>>() {
        @Override
        public ListCell<Node> call(ListView<Node> param) {
            return new DefaultListCell<>();
        }
    }); 
```

我使用了 fxexperience.com 推荐的简单 DefaultListCell

# php - Codeigniter 重新验证表单

> ID：15661501
> 
> 赞同：1
> 
> 时间：2013-03-27T14:33:36.627
> 
> 标签：php, forms, codeigniter, post, validation

我使用 codeigniter 工作了几个 monts，现在我遇到了一些问题。我有一个带有多个输入字段的简单表单。可以说姓名、地址、电话、电话网络提供商。所以我将必需的规则设置为名称和地址，但电话和网络是可选的。痛苦来了。如果在电话字段中输入了某些内容，我想为网络设置所需的规则。我可以用 JS 做到这一点，但这不是重点。我也想要服务器端检查。有谁知道如何在更多的codeigniter环境中做到这一点？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:35:26.443

~~这是一种常见的情况，很容易实现：只需提供电话号码规则，但不要将其指定为“必需”。~~

您可以使用一些新的级联规则来修改表单验证模块，但为什么不简单地自己进行所需的检查呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:26:28.847

在您设置表单验证规则的控制器中，执行以下操作：

```
if ($this->input->post('phone_number') != '') {
    $this->form_validation->set_rules('phone_carrier', 'Phone carrier', 'required');
} 
```

这样，只有在提交电话号码时才会设置 phone_carrier 的规则。您的验证将按照设置规则中的定义进行。

那会奏效吗？

# javascript - 使用 MessageBox，更改为“是”或“否”

> ID：15661502
> 
> 赞同：1
> 
> 时间：2013-03-27T14:33:38.780
> 
> 标签：javascript, jquery, asp.net, messagebox

```
string LocalWorkSiteName = WorkSite.Site_Name;

System.Windows.Forms.MessageBox.Show("Are you sure you want to delete invoice " for " + LocalWorkSiteName); 
```

1）为什么弹窗总是出现在浏览器后面？我希望它加载到浏览器前面。

2) 如何添加“是”和“否”按钮并删除当前的“确定”？所以在后面的代码中，如果“是”做一件事，如果“否”做另一件事：

```
if(yesIsPressed)
{
...
}
if(noIsPressed)
{
...
} 
```

我是用正确的方法还是有更合适的方法？

* * *

**编辑** 感谢大家的回复......要去JS方面，但我可能需要一些帮助。所以我的按钮：

```
<asp:Button runat="server" ID="RemoveInvoice" Text="Remove Invoice" OnClick="RemoveInvoice_Click" CssClass="FadeOutOnEdit" /> 
```

运行函数“RemoveInvoice_CLick”后面的代码...我也可以让它运行 JS 还是需要将其更改为输入按钮，然后从那里执行更新背后的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:40:04.557

也许是这样的：

```
DialogResult result1 = System.Windows.Forms.MessageBox.Show("Are you sure you want to delete invoice for " + LocalWorkSiteName,
        "Important Question",
        MessageBoxButtons.YesNo);

if(result1 == DialogResult.Yes) { ... }
if(resutl1 == DialogResult.No) { ... } 
```

笔记*

但是您不应该使用**MessageBox** :) 这样做，因为那是针对桌面应用程序 ( *System.Windows.Forms* )，您应该使用一些 jQuery 或 javascript 代码。它甚至不会显示在您的客户端，它只会在您的服务器上弹出。

您可以尝试使用[jQueryUI 对话框](http://jqueryui.com/dialog/#modal-confirmation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:45:14.583

您正在网页中加载 Windows 窗体消息框 - 这是桌面应用程序的控件，而不是 Web 应用程序。使用 JavaScript 弹出窗口可能会更好地为您服务，它是一个 Web 控件。使用 jQuery，您可以将回调附加到按钮的单击事件：

```
$("#buttonid").click(function() {
  var answer = confirm("Are you sure you want to delete invoice for " + LocalWorkSiteName + "?");
  if (answer)
  {
       // post to server-side
  }
}); 
```

* * *

或者，如果您想坚持使用 ASP.net 按钮控件，您可以在其标记中连接事件处理程序：

```
<asp:Button id="RemoveInvoice" runat="server" Text="Remove Invoice" 
        OnClick ="RemoveInvoice_Click" 
        OnClientClick="return confirm('Are you sure you want to delete invoice?');" 
        CssClass="FadeOutOnEdit" /> 
```

`OnClientClick`如果代码返回 false，该属性将阻止服务器端事件触发，如果用户在调用`confirm`.

# android - 异步任务未在 2.3.3 中运行 doInBackground

> ID：15661505
> 
> 赞同：2
> 
> 时间：2013-03-27T14:33:47.640
> 
> 标签：android, android-asynctask

我正在开发一个安卓应用程序。现在我想使用 AsyncTask。它在 android 4.1 中完美运行，但 doInBackground 方法未在 android 2.3.3 中运行。logcat中没有错误..

我有一个扩展 vom AsyncTask 的类。所以我从 new Class().execute() 开始。构造函数始终有效。

您知道我如何解决 android 2.3.3 中的问题吗？

**编辑：** 我的代码：

```
private class TopicList extends AsyncTask<String, Integer, String> {
    private TopicList(){
        Log.e("Constructor","Works");
    }
    @Override
    protected String doInBackground(String... arg0) {
        Log.e("InBackground","Works");
        new Thread(new Runnable() {
            public void run() {
       // Network processes
                }
        }).start();
        return null;
    }
} 
```

我有目标版本 17 和 minSdkVersion 7。您还需要更多信息吗？我使用以下代码执行它：

```
new TopicList().execute(); 
```

logcat 中的错误日志只显示构造函数有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:58:02.720

AsyncTask API：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

阅读上面的文档后，很明显 AsyncTask 在 2.3.3 版本中应该可以正常工作（它是在 API 3 = Android 1.5 中添加的）。

您确定正在传递正确的参数吗？这是一个简单的异步任务示例，它调用 WebService 并在活动的 TextView 中显示结果，我希望这可以帮助您走上正轨：

```
private class AsyncTaskWebServiceCaller extends AsyncTask<Void, Void, String> {
    private ProgressDialog dialog = new ProgressDialog(MainActivity.this);

    @Override
    protected void onPreExecute() {
        dialog.setMessage("Connecting to Web Service...");
        dialog.show();
    }

    @Override
    protected String doInBackground(Void...voids) {
        //create the envelope for the message
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = false;

        //get the card (SOAPObject) that will be put into the envelope
        SoapObject soapObject = new SoapObject(WSDL_TARGET_NAMESPACE, OPERATION_NAME);
        envelope.setOutputSoapObject(soapObject);

        //put something on the card  
        PropertyInfo propertyInfo = new PropertyInfo();
        propertyInfo.setType(PropertyInfo.STRING_CLASS);
        propertyInfo.setName("macAddress");
        propertyInfo.setValue(macAddress);
        soapObject.addProperty(propertyInfo);

        //call WebService
        try {
            HttpTransportSE httpTransportSE = new HttpTransportSE(SOAP_ADDRESS);
            httpTransportSE.debug = true;
            httpTransportSE.call(SOAP_ACTION, envelope);
            Object response = envelope.getResponse();
            return response.toString();             
        } catch (Exception e) {
            String text = "Oops!! App has crashed with exception: "+e.getMessage() + "\n" + "Stack trace below:\n";
            StackTraceElement[] stackTrace = e.getStackTrace();
            for (StackTraceElement stackTraceElement : stackTrace) {
                text += stackTraceElement.toString() + "\n";
            }
            return text;
        }
    }

    @Override
    protected void onPostExecute(String result) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
        TextView textView = (TextView)findViewById(R.id.textView1);
        textView.setText(result);
    }

} 
```

要调用 AsyncTask，只需执行以下操作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    new AsyncTaskWebServiceCaller().execute();
} 
```

# sift - 结合 5 个图像的 Sift 描述符

> ID：15661507
> 
> 赞同：1
> 
> 时间：2013-03-27T14:33:49.660
> 
> 标签：sift, descriptor, object-recognition

我想将同一对象的 5 个图像的描述符组合到一个描述符文件中，以便我可以在参考图像的任何视图中识别该对象。我需要消除从 5 个图像中保存的类似描述符的重复。我所需要的只是所有 5 个视图中对象的一组不重复的、唯一的描述符。我怎么才能得到它？

# java - 通过 javax.swing.text.Element 从 JTextPane 获取组件？

> ID：15661508
> 
> 赞同：5
> 
> 时间：2013-03-27T14:33:52.630
> 
> 标签：java, swing, element, jtextpane, jcomponent

我正在使用 a`JTextPane`来显示字符和符号，后者由自定义绘制的`JComponents`. 例如，文本窗格可能会显示如下内容： ![在此处输入图像描述](../Images/57f16d3fad102443b4dbc59ec606959d.png) 文本窗格是用户可编辑的，并且允许用户通过任意位置的按钮添加更多符号并作为选定文本的替换。我通过`JTextPane.insertComponent()`方法做到这一点。在应用程序的某个时刻，我需要知道文本窗格中当前显示的内容，我指的不仅是输入的文本，还包括其中包含的确切组件。

我在处理`Positions`和`DocumentListeners`管理我的文本窗格的内容方面遇到了很多麻烦，但我一直在造成比我解决的问题更多的问题。这就是为什么我最终决定，我的麻烦可能是由于我的设计错误，所以我决定看看，如果我不能通过文本窗格访问我的组件。

翻遍了`AbstractDocument`相关类的文档和源代码，找到了接口`javax.swing.text.Element`。然后我让我的应用程序输出

```
for(int i = 0; i < textPane.getDocument().getLength(); i++) {
    System.out.println(((StyledDocument) textPane.getDocument()).getCharacterElement(i));
} 
```

这给了我：

> 叶元素（内容）0,4
> 
> 叶元素（内容）0,4
> 
> 叶元素（内容）0,4
> 
> 叶元素（内容）0,4
> 
> LeafElement（组件）4,5
> 
> 叶元素（内容）5,9
> 
> 叶元素（内容）5,9
> 
> 叶元素（内容）5,9
> 
> 叶元素（内容）5,9
> 
> LeafElement（组件）9,10

看到`LeafElements`我得到的似乎确实有一些关于在 中的哪个位置显示什么的信息`Document`，我认为必须有可能在该位置获得实际内容。又搜索了半个小时如何获取每个元素所代表的内容，我放弃了，决定在这里发布我的问题，希望你们中的一些人可能知道如何完成这个！？

我见过这个[问题](https://stackoverflow.com/questions/12859751/how-to-remove-component-from-jtextpane?rq=1)，有人试图通过 访问组件`textPane.getComponents()`，它返回一个组件数组，其中包含实际包含的组件的确切数量`JTextPane`，但它们都是 type `javax.swing.text.ComponentView$Invalidator`，这显然对我没有用。也许我只是不知道如何从这里正确继续，因为转换为我的符号的原始类型不起作用。

**tl;博士**

如何从文本窗格中获取位于 a`JComponent`文本内的 a`JTextPane`及其位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T20:57:09.427

您可以遍历文本窗格`StyledDocument`以查找代表组件或图标的元素，如下所示。

![图片](../Images/f41303edc0d1cb662c0801f6da802cad.png)

```
分支元素（部分）0,7

BranchElement(段落) 0,7

叶元素（内容）0,4

叶元素（图标）4,5

类 javax.swing.plaf.IconUIResource
LeafElement（组件）5,6

类 javax.swing.JLabel
叶元素（内容）6,7

```

SSCCE：

```
/**
 * @see http://stackoverflow.com/a/15669307/230513
 * @see http://stackoverflow.com/questions/2883413
 */
public class DocumentParse {

    private static final String ELEM = AbstractDocument.ElementNameAttribute;
    private static final String ICON = StyleConstants.IconElementName;
    private static final String COMP = StyleConstants.ComponentElementName;

    public static void main(String args[]) throws Exception {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextPane jtp = new JTextPane();
        StyledDocument doc = (StyledDocument) jtp.getDocument();
        SimpleAttributeSet normal = new SimpleAttributeSet();
        StyleConstants.setFontFamily(normal, "Serif");
        StyleConstants.setFontSize(normal, 72);
        StyleConstants.setForeground(normal, Color.blue);
        doc.insertString(doc.getLength(), "Test", normal);
        jtp.setSelectionStart(doc.getLength());
        jtp.insertIcon(UIManager.getIcon("OptionPane.warningIcon"));
        jtp.setSelectionStart(doc.getLength());
        jtp.insertComponent(new JLabel("Label"));
        jtp.setSelectionStart(doc.getLength());

        ElementIterator iterator = new ElementIterator(doc);
        Element element;
        while ((element = iterator.next()) != null) {
            System.out.println(element);
            AttributeSet as = element.getAttributes();
            if (as.containsAttribute(ELEM, ICON)) {
                System.out.println(StyleConstants.getIcon(as).getClass());
            }
            if (as.containsAttribute(ELEM, COMP)) {
                System.out.println(StyleConstants.getComponent(as).getClass());
            }
        }

        f.add(jtp);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T06:54:08.747

`javax.swing.text.ComponentView$Invalidator`从 ComponentView 中可以看到，原始组件是 的第一个（也是唯一的）子组件。

您可以获取无效器列表并使用它们的子级来访问插入的组件。

# c# - 试图在c#中将图像插入pdf‏

> ID：15661513
> 
> 赞同：3
> 
> 时间：2013-03-27T14:34:05.357
> 
> 标签：c#, image, pdf, itextsharp

我需要根据生成的条形码文件插入图像。

我遇到的问题是使用 iTextSharp 库时，我通常可以填写文本，例如

```
PdfReader pdfReader = new PdfReader(oldFile);
PdfStamper pdfStamper = new PdfStamper(pdfReader, outFile);
AcroFields fields = pdfStamper.AcroFields;
fields.SetField("topmostSubform[0].Page1[0].BARCODE[0]", "X974005-1"); 
```

虽然在pdf中有一个字段，如果我点击它，它会提示我将图像插入字段，但我似乎无法以编程方式完成此操作。基于一些谷歌搜索和偶然发现的 stackoverflow 页面，我插入了以下代码，希望它能够按需要工作：

```
string fieldName = "topmostSubform[0].Page1[0].BARCODE[0]";
string imageFile = "test-barcode.jpg";
AcroFields.FieldPosition fieldPosition = pdfStamper.AcroFields.GetFieldPositions(fieldName)[0];
PushbuttonField imageField = new PushbuttonField(pdfStamper.Writer, fieldPosition.position, fieldName);
imageField.Layout = PushbuttonField.LAYOUT_ICON_ONLY;
imageField.Image = iTextSharp.text.Image.GetInstance(imageFile);
imageField.ScaleIcon = PushbuttonField.SCALE_ICON_ALWAYS;
imageField.ProportionalIcon = false;
imageField.Options = BaseField.READ_ONLY;
pdfStamper.AcroFields.RemoveField(fieldName);               
pdfStamper.AddAnnotation(imageField.Field, fieldPosition.page); 
```

我遇到的问题是，当它按预期删除现有字段时，当我打开新创建的 PDF 文件时，我看不到这个带有预期图像文件的新按钮字段，而是一个空白，但是当我通过调试执行此操作时模式我可以看到它至少获取了图像文件的正确尺寸，所以我不知道我在这里做错了什么。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:20:50.560

如果你阅读官方文档（即：[我的书](http://itextpdf.com/book)），你会发现这个例子：[ReplaceIcon.cs](http://sourceforge.net/p/itextsharp/code/HEAD/tree/trunk/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter08/ReplaceIcon.cs)

您正在使用删除该字段`pdfStamper.AcroFields.RemoveField(fieldName);`，随后您尝试使用添加新字段`pdfStamper.AddAnnotation(imageField.Field, fieldPosition.page);`

那是错误的。您应该使用替换字段`pdfStamper.AcroFields.ReplacePushbuttonField(fieldname, imageField.Field);`

该`ReplacePushbuttonField()`方法在幕后复制了大量设置。

# c# - 创建 PDF 文件？

> ID：15661514
> 
> 赞同：3
> 
> 时间：2013-03-27T14:34:06.957
> 
> 标签：c#, pdf, pdf-generation, itextsharp

我研究了 iTextSharp 和 SharpPDF 和 Report.Net 以及 PDFSharp。

这些开源项目都没有良好的文档或不适用于 VS 2012。

有没有人有推荐的解决方案或者可以给我看文档？

我的雇主屏蔽了许多网站，虽然谷歌没有被屏蔽，但有些结果被屏蔽了。

我计划将 C# 与 WinForms 一起使用并从 Access DB 获取我的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:37:03.527

试试[这个例子](http://mlichtenberg.wordpress.com/2011/04/13/using-c-and-itextsharp-to-create-a-pdf/)：

```
using iTextSharp.text;
// Set up the fonts to be used on the pages 
private Font _largeFont = new Font(Font.FontFamily.HELVETICA, 18, Font.BOLD, BaseColor.BLACK); 
private Font _standardFont = new Font(Font.FontFamily.HELVETICA, 14, Font.NORMAL, BaseColor.BLACK); 
private Font _smallFont = new Font(Font.FontFamily.HELVETICA, 10, Font.NORMAL, BaseColor.BLACK);
public void Build() 
{ 
   iTextSharp.text.Document doc = null;
   try 
   { 
       // Initialize the PDF document 
       doc = new Document(); 
       iTextSharp.text.pdf.PdfWriter writer = iTextSharp.text.pdf.PdfWriter.GetInstance(doc, 
           new System.IO.FileStream(System.IO.Directory.GetCurrentDirectory() + "\\ScienceReport.pdf", 
               System.IO.FileMode.Create));
       // Set margins and page size for the document 
       doc.SetMargins(50, 50, 50, 50); 
       // There are a huge number of possible page sizes, including such sizes as 
       // EXECUTIVE, LEGAL, LETTER_LANDSCAPE, and NOTE 
       doc.SetPageSize(new iTextSharp.text.Rectangle(iTextSharp.text.PageSize.LETTER.Width, 
           iTextSharp.text.PageSize.LETTER.Height));
       // Add metadata to the document.  This information is visible when viewing the 
       // document properities within Adobe Reader. 
       doc.AddTitle("My Science Report"); 
       doc.AddCreator("M. Lichtenberg"); 
       doc.AddKeywords("paper airplanes");
       // Add Xmp metadata to the document. 
       this.CreateXmpMetadata(writer);
       // Open the document for writing content 
       doc.Open();
       // Add pages to the document 
       this.AddPageWithBasicFormatting(doc); 
       this.AddPageWithInternalLinks(doc); 
       this.AddPageWithBulletList(doc); 
       this.AddPageWithExternalLinks(doc); 
       this.AddPageWithImage(doc, System.IO.Directory.GetCurrentDirectory() + "\\FinalGraph.jpg");
       // Add page labels to the document 
       iTextSharp.text.pdf.PdfPageLabels pdfPageLabels = new iTextSharp.text.pdf.PdfPageLabels(); 
       pdfPageLabels.AddPageLabel(1, iTextSharp.text.pdf.PdfPageLabels.EMPTY, "Basic Formatting"); 
       pdfPageLabels.AddPageLabel(2, iTextSharp.text.pdf.PdfPageLabels.EMPTY, "Internal Links"); 
       pdfPageLabels.AddPageLabel(3, iTextSharp.text.pdf.PdfPageLabels.EMPTY, "Bullet List"); 
       pdfPageLabels.AddPageLabel(4, iTextSharp.text.pdf.PdfPageLabels.EMPTY, "External Links"); 
       pdfPageLabels.AddPageLabel(5, iTextSharp.text.pdf.PdfPageLabels.EMPTY, "Image"); 
       writer.PageLabels = pdfPageLabels; 
   } 
   catch (iTextSharp.text.DocumentException dex) 
   { 
       // Handle iTextSharp errors 
   } 
   finally 
   { 
       // Clean up 
       doc.Close(); 
       doc = null; 
   } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:56:08.827

**嘿@Cocoa Dev 得到这个具有不同功能的完整示例。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.IO;
using iTextSharp.text.pdf;
using System.Data;
using System.Text;
using System.util.collections;
using iTextSharp.text;
using System.Net.Mail;

public partial class PDFScenarios : System.Web.UI.Page
{
public string P_InputStream = "~/MyPDFTemplates/ex1.pdf";
public string P_InputStream2 = "~/MyPDFTemplates/ContactInfo.pdf";
public string P_InputStream3 = "~/MyPDFTemplates/MulPages.pdf";
public string P_InputStream4 = "~/MyPDFTemplates/CompanyLetterHead.pdf";
public string P_OutputStream = "~/MyPDFOutputs/ex1_1.pdf";

//Read all 'Form values/keys' from an existing multi-page PDF document
public void ReadPDFformDataPageWise()
{
PdfReader reader = new PdfReader(Server.MapPath(P_InputStream3));
AcroFields form = reader.AcroFields;
try
{
for (int page = 1; page <= reader.NumberOfPages; page++)
{
    foreach (KeyValuePair<string, AcroFields.Item> kvp in form.Fields)
    {
        switch (form.GetFieldType(kvp.Key))
        {
            case AcroFields.FIELD_TYPE_CHECKBOX:
            case AcroFields.FIELD_TYPE_COMBO:
            case AcroFields.FIELD_TYPE_LIST:
            case AcroFields.FIELD_TYPE_RADIOBUTTON:
            case AcroFields.FIELD_TYPE_NONE:
            case AcroFields.FIELD_TYPE_PUSHBUTTON:
            case AcroFields.FIELD_TYPE_SIGNATURE:
            case AcroFields.FIELD_TYPE_TEXT:
                int fileType = form.GetFieldType(kvp.Key);
                string fieldValue = form.GetField(kvp.Key);
                string translatedFileName = form.GetTranslatedFieldName(kvp.Key);
                break;
        }
    }
}
}
catch
{
}
finally
{
    reader.Close();
}
}

//Read and alter form values for only second and 
//third page of an existing multi page PDF doc.
//Save the changes in a brand new pdf file.
public void ReadAlterPDFformDataInSelectedPages()
{
PdfReader reader = new PdfReader(Server.MapPath(P_InputStream3));
reader.SelectPages("1-2"); //Work with only page# 1 & 2
using (PdfStamper stamper = new PdfStamper(reader, new FileStream(Server.MapPath(P_OutputStream), FileMode.Create)))
{
    AcroFields form = stamper.AcroFields;
    var fieldKeys = form.Fields.Keys;
    foreach (string fieldKey in fieldKeys)
    {
        //Replace Address Form field with my custom data
        if (fieldKey.Contains("Address"))
        {
            form.SetField(fieldKey, "MyCustomAddress");
        }
    }
    //The below will make sure the fields are not editable in
    //the output PDF.
    stamper.FormFlattening = true;
}
}

//Extract text from an existing PDF's second page.
private string ExtractText()
{
    PdfReader reader = new PdfReader(Server.MapPath(P_InputStream3));
    string txt =  PdfTextExtractor.GetTextFromPage(reader, 2, new LocationTextExtractionStrategy());
    return txt;
}

//Create a brand new PDF from scratch and without a template
private void CreatePDFNoTemplate()
{
    Document pdfDoc = new Document();
    PdfWriter writer = PdfWriter.GetInstance(pdfDoc, new FileStream(Server.MapPath(P_OutputStream), FileMode.OpenOrCreate));

    pdfDoc.Open();
    pdfDoc.Add(new Paragraph("Some data"));
    PdfContentByte cb = writer.DirectContent;
    cb.MoveTo(pdfDoc.PageSize.Width / 2, pdfDoc.PageSize.Height / 2);
    cb.LineTo(pdfDoc.PageSize.Width / 2, pdfDoc.PageSize.Height);
    cb.Stroke();

    pdfDoc.Close(); 
}

private void fillPDFForm()
{
    string formFile = Server.MapPath(P_InputStream);
    string newFile = Server.MapPath(P_OutputStream);
    PdfReader reader = new PdfReader(formFile);
    using (PdfStamper stamper = new PdfStamper(reader, new FileStream(newFile, FileMode.Create)))
    {
        AcroFields fields = stamper.AcroFields;

        // set form fields
        fields.SetField("name", "John Doe");
        fields.SetField("address", "xxxxx, yyyy");
        fields.SetField("postal_code", "12345");
        fields.SetField("email", "johndoe@xxx.com");

        // flatten form fields and close document
        stamper.FormFlattening = true;
        stamper.Close();
    }
}

//Helper functions
private void SendEmail(MemoryStream ms)
{
    MailAddress _From = new MailAddress("XXX@domain.com");
    MailAddress _To = new MailAddress("YYY@a.com"); 
    MailMessage email = new MailMessage(_From, _To); 
    Attachment attach = new Attachment(ms,  new System.Net.Mime.ContentType("application/pdf")); 
    email.Attachments.Add(attach);  
    SmtpClient mailSender = new SmtpClient("Gmail-Server"); 
    mailSender.Send(email);  
}

private void DownloadAsPDF(MemoryStream ms)
{
    Response.Clear();
    Response.ClearContent();
    Response.ClearHeaders();
    Response.ContentType = "application/pdf";
    Response.AppendHeader("Content-Disposition", "attachment;filename=abc.pdf");
    Response.OutputStream.Write(ms.GetBuffer(), 0, ms.GetBuffer().Length);
    Response.OutputStream.Flush();
    Response.OutputStream.Close();
    Response.End();
    ms.Close();
}

//Working with Memory Stream and PDF
public void CreatePDFFromMemoryStream()
{
    //(1)using PDFWriter
    Document doc = new Document();
    MemoryStream memoryStream = new MemoryStream();
    PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);
    doc.Open();
    doc.Add(new Paragraph("Some Text"));
    writer.CloseStream = false;
    doc.Close();
    //Get the pointer to the beginning of the stream. 
    memoryStream.Position = 0;
    //You may use this PDF in memorystream to send as an attachment in an email
    //OR download as a PDF
    SendEmail(memoryStream);
    DownloadAsPDF(memoryStream);

    //(2)Another way using PdfStamper
    PdfReader reader = new PdfReader(Server.MapPath(P_InputStream2));
    using (MemoryStream ms = new MemoryStream())
    {
        PdfStamper stamper = new PdfStamper(reader, ms);
        AcroFields fields = stamper.AcroFields;
        fields.SetField("SomeField", "MyValueFromDB");
        stamper.FormFlattening = true;
        stamper.Close();
        SendEmail(ms);
    }
}

//Burst-- Make each page of an existing multi-page PDF document 
//as another brand new PDF document
private void PDFBurst()
{
    string pdfTemplatePath = Server.MapPath(P_InputStream3);
    PdfReader reader = new PdfReader(pdfTemplatePath);
    //PdfCopy copy;
    PdfSmartCopy copy;
    for (int i = 1; i < reader.NumberOfPages; i++)
    {
        Document d1 = new Document();
        copy = new PdfSmartCopy(d1, new FileStream(Server.MapPath(P_OutputStream).Replace(".pdf", i.ToString() + ".pdf"), FileMode.Create));
        d1.Open();
        copy.AddPage(copy.GetImportedPage(reader, i));
        d1.Close();
    }
}

//Copy a set of form fields from an existing PDF template/doc
//and keep appending to a brand new PDF file.
//The copied set of fields will have different values.
private void AppendSetOfFormFields()
{
    PdfCopyFields _copy = new PdfCopyFields(new FileStream(Server.MapPath(P_OutputStream), FileMode.Create));
    _copy.AddDocument(new PdfReader(a1("1")));
    _copy.AddDocument(new PdfReader(a1("2")));
    _copy.AddDocument(new PdfReader(new FileStream(Server.MapPath("~/MyPDFTemplates/Myaspx.pdf"), FileMode.Open)));
    _copy.Close();
}
//ConcatenateForms
private byte[] a1(string _ToAppend)
{
    using (var existingFileStream = new FileStream(Server.MapPath(P_InputStream), FileMode.Open))
    using (MemoryStream stream = new MemoryStream())
    {
        // Open existing PDF
        var pdfReader = new PdfReader(existingFileStream);
        var stamper = new PdfStamper(pdfReader, stream);
        var form = stamper.AcroFields;
        var fieldKeys = form.Fields.Keys;

        foreach (string fieldKey in fieldKeys)
        {
            form.RenameField(fieldKey, fieldKey + _ToAppend);
        }
        // "Flatten" the form so it wont be editable/usable anymore
        stamper.FormFlattening = true;
        stamper.Close();
        pdfReader.Close();
        return stream.ToArray();
    }
}

//Working with Image
private void AddAnImage()
{
    using (var inputPdfStream = new FileStream(@"C:\MyInput.pdf", FileMode.Open))
    using (var inputImageStream = new FileStream(@"C:\img1.jpg", FileMode.Open))
    using (var outputPdfStream = new FileStream(@"C:\MyOutput.pdf", FileMode.Create))
    {
        PdfReader reader = new PdfReader(inputPdfStream);
        PdfStamper stamper = new PdfStamper(reader, outputPdfStream);
        PdfContentByte pdfContentByte = stamper.GetOverContent(1);
        var image = iTextSharp.text.Image.GetInstance(inputImageStream);
        image.SetAbsolutePosition(1, 1);
        pdfContentByte.AddImage(image);
        stamper.Close();
    }

}

//Add Company Letter-Head/Stationary to an existing pdf
private void AddCompanyStationary()
{
    PdfReader reader = new PdfReader(Server.MapPath(P_InputStream2));
    PdfReader s_reader = new PdfReader(Server.MapPath(P_InputStream4));

    using (PdfStamper stamper = new PdfStamper(reader, new FileStream(Server.MapPath(P_OutputStream), FileMode.Create)))
    {
        PdfImportedPage page = stamper.GetImportedPage(s_reader, 1);
        int n = reader.NumberOfPages;
        PdfContentByte background;
        for (int i = 1; i <= n; i++)
        {
            background = stamper.GetUnderContent(i);
            background.AddTemplate(page, 0, 0);
        }
        stamper.Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:41:55.457

您始终可以创建一个 html 页面，然后使用[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)将其转换为 pdf 。这样做的好处是您不必使用 iText 等库构建 pdf。您只需制作一个文本文件 (html)，然后将其传递给 wkhtmltopdf 可执行文件。

有关详细信息，请参阅[调用 wkhtmltopdf 从 HTML 生成 PDF](https://stackoverflow.com/questions/1331926/calling-wkhtmltopdf-to-generate-pdf-from-html/1698839#1698839)。

# wcf - 取消带有大数据的 WCF 调用？

> ID：15661515
> 
> 赞同：2
> 
> 时间：2013-03-27T14:34:08.843
> 
> 标签：wcf, asynchronous-wcf-call, large-data

我即将使用 WCF 实现 FileService。它应该能够通过提供文件内容本身和文件名来上传文件。当前的 ServiceContract 如下所示

```
[ServiceContract]
public interface IFileService
{
    [OperationContract]
    [FaultContract(typeof(FaultException))]
    byte[] LoadFile(string relativeFileNamePath);

    [OperationContract]
    [FaultContract(typeof(FaultException))]
    void SaveFile(byte[] content, string relativeFileNamePath);
} 
```

目前它工作正常，但我希望能够使用这个 Fileservice 减少我的应用程序的网络负载。一旦用户打开我的应用程序的特定部分，我就需要提供许多文件，但是一旦用户进一步浏览应用程序，我就可以取消其中的一些文件。由于我的许多文件都在 50 到 300 MB 之间，因此传输文件需要几秒钟的时间（应用程序可能在非常慢的网络上运行，可能需要一分钟）。

澄清和概述与所有其他 WCF 问题的区别：具体问题是在客户端 <-> 服务器之间提供数据是瓶颈，而不是服务本身的性能。将接口更改为流式 WCF 服务是否合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T22:55:45.703

如果文件大小超过一定数量，最好使用流。在我正在编写的企业应用程序的工作中，如果它大于 16kb，那么我们将其流式传输。如果小于这个值，我们缓冲。我们的文件服务是专门为处理这种逻辑而设计的。

当您将服务的传输模式设置为缓冲时，它会在您传输数据时在客户端和服务上进行缓冲。这意味着如果您要发送一个 300mb 的文件，它将在通话完成之前在两端的通话期间缓冲所有 300mb。这肯定会造成瓶颈。出于性能原因，仅当您有快速缓冲的小文件时才应该这样做。否则，流是最好的方法。

如果您的大部分或所有文件都是较大的文件，我会切换到使用流。

# javascript - 在深色页面上显示模态 DIV

> ID：15661528
> 
> 赞同：5
> 
> 时间：2013-03-27T14:34:33.093
> 
> 标签：javascript, jquery, asp.net, css

我有一个用户填写表格的页面。多个文本框、下拉菜单和复选框等。

当用户单击页面中的特定文本框时，我需要使屏幕变暗并弹出一个对话框，其中包含复选框列表以及确定和取消按钮。当用户单击“确定”时，它将从选中的复选框中获取文本值，关闭弹出窗口，再次点亮主页并将复选框文本以逗号分隔的字符串格式写入被单击的文本框。

我遇到的最大问题是模态弹出 div 代码。我确定我可以很好地弄清楚复选框/文本框的功能，但我一直无法让弹出窗口正常工作。

有没有人有任何简单的方法来做到这一点？目前，在我开始搞砸之前，我只有一个包含所有输入控件的简单表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:48:42.423

最简单的方法是使用 jQuery UI。它有一个“对话框”界面，非常方便且易于实现。

另一方面，如果您更愿意手动操作，那就另当别论了：

*   创建一个 DIV，它只是一个覆盖页面的黑色固定框（位置：固定）。这将是你的背景。确保它一开始不可见（设置显示：无）

*   制作另一个将显示您的对话框的固定 DIV。设置它的样式，以便您的对话框将显示在浏览器窗口的中心。

*   使用 Javascript（或 jQuery 以获得额外效果），当您的按钮被点击时，让您的黑色 DIV 和对话框 DIV 都出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:55:18.550

[使用如下所示的](http://jqueryui.com/dialog/#modal-confirmation)模态对话框：

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Dialog - Modal confirmation</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#dialog-confirm" ).dialog({
  resizable: false,
  height:140,
  modal: true,
  buttons: {
    "Delete all items": function() {
      $( this ).dialog( "close" );
    },
    Cancel: function() {
      $( this ).dialog( "close" );
    }
  }
});
});
</script>
</head>
<body>

<div id="dialog-confirm" title="Empty the recycle bin?">
<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;">    
</span>These items will be permanently deleted and cannot be recovered. Are you sure?   </p>
</div>

<p>Sed vel diam id libero <a href="http://example.com">rutrum convallis</a>. Donec aliquet leo vel magna. Phasellus rhoncus faucibus ante. Etiam bibendum, enim faucibus aliquet rhoncus, arcu felis ultricies neque, sit amet auctor elit eros a lectus.</p>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:55:53.587

您可能不想仅仅为了这个目的而添加整个 jquery ui 库。如果我在这里，你会怎么做。

因此，当您“关注”该输入时 - 让我们称之为“opensModal” - 您希望模式打开。它非常简单，而且不言自明——尽管代码很“长”。实际上，其中大部分只是为了使模态/模态外观更漂亮。开始了：

HTML：

```
<!-- the input -->
<input class="opensModal" type="text" />

<!-- the modal and its overlay -->
<div class="modalOverlay is-inactive">
    <div class="modal">
        <input type="checkbox" />
        <input type="checkbox" />
        <button>Ok</button>
        <button>Cancel</button>
    </div>
</div> 
```

CSS：

```
.modalOverlay {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    -webkit-transition: 0.6s;
}

.modalOverlay.is-inactive {
    visibility: hidden;
    background: rgba(0, 0, 0, 0);
}

.modalOverlay.is-active {
    visibility: visible;
    background: rgba(0, 0, 0, 0.4);
}

.modal {
    margin: 100px auto;
    background: #fff;
    width: 100px;
    padding: 20px;
    -webkit-transition: 0.4s 0.6s;
}

.modalOverlay.is-inactive .modal {
    visibility: hidden;
    opacity: 0;
    -webkit-transform: scale(0.1);
}

.modalOverlay.is-active .modal {
    visibility: visible;
    opacity: 1;
    -webkit-transform: scale(1);
} 
```

查询（javascript）

```
(function () {
    var $modal = $('.modalOverlay'),
        openModal = function () {
           $modal
               .removeClass('is-inactive')
               .addClass('is-active');
        },
        closeModal = function () { //use it wherever you want
            $modal
               .removeClass('is-active')
               .addClass('is-inactive');
        },
        onDocReady = function () {
            $('.opensModal').on('focus', openModal);
        };

    $(onDocReady);
})(); 
```

这是一个小提琴：http: [//jsfiddle.net/2edPZ/3/](http://jsfiddle.net/2edPZ/3/)

# c# - 如何序列化原始 json 字段？

> ID：15661529
> 
> 赞同：13
> 
> 时间：2013-03-27T14:34:34.310
> 
> 标签：c#, asp.net-mvc, linq, json.net, javascriptserializer

我在数据库中有一个存储 json 字符串的字段，我希望当我以 json 结果返回它时，该字段将作为 json 原始数据返回，而不是用引号作为字符串扭曲。

**更新 1（更多信息）：** 如果您查看图像字段，它包含一个原始 json 字符串值
，但在使用 JsonResult 对其进行序列化后，它会被引号扭曲，因为它是一种字符串，我如何告诉序列化程序将图像字段视为原始 json 数据？

```
 var db = new ModelsContainer();
        var res = db.Images.OrderByDescending(i=>i.DateCreated).Skip(skip).Take(take).Select( i => new {
            id = i.Id,
            dateCreated = i.DateCreated,
            images =  i.Images ,
            user = new {
                id = i.User.Id,
                facebookId = i.User.FacebookId,
                displayName = i.User.DisplayName
            },
            tags = i.Tags.Select( t => t.Value )
        }).ToList();

        return Json(res, JsonRequestBehavior.AllowGet);

     [
        {
            "id":"5c528e88-f3a7-4b30-9746-980867325fd1",
            "dateCreated":"\/Date(1364381593000)\/",
            "images":"[{\"source\":\"http://localhost:9242/images/f4956702/6d34/42db/b28a/397d0eaf3097.jpg\",\"width\":237,\"height\":237},{\"source\":\"http://localhost:9242/images/87d47041/1522/4d10/9325/105851aae259.jpg\",\"width\":633,\"height\":633},{\"source\":\"http://localhost:9242/images/2a639272/9067/42fb/83ee/e88f0a0878f8.jpg\",\"width\":547,\"height\":547},{\"source\":\"http://localhost:9242/images/37caa7b2/e183/4efc/96eb/487e556501b2.jpg\",\"width\":1024,\"height\":1024}]",
            "user":{"id":"ea39616d-6ff9-424b-b99b-7bee53e674bb","facebookId":"608215901","displayName":"Yonathan Garti"},
            "tags":["test","test","test"]
        },
        ...
    ] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T14:59:30.503

使用 Json.net，您可以定义自己的 JsonConverters 以应用特定的序列化行为。您可以将其应用于特定类型，或者，如果您有视图模型，则可以将其应用于特定属性。

在您的情况下，您想使用`JsonWriter.WriteRawValue`.

IE。

```
public class PlainJsonStringConverter : Newtonsoft.Json.JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(string);
    }
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return reader.Value;
    }
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteRawValue((string)value);
    }
}

public class MyViewModel
{
    public string id { get; set; }
    [Newtonsoft.Json.JsonConverter(typeof(PlainJsonStringConverter))]
    public string images { get; set; }
    /* ...  */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T14:41:22.470

您将需要反序列化数据。C# 提供了一个类来处理 JSON 数据。

[http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)

摘自[http://msdn.microsoft.com/en-us/library/bb412179.aspx](http://msdn.microsoft.com/en-us/library/bb412179.aspx)：

通常，当您在通过启用 AJAX 的端点公开的服务操作中使用数据协定类型时，Windows Communication Foundation (WCF) 会自动处理 JSON 序列化和反序列化。但是，在某些情况下，您可能需要直接使用 JSON 数据 - 这是本主题演示的场景。

```
//Deserialize the JSON-encoded data into a new instance of Person by using the ReadObject method of the DataContractJsonSerializer.

stream1.Position = 0;   
Person p2 = (Person)ser.ReadObject(stream1);

//Show the results.

Console.Write("Deserialized back, got name=");
Console.Write(p2.name);
Console.Write(", age=");
Console.WriteLine(p2.age); 
```

# teamcity - TeamCity：成功构建后清除发布目录

> ID：15661533
> 
> 赞同：1
> 
> 时间：2013-03-27T14:34:44.440
> 
> 标签：teamcity, build-server

在构建服务器上成功构建后，我试图让 TeamCity 清除远程服务器上的发布目录。我希望它像构建服务器上的干净结帐一样工作。工作流程应该是：

1.  查看
2.  建造
3.  清除发布目录
4.  将成功的构建文件发布到发布目录

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-23T20:41:12.483

In TeamCity 8.x, workflows like this can be done using the conditional-execute option on build steps within a config. Your "Clear Publish Directory" build step could set the "Execute step:" option to "If all previous steps finished successfully (zero exit code)". And similarly for build step 4.

# gwt - GWT Designer 部署错误

> ID：15661535
> 
> 赞同：0
> 
> 时间：2013-03-27T14:34:50.220
> 
> 标签：gwt, gwt-designer

我正在尝试部署我的第一个 GWT 应用程序，但出现以下错误。我正在使用 jre6、GWT Designer（使用 GWT DSK 2.5.0），并且我已经按照此处的建议删除了 gwt-unitCache 文件夹： [https ://groups.google.com/forum/?fromgroups=#!topic/google -web-toolkit/e3DoVrI6V70](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/e3DoVrI6V70)

```
Designer error occurred. 
Select Details >> for more information. 
See the Error Log for more information.
Reason: Parse error or internal Designer error.
Plug-in Provider: Google
Plug-in Name: 
Plug-in ID: org.eclipse

java.lang.NoClassDefFoundError: org/eclipse/jdt/launching/IJavaLaunchConfigurationConstants
at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.getGWTProjectClasspath(DeployModuleAction.java:364)
at 
com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.createBuildScript(DeployModuleAction.java:150) 
at
com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.access$1(DeployModuleAction.java:131)
at
com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction$1.run(DeployModuleAction.java:103)
at
org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)

Full stack trace (to see full context):
java.lang.reflect.InvocationTargetException
    at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction$1.run(DeployModuleAction.java:114)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/jdt/launching/IJavaLaunchConfigurationConstants
    at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.getGWTProjectClasspath(DeployModuleAction.java:364)
    at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.createBuildScript(DeployModuleAction.java:150)
    at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction.access$1(DeployModuleAction.java:131)
    at com.google.gdt.eclipse.designer.actions.deploy.DeployModuleAction$1.run(DeployModuleAction.java:103)
    ... 1 more 
```

# java - 错误解析 JSON 响应字符串 Android

> ID：15661537
> 
> 赞同：0
> 
> 时间：2013-03-27T14:34:57.453
> 
> 标签：java, android, arrays, json, response

我有一个来自 API 服务的响应字符串，如下所示：

```
{"id":"login","status":"true"} 
```

这是解析响应字符串以从键“状态”获取值的方法

```
 JSONObject jsonObj = null;
    try{
        jsonObj = new JSONObject(responseString);
    }
    catch(JSONException e){
        e.printStackTrace();

    }

        JSONArray innerJsonArray = null;
        try {
            innerJsonArray = jsonObj.getJSONArray("status");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        JSONObject jsonObject = null;
        try {
            jsonObject = innerJsonArray.getJSONObject(0);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            System.out.println(jsonObject.getString("status"));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我有错误“org.json.JSONArray 无法转换为 JSONObject”

任何人都可以给我建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:40:23.010

你在哪一行得到异常？无论如何，你应该使用

`jsonObj =JSONObject.fromObject(responseString);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:43:01.633

```
JSONObject jsonObj = null;
try{
    jsonObj = new JSONObject(responseString);
    System.out.println(jsonObj.getString("status"));
}
catch(JSONException e){
    e.printStackTrace();
} 
```

您无需为任何其他阵列而烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:51:11.733

请尝试下面的代码段。试试这个[链接](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)以获得关于解析 JSON 响应的更好的知识。

```
JSONObject jObj;
        try {
            jObj = new JSONObject(responseString);
            Log.i("id==", jObj.getString("id"));
            Log.i("status==", jObj.getString("status"));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# visualvm - VisualVM 收集一段时间内的性能数据

> ID：15661539
> 
> 赞同：1
> 
> 时间：2013-03-27T14:35:03.493
> 
> 标签：visualvm

对于 Java，我使用 VisualVM 来监控 CPU、内存、线程信息。VisualVM 有没有办法在一段时间内收集这些信息，以便我能够在图表中呈现它。

在监视器选项卡下的 VisualVM 中，我可以看到 CPU、类、堆和线程图。当我运行负载测试时，我希望能够在一段时间内收集这些数据。稍后将其呈现在图表上以供以后分析。

如果 VisualVM 不是工具，请建议替代选项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:41:18.623

您可以使用[Tracer 插件](http://java.dzone.com/visualvm-13)进行监控。选择适合您需求的探针，您应该能够导出监控数据，这些数据可用于构建您选择的图表。

# c - Unix域套接字客户端将无法连接

> ID：15661540
> 
> 赞同：2
> 
> 时间：2013-03-27T14:35:04.050
> 
> 标签：c, unix-socket

我一直在阅读“Linux 编程接口”以尝试了解套接字，特别是 unix 域套接字。我已经阅读了第 56 章，其中解释了一些一般概念，并且我正在尝试实现第 57 章中的客户端-服务器示例。

服务器代码似乎工作正常，但是当我尝试连接客户端时，调用`connect()`失败。

这是服务器代码：

```
#include<sys/un.h>
#include<sys/socket.h>
#include<stdio.h>
#define SV_SOCK_PATH "/tmp/boom"
#define BUF_SIZE 100
#define BACKLOG 5

int main(int argc, char *argv[]){
  struct sockaddr_un addr;
  int sfd, cfd;
  ssize_t numRead;
  char buf[BUF_SIZE];

  sfd = socket(AF_UNIX, SOCK_STREAM, 0);
  if(sfd!=0){
    printf("socket success\n");
  }
  else{
    printf("socket unsuccessful\n");
  }

  printf("socket declared\n");

  memset(&addr, 0, sizeof(struct sockaddr_un));
  addr.sun_family = AF_UNIX;
  strncpy(addr.sun_path, SV_SOCK_PATH, sizeof(addr.sun_path)-1);

  if (bind(sfd, (struct sockaddr *) &addr, sizeof(struct sockaddr_un))!=0){
    printf("bind unsuccessful\n");
  }
  else{
    printf("bind successful\n");
  }

  if (listen(sfd, BACKLOG) != 0){
  printf("listen failed\n");
  }
  else{
     printf("listen succeeded\n");
  }

  while(1){

    if( cfd = accept(sfd, NULL,NULL) != 0){
      printf("accept failed\n");
    }
    else{
      printf("accept succeeded\n");
    }

     while ((read(cfd, buf, BUF_SIZE)) > 0)
      write(1, buf, numRead); 
 }

} 
```

客户端代码在这里：

```
#include<stdio.h>
#include<sys/un.h>
#include<sys/socket.h>
#define SV_SOCK_PATH "/tmp/boom"
#define BUF_SIZE 100
#define BACKLOG 5

int main(int argc, char *argv[]){
  struct sockaddr_un addr;
  int sfd, cfd;
  ssize_t numRead;
  char buf[BUF_SIZE];

  if(sfd = socket(AF_UNIX, SOCK_STREAM, 0) > 0){
    printf("socket successful\n");
  }
  else{
    printf("socket fucked\n");
  }

  memset(&addr, 0, sizeof(struct sockaddr_un));
  addr.sun_family = AF_UNIX;
  strncpy(addr.sun_path, SV_SOCK_PATH, sizeof(addr.sun_path)-1);

  if(connect(sfd, (struct sockaddr *) &addr, sizeof(struct sockaddr_un)) == -1){
    printf("connection unsuccessfully\n");
   }
  else{
     printf("connection successful\n");
  }

  if(numRead = read(0, buf, BUF_SIZE) > 0){
    printf("read successful\n");
    printf(buf);
  }
  else{
    printf("read unsuccessful\n");
  }

  if (write(sfd, buf, numRead) > 0){
    printf("write successful\n");
  }
  else{
    printf("write unsuccessful\n");
  }
} 
```

当我运行服务器时，我看到：

```
$ ./server 
socket success
socket declared
bind successful
listen succeeded 
```

当我运行客户端时，我看到：

```
$ ./client 
socket successful
connection unsuccessfully
hello   # <-- I type this
read successful
hello
hwrite successful 
```

如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:27:46.183

您在客户端中缺少围绕此代码的括号

```
if(sfd = socket(AF_UNIX, SOCK_STREAM, 0) > 0){ 
```

将其更改为

```
if((sfd = socket(AF_UNIX, SOCK_STREAM, 0)) > 0){ 
```

我还将服务器代码更改为如下：

```
.
.
.

socklen_t csize; 

while(1){

    cfd = accept(sfd, (struct sockaddr *)&addr,&csize);

    if (cfd < 0) {
      printf("accept failed: %s\n", strerror(errno));
    }
    else{
      printf("accept succeeded: %d\n", cfd);
    }

    .
    .
    . 
```

现在它应该可以工作了:)

始终注意运算符的优先级！

# php - PHP - preg_replace()“到”之间“”

> ID：15661545
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:35:20.150
> 
> 标签：php, regex, replace, preg-replace

将“替换为”之间的“”：我的问题出在 json_decode 中，即创建此 json 的数据库示例：

```
{"LOGRADOURO":"Joana D"Arc",
 "NUMERO":"257",
 "COMPLEMENTO":"",
 "BAIRRO":"barreiro"} 
```

到

```
{"LOGRADOURO":"Joana D'Arc",
 "NUMERO":"257",
 "COMPLEMENTO":"",
 "BAIRRO":"barreiro"} 
```

我真的需要一个 preg_replace，像这样： $return = preg_replace ('/ ("+)" ("+) /'," $1"$2", $return);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:49:39.723

您可以先使用数组，然后替换每个条目中的`"`宽度`'`。之后你使用[`json_encode`](http://php.net/manual/en/function.json-encode.php). 如果您的数据以 json 格式出现，[`json_decode`](http://php.net/manual/en/function.json-decode.php)请先使用。

```
$str = array(
'LOGRADOURO'=> 'Joana D"Arc',
'NUMERO'=>'257',
'COMPLEMENTO'=>'',
'BAIRRO'=>'barreiro'
);

foreach($str as $sk => $s) {
$str[$sk] = str_replace('"', "'", $s);
}

echo json_encode($str); 
```

您还可以查看[`addslashes`](http://php.net/manual/en/function.addslashes.php)是否只是为了防止`"`由于字符串内部出现进一步的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:31:25.603

这是想法，我们不能替换所有的双引号，所以我想制作一种黑名单。前面的双引号`:{,`不应该被替换，双引号后面的内容也是如此`:},`。我必须删除换行符/空格才能使其正常工作：

```
$json = '{"LOGRADOURO":"Joana D"Arc",
 "NUMERO":"257",
 "COMPLEMENTO":"",
 "BAIRRO":"barreiro"}';

$json = preg_replace(
array('/",[\s\r\n]+"/',          '/([^\:\{\,])(")([^\:\}\,])/'),
//       vvvvvvvvv                 vvvvvvvvvvvvvvvvvvvvvvvvv
// To remove the new lines         Replacing valid " with '
array('","', "$1'$3")
, $json);

echo $json; // {"LOGRADOURO":"Joana D'Arc","NUMERO":"257","COMPLEMENTO":"","BAIRRO":"barreiro"} 
```

# ios - 如何获取所有已安装路由应用程序的列表？

> ID：15661546
> 
> 赞同：5
> 
> 时间：2013-03-27T14:35:21.730
> 
> 标签：ios, objective-c, ios6, mapkit, ios6-maps

如何以编程方式获取 iOS 上已安装的“路由应用程序”列表？

这背后的原因是，iOS 提供了大量的导航应用程序，我不想手动维护列表。

Apple 自 iOS 6 以来提供了一项新功能，可将您的应用注册为路由应用，如此处所述[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#// apple_ref/doc/uid/TP40009497-CH8-SW7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW7)

如果您随后在常规地图应用程序中开始路由，您会看到一个能够为您路由的应用程序列表，如您在此处看到的：

![在此处输入图像描述](../Images/ffa5330e2365e366fc9731efff512b57.png)

我找不到获取列表的方法。当然，我可以通过在 UIApplication 中使用 canOpenURL: 来查询是否安装了某个特定的应用程序，但这会非常乏味。

我知道这一定是可能的，因为著名的[“去哪里？”](https://itunes.apple.com/us/app/where-to-discover-your-next/id314785156?mt=8) 应用程序提供了这样的功能。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:34:21.970

好的，我自己试一试。也许是“去哪里？”的作者。确实维护一个路由应用程序列表，并通过查询该应用程序的 url 方案来检查是否安装了该应用程序。对于他发现的所有应用程序，他都会提供一个“ROUTE”按钮。对于他没有找到的所有应用程序，他会提供一个链接到应用程序商店的条目。

当然，这不会列出所有路由应用程序，但它通过拥有一长串自编译的路由应用程序列表来给人一种印象。

**编辑：**这是“去哪里？”的截图：

![截图来自](../Images/db232bde7d1f872615198db2eb65229e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:40:50.773

由于 iOS 6 沙盒，没有真正的方法可以做到这一点，因为您无法访问不在您自己的地址空间中的任何内容。Maps 应用程序可以做到这一点，因为 Apple 保留在您的手机上访问它想要的任何数据的权利，包括您已安装的应用程序。

# configuration - 通过 Solr Suggester 使用多个字典

> ID：15661550
> 
> 赞同：3
> 
> 时间：2013-03-27T14:35:29.850
> 
> 标签：configuration, solr, autocomplete

我正在使用 Suggester 组件进行自动完成。我想提供多种类型的建议，例如位置、公司名称、产品和字典单词。

这些列表的大小和波动性各不相同，因此将它们全部保存在同一个文本文件中并不是最方便的。

我正在使用文本文件，因为我希望能够为建议的术语添加权重。

是否可以使用多个文本文件？我尝试了以下方法：

```
<!-- WFSTLookup suggest component -->
<searchComponent class="solr.SpellCheckComponent" name="suggestword">
  <lst name="spellchecker">
    <str name="name">suggestword</str>
    <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
    <str name="lookupImpl">org.apache.solr.spelling.suggest.fst.WFSTLookupFactory</str>
    <str name="storeDir">suggestword</str>
    <str name="buildOnCommit">false</str>

    <!-- Suggester properties -->
    <bool name="exactMatchFirst">true</bool>

    <str name="sourceLocation">../data/words.txt</str>
    <str name="sourceLocation">../data/cities.txt</str>
  </lst> 
```

但是第二个列表，城市，在重新启动tomcat并重建字典后显然未被发现。这可以做到吗？如果不是，您会如何推荐管理不同的字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-09T08:19:07.100

[对于 SOLR 5.2，请参阅https://cwiki.apache.org/confluence/display/solr/Suggester](https://cwiki.apache.org/confluence/display/solr/Suggester)上的多个字典部分

在 solrconfig.xml 中，使用相应的源文件定义多个建议词典，例如：

```
<searchComponent name="suggest" class="solr.SuggestComponent">
  <lst name="suggester">
    <str name="name">words_suggester</str>
    <str name="lookupImpl">FuzzyLookupFactory</str>
    <str name="dictionaryImpl">FileDictionaryFactory</str>
    <str name="sourceLocation">words.txt</str>
    <str name="storeDir">words_dict</str>
    <str name="suggestAnalyzerFieldType">string</str>
  </lst>
  <lst name="suggester">
    <str name="name">cities_suggester</str>
    <str name="lookupImpl">FuzzyLookupFactory</str>
    <str name="dictionaryImpl">FileDictionaryFactory</str>
    <str name="sourceLocation">cities.txt</str>
    <str name="storeDir">cities_dict</str>
    <str name="suggestAnalyzerFieldType">string</str>
  </lst>
  ...
</searchComponent> 
```

根据我的测试，似乎每个基于 FileDictionaryFactory 的建议器必须使用不同的 storeDir（否则它们会相互覆盖）。

然后，在“/suggest”请求处理程序中使用它们，例如：

```
<requestHandler name="/suggest" class="solr.SearchHandler" startup="lazy">
  <lst name="defaults">
    <str name="suggest">true</str>
    <str name="suggest.count">10</str>
    <str name="suggest.dictionary">words_suggester</str>
    <str name="suggest.dictionary">cities_suggester</str>
    ...
  </lst>
  <arr name="components">
    <str>suggest</str>
  </arr>
</requestHandler> 
```

# internet-explorer - worklight 富页编辑器仅列出 internet explorer

> ID：15661555
> 
> 赞同：0
> 
> 时间：2013-03-27T14:35:35.003
> 
> 标签：internet-explorer, safari, editor, ibm-mobilefirst

根据 IBM Worklight 文档，如果基本 Eclipse 平台为 3.7 或更高版本，则 Windows 上支持 IE 和 Safari。我目前正在运行带有 worklight 插件 (5.0.5) 的 eclipse 版本 3.7.2，我还尝试过在单独的环境中使用 IBM Install Manager 的 5.0.6。当我打开我的 worklight 项目的主 html 文件时，我只看到我的 Rich Page Editor 的 IE (Internet Explorer) 选项。我的系统上还安装了 Safari for windows 和 Firefox。我相信我没有看到 Firefox，因为我使用的是 64 位版本的 eclipse，但我也没有看到 Safari 作为选项。感谢您的任何建议。

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:06:16.637

这是一个已知的问题。您将需要使用 32 位版本的 Eclipse，以使剩余的浏览器按钮显示在 RPE 工具栏中。：X

# java - 如何使用jsp检索图像路径并在html中显示

> ID：15661556
> 
> 赞同：0
> 
> 时间：2013-03-27T14:35:37.290
> 
> 标签：java, jsp

我的代码是这样的

```
 <%@ include file="getcon.jsp"%>
<html>
<head>
<title>View Image Page</title>
</head>
<body>
<table width="100%" border="0">
<!-- main content -->
<%
ResultSet rs=null;
try
{

rs=st.executeQuery("select * from file1");

while(rs.next())
{
%>
<table width="70%" height="160" border="1" align="center">
<tr>
<!-- Mention Directory where your images has been saved-->

<td><img src="<%=rs.getString("file_path") %>" alt="image" /></td>
<td> <%out.print(rs.getString(1)); %></td>
</tr>
</table>
<%
}
}
catch(Exception e)
{
out.print(""+e.getMessage());
}
%>

</table>
</body>
</html> 
```

我可以从表格的第二列看到图像路径，但看不到图像这是什么原因，有人可以帮助我吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:42:24.973

我认为图像的路径不正确。最好的办法是显示渲染页面的源代码，方法是右键单击浏览器中的页面并显示源代码（在大多数浏览器中）。然后搜索标签.../>然后你就会明白为什么你的路径不正确。我想你错过了一个斜线或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:40:25.417

你不能这样嵌套你的引号。尝试类似：

```
<img src="<%rs.getString('file_path'); %>" alt="image" /> 
```

或者可能

```
<img src="<%=rs.getString('file_path'); %>" alt="image" /> 
```

我不记得是哪个。

# android - 如果用户 5 分钟没有活动，如何启动登录活动：

> ID：15661557
> 
> 赞同：1
> 
> 时间：2013-03-27T14:35:39.847
> 
> 标签：android, android-intent, login, onresume

如果用户在应用程序中没有活动 5 分钟，我需要开始登录`Activity`，而不考虑他离开应用程序的活动。（不活动 5 分钟是指用户没有向服务器端提交任何操作）

我的班级中有一个`Date`变量：`Application`

```
private Date timeOfLogin; 
```

这是在用户提交登录时保存的，在某些使用点，用户可以接到电话或邮件并离开应用程序。现在这可以发生在应用程序的任何屏幕上。现在，当他再次打开应用程序/打完电话后返回应用程序时，我需要再次显示登录屏幕，而不是在 5 分钟或更长时间后显示他的最后一个活动。

如何做呢？如果当前日期和当前日期之间的差异大于 5 分钟，我是否必须覆盖`onResume`应用程序中的每个活动并开始登录？还是有更好的方法来做到这一点？`Activity``timeOfLogin`

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:47:12.960

拥有一个所有其他活动都扩展的活动，并将逻辑放在该活动的 onResume 中。（您可能会发现这种做法在许多其他方面也很有用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:56:11.527

在显示对话框的 ResponseHandler 类中创建一个`CountDownTimer`5 分钟倒计时。如果有任何响应，请取消计时器并重新开始。`onFinish()``login`

# php - 如何预加载一组图像，然后启动图像幻灯片？

> ID：15661561
> 
> 赞同：0
> 
> 时间：2013-03-27T14:35:54.300
> 
> 标签：php, javascript

我正在创建一个包含 5 帧的幻灯片（每个帧都有自己的图像幻灯片），其中包含巨大的图像，并且每个帧中的前几张图像需要一些时间才能加载（其余图像的加载速度非常快）。所以我想我可以预加载一个简单的黑色图像（背景是黑色），然后在我知道图像已经加载后开始我的幻灯片放映。此外，幻灯片图像是动态的，即它们的网址每天都在变化。

有谁知道我该怎么做？因为我在网上找到的只是预加载了一张图片，但没有说明之后如何开始我的幻灯片放映。

或者如果有人有更好的解决方案，请告诉我！

仅供参考，对于幻灯片，我使用 PHP 将图像 url 提取到文件中，并使用 JavaScript 从中读取它们并在幻灯片中显示它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:55:59.857

这应该工作

```
/*You could populate this array through an xml to something if there are too many images*/
var arrUrls = ["image1.jpg", "image2.jpg", "image3.jpg"];
var nLoadCount = 0;
for(var i=0;i<arrUrls.length;i++)
{
    var oImage = new Image ();
    oImage.onload = function ()
    {
        nLoadCount++;
        if(nLoadCount == arrUrls.length)
        {
            /*Show your content here*/
        }
    }
    oImage.src = arrUrls[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:41:54.460

“根据 Paul Irish，**用于检测图像加载完成事件的规范插件**现在位于：

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded) "

来源：[加载图像的 jQuery 事件](https://stackoverflow.com/questions/910727/jquery-event-for-images-loaded)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:39:26.170

预加载图像的一个好方法是使用 css 将它们加载到框架之外，位置：绝对，我记得使用 display: none; 它不会被 Safari 下载。

这似乎是[预缓存](http://www.thecssninja.com/css/even-better-image-preloading-with-css2)图像的一种优雅方式。

# java - Android：画布上的 admob

> ID：15661566
> 
> 赞同：0
> 
> 时间：2013-03-27T14:36:04.350
> 
> 标签：java, android, admob, android-canvas

如何在 Canvas 上绘制 AdMob 的工作示例？我搜索了所有网络，但没有找到真正有效的答案！请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T11:30:13.043

您可以将画布尺寸保持为整个屏幕尺寸 - adview 尺寸。然后将 adview 与画布视图一起添加到相对布局中。它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:54:46.713

AdMob 的 AdView 是一个普通的旧视图，可能无法很好地与 Canvas 配合使用。在这些情况下，AdMob 建议将 AdView 放在 Canvas 之外或将 SurfaceView 作为同级元素。

# ios - 使用单例模式时视图不绘制

> ID：15661575
> 
> 赞同：0
> 
> 时间：2013-03-27T14:36:41.593
> 
> 标签：ios, delegates, uinavigationcontroller, singleton

我在 navigationController 中绘制 UIView，即使用户按下后退按钮，我也需要查看该视图，因此我创建了在 AppDelegate 中创建视图的方法，以便在应用程序之间共享它。

当我使用`(AppDelegate *)[[UIApplication sharedApplication] delegate];`然后使用创建视图的方法时，`[appDelegate createBottomView];`我可以看到视图，但显然如果用户返回然后前进，AppDelegate 将再次实例化它，并且视图的值将再次为空。所以我做了一个单例来在我的类中创建 AppDelegate：

```
AppDelehate.m
+(id)sharedInstance
{
static dispatch_once_t pred;
static AppDelegate *sharedInstance = nil;
dispatch_once(&pred, ^{
    sharedInstance = [[AppDelegate alloc] init];
    NSLog(@"DISPATCHED");
});
return sharedInstance;
} 
```

我在我的课堂上称它为`AppDelegate appDelegate = [AppDelegate sharedInstance];`

但是，如果我调用该方法`[appDelegate createBottomView];`，则视图不会在我的导航控制器中绘制。

为什么我使用单例模式时不绘制视图？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:10:16.100

*   将视图作为 AppDelegate 中的属性
*   `didFinishLaunching`在 AppDelegate 类中创建视图
*   每当您想显示视图时，将视图添加到 viewcontrollers 视图中。

# xml - 使用正则表达式中的可选元素进行 XML 解析

> ID：15661580
> 
> 赞同：0
> 
> 时间：2013-03-27T14:36:49.027
> 
> 标签：xml, regex

我有一些看起来像的 xml：

```
<records>
  <Customer>
    <Reference>123</Reference>
    <Name>John Smith</Name>    
    <Address1>1, The street</Address1>
    <Address2>Upper Town Street</Address2>
    <Address3>Anytown</Address3>
    <Address4>County</Address4>
    <PostCode>POS TCD</PostCode>
  </Customer>
</records> 
```

但对于其中 Address2 是可选的，所以这也是有效的：

```
<records>
  <Customer>
    <Reference>123</Reference>
    <Name>John Smith</Name>    
    <Address1>1, The street</Address1>
    <Address3>Anytown</Address3>
    <Address4>County</Address4>
    <PostCode>POS TCD</PostCode>
  </Customer>
</records> 
```

（注意：这是一个缩减的 xml 片段）

当指定 Address2 时，我有以下正确匹配的正则表达式：

```
<Reference>(?<Reference>.*)</Reference>[\w|\W]*<Name>(?<Name>.*)</Name>[\w|\W]*<Address1>(?<Address1>.*)</Address1>[\w|\W]*<Address2>(?<Address2>.*)</Address2> 
```

它不适用于未指定 Address2 的情况。我得到的最接近的是以下内容：

```
<Reference>(?<Reference>.*)</Reference>[\w|\W]*<Name>(?<Name>.*)</Name>[\w|\W]*<Address1>(?<Address1>.*)</Address1>[\w|\W]*(<Address2>(?<Address2>.*)</Address2>)? 
```

它匹配并填充两个 xml 片段的参考、名称和地址 1，但在两种情况下都将地址 2 留空，而不是第一个片段的地址 2 的值为上城街。

另外：我知道使用 xml 解析器可能会更容易，但 xml 并不干净，这应该是一个快速简单的解决方案（！）。我也知道我可以将其分解为一组正则表达式来解决，但这现在已成为一个智力挑战。我很想有一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:39:58.743

不要使用[regex](/questions/tagged/regex "显示标记为“正则表达式”的问题")，而是**修复损坏的[xml](/questions/tagged/xml "显示标记为“xml”的问题")**并在最有趣的问题上使用你的思想 =)

[正则表达式](/questions/tagged/regex "显示标记为“正则表达式”的问题")不是解析[xml](/questions/tagged/xml "显示标记为“xml”的问题")文件的正确工具。2013年解析[xml](/questions/tagged/xml "显示标记为“xml”的问题")是已解决的问题，不要试图重新发明轮子。

就像您已经说过的，使用*XML 解析器*。如果您希望我给您其中一些，请在您的原始帖子中添加您的语言。

我知道解析[xml](/questions/tagged/xml "显示标记为“xml”的问题")和[html](/questions/tagged/html "显示标记为“html”的问题")的最好方法是[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")。

* * *

请参阅[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:12:15.110

快速而肮脏的答案：

```
<Reference>(?<Reference>.*)</Reference>[\w\W]*?<Name>(?<Name>.*)</Name>[\w\W]*?<Address1>(?<Address1>.*)</Address1>[\w\W]*?(<Address2>(?<Address2>.*)</Address2>)? 
```

首先，我删除了`|`; 它没有伤害任何东西，但它是不必要的。 `[\w\W]`已经意味着*一个单词字符，或者一个**不是**单词字符的字符*。像大多数其他元字符一样，`|`在字符类中失去了它的特殊含义，只匹配它自己。

但重点是将`*`改为`*?`，使其不贪婪。每个`[\w\W]*`最初都会吞噬整个文本的其余部分，然后回溯，以便它可以匹配下一个需要的部分（例如，`<Name>(?<Name>.*)</Name>`）。但是这`Address2`部分*不是*必需的，所以正则表达式引擎不会费心回溯来接受它。

使量词非贪婪会颠倒优先级：在它吞噬下一个字符之前，它首先尝试匹配正则表达式的*下*一部分。这确保了该`Address2`行在存在时得到匹配，即使它是可选的。

但是，如果您的 XML 确实按照您显示的方式进行了格式化，那么元素之间的所有内容都是空格。我只会使用`\s*`，而不必担心它匹配太多或太少。

# image-processing - 图像处理接缝雕刻-雕刻顺序

> ID：15661601
> 
> 赞同：2
> 
> 时间：2013-03-27T14:37:41.607
> 
> 标签：image-processing, image-manipulation, seam-carving

假设我想从图像中删除 10 个垂直接缝和 10 个水平接缝。如果我先去除 10 个垂直接缝，然后再去除 10 个水平接缝，这有关系吗？我应该先做一个垂直接缝，然后再做一个水平接缝，依此类推吗？

有区别吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:08:22.500

一种选择是始终去除能量最低的接缝——无论是垂直的还是水平的。当然，您最终可能只是移除与图像中最小尺寸相对应的接缝（横向图像的垂直接缝，或肖像的水平接缝），因为它更有可能具有低能量。

接缝雕刻并不是一门真正的精确科学，同时在许多方面都得到了改进

# php - 如何做嵌套短代码？

> ID：15661604
> 
> 赞同：0
> 
> 时间：2013-03-27T14:37:50.047
> 
> 标签：php, wordpress

我有一个从 URL 获取参数并进行进一步处理的简码。我有另一个短代码也需要相同类型的 URL 参数处理。我想与这两个函数共享 URL 参数处理代码。这是如何在短代码中完成的？

这似乎是一个伪示例，但并不完整： [http](http://www.sitepoint.com/wordpress-nested-shortcodes/) ://www.sitepoint.com/wordpress-nested-shortcodes/ 。他似乎在页面中执行嵌套的短代码语法。我宁愿将嵌套保留在 PHP 中，因为使用简码语法在页面中进行嵌套对我来说没有太大优势。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:44:24.677

您可以从另一个简码的 PHP 中调用一个简码的 PHP 代码。

因此，例如获取传递到您的简码中的 URL，针对该简码进行所需的处理，然后根据需要调用/使用其他简码后面的函数。

您的 PHP 简码功能可用于您的所有其他 PHP 代码（包括任何其他简码），就像您的 functions.php 文件中的其他功能一样。

您可以通过 WP 简码 API 的函数在 PHP 中*模拟*简码嵌套[`do_shortcode()`](http://codex.wordpress.org/Function_Reference/do_shortcode)，将一些“内容”传递给它，例如`"[yourshortcode your_attr='your value' ... ]some content[/yourshortcode]"`. 这样，您可以确保您的 yourshortcode 的执行方式与实际包含在内容中的方式相同。

或者，如果两者都使用一个短代码中的某些特定功能，那么也许这些功能应该放在一个共享文件中，例如functions.php？

但是，如果短代码不是同一个插件或主题的一部分，那么您可能还想看看[`is_plugin_active()`](http://codex.wordpress.org/Function_Reference/is_plugin_active)哪个允许您编写代码，以便您的依赖短代码可以优雅地处理不存在依赖关系的情况。

但请注意，这些都不是*真正*的“短代码嵌套”，至少在 WP codex[在这里](http://codex.wordpress.org/Shortcode_API#Nested_Shortcodes)定义它的方式上。您链接的示例是。

# jquery - 从功能中隐藏下一个/上一个链接

> ID：15661605
> 
> 赞同：1
> 
> 时间：2013-03-27T14:37:56.603
> 
> 标签：jquery, list, hide, show

我正在使用以前的帖子尝试使用 jquery 限制列表项的数量，当它到达列表末尾时，我需要隐藏下一个/上一个链接。我确定这是一个简单的添加，但我似乎无法找到增强此功能的解决方案。

这是功能：（从[Jquery list show / hide 5 items onclick](https://stackoverflow.com/questions/6635441/jquery-list-show-hide-5-items-onclick)复制）

```
$('ul li:gt(4)').hide();

$('.prev').click(function() {
    var first = $('ul').children('li:visible:first');
    first.prevAll(':lt(5)').show();
    first.prev().nextAll().hide()
});

$('.next').click(function() {
    var last = $('ul').children('li:visible:last');
    last.nextAll(':lt(5)').show();
    last.next().prevAll().hide();
}); 
```

这是jsfiddle：http: [//jsfiddle.net/JQq5n/61/](http://jsfiddle.net/JQq5n/61/)

当它被宣讲到列表的末尾时，我只需要帮助隐藏下一个/上一个链接。有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:43:25.133

这是小提琴[http://jsfiddle.net/RNrgE/1/](http://jsfiddle.net/RNrgE/1/)

```
$('ul li:gt(4)').hide();

$('.prev').click(function() {
    var first = $('ul').children('li:visible:first');
    first.prevAll(':lt(5)').show();
    if(first.prevAll().length < 6){
         $('.prev').hide();   
    }
    first.prev().nextAll().hide();
    $('.next').show(); //Now there must be items below so make sure the next link is visible
});

$('.next').click(function() {
    var last = $('ul').children('li:visible:last');
    last.nextAll(':lt(5)').show();
    if(last.nextAll().length < 6){ //We've reached the end so hide the links
        $('.next').hide();
    }
    $('.prev').show(); //Now there must be items above so make sure the prev link is visible
    last.next().prevAll().hide(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:48:49.517

试试这个[更新的演示](http://jsfiddle.net/3ZYtP/5/)。

如果在下一个和上一个案例中没有剩余的项目要显示，它会隐藏、上**一个**和**下一个链接。**

```
function doShowNextPrev(){
    if($('ul li:first').is(':visible'))
        $('.prev').hide();
    else
        $('.prev').show();    

    if($('ul li:last').is(':visible'))
        $('.next').hide();
    else
        $('.next').show();    
} 
```

刚刚添加了以下乐趣来检查是否显示下一个和上一个链接。上面的 fun 需要在 doReady 上调用，并且每当单击 next 和 prev 时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:56:32.640

```
$('ul li:gt(4)').hide();

updateButtons();

$('.prev').click(function() {
    var first = $('ul').children('li:visible:first');
    first.prevAll(':lt(5)').show();
    first.prev().nextAll().hide();
    updateButtons();    
});

$('.next').click(function() {
    var last = $('ul').children('li:visible:last');
    last.nextAll(':lt(5)').show();
    last.next().prevAll().hide();
    updateButtons();    
});

function updateButtons () {
    var list$ = $('ul');
    $('.prev, .next').show();
    if (list$.children('li:first').is(':visible')) {
        $('.prev').hide();
    }
    if (list$.children('li:last').is(':visible')) {
        $('.next').hide();
    }
} 
```

# python - 通过包装器外壳脚本将包含空格的参数传递给python脚本

> ID：15661616
> 
> 赞同：0
> 
> 时间：2013-03-27T14:38:25.593
> 
> 标签：python, bash

我有一个包装脚本**command.sh**作为我的 python 应用程序的主要启动脚本，主要用于设置一些环境变量，例如`PYTHONPATH`：

```
#!/bin/bash

export PYTHONPATH=lib64/python/side-packages
./command.py $* 
```

**command.py**看起来像这样：

```
#!/usr/bin/python

import sys
print sys.argv 
```

像这样调用包装脚本

```
$ ./command.sh a "b c" 
```

结果在`['./command.py', 'a', 'b', 'c']`我需要的地方`['./command.py', 'a', 'b c']`

如何将包含空格的参数传递给 python 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:38:25.593

使用`$@`代替`$*`，并用 引用它`"`：

```
#!/bin/bash

export PYTHONPATH=lib64/python/side-packages
./command.py "$@" 
```

有关详细信息，请参阅[bash(1)](http://linux.die.net/man/1/bash)的“特殊参数”部分。

# tfs - TFS 添加二进制文件夹

> ID：15661619
> 
> 赞同：0
> 
> 时间：2013-03-27T14:38:30.363
> 
> 标签：tfs

我的文件夹结构如下：

![在此处输入图像描述](../Images/63421fd6cf19a6140d9935d377187bed.png)

我希望我的 TFS 看起来像上图。这是它的样子：

![在此处输入图像描述](../Images/9641657b44902bf13a3e20ec47c48d75.png)

第二个图像是源文件夹的内部。如何告诉 TFS 从根目录开始？如何在我的项目中包含包含多个共享二进制文件的 bin 文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:09:44.653

只需将 bin 文件夹从 Windows 资源管理器拖放到您想要的位置`Source Control Explorer`，然后将选项卡`Include`上的二进制文件拖放到`Exclude`选项卡上，然后检查所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:40:27.950

如果您将包含二进制文件的文件夹映射到 TFS 中团队项目下的文件夹，则可能

# facebook - Facebook API - 检索我自己的相册和照片

> ID：15661622
> 
> 赞同：0
> 
> 时间：2013-03-27T14:38:40.007
> 
> 标签：facebook, api, login, photos

我正在尝试使用 php 的 Facebook api 从 facebook 检索我的相册和照片。我已经创建了一个应用程序，现在我有我的 AppId 和我的 AppSecretId。我不需要任何登录窗口，因为我想显示我自己的照片，而不是来自任何其他用户的照片，但每次我尝试检索它们时，我都会收到此消息**“必须使用活动访问令牌来查询有关当前用户。”**

我知道如果我要显示其他用户的照片，那么我应该要求他们登录，然后生成访问令牌，但事实并非如此。

我尝试生成一个 App 令牌并尝试将其用作访问令牌，但它也不起作用。

这是我正在使用的代码：

```
 require_once("facebook/facebook.php");
        try{
            $facebook = new Facebook(array(
                    'appId' => '<APPID>',
                    'secret' => '<SECRETID>',
                    'cookie' => true
            ));

echo($facebook->getUser());
        if(is_null($facebook->getUser()))
        {
                header("Location:{$facebook->getLoginUrl(array('req_perms' => 'user_status,publish_stream,user_photos'))}");
                exit;
        }
        $me = $facebook->api('/me');

        $albums = $facebook->api('/me/albums', array('access_token' => $facebook->getAccessToken()));
        echo($albums);
    }catch(Exception $e){
        echo "THIS IS THE ERROR: " . $e->getMessage();
        die;
    } 
```

我希望你能帮我解决这个问题。太感谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:49:25.287

为您的个人帐户生成 Facebook 访问令牌的最简单方法是访问他们的 Graph API Explorer。它将自动生成一个访问令牌，您可以将其复制/粘贴到您的代码中。

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

此外，您可以使用该页面上的“获取访问令牌”按钮来请求具有特定权限的访问令牌。

# ruby - 视图中的 HAML 文件夹

> ID：15661628
> 
> 赞同：3
> 
> 时间：2013-03-27T14:38:51.060
> 
> 标签：ruby, rubygems, sinatra, haml

我想知道是否有人知道如何从视图文件夹中的文件夹呈现 .haml 模板。我的目录设置是：

```
-Views (Folder)
  -Get_Started (Folder)
    -step_1.haml
  -index.haml 
```

我想渲染 step_1.haml 但是当我尝试时：

```
haml :get_started/step_1 
```

它不起作用，我得到一个空白页。有什么建议么？我本可以发誓我已经在某个地方看到过如何做到这一点，但我不记得在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:42:00.817

尝试

```
haml :'get_started/step_1' 
```

# breeze - 如何将 Breeze 与多个实体框架上下文一起使用

> ID：15661634
> 
> 赞同：0
> 
> 时间：2013-03-27T14:39:14.537
> 
> 标签：breeze

让单个 Breeze 控制器与多个 EF 上下文一起工作是否可行或可行？每个上下文都有不同的数据模型。

或者，是否可以让一个 Breeze 客户端使用两个不同的 Breeze 控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:49:15.320

两者都是可能的。两者都很常见。

通常你会有一个 EF-Context-per-controller。这当然是简单的路径（但不是唯一可能的路径！）。

在客户端，您可以将这些视为不同的“数据服务”。在两个上下文的情况下类似于以下内容：

```
// 高度浓缩、简化的示例
var fooServiceName = 'api/foo';
var barServiceName = 'api/bar';

var fooManager = 新微风.EntityManager(fooServiceName);
var barManager = 新微风.EntityManager(barServiceName);

// 在自己的工作流程中使用每个管理器

```

我的假设是你有不同的模型，因为你有不同的工作流程。该假设通常成立，并且肯定是最简单的方法。

然后，我将我的客户端应用程序构建为单独的客户端模块，每个模块都有自己的`EntityManager`.

我不会进一步推测；让我们知道这是否适合您的目的，或者您是否有其他需要。

顺便说一句，我宁愿控制器本身根本不知道 EF 上下文。我希望看到它们在支持外部类时被隔离，以便于测试。但是，关于你问题的本质，你应该没问题。

# ruby-on-rails - NoMethodError（未定义的方法）但是定义了类方法

> ID：15661638
> 
> 赞同：1
> 
> 时间：2013-03-27T14:39:23.223
> 
> 标签：ruby-on-rails

我创建了一个继承自**ActiveRecord::Base的新类****Project**。我定义了一个名为**get_all**的类方法，我想在 Controller 中使用，但我得到了**NoMethodError (undefined method for ...)**

 ******模型：

```
class Project < ActiveRecord::Base

  def self.get_all
    find(:all)
  end

end 
```

控制器：

```
class Controller < ApplicationController
  unloadable

  def index
    @projects = Project.get_all
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:55:39.690

请注意，在 rails 3 中，`find(:all)`不推荐使用该方法（没有任何选项）以支持该`all`方法。更多关于它：

[http://m.onkey.org/active-record-query-interface](http://m.onkey.org/active-record-query-interface)

另外，我不知道您为什么要制作该功能，而您可以这样做：

```
@projects = Project.all 
```

就像克里斯布尔默说的那样。

这应该有效：

# 项目模型

```
 def self.get_all
    Project.all
  end 
```******

# django - 需要帮助如何使用 django-sitetree 管理配置

> ID：15661643
> 
> 赞同：0
> 
> 时间：2013-03-27T14:39:35.913
> 
> 标签：django, django-sitetree

从某个星期开始，我开始使用 django。现在我想使用**django-sitetree**通过我的模型创建导航栏。但是我对站点树的定义有疑问。例如，我想创建以下菜单结构：

```
maintree
|
|-- Media
|   |-- Movies
|   |   |-- Life of Pi
|   |   |-- Django unchained 
```

好的。所以我创建了以下简单模型：

```
class Movies(models.Model):
    title = models.CharField(max_length=50) 
```

为了测试站点树，我通过 django 管理站点添加了诸如“Pi Life of Pi”之类的数据集。

但是，现在我尝试使用[https://django-sitetree.readthedocs.org/en/v0.9/quickstart.html](https://django-sitetree.readthedocs.org/en/v0.9/quickstart.html)中的入门文档并修改我的模型。

在 Django 管理站点中，我执行了以下步骤：

1.  首页 › Sitetree --> 添加站点树
    *   标题 = 主树
    *   别名 = 主树
2.  主页 › Sitetree › Site Trees › maintreeHome › Sitetree › Site Trees › maintree --> 添加站点树项
    *   父母 = 没有父母 (-----)
    *   标题 = 媒体
    *   网址 = /考试
3.  主页 › Sitetree › Site Trees › maintreeHome › Sitetree › Site Trees › maintree --> 添加站点树项
    *   家长 = 媒体
    *   标题 = 电影 # {{movie.id}}
    *   URL = 电影详细电影.title
    *   “附加设置”：检查“URL as Pattern”是否也已设置

好的，下一步是编写一个如下所示的 base.html：

```
{% load sitetree %}

<!DOCTYPE html>
<html>
<head><title>My test template</title></head>
<body>
    <b>Sitetree menu</b>
    {% sitetree_tree from "maintree" %}
    <b>Breadcrumbs</b>
    {% sitetree_breadcrumbs from "maintree" %}
</body>
</html> 
```

我的网址如下所示：

```
from django.conf.urls import patterns, url
from exam.views import IndexView, DetailedMovie

urlpatterns = patterns('',
   url(r'^$', IndexView.as_view()),
   url(r'^(?P<movie_title>\S+)/$', DetailedMovie.as_view(), name='movie-detailed'),
) 
```

像这样的视图：

```
class DetailedMovie(TemplateView):
    template_name = "index.html"

    def get(self, request, *args, **kwargs):
        print 'DetailedMovie ---------------------'
        print args
        print kwargs

        return render(request, 'index.html') 
```

**问题**

最后我的问题是结果与我预期的不同。我只看到媒体和电影#，但没有看到电影数据（馅饼的生活和 Django 被解开）。通过检查视图作为参数**kwargs**得到的结果：**{'movie_title': u'movie.title'}**。

所以现在我不确定出了什么问题。我希望有人可以帮助我解决这个问题，或者建议我另一个应用程序或方法来获得这样一个带有面包屑的导航树。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T15:59:20.087

您忘记将`movie`变量传递到您的模板中：即，如果您这样做， `Title = Movies # {{movie.id}}`您的视图应该返回类似的内容`render(request, 'index.html', {'movie': my_movie})`，`my_movie`您的 Movie 对象在哪里。也就是说，`get`可能应该接受`movie_title`arg，因为它放在 you 中`urlpatterns`，以便您可以从中推断出适当的 Movie 对象。

# solr - 如何有效地表示 Apache Solr 中的键值结构

> ID：15661650
> 
> 赞同：1
> 
> 时间：2013-03-27T14:39:55.950
> 
> 标签：solr, indexing, range, wildcard

我有一个存储在日志表中的名称和日期结构。它们代表用户操作以及他们何时这样做。

```
Name        Date
John A.     2013-04-01
Leev B.     2013-04-02
Anse E.     2013-04-03 
```

我需要索引该数据，保持名称和日期之间的关系。我已经尝试使用分隔符（$）连接字段：

```
"John A.$2013-04-01"
"Leev B.$2013-04-02"
"Anse E.$2013-04-03" 
```

它工作得很好，但从现在开始，用户可以按名称的一部分进行搜索，而无需完全输入，并使用日期范围。所以一个普通的搜索将是：

```
fq = log_user_date:["John*2013-12-01" TO "John*2013-12-31"] 
```

碰巧 Apache Solr 无法处理中间带有通配符的查询范围。

索引“键值”数据有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:56:18.417

为什么要用分隔符连接名称和日期？您可以改为保留两个单独的字段：Solr 中的一个字符串字段`name`和一个日期字段，并执行如下查询`date`

```
q=*:*&fq=name:John*&fq=date:[2013-12-01T00:00:00Z TO 2013-12-31T11:59:59Z] 
```

# c# - NCalc 日期运算

> ID：15661654
> 
> 赞同：4
> 
> 时间：2013-03-27T14:40:11.710
> 
> 标签：c#, ncalc

我在一个项目中使用 NCalc。有没有办法进行日期操作，例如

> #16/02/2013# - #15/02/2013# = 1

我似乎无法产生结果。

```
Expression.Evaluate(); 
```

上述表达式的结果为空。我可以比较两个日期，但是有没有办法使用 NCalc 对它们进行操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-21T11:52:24.083

如果您乐于创建自定义函数，则可以在 ncalc 中轻松完成此操作。

```
Expression e = new Expression("DayDiff(#16/02/2013#, #15/02/2013#)");
e.EvaluateFunction += delegate(string name, FunctionArgs args)
{
    if (name == "DayDiff")
    {
        var date1 = args.Parameters[0].Evaluate();
        var date2 = args.Parameters[1].Evaluate();
        var timespan = date2 - date1;
        return timespan.TotalDays; // double (you can convert to int if you wish a whole number!)
    }
}
Console.Write(e.Evaluate()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:57:57.770

不，[NCalc](http://ncalc.codeplex.com/)库不允许这样做。

[阅读](http://ncalc.codeplex.com/discussions/352767)此相关主题。

但是你可以在没有 NCalc 的情况下做到这一点。

假设`a`和`b`的类型为`DateTime`，`(a - b).TotalDays`将返回天数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T06:06:06.463

这对聚会来说已经很晚了，但我已经为 NCalc 构建了一个替代选项，称为[Expressive](https://github.com/bijington/expressive)。这也可以作为[nuget 包](https://www.nuget.org/packages/ExpressiveParser/)使用。

它最初是为了匹配 NCalcs 功能而构建的，因此迁移应该只需要少量的工作。

您可以执行更多与日期相关的功能：

```
DaysBetween(#15/02/2013#, #16/02/2013#) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T14:42:58.927

```
 DateTime Date1, Date2;
    Date1 = DateTime.Parse("2013-03-27 8:42:00");
    Date2 = DateTime.Parse("2013-03-27 8:42:26");
    TimeSpan TimeSpan1 = Date2 - Date1;
    double DayDifference = TimeSpan1.TotalDays; 
```

# android - Android中android_media_Mediaplayer.cpp的使用

> ID：15661655
> 
> 赞同：0
> 
> 时间：2013-03-27T14:40:22.080
> 
> 标签：android, android-mediaplayer

在搜索视频播放器的内部详细信息时，我遇到了一个 pdf，其中`MediaPlayer`类在内部`android_media_Mediaplayer`用于每条消息（即`setDataSource()`、`prepare()`等`start()`）并使用相同的消息进行`android_media_MediaPlayer`调用。`libmedia::MediaPlayer()`我的问题是为什么不能`MediaPlayer`直接调用`libmedia::MediaPlayer`而不是通过调用`android_media_MediaPlayer`？

谢谢！

图片链接如下...

[http://img600.imageshack.us/img600/2005/capturejij.png](http://img600.imageshack.us/img600/2005/capturejij.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:52:11.247

您链接到的图表不是很清楚，但我假设蓝色的 MediaPlayer 框是指 MediaPlayer Java 类。

libmedia MediaPlayer 是一个原生类。Java 和 C/C++ 之间的调用需要通过 Java Native Interface (JNI)，因此 android_media_MediaPlayer 包含与 MediaPlayer Java 类通信所需的 JNI 代码，从而充当 Java 类和本机 libmedia 类之间的一种代理.

例如，在 MediaPlayer.java 你会发现这个声明：

```
public native void prepareAsync() throws IllegalStateException; 
```

在 android_media_MediaPlayer 中作为 JNINativeMethod 列出：

```
{"prepareAsync", "()V", (void *)android_media_MediaPlayer_prepareAsync}, 
```

这表示 Java 称为“ `prepareAsync`”的方法具有签名“ `()V`”（无参数，返回`void`）并对应于本机函数`android_media_MediaPlayer_prepareAsync`。
当`android_media_MediaPlayer_prepareAsync`被调用时，它会依次调用本机 MediaPlayer 的`prepareAsync`方法。

# python - ipython 不会在 Windows 上运行

> ID：15661662
> 
> 赞同：1
> 
> 时间：2013-03-27T14:40:32.860
> 
> 标签：python, windows, ipython

通过在 Windows 上安装 ipython 后`pip install ipython`，我无法运行它并收到以下错误。

```
> ipython
Traceback (most recent call last):
  File "C:\Python27\scripts\ipython-script.py", line 5, in <module>
    from pkg_resources import load_entry_point
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 2607, in <module>
    parse_requirements(__requires__), Environment()
  File "C:\Python27\lib\site-packages\pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: pyreadline>=1.7.1 
```

pyreadline 在 ipython 通过 pip 时安装，但`pip freeze`显示有关 SVN 位置的警告

```
> pip freeze
Warning: cannot find svn location for pyreadline==1.7.1.dev-r0
...
ipython==0.13.1
## FIXME: could not find svn URL in dependency_links for this package:
pyreadline==1.7.1.dev-r0
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:40:32.860

解决方案是卸载安装 ipython 时拉取的 pyreadline 版本（ ）并从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyreadline](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyreadline)`pip uninstall pyreadline`下载并安装`pyreadline-1.7.1.win32-py2.7.‌exe`

# audio - 如何更改我的 FFMPEG 命令以使我的 HTTP Live Streams 更高效？

> ID：15661664
> 
> 赞同：19
> 
> 时间：2013-03-27T14:40:36.513
> 
> 标签：audio, video, ffmpeg, http-live-streaming, transport-stream

我想在使用 FFMPEG 创建 .ts 文件时减少复用开销。

我使用[FFMPEG](https://www.ffmpeg.org/)创建了一系列用于[HTTP 实时流的](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)[传输流](https://en.wikipedia.org/wiki/MPEG_transport_stream)文件。

```
./ffmpeg -i myInputFile.ismv \
         -vcodec copy \
         -acodec copy \
         -bsf h264_mp4toannexb \
         -map 0 \
         -f segment \
         -segment_time 10\
         -segment_list_size 999999 \
         -segment_list output/myVarientPlaylist.m3u8 \
         -segment_format mpegts \
         output/myAudioVideoFile-%04d.ts 
```

我的输入是 ismv 格式并包含一个视频和音频流：

```
Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 320x240, 348 kb/s, 29.97 tbr, 10000k tbn, 59.94 tbc
Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s 
```

有一个与复用相关的问题[导致](https://en.wikipedia.org/wiki/Multiplexing)大量开销被添加到流中。这就是向我描述音频问题的方式：

![在此处输入图像描述](../Images/c21b36dfb7fc5071ea827898b39645e7.png)

因此对于给定的 aac 流，开销将是 88%（因为 200 字节将映射到 2 x 188 字节数据包）。

对于视频，iframe 数据包非常大，因此它们可以很好地转换为 .ts 数据包，但是，差异可以像音频数据包一样小，因此它们会遇到同样的问题。

解决方案是将多个 aac 数据包组合成一个更大的流，然后再将它们打包成 .ts。FFMPEG开箱即用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T18:44:33.153

这是**不可能**的。编解码器依靠封装容器进行成帧，这意味着用信号通知帧的开始和长度。

您的图形实际上错过了一个元素，即 PES 数据包。您的音频帧将首先放入 PES 数据包（表示其**长度**），然后 PES 数据包将被切割成更小的块，这些块将成为 TS 数据包。

按照设计，您不能在已经包含数据的 TS 数据包中启动新的 PES 数据包（在您的情况下包含音频帧）。一个新的 PES 包总是在一个新的 TS 包中开始。否则就不可能开始播放中流（广播位置）——不可能知道新 PES 开始于 TS 中的哪个字节（记住你错过了当前 PES 的开头）。

有一些缓解因素，`FF FF FF`填充可能会被网络硬件压缩。此外，如果您使用的是 HTTP（而不是 UDP 或 RDP），则可以启用*gzip压缩（但我怀疑它会有多大帮助）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T21:45:46.103

我已经修复了在[http://git.videolan.org/gitweb.cgi/ffmpeg.git/?a=commit;h=75c8d7c2b4972f6ba2cef605949f57322f7c0361](http://git.videolan.org/gitweb.cgi/ffmpeg.git/?a=commit;h=75c8d7c2b4972f6ba2cef605949f57322f7c0361)中的每个帧上同步 TS 输出的最严重问题- 请尝试之后的版本。

# iphone - 为什么我的字符串长度总是显示为长度 2in iphone？

> ID：15661665
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:40:40.200
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我想将字符串 0..9 显示为秒，将 10 个 ownwords 显示为秒。我采用字符串长度来实现此目的，但它总是给我长度为 2，即使是 0。 .9 或 10 个 ownwords.naturally 它需要给出 1 和 2 但我不明白为什么会出现这种奇怪的行为，我将字符串视为这样`

```
todaysdateString1= [NSString stringWithFormat:@"%2ld",seconds];
        int myLength2 = [todaysdateString1 length];
        NSString *subtitle;
         NSLog(@"%@",todaysdateString1);
        NSLog(@"%d",myLength2);
        if(myLength2==2)
        subtitle = [NSString stringWithString:@"second"];
        else
        subtitle = [NSString stringWithString:@"seconds"]; 
        todaysdateString1 = [todaysdateString1 stringByAppendingFormat:@" %@",subtitle]; 
```

‘有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:44:53.347

在第一行中，@"%2ld" 强制字符串长度为 2。您应该只使用 @"%ld" 甚至 @"%d"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:45:57.383

看第 1 行

```
todaysdateString1= [NSString stringWithFormat:@"%2ld",seconds]; 
```

在这里你已经为你的字符串 %2d 设置了填充，这意味着如果你的字符串是一个字符，它将添加 0 作为前缀。所以删除它，将其替换为以下行

```
todaysdateString1= [NSString stringWithFormat:@"%ld",seconds]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:14:13.173

您发布的所有代码都应该是：

```
todaysdateString1 = [NSString stringWithFormat:@"%ld %@", seconds, seconds >= 10 ? @"seconds" : @"second"]; 
```

删除`2`将解决以空格显示 0 到 9 的问题。

另外，为什么要检查字符串长度？检查 的实际值`seconds`。

最后，为什么要显示`second`0 到 9？通常，您应该`second`只显示 1 和`seconds`所有其他值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:59:26.663

由于您在 stringWithFormat 中使用“d”，因此我假设“seconds”是一个 int。

如果 seconds 是 int，只需检查 seconds 并查看它是否大于或小于等于 9。然后根据您的选择：

```
todaysdateString1 = [NSString stringWithFormat:@"%2ld", seconds];
int myLength2 = [todaysdateString1 length];
NSString *subtitle;
NSLog(@"%@", todaysdateString1);
NSLog(@"%d", myLength2);
if (seconds <= 9)
    subtitle = [NSString stringWithString:@"second"];
else
    subtitle = [NSString stringWithString:@"seconds"]; 
todaysdateString1 = [todaysdateString1 stringByAppendingFormat:@" %@", subtitle]; 
```

将您的决定建立在一个简单的整数上可能更可靠。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T15:01:28.720

你可以这样做：

```
if( (seconds > 0) && (seconds < 10) ){

      subtitle = [NSString stringWithString:@"second"];

}else{

      subtitle = [NSString stringWithString:@"seconds"]; 
    todaysdateString1 = [todaysdateString1 stringByAppendingFormat:@" %@",subtitle];

} 
```

# jquery - 使用 jQuery 在带有跨度的表之前插入

> ID：15661668
> 
> 赞同：0
> 
> 时间：2013-03-27T14:40:58.627
> 
> 标签：jquery

这是我的代码：

```
<td valign="top">
 <table width="100%" cellspacing="0" cellpadding="10" border="0">
  <tbody>
   <tr>
    <td valign="top">
     <span itemprop="testx"></span>
    </td>
   </tr>
 </tbody>
</table>
</td> 
```

我需要在这里插入文字

```
<td valign="top">
 *NEW TEXT HERE*
 <table width="100%" cellspacing="0" cellpadding="10" border="0">
  <tbody>
   <tr>
    <td valign="top">
     <span itemprop="testx"></span>
    </td>
   </tr>
 </tbody>
</table>
</td> 
```

我试过这个：

```
jQuery("span[itemprop$='testx']").parents('table').before("NEW TEXT"); 
```

但是我在页面中有许多其他表格，这将其放在顶部。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:42:51.457

使用`:first`选择器：

```
$("span[itemprop$='testx']").parents('table:first').before("NEW TEXT"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:43:02.010

`parents`选择被选元素的所有匹配的父元素，可以使用`closest`method.

```
$("span[itemprop='testx']").closest('table').before("NEW TEXT"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:43:23.147

为表设置一些 id 或类，然后替换为 ("#table") 或 (".table")

# sql - 使用输出文件调试 Sql Server 存储过程

> ID：15661670
> 
> 赞同：0
> 
> 时间：2013-03-27T14:41:02.953
> 
> 标签：sql, sql-server, sql-server-2008, debugging, sql-server-2005

我必须在 SQL Server 2008（也在 2005 年）中调试一个大型存储过程。

因为我不能一步一步地进入那个过程，我需要使用一些输出文件来调试它。

实际上我使用类似的东西

```
DECLARE @SQL VARCHAR(8000) 
SELECT @SQL = 'BCP "SELECT * FROM MY_TABLE" QUERYOUT "D:\TDB\test.txt" -C -T -w' 
EXEC MASTER..XP_CMDSHELL @SQL 
```

但是这种方法有很多限制，例如无法使用 # 表，以及使用过滤器的复杂方式（其中 X='+cast(@MYLocalVar as varchar)+'）...

有没有其他方法可以将*选择*输出到文件，就像*MySql*一样

```
SELECT * into outfile '../../htdocs/VIP/Temp/temp.txt' from tmp_Menu2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:54:38.510

您可以很容易地将数据放入表中：

```
SELECT *
into      anotherdatabase..outtable
from . . . 
```

这将创建一个包含您想要的任何列的新表。

要将某些内容输出到文件中，需要一个额外的步骤，使用`bulk export`.

# jquery - 以空 POST 访问服务器上的 formData

> ID：15661672
> 
> 赞同：0
> 
> 时间：2013-03-27T14:41:05.057
> 
> 标签：jquery

```
$.ajax({
    type: "POST",
    url: "server.php,
    enctype: 'multipart/form-data',
    data: formData,
    cache: true,
    contentType: false,
    processData: false,
    success: function (data) {  alert(data);    }
}); 
```

并在 server.php

```
 print_r($_REQUEST['object']); 
```

但我只得到 Array() 空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T08:54:02.433

使用较旧的 jquery 版本文件并替换为最新版本时存在问题。这是旧的 jquery

```
<script src="jquery-1.4.4.js"></script> 
```

新的 jquery 文件如下：

```
<script src="jquery-1.11.0.min.js"></script> 
```

我不知道这两个文件的变化，但是当我尝试最新版本时，它允许我上传文件，现在我证明最新版本更好用并尝试使用最新版本；

与 FormData相同的答案[不能附加文件对象](https://stackoverflow.com/questions/22254564/formdata-cannot-appended-with-file-object)

# delphi - 在 TObjectList 中存储 TPoint 数组

> ID：15661678
> 
> 赞同：2
> 
> 时间：2013-03-27T14:41:20.610
> 
> 标签：delphi

我定义了一个 Objectlist 来存储几个 Polygons 作为 TFPolygon = array of TPoint inside this TObjectList; 但是使用我的 objectlist 的 add 函数，我得到一个访问冲突错误：

```
type
  TFPolygon = array of TPoint;
  TFPolygonList = class(TObjectList)
  private
    procedure SetPolygon(Index: Integer; Value: TFPolygon);
    function GetPolygon(Index: Integer): TFPolygon;
  public
    procedure Add(p: TFPolygon);
    property Items[index: Integer]: TFPolygon read GetPolygon write SetPolygon; default;
  end;

implementation

procedure TFPolygonList.SetPolygon(Index: Integer; Value: TFPolygon);
begin
  inherited Items[Index] := Pointer(Value);
end;

function TFPolygonList.GetPolygon(Index: Integer): TFPolygon;
begin
  Result := TFPolygon(inherited Items[Index]);
end;

procedure TFPolygonList.Add(p: TFPolygon);
begin
  inherited Add(Pointer(p));
end; 
```

我无法理解此代码示例中的错误？我可以只将类存储在 TObjectList 中，还是我存储 TPoints 数组的方法也有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:57:05.267

您的方法无效。动态数组是托管类型。它们的生命周期由编译器管理。为此，您不能放弃它们是托管类型的事实，这正是您所做的。

您将动态数组转换为`Pointer`. 此时，您已经对动态数组进行了新引用，但编译器不知道它，因为 a`Pointer`不是托管类型。

您有几个选项可以解决您的问题。

1.  如果您使用的是现代 Delphi，请停止使用`TObjectList`. 而是在`Generics.Collections`. 在你的情况下`TList<TFPolygon>`是你需要的。因为这是编译时类型安全的，所以托管类型的所有生命周期都得到了照顾。
2.  如果您使用的是较旧的 Delphi，则可以将动态数组包装在一个类中。然后将这些类的实例添加到您的`TObjectList`. 确保您的列表配置为拥有其对象。您完全有可能在实现中进行包装，`TFPolygonList`这将很好地封装事物。

# sql - MS SQL 中的短语简单字符串

> ID：15661686
> 
> 赞同：0
> 
> 时间：2013-03-27T14:41:33.137
> 
> 标签：sql, sql-server, phrase

我有一个代码字符串，其中代码与 AND、OR 和[括号](http://en.wikipedia.org/wiki/%28#Parentheses_.28_.29)连接。

我想拆分它们，以便获得多条记录，其中代码仅通过 AND 连接

AND 用 + 表示，OR 用 / 表示

例如，如果我有以下两条记录

```
Phrase        Translates to:
=======       ==============
(A/B)+C       (A OR B) AND C
(D+E)/F       (D AND E) OR F 
```

结果应该是

```
Expression    Translates to:
=======       ==============
A+C           A AND C
B+C           B AND C

D+E           D AND E
F             F 
```

我的 SQL 语法如下所示：

```
CREATE TABLE Code_Conditions(
  Part AS CHAR(10),
  Condition AS VARCHAR(255)
);

CREATE TABLE Product(
  Product_ID AS INT PRIMARY KEY,
  Code_String AS VARCHAR(255)
);

CREATE TABLE Product_Parts(
  Product_ID AS INT FOREIGN KEY REFERENCES Product (Product_ID),
  Part AS CHAR(10)
);

INSERT INTO Code_Conditions (Part, Condition) VALUES ('PartA', '(A/B)+C');
INSERT INTO Code_Conditions (Part, Condition) VALUES ('PartB', '(D+E)/F');

INSERT INTO Product(Product_ID, Code_String) VALUES ( 1, 'A+B+D');
INSERT INTO Product(Product_ID, Code_String) VALUES ( 2, 'B+C+F');
INSERT INTO Product(Product_ID, Code_String) VALUES ( 3, 'B+C+D'); 
```

产品 1 不应匹配任何部件
产品 2 应匹配 PartA 和 Part B
产品 3 应匹配 PartA

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:47:10.947

从我们掌握的非常少的信息以及我所能理解的一点点来看，我不得不猜测您应该看看[用户定义函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)(UDF)。另见[这篇](http://msdn.microsoft.com/en-us/magazine/cc164062.aspx)文章。

**编辑**我现在在 user2216002 的编辑之后
[看到了逻辑。](https://stackoverflow.com/questions/15661686/phrase-simple-strings-in-ms-sql#comment22228640_15661686)我已经进一步澄清了这个问题。

这*可以*使用 UDF 来完成，但出于大型（r）表的性能原因以及代码不会非常“漂亮”的事实，我建议不要这样做。我建议首先查看数据库的[规范化](http://en.wikipedia.org/wiki/Database_normalization)是否有助于解决以更有效的方式存储这些“短语”的问题。

如果您坚持使用“仅限 SQL”的解决方案，您将不得不在 T-SQL 中编写一个[表达式解析器](http://en.wikipedia.org/wiki/Parsing_expression_grammar)，这又不是很漂亮，并且需要大量工作才能使其正确。如果“短语”（或更确切地说：表达式）不比问题中的示例复杂，您可以采取一些捷径。

# java - 组装好的 jar 在同一文件夹中找不到 hbase-site.xml

> ID：15661687
> 
> 赞同：0
> 
> 时间：2013-03-27T14:41:35.840
> 
> 标签：java, maven, hbase

我已经在这里找到了一些有用的问答，但问题仍然存在。我在我的 pom 文件中使用了以下插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
              <configuration>
                <excludes>
                    <exclude>hbase-site.xml</exclude>
                    <exclude>log4j.properties</exclude>
                </excludes>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <finalName>myfinalname</finalName>
                <appendAssemblyId>false</appendAssemblyId>
                <archive>
                    <manifest><mainClass>com.company.MainClass</mainClass>
                    </manifest>
                    <manifestEntries>
                        <Class-Path>.</Class-Path>
                    </manifestEntries>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

如您所见，我排除了属性文件（位于 src/main/resources 中），还添加了 Class-Path: 。到清单。但是在初始化 hbase 时，它​​找不到与 jar 文件位于同一文件夹中的 hbase-site.xml。

当我删除*排除项*时，一切正常，但我需要文件不在生成的 jar 中，使它们可供用户编辑。

由于这应该可以工作，我想知道这是否是 HBase 的问题，也许 HBase 正在使用不同的加载器？

如何让 HBase 从与执行 jar 文件位于同一目录的文件中加载配置？

**编辑：**

我创建了可执行 jar，当我使用 运行它时`java -jar`，还将 hbase-site.xml 放入与 jar 所在的文件夹相同的文件夹中，初始化 hbase 时，它​​不会读取我的配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:57:22.430

我找到了以下解决方法。使用以下脚本启动 jar

```
java -cp .:/path/to/myapp.jar com.company.MainClass 
```

使其读取位于同一文件夹中的 hbase-site.xml。（这是基于这里为这个问题提供的答案：[How to include hbase-site.xml in the classpath](https://stackoverflow.com/questions/14326308/how-to-include-hbase-site-xml-in-the-classpath)）但我更喜欢使用*默认值*

```
java -jar myapp.jar 
```

命令。如果您知道如何实现这一点（制作 maven 组装的 jar，包括路径中的文件夹），请告诉我。同时，我将坚持使用此解决方法。

# visual-studio - 鼠标点击操作VC++

> ID：15661694
> 
> 赞同：0
> 
> 时间：2013-03-27T14:41:59.080
> 
> 标签：visual-studio, visual-c++, opencv

```
if (i==0)
{
 //Here I've to do MouseDown operation
}
else
{
 //perform MouseUp operation
} 
```

这是示例代码，我想像上面那样做一些事情......

我可以通过 SetCursorPos() 移动鼠标。那么我该如何执行点击事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:47:25.103

可以使用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)WinAPI 函数模拟任何形式的输入（还有已弃用的[`mouse_event`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)函数，我发现它更易于使用，但被标记为已弃用/取代）。

根据您的工作，[`SendMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)（阻塞）或[`PostMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)（非阻塞）使用起来可能会更好/更简单，因为它们直接发送由输入事件生成的窗口消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:23:49.960

好吧，对于 highgui 窗口，试试这个：

```
void onmouse( int event, int x, int y, int d, void *ptr )
{
    // cache coords for use in main()
    cv::Point * p = (cv::Point *)ptr;
    p->x = x;
    p->y = y;

    if ( event != 0 )
        cout << event << " " << x << " " << y << " "  << d << " " << endl;
}
int main() 
{

    cv::namedWindow("win",1);
    cv::Point p;
    cv::SetMouseCallback("win",onmouse,(void*)(&p));
    ...
    // whenever someone clicks or moves, the coords will be in p now 
```

# c++ - QFileSystemModel 冻结 UI

> ID：15661696
> 
> 赞同：0
> 
> 时间：2013-03-27T14:42:10.817
> 
> 标签：c++, windows, multithreading, qt

我正在使用 Qt 4.8 并尝试创建一个显示一个或多个目录树的 GUI。我在文档中读到`QFileSystemModel`使用单独的线程。我试过这个：

```
QFileSystemModel *model = new QFileSystemModel;
model->setRootPath("C:/");
connect(model, SIGNAL(directoryLoaded(QString)), this, SLOT(alertLoaded(QString)));
ui->treeViewFolders->setModel(model); 
```

此处`alertLoaded`仅在加载目录时显示消息对话框。因此，如果我有权利，当我试图在树中打开一个新的目录分支时，它必须在后台加载目录的项目，以便 UI 在此过程中不会冻结。

但问题是它似乎不是这样的。当我试图打开一个包含 1000 个或更多文件的目录（例如 system32）时，它会冻结几秒钟。显然，图标正在减慢加载速度，但如果模型使用单独的线程，为什么它会冻结？

**问题：**

我如何告诉模型，我真的想使用单独的线程或者我不想等待另一个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:29:05.160

AFAIK，QFileSystemModel 总是使用一个单独的线程。在我看来，您的视图在检索整个文件列表并在添加每个项目时重置布局时正在锁定您的系统。帖子有点旧，但他们[在这里](http://lists.trolltech.com/qt4-preview-feedback/2005-06/thread00029-0.html)稍微谈论了你的问题。

如果你使用 QListView，你有同样的延迟吗？[如果您使用 QListView 而不是 QTreeView ，则可以使用QListView::setLayoutMode()](http://qt-project.org/doc/qt-4.8/qlistview.html#LayoutMode-enum)将其设置为以批处理模式运行。

如果你必须有一个 QTreeView，你可以考虑继承它并使用[QAbstractItemView::scheduleDelayedItemsLayout()](http://doc-snapshot.qt-project.org/4.8/qabstractitemview.html#scheduleDelayedItemsLayout)一次性布局所有内容。

# asp.net - favicon 无法从 ASP.Net 母版页正确呈现

> ID：15661701
> 
> 赞同：0
> 
> 时间：2013-03-27T14:42:24.733
> 
> 标签：asp.net

```
<link href="<%=this.faviconURL %>" type="image/x-icon" rel="icon" /> 
```

它会从字面上打印出'

```
<link href="%3C%25=this.faviconURL%20%25%3E" type="image/x-icon" rel="icon" /> 
```

就好像运行时从字面上获取链接标签并拒绝进行任何形式的替换。有人可以解释为什么会这样吗？我真的不想为此使用网络控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:45:03.800

我认为您应该添加`runat`到链接标签。所以它可以被Asp.Net处理。

```
<link href="<%=this.faviconURL %>" runat="server" type="image/x-icon" rel="icon" /> 
```

显然我错了，看到[Scriptlet 在 head 标签中不起作用](https://stackoverflow.com/questions/8613083/scriptlet-is-not-working-in-head-tag)，您可以在没有 runat 标签的情况下简单使用。

```
<link href="~/server/icofileurl"   type="image/x-icon" rel="icon" /> 
```

[如何在 ASP.NET 站点中添加 favicon.ico](https://stackoverflow.com/questions/9963584/how-to-add-favicon-ico-in-asp-net-site?lq=1)

# sql-server - Azure SQL 联合中的顺序 ID

> ID：15661707
> 
> 赞同：0
> 
> 时间：2013-03-27T14:42:41.977
> 
> 标签：sql-server, sequence, azure-sql-database, sharding, federation

我使用 Azure SQL 联合来存储用户。正如我在本文中所读到的[，](http://blogs.msdn.com/b/cbiyikoglu/archive/2011/06/20/id-generation-in-federations-identity-sequences-and-guids-uniqueidentifier.aspx)生成分布式联合密钥的最佳方法是使用 GUID。我认为向用户显示 GUID 对人类不友好，所以我希望用户也有 1、2、3、4、5 等 ID。现在我计划在联邦根数据库中有一个表来存储顺序 ID 和联邦密钥。还是有更好的方法来实现这一目标？

# wcf - 实体框架自我跟踪实体与工作单元之间的区别

> ID：15661708
> 
> 赞同：0
> 
> 时间：2013-03-27T14:42:44.157
> 
> 标签：wcf, entity-framework-5, unit-of-work, self-tracking-entities

使用实体框架自我跟踪实体和实施工作单元架构有什么区别？据我了解，两者都在跟踪对象，一个数据库调用提交更改。所以我无法弄清楚这些的区别。有人能告诉我在这种情况下应该使用什么吗？我将实体框架 5 与 WCF 服务应用程序一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:00:33.220

自我跟踪实体的目的是您不需要保持 DbContext/ObjectContext 活动来跟踪对实体对象的更改。这样做的主要特点是您可以将实体发送到另一个进程（或整个主机，例如另一台主机上的另一个 WCF 服务），该进程对实体对象进行更改，然后将该实体对象返回给调用进程，而更改跟踪仍然完好无损.

UoW 协调多个实体对象之间所做的更改（非常简化的解释）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T09:05:50.017

根据 MSDN，不再推荐自我跟踪实体

> **不再推荐 STE**
> 
> 我们不再推荐使用 STE 模板，它仍可用于支持现有应用程序。访问 N-Tier 页面，了解我们为 N-Tier 方案推荐的其他选项。

[http://msdn.microsoft.com/en-us/data/jj613924.aspx](http://msdn.microsoft.com/en-us/data/jj613924.aspx)

# html - 页脚粘在底部问题

> ID：15661709
> 
> 赞同：0
> 
> 时间：2013-03-27T14:42:47.447
> 
> 标签：html, css

我已经尝试过使这项工作的方法。主要是在尝试[这个解决方案](http://ryanfait.com/resources/footer-stick-to-bottom-of-page)。

那对我没有用。我确实看到的问题是，在我的 body html css 中，我确实将高度设置为 100%，但它并没有真正将其设置为 100%。

这是我的页脚和正文 html 的 CSS 代码：

```
body {
font-family: 'AG-Regular', Helvetica, Arial, sans-serif;
margin: 0;
min-width: 1058px;
}

body, html {
height:100% !important;
}

#footerBox {
    width: 100%;
height:218px;
background-image:url(/img/footer-bg.png);
background-attachment:scroll;
background-repeat:repeat-x;
} 
```

[这是该网站的链接](http://www2.pmxusercon.com)。

你应该看看它在哪里搞砸了。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:11:56.923

要使页眉和页脚保持不变，您需要使用 position: fixed on both。

**示例代码**

**标题**

```
#headerBox
{
    position: fixed;
    height: 200px;
    left: 0;
    top: 0;
    width: 100%;
} 
```

**主要的**

```
#mainBox
{
    overflow: auto;
} 
```

**页脚**

```
#footerBox
{
     postion: fixed;
     height: 218px;
     width: 100%;
     bottom: 0;
     left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:03:46.463

主要问题是`-218px margin-bottom`在`#maincontent`. 这样`218px`做是为了让你的页脚被向下推。我使用 将您的页脚设置为始终位于页面底部`position: fixed`，不确定这是否是您想要的。

```
#footerBox {
width: 100%;
height: 218px;
background-image: url(/img/footer-bg.png);
background-attachment: scroll;
background-repeat: repeat-x;
position: fixed;
bottom: 0;
}
#mainBox #mainContent {
background-color: white;
margin: 185px auto 218px;
overflow: auto;
padding: 30px 20px 20px;
width: 958px;
} 
```

# java - Android 日历序列化与 Java 6 不兼容

> ID：15661713
> 
> 赞同：2
> 
> 时间：2013-03-27T14:42:54.740
> 
> 标签：java, android, sockets, serialization, calendar

我正在尝试在 Java 服务器和 Android 客户端之间使用对象序列化套接字连接。尝试通过此连接发送日历对象时遇到问题。

Calendar 对象由 Java 服务器发送并由 Android 客户端接收，但我在 LogCat 中收到错误消息：

> java.lang.NullPointerException：java.util.TimeZone 类型的预期接收者，但得到了 null

我意识到它没有正确反序列化。

我准备了这个代码示例来重现错误：

Java 服务器：

```
public class SerializeTest {

    public static void main(String[] args) {
        try {

        ServerSocket serverSocket = new ServerSocket(49100);
        Socket socket = serverSocket.accept();
        OutputStream oStream = socket.getOutputStream();
        ObjectOutputStream ooStream = new ObjectOutputStream(oStream);

        String testString = "This is a test String";
        Calendar testCalendar = Calendar.getInstance();

        ooStream.writeObject(testCalendar);
        ooStream.reset();
        ooStream.close();

        } catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

Android 客户端：（我创建了一个空白项目，并在清单中添加了 Internet 权限）

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Socket socket = new Socket("10.0.2.2", 49100);
                    InputStream iStream = socket.getInputStream();
                    ObjectInputStream oiStream = new ObjectInputStream(iStream);

                    Object object = oiStream.readObject();
                    Log.d("Test", object.toString());
                    oiStream.close();

                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
        });
        t.start();
    }

} 
```

使用该代码示例，如果您启动 Java 服务器，然后在 android 模拟器中运行 Android 客户端，您应该会收到错误消息。

我注意到 android-17/android.jar 中的 java.util.Calendar 对象与 jre6 中的 java.util.Calendar 对象不同。但是，它们都共享相同的 serialVersionUID 1807547505821590642L。（这告诉我它们是为了通过序列化兼容）。

所以我想我正在寻找这里发生的事情的解释，我想知道，我可以在 Java 和 Android 上使用其中一个日历对象吗？（如果是这样，怎么做？）我应该使用不同的对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:48:49.923

> 我正在尝试在 Java 服务器和 Android 客户端之间使用对象序列化套接字连接

这不太可能运作良好。

> 我意识到它没有正确反序列化。

这是一个很好的例子，说明为什么它不太可能很好地工作。Android 致力于维护二进制 API 的兼容性。任何类的内部实现都可以修改，这意味着 Java 样式的对象序列化可以修改。

> 我可以在 Java 和 Android 上使用其中一个日历对象吗？

当然。只是不要在不同平台之间使用 Java 风格的对象序列化。

将值作为`long`( `getTimeInMillis()`) 传递，或者编写您自己的 JSON/XML/protobuf/whatever 序列化程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:09:02.640

JavaSE 版本和 Android 版本之间没有一对一的映射关系。Android 和 Java 的发展方式不同。请参阅这些 SO 问题：

*   [Android 的 Java 版本与 Java SE 版本有何关系？](https://stackoverflow.com/questions/7535385/how-does-androids-java-version-relate-to-a-java-se-version)
*   [Android 上的 JRE](https://stackoverflow.com/questions/390482/jre-on-android)

正因为如此，我认为在 Android 上工作的人甚至都没有费心去改变`serialVersionUID`公共类的。在将类从一个 JDK 版本演变到另一个版本时，序列化兼容性是最明智的问题之一，想象一下保持 JavaSE 和 Android 之间的序列化兼容性会令人头疼。

# javascript - jquery $.get() 在本地主机上不起作用

> ID：15661717
> 
> 赞同：1
> 
> 时间：2013-03-27T14:42:59.333
> 
> 标签：javascript, jquery, localhost

我正在尝试使用 jquery $.get() 从服务器文件中获取值。这两个文件当前都在我的机器上的 /var/www 目录中（使用 linux）。

我知道 ajax 的跨域限制，因此我将这两个文件放在 /var/www.

“客户端”文件 (f1.htm) 是：

```
<!DOCTYPE html>
<html>

<head>
<script src="jquery-1.9.1.min.js"></script>
</head> 

<body>

<script type="text/javascript">
    $.get( "f11.htm", function( data, status ){ alert( "1" ); } );
/*
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","f11.htm",false);
    xmlhttp.send();
    alert( xmlhttp.readyState + " " + xmlhttp.status );
*/
    alert( "2" );
</script>

</body>

</html> 
```

而“服务器”脚本（f11.htm）很简单：

```
<html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<head>
</head> 

<body>

<?php
echo "server text";
?> 

</body>

</html> 
```

客户端脚本（“f1.htm”）卡在 $.get() 行。我已经用 xmlhttprequest （已评论）尝试过这个，它可以工作。为什么 $.get() 行不起作用？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:04:55.330

您可以尝试使用此代码检查返回的错误函数，而不是简写 $.get。

```
$.ajax({
  type:'GET',
  url: 'f11.htm',
  data: {},
  success: function(data) {
   console.log(data); 
  }, error: function(jqXHR, textStatus, errorThrown) {
   console.log(errorThrown); 
  }
}); 
```

# actionscript-3 - 在动态文本字段上显示“for”的计数器

> ID：15661724
> 
> 赞同：0
> 
> 时间：2013-03-27T14:43:07.007
> 
> 标签：actionscript-3, for-loop, counter, dynamic-text

我对 as3 很陌生，所以我将不胜感激。我试图只使用命令“for”来制作一个计数器。我以 20 为步数从 1 到 1000 进行计数。我要做的下一步是在输出选项卡上显示我已经知道我可以使用“trace();”来制作它，但我也希望显示它在主 .swf 窗口上，我尝试使用我命名为“dyna”的动态文本字段

**问题是，它只显示最后一个数字。“1000”或变化非常快，我几乎没有注意到，最后一个仍然存在。**

```
var i:int;
for (i = 1; i < 1001; i+=20)
{
trace(i);
//dyna is the name of my dynamic textfiled
dyna.text = i.toString();
//dinamico.text = String(i);
} 
```

- 有没有办法在我的动态文本框中记录所有数字，比如水平或垂直的 [1,20,40,60,....]。

- 或者也许以某种方式一步一步地从一个按钮运行它。像[点击，20；点击，40；点击 60 .....]

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:10:58.810

```
var i:int;
var str:String="1";

for (i = 20; i < 1001; i+=20)
{
  str=str+","+i;
}
dyna.autoSize = TextFieldAutoSize.LEFT;
dyna.text=str; 
```

输出1,20,40,60,80,100,120,140,​​160...

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:17:39.253

要逐步从按钮运行此操作，您需要一个按钮、一个附加到按钮的侦听器、一个可用于按钮和文本字段的计数器，以及一些代码。该按钮必须位于舞台上或资产中的某个位置，并且以某种方式命名，因此您可以通过名称对其进行寻址。这里它被命名为`yourButton`：

```
var counter:int=0;
yourButton.addEventListener(MouseEvent.CLICK,updateDyna);
function updateDyna(e:MouseEvent):void {
    counter+=20;
    if (counter>1000) counter=1000;
    dyna.text=counter.toString();
} 
```

在这里，点击 - 20，点击 - 40，等等，最多 1000。

# syntax-highlighting - Sublime Bracket Highlighter 不给括号上色

> ID：15661731
> 
> 赞同：17
> 
> 时间：2013-03-27T14:43:41.903
> 
> 标签：syntax-highlighting, sublimetext2, sublimetext

对我来说，Bracket Highlighter 插件不是为括号着色和突出显示，而只是用白色强调它们。

这是一个快照：

![Sublime BracketHighlighter 仅下划线不突出显示](../Images/ccb68b3cb4eb592e5c24a234e5173f03.png)

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-27T15:04:46.203

我已经根据以下评论修改了我的示例`AGS`- 它现在包括几个突出显示选项，其余的是大纲。谢谢你`AGS`，感谢你创建这个有用的线程的原始海报。

* * *

bh_core.sublime 设置

```
{
    "bracket_styles": {
        // This particular style is used to highlight
        // unmatched bracket pairs. It is a special
        // style.
        "unmatched": {
            "icon": "question",
            "color": "brackethighlighter.unmatched",
            "style": "highlight"
        },
        // User defined region styles
        "curly": {
            "icon": "curly_bracket",
            "color": "brackethighlighter.curly",
            "style": "highlight"
        },
        "round": {
            "icon": "round_bracket",
            "color": "brackethighlighter.round",
            "style": "outline"
        },
        "square": {
            "icon": "square_bracket",
            "color": "brackethighlighter.square",
            "style": "outline"
        },
        "angle": {
            "icon": "angle_bracket",
            "color": "brackethighlighter.angle",
            "style": "outline"
        },
        "tag": {
            "icon": "tag",
            "color": "brackethighlighter.tag",
            "style": "outline"
        },
        "single_quote": {
            "icon": "single_quote",
            "color": "brackethighlighter.quote",
            "style": "outline"
        },
        "double_quote": {
            "icon": "double_quote",
            "color": "brackethighlighter.quote",
            "style": "outline"
        },
        "regex": {
            "icon": "regex",
            "color": "brackethighlighter.quote",
            "style": "outline"
        }
    }
} 
```

* * *

不管是什么主题文件you_use.tmTheme

```
<!-- BEGIN Bracket Highlighter plugin color modifications -->

<dict>
    <key>name</key>
    <string>Unmatched</string>
    <key>scope</key>
    <string>brackethighlighter.unmatched</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#FD971F</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Bracket Curly</string>
    <key>scope</key>
    <string>brackethighlighter.curly</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#FF0000</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Bracket Round</string>
    <key>scope</key>
    <string>brackethighlighter.round</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#0000FF</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Bracket Square</string>
    <key>scope</key>
    <string>brackethighlighter.square</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#800080</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Bracket Angle</string>
    <key>scope</key>
    <string>brackethighlighter.angle</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#AE81FF</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Bracket Tag</string>
    <key>scope</key>
    <string>brackethighlighter.tag</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#FD971F</string>
    </dict>
</dict>

<dict>
    <key>name</key>
    <string>Single Quote | Double Quote | Regex</string>
    <key>scope</key>
    <string>brackethighlighter.quote</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#AE81FF</string>
    </dict>
</dict>

<!-- END Bracket Highlighter plugin color modifications --> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T16:54:10.440

编辑您的`~/Library/Application Support/Sublime Text 2/Packages/BracketHighlighter/bh_core.sublime-settings`

并为您想要突出显示的每个括号类型设置“样式”为“突出显示”。这是大括号的示例。

```
 // User defined region styles
 "curly": {
     "icon": "curly_bracket",
     "color": "entity.name.class",
     "style": "highlight"
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-20T14:27:46.823

重新启动崇高。

我只花了 20 分钟寻找并尝试了上述所有方法等。最后在其他地方找到了一条建议重新启动的评论；它修复了它，并给了我足够长的时间，让我在重新加载时狠狠地扇了自己一巴掌。

# knockout.js - hammerjs jquery 下拉刷新敲除绑定

> ID：15661736
> 
> 赞同：1
> 
> 时间：2013-03-27T14:43:55.727
> 
> 标签：knockout.js, jquery-animate, hammer.js

我正在尝试编写一个淘汰绑定处理程序来执行拉动刷新功能（类似于 ios 上的无数应用程序）。因此，我将 Hammer.js 用于触摸手势，使用 jquery 动画来为相关项目设置动画，并编写了一个绑定处理程序。

这是相同的小提琴。[http://jsfiddle.net/sujesharukil/Jy8Yg/38/](http://jsfiddle.net/sujesharukil/Jy8Yg/38/)

当拖动和释放速度很快时，一切都很好。但是当我慢慢向下拖动 div 时，顶部的灰色刷新条与底部的 div 重叠。换句话说，灰色刷新区域的动画似乎比被拖动的底部 div 发生得更快。我必须在这里遗漏一些微不足道的东西。另一双眼睛肯定会有所帮助。看出什么不对了吗？有人可以帮我吗？

```
 init: function(element, valueAccessor) {

    var $element = $(element), handler = valueAccessor(),
        $pullToRefresh = $('<div/>', {'class': 'pull-refresh-slide'}),
        $pullMessage = $('<div/>', {'class': 'pull-message'});

    $pullToRefresh.append($pullMessage);

    $element.before($pullToRefresh); 
```

这是下拉释放句柄内的代码。

```
var mTop = ev.gesture.deltaY,
    pTop = parseInt($pullToRefresh.css('top'));

    console.log('pTop: ' + pTop);
    console.log('mTop: ' + mTop);
    console.log('pTop + mTop : ' + (pTop + mTop));

    if(pTop + mTop > 0 ){
        pTop = 0;
        $pullMessage.addClass('release');
    }
    else
        pTop = pTop + mTop;

     if(mTop > parseInt($pullToRefresh.height()))
         mTop = parseInt($pullToRefresh.height());

     $element.animate({'margin-top': mTop },{duration: ev.gesture.deltaTime / 100, queue: false});
     $pullToRefresh.animate({'top': pTop},{duration: ev.gesture.deltaTime/100, queue: false}); 
```

最后两个动画功能似乎没有同时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:36:04.290

我基本上通过根据 $element 的动画调整 pullToRefresh 的 deltaTime 来解决这个问题。因此在 $element 上添加了对动画完成的回调以动画 $pullToRefresh。

# php - CakePHP 的会话与配置

> ID：15661740
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:02.107
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.2, cakephp-2.3

我在互联网上看到了一些代码，为了检查访问具体操作的权限，他们`Configure::read`以这种方式使用该功能：

```
public function action1(){
    if(!Configure::read('isAdmin')){
        $this->redirect(array('controller' => 'depots', 'action' => 'status'));
    }

    //whatever
} 
```

我想知道，为此目的使用 and 和使用`Configure::read`and之间有什么区别？`Configure:write``$this->Session->read()``$this->Session->write()`

哪种检查方法更好？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:45:02.417

## 使用 AuthComponent

如果您使用内置的[AuthComponent](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)，CakePHP 将在会话中存储当前登录用户的详细信息。

## 获取当前登录用户的属性

登录后，您可以通过AuthComponent 访问Used 的信息（例如role_id）。这可以在*任何地方*完成（如果需要，也可以在您的视图或模型中）；

例如;

```
if (123 === AuthComponent::user('role_id')) {
    debug('hello admin user');
} 
```

或者，在控制器内部：

```
if (123 === $this->Auth->user('role_id')) {
    debug('hello admin user');
} 
```

[访问已登录的用户](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)

但是，为了不必在任何地方重复 group-id，最好为此创建一个方法（例如在您的 AppController 中）；

```
/**
 * Checks if the currently logged in user is an admin
 *
 * @return bool  true if the current user is an admin
 */
protected function isAdmin()
{
    // probably best to make the id configurable (Configure::write())?
    return (123 === $this->Auth->user('role_id'));
} 
```

## 访问控制

要使用“简单”授权，您可以在控制器中创建自己的`isAuthorized()`操作，这将允许您根据当前登录用户的属性阻止对特定操作的访问；

[使用控制器授权](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-controllerauthorize)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:10:34.927

我不明白为什么要将用户角色放在 Configure 数组中，因为它旨在包含应用程序范围的设置。

Personaly 我的数据库中有一个包含角色的表。虽然可能会添加一些角色，但有一些我从不修改（通常是管理员角色）。这允许我将其值存储为配置中的应用程序参数并稍后检查它：

引导程序.php

```
Configure :: write('administrator.role_id', 1); 
```

测试控制器：

```
if($this->Auth->user('role_id') == Configure :: read('administrator.role_id'))
{
    //do things specific to admin role
} 
```

也就是说，如果用户角色在配置中以一种或另一种方式动态存储，它可能也可以工作，但这可能不是更优雅的解决方案。

# php - 在 PHP 中计算行数

> ID：15661741
> 
> 赞同：1
> 
> 时间：2013-03-27T14:44:07.233
> 
> 标签：php, mysql, sql

我有一个使用 LEFT JOIN 抓取一堆不同表的查询，我想知道是否可以合并另一个表，但只计算其中的值。

**问题**

当我尝试在查询中将 COUNT(row_id) 与其他所有内容一起使用时，它只返回计数而没有其他任何内容。

```
$query = "
    SELECT COUNT(subscriptions.sub_id) AS total_subscriptions, 
           postings.posting_id, 
           postings.posting_headline, 
           postings.posting_body, 
           postings.timestamp, 
           users.user_name 
    FROM postings 
    LEFT JOIN users ON postings.user_id = users.user_id 
    LEFT JOIN subscriptions ON postings.group_id = subscriptions.group_id 
    WHERE postings.group_id='" . $group['group_id'] . "' 
    ORDER BY postings.posting_id DESC
"; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:45:59.070

向查询中添加显式`GROUP BY`子句。

# asp.net - XSLT 1.0 按标签分组

> ID：15661744
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:11.013
> 
> 标签：asp.net, xml, wcf, xslt, xslt-1.0

我有以下 XML 数据：

```
 <result>
<row>
<CountryId>26</CountryId>
<CountryName>United Kingdom</CountryName>
<NoOfNights>1</NoOfNights>
<AccommodationID>6004</AccommodationID>
<RoomID>1</RoomID>
<RoomName>Double for Sole Use</RoomName>
<RatePlanID>1</RatePlanID>
<RoomRatePlan>Advance</RoomRatePlan>
<NoOfSameTypeRoom>0</NoOfSameTypeRoom>
<RoomSize/>
<Max_Person>1</Max_Person>
<RackRate>189</RackRate>
<CurrencySymbol>&pound;</CurrencySymbol>
<NoOfRoomsAvailable>4</NoOfRoomsAvailable>
<Rate>79.00</Rate>
<RatePerDay>27 Mar 2013_79.00</RatePerDay>
</row>
<row>
<CountryId>26</CountryId>
<CountryName>United Kingdom</CountryName>
<NoOfNights>1</NoOfNights>
<AccommodationID>6004</AccommodationID>
<RoomID>1</RoomID>
<RoomName>Double for Sole Use</RoomName>
<RatePlanID>2</RatePlanID>
<RoomRatePlan>Standard</RoomRatePlan>
<NoOfSameTypeRoom>0</NoOfSameTypeRoom>
<RoomSize/>
<Max_Person>1</Max_Person>
<RackRate>189</RackRate>
<CurrencySymbol>&pound;</CurrencySymbol>
<NoOfRoomsAvailable>5</NoOfRoomsAvailable>
<Rate>89.00</Rate>
<RatePerDay>27 Mar 2013_89.00</RatePerDay>
</row>
<row>
<CountryId>26</CountryId>
<CountryName>United Kingdom</CountryName>
<NoOfNights>1</NoOfNights>
<AccommodationID>6004</AccommodationID>
<RoomID>2</RoomID>
<RoomName>Double Room</RoomName>
<RatePlanID>1</RatePlanID>
<RoomRatePlan>Advance</RoomRatePlan>
<NoOfSameTypeRoom>0</NoOfSameTypeRoom>
<RoomSize/>
<Max_Person>2</Max_Person>
<RackRate>199</RackRate>
<CurrencySymbol>&pound;</CurrencySymbol>
<NoOfRoomsAvailable>5</NoOfRoomsAvailable>
<Rate>89.00</Rate>
<RatePerDay>27 Mar 2013_89.00</RatePerDay>
</row>
 </result> 
```

我的上述 xml 的 XSLT 是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0">

  <xsl:output omit-xml-declaration="yes" indent="yes" method="xml" />
  <xsl:strip-space elements="*"/>

  <!-- Default template : ignore unrecognized elements and text -->
  <xsl:template match="*|text()" />

  <!-- Match document root : add hotels element and process each children node of result -->
  <xsl:template match="/">
    <hotels>
      <!-- We assume that the XML documents are always going to follow the structure:
             result as the root node and xml_acc elements as its children -->
      <xsl:for-each select="result/row">
        <result>
          <hotel_rooms>
            <xsl:element name="hotel_id">
              <xsl:value-of select="AccommodationID"/>
            </xsl:element>
            <xsl:apply-templates />
          </hotel_rooms>
          <xsl:element name="Rate">
            <xsl:element name="RoomRatePlan">
              <xsl:value-of select="RoomRatePlan"/>
            </xsl:element>
            <xsl:element name="numeric_price">
              <xsl:value-of select="Rate"/>
            </xsl:element>
          </xsl:element>
        </result>
      </xsl:for-each>
    </hotels>
  </xsl:template>

  <!-- Elements to be copied as they are -->

  <xsl:template match="NoOfNights|RoomName|RoomSize|Max_Person|RackRate|RatePerDay|CurrencySymbol|NoOfRoomsAvailable|RoomDescription|RoomFacilities|PolicyComments|Breakfast|Policy|Message">
    <xsl:copy-of select="." />
  </xsl:template>

  <xsl:template match="Photo_Max60">
    <RoomImages>
      <Photo_Max60>
        <xsl:value-of select="." />
      </Photo_Max60>
      <Photo_Max300>
        <xsl:value-of select="../Photo_Max300" />
      </Photo_Max300>
      <Photo_Max500>
        <xsl:value-of select="../Photo_Max500" />
      </Photo_Max500>
    </RoomImages>
  </xsl:template>
</xsl:stylesheet> 
```

在 XSLT 1.0 中，我想按 Room ID 和 Hotel ID 进行分组。所以在上面的数据中，我想要这样的结果。

```
<hotels>
     <result>
      <hotel_rooms>
        <hotel_id>6004</hotel_id>
        <NoOfNights>1</NoOfNights>
        <RoomID>1</RoomID>
        <RoomName>Double for Sole Use</RoomName>
        <RoomSize/>
        <Max_Person>1</Max_Person>
        <RackRate>189</RackRate>
        <CurrencySymbol>&pound;</CurrencySymbol>
        <NoOfRoomsAvailable>4</NoOfRoomsAvailable>
        <RatePerDay>27 Mar 2013_79.00</RatePerDay>
     </hotel_rooms>
     <Rate>
     <RoomRatePlan>Advance</RoomRatePlan>
     <numeric_price>79.00</numeric_price>
     <RoomRatePlan>Standard</RoomRatePlan>
      <numeric_price>89.00</numeric_price>
     </Rate>
    </result>
    </result>
    <hotels> 
```

我想要一个用于上述 xml 输出的 xslt 文件。请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:28:12.370

孟川法：

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes" />
    <xsl:key name="room-per-hotel" match="result" use="concat(hotel_rooms/hotel_id, '-', hotel_rooms/RoomID)" />
    <xsl:template match="/">
        <hotels>
            <xsl:for-each select="hotels/result[count(. | key('room-per-hotel', concat(hotel_rooms/hotel_id, '-', hotel_rooms/RoomID))[1]) = 1]">
                <xsl:sort select="concat(hotel_rooms/hotel_id, '-', hotel_rooms/RoomID)" />
                <result>
                    <xsl:copy-of select="hotel_rooms"/>
                    <Rate>
                        <xsl:copy-of select="key('room-per-hotel', concat(hotel_rooms/hotel_id, '-', hotel_rooms/RoomID))/Rate/*"/>
                    </Rate>
                </result>
            </xsl:for-each>
        </hotels>
    </xsl:template>
</xsl:stylesheet> 
```

[工作示例](http://xsltransform.net/b4GWV1/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:22:28.927

那么您的输入和您想要的结果都不是格式正确的，标签没有正确关闭并且存在对`&pound;`未声明实体的实体引用，但是如果您想使用 XSLT 1.0 进行分组，请查看以下 XSLT 1.0 示例[Muenchian分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="group" match="result" use="concat(hotel_rooms/hotel_id, '|', hotel_rooms/RoomID)"/>

<xsl:template match="hotels">
  <xsl:copy>
    <xsl:apply-templates select="result[generate-id() = generate-id(key('group', concat(hotel_rooms/hotel_id, '|', hotel_rooms/RoomID))[1])]"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="result">
  <xsl:copy>
    <xsl:copy-of select="hotel_rooms"/>
    <Rate>
      <xsl:copy-of select="key('group', concat(hotel_rooms/hotel_id, '|', hotel_rooms/RoomID))/Rate/*"/>
    </Rate>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

它转变

```
<hotels>
 <result>
  <hotel_rooms>
    <hotel_id>6004</hotel_id>
    <NoOfNights>1</NoOfNights>
    <RoomID>1</RoomID>
    <RoomName>Double for Sole Use</RoomName>
    <RoomSize/>
    <Max_Person>1</Max_Person>
    <RackRate>189</RackRate>
    <CurrencySymbol>pound</CurrencySymbol>
    <NoOfRoomsAvailable>4</NoOfRoomsAvailable>
    <RatePerDay>27 Mar 2013_79.00</RatePerDay>
 </hotel_rooms>
 <Rate>
 <RoomRatePlan>Advance</RoomRatePlan>
 <numeric_price>79.00</numeric_price>
 </Rate>
</result>
<result>
 <hotel_rooms>
  <hotel_id>6004</hotel_id>
  <NoOfNights>1</NoOfNights>
  <RoomID>1</RoomID>
  <RoomName>Double for Sole Use</RoomName>
  <RoomSize/>
  <Max_Person>1</Max_Person>
  <RackRate>189</RackRate>
  <CurrencySymbol>pound</CurrencySymbol>
  <NoOfRoomsAvailable>5</NoOfRoomsAvailable>
  <RatePerDay>27 Mar 2013_89.00</RatePerDay>
 </hotel_rooms>
  <Rate>
  <RoomRatePlan>Standard</RoomRatePlan>
  <numeric_price>89.00</numeric_price>
  </Rate>
</result>
</hotels> 
```

进入

```
<hotels>
  <result>
    <hotel_rooms>
      <hotel_id>6004</hotel_id>
      <NoOfNights>1</NoOfNights>
      <RoomID>1</RoomID>
      <RoomName>Double for Sole Use</RoomName>
      <RoomSize />
      <Max_Person>1</Max_Person>
      <RackRate>189</RackRate>
      <CurrencySymbol>pound</CurrencySymbol>
      <NoOfRoomsAvailable>4</NoOfRoomsAvailable>
      <RatePerDay>27 Mar 2013_79.00</RatePerDay>
    </hotel_rooms>
    <Rate>
      <RoomRatePlan>Advance</RoomRatePlan>
      <numeric_price>79.00</numeric_price>
      <RoomRatePlan>Standard</RoomRatePlan>
      <numeric_price>89.00</numeric_price>
    </Rate>
  </result>
</hotels> 
```

# javascript - Spring MVC - 模型属性参数在 GET 上不刷新

> ID：15661745
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:11.150
> 
> 标签：javascript, jsp, caching, spring-mvc, modelattribute

我有一个 SpringController 获取一个名为“start”的 RequestParameter 用于搜索/休眠分页目的。如果参数为空，只需从零开始并使用 JavaScript var 'start = {start + 10}' 渲染一个 JSP，因此如果用户单击“下一个 10”按钮，控制器会得到一个 'start = 10' . 然后，控制器应该渲染一个带有'start = {start + 10} = 20的JSP，但无论我通过控制器多少次，它仍然是10。我在服务器端和客户端都做了添加。同样的事情发生：什么都没有。这是控制器方法：

```
@RequestMapping(value = "/customers", method = RequestMethod.GET)
public String customersView(@RequestParam(value = "start", required = false) Integer start, ModelMap model) {
    if (start == null || start <= 0) start = 0;

    List<Customer> customers = customerService.findAllCustomers(start, pagesize);      
    CustomersForm customersForm = new CustomersForm();
    customersForm.setCustomers(customers);
    start += 10; // I can see a "20" here, actually.
    model.clear();
    model.addAttribute("customersform", customersForm);
    model.addAttribute("start", start); //This should render a "20" on client side on the first call, but it doesn't.
    return "customers";
} 
```

这是 JSP 的相关部分：

```
<script type="text/javascript">
jq(document).ready(function() {
    jq("#next_20").click(function() {
        var st = "${start}";  //This gets set OK only first time, i.e., a "10" is rendered.
        jq.get("customers",
        {
            start: st
        });
    });
}); 
```

好的，现在我也将这些行添加到我的 servlet-context 中，因为我怀疑它与某些缓存部分（浏览器、Tomcat）正在做的事情有关......：

```
<!-- Disable web cache for GET requests -->
<mvc:interceptors>
    <bean id="webContentInterceptor"
        class="org.springframework.web.servlet.mvc.WebContentInterceptor">
        <property name="cacheSeconds" value="0" />
        <property name="useExpiresHeader" value="true" />
        <property name="useCacheControlHeader" value="true" />
        <property name="useCacheControlNoStore" value="true" />
    </bean>
</mvc:interceptors> 
```

就是这样。当我点击“next_20”按钮时，我的控制器被调用，一个“start”参数被传递（10）并且应该在模型中被替换为“20”，但渲染的页面仍然有一个“10”。

我究竟做错了什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:15:42.627

您对 jq.get 的调用是一个 ajax 调用，它不会刷新页面，因此`${start}`不会再次评估 jstl 表达式。您可以存储`st`在 ajax 调用之外，`start`从 ajax 调用而不是“客户”返回，并`st`在调用返回时更新：

```
var st = "${start}";  //This gets set OK only first time, i.e., a "10" is rendered.

jq("#next_20").click(function() {

    jq.get("customers",
        {
            start: st
        },
        function(newStartValue) {
            st = newStartValue;
        }
    );
}); 
```

# divide-and-conquer - 分而治之算法的更好替代方案

> ID：15661752
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:30.120
> 
> 标签：divide-and-conquer

首先让我解释一下我要解决的问题。我正在将我的代码与 3rd 方库集成，该库可以进行相当复杂的财务预测。就这个问题而言，假设我有一个黑盒，当我传入 x 时它会返回 y。现在，我需要做的是为给定的输出 (y) 找到输入 (x)。因为我知道最低和最高可能的输入值，所以我编写了以下算法：

1.  定义起始输入范围（最小输入值到最大输入值）
2.  将范围分成两个相等的部分并找到中间值的输出
3.  找出哪一半输出落入
4.  重复步骤 2 和 3，直到范围太小而无法进一步划分

这个算法很好地完成了这项工作，我认为它没有任何问题。但是，有没有更快的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:00:07.197

这听起来像`x`并且`y`是高度相关的（即随着`x`增加，所以也会增加`y`），否则您的分而治之算法将无法工作。

假设*是*这种情况，并且您可以计算出一个相关因子，那么您可以将中点乘以相关因子，以更快地磨练预期值。

请注意，我根本没有测试过这个想法，但这是值得考虑的事情。可能的改进是将correlationFactor 设为移动平均线，或者根据例如xLow 和xHigh 之间的十分位数预先计算它。

此外，这假设呼叫`f(x)`相对便宜。如果它很昂贵，那么增加的调用次数`f(x)`将使任何节省都相形见绌。事实上 - 我开始认为这是一个愚蠢的想法......

希望下面的伪代码能说明我的意思：

```
DivideAndConquer(xLow, xHigh, correlationFactor, expectedValue)
    xMid = (xHigh - xLow) * correlationFactor
    // Add some range checks to make sure that xMid is within xLow and xHigh!!
    y = f(xMid)
    if (y == expectedValue)
        return expectedValue
    elseif (y < expectedValue) 
        correlationFactor = (xMid - xLow) / (f(xMid) - f(xLow))
        return DivideAndConquer(xLow, xMid, correlationFactor, expectedValue)
    else
        correlationFactor = (xHigh - xMid) / (f(xHigh) - f(xMid))
        return DivideAndConquer(xMid, xHigh, correlationFactor, expectedValue) 
```

# c# - ServiceInstaller 和“服务已存在”1001 错误

> ID：15661755
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:40.433
> 
> 标签：c#, windows-services

我有一个带有项目和服务安装程序的应用程序。除了在某些情况下通过 PSEXEC 远程安装时，安装通常工作正常。

我想知道，我可以在代码中的哪个位置拦截并检查是否已经安装了特定服务，或者根据最佳选项将其卸载或跳过当前的服务安装（但仍继续进行整体安装）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:48:23.530

您可以在每次安装前尝试无条件卸载它。

# jquery - 如何在 jQuery 中使用哈希 #popup 打开内容框

> ID：15661758
> 
> 赞同：0
> 
> 时间：2013-03-27T14:44:49.500
> 
> 标签：jquery

这是基本的 HTML 标记。

```
<a id="open" href="#popup">click</a>
<div id="popup">content</div> 
```

我已经`<div id="popup">`默认隐藏了，点击`<a id="open">`打开`<div id="popup">`。

如果用户输入带有井号标签的 URL，我可以让它默认打开`#popup`吗`example.com/#popup`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:54:56.893

`display: none;`在你的 CSS 中使用 a ：

```
#popup {
    display: none;
} 
```

然后在您的 JS 中使用其中任何一种：

```
$("#open").on('click', function(e) {
    e.preventDefault();
    $("#popup").toggle(); //When clicked, toggle visibility.
});

$(window).on('hashchange', function() {
    //You can detect a hash change like this
    //Since your href is set to #popup,
    //you can put the .toggle() in here as the hash will change when clicked.
    console.log("yolo");
});

if(window.location.hash == "#popup") {
    //If it is initialized with the hash #popup (ie. example.com#popup and Enter)
    //Use this
    console.log("yolo2");
    $("#popup").show();
} 
```

大提琴[_](http://jsfiddle.net/jpFku/6/)

# postgresql - 这个 postgres 错误的含义是什么：“当函数不返回集合时，ROWS 不适用”

> ID：15661766
> 
> 赞同：5
> 
> 时间：2013-03-27T14:44:59.080
> 
> 标签：postgresql

我是 postgres 的新手，遇到了一个在 Stackoverflow (?) 上似乎找不到的错误。我正在尝试编写一个函数，当一个人有资格获得工作时返回 true，否则返回 false。这会引发“错误：当函数不返回集合时，ROWS 不适用。” [在西班牙语中找到了一些东西——](http://www.forosdelweb.com/f99/error-definir-funcion-946980/)但在 SO 上什么也没有。有人可以解释一下吗？

```
CREATE OR REPLACE FUNCTION "isPersonQualifiedForJob"(pid integer, jid integer)
  RETURNS bit AS
'
        IF 
        (SELECT count(*) FROM "getSkillsForJob"("jid") "j" WHERE 
        NOT EXISTS ( 
                    SELECT 1 FROM "getSkillsForPerson"("pid") "p" WHERE "j"."SkillID"="p"."SkillID" 
                   )
        )> 0 
        THEN 
           return 0;
        ELSE
           return 1;
        END IF;
'
  LANGUAGE sql VOLATILE
  COST 100
  ROWS 1000;
ALTER FUNCTION "isPersonQualifiedForJob"(integer)
  OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:03:21.343

在这一行：

```
ROWS 1000; 
```

您告诉计划者您希望从函数返回大约 1,000 行，但它被声明为只返回一个值，有点：

```
RETURNS bit AS 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T15:03:21.717

信息很清楚，[文档](http://www.postgresql.org/docs/9.1/static/sql-createfunction.html)：

> ROWS 结果行
> 
> 一个正数，给出规划器应该期望函数返回的估计行数。仅当函数被声明为返回一个集合时才允许这样做。默认假设为 1000 行。

您的函数不是返回一组行，而是一个布尔值，因此我不知道您为什么要添加该行`ROWS 1000`（从其他函数复制粘贴？）。只需将其删除，您应该会没事的。

# java - 如何在 OpenCV 中缩放 Mat

> ID：15661767
> 
> 赞同：5
> 
> 时间：2013-03-27T14:45:00.440
> 
> 标签：java, opencv

我很沮丧试图找到一种方法，可以让我将 Mat 对象缩放到不同的大小。请问，有人可以帮我解决这个问题吗？

我的项目正在使用 Java 包装器，但如果提供的答案是针对 C++ 原生 OpenCV 库的，我会很高兴。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:57:43.463

如果通过调整大小是指缩放图像，请使用[resize()](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#resize)函数，如下所示：

```
resize(src, dst, dst.size(), 0, 0, interpolation); 
```

否则，如果您只需要更改 Mat 的行数，请使用[Mat::reshape()](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-reshape)函数。请注意，重塑会返回一个新的 Mat 标头：

```
cv::Mat dst = src.reshape ( 0, newRowVal ); 
```

最后，如果您想任意重塑 Mat（更改行和列），您可能需要定义一个具有目标尺寸的新 Mat 并将 src Mat 复制到它：

```
Mat dst(newRowVal, newColVal, src.type());
src.setTo(0);
src.copyTo(dst(Rect(Point(0, 0), src.size()))); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T16:14:04.767

你可以使用 `resize()`函数

创建新尺寸的新 Mat 结果

```
resize(input             // input image 
       result            // result image
       result.size()     // new dimensions
       0, 
       0, 
       INTER_CUBIC       // interpolation method
      ); 
```

要了解更多插值方法，您可以查看此文档：[geometry_transformations.html#resize](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#resize)

# c - 使用 fscanf 将固定长度的整数扫描到数组中

> ID：15661778
> 
> 赞同：0
> 
> 时间：2013-03-27T14:45:22.750
> 
> 标签：c, scanf

我如何使用`fscanf`（或处理`stdin`文本文件中的 s 的任何其他函数）扫描具有相同长度的特定整数组，并将它们放在同一个数组中，但同时忽略较短的整数超出要求

这是 txt 文件的外观：

```
63001234 1 1 -1 - - 0 1 1 1 - - 0
63001230 1 1 1 1 1 1 1 1 1 1 1 1
63001432 -1 -1 - - - - - - - - - -
63000176 - - 1 0 0 1 0 0 1 1 1 1 
```

我需要将 63... 数字存储在一个 int 数组中，并将 '1'、'-1'、'0' 和 '-' 存储在另一个 char 数组中。

这是我的扫描和测试功能合二为一

```
int main() {

    printf("insert the name of the txt file you want to scan from: ");
    char fileopen [100];
    scanf("%s", fileopen);

    int Students [250];
    char Grades [250] [12];

    FILE *fop = fopen(fileopen ,"r");
    if(fop == NULL){
        printf("Error");
        EXIT_FAILURE;
    }
    int counter = 0;

    //read file
    while(1){
        if(fscanf(fop,"%d",&Students[counter]) == EOF){
            break;
        }
        for(int j = 0; j < 12; j++){
            fscanf(fop," %c",&Grades[counter][j]);
        }
        fscanf(fop,"\n");
        counter++;

    }

    counter = 0;
    //test what has been written in the arrays 
    while(counter <= strlen(Students)){

       printf("%d", Students[counter]);
       for(int j = 0; j < 12; j++){
            printf(" %c", Grades[counter][j]);
        }
        counter++;
        printf("\n");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:00:44.170

您可以直接读取整数和字符，而不是使用数字检查：

```
// You can use dynamic memory allocation here instead, or an appropriate max size.
// I used 100 because this is a template.
int numbers[100];
int chars[100][12];

char* line = (char*)malloc(100);

int i = 0;
while (true)
{
    /* Read line into buffer */
    if ((fgets(line, 100, file) == NULL) || ferror(file) || feof(file))
    {
        break;
    }

    /* Skip empty lines */
    if (strcmp(line, "\n") != 0)
    {
        continue;
    }

    /* Scan the integer */
    if (i == 0) {
        sscanf(line, "%d", &numbers[0]);
    } else {
        sscanf(line, "\n%d", &numbers[i]);
    }

    /* Scan the 12 characters */
    for (unsigned int j = 0; j < 12; ++j)
    {
        sscanf(line, " %c", &chars[i][j]);
    }

    i++;
} 
```

# javascript - 使用 onkeyup 调用 javascript 函数

> ID：15661781
> 
> 赞同：1
> 
> 时间：2013-03-27T14:45:28.317
> 
> 标签：javascript, html, function, onkeyup

我创建了一个启用/禁用提交按钮的函数，我希望它在用户在文本字段中键入内容时运行。

**这是我的代码：**

```
<form name="sidebarPostMessageForm" action="../app/NewMessageAsynch.action">
    <input type="hidden" name="conversationId" value="${conversationId}"/>
    <lalahtml:textarea id="messageText" name="messageText" onkeyup="enableDisablePostButton();" ></lalahtml:textarea>
    <input type="button" name="postMessage" id="postMessage" onclick="if(this.form.messageText.value.trim().length>0){sidebar_postMessage();this.disabled='disabled'}" value="<ezmi18n:message key="doSendMessage.Label" />"/>
</form>
<script type="text/javascript">
function enableDisablePostButton(){
    if (document.getElementById("messageText").value.trim() == "") {
        document.getElementById("postMessage").disabled="disabled";
    } else {
        document.getElementById("postMessage").disabled="";
    }
}
</script> 
```

当我测试它时，我收到以下 javascript 错误：

**错误：**

ReferenceError: enableDisablePostButton 未定义 enableDisablePostButton();

![用萤火虫调试](../Images/574a9bd943e2621858a1371df0d854a9.png)

就像函数 enableDisablePostButton() 不存在一样......有谁知道为什么以及我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:04:39.903

我认为将脚本标签放在表单标签上方应该可以解决问题。enableDisablePostButton 函数定义在 form 标记之后，因此无法找到该函数。

```
<script type="text/javascript">
function enableDisablePostButton(){
    if (document.getElementById("messageText").value.trim() == "") {
        document.getElementById("postMessage").disabled="disabled";
    } else {
        document.getElementById("postMessage").disabled="";
    }
}
</script>
<form name="sidebarPostMessageForm" action="../app/NewMessageAsynch.action">
    <input type="hidden" name="conversationId" value="${conversationId}"/>
    <lalahtml:textarea id="messageText" name="messageText"     onkeyup="enableDisablePostButton();" ></lalahtml:textarea>
    <input type="button" name="postMessage" id="postMessage" onclick="if(this.form.messageText.value.trim().length>0){sidebar_postMessage();this.disabled='disabled'}" value="<ezmi18n:message key="doSendMessage.Label" />"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:47:22.680

我发现了问题，伙计们！事实上，javascript 块没有被加载，因为它是异步获取的（ajax）。我现在发现了这一点，并直接在 onkeyup 属性中设置了 javascript 代码：

```
onkeyup="this.form.messageText.value.trim() == ''? this.form.postMessage.disabled='disabled': this.form.postMessage.disabled='';" 
```

感谢所有的帮助！

# android - 如何卸载具有root权限的Android App？

> ID：15661782
> 
> 赞同：1
> 
> 时间：2013-03-27T14:45:28.500
> 
> 标签：android, apk, root, uninstallation

我写了一些东西来卸载（删除）一个应用程序，现在有一个问题，apk 似乎已被删除，但应用程序并没有真正从手机中删除..

据称已删除的应用程序仍存在于启动器应用程序抽屉中。我可以打开应用程序，但它会强制关闭应用程序。

我使用自己的应用程序（存在于 /data/app，而不是 /system/app）测试了该过程。使用 systemapps 我没有测试。

这里的代码：

```
private void delApp() {
    String deleteCMD = "rm " + packageInfo.applicationInfo.sourceDir;

    Process process;
    try 
    {
        process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        os.writeBytes("mount -o remount,rw -t rfs /dev/stl5 /system; \n");          
        os.writeBytes(deleteCMD+"; \n");
        os.writeBytes("mount -o remount,ro -t rfs /dev/stl5 /system; \n");
        os.flush();

    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    }      

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:00:00.913

我不知道为什么你正在做的事情不起作用，也许其他人可以对此有所了解。

你可以试试：

```
pm uninstall com.package.name 
```

而不是你的`rm /package/dir/path`方法

但是，我不确定这是否适用于`/system/app directory`.

另外，请查看：[卸载 android 应用程序时，应用程序启动器图标不会从主屏幕中删除](https://stackoverflow.com/questions/3339390/application-launcher-icon-is-not-deleted-from-home-screen-when-uninstalling-andr)

# ruby - 如何在Ruby中覆盖require？

> ID：15661788
> 
> 赞同：4
> 
> 时间：2013-03-27T14:45:41.173
> 
> 标签：ruby

我需要`require`从 Ruby 文件中覆盖，这是我的 start.rb 所必需的，它是应用程序入口点。`rubygems`在此之前加载，在 start.rb 中。

我尝试的一切都给了我一个堆栈溢出错误。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:06:43.710

一般来说，如果要修补一些内置方法，首先应该为原始方法创建一个别名。大多数时候，您会在覆盖方法中的某个地方调用旧的。否则，您将失去原始方法的功能，并且可能会破坏应用程序逻辑。

1.  使用`ri require`或阅读文档以找出该`require`方法的定义位置。你会发现它在`Kernel`模块中。此外，您会找到它的方法签名，以便了解参数列表的样子。
2.  猴子补丁模块`Kernel`。除非您知道自己在做什么，否则**不要破坏功能。**

```
module Kernel
  # make an alias of the original require
  alias_method :original_require, :require

  # rewrite require
  def require name
    puts name
    original_require name
  end
end

# test the new require
require 'date' 
```

# autohotkey - 如何在不定义热键的情况下使脚本自动运行？

> ID：15661792
> 
> 赞同：2
> 
> 时间：2013-03-27T14:45:51.287
> 
> 标签：autohotkey

我想创建一个“PolyEdit”脚本。下面是脚本。

```
!M::
IfWinActive, ahk_class TMainForm
{
sleep 2000
Send Now is the time
Return
} 
```

该脚本的目的是：

将击键和鼠标点击发送到我的默认程序以打开文本文件。该默认程序称为“PolyEdit”。

但是我需要在没有定义热键的情况下运行脚本。

现在，以现在的形式，定义了一个热键，它运行得很好。

我的问题是：

如何在不定义热键的情况下使脚本自动运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:54:11.917

正如 Armin 已经写的那样，使用#Persistent。此外，如果您想创建仅在特定应用程序处于焦点时才处于活动状态的热键，您可以执行以下操作：在这种情况下，脚本将不再在启动时执行，只有当您按下热键时...

```
#Persistent
#SingleInstance
#IfWinActive, ahk_class TMainForm
!M::
    sleep 2000
    Send Now is the time
Return
!n::SoundBeep, 500, 500
!o::MsgBox, OK
#IfWinActive 
```

这样，所有 3 个（虚拟）热键只有在您的应用程序处于焦点时才会处于活动状态！您可以为另一个应用程序定义相同的热键，只需重复代码，但如果该`#IfWinActive, ahk_class TMainForm`行中的另一个应用程序使用 ID。

如果您想在应用程序处于活动状态时每 2 秒发送一条消息，请执行以下操作：

```
#Persistent
#SingleInstance
SetTimerMatchMode, CheckApp, 2000
Return

CheckApp:
IfWinActive, ahk_class TMainForm
{
    Send, Now is the time
}
Return 
```

如果您想在每次（重新）激活（聚焦）应用程序时执行一个脚本（所以不是每两秒一次），请使用以下命令：

```
#Persistent
#installKeybdHook
#SingleInstance

Gui +LastFound 
hWnd := WinExist()
DllCall( "RegisterShellHookWindow", UInt,Hwnd )
MsgNum := DllCall( "RegisterWindowMessage", Str,"SHELLHOOK" )
OnMessage( MsgNum, "ShellMessage" )
Return

ShellMessage( wParam )
{
    If (wParam = 4)
    {
        IfWinActive ahk_class TMainForm
        {
            Send, Now is the time
        }
    }
}
Return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:56:20.763

看看[#Persistent](http://www.autohotkey.com/docs/commands/_Persistent.htm)它将保持脚本运行。

*如果此指令存在于脚本中的任何位置，则该脚本将在自动执行部分（脚本的顶部）完成后继续运行*

# rotation - 在 XY 轴上旋转对象，cocos3D

> ID：15661793
> 
> 赞同：0
> 
> 时间：2013-03-27T14:45:56.627
> 
> 标签：rotation, gesture, pan, cocos3d

我在 iOs 上使用 Cocos3D。我需要使用平移手势旋转对象。

```
switch (gesture.state)
{
    case UIGestureRecognizerStateBegan:
        saveState = Dobj.rotation;
    break;
    case UIGestureRecognizerStateChanged:
        CC3Vector rotateVector = CC3VectorMake(gesture.translation.y, gesture.translation.x, 0.0f);
        Dobj.rotation = CC3VectorAdd(saveState, rotateVector);
    break;
    case UIGestureRecognizerStateEnded:
    break;
    default:
    break;
} 
```

这样我可以让我的 object( `Dobj`) 自行旋转。但似乎轴也在旋转，这导致了一些非常奇怪的旋转。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:17:59.410

所以这就是我解决问题的方法。

```
switch (gesture.state)
{
    case UIGestureRecognizerStateBegan:
        saveState = CC3VectorMake(0.0f, 0.0f, 0.0f);
    break;
    case UIGestureRecognizerStateChanged:
         CC3Vector rotateVector = CC3VectorMake(gesture.translation.y, gesture.translation.x, 0.0f);
        [Dobj rotateBy:CC3VectorDifference(rotateVector, saveState)];
        saveState = rotateVector;
    break;
    case UIGestureRecognizerStateEnded:
    break;
    default:
    break;
} 
```

使用该方法`rotateBy:`似乎只旋转对象而不改变其轴

# oracle - 用行转置列

> ID：15661794
> 
> 赞同：0
> 
> 时间：2013-03-27T14:45:57.363
> 
> 标签：oracle, oracle11g, unpivot

我有一个很长的查询，会产生一些值。标识符名称太长。而且我更喜欢将结果集放在名为“列名”和“列值”的 2 列中。

我想要的以下查询的 IE：

```
column name               column value
forn_old_codice_fornitura ***
VOF_VOCE_FATTURABILE_COD  ***
IEF_ASSOGGETTAMENTO_COD   *** 
```

*** 是实际值。

我能怎么做？

```
SELECT 
      forn.forn_old_codice_fornitura, 
```

'列描述 1'、VOF.VOF_VOCE_FATTURABILE_COD、'列描述 2'、IEF_ASSOGGETTAMENTO_COD "Cod Assog Neta"、'列描述 3' [...]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:51:39.530

由于您使用的是 Oracle 11g，因此您可以使用该[`UNPIVOT`](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)功能。这将获取您的列并将它们转换为行：

```
select col_name , col_value
from
(
  SELECT 
        forn.forn_old_codice_fornitura,
         VOF.VOF_VOCE_FATTURABILE_COD,
         IEF_ASSOGGETTAMENTO_COD,
         ETA.ETA_CODICE_ASSOG,
         CLU.CLU_CLASSE_FORNITURA_COD,
         MVI.CLU_CLASSE_FORNITURA_COD,
         ETA.ETA_USO_CLASSE_FORN,
         MVI.MVI_FLG_SOGGETTO,
         ETA.ETA_FLG_SOGGETTO,
  [...]
) 
unpivot
(
  col_value
  for col_name in (forn_old_codice_fornitura, VOF_VOCE_FATTURABILE_COD,
                   IEF_ASSOGGETTAMENTO_COD, ETA_CODICE_ASSOG, ...)
) 
```

编辑，根据您想要使用列的长名称生成列描述的评论，有两种方法可以做到这一点。

一，您可以使用一个`CASE`表达式，将 替换为`col_name`您想要的列描述，类似于：

```
select col_name, 
  col_value,
  case col_name
    when 'col1' then 'Test Col 1'
    when 'col2' then 'Test Col 2'
    when 'col3' then 'Test Col 3'
    when 'col4' then 'Test Col 4'
  end col_desc
from yourtable
unpivot
(
  col_value
  for col_name in (col1, col2, col3, col4)
) unp; 
```

或者，您可以创建一个包含从`col_name`到列描述的转换的表，并将该表连接到 unpivot 结果：

```
select d.col_name,
  d.col_value,
  cd.col_desc
from
(
  select col_name, 
    col_value
  from yourtable
  unpivot
  (
    col_value
    for col_name in (col1, col2, col3, col4)
  ) unp
) d
inner join cd
  on d.col_name = cd.col_name 
```

参见SQL Fiddle [with Demo](http://sqlfiddle.com/#!3/03b24/1)

# javascript - 如何使用画布处理多个按键

> ID：15661796
> 
> 赞同：3
> 
> 时间：2013-03-27T14:45:57.833
> 
> 标签：javascript, canvas

使用类似的东西：

```
window.addEventListener("keydown", handleFn, true); 
```

我如何能够同时处理多个按键以供多人使用？多人将使用一个键盘，因此就像同时按下 Q 和 P 键来移动屏幕上的不同对象一样。

我还没有任何`keyup`句柄，想知道这是否能解决这个问题。

到目前为止我的逻辑是这样的：

```
if keydown == Q
    paddle.left = true;

...

//game loop
if paddle.left == true
    paddle.x -= 1;
    paddle.left = false; 
```

玩家也可以按住按钮。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T16:32:06.227

这就是我通常的做法。首先，您需要一个数组来保存键状态。

```
var keys=[]; 
```

然后设置你的事件监听器。

```
// key events
document.body.addEventListener("keydown", function (e) {
    keys[e.keyCode] = true;
});
document.body.addEventListener("keyup", function (e) {
    keys[e.keyCode] = false;
}); 
```

下面所做的是将数组中的一个项目设置为真或假，对应于该键代码。

然后你只需要使用一些条件来查看按下了什么以及你应该做什么。

```
 // check the keys and do the movement.
    if (keys[38]) {
        if (velY > -speed) {
            velY--;
        }
    }

    if (keys[40]) {
        if (velY < speed) {
            velY++;
        }
    }
    if (keys[39]) {
        if (velX < speed) {
            velX++;
        }
    }
    if (keys[37]) {
        if (velX > -speed) {
            velX--;
        }
    } 
```

下面是一个演示，您可以在其中移动并弄乱多个按键。使用 wasd 和箭头键。

**[现场演示](http://jsfiddle.net/loktar/QUzD9/)**

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d");

canvas.width = canvas.height = 300;

var player1 = {
    x: 50,
    y: 150,
    velY: 0,
    velX: 0,
    color: "blue"
},
player2 = {
    x: 250,
    y: 150,
    velY: 0,
    velX: 0,
    color: "red"
};

var x = 150,
    y = 150,
    velY = 0,
    velX = 0,
    speed = 2,
    friction = 0.98,
    keys = [];

function update() {

    if (keys[38]) {
        if (player1.velY > -speed) {
            player1.velY--;
        }
    }

    if (keys[40]) {
        if (player1.velY < speed) {
            player1.velY++;
        }
    }
    if (keys[39]) {
        if (player1.velX < speed) {
            player1.velX++;
        }
    }
    if (keys[37]) {
        if (player1.velX > -speed) {
            player1.velX--;
        }
    }

    if (keys[87]) {
        if (player2.velY > -speed) {
            player2.velY--;
        }
    }

    if (keys[83]) {
        if (player2.velY < speed) {
            player2.velY++;
        }
    }
    if (keys[68]) {
        if (player2.velX < speed) {
            player2.velX++;
        }
    }
    if (keys[65]) {
        if (player2.velX > -speed) {
            player2.velX--;
        }
    }
    ctx.clearRect(0, 0, 300, 300);
    updatePlayer(player1);
    updatePlayer(player2);
    setTimeout(update, 10);
}

function updatePlayer(player) {
    player.velY *= friction;
    player.y += player.velY;
    player.velX *= friction;
    player.x += player.velX;

    if (player.x >= 295) {
        player.x = 295;
    } else if (player.x <= 5) {
        player.x = 5;
    }

    if (player.y > 295) {
        player.y = 295;
    } else if (player.y <= 5) {
        player.y = 5;
    }

    ctx.fillStyle = player.color;
    ctx.beginPath();
    ctx.arc(player.x, player.y, 5, 0, Math.PI * 2);
    ctx.fill();
}

update();

document.body.addEventListener("keydown", function (e) {
    keys[e.keyCode] = true;
});
document.body.addEventListener("keyup", function (e) {
    keys[e.keyCode] = false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T17:17:37.313

你可以试试这样的模式：

```
(function game(){
    // canvas setup ...

    // set up a "hash" of keycodes associated with whether or not they  
    // are pressed, and what should happen when they are pressed.
    var keys = {
        37:{down:false, action:function(){player1.velX--;}},
        38:{down:false, action:function(){player1.velY--;}},
        39:{down:false, action:function(){player1.velX++;}},
        40:{down:false, action:function(){player1.velY++;}},

        65:{down:false, action:function(){player2.velX--;}},
        68:{down:false, action:function(){player2.velX++;}},
        83:{down:false, action:function(){player2.velY++;}},
        87:{down:false, action:function(){player2.velY--;}},
    };

    document.body.addEventListener("keydown", function (e) {
        if(keys[e.keyCode]) keys[e.keyCode].down = true;
    });
    document.body.addEventListener("keyup", function (e) {
        if(keys[e.keyCode]) keys[e.keyCode].down = false;
    });

    (function update() {
        ctx.clearRect(...);

        for(var key in keys)
            if(keys[key].down)
                keys[key].action();

        // redraw players. 

        requestAnimationFrame(update);
    })();
})(); 
```

这个设置的好处是它直接将动作与按键相关联，允许您轻松添加更多按键动作，并提供很大的灵活性，可以在运行时轻松添加/删除按键，甚至在任何给定时间更改特定键的作用。

# angularjs - 指令范围属性根据属性名称中断

> ID：15661801
> 
> 赞同：4
> 
> 时间：2013-03-27T14:46:11.193
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我有一个非常奇怪的现象，即指令和隔离范围，范围内的属性工作或不工作取决于属性的命名。如果我使用

```
{check:'@check'} 
```

它工作得很好，正如预期的那样。但是，如果我使用：

```
{checkN:'@checkN'} 
```

定义的函数永远不会被分配。一个示例如下所示：

**HTML：**

```
<item ng-repeat="list_item in model.list" model="list_item" checkN="checkName()" check="checkName()" position="$index"></item>' 
```

**Javascript**

```
app.directive('item', function(){
   return {
      restrict: 'E',
      replace : false,   
      scope:{
              $index: '=position',
              check: '&check',
              checkN: '&checkN',
              model:'='
      },          
      template: '',
      link: function(scope, element, attrs){
        console.log(scope.check())
        console.log(scope.checkN())          
      }
    }
}); 
```

然后控制台会给我以下信息：

```
The checkName function has been called [which is the return string of the function]
undefined 
```

真的有可能取决于大写字母的使用吗？这将是非常“意外”的行为。

谢谢你的帮助

沙基

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T14:57:50.927

Html 不区分大小写，因此根据浏览器的不同，它们彼此之间无法区分`myAttribute`。`myattribute`Angularjs 的作者在指令方面做出了关于从 html 传递到 javascript 的设计决策，反之亦然。

`ngRepeat`指令将`ng-repeat`在视图（html）中使用。同样，您的指令`checkN`应该`check-n`用于 Angular 以将其识别为指令。

# delphi - Delphi TImageList PNG alpha 渲染太暗

> ID：15661802
> 
> 赞同：1
> 
> 时间：2013-03-27T14:46:14.877
> 
> 标签：delphi, png, alpha, timagelist

我的 Delphi XE3 应用程序工具栏有 PNG 图标，当`TActionToolbar`通过 a添加到 a 时`TImageList`，alpha 通道呈现比应有的颜色更暗，导致图标看起来很糟糕。我认为这个问题与.`TImageList`而不是与`TActionToolbar`.

Photoshop样机：

![Photoshop样机](../Images/de2173bcd78b229cf9b6938e56e409d8.png)

导入后的实际外观`TActionToolbar`（文件夹填充的 alpha 为深蓝色）：

![实际的](../Images/e3e24e12a9dfa54035818bd418197333.png)

这是我的 Delphi Object Inspector 设置`TImageList`（不，问题不是`BlendColor`属性）：

![TImageList 对象检查器](../Images/cea04c55bf9b71f84cafb113b2928bad.png)

有没有办法让 Delphi/Windows/罪魁祸首正确渲染 alpha 通道？一种选择是将图标全部设为位图，但我宁愿不经历用透明颜色编辑位图的麻烦，因为，好吧，我宁愿不回到恐龙时代...... TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:49:03.493

我发现处理此问题的最佳方法是在保存 PNG 图像之前，在 Photoshop 中包含透明度的每个像素下方绘制 Delphi 工具栏（或任何 UI 元素）的背景颜色。这样，工具栏图标除了 100% 透明像素外完全不透明，因此不会发生 alpha 混合 - 因此不会产生丑陋。

在此处使用[RRUZ 的代码](https://stackoverflow.com/questions/6003018/make-disabled-menu-and-toolbar-images-look-better)使禁用的工具栏图标看起来更好。

# eclipse - How to set path to `gfortran` in Eclipse?

> ID：15661805
> 
> 赞同：0
> 
> 时间：2013-03-27T14:46:20.340
> 
> 标签：eclipse, fortran, gfortran

A colleague got a new mac, and he codes with Eclipse and gfortran. And Makefiles. But now he cannot build.

I figured that Eclipse does not use the same PATH as shell, so while Eclipse is happy to build with a makefile, it cannot find `gfortran`. (The Makefile works fine when ran form the mac terminal.)

Eclipse *can* build, if I put the full path in the Makefile (`FC=/usr/local/bin/gfortran`). But this is extra nuisance when other people use Ubuntu where `gfortran` has a different path.

**Question:** How/where to configure Eclipse (Juno) so that it can find `gfortran`? (I could not find, I tried.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:10:18.757

为什么不直接使用 Photran。它基于 Eclipse 并为 Fortran 设置。

# javascript - How to rename/keep the callback methods

> ID：15661808
> 
> 赞同：1
> 
> 时间：2013-03-27T14:46:25.820
> 
> 标签：javascript, google-closure-compiler, google-closure

I have a function that checks that the callback methods within an object exist. Currently the Closure Compiler renames the methods (onClickDisplay and onCloseHide) so all the checks in makeCallbacks() fail.

Is there a way to tell the Closure Compiler to not rename the methods (onClickDisplay and onCloseHide) or tell the Compiler to also rename the method names in callbackNames()

```
makeCallbacks = function(tobject, methodNames) {
 var callbacks = {};

 methodNames.each(function(methodName) {
    if (!tobject[methodName]) {
     throw new Error(methodName + ' missing from ' + tobject.toString());
    }
    callbacks[methodName] = tobject[methodName].bind(tobject);
 });

 return callbacks;
};

FeedbackController = Class.create({
  initialize: function(id, item) {
   this.callbacks = makeCallbacks(this, this.callbackNames());
  },

  observeElements: function() {
   $$(this.id + ' .closeme').invoke('observe', 'click', this.callbacks.onCloseHide);
  },

  callbackNames: function() {
   return ['onClickDisplay', 'onCloseHide'];
  },

  onClickDisplay: function(e) {
   // do something
  },

  onCloseHide: function(e) {
   // do something
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:23:36.640

您可以通过以下方式明确告诉闭包编译器不要重命名变量：

```
goog.exportProperty(FeedbackController, 'onClickDisplay', FeedbackController.onClickDisplay); 
```

或者通过在您的方法中包含自定义 externs 文件：

```
function onClickDisplay() {};
function onCloseHide() {}; 
```

并将其提供给闭包编译器：

```
"--externs=/externs/externs.js" 
```

这将阻止它重命名变量。通常，您只会将其用于与外部库进行交互。

来源：[关闭权威指南](http://my.safaribooksonline.com/book/programming/javascript/9781449381882/exports/id3302838)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:17:56.140

您使用的编码风格违反了具有 ADVANCED_OPTIMIZATIONS 的 Closure-compiler 的核心要求之一：一致的属性访问。即，您不能使用点分符号`obj.prop`和带引号的组合来引用相同的属性`obj['prop']`。您可以引用传递给您的`Class.create`调用的属性名称，但这将使死代码删除和类型检查无效。如果您不想要其中任何一种行为，那么您真的应该使用 SIMPLE_OPTIMIZATIONS。

您的代码还隐藏了您已定义属性的事实，`FeedbackController`因为 Closure-compiler 无法识别`Class.create`正在分配属性。

除非你愿意改变你的编码风格，否则我会推荐使用 SIMPLE_OPTIMIZATIONS。

请参阅我的[哪个编译级别适合我？](http://closuretools.blogspot.com/2012/09/which-compilation-level-is-right-for-me.html)发布有关优化级别之间决定因素的更多信息。

# javascript - create the Span element dynamically

> ID：15661809
> 
> 赞同：0
> 
> 时间：2013-03-27T14:46:29.570
> 
> 标签：javascript, web

Hello I am looking for some working code to create span elements.

My text is simple each word is seperated by space.

I need to create span as follow so that I can lift the code quickly. As mention below each word has unique id as W1, W2, etc.

```
<p>
  <!-- I need to create span as follow so that -->
  <span id="W1">I</span>  
  <span id="W2">need</span>  
  <span id="W3">to/span>  
  <span id="W4">create</span>  
  <span id="W5">span</span>  
  <span id="W6">as</span>  
  <span id="W7">follow</span>  
  <span id="W8">so</span>  
  <span id="W9">that</span> 
</p> 
```

Thanks.

I have MS expression web and vb studio, any tool I can keep locally and keep creating.

[I see this link on web doing something.](http://www.ezineasp.net/Samples/Javascript/Javascript-DOM/Create-Span-Using-Document-createElement/Default.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:12:12.360

```
// You either have a string 
var mysentence = "I need to do my homework";

// or a paragraph
<p id="words">I need to do my homework</p>
// get sentence
var mysentence = document.getElementById('words');

function spanify(sentence) {
  var arrayOfStrings = sentence.split(" "), newString = "";
    for (var i=0; i < arrayOfStrings.length; i++){
        newString += "<span id='W" + i + "'>" + arrayOfStrings[i] + "</span>";
        }
        return newString;
    }

// spanify the sentence
spanify(mysentence); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:01:00.870

html

```
<body>
    <p>
    </p>
</body> 
```

JS

```
<script>
    var sString = "asdf sadfasd f sdfasd fasdfasdfasdf";
    var aString = sString.split(' ');

    for (var i=0;i<aString.length;i++)
    {
        document.getElementsByTagName("p")[0].innerHTML += '<span class="w' + i + '">' + aString[i] + '</span>'
    }
</script> 
```

并且总是发布你的代码，即使在你看来它是愚蠢和错误的 :)

# entity-framework - 首先使用 EF 代码生成具有特殊 SQL 数据类型的列的表

> ID：15661811
> 
> 赞同：2
> 
> 时间：2013-03-27T14:46:40.807
> 
> 标签：entity-framework, data-annotations, fluent-interface

我想知道在首先通过代码生成数据库时，是否有可能（通过 Fluent Api 或数据注释）将数据库的属性映射为位、hierarchyid、sql_variant、sysname、表或时间戳。对我来说真正最重要的是系统名，我只是对其余的感到好奇。有没有人这样做过？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:13:59.143

[从这里](http://msdn.microsoft.com/en-us/library/ms131092.aspx)读我会说不。没有与 sysname SQL 类型等效的 CLR 类型。

我也尝试`.HasColumnType("sysname")`在非原始类型名称的缺失命名空间上出现异常，但没有成功。但由于 CLR 中没有关于 sysname 的内容，因此我没有名称空间可提供。

[在这里](http://msdn.microsoft.com/en-us/library/ms191240%28v=sql.105%29.aspx)你可以读到 sysname是`nvarchar(128) not null`.

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:23:32.973

我只是不好意思地重复了 3 年前[在这里](http://thedatafarm.com/blog/data-access/sql-server-2008-data-types-and-entity-framework-4/)所做的经验方法。

我得到了可以通过以下方式放入表中的数据类型`SELECT name FROM sys.systypes`：

```
bigint
binary
bit
char
date
datetime
datetime2
datetimeoffset
decimal
float
geography
geometry
hierarchyid
image
int
money
nchar
ntext
numeric
nvarchar
real
smalldatetime
smallint
smallmoney
sql_variant
sysname
text
time
timestamp
tinyint
uniqueidentifier
varbinary
varchar
xml 
```

（请注意，`sysname`它在那里但`table`不是）。

我使用实体框架电动工具（beta 3、EF 6.0.0 alpha-3）对包含这些类型的表进行了逆向工程，并得到了以下结果：

```
public partial class AllType{
    public int Id { get; set; }
    public Nullable<long> bigint { get; set; }
    public byte[] binary { get; set; }
    public Nullable<bool> bit { get; set; }
    public string @char { get; set; }
    public Nullable<System.DateTime> date { get; set; }
    public Nullable<System.DateTime> datetime { get; set; }
    public Nullable<System.DateTime> datetime2 { get; set; }
    public Nullable<System.DateTimeOffset> datetimeoffset { get; set; }
    public Nullable<decimal> @decimal { get; set; }
    public Nullable<double> @float { get; set; }
    public System.Data.Entity.Spatial.DbGeography geography { get; set; }
    public System.Data.Entity.Spatial.DbGeometry geometry { get; set; }
    public byte[] image { get; set; }
    public Nullable<int> @int { get; set; }
    public Nullable<decimal> money { get; set; }
    public string nchar { get; set; }
    public string ntext { get; set; }
    public Nullable<decimal> numeric { get; set; }
    public string nvarchar { get; set; }
    public Nullable<float> real { get; set; }
    public Nullable<System.DateTime> smalldatetime { get; set; }
    public Nullable<short> smallint { get; set; }
    public Nullable<decimal> smallmoney { get; set; }
    public string sysname { get; set; }
    public string text { get; set; }
    public Nullable<System.TimeSpan> time { get; set; }
    public byte[] timestamp { get; set; }
    public Nullable<byte> tinyint { get; set; }
    public Nullable<System.Guid> uniqueidentifier { get; set; }
    public byte[] varbinary { get; set; }
    public string varchar { get; set; }
    public string xml { get; set; }    } 
```

您会看到目前不支持这些类型：

```
hierarchyid
sql_variant 
```

当然`table`，因为它首先不是列数据类型。

好吧，这是补充 tschmit007 更聪明的答案的愚蠢方法，因为和你一样，我只是好奇。

# css - 是否可以使用 Modernizr 检测对 CSS3 函数的支持，例如 attr() 或 url()？

> ID：15661814
> 
> 赞同：3
> 
> 时间：2013-03-27T14:46:51.557
> 
> 标签：css, modernizr

我一直在寻找针对 CSS 函数的 Modernizr 测试[`attr()`](https://developer.mozilla.org/en-US/docs/CSS/attr)，但我找不到任何东西。有没有办法测试这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:28:10.390

CSS 函数在使用上差异很大，并且算作值而不是属性或选择器，因此没有针对它们的通用 Modernizr 测试。但是，[它确实为某些特定功能提供了特征检测](http://modernizr.com/docs/#features-css)：

*   [RGBA](http://www.w3.org/TR/css3-color/#rgba-color)和[HSLA](http://www.w3.org/TR/css3-color/#hsla-color)颜色值：`Modernizr.rgba`和`Modernizr.hsla`

*   [渐变](http://www.w3.org/TR/css3-images/#gradients)：`Modernizr.cssgradients`

*   [变换](http://www.w3.org/TR/css3-transforms)：`Modernizr.csstransforms`用于 2D 变换和`Modernizr.csstransforms3d`3D 变换

Modernizr 不提供功能检测，`url()`因为它一直存在并且每个浏览器都完全支持它。

它`attr()`也没有`attr()`为[.](http://www.w3.org/TR/CSS21/generate.html) 截至 2013 年，[值和单位级别 3](http://www.w3.org/TR/css3-values/#attr-notation)中定义的版本不存在任何实现。

请注意，CSS2.1`attr()`仅可用于和伪元素的`content`属性，Modernizr*确实*以.`:before``:after`*`Modernizr.generatedcontent`*

# ruby-on-rails - Devise and password_confirmation validation

> ID：15661815
> 
> 赞同：2
> 
> 时间：2013-03-27T14:46:54.917
> 
> 标签：ruby-on-rails, validation, testing, devise

I'm having trouble with devise and password confirmation. I've created a model test in rails4 which looks like this:

```
test "user requires a password_confirmation" do
  user = FactoryGirl.build(:user)
  assert user.valid?, "FactoryGirl should return a valid user"

  user.password_confirmation = nil

  # These are just some outputs to verify what's going on.
  # This is the condition in devises's password_required? method
  puts !user.persisted? || !user.password.nil? || !user.password_confirmation.nil? #=> true
  puts user.valid? #=> true

  assert user.invalid?, "Password confirmation should be required" # Fails here
  assert_equal 1, user.errors.size, "Only one error should have occured. #{user.errors.full_messages}"
end 
```

This test fails at second assert (`"Password confirmation should be required"`).

Here's my full User model :

```
class User < ActiveRecord::Base
  has_one :user_entity

  has_one :manager,through: :user_entity, source: :entity, source_type: 'Manager'
  has_one :client, through: :user_entity, source: :entity, source_type: 'Client'

  # Adds default behavior. See: https://github.com/stanislaw/simple_roles#many-strategy
  simple_roles

  validates :username,
    presence: true,
    length: { minimum: 4, allow_blank: true, if: :username_changed? },
    uniqueness: { allow_blank: true, if: :username_changed? },
    format: { with: /\A[A-z_0-9]+\z/, allow_blank: true, if: :username_changed? }

  # Include default devise modules. Others available are:
  # :token_authenticatable, :timeoutable, :omniauthable, :registerable
  devise  :database_authenticatable, :recoverable, :rememberable,
          :trackable, :validatable, :confirmable, :lockable

  # Virtual attribute for authenticating by either username or email
  # This is in addition to a real persisted field like 'username'
  attr_accessor :login

  def self.find_first_by_auth_conditions(warden_conditions)
    conditions = warden_conditions.dup

    # User need to be active
    conditions[:active] = true

    if login = conditions.delete(:login)
      where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
    else
      where(conditions).first
    end
  end

  def entity
    self.user_entity.try(:entity)
  end

  def entity=(newEntity)
    self.build_user_entity(entity: newEntity)
  end

end 
```

I've tried adding in my user model :

```
validates :password,    confirmation: true 
```

After that the test passes but i get an error on the next one:

```
 1) Failure:
UserTest#test_user_requires_a_password [/my/project/test/models/user_test.rb:52]:
Two errors should have occured. ["Password confirmation doesn't match confirmation", "Password confirmation doesn't match confirmation", "Password can't be blank"].
Expected: 2
  Actual: 3 
```

As you can see, it's like the confirmation validation occurs two times and fails both time.

I'm using rails4 (edge) and the rails4 branch for devise.

EDIT: I tried setting

```
user.password_confirmation = "#{user.password}_diff" 
```

And the test passes. So why is confirmation ignored when `nil` is set ? As the object is not yet persisted i would assume a password confirmation has to be provided.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-11T20:54:22.050

我知道这是一个老问题，但我遇到了同样的问题。

首先，从您的模型中删除它，这样您就不会得到重复的验证检查：

```
validates :password, confirmation: true 
```

然后添加以下内容。我将其更改为仅适用于创建：

```
validates :password_confirmation, presence: true, on: :create 
```

请参阅[此 apidock 页面上的](http://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html)**validates_confirmation_of**部分：

> 注意：仅当 password_confirmation 不为零时才执行此检查。要要求确认，请确保为确认属性添加存在检查：
> 
> validates_presence_of :password_confirmation, if: :password_changed?

# java - UnitOfWork 日志

> ID：15661817
> 
> 赞同：0
> 
> 时间：2013-03-27T14:46:57.870
> 
> 标签：java, eclipse, logging, unit-of-work

在我的 java eclipselink web 应用程序中，我看到了一些与 UnitOfWork 相关的日志

```
15:45:24.140 [qtp55821173-112] WARN  o.e.persistence.logging.default - 2013-03-27 15:45:24.14--UnitOfWork(2111553158)--
15:46:22.953 [qtp55821173-24] WARN  o.e.persistence.logging.default - 2013-03-27 15:46:22.952--UnitOfWork(1041525431)--
15:46:24.568 [qtp55821173-55] WARN  o.e.persistence.logging.default - 2013-03-27 15:46:24.567--UnitOfWork(1631959950)--
15:46:26.127 [qtp55821173-20] WARN  o.e.persistence.logging.default - 2013-03-27 15:46:26.127--UnitOfWork(272775397)-- 
```

这些日志语句是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:54:54.727

它是 EclipseLink JPA 框架的一部分，您可以在[此处](http://wiki.eclipse.org/EclipseLink/Examples/JPA/ORMTransactions#Unit_Of_Work)找到更多信息。

> 数据库事务是一组操作（创建、读取、更新或删除），它们作为单个操作成功或失败。数据库丢弃或回滚不成功的事务，使数据库保持其原始状态。在 EclipseLink 中，事务由工作单元对象封装。使用工作单元，您可以直接或通过 Java 2 企业版 (J2EE) 外部事务控制器（例如 Java 事务 API (JTA)）以事务方式修改对象。

# python - How to visualize continuous time spent in a location in pandas?

> ID：15661821
> 
> 赞同：1
> 
> 时间：2013-03-27T14:47:16.140
> 
> 标签：python, pandas, data-analysis

I have some data with timestamps and location data like follows:

```
A  2013-02-05 19:45:00    (39.94, -86.159)
A  2013-02-05 19:55:00    (39.94, -86.159)
A  2013-02-05 20:00:00   (39.777, -85.995)
A  2013-02-05 20:05:00   (39.775, -85.978)
B  2013-02-05 22:20:00   (39.935, -86.159)
B  2013-02-05 22:25:00   (39.935, -86.159)
B  2013-02-05 23:55:00   (39.951, -86.151)
B  2013-02-06 00:00:00   (39.951, -86.151)
B  2013-02-06 00:05:00   (39.906, -86.196)
C  2013-02-06 00:25:00    (39.82, -86.249)
C  2013-02-06 00:30:00    (39.82, -86.249)
C  2013-02-06 02:45:00   (41.498, -81.527)
C  2013-02-06 02:55:00   (41.498, -81.527)
C  2013-02-06 04:35:00    (39.82, -86.249)
C  2013-02-06 04:40:00    (39.82, -86.249) 
```

What I need to do is that for each user for each day get a histogram of the number of times someone was in one location continuously. Hence, I want to mark each continuous period where the location remains the same for each user, each day.

How would I go about that in python pandas?

Cases that the location repeats for a user in one day is possible as shown for user C, the location (39.82\. -86.249) occurs again. So, those cases are to be considered separate continuous times.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:01:10.980

我认为您正在寻找 pd.Series.shift

```
x = pd.Series([1, 3, 3, 2, 3, 3])

x
0    1
1    3
2    3
3    2
4    3
5    3

x.shift(-1)
0     3
1     3
2     2
3     3
4     3
5   NaN

(x != x.shift(-1)).sum()
4 
```

假设问题中的数据是

```
df[['COL1', 'COL2', 'COL3']] 
```

然后，这应该可以为您提供每个用户/每天的独特位置数量。我不确定这是否正是您想要的，但应该有助于开始

```
df['DATE'] = df.COL2.apply(lambda s: pd.to_datetime(s).date())
df.groupby(['COL1', 'DATE']).apply(lambda sdf: (sdf.COL3 != sdf.COL3).sum()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:50:40.350

你的意思是这样的吗？

```
In [5]: df
Out[5]: 
    0                   1       2       3
0   A 2013-02-05 19:45:00  39.940 -86.159
1   A 2013-02-05 19:55:00  39.940 -86.159
2   A 2013-02-05 20:00:00  39.777 -85.995
3   A 2013-02-05 20:05:00  39.775 -85.978
4   B 2013-02-05 22:20:00  39.935 -86.159
5   B 2013-02-05 22:25:00  39.935 -86.159
6   B 2013-02-05 23:55:00  39.951 -86.151
7   B 2013-02-06 00:00:00  39.951 -86.151
8   B 2013-02-06 00:05:00  39.906 -86.196
9   C 2013-02-06 00:25:00  39.820 -86.249
10  C 2013-02-06 00:30:00  39.820 -86.249
11  C 2013-02-06 02:45:00  41.498 -81.527
12  C 2013-02-06 02:55:00  41.498 -81.527
13  C 2013-02-06 04:35:00  39.820 -86.249
14  C 2013-02-06 04:40:00  39.820 -86.249

In [6]: def gb(df, *args, **kwargs):
   ...:     for k, g in df.groupby(*args, **kwargs):
   ...:         splt = np.split(g, np.where(np.diff(g.index.values)!=1)[0]+1)
   ...:         for subg in splt:
   ...:                 if len(subg) >=2: yield k, subg
   ...:             

In [7]: group_args = [0, df[1].apply(lambda x:x.date()), 2 , 3]

In [8]: for key, grp in gb(df, group_args, sort=False):
   ...:     print key
   ...:     print grp
   ...:     print '-'*10
   ...: 
```

印刷：

```
('A', datetime.date(2013, 2, 5), 39.94, -86.159)
   0                   1      2       3
0  A 2013-02-05 19:45:00  39.94 -86.159
1  A 2013-02-05 19:55:00  39.94 -86.159
----------
('B', datetime.date(2013, 2, 5), 39.935, -86.159)
   0                   1       2       3
4  B 2013-02-05 22:20:00  39.935 -86.159
5  B 2013-02-05 22:25:00  39.935 -86.159
----------
('C', datetime.date(2013, 2, 6), 39.82, -86.249)
    0                   1      2       3
9   C 2013-02-06 00:25:00  39.82 -86.249
10  C 2013-02-06 00:30:00  39.82 -86.249
----------
('C', datetime.date(2013, 2, 6), 39.82, -86.249)
    0                   1      2       3
13  C 2013-02-06 04:35:00  39.82 -86.249
14  C 2013-02-06 04:40:00  39.82 -86.249
----------
('C', datetime.date(2013, 2, 6), 41.498, -81.527)
    0                   1       2       3
11  C 2013-02-06 02:45:00  41.498 -81.527
12  C 2013-02-06 02:55:00  41.498 -81.527 
```

# php - Recursive category tree in php

> ID：15661822
> 
> 赞同：0
> 
> 时间：2013-03-27T14:47:17.277
> 
> 标签：php, mysql, recursion, tree

I have this sql table

![I have this sql table](../Images/dca43278f3e5a3bc491ebc41e1540e4f.png)

How to return it with php like?

```
Root1
- SubCat 1
-- SubSubCat 1
- SubCat 2
Root2 
```

I found [this](http://blog.ideashower.com/post/15147134343/create-a-parent-child-array-structure-in-one-pass), but i cant return it in form, that i need. But the script still displays all categories, first as a sub, and then as root.

How to make it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:51:19.553

这可以完成工作：

```
$items = array(
        (object) array('id' => 42, 'sub_id' => 1),
        (object) array('id' => 43, 'sub_id' => 42),
        (object) array('id' => 1, 'sub_id' => 0),
);

$childs = array();

foreach($items as $item)
    $childs[$item->sub_id][] = $item;

foreach($items as $item) if (isset($childs[$item->id]))
    $item->childs = $childs[$item->id];

$tree = $childs[0];

print_r($tree); 
```

这通过首先按 parent_id 索引类别来工作。然后对于每个类别，我们只需将 category->childs 设置为 childs[category->id]，然后树就构建好了！

所以，现在 $tree 是类别树。它包含一个 sub_id=0 的项目数组，这些项目本身包含一个他们的孩子的数组，他们自己...

print_r($tree) 的输出：

```
stdClass Object
(
    [id] => 1
    [sub_id] => 0
    [childs] => Array
    (
        [0] => stdClass Object
            (
                [id] => 42
                [sub_id] => 1
                [childs] => Array
                    (
                        [0] => stdClass Object
                            (
                                [id] => 43
                                [sub_id] => 42
                            )

                    )

            )

    )

) 
```

所以这是最终的功能：

```
function buildTree($items) {

    $childs = array();

    foreach($items as $item)
        $childs[$item->sub_id][] = $item;

    foreach($items as $item) if (isset($childs[$item->id]))
        $item->childs = $childs[$item->id];

    return $childs[0];
}

$tree = buildTree($items); 
```

# xcode - Reuse variable name when inserting an Xcode snippet

> ID：15661823
> 
> 赞同：2
> 
> 时间：2013-03-27T14:47:23.747
> 
> 标签：xcode, xcode4.5, code-snippets

I'm making a snippet to make `UILabel`s faster. In this snippet I really just want to set the variable name once and then use it later when setting the color and background color. How can I reuse what I set in `<#labelName#>` so I don't have to write it for every attribute I alter?

```
UILabel *<#labelName#> = [[UILabel alloc] initWithFrame:CGRectMake(<#x#>, <#y#>,<#width#>, <#height#>)];
<#labelName#>.textColor = <#UIColor#>
<#labelName#>.backgroundColor = [UIColor clearColor]; 
```

# javascript - 为什么此代码会引发：`Uncaught SyntaxError: Unexpected token catch`

> ID：15661827
> 
> 赞同：0
> 
> 时间：2013-03-27T14:47:30.147
> 
> 标签：javascript

以下 JavaScript 片段`SyntaxError: Unexpected token catch`在加载脚本后立即引发：

```
try {
    // Client error (e.g., form validation)
    if ((jqXHR.status === 400) && data.errors) {
      // do something
    }
    // Server error (e.g., can't send email)
    else if ((jqXHR.status === 500) && data.errors) {
      // do something else
    }
    // Unknown error
    else {
      throw;
    }
} catch(e) {
  // Handle error
} 
```

与 SO 上的其他`SyntaxError: Unexpected token`问题不同，此问题不是由格式错误的 JSON 或简单地忘记大括号引起的。语法有问题，但目前尚不清楚它是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:47:30.147

依次注释掉每一行后，我发现问题出在这行：

```
else {
    throw;
} 
```

我打算抛出一个通用异常，但`throw`需要一个表达式。像这样重写它可以修复它：

```
else {
  throw 'Unknown error';
} 
```

# javascript - Java Script 向下滚动列表

> ID：15661830
> 
> 赞同：0
> 
> 时间：2013-03-27T14:47:30.230
> 
> 标签：javascript, javascript-events

谁能帮我这个？正如您在下面的链接中看到的那样，我试图让列表向下移动而不是向上移动。此外，当我尝试拥有超过 4 个项目时，项目开始重叠。帮助或建议？？

[http://jsfiddle.net/gkTWC/48/](http://jsfiddle.net/gkTWC/48/)

这是我目前正在使用的代码：

```
$(document).ready(function() {
    var i = 0;
    $(".marqueeElement").each(function() {
          var $this = $(this);
          $this.css("top", i);
          i += 60;
          doScroll($this);
    });
});

    function doScroll($ele) {
        var top = parseInt($ele.css("top"));
        if(top < -50) {
            top = 180;
            $ele.css("top", top);
        }
        $ele.animate({ top: (parseInt(top)-60) },600,'linear', function() {doScroll($(this))});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:03:41.917

伙计们别管了。我是一名球员。

[http://jsfiddle.net/gkTWC/1131/](http://jsfiddle.net/gkTWC/1131/)

```
if(top > 480) {
top = -60;
} 
```

# jquery - jQuery fadeIn 和 fadeOut 函数在元素点击时不起作用

> ID：15661833
> 
> 赞同：2
> 
> 时间：2013-03-27T14:47:34.517
> 
> 标签：jquery, html, css

我正在尝试弹出类似的东西，`div`当我单击链接时会出现一个。一段时间后，它会消失。我可以`div`通过`animation.css`. 但我无法让它消失。这是代码：

```
<!DOCTYPE HTML>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Clapper</title>

 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   <link type="text/css" rel="stylesheet" href="animate.css" />
<script type="text/javascript">

function demoDisplay()
{
document.getElementById("clapper").style.display="block";
document.getElementById("clapperBG").style.display="block";
$("#clapper").fadeOut(200);

}

</script>

<!-- STYLES -->

<style>

 #clapper {
     min-width:200px;
     min-height:200px;
     top:40%;
     background-color:#888;
     left:40%;
     position:absolute;
     z-index:1002;
     display:none;

}

 #clapperBG {
     min-width:100%;
     min-height:100%;
     background-color:#555;
     opacity:0.6;
     position:absolute;
     display:none;
 }

 </style>

</head>

<body>

  <div id="wrapper">

     <div id="main">
     <a href="#" onclick="demoDisplay()" > TEST</a>
     <div id="clapper"  > Some Animation GIF</div>
     <div id="clapperBG" class="animated  flipInY" >Background</div>

     </div>

   </div>

  <footer>
  </footer>

</body>

</html> 
```

请告诉我出了什么问题......我尝试了很多例子`$("#clapper").fadeOut(2000);`，甚至在`document.ready`但仍然没有好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:57:20.267

尝试在要淡入/淡出的元素上使用[fadeToggle()并在标签上使用 jQuery](http://api.jquery.com/fadeToggle/) [.click()](http://api.jquery.com/click/)事件`<a>`：

```
$("a").click(function() {
    $("#clapper").fadeToggle();
}); 
```

将 HTML 更改为：

```
<div id="wrapper">
     <div id="main">
     <a href="#"> TEST</a>
     <div id="clapper"> Some Animation GIF</div>
     <div id="clapperBG" class="animated flipInY">Background</div>
</div> 
```

此处示例：[示例](http://jsfiddle.net/uG76H/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:59:52.840

链接[$.show()](http://api.jquery.com/show/)、[$.delay()](http://api.jquery.com/delay/)和 $.hide() 函数似乎可以满足您的要求：

```
function demoDisplay()
{
  $("#clapper").show().delay(200).hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:55:39.173

简单的做法是将其应用于点击。从 ahref 中删除 onclick 并添加一个类，甚至一起转储 ahref 并执行 div/span 无关紧要。

```
 <div id="main">
 <a href="#" class="clickevent" > TEST</a>
 <div id="clapper"  > Some Animation GIF</div>
 <div id="clapperBG" class="animated  flipInY" >Background</div>

 </div> 
```

你的 jquery 看起来像这样。

```
$(document).ready(function() {
   $('.clickevent').click(function(){
   $('#clapperBG').css({'display' : 'block'});
   });
  }); 
```

* * *

如果你想动画使用 .show(); 并使用慢速或使用 .toggle();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:18:33.703

在元素点击后触发某个动作的最佳方式可能是在该元素上附加一个点击句柄。考虑`demoDisplay`函数的存在和以下 HTML 代码：

```
<div id="main">
    <a id="test-link" href="#">TEST</a>
    <div id="clapper">Some Animation GIF</div>
    <div id="clapperBG" class="animated  flipInY" >Background</div>
 </div> 
```

可以通过以下方式使用 jQuery 来包含事件处理程序：

```
$("#test-link").click(demoDisplay); 
```

如果您想在淡出其中一个之前先显示您的元素，最好使用现成的 jQuery 函数`show`：

```
function demoDisplay() {
    $("#clapper, #clapperBG").show();
    $("#clapper").fadeOut(200);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T14:54:50.650

您可以使用`click()`函数触发事件。

**html:**

```
<a href="#" class="triggerElem"> TEST</a> 
```

**javascript:**

```
<script type="text/javascript">
    $(document).ready(function({

       $('.triggerElem').click(function() {
          $("#clapper, #clapperBG").show();//shows both element
          $("#clapper").fadeOut(200);
       });

    });
</script> 
```

# excel - 如果没有要复制的内容，如何使 If 语句不复制

> ID：15661838
> 
> 赞同：1
> 
> 时间：2013-03-27T14:47:47.277
> 
> 标签：excel, vba

我知道这个问题听起来有点令人困惑，但我遇到的问题是我有一个订单项数据库。我使用宏来过滤这些项目并将其复制到某些部分。在一个部分中，到目前为止，我在数据库中没有任何项目（将来可能会，但不确定）。我注意到本不应该复制任何内容的部分正在复制数据库中的所有内容。我一步一步地运行宏，看到它正确过滤，数据库中没有任何显示，但由于某种原因，它复制了数据库中的每个项目。我不确定它为什么这样做，但下面是我正在使用的代码。我假设有一个 If 语句，我可以在“选择正确的数据以复制代码”中添加，以说明数据库是否过滤任何内容，然后不要复制任何内容，但我不知道该怎么做。任何帮助深表感谢

```
'To filter data
'Sheets("Database").Select
'Range("A1").AutoFilter Field:=5, Criteria1:="2500", Operator:=xlOr, Criteria2:="All"
'Range("A1").AutoFilter Field:=6, Criteria1:="Adder"
'Range("A1").AutoFilter Field:=7, Criteria1:=Array("FL", "MF", "HF", "Furnace Eng", "Launder"), Operator:=xlFilterValues
'To select correct data to copy
'Dim I As Long
'I = Range("B" & Rows.Count).End(xlUp).Row
'Range("B2:B" & I).Copy
'To copy data
'Sheets("Quote Sheet").Select
'ActiveCell.Offset(1, 0).Select
'Selection.PasteSpecial Paste:=xlPasteValues 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:16:12.437

要复制过滤后的数据，请使用此方法（**未经测试**）。我还使用上面代码中的第三个自动过滤器示例来演示`.Offset`

```
 Dim Dim copyFrom As Range

   '~~> I am assuming that the Headers are in Row 1
   '~~> Filter, offset(to exclude headers) and set the filtered range
    With .Range("A1")
        .AutoFilter Field:=7, Criteria1:=Array("FL", "MF", "HF", "Furnace Eng", "Launder"), _
        Operator:=xlFilterValues
        Set copyFrom = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
    End With

    If Not copyfrom Is Nothing Then
        copyfrom.Copy '<~~ Copy the range
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:21:03.463

我只是检查你的情况：

```
If Range("B1").CurrentRegion.Rows.Count >1 Then 
```

# python - Eclipse中的python web编程

> ID：15661841
> 
> 赞同：-4
> 
> 时间：2013-03-27T14:47:54.653
> 
> 标签：python, django, eclipse, web-applications, pydev

是否有任何视频教程或书籍可以让我在 Eclipse（pydev）的 django 平台中学习 python web 编程。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:50:23.167

试试[The Django Book](http://www.djangobook.com/en/2.0/index.html)，或者从[教程](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:00:31.540

[http://pydev.org/manual_adv_django.html](http://pydev.org/manual_adv_django.html)应该可以帮助您入门。如果您是 eclipse 的新手，我会先找到一个教程，因为他们有很多自己的术语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:16:25.957

如果你坚持从 Eclipse开始，我想[这个系列是一个很好的起点。](https://www.youtube.com/watch?v=o1STjuSTKcU)

# paypal - 自动完成 Paypal 付款任务

> ID：15661848
> 
> 赞同：0
> 
> 时间：2013-03-27T14:48:27.183
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

我有一个使用 Paypal 接受付款的网站。

这是一个简单的概念；用户输入一些 URL 并进行 Paypal 付款。我使用相同的 URL 并将其添加到某个 3rd 方站点。

我的问题是我可以自动化这个过程，即在 Paypal 支付上，我获取 URL 并将其添加到第 3 方网站上。第 3 方站点只需要我登录并在那里添加 URL。是否有一些工具可以帮助我实现这种自动化？

我正在寻找免费工具（可能是一些脚本或其他东西），但如果收费合理就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:23:00.527

付款完成后，您可以使用 PayPal 的 IPN 或 PDT 将信息返回到您的系统/脚本，以便实现自动化。然后，您只需要编写代码来连接到其他站点并更新站点或文件。请记住，我不熟悉使用 URL 更新站点的选项，或者您必须如何具体执行此操作。如果该站点允许您使用 FTP 并上传文件或访问他们的系统并将 URL 添加到文件中，我相信这不会成为问题。您可能需要检查您将要使用的服务，并查看您有哪些选项可以在该系统上更新此信息，看看它们是否提供您可以使用的任何类型的 API。

# java - 在 Android 应用程序中打开和查看 PDF

> ID：15661851
> 
> 赞同：0
> 
> 时间：2013-03-27T14:48:30.287
> 
> 标签：java, android, pdf

如何在 Android 应用程序中打开和查看 PDF？我需要在商业应用程序中使用它，它必须离线工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:02:23.927

有三个选项：

1) 使用外部查看器应用程序。Vino 向您展示了如何做到这一点。

2）使用开源库。有一两个，但他们真的很烂

3）花很多钱买一个商业图书馆。最大的有 PdfTron（每年将花费您数万美元）、Qoppa（每年将花费您数千美元）和 Raede（每个应用程序的成本约为 1K）。这几乎就是我见过的性能和功能的顺序——pdftron 最好，raede 最差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:59:43.523

试试下面的代码

```
 try{
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(
                    Uri.parse("file://" + getFilesDir() + "/userguide.pdf"),
                    "application/pdf"); 
            startActivity(intent);
        }catch(Exception e){
            Toast.makeText(getBaseContext(), "No Application Available to View PDF.", Toast.LENGTH_SHORT).show();
        } 
```

要运行它，您需要先安装任何 pdf 查看应用程序。

# android - 使用路径或矩形从大位图创建多个位图

> ID：15661852
> 
> 赞同：0
> 
> 时间：2013-03-27T14:48:34.567
> 
> 标签：android, path, bitmap, clip, rect

所以我有一个位图。现在我想从原始位图的特定区域创建 5 个较小的位图。

是否可以使用路径或矩形来做到这一点？

例如 ：`newBitmap = OriginalBitmap.copyFromArea(Path data | rect)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:21:25.640

您可以使用类的[createBitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int%29)静态方法`Bitmap`。

例如，如果您有一个 20x25 的图像 ( ) 并希望在右下角`originalBitmap`有一个 5x6 的切片 ( )，那么您可以执行以下操作：`newSlice`

```
Bitmap newSlice = Bitmap.createBitmap (originalBitmap, 15, 19, 5, 6); 
```

# git - 列出所有没有远程的本地分支

> ID：15661853
> 
> 赞同：118
> 
> 时间：2013-03-27T14:48:36.330
> 
> 标签：git, git-remote

问题：我想要一种方法来删除我拥有的所有没有远程的本地分支。将分支的名称通过管道传输到 a 中很容易`git branch -D {branch_name}`，但是我如何首先获得该列表？

例如：

我创建了一个没有遥控器的新分支：

```
$ git co -b no_upstream 
```

我列出了我所有的分支，只有一个带有遥控器

```
$ git branch -a
master
* no_upstream
remotes/origin/HEAD -> origin/master
remotes/origin/master 
```

我可以运行什么命令来获得`no_upstream`答案？

我可以运行`git rev-parse --abbrev-ref --symbolic-full-name @{u}`，这将表明它没有遥控器：

```
$ git rev-parse --abbrev-ref --symbolic-full-name @{u}
error: No upstream configured for branch 'no_upstream'
error: No upstream configured for branch 'no_upstream'
fatal: ambiguous argument '@{u}': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]' 
```

但由于这是一个错误，它不会让我使用它或将它传递给其他命令。我打算将其用作 shell 脚本的别名，`git-delete-unbranched`或者制作一个超级简单的 Gem，例如`git-branch-delete-orphans`

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2015-08-02T20:24:57.230

我建议使用`git branch --format`来指定您想要的`git branch`命令的确切输出。通过这样做，您可以只提取 refname 和上游，如下所示：

```
git branch --format "%(refname:short) %(upstream)" 
```

如果存在远程分支，它会输出分支以及远程分支，格式如下：

```
25-timeout-error-with-many-targets
31-target-suggestions refs/remotes/origin/31-target-suggestions
54-feedback-link refs/remotes/origin/54-feedback-link
65-digest-double-publish 
```

一旦你有了这个格式良好的输出，就很容易通过管道`awk`获取你的列表：

```
git branch --format "%(refname:short) %(upstream)" | awk '{if (!$2) print $1;}' 
```

结果如下：

```
25-timeout-error-with-many-targets
65-digest-double-publish 
```

`awk`如果没有第二列，则该部分打印第一列。

**奖励：创建别名**

`.gitconfig`通过在全局文件（或任何地方）中创建别名来轻松运行：

```
[alias]
  local-branches = "!git branch --format '%(refname:short) %(upstream:short)' | awk '{if (!$2) print $1;}'" 
```

**奖励：远程过滤**

如果由于某种原因您有多个用于不同分支的跟踪遥控器，则很容易指定要检查的遥控器。只需将远程名称添加到 awk 模式即可。就我而言，`origin`我可以这样做：

```
git branch --format "%(refname:short) %(upstream)" | awk '$2 !~/\/origin\// { print $1 }' 
```

重要提示：反斜杠需要在别名中转义，否则您将拥有无效的 gitconfig 文件。

* * *

## 上一个答案

先前的答案在功能上相似，但使用以下作为起点。随着时间的推移，评论者指出，由于提交消息中可能存在差异，正则表达式是不可靠的，所以我不再推荐这种方法。但是，这里供参考：

我最近发现`git branch -vv`这是`git branch`命令的“非常冗长”版本。

如果存在远程分支，它会输出分支以及远程分支，格式如下：

```
 25-timeout-error-with-many-targets    206a5fa WIP: batch insert
  31-target-suggestions                 f5bdce6 [origin/31-target-suggestions] Create target suggestion for team and list on save
* 54-feedback-link                      b98e97c [origin/54-feedback-link] WIP: Feedback link in mail
  65-digest-double-publish              2de4150 WIP: publishing-state 
```

`cut`一旦你有了这个格式良好的输出，就很容易通过管道`awk`获取你的列表：

```
git branch -vv | cut -c 3- | awk '$3 !~/\[/ { print $1 }' 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-27T15:02:36.627

[`git branch`](http://git-scm.com/docs/git-branch)（没有任何选项）仅列出本地分支，但您不知道它们是否正在跟踪远程分支。

通常这些本地分支在合并后应该被删除`master`（如[本期 git-sweep](https://github.com/arc90/git-sweep/issues/5)所示）：

```
git branch --no-contains master --merged master | xargs git branch -d 
```

这并不像您想要的那样完整，但它是一个开始。

> 使用`--merged`，只会列出合并到命名提交的分支（即可以从命名提交访问其提示提交的分支）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-01-23T22:31:57.510

我有一个类似的问题。我想删除所有跟踪现在已删除的远程分支的本地分支。我发现这`git remote prune origin`不足以移除我想要消失的分支。删除遥控器后，我希望本地也消失。这对我有用：

从我的`~/.gitconfig`：

```
[alias]
  prune-branches = !git remote prune origin && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs -r git branch -d 
```

这是一个`git config --global ...`可以轻松将其添加为的命令`git prune-branches`：

```
git config --global alias.prune-branches '!git remote prune origin && git branch -vv | grep '"'"': gone]'"'"' | awk '"'"'{print $1}'"'"' | xargs -r git branch -d' 
```

*注意*：我在实际配置中将 更改为`-d`，`-D`因为我不想听到 Git 抱怨未合并的分支。您*可能也*需要此功能。如果是这样，只需在该命令的末尾使用`-D`而不是。`-d`

此外，FWIW，您的全局配置文件几乎总是`~/.gitconfig`.

**（OS X 修复）**

正如所写，这在 OS X 上不起作用，因为使用了`xargs -r`（谢谢，[Korny](https://stackoverflow.com/users/196463/korny)）。

这`-r`是为了防止在没有分支名称的情况下`xargs`运行`git branch -d`，这将导致错误消息“ `fatal: branch name required`”。如果您不介意错误消息，只需删除`-r`参数即可`xargs`，一切就绪。

但是，如果您不想看到错误消息（实际上，谁会责怪您），那么您将需要其他东西来检查空管道。如果您可以使用[ifne](https://linux.die.net/man/1/ifne)来自[moreutils](https://rentes.github.io/unix/utilities/2015/07/27/moreutils-package/)。您将插入`ifne`before `xargs`，它将停止`xargs`运行空数据。*注意*：`ifne`认为**任何内容**都不为空，这包括空行，因此您可能仍会看到该错误消息。我没有在 OS X 上测试过这个。

这是那`git config`行`ifne`：

```
git config --global alias.prune-branches '!git remote prune origin && git branch -vv | grep '"'"': gone]'"'"' | awk '"'"'{print $1}'"'"' | ifne xargs git branch -d' 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-03-27T23:02:45.330

后期编辑：

更好的是

```
git for-each-ref  --format='%(refname:short) %(upstream)'  refs/heads \
| awk '$2 !~/^refs\/remotes/' 
```

* * *

在 GNU/任何东西上

```
for b in `git branch|sed s,..,,`; do
    git config --get branch.$b.remote|sed Q1 && echo git branch -D $b
done 
```

如果可能有多个分支，那么会有更好的方法，在and`comm -23`的输出上使用。`git branch|sed|sort``git config -l|sed|sort`

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-04-13T14:36:49.280

这对我有用：

`git branch -vv | grep -v origin`

（如果您的遥控器被命名为 origin 以外的任何名称，请替换它）。

这将列出所有未跟踪遥控器的分支，这听起来就像您正在寻找的那样。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-11-19T08:56:34.497

我合成了自己的 Git 命令来获取`origin/***: gone`分支：

```
git remote prune origin && git branch -vv | cut -c 3- | grep ': gone]' | awk '{print $1}' | xargs -n1 -r echo git branch -d 
```

`git remote prune origin && git branch -vv`将以详细模式打印分支。

`cut -c 3-`将删除第一个字符。

`grep ': gone]'`将只打印*消失*的远程分支。

`awk '{print $1}'`将打印分支名称。

`xargs -n1 -r echo git branch -d`将打印`git branch -d`删除分支的命令（-n1 将每次管理一个命令，-r 将在不存在分支时避免发出命令）。

*提示：*删除“echo”命令以*运行*命令而不是仅打印，我将其留在命令中以在发出到 git 之前检查命令。

*提示 2：*`git branch -D`当且仅当您确定要删除未合并的分支时才发布

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-15T18:02:04.370

这是我在 PowerShell 中使用的内容，并带有注释来解释它在做什么。为了弄清楚发生了什么，我没有使用任何缩写的 PowerShell 命令（别名）。随意将其压缩到您想要的神秘程度:)

```
$verboseList = @(git branch -vv)
foreach ($line in $verboseList)
{
    # Get the branch name
    $branch = [regex]::Match($line, "\s(\S+)\s").Captures.Groups[1].Value
    # Check if the line contains text to indicate if the remote is deleted
    $remoteGone = $line.Contains(": gone]")
    # Check if the line does not contain text to indicate it is a tracking branch (i.e., it's local)
    $isLocal = !($line.Contains("[origin/"))
    if ($remoteGone -or $isLocal)
    {
        # Print the branch name
        $branch
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-07T22:15:36.007

此处投票最多的答案在我的系统上不起作用请参阅[要点](https://gist.github.com/rtfmoz2/587c0859a61936aa18133a34b62ea9fd)

以下确实有效并且相当干净。

```
git branch -v | awk '$3 == "[gone]" { print $1 }' | xargs git branch -D 
```

如果您不想删除未合并的分支，请使用 -d。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-22T19:08:59.727

结合一些现有的答案：

```
[alias]
        branch-local = !git branch -vv | cut -c 3- | egrep '([0-9a-f]{7} [^[])|(: gone\\])' | sed -E 's/(^.+[0-9a-f]{7} (\\[.+\\])?).*$/\\1/' 
```

例如：

```
$ git branch-local
autogen_autoreconf      fcfb1c6 [github/autogen_autoreconf: gone]
autotools_documentation 72dc477 [github/autotools_documentation: gone]
cray-mpich-messy        2196f4b
epel-sphinx             cfda770
lammps                  07d96a7 [github/lammps: gone]
lark-error              9ab5d6c [github/lark-error: gone]
no-root2                c3894d1
openmpi-cray            69326cf [github/openmpi-cray: gone]
shellcheck-cleanup      40d90ec
travis-python36         cde072e
update_vagrant_default  4f69f47 [github/update_vagrant_default: gone]
web-docs                e73b4a8 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-18T18:48:45.977

现有的答案似乎都不适合我。

这是我列出不是远程的本地分支的解决方案

```
comm -13 <(git branch -r | sed 's/origin\/\(.*\)/\1/g' | cut -c 3-) <(git branch | cut -c 3-) 
```

这是它如何工作的解释：

1.  考虑所有远程分支的列表（没有 'origin/' 或前导空格） `git branch -r | sed 's/origin\/\(.*\)/\1/g' | cut -c 3-`

2.  考虑所有本地分支的列表（没有星号或前导空格） `git branch | cut -c 3-`

3.  比较这两个列表并显示列表 2（我的本地分支）中不在列表 1（远程分支列表）中的任何内容 `comm -13 <(git branch -r | sed 's/origin\/\(.*\)/\1/g' | cut -c 3-) <(git branch | cut -c 3-)`

> comm 可以采用标志 -1、-2 和 -3 的组合，指示要从哪个文件中抑制行（文件 1 独有，文件 2 独有或两者共有）

# c# - ViewState - 在集合中存储数据的正确方法

> ID：15661854
> 
> 赞同：2
> 
> 时间：2013-03-27T14:48:38.927
> 
> 标签：c#, asp.net, performance, viewstate

假设我有一组对象

```
List<MyClass> collection = new List<MyClass>(); 
```

以及将插入这些对象的字典

```
Dictionary<string, List<MyClass>> sections = new Dictionary<string, List<MyClass>>();
// example of insertion
sections["A"].Add(collection[2]); 
```

列表和字典存储在一个`ViewState`. 将对象的标识符存储在字典中并稍后在我需要它们时将它们与对象绑定会更方便内存吗？

```
Dictionary<string, List<int>> sections = new Dictionary<string, List<int>>();
// example of insertion
sections["A"].Add(collection[2].ID); 
```

据我了解，不会有性能提升，因为在第一种情况下，字典将包含大小为 32/64 位的引用。这是真的吗？

**编辑**

`MyClass`是一个类，而不是一个结构。List 和 Dictionary 声明如下：

```
private List<MyClass> A
{
    get
    {
        if (ViewState["a"] == null)
        {
            ViewState["a"] = // retrieve data from db
        }
        return (List<MyClass>)ViewState["a"];
    }
    set
    {
        ViewState["a"] = value;
    }
}

private Dictionary<string, List<MyClass>> B
{
    get
    {
        if (ViewState["b"] == null)
        {
            ViewState["b"] = new Dictionary<string, List<MyClass>>();
        }
        return (Dictionary<string, List<MyClass>>)ViewState["b"];
    }
    set
    {
        ViewState["b"] = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:09:25.070

> 将对象的标识符存储在字典中并稍后在我需要它们时将它们与对象绑定会更方便内存吗？

如果通过“内存友好”你的意思是“更小的视图状态”，因此更小的页面大小，更快的渲染，更高效的浏览器操作......

是的，仅存储复杂类型的 ID 将导致 ViewState 字符串小于序列化整个对象图。考虑到这一点，而不是盲目地将东西放入 ViewState（一个常见错误），这很好。

几件事：

*   ViewState 不能免于篡改，因此攻击者可能会尝试提交他们无权访问的对象的 ID。您可以[`EnableViewStateMac`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableviewstatemac.aspx)用作威慑。我仍然会手动验证关键 ID，以确保用户可以访问它们。

*   如果您经常使用这些对象，则最好将它们存储在数据库中`Session`，`Cache`而不是对数据库进行多次调用。

# c# - 使用全局资源时找不到强类型资源

> ID：15661856
> 
> 赞同：1
> 
> 时间：2013-03-27T14:48:42.637
> 
> 标签：c#, .net, visual-studio, resources, globalization

我不敢相信我会问这个问题，因为这似乎很容易完成，但是......考虑到文化和 uiculture，我如何访问全球资源？

我在 App_GlobalResources 文件夹下创建了两个文件：

*   Unit.en-US.resx
*   单位.pt-BR.resx

并创建了一个键值为 SearchTitle 和文本“Bla bla bla”的条目。

在我添加的 web.config 文件中：

```
<globalization uiCulture="auto:en" culture="auto:en-US" /> 
```

但是现在我不知道如何访问资源文件。我试过（在 Unit.aspx.cs 中）：

```
string s = Resources.Unit.SearchTitle 
```

但***资源***未被识别或不存在。

也试过：

```
<label><%$ Resources:Unit, SearchTitle %></label> 
```

最后，还尝试为资源文件设置自定义工具，但我不确定之后该怎么做：

```
PublicResXFileCodeGenerator 
```

我以前从未使用过资源，我的目标是根据用户的文化使用它们将 aspx 页面翻译成不同的语言。

我正在使用 VS 2012 和 .NET 4.0。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:15:58.430

试试下面的代码，看看你的项目是否设置正确：

```
GetGlobalResourceObject("Unit", "SearchTitle") 
```

它是什么类型的应用程序？我通常不需要设置自定义工具或构建操作。

# c# - c#实现select命令后插入命令参数的if/else语句？

> ID：15661860
> 
> 赞同：2
> 
> 时间：2013-03-27T14:48:56.470
> 
> 标签：c#, ms-access

访问 2003 与 2010 C#

请有人可以帮助我如何做一个 else 声明。我已经使用 if 语句来检查是否存在重复记录，并且我在使用插入命令参数时如何使用 else 语句而苦苦挣扎。提前致谢

这是方法

```
 OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;

        using (var command = myCon.CreateCommand())
            {
                command.CommandText = "select * from SomeTable where ID = @ID";
                command.Parameters.AddWithValue("ID", int.Parse(txtID.Text));

                myCon.Open();
                var reader = command.ExecuteReader();
                {
                    if (reader.HasRows)
                    {
                        while (reader.Read())
                        {
                            txtID.Text = reader["ID"].ToString();

                        }
                    } MessageBox.Show("ID Already exist");
                    else (reader.HasRows !=null // need here pls. 
                    {

                      cmd.CommandText = "INSERT INTO SomeTable (ID, AgeGroup, Gender) VALUES (@ID, @AgeGroup, @Gender)";
                      cmd.Parameters.AddWithValue("@ID", txtID.Text);
                      cmd.Parameters.AddWithValue("@AgeGroup", cBAgeGroup.Text);
                      cmd.Parameters.AddWithValue("@Gender", cBGender.Text);
                      cmd.Connection = myCon;
                      cmd.ExecuteNonQuery();
                    }
                 }

                }
                  //  cmd.Connection = myCon;
                  //  cmd.ExecuteNonQuery();
                    myCon.Close(); 
```

**更新 2** 我在 else 语句中移动了 cmd 连接和 cmd.ExecuteNonQuery。我能够检查 id 是否已经存在并能够插入新记录。所以代码正在按原样执行。

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:55:43.697

the`MessageBox`不属于 the`if`和 the之间`else`，可以`else`直接使用：

```
if (reader.HasRows)
{
    while (reader.Read())
    {
        txtID.Text = reader["ID"].ToString();

    }
} MessageBox.Show("ID Already exist");         // <--- remove this here
else (reader.HasRows !=null // need here pls.  // <--- remove this here 
```

因此，将消息框放入`if`您检测到存在具有给定 id 的行的位置：

```
if (reader.HasRows)
{
    MessageBox.Show("ID Already exist");
    // ... 
```

然后您可以使用在中插入新记录，`else`因为您已经知道相反的`HasRows`是“没有行”：

```
else
{
  cmd.CommandText = "INSERT INTO SomeTable (ID, AgeGroup, Gender) VALUES (@ID, @AgeGroup, @Gender)";
  // ... 
```

但是，我不确定这是否是您代码中的唯一问题。

**更新**其实还有其他问题，看看这个完全重构的代码：

```
string selectSql = "SELECT * FROM SomeTable WHERE ID = @ID";
string insertSql = "INSERT INTO SomeTable (ID, AgeGroup, Gender) VALUES (@ID, @AgeGroup, @Gender)";

int id;
if (!int.TryParse(txtID.Text, out id))
    MessageBox.Show("ID must be an integer.");
else
{
    using (var myCon = new OleDbConnection(connectionString))
    {
        bool idExistsAlready = true;
        using (var selectCommand = new OleDbCommand(selectSql, myCon))
        {
            selectCommand.Parameters.AddWithValue("@ID", id);
            myCon.Open();
            using (var reader = selectCommand.ExecuteReader())
                idExistsAlready = reader.HasRows;
        }
        if (idExistsAlready)
            MessageBox.Show("ID exists already.");
        else
        {
            using (var insertCommand = new OleDbCommand(insertSql, myCon))
            {
                insertCommand.Parameters.AddWithValue("@ID", id);
                insertCommand.Parameters.AddWithValue("@AgeGroup", cBAgeGroup.Text);
                insertCommand.Parameters.AddWithValue("@Gender", cBGender.Text);
                int affectedRecords = insertCommand.ExecuteNonQuery();
            }
        }
    }
} 
```

# ios - 强制静态库不使用 -ObjC 的 -all_load 标志？

> ID：15661866
> 
> 赞同：1
> 
> 时间：2013-03-27T14:49:09.953
> 
> 标签：ios, objective-c, linker, static-libraries, clang

我们知道我们可以强制静态库在链接期间加载所有目标文件。这用于不同的目的，例如将目标 c 类别包含到静态库中等。

我的问题是，当项目使用 -ObjC 或 -all_load 标志时，是否可以强制库不加载所有目标文件？

我正在使用一些 clang 功能（特别是 __has_include 指令）来控制某些标头的导入，但是当使用 -ObjC 标志时，该指令无效，所有目标文件都已加载，因此我的库无法正常工作。

有没有办法解决或解决这个问题？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:46:16.700

```
Is there any way to solve or workaround this problem? 
```

是的，但它是一个脆弱且容易出错的点，可能不值得。将代码重构为不需要静态库的部分链接可能会更容易{y,ies}。

如果您对需要加载的每个符号都有一个硬引用，那么链接器将解析该符号并将其链接到最终的可执行文件中。

但是，由于这根本不是受支持或推荐的模式，因此可能无法直接引用代码中的某些符号。同样，似乎没有代表整个类别的符号。您可能必须单独引用一个类别中包含的任何方法。

见`nm`命令行工具； `nm -m library`将转储库中包含的所有符号信息。

# opengl - 将 HD 3000 与 OpenGL 一起使用？

> ID：15661876
> 
> 赞同：3
> 
> 时间：2013-03-27T14:49:43.753
> 
> 标签：opengl

我想使用相当完整的 OpenGL 版本（带有扩展等）并在我的 i5 芯片上使用 HD 3000 集成显卡。我该怎么做呢？

到目前为止，我已经设法安装了一个免费版本的 OpenGL 和 glut ......它可以工作，但它是 gimpy。而且我很确定它仅作为软件运行，因为它非常慢。我正在使用 Visual Studio 2010 并使用 C 进行编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:12:00.273

Intel HD 3000 还不错！它应该支持现代 OpenGL (3.+)

安装：[http](http://www.ozone3d.net/gpu_caps_viewer/) ://www.ozone3d.net/gpu_caps_viewer/并检查版本以确保。

这是 IvyBridge 上 HD 4000 的链接 [http://www.geeks3d.com/20120506/intel-ivy-bridge-hd-graphics-4000-gpu-opengl-4-tessellation-tested/](http://www.geeks3d.com/20120506/intel-ivy-bridge-hd-graphics-4000-gpu-opengl-4-tessellation-tested/)

通常在 Windows 上只有 OpenGL 1.1，但使用 os GLEW、GLEE 库，您可以根据需要设置任何版本（假设硬件支持）

看看：[http ://www.opengl.org/wiki/OpenGL_Loading_Library](http://www.opengl.org/wiki/OpenGL_Loading_Library)

# c++ - 我可以在 Visual Studio 2008 中从 Win32 解决方案配置（反之亦然）编译 x64 exe 吗？

> ID：15661882
> 
> 赞同：1
> 
> 时间：2013-03-27T14:49:51.537
> 
> 标签：c++, visual-studio-2008, build, x86, 64-bit

我有一个包含许多项目的 Visual Studio 解决方案。There are debug and release configurations for both x86 and x64, and when a particular combination is selected everything is successfully built in that format.

但是，现在有一个要求，即无论当前选择的“位数”如何，某个 C++ 项目都应编译为 x86 和 x64。所以举例来说，当解决方案以x86调试模式构建时，构建目录下应该有两个exe的调试副本，一个x86，一个x64。

实现这一目标的最简单方法是什么？我尝试制作项目的两个副本，exename_32 和 exename_64。我的第一个想法是将 .vcproj 文件中 Debug|x64 节点的内容复制到 exename_64 的 Debug|Win32 节点中。但是当我尝试在 Win32 模式下构建解决方案时，exename_64 项目出现以下错误：

> 20>c:\program files (x86)\microsoft visual studio 9.0\vc\include\codeanalysis\sourceannotations.h(17)：错误 C2371：'size_t'：重新定义；不同的基本类型
> 
> 20> 预定义的 C++ 类型（编译器内部）(19)：参见“size_t”的声明
> 
> 20>C:\Users\melol\Desktop\local\march03\src\thirdparty\Microsoft SDKs\Windows\v6.0\include\winnt.h(81)：致命错误 C1189：#error：“无目标架构”

有问题的 exe 是一个带有 wWinMain 的 Windows 命令行实用程序。仅有的两个#include 是

```
#include <windows.h>
#include <iostream> 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:54:46.537

您绝对可以在 Visual Studio 2008 中构建 32/64 位（反之亦然）。

完成任务的最简单方法似乎是使用“批量构建”：http: [//msdn.microsoft.com/en-us/library/169az28z (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/169az28z(v=vs.90).aspx)

> 使用此对话框一次构建多个项目配置。例如，您可以决定使用一个命令构建项目的每个项目配置。您可以从 Build 菜单访问此对话框。

# web-services - Websphere 7 未检测到 Jax-ws 客户端

> ID：15661886
> 
> 赞同：1
> 
> 时间：2013-03-27T14:50:02.193
> 
> 标签：web-services, jax-ws, websphere-7, ws-security

我们有一个由提供者生成的客户端 jax-ws jar。

当我将 jar 放入战争中（然后将战争放入耳朵中）并将客户端部署到 RTC 内的 websphere 中时，服务器未检测到该 jar。

如果我登录控制台并寻找 web 服务客户端，我什么都没有：

![在此处输入图像描述](../Images/ad5fe6caa0409dbb61233e15ea140c34.png)

所以我无法为客户端配置安全策略，当我调用服务时，我收到以下错误

```
 javax.xml.ws.soap.SOAPFaultException: security.wssecurity.WSSContextImpl.s02: com.ibm.websphere.security.WSSecurityException: Exception org.apache.axis2.AxisFault: CWWSS6500E: Il n'existe pas de candidat d'identité d'appelant pouvant être utilisé pour la connexion. ocurred while running action: com.ibm.ws.wssecurity.handler.WSSecurityConsumerHandler$1@4f904f9
    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1310)
    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1036)
    at org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:583)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.getFaultResponse(JAXWSProxyHandler.java:529)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.createResponse(JAXWSProxyHandler.java:470)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:377)
    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:185) 
```

你能帮助我吗？？

# mysql - Mysqldump 拆分表转储到较小的文件中

> ID：15661887
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:04.367
> 
> 标签：mysql, mysqldump

使用 mysqldump，我可以将我的数据库和表转储到单独的文件中。

我的问题是，mysqldump 中有没有办法将这些表文件分成更小的部分？

所以不是一个 10GB 的 .sql 文件，我会为同一张表获得十个 1GB 的 .sql 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:08:06.090

您可以使用 MySQL Dump 从查询中获取数据，但是当您需要将数据拆分为特定大小的块时，我总是发现这很难管理。

由于您需要 1Gb 文件，因此我将表拆分为 1Gb 段。

我已经使用`INTO OUTFILE`了，但是在这个阶段也可以使用 MySQL 转储

```
SELECT * FROM table
ORDER BY adminid ASC
INTO OUTFILE 'c:/table.csv'
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY 
```

如果您使用的是 Windows，这确实缺少一个好的拆分实用程序，所以我建议使用 GNU Core Utilities 捆绑包[http://gnuwin32.sourceforge.net/packages/coreutils.htm](http://gnuwin32.sourceforge.net/packages/coreutils.htm)

安装后可以`split`在命令提示符下使用

```
cd C:\Program Files (x86)\GnuWin32\bin
split -C 1024m -d c:\table.csv c:\table.part_ 
```

如果您使用的是 Linux，那么您已经可以访问一个好的拆分工具。

如果你导出它们，你可能想在某个时候再次导入它们——这就是行尾的 .part_ 很重要的地方，因为 mysqlimport 试图找出要导入到的表名，. 可用于拆分表，但允许将多个文件导入到同一个数据库表中。

然后可以使用这些导入

```
mysqlimport --local --compress --user=username --password=password --host=dbserver.host --fields-terminated-by=, --fields-optionally-enclosed-by="\"" --lines-terminated-by="\n" databasename c:\table.csv 
```

`--local`需要，否则 mysqlimport 想要在远程主机上查找文件

`--compress`非常重要，因为它可以节省大量带宽

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T12:39:17.083

您可以将 @jason 完整转储拆分为表和数据库。您可以使用[mysql-dump-splitter](http://kedar.nitty-witty.com/blog/mydumpsplitter-extract-tables-from-mysql-dump-shell-script)提取您选择的表/数据库。此外，在转储过程中，您可以使用如下过滤器：

```
Dump all data for 2015:
mysqldump --all-databases --where= "DATEFIELD >= '2014-01-01' and DATEFIELD < '2015-01-01' " | gzip > ALLDUMP.2015.sql.gz 
```

前提是您应该在所有表中都有 DATEFIELD 列！或者，您也可以指定 ID 列以限制转储仅提取指定范围的 ID。

# javascript - Breeze.js - 在保存实体之前更改服务器上实体的属性值

> ID：15661891
> 
> 赞同：2
> 
> 时间：2013-03-27T14:50:20.180
> 
> 标签：javascript, breeze

我的问题是：

在 Breeze.js 中，是否可以在保存该实体之前更改/设置服务器上实体的属性值？

例如，假设有一个名为**Product**的实体并且该实体有一个名为**Price**的属性，我希望在服务器中并在保存实体之前，将**Price**值乘以一个常数。

看看[这里](https://stackoverflow.com/questions/14913498/how-do-i-inspect-change-set-data-on-the-server-before-saving-it)和[这里](http://www.breezejs.com/documentation/custom-efcontextprovider#SaveInterception)，我尝试使用以下方法：`BeforeSaveEntity(entityInfo)`, `BeforeSaveEntities(saveMap)`, `SaveChangesCore(saveMap)`。

在[源代码](https://github.com/IdeaBlade/Breeze/blob/master/Breeze.WebApi/ContextProvider.cs)中，我理解`BeforeSaveEntity(entityInfo)`并`BeforeSaveEntities(saveMap)`仅用于验证实体。这不是我要找的。

在[此处](https://github.com/IdeaBlade/Breeze/blob/master/Breeze.WebApi/EFContextProvider.cs)`SaveChangesCore(saveMap)`描述的带有源代码的方法中，我认为这里是更改实体属性值的地方。

所以我尝试了以下方法，但没有奏效。数据库中的值未更新

```
protected override List<KeyMapping> SaveChangesCore(Dictionary<Type, List<EntityInfo>> saveMap)
        {
            foreach (var entity in saveMap[typeof(Product)])
            {
                var product = (Product)entity.Entity;

                product.Price =  product.Price * 10; // changing the value of the property    

            }

            return base.SaveChangesCore(saveMap);    
        } 
```

提前致谢，

贝尔纳多·帕切科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:37:24.067

您可以在您的 dbcontext 类中执行此操作。您可以覆盖 SaveChanges 方法并执行以下操作：

```
public override int SaveChanges() {
    foreach ( var entry in this.ChangeTracker.Entries()
            .Where( e => e.State ==EntityState.Added ) ){
        var entity=entry.Entity as Product;
        if(entity!=null){
            entity.Price =  entity.Price * 10;
        }
    }
    return base.SaveChanges();
} 
```

我假设您正在使用实体框架。

我认为这篇文章也与您的问题有关：

[Breeze BeforeSaveEntityonly 只允许更新添加的实体](https://stackoverflow.com/questions/15146964/breeze-beforesaveentityonly-only-allows-update-to-added-entities)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T19:10:52.000

我们有类似的测试可以做到这一点，所以我不确定发生了什么，但我确实有一些建议。第一次改变

```
foreach (var entity in saveMap[typeof(Product)]) {
   ... 
} 
```

到

```
List<EntityInfo> entities;
if (saveMap.TryGetValue(typeof(Product), out entities)) {
   foreach (var entity in entities) { 
      ...
   }
} 
```

这样做的原因是 saveMap 是一个 .NET 字典，如果找不到键，则在使用索引器 ( saveMap[typeof(Product)]) 时将抛出 KeyNotFoundException。并且在很多情况下，saveMap 不包含特定的 entityType。

此外，这可能只是一个错字，但您覆盖的方法的返回类型应该是 Dictionary< Type, List< EntityInfo>> 而不是 List< EntityInfo>。

我还将进入您的代码并确保它以您期望的方式执行。您的代码可能会抛出异常，并且在传播到您的 UI 之前就被吃掉了。

# c# - 在 Windows 8 XAML 中使用共享魅力共享签名？

> ID：15661892
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:20.837
> 
> 标签：c#, xaml, canvas, windows-8, windows-runtime

我正在尝试创建一个示例，用户可以在其中使用基于触摸的设备或鼠标进行签名。也许我们可以使用画布。但现在我们需要通过分享魅力发送这个标志。如何捕获该标志并将其作为共享电子邮件附件发送？

我没有写任何代码。如果我能在任何地方获得任何示例来写下此功能或任何其他帮助，请指导我。

现在我已经编写了一些代码，但是如何将 IRandomAccessStream 转换为 RandomAccessStreamReference。我需要 RandomAccessStreamReference 作为 SetBitmap 选项，而共享需要 RandomAccessStreamReference。那么我可以将 IRandomAccessStream 更改为 RandomAccessStreamReference。这是代码：

```
IRandomAccessStream signatureStream = null;
            StorageFile myMerge = await ApplicationData.Current.LocalFolder.CreateFileAsync("sign.png");
            IOutputStream signature = await myMerge.OpenAsync(FileAccessMode.ReadWrite);

            if (signature != null)
            {
                await _inkManager.SaveAsync(signature);
                signatureStream = await myMerge.OpenReadAsync();
            }

            return signatureStream; 
```

谢谢我得到它使用 RandomAccessStreamReference.CreateFromStream。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:12:41.730

现在有办法将图像作为电子邮件附件共享，而不是简单地与其他应用程序共享图像，这些应用程序可能是也可能不是邮件。您需要将签名另存为图像并共享。我相信有很多使用分享魅力的示例。至于渲染图像 - 它涉及更多，您可能应该使用 Direct2D 或一些包装器，如 SharpDX 或 WinRT XAML 工具包的 WriteableBitmap.Render() 实现。如果您不太关心质量或性能 - 您也可以尝试像 WriteableBitmapEx 这样的东西 - 它可能更简单并且仍然适用于您的场景。

# java - ViewPager 和 Fragment onClickListener 无法正常工作

> ID：15661895
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:24.837
> 
> 标签：java, android, onclick, android-viewpager, onclicklistener

我很绝望。我试图`onClickListener`在 Fragment 类中添加一个。这个想法是我有一个`ViewPager`图像。我想要的只是单击图像本身并让它显示吐司消息。我知道您不能将 an 注册`OnClickListener`到`ViewPager`自身，因此我尝试将其添加`Fragment`到处理`ImageView`. 现在发生的情况是，该`onClick`方法有效，如果我单击其中一个图像，它会显示一条消息，但它会继续显示我使用的 DEFAULT 开关盒。我这辈子都无法理解为什么......！:( 这是代码，也许您可​​以看到解决方案？

谢谢。

主要活动：

```
package com.example.viewpagerexample;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends FragmentActivity{

private static final int NUM_PAGES = 5;

private MyAdapter mAdapter;
private ViewPager mPager;

private Button leftBTN;
private Button rightBTN;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mAdapter = new MyAdapter(getSupportFragmentManager());
    mPager = (ViewPager) findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    leftBTN = (Button)findViewById(R.id.leftBTN);
    leftBTN.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mPager.setCurrentItem(mPager.getCurrentItem()-1, true);
        }
    });

    rightBTN = (Button)findViewById(R.id.rightBTN);
    rightBTN.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mPager.setCurrentItem(mPager.getCurrentItem()+1, true);
        }
    });
}

public static class MyAdapter extends FragmentPagerAdapter {

    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_PAGES;
    }

    @Override
    public Fragment getItem(int position) {
        ImageFragment myFragment = new ImageFragment();
        Bundle data = new Bundle();
        data.putInt("current_page", position);
        myFragment.setArguments(data);
        return myFragment;
    }
}
} 
```

这是带有 OnClickListener 实现的 Fragment 类：

```
package com.example.viewpagerexample;

import com.example.viewpagerexample.R;

import android.annotation.SuppressLint;  
import android.media.MediaPlayer;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.webkit.WebView.FindListener;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageFragment extends Fragment implements OnClickListener{

private int position;
private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle data = getArguments();
    position = data.getInt("current_page", 0);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.image_details, container, false);
    imageView = (ImageView) view.findViewById(R.id.imageView1);
    imageView.setOnClickListener(this);

    switch (position) {
    case 0:
        imageView.setImageResource(R.drawable.splash);
        return view;
    case 1:
        imageView.setImageResource(R.drawable.girrafe);
        return view;
    case 2:
        imageView.setImageResource(R.drawable.lion);
        return view;
    case 3:
        imageView.setImageResource(R.drawable.monkey);
        return view;
    case 4:
        imageView.setImageResource(R.drawable.chicken);
        return view;
    default:
        return null;
    }
}

@Override
public void onClick(View v) {
    switch (v.getId()){
    case R.drawable.splash:
        Log.d("DEBUG", "image 0 pressed");
    Toast.makeText(getActivity(), "Pic 1", Toast.LENGTH_SHORT).show();
        return;
    case R.drawable.girrafe:
        Log.d("DEBUG", "image 1 pressed");
        Toast.makeText(getActivity(), "Pic 2", Toast.LENGTH_SHORT).show();
        return;
    case R.drawable.lion:
        Log.d("DEBUG", "image 2 pressed");
        Toast.makeText(getActivity(), "Pic 3", Toast.LENGTH_SHORT).show();
        return;
    case R.drawable.monkey:
        Log.d("DEBUG", "image 3 pressed");
        Toast.makeText(getActivity(), "Pic 4", Toast.LENGTH_SHORT).show();
        return;
    case R.drawable.chicken:
        Log.d("DEBUG", "image 4 pressed");
        Toast.makeText(getActivity(), "Pic 5", Toast.LENGTH_SHORT).show();
        return;
    default:
        Log.d("DEBUG", "v.getId(): " + v.getId());
        Log.d("DEBUG", "default pressed");
        Toast.makeText(getActivity(), "DEFAULT pressed!", Toast.LENGTH_SHORT).show();
        return;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:13:17.930

我认为在您的 onclick 方法中，`v.getId()`（单击视图的 id）总是返回 R.id.imageView1，这就是为什么您总是在 onClick 中获得默认开关盒的原因。

您将 onClickListener 设置为您的 imageView，但是您忘记更改 imageview 的 id，因此 id 仍然是 R.id.imageView1 并且您的侦听器无法正确处理它。

尝试像这样编辑 onCreateView 方法的 switch 语句：

```
switch (position) {
case 0:
    imageView.setImageResource(R.drawable.splash);
    imageView.setId(R.drawable.splash);
    return view;
case 1:
    imageView.setImageResource(R.drawable.girrafe);
    imageView.setId(R.drawable.girrafe);
    return view;
case 2:
    imageView.setImageResource(R.drawable.lion);
    imageView.setId(R.drawable.lion);
    return view;
case 3:
    imageView.setImageResource(R.drawable.monkey);
    imageView.setId(R.drawable.monkey);
    return view;
case 4:
    imageView.setImageResource(R.drawable.chicken);
    imageView.setId(R.drawable.chicken);
    return view;
default:
    return null;
} 
```

# ios - UISegmentedControl 错误的dividerImage

> ID：15661898
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:33.540
> 
> 标签：ios, uiview, uiimage, uisegmentedcontrol

我正在使用以下代码在我的应用程序中自定义所有分段控件。最初我将选定的段设置为索引 2。

在 IOS 6 中一切正常。当我在 IOS5 上测试应用程序时，我意识到分段控制的初始设置有一个错误。选中和未选中状态之间的分离图像设置不正确。因此它看起来像这样。

如果我通过点击 segmentedcontrol 来更改选定的段，则行为正常。这很奇怪。我还应该做些什么来防止这种奇怪的行为？

![初始设定](../Images/94dbb3b59934c61e86408db49bc5e49b.png)

```
 UISegmentedControl *localSegmentedControl = [[UISegmentedControl alloc] init];

     if ([localSegmentedControl respondsToSelector:@selector(setBackgroundImage:forState:barMetrics:)]) {

    UIImage *segmentUnselectedSelectedDivider       = [UIImage imageNamed:@"segmentedControlSeperatorNS.png"];
    UIImage *segmentSelectedUnselectedDivider       = [UIImage imageNamed:@"segmentedControlSeperatorSN.png"];
    UIImage *segmentUnselectedUnselectedDivider     = [UIImage imageNamed:@"segmentedControlSeperatorNN.png"];

    UIImage *segmentUnselected = [[UIImage imageNamed:@"barButtonPlain.png"] stretchableImageWithLeftCapWidth:7 topCapHeight:0];
    UIImage *segmentSelected = [[UIImage imageNamed:@"doneButton.png"] stretchableImageWithLeftCapWidth:7 topCapHeight:0];

    [[UISegmentedControl appearance] setBackgroundImage:segmentUnselected
                                               forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setBackgroundImage:segmentSelected
                                               forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

    [[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselectedDivider
                                 forLeftSegmentState:UIControlStateNormal
                                   rightSegmentState:UIControlStateNormal
                                          barMetrics:UIBarMetricsDefault];

    [[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselectedDivider
                                 forLeftSegmentState:UIControlStateSelected
                                   rightSegmentState:UIControlStateNormal
                                          barMetrics:UIBarMetricsDefault];

    [[UISegmentedControl appearance] setDividerImage:segmentUnselectedSelectedDivider
                                 forLeftSegmentState:UIControlStateNormal
                                   rightSegmentState:UIControlStateSelected
                                          barMetrics:UIBarMetricsDefault];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:17:02.543

[在尝试了在 iOS 5 中自定义 UISegmentedControl 中](https://stackoverflow.com/questions/9114186/customizing-uisegmentedcontrol-in-ios-5)解释的所有相关方法之后

我发现问题与分隔线的宽度有关[。http:](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5) //www.raywenderlich.com/4344/user-interface-customization-in-ios-5 中有关分段控件自定义的教程假设分隔线图像宽于 2px（在 Retina 中）。我把它们做成了 2px 宽，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:02:23.027

我认为这是一个已知的错误。这与解决方法相同，可能对您有用。

[在 iOS 5 中自定义 UISegmentedControl](https://stackoverflow.com/questions/9114186/customizing-uisegmentedcontrol-in-ios-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:08:54.503

当我使用段控制时，我很累同样的问题。我解决了那个代码

```
 UIImage *segmentSelected =
[[UIImage imageNamed:@"ikisiSecildiKirmizi.png"]
 resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 5, 15)];
UIImage *segmentUnselected =
[[UIImage imageNamed:@"ikisiSecilmediGri.png"]
 resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 5, 15)];
UIImage *segmentSelectedUnselected =
[[UIImage imageNamed:@"solSecili.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 5, 15)];
UIImage *segUnselectedSelected =
[[UIImage imageNamed:@"sagSecili.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 5, 15)];

UIImage *segmentUnselectedUnselected =
[[UIImage imageNamed:@"ikisideSecilmemis.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 5, 15)];

[fiyatSaat setBackgroundImage:segmentUnselected
                     forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[fiyatSaat setBackgroundImage:segmentSelected
                     forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[fiyatSaat setDividerImage:segmentUnselectedUnselected
       forLeftSegmentState:UIControlStateNormal
         rightSegmentState:UIControlStateNormal
                barMetrics:UIBarMetricsDefault];

[fiyatSaat setDividerImage:segmentSelectedUnselected
       forLeftSegmentState:UIControlStateSelected
         rightSegmentState:UIControlStateNormal
                barMetrics:UIBarMetricsDefault];

[fiyatSaat setDividerImage:segUnselectedSelected
       forLeftSegmentState:UIControlStateNormal
         rightSegmentState:UIControlStateSelected
                barMetrics:UIBarMetricsDefault];

NSDictionary *attributes = [NSDictionary dictionaryWithObject:[UIColor blackColor]
                                                       forKey:UITextAttributeTextColor];
[fiyatSaat setTitleTextAttributes:attributes
                         forState:UIControlStateNormal];
NSDictionary *attributes2 = [NSDictionary dictionaryWithObject:[UIColor whiteColor]
                                                       forKey:UITextAttributeTextColor];
[fiyatSaat setTitleTextAttributes:attributes2
                         forState:UIControlStateHighlighted]; 
```

# .net - 表单的新实例覆盖现有表单变量声明

> ID：15661899
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:33.883
> 
> 标签：.net, vb.net, winforms, instance, dockpanel

我正在使用 Weifen Lous 的 Dock Panel Suite。在我的代码中，我正在为我的文本编辑器创建一个表单的新实例，我将它停靠在我的应用程序的主表单中。MDI亲子玩意。每次我重新初始化包含我的表单实例的变量时都会遇到问题。

**这是我的代码：**

```
Private Sub AddTabPage()

        Try

            Editor = New frmEditor
            Editor.Text = "New Tab"
            Editor.Show(dpMain, DockState.Document)

        Catch ex As Exception

            MessageBox.Show(ex.Message, "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)

        End Try

    End Sub 
```

如您所见，每次用户决定在我的文本编辑器上添加选项卡时，都会调用上面的代码。代码所做的是创建一个新的表单实例，该实例停靠在我的应用程序的主表单中。

**现在问题就在这里：**

```
Private Sub Editor_ColorToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Editor_ColorToolStripMenuItem.Click

    Dim CR As New ColorDialog
    CR.ShowDialog()
    CType(Editor.rtbCode, RichTextBox).SelectionColor = CR.Color

End Sub 
```

在上面的工具条菜单项中，我正在调用我使用`AddTabPage`子例程创建的表单变量：( `CType(Editor...`)。如果只有一个表单，这可以正常工作。但是当我尝试添加另一个标签时；即再次调用`AddTabPage`重新初始化`Editor`表单变量的方法，我无法再更改写在先前创建的选项卡/表单（第一个选项卡/表单）上的文本的颜色。我相信会发生这种情况，因为`Editor`每次添加表单时都会重新初始化。先前创建的选项卡/表单正在丢失其数据/控件（第一个选项卡/表单）？我不确定，但会发生类似的事情。

现在，我想要实现的是，每次创建选项卡/表单时，我仍然能够更改我将创建的每个选项卡上所写文本的颜色。我将如何防止以前表单的数据/控件被覆盖/消失（对不起，我不知道要使用的正确术语。）

我可以通过声明预定义数量的表单变量然后使用 switch 语句来确定当前的焦点表单来解决这个问题。但我认为有更好的方法来做到这一点。我想在我的停靠面板中有无限的选项卡/表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:46:42.113

没关系。我解决了这个问题。

要访问我想要停靠的表单，我使用了以下代码：

```
dpMain.ActiveDocument.DockHandler.Form.Controls.Item(0) 
```

这样，我就不必明确使用`Editor`.

**编辑：**

`Item(0)``RichTextBox`是表格中 a 的索引。

# c# - 如何在 ASP.NET WebForms 中用用户控件替换字符串？

> ID：15661900
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:38.397
> 
> 标签：c#, asp.net, user-controls, webforms

我在数据库中有这样的 HTML 内容： `<div class='content'>This is the test text <cms:control name='test' /></div>`

我需要在页面上呈现此内容，但替换`<cms:control name='test' />`为相关的用户控件。

我无法将控件解析为字符串，因为它可能是一个复杂的 ajax 控件、验证器等。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:05:28.180

您可以加载您的用户控件：

```
<div id="loadedControls" runat="server">
</div> 
```

在页面加载中：

```
loadedControls.LoadControl("UserControllAddress"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:44:41.633

如果您必须这样做，我建议您使用 HTML 敏捷包来解析和呈现您的页面隐藏中的用户控件。

像这样的东西...

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(htmlFromDB);
var query = doc.DocumentNode.Decendants("cm:control");
foreach(var node in query)
{
   string userControlHTML = GetHTML(new MyUserControl());
   var newNode = HtmlNode.CreateNode(userControlHTML);
   node.ParentNode.ReplaceChild(newNode, node);
}
//render doc.DocumentNode.OuterHtml in literal control on your page
...

static public string GetHTML(Control myControl)
{
    System.IO.StringWriter sw = new System.IO.StringWriter();
    HtmlTextWriter myWriter = new HtmlTextWriter(sw);
    myControl.RenderControl(myWriter);
    return sw.ToString();
} 
```

如果您的控件太复杂而无法以这种方式进行，您可能应该重新考虑您的设计。

# ember.js - 始终从“索引”加载单个对象

> ID：15661902
> 
> 赞同：0
> 
> 时间：2013-03-27T14:50:42.153
> 
> 标签：ember.js, ember-data

使用 Ember-Data 和 RESTAdapter 的最新版本，有没有办法做到以下几点？

我有一个名为的资源`App`和一个 API，它`/apps`通过返回正确的 JSON（使用`{ apps: [...] }`等）来响应

由于这是从我们服务器上的静态 json 提供的，因此为每个可以获取为`/apps/:app_id`. 相反，最好总是加载 RESTAdapter *，*即使`/apps`它只使用获取的应用程序中的一个应用程序。

我必须编写自己的适配器来实现这一点吗？如果是，那么“挂钩”的好点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:35:58.467

假设您有一个应用程序模型`App.App`，它应该足以`App.App.find()`在您的应用程序加载时调用。这将使 AJAX 调用`/apps`. 即使您没有将结果缓存在变量中，您的数据存储也将填充返回的记录。现在，每当您调用时`App.App.find(id)`，Ember Data 都会检查您的商店并返回记录（如果有）。如果它没有记录，那么它将尝试调用`/apps/:id`，但如果您的应用程序设计为仅使用静态集合，则不应发生这种情况。

您可以在几个不同的地方`App.App.find()`拨打电话。我可能会把它放在`App.ready`：

```
App = Ember.Application.create({
  ready: function() {
    // pre-load apps
    App.App.find();
  }
});

App.App = DS.Model.extend({
  //...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:44:48.427

这似乎有点 hacky（并且可能是），但看起来可以通过覆盖`DS.Adapter:find()`.

就我而言，为了阻止对我的调用，`/app/:app_id`我写了这个：

```
find: function(store, type, id) {
    // Terminate calls for single app
    if (type === App.App) {
        // instead, load all apps and drop this request
        App.App.find();
        return;
    }
    // or continue as usual
    this._super(store, type, id);
 } 
```

这也适用于嵌入的层次结构：“总是”记录并且 Ember 认为它必须加载中间级别。只要确保在删除这样的请求时确定加载父级！

# c++ - 由于移动构造函数而删除的对象

> ID：15661906
> 
> 赞同：1
> 
> 时间：2013-03-27T14:51:00.060
> 
> 标签：c++, multithreading, c++11, move-constructor

我正在尝试创建一个在从串行端口读取的专用线程中运行的函数。但是我无法将连接传递给线程。我将代码简化为以下示例：

```
#include <thread>
#include <boost/asio.hpp>

template <typename Port>
void serial_read( Port& port) {}

int main()
{
  boost::asio::io_service serial_io;
  boost::asio::serial_port port( serial_io );
  port.open( "/dev/ttyUSB0" );

  std::thread s( serial_read<boost::asio::serial_port>, port );
  return 0;
} 
```

但是，我收到以下错误消息：

```
/usr/include/c++/4.7/tuple:128:25: error: use of deleted function ‘boost::asio::basic_serial_port<>::basic_serial_port(const boost::asio::basic_serial_port<>&)’
In file included from /usr/include/boost/asio.hpp:25:0,
                 from main.cpp:2:
/usr/include/boost/asio/basic_serial_port.hpp:47:7: note: ‘boost::asio::basic_serial_port<>::basic_serial_port(const boost::asio::basic_serial_port<>&)’ is implicitly declared as deleted because ‘boost::asio::basic_serial_port<>’ declares a move constructor or move assignment operator 
```

错误信息非常清楚。我正在尝试使用一个不存在的对象，因为它由于声明了移动构造函数而被删除。但我仍然不明白这里发生了什么以及如何正确地做到这一点。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:56:48.720

您没有正确阅读错误。它告诉你的*复制构造函数*`boost::asio::basic_serial_port`是d `delete`。这意味着无法使用复制构造函数。它与被删除的对象无关。复制构造函数是`delete`d 的原因是定义了移动构造函数。

如果您确实需要传递对 的引用`serial_read`，则需要将`port`对象包装在 a 中`reference_wrapper`：

```
std::thread s( serial_read<boost::asio::serial_port>, std::ref(port) ); 
```

但是，如果您不保留`port`并将其用于其他任何事情（例如将相同的`port`对象传递给其他线程），您应该`std::move`将您的`port`对象放入线程中：

```
std::thread s( serial_read<boost::asio::serial_port>, std::move(port) ); 
```

这还需要更改按值取值的`serial_read`定义`Port`：

```
template <typename Port>
void serial_read( Port port) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:57:41.253

简单的修复（我相信，未经测试）是使用引用包装器（如果你真的需要`main`在线程中和线程中维护对象）：

```
std::thread s(&serial_read<boost::asio::serial_port>,std::ref(port)); 
```

问题是`std::thread`（`std::bind`将创建一个带有参数副本的仿函数）稍后将被使用（没有参数）。基本上上面的调用类似于：

```
std::thread( std::bind(&serial_read<boost::asio::serial_port>,std::ref(port)) ); 
```

在*绑定*对象中存储了每个参数的副本，这要求参数是可复制构造的。引用包装器的使用允许复制（包装器被复制，原始对象不被复制）。

另一种选择是，如果您不需要维护`port`有效的对象`main`是从它移动，而不是*复制*到*绑定*的对象中，您允许实现*从*`main`.

# c++ - 在 C++ 中将文本文件读入 std::string 的单线器？

> ID：15661907
> 
> 赞同：1
> 
> 时间：2013-03-27T14:51:01.893
> 
> 标签：c++, string, file-io, ifstream, lines-of-code

是否有一种方法可以将（不是很大）文本文件的内容读入字符串？

我发现的最短的：

```
#include <string>
#include <fstream>
#include <streambuf>

std::ifstream t("file.txt");
std::string str((std::istreambuf_iterator<char>(t)),
                 std::istreambuf_iterator<char>()); 
```

（对于大文件，请注意这是一种效率极低的解决方案，因为它必须在从流中读取每个新字符后重新分配缓冲区。）

信用：@Tyler McHenry[将整个 ASCII 文件读入 C++ std::string](https://stackoverflow.com/questions/2602013/read-whole-ascii-file-into-c-stdstring)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:22:29.380

您可以在单个语句中执行此操作：

```
std::string str(std::istreambuf_iterator<char>(std::ifstream("file.txt").rdbuf()), std::istreambuf_iterator<char>()); 
```

这是否是单线取决于您的显示器有多大......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T15:02:18.883

> *请注意，它不适合大文件*

而不是*“不适合大文件”*，我宁愿说这是一种***效率极低***的解决方案，因为它必须在从流中读取新字符时反复重新分配缓冲区。

另请注意，在这种情况下，您的代码行数是您最不应该关注的指标之一。一旦你有了[`ifstream`](http://www.cplusplus.com/reference/fstream/ifstream/)对象（它的名字应该比 更有意义`t`），
你应该检查它的状态，它是否[`is_open()`](http://www.cplusplus.com/reference/fstream/ifstream/is_open/)以及更合理的读取方式似乎是这种方法：

```
// obtain the size of the input file stream:
file.seekg(0, std::ios::end);
std::streampos fileSize = file.tellg();
file.seekg(0, std::ios::beg);

// read the file into the string:
std::string fileData(fileSize);
file.read(&fileData[0], fileSize); 
```

*“更少的代码行”*并不总是意味着*“更好”*。

# actionmailer - Redmine actionmailer ssl 失败

> ID：15661912
> 
> 赞同：0
> 
> 时间：2013-03-27T14:51:13.360
> 
> 标签：actionmailer, redmine

我最近将 Redmine 从 2.2.x 升级到了 2.3.0。起初看起来升级顺利且成功，但我的经理注意到升级后她没有收到任何电子邮件。我尝试从电子邮件设置页面发送测试电子邮件并收到以下错误：

```
An error occurred while sending mail (uninitialized constant OpenSSL::SSL::VERIFY_OPENSSL) 
```

gem 来自我的 configuration.yml

```
default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: '192.168.10.211'
      port: 25
      domain: 'mydomain.com'
      openssl_verify_mode: OpenSSL::SSL::VERIFY_NONE 
```

我们有一个对内部网络开放的本地邮件中继，并且此配置在 Redmine 的先前版本中运行良好。我已经验证我可以到达服务器并且可以通过 telnet 发送电子邮件，因此中继正在接受来自服务器的电子邮件。问题似乎出在 Redmine / ruby​​ 中。

其他可能有用的细节：

```
Ruby 1.8.7
RubyGems 1.8.25
actionmailer (3.2.13, 3.2.11) 
```

*免责声明：我是一个 PHP 人，所以如果您需要更多信息，请告诉我，我会尝试追踪它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:19:29.350

[在尝试了一些配置设置并阅读了此问题](https://stackoverflow.com/questions/5021416/rails-3-actionmailer-error-hostname-was-not-match-with-the-server-certificate)后，我找到了解决问题的方法。

我最终得到了这个：

```
# default configuration options for all environments
default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: '192.168.10.211'
      port: 25
      domain: 'mydomain.com'
      enable_starttls_auto: false
      #openssl_verify_mode: 'none' 
```

从上面的配置中，我注释掉了 openssl_verify_mode 并将 enable_starttls_auto 设置为 false。这似乎让我重新振作起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T12:27:36.920

当我同时使用两者时，我的 `enable_starttls_auto: false`工作`openssl_verify_mode: 'none'`。

# memory - 32 位程序实际上在 64 位操作系统上使用更多内存吗？

> ID：15661916
> 
> 赞同：0
> 
> 时间：2013-03-27T14:51:24.780
> 
> 标签：memory, 64-bit, cpu

在 64 位 CPU 上执行 32 位程序时，我们是否可以假设底层硬件将使用内存和 CPU 寄存器中的 32 位值来存储整数？

鉴于这些设置：

*   Intel i5 + Windows 32 位 + 32 位应用程序
*   Intel i5 + Windows 64 位 + 32 位应用程序

请解释每种设置的缺点。使用第二个效率会降低，因为 CPU 需要额外的工作来忽略寄存器值的停止吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:21:39.517

当 x86_64 处理器执行 32 位代码时，它实际上是在 i686 模式下运行。这一切都是在硬件中实现的，因此没有性能损失。

无论操作系统是 32 位还是 64 位，用户空间 32 位程序都将以“32 位模式”执行，因此行为应该相同。

唯一的潜在缺点是程序可能需要动态链接到一些 32 位库，这些库默认情况下未安装在 64 位操作系统上。这种情况在 Linux 上更为常见，程序动态链接到外部库更为常见；我在 Windows 上能想到的唯一示例是，如果程序需要 Visual C++ 运行时库，那么您必须安装 32 位版本（如果其他程序需要，可能与 64 位版本一起安装）。所以简而言之，您可能需要安装更多 64 位设置的东西。

此外，实际操作系统在 64 位设置上可能会消耗更多内存，但是 32 位系统的一个缺点是您的整个系统内存大小限制为 4GB（或实际上大约 3.5 GB，因为一些内存空间被映射到硬件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:38:14.497

64 位知识库：[在 Win32 和 Win64 中应用程序可以访问多少内存？](http://www.viva64.com/en/k/0036/)

# java-native-interface - 使用输入和输出参数在 Java 中调用 c++ 函数

> ID：15661918
> 
> 赞同：0
> 
> 时间：2013-03-27T14:51:27.543
> 
> 标签：java-native-interface, swig, jna

我有一个 c++ 代码，它已被其他人连接到 Visual Basic 用户界面。这是将 c++ 连接到 Visual Basic 的函数代码之一：

```
 extern "C" void PASCAL EXPORT RCS( stAct* act,stResourceDirectory* resDir,   stCalendar* calendar, short  numOfAct, short numOfRes, short numOfCal, int nDataDate )
{
Network network;
short id;
Activity* p_act;
node<Activity>* p_node;

    // Setting
    network.create_calendars (calendar, numOfCal);
    network.set_data_date (nDataDate);
    set_activity(network, act, numOfAct );
// only for id, duration, and description   
    set_resource(network, act, resDir, numOfAct, numOfRes);
// create resource profile and add required resource for every activity

    network.CPM ();

    p_node = network.get_network_head_p();  

    while (p_node != NULL ) {
    p_act = p_node->refer_data();
    id = p_act->get_ID ();

    act[id].TF_in_CPM = p_act->get_TF_min ();
    act[id].FF_in_CPM = p_act->get_FF();
    act[id].EST_in_CPM = p_act->get_EST ();
    act[id].EFT_in_CPM = p_act->get_EFT ();
    act[id].LST_in_CPM = p_act->get_LST ();
    act[id].LFT_in_CPM = p_act->get_LFT ();
    p_node = p_node->get_link();
    }
    network.RCS();  
p_node = network.get_network_head_p();  

while (p_node != NULL ) {
    p_act = p_node->refer_data();
    id = p_act->get_ID ();

    act[id].TF_in_RCS = p_act->get_TF_min ();
    act[id].FF_in_RCS = p_act->get_FF();
    act[id].EST_in_RCS = p_act->get_EST ();
    act[id].EFT_in_RCS = p_act->get_EFT ();
    act[id].LST_in_RCS = p_act->get_LST ();
    act[id].LFT_in_RCS = p_act->get_LFT ();

    p_node = p_node->get_link();
    }
} 
```

我想用 Java GUI 替换 Visual Basic 部分，编写连接代码似乎让我感到困惑。有没有人可以帮助我调用三个 c++ 函数，通过 JNA/SWIG/Runtime 或您认为它会更容易和更好地工作的任何其他方法将参数传递给本机方法并从中接收结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:27:29.847

这是一个指导示例，可帮助您入门。在此代码段中，Java2Win64 是包含要执行的本机代码的 DLL。函数 functionMaryam() 将 1 个参数作为 int 并返回一个 int。易于扩展任何数据类型。公共类 JnaExampleMaryam {

```
// ------------------------------------------
// Java2Win.class
// ------------------------------------------
public interface Java2Win extends Library {
    Java2Win call = (Java2Win) Native.loadLibrary("Java2Win64", Java2Win.class);
    int functionMaryam(int i);
}
// ------------------------------------------

// ------------------------------------------
// Test
// ------------------------------------------
public static void main(final String args[]) throws Exception {
    final File file = new File("rootToDLL", "Java2Win64.dll");
    LibraryLoader.loadLibrary(file);

    int result = Java2Win.call.functionMaryam(42);
}
// ------------------------------------------ 
```

# asp.net-mvc - 将 powershell 脚本添加到 mvc 站点的 Web 部署包

> ID：15661924
> 
> 赞同：4
> 
> 时间：2013-03-27T14:51:40.090
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, web-deployment, microsoft-web-deploy

我即将使用 VS2012 中的 Web Deploy 实用程序部署 MVC4 站点。由于我无法直接连接到服务器，因此我正在生成一个“Web 部署包”发布配置文件，我使用 IIS > 导入包选项上传和部署该配置文件。

这一切正常，但有一个例外。我需要站点内的虚拟目录，该目录指向服务器中的另一个文件夹（上传移动数据的位置）。我可以毫无问题地创建这个虚拟目录，但是每次我使用新版本部署一个包时，虚拟目录都会被删除，我必须记住重新创建它。

我想要做的是自动化这个虚拟目录的创建过程，但我不知道如何实现它。我走得更远的是找到一个 PowerShell Cmdlet，它允许我创建一个新的虚拟目录[New-WebVirtualDirectory](http://technet.microsoft.com/en-us/library/ee790582.aspx)。

是否可以自定义包创建以在部署后运行此 cmdlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:53:58.673

您想要做的是添加一个新的 MSBuild 任务 AfterTargets='MSDeployPublish'。

为此，您需要编辑 csproj 文件并使用您的 powershell 任务添加一个新目标。

它可能看起来像这样：

```
<Target Name="PostPublishTarget" AfterTargets="MSDeployPublish">
   <Exec Command="$PowershellCmdHere"/>
</Target> 
```

在此处了解有关[在 MSBuild 中执行 powershell 的更多信息](https://stackoverflow.com/questions/78069/any-good-powershell-msbuild-tasks)

# php - XAMPP + PHP 到 Node.js

> ID：15661925
> 
> 赞同：2
> 
> 时间：2013-03-27T14:51:45.580
> 
> 标签：php, node.js

我计划将一个小型 PHP 代码库（少于 1000 行）转换为 Node.js。这是一个包含大约 50k 行 JS 的 Web 应用程序，所以我想我会将它移至 Node.js。（另外，PHP 糟透了。）我将在`node-static`包中提供一些静态文件（CSS、HTML 等）。我的问题是我的 PHP 文件不是静态的。

例如，我有一个在 GET 变量上运行的搜索页面。我添加`?keyword=blah`到 URL 的末尾，PHP 脚本搜索数据库并为浏览器输出 HTML。如何在 Node.js 中复制这种行为？（换句话说，我如何创建一个服务器来监听`localhost/search.html`并接受 URL 中的 GET 变量？）

我知道我可以改变搜索的方式来实现这一点，但我真的很想弄清楚如何复制这种行为，因为我有几个以相同方式运行的脚本。

编辑：至于数据库，我实际上使用的是 OrientDB。但我不直接连接到它，我使用一组 Java 服务，我将 JSON 请求发送到这些服务。所以真的，我需要做的就是发布一个 JSON 请求（同步）并输出 HTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:08:24.137

这是我的做法：

创建一个新的[ExpressJS](http://expressjs.com/)应用程序

```
"express myapp" 
```

安装所有依赖项

```
"cd myapp && npm install". 
```

在 app.js 中，确保在“ **var app** ”之前需要“url”包

```
var url = require('url'); 
```

向“app.js”添加一个新路由，以便它查找对“search.html”的任何 GET 请求

```
app.get('/search.html', function(req, res) {

    // Process the request for the GET variables
    var url_parts = url.parse(req.url, true);
    var query = url_parts.query; // These are all your GET variables
    var search_keyword = query.keyword;

    if(search_keyword) {
        // The keyword indeed exists
        console.log(search_keyword);

    }
    res.end();
}); 
```

如果您运行应用程序并转到“search.html?keyword=haha”，您的控制台将输出“haha”。之后您可以使用关键字执行任何操作。

# delphi - Delphi如何更快地搜索二进制文件？

> ID：15661929
> 
> 赞同：4
> 
> 时间：2013-03-27T14:51:51.827
> 
> 标签：delphi, delphi-7, binaryfiles

我有一个二进制文件（2.5 MB），我想找到这个字节序列的位置：CD 09 D9 F5。然后我想在这个位置之后写一些数据，并用零覆盖旧数据（4 KB）。

这是我现在的做法，但有点慢。

```
ProcessFile(dataToWrite: string);
var
  fileContent: string;
  f: file of char;
  c: char;
  n, i, startIndex, endIndex: integer;
begin
  AssignFile(f, 'file.bin');
  reset(f);
  n := FileSize(f);
  while n > 0 do
  begin
    Read(f, c);
    fileContent := fileContent + c;
    dec(n);
  end;
  CloseFile(f);

  startindex := Pos(Char($CD)+Char($09)+Char($D9)+Char($F5), fileContent) + 4;
  endIndex := startIndex + 4088;

  Seek(f, startIndex);

  for i := 1 to length(dataToWrite) do
    Write(f, dataToWrite[i]);

  c := #0;
  while (i < endIndex) do
  begin
    Write(f, c); inc(i);
  end;

  CloseFile(f);
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:47:30.257

看到这个答案：[从delphi中的文件快速读/写](https://stackoverflow.com/questions/455790/fast-read-write-from-file-in-delphi)

一些选项是：

*   [内存映射文件](https://stackoverflow.com/a/456863/80901)
*   [文件流](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TFileStream)
*   [块读](https://stackoverflow.com/a/455795/80901)

要搜索文件缓冲区，请参阅[在流中查找给定字节序列开始位置的最佳方法](https://stackoverflow.com/questions/1471975/best-way-to-find-position-in-the-stream-where-given-byte-sequence-starts)- 一个答案提到了用于快速检测字节序列的[Boyer-Moore 算法。](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T18:14:45.820

您将整个文件读入字符串的代码非常浪费。Pascal I/O 使用缓冲，所以我不认为这是逐字节的方面。虽然一大读会更好。主要问题将是字符串连接和连接字符串所需的极端堆分配需求，一次一个字符。

我会这样做：

```
function LoadFileIntoString(const FileName: string): string;
var
  Stream: TFileStream;
begin
  Stream := TFileStream.Create(FileName, fmOpenRead);
  try
    SetLength(Result, Stream.Size);//one single heap allocation
    Stream.ReadBuffer(Pointer(Result)^, Length(Result));
  finally
    Stream.Free;
  end;
end; 
```

仅此一项就应该有很大的不同。在写入文件时，类似地使用字符串会快得多。我没有试图破译你的代码的写作部分。写入新数据和再次写入零块应该尽可能少地单独写入。

如果您发现需要在文件中读取或写入非常小的块，那么我为您提供我的缓冲文件流：[缓冲文件（用于更快的磁盘访问）](https://stackoverflow.com/questions/5639531/buffered-files-for-faster-disk-access/5639712#5639712)。

可以进一步优化代码以仅读取文件的一部分，并搜索直到找到目标。您也许可以避免以这种方式读取整个文件。但是，我怀疑这些变化会产生足够的影响。

# c# - 静态构造函数和私有构造函数有何不同？

> ID：15661934
> 
> 赞同：-3
> 
> 时间：2013-03-27T14:52:09.237
> 
> 标签：c#, .net, visual-studio-2010

静态构造函数和私有构造函数有何不同？

```
public class WorkstationDevicePresenter
{
    private WorkstationDevicePresenter()
    {}
} 
```

将它们留空有什么意义？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T15:12:11.797

> 将它们留空有什么意义？

制作“空白”构造函数的原因有很多。

您可能会创建一个空白构造函数，因为您希望在调试期间设置断点。

您可能会创建一个空白的静态构造函数，因为这样做会改变静态字段初始值设定项的语义。有关详细信息，请阅读[Jon 关于该主题的文章](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx)。

让我们离开静态构造函数并考虑空白实例构造函数。

激发空白构造函数的关键规则是：默认情况下，如果一个类型中没有构造函数，那么您将免费获得一个“空白”无参数公共构造函数。如果一个类型中有任何构造函数，那么您不会免费获得一个空白的无参数公共构造函数。

所以你想要一个空白构造函数的第一个明显原因是：我想要一个空白的无参数构造函数，但我已经制作了另一个 ctor，所以我不再免费获得一个。

第二个原因是您没有任何 ctor，并且您不想要一个空白的无参数*公共*构造函数。您可能需要一个空白的无参数私有、内部或受保护构造函数。如果这就是你想要的，那么你必须自己做一个。

特别是，将一个空的私有 ctor 作为唯一的 ctor 意味着无法通过类外部的构造函数实例化该类。如果您想使用工厂模式，这将非常有用。它还防止类外部的代码生成派生类，因为派生类必须能够调用构造函数。如果所有构造函数都是私有的，那么它们就不能派生。

我经常在工厂模式中使用这种变体：

```
public abstract class Thing
{
  private Thing() {}
  private class RedThing : Thing { ... }
  public static Thing GetRedThing() { return new RedThing(); }
} 
```

看，通过创建一个私有构造函数，我可以创建一个只能由*我的代码实例化并且只能由**我的代码*扩展的公共抽象类，因此我有一个很好的不变量：每次我看到一个类型的对象`Thing`，我就知道它在哪里来自。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:54:52.227

静态构造函数在类加​​载时发生一次，私有构造函数在被一些通常用于创建单例的公共静态方法或使用 Builder 模式调用时发生。没有理由有一个空白的私有构造函数（我知道）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:56:32.810

静态构造函数初始化类的静态部分，私有构造函数只能由类本身使用，例如用于创建类的单例对象。

```
public class MyClass {

    private static int staticitem;
    private int instanceitem;

    static MyClass(){
        staticitem = 0; //define value for staticitem
    }

    private MyClass() { //can only be called from within the class
       instanceitem = 0; //define value for instanceitem
    }

    public static MyClass GetMyClass() {
       MyClass m = new MyClass();
       return m;
    }    

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T14:56:53.190

空白的私有构造函数将使类不能被除自身之外的任何东西实例化。如果您没有这段代码，默认情况下编译器会创建一个空白的**公共**无参数构造函数。

创建静态实例时调用静态构造函数。

例如，您可以使用两者来创建单例模式。

检查以下代码：

```
public class Singleton
{
    public static Singleton Instance;
    static Singleton
    {
        Instance = new Singleton();
    }
    private Singleton()
    {
    }
}

public class SomeOtherClass
{
    public static Singleton CompileError = new Singleton();
    public static Singleton CompileOK = Singleton.Instance;
} 
```

# regex - freepascal 正则表达式替换

> ID：15661938
> 
> 赞同：3
> 
> 时间：2013-03-27T14:52:23.600
> 
> 标签：regex, replace, pascal, freepascal, lazarus

有没有一种简单的方法可以在 FreePascal/Lazarus 中进行 RegExp 替换？

四处打猎我可以看到我可以很容易地进行匹配，但我正在努力寻找功能来进行搜索和替换。

我想要达到的目标如下。

*   我有一个 XML 文件加载到 SynEdit 组件中。
*   XML 文件在开头有一个声明
*   DTD 保存在一个单独的文件中。
*   我不想将两者合并到一个文件中，但我确实想在编辑 XML 时对其进行验证。
*   我正在将 XML 读入一个字符串变量，并且我想在一个临时字符串变量中插入和 XML 内容之间的 DTD（以创建具有自包含 DTD 的兼容 XML），该变量可以被解析和验证。

所以基本上我有：

```
<?Line1?>
Line2
Line3 
```

我想进行 RegExp 类型搜索并替换 '<?Line1?>' 替换为 '<?Line1?>\n<![DTD\nINFO WOULD\nGO HERE\n!]' 给我：

```
<?Line1?>
<![DTD
INFO WOULD
GO HERE
!]
Line2
Line3 
```

例如在 PHP 中我会使用：

```
preg_replace('/(<\?.*\?>)/im','$1
<![DTD
INFO WOULD
GO HERE
!]',$sourcestring); 
```

但是对于 FreePascal / Lazarus 似乎没有一组等效的正则表达式函数 - 只是一个简单/基本的正则表达式匹配函数。

或者有没有使用正则表达式的更简单的方法 - 我不想假设声明总是在第 1 行的正确位置 - 只是为了使事情复杂化。

谢谢，

调频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T09:32:31.560

据我所知，PerlRegEx 单元与 Free Pascal 不兼容。但是您可以使用 Free Pascal 附带的 RegExpr 单元。

如果我理解正确，您需要替换替换。这是一个简单的示例，您可以根据自己的需要进行调整。

```
{$APPTYPE CONSOLE}
{$IFDEF FPC}{$MODE DELPHI}{$ENDIF}

uses
  regexpr;

var
  s: string;

begin
  s := 'My name is Bond.';

  s := ReplaceRegExpr(
    'My name is (\w+?)\.',
    s,
    'His name is $1.',
    TRUE // Use substitution
  );

  WriteLn(s); // His name is Bond.
  ReadLn;
end. 
```

# php - 未正确返回的 Mysql 工作日

> ID：15661942
> 
> 赞同：0
> 
> 时间：2013-03-27T14:52:45.030
> 
> 标签：php, mysql

我正在尝试针对一周中的特定日期进行过滤。

我的 php 代码包括类似

```
Select * from table_name where Weekday(DATE(project_surveydate)) = 0; 
```

如果我在 phpMyAdmin 中使用上述行，它将返回星期一的所有记录的正确记录。

但是，当我通过我的 php 脚本运行该代码时，它会在周日返回一些记录。

project_surveydate 数据类型是时间戳。

我注意到它只返回 21:00:00 或更长时间的星期日。

例如，如果 project_surveydate 是 (Sunday) 2012-05-03 13:25:14，它将不包括在内。如果是 2012-05-03 21:25:14，它将包含在结果中。

我真的不知道这是什么原因造成的。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:02:59.803

看起来您的服务器时区正在影响结果。您可以基于每个连接设置时区：

```
SET time_zone = '+00:00'; 
```

MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，并从 UTC 转换回当前时区进行检索。您可以通过多种方式更改 mysql 的默认时区，此处记录：http: [//dev.mysql.com/doc/refman/5.1/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)

# java - Game of Life Gridworld NullPointer 运行时错误

> ID：15661948
> 
> 赞同：0
> 
> 时间：2013-03-27T14:54:36.007
> 
> 标签：java

尝试使用 Gridworld 制作康威的生命游戏。一切都可以编译，但是当我尝试采取“步骤”时，我不断收到错误消息

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Cell.processSurrondings(Cell.java:27)
at Cell.act(Cell.java:44)
at info.gridworld.actor.ActorWorld.step(ActorWorld.java:68)
at info.gridworld.gui.GUIController.step(GUIController.java:134)
at info.gridworld.gui.GUIController$4.actionPerformed(GUIController.java:247)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

以下是 lifeWorld 文件（actorWorld 的变体）

```
import info.gridworld.actor.Actor;
import info.gridworld.actor.ActorWorld;
import info.gridworld.grid.Location;
import info.gridworld.grid.UnboundedGrid;

import java.util.ArrayList;

public class lifeWorld extends ActorWorld {

    private static final String FIRST_LINE = "Welcome to Ern's Game of Life. (A rip off of Conway's Game of Life)\n" +
            "Click a live cell to kill it, a dead cell to resurect it, or run to run the cycles!";

    public lifeWorld() {
        setGrid(new UnboundedGrid<Actor>());
        System.setProperty("info.gridworld.gui.selection", "hide");
        System.setProperty("info.gridworld.gui.tooltips", "hide");
        System.setProperty("info.gridworld.gui.frametitle", "Ern's Game of Life");
    }

    private String setMessage() {
        return FIRST_LINE;
    }

    public boolean locationClicked(Location loc) {
        if (getGrid().get(loc) == null)
            new Cell().putSelfInGrid(getGrid(), loc);
        else
            getGrid().get(loc).removeSelfFromGrid();
        return true;
    }

} 
```

细胞（Critter 的变体）

```
import info.gridworld.actor.Actor;
import info.gridworld.grid.Location;

import java.awt.Color;

import java.util.ArrayList;

public class Cell extends Actor {

    private boolean planning;   
    private boolean dies;
    private ArrayList<Location> cellsToAdd;

    public Cell() {
        setColor(Color.BLACK);
        planning = true;
        dies = false;
    }

    private void processSurrondings(){
        ArrayList<Location> adjCells = getGrid().getOccupiedAdjacentLocations(getLocation());
        ArrayList<Location> cellsAdd = new ArrayList<Location>();
        if(adjCells.size() > 0)
            for(Location a: adjCells)
                if(getGrid().getOccupiedAdjacentLocations(a).size() == 3)
                    cellsToAdd.add(a); //The error happens here apparently
        ArrayList<Location> isDead = getGrid().getOccupiedAdjacentLocations(getLocation());
        dies = (!(isDead.size() == 2 || isDead.size() == 3));
    }

    private void executeStep() {
        for(Location a: cellsToAdd){
            Cell cell = new Cell();
            cell.putSelfInGrid(getGrid(),a);

        }
        if(dies)
            removeSelfFromGrid();
    }   

    public void act() {
        if (planning) {
            processSurrondings();
            planning = !(planning);
        }
        else
            this.executeStep();
    }   
} 
```

GameOfLifeRunner（跑步者/驱动程序文件）

```
import info.gridworld.actor.ActorWorld;
import info.gridworld.grid.UnboundedGrid;
import info.gridworld.actor.Actor;

public class GameOfLifeRunner {

    public static void main(String[] args) {
        lifeWorld world = new lifeWorld();
        world.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:02:21.333

`List` `cellsToAdd`你永远不会在类中初始化`Cell`：

```
private ArrayList<Location> cellsToAdd; 
```

导致`NPE`在这条线上抛出：

```
cellsToAdd.add(a); 
```

您可以在以下构造函数中执行此操作`Cell`：

```
public Cell() {
   cellsToAdd = new ArrayList<Location>();
   ... 
```

*旁白：* Java 中的首选方法是对接口进行编码。这允许`List`容易地与其他实现交换的实现。

```
private List<Location> cellsToAdd; 
```

[在这里](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)和[这里](https://stackoverflow.com/questions/1970806/coding-to-interfaces)查看更多

# ubuntu - 生成文件：foreach“make -C”调用

> ID：15661951
> 
> 赞同：2
> 
> 时间：2013-03-27T14:54:41.593
> 
> 标签：ubuntu, makefile, gnu-make

这是我的makefile的一部分：

```
PATH := $(shell pwd)
EDIR := impl
EFFECTS := $(filter-out $(EDIR), $(shell find $(EDIR) -maxdepth 1 -type d))
ALLMAKES := $(patsubst %, $(PATH)/%, $(EFFECTS))

all:
      $(foreach c,$(ALLMAKES),$(MAKE) -C $(c)) 
```

所以本质上，我想为“impl”目录中的所有目录调用make，而没有“impl”本身。我知道 make 会记住上次使用 -C 参数调用时所在的最后一个目录，这就是为什么我每次都给出绝对路径的原因。是什么让回声似乎是我想要的：

```
make -C <projectdir>/impl/thing1 make -C <projectdir>/impl/thing2 make -C <projectdir>/impl/thing3 
```

问题是 make 没有完成命令，只是打印：

```
make: make: Command not found. 
```

我可以在makefile之外为每个目录单独调用“make -C <path>”，但它在foreach调用中不起作用。我已经尝试过了，但它也不起作用：

```
$(foreach c,$(ALLMAKES),$(shell make -C $(c))) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T16:32:40.280

那是因为您正在调用单个`make`，其中包含许多参数，包括后续`make`命令。您需要在 make 的调用之间添加一个 shell 命令分隔符。像这样的东西会起作用：

```
all:
        $(foreach c,$(ALLMAKES),$(MAKE) -C $(c) && ) true 
```

再看一遍，您的 makefile 还存在其他问题。您不应该设置名为 的 make 变量`PATH`，因为这将覆盖子 shell 的`$PATH`变量。您可以只使用 make 内置变量`$(CURDIR)`而不是运行`$(shell pwd)`. 你实际上根本不需要在你的目录前面加上路径，因为运行`$(MAKE) -C ...`不会改变*shell的*工作目录，只是make的，当make退出时它会被设置回来，所以你可以只使用相对路径。

在循环中调用子制作也有一些问题。首先，您减少了可以获得的并行化数量。其次，`-k`无法正确支持该选项（没有很多不愉快的努力）。处理此问题的更好方法是利用 make 已经*知道*如何构建大量目标的事实：

```
all: $(EFFECTS)
$(EFFECTS):
        $(MAKE) -C $@
.PHONY: all $(EFFECTS) 
```

如果您在不同子目录之间有特定的排序问题，您也可以定义它们：

```
impl/thing2: impl/thing1 
```

等等。这确保了最大的并行化机会，同时仍然保留了重要的顺序。

要添加替代规则，例如 for `clean`，您可以执行以下操作：

```
CLEAN_EFFECTS := $(addsuffix .clean,$(EFFECTS))
clean: $(CLEAN_EFFECTS)
$(CLEAN_EFFECTS):
        $(MAKE) -C $(basename $@) clean
.PHONY: clean $(CLEAN_EFFECTS) 
```

这很好，因为您还可以通过运行来构建单个子目录（及其所有先决条件）`make impl/thing1`。或通过运行清理它们`make impl/thing1.clean`

如果您有更多这些，您还可以使用模式规则等，以避免对每种类型的目标重复此操作。它变得更加麻烦。

# sql - 按聚合 (ARRAY_AGG) 聚合？

> ID：15661952
> 
> 赞同：4
> 
> 时间：2013-03-27T14:54:44.807
> 
> 标签：sql, postgresql, postgresql-9.1

假设我有一个`agg_test`包含 3 列的简单表格-`id`和. 数据集，例如：`column_1``column_2`

```
id|column_1|column_2
--------------------
 1|       1|       1
 2|       1|       2
 3|       1|       3
 4|       1|       4
 5|       2|       1
 6|       3|       2
 7|       4|       3
 8|       4|       4
 9|       5|       3
10|       5|       4 
```

像这样的查询（使用自连接）：

```
SELECT
  a1.column_1,
  a2.column_1,
  ARRAY_AGG(DISTINCT a1.column_2 ORDER BY a1.column_2)
FROM agg_test a1
JOIN agg_test a2 ON a1.column_2 = a2.column_2 AND a1.column_1 <> a2.column_1
WHERE a1.column_1 = 1
GROUP BY a1.column_1, a2.column_1 
```

会产生这样的结果：

```
column_1|column_1|array_agg
---------------------------
       1|       2|      {1}
       1|       3|      {2}
       1|       4|    {3,4}
       1|       5|    {3,4} 
```

我们可以看到，对于连接表中的值 4 和 5，我们在最后一列有相同的结果。那么，是否有可能以某种方式对结果进行分组，例如：

```
column_1|column_1|array_agg
---------------------------
       1|     {2}|      {1}
       1|     {3}|      {2}
       1|   {4,5}|    {3,4} 
```

感谢您的任何回答。如果有任何不清楚的地方或可以以更好的方式呈现 - 请在评论中告诉我，我会尽量使这个问题更具可读性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:00:32.607

我不确定您是否可以按数组聚合。如果可以的话，这是一种方法：

```
select col1, array_agg(col2), ar
from (SELECT a1.column_1 as col1, a2.column_1 as col2,
             ARRAY_AGG(DISTINCT a1.column_2 ORDER BY a1.column_2) as ar
      FROM agg_test a1 JOIN
           agg_test a2
           ON a1.column_2 = a2.column_2 AND a1.column_1 <> a2.column_1
      WHERE a1.column_1 = 1
      GROUP BY a1.column_1, a2.column_1
     ) t
group by col1, ar 
```

另一种方法是使用`array_dims`将数组值转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:33:19.143

你也可以尝试这样的事情：

```
SELECT **DISTINCT**
  a1.column_1,
  **ARRAY_AGG(a2.column_1) OVER (
    PARTITION BY
      a1.column_1,
      ARRAY_AGG(DISTINCT a1.column_2 ORDER BY a1.column_2)
  ) AS "a2.column_1 agg"**,
  ARRAY_AGG(DISTINCT a1.column_2 ORDER BY a1.column_2)
FROM agg_test a1
JOIN agg_test a2 ON a1.column_2 = a2.column_2 AND a1.column_1  a2.column_1
WHERE a1.column_1 = 1
GROUP BY a1.column_1, a2.column_1
;
```

（突出显示的是与您在问题中发布的查询不同的部分。）

上面使用一个窗口`ARRAY_AGG`将 的值`a2.column_1`与另一个的值组合在一起`ARRAY_AGG`，使用后者的结果作为分区标准之一。如果没有`DISTINCT`，它将`{4,5}`为您的示例生成两行。因此，`DISTINCT`需要消除重复项。

这是一个 SQL Fiddle 演示：[http ://sqlfiddle.com/#!1/df5c3/4](http://sqlfiddle.com/#!1/df5c3/4)

但是请注意，该窗口`ARRAY_AGG`不能具有`ORDER BY`与其“正常”对应的窗口。这意味着`a2.column_1`列表中值的顺序将是不确定的，尽管在链接的演示中它确实与您预期输出中的值匹配。

# jquery - 在 jquery ui 小部件中选择事件处理程序

> ID：15661956
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:54:50.283
> 
> 标签：jquery, user-interface, widget

我有以下代码，其中在选择小部件下拉列表时我必须选择要选择的标签，但它的值已被选择....任何解决方法 plz..in firebug 我正确传递它可能是选择函数调用这使得一些事情错了......

```
_autoSelect: function (e, ui) {
            ui.item.label.selected = true;

            //Fires select event for entire widget
            this._trigger("select", e, {
                item: ui.item.label
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:03:04.383

当你有一个复选框/单选按钮时使用 jQuery：

```
 $('.yourClass').attr('checked')) {
        // your code to fire    
    } 
```

在事件处理上，您应该在单击您的类以检查它是否被检查然后触发您的代码时构建一个函数

# git - Jenkins git-client：如何在 Windows 上迁移到 jgit

> ID：15661959
> 
> 赞同：4
> 
> 时间：2013-03-27T14:54:53.853
> 
> 标签：git, jenkins, jgit

自从 Jenkins`git-client`插件转为使用`jgit`以来，配置方面出现了很多问题，我看到的所有解决方案都只是切换回使用旧的 git 命令行，因为现在大多数安装都有大部分的 hack 来制作它大部分时间都在工作。

我们在同一条船上，但是在 Windows 下 git 命令行仍然*很不*可靠。我们喜欢`jgit`在新的引擎盖下使用的想法`git-client`，并想看看它是否真的让事情变得更好。但我找不到关于如何迁移到`jgit`.

仅供参考，我已经知道 `-Dorg.jenkinsci.plugins.gitclient.Git.useCLI=false` 并且 `-Dorg.jenkinsci.plugins.gitclient.Git.useJGit=true` 我正在寻找的是如何为 ssh、电子邮件/用户信息等配置 jgit。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T12:18:04.557

等待更好的文档（比[用户指南](http://wiki.eclipse.org/JGit/User_Guide)和[论坛](http://www.eclipse.org/jgit/documentation/)更完整），我会依赖：

[`org.eclipse.jgit.test/tst/org/eclipse/jgit`](https://github.com/eclipse/jgit/tree/master/org.eclipse.jgit.test/tst/org/eclipse/jgit)：

你会发现*大量*的测试，说明应该如何使用 JGit。

*   例如，电子邮件是从以下配置文件中读取的[`tst.org.eclipse.jgit.lib.ConfigTest`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/lib/ConfigTest.java#L135-L206)：

    ```
    authorName = localConfig.get(UserConfig.KEY).getAuthorName();
    authorEmail = localConfig.get(UserConfig.KEY).getAuthorEmail(); 
    ```

*   作为另一个示例，SSH[读取其配置文件](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/transport/OpenSshConfigTest.java#L78-L79)，如图所示[`tst.org.eclipse.jgit.transport.OpenSshConfigTest`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit.test/tst/org/eclipse/jgit/transport/OpenSshConfigTest.java#L78-L79)

    ```
    config("Host orcz\n" + "\tHostName repo.or.cz\n" + "\tPort 2222\n"
      + "\tUser jex\n" + "\tIdentityFile .ssh/id_jex\n"
      + "\tForwardX11 no\n");
    final Host h = osc.lookup("orcz"); 
    ```

等等...

* * *

您还有最近的（2013 年 8 月）**[JGit 食谱](https://github.com/centic9/jgit-cookbook)**，由[centic](https://stackoverflow.com/users/411846/centic) ( [Dominik Stadler](https://github.com/centic9) )创建

### 抓住它

```
git clone git://github.com/centic9/jgit-cookbook 
```

### 构建它并创建 Eclipse 项目文件

```
mvn dependency:sources eclipse:eclipse package 
```

### 运行

> 将项目导入 Eclipse 工作区并在那里执行代码片段。

这本食谱已[更新到 JGit 3.0.3](https://github.com/centic9/jgit-cookbook/commit/97be4ab881639c81deda4cbc07baf0a47903eb4b)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:47:50.713

JGit 从 git 安装的系统范围的配置文件中获取一些设置`/etc/gitconfig`，但前提是它可以找到它。如果 git 在 PATH 中它会找到该文件，但您也可以将系统属性设置`jgit.gitprefix`为安装 git 的路径，即bin 目录*上方的目录的路径，.e。*`C:\Program Files\Git`

# javascript - JavaScript 正则表达式中的正斜杠是什么意思？

> ID：15661969
> 
> 赞同：42
> 
> 时间：2013-03-27T14:55:13.103
> 
> 标签：javascript, regex

我找不到任何关于`/`JavaScript 正则表达式含义的明确信息。

编码`replace(/\r/g, '');`

我能弄清楚的是：

*   `/` = 我不知道
*   `\r`=回车
*   `/g`= 我不知道，但这可能意味着“比赛必须发生在上一场比赛结束的地方。”

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-27T15:00:36.330

斜线表示正则表达式的开始和结束。

`g`末尾的 是一个标志，表示它是全局搜索。

从[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Regular_Expressions#Advanced_Searching_With_Flags)：

> 正则表达式有四个可选标志，允许进行全局和不区分大小写的搜索。要指示全局搜索，请使用 g 标志。要指示不区分大小写的搜索，请使用 i 标志。要指示多行搜索，请使用 m 标志。要执行从目标字符串的当前位置开始匹配的“粘性”搜索，请使用 y 标志。这些标志可以单独使用，也可以按任何顺序一起使用，并作为正则表达式的一部分。
> 
> 要在正则表达式中包含标志，请使用以下语法：

```
 var re = /pattern/flags; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-20T14:23:33.210

添加更多细节，这些`/`字符是 JavaScript/ECMAScript 中正则表达式[文字](https://en.wikipedia.org/wiki/Literal_(computer_programming))语法的一部分。[在词法分析](https://en.wikipedia.org/wiki/Lexical_analysis)期间使用这些`/`字符来确定它们之间是否存在正则表达式模式，并且紧随其后的任何内容都将是正则表达式标志。[ECMAScript 标准](http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5)在[EBNF](https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)中对此进行了定义，供您阅读：

> RegularExpressionLiteral :: / RegularExpressionBody / RegularExpressionFlags

`/`in 正则表达式的一个很好的类比是JavaScript 中围绕字符串文字的`"`or 。`'`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-27T15:01:41.053

正如其他人指出的那样，您应该阅读文档！那说：

将正斜杠视为正则表达式的引号。斜杠包含表达式，但它们本身不是表达式的一部分。（如果你想测试一个正斜杠，你必须用一个反斜杠转义它。）小写的 g 指定这是一个全局搜索，即找到所有匹配项而不是在第一个匹配项处停止。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-27T14:58:53.000

正如[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Regular_Expressions#Advanced_Searching_With_Flags)所指出的，正斜杠不是表达式本身的一部分，而是表示表达式的开头和结尾。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T15:01:20.613

要添加到 metadept 的答案：

g 位是全局指示符 - 请参阅[正则表达式 /_/g 是什么意思？](https://stackoverflow.com/questions/6052616/what-does-the-regular-expression-g-mean)- 即替换所有出现，而不仅仅是第一个

# php - 如何使用 PHP 对象重用内存

> ID：15661971
> 
> 赞同：2
> 
> 时间：2013-03-27T14:55:18.880
> 
> 标签：php, oop, memory

我有一段代码，它必须处理数百个对象（图像），但在第 77 个实例之后，它遇到了 128 MB 的内存限制并死掉了。

由返回对象的新实例的静态调用实例化的对象：

```
foreach($imags as $imageId)
{
    $image = IMP::getById($imageId);
    ...
    ...
} 
```

问题是，在每次循环迭代之后，内存永远不会被释放，如下所示，每个新的图像对象都会占用大量内存。

内存使用情况：

```
...
20971520
22282240
23855104
25427968
27000832
28573696
30408704
32243712
34078720
35913728
38010880
39845888
... 
```

任何想法如何重用对象内存空间？

# ruby-on-rails - Ruby on Rails：子域和自定义域的路由可能吗？

> ID：15661974
> 
> 赞同：2
> 
> 时间：2013-03-27T14:55:22.790
> 
> 标签：ruby-on-rails, ruby, routes

我正在寻找从他们的子域以及他们的自定义域路由用户的页面。例如，考虑三个域：

```
app.com
user1.app.com
user1.com 
```

访问者应该能够在应用域 (user1.app.com) 的子域以及用户的自定义域 (user1.com) 中看到用户的页面。也就是说，访问者在访问“app.com”的任何子域或不是“app.com”的根域时将访问用户页面。

我将如何设置路线来做到这一点？

也许类似于此伪代码的内容：

```
match "/", :to => "user_page#show", :constraints => { :subdomain => /.+/ OR :domain => NOT(app.com) } 
```

你怎么看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:04:10.887

使用[约束实用程序类或模块](http://guides.rubyonrails.org/routing.html#advanced-constraints)。

```
module DomainConstraint
  def self.matches? request
    request.subdomain.present? || request.domain != 'app.com'
  end
end

constraints DomainConstraint do
  # routing here
end 
```

如果您的约束仅适用于一条路线，您可以执行以下操作：

```
resources :foo, constraints: DomainConstraint 
```

注意：您的实用程序类也可以用一个简单的[lambda](http://apidock.com/rails/ActionDispatch/Routing/Mapper/Scoping/constraints)替换（请参阅“动态请求匹配”）

# java - 使用 java 将 xml 节点从另一个 xml 文件附加到现有 xml 文件

> ID：15661975
> 
> 赞同：0
> 
> 时间：2013-03-27T14:55:23.247
> 
> 标签：java, xml

我有两个 xml 文件，如下所示，我需要从一个 xml 读取一个节点并将该节点附加到另一个 xml 文件。

**xml文件：1**

```
<A>
  <B>
    <c>1<c/>
    <d>2<d/>
    <e>3<e/>
  </B>
</A> 
```

**xml文件：2**

```
<AA>
  <BB>
    <cc>1<cc/>
    <dd>2<dd/>
    <ee>3<ee/>
    <ff>
       <gg>4</gg>
    <ff>
  </BB>
</AA> 
```

**结果**

```
<A>
    <B>
      <BB>
        <cc>1<cc/>
        <dd>2<dd/>
        <ee>3<ee/>
        <ff>
           <gg>4</gg>
        <ff>
      </BB>
        <c>1<c/>
        <d>2<d/>
        <e>3<e/>
    </B>
</A> 
```

非常感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:16:37.057

要扩展 Lucas 上面的第一条评论，您可以尝试使用 SimpleXML 将两个 XML 文件读入内存，即“反序列化”。将 XML 读入内存对象的示例代码如下所示：

```
Serializer serializer = new Persister();
File source = new File("example.xml");

Example example = serializer.read(Example.class, source); 
```

然后，一旦将这两个结果组合成第三个对象，您还可以使用 SimpleXML 将第三个对象写入文件，即“序列化”。

使用内存数据编写 XML 文件的示例代码：

```
Serializer serializer = new Persister();
Example example = new Example("Example message", 123);
File result = new File("example.xml");

serializer.write(example, result); 
```

SimpleXML 有一个[很好的教程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)，可以通过添加[Maven 依赖](http://mvnrepository.com/artifact/org.simpleframework/simple-xml)项来导入。

花一点时间阅读本教程，它应该会让你朝着正确的方向前进。

# sql-server-2008 - 想要编写 T-SQL 代码以将文本文件中的单行插入 SQL Server 2008

> ID：15661978
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:55:29.107
> 
> 标签：sql-server-2008, tsql

我想编写一个可以读取文本文件并将数据插入 SQL Server 2008 数据库表的 Transact SQL 代码。我怎样才能做到这一点？文本文件以逗号分隔，只有 1 条记录。但我不想使用批量插入或任何其他自动方法。我想通过编码来做一些处理。

*   文本文件路径：`C:\fakepath\record.txt`

*   文本文件内容（仅 1 行） -`1,John,2000`

*   表名：`Employee`

*   结构 -`Id,Name,Salary`

你能帮我写下剧本吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:28:23.920

我过去在 05 上使用过这种方法。虽然你说你不想使用批量，但它很有效：[Reading a text file with SQL Server](https://stackoverflow.com/questions/2007857/reading-a-text-file-with-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:35:57.197

`BULK INSERT`应该是最简单的方法。

否则你可以试试`OPENROWSET`

```
 select 
      c1 
   from 
      OPENROWSET (BULK 'C:\fakepath\record.txt',SINGLE_CLOB) as T1(c1) 
```

# php - php，为什么我们不应该使用 get('var');

> ID：15661979
> 
> 赞同：1
> 
> 时间：2013-03-27T14:55:33.900
> 
> 标签：php, variables

我只是想知道，除了我们的代码清晰性之外，是否还有其他任何问题（例如安全问题等），为什么我们应该避免通过此代码获取类变量

```
 getVar('var'); 
```

代替：

```
 getId(); getName(); etc. etc. 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:00:20.157

我想一个原因是您的 IDE 可以通过自动完成和类型提示方法名称来帮助您。

如果您在第一个示例中使用通用 get 方法，IDE 将无法为您提供任何帮助。

此外，如果它是一个公共 API（即，除了您自己之外的开发人员将使用它），它确实会帮助他们拥有一个固定的接口来使用，而不是一个不会告诉他们可能的选项的单一 get 方法是为了它。

由于我们在这里专门讨论 PHP，因此值得指出的是，您所描述的功能与 PHP 的内置`__get()`方法非常相似。此方法与您描述的方式非常相似`getVar()`，但将变量公开为属性。

这也有与 IDE 类型提示类似的问题，但如果您使用体面的 IDE，则可以通过使用文档注释告诉 IDE 支持哪些属性来解决此问题。方法`getVar()`不会有这个选项。

# optimization - 改进 SharePoint 代码

> ID：15661983
> 
> 赞同：1
> 
> 时间：2013-03-27T14:55:40.913
> 
> 标签：optimization, sharepoint-2010

我必须在 SharePoint 中做一个计时器，咨询各种列表和工作流实例，应该改进代码吗？

我有很多if，foreach，我不知道我是否应该改变。

这是代码：

```
 if (DateTime.Now.DayOfWeek == DayOfWeek.Friday || DateTime.Now.DayOfWeek == DayOfWeek.Tuesday)
                {               

                    using (SPSite site = new SPSite(ConfigManagerHelper.GetSetting("siteUrl")))
                    {
                        using (SPWeb web = site.OpenWeb())
                        {
                            SPList list = web.Lists[ConfigManagerHelper.GetSetting("listName")];
                            SPListItemCollection items = list.Items;

                            foreach (SPListItem item in items)
                            {
                                string tipo = item.ContentType.Name;

                                if (tipo != CMIHelper.IndicadorEstrategico && tipo != CMIHelper.ObjetivoEstrategico && tipo != CMIHelper.ObjetivoOperativo)
                                {
                                    continue;
                                }

                                if (tipo.Equals(CMIHelper.ObjetivoEstrategico))
                                {
                                    foreach (SPWorkflow wf in item.Workflows)
                                    {
                                        if (wf.InternalState == SPWorkflowState.Running)
                                        {
                                            //Indicadores
                                            if (wf.ParentAssociation.BaseTemplate.Name == "WFCuadroMandos")
                                            {
                                                foreach (SPListItem indAux in web.Lists["IndicadoresAux"].Items)
                                                {
                                                    if (wf.InstanceId.ToString().Equals(indAux["APV_PE_WorkflowIdAux"].ToString()))
                                                    { 

                                                    }
                                                }
                                            }
                                            //Objetivos Estratégicos
                                            if (wf.ParentAssociation.BaseTemplate.Name == "WFCuadroMandosObjEstr")
                                            {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:22:55.557

首先，比“ifs”更好的是swich case，接下来你的一些代码可以对不存在的东西进行操作，添加

> 试着抓

```
SPListItemCollection items = list.Items;
foreach (SPListItem item in items) 
```

你用得很好

```
foreach (SPListItem item in list.Items) 
```

并检查一些“空值”:)

并改变它：

> Tipo != CMIHelper.IndicadorEstrategico && Tipo != CMIHelper.ObjetivoEstrategico && Tipo != CMIHelper.ObjetivoOperativo

进入 LINQ

# css - 仅使用 CSS 根据另一个元素的位置定位一个元素

> ID：15661984
> 
> 赞同：10
> 
> 时间：2013-03-27T14:55:40.997
> 
> 标签：css, positioning

我做了一个简单的方法来显示帮助文本，它看起来像一个仅使用 CSS 的弹出窗口。它工作得很好，除了默认情况下弹出窗口是左对齐的。我希望窗口更靠近图标本身，例如（在我的示例中）“left：360px;” 会显示。由于悬停图标的位置可能会改变，是否有人知道根据悬停图标的位置设置弹出窗口位置的方法？我们使用 jQuery 和 Prototype，但我更喜欢只使用 CSS，因此可以在任一类型的页面上使用相同的代码。谢谢。

这是我的例子：

编辑：这已经得到回答，但这是固定代码，以防其他人在将鼠标悬停在图标上时寻找一种简单的方法来显示弹出消息。此外，这是 jsfiddle.net 上的一个示例，因此您可以轻松尝试：http: [//jsfiddle.net/zDADW/](http://jsfiddle.net/zDADW/)

顺便说一句，如果有人知道为什么有人会将其排在第一位（在撰写本文时，有人单击了此问题的向下箭头），请告诉我。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
     <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Show help text when hovering using CSS</title>
          <style type="text/css">
               #help:hover  #help_popup {
                    /*If you hover over the help icon, show the help_popup span*/
                    display: block;
               }

               #help {
                    /*This is the part I was missing*/
                    position: relative;
                }

               #help_popup {
                    /*Normally, hide this span*/
                    display: none;
                    position: absolute;
                    width: 15em;
                    padding: 10px;
                    background: #CFF;
                    color: #000;
                    border: 3px solid;
                    text-align: center;
                    left: 10px;     /*this is still needed even if it's 0*/
               }
          </style>
     </head>
     <body>
        <div>
            This shows a popup window using CSS when you mouse over an image.
            <div>
                Hover over the question mark for a popup help window.
                <span id="help">
                    <img src="questionmark.png" alt="[?]"/> 
                    <span id="help_popup">
                          This is the normally hidden help text.
                        <br/>It only shows up when you hover over the question mark.
                    </span>
                </span>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:59:52.380

添加`#help { position: relative; }`到您的 CSS。这将允许绝对定位的元素计算它相对于`#help`元素的位置。进行此更改后，您可能会发现要*减少*该`left`属性。

**[jsFiddle 演示](http://jsfiddle.net/Ez6Ht/)**

# c# - 经典 ASP C# COM Microsoft VBScript 运行时错误

> ID：15661986
> 
> 赞同：2
> 
> 时间：2013-03-27T14:55:47.507
> 
> 标签：c#, com, asp-classic, vbscript

嗨经典 ASP 专家，

基本上，我是 Classic ASP 和 VBScript 的新手，在尝试将复杂类型的参数传递给 COM 方法时遇到了这个“VBScript 运行时错误：无效的过程调用或参数”（参见下面的屏幕截图）。在创建服务器对象并将字符串传递给 COM 方法时，任何传递复杂类型参数的尝试都是徒劳的。

请帮忙。

这是代码片段：

ClassicASPHome.asp 页面上的 VBScript（服务器端）：

```
<%
response.write("My first ASP script!")  

set co = Server.CreateObject("ClassicASPCOM.ComplexObject")

co.Message = "Messi"
co.Number = 100

Dim ccom
Set ccom = Server.CreateObject("ClassicASPCOM.ClassCOM")

response.Write(ccom.GetMessage("1234567890")) 
```

'---------------工作正常，直到这里

```
Dim ret 
```

' ---------------以下语句抛出错误

```
ret = ccom.PaymentDetails(co)

response.Write("Fine") 
```

代码片段（C#）：

```
// C# Code (ClassicASPCOM.dll) built with Strong Name and Registered for COM Interop:

// Executed the following in Visual Studio Command Prompt in bin\Release folder
// Regasm ClassicASPCOM.dll

// Regasm ClassicASPCOM.dll /codebase

// Regasm ClassicASPCOM.dll /tlb

// gacutil/i ClassicASPCOM.dll

using System;
using System.Runtime.InteropServices;

namespace ClassicASPCOM
{
    [ComVisibleAttribute(true)]
    [Guid("D355BC25-B85F-4476-8D38-582F92F7B6F4")]
    public interface IComplexObject
    {
        [DispId(2221)]
        int Number {get; set;}
        [DispId(2222)]
        string Message { get; set; }
        [DispId(2223)]
        DateTime Dtime { get; set; }
    }

    [ComVisibleAttribute(true)]
    [Guid("4E602191-8D09-458E-A0D0-A0A267696F78"),
    ClassInterface(ClassInterfaceType.None)]
    public class ComplexObject : IComplexObject
    {
        int Nmbr;
        public int Number
        {
            get
            {
                return Nmbr;
            }
            set
            {
                Nmbr = value;
            }
        }

        string Msg;
        public string Message
        {
            get
            {
                return Msg;
            }
            set
            {
                Msg = value;
            }
        }

        DateTime Dt;
        public DateTime Dtime
        {
            get
            {
                return Dt;
            }
            set
            {
                Dt = value;
            }
        }
    }

    [ComVisibleAttribute(true)]
    [Guid("4042FE79-8ACA-4E5D-9F14-2FF7C6AE8D88")]
    public interface IGetMessage
    {
        [DispId(2224)]
        string GetMessage(string Message);
        [DispId(2225)]
        string PaymentDetails(ComplexObject cObject);
    }

    [ComVisibleAttribute(true)]
    [Guid("9A133858-5893-4CA7-9048-345CD0FCF535"),
    ClassInterface(ClassInterfaceType.None)]
    public class ClassCOM : IGetMessage
    {
        public string GetMessage(string Message)
        {
            return "Your Message: " + Message;
        }

        public string PaymentDetails(ComplexObject cObject)
        {
            return " Message: " + cObject.Message + " Number: " + cObject.Number;
        }
    }  
} 
```

![在此处输入图像描述](../Images/2dd1cc6a0a0bcc6ac7fc7a89b28dbdd7.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:58:59.143

> [我在尝试将类型为 class 的参数传递给 COM 方法调用时遇到错误。

您没有将 class 类型的参数传递给 COM 方法调用。您传递的是 string `"co"`，而不是存储在 variable 中的对象引用`co`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:32:40.727

除了 Eric Lippert 的回答之外，我想知道为什么你有评论*“直到这里都可以正常工作”*，因为这部分：

```
set co = Server.CreateObject("ClassicASPCOM.ComplexObject") ' <- variable co is now an object
co = ""                ' <- variable co is now a string with value ""
co.Message = "Messi"   ' <- You should get an "Object required" error on this line
co.Number = 100 
```

# css - HTML中的多级水平/垂直“堆栈面板”

> ID：15661987
> 
> 赞同：1
> 
> 时间：2013-03-27T14:55:48.600
> 
> 标签：css, layout, html

我需要在 HTML 中呈现任意位的内容（表单元素、文本、图像）。布局方面，来自 XAML 的“堆栈面板”的概念与我正在寻找的很接近。有些内容我想垂直布局，有些是水平布局。所以，我希望 HTML 看起来像这样：

```
<div class="stack-vert">
    <div class="stack-vert">
        <div class="content">Vert 1</div>
        <div class="content">Vert 2</div>
    </div>
    <div class="stack-horz">
        <div class="content" style="width: 50px; height: 75px;">Horz 1</div>
        <div class="content" style="width: 50px; height: 50px;">Horz 2</div>
        <div class="content" style="width: 100px; height: 200px;">Horz 3</div>
        <div class="stack-vert">
            <div class="content">Horz 4, Vert 1</div>
            <div class="content">Horz 4, Vert 2</div>
        </div>
    </div>          
    <div class="stack-vert">
        <div class="content">Vert 3</div>
        <div class="content">Vert 4</div>
    </div>
</div> 
```

硬编码的宽度和高度只是用来模拟不同大小的内容。我的 CSS 正确地布置了水平、垂直的一级：

```
DIV.stack-vert
{
    border: solid thick red;
}

DIV.stack-horz
{
    border: solid thick blue;
}

DIV.content
{
    padding: 5px;
    background-color: grey;
    margin: 5px;

}

DIV.stack-horz DIV.content
{
    display: inline-block;
} 
```

此 HTML 和 CSS 呈现如下：

![在此处输入图像描述](../Images/f73798546302997b7413d0bdc8424d47.png)

如您所见，我希望实现的是“Horz 4，Vert 1”和“Horz 4，Vert 2”渲染到“Horz 3”的右侧，但在垂直堆栈中。但是，这并没有发生，因为 block 的 stack-vert 显示。

如何使用 HTML / CSS 实现“堆栈面板”，例如任意内容部分的布局，以及任意深度的容器？

注意：理想情况下，我想使用“原始”HTML / CSS 来解决这个问题，但我会考虑使用基于框架的解决方案，例如使用 jQuery。

编辑#1：@Aequanox 的答案很接近，但它不支持 IE 9。IE 9 支持是必不可少的，因为我的大多数用户都在那个浏览器上（它是一个内部应用程序）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:11:07.357

您可以通过这种方式更改 CSS

```
DIV.stack-vert
{
    border: solid thick red;
    overflow:hidden;
}

DIV.stack-horz
{
    border: solid thick blue;
    overflow:hidden;
}

DIV.content
{
    padding: 5px;
    background-color: grey;
    margin: 5px;

}

DIV.stack-horz > DIV.content
{
    float:left;
} 
```

在此处查看示例：http: [//jsfiddle.net/3e6AY/](http://jsfiddle.net/3e6AY/)

# java - 访问来自不同类的对象数组

> ID：15661995
> 
> 赞同：0
> 
> 时间：2013-03-27T14:56:11.373
> 
> 标签：java, arrays, inheritance

所以这就是问题所在。我有一个数组，里面有两类对象。作为超类的电子邮件和作为继承类的大学电子邮件。该数组的类型为电子邮件。我想从数组中打印出所有电子邮件类型的对象。或者基于由 UniversityEmail 类扩展的私有变量打印出 UniversityEmail 对象。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:02:34.380

尝试以下操作：

```
for (int i = 0; i < array.length; i++) {
  if (array[i] instanceof Email) && (!(array[i] instanceof UniversityEmail)) {
    //print your object 
  }  
} 
```

这只是从脑海中输入的，因此可能存在一些较小的问题。

# c++ - 获取堆上分配的块数以检测内存泄漏

> ID：15661996
> 
> 赞同：1
> 
> 时间：2013-03-27T14:56:12.883
> 
> 标签：c++, visual-studio, memory-leaks

是否有可用的函数可以获取当前在堆上分配的内存块数？它可以是 Windows/Visual Studio 特定的。

我想用它来检查函数是否泄漏内存，而不使用专用的分析器。我正在考虑这样的事情：

```
int before = AllocatedBlocksCount();
foo();
if (AllocatedBlocksCount() > before)
    printf("Memory leak!!!"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:32:08.317

有几种方法可以做到这一点（特定于 Microsoft Visual Studio 附带的 CRT。）

一种方法是在`_CrtMemCheckpoint()`您感兴趣的调用之前和之后使用该函数，然后将差异与`_CrtMemDifference()`.

```
_CrtMemState s1, s2, s3;

_CrtMemCheckpoint (&s1);
foo(); // Memory allocations take place here
_CrtMemCheckpoint (&s2);

if (_CrtMemDifference(&s3, &s1, &s2)) // Returns true if there's a difference
   _CrtMemDumpStatistics (&s3); 
```

您还可以`_CrtDoForAllClientObjects()`使用 Visual C++ CRT 的调试例程和其他几种方法枚举所有分配的块。

笔记：

*   所有这些都在`<crtdbg.h>`标题中。
*   它们显然只适用于 Windows 和使用 VC 编译时。
*   您需要设置 CRT 调试和一些标志和其他东西。
*   这些是相当棘手的功能。请务必仔细阅读 MSDN 的相关部分。
*   这些**仅**在调试模式下工作（即与调试 CRT 和`_DEBUG`定义的宏链接。）