# StackOverflow 问答 14118000-14118999

# java - 在接口和抽象类-Java中访问具有相同名称的值

> ID：14118000
> 
> 赞同：1
> 
> 时间：2013-01-02T06:52:33.617
> 
> 标签：java, interface, abstract-class, parent-child

我有这样的抽象类和接口

```
abstract class ParentClass
{
    int VALUE;
    public abstract void display();
    public void display2()
    {
        System.out.println("this is abstract class method");
    }
}

interface parentInterface
{
    int VALUE=88;
    abstract void display();
    void display2();
} 
```

子类扩展并实现了上述内容，如下所示

```
class ChildClass extends ParentClass implements parentInterface
{

    ChildClass()
    {
        super.VALUE=0;
        //VALUE=0;     //<=will give ambiguous property
    }
    @Override
    public void display() 
    {
        System.out.println("Current Class-"+this.getClass());
        System.out.println("Integer value-"+super.VALUE);
    }
    public void display2()
    {
        //to call the method of abstract class 
        //call by using super.display2();
        System.out.println("this is implemented method");
    }
} 
```

所以，我的问题是如何访问`VALUE`ChildClass 中的接口变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:21:33.887

[默认情况下](https://stackoverflow.com/questions/2430756/why-are-interface-variables-static-and-final-by-default)，您可以使用接口中的变量访问`VALUE`from 接口。`parentInterface.VALUE``public static final`

抽象类`VALUE`可以访问，`this.VALUE`因为它是一个成员变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T07:43:14.607

接口中的变量是隐式的`public static final`。

`static`- 因为接口不能有任何实例。

`final`- 分配给接口变量的值是一个真正的常量，不能由程序代码重新分配。

接口变量可以使用来访问，`<Interface>.VALUE`而来自父类的变量是继承的，因此可以使用`this.VALUE`.

> 如果任何子类类正在实现一个具有实例成员的接口，并且如果子类和接口都在同一个包中，那么即使不使用接口名称，也可以从子类访问静态成员。

这就是为什么你会得到模棱两可的错误。请将接口放在其他包中，然后它不应该显示这样的错误，否则您将不得不像访问它一样`super.VALUE`

# opencart - 在 opencart 1.5.4 中设置 seo url 后出现 403 禁止错误

> ID：14118001
> 
> 赞同：0
> 
> 时间：2013-01-02T06:52:34.207
> 
> 标签：opencart

我正在尝试在本地机器上的**opencart中设置****seo url 。**

 **我已经从管理系统设置中启用了 seo url 并将其设置为“是”

之后，在我的`.htaccess`文件中添加以下行：

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess.

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing
Options -Indexes

# Prevent Direct Access to files

Order deny,allow
Deny from all

# SEO URL Settings
RewriteEngine On

RewriteBase /primebrand

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)\?*$ index.php?_route_=$1 [L,QSA] 
```

在此之后，我设置了我的产品和类别的 seo 关键字。并重新启动了 Apache。

但它显示

```
403 forbidden

You don't have permission to access /primebrand/ on this server 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:33:45.787

如果你设置

```
RewriteBase /primebrand 
```

你告诉 Apache 所有的重写都应该从`/primebrand/`目录开始——这意味着你实际上已经在`<HTTP_ROOT>/primebrand/`目录中安装了你的 OpenCart。换句话说，假设您有一个本地根目录`http://localhost/mysite/`，并且 OpenCart 安装在`localhost/mysite/primebrand`.

如果不是这种情况（所以您的 OpenCart 直接是 site `http://localhost/mysite/`），将`RewriteBase`back 设置为`/`，以

```
RewriteBase / 
```

这应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:18:40.993

尝试删除`Deny from all`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T14:22:10.300

问题可能是您的“RewriteBase /primebrand”行。它需要一个尾随“/”，即“RewriteBase /primebrand/”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T15:27:58.200

我遇到了同样的问题，但我复制了旧版本的 zopimlivechat 的文件。我有更新文件，但更新版本安装后消息显示相同。网站再次正常工作。**

# java - 想在spring security中获取之前的URL

> ID：14118002
> 
> 赞同：0
> 
> 时间：2013-01-02T06:52:42.120
> 
> 标签：java, spring, spring-security

我正在使用 Spring Security 进行用户身份验证，但在这里我想在 userDetailService 或 loginFailure 或 loginSuccess 上获取以前的浏览器 url。

为此，我试图从请求对象中获取 url，但我得到了**/j_Spring_security_check**而不是浏览器 url，例如：- **/service/user/login 或 /service/customer/login**因为我有这两个不同的 url 用于不同用户的登录或客户。请提出任何解决方案

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:38:51.063

```
String referrer = request.getHeader("referer"); 
```

注意：[HTTP 引用](http://en.wikipedia.org/wiki/HTTP_REFERER)是客户端控制的值，因此可以被欺骗到完全不同的东西，甚至被删除。此值不应用于任何关键操作。但是为什么你需要这个？

# wpf - 使用 RenderTargetBitmap 的 WPF 画布区域的快照

> ID：14118003
> 
> 赞同：5
> 
> 时间：2013-01-02T06:52:48.407
> 
> 标签：wpf, png, snapshot, rendertargetbitmap

我想在我的应用程序中创建画布区域的快照。我正在使用视觉画笔来获取快照并使用 PngEncoder 保存它。但生成的 PNG 只是一个空的黑色图像。我不确定问题出在创建的 BitmapSource 或 PNGEncoder 问题上。这是我用来获取相同内容的代码。

```
public void ConvertToBitmapSource(UIElement element)
{
    var target = new RenderTargetBitmap((int)(element.RenderSize.Width), (int)(element.RenderSize.Height), 96, 96, PixelFormats.Pbgra32);
    var brush = new VisualBrush(element);

    var visual = new DrawingVisual();
    var drawingContext = visual.RenderOpen();

    drawingContext.DrawRectangle(brush, null, new Rect(new Point(0, 0),
    new Point(element.RenderSize.Width, element.RenderSize.Height)));

    drawingContext.Close();

    target.Render(visual);

    PngBitmapEncoder encoder = new PngBitmapEncoder();
    BitmapFrame outputFrame = BitmapFrame.Create(target);
    encoder.Frames.Add(outputFrame);
    using (FileStream file = File.OpenWrite("TestImage.png"))
    {
         encoder.Save(file);
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T09:25:01.027

不确定为什么您的代码无法正常工作。这有效：

```
public void WriteToPng(UIElement element, string filename)
{
    var rect = new Rect(element.RenderSize);
    var visual = new DrawingVisual();

    using (var dc = visual.RenderOpen())
    {
        dc.DrawRectangle(new VisualBrush(element), null, rect);
    }

    var bitmap = new RenderTargetBitmap(
        (int)rect.Width, (int)rect.Height, 96, 96, PixelFormats.Default);
    bitmap.Render(visual);

    var encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var file = File.OpenWrite(filename))
    {
        encoder.Save(file);
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-16T02:24:40.550

谢谢你的问题和答案。

为了寻求相同答案的其他人的利益

我发现 Clemens 方式在图像中留下了一条黑色带，图像向下或向右移动。好像它没有在位图中的正确位置渲染元素。

所以我不得不按照 Amar 的建议使用 VisualBrush。

这是对我有用的代码：

```
 RenderTargetBitmap RenderVisual(UIElement elt)
    {
        PresentationSource source = PresentationSource.FromVisual(elt);
        RenderTargetBitmap rtb = new RenderTargetBitmap((int)elt.RenderSize.Width,   
              (int)elt.RenderSize.Height, 96, 96, PixelFormats.Default);

        VisualBrush sourceBrush = new VisualBrush(elt);
        DrawingVisual drawingVisual = new DrawingVisual();
        DrawingContext drawingContext = drawingVisual.RenderOpen();
        using (drawingContext)
        {
            drawingContext.DrawRectangle(sourceBrush, null, new Rect(new Point(0, 0), 
                  new Point(elt.RenderSize.Width, elt.RenderSize.Height)));
        }
        rtb.Render(drawingVisual);

        return rtb;
    } 
```

# php - 如何使用 PHP 从字符串中随机选择字符？

> ID：14118011
> 
> 赞同：-4
> 
> 时间：2013-01-02T06:53:18.280
> 
> 标签：php, string, random, whitespace

例如我有字符串，

```
$str = "abab cdcd efef" 
```

如何从字符串的每个部分中选择两个字母？我想随机生成这样的东西：

```
$result = "ab cc fe" 
```

从上面。有没有办法做到这一点？

如果没有，我可以自动将字符串分成三个字符串吗？有没有办法根据空格或一定数量的字符（4）分割字符串？谢谢。

编辑：我可以为此使用爆炸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:56:40.347

```
<?php
$str = "abab cdcd efef";

$values=explode(" ",$str);
$output="";
foreach($values as $value)
{
    $output.= substr($value,2)." ";
}
echo trim($output);

?> 
```

编辑：随机一次尝试可以是

```
$output.= substr($value,rand(0,strlen($value)-2),2)." "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:57:07.790

你可以这样做-

```
$str = "abab cdcd efef";
$array = explode(" ",$str);
$rand_keys = array_rand($array, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:04:09.510

所有你需要的是

```
$str = "abab cdcd efef";
$list = array_map(function ($v) {
    $v = str_split($v);
    shuffle($v);
    return implode(current(array_chunk($v, 2)));
}, explode(" ", $str));

echo "<pre>";
print_r($list); 
```

[输出](http://eval.in/5744)

```
Array
(
    [0] => ab
    [1] => cd
    [2] => ef
) 
```

[简单的在线演示](http://eval.in/5744)

# linux - man手册页中的“on-line”是什么意思？

> ID：14118012
> 
> 赞同：1
> 
> 时间：2013-01-02T06:53:21.353
> 
> 标签：linux, manpage

```
$ man man
...
NAME
       man - an interface to the on-line reference manuals
... 
```

这里有什么意义`on-line`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T06:54:40.960

从命令行可用？:)

“[在线](http://en.wikipedia.org/wiki/Online_and_offline)”可以意味着立即可用/连接/准备使用，它准确地描述了包含在系统本身中的手册。考虑到这个时代，它也可能指的是电子手册，而不是印刷手册。

# url - 使用 `-d` 卷曲带有参数的 URL

> ID：14118018
> 
> 赞同：1
> 
> 时间：2013-01-02T06:53:58.340
> 
> 标签：url, curl, web

我有一个带有一些参数的网址，如下所示：

[http://cistrome.org/finder/site/result?di​​d=1200&tf=AR&Gene_box=&all_gene=1®ion_select=proximal&extend_bp_number=200&repeat_bp_number=150&primer=0](http://cistrome.org/finder/site/result?did=1200&tf=AR&Gene_box=&all_gene=1&region_select=proximal&extend_bp_number=200&repeat_bp_number=150&primer=0)

它在浏览器中运行良好。

但是当我试图通过`curl`这样的方式得到结果时：

```
curl -d "did=1200%20tf=AR%20Gene_box=%20all_gene=1%20region_select=proximal%20extend_bp_number=200%20repeat_bp_number=150%20primer=0" http://cistrome.org/finder/site/result 
```

它返回一条`did`未作为请求传递的消息。

如果我直接使用 url，它会给我这样的结果：

```
curl http://cistrome.org/finder/site/result?did=1200&tf=AR&Gene_box=&all_gene=1&region_select=proximal&extend_bp_number=200&repeat_bp_number=150&primer=0
[1] 4931*emphasized text*
[2] 4932
[3] 4933
[4] 4934
[5] 4935
[6] 4936
[7] 4937
[2]   Done                    tf=AR
[3]   Done                    Gene_box=
[4]   Done                    all_gene=1
[5]   Done                    region_select=proximal
[6]-  Done                    extend_bp_number=200 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:20:53.900

请改用以下命令：

```
curl 'http://cistrome.org/finder/site/result?did=1200&tf=AR&Gene_box=&all_gene=1&region_select=proximal&extend_bp_number=200&repeat_bp_number=150&primer=0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T21:53:59.543

shell 将 & 符号解释为应作为后台进程运行的命令的结尾。您可以将 URL 括在引号中，也可以使用反斜杠转义与号，如下所示：

```
curl http://cistrome.org/finder/site/result?did=1200\&tf=AR\&Gene_box=\&all_gene=1\&region_select=proximal\&extend_bp_number=200\&repeat_bp_number=150\&primer=0 
```

# c - 在c中的mac中链接错误gsoap

> ID：14118019
> 
> 赞同：3
> 
> 时间：2013-01-02T06:54:24.177
> 
> 标签：c, macos, gsoap

我尝试在我的应用程序中添加 gsoap。我为 i386 构建了 gsoap。使用以下命令创建 c 代码：

```
wsdl2h -c -s -o soap.h soap.wsdl 
soapcpp2 -c -C soap.h 
```

我有文件。在此之后，我尝试将这些包含到我的应用程序中。我在 xCode 中添加到我的项目中。我还添加了 6 个库（libgsoap.a、libgsoap++.a、libgsoapck.a、libgsoapck++.a、libgsoapssl.a、libgsoapssl++.a）。我在 Target => Build Phases => Link binary with libraries 中添加了库。但我得到了错误....

```
ld: duplicate symbol ..... 
```

我认为它发生在文件 soapClientLib.c 中是因为：

```
#ifndef WITH_NOGLOBAL
#define WITH_NOGLOBAL
#endif
#define SOAP_FMAC3 static
#include "soapC.c"
#include "soapClient.c" 
```

对这些的评论是：

```
Use this file in your project build instead of the two files soapC.c and soapClient.c. This hides the serializer functions and avoids linking problems when linking multiple clients and servers 
```

我删除了它的内容。但在此之后我得到下一个错误......

```
Undefined symbols for architecture i386:
  "_namespaces", referenced from:
      _soap_init_LIBRARY_VERSION_REQUIRED_20812 in libgsoap.a(libgsoap_a-stdsoap2.o)
     (maybe you meant: _soap_set_namespaces, _soap_set_local_namespaces )
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

现在我不知道......我在 Windows 中使用了 gsoap，并将它添加到我的项目中 5 分钟。但是我浪费了很多时间在mac os中添加它。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:26:27.520

我解决了我的问题！我必须使用键--disable-namespaces 进行./configure。谢谢你。但是我偷不明白soapClientLib.c文件的意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T23:44:52.733

这个问题可以通过将编译器文件名从 gcc 更改为 g++ 来解决。

海合会：

```
gcc calcmain.cpp soapC.cpp soapcalcProxy.cpp  -I/opt/local/include -lgsoap++ -L/opt/local/lib
...
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

G++：

```
g++ calcmain.cpp soapC.cpp soapcalcProxy.cpp  -I/opt/local/include -lgsoap++ -L/opt/local/lib
All OK 
```

然而，您可以通过添加 gcc 选项 -lstdc++ 使其在 gcc 下可编译：

```
gcc calcmain.cpp soapC.cpp soapcalcProxy.cpp  -I/opt/local/include -lgsoap++ -L/opt/local/lib -lstdc++
All OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T18:06:33.617

我知道，这是一个老问题，但我花了整整一个晚上才弄清楚这一点。

[这是此](http://comments.gmane.org/gmane.text.xml.soap.gsoap/2871)对话的引述（[另一个链接](http://markmail.org/message/c4lzp3lgwnxjq4jz)）：

> soapcpp2 生成的`xyz.nsmap`文件应该`#include`在你的代码中。它包含一个全局 XML 名称空间映射（或绑定）表。
> 
> 单独包含这个的原因是存在命名空间映射表是自定义或共享的场景。

例如，我使用了一个 C++ 类，使用`soapcpp2 -i <my_header.h>`. 生成的文件之一是`<my_service_name>Service.cpp`. 为了摆脱`_namespaces`我不得不解决的问题`#include "<my_service_name>.nsmap"`。

至于`soapClientLib.c`，我想再次引用那段对话：

> 请不要在您的构建中使用soapClientLib.c，除非您想组合多个单独生成的客户端/服务器代码。这意味着soapClientLib.c 不包含SOAP 标头和错误的共享序列化程序。

# python - 使用 check_call 调用 shell 脚本

> ID：14118024
> 
> 赞同：1
> 
> 时间：2013-01-02T06:54:48.333
> 
> 标签：python

我在调用 shell 脚本时遇到了以下错误，如何使用 check_call 或通过任何其他 python 函数调用 shellscript？
import os from subprocess import check_call,Popen, PIPE

```
def main ():
    BUILD_ROOT="//local/mnt/workspace//AU"
    os.chdir(BUILD_ROOT)
    print os.getcwd()
    check_call(['./test.sh'])

if __name__ == '__main__':
    main() 
```

错误：-

```
 File "test.py", line 11, in <module>
    main()
  File "test.py", line 8, in main
    check_call(['./test.sh'])
  File "/usr/lib/python2.6/subprocess.py", line 493, in check_call
    retcode = call(*popenargs, **kwargs)
  File "/usr/lib/python2.6/subprocess.py", line 480, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.6/subprocess.py", line 633, in __init__
    errread, errwrite)
  File "/usr/lib/python2.6/subprocess.py", line 1139, in _execute_child
    raise child_exception
OSError: [Errno 8] Exec format error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:44:21.427

添加 shell=True 修复它

```
check_call(['./test.sh'],shell=True) 
```

# c++ - 纯碱基变化

> ID：14118025
> 
> 赞同：0
> 
> 时间：2013-01-02T06:54:50.383
> 
> 标签：c++, math, numbers

我正在尝试（没有多大成功）编写一个简短的 c++ 函数：

两位数（双 x，int b，int d）

返回数字 x 的 base-b 扩展中的第 d 位，可以是正数或负数，并且可以是分数。当 d 为负数时，它应该返回小数点后的数字（对于 d=0，它的下定义，所以说在这种情况下它返回 0）。例如：

```
 const double x = 25.73;
    for (int n = -5; n <= 5; n++)
            cout<<digit(x,10,n)<<' '; 
```

应该打印：0 0 0 3 7 0 5 2 0 0 0

该函数必须仅使用循环、if、exp、pow、log、floor 和 ceil。即，没有 sprintf 技巧等。

谢谢！！！

编辑：为简单起见，假设 2<=b<=10

编辑：也请避免使用 mod，只使用基于 pow-exp-log-floor-ceil 的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:22:00.673

这似乎是最直接的实现，而且似乎工作得很好。

```
int digit( double x, int base, int index ) {
    // shift number (mult by power of base) so desired digit is in one's place
    x = std::abs( x ) * std::pow( base, - index );
    // fmod strips higher digits; floor strips lower digits, leaving result.
    return std::floor( std::fmod( x, base ) );
} 
```

我将返回类型从更改为`double`，`int`因为在数字中包含小数是没有意义的。它不会返回`.`0，因为这又不是数字。第 0 个位置的值是一个位置。

这也忽略了减号；您没有为负数定义“base-b 扩展”。您可以调整函数以返回 b 的补码符号或其他任何东西。

通过替换`x`你可以把它变成一行，这样它就可以满足`constexpr`数学函数所在平台的要求`constexpr`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:21:22.593

让我们分两步来做。

1.将数字转换为基数b

2.找到第d位并返回。

拆分任务的原因是因为如果你重复调用同一组基数和数字并且只为不同的d，那么我们可以将数字缓存在新的基数中。例如下面的函数从基数10转换一个数字**a** , 以**b**为底。我很好奇如何处理分数。

```
string changeBase(int a,int b)
{
  string A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  string res="";
  while(a>=b)
  {
      res=A[a%b]+res;
      a=a/b;
  }
  return res;
 } 
```

我们需要以字符串的形式返回，因为新的基数可以包含“A”或“B”等数字，它们表示 10、11 等的余数。然后我们可以使用返回的字符串，如下所示：

```
 string A=changeBase(24,2);
 cout<<A[0];//for some d 
```

对于负支持，您可以根据您为负**d**定义它的方式适当地使用字符串索引。

# sharepoint-2007 - 编辑 Web 部件 - HTTP 403 禁止错误

> ID：14118028
> 
> 赞同：1
> 
> 时间：2013-01-02T06:54:57.547
> 
> 标签：sharepoint-2007

我在 SharePoint 2007 网站中有一个 Web 部件。此 Web 部件是用**对象模型代码编写**的。我获得了对此网站集的完全控制权，并且可以毫无问题地访问该页面。

当我尝试通过单击“站点操作--> 编辑页面”来编辑它时，出现以下错误

```
Error:
The website declined to show this webpage- HTTP 403

Most likely causes:

•This website requires you to log in.
 What you can try:

Go back to the previous page. 

**More information**

This error (HTTP 403 Forbidden) means that Internet Explorer was able to connect to the website, but it does not have permission to view the webpage.

For more information about HTTP errors, see Help. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:47:53.510

我解决了 HTTP 403 Forbidden 问题。问题的根本原因是，在我的代码中，可以访问服务器上的文件系统，而登录的用户在编辑 Web 部件时无权访问该文件系统。

我使用了 RunWithElevatedPrivileges，但仅用于获取站点信息和更新列表。ElevatedPrivileges 不涵盖读取配置文件和登录日志文件的代码。

我将它们与 Elevated Privileges 一起包括在内，用户可以编辑 web pat。我们还可以通过将特定文件的读、写权限授予“SERVER\USERS”来解决此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:52:29.573

是用户控件还是访问文件系统路径的类似东西？

如果是，那么您必须使用 SPSecurity.RunWithElevatedPrivilages(delegate() {})。

[看看这个](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopmentlegacy/thread/9ffba2ba-e640-4cfd-a41a-c991f95ff2a0)

谢谢

# facebook - 如何使用 Titanium 在图像中提供超链接

> ID：14118029
> 
> 赞同：-1
> 
> 时间：2013-01-02T06:54:58.497
> 
> 标签：facebook, titanium, titanium-mobile

我希望在使用 Titanium 的图像中的特定点上提供超链接，就像 Facebook 在显示面部焦点上的图像时所做的那样，它正在显示名称。

那么有没有可能我可以在钛上做到这一点。如果可能，请提供一些示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:30:58.757

只需对视图使用 click 事件，然后检测它是否在某个区域内，我以圆形区域为例，因为它最容易编码，[您可以将其用作矩形区域的指南](https://stackoverflow.com/questions/802013/point-in-rectangle-testing)

```
var clickPoint = {x : 100, y : 100};
var clickRadiusSquared = 25;

// View user clicks on
var view = Ti.UI.createView({
    width : 200,
    height : 200,
});

view.addEventListener('click', function(e) {
   // Get the X and Y coordinates of the click inside the view
   var x = e.x;
   var y = e.y;

   // Now see if it is inside the area
   var distanceSquared = Math.pow(clickPoint.x - x, 2) + Math.pow(clickPoint.y - y, 2);
   if(distanceSquared < clickRadiusSquared) {
       // Open the link or do whatever
       Titanium.Platform.openURL('http://www.yoururl.com');
   }
}); 
```

# r - R中带有标签的水平树状图

> ID：14118033
> 
> 赞同：22
> 
> 时间：2013-01-02T06:55:21.953
> 
> 标签：r, dendrogram, hclust

我正在尝试从`hclust`函数输出中绘制树状图。我希望树状图是水平排列的而不是默认的，可以通过（例如）

```
require(graphics)
hc <- hclust(dist(USArrests), "ave")
plot(hc) 
```

我尝试使用`as.dendrogram()`类似的功能，`plot(as.dendrogram(hc.poi),horiz=TRUE)`但结果没有有意义的标签：

![在此处输入图像描述](../Images/f12d89a7f578ea92d44c6c1b6513af9e.png)

如果我使用`plot(hc.poi,labels=c(...))`which is without the `as.dendrogram()`，我可以传递`labels=`参数，但现在树状图是垂直的而不是水平的。有没有办法同时水平排列树状图并分配用户指定的标签？谢谢！

**更新**：作为 USArrests 数据集的示例，假设我想使用州名称的前两个字母的缩写作为标签，以便我想以某种方式传递`labs`给绘图函数：

`labs = substr(rownames(USArrests),1,2)`

这使

```
 [1] "Al" "Al" "Ar" "Ar" "Ca" "Co" "Co" "De" "Fl" "Ge" "Ha"
[12] "Id" "Il" "In" "Io" "Ka" "Ke" "Lo" "Ma" "Ma" "Ma" "Mi"
[23] "Mi" "Mi" "Mi" "Mo" "Ne" "Ne" "Ne" "Ne" "Ne" "Ne" "No"
[34] "No" "Oh" "Ok" "Or" "Pe" "Rh" "So" "So" "Te" "Te" "Ut"
[45] "Ve" "Vi" "Wa" "We" "Wi" "Wy" 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T07:04:52.983

要在水平树状图中显示您定义的标签，一种解决方案是将数据框的行名设置为新标签（所有标签都应该是唯一的）。

```
require(graphics)
labs = paste("sta_",1:50,sep="") #new labels
USArrests2<-USArrests #new data frame (just to keep original unchanged)
rownames(USArrests2)<-labs #set new row names
hc <- hclust(dist(USArrests2), "ave")
par(mar=c(3,1,1,5)) 
plot(as.dendrogram(hc),horiz=T) 
```

![在此处输入图像描述](../Images/5373291eb1f8bd38f92a2629d70f1a8f.png)

### 编辑 - 使用 ggplot2 的解决方案

```
labs = paste("sta_",1:50,sep="") #new labels
rownames(USArrests)<-labs #set new row names
hc <- hclust(dist(USArrests), "ave")

library(ggplot2)
library(ggdendro)

#convert cluster object to use with ggplot
dendr <- dendro_data(hc, type="rectangle") 

#your own labels (now rownames) are supplied in geom_text() and label=label
ggplot() + 
  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) + 
  geom_text(data=label(dendr), aes(x=x, y=y, label=label, hjust=0), size=3) +
  coord_flip() + scale_y_reverse(expand=c(0.2, 0)) + 
  theme(axis.line.y=element_blank(),
        axis.ticks.y=element_blank(),
        axis.text.y=element_blank(),
        axis.title.y=element_blank(),
        panel.background=element_rect(fill="white"),
        panel.grid=element_blank()) 
```

![在此处输入图像描述](../Images/943877656d98e486fe80644670c64d93.png)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-02T08:09:17.113

使用`dendrapply`您可以根据需要自定义您的 dendro。

![在此处输入图像描述](../Images/ac7cbb130892a9795e271aa37f224cb6.png)

```
colLab <- function(n) {
  if(is.leaf(n)) {
    a <- attributes(n)
    attr(n, "label") <- substr(a$label,1,2)             #  change the node label 
    attr(n, "nodePar") <- c(a$nodePar, lab.col = 'red') #   change the node color
  }
  n
}

require(graphics)
hc <- hclust(dist(USArrests), "ave")
clusDendro <- as.dendrogram(hc)
clusDendro <- dendrapply(clusDendro, colLab)
op <- par(mar = par("mar") + c(0,0,0,2))
plot(clusDendro,horiz=T) 
```

# c# - 如何使用 SharePoint Web 服务创建 SharePoint 2010 Web 应用程序？

> ID：14118038
> 
> 赞同：-1
> 
> 时间：2013-01-02T06:55:45.777
> 
> 标签：c#, web-services, sharepoint-2010

如何使用 C# 使用 SharePoint Web 服务创建 SharePoint 2010 Web 应用程序。有任何代码片段吗？以及需要使用哪个 ShrePoint Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:14:58.767

没有将创建 Web 应用程序的 Web 服务。

最接近的是允许您创建网站集的管理中心管理 Web 服务[。](http://msdn.microsoft.com/en-us/library/administration.admin%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:01:06.413

您无法通过 Web 服务执行此操作，但您可以使用[SPWebApplication](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.aspx)对象在 C# 中执行此操作。您需要为 SPFarm 创建一个 SPWebApplicationBuilder，然后为您的新 SPWebApplication 设置设置。

这个页面有一些关于[如何创建 SPWebApplication 的代码示例](http://www.anmolrehan-sharepointconsultant.com/2011/09/how-to-create-spwebapplication.html)

# asp.net - 如何从 GridView 中的控件获取值？

> ID：14118040
> 
> 赞同：1
> 
> 时间：2013-01-02T06:55:57.243
> 
> 标签：asp.net

我是 asp.net 网站开发人员的新手。在我的网站中，我使用 GridView 控件。在 GridView 行中，我放置了一些控件，例如 TextBox、DropDownList。

我可以在 GridView 中显示值。

但我的要求是，从 GridView 中存在的 TextBox 和 DropdownList 中获取值。

请帮助我前进..

谢谢你，再见..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:57:13.173

您需要按行访问它们。这篇代码项目[文章](http://www.codeproject.com/Articles/12021/Accessing-the-different-controls-inside-a-GridView)详细解释了它。

```
TextBox tb = (TextBox)gridview1.Rows[0].FindControl("idOfTextBox"); 
```

上面的语句将在具有 id`idOfTextBox`和 type的网格的第一行中找到控件`textbox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T06:32:48.373

不仅是文本框，我们还可以从 gridview 中使用的所有控件获取值，这些控件通过使用 itemTemplate 或简单的 Bound field 放置。

您需要为每一行循环以获取值

```
foreach (GridViewRow row in grd_popup_details.Rows)
 {
 //get control values
 } 
```

[参考链接](http://goo.gl/Zg9ZTP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:02:05.390

您可以通过直接转换直接获取任何控件的任何值，而无需使用额外的文本框或下拉变量。

例子：

```
string val = ((TextBox)gridview1.Rows[0].FindControl("TextBox_ID")).Text; 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:18:36.970

```
Subscribe the RowDataBound event(this will be fired on each row available in gridview) of gridview and access like stated below,

protected void grdBillingdata_RowDataBound(object sender, GridViewRowEventArgs e)
{
        if (e.Row.RowType == DataControlRowType.DataRow)
        {   
           //these controls are available inside gridview

            HiddenField hdnNagetiveAmt = (HiddenField)e.Row.FindControl("hdnNagetiveAmt");
            DropDownList ddlFeeType = (DropDownList)e.Row.FindControl("ddlFeeType");            
            TextBox txtFeeDesc = (TextBox)e.Row.FindControl("txtFeeDesc");     
            Button btnUpdate = (Button)e.Row.FindControl("btnUpdate");
        }
} 
```

# visual-c++ - DWORD 不兼容

> ID：14118041
> 
> 赞同：0
> 
> 时间：2013-01-02T06:56:00.430
> 
> 标签：visual-c++

我正在研究 vc++ 中的硬件功能。

我正在努力解决这个问题`siSysInfo.dwOemId`，但`dword is incompatible`错误阻止了我

我什至试过`strcat(text,(char*)siSysInfo.dwOemId)`但没有用。

这是我的代码

```
SYSTEM_INFO siSysInfo;

GetSystemInfo(&siSysInfo);

char parent[1000] = {""};
char text[700] = {""};
char str[700] = {""};

strcat(text, "<b><font color=\"yellow\"> ");

strcat(text,(char*)siSysInfo.dwOemId);

strcat(text, str);
strcat(text, "</font></b>");

AddLOG_message(text, 0, 0);

#pragma MESSAGE("TODO: testing") 
```

在控制台应用程序中，它作为 printf(" OEM ID: %u\n", siSysInfo.dwOemId);

但在正常应用中--- strcat(text,(char*)siSysInfo.dwOemId); 不管用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:58:51.363

是`word`的，是衡量可以通过系统总线传递的数据位数量，AFAIK。因此它不能兼容，因为对于 16 位平台，它将具有 16 位，而对于 64 位平台，它将具有 64 位。

关于这一点，`strcat(text,(char*)siSysInfo.dwOemId)`我很确定它`dwOemId`没有以零结尾，因此需要使用 of`strncat(text, (char*)siSysInfo.dwOemId, sizeof(DWORD))`或类似的东西。

看起来这无论如何都不是字符串。我怀疑你已经遵循[了这个示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724423%28v=vs.85%29.aspx)，但你应该把目光转向这条线`printf(" OEM ID: %u\n", siSysInfo.dwOemId)`。如您所见，它们使用`%u`格式 ( `unsigned int`)。

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724958%28v=vs.85%29.aspx)

> dwOemId
> 
> ```
> An obsolete member that is retained for compatibility. 
> ```
> 
> 应用程序应该使用联合的 wProcessorArchitecture 分支。

所以这条线可能看起来像：

```
switch(siSysInfo.wProcessorArchitecture)
{
case PROCESSOR_ARCHITECTURE_AMD64: strcat(text, "x64"); break;
case PROCESSOR_ARCHITECTURE_ARM: strcat(text, "ARM"); break;
case PROCESSOR_ARCHITECTURE_IA64: strcat(text, "ia64"); break;
case PROCESSOR_ARCHITECTURE_INTEL: strcat(text, "x86"); break;
case PROCESSOR_ARCHITECTURE_UNKNOWN: strcat(text, "unknown"); break;
default:
    /* code should be updated to include updates 
     * in wProcessorArchitecture enumeration */
    strcat(text, "unidentified"); break;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T07:36:44.110

解决方案：

SYSTEM_INFO siSysInfo；

GetSystemInfo(&siSysInfo);

使用 unsigned char instedof char。\n

按照下面的例子。

无符号字符文本[700] = {""};

strcat(文本,(char*)siSysInfo.dwOemId);

请参考以下链接：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724423(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724423(v=vs.85).aspx)

# delphi - Indy，连接过多时访问违规

> ID：14118050
> 
> 赞同：2
> 
> 时间：2013-01-02T06:57:06.323
> 
> 标签：delphi, indy

我有三个问题：

1.  是否可以通过多个连接来破坏 IdTCPServer？我尝试测试我的应用程序，当我有多个连接时 - 它工作得非常好（甚至几天），但有时连接数量增加时，应用程序会违反访问权限。我编写的应用程序模拟了 50 个客户端不断发送数据（只有 sleep(200)）。在这种情况下，IdTCPServer 会给出异常吗？我的应用程序通过 onExecute 事件从客户端获取信息，并使用 TidNotify 和 TIdSync 类修改数据库表。我相信它可以保护交叉连接线程？向客户端发送信息是由 TTimer 完成的（只是现在，我将其更改为其他线程）。我是否在这种情况下使用特殊保护或类似的东西就足够了：

    ```
    type
      PClient = ^TClient;
      TClient = record
        Activity_time:TDateTime;
        AContext: TIdContext;
      end;
    ...
    list := server.Contexts.LockList;
    try
     for i := 0 to list.Count - 1 do
      with TIdContext(list[i]) do
      begin

        if SecondsBetween(now(), PClient(data)^.activity_time) > 6 then
        begin
          Connection.IOHandler.Close;
          Continue;
        end;
        try
          Connection.IOHandler.writeln('E:');
        Except
          Connection.IOHandler.Close;
        end;
      end;
    finally
      server.Contexts.UnlockList;
    end; 
    ```

2.当服务器繁忙时拒绝连接是一种简单的方法（我认为我的数据库并不复杂（100行，一个连接只修改一行）但也许这是一种保持服务器稳定性的方法？

3.我知道这个问题重复了很多次，但我没有找到满意的答案：如何保护应用程序以避免消息异常：“连接正常关闭”和“对等连接重置”？

谢谢你的所有建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:17:53.623

> 是否可以通过多个连接来破坏 IdTCPServer？

你问错了问题，因为你实际上并没有破坏`TIdTCPServer`自己，你只是从外部线程关闭空闲连接。可以（并且应该）在`OnExecute`事件内部处理这种逻辑，而不是在最安全的地方访问连接，例如：

```
type
  PClient = ^TClient;
  TClient = record
    Activity_time: TDateTime;
    Heartbeat_time: TDateTime;
    AContext: TIdContext;
  end;

procedure TForm1.serverConnect(AContext: TIdContext);
var
  Client: PClient;
begin
  New(Client);
  Client^.Activity_time := Now();
  Client^.Heartbeat_time := Client^.Activity_time;
  AContext.Data := TObject(Client);
end;

procedure TForm1.serverDisconnect(AContext: TIdContext);
var
  Client: PClient;
begin
  Client := PClient(AContext.Data);
  AContext.Data := nil;
  if Client <> nil then Dispose(Client);
end;

procedure TForm1.serverExecute(AContext: TIdContext);
var
  Client: PClient;
  dtNow: TDateTime;
begin
  Client := PClient(AContext.Data);
  dtNow := Now();

  if SecondsBetween(dtNow, Client^.Activity_time) > 6 then
  begin
    AContext.Connection.Disconnect;
    Exit;
  end;

  if SecondsBetween(dtNow, Client^.Heartbeat_time) > 2 then
  begin
    AContext.Connection.IOHandler.WriteLn('E:');
    Client^.Heartbeat_time := dtNow;
  end;

  if AContext.Connection.IOHandler.InputBufferIsEmpty then
  begin
    if not AContext.Connection.IOHandler.CheckForDataOnSource(100) then
      Exit;
  end;

  // process incoming data as needed ...

  Client^.Activity_time := Now();
end; 
```

> 当服务器繁忙时拒绝连接是一种简单的方法（我认为我的数据库并不复杂（100行，一个连接只修改了一行）但也许这是一种保持服务器稳定性的方法？

当前架构不允许拒绝接受连接。您可以让服务器正常接受连接，然后在需要时关闭接受的连接。您可以在这种情况下这样做`OnConnect`，或者您可以将服务器的`MaxConnection`属性设置为一个非零的低数字，以允许服务器为您自动断开新连接，而不会浪费资源`TIdContext`为它们创建新对象和线程。

另一种选择是`StopListening()`在服务器繁忙时调用服务器的方法，这样新的连接就无法再到达服务器，然后在`StartListening()`准备好再次接受新客户端时调用服务器的方法。已经连接的现有客户端不应该受到影响，尽管我自己还没有真正尝试过。

> 我知道这个问题重复了很多次，但我没有找到令人满意的答案：如何保护应用程序以避免消息异常：“连接正常关闭”和“对等连接重置”？

你不应该避开它们。让它们发生，它们是正常的错误。如果它们发生在服务器事件中，只需让服务器为您正常处理它们。这就是`TIdTCServer`设计使用的方式。如果它们发生在服务器事件之外，例如在您的计时器中，那么只需将套接字操作包装在一个`try/except`块中并继续前进。

# javascript - 开发过程中如何使用json代理访问远程服务

> ID：14118053
> 
> 赞同：0
> 
> 时间：2013-01-02T06:57:15.763
> 
> 标签：javascript, extjs, cross-browser, sencha-touch, sencha-touch-2

这是我经历后的疑问

[使用 jsonp 代理时如何发送标头？](https://stackoverflow.com/questions/13681426/how-to-send-headers-while-using-jsonp-proxy/13984162#comment19534245_13984162)

和

[Ajax 调用如何在移动应用程序 (PhoneGap) 中工作，但在 PC 浏览器中却没有？](https://stackoverflow.com/questions/7440725/how-ajax-call-is-working-in-mobile-app-phonegap-but-not-in-pc-browser)

据此，我们可以在移动设备中使用 json 代理而不是 jsonp，但不能在桌面浏览器中使用。这听起来不错，但我的问题是我正在使用我的桌面作为开发环境，而浏览器是测试和调试我正在做的任何事情的最快方法，但是如果我使用 json 代理，由于跨域问题，这将不起作用。请提出一些方法，以便我可以轻松地在我的桌面上开发和调试应用程序。

我的工作站有 Ubuntu 操作系统，我使用 Chrome 浏览器进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:08:12.743

我认为出于开发目的，您可以在浏览器中禁用跨域策略，如下[所示](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)。

1.  在桌面上为 chrome 浏览器创建快捷方式
2.  将以下标志添加到快捷方式`--disable-web-security`

或者

[您可以设置您的开发服务器以允许此处](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)或 [此处]给出的跨域请求

[1](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy) . 将以下标题添加到您的响应中`Access-Control-Allow-Origin: *`

# html - 为什么表单中输入的位置在浏览器中发生了变化？

> ID：14118060
> 
> 赞同：0
> 
> 时间：2013-01-02T06:58:22.517
> 
> 标签：html, templates, dom, browser, web

在模板文件中，我是这样写的

```
 % for name,sequence in NAME_SEQUENCE:

        <form id="ucsc_profile_form${sequence_counter}"
              action="${request.route_path('CF_profile_UCSC_adapter')}"
              method="GET" target="_blank">
            <input type="hidden" value="${species_short}" name="species">
            <input type="hidden" value="${chrom}" name="chrom">
            <input type="hidden" value="${start}" name="start">
        </form>
       ....

     % endfor 
```

但是当我`firebugs`用来检查 html 代码时，它们呈现如下：

```
 <form id="ucsc_profile_form1"  action="${request.route_path('CF_profile_UCSC_adapter')}" method="GET" target="_blank">
        </form>
        <input type="hidden" value="${species_short}" name="species">
        <input type="hidden" value="${chrom}" name="chrom">
        <input type="hidden" value="${start}" name="start"> 
```

奇怪的是`<input>`元素变成了`<form>`..

原页面可以看[这里](http://cistrome.org/finder/site/result?did=1200&tf=AR&Gene_box=&all_gene=1&region_select=proximal&extend_bp_number=200&repeat_bp_number=150&primer=0)，虽然DOM结构看起来不对，但是表单的元素还是可以提交的。。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:04:51.423

通过[W3C Markup Validator](http://validator.w3.org)运行链接。我看到 674 个 HTML 错误。

通常，这些类型的问题源于 Firebug 被 HTML 中其他地方的错误弄糊涂了。

在您的情况下，您将`<form>`元素作为 的子元素`<table>`，`<input>`将元素作为 的直接子元素`<tbody>`。

修复上述错误应该可以让 Firebug 运行良好。

# android - 什么是水平精度

> ID：14118061
> 
> 赞同：5
> 
> 时间：2013-01-02T06:58:31.330
> 
> 标签：android, ios, geolocation, gps, unity3d

我是 Unity3d 的新手，正在开发位置应用程序。我正在设备上启用位置并获取当前位置。我得到的响应参数很少，它们是纬度经度高度和水平精度。我知道其中的前三个，但不知道最后一个是水平精度。我用谷歌搜索并获得了 Apple Documentation Horizo​​ntal [Accuracy](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)。据我了解，这是经纬度的半径大小。如果是，那么我有以下问题。

*   水平精度的默认值是多少，因为我得到 10。
*   我们可以更改此值吗（经纬度周围的半径）
*   什么是垂直精度（如果存在）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T07:57:08.890

GPS 定位不准确。GPS 数据的本质是它是一个持续的估计，并且该估计具有随条件变化的误差范围。有关更多背景知识，请从[GPS 的基本概念（维基百科）](http://en.wikipedia.org/wiki/GPS#Basic_concept_of_GPS)开始。

从最基本的意义上说，精度是该设备、位置和时间的 GPS 条件的结果，并且不能由开发人员直接控制，至少不能通过任何软件机制进行控制。但是，如果您查看[`LocationService.Start()`(Unity)](http://docs.unity3d.com/Documentation/ScriptReference/LocationService.Start.html)的文档，您会注意到一个`desiredAccuracyInMeters`值。这基本上会影响您必须等待多长时间才能获得所需精度内的可用值。一个精确的值需要更多的时间来产生，而一个粗略的值可能很快就会出现。

水平精度是关于 2d 点的半径，这意味着*真实*的、*未知*的2d 位置位于以给定点为中心、以精度为半径形成的圆内的某个位置。如果给定高度信息，则存在垂直精度，它是一维位置，并且类似地暗示*真实*的*未知*高度位于由中心（给定高度）和“半径”（给定垂直精度）定义的区域内的某处。

另请参阅[`struct LocationInfo`(Unity)](http://docs.unity3d.com/Documentation/ScriptReference/LocationInfo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-14T18:23:20.047

据我了解，水平精度高度是您所在位置的高度，即您所在地区的水位。我相信这是您大部分时间都在寻找的高度，除非您在科罗拉多州。如果您有任何疑问，请查看您所在州的水平精度高度。

# wpf - MVVM 灯光和组合框

> ID：14118062
> 
> 赞同：4
> 
> 时间：2013-01-02T06:58:46.463
> 
> 标签：wpf, combobox, mvvm-light

我是 WPF 和 MVVM Light 的新手，如果您能帮助我，我将不胜感激 :-)

我想知道如何使用 MVVM Light 实现一个组合框来执行以下操作：

1）在组合框中选择一个项目

2) 根据选择的值，更改 GUI 中的其他文本字段。

谢谢您的帮助。

罗曼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:34:06.267

出色地：

看法：

```
<ComboBox ItemsSource="{Binding SourceData}" SelectedItem="{Binding SelectedSourceData,Mode=TwoWay}"/>
<TextBlock Text="{Binding SelectedDataInTextFormat}"/> 
```

视图模型：

```
public class ViewModel:ViewModelBase
{
    public ObservableCollection<Foo> SourceData{get;set;}
    public Foo SelectedSourceData 
    { 
        get{return _selectedFoo;}
        set{_selectedFoo=value;
            RaisePropertyChanged("SelectedSourceData");
            SelectedDataInTextFormat=Foo.ToString();
    }

    public string SelectedDataInTextFormat
    {
        get{return _selectedDataInTextFormat;}
        set{_selectedDataInTextFormat=value;
            RaisePropertyChanged("SelectedDataInTextFormat");
    }
} 
```

基本上，要确保您的视图模型能够从组合框中接收更新的选定项，请确保将 SelectedItem 绑定设置为 Mode=TwoWay。为了确保在视图模型中发生更改时将数据从视图模型推送到视图，请确保为要在视图中更新的属性调用 RaisePropertyChanged 帮助器类。

# c# - 程序集签名、证书和密钥文件 - 需要这些吗？

> ID：14118067
> 
> 赞同：0
> 
> 时间：2013-01-02T06:59:37.867
> 
> 标签：c#, visual-studio-2010, deployment, certificate, strongname

我想开始签署我的程序集，以便它们可以部署到[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)并在多个应用程序之间共享/重用等。

Microsoft 提供了很多文档，但并没有真正向我解释——尤其是当您在其中添加 ClickOnce 部署时。

有一个密钥和一个证书：我可以使用`sn.exe`and自己创建`makecert.exe`这些工具，还是这些工具仅用于开发并且我需要从[CA](https://en.wikipedia.org/wiki/Certificate_authority)（例如[Verisign ）获取它们？](http://en.wikipedia.org/wiki/Verisign)

密钥和证书有什么区别？

我可以为我的所有应用程序重复使用密钥和证书（这是我想要做的）吗？

我应该提供什么名称（文件扩展名）密钥/证书？ClickOnce 自动创建一个`.pfx`文件 - 是使用 sn.exe 创建的还是应该创建的`.snk?`

鉴于我的所有应用程序都是公司内部的，并且我们已决定不使用 ClickOnce 而是通过 MSI 文件进行部署 - 我是否需要担心这一点？

我不需要将文件部署到 GAC - 这只是我一直在阅读的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:01:41.237

部署到 GAC 所需的只是强名称签名。.NET 运行时使用强名称来标识程序集并包括名称、版本和数字签名。`.snk`强名称工具（ ）可以生成强名称密钥文件（`sn.exe`）。拥有密钥文件后，您可以使用该工具手动签署程序集或更改项目设置以在构建时自动签署程序集。

验证这些数字签名不涉及证书颁发机构 (CA)。没有什么可以阻止程序集被不同的密钥辞职，它只是不是你的密钥。我还要注意它们是不可撤销的，所以你应该保证它们的安全。

您当然可以对您发布的所有程序集使用相同的密钥。

[更多](http://msdn.microsoft.com/en-us/library/h4fa028b%28v=vs.80%29.aspx)关于强名称签名。

数字签名（例如 Authenticode）是一种不同的机制，可以识别程序集并具有一些附加功能。它们可用于验证程序集未被篡改，并且证书可被 CA 撤销。`Makecert.exe`是用于创建内部测试证书的开发工具。

# testing - 在 CSV 中制作摘要报告 Jmeter 输出，它在表格中显示

> ID：14118068
> 
> 赞同：5
> 
> 时间：2013-01-02T06:59:40.593
> 
> 标签：testing, jmeter, load-testing, stress-testing

为存储 Jmeter 摘要报告的结果而给出的文件名应该（据我所知）存储我在屏幕上看到的相同信息。但相反，它存储了这样发送的 HTTP 请求的简短响应：

```
<httpSample t="72" lt="66" ts="1305479685437" s="true" lb="login" rc="200" rm="OK" tn="Virtual users 1-1" dt="text" by="12978"> 
```

我将文件名定义为 .csv 文件

知道如何将其变成屏幕摘要报告的副本（样本、平均值、最小值、最大值、Std.Dev 等）吗？

![得到这份报告](../Images/6b65d35d007cf47dbdf63e6666dac6a5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-20T11:08:27.930

要制作 JMeter 输出的摘要报告，您需要执行以下操作：

确保在**jmeter.properties**文件中“结果文件配置”不在注释中，并且您要使用的所有字段都标记为 true，如下所示。

```
<pre><code>
    #---------------------------------------------------------------------------
    # Results file configuration
    #---------------------------------------------------------------------------

    # This section helps determine how result data will be saved.
    # The commented out values are the defaults.

    # legitimate values: xml, csv, db.  Only xml and csv are currently supported.
    jmeter.save.saveservice.output_format=csv

    # true when field should be saved; false otherwise

    # assertion_results_failure_message only affects CSV output
    #jmeter.save.saveservice.assertion_results_failure_message=false
    #
    # legitimate values: none, first, all
    #jmeter.save.saveservice.assertion_results=none
    #
    jmeter.save.saveservice.data_type=false
    jmeter.save.saveservice.label=true
    jmeter.save.saveservice.response_code=true
</code></pre> 
```

然后通过单击**配置**按钮配置摘要报告。 ![在此处输入图像描述](../Images/3627694ad429b5d411c2c4c7af260d09.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:08:19.983

Jp@gc 具有用于将 jmeter 报告导出到 csv 的命令行工具。将保存的 jtl 文件提供给它并使用聚合报告模式。看。[JMeterPluginsCMD 命令行工具文档](http://jmeter-plugins.org/wiki/JMeterPluginsCMD/)寻求帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T06:28:56.200

如果您想将其变成屏幕摘要报告（样本、平均值、最小值、最大值、标准差等）的副本，只需单击“**保存表数据**”按钮，然后将其保存为 .csv 格式。

[![在此处输入图像描述](../Images/f9f94d6363e22b11aef64778a5be1983.png)](https://i.stack.imgur.com/WucBF.png)

你会得到这样的 .csv 文件：

![在此处输入图像描述](../Images/a06d4da7f4bbdcd7f192689085f48045.png)

# matlab - Matlab：奇怪的尝试访问错误...索引必须是pos。整数或逻辑

> ID：14118072
> 
> 赞同：3
> 
> 时间：2013-01-02T06:59:58.130
> 
> 标签：matlab, indexing, syntax-error

我对Matlab并不陌生，但是在这种情况下，我遇到了一个以前没有遇到过的非常奇怪的错误。我试图制作我的代码的简化版本来演示我遇到的错误。基本上，我有索引错误，但正在访问的索引是一个正整数。

我想知道它是否与索引号的格式有关。无论如何，任何帮助或建议将不胜感激。

```
t=(0:0.00001:2*pi);
Cir(1,1:length(t)) = 0;
Cir(2,1:length(t)) = 0;
Cir(3,1:length(t)) = 0;

D0(1:length(t)) = 0;

% Search for the first minimum
[min1D0,t1Found] = min(abs(D0(1:length(t)/2)));
% Search for the second minimum
[min2D0,t2Found] = min(abs(D0(length(t)/2:length(t))));
t2Found = t2Found + length(t)./2; % Add tIndex/2 to correct the index

C1 = [Cir(1,t1Found),Cir(2,t1Found),Cir(3,t1Found)];
C2 = [Cir(1,t2Found),Cir(2,t2Found),Cir(3,t2Found)]; 
```

输出是：

```
Warning: Integer operands are required for colon operator when used as index 
Warning: Integer operands are required for colon operator when used as index 
??? Attempted to access Cir(1,314161); index must be a positive integer or logical. 
```

注意：我使用的是 R2009b。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:22:15.340

`length(t)`是 628319，这是一个奇数。

您正在尝试访问

```
DO(length(t)/2) 
```

哪里`length(t)/2`是 314159.5。

数组索引必须是整数，这就是您收到该警告的原因。

同样的事情发生在`t2Found`. 它不是整数。

```
t2Found = t2Found + length(t)./2; 
```

结果为 314160.5。

* * *

作为旁注，您可以使用该`zeros`功能进行预分配。

```
Cir = zeros(3, length(t)); 
```

会给你同样的结果。

# asp.net - 如何更改条形图中条形的宽度

> ID：14118073
> 
> 赞同：0
> 
> 时间：2013-01-02T07:00:01.150
> 
> 标签：asp.net, telerik

这是我的代码：-

```
<telerik:RadChart  OnClick="radChart1_Click" PlotArea-Appearance-FillStyle-MainColor="Transparent" 
     PlotArea-Appearance-FillStyle-SecondColor="Transparent"   ID="RadChart1" 
     runat="server" IntelligentLabelsEnabled="True" PlotArea-Visible="True" 
     Skin="Office2007" style="margin-left: 0px"  AutoLayout="true" Height="400px" Width="680px" >                 
                              <Appearance>
                                  <Border Color="134, 134, 134" />
                              </Appearance>
                              <Series>
                                  <telerik:ChartSeries Name="Series 1">
                                      <Appearance>
                                          <FillStyle FillType="Solid" MainColor="69, 115, 167">
                                          </FillStyle>
                                          <TextAppearance TextProperties-Color="Black">
                                          </TextAppearance>
                                          <Border Color="69, 115, 167" />
                                      </Appearance>
                                  </telerik:ChartSeries>
                                  <telerik:ChartSeries Name="Series 2">
                                      <Appearance>
                                          <FillStyle FillType="Solid" MainColor="107, 70, 68">
                                          </FillStyle>
                                          <TextAppearance TextProperties-Color="Black">
                                          </TextAppearance>
                                          <Border Color="107, 70, 68" />
                                      </Appearance>
                                  </telerik:ChartSeries>
                              </Series>
                              <Legend>
                                  <Appearance Dimensions-Margins="15%, 2%, 1px, 1px" 
                                      Dimensions-Paddings="2px, 8px, 6px, 3px">
                                      <ItemTextAppearance TextProperties-Color="Black">
                                      </ItemTextAppearance>
                                      <ItemMarkerAppearance Figure="Square">
                                      </ItemMarkerAppearance>
                                  </Appearance>
                              </Legend>
                              <PlotArea>
                                  <XAxis>
                                      <Appearance Color="134, 134, 134" MajorTick-Color="134, 134, 134">
                                          <MajorGridLines Color="134, 134, 134" Width="0" />
                                          <TextAppearance TextProperties-Color="Black">
                                          </TextAppearance>
                                      </Appearance>
                                      <AxisLabel>
                                          <TextBlock>
                                              <Appearance TextProperties-Color="Black">
                                              </Appearance>
                                          </TextBlock>
                                      </AxisLabel>
                                  </XAxis>
                                  <YAxis>
                                      <Appearance Color="134, 134, 134" MajorTick-Color="134, 134, 134" 
                                          MinorTick-Color="134, 134, 134">
                                          <MajorGridLines Color="134, 134, 134" />
                                          <MinorGridLines Color="134, 134, 134" />
                                          <TextAppearance TextProperties-Color="Black">
                                          </TextAppearance>
                                      </Appearance>
                                      <AxisLabel>
                                          <TextBlock>
                                              <Appearance TextProperties-Color="Black">
                                              </Appearance>
                                          </TextBlock>
                                      </AxisLabel>
                                  </YAxis>
                                  <Appearance>
                                      <FillStyle MainColor="Transparent" SecondColor="Transparent">
                                      </FillStyle>
                                  </Appearance>
                              </PlotArea>
                              <ChartTitle>
                                  <Appearance>
                                      <FillStyle MainColor="">
                                      </FillStyle>
                                  </Appearance>
                                  <TextBlock Text="Ratio">
                                      <Appearance TextProperties-Color="Black" TextProperties-Font="Arial, 18px">
                                      </Appearance>
                                  </TextBlock>
                              </ChartTitle>

                        </telerik:RadChart> 
                     </td>
                </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T04:31:04.983

这段代码在 c# 中工作： `chartname.Appearance.BarWidthPercent = 30;`

# jpa - JPA 在运行时更改实体表名称

> ID：14118075
> 
> 赞同：0
> 
> 时间：2013-01-02T07:00:07.050
> 
> 标签：jpa

我在 MySql 中有两个具有相同架构和数据的表。一种是使用 InnoDB 引擎，另一种是使用 MyISAM 引擎。

我已将 JPA 实体映射到 InnoDB 实体，并触发更新 MyISAM 实体，但在查询记录时，我想将 MyISAM 版本的表与 JPA 查询一起使用，但同时我无法为 MyISAM 实体创建实体，因为它会增加维护和复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:29:53.317

我会创建一个 @MappedSuperclass 并为每个表创建两个子类。

否则，如果您使用 EclipseLink，您可以映射到您希望从中读取的表，然后通过 DescriptorQueryManager 使用 DescriptorCustomizer 覆盖插入、更新和删除操作。

# javascript - Socket IO 服务器到服务器

> ID：14118076
> 
> 赞同：46
> 
> 时间：2013-01-02T07:00:16.310
> 
> 标签：javascript, socket.io

服务器是否可以使用 Socket.IO 连接到另一个服务器并被视为客户端？

让它加入房间，接收 io.sockets.in('lobby').emit()。和更多？

第一个服务器也在监听连接/消息。

嘿布拉德，下面是我的完整 .js 应用程序供参考：

```
var io = require("socket.io").listen(8099);
io.set('log level', 1);

io.sockets.on("connection", function (socket) {

    console.log('A Client has Connected to this Server');

    //Let Everyone Know I just Joined   
    socket.broadcast.to('lobby').emit("message",'UC,' + socket.id); // Send to everyone in Room but NOT me  

socket.on("message", function (data) {

//Missing code
socket2.send('message,' + data); //Forward Message to Second Server

});

socket.on("disconnect", function (data) {
    //Send Notification to Second Server
    //Need to figure out later

    //Send Notification to Everyone
    socket.broadcast.emit("message",'UD,' + socket.id ); //Send to Everyone but NOT me

    //Remove user from Session ID
    arSessionIDs.removeByValue(socket.id);      

    //Send Notification to Console
    console.log("disconnecting " + arRoster[socket.id][1]);
});

});

var io_client = require( 'socket.io-client' );
var socket2 = io_client.connect('http://192.168.0.104:8090');
socket2.on('connect', function () {
socket2.emit('C3434M,Test');
}); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-02T07:02:07.877

是的，一点没错。只需直接在您的服务器应用程序中使用 Socket.IO 客户端。

[https://github.com/LearnBoost/socket.io-client](https://github.com/LearnBoost/socket.io-client)

您可以使用`npm install socket.io-client`. 然后使用：

```
var socket = io.connect('http://example.com');
socket.on('connect', function () {
  // socket connected
  socket.emit('server custom event', { my: 'data' });
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-09T15:03:21.287

我意识到这是一篇旧帖子，但我正在做类似的事情，并决定回来贡献一些东西，因为它让我思考。

这是一个基本的客户端 -> 服务器 1 -> 服务器 2 设置

服务器 #1

```
// Server 1
var io = require("socket.io").listen(8099); // This is the Server for SERVER 1
var other_server = require("socket.io-client")('http://example.com:8100'); // This is a client connecting to the SERVER 2

other_server.on("connect",function(){
    other_server.on('message',function(data){
        // We received a message from Server 2
        // We are going to forward/broadcast that message to the "Lobby" room
        io.to('lobby').emit('message',data);
    });
});

io.sockets.on("connection",function(socket){
    // Display a connected message
    console.log("User-Client Connected!");

    // Lets force this connection into the lobby room.
    socket.join('lobby');

    // Some roster/user management logic to track them
    // This would be upto you to add :)

    // When we receive a message...
    socket.on("message",function(data){
        // We need to just forward this message to our other guy
        // We are literally just forwarding the whole data packet
        other_server.emit("message",data);
    });

    socket.on("disconnect",function(data){
        // We need to notify Server 2 that the client has disconnected
        other_server.emit("message","UD,"+socket.id);

        // Other logic you may or may not want
        // Your other disconnect code here
    });
}); 
```

这是服务器＃2

```
// Server 2
var io = require("socket.io").listen(8100);
io.sockets.on("connection",function(socket){
    // Display a connected message
    console.log("Server-Client Connected!");

    // When we receive a message...
    socket.on("message",function(data){
        // We got a message. I don't know, what we should do with this
    });
}); 
```

这是我们的客户，他发送原始消息。

```
// Client
var socket = io('http://localhost');
socket.on('connect', function(){
    socket.emit("message","This is my message");

    socket.on('message',function(data){
        console.log("We got a message: ",data);
    });
}); 
```

我将这篇文章制作为社区 Wiki，以便有人可以在他们喜欢的情况下对其进行改进。

*代码未经测试，使用风险自负。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-10T04:30:42.120

我有同样的问题，但`socket.io-client`我决定使用更简单的方法（至少对我来说）使用 redis pub/sub，结果非常简单。

您可以在这里查看我的解决方案：[https ://github.com/alissonperez/scalable-socket-io-server](https://github.com/alissonperez/scalable-socket-io-server)

使用此解决方案，您可以获得所需的进程/服务器数量（使用自动缩放解决方案），您只需使用 redis 作为在服务器之间转发消息的一种方式。

# sql - 我正在尝试正确的库存管理逻辑

> ID：14118079
> 
> 赞同：0
> 
> 时间：2013-01-02T07:00:30.527
> 
> 标签：sql

我有一张 StockManagement 表，它看起来像这样

```
PId          Qty             Dateof Booking           DateOfReturning
1              5               1 Jan 2013               3 Jan 2013
1              5               1 Jan 2013               4 Jan 2012 
```

现在假设我有 10 件产品 A。正如我的表格所示，我从 1 月 1 日到 1 月 3 日有第 5 期产品 A，从 1 月 1 日到 1 月 4 日还有 5 期。现在我的客户想要从 1 月 4 日到 7 日预订产品 A一月。正如您在表中看到的，5 产品 A 将在 1 月 3 日返回，所以我可以从 1 月 4 日开始发布 5 产品。这就是我想通过查询来做的事情。

所以请帮助我获得两个日期之间的可用数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:25:54.520

```
declare @BkDate datetime, @qty int, @Pid int
select @BkDate='04-Jan-2013', @qty=5, @Pid=1

select sum(Qty) AvailableQty 
from StockManagement 
where 
  Id=@Pid AND 
  @BkDate not between DateOfBooking and DateOfReturning
having sum(Qty)>=@qty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:06:22.650

```
select count(s1.qty) from StockManagement s1 inner join
StockManagement s2 on s1.PId=s2.PId
where to_date(s1.DateofBooking,'dd/mm/yyyy') not 
between to_date(s2.DateofBooking,'dd/mm/yyyy') and 
to_date(s2.DateOfReturning,'dd/mm/yyyy') 
```

尝试这个。同时我会尝试给你发布一个现场演示

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!4/e41f1/1)

# jquery - toggleClass() 不适用于 div

> ID：14118080
> 
> 赞同：0
> 
> 时间：2013-01-02T07:00:33.637
> 
> 标签：jquery, html, css

我一直在网站上工作并遇到问题。在我的常见问题解答中，我有一个下拉菜单和一个提交按钮，用于链接到常见问题解答的不同部分。这完美地工作。提交按钮触发一个 javascript 函数，该函数动态链接到页面上的相应锚点。另外，我希望下拉菜单选择的问题以橙色突出显示。我得到了高光出现，但只是在它闪现之前的一瞬间。我想知道如何使亮点停留，而不是闪现？我不确定为什么会这样。另外，如何使用 jQuery 使高亮淡入淡出？我知道如何通过隐藏 div 然后使用 .fade() 来做到这一点，但这会导致所有文本消失。非常感谢！

这是一个小提琴： http: [//jsfiddle.net/UjPtv/](http://jsfiddle.net/UjPtv/)但它不能完全工作，因为当你提交它时会出现错误。我认为这是因为 jsfiddle 不允许提交，即使这个提交只是运行一些 javascript。如果您知道解决方法，请告诉我，以便我更新链接！谢谢！

javascript:

```
var toggled = 0;
function jump_to (location) {
if(toggled == 0){
    toggled = 1;
    window.location.href = "#" + location;
    $("#wrap"+location).toggleClass("wraps_active");
}
}​ 
```

html:

```
<div id = "main">
        <h2 class = "center">FACTS YOU NEED</h2>
        <h3>The Core Facts You Want To Know</h3>
        <div class = "border">
        <p>
            Jump To: 
              <form onsubmit = "jump_to(jump_list.value)">
              <select name = "jump_list">
              <option value="1">Who can go to the camp?</option>
              <option value="2"><a href = "contact_information.html">When do we check in and out?</a></option>
            </select>
            <input type = "submit" value = "Go"/>
            </form>
        </p>
        </div>
        <div id = "wrap1" class = "wraps">
        <h4><a name = "1"></a>Who can go to the camp? </h4>
        <p>
            The camp is for kids ages 9 to 17 years old who have been diagnosed with celiac disease, a condition that requires life-long adherence to a gluten-free diet.  Given limited space, we are unable to accommodate kids on gluten-free diets for other reasons (such as autism spectrum disorders).  Campers ages 16-17 years may choose to volunteer as junior counselors.  Junior counselors assist the adult volunteers, and for first session junior counselors need to arrive a day early (on Monday) for the staff orientation and training.  If there are more junior counselor applicants than there is available space, priority is given based on age, gender-need, and prior camp experience.
        </p>
        </div>
        <div id = "wrap2" class = "wraps">
        <h4><a name = "2"></a>When do we check in and out?</h4>
        <p>
            Check-in: Please see the "Calendar" on the left hand side of the website for details about each camp.Please do not arrive early.
            </br><br/>
            Check-out:  All campers must be checked out by the stated time so camp can be prepared for the next group, see the "Calendar" for date information.
        </p>
        </div>

    </div>​ 
```

CSS：

```
.wraps{
border-bottom:1px dashed #C3C3C3;
}
.wraps_active{
border-bottom:1px dashed #C3C3C3;
background:#FFB280;
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T07:22:15.667

每次提交表单时，清除所有活动的包装类并仅为选定的包装类添加它。

```
$('form input[type=submit]').click(function(e) {
    e.preventDefault();

    var location = $('select[name=jump_list]').val();
    window.location.href = "#" + location;

    $('.wraps').removeClass('wraps_active');
    $("#wrap"+location).addClass("wraps_active");
}); 
```

这是[小提琴](http://jsfiddle.net/UjPtv/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:10:38.183

请试试这个

```
 $("#wrap"+location).addClass("wraps_active"); 
```

代替`toggleClass`

# jquery - 太多的html元素减慢jquery

> ID：14118084
> 
> 赞同：1
> 
> 时间：2013-01-02T07:01:02.593
> 
> 标签：jquery, html, performance

我有一个 js 脚本来获取数据源并根据响应文本构建一些 div。

我已经使用 web worker 和 ajax 来拆分读取数据馈送并构建 html 代码过程。

但是，当我将 html 附加到我的容器时，它变得很慢（比如说 18000 的 div）

然后我更改方法以将 200 div 附加到我的容器向下滚动。

它变得非常快，但是当所有项目渲染时，其他进程开始变慢，例如，如果我让容器显示和隐藏，它就很慢。

我发现另一个解决方案是使用 z-index，它使显示隐藏过程更快。

但是，虽然我需要更改容器内容，但它又变慢了。

有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:59:08.447

在实时 DOM 结构之外执行尽可能多的更改将提高性能。要了解更多信息，请查看[如何提高页面中 java 脚本的性能？](http://jqfaq.com/how-to-improve-the-performance-of-your-java-script-in-your-page/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:19:24.110

我遇到过类似的情况，我在树中的一个节点中添加了很多孩子。

**问题**

1.  页面很慢。
2.  元素的渲染很慢，有时甚至 JS 在 IE 中崩溃。

**解决方案**

1.  我创建了在一个实例中将出现在 DOM 中的数字元素的上限。假设最初有 500 个元素，然后有另一个 ajax 请求将获取大约 500 个节点，所以我会清除一些元素。如果您可以管理清算方案，它会有所帮助。
2.  没有内联 CSS 样式，它看起来会产生什么差异，但保留 CSS 类中的所有样式会提高性能。
3.  定义适当的 HTML 结构，例如不保留任何悬空的 div、span 等。
4.  通过适当的委托（如“on”）附加事件处理程序。

可以做很多事情来改善这一点。如果你可以为此发布一个 jsfiddle 肯定会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:20:51.390

问题已解决 SlickGrid 可以轻松处理

# javascript - “正文加载”在 IE6 中不起作用？

> ID：14118086
> 
> 赞同：0
> 
> 时间：2013-01-02T07:01:09.753
> 
> 标签：javascript, html, onload-event

它`<body onload="sample()">`在除 IE6 之外的所有其他浏览器中工作。`window.onload`在IE6中也不起作用。代码如下，

```
<!DOCTYPE html>
<html>
<head> 
<script type="application/javascript"> 
function sample() 
{
alert("hi"); 
} 
</script> 
</head>
<body onload="sample()"> ..... </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:01:09.753

更改`<script type="application/javascript">`为`<script type="text/javascript">`，它的工作原理！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:07:57.157

如果脚本是 Javascript ，`<!DOCTYPE html>`我相信脚本类型属性是可选的。

# elasticsearch - 如何使用 Elasticsearch 更新 API 更新文档？

> ID：14118091
> 
> 赞同：3
> 
> 时间：2013-01-02T07:01:31.663
> 
> 标签：elasticsearch

我在 Elasticsearch 中索引了一个文档，如下所示：

```
{
 _parent: chow-demo
 _index: prototype_2013.01.02
 _type: chow-clfg
 _id: Nx4JcvyxTPujkyy0Jq5BNw
 _score: 11.600378
 _source: {
  chow-clfg: {
  @type: chow-clfg
  clfg: Cg5iV00z4woYAAAARQ0
  @timestamp: 2013-01-02T06:26:00.000Z
  count: 1
  }
 }
} 
```

我尝试通过以下命令更新计数字段：

```
curl -XPOST 'localhost:9200/prototype_2013.01.02/chow-clfg/Nx4JcvyxTPujkyy0Jq5BNw/_update' -d '{"script":"ctx._source.chow-clfg.count+=num","params":{"num":1}}' 
```

但是，我收到了以下错误：

```
{"error":"RemoteTransportException[[Vesta][inet[/10.15.78.249:9300]][update]]; nested: DocumentMissingException[[prototype_2013.01.02][0] [chow-clfg][Nx4JcvyxTPujkyy0Jq5BNw]: document missing]; ","status":404} 
```

我到底做了什么遗漏的事情？我正在关注[http://www.elasticsearch.org/guide/reference/api/update.html](http://www.elasticsearch.org/guide/reference/api/update.html)上的文档，但它不起作用。

另外，我包括了父字段：

```
curl -XPOST 'localhost:9200/prototype_2013.01.02/chow-clfg/Nx4JcvyxTPujkyy0Jq5BNw/_update' -d '{"parent":"chow-demo","script":"ctx._source.chow-clfg.count+=num","params":{"num":1}}' 
```

它仍然没有工作。任何人都可以帮助我解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:30:21.957

基本上是不正确的语法导致了无法更新的问题。

错误：

```
curl -XPOST 'localhost:9200/prototype_2013.01.02/chow-clfg/Nx4JcvyxTPujkyy0Jq5BNw/_update'  \
    -d '{"script":"ctx._source.chow-clfg.count+=num","params":{"num":1}}' 
```

正确的语法：

```
curl -XPOST 'localhost:9200/prototype_2013.01.02/chow-clfg/Nx4JcvyxTPujkyy0Jq5BNw/_update?parent=chow-demo'
    -d '{"script":"ctx._source[\"chow-demo\"].count+=num","params":{"num":1}}' 
```

应该包括父映射，以及正确语法中的类型名称：

```
ctx._source[\"chow-demo\"].count+=num 
```

# iphone - 更新表格视图单元格中的核心数据值后如何刷新

> ID：14118092
> 
> 赞同：0
> 
> 时间：2013-01-02T07:01:31.527
> 
> 标签：iphone, objective-c, core-data

我在我的应用程序中使用核心数据。我有一个两个视图控制器一个视图控制器在选择书中的任何一个后显示书名列表移动到第二个视图控制器以使用更新按钮将值更新为将显示的 1在核心数据表中。现在回到主视图控制器，在选择同一本书后不会显示第二视图控制器中的值，但核心数据表的值为 1。如何在具有核心数据表值的表视图中重新加载主视图控制器。请任何知道的人帮助我.

下面是源代码

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  if(dictionary!=nil)//net is not connected fetch core data to display the booknames
  {
     UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@" Warning Message" message:@"You are not connect to internet so becoz of loading default values" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
     [alert show];
     [self fetchValueFromDatabase];

  }      

}

-(void)fetchValueFromDatabase
{

 NSFetchRequest *fech=[[NSFetchRequest alloc]init];
 NSEntityDescription *entity=[NSEntityDescription entityForName:@"Bookname" inManagedObjectContext:self.managedObjectContext];
 [fech setEntity:entity];
 NSError *savingError=nil;
 NSArray *allBook=[self.managedObjectContext executeFetchRequest:fech error:&savingError];

 NSLog(@"Array count value:%i",allBook.count);

 coreBookName=[allBook valueForKey:@"bookName"];
 NSLog(@"all value:%@",coreBookName);

 for(NSString *key in coreBookName)
 {
     NSLog(@"Key value:%@",key);  

    [insertBookname addObject:key];
 }

 coreVoteCount=[allBook valueForKey:@"vote"];
 NSLog(@"All vote value:%@",coreVoteCount);
 for(NSString *key in coreVoteCount)
 {
    [bookCount addObject:key];
    NSLog(@"Key value:%@",key);
 }

 for(NSArray *key in allBook)
 {
     [addItems addObject:key];
     NSLog(@"All items:%@",key);
 }
}

- (void)viewWillAppear:(BOOL)animated
 {
    [super viewWillAppear:animated];

    [self.tableview1 reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:06:51.773

从 (void)viewWillAppear:method 调用您的以下方法

```
[self fetchValueFromDatabase];//call this from ViewWillAppear 
```

让我知道它是否有效...

快乐编码.!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:20:23.167

您在 viewDidLoad **[self fetchValueFromDatabase] 中调用它；**和 **[self.tableview1 reloadData];** 这在 viewWillAppear 这就是为什么您没有在表中获得任何更新的原因。

你应该做的是调用**[self.tableview1 reloadData];** 在函数**fetchValueFromDatabase结束时**

```
-(void)fetchValueFromDatabase
{

 NSFetchRequest *fech=[[NSFetchRequest alloc]init];
 NSEntityDescription *entity=[NSEntityDescription entityForName:@"Bookname"  inManagedObjectContext:self.managedObjectContext];
 [fech setEntity:entity];
 NSError *savingError=nil;
 ........................
 .......................

 .......................

 [self.tableview1 reloadData];

} 
```

# python - python中的子类化方法装饰器

> ID：14118093
> 
> 赞同：4
> 
> 时间：2013-01-02T07:01:35.080
> 
> 标签：python, decorator

我很难想到一种好的 python 并且符合 oop 原则的方法，因为我被教导要弄清楚如何在 python 中创建一系列相关的方法装饰器。

相互不一致的目标似乎是我希望能够访问装饰器属性和绑定装饰方法的实例的属性。这就是我的意思：

```
from functools import wraps

class AbstractDecorator(object):
    """
    This seems like the more natural way, but won't work
    because the instance to which the wrapped function
    is attached will never be in scope.
    """
    def __new__(cls,f,*args,**kwargs):
        return wraps(f)(object.__new__(cls,*args,**kwargs))

    def __init__(decorator_self, f):
        decorator_self.f = f
        decorator_self.punctuation = "..."

    def __call__(decorator_self, *args, **kwargs):
        decorator_self.very_important_prep()
        return decorator_self.f(decorator_self, *args, **kwargs)

class SillyDecorator(AbstractDecorator):
    def very_important_prep(decorator_self):
        print "My apartment was infested with koalas%s"%(decorator_self.punctuation)

class UsefulObject(object):
    def __init__(useful_object_self, noun):
        useful_object_self.noun = noun

    @SillyDecorator
    def red(useful_object_self):
        print "red %s"%(useful_object_self.noun)

if __name__ == "__main__":
    u = UsefulObject("balloons")
    u.red() 
```

这当然会产生

```
My apartment was infested with koalas...
AttributeError: 'SillyDecorator' object has no attribute 'noun' 
```

请注意，当然总有办法让它发挥作用。例如，一个有足够参数的工厂可以让我将方法附加到某些已创建的 SillyDecorator 实例，但我有点想知道是否有合理的方法通过继承来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:30:11.560

改编自[http://metapython.blogspot.de/2010/11/python-instance-methods-how-are-they.html](http://metapython.blogspot.de/2010/11/python-instance-methods-how-are-they.html)。请注意，此变体在*目标*实例上设置属性，因此，无需检查，就可以覆盖目标实例属性。下面的代码不包含对这种情况的任何检查。

另请注意，此示例`punctuation`明确设置了属性；一个更通用的类可以自动发现它的属性。

```
from types import MethodType

class AbstractDecorator(object):
    """Designed to work as function or method decorator """
    def __init__(self, function):
        self.func = function
        self.punctuation = '...'
    def __call__(self, *args, **kw):
        self.setup()
        return self.func(*args, **kw)
    def __get__(self, instance, owner):
        # TODO: protect against 'overwrites'
        setattr(instance, 'punctuation', self.punctuation) 
        return MethodType(self, instance, owner)

class SillyDecorator(AbstractDecorator):
    def setup(self):
        print('[setup] silly init %s' % self.punctuation)

class UsefulObject(object):
    def __init__(self, noun='cat'):
        self.noun = noun

    @SillyDecorator
    def d(self): 
        print('Hello %s %s' % (self.noun, self.punctuation))

obj = UsefulObject()
obj.d()

# [setup] silly init ...
# Hello cat ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T07:45:43.413

@miku 得到了使用描述符协议的关键思想。这是一个将装饰器对象与“有用对象”分开的改进——它不将装饰器信息存储在底层对象上。

```
class AbstractDecorator(object):
    """
    This seems like the more natural way, but won't work
    because the instance to which the wrapped function
    is attached will never be in scope.
    """
    def __new__(cls,f,*args,**kwargs):
        return wraps(f)(object.__new__(cls,*args,**kwargs))

    def __init__(decorator_self, f):
        decorator_self.f = f
        decorator_self.punctuation = "..."

    def __call__(decorator_self, obj_self, *args, **kwargs):
        decorator_self.very_important_prep()
        return decorator_self.f(obj_self, *args, **kwargs)

    def __get__(decorator_self, obj_self, objtype):
        return functools.partial(decorator_self.__call__, obj_self)      

class SillyDecorator(AbstractDecorator):
    def very_important_prep(decorator_self):
        print "My apartment was infested with koalas%s"%(decorator_self.punctuation)

class UsefulObject(object):
    def __init__(useful_object_self, noun):
        useful_object_self.noun = noun

    @SillyDecorator
    def red(useful_object_self):
        print "red %s"%(useful_object_self.noun)

>>> u = UsefulObject("balloons")
... u.red()
My apartment was infested with koalas...
red balloons 
```

描述符协议是这里的关键，因为它使您可以访问装饰方法和绑定它的对象。在内部`__get__`，您可以提取有用的对象标识 ( `obj_self`) 并将其传递给`__call__`方法。

请注意，使用`functools.partial`（或某种此类机制）而不是简单地存储`obj_self`为`decorator_self`. 由于装饰方法在类上，因此只存在一个 SillyDecorator 实例。您不能使用此 SillyDecorator 实例来存储特定于有用对象实例的信息 --- 如果您创建多个有用对象并访问它们的修饰方法而不立即调用它们，这将导致奇怪的错误。

不过，值得指出的是，可能有更简单的方法。在您的示例中，您只在装饰器中存储了少量信息，以后不需要更改它。如果是这种情况，只使用装饰器生成器函数可能会更简单：一个接受一个参数（或多个参数）并返回一个装饰器的函数，其行为可以依赖于这些参数。这是一个例子：

```
def decoMaker(msg):
    def deco(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            print msg
            return func(*args, **kwargs)
        return wrapper
    return deco

class UsefulObject(object):
    def __init__(useful_object_self, noun):
        useful_object_self.noun = noun

    @decoMaker('koalas...')
    def red(useful_object_self):
        print "red %s"%(useful_object_self.noun)

>>> u = UsefulObject("balloons")
... u.red()
koalas...
red balloons 
```

如果您不想在每次制作装饰器时重新输入消息，您可以提前使用 decoMaker 制作装饰器以供以后重用：

```
sillyDecorator = decoMaker("Some really long message about koalas that you don't want to type over and over")

class UsefulObject(object):
    def __init__(useful_object_self, noun):
        useful_object_self.noun = noun

    @sillyDecorator
    def red(useful_object_self):
        print "red %s"%(useful_object_self.noun)

>>> u = UsefulObject("balloons")
... u.red()
Some really long message about koalas that you don't want to type over and over
red balloons 
```

您可以看到，这比为不同类型的装饰器编写完整的类继承树要简单得多。除非您正在编写存储各种内部状态的超级复杂的装饰器（无论如何这可能会让人感到困惑），否则这种装饰器制造方法可能是一种更简单的方法。

# javascript - 如何在 javascript 文件中获取 Wordpress 中的当前插件目录？

> ID：14118094
> 
> 赞同：1
> 
> 时间：2013-01-02T07:01:42.963
> 
> 标签：javascript, wordpress

我是 wordpress 的新手，正在为 wordpress 网站做一个插件。这是我的一个问题，我想在 javascript 文件中动态地使用我的插件名称获取插件 url。请建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:45:05.847

函数[wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)使您能够编写定义了多个变量的 JavaScript 对象。像 ：

```
<?php wp_localize_script('some_handle', 'object_name', array( 'plugin_url' => plugins_url() )); ?> 
```

# html - xulrunner 17.0.1 浏览器内容链接需要在 Mac OSX 10.7.x 上双击（而不是单击）

> ID：14118104
> 
> 赞同：0
> 
> 时间：2013-01-02T07:02:11.777
> 
> 标签：html, osx-lion, xulrunner

我正在使用 xulrunner 17.0.1 将基于 Web 的 HTML 5 应用程序转换为独立的桌面应用程序。目标平台是 Window XP + 和 Mac 10.6 +。

虽然我可以在窗口上使用 XULRunner 打包和运行我的 HTML 5 应用程序而没有任何问题，但我在 Mac 上遇到了一个奇怪的问题。一切似乎都工作正常，除了我必须双击（而不是单击）我的 HTML 5 应用程序的链接以使其工作。

为了确保问题不在 HTML 5 应用程序中，我在浏览器组件中打开了 mozilla/其他网站，发现问题出在任何内容上。

我需要更改任何偏好设置吗？

谢谢-pk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:02:22.957

我找出了问题的原因。我从终端运行我的应用程序，不知何故，焦点总是回到终端窗口，因此链接只能在双击时工作。第一次点击我的应用程序窗口获得焦点，第二次点击链接正在注册点击事件。同样，文本框也没有从键盘输入。

我使用“https://developer.mozilla.org/en-US/docs/XULRunner/Deploying_XULRunner_1.8”中提供的指南将我的应用程序打包为一个应用程序，这解决了所有问题。一切都开始按预期工作。

# php - 从多维数组中排序浮点数

> ID：14118105
> 
> 赞同：2
> 
> 时间：2013-01-02T07:02:14.417
> 
> 标签：php, arrays

我有这个数组：

```
Array
(
  [0] => Array
  (
    [company_id] => 1
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [1] => Array
  (
    [company_id] => 3
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [2] => Array
  (
    [company_id] => 4
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [3] => Array
  (
    [company_id] => 5
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [4] => Array
  (
    [company_id] => 6
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [5] => Array
  (
    [company_id] => 7
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [6] => Array
  (
    [company_id] => 11
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [7] => Array
  (
    [company_id] => 12
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [8] => Array
  (
    [company_id] => 13
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [9] => Array
  (
    [company_id] => 14
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [10] => Array
  (
    [company_id] => 15
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [11] => Array
  (
    [company_id] => 16
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [12] => Array
  (
    [company_id] => 17
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [13] => Array
  (
    [company_id] => 18
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [14] => Array
  (
    [company_id] => 19
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [15] => Array
  (
    [company_id] => 20
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [16] => Array
  (
    [company_id] => 21
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [17] => Array
  (
    [company_id] => 22
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [18] => Array
  (
    [company_id] => 23
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [19] => Array
  (
    [company_id] => 25
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [20] => Array
  (
    [company_id] => 26
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [21] => Array
  (
  [company_id] => 27
  [avg_company] =>
  [avg_product] =>
  [avg_service] =>
  [avg_price] =>
  [avg_rating] => 0
  )

  [22] => Array
  (
    [company_id] => 28
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [23] => Array
  (
    [company_id] => 29
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [24] => Array
  (
    [company_id] => 30
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [25] => Array
  (
    [company_id] => 31
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [26] => Array
  (
    [company_id] => 32
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [27] => Array
  (
    [company_id] => 33
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [28] => Array
  (
    [company_id] => 34
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [29] => Array
  (
    [company_id] => 35
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [30] => Array
  (
    [company_id] => 36
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [31] => Array
  (
    [company_id] => 37
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [32] => Array
  (
    [company_id] => 38
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [33] => Array
  (
    [company_id] => 39
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [34] => Array
  (
    [company_id] => 40
    [avg_company] => 4.00000
    [avg_product] => 2.00000
    [avg_service] => 5.00000
    [avg_price] => 5.00000
    [avg_rating_remark] => Solid
    [avg_rating] => 4.0
  )

  [35] => Array
  (
    [company_id] => 41
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [36] => Array
  (
    [company_id] => 42
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [37] => Array
  (
    [company_id] => 43
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [38] => Array
  (
    [company_id] => 44
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [39] => Array
  (
    [company_id] => 45
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [40] => Array
  (
    [company_id] => 46
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [41] => Array
  (
    [company_id] => 47
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [42] => Array
  (
    [company_id] => 48
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [43] => Array
  (
    [company_id] => 49
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [44] => Array
  (
    [company_id] => 50
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [45] => Array
  (
    [company_id] => 51
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [46] => Array
  (
    [company_id] => 52
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [47] => Array
  (
    [company_id] => 53
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [48] => Array
  (
    [company_id] => 55
    [avg_company] => 4.50000
    [avg_product] => 4.50000
    [avg_service] => 4.50000
    [avg_price] => 3.00000
    [avg_rating_remark] => Solid
    [avg_rating] => 4.1
  )

  [49] => Array
  (
    [company_id] => 58
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [50] => Array
  (
    [company_id] => 61
    [avg_company] => 5.00000
    [avg_product] => 5.00000
    [avg_service] => 5.00000
    [avg_price] => 5.00000
    [avg_rating_remark] => Excellent
    [avg_rating] => 5.0
  )

  [51] => Array
  (
    [company_id] => 62
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )
) 
```

我想对键值**avg_rating**进行降序排序，所以我根据其他 SO 问题使用它：

```
usort($ret, function($a, $b) {
  return $a['avg_rating'] - $b['avg_rating'];
}); 
```

但是结果不对：

```
Array
(
  [0] => Array
  (
    [company_id] => 39
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [1] => Array
  (
    [company_id] => 38
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [2] => Array
  (
    [company_id] => 41
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [3] => Array
  (
    [company_id] => 42
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [4] => Array
  (
    [company_id] => 43
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [5] => Array
  (
    [company_id] => 37
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [6] => Array
  (
    [company_id] => 36
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [7] => Array
  (
    [company_id] => 32
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [8] => Array
  (
    [company_id] => 33
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [9] => Array
  (
    [company_id] => 34
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [10] => Array
  (
    [company_id] => 35
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [11] => Array
  (
    [company_id] => 44
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [12] => Array
  (
    [company_id] => 45
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [13] => Array
  (
    [company_id] => 52
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [14] => Array
  (
    [company_id] => 53
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [15] => Array
  (
    [company_id] => 58
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [16] => Array
  (
    [company_id] => 62
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [17] => Array
  (
    [company_id] => 51
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [18] => Array
  (
    [company_id] => 50
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [19] => Array
  (
    [company_id] => 46
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [20] => Array
  (
    [company_id] => 47
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [21] => Array
  (
    [company_id] => 48
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [22] => Array
  (
    [company_id] => 49
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [23] => Array
  (
    [company_id] => 1
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [24] => Array
  (
    [company_id] => 31
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [25] => Array
  (
    [company_id] => 13
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [26] => Array
  (
    [company_id] => 12
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [27] => Array
  (
    [company_id] => 14
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [28] => Array
  (
    [company_id] => 15
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [29] => Array
  (
    [company_id] => 16
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [30] => Array
  (
    [company_id] => 11
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [31] => Array
  (
    [company_id] => 7
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [32] => Array
  (
    [company_id] => 3
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [33] => Array
  (
    [company_id] => 4
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [34] => Array
  (
    [company_id] => 5
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [35] => Array
  (
    [company_id] => 6
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [36] => Array
  (
    [company_id] => 30
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [37] => Array
  (
    [company_id] => 17
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [38] => Array
  (
    [company_id] => 26
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [39] => Array
  (
    [company_id] => 25
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [40] => Array
  (
    [company_id] => 27
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [41] => Array
  (
    [company_id] => 28
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [42] => Array
  (
    [company_id] => 29
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [43] => Array
  (
    [company_id] => 18
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [44] => Array
  (
    [company_id] => 23
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [45] => Array
  (
    [company_id] => 20
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [46] => Array
  (
    [company_id] => 22
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [47] => Array
  (
    [company_id] => 19
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [48] => Array
  (
    [company_id] => 21
    [avg_company] =>
    [avg_product] =>
    [avg_service] =>
    [avg_price] =>
    [avg_rating] => 0
  )

  [49] => Array
  (
    [company_id] => 61
    [avg_company] => 5.00000
    [avg_product] => 5.00000
    [avg_service] => 5.00000
    [avg_price] => 5.00000
    [avg_rating_remark] => Excellent
    [avg_rating] => 5.0
  )

  [50] => Array
  (
    [company_id] => 55
    [avg_company] => 4.50000
    [avg_product] => 4.50000
    [avg_service] => 4.50000
    [avg_price] => 3.00000
    [avg_rating_remark] => Solid
    [avg_rating] => 4.1
  )

  [51] => Array
  (
    [company_id] => 40
    [avg_company] => 4.00000
    [avg_product] => 2.00000
    [avg_service] => 5.00000
    [avg_price] => 5.00000
    [avg_rating_remark] => Solid
    [avg_rating] => 4.0
  )
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:46:48.373

我在这个[问题](https://stackoverflow.com/questions/11098685/sort-multidimensional-array-by-value)上应用了解决方案，将我的`usort()`语法替换为：

```
usort($ret, function($a, $b) {
  $a = $a['avg_rating'];
  $b = $b['avg_rating'];
if ($a == $b) { return 0; }
  return ($a < $b) ? -1 : 1;
}); 
```

然后我做`array_reverse()`一个`$ret`：

```
$ret = array_reverse($ret); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T07:18:24.227

用户回调函数期望返回整数，但这个有时会尝试返回浮点数，它会自动四舍五入。尝试

```
usort($ret, function($a, $b) {
  return $b['avg_rating'] > $a['avg_rating'];
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-15T00:57:36.620

我所做的是我知道我的浮点数总是有一个小数点，所以这就是我所做的：

```
usort($dataArray,function($a,$b){

    return ($a*10) - ($b*10);
}); 
```

# iphone - NSPredicate 使用 OR 错误

> ID：14118109
> 
> 赞同：1
> 
> 时间：2013-01-02T07:02:51.123
> 
> 标签：iphone, ios, core-data, nspredicate

第一次构建`NSPredicate`.

我想`managedobjectcontext`用这个逻辑搜索一个：

```
Search for a, grab all matches
Search for b, grab all matches, etc....

Nsarray *results = (has all a results, b results, etc); 
```

我尝试的谓词是：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name== %@ OR name == %@ OR name == %@",a,b,c]; 
```

但是我得到了这个错误`predicate`......

编辑：我写的示例方法

```
-(NSPredicate*)parsePartsIntoAPredicate:(NSMutableArray*)inputPartsNames{
    NSSet *keys=[NSSet setWithArray:inputPartsNames];
    NSPredicate *predicate=[NSPredicate predicateWithFormat:@"any self.@name in %@", keys];
    NSLog(@"predicate = %@",predicate);
    return predicate;
} 
```

澄清：我有一个汽车数据库（20,000 辆）每辆汽车都有多个零件。我想找到所有具有 a 部分的汽车，所有具有 b 部分的汽车，以及所有具有 c 部分的汽车。然后我想返回一个数组，其中包含 a、b、c 等部分的汽车......

如果您认为有更好的方法，请告诉我，但我正在倒退。我正在说

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Cars" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:[self parsePartsIntoAPredicate:inputParts]];

    NSError *error;
    NSArray *records = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:26:08.920

```
NSString *key;
NSMutableArray *tempArray;
NSPredicate *searchForName = [NSPredicate predicateWithFormat:@"name = %@", key];
NSArray *filterArray = [tempArray filteredArrayUsingPredicate:searchForName];
NSLog(@"%@",filterArray); 
```

其中**key**是您的 searchKeyword，**tempArray**是存在数据的 CompleteArray。

**像这样使用。请把你的数据。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T08:58:29.757

用这个

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"%@ '%@'", @"SELF contains[c] ",searchText]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:26:25.460

要获取所有`Cars`具有 a这是集合或数组`name`中的字符串之一的对象，请使用`keys`

```
[NSPredicate predicateWithFormat:@"name IN %@", keys] 
```

# java - log4j 将浮点数打印为指数

> ID：14118110
> 
> 赞同：0
> 
> 时间：2013-01-02T07:02:53.520
> 
> 标签：java, floating-point, log4j

我刚刚发现 log4j 在我的应用程序中将浮点数打印为指数（例如：2.2388E2）。我希望它将值显示为非指数。(223.88)

该案例发生在客户环境中，我能够模拟。在什么情况下会发生这种事情？知道如何防止这种情况吗？

额外信息：信封文档是使用 CXF 生成的，如果它确实重要的话。

以下是我的单位案例：

```
@Test      
public  void testSomething()
{

    ServiceEnvelopeDocument serviceEnvelopeDocument  =      ServiceEnvelopeDocument.Factory.newInstance();  
    ServiceEnvelope serviceEnvelope                  =      serviceEnvelopeDocument.addNewServiceEnvelope();
    ServiceBody  serviceBody                         =      serviceEnvelope.addNewServiceBody();
    RsDetail rsDetails                               =      serviceBody.addNewRsDetail();   

    float testFloat = 223.88f;

    AuxiliaryAccountStaticBalanceDetail accountStaticBalance  = rsDetails.addNewAuxiliaryAccountStaticBalanceDetail();

    accountStaticBalance.setAccountBalance(testFloat);

    logger.error(""+accountStaticBalance);
    logger.error(serviceEnvelopeDocument.toString());
    logger.error(String.valueOf(accountStaticBalance));
}` 
```

上面源代码的输出：

```
2013-01-02 14:55:33.443 ERROR (main) AccountInquiryUtilTest:  - <AccountBalance   xmlns="http://schemas.ocbc.com/soa/emf/account/elements">223.88</AccountBalance>
2013-01-02 14:55:33.465 ERROR (main) AccountInquiryUtilTest:  - <ServiceEnvelope xmlns="http://schemas.ocbc.com/soa/emf/common/envelope/" xmlns:cbs="http://schemas.ocbc.com/soa/emf/service/CBS-CustAccountInfo-I" xmlns:agg="http://schemas.ocbc.com/soa/emf/account/aggregates" xmlns:elem="http://schemas.ocbc.com/soa/emf/account/elements">
  <ServiceBody>
    <cbs:RsDetail>
      <agg:HolderAccountTypeDetail/>
      <agg:AuxiliaryAccountStaticBalanceDetail>
        <elem:AccountBalance>223.88</elem:AccountBalance>
      </agg:AuxiliaryAccountStaticBalanceDetail>
    </cbs:RsDetail>
  </ServiceBody>
</ServiceEnvelope>
2013-01-02 14:55:33.544 ERROR (main) AccountInquiryUtilTest:  - <AccountBalance xmlns="http://schemas.ocbc.com/soa/emf/account/elements">223.88</AccountBalance> 
```

客户环境中的输出：

```
<ns3:AccountBalance>2.2388E2</ns3:AccountBalance> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:32:52.900

您正在记录一个字符串余额，所以这不可能是 log4j 的错：

```
logger.error(String.valueOf(accountStaticBalance)) 
```

现在 String.valueOf() 不是很灵活，你会想要使用别的东西，比如[NumberFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html)（或 DecimalFormat）。这是Float.toString()[官方规则](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html#toString%28float%29)的摘录，与 String.valueOf (float) 相同：

*   如果 m 大于或等于 10^-3 但小于 10^7，则表示为 m 的整数部分，以十进制形式表示，不带前导零，后跟 '.' ('\u002E')，后跟一个或多个小数位，表示 m 的小数部分。
*   如果 m 小于 10^-3 或大于或等于 10^7，则它以所谓的“计算机科学记数法”表示。令 n 为唯一整数，使得 10^n <= m < 10^n+1；然后让 a 是 m 和 10^n 的数学精确商，使得 1 <= a < 10。然后将大小表示为 a 的整数部分，作为一个十进制数字，后跟“。” ('\u002E')，后跟表示 a 小数部分的十进制数字，然后是字母 'E' ('\u0045')，然后是 n 表示为十进制整数，由 Integer 方法生成。到字符串（整数）。

我不明白为什么这些规则会在不同的环境中产生不同的结果，所以也许你没有显示正确的代码。这些规则甚至不依赖于当前的语言环境。

# php - UNION 查询问题

> ID：14118112
> 
> 赞同：0
> 
> 时间：2013-01-02T07:02:57.597
> 
> 标签：php, mysql, arrays, content-management-system, union

我正在尝试对我的数据库中的两个表进行看似简单的联合查询，尽管我无法检索到成功的数组结果。应该注意的是，每个表都有不同的列，我想创建一个虚拟结果（promo AS origin [对于从 'venpromo' 表中提取的结果] && holiday AS origin [对于从'vacation 中提取的结果' table]) 以便将结果排序到不同的数组结构中。我到处寻找，UNIONS 都使用不同的语法。谢谢大家！

```
<?php
    require_once('includes/config.php');

    $event_query = "SELECT *, promo AS origin FROM venpromo
    UNION 
    SELECT *, vacation AS origin FROM venpromo 
    ORDER BY popularity DESC";
    $event_result = mysql_query($event_query, $connection);
    while ($event = mysql_fetch_array($event_result)) {
        if ($event['origin'] == "promo") {
            $event_array[] = array(
                'id' => $event['id'],
                'title' => $event['calname'],
                'start' => $event['sdate'],
                'end' => $event['edate'],
                'color' => "red",
                'url' => "http://www.norrisportal.com/bulletinpost.php?id=" . $event['id'] . "&hashkey=akdULjsjyUpYyTzOT7"
            );
        } elseif ($event['origin'] == "vacation") {
            $event_array[] = array(
                'id' => $event['id'],
                'title' => $event['reason'],
                'start' => $event['vacstart'],
                'end' => $event['vacend'],
                'color' => "blue"
            );
        }
    }

    echo json_encode($event_array);

?> 
```

访问页面查看结果时，我看到“null”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:03:14.350

**明确输入列名而不是 *，并确保每个选择中同一列的列数和数据类型匹配。**

我添加了一些虚拟列来匹配两个表中的数字和数据类型，并且还更改了列的顺序。

试试这个示例方式::

```
select 
id,
uid,
approval,
vacstart,
vacend,
reason,
'dummy1' col1,
'dummy2' col2,
'dummy3' col3,
curdate() col4,
'dummy4' col5,
'dummy5' col6,
'dummy6' col7,
'dummy7' col8,
promo AS origin
from vacation
union
select
id,
venid,
authid,
sdate,
edate,
authname,
tags,
title,
calname,
date,
intro,
body,
sum,
sortdate,
vacation AS origin
from venpromo; 
```

# actionscript-3 - Intellij IDEA 和 Flex SDK 运行时共享库

> ID：14118117
> 
> 赞同：1
> 
> 时间：2013-01-02T07:03:24.033
> 
> 标签：actionscript-3, apache-flex, intellij-idea, shared-libraries, rsl

我正在尝试为运行时加载`IntelliJ IDEA 12`配置`rsl`库。你有这方面的经验吗，你是否有一个样本`XML`放入其他编译器选项中？

另外，我没有找到这个插件，如果你知道请说

更新：

进一步澄清实践项目：

我想制作 2 个 'swf'，它们将在一个简单的形状上使用一个补间库，但我想让该补间库跨域 rsl。

然后目标是在 MainApp 中加载并添加到第一个 swf 然后另一个。我期望发生的是第一次 rsl 将被加载，第二次将从缓存中使用。

我正在用纯 AS3 编程。例子会很棒:) 现在我正在尝试构建一个将 RedSquare 和补间应用于该正方形的类。当然，补间应该来自 rsl 库。

更新 2：

我到了创建 [Frame(factoryClass='path.to.class')] 并创建 Preloader 的地步。

但是现在我不知道如何制作一个可以加载 rsl 然后转到下一帧或主类的预加载器。[Frame] 标签的作用是制作两帧，一帧用于预加载器，一帧用于应该在之后执行的主类。

我传递给编译器的配置：

```
<flex-config>

   <!-- A list of runtime shared library URLs to be loaded before applications start. -->
   <!-- GreenSock -->
   <runtime-shared-library-path> 
    <path-element>/Users/matej/Documents/Projects/Work/External/greensock-as3/greensock.swc</path-element>
    <rsl-url>http://localhost/~matej/rsls/greensock.swf</rsl-url>
    <policy-file-url>http://localhost/~matej/rsls/crossdomain.xml</policy-file-url>
    <rsl-url>http://localhost/rsls/greensock.swf</rsl-url>
    <policy-file-url>http://localhost/rsls/crossdomain.xml</policy-file-url>

    </runtime-shared-library-path>

    <!-- static-link-runtime-shared-libraries: statically link the libraries specified by the -runtime-shared-libraries-path option.-->
    <static-link-runtime-shared-libraries>false</static-link-runtime-shared-libraries>

</flex-config> 
```

主班

```
package {

import com.greensock.TweenLite;

import Preloader;
import flash.display.Sprite;
import flash.events.MouseEvent;

[Frame(factoryClass="Preloader")]
public class RedSquare extends Sprite{

    //---------------------------------------------------------------
    //  Private variables
    //---------------------------------------------------------------
    private var redRectangle:Sprite;
    //---------------------------------------------------------------
    //  Constructor
    //---------------------------------------------------------------
    public function RedSquare() {

        redRectangle = new Sprite();
        redRectangle.graphics.beginFill(0xFFFF0000);
        redRectangle.graphics.drawRect(100,100,50,30);

        redRectangle.graphics.endFill();
        addChild(redRectangle);

        redRectangle.addEventListener(MouseEvent.MOUSE_OVER,onOver);

    }

    //---------------------------------------------------------------
    //  Public methods
    //---------------------------------------------------------------

    //---------------------------------------------------------------
    //  Private methods
    //---------------------------------------------------------------

    private function onOver(event:MouseEvent):void {

        TweenLite.to(redRectangle,3,{x:400,y:200,rotation:160})

    }
}
} 
```

# android - 无法从应用程序中删除包“com.example”

> ID：14118118
> 
> 赞同：3
> 
> 时间：2013-01-02T07:03:31.530
> 
> 标签：android, eclipse

当我尝试将我的应用程序上传到 android play 商店时，我收到一条错误消息，即`"You need to use a different package name because "com.example" is restricted"`. 所以我去了 eclipse 并寻找名为`com.example`.

这些是仅有的两个带有包的文件夹的内容：

```
/ src
    myapp.mainclass
/ gen
    com.example.myapp *
    myapp.mainclass 
```

`*com.example.myapp`似乎是我收到错误消息的原因，它与`myapp.mainclass`. 但是我无法删除它或重新考虑它，每次我删除它时它都会再次自动生成，所以我无法将应用程序上传到 Play 商店，因为 com.example 无法删除。

任何人都遇到过这个问题或对如何上传应用程序有任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T07:11:53.700

在 src 文件夹中重命名你的包后，也`AndroidManifest.xml`用相同的名称重命名它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-09T18:35:58.467

重命名包的更全面的方法是：

右键单击项目名称 -> Android 工具 -> 重命名应用程序包 -> 然后输入新的包名称。

似乎在这里一口气更新了整个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T07:18:22.207

编辑包名称，然后在具有相同包名称的 AndroidManifest.xml 中，清理您的项目，重建，现在我希望这会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:12:00.140

您可以使用新的包名称在 Eclipse 中创建一个新项目，然后将您的 java 文件和任何 res 文件复制到新项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T07:16:27.740

删除**gen**文件夹。并清理项目。您的**gen**文件夹将自动创建。同时，您应该更改 Manifest 文件中的包名称。它应该是你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-18T03:23:55.897

在重命名包后在 Android Studio 中，然后转到“build.gradle (Module:App)

defaultConfig { applicationId "com.example.android.abc" minSdkVersion 9 targetSdkVersion 22 versionCode 1 versionName "1.0" } 改行

applicationId "com.example.android.abc" 到

applicationId "com.tanxe.android.abc" relpace "tanxe" 与您想要的单词或您的组织名称，即您的新包名称并重建项目

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-20T16:43:24.190

您应该更改您的应用程序ID（通常称为“包地址”）您可以通过以下步骤将 com.example 更改为您自己的地址。

1.  在工具栏中，单击“文件”选项卡
2.  选择“项目结构”。
3.  “模块”类别中的“应用程序”选项卡->“风味”选项卡
4.  更改“应用程序 ID”。
5.  重建你的项目。

然后，您再也看不到“com.example ...”了。

# php - 来自我的应用程序的帖子出现在页面的墙上，但喜欢该页面的用户无法在他们的新闻源中看到

> ID：14118120
> 
> 赞同：0
> 
> 时间：2013-01-02T07:03:43.007
> 
> 标签：php, facebook-graph-api

我有一个 Facebook 应用程序可以发布在我的粉丝页面上，它运行良好。

我的问题是当我使用我的应用程序在我的粉丝页面上发布时，新帖子出现在页面的墙上，但喜欢该页面的用户无法在他们的新闻源中看到......

是否有新的 Graph API 限制或类似的东西？

我用 facebook 的 PHP sdk 编写了我的应用程序。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:40:44.697

嗯，我想我找到了问题...

当 facebook 的用户在您的粉丝页面中按下“喜欢”按钮时，会自动选中“在新闻源中显示”选项，然后用户就可以在他的墙上接收来自您的 facebook 页面的新帖子。在我的情况下（我不知道为什么）“在新闻源中显示”选项不会自动选中，用户需要手动标记从我的粉丝页面接收我的新帖子的选项。

以下是有关此主题的一些文章：

[http://antonicalero.com/2012/08/24/show-in-news-feed-myth/](http://antoniocalero.com/2012/08/24/show-in-news-feed-myth/)

[http://alwaysupward.com/blog/fb-fans-arent-seeing-your-posts-and-how-to-fix-it/comment-page-2/](http://alwaysupward.com/blog/fb-fans-arent-seeing-your-posts-and-how-to-fix-it/comment-page-2/)

我希望这可以帮助别人。

我很抱歉我的英语不好。

# java - 如何在 Java 项目中引用属性文件

> ID：14118125
> 
> 赞同：0
> 
> 时间：2013-01-02T07:04:16.047
> 
> 标签：java, junit, classpath

我有一个 Node.properties 文件放在我的 Java 项目的 config 文件夹中。文件夹的层次结构是：

```
**Project**
   ->src
   ->config
      ->client
      ->eclipse
          ->test
      ->preferences 
```

当我成功构建代码并尝试使用 JUNIT 运行测试类时，出现错误 -

```
Node.properties not found in classpath 
```

我检查了类路径文件，发现虽然引用了路径，但没有`/config/eclipse/test`引用其中的文件`/config/client`。

您能否让我知道如何确保在类路径中找到该文件？

我正在使用 Ant 脚本在 Eclipse 中构建项目。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:16:14.663

如果您正在运行 Eclipse

1.  rt 点击项目-> 选择属性
2.  点击`Java Build Path`
3.  在`Source`选项卡下添加路径`config/client`

# c# - 将数据网格行值传递给下一个表单标签

> ID：14118130
> 
> 赞同：1
> 
> 时间：2013-01-02T07:04:30.853
> 
> 标签：c#

嗨，我正在研究 winform，我有一个 datadrid 视图，我有一个上下文菜单条。在那个编辑上写着。当我单击 datadrid 时，右键单击上下文菜单并打开编辑。当点击它应该将值传递给一个新表单，我已经编写了传输代码但它没有传递我不知道这里有什么问题

```
 private void editToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Form6 f = new Form6();
     f.label1.Text = dataGridView1.SelectedRows[0].Cells[0].Value.ToString();

    } 
```

代码正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:06:35.970

如果 Form6 尚未打开，则需要在将文本分配给其标签后显示它。

```
private void editToolStripMenuItem_Click(object sender, EventArgs e)
{
    Form6 f = new Form6();
    f.label1.Text = dataGridView1.SelectedRows[0].Cells[0].Value.ToString();
    f.Show();

} 
```

如果 Form6 已经打开，需要使用 Form6 的实例而不是创建新的实例，可以使用[Application.OpenForms](http://msdn.microsoft.com/en-us/library/eh13dca9%28v=vs.80%29.aspx)来获取已经打开的表单。

```
Form6 f = (Form6)Application.OpenForms["form6"];
f.label1.Text = dataGridView1.SelectedRows[0].Cells[0].Value.ToString(); 
```

# javascript - $.each 将值传递给函数

> ID：14118136
> 
> 赞同：1
> 
> 时间：2013-01-02T07:05:36.687
> 
> 标签：javascript, jquery, arrays

我不知道如何在 Stackoverflow 中搜索这个问题，它提供了不同的解决方案，并且与我的问题无关。所以我会再次需要你们的帮助。

**变量 obj 的值：**

```
item.title = Title1 and Title2

item.description = Description1 and Description2 
```

**文件：**

```
function test_pop() {
    var fb_id = "xxxxxxxxxxxx";
    var v_id = "xxxxxxxx";

    $.post('http://mysite.com/myfile.php', {fb_id: fb_id, v_id: v_id}, function(data) {
        var obj = $.parseJSON(data);
        $.each(obj,function(index, item){
           achievement = "You Obtained " + item.title + " " + item.description;
           achievement_pop(achievement);
        });
    });
} 
```

**成就流行功能：**

```
function achievement_pop(data) {
    $("#achievement_popup").html(data).show(); //DIV that should show up
} 
```

所以问题是，当 div 出现时，它只输出：

```
 <div> <!-- Imagine that this content is inside a DIV -->
**You Obtained Title2 Description2**

    </div> 
```

但我的愿望输出是：

```
 <div> <!-- Imagine that this content is inside a DIV -->

**You Obtained Title1 Description1**

**You Obtained Title2 Description2**

    </div> 
```

希望大家帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:07:18.807

该`html`功能正在替换 div 的全部内容，而不仅仅是添加。

一个解决方案是更换

```
$("#achievement_popup").html(data).show(); 
```

和

```
$("#achievement_popup").html($("#achievement_popup").html()+data).show(); 
```

但它有点重。就我个人而言，我会首先构建 html 并`html`只使用一次该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T07:09:12.147

用于`append()`添加到元素的末尾，而不是完全替换内容`html()`

或者，如果您想一次将现有内容替换为所有新内容：

```
/* start with empty string*/
var achievement='';
$.each(obj,function(index, item){
    /* add to string on each pass of loop - can use any html you want here*/
     achievement += "You Obtained " + item.title + " " + item.description +'<br>';
});
/* update element once all data parsed*/
 achievement_pop(achievement); 
```

从处理的角度来看，解析为字符串并进行一次更新是最有效的

# mongodb - 将 mongodump 从一台主机导出到另一台主机

> ID：14118143
> 
> 赞同：0
> 
> 时间：2013-01-02T07:06:41.100
> 
> 标签：mongodb

我在主机 A 中有该集合的 mongodump，现在我需要将它移到主机 B 中。

我用过，

```
 mongodump --host mongodb1.example.net --port 37017 --username user --password pass /opt/backup/mongodump-2011-10-24 
```

但它对我不起作用。对此还有其他帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:03:41.747

在终端中，在本机 Linux 终端和 PuTTY 中，`-`文件名中的文件名实际上通常被视为命令的一种选项。当然，当`mongodump`检测到错误数量的选项等阻止它工作时，这会引发错误。似乎在这方面使用`'`and的封装`"`也不起作用。

一个简单快速的解决方法是手动指定`--out`选项，如下所示：

```
./mongodump --host mongodb1.example.net --port 37017 --username user --password pass --out=/opt/backup/mongodump-2011-10-24 
```

# c# - ASP .NET OpenXML：如何创建受密码保护的 word 文件

> ID：14118145
> 
> 赞同：2
> 
> 时间：2013-01-02T07:07:08.040
> 
> 标签：c#, asp.net, c#-4.0, openxml

```
 byte[] abc= Encoding.ASCII.GetBytes("sdf");

        DocumentProtection prot = new DocumentProtection();
        prot.Edit = DocumentProtectionValues.ReadOnly;
        prot.Hash = Convert.ToBase64String(abc);
        settings1.Append(prot); 
```

我已经尝试了上面提到的代码，其中只读工作正常，但我遇到了使用哈希（#）设置密码的问题。建议我可能的方式

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T08:40:06.210

尝试这个 ：

1）在视觉工作室去项目菜单 - >添加参考

2) 选择“COM”选项卡

3）选择“Microsoft Word（版本号）对象库”

4) 按确定。

5) 现在，在 .cs 页面中添加该库的引用。

例如`using Microsoft.Office.Interop;`

6）创建一个word文件对象并设置其密码，如下所示：

```
Microsoft.Office.Interop.Word._Document oDoc;
oDoc.Password = "abcd"; 
```

请不要忘记保存文档。

谢谢

如果有用，请标记并投票。

# android - 适用于 IOS/Android 的移动支付 SDK ？

> ID：14118149
> 
> 赞同：0
> 
> 时间：2013-01-02T07:07:21.477
> 
> 标签：android, iphone, ios, payment-gateway

我正在为 Android 和 IOS 制作应用程序，并且该应用程序具有移动支付功能。但实际上，这是对任何有非营利原因的公司的捐赠。我正在寻找一些支持这两个平台的移动支付。我试图阅读 Paypal，但我没有在 SDK 中找到任何捐赠按钮。我还在这里查看了一些问题，我发现苹果支持第三方支付网关仅用于实体商品和我必须去的虚拟事物使用 IAP。但他们扣除了金额的30%。我想要任何替代方案，我可以用最低使用费和捐款付款（我认为这也是一种虚拟付款）。任何人都可以为我提供一些想法以进入一个方向吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:14:58.330

您可以从 PayPay SDK 开始。它同时支持iOS和Android。

如果您正在为捐赠付款，那么我希望苹果不会拒绝您的应用程序。

下面是有用的网址。

```
https://www.x.com/community/ppx/xspaces/mobile

https://www.x.com/docs/DOC-2532 
```

干杯并享受开始！

# c# - 如果按钮是网格的子项，如何更改按钮的内容？

> ID：14118157
> 
> 赞同：1
> 
> 时间：2013-01-02T07:07:46.937
> 
> 标签：c#, silverlight, windows-phone-7

> *我想在 button2 的点击事件上更改 button1 的内容。但无法获取 List<> UiList 中网格的子 Button 类的对象。* 请指导我找到正确的方法来查看和解决它。并且还指导如果对象是在运行时构建的，那么如何访问它？

```
public partial class MainPage :   PhoneApplicationPage

  {  

    List<Grid> UIList = new List<Grid>();
    Grid objGrid1 = null;
    Button objButton1 = null;
    Button objButton2 = null;

    // Constructor
    public MainPage()
    {
        InitializeComponent();
        createGrid1("grid1");
        createButton2("Button2");
    }

    public void createGrid1(string x)
    {
        objGrid1 = new Grid();
        objGrid1.Height = 100;
        objGrid1.Name = x;
        objGrid1.Width = 200;
        objGrid1.Margin = new Thickness(100, 100, 0, 0);
        objGrid1.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        objGrid1.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        objGrid1.Background = new SolidColorBrush(Colors.Orange);            
        createButton1("changename");

    }
    public void createButton1(string _name)
    {
        objButton1 = new Button();
        objButton1.Height = 90;
        objButton1.Name = _name;
        objButton1.Content="Button1";
        objButton1.FontSize = 20;
        objButton1.Width = 190;            
        objButton1.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        objButton1.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        objButton1.Background = new SolidColorBrush(Colors.Blue);
        objButton1.Foreground = new SolidColorBrush(Colors.White);
        objGrid1.Children.Add(objButton1);
        LayoutRoot.Children.Add(objGrid1);
        UIList.Add(objGrid1);

    }
    public void createButton2(string _name)
    {
        objButton2 = new Button();
        objButton2.Margin = new Thickness(240, 300, 0, 0);
        objButton2.Name = _name;
        objButton2.Height = 90;
        objButton2.Content = "Button2";
        objButton2.FontSize = 20;
        objButton2.Width = 190;
        objButton2.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        objButton2.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        objButton2.Background = new SolidColorBrush(Colors.Blue);
        objButton2.Foreground = new SolidColorBrush(Colors.White);
        LayoutRoot.Children.Add(objButton2);
        objButton2.Click += (s, e) =>
            {
                int c = UIList.ElementAt(0).Children.Count;
                if (c == 1)
                {
                    //logic to change content of Button1 on click of Button2
                }
            };

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:53:42.023

假设您不能只保留对已创建控件的引用，例如在类字段中，您可以遍历[Grid的](http://msdn.microsoft.com/en-au/library/system.windows.controls.grid%28v=vs.95%29.aspx)[Children](http://msdn.microsoft.com/en-au/library/system.windows.controls.panel.children%28v=vs.95%29.aspx)属性并找到所需的 Button。如果有多个按钮，您可以使用[Tag](http://msdn.microsoft.com/en-au/library/system.windows.frameworkelement.tag%28v=vs.95%29.aspx)属性来区分它们。

找到它后，使用[Content](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content%28v=vs.95%29.aspx)属性更改按钮的内容，如上面的内容中所述。

# mysql - Spring JPA：applicationContext.xml 无法创建 entityManagerFactory bean

> ID：14118159
> 
> 赞同：0
> 
> 时间：2013-01-02T07:08:02.800
> 
> 标签：mysql, spring, jpa, eclipselink

我使用 Spring 3.2.0、JPA 2 和我的 IDE 是 SpringToolSuit 3.1.0。当我运行测试类（主类）时，我得到了这个异常，我用谷歌搜索，但找不到任何解决方案。

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.reflect.UndeclaredThrowableException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1117)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:922)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.first.form.Test.main(Test.java:17)
Caused by: java.lang.reflect.UndeclaredThrowableException
at $Proxy3.addTransformer(Unknown Source)
at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactory(PersistenceProvider.java:213)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:286)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
... 12 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager$Jpa2PersistenceUnitInfoDecorator.invoke(DefaultPersistenceUnitManager.java:617)
... 18 more
Caused by: java.lang.IllegalStateException: Cannot apply class transformer without LoadTimeWeaver specified
at org.springframework.orm.jpa.persistenceunit.SpringPersistenceUnitInfo.addTransformer(SpringPersistenceUnitInfo.java:109)
... 23 more 
```

applicationContext.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="testJPA"></property>
</bean>

<tx:annotation-driven />

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<bean id="persistenceAnnotation"
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="userDao" class="com.first.dao.UserDAOImp"></bean>
</beans> 
```

persistence.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="testJPA" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>com.first.entity.UserInfo</class>
    <properties>
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/test"/>
        <property name="javax.persistence.jdbc.user" value="root"/>
        <property name="javax.persistence.jdbc.password" value="xxxxx"/>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
    </properties>
</persistence-unit>
</persistence> 
```

测试类：

```
package com.first.form;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.first.dao.UserDAO;
import com.first.entity.UserInfo;

public class Test {

/**
 * @param args
 */
public static void main(String[] args) {

    ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
    System.out.println("****     "+ applicationContext);
    /*UserDAO userDao = (UserDAO) applicationContext.getBean("userDao");

    UserInfo userInfo = new UserInfo();
    userInfo.setName("name");
    userInfo.setFamily("family");
    System.out.println("User names is: " + userDao.getAllUsers());
    userDao.createUser(userInfo);*/
    System.out.println("User is successfully created");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:35:44.027

尝试添加

```
<property name="loadTimeWeaver">
    <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
</property> 
```

请[在此处](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/LocalContainerEntityManagerFactoryBean.html#setLoadTimeWeaver%28org.springframework.instrument.classloading.LoadTimeWeaver%29)查看有关 JPA 编织的更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:16:08.067

正确的 entityManagerFactory 应该是：

```
<bean id="entityManagerFactory"
class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
<property name="persistenceUnitName" value="testJPA"></property>
</bean> 
```

通过这个工厂，我们不需要“loadTimeWeaver”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-30T15:43:02.200

或者，尝试将此添加到您的 JVM 启动参数中

-javaagent:C:/jars/spring-instrument-3.0.4.RELEASE.jar （或最新版本）

# edid - 偶尔返回错误字符时如何使用 EDID

> ID：14118160
> 
> 赞同：1
> 
> 时间：2013-01-02T07:08:04.873
> 
> 标签：edid

伙计们，

环境：Ubuntu 12.04 最小版 + openbox。

在我们基于 C 的应用程序中，信息只能显示在经过批准的显示设备上。我们依靠 EDID 来获取连接的显示设备的信息。

一切都按预期工作。但是，有时 EDID 会返回一些乱码。例如，`SAMSUNG`可能会作为`SAMSyNG`.

获取 EDID 信息的编程逻辑很简单。这让我觉得EDID本身并不那么可靠。我想知道是否有其他人遇到过这样的问题，以及您以编程方式解决了这个问题。

提前感谢您分享您的想法。

问候，
彼得

# objective-c - JKDictionary 类是 JSONKit 私有的，不应以这种方式使用

> ID：14118166
> 
> 赞同：1
> 
> 时间：2013-01-02T07:08:24.537
> 
> 标签：objective-c, ios, jsonkit

[这是对此](https://stackoverflow.com/questions/14111485/converting-nsjsonserialization-to-ios-4/14111602#14111602)的后续问题 简而言之，我正在使我的应用程序 ios 4.3 兼容并`AFNetworking`在我的应用程序中使用支持 ios 4 的类版本 0.10.1。这条线`self.responseJSON = AFJSONDecode(self.responseData, &error);`给了我下面的错误。我不太熟悉 jason 并试图弄清楚这个错误的含义。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** - [JKDictionary allocWithZone:]: The JKDictionary class is private to JSONKit and should not be used in this fashion.'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x006ef5a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x018e6313 objc_exception_throw + 44
    2   CoreFoundation                      0x006a7ef8 +[NSException raise:format:arguments:] + 136
    3   CoreFoundation                      0x006a7e6a +[NSException raise:format:] + 58
...
...
26  libdispatch_sim.dylib               0x02888289 _dispatch_call_block_and_release + 16
27  libdispatch_sim.dylib               0x0288acb4 _dispatch_queue_drain + 250
28  libdispatch_sim.dylib               0x0288b2c2 _dispatch_queue_invoke + 49
29  libdispatch_sim.dylib               0x0288b593 _dispatch_worker_thread2 + 261
30  libsystem_c.dylib                   0x90093b24 _pthread_wqthread + 346
31  libsystem_c.dylib                   0x900956fe start_wqthread + 30 
```

错误来自 JSONKit.m：

```
+ (id)allocWithZone:(NSZone *)zone
{
#pragma unused(zone)
    [NSException raise:NSInvalidArgumentException format:@"*** - [%@ %@]: The %@ class is private to JSONKit and should not be used in this fashion.", NSStringFromClass([self class]), NSStringFromSelector(_cmd), NSStringFromClass([self class])];
    return(NULL);
} 
```

使用 ios 5，该应用程序正在使用`self.responseJSON =[NSJSONSerialization JSONObjectWithData:self.responseData options:0 error:&error];`效果很好的线路，但我当然不能在 ios 4 中使用它，因为`NSJSONSerialization`不支持。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:16:19.270

我最终用这个替换了有问题的行`self.responseJSON = [[CJSONDeserializer deserializer] deserialize:self.responseData error:&error];`

仅针对该行使用了不同的类（[TouchJSON](https://github.com/TouchCode/TouchJSON)），但现在效果很好。

# android - 在运行 4.0 之前版本的三星设备上显示最近添加的联系人时崩溃

> ID：14118168
> 
> 赞同：0
> 
> 时间：2013-01-02T07:08:44.443
> 
> 标签：android, android-contacts, samsung-mobile

我正在以编程方式添加新联系人，该联系人又返回 contentProviderResults。

我从 contentProviderResults 获取联系人 URi 并将其传递给`Intent.action_view`

```
Uri newContactUri = contentProviderResults[0].uri;
Log.i("contact", "New contact Uri is " + newContactUri);
Intent intent = new Intent(Intent.ACTION_VIEW, newContactUri); 
```

我面临的问题是，除了三星（运行 OS < 4.0）（即 ICS 的前身）之外的所有设备上都能完美运行

在三星 4.0 之前的设备上，acore 进程停止并引发强制关闭对话框。

> 不幸的是 process.android.process.acore 已经停止了......

插入联系人后收到的示例 Uri 是

```
01-01 06:25:40.233: I/contact(2803): New contact Uri is content://com.android.contacts/raw_contacts/56 
```

以下是我添加联系人并显示添加的联系人详细信息的方法。

```
 public void insertContact(Context context, String displayName,
                String mobileNumber) {

            ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.RawContacts.CONTENT_URI)
                    .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
                    .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
                    .build());

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                    .withValue(
                            ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                            displayName).build());

            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,
                            mobileNumber)
                    .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                            ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                    .build());

            try {
                final ContentProviderResult[] contentProviderResults = context
                        .getContentResolver().applyBatch(
                                ContactsContract.AUTHORITY, ops);
                if (contentProviderResults != null
                        && contentProviderResults[0] != null) {
                    Toast.makeText(context, "Contact Added Successfully",
                            Toast.LENGTH_LONG).show();

                    for (int i = 0; i < contentProviderResults.length; i++)
                        Log.i("contact", "" + contentProviderResults[i].uri);

                    Uri newContactUri = contentProviderResults[0].uri;

                    Log.i("contact", "New contact Uri is " + newContactUri);
                    Intent intent = new Intent(Intent.ACTION_VIEW, newContactUri);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(intent);

                }

            } catch (Exception e) {
                e.printStackTrace();
                Toast.makeText(context, "Exception: " + e.getMessage(),
                        Toast.LENGTH_SHORT).show();
            }

        } 
```

有人可以告诉我为什么这个代码在三星设备上失败（Pre 4.0 版本）。

下面是崩溃日志。

```
01-01 06:25:40.978: E/AndroidRuntime(2894): FATAL EXCEPTION: main
01-01 06:25:40.978: E/AndroidRuntime(2894): java.lang.RuntimeException: Unable to resume activity {com.android.contacts/com.sec.android.app.contacts.PhoneBookDetailTabActivity}: java.lang.IllegalArgumentException: Invalid column lookup
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.os.Looper.loop(Looper.java:123)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at java.lang.reflect.Method.invoke(Method.java:521)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at dalvik.system.NativeStart.main(Native Method)
01-01 06:25:40.978: E/AndroidRuntime(2894): Caused by: java.lang.IllegalArgumentException: Invalid column lookup
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.database.sqlite.SQLiteQueryBuilder.computeProjection(SQLiteQueryBuilder.java:523)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.database.sqlite.SQLiteQueryBuilder.buildQuery(SQLiteQueryBuilder.java:370)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:323)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.android.providers.contacts.ContactsProvider2.query(ContactsProvider2.java:7846)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.android.providers.contacts.ContactsProvider2.query(ContactsProvider2.java:7831)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.content.ContentProvider$Transport.query(ContentProvider.java:163)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.content.ContentResolver.query(ContentResolver.java:245)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.provider.ContactsContract$Contacts.getLookupUri(ContactsContract.java:916)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.sec.android.app.contacts.PhoneBookDetailTabActivity.startQuery(PhoneBookDetailTabActivity.java:522)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at com.sec.android.app.contacts.PhoneBookDetailTabActivity.onResume(PhoneBookDetailTabActivity.java:361)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.Activity.performResume(Activity.java:3823)
01-01 06:25:40.978: E/AndroidRuntime(2894):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
01-01 06:25:40.978: E/AndroidRuntime(2894):     ... 12 more 
```

# php - form_open() 在 codeigniter 中不起作用

> ID：14118170
> 
> 赞同：1
> 
> 时间：2013-01-02T07:08:49.227
> 
> 标签：php, forms, codeigniter

我正在尝试在 CodeIgniter 中构建一个简单的表单。我的 VIEW 'input_view.php' 是：

```
 <html>
    <head>
        <link rel="stylesheet" type="text/css" href="<?php echo "$base/$css"?>">
    </head>
    <body>
        <div id="header">
            <?php $this->load->view('books_header'); ?>
        </div>

        <div id="menu">
            <?php $this->load->view('books_menu'); ?>
        </div>
        <?php //echo $title; ?>
        <?php echo form_open('books/input'); ?>

            <?php echo $title; ?>
            <?php echo form_input('title'); ?>;

            <?php echo $author; ?>
            <?php echo form_input('author'); ?>

            <?php echo $publisher; ?>
            <?php echo form_input('publisher'); ?>

            <?php echo $year; ?>
            <?php echo form_dropdown('year',$years); ?>

            <?php echo $available; ?>
            <?php echo form_checkbox('available','yes',TRUE); ?>

            <?php echo $summery; ?>
            <?php echo form_textarea('summery'); ?>

            <?php echo form_submit('mysubmit', 'Submit'); ?>

    <?php echo form_close(); ?>

        <div id="footer">
            <?php $this->load->view('books_footer'); ?>
        </div>
    </body>
</html> 
```

但是当我尝试时`http://localhost/CodeIgniter/index.php/books/input`，它没有显示表单，而是显示 page upto `menu`。这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T07:15:24.493

你有没有在你的控制器中加载表单助手，你调用你的简单表单视图？？？？？？

```
$this->load->helper('form'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T07:14:13.883

您必须像这样在 codigniter 上加载帮助文件表单以供表单使用。

```
$this->load->helper('form'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T07:20:38.673

请参阅[CodeIgniter 用户指南](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)，您必须先加载表单助手，然后再这样做

```
$this->load->helper('form'); 
```

在使用 form_open、form_input 或其他任何东西之前，您可以将该语法放在控制器上或视图顶部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-26T17:06:08.753

```
$this->load->helper('form'); 
```

在查看页面

或自动加载文件转到 application/config/autoload

在那里你会发现

```
$autoload['helper'] = array('');

$autoload['helper'] = array('form'); 

//input from helper it will allow in both view and controller page 
```

# lotus-notes - 如果在莲花笔记中

> ID：14118174
> 
> 赞同：1
> 
> 时间：2013-01-02T07:09:10.683
> 
> 标签：lotus-notes, lotus-domino, lotus, lotus-formula

莲花笔记中的陈述如何结束。

例子。

```
@If(@Text(textbox1)="";@Failure("Please input your name");@Success);@command([filesave]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T08:16:41.640

您可以使用@Return("") 结束公式语句的执行。

请阅读属于您的 Lotus Notes 和 Domino Designer 客户端的文档。在 Lotus Notes 数据目录的帮助文件夹中查找帮助数据库。

这是@Return 的在线帮助：http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp ?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_RETURN.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_RETURN.html)

这是@If 的在线帮助：http: [//publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp ?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_IF.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_IF.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:57:32.183

您可以跳过@success afaik 并尝试以下操作：

```
@If(
    @Text(textbox1)="";
    @Failure("Please input your name");
    @command([filesave])
); 
```

另一种选择是使用@do：

```
@If(
    @Text(textbox1)="";
    @Failure("Please input your name");
    @do(
        @success;
        @command([filesave])
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:05:01.413

根据文档，@Failure 仅用于输入验证公式。

[链接到@Failure 文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_FAILURE.html)

那篇文章描述了它应该如何使用。

新人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T09:19:42.373

您可以通过简单的提示替换**失败方法。**

```
@If(
    @Text(textbox1)="";
    @prompt([OK],"Warning", "Please input your name");
    @command([filesave])
    ); 
```

# java - 如何使用java获取连接到计算机的USB设备的详细信息

> ID：14118178
> 
> 赞同：2
> 
> 时间：2013-01-02T07:09:27.683
> 
> 标签：java, swing, usb, hardware, jusb

我正在尝试获取连接到计算机的 USB 硬件设备的详细信息，但我不知道 Windows 的本机代码，因此是否可以使用 JAVA 获取连接到计算机的硬件的详细信息提前谢谢

VB脚本代码：

```
Set HDs = GetObject("winmgmts:(impersonationLevel=impersonate)")
Set colItem=HDs.ExecQuery("Select * from Win32_DiskDrive")
For Each hd In colItem
    Wscript.Echo hd.PnPDeviceID & "vigi"
Next 
```

爪哇代码：

```
try {
    Process p = Runtime.getRuntime().exec("cscript //NoLogo " + file.getPath());
    BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line;
    while ((line = input.readLine()) != null) {
        result += line;
    }
    input.close();
} catch(Exception e){
    e.printStackTrace();
} 
```

现在我正在尝试使用此 vbscipt 代码获取详细信息，但是当我执行此代码时出现错误，找不到脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:17:20.113

尝试使用 JUsb。[此处](http://today.java.net/pub/a/today/2006/07/06/java-and-usb.html)的链接提供了简单的示例。

# c# - 在 Facebook 上发帖时，网址被截断

> ID：14118184
> 
> 赞同：0
> 
> 时间：2013-01-02T07:10:18.543
> 
> 标签：c#, facebook

我在我的网页中使用 Facebook。要发布的 url 具有类似的查询字符串

```
http://test.something.in:302/sample.aspx?id=54 
```

但它在 facebook 上发布时被截断，并且 url 变成了

```
http://test.something.in:302/sample.aspx. 
```

谁能帮我解决这个问题？

```
<body>
  <div id="fb-root"></div>
window.fbAsyncInit = function () {
    FB.init({
        appId: '451971411518111',
        status: true,
        cookie: true, 
        xfbml: true
    });
};
(function (d, debug) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false));

<form id="form1" runat="server">
<div class="fb-like" data-href="http%3A%2F%2Ftest.something.in%3A302%2Fsample.aspx%3FId%3D54" data-send="false" data-width="450" data-show-faces="true"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:21:45.273

如果我正确理解您的问题，您必须在将链接传递给 Facebook Direct FB URL 时对其进行编码。

可以在 W3Schools 找到一个好的在线编码器：http: [//www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

JavaScript 函数[http://www.w3schools.com/jsref/jsref_encodeuri.asp](http://www.w3schools.com/jsref/jsref_encodeuri.asp)也适用于动态编码你的 URL，虽然我不知道在 C# 中使用什么函数（不要问我关于 C#我从来没有在 C# 上编写过一个字符。我什至不知道它是否有功能。:P)

例如，您提供的 URL 将被编码如下：

```
http%3A%2F%2Ftest.something.in%3A302%2Fsample.aspx%3Fid%3D54 
```

告诉我这是否有效。

**顺便说一句，这个问题基本上是[Facebook URL truncated](https://stackoverflow.com/questions/13594964/facebook-url-truncated)的副本。以后尽量避免重复。它们可能会导致您的问题被关闭、大量反对票（我很高兴不这样做），甚至是临时禁令。现在不用担心，只为未来着想。**

# c# - Infragistics XamDataGrid MVVM 使用 - WPF 3.5

> ID：14118189
> 
> 赞同：1
> 
> 时间：2013-01-02T07:11:32.000
> 
> 标签：c#, wpf, infragistics

编辑：我已经看过 Infragistics 论坛。下面的代码基于他们的示例。数据绑定似乎不起作用。

我认为我有一个 Infragistics XamDataGrid。

```
<DockPanel>
    <grid:XamDataGrid x:Name="gridData" DataContext="{Binding Path=DataEditorDataTable}" DataSource="{Binding Path=DataEditorDataTable.DefaultView}"
                      IsSynchronizedWithCurrentItem="True" Visibility="{Binding DataGridVisible}">
        <grid:XamDataGrid.FieldLayoutSettings>
            <grid:FieldLayoutSettings AutoGenerateFields="True" AllowAddNew="False" AllowDelete="False" />
        </grid:XamDataGrid.FieldLayoutSettings>
    </grid:XamDataGrid>
</DockPanel> 
```

我在构造函数中为用户控件设置数据上下文。

```
public DataEditor(SomeDataType DataType, IEventAggregator eventaggregator)
    {
        InitializeComponent();

        this.DataContext = new DataEditorViewModel(DataType, eventaggregator);
    } 
```

在数据编辑器视图模型中，我订阅了一个让我知道数据何时发生变化的事件，我构建了一个数据表并调用了一个方法 SetData。（我无法预先知道网格中将显示多少列数据，并且这些列随着用户交互而不断变化，所以我希望使用数据表进行绑定。）

我以这样的方法分配属性。

```
 /// <summary>
    /// Returns the data that the data editor displays.
    /// </summary>
    public DataTable DataEditorDataTable
    {
        get
        {
            return dtDataEditor;
        }
        set
        {
            dtDataEditor = value;
            OnPropertyChanged("DataEditorDataTable");
        }
    }

    /// <summary>
    /// Method to set data on load
    /// </summary>
    private void SetData(DataTable dtDataEditor)
    {
        if (!isDataEditorCellEdited)
            if (dtDataEditor != null && dtDataEditor.Rows.Count > 0)
            {
                try
                {
                    //Assign the data to the grid
                    DataEditorDataTable = dtDataEditor;
                    DataGridVisible = Visibility.Visible;
                }
                catch
                {
                    //If any exception occurs, hide the grid
                    DataGridVisible = Visibility.Collapsed;
                }
            }
            else                
                //If no data, hide the grid
                DataGridVisible = Visibility.Collapsed;                    

    } 
```

问题是绑定根本没有发生。关于绑定，我有什么特别遗漏的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:45:52.977

要调试绑定错误，您应该查看 Visual Studio 中的输出窗口以查看是否有任何错误。

阅读您拥有的代码，我认为绑定不正确，应该是：

DataContext="{绑定路径=DataEditorDataTable}" DataSource="{绑定路径=DefaultView}"

我所做的更改是从 DataSource 的路径中删除表中的属性，因为该表已经是 DataContext 并且您希望绑定到表的 DefaultView 。

# android - Android：如何实现滚动/移动背景浮动按钮和文本视图

> ID：14118195
> 
> 赞同：0
> 
> 时间：2013-01-02T07:12:05.453
> 
> 标签：android

我什至不知道在哪里寻找这样做。我已经使用按钮和文本视图进行了相对布局。

是否可以让用户可以与透明背景交互的顶层（我的相对布局）

然后是底层，即滚动的背景图像。那是用户无法控制的。例如空间的滚动图像。那是不断滚动。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:32:46.473

### 在此处获取您的根布局 -> RelativeLayout

### 创建由帧图像文件或变换组成的动画文件| 旋转 | alpha 无论你的动画是什么

这里的代码看起来像：根据您的需要进行转换-

### 动画文件 :: anim/push_down.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <animation-list xmlns:android="http://schemas.android.com/apk/res/android"
     android:oneshot=["true" | "false"] >
    <item
    android:drawable="@[package:]drawable/drawable_resource_name"
    android:duration="integer" />
   </animation-list> 
```

### 在代码内部实现

```
 RelativeLayout layout = (RelativeLayout) findViewById(R.id.layoutSearch);
   Animation a = AnimationUtils.loadAnimation(this, R.anim.push_down);
   a=setFillAfter(true); 
   layout.setLayoutAnimation(new LayoutAnimationController(a));
   layout.startLayoutAnimation(); 
```

# selenium - 如何在 Selenium IDE 中自动执行“右键单击”事件并在新窗口/选项卡中打开链接

> ID：14118201
> 
> 赞同：1
> 
> 时间：2013-01-02T07:12:34.547
> 
> 标签：selenium, selenium-ide, right-click

我将 Selenium IDE 用于谷歌搜索场景。

```
1 open google

2 then  type "india" and click on the search button

3 then go to any link and right clicking on that link 
  and open that link in new tab or window 
```

到目前为止我所做的是

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>india</td>
</tr>
<tr>
    <td>click</td>
    <td>id=gbqfb</td>
    <td></td>
</tr>
<tr>
    <td>contextMenu</td>
    <td>//*[@id='rso']/li[3]/div/h3/a</td>
    <td> </td>
</tr> 
```

我不能做的是： **右键单击链接，然后在新窗口中打开该链接。**

任何人都可以请建议需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:51:36.627

您可以按 Ctrl 键并单击链接，以便在新选项卡中打开它。

要在 Selenium IDE 中使用控制键，请使用以下关键字。

```
controlKeyDown ( ) 

//code for clicking the link

controlKeyUp ( ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:48:14.577

您可以**获取该链接的 href 属性，然后使用 openWindow() 命令在新窗口中打开它**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:21:16.900

“右键单击链接，然后在新窗口中打开该链接”这是浏览器功能而不是页面功能..这就是您无法在 IDE 中记录它的原因。

如果您想了解录制右键单击，请尝试单击[此处](https://stackoverflow.com/questions/7172955/selenium-ide-record-right-click)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T06:29:35.623

经过几天的研究，终于找到了在Selenium IDE中通过命令**模拟右键的方法：**`execute script`

```
const el = document.querySelector('CSS_SELECTOR_GOES_HERE');

const eventContextMenu = new MouseEvent('contextmenu', {
    bubbles: true,
});

el.dispatchEvent(eventContextMenu); 
```

**这里的诀窍是这`bubbles: true`是必需的参数。**

PS：[链接到 GitHub 线程中的原始答案](https://github.com/SeleniumHQ/selenium-ide/issues/754#issuecomment-688308753)。

[![在此处输入图像描述](../Images/c8957f46fafb469bc0bcd63bdc6d928e.png)](https://i.stack.imgur.com/Qsv6K.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-02T01:22:46.043

如果您已将 Firefox 配置为打开新选项卡而不是新窗口，则以下会在新选项卡中打开 URL。

```
storeAttribute | link-locator-here | myURLvariableName |
getEval | window.open( storedVars.myURLvariableName, '_blank' /* or tab target name*/ ); | 
```

# insert - 如何在 openoffice 文档表中插入 Excel 表？

> ID：14118202
> 
> 赞同：0
> 
> 时间：2013-01-02T07:12:47.733
> 
> 标签：insert, openoffice-writer

我在一个办公室（5 * 6）有桌子。如何从excel表中插入数据？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:45:34.130

那么，将excel表格导入openoffice，选择需要的部分，复制，然后粘贴到需要的文档。

# android - 使用 FragmentActivity 扩展 MainActivity 时应用程序崩溃

> ID：14118203
> 
> 赞同：-3
> 
> 时间：2013-01-02T07:12:49.293
> 
> 标签：android, android-fragmentactivity

如果我的主要活动是 FragmentActivity，我的 android 应用程序会崩溃。

有想法该怎么解决这个吗？

```
public class MainActivity extends FragmentActivity {
//...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:32:12.747

事实证明我只需要将我的片段包装在 activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">

    <fragment
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment"/>

</LinearLayout> 
```

# javascript - jQuery手机闪烁问题

> ID：14118204
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:12:51.417
> 
> 标签：javascript, jquery, jquery-mobile

如何在使用 Android 的 jQuery mobile 从下拉列表中选择菜单时停止页面闪烁？

我正在使用 jQuery Mobile 1.2.0 和 Cordova 2.0.0，Android 版本是 2.3.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:05:42.600

我用了

```
$("#pageId").live('pageinit',function() {
$.mobile.defaultDialogTransition = "none";
$.mobile.defaultPageTransition = "none";}); 
```

它为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:17:17.980

添加`-webkit-backface-visibility`为隐藏。像这样：

```
 .ui-page {
   -webkit-backface-visibility: hidden;
   } 
```

对可怕的 Android 闪烁说晚安！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:53:38.890

在这里，我带来了解决方案.......

请按照顺序

```
// load jQuery
script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

// load your custom jQuery Mobile Defaults
<script type="text/javascript" src="mobile/js/mobile-jqm.js"></script>

// load jQuery Mobile
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

// load your scripts.js (your javascript & functions, etc.)
<script type="text/javascript" src="mobile/js/script.js"></script> 
```

要禁用转换，请在 mobile-jqm.js 文件中创建 mobile-jqm.js filt & 并放置以下代码：

```
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
   defaultPageTransition: 'none'
  });
}); 
```

# iphone - UILabels 完整文本不可见

> ID：14118208
> 
> 赞同：2
> 
> 时间：2013-01-02T07:12:56.453
> 
> 标签：iphone, uilabel

我必须在 UITableView 的单元格中并排放置两个 UILabel（州，邮编），即加利福尼亚州 32320。当字体大小较小时，我可以清楚地看到它们。当我增加字体大小时，我看不到状态标签和邮政编码的最后一个字母标签正在添加。这是我正在处理的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

        static NSString *CellIdentifier=@"Cell";

        UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell == nil)
        {
            cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];

            state=[[UILabel alloc] initWithFrame:CGRectZero];
            state.tag = 116;
            state.backgroundColor = [UIColor clearColor];
            [state setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
            [state setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:state];

            zipCode=[[UILabel alloc] initWithFrame:CGRectZero];
            zipCode.tag = 121;
            zipCode.backgroundColor = [UIColor clearColor];
            [zipCode setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
            [zipCode setLineBreakMode:UILineBreakModeWordWrap];
            [cell addSubview:zipCode];

}

        NSString *state1=[d objectForKey:@"State"];
        CGSize constraint6=CGSizeMake(175,2000.0f);
        CGSize size6=[state1 sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12]  constrainedToSize:constraint6 lineBreakMode:UILineBreakModeWordWrap];
        state=(UILabel *)[cell viewWithTag:116];
       state.frame=CGRectMake(105, city.frame.size.height+city.frame.origin.y+5, size6.width, 10);
       [state setTextAlignment:UITextAlignmentLeft];

       [state setText:[d valueForKey:@"State"]];

        NSString *zip = [d  objectForKey:@"Zip"];

        if([zip isEqualToString:@""])
        {

           zipCode=[[UILabel alloc]initWithFrame:CGRectMake(105, 125, 320,10)];
            zipCode .font=[UIFont fontWithName:@"Helvetica" size:12];
            [zipCode setTextAlignment:UITextAlignmentLeft];
            zipCode.hidden=YES;
            [zipCode  release];            

        }
        else
        {

            NSString *zip=[d objectForKey:@"Zip"];
            CGSize constraint200=CGSizeMake(175,2000.0f);
            CGSize size200=[zip sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12]  constrainedToSize:constraint200 lineBreakMode:UILineBreakModeWordWrap];
            zipCode=(UILabel *)[cell viewWithTag:121];
            zipCode.frame=CGRectMake(13+state.frame.size.width+state.frame.origin.x, city.frame.size.height+city.frame.origin.y+5, size200.width,10);

            [zipCode setTextAlignment:UITextAlignmentLeft];
            [zipCode  setText:[d valueForKey:@"Zip"]];
            zipCode.numberOfLines=0;

        }

return cell;
} 
```

现在我可以看到结果为 Californi 32320

但是当我将字体大小减小到 10 时，我可以清楚地看到它们（加利福尼亚州 32320）。但我只需要按照我的要求将字体大小设为 12。

我要去哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:27:10.573

使用此代码，它将看到适合您标签大小的标签

```
label.adjustsFontSizeToFitWidth = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T07:17:03.447

请用一些大的更新标签宽度。并使用 Lable 的“setNoOfLine”属性为 2。这样，它将以 2 行显示文本。

希望对您有所帮助。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T07:26:38.613

有一个小技巧，标签会根据您的文本自动调整大小

```
UILabel *testLabel  =   [[UILabel alloc]initWithFrame:CGRectMake(0,0,200,40)];//set your frame
testLabel.numberOfLines =   0;//Important to add this line
testLabel.font  =   [UIFont boldSystemFontOfSize:15];//Set your font
testLabel.text  =   @"Set your text here!";
[testLabel sizeToFit]; // this line will do the trick :) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:25:44.640

您`state`标签的字体是`Helvetica-Bold`，但在您的 中`sizeWithFont`，您指定的字体是`Helvetica`。或者，您可以只指定`state.font`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T07:25:45.867

这样做，

```
CGFloat lLabelWidth = [yourText sizeWithFont: factLabel.font].width;

CGRect _tempFrame=yourLabel.frame;
_tempFrame.size.width=lLabelWidth;
yourLabel.frame=_tempFrame; 
```

希望它会帮助你....

# python - 在Python函数中修改变量正在影响函数外具有不同名称的变量

> ID：14118212
> 
> 赞同：3
> 
> 时间：2013-01-02T07:13:52.723
> 
> 标签：python, function, variables, global-variables

我有一个嵌套字典，其中包含有关许多不同对象的一堆数据（我的意思是非编程意义上的对象）。字典的格式是 allData[i][someDataType]，其中 i 是我拥有数据的对象的编号，而 someDataType 是与相关对象关联的特定数据数组。

现在，我已经定义了一个函数，它需要一个特定的数据数组来为每个对象执行计算。数据数组称为`cleanFDF`。所以我把它和它需要工作的一堆其他东西一起提供给我的函数。我这样称呼它：

```
rm.analyze4complexity(allData[i]['cleanFDF'], other data, other data, other data) 
```

在函数本身内部，我立即将数据重新分配`cleanFDF`给另一个变量名，即`clFDF`. 即最终结果是：

```
clFDF = allData[i]['cleanFDF'] 
```

然后，我必须将低于某个阈值的所有数据归零，如下所示：

```
clFDF[ clFDF < threshold ] = 0 
```

好的 - 该功能按预期工作。但是现在当我尝试在主脚本中绘制原始 cleanFDF 数据时，在 clFDF 中归零的条目也会在`allData[i]['cleanFDF']`. 怎么回事？显然这里发生了一些我不明白的事情。

为了使事情变得更奇怪（从我的角度来看），我试图通过在调用函数之前将数组“保存”到另一个变量来解决这个问题。即我愿意

```
saveFDF = allData[i]['cleanFDF'] 
```

然后运行该函数，然后`cleanFDF`使用“已保存”数据更新条目：

```
allData[i].update( {'cleanFDF':saveFDF} ) 
```

但不知何故，只需在函数修改中执行 clFDF[ clFDF < threshold ] = 0 `clFDF`，`saveFDF`并`allData[i]['cleanFDF']`在主 friggin' 脚本中，将相同数组索引处的所有整数清零！好像它们都是以某种方式关联的全局变量，但我在任何地方都没有做出这样的声明......

我是一个绝望的 Python 新手，所以毫无疑问我不了解它的工作原理。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:21:12.437

您`allData[i]['cleanFDF']` *通过引用传递值（在*[https://stackoverflow.com/a/430958/337678](https://stackoverflow.com/a/430958/337678)的体面解释）。对其所做的任何更改都将对其引用的对象进行，该对象仍然与原始对象相同，只是分配给了不同的变量。

制作数据的深拷贝可能会解决您的问题（Python 有一个深拷贝库应该可以解决问题；））。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T07:37:27.123

一切都是 Python 中的参考。

```
def function(y):
    y.append('yes')
    return y

example = list()
function(example)
print(example) 
```

即使我没有直接更改变量“示例”，它也会返回 ['yes']。

请参阅[为什么 list.append 评估为 false？](https://stackoverflow.com/questions/1682567/why-does-pythons-list-append-evaluate-to-false), [Python append() 与列表上的 + 运算符，为什么这些会给出不同的结果？](https://stackoverflow.com/questions/2022031/python-append-vs-operator-on-lists-why-do-these-give-different-results), [Python 列表追加返回值](https://stackoverflow.com/questions/1918270/python-lists-append-return-value)。

# php - Magento ：类别名称而不是类别路径中的类别 ID。

> ID：14118213
> 
> 赞同：4
> 
> 时间：2013-01-02T07:13:56.267
> 
> 标签：php, performance, magento, magento-1.7

我正在尝试根据 magento 中的产品 ID 在类别路径中获取类别名称。

假设我的产品 ID = 1 并且我定义了 category5 (id = 5) 并且我得到了像 2/3/5 这样的类别路径。而不是这种类型的类别路径，我需要像 category2/category3/category5 这样的类别路径。这意味着我需要路径中的类别名称而不是类别 ID。我通过使用以下代码得到了这个，但它需要很多时间。我需要减少处理时间。

请就如何减少处理时间给我建议。

```
$category_model = Mage::getModel('catalog/category');  
$product_model = Mage::getModel('catalog/product'); 
$all_cats = array();
$product_model->reset();
$_product = $product_model->load($entityId);
$all_cats = $product_model->getCategoryIds($_product); 
$main_cnt = count($all_cats);
$cat_str_main = ''; 
$j = 0;
foreach($all_cats as $ac)
{
    $root_category = $category_model->load($ac);
    $cat_path = $root_category->getPath();
    $cat_arr = explode("/",$cat_path);
    $cnt = count($cat_arr);
    $cat_str = '';
    $main_str = '';
    $i=0;
    foreach($cat_arr as $ids)
    {
                $root_category = $category_model->load($ids); //load root catalog
        if($i == 2)
        {
            $cat_str = $category_model->getName();
        }
        else if($i > 2)
        {
            $cat_str = $cat_str."/".$category_model->getName();
        }
        $i = $i+1;
    }
    if($j < 1)
    {
        $cat_str_main = $cat_str;
    }
    else 
    {
        $cat_str_main = $cat_str_main .",".$cat_str;
    }
    $j = $j+1;
} 
```

**谢谢.....**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T10:11:00.900

您应该使用类别集合而不是加载每个类别来减少数据库查询。

编辑：我给你写了一个代码示例。我假设您具有要获取路径名称为 $categoryId 的类别的类别 ID：

```
$category = Mage::getModel('catalog/category')->load($categoryId);
$collection = $category->getResourceCollection();
$pathIds = $category->getPathIds();
$collection->addAttributeToSelect('name');
$collection->addAttributeToFilter('entity_id', array('in' => $pathIds));
$result = '';
foreach ($collection as $cat) {
    $result .= $cat->getName().'/';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T10:53:46.130

我认为您应该查看为您处理此问题的magento目录url重写...在您的magento管理员中，它应该在目录>> URL重写管理中

编辑：

因为您想在其他页面中执行此操作，您可以简单地执行以下操作：

```
$store = Mage::app()->getStore();

$product_url = $store->getBaseUrl().$product->getUrlPath();

$category_url = $store->getBaseUrl().$category->getUrlPath(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T15:05:41.233

这是比@mpaepper 建议更快的解决方案。我只加载一次集合，然后不询问数据库。

```
echo "################################", PHP_EOL;
$collection = Mage::getResourceModel('catalog/category_collection');
/* @var $collection Mage_Catalog_Model_Resource_Category_Collection */
$pattern    = '1/2/';
$collection->addNameToResult()
        ->addPathFilter($pattern . '.+');

$categories = array();

foreach ($collection as $id => $_cat) {
    /* @var $_cat Mage_Catalog_Model_Category */
    $path = explode('/', $_cat->getPath());

    $namedPath = [];

    foreach ($path as $_id) {
        $subcat = $collection->getItemById($_id);
        if ($subcat) {
            $namedPath[] = $subcat->getName();
        }
    }
    $categories[implode('/', $namedPath)] = $id;
}
print_r($categories);
echo $collection->count(), $collection->getSelect()->assemble(), PHP_EOL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T09:38:47.297

这是 Magento 代码：使用类别路径获取类别名称。请尝试一下。我希望它会帮助你。

```
<?php
    set_time_limit(0);
    require_once '../app/Mage.php';
    Mage::app();
    ?>

    <table class="category-data" border="1" align="center">
    <tr>
        <td><h2>Category Path</h2></td>
        <td><h2>Category Id</h2></td>
        </tr>
    <?php
    $category = Mage::getModel('catalog/category');
    $tree = $category->getTreeModel();
    $tree->load();

    $ids = $tree->getCollection()->getAllIds();
    $categories = array();
    if ($ids)
    {
        foreach ($ids as $id)
        {
            $category->load($id);
            $root = 'Root Catalog';
                $isRoot = strtolower($root);
                $categoryName = strtolower($category->getName());
                if($categoryName == $isRoot){
                    continue;
                }
            $categories[$id]['name'] = $category->getName();
            $categories[$id]['path'] = $category->getPath();
        }
        foreach ($ids as $id)
        {

            $path = explode('/', $categories[$id]['path']);
            $len = count($path);
            $string = '';
            if($id > 2){
                foreach ($path as $k=>$pathId)
                {
                    $separator = '';
                    if($pathId > 2){
                        if($k != $len-1){ $separator = ' || ';}
                        $string.= $categories[$pathId]['name'] . $separator;
                    }
                    $cnt++;
                }
            ?>
            <tr>
            <td><?php echo $string; ?></td>
            <td><?php echo $id; ?></td>
            </tr>
            <?php
            }
        ?>

        <?php
        }
    }
    ?>
    </table> 
```

# clang - Clang 链接器问题（从源代码到 gcc-snapshot）

> ID：14118224
> 
> 赞同：5
> 
> 时间：2013-01-02T07:14:50.433
> 
> 标签：clang, ubuntu-12.04, dynamic-linking

我似乎无法让它发挥作用。我在等于之后配置了`--with-gcc-toolchain=`where 我将 gcc 所在的目录 ( `/usr/lib/gcc-snapshot/bin`)。

我还查看了“ [clang 链接器问题](https://stackoverflow.com/questions/4160262/clang-linker-problem)”的答案，但我看不到如何获得接受的答案以找到正确的位置，并且符号链接答案会起作用，除了它正在搜索的所有目录都存在（将文件夹从 gcc-snapshot复制`lib`到包含位置之一似乎没有帮助）。

正如另一个问题中所建议的，输出`clang++ test.cpp -v`：

> bob@bob:~/programming$ clang++ test.cpp -v
> clang version 3.3 (trunk 171350)
> 目标：x86_64-unknown-linux-gnu
> 线程模型：posix
> “/home/bob/programming/build/Release+Asserts/bin/clang” -cc1 -triple x86_64-unknown-linux-gnu -emit-obj -mrelax-all -disable-free -main-file-name test.cpp -mrelocation-model 静态 -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -target-linker-version 2.22 -momit-leaf-frame-pointer - v -resource-dir /home/bob/programming/build/Release+Asserts/bin/../lib/clang/3.3 -fmodule-cache-path /var/tmp/clang-module-cache -internal-isystem /usr /local/include -internal-isystem /home/bob/programming/build/Release+Asserts/bin/../lib/clang/3.3/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -fdeprecated-macro -fdebug-compilation-dir /home/ bob/programming -ferror-limit 19 -fmessage-length 80 -mstackrealign -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -backend-option -vectorize-loops -o /tmp/测试-PWiB4M.o -x c++ test.cpp
> clang -cc1 版本 3.3 基于 LLVM 3.3svn 默认目标 x86_64-unknown-linux-gnu
> 忽略不存在的目录 "/include"
> #include "..." 从这里开始搜索：
> #include <...> 从这里开始搜索：
> /usr /local/include
> /home/bob/programming/build/Release+Asserts/bin/../lib/clang/3.3/include
> /usr/include/x86_64-linux-gnu
> /usr/include
> 搜索列表结束。
> test.cpp:1:10：致命错误：找不到“iostream”文件
> #include ^
> 1 错误生成。

clang 3.3 版（主干修订版 171350）

**编辑：**构建文件夹中没有`.o`文件。`Release+Asserts`这是正常的吗？如果不是，为什么会这样，我该如何修复它（如果我可以将它作为 clang 的 stdlib，那么它也可以）。

**编辑 2：**它也无法编译`int main(){return 0;}`，因为它找不到`crtbegin.o`. 完整输出如下：

> /usr/bin/ld: 找不到 crtbegin.o: 没有这样的文件或目录
> /usr/bin/ld: 找不到 -lgcc
> /usr/bin/ld: 找不到 -lgcc_s
> clang: 错误: 链接器命令失败，退出代码1（使用 -v 查看调用）

之后的结果`-v`与上述相同，但结束错误不同。

**Config.log：**
完整的文件可以在[这里](http://pastebin.com/U3TVeHvu)找到，但第一行（非注释）是：`$ ../llvm/configure --with-gcc-toolchain=/usr/lib/gcc-snapshot/gcc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T03:35:21.267

我们发现的问题是 gcc 是使用 --prefix=/usr/lib/gcc-snapshot 配置参数安装的。并且 llvm 配置了 --with-gcc-toolchain=/usr/lib/gcc-snapshot/gcc 参数。应该和gcc安装前缀一样，即--with-gcc-toolchain=/usr/lib/gcc-snapshot。

问题的当前第一行显示“我使用 --with-gcc-toolchain= 进行了配置，在等号之后我放置了 gcc 所在的目录 (/usr/lib/gcc-snapshot/bin)。”，以及当前的最后一行说“第一（非注释）行是：$ ../llvm/configure --with-gcc-toolchain=/usr/lib/gcc-snapshot/gcc”

这很令人费解，你可能认为你放了标志 --with-gcc-toolchain=/usr/lib/gcc-snapshot/bin 但你实际上放了 --with-gcc-toolchain=/usr/lib/gcc -快照/gcc

无论如何，我认为您应该尝试以下方法。

1.  删除或重命名构建目录（运行配置命令的目录，即找到 config.log 文件的目录）我假设它是 /home/bob/programming/build 目录。
2.  现在再次创建 /home/bob/programming/build 目录。它现在应该是空的。
3.  cd /home/bob/编程/构建
4.  运行以下配置命令 ../llvm/configure --with-gcc-toolchain=/usr/lib/gcc-snapshot
5.  完成其余的构建过程。

问题似乎是您没有正确指定 gcc-toolchain 前缀。它应该与您在配置 gcc 时使用的 --prefix 参数相同。

在这里报告结果。

另请参阅[构建 gcc 4.7 后的 Clang 3.2 构建损坏](https://stackoverflow.com/questions/10809371/clang-3-2-build-broken-after-building-gcc-4-7)

# asp.net - 下拉控件中的元属性？

> ID：14118227
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:15:05.067
> 
> 标签：asp.net

> **可能重复：**
> [ASP.NET meta:resourcekey](https://stackoverflow.com/questions/755384/asp-net-metaresourcekey)

在 asp.net 中。在下拉列表控件中使用“meta:resoucekey”有什么用。

```
 <asp:ComboBox ID="ddlAccounts" runat="server" Width="130px" MaxLength="0" 
        meta:resourcekey="ddlAccountsResource1" style="display: inline;" 
        AutoCompleteMode="SuggestAppend" ItemInsertLocation="OrdinalText">
    </asp:ComboBox> 
```

任何人都可以解释我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:39:21.223

我使用 meta:resourcekey="myString" 和资源 (xml) 文件来启用多语言支持。您可以拥有许多资源文件（每种语言一个），每个文件都有相同的键。键值因语言而异。您的 aspx 文件将根据页面区域设置从相关资源文件中读取。

例如，我将资源文件 Default.aspx.resx 用于英语资源（字符串），将 Default.aspx.fr-FR.resx 用于法语资源。

然后，我将以下代码添加到每个 .aspx 页面。可能有一种更简洁的方法，但这对我来说效果很好。

```
protected override void InitializeCulture()
{
    if (Request.QueryString["lang"] == "fr")
    {
        base.InitializeCulture();
        System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("fr-FR");
        System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR");
    }
    else
    {
        base.InitializeCulture();
        System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");
        System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("en-GB");
    }
} 
```

# image-uploading - 如何以单个请求而不是字节格式在 WCF 上上传多个图像

> ID：14118230
> 
> 赞同：0
> 
> 时间：2013-01-02T07:15:17.733
> 
> 标签：image-uploading

我在 WCF 上的单个请求中搜索了许多网站以上传多个图像。上传图片中显示的网络服务可以转换为字节格式以保存目录。我的要求是在单个请求中上传多个图像，并且一些参数也来自 http post 方法。如何使用 WCF 将这些图像存储在服务器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:59:05.430

我不知道你为什么想要这个？

如果您提出多个请求，它将更加用户友好。

在单一请求中，您不能上传多张图片，也不推荐。

# sql - 在 xquery 中选择 rownumber 并将其转换为 sql 行

> ID：14118232
> 
> 赞同：0
> 
> 时间：2013-01-02T07:16:12.400
> 
> 标签：sql, sql-server, xml, sql-server-2008, xquery

我有一个表格，我将用户的搜索结果行保存为 xml 格式，如下所示：

```
<row id="5083" />
<row id="5085" />
<row id="5087" />
<row id="5090" />
<row id="5094" />
... (about 500,000 rows) 
```

其中每个行元素包含将显示在结果页面中的结果记录的 id。现在我需要选择一个特定页面的 ID，例如第 2 页（第 10 个元素到第 20 个元素）

第一个问题是如何在 xquery 中获得该结果？我试图使用 position() 函数，但它没有工作......

```
select @results.query('for $x in (row)
where $x/position() > 10
return ($x)') 
```

第二个问题是如何将我的结果 id 作为 sql 行而不是 xmlnodelist ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:29:44.010

在

```
for $x in (row) where $x/position() > 10 return ($x) 
```

$x 遍历第 10 个之后的所有行子代，但每个子代都返回一个长度为 1 且只有一个行元素的序列，因此 $x/position() 始终为 1。

你可以使用

```
row[position() >=10 and position() < 20] 
```

这将返回位置 10 到 19 中的元素。如果您只想要 id 而不是元素节点，那么

```
row[position() >=10 and position() < 20]/string(@id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:36:09.000

您可以使用[nodes() 方法](http://msdn.microsoft.com/en-us/library/ms188282.aspx)来分解您的 XML，并使用[value() 方法](http://msdn.microsoft.com/en-us/library/ms178030.aspx)来提取属性的值`id`。

[SQL小提琴](http://sqlfiddle.com/#!6/d41d8/1771)

**查询 1**：

```
declare @results xml = '
<row id="5083" />
<row id="5085" />
<row id="5087" />
<row id="5090" />
<row id="5094" />'

select T.N.value('@id', 'int') as id
from @results.nodes('row[position() >= 2 and position() < 4]') as T(N) 
```

**[结果](http://sqlfiddle.com/#!6/d41d8/1771/0)**：

```
|   ID |
--------
| 5085 |
| 5087 | 
```

# azure - 将调试器附加到角色实例时出错

> ID：14118237
> 
> 赞同：2
> 
> 时间：2013-01-02T07:16:32.027
> 
> 标签：azure, window

当我尝试在模拟器（Web 角色）上调试我的应用程序时出现异常。

[您可以通过单击以下链接](http://s14.postimage.org/cotqvp7dd/142058.jpg)查看异常

我正在使用的配置 Windows 7 pro、VS 2012 Pro、Azure SDK 1.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-10T15:30:55.130

希望它可以帮助其他人。

我也有类似的问题，我重新启动了 PC 和`**Run Visual Studio as Administrator**`. 并让 Visual Studio 以相同的权限启动模拟器解决了这个问题。

我在 IIS Express 下使用 Visual 2013 和 Web API 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:53:49.007

我突然遇到了同样的问题，幸运的是我记得更改了 ServiceDefinition.csdef 文件。我将其回滚到早期版本，调试器再次正确运行。我在“破碎”版本中唯一改变的是实例大小从小到中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:37:35.933

是否添加了 IIS？很可能它已经安装了，但是您必须通过在控制面板上添加 Windows 组件来启用它...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-22T12:33:40.150

1.  **转到 Visual Studio 安装程序**（从窗口开始搜索）并**更新 Visual Studio**。
2.  更新后，**点击修改按钮**，然后在右侧你会**发现一个名为调试的框**（或类似的东西），**选择那个框**
3.  然后**点击安装**。
4.  **重新启动**您的 Visual Studio，调试器将开始工作。

就我而言，它运行良好。

# nhibernate - 如何使用 Castle windsor fluent nhibernate 和 MVC4 开发多租户应用程序

> ID：14118239
> 
> 赞同：1
> 
> 时间：2013-01-02T07:16:32.403
> 
> 标签：nhibernate, castle-windsor, multi-tenant, fluent, castle

我是**Castle Windsor**和 Fluent NHibernate (AutoMapping) 的新手。
我目前正在处理多租户应用程序并有以下要求。

1.  存储租户信息的主数据库
2.  每个租户的数据库

我已经使用温莎城堡集成了持久性设施，并且能够访问主数据库。我被困在我想从主数据库获取租户的连接信息的地方，再次将此信息传递给持久性设施以构建新会话。因此，最终可以访问主数据库和特定于租户的数据库。

任何人都可以指导我如何进行此操作。

简而言之：
在用户登录时，我想验证用户并从主数据库中识别其租户数据库连接字符串，并使用此信息为特定于租户的数据库操作构建新会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:56:03.837

我将从 ISession 创建 2 个派生类：IMasterSession 和 ITenantSession。这使您可以轻松地从控制器或视图模型中引用任一数据库。

您将需要为您的主数据库和 1 为您的租户数据库的 ISessionFactory 进行两次注册。命名这些，以便您可以参考这些。

现在注册 IMasterSession 如下：

```
Component.For<ISession>().PerWebRequest().Named("masterSession").UsingFactoryMethod((k, m) =>
    {
        var masterFactory = k.Resolve<ISessionFactory>("masterSessionFactory");
        return masterFactory.OpenSession();
    }),
Component.For<object>().Forward<IMasterSession>().Proxy.MixIns(registration =>
    registration.Component("masterSession")) 
```

会话工厂必须使用生活方式单例注册，因为您的应用程序中只需要一个。会话的生命周期取决于您正在制作的应用程序类型，可能是 PerWebRequest。

可能有更好的方法来做到这一点，我很想听听。

租户数据库的方法应该类似。但是，您要么需要使用采用 IDBConnection 的 OpenSession 重载，要么需要实现自定义连接提供程序。您可以在[此处找到更多相关信息](https://stackoverflow.com/questions/91840/multi-tenant-architecture-and-nhibernate)

我希望这有帮助。

亲切的问候，

马尔维恩。

# excel - Time duration calculation Error runtime using VBScript

> ID：14118251
> 
> 赞同：0
> 
> 时间：2013-01-02T07:17:37.700
> 
> 标签：excel, vbscript, vba

I am trying to calculate the time durations via the below `Sub`. But it takes only two iterations.where as it should take `4`, as a result all the durations are not being summed up.I introduced `2` `msgbox`- which are showing the result. Fitst one showing the length which is perfect,but the second one showing some thing undesired.

**CODE**

```
msgbox(ArrayListTaskDetails.Count) '~~ output is 16
For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 Step 4

dt1 = ArrayListTaskDetails(IndexSearch + 3)         
SumDate = TimeAdd(dt1,SumDate)

If Err Then

msgbox(IndexSearch) '~~ output as 8\. here is the question why the error occurs?
Err.Clear
Exit for

End If

Next

Function TimeAdd(dt1,dt2)

If (IsDate(Cdate(dt1)) And IsDate(Cdate(dt2))) = False Then ' `Type mismatch: Cdate` error occurs in this line. Could you guide me here where the wrong is?
TimeAdd = "00:00:00"
Exit Function
End If

TimeAdd = Hour(dt1)+Hour(dt2) & ":" & Minute(dt1)+Minute(dt2) & ":" & Second(dt1)+Second(dt2) 

End Function 
```

***Note:*** Time duration are `00:05:23`,`00:11:58`,`195:33:12`,`320:37:13` respectively at 3,7,11,15 th position of the `List`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:34:56.677

The `IsDate` function returns a Boolean value that indicates if the evaluated expression can be converted to a date. It returns True if the expression is a date or can be converted to a date; otherwise, it returns False.Link h[ere](http://www.w3schools.com/vbscript/func_isdate.asp)

Code should be as :-

```
If Not (IsDate((dt1) And IsDate(dt2)) Then            '' If dt1 or dt2, any one from this id not date then it will set timeAdd = "00:00:00"
   TimeAdd = "00:00:00"
   Exit Function
End If 
```

# android - android中带有标签栏的gridview

> ID：14118253
> 
> 赞同：1
> 
> 时间：2013-01-02T07:17:57.720
> 
> 标签：android, layout, gridview, include, tabbar

我必须开发一个 android 应用程序。

在这里，我必须开发网格视图布局，例如：

```
<?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:id="@+id/Layout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <TextView
    android:id="@+id/status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:text="Mercuryminds Shoppingcart Application"

    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#040404"
    android:gravity="center" />

<GridView
    android:layout_height="wrap_content"
    android:id="@+id/gridView1"
    android:layout_width="match_parent"
    android:numColumns="auto_fit"

    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp">
</GridView>

 <include        
 android:id="@+id/footer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/footer" />

   </LinearLayout> 
```

这里的布局页脚是标签栏。

```
 <?xml version="1.0" encoding="utf-8"?>
   <TabHost
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent"
xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
    android:layout_width="match_parent"
    android:id="@+id/linearLayout1"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TabWidget
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/tabs">
    </TabWidget>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@android:id/tabcontent">
    </FrameLayout>
</LinearLayout>
    </TabHost> 
```

但是我必须运行该应用程序意味着标签栏未显示在我的主视图上。我的布局文件中有什么问题。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:23:53.593

添加`layout_weight="1"`到您的 gridView 和`layout_height="0dp"`

像这样

```
 <GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="10dp" >
    </GridView> 
```

# php - 数组格式化成特定格式？

> ID：14118259
> 
> 赞同：-2
> 
> 时间：2013-01-02T07:18:45.493
> 
> 标签：php, arrays, codeigniter

在我将结果集格式化为以下格式后，我得到了一个如下所示的数组。

```
Array
(
    [0] => xxx@2456
    [1] => xxx@2345
    [2] => xxy@1234
    [3] => xxy@123
    [4] => xyz@3456
); 
```

我想要上面数组中的结果数组，如下所示。我正在考虑如何使用 PHP 字符串函数或有其他方法。

注意：可能有很多像上面这样的数组元素，但是在我们在“@”之后添加最后一个数字之后，我想要唯一的元素。

```
Array
(
    [0] =>  xxx@4801
    [1] =>  xxy@1464
    [2] =>  xyz@3456
); 
```

任何想法如何进行......在上面的输出数组格式中，xxx@4801 是输入数组的 2345 和 2456 的总和......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:35:06.893

你可以试试

```
$unique = array_reduce($data, function ($a, $b) {
    $c = explode("@", $b);
    if (isset($a[$c[0]])) {
        $d = explode("@", $a[$c[0]]);
        $a[$c[0]] = $c[0] . "@" . ($c[1] + $d[1]);
    } else {
        $a[$c[0]] = $b;
    }
    return $a;
}, array());

echo "<pre>";
print_r(array_values($unique)); 
```

[输出](http://eval.in/5748)

```
Array
(
    [0] => xxx@4801
    [1] => xxy@1357
    [2] => xyz@3456
) 
```

[简单的在线演示](http://eval.in/5748)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:34:48.660

例如，您可以使用`array_unique()`函数并使用`array_values()`Find the code 重新索引它。

*   [`array_unique($array)`](http://php.net/manual/en/function.array-unique.php)

*   [`array_values(array_unique($array));`](http://php.net/manual/en/function.array-values.php)

# android - 活动在 android Surfaceview 中没有响应

> ID：14118261
> 
> 赞同：0
> 
> 时间：2013-01-02T07:19:02.173
> 
> 标签：android, android-canvas

我正在尝试一个简单的游戏类型应用程序，我在用户点击的屏幕上绘制坐标。

问题是，如果我有一段时间不点击，应用程序会给出 ANR

[我的代码在这里列出](http://pastebin.com/s53Qgdag)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:08:11.740

您的代码有点混乱（可能有很多东西需要清理）。

无论如何，我认为问题如下：在一段时间不活动后`SurfaceViewTest.onPause()`，Android OS 会调用它。这个方法调用`renderView.pause()`你有一个无限循环

```
while(true){...} 
```

所以这个`pause()`方法永远不会结束。

如果你写：

```
while(renderThread.isAlive()){...} 
```

它将解决您描述的问题。

# xcode - 从命令行创建新的 xcode 项目

> ID：14118262
> 
> 赞同：14
> 
> 时间：2013-01-02T07:19:07.463
> 
> 标签：xcode, terminal

我想用原生苹果框架创建 iPhone 应用程序。但我想从命令行创建它。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-09-01T07:27:17.873

```
pod lib create ProjectName 
```

这将创建 XCode 项目库、示例和单元测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T07:44:02.380

没有现成的工具可以做到这一点，但你可以使用另一个项目作为模板，复制它，重命名它及其目标/设置（它都是 XML，所以你可以解析和修改它，但为了简单起见，我会尝试使用一个项目模板，您只需在其中交换一些名称 :))

# linux - 实时系统中的高效内存调度算法

> ID：14118264
> 
> 赞同：1
> 
> 时间：2013-01-02T07:19:11.660
> 
> 标签：linux, algorithm, memory

我正在研究一个项目，其中实时系统中的算法学习内存访问模式并相应地将页面从主内存交换到辅助内存。还找到访问数据之间的相互依赖关系并相应地预取数据。

我想知道，是否有任何现有的方法可以有效地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:22:34.673

你可以试试[Tiros](http://tiros.sourceforge.net/)或[real-time-scheduler project](http://sourceforge.net/projects/rtsched/)。

# java - 在将字符串发送到服务器之前压缩字符串

> ID：14118268
> 
> 赞同：1
> 
> 时间：2013-01-02T07:19:29.470
> 
> 标签：java, php, android, compression

我想最小化从我的 android 应用程序发送到服务器的 HTTP POST 数据的大小。服务器在 PHP 上运行。我可以为此使用任何压缩方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:27:01.370

您可以使用 GZip 压缩您的请求。Android 也支持[GZip](http://android-developers.blogspot.jp/2011/09/androids-http-clients.html)请求。在那个罐子里，您的网络服务器将需要处理 gzip 压缩。

有一些关于如何[GZip 您的请求的](https://stackoverflow.com/questions/3752359/gzip-in-android)问题。你也可以参考[这篇](http://forrst.com/posts/Enabling_GZip_compression_with_HttpClient-u0X)文章，上面说你可以实现如下。

```
private static final String HEADER_ACCEPT_ENCODING = "Accept-Encoding";
private static final String ENCODING_GZIP = "gzip";
final DefaultHttpClient client = new DefaultHttpClient(manager, parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:28:11.567

您可以使用 GZIP 压缩和解压缩请求和响应。您需要设置`Request Headers`

```
Content-Encoding : gzip 
```

*   [Java中带有HTTPClient的GZip POST请求](https://stackoverflow.com/questions/7153484/gzip-post-request-with-httpclient-in-java)
*   [在 php 中解码你的 gzip](http://php.net/manual/en/function.gzdecode.php)

# asp.net - IIS 上网站管理工具中的用户

> ID：14118269
> 
> 赞同：1
> 
> 时间：2013-01-02T07:19:42.903
> 
> 标签：asp.net, iis, website-admin-tool

我是 ASP 和 IIS 的新手，我试图解决这个问题 2 天，但仍然无法解决。在第 1 次，我在网站管理工具（VS2008 项目>ASP 中创建了一个 ASP 登录页面和用户信息存储） .NET 配置）它工作正常，因为我可以在调试时登录到我的 aspx 页面。

接下来，我打开窗口功能`(IIS under item World Wide Web Services >> Application Development Features all are selected except CGI)`

然后，我发布我的登录页面并转到***C:\inetpub\wwwroot\web.config***添加几行

```
<connectionStrings>

    <add name="connect" connectionString="Data Source=USER-PC\SQLEXPRESS;Initial Catalog=school;Persist Security Info=True;User ID=sa;Password=password" providerName="System.Data.SqlClient" />
    <add connectionString="data source=.\SQLEXPRESS;IntegratedSecurity=True;AttachDBFilename=|DataDirectory|ASPNETDB.MDF;User Instance=true" name="ConnectionString" providerName="System.Data.SqlClient" />
    <add name="ptiConnectionString1" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|pti.mdf;IntegratedSecurity=True;User Instance=True" providerName="System.Data.SqlClient" />

</connectionStrings> 
```

接下来，我打开 IIS 管理器启用 ASP.NET 模拟并尝试浏览到本地主机，但我仍然无法访问我的登录页面
我也启用了表单身份验证，但仍然相同，无法登录。谁能帮我 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:54:25.687

安装 ASP.NET 后是否安装了 IIS？如果是这样，您需要向 IIS 注册 ASP.NET - 请在此处查看我的答案：[Hosting ASP.Net MVC 4 SPA web Application in IIS](https://stackoverflow.com/questions/14117602/hosting-asp-net-mvc-4-spa-web-application-in-iis/14118863#14118863)

# azure - 究竟什么是 Windows Azure 实例？

> ID：14118273
> 
> 赞同：7
> 
> 时间：2013-01-02T07:19:58.053
> 
> 标签：azure, cloud, azure-web-roles, azure-web-app-service

在 Windows Azure 门户上（截至 2013 年 1 月）当我将 Windows Azure 网站实例从 1 扩展到 6 时，我会得到什么？这是否意味着我的网站在同一台服务器上会有 6 个物理实例？在 IIS 方面是否有 6 个正在运行的网站都自动进行负载平衡？

但是从帮助文本来看，它将实例称为进程？如果是这样，我的网站将获得 6 个 CPU、RAM 还是什么？

![Windows Azure 门户](../Images/158daddd83bfcad8ef5cae4c26673fcb.png)

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:46:11.860

与 Windows Azure Web 角色不同，Windows Azure 网站是一个“高密度”多租户平台，它不使用虚拟机作为缩放单元，而是使用进程。

当您使用 Web 角色（或工作角色或虚拟机）时，每个实例都等于一个虚拟机，其“规格”由所选实例大小决定。

当您使用网站时，您可以在共享实例和保留实例之间进行选择：

从规模的角度来看，预留实例与 Web 角色非常相似，因此规模单位是虚拟机（您需要支付相应费用）

共享实例使用高密度模型，其中多个租户可能存在于同一虚拟机上，但每个租户都有自己的进程，平台通过沙盒提供隔离。

在共享实例的情况下，缩放单元不是整台机器，而是一个附加进程，很可能在单独的虚拟机上运行。

# java - 调用垃圾回收会导致程序在java中使用更少的堆内存

> ID：14118277
> 
> 赞同：2
> 
> 时间：2013-01-02T07:20:52.907
> 
> 标签：java, garbage-collection, profiling

这与我的问题[Java Excel POI 在石英多次执行后停止](https://stackoverflow.com/questions/13488893/java-excel-poi-stops-after-multiple-execution-by-quartz)有关。

几次迭代后，我的程序意外停止。我尝试进行分析，发现每次迭代都消耗了大量的堆内存（并且某个地方的内存泄漏……还没有找到问题所在）。因此，作为临时解决方案，我尝试`System.gc();`在程序的每次完整执行结束时插入（请阅读链接的问题以获取程序的简要说明）。我并没有期待太多，每次迭代后可能会有更多可用的堆空间。但是，当我插入`System.gc();`.

![在此处输入图像描述](../Images/07fe92eee8e398c514b718fd4ff97b5e.png)

上图显示了运行的程序，`System.gc();`而下图是没有运行的程序。如您所见，上图显示在程序的 4 次迭代后我只使用了不到 100mb 的空间，而下图显示在相同数量的迭代中使用超过 100mb。任何人都可以澄清如何以及为什么`System.gc();`会在我的堆中造成这种影响？如果我在我的程序中使用它有什么缺点吗？或者我对编程完全没有希望，而是开始摄影？

请注意，我在每次程序迭代结束时插入了 GC。所以我假设堆使用必须和没有插入GC的情况一样，直到它满足`System.gc();`命令

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:11:10.410

根据 Java 规范，调用 gc() 并不能保证它会运行，您只会提示 JVM 需要它运行，因此结果是不可靠的（无论如何都应该避免调用 gc()）。但是，在您的情况下，由于堆逐渐达到临界极限，这就是为什么您的提示可能正在执行的原因。

GC 通常基于特定算法运行以防止堆被耗尽，当它无法回收急需的空间而没有更多堆供您的应用程序生存时，您将面临`OutOfMemoryException`.

当 GC 运行时，您的应用程序会由于其活动而经历一些暂停，因此您不会真的希望它更频繁地运行！

最好的办法是解决泄漏并练习更好的内存管理以获得健康的运行时体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:29:34.457

> 任何人都可以澄清 System.gc() 的方式和原因吗？在我的堆中造成这种影响？

`System.gc`是垃圾收集器运行的一种请求服务。请注意，我在我的声明中使用了`request`而不是。`trigger`基于堆状态的 GC 可能/不进行收集。

> 如果我在我的程序中使用它有什么缺点吗？

根据经验，GC 在单独放置时效果最好。在您的示例中，您不必担心或使用`System.gc`. 因为 GC 将在最佳运行时运行，并且手动请求它可能会降低性能。即使只有很小的差异，您也可以观察到下图中的“在 gc 上花费的时间”比第一个要好。

根据记忆，两张图都可以。好像你的最大堆有点高。因此 GC 没有在第二张图中运行它。如果真的需要，它会运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:21:25.283

使用 System.gc() 不应影响分配给 JVM 的堆大小。堆大小仅取决于我们提供给 JVM 的启动参数。我会建议您运行相同的程序 3-4 次，并使用 System.gc() 和不使用平均值。

回到寻找内存泄漏的问题；我会推荐使用 JProfiler 或其他工具来告诉你确切的内存占用；和堆中的不同对象。

最后但是同样重要的; 你是一个合理的程序员。不需要去拍照:)

# php - echo ++$a + $a++ 的输出应该是什么

> ID：14118282
> 
> 赞同：9
> 
> 时间：2013-01-02T07:21:16.743
> 
> 标签：php, operator-precedence, post-increment, pre-increment

在 PHP 手册，[运算符优先级部分](http://php.net/manual/en/language.operators.precedence.php)，有这个例子：

```
// mixing ++ and + produces undefined behavior
$a = 1;
echo ++$a + $a++; // may print 4 or 5 
```

我了解该行为未定义，原因如下：

因为解释器可以自由地以任何顺序`x + y = y + x`评估`x`和添加，以优化速度和/或内存。[在查看本文中的 C 代码示例](https://www.securecoding.cert.org/confluence/display/seccode/EXP10-C.+Do+not+depend+on+the+order+of+evaluation+of+subexpressions+or+the+order+in+which+side+effects+take+place)`y`后，我得出了这一结论。

`4`我的问题是，无论表达式和子表达式的评估方式如何，上述 PHP 代码的输出都应该是：

*   op1 = ++$a => $a = 2, op1 = 2; op2 = $a++ => op2 = 2, $a = 3; 2 + 2 = 4
*   op1 = $a++ => op1 = 1, $a = 2; op2 = ++$a => op2 = 3, $a = 3; 1 + 3 = 4

5从哪里来？或者我应该更多地了解操作员的工作方式？

编辑：

我一直盯着[递增/递减运算符](http://php.net/manual/en/language.operators.increment.php)部分，但仍然无法弄清楚为什么 5。

> ++$a: Pre-increment -- 将 $a 加一，***然后***返回 $a。
> $a++: 后增量——返回 $a，***然后将***$a 加一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:26:14.330

```
a = 1;
++ (preincrement) gives a = 2 (higher precedence than +, and LR higher precedence than postincrement)
++ (postincrement) gives a = 3 (higher precedence than +)
+ (add) gives 2 + 3 = 5 
```

$a 最初设置为 1。 ++$a 然后在公式中使用它之前预先递增 $a，将其设置为 2，并将该值推送到词法分析器堆栈中。然后执行 $++，因为 incrementor 的优先级高于 +，并且该值也被推送到词法分析器堆栈中；然后发生的加法将词法分析器堆栈的 2 结果添加到词法分析器堆栈的 3 结果中，得到结果 5，然后回显。行执行后 $a 的值为 3。

**或者**

```
a = 1;
++ (preincrement) gives a = 2 (higher precedence than +, and LR higher precedence than postincrement)
+ (add) gives 2 + 2 = 4 (the value that is echoed)
++ (postincrement) gives a = 3 (incremented __after__ the variable is echoed) 
```

$a 最初设置为 1。当解析公式时，++$a 预递增 $a，在公式中使用它之前将其设置为 2（将结果推送到词法分析器堆栈）。然后将来自词法分析器堆栈的结果和 $a 的当前值相加，得到 4；并且这个值被回显。最后，对 $a 进行后增量，在 $a 中留下 3 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:29:39.080

是的，它会给你 5，因为**右侧运算符首先按其优先级/优先级工作**，然后 sum(+) 运算符将工作。因此，第一个增量使其变为 2，第二个增量变为 3，然后两者都将求和并将结果输出为 5

```
$result = ++$a + $a++; 
```

`++$a`输出为 2

`$a++`仅输出为 2 3 但在内部它将递增。

最后总和将发生为 2+3 = 5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:49:33.390

马克，我相信你错了！

后增量：返回 $a，然后将 $a 加一。（来自文档）

所以没有办法在 sum 运算中得到 $a 的值 3。

# java - Apache Maven-2.2.1 未能下载存储库

> ID：14118292
> 
> 赞同：0
> 
> 时间：2013-01-02T07:22:14.230
> 
> 标签：java, maven

我使用的是 Maven 2.2.1 - 当我拥有 Java 1.6 时，我的系统上成功下载了存储库。但是当我迁移到 Java 1.7 时，我无法再次下载它。

现在我已经回滚到 java 1.6 但我仍然无法下载 maven。[注意：我也尝试过使用 Maven 3.0.3 并面临同样的问题]

我正在关注构建错误

系统设置了 Java Home 目录的 JAVA_HOME

```
[ERROR] BUILD ERROR
[INFO] ----------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
org.apache.maven.shared.osgi.Maven2OsgiConverter
[INFO] ----------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionExcep tion: Internal error in the plugin manager executing goal 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version': Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeGoals(DefaultLifecycleExecutor.java:698)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeGoalWithLifecycle(DefaultLifecycleExecuto r.java:556)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeGoal(DefaultLifecycleExecutor.java:535)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeGoalAndHandleFailures(DefaultLifecycleExe cutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeTaskSegments(DefaultLifecycleExecutor.jav a:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMav en.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven .java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:3 62)
at org.apache.maven.cli.compat.CompatibleMain.main(Co mpatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Nativ e Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Native MethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(De legatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(L auncher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher. java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode (Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.ja va:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Unable to load the mojo 'com.sun.enterprise:osgiversion-maven-plugin:0.4.11:compute-osgi-version' in the plugin 'com.sun.enterprise:osgiversion-maven-plugin'. A required class is missing: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
at org.apache.maven.plugin.DefaultPluginManager.getCo nfiguredMojo(DefaultPluginManager.java:679)
at org.apache.maven.plugin.DefaultPluginManager.execu teMojo(DefaultPluginManager.java:468)
at org.apache.maven.lifecycle.DefaultLifecycleExecuto r.executeGoals(DefaultLifecycleExecutor.java:694)
... 17 more
Caused by: java.lang.NoClassDefFoundError: Lorg/apache/maven/shared/osgi/Maven2OsgiConverter;
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.jav a:2291)
at java.lang.Class.getDeclaredField(Class.java:1880)
at hidden.org.codehaus.plexus.util.ReflectionUtils.ge tFieldByNameIncludingSuperclasses(ReflectionUtils. java:47)
at org.codehaus.plexus.component.composition.FieldCom ponentComposer.getFieldByName(FieldComponentCompos er.java:212)
at org.codehaus.plexus.component.composition.FieldCom ponentComposer.findMatchingField(FieldComponentCom poser.java:171)
at org.codehaus.plexus.component.composition.FieldCom ponentComposer.assembleComponent(FieldComponentCom poser.java:62)
at org.codehaus.plexus.component.composition.DefaultC omponentComposerManager.assembleComponent(DefaultC omponentComposerManager.java:68)
at org.codehaus.plexus.DefaultPlexusContainer.compose Component(DefaultPlexusContainer.java:1486)
at org.codehaus.plexus.personality.plexus.lifecycle.p hase.CompositionPhase.execute(CompositionPhase.jav a:29)
at org.codehaus.plexus.lifecycle.AbstractLifecycleHan dler.start(AbstractLifecycleHandler.java:101)
at org.codehaus.plexus.component.manager.AbstractComp onentManager.startComponentLifecycle(AbstractCompo nentManager.java:105)
at org.codehaus.plexus.component.manager.AbstractComp onentManager.createComponentInstance(AbstractCompo nentManager.java:95)
at org.codehaus.plexus.component.manager.PerLookupCom ponentManager.getComponent(PerLookupComponentManag er.java:48)
at org.codehaus.plexus.DefaultPlexusContainer.lookup( DefaultPlexusContainer.java:331)
at org.codehaus.plexus.DefaultPlexusContainer.lookup( DefaultPlexusContainer.java:440)
at org.apache.maven.plugin.DefaultPluginManager.getCo nfiguredMojo(DefaultPluginManager.java:652)
... 19 more
Caused by: java.lang.ClassNotFoundException: org.apache.maven.shared.osgi.Maven2OsgiConverter
at java.net.URLClassLoader$1.run(URLClassLoader.java: 200)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.j ava:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:3 07)
at org.codehaus.classworlds.RealmClassLoader.loadClas sDirect(RealmClassLoader.java:195)
at org.codehaus.classworlds.DefaultClassRealm.loadCla ss(DefaultClassRealm.java:255)
at org.codehaus.classworlds.DefaultClassRealm.loadCla ss(DefaultClassRealm.java:274)
at org.codehaus.classworlds.RealmClassLoader.loadClas s(RealmClassLoader.java:214)
at java.lang.ClassLoader.loadClass(ClassLoader.java:2 52)
at java.lang.ClassLoader.loadClassInternal(ClassLoade r.java:320)
... 36 more
[INFO] ----------------------------------------------------------------------
[INFO] Total time: 29 minutes 36 seconds
[INFO] Finished at: Fri Dec 21 13:07:49 IST 2012
[INFO] Final Memory: 13M/23M
[INFO] ---------------------------------------------------------------------- 
```

谁能让我知道我需要更新哪些设置已更改？

谢谢

# android - 强制停止后，android phonegap 中未触发下一个通知

> ID：14118297
> 
> 赞同：0
> 
> 时间：2013-01-02T07:22:53.743
> 
> 标签：android, cordova

我在我的应用程序中使用本地通知插件。在这里，我设置了警报之类的通知。它工作正常。每当我在我的数据库中设置，警报工作正常。但是当我强制停止应用程序（设置->应用程序->管理应用程序->我的应用程序->ForceStop）时，下一个警报不会到来。任何人都可以帮助我吗？...我尝试使用以下链接
[http://www.javacodegeeks.com/2012/05/android-broadcast-receiver-change-in.html](http://www.javacodegeeks.com/2012/05/android-broadcast-receiver-change-in.html) 但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T03:03:58.187

强制停止应用程序将删除与应用程序关联的警报

所以你的待处理任务永远不会完成。

详细阅读：http: [//blog.csdn.net/gemmem/article/details/8858461](http://blog.csdn.net/gemmem/article/details/8858461)

# delphi - 关于在delphi中调用静态类的不同方式

> ID：14118298
> 
> 赞同：1
> 
> 时间：2013-01-02T07:22:58.757
> 
> 标签：delphi, class, constructor

我正在使用类构造函数创建一个类

```
TStaticDynSettings = class
public
  class constructor create;
  class destructor destroy;
  class procedure Reload;
end; 
```

除了create和destroy之外，类中的所有其他方法都需要是类方法吗？

我确定所有变量都必须是类 var，否则自动初始化将不起作用。

调用该过程有什么区别？..

```
var StDyn : TStaticDynSettings;`
StDyn.Reload; 
```

和

`TStaticDynSettings.Reload;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:15:51.560

1 - 如果您不打算创建对象实例，`TStaticDynSettings`您可以使用 3 种形式中的任何一种：

```
type
  TStaticDynSettings = class
  public
    procedure Reload1;
    class procedure Reload2;
    class procedure Reload3; static;
  end; 
```

调用示例：

```
procedure Call1;
var Instance: TStaticDynSettings;

begin
  Instance.Reload1;
end;

procedure Call2;
begin
  TStaticDynSettings.Reload2;
end;

procedure Call3;
begin
  TStaticDynSettings.Reload3;
end; 
```

区别在于传入的隐藏参数`Reload1`和`Reload2`方法，而不是传入`Reload3`。

hidden 参数是对对象实例的引用`Reload1`（并且没有使用，因为您没有创建对象实例）和类引用`Reload2`（在您的情况下这可能也是不必要的，假设在编译时已知类引用）。

第一种形式 ( `Reload1`) 具有误导性，因为它假定使用对象引用，因此应避免使用（尽管它有效）。

`Reload3`如果您不使用在编译时未知的类引用，则最好使用第三种形式 ( )。

2 - 没有区别（不计算在第一种情况下使用不必要的对象变量的开销）。

# asp.net-mvc - 保存更改后的 Kendo UI 网格批量编辑 - Microsoft JScript 运行时错误：预期为 ';'

> ID：14118301
> 
> 赞同：1
> 
> 时间：2013-01-02T07:23:20.873
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 Kendo UI ASP.Net MVC - 网格 - 批量编辑，

单击“保存”后。数据成功保存在数据库中。

但是“kendo.web.min.js”抛出错误“Microsoft JScript 运行时错误：预期';'”

```
@model IEnumerable<EOL.RecOil.Models.ControllerActionViewModel>
@using Kendo.Mvc.UI;

<div>
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
    columns.Bound(p => p.ID).Visible(false);
    columns.Bound(p => p.ControllerName);
    columns.Bound(p => p.ActionName);
    columns.Bound(p => p.HasAccess);
    columns.Bound(p => p.UserAccessID).Visible(false);
    columns.Bound(p => p.ControllerID).Visible(false);
    columns.Bound(p => p.ActionID).Visible(false);
    })    
    .Filterable()
    .Groupable()
    .Editable(editable => editable.Mode(GridEditMode.InCell))
    .ToolBar(toolBar => { toolBar.Save(); })
    .DataSource(dataSource => dataSource
    .Ajax()
    .Batch(true)
    .Events(events => events.Error("error"))            
    .Update(update => update.Action("Edit","ControllerActions"))
    .ServerOperation(false)
    .Model(x =>
    {
    x.Id(p => p.ID);
    x.Field(p => p.ControllerName).Editable(false);
    x.Field(p => p.ActionName).Editable(false);
    x.Field(p => p.HasAccess).Editable(true);
    })
    )
)
</div>

[HttpPost]
public ActionResult Edit([DataSourceRequest] DataSourceRequest request, [Bind(Prefix = "models")] IEnumerable<ControllerActionViewModel> controllerActionViewModel)
{
            try
            {
                if (controllerActionViewModel != null && ModelState.IsValid)
                {
                    foreach (var item in controllerActionViewModel)

 {
                db.Database.ExecuteSqlCommand("SaveUserAccess @UserID,@ControllerID,@ActionID,@UserAccessID,@HasAccess",
                               new SqlParameter("UserID", item.UserID),
                               new SqlParameter("ControllerID", item.ControllerID),
                               new SqlParameter("ActionID", item.ActionID),
                               new SqlParameter("UserAccessID", item.UserAccessID),
                               new SqlParameter("HasAccess", item.HasAccess)
                               );
            }

        }
    }
    catch (Exception ex)
    {
        Helper.SaveError(ex.InnerException.InnerException.Message, "ControllerActions", "Edit");
        ModelState.AddModelError(string.Empty, ex.InnerException.InnerException.Message);
    }

    return Json(new[] { controllerActionViewModel }.ToDataSourceResult(request, ModelState), JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:42:40.173

我想我可能已经找到了这个问题的答案，今天大部分时间都在努力解决这个问题。

我的代码看起来和你的很相似。我的操作方法的返回值如下所示：

```
return Json(new[] { viewmodel }.ToDataSourceResult(request, ModelState)); 
```

这给了我你描述的确切的javascript错误。在尝试了很多事情之后，我最终将代码与另一种运行良好的方法进行了比较，因此我将其稍微调整为：

```
return Json(viewmodel.ToDataSourceResult(request, ModelState)); 
```

这现在可以工作了，我的 MVC 应用程序不再抛出 javascript 错误。

我希望这可以帮助你@Jignesh。

# asp.net - 唯一客户端参考id 自动生成 Asp.net | VB.net

> ID：14118308
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:23:58.087
> 
> 标签：asp.net, vb.net, web

我和我的朋友已经开始使用 asp.net (vb.net) 创建一个电子商务网站。我们是新手，对它了解不多。

谁能告诉我如何为从网站购买产品的每个客户自动生成唯一的参考 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:35:27.800

方法和方法有很多，但是可以使用下面的命令：

```
Dim user_id As Guid = Guid.NewGuid() 
```

这将为您生成一个唯一的 ID。

您还可以在数据库表中自动生成新 ID。只需确保创建具有数据类型的列`uniqueidentefier` 并为其分配一个`default`value 属性`newid()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:43:21.093

您可以通过提供一个分配了主键或唯一键的列来在数据库表中生成唯一 ID。您可以设置该特定列的自动递增属性，以便它会为每个新客户条目自动递增。您也可以同时搜索网络以获得更好的方法

# android - 如何在 Android 的自定义列表视图中使用搜索功能

> ID：14118309
> 
> 赞同：28
> 
> 时间：2013-01-02T07:24:08.323
> 
> 标签：android, listview, search, baseadapter, custom-adapter

我创建了一个列表视图，其中包含多个行中的项目。我还在上面创建了一个搜索框。我想根据列表的特定字段实现搜索功能。我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-02T09:12:56.360

您必须使用模型、列表视图和 customadapter 进行过滤。我为此创建了一个演示。

假设您有一个名为 Product 的模型，并且您在自定义列表视图中显示其内容，其中名称和价格显示在文本视图中。我的意思是在具有两个文本视图的自定义行中，并且您想通过自定义行的字段之一来过滤列表。在这里，我用“名称”过滤

**截图：**

最初的

![最初的](../Images/3d07b87aa703a4304ddbe70e99ef9bf2.png)

过滤

![过滤](../Images/5c367c4540eb9503a2a6386fa303e68e.png)

**源代码**

### 模型

```
public class Product {

    public String name;
    public Integer price;
    public Product(String name, Integer price) {
        super();
        this.name = name;
        this.price = price;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Integer getPrice() {
        return price;
    }
    public void setPrice(Integer price) {
        this.price = price;
    }
} 
```

### 带有自定义适配器和列表视图的活动

```
public class MainActivity extends Activity {
    private LinearLayout llContainer;
    private EditText etSearch;
    private ListView lvProducts;

    private ArrayList<Product> mProductArrayList = new ArrayList<Product>();
    private MyAdapter adapter1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initialize();

        // Add Text Change Listener to EditText
        etSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // Call back the Adapter with current character to Filter
                adapter1.getFilter().filter(s.toString());
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,int after) {
            }

            @Override
            public void afterTextChanged(Editable s) {
            }
        });
    }

    private void initialize() {
        etSearch = (EditText) findViewById(R.id.etSearch);
        lvProducts = (ListView)findViewById(R.id.lvOS);
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        mProductArrayList.add(new Product("a", 100));
        mProductArrayList.add(new Product("b", 200));
        mProductArrayList.add(new Product("c", 300));
        mProductArrayList.add(new Product("d", 400));
        mProductArrayList.add(new Product("e", 500));
        mProductArrayList.add(new Product("f", 600));
        mProductArrayList.add(new Product("g", 700));
        mProductArrayList.add(new Product("h", 800));
        mProductArrayList.add(new Product("i", 900));
        mProductArrayList.add(new Product("j", 1000));
        mProductArrayList.add(new Product("k", 1100));
        mProductArrayList.add(new Product("l", 1200));
        mProductArrayList.add(new Product("m", 1000));
        mProductArrayList.add(new Product("n", 1300));
        mProductArrayList.add(new Product("o", 1400));
        mProductArrayList.add(new Product("p", 1500));

        adapter1 = new MyAdapter(MainActivity.this, mProductArrayList);
        lvProducts.setAdapter(adapter1);
    }

    // Adapter Class            
    public class MyAdapter extends BaseAdapter implements Filterable {

        private ArrayList<Product> mOriginalValues; // Original Values
        private ArrayList<Product> mDisplayedValues;    // Values to be displayed
        LayoutInflater inflater;

        public MyAdapter(Context context, ArrayList<Product> mProductArrayList) {
            this.mOriginalValues = mProductArrayList;
            this.mDisplayedValues = mProductArrayList;
            inflater = LayoutInflater.from(context);
        }

        @Override
        public int getCount() {
            return mDisplayedValues.size();
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        private class ViewHolder {
            LinearLayout llContainer;
            TextView tvName,tvPrice;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {

            ViewHolder holder = null;

            if (convertView == null) {

                holder = new ViewHolder();
                convertView = inflater.inflate(R.layout.row, null);
                holder.llContainer = (LinearLayout)convertView.findViewById(R.id.llContainer);
                holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
                holder.tvPrice = (TextView) convertView.findViewById(R.id.tvPrice);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.tvName.setText(mDisplayedValues.get(position).name);
            holder.tvPrice.setText(mDisplayedValues.get(position).price+"");

            holder.llContainer.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    Toast.makeText(MainActivity.this, mDisplayedValues.get(position).name, Toast.LENGTH_SHORT).show();
                }
            });

            return convertView;
        }

        @Override
        public Filter getFilter() {
            Filter filter = new Filter() {

                @SuppressWarnings("unchecked")
                @Override
                protected void publishResults(CharSequence constraint,FilterResults results) {

                    mDisplayedValues = (ArrayList<Product>) results.values; // has the filtered values
                    notifyDataSetChanged();  // notifies the data with new filtered values
                }

                @Override
                protected FilterResults performFiltering(CharSequence constraint) {
                    FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
                    ArrayList<Product> FilteredArrList = new ArrayList<Product>();

                    if (mOriginalValues == null) {
                        mOriginalValues = new ArrayList<Product>(mDisplayedValues); // saves the original data in mOriginalValues
                    }

                    /********
                     * 
                     *  If constraint(CharSequence that is received) is null returns the mOriginalValues(Original) values
                     *  else does the Filtering and returns FilteredArrList(Filtered)  
                     *
                     ********/
                    if (constraint == null || constraint.length() == 0) {

                        // set the Original result to return  
                        results.count = mOriginalValues.size();
                        results.values = mOriginalValues;
                    } else {
                        constraint = constraint.toString().toLowerCase();
                        for (int i = 0; i < mOriginalValues.size(); i++) {
                            String data = mOriginalValues.get(i).name;
                            if (data.toLowerCase().startsWith(constraint.toString())) {
                                FilteredArrList.add(new Product(mOriginalValues.get(i).name,mOriginalValues.get(i).price));
                            }
                        }
                        // set the Filtered result to return
                        results.count = FilteredArrList.size();
                        results.values = FilteredArrList;
                    }
                    return results;
                }
            };
            return filter;
        }
    }
} 
```

### activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText 
        android:id="@+id/etSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
    <ListView 
        android:id="@+id/lvProducts"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ></ListView>    

</LinearLayout> 
```

### 行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView 
        android:id="@+id/tvName"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:layout_weight="1"
        />
    <TextView 
        android:id="@+id/tvPrice"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:layout_weight="1"
        />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-12-12T21:01:19.317

在您的 customadapter 类中实现可过滤。 [![列表显示](../Images/1e4005b5fdc42ff5e83189a3f501153b.png)](https://i.stack.imgur.com/DJmP6.png) [![在此处输入图像描述](../Images/7f7a95f2a5c90d4625ff5c1a4030acc3.png)](https://i.stack.imgur.com/OGJn9.png)

```
public class MainActivity extends AppCompatActivity {

String names[] = {"Apple","Banana","Kiwi","Oranges","Watermelon"};
String emails[] = {"This is apple","This is banana","This is kiwi","This is oranges","This is watermelon"};
int images[] = {R.drawable.apple,R.drawable.banana,R.drawable.kiwi,R.drawable.oranges,R.drawable.watermelon};

List<ItemsModel> itemsModelList = new ArrayList<>();

ListView listView;

CustomAdapter customAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listView = findViewById(R.id.listview);

    for(int i = 0;i < names.length;i++){

        ItemsModel itemsModel = new ItemsModel(names[i],emails[i],images[i]);

        itemsModelList.add(itemsModel);

    }

     customAdapter = new CustomAdapter(itemsModelList,this);

    listView.setAdapter(customAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.search_menu,menu);

    MenuItem menuItem = menu.findItem(R.id.searchView);

    SearchView searchView = (SearchView) menuItem.getActionView();

    searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
        @Override
        public boolean onQueryTextSubmit(String query) {
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText) {

            Log.e("Main"," data search"+newText);

            customAdapter.getFilter().filter(newText);

            return true;
        }
    });

    return true;

}

@Override
public boolean onOptionsItemSelected(@NonNull MenuItem item) {

    int id = item.getItemId();

    if(id == R.id.searchView){

        return true;
    }
    return super.onOptionsItemSelected(item);
}

public class CustomAdapter extends BaseAdapter implements Filterable {

    private List<ItemsModel> itemsModelsl;
    private List<ItemsModel> itemsModelListFiltered;
    private Context context;

    public CustomAdapter(List<ItemsModel> itemsModelsl, Context context) {
        this.itemsModelsl = itemsModelsl;
        this.itemsModelListFiltered = itemsModelsl;
        this.context = context;
    }

    @Override
    public int getCount() {
        return itemsModelListFiltered.size();
    }

    @Override
    public Object getItem(int position) {
        return itemsModelListFiltered.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = getLayoutInflater().inflate(R.layout.row_items,null);

        TextView names = view.findViewById(R.id.name);
        TextView emails = view.findViewById(R.id.email);
        ImageView imageView = view.findViewById(R.id.images);

        names.setText(itemsModelListFiltered.get(position).getName());
        emails.setText(itemsModelListFiltered.get(position).getEmail());
        imageView.setImageResource(itemsModelListFiltered.get(position).getImages());

        view.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.e("main activity","item clicked");
                startActivity(new Intent(MainActivity.this,ItemsPreviewActivity.class).putExtra("items",itemsModelListFiltered.get(position)));

            }
        });

        return view;
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults filterResults = new FilterResults();
                if(constraint == null || constraint.length() == 0){
                    filterResults.count = itemsModelsl.size();
                    filterResults.values = itemsModelsl;

                }else{
                    List<ItemsModel> resultsModel = new ArrayList<>();
                    String searchStr = constraint.toString().toLowerCase();

                    for(ItemsModel itemsModel:itemsModelsl){
                        if(itemsModel.getName().contains(searchStr) || itemsModel.getEmail().contains(searchStr)){
                            resultsModel.add(itemsModel);

                        }
                         filterResults.count = resultsModel.size();
                            filterResults.values = resultsModel;
                    }

                }

                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                itemsModelListFiltered = (List<ItemsModel>) results.values;
                notifyDataSetChanged();

            }
        };
        return filter;
    }
} 
```

}

完整的教程可以在这里找到： [listview with search and onItemClickListner](https://youtu.be/8QDTiOUOfKQ?sub_confirmation=1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T07:30:15.633

您可以为您的搜索框设置一个 TextWatcher 并更改您在 TextWatcher 上 onTextChanged() 上的光标，如下面的代码：

```
TextWatcher filterNameTextWatcher = new TextWatcher()
 public void beforeTextChanged(CharSequence s, int start, int count,int after)
        {
        }

        public void onTextChanged(CharSequence s,int start, int before,int count) 
        {
            Cursor FilteredNameList = ZoneCardDBAdapter.instance.CursorFilteredName(s.toString());
            Listadapter.changeCursor(FilteredNameList);

        }

        @Override
        public void afterTextChanged(Editable arg0) 
        {   
        }
    };

EditText filterTextName = (EditText)this.findViewById(R.id.edtZoneCardNameFilter);
filterTextCPName.addTextChangedListener(filterNameTextWatcher); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T07:31:42.850

为此，您首先需要添加一个edittext，您将在其中键入以过滤列表中的数据，

然后在列表中启用过滤，

```
editText = (EditText) findViewById(R.id.searchList);
 adapter = new CustomListViewAdapter(this,
                R.layout.list_row, rowItems);
        listView.setAdapter(adapter);
        listView.setTextFilterEnabled(true); 
```

然后你需要`TextChangeListener()`为edittext添加，

```
editText.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

            }

            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {

            }

            public void afterTextChanged(Editable arg0) {
                MyActivityName.this.adapter.getFilter().filter(arg0);

            }
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T07:31:27.813

使用下面这种方法。

```
your edit text box.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void afterTextChanged(Editable theWatchedText) {

            }
        });

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-17T07:00:12.593

**SearchWithMenuActivity.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SearchWithMenuActivity">

    <androidx.recyclerview.widget.RecyclerView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:listitem="@layout/expand_layout"
        android:id="@+id/recycler_view"
        app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
        android:orientation="vertical"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout> 
```

**search_menu.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">
    <item
        android:id="@+id/app_bar_search"
        android:icon="@drawable/ic_search_black_24dp"
        android:title="@string/search"
        app:showAsAction="ifRoom|withText"
        app:actionViewClass="androidx.appcompat.widget.SearchView"/>
</menu> 
```

**expand_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="4dp"
    android:background="?attr/selectableItemBackground"
    android:elevation="6dp">

    <androidx.cardview.widget.CardView
        android:id="@+id/cardview"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentEnd="true"
        app:cardCornerRadius="5dp"
        app:cardUseCompatPadding="true"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent">

        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <LinearLayout
                android:id="@+id/layout_click"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent">

                <TextView
                    android:id="@+id/srNo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="8dp"
                    android:text="@string/srNo"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/part_name"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:padding="8dp"
                    android:text="@string/enter_the_name"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <ImageView
                    android:id="@+id/arrow"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:contentDescription="@string/todo"
                    android:padding="8dp"
                    android:src="@drawable/arrow_down_24" />
            </LinearLayout>

        </androidx.constraintlayout.widget.ConstraintLayout>
    </androidx.cardview.widget.CardView>

</androidx.constraintlayout.widget.ConstraintLayout> 
```

**展开模型.kt**

```
package com.materialsouk.allcodeapp.models

class ExpandModel(private var name:String,private var expanded:Boolean = false) {

    fun setName(name: String) {
        this.name = name
    }
    fun getName():String{
        return name
    }

    fun setExpanded(expanded: Boolean) {
        this.expanded = expanded
    }
    fun getExpanded():Boolean{
        return expanded
    }
} 
```

**扩展适配器.kt**

```
package com.materialsouk.allcodeapp.adapters

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.recyclerview.widget.RecyclerView
import com.materialsouk.allcodeapp.R
import java.util.ArrayList
import android.view.animation.Animation.RELATIVE_TO_SELF

import android.view.animation.RotateAnimation
import android.widget.ImageView
import android.widget.TextView
import androidx.constraintlayout.widget.ConstraintLayout
import com.materialsouk.allcodeapp.models.ExpandModel

class ExpandAdapter(private var expandList: ArrayList<ExpandModel>) :
    RecyclerView.Adapter<ExpandAdapter.ViewHolder>() {

    class ViewHolder(ItemView: View) : RecyclerView.ViewHolder(ItemView) {
        val srNo: TextView = itemView.findViewById(R.id.srNo)
        val nameTxt: TextView = itemView.findViewById(R.id.part_name)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view: View =
            LayoutInflater.from(parent.context).inflate(R.layout.expand_layout, parent, false)
        return ViewHolder(view)
    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        holder.srNo.text = (position + 1).toString()
        holder.nameTxt.text = expandList[position].getName()

    }

    override fun getItemCount(): Int {
        return expandList.size
    }
} 
```

**SearchWithMenuActivity.kt**

```
package com.materialsouk.allcodeapp

import android.annotation.SuppressLint
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.view.Menu

import androidx.appcompat.widget.SearchView
import androidx.recyclerview.widget.RecyclerView
import com.materialsouk.allcodeapp.adapters.ExpandAdapter
import com.materialsouk.allcodeapp.models.ExpandModel
import java.util.*
import kotlin.collections.ArrayList

class SearchWithMenuActivity : AppCompatActivity() {
    private lateinit var arrayList: ArrayList<ExpandModel>
    private lateinit var adapter: ExpandAdapter
    private lateinit var recyclerView: RecyclerView
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_search_with_menu)

        recyclerView = findViewById(R.id.recycler_view)
        arrayList = ArrayList()
        arrayList.add(ExpandModel("Meet", false))
        arrayList.add(ExpandModel("Ankit", false))
        arrayList.add(ExpandModel("Rushil", false))
        arrayList.add(ExpandModel("Abhishek", false))
        arrayList.add(ExpandModel("Modi", false))
        arrayList.add(ExpandModel("Ghree", false))
        arrayList.add(ExpandModel("Kirtan", false))
        arrayList.add(ExpandModel("Ankita", false))
        arrayList.add(ExpandModel("Soham", false))
        arrayList.add(ExpandModel("Ganesh", false))
        arrayList.add(ExpandModel("Dixit", false))
        arrayList.add(ExpandModel("Ankash", false))
        arrayList.add(ExpandModel("Parth", false))
        arrayList.add(ExpandModel("Pranav", false))
        arrayList.add(ExpandModel("Ankit Sir", false))
        arrayList.add(ExpandModel("Priya Mem", false))
        arrayList.add(ExpandModel("Jinal Mem", false))
        arrayList.add(ExpandModel("Bhumi", false))
        arrayList.add(ExpandModel("Nidhi", false))
        arrayList.add(ExpandModel("Hardik", false))
        arrayList.add(ExpandModel("Mayank", false))
        arrayList.add(ExpandModel("Kaushik", false))
        arrayList.add(ExpandModel("Rinku", false))
        arrayList.add(ExpandModel("Mom", false))
        adapter = ExpandAdapter(arrayList)

        recyclerView.adapter = adapter
    }

    override fun onCreateOptionsMenu(menu: Menu): Boolean {
        menuInflater.inflate(R.menu.search_menu, menu)
        val search = menu.findItem(R.id.app_bar_search)

        val searchView = search.actionView as SearchView
        searchView.maxWidth = android.R.attr.width
        searchView.queryHint = "Search"
        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String?): Boolean {
                return false
            }

            @SuppressLint("NotifyDataSetChanged")
            override fun onQueryTextChange(newText: String?): Boolean {
                val freeServiceModelArrayList: ArrayList<ExpandModel> = ArrayList()

                for (i in arrayList) {
                    if (i.getName().lowercase(Locale.getDefault()).contains(
                            newText!!.lowercase(
                                Locale.getDefault()
                            )
                        )
                    ) {
                        freeServiceModelArrayList.add(i)
                    }
                }
                adapter = ExpandAdapter(freeServiceModelArrayList)

                recyclerView.adapter = adapter
                adapter.notifyDataSetChanged()
                return true
            }
        })

        return super.onCreateOptionsMenu(menu)
    }
} 
```

# php - 用于 mm/ddd/yyy hh:mm 的 preg_match

> ID：14118313
> 
> 赞同：0
> 
> 时间：2013-01-02T07:24:28.707
> 
> 标签：php, date, csv, time, preg-match

我正在尝试从我的 csv 文件中的列中分离出两个值，即日期和时间

这是值的示例：

```
12/01/2012 2:31
12/02/2012 3:31
12/03/2012 9:31
12/04/2012 11:31
12/05/2012 10:31 
```

我正在尝试将它们分开，以便可以将它们存储在我们数据库的不同表中，但我不知道如何使用 preg_match 将它们分开。

这就是我想要完成的：

```
$col5 = '12/04/2012 11:31';

preg_match( '/^({2}\/\{2}\/\{4})\ \(\d+:\d+)$/', $col5,  $matches )
$date = $matches[1];
$time = $matches[2]; 
```

输出应该是：

```
$date = '12/04/2012';
$time = '11:31'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:31:55.550

为了避免过于复杂，为什么不只是[explode（）](http://php.net/manual/en/function.explode.php)字符串变量：

```
<?php
$date_time = '12/01/2012 2:31';
$exploded_date_time = explode(" ",$date_time);
$date = $exploded_date_time[0];
$time = $exploded_date_time[1];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:35:41.840

使用`explode`功能。

```
$dateTime = '16/04/2014 5:11';
$dateTimeList= explode(" ",$date_time);
$date = $dateTimeList[0];
$time = $dateTimeList[1]; 
```

# c# - 为什么非静态方法可以访问静态字段？

> ID：14118315
> 
> 赞同：1
> 
> 时间：2013-01-02T07:24:43.533
> 
> 标签：c#

我知道静态方法不能访问实例字段，让我困惑的是：为什么非静态方法可以访问静态字段 currentID？在下面的代码中，currentID 是静态字段，getNextID 是静态函数。令人惊讶的是，它通过编译没有错误。

```
 public class WorkItem
{
// Static field currentID stores the job ID of the last WorkItem that 
// has been created. 
private static int currentID;

//Properties. 
protected int ID { get; set; }
protected string Title { get; set; }
protected string Description { get; set; }
protected TimeSpan jobLength { get; set; }

public WorkItem()
{
    ID = 0;
    Title = "Default title";
    Description = "Default description.";
    jobLength = new TimeSpan();
}

// Instance constructor that has three parameters. 
public WorkItem(string title, string desc, TimeSpan joblen)
{
    this.ID = GetNextID();
    this.Title = title;
    this.Description = desc;
    this.jobLength = joblen;
}

// Static constructor to initialize the static member, currentID. This 
// constructor is called one time, automatically, before any instance 
// of WorkItem or ChangeRequest is created, or currentID is referenced. 
static WorkItem()
{
    currentID = 0;
}

protected int GetNextID()
{
    // currentID is a static field. It is incremented each time a new 
    // instance of WorkItem is created. 
    return ++currentID;
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:26:12.677

静态字段通常用于编译时常量，因此轻松访问它们是有意义的。因此，它们可以从其封闭类型的实例中访问。

此外，由于显而易见的原因，静态成员不能引用实例成员（它不与实例关联，而仅与类型关联）。但反之亦然，因为实例通常知道自己的类型，因此也可以查找静态成员。

# java - 在编码之前/之后获取/应用大写掩码？

> ID：14118316
> 
> 赞同：1
> 
> 时间：2013-01-02T07:24:56.717
> 
> 标签：java, string, encoding, compression, character

我的项目采用字符串`s`并将全小写版本`s.toLowerCase()`传递给无损编码器。我可以很好地转换编码/解码小写字符串，但这显然不实用，所以我需要能够以某种方式保留原始字符串的大写。

我正在考虑使用`Character.isUpperCase()`来获取`UpperCaseLetters[]`表示所有大写字母在`s`. 然后，我将使用此数组将 a 放置在编码字符串`^`的所有位置。`UpperCaseLettes[i] + 1`解码字符串时，我会知道 a 前面的每个字符`^`都是大写字母。（顺便说一句，对于这个编码器`^`在编码时永远不会生成）。

不过，这种方法对我来说似乎很草率。我也在考虑使用位字符串来表示大小写，但应用程序的总体目标是压缩，因此效率不高。

有没有更简单的方法来获取和应用字符串的大写掩码？如果有，它需要多少“存储”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:15:35.053

您的选择：

**自动大写：**

使用大写的通用算法，使用以下技术之一仅记录生成的大写和实际大写之间不同的字母。要重新生成，只需再次运行算法并翻转所有记录字母的大写。假设应该有大写字母（例如句子的开头），这将稍微减慢算法速度（仅以 n 的一个小常数因子，并且体面的压缩通常比这慢得多）并且总是减少存储量少数人需要的空间。

**资金头寸位图**：

你已经介绍过这个，不是特别有效。

**带有识别字符的大写前缀：**

也已经涵盖，除了您描述了后缀，但前缀通常更好，并且，对于更通用的解决方案，您还可以转义`^`with `^^`。不是一个坏主意。根据压缩情况，改用数据集中已经出现的字母可能是个好主意。最常见或最不常见的字母，或者您可能必须查看压缩算法并进行大量处理以确定要使用的理想字母。

**以任何格式存储与开始的资本距离：**

与下一个首都的距离没有优势（下）。

**到下一个大写字母的距离 - 非位串表示：**

通常比使用位串效率低。

**位串 = 到下一个大写字母的距离：**

您有一系列长度，每个长度依次表示大写字母之间的距离。因此，如果我们有距离`0,3,1,0,5`，大写如下：（`AbcdEfGHijklmNo`第一个跳过 0 个字符，第二个跳过 3 个字符，第三个跳过 1 个字符，等等）。有一些选项可用于存储它：

*   *固定长度：*不是一个好主意，因为它需要 = 可能的最长距离。一个明显的替代方法是将某种溢出到下一个长度，但这仍然使用太多空间。

*   *固定长度，不同的设置：*最好用一个例子来解释——前4位表示长度，`00`表示后面有2位表示距离，`01`表示4位，`10`表示8位，`11`表示16位，如果有超过 16 位的机会，您可能想要执行类似的操作 -`110`表示 16 位、`1110`表示 32 位、`11110`表示 64 位等（这听起来可能类似于确定 IPv4 地址的类别）。所以`0001010100`会分裂成`00`- `01`, `01`-`0100`，因此距离为 1、4。请注意，长度不必以 2 的幂为单位递增。16 位 = 65535 个字符很多，2 位 = 3 很少，您可以将其设为 4、6、 8, (16?), (32?), ??? （除非连续有几个大写字母，那么您可能也需要 2 位）。

*   *使用转义序列变长：*假设转义序列是`00`，我们要使用所有不包含 的字符串`00`，所以位值表如下所示：

    ```
    Bits Value
    1    1
    10   2
    11   3
    101  4 // skipped 100
    110  5
    111  6
    1010 7 // skipped 1000 and 1001 
    ```

    `10100101010010101000101000010`将分成`101`, `10101`, `101010`, `101`, 0, `10`. 请注意，这`...1001..`只是导致在左侧 1 处结束的拆分和从右侧 1 开始的拆分，并`...10001...`导致在第一个 0 处结束的拆分和从右侧 1 开始的拆分，并`...100001...`表示两者之间的 0 值距离。伪代码类似于：

    ```
    if (current value == 1 && zeroCount < 2)
      add to current split
      zeroCount = 0
    else if (current value == 1) // after 00...
      if (zeroCount % 2 == 1) { add zero to current split; zeroCount--; }
      record current split, clear current split
      while (zeroCount > 2) { record 0-distance split; zeroCount -= 2; }
    else zeroCount++ 
    ```

    对于短距离来说，这看起来是一个很好的解决方案，但是一旦距离变大，我怀疑您开始跳过太多值并且长度会迅速增加。

没有理想的解决方案，它在很大程度上取决于数据，您必须使用前缀大写字母和位串距离的不同选项来查看哪个最适合您的典型数据集。

# php - 无法在主机服务器中创建目录

> ID：14118319
> 
> 赞同：0
> 
> 时间：2013-01-02T07:25:22.737
> 
> 标签：php, host, mkdir

我正在尝试在服务器中创建一个文件夹。我写了以下代码

```
function CreateErrorLog($IntegrationId, $errorStr){

    if (!is_dir(PUBLIC_PATH.'/errors/'.$IntegrationId)) {

        echo 'not present<br/><br/>';
        try{
                mkdir(PUBLIC_PATH.'/errors/'.$IntegrationId, 0777);
        }catch(Exception $e){
            echo '<br/><br/> exception----'.$e.'<br/><br/>';
            print_r($e);
        }

    }else{
        echo 'present<br/><br/>';

    }
} 
```

我得到输出“不存在”，但我看不到在“错误”文件夹下以 $IntegrationId 的名称创建的目录。这在本地主机中工作。移动到远程服务器后，我遇到了问题。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:32:20.793

首先检查您的路径权限是否可写。如果这很好，您必须提及绝对路径而不是 PUBLIC_PATH。您可以使用函数'echo getcwd()'获取绝对路径创建一个 php 文件。这将向您显示绝对路径。改为选择PUBLIC_PATH 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:28:07.403

问题可能是`errors`文件夹可能在服务器中没有`write`权限

如果没有权限，它不会通过任何异常。

将 mkdir 置于 if() 条件中。所以你会从返回值来理解。

并放在`ini_set('display_errors', 1);`您的代码之上。

# ios - 如何使用@2x 文件制作可调整大小的图像？

> ID：14118320
> 
> 赞同：2
> 
> 时间：2013-01-02T07:25:23.360
> 
> 标签：ios, resizable

我的代码：

```
self.commentTextViewBorder.image = [[UIImage imageNamed:@"border_comment_field"]
resizableImageWithCapInsets:UIEdgeInsetsMake(11, 11, 11, 11)]; 
```

我发现它没有使用 @2x 图像文件来使 resiable。有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:45:42.900

将您的`image_name.png`&`image_name@2x.png`放在您的主捆绑文件夹中，然后使用

```
[UIImage imageNamed:@"image_name.png"]; 
```

很好。将根据带或不带视网膜显示器的设备自动使用正确的。

# c++ - 为什么无法移除 {}？以及为什么 char 类型的变量不能被转移？

> ID：14118323
> 
> 赞同：0
> 
> 时间：2013-01-02T07:25:41.873
> 
> 标签：c++, templates

```
#ifndef ClassTemplate_HH
#define ClassTemplate_HH

using std::cout;
using std::endl;

template<typename T1,typename T2>
class myClass{
private:
     T1 I;
     T2 J;
public:
     myClass(T1 a, T2 b);//Constructor
     void show();
};

//这是构造函数
//注意这些格式
template <typename T1,typename T2>
myClass<T1,T2>::myClass(T1 a,T2 b):I(a),J(b){}

//这是void show();
template <typename T1,typename T2>
void myClass<T1,T2>::show()
{
     cout<<"I="<<I<<", J="<<J<<endl;
}

#endif 
```

在上面的头文件中，`{}`无法删除，为什么？它的目的是什么？

```
myClass<T1,T2>::myClass(T1 a,T2 b):I(a),J(b){} 
```

下面是源文件：

```
#include <iostream>
#include "ClassTemplate.h"

using std::cout;
using std::endl;

int main()
{
     myClass<int,int> class1(3,5);
     class1.show();

     myClass<int,char> class2(3,"a");
     class2.show();

     myClass<double,int> class3(2.9,10);
     class3.show();
} 
```

错误编译结果如下：

```
$ g++ ClassTemplate_Test.cpp 
ClassTemplate_Test.cpp: In function ‘int main()’:
ClassTemplate_Test.cpp:12:36: error: invalid conversion from ‘const char*’ to ‘char’ [-fpermissive]
ClassTemplate.h:20:1: error:   initializing argument 2 of ‘myClass<T1, T2>::myClass(T1, T2) [with T1 = int, T2 = char]’ [-fpermissive] 
```

如何解决？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T07:27:51.327

```
myClass<T1,T2>::myClass(T1 a,T2 b):I(a),J(b){} 
```

这`{}`是构造函数的整个函数体。它本质上是一个空构造函数，因为所有工作都在[初始化列表](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)中完成。

可以重写它以更好地了解大括号只是您运行的 mill 函数体。

```
myClass<T1,T2>::myClass(T1 a,T2 b)
   :I(a),J(b)
{

} 
```

至于您的**编译错误**，从 "" 到 '' 的简单修复会解决它，

改变

```
myClass<int,char> class2(3,"a"); 
```

至

```
myClass<int,char> class2(3,'a'); 
```

这是因为`"a"`被视为类型为 的[字符串文字](http://msdn.microsoft.com/en-us/library/69ze775t%28v=vs.80%29.aspx)`const char *`。`'a'`另一方面，被视为`char`您和您的构造函数所期望的 a 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T07:27:58.760

```
myClass<T1,T2>::myClass(T1 a,T2 b):I(a),J(b){} 
```

这定义了一个函数。函数有一个主体。函数体被定义为大括号之间的东西（即：{}）。所以即使函数是空的，你也必须用一对大括号来定义它。

# php - 从 codeigniter 发送电子邮件

> ID：14118337
> 
> 赞同：1
> 
> 时间：2013-01-02T07:26:44.507
> 
> 标签：php, codeigniter

我尝试使用 codeigniter 发送电子邮件并执行 print_debugger ..

这是我的控制器

```
$this->load->library('email');   
     $this->email->from('blablabla@gmail.com', 'Blabla');
     $this->email->to('xxx@gmail.com');    
     $this->email->subject('This is an email test');      
     $this->email->message('It is working. Great!');
    $this->email->send();
     echo $this->email->print_debugger(); 
```

**和结果..**

```
220 mx.google.com ESMTP s7sm28822467paz.7

hello: 250-mx.google.com at your service, [125.165.91.123]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES

from: 250 2.1.0 OK s7sm28822467paz.7

to: 250 2.1.5 OK s7sm28822467paz.7

data: 354  Go ahead s7sm28822467paz.7

250 2.0.0 OK 1357110923 s7sm28822467paz.7

quit: 221 2.0.0 closing connection s7sm28822467paz.7

Your message has been successfully sent using the following protocol: smtp

User-Agent: CodeIgniter
Date: Wed, 2 Jan 2013 08:15:21 +0100
From: "Blabla" 
Return-Path: 
To: xxx@gmail.com
Subject: =?utf-8?Q?This_is_an_email_test?=
Reply-To: "blablabla@gmail.com" 
X-Sender: pendaftaransiswabaruminor@gmail.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <50e3de8936e41@gmail.com>
Mime-Version: 1.0

Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

It is working. Great! 
```

它告诉它成功“您的消息已使用以下协议成功发送：smtp”但是为什么我的电子邮件没有发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:20:37.980

这是我用来在 codeigniter 中发送带有 gmail 地址的电子邮件的配置：

```
$ci = get_instance();
$ci->load->library('email');
$config['protocol'] = "smtp";
$config['smtp_host'] = "ssl://smtp.gmail.com";
$config['smtp_port'] = "465";
$config['smtp_user'] = "blablabla@gmail.com"; 
$config['smtp_pass'] = "yourpassword";
$config['charset'] = "utf-8";
$config['mailtype'] = "html";
$config['newline'] = "\r\n";

$ci->email->initialize($config);

$ci->email->from('blablabla@gmail.com', 'Blabla');
$list = array('xxx@gmail.com');
$ci->email->to($list);
$ci->email->subject('This is an email test');
$ci->email->message('It is working. Great!');
$ci->email->send(); 
```

# robots.txt - 如何阻止 WordPress 显示虚拟 Robots.txt？

> ID：14118339
> 
> 赞同：1
> 
> 时间：2013-01-02T07:27:07.127
> 
> 标签：robots.txt

问题是，我可以在这里看到 robots.txt 文件：

[http://persian.cc](http://persian.cc)

（请在域名后加 /robots.txt）

但谷歌不能！

我知道我可以在网站的根目录中找到 robots.txt 文件，但是我的里面没有 robots.txt 文件，而且这个 robots.txt 是由 WordPress 制作的虚拟文件。现在如何阻止 wordpress 这样做？！

或者，如果我无法阻止 wordpress 显示该虚拟 robots.txt 文件，我该如何阻止谷歌在我的网站上查找它？也许是 .htaccess 代码之类的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:27:35.383

不知道这是否有帮助。但我答应为 WordPres / Joomla / PHPBB 维护一篇关于 robots.txt 的文章。它仍处于工作状态。这里是：

[http://mast3rpee.tk/?p=127](http://mast3rpee.tk/?p=127)

基本上我正在做的是设置默认的robot.txt，并使用.haccess 文件修改apache 以强制加载自定义robots.php。为什么？好吧，这解决了大多数问题，而不仅仅是这里的问题。它也适用于可以创建各种问题的免费托管（一些禁止 txt 文件！一些覆盖 robots.txt 等）。

这是代码

## .htaccess

```
# BEGIN Robots
<IfModule mod_rewrite.c>
<FilesMatch "^robots.(txt|php)$">
Header Set Last-Modified "Tue, 01 Jan 2013 12:00:00 GMT"
</FilesMatch>
RewriteEngine On
RewriteBase /
RewriteRule ^(robots)\.txt$ /$1.php [L]
</IfModule>
# END Robots 
```

## 机器人.txt

```
User-agent: *
Disallow: /cgi-bin/
Disallow: /feed/
Disallow: /wp-admin/
Disallow: /wp-content/plugins/
Sitemap: http://{PUT YOUR DOMAIN}/sitemap.xml
Crawl-delay: 4 
```

## 机器人.php

```
<?php
$start = "2013/01/01";  // Date you started your blog YYYY/MM/DD
$average = 30;      // Number of posts you make per month
$sitemap = "http://{PUT YOUR DOMAIN}/sitemap.xml";
// Is blog old enough
$old = ($average/30)*(time()-strtotime($start)) > 3600*24*360? true : false;
// Output proper headers
header ('Content-Type: text/plain');
header ('Cache-Control: private, pre-check=0, post-check=0, max-age=36000');
header ('Expires: ' . gmstrftime('%a, %d %b %Y %H:%M:%S GMT', time() + 36000));
header ('Last-Modified: ' . gmstrftime('%a, %d %b %Y %H:%M:%S GMT', time() - 36000));

if ($old) { $custom = date("Y/m");
echo <<< ROBOTS
User-agent: *
Disallow: /cgi-bin/
Disallow: /feed/
Disallow: /wp-admin/
Disallow: /wp-content/plugins/
Disallow: /$custom
Sitemap: $sitemap
Crawl-delay: 4
ROBOTS;
} else { $custom = date("Y");
echo <<< ROBOTS
User-agent: *
Disallow: /cgi-bin/
Disallow: /feed/
Disallow: /wp-admin/
Disallow: /wp-content/plugins/
Disallow: /archives/
Disallow: /tag/
Disallow: /$custom
Sitemap: $sitemap
Crawl-delay: 4
ROBOTS;
}
exit; ?> 
```

# web-services - 无法初始化类 com.sun.xml.internal.ws.api.BindingID

> ID：14118341
> 
> 赞同：4
> 
> 时间：2013-01-02T07:27:13.473
> 
> 标签：web-services, jax-ws

使用 jax-ws 创建 Web 服务客户端项目它给了我以下错误 Create project using Netbeans 7.2,JSK 1.6,Apache Tomcat 7

什么是错误..缺少一些 jar 文件

```
java.lang.NoClassDefFoundError: Could not initialize class com.sun.xml.internal.ws.api.BindingID

at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parseBinding(RuntimeWSDLParser.java:445)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:342)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:157)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:120)
at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:260)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:223)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:171)
at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:96)
at javax.xml.ws.Service.<init>(Service.java:77)
at org.example.centralizewebservices.schema.CentralizeWebService.<init>(CentralizeWebService.java:42)
at services.servicesImpl.HomeServicesImpl.<init>(HomeServicesImpl.java:46)
at dwr.DwrCommand.getEventListForCalenderByDate(DwrCommand.java:61)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:229)
at org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:241)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:379)
at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:332)
at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:104)
at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120)
at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

# uitableview - UITableview 动态列数

> ID：14118345
> 
> 赞同：1
> 
> 时间：2013-01-02T07:27:43.550
> 
> 标签：uitableview, custom-cell, multiple-columns

我正在开发一个 iPad 应用程序，其中一部分是具有多列的 tableview。我已经在使用自定义单元格来显示多列（每列都有一个标签），但我现在的问题是应用程序将获得 Web 服务响应，根据该响应列数会有所不同。有什么方法可以动态更改自定义单元格组件，即基于响应添加或删除自定义单元格中的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:52:16.777

也许这些代码行会帮助你

```
int x = 5;
for(NSString *yourString in yourArrayOfStrings)
{
    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(x, 5, 75,50)];
    CGSize maximumSize = CGSizeMake(titleLabel.frame.size.width, 999);
    CGSize myStringSize = [yourString sizeWithFont:titleLabel.font 
                                        constrainedToSize:maximumSize 
                                            lineBreakMode:UILineBreakModeWordWrap];
    titleLabel.numberOfLines = 0;    // for multiple lines 
    CGRect lblFrame = titleLabel.frame;
    lblFrame.size.height = myStringSize.height;
    x = myStringSize.width + 10;
} 
```

# c# - 用于搜索属性的 XPath 变量

> ID：14118351
> 
> 赞同：1
> 
> 时间：2013-01-02T07:28:21.820
> 
> 标签：c#, xml, xpath

我正在编写要求我解析 xml 文件的 ac# 代码。我需要的声明是

```
 XmlDocument xmlt = new XmlDocument();
  xmlt.Load(XMLFile1.xml");
  XmlNode node = xmlt.SelectSingleNode("//abc/data[@name='xyz']/value"); 
```

其中 abc 是根节点。我正在搜索数据属性@name 以匹配xyz，如果我需要一个变量而不是硬编码xyz，我应该怎么做，比如name_var。我基本上需要一个执行该功能的代码，以便我可以使用@name=name_var 而不是 xyz。

name_var 在 c# 代码中有所不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:40:42.450

据我所知，`SelectNodes`and`SelectSingleNode`方法不提供重载来提供一些变量解析，所以你所能做的就是构造一个字符串，例如

```
string name = "xyx";
XmlNode node = xmlt.SelectSingleNode(string.Format("abc/data[@name = '{0}']/value", name)); 
```

当然，一旦`name`值包含单引号`'`字符，该方法就会中断。如果您需要 XPath 中的可变分辨率，请查看 XPathNavigator，它可以通过一些努力来实现：http: [//msdn.microsoft.com/en-us/library/vstudio/dd567715%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd567715%28v=vs.100%29.aspx)。

# python - 如何将 unicode 重音字符转换为没有重音的纯 ascii？

> ID：14118352
> 
> 赞同：12
> 
> 时间：2013-01-02T07:28:42.583
> 
> 标签：python, unicode, wget, unicode-normalization

我正在尝试从[http://dictionary.reference.com/browse/apple?s=t等字典网站下载一些内容](http://dictionary.reference.com/browse/apple?s=t)

我遇到的问题是原始段落有所有那些波浪线和反向字母等等，所以当我阅读本地文件时，我最终会得到那些有趣的转义字符，如 \x85、\xa7、\x8d 等.

我的问题是，有什么办法可以将所有这些转义字符转换为它们各自的 UTF-8 字符，例如，如果有一个 'à' 我如何将它转换成一个标准的 'a' ？

Python调用代码：

```
import os
word = 'apple'
os.system(r'wget.lnk --directory-prefix=G:/projects/words/dictionary/urls/ --output-document=G:\projects\words\dictionary\urls/' + word + '-dict.html http://dictionary.reference.com/browse/' + word) 
```

我在 Windows 7 系统上使用 wget-1.11.4-1（不要杀死我的 Linux 人，这是客户端要求），并且 wget exe 正在使用 Python 2.6 脚本文件启动。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-02T12:00:43.797

> 我如何将所有这些转义字符转换为它们各自的字符，例如如果有 unicode **à**，我如何将其转换为标准**a**？

假设您已将 unicode 加载到一个名为`my_unicode`... 将 à 标准化为 a 的变量中，这很简单...

```
import unicodedata
output = unicodedata.normalize('NFD', my_unicode).encode('ascii', 'ignore') 
```

明确的例子...

```
>>> myfoo = u'àà'
>>> myfoo
u'\xe0\xe0'
>>> unicodedata.normalize('NFD', myfoo).encode('ascii', 'ignore')
'aa'
>>> 
```

**它的工作原理是**
`unicodedata.normalize('NFD', "insert-unicode-text-here")`执行 unicode 文本的[规范分解 (NFD)](http://unicode.org/reports/tr15/)；然后我们使用`str.encode('ascii', 'ignore')`将 NFD 映射的字符转换为 ascii（忽略错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-14T22:52:05.873

@Mike Pennington 的解决方案非常感谢他。但是当我尝试该解决方案时，我注意到它未能在 NFD 中定义一些特殊字符（即土耳其字母表中的 ı 字符）。

我发现了另一种解决方案，您可以使用 unidecode 库进行此转换。

```
>>>import unidecode
>>>example = "ABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZabcçdefgğhıijklmnoöprsştuüvyz"

#convert it to utf-8
>>>utf8text = unicode(example, "utf-8")

>>> print utf8text
ABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZabcçdefgğhıijklmnoöprsştuüvyz

#convert utf-8 to ascii text
asciitext = unidecode.unidecode(utf8text)

>>>print asciitext

ABCCDEFGGHIIJKLMNOOPRSSTUUVYZabccdefgghiijklmnooprsstuuvyz 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-09T14:01:33.717

我需要这样的东西，但**只删除重音字符**，忽略特殊字符，我做了这个小功能：

```
# ~*~ coding: utf-8 ~*~
import re

def remove_accents(string):
    if type(string) is not unicode:
        string = unicode(string, encoding='utf-8')

    string = re.sub(u"[àáâãäå]", 'a', string)
    string = re.sub(u"[èéêë]", 'e', string)
    string = re.sub(u"[ìíîï]", 'i', string)
    string = re.sub(u"[òóôõö]", 'o', string)
    string = re.sub(u"[ùúûü]", 'u', string)
    string = re.sub(u"[ýÿ]", 'y', string)

    return string 
```

我喜欢这个功能，因为您可以自定义它以防您需要忽略其他字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:45:32.357

给定的 URL 返回 UTF-8，因为 HTTP 响应清楚地表明：

```
wget -S http://dictionary.reference.com/browse/apple?s=t
--2013-01-02 08:43:40--  http://dictionary.reference.com/browse/apple?s=t
Resolving dictionary.reference.com (dictionary.reference.com)... 23.14.94.26, 23.14.94.11
Connecting to dictionary.reference.com (dictionary.reference.com)|23.14.94.26|:80... connected.
HTTP request sent, awaiting response... 
  HTTP/1.1 200 OK
  Server: Apache
  Cache-Control: private
  Content-Type: text/html;charset=UTF-8
  Date: Wed, 02 Jan 2013 07:43:40 GMT
  Transfer-Encoding:  chunked
  Connection: keep-alive
  Connection: Transfer-Encoding
  Set-Cookie: sid=UOPlLC7t-zl20-k7; Domain=reference.com; Expires=Wed, 02-Jan-2013 08:13:40 GMT; Path=/
  Set-Cookie: cu.wz=0; Domain=.reference.com; Expires=Thu, 02-Jan-2014 07:43:40 GMT; Path=/
  Set-Cookie: recsrch=apple; Domain=reference.com; Expires=Tue, 02-Apr-2013 07:43:40 GMT; Path=/
  Set-Cookie: dcc=*~*~*~*~*~*~*~*~; Domain=reference.com; Expires=Thu, 02-Jan-2014 07:43:40 GMT; Path=/
  Set-Cookie: iv_dic=1-0; Domain=reference.com; Expires=Thu, 03-Jan-2013 07:43:40 GMT; Path=/
  Set-Cookie: accepting=1; Domain=.reference.com; Expires=Thu, 02-Jan-2014 07:43:40 GMT; Path=/
  Set-Cookie: bid=UOPlLC7t-zlrHXne; Domain=reference.com; Expires=Fri, 02-Jan-2015 07:43:40 GMT; Path=/
Length: unspecified [text/html] 
```

使用 vim 调查保存的文件还显示数据是正确的 utf-8 编码......使用 Python 获取 URL 也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-15T07:21:27.240

这个问题对我来说是不同的，但这个堆栈页面可以解决它`unicodedata.normalize('NFKC', 'Ｖ').encode('ascii', 'ignore')` 输出 -`b'V'`

# php - php中的数组问题

> ID：14118358
> 
> 赞同：1
> 
> 时间：2013-01-02T07:29:26.267
> 
> 标签：php, arrays

我的场景是：

用户想要检查目标 url 中是否存在特定（客户端）url，我创建了简单的脚本来测试一个目标 url 中的特定 url。

这是我的 php 脚本：

```
if(isset($_POST['check_url']))
{
    $client_url = $_POST['client_url'];
    $destination_url = $_POST['destination_url'];
    $contents = file_get_contents($destination_url);
    $search   = $client_url;

    if(strpos($contents,$search)== FALSE)
    {
        echo "Not Found";
    }
    else
    {
        echo "Found";
    }
} 
```

这是我的html脚本：

```
<form method="post" action="test.php">
<label>Client URL:</label>
<input type="text" value="" name="client_url" /><br />
<label>Destination URL:</label>
<textarea value="" name="destination_url" ></textarea><br />
<button type="submit" name="check_url">Check</button>
</form> 
```

上面的脚本在单个目标 url 的情况下工作，但是当我尝试发布多个目标 url（通过将其转换为数组）时，我得到了错误：

```
Warning: file_get_contents( http://learntk12.org/story.php?title=seo-link-building-service) [function.file-get-contents]: failed to open stream: No such file or directory in "path to source file" on line 24 
```

其中第 24 行是：`$contents[$i] = file_get_contents($arr[$i]);`

这是我的带数组的 php 代码：

```
if(isset($_POST['check_url']))
{
    $client_url = $_POST['client_url'];
    $destination_url = $_POST['destination_url'];
    $destination =str_replace("\r",",",$destination_url);
    $arr = explode(",",$destination);

    $search   = $client_url;

    for($i=0;$i<count($arr);$i++)
    {
        $contents[$i] = file_get_contents($arr[$i]);

        if (strpos($contents[$i], $search) === FALSE)
        {
            echo "Not Found";
        }
        else
        {
            echo "Found";
        }
    }

} 
```

我在这个脚本中落后于哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:38:12.293

试试这个：

```
if (isset($_POST['check_url']))
{
    $client_url = $_POST['client_url'];
    $destination_url = $_POST['destination_url'];
    $destinations = str_replace(array("\r\n", "\n"), ',', $destination_url); // replace both types of line breaks with a comma, \r alone will not suffice
    $destinations = explode(',', $destinations); // split at commas

    foreach ($destinations as $destination) // loop through each item in array
    {
        $contents = file_get_contents($destination); // get contents of URL

        echo (FALSE === strpos($contents, $client_url)) // check if remote data contains URL
            ? 'Not Found' // echo if TRUE of above expression
            : 'Found'; // echo if FALSE of above expression
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:37:57.940

据我所知，您没有数组 $contents. 它应该像这样工作：

```
$contents = file_get_contents($arr[$i]);
if (strpos($contents, $search) === FALSE) {
   echo "Not Found";
} else {
   echo "Found";
} 
```

# web-services - 嵌入式 Linux 设备上 C++ 应用程序的 Web 界面

> ID：14118363
> 
> 赞同：1
> 
> 时间：2013-01-02T07:30:06.063
> 
> 标签：web-services, embedded

我想在 Apache 托管的网页和我在小型 Linux 设备（如[Raspberry Pi](http://www.raspberrypi.org/)或[DD-Wrt](http://www.dd-wrt.com) ）上运行的自定义 C++ 应用程序之间实现通信链接。

[这里](http://www.instructables.com/id/Web-Control-of-Raspberry-Pi-GPIO/)有一个 Raspberry Pi 教程，它使用网页上的按钮来控制 GPIO 引脚上的 LED。该示例使用 MySQL 作为网页和脚本之间的通信接口，并且脚本具有对 GPIO 的读/写访问权限。尽管 MySQL 为 Apache 托管网页和 C++ 提供了成熟/无处不在的接口的优势，但它可能会更慢并且具有比必要的更大的闪存和 RAM 占用空间。

为了找到比 MySQL 更小/更快的通信链接，我有一个使用 Javascript 对 C++ 应用程序执行 XML-RPC 的示例。但是，[这篇 2012 年 2 月 24 日发布的帖子](http://www.webdeveloper.com/forum/showthread.php?257212-queation-about-XMLRPC-in-Javascript)暗示 xmlrpc 已过时，可以被更现代的东西（JSON、REST）取代，但帖子缺少有关这些方法的详细信息。

另一个考虑的选项是[Wt](http://www.webtoolkit.eu/wt)或其他嵌入式库，但它有一个学习曲线，Web 开发人员不太可能熟悉它。

我的问题是：在 Raspberry Pi 或其他嵌入式 Linux 设备等资源受限设备上为自定义 C++ 应用程序实现 Web 界面的良好架构是什么？

假设：

*   Apache 是首选，因为它适合内存并且 Web 开发人员熟悉它。
*   界面应该是“现代的”
*   页面是简单的纯文本，大约 10 页，90% 的数据字段是只读的，另外 10% 是可编辑的字段。
*   网络服务器位于不超过 3 个用户的专用网络上。使用安全/登录来强制执行用户数量。
*   从 SD 启动的嵌入式 ARM 平台
*   假定 CGI（为每个事务启动一个进程）比必要的慢。FastCGI 可能没问题。

发现没有回答我的问题的类似问题： -[嵌入式设备上 Web 界面的语言选择](https://stackoverflow.com/questions/6521926/language-choice-for-web-interface-on-embedded-device) -[为嵌入式系统设计 Web 界面](https://stackoverflow.com/questions/1984709/designing-web-interface-for-embedded-system)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T12:51:27.483

天啊。阿帕奇？你为什么要在嵌入式设备上使用这样一个过度杀伤的怪物？我建议使用较小的服务器，而不是使用 cgi，而是使用 rest api 处理程序。一个非常轻量级的设置是使用 uhttpd 和 ubus 插件，然后用 C 编写你的系统代码，并通过 ubus 上的 json api 公开它的功能。然后，您可以将 Web 界面与系统代码完全分离，并且可以通过仅提供静态 html 来最大程度地减少嵌入式服务器的压力，您可以使用 javascript 和 ajax 将其转换为动态应用程序。

没有解释器，没有 cgi，只有 ajax 和 ubus 后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:05:39.623

我在我的 rPI 上使用带有 express、Socket.io、Mongojs 模块的 Nodejs

# php - Ajax 显示的 PHP 脚本

> ID：14118366
> 
> 赞同：0
> 
> 时间：2013-01-02T07:30:21.197
> 
> 标签：php, jquery, ajax, json, variables

我有一个 PHP 函数，我想返回下面的代码：

```
$myarray = array("one","two","three");
echo "<table><tr>";

foreach($myarray as $array_item)
{
    echo "<td>$array_item</td>";
}
echo "</tr></table>"; 
```

这样我就可以使用 json 数据类型将 PHP 脚本传递给 Ajax。

在 PHP 中有什么方法可以像变量一样返回这些代码行，以便我可以使用 jQuery 将此“变量”附加到 HTML 中`.html(var)`？或者其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:34:27.397

使用此代码

```
$myarray = array("one","two","three");
$str = "<table><tr>";

foreach($myarray as $array_item)
{
    $str.=echo "<td>$array_item</td>";
}
$str.= "</tr></table>";

echo json_encode($str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:34:01.323

[json_encode](http://us.php.net/json_encode)你的数组。并且您的 jquery 可以在 ajax 响应中将其拾取并放入变量中。在您的 jquery 中，您可以将其格式化为 html 表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:35:07.223

```
$myarray = array("one","two","three");
$str = "<table><tr>";

foreach($myarray as $array_item)
{
   $str .= "<td>$array_item</td>";
}
$str .= "</tr></table>"; 
```

请将此变量回显到 javascript 的脚本标记中

```
<script type="text/javascript">
  var str1 = <?php echo $str;?>
</script> 
```

将此 str1 变量传递给您的 ajax 函数....

希望这对你有帮助......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:35:39.157

使用[json_encode()](http://php.net/manual/en/function.json-encode.php) ..它返回一个值的 JSON 表示

```
 echo json_encode(); 
```

**或者**

您可以将 dataType 用作 HTML ..（您的 php 脚本无需更改）

```
dataType:'html';
success:function(html){

   jquery.html(html) //apend the returned html to your div 
} 
```

# c++ - 斐波那契堆的 STL？

> ID：14118367
> 
> 赞同：7
> 
> 时间：2013-01-02T07:30:35.290
> 
> 标签：c++, data-structures, stl, fibonacci-heap

STL 中的斐波那契堆在哪里？如果 STL 没有实现 Fibonacci Heap，那么在 STL 中使用现有算法和容器来实现它的最佳实践是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T07:38:44.057

[boost](http://www.boost.org)有[一个实现](http://www.boost.org/doc/libs/1_49_0/doc/html/heap.html)。希望有帮助。[STL](http://www.cplusplus.com/reference/stl/)中似乎没有。这是一个例子：

```
 for(int n=0;n<40;++n){
    std::cout<<"F("<<n<<")="<<fibonacci(n)<<std::endl;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-06T12:30:14.037

尽管没有明确说明它是斐波那契堆，但 STL 实现了一个 priority_queue，它具有与斐波那契堆相同的复杂性、相同的 api 和行为（实际上可能是伪装的斐波那契堆）

[https://en.cppreference.com/w/cpp/container/priority_queue](https://en.cppreference.com/w/cpp/container/priority_queue)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:32:59.000

不，标准库中没有保证的斐波那契堆

有关在 C++ 中实现自定义分配方案的示例，请参阅[Loki 库中的小对象分配器](http://loki-lib.sourceforge.net/html/a00632.html)

* * *

**编辑**：对不起，我正在考虑实现动态内存分配堆的[斐波那契伙伴系统。](http://www.memorymanagement.org/glossary/f.html#fibonacci.buddies)

# windows-phone-7 - 如何从 windows phone 7 或 8 获取用户自己的手机号码

> ID：14118369
> 
> 赞同：4
> 
> 时间：2013-01-02T07:30:50.027
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone-8.1

我想提取“用户**自己的**手机号码”，而不是他的整个电话簿。我使用 c# 作为开发语言。谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T08:51:31.600

如果您想获取设备自己的电话号码，那么目前是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:39:58.590

据我所知，在 Windows Phone 中无法获取自己的手机号码。

# java - java和php之间的简单客户端服务器通信

> ID：14118371
> 
> 赞同：9
> 
> 时间：2013-01-02T07:31:20.250
> 
> 标签：java, php, sockets

我需要将信息从php客户端发送到java服务器，但是服务器端没有接收到虽然一个打印语句在服务器上成功执行，客户端的文本无法在服务器端接收。以下是代码：

Java 服务器：

```
import java.io.BufferedReader;
import java.net.*;
import java.io.*;

public class javaphp2 {
    private static ServerSocket socket;

    private static Socket connection;
    private static String command       = new String();
    private static String responseStr   = new String();

    private static int port = 4309;

    public static void main(String args[])  {
        System.out.println("Signal Server is running.");

        try  {
            socket = new ServerSocket(port);

            while (true)  {
                connection = socket.accept();

                InputStreamReader inputStream = new InputStreamReader(connection.getInputStream());
                DataOutputStream response = new DataOutputStream(connection.getOutputStream());
                BufferedReader input = new BufferedReader(inputStream);

                command = input.readLine();
                //System.out.println("The input is" + command);
                response.writeBytes(responseStr);
                response.flush();
                //response.close();

                System.out.println("Running");
            }
        } catch (IOException e)  {
            System.out.println("Fail!: " + e.toString());
        }

        System.out.println("Closing...");
    }
} 
```

PHP客户端：

```
#!/usr/local/bin/php -q
<?php
$address = '132.119.90.165';
$port = 4309;

$socket = socket_create(AF_INET, SOCK_STREAM, getprotobyname('tcp'));
socket_connect($socket, $address, $port);

$message = 'Apple';
$len = strlen($message);

$status = socket_sendto($socket, $message, $len, 0, $address, $port);
if($status !== FALSE)
{
    $message = '';
    $next = '';
    while ($next = socket_read($socket, 4096))
    {
        $message .= $next;
    }

    echo $message;
}
else
{
    echo "Failed";
}

socket_close($socket);
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T08:26:18.950

知道了 ！，

我们需要添加`$message = "Apple\n";`而不是`$message = 'Apple\n';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:46:11.830

尝试在您的消息中添加行尾。

```
$message = 'Apple\n'; 
```

readLine 将始终等待行尾。

# shell - cd 到目录在 shell 脚本中不起作用

> ID：14118376
> 
> 赞同：0
> 
> 时间：2013-01-02T07:31:43.163
> 
> 标签：shell

> **可能重复：**
> [为什么我在尝试执行 bash 脚本时得到“：没有这样的文件或目录”？](https://stackoverflow.com/questions/9651406/why-am-i-getting-no-such-file-or-directory-when-trying-to-execute-a-bash-scr)

我有以下shell脚本..运行它时 cd 命令不断失败并出现以下错误..任何人都可以提供输入有什么问题吗？

```
#\!/bin/sh
ANDROID_ROOT="/local/mnt/workspace/AU"
cd $ANDROID_ROOT 
source build/envsetup.sh                                     
lunch 12

: No such file or directoryal/mnt/workspace/AU
./test.sh: line 4: build/envsetup.sh: No such file or directory
<username:/local/mnt/workspace/username/scripts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:44:01.727

行尾被搞砸了。运行它`dos2unix`。

# windows - lein repl 使我的 Clojure 源文件在 Windows 上的 Vim 中只读

> ID：14118380
> 
> 赞同：2
> 
> 时间：2013-01-02T07:32:28.763
> 
> 标签：windows, vim, clojure, leiningen

我不知道问题出在哪里，但是当我这样做`lein repl`或`lein vimclojure`在一个项目中，然后在 Vim 中从同一个项目中打开一个 Clojure 源文件时，它是只读的，就像它正在被使用一样。如果我这样做了`:set noreadonly`，就会`:set readonly?`回答`noreadonly`，但是当我尝试编写文件时，Vim 仍然说该文件“是只读的”。我可以用 来写它`:w!`，似乎没有什么不好的事情发生。有没有人知道可能出了什么问题，或者知道解决方法？我不希望在编码时文件是只读的。顺便说一句，我在 Windows 上。当我在记事本或 Emacs 中打开文件时，它们不是只读的，保存它们也没有问题。即使我关闭了 repl，并尝试`readonly`在 Vim 中关闭，Vim 仍然不允许我保存没有`!`.

需要明确的是，如果我不先启动 repl，我就没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:35:36.523

几天前我克隆了 leiningen 存储库（2012-12-29 的提交 e01a1980af0b2cd07c56626f684b2f2ba50adf44 是我克隆中的最后一次提交）以获得更新的版本，该版本修复了我遇到的另一个问题，我注意到我没有这个问题这个新版本。

# php - 从两个表中快速选择数据

> ID：14118382
> 
> 赞同：3
> 
> 时间：2013-01-02T07:32:33.320
> 
> 标签：php, mysql, sql, join

我有两个要从中选择的表。我有一个名为的表`articles`，它为我的内容管理系统存储各种文章，我还有一个名为的表，它`articles_meta_data`存储文章表的元数据。为了获取文章的元数据，您可以使用`article Id`. 我的代码在这里并且运行良好。有没有办法可以优化代码并使其更快？

```
$result = mysql_query("SELECT * FROM articles");    
while ($row = mysql_fetch_object($result)) {
    $result2 = mysql_query("SELECT * FROM articles_meta_data WHERE article_ID=" . $row->ID);
    while ($row2 = mysql_fetch_object($result2)) {
        var_dump($row2);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:33:53.293

加入表，这样你就只会查询一次数据库，例如

```
SELECT  b.*
FROM    articles a
        INNER JOIN articles_meta_data b
            ON a.ID = b.article_ID 
```

要进一步了解有关加入的更多信息，请参阅下面的链接

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:55:47.677

你应该使用连接查询，这样你就不需要触发两个查询，但首先你必须决定使用哪个连接来检查这个链接[http://www.firebirdfaq.org/faq93/](http://www.firebirdfaq.org/faq93/)

在这里我们将使用 JOIN 以便选择列articles.ID 和articles_meta_data.article_ID 具有相同值的记录

```
SELECT *,articles_meta_data.field1,articles_meta_data.field2 from articles JOIN articles_meta_data ON articles.ID = articles_meta_data.article_ID 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T08:09:08.200

你也可以做这样的事情..

```
Select * from articles JOIN articles_meta_data ON ID = article_ID 
```

希望这也可以以其他方式帮助您。

# java - 在生产中进行线程转储

> ID：14118385
> 
> 赞同：22
> 
> 时间：2013-01-02T07:32:47.847
> 
> 标签：java, runtime.exec, thread-dump

我正在分析进行线程转储的方法之间的差异。以下是我正在研究的几个

1.  定义一个 jmx bean，它在单击声明的 bean 操作时通过 Runtime.exec() 触发 jstack。

2.  守护线程在预定义的时间间隔后重复执行“ManagementFactory.getThreadMXBean().dumpAllThreads(true, true)”。

比较两者之间的线程转储输出，我看到方法 2 的以下缺点

1.  使用方法 2 记录的线程转储无法被 TDA 等开源线程转储分析器解析
2.  输出不包括在分析高 CPU 问题时可能有用的本机线程 ID（对吗？）
3.  还有吗？

我很高兴得到有关的建议/意见

1.  在生产代码中通过 Runtime.exec() 执行 jstack 有什么缺点吗？各种操作系统（windows、linux）上的任何兼容性问题？

2.  还有其他方法来进行线程转储吗？

谢谢你。

**编辑 -**

1和2的组合方法似乎是要走的路。我们可以在后台运行一个专用线程，并以线程转储分析器可以理解的格式在日志文件中打印线程转储。如果需要任何仅由 jstack 输出记录的额外信息（比如可能是本机线程 id），我们会根据需要手动执行。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-02T09:45:53.017

您可以使用

```
jstack {pid} > stack-trace.log 
```

以用户身份在进程运行的盒子上运行。

如果您多次运行此命令，您可以使用 a`diff`更轻松地查看哪些线程处于活动状态。

* * *

为了分析堆栈跟踪，我在专用线程中定期使用以下采样。

```
 Map<Thread, StackTraceElement[]> allStackTraces = Thread.getAllStackTraces(); 
```

使用此信息，您可以获得线程的 id、运行状态并比较堆栈跟踪。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-14T16:35:02.060

在 Java 8 中，jcmd 是首选方法。

```
jcmd <PID> Thread.print 
```

以下是[Oracle 文档](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr016.html)的片段：

JDK 8 的发布引入了 Java Mission Control、Java Flight Recorder 和 jcmd 实用程序，用于诊断 JVM 和 Java 应用程序的问题。**建议使用最新的实用程序 jcmd 而不是以前的 jstack 实用程序，以增强诊断并降低性能开销。**

但是，将其与应用程序一起提供可能会涉及许可问题，我不确定。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T08:35:35.383

如果它是*nix，我会尝试`kill -3 <PID>`，但是您需要知道进程ID，也许您无权访问控制台？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T08:42:32.837

如果有这样的环境，我建议您在暂存环境中进行所有堆分析，然后在生产中反映您所需的应用程序服务器调整（如果有）。如果您需要转储来分析应用程序的内存利用率，那么也许您应该考虑对其进行分析以进行更好的分析。

堆转储通常是由于`OutOfMemoryExceptions`内存泄漏和错误的内存管理而产生的。

检查您的应用程序服务器的文档，除了我前面提到的正常原因之外，大多数现代服务器都有在运行时生成转储的方法，但是生成的转储可能是特定于供应商的。

# css - 按钮上的垂直对齐不起作用

> ID：14118386
> 
> 赞同：2
> 
> 时间：2013-01-02T07:32:49.487
> 
> 标签：css, vertical-alignment

我想创建一个包含按钮的菜单，但由于某种原因，按钮没有在 div 的底部对齐。我之前使用表格以相同的方式完成了此操作，然后它起作用了，但现在我尝试不使用表格，并且由于某种原因这不起作用。

我的CSS：

```
body 
{
    background: #bbb url(../images/Mywallpap.jpg) no-repeat;
    font-family: Sans-Serif;
    padding:0;
    margin: 0;
}

#Background
{
    width: 750px;
    margin: 0 auto;
    background: #FEFEFE;
}

.Menu
{
    height: 60px;
    vertical-align: bottom;
}

.Menu div
{
    height : 30px;
    margin-left: 25px;
    padding: 0;

} 
```

我的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="MyCss.css" type="text/css" rel="Stylesheet" />
</head>
<body>

<div id="Background">
    <div class="Menu">
       <div>
       <button>Test</button>
       </div>
    </div>

</div>

</body>
</html> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:39:46.827

尝试将此 CSS 用于按钮

```
.ButtonClass
{
 border: thin groove #000000;
 vertical-align: bottom;
 } 
```

如果您正在寻找 div 内的对齐方式。您可以使用`position:absolute;`绝对定位父 div 中的元素。使用时`position:absolute;`，元素将从第一个定位的父 div 绝对定位，如果找不到，它将从窗口绝对定位，因此您需要确保内容 div 相对定位。

所以添加`position:relative;`到内容 div，从按钮中删除浮动并添加以下 css：

```
position: absolute;
right:    0;
bottom:   0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:36:15.630

垂直对齐仅适用于表格单元格¹：

```
.Menu
{
    display: table-cell;
} 
```

¹实际上它也适用于内联块，但效果不同。

# c# - 将文本框的内容写入 .txt 文件

> ID：14118395
> 
> 赞同：0
> 
> 时间：2013-01-02T07:34:10.000
> 
> 标签：c#, textbox, .net

我想将文本框的所有内容写入当前目录的 .txt 文件。我编写了以下代码，但是它引发了“错误的路径名错误”。我哪里出错了？

```
string fileDateTime = "StepsGA-" + DateTime.Now + ".txt";
string fname = System.IO.Path.Combine(System.Environment.CurrentDirectory, fileDateTime);
File.WriteAllText(fname, txtSteps.Text); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:37:42.607

你可能想做`DateTime.Now.ToString("yyyyMMddHHmmss")`

这有一个额外的好处，如果您按名称排序，它将按日期顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:37:30.210

可能是 DateTime.now 包括 ':' 字符？您不能在文件名中使用此字符...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:30:19.177

文件名不能包含 /\^<>*!| 你需要有格式化日期你可以使用下面的代码来格式化你的日期 String.Format("{0:y yy yyy yyyy}", DateTime.Now); 这将返回日期为 8 08 008 2008

所以改变你的代码如下 string fileDateTime = "StepsGA-" + String.Format("{0:y yy yyy yyyy}", DateTime.Now) + ".txt"; 字符串 fname = System.IO.Path.Combine(System.Environment.CurrentDirectory, fileDateTime); File.WriteAllText(fname, txtSteps.Text);

希望这现在对你有用

# ruby-on-rails - 我可以在没有 new 和 create 操作的情况下设置默认值并使用 edit 和 update 操作直接编辑它吗？

> ID：14118396
> 
> 赞同：0
> 
> 时间：2013-01-02T07:34:13.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个用户模型和一个问题模型。每个用户都有_一个问题，每个问题都属于_一个用户。Questions 模型有 3 列 - QuestionOne、QuestionTwo 和 QuestionThree - 每一个都设置为字符串“TBD”的默认值。

当用户创建帐户并登录时，我想在他的个人资料上显示问题和回复 =“待定”，然后使用 Best in place 我希望他能够使用编辑和更新操作来编辑他的回复。但是我无法检索使用的问题，`user.question.questionone`因为它们为零，因为这里没有创建或新操作。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:10:12.023

```
# user.rb
class User << ActiveRecord::Base
  has_one      :question
  after_create :create_question

  def create_question
    question = self.build_question
    question.question_one = question.question_two = question.question_three = "TBD"
    question.save
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:49:21.480

创建新用户时，它还没有关联的问题，因此您需要以某种方式构建它。常见的方法是使用 ActiveRecord 回调`before_create`或`after_create`类似

```
# user.rb
class User << ActiveRecord::Base
  has_one      :question
  after_create :create_question
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:43:52.433

在这里，您可以编写一个迁移，在创建问题时添加默认问题，

```
class ChangeDefaultQuestions < ActiveRecord::Migration
  def self.up
    change_column :questions, :question_one,   :string, :default => 'What is your name?'
    change_column :questions, :question_two,   :string, :default => 'How old are you?'
    change_column :questions, :question_three, :string, :default => 'Where do you live'

    # to add default questions to previously created questions
    Questions.update_all({ :question_one => 'your qestion', :question_two => 'your question', :question_three => 'your question' })
  end

  def self.down
    change_column :movies, :rating, :string, :default => nil
    Questions.update_all({ :question_one => '', :question_two => '', :question_three => '' })
  end
end 
```

我相信它会回答你的问题

# c#-4.0 - C# 这个参考母版页代码有什么问题？

> ID：14118397
> 
> 赞同：0
> 
> 时间：2013-01-02T07:34:23.840
> 
> 标签：c#-4.0, coding-style, master-pages

我需要将母版页引用到内容页，以更改引用到母版页的主页的 css 样式。这是我需要更改的控件，它位于母版页上。

```
<table cellpadding="0" cellspacing="14" border="0" class="navigationButtons">
      <tr>
          <td id="HomeLink" runat="server" align="center"><a href="Home.aspx"><br />Home</a></td>
          <td id="AboutLink" runat="server" align="center"><a href="About.aspx"><br />About us</a></td>
          <td id="ColLink" runat="server" align="center"><a href="Col.aspx"><br />Collections</a></td>
          <td id="RegLink" runat="server" align="center"><a href="Reg.aspx"><br />Register</a></td>
     </tr>
</table> 
```

我需要更改`<td>`每个内容页面的样式。我知道我应该首先参考主页上的母版页。但我不知道如何使用`FindControl`. 这就是我在服务器端所拥有的。

```
HtmlGenericControl HomeLink = null;
HomeLink = (HtmlGenericControl)Master.FindControl("HomeLink");
HomeLink.Style.Add["Background-color"] = blue; 
```

当然它不工作。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:45:02.880

1.  将 runat="server" 添加到您的 td 标签
2.  FindControl 不是递归的。MSDN 说“只有当控件直接包含在指定容器中时，此方法才会找到控件；也就是说，该方法不会在控件内的控件层次结构中进行搜索”

[http://msdn.microsoft.com/en-us/library/486wc64h.aspx](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)

```
public static Control FindControl(Control control, string id)
{
     if (control.Id == id)
         return control;

     foreach(Control c in control.Controls)
     {
         Control res = FindControl(c, id);
         if (res != null)
              return res;
     }

     return null;
} 
```

# android - 为什么 optionsMenu 显示在两行

> ID：14118400
> 
> 赞同：0
> 
> 时间：2013-01-02T07:34:45.090
> 
> 标签：android, android-optionsmenu

我不知道为什么我的标题显示银行行。现在我只想显示 optionMenu。请帮我。 ![在此处输入图像描述](../Images/ab55601ae7d6f78e4ae1be2fa401f27d.png)

这里是我的代码清单

```
enter code here
<activity
        android:name=".FileWalker"
        android:launchMode="singleTask"
        android:theme="@android:style/Theme.Holo.Light.DarkActionBar"
        android:uiOptions="none" />
    <activity 
```

关于活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    // requestWindowFeature(Window.FEATURE_NO_TITLE);

    ActionBar actionBar = getActionBar();
    if (actionBar != null) {
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowHomeEnabled(false);
        actionBar.setDisplayShowTitleEnabled(false);
    }

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        Log.d(TAG, "onCreateOptionsMenu");
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.files, menu);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:54:34.033

我不知道清单文件中适用哪种类型样式，但您使用此样式 +14 API

```
android:theme="@android:style/Theme.Holo.Light.DarkActionBar" > 
```

# html - 复制 sharepoint 内网站点

> ID：14118401
> 
> 赞同：0
> 
> 时间：2013-01-02T07:34:46.770
> 
> 标签：html, css, sharepoint, layout

我即将为客户创建自定义共享点布局，使其看起来像他们的公司页面。我在sharepoint方面没有任何经验，所以这将是一个挑战，但这就是你学习的方式。

关于这个的一个问题；客户能否复制他们的整个共享点站点，将其发送给我，然后我可以在本地共享点安装中使用它，创建新布局并将新布局发送回给他们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:30:37.810

备份/恢复网站集是您的答案。请参阅此链接以供参考：

[http://blogs.msdn.com/b/gayanpeiris/archive/2008/03/16/back-up-and-restore-by-using-stsadm.aspx](http://blogs.msdn.com/b/gayanpeiris/archive/2008/03/16/back-up-and-restore-by-using-stsadm.aspx)

# html - chrome和mozilla中的图像不同

> ID：14118405
> 
> 赞同：0
> 
> 时间：2013-01-02T07:35:04.053
> 
> 标签：html, css, image

相同的图像在 Mozilla 中看起来很完美，在 Chrome 中浏览时看起来不完美。这是图像。谁能建议我为什么会出现这些类型的错误以及如何解决它。

第一个是 Mozilla，第二个是 Chrome。

![Mozilla](../Images/a41fdab6b7d639db47b0a5ed703a9827.png)![铬合金](../Images/93427dbf93157bded0407b0d87f7d95a.png)

CSS代码是，

```
.freeimg
{
    position            : relative;
    top                 : 80px;
    border              : 1px solid #CCCCCC;
    border-right        : 0;
    background-color    : #FFF;
    cursor              :  pointer;
    margin-left         : -35px;
    -moz-border-radius  : 10px 0px  0px 10px;
} 
```

HTML 代码和往常一样正常。

```
<div class="fl freeimg" style="float:left;">
 <img src="/images/freeImg.gif" height="160" width="32" onClick="SlideMe()" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T07:49:25.377

添加`font-size:0`

**HTML**

```
<div class="fl freeimg">
 <img src="http://www.brightpay.co.uk/i/signup-launcher.png" onClick="SlideMe()" />
</div>​ 
```

**CSS**

```
 .freeimg
{
    position            : relative;
    float:left;
    top                 : 80px;
    border              : 1px solid #CCCCCC;
    border-right        : 0;
    background-color    : #FFF;
    cursor              :  pointer;
    border-radius  : 10px 0px  0px 10px;
    font-size:0
}    
.freeimg img
{        
    border-radius  : 10px 0px  0px 10px;
     margin:0; padding:0
}​ 
```

**[演示](http://jsfiddle.net/4HuWf/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:41:32.657

如果您为此目的动态更改 css，请使用 javascript 检查条件

```
if (navigator.appVersion.indexOf("Chrome/") != -1) {
 // modify button 
} 
```

在这下给你的css更改只适用于chrome

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T07:47:05.157

首先尝试通过加载样式表来重置 CSS，例如此处解释的样式表：

[http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

浏览器有不同的*默认值*，除非您用自己的设置覆盖这些值，否则它们可能仍然适用。在您的特定情况下，我会尝试添加：

```
padding: 0;
margin: 0; 
```

看看这是否消除了差异。但是`reset.css`如上所述使用 a 是避免这种差异的最佳实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T07:36:20.047

您必须编写条件 css 注释来解决此类问题。这不过是一个CSS问题。请发布您的代码。可能对解决这个问题有用

就像下面的代码

检查 firefox 中的元素并为 firefox 浏览器调整 css 样式单独的 css 文件并添加以下代码

if ( $.browser.mozilla == true ) { document.write(""); }

# c# - 在 Web.config 中调用连接字符串时出现非法字符异常

> ID：14118409
> 
> 赞同：3
> 
> 时间：2013-01-02T07:35:16.660
> 
> 标签：c#, .net, entity-framework, asp.net-mvc-4

我正在使用实体框架创建一个 C# MVC4.5 项目，并在我的 Web.config 中设置了以下连接字符串：

```
<connectionStrings>
    <add name="Entities" 
         connectionString="metadata=res://*/PersistenceModel.csdl|res://*/PersistenceModel.ssdl|res://*/PersistenceModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\sqlexpress;initial catalog=TravPro;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" /> 
</connectionStrings> 
```

然后我按如下方式访问此字符串：

```
string con = ConfigurationManager.ConnectionStrings["Entities"].ConnectionString;
WebSecurity.InitializeDatabaseConnection(con,
                                         "UserProfile", 
                                         "UserId", 
                                         "UserName", 
                                         true); 
```

这会引发“路径中的非法字符”异常：

```
[ArgumentException: Illegal characters in path.]
   System.IO.Path.CheckInvalidPathChars(String path, Boolean checkAdditional) +10631190
   System.IO.Path.Combine(String path1, String path2) +42
   WebMatrix.Data.ConfigurationManagerWrapper.GetConnection(String name, Func`2 getConfigConnection, Func`2 fileExists) +208
   WebMatrix.Data.ConfigurationManagerWrapper.GetConnection(String name) +91
   WebMatrix.Data.Database.OpenNamedConnection(String name, IConfigurationManager configurationManager) +18
   WebMatrix.Data.Database.Open(String name) +61
   WebMatrix.WebData.DatabaseConnectionInfo.Connect() +42
   WebMatrix.WebData.SimpleMembershipProvider.ConnectToDatabase() +25
   WebMatrix.WebData.SimpleMembershipProvider.CreateTablesIfNeeded() +35
   WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +73
   WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
   WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
   TravPro.Web.Filters.SimpleMembershipInitializer..ctor() in c:\Work\trunk\TravPro\TravPro.Web\Filters\InitializeSimpleMembershipAttribute.cs:43 
```

有人可以协助并让我知道哪些字符需要转义或如何解决此异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:46:23.920

您存储的连接字符串用于**实体框架**- 它不是“常规”ADO.NET 连接字符串。Entity Framework 连接字符串确实*包含*一个常规的 ADO.NET 连接字符串（ 中的位`provider connection string=.....`） - 但除此之外还有更多内容。

`WebSecurity`另一方面，需要一个**常规的 ADO.NET 连接字符串**作为输入——而**不是**实体框架连接字符串。

所以要解决这个问题，您需要在配置文件中`WebSecurity`为您的部分添加第二个连接字符串：`<connectionStrings>`

```
<connectionStrings>
    <add name="Entities" 
         connectionString="metadata=res://*/PersistenceModel.csdl|res://*/PersistenceModel.ssdl|res://*/PersistenceModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\sqlexpress;initial catalog=TravPro;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />
    <add name="RegularADONET" 
         connectionString="data source=.\sqlexpress;initial catalog=TravPro;integrated security=True;MultipleActiveResultSets=True;" 
</connectionStrings> 
```

然后使用第二个“常规”ADO.NET 连接字符串`WebSecurity`：

```
string con = ConfigurationManager.ConnectionStrings["RegularADONET"].ConnectionString;
WebSecurity.InitializeDatabaseConnection(con, "UserProfile", "UserId", "UserName", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:22:46.733

我尝试了你的方式（@marc_s），但我仍然遇到问题，尽管它确实引导我找到解决方案的方向。我将 connectionStrings 更改为：

```
<connectionStrings>
    <add name="DefaultConnection"
         connectionString="data source=.\sqlexpress;initial catalog=TravPro;integrated security=True;MultipleActiveResultSets=True;"
         providerName="System.Data.SqlClient" />
    <add name="Entities"
         connectionString="metadata=res://*/PersistenceModel.csdl|res://*/PersistenceModel.ssdl|res://*/PersistenceModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\sqlexpress;initial catalog=TravPro;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" />
</connectionStrings> 
```

现在一切似乎都是肉汁。我创建了一个新的项目模板，运行它，并看到了连接字符串格式的差异。

以下内容现在在我的 InitializeSimpleMembershipAttribute.cs 中：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", 
                                         "UserProfile", 
                                         "UserId", 
                                         "UserName", 
                                         true); 
```

感谢您为我指明正确的方向。
非常喜欢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:50:17.293

我能看到的唯一问题可能是您的 " 字符 - 尝试使用单引号

# wpf - 为什么 ItemsControl 的容器的 Parent 属性返回 null 而不是它所在的 Panel？

> ID：14118414
> 
> 赞同：13
> 
> 时间：2013-01-02T07:35:52.080
> 
> 标签：wpf, parent, itemscontrol, visualtreehelper

这个让我难住了。我们有一个自定义 ItemsControl，它使用自定义容器和自定义面板作为其 ItemsHost。现在，面板具有容器渲染所需的一些指标。由于它们是可视树中面板的直接子级，您可能会认为容器的 Parent 属性会返回面板，但事实并非如此！

我还在标准 ListBox 上使用 Snoop 确认了这个确切的事情，所以这不是我们的代码所独有的，而是显然所有 ItemsControls 容器。

现在我知道我可以使用 VisualTreeHelper 来获取可视父级（这是我需要的），但为什么父级*不是*面板？

如果参数是面板只是可视树的一部分，而父级是为逻辑树保留的，那么父级不是 ItemsControl 吗？

如果容器的参数也是 ItemsControl 的可视化树而不是逻辑树的一部分，那么为什么容器中托管的内容会将容器作为其 Parent 属性返回？

这意味着如果您从数据项遍历逻辑树，您会在容器处停下来，这可以解释为什么我们从容器到面板的绑定没有按预期工作。（我相信绑定是基于逻辑层次结构而不是视觉层次结构，但我必须进行测试才能确定。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:22:25.383

我从来没有注意到这一点，这激起了我的好奇心。在 .Net Framework 中寻找线索后，发现 Parent 属性似乎确实是手动设置的：这需要几个步骤，但我发现更改父属性的唯一方法是调用这些方法：

## ![父母做作](../Images/1b55e6d8dfa7e5e2158959ee968aa579.png)

如果我分析例如 FrameworkElement.AddLogicalChild 方法，我发现这些方法正在使用它：

## ![FrameworkElement.AddLogicalChild 分析](../Images/bbcf3b9eae243a2a7bf445c1b0aa6f5c.png)

这确认了父属性应该引用逻辑树。我尝试创建自己的自定义控件：

```
[ContentProperty("CustomContent")]
public class CustomControl1 : Control
{
    static CustomControl1()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomControl1), new FrameworkPropertyMetadata(typeof(CustomControl1)));
    }

    public object CustomContent
    {
        get { return GetValue(CustomContentProperty); }
        set { SetValue(CustomContentProperty, value); }
    }

    public static readonly DependencyProperty CustomContentProperty = DependencyProperty.Register("CustomContent", typeof(object), typeof(CustomControl1));
} 
```

使用此模板：

```
<ControlTemplate TargetType="{x:Type local:CustomControl1}">
     <ContentPresenter ContentSource="CustomContent" />
</ControlTemplate> 
```

我是这样用的：

```
<WpfApplication1:CustomControl1 Width="50" Height="50">
    <Rectangle Fill="Red" />
</WpfApplication1:CustomControl1> 
```

...这就像这样（就像一个魅力:-)）：

![自定义控制屏幕截图](../Images/6194838244bf95599f7a1849959ead32.png)

...猜猜看...**矩形的父级未设置:-)**

我现在没有时间继续调查，但是关于 ItemsControl，我想也许 ItemContainerGenerator 不知道它插入 itemsContainers 的逻辑父级，这可以解释为什么在这种情况下没有设置父属性......但是这需要证明...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-03T16:19:51.883

`FrameworkElement.Parent`属性[文档](https://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.parent(v=vs.110).aspx)说它可能为空，例如在数据模板中创建的项目。在这种情况下，他们建议使用`FrameworkElement.TemplatedParent`：

> 对于模板，模板的 Parent 最终将为 null。要超越这一点并扩展到实际应用模板的逻辑树，请使用 TemplatedParent。

可能是你的情况？它在类似的情况下帮助了我（`Parent`如果它是 null 用作`TemplateParent`后备，我就使用 then）。

是的，答案已经晚了，但它可能会帮助其他与我遇到同样错误的人

# winforms - 如何确定我的 BindingSource 的列表是否已更改？

> ID：14118416
> 
> 赞同：1
> 
> 时间：2013-01-02T07:35:55.217
> 
> 标签：winforms, bindingsource

我有一个 BindingSource 用于绑定到网格。绑定源本身绑定到自定义类。例如

```
MyGrid.DataSource = MyBindingSource

'Bind the Binding source to data
 For each classInstance as myClass in MyCollection
    MyBindingSource.List.Add(classInstance)
 Next 
```

用户可以向/从该列表添加或删除项目。我的目标是将这个更新的列表保存到数据库中。我需要确定我的绑定源列表是否已更改（即添加了项目，或者从中删除了项目）。

我知道我可以在我的自定义类上实现 INotifyPropertyChanged，并利用 OnPropertyChanged 事件，但在我的情况下我的类的属性永远不会改变。我能想到的另一个解决方案是使用 BindingSource 的 ListChanged 事件，并在那里维护所有添加和删除的行的集合。尽管这种方法可能对我有用，但我认为它有点不稳定。

绑定源或集合（例如我的情况下的 IList）是否提供任何其他可以帮助我确定上述内容的属性？

# sass - 如何在 mixin 中使用 !important 关键字？

> ID：14118418
> 
> 赞同：9
> 
> 时间：2013-01-02T07:36:10.903
> 
> 标签：sass

我无法让 Sass`!important`使用 mixin 输出关键字，我尝试过：

```
@include font-size($font-size-sml) !important; 
```

和：

```
@include font-size($font-size-sml !important); 
```

它总是抛出一个错误。

**编辑**

我最终得到了这个效果很好：

```
@mixin font-size($font-size, $sledge-hammer: "") {
    font-size: $font-size #{$sledge-hammer};
    font-size: ($font-size / $base-font-size)+rem #{$sledge-hammer};
    line-height: ceil($font-size / $base-line-height) * ($base-line-height / $font-size);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T08:55:26.583

您不能`!important`像在第一个示例中尝试那样在 SASS 中添加整个 mixin（我认为可能在 LESS 中）。

第二个示例对我有用（您可以使用参数传递 !important），我的意思是，如果您`$font-size-sml`直接将其用作属性值，它可以工作，所以也许检查您的语法。

但是如果它真的不适合你，你可以用 flag 做一些事情，设置一个 important_flag 作为 mixin 参数，然后在 mixin 中使用 if-else 语句。像这样的东西：

```
@mixin large-text($prop, $is_imp: false) {
    @if $is_imp == false {
        font-size: $prop;
    } @else {
        font-size: $prop !important;
    }
} 
```

也许这不是一种迷人的方式，但它有效;-)

# java - 在 android 活动之间传输变量值的示例

> ID：14118424
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:36:34.957
> 
> 标签：java, android, variables, android-activity

我在“第一”类中有 2 个变量，我希望“第二”类中的这些值来完成一些任务。什么可能是最简单的方法。当我从事 android 开发工作时，2 个变量值是用户输入的 edittext 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:39:05.757

您可以将它们放在第二类中，也可以`constructor`制作它们`public static`以便使用类名来访问它们..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:41:18.490

使用静态它将由所有线程共享。最好将其设为私有并提供 getter 和 setter 方法，因此您可以通过 getter 方法访问该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T07:43:02.720

在`first`课堂上，你可以做这样的事情，

```
name_text = (EditText) findViewById(R.id.nameText);
String name = name_text.getText().toString();
    Intent intent = new Intent(first.this, Second.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);         
    intent.putExtra("name",name);
    startActivity(intent); 
```

在`Second`课堂上，你可以做这样的事情，

```
 Intent i = this.getIntent();
String name = i.getStringExtra("name"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T07:45:28.610

如果您的意思是 first 和 Second 是活动，那么您可以使用 putExtra 概念。

**第一活动.java**

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("var1", editText1.getText().toString());
intent.putExtra("var2", editText2.getText().toString());
startActivity(intent); 
```

**SecondActivity.java**

```
Bundle bundle = getIntent().getExtras();
if (bundle != null) {
    String txtOne = bundle.getString("var1");
    String txtTwo = bundle.getString("var2");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T07:41:37.880

当您使用从to`Intent`导航时，请使用`Activity1``Activity2``Intent.putExtra("key", "Value")`

# sql - PL-SQL 过程执行成功但不更新表

> ID：14118426
> 
> 赞同：1
> 
> 时间：2013-01-02T07:36:38.580
> 
> 标签：sql, stored-procedures, plsql, oracle11g, plsqldeveloper

我编写了一个 pl-sql 过程来更新表。

```
CREATE OR REPLACE 
PROCEDURE EMP_UPDATE (emp IN NUMBER, div_code IN VARCHAR2)
AS
BEGIN

    UPDATE EMP_CATEGORY 
SET EMP_CATEGORY.DIV_CODE = div_code    
WHERE EMP_CATEGORY.EMP_NO = emp;
    COMMIT;

END EMP_UPDATE; 
```

单独的更新查询可以正常工作并更新表。但是当它在过程中使用时，它会显示

```
Procedure executed successfully
Query time: 0.018ms
Affected rows: 1 
```

但实际的表记录并没有改变。我无法弄清楚这个程序有什么问题。谁能指出我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:38:42.117

请尝试将输入变量名称更改`emp IN NUMBER`为`I_EMP IN NUMBER`或其他内容，因为表有一个名为 的列`emp`。

# mysql - 远程 MySQL 无法通过 cPanel 在 linux 中运行

> ID：14118430
> 
> 赞同：0
> 
> 时间：2013-01-02T07:37:02.357
> 
> 标签：mysql, remote-server

我有一个数据库服务器和一个应用程序服务器，并尝试使用 PHP 将我的应用程序服务器连接到远程数据库服务器。

像往常一样，我以以下方式使用以下方式。

```
<?php
mysql_connect("remotedb.com", "mysqladmin", "mysqlpassword") or die(mysql_error());
echo "Connected to MySQL<br />";
?> 
```

但是当我尝试运行此测试时，我收到以下错误。

```
Warning: mysql_connect() [function.mysql-connect]: Host 'gator418.hostgator.com' is not allowed to connect to this MySQL server in /home/username/public_html/testmysql.php on line 2
Host 'gator418.hostgator.com' is not allowed to connect to this MySQL server 
```

我已将域作为 %www.myappserver.com% 添加到远程服务器的 cpanel“远程 MySQL”，但问题仍然存在。谁能告诉我为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:38:54.713

不允许使用您的主机连接远程数据库用户名。很可能它被设置为只能从“localhost”连接，因此请检查您的 mysql 服务器上的用户名详细信息并查看允许的主机列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:42:34.450

首先从您的本地计算机尝试此操作

```
$ mysql -h gator418.hostgator.com -u root -p
Enter password:
ERROR 1130: Host '192.168.1.4' is not allowed to connect to this MySQL server 
```

如果您遇到上述错误，请执行以下代码

在您的服务器中执行此操作。

```
$ mysql -u root -p
Enter password:

mysql> use mysql

mysql> GRANT ALL ON *.* to mysqladmin@'gator418.hostgator.com' IDENTIFIED BY 'mysqlpassword'; 

mysql> FLUSH PRIVILEGES; 
```

此外，更新防火墙规则以确保在运行 mysql 数据库的服务器上打开端口# 3306。

经过上述更改后，当您尝试从远程客户端连接到 mysql 数据库时，您将不会再收到“不允许主机连接到此 MySQL 服务器”错误消息。

这也可以通过 Cpanel 实现。将所有权限授予您创建的用户。（对于您想要的特定数据库）

# jsp - 使用 JSTL fmt 库和属性文件时，泰米尔语字符显示为问号

> ID：14118431
> 
> 赞同：6
> 
> 时间：2013-01-02T07:37:23.993
> 
> 标签：jsp, character-encoding, jstl, properties-file, tamil

我正在使用 JSTL `fmt`taglib 来显示泰米尔语字符。但我无法显示任何泰米尔语字符。它不是显示泰米尔语字符，而是显示问号字符，如`??????`. 我试过印地语，它也显示问号。我现在该怎么办？

这是我的代码。我只是尝试用泰米尔语打印 Hello World。

`fileproperty.properties`：

```
helloworld=வணக்கம் உலகம் 
```

`Hello.jsp`：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org  /TR/html4/loose.dtd">
<html>
  <fmt:setLocale value="ta-IN"/>
  <fmt:setBundle basename="fileproperty"/>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Home</title>
  </head>
  <body>
    <fmt:message key="helloworld"/>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:41:13.053

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T15:36:36.120

把这一行放在你的jsp中：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

**在你的 message.properties ->**属性**->**资源**->**文本文件编码**-> *UTF8中***更改文件编码****

 ***并在您的 mvc-dispatcher-servlet.xml 中查看此 messageSource bean：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:project" />
        <property name="defaultEncoding" value="UTF-8"/>
</bean> 
```***

# javascript - 使用 text.js 和 require.js 如何创建一个模板 html 文件但单独获取每个脚本模板？

> ID：14118434
> 
> 赞同：0
> 
> 时间：2013-01-02T07:37:30.560
> 
> 标签：javascript, jquery, templates, requirejs, underscore.js

我正在使用 require.js 和 text.js 来加载一个包含一堆`<script>`模板的模板文件：

例如 /scripts/templates/comments.html

```
<script type="text/template" id="js-comment-reply-tmpl">
// html in here
</script>

<script type="text/template" id="js-comment-edit-tmpl">
// html in here
</script> 
```

并且因为使用下划线的模板系统（或任何类似的 js 微模板系统），这个文件本身被加载为一个字符串。有没有一种聪明的方法可以从该文件中获取每个模板？例如`$(template).html()`，将其包装在 jQuery 中，然后对其执行 a`find()`或其他操作？我基本上必须先将它放入 DOM 中，所以这可能会很慢，我什至可能什至不使用 text.js 加载它，而最初将它从 DOM 中取出。

我的另一个想法是将它们各自拆分为自己的文件，但这会减慢请求时间（尽管我可能最终只是使用带有节点的 r.js 来缩小这一切，所以它不会事情）。

例如 /scripts/templates/comment_reply.html

```
<script type="text/template" id="js-comment-reply-tmpl">
// html in here
</script> 
```

例如 /scripts/templates/comment_edit.html // 这里的 html

最好/最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:15:58.710

我建议将每个模板移动到它自己的文件中并分别加载它们。这样做的一些好处是：

*   **更容易维护**- 如果项目中的模板都有自己的名称，那么在项目中搜索模板会更容易，并且如果开发人员不都编辑同一个文件，它还可以减少源代码控制冲突的麻烦。

*   **可移植性**- 如果您最终使用可在服务器上使用的模板系统（如 Mustache），那么模板已经很容易在前端和后端之间共享。

您已经强调的主要缺点是额外的请求，但是如果不使用 r.js 构建脚本，您绝对不应该去生产，所以这应该不是问题

# php - 如何使用 Graph api 在我们的好友列表中搜索 FB 好友

> ID：14118437
> 
> 赞同：0
> 
> 时间：2013-01-02T07:37:39.540
> 
> 标签：php, facebook, facebook-graph-api, search

如何在我们的 Facebook 好友列表中按名称搜索我们的好友？

在我的程序中，我在一个框中列出了所有使用 api 的朋友。在那个框中，有一个字段——搜索我们的朋友。我想使用 Graph api 搜索我的朋友。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:44:52.173

FB 没有提供任何 api 来搜索特定用户的朋友，但是很容易自己做。我建议您使用[facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)。

1.

```
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
));

$user = $facebook->getUser();
if ($user) {
    $friends = $facebook->api('/me/friends');
    // DO SOMETHING ELSE
} 
```

从现在开始，`$friends`是用户的好友列表。它等于`https://graph.facebook.com/me/friends?access_token=USER_TOKEN`手动访问。

2.假设`$target`是您搜索字段中的字符串

```
foreach ($friends["data"] as $value) {
    if (strpos($value["name"], $target) !== false) {
        // DO SOMETHING YOU WANT TO
    }
} 
```

顺便说一句，在客户端使用javascript搜索朋友可能比使用php更有效和动态。就个人而言，我会在前端做。假设您使用的是 jQuery，并且`target`是来自您的搜索字段的字符串。

```
var url = 'https://graph.facebook.com/me/friends?access_token=USER_TOKEN'
$.getJSON(url, function(data) {
    friends = data['data'];

    for(i in friends){ 
        if (friends[i]['name'].search(target) != -1){
            // DO SOMETHING YOU WANT TO
        }
    }
}); 
```

# jquery - 单击下一步按钮时无法获取当前页面作为参数

> ID：14118444
> 
> 赞同：3
> 
> 时间：2013-01-02T07:38:03.910
> 
> 标签：jquery, jqgrid

**单击下一个**按钮时，我试图获取页码作为参数。

我正在尝试使用以下代码来实现它：

```
onPaging: function(pgButton) {
    if(pgButton == "next") {
        window.alert("next clicked! \n page: " + 
                     $('#userlist').getGridParam('page'));
    }
} 
```

没有任何成功（使用上面的代码，**下一步**按钮不起作用）。我确定我错过了一些非常简单的东西。网格代码中是否有一个特定的位置，我应该在哪里放置我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:20:56.550

`pgButton`是一个`String`。你应该写`if (pgButton == "next")`。见：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager#events](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager#events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:25:22.017

试试这个

```
onPaging: function(pgButton){ if(pgButton=="next_your_paging_tool_id"){ window.alert("next clicked! \n page: " + $('#userlist').getGridParam('page')); } }, 
```

在您的 if 条件中附加您的分页工具 ID 的 ID，如发布的代码中所示

# html - 为什么 Z-index 在这里不起作用？

> ID：14118446
> 
> 赞同：1
> 
> 时间：2013-01-02T07:38:25.977
> 
> 标签：html, css, positioning

> **可能重复：**
> [z-index 不适用于固定定位](https://stackoverflow.com/questions/5218927/z-index-not-working-with-fixed-positioning)

我正在创建一个具有固定页眉和页脚以及固定左侧边栏的应用程序。一切都很好，只是 z-index 属性不起作用。我已将页眉和页脚的 z-index 设置为 1000，将主 div 的 z-index 设置为 1。因此页眉和页脚应该堆叠在 .main div 上。但结果不一样。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Sample Title</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="header fixed-top">
      <div class="header-inner">
        <ul class="nav">
          <li>
            <a href="#">Link 1</a>
          </li>
          <li>
            <a href="#">Link 2</a>
          </li>
          <li>
            <a href="#">Link 3</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="sidebar-left-fixed">This is the left sidebar. This should remain fixed.</div>
    <div class="main">And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br />And here comes the content division.
    <br /></div>
    <div class="footer fixed-bottom">
      <div class="footer-inner">footer</div>
    </div>
  </body>
</html> 
```

这个CSS：

```
a{
color: #777;
text-decoration: none;
text-shadow: 0 1px 0 white;
}
body {
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 20px;
color: #333;padding:0;
margin:0;
}
ul{
margin:0;padding:0;
position:relative;
list-style-type:none;
}
li{float:left}
.nav > li > a{padding: 10px 15px 10px;}
.fixed-top{
position:fixed;
top:0;right: 0;
left: 0;
z-index:1000;
}
.fixed-bottom{
position: fixed;
right: 0;
left: 0;
margin-bottom: 0;bottom: 0;
z-index:1000;
}
.header-inner{
border-bottom:solid 1px #eee;
min-height: 40px;
z-index:1000;
position:relative;
}
.footer-inner{
border-top:solid 1px #eee;
min-height: 80px;
position:relative;
z-index:1000;
}

.sidebar-left-fixed{
position:fixed;
left:0;
width:250px;
border-right:solid 1px #eee;
height:100%;
top:40px;
}
.main{
margin-top:40px;
margin-left:250px;
margin-right:0;
min-height:600px;
border-right:solid 1px #eee;
border-bottom:solid 1px #eee;
padding:5px;
z-index:1;
position:relative;
} 
```

注意：如果有其他好的方法可以得到这个设计，欢迎提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:09:40.683

没有为页眉、页脚和侧边栏部分提供任何背景颜色。否则它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:49:33.687

它似乎有效，唯一的问题是您的页眉/页脚没有任何背景（颜色）。并且是透明的，你只是通过它看到内容。

如果为页眉和页脚添加背景颜色，您可以看到它们下方的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:07:56.360

我认为[morksinaanab](https://stackoverflow.com/users/1578124/morksinaanab "莫基纳纳布")是正确的，但您也可以将 padding-bottom 添加到 .main。尝试添加：

```
.main { 
/* Your code */
padding-bottom: 85px; } /* the height of padding should be at least the same amount that footer height + 5px for space */ 
```

# html - HTML & CSS 浮动 jquery 菜单

> ID：14118447
> 
> 赞同：0
> 
> 时间：2013-01-02T07:38:30.843
> 
> 标签：html, css

我有 websie 和一个左侧菜单。

我希望使这个菜单与 CSS 中的相同，`position:fixed;`但是在调整网站大小时它仍然在同一个地方，当我滚动到一个特定的 div 时，我们说“联系”它`<li><a href="#">Contact</a></li>`与菜单 ul 中更大的字体联系。

有人知道它的插件或有关制作它的任何教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:41:47.727

当你悬停它时，用更大的字体制作 css 样式。前任 ：

```
 a:hover{
        font-size:20px;
        } 
```

对于链接。对于插件，

[http://www.jquery4u.com/menus/floating-message-plugins/](http://www.jquery4u.com/menus/floating-message-plugins/)

# stored-procedures - 从xml中提取sql数据

> ID：14118455
> 
> 赞同：0
> 
> 时间：2013-01-02T07:38:57.643
> 
> 标签：stored-procedures, plsql, oracle11g, extract

让我知道您从 xml 中提取 SQL 数据的建议。示例 xml 将如下作为 CLOB 过程的输入给出：

```
<filter>
  <and>
    <or>
      <equals field="MARKET_NAME" value="Chicago"/>
      <equals field="MARKET_NAME" value="BOSTON"/>
    </or>
    <or>
      <equals field="RANK" value="1"/>
      <equals field="RANK" value="2"/>
    </or>
    <between field="current_data" arg1="start_date" arg2="End_date"/>
    <gt field="CUME" value="20"/>
    <like field="DMA_NAME" value="%ABC%"/>
  </and>
</filter> 
```

提取的数据应如下所示：

```
(MARKET_NAME = 'Chicago' or MARKET_NAME = 'BOSTON') and 
(RANK = 1 or RANK = 2) and 
(current_date between start_date and End_Date) and 
CUME > 20 and 
DMA_NAME like '%ABC%' 
```

让我知道您的宝贵建议..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:50:33.227

一种方法是 XSL 样式表。

但我会添加到您的 XML 数据类型中。例如

```
<filter>
    <and>
        <or>
            <equals field="MARKET_NAME" value="Chicago" datatype="string"/>
            <equals field="MARKET_NAME" value="BOSTON" datatype="string"/>
        </or>
        <or>
            <equals field="RANK" value="1" datatype="number"/>
            <equals field="RANK" value="2" datatype="number"/>
        </or>
        <between field="current_data" arg1="start_date" arg2="End_date" datatype="field"/>
        <between field="foo" arg1="20121230" arg2="20130101 01:12:23" datatype="date"/>
        <gt field="CUME" value="20" datatype="number"/>
        <like field="DMA_NAME" value="%ABC%"  datatype="string"/>
    </and>
</filter> 
```

然后是 XSL（这只是一个示例。您需要改进它，因为它只是您的基本入门！）

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    exclude-result-prefixes="xd"
    version="1.0">
    <xsl:output method="text"/>

    <xsl:template name="string-replace-all">
        <xsl:param name="text"/>
        <xsl:param name="replace"/>
        <xsl:param name="by"/>
        <xsl:choose>
            <xsl:when test="contains($text,$replace)">
                <xsl:value-of select="substring-before($text,$replace)"/>
                <xsl:value-of select="$by"/>
                <xsl:call-template name="string-replace-all">
                    <xsl:with-param name="text" select="substring-after($text,$replace)"/>
                    <xsl:with-param name="replace" select="$replace"/>
                    <xsl:with-param name="by" select="$by"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template name="processDatatype">
        <xsl:param name="value" />
        <xsl:param name="datatype" />
        <xsl:choose>
            <xsl:when test="$datatype = 'string'">
                <xsl:text>&apos;</xsl:text>
                <xsl:call-template name="string-replace-all">
                    <xsl:with-param name="text" select="$value"/>
                    <xsl:with-param name="replace" select='"&apos;"'/>
                    <xsl:with-param name="by" select='"&apos;&apos;"'/>
                </xsl:call-template>
                <xsl:text>&apos;</xsl:text>
            </xsl:when>
            <xsl:when test="$datatype = 'date'">
                <xsl:text>to_date(&apos;</xsl:text>
                <xsl:value-of select="$value"/>
                <xsl:text>&apos;,&apos;yyyymmdd hh24:mi:ss&apos;)</xsl:text>
            </xsl:when>
            <xsl:otherwise><xsl:value-of select="$value"/></xsl:otherwise>
        </xsl:choose>

    </xsl:template>

    <xsl:template name="gt">
        <xsl:value-of select="@field"/>
        <xsl:text> &gt; </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@value"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="lt">
        <xsl:value-of select="@field"/>
        <xsl:text> &lt; </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@value"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="between">
        <xsl:value-of select="@field"/>
        <xsl:text> between </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@arg1"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
        <xsl:text> and </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@arg2"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="like">
        <xsl:value-of select="@field"/>
        <xsl:text> like </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@value"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="equals">
        <xsl:value-of select="@field"/>
        <xsl:text> = </xsl:text>
        <xsl:call-template name="processDatatype">
            <xsl:with-param name="value"><xsl:value-of select="@value"/></xsl:with-param>
            <xsl:with-param name="datatype"><xsl:value-of select="@datatype"/></xsl:with-param>
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="and">
        <xsl:for-each select="*">
            <xsl:if test="position() != 1">
                <xsl:text>and </xsl:text>
            </xsl:if>
            <xsl:choose>
                <xsl:when test="name() = 'like'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="like" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'gt'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="gt" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'lt'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="lt" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'equals'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="equals" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'between'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="between" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'or'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="or" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="or">
        <xsl:for-each select="*">
            <xsl:if test="position() != 1">
                <xsl:text>or </xsl:text>
            </xsl:if>
            <xsl:choose>
                <xsl:when test="name() = 'like'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="like" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'gt'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="gt" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'lt'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="lt" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'equals'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="equals" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'between'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="between" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
                <xsl:when test="name() = 'and'">
                    <xsl:text>(</xsl:text>
                    <xsl:call-template name="and" />
                    <xsl:text>)&#10;</xsl:text>
                </xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="/filter">
        <xsl:text>where </xsl:text>
        <xsl:for-each select="*">
            <xsl:choose>
                <xsl:when test="name() = 'and'">
                    <xsl:call-template name="and" />
                </xsl:when>
                <xsl:when test="name() = 'or'">
                    <xsl:call-template name="or" />
                </xsl:when>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

例子：

输出存储为 XMLTYPE 的 XSL：

```
SQL> select * from xsl;

NAME
--------------------
XSL
--------------------------------------------------------------------------------
xml_to_sql
<?xml version="1.0" encoding="WINDOWS-1252"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xd="http:
//www.oxygenxml.com/ns/doc/xsl" exclude-result-prefixes="xd" version="1.0">
  <xsl:output method="text"/>
  <xsl:template name="string-replace-all">
    <xsl:param name="text"/>
... 
```

现在我们`transform`在输入的 XML 上使用 XMLTYPE 的函数来得到结果：

```
SQL> select dbms_xmlgen.convert(xmltype('<?xml-stylesheet type="text/xsl" href="test.xsl"?>
  2  <filter>
  3      <and>
  4          <or>
  5              <equals field="MARKET_NAME" value="Chicago" datatype="string"/>
  6              <equals field="MARKET_NAME" value="BOSTON" datatype="string"/>
  7          </or>
  8          <or>
  9              <equals field="RANK" value="1" datatype="number"/>
 10              <equals field="RANK" value="2" datatype="number"/>
 11          </or>
 12          <between field="current_data" arg1="start_date" arg2="End_date" datatype="field"/>
 13          <between field="foo" arg1="20121230" arg2="20130101 01:12:23" datatype="date"/>
 14          <gt field="CUME" value="20" datatype="number"/>
 15          <like field="DMA_NAME" value="%AB&apos;C%"  datatype="string"/>
 16      </and>
 17  </filter>').transform(xsl.xsl).getclobval(), 1)
 18  from xsl
 19  /

DBMS_XMLGEN.CONVERT(XMLTYPE('<
--------------------------------------------------------------------------------
where ((MARKET_NAME = 'Chicago')
or (MARKET_NAME = 'BOSTON')
)
and ((RANK = 1)
or (RANK = 2)
)
and (current_data between start_date and End_date)
and (foo between to_date('20121230','yyyymmdd hh24:mi:ss') and to_date('20130101
 01:12:23','yyyymmdd hh24:mi:ss'))
and (CUME > 20)
and (DMA_NAME like '%AB''C%') 
```

# asp.net-mvc - KendoUI MVC Json - 他们一起工作吗？

> ID：14118456
> 
> 赞同：0
> 
> 时间：2013-01-02T07:39:00.993
> 
> 标签：asp.net-mvc, kendo-ui

我是客户端-服务器、SQL 程序员（RAD 人），公司决定我们必须迁移到 .NET 环境。我们现在正在检查平台。

这周我学习了 MVC4 和实体框架，并且阅读了很多关于 KendoUI 的内容。我持怀疑态度，因为大多数示例都带有 KendoGrid+WebApi。我对 WebApi 知之甚少，但我真的很喜欢实体的东西，所以我认为我不应该给它一个机会。

我想问一些看似幼稚但答案对我有很大帮助的问题

1.  一旦我从现有数据库创建实体，我可以得到 Json 格式的结果并用它来提供 KendoGrid 吗？

    如果是，如何？我是说：

2.  如何在 Controller 中转换 Json 中的结果？

3.  在 KendoGrid 的传输属性中，我应该放置控制器/动作的 URL？

    和最天真的一个

4.  Telerik 是否有提供可视化工具来创建和配置 kendoGrid 的想法？让它更RAD，因为现在需要太多的编码。也许是一个向导，您可以将实体与网格列、数据源、传输选择器等连接起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:07:22.173

我希望你选择剑道实体路径，但会有一个学习曲线。不，关于第 4 个问题。但让我让您快速开始使用 Razor 视图引擎并回答 1、2 和 3。

首先，EF 正在创建业务对象。您“应该”将这些转换为 MVC 中的模型。在此示例中，Person 来自 EF。我认为这是扁平化的，因为它消除了对象的深度，尽管它仍然可用，所以如果你的数据库是这样设置的，你可以引用 Person.Titles.Name 之类的东西。你也可以加入 DataAnnotations，它只是摇滚。

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using Project.Business;

namespace Project.Web.Models
{
    public class PersonModel
    {
        public int Id { get; set; }
        [Required(ErrorMessage = "Last Name is required.")]
        public string LastName { get; set; }
        [Required(ErrorMessage = "First Name is required.")]
        public string FirstName { get; set; }
        [Display(Name = "Created")]
        public System.DateTime StampCreated { get; set; }
        [Display(Name = "Updated")]
        public System.DateTime StampUpdated { get; set; }
        [Display(Name = "Enabled")]
        public bool IsActive { get; set; }

        public PersonModel()
        {}
        public PersonModel(Person person)
        {
            Id = person.Id;
            FirstName = person.FirstName;
            LastName = person.LastName;
            StampCreated = person.StampCreated;
            StampUpdated = person.StampUpdated;
            IsActive = person.IsActive;
        }

        public static IList<PersonModel> FlattenToThis(IList<Person> people)
        {
            return people.Select(person => new PersonModel(person)).ToList();
        }

    }
} 
```

一路走来...

```
@(Html.Kendo().Grid<PersonModel>()
    .Name("PersonGrid")
    .Columns(columns => {
        columns.Bound(b => b.Id).Hidden();
        columns.Bound(b => b.LastName).EditorTemplateName("_TextBox50");
        columns.Bound(b => b.FirstName).EditorTemplateName("_TextBox50");
        columns.Bound(b => b.StampUpdated);
        columns.Bound(b => b.StampCreated);
        columns.Bound(b => b.IsActive).ClientTemplate("<input type='checkbox' ${ IsActive == true ? checked='checked' : ''} disabled />").Width(60);
            columns.Command(cmd => { cmd.Edit(); cmd.Destroy(); }).Width(180);
        })
    .ToolBar(toolbar => toolbar.Create())
    .Pageable()
    .Filterable()
    .Sortable()
    .Selectable()
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Events(events => events.Error("error_handler"))
        .Model(model =>
            {
                model.Id(a => a.Id);
                model.Field(a => a.StampCreated).Editable(false);
                model.Field(a => a.StampUpdated).Editable(false);
                model.Field(a => a.IsActive).DefaultValue(true);
            })
        .Create(create => create.Action("CreatePerson", "People"))
        .Read(read => read.Action("ReadPeople", "People"))
        .Update(update => update.Action("UpdatePerson", "People"))
        .Destroy(destroy => destroy.Action("DestroyPerson", "People"))
        .PageSize(10)
    )
) 
```

那些 _TextBox50 是名为 _TextBox50.cshtml 的 EditorTemplates，必须放在相对于您的视图或相对于您的共享文件夹的子文件夹中 - 该文件夹必须称为 EditorTemplates。这个好像是这样的……

```
@Html.TextBox(string.Empty, string.Empty, new { @class = "k-textbox", @maxlength = "50" }) 
```

是的，仅此而已。这是一个简单的例子，它们可以变得更复杂。或者您最初不必使用它们。

最后，我认为你真正在寻找什么......

```
public partial class PeopleController : Controller
{
    private readonly IPersonDataProvider _personDataProvider;

    public PeopleController() : this(new PersonDataProvider())
    {}
    public PeopleController(IPersonDataProvider personDataProvider)
    {
        _personDataProvider = personDataProvider;
    }

    public ActionResult Manage()
    {
>>> Left in as teaser, good to apply a special Model to a View to pass goodies ;)
        var model = new PeopleViewModel();
        model.AllQualifications = QualificationModel.FlattenToThis(_qualificationDataProvider.Read());
        return View(model);
    }

    [HttpPost]
    public JsonResult CreatePerson([DataSourceRequest]DataSourceRequest request, Person person)
    {
        if (ModelState.IsValid)
        {
            try
            {
                person = _personDataProvider.Create(person);
            }
            catch (Exception e)
            {
                ModelState.AddModelError(string.Empty, e.InnerException.Message);
            }
        }
        var persons = new List<Person> {person};
        DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
        return Json(result, JsonRequestBehavior.AllowGet);
    }

    public JsonResult ReadPeople([DataSourceRequest]DataSourceRequest request)
    {
        var persons = _personDataProvider.Read(false);
        DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request);
        return Json(result, JsonRequestBehavior.AllowGet);
    }

    [HttpPost]
    public JsonResult UpdatePerson([DataSourceRequest]DataSourceRequest request, Person person)
    {
        if (ModelState.IsValid)
        {
            try
            {
                person = _personDataProvider.Update(person);
            }
            catch (Exception e)
            {
                ModelState.AddModelError(string.Empty, e.InnerException.Message);
            }
        }
        var persons = new List<Person>() {person};
        DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
        return Json(result, JsonRequestBehavior.AllowGet);
    }

    [HttpPost]
    public JsonResult DestroyPerson([DataSourceRequest]DataSourceRequest request, Person person)
    {
        if (ModelState.IsValid)
        {
            try
            {
                person = _personDataProvider.Destroy(person);
            }
            catch (Exception e)
            {
                ModelState.AddModelError(string.Empty, "There was an error deleting this record, it may still be in use.");
            }
        }
        var persons = new List<Person>() {person};
        DataSourceResult result = PersonModel.FlattenToThis(persons).ToDataSourceResult(request, ModelState);
        return Json(result, JsonRequestBehavior.AllowGet);
    }
} 
```

请注意，在这种情况下，每个方法都将 EF Person 作为参数，使用 PersonModel 会更好，但我将不得不展示 Flatten 的反面。这是有效的，因为它们实际上是相同的。如果模型不同，或者您使用的是类工厂，它会变得更加棘手。

我特意向你展示了所有的 CRUD 操作。如果您不将结果传递回网格，它会表现得很有趣并给您重复或无法在 CREATE 和 UPDATE 上正确显示更新。它在 DELETE 上传回以传递可能有任何错误的 ModelState。

最后是数据提供者，以免留下任何想象......（省略了命名空间声明。）

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Linq;
using Project.Business;

public class PersonDataProvider : ProviderBase, IPersonDataProvider
{
    public Person Create(Person person)
    {
        try
        {
            person.StampCreated = DateTime.Now;
            person.StampUpdated = DateTime.Now;

            Context.People.Attach(person);
            Context.Entry(person).State = EntityState.Added;
            Context.SaveChanges();
            return person;
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.Message);
            throw;
        }
    }

    public IList<Person> Read(bool showAll)
    {
        try
        {
            return (from q in Context.People
                      orderby q.LastName, q.FirstName, q.StampCreated
                      where (q.IsActive == true || showAll)
                      select q).ToList();
        }
        catch (Exception e)
        {
            Debug.WriteLine(e.Message);
            throw;
        }
    }

...

} 
```

请注意 Interface 和 ProviderBase 继承，您必须进行这些继承。应该足够简单以找到示例。

这可能看起来像很多编码，但一旦你把它写下来，只需复制粘贴。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:27:10.720

是的，您可以使用 JsonResult 或使用指定了允许获取的 JSON 将 JSON 发送回剑道 UI。您可以在传输中设置 url 并将 json 指定为类型。

关于你的最后一个问题，目前没有可视化工具，但有可用于 kendo UI 的辅助方法

# javascript - 使用按钮显示和隐藏 iframe

> ID：14118459
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:39:12.950
> 
> 标签：javascript, jquery, html, css, iframe

我有一个包含 2 个 iframe 的网页，1 个位于另一个下方。当用户第一次点击网页时，我希望隐藏两个 iframe。将有 2 个按钮，每个 iframe 上方有 1 个，用户必须单击按钮才能显示/隐藏 iframe

这是我厌倦的（jQuery 函数），但是当我从表达式网络在 chrome 中预览时它似乎不起作用

jsfiddle.net/darego/Z62P7/2/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:54:59.673

仅将其放入准备好的文档中是不够的。你可以让你的功能更容易。

```
function hideToggle(elem) {
    $(elem).toggle();
} 
```

这意味着：如果元素是可见的 > 隐藏它，如果它是隐藏的 > 显示它。

但是对于您的初始化（隐藏两个 div），我建议您通过 css 进行。

```
iframe {
     display:none;
} 
```

您还需要为按钮设置点击处理程序。如果您需要这方面的帮助，请给我写评论或编辑您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:44:43.433

您需要做的就是在 document.ready 之后调用该函数：

```
$(document).ready(function() {
    hideToggle(".button1", ".iframe1");
    hideToggle(".button2", ".iframe2");
}); 
```

# iphone - 如何在 Xcode 中显示/隐藏视图

> ID：14118465
> 
> 赞同：4
> 
> 时间：2013-01-02T07:40:29.880
> 
> 标签：iphone, objective-c, ios, cocoa-touch

再会..！我想请教一下如何在 xcode 中完成这项任务？

这是场景..我有几个按钮..下面的示例..

![在此处输入图像描述](../Images/d2a60c468e9b1dc0a16cd4ce3053e893.png)

--> 示例
--> 示例
--> 示例

当你点击第一个sample1时，它会显示一个包含信息的文本。当你再次点击sample1时，它会回到原来的位置。。

单击时的示例

--> Sample1
    --> 这里的信息

--> 样本 2
--> 样本 3

再次点击时

--> 样品
1 --> 样品 2
--> 样品 3

希望早日收到你的消息..

谢谢，

关联

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T09:38:14.520

您可以将隐藏属性设置为 mayuur 和 iDhaval 建议

```
view.hidden = YES; // or
view.hidden = NO; 
```

或通过调用 setHidden：

```
[view setHidden:YES]; // or
[view setHidden:NO]; 
```

您还可以将视图的 alpha 属性设置为 0.0f，但要知道它仍然接收触摸事件。

```
view.alpha = 0.0f; // or
[view setAlpha:0.0f]; 
```

请参阅 ColdLogic 对[UIView 隐藏属性的回答……还有更多内容吗？](https://stackoverflow.com/questions/5024260/uiview-hidden-property-is-there-more-to-it#answer-5025150)用于动画视图“淡出”的代码以及 Torsten Walter 对[视图的 hidden = yes 和 alpha = 0.0f 之间有什么区别](https://stackoverflow.com/questions/10911696/whats-the-difference-between-views-hidden-yes-and-alpha-0-0f#answer-10911951)的回答有关将视图的 alpha 属性设置为 0.0f 和设置其 hidden 之间的区别的更多信息属性为 YES，以及 iOS 如何在不同的上下文中处理它。有关 UIView 的相关 Apple 文档也可能会有所帮助。

*   [developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/doc/uid/TP40006816-CH3-SW134](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/doc/uid/TP40006816-CH3-SW134)

如果您想通过移动这些信息文本视图来动画显示和隐藏它们，那么修改 iDev Recipes 上的代码以在 Twitter 应用程序中实现在表格上的侧向滑动并不难。完整的源代码可在 GitHub 上找到。

*   [idevrecipes.com/2011/04/14/how-does-the-twitter-iphone-app-implement-side-swiping-on-a-table/](http://idevrecipes.com/2011/04/14/how-does-the-twitter-iphone-app-implement-side-swiping-on-a-table/)
*   [github.com/boctor/idev-recipes/tree/master/SideSwipeTableView](http://github.com/boctor/idev-recipes/tree/master/SideSwipeTableView)

如需更复杂的动画，请参考 Apple 的核心动画编程指南。

*   [developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html](http://github.com/boctor/idev-recipes/tree/master/SideSwipeTableView)

由于我是该站点的新手，并且它限制了我可以包含的超链接的数量，因此您必须复制并粘贴项目符号旁边的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:28:32.443

请`hidden`在按钮的单击事件上使用具有相应视图的属性。

# javascript - 如何将 Raphael JS 论文的宽度和高度设置为与其包含的 div 相同的宽度和高度？

> ID：14118466
> 
> 赞同：0
> 
> 时间：2013-01-02T07:40:33.650
> 
> 标签：javascript, jquery, html, raphael

我的 Raphael JS 论文是在 id 为“temp”的 div 中创建的。我希望纸张的高度和宽度与 div temp 的高度和宽度相同。我该如何使用 javascript 或 jquery 执行此操作？

**HTML**

```
<div id="temp" style="border:1px solid red;width:500px;height:500px"></div> 
```

我尝试使用获取高度和宽度

```
document.getElementById("temp").style.width 
document.getElementById("temp").style.height 
```

但是当我用它来创建论文时，我收到了一个 JS 警告..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T07:49:26.903

如果您的 javascript 中有以下 RaphaelJS init：

```
var paper = new Raphael('myDiv'); 
```

在 html 中：

```
<div id="myDiv" style="width: 200px; height: 200px;" /> 
```

在这里，拉斐尔纸将是 200 像素 x 200 像素。它会自动完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T07:55:41.730

您可以使用.. [height()](http://api.jquery.com/height/)和[width()](http://api.jquery.com/width/) jquery 函数来获取元素的高度和宽度..

```
var width=$("#temp").width(); 
var hieght=$("#temp").height(); 
alert(width); //gives you width
alert(height); //gives you height 
```

# node.js - 使用 nginx 后面的节点应用程序返回内容类型响应标头

> ID：14118467
> 
> 赞同：0
> 
> 时间：2013-01-02T07:41:00.613
> 
> 标签：node.js, nginx, express

我们有一个使用 node js（express js）构建的 web 应用程序，它位于 nginx 后面。

对于特定的 API，我们希望内容类型响应标头为“text/plain”。对于此以下代码在控制器中。

res.setHeader('Content-Type', 'text/plain'); res.send（响应）；

当服务器不在 nginx 之后时，这有效。但是当服务器在 nginx 后面时，响应头仍然是 'application/json'

nginx配置粘贴如下：

```
#kZyguser www-data;
user root;
worker_processes 4;
pid /var/run/nginx.pid;

events {
        worker_connections 20000;
        # multi_accept on;
}

http {

        ##
        # Basic Settings
        ##

        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;

        # server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##
        # Logging Settings
        ##
        access_log /var/log/nginx/access.log; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:56:14.520

你试过`proxy_pass_header`在 nginx 中使用吗？

`proxy_pass_header Content-Type;`

[http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)

顺便说一句-您的问题中似乎您的 nginx 配置可能不完整。

# javascript - 如何获取 PAC 的访问日志（代理自动配置）

> ID：14118472
> 
> 赞同：2
> 
> 时间：2013-01-02T07:41:27.820
> 
> 标签：javascript, logging, browser, pac

我正在使用 Chrome，我想为自己监控浏览器访问日志（我怀疑某些扩展在后台发送 url 等），我尝试使用 Privoxy，但它无法记录 HTTPS url

我认为 PAC 是记录原始 url 的唯一方法，我使用 PAC 几年了，但我仍然不知道如何调试它或记录访问。我该怎么做？（或任何记录原始网址的方式）

我猜一些代码：

```
function FindProxyForURL(url, host) {

    /*
     logging variable 'url' there, but how to write it to file or somewhere ?

     // some logging code

     */

    if (0
        || shExpMatch(url, "*facebook*")
        || shExpMatch(url, "*google.com/*")
        || shExpMatch(url, "*twitter/*")

    ) {
        return "SOCKS5 127.0.0.1:55777; SOCKS5 127.0.0.1:55888";
    }

    return "DIRECT";
} 
```

# deployment - 使用 rsync 部署 Capistrano

> ID：14118473
> 
> 赞同：3
> 
> 时间：2013-01-02T07:41:29.517
> 
> 标签：deployment, capistrano, rsync

我正在尝试使用 capistrano 和 rsync 从我的开发机器部署应用程序。我研究过 rsync 用于备份，并且只复制文件中更改的字节。但要适合它作为 capistrano 任务。

带有 rsync 的示例部署代码以及解释将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:34:15.873

检查以下链接是否有助于您理解代码示例：-

[http://philtoland.com/post/448916606/capistrano-deployment-using-rsync](http://philtoland.com/post/448916606/capistrano-deployment-using-rsync)

你检查过这个吗：-

[https://github.com/vigetlabs/capistrano_rsync_with_remote_cache](https://github.com/vigetlabs/capistrano_rsync_with_remote_cache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T11:37:21.743

如果您很快最终使用 Capistrano v3（目前为 v3.0.0pre14），那么旧的 Rsync 支持 gem [capistrano_rsync_with_remote_cache](https://github.com/vigetlabs/capistrano_rsync_with_remote_cache)将不起作用。[我最近为Capistrano::Rsync](https://github.com/moll/capistrano-rsync)创造了精神上的成功，你可能想尝试一下。

# java - GAE/J Datastore Presistent Jdo 删除问题

> ID：14118477
> 
> 赞同：1
> 
> 时间：2013-01-02T07:41:50.503
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo, datanucleus

目前我的父类看起来像这样，

```
public class UserVotesJDO {

@PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    @Persistent
    private String mediaId;

    @Persistent(dependent="true")
    private LikesJDO likes;

    @Persistent(dependent="true")
    private HatesJDO hates; 
```

// 使用 getter 和 setter 以及其他变量 }

我的 Child 班讨厌 JDO 看起来像

```
@PersistenceCapable(detachable = "true")
public class HatesJDO {

@PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

@Persistent
private int count;

private List<UserJDO> hatesUsersList;
} 
```

其中 UserJDO 是另一个子类，如下所示，

```
@PersistenceCapable(detachable="true")
public class UserJDO {

@PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

@Persistent
private String userId;

@Persistent
private String userName;

@Persistent
private String fullName;

@Persistent
private String userEmail;
} 
```

我的逻辑是当我删除 UserVote 时，我不再需要那些依赖的孩子的仇恨和喜欢，以及它的 UserJDO，所以**当我尝试删除 UserVotesJDO 对象时，我在控制台中收到如下警告**

```
Delete of com.shoewars.jdo.UserVotesJDO@8b4163 needs delete of related object at com.shoewars.jdo.ShoeWarsUserVotesJDO.hates but cannot delete it direct since FK is here 
```

我知道这一点外键是当前引用或使用的.....

谁能帮我解决这个问题！

由于这是我的第一篇文章，我不知道如何正确发布，无论如何，我会解释我想要做什么

我有一个存储图像 ID 的 JDO，以及喜欢这张图片的人和讨厌这张图片的人的人员信息

为此，我创建了另外两个 JDO likesJDO 和 HatesJDO，分别存储列表。

所以，当我在 jdo 中保存有关投票的信息时，会发生以下事情

1.  获取用户信息并将其相应地存储在用户列表中，无论是讨厌还是喜欢

2.  将这些与图像 ID 一起添加到 UserVote JDO

3.  终于坚持了

现在，我的问题是，当我删除 UserVote JDO 时，我希望删除 hatsJDO 和 likesJDO 中的那些记录，这就是我添加的原因

```
@Persistent(dependent="true")
private LikesJDO likes;

@Persistent(dependent="true")
private HatesJDO hates; 
```

这些行

但是现在，在执行此操作时遇到异常

堆栈跟踪将类似于：

```
com.uservote.service.UserVotesOperations updateUserVoteForMedia: Cannot read fields from a deleted object
javax.jdo.JDOUserException: Cannot read fields from a deleted object
FailedObject:com.google.appengine.api.datastore.Key:UserVotesJDO(80003)/LikesJDO(1)/UserJDO(2001)
    at org.datanucleus.api.jdo.state.PersistentDeleted.transitionReadField(PersistentDeleted.java:116)
    at org.datanucleus.state.AbstractStateManager.transitionReadField(AbstractStateManager.java:838)
    at org.datanucleus.state.JDOStateManager.isLoaded(JDOStateManager.java:1699)
    at com.uservotes.jdo.UserJDO.jdoGetuserId(UserJDO.java)
    at com.uservotes.jdo.UserJDO.getUserDTO(UserJDO.java:157)
    at com.uservotes.service.InstagramApiService.convertToUserDtoList(InstagramApiService.java:555)
    at com.uservotes.jdo.LikesJDO.getLikesDTO(LikesJDO.java:95)
    at com.uservotes.jdo.uservotesUserVotesJDO.getuservotesUserVotesDTO(uservotesUserVotesJDO.java:109)
    at com.uservotes.service.UserVotesOperations.updateUserVoteForMedia(UserVotesOperations.java:242)
    at com.uservotes.service.UserVotesOperations.updateUserVoteForMediaList(UserVotesOperations.java:162)
    at com.uservotes.controller.UserVotesController.hanldeUpdateUserVotesRequest(UserVotesController.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_$1.run(Method_.java:165)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.privilegedInvoke(Method_.java:163)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke_(Method_.java:124)
    at com.google.apphosting.runtime.security.shared.intercept.java.lang.reflect.Method_.invoke(Method_.java:43)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T13:07:46.603

似乎它与延迟加载有关。尝试在删除之前访问喜欢和讨厌的东西（通过 getLikes() 和 getHates()）。

# sql - 在 case 语句之前检查 if 条件

> ID：14118480
> 
> 赞同：1
> 
> 时间：2013-01-02T07:42:35.443
> 
> 标签：sql, sql-server, sql-server-2008

```
Case stud.Status 
  when 'N'then 'NA' 
end 
```

如何在 IF不等于2之前的`when`语句之前添加以下条件。也就是说，我只想在加上上述条件时才分配。
`@ID``'NA'``id <> 2`

编辑：完整查询

```
 Case Stud.Status 
            when @ID = 2 AND Stud.Status = 'N' then 'To Be Submitted'
            when 'N'then 'N/A' 
            else isnull(Stud.Status, '') 
        end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T07:44:44.750

像这样：

```
CASE 
  WHEN @ID <> 2 AND stud.Status ='N' THEN 'NA'
END 
```

这是`CASE`表达的另一种形式。

**注意：**表达式[`CASE`有](http://msdn.microsoft.com/en-us/library/ms181765.aspx)两种形式：

> *   简单 CASE 表达式将一个表达式与一组简单表达式进行比较以确定结果。
>     
>     
> *   搜索到的 CASE 表达式计算一组布尔表达式以确定结果。

* * *

**更新：**试试这个：

```
 'StudStatus' = 
         CASE  
           WHEN @ID = 5 AND Stud.Status = 'N' THEN 'To Be Submitted'
           WHEN Stud.Status = 'N' THEN 'N/A' 
           ELSE ISNULL(Stud.Status, '') 
        END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:44:13.533

试试这个

```
 Case stud.Status 
   when 'N' and @id<>2 then 'NA' 
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:45:46.027

```
if @ID <> 2 
begin
     Case stud.Status 
        when 'N'then 'NA' 
          end

end 
```

# jmeter - 使用“终极线程组”的目的是什么：需要知道实际用法

> ID：14118481
> 
> 赞同：0
> 
> 时间：2013-01-02T07:42:50.893
> 
> 标签：jmeter, jmeter-plugins

考虑到它的实际用途，有人可以解释一下[Ultimate Thread Group的目的是什么。](http://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)我是 JMeter 的新手，据我所知（如果我错了，请纠正我），我们使用“终极线程组”来安排我们为特定 JMeter 场景脚本创建的多个线程的上升/下降时间。

我觉得这也可以通过使用[Stepping Thread Group](http://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup)来完成，方法是将多个线程附加到同一个测试计划。所以我需要确切地知道 Ultimate Thread Group 的重要用途是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:44:40.677

您可以使用它来模拟用户高峰（作为狄拉克三角函数）

# c++ - 如何在 Visual Studio 2003 上指定 /EHa

> ID：14118485
> 
> 赞同：0
> 
> 时间：2013-01-02T07:43:04.047
> 
> 标签：c++, visual-studio-2003

如何在 Visual Studio .NET 2003 上指定 /EHa？在 C++ -> Code Generation 下，我只看到 /EHsc 的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:12:04.733

终于在 Microsoft [KB 311065](http://support.microsoft.com/kb/311065)找到了答案：在选项中指定“否”并`/EHa`在附加的编译器命令框中指定

# c++ - LoadMenu 加载一个看起来非常过时的菜单

> ID：14118488
> 
> 赞同：2
> 
> 时间：2013-01-02T07:43:16.233
> 
> 标签：c++, winapi, menu

我在 VS2012 中使用此代码从我的 .exe 应用程序的资源文件中加载菜单。我在 Windows 7 上；

> m_hMenu = LoadMenu(lpApplication->m_hInstance, lpszMenuName);

然后我将 m_hMenu 作为句柄传递给 CreateWindow。我相信我的应用程序有正确的清单（其他控件有很好的样式）：

```
#pragma comment(linker, "/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

这是我的应用程序菜单的样子：

![在此处输入图像描述](../Images/94452acb630b2bc0f6ef689ab4b2deed.png)

Notepad.exe 中的菜单如下所示：

![在此处输入图像描述](../Images/eb7d42bd140c91c6c65107edfe98fe94.png)

我的应用程序菜单似乎看起来“旧”，我不知道为什么。我需要有人为我指明正确的方向，以使我的菜单具有半透明悬停/样式，如第二张图片所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:03:47.113

显然，在菜单设计器下将“Break”参数设置为“Bar”会导致菜单恢复为旧样式。我不认为这是相关的。

# java - JPA 2：@TableGenerator 的好处

> ID：14118491
> 
> 赞同：0
> 
> 时间：2013-01-02T07:43:32.637
> 
> 标签：java, hibernate, jpa, annotations

@TableGenerator 技术生成主键有什么好处？为什么我们使用这种技术以及如何使用用于存储生成器的序列名称和值的第三个表来获取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:53:02.567

从链接。[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Table_sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Table_sequencing)

> 有几种生成唯一 ID 的策略。一些策略与数据库无关，而另一些则利用内置的数据库支持。JPA 支持通过 GenerationType 枚举值定义的几种 id 生成策略：TABLE、SEQUENCE 和 IDENTITY。选择使用哪种序列策略很重要，因为它会影响性能、并发性和可移植性。

因此，选择使用表生成器可以让您从使用数据库特定功能中解放出来。这使得以后可以轻松地将数据库迁移到其他数据库提供程序。因此，应根据您是否要稍后迁移数据库提供程序、为此牺牲多少性能等来做出决定。

# node.js - Node.js + MongoDB + Express + Mongoose。如何通过简单的代码要求特定文件夹中的所有模型？

> ID：14118492
> 
> 赞同：3
> 
> 时间：2013-01-02T07:43:36.107
> 
> 标签：node.js, mongodb, mongoose, models

考虑这是我的文件夹结构

```
express_example
|---- app.js    
|---- models    
|-------- songs.js    
|-------- albums.js    
|-------- other.js    
|---- and another files of expressjs 
```

我在文件**song.js中的代码**

```
var mongoose = require('mongoose')
, Schema = mongoose.Schema
, ObjectId = Schema.ObjectId;

var SongSchema = new Schema({
name: {type: String, default: 'songname'}
, link: {type: String, default: './data/train.mp3'}
, date: {type: Date, default: Date.now()}
, position: {type: Number, default: 0}
, weekOnChart: {type: Number, default: 0}
, listend: {type: Number, default: 0}
});

mongoose.model('Song', SongSchema); 
```

在文件 albums.js 中

```
 var mongoose = require('mongoose')
, Schema = mongoose.Schema
, ObjectId = Schema.ObjectId;

var AlbumSchema = new Schema({
name: {type: String, default: 'songname'}
, thumbnail: {type:String, default: './images/U1.jpg'}
, date: {type: Date, default: Date.now()}
, songs: [SongSchema]
});
mongoose.model('Album', AlbumSchema); 
```

我可以通过以下方式获得任何模型：

```
require('mongoose').model(name_of_model); 
```

但是如何通过简单的代码而不是 name_of_model 来要求特定文件夹中的所有模型？在上面的示例中，文件夹 ./models/* 中的所有模型

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T14:56:29.513

您已将模型导出到“模型”文件夹中的每个文件中。例如，执行以下操作，

```
exports.SongModel = mongoose.model('Song', SongSchema); 
```

然后在模型文件夹中创建一个名为“index.js”的通用文件并写入以下行

```
exports = module.exports = function(includeFile){  
  return require('./'+includeFile);
}; 
```

现在，转到您需要“Song”模型的 js 文件并添加您的模块，如下所示，

```
var SongModel = require(<some_parent_directory_path>+'/model')(/*pass file name here as*/ 'songs'); 
```

例如，如果我编写代码来列出songslist.js 中的所有歌曲以及放置在父目录中的文件，如下所示，

```
|---- models
|-------- songs.js
|-------- albums.js
|-------- other.js
|---- and another files of expressjs
|---- songslist.js 
```

然后你可以添加“歌曲模型”，如

```
var SongModel = require('./model')('songs'); 
```

注意：还有更多替代方法可以实现此目的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T05:37:21.837

```
var models_path = __dirname + '/app/models'
fs.readdirSync(models_path).forEach(function (file) {
  require(models_path+'/'+file)
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T11:58:00.030

您可以使用诸如[node-require-all 之](https://github.com/felixge/node-require-all)类的模块，它允许您要求来自特定文件夹的所有文件（您甚至可以使用过滤条件）。

举个例子（取自模块的自述文件）：

```
var controllers = require('require-all')({
  dirname     :  __dirname + '/controllers',
  filter      :  /(.+Controller)\.js$/,
  excludeDirs :  /^\.(git|svn)$/
});

// controllers now is an object with references to all modules matching the filter
// for example:
// { HomeController: function HomeController() {...}, ...} 
```

我认为这应该可以满足您的需求。

# javascript - 在 2 个 html5 页面之间访问 web sql 数据库

> ID：14118497
> 
> 赞同：0
> 
> 时间：2013-01-02T07:44:07.690
> 
> 标签：javascript, html

我是html5和js的新手，如果这是一个非常简单的问题，请原谅我的无知。但是有人可以帮助我为我的案例找到解决方案：

我已经从我的 js 代码创建了一些静态 html5 页面和一个离线数据库，可以跨所有 html5 页面访问。现在我正在尝试从一页更新数据库，并希望**在所有 html5 页面中更新数据库反射**。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:12:14.260

要从多个不同页面访问离线数据库，请确保您的所有页面都在同一个域中。

在所有页面上创建与数据库的**新连接。**

```
var db_conn = window.openDatabase( _ID_DATABASE_NAME, _ID_DATABASE_VERSION, _ID_DATABASE_DESC, _ID_DATABASE_SIZE ); 
```

传递给函数的所有参数应保持不变。

如果您尝试访问的值只是几个名称值对，请尝试使用**本地存储**的概念。以下是可跨页面访问的 setter getter 方法。

```
window.localStorage.setItem( 'myFirstLocalStorage_Name', 'myFirstLocalStorage_Value' );
var ls_value = window.localStorage.getItem( 'myFirstLocalStorage_Name' ); 
```

希望您能够跨页面获取您的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:49:02.983

正如您所说，它是离线数据库，将值存储在某个全局变量中，然后再将其存储到数据库中。在所有其他页面中，依赖于该全局变量。因此，如果您在 page1 中更新了一些数据，也将其存储在某个全局变量中。并在所有其他页面中使用该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T05:04:35.883

两个页面的域需要相同。

w3c 说

> 用户代理可能会将对数据库对象的访问限制为源自浏览上下文的顶级文档域的脚本，例如拒绝对运行在 iframe 中的其他域的页面的 API 访问。

# jquery - 在jquery中处理大约100帧动画的最佳方法

> ID：14118502
> 
> 赞同：0
> 
> 时间：2013-01-02T07:44:27.617
> 
> 标签：jquery, image, html, animation

我需要一个带有大约 100 帧动画徽标的页面。我想知道使用图像交换技术（每 x 秒更改一次图像）是否可行，还是由于帧数不推荐？使用视频是下一个最佳选择吗？只是想知道哪种方式是最好的表现方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:15:37.190

我认为`spritely`这对你来说是最好的选择，因为代码很短并且完成了。

# 从文档中：

`Spritely`是一个简单的插件，只有两个关键方法，`sprite()`这两个方法`pan()`都只是为元素的 background-image css 属性设置动画。两者的区别在于一幅`'sprite'`图像包含两个或多个`'frames'`动画，而一幅`'pan'`图像包含一个连续的图像，它向左或向右平移然后重复。通常，在任何一种情况下，您都会为此使用 png 文件（有或没有透明度）。

`You might wish to use a transparent gif for Internet Explorer 6`，尽管它可能看起来不太好。您的 html 元素必须已经是您希望 sprite 出现的正确大小，但背景图像通常会大于 html 元素，并且 spritely 方法会在 html 元素中重新定位背景图像。

他们正在使用此图像制作动画：

![在此处输入图像描述](../Images/8470b495acff31b5b7722d0c3a11c9de.png)

这是触发代码：

```
$('#bird').sprite({fps: 12, no_of_frames: 3}); 
```

要使鼠标在单击屏幕时吸引精灵，请使用以下命令：

```
$('#bird').sprite({fps: 12, no_of_frames: 3}).activeOnClick().active();
$('body').flyToTap(); 
```

你可以在这里找到更多：**[http ://www.spritely.net/documentation/](http://www.spritely.net/documentation/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:03:25.633

您将支持哪些浏览器？图像会以某种方式透明吗？

如果您只支持最新的浏览器，您可以使用带有精灵图像和[CSS3 动画的精灵动画](http://dev.opera.com/articles/view/css3-animations/)。

如果您想支持所有浏览器并且图像不必是透明的，您可以制作一个 gif。

然后还有两种使用javascript的方法。一种是您提到的交换图像的方式，另一种就像@MrXenotype 所说的那样，即使用精灵图像。这可以通过两种方式完成。一种是使用精灵图像作为背景图像并使用 JS 更改背景位置。另一个就像他说的那样，将精灵图像层移动到“查看矩形”中。

# sql - 如何从sql server中的日期获取基于月份的日期的周数

> ID：14118504
> 
> 赞同：1
> 
> 时间：2013-01-02T07:44:29.293
> 
> 标签：sql, sql-server-2008

我在表格中有一个日期列，我想根据该日期的月份获取该特定日期的周数，而不考虑日期

例如：

```
01-dec-2012 to 07-dec-2012 should give week number as 1
08-dec-2012 to 14-dec-2012 should give week number as 2
15-dec-2012 to 21-dec-2012 should give week number as 3
22-dec-2012 to 28-dec-2012 should give week number as 4
29-dec-2012 to 31-dec-2012 should give week number as 5 
```

这个周数不依赖于一周的开始日期，即，它可以是任何一天

如何编写`select`语句以在 SQL Server 2008 中获取此输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T07:48:40.773

您可以使用[DAY (Transact-SQL)](http://msdn.microsoft.com/sv-se/library/ms176052.aspx)

```
select ((day(DateColumn)-1) / 7) + 1
from YourTable 
```

[SQL小提琴](http://sqlfiddle.com/#!6/09763/2)

**MS SQL Server 2012 架构设置**：

```
create table YourTable
(
  D datetime
)

insert into YourTable 
select getdate()+Number
from master..spt_values
where type = 'P' and
      Number between 1 and 15 
```

**查询 1**：

```
select D,
       ((day(D)-1) / 7) + 1 as W
from YourTable 
```

**[结果](http://sqlfiddle.com/#!6/09763/2/0)**：

```
|                              D | W |
--------------------------------------
| January, 03 2013 07:48:54+0000 | 1 |
| January, 04 2013 07:48:54+0000 | 1 |
| January, 05 2013 07:48:54+0000 | 1 |
| January, 06 2013 07:48:54+0000 | 1 |
| January, 07 2013 07:48:54+0000 | 1 |
| January, 08 2013 07:48:54+0000 | 2 |
| January, 09 2013 07:48:54+0000 | 2 |
| January, 10 2013 07:48:54+0000 | 2 |
| January, 11 2013 07:48:54+0000 | 2 |
| January, 12 2013 07:48:54+0000 | 2 |
| January, 13 2013 07:48:54+0000 | 2 |
| January, 14 2013 07:48:54+0000 | 2 |
| January, 15 2013 07:48:54+0000 | 3 |
| January, 16 2013 07:48:54+0000 | 3 |
| January, 17 2013 07:48:54+0000 | 3 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:47:05.420

[这里有几个选项](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/fa397ba3-db13-492c-a8a8-3d8d2bb9d46a)可以做你想做的事。其中最有希望的似乎是使用该`DATEPART`功能。但请注意，结果可能会因您的本地设置而异。

希望其中一个适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:49:46.470

试试这个

```
 declare @dates datetime
 select @dates='2012-12-22'
 SELECT datepart(dd,@dates), ceiling (cast(datepart(dd,@dates)as numeric(38,8))/7) 
```

# android - 根据存储在sqlite中的经度，纬度在android google map app上获取最近的5个地方

> ID：14118506
> 
> 赞同：0
> 
> 时间：2013-01-02T07:44:40.500
> 
> 标签：android, google-maps-api-3, android-sqlite

我想问一些棘手的问题。希望会有一些解决方案。我的问题是，“我的 android-sqlite-database 中存储了许多地方（经度和纬度），当我使用 GPS 服务获取我的位置时，我想用可点击的小图标获取最近的五个位置。这有什么解决办法吗？？

描述：我在我的 sqlite 数据库中保存了一些位置的坐标。当我启动 GPS 服务时，它会给出我当前的位置。有了这个当前位置，我还想从我存储在 sqlite db 中的位置中获取一些**最近的位置**。我可以用某种方法做到这一点吗？

# wamp - Wamp tmp 重定向

> ID：14118514
> 
> 赞同：0
> 
> 时间：2013-01-02T07:45:00.630
> 
> 标签：wamp, tmp

我想将我的 tmp 文件重定向到另一个驱动器而不是 C:/wamp/tmp 我想将 tmp 文件重定向到`D:/tmp`或者我必须在 D 驱动器上重新安装 wamp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:48:28.040

找到方法，进入 php.ini 文件并将 c:/wamp/tmp 更改为 d:/wamp/tmp。

# ftp - Alfresco：在 ftp 中覆盖文件时增加文档版本

> ID：14118522
> 
> 赞同：1
> 
> 时间：2013-01-02T07:45:41.823
> 
> 标签：ftp, alfresco

我想在 ftp 中覆盖文件时增加次要文档版本。当我跟踪代码时，`ContentDiskDriver2.truncateFile()`适用于覆盖文件。在这个函数里面我`versionService`用来增加版本。以下代码写在 truncateFile() try {

```
 NodeRef nodeRef = getNodeForPath(tree, DriverContent.FILE_OPEN_PARAMS.getPath());
    System.out.println("Node Ref: " + nodeRef);

    // Increase minor version to file.
    Map<String, Serializable> versionProperties = new HashMap<String, Serializable>(2, 1.0f);
    versionProperties.put(Version.PROP_DESCRIPTION, "");
    versionProperties.put(VersionModel.PROP_VERSION_TYPE, VersionType.MINOR);

    VersionService versionService = (VersionService) applicationContext.getBean("versionService");
    versionService.createVersion(nodeRef, versionProperties);
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

但不幸的是我得到了这个错误。

```
2013-01-02 14:12:31,609  ERROR [org.alfresco.fileserver] [Sess_FTP3_192.168.1.166] Error from JLAN
 org.alfresco.error.AlfrescoRuntimeException: 00020073 Transaction must be active and synchronization is required: Thread[Sess_FTP3_192.168.1.166,5,FTPSessions]
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport.registerSynchronizations(AlfrescoTransactionSupport.java:467)
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport.getSynchronization(AlfrescoTransactionSupport.java:451)
    at org.alfresco.repo.transaction.AlfrescoTransactionSupport.getResource(AlfrescoTransactionSupport.java:244)
    at org.alfresco.repo.transaction.TransactionalResourceHelper.incrementCount(TransactionalResourceHelper.java:71)
    at org.alfresco.repo.policy.BehaviourFilterImpl.disableBehaviour(BehaviourFilterImpl.java:158)
    at org.alfresco.repo.version.Version2ServiceImpl.createVersion(Version2ServiceImpl.java:212)
    at org.alfresco.repo.version.Version2ServiceImpl.createVersion(Version2ServiceImpl.java:140)
    at org.alfresco.filesys.repo.ContentDiskDriver2.increaseVersion(ContentDiskDriver2.java:2937)
    at org.alfresco.filesys.repo.ContentDiskDriver2.truncateFile(ContentDiskDriver2.java:1652)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy97.truncateFile(Unknown Source)
    at org.alfresco.filesys.repo.NonTransactionalRuleContentDiskDriver.truncateFile(NonTransactionalRuleContentDiskDriver.java:480)
    at org.alfresco.filesys.repo.LegacyFileStateDriver.truncateFile(LegacyFileStateDriver.java:471)
    at org.alfresco.filesys.repo.BufferedContentDiskDriver.truncateFile(BufferedContentDiskDriver.java:532)
    at org.alfresco.jlan.ftp.FTPSrvSession.procStoreFile(FTPSrvSession.java:2262)
    at org.alfresco.jlan.ftp.FTPSrvSession.run(FTPSrvSession.java:4924)
    at java.lang.Thread.run(Thread.java:662) 
```

你能帮我解决一下**事务必须处于活动状态并且需要同步吗**

我找到了这个链接 [。Alfresco 存储库文档版本历史可以通过 CIFS/FTP 获得吗？](https://stackoverflow.com/questions/14083086/is-the-alfresco-repository-document-version-history-available-via-cifs-ftp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T08:16:06.720

您已被“小字母”与“大字母”户外服务所吸引

“小字母”服务是原始服务，通常仅在其他 Alfresco 低级服务中使用。“大信”服务是面向用户的包装服务，包括交易、审计、安全等。

对于您的情况，您需要使用 Big Letter 表格，因此请更改行

```
VersionService versionService = (VersionService) applicationContext.getBean("versionService"); 
```

到正确的：

```
VersionService versionService = (VersionService) applicationContext.getBean("VersionService"); 
```

您将获得一份带有事务、安全性等的 VersionService 副本，我认为这是您的情况所需要的。（请注意，bean 是使用大首字母而不是小字母获取的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:47:17.047

这是我找到的替代解决方案。明确使用事务。

```
 VersionService versionService = (VersionService) applicationContext.getBean("VersionService");
    TransactionService transactionService = (TransactionService) applicationContext.getBean("transactionService");

    UserTransaction tx = null;
    try {
        tx = transactionService.getUserTransaction();
        tx.begin();
        versionService.createVersion(nodeRef, versionProperties);
        tx.commit();
    } 
    catch (Exception e) 
    {
        if(tx != null)
        {
            try
            {
                tx.rollback();
            } catch (IllegalStateException e1) 
            {
                e1.printStackTrace();
            } catch (SecurityException e2) 
            {
                e2.printStackTrace();
            } catch (SystemException e3) 
            {
                e3.printStackTrace();
            }
        }
    } 
```

# django - 如何序列化二进制文件以用于芹菜任务

> ID：14118526
> 
> 赞同：11
> 
> 时间：2013-01-02T07:45:55.490
> 
> 标签：django, celery, binaryfiles, pickle

我最近在我的一个应用程序中集成了[celery](http://celeryproject.org/)（更具体地说是[django-celery ）。](http://pypi.python.org/pypi/django-celery)我在应用程序中有一个模型如下。

```
class UserUploadedFile(models.Model)
    original_file = models.FileField(upload_to='/uploads/')    
    txt = models.FileField(upload_to='/uploads/')
    pdf = models.FileField(upload_to='/uploads/')
    doc = models.FileField(upload_to='/uploads/')

    def convert_to_others(self):
        # Code to convert the original file to other formats 
```

现在，一旦用户上传文件，我想将原始文件转换为 txt、pdf 和 doc 格式。调用该`convert_to_others`方法是一个有点昂贵的过程，所以我计划使用 celery 异步执行它。所以我写了一个简单的芹菜任务如下。

```
@celery.task(default_retry_delay=bdev.settings.TASK_RETRY_DELAY)
def convert_ufile(file, request):
    """ 
    This task method would call a UserUploadedFile object's convert_to_others
    method to do the file conversions.

    The best way to call this task would be doing it asynchronously
    using apply_async method.
    """
    try:
        file.convert_to_others()
    except Exception, err:
        # If the task fails log the exception and retry in 30 secs
        log.LoggingMiddleware.log_exception(request, err)
        convert_ufile.retry(exc=err)
    return True 
```

然后调用任务如下：

```
ufile = get_object_or_404(models.UserUploadedFiles, pk=id)
tasks.convert_ufile.apply_async(args=[ufile, request]) 
```

现在，当`apply_async`调用该方法时，它会引发以下异常：

```
PicklingError: Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed 
```

我认为这是因为 celery（默认情况下）使用`pickle`库来序列化数据，而 pickle 无法序列化二进制文件。

### 问题

是否有任何其他序列化程序可以自行序列化二进制文件？如果不是，我如何使用默认`pickle`序列化程序序列化二进制文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T19:31:25.240

芹菜尝试腌制不支持腌制的数据是正确的。即使您能找到一种方法来序列化要发送到 celery 任务的数据，我也不会这样做。

向 celery 任务发送尽可能少的数据总是一个好主意，所以在你的情况下，我只会传递**UserUploadedFile**实例的 id。有了这个，你可以在 celery 任务中通过 id 获取你的对象并执行**convert_to_others()**。

另请注意，在执行任务之前，对象可能会更改其状态（甚至可能会被删除）。因此，在 celery 任务中获取对象比发送其完整副本更安全。

总而言之，只发送一个实例 id 并在任务中重新获取它会给你一些东西：

*   您向队列发送的数据更少。
*   您不必处理数据不一致问题。
*   在您的情况下，这实际上是可能的。:)

唯一的“缺点”是您需要执行一个额外的、廉价的 SELECT 查询来重新获取您的数据，与上述问题相比，这总体上看起来很划算，不是吗？

# iphone - UIImagePickerView 控制器不旋转

> ID：14118534
> 
> 赞同：0
> 
> 时间：2013-01-02T07:47:00.560
> 
> 标签：iphone, ios, uiimagepickercontroller, uiinterfaceorientation

单击按钮后，我将导航到源类型为但其不响应设备方向且始终处于纵向模式的**`UIImagePickerView`控制器。****`UIImagePickerViewcontrollerSourceTypePhotoLibrary`**我的应用程序支持 2 个方向，即纵向和纵向倒置。如何旋转两个方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:06:49.927

```
The UIImagePickerController class supports portrait mode only. This class is intended to be used as-is and does not support subclassing. 
```

这需要更多的工作，但您可以使用 AssetsLibrary 框架来访问图像列表并创建自己的图像选择器。

您可以按照此创建自己的选择器

[http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-framework/](http://www.icodeblog.com/2010/10/07/cloning-uiimagepickercontroller-using-the-assets-library-framework/)

# c#-4.0 - Crystal Reports 中的文本对齐

> ID：14118535
> 
> 赞同：0
> 
> 时间：2013-01-02T07:47:01.910
> 
> 标签：c#-4.0, crystal-reports, formatting

我正在开发一个水晶报表，数据也很好，但我无法格式化相同的字段，就像**评论**字段必须是**多行**但是当我在格式对象部分选择“可以增长”时，显示模糊.![在此处输入图像描述](../Images/9d6cd5b6896e7cfc8361fffe655e4fcd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:00:45.157

Can Grow 值为零表示显示将增长到多行，直到完全显示。

由于增长可能发生多行，您可以调整项目的宽度，使其不会与其他项目重叠。

你该怎么办：

1.  Set 可以将属性增长到零
2.  调整项目的大小（您为其设置了 cangrow 0），使其不会与下一列的项目重叠。

# backbone.js - 主干集合更新方法（bb 0.9.9）是否触发重置事件

> ID：14118539
> 
> 赞同：0
> 
> 时间：2013-01-02T07:47:20.920
> 
> 标签：backbone.js

还是它会触发另一个独特的事件？欢迎任何关于我自己如何解决这个问题的意见（除了搜索 stackoverflow 和阅读 bb 文档）。10 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:16:55.390

`Collection.update`似乎没有触发任何特殊事件。`add`和`remove`事件分别为添加和删除的模型触发。

了解 Backbone 工作原理的最佳方法是阅读带[注释的主干源代码](http://backbonejs.org/docs/backbone.html)。

# android - 设备中的位图加载

> ID：14118540
> 
> 赞同：1
> 
> 时间：2013-01-02T07:47:26.207
> 
> 标签：android, lazy-loading

在我的应用程序中，我使用了**延迟加载**技术。我参考[了本教程](https://github.com/thest1/LazyList/blob/master/src/com/fedorvlasov/lazylist/LazyAdapter.java)。在模拟器（android 2.1）图像正在加载，但在设备（android 2.3.4）图像没有加载。只有 android 图标正在加载。

我的getview代码：

```
if (convertView   == null) {
    //this should only ever run if you do not get a view back            
    LayoutInflater  inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView  = inflater.inflate(R.layout.homelistrow, null); 

    holder = new ViewHolder();
    image = (ImageView) convertView.findViewById(R.id.icon);
    holder.text = (TextView) convertView.findViewById(R.id.name_label);
    convertView.setTag(holder);         
} else { 
    holder = (ViewHolder) convertView.getTag();         
}
//       
imageLoader.DisplayImage(kickerimage[position], image);

// holder.image.setImageBitmap(bitmap);
//////       items=itemsarray[position];
         holder.text.setText(itemsarray[position]); 
```

我完全困惑为什么会在设备中发生这种情况。帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:08:12.160

这对我有用。试试这个 。

```
public View getView(int paramInt, View paramView, ViewGroup paramViewGroup)
  {

    View localView = ((LayoutInflater)this.topcouponpage.getSystemService("layout_inflater")).inflate(2130903044, null);
    String str = localOfferCategories.getImagelink();
    if (!str.trim().startsWith("http://"))
      str = "http://" + str;
    ImageView localImageView = (ImageView)localView.findViewById(2131099676);
    this.imgloader.DisplayImage(str, localImageView);

    return localView;
  }
} 
```

还要在清单文件中授予此权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:53:55.227

在加载图像之前测试您的互联网连接：

```
if (getConnectionState() == false)
    // ErrorHandling("No Internet Connection Found!! Please Try Later on with Internet Connection!");
else
    // perform further execution 
```

声明这个函数：

```
//To check the internet connection
    private boolean getConnectionState() {
        ConnectivityManager cm = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        Log.v("NetworkInfo","NetworkInfo = "+ni);
        if (ni == null)
            return false;
        else
            return true;
    } 
```

确保具有此权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

谢谢。

# java - MongoDB 通过 Java 存储 JSON 字符串

> ID：14118543
> 
> 赞同：3
> 
> 时间：2013-01-02T07:47:46.957
> 
> 标签：java, json, mongodb, bson

有多个这样的教程[，](http://www.mkyong.com/mongodb/java-mongodb-insert-a-document/)这[描述](http://supundharmarathne.wordpress.com/2012/09/02/simple-crud-operations-with-java-and-mongodb-part-1/)了使用返回 DBObject 的 JSON.parse 方法保存 JSON 数据。虽然它是保存 JSON 数据的非常简单和简短的方法，但我想知道为什么需要解析 JSON？我可以不直接将我的JSON字符串直接保存到Mongo而不解析，我看到mongo shell可以做到这一点。

我问这个的原因是因为我有成千上万的文档块，我可以通过不解析数据来节省时间！

简而言之，在某些驱动程序中是否有遵循表单的 java 方法

```
Collection coll = new Collection("mycollection");
coll.save("[{datakey1:dataval1},{datakey2:datavalue2},...]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:41:57.470

根据您的用例，如果您插入一个 DBObject 列表，它实际上会在 mongodb 中产生多个文档。这似乎是 MongoDB 的一个奇怪用例，它可以这样存储：

```
{
   id: 507f191e810c19729de860ea,
   value: '[[{"hpisymptoms":"of days in past 2 weeks depression free?"},{"hpisymptoms":"*"}]]'
} 
```

仅当您从未打算查询 json 数据时才应该这样做，这是 Mongo 擅长的。这听起来像是因为 json 数据存储在 RDBMS 字段中。

# android - 输入 Android IME 的 KeyEvent 行为

> ID：14118544
> 
> 赞同：1
> 
> 时间：2013-01-02T07:48:20.757
> 
> 标签：android, keyevent, ime

我有一个自定义实现的 IME，它在按下 ImageButtons 时发送 KeyEvents。当按下标有 Enter 的 ImageButton 时，将执行以下代码：

```
ic.sendKeyEvent(new KeyEvent(0,0,MotionEvent.ACTION_DOWN,KeyEvent.KEYCODE_ENTER,0,0,0,0,KeyEvent.FLAG_EDITOR_ACTION)); 
```

问题是当按下 Enter 时，底层应用程序的行为会有所不同。在消息中，提交的文本被发送，但在浏览器和可编辑字段中，最后输入的单词被突出显示，并弹出剪切和粘贴选项。

我希望 Enter 键的行为方式适用于“Go”、“Send”和“Next”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:05:49.403

我有一个类似的问题。

如果您想输入“DONE”和“NEXT”，请使用

```
long eventTime = SystemClock.uptimeMillis();
KeyEvent eventDOWN  = new KeyEvent(eventTime, eventTime,
 KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_ENTER, 0, 0,
 KeyCharacterMap.VIRTUAL_KEYBOARD, 0,
 KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE
 | KeyEvent.FLAG_EDITOR_ACTION);

KeyEvent eventUP = new KeyEvent(SystemClock.uptimeMillis(), eventTime,
 KeyEvent.ACTION_UP, KeyEvent.KEYCODE_ENTER, 0, 0,
 KeyCharacterMap.VIRTUAL_KEYBOARD, 0,
 KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE
 | KeyEvent.FLAG_EDITOR_ACTION); 
```

# ruby-on-rails - Rails：如何设计帮助用户做报告的数据结构？

> ID：14118550
> 
> 赞同：0
> 
> 时间：2013-01-02T07:49:01.153
> 
> 标签：ruby-on-rails, database

我的 Rails 应用程序有一个`User`模型和一个`Idea`模型。每个用户可以有很多想法，每个想法都属于一个用户（或没有）。用户使用 Idea 控制器的`claim`操作获取创意的所有权，并使用该操作发布创意`release`。

到目前为止，真的很简单。但我刚刚意识到我希望这样做更多，现在我不确定如何继续：基本上，我希望用户能够“报告”错误/无效想法的想法，以及注释说明报告的原因。

我还想跟踪有关声明想法的指标——一个想法在被标记为提交之前被声明了多长时间（它用于管理博客文章）等等。

在一个不相关的问题中，有人建议我`Claim`在我的应用程序中需要一个模型来进行这种复杂的跟踪。这对我来说很有意义，但我真的不确定该模型将如何构建以及如何工作。它会像日志吗？如果是这样，我将如何确定每个想法的当前想法状态是什么？

对此的任何见解都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:17:22.527

我认为，由于您需要记录所有用户操作，因此如果您保持报告和声明独立，则效果会更好。

所以，它可能看起来像

用户`has_many`想法

想法`has_many`声明

创意`has_many`报告

代码：

```
class User < ActiveRecord::Base
  attr_accessible :name
  has_many :idea
end

class Idea < ActiveRecord::Base
  attr_accessible :desc, :title
  belongs_to :user
  has_many :claim
  has_many :report
end

class Claim < ActiveRecord::Base
  attr_accessible :status
  belongs_to :idea
end

class Report < ActiveRecord::Base
  attr_accessible :reason
  belongs_to :idea
end 
```

此后，rails 迁移将添加时间戳列。您将能够计算状态变化等之间的时间差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:09:33.150

我不知道红宝石，但至于设计，

将想法报告为无效是否会取消它的资格？

如果没有，您可以有一个报告模型，在其中您将报告的想法与注释一起包含在内。在表示时，您可以在渲染帖子之前查看它。

# android - 将数据从活动传递到android中的类

> ID：14118552
> 
> 赞同：1
> 
> 时间：2013-01-02T07:49:15.020
> 
> 标签：android, android-intent, android-activity, android-gallery

我已经创建了活动，我想将该活动中的数据传递给扩展 Gallery 的类。我如何将数据从活动传递到类，因为 Intent 在这里不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:53:01.903

您可以创建然后访问该变量，`public static variable`也可以创建方法来获取第二个类中数据的值。 `getter``setter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:55:50.793

首先，阅读[有关](http://developer.android.com/reference/android/widget/Gallery.html)画廊小部件的信息。

> 此类在 API 级别 16 中已弃用。不再支持此小部件。其他水平滚动小部件包括支持库中的 Horizo​​ntalScrollView 和 ViewPager。

接下来，来回答你的问题。将您在类中的任何私有变量保持为私有，并有一个为您设置它们的方法（作为参数传递的值）。这些行为类似于 Java 中的常规 setter 方法。

在您创建的新类的实例上调用这些设置器。

# java - Android 与 Java 更新

> ID：14118553
> 
> 赞同：0
> 
> 时间：2013-01-02T07:49:17.637
> 
> 标签：java, android

我找不到这个问题，所以我想问：Android 的操作系统更新与 Java 更新的联系有多紧密？我目前正在开发最新版本的 Java（有时我会解决 Java 方面的问题，然后将其粘贴到 Android 中），我不想担心 Android 的 JVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:24:43.053

Android SDK 需要 Java 6 JDK。仅此一项就应该说它不使用 7（还）。[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# c# - 如何在 SolrNet 中对多个表执行索引/搜索

> ID：14118557
> 
> 赞同：0
> 
> 时间：2013-01-02T07:49:26.877
> 
> 标签：c#, solr, solrnet, querying

我正在使用 SolrNet 来索引/搜索一组表上的数据。

我有两个表类别和项目。

这两个表都有相同的字段，因此我有一个我派生的基本映射类形式。

```
[Serializable]
    [XmlRoot(ElementName = "SolrSearchEntity", Namespace = "")]
    [DataContract(Name = "SolrSearchEntity", Namespace = "")]
    public class SolrSearchEntity
    {
        [XmlElement(ElementName = "Id")]
        [DataMember(Name = "Id", IsRequired = true)]
        [SolrUniqueKey("id")]
        public string Id { get; set; }

        [XmlElement(ElementName = "Name")]
        [DataMember(Name = "Name", IsRequired = true)]
        [SolrField("name")]
        public string Name { get; set; }
    }

public class Category : SolrSearchEntity
    {        
    }

    public class Item : SolrSearchEntity
    {
    } 
```

用于索引类别数据的代码块

```
using (SolrBaseRepository.Instance<Category> repository = new SolrBaseRepository.Instance<Category>())
            {
                var output = ItemStoreDataManager.GetAllCategoryNames(dataAdapter);
                repository.Start();
                var solr = ServiceLocator.Current.GetInstance<ISolrOperations<Category>>();
                solr.AddRange(output);
                solr.Commit();
            } 
```

用于索引项目数据的代码块

```
using (SolrBaseRepository.Instance<Item> repository = new SolrBaseRepository.Instance<Item>())
                {
                    var output = ItemStoreDataManager.GetAllItemNames(dataAdapter);
                    repository.Start();
                    var solr = ServiceLocator.Current.GetInstance<ISolrOperations<Item>>();
                    solr.AddRange(output);
                    solr.Commit();
                } 
```

我的 Schema.xml 有

```
 <fields>
    <!-- declare fields of entity class -->
    <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" />
    <field name="name" type="text_general" indexed="true" stored="true" omitNorms="true"/>

    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="_version_" type="long" indexed="true" stored="true"/>

  </fields> 
```

查询 Category 中的数据

```
 var entities = ItemStoreManager<Category>.Search(keyword); which will internally execute this.

  new SolrBaseRepository.Instance<T>().Start();
  var solr = ServiceLocator.Current.GetInstance<ISolrOperations<T>>();
  var results = solr.Query(keyword); 
```

奇怪的是，我正在从**Item**表中获取记录。

我将如何告诉 SolrNet（搜索引擎）在我指定的类型中查找。

或者我首先正确索引？

请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:44:36.363

当您在将数据添加到索引并在客户端上基于已知类型进行查询时分离数据时，您将其全部存储在 Solr 中的相同模式中，并且没有指定任何方法来区分项目和 Solr 中的类别记录. 我建议您修改架构以包含一个类型字段，该字段可以只是一个简单的字符串，例如：

```
 <field name="type" type="string" indexed="true" stored="true" /> 
```

然后，您需要将类型字段添加到 SolrSearchEntity 基类，并在 Category 和 Item 类中进行适当的设置。类似于以下内容：

```
[Serializable]
[XmlRoot(ElementName = "SolrSearchEntity", Namespace = "")]
[DataContract(Name = "SolrSearchEntity", Namespace = "")]
public class SolrSearchEntity
{
    [XmlElement(ElementName = "Id")]
    [DataMember(Name = "Id", IsRequired = true)]
    [SolrUniqueKey("id")]
    public string Id { get; set; }

    [XmlElement(ElementName = "Name")]
    [DataMember(Name = "Name", IsRequired = true)]
    [SolrField("name")]
    public string Name { get; set; }

    [SolrField("type")]
    public string Type {get; set;}
}

public class Category : SolrSearchEntity
{        
    public Category()
    {
       Type = "Category";
    }
}

public class Item : SolrSearchEntity
{
    public Item()
    {
        Type = "Item";
    }
} 
```

然后，当您运行搜索时，如果您想按特定类型限制查询，您可以添加这样的过滤查询以仅搜索项目：

```
var entities = ItemStoreManager<Category>.Search(keyword); 
new SolrBaseRepository.Instance<T>().Start();
var solr = ServiceLocator.Current.GetInstance<ISolrOperations<T>>();
var options = new QueryOptions{ 
  FilterQueries = new ISolrQuery[] { new SolrQueryByField("type","Item")}};
var results = solr.Query(keyword, options); 
```

此外，请注意您的 id 值不会在数据库中重叠，因为这将导致您仅存储一个实体的一个实例（类别或项目，以最后索引为准）。

最后，我觉得您当前的索引策略是合理的，不推荐使用 DIH。IMO，使用 SolrNet 客户端库，您将拥有更多的控制权和灵活性。我过去曾遇到过数据导入处理程序的问题，发现使用 SolrNet 更容易管理和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:46:21.273

除了库克提到的建议，

在 SolrSearchEntity 中添加 GUID 字段

```
 [XmlElement(ElementName = "UId")]
 [DataMember(Name = "UId", IsRequired = true)]
 [SolrUniqueKey("uid")]
 public Guid UId { get; set; } 
```

在构造函数中初始化 Uid

```
public Item()
{
   Type = "Item";
   UId = Guid.NewGuid();
} 
```

schema.xml 中的更改

```
<fieldType name="uuid" class="solr.UUIDField" indexed="true" />

 <!-- unique field -->
<field name="uid" type="uuid" indexed="true" stored="true" />

<uniqueKey>uid</uniqueKey> 
```

现在索引不会重叠或不一致，搜索将缩小到指定的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:57:17.023

对于从数据库中索引多个表，我宁愿选择[Solr DIH](http://wiki.apache.org/solr/DataImportHandler)，因为它的灵活性而不是任何客户端库。

# python - web.py 上传错误

> ID：14118558
> 
> 赞同：0
> 
> 时间：2013-01-02T07:49:30.820
> 
> 标签：python, web.py, uploading, storage

所以我正在按照 web.py 上传和存储指南进行测试，但我一直收到错误消息，指出 [Errno 2] 没有这样的文件或目录：<帮助

这是我的代码

```
import web

urls = (
    '/hello', 'index',
    '/hello/upload', 'upload'
)
app = web.application(urls, globals()) # handels http request  that aks for urls 
# the base ells lpthw.web to use the templates/layout.html file as the base template for all the other templates
render = web.template.render('templates/', base="layout")
# must use port 127.0.0.1:5000
class index(object):

    def GET(self):
        return render.hello_form()

    def POST(self):
        form = web.input(name="Nobody", greet="Hello")
        greeting = "%s, %s" % (form.greet, form.name)
        return render.index(greeting = greeting)

class upload(object):

    def POST(self):
        x = web.input(files={})

        filedir = '/project/webtest/templates'  # directory were you want to save the file 
        if 'files' in x:  # check if the file -object is created
            filepath=x.files.filename.replace('\\','/') # replace the windows -style slashes with linux ones
            filename=filepath.split('/')[-1] #splits the and chooses the last part (the filename with extension
            fout = open(filedir +'/'+ filename,'w') # creates the file where the uploaded file should be stored
            fout.write(x.files.file.read()) #writes the uploaded file to the newly created file.            
            fout.close() #closes the file 
        else:
            return "Error no file" 

if __name__ == "__main__":
    app = web.application(urls, globals()) 
    app.run() 
```

帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:12:19.847

```
import web

urls = ('/upload', 'Upload')

class Upload:
def GET(self):
    web.header("Content-Type","text/html; charset=utf-8")
    return view.upload()
def POST(self):
    x = web.input(myfile={})
    filedir = '/path/where/you/want/to/save' # change this to the directory you want to store the file in.
    if 'myfile' in x: # to check if the file-object is created
        filepath=x.myfile.filename.replace('\\','/') 
        filename=filepath.split('/')[-1] 
        fout = open(filedir +'/'+ filename,'w') 
        fout.write(x.myfile.file.read()) # writes the uploaded file to the newly created file.
        fout.close() # closes the file, upload complete.
    raise web.seeother('/upload')

if __name__ == "__main__":
   app = web.application(urls, globals()) 
   app.run()

upload.html
<html>
 <head>
 <title>File upload</title>
 </head>
 <body>
 <form method="POST" enctype="multipart/form-data" action="">
  <input type="file" name="myfile" /><br/>
  <input type="submit" />
 </form>
 </body>
 </html> 
```

供您参考[http://webpy.org/cookbook/storeupload/](http://webpy.org/cookbook/storeupload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-08T13:35:33.327

我自己也遇到了同样的问题，并试图在这里问这个问题。但是没有人回答。

终于搞清楚是什么问题了，分享给大家！

这部分：`filedir = '/project/webtest/templates'`应该是绝对路径。

它应该是一个现有目录（至少在我的跟踪中它应该是一个现有目录，否则它会提示与您发布的相同的错误）！该文件不必令人兴奋，因为我们将通过复制上传的文件来创建它。

例如在我的 mac 中，它是`'/Users/J/pythonex/projects/gothonweb/docs'`，并且它是一个现有目录。如果它不是现有目录，您将收到相同的错误消息。

最后，最棘手的部分。我是我的 mac，上传的文件实际上存储在我的磁盘中的那个确切目录中。但在我重新启动取景器之前，我无法在取景器中看到它们。我不知道为什么会这样。但是对于我的电脑来说，就是这样。

# python - __slots__ 如何避免字典查找？

> ID：14118564
> 
> 赞同：15
> 
> 时间：2013-01-02T07:49:56.723
> 
> 标签：python, slots, python-internals

我听说`__slots__`通过避免字典查找使对象更快。我的困惑来自 Python 是一种动态语言。在静态语言中，我们`a.test`通过编译时优化来避免字典查找，以将索引保存在我们运行的指令中。

现在，在 Python 中，`a`可以很容易地成为具有字典或不同属性集的另一个对象。似乎我们仍然需要进行字典查找 - 唯一的区别似乎是我们只需要一个类的字典，而不是每个对象的字典。

有了这个理性，

1.  如何`__slots__`避免字典查找？
2.  插槽是否使访问对象更快？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T08:37:51.307

`__slots__`不会（显着）加快属性访问：

```
>>> class Foo(object):
...     __slots__ = ('spam',)
...     def __init__(self):
...         self.spam = 'eggs'
... 
>>> class Bar(object):
...     def __init__(self):
...         self.spam = 'eggs'
... 
>>> import timeit
>>> timeit.timeit('t.spam', 'from __main__ import Foo; t=Foo()')
0.07030296325683594
>>> timeit.timeit('t.spam', 'from __main__ import Bar; t=Bar()')
0.07646608352661133 
```

使用的目的`__slots__`是*节省内存*；`.__dict__`该类没有在实例上使用映射，而是为每个在中命名的属性具有[描述符对象](https://docs.python.org/3/howto/descriptor.html)`__slots__`，并且实例具有分配的属性，*无论*它们是否具有实际值：

```
>>> class Foo(object):
...     __slots__ = ('spam',)
... 
>>> dir(Foo())
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', 'spam']
>>> Foo().spam
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: spam
>>> Foo.spam
<member 'spam' of 'Foo' objects>
>>> type(Foo.spam)
<type 'member_descriptor'> 
```

所以python仍然需要查看类的每个属性访问的实例`Foo`（以找到描述符）。任何未知属性（例如`Foo.ham`）仍将导致 Python 通过类 MRO 搜索该属性，其中包括字典搜索。您仍然可以为*该类*分配其他属性：

```
>>> Foo.ham = 'eggs'
>>> dir(Foo)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', 'ham', 'spam']
>>> Foo().ham
'eggs' 
```

The slot descriptors are created when the class is created, and access memory assigned to each instance to store and retrieve a reference to the associated value (the same chunk of memory that tracks instance reference counts and a reference back to the class object). Without slots, a descriptor for `__dict__` is used accessing a reference to a `dict` object in the same manner.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T07:57:22.883

它可能会加速您实例化同一类的*许多*对象的程序，真正永远不会更改它们具有的属性，并且所有这些重复字典上的缓存未命中会带来真正的性能问题。

这实际上只是一般情况下的一个特例，在这种情况下，节省空间*有时也*可以节省时间，而缓存是限制因素。

因此，它可能不会使访问*一个*对象更快，但可能会加快访问*许多*相同类型的对象。

另请参阅[此问题](https://stackoverflow.com/q/472000/212858)。

# php - 具有索引元素的多维数组上的 RecursiveIteratorIterator

> ID：14118565
> 
> 赞同：0
> 
> 时间：2013-01-02T07:50:05.303
> 
> 标签：php, recursion, pdo, iterator, rows

我正在尝试遍历此数组并删除任何类型的排序：（1、2、3、4 等）

```
array( 0 => array ( 'col1' => 'value', 'col2' => 'value', 'col3' => 'value', 'col4' => value', 'col5' => 'value', 'col6' => array ( 'string' => array ( 'col7' => 'value' , 'col8' => 'value'), ), ), 

    1 => array ( 'col1' => 'value', 'col2' => 'value', 'col3' => 'value', 'col4' => array ( ), 'col5' => 'value', 'col6' => array ( 'string' => array ( ), ),  ),

     2 => array ( 'col1' => 'value', 'col2' => 'value', 'col3' => 'value', 'col4' => array ( ), 'col5' => 'value', 'col6' => array ( 'string' => array ( ), ), ), ) 
```

使用以下代码：

```
 foreach($json['orders']['cnr_output_ship_to_header'] as $header)
{

   $iterator_orders = new \IteratorIterator(new \ArrayIterator($header));
    $iterator_guests = new \RecursiveIteratorIterator(new\RecursiveArrayIterator($header['guests']['cnr_output_guest_detail']));
    $iterator_items = new \RecursiveIteratorIterator(new \RecursiveArrayIterator($header['items']['cnr_output_item_detail']));

$orders = (array)iterator_to_array($iterator_orders,true); 
$guests = (array)iterator_to_array($iterator_guests,true);
$items = (array)iterator_to_array($iterator_items,true);

pdo_insert('cnr_output_ship_to_header', (array)$orders);
pdo_insert('cnr_output_guest_detail', (array)$guests);
pdo_insert('cnr_output_item_detail', (array)$items);

} 
```

但它删除了元素 0 和 1。知道如何包含 [0] 和 [1] 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:43:49.803

我划伤了 JSON 并使用了 simpleXML，foreach 就像提到的那样工作。

# android - Google Play 应用评论和规范

> ID：14118566
> 
> 赞同：7
> 
> 时间：2013-01-02T07:50:12.557
> 
> 标签：android, google-play, review

我正在寻找有关 Google Play 上应用程序页面中显示的详细信息的一些信息。

1.  用户评论
    *   每次版本更改后，用户是否有机会对应用进行评分？
    *   评论是否有有效期？
    *   可以从应用总评分中删除垃圾评论吗？
    *   如果用户在更新后对应用程序进行评分 - 它会取代他之前的评论吗？
    *   我可以重置应用评分并删除所有用户评论吗？
2.  安装数
    *   Google Play 是否会为每个 Google 帐户计算一次下载？
    *   如果用户卸载并重新安装应用程序 - 它是否会再次计入总安装次数？
3.  应用在 Google Play 上发布后，我可以更改应用的名称/发布者吗？

谢谢您的帮助，

铅

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T08:25:34.967

> 每次版本更改后，用户是否有机会对应用进行评分？

用户可以随时更新和更改他们的评分，但他们不能对您的应用的每个版本都有唯一的评分。在任何时间点，一个用户只能有一个评分。

> 评论是否有有效期？

不。

> 可以从应用总评分中删除垃圾评论吗？

如果有足够多的用户将其标记为垃圾邮件或标记评论，Google 会将其删除。

> 如果用户在更新后对应用程序进行评分 - 它会取代他之前的评论吗？

是的

> 我可以重置应用评分并删除所有用户评论吗？

仅当您取消发布旧应用程序并以新包名称再次发布时，这才有可能。使用相同的包名称时，您无法删除旧评论和最近的评分。

> Google Play 是否会为每个 Google 帐户计算一次下载？

我对此不确定，也找不到任何文档，但我认为他们计算每个帐户的下载次数，而不是设备，因为我的付费应用程序之一的购买次数少于安装次数。

> 如果用户卸载并重新安装应用程序 - 它是否会再次计入总安装次数？

它可能会在一段时间内显示在总安装量中，但 Google Play 会调整这些指标，并且会在调整发生时删除重复计数并仅计算一次。

> 应用在 Google Play 上发布后，我可以更改应用的名称/发布者吗？

是的，是的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T08:22:11.943

我对您关于用户评论的 1 个问题没有任何想法，但我可以回答您接下来的 2 个问题。

对于 2\. 安装数量：

考虑到以下几点：

用户统计：

1.  用户安装总数 - 曾经安装过此应用的唯一用户总数。无论他们安装了多少个不同的设备，我们只计算一次安装。它包括后来卸载该应用程序的用户。
2.  活跃用户安装 - 当前至少在其中一台设备上安装了该应用的用户数量。
3.  每日用户安装 - 当天首次安装此应用的唯一用户数。
4.  每日用户卸载 - 当天从所有设备上卸载应用的唯一用户数。

设备统计：

1.  活动设备安装 - 当前安装应用程序的设备数量 - 它不包括卸载应用程序的任何设备。
2.  每日设备安装量 - 当天首次安装应用程序的新设备数量。
3.  每日设备卸载量 - 过去一天卸载应用程序的唯一设备数量。
4.  每日设备升级 - 过去一天从旧版本升级到最新版本应用程序的唯一设备数量。

第三个问题：

您可以在开发者控制台上更改任何应用程序的信息，包名称除外。但是在 Google Play Store 上更新需要一些时间。

# java - 如何使用谷歌应用引擎将上传的文件作为servlet中的blob

> ID：14118571
> 
> 赞同：0
> 
> 时间：2013-01-02T07:50:48.517
> 
> 标签：java, google-app-engine

我可以使用以下代码将文件作为 blob 上传，

```
<form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
<input type="file" name="myFile">
<input type="submit" value="Submit">
</form> 
```

但在我的情况下，我使用[Apache Common File Uploader](http://commons.apache.org/fileupload/)上传文件。所以我的表单动作如下，

```
<form action="/upload" method="post" enctype="multipart/form-data"> 
```

现在在我的 servlet 中将文件作为 InputStream 获取。如果我想将文件转换为同一个 servlet 文件中的 blob，我该如何转换它。请给我一个想法。

**更新**

我尝试使用[Writing files to blob store](https://developers.google.com/appengine/docs/java/blobstore/#Java_Writing_files_to_the_Blobstore) 我的代码如下，

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.createNewBlobFile(mime,fileName);
boolean lock = true;
FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
byte[] b1 = new byte[BUFFER_SIZE];
int readBytes1 = is.read(b1, 0, BUFFER_SIZE);
while (readBytes1 != -1) {
writeChannel.write(ByteBuffer.wrap(b1, 0, BUFFER_SIZE));} 
```

现在我可以在应用引擎中上传文件，它存储 blob 值，但我无法查看 blob 值。当我使用`<%= blobstoreService.createUploadUrl("/upload") %>`这一行时，我的应用程序引擎向我显示“查看 Blob”选项，但现在它不存在。此外，当我使用 Blob 列表查看文件时，它没有显示并显示“0”字节。我认为它只存储 blob 密钥而不是文件。请给我一个解决它的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:50:15.297

有两种方法可以做到这一点：

1.  使用[提供的 blobstore 上传功能](https://developers.google.com/appengine/docs/java/blobstore/#Java_Uploading_a_blob)：您的客户端调用服务器，该服务器使用一次性上传 url（通过创建`blobstoreService.createUploadUrl("/upload")`）进行回复。然后，您可以在 Apache Common File Uploader 中一次性使用此 URL。

2.  在您的代码中处理上传：[创建一个多部分处理程序](https://developers.google.com/appengine/kb/java#fileforms)，然后[通过 Files API 以编程方式将数据保存到 blobstore](https://developers.google.com/appengine/docs/java/blobstore/#Java_Writing_files_to_the_Blobstore)。

请注意，选项 2\. 属于标准 GAE 32Mb 请求/响应大小限制。选项 1\. 具有 2Gb 文件上传限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:56:53.040

做这样的事情：

```
 DiskFileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);
        upload.setSizeMax(maxPostSize);

        for (FileItemIterator it = upload.getItemIterator(request); it.hasNext();) {
            FileItemStream item = it.next();
            final byte[] fileData = IOUtils.toByteArray(item.openStream());

            // store data

        } 
```

现在将 存储`fileData`在数据存储中。确保您使用 . 检查是否`item`是表单字段`item.isFormField()`。

或者查看[Streaming API](http://commons.apache.org/fileupload/streaming.html)。

将文件存储在 Blobstore 中是这样完成的[，](https://developers.google.com/appengine/docs/java/blobstore/overview#Java_Uploading_a_blob)假设您有表单字段`<input type="file" name="myFile">`：

```
Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(request);
BlobKey blobKey = blobs.get("myFile"); 
```

# regex - 正则表达式查找所有没有“{”的“if”语句

> ID：14118572
> 
> 赞同：0
> 
> 时间：2013-01-02T07:50:49.180
> 
> 标签：regex

我在用`(if\()(.*)(?!\{)`

似乎没有工作...

if 类型的示例：

> `if( ( Collection.containsKey( primaryKeyValue ) ) ) {`

我也想排除`else if`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:58:38.503

没有范围的`if`a 需要由 a 终止`;`。因此，您可以检查在 a`;`之后是否有 a`if`之前有 a `{`。这个正则表达式应该这样做：

```
(if[^{;]*;) 
```

请注意，这需要多行正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:28:29.407

此正则表达式匹配（大部分时间）以不使用`if`结尾的语句：`;``{`

```
\bif\s*\([^\{]+; 
```

（`\b`是单词边界，以确保 if 是单独的，而不是像 zif 这样的另一个单词的一部分）。

然而，这个正则表达式并不可靠。实际上，*任何*正则表达式解决方案在这里都不能 100% 可靠，因为您匹配的字符可以出现在`if`条件内的字符串中。

考虑这个例子 - 它不会通过上面的正则表达式，但按照你的规则显然没问题：

```
if (s.equals(";{;};")) { t="({;})"; } 
```

它会传递这个例子，你的规则是错误的：

```
if (s.equals("{;}")) t="({;})"; 
```

如果您想在这里获得坚如磐石的性能，您必须编写自己的代码解析器。

# android - 设备重启后出现 ResourceNotFoundException

> ID：14118576
> 
> 赞同：2
> 
> 时间：2013-01-02T07:51:03.540
> 
> 标签：android, android-resources, reboot, bootcompleted

我的应用程序中有 Boot Completed Receiver，在 Reboot 完成后，在我的 Boot Receiver 中我正在启动一个 Activity。因为我在设置布局时遇到了 ResourceNotFoundException。

```
setContentView(R.layout.activity_home);//getting error of resource not found on this line 
```

我不知道原因，但显然是因为它无法在我的应用程序中找到布局或 R。有人对此有任何想法吗？请指导我解决此问题。

**编辑 - 我发现如果我在我的应用程序尝试加载之前解锁屏幕，那么它不会有任何问题。仅当模拟器屏幕被锁定并且我在我的应用程序启动后解锁它时才会出现问题。那么会发生什么，它向我显示了您的应用程序不幸崩溃的消息。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:55:53.357

解决了这个问题。这是因为在我的情况下，我在我的应用程序中只使用横向布局，并且我已经在 layout-land 文件夹中定义了所有布局。因此，它无法找到布局。转移了布局文件夹内的所有布局，现在可以正常工作了。谢谢大家的支持。

# c# - 无法保存 Excel 文件

> ID：14118577
> 
> 赞同：0
> 
> 时间：2013-01-02T07:51:06.410
> 
> 标签：c#, winforms, visual-studio-2010

我正在尝试使用窗口形式生成 excel 文件。尝试保存 Excel 时出现错误。

从按钮调用方法

```
 ExportToExcel(dtResult, "C:\\Excel/test.xls"); 
```

生成Excel的代码

```
public void ExportToExcel( DataTable Tbl, string ExcelFilePath = null)
        {
            try
            {
                if (Tbl == null || Tbl.Columns.Count == 0)
                    throw new Exception("ExportToExcel: Null or empty input table!\n");

                // load excel, and create a new workbook
                Excel.Application excelApp = new Excel.Application();
                excelApp.Workbooks.Add();

                // single worksheet
                Excel._Worksheet workSheet = excelApp.ActiveSheet;

                // column headings
                for (int i = 0; i < Tbl.Columns.Count; i++)
                {
                    workSheet.Cells[1, (i + 1)] = Tbl.Columns[i].ColumnName;
                }

                // rows
                for (int i = 0; i < Tbl.Rows.Count; i++)
                {
                    // to do: format datetime values before printing
                    for (int j = 0; j < Tbl.Columns.Count; j++)
                    {
                        workSheet.Cells[(i + 2), (j + 1)] = Tbl.Rows[i][j];
                    }
                }

                // check fielpath
                if (ExcelFilePath != null && ExcelFilePath != "")
                {
                    try
                    {
                        workSheet.SaveAs(ExcelFilePath); //throws error here
                        excelApp.Quit();
                        MessageBox.Show("Excel file saved!");
                    }
                    catch (Exception ex)
                    {
                        throw new Exception("ExportToExcel: Excel file could not be saved! Check filepath.\n"
                            + ex.Message);
                    }
                }
                else    // no filepath is given
                {
                    excelApp.Visible = true;
                }
            }
            catch (Exception ex)
            {
                throw new Exception("ExportToExcel: \n" + ex.Message);
            }
        } 
```

错误

```
System.Exception was unhandled
  Message=ExportToExcel: 
ExportToExcel: Excel file could not be saved! Check filepath.
Microsoft Excel cannot access the file 'C:\//5D95C000'. There are several possible reasons:

• The file name or path does not exist.
• The file is being used by another program.
• The workbook you are trying to save has the same name as a currently open workbook.
  Source=Report
  StackTrace:
       at Report.Form1.ExportToExcel(DataTable Tbl, String ExcelFilePath) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 84
       at Report.Form1.button1_Click(Object sender, EventArgs e) in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Form1.cs:line 29
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Report.Program.Main() in C:\SMARTAG_PROJECT\SUREREACH\EXCEL\Report\Report\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:17:48.753

为了保存您的文件，您需要确保在文件路径的末尾有一个文件扩展名。

您的方法中的文件路径`ExportToExcel(dtResult, "C:\\Excel/test.xls");`不正确还确保您正确释放 excelApp 对象

而不是`excelApp.Quit();`用这样的东西替换它

```
 System.Runtime.InteropServices.Marshal.ReleaseComObject( excelApp ); 
```

# c++ - 定制“::operator new”是否需要用于标准容器的特殊分配器？

> ID：14118580
> 
> 赞同：4
> 
> 时间：2013-01-02T07:51:14.113
> 
> 标签：c++, memory-management, stl

我编写了一个内存分配器来解决 C++ (mingw) 中默认内存分配器的速度问题。

为此，我重载了全局 new 和 delete。我通过的所有请求都正确分配了正确大小的内存，但我仍然遇到分段错误。这些错误似乎与向量的使用有关。

我假设这些向量将被 new 和 delete 的全局覆盖所覆盖，但我可能错了。所以我要问的是我是否需要一个 stl 分配器来处理我的内存分配器，或者使用我忽略的全局 new 和 delete 是否可能存在其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T08:15:29.640

> 我假设这些向量将被 new 和 delete 的全局覆盖所覆盖，但我可能错了。所以我要问的是我是否需要一个 stl 分配器来处理我的内存分配器，或者使用我忽略的全局 new 和 delete 是否可能存在其他问题？

C++ 标准（这里来自 C++11）说`std::allocator`（用于标准容器的默认分配器）：

> (§20.6.9/1) 备注：存储是通过调用 ::operator new(std::size_t) (18.6.1) 获得的，但未指定何时或多久调用此函数。[...]

因此，您没有实现与向量一起使用的特殊分配器类这一事实不是问题。问题可能是由于您对全局运算符本身的定义有问题，或者可能是您使用向量的方式有问题。建议的后续步骤是：

*   `::operator new`未替换时检查代码是否有效
*   使用调试器获取崩溃的堆栈跟踪并分析该点的堆栈以获取有关崩溃涉及哪些函数、该点的局部变量的值是什么等的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:58:12.870

我相信需要实施[STL 分配器](http://www.codeproject.com/Articles/4795/C-Standard-Allocator-An-Introduction-and-Implement)`vector`来控制分配

# asp.net - 跨域 [??] Facebook 登录会话

> ID：14118585
> 
> 赞同：1
> 
> 时间：2013-01-02T07:51:29.397
> 
> 标签：asp.net, facebook, facebook-graph-api, facebook-ios-sdk

我正在构建一个 Web 应用程序，其中包括：

1.  企业网站
2.  iPhone 应用程序

当一个新用户注册时，我想导入他的 FaceBook 头像，以下是用例：

1.  用户使用 iPhone 应用程序登录 FaceBook（FaceBook 会话在 iPhone 设备上创建）
2.  用户正在企业网站上注册
3.  企业网站使用 Facebook API 导入用户 facebook 头像<

考虑到上述用例，用户已使用 SmartPhone 应用程序（而不是使用企业网站）登录。是否可以在 WebSite 后端使用 SmartPhone 的 FaceBook 登录会话来导入用户的头像，而无需通过 WebSite 应用程序直接登录？这个用例可能吗？没有任何安全限制吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:56:47.773

iPhone 应用程序将收到一个长期存在的访问令牌，只要 iPhone 应用程序和网站在 Facebook 上是同一个“应用程序”，就应该可以将其发送回服务器并从那里使用它来检索头像。

我能看到的唯一问题是，如果用户撤销权限，网站将无法要求用户提供权限。可能更容易的是从 iPhone 应用程序中检索个人资料图片，然后将其发送回服务器。

# javascript - 第三方 cookie 未存储在 IE 9.0 中

> ID：14118586
> 
> 赞同：1
> 
> 时间：2013-01-02T07:51:39.087
> 
> 标签：javascript, internet-explorer, cookies, xss

我正在使用 xss 并将参数从 domain1.com 发送到 domain2.com

就像是`i.src='domain2.com/xss.php?parameter=value'`

但是，当 xss.php 尝试为（self）domain2.com 本身存储 cookie 时，它​​不会存储在 Internet Explorer（9.0 版）中。在其他浏览器中工作。有没有办法解决这个问题？

在 domain1.com/index.php

```
<script type="text/javascript" >
    i.src='domain2.com/xss.php?p=value';
</script> 
```

在 domain2.com/xss.php

```
$val = $_GET['p'];
setcookie('uid', $val, time() + 60*60*24*30, '/', 'domain2.com'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-28T13:16:08.740

在 IE 的隐私设置中，如果您设置为“中”，它会打开“限制保存可用于在未经您的默示同意的情况下与您联系的信息的第一方 cookie” - 如果此选项为**ON**，则不会存储 cookie。否则，cookie 将被存储。

# java - 如何检查确保数组不包含两次相同的元素

> ID：14118587
> 
> 赞同：1
> 
> 时间：2013-01-02T07:51:48.587
> 
> 标签：java

我有一个循环，它将随机生成的整数分配到一个数组中。我需要一种方法来确保相同的整数不会两次输入到数组中。

我认为在整个循环中创建一个循环会起作用，但我不确定在这里执行什么。

```
int wwe[] = new int[9];
for(int i = 0; i < 9 ; i++){
    int randomIndex = generator.nextInt(wwe.length);
    wwe[i] = randomIndex;

    System.out.println(wwe[i]);
    System.out.println("########");
    for(int j = 0; j < 9; j++){
        System.out.println("This is the inner element " + wwe[j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T07:52:32.790

如果要强制执行唯一值，请使用针对此类行为的数据结构，例如[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)。[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)或[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)可以完美运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:05:04.513

类似于以下内容的内容应该可以满足您的要求。
它使用 HashSet 来实现唯一元素。

```
 Set<Integer> sint = new HashSet<>();
    Random random = new Random();

    while ( sint.size() < 9){
        sint.add(random.nextInt());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:08:07.423

你实际上是在寻找洗牌你的阵列。

请注意，您真正要寻找的是找到数组的随机顺序，这称为[*permutation*](http://en.wikipedia.org/wiki/Random_permutation)。

在 java 中，可以简单地使用带有**[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)**.
如果您希望自己实现它 - 使用[**fisher yates shuffle**](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，它很容易实现。

由于其他答案已经显示了如何使用 Collections.shuffle() 来做到这一点 - 这是一个简单的实现 + Fisher yates shuffle 的示例，不需要将原始数组转换为列表。

```
private static void swap (int[] arr, int i1, int i2) {
    int temp = arr[i1];
    arr[i1] = arr[i2];
    arr[i2] = temp;
}
private static void shuffle(int[] arr, Random r) { 
    for (int i =0; i < arr.length; i++) {
        int x = r.nextInt(arr.length - i) + i;
        swap(arr,i,x);
    }
}
public static void main(String... args) throws Exception {
    int[] arr = new int[] {1 , 5, 6, 3, 0, 11,2,9 };
    shuffle(arr, new Random());
    System.out.println(Arrays.toString(arr));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:08:40.123

例如，您可以使用`Collections.shuffle`

```
public static void main(String[] args) {
    List<Integer> a = new ArrayList<>(9);
    for (int i = 0; i < 9; i++) {
      a.add(i);
    }
    Collections.shuffle(a);
    System.out.println(a);
  } 
```

# android - 更改 SQLOpenHelper 以便从资产中读取

> ID：14118591
> 
> 赞同：0
> 
> 时间：2013-01-02T07:52:08.410
> 
> 标签：android, database, sqlite, listview, assets

这是我的 SQLOpenHelper 的代码，

```
public class ContactsDB extends SQLiteOpenHelper{

    /** Database name */
    private static String DBNAME = "sqlspinnersmsdemo";

    /** Version number of the database */
    private static int VERSION = 1;

    /** Field 1 of the table contacts, which is the primary key */
    public static final String KEY_ROW_ID = "_id";

    /** Field 2 of the table contacts, stores the contact name */
    public static final String KEY_NAME = "name";

    /** Field 3 of the table contacts, stores the phone number of the contact */
    public static final String KEY_PHONE = "phone";

    /** A constant, stores the the table name */
    private static final String DATABASE_TABLE = "contacts";

    /** An instance variable for SQLiteDatabase */
    private SQLiteDatabase mDB;  

    /** Constructor */
    public ContactsDB(Context context) {
        super(context, DBNAME, null, VERSION);  
        this.mDB = getWritableDatabase();
    }

    /** This is a callback method, invoked when the method getReadableDatabase() / getWritableDatabase() is called 
      * provided the database does not exists 
    * */
    @Override
    public void onCreate(SQLiteDatabase db) {
        String sql =    "create table contacts (_id integer primary key autoincrement , "
                        + " name text not null , phone text not null ) " ;      
        db.execSQL(sql);
    }

    /** Inserts a new contact to the table contacts */
    public long insert(ContentValues contentValues){
        long rowID = mDB.insert(DATABASE_TABLE, null, contentValues);
        return rowID;

    }

    /** Updates a contact */
    public int update(ContentValues contentValues,String contactID){
        int cnt = mDB.update(DATABASE_TABLE, contentValues, "_id=" + contactID, null);
        return cnt;
    }

    /** Deletes a contact from the table */
    public int del(String contactID){
        int cnt = mDB.delete(DATABASE_TABLE, "_id="+contactID, null);       
        return cnt;
    }

    /** Returns all the contacts in the table */
    public Cursor getAllContacts(){
        return mDB.query(DATABASE_TABLE, new String[] { KEY_ROW_ID,  KEY_NAME , KEY_PHONE } , null, null, null, null, KEY_NAME + " asc ");
    }

    /** Returns a contact by passing its id */
    public Cursor getContactByID(String contactID){
        return mDB.query(DATABASE_TABLE, new String[] { KEY_ROW_ID,  KEY_NAME , KEY_PHONE } , "_ID="+contactID, null, null, null, KEY_NAME + " asc ");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

我想以某种方式对其进行更改，以便从资产中读取我的数据库，而不是第一次创建它。我该如何处理？我建议的代码是这样的，但我不知道把它放在哪里！

```
public ContactDB(Context context, String databaseName) {
        super(context, databaseName, null, 1);
        this.context = context;

        String packageName = context.getPackageName();
        DB_PATH = String.format("//data//data//%s//databases//", packageName);
        DB_NAME = databaseName;
        openDataBase();
    }

public SQLiteDatabase openDataBase() throws SQLException {
        String path = DB_PATH + DB_NAME;
        if (database == null) {
            createDataBase();
            database = SQLiteDatabase.openDatabase(path, null,
                SQLiteDatabase.OPEN_READWRITE);
        }
        return database;
    } 
```

如果你能帮助我，我会很高兴的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:06:44.573

这是所需类的工作代码：

```
public class ContactsDB extends SQLiteOpenHelper {  
public static String DB_PATH = "/data/data/com.example.test/databases/";  
public static String DB_NAME = "database";  
public static SQLiteDatabase mDataBase;  
private final Context mContext;  
public DataBaseManager(Context context)throws IOException{  
super(context,DB_NAME,null,DATABASE_VERSION);  
this.mContext=context;

boolean dbexist=checkDataBase();
if(dbexist){
openDataBase();
}else{
System.out.println("Database does not exist");
createDataBase();
}
public void createDataBase() throws IOException {

boolean dbExist = checkDataBase();
SQLiteDatabase db_read= null;

if(dbExist){
// do nothing - database already exist
}else{
db_read=this.getReadableDatabase();
db_read.close();

try {
copyDataBase();
}catch(IOException e)
{
e.printStackTrace();
}
}
}
}  
public boolean checkDataBase() {

boolean checkdb=false;

try{
String myPath = DB_PATH + DB_NAME;
File dbfile=new File(myPath);
checkdb=dbfile.exists();

}catch (SQLiteException e){
throw new Error("Database does not exist");
}

return checkdb;
}  
public void copyDataBase() throws IOException {  
InputStream myInput = mContext.getAssets().open(DB_NAME);  
String outFileName = DB_PATH + DB_NAME;  
OutputStream myOutput = new FileOutputStream(outFileName);  
byte[] buffer = new byte[1024];
int length;
while((length=myInput.read(buffer))>0){
myOutput.write(buffer,0,length);
}

myOutput.flush();
myOutput.close();
myInput.close();
}  

public void openDataBase() throws SQLException {

String myPath = DB_PATH + DB_NAME;
mDataBase = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
} 
```

创建 ContactsDB 类的实例以使其正常工作。;)

# javascript - 向此推荐滑块添加动画

> ID：14118594
> 
> 赞同：6
> 
> 时间：2013-01-02T07:52:18.377
> 
> 标签：javascript, jquery, css

我已经使用 CSS3 创建了一个滑块来显示我的推荐。现在我需要使用 Jquery 向这个滑块添加一些动画。但我不知道如何在这个滑块上使用 Jquery .. 什么是合适的插件。所以任何人都可以告诉我如何向这个滑块添加动画？

任何想法都非常感谢。

谢谢你。

这是滑块代码的链接：jsfiddle.net/XJVYj/82

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:32:46.620

我认为很难找到与您的代码完全匹配的插件。但我可以为你编写 jQuery 代码。但是我会有两个问题。

1.  我可以更改多少 CSS？还是应该在没有激活 js 的情况下仍然可以工作？
2.  您将来是否会使用 3 个项目？或者你想动态改变幻灯片的数量？

**// 编辑**

好的，现在可以了。我知道它不是很优雅，但我不想更改太多代码。所以我只需要编辑你的两个 CSS 选择器（我把旧的注释掉了）。您还想注意，使用此解决方案，您的旧方法在禁用 javascript 时仍然有效。jQuery 代码如下...

```
$("div.one").css({"left":0, "opacity":1});
$("div.two").css({"left":300, "opacity":1});
$("div.three").css({"left":600, "opacity":1});

$("input#first").click(function(){
    $("div.one").animate({left:0},600);
    $("div.two").animate({left:300},600);
    $("div.three").animate({left:600},600);
});

$("input#second").click(function(){
    $("div.one").animate({left:-300},600);
    $("div.two").animate({left:0},600);
    $("div.three").animate({left:300},600);
});

$("input#third").click(function(){
    $("div.one").animate({left:-600},600);
    $("div.two").animate({left:-300},600);
    $("div.three").animate({left:0},600);
});​ 
```

[jsfiddle.net/mYhEV/2/](http://jsfiddle.net/mYhEV/2/)

希望能帮助到你。

PS：对于更清洁的解决方案，您必须重新考虑一下。一种方法是将所有滑块放在一个包装器中，然后只移动这个包装器而不是移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:25:52.923

脚本文件中确实有文档，其中包含您可以使用的选项：

```
$.tiny.carousel = {
        options: {  
            start: 1, // where should the carousel start?
            display: 1, // how many blocks do you want to move at 1 time?
            axis: 'x', // vertical or horizontal scroller? ( x || y ).
            controls: true, // show left and right navigation buttons.
            pager: false, // is there a page number navigation present?
            interval: false, // move to another block on intervals.
            intervaltime: 3000, // interval time in milliseconds.
            rewind: false, // If interval is true and rewind is true it will play in reverse if the last slide is reached.
            animation: true, // false is instant, true is animate.
            duration: 1000, // how fast must the animation move in ms?
            callback: null // function that executes after every move.
        }
    }; 
```

特别是： `animation: true, // false is instant, true is animate`。

当您调用元素上的滑块时，尝试将动画设置为 true（您没有提供脚本代码，因此我无法为您编辑它。）

```
$('YOUR_SLIDERr').tinycarousel({ animation: true });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:21:02.350

尝试使用这些：

1.  [弹性滑块](http://www.woothemes.com/flexslider/)
2.  [时间轴](http://www.csslab.cl/2011/08/18/jquery-timelinr/)
3.  [智能画廊](http://www.egrappler.com/smart-image-gallery-with-twelve-transition-effects-smart-gallery/)
4.  [掠夺者](http://thiagosf.net/projects/jquery/skitter/)

# macos - 在 RAD Studio XE2 delphi 中获取 OSX 的 KeyStrokes？

> ID：14118597
> 
> 赞同：1
> 
> 时间：2013-01-02T07:52:28.370
> 
> 标签：macos, delphi, delphi-xe2, keylogger

我想在 RAD studio xe2 中制作一个 Fire Monkey 应用程序，该应用程序将为 OSX 节省击键。我已经阅读了用于此类开发的 CGEvent 或 Apple Script。在 RAD Studio XE2 中是否可能？请指导...

# ios - 在两个角度之间旋转（固定结束）具有动画的 imageView

> ID：14118599
> 
> 赞同：1
> 
> 时间：2013-01-02T07:52:36.467
> 
> 标签：ios, animation, uiimageview, rotation

嗨，我正在开发一个应用程序，它需要两个角度之间的图像动画。即从 0-90 度，然后在图像达到 0 度后 90-0 度，动画必须停止。

我正在使用以下代码，它仅提供 0-90 的动画，但我还需要使用 90 的动画将图像设置为 0。

```
 [UIView animateWithDuration: 0.5f
                     delay: 0.0f
                   options: options
                animations: ^{
                   self.imageToMove.transform = CGAffineTransformRotate(imageToMove.transform, M_PI / 2);
                }
                completion: ^(BOOL finished) {
                   if (finished) {
                         // if flag still set, keep spinning with constant speed
                         [self spinWithOptions: UIViewAnimationOptionCurveLinear];
                      } 
                   }
                }]; 
```

任何帮助请......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:48:02.880

通过更改“RADIANS”的值来试试这个

```
 #define RADIANS(degrees) ((degrees * M_PI) / 180.0)

//- (void)startWobble 

-(IBAction)start:(id)sender

{

    itemView.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-1));

    [UIView animateWithDuration:0.15 delay:0.0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse)

                     animations:^ {

                         itemView.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(1));

                     }

                     completion:NULL

     ];

}

//- (void)stopWobble 

-(IBAction)end:(id)sender

{

    [UIView animateWithDuration:0.25

                          delay:0.0 

                        options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveLinear)

                     animations:^ {

                         itemView.transform = CGAffineTransformIdentity;

                     }

                     completion:NULL

     ];

} 
```

# sql - 从日期时间列中仅减去时间

> ID：14118600
> 
> 赞同：4
> 
> 时间：2013-01-02T07:52:51.023
> 
> 标签：sql, sql-server, sql-server-2005

我有一个表的两列作为`@ABC as DateTime`和`@xyz as DateTime`- 数据类型。

我只想减去时间，我正在尝试这样：

对于`ABC = 21/02/2012 6:10:00 PM`和`XYZ = 01/01/2001 12:00:00 AM`-> 第一行。

```
CONVERT(varchar(10), dbo.checkingtime.ABC – dbo.checkingtime.XYZ, 108) 
```

我得到的结果是`18:10`，但我`05:50`只想要小时和分钟的结果。

可能吗 ？? ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:19:37.920

这是你想要的东西。这是内置功能，但我建议您构建自己的功能。

```
DATEDIFF ( datepart , startdate , enddate ) 
```

请注意，您需要在同一天“屏蔽”开始和结束日期以获得您想要的结果（这就是时差）。结果将以分钟为单位，但您可以轻松地将其格式化为小时：分钟。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:50:01.693

这是我发现的一个很好的例子：

```
Select start_date, end_date, time_diff,
   EXTRACT(DAY FROM time_diff) days,
   EXTRACT(HOUR FROM time_diff) hours,
   EXTRACT(MINUTE FROM time_diff) minutes,
   EXTRACT(SECOND FROM time_diff) seconds
From
(
Select start_date, end_date, end_date - start_date time_diff
From
(
Select CAST(to_date('21/02/2012 06:10:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP)  end_date
 , CAST(to_date('01/01/2012 12:00:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP) start_date
From dual
))
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:36:35.923

这会做，

```
select right(date2-date1,7) as time from table1 
```

结果：

```
TIME
5:50AM 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!3/dddf4/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:22:28.857

您可以尝试这样的功能：

```
CREATE FUNCTION GetTimeDifference
(
@FirstDate datetime,
@SecondDate datetime
)
RETURNS varchar(10)
AS
BEGIN
DECLARE @Difference INT
DECLARE @FirstTimeInMin INT
DECLARE @SecondTimeInMin INT

SELECT @FirstTimeInMin = 
(DATEPART(hour,@FirstDate) * 60 + DATEPART(minute,@FirstDate))
SELECT @SecondTimeInMin =
(DATEPART(hour,@SecondDate) * 60 + DATEPART(minute,@SecondDate))

IF @FirstTimeInMin = 0
SET @FirstTimeInMin = 24 * 60

IF @SecondTimeInMin = 0
SET @SecondTimeInMin = 24 * 60

SET @Difference = @FirstTimeInMin - @SecondTimeInMin

IF(@Difference < 0)
SET @Difference = @Difference * -1

RETURN RIGHT('0' + CONVERT(varchar(10), @Difference / 60), 2)
 + ':' + 
RIGHT('0' + CONVERT(varchar(10), @Difference - (@Difference / 60) * 60 ), 2)

END
GO 
```

你可以像这样使用它：

```
SELECT dbo.GetTimeDifference('02/02/2012 6:10:00 PM','01/01/2001 12:00:00 AM') 
```

结果应该是 05:50

# ios5 - presentOpenInMenuFromRect 的第一个参数是什么意思？

> ID：14118602
> 
> 赞同：2
> 
> 时间：2013-01-02T07:53:04.787
> 
> 标签：ios5

```
UIDocumentInteractionController *documentController;

-(void)openDocumentIn

{

    NSString *filepath = [[NSBundle mainBundle]pathForResource:@"Learn Book" ofType:@"pdf"];
    NSLog(@"path:%@", filepath);
    if(filepath == nil)
    {
        NSLog(@"filepath is nil.");
        return ;
    }
    documentController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filepath]];
    documentController.delegate = self;
    documentController.UTI = @"com.adobe.pdf";
    CGRect navRect = self.navigationController.navigationBar.frame;
    navRect.size = CGSizeMake(1500.0f, 40.0f);
    [documentController presentOpenInMenuFromRect:navRect inView:self.view animated:YES ];
    //[documentController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES ];
} 
```

我已将其从“CGRectZero”更改为“navRect”，但运行后看不到差异。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:29:32.950

[" `presentOpenInMenuFromRect`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/occ/instm/UIDocumentInteractionController/presentOpenInMenuFromRect%3ainView%3aanimated%3a)的第一个参数是定位菜单的位置（在*view*的坐标系中）。

做“ `CGRectZero`”是行不通的，因为这意味着你要求一个高度和宽度为零的矩形。并且做整个导航栏（就像你在“ `navRect`”中所做的那样）也不会起作用。

最好将矩形设置为显示在触发`UIDocumentInteractionController`.

# android - 如何为 ListView 中动态添加的项目创建活动？

> ID：14118603
> 
> 赞同：1
> 
> 时间：2013-01-02T07:53:05.307
> 
> 标签：android, listview, android-intent, android-listview, shopping-cart

我正在创建一个简单的购物清单 Android 应用程序。

在此，用户创建不同的列表并将动态列表项添加到列表中。

我应该如何为每个自定义列表项创建不同的活动？

我也在 stackoverflow 网站上进行了谷歌搜索和搜索，但我没有找到解决我问题的实际解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:01:29.047

定义一个公共活动，以在单击项目时执行您想要执行的任何操作。该活动应建模为作用于对象的特定格式。

使用单击的项目在您以前的活动中建模此对象，并使用[Parcelable 接口](http://developer.android.com/reference/android/os/Parcelable.html)将此对象传递给您的新活动并将其添加为额外的。

**如何？**你可能会问。

1.  让您的活动（比如说 ProductDisplay 活动）执行诸如显示产品名称和价格之类的操作。
2.  将您的 Product 类实现为 Parcelable，并在用户单击一个列表项时创建它的新实例。
3.  使用单击的产品的详细信息填充实例。
4.  将此意图作为额外内容传递给 ProductDisplay。
5.  在 ProductDisplay 中接收这个额外的作为 Product 的实例。
6.  使用 Product 对象中的名称和价格来显示该产品的所有细节。

可以在[此处](http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html)和[此处](http://techdroid.kbeanie.com/2010/06/parcelable-how-to-do-that-in-android.html)找到使用此类 Parcelables 的一些示例。

# java - 弹出Java打印页面

> ID：14118604
> 
> 赞同：2
> 
> 时间：2013-01-02T07:53:33.560
> 
> 标签：java, printing, dot-matrix

我正在尝试使用点阵打印机打印页面。每当我打印页面时，即使页面打印了一半，打印机也会弹出整个页面并将其带到新页面。请提出一些建议，以便我可以留在打印后的同一页。

# notepad++ - notepad++ 可以自动检测 Shift_JIS 编码吗

> ID：14118609
> 
> 赞同：5
> 
> 时间：2013-01-02T07:54:21.863
> 
> 标签：notepad++, shift-jis

我经常使用日语注释源，因此每次打开源文件时，我都必须执行“编码/字符集/ShiftJIS”。我们可以让 Notepad++ 自动检测它吗？我已经尝试了很多设置/首选项中的选项......但没有发现任何有用的东西，我们可以通过插件实现它还是使用一些额外的源重建 NPP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T07:00:31.450

这是因为默认主题（设置 -> 样式配置器 -> 选择主题）使用的字体设置为`Courier New`Shift-JIS 并不能很好地播放。如果您将字体更改为对 JP 更友好的字体（例如`MS ゴシック`），您的文件应正确显示 JP 文本，而无需更改首选项。您还可以更改为使用更 JP 友好字体的不同主题。未设置字体的主题（留空）也应该可以工作。

希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T06:37:03.050

除此之外，不要忘记选中字体样式下方的“启用全局字体”复选框......否则它不会有任何效果。:)

# youtube-api - YouTube Api（搜索）其他语言..（阿拉伯语、韩语等..）

> ID：14118612
> 
> 赞同：0
> 
> 时间：2013-01-02T07:55:05.503
> 
> 标签：youtube-api

这次我有一个 Q，就是如何通过 YouTube Api 进行搜索...英语完美搜索...但其他语言（阿拉伯语、韩语等）不起作用...TT

[http://gdata.youtube.com/feeds/api/videos?q=(SEARCH_WORD)&start-index=1&max-results=3&v=2](http://gdata.youtube.com/feeds/api/videos?q=(SEARCH_WORD)&start-index=1&max-results=3&v=2) => 我的访问代码...

我想搜索阿拉伯语或韩语.. 请评论任何内容....

我需要你们帮助...

祝你有美好的一天~！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:13:52.013

请试试

[http://gdata.youtube.com/feeds/api/videos?q=%EA%B0%95%EB%82%A8%EC%8A%A4%ED%83%80%EC%9D%BC&start-index =1&最大结果=3&v=2](http://gdata.youtube.com/feeds/api/videos?q=%EA%B0%95%EB%82%A8%EC%8A%A4%ED%83%80%EC%9D%BC&start-index=1&max-results=3&v=2)

或者

[http://gdata.youtube.com/feeds/api/videos?q=](http://gdata.youtube.com/feeds/api/videos?q=) \uac15\ub0a8\uc2a4\ud0c0\uc77c&start-index=1&max-results=3&v=2

在您的浏览器上。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:42:39.873

另一个答案的更一般概念是“q”参数（实际上是所有参数）将只接受任何有效的 unicode 字符；因此，如果您尝试搜索的字符串不是 unicode（即其他一些编码集），这些代码点将被解释为 unicode，从而导致搜索随机字符（不返回任何结果）。

# shell - 剪切并保存 Shell 脚本

> ID：14118620
> 
> 赞同：2
> 
> 时间：2013-01-02T07:55:59.187
> 
> 标签：shell

我需要一些帮助。我一直在我的程序中操纵我的日期。日期的格式为 DD-MON-YY，如果用户输入了正确的日期格式，我想检查它。所以我创建了一个函数来分别测试日期、月份和年份，但是该函数还读取格式中的“-”，所以我决定使用以下代码：

```
echo -n " Date [ DD-MON-YY ]:"  #user will input the date
        read dates
        vardate=$ echo "$dates" | tr "-" " "
        echo $vardate 
```

我使用它，所以当我调用函数时，“-”字符不会有问题。但现在的问题是**如何保存日期的 3 部分 [日、月、年]？**所以我的功能可以正确评估它。

我的功能：

```
datefxn(){

d1 = $date1
d2 = $month1
d3 = $year1

########## check the DAY #####################

test ${#d1} -eq 2 || s=" INVALID!"

if [ "$d1" -gt 0 ] && [ "$d1" -le 31 ]
then
    break ;;
else
    echo "Month is OUT OF RANGE!"
fi

########## check the DAY #####################  

test ${#d2} -eq 3 || s=" INVALID!"

MONTH=(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec)
echo "${MONTH[@]}"

for element in "${MONTH[@]}"
do
if [[ $element == $d2 ]]
then
       echo " a "
      break
        else
        echo " WAAA "
    fi
    done
########## check the YEAR ##################### 

test ${#d3} -eq 2 || s=" INVALID!"

} #end datefxn() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:18:45.277

像这样的东西：

```
#!/bin/bash
datefxn () {
        d1=$1
        d2=$2
        d3=$3
        echo "Date is $d1"
        echo "Month is $d2"
}

inp='24-12-2004';
vardate=$(echo "$inp" | tr "-" " ")
datefxn $vardate 
```

上述解决方案用于修复您的代码。

**更新**：一种更好的方法是使用数组和就地替换：

```
#!/bin/bash

datefxn () {
        dt=($(echo ${1//-/ }))
        echo "Date  is  ${dt[0]}"
        echo "Month is  ${dt[1]}"
        echo "Year  is  ${dt[2]}"
}

inp='24-12-2004';
datefxn "$inp" 
```

# android - 使用线程的 Android 媒体录制

> ID：14118624
> 
> 赞同：4
> 
> 时间：2013-01-02T07:56:15.303
> 
> 标签：android, media-player, media, android-mediaplayer, audio-recording

我正在开发一个简单地使用按钮开始和停止录制的 android 应用程序。我用线程。我创建了三个类..一个开始录制..一个停止录制和主类..

问题是我可以在我的手机中看到该文件，但它是空的，手机给我一个消息“无法播放视频”..我希望它与线程一起工作..我不想要其他方法..

这是我的代码主类：

```
public class MediaRecorderSampleActivity extends Activity {

    Button start;
    Button stop ; 
    private MediaRecorder recorder ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        start = (Button)findViewById(R.id.startbtn); 
        stop = (Button)findViewById(R.id.stopbtn); 
        start.setOnClickListener(new btnClick());
        stop.setOnClickListener(new StopbtnClick());
        }

    class btnClick implements View.OnClickListener {
                public void onClick(View arg0) {
            Log.i("Media", "Start Clicked...");
            Thread startThread = new Thread ( new startRe (recorder));
            Log.i("Media", "start Thread Created");
            startThread.start() ; 
             Log.i("Media", "start Recording");

                }           
    }

    class StopbtnClick implements View.OnClickListener {
        public void onClick(View arg0) {
              Log.i("Media", "Stop Clicked...");
        // TODO Auto-generated method stub
            Thread stopThread = new Thread ( new stopRecording (recorder));
              Log.i("Media", "stop Thread Created");
    stopThread.start();
    Log.i("Media", "stop Recording");
        }

  }

      } 
```

StartRecording 类

```
public class startRe implements Runnable {
private MediaRecorder recorder;

startRe( MediaRecorder r ) {
    Log.i("Media", "start cons");
    this.recorder = r ; 

}
public void run() {
    // TODO Auto-generated method stub
    Log.i("Media", "IN RUN start Recording");
    startRecording();
}

public void startRecording() {
    Log.i("Media", "IN Method start Recording");
    recorder = new MediaRecorder();
    Log.i("Media", "create variable");
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    Log.i("Media", "1");
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    Log.i("Media", "2");
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    Log.i("Media", "3");
    recorder.setOutputFile(getFilePath());
    try{
        Log.i("Media", "prepar");
        recorder.prepare();
        Log.i("Media", "before");
        recorder.start();
        Log.i("Media", "after");
    }catch (Exception e){
        e.printStackTrace();
    }

}

private String getFilePath() {
    String filePath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filePath, "MediaRecorderSample");

    if(!file.exists())
        file.mkdirs();

    return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + ".mp4" );
}

} 
```

停止类

```
 public class stopRecording implements Runnable {
private MediaRecorder recorder ;

public stopRecording(MediaRecorder recorder2) {
    Log.i("Media", "Stop in Cos");
    // TODO Auto-generated constructor stub
    try {
    this.recorder = recorder2 ; }
    catch ( Exception e )
    {       
        Log.i("Media", "Stop out  Cos" + e.getMessage()) ;
        } 

}
public void run() {
    Log.i("Media", "Stop in RUN");
    stopRecording();
    Log.i("Media", "Stop out of RUN");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:35:57.740

您如何使用`MediaRecorder`. 您需要在 Activity 类中创建对象，然后将对象传递给两个`Runnable`..

因此，您需要进行以下更改：

在 Activity 类中创建对象，代码如下：

```
 private MediaRecorder recorder ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        start = (Button)findViewById(R.id.startbtn); 
        stop = (Button)findViewById(R.id.stopbtn); 
        start.setOnClickListener(new btnClick());
        stop.setOnClickListener(new StopbtnClick());
         // Create the object in Activity so that both Runnable works on the same object...
         recorder = new MediaRecorder();
        } 
```

`Runnable`像你已经做的那样将相同的对象传递给两个类。

不要在`startRecording()`方法中创建对象，因为它会创建一个本地对象并将其分配给一个不会从`stopRecording` `Runnable`..

```
public void startRecording() {
    Log.i("Media", "IN Method start Recording");
    // comment this recorder = new MediaRecorder();
    Log.i("Media", "create variable");
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    Log.i("Media", "1");
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    Log.i("Media", "2");
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    Log.i("Media", "3");
    recorder.setOutputFile(getFilePath());
    try{
        Log.i("Media", "prepar");
        recorder.prepare();
        Log.i("Media", "before");
        recorder.start();
        Log.i("Media", "after");
    }catch (Exception e){
        e.printStackTrace();
    }

} 
```

尝试让我们知道结果...

# c# - File.WriteAllText 不保留换行符

> ID：14118626
> 
> 赞同：5
> 
> 时间：2013-01-02T07:56:24.820
> 
> 标签：c#, .net

此代码的输出

```
string fileDateTime = "StepsGA-" + DateTime.Now.ToString("dd-MM-yyyy-HH-mm-ss") + ".txt";
string fname = System.IO.Path.Combine(System.Environment.CurrentDirectory, fileDateTime);
File.WriteAllText(fname, txtSteps.Text); 
```

不会保留应有的换行符。文本框的所有内容都打印在一条水平长线上！我哪里出错了？谢谢 ！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T08:40:22.803

得到了答案！而不是`\n`我需要使用`Environment.NewLine`.

# java - 比较两个音频文件。声音匹配

> ID：14118630
> 
> 赞同：7
> 
> 时间：2013-01-02T07:56:46.877
> 
> 标签：java, php, javascript, actionscript-3, audio

我想开始一个大项目，需要比较两个音频文件以获得匹配百分比。

例子 ：

1.  音频 A 是原始音频。

2.  audo B 是从麦克风录制的。（除语音外，一切都与音频 A 中的相同）

3.  我想知道 B 与 A 的百分比有多接近。（100% = 相同）

有谁知道如何做到这一点？

*也许可以通过将文件 A 的光谱与文件 B 的光谱进行比较来实现。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:31:17.327

我在我的本科课程项目中做过这种事情，但使用的是图像文件。您要研究的是[Cross-correlation](http://en.wikipedia.org/wiki/Cross-correlation)。您可以在其中测量两个信号之间的相似性。此外，您可能想要预处理音频文件，即：标准化，应用一些低通滤波器以消除噪音。

我建议 Oppenheim 的 Digital Signal Processing 深入了解信号处理。

但是这些技术又是相当模糊的，直到你知道你想找到什么类型的相似之处。

# batch-file - 删除前检查文件名（Windows Batch）

> ID：14118632
> 
> 赞同：1
> 
> 时间：2013-01-02T07:57:12.447
> 
> 标签：batch-file, text-files, delete-file

有没有办法使用 Windows Batch 读取文件名的 txt 文件列表。如果名称存在于列表中以保留该文件，但是。如果在 txt 列表中找不到文件名，则将其删除。

我试图过滤掉由 AutoCAD 自动生成的大量临时文件。

阅读 txt 列表的原因将允许我添加或删除文件名以进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:43:25.203

是的，这对于 Windows 批处理是可能的。假设您有一个文件`FilesToKeep.txt`名如下的文件列表：

```
WillBeKept.txt
WillAlsoBeKept.doc 
```

在与以下批处理脚本相同的目录中：

```
@echo OFF
pushd "%~dp0"
set "PathToCleanup=E:\Temp\Test"
for /F "tokens=*" %%F in ('dir /S/B/A-D %PathToCleanup%\*.*') do (
     findstr /S %%~nxF FilesToKeep.txt >NUL || del /Q "%%F" ) 
```

该脚本循环遍历所有文件`PathToCleanup`，如果文件名不存在，`FilesToCleanup.txt`则该文件将被删除。

# javascript - 在浏览器下进行不带表单的 POST

> ID：14118634
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:57:26.440
> 
> 标签：javascript, browser

是否可以通过浏览器在不使用表单（我需要将纯 JSON 放入 Post 正文中）的情况下进行发布请求？

可能是异步请求，但是同步 POST 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:59:28.407

使用 jQuery 的`.post()`函数会向页面发送一个 post 请求并为您获取它的结果。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

也可以使用`.ajax()`或仅使用纯 javascript 来发送 Ajax 请求 (XMLHTTPREQUEST)。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

当然，如果您不想使用 XML，那么您可以按照答案：[JavaScript post request like a form submit](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)，它会让您对此事有更多的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:02:33.787

您可以使用[XMLHttpRequest](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

尝试这个 -

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("POST","test.html",true);
xmlhttp.send(); 
```

# perl - 用于检查每个詹金斯作业的健康状况的 Nagios 插件

> ID：14118635
> 
> 赞同：-1
> 
> 时间：2013-01-02T07:57:35.740
> 
> 标签：perl, jenkins, nagios

有人可以帮助我编写一个 perl 脚本，该脚本将检查不同服务器上每个 jenkins 作业的运行状况。以下是我想用于插件创建的步骤：

1.  使用 jenkins REST API 我想找到 jenkins 工作并将它们存储到一个数组中。

    `http://my-host:8080/api/xml`

    Test_Job1 http://jenkins-host:8080/job/Test_job1/ red Test_job2 http://jenkins-host:8080/job/Test_job2/ red Test_View http://jenkins-host:8080/

2.  对于存储在数组中的每个 jenkins 作业，我想使用 REST API 监视每个作业的 HealthReport。

    `http://my-host:8080/Job_name/api/xml`

    测试结果：总共 78 次测试中有 1 次测试失败。
    健康80plus.png 98

3.  根据`<score>98</score>`詹金斯的工作，我想在 nagios GUI 上显示 OK、CRITICAL、WARNING。

4.  如果`<score>98</score>`小于 50，它应该在 nagios GUI 上显示 CRITICAL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:52:02.147

这仍然相当模糊和广泛。但基本上你知道我期望你需要做什么？获取一些 XML 解析器（我建议[XML::Simple](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)简单），使用[Nagios::Plugin](http://search.cpan.org/~tonvoon/Nagios-Plugin-0.33/lib/Nagios/Plugin.pm)帮助您编写插件。您还可以获取[REST::Client](http://search.cpan.org/~mcrawfor/REST-Client-88/lib/REST/Client.pm)以便更轻松地使用 jenkins 的 REST API

ps 这是你第一次尝试 perl 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:47:48.883

这是我写的代码。

```
#!/usr/bin/perl
use strict;
use warnings;
use LWP::UserAgent;
use XML::Twig;
use HTTP::Request;
use Getopt::Long;
use Nagios::Plugin;
#use File::stat;

use File::Basename;
my $PROGNAME = basename($0);

my $p = Nagios::Plugin->new(
    usage => "Usage: %s [ -H|--host ] [ -p|--port ]",
    extra => "
    Examples:
    $PROGNAME --host myhost -port 8080
    Check Host name and port.
");

$p->add_arg(
    spec => 'host|f=s',
    required => 1,
    help => "-H, --host=Hostname. REQUIRED.");

$p->add_arg(
    spec => 'port|a=i',
    default => 8080,
    help => "-p, --port=Portnumber. Default 8080.");

$p->getopts;

my $o_host = $p->opts->host ;
my $o_port = $p->opts->port;
my $protocol = 'http';
my $o_url = '/api/xml';
my @jobs;

my $url = $protocol . "://" . $o_host . ":" . $o_port . $o_url ;
#print $url,"\n";
my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;
my $response = $ua->get($url);
if ($response->is_success) {
    my $content = $response->decoded_content;  # or whatever
    XML::Twig->new( twig_roots => { 'job/name' => sub { push @jobs, $_->text; } }) ->parseurl( $url);
}
else {
    $p->nagios_die( CRITICAL, "Bad page found" );
}
#print @jobs;
foreach my $job_name (@jobs) {
        #print $job_name;
        my $job_url = $protocol . "://" . $o_host . ":" . $o_port . "/" . "job" . "/" . $job_name . $o_url ;
        #print $job_url;
        my $response2 = $ua->get($job_url);
        #print $job_url;
        if ($response2->is_success) {
            $p->nagios_die( OK, "Job link valid" );
        }
        else {
            $p->nagios_die( CRITICAL, "Bad page found" );
        }
} 
```

# asp.net-mvc-3 - 如何在 javascript 中处理 MVC3 中的会话超时？

> ID：14118641
> 
> 赞同：1
> 
> 时间：2013-01-02T07:58:43.737
> 
> 标签：asp.net-mvc-3, session-timeout

在我的应用程序中，这是我们迄今为止处理会话超时的方式

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="20" />
</authentication> 
```

现在我想在客户端处理会话超时，像这样

```
<authentication mode="Forms">
   <forms loginUrl="showPopup();" timeout="20" />
</authentication> 
```

这是可能的，还是任何其他建议的方法来实现这一目标？

**编辑**

我访问了其他相同类型的问题，但无法从他们那里得到任何真正的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T09:24:32.313

> 在我的应用程序中，这是我们迄今为止处理会话超时的方式

太好了，这是在 web.config 中定义表单身份验证的正确方法

> 那可能吗

不，抱歉，将 javascript 放在`loginUrl`属性中是没有意义的。

> 或任何其他建议的方式来实现这一点

据我了解，如果会话已过期，您正在尝试使用一些 javascript 函数显示登录表单。

您应该区分对服务器的两种类型的请求：

1.  标准同步请求（锚点、表单、重定向等）
2.  异步请求（AJAX - 使用 javascript 完成）

在服务器端的这两种情况下，您都应该通过使用`[Authorize]`属性装饰需要身份验证的操作来保护它们。例如：

```
[Authorize]
public ActionResult SomeAction()
{
    ...
} 
```

一旦您保护了您的服务器，您就可以开始考虑如何处理表单身份验证 cookie 过期或只是匿名用户尝试调用此操作的情况。

对于对服务器的标准同步调用的第一种情况，表单身份验证模块将拦截请求，如果用户未通过身份验证或其会话过期，ASP.NET 将自动将您重定向到您在`loginUrl`属性中定义的登录页面。它还将作为`ReturnUrl`查询字符串参数传递给此操作，该操作将指向用户最初请求的 url，但他尚未获得授权。一旦他通过了身份验证，这个参数就可以用来将他重定向回这个页面。

现在第二种情况有点困难，因为由于 ASP.NET 自动将请求重定向到 LogOn 页面，您无法在 AJAX 成功回调中知道用户未被授权并且服务器将请求重定向到 LogOn 页面。Phil Haack 写了一篇[`excellent article`](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)关于如何防止 AJAX 请求重定向的文章。我邀请您现在阅读这篇文章。

好了，既然您已经阅读了这篇文章并安装了他的 NuGet ( `Install-Package AspNetHaack`)，假设您正在使用 jQuery 处理您的 AJAX 请求，那么您可以订阅[`.ajaxComplete()`](http://api.jquery.com/ajaxComplete/)全局事件处理程序。在此处理程序中，您可以测试服务器响应代码，如果是 401，则表示用户未授权。所以你可以采取相应的行动：

```
<script type="text/javascript">
    $(document).ajaxComplete(function(event, xhr, ajaxOptions) {
        if (xhr.status == 401) {
            // the AJAX request failed because either the user was not
            // authenticated or his session expired. So here you could
            // do whatever you want. For example you could redirect him
            // to the loginUrl defined in your web.config file:

            window.location.href = '@FormsAuthentication.LoginUrl';

            // you also have the possibility to show this logon form
            // inside a popup or render it inline inside the page,
            // by sending an AJAX request to this action and retrieving the
            // corresponding partial
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:09:05.230

此配置区域用于配置服务器端行为，当服务器尝试处理会话已过期的请求时会发生这种情况。它是客户端-> 服务器对页面的请求的结果。由于客户端是一个 Web 浏览器，并且在设计上与服务器断开连接，因此您必须在每个页面中包含您需要的逻辑（可能在主布局模板中），然后以重复的时间间隔对服务器进行 AJAX 调用以确定用户的会话超时状态。弹出窗口也将在客户端上处理。

这个配置区域可能不会帮助您实现目标，我将完全删除该`<forms>`元素并考虑使用对服务器的 AJAX 调用来解决问题。

# c# - 如何确定用户或操作系统已更改注册表项？

> ID：14118642
> 
> 赞同：0
> 
> 时间：2013-01-02T07:58:43.973
> 
> 标签：c#, registry, registrykey

我有一个监视注册表项更改的小应用程序，它工作正常。但我想知道注册表何时更改，注册表已被用户或操作系统更改？我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:03:25.010

您可以使用**WMI RegistryKeyChanged 事件**。在此处查看 MSDN 文档：[RegistryKeyChangeEvent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393040%28v=vs.85%29.aspx)。如需更多注册表更改监控，请查看[WMI 注册表事件类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393043%28v=vs.85%29.aspx)。

# solr - Solr：将数据值的模式文件中的类型定义为 FilePath

> ID：14118644
> 
> 赞同：1
> 
> 时间：2013-01-02T07:58:55.380
> 
> 标签：solr

我想上传 SOLR 数据文件夹中的 FilePath 并使用 LIKE 操作通过我的网站搜索它。

为此，我尝试在架构文件中使用以下类型，但没有成功。

试试 1。

```
<fieldType name="string_wildcards" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" words="stopwords.txt" ignoreCase="true"/>
        <filter class="solr.ISOLatin1AccentFilterFactory"/>
        <filter class="solr.TrimFilterFactory" />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="30"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.StopFilterFactory" words="stopwords.txt" ignoreCase="true"/>
        <filter class="solr.ISOLatin1AccentFilterFactory"/>
        <filter class="solr.TrimFilterFactory" />
      </analyzer>
    </fieldType> 
```

尝试2。使用字母标记器。

```
 <fieldType name="string_wildcards_letter" class="solr.TextField" positionIncrementGap="100">
          <analyzer type="index">
              <tokenizer class="solr.LetterTokenizerFactory"/>
              <filter class="solr.LowerCaseFilterFactory"/>
              <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="30"/>
          </analyzer>
          <analyzer type="query">
              <tokenizer class="solr.StandardTokenizerFactory"/>
              <filter class="solr.StandardFilterFactory"/>
              <filter class="solr.LowerCaseFilterFactory"/>
          </analyzer>
      </fieldType> 
```

尝试 3\. 使用关键字标记器。

```
<fieldType name="string_wildcards_keyword" class="solr.TextField" positionIncrementGap="100">
              <analyzer type="index">
                  <tokenizer class="solr.KeywordTokenizerFactory"/>
                  <filter class="solr.LowerCaseFilterFactory"/>
                  <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="30"/>
              </analyzer>
              <analyzer type="query">
                  <tokenizer class="solr.StandardTokenizerFactory"/>
                  <filter class="solr.StandardFilterFactory"/>
                  <filter class="solr.LowerCaseFilterFactory"/>
              </analyzer>
          </fieldType> 
```

以上三个尝试均未成功。任何人的帮助将不胜感激。

SOLR 查询示例

```
Field Name: 
OriginalFilePath

My Input value is:
X:\Intake\1102\02.01.11\TX_DA26396_RushTopCompanies_Non-SERFF_01.28.11_PR\TX_P_1_01.28.11_NS\Dairyland County Mutual Insurance Company_01.28.11 03.pdf

My Query is:
OriginalFilePath:(x\\:\\\\intake\\\\1102\\\\02.01.11\\\\tx_da26396_rushtopcompanies_non\\-serff_01.28.11_pr\\\\tx_p_1_01.28.11_ns\\\\dairyland county mutual insurance company_01.28.11 03.p*) 
```

最后一个 astrieks 用于在该字段上使用 LIKE 操作。

如果我的查询格式有任何问题，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:50:15.470

您可以检查[PathHierarchyTokenizer](http://lucidworks.lucidimagination.com/display/solr/Tokenizers#Tokenizers-PathHierarchyTokenizer)，它将拆分路径并帮助您执行通配符查询。

您也可以使用[RegularExpressionPatternTokenizer](http://lucidworks.lucidimagination.com/display/solr/Tokenizers#Tokenizers-RegularExpressionPatternTokenizer)并在分隔符上生成标记。您最终会得到可以与通配符查询一起使用的单个令牌（而不是文件路径层次结构）

# java - 是否通过代码转换大型 json 文件

> ID：14118649
> 
> 赞同：0
> 
> 时间：2013-01-02T07:59:51.403
> 
> 标签：java, c++, json, large-files, jsoniq

在尝试使用 mongoDB 并发现它不适用于大于 16 mega 的文档之后。
我需要找到加载大型复杂 json 文件的方法（我猜是内存）。
并通过（我猜）像 jsoniq 这样的查询处理器将其转换为我的需要，但我对其他解决方案持开放态度。
这里的关键是我没有改变主 json 的内容。而且我不在乎使用哪种编程语言
，
但我只想找到正确快速地完成它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:17:34.833

我认为杰克逊图书馆可以帮助你。其官方网站声明了以下功能：

杰克逊是：

1) 流式传输（读、写）

2) FAST（比任何其他 Java json 解析器和数据绑定器都要快）

3) 功能强大（通用 JDK 类以及任何 Java bean 类、Collection、Map 或 Enum 的完整数据绑定）

4）零依赖（不依赖JDK以外的其他包）

5）开源（LGPL或AL）

6) 完全符合

7) 极其可配置

用 Java 编写的 JSON 处理器（JSON 解析器 + JSON 生成器）。除了基本的 JSON 读/写（解析、生成）之外，它还提供了完整的基于节点的树模型，以及完整的 OJM（Object/Json Mapper）数据绑定功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T14:49:03.090

Zorba 也可以为这种用例提供​​帮助。

它是一个支持 XQuery 和 JSONiq 的开源内存引擎。它可以使用所有类型的输入，包括来自本地文件系统、来自 Web 或来自其他来源的 JSON。

它通常用于命令行，但由于它是开源的（C++），它也可以在其他环境中进行适配和集成。

为了完整起见，还提供了其他 JSONiq 实现，例如 Xidel。最后，XQuery 在其 3.1 版中进行了扩展以支持 JSON，因此许多 XQuery 引擎（Saxon，...）也有资格操作 JSON。

# php - php base64_decode 函数在实时服务器上无法正常工作

> ID：14118651
> 
> 赞同：0
> 
> 时间：2013-01-02T08:00:09.737
> 
> 标签：php, html

我无法调试我的代码有什么问题。这是我正在做的事情：

对于 Ajax 查询，我设置了一个会话变量：sessiontoken，并且我编码和解码以确保请求来自正确的会话/页面，如下所示，下面的代码出现在每个页面上，然后在 javascript 中我回显这个变量并在ajax调用中使用：

我的问题是，虽然脚本在本地服务器（xampp）上的每个页面上都运行良好，但在实时服务器上却出现了问题。当我登录实时站点时，在主页上解码值正确显示在 javascript 函数中，但是当我单击指向 myprofile 的链接或转到任何其他页面时，解码后的 sessiontoken 值显示奇怪的字符。你能告诉我可能是什么问题吗，因为在本地它工作得很好。谢谢。

```
<?php
    session_start(); 
    if(!(isset($_SESSION['id']) && isset($_SESSION['username']))) {
            header("location: index.php");
            exit();
        }
    if(!isset($_SESSION['sessiontoken'])) {
            $thisRandNum = rand(999999,99999999);
            $_SESSION['sessiontoken'] = base64_encode($thisRandNum);
        } else {
            $thisRandNum = base64_decode($_SESSION['sessiontoken']);
        }
?>

<html>
   <head>
     <script type="text/javascript">
        function refreshWall() {
           $.post('scripts/refreshlist.php', {thistoken: <?php echo $thisRandNum ?>},
            function(data) {
           }, "json");
      }
     </script>
   </head>
   <body>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:58:20.180

我将 PHP 版本升级到 5.3，它解决了我的问题。

# linux - 指纹读取器 - ID 147e:2020 Upek - Thinkpad T430

> ID：14118652
> 
> 赞同：5
> 
> 时间：2013-01-02T08:00:47.753
> 
> 标签：linux, fingerprint

我在 Thinkpad T430 ID 147e:2020 Upek 上的指纹读取器有一些问题

几天来，我尝试了我能找到的每一个技巧，但它对我不起作用。

主要是我尝试构建并使其通过指纹 GUI 运行，我能够构建并正确安装它（经过几次修复），但它根本无法拿起我的设备。

有一次我认为我有解决方案，因为我意识到这台笔记本电脑上的指纹传感器是相当新的，并且可能默认情况下不支持专有 libbsapi.so，所以我尝试遵循此博客中的提示：[http://volker。 de/2012/12/fingerprint-gui-und-das-thinkpad-t430s/](http://volker.de/2012/12/fingerprint-gui-und-das-thinkpad-t430s/) Guy 拥有完全相同的设备和相同的 PC，但正如我所料，它对我不起作用。

平台是 Debian-squeeze

如果您有任何想法可能是解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:00:30.843

使用与您相同的信息，但快速查看法语 Ubuntu 文档为我解决了问题：问题似乎是指纹 gui 无法访问 USB 设备总线，因此，我们必须给出它给它。

使用命令查找设备的总线和设备地址`lsusb`，对我来说，它是：

`Bus 001 Device 003: ID 147e:2020 Upek`

因此总线是**001**并且设备是**003**。**我们称它们为 x 和 y。** 然后，我们使用`chmod`（显然它不会构成任何安全威胁，因为系统会自行修复它）：

`sudo chmod 666 /dev/bus/usb/00x/00y`

例如，对我来说，它是： `sudo chmod 666 /dev/bus/usb/001/003`

然后，按照德国人（volker - 您引用的链接）给您的说明进行操作。在我这边，我运行的是 Ubuntu 12.04（debian bro'），所以我可以使用指纹 PPA。我不知道 Ubuntu PPA 是否适用于 debian。我建议您保留自己安装的指纹 gui 程序，以及 volker 的博客文章提供的修复程序。然后，只需启动fingerprint-gui，它就会识别您的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:28:14.840

实际上更新的德国博客是引用的问题：

对于非德语用户：请注意使用复制和粘贴功能将上述行插入到您的 40-libbsapi.rules 中，因为引号与您敲击键盘时得到的引号不同。发现它很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T10:57:59.537

您需要[将此补丁](http://cgit.freedesktop.org/libfprint/libfprint/patch/?id=3b3679c900f6739f7067f8d720e15d548bb39be9)应用到 libfprint。

# sql-server - 如何在实体框架中的 guid 上使用 SQL 的 LIKE？

> ID：14118654
> 
> 赞同：1
> 
> 时间：2013-01-02T08:00:50.723
> 
> 标签：sql-server, entity-framework, c#-4.0, guid

在 SQL Server 中，`uniqueidentifier`列可以像字符串一样使用 LIKE 比较：

```
SELECT * FROM dbo.Table WHERE GuidColumn LIKE '4c38e01e%' 
```

**如何在实体框架中使用此功能？**

我想要这样的东西

```
context.Table.Where(x => x.StringColumn.Contains("some string")) 
```

但是对于 Guid 列而不是字符串列：

```
context.Table.Where(x => x.GuidColumn ???? "4c38e01e") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T09:10:34.957

据我所知，没有办法在 EntityFramework 中即时将 Guid 转换为字符串。我知道一些工作方法，但它们对我来说并不优雅，尽管它们可能对您的情况有所帮助：

1.  在 SQL Server 中创建一个视图，您可以在其中将 Guid 列转换为字符串。然后创建一个新实体并将其映射到视图。现在您的 guid 列在字符串表示中，并且可以应用“like”运算符。主要缺点是查询性能。
2.  创建一个字符串类型的PERSISTENT 计算列。使用转换表达式将您的 Guid 转换为字符串。查询性能与普通字符串列相同，但将记录插入表中需要更长的时间。
3.  如果这不是应用于您的数据源的唯一过滤器，那么当数据已经在内存中时，您可以应用您的 GUID LIKE 操作。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T01:19:33.283

我通过在数据库中创建一个存储过程来处理数据库中的“like”子句，并将过程结果从 edmx 映射到我的实体来解决这个问题。所以我的存储过程是：

```
CREATE PROCEDURE [dbo].[spGetDevicesWhereGuidContains] 
@partialGuidString as varchar (5)

AS
BEGIN
    SET NOCOUNT ON;
    SELECT * from devices where [Guid] like '%' + @partialGuidString + '%'
END 
```

然后，从模型浏览器将 proc 映射到实体：http: [//entityframeworktutorial.net/data-read-using-stored-procedure.aspx#.UT0F96GG1e4](http://entityframeworktutorial.net/data-read-using-stored-procedure.aspx#.UT0F96GG1e4)

然后从那里很明显；

```
List<Device> devices = context.spGetDevicesWhereGuidContains("8").ToList(); 
```

不理想，但可以完成工作。

# android - 搭载 Android 4.2 (Jelly Bean) 的设备支持低功耗蓝牙 (BLE)

> ID：14118658
> 
> 赞同：8
> 
> 时间：2013-01-02T08:01:10.007
> 
> 标签：android, bluetooth, galaxy, bluetooth-lowenergy

哪些 Android（使用 Jelly Bean，4.2）设备支持[蓝牙低功耗](http://en.wikipedia.org/wiki/Bluetooth_low_energy)(BLE)？[三星 Galaxy S III](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III)是否支持？

*[（这个问题是在阅读了Galaxy S3 上的蓝牙 4.0](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=157757)*博客文章后提出的。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:39:05.150

我相信目前只有摩托罗拉 RAZR 支持 BLE（因为摩托罗拉为开发者提供了自己的 BLE 库）。S3 不支持 BLE（驱动程序/API 不可用）。

[COOKOO手表项目的](http://www.kickstarter.com/projects/cuckoo/cookootm-the-watch-for-the-connected-generation/posts/352332)这封信很好地描述了Android的蓝牙4.0灾难。

此外，[此问题](http://code.google.com/p/android/issues/detail?id=33371)已成为开发人员的非官方发泄/抱怨论坛。那里偶尔会有一些有用的更新。

**编辑**

Android 4.3 (API 18) 现在正式支持低功耗蓝牙。[在此处](http://developer.android.com/guide/topics/connectivity/bluetooth-le.html)查看开发人员指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T00:32:10.380

目前没有安卓手机支持BLE。有些手机有 BLE 芯片组，但由于 Android 不支持 BLE，BLE 硬件基本上无法使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T14:26:19.293

我的三星 Galaxy S2 使用 MyTracks 与 Polar H7 蓝牙心率监测器配合得很好。我认为这意味着 SGS2 支持 BTLE 但我的 Nexus4 没有这样的运气。

# javascript - canvas.toDataURL() 无法正常工作，除了 Mozilla Firefox

> ID：14118659
> 
> 赞同：0
> 
> 时间：2013-01-02T08:01:22.207
> 
> 标签：javascript, firefox, image-processing, canvas, base64

我在站点中开发了一个优惠券生成器模块，我创建了一个 html 格式的优惠券，并使用 JavaScript 函数在画布中填充该 html 值

```
function checkcanvas(id) {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var data = "<svg xmlns='http://www.w3.org/2000/svg' width='437' height='262'>" 
        +  "<foreignObject width='100%' height='100%'>"
        + "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>"
        +  $("#coupon_td").html()
        + "</div>"
        + "</foreignObject>"
        + "</svg>";

    var DOMURL = self.URL || self.webkitURL || self;
    var img = new Image();
    var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
    var url = DOMURL.createObjectURL(svg);
    img.onload = function() {
        ctx.drawImage(img, 0, 0);
        DOMURL.revokeObjectURL(url);
    };
    img.src = url;

    if(id == 2) {
        document.getElementById('base_64_img').value = canvas.toDataURL();
    }
} 
```

`base_64_img`只是一个隐藏元素，因此我可以将数据发布到我的 php 代码中并使用 base64 代码创建图像。

我面临的最大问题是，这段代码几乎可以在 Mozilla Firefox 的每个版本中完美运行，但不能在 Google chrome 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:44:39.910

在您的代码中，您正在生成一个“SVG 图像”并尝试转换为 toDataURL()。

```
var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"}); 
```

这是问题，从这个[URL](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement) toDataURL ：

> 如果请求的类型不是image/png，并且返回值以data:image/png开头，则不支持请求的类型。

在这个[小提琴代码中](http://jsfiddle.net/zyDg5/6/)，如果你看到打印输出，“data:image/png;base64”。它应该是“数据：图像/SVG；base64”。

不要创建 svg 图像，而是使用[canvas 元素和 javascript 来绘制](http://www.worldwidewhat.net/2012/07/how-to-draw-bitmaps-using-javascript/)相关的横幅图像，如果您获取输出，请尝试在浏览器中复制和粘贴。（它可能工作）。

检查这个名为[SVG.toDataURL 的js 插件](https://github.com/sampumon/SVG.toDataURL)

希望这可以帮助。

# python - python-spidermonkey 对象没有属性 'eval_script' 错误

> ID：14118666
> 
> 赞同：0
> 
> 时间：2013-01-02T08:02:07.580
> 
> 标签：python, spidermonkey

以下列方式（按照[指南](http://code.google.com/p/python-spidermonkey/#Tutorial)）使用 python-spidermonkey 会给我错误`AttributeError: 'spidermonkey.Context' object has not attribute 'eval_script'`。

```
>>> import spidermonkey
>>> rt = spidermonkey.Runtime()
>>> cx = rt.new_context()
>>> cx.eval_script("1 + 2") + 3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  AttributeError: 'spidermonkey.Context' object has no attribute 'eval_script' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T14:59:08.070

我遇到了同样的问题，我还发现了这个错误报告： [https ://launchpad.net/~pi-rho/+archive/security/+build/3866138](https://launchpad.net/~pi-rho/+archive/security/+build/3866138)

在 Ubuntu (12.10) 上安装这个包对我有用： [https ://launchpad.net/~pi-rho/+archive/security/+build/3866138](https://launchpad.net/~pi-rho/+archive/security/+build/3866138)

# html - CSS 大小/性能？

> ID：14118667
> 
> 赞同：7
> 
> 时间：2013-01-02T08:02:31.043
> 
> 标签：html, css, performance

查看这个 css 文件（*尤其是最后**5**行*）：

```
#page section .s_1 { overflow:hidden; width:435px; float:left;}
#page section .s_1 h1 { font-size:36pt; color:#001744; line-height:1.1; margin-bottom:64px;height:107px;}
#page section .s_1 menu { list-style:none;padding:0; margin:0;} 
#page section .s_1 menu li { float:left; padding:0; margin:0;} 
#page section .s_1 menu li a {background-image:url(../images/icon_buttons.png); background-repeat:no-repeat; width:79px; height:79px; display:block;}
#page section .s_1 menu li + li {margin-left:10px;}
#page section .s_1 menu li.b_1 a { background-position:0 0;}
#page section .s_1 menu li.b_2 a { background-position:-89px 0;}
#page section .s_1 menu li.b_3 a { background-position:-178px 0;}
#page section .s_1 menu li.b_4 a { background-position:-267px 0;}
#page section .s_1 menu li.b_5 a { background-position:-357px 0;}
... 
```

这个大的 CSS 文件是编写 CSS 的正确方法吗？

我在许多站点中都看到了这种层次结构。

CSS 文件应该很小，为什么需要所有这些多余的选择器？

可以只使用解析速度更快的 ID *，*当然 - CSS 会更小。

我可以通过将它转换为 id 来缩小这个 css 文件。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:15:36.450

在解析方面，使用`id`'s 会快得多。`CSS`

来自[Mozilla 开发者](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)，

> 尽可能使用最具体的类别
> 
> 放缓的最大原因是标签类别中的规则太多。通过向我们的元素添加类，我们可以进一步将这些规则细分为类类别，从而消除了尝试匹配给定标签的规则所花费的时间。

这是关于这个主题的一个[很好的研究，它也说明了这一点。](http://perfectionkills.com/profiling-css-for-fun-and-profit-optimization-notes/)

> 大多数昂贵的选择器往往是通用的选择器（“*”），以及具有多个类的选择器（“.foo.bar”、“foo .bar.baz qux”等）。我们已经知道这一点，但很高兴得到分析器的确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:10:14.303

如果你[只使用 id 的选择会更快](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)，但你也必须做比使用类更多的选择。前提是css是干净的。一般来说，基于 id 的样式的问题是您放弃了对该样式的所有重用。

最好的方法是将样式链接到类。这为您提供了足够的速度并保持 css 文件更小。对于大多数站点的性能而言，较小的文件比在客户端上更快的执行更重要。一旦拥有所有资源，典型的客户端将在微秒内呈现一个复杂的页面。

您指出的 css 使用的是精灵，它很可能是用指南针或类似的东西生成的。在对质量做出严厉判断之前，查看原始代码也很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:15:22.803

如果你对最后 5 行特别感兴趣，`class`vs`id`辩论不是这里的主要内容。

第五行和第 7-11 行（最后五行）引用了精灵。（我相信你知道这一点。）使用六行来指代五个不同的图像是你将得到的一样有效。

此外，精灵通常使用类，因为图像将部署在不同的地方。

这些行的 CSS 效率问题是是否需要完整的参考。

> 更新：[这个谷歌文档](https://developers.google.com/speed/docs/best-practices/rendering)是无价的，因为它解释了浏览器如何解析 CSS。结果，它符合我在下面写的一些内容。浏览器对每个选择器从右到左工作，因此 **它永远不会解析`page section`**. 问题只是加载时间之一。

`#page section .s_1 menu li.b_5 a``.b_5 a`如果这是使用精灵的唯一上下文，也可能是这样。我还将课程放在`<a>`自己身上，您可以将按钮类称为`.b_5`. 一个更好的 className 也不会误入歧途，无论是 IMO；额外的五个字符`button_5`不会杀死任何人:)

总体而言，您几乎可以肯定会`#page section`在不损失准确性和性能提升的情况下输掉比赛。的使用`menu`也很可能是不必要的。

至少，您可以毫无疑问地将其剥离为以下内容：

```
* {padding:0; margin:0;} /* Assuming this is already standard */
.s_1 { overflow:hidden; width:435px; float:left;}
.s_1 h1 { font-size:36pt; color:#001744; line-height:1.1; margin-bottom:64px;height:107px;}
.s_1 menu { list-style:none;} 
.s_1 li { float:left;} 
.s_1 menu li + li {margin-left:10px;}
.s_1 a {background-image:url(../images/icon_buttons.png); background-repeat:no-repeat; width:79px; height:79px; display:block;}
.b_1 { background-position:0 0;}
.b_2 { background-position:-89px 0;}
.b_3 { background-position:-178px 0;}
.b_4 { background-position:-267px 0;}
.b_5 { background-position:-357px 0;} 
```

个人觉得这样`.b_1,.b_2,.b_3,.b_4,.b_5`比较好`.s_1 a`。`background-repeat:no-repeat;`如果您使用精灵并指定高度和宽度（除非宽度大于精灵），通常也不需要这样做。

如果你真的很热心，你可能会在决赛`;`之前输掉决赛`}`:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T08:05:42.243

我同意添加 ID（或类）将使 css 的解析更快。

您在问题中显示的代码类型很可能是现有软件的皮肤，其中皮肤开发人员无法选择将 id 添加到他想要设置样式的所有元素中。在这种情况下，人们将不得不求助于使用层次结构来设置特定项目的样式。

但总结一下：使用 id 或 classes 确实更快，并且是应用样式的最佳方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T08:11:39.413

如果页面较小，使用 ID 可能是有意义的。但是想象一下，您的页面中有五个列表，每个列表下都有五个列表项。然后，您必须定义 5*5 ID 以在 css 中使用。这将是一个很大的文本，而且语法很糟糕。此外，一个项目可以多于一堂课。因此，每个类都可以多次使用（就像面向对象中的继承）。它还将减小 css 文本的大小并增加其可读性。

# node.js - socket.io 从 onclick 动作中获取数据，然后将数据传递给其他页面以执行数据

> ID：14118668
> 
> 赞同：0
> 
> 时间：2013-01-02T08:02:31.823
> 
> 标签：node.js, socket.io, communicate

我想使用 node.js 和 socket.io 创建一个页面。

页面内有两个按钮，当我点击其中一个时，它会改变一个定义动画持续时间的变量（这里我省略了 CSS 动画代码）。

当我在另一个网络浏览器上打开同一页面并单击其中一个按钮时，我希望看到两个网页的变化。我不知道如何在内部编写代码`socket.on('chat', function(data){???});`以使两个页面相互通信。

客户端：

//socket.io 代码--

```
<script type="text/javascript" charset="utf-8">

    var socket = io.connect('http://localhost:3000');

    socket.on('chat', function  (data)
    {
         function change_position(data)
          {
           document.getElementById("animation1").style.WebkitAnimationDuration=data;
          }
    });

 </script>

..... 
```

//行动 -

```
<body>
<button id="1b" type="button" style="position:absolute; left:377px; top:220px;" value="2s"; onclick="change_position(value)"> - 1 - </button>

<button id="2b" type="button" style="position:absolute; left:477px; top:220px;" value="15s"; onclick="change_position(value)"> - 2 - </button>
</body> 
```

服务器端：

```
var io = require('socket.io'),
  connect = require('connect');

var app = connect().use(connect.static('public')).listen(3000);
var chat_room = io.listen(app);

chat_room.sockets.on('connection', function (socket) {

  socket.on('chat', function  (data) {
    chat_room.sockets.emit('chat', data);
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:40:45.213

如果您希望将消息传播到所有客户端/套接字，则在您的服务器中，您应该具有以下内容：

```
chat_room.sockets.on('connection', function (socket) {

  socket.on('chat', function  (data) {
    socket.broadcast.emit('chat', data);
    socket.emit('chat',data);
  });

}); 
```

该行`socket.emit('chat',data);`允许您将消息也发送回它的发送者，因为广播会将它发送给所有*其他*套接字。

当然，您可以省略该行并在客户端处理消息发送逻辑；即添加一些JavaScript 代码，在将消息发送到服务器后进行您想要的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:39:04.407

您可以使用 socket.emit('message', data) 在客户端上发出。然后在服务器上使用 chat_room.socket.on('message', data) 获取它。使用 chat_room.sockets.emit('message', data) 将其发送给客户端。

# xslt - 检查 XSL 模板中的节点类型

> ID：14118670
> 
> 赞同：10
> 
> 时间：2013-01-02T08:02:38.110
> 
> 标签：xslt, xpath-1.0

是否可以检查我与同一模板内的模板匹配的节点的类型？如果是，我该怎么做？例如，我想做这样的事情：

```
<xsl:template match="@*|node()">
    <xsl:choose>
        <xsl:when test="current() is an attribute">
        <!-- ... -->
        </xsl:when>
        <xsl:when test="current() is an element">
        <!-- ... -->
        </xsl:when>
        <xsl:otherwise>
        <!-- ... -->
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T09:12:40.537

在此处查看此答案，因为这应该为您提供所需的信息：

[区别：child::node() 和 child::*](https://stackoverflow.com/questions/5394178/difference-between-childnode-and-child)

这给出了以下**xsl:choose**来测试所有节点，包括文档节点。

```
<xsl:choose>
  <xsl:when test="count(.|/)=1">
    <xsl:text>Root</xsl:text>
  </xsl:when>
  <xsl:when test="self::*">
    <xsl:text>Element </xsl:text>
    <xsl:value-of select="name()"/>
  </xsl:when>
  <xsl:when test="self::text()">
    <xsl:text>Text</xsl:text>
  </xsl:when>
  <xsl:when test="self::comment()">
    <xsl:text>Comment</xsl:text>
  </xsl:when>
  <xsl:when test="self::processing-instruction()">
    <xsl:text>PI</xsl:text>
  </xsl:when>
  <xsl:when test="count(.|../@*)=count(../@*)">
    <xsl:text>Attribute</xsl:text>
  </xsl:when>
</xsl:choose> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-04T11:20:25.127

我强烈建议您使用[XPath 2.0 中引入的序列类型的表达式](http://www.w3.org/TR/xpath20/#id-expressions-on-datatypes)。例如：

```
. instance of document-node()
. instance of element() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T14:00:22.273

**确定节点`$node`是否*为*根节点**的更精确方法：

```
not(count($node/ancestor::node())) 
```

TimC 的答案中的表达式测试当前节点的类型：

```
count(.|/)=1 
```

但不适用于我们想要确定变量中节点的类型（可能属于另一个文档）而不是当前文档的情况。

**此外，对命名空间节点的测试**：

```
count($node | $node/../namespace::*) = count($node/../namespace::*) 
```

# mysql - 将时间序列数据存储在数据库或二进制文件中

> ID：14118671
> 
> 赞同：1
> 
> 时间：2013-01-02T08:02:40.567
> 
> 标签：mysql, database

我正在存储大量时间序列金融市场报价数据。

通常，这些数据是按顺序写入的（即 - 数据在进入时加上时间戳，然后写入 db）。

我需要根据时间戳读取数据（仅） - 即一般查询类似于“选择 2012 年 1 月 1 日至 2012 年 2 月 1 日之间的所有数据”。

**问题：**如果 READ 性能是最重要的，我是否最好将此数据存储在二进制文件或 mySQL 数据库中？

在我看来，数据的特性可能更适合文件，而我的初步测试似乎表明这样更快（即，我可以更快地读回数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T09:11:51.753

您的描述仅涉及时间维度。但是其他维度是什么？可能是不同的金融工具（MSFT、IBM、AAPL 等）。

金融市场数据的本质通常是按时间维度排序（每天更新数十万个股票价格），但按金融工具维度查询（查询单个工具的所有价格，可能有点受限于时间）。

因此，如果您想要最大的读取性能，您必须确保您的数据不是以接收方式存储，而是以查询方式存储，即在磁盘上，必须按金融工具进行物理排序。

我过去在 Oracle 中成功地实现了这一点。在那里，您基本上创建了一个索引组织表，其中金融工具标识符和日期作为主键（标识符必须是第一个）。然后，Oracle 将或多或少地存储按金融工具标识符和日期排序的数据。因此，如果您在给定时间范围内查询单个工具的股票价格，所有需要的数据都将位于连续的磁盘页面上，并且已经处于所需的顺序，因此查询将非常快。

我对MySQL没有太多经验。但据我了解，您可以使用 InnoDB 存储引擎和聚集索引来实现相同的效果：

```
CREATE TABLE prices (
    ticker CHAR(10),
    date DATE,
    close NUMBER(10, 4),
    PRIMARY KEY (ticker, date)
) ENGINE=InnoDB; 
```

请不要使用二进制文件。你会后悔的。

# c# - 如何检查双精度值是 Int 还是 double

> ID：14118672
> 
> 赞同：2
> 
> 时间：2013-01-02T08:03:01.723
> 
> 标签：c#

是不是任何计算或方法都允许我检查 c# 代码中的双精度值是 Int 还是 Double

例子

```
Double NumberOne = 55.00 // Return False 
Double NumberTwo = 55.10 // Return True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T08:05:43.013

采用[`Math.Floor`](http://msdn.microsoft.com/en-us/library/system.math.floor%28v=vs.71%29.aspx)

```
 if (Math.Floor(number) == number) {
     // yay, an "int"
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:10:09.217

```
 private bool IsDoubleNotAnInt(double num)
    {
        if ((num % 1) == 0)
        {
            return false;
        }
        else
        {
            return true;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T08:10:08.453

你可以检查

```
n % 1 == 0 
```

来确定这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T08:06:23.663

您可以将其与不带小数部分的值进行比较：

```
Math.Floor(n) != n 
```

# php - Android 默认浏览器不会从 PC localhost 下载 .txt 文件

> ID：14118677
> 
> 赞同：0
> 
> 时间：2013-01-02T08:03:27.487
> 
> 标签：php, android, browser

我在 Wamp Server 上运行的 PHP 上编写了一个脚本，该脚本强制下载 .txt 文件。该脚本如下所示：

```
header("Content-Type: application/octet-stream");

$newfile = "data.txt";
header("Content-Disposition: attachment; filename=" . urlencode($newfile));   
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . filesize($newfile));
flush(); // this doesn't really matter.
$fp = fopen($newfile, "r");
while (!feof($fp))
{
    echo fread($fp, 65536);
    flush(); // this is essential for large downloads
} 
fclose($fp); 
```

这段代码运行良好。

但问题是，我已经将我的 Android 设备连接到 PC，并且能够使用任何其他浏览器下载此文件，但不是 Android 默认 Web 浏览器。

有谁知道为什么在默认浏览器上下载失败？但是可以从其他Android上下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:10:08.453

出于某种原因，Android 浏览器对 HTTP 标头非常挑剔。

此页面将为您提供有关此事的一些见解：[http ://www.digiblog.de/2011/04/android-and-the-download-file-headers/](http://www.digiblog.de/2011/04/android-and-the-download-file-headers/)

要引用页面的一部分，如果你使用这行代码，它可能不起作用。

`Content-Type: application/force-download`

该页面还为您提供了一些可能的解决方案。

# eclipse - Eclipse：项目资源管理器中未显示文件

> ID：14118678
> 
> 赞同：1
> 
> 时间：2013-01-02T08:03:35.337
> 
> 标签：eclipse, eclipse-indigo

我试图在 Eclipse 上打开某个项目。但是当我浏览项目的位置并选择它时，它会加载然后给我一个空的项目资源管理器。为什么？

我不知道这是否相关，但我试图打开的项目是在与我不同的机器上创建的。我要提到这一点，因为当我尝试打开我在我的机器上创建的项目时，所有文件都显示在项目资源管理器中，我没有遇到任何问题。

那么这背后的原因可能是什么？我该如何解决？我应该导入文件而不是将整个路径作为工作台打开吗？

# c++ - 如何将 const char* 注入 FILE 类

> ID：14118682
> 
> 赞同：0
> 
> 时间：2013-01-02T08:03:57.807
> 
> 标签：c++

如何修改此函数以从字符串而不是文件中读取？glfxin 显然是一个 FILE 对象。如果我能以某种方式将 const char* 注入到 FILE 类中，我就会被设置。有任何想法吗？

```
bool glfxParseEffectFromFile( int effect, const char* file )
{
    bool retVal=true;

    fopen_s(&glfxin, file, "r");
    if(glfxin==NULL) {
        gEffects[effect]->Log()<<"Cannot open file "<<file<<endl;
        gEffects[effect]->Active()=false;
        return false;
    }
    try {
        //glfxdebug=1;
        gEffect=gEffects[effect];

        string fname(file);
        size_t lastSlash=fname.find_last_of('/')+1;
        size_t lastBackSlash=fname.find_last_of('\\')+1;
        lastSlash=max(lastSlash, lastBackSlash);
        gEffect->Dir()=fname.substr(0, lastSlash);

        glfxrestart(glfxin);
        glfxset_lineno(1);
        glfxparse();
    }
    catch(const char* err) {
        gEffect->Log()<<err<<endl;
        gEffect->Active()=false;
        retVal=false;
    }
    catch(const string& err) {
        gEffect->Log()<<err<<endl;
        gEffect->Active()=false;
        retVal=false;
    }
    catch(...) {
        gEffect->Log()<<"Unknown error occurred during parsing of "<<file<<endl;
        gEffect->Active()=false;
        retVal=false;
    }

    fclose(glfxin);
    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:11:55.920

在符合 POSIX 的系统上，您可以使用该[`fmemopen()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)函数将字符数组作为`FILE *`对象打开。

# report - 使用 rs.exe 报告部署生成未经授权的问题

> ID：14118686
> 
> 赞同：1
> 
> 时间：2013-01-02T08:04:31.467
> 
> 标签：report

最近我一直在使用 rs.exe 进行报表部署。有http状态401：未授权阻止我。我做了什么

1.  在 Windows Server 2008 vm 机器上安装了 sql server 2012 和 report server 2008
2.  使用参数 a 配置报表服务器。使用内置帐户：网络服务 b. 对于 Web 服务 URL，IP 地址：All Assigned，端口：80，URL 为 http://:80/ReportServer c. 与经理 URL 相同的设置，它是 http://:80/Reports
3.  为了测试，我关闭了防火墙，删除了 IIS 中的默认站点。
4.  创建了一个示例报告
5.  使用调用 rs.exe 的批处理文件部署它

我看到的第一个问题。在第 2 步之后，我在 Reporting Service Configuration Manager 中单击了 Web 服务 URL 或管理器 URL 的测试链接。结果是

“错误

所请求的网址无法检索

尝试检索 URL 时遇到以下错误：http://..com/Reports

无法从主机名 ..com 确定 IP 地址 DNS 服务器返回：

名称错误：域名不存在。……”

我不确定为什么以及如何将 .com 附加到域名。

第二个问题是我在本地运行了以下命令行

```
rs.exe -i PublishSampleReports.rss -s http://localhost:80/ReportServer -e Mgmt2010 -v reportName=<MyReportName> -t 
```

该命令运行良好，可以部署报告。但是，如果我使用 IP 地址替换 localhost，并使用用户名和密码，我会得到 http 状态 401：未经授权的问题。例如，

```
rs.exe -i PublishSampleReports.rss -s http://<xxx.xxx.xx.xx>:80/ReportServer -u <username> -p <password> -e Mgmt2010 -v reportName=<MyReportName> -t 
```

同时，当我使用“localhost”时，我可以在 http 日志文件中看到客户端 ip 和用户名。另一方面，当我使用 ip 地址时，日志文件中没有这样的 ip 和用户名。我可以使用 localhost 和 IP 地址通过 Web 浏览器访问报表 Web 服务。我不确定为什么那里有未经授权的问题？请你们告诉我我错过了什么？

# c# - 多播和广播推送通知

> ID：14118689
> 
> 赞同：1
> 
> 时间：2013-01-02T08:04:44.290
> 
> 标签：c#, windows-phone-7, push-notification, broadcast, multicast

我正在寻找一种方法来向多个 wp7 设备发送多播或广播推送通知，就像在 iphone 中一样，但没有找到任何代码示例或任何文档。我正在使用 C# 语言。难道windows phone就没有这个概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:14:36.423

Microsoft 推送通知服务当前不支持多播推送通知。您将必须遍历所有订阅并分别向每个订阅发送一个推送。

但是，有一个使用 azure 向 WP8 设备发送某种广播的教程。

[http://www.windowsazure.com/en-us/develop/mobile/tutorials/push-notifications-to-users-wp8/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/push-notifications-to-users-wp8/)

这是针对 iPhone/Android 开发人员的 WP7 开发人员指南。有一章涵盖了推送并在 iPhone 应用程序的上下文中解释了 WP7 推送。

[http://www.docstoc.com/docs/114462919/Windows-Phone-7-Guide-for-Android-Application-Developers](http://www.docstoc.com/docs/114462919/Windows-Phone-7-Guide-for-Android-Application-Developers)

# createuserwizard - CreateUserWizard 中的文件上传

> ID：14118694
> 
> 赞同：1
> 
> 时间：2013-01-02T08:05:16.020
> 
> 标签：createuserwizard

我有一个 createuserwizard (cuw) 控件，我想添加更多字段（自定义）。我需要将此信息存储在名为“UserProfiles”的数据库中。我添加了一个文件上传控件来存储图像（头像），问题就在这里。当我刷新我的数据库时（在我填充了 cuw 控件之后）我可以看到所有列的新数据，除了图像列。我想问题出在后面的代码中。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Web.Configuration;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
    CreateUserProfile(CreateUserWizard1.UserName, txtFirstName.Text, txtLastName.Text, CreateUserWizard1.Email, CreateUserWizard1.Password, imgUpload.FileName);
}

private void CreateUserProfile(string UserName, string Gender, string LookingFor, string Email, string Password, string Image)
{
    string conString = WebConfigurationManager.ConnectionStrings["UserProfiles"].ConnectionString;
    SqlConnection con = new SqlConnection(conString);
    SqlCommand cmd = new SqlCommand("INSERT UserProfiles (UserName,Gender,LookingFor,EMail,Password,Image) VALUES (@UserName,@Gender,@LookingFor,@EMail,@Password,@Image)", con);
    cmd.Parameters.AddWithValue("@UserName", UserName);
    cmd.Parameters.AddWithValue("@Gender", Gender);
    cmd.Parameters.AddWithValue("@LookingFor", LookingFor);
    cmd.Parameters.AddWithValue("@EMail", Email);
    cmd.Parameters.AddWithValue("@Password", Password);
    cmd.Parameters.AddWithValue("@Image", Image);
    using (con)
    {
        con.Open();
        cmd.ExecuteNonQuery();
    }
}
} 
```

我是初学者。在此先感谢您的帮助。

# php - 为什么发送的邮件内容是原始 html 代码？

> ID：14118695
> 
> 赞同：0
> 
> 时间：2013-01-02T08:05:28.873
> 
> 标签：php, html, email, encoding

**邮件内容：**

```
<html><head></head><body><p> Message : 鏽嫌╒杜米土 杯屎</p>Share Link : <a href = "http://203.80.1.28/FlippingBook/development/flipV5.html?page=70"> Press here to enter </a><br><img src ='http://203.80.1.28/FlippingBook/development/demo/medium/Web081112_P070_medium.jpg' /></body></html> 
```

**PHP：**

```
if (isset($_POST["data"])){
    $info = explode("&", $_POST["data"]);
    $headers  = 'MIME-Version: 1.0\r\n';
    $headers .= "Content-Type: text/html; charset = \"UTF-8\";\n";
    $headers = "From: =?UTF-8?B?" . base64_encode(substr($info[0],strpos($info[0],'=')+1, strlen($info[0]))) . "?=";
    $to = substr($info[1],strpos($info[1],'=')+1, strlen($info[1]));
    $subject = "=?UTF-8?B?" . base64_encode('日報分享') . "?=";
    $message = trim(substr($info[2],strpos($info[2],'=')+1, strlen($info[2])));
    $message = '<html><head></head><body><p> Message : '.$message;
    $url = substr($info[3],strpos($info[3],'=')+1, strlen($info[3]));
    $message = $message. '</p>Share Link : <a href = "'.$url.'"> Press here to enter </a>'; 

    if (isset($info[4])){
    $firstImg = substr($info[4],strpos($info[4],'=')+1, strlen($info[4]));
    $message = $message."<br><img src ='".$firstImg."' />";
    }

    if (isset($info[5])){
    $secondImg = substr($info[5],strpos($info[5],'=')+1, strlen($info[5]));
    $message = $message."<br><img src ='".$secondImg."' />";
    }
    $message = $message.'</body></html>';

    if (mail($to, $subject, $message, $headers))
    die ('Mail sent');
    else
    die ('Fail');
}else{
    die ('Fail');
} 
```

我正在编写一个简单的程序来发送电子邮件。但是，我的邮件内容不是基于英文的，所以我使用 utf-8 进行编码。

当我更改编码方法时，它无法发送处理后的html代码，而是邮件内容是上面显示的原始html代码，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:20:08.030

如果使用 PEAR 库没有问题，那么您可以寻找 Pear Mail-Mime 库来发送邮件或 HTML 内容。您可以从这里获得更多详细信息 - [http://pear.php.net/manual/en/package.mail.mail-mime.example.php](http://pear.php.net/manual/en/package.mail.mail-mime.example.php)

# android - 如何在 webview 中为手机和平板电脑提供两个链接？

> ID：14118699
> 
> 赞同：4
> 
> 时间：2013-01-02T08:05:49.313
> 
> 标签：android, android-layout, android-intent, android-widget

我有两个链接，例如：说 facebook.com 和 m.facebook.com。如果是 android 手机，我想

打开 m.facebook.com。如果是 android 平板电脑，我想打开 facebook.com 链接。我想在

webview.这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T08:34:21.023

这是另一个使用的解决方案`simple flag`：

在特定的值文件中设置一个布尔值，例如 say ( `res/values-xlarge/`)：

```
<resources>
    <bool name="isTabletDevice">true</bool>
</resources> 
```

然后，在“标准”值文件中，例如 say ( `res/values/`)：

```
<resources>
    <bool name="isTabletDevice">false</bool>
</resources> 
```

然后从你的`activity`，取这个`flag value`来检查`device type`：

```
boolean tabletDeviceSize = getResources().getBoolean(R.bool.isTabletDevice);
if (tabletDeviceSize) {
    //use tablet link
} else {
    //use mobile link
} 
```

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:10:06.237

试试这个可能对你有帮助。

```
public static boolean isTablet(Context context) {
    boolean xlarge = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4);
    boolean large = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE);
    return (xlarge || large);
}

if(isTablet(context)) {
    //use tablet link
}
else {
    //use mobile link.
} 
```

# c++ - 如何设置 log4cxx 控制台输出的颜色？

> ID：14118703
> 
> 赞同：3
> 
> 时间：2013-01-02T08:06:11.450
> 
> 标签：c++, log4cxx

我可以找到 log4j 的解决方案，但不能找到 log4cxx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T06:19:23.347

我有一个简单的解决方案。

```
extern LoggerPtr logger;

#define LOG_TRACE(msg) LOG4CXX_TRACE(logger, msg)
#define LOG_DEBUG(msg) LOG4CXX_DEBUG(logger, msg)
#define LOG_INFO(msg) LOG4CXX_INFO(logger, msg)
#define LOG_INFO_H(msg) LOG4CXX_INFO(logger, "\33[0;42m" << msg << "\33[0m") // green
#define LOG_WARN(msg) LOG4CXX_WARN(logger, "\33[0;43m" << msg << "\33[0m") // yellow
#define LOG_ERROR(msg) LOG4CXX_ERROR(logger, "\33[0;41m" << msg << "\33[0m") // red
#define LOG_FATAL(msg) LOG4CXX_FATAL(logger, "\33[0;41m" << msg << "\33[0m") // red 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-06T16:44:58.743

当谷歌把我带到这里时，我发布了我的解决方案，希望它能帮助别人。

我为 c++ 实现了我为 log4j 找到的[这个](https://stackoverflow.com/a/7848461/2883580)`Layout`解决方案，创建了一个继承自`PatternLayout`. 它只是将标准的输出包装`log4cxx::PatternLayout`在颜色转义序列中。

我将以下内容放入 cpp 文件中（如果您愿意，可以将其拆分为 hpp/cpp）：

```
#include <log4cxx/helpers/pool.h>
#include <log4cxx/patternlayout.h>
namespace log4cxx{
class LOG4CXX_EXPORT ColorPatternLayout : public log4cxx::PatternLayout
{
public:
    DECLARE_LOG4CXX_OBJECT(ColorPatternLayout)
    BEGIN_LOG4CXX_CAST_MAP()
        LOG4CXX_CAST_ENTRY(ColorPatternLayout)
        LOG4CXX_CAST_ENTRY_CHAIN(Layout)
    END_LOG4CXX_CAST_MAP()

    ColorPatternLayout();
    ColorPatternLayout(const log4cxx::LogString &s);
    virtual void format(log4cxx::LogString &output, const log4cxx::spi::LoggingEventPtr &event, log4cxx::helpers::Pool &pool) const override;
};
LOG4CXX_PTR_DEF(ColorPatternLayout);
}

using namespace log4cxx;
IMPLEMENT_LOG4CXX_OBJECT(ColorPatternLayout);
ColorPatternLayout::ColorPatternLayout() : log4cxx::PatternLayout(){}

ColorPatternLayout::ColorPatternLayout(const LogString &s): log4cxx::PatternLayout(s){}

void ColorPatternLayout::format(LogString &output, const spi::LoggingEventPtr &event, helpers::Pool &pool) const
{
    log4cxx::LogString tmp;
    log4cxx::PatternLayout::format(tmp,event,pool);
    log4cxx::LevelPtr lvl = event->getLevel();
    switch (lvl->toInt()){
    case log4cxx::Level::FATAL_INT:
        output.append("\u001b[0;41m"); //red BG
        break;
    case log4cxx::Level::ERROR_INT:
        output.append("\u001b[0;31m"); // red FG
        break;
    case log4cxx::Level::WARN_INT:
        output.append("\u001b[0;33m"); //Yellow FG
        break;
    case log4cxx::Level::INFO_INT:
        output.append("\u001b[1m"); // Bright
        break;
    case log4cxx::Level::DEBUG_INT:
        output.append("\u001b[2;32m"); // Green FG
        break;
    case log4cxx::Level::TRACE_INT:
        output.append("\u001b[0;30m"); // Black FG
        break;
    default:
        break;
    }
    output.append(tmp);
    output.append("\u001b[m");
} 
```

当然，配置您的记录器以使用此布局类，并像使用 PatterLayout 一样使用它，例如在`log4cxx.properties`文件中：

```
log4j.appender.EXAMPLE=org.apache.log4j.ConsoleAppender
log4j.appender.EXAMPLE.layout=org.apache.log4j.ColorPatternLayout
log4j.appender.EXAMPLE.layout.ConversionPattern=%-5p %c %x - %m%n 
```

# python - 由于数组大小，python中的运行时错误

> ID：14118706
> 
> 赞同：0
> 
> 时间：2013-01-02T08:06:39.687
> 
> 标签：python, arrays, runtime-error

```
import psyco
psyco.full()
n=int(raw_input('Enter how many test cases'))
out=[]
for i in range(n):
    r=raw_input('Enter the number of people and minimum distance')  
    temppeople=''   
    tempdistance=''
    l=len(r)
    k=0
    z=0
    newpos=[]
    dis=[]
    while r[k]!=' ': k=k+1
    for j in range(k): temppeople=temppeople+r[j]
    for z in range(k+1,l): tempdistance=tempdistance+r[z]
    people=int(temppeople)
    distance=float(tempdistance)
    print 'Enter the respective distances'
    pos=[float(input()) for m in range(people)]
    if (pos[0]+pos[1])<=distance:
        newpos.append(0)
        newpos.append(distance)
        z=distance
    else:
        newpos.append(pos[0]/2)
        newpos.append((pos[0]/2)+distance)
        z=(pos[0]/2)+distance
    if people>2:
        for a in range(2,people):
            z=z+distance
            newpos.append(z)
    for b in range(people):
        dis.append((abs(pos[b]-newpos[b])))
    out.append((max(dis)))
for q in out:
    print q 
```

我为[code chef 中的 flushot 阵容问题](http://www.codechef.com/problems/FLUSHOT)编写了这段代码。但是它显示运行时错误。我认为这是由于数组大小。我该怎么做才能更正代码。

# jquery - 使用 jquery 在文本框中显示选定的列表框项目

> ID：14118708
> 
> 赞同：0
> 
> 时间：2013-01-02T08:06:53.697
> 
> 标签：jquery

我有一个任务将从列表框中选择的多个项目追加到文本框。我尝试使用 Jquery 将代码实现为：

```
$("#<%= ListBlankToken.ClientID %>").change(function () {
            var SelectedITem = $("#<%= ListBlankToken.ClientID %>").select.toString();
            $("#<%= txtManagedocumentpage.ClientID %>").append(SelectedITem);
        }); 
```

它不会将所选项目附加到文本框中。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:11:35.753

请阅读[JQuery API](http://api.jquery.com/val/)以供参考。

之后，试试这个代码：

```
var SelectedITem = $("#<%= txtManagedocumentpage.ClientID %>").val() + $("#<%= ListBlankToken.ClientID %>").val();

$("#<%= txtManagedocumentpage.ClientID %>").val(SelectedITem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:39:40.503

`append()`不使用`Text object`它`DOM element, HTML string, or jQuery object`

这就是你想要的：

```
$("#<%= ListBlankToken.ClientID %>").change(function () {
    var SelectedITem = $("#<%= ListBlankToken.ClientID %> :selected");  
    SelectedITem.each(function(){
        $("#<%= txtManagedocumentpage.ClientID %>")
                .val($("#<%= txtManagedocumentpage.ClientID %>").val() + 
                $(this).text() + ',');
    })
}); 
```

## 演示：[JSFiddle](http://jsfiddle.net/5gVYR/)

# jquery - JQUERY：在 AJAX 生成的结果上使用 sortable() (PHP/MySQL)

> ID：14118710
> 
> 赞同：1
> 
> 时间：2013-01-02T08:07:02.620
> 
> 标签：jquery, mysql, ajax, jquery-ui-sortable

我一直在使用 sortable() 功能，并且我已经让它在静态数据库结果上运行良好，但是我注意到我无法让它在 AJAX 生成的数据库结果上工作。我觉得这与我如何在 $(document).ready(function() 中调用 sortable() 函数有关，但我不确定 100%。我已经搜索了这个论坛和其他论坛，看看是否有其他人有这个问题，但我还没有发现任何类似的东西，所以这是我描述我的问题的尝试：

我有一个名为“db_objects”的 MySQL 数据库，其中包含 1 个表：

```
CREATE TABLE IF NOT EXISTS `tbl_objects` (
  `obj_id` int(11) NOT NULL AUTO_INCREMENT,
  `obj_name` varchar(50) DEFAULT NULL,
  `obj_type` int(11) DEFAULT NULL,
  PRIMARY KEY (`obj_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10 ;

INSERT INTO `tbl_objects` (`obj_id`, `obj_name`, `obj_type`) VALUES
(1, 'Sam', 1),
(2, 'John', 1),
(3, 'Tom', 1),
(4, 'Bob', 1),
(5, 'Fluffy', 2),
(6, 'Paws', 2),
(7, 'Kitty', 2),
(8, 'Tibbles', 2),
(9, 'Mr. Meow', 2); 
```

现在，我有一个 HTML 页面，我想根据一个下拉框查看该表上的结果，该下拉框按 obj_type 列过滤（1 = 人名，2 = 猫名）：

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'><html xmlns='http://www.w3.org/1999/xhtml'><head><title>SORTABLE EXAMPLE</title>
<link rel='stylesheet' href='http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css'>
<script src='http://code.jquery.com/jquery-1.8.3.js'></script>
<script src='http://code.jquery.com/ui/1.9.2/jquery-ui.js'></script>
<style>
div.div_container {
 background:#0F6;
 max-width:400px;
 padding: 10px 10px 10px 10px;
}
h2.h2_med_green { 
 display: inline;
 font-weight:normal;
 color:#090;
 font-size: 1.4em;
}
ul { 
 list-style: none;
 padding: 0px 0px 0px 0px;
 margin: 0px 0px 0px 0px;
}
li.li_sortable {
 cursor: hand; 
 cursor: pointer;
 border-bottom: 1px dotted #999999;
 background:#DDDDDD;
 height: 31px;
   line-height: 31px;
}
</style>
<script type='text/javascript'>
 $(document).ready(function() {
 //CALL SORTABLE FUNCTIONALITY
 $('#ul_sortable').sortable();
 //CALL AJAX RESULTS
 showAJAXResults(1);
 });
</script>
</head>
<body>
<div class="div_container">
    Click and drag each round to re-order.<br />Object Type:&nbsp;
    <select id="ajax_select_type">
     <option value="1">Human</option>
        <option value="2">Feline</option>
    </select>
    <div id="ajax_results"></div>
</div>
<script>
$("#ajax_select_type").change( function() {
 //CALL AJAX DBR
 showAJAXResults($(this).val());
});
function showAJAXResults(obj_type){

 //HTTP REQUEST CODE
 if (window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();} // code for IE7+, Firefox, Chrome, Opera, Safari
 else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}// code for IE6, IE5    
 xmlhttp.onreadystatechange=function(){if (xmlhttp.readyState==4 && xmlhttp.status==200){document.getElementById("ajax_results").innerHTML=xmlhttp.responseText;}}

 //ASSEMBLE THE PAGE CALL VALUE
 var page_call_value = "ajax/ajax_page.php?t="+obj_type;

 //CALL THE AJAX PAGE
 xmlhttp.open("GET",page_call_value,true);
 xmlhttp.send();
} 
</script>
</body>
</html> 
```

最后，上面的页面链接到以下通过 AJAX 调用的 PHP 页面：

```
<?php 
 //DETERMINE INPUT VALUES 
 $object_type=$_GET["t"]; 

 //CONNECT TO THE DATABASE 
 $con = mysql_connect("localhost","<USERNAME>","<PASSWORD>"); 
 mysql_select_db("db_objects", $con); 

 //GET SQL QUERY 
 $q_db_result = "SELECT DISTINCT obj_id, obj_name, obj_type 
 FROM tbl_objects 
 WHERE obj_type = '".$object_type."' 
 ORDER BY obj_name"; 

 //Execute the FULL_RESULT_QUERY QUERY 
 $sql_results = mysql_query($q_db_result) or die(mysql_error()); 

 //TURN THE RESULTS RETRIEVED INTO AN ARRAY 
 $results_array = array(); 
 while($row = mysql_fetch_assoc($sql_results)){ 
 $results_array[$row['obj_id']]['obj_name'] = $row['obj_name']; 
 $results_array[$row['obj_id']]['obj_type'] = $row['obj_type']; 
 } 

 //ASSEMBLE THE RESULTS 
 if(sizeof($results_array)>0){ 

 foreach($results_array as $obj_id => $result_details){ 
 //DECLARE VARIABLES 
 $obj_name=$result_details['obj_name']; 
 $obj_type=$result_details['obj_type']; 

 $return_value .= "<li class='li_sortable' value='".$obj_id."'><h2 class='h2_med_green'>".$obj_name."</h2></li>\n"; 
 } 

 //PUT THE UL TAGS AROUND THE HTML CODE 
 $return_value = "<ul id='ul_sortable'>\n".$return_value."</ul>\n"; 

 //PUT THE RESULTS IN THE INNER CONTAINER DIV 
 $return_value = "<div id='ajax_results_ic' class='ajax_results_ic_2'>".$return_value."</div>"; 

 }else{ 
 $return_value = "NO RESULTS RETURNED"; 
 } 

 //DISPLAY HTML CODE 
 echo $return_value; 

 //CLOSE DB CONNECTION 
 mysql_close($con); 
?> 
```

现在，如果你可以让它工作，你会注意到 sortable() 功能不起作用。正如我之前提到的，我认为这与数据库结果是由 AJAX 即时生成的事实有关，因此尝试在 $(document).ready(function 中声明/调用 sortable() 功能() 不起作用，即

```
$(document).ready(function() {
 $('#ul_sortable').sortable();
}); 
```

我不知道如何解决这个问题 - 有人有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:13:33.880

您可以`sortable()`在附加 reponseText 后调用该函数..以便它获取动态生成的 DOM 元素...

```
xmlhttp.onreadystatechange=function(){if (xmlhttp.readyState==4 && xmlhttp.status==200){document.getElementById("ajax_results").innerHTML=xmlhttp.responseText;$('#ul_sortable').sortable();}}  //here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:26:25.223

ul_sortable 来自加载 HTML 时不包含的 ajax_page.php。所以你可以把 $('#ul_sortable').sortable(); 在您的 ajax 请求完成后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:32:54.113

尝试使用这种方式：

```
<script>
function showAJAXResults(obj_type){
  //HTTP REQUEST CODE
  if (window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();} // code for IE7+, Firefox, Chrome, Opera, Safari
 else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}// code for IE6, IE5    
 xmlhttp.onreadystatechange=function(){if (xmlhttp.readyState==4 && xmlhttp.status==200)     {document.getElementById("ajax_results").innerHTML=xmlhttp.responseText;}}

 //ASSEMBLE THE PAGE CALL VALUE
 var page_call_value = "ajax/ajax_page.php?t="+obj_type;

 //CALL THE AJAX PAGE
 xmlhttp.open("GET",page_call_value,true);
 xmlhttp.send();
} 

$(document).ready(function() {     // <--------doc ready handler for the change event
   $("#ajax_select_type").change(function() {
     //CALL AJAX DBR
     showAJAXResults($(this).val());

     $('#ul_sortable').sortable(); // <----- put it here after showAJAXResults() function

   });
});
</script> 
```

不确定，但`try putting it after your ajax call`在里面的`change`功能`dropdown``doc ready handler`

# html - 仅 URL 参数作为锚点中的 href 参数

> ID：14118721
> 
> 赞同：1
> 
> 时间：2013-01-02T08:08:16.450
> 
> 标签：html, anchor, href

我想创建一个导航到同一页面的锚点，但会更改一些 Url 参数。这是一个例子：

```
<a href='?hello=world'>Test</a> 
```

我在 IE、Chrome 和 Firefox 中对其进行了测试，但想避免任何令人讨厌的惊喜。那么这是锚的有效 href 参数吗？

# hash - Nginx Upload 模块中的 Hash 有什么用？

> ID：14118723
> 
> 赞同：3
> 
> 时间：2013-01-02T08:08:22.943
> 
> 标签：hash, upload, nginx

我已经使 Nginx Upload 与 Python (Tornado) 一起正常工作。我将上传文件的路径保存在数据库中。

但是，我想知道为什么上传模块必须拆分我的上传并将它们放入 10 个不同的文件夹中`/var/www/.../uploads/0,1,2,3,4,5...9`？下面的评论说文件被散列了，模块是什么以及为什么这样做？

```
 # Store files to this directory
  # The directory is hashed, subdirectories 0 1 2 3 4 5 6 7 8 9 should exist
  upload_store /var/www/...uploads 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:03:42.083

```
# filesystem location where we store uploads
#
# The second argument is the level of "hashing" that nginx will perform
# on the filenames before storing them to the filesystem. I can't find
# any documentation online, so as an example, say we were using this
# configuration:
#
#   upload_store /tmp/uploads 2 1;
#
# A file named '43829042' would be written to this path:
#
#   /tmp/uploads/42/0/43829042
#
# I hope that's clear enough. The argument is required and must be
# greater than 0\. You can see the implementation here:
#
#  http://lxr.evanmiller.org/http/source/core/ngx_file.c#L118 
```

资料来源：[http ://bclennox.com/extremely-large-file-uploads-with-nginx-passenger-rails-and-jquery](http://bclennox.com/extremely-large-file-uploads-with-nginx-passenger-rails-and-jquery)

# c# - WorkingSet64 和 PagedMemorySize64 之间的差异

> ID：14118724
> 
> 赞同：0
> 
> 时间：2013-01-02T08:08:24.133
> 
> 标签：c#, .net, memory-management

> **可能重复：**
> [什么是私有字节、虚拟字节、工作集？](https://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set)

我正在阅读一个项目，程序员编写此代码来检查程序内存

```
if ((Process.GetCurrentProcess().WorkingSet64 + Process.GetCurrentProcess().PagedMemorySize64) > (long)2048* (long)1024 * (long)1024)
                {

                    Program.Log("memory is over 2G! ----- !closed!" );

                    Restart();
                } 
```

我想知道为什么程序员添加 PagedMemorySize64 和 WorkingSet64 来计算当前内存大小？

WorkingSet64 还不够吗？

是真的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T08:22:50.520

因为他相信应用程序使用的总内存是已“分页”到磁盘的内存（不使用物理内存）和当前“工作集”的组合，我假设他相信是当前的总物理内存应用程序使用。

所以：WorkingSet64 (phys mem) + PagedMemorySize64 (mem paged to disk) = 分配的总内存

这很快就会变得复杂，您会发现对于“我占用了多少内存？”这个问题没有一个真正的答案。.Net 文档中关于这些属性的不太好也无济于事，而且这些示例对于了解这些属性的含义也无济于事。

如果您想深入了解它，您可能需要阅读有关 Windows 内存管理的信息，包括页面文件、共享 DLL、Windows 内存页面和 Windows 堆，以及它们是如何工作的。例如，应用程序可以在其虚拟内存地址空间中分配一个堆，但不能将该堆中的页面提交到映射到真实内存。有人可能会问，我想知道这两个中的哪一个？

# codeigniter - codeigniter 中的 set_value 没有响应

> ID：14118727
> 
> 赞同：1
> 
> 时间：2013-01-02T08:08:40.497
> 
> 标签：codeigniter, codeigniter-2

我是 codeigniter 的新手，我正在尝试用户指南中的教程。但我只是卡在一个地方。在表单验证的代码中。我正在尝试 set_value 属性的示例，但我的用户文本框没有返回任何内容。

在我看来，我添加了以下代码：

```
<?php echo validation_errors();?>
<?php echo form_open('form');?>
<table border="0">
<tr>
    <td><h5>Username</h5></td>
    <td><input type="text" name="username" value="" size="50" value="<?php echo set_value('username'); ?>" /></td>
</tr>
<tr>
    <td><h5>Password</h5></td>
    <td><input type="password" name="password" value="" size="50" accept=" <?php echo set_value('password'); ?>" /></td>
</tr>
<tr>
    <td><h5>password Confirm</h5></td>
    <td><input type="password" name="passconf" value="" size="50"  /></td>
</tr>
<tr>
    <td><h5>Email Addres</h5></td>
    <td> <input type="text" name="email" value="" size="50" accept="<?php echo set_value('email'); ?>" /></td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td><div><input type="submit" value="Submit" /></div></td>
</tr>
</table>
</form> 
```

在我的控制器中，我添加了以下代码：

```
function index()
{
    $this->load->helper(array('form', 'url'));

    $this->load->library('form_validation');

    $this->form_validation->set_rules('username','username','required|min_length[5]|max-length[10]|xss_clean');
    $this->form_validation->set_rules('password','password','required');
    $this->form_validation->set_rules('passconf','password confirmation','required');
    $this->form_validation->set_rules('email','email','required');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('myform');
    }
    else
    {
        $this->load->view('formsucces');
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:41:39.777

您的输入类型中有两个值属性..

试试这个...

```
<td><input type="text" name="username" size="50" value="<?php echo set_value('username'); ?>" /></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:50:22.430

CI和表单验证存在一些问题......

您需要自己的助手从 POST 数组中获取指定字段的值，以便您可以重新填充输入字段或文本区域。如果表单验证处于活动状态，它会从验证类中检索信息

```
if (!function_exists('set_value')) {
    function set_value($field = '', $default = '') {
            $OBJ = & _get_validation_object();

            if ($OBJ === TRUE && isset($OBJ->_field_data[$field])) {
                    return form_prep($OBJ->set_value($field, $default));
            } else {
                    if (!isset($_POST[$field])) {
                            return $default;
                    }
                    return form_prep($_POST[$field]);
            }
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T23:42:50.677

该解决方案有效，最佳答案。顺便说一句，两者有什么区别

```
<?php echo set_value('field_name'); ?> 
```

和

```
<?php echo @$_POST['field_name']; ?> 
```

# javascript - 如何在dojo路由器中显示视图？

> ID：14118733
> 
> 赞同：2
> 
> 时间：2013-01-02T08:09:14.397
> 
> 标签：javascript, mobile, require, dojo

我在 dojo 中创建了一个模板，看起来像这样。

```
<div id="test" data-dojo-type="dojox.mobile.View" class="test">
     <h1>TESTER</h1>
</div> 
```

并导入了一些dojo库并遵循dojo文档的代码。

```
require(["dojo/router"], function(router){
  router.register("test/:id", function(evt){
    // Will fire when the hash matches
    // evt.params.id will contain what is passed in :id
  });

  // Startup must be called in order to "activate" the router
  router.startup();
}); 
```

我已经完成了在 url 中获取 ':id' 的值，但是在我的浏览器控制台中显示了一个错误。

```
Uncaught TypeError: Cannot call method 'isVisible' of undefined 
```

这是因为没有为位置哈希调用和触发模板，并且我的模板的 id 不一样（ id='test' 和 'test/:id' ），因为我需要一个动态 url。

提前谢谢，上帝保佑.. ^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T21:58:32.567

这只是我如何做的一个例子，非常简单

```
require(["dojo/router", "dojo/dom"], function(router, dom){
    //Have a config, matching id/widget
    var pages = {
        "id1": "some/widget1",
        "id2": "some/widget2",
    }
    router.register("test/:id", function(evt){
        //require the widget and place it in some div
        require([pages[evt.params.id], function(Page){
            (new Page()).placeAt(dom.byId('somDiv'));
        });
    });

    router.startup();
}); 
```

# java - 未聚焦组件中的 KeyPressed 和 mousePressed 事件

> ID：14118734
> 
> 赞同：7
> 
> 时间：2013-01-02T08:09:16.160
> 
> 标签：java, swing, focus, mouseevent, key-events

1.  有哪些方法可以检测击键而不需要关注实现事件的组件？这是我对此的想法：
    即使不关注`myComponent`，在按键时，动作也应该参与。
    ** 活动的相同问题`mousePressed`。即使没有点击组件，也会检测到鼠标点击。**

    ```
    myComponent.addKeyListener( new KeyAdapter() {
     @Override
     public void keyPressed( KeyEvent e ){
      // My action here         
     }

    }); 
    ```

2.  回答后`Question1`，即使应用程序在后台运行，也可以这样做吗？假设我有一个浏览器，每次单击或按下某个键时，都会执行给定的操作。

我也接受建议作为答案阅读。如果您的答案与 KeyBinding 相关，请详细说明。所有答案和评论将不胜感激。

* * *

我在这里使用[了 JNativeHooks](http://code.google.com/p/jnativehook/downloads/detail?name=JNativeHook-1.1.2.zip&can=2&q=) [示例](http://code.google.com/p/jnativehook/wiki/examples)，它工作得非常好。仅通过Java的任何其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:51:23.047

对于第一个问题，关于 KeyStroke 的事情，我想您可以使用[KeyBinding](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是使用 KeyListener，这可以为您提供所需的结果，而无需关注相关组件的焦点相关问题，尽管在 Java 维度中。

在下面的示例中，焦点位于第`JTextField`一个，因此如果您将 Press `CTRL + D`，则附加到 the 的 paintAction`CustomPanel`将起作用，即使焦点位于`JTextField`.

虽然如果您将[setMnemonic()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setMnemonic%28char%29)方法用于`JButton`，那么`JButton`将获得焦点并执行与它相关的自己的操作，即绘制椭圆。这可以通过按`ALT + C`, 来查看，以查看所需的效果。再次执行绘图相关的事情，有问题的两个组件都不需要焦点，但它们仍然响应 KeyStrokes。

这是示例代码：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class SSCCE
{
    private final int WIDTH = 500;
    private final int HEIGHT = 500;
    private CustomPanel customPanel;
    private JButton circleButton;
    private JTextField tfield;
    private Random random;
    private int mode;

    private Action paintAction = new AbstractAction()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            mode = random.nextInt(3);
            Color color = new Color(random.nextFloat(), random.nextFloat()
                                                        , random.nextFloat(), random.nextFloat());
            customPanel.setValues(random.nextInt(WIDTH), 
                            random.nextInt(HEIGHT), random.nextInt(WIDTH), 
                                                                    random.nextInt(HEIGHT), color, mode);
        }
    };

    private ActionListener buttonAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            Color color = new Color(random.nextFloat(), random.nextFloat()
                                                        , random.nextFloat(), random.nextFloat());
            customPanel.setValues(random.nextInt(WIDTH), 
                            random.nextInt(HEIGHT), random.nextInt(WIDTH), 
                                                                    random.nextInt(HEIGHT), color, 2);
        }
    };

    public SSCCE()
    {
        random = new Random();
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));

        customPanel = new CustomPanel();
        customPanel.getInputMap(
            JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke(KeyEvent.VK_D
                    , InputEvent.CTRL_DOWN_MASK), "paintAction");
        customPanel.getActionMap().put("paintAction", paintAction);

        JPanel footerPanel = new JPanel();
        circleButton = new JButton("Draw Circle");
        circleButton.setMnemonic(KeyEvent.VK_C);
        circleButton.addActionListener(buttonAction);

        tfield = new JTextField(20);
        tfield.setText("USELESS, just to get the focus for itself.");
        tfield.requestFocusInWindow();
        footerPanel.add(tfield);
        footerPanel.add(circleButton);

        contentPane.add(customPanel, BorderLayout.CENTER);
        contentPane.add(footerPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new SSCCE().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private final int WIDTH = 500;
    private final int HEIGHT = 500;
    private int mode = 0;
    private Color colorShape;
    private int x = 0;
    private int y = 0;
    private int width = 0;
    private int height = 0;

    public void setValues(int x, int y, int w, int h, Color color, int mode)
    {
        this.x = x;
        this.y = y;
        this.width = w;
        this.height = h;
        this.colorShape = color;
        this.mode = mode;

        repaint();
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(WIDTH, HEIGHT));
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(colorShape);
        if (mode == 1)
            g.fillRect(x, y, width, height);
        else if (mode == 2)
            g.fillOval(x, y, width, height);
    }
} 
```

与thingy相关的`mousePressed()`@mKorbel 像往常一样以令人愉快的方式呈现了整个thingy。

关于您的第二个问题，您自己似乎已经为此做了一些功课。似乎使用您在问题中显示的内容是捕获操作系统相关事件并将其传输到您的 Java Application 或[**Java Native Interface**](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)的解决方法，我想也可能适用于此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T08:27:34.320

*   都有`JComponent`方法[dispatchEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#dispatchEvent%28java.awt.AWTEvent%29)，

*   您可以将`mouse`&`key`事件从一个重定向`JComponent`到另一个

*   改为`JButton`使用_`doClick()`

例如

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class LostMouseEvent {

    private JPanel panel1;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new LostMouseEvent();
            }
        });
    }

    public LostMouseEvent() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                panel1 = new JPanel() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 400);
                    }
                };
                JPanel panel2 = new JPanel() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(500, 300);
                    }
                };
                JScrollPane pane = new JScrollPane(panel2);
                panel1.setBorder(BorderFactory.createLineBorder(Color.blue));
                panel2.setBorder(BorderFactory.createLineBorder(Color.green));
                panel1.setLayout(new CircleLayout());
                panel1.add(pane);
                frame.add(panel1);
                MouseListener rml = new RealMouseListener();
                panel1.addMouseListener(rml);
                MouseListener fml = new FakeMouseListener();
                panel2.addMouseListener(fml);
                frame.pack();
                frame.setVisible(true);

            }
        });
    }

    private class RealMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            System.out.println(me);
            Point point = me.getPoint();
            System.out.println(me.getX());
            System.out.println(me.getXOnScreen());
            System.out.println(me.getY());
            System.out.println(me.getYOnScreen());
        }
    }

    private class FakeMouseListener extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent me) {
            JPanel panel2 = (JPanel) me.getSource();
            MouseEvent newMe = SwingUtilities.convertMouseEvent(panel2, me, panel1);
            System.out.println(newMe.getX());
            System.out.println(newMe.getXOnScreen());
            System.out.println(newMe.getY());
            System.out.println(newMe.getYOnScreen());
            panel1.dispatchEvent(me);
        }
    }
} 
```

# linux - 如何使用函数并将其变量传递给 linux 驱动程序 LM70 中定义的用户应用程序？

> ID：14118738
> 
> 赞同：0
> 
> 时间：2013-01-02T08:09:36.630
> 
> 标签：linux, linux-device-driver, embedded-linux, drivers

您好我想知道如何从用户空间调用/运行以下函数。

```
static ssize_t lm70_sense_temp(struct device *dev,
        struct device_attribute *attr, char *buf) 
```

{ //一些代码。. 状态 = sprintf(buf, "%d\n", val); /* 摄氏度 */ . . //一些代码 }

这个函数定义在 linux 源码的 kernel/drivers/hwmon 文件夹下的 lm70.c 驱动中？是否可以将此函数内部变量的值传递给用户应用程序？我想在上述函数中检索 val 变量的值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T22:28:38.137

您不需要从用户空间调用此函数来获取该值 - 它已经通过 sysfs 导出给您。

您可以使用 grep 来查找它是哪个 hwmon 设备：

```
grep -rl "lm70" /sys/class/hwmon/*/name /sys/class/hwmon/*/*/name 
```

然后你可以从你的用户空间程序中读取温度输入，例如：

```
#include <stdio.h>
#include <fcntl.h>

#define SENSOR_FILE "/sys/class/hwmon/hwmon0/temp1_input"

int readSensor(void)
{
    int fd, val = -1;
    char buf[32];
    fd = open(SENSOR_FILE, O_RDONLY);
    if (fd < 0) {
        printf("Failed to open %s\n", SENSOR_FILE);
        return val;
    }
    if (read(fd, &buf, sizeof(buf)) > 0) {
        val = atoi(buf);
        printf("Sensor value = %d\n", val);
    } else {
        printf("Failed to read %s\n", SENSOR_FILE);
    }
    close(fd);
    return val;
} 
```

正如其他人已经说过的那样 - 你不能从用户空间调用内核代码，他们的休息时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:27:10.133

我不太了解内核内部结构。但是，我`lm70_sense_temp`在整个内核源代码树中查找，它只出现在文件`linux-3.7.1/drivers/hwmon/lm70.c`中，首先作为静态函数，然后作为`DEVICE_ATTR`.

然后我用谷歌搜索`linux kernel DEVICE_ATTR`并立即找到了[device.txt](http://www.kernel.org/doc/Documentation/driver-model/device.txt)，这表明你可能应该通过 sysfs 阅读它，即在`/sys`; 阅读[sysfs-rules.txt](http://www.kernel.org/doc/Documentation/sysfs-rules.txt)；所以用户应用程序很可能会在下面读取相关内容`/sys/`

我不赞成您的问题，因为我觉得您可以像我一样搜索几分钟（而且我不是内核专家）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:02:09.890

**您不能直接从用户空间调用驱动程序函数。**

如果该函数是用`EXPORT_SYMBOL`or导出的，`EXPORT_SYMBOL_GPL`那么我们可以编写一个简单的内核模块并直接调用该函数。结果可以通过 FIFO 或共享内存发送到用户空间。

但是在您的情况下，此功能不会被导出。所以你不应该这样做。

# java - SQLlite数据库，在第二个数字后插入点

> ID：14118742
> 
> 赞同：0
> 
> 时间：2013-01-02T08:09:47.873
> 
> 标签：java, sql

我有一个 sqlite 数据库，有很多表。每个表有很多行。在一个专栏中，我有这样的事情：

```
[58458, 65856, 75658, 98456, 98578, ... N] 
```

我在创建数据库时犯了一个错误（我不再有权访问初始数据），我需要在第二个数字之后用一个点来制作这些数字，并且有这样的东西：

```
[58.458, 65.856, 75.658, 98.456, 98.578, ... N] 
```

有什么办法可以做到这一点吗？我更喜欢Java。还是已经有任何工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:26:13.873

使用此函数解析每列的信息。

```
public static String convertColumn(String textF)
{

    String textAux = "";
    String newText = "[";

    int i = 0;

    textF = textF.substring(1, textF.length() - 1);

    while(i < textF.length())
    {
        textAux = textF.substring(i, i + 5);
        int nrAux = Integer.parseInt(textAux);

        i+=7;
        int a;
        int b;

        a = nrAux / 1000;
        b = nrAux - a * 1000;

        double newNr;
        newNr = a + b * 0.001;
        newText = newText + newNr + ", ";

    }
    newText = newText.substring(0, newText.length() - 2);
    newText += "]";
    return newText;
} 
```

该函数将有一个字符串作为参数，如 [58458, 65856, 75658, 98456, 98578]，您将从 SQL 表中获取，返回值为 [58.458, 65.856, 75.658, 98.456, 98.578]，即更新列所需的值。

对于 SQL，基本思想是这样的：

```
UPDATE table 
SET column = convertColumn(column); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:15:59.873

如果它是 NUMERIC 列，这应该可以工作：

```
UPDATE <TABLE NAME> SET <COLUMN> = <COLUMN>/1000; 
```

如果它不是 NUMERIC 或 REAL 列，那么这应该有效：

```
UPDATE <TABLE NAME> SET <COLUMN> = CAST(<COLUMN> AS REAL)/1000; 
```

（感谢 Goibniu 的指点）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T11:06:15.757

您可以在列上使用 CAST as REAL，然后按照其他答案中的建议进行更新。

```
select CAST(YOUR_COL AS REAL) from YOUR_TABLE 
```

在此文档中搜索 CAST 以获取更多信息：[SQLite 语言指南](http://www.sqlite.org/lang_expr.html)

# android-camera - 在 CCGLSurfaceView 中添加相机预览（Android Cocos2d）

> ID：14118744
> 
> 赞同：2
> 
> 时间：2013-01-02T08:10:00.917
> 
> 标签：android-camera, cocos2d-android

我想在 CCLayer 中将相机预览作为背景，那么如何在 CCGLSurfaceView 中添加相机预览？

我可以在 FrameLayout 中添加相机预览，这是主要 xml 文件的一部分，但要使用 cocos2d，我必须将 ContentView 设置为 CCGLSurfaceView 而不是带有 XML 的 Android Surface View。

# ajax - 如何通过http将数据从服务器发送到客户端？

> ID：14118754
> 
> 赞同：0
> 
> 时间：2013-01-02T08:10:27.577
> 
> 标签：ajax, node.js, http, rest, express

我想将服务器上文件的文件路径发送到客户端，以便使用媒体播放器播放它。如何在客户端检索该字符串以便在不使用套接字的情况下将其连接到元素的`src`属性中？`<video`

服务器片段：

```
res.set('content-type', 'text/plain');
res.send('/files/download.mp4'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:53:13.397

这就是您在没有任何框架的情况下向服务器发出请求的方式。“/path_to_page”是您设置到应该处理请求的页面的路由。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', '/path_to_page', true);
xhr.onload = function(e) {
if (this.status == 200) {
  console.log(this.responseText); // output will be "/files/download.mp4"
}
};

xhr.send();
} 
```

您可能还想发送一些参数。

```
var formdata = new FormData();
formdata.append("param_name", "value"); 
```

因此，您可能例如想要发送文件名等。

您只需要从第一个代码段更改 2 行。一个是

```
 xhr.open('POST', '/path_to_page', true); // set to post to send the params

 xhr.send(formdata); // send the params 
```

要获取服务器上的参数，如果您使用的是 express，它们位于 req.body.param_name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:20:52.430

你用的是哪个框架？？您可以在 ajax 中声明项目目录的基本路径，然后是您的文件。

```
jQuery.ajax({
type: "GET",
url: "/files/download.mp4", 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:49:08.317

由于您使用的是`express`(on `node`)，因此您可以使用[socket.io](http://socket.io/)：

**服务器：**

```
var io = require('socket.io').listen(80),
    fs = require('fs');

io.sockets.on('connection', function (socket) {
   socket.on('download', function(req) {
      fs.readFile(req.path, function (err, data) {
         if (err) throw err;

         socket.emit('video', { video: data });
      });
   });
}); 
```

**客户：**

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');

  ...      
  // request a download
  socket.emit('download', { path: '/files/download.mp4' });

  // receive a download
  socket.on('video', function (data) {
    // do sth with data.video;
  });
  ...
</script> 
```

**编辑：**没有注意到你不想使用套接字。它仍然是一个可行的解决方案。

# amazon-web-services - AWS EC2 - 更改安全组 - 错误

> ID：14118756
> 
> 赞同：0
> 
> 时间：2013-01-02T08:10:33.797
> 
> 标签：amazon-web-services, amazon-vpc

我正在试用 amazon VPC - Virtual Private Cloud 的教程。

[http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html#Case2_Launch_NAT](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html#Case2_Launch_NAT)

我已经按照这些步骤......

1.  导航到[https://console.aws.amazon.com/vpc](https://console.aws.amazon.com/vpc)
2.  创建一个 VPC。
3.  如文章所述创建安全组。
4.  我已经按照文章的要求创建了 NATSG 安全组。
5.  当我尝试将实例***的安全组更改为***在 NATSG 组下运行时，它给了我一个错误 - 说它遇到了一个没有任何描述的错误。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-29T15:29:14.950

我不再面临这个问题 - 当时它似乎是一个持续存在的问题，我目前可以正确切换安全组。

在过去的 2 年中，我所做的一项更改是将我与 AWS 的所有手动交互转换为使用 boto3 或 cloudformation 进行编程，这消除了很多错误。

# hibernate - 使用休眠调用存储过程

> ID：14118757
> 
> 赞同：2
> 
> 时间：2013-01-02T08:11:03.847
> 
> 标签：hibernate, stored-procedures

我在下面写了一个存储过程：

```
create or replace
PROCEDURE              SP_GET_NUMBER (p_cursor out sys_refcursor, departmentId in number, userId in number, documentTypeId in number)
as
regId integer;
sqlScript varchar2(60);
begin
sqlScript:='select registrationnumber_seq.nextval from dual';
execute immediate sqlScript into regid;
dbms_output.put_line('Nextval is: '||TO_CHAR(regid));
insert into roketsanuser.registrationnumbers
(id, departmentid, documenttypeid, registrationnumber, registrationstatus, status, updatedate, updateuserid, version)
values
(regId, null, null, regid, 0, 0, sysdate, 0, 0);
commit;
open p_cursor for
    select *
      from registrationnumbers reg
     where reg.id = regid;
end; 
```

我在我的实体类的注释中定义它：

```
@Entity(name = "RegistrationNumber")
@Table(name = "REGISTRATIONNUMBERS")
@SequenceGenerator(name = "REGISTRATIONNUMBER_SEQ", sequenceName = "REGISTRATIONNUMBER_SEQ")
@org.hibernate.annotations.NamedNativeQuery(name = "SP_GET_NUMBER", query = "{call ?= SP_GET_NUMBER(:departmentId, :userId, :documentTypeId)}",
                                            callable = true, readOnly = true, resultClass = RegistrationNumber.class)
@EntityListeners( { BaseEntityListener.class })
public class RegistrationNumber extends BaseEntity 
```

我在我的 Dao 类中调用查询：

```
public RegistrationNumber getNumberForIncomingPaperworkByStoredProcedure(EntityManager manager, RegistrationNumber registrationNumber)
{
    Session session = (Session)manager.getDelegate();
    org.hibernate.impl.SQLQueryImpl query = (SQLQueryImpl)session.getNamedQuery("SP_GET_NUMBER");

    query.setParameter("departmentId", ObjectUtil.isNotNull(registrationNumber.getDepartment()) ? registrationNumber.getDepartment().getId() : "");
    query.setParameter("userId", ObjectUtil.isNotNull(registrationNumber.getUser()) ? registrationNumber.getUser().getId() : "");
    query.setParameter("documentTypeId", ObjectUtil.isNotNull(registrationNumber.getDocumentType()) ? registrationNumber.getDocumentType().getId() : "");
    Collection list=query.list();
    return new RegistrationNumber();
} 
```

但是当我执行查询时发生异常： <02-01-2013 10:04:24 o'clock EET> <02-01-2013 10:04:27 o'clock EET> <10:04:27,811 ERROR [IncomingPaperworkMBean] EJB 异常：; 嵌套异常是：org.hibernate.exception.SQLGrammarException：无法执行查询；嵌套异常是：org.hibernate.exception.SQLGrammarException：无法执行查询>

可能是什么原因，请帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:20:55.420

使用 oracle，我使用查询语法

`query = "call SP_GET_NUMBER(?, :departmentId, :userId, :documentTypeId)", hints = {@QueryHint(name = "org.hibernate.callable", value = "true")}`

它对我有用。

# ruby-on-rails - 使用 private_pub gem 时出现“BUG 分段错误”

> ID：14118758
> 
> 赞同：2
> 
> 时间：2013-01-02T08:11:04.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railscasts, faye, private-pub

我正在尝试此截屏视频[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)中的代码。我从 github 获取了代码。但是，每当我尝试从该应用程序发送消息时，faye 服务器都会关闭并出现以下错误：

```
/home/jatin/.rvm/gems/ruby-1.9.3-p362/gems/thin-1.3.1/lib/thin/connection.rb:105: 
[BUG] Segmentation fault
ruby 1.9.3p362 (2012-12-25 revision 38607) [i686-linux] 
```

（它还显示长控制帧信息和堆栈跟踪信息）

（rails 服务器一直运行良好）

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:08:49.970

尝试不同的 ruby​​ 版本/补丁。

如果这样可以修复它，那么它可能是 1.9.3p362 中的一个错误。您可能应该提交一份错误报告，以便核心开发人员了解它，或者，如果您愿意，请查看源代码并尝试自己修补并提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:11:12.647

有很多人遇到 ruby​​-1.9.3-p362 的段错误

个人用rvm编译的ruby-1.9.3-p362也遇到过这种情况

切换回 ruby​​-1.9.3-p327 解决了这个问题。

# python - python-apt 包，获取 pkg 安装时间和构建时间？

> ID：14118768
> 
> 赞同：1
> 
> 时间：2013-01-02T08:12:06.793
> 
> 标签：python, debian, apt

是否可以获得安装包的时间以及该特定包的构建时间？

例如：

```
import apt

def get_pkg_details():
    apt_cache = apt.Cache()
    selected_pkg = apt_cache["git"] #Example package

    time_installed = selected_pkg.installedTime() #????? 
```

我知道 RPM 可以做到这一点，但我没有在 APT 上找到任何与此类似的文档。

在 RPM 中，可以使用以下枚举器访问包的安装时间和构建时间：

```
RPMTAG_INSTALLTIME 
RPMTAG_BUILDTIME 
```

python-apt 文档： [http ://stuff.mit.edu/afs/athena/system/i386_deb50/os/usr/share/doc/python-apt/html/apt/package.html#examples](http://stuff.mit.edu/afs/athena/system/i386_deb50/os/usr/share/doc/python-apt/html/apt/package.html#examples)

RPM 标签 API： [http ://rpm.org/api/4.6.0/group__rpmtag.html](http://rpm.org/api/4.6.0/group__rpmtag.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:17:55.907

我维护了通过 apt-server 分发的部分代码，所以我也不得不处理这个问题，对于构建包的时间的基本概念，我得到了包的 mtime [`os.path.getmtime()`](http://docs.python.org/2/library/os.path.html#os.path.getmtime)...`/var/lib/dpkg/info/PACKAGE`

我的代码行也把它变成了一个日期时间对象。

```
datetime.datetime.fromtimestamp(os.path.getmtime("PATH")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:22:40.430

您可以使用以下内容找到安装日期。

```
ls /var/lib/dpkg/info/*.list -lah | grep packagename

-rw-r--r-- 1 root root 1.4K Dec 29 18:50 /var/lib/dpkg/info/libasound2-dev:i386.list
-rw-r--r-- 1 root root 4.5K Dec 29 16:09 /var/lib/dpkg/info/libasound2:i386.list
-rw-r--r-- 1 root root 2.3K Dec 29 16:10 /var/lib/dpkg/info/libasound2-plugins:i386.list 
```

至于编译日期，您可以在 /var/cache/apt/archives/ 中查找包的 mtime

# javascript - 主干对象字段来自上一项

> ID：14118769
> 
> 赞同：1
> 
> 时间：2013-01-02T08:12:23.727
> 
> 标签：javascript, backbone.js, requirejs

我刚刚开始使用 Backbone.js，我的测试用例正在搅动一些非常奇怪的东西。

简而言之，我所经历的是——在我调用主干模型的构造函数之后，我的对象中的一些字段似乎来自以前的项目。例如，如果我打电话：

```
var playlist = new Playlist({
    title: playlistTitle,
    position: playlists.length,
    userId: user.id
});

playlist.get('items').length; //1 
```

但是，如果我这样做：

```
var playlist = new Playlist({
    title: playlistTitle,
    position: playlists.length,
    userId: user.id,
    items: []
});

playlist.get('items').length; //0 
```

这是代码：

```
define(['ytHelper', 'songManager', 'playlistItem'], function (ytHelper, songManager, PlaylistItem) {
    'use strict';
    var Playlist = Backbone.Model.extend({
        defaults: {
            id: null,
            userId: null,
            title: 'New Playlist',
            selected: false,
            position: 0,
            shuffledItems: [],
            history: [],
            items: []
        },
        initialize: function () {
            //Our playlistItem data was fetched from the server with the playlist. Need to convert the collection to Backbone Model entities.
            if (this.get('items').length > 0) {
                console.log("Initializing a Playlist object with an item count of:", this.get('items').length);
                console.log("items[0]", this.get('items')[0]);
                this.set('items', _.map(this.get('items'), function (playlistItemData) {
                    var returnValue;
                    //This is a bit more robust. If any items in our playlist weren't Backbone.Models (could be loaded from server data), auto-convert during init.
                    if (playlistItemData instanceof Backbone.Model) {
                        returnValue = playlistItemData;
                    } else {
                        returnValue = new PlaylistItem(playlistItemData);
                    }
                    return returnValue;
                }));

                //Playlists will remember their length via localStorage w/ their ID.
                var savedItemPosition = JSON.parse(localStorage.getItem(this.get('id') + '_selectedItemPosition'));
                this.selectItemByPosition(savedItemPosition != null ? parseInt(savedItemPosition) : 0);

                var songIds = _.map(this.get('items'), function(item) {
                    return item.get('songId');
                });

                songManager.loadSongs(songIds);
                this.set('shuffledItems', _.shuffle(this.get('items')));
            }
        },
        //TODO: Reimplemnt using Backbone.sync w/ CRUD operations on backend.
        save: function(callback) {
            if (this.get('items').length > 0) {
                var selectedItem = this.getSelectedItem();
                localStorage.setItem(this.get('id') + '_selectedItemPosition', selectedItem.get('position'));
            }

            var self = this;
            console.log("Calling save with:", self);
            console.log("my position is:", self.get('position'));
            $.ajax({
                url: 'http://localhost:61975/Playlist/SavePlaylist',
                type: 'POST',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(self),
                success: function (data) {
                    console.log('Saving playlist was successful.', data);
                    self.set('id', data.id);
                    if (callback) {
                        callback();
                    }
                },
                error: function (error) {
                    console.error("Saving playlist was unsuccessful", error);
                }
            });
        },
        selectItemByPosition: function(position) {
            //Deselect the currently selected item, then select the new item to have selected.
            var currentlySelected = this.getSelectedItem();
            //currentlySelected is not defined for a brand new playlist since we have no items yet selected.
            if (currentlySelected != null && currentlySelected.position != position) {
                currentlySelected.set('selected', false);
            }

            var item = this.getItemByPosition(position);
            if (item != null && item.position != position) {
                item.set('selected', true);
                localStorage.setItem(this.get('id') + '_selectedItemPosition', item.get('position'));
            }

            return item;
        },
        getItemByPosition: function (position) {
            return _.find(this.get('items'), function(item) {
                return item.get('position') == position;
            });
        },
        addItem: function (song, selected) {
            console.log("this:", this.get('title'));
            var playlistId = this.get('id');
            var itemCount = this.get('items').length;

            var playlistItem = new PlaylistItem({
                playlistId: playlistId,
                position: itemCount,
                videoId: song.videoId,
                title: song.title,
                relatedVideos: [],
                selected: selected || false
            });

            this.get('items').push(playlistItem);
            this.get('shuffledItems').push(playlistItem);
            this.set('shuffledItems', _.shuffle(this.get('shuffledItems')));
            console.log("this has finished calling");

            //Call save to give it an ID from the server before adding to playlist.
            songManager.saveSong(song, function (savedSong) {
                song.id = savedSong.id;
                playlistItem.set('songId', song.id);
                console.log("calling save item");

                $.ajax({
                    type: 'POST',
                    url: 'http://localhost:61975/Playlist/SaveItem',
                    dataType: 'json',
                    data: {
                        id: playlistItem.get('id'),
                        playlistId: playlistItem.get('playlistId'),
                        position: playlistItem.get('position'),
                        songId: playlistItem.get('songId'),
                        title: playlistItem.get('title'),
                        videoId: playlistItem.get('videoId')
                    },
                    success: function (data) {
                        playlistItem.set('id', data.id);
                    },
                    error: function (error) {
                        console.error(error);
                    }
                });
            });

            return playlistItem;
        },
        addItemByVideoId: function (videoId, callback) {
            var self = this;
            ytHelper.getVideoInformation(videoId, function (videoInformation) {
                var song = songManager.createSong(videoInformation, self.get('id'));
                var addedItem = self.addItem(song);

                if (callback) {
                    callback(addedItem);
                }
            });
        },
        //Returns the currently selected playlistItem or null if no item was found.
        getSelectedItem: function() {
            var selectedItem = _.find(this.get('items'), function (item) {
                return item.get('selected');
            });

            return selectedItem;
        }
    });

    return function (config) {
        var playlist = new Playlist(config);
        playlist.on('change:title', function () {
            this.save();
        });
        return playlist;
    };
}); 
```

基本上，当我传入一个根本没有指定项目的配置对象时，我看到属性“项目”填充在初始化内部。如果我在我的配置对象中指定一个空白项目数组，那么初始化中没有项目，但这似乎违反直觉。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:37:27.260

问题在于在对象中使用引用类型（数组）`defaults`。`Playlist`在未指定值的情况下创建新模型时`items`，将应用默认值。在数组和对象的情况下，这是有问题的，因为基本上发生的是：

```
newModel.items = defaults.items 
```

所以所有以这种方式初始化的模型都引用**同一个**数组。为了验证这一点，您可以测试：

```
var a = new Playlist();
var b = new Playlist();
var c = new Playlist({items:[]});

//add an item to a
a.get('items').push('over the rainbow');

console.log(b.get('items')); // -> ['over the rainbow'];
console.log(c.get('items')); // -> [] 
```

为了解决这个问题，Backbone 支持定义`Model.defaults`为函数：

```
var Playlist = Backbone.Model.extend({
    defaults: function() {
        return {
            id: null,
            userId: null,
            title: 'New Playlist',
            selected: false,
            position: 0,
            shuffledItems: [],
            history: [],
            items: []
        };
    }
}); 
```

# sql - 如何为sql联合表单提供列名

> ID：14118770
> 
> 赞同：0
> 
> 时间：2013-01-02T08:12:28.593
> 
> 标签：sql

我正在尝试使用 sql UNION 语法为列命名，但它似乎不起作用。

我的代码的简化版本。请注意，字符串 1、2、3 不在我数据库的任何表中，我只想将其显示为字符串。但是，我想为该列命名。请告诉我怎么做，谢谢。

```
Select 
'String 1'
union

select
'String 2'
Union

SELECT 
'string 3' 

as output
FROM GanttReport(@from,@to,@TypeBigAC) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:13:59.303

像这样：

```
SELECT stringName
FROM
(
    Select 'String 1' StringName
    union
    select 'String 2' 
    Union
    SELECT 'string 3'
) t 
```

但是第一个中的别名（至少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:13:37.357

添加`ALIAS`一个

```
Select 'String 1'  AS columnName
union
select 'String 2'  AS columnName 
Union
SELECT 'string 3'  AS columnName 
```

# php - 表单处理 PHP 和 Javascript

> ID：14118773
> 
> 赞同：1
> 
> 时间：2013-01-02T08:12:40.637
> 
> 标签：php, javascript, forms

我是 PHP 和 javascript 编程的新手。我有一个使用 PHP 回显的链接。

```
<?php .....echo "<td><font class='calendar'><a onclick='showevent($currentday)' href='#'>". $currentday. "</a></font></td>"; ....?> 
```

我需要从上面的链接调用函数 showevent()。

```
<script>

function showevent($day){
     $thisday = $day;
     document.showevent.submit();
}

</script> 
```

该函数将提交如下表格：

```
<form action="./event.php" name="showevent" method="post">
    <input type="hidden" name="page" value="showevent" /> 
    <input type="hidden" name="month" value="<?php echo $cMonth;?>" /> 
    <input type="hidden" name="year" value="<?php echo $cYear; ?>" />
    <input type="hidden" name="day" value="<?php echo $thisday; ?>" />
</form> 
```

javascript函数不起作用。任何人都可以帮助建议和指导我吗？

完整的html代码：

```
<!DOCTYPE html>

<html>

<head>
<link rel="stylesheet" type="text/css" href="./css/mystyle.css">
<script>
function showevent($day){
    $thisday = $day;
    document.showevent.submit();
}</script>
</head>

<body>
    <p class="menutitle">Event Calendar</p>
    <?php

    $monthNames = Array("January", "February", "March", "April", "May", "June", "July",
            "August", "September", "October", "November", "December");

    if (!isset($_REQUEST["month"])){
        $_REQUEST["month"] = date("n");
    }
    if (!isset($_REQUEST["year"])) {
        $_REQUEST["year"] = date("Y");
    }

    $cMonth = $_REQUEST["month"];
    $cYear = $_REQUEST["year"];

    $prev_year = $cYear;
    $next_year = $cYear;
    $prev_month = $cMonth-1;
    $next_month = $cMonth+1;

    if ($prev_month == 0 ) {
        $prev_month = 12;
        $prev_year = $cYear - 1;
    }
    if ($next_month == 13 ) {
        $next_month = 1;
        $next_year = $cYear + 1;
    }
    ?>

    <table class="calendar">
        <tr align="center">
            <td class="calendarTop">
                <table class="calendarNav">
                    <tr>
                        <td class="calendarOption" onmouseover="this.className='calendarOptionHover'" onmouseout="this.className='calendarOption'" align="center"><a href="#" onclick="document.forms.prev.submit()">Previous</a>
                        </td>
                        <td width="60%"><p class="subtitle"><?php echo $monthNames[$cMonth-1].' '.$cYear; ?></p></td>
                        <td class="calendarOption" onmouseover="this.className='calendarOptionHover'" onmouseout="this.className='calendarOption'" align="center"><a href="#" onclick="document.forms.next.submit()">Next</a>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td >
                <table class="calendarTop">
                    <tr>
                        <td class="calendarTitle" ><font>S</font>
                        </td>
                        <td class="calendarTitle" ><font>M</font>
                        </td>
                        <td class="calendarTitle" ><font>T</font>
                        </td>
                        <td class="calendarTitle" ><font>W</font>
                        </td>
                        <td class="calendarTitle" ><font>T</font>
                        </td>
                        <td class="calendarTitle" ><font>F</font>
                        </td>
                        <td class="calendarTitle" ><font>S</font>
                        </td>
                    </tr>

                    <?php 

                    require "./dbconnect.php";

                    $result = mysql_query(" SELECT * FROM event WHERE month = $cMonth AND year=$cYear ORDER BY date"); //---->resource

                    $before =0;
                    $after =99;
                    $timestamp = mktime(0,0,0,$cMonth,1,$cYear);
                    $maxday = date("t",$timestamp);
                    // $cMonth;  ---> month name
                    $thismonth = getdate ($timestamp);
                    $startday = $thismonth['wday'];
                    $eventday = Array(31);
                    for ($k =0; $k<32; $k++){
                        $eventday[$k]=false;
                    }
                    while ($row = mysql_fetch_array($result)){
                    $eventday[$row['date']]=true;
                    }

                    for ($i=0; $i<($maxday+$startday); $i++) {
                    if(($i % 7) == 0 ) {
                        echo "<tr>";
                    }
                    if($i < $startday) {
                        echo "<td></td>";
                    }else{
                        $currentday = ($i - $startday + 1);
                        if($eventday[$currentday] == true){

                            echo "<td class='eventtrue'><font class='calendar'><a onclick='javascript: showevent($currentday);' href='#'>". $currentday. "</a></font></td>";
                        }else{
                            echo "<td class='eventfalse'><font class='calendar'>". ($i - $startday + 1). "</font></td>";
}
                    }//--2 brackets

                    if(($i % 7) == 6 ) {
                        echo "</tr>";

                }
}

?>

                </table>
        <tr>
            <td><form action="./event.php" name="prev" method="post">
                    <input type="hidden" name="page" value="calendar" /> <input
                        type="hidden" name="month" value="<?php echo $prev_month;?>" /> <input
                        type="hidden" name="year" value="<?php echo $prev_year; ?>" />
                </form>
                <form action="./event.php" name="next" method="post">
                    <input type="hidden" name="page" value="calendar" /> <input
                        type="hidden" name="month" value="<?php echo $next_month;?>" /> <input
                        type="hidden" name="year" value="<?php echo $next_year; ?>" />
                </form>
                <form action="./event.php" name="showevent" method="post">
                    <input type="hidden" name="page" value="showevent" /> 
                    <input type="hidden" name="month" value="<?php echo $cMonth;?>" /> 
                    <input type="hidden" name="year" value="<?php echo $cYear; ?>" />
                    <input type="hidden" name="day" value="<?php echo $thisday; ?>" />
                </form></td>
        </tr>
        <tr>
        <td>
        </td>
        </tr>
    </table>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:26:58.420

```
<script>
function showevent(day)
{
    alert(day); // test if it triggers
    document.showevent.day.value = day;
    document.showevent.submit();
    return false;
}
</script> 
```

还：

`<a onclick='javascript: showevent($currentday);'`

应该：

`<a onclick='return showevent($currentday);'`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T08:42:54.977

请在脚本标签中添加类型并尝试

```
<script type="text/javascript">

function showevent($day){
     $thisday = $day;
     document.showevent.submit();
}

</script> 
```

希望这可以帮助你解决你的问题......

# c++ - 在 C++ 中显示 LinkedList 时永无止境的循环

> ID：14118775
> 
> 赞同：0
> 
> 时间：2013-01-02T08:12:47.643
> 
> 标签：c++, singly-linked-list

在下面的代码中，当我在删除第一个元素后尝试显示列表时，它会导致下一个元素的无限循环。当除第一个元素被删除时，不会发生此问题。我不知道为什么会这样？有人可以告诉我错误在哪里吗？

```
#include<iostream>

using namespace std;

class node
{
public:
  int data;
  node *link;

};

class linkedlist
{  node *head;
public:
linkedlist()
{
   head=NULL;
}
    int add(int data1)
    { node *insertnode=new node;
        insertnode->data=data1;
        insertnode->link=NULL;

        node *temp=head;

        if(temp!=NULL)
        {
            while(temp->link!=NULL)
            {
                temp=temp->link;
            }
            temp->link=insertnode;

        }
        else{head=insertnode;}

    }
    void disp()
    { node *temp1=head;
    cout<<endl;
    if(temp1==NULL)
    {cout<<"Empty"<<endl;
    }
    if(temp1->link==NULL)
    {
        cout<<temp1->data<<endl;

    }
    else{
    do{cout<<temp1->data<<endl;
    temp1=temp1->link;
    }
    while(temp1!=NULL);
    }

    }

    int remove(int removedata)
    {
        node *temp2=head;
        if(temp2==NULL)
         {}

         if(temp2->link==NULL)
         {
             delete temp2;
             head=NULL;
         }

         else
         {
             node *previous;
             do
             {
                 if(temp2->data==removedata) break;
                 previous=temp2;
                 temp2=temp2->link;
             }while(temp2!=NULL);

            previous->link=temp2->link;
             delete temp2;
         }

    }

};

int main()
{
   linkedlist list;
   list.add(10);
   list.add(100);
   list.add(200);
   list.remove(10);
   list.disp();
} 
```

谢谢你们。问题已解决

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T08:20:31.440

看看你的删除：

```
 node *previous;
         do
         {
             if(temp2->data==removedata) break;
             previous=temp2;
             temp2=temp2->link;
         }while(temp2!=NULL);

        previous->link=temp2->link;
         delete temp2; 
```

如果第一个元素是匹配的元素，则循环将立即终止，导致**uninitializing`previous`**并且不改变`temp2`（它仍然是头部）。

你现在要做的是：

1.  设置`previous->link`为某个值。请注意，这是**未定义的行为**，因为您不知道是什么`previous`。
2.  delete `temp2`- 这是头元素，但从不改变头。这将导致列表中的第一个元素未定义，一旦访问它，任何事情都可能发生（再次，未定义的行为）。

因此，基本上 - 在您删除第一个元素之后 - 当您尝试显示列表时，任何事情都可能发生 - 包括您遇到的无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:21:14.503

您没有将指针调整到头部。猜猜这就是它失败的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:18:47.903

删除第一个元素时，必须将列表的头部指向下一个元素。你在这里没有这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:19:41.487

在`disp()`，你访问`temp1->link`，是否`temp1`为NULL

```
if(temp1==NULL)
{cout<<"Empty"<<endl;
}
if(temp1->link==NULL)
{
    cout<<temp1->data<<endl;

} 
```

相同的`temp2`in `remove()`。

`node *previous;`当第一个节点被删除时，未初始化使用。

# java - 将日期转换为毫秒在 Android (java) 中给出不一致的结果

> ID：14118777
> 
> 赞同：4
> 
> 时间：2013-01-02T08:12:58.683
> 
> 标签：java, android, date, milliseconds

我正在尝试在 android 中使用日历，当我尝试将日期转换为毫秒时，我在不同的运行中得到不同的结果。

当我打印出毫秒1 和毫秒2 的值时，我会在不同的时间得到不同的结果！

我的代码如下：

```
Calendar calendar1 = Calendar.getInstance();
Calendar calendar2 = new GregorianCalendar(TimeZone.getTimeZone("GMT"));

calendar1.set(1997, 9, 3);
calendar2.set(1997, 9, 01);

long milliseconds1 = calendar1.getTimeInMillis();
long milliseconds2 = calendar2.getTimeInMillis(); 
```

这是 Java（或 Android 的实现）中的错误还是类似的错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T08:25:15.177

您的问题的答案是：**不**，这不是 Java 或 Android 中的错误。这是有据可查的行为。实例具有`Calendar`比 YEAR、MONTH 和 DATE 更多的字段。您生成新的日历实例并仅更改这些字段，而将所有其他字段保留为创建方式。如果你连续运行你的程序两次，那么秒和毫秒将同时发生变化。

来自[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)：

> 设置日历字段 YEAR、MONTH 和 DAY_OF_MONTH 的值。 **保留其他日历字段的先前值。**如果不需要，请先调用[clear()](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#clear%28%29)。

为了每次都打印相同的值，您需要这样做：

```
 Calendar calendar1 = Calendar.getInstance();
    Calendar calendar2 = new GregorianCalendar(TimeZone.getTimeZone("GMT"));

    calendar1.clear();
    calendar1.set(1997, 9, 3);
    calendar2.clear();
    calendar2.set(1997, 9, 1);

    long milliseconds1 = calendar1.getTimeInMillis();
    long milliseconds2 = calendar2.getTimeInMillis(); 
```

# jboss - 如何在 jboss 7.1 上定义服务器特定的 jndi

> ID：14118780
> 
> 赞同：1
> 
> 时间：2013-01-02T08:13:36.287
> 
> 标签：jboss, jndi, jboss7.x

我想为服务器组中的每个服务器定义一个 jndi 对象作为简单字符串；我可以将 jndi 对象定义为配置文件的简单字符串，并且服务器组可以访问配置文件，因此当我以这种方式定义它时，该服务器组中的所有服务器都会看到相同的值，但是我想让我的每台服务器的价值都不同。

# android - httpclient.execute 不给出结果也不例外

> ID：14118781
> 
> 赞同：0
> 
> 时间：2013-01-02T08:13:45.530
> 
> 标签：android, web-services

我在 Android 中有一个调用 Web 服务的方法，如下所述。

现在，当我的班级调用此方法时，我看不到任何异常，只能看到`System.out.println("entered into call service method 2");`日志。我可以看到 logcat 状态`response = httpclient.execute(httppost);`不起作用，并且`System.out.println("entered into call service method 3");`在 logcat 上也没有显示任何异常。知道为什么吗？如何解决？

```
 public void callService() throws Exception {
        System.out.println("entered into call service method");
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://localhost:81/a.php");
        HttpResponse response;
        System.out.println("entered into call service method 1");
        try{
            System.out.println("entered into call service method 2");
            **response = httpclient.execute(httppost);**
            System.out.println("entered into call service method 3"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:25:39.523

您是否在单独的 Thread / AsyncTask 中调用此函数？如果您的应用程序中经常使用请求，我还建议考虑使用服务。

这是一个对我有用的 POST 方法，但不要忘记以某种方式异步调用它：

```
public void executePost(String url, List<NameValuePair> postParams) {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    InputStream is = null;
    try {
        httppost.setEntity(new UrlEncodedFormEntity(postParams));
        HttpResponse response = httpclient.execute(httppost);
        if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                is = entity.getContent();
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                int inChar;
                while ((inChar = is.read()) != -1) {
                    bos.write(inChar);
                }

                String resp = bos.toString();
                // report back the resp e.g. via LocalBroadcast message 
            } else {
                // report back e.g. via LocalBroadcast message 
            }
        }
        else {
            // report back e.g. via LocalBroadcast message 
        }
    } catch (Exception e) {
            // report back the exception e.g. via LocalBroadcast message 
        // exception message: e.getMessage()
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

# codeigniter - 致命错误：require_once()：使用 codeigniter 打开所需错误失败

> ID：14118789
> 
> 赞同：1
> 
> 时间：2013-01-02T08:14:49.313
> 
> 标签：codeigniter

我有一个可以在本地开发服务器上运行的应用程序，但是当上传到远程生产服务器时，我看到以下错误：

```
 Fatal error: require_once() [function.require]: Failed opening required '/home/madhab/public_html/system/database/drivers/mysql/mysql_driver.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/madhab/public_html/system/database/DB.php on line 140 
```

怎么了？我该如何解决？

//我的数据库配置为

```
$active_group = 'server'; 
$active_record = TRUE;
$db['server']['hostname'] = 'madhab-acharya.com.np';
$db['server']['username'] = '***********';
$db['server']['password'] = '***********';
$db['server']['database'] = '***********';
$db['server']['dbdriver'] = 'mysql';
$db['server']['dbprefix'] = '';
$db['server']['pconnect'] = TRUE;
$db['server']['db_debug'] = TRUE;
$db['server']['cache_on'] = FALSE;
$db['server']['cachedir'] = '';
$db['server']['char_set'] = 'utf8';
$db['server']['dbcollat'] = 'utf8_general_ci';
$db['server']['swap_pre'] = '';
$db['server']['autoinit'] = TRUE;
$db['server']['stricton'] = FALSE; 
```

//我的index.php文件设置是

```
$system_path = 'system';
$application_folder = 'application';
$assets_folder = 'assets'; 
```

当我的应用程序、系统、index.php 驻留在远程服务器的 public_html 文件夹中时，有人请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:58:26.633

问题出在mysql主机上。通常它是这样的`madhab-acharya.mysqlserver.com.np`。我想你已经给了你的网站名称。请使用您的网络服务提供检查您的 sql 主机名，或者您可以在 phpadmin 面板中找到它。

如果这是正确的，请确保每个文件都正确上传。有时，当我将网站投入制作时，我不得不做第二次。

# tsql - 在查询 SSIS 中解析变量

> ID：14118792
> 
> 赞同：0
> 
> 时间：2013-01-02T08:15:31.770
> 
> 标签：tsql, ssis, sql-server-2008

在 SQL 任务编辑器中，我有以下查询

```
DELETE FROM 
[TICKETS_DATA]
where BILLING_TICKETS_DATA_Time_ID < 
(SELECT TIME_ID
FROM [TIME]
WHERE (TIME_Year = ?)  AND (TIME_Month = ?)) - 1 
```

我`TIME_ID`在行中有相关的月份和年份。我有 2 个变量分别显示为`Time_Month`(int32) 和`Time_Year`(int32)，例如 08 和 2012。

我想`Time_ID`在 SQL 任务编辑器中获取当前并传递上述查询。

目前在表中我存储了 1 个月的数据，现在想要存储 3 个月的数据。

请协助我进行参数映射以及如何解析 SQL 命令查询中的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:29:02.880

只要表中的 Time_id 是一个数值，每条记录加一，并且每年/每月组合有一条记录，并且数字按日期顺序依次递增，每次递增一（即 2000 01 有 time_id 1 和 2000 02 有 time_id 2 和 2001 1 有 time_id 13)，然后您可以将 -1 更改为 -3 以从表中删除超过三个月的记录。请记住，由于这可能是上个月运行的，因此在此更改后的第一次运行中，您将在表中保留两个月，并且它将在第一次运行中删除 0 条记录。下次运行，您将有 3 个月的时间，它将再次删除 0 条记录。在第三次运行时（假设它每月只运行一次），您将拥有三个月的数据，它将删除该日期之前 4 个月的记录。

# php - 从 SQL 查询初始化 PHP 变量

> ID：14118793
> 
> 赞同：0
> 
> 时间：2013-01-02T08:15:34.563
> 
> 标签：php, sql

我想从 sql 表中的条目初始化一个变量；此条目是我查询过的条目。

```
//Grab user id from users.sql
$quser = $db->query("
    SELECT *
        FROM users //in this table is a column named userident
        WHERE username = '$user' //this where conditional filters to a lone row         
");*/ 
```

我尝试过`$var = $quser["ident"];`，因为这是我在`foreach()`循环中显示表条目的方式，但这似乎不起作用。

每个用户只有一个 ident 条目，因此当我使用 where 过滤查询时，它会产生一行。为什么我不能抓取条目并将其放入变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:20:06.090

这是你需要做的

1.  执行查询
2.  拿起第一行（因为只有一行这将起作用，否则循环执行）
3.  从产生的行中获取列

这是一个例子

```
 $quser = $db->query("SELECT * FROM users WHERE username = '$user'");
    $first_row=$quser->row();

    $reqdData=$first_row->ident; // Or whateber column you need 
```

# php - 使用 jQuery 为每个元素运行 .post()

> ID：14118796
> 
> 赞同：1
> 
> 时间：2013-01-02T08:15:39.937
> 
> 标签：php, javascript, jquery, ajax, .post

我`.post`在表中的每个元素上运行 jQuery 时遇到问题。以下是我的代码

HTML

```
<table>
    <tr>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
        <td class="load_img"></td>
    </tr>
</table> 
```

javascript

```
 $(document).ready(function(){
    $("td.load_ads").html("<img src='/classified_ads4free/images/icons/ajax-loader.gif'>");
     $("td.load_ads").each(function(){
       var loading=$(this);

       $.post('/classified_ads4free/self_coded_helpers/jpost_get_ads.php',function(data)
       {
          loading.html(data);
       });
     });
    }); 
```

.POST PHP 脚本

```
 <?php
   $index=rand(0,10);
   echo $index;
 ?> 
```

所以我在这里要做的是让`<td>`我的表中的每个都加载一个随机数，但我现在的问题是所有的都`<td>`加载了相同的随机数。而不是每个都有一个 0-10 的随机数。

（这只是为了说明，我知道它可以使用 jquery 生成一个随机数，但我需要这样做的目的`.post`是因为我将运行查询以获取这些表元素中的加载图像。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:45:27.530

您是否尝试过这种方式：

```
 $(document).ready(function(){
    $("td.load_ads").html("<img src='/classified_ads4free/images/icons/ajax-loader.gif'>");
     $.post('/classified_ads4free/self_coded_helpers/jpost_get_ads.php',function(data){
       $.each($("td.load_ads"), function(){
         var loading=$(this);   
         loading.html(data);
       });
     });
  }); 
```

`I think you should iterate in the success function.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:52:07.847

谢谢大家的帮助。解决了。我所做的是创建一个人工变量索引。然后每次我使用新循环启动 .post 时都会增加索引。不知道为什么，但它以我希望它运行的方式工作。我的新javascript代码如下，以防有人需要。

```
 $(document).ready(function(){
    $("td.load_ads").each(function(){
        var loading=$(this);
        var index=0;
        $(this).html("<img src='/classified_ads4free/images/icons/ajax-loader.gif'>");
        $.post('/classified_ads4free/self_coded_helpers/jpost_get_ads.php',{index:index},function(data){
            loading.html(data);
            index=index+1;
        });
    });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:23:25.580

应该是缓存的问题。
由于您的请求始终相同，因此浏览器只发送一次请求。
解决方案是：

1/ 在您的 php 脚本中添加一个 html 标头以不缓存答案：

```
header("Cache-Control: no-cache, must-revalidate");  
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

2/ 在请求中添加一个随机参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:27:43.603

这似乎是一个缓存问题。

最简单的解决方法是向 url 添加一个随机数。

```
var d = new Date();

$.post( '/classified_ads4free/self_coded_helpers/jpost_get_ads.php'
        + '?_=' + d.getTime()
        + '&_=' + Math.random(),
        function( data ) { /* stuff */ }
); 
```

# java - Maven Java 编译太慢

> ID：14118797
> 
> 赞同：1
> 
> 时间：2013-01-02T08:15:40.323
> 
> 标签：java, maven, maven-2, javac

我面临一个特殊的问题，我的 java 源文件只需要太多时间来编译。

下面给出了安装卡住时的 Maven 调试输出。编译一个 Java 文件最多需要 10 分钟。直到最近，这对我来说都很好。

```
[DEBUG] Command line options:
[DEBUG] Command line options:
[DEBUG] -d D:\wstest\WSD_COde\WSD\WSD-common\target\classes -classpath D:\wstest\WSD_COde\WSD\WSD-common\target\classes;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\junit-4.8.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\log4j-1.2.15.jar;D:\wstest
\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-logging-1.1.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\dozer-4.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\geronimo-stax-api_1.0_spec-1.0.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-web-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-aop-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-context-2.5.6.jar;D:\wstest\WSD_COde\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-context-support-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-core-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-orm-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-jdbc-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-tx-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-beans-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-jms-2.5.6.jar;D:\wstest\ISD_COde\WSD\WSD-web\src\main\webapp\WEB-INF\lib\hibernate-3.2.6.ga.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\ojdbc14.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-lang-2.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-webmvc-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-validator-1-1-4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-modules-validation-0.7.jar;D:\wstest\ISD_COde\WSD\WSD-web\src\main\webapp\WEB-INF\lib\IsbWsdlAxisClientsClasses.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\IsbWsdlAxisClientsResources.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\dom4j-1.6.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-beanutils-1.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-collections-3.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-digester-1.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-webmvc-struts.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-codegen-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-jaxws-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-jaxws-api-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-kernel-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-xmlbeans-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-binding-2.0-m1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\xbean.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\antlr-2.7.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axiom-api-1.2.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axiom-impl-1.2.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\aspectjrt-1.6.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-webflow-2.0-m1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\poi-3.6-20091214.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-codec-1.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\standard-1.0.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-test-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\junit-addons-1.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\xercesImpl-2.8.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\aspectjweaver-1.6.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\ehcache-1.5.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\aopalliance-1.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\asm.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\asm-attrs.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\aspectjrt-1.6.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axiom-api-1.2.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axiom-impl-1.2.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\backport-util-concurrent-3.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\cglib-2.1.3.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-fileupload-1.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-httpclient-3.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\eclipselink.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jakarta-oro-2.0.7.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jdo2-api-2.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jsr107cache-1.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jstl-1.0.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jt
a.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\mina-core-1.0.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\neethi-2.0.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\ognl-2.6.9.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\openjpa-1.1.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\poi-contrib-3.6-20091214.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\poi-ooxml-3.6-20091214.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\poi-ooxml-schemas-3.6-20091214.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\qpid-client-2.6.0.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\qpid-common-2.6.0.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\slf4j-api-1.4.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\slf4j-log4j12-1.4.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\smtp.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\spring-webmvc-portlet-2.5.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\testng-5.8-jdk15.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\taglibs-log.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\struts-1.2.9.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\struts-el-1.2.9.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\strutstest-2.1.3.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\activation-1.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\annogen-0.1.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axiom-dom-1.2.7.jar;D:\wstest\WSDCode\ISD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-adb-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-adb-codegen-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-ant-plugin-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-clustering-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-corba-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-fastinfoset-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-java2wsdl-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-jaxbri-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-jibx-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-json-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-jws-api-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-metadata-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-mtompolicy-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-saaj-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-saaj-api-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\axis2-spring-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-discovery-0.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commons-io-1.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\geronimo-annotation_1.0_spec-1.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\httpcore-4.0-beta1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\httpcore-nio-4.0-beta1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jalopy-1.5rc3.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jaxb-api-2.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jaxb-impl-2.1.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jaxb-xjc-2.1.6.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jaxen-1.1.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jettison-1.0-RC2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jibx-bind-1.1.5.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jibx-run-1.1.5.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\mail-1.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\mex-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\soapmonitor-1.4.1.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\woden-api-1.0M8.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\woden-impl-dom-1.0M8.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\wstx-asl-3.2.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\xmlbeans-2.3.0.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\jaxrpc.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\j2ee-1.4.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\commonj-twm.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\wsdl4j-1.6.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\XmlSchema-1.4.2.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\foo-commonj.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\concurrent.jar;D:\wstest\WSDCode\WSD\WSD-web\src\main\webapp\WEB-INF\lib\ant-1.6.5.jar; -sourcepath D:\wstest\WSDCode\WSD\WSD-common\src\main\java; D:\wstest\WSDCode\WSD\WSD-common\src\main\java\com\wsfiles\WSD\common\constants\WsConstants.java D:\wstest\WSDCode\WSD\WSD-common\src\main\java\com\wsfiles\WSD\common\util\WSSortComparator.java -g -nowarn -target 1.5 -source 1.5 -encoding UTF-8
[INFO] **Compiling 2 source files to D:\wstest\WSDCode\WSD\WSD-common\target\classes** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:27:44.447

如果您已经根据您的输出查看了调试输出，那么您已经看到 Maven 除了调用命令行 javac 编译器之外什么都不做，那么什么应该更快呢？问题是我假设正在生成的课程非常大（10分钟？）

# listview - 点击 kendoMobileListView

> ID：14118799
> 
> 赞同：0
> 
> 时间：2013-01-02T08:15:55.693
> 
> 标签：listview, mobile, click, kendo-ui

我有一个 KendoMobileListView 元素。该列表的每个项目都是一个模板，由几个 html 元素（包含行和单元格的表格）组成。单击一个项目时，我想知道单击了模板的哪个 html 元素。有解决办法吗？

谢谢

哈盖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:21:30.837

根据[文档](http://docs.kendoui.com/api/mobile/listview#click)，事件数据包含**e.target**属性，显示被点击（点击）的 DOM 元素。你试过吗？

```
function onClick(e) { console.log(e.target) }; 
```

# facebook - 如何从上周获取页面粉丝数

> ID：14118803
> 
> 赞同：0
> 
> 时间：2013-01-02T08:16:12.370
> 
> 标签：facebook, facebook-graph-api, facebook-page

我想获取上周给定页面的新 Facebook 粉丝数量。

例如：前一周的周一至周日。

我已经搜索过这个，但找不到任何信息。我可以从社交图表中轻松获得总粉丝数，但不知道如何从上周获得新粉丝数，以便我可以得到如下报告：

```
 New fans last week: 152
 Total fans: 2341 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:27:40.717

您必须是该页面的管理员，并且需要“read_insights”权限。如果没有用户授权，您将无法访问 Insights，这是获得详细统计数据的唯一方法。

> [https://developers.facebook.com/docs/reference/fql/insights/](https://developers.facebook.com/docs/reference/fql/insights/)

使用 FQL，这里解释：

> [如何使用 FQL 获取 `page_fan_adds` 多天](https://stackoverflow.com/questions/11746864/how-to-get-page-fan-adds-for-multiple-days-using-fql)

有点复杂，因为您必须添加每日值。但在同一页面上，提供了更简单的解决方案：

```
bladauhu/insights/page_fan_adds/?since=1340175600&until=1342767600 
```

# php - 如何使用 php 将数据存储在 cookie 中？

> ID：14118811
> 
> 赞同：4
> 
> 时间：2013-01-02T08:17:12.887
> 
> 标签：php, cookies

我是 PHP 新手，对 cookie 了解不多。

看来我必须将我的数据存储在 cookie 中，因为我只是暂时需要这些数据。我已经阅读了一些文章并尝试了其中一些，但我得到了空白的结果。

这是我的代码：

```
<?php
if (isset($_COOKIE['vaccine'])) {
setcookie('vaccine',$vaccine);
foreach ($_COOKIE[$vaccine] as $vaccine){ ?>

<div class="control-group">
<label class="control-label">
<?php echo '&nbsp'.'<a href="javascript:void(0);"  rel="tooltip"    
 title="Delete" onclick="delete_vaccination('.$vaccine->vaccination_record_id.');"><i class="icon-minus-sign"></i></a>'.'';?><?php echo $vaccine->vaccination_record_brand;?>

</label>
</div>

<?php }} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:30:57.033

您可以（应该？）为此使用会话。Cookie 不是临时的，它们存储在客户的计算机上。会话是暂时的，它们一直存在，直到您将它们销毁。

此外，您的 PHP 中有一些错误（在 cookie 处理中没有那么多）：`$_COOKIE[$vaccine]`将取消引用数组中的**值。**似乎是一个数组，您正在查看. 您将希望修复它：`$vaccine``$_COOKIE``$vaccine``$_COOKIE["Array"]`

```
foreach ($_COOKIE["vaccine"] as $vaccine) 
```

此外，当您将对象放入 cookie 时，您必须在设置或获取 cookie 之前对其进行[序列化/反序列化：](http://php.net/manual/en/function.serialize.php)

```
// fetch the vaccines somewhere first
setcookie('vaccine',serialize($vaccines)); 
```

那么，最后，为什么要设置 cookie，当设置 cookie 时？设置后，您应该阅读它。

完整代码：

```
<?php
if (isset($_COOKIE['vaccine'])) {
   $vaccines = unserialize($_COOKIE['vaccine']);
   foreach ($vaccines as $vaccine){ ?>

      <div class="control-group">
      <label class="control-label">
      <?php echo '&nbsp'.'<a href="javascript:void(0);"  rel="tooltip"    
          title="Delete" onclick="delete_vaccination('.$vaccine->vaccination_record_id.');">
          <i class="icon-minus-sign"></i></a>'.'';?>
          <?php echo $vaccine->vaccination_record_brand;?>

      </label>
      </div>

<?php }} ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:23:17.993

如果这是您的全部代码，那么进入 $vaccine 的数据在哪里？您似乎将该 cookie 设置为空。

然后还有代码错误；foreach 应该有 $_COOKIE['vaccine'] 而不是 $_COOKIE[$vaccine]。但请参阅下面有关 cookie 和数组的评论。

此外，您不能将 PHP 数组存储到 cookie 中。您必须在将数组存储在 cookie 中时对其进行序列化，并在将 cookie 取回时将其反序列化到 PHP 数组中。要么，要么查看 PHP 手册中的示例 #3 - [http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)，了解如何处理 cookie 中的数组。请注意，如果您使用这种方式，使用数组 cookie，那么会设置很多 cookie。这可能是个问题。所以你可能想考虑序列化。

PHP 手册本身的 setcookie 条目中给出了序列化的一种实现。请参阅上面给出的手册页中“cwillard at fastmail dot fm”的评论。

此外，您设置的 cookie 只能在下一页加载时访问。即使您将数据填充到 $vaccine 中，您第一次也会看到空白。在页面重新加载时，您应该看到什么

# java - Hadoop Map Task gets StackOverflowError

> ID：14118816
> 
> 赞同：1
> 
> 时间：2013-01-02T08:17:57.827
> 
> 标签：java, hadoop, stack-overflow

I'm seeing this exception in the syslogs of failed map tasks, all map tasks in a particular job are encountering this error.

Any guesses as to the cause here, this is a strange looking stack trace to my eyes.

```
2012-12-29 10:37:37,975 FATAL org.apache.hadoop.mapred.Child (main): Error running child : java.lang.StackOverflowError
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:80)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.setup(DelegatingMapper.java:46)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:54)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
    at org.apache.hadoop.mapreduce.lib.input.DelegatingMapper.run(DelegatingMapper.java:55)
    <1014 duplicate lines cut> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:41:04.800

Looking on sources of DelegationMapper.java I can suspect that you somehow set DelegationMapper to be your actual Mapper class. As a result - it infinitely delegates run to itself.

# easeljs - Easeljs：Displayobject ontick 事件在 for 循环中不起作用

> ID：14118817
> 
> 赞同：1
> 
> 时间：2013-01-02T08:18:04.730
> 
> 标签：easeljs

我是新手，我的英语很糟糕，但希望你能理解我的问题

我用easeljs创建了一个简单的太空射击游戏，当我尝试创建多个子弹并为每个子弹分配一个onTick句柄时，我只需要一颗子弹射出。这是代码：

```
//handle fire(shooting)
    if(fire && cd === 0){
        for(var i=0; i<5; i++){
                    //codartjs.Bullet is a class extend createjs.Bitmap
        var b = new codartjs.Bullet(bullet_img);
        b.x = 200;
        b.y = 200;
        stage.addChild(b);

        b.onTick = function(){
                            //this event handler work for only first instance
            b.y -= 10;
        };
        }

        cd = 100;

        setTimeout(function(){
            cd = 0;
        },100);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:00:30.780

您还可以尝试使用中央代码并循环遍历每个项目符号元素并以这种方式更新其位置。这是一个快速演示，可以说明我的观点。

```
<script>

    var canvas, stage;
    var bullets;
    var speed;

    function init() {
        stage = new createjs.Stage("test");
        bullets = [];
        var bg = new createjs.Shape();
        bg.graphics.beginFill("#FFFFFF").drawRect(0, 0, stage.canvas.width, stage.canvas.height).endFill();
        bg.cache(0, 0, stage.canvas.width, stage.canvas.height);
        speed = 15;
        stage.onClick = handleClick;
        stage.mouseEnabled = true;
        stage.enableMouseOver(10);
        createjs.Ticker.setFPS(24);
        stage.addChild(bg);
        createjs.Ticker.addListener(window);

    }

    function getSprite() {
        var s = new createjs.Shape();
        s.graphics.beginFill("#000000").drawCircle(0, 0, 10).endFill();
        return s;
    }

    function tick() {
        for(var i=0;i<bullets.length;i++) {
            var s =  bullets[i];
            s.x += speed;
        }
        stage.update();
    }

    function handleClick(event) {
        var s = getSprite();
        s.x = event.stageX;
        s.y = event.stageY;
        bullets.push(s);
        stage.addChild(s);
    }
</script> 
```

希望这可以帮助。

# android - 如何以编程方式创建 Menu 实例？即在onCreateOptionsMenu 之外膨胀一个菜单

> ID：14118820
> 
> 赞同：38
> 
> 时间：2013-01-02T08:18:36.033
> 
> 标签：android, android-layout, menu, menuitem

我想在方法**外** `onCreateOptionsMenu`扩展一个菜单对象（这意味着在用户不按下按钮时创建/显示菜单），所以我需要创建一个菜单实例以将其传递给 inflate 方法。

这是我要实现的目标的示例：

```
Menu menu = // How to create an instance !? 
new MenuInflater(context).inflate(R.menu.my_menu, menu) 
```

Menu 是一个接口，所以我需要知道哪个类正在实现它。我确实浏览了 Android 代码以获取有关如何创建 Menu 对象的任何提示，但仍然找不到我要查找的内容。

**编辑 1**

我的目标是从自定义视图中触发一个`onOptionsItemSelected(MenuItem item)`事件，该事件将由活动处理，因此我需要一个具有特定 itemId 和标题的 MenuItem 对象以将其与事件一起传递。

如果我能成功地创建一个 Menu 对象，就很容易得到它的子 MenuItems。

**编辑 2**

我**根本不想**显示菜单，我想要的是*使用菜单 XML 中定义的*元素*填充 ListView ，这些元素具有标题、图标和***itemId**，并且每当单击 ListViewItem 时，我都想**触发**在我的活动。***`onOptionsItemSelected(MenuItem item)`***

 *`onOptionsItemSelected(MenuItem item)`我知道我可以解析菜单 XML 以提取项目信息，但是如果不创建*标准*MenuItem 对象将其作为参数传递，我将无法触发。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-07-14T04:10:21.997

这是获取 Menu 实例的技巧：

```
PopupMenu p  = new PopupMenu(getContext(), null);
Menu menu = p.getMenu(); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-04T04:36:55.277

我找到了两种以编程方式创建 Menu 实例并对其进行膨胀的解决方案：

*   使用[ActionbarSherlock](http://actionbarsherlock.com/)库或[AppCompat v7 库](http://developer.android.com/tools/support-library/features.html#v7) `Menu menu = new MenuBuilder(context);`，或者您可以编写自己的`MenuBuilder`类

*   使用标准安卓 SDK：

// 通过反射创建实例

```
Menu menu = newMenuInstance(context);

protected Menu newMenuInstance(Context context) {
    try {
        Class<?> menuBuilderClass = Class.forName("com.android.internal.view.menu.MenuBuilder");

        Constructor<?> constructor = menuBuilderClass.getDeclaredConstructor(Context.class);

        return (Menu) constructor.newInstance(context);

    } catch (Exception e) {e.printStackTrace();}

    return null;
} 
```

一旦你有了一个 Menu 实例，你就可以很容易地从你程序中**任何地方的菜单 XML 资源扩展它**

`new MenuInflater(context).inflate(menuId, menu);`

我测试了这两种方法并且它们运行良好，我建议将第二种方法与android SDK中的标准`Menu`和类一起使用，**即使您的活动扩展了 SherlockActivity**，因为无论您使用或触发它，它仍然会接收`MenuItem`**`onOptionsItemSelected(MenuItem item)``android.view.MenuItem``com.actionbarsherlock.view.MenuItem`**

 *** * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-26T21:51:29.833

我不确定为什么这不是一个答案，而且我知道这是一个老问题，但对于未来的读者..

如果你只是这样做：

```
val menu = MenuBuilder(context)
MenuInflater(context).inflate(R.menu.menu_XXXX, menu) 
```

### 有用！

`androidx.appcompat.view.menu.MenuBuilder`实现`android.view.Menu`。经检查，仅此`PopupMenu`而已。

请注意，`com.android.internal.view.menu.MenuBuilder`@iTech 提到并使用的`PopupMenu`不是公开的，不应使用。

## 下面是两个辅助函数和一个使用示例：

```
fun Context.inflateMenu(@MenuRes menuRes: Int): Lazy<MenuBuilder> = lazy {
    MenuBuilder(this)
        .also { MenuInflater(this).inflate(menuRes, it) }
}

fun Fragment.inflateMenu(@MenuRes menuRes: Int): Lazy<MenuBuilder> = lazy {
    MenuBuilder(context)
        .also { MenuInflater(context).inflate(menuRes, it) }
} 
```

## 用法：

### 活动

```
class MyActivity : AppCompatActivity(R.layout.activity_my) {

    val menu by inflateMenu(R.menu.menu_my)

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        ...
    }
} 
```

### 分段：

```
class MyFragment : Fragment(R.layout.fragment_my) {

    val menu by inflateMenu(R.menu.menu_my)

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T08:29:14.300

你不需要对充气机做任何事情来添加你自己的菜单。只需覆盖并开始在**菜单**对象中`onCreateOptionsMenu`添加您自己的*项目。*例如：

 **```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, 1, Menu.NONE, "First");
    menu.add(0, 2, Menu.NONE, "Second");
    // repeat this to add additional menus

    return true;
} 
```

**add**方法中的第二个参数是`id`. 使用唯一*ID*来标识您选择的菜单项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T09:00:58.553

您可以拉取存储在 Activity 中使用的 PhoneWindow 中的 MenuBuilder 实例（实现 Menu 接口）。我有一个可行的解决方案，它使用 Java 反射。

我创建了一个项目“InDroid”来公开几个重要的隐藏方法，来自 Android 平台的变量 - [http://code.google.com/p/indroid/](http://code.google.com/p/indroid/)

BR，普拉桑塔*****

# selenium-webdriver - 如何使用 selenium webdriver java 在 Search Criteria 字段中输入值？

> ID：14118842
> 
> 赞同：0
> 
> 时间：2013-01-02T08:21:33.077
> 
> 标签：selenium-webdriver

我面临一个奇怪的问题，即我的脚本无法在搜索条件屏幕中输入数据。
**注意**：这是同一个屏幕，不是弹出窗口或新窗口。它只是导航到具有相同 webdriver 实例的其他屏幕

HTML：

```
<td class="dataCol requiredInput">

<input tabindex="1" maxlength="40" type="text" id="search_criteria" size="20" name="search_criteria" value="">

</td> 
```

我使用的代码：

```
LoginPage2.driver.findElement(
  By.xpath("//input[@id='search_criteria']")
).sendKeys("test") 
```

我正在使用 Selenium 2.25.0

**观察**：在 HTML 语法如下所述的字段中写入文本值时，我没有遇到任何问题：

```
<*td class="dataCol col02">
<*input id="00N20000001LwsL" maxlength="20" name="00N20000001LwsL" size="20" tabindex="6" type="text">
<*/td> 
```

我不确定这是因为 HTML 格式还是代码的构建方式。

如果我遗漏了什么，请告诉我？我也`By.name`试过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:26:46.867

尝试在 xpath 上更具体，多个元素可能对应于同一个 xpath。也许尝试：

```
"//td[@class='dataCol requiredInput']/input[@tabindex='1' and @id='search_criteria']" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-10T07:00:40.340

```
driver.findElement(By.name("password")).sendKeys("ccc"); 
```

# c# - Enumerable.OrderBy 如何使用 keySelector

> ID：14118844
> 
> 赞同：8
> 
> 时间：2013-01-02T08:21:49.493
> 
> 标签：c#, linq

使用前面的代码，我成功地生成了一个数字集合并打乱了元素在数组中的位置：

```
var randomNumbers = Enumerable.Range(0, 100)
                    .OrderBy(x => Guid.NewGuid()); 
```

一切功能都很好，但是当我试图理解`Enumerable.OrderBy`. 以下面的代码为例：

```
var pupils = new[] 
{ 
    new Person() { Name = "Alex", Age = 17 },
    new Person() { Name = "Jack", Age = 21 } 
};

var query = pupils.OrderBy(x => x.Age); 
```

我的理解是，我传递了我希望排序的属性，并且我假设如果没有为第二个重载指定`Comparer<T>.Default`显式，则 LINQ 将用于确定如何对集合进行排序。`IComparer`我真的看不到如何应用任何这种合理的逻辑来以这种方式对数组进行洗牌。那么 LINQ 是如何让我像这样对数组进行洗牌的呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:55:58.997

> Enumerable.OrderBy 如何使用 keySelector？

`Enumerable.OrderBy<T>`懒惰地返回 - 不直接调用 keySelector。结果是`IOrderedEnumerable<T>`在枚举时将执行排序。

枚举时，对每个元素调用一次 keySelector。键的顺序定义了元素的新顺序。

这是一个漂亮的[示例实现](https://stackoverflow.com/a/13080592/8155)。

* * *

> 那么 LINQ 是如何让我像这样对数组进行洗牌的呢？

```
var randomNumbers = Enumerable
  .Range(0, 100)
  .OrderBy(x => Guid.NewGuid()); 
```

为每个元素调用 Guid.NewGuid。对第二个元素的调用可能会生成一个高于或低于对第一个元素的调用的值。

`randomNumbers`是`IOrderedEnumerable<int>`每次枚举时都会产生不同的顺序。每次`randomNumbers`枚举时，每个元素都会调用一次 KeySelector。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T10:06:03.880

你非常接近理解这种洗牌是如何工作的。在你的第二种情况下

```
pupils.OrderBy(x => x.Age); 
```

被`Comparer<int>.Default`使用（这些人是按他们的`Age`，简单的）。

在您的第一种情况下，`Comparer<Guid>.Default`使用。

*现在它是如何工作的？*.

每次你这样做`Guid.NewGuid()`（大概）都会产生不同的/原始的/非重复`Guid`的。现在当你做

```
var randomNumbers = Enumerable.Range(0, 100).OrderBy(x => Guid.NewGuid()); 
```

这些数字根据生成的 Guid 进行排序。

*现在什么是指南*？

它们是以十六进制形式表示的 128 位整数。由于 2^128 是如此之大，因此生成两个 Guid 的机会非常罕见/几乎不可能。由于 Guid 表现出某种随机性，因此排序也是随机的。

*如何比较两个 Guid 以强制执行排序？*

您可以根据一个简单的实验来确认它。做：

```
var guids = Enumerable.Range(0, 10).Select((x, i) => 
    {
        Guid guid = Guid.NewGuid();
        return new { Guid = guid, NumberRepresentation = new BigInteger(guid.ToByteArray()), OriginalIndex = i };
    }).ToArray();

var guidsOrderedByTheirNumberRepresentation = guids.OrderBy(x => x.NumberRepresentation).ToArray();
var guidsOrderedAsString = guids.OrderBy(x => x.Guid.ToString()).ToArray();

var randomNumbers = Enumerable.Range(0, 10).OrderBy(x => guids[x].Guid).ToArray();

//print randomNumbers.SequenceEqual(guidsOrderedByTheirNumberRepresentation.Select(x => x.OriginalIndex)) => false

//print randomNumbers.SequenceEqual(guidsOrderedAsString.Select(x => x.OriginalIndex)) => true 
```

所以`Comparer<Guid>.Default`是基于guid的字符串表示。

* * *

在旁边：

您应该使用[Fisher-Yates](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)改组来提高速度。或许

```
public static IEnumerable<T> Shuffle<T>(this IList<T> lst)
{
    Random rnd = new Random();
    for (int i = lst.Count - 1; i >= 0; i--)
    {
        int j = rnd.Next(i + 1);
        yield return lst[j];
        lst[j] = lst[i];
    }
} 
```

或者为了简洁起见，可能只是（这仍然比 Guid 方法更快）

```
public static IEnumerable<T> Shuffle<T>(this IEnumerable<T> lst)
{
    Random rnd = new Random();
    return lst.OrderBy(x => rnd.Next());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T08:24:20.790

> 那么这是如何工作的呢？

以下查询`Comparer<Guid>.Default`用于比较。

```
 .OrderBy(x => Guid.NewGuid()) 
```

由于每个生成的 GUID 实际上都是唯一的（正如您在`OrderBy`子句本身中生成的那样），您相信您得到的是随机顺序（这是不正确的理解）。
如果再次运行查询，您将再次看到（可能）洗牌结果，因为将生成新的 GUID 集。

如果您将使用预定义的 GUID，您将看到顺序。

示例`randomNumbers1`并`randomNumbers2`在下面具有相同的值。

```
var randomGuids = Enumerable.Range(0,10).Select (x => Guid.NewGuid()).ToArray();

var randomNumbers1 = Enumerable.Range(0, 10).OrderBy(x => randomGuids[x]);

var randomNumbers2 = Enumerable.Range(0, 10).OrderBy(x => randomGuids[x]); 
```

* * *

> 我真的看不到如何应用任何这种合理的逻辑来以这种方式对数组进行洗牌。

您可以随机播放，因为元素之间没有顺序（`GUID`在您的示例中）。如果您使用已排序的元素，您将获得有序输出而不是随机输出。

# .net - 在 LINQPad 中使用已注册的 COM 库

> ID：14118845
> 
> 赞同：2
> 
> 时间：2013-01-02T08:22:03.563
> 
> 标签：.net, activex, linqpad

...例如 Windows 图像采集库？在 Visual Studio 中，我会从**Add References**对话框中添加一个引用，但 LINQPad 只允许添加对 .NET 程序集的引用。

我什至不需要强类型对象（尽管它会更可取）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T09:18:02.767

您必须创建一个 RCW 程序集来引用该库。使用[tlbimp](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.100%29.aspx)工具创建一个为您的 COM 对象提供包装器的 .NET 程序集。您可以通过 Query Properties - Additional References 从 LINQPad 引用此程序集。

# internet-explorer - Chrome 和 Firefox 显示 " " / IE ONLY 代码

> ID：14118846
> 
> 赞同：1
> 
> 时间：2013-01-02T08:22:06.620
> 
> 标签：internet-explorer, browser, if-statement, conditional-comments

Firefox 和 chrome 都坚持执行这段代码：

```
<!--[if IE]>
<p>Internet Explorer only code</p>
<![endif]--> 
```

还有这个：

```
<!--[if IE 7]>
Special instructions for IE 7 here
<![endif]--> 
```

他们显示的 IF IE 内容就像 IF 不存在... 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:25:20.323

这些特殊指令仅在标题中起作用，通常用于加载特殊`script`或`link`标签

# php - 如果它包含一个单词，则删除整个单词

> ID：14118848
> 
> 赞同：-1
> 
> 时间：2013-01-02T08:22:34.257
> 
> 标签：php

> **可能重复：**
> [如果单词包含特定字符串，则删除整个单词](https://stackoverflow.com/questions/3894441/remove-entire-word-if-the-word-contains-specific-string)

如何删除包含单词的整个单词？例如，'releas' 应该删除已发布、发布等。

```
/* Read in from the file here, not in the function - you only need to read the file once */
$wordlist = array('release','announce');

/* Sample data */
$words = 'adobe releases releases Acrobat X';

foreach ($wordlist as $v)
      $words = clean($v,$words);

function clean($wordlist,$value)
{
        return preg_replace("/\b$wordlist\b/i", '***',trim($value));
}  

echo 'Words: '.$words.PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:26:17.610

我会使用这个 REGEXP；

```
return preg_replace("/\w*$wordlist\w*/i", '***', trim($value)); 
```

应用于您的代码，它将是：

```
foreach ($wordlist as $v)
  $words = clean($v, $words);

function clean($word, $value) {
    return preg_replace("/\w*$word\w*/i", '***',trim($value));
} 
```

（请注意，我重命名`$wordlist`为`$word`以使事情更清楚，因为`$wordlist`它也是数组的名称）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:28:49.587

你可以循环通过你的`$wordlist`

```
function clean($wordlist,$value)
{
    foreach ($wordlist as $word) {
        $value = preg_replace("/\b\w*$word\w*\b/i", '***', trim($value));
    }

    return $value;
} 
```

并一次性完成

```
function clean($wordlist,$value)
{
    $all_words = implode('|', $wordlist);
    return preg_replace("/\b\w*(?:$all_words)\w*\b/i", '***', trim($value));
} 
```

*更新*：

浏览其他答案和评论，似乎我没有正确看待这个问题。如果`$wordlist`不是数组，您*可以*使用@fthiella 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:30:59.730

试试这种方式

```
$_words = implode( '|', $wordlist );

return preg_replace( "/\b\w*{$_words}\w*\b/i", "***", trim( $value ) ); 
```

或更好

```
$_words = array();
foreach ( $wordlist as $word ) {
    $_words[] = '/\b\w*' . preg_quote( $word ) . '\w*\b/i';
}

return preg_replace( $_words, '***', trim( $value ) ); 
```

第二种方法避免了正则表达式的问题，如果一些保留字符出现在单词中。

# javascript - 在jsp中隐藏动态div

> ID：14118853
> 
> 赞同：0
> 
> 时间：2013-01-02T08:23:13.313
> 
> 标签：javascript, jsp, html

在我`<div>`的 id 属性是来自网页的动态结果。就像跟随

```
<div class="row" id="WC_AddressEntryForm<c:out value='_${paramPrefix}'/>_div_firstname"> 
```

所以`${paramPrefix}`值是动态变化的。

少数下一个`<div>`id 也有这种类型的代码

```
<div class="row" 
id="WC_AddressEntryForm<c:out value='_${paramPrefix}'/>_div_lastname">

<div class="row" id="WC_AddressEntryForm<c:out value='_${paramPrefix}'/>_div_1" > 
```

还有一些类似的。我的要求是当 所有以前编写的`${paramPrefix}`值都是**用户**`<div>`时隐藏 div那么实现它的方法是什么？

非常感谢， *新年快乐*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:34:13.100

尝试这个 -

```
 <%   
      if (! paramPrefix.equals("User")) {
  %>
        <div class="row" id="WC_AddressEntryForm<c:out value='_${paramPrefix}'/>_div_firstname">

 <%   } %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:29:24.753

只需将此JS代码放在目标元素代码之后

```
<div class="row" id="WC_AddressEntryForm<c:out value='_${paramPrefix}'/>_div_firstname">

<script>
   document.getElementById('WC_AddressEntryFormuser_div_firstname').style.visibility = 'hidden';
</script> 
```

或者如果你真的想删除 div 的分配空间，你可以使用`display`css 属性并将其设置为`none`

```
<script>
   document.getElementById('WC_AddressEntryFormuser_div_firstname').style.display = 'none';
</script> 
```

好的，所以它似乎`_${paramPrefix}`很好地包含动态值，你可以做的就是这个

```
<script>
var user = "<c:out value='_${paramPrefix}'/>";
if(user != ""){ //hide when user variable contains something
   document.getElementById('WC_AddressEntryForm'+  user +'_div_firstname').style.display = 'none';
   //you can hide other elements here...
}
</script> 
```

好吧，这会随着您的需求变化而变化

参考： [http ://rakibulislam.wordpress.com/2008/06/11/changeing-css-property-using-javascript/](http://rakibulislam.wordpress.com/2008/06/11/changing-css-property-using-javascript/)

# php - 无法显示消息框对话框

> ID：14118860
> 
> 赞同：0
> 
> 时间：2013-01-02T08:23:36.097
> 
> 标签：php, ajax

我有这个代码：

```
function delTempBill() {
    if ($('#bills_ID').val() == '') {
        popUpMessage("Error", "choose bills to delete", 2);
    } else {
        $.ajax({
            url: "DelTempBill.php",
            type: "POST",
            data: {
                draft: "ok",
                bills_ID: selectedTempId
            },
            dataType: "json",
            success: function (data2) {
                if (parseInt(data2) > 0) {
                    $("#tempBills" + selectedTempId).remove();
                    popUpMessage("Done", "Bills was Delete", 2);
                    newGrid();
                }
            }
        });
    }
} 
```

此代码是从表中删除账单，当我调用此函数时，账单已被删除但消息无法显示。

为什么 ？

# android - Android：基本的java +数组

> ID：14118862
> 
> 赞同：1
> 
> 时间：2013-01-02T08:23:39.400
> 
> 标签：android

这是一个基本问题 - 但我是 Android 和 Java 新手，所以请帮忙。我试图从数据库（SQLite）中检索所有行并将其显示在屏幕上。到目前为止，它对于简单的检索和显示工作正常。

但现在，我想添加逻辑。如果数组中的某个字段等于一个值，那么我想执行一些操作，然后在屏幕上显示该字段。

更详细的银行表 - 有银行名称、银行余额、银行货币。我想读取变量中的银行货币，如果是美元，则按原样显示银行余额。如果是 INR，那么我想将其转换为银行余额 * 55，然后显示新余额。

这是我当前的代码

数据库助手

```
 public ArrayList<ArrayList<Object>> getAllRowsAsArrays()
{
    // create an ArrayList that will hold all of the data collected from
    // the database.
    ArrayList<ArrayList<Object>> dataArrays = new ArrayList<ArrayList<Object>>();

    Cursor cursor;

    try
    {
        // ask the database object to create the cursor.
        cursor = db.query(
                BANKTABLE_NAME,
                new String[]{BANKTABLE_ROW_ID, BANKTABLE_BANKNAME, BANKTABLE_BALAMT, BANKTABLE_CURRENCY},
                null, null, null, null, null
        );

        // move the cursor's pointer to position zero.
        cursor.moveToFirst();

        // if there is data after the current cursor position, add it
        // to the ArrayList.
        if (!cursor.isAfterLast())
        {
            do
            {
                ArrayList<Object> dataList = new ArrayList<Object>();

                dataList.add(cursor.getLong(0));
                dataList.add(cursor.getString(1));
                dataList.add(cursor.getInt(2));
                dataList.add(cursor.getString(3));

                dataArrays.add(dataList);
            }
            // move the cursor's pointer up one position.
            while (cursor.moveToNext());
        }
    }
    catch (SQLException e)
    {
        Log.e("DB Error in Retreive all", e.toString());
        e.printStackTrace();
    }

    // return the ArrayList that holds the data collected from
    // the database.
    return dataArrays;
} 
```

这是我调用这个数组的java类

```
 private void updateTable()
{

    // collect the current row information from the database

    ArrayList<ArrayList<Object>> data = db.getAllRowsAsArrays();

    // iterate the ArrayList, create new rows each time and add them
    // to the table widget.

    for (int position=0; position < data.size(); position++)
    {
        TableRow tableRow= new TableRow(this);

        ArrayList<Object> row = data.get(position);

        TextView bankNameN = new TextView(this);
        bankNameN.setText(row.get(1).toString());
        tableRow.addView(bankNameN);

        TextView balINRA = new TextView(this);
        balINRA.setText(row.get(2).toString());
        tableRow.addView(balINRA);

        dataTable.addView(tableRow);
    }
} 
```

这是提取银行名称和金额的简单代码。我想为 IF ELSE 添加逻辑。请用代码指导我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:44:07.917

使用此代码在 balINRA 中显示金额

```
 TextView balINRA = new TextView(this);
    if(row.get(3).toString.equals("USD"))
    {
    balINRA.setText(String.valueOf((Integer.parseInt(row.get(2).toString()))*55));
    }
    tableRow.addView(balINRA); 
```

# jquery - jquery在选择元素上得到错误事件更改

> ID：14118864
> 
> 赞同：1
> 
> 时间：2013-01-02T08:23:53.330
> 
> 标签：jquery

我有错误

> “不推荐使用属性的指定属性。它始终返回 true。return !val || val.specified ? elem.value : elem.text;”

```
 $(document).ready(function(){
    $("#o_productCategory").change(function(e){
        $.getJSON("URI", ({"parent" : $("#o_productCategory").val()}),function(result) {
            //code here
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:36:46.827

该错误看起来与`$("#o_productCategory").val()`. 可能是[这个](http://bugs.jquery.com/ticket/12072)或[这个](http://bugs.jquery.com/ticket/11397)。

因为您在`$("#o_productCategory")`的`change`回调中，所以您可以使用`this.value`。

```
$.getJSON("URI", { "parent" : this.value }, function (result) {
    //code here
}); 
```

# python - 在 Ninja IDE 上导入 Python 模块时遇到问题

> ID：14118866
> 
> 赞同：6
> 
> 时间：2013-01-02T08:24:10.803
> 
> 标签：python, ide, module

我一直在尝试将模块导入 Python 的 Ninja IDE。这些是我在终端上工作的模块（numpy、scipy、scitools、matplotlib 和 mpl_toolkits），但在 Ninja 中无法正常运行。

首先，我只是收到消息`No module named ____`。我检查`sys.path`并发现路径在应用程序内

`/Applications/Ninja IDE.app/Contents/Resources/lib/python2.7` 是典型的路径。`sys.path`我尝试更改路径，但即使在重新启动 ide 后它似乎也没有做任何事情。

但我希望路径指向模块的存储位置（即`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`）。通过将路径的内容添加到提供的文件夹中，我能够让 numpy 和 scipy 以及 mpl_toolkits 的部分工作`sys.path`。但是，我仍然无法在 ninja ide 解释器中获得功能齐全的模块。我将在下面给出一些示例，说明当我导入某些模块时会发生什么。

```
import matplotlib.pyplot
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Applications/Ninja IDE.app/Contents/Resources/lib/python2.7/matplotlib/__init__.py", line 106, in <module>
ImportError: No module named sysconfig

import mpl_toolkits

from mpl_toolkits.mplot3d import axes3d
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Applications/Ninja IDE.app/Contents/Resources/lib/python2.7/mpl_toolkits/mplot3d/__init__.py", line 1, in <module>
  File "/Applications/Ninja IDE.app/Contents/Resources/lib/python2.7/mpl_toolkits/mplot3d/axes3d.py", line 14, in <module>
  File "/Applications/Ninja IDE.app/Contents/Resources/lib/python2.7/matplotlib/__init__.py", line 106, in <module>
ImportError: No module named sysconfig 
```

谢谢您的帮助。抱歉，我对编程很陌生，但在发帖之前我确实进行了大约一天半的研究。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T03:40:24.600

我知道这个问题已经存在几个月了，但我想发布我的解决方案以防其他人发现它有用。我有一个非常相似的问题，并且在任何地方都很难找到一个快速可行的解决方案。

我有点迂回的解决方案是简单地使用我想要的 numpy 版本创建一个 virtualenv 文件夹，然后将 NinjaIDE 项目的“virtualenv”属性指向该文件夹。我重新启动了 NinjaIDE 并繁荣，立即工作。

要通过 GUI 为您的项目设置 virtualenv 属性，请转到 Project 菜单：

```
Project > Open Project Properties > Project Execution, 
```

您应该会看到一个名为“Virtualenv 文件夹”的变量。将其指向您的 virtualenv 的文件夹，它应该可以工作。（可能需要重新启动 NinjaIDE。）这对我有用，Ubuntu 12.04 下的 NinjaIDE 版本 2.2。

一个简短的说明：我实际上并没有完全使用 virtualenv——我必须使用“ [conda env](http://docs.continuum.io/conda/examples/create.html) ”，因为我使用的是 Anaconda 发行版，而且显然它还没有经过 virtualenv 的良好测试。（当我去easy_install virtualenv时，我实际上得到了一个警告。以前没见过。）

无论哪种方式，这个stackoverflow问题都有一些很好的指向virtualenv教程的指针：[综合初学者的virtualenv教程？](https://stackoverflow.com/questions/5844869/comprehensive-beginners-virtualenv-tutorial)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:57:53.903

这很奇怪，因为该`sysconfig`模块是 Python 2.7 标准库的一部分。你确定 Ninja 使用的是正确的 Python 版本吗？尝试运行：

```
import sys
print sys.version_info 
```

来自 Ninja，查看它实际使用的是哪个 Python 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T22:11:32.677

我在尝试`/home/paul/lib/python`使用 Ninja-IDE 的控制台导入模块时遇到了类似的问题。我在检查 Ninja-IDE 的控制台时发现它`/home/paul/lib/python`没有出现。`syspath`但它确实在终端！

通过从终端启动 Ninja-IDE，在`/home/paul/lib/python` *检查*`syspath`Ninja-IDE 的控制台时进入。我现在能够导入我需要的模块。

我希望这可能会有所帮助。如果不是对 ebris1 也可能是对其他人。

# sql-server - 在 SSIS 条件拆分中获得强硬的表达

> ID：14118872
> 
> 赞同：0
> 
> 时间：2013-01-02T08:24:23.177
> 
> 标签：sql-server, expression, ssis

有谁知道如何达到这个要求？开始日期总是比结束日期早 73 小时。虽然结束日期将是最近的上午 8 点，但它绝对是过去的日期时间。我想使用表达式进行条件拆分。
场景：
包运行的日期时间：24/12/12 0900
开始日期：21/12/12 0700
结束日期：24/12/12 0800

包运行的日期时间：25/12/12 2300
开始日期：22/12/12 0700
结束日期：25/12/12 0800

包运行的日期时间：26/12/12 0759
开始日期：22/12/12 0700
结束日期：25/12/12 0800

包运行的日期时间：26/12/12 0800
开始日期：22/12/12 0700
结束日期：25/12/12 0800

包运行的日期时间：26/12/12 0805
开始日期：23/12/12 0700
结束日期：26/12/12 0800

如您所见，我希望将数据从我的酸到我的分期跨度包括 73 小时。我想要 73 小时的事件数据。所以 EVENT_D + EVENT_T 应该在 Startdate 和 Enddate 之间

我试过的：

```
 (DT_DBTIMESTAMP)(EVENT_D + " " + EVENT_T) >= DATEADD("HH",-73,GETDATE()) && (DT_DBTIMESTAMP)(EVENT_D + " " + EVENT_T) <= DATEADD("HH",8,(DT_DBDATE)(GETDATE())) 
```

它没有给我我想要的。到目前为止，我所尝试的只是 73 小时前给我的。不是我想要的。迫切需要指导。我正在使用 SSIS 2005。
提前致谢，
10e5x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:17:18.737

这是一种对于简单表达式而言过于复杂的逻辑，这使我不得不使用脚本任务——由于您使用的是 SSIS 2005，因此必须用 VB.NET 编写：

```
Public Sub Main()
    Dim runDate As DateTime = CDate(Dts.Variables("RunDate").Value)
    Dim startDate As DateTime
    Dim endDate As DateTime

    ' Set the end date to be 8AM on the run date
    endDate = New DateTime(runDate.Year, runDate.Month, runDate.Day).AddHours(8)
    If runDate <= endDate Then
        ' Use yesterday for the end date
        endDate = endDate.AddDays(-1)
    End If
    startDate = endDate.AddHours(-73)
    Dts.Variables("StartDate").Value = startDate
    Dts.Variables("EndDate").Value = endDate
    Dts.TaskResult = Dts.Results.Success
End Sub 
```

如果不明显，两者`StartDate`和`EndDate`都是您添加到`ReadWriteVariables`脚本任务集合中的包变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:17:32.630

在 TSQL 中尝试以下逻辑：

```
DECLARE @DATE DATETIME, @END_DATE DATETIME, @START_DATE DATETIME;

SET     @DATE = '2012-12-26 08:00:00'

SELECT  @END_DATE = CASE WHEN @DATE > DATEADD(HOUR,8,CAST(CAST(@DATE     AS DATE) AS DATETIME))
                         THEN DATEADD(HOUR,8,CAST(CAST(@DATE     AS DATE) AS DATETIME))
                         ELSE DATEADD(HOUR,8,CAST(CAST(@DATE - 1 AS DATE) AS DATETIME))
                    END;

SELECT  @START_DATE = DATEADD(HOUR,-73, @END_DATE);
SELECT  @START_DATE, @END_DATE; 
```

一旦您正确处理了边界案例，将其转换为 SSIS 应该完全没有问题。

# java - 错误声明

> ID：14118873
> 
> 赞同：-1
> 
> 时间：2013-01-02T08:24:30.083
> 
> 标签：java, jdbc, prepared-statement

> 没有为 setDate(int,java.util.Date) 方法找到合适的方法 PreparedStatement.setDate(int,java.sql.Date,Calendar) 不适用

```
public void update (Pasien dp) {
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
PreparedStatement statement = null;
try {
    statement =  connection.prepareStatement(update);

    statement.setString(1, dp.getId_pemeriksaan());
    statement.setString(2,dp.getNama());
    statement.setString(3,dp.getAlamat());
    statement.setString(4,dp.getUmur());
    statement.setString(5,dp.getJenis_kelamin());
    statement.setString(6,dp.getGolongan_darah());
    statement.setString(7,dp.getSpesimen());
    statement.setString(8,dp.getPengirim());
    statement.setString(9,dp.getPemeriksaan());
    statement.setDate(10, dp.getTanggal()df.format(getTanggal));
    statement.setString(11, dp.getNo_rekam_medik());
    statement.executeUpdate();

} catch (SQLException ex) {
    System.out.println("error karena" +ex.getMessage());
}finally{
    try {
        statement.close();
    } catch (SQLException ex) {
        System.out.println("error karena" +ex.getMessage());
    }
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:27:13.307

这行代码很可疑：

```
statement.setDate(10, dp.getTanggal()df.format(getTanggal)); 
```

也许应该是：`statement.setDate(10, df.parse(dp.getTanggal()));`

（如果`dp.getTanggal()`方法是 a `String`）。

* * *

显然你还没有检查`PreparedStatement.setDate()`方法。

该方法具有以下签名：

```
void setDate(int parameterIndex, java.sql.Date x) throws SQLException; 
```

它不是一个对象，`java.util.Date`而是一个`java.sql.Date`对象。

如果你想使用`Calendar`那么：

```
void setDate(int parameterIndex, java.sql.Date x, Calendar cal) throws SQLException; 
```

是要打电话的人。显然，这仍然需要`java.sql.Date`对象。

* * *

要将 a 转换`java.util.Date`为 a `java.sql.Date`，您可以执行以下操作：

```
java.util.Date date = df.parse(...);
java.sql.Date = new java.sql.Date(date.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:29:50.987

异常说明了确切的错误。

> 没有找到适合 setDate(int,java.util.Date) 方法 PreparedStatement.setDate(int,java.sql.Date,Calendar) 的方法不适用]

在您的 src 中，以下行

```
dp.getTanggal()df.format(getTanggal) 
```

正在回归`java.util.Date`。但该`PreparedStatement.setDate()`方法期望`java.sql.Date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:26:14.053

```
statement.setDate(10, dp.getTanggal()df.format(getTanggal)); 
```

你忘了放`comma(,)`。:)

但有趣的部分是`DateFormat#format`返回日期的格式化`String`表示。这需要通过它的槽`setString`方法。

# sql - 带有别名的 Delphi 中的 SQL 错误 206

> ID：14118874
> 
> 赞同：0
> 
> 时间：2013-01-02T08:24:41.897
> 
> 标签：sql, select, alias

我正在使用这个 SQL：

```
SELECT sys_tbldef_desc as tbldef_desc
FROM sys_tbldef
WHERE UPPER(tbldef_desc) = UPPER('a tbldef desc') 
```

我得到这个错误：

```
Error at line 1 - Dynamic SQL Error
SQL error code = -206
Column unknown
TBLDEF_DESC 
```

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T08:26:21.543

你不能使用`ALIAS`on`WHERE`子句。SQL操作顺序如下

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   SELECT 子句（*别名发生在这里*）
*   ORDER BY 子句

该`WHERE`子句在该子句之前首先执行`SELECT`。您应该改用列名。例如：

```
SELECT sys_tbldef_desc as tbldef_desc
FROM sys_tbldef
WHERE UPPER(sys_tbldef_desc) = UPPER('a tbldef desc') 
```

如果您真的想使用`ALIAS`，则需要子查询，例如：

```
SELECT tbldef_desc
FROM
(
    SELECT sys_tbldef_desc as tbldef_desc
    FROM sys_tbldef
) a
WHERE UPPER(tbldef_desc) = UPPER('a tbldef desc') 
```

但我更喜欢第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T08:26:41.270

您不能在 WHERE 子句中使用别名，您的查询应该是，

```
SELECT sys_tbldef_desc as tbldef_desc
FROM sys_tbldef
WHERE UPPER(sys_tbldef_desc) = UPPER('a tbldef desc') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:01:24.057

我找到了解决方案：

```
SELECT *
FROM sys_tbldef
where UPPER(case when sys_tbldef_trnslt_desc is null
then sys_tbldef_desc else sys_tbldef_trnslt_desc end) = UPPER('a table desc') 
```

# javascript - 在 Typescript 中使用超出范围的函数

> ID：14118878
> 
> 赞同：16
> 
> 时间：2013-01-02T08:25:08.960
> 
> 标签：javascript, typescript

我认为这已经在某个地方解决了，在某个时候，只是为了我的生活，我不记得了，所以这是我的问题：

我正在做一些将加载到现有应用程序中的 javascript 工作。这个应用程序有很多可用的功能，除了我想实际使用的一些功能外，我几乎不知道任何功能。因此，可以说我知道 window.srslyUsefulFunction 对我可用，我不太关心将其移植到打字稿定义中。

所以问题是如何在我自己的打字稿文件中使用 window.srslyUsefulFunction 而不为它创建定义？

例子：

```
class MyClass {
    public MyMethod (id : string) : void {
        // do something 
        var result = window.srslyUsefulFunction(id);
        // do something (with the result)
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-02T09:50:26.123

您可以将该函数添加到`Window`界面中，然后在您的 TypeScript 程序中使用它：

```
interface Window {
    srslyUsefulFunction(id: number): void;
}

class MyClass {
    doSomething() {
        window.srslyUsefulFunction(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-12T12:16:57.063

我有简单的解决方法。

在 index.html 中

```
function playIntro() {
        intro = new lib.intro();
        onlinePlayer.contentContainer.addChild(intro);
        stage.update();
    } 
```

在我的 Main.ts 中，我这样称呼它：

```
private onClick(event): void {

        if (window.hasOwnProperty('playIntro')) {
            window['playIntro'].call();
        }
    } 
```

所以......如果你想从全局范围调用“盲”js函数，只需使用 window["foo"].call();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:50:37.683

检查函数是否存在。如果没有，请声明：

```
if(!window.hasOwnProperty('srslyUsefulFunction')
 || typeof window['srslyUsefulFunction'] !== "function"){
    window['srslyUsefulFunction'] = function(){
        console.log("You're only running a dummy implementation of srslyUsefulFunction here!");
    };
} 
```

# css - 悬停时过渡，除非悬停在某个元素上

> ID：14118886
> 
> 赞同：2
> 
> 时间：2013-01-02T08:25:28.497
> 
> 标签：css, css-transitions, transition, transitions

我有一个看起来像这样的元素：

```
 ___
|  X|
 ‾‾‾ 
```

所以本质上是一个带有按钮的小盒子来关闭它。

我还对元素应用了 CSS，因此当悬停时，它会变成这样：

```
 ___________________
|                  X|
 ‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾ 
```

简而言之，它只会变得更宽。

现在。我想要做的是，每当用户将鼠标悬停在关闭按钮 (X) 上时，该框都不会改变其大小。
但是当用户将鼠标悬停在盒子上的任何其他地方时，它会按照建议的方式运行。

纯CSS可以做到这一点吗？

编辑：对不起，我添加了这么晚，但答案应该基于这个例子：http: [//jsfiddle.net/fpY34](http://jsfiddle.net/fpY34)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:51:48.157

使用您拥有的标记，我不知道如何在没有固定宽度和绝对肮脏的情况下做到这一点。但这里是我全力以赴！[http://jsfiddle.net/fpY34/15/](http://jsfiddle.net/fpY34/15/)

```
<div id='outer'>
    <div id='notOuter'>
        <div id='content'>
            <div id='img'>
            </div>
            <div id='label'>
                Text example
            </div>
            <div id='closeButton'>
                X
            </div>
        </div>
    </div>
</div>​ 
```

和美丽：

```
#outer { height: 30px; }
#notOuter {}
#content { float: left; position: relative; }
#closeButton { background: #0f0; position: absolute; top: 0; left: 30px; width: 30px; height: 30px;} 
#img { background: #f0f; width: 30px; height: 30px; position: absolute; left: 0; top: 0; }
#label { display: none; position: absolute; left: 0; top: 0; width: 60px; height: 30px; background: #f00; }
#img:hover { width: 60px; z-index: 10; }
#img:hover + #label,
#label:hover { display: block; z-index: 20; }
#img:hover ~ #closeButton,
#label:hover + #closeButton { left: 60px; } 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:49:29.100

请你检查一下并告诉我你想要什么吗？

[http://jsfiddle.net/UjPtv/10/](http://jsfiddle.net/UjPtv/10/)

```
<style>
        .divs
        {
            height: 20px;
            width: 100px;
            border: 1px solid;
            padding: 5px 3px;
        }
         .divs:hover
        {

            width: 50px;
            padding-left: 150px

        }
    </style>
    <div class="divs"><span>X</span></div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:57:17.393

你可以浮动它们：

```
<div class="box">
    <div>
      Content
    </div>
    <span>X</span>
</div>​​​​​​​

.box {display:inline-block;border:1px solid black}
.box div {width:100px;float:left}
.box div:hover {width:200px}
.box span {float:left}​ 
```

但可能不适用于旧版浏览器。

# .net - 试图从窗口名称中获取进程文件名

> ID：14118889
> 
> 赞同：0
> 
> 时间：2013-01-02T08:25:38.900
> 
> 标签：.net, vb.net, visual-studio-2010, process

编辑：我认为这不是最好的方法。因此，当我收集窗口标题时，我将它们的名称添加到用于存储它们的控件的标记中。因此，当用户在应用程序中较早地选择进程时，它会将标记保存到变量中以供以后使用。

我正在尝试从我拥有的窗口标题中获取进程文件名/路径。我想我可能必须从标题中获取进程名称，然后从那里获取文件路径。不过我很迷茫。到目前为止，这是我从窗口中检索过程的内容。

```
 Dim ProcessRunning() As Process

        Dim MyProcess As Process

        ProcessRunning = Process.GetProcesses
        For i = 0 To ProcessRunning.Length - 1
            MyProcess = ProcessRunning(i)
            If MyProcess.MainWindowTitle = WindowTitle.Text Then
                MessageBox.Show(MyProcess.ProcessName)
            End If

            Next 
```

# jpa - 在 JPQL 中将日期时间转换为长时间戳

> ID：14118890
> 
> 赞同：0
> 
> 时间：2013-01-02T08:25:40.993
> 
> 标签：jpa, openjpa

我有一个包含两列的实体：

```
// time when the event happened (stored in UTC)
@Temporal(TemporalType.TIMESTAMP)
private Date eventTime;

// timezone offset in milliseconds
// so local millis are eventTime.getTime() + offset
@Basic
private int offset; 
```

看来在 JPQL 查询中[我不能使用](https://stackoverflow.com/questions/2856386/java-jpql-date-function-to-add-a-time-period-to-another-date)类似`WHERE eventTime + offset > :parameter`. 但是是否可以通过`eventTime`某种方式转换为 long 来解决？当然，也可以选择使用本机查询...

编辑：标准不支持它，OpenJPA 文档中也没有提到它，所以目前可能不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:51:07.043

您可能无法修改表，但您是否可以只添加另一列，即计算出的带有偏移量的时间戳？然后将所有查询都以此为基础？它也可能会产生更好的性能。

我解决此类问题的另一种方法是创建一个 SQL 视图并基于该视图创建一个不同的 @Entity。当我需要大量复杂的计算并且不希望代码本身具有所有这些复杂性时，我已经这样做了。当您有其他基于非 JPA 的应用程序想要获取相同的信息（例如报告引擎）时，这很有用。虽然此解决方案最终使用 SQL 视图，但它允许您的 Java/JPA 代码不必处理本机查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:59:02.467

我之前在类似情况下所做的是将 setter/getter 声明为私有或受保护，然后让 public @Transient getter 执行所需的计算。

这解决了所有程序问题。对于所需的 jpa sql，您需要在查询中执行适当的计算。

# android - 如何从android中的指定日期获取日期

> ID：14118894
> 
> 赞同：4
> 
> 时间：2013-01-02T08:26:01.317
> 
> 标签：android, date, dayofweek, weekday

假设我的日期是 02-01-2013

它存储在一个变量中，例如：

```
String strDate = "02-01-2013"; 
```

那么我应该如何获得这个日期的日期（即星期二）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T08:33:20.867

使用java api 中的[日历](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类。

```
Calendar calendar = new GregorianCalendar(2008, 01, 01); // Note that Month value is 0-based. e.g., 0 for January.
int reslut = calendar.get(Calendar.DAY_OF_WEEK);
switch (result) {
case Calendar.MONDAY:
    System.out.println("It's Monday !");
    break;
} 
```

您还可以使用[SimpleDateFormater](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)和[Date](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)来解析日期

```
Date date = new Date();
SimpleDateFormat date_format = new SimpleDateFormat("yyyy-MM-dd");
try {
    date = date_format.parse("2008-01-01");
} catch (ParseException e) {
    e.printStackTrace();
}

calendar.setTime(date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:40:22.913

首先拆分字符串

```
String[] out = strDate.split("-");
                    s1 = Integer.parseInt(out[0]);
                    s2 = Integer.parseInt(out[1]) - 1;
                    yr = out[2];
char a, b, c, d;
                    a = yr.charAt(0);
                    b = yr.charAt(1);
                    c = yr.charAt(2);
                    d = yr.charAt(3);
                    s3 = Character.getNumericValue(a)*1000 +
                         Character.getNumericValue(b)*100 +
                         Character.getNumericValue(c)*10 +
                         Character.getNumericValue(d); 
```

然后在那天创建一个日历实例

```
Calendar cal        = Calendar.getInstance();
cal.set(s3, s2, s1); 
```

然后得到一天

```
cal.get(Calendar.DAY_OF_WEEK); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:10:37.970

将此格式用于日期、日期和时间。

日期 dNow = new Date(); SimpleDateFormat ft = new SimpleDateFormat("E yyyy.MM.dd 'at' hh:mm:ss a zzz");

并使用格式方法将对象放在这里。ft.format(dNow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T17:33:08.837

我认为基于Android文档建议使用日历，

You need to be careful because the first day 1 is [Sunday](http://developer.android.com/reference/java/util/Calendar.html#SUNDAY) and the first month [January](http://developer.android.com/reference/java/util/Calendar.html#JANUARY) Also check that you can get DAY_OF_WEEK, DAY_OF_MONTH etc

# android - 创建视图的副本？

> ID：14118895
> 
> 赞同：6
> 
> 时间：2013-01-02T08:26:07.063
> 
> 标签：android, view, android-activity, viewgroup

我有 2 个活动：A，B. 活动 A 的布局，有一个用户更改其内容的视图组。在活动 B 中，我必须再次显示该视图组，没有任何更改，它必须是该视图组的真实副本，所以文本、颜色、尺寸、顺序（子项）和...必须相同。所以我不能使用`Layout Inflater`。是否可以不创建该视图组的子项类型的类并更改属性？因为如果我有超过 2 个具有不同视图组的活动，很难在上一个活动中显示每个活动的视图组。

我也不能从他们的父母那里删除这些视图组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T15:40:28.880

如果它们的内容相同，那么进行两种不同的活动就没有意义了。您可以动态更改一个活动的内容，其行为将与有两个活动相同。如果确实有必要，那么您将不得不保存所有需要的信息以再次重建活动并将其传递给新创建的活动。看看[这个](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T10:23:56.153

No easy way to do this. You cant move view's between activities. So you have several options:

*   create a bitmap of viewGroup and show in in new activity (doesn't work is you need editable copy)
*   save view's hierarchi state in old activity and recreate it in new one (using fragments makes it easier).
*   do not create new activity. Just change some UI parts in old one not touching target ViewGroup.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T07:34:52.573

创建一个包含视图组配置的类。让这个配置类保存与您的 ViewGroup 相关的所有信息。它将保存文本、颜色、订单尺寸以及用户更改的所有内容。将此类的对象从 Activity A 传递给 Activity B 并使用它，通过膨胀相同的布局来重现相同的视图。

希望有帮助。

为了回答您的问题，没有其他简单的方法可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T01:16:52.560

只是一个普遍的疑问？为什么要进行两个活动 为什么不使用分配给同一个视图的两个片段 使用底层活动来存储在一个片段（视图）中发生的所有更改，并且当用户传递到另一个视图时只需发送第二个片段的参数。因此，您正在向用户模拟它是两个活动，但实际上它只是由单个活动控制的两个片段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T18:02:19.907

对于需要共享的 ViewGroup，将其重构为一个名为 C 的 Fragment。然后为 Activity A 和 B 的部分减去该共享部分创建 Fragment。然后将所有这些片段包含在一个新的包含活动中（您将不再需要活动 A 和 B）。

Fragment A 和 C 将成为新的 Activity A。Fragment B 和 C 将成为新的 Activity B。要从第一个状态转换到第二个状态，请执行 FragmentTransaction 添加 Fragment B 并删除 Fragment A。记住将此事务添加到后退堆栈，因此后退按钮将带您回到第一个状态。

# android - 在android中使用sqlite插入时如何获取不同的数据？

> ID：14118897
> 
> 赞同：1
> 
> 时间：2013-01-02T08:26:10.580
> 
> 标签：android, sqlite

我在按钮的单击事件上创建数据库，当我在下一个触发选择查询时，`Activity`两个相同的记录显示在`ListView`. 看不懂怎么回事？？请给我建议。我有以下代码：

**ListActivity.java**

```
 package com.example.timerdemo2;

        import java.util.ArrayList;

        import android.R.menu;
        import android.os.Bundle;
        import android.provider.ContactsContract.CommonDataKinds.Phone;
        import android.annotation.SuppressLint;
        import android.app.Activity;
        import android.content.Intent;
        import android.database.Cursor;
        import android.database.sqlite.SQLiteDatabase;
        import android.view.ContextMenu;
        import android.view.Menu;
        import android.view.MenuInflater;
        import android.view.MenuItem;
        import android.view.View;
        import android.view.ContextMenu.ContextMenuInfo;
        import android.view.View.OnClickListener;
        import android.widget.AdapterView;
        import android.widget.ArrayAdapter;
        import android.widget.Button;
        import android.widget.ListView;
        import android.widget.Toast;
        import android.widget.AdapterView.AdapterContextMenuInfo;

        public class ListActivity extends Activity {
            ListView lv;
            ArrayList<String> items = new ArrayList<String>();
            ArrayList<String> items_id = new ArrayList<String>();
            dbhelper dh;
            SQLiteDatabase db;
            int index_id;
            Button btn;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_list);
                Button btn;
                btn = (Button)findViewById(R.id.newProjectlist);
                btn.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                            Intent intent= new Intent(ListActivity.this,NewProject.class);
                        startActivity(intent);
                    }
                });  
                lv = (ListView)findViewById(R.id.projectListView);
                setUpList();
                dh = new dbhelper(this);
                Cursor c = getAllData();
                showAllData(c);  
                registerForContextMenu(lv);      
            }

          @Override
            public void onCreateContextMenu(ContextMenu menu, View v,
                    ContextMenuInfo menuInfo) {
                // TODO Auto-generated method stub
                super.onCreateContextMenu(menu, v, menuInfo);

                if(v.getId() == R.id.projectList){
                    menu.setHeaderIcon(R.drawable.ic_launcher);
                    menu.setHeaderTitle("Record List");
                    menu.add(0,1,menu.NONE,"Delete Record");
                    menu.add(0,2,menu.NONE,"Show Record");
                }
            }

            @Override
        public boolean onContextItemSelected(MenuItem item) {
            // TODO Auto-generated method stub
                int itemId = item.getItemId();
                if(itemId == 1)
                {
                    AdapterView.AdapterContextMenuInfo menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
                    int poistion = menuinfo.position;
                    String id_string = items_id.get(poistion);
                    long id = Long.valueOf(id_string);

                    //menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
                    //index_id = menuinfo.position;
                    deleteUserData(index_id);
                    items_id.remove(poistion);
                }
                if(itemId == 2){
                    AdapterView.AdapterContextMenuInfo menuinfo;
                    menuinfo = (AdapterContextMenuInfo) item.getMenuInfo();
                    index_id = menuinfo.position;
                    editUserData(index_id);
                }
            return super.onContextItemSelected(item);
        }

            private void editUserData(int indexid) {
                // TODO Auto-generated method stub
                String user_id = items_id.get(indexid);
                Intent intEdit = new Intent(ListActivity.this, MainActivity.class);
                intEdit.putExtra("EditID", user_id);
                startActivityForResult(intEdit, 1);
            }

            private void deleteUserData(int indexid) {
                // TODO Auto-generated method stub
        //      String user_id = items_id.get(indexid);
                //Toast.makeText(getApplicationContext(), "id " + user_id, 1).show();
                db = dh.getWritableDatabase();
                db.delete("timer","_ID" + "=" + indexid, null);
                finish();
        //      Toast.makeText(getApplicationContext(), "Record deleted successfully", 1).show();
            }

            private void showAllData(Cursor c) {
                // TODO Auto-generated method stub
                while(c.moveToNext())
                {
                    int id = c.getInt(0);
                    String name = c.getString(1);
                    String timerpoint1 = c.getString(2);
                    String timerpoint2 = c.getString(3);
                    String timerpoint3 = c.getString(4);
                    String servicetime1 = c.getString(5);
                    String servicetime2 = c.getString(6);
                    items.add("" + name);
                    items_id.add(""+id);
                }
                setUpList();
            }

            private Cursor getAllData() {
                // TODO Auto-generated method stub
                db = dh.getReadableDatabase();
                //String sortorder = dh.Name + "DESC";
            //  String query ="SELECT DISTINCT name FROM timer";
            //  Cursor c = db.rawQuery(query, null);
            //   if (c != null) {
            //            c.moveToFirst();
            //        }
        //      String[] cols = new String[] {dh.Name, "name"};
                Cursor c = db.query(true, "timer",null,null,null,null,null,null, null);   
                //Cursor cur = db.query(Distinct,"timer", null, null, null, null, null, null, null);
                startManagingCursor(c);
                return c;   
                }
            private void setUpList() {
                // TODO Auto-generated method stub
                lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,items));
            }   

            } 
```

当显示记录时，`ListView`两个条目就完成了。我想让记录与众不同。所以提供帮助。

**日志猫**

```
01-01 18:42:49.941: W/dalvikvm(12683): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-01 18:42:49.951: E/AndroidRuntime(12683): FATAL EXCEPTION: main
01-01 18:42:49.951: E/AndroidRuntime(12683): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.timerdemo2/com.example.timerdemo2.ListActivity}: java.lang.IllegalStateException: get field slot from row 0 col 2 failed
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.os.Looper.loop(Looper.java:130)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread.main(ActivityThread.java:3683)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at java.lang.reflect.Method.invokeNative(Native Method)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at java.lang.reflect.Method.invoke(Method.java:507)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at dalvik.system.NativeStart.main(Native Method)
01-01 18:42:49.951: E/AndroidRuntime(12683): Caused by: java.lang.IllegalStateException: get field slot from row 0 col 2 failed
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.database.CursorWindow.getString_native(Native Method)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.database.CursorWindow.getString(CursorWindow.java:329)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at com.example.timerdemo2.ListActivity.showAllData(ListActivity.java:123)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at com.example.timerdemo2.ListActivity.onCreate(ListActivity.java:56)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-01 18:42:49.951: E/AndroidRuntime(12683):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-01 18:42:49.951: E/AndroidRuntime(12683):    ... 11 more
01-01 18:42:52.430: D/dalvikvm(12758): GC_EXTERNAL_ALLOC freed 53K, 50% free 2739K/5379K, external 716K/1038K, paused 112ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:03:13.930

将此方法放在您的 dbhelper 类中。

```
public Cursor get_dist(){
 SQLiteDatabase db = this.getReadableDatabase();
 String Distinct_Query="select distinct name from timer;";
 Cursor cursor=db.rawQuery(Distinct_Query,null);
 db.close();
 return cursor;
} 
```

这将返回具有不同记录的游标

然后将此代码添加到您的活动中

```
 dbhelper dh=new  dbhelper(this);
     Cursor c=dh.get_dist(); 
```

现在从游标 c 中检索记录。

# c# - 如何从 XElement 对象访问子元素？

> ID：14118901
> 
> 赞同：0
> 
> 时间：2013-01-02T08:26:19.357
> 
> 标签：c#, xml, linq-to-xml

我有一个 XElement 对象（**元素**），其中包含以下元素（**g**）：

```
<g .....>
 <flowRoot id='1'></flowRoot>
 <path id='2'></path>
  ..  
  ...
</g> 
```

现在我想替换 g 元素的 flowRoot 元素。为此，我尝试了：

```
element
    .Descendants()
    .Single(g => g.Attribute("id").Value == '1')
    .ReplaceAll(newElement); 
```

它给了我一个例外`object reference not set to an instance of an object`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:54:03.677

当我按照您的设置进行编码时：

```
XElement element = new XElement("g"
    , new XElement("flowRoot", new XAttribute("id", "1"))
    , new XElement("path", new XAttribute("id", "2"))
    );

XElement newElement = new XElement("flowRoot", new XAttribute("id", "678678"));

element.Descendants().Single(g => g.Attribute("id").Value == "1").ReplaceAll(newElement); 
```

一切正常。我确实必须用 1 周围的双引号替换单引号，因为它不会编译（正如@ryadavilli 已经指出的那样）

我的猜测是您的“元素”与您认为的不同，也许“g”节点不是实际的根？当您像这样测试“flowRoot”元素时会得到什么：

```
XElement flowRoot = element.Descendants("flowRoot").FirstOrDefault(); 
```

是否为`flowRoot`空？

# hadoop - Hadoop 上的 MRJob 和 mapreduce 任务分区

> ID：14118908
> 
> 赞同：2
> 
> 时间：2013-01-02T08:26:49.417
> 
> 标签：hadoop, mapreduce, mrjob

我正在尝试使用 Python MRJob lib 执行 mapreduce 作业，但在让它正确分布在我的 Hadoop 集群中时遇到了一些问题。我相信我只是错过了 mapreduce 的基本原则。我的集群是一个小型的，一主一从的测试集群。基本思想是我只是请求一系列带有参数的网页，对它们进行一些分析并返回网页上的一些属性。

我的 map 函数的输入只是一个带有以下参数的 URL 列表：

```
http://guelph.backpage.com/automotive/?layout=bla&keyword=towing
http://guelph.backpage.com/whatever/?p=blah
http://semanticreference.com/search.html?go=Search&q=red
http://copiahcounty.wlbt.com/h/events?ename=drupaleventsxmlapi&s=rrr
http://sweetrococo.livejournal.com/34076.html?mode=ffff 
```

这样初始输入的键值对就是 key:None, val:URL。

以下是我的地图功能：

```
def mapper(self, key, url):
'''Yield domain as the key, and (url, query parameter) tuple as the value'''

parsed_url = urlparse(url)
domain = parsed_url.scheme + "://" + parsed_url.netloc + "/"

if self.myclass.check_if_param(parsed_url):

    parsed_url_query = parsed_url.query
    url_q_dic = parse_qs(parsed_url_query)

    for query_param, query_val in url_q_dic.iteritems():

        #yielding a tuple in mrjob will yield a list
        yield domain, (url, query_param) 
```

很简单，我只是检查以确保 URL 有一个参数并将 URL 的域作为键和一个元组给我 URL 和查询参数作为值，MRJob 友好地将其转换为一个列表以传递给减速器，它如下：

```
def reducer(self, domain, url_query_params):

    final_list = []
    for url_query_param in url_query_params:

        url_to_list_props = url_query_param[0]
        param_to_list_props = url_query_param[1]

        #set our target that we will request and do some analysis on
        self.myclass.set_target(url_to_list_props, param_to_list_props)

        #perform a bunch of requests and do analysis on the URL requested
        props_list = self.myclass.get_props()

        for prop in props_list:

            final_list.append(prop)

    #index this stuff to a central db
    MapReduceIndexer(domain, final_list).add_prop_info()

    yield domain, final_list 
```

我的问题是只运行一个减速器任务。我希望 reducer 任务的数量等于映射器发出的唯一键的数量。上面代码的最终结果是我有一个在master上运行的reducer，但是slave闲着什么也不做，这显然不理想。我注意到在我的输出中启动了一些映射器任务，但始终只有 1 个减速器任务。除此之外，任务运行顺利，所有工作都按预期进行。

我的问题是……我到底做错了什么？我是否误解了 reduce 步骤或在某处搞砸了我的键值对？为什么没有多个减速器在这个工作上运行？

更新：好的，所以从给出的答案中我将 mapred.reduce.tasks 增加到更高（这是我现在意识到的默认值是 1）。这确实是我得到 1 个减速器的原因。我现在看到同时执行 3 个 reduce 任务。我的奴隶现在有一个需要解决的导入错误，但至少我到了某个地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:38:50.883

reducer 的数量与输入数据的形式完全无关。对于 MRJob，您似乎需要[引导选项](http://packages.python.org/mrjob/writing-and-running.html#bootstrap-time-configuration)

# c# - 将变量发送到其他类

> ID：14118910
> 
> 赞同：0
> 
> 时间：2013-01-02T08:27:05.147
> 
> 标签：c#

我可以有一个功能来检查真假并将我的语言发送给其他班级吗？

我试过了：

```
public class Func
{
    public static bool CheckDate(string number)
    {
        string new_number = number.ToString();
        if (new_number.Length==8)
        {
           string yyyy = new_number.Substring(0, 4);
           string mm = new_number.Substring(4, 2);
           string dd = new_number.Substring(6, 2);
           return true;
        }
        else
        {
            return false;
        }
    }
} 
```

我想将口头`yyyy`, `mm`,发送`dd`到我的`Program.cs`班级。

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T08:30:53.943

不要重新发明轮子，使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)专门为此目的构建的方法。在 .NET 框架中处理日期时，请忘记正则表达式和子字符串：

```
public static bool CheckDate(string number, out DateTime date)
{
    return DateTime.TryParseExact(number, "dd/MM/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out date);
} 
```

现在正如您所见，定义`CheckDate`变得有点意义，因为它已经存在于 BCL 中。您只需像这样使用它：

```
string number = "that's your number coming from somewhere which should be a date";
DateTime date;
if (DateTime.TryParseExact(
    number, 
    "dd/MM/yyyy", 
    CultureInfo.InvariantCulture, 
    DateTimeStyles.None, 
    out date
))
{
    // the number was in the correct format 
    // => you could use the days, months, from the date variable which is now a DateTime

    string dd = date.Day.ToString();
    string mm = date.Month.ToString();
    string yyyy = date.Year.ToString();
    // do whatever you intended to do with those 3 variables before
}
else
{
    // tell the user to enter a correct date in the format dd/MM/yyyy
} 
```

* * *

更新：

由于我在评论部分收到一条评论说我实际上并没有回答这个问题，因此您可以使用与我推荐的方法类似的方法。但是，请向我保证，你**永远不会写这样的代码**，这只是为了说明 TryXXX 模式。

定义模型：

```
public class Patterns
{
    public string DD { get; set; }
    public string MM { get; set; }
    public string YYYY { get; set; }
} 
```

然后修改您的 CheckDate 方法，使其发送一个 out 参数：

```
public static bool CheckDate(string number, out Patterns patterns)
{
    patterns = null;
    string new_number = number.ToString();
    if (new_number.Length == 8)
    {
       Patterns = new Patterns
       {
           YYYY = new_number.Substring(0, 4),
           MM = new_number.Substring(4, 2),
           DD = new_number.Substring(6, 2)
       }
       return true;
    }
    else
    {
        return false;
    }
} 
```

你可以这样使用：

```
string number = "that's your number coming from somewhere which should be a date";
Patterns patterns;
if (CheckDate(numbers, out patterns)
{
    string dd = patterns.DD;
    string mm = patterns.MM;
    string yyyy = patterns.YYYY;
    // do whatever you intended to do with those 3 variables before
}
else
{
    // tell the user to enter a correct date in the format dd/MM/yyyy
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:31:14.787

该`CheckDate`函数的目的是检查日期是否有效。不要引入糟糕的副作用：编写另一个函数，将你的东西实际发送到你想要的对象。

如果要检查字符串是否为日期，请在`CheckDate`.

当您知道字符串是日期时，通过这样的函数从中提取您想要的日期元素`ExtractDateElem`，但请不要有副作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T08:34:39.510

你必须声明你的变量如下......

```
 public static  string yyyy;
 public static  string mm ;
 public static  string dd ; 
```

或者

```
 protected static  string yyyy;
 protected static  string mm ;
 protected static  string dd ; 
```

根据您的需要并取决于您的**program.cs**文件在哪里...

# apache - htaccess 301 重定向产生具有复杂 URL 的内部服务器错误

> ID：14118914
> 
> 赞同：0
> 
> 时间：2013-01-02T08:27:24.533
> 
> 标签：apache, .htaccess, redirect

我正在尝试执行以下重定向：

```
Redirect 301 "/cgi-bin/teemz/teemz.cgi?board=_master&action=opentopic&topic=4&forum=The_Forum" "/content/1998-09-10/1004/wet-h2s---hic-concern---ae-amp" 
```

这会导致内部服务器错误。你们能看出这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:37:32.200

基本上你有一些非法字符，例如“/

您需要对每个参数的值进行编码。我不知道你怎么能用你正在使用的编程语言来做到这一点，但在 ASP.NET MVC 中，我们有相应的库。

```
 public ActionResult Index2()
    {
        var sb = new StringBuilder();
        foreach (var key in Request.QueryString.AllKeys)
            sb.AppendFormat("&{0}={1}", key, HttpUtility.UrlEncode(Request.QueryString[key]));
        var parameters = sb.Remove(0, 1);
        const string rawurl = "http://localhost:49534/home?";
        var url = string.Format("{0}{1}", rawurl, sb);
        return Redirect(url);
    } 
```

编码后的参数将变为

board=_master&action=opentopic&topic=4&forum=The_Forum%22+%22%2fcontent%2f1998-09-10%2f1004%2fwet-h2s---hic-concern---ae-amp

但是你的浏览器地址栏会保留参数

"?board=_master&action=opentopic&topic=4&forum=The_Forum"+"%2fcontent%2f1998-09-10%2f1004%2fwet-h2s---hic-concern---ae-amp"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:42:06.137

请记住 RewriteRule：

*   与前导斜杠不匹配
*   不匹配查询字符串

请改用此重写规则：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+cgi-bin/teemz/teemz\.cgi\?board=_master&action=opentopic&topic=4&forum=The_Fo‌​rum [NC]
RewriteRule ^ /content/1998-09-10/1004/wet-h2s---hic-concern---ae-amp [L,R=301] 
```

# windows - 在 Haskell 中，waitForProcess 在 Windows 的 cmd.exe 下阻止了 Ctrl-C

> ID：14118917
> 
> 赞同：2
> 
> 时间：2013-01-02T08:27:35.923
> 
> 标签：windows, haskell, interrupt-handling

我尝试在 Windows 的 cmd.exe 中运行以下 Haskell 程序，而 waitForProcess 正在执行，按 ctrl-c 不会杀死程序。但如果在 MinGW shell 下运行，它就可以工作。有任何想法吗？（注意：Windows 没有“睡眠”命令，我自己写了一个。）

```
{-# Language OverloadedStrings #-}
import System.Process

main ∷ IO ()
main = do
  putStrLn "sleeping"
  (_, _, _, pHandle) <-
    createProcess CreateProcess { 
          cmdspec = RawCommand "sleep" ["5"]
        , cwd = Nothing
        , env = Nothing
        , std_in = CreatePipe, std_out = CreatePipe, std_err = CreatePipe
        , close_fds = False
        , create_group = False
        } 
  waitForProcess pHandle
  putStrLn "all done" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T10:07:40.423

```
module Main where

import System.Process

main = do callCommand "sleep 5"
       putStrLn "all done" 
```

cmd.exe 的 sleep 可以正常运行上面的代码！Ctrl+C 也终止！[在Hackage](https://hackage.haskell.org/package/process-1.2.0.0/docs/System-Process.html#g:2)中记录了用于常见任务的更简单的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:55:52.757

看来这是 mingw 和 cygwin 如何处理控制台的问题：

[http://www.mail-archive.com/cygwin@cygwin.com/msg104921.html](http://www.mail-archive.com/cygwin@cygwin.com/msg104921.html) [http://comments.gmane.org/gmane.os.cygwin/135374](http://comments.gmane.org/gmane.os.cygwin/135374)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:37:26.627

系统调度程序在等待内核对象的事件时没有为线程腾出一些时间。
解决方案是从与主线程不同的另一个线程调用 waitForProcess。

# android - Android 访问 CustomObject 的原始 json

> ID：14118923
> 
> 赞同：1
> 
> 时间：2013-01-02T08:27:50.640
> 
> 标签：android, json, quickblox

我在 Quickblox 控制台中创建了一个自定义对象，我可以检索这些对象，但现在需要访问原始 JSON 对象。

我可以通过字段手动迭代重建对象，并希望我可以直接引用原始 JSON，从而节省大型数据集的处理时间和功率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:42:43.417

每个结果都有**result.getRawBody()** 方法，希望对您有所帮助

# macos - 在 Cocoa 中创建 PDF

> ID：14118933
> 
> 赞同：1
> 
> 时间：2013-01-02T08:28:51.327
> 
> 标签：macos, cocoa

这里有下面的代码，但我能够进入`PDF`。但我不能进入`created``write``PDF``render NSView``PDF`

```
CGContextRef aCgPDFContextRef = [self createPDFContext:CGRectMake(0, 0, 612, 892) path:(CFStringRef)filepath];

CGContextBeginPage(aCgPDFContextRef,nil);

//Draw view into PDF
NSView *aPageNote=[[NSView alloc]initWithFrame:CGRectMake(0,0, 612, 892)];

CGAffineTransform aCgAffTrans = CGAffineTransformIdentity;
aCgAffTrans = CGAffineTransformMakeTranslation(0,892);
aCgAffTrans = CGAffineTransformScale(aCgAffTrans, 1.0, -1.0);
CGContextConcatCTM(aCgPDFContextRef, aCgAffTrans);

NSString *strText = @"Test 123333333333333333";
[strText drawAtPoint:NSMakePoint(100, 200) withAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[NSFont systemFontOfSize:40.0],NSFontAttributeName,nil]];//drawAtPoint:CGPointMake(200, 300) withFont:[NSFont systemFontOfSize:20]];

[aPageNote setWantsLayer:YES];
[aPageNote.layer renderInContext:aCgPDFContextRef];
CGContextEndPage(aCgPDFContextRef);

CGContextRelease (aCgPDFContextRef);
NSLog(@"Pdf Successfully Created"); 
```

方法 ：

```
-(CGContextRef) createPDFContext:(CGRect)aCgRectinMediaBox path:(CFStringRef) aCfStrPath
{
 CGContextRef aCgContextRefNewPDF = NULL;
 CFURLRef aCfurlRefPDF;
 aCfurlRefPDF = CFURLCreateWithFileSystemPath (NULL,aCfStrPath,kCFURLPOSIXPathStyle,false);
 if (aCfurlRefPDF != NULL) {
    aCgContextRefNewPDF = CGPDFContextCreateWithURL (aCfurlRefPDF,&aCgRectinMediaBox,NULL);
    CFRelease(aCfurlRefPDF);
 }
 return aCgContextRefNewPDF;
} 
```

**编辑**：我能够`write`使用`PDF`此代码

```
 CGContextBeginPage(aCgPDFContextRef,nil);
NSString *strText1 = @"I am iOS Developer";
CGContextSelectFont (aCgPDFContextRef, "Helvetica", 24, kCGEncodingMacRoman);
CGContextSetTextDrawingMode (aCgPDFContextRef, kCGTextFill);
CGContextSetRGBFillColor (aCgPDFContextRef, 0, 0, 0, 1);
const char *text1 = [strText1 UTF8String];
CGContextShowTextAtPoint (aCgPDFContextRef, 50, 375, text1, strlen(text1));
CGContextEndPage(aCgPDFContextRef); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:14:43.477

**编辑**：`Render`NSView 并`PDF`像这样添加图像：

```
//Firstly render NS element into NSImage
NSImage *i = [[NSImage alloc] initWithData:[yourView dataWithPDFInsideRect:[yourView bounds]]];
//Now u can add in PDF
CGImageSourceRef source = CGImageSourceCreateWithData((CFDataRef)[i TIFFRepresentation], NULL);
CGImageRef imageRef =  CGImageSourceCreateImageAtIndex(source, 0, NULL);
CGContextDrawImage(aCgPDFContextRef,[yourView bounds], imageRef); 
```

# java - 单词的匹配变体（拼写错误，leetspeak）

> ID：14118936
> 
> 赞同：3
> 
> 时间：2013-01-02T08:29:17.570
> 
> 标签：java, pattern-matching

我需要一个库来匹配单词，给定阈值，拼写错误或其他单词的变体，例如`Antoine`匹配：

```
4ntoine
4toine
antoine
4t01n3
titoine
entoine
a n t o i n e 
```

等我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:49:16.913

您也可以按照建议尝试 Levenstein 或 trigram；[http://en.m.wikipedia.org/wiki/Trigram_search](http://en.m.wikipedia.org/wiki/Trigram_search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:12:39.900

您可以尝试使用[Jazzy](http://jazzy.sourceforge.net/)。这最初是由 IBM 开发的，然后似乎没有太多维护。

我不知道今天的状态是什么，但我们成功地用它来做一些接近你想要实现的事情。不过，不确定您是否可以处理 l33t 。

还要检查[这个链接](http://www.ibm.com/developerworks/java/library/j-jazzy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T09:12:52.707

Levenstein 距离可能会有所帮助，但可以首先应用一些启发式规则 AMHO。

请体验以下程序：

```
public class LevenshteinDistance
{
   public static int computeDistance( String s1, String s2 )
   {
      s1 = s1.toLowerCase();
      s2 = s2.toLowerCase();
      int[] costs = new int[s2.length() + 1];
      for( int i = 0; i <= s1.length(); i++ )
      {
         int lastValue = i;
         for( int j = 0; j <= s2.length(); j++ )
         {
            if( i == 0 ) {
               costs[ j ] = j;
            }
            else
            {
               if( j > 0 )
               {
                  int newValue = costs[ j - 1 ];
                  if( s1.charAt( i - 1 ) != s2.charAt( j - 1 ) ) {
                     newValue =
                        Math.min(
                           Math.min( newValue, lastValue ),
                           costs[ j ] ) + 1;
                  }
                  costs[ j - 1 ] = lastValue;
                  lastValue = newValue;
               }
            }
         }
         if( i > 0 ) {
            costs[ s2.length() ] = lastValue;
         }
      }
      return costs[ s2.length() ];
   }

   public static void main(String[] args) {
      String ref = "Antoine";
      String[] samples = {
         "4ntoine", "4ntoine", "antoine", "4nt01n3", "titoine", "entoine",
         "a n t o i n e" };
      for( String sample : samples ) {
         System.out.printf( "| %s | %-20s | %4d |\n",
            ref, sample, computeDistance( ref, sample ));
      }
   }
} 
```

结果：

```
| Antoine | 4ntoine              |    1 |
| Antoine | 4ntoine              |    1 |
| Antoine | antoine              |    0 |
| Antoine | 4nt01n3              |    4 |
| Antoine | titoine              |    2 |
| Antoine | entoine              |    1 |
| Antoine | a n t o i n e        |    6 | 
```

如您所见，应预处理最后一个单词以删除空格，并应预处理第四个单词以将 3 替换为 E 并将 4 替换为 A。

# java - 在android中使用标签栏创建gridview

> ID：14118938
> 
> 赞同：1
> 
> 时间：2013-01-02T08:29:31.167
> 
> 标签：java, android, gridview, tabbar

我开发了一个带有底部标签栏的 android 应用程序 gridview。

在这里，我编写了如下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:id="@+id/Layout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <TextView
    android:id="@+id/status"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:text="Mercuryminds Shoppingcart Application"

    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#040404"
    android:gravity="center" />

<GridView
    android:layout_height="0dp"
    android:id="@+id/gridView1"
    android:layout_width="match_parent"
    android:numColumns="auto_fit"
    android:layout_weight="1"

    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp">
</GridView>

     <include        
 android:id="@+id/footer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/footer" />

     </LinearLayout> 
```

footer.xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffffff"
xmlns:android="http://schemas.android.com/apk/res/android">

<LinearLayout
    android:layout_width="fill_parent"
    android:id="@+id/linearLayout1"
    android:background="#ffffffff"

     android:layout_height="fill_parent"
    android:orientation="vertical">
 <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/textView1"
        android:textColor="#465371"
        android:gravity="center"
        android:textSize="13sp"

        android:textStyle="bold">
    </TextView>
    <TabWidget
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/tabs"
        android:tabStripEnabled="false"
        android:textColor="@drawable/tab_text_selector"
        android:background="@drawable/tabicon" >
    </TabWidget>

    <FrameLayout
         android:background="#ffffffff"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@android:id/tabcontent">
    </FrameLayout>
</LinearLayout>
</TabHost> 
```

这是我的主要活动 android 代码（仅 Gridview）：

```
 public class MainActivity extends Activity {
    static final String URL = "http://xxxxx";

         static String KEY_CATEGORY = "category";

          static final String KEY_TITLE = "categoryName";
         static final String KEY_THUMB_URL = "categoryImage";
         static final String KEY_SUBCATE = "categoryId";
 GridView lview3;
 LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>   ();
            Element e = (Element) nl.item(i);
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_SUBCATE, parser.getValue(e, KEY_SUBCATE));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
            songsList.add(map);
        }
    lview3 = (GridView) findViewById(R.id.gridView1);
    adapter = new LazyAdapter(this, songsList);
    lview3.setAdapter(adapter);

    lview3.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);
            Intent in = new Intent(
                    MainActivity.this,
                    com.ssmobileproductions.catalogue.SubCate.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_SUBCATE, map.get(KEY_SUBCATE));

            startActivity(in);
        }  

     });

    }

      } 
```

我如何在这些应用程序中使用标签栏开发 gridview。请给我解决方案。

我怎样才能显示像这些图像。

[样本布局](http://dev.mercuryminds.com/iapps_xyz/iphone_display/home.html)

# php - 修剪PHP中字符串中整数之前的所有字符？

> ID：14118953
> 
> 赞同：1
> 
> 时间：2013-01-02T08:31:22.320
> 
> 标签：php, string, substr, strpos

我有一个字母数字字符串，例如，

`abc123bcd`, `bdfnd567`, `dfd89ds`.

我想在字符串中第一次出现任何整数之前修剪所有字符。

我的结果应该是这样的，

`abc`, `bdfnd`, `dfd`.

我正在考虑使用`substr`. 但不确定如何在第一次出现整数之前检查字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T08:34:28.403

[`preg_replace` *^(您可以使用[docs])*](http://php.net/manual/en/function.preg-replace.php)和正则表达式轻松删除不需要的字符：

```
$str = preg_replace('#\d.*$#', '', $str); 
```

`\d`匹配一个数字并`.*$`匹配任何字符，直到字符串的结尾。

了解更多关于正则表达式的信息：[http](http://www.regular-expressions.info/) ://www.regular-expressions.info/ 。

[**演示**](http://codepad.org/CXy8GkVJ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:37:19.963

一个可能的非正则表达式解决方案是：

*   [strcspn - 查找与掩码不匹配的初始段的长度](http://php.net/manual/en/function.strcspn.php)
*   [substr — 返回字符串的一部分](http://php.net/manual/en/function.substr.php)

例子：

```
$string = 'foo1bar';
echo substr($string, 0, strcspn($string, '1234567890')); // gives foo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T08:34:52.500

```
$string = 'abc123bcd';
preg_replace("/[0-9]/", "", $string); 
```

或者

```
trim($string, '0123456789'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:37:27.067

我相信你正在寻找这个？

```
$matches = array();
preg_match("/^[a-z]+/", "dfd89ds", $matches);
echo $matches[0]; // returns dfd 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T08:41:40.057

您可以为此使用正则表达式：

```
$string = 'abc123bcd';
preg_match('/^[a-zA-Z]*/i', $string, $matches);
var_dump($matches[0]); 
```

将产生：

```
abc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-01T07:41:07.743

要删除 +/- 符号，您可以简单地使用：

[绝对（$数字）](http://us2.php.net/abs)

并得到绝对值。

例如

```
$abs = abs($signed_integer); 
```

# wordpress - 将 Google plus 本地与 wordpress 集成

> ID：14118955
> 
> 赞同：0
> 
> 时间：2013-01-02T08:31:34.380
> 
> 标签：wordpress, google-plus

我目前正在开发一个提供有关当地酒店和餐厅信息的网站。我们决定集成一个提供评级和评论的外部系统。虽然 Google 加本地是一个很好的集成系统

例如：[https ://plus.google.com/112054268577917984776/about?hl=en](https://plus.google.com/112054268577917984776/about?hl=en)

问题是我们找不到提供 UI 作为上述链接的 WP 小部件。感谢有人可以解释实现这一目标的更好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:46:14.283

我认为您需要检查 Google Plus APIs 部分，因为它们仍然有限（真的不知道是否有任何插件可用于此功能）

很好的链接，我认为需要自己创建插件或自定义与您的要求有点相似的[地方](https://developers.google.com/places/documentation/)

如果符合您的要求，您还可以检查他们的[商业地图 API 。](https://developers.google.com/maps/documentation/business/)

# c# - 单元测试 Windows 8 应用商店应用 UI（Xaml 控件）

> ID：14118956
> 
> 赞同：8
> 
> 时间：2013-01-02T08:31:34.893
> 
> 标签：c#, testing, windows-8, windows-runtime, microsoft-metro

我一直在创建一个 Windows 应用商店应用程序，但我在测试创建网格的方法（这是一个 XAML 控件）时遇到线程问题。我尝试使用 NUnit 和 MSTest 进行测试。

测试方法是：

```
[TestMethod]
public void CreateThumbnail_EmptyLayout_ReturnsEmptyGrid()
{
    Layout l = new Layout();
    ThumbnailCreator creator = new ThumbnailCreator();
    Grid grid = creator.CreateThumbnail(l, 192, 120);

    int count = grid.Children.Count;
    Assert.AreEqual(count, 0);
} 
```

和 creator.CreateThumbnail （引发错误的方法）：

```
public Grid CreateThumbnail(Layout l, double totalWidth, double totalHeight)
{
     Grid newGrid = new Grid();
     newGrid.Width = totalWidth;
     newGrid.Height = totalHeight;

     SolidColorBrush backGroundBrush = new SolidColorBrush(BackgroundColor);
     newGrid.Background = backGroundBrush;

     newGrid.Tag = l;            
     return newGrid;
} 
```

当我运行这个测试时，它会抛出这个错误：

```
System.Exception: The application called an interface that was marshalled for a different thread. (Exception from HRESULT: 0x8001010E (RPC_E_WRONG_THREAD)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T15:35:41.037

您的控件相关代码需要在 UI 线程上运行。尝试：

```
[TestMethod]
async public Task CreateThumbnail_EmptyLayout_ReturnsEmptyGrid()
{
    int count = 0;
    await ExecuteOnUIThread(() =>
    {
        Layout l = new Layout();
        ThumbnailCreator creator = new ThumbnailCreator();
        Grid grid = creator.CreateThumbnail(l, 192, 120);
        count = grid.Children.Count;
    });

    Assert.AreEqual(count, 0);
}

public static IAsyncAction ExecuteOnUIThread(Windows.UI.Core.DispatchedHandler action)
{
    return Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, action);
} 
```

以上应该适用于MS Test。我不知道NUnit。

# vb.net - 将项目添加到列表时的快捷方式

> ID：14118959
> 
> 赞同：0
> 
> 时间：2013-01-02T08:31:48.200
> 
> 标签：vb.net, list

在某些语言中，将项目添加到集合中时会有捷径。

我有以下内容：

```
Sub Main()

    Dim letters As List(Of String)
    letters = New List(Of String)

    letters.Add("a")
    letters.Add("1")
    letters.Add("2")
    letters.Add("3")
    letters.Add("x")
    letters.Add("d")

End Sub 
```

是否有执行此操作的简便方法。以下不起作用，但可能有一些类似的语法`VB.NET`：

```
Sub Main()

    Dim letters As List(Of String)
    letters = New List(Of String){"a","1","2","3","x","d"}

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:37:31.293

从 VS2010 开始，您应该能够在 VB.NET 中执行此操作：

```
 Dim letters As List(Of String)
 letters = New List(Of String) From {"a","1","2","3","x","d"} 
```

`From`可以换成括号：

```
 letters = New List(Of String) ({"a","1","2","3","x","d"}) 
```

不错的相关文章：[**MSDN HERE**](http://msdn.microsoft.com/en-us/library/dd293617.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T08:49:07.213

您可以使用字符串数组（在我的示例中为 input()）。另一种选择是将字符串列表传递给构造函数或使用[List.AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc%28v=vs.80%29.aspx)。

```
 Dim input() As String = { "A", _
                              "B", _
                              "C" }

    Dim listA As New List(Of String)(input)

    dim listB as New List(Of String)
    listB.AddRange(input) 
```

HTH韦德

# jboss - 如何在 jboss 7 中配置两个 https 连接器端口？

> ID：14118967
> 
> 赞同：2
> 
> 时间：2013-01-02T08:32:49.460
> 
> 标签：jboss, jboss7.x

我需要在 jboss 7 中配置 2 个 https 端口（5480 和 8443）（我做了这个 jboss 5 添加了一个连接器端口）。我尝试在 Standalone-full.xml 中创建两个 https 连接器端口，但它不起作用。

以下是我当前对 8443 https 端口的配置，我还需要另一个端口 5480。

```
<subsystem xmlns="urn:jboss:domain:web:1.2" default-virtual-server="default-host" native="false">

<connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">

<ssl key-alias="tomcat" password="FOO@Bar-1" certificate-key-file="${jboss.server.config.dir}/keystore" cipher-suite="TLS_DHE_RSA_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,SSL_RSA_WITH_RC4_128_MD5" protocol="TLS" verify-client="false"/>

        </ connector >

</subsystem> 
```

* * *

```
<socket-binding name="https" port="8443"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-14T10:52:14.860

除非您更改了某些配置，否则您的独立 jboss 容器会从standalone.xml 而非standalone-full.xml 中读取配置。“完整”版本就像一个示例文件。

# java - 将数据从数据库写入文件时保留换行符

> ID：14118968
> 
> 赞同：0
> 
> 时间：2013-01-02T08:32:50.127
> 
> 标签：java, jsp, textarea, line-breaks

当用户单击保存按钮时，我有一个带有文本区域的 JSP 页面，它将文本区域中的数据保存到数据库中。与来自文本区域的数据对应的 DB 字段是 Clob 。我需要通过保留换行符将此数据写入文件（在将 clob 转换为字符串之后）。但是当我将 Clob 转换为 String 时，缺少换行符

我可以在将 clob 数据转换为字符串时保留换行符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:58:27.987

我假设您想在 JSP 页面上输出您的文本。因此，您必须将其转换为 HTML。

将所有换行符替换为[`<br>`](http://www.w3schools.com/tags/tag_br.asp).

```
String html = text.replace("\n", "<br>\n"); 
```

此外，您应该将文本中的特殊字符转义为 HTML 实体。[`StringEscapeUtils#escapeHtml4()`](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#escapeHtml4%28java.lang.String%29)从 Commons-Lang 库中使用。

# ios5 - 使用cocoapods的restkit项目集成错误

> ID：14118969
> 
> 赞同：1
> 
> 时间：2013-01-02T08:32:50.537
> 
> 标签：ios5, restkit, cocoapods

我在 ios 应用程序中将 Restkit 用于 web 服务客户端。我使用 cocoapods 在我的示例项目中安装了 restkit。但它给出了语义问题，并在我构建时解析错误。

我使用此链接使用 cocoapods 安装 Restkit

[https://github.com/RestKit/RestKit/wiki/Installing-restkit-v0.20.x-via-cocoapods](https://github.com/RestKit/RestKit/wiki/Installing-restkit-v0.20.x-via-cocoapods)

错误是这样的

```
/RKHTTPUtilities.m:69:40: error: unexpected '@' in program
        statusCodesToNamesDictionary = @{

/ObjectMapping/RKHTTPUtilities.m: error: unexpected '@' in program
    return [RKStatusCodesToNamesDictionary() objectForKey:@(statusCode)];
                                                          ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:01:54.540

看起来您正在使用不支持[object literals](http://blog.bignerdranch.com/398-objective-c-literals-part-1/)的旧版本 Xcode 进行编译。你可以通过更新 Xcode 或在你的 podfile 中使用旧版本的 restkit 来解决这个问题，比如`pod "restkit", "~>0.10.3"`.

# android - android webview 应用程序和播放声音

> ID：14118974
> 
> 赞同：0
> 
> 时间：2013-01-02T08:33:22.210
> 
> 标签：android, jquery-mobile

嗨，我想构建一个 android webview 应用程序，当用户解决难题时播放声音。出于某种原因，我无法让 phonegap 媒体 api 工作。

这里的代码：

```
function CheckFinished(){
        if(v1==1 && v2==1 && v3==1 && v4==1 && v5==1 && v==1){
                //alert('Done');
                playAudio();
                v=parseInt(0);}}

 function playAudio() {
    var myMedia = null;

    myMedia = new Media("/res/win.mp3", 
    function(){
        if (myMedia) {
            myMedia.stop();
            myMedia.release();
        }
    }, 
    function(error){
        console.log(error.message);
    }
);
    myMedia.play();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:31:11.223

尝试使用**webchromeclient**而不是**默认客户端**。

我现在没有确切的链接可以在这里分享。但是，在 android 开发者网站的某个地方，有人提到您使用 webchromeclient 来处理媒体文件。

希望这会帮助你。

# arrays - 在Lua中将数组作为函数参数传递？

> ID：14118976
> 
> 赞同：5
> 
> 时间：2013-01-02T08:33:23.580
> 
> 标签：arrays, class, function, parameters, lua

我正在尝试更改我在[此视频](http://www.youtube.com/watch?v=yL9oOHIvKZc)中找到的类示例，以使其更易于使用。希望我的评论能够很好地解释我正在努力完成的工作。我遇到的问题是，当我尝试使用数据表时，它给了我这个错误： lua: class example.lua:7: attempt to index field 'data' (a nil value)

我假设这意味着数组没有正确传递给函数，但我不知道为什么。我是 Lua 的初学者。

这是我所拥有的：

```
local enemy = {}; --enemy class table

function enemy:New(data)
  local object = {}; --table to store all of data within class
  local len = # data --get length of passed table
  for i = 1, len, 2 do --loop to input all data from passed table into object table
    object.data[i] = data[i + 1];
  end

  function object:getData(choice) --function that allows us to retrieve data from the class
    return self[choice];
  end

  return object; --return class data table so we can create objects using the class
end

local monsterdata = {"name", "monster", "x", 64, "y", 128, "hp", 4}; --table containing data of monster. keys are odd numbered, values to those keys are even numbered
local monster = enemy:New(monsterdata); --create a object using the class

local test = monster:getData("x"); --set variable to a value with the getData function

print(test); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T08:46:23.410

您没有创建`object.data`表——Lua 中的每个表都需要初始化：

```
local object = {}
local object.data = {} 
```

或者

```
local object = { data = {} } 
```

但是，除非您修复 getData 函数，否则您的示例将无法按预期方式工作：

```
function object:getData(choice) 
  return self.data[choice]
end 
```

最后，这是 Lua，因此您的代码中不需要任何内容`;`​​：P。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T15:38:05.927

如果你想`object`保存数据，你可能打算写

```
object[data[i]] = data[i + 1]; 
```

代替

```
object.data[i] = data[i + 1]; 
```

这样做打印的结果是`64`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T20:31:52.803

就像其他人说的那样，`object.data`需要初始化，并且`for`循环和`getData`. 此外，虽然这不是一个错误，但您将键作为奇数传递并将值作为偶数传递的系统是在基于 C 的语言中执行此操作的一种非常好的方法，没有关联数组/字典/表文字，但是在 Lua 中，成语是

`{keyname = value, keyname = value, ...}`

并且，如果表格跨越多行

```
{
    keyname = value;
    keyname = value;
    keyname = value;
    ...
} 
```

所以在你的情况下，`monsterdata`可能只是

```
{
    name = "monster";
    x = 64;
    y = 128;
    hp = 4;
} 
```

你可以完全删除`for`循环

注意：您只能以这种方式表示字符串键。对于其他类型的键，例如数字、布尔值，甚至函数和其他表，请将键括在`[`方括号`]`中。例如，如果您想要一个`mynot`表格，将布尔值映射到它们的对立面，您可以使用：

```
{
    [true] = false;
    [false] = true;
} 
```

或者，如果您想将一组函数映射到它们的库

```
{
    [print] = "standard";
    [os.execute] = "standard os";
    [math.sin] = "standard math";
    [function() print "a user function" end] = "me!";
} 
```

我认为你对 Lua 了解得越多，你就会越喜欢它。它真的是一门很棒的语言，有很多有趣的小功能。快乐编码！

# android - 错过 ACTION_DRAG_STARTED 事件的拖放、ListView 和 item View

> ID：14118984
> 
> 赞同：6
> 
> 时间：2013-01-02T08:34:16.917
> 
> 标签：android, drag-and-drop, android-listview, recycle

在 Android 上，我使用 a`ListView`并且我希望能够使用拖放重新排序其项目。我知道“拖放列表视图”有不同的实现，但是我想使用自**API 级别 11以来的**[拖放框架](http://developer.android.com/guide/topics/ui/drag-drop.html)。

 **它开始得很好，直到我想`ListView`在拖放时滚动。正如在下面的示例中所写，现在，我检查我在哪个列表元素的顶部，所以如果它的位置不在中间`ListView.getLastVisiblePosition()`，`ListView.getFirstVisiblePosition()`我使用 a`ListView.smoothScrollToPosition()`查看其他列表项。

这是第一个实现，但效果很好。

`DragEvent.ACTION_DRAG_ENTERED`滚动时出现问题：当我在它们之上时，一些元素不响应拖放事件 -以及其他事件。这是由于 ListView 管理其项目视图的方式：它试图回收不再可见的项目视图。

没关系，它可以工作，但有时`getView()`返回`ListAdapter`一个新对象。因为它是新的，所以这个对象错过了，`DragEvent.ACTION_DRAG_STARTED`所以它不响应其他`DragEvent`事件！

这是一个例子。在这种情况下，如果我通过长按列表项开始拖放，如果我拖动它，如果我在它们上面，大多数项目将具有绿色背景；但有些没有。

即使他们错过了让他们订阅拖放事件机制的任何想法`DragEvent.ACTION_DRAG_STARTED`？

```
// Somewhere I have a ListView that use the MyViewAdapter
// MyListView _myListView = ...
// _myListView.setAdapter(new MyViewAdapter(getActivity(), ...));
_myListView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        view.startDrag(null, shadowBuilder, _myListView.getItemAtPosition(position), 0);
        return true;
    }
});

class MyViewAdapter extends ArrayAdapter<MyElement> {

    public MyViewAdapter(Context context, List<TimedElement> objects) {
        super(context, 0, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View myElementView = convertView;
        if (myElementView == null) {
            /* If the code is executed here while scrolling with a drag and drop,
             * the new view is not associated to the current drag and drop events */
            Log.d("app", "Object created!");
            // Create view
            // myElementView = ...
            // Prepare drag and drop
            myElementView.setOnDragListener(new MyElementDragListener());
        }
        // Associates view and position in ListAdapter, needed for drag and drop
        myElementView.setTag(R.id.item_position, position);
        // Continue to prepare view
        // ...
        return timedElementView;
    }

    private class MyElementDragListener implements View.OnDragListener {
        @Override
        public boolean onDrag(View v, DragEvent event) {
            final int action = event.getAction();
            switch(action) {
            case DragEvent.ACTION_DRAG_STARTED:
                return true;
            case DragEvent.ACTION_DRAG_ENTERED:
                v.setBackgroundColor(Color.GREEN);
                v.invalidate();
                return true;
            case DragEvent.ACTION_DRAG_LOCATION:
                int targetPosition = (Integer)v.getTag(R.id.item_position);
                if (event.getY() < v.getHeight()/2 ) {
                    Log.i("app", "top "+targetPosition);        
                }
                else {
                    Log.i("app", "bottom "+targetPosition);
                }
                // To scroll in ListView while doing drag and drop
                if (targetPosition > _myListView.getLastVisiblePosition()-2) {
                    _myListView.smoothScrollToPosition(targetPosition+2);
                }
                else if (targetPosition < _myListView.getFirstVisiblePosition()+2) {
                    _myListView.smoothScrollToPosition(targetPosition-2);
                }
                return true;
            case DragEvent.ACTION_DRAG_EXITED:
                v.setBackgroundColor(Color.BLUE);
                v.invalidate();
                return true;
            case DragEvent.ACTION_DROP:
            case DragEvent.ACTION_DRAG_ENDED:
            default:
               break;
            }
            return false;
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T12:02:15.543

我没有解决这个回收问题，但我发现了一个可能的解决方法，仍然使用拖放框架。这个想法是改变视角：而不是在列表中的`OnDragListener`每个上使用a `View`，它可以直接用于`ListView`。

然后的想法是在进行拖放时找到手指在哪个项目之上，并`ListAdapter`在`ListView`. 然后诀窍是找到我们在哪个项目视图之上，以及在哪里完成放置。

为了做到这一点，我将`id`适配器创建的每个视图的`ListView`位置设置为 - with ，这样我以后可以使用和`View.setId()`的组合找到它。`ListView.pointToPosition()``ListView.findViewById()`

作为一个拖动监听器示例（我提醒您，它应用于`ListView`），它可以是这样的：

```
// Initalize your ListView
private ListView _myListView = new ListView(getContext());

// Start drag when long click on a ListView item
_myListView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        view.startDrag(null, shadowBuilder, _myListView.getItemAtPosition(position), 0);
        return true;
    }
});

// Set the adapter and drag listener
_myListView.setOnDragListener(new MyListViewDragListener());
_myListView.setAdapter(new MyViewAdapter(getActivity()));

// Classes used above

private class MyViewAdapter extends ArrayAdapter<Object> {
    public MyViewAdapter (Context context, List<TimedElement> objects) {
        super(context, 0, objects);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View myView = convertView;
        if (myView == null) {
            // Instanciate your view
        }
        // Associates view and position in ListAdapter, needed for drag and drop
        myView.setId(position);
        return myView;
    }
}

private class MyListViewDragListener implements View.OnDragListener {
    @Override
    public boolean onDrag(View v, DragEvent event) {
        final int action = event.getAction();
        switch(action) {
            case DragEvent.ACTION_DRAG_STARTED:
                return true;
            case DragEvent.ACTION_DRAG_DROP:
                // We drag the item on top of the one which is at itemPosition
                int itemPosition = _myListView.pointToPosition((int)event.getX(), (int)event.getY());
                // We can even get the view at itemPosition thanks to get/setid
                View itemView = _myListView.findViewById(itemPosition );
                /* If you try the same thing in ACTION_DRAG_LOCATION, itemView
                 * is sometimes null; if you need this view, just return if null.
                 * As the same event is then fired later, only process the event
                 * when itemView is not null.
                 * It can be more problematic in ACTION_DRAG_DROP but for now
                 * I never had itemView null in this event. */
                // Handle the drop as you like
                return true;
         }
    }
} 
```**

# sql-server - 在选择别名“as”中包含非法字符

> ID：14118987
> 
> 赞同：2
> 
> 时间：2013-01-02T08:34:25.627
> 
> 标签：sql-server, sql-server-2012

我在 SQL Server 中使用数据透视函数。

我的选择是动态构建的并使用数据透视函数。

由于值中有很多 guid，因此我使用“as”并为其指定一个名称 - （如果我为从属性值生成的列提供新名称，则很容易维护它。）

但值包括`.`、空格、`-`和`+`其他非法字符。有没有办法包含这些字符？

这是一个简单的例子：

```
string s = 
" select MyColumn as My Attribute
  from MyTable My Table " 
```

生成名称的位置`My Attribute`和位置`My Table`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T08:36:28.440

将这些名称括在方括号中：

```
string s = 
" SELECT MyColumn AS [My Attribute]
  FROM MyTable [My Table] " 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T08:37:19.480

您可以使用[Delimited Identifiers](http://msdn.microsoft.com/en-us/library/aa224033%28v=sql.80%29.aspx)，它使用`""`或`[]`包含（几乎）任意字符序列：

> 符合标识符格式所有规则的标识符可以使用或不使用分隔符。必须始终分隔不符合常规标识符格式规则的标识符。

是否`""`有效取决于`QUOTED_IDENTIFIERS`您的会话设置。`[]`可以一直使用。

# facebook - 在 sitecore 中登录 Facebook

> ID：14118993
> 
> 赞同：1
> 
> 时间：2013-01-02T08:35:02.577
> 
> 标签：facebook, sitecore, facebook-c#-sdk, sitecore-social-connected

我是 sitecore 的新手，目前正在研究它。我没有在 sitecore 上使用 Social Connected 模块，因为我没有要安装的模块，也无法下载它（我使用的是默认模块和默认 sitecore。它是公司给我的）

他们有一个要求，以便他们的网站连接到 Facebook。我按照[此处](http://csharpsdk.org)的教程进行操作，并且可以检索电子邮件地址以在该站点上注册新用户。

我尝试使用来自 facebook 的给定电子邮件登录该站点，但我没有任何密码，因此我无法使用连接的用户登录。

**我的问题：**如何将 sitecore 登录与 facebook 登录连接起来？因此，每次用户使用 facebook 登录我的网站时，它都会自动登录，就像另一个在 sitecore 上使用默认会员资格的用户一样。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T08:47:05.283

这正是社交连接模块所做的......所以我真的建议你使用它。

但是，如果这完全不可能，您可以仅通过其用户名登录 Sitecore 用户，如下所示：

```
Sitecore.Security.Authentication.AuthenticationManager.Login("username_here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T20:39:28.777

正如 Ruud 所说，这可以通过使用社交连接模块来实现。这篇博文也应该有帮助：[Social Connected with Sitecore (Facebook) 1: Setup & Posting messages](http://techmusingz.wordpress.com/2014/07/03/social-connected-with-sitecore-facebook-1-setup-posting-messages/)

# closures - 为什么这段代码不能与 Emacs-lisp 一起工作

> ID：14118994
> 
> 赞同：1
> 
> 时间：2013-01-02T08:35:02.533
> 
> 标签：closures, elisp

我不想在 中实现闭包行为`Elisp`，这里是代码：

```
(setq lexical-binding t)
(setq var 3)
(require 'cl)
(defun foo (n)
  #'(lambda (i)
    (incf n i)))
(defvar bar (foo var))
(funcall bar 1) 
```

我想要得到的是，每次我运行 expr：`(funcall bar 1)`它都会将 expr 的结果增加`1`. 我不知道为什么它不能工作，有人可以给我解释一下吗？[我在如何在 Emacs Lisp 中进行闭包中](https://stackoverflow.com/q/593383/930125)发现了一个类似的问题？但我无法理解。我的 Emacs 版本是 24.2.1，它似乎支持`lexical scoping`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:13:34.260

该`lexical-binding`变量相当特殊，我强烈建议不要使用`setq`它。仅在第一行的注释中通过 a 定义它`-*- lexical-binding: t -*-`（并且该注释仅在您重新访问相应文件后才生效）。

# zedgraph - 如何在屏幕上显示 ZedGraph？

> ID：14118995
> 
> 赞同：0
> 
> 时间：2013-01-02T08:35:16.200
> 
> 标签：zedgraph

我需要为我的项目绘制图形，所以我搜索了 zedgraph 库。我查看了这个示例代码来学习该库。但我无法在屏幕上显示图形。请帮助我。这是代码。

```
namespace gafikdeneme
{
    class Program
    {
        static void Main(string[] args)
        {

            GraphPane pane = new GraphPane();

        pane.CurveList.Clear ();

        PointPairList list1 = new PointPairList ();
        PointPairList list2 = new PointPairList ();
        PointPairList list3 = new PointPairList ();

        double xmin = -50;
        double xmax = 50;

        for (double x = xmin; x <= xmax; x += 0.01)
        {
            list1.Add (x, f1 (x));
            list2.Add (x, f2 (x));
            list3.Add (x, f3 (x));
        }

        pane.YAxisList.Clear ();

        int axis1 = pane.AddYAxis ("Axis 1");
        int axis2 = pane.AddYAxis ("Axis 2");
        int axis3 = pane.AddYAxis ("Axis 3");           

        LineItem myCurve1 = pane.AddCurve ("Curve 1", list1, Color.Blue, SymbolType.None);
        LineItem myCurve2 = pane.AddCurve ("Curve 2", list2, Color.Black, SymbolType.None);
        LineItem myCurve3 = pane.AddCurve ("Curve 3", list3, Color.Red, SymbolType.None);

        myCurve1.YAxisIndex = axis1;
        myCurve2.YAxisIndex = axis2;
        myCurve3.YAxisIndex = axis3;

        myCurve1.IsVisible = true;
        myCurve2.IsVisible = true;
        myCurve3.IsVisible = true;

        pane.YAxisList[axis1].Title.FontSpec.FontColor = Color.Blue;
        pane.YAxisList[axis2].Title.FontSpec.FontColor = Color.Black;
        pane.YAxisList[axis3].Title.FontSpec.FontColor = Color.Red;

        pane.AxisChange();
 }

   public static double f1 (double x)
    {
        if (x == 0)
        {
            return 1;
        }

        return Math.Sin (x) / x;
    }

   public static  double f2(double x)
    {
        if (x == 0)
        {
            return 1;
        }

        return 10 * Math.Sin (x * 0.5) / x;
    }

   public static double f3(double x)
    {
        if (x == 0)
        {
            return 1;
        }

        return 0.1 * Math.Sin (x * 2) / x;
    }

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:30:25.630

也许这会解决你的问题

```
//litle change here
ZedGraphControl control = new ZedGraph.ZedGraphControl();
GraphPane pane = control.GraphPane;
//--

pane.CurveList.Clear ();

PointPairList list1 = new PointPairList ();
PointPairList list2 = new PointPairList ();
PointPairList list3 = new PointPairList ();

double xmin = -50;
double xmax = 50;

for (double x = xmin; x <= xmax; x += 0.01)
{
    list1.Add (x, f1 (x));
    list2.Add (x, f2 (x));
    list3.Add (x, f3 (x));
}

pane.YAxisList.Clear ();

int axis1 = pane.AddYAxis ("Axis 1");
int axis2 = pane.AddYAxis ("Axis 2");
int axis3 = pane.AddYAxis ("Axis 3");           

LineItem myCurve1 = pane.AddCurve ("Curve 1", list1, Color.Blue, SymbolType.None);
LineItem myCurve2 = pane.AddCurve ("Curve 2", list2, Color.Black, SymbolType.None);
LineItem myCurve3 = pane.AddCurve ("Curve 3", list3, Color.Red, SymbolType.None);

myCurve1.YAxisIndex = axis1;
myCurve2.YAxisIndex = axis2;
myCurve3.YAxisIndex = axis3;

myCurve1.IsVisible = true;
myCurve2.IsVisible = true;
myCurve3.IsVisible = true;

pane.YAxisList[axis1].Title.FontSpec.FontColor = Color.Blue;
pane.YAxisList[axis2].Title.FontSpec.FontColor = Color.Black;
pane.YAxisList[axis3].Title.FontSpec.FontColor = Color.Red;

pane.AxisChange();

//and here, we have panel(panel1) to show our graph
this.panel1.Controls.Add(control);
//-- 
```

# javascript - 是 switch(true) {... 有效的 javascript 吗？

> ID：14118996
> 
> 赞同：23
> 
> 时间：2013-01-02T08:35:20.947
> 
> 标签：javascript, boolean, switch-statement

我最近遇到了一个代码，其中一个 switch 语句似乎与 switch 中的答案（布尔值）和 case 中的表达式相反。代码按预期运行良好，但我担心跨浏览器。它是有效的javascript吗？

```
switch(true) {
  case (y < 20):
    //
    break;
  case (y < 60):
    //
    break;
  case (y < 130):
    //
    break;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T08:37:40.103

这个片段非常好。这只是另一种表达方式：

```
if (y < 20) {
    // ...
} else if (y < 60) {
    // ...
} else if ( y < 130) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T08:38:11.650

是的，它是有效的。

与许多“现代”语言一样，`switch`Javascript 中的 int 与 C 语言中基于 int 的原始语言相去甚远`switch`，它只保留了一般语义。

在 ECMAScript 中规范化的 switch 子句在此处详细解释：http: [//www.ecma-international.org/ecma-262/5.1/#sec-12.11](http://www.ecma-international.org/ecma-262/5.1/#sec-12.11)

基本上，执行值等于表达式 in 的第一个 case `switch(Expression)`。

与明显顺序相比的主要优点`if else if`是能够省略`break`语句并执行多个块。请注意，与旧的 C 开关相反，没有真正的性能改进，在这种情况下，它既不简洁也不可读。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-02T09:13:30.907

[switch 语句](http://www.ecma-international.org/ecma-262/5.1/#sec-12.11)的语法是：

> ```
> SwitchStatement :  
>   switch ( Expression ) CaseBlock  
> CaseBlock :  
>   { CaseClauses(opt) }  
>   { CaseClauses(opt) DefaultClause CaseClauses(opt) }  
> CaseClauses :  
>   CaseClause  
>   CaseClauses CaseClause  
> CaseClause :  
>   case Expression : StatementList(opt)  
> DefaultClause :  
>   default : StatementList(opt) 
> ```

没有它说 switch 表达式或 case 表达式必须是数字、字符串、布尔值或任何东西的地方。`true`作为 switch 表达式`y < 20`是完全可以接受的，并且作为 case 表达式是完全可以接受的。请记住，switch 表达式和 case 表达式之间的比较是使用`===`运算符进行的。

在您发布的代码中，`true`将执行第一个案例，直到`break`遇到或 switch 块结束。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T08:39:09.000

### 案例将根据 的值执行`y`。

因为条件取决于 的值`y`。正如[aefxx 所说](https://stackoverflow.com/users/264395/aefxx)，它是另一种形式：

```
if (y < 20) {
    // ...
} elseif (y < 60) {
    // ...
} elseif ( y < 130) {
    // ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T09:04:16.343

这是有效的。

编码

```
switch(f0()) {
    case f1(): ..; 
    case f2(): ..;
    default: dflt;
} 
```

其中`fX()`表示*任意表达式*（函数调用用于显示强制评估）可以近似地重写为

```
for (;;) { // for "break"
    var _x = f0()
    if (_x === f1()) { .. }
    if (_x === f2()) { .. }
    dflt;
    break;
} 
```

也就是说，***计算*****中的****表达式，然后与 中的表达式进行比较`case`*`switch`****。（这与 C 或 Java 等需要表达式中的常量值的语言`case`截然不同。）*

 *当然，`break`将“退出开关”——与标准的贯穿语义相反——因此，`true`提供给 的表达式在哪里`switch`，发布的示例在语义上等同于`if/else if`aefxx 所示的 。*

# asp.net - 如何使用 ASP.NET 上传

> ID：14118997
> 
> 赞同：6
> 
> 时间：2013-01-02T08:35:23.830
> 
> 标签：asp.net, visual-studio-2010, visual-studio, compilation

我正在尝试将我编译的 Web 应用程序上传到 Internet。有人告诉我，我需要的只是应该进入 bin 文件夹的 dll 文件吗？这是真的还是我需要同时上传 dll 文件和 bin 文件夹？

另外，有没有更好的构建方法，这样我就不必将我的图像、css 等混合到我的项目文件夹中？也许一种将dll文件复制到bin文件夹和我所有aspx页面的方法？

我让它工作，但似乎我一直在复制一堆文件，我知道最终会出现一些问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T08:42:13.277

*   右键单击您的项目并重建
*   右键单击您的项目，然后单击发布 - 我使用“发布到文件到目录”来验证是否复制了正确的文件。
*   找到您在系统上指定的已发布文件
*   如果您检查 bin 文件夹，您的所有引用 (.dll) 都应该在里面
*   然后将已发布文件夹的内容上传到您的站点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T08:40:23.333

最简单的方法是使用 Visual Studio 菜单 Build -> Publish。然后，您可以通过 FTP 直接导出到目标服务器，或者导出到本地目录，从该目录将文件复制到 Web 目录。

仅发布所需的文件。