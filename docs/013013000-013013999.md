# StackOverflow 问答 13013000-13013999

# .net - 自定义多态 Newtonsoft JSON 反序列化器

> ID：13013004
> 
> 赞同：3
> 
> 时间：2012-10-22T13:56:37.113
> 
> 标签：.net, json.net

我有一个递归数据结构。就像是...

```
Public Class Comparison
    Property Id As Integer
End Class

Public Class SimpleComparison
    Inherits Comparison
    Property Left As String
    Property Right As String
End Class

Public Class ComplexComparison
    Inherits Comparison
    Property Left As Comparison
    Property Right As Comparison
End Class 
```

我需要从 JSON 反序列化到这个。

如您所见，确定是使用 a`ComplexComparison`还是 a的唯一方法`SimpleComparison`是确定该`.Left`值是字符串还是对象。（注意它们要么都是字符串，要么都是对象）

所以，我正在编写一个自定义转换器并且已经到了这一步......

```
Public Class ComparisonConverter
    Inherits Newtonsoft.Json.JsonConverter
    ''<Snip>
Public Overrides Function ReadJson(reader As Newtonsoft.Json.JsonReader, objectType As Type, existingValue As Object, serializer As Newtonsoft.Json.JsonSerializer) As Object
    Dim obj As JObject = TryCast(serializer.Deserialize(Of JToken)(reader), JObject)
    If obj IsNot Nothing Then
            ''We''ve got something to work with
        Dim Id As Integer = obj("Id").ToObject(Of Integer)()

            ''Check if we''re instantiating a simple or a complex comparison
        If obj("Left").GetType.IsAssignableFrom(GetType(JValue)) Then
            ''LHS is a string - Simple...
            Return New SimpleComparison With {
                .Id = Id,
                .Left = obj("Left").ToObject(Of String)(),
                .Right = obj("Right").ToObject(Of String)()}
        Else
            Return New ComplexComparison With {
            .Id = Id,
            .Left = ???, '' <<Problem
            .Right = ???}'' <<Problem
        End If
    Else
        Return Nothing
    End If
End Function
End Class 
```

由于对象复杂而导致的分支`If`是我卡住的地方。如何在`obj("Left")`and `obj("Right")`（类型为`JToken`）上重新调用反序列化器？或者我应该将它们转换为`JObject`然后将此代码分解为一个单独的函数并递归调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:33:42.953

结果比我预期的要简单，JSON.Net 为我完成了所有繁重的工作......

```
Public Overrides Function ReadJson(reader As Newtonsoft.Json.JsonReader, objectType As Type, existingValue As Object, serializer As Newtonsoft.Json.JsonSerializer) As Object
    Dim Ret As Comparison
    Dim JComparison As JObject = JObject.Load(reader)
    If JComparison("Left").GetType.IsAssignableFrom(GetType(JValue)) Then
        Ret = New SimpleComparison
    Else
        Ret = New ComplexComparison
    End If
    serializer.Populate(JComparison.CreateReader(), Ret)
    Return Ret
End Function 
```

# asp.net-mvc - 如何使用 ajax.actionLink 或 ajax.beginForm 使用 Blockui 阻止 targetUpdateId

> ID：13013010
> 
> 赞同：1
> 
> 时间：2012-10-22T13:56:54.210
> 
> 标签：asp.net-mvc, asp.net-mvc-ajax

我想开发一个 ajax 管道，这样每当通过 ajax.beginform 或 ajax.actionLink 发出任何 ajax 请求时，它都应该从我的 ajax.start 函数开始，在该函数中我可以读取 targetupdateid 以便我可以屏蔽 blockui 和任何开发人员都不应该为这个 ajax.start 烦恼。我试图使用这段代码但它不起作用

```
$(document).ajaxStart(function (xhr, setting) {
    console.log(this.activeElement);
    if (this.activeElement.type == 'submit') {
        activeElement = this.activeElement.form.attributes["data-ajax-update"].value;

    } else {
       / activeElement = this.activeElement.attributes["data-ajax-update"].value;
    }
    if (activeElement != null) {
        $(activeElement).blockUI();
    }

}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:49:28.487

试试这个

```
 <div id="mainbody">
   </div>  

    <div id="SomeId" style="display:none">

        // put you style to block the UI here 
        // or put loader image
        <img src="@Url.Content("~/Content/themes/base/images/ajax_loader_big.gif")" alt="" />
    </div>

    @Ajax.BeginForm("Index", "Search", new AjaxOptions { UpdateTargetId = "mainbody", HttpMethod = "Post", LoadingElementId = "SomeId" }) 
```

您可以使用 Ajax-Loader 或一些带有加载器图像的 css 样式，这会阻塞 UI。您需要在 **LoadingElementId**中为该 div Id 设置该 ID，这会阻塞 UI，直到 ajax 功能未完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:13:02.093

感谢您的解决方案，但我想阻止 UpdateTargetId 通过向 click 添加侦听器来解决该问题。

```
 var activeElement,
    targetElement,
    callbackfunc = function (event) {
        activeElement = event.target || event.srcElement;
    };
window.addEventListener('click', callbackfunc, true);
$(document).ajaxStart(function () {if (activeElement !== null && activeElement !== undefined) {
        if (activeElement.type == 'submit') {
            targetElement = activeElement.form.attributes["data-ajax-update"].value;
        }
        if (activeElement.tagName == 'A') {
            targetElement = activeElement.attributes["data-ajax-update"].value;
        }
    }

    if (targetElement !== undefined || targetElement !== null) {
        $(targetElement).block({
            showOverlay: false,
            css: { border: '0px', width: '40px', height: '40px' },
            message: '<div class="progress"><div>'
        });
    }

}); 
```

# sql - 如何在单独选择其他列的同时合并 2 个表的单列

> ID：13013013
> 
> 赞同：2
> 
> 时间：2012-10-22T13:56:57.917
> 
> 标签：sql, postgresql, postgresql-9.1

我有 2 个查询，例如：

```
select id, count(something) selected from table1...;
select id, count(something) rejected from table2...; 
```

第一个查询给了我

```
id selected
------------
2  4
3  5 
```

第二个查询给了我

```
id rejected
------------
1  12
3  13 
```

我希望通过单个查询将它们组合成以下形式

```
id selected rejected
--------------------
1  null      12
2  4         null 
3  5         13 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:02:35.773

您需要通过组合连接的`SQL Server`ed结果来模拟（*但在我的情况下，两者都**像我以前那样*）`FULL OUTER JOIN``UNION``LEFT and RIGHT`*`LEFT JOIN`*

```
SELECT  a.ID, a.selected, b.rejected
FROM    (selectedQuery) a
        LEFT JOIN (rejectedQuery) b
            ON a.ID = b.ID
UNION 
SELECT  a.ID, b.selected, a.rejected 
FROM    (rejectedQuery) a
        LEFT JOIN (selectedQuery) b
            ON a.ID = b.ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!1/a1780/7)

**更新 1**

PostgreSQL 支持`FULL OUTER JOIN`（*我的坏*）

```
SELECT  COALESCE(a.ID,b.id) ID, a.selected, b.rejected
FROM    selectedQuery a
        FULL OUTER JOIN rejectedQuery b
            ON a.ID = b.ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!1/a1780/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:27:04.110

给定一些返回数据的表达式：

```
select
 column1 id,
 column2 selected
from (values (2 , 4),(3, 5)) table1;

 id | selected 
----+----------
  2 |        4
  3 |        5
(2 rows) 
```

```
select
 column1 id,
 column2 rejected 
from (values (1 , 12),(3, 13)) table2
dbornside-# ;
 id | rejected 
----+----------
  1 |       12
  3 |       13
(2 rows) 
```

通常的内连接不会产生正确的结果；仅显示*两个*关系中的行

```
select * from 
     (select column1 id, column2 selected from (values (2 , 4),(3, 5)) table1) table1
join (select column1 id, column2 rejected from (values (1 , 12),(3, 13)) table2) table2 
on table1.id = table2.id;

 id | selected | id | rejected 
----+----------+----+----------
  3 |        5 |  3 |       13
(1 row) 
```

要从右侧表中获取*所有*行，您需要 a `right outer join`，左侧的行是 a `left outer join`; 让你使用一个[`full outer join`](http://www.postgresql.org/docs/9.1/static/queries-table-expressions.html#QUERIES-JOIN)：

```
select * 
from (select column1 id, column2 selected from (values (2 , 4),(3, 5)) table1) table1
FULL OUTER JOIN ( select column1 id, column2 rejected from (values (1 , 12),(3, 13)) table2) table2 
on table1.id = table2.id;

 id | selected | id | rejected 
----+----------+----+----------
  2 |        4 |    |         
  3 |        5 |  3 |       13
    |          |  1 |       12
(3 rows) 
```

不过，这看起来有点奇怪。那是因为与;`table1.id`不是同一列 `table2.id`并且某些值在两个表中都不存在。我们可以在同一步骤中使用 a 将它们收集在一起`coalesce()`：

```
select COALESCE(table1.id, table2.id) id,
       selected,
       rejected
from (select column1 id, column2 selected from (values (2 , 4),(3, 5)) table1) table1 
full outer join ( select column1 id, column2 rejected from (values (1 , 12),(3, 13)) table2) table2 
on table1.id = table2.id;

 id | selected | rejected 
----+----------+----------
  2 |        4 |         
  3 |        5 |       13
  1 |          |       12
(3 rows) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T14:02:07.973

您可以在 id 列中使用 JOIN 吗？例如

```
SELECT s.id, COUNT(s.something) selected, COUNT(r.something) rejected
FROM table1 s
INNER JOIN table2 r ON r.id = s.id 
```

# r - 是否可以在 R 中添加脚本断行，例如 Matlab 中的单元格断行

> ID：13013016
> 
> 赞同：1
> 
> 时间：2012-10-22T13:57:12.667
> 
> 标签：r, matlab

我已经使用 R 一段时间了。有时很烦人的是，当脚本变长时，您必须添加一个换行符来分隔代码。是否可以自动添加脚本换行符，例如 Matlab 中的单元格换行符。

像这样的东西：

代码 1

* * *

代码 2

谢谢：）

最好的，秦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:05:02.593

正如@BenBolker 所提到的，如果您在 emacs ess 下，您可以尝试`Ctrl-u` `40``#`生成 40 个`#`注释符号来分隔代码块。

# facebook-graph-api - 如何比较两个 facebook UID 以确定他们是否是朋友？

> ID：13013017
> 
> 赞同：-1
> 
> 时间：2012-10-22T13:57:15.233
> 
> 标签：facebook-graph-api, ruby-on-rails-3.2, omniauth

我已经在我的 rails 3.2 应用程序中使用 devise 和 omniauth facebook gem 对用户进行了身份验证。如何仅根据他们的 uid 确定两个用户是否是朋友？使用 Facebook 查询语言或其他方式更好吗？请提供一个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:30:10.533

您可以使用 Graph API 通过检查`/me/friends/USER_ID_TO_TEST`或 FQL来执行此操作`SELECT uid1, uid2 FROM friend WHERE uid1 = me() and UID2 = USER_ID_TO_TEST`

当时必须对两个用户之一进行身份验证，否则查询将失败。

这样做的问题是，如果用户不是朋友，Facebook 将返回一个空数据集。如果您不喜欢这样，那么您需要将用户的朋友列表检索到您的脚本中并搜索要测试的朋友的响应。

# python - 使用 zc.buildout 在“$ django-admin.py startproject my_project”之后自动自定义 Django 项目

> ID：13013018
> 
> 赞同：0
> 
> 时间：2012-10-22T13:57:17.643
> 
> 标签：python, django, buildout

我浏览了官方`zc.buildout`文档和一些 tuts，但我还没有找到以下问题的明确答案。

**假设我想从现在开始在每个 Django 项目（Django1.4）中自动执行*以下更改*，所有这些更改都可以仅通过`buildout.cfg`文件执行吗？**

完成后，我将实施的默认 startproject*更改*`$ django-admin.py startproject my_project`示例：

 *```
$ mkdir ~/path/to/my_project/my_project/db 
```

*设置.py：*

```
import os
ROOT_PATH = os.path.dirname(os.path.abspath(__file__))

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(ROOT_PATH, 'db/my_project.db'),                      
        'USER': '',                     
        'PASSWORD': '',                  
        'HOST': '',                    
        'PORT': '', 
    }
} 
```

我目前构建并使用我自己定制的 Django 源代码 1.4 分支的分发作为解决方案，但很高兴知道我是否也可以使用 buildout 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:02:56.817

您想要的并不是 Buildout 用例集的一部分。

您希望在启动项目时自定义生成的代码，而 buildout 旨在为您提供可重现的部署或开发环境。

前*一个*开发人员会使用，后者旨在让多个开发人员或多台生产机器启动并使用相同的软件堆栈运行。

也就是说，当然可以构建一个构建配方，在零件运行时写出这些文件的新版本。例如，使用[`collective.recipe.template`](http://pypi.python.org/pypi/collective.recipe.template)您可以指定每次运行构建时将模板文件放置在特定位置。请注意，如果它们发生更改，这将*覆盖这些文件。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:52:29.117

除了 Martijn 的回答： buildout 可以创建目录就好了。看看[http://pypi.python.org/pypi/z3c.recipe.mkdir/](http://pypi.python.org/pypi/z3c.recipe.mkdir/)

这是我经常使用它的任务之一（为日志文件创建一个 var/log/，为 sqlite 文件创建一个 var/sqlite/ 目录等）*

# json.net - JsonConverter 不用于某些类型的容器

> ID：13013024
> 
> 赞同：0
> 
> 时间：2012-10-22T13:57:35.960
> 
> 标签：json.net, deserialization, converter

我有一个继承自 JsonConverter 的类： `JsonDataBagCreationConverter<T> : JsonConverter where T : IDataBag`

我有一个实现 IDataBag 的类 Company

当我反序列化 Company JsonDataBagCreationConverter 的*单个属性*时，它的 ReadJson 方法按我的预期调用。当我反序列化一个Company*数组*时，JsonDataBagCreationConverter 会按我的预期调用它的 ReadJson 方法。它也适用于公司的*通用*列表。

但是对于 Company 的某些容器，json.net 将无法识别列表的内容是 Company 类型。所以反序列化时不使用 JsonDataBagCreationConverter 。

即存储公司对象的 System.Collections.DictionaryEntry、System.Collections.ArrayList、System.Collections.Hashtable、System.Collections.SortedList 类型的容器。

我知道这些容器是非通用的。是否可以让（反）序列化程序查看这些容器的*内容*并在内容为 Idatabag（即公司）时使用 JsonDataBagCreationConverter？

此致

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:24:01.760

从转换器中删除`where T : IDataBag`并覆盖 `CanConvert`并编写您的逻辑以检查您的类型并相应地返回真或假。

# python - 将此代码段从 Matlab 移植到 Python

> ID：13013025
> 
> 赞同：0
> 
> 时间：2012-10-22T13:57:41.483
> 
> 标签：python, matlab

我在 Matlab 中有以下代码片段，并希望将其移植到 Python。

```
for i=1:runs;
   tic;
   datmat=importdata('data.txt',' ');
    Limits_Area=[1,261,522,784,1045,1305,1565,1827,2088,2349,2610,2871,3131,3158];
   for k=1:2000;
      for j=1:13;
         Year_Data=datmat.data(Limits_Area(j):Limits_Area(j+1)-1,4:37);
         Min_Year=min(Year_Data);
         Max_Year=max(Year_Data);
         Mean_Year=mean(Year_Data);
         GainLoss_Year=100-(Year_Data(1,:)+0.00000001)./(Year_Data(end,:)+0.00000001)*100;
     end;
   end; 
```

我很难过

`Year_Data=datmat.data(Limits_Area(j):Limits_Area(j+1)-1,4:37);`

部分....任何方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:15:42.977

你试过 numpy 吗？它是一个类似于 Matlab 的科学计算库。例如 ：

> 在 Matlab 中： `a(1:5,:)`
> 
> 在 Numpy 中： `a[0:5] or a[:5] or a[0:5,:]`

查看：[Matlab 用户的 Numpy](http://www.scipy.org/NumPy_for_Matlab_Users)

如果您不想使用 Numpy，请尝试理解列表：

`Year_Data = [ [datmat.data(i,j) for j in range (4,38) ] for i in range(j,j+2) ]`

**编辑：**

```
for i in range(runs) :
    datamat = numpy.genfromtxt('data.txt',delimiter=' ', newline ='\n' ) 
    // Adapt the previous line to the format of your txt file
    // at this point you should have a numpy.array object with the right shape
    Limits_Area= numpy.array( [1,261,522,784,1045,1305,1565,1827,2088,2349,2610,2871,3131,3158] )
    for k in range(2000):
        for j in range(13):
            Year_Data = datmat[ Limits_Area(j):Limits_Area(j+1)-1 , 4:37 ]
            etc etc ... 
```

注意：Matlab 数组索引从 1 到 n，而 numpy 数组索引从 0 到 n-1

# web-services - 使用 GeoExt 从 WFS GetCapabilities 请求中检索服务信息

> ID：13013028
> 
> 赞同：1
> 
> 时间：2012-10-22T13:57:44.890
> 
> 标签：web-services, extjs

这可能是一个非常简单的问题，但我似乎无法弄清楚。

我正在编写一个 Javascript 应用程序，以使用 GeoExt 使用 GetCapabilities 请求从 WFS 服务器检索图层信息。GetCapabilities 返回有关 WFS 服务器的信息——服务器的名称、运行它的人员等，以及它所提供的数据层的信息。

我的基本代码如下所示：

```
var store = new GeoExt.data.WFSCapabilitiesStore({ url: serverURL });

store.on('load', successFunction);
store.on('exception', failureFunction);
store.load(); 
```

这按预期工作，并且当加载完成时，将调用 successFunction。

成功函数看起来像这样：

```
successFunction = function(dataProxy, records, options) { 
   doSomeStuff();
} 
```

dataProxy是一个Ext.data.DataProxy对象，records是一个记录列表，WFS服务器上每一层一个，options为空。

这就是我卡住的地方：在这个函数中，我可以访问有关服务器提供的数据的所有层信息。但我还想提取在 store.load() 期间获取的 XML 中包含的服务器信息（见下文）。但我不知道如何将它从 dataProxy 对象中取出，我确信它必须被松散。

有任何想法吗？

* * *

我想要的字段包含在这个片段中：

```
<ows:ServiceIdentification>
  <ows:Title>G_WIS_testIvago</ows:Title>
  <ows:Abstract/>
  <ows:Keywords>
     <ows:Keyword/>
  </ows:Keywords>
  <ows:ServiceType>WFS</ows:ServiceType>
  <ows:ServiceTypeVersion>1.1.0</ows:ServiceTypeVersion>
  <ows:Fees/>
  <ows:AccessConstraints/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:42:23.200

显然，GeoExt 目前丢弃了服务器信息，破坏了我问题的整个前提。

这是一个代码片段，可用于告诉 GeoExt 抓取它。我没有编写此代码，但对其进行了测试，发现它对我很有效：

[https://github.com/opengeo/gxp/blob/master/src/script/plugins/WMSSource.js#L37](https://github.com/opengeo/gxp/blob/master/src/script/plugins/WMSSource.js#L37)

# objective-c - AVAudioPlayer 不适用于 (NSString *) 文件名

> ID：13013033
> 
> 赞同：0
> 
> 时间：2012-10-22T13:58:12.580
> 
> 标签：objective-c, audio, mp3, avaudioplayer

我想实现一个播放声音和/或音乐的播放器。我有这两种方法：

```
-(void)playSound:(int)soundIndex
{
  NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[SoundFxFilenameArray objectAtIndex:soundIndex] ofType:@"mp3"]];

  if(FxPlayer)
  {
    [FxPlayer release];
    FxPlayer = nil;
  }

  [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategorySoloAmbient error:nil];

  FxPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
  [FxPlayer play]; 
}

-(void)playMusic:(NSString *)filename
{
  NSURL *url = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:filename ofType:@"mp3"]];

  if(MusicPlayer)
  {
    [MusicPlayer release];
    MusicPlayer = nil;
  }

  MusicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
  [MusicPlayer play];
} 
```

现在，`[[SoundPlayer sharedManager] playSound:FXIndex_Default]`工作得很好。但是，当我尝试播放音乐时，`[[SoundPlayer sharedManager] playMusic:@"music_file_name_here"`什么也没做。请注意，声音文件和音乐文件的格式相同 (mp3)。

另外，“sharedInstance”是因为我为这个音频播放器实现了单例模式。

关于我的代码中有什么错误的任何指示或想法，以便我可以播放声音但不能播放音乐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:03:04.373

使用`fileURLWithPath`而不是`URLWithString`in `playMusic`：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:filename ofType:@"mp3"]]; 
```

`URLWithString`需要一个完整的 URL，例如“file://path/to/file.mp3”作为参数，`fileURLWithPath`只需要一个文件路径。

# java - 可以分析恶意输入的 HTTP 请求的 Java API？

> ID：13013034
> 
> 赞同：0
> 
> 时间：2012-10-22T13:58:13.173
> 
> 标签：java

我的想法是创建一个代理应用程序防火墙，它将分析和过滤来自访问 Web 应用程序的客户端的 HTTP 请求，这是一个场景，假设一个 Web 应用程序将要求用户提供登录详细信息，那么代理应用程序防火墙应该是能够分析来自用户的 HTTP 请求中是否存在任何无效字符，如引号 ''、""_-@ 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:59:07.270

OWASP [AppSensor](https://www.owasp.org/index.php/OWASP_AppSensor_Project)和[Shiro 安全](http://shiro.apache.org/)项目可能是您正在寻找的 API。

# zend-framework - Zend Rest Api：POST 方法上的 putAction

> ID：13013037
> 
> 赞同：3
> 
> 时间：2012-10-22T13:58:27.893
> 
> 标签：zend-framework, rest, post, put

我有一个奇怪的问题。我希望有人能帮助我。

我是 Zend 的新手，我正在编写一个 RESTfull API。

当我将 curl 命令作为 POST 方法运行时，它会调用 putAction() 函数。

例如，我正在运行 curl 命令：

```
curl -X POST http://localhost/ws/user/post -v 
```

这是回应：

```
* About to connect() to localhost port 80 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 80 (#0)
> POST /ws/user/post HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost
> Accept: */*
> 
< HTTP/1.1 200 OK
< Date: Mon, 22 Oct 2012 13:37:56 GMT
< Server: Apache/2.2.14 (Ubuntu)
< X-Powered-By: PHP/5.3.2-1ubuntu4.18
< Vary: Accept-Encoding
< Content-Length: 53
< Content-Type: text/html
< 
* Connection #0 to host localhost left intact
"From putAction() updating the requested article"
Method = POST
* Closing connection #0 
```

这是代码：

```
[...]
public function postAction() {
    echo 'Method = ' . $_SERVER['REQUEST_METHOD'];

    if (!$id = $this->_getParam('id', false)) {
        $this->sendResponse("Bad request. Id is missing", 400);
    }

    $this->sendResponse("From postAction() creating the requested article", 201);
}

public function putAction() {
    echo 'Method = ' . $_SERVER['REQUEST_METHOD'];
    $this->sendResponse("From putAction() updating the requested article");
}
[...] 
```

有任何想法吗 ？

* * *

编辑：

我意识到我把这段代码放在我的引导程序中：

```
public function _initRestRoute() {
    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();

    $restRoute = new Zend_Rest_Route($front, array(), array(
        'ws',
    ));

    $router->addRoute('rest', $restRoute);
} 
```

当我评论它时，它起作用了。

有什么解释吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:44:07.727

`http://localhost/ws/user/post`在使用 Zend_Rest_Route 时，您不应该在您的请求中出现。此路由将 /user/post 解释为参数并将操作从 post 更改为 put。试试`http://localhost/ws`吧。

参见 Zend/Rest/Route.php 第 208 行。

# asp.net - 使用 s3fs 和应用程序性能上传图像

> ID：13013038
> 
> 赞同：1
> 
> 时间：2012-10-22T13:58:28.883
> 
> 标签：asp.net, amazon-web-services, image-uploading, s3fs

我正在用 ASP.NET 4.5 开发一个 Web 应用程序。该应用程序的一部分包括用户上传图像的选项。图像是 Amazon S3 上的存储。现在我选择的路径是使用 Amazon SDK 将图像上传到 S3 上的存储桶并通过 CloudFront 提供服务。问题是我认为使用[s3fs](http://code.google.com/p/s3fs/)可能是一个更好的选择。

如果我挂载一个S3存储桶作为文件夹，当用户上传照片时，我可以继续应用程序操作，知道图像会通过网络传输到S3，所以我不需要等到这个过程完成之前继续代码。所以我所要做的就是等到图像完成上传到服务器并继续代码。

我想知道这是否是一个好方法。等待图片上传可能需要一些时间，我不希望用户等到所有图片都上传完毕，这可能需要一些时间。

对于图像上传的最佳实施有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:03:36.707

如果您将拥有多个需要与单个存储桶交互的应用程序服务器，那么这是一种合适的方法。您可能需要考虑将 s3fs 配置为使用本地存储目录作为缓存，以提高性能，因为直接写入 s3fs 挂载通常需要比本地存储更长的时间。

# hbase - Hbase/OpenTSBD 连接被拒绝错误

> ID：13013040
> 
> 赞同：1
> 
> 时间：2012-10-22T13:58:35.107
> 
> 标签：hbase, opentsdb

我是 HBase 和 OpenTSBD 的新手。我遵循了 OpenTSDB 手册中的所有步骤：http: [//opentsdb.net/getting-started.html](http://opentsdb.net/getting-started.html)

但是，当我进入最后一步时，出现以下错误：

```
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:1.7.0_07]
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:692) ~[na:1.7.0_07]
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146) ~[zookeeper-3.3.4.jar:3.3.3-1203054]
2012-10-22 09:52:45,715 INFO  [main-SendThread(localhost:2181)] ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
2012-10-22 09:52:45,716 WARN  [main-SendThread(localhost:2181)] ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect 
```

你能告诉我是什么导致了这个问题吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T05:28:23.367

这表明它无法连接到 ZooKeeper。如果您在单节点设置上运行，您可能还没有启动 HBase，或者它没有正常运行。检查 HBase 的日志。

# java - HibernateSession 和 EntityManager

> ID：13013042
> 
> 赞同：0
> 
> 时间：2012-10-22T13:58:37.893
> 
> 标签：java, hibernate, jpa

一个开始的问题：

如果 Hibernate 是 JPA 的实现，为什么它不实现 EntityManager，而是实现 HibernateSession？两者在功能上是等效的（粗略地），但用途不同？谢谢你的澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:01:53.727

HibernateSession (SessionManager) 比仅符合 JPA 规范的 EntityManager 具有更多的 Hibernate 功能。Hibernate 有比这更多的功能。

读一读...

[http://www.coderanch.com/t/218543/ORM/databases/difference-between-session-entitymanager](http://www.coderanch.com/t/218543/ORM/databases/difference-between-session-entitymanager)

# ios - 特定应用程序的 iOS 安全目录

> ID：13013043
> 
> 赞同：2
> 
> 时间：2012-10-22T13:58:39.210
> 
> 标签：ios, security

有什么方法可以让 iOS 中的目录只为我的应用程序提供安全和保护？在我的应用程序中，用户购买书籍并将书籍保存在文档子目录中，所以我不希望任何其他应用程序访问此目录有什么建议吗？我应该加密这些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:27:44.360

文档文件夹确实是从其他应用程序沙盒化的，但是对于允许您检查 iPhone 的文件系统（不需要越狱）的 3rd 方实用程序（例如 iExplorer）来说，它并不安全。
如果您想保护您的应用数据，您应该阅读 Apple 开发人员门户中的数据保护 API。还有一个不错的 WWDC 讲座（我认为它来自 2011 年）。
另一种解决方案可能是以安全格式打包您的材料，例如加密的 zip 文件（从您当场创建的设备 uuid 派生的某种密码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:01:00.210

您可能有兴趣查看 iOS 的数据保护：

[http://support.apple.com/kb/HT4175](http://support.apple.com/kb/HT4175)

[什么是新的“iOS 数据保护 API”？](https://stackoverflow.com/questions/4081102/what-are-the-new-ios-data-protection-apis)

[iOS 上的数据保护](https://stackoverflow.com/questions/4958362/data-protection-on-ios)

[实施和测试 iOS 数据保护](https://stackoverflow.com/questions/5155789/implementing-and-testing-ios-data-protection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:22:33.840

您的应用程序的文档文件夹是沙盒的，只能由您的应用程序使用。如果您要存储应用程序使用的资源，那么这里就是放置它们的地方。

# vb.net - 在 LINQ to SQL 中使用 GetTable().OrderBy() 的正确方法

> ID：13013047
> 
> 赞同：1
> 
> 时间：2012-10-22T13:59:00.810
> 
> 标签：vb.net, linq-to-sql

我是 LINQ 新手，正在尝试将 Linq to SQL 表绑定到多个控件（树视图、文本框等）。我希望能够更改文本框字段并将这些更新轻松保存回数据库。

我可以使用以下方法从数据库中获取数据：

```
 Private LinqDB As New DataContext(My.Settings.dbConnection)
    Property tblManufacturers As Table(Of dbManufacturers) _
        = LinqDB.GetTable(Of dbManufacturers)() 
```

将这些东西绑定到控件非常简单。TreeView 填充了所有制造商名称，当我单击一个时，它会填充 TextBoxes 进行编辑。
问题是结果不是我在树视图中想要的顺序。
我希望是这样的：

```
 Property tblManufacturers As Table(Of dbManufacturers) _
        = LinqDB.GetTable(Of dbManufacturers)().OrderBy("ManufacturerName") 
```

会工作，但可惜没有。

我知道我可以使用类似的东西

```
Dim ManufacturerQuery = From ManufacturerName In tblManufacturers Order By ManufacturerName 
```

但是将更改推回数据库似乎更加困难。

**编辑：**所以，显然我需要停止懦弱，只是尝试一些东西......

```
Namespace Controls
    Public Class ManufacturerWarranty

        Private LinqDB As New DataContext(My.Settings.dbConnection)
        Property tblManufacturers As Table(Of dbManufacturers) = LinqDB.GetTable(Of dbManufacturers)()
        Property ManufacturerQuery = From m In tblManufacturers Order By m.ManufacturerName

        Public Sub New()
            InitializeComponent()
        End Sub

        Private Sub ManufacturerWarranty_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles Me.Loaded
            Me.DataContext = Me
        End Sub

        Private Sub TreeView1_MouseDoubleClick(sender As System.Object, e As System.Windows.Input.MouseButtonEventArgs) Handles TreeView1.MouseDoubleClick
            StackPanel1.DataContext = e.OriginalSource.DataContext
        End Sub

        Private Sub cmdSave_Click(sender As Object, e As System.Windows.RoutedEventArgs) Handles cmdSave.Click
            LinqDB.SubmitChanges()
        End Sub
    End Class
End Namespace 
```

然后我只是将我的 TreeView 绑定到 ManufacturerQuery 而不是 tblManufacturers。我的保存按钮仍然适用于提交更改，即使它们是针对 ManufacturerQuery 而不是 tblManufacturers 进行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:11:41.557

好吧，也许你想要

```
Dim tblManufacturers As Table(Of dbManufacturers) _
    = LinqDB.GetTable(Of dbManufacturers)() _
        .OrderBy(Function(m) m.ManufacturerName) 
```

* * *

所以，承诺你会做

```
Using linqDB As New DataContext(My.Settings.dbConnection)
    Dim tblManufacturers As Table(Of dbManufacturers) _
        = linqDB.GetTable(Of dbManufacturers)()

    -- change tblManufacturers.

    linqDB.SaveChanges()
End Using 
```

我不会做的是在用户与 GUI 交互时保持上下文打开。同样，除非我将数据显示给用户，否则我（可能）不会订购数据。

# maven - 尝试使用 PrimeFaces 组件构建 Spring Webflow Travel Sample 并出现错误

> ID：13013054
> 
> 赞同：1
> 
> 时间：2012-10-22T13:59:17.337
> 
> 标签：maven, spring-mvc, primefaces, spring-webflow

我正在尝试使用 PrimeFaces 组件构建 Spring Webflow Travel Sample 并遇到错误..

以下是我正在采取的步骤：

```
svn co https://src.springframework.org/svn/spring-samples/webflow-primefaces-showcase
cd webflow-primefaces-showcase
mvn package 
```

以下是错误：

```
[ERROR] Failed to execute goal on project webflow-primefaces-showcase: Could not resolve dependencies for project org.springframework.samples:webflow-primefaces-showcase:war:1.0.0-BUILD-SNAPSHOT: Could not find artifact org.primefaces:primefaces:jar:2.2.M1-SNAPSHOT in org.springframework.maven.snapshot (http://maven.springframework.org/snapshot) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

这是 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springframework.samples</groupId>
    <artifactId>webflow-primefaces-showcase</artifactId>
    <name>JSF 2, Spring Web Flow, and PrimeFaces Showcase</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <properties>
        <java-version>1.5</java-version>
        <springframework-version>3.1.1.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.BUILD-SNAPSHOT</springwebflow-version>
        <springsecurity-version>3.0.3.RELEASE</springsecurity-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>

    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
            <scope>runtime</scope>
        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>
        <!-- PrimeFaces component library -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>2.2.M1-SNAPSHOT</version>
        </dependency>
        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>
        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>  
        <!-- For testing against latest Spring snapshots -->
        <repository>
            <id>org.springframework.maven.snapshot</id>
            <name>Spring Maven Snapshot Repository</name>
            <url>http://maven.springframework.org/snapshot</url>
            <releases><enabled>false</enabled></releases>
            <snapshots><enabled>true</enabled></snapshots>
        </repository>
        <!-- For developing against latest Spring milestones -->
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots><enabled>false</enabled></snapshots>
        </repository>
        <!-- For Hibernate Validator -->
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>         
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots><enabled>false</enabled></snapshots>         
        </repository>       
        <!-- For Sun Mojarra JSF 2 implementation -->
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <snapshots><enabled>false</enabled></snapshots>         
        </repository>
        <!-- For PrimeFaces JSF component library -->
        <repository>
            <id>prime-repo</id>
            <name>Prime Technology Maven Repository</name>
            <url>http://repository.prime.com.tr</url>
            <layout>default</layout>
        </repository>       
    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>false</downloadJavadocs>
                    <wtpversion>2.0</wtpversion>
                    <sourceExcludes>
                        <sourceExclude>**/.svn/**</sourceExclude>
                    </sourceExcludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <version>1.0-beta-1</version>
            </plugin>                       
        </plugins>
    </build>
</project> 
```

有人可以告诉我如何解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:29:05.510

添加此存储库

```
<repository>  
    <id>prime-repo</id>  
    <name>PrimeFaces Maven Repository</name>  
    <url>http://repository.primefaces.org</url>  
    <layout>default</layout>  
</repository> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:40:52.923

我必须将此更改添加到**pom.xml**以具有以下内容：

```
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.4.1</version>
</dependency> 
```

# c++ - Qt sscanf 等效

> ID：13013055
> 
> 赞同：7
> 
> 时间：2012-10-22T13:59:18.523
> 
> 标签：c++, qt

说我有这个：

```
QString mystring = "67 49 213 59";
int a, b, c, d; 
```

是否有 Qt 替代 sscanf 以便我可以将数字读入`int`变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:09:00.187

[`QTextStream`](http://qt-project.org/doc/qt-4.8/qtextstream.html)提供标准库的流的等价物。不要忘记文本流应该在字符串*之前被销毁。*

```
QString mystring = "67 49 213 59";
QTextStream myteststream(&mystring);
int a = 0, b = 0, c = 0, d = 0;
myteststream >> a >> b >> c >> d; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:05:11.700

```
int a, b, c, d;
QString s("67 49 213 59");
QTextStream(&s) >> a >> b >> c >> d; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:40:26.233

```
QString str("67 49 213 59");
QStringList list = str.split(" ");
int a[list.count];
for (int i = 0; i < list.count; i++)
   a[i] = list[i].toInt(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T17:29:05.177

你总是可以做

```
QByteArray oString = mystring.toAscii();
const char *pszString = oString.constData(); 
```

然后正常使用 sscanf() 。

# java - 通过字段的初始值获取注解

> ID：13013061
> 
> 赞同：0
> 
> 时间：2012-10-22T13:59:52.370
> 
> 标签：java, reflection, annotations

我有一个班级测试：

```
public class Test 
{
    @Anno1(Anno1Param = "bla1")
    @Anno2(Anno2Param = "bla1")
    public static final String TEST1 = "test1";

    @Anno1(Anno1Param = "bla2")
    @Anno2(Anno2Param = "bla2")
    @Anno3(Anno3Param = "bla2")
    public static final String TEST2 = "test2";

    @Anno3(Anno3Param = "bla3")
    public static final String TEST3 = "test3";

    @Anno1(Anno1Param = "bla4")
    public static final String TEST4 = "test4";
} 
```

现在，给定字段值，我想检索与之关联的注释。我现在唯一能做到的方法是：

```
 for (Field field : Test.class.getFields()) {
     if(field.get(this).equals("test4")) {
         Annotation a = field.getAnnotation(Anno1.class);
         ......
     }
 } 
```

java反射中有没有办法我可以做类似的事情：

```
getAnnotationByFieldValue("test4") 
```

这样给定字段值“test4”，而不遍历测试类中的所有字段并直接检索注释引用？

# java - 如何修改 servlet 中的字符串类型？

> ID：13013063
> 
> 赞同：0
> 
> 时间：2012-10-22T13:59:55.030
> 
> 标签：java, servlets

假设我有一个基于 java servlet 的 Web 应用程序，并且该应用程序读取文件系统上的文件。

现在这些文件在不断变化，所以有一个 VERSION 变量用于引用正确的子文件夹：

```
/app-files/version0001/.... 
```

如果修改了某些文件，则会创建一个新版本的子文件夹，并且 servlet 应该在此处查看：

```
/app-files/version0002/.... 
```

如何在我的 servlet 中创建此 VERSION 变量，使其全局可访问，并且当我需要修改它时，我可以以线程安全的方式？

该变量将被修改为我的 Internet 服务，该服务将发出 HTTP 请求，例如：

```
www.example.com/updateVersion?v=0003&secretKey=asdf23908234asdjf234 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:08:49.767

要解决这个问题，您可以通过多种方式来解决。

1 从您的 selvlet 创建一个应用程序变量。

```
ServletContext context = request.getSession().getServletContext();
context.setAttribute("myversionvariable", "version");//to set it
Object attribute = context.getAttribute("someValue");//to get it 
```

2 创建一个静态字符串数组来放置您的版本号，并为该变量创建并声明一个 get 和 set 方法。只要访问权限是公开的，您就可以在应用程序的任何位置更改此变量。前任。来自 JSP

```
<%@ page import="com.servlets.MyServlet" %>   
<% MyServlet.getMyServletVarible(); %> 
```

如果您需要使其线程安全，您可以仅通过一个同步方法 Ex 访问和更改此变量。

```
private static String myvarVersion;
private static final int  SET = 1;
public static synchronized String Operation (String value, int operation){
    if(operation == SET){
        myvarVersion = value;
        return "";
    } else{
        return myvarVersion;
    }
} 
```

*有可能使用原子组件、不同的同步方式等来做这样的我们。

我希望这有帮助。

# c# - 如何向 OnActionExecuting 添加参数？

> ID：13013064
> 
> 赞同：1
> 
> 时间：2012-10-22T13:59:57.120
> 
> 标签：c#, .net, vb.net, asp.net-mvc-3, visual-studio

我想在 OnActionExecuting() 过滤器的当前请求中添加参数我试过这个

```
filterContext.HttpContext.Request.Params.Add("mid", "amogh"); 
```

它给出的错误是`read only`.

我还想在下一个请求中访问这个添加的参数。我可以使用 filterContext.RequestContext.HttpContext.Request.UrlReferrer 对象访问这个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:03:00.940

我相信您可以使用该`ActionParameters`属性（请参阅**[ActionExecutingContext.ActionParameters](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionexecutingcontext.actionparameters%28v=vs.98%29.aspx)**） - 这允许您查看或更改将传递给操作方法的参数。

# jmeter - 如何处理jmeter中的错误代码302

> ID：13013065
> 
> 赞同：1
> 
> 时间：2012-10-22T14:00:17.670
> 
> 标签：jmeter

我有一个基于 https 协议的登录 Web 服务（基于 SOAP）。
尝试通过 jmeter 运行测试时，出现错误代码 302。这是由于当我通过浏览器访问相同的 Web 服务时观察到的证书问题。

如何通过 jmeter 处理该证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:59:47.293

首先，我要感谢建议使用 JMeter 代理服务器解决 302 错误的人。它对我有用。只需遵循一些建议和注意事项即可：

*   本分步指南将帮助您设置代理服务器：http: [//jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)
*   设置代理服务器后，您将必须提出正则表达式来匹配您的包含和排除 URL 模式。以下网站证明非常有用： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)
*   指南中提到了这一步，但我只是想在这里提一下，因为它很容易被忽视：当您开始录制导航时，请注意 ThreadGroup 下的 JMeter 的录制控制器。当您浏览页面时，相应的采样器应开始出现在其下方。如果没有创建采样器，那么您的包含 URL 模式很可能不会选择它们。

==================================================== =======================

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:56:43.107

尝试使用 jmeter 代理服务器记录请求并重试相同

# .net - 你如何起订一个生活在 App_GlobalResource 中的 .resx？

> ID：13013075
> 
> 赞同：9
> 
> 时间：2012-10-22T14:00:40.077
> 
> 标签：.net, asp.net-mvc-3, unit-testing, moq, app-globalresources

我正在为 MVC3 Web 项目中的控制器编写单元测试，但是当我的测试尝试访问这样的资源时会抛出异常：

```
return Index(Resources.Strings.MyStringResource); 
```

该资源是一个`.resx`名为`Strings`.

我正在使用[Moq](http://code.google.com/p/moq/)库来实现`HttpContextBase`功能的单元测试，所以我想知道如何使用 Moq 库来访问 App_GlobalResource。

任何帮助或指示将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:32:04.397

你不能，至少不能直接。从资源 (.resx) 文件生成的强类型类公开静态方法，而不是实例方法。

因此，它们不能实现接口方法，也不是虚拟的；[Moq](http://code.google.com/p/moq/)要求至少满足其中一个条件才能创建模拟。

为了解决这个问题，您将创建一个抽象，就像其他任何东西一样：

```
public interface IResources
{
    string MyStringResource { get; }
} 
```

您可以将它的实现传递（或注入）到您的控制器中，然后将其传递给您的`Index`方法。该实现可能如下所示：

```
public class ResourcesWrapper : IResources
{
    public string MyStringResource 
    { 
        get 
        { 
            return Resources.Strings.MyStringResource; 
        } 
    }
} 
```

然后，当您进行测试时，您可以使用 Moq 创建`IResources`接口的模拟，并将其传递给您的控制器，如下所示：

```
// Create the mock.
var mock = new Mock<IResources>();

// Setup the property.
mock.SetupProperty(m => m.MyStringResource, "My Mocked Value");

// Pass the object somewhere for use.
Assert.AreEqual(mock.Object.MyStringResource, "My Mocked Value"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T20:20:42.293

因此，在实施[casperOne](https://stackoverflow.com/users/50776/casperone)的答案后，我遇到了另一个错误：

我收到了一条`IOException`说明：

`"Could not load file or assembly 'App_GlobalResources' or one of its dependencies. The system cannot find the file specified.":"App_GlobalResources"`

**Scott Allen**提供了这个问题的[原因和内在解决方案](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)。

所以我所做的是在我的 web 项目中名为“TResources”的新文件夹中创建了一个新资源文件，命名为“TResources”纯粹是因为它是一个仅用于测试目的的资源文件夹（聪明，嗯？）

然后我将`ResourcesWrapper`类的属性更改为 return`TResources.Strings.MyStringResource`而不是`Resources.Strings.MyStringResource`.

**注意：**`IResources`接口中的属性**不能是只读的**，如设置mock对象时，如果属性是**只读的**，会因为无法设置值而失败。

因此，`IResources`应该看起来像这样：

```
public interface IResources
{
    string MyStringResource { get; set; }
} 
```

`ResourcesWrapper`然后应该`IResources`像这样实现：

```
public class ResourcesWrapper : IResources
{
    public string MyStringResource 
    { 
        get 
        { 
            return TResources.Strings.MyStringResource; 
        } 
        set
        {
            //do nothing
        }
    }
} 
```

这样您就可以在单元测试中成功模拟，如下所示：

```
var mock = new Mock<IResources>();
mock.SetupProperty(m => m.MyStringResource, ""); 
```

**注意：**您不必在`initialValue`上述方法的参数中指定任何内容，因为该属性将返回从`Strings.resx`.

我的问题到此结束，我希望这对互联网领域的其他人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T13:55:52.930

[Darin Dimitrov](https://stackoverflow.com/users/29407/darin-dimitrov)[对](https://stackoverflow.com/a/5402097/335545)类似[Stack Overflow 问题](https://stackoverflow.com/q/5398196/335545)的回答提供了一种更简单的方法。这完全是关于修改 Resources.resx 文件属性以支持单元测试。

# iphone - 试图调用 reverseGeocodeLocation，但程序不断跳过函数调用。有任何想法吗？

> ID：13013076
> 
> 赞同：1
> 
> 时间：2012-10-22T14:00:42.240
> 
> 标签：iphone, ios, geolocation, reverse-geocoding, mapquest

这是我的代码和我尝试调用 reverseGeocodeLocation 的完整上下文：

```
CLLocationCoordinate2D touchMapCoordinate = 
[self.mapView convertPoint:touchPoint toCoordinateFromView:self.mapView];

CLLocation *destination = [[CLLocation alloc] initWithLatitude:touchMapCoordinate.latitude longitude:touchMapCoordinate.longitude];

__block CLGeocoder *destinationPin = [[CLGeocoder alloc] init];
__block NSString *destinationPinName;

[destinationPin reverseGeocodeLocation:destination completionHandler:^(NSArray *placemarks, NSError *error) {
    if (error){
        NSLog(@"Geocode failed with error: %@", error);
        return;
    }
    if(placemarks && placemarks.count > 0)
    {
        CLPlacemark *topResult = [placemarks objectAtIndex:0];

        NSString *addressTxt = [NSString stringWithFormat:@"%@ %@,%@ %@",
                                [topResult subThoroughfare],[topResult thoroughfare],
                                [topResult locality], [topResult administrativeArea]];

        destinationPinName = [[NSString alloc] initWithString:addressTxt];
    }
}];

annotation = [[MQAnnotation alloc] initWithTitle:destinationPinName andCoordinate:touchMapCoordinate]; 
```

我在函数入口点、函数的两个 if 块内以及分配注释的函数之后设置了断点。当我到达 reverseGeocodeLocation 块时，destinationPin 具有有效值，但我的程序一直直接跳转到函数调用后设置的断点。任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:32:41.877

的执行`reverseGeocodeLocation`是异步完成的。当该后台任务完成时，将调用您的完成块。所以你看到的是正确的行为。调用`reverseGeocodeLocation`立即返回，早在它完成之前很久，在调用完成处理程序之前很久。您需要更新代码，以便在完成处理程序中创建注释。

# eclipse - 使用连接器发现在 Eclipse 中升级颠覆性连接器

> ID：13013084
> 
> 赞同：3
> 
> 时间：2012-10-22T14:01:23.073
> 
> 标签：eclipse, subversive

我可能是盲人，但我似乎无法在 Eclipse 中已设置的 Subversive 上调出 Subversive 连接器发现对话框。我需要从支持 1.6 的 SVNKit 升级到需要 1.7 的 SVNKit，但我就是找不到*添加*连接器的方法。谢谢！

PS：这是一个与 Eclipse Juno 相关的问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T15:01:42.863

如果发现无法正常工作，请使用带有[Juno Subversive 连接器更新站点](http://community.polarion.com/projects/subversive/download/eclipse/3.0/juno-site/)的普通更新管理器安装它们。

# .net - 将 MSI 包添加为 .net 项目中的资源

> ID：13013086
> 
> 赞同：0
> 
> 时间：2012-10-22T14:01:37.253
> 
> 标签：.net, installation, windows-installer, setup-project

有什么方法可以将 msi 设置文件作为资源添加到简单的 .net 项目中？或者我应该去找一个不同的安装程序来实现这一点？

# asp.net - 在后面的代码中从 asp.net 菜单控件中获取所选项目

> ID：13013088
> 
> 赞同：1
> 
> 时间：2012-10-22T14:01:40.250
> 
> 标签：asp.net, web-applications

在回帖中，我似乎无法从 MasterPage 的菜单控件中获取选定的菜单项。我在 page_load 中尝试了以下操作，但它不起作用，并且出现“对象引用未设置为对象实例”的错误。

母版页中的 Html

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
       IncludeStyleBlock="false" Orientation="Horizontal">
       <Items>
            <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home" />
           <asp:MenuItem NavigateUrl="~/About.aspx" Text="About" />
            <asp:MenuItem NavigateUrl="~/Contact.aspx" Text="Contact" />
       </Items>
</asp:Menu> 
```

母版页中的 Page_Load

```
 If IsPostBack Then
   Select Case NavigationMenu.SelectedItem.Text
        Case "Home"
            'code
        Case "About"
            'code
        Case "Contact"
            'code
   End Select
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:08:14.400

尝试将代码放入 page_load 中的 if (!IsPostBack) { //Code here }。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:04:03.623

您可以使用 MenuItemClick 事件。如果 NavigateUrl 属性为 null ""，则触发 click 事件，如果您有 "#" 或另一个页面的 url，则 click 事件不起作用。[参考文章](http://forums.asp.net/t/1672161.aspx/1)

```
 Protected Sub NavigationMenu_MenuItemClick(sender As Object, e As System.Web.UI.WebControls.MenuEventArgs) Handles NavigationMenu.MenuItemClick
    Select Case e.Item.Text
        Case "Home"
            'code
        Case "About"
            'code
        Case "Contact"
            'code
    End Select
  End Sub 
```

事件将触发...

```
<asp:MenuItem NavigateUrl="" Text="Home" /> 
```

事件不会触发...

```
<asp:MenuItem NavigateUrl="~/About.aspx" Text="About" /> 
```

注意：我最终使用了无序列表，而不是使用 Javascript 回发到服务器端事件。对于我的情况，asp.net MenuControl 不够灵活。

# .net - Ajax调用错误的方法

> ID：13013089
> 
> 赞同：1
> 
> 时间：2012-10-22T14:01:43.527
> 
> 标签：.net, ajax, asp.net-mvc-4

我的 ajax 在 .net mvc 4 中调用了错误的方法，我不知道为什么。

我的阿贾克斯：

```
function addItem(id, ammount) {
$.ajax({
    url: "/Shoppingcart/AddItem?id="+id+"&ammount="+ammount,
    type: "post",
    cache: false,
    success: function (result) {
        alert("SUCCESS!!!");
    },
    error: function (textStatus, errorThrown) {
        window.console.log(textStatus, errorThrown);
    }
});
} 
```

我的 mvc 控制器：

```
public class ShoppingcartController : Controller
{
    //
    // GET: /Shoppingcart/

    public ActionResult Index()
    {
        // Method 1
    }

    [HttpPost]
    public ActionResult AddItem(int id = -1, int ammount = 0)
    {
        return Redirect("~/Home");
    }
} 
```

我的第一个方法被 ajax 调用，这很奇怪，因为我调用 /Shoppingcart/AddItem 为什么会发生这种情况，我应该怎么做才能让它工作？

**解决方案：** 问题不在方法调用上，而在路由堆栈上。显然，定义路线的顺序会影响它们的重要性。最具体的路线应该始终是要声明的第一条路线。

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Index",
            url: "{controller}/{id}",
            defaults: new { controller = "Home", action = "Index" },
            constraints: new { id = @"\d+" }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "ControllerOnly",
            url: "{controller}",
            defaults: new { controller = "Home", action = "Index", id = 0 }
        );
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:26:55.003

问题在于您的路由，因为配置的**路由按顺序匹配。**

所以首先你应该把更具体的放在最后，然后放在更通用的。

您必须使用最通用的路线`url: "{controller}"`first 匹配 url`localhost:1862/Shoppingcart/AddItem?id=18&ammount=1`并使用 the`action = "Index"`而不是 action `AddItem`。

要修复它，请将您的路线顺序更改为：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Index",
    url: "{controller}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "ControllerOnly",
    url: "{controller}",
    defaults: new { controller = "Home", action = "Index", id = 0 }
); 
```

要正确制作类似路由的 url ，您需要使用约束 on而不是`/Product/18`更改您的路由，并且您需要**将其放在****路由之前：**`"Index"``id``UrlParameter.Optional`**`"Default"`**

```
routes.MapRoute(
    name: "Index",
    url: "{controller}/{id}",
    defaults: new { controller = "Home", action = "Index" },
    constraints: new {id = @"\d+"}
); 
```

# jquery - jquery 从表的第二行未定义，但在第一行工作

> ID：13013103
> 
> 赞同：0
> 
> 时间：2012-10-22T14:02:45.507
> 
> 标签：jquery, html, asp.net-mvc-3

我在表格中显示数据，在表格​​中我有一个链接。如果用户单击该链接，我的目标是打开一个 jquery 对话框，其中将包含要提交的表单。

问题是，如果我点击链接，从第二行向下，它说'jquery is undefined'，它没有找到jquery。但是，在第一行，如果我点击链接，它工作正常。

代码：

```
<script>
var linkObj;
$(function () {

    $('#ratingpopup').dialog({
        autoOpen: false,
        width: 450,
        resizable: false,
        modal: true,
        buttons: {
            "Send": function () {
                $("#edit-message").html(''); //make sure there is nothing on the message before we continue                         

                $("#updateRatingForm").submit();
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        },
        title:"Rating/Comment"
    });
    $("#rating").click(function () {
        linkObj = $(this);
        var dialogDiv = $('#ratingpopup');
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);

            var $form = $("#updateRatingForm");

            $form.unbind();

            dialogDiv.dialog('open');
        });
        return false;
    });

});
</script>

<div class="dataTable">
<table>

    <tr>
        <td>Ordernr.</td>
        <td>Dato</td>
        <td>Restaurant</td>
        <td>Address</td>
        <td>Delivery?</td>
        <td>Accepted?</td>
        <td colspan="3">Action</td>
    </tr>

    <%foreach (var i in Model)
  { %>
    <tr>
        <td><%:i.OrderNo %></td>
        <td>
        <%
        DateTime today = DateTime.Now;
        DateTime orderDate = Convert.ToDateTime(i.OrderDate);
        if (today.Date == orderDate.Date)
        {%>
        <b> i dag</b>
        <%}
        else
        { %>
        <%:i.OrderDate%>
        <%} %></td>
        <td><%:i.RestaurantInfo.Name %></td>
        <td><%:i.RestaurantInfo.Address %>, <%:i.RestaurantInfo.Postcode %></td>
        <td><%:i.IsForDelivery %></td>
        <td><%:i.IsAccepted %></td>

        <td><a href='<%:Url.Action("Add", "Rating", new { name = i.RestaurantInfo.Name     }) %>' id="rating">Rating</a></td> // this is the link
    </tr>
  <%} %>

</table>

</div>
<div id="ratingpopup"></div> 
```

这对我来说有点奇怪......有人知道这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:11:09.407

您在每一行上复制 ID，请改用一个类 - 默认情况下它仅使用第一行 ID，因为根据定义 ID 在页面上是唯一的。（或者应该是自 1999 年的 html 规范以来）

# jquery-ui - 如何选择切换功能的效果

> ID：13013104
> 
> 赞同：0
> 
> 时间：2012-10-22T14:02:52.517
> 
> 标签：jquery-ui, script#

在 Javascript 中，我可以执行以下操作来选择切换功能的效果：

```
$("#myDiv").toggle("blind", null, "fast"); 
```

如何在 Script# 中做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:42:52.537

Script# 具有 jQuery API 和 jQueryUI 的映射 - 请参阅[https://github.com/nikhilk/scriptsharp/tree/master/src/Libraries/jQuery/jQuery.Core](https://github.com/nikhilk/scriptsharp/tree/master/src/Libraries/jQuery/jQuery.Core)和[https://github.com/nikhilk/scriptsharp/树/master/src/Libraries/jQuery/jQuery.UI](https://github.com/nikhilk/scriptsharp/tree/master/src/Libraries/jQuery/jQuery.UI)。

可能这个类已经有你需要定义的内容： [https ://github.com/nikhilk/scriptsharp/blob/master/src/Libraries/jQuery/jQuery.UI/Effects/Effect/EffectObject.cs](https://github.com/nikhilk/scriptsharp/blob/master/src/Libraries/jQuery/jQuery.UI/Effects/Effect/EffectObject.cs)

如果缺少特定的签名，您应该考虑进行更改以便自己能够这样做，以及将其回馈给其他人以便改进。

# c# - 数据绑定列表框 Winforms

> ID：13013112
> 
> 赞同：0
> 
> 时间：2012-10-22T14:03:04.700
> 
> 标签：c#, winforms, data-binding, inotifypropertychanged

这将在其他许多关于数据绑定和实现 INotifyPropertyChanged 的​​线程中得到解答。但是，我仍然很难让它发挥作用。

基本上我有两个列表框，当用户从第一个列表框中选择服务器名称时，第二个应该提供该服务器上的数据库列表。很简单。但是，第二个列表框不显示更新的数据库列表。

这是代码：执行查询并将数据添加到 DatabaseList 属性的代码。

```
 private void selection_Server_SelectionChangeCommitted(object sender, EventArgs e)
    {
        server = (string)selection_Server.SelectedItem;
        try
        {
            ExecDBList(server, ref vm);
        } 
```

管理窗口上使用的属性的类。

```
 public class VM : INotifyPropertyChanged
{
    private static List<string> _dblist;
    public  List<string> DatabaseList
    {
        get
        {
            return _dblist;
        }
        set
        {
            if (_dblist != value)
            {
                _dblist = value;
            };
        }
    }
    public VM() { }

    void OnPropertyChanged(string PropertyName)
    {
            PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }

    public event PropertyChangedEventHandler PropertyChanged; 
```

分配列表框数据源的 MainWindow 初始化代码行

```
 selection_RDM.DataSource = vm.DatabaseList; 
```

由于我正在努力理解以前对数据绑定和使用 PropertyChangedEventHandler 的答案，因此任何有助于使其正常工作的帮助都将不胜感激。

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:15:35.583

`OnPropertyChanged();`像这样设置值后尝试添加`_dblist`：

```
public  List<string> DatabaseList
{
    get
    {
        return _dblist;
    }
    set
    {
        if (_dblist != value)
        {
            _dblist = value;
            OnPropertyChanged("DatabaseList");
        };
    }
} 
```

没有地方可以调用 notify，因此您的应用程序不会收到有关更改的通知

或更好

改变你`OnPropertyChanged(string name)`的私人无效`NotifyPropertyChanged([CallerMemberName] String propertyName = "")`

并在我向您展示的相同位置调用此方法而不使用该属性的名称

```
if (_dblist != value)
{
    _dblist = value;
    NotifyPropertyChanged();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:54:43.607

最近没有工作WinForms，但使用WPF，你试过吗

RaisePropertyChanged("DatabaseList");

这样，在您请求私有列表条目后，应该通知绑定到它的任何内容......嘿，您的源刚刚更新......也获得一个新的列表。

# c# - InitiateSystemShutdown 失败。错误代码 53

> ID：13013114
> 
> 赞同：1
> 
> 时间：2012-10-22T14:03:10.577
> 
> 标签：c#, system-shutdown

我正在尝试远程重启/关闭计算机。我尝试使用 AdvAPI32.dll 中的 InitiateSystemShutdown 函数，但它返回 false。`GetLastError()`显示错误代码 53 ( `ERROR_BAD_NETPATH`)。似乎我提供计算机名称的方式有问题：

```
InitiateSystemShutdown("http://192.168.10.11:16992", "", 60, true, true); 
```

我先调用了该`AdjustTokenPrivilege`方法，为了设置`SE_REMOTE_SHUTDOWN_NAME`权限，它成功了，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:12:07.830

它需要是计算机的名称，而不是任意的 http 地址。要获取您传递的名称，请打开命令提示符并键入`set`. 应该有一个名为 的变量`ComputerName`。尝试将其传递进去。

# jsf - 向丰富的工具提示添加关闭按钮

> ID：13013117
> 
> 赞同：0
> 
> 时间：2012-10-22T14:03:22.153
> 
> 标签：jsf, richfaces

是否有一种简单的方法可以将“关闭按钮”添加到丰富的工具提示中（以便在单击此类按钮之前它一直可见）？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T12:18:32.493

使用标签`hideEvent="none"`

```
<rich:toolTip name="tooltipTest" id="tooltipTest" hideEvent="none">
    <a4j:commandButton value="Close" onclick="#{rich:component('tooltipTest')}.hide(); return false;" />
</rich:toolTip> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:16:44.197

richfaces 提供了一个称为rich:popupPanel 的进一步组件来实现这一点。

```
<h:panelGrid onmouseover="#{rich:component('popup')}.show()">
    <h:outputText value="Open popup" />
</h:panelGrid>
<rich:popupPanel id="popup" modal="false" autosized="true" resizeable="false">
<f:facet name="controls">
    <h:outputLink value="#"
        onclick="#{rich:component('popup')}.hide(); return false;">X</h:outputLink>
</f:facet>
...
</rich:popupPanel> 
```

# facebook - 有没有办法向 Facebook API 发出许多请求而不会被阻止？

> ID：13013118
> 
> 赞同：0
> 
> 时间：2012-10-22T14:03:21.583
> 
> 标签：facebook, api, rate-limiting

我需要制作一个网络服务来集中许多 Facebook 帐户（数据、照片、朋友）的信息。问题是：它可以在短时间内收到很多请求。出于这个原因，我需要一种有效的方法来在几个请求中获取 facebook 的所有信息，否则我会被阻止。

我已经阅读了 FQL，我可以假设在同一查询中请求有关许多用户的信息。如果是真的，那就完美了。但我没有找到有关 FQL 限制的详细信息。所以我担心确认这个需求的可行性，指望 FQL 会解决我所有的问题。

这是解决问题的好方法吗？如果没有，可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:54:32.937

如果您有大量请求，我建议您从文档中阅读该页面：[https ://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

它提供了批量发出请求的所有现有可能性。

最好的，

# android - 基于 Android Fragment 的开源项目

> ID：13013119
> 
> 赞同：2
> 
> 时间：2012-10-22T14:03:25.073
> 
> 标签：android, android-fragments, android-activity, android-listfragment

我正在寻找一个使用片段活动的开源项目

我已经看到了很多片段示例，但还没有看到现实世界的实现，或者任何具有任何实用程序的片段活动的实现（除了明确的示例之外）

希望链接到任何存储库或使用片段的已知应用程序（甚至是您自己的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:38:41.983

[研究Google I/O 应用程序](http://code.google.com/p/iosched/source/checkout)可能是有意义的。因为它来自谷歌，它或多或少很简单，但涵盖了很多东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:24:27.017

有很多应用程序使用片段。事实上，为标签和智能手机提供安卓应用程序而不使用片段的开发人员并不真正了解安卓。

我在 Github 上有一个非常小的项目，它使用 Fragment： [https](https://github.com/StephaneC/SouthPark-Soundbox) ://github.com/StephaneC/SouthPark-Soundbox 我认为你可以找到更好的（这个应用程序的开发已经停止），但这可能是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:27:40.533

它比较老，是在我上大学时完成的，但你可以看看我的简单的 android 应用程序，它使用 2 个片段来支持手机和平板电脑布局。

[www.github.com/zerkz](http://www.github.com/zerkz)

免责声明：我的代码中有一些不好的做法。例如，所有 DB 调用都在 UI 线程上执行，因为它们的速度非常快，这无关紧要。我访问片段的方式也不是常态。这段时间我拿了 18 个学分，所以我没有时间完善它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:20:31.527

这是您可以查看的顶级开源应用程序之一。它也被用于平板电脑等大屏幕设备。

> [阿斯特丽德](https://github.com/todoroo/astrid)

# sql - 使用 .NET 将单个记录写入 MS SQL 2008 服务器的最有效方法是什么？

> ID：13013126
> 
> 赞同：0
> 
> 时间：2012-10-22T14:03:39.803
> 
> 标签：sql, sql-server, sql-server-2008, optimization

我正在编写一个命令行工具（在 Windows 7 机器上运行），它将单个记录插入到表中，然后退出。我正在使用 C# (.NET 4.5) 和 SQL Server 2008。

数据记录包含一个大（最多 6000 字节）字符串、一个时间戳和一个自增整数 ID 主键。该表没有附加外键。

此外，由于这是该数据库最常见的使用场景，我想对其进行优化。我如何设置数据库有什么技巧可以帮助减少单个插入时间吗？

[编辑] 我目前正在使用的代码......

```
SqlConnection con = new SqlConnection(ConnectionString);
con.Open();
SqlTransaction trans = con.BeginTransaction();

SqlCommand cmd = new SqlCommand("INSERT INTO [msglog](message,project,username,computername,updated_at) VALUES (@m,@p,@u,@c,@i,@t)", con, trans);
cmd.Parameters.AddWithValue("@u", Username);
cmd.Parameters.AddWithValue("@c", Computername);
cmd.Parameters.AddWithValue("@m", msg);
cmd.Parameters.AddWithValue("@p", ProjectName);
cmd.Parameters.AddWithValue("@t", DateTime.Now);
cmd.ExecuteNonQuery();
trans.Commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:38:49.700

在您的代码示例中，我怀疑大部分时间都花在建立与 SQL Server 的连接上。我会推荐：

*   尝试重用连接/应用程序的单个实例。您的问题表明应用程序打开，插入一条记录，然后退出。这需要不断地为单个语句重新建立新连接，更不用说启动应用程序本身的开销了。
*   删除您的交易（单个语句不需要）。
*   不要费心尝试为您的语句构建单个字符串。您应该使用参数，并且使用参数可能会更快。SQL Server 更有可能缓存相同查询的执行计划（参数值不断变化）。
*   快速插入表格（RedFilter 在这里有一些很好的建议）。我要补充一点，理想情况下，您会通过递增键对表进行聚类，以便插入始终位于表的一端。

可能还有其他微优化，但真正解决我上面的第一个问题会给你带来最显着的加速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T15:41:36.877

我的建议是创建一个连接到数据库的 Windows 服务。您的应用程序将向服务发送消息，该服务反过来将异步发送数据库更新。其他答案显示了 SQL 方面提高性能的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:07:40.217

尽可能在要插入的表格中消除这些：

*   常规索引
*   全文索引
*   触发器
*   持久化计算列

还要确保没有使用此表的索引视图。

# c# - 数据包含逗号时从 Gridview 导出为 CSV

> ID：13013129
> 
> 赞同：1
> 
> 时间：2012-10-22T14:03:47.580
> 
> 标签：c#, csv, datagridview

我正在尝试导出到 CSV，但是我面临的问题是网格视图中包含的数据包含逗号。由于使用“，”作为分隔符，这会导致 csv 中出现各种问题。下面是代码。有什么想法可以避免这种情况吗？

```
 try
        {
            System.IO.StreamWriter csvFileWriter = new StreamWriter(CsvFpath, false);

            string columnHeaderText = "";

            int countColumn = dataGridViewLogging.ColumnCount - 1;

            if (countColumn >= 0)
            {
                columnHeaderText = dataGridViewLogging.Columns[0].HeaderText;
            }

            for (int i = 1; i <= countColumn; i++)
            {
                columnHeaderText = columnHeaderText + ',' + dataGridViewLogging.Columns[i].HeaderText;
            }

            csvFileWriter.WriteLine(columnHeaderText);

            foreach (DataGridViewRow dataRowObject in dataGridViewLogging.Rows)
            {
                if (!dataRowObject.IsNewRow)
                {
                    string dataFromGrid = "";

                    dataFromGrid = dataRowObject.Cells[0].Value.ToString();

                    for (int i = 1; i <= countColumn; i++)
                    {
                        dataFromGrid = dataFromGrid + ',' + dataRowObject.Cells[i].Value.ToString();

                        csvFileWriter.WriteLine(dataFromGrid);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:07:03.463

您可以使用任何库导出为 CSV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:33:05.603

使用转义字符，并使用了解如何处理转义的解析器。你可以快速编写一个 Escape() 扩展和一个 Unescape() 扩展......

```
public static class ExtentionClass
{
    public static string Escape(this string str)
    {
          return str.Replace("\\","\\\\").Replace(",","\\,");
    }
    public static string Unescape(this string str)
    {
          return str.Replace("\\\\","\\").Replace("\\,",",");
    }
} 
```

现在您可以将您的线路更改为...

```
dataFromGrid = dataFromGrid + ',' + dataRowObject.Cells[i].Value.ToString().Escape(); 
```

但是，您可能想在 Excel 中查看输出，然后 \ 不起作用...它需要双引号。

```
...
    public static string Escape(this string str)
    {
        return "\"" + str.Replace("\"","\"\"") + "\"";
    } 
```

您可以在... [CSV for Excel，包括前导零和逗号](https://stackoverflow.com/questions/308324/csv-for-excel-including-both-leading-zeros-and-commas)

# c# - SqlCeCommand 异常

> ID：13013130
> 
> 赞同：0
> 
> 时间：2012-10-22T14:03:58.177
> 
> 标签：c#, sql

我有这个代码：

```
SqlCeConnection connection = new SqlCeConnection(conString);
connection.Open();
connection.CreateCommand();
cmd.CommandText = "CREATE TABLE Settings (id int IDENTITY PRIMARY KEY, host nvarchar(50), port int, rk_host nvarchar(50), rk_port int, stationcode int, guesttypecode int)";
cmd.ExecuteNonQuery();
cmd = connection.CreateCommand();
cmd.CommandText = "INSERT INTO Settings ([host], [port], [rk_host], [rk_port], [stationcode], [guesttypecode]) VALUES ('" + Settings.host + "', '" + Settings.rk_host + "', '" + Settings.rk_port + "', '" + Settings.port + "', '" + Settings.stationcode + "', '" + Settings.guesttypecode + "')";
cmd.ExecuteNonQuery();
connection.Close(); 
```

在第二个`ExecuteNonQuery`我有一个例外：`"Data conversion failed. [ OLE DB status value (if known) = 2 ]"`

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:09:12.937

在 Int 类型列上，您应该从查询中删除单引号

```
cmd.CommandText = "INSERT INTO Settings ([host], [port], [rk_host], [rk_port], [stationcode], [guesttypecode]) VALUES ('" + Settings.host + "', '" + Settings.rk_host + "', " + Settings.rk_port + ", '" + Settings.port + "', " + Settings.stationcode + ", " + Settings.guesttypecode + ")"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:10:22.120

第一个建议是永远不要这样写你的查询，因为这会导致[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)。其次，您正在阅读您的设置并将它们插入您的表格而不考虑它们的类型。您需要进行类型转换（例如`int.Parse(Settings.port)`

# ios5 - MagicalRecord iCloud 备份

> ID：13013133
> 
> 赞同：3
> 
> 时间：2012-10-22T14:04:13.077
> 
> 标签：ios5, core-data, icloud, xcode4.5, magicalrecord

我使用 MagicalRecord 进行数据存储（CoreData）。我想用于数据备份 iCloud，但我不知道如何使用 MagicalRecord 读取数据并将数据写入 iCloud。有人知道如何通过 MagicalRecord 使用 iCloud 备份吗？任何帮助都会很有用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:29:13.740

我发现这个博客系列非常有助于弄清楚如何使用 Core Data 为 iCloud 设置项目：http: [//mentalfaculty.tumblr.com/post/23163747823/under-the-sheets-with-icloud-and-core-数据基础](http://mentalfaculty.tumblr.com/post/23163747823/under-the-sheets-with-icloud-and-core-data-the-basics)

然后，您在 AppDelegate 的 didFinishLaunchingWithOptions 中设置 MagicalRecord 以使用 iCloud Core Data 存储和此行：

```
[MagicalRecord setupCoreDataStackWithiCloudContainer:@"xxxxxxxxxx.com.companyname.appname" localStoreNamed:@"local_data_store_name"]; 
```

将 xxxxxxxx 替换为 iTunes Connect 中的 App ID，将 companyname 替换为您的 iTunes Connect 公司名称，并将 appname 替换为您的应用程序名称。local_data_store_name 可以是任何你想要的。

此外，请确保下载并安装您将创建的新配置文件以匹配您的 App ID。Xcode 对我来说并没有自动完成。我还必须将我的设备更新到当前最新的操作系统更新，以便 iCloud 能够正常工作以进行测试。

# android - 如何将计时器时间与android中的文本视图进行比较？

> ID：13013135
> 
> 赞同：0
> 
> 时间：2012-10-22T14:04:23.713
> 
> 标签：android

我在一个应用程序中使用计时器来计算时间，它有三个按钮开始、暂停、重置。一旦点击开始按钮，那么只有暂停按钮应该被启用以进行点击并且开始按钮应该失去它的点击功能，直到用户按下暂停或重置button.How to compare the chronometer time with a fixed time in an text view in android 谁能在这个困境中为我提供合适的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:26:07.470

`long`通常这是通过在代表特定时刻的两个值之间进行简单的减法来完成的。

您使用[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)该类的实例在实际时间（由[`Date`](http://developer.android.com/reference/java/util/Date.html)对象表示）和文本表示（如`12:32`. 例子

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
Date start = sdf.parse(text.getText().toString());
Date end   = sdf.parse(chronometer.getText().toString());
long difference = end.getTime() - start.getTime(); 
```

`onClick(View)`关于侦听器部分，您可以删除侦听器或在回调开始时检查一些标志。如果合适，您可能希望使用某种自定义样式强制启用/禁用状态，并且`setEnabled(boolean)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:21:10.110

那是你要找的吗？chronometer.getText().toString().equals(yourTextView.getText()) 如果不是，请解释你的问题

# r - 无法使用神经网络图生成 PDF

> ID：13013136
> 
> 赞同：3
> 
> 时间：2012-10-22T13:20:13.083
> 
> 标签：r, plot, neural-network

我正在尝试创建神经网络图的硬拷贝图像，但它一直失败。如果我尝试创建 PNG，则不会生成任何内容，如果我尝试生成 PDF，我会得到一个拒绝打开的小文件输出，并出现“文件可能已损坏”错误。如果我只是让它显示在图形窗口中，图像就会很好。

我在 Macports 构建的 OS X (10.7.4) 上使用 2.15.1。我目前正在使用的代码：

```
library(ALL)
library(neuralnet)
data(ALL)

ALL.pdat <- pData(ALL)
bt <- factor(substring(ALL.pdat$BT,1,1))
all.sds <- apply(exprs(ALL),1,sd)
top.10.sds <- rank(all.sds)>length(all.sds)-10
exprs.top.10 <- as.data.frame(t(exprs(ALL)[top.10.sds,]))
nn.data <- cbind(exprs.top.10, as.numeric(bt))
##  Gene names start with a number, and that causes problems when trying to set up the
##  formula for neuralnet.
col.names <- paste("g", colnames(nn.data), sep = '')
col.names[11] <- "bt"
colnames(nn.data) <- col.names
my.nn <- neuralnet(bt ~ g36108_at + g36638_at + g37006_at + g38096_f_at + g38319_at + g38355_at + g38514_at + g38585_at + g39318_at + g41214_at, nn.data,  hidden = 10, threshold = 0.01)
summary(my.nn)
pdf("./nn-all.pdf")
plot.nn(my.nn)
dev.off()
png("./nn-all.png")
plot.nn(my.nn)
dev.off() 
```

我什至重新启动了机器以确保清除所有内存，但这没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:40:04.657

简单的可重现示例：

```
pdf("test.pdf")
 set.seed(42)
 plot(runif(20),rnorm(20))
 png("test.png")
  set.seed(42)
  plot(runif(20),rnorm(20))
 dev.off() 
```

如果我尝试在德语 Windows 7 上使用 Adob​​e Reader 打开 PDF，我会收到一条信息丰富的错误消息，告诉我无法打开该文件，因为该文件正在被另一个应用程序使用。这可以很容易地解决：

```
pdf("test.pdf")
 set.seed(42)
 plot(runif(20),rnorm(20))
dev.off() #make sure to close the graphics device
png("test.png")
 set.seed(42)
 plot(runif(20),rnorm(20))
dev.off() 
```

# 编辑：

问题是`plot.nn`。在软件包得到修补之前，您需要`plot.nn`手动重新定义，如[this answer](https://stackoverflow.com/a/11881985/1412059)所示。

# firefox - Firefox 上跨模块的对象持久性

> ID：13013138
> 
> 赞同：1
> 
> 时间：2012-10-22T14:04:28.860
> 
> 标签：firefox, firefox-addon, requirejs, firefox-addon-sdk, commonjs

我开发了一个在 Firefox 的 Addon SDK (v1.10) 上运行的扩展。我现在正在尝试模块化更多存储在后台页面中的代码（默认称为“main.js”）。

**问题**

有没有办法创建一个未冻结的 SDK 模块？我需要创建一个包含数据的模块，该数据应该保留在自身中，并且当该模块“required()”（加载）到另一个模块时可以从其他模块访问。

到目前为止，我通过使用 Firefox 的首选项或本地存储来跨模块保存我需要的对象的状态来实现这一点。但是，我觉得这种方法是一种“hack”方法，应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:41:39.197

如果您创建简单的 CommonJS 模块，则模块导出的任何数据都是可变和可共享的。例如，查看这个基本示例：

[https://github.com/canuckistani/jp-shared-data-module](https://github.com/canuckistani/jp-shared-data-module)

# .net - 将持久性数据与易失性数据混合

> ID：13013141
> 
> 赞同：1
> 
> 时间：2012-10-22T14:04:49.880
> 
> 标签：.net, nhibernate, orm, persistent

我有一个由 SQL 服务器数据库支持的 .Net 服务器应用程序。我正在使用 nHibernate (fluent) 来处理所有数据库操作。我面临着严重的性能和并发问题，这显然是因为我不是一般的 nHibernate 和 ORM 专家（甚至不是专家）。

我有一些需要存储在数据库中的数据和一些不需要的数据。例如，我有**`members class`**（显然需要在数据库中持久化），我也有**`logged-in-members class`**（它只保存运行时数据，不需要持久化）。也许我的例子不是最好的，但我认为它说明了我的情况。登录成员对象将具有成员类型的属性，以便两个类之间存在连接。

**有什么方法可以避免持久化某些类，但仍然能够拥有一个完整的图形，由持久性和“内存中”对象组成？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:29:42.353

我不确定对象图的样子，但为什么不让会话弄清楚发生了什么变化？

```
void DoSomethingWithMembers()
{
    // if session which loaded the members is not open anymore
    foreach (var member in loggedInMembers.Select(loggedInMember => loggedInMember.Member))
    {
        session.Lock(member, LockMode.None); // reattach to session
    }
    // end if

    // make changes to the (loggedIn)members

    session.Flush(); // will persist any changes to a member
} 
```

更新：作为对评论的回应，类似这样

```
public AuthenticationResult Authenticate(string username, string password)
{
    if (loggedInUsers.ContainsKey(username))
        return AuthenticationResult.AlreadyLoggedIn;

    using (var session = OpenSession())
    {
        var member = session.Query<Member>().Where(m => m.Name == username).FirstOrDefault();
    }

    if (member == null)
        return AuthenticationResult.NoUser;

    if (member.Password != password)
        return AuthenticationResult.WrongPassword;

    loggedInUsers.Add(username, new LoggedInMember(DateTime.Now, member));

    var dto = mapper.Map<Member, MemberDto>(member);
    return new AuthenticationResult(dto);
}

public void Update(ICollection<MemberDto> dtos)
{
    using (var session = OpenSession())
    {
        foreach (var dto in dtos)
        {
            Update(session, dto);
        }
        session.Flush();
    }
}

void Update(ISession session, MemberDto dto)
{
    LoggedInMember liMember;
    if (!loggedInUsers.TryGetValue(dto.Name, out liMember)
        throw new AuthException("not logged in")

    session.Lock(li.Member, LockMode.None); // attach

    mapper.Map<Member, MemberDto>(li.Member, dto);
} 
```

# html - 如果不是子元素，纯CSS可以在悬停时更改其他元素吗？

> ID：13013142
> 
> 赞同：4
> 
> 时间：2012-10-22T14:04:59.420
> 
> 标签：html, css

css 是否包括更改`hover`. 因为我有点为简单的任务而苦苦挣扎。对于这个例子，我想`form`在你悬停时出现`<a> tag`。

```
<a id="log" href="#">text</a>
      <form id="form" action="" method="post">
            <input type="text" name="id"/>
            <input type="submit" name="submit"/>  
      </form> 
```

CSS应该看起来像这样：

```
#form{
    opacity:0;
}
#log:hover ~ #form {
    opacity: 1;
} 
```

或者：

```
#log:hover + #form {
    opacity: 1;
} 
```

这真的让我发疯：/有什么建议可以让它发挥作用吗？如果有其他方法，我不想使用 javaScript。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:23:25.940

```
#form {
  display: none;
}

#log:hover ~ #form {
  display:block;
}

#form:hover {
  display:block;
} 
```

当您停止悬停链接时，您需要`#form:hover`使表单不会消失，但如果您使用的是触摸设备，这将不起作用。`#log:active ~ #form`可以联系，目前无法确认。

例如：http: [//jsbin.com/etuxab/1/edit](http://jsbin.com/etuxab/1/edit)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:20:39.917

写成——

```
#form{
    opacity:0;
    filter:alpha(opacity=0); /*For IE8*/
}

#log:hover ~ #form {
    opacity: 1;
    filter:alpha(opacity=100); /*For IE8*/
} 
```

[**工作演示**](http://jsfiddle.net/NUBkp/2/)

# wordpress - 将我自己的功能与 wordpress s2members 插件集成

> ID：13013147
> 
> 赞同：1
> 
> 时间：2012-10-22T14:05:12.103
> 
> 标签：wordpress, paypal

我想知道 s2members 插件钩子是否可以帮助我解决我的问题。下面是我的要求。

我想销售例如说电子书。当用户购买这本电子书（或页面访问）时，我想在我的插件中运行一些自定义功能。所以我认为贝宝操作挂钩会帮助我。我试过一些钩子，比如

```
add_action("ws_plugin__s2member_after_paypal_return", "my_function"); 
```

（当然必须使用带有 s2-hacks.php 文件名的插件方向）但无法使其工作。

您能否建议我一些好的过滤器/操作挂钩，以便在用户成功支付电子书时我可以运行我自己的功能（即使用户没有从贝宝重定向回网站并且通过 IPN 收到付款通知？）。

还有一个问题，这些钩子是如何工作的？我的意思是在前端或后端有 IPN 响应？我只是在问，因为我正在通过打印一些东西来测试钩子，但前端页面上没有打印任何东西。

# html - 在隐藏的 div 中彼此相邻显示 2 个表单按钮

> ID：13013148
> 
> 赞同：3
> 
> 时间：2012-10-22T14:05:18.380
> 
> 标签：html, css

我希望有 2 个按钮，用于在单击时执行 2 个不同操作的表单，它们彼此相邻显示

这在以下链接中得到了最好的解释：

[http://jsfiddle.net/pfeHA/1/](http://jsfiddle.net/pfeHA/1/)

涉及的代码是：

```
<div id="question" style="display:none; margin:0px;">
<form action="DoAction1" method="get">
<input type="submit"  value="Action1">
</form>
<form method="post" action="DoAction2">
<INPUT TYPE="submit" value="Action2">
</form>
</div> 
```

这会导致按钮显示在彼此下方，如链接所示：http: [//jsfiddle.net/pfeHA/1/](http://jsfiddle.net/pfeHA/1/)

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:08:33.387

在你的 CSS 中添加这个 -

```
form{ display: inline-block; } 
```

[**工作小提琴**](http://jsfiddle.net/pfeHA/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:10:40.687

添加：

```
.formWithButtons{display: inline;} 
```

对于每个持有按钮的表格[http://jsfiddle.net/calder12/pfeHA/9/](http://jsfiddle.net/calder12/pfeHA/9/)

# algorithm - 将一个数平均分为 12 个整数

> ID：13013150
> 
> 赞同：0
> 
> 时间：2012-10-22T14:05:24.693
> 
> 标签：algorithm

我想将整数 N（即工作日数）除以 12 个月，因此如果我选择 2、3、4、5、6 个月的任何时间段，则工作日仍会尽可能均等地划分在那个时期。讲师说我必须使用某种四舍五入算法，但是我什么都想不到。任何算法建议或链接都​​会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:09:51.573

您需要选择一个数字`k`，以便其中一些月份包含`k`工作日，而其他月份则包含`k+1`. 在不拆分工作日的情况下，这是尽可能接近平等分配的方式。其中的月数`k+1`等于 N 模 12（`N % 12`在许多编程语言中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:13:15.223

您从每月至少需要工作多少天开始：

```
days = floor(N / 12) 
```

（其中 floor(...) 表示向下舍入。）

然后你有一些剩余：

```
remainder = N % 12 
```

（其中 % 表示模数）

请注意，余数肯定小于 12，因为我们使用了模

因此，将这些剩余的日子分布在 12 个月内，随心所欲。

（**请注意**，这种方法可以推广到任意月份，只需替换我们上面使用 12 的月份数）

# sql - 使用 CLOB 属性在 Oracle 中获取重复记录

> ID：13013156
> 
> 赞同：1
> 
> 时间：2012-10-22T14:05:40.780
> 
> 标签：sql, oracle, oracle-sqldeveloper

每当我使用以下语句查询时，我的 Oracle SQL Developer IDE 中都会出现重复记录：

```
SELECT currency.currency_story.story_id, 
       currency.currency_story.datetimestamp,
       currency.currency_story.headline, 
       currency.currency_story_body.body
FROM 
       currency.currency_story INNER JOIN 
       currency.currency_story_body ON 
       currency.currency_story.story_id = currency.currency_story_body.story_id
WHERE 
       currency.currency_story.datetimestamp > '18-Oct-12' AND  
       SUBSTR(currency.currency_story.story_id,10,4) > '1825' 
ORDER BY 
       currency.currency_story.datetimestamp ASC 
```

因此，在为两个表（currency_story 和 currency_story_body）运行底部语句后，我得到了 0 行：

```
 select currency.currency_story_body.story_id
    from currency.currency_story_body 
    group by currency.currency_story_body.story_id
    having count(*) > 1 
```

我也为currency_story 表做了同样的事情，我得到了0 行。现在我知道每个表中都没有重复记录。所以我猜我的 JOIN 是**错误**的？但我没有看到它的缺陷？

这是我的执行计划：

![执行计划](../Images/dd5f73e61895ec35ba726faedf5ec130.png)

My`currency.currency_story_body.body`是 a`CLOB`并且**story_id**不是**主**键。我应该在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:16:22.510

如果您在 currency_story_body 中有两条记录，它们都具有相同的 story_id，这会导致重复。

除了在连接中，您没有在任何地方使用 currency_story_body，因此您可以尝试：

```
SELECT currency.currency_story.story_id, 
   currency.currency_story.datetimestamp,
   currency.currency_story.headline, 
   currency.currency_story.body
FROM 
   currency.currency_story
WHERE 
   currency.currency_story.datetimestamp > '18-Oct-12' AND  
   SUBSTR(currency.currency_story.story_id,10,4) > '1825' 
ORDER BY 
   currency.currency_story.datetimestamp ASC 
```

# java - 如何使用 Look-Ahead 和 Look-Behind 创建自定义边界匹配器？

> ID：13013159
> 
> 赞同：0
> 
> 时间：2012-10-22T14:05:44.540
> 
> 标签：java, regex, lookahead, lookbehind

我想使用[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)在单词边界处拆分字符串。通常，这将是这样完成的：

```
Scanner scanner = new Scanner(...).useDelimiter("\\b"); 
```

问题是我对“单词”字符的定义与标准略有不同，`[a-zA-Z_0-9]`因为我想包含更多字符并排除`_`: `[a-zA-Z0-9#/]`。因此，我不能使用该`\b`模式。

所以我尝试使用前瞻和后视来做同样的事情，但我想出的并没有奏效：

```
(<?=[A-Za-z0-9#/])(?![A-Za-z0-9#/])|(<?![A-Za-z0-9#/])(?=[A-Za-z0-9#/]) 
```

扫描仪不会使用它在任何地方分割。

是否可以使用前瞻和后视以及如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:11:56.277

你的语法有错误。首先`?`出现：

```
(?<=[A-Za-z0-9#/])(?![A-Za-z0-9#/])|(?<![A-Za-z0-9#/])(?=[A-Za-z0-9#/])
 ^^                                  ^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:17:13.687

```
new Scanner(...).useDelimiter(
  "(?<=[a-zA-Z0-9#/])(?=[^a-zA-Z0-9#/])|(?<=[^a-zA-Z0-9#/])(?=[a-zA-Z0-9#/])"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:10:50.590

出什么问题了：

```
[^A-Za-z0-9#/]+ 
```

换句话说，集合中至少有一个字符不是您的单词集的任何运行

或者如果你需要空间

```
[^A-Za-z0-9#/ ]+ 
```

然后在扫描仪之后剥离空间进行特殊处理（如果需要）

# extjs4.1 - 如何获取网格的当前状态，即排序、分组、列添加、删除

> ID：13013160
> 
> 赞同：0
> 
> 时间：2012-10-22T14:05:46.173
> 
> 标签：extjs4.1

我正在使用 Extjs 4.1

我想知道，用户完成任何操作后，我将如何获得网格的当前状态。

即在 Grid 得到渲染后.. 用户可以对任何列进行排序、添加或删除，或者他也可以移动列

我想知道我将如何知道，如果用户做了任何更改，即排序等..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:49:44.583

```
listeners: {
    selectionchange: function(model, records) {
        alert("selectionchange")
    }, sortchange: function(model, records) {
        alert("sortchange");
    }, columnhide: function( ct, column, eOpts ) {
        alert("columnhide");
    }, columnshow: function( ct, column, eOpts ) {
        alert("columnshow");
    }, columnmove: function( ct, column, eOpts ) {
        alert("columnmove");
    }                               
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:05:50.693

看起来没有为排序定义任何事件，因此您需要扩展存储，并为此覆盖排序方法。不过，对于这些列，它们有一个 beforeshow 和 beforehide 方法，您可以设置监听器来跟踪。

* * *

```
//Define something like this
Ext.define('Ext.ux.data.Store', {
    extend: 'Ext.data.Store',

    sort: function () {
        //Fire Event to notify of change
        this.fireEvent('beforesort', this, this.sorters);

        //Call parent sort function
        this.callParent(arguments);
    }
});

//Then use it like so
Ext.define('MyApp.stores.StoreName', {
    fields:[....],
    proxy: {...},
});

var store = Ext.create('MyApp.stores.StoreName');

store.on('beforesort', trackSorting);

//Tracking function
function trackSorting(store, sorters) {
    //store or use them however you want here
}

//And create a grid
var grid = Ext.create('Ext.grid.Pane', {
    title: 'Test',
    columns: [...],
    store: store
});

//And listen to the columns show/hide events
for (var i = 0, l = grid.columns.length; i < l; i++) {
    grid.columns[i].on({
        beforeshow: beforeShowColumn,
        beforehide: beforeHideColumn
    })
}

//Column tracking information
function beforeShowColumn(column, eOpts) {
    //Note that it's gone somewhere
}
function beforeHideColumn(column, eOpts) {
    //Note that it's back somewhere
} 
```

# android - 检测三星耳机Android中的按钮按下

> ID：13013166
> 
> 赞同：3
> 
> 时间：2012-10-22T14:06:10.067
> 
> 标签：android, broadcast, headset

我正在尝试检测（通过 BroadcastReciever）对原始三星耳机按钮的硬按。

代码很简单：

```
public class MediaButtonIntentReceiver extends BroadcastReceiver {

public MediaButtonIntentReceiver() {
    super();
}

@Override
public void onReceive(Context context, Intent intent) {
    String intentAction = intent.getAction();
    Toast.makeText(context, "Action: "+intentAction, Toast.LENGTH_SHORT).show(); 
    if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
        return;
    }
    Toast.makeText(context, "BUTTON PRESSED!", Toast.LENGTH_SHORT).show(); 
    KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
    if (event == null) {
        return;
    }
    int action = event.getAction();
    if (action == KeyEvent.ACTION_DOWN) {
    // do something
        Toast.makeText(context, "BUTTON PRESSED!", Toast.LENGTH_SHORT).show(); 
    }
    abortBroadcast();
} 
```

显现：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".MediaButtonIntentReceiver" >
        <intent-filter android:priority="100000000000000" >
            <action android:name="android.intent.action.MEDIA_BUTTON" />
        </intent-filter>
    </receiver>
</application> 
```

我已经在galaxy s1（2个有根设备，什么都没有发生）和galaxy NOTE（媒体已启动/停止并且音量已相应更改，但代码中没有发生任何事情..）中对其进行了测试，在HTC中一切正常。我 99% 确定这不是优先级问题，因为我多次更改它。

如果有人知道那里发生了什么，我将不胜感激。谢谢。乌迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T08:02:04.553

您还需要在[AudioManager上调用](http://developer.android.com/reference/android/media/AudioManager.html)[registerMediaButtonEventReceiver](http://developer.android.com/reference/android/media/AudioManager.html#registerMediaButtonEventReceiver%28android.app.PendingIntent%29)以接收事件。该状态将一直保持到其他调用 registerMediaButtonEventReceiver() 或调用[unregisterMediaButtonEventReceiver](http://developer.android.com/reference/android/media/AudioManager.html#unregisterMediaButtonEventReceiver%28android.content.ComponentName%29) () 为止。

例如，这样的活动：

```
public class MediaButtonActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ((AudioManager)getSystemService(AUDIO_SERVICE)).registerMediaButtonEventReceiver(new ComponentName(
                                                                                                   this,
                                                                                                   MediaButtonIntentReceiver.class));
    }
} 
```

将使您的清单注册的 MediaButtonIntentReceiver 能够获取 ACTION_MEDIA_BUTTON 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T23:33:47.040

尝试关闭 S-Voice 并再次运行您的应用程序。

# flash - Adobe Flash Builder 移动点击/触摸事件

> ID：13013167
> 
> 赞同：0
> 
> 时间：2012-10-22T14:06:13.530
> 
> 标签：flash, events, mobile, click, builder

问题：s:Label 上的点击和触摸事件性能不佳。

我使用最新的 air 版本和 Flash Builder 4.6 来开发一个移动应用程序。

这是代码：

```
<s:Group horizontalCenter="10" top="200">
    <s:VGroup>
        <s:VGroup id="wortundtafelstriche">
            <s:HGroup id="wortalign" >
                <s:Label id="wort1" visible="false" textAlign="center" width="43" color="0xffffff"  />
                <s:Label id="wort2" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort3" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort4" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort5" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort6" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort7" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort8" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort9" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort10" visible="false" width="30" color="0xffffff"  />
                <s:Label id="wort11" visible="false" width="30" color="0xffffff"  />
            </s:HGroup>
            <s:HGroup id="tafelalign">
                <s:Image id="img"/>
            </s:HGroup>
        </s:VGroup>

        <s:Spacer height="10" width="100%" />
        <s:VGroup>
            <s:HGroup>
                <s:Label text="A" id="txt1" color="0xffffff"  width="60" height="40" click="makeunvisible(txt1),check(txt1.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="B" id="txt2" color="0xffffff"  width="60" height="40" click="makeunvisible(txt2),check(txt2.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="C" id="txt3" color="0xffffff"  width="60" height="40" click="makeunvisible(txt3),check(txt3.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="D" id="txt4" color="0xffffff"  width="60" height="40" click="makeunvisible(txt4),check(txt4.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="E" id="txt5" color="0xffffff"  width="60" height="40" click="makeunvisible(txt5),check(txt5.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="F" id="txt6" color="0xffffff"  width="60" height="40" click="makeunvisible(txt6),check(txt6.text)" />
            </s:HGroup>
            <s:Spacer height="15" width="100%" />
            <s:HGroup>
                <s:Label text="G" id="txt7" color="0xffffff"  width="60" height="40" click="makeunvisible(txt7),check(txt7.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="H" id="txt8" color="0xffffff"  width="60" height="40" click="makeunvisible(txt8),check(txt8.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="I" id="txt9" color="0xffffff"  width="60" height="40" click="makeunvisible(txt9),check(txt9.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="J" id="txt10" color="0xffffff"  width="60" height="40" click="makeunvisible(txt10),check(txt10.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="K" id="txt11" color="0xffffff"  width="60" height="40" click="makeunvisible(txt11),check(txt11.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="L" id="txt12" color="0xffffff"  width="60" height="40" click="makeunvisible(txt12),check(txt12.text)" />
            </s:HGroup>
            <s:Spacer height="15" width="100%" />
            <s:HGroup>
                <s:Label text="M" id="txt13" color="0xffffff"  width="60" height="40" click="makeunvisible(txt13),check(txt13.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="N" id="txt14" color="0xffffff"  width="60" height="40" click="makeunvisible(txt14),check(txt14.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="O" id="txt15" color="0xffffff"  width="60" height="40" click="makeunvisible(txt15),check(txt15.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="P" id="txt16" color="0xffffff"  width="60" height="40" click="makeunvisible(txt16),check(txt16.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="Q" id="txt17" color="0xffffff"  width="60" height="40" click="makeunvisible(txt17),check(txt17.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="R" id="txt18" color="0xffffff"  width="60" height="40" click="makeunvisible(txt18),check(txt18.text)" />
            </s:HGroup>
            <s:Spacer height="15" width="100%" />
            <s:HGroup>
                <s:Label text="S" id="txt19" color="0xffffff"  width="60" height="40" click="makeunvisible(txt19),check(txt19.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="T" id="txt20" color="0xffffff"  width="60" height="40" click="makeunvisible(txt20),check(txt20.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="U" id="txt21" color="0xffffff"  width="60" height="40" click="makeunvisible(txt21),check(txt21.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="V" id="txt22" color="0xffffff"  width="60" height="40" click="makeunvisible(txt22),check(txt22.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="W" id="txt23" color="0xffffff"  width="60" height="40" click="makeunvisible(txt23),check(txt23.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="X" id="txt24" color="0xffffff"  width="60" height="40" click="makeunvisible(txt24),check(txt24.text)" />
            </s:HGroup>
            <s:Spacer height="15" width="100%" />
            <s:HGroup>
                <s:Label text="Y" id="txt25" color="0xffffff"  width="60" height="40" click="makeunvisible(txt25),check(txt25.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="Z" id="txt26" color="0xffffff"  width="60" height="40" click="makeunvisible(txt26),check(txt26.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="Ä" id="txt27" color="0xffffff"  width="60" height="40" click="makeunvisible(txt27),check(txt27.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="Ö" id="txt28" color="0xffffff"  width="60" height="40" click="makeunvisible(txt28),check(txt28.text)" />
                <s:Spacer height="5" width="100%" />
                <s:Label text="Ü" id="txt29" color="0xffffff"  width="60" height="40" click="makeunvisible(txt29),check(txt29.text)" />
            </s:HGroup>

        </s:VGroup>

    </s:VGroup>
</s:Group> 
```

点击事件的作用：

```
 protected function makeunvisible(obj:Object):void
        {
            obj.visible = false;
        } 
```

这很简单。

如果有人点击一个字母（s:Label），该字母应该是不可见的。

令人沮丧的事实是，当我单击一个字母时，并不总是调用 make invisible 方法。

有时我必须点击十次才能调用该方法。

我也尝试了触摸事件，但没有更好的结果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:06:37.710

在 Flex 框架中，与第一个触摸事件一起发送一个鼠标事件，并且只使用鼠标事件。与 Flash 世界中的大多数按钮一样，您的文本可能没有背景，因此它们只能使用非常细的实际字体轮廓来*捕捉鼠标。*

尝试将标签添加到容器中或设置它们的背景颜色。

PS它是不可见的**而**不是不可见的。

# android - 碎片问题

> ID：13013175
> 
> 赞同：2
> 
> 时间：2012-10-22T14:06:36.240
> 
> 标签：android, android-fragments, android-viewpager

我真的需要了解片段问题。

我只想将我的活动放入一个片段或将相同的功能放入一个片段中。

可能吗？

我有 ViewPager 和片段。我想在 viewpager 的片段中显示一个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:20:00.860

我认为你以错误的方式处理问题。

*   片段与活动不相似。
*   片段是`equivalent`您认为的“”。
*   FragmentActivity 显示`XML`为`setContentView`. 这`xml`将包含一个或多个片段。
*   每个 Fragment 将负责 UI 的一部分`ActionBar` 或任何您想要的。

所以第一件事是创建一个片段来创建你的视图。 `Copy/paste`您的代码`UI`在新片段中与此（文本框，onclick ...）相关。然后，将您的片段添加到您的`main XMl`. 它会正常工作。

此外，因为`viewpager`你可以在网上找到很多教程，但你必须了解活动和片段之间的区别。

希望能帮助到你。

# c# - 在 web.config 上注册一个控件程序集

> ID：13013177
> 
> 赞同：3
> 
> 时间：2012-10-22T14:06:56.070
> 
> 标签：c#, asp.net, web-config, ckeditor, .net-assembly

我在我的项目中使用 CKEditor，但我试图让它工作而不需要在我使用它的每个页面中声明程序集。

我声明的程序集是这个：

```
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %> 
```

按照[本网站](http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config.aspx)上的说明，我在 web.config 中进行了以下更改

```
 <system.web>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <controls>
        <add tagPrefix="CKEditor" assembly="CKEditor.NET"/>
      </controls>
    </pages>
  </system.web> 
```

但我不断收到此错误

> **解析器错误消息：**在 tagPrefix 条目中发现无效或缺少的属性。对于用户控制，您还必须指定“tagName”和“src”。对于自定义控件，您还必须指定“命名空间”和可选的“程序集”

我不确定我做错了什么。也许是一件愚蠢的事情，不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:09:23.650

您需要指定命名空间。

> ... 对于自定义控件，您还必须指定“命名空间”和可选的“程序集”。

```
 <system.web>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <controls>
        <add tagPrefix="CKEditor" assembly="CKEditor.NET" namespace="CKEditor"/>
      </controls>
    </pages>
  </system.web> 
```

当然，假设命名空间是 CKEditor。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:09:58.983

例子

```
 <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

请注意，与您缺少命名空间以及版本（如果适用）相比，您的错误状态是您需要指定命名空间和程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:10:49.110

您不需要在 Web.Config 中注册它。按照官方网站的说明：

[CKEditor 文档](http://docs.cksource.com/)

这是 CKEditor 设置中的视频：

[如何在您的网站上安装 CK Editor（FCK 编辑器）](http://www.youtube.com/watch?v=SU6YWME914A)

安装它的最简单方法是使用[**Nuget**](http://nuget.org/packages/CKEditor)。

# mysql - Rails 3：为 HABTM 关系编写 Joins 语句

> ID：13013186
> 
> 赞同：1
> 
> 时间：2012-10-22T14:07:37.083
> 
> 标签：mysql, ruby-on-rails-3

我在 :users 和 :books 之间有 has_and_belongs_to_many 关系。它们由 :owned_books 模型加入。我的应用程序的一项功能是连接阅读过相同书籍的用户。目前，我在模型中的处理效率低下：

```
 users_hash = Hash.new
  users = User.all
  users.each do |user|
    if user != current_user
      users_hash[user.id] = 0
      user.books.each do |book|
        if current_user.books.include?(book)
          users_hash[user.id]+=1
        end
      end
    end
  end
  users_hash = users_hash.sort {|a,b| b[1]<=>a[1]}
  @users = Array.new
  users_hash[0..max].each do |id|
    user = User.find(id[0])
    @users << user
  end
end 
```

我相信有一种方法可以让数据库完成这项工作。我一直在玩弄一个如下所示的 MySQL 查询：

```
@users = User.select("users.*, COUNT(books) AS shared_books").joins("LEFT JOIN books ON ???").order("shared_books DESC").limit(100) 
```

我的目的是加入 current_user 已阅读的书籍，然后统计所有其他用户，以查看他们已阅读的书籍数量。然后，我将按此计数对结果进行排序，并限制为前 100 个结果。

不幸的是，我的 MySQL 技能还达不到标准。特别是，我不确定如何为连接模型编写条件。我也怀疑 select 语句是否会起作用，尽管一旦我有一个可靠的 join 语句，我可能会弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:30:28.973

如果您正确地构建数据，您通常可以在一次操作中获取您想要的内容。在您的情况下，您可能需要将其稍微调整为以下结构：

```
class User < ActiveRecord::Base
  has_many :owned_books
  has_many :books,
    :through => :owned_books
end

class OwnedBook
  belongs_to :user
  belongs_to :book
end

class Book
  has_many :owned_books,
    :as => :owned_by
  has_many :users,
    :through => :owned_by
end 
```

与该方法相比，使用较新`has_many :through`的方法有许多优点`has_and_belongs_to_many`，主要是因为实现是最新的，而且还因为使用关联的方式区分了连接模型中存在的数据和正在连接的模型。管理关联也容易得多，因为每个 OwnedBook 实际上都是一流的模型，可以使用`id`.

在这种情况下，要获取具有普通书籍的用户，请尝试以下操作：

```
User.where('id IN (SELECT DISTINCT user_id FROM owned_books WHERE book_id IN (SELECT book_id FROM owned_books WHERE user_id=?))', @user.id)).all 
```

这有点冗长，因为它将避免重复用户。如果您只是从普通书籍中获取用户，您可能会为每个用户获得多个匹配项。这就是将`DISTINCT`条件添加到查询中的原因。

# objective-c - UIViewControllerHierarchyInconsistency 错误 - 应用程序不断崩溃

> ID：13013190
> 
> 赞同：0
> 
> 时间：2012-10-22T14:07:48.580
> 
> 标签：objective-c, xcode

> 2012-04-18 12:58:07.108 MYiPad[12574:c07] 由于未捕获的异常 UIViewControllerHierarchyInconsistency 导致应用程序终止，原因：一个视图一次最多只能与一个视图控制器关联！视图 < UITableView: 0xb0eae00; 帧 = (0 0; 320 960); clipsToBounds = YES; 自动调整大小 = W+H；手势识别器 = < NSArray: 0xac460e0>; 层=<CALayer：0xac46830>；contentOffset: {-0, -20}> 与 < RootViewController: 0xac20f20 > 相关联。在将此视图与 关联之前清除此关联。
> 
> First throw call stack: (0x1b57012 0x153ce7e 0x1b56deb 0x4cf309 0x5665ac 0x562a90 0x6b0232 0x4e257 0x21e3f 0x184a8c 0x19c417d 0x1836d2 0xc4c2 0x1aae59 0x1a8f22 0x1aa16a 0x1a8edd 0x1a9055 0xf6338 0x1e64a81 0x1e63d33 0x1ea1e3a 0x1af98fd 0x1ea24bc 0x1ea2435 0x1d8c3a0 0x1adaf3f 0x1ada96f 0x1afd734 0x1afcf44 0x1afce1b 0x24917e3 0x2491668 0x48165c 0x2c8d 0x2bc5 0x1) libc++abi.dylib : 终止调用抛出异常

*- (void)viewDidLoad {

```
[self.tableView initWithFrame:self.tableView.frame style:UITableViewStyleGrouped];
self.tableView.contentInset = UIEdgeInsetsMake(20.0,0.0,0.0,0.0);
self.appDelegate = (FCDBiPadAppDelegate *)[[UIApplication sharedApplication] delegate];
[self.tableView setBackgroundView:nil];
[self.tableView setBackgroundView:[[[UIView alloc] init] autorelease]];
[self.tableView setBackgroundColor:[UIColor colorWithRed:217 green:220 blue:225 alpha:0.9]];
unsigned int b;
NSScanner *scanner = [[NSScanner alloc] initWithString:[[[Engine sharedInstance] properties] objectForKey:@"NAVBAR_COL"]];
[scanner scanHexInt:&b];
[scanner release];  
self.navigationController.navigationBar.tintColor=[UIColor blackColor];
//self.navigationController.navigationBar.tintColor=UIColorFromRGB(b);
views = [[NSMutableArray alloc] init];  
NSMutableArray *innerArray =[[NSMutableArray alloc] init];
[innerArray addObject:@"Login"];

txnlist = [[NSMutableArray alloc] init];
[txnlist addObject:@"RRLGN00"];
NSMutableDictionary *menu1Dict = [NSMutableDictionary dictionaryWithObject:innerArray forKey:@"MENU"];
[menu1Dict setObject:txnlist forKey:@"MENUKEY"];
[views addObject:menu1Dict];
Engine *myEngine = [Engine sharedInstance];

**[myEngine setTableview:self.tableView];**
[myEngine settableData:self.views];

[super viewDidLoad];
self.clearsSelectionOnViewWillAppear = NO;
self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
self.navigationItem.hidesBackButton = TRUE; 
```

}*

我不断收到此错误，我无法弄清楚我做错了什么。我的笔尖文件，我正在使用拆分视图控制器。处理菜单的根视图控制器和处理细节的细节视图控制器（显然）。当我注释掉这一行时 **[myEngine setTableview:self.tableView];** 该应用程序将运行，我不会得到 UIViewControllerHierarchyInconsistency 错误但是菜单不会加载，因为我正在评论它。有人请帮助我，我需要这个尽快，我的生活取决于它。再次感谢。

已编辑----

*- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
[[Engine sharedInstance] setmenu_curr:@"RRLGN00"]; [[Engine sharedInstance] setProperties:[[NSMutableDictionary alloc]initWithDictionary:[NSMutableDictionary dictionaryWithContentsOfFile:[[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"app.plist"]]]];

```
[[[Engine sharedInstance] properties] setObject:NSLocalizedString(@"FCDB_LANGID", nil) forKey:@"idLang"];

[[Engine sharedInstance] setUrl:[[[[Engine sharedInstance] properties] objectForKey:@"ENTITY_URL"] objectAtIndex:0]];
splashController = [[SplashViewController alloc]initWithNibName:@"SplashViewController" bundle:[NSBundle mainBundle]];
splashController.delegate=self;
[self.window addSubview:splashController.view];
[self.window makeKeyAndVisible];

return YES; 
```

} - (void)hideSplash{ [splashController.view removeFromSuperview];

```
self.splitViewController =[[UISplitViewController alloc]init];
self.rootViewController=[[RootViewController alloc]init];
self.detailViewController=[[DetailViewController alloc]init];
UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootViewController];
UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:detailViewController];
//detailNav.navigationBarHidden=YES;
self.splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailViewController,nil];
self.splitViewController.delegate=detailViewController;
[window addSubview:self.splitViewController.view];
[self.window makeKeyAndVisible]; 
```

}*

我听到你在说什么，但我认为我做了一些非常简单的错误，或者一些简单的调整。上面的代码来自我的应用程序委托。

我检查了这个网站[http://www.iriphon.com/2012/03/31/uncaught-exception-uiviewcontrollerhierarchyinconsistency-reason-child-view-controller-should-have-parent-view-controller-but-actual-parent -is-or-apples-new-uiviewcontroller-hierarc/](http://www.iriphon.com/2012/03/31/uncaught-exception-uiviewcontrollerhierarchyinconsistency-reason-child-view-controller-should-have-parent-view-controller-but-actual-parent-is-or-apples-new-uiviewcontroller-hierarc/)

我认为这可能与我在做什么有关。我可能错了，如果我错了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:33:49.763

错误告诉你你需要知道的一切。视图只能属于最初创建它的视图控制器。

我猜那`Engine`是 的子类`UIViewController`，或者`Engine`包含视图控制器。在该`-setTableview:`方法中，我猜测您以某种方式将表视图添加到该视图控制器。

注意：如果您确实需要此表视图成为 的一部分`Engine`，则需要完全切断与 的连接`RootViewController`。在实践中，我从未见过这样做过。

PS`[super viewDidLoad]`应该是您调用的第一件事`-viewDidLoad`。

* * *

**更新代码的注释**

*注意：我不认为这会解决你的问题，但它是设置窗口的正确方法。*

不要使用`[self.window addSubview:splashController.view]`和`[window addSubview:self.splitViewController.view]`。相反，它应该是`self.window. rootViewController = splashController`and `self.window.rootViewController = self.splitViewController`。

# ssh - Git服务器主机authorized_keys文件未识别用户id_rsa.pub密钥询问服务器密码

> ID：13013192
> 
> 赞同：5
> 
> 时间：2012-10-22T14:07:52.433
> 
> 标签：ssh

我们的 git 服务器 authorized_keys 文件在它工作正常之前没有识别任何人的 id_rsa.pub 密钥，过去 6 个月从未遇到过这个问题。即使在新的回购中，所有回购也有同样的问题。

## 我做的事情：

1）检查 git 主机服务器 .ssh/authorized_key 文件，权限看起来不错（有 600 个权限）。2）备份 .ssh 文件夹，重新生成新的并创建新的 authorized_key 文件也添加了新的 id_rsa.pub 密钥，即使是同样的问题。

请帮助我，所有用户都无法拉/推/克隆甚至我。

## 我发现唯一的问题我不知道这是否是一个问题

当我`ls -lart authorized_keys *`在 git 服务器上执行命令时，它显示了两个 authorized_keys 文件

## 输出：

```
[git@xxxxx .ssh]$ ls -lart authorized_keys *

-rw------- 1 git git 404 Oct 22 17:59 authorized_keys
-rw------- 1 git git 404 Oct 22 17:59 authorized_keys 
```

问候， sankarbheema

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T10:48:37.640

你在评论中说：

```
[git@xxxx home]$ ls -ld ~git ~git/.ssh
drwxrwxr-x 28 git git 4096 Oct 22 18:22 /home/git
drwx------  2 git git 4096 Oct 23 09:39 /home/git/.ssh 
```

虽然这是 git 的 .ssh 目录可接受的权限，但 SSH 拒绝接受连接，因为 git 的主目录是组可写的。SSH 意识到组可写性意味着其他用户可能能够对 ~/.ssh 进行更改，因此它拒绝信任其中的文件。

告诉您这一点的日志的位置取决于您的操作系统。在我的系统 (FreeBSD) 上，要查看的文件是`/var/log/auth.log`，其中包含如下行：

```
Oct 23 06:45:25 pc sshd[29724]: Authentication refused: bad ownership or modes for directory /usr/home/ghoti 
```

要解决此问题，请更改删除组写入位。

```
sudo chmod 755 ~git 
```

哦，`ls -lart authorized_keys *`显示两个 authorized_keys 文件的原因是您指定了该文件两次 - 一次明确指定，一次作为通配符 ( `*`) 的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:50:56.850

感谢所有帖子，已解决，问题是 IT 人员更改了服务器子网掩码地址并且出现了问题，一旦恢复就可以了

# validation - cakephp savemany 验证

> ID：13013197
> 
> 赞同：1
> 
> 时间：2012-10-22T14:08:08.267
> 
> 标签：validation, cakephp, save, cakephp-2.1

我有有效值和无效值的数组，我想用 saveMany 方法保存有效值，但如果此方法验证数组中的所有值，它的工作并保存我的数据，否则它不起作用！

我的数组：

```
array(
    (int) 0 => array(
        'product_id' => '3',
        'factor_id' => '2',
    ),
    (int) 1 => array(
        'product_id' => '1',
        'factor_id' => '2',
    )
) 
```

我的代码：

```
$this->Basket->saveMany($newBasket);
//or
$this->Basket->saveMany($newBasket,array('validate' => true)); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:51:56.717

我的回答是：

> $this->ModelName->saveMany($data,array('validate'=>'only','atomic'=>false));

谢谢大家

# c# - httpwebrequest 空代理设置

> ID：13013210
> 
> 赞同：1
> 
> 时间：2012-10-22T14:09:11.670
> 
> 标签：c#, proxy, httpwebrequest

我正在开发一个程序，它必须在不同的网络上工作。我的代理设置有问题。当我在内网将代理设置为空时，

```
WebRequest.DefaultWebProxy = null; 
```

httpwebrequest 没有响应；但是，当我在互联网上工作时，我需要将其设置为 null。

我已经解决了我正在发出请求的这个问题，如果没有响应，我将代理设置为空。但是这个解决方案会出问题，必须有更好的解决方案。你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:15:55.467

我通常做的是获取系统上用户设置的默认凭据：

```
svc.Proxy = WebRequest.GetSystemWebProxy();
if (svc.Proxy != null)
  svc.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

# ruby-on-rails - 您已经激活了构建器

> ID：13013212
> 
> 赞同：0
> 
> 时间：2012-10-22T14:09:18.313
> 
> 标签：ruby-on-rails, passenger, gemfile

加载我的 Rails 应用程序时收到以下错误消息：

`You have already activated builder 3.0.4, but your Gemfile requires builder 3.0.3\. Consider using bundle exec.`

堆栈跟踪：

```
0   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler/runtime.rb    31  in `block in setup'
1   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler/spec_set.rb   12  in `block in each'
2   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler/spec_set.rb   12  in `each'
3   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler/spec_set.rb   12  in `each'
4   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler/runtime.rb    17  in `setup'
5   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/bundler-1.0.10/lib/bundler.rb    107 in `setup'
6   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb  326 in `prepare_app_process'
7   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb  176 in `block in initialize_server'
8   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb  563 in `report_app_init_status'
9   /usr/local/ruby/1.9.2/lib/ruby/gems/1.9.1/gems/passenger-3.0.17/lib/phusion_passenger/classic_rails/application_spawner.rb  174 in `initialize_server' 
```

似乎已`passenger`激活`3.0.4`，但我的应用程序 Gemfile 仍然具有`3.0.3`. 我可以添加`gem 'builder', '3.0.4'`我的 Gemfile，但当新版本出现时它会再次发生。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:10:51.710

这通常发生在使用 RVM 时，或者只是相对于系统默认值的单独版本的 ruby​​。

配置 RVM 以向乘客提供您用于开发的相同 ruby​​（以及 bundler 安装您的 gems 的位置）。

[https://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:55:45.030

我不确定这种优雅的方式是否我正在使用 binstub。
跑：

```
bundle install --binstubs
export PATH=./bin:$PATH 
```

您可以在[http://blog.davidchelimsky.net/2011/07/18/stop-typing-bundle-exec/阅读更多内容](http://blog.davidchelimsky.net/2011/07/18/stop-typing-bundle-exec/)

# c++ - 内存已满时文件读取失败

> ID：13013216
> 
> 赞同：-2
> 
> 时间：2012-10-22T14:09:36.153
> 
> 标签：c++, c, linux, file-io

我的文件 A.txt 位于特定目录中，并且该目录的大小动态增加，因为一些日志文件保存在那里。每次我打开并读取这个文件，但问题是当内存已满时我无法打开和读取文件

在这里我不能增加内存的大小。有人可以通过提供更好的想法来提供帮助吗

很抱歉问这个笼统的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:12:33.217

如果整个文件无法放入内存，请不要将整个文件吞入内存；一次处理一行。或者获取更多内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:27:28.690

将您的日志文件分成几部分。在分层组织的文件系统中保存*单独的文件，并系统地命名它们。*因此，如果您之前一天只有一个文件，

> log121022.txt

说，

而是创建一个文件夹`log120122`并在其中存储

> log12102201.txt、log12102202.txt等

现在您正在为一天中的每个小时创建一个单独的文件。同样的原则适用于将几周或几个月分成几天等。然后在您的程序中读取和写入您需要的较小文件。要遍历所有这些，您需要编写一个循环，而在您只是打开文件之前，但是这个额外的代码并不是很复杂，而且很明显，花一点时间编写它比不断耗尽内存要好得多。

# arrays - CodeIgniter 解析多维数组

> ID：13013219
> 
> 赞同：1
> 
> 时间：2012-10-22T14:09:49.100
> 
> 标签：arrays, codeigniter, parsing, multidimensional-array, foreach

在这个[http://codeigniter.com/user_guide/libraries/parser.html](http://codeigniter.com/user_guide/libraries/parser.html)教程中，我们有这个多维数组

```
$data = array(
          'blog_title'   => 'My Blog Title',
          'blog_heading' => 'My Blog Heading',
          'blog_entries' => array(
                                  array('title' => 'Title 1', 'body' => 'Body 1'),
                                  array('title' => 'Title 2', 'body' => 'Body 2'),
                                  array('title' => 'Title 3', 'body' => 'Body 3'),
                                  array('title' => 'Title 4', 'body' => 'Body 4'),
                                  array('title' => 'Title 5', 'body' => 'Body 5')
                                  )
        ); 
```

我们像这样轻松打印他

```
{blog_entries}
    <h5>{title}</h5>
    <p>{body}</p>
{/blog_entries} 
```

但是如何输出这样的数组[http://i.imgur.com/L6i1B.png](https://i.imgur.com/L6i1B.png) :?

```
 $data = array( 
array(
    'user' => array('id' => "1", 'name' => "Test1"
    ),'title' => 'Title 1', 'body' => 'Body 1'),
array(
    'user' => array('id' => "2", 'name' => "Test2"
    ),'title' => 'Title 2', 'body' => 'Body 2'),
array(
    'user' => array('id' => "3", 'name' => "Test3"
    ),'title' => 'Title 3', 'body' => 'Body 3')
); 
```

如果我们尝试做这样的事情

```
{blog_entries}
    {user}
        {id}
    {/user}
    {title}
    {body}
    <br />
{/blog_entries} 
```

我们会有错误：

```
Message: Invalid argument supplied for foreach() 
```

啊，在这里找到了类似的问题[Extended Template Parser: CodeIgniter... Issue with Nested Arrays](https://stackoverflow.com/questions/6619523/extended-template-parser-codeigniter-issue-with-nested-arrays)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:26:12.770

此功能包含在内置模板类中。（我不知道您第一次发布问题时它是否存在，但它现在就在那里，我自己使用它。）诀窍在于创建正确的数组结构以传递给解析器。我刚才在一个实时页面中测试了这个例子，在 CI 2.1.3 中 100% 工作。

作为一个具体的例子，考虑这个代码，它显示（以最小的格式）酒店的一系列可用房间，并显示每个房间每天的旅行价格。（在本例中为 2 天。）

```
{available_rooms}
    <p>{room_type} {total_rate}</p>
    {room_rates}
        <p>${room_rate} {room_date}</p>
    {/room_rates}
    <hr>
{/available_rooms} 
```

输出类似于：

```
1 King Bed 119.98
 59.99 2013-03-23
 59.99 2013-03-24

1 King Bed 119.98
 59.99 2013-03-23
 59.99 2013-03-24

2 Double Beds 139.98
 69.99 2013-03-23
 69.99 2013-03-24

2 Double Beds 139.98
 69.99 2013-03-23
 69.99 2013-03-24 
```

这是我在本例中成功使用的数组。

```
> available_rooms > 0 > room_type = 1 King Bed 
> available_rooms > 0 > total_rate = 119.98 
> available_rooms > 0 > room_rates > 0 > room_rate = 59.99 
> available_rooms > 0 > room_rates > 0 > room_date = 2013-03-23 
> available_rooms > 0 > room_rates > 1 > room_rate = 59.99 
> available_rooms > 0 > room_rates > 1 > room_date = 2013-03-24 
> available_rooms > 1 > room_type = 1 King Bed 
> available_rooms > 1 > total_rate = 119.98 
> available_rooms > 1 > room_rates > 0 > room_rate = 59.99 
> available_rooms > 1 > room_rates > 0 > room_date = 2013-03-23 
> available_rooms > 1 > room_rates > 1 > room_rate = 59.99 
> available_rooms > 1 > room_rates > 1 > room_date = 2013-03-24 
> available_rooms > 2 > room_type = 2 Double Beds 
> available_rooms > 2 > total_rate = 139.98 
> available_rooms > 2 > room_rates > 0 > room_rate = 69.99 
> available_rooms > 2 > room_rates > 0 > room_date = 2013-03-23 
> available_rooms > 2 > room_rates > 1 > room_rate = 69.99 
> available_rooms > 2 > room_rates > 1 > room_date = 2013-03-24 
> available_rooms > 3 > room_type = 2 Double Beds 
> available_rooms > 3 > total_rate = 139.98 
> available_rooms > 3 > room_rates > 0 > room_rate = 69.99 
> available_rooms > 3 > room_rates > 0 > room_date = 2013-03-23 
> available_rooms > 3 > room_rates > 1 > room_rate = 69.99 
> available_rooms > 3 > room_rates > 1 > room_date = 2013-03-24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:55:33.023

设置你的阵列更像这样

```
$data = array( 'user' => array('id' => "1", 'name' => "Test1", 'title' => 'Title 1', 'body' => 'Body 1'),
                         array('id' => "2", 'name' => "Test2", 'title' => 'Title 2', 'body' => 'Body 2'),
                         array('id' => "3", 'name' => "Test3", 'title' => 'Title 3', 'body' => 'Body 3')
); 
```

在那之后，它有点像嵌套 HTML 标签，除了 PHP 中的键-> 值对（如果有意义的话）。

```
{user}
    <h4>{name} : {id}</h4>
    <span>{title}</span>
    <p>
        {body}
    </p>
{/user} 
```

# mysql - 不同组和领域用户的数据库结构

> ID：13013224
> 
> 赞同：0
> 
> 时间：2012-10-22T14:09:57.923
> 
> 标签：mysql, database, structure

客户分为两种，个人客户和企业客户。例如，它们具有相同的字段（电子邮件、密码），但企业客户具有唯一的字段（公司名称、公司电话、地址）。还有什么可能是数据库的结构？

```
mysql> desc `customers`;
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| id_customer | int(11)     | NO   | PRI | NULL    | auto_increment |
| email       | varchar(32) | NO   |     | NULL    |                |
| password    | int(16)     | NO   |     | NULL    |                |
+-------------+-------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> desc `corporate_customers`;
+-----------------+-------------+------+-----+---------+-------+
| Field           | Type        | Null | Key | Default | Extra |
+-----------------+-------------+------+-----+---------+-------+
| id_customer     | int(11)     | NO   | PRI | NULL    |       |
| company_name    | varchar(32) | NO   |     | NULL    |       |
| company_address | text        | NO   |     | NULL    |       |
+-----------------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:45:41.087

不，这不是构建表格的唯一方法。如果您正在寻找其他建议。您可能会考虑一个“person”表、一个“company”表和一个“customer”表以及两个名为“person_customer”和“company_customer”的多对多表。

```
"PERSON"
  person_ID, PK
  email
  password
"Company"
  company_id, PK
  company_name
  company_address
"Customer"
  id_customer, PK
"person_customer"
  person_ID, FK
  id_customer, FK
"company_customer"
  company_id, FK
  id_customer, FK 
```

该示例为您提供了不同的 Customer 对象，以及不同的 person 和 company 对象。我在您的示例中看到的问题是您将“id_customer”作为两个不同表中的主键。我会考虑这种糟糕的形式。您如何构建表格取决于您，但我认为这是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:31:53.717

您可以更具体地说明您要完成的工作。当然，数据库结构没有问题，但您没有指定任何内容。

如果您正在尝试执行诸如检查 2 个表中哪个 id 匹配并选择`company_name , company_address`此处的方法，但我所说的您可以更具体地了解您想要的内容。

```
SELECT corporate_customers.company_name ,corporate_customers.company_address FROM corporate_customers WHERE corporate_customers.id_customer = customers.id_customer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:33:52.467

这行得通。除了你可能想要在`corporate_customers`表中做的唯一事情是添加`unique constraint`如下：

```
 CONSTRAINT uc_corporate_customers UNIQUE (company_name,company_address) 
```

这将确保客户没有重复的 compnay_name 和 company_address。

# java - 无法将布尔值设置为 null

> ID：13013227
> 
> 赞同：22
> 
> 时间：2012-10-22T14:10:05.663
> 
> 标签：java, spring, hibernate

我有一个带有以下变量的类 Shop

```
@Column(columnDefinition = "bit")
private boolean atShop; 
```

使用此值，我使用 HSQL 从应用程序中检索此信息

```
from Person person
left join fetch person.shop 
```

当我尝试调用此 HSQL 语句时，出现以下错误

```
org.springframework.orm.hibernate3.HibernateSystemException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of com.test.dataobject.Shop.atShop 
```

它抛出这个是因为它试图在 HSQL 中将布尔值设置为 null。`private boolean atShop;`我可以通过更改来解决这个问题，`private Boolean atShop;`但我想保留它，`boolean`因为我将它保存在我的数据库中

有没有办法在不改变的情况下解决这个`boolean`问题`Boolean`？

**编辑：**

我知道布尔值只能是真/假并且布尔值可以设置为空，但是有没有办法让休眠/弹簧将此值设置为假（我认为它应该自动执行）而不是尝试将其设置为null 并抛出此异常？

我也尝试添加注释以自动将值设置为 false 但这也不起作用

```
@Column(nullable = false, columnDefinition = "bit default 0")
private boolean atShop; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-22T14:12:14.833

**-** `boolean`是一个**原始类型**，并且可以有 only 的值`true or false`。

**-**鉴于`Boolean`是一个**包装器对象**并且可以被赋予一个**空**值。

**-**提供了From `Java 1.5` `AutoBoxing`，因此您可以使用简单赋值运算符( )**将布尔值转换为布尔值并返回布尔值**`=`，因此您可以在需要布尔值而不是布尔值的地方执行此操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T14:28:24.397

而不是摆弄休眠代码，将您的表定义更改为默认空值到 false（或 0）。这样，当您从数据库中读取数据时，它将始终具有有效值（因为它是布尔值，所以更有意义）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T15:39:03.890

`null`不一样`false`（也不一样`true`）。 `null`有非常具体的含义。这就是为什么 Hibernate 做它所做的事情......因为它确实是唯一有意义的事情，尽管你认为它应该做。

如果您想指示 Hibernate 将`null`这些列视为 false，唯一真正的解决方案是开发自定义 Hibernate 类型映射，用于“null 不是真正的 null”的这种特殊处理。您可以通过实现`org.hibernate.type.Type`接口或`org.hibernate.usertype.UserType`接口来实现这一点。你最好的办法是扩展标准的布尔类型映射并编织特殊的空处理。

然而，需要注意的一件事是查询，因为`null`在 ANSI SQL 中检查相等性永远不会有效。它解析为 SQL 调用的内容`UNDEFINED`，这通常意味着`FALSE`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:13:41.377

`boolean`是原始的，它可以是`true`or`false`并且默认是`false`. 要获取`null`，它的对象类型是`Boolean`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-23T12:00:54.830

以为我会为此付出 2 美分，因为我遇到了类似的问题，但解决方案不同。

所以我的问题是它正在从数据库中检索数据并试图将这些数据保存回来。它为布尔字段检索的数据为空。因此，当它试图将其保存回来时，它抱怨它无法将 null 保存为布尔值。

修复是更新数据库数据，因此这些字段都没有空值。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-04T15:03:23.120

你知道你可以在它周围放一个try catch，如果它抛出一个异常，意味着它是空的，因此将它设置为false。

# r - 如何将数据框的一列划分为另一列？

> ID：13013231
> 
> 赞同：22
> 
> 时间：2012-10-22T14:10:18.647
> 
> 标签：r, count

我想将一列除以另一列以获得每人时间我该怎么做？我找不到任何关于如何划分的信息。

这是我想使用的一些数据

```
 min    count2.freq
263807.0    1582
196190.5    1016
586689.0    3479 
```

最后，我想添加这样的第三列，其中的数字来自`min / count2.freq`

例如`263808.0/1582 = 166.75`

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-22T14:17:42.040

有很多方法可以做到这一点。问题是如何让 R 知道您希望划分的变量的位置。

假设

```
d <- read.table(text = "263807.0    1582
196190.5    1016
586689.0    3479
")
names(d) <- c("min", "count2.freq")
> d
       min count2.freq
1 263807.0        1582
2 196190.5        1016
3 586689.0        3479 
```

## 我的首选方式

要将所需的除法添加为第三个变量，我将使用`transform()`

```
> d <- transform(d, new = min / count2.freq)
> d
       min count2.freq      new
1 263807.0        1582 166.7554
2 196190.5        1016 193.1009
3 586689.0        3479 168.6373 
```

## 基本的 R 方式

如果在函数中执行此操作（即您正在编程），那么最好避免上面显示的糖和索引。在那种情况下，这些中的任何一个都会做你想要的

```
## 1\. via `[` and character indexes
d[, "new"] <- d[, "min"] / d[, "count2.freq"]

## 2\. via `[` with numeric indices
d[, 3] <- d[, 1] / d[, 2]

## 3\. via `$`
d$new <- d$min / d$count2.freq 
```

所有这些也可以在提示符下使用，但更容易阅读：

```
d <- transform(d, new = min / count2.freq) 
```

或者

```
d$new <- d$min / d$count2.freq ## or any of the above examples 
```

希望你像我一样思考，第一个版本更好;-)

我们在编程时不使用`tranform()`et al 的语法糖的原因是因为它们如何进行评估（查找命名变量）。在顶层（在提示下，以交互方式工作）`transform()`等人工作得很好。但是埋在函数调用中或在`apply()`对函数家族之一的调用中，它们可以而且经常会中断。

同样，小心使用数字索引（`## 2.`上面）；如果您更改数据的顺序，您将选择错误的变量。

## 如果您不需要更换的首选方式

如果您只想进行除法（而不是将结果插入数据框中，请使用`with()`，这使我们能够隔离您希望评估的简单表达式

```
> with(d, min / count2.freq)
[1] 166.7554 193.1009 168.6373 
```

这又是比等效代码更简洁的代码

```
> d$min / d$count2.freq
[1] 166.7554 193.1009 168.6373 
```

因为它明确指出“使用`d`，执行代码`min / count2.freq`。你的偏好可能与我的不同，所以我已经展示了所有选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-16T06:17:36.033

哈德利·威克姆

> dplyr

在数据争吵的情况下，packages 始终是一个保护程序。要将所需的除法添加为第三个变量，我将使用`mutate()`

```
d <- mutate(d, new = min / count2.freq) 
```

# html - TinyMCE 和 textarea id 更改

> ID：13013233
> 
> 赞同：1
> 
> 时间：2012-10-22T14:10:24.150
> 
> 标签：html, tinymce, textarea

我有一个文本区域列表。每个文本区域都在一个单独的 div 中：

```
1\. < div id="div_textarea1"> <textarea id="textarea1"></textarea> < /div >
2\. < div id="div_textarea2"> <textarea id="textarea2"></textarea> < /div >
3\. < div id="div_textarea3"> <textarea id="textarea3"></textarea> < /div >
4\. < div id="div_textarea4"> <textarea id="textarea4"></textarea> < /div > 
```

所有这些文本区域都使用 tinyMCE 插件。

在每个文本区域附近，我有一个删除按钮（该按钮将删除文本区域）。

当我单击删除按钮时，选定的 textarea 将被删除，其他 textarea 的 id 将更改为适当的数字：

```
function deleteTitlenote(titlenote_id)
{
    $('#titlenote_div'+titlenote_id).remove();

    var nodes = document.getElementById('add_titleNote').childNodes.length;
    var n = 0;

    for(var i=1; i<= nodes+1; i++)
    {
        if(document.getElementById("titlenote"+i)!=null)
            {
                    n++;
                    document.getElementById("titlenote"+i).id="titlenote"+n;
            }
    }
} 
```

当我有一个没有 tinyMCE 插件的简单 textarea 时，这很好用，但是一旦我使用 mce 插件，即使我更改了 id，我也会通过调用新 id 来访问 textarea 的旧值。

关于如何解决这个问题的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:18:04.693

这里的问题是 textarea 的 id 对应于它的 tinymce 编辑器实例的 id。更准确地说，当你初始化一个 tinymce 编辑器时，textarea 被隐藏，tinymce 创建一个 contenteditable iframe 和一个使用这个 iframe 编辑内容的编辑器对象。编辑器对象获取 html 源元素（文本区域）的 id。因此，当您更改 textarea id 时，您要么必须关闭所有 tinymce 并重新初始化它们，要么必须将 tinymce 编辑器内容重置为具有相应 id 的 tiyncem 编辑器。

# c# - 在调试期间获取对象的当前状态

> ID：13013234
> 
> 赞同：0
> 
> 时间：2012-10-22T14:10:27.223
> 
> 标签：c#, visual-studio-2010, debugging

我有一个代表我正在开发的软件的当前设置的类，我想做的是在调试断点期间获取该类实例中所有属性和字段的值。我知道您可以将鼠标悬停在实例上并获取该信息，但我找不到将其转储到文件或在单独窗口中查看的方法。有没有办法在 Visual Studio 2010 中做到这一点？（我正在使用 C#。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:17:37.563

有几种方法可以做到这一点。

1.）打开你的本地窗口，你也许可以在那里看到变量。如果它嵌套在其他对象中，则需要展开变量才能看到它。

2.）您可以打开一个监视窗口并将变量放在那里以查看其内容。

3.）您可以使用即时窗口并执行变量的 Trace.Writeline(...) 以在输出中查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:19:15.347

您可以使用[Trace.Writeline](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.writeline.aspx)但您也可以在生产中使用日志记录。

您可以编写一些代码，例如：

```
internal class Log {
    public void Write(string format, params object [] args) {
        File.AppendAllText(@".\log.txt", string.Format(@"{0}, {1}", DateTime.Now, string.Format(format, args)));
    }
} 
```

在你的代码上

```
...
Log.Write("Starting program");
...
Log.Write("Config value \"{0}\".", Config.Value);
...
Log.Write("Processing data code {0} {1} times.", code, times);
... 
```

# c# - 更改 GridView 中列的标题文本

> ID：13013241
> 
> 赞同：31
> 
> 时间：2012-10-22T14:10:43.360
> 
> 标签：c#, asp.net, gridview

我有一个 GridView，我使用 c# 代码以编程方式绑定。问题是，这些列直接从数据库中获取它们的标题文本，这在网站上显示时可能看起来很奇怪。所以基本上，我想以编程方式修改列标题文本。我已经尝试过以下方法，

```
testGV.Columns[0].HeaderText = "Date"; 
```

和

```
this.testGV.Columns[0].HeaderText = "Date"; 
```

似乎没有给我正确的结果。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-22T14:17:19.893

您应该在 GridView 的[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件中执行此操作，该事件在每次数据绑定`GridViewRow` **后触发。**

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[0].Text = "Date";
    }
} 
```

或者您可以在 aspx 上以声明方式设置[`AutogenerateColumns`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx)并`false`添加列：

```
<asp:gridview id="GridView1" 
  onrowdatabound="GridView1_RowDataBound"
  autogeneratecolumns="False"
  emptydatatext="No data available." 
   runat="server">
    <Columns>
         <asp:BoundField DataField="DateField" HeaderText="Date" 
            SortExpression="DateField" />
    </Columns>
</asp:gridview> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-24T21:32:58.400

我认为这有效：

```
 testGV.HeaderRow.Cells[0].Text="Date" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T14:17:46.477

您可以使用 gridview 的数据行绑定事件来完成。尝试以下代码示例：

```
protected void grv_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.Header)
{
e.Row.Cells[0].Text = "TiTle";
}
} 
```

有关行数据绑定事件研究的更多详细信息[Thsi....](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T15:57:13.563

在您的 asp.net 页面上添加 gridview

```
<asp:GridView ID="GridView1" onrowdatabound="GridView1_RowDataBound" >
</asp:GridView> 
```

在名为 GridView1_RowDataBound 的 c# 类中创建一个方法 protected void 方法

作为

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[0].Text = "HeaderText";
    }
} 
```

一切都应该正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-12T10:55:01.467

最好从gridview而不是静态/修复索引中查找单元格，这样无论何时添加/删除gridview上的任何列都不会产生任何问题。

ASPX：

```
<asp:GridView ID="GridView1" OnRowDataBound="GridView1_RowDataBound" >
    <Columns>
        <asp:BoundField HeaderText="Date" DataField="CreatedDate" />
    </Columns>
</asp:GridView> 
```

CS：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        for (int i = 0; i < e.Row.Cells.Count; i++)
        {
            if (string.Compare(e.Row.Cells[i].Text, "Date", true) == 0)
            {
                e.Row.Cells[i].Text = "Created Date";
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-15T07:30:19.607

```
protected void grdDis_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            #region Dynamically Show gridView header From data base
            getAllheaderName();/*To get all Allowences master headerName*/

            TextBox txt_Days = (TextBox)grdDis.HeaderRow.FindControl("txtDays");
            txt_Days.Text = hidMonthsDays.Value;
            #endregion
        }
    } 
```

# javascript - 以下 JavaScript 似乎在 Firefox 中有效，但在 Chrome 中无效？

> ID：13013244
> 
> 赞同：0
> 
> 时间：2012-10-22T14:10:52.250
> 
> 标签：javascript, xhtml

我是网页设计/开发的新手；我有以下代码来检查是否在文本框中输入了数据。JavaScript 检查是否添加了数据，如果没有输入会出现错误？

此脚本适用于 FireFox，但不适用于 Google Chrome。错误消息不会出现，数据会直接添加到数据库中。

```
<script type="text/javascript">      
        function validate(){
            if(
            document.vulcanoForm.device_name.value == "" ||
            document.vulcanoForm.muid.value == "" ||
            document.vulcanoForm.map_version.value == "0.000")
            {
                alert("Please fill out all fields before clicking submit!");
                return false;  
            }
            else
            {
                alert("Hold on just adding to database :)");
                return true;  
            }
        }
    </script>

<body>
    <a href="index.xhtml"> Mogadishu </a> <br/>
    <form action="vulcanoprocess.php" method="post" onsubmit="return validate()" name="vulcanoForm">

        <fieldset>
            <legend>Device Information</legend>

            <label for="device_name">Device Name:</label><br />
            <input type="text" name="device_name" id="device_name" /><br />

            <label for="muid">MUID:</label><br />
            <input type="text" name="muid" id="muid" /><br />

            </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:25:51.063

[Onsubmit 在 Chrome 中不起作用](https://stackoverflow.com/questions/5093431/onsubmit-doesnt-work-in-chrome)

谷歌搜索“google chrome onsubmit javascript”时要阅读的内容很多

编辑添加

```
<html>
<head>
<script type="text/javascript">
    function validate(){
        if(
        document.getElementById('device_name').value.trim() === "" ||
        document.getElementById('muid').value.trim() === "" ||
        document.getElementById('map_version').value.trim() === "0.000"
        )
        {
            alert("Please fill out all fields before clicking submit!");
            return false;
        }
        else
        {
            alert("Hold on just adding to database :)");
            return true;
        }
    }
</script>

    <title></title>
</head>
<body>
    <a href="index.xhtml">Mogadishu</a><br>
    <form action="vulcanoprocess.php" method="post" onsubmit="return validate()" name="vulcanoForm">
        <fieldset>
            <legend>Device Information</legend> <label for="device_name">Device Name:</label><br>
            <input type="text" name="device_name" id="device_name"><br>
            <label for="muid">MUID:</label><br>
            <input type="text" name="muid" id="muid"><br>
            <input type="submit">
        </fieldset>
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:22:47.120

To debug, use FireBug as a Firefox add on and select the javascript tab for errors or 'console'. Use that information to fix errors in code and when they go away test the script in chrome. If there are still errors, it might be because the chrome browser is missing some type of compatibility with js.

# css - Netbeans 语法突出显示滞后

> ID：13013247
> 
> 赞同：1
> 
> 时间：2012-10-22T14:11:01.980
> 
> 标签：css, performance, netbeans, syntax-highlighting

我正在做一个使用 CMS 的非常大的项目，每当我编辑包含很多代码行的文件（尤其是在 CSS 文件中）时，语法突出显示在我完成输入后需要几秒钟改变颜色。

Netbeans感觉比Eclipse快很多，但是为什么这个bug一直存在。

还有谁有相同的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:10:05.837

NetBeans 7.2.1 和 7.3 Beta 2 目前可用。7.2.1 具有许多性能增强功能。如果代码高亮速度没有提高，请开bug。

# java - 将多个通用参数分组以便于访问

> ID：13013249
> 
> 赞同：2
> 
> 时间：2012-10-22T14:11:06.160
> 
> 标签：java, generics

我有一个复杂的循环通用结构：

```
interface Job<J extends Job<J,R,E>, R extends Recipient<J,R,E>, E extends Event<J,R,E>> { }
interface Recipient<J extends Job<J,R,E>, R extends Recipient<J,R,E>, E extends Event<J,R,E> { }
interface Event<J extends Job<J,R,E>, R extends Recipient<J,R,E>, E extends Event<J,R,E> { } 
```

这个设计是修剪复制粘贴代码的结果。通过这种方式它是类型安全的，但很难使用：

```
class EmailJob implements Job<EmailJob, EmailRecipient, EmailEvent> { }
class VoiceCallJob implements Job<VoiceCallJob, VoiceCallRecipient, VoiceCallEvent> { }
//Recipient and Event classes omitted. 
```

下面是一个示例，工作独立类：

```
class LoadBalanceProcessor<J extends Job<J,R,E>, R extends Recipient<J,R,E>, E extends Event<J,R,E>> {
    @Inject
    Provider<JobDao<J extends Job<J,R,E>, R extends Recipient<J,R,E>, E extends Event<J,R,E>>> jobDaoProvider;
    long getTimeToWait(J job, R recipient){...}
} 
```

我希望以某种方式将这 3 个通用参数组合为一个，并轻松声明它们：

```
class LoadBalanceProcessor<JobTypeGroup>{
    @Inject
    Provider<JobDao<JobTypeGroup>> jobDaoProvider;
    long getTimeToWait(/* ?? */) {...}
} 
```

如何声明指向 Job-Recipient-Event 三元组的 JobTypeGroup 参数之类的东西？我可以更改原来的工作声明。

# jquery-ui - 在同一页面上使用 bootstrap 和 jqueryui 冲突？

> ID：13013252
> 
> 赞同：2
> 
> 时间：2012-10-22T14:11:16.020
> 
> 标签：jquery-ui, twitter-bootstrap

我在同一页面上加载了 jqueryui 和 twitter 引导程序。但是它们都包含一个工具提示功能，整个站点都是基于引导程序的，所以我不能从页面中删除它，但是有些页面我想使用 jqueryui 工具提示。但是它默认为引导程序。我有什么办法可以选择使用哪个库来使用该功能？不从页面中删除库？

# c# - Facebook、C# 和控制台应用程序

> ID：13013253
> 
> 赞同：0
> 
> 时间：2012-10-22T14:11:17.960
> 
> 标签：c#, facebook, sdk, console-application

我可以通过我的控制台应用程序使用 C# SDK 连接到 facebook，但是 Facebook 访问密钥每隔几个小时就会过期一次，我必须登录到我的 facebook 帐户才能让它工作。

我正在使用以下代码枚举相册：

```
var usertoken = FBImageChecker.Properties.Settings.Default.FBUserAccessKey;
var fbclient = new FacebookClient(usertoken);
dynamic albums = fbclient.Get("me/albums"); 
```

我认为我现在应该使用 oAuth 是否正确？如果是这样，有没有人有一个可以在我的情况下工作的例子？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T08:08:42.013

终于设法使用 oauth 来完成这项工作，不幸的是，facebook 的文档并不完全清楚，尽管@ramhound 指出网上有很多示例，但其中很多示例都适用于较旧的身份验证模型，因此这是一个反复试验的案例。

# cython - cython 模块级对象

> ID：13013256
> 
> 赞同：0
> 
> 时间：2012-10-22T14:11:26.587
> 
> 标签：cython

我的代码中有以下结构：

```
#test.pyx
cdef class BClass:
    cdef str x
    cdef set_args(self, x):
        self.x = x

    cdef func(self, x):  
        print "BClass" , self.x, "--", x

fit = BClass()

def my_func():
    global fit
    fit.set_args("hello")
    fit.func("world")

#tester.py
import test
test.my_func() 
```

我将 pyx 构建成 pyd 没有问题，但是当我运行 tester.py 时，出现以下错误：

**AttributeError：“test.BClass”对象没有属性“set_args”**

如果我在 my_func 中实例化 fit ，则一切都按预期工作。这是否意味着我不能定义模块级对象，然后在同一个模块的函数中重用它？

在我的原始代码中，my_func 在循环中被重复调用，并且由于分配了一些数组，实例化 BClass 会产生一些开销，这就是我想在 my_func 之外实例化 fit 的原因。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:25:53.807

好吧，解决方案非常简单。只是宣布适合

```
cdef BClass fit = BClass() 
```

在模块级别使其工作没有任何错误。

我仍然不明白为什么如果 fit 是用 Python 方式实例化的

```
fit = BClass() 
```

然后我得到这个 AttributeError ，为什么如果我在 my_func() 中以 Python 方式实例化它，它可以正常工作？？？

# uiscrollview - 限制在 UIScrollView 上识别的触摸

> ID：13013264
> 
> 赞同：0
> 
> 时间：2012-10-22T14:11:43.477
> 
> 标签：uiscrollview, uigesturerecognizer

我试图限制 UIScrollView 上识别的触摸次数，因为它正在使用另一个需要不止一次触摸的手势执行。如果触摸次数大于 1，我不希望触发平移和滑动手势。但我没有成功。

我将 UIScrollView 子类化并覆盖了明显的方法，但 numberOfTouches 总是返回 1？

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.numberOfTouches > 1) 
    {
        return NO;
    }   
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:40:59.450

也许您可以执行以下操作？

```
for(UIGestureRecognizer* gr in _scrollview.gestureRecognizers)
{
    if([gr respondsToSelector:@selector(setMaximumNumberOfTouches:)])
    {
        gr.maximumNumberOfTouches = 1;
    }
} 
```

无需对滚动视图进行子分类，您可以在`viewDidLoad`视图控制器中执行此操作。

# java - 我需要将彩色图像转换为双层版本

> ID：13013266
> 
> 赞同：2
> 
> 时间：2012-10-22T14:11:53.390
> 
> 标签：java, image, image-processing, tiff

在 java 中，我需要将 jpeg、gif 或 png 格式的传入文件转换为双层版本，以便进一步转换为 CCIT 压缩的 TIF 文件。我可以取出 tif 文件，但不能压缩。我真的不是 JAI、压缩或图像格式方面的专家。任何帮助深表感谢。（我已经在这个主题上搜索了几个小时，但找不到我理解的例子。）

```
 String inFile = "myFile.jpg"
    String newFileName = "myFile.tif"; 
    FileOutputStream out = new FileOutputStream(newFileName);

    RenderedOp src = JAI.create("fileload", inFile);

    // TIFFEncodeParam params = new TIFFEncodeParam();
    // params.setCompression(TIFFEncodeParam.COMPRESSION_GROUP4);

    TIFFImageEncoder encoder = new TIFFImageEncoder (out, null);
    encoder.encode (src);
    out.flush();
    out.close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T14:13:38.633

您必须将图像转换为双级压缩格式，以便能够使用 COMPRESSION_GROUP4 写入 Tiff 图像。最简单的方法可能是使用 BufferedImage 以兼容的压缩方案呈现图像。

 `````
 FileOutputStream fos = new FileOutputStream("C:/test/output/myFile.tif"); 

        RenderedOp src = JAI.create("fileload", "C:/test/input/myFile.jpg");

        BufferedImage buf = new BufferedImage(src.getWidth(), src.getHeight(), BufferedImage.TYPE_BYTE_BINARY);
        buf.getGraphics().drawImage(src.getAsBufferedImage(), 0, 0, null);
        RenderedImage ri = (RenderedImage) buf;

        encodeParam = new TIFFEncodeParam ();
        encodeParam.setCompression(TIFFEncodeParam.COMPRESSION_GROUP4);

        ImageEncoder enc = ImageCodec.createImageEncoder("TIFF", fos, encodeParam);
        enc.encode(ri); 
`````

# forms - Symfony2 如何一次注册两个或多个记录。

> ID：13013269
> 
> 赞同：1
> 
> 时间：2012-10-22T14:12:01.207
> 
> 标签：forms, symfony

形式/类型

```
class DemoType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name', 'text');
    }

    // ...
} 
```

控制器

```
$user = new User();
$form = $this->createForm(new DemoType(), $user);

if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);
    if ($form->isValid()) {
        $em = $this->get('doctrine')->getEntityManager();
        $em->persist($user);
        $em->flush();
        return // ...
    }
} 
```

看法

```
<form action="{{ path }}" method="post" {{ form_enctype(form) }}>
    <div>
        {{ form_widget(form.name) }}
    </div>
    {{ form_rest(form) }}
</form> 
```

我想一次注册多个。
（最后我想在视图侧添加一个输入字段。（加号按钮等JavaScript））

一次注册两个或更多用户应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:22:16.050

您应该使用集合表单类型。有关详细说明，请参见[此处](http://symfony.com/doc/current/reference/forms/types/collection.html)。加号按钮和新子表单的动态创建必须由 javascript 处理，但这一切都在文档中进行了解释。

# c++ - 从 std::istream 读取 LLVM IR

> ID：13013270
> 
> 赞同：2
> 
> 时间：2012-10-22T14:12:04.990
> 
> 标签：c++, llvm, llvm-ir

以前我曾问过如何在文件中写入然后读回 IR。读取的代码如下所示：

```
LLVMContext ctx;
SMDiagnostic diag;
Module *m = ParseIRFile( "my_file", diag, ctx ); 
```

但是，我试图将 LLVM IR 改造成的代码只传递给我一个`std::istream&`. 如何从 IR 中读取 IR `std::istream`？

我想出了如何使用`raw_os_ostream`a 来适应 a`std::ostream`来`raw_ostream`编写模块，但是没有明显的方法来适应代码以供阅读，例如，没有`MemoryBuffer`适应 a `std::istream`（除非我错过了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:08:56.987

您应该使用`ParseIR()`而不是`ParseIRFile()`. 它得到一个`MemoryBuffer`as 参数，而不是文件名。您可以通过其工厂方法`MemoryBuffer`从 a创建一个：`StringRef``getMemBuffer()`

```
/// getMemBuffer - Open the specified memory range as a MemoryBuffer.  Note
/// that InputData must be null terminated if RequiresNullTerminator is true.
static MemoryBuffer *getMemBuffer(StringRef InputData,
                                  StringRef BufferName = "",
                                  bool RequiresNullTerminator = true); 
```

而且由于 a`StringRef`可以（甚至隐式地）从 a 构造`std::string`，所以您需要做的就是[将您的转换`std::istream`为`std::string`](https://stackoverflow.com/questions/1816319/reading-directly-from-an-stdistream-into-an-stdstring).

# documentation - Liferay taglib 文档在哪里？

> ID：13013275
> 
> 赞同：0
> 
> 时间：2012-10-22T14:12:27.673
> 
> 标签：documentation, liferay-6, taglib

我正在寻找 Liferay 的 taglib 文档。我找到了[http://docs.liferay.com/portal/6.1/taglibs/](http://docs.liferay.com/portal/6.1/taglibs/)但到目前为止我单击的每个条目都是空的，除了自动生成的类型信息。

那么，我如何找出 Liferay 中的标签实现的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:31.377

[您可以通过http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/discussion-tag-libra-2](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/discussion-tag-libra-2)查看详细信息，也可以通过 Liferay in Action book 第 4 章，包含有关 liferay 标签库的简要说明。

# r - 根据 R 中的另一个矩阵/df 替换 df/matrix 中的值

> ID：13013283
> 
> 赞同：2
> 
> 时间：2012-10-22T14:13:03.420
> 
> 标签：r, matrix, replace

我有两个数据框，一个包含数字，第二个是二进制，两者大小相同。我现在想用`NA`数据框 B 中的相应变量是否为 0 而不是 1 来替换数据框 A 中的所有数字。如果为 1，则数字应保持不变。我该怎么做？

自由度

```
 A  B  C
1  34 32 12
2  52 23 34 
```

自由度乙

```
 A  B  C
1  1  1  1
2  0  0  1 
```

期望的结果

```
 A  B  C
1  34 32 12
2  na na 34 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:26:05.493

如果您使用矩阵，它就像`mat1[which(mat2 == 0)] <- NA`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:26:54.277

我找到了答案，在阅读文档后，我认为 replace 命令仅适用于向量，但以下方法可以解决问题：

```
new.df <- replace(A.df, B.df == 0, "NaN") 
```

# java - 简单动画的 Java 代码仅在 Windows 上运行

> ID：13013287
> 
> 赞同：2
> 
> 时间：2012-10-22T14:13:23.467
> 
> 标签：java, macos, swing, animation, paint

在这个弹跳球动画的简单代码示例中：

```
import javax.swing.JApplet;
import javax.swing.JFrame;
import java.awt.*;

public class GraphicsMovement extends JApplet
{
public static void pause()
{
    try {
        Thread.sleep(10);
        } catch(InterruptedException e) {
          }
}

public static void main(String args[])
{
    JApplet example = new GraphicsMovement();
    JFrame frame = new JFrame("Movement");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(example);
    frame.setSize(new Dimension(500,300));       //Sets the dimensions of panel to appear when run
    frame.setVisible(true);
}

  public void paint (Graphics page)
  {
 int width = getWidth();    // width = the width of the panel which appears when run
 int height = getHeight();  // height = the height of the panel which appears when run.

//Changes background color to a blueish color
page.setColor(new Color (140,214,225));
page.fillRect(0,0,width,height);
for(int i = 0; i <= 5; i++)
{
    for (int j = 0; j <= 100; j++)
    {
        page.setColor(Color.YELLOW);
        page.fillOval(100,55 + j,100,100);  //draws a yellow oval
        pause();
        page.setColor(new Color (140,214,225));
        page.fillOval(100,55 + j,100,100);  //draws a blueish oval over the yellow oval
    }
    for (int k = 100; k >= 0; k--)
    {
        page.setColor(Color.YELLOW);
        page.fillOval(100,55 + k,100,100);  //draws a yellow oval
        pause();
        if (k != 0)
        {
            page.setColor(new Color (140,214,225));  //draws a blueish oval over the yellow oval
            page.fillOval(100,55 + k,100,100);
        }
    }
}
 }
 } 
```

动画画得很好，可以在 Windows 机器上运行（使用 JCreator），但不会在用 IntelliJ 或 Eclipse 编译的 Mac OS X 上运行。在两台不同的 OS X 机器上尝试过，两者都会绘制球和背景（经过长时间的等待），但不会继续动画。

我在这里缺少某种特定于平台的代码吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:21:30.760

`paint()`方法在 UI 线程中调用，它应该尽可能快地返回。

那么你将把动画代码放在哪里呢？答案很简单：你需要把代码放到一个单独的线程中。

对于 Windows 和 OS X 之间的区别，我只能说它应该与它们如何调度线程或类似的东西有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:41:57.820

永远不要在任何`paint`会阻塞或可能触发重绘请求的方法中做任何事情。

你应该总是调用`super.paintXxx`，这些方法在后台做了很多工作，通常比你能做的好很多。

您不需要（非常罕见的情况）从顶级容器扩展，例如`JApplet`or `JFrame`。您最好创建一个自定义容器（例如`JPanel`）并将您的组件添加到其中（或执行您的自定义绘制）。除了双缓冲支持之外，您还可以获得部署选择的灵活性。

不要自欺欺人，您无法控制绘制过程，这些决定取决于重绘管理器，但是您可以“鼓励”它进行更新。当人们开始玩动画时，这会造成最大的痛苦。

您应该在事件调度线程 (EDT) 的影响之外修改动画的“状态”，或者在您的情况下，在`paint`上下文之外。

你的问题很简单，一个简单的`javax.swing.Timer`就可以解决。更复杂的动画可能需要一个“动画”线程。

```
public class GraphicsMovement extends JApplet {

    @Override
    public void init() {
        setLayout(new BorderLayout());
        add(new AnimatedPane());
    }

    @Override
    public void start() {
    }

    public class AnimatedPane extends JPanel {

        private Timer timer;
        private boolean colorSwitch = false;

        private int yOffset = 0;
        private int direction = 1;

        public AnimatedPane() {
            timer = new Timer(10, new ActionListener() {
                public void actionPerformed(ActionEvent e) {
//                    colorSwitch = !colorSwitch;
                    yOffset += direction;
                    if (yOffset > 100) {
                        direction = -1;
                        yOffset = 100;
                    } else if (yOffset < 0){
                        direction = 1;
                        yOffset = 0;
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

            setBackground(new Color(140, 214, 225));
        }

        @Override
        protected void paintComponent(Graphics page) {
            super.paintComponent(page);
            int width = getWidth();    // width = the width of the panel which appears when run
            int height = getHeight();  // height = the height of the panel which appears when run.

            if (colorSwitch) {
                page.setColor(new Color(140, 214, 225));
            } else {
                page.setColor(Color.YELLOW);
            }
            page.fillOval(100, 55 + yOffset, 100, 100);  //draws a yellow oval
        }
    }
} 
```

我担心 10 毫秒的“延迟”，这足以让我适应：P

你可能会发现通读...

*   [并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

有点意思

# javascript - Micro JS 基准测试来确定网站设置？

> ID：13013288
> 
> 赞同：1
> 
> 时间：2012-10-22T14:13:26.150
> 
> 标签：javascript, html

我还没有找到任何关于这方面的信息，但是在几分之一秒内做一个小基准测试来粗略确定客户的 JS 能力，然后使用该基准测试结果来确定哪个“eyecandy”是可能的/实用的" 要启用/禁用的网站功能？

例如，如果基准测试非常慢，则轮播和手风琴可以完全关闭它们的动画，而是立即循环它们的内容。我不想仅仅基于“设备”来限制事物，因为这些天有些手机/平板电脑可以完美地运行 JS 重网站，而另一些则不能。最重要的是，我看到一些笔记本电脑无法流畅地渲染基本的 JS 补间，因此最好根据基准而不是有关设备的数据来确定要运行的内容。

## **编辑：**

我现在发布这个感觉很糟糕，因为我只是更改了谷歌搜索的关键字并设法在 StackOverflow 上找到了两个相关的线程。它们在我下面的答案中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:44:10.017

我现在发布这个感觉很糟糕，因为我只是更改了我的关键字以进行谷歌搜索并设法在 StackOverflow 上找到两个相关线程：

[在运行时确定浏览器是否太慢而无法优雅地处理复杂的 JavaScript/CSS 的最佳方法是什么？](https://stackoverflow.com/questions/4734518/whats-the-best-way-to-determine-at-runtime-if-a-browser-is-too-slow-to-graceful)（由[Már Örlygsson 撰写](https://stackoverflow.com/users/16271/mar-orlygsson)）

和

[根据用户计算机的性能禁用 JavaScript 功能](https://stackoverflow.com/questions/3276321/disable-javascript-function-based-on-the-users-computers-performance)（通过[gt](https://stackoverflow.com/users/254882/g-t)）

现在，虽然这两个帖子中的答案没有直接回答我的问题（如果可能/实用的话），但他们指出了几种方法。我已经计划制作一个运行大约 100 毫秒的小型基准算法，然后只计算它设法完成的迭代次数；但是，这两个线程证实了我对该方法有效的理论。所以我想这里已经没有什么可以回答的了。

# php - 致命错误：调用非对象上的成员函数 load()（P4A 应用程序框架）

> ID：13013290
> 
> 赞同：2
> 
> 时间：2012-10-22T14:13:39.567
> 
> 标签：php, zend-framework

我正在尝试使用 P4A 应用程序框架制作小部件，并且我有一个反射声音代码到最后一个掩码，这应该使一个产生的小部件使用户能够移动到另一个应该执行不同功能的掩码，错误起源于代码所在的第 28 行；

```
->load($this->locations); 
```

我相信它扩展了课程，但我不确定，任何帮助......其余代码如下

```
class main_dashboard_mask extends P4A_Base_Mask
{

public $locations = array(
        array('value'=>'area1','description'=>'area one'),
        array('value'=>'area2','description'=>'area two'),
        array('value'=>'area3','description'=>'area three'),            
        );
public function __construct()
{
    parent::__construct();
    $p4a = p4a::singleton();
    $this->setTitle("Dashboard");

    $this->build('p4a_field','MeetingRooms');
    $this->MeetingRooms->setLabel("This is the meeting room label");
    $this->build('p4a_button', 'continue')
    ->setLabel('Continue?')
    ->implement("onclick", $this, "change");
   $this->build('p4a_field','booking')
    ->setlabel('Viewing?')
    ->setType('checkbox')
    ->setValue(true);
    $this->booking->label->setTooltip('If you are booking a meeting room, check this box');

    $this->build("P4A_Array_Source", "location")
    ->getPk("value")
    ->load($this->locations);
    $this->build('p4a_field','location')
    ->setLabel('location')
    ->setValue('area1')
    ->setType('select')
    ->setSource($this->location)
    ->setWidth(60);
    $this->weight->label->setWidth(60);
    $this->MeetingRooms();
}

private function MeetingRooms()
{
    $this->build('P4A_fieldset', 'widgetframe')
    ->anchor($this->location)
    ->anchorLeft($this->booking)
    ->anchorLeft($this->continue)
    ->setLabel('Meeting Room Bookings');
}

} 
```

任何帮助将不胜感激=]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:26:02.377

好吧试试这个，它可能对你更好。

这是代码：

```
public function __construct()
{
    parent::__construct();
    $this->setTitle("Dashboard");

    $this->build('p4a_field','MeetingRooms');
    $this->MeetingRooms->setLabel("This is the meeting room label");
    $this->build('p4a_button', 'continue')
    ->setLabel('Continue?')
    ->implement("onclick", $this, "change");

   $this->build('p4a_field','booking')
    ->setlabel('Booking?')
    ->setType('checkbox')
    ->setValue(false);

    $this->booking->label->setTooltip('If you are booking a meeting room, check this box');

    $this->build("p4a_db_source", "login")
    ->setTable("meetingrooms")
    ->load()
    ->firstRow();

    $this->build('p4a_field','location')
    ->setSource($this->login)
    ->setLabel('location')
    ->setType('select')
    ->setSourceValueField("position")
    ->setSourceDescriptionField("MeetingRoom")
    ->setWidth(120);

    $this->build("p4a_fieldset","Book")
    ->anchor($this->location)
    ->anchor($this->booking)
    ->anchor($this->continue)
    ->setLabel('Meeting room bookings');

    $this->display("main",$this->Book);

}

} 
```

祝你好运 :) 感谢您接受我的才华 xx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:51:07.617

通过查看类引用和代码，`P4A_Data_Source::getPk()`返回一个字符串，而不是一个对象，这就是您收到错误的原因。默认情况下，看起来 PK 的值`NULL`会猜测您正在返回。此外，该`getPk`方法似乎不接受任何论据。

您可以通过以不同的顺序链接来解决此问题：

```
$this->build("P4A_Array_Source", "location")
     ->load($this->locations)
     ->getPk(); 
```

这看起来是正确的，因为调用`load()`设置了 PK。

# microsoft-metro - 磁贴中的应用程序名称 - 更新

> ID：13013292
> 
> 赞同：5
> 
> 时间：2012-10-22T14:13:51.980
> 
> 标签：microsoft-metro, windows-runtime, visual-studio-2012, winrt-xaml

您好，我使用 Tile Update 开发了一个应用程序。当我在我的地铁中查看它时，没有应用程序名称，而只有来自应用程序清单的小徽标。是否可以在我的 Tile-Updater 中显示我的应用程序名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:10:13.620

是的，

您可以在更新中设置[多个变量。](http://msdn.microsoft.com/en-us/library/windows/apps/br212854.aspx)`Tile`其中之一是您正在寻找的东西，称为`Branding`. 将其设置为，`name`以便您的应用名称将在`Tile`更新时显示。

例子：

```
<binding template=""TileSquareBlock"" branding=""name"">
    <text id=""1""></text>
    <text id=""2""></text>
</binding> 
```

# xml - 在 xsl 中拆分字符串并更新属性

> ID：13013295
> 
> 赞同：3
> 
> 时间：2012-10-22T14:14:18.710
> 
> 标签：xml, xslt, xpath

我有一个具有以下结构的 xml 文件

```
 <project>
    <dependency id="abc" version="1.2.3.4"/>
    </project> 
```

我需要阅读这个 xml 并使用 id 和 version 的值更新另一个 xml。早些时候，我使用如下的 xsl 执行此操作，效果很好：

```
 <xsl:attribute name="id">
    <xsl:value-of select="@id"/>
    </xsl:attribute>

    <xsl:attribute name="version">
    <xsl:value-of select="@version"/>
    </xsl:attribute> 
```

现在我需要将version的属性值设置为[1.2,1.3)，我该怎么做呢？我在下面尝试了类似的方法，但我认为我没有得到任何地方。

```
 <xsl:variable name="MinVersion"/>
    <xsl:variable name="MaxVersion"/>

<xsl:for-each select="tokenize(@version,'.')">

<xsl:if test="(position( )) = 2">
    <xsl:value-of select="concat($MinVersion,.)"/>
</xsl:if>
<xsl:otherwise>
    <xsl:value-of select="concat($MinVersion,.,'.')"/>
</xsl:otherwise>

<xsl:if test="(position( )) = 2">
    <xsl:value-of select="concat($MaxVersion,number(.)+1)"/>
</xsl:if>
<xsl:otherwise>
    <xsl:value-of select="concat($MaxVersion,.,'.')"/>
</xsl:otherwise>
 </xsl:for-each> 
```

我怎样才能做到这一点？

更新：我尝试在 Visual Studio 中调试它并收到错误消息，指出 tokenize 不是一个可识别的函数。经过一番搜索发现.NET 框架只支持XSLT 1.0 处理器。任何 1.0 的解决方案都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:22:52.523

尝试关注，希望它能解决您的问题。（我已经更改了我以前的答案，请检查以下新答案。）

```
<xsl:variable name="testVersion" select="@version"></xsl:variable>
<xsl:variable name="separator" select="'.'"></xsl:variable>

<xsl:if test="string-length($testVersion) > 0">

  <xsl:variable name="firstnumber"     select="substring-before($testVersion, $separator)"/>
  <xsl:variable name="after-separator" select="substring-after($testVersion, $separator)"/>       
  <xsl:variable name="secondnumber"    select="substring-before($after-separator, $separator)"/>        

  <xsl:variable name="outputvalue">
    <xsl:text>[</xsl:text>
    <xsl:value-of select="$firstnumber"></xsl:value-of>
    <xsl:text>.</xsl:text>
    <xsl:value-of select="$secondnumber"></xsl:value-of>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="$firstnumber"></xsl:value-of>
    <xsl:text>.</xsl:text>
    <xsl:value-of select="number($secondnumber)+1"></xsl:value-of>
    <xsl:text>)</xsl:text>
  </xsl:variable>

  <xsl:value-of select="$outputvalue"/>
</xsl:if> 
```

# powershell - 为什么不支持支持的运算符？

> ID：13013298
> 
> 赞同：1
> 
> 时间：2012-10-22T14:14:26.943
> 
> 标签：powershell, active-directory

为什么 Powershell 说不支持受支持的运算符？

我有以下（简化的）代码，其中包含[区分大小写的不等于运算符](http://ss64.com/ps/syntax-compare.html)：

```
$filter_accountchanged = { (sAMAccountName -eq $username) -and (GivenName -cne $givenname) }
try {
        if (Get-ADUser -filter $filter_accountchanged) { # update aduser }
catch {
        Write-host $_.Exception 
```

在什么情况下这会导致我看到以下错误？

> Microsoft.ActiveDirectory.Management.ADFilterParsingException：解析查询时出错：'(sAMAccountName -eq $username) -and ((GivenName -cne $givenname))' 错误消息：'Operator Not supported: -cne' at position: '50'。在 Microsoft.ActiveDirectory.Management.QueryParser.yyparse() 在 Microsoft.ActiveDirectory.Management.QueryParser..ctor(字符串查询，VariableExpressionConverter varExpressionConverter，ConvertSearchFilterDelegate searchFilterConverterDelegate) 在 Microsoft.ActiveDirectory.Management.Commands.ADGetCmdletBase`3.BeginProcessingOverride()

当我删除`c`from时，查询成功`cne`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:23:30.060

不幸的是，Powershell 的过滤器参数并不支持所有运算符。您的过滤器将/确实与 | 一起使用 Where() 语句（它在我的本地系统上执行）。

[2011 年的 Powershell 过滤器支持列表](http://blogs.metcorpconsulting.com/tech/?p=76)（其中列出了“ne”作为选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:46:56.503

这是`Get-ADUser`Filter 参数的限制，而不是 PowerShell 的限制。试试 -ne 。

# c# - 使用 GraphSharp 图形布局 WPF 库绘制图形并编辑顶点标签

> ID：13013300
> 
> 赞同：1
> 
> 时间：2012-10-22T14:14:33.727
> 
> 标签：c#, wpf, graph, graph-sharp

我是一名大学生，这是我的算法分析教授传给我们班的作业。我没有使用作业标签，因为它将被弃用，但它基本上是作业。任何帮助是极大的赞赏。

我们将使用读取标准中的 xml 的任何语言编写程序，并将其绘制到程序屏幕上，并使用[BFS 算法](http://en.wikipedia.org/wiki/Breadth-first_search "BFS Algorithm")来计算`<graphml...>`该图有多少节点、边和连接的组件。

我已经使用graphsharp的c#图形布局库制作了这个程序，它在读取xml时绘制图形，但只计算按钮单击时的项目​​以对其进行交互。

我已经完成了这个绘图+计数部分。问题是这个graphsharp项目几乎没有文档，我需要显示BFS通过我的图表的顺序。我做了一些非常简单的事情，在 BFS 执行期间更改节点的标签名称，如下所示：

*   “n0”变成“n0-1”
*   “n1”变成“n1-2”
*   很快...

我遇到的问题是：

```
Property or indexer 'QuickGraph.IVertexSet<object>.Vertices'
cannot be assigned to -- it is read only 
```

顶点是否仅“可创建”，不可编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:32:59.997

创建一个具有属性的自定义顶点类`Name`。而不是创建新顶点（因为 graph.vertices[i] = "newstr" 意味着您将第 i 个对象更改为全新的对象/字符串），而是更改`Name`现有顶点的内容（定义的属性）。

如果您使用自定义顶点类型，您应该定义一个自定义 DataTemplate 以便能够按预期呈现您的顶点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:44:52.353

我想我知道为什么这个组件在它的边缘部分被设为只读。这可能与这些图形的渲染方式有关。我在下面制作了另一个示例代码，删除了一条边并将其添加回图表（这将在一定程度上实现您的目标，但可能也不是您想要的（似乎没有其他方法可以更改图表中的边） ））。

在我看来，您希望在实际绘制图形之前布置好树（我认为这也是组件的意图）。让我知道你是否可以完成它。

```
 string edgeSource = "n3";
    string edgeTarget = "n4";
    string newEdgeSource = "n0";
    string newEdgeTarget = "n4";

    IEnumerator<IEdge<object>> edgeEnumeratoer = g.Edges.GetEnumerator();
    edgeEnumeratoer.MoveNext();
    while (edgeEnumeratoer.Current != null)
    {
        var edge = edgeEnumeratoer.Current;
        string source = (string)(edge.Source);
        string target = (string)(edge.Target);
        if ((source.CompareTo(edgeSource) == 0) && (target.CompareTo(edgeTarget) == 0))
        {
            if (g.RemoveEdge(edge))
            {
                IEdge<object> newEdge = new Edge<object>(newEdgeSource, newEdgeTarget);
                g.AddEdge(newEdge);
                break;
            }
            else
            {
                Debug.WriteLine("Could not remove edge from graph.");
            }
        }
        edgeEnumeratoer.MoveNext();
    }

    graphLayout.Graph = g; 
```

# php - PHP DOMDocument Save() 错误

> ID：13013304
> 
> 赞同：1
> 
> 时间：2012-10-22T14:14:55.037
> 
> 标签：php, dom

我一直无法找到这个问题的答案。我是 php 新手来忍受我。

我一直在尝试在类中使用 DOMDocument 对象，但是当我尝试调用 DOMDocument 对象的 save() 方法时，出现以下错误：

致命错误：在非对象上调用成员函数 save()：

代码片段如下：

```
$kmlDoc = new KMLDoc();
$kmlDoc->saveKML();

class KMLDoc
{
public $dom;
public $docNode;

function _construct()
    {
        $this->dom = new DOMDocument('1.0', 'UTF-8');
        $this->dom->formatOutput = true;

        // Creates the root KML element and appends it to the root document.
        $node = $this->dom->createElementNS('http://earth.google.com/kml/2.1', 'kml');
        $parNode = $this->dom->appendChild($node);

        // Creates a KML Document element and append it to the KML element.
        $dnode = $this->dom->createElement('Document');
        $this->docNode = $parNode->appendChild($dnode);
    }

function saveKML()
    {
        $this->dom->save('outputs/test.kml');
    }

}
?> 
```

我猜这与以下内容有关： $this->dom->save('outputs/test.kml'); 但我似乎无法弄清楚。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:19:23.507

你的`_construct`函数永远不会被执行。如果需要构造函数，请调用它`__construct`。

# visual-studio-2010 - Visual Studio 2010 / 2012 负载测试错误

> ID：13013305
> 
> 赞同：2
> 
> 时间：2012-10-22T14:14:59.170
> 
> 标签：visual-studio-2010, testing, visual-studio-2012

当我尝试在测试项目中打开负载测试时，我收到错误

```
"The parameter is incorrect (Exception from HRESULT:0x80070057(E_INVALIDARG))" 
```

所以我无法打开任何测试来自定义、webtest、负载测试..

我实验的唯一区别是，在 VS2012 中，右键单击负载测试文件，它给了我“打开（Shell）”选项，单击它，打开 VS2010 的一个实例，选择测试并在临时解决方案中加载，但是如果我尝试在普通的 VS2010 实例中打开该测试，我会收到与上述相同的错误

```
"The parameter is incorrect (Exception from HRESULT:0x80070057(E_INVALIDARG))" 
```

任何想法？提前致谢

# java - 将代码部署到 tomcat 后的 $.post 问题

> ID：13013306
> 
> 赞同：1
> 
> 时间：2012-10-22T14:15:00.077
> 
> 标签：java, jquery, jsp, tomcat, tomcat6

我正在使用以下代码从 html FILE 标记中读取文件名并将其发送到 ReadExcel.jsp。一旦发布消息完成，它将重新加载 home.jsp 页面。ReadExcel.jsp 读取 excel 文件并将数据保存到数据库。Home.Jsp 从数据库中读取相同的 excel 信息并显示在网格中。

只要我在系统上运行 Eclipse 中的文件，上述过程就可以正常工作。一旦我将文件部署到我的测试服务器上的 Tomcat，它就不会将发布值发送到 ReadExcel.jsp。下面是将 post 值发送到 ReadExcel.jsp 的 jquery 代码。有什么帮助吗？

```
 $("#fileupload").change(function() {
   if($("#fileupload").val().length > 0) {    

       $.post("ReadExcel.jsp", {
            filename: $("#fileupload").val(), 
            processId: <%=processId%>

       },function(data){

           location.reload(window.location.replace=("home.jsp?procid="+<%=processId%>)); 

       });
       }

}); 
```

如果没有找到解决方案，有什么方法可以在 Ajax 中重写？我知道 Javascript 并试图在 Javascript 中实现它。..

# parameterized-query - 如何指定 ServiceStack.OrmLite 参数长度

> ID：13013308
> 
> 赞同：6
> 
> 时间：2012-10-22T14:15:00.293
> 
> 标签：parameterized-query, ormlite-servicestack

使用参数化查询似乎将参数的长度设置为传入的值的长度。

做类似的事情：

```
var person = Connection.Query<People>("select * from People where Name = @name", 
                                      new { name = "Fred"}); 
```

导致参数为 NVARCHAR(4)，因此具有不同长度的下一个查询会丢失缓存计划并创建一个新计划。

我怎样才能改变它，让它只使用我指定的长度。

# android - grep 完全匹配

> ID：13013310
> 
> 赞同：3
> 
> 时间：2012-10-22T14:15:23.587
> 
> 标签：android, linux, grep, adb

我需要对命令`grep`的结果列表进行完全匹配。`ls`

例如，如果我`ls`是一个目录，结果如下：

```
system
sys
sbin
proc
init.rc
init.mahimahi.rc
init.goldfish.rc
init 
```

我想`grep`看看是否存在名为“init”的文件。我需要`grep`只返回一个结果。列表中只有一个名为“init”的文件。

* * *

我在安卓设备上执行这个操作。所以这里是完整的命令：

```
adb shell ls / | grep -E "^init$" 
```

* * *

我需要检查 android 设备上是否存在目录，然后在目录存在时执行操作。

我在使用`find`批处理脚本之前已经这样做了，但是我需要在 linux 上使用`bash`并且我想要一个完全匹配的。如果有另一个目录或文件包含我正在搜索的字符串，这将避免此问题。

* * *

我已经尝试了以下链接中的建议，但是当我将“init”作为参数时，它们都没有返回任何结果。

[如何 grep-the-exact-match](https://stackoverflow.com/questions/4709912/how-to-grep-the-exact-match)

[匹配准确词使用 grep](https://stackoverflow.com/questions/12718457/match-exact-word-using-grep)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:19:21.947

假设 ls 文件与文件系统无关（因此您不能使用文件系统），`grep '^init$'`应该可以解决问题。

* * *

xxd 结果：

```
00000a0: 2e67 6f6c 6466 6973 682e 7263 0d0a 696e  .goldfish.rc..in
00000b0: 6974 0d0a 6465 6661 756c 742e 7072 6f70  it..default.prop 
```

基于这个 hexdump，我建议你先把它变成 unix 风格：

```
adb shell ls /|tr -d '\015'|grep '^init$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:25:56.737

有问题`grep`吗？怎么样`awk`？

```
ls | awk '$1 == "init"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T00:12:07.783

问题是您想要执行外壳扩展/grepping/等哪个外壳（设备或您的电脑）？

如果您希望您的设备进行处理，命令应该是

```
adb shell "ls / | grep ^init$" 
```

如果你想让你的电脑完成这项工作，命令是

```
adb shell "ls /" | tr -d '\r' | grep ^init$ 
```

但话又说回来，正如许多其他人所建议的那样，当您知道确切的文件名时 - 只需检查它是否存在，无需 grepping

```
adb shell "[ -f '/init' ] && echo 'found'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:18:24.747

要获得完全匹配，您必须使用 -E 参数激活正则表达式并使用行首和行尾符号：

```
grep -E "^init$" 
```

# hibernate - hibernate：更改一个bean字段然后发出查询，查询看到更改的字段

> ID：13013313
> 
> 赞同：0
> 
> 时间：2012-10-22T14:15:34.907
> 
> 标签：hibernate

我对会话中休眠 bean 设置器的行为感到困惑。我以为当你在会话中设置一个 bean 字段时，hibernate 只知道该 bean 是脏的，并且在会话关闭时，这是一个挂起的更新，它将被刷新到数据库中。

但是，我在一个休眠会话中运行了一个测试，在该会话中我通过其 id 获取一个 bean，将一个字段从 true 更改为 false，然后对所有此类 bean 的列表进行 HQL 查询，其中该字段为 false。当我调用 setter 时，“脏”bean 出现在结果集中，就好像 hibernate 已经进行了数据库更新一样。然后我在离开会话之前做了一个 session.clear() 来取消挂起的更新并驱逐所有的 bean。我认为这将有效地丢弃 setter 调用的脏更改。然而我检查了数据库，记录了从真到假的变化。注意：从未在此会话中调用 session.flush()。

看来，只要我调用 bean setter，Hibernate 就必须发出数据库 UPDATE 调用。但这似乎不对？

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:20:07.643

没错，Hibernate 在查询之前会刷新所有挂起的更改（如果它决定挂起的更改可能会影响查询结果）。如果您不想保存对 DB 的任何更改，则必须回滚事务。如果您调用`clear()`但提交事务，它将被持久化在 DB 中，因为`clear()`调用太晚（在 SQL UPDATE 之后）。或者按照 kamlesh 的建议更改冲洗模式，但请确保在选择特定冲洗模式时知道自己在做什么。

PS：欢迎来到 Hibernate 世界。期待更多这样的惊喜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:10:46.913

只需检查休眠的会话FlushMode。如果它是**Always**或**Auto**模式，则休眠将在执行新查询之前将脏数据刷新到数据库中。

[FlushMode 的 java 文档](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/FlushMode.html)

# html - 使用 Colorbox 平滑 Div 滚动 - 图库

> ID：13013314
> 
> 赞同：0
> 
> 时间：2012-10-22T14:15:37.033
> 
> 标签：html, scroll, colorbox, image-gallery, smooth

我在使用 Smooth Div Control 时遇到了一个问题。我认为这是一件小事。

我现在在主页上有四个画廊，都使用 Smooth Div Scroll。有些图像是占位符，但我只是想确保图库正常运行。我不明白为什么第四个可滚动画廊与前三个不同且更大？

这里再次链接： [http ://www.gerardtonti.com/Scrollable%20Gallery%202/index.html](http://www.gerardtonti.com/Scrollable%20Gallery%202/index.html)

```
<!DOCTYPE html>
<html>
<head>
<title>Untitled</title>

<!-- the CSS for Smooth Div Scroll -->
<link rel="Stylesheet" type="text/css" href="css/smoothDivScroll.css" />
<link rel="Stylesheet" type="text/css" href="css/colorbox.css" />

<!-- Styles for my specific scrolling content -->
<style type="text/css">

#makeMeScrollable
{
    width:100%;
    height: 150px;
    position: relative;
}
#makeMeScrollable div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}

#makeMeScrollable2
{
    width:100%;
    height: 150px;
    position: relative;
}
#makeMeScrollable2 div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}

#makeMeScrollable3
{
    width:100%;
    height: 150px;
    position: relative;
}
#makeMeScrollable3 div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}​

#makeMeScrollable4
{
    width:100%;
    height: 150px;
    position: relative;
}
#makeMeScrollable4 div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}​

</style>

</head>

<body>
<style css="text/css">
body {background-color: black; background-image:url("images/background.jpg");    background-repeat: repeat}
</style>

<img src="images/FineArt.png">

<div id="makeMeScrollable">
    <a href="images/paintings/Nude_Big.jpg"><img src="images/paintings/Nude.jpg" alt="Nude" id="field" width="330" height="330" /><img src="images/spacer.png" width="15"></a>
    <a href="images/paintings/Walter_Big.jpg"><img src="images/paintings/Walter.jpg" alt="Walter" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/paintings/OneOfUs_Big.jpg"><img src="images/paintings/OneOfUs.jpg" alt="One Of Us" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
</div>
<img src="images/PublicArt.png">

<div id="makeMeScrollable2">
    <a href="images/publicart/Elevate1_Big.jpg"><img src="images/publicart/Elevate1.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
</div>
<img src="images/CoffeeHouse.png">

<div id="makeMeScrollable3">
    <a href="images/coffeepaintings/TazzaDoro_Big.jpg"><img src="images/coffeepaintings/TazzaDoro.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/charcoal_Big.jpg"><img src="images/portraits/charcoal.jpg" alt="charcoal" id="field" /><img src="images/spacer.png" width="15"></a>
</div>

<img src="images/Portraits.png">

<div id="makeMeScrollable4">
    <a href="images/portraits/Erin_Big.jpg"><img src="images/portraits/Erin.jpg" alt="Erin" id="Erin" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/ErinColor_Big.jpg"><img src="images/portraits/ErinColor.jpg" alt="Erin Color" id="Erin Color" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Robert_Big.jpg"><img src="images/portraits/Robert.jpg" alt="Robert" id="Robert" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Scott_Big.jpg"><img src="images/portraits/Scott.jpg" alt="Scott" id="Scott" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Sean_Big.jpg"><img src="images/portraits/Sean.jpg" alt="Sean" id="Sean" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Nate_Big.jpg"><img src="images/portraits/Nate.jpg" alt="Nate" id="Nate" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Bill_Big.jpg"><img src="images/portraits/Bill.jpg" alt="Bill" id="Bill" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Erin3_Big.jpg"><img src="images/portraits/Erin3.jpg" alt="Erin3" id="Erin3" /><img src="images/spacer.png" width="15"></a>
    <a href="images/portraits/Erin4_Big.jpg"><img src="images/portraits/Erin4.jpg" alt="Erin4" id="Erin4" /><img src="images/spacer.png" width="15"></a>
</div>

<!-- LOAD JAVASCRIPT LATE - JUST BEFORE THE BODY TAG 
     That way the browser will have loaded the images
     and will know the width of the images. No need to
     specify the width in the CSS or inline. -->

<!-- jQuery library - Please load it from Google API's -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<!-- jQuery UI Widget and Effects Core (custom download)
You can make your own at: http://jqueryui.com/download -->
<script src="js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
<!-- Latest version of jQuery Mouse Wheel by Brandon Aaron
 You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="js/jquery.mousewheel.min.js" type="text/javascript"></script>
<!-- jQuery Kinetic - for touch -->
<script src="js/jquery.kinetic.js" type="text/javascript"></script>
<!-- Smooth Div Scroll 1.3 minified-->
<script src="js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>
<!-- If you want to look at the uncompressed version you find it at
 js/jquery.smoothDivScroll-1.3.js -->
<!-- Colorbox -->
<script src="js/jquery.colorbox-min.js" type="text/javascript"></script>

<!-- If you want to look at the uncompressed version you find it at
     js/jquery.smoothDivScroll-1.3.js -->

<!-- Plugin initialization -->
<script type="text/javascript">
$(document).ready(function () {
// Init Smooth Div Scroll   
$("#makeMeScrollable").smoothDivScroll({
mousewheelScrolling: "allDirections",
manualContinuousScrolling: true,
autoScrollingMode: "onStart",
autoScrollingDirection:"endlessLoopRight"
});
$("#makeMeScrollable2").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    manualContinuousScrolling: true,
    autoScrollingMode: "onStart",
    autoScrollingDirection:"endlessLoopLeft"
});
$("#makeMeScrollable3").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    manualContinuousScrolling: true,
    autoScrollingMode: "onStart",
    autoScrollingDirection:"endlessLoopRight"
});
$("#makeMeScrollable4").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    manualContinuousScrolling: true,
    autoScrollingMode: "onStart",
    autoScrollingDirection:"endlessLoopLeft"
});

// Init colorbox
$("#makeMeScrollable a").colorbox({ speed: "500" });
$("#makeMeScrollable2 a").colorbox({ speed: "500" });
$("#makeMeScrollable3 a").colorbox({ speed: "500" });
$("#makeMeScrollable4 a").colorbox({ speed: "500" });
});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:27:55.057

您的`css styles`部分有问题：

```
#makeMeScrollable3 div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}â€‹ //here

#makeMeScrollable4 div.scrollableArea a
{
    border: none;
    position: relative;
    float: left;
    margin: 0;
    padding: 0;
}â€‹ //here 
```

# markdown - 如何使用 PageDown Markdown 编辑器？

> ID：13013315
> 
> 赞同：37
> 
> 时间：2012-10-22T14:15:38.717
> 
> 标签：markdown, pagedown

我想为用户提供实时预览使用 Markdown 创建的笔记的能力。但是我在该项目中找不到任何下载。

如何开始使用[PageDown Markdown](https://github.com/balpha/pagedown)编辑器？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-09-30T14:34:22.747

PageDown 的文档非常混乱。我将尝试在这里创建一个更易于使用的示例。

# 必要的位

## JS

```
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Converter.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Editor.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Sanitizer.js"></script> 
```

您还可以使用`.min.js`来自 CDNjs 的版本

## CSS

```
<link rel="stylesheet" 
      href="//cdn.rawgit.com/balpha/pagedown/master/demo/browser/demo.css" />

<style>
    .wmd-button > span {
        background-image: 
          url('//cdn.rawgit.com/derobins/wmd/master/images/wmd-buttons.png');
        background-repeat: no-repeat;
        background-position: 0px 0px;
        width: 20px;
        height: 20px;
        display: inline-block;
    }
</style> 
```

您可能不想直接依赖源代码控制文件进行生产使用，但它可以在紧要关头工作。

## HTML

PageDown 编辑器对页面上存在的 html 有几个期望。

```
<div id="wmd-button-bar"></div>

<textarea id="wmd-input" class="wmd-input"></textarea>

<div id="wmd-preview" class="wmd-panel wmd-preview"></div> 
```

## 脚本

```
<script>
    var converter = Markdown.getSanitizingConverter();
    var editor = new Markdown.Editor(converter);
    editor.run();
</script> 
```

这应该让你启动并运行。有关如何操作图像插入、多个编辑器或添加您自己的自定义插件的更多高级信息，请参阅[原始文档](https://code.google.com/p/pagedown/wiki/PageDown)。

* * *

## 补充说明

如果您有预先存在的 Markdown 文本，例如您正在展示编辑器来编辑现有页面，您需要做的就是在 textarea 中插入 Markdown 内容。请注意，如果您执行以下操作：

```
<textarea id="wmd-input" class="wmd-input">
    @Model.Markdown
</textarea> 
```

textarea 标记内的空格将被视为 Markdown 并按此处理，这可能会导致意外行为。（字面上发生在我身上，因为我想知道为什么我要对应该是 ap 标签的代码进行格式化）

确保将元素定义为：

```
<textarea id="wmd-input" class="wmd-input">
@Model.Markdown
</textarea> 
```

注意没有任何缩进。

## H4-H6 使用情况。

如果您希望`#### H4`被翻译成`<h4>H4</h4>`您需要修改**Markdown.Sanitizer.js**`basic_tag_whitelist`内部的变量

 **如果您想支持 Header 按钮具有更多 H1 和 H2，例如 H1-H4，请查看我的要点：[https](https://gist.github.com/dotnetchris/0f68c879082343295503) ://gist.github.com/dotnetchris/0f68c879082343295503尽我所能告诉没有办法除了直接修改`commandProto.doHeading`方法之外，支持这个。在这个特定的要点中，我重新调整标题以从 H4 开始，它可以很容易地修改为从 H6 开始。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-27T15:41:29.783

我创建了两个编辑器。第一个输入被清理，第二个没有被清理。

```
.pagedown { width: 400px; }
.wmd-button, .wmd-spacer { display: none; }
.wmd-input { width: 400px; height: 100px; }
.wmd-preview { margin-bottom: 40px; background-color: #eef;}
```

```
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Converter.js"
> </script>
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Editor.js">
> </script>
<script src="//cdnjs.cloudflare.com/ajax/libs/pagedown/1.0/Markdown.Sanitizer.js"
> </script>
<div class="pagedown">
    <div id="wmd-button-bar-first" class="wmd-button-bar"></div>
        <textarea id="wmd-input-first" class="wmd-input">
**first editor**

the *input* is sanitized:

<marquee>PageDown!</marquee>
        </textarea>
        <div id="wmd-preview-first" class="wmd-preview"></div>
     </div>

     <div class="pagedown">
     <div id="wmd-button-bar-second" class="wmd-button-bar"></div>
     <textarea id="wmd-input-second" class="wmd-input">
**second editor**

the *input* is NOT sanitized:

<marquee>PageDown!</marquee>
</textarea>
      <div id="wmd-preview-second" class="wmd-preview"></div>
      </div>

<script type="text/javascript">
    var converter1 = Markdown.getSanitizingConverter();
    var editor1 = new Markdown.Editor(converter1, '-first');
    editor1.run();

    var converter2 = new Markdown.Converter();
    var editor2 = new Markdown.Editor(converter2, '-second');
    editor2.run();
</script>
```**

# symfony - 如何在 Symfony 2 中使用 3rd-party 库

> ID：13013318
> 
> 赞同：1
> 
> 时间：2012-10-22T14:15:42.570
> 
> 标签：symfony

我有一个类处理一些我希望在我的主站点包中提供的 API 集成，如下所示：

```
class ACH {
  public function __constructor();
  public function addACHTransaction();
  ...
} 
```

如何在 Symfony 2 中集成这个类，以便我可以通过执行以下操作在我的控制器和实体中使用它：

```
$ach = new ACH(); 
```

**编辑： **这是我的 autoload.php 文件的内容。

```
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:27:25.230

试试 Symfony[类加载器组件](http://symfony.com/doc/2.0/components/class_loader.html)。

您可能需要创建一个新的包装类，以防您的第 3 方库不遵循 symfony 标准（即使用命名空间）。对于 sf2.0 看看这篇[博客文章](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2)。

**编辑**：这篇[reddit 帖子](http://www.reddit.com/r/PHP/comments/113u8u/including_zend_1_in_symfony_21_finally_fixed_it/)解释了如何处理`Call to undefined method Composer\Autoload\ClassLoader::registerPrefixes()`错误。我还没有测试过它，但也许 ClassLoader 文档对于 sf2.1 来说还不是最新的。

`app/autoload.php`在您的文件中添加这些行：

```
$loader->add('foo_', __DIR__.'/../vendor/Foo/lib');
set_include_path(__DIR__.'/../vendor/Foo/lib'.PATH_SEPARATOR.get_include_path()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:51:25.130

[ClassLoader](https://github.com/composer/composer/blob/master/src/Composer/Autoload/ClassLoader.php) Composer 使用与`ClassLoader`Symfony 提供的不同。尝试跟随，

```
$achMap = array(
    'ACH' => 'path/of/ACH.php'
);
$loader->addClassMap($achMap); 
```

# drupal - 在 Drupal 中，如何在不使用 .tpl 文件的情况下仅输出内容类型标记（无页面标记）

> ID：13013319
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:15:42.143
> 
> 标签：drupal, content-management-system

使用 D7。我有几个实例，我只需要输出内容类型标记，没有页面标记（即弹出内容）。目前，我为每种内容类型创建了几个 tpl 文件（针对每个渲染层），剥离了所有周围的 html，这些 tpl 只有一个输出行。这极其低效和繁琐。我知道必须有一种更简单的方法来处理在 template.php 文件中执行此操作我似乎无法找到答案。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:51:26.323

我用以下技巧做到了这一点

**1) 编辑你的 template.php**

```
 function mytheme_preprocess_page(&$variables, $hook) {
   if (isset($_GET['modal']) && $_GET['modal'] == true) {
     $variables['theme_hook_suggestions'][] = 'page__modal';
   }
 } 
```

**2）新建文件页面--modal.tpl.php**

从普通 page.tpl 复制所有内容并删除所有不必要的内容，例如 #header 或 tabs 或 footer

**3) 您添加的每个页面 ?modal=1 现在都将使用此模板** 与[l() 函数一起使用](http://api.drupal.org/api/drupal/includes!common.inc/function/l/7)

**4) 高级的东西**

如果您想自己但通过类属性向每个链接添加查询：在您的普通 page.tpl 中包含一个小 javascriptfunction，它使用类“modal”解析所有链接并以这种方式添加模式

类似的东西

```
$(function() {
   $("a.modal").attr('href', function(i, h) {
     return h + (h.indexOf('?') != -1 ? "&modal=true" : "?modal=1");
   });
}); 
```

另请参阅[4\. 将 JavaScript 添加到您的主题或模块](http://drupal.org/node/304255)

# objective-c - 后退按钮在导航控制器上不起作用

> ID：13013324
> 
> 赞同：0
> 
> 时间：2012-10-22T14:16:01.033
> 
> 标签：objective-c, dismiss, navigationitem

我有一个我不明白的奇怪问题，因此不知道从哪里开始调试。

首先，要求

我有一个 UISplitView。主视图包含一个将不同视图加载到详细视图中的表。对于一个表格单元格，我想要一个全屏加载的网站。因此，我没有隐藏主视图并调整细节视图的大小，而是展示了一个视图控制器。我有这个问题。

编码

以下是我目前拥有的代码 - 大大简化以避免混乱

```
-- MASTER VIEW --

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ProjectWebViewController *detailView=[[ProjectWebViewController alloc] init];
    UIViewController  *localdetailViewController = detailView;

    UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:localdetailViewController];
    [self presentViewController:navController animated:YES completion:nil];
} 
```

然后我在呈现的视图控制器中有以下内容

```
-- PRESENTED VIEW CONTROLLER --

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIWebView * webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];

    NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
   [webView loadRequest:request];

    [[self view] addSubview:webView];

   UIBarButtonItem *backBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:nil action:@selector(closeSelf)];
    [[self navigationItem] setLeftBarButtonItem:backBtn];
}

-(void)closeSelf
{
    [[self navigationController] dismissViewControllerAnimated:YES completion:nil];
} 
```

问题

上述工作很好，但有一个例外。我添加到导航栏的后退按钮在单击时没有任何作用。但是，如果我单击已加载网页上的任何空白区域，则后退按钮将起作用。我已经测试过很多次了。即使我单击一些空白区域然后单击网页上的链接，后退按钮也会再次停止工作，直到在当前网页上单击更多空白区域。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:13:16.623

```
UIBarButtonItem *backBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:nil action:@selector(closeSelf)]; 
```

target 应该设置为 self 而不是 nil

```
UIBarButtonItem *backBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(closeSelf)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:41:07.613

我会推荐，因为页面正在接管整个屏幕，而不是在拆分视图中作为详细视图控制器推送，以将其作为 UIView 添加到屏幕并将其添加到父级，这样您就不必担心整个导航控制器。然后你可以简单地调用`[self.view removeFromSuperview];`来关闭 webview。

在 didSelectRowForIndexPath 内部调用`createModalWebView`您的行选择；下面是一些未经测试的代码，应该根据您提供的代码工作。

```
- (void)createModalWebView{
        UIWebView * webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];

        NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
       [webView loadRequest:request];

        //YOUR MASTERVIEW 
        [[self view] addSubview:webView];

        UIBarButtonItem *backBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:nil action:@selector(closeSelf)];
        [[self navigationItem] setLeftBarButtonItem:backBtn];
    }

-(void)closeSelf
{
    //REMOVE THE WEBVIEW FROM SCREEN
    [[self view] removeFromSuperview];
} 
```

# android - 自定义单选按钮太大

> ID：13013325
> 
> 赞同：0
> 
> 时间：2012-10-22T14:16:10.433
> 
> 标签：android, radio-button

有谁知道如何缩小自定义单选按钮？可绘制对象为 200x200px 大，但设置 layout_width 或 width 只会显示原始图像的一部分。

我可以通过为四种密度创建不同的尺寸来做到这一点，但我认为这不是正确的方法。一定有办法缩小它！还是有可能，没有？

```
 <RadioGroup
        android:id="@+id/rg"
        android:layout_width="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:width="30dp" 
            android:height="30dp"
            android:button="@drawable/rb_selector"
            android:text="Don't stop me now"
            />

        <RadioButton
            android:id="@+id/radioButton2"
            android:width="30dp"
            android:height="30dp"
            android:button="@drawable/rb_selector"
            android:text="I want to break free" />

        <RadioButton
            android:id="@+id/radioButton3"
            android:width="30dp"
            android:height="30dp"
            android:button="@drawable/rb_selector"
            android:text="Bohemian rhapshody" />

        <RadioButton
            android:id="@+id/radioButton4"
            android:width="30dp"
            android:height="30dp"
            android:button="@drawable/rb_selector"
            android:text="Another one bites the dust" />

</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:30:53.280

`android:button`，`android:checkmark`并且`android:drawable_*`从不缩放。用于显示它们的大小取决于它们所在的密度文件夹。

# java - 使用JSoup，你能得到一个节点在html中的位置/索引吗？

> ID：13013327
> 
> 赞同：3
> 
> 时间：2012-10-22T14:16:12.423
> 
> 标签：java, html, html-parsing, jsoup

一旦 JSoup 解析了一个 html 字符串，你能从 Node 对象转到开始/结束字符串索引吗？

我认为这是不可能的。但也许有人尝试编辑 JSoup 来公开这些信息？或者有另一种将节点匹配到字符串的解决方案？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:11:01.360

我想您可以从 jsoup 获得的唯一位置是[elementSiblingIndex](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#elementSiblingIndex%28%29)和[兄弟索引](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#siblingIndex%28%29)。可能你可以用它们计算一些东西，但如果这是一个好主意，就不要舒尔。

你能提供更多关于你想做什么的信息吗？也许您的问题还有另一种解决方案。

# javascript - 如何以与收到的完全相同的布局/格式显示 XML 文件的内容？

> ID：13013332
> 
> 赞同：0
> 
> 时间：2012-10-22T14:16:23.010
> 
> 标签：javascript, jquery, xml, parsing, loops

我在按接收顺序显示 XML 文件的内容时遇到了一些问题。

例如，XML 文件包含**页面**节点，每个页面节点包含各种子节点，如**a 、 b 、 c**。页面子节点的布局各不相同，我需要在显示输出中模仿这种布局。

示例 XML 文件：

```
<page>      
    <a>
        test content...
    </a>
    <a>
        test content...
    </a>
    <c>
        test content...
    </c>
    <a>
        test content...
    </a>
    <b>
        test content...
    </b>
</page> 
```

目前我收集的内容如下：

```
$(xml).find('page').each(function(){    

     $(this).find('a').each(function(){ 
         ...doing stuff here
     }

     $(this).find('b').each(function(){ 
         ...doing stuff here
     }

     $(this).find('c').each(function(){ 
         ...doing stuff here
     }

    } 
```

我的问题是，通过使用这种方法收集数据，我最终会得到这样的显示：

```
<a>
<a>
<a>
<b>
<c> 
```

但是我需要的是 XML 文件中的布局：

```
<a>
<a>
<c>
<a>
<b> 
```

所以我的问题是，我如何遍历 XML 文件并在一个循环中收集数据，而不是为每个子节点单独循环。本质上，我需要 Javascript / jQuery 等价物：

```
for(int i = 0; i < File.size; i++){

 if(i==<a>){
  do something
 }
 else if(i==<b>){
  do something
 }
 else if(i==<c>){
  do something
 }
} 
```

...但**我**可以是一个字符串而不仅仅是一个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:17:20.740

谢谢冠军！我喜欢你的风格，你的回答并没有给我所有的答案，而是我需要找到它们的推动力。

```
$(this).find('*').each(function(){ 
        // ...doing stuff here
} 
```

以上正是我需要按所需顺序从上到下遍历文件的内容......完美！

我的下一个问题是弄清楚如何一路访问 XML 节点，我使用了“如果”这样的情况......

```
if(this.tagName == "a"){
    //...do what i need in here
} 
```

所以最后我的代码看起来像这样：

```
$(this).find("*").each(function(){

    if(this.tagName == "a"){
      //...doing stuff
    }
    if(this.tagName == "b"){
      //...doing stuff
    }
    if(this.tagName == "c"){
      //...doing stuff
    }
}); 
```

..允许我遍历选定的 XML 文件（或文件中的标记），并按照读取的顺序挑选出我需要的数据。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:18:59.753

使用 * 代替标签名称

```
$(xml).find('page').each(function(){    
     $(this).find('*').each(function(){ 
        // ...doing stuff here
     }

    } 
```

[演示](http://jsbin.com/ubelob/2/edit)

# django - Django：对子子外来对象的计数求和

> ID：13013333
> 
> 赞同：2
> 
> 时间：2012-10-22T14:16:28.210
> 
> 标签：django, django-models

我有很多 Twavail 的热门歌曲 我有很多 Twavail for Twaffic

我想总结 Twaffic 的点击数，并在 Twaffic 条目（hits_count）中获得一个附加字段，但我有一些困难。

* * *

这是我的模型：

```
class Twaffic(models.Model):
    user = models.ForeignKey(User,editable=False)
    enchere = models.PositiveIntegerField(default=1)

class Twavail(models.Model):

    user = models.ForeignKey(User,editable=False)
    twaffic = models.ForeignKey(Twaffic,editable=False,related_name='twavaux')
    tweet_id = models.CharField(max_length=20,default=0, editable=False)

class Hit(models.Model):
    twavail = models.ForeignKey(Twavail,editable=False,related_name='hits')
    date = models.DateTimeField(max_length=140,auto_now=True,default="") 
```

我试过了：

```
twaffics=Twaffic.objects.annotate(hits_count=Sum('twavaux__hits__count')).filter(user=request.user) 
```

但我收到以下错误：

无法将关键字“命中”解析为字段。选项有：twaffic、用户

2级前真的不可能得到这些信息吗？hits 是正确的相关名称。也许我错过了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:43:11.793

试试用这个...

```
hit_count = Hit.objects.filter(twavail__id__in = Twavail.objects.filter(twaffic = twaffic_obj).values_list('id', flat=True)).count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:42:47.617

我找到了答案：

```
twaffics=Twaffic.objects.annotate(hits_count=Count('twavaux__hits')).filter(user=request.user) 
```

将 hits 应用程序添加到我的 settings.py 之后，它就可以工作了，这是重点。

# git - 如何在 git 中获取分支提示的提交 ID？

> ID：13013335
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:16:46.097
> 
> 标签：git

一个 git 子模块目前在一个分支上，我不确定它是否在尖端。如何获取分支提示的提交 ID，以便在必要时拉起子模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:24:26.910

如果你在`foo`子模块的一个分支上，那么根据定义你就在那个分支的顶端。也许你想要的是根据“超级模块”中提交的版本找出子模块应该在什么提交？为此，您可以执行以下操作：

```
$ git rev-parse HEAD:mysubmodule
1b6577014983eb68c56025e6d3b95c8b9b7fc511 
```

...然后将其与：

```
$ cd mysubmodule
$ git rev-parse HEAD
4dd9ac74b6dc1d0df8de5029656663bd879a4773 
```

但是，您只需查看以下输出即可更轻松地看到这一点`git status`：

```
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   mysubmodule (new commits) 
```

“新提交”表示您的子模块落后于提交的版本，应该使用`git submodule update mysubmodule`.

您还可以从 的输出中看到这一点，如果需要更新子模块，则`git submodule`与您的子模块对应的行将以该行开头。`+`

* * *

您的问题的另一种解释是您的子模块位于分支上`foo`，但您想知道分支的尖端`foo`在远程存储库中的位置。为此，您可以执行以下操作：

```
$ cd mysubmodule
$ git fetch origin
$ git rev-parse origin/foo 
```

# java - 如何将 jnlp 与 OSX 停靠图标捆绑在一起；这在 java 首选项中似乎不再可能

> ID：13013337
> 
> 赞同：7
> 
> 时间：2012-10-22T14:17:09.297
> 
> 标签：java, macos, jnlp

Oracle 的 JDK 7 Java Preferences 页面中似乎不存在将 JNLP 打包为应用程序的选项，因为它在苹果中如此[处所述](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html)

> OS X 桌面与 Java Web Start 的集成允许用户从任何 Java Web Start 应用程序创建本地应用程序包。Java 首选项中的快捷方式创建设置控制在打开 Java Web Start 应用程序时是否提示用户创建应用程序包。捆绑的 Java Web Start 应用程序具有本机应用程序包的所有优点，这些优点在“OS X 应用程序包”中进行了描述。</p>

为了解决这个问题，我使用 Automator 创建一个 .app，它运行一个执行 JNLP 的 shell 脚本。这允许我使用应用程序图标，但我所有配置停靠图标的尝试都失败了。

我尝试使用创建一个 .icns 文件`iconutil`并将其添加到文件夹中，然后在该字段下`Resources`指定 .icns 文件，但在运行应用程序时我仍然在 Dock 中看到 java 咖啡杯图标。`Contents/Info.plist``"Icon File"`

我尝试过的另一件事是将`-Xdock:icon=icon.jpg`参数传递给，`javaws`但这似乎只适用于常规 Java 程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:38:17.393

我找到了解决我的问题的方法。您可以直接在 jnlp 中引用它，而不是将图标捆绑在 .app 文件中。[JNLP 开发人员指南](http://docs.oracle.com/javase/1.4.2/docs/guide/jws/developersguide/syntax.html)包含对`icon element`

> 图标元素：包含 GIF 或 JPEG 格式的图像文件的 HTTP URL。图标用于表示应用程序
> 
> 在启动期间，Java Web Start 将应用程序呈现给用户；在应用程序管理器中；在桌面快捷方式中。下载过程中会显示一个 64x64 的图标；在应用程序管理器和桌面快捷方式中使用 32x32 图标。Java Web Start 会自动将图标调整为适当的大小。

它没有明确提到那里的 OSX 扩展坞，但快速测试显示它确实也将图标放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T03:12:51.597

我会推荐一种不同的方法，它也可以帮助您使用其他部署方法（不仅是 jnlp）。

您可以在代码中使用反射来添加特定于 OSX 的代码。我已经在 Windows 上编译了我的应用程序并为 mac 添加了停靠图标。

```
javax.swing.ImageIcon icon = ...
Class c = Class.forName("com.apple.eawt.Application");
Method m = c.getMethod("getApplication");
Object applicationInstance = m.invoke(null);
m = applicationInstance.getClass().getMethod("setDockIconImage",  javax.swing.ImageIcon.class);
m.invoke(applicationInstance,icon); 
```

# c# - 通过 TCP/IP 发送 XML

> ID：13013339
> 
> 赞同：2
> 
> 时间：2012-10-22T14:17:18.100
> 
> 标签：c#, xml, stream

我有一个通过 TCP/IP 连接到另一个应用程序的类发送请求（以 XML 的形式）并接收响应（也以 XML 的形式）。

它确实有效，但是我有以下担忧：

1）它只因任意而有效`System.Threading.Thread.Sleep(5000)`；如果我把它拿出来，它会直接跳到带有部分数据的类的末尾。我需要它等到它到达流的末尾或超时。2）它不是很优雅

下面列出了整个课程，非常欢迎任何建议。

```
public XDocument RetrieveData()
{
    // Initialize Connection Details
    TcpClient Connection = new TcpClient();
    Connection.ReceiveTimeout = Timeout;
    MemoryStream bufferStream = new MemoryStream();

    // Compose Request
    String Request = "";
    Byte[] Data = ASCIIEncoding.ASCII.GetBytes(Request);

    // Connect to PG
    IAsyncResult ConnectionResult = Connection.BeginConnect(IPAddress, IPPort, null, null);
    while (!Connection.Connected)
    {
        System.Threading.Thread.Sleep(1000);
    }
    Connection.EndConnect(ConnectionResult);

    NetworkStream ConnectionStream = Connection.GetStream();

    // Send the request
    ConnectionStream.Write(Data, 0, Data.Length);
    ConnectionStream.Flush();

    // TODO. Tidy this up - Wait to ensure the entire message is recieved.
    System.Threading.Thread.Sleep(5000);

    // Read the response
    StringBuilder Message = new StringBuilder();
    byte[] ReadBuffer = new byte[1024];

    if (ConnectionStream.CanRead)
    {
        try
        {
            byte[] myReadBuffer = new byte[1024];
            int BytesRead = 0;

            do
            {
                BytesRead = PGConnectionStream.Read(myReadBuffer, 0, myReadBuffer.Length);
                Message.AppendFormat("{0}", Encoding.ASCII.GetString(myReadBuffer, 0, BytesRead));
            }
            while (PGConnectionStream.DataAvailable);
        }
        catch
        {
        }
    }

    XDocument doc = XDocument.Parse(Message.ToString());
    return doc;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:23:00.823

这就是问题：

```
while (PGConnectionStream.DataAvailable); 
```

*这只是检查现在*是否有任何可用数据。它无法判断以后是否还有更多内容。

目前尚不清楚您是否需要在同一流中容纳多条消息。如果你不这样做，那真的很容易：继续阅读，直到`Read`返回一个非正值。否则，您需要考虑一种指示数据结束的方案：

*   分隔符（很难在消息中转义分隔符）
*   长度前缀（意味着你不能开始写，直到你知道你会得到多少数据）
*   分块（长度前缀，但在单个块的基础上，用（比如说）一个长度为 0 的块来指示数据的结尾）

（根据 Adriano 的评论，当你真的想同步地做所有事情时使用异步 API 是没有意义的......而且你的变量命名不一致。）

# nsurlconnection - NSURLRequestReturnCacheDataElseLoad 在第一次请求时没有从缓存中加载？

> ID：13013342
> 
> 赞同：1
> 
> 时间：2012-10-22T14:17:26.713
> 
> 标签：nsurlconnection, nsurlcache

我正在创建一个需要从远程 API 获取大量信息的 iOS 应用程序。有很多 http 请求可以完美缓存，但似乎`NSURLConnection`缓存不够积极：每次我杀死应用程序并重新启动它时，所有请求都会再次发出，而不是来自缓存（iOS 5*应该*使用磁盘缓存）。如果我第二次（在应用程序生命周期内）发出相同的请求，它确实来自缓存。

我正在使用该`NSURLRequestReturnCacheDataElseLoad`策略，并且设置了 http 服务器上的缓存控制标头，因此可以缓存所有内容。

所以问题是每次应用程序启动时都会再次发出所有请求。为什么这不是来自磁盘？

**编辑**：似乎这个问题只存在于 url 中有查询时。例如，当我请求[http://www.apple.com/](http://www.apple.com/)时，一切都很好，在新的应用程序启动时，实际上没有发出任何请求。当我更改为[http://www.apple.com/?test](http://www.apple.com/?test)时，总是会发出第一个请求。

**编辑2**：看起来像`TTURLRequest`（three20的一部分）并且`SDURLCache`是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:40:21.317

回答我自己的问题：

解决方案是将 SDURLCache 添加到您的项目中，然后将此代码添加到您的`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中：

```
SDURLCache *URLCache = [[SDURLCache alloc] initWithMemoryCapacity:4 * 1024 * 1024 diskCapacity:24 * 1024 * 1024 diskPath:[SDURLCache defaultCachePath]];
[NSURLCache setSharedURLCache:URLCache]; 
```

这对缓存更具侵略性，包括带有查询的 url。

# maven - 制作WAR（Tapestry）时如何添加Eclipse中添加的所有外部jar

> ID：13013343
> 
> 赞同：2
> 
> 时间：2012-10-22T14:17:27.860
> 
> 标签：maven, maven-2, tapestry

我正在从 Eclipse 运行我的 Tapesry 项目。然后它遵守并在码头上运行。但我找不到创建的战争文件。但是，如果我转到命令提示符并尝试从 mvn 构建 war 文件，它将不知道我包含的外部 jars（用于 Google API）。如何手动将这些文件包含到 MVN 中？或者有什么简单的方法可以找到码头部署 WAR 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:22:36.170

如果要获取外部 jar（Google API），则必须将 jar 作为依赖项添加到项目的 pom.xml 中。
例如：

```
 <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>1.7.1</version>
    </dependency> 
```

对于您的项目的 Json 依赖项。
以同样的方式添加所有其他依赖于项目的 jar，`pom.xml`然后保存。Maven 将自动下载依赖的 jars，它也是可传递的。以下命令将执行相同的操作。

```
mvn clean install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:13:34.813

```
<project>
  <repositories>
    <repository>
      <id>google-api-services</id>
      <url>http://mavenrepo.google-api-java-client.googlecode.com/hg</url>
    </repository>
  </repositories>
  <dependencies>
    <dependency>
      <groupId>com.google.apis</groupId>
      <artifactId>google-api-services-discovery</artifactId>
      <version>v1-rev7-1.8.0-beta</version>
    </dependency>
  </dependencies>
</project> 
```

我从“http://code.google.com/p/google-api-java-client/wiki/APIs”找到了这个。所以你不需要单独添加每个罐子。

将以上内容添加到您的`pom.xml`电话中`mvn eclipse:eclipse -DdownloadSources=true`

# c# - 如何将二进制图像传递给图像处理程序以在 DataList 中显示？

> ID：13013345
> 
> 赞同：2
> 
> 时间：2012-10-22T14:17:32.280
> 
> 标签：c#, asp.net, image, httphandler

我有一个网页，其中有一个方法调用来在`DataList`控件中显示一些图像

MyImage.cs

```
class MyImage
{
    string Name { get; set; }
    byte[] Jpeg { get; set; } 
} 
```

MyImages.aspx.cs

```
public void DisplayMyImages(IEnumerable<MyImage> myImages)
{
    this.myImagesDataList.DataSource = myImages;
    this.myImagesDataList.DataBind();  
}

/// ...

protected void myImagesDataList_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item ||
        e.Item.ItemType == ListItemType.AlternatingItem)
    {
        MyImage myImage = (MyImage)e.Item.DataItem;
        Image myImageImage = (Image)e.Item.FindControl("myImageImage");

        // How to pass myImage.Jpeg to ImageHandler? form here

        myImageImage.ImageUrl = "~/Handlers/ImageHandler.ashx";
    }
} 
```

`ImageHandler`但是如果已经从数据库中提取并传递给`DisplayMyImages()`函数，如何传递 jpeg 图像呢？

评论：

我不想将它们保存回文件并将查询字符串中的路径传递给`ImageHandler`

无法使用标准查询字符串方法，因为我不想违反模型视图演示者方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:11:27.700

我刚刚[在 CodeProject 上回答了您的问题](http://www.codeproject.com/Messages/4405799/How-to-pass-binary-image-to-image-handler-to-displ.aspx)，但我也会在此处复制答案。

根据图像的大小以及需要支持的浏览器，您也许可以使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme#Web_browser_support)。

```
myImageImage.ImageUrl = "data:image/jpeg;base64," + Convert.ToBase64String(myImage.Jpeg); 
```

*（如果您使用的是 IE8，则限制为 32Kb；根本不支持早期版本的 IE。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:25:17.560

Normaly 图像应该由 ImageHandler 生成而不是传递给，所以只需翻转你的逻辑。你最终会得到这样的东西：

```
myImageImage.ImageUrl = "~/Handlers/ImageHandler.aspx?id=yourImageId"; 
```

确保设置正确的内容类型，如下所示：

```
context.Response.ContentType = "image/png"; 
```

这就是您编写图像以响应的方式：

```
byte[] fileData = null;
//TODO: load your image data into fileData!
context.Response.BinaryWrite(fileData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:27:56.917

传入图像的 ID 并在需要时直接从数据库中检索它并使用类似于的代码会更容易；

```
var data = //Code to retrieve byte[];

int len = data.Length;
response.ContentType = "image/png";
response.BinaryWrite(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:34:11.733

首先我认为你可能会出错

```
myImageImage.ImageUrl = "~/Handlers/ImageHandler.aspx"; 
```

注意：您需要在非文件中包含 ImageHandler`.ashx`文件`.aspx`。`.ashx Generic Handler`从 ImageHandler 检索图像时，它在上下文中用作图像。这是 ImageHandler 文件的正确格式。

```
imgProfile.ImageUrl = "ImageHandler.ashx?imgid=" + imageId.ToString(); 
```

[点击这里查看完整的参考。](http://www.dotnetlogix.com/Article/aspnet/194/Save-and-retrieve-image-to-and-from-database-in-aspnet.html)

希望，它可以帮助你。！！

# sql - 获取每年的数据

> ID：13013347
> 
> 赞同：1
> 
> 时间：2012-10-22T14:17:37.360
> 
> 标签：sql, sql-server, sql-server-2008

我的查询有问题，所以我有两个表：工作和工作答案，所以要获得我喜欢的每项工作的答案数量：

```
and ((month(a.created_at) = 10 and day(a.created_at) >= 1) 
      or (month(a.created_at) between 11 and 12) 
      or (month(a.created_at) between 1 and 8) 
      or (month(a.created_at) = 9 and day (a.created_at) <= 30)) 
```

现在我要做的另一个修改是在每年和两个日期之间（每年 9 月 1 日和 12 月 30 日）[field : created_at] 之间获得新的工作答案数量，

```
 +----------+-------+---------+------+----- +
     | year     | job title | number of answers |
     +----------+-------+---------+------+------+
     | 2008     | Job1      | 58                | 
     | 2010     | Job2      | 45                | 
     | 2012     | Job3      | 122               |
     +----------+-------+---------+------+------ 
```

年份和日期在 created_at 字段中...

编辑 ：

对于 01/10 到 30/9 我做：

```
 and ( (month(a.created_at) = 10 and day(a.created_at) >= 1) 
        or month(a.created_at)   between 11 and 12 
        or month(a.created_at) between 1 and 8 
        or (month(a.created_at) = 9 and day (a.created_at) <= 30)) 
```

编辑 2：

```
 delimiter $$
begin

declare @StartDay INT, @EndDay INT, @StartMonth INT, @EndMonth INT
Select @StartDay = 01, @StartMonth = 10, @EndDay = 30, @EndMonth = 09

Select year(a.created_at) as years , jd.JobDomain, count(a.Id) as nb_answer,   a.Job_id,   j.JobTitle 
 from JobAppliance a
 inner join Job j on a.Job_id =  j.PublicId
 inner join JobDestination d on j.Id=d.Job_id
 inner join Jjobdomain jd on  j.Id = jd.Job_id

 and 
(
@StartMonth = @EndMonth And 
Month(a.created_at) = @StartMonth And 
Day(a.created_at) >= @StartDay And 
Day(a.created_at) <= @EndDay
) Or (
@StartMonth != @EndMonth And (
(
 Month(a.created_at) = @StartMonth And
  Day(a.created_at) >= @StartDay
) Or (
  Month(a.created_at) Between @StartMonth + 1 And @EndMonth - 1
) Or (
  Month(a.created_at) = @EndMonth And
  Day(a.created_at) <= @EndDay
)
)
)

group by year(a.created_at) , a.Job_id, j.JobTitle;

end$$
delimiter ; 
```

我在声明中有语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:21:42.650

这应该给你想要的：

```
select year(a.created_at) , count(a.Id) as nb_answer, a.Job_id, j.JobTitle 
from JobAnswer a
inner join Job j on a.Job_id =  j.job_id
where month(a.created_at) between 9 and 11 Or (
  month(a.created_at) = 12 and
  day(a.created_at) = 1
)
group by year(a.created_at), a.Job_id, j.JobTitle; 
```

更新到新指定的日期范围

一个更通用的解决方案是使用一个带有 start_date、end_date 的表来定义感兴趣的范围并加入该范围。

对于一年内的连续日期范围，这可能更普遍，但我还没有测试过。这个想法是你填写你想要的@StartDay等的值

```
Declare @StartDay int, @EndDay int, @StartMonth int, @EndMonth int
Select @StartDay = 30, @StartMonth = 9, @EndDay = 1, @EndMonth = 12

Select Year(a.created_at), j.JobTitle, count(a.Id) as nb_answer 
from JobAnswer a
inner join Job j on a.Job_id =  j.job_id
where (
  @StartMonth = @EndMonth And 
  Month(a.created_at) = @StartMonth And 
  Day(a.created_at) >= @StartDay And 
  Day(a.created_at) <= @EndDay
) Or (
  @StartMonth != @EndMonth And (
    (
  Month(a.created_at) = @StartMonth And
      Day(a.created_at) >= @StartDay
    ) Or (
      Month(a.created_at) Between @StartMonth + 1 And @EndMonth - 1
    ) Or (
      Month(a.created_at) = @EndMonth And
      Day(a.created_at) <= @EndDay
    )
  )
)
Group By Year(a.created_at), j.JobTitle; 
```

# python - 带有 MultiIndex 的 Pandas DataFrame：检查索引之一中重复元素的有效方法

> ID：13013351
> 
> 赞同：2
> 
> 时间：2012-10-22T14:17:47.350
> 
> 标签：python, pandas, data-analysis

我正在处理这样的数据：

```
Sample  Detector        Cq
P_1   106    23.53152
P_1   106    23.152458
P_1   106    23.685083
P_1   135        24.465698
P_1   135        23.86892
P_1   135        23.723469
P_1   17  22.524242
P_1   17  20.658733
P_1   17  21.146122 
```

正如[这篇文章](https://stackoverflow.com/questions/12957593/pandas-reshape-data-with-duplicate-row-names-to-columns)中所建议的，我正在使用 MultiIndex 来处理它。但是，我想知道如何使用这样的结构进行一些额外的检查。让我们更好地解释一下：每个“样本”列都有固定数量的重复“检测器”元素，从 1（无重复）到多个重复元素。我想确保对于每个样本元素，检测器的数量始终相同（即，如果 P_1 有 3 个“106”检测器，则 P_2 也应该有 3 个“106”检测器）。

目前我这样做相当粗略：

```
def replicate_counter(dataframe, name):
    subset = dataframe.ix[name]
    num_replicates = subset.index.size / subset.index.unique().size
    return num_replicates

# Further down...
# dataframe is a MultiIndex DataFrame like above
counts = pandas.Series([replicate_counter(dataframe, item[0]) for item
                        in dataframe.index]).unique()

if counts.size != 1:
    raise ValueError("Detectors not equal for all samples") 
```

对我来说这似乎很 hacky，可能有更好的方法在 pandas 中做到这一点。这怎么可能实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:27:45.883

事实证明`groupby`，要使这一点清晰简洁（并且可能也更有效），需要做些什么：

```
counts = dataframe.groupby(level=["Sample", "Detector"])
counts = counts.size().unique()

if counts.size != 1:
    raise ValueError("Detectors not equal for all samples") 
```

# php - 提交表单时从 URL 获取 ?var=value

> ID：13013354
> 
> 赞同：0
> 
> 时间：2012-10-22T14:17:51.060
> 
> 标签：php, forms, get, submit

我在 URL 中保存的页面上有一个表单`page?slot=1`，我希望表单与该`slot=1`值相对应，但它似乎没有转移到`action="process.php"`我设置的那个。

您是否知道如何捕获选择了哪个插槽，然后将其与表单提交一起传输？

（selected_battle.php 需要 slot=1 并使其 $selected_battle = 1；然后 insert_battle_data.php 说如果 selected_battle=1，则使用那里的表格。但它永远不会得到 $selected_battle=2，只有 1。选择的战斗 php 也在下面。） FORM CODE：

```
<?php
require("selected_battle.php");
?>
<div style="float:left; margin-left:-40px; margin-top:-153px;">

        <img src="../images/upload/btn_choosefile.png" border=0 style="margin-right:0px; float:right; margin-top:20px;"/>
        </div>
    </div>

    <div style="float:left; margin-left:-468px; margin-top:40px;">

     <form action="/controlpanel/insert_upload_battle_data.php" method="post" enctype="multipart/form-data">
     <?php if (isset($_GET['slot'])) { ?>
<input type="hidden" name="slot" value="<?php echo htmlspecialchars($_GET['slot']); } ?>">
    <input type="file" name="file" id="file" style="color:#FFFFFF; background-color: transparent; border-width: 0; border-color:transparent; border-style:hidden; width:240px; height:11px; padding-left:5px; margin-left: 428px; margin-top:-174px; float:left; font:'Lucida Console', Monaco, monospace; font-size:9px; padding-bottom:5px;" />

<input type="submit" name="submit" value="" class="ready_button" border="0" style="margin-left:683px; margin-top:-175px; float:left;" />

</div> 
```

精选战斗 PHP

```
<?php
$selected_battle = 1;

if (!empty($_GET['slot'])) {
    $slot = implode(',', $_GET);

} else {
    $slot = 1;
}
echo $slot;

if ($slot == 1) {
  $selected_battle=1;
}

else if ($slot == 2) {
  $selected_battle=2;
}

else if ($slot == 3) {
  $selected_battle=3;
}

else if ($slot == 4) {
  $selected_battle=4;
}

else if ($slot == 5) {
  $selected_battle=5;
}

else if ($slot == 6) {
  $selected_battle=6;
}

else if ($slot == 'q') {
  $selected_battle=7;
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:19:35.317

只需使用隐藏输入将其包含在表单中即可。

```
<form action="process.php">
<?php if (isset($_GET['slot'])) { ?>
<input type="hidden" name="slot" value="<?php echo htmlspecialchars($_GET['slot']); ?>">
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:20:03.223

您可以使用其中一个`$_GET["slot"]`或`$_REQUEST["slot"]`（`$_REQUEST`包含两者`$_GET`，`$_POST`因此如果您同时使用两者会很方便）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:20:53.397

您可以像这样使用`$_GET`或`$_REQUEST`检查php，

```
 if(isset($_GET['slot']) {
    //put in the value for any input element, inside the form to be submitted.
   } 
```

# ios - Titanium，使用 createaudioPlayer 前进和后退

> ID：13013362
> 
> 赞同：0
> 
> 时间：2012-10-22T14:18:28.843
> 
> 标签：ios, slider, titanium, duration, audio-player

我创建了一个 audioPlayer 和一个滑块来协同工作：滑块在音乐播放时移动。确实如此。现在我希望能够使用滑块前进和后退。它不起作用，我想这是因为它是一个流组件。但是由于那已经是缓冲的内容，它至少不能倒带吗？假设我将歌曲长度放入我的数组中。不可能制作一个功能来控制我在歌曲中的位置吗？

好吧，它不起作用。有什么建议么？这与 createSound 完美搭配。

```
slider.addEventListener('touchstart', function(e) {
audioPlayer.pause(); 
});

slider.addEventListener('touchend', function(e) {
audioPlayer.progress = slider.value;
audioPlayer.play(); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:08:16.620

这就是我解决问题的方法：

[http://developer.appcelerator.com/question/143856/custom-forward-and-rewind-with-slider-on-createvideoplayer#comment-144979](http://developer.appcelerator.com/question/143856/custom-forward-and-rewind-with-slider-on-createvideoplayer#comment-144979)

# php - 星期几的 PHP 或 MySQL 日期格式

> ID：13013364
> 
> 赞同：1
> 
> 时间：2012-10-22T14:18:40.980
> 
> 标签：php, mysql, dayofweek

我有一列存储星期几的 1 位值：

```
0 = Sunday
1 = Monday
...
6 = Saturday 
```

我尝试了 PHP`date('l', $row['dow'])`和 MySQL `DATE_FORMAT(dow, '%w')`，但都没有返回星期几字。

是否可以在 PHP 或 MySQL 中执行此操作，或者我只需要创建一个 array() var？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:24:36.290

您需要完整的日期/时间戳才能使任何日期格式化功能正常工作。只是“1”或“2”对这些函数没有任何意义（或者至少不是你想要的意思）。如果您要存储完整的时间戳，则无需再次单独存储星期几。否则，您需要自己将那些原本毫无意义的数字翻译成一个词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:22:49.430

```
$dow = date('l', strtotime("Sunday +{$row['dow']} days")); 
```

演示：[http ://codepad.viper-7.com/LzZDHf](http://codepad.viper-7.com/LzZDHf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:21:24.770

上`date( 'l' )`：

`l (lowercase 'L') - A full textual representation of the day of the week - Sunday through Saturday`

你应该使用日期（'w'）：

`w - Numeric representation of the day of the week - 0 (for Sunday) through 6 (for Saturday)`

**编辑**：啊，所以你想要（仅）数字的文本表示。那么一张简单的*地图*就足够了：

```
$dayNames = array( 'Sunday', 'Monday', ..., 'Saturday' );
$day = $dayNames[$row['dow']]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:21:11.183

[http://php.net/manual/bg/function.date.php](http://php.net/manual/bg/function.date.php)

这是php日期格式的所有代码

从您的数据库中选择您的日期和 php 使用日期（'l', strtotime($date))

# javascript - 仅使用环境定义导入 TypeScript 模块以在 amd 中使用

> ID：13013366
> 
> 赞同：16
> 
> 时间：2012-10-22T14:18:49.063
> 
> 标签：javascript, requirejs, typescript, amd

我有一个依赖于`Backbone`. 我有一个`backbone.d.ts`定义，但 TypeScript 似乎不想编译我的模块，除非我的

```
import Backbone = module("backbone") 
```

实际上指向一个有效的主干模块而不是定义文件。我正在使用 AMD 加载的模块，并为骨干定义了一个 requirejs 垫片。

除了创建假主干.ts 模块定义之外，还有其他解决方法吗？

**更新：**解决方案的副作用是这样的代码不再有效，因为模块不再存在。由于requirejs shim，它需要存在。我知道的唯一解决方法是拥有两个 .d.ts 文件。一个用于使用主干作为不包含该`declare module`位的导入的文件。另一个使用 a`/// <reference`确实包括该`declare module`行。

```
/// <reference path="../dep/backbone/backbone.d.ts" />

interface IApi {
    version: number;
    Events: Backbone.Events;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T14:47:39.420

自从这个原始答案以来，TypeScript 语言已经发生了相当大的变化。

例如，要导入您使用的外部模块`require`（我的原始答案有 old`module`关键字）：

这是导入骨干网的一个常见用例 - 使用来自“绝对类型”的类型信息：

```
/// <reference path="scripts/typings/backbone/backbone.d.ts" />

import bb = require('backbone'); 
```

在类型定义中，为您声明了主干模块，这使得导入有效：

```
//... lots of code and then...

declare module "backbone" {
    export = Backbone;
} 
```

所以原来的问题可以用...解决

```
/// <reference path="scripts/typings/backbone/backbone.d.ts" />

import bb = require('backbone');

interface IApi {
    version: number;
    Events: bb.Events;
}

class Api implements IApi {
    public version = 1;
    public Events: bb.Events = null;
} 
```

对于这个代码示例，这就是所有需要的——但更多时候你会希望在运行时加载主干库......你可以使用（官方实验性的）`amd-dependency`注释来使生成的`define`函数调用包含主干。

```
/// <reference path="scripts/typings/backbone/backbone.d.ts" />
/// <amd-dependency path="backbone" />

import bb = require('backbone');

interface IApi {
    version: number;
    Events: bb.Events;
}

class Api implements IApi {
    public version = 1;
    public Events: bb.Events = null;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-26T09:05:16.760

在[typescript](/questions/tagged/typescript "show questions tagged 'typescript'")中实际上还有另一种处理[amd](/questions/tagged/amd "显示标记为“amd”的问题")的方法：

1.  克隆`[DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped/)`Github 存储库。它包含`jquery.d.ts`,`backbone.d.ts`和许多其他定义文件。

2.  将定义文件链接到您的`myfile.ts`文件：
    `/// <reference path="DefinitelyTyped/requirejs/require.d.ts" />`
    `/// <reference path="DefinitelyTyped/jquery/jquery.d.ts" />`

3.  向 javascript 库添加 amd 依赖项：
    `/// <amd-dependency path="jquery"/>`

4.  要`$`在`myfile.ts`文件中使用，您现在可以调用 require：
    `var $ = require("jquery");`

完整版`myfile.ts`：

```
/// <reference path="DefinitelyTyped/requirejs/require.d.ts" />
/// <reference path="DefinitelyTyped/jquery/jquery.d.ts" />
/// <amd-dependency path="jquery"/>
var $ = require("jquery");

export function helloWorld() {
  $("<div>Hello World</div").appendTo(document.body);
} 
```

如果您运行`tsc --module amd myfile.ts`，您将获得以下 javascript 代码：

```
define(["require", "exports", "jquery"], function(require, exports) {
    var $ = require("jquery");

    function helloWorld() {
        $("<div>Hello World</div").appendTo(document.body);
    }
    exports.helloWorld = helloWorld;
}); 
```

# c# - 为什么没有找到或捕获第二个模式c#

> ID：13013371
> 
> 赞同：1
> 
> 时间：2012-10-22T14:19:00.200
> 
> 标签：c#, regex, parsing

我有以下问题：

我正在尝试从我们的开发人员使用的工具解析 txt 文件输出

这是我正在查看的文件的片段

* * *

```
 DAT1                DAT(IL)
:NAME            R|OM_SW_1_ILP|AG 
```

* * *

现在我需要做的是搜索`DAT1`然后将下面的文本`:NAME`与其对应的文本匹配`DAT`

这是我正在使用的正则表达式模式，它似乎只找到了`DAT`不是名称。

```
^(?<number>DAT[0-9]{1,3}).*(?<name>:NAME)? 
```

我用 expresso 测试了很多不同的组合，但都没有用

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:49:41.883

您可以使用[`RegexOptions.Singleline`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions%28v=vs.80%29.aspx)

> **单线**
> 
> 指定单行模式。更改点 (.) 的含义，使其匹配每个字符（而不是除 \n 之外的每个字符）。

用于匹配多行的模式。

此外，您正在寻找一个**积极的***后* 视来查找`:NAME`.

* * *

**例子：**

```
void Main()
{
    var s = @"DAT1                DAT(IL)
              :NAME            R|OM_SW_1_ILP|AG";
    var p =  @"^(?<number>DAT[0-9]{1,3}).*(?<=:NAME\s+)(?<name>[^\s]*)";
    var m = Regex.Match(s, p, RegexOptions.Singleline);
    m.Groups["number"].Value.Dump();
    m.Groups["name"].Value.Dump();
} 
```

**结果：**

> DAT1
> R|OM_SW_1_ILP|AG

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:21:48.557

是不是`:NAME...`应该换新线了？如果是这样，您必须设置`RegexOptions.Multiline`选项，或明确匹配换行符，*例如* `[\r\n]+`，因为`.`不匹配换行符。

另外，考虑使`.*`非贪婪，*即* `.*?`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:00:54.000

您必须使用`single line mode`来匹配您所需的数据

```
(?<number>DAT[0-9]{1,3})(?<reqData>.*?)(?<name>:NAME)

//reqData group now contains your data 
```

无需在`^`此处使用，因为您将匹配可以包含其他数据的文本文件中的文本..

# php - 如何通过 GET 将 javascript 数组传递给 php？

> ID：13013372
> 
> 赞同：-3
> 
> 时间：2012-10-22T14:19:03.170
> 
> 标签：php, javascript

我必须通过 http GET 将数组从 javascript 传递到 php 脚本`amount`。`name`

```
var amount=new Array();   
amount = document.form_perk.elements["amount[]"];  
var name = document.form_perk.elements["name[]"];
http.open('get', 'perks.php?+obj2url("amount", amount)&obj2url("name", name)');   
http.onreadystatechange = insertReply;  
http.send(null); 
```

这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:28:02.560

编辑：看来问题是这样的：

```
http.open('get', 'perks.php?+obj2url("amount", amount)&obj2url("name", name)'); 
```

应该：

```
http.open('get', 'perks.php?' + obj2url("amount", amount) + '&' + obj2url("name", name)'); 
```

原帖：

使用此功能（从[此处](https://stackoverflow.com/a/111545/888177)修改）：

```
function EncodeQueryData(arr_data, str_prepend) {
   str_prepend = str_prepend || "";
   var ret = [];
   for (var d in arr_data)
       ret.push(encodeURIComponent(str_prepend + d) + "=" + encodeURIComponent(arr_data[d]));
   return ret.join("&");
}

var base_url = "perks.php";
var query_string = EncodeQueryData(amount, "amount") + '&' + EncodeQueryData(name, "name");
window.location = base_url + '?' + query_string; 
```

这应该给你例如这样的东西：

`perks.php?amount0=10&amount1=27&name0=john&name1=sally`.

# c++ - 将指针从基类型转换为子类型

> ID：13013373
> 
> 赞同：7
> 
> 时间：2012-10-22T14:19:09.287
> 
> 标签：c++, polymorphism

我正在为我的一个项目构建一个简单的游戏设计。我有以下课程：

```
class Character
{
public: 
   virtual void Display();
   virtual void SetParameters( char* param, ... );
};

class NonPlayableCharacter : public Character
{

public:
   virtual void Display();
   virtual void SetParameters( char* paaram, ... );
   int GetNPCState();
} 
```

然后我有一堆派生自 Character 或 NonPlayableCharacter 的类。我这样定义它：

```
std::vector<Character*> _allChar; 
```

我的问题是，在任何给定时间，我都想对向量的一个元素执行一些操作。所以从向量中取出一个元素我不能直接调用该方法`GetNPCState()`，因为向量中的元素是 Character* 类型的。所以这样做：

```
_allChar[0]->GetNPCState(); 
```

不起作用。所以我尝试用著名的 dynamic_cast 来做：

```
NonPlayableCharacter* test = dynamic_cast<NonPlayableCharacter*>(_allChar[0]);
test->GetNPCState(); 
```

最后一次尝试的问题是`GetNPCState()`由于对象为空而崩溃，而且我知道一个事实（通过调试）_allChar[0] 不为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:40:38.420

C++ 中有几种类型的强制转换 (4)，其中 2 种在这里感兴趣：

*   `static_cast`假设你知道你在做什么
*   `dynamic_cast`在运行时检查您是否“猜”对了

*注意：简化，`dynamic_cast`也允许涉及虚拟基地的交叉演员表和演员表。*

`dynamic_cast`实际上，根据目标的性质，有 3 个版本：

*   如果目标是引用（即`dynamic_cast<T&>(u)`），则如果检查失败则`dynamic_cast`抛出`std::bad_cast`异常
*   如果目标是一个指针（即`dynamic_cast<T*>(p)`），那么如果检查失败`dynamic_cast`返回一个空指针
*   最后，作为一种特殊情况，如果目标是`void*`，则`dynamic_cast`返回完整对象的地址

在这种情况下，您可以：

*   切换`dynamic_cast<NonPlayableCharacter*>(_allChar[0])->getNPCState()`到 `dynamic_cast<NonPlayableCharacter&>(*_allChar[0]).getNPCState()`，让异常传播
*   测试强制转换的结果（`NonPlayableCharacter* test`此处）是否为非空值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:22:03.803

后

```
NonPlayableCharacter* test = dynamic_cast<NonPlayableCharacter*>(_allChar[0]); 
```

你应该检查是否`test`是`NULL`。即使`_allChar[0]`不是 NULL，`dynamic_cast`如果`NULL`它指向的对象不是`NonPlayableCharacter`.

所以正确的版本是：

```
NonPlayableCharacter* test = dynamic_cast<NonPlayableCharacter*>(_allChar[0]);
if (test)
{
   test->GetNPCState();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T14:21:44.607

`dynamic_cast``NULL`如果演员是不可能的，则返回。检查里面有什么`_allChar[0]`。您可以制作类似`getType()`where 返回对象预定义类型 id 的函数，然后使用`static_cast`：

```
if (_allChar[0]->getType() == TYPE_NO_PLAYER) {
    static_cast<NonPlayableCharacter*>(_allChar[0])->getNpcState();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T14:23:06.437

要从基指针获取子指针，您必须使用`dynamic_cast`. 它的行为如下：

*   如果指针指向一个已`Child*`分配的，`new Child`则`dynamic_cast<Child*>`返回一个`Child*`
*   如果指针指向别的东西，则`dynamic_cast`返回`NULL`。

您的问题是您没有分配 with `new`，或者您的对象属于不同类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T14:23:16.310

使用 dynamic_cast 可能有更好的 OO 解决方案，但使用此强制转换的全部意义在于，如果强制转换失败，它将返回一个 NULL 指针。

因此，在调用 GetNPCState() 之前检查 NULL；

```
NonPlayableCharacter* test = dynamic_cast<NonPlayableCharacter*>(_allChar[0]);
if( test != NULL )
{   
     test->GetNPCState(); 
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-22T14:22:49.187

你必须测试`dynamic_cast`成功。它在失败时返回一个空指针：

```
NonPlayableCharacter* test = dynamic_cast<NonPlayableCharacter*>(_allChar[0]);
if (test) test->GetNCPState(); 
```

问题可能是您的第一个元素未指向`NonPlayableCharacter`对象。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-22T14:22:59.217

`dynamic_cast``NULL`当它的参数不指向 a 时返回`NonPlayableCharacter`（因此数组中的第一个元素可能指向 的某个其他子类`Character`） - 所以你需要在强制转换`NULL`之后检查。但是，使用`dynamic_cast`可能表明存在设计问题。也许您应该改为在`Character`其上调用一个虚拟方法，例如`PerformMainActionInGameLoop()`，并在不同的子类中适当地覆盖？

# windows - 使用批处理从文件中读取带有空格的行

> ID：13013378
> 
> 赞同：7
> 
> 时间：2012-10-22T14:19:17.990
> 
> 标签：windows, batch-file, cmd

我正在尝试使用批处理从文本文件中读取每一行。

文件内的行有**一些空格**，所以这是一个输入示例：

```
This is the first line
This is the second line
... 
```

我正在使用以下源代码

```
FOR /f %%a in ("%1") do (
    @echo %%a
)
goto:eof 
```

输出如下：

```
This
This
... 
```

我已阅读 Stack Overflow 中的以下条目，但不能解决我的问题。 [批处理：从路径中有空格的文件中读取行](https://stackoverflow.com/questions/4389923/batch-read-lines-from-a-file-having-spaces-in-its-path)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T14:54:20.310

尝试这个。

```
FOR /f "tokens=* delims=,"  %%a in ('type "%1"') do (
    @echo %%a
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T15:37:48.607

Bali C 和 Henry Gao 回避这个问题。

您的代码在第一个空格处终止值，因为 FOR /F 旨在将字符串解析为分隔标记。默认分隔符是空格和制表符。您可以通过将 DELIMS 设置为空来保留整行。

```
for /f "usebackq delims=" %%a in ("%~1") do echo %%a 
```

但仍然存在潜在问题： FOR /F 循环跳过空行，也跳过以 EOL 字符开头的行（`;`默认情况下）。

FOR 命令（尤其是 FOR /F 变体）是一个复杂的野兽。我建议阅读[http://judago.webs.com/batchforloops.htm](http://judago.webs.com/batchforloops.htm)以获得对 FOR 命令的角落和缝隙的一个很好的总结。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T15:02:56.280

您需要为批次在每行上读取的位置设置分隔符

```
FOR /f "delims=;" %%a in ("%1") do (
    @echo %%a
) 
```

行尾的默认分隔符是分号。或者，使用您在文件中不太可能看到的字符，例如`~`or`¬`或其他东西。

# vps - VPS 更改上的 DirectAdmin 启动包

> ID：13013385
> 
> 赞同：0
> 
> 时间：2012-10-22T14:19:38.287
> 
> 标签：vps

我有一个带 DirectAdmin 的 VPS。创建新用户时，已经创建了一些文件夹/文件。我在哪里可以更改标准创建的文件/文件夹？例如：当我创建用户时，我总是希望 public_html 文件夹中有一个 robots.txt。如何使这成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-07T04:53:43.140

***您可以按照以下步骤操作：***

1.  首先，您需要**通过您的管理员帐户登录 DirectAdmin 面板**
2.  在您的帐户部分，单击**文件管理器**
3.  接下来，转到“**域**”目录
4.  最后，打开“**默认**”目录

您可以在此处添加或删除“**默认**”目录中的文件。例如，您可以在“默认”目录中创建一个 robots.txt 文件。*结果，当你添加一个新网站时，你总是会在 public_html 中得到 robots.txt 文件*

# c - 清除串口缓冲区

> ID：13013387
> 
> 赞同：21
> 
> 时间：2012-10-22T14:19:43.053
> 
> 标签：c, linux, serial-port, flush

这是我打开串口的功能（使用 Ubuntu 12.04）：

```
int open_port(void)
{
  int fd; /* File descriptor for the port */

  fd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);

  if (fd == -1)
  {
   // Could not open the port.          
   perror("open_port: Unable to open /dev/ttyUSB0 - ");
  }
  else
    fcntl(fd, F_SETFL, 0);

  struct termios options;

  tcgetattr(fd, &options); 
  //setting baud rates and stuff
  cfsetispeed(&options, B19200);
  cfsetospeed(&options, B19200);
  options.c_cflag |= (CLOCAL | CREAD);
  tcsetattr(fd, TCSANOW, &options);

  tcsetattr(fd, TCSAFLUSH, &options);

  options.c_cflag &= ~PARENB;//next 4 lines setting 8N1
  options.c_cflag &= ~CSTOPB;
  options.c_cflag &= ~CSIZE;
  options.c_cflag |= CS8;

  //options.c_cflag &= ~CNEW_RTSCTS;

  options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); //raw input

  options.c_iflag &= ~(IXON | IXOFF | IXANY); //disable software flow control

  return (fd);
} 
```

问题是，当我运行这个程序并且我的串行设备已经插入时，缓冲区中有内容。在开始读取缓冲区之前，我需要一种清除缓冲区的方法。我认为 using`tcsetattr(fd, TCSAFLUSH, &options);`可以通过在初始化端口之前刷新 IO 缓冲区来解决这个问题，但没有这样的运气。有什么见解吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-22T14:38:51.680

我想我想通了。出于某种原因，我需要在刷新之前添加一个延迟。返回之前添加的这两行`fd` *似乎*起到了作用：

```
 sleep(2); //required to make flush work, for some reason
  tcflush(fd,TCIOFLUSH); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-13T12:50:08.050

此问题的原因在于使用 USB 串口。如果你使用普通的串口，就不会出现这个问题。

大多数 USB 串行端口驱动程序不支持正确刷新，可能是因为无法知道内部移位寄存器、FIFO 或 USB 子系统中是否还有数据。

[另请参阅 Greg 对此处](https://bugzilla.kernel.org/show_bug.cgi?id=5730)早些时候报告的类似问题的回复。

您`sleep`可能会解决问题，但这只是一种解决方法。不幸的是，除了使用常规串行端口之外没有其他解决方案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-03T20:37:41.100

我在使用 open() 时重置的 Arduino Uno 板时遇到了类似的症状。在重置 Arduino 板之前生成的 open() 调用之后，我正在接收数据，因此在调用 open() 之前。

通过 ioctl() 调用跟踪问题，我了解到在调用 tcflush() 时数据还没有到达输入缓冲区。所以 tcflush() 确实有效，但没有要刷新的数据。在 open() 调用之后睡了 1000 我们似乎解决了这个问题。这是因为延迟允许数据在 tcflush() 被调用之前到达，因此 tcflush() 确实刷新了输入缓冲区。

您可能会遇到同样的问题。

# ios - 在 ios 6 地图上绘制路线

> ID：13013388
> 
> 赞同：2
> 
> 时间：2012-10-22T14:19:46.437
> 
> 标签：ios, mapkit

在 iOS 5.1 和之前我可以使用谷歌地图 API 来获取方向：

fe： [http://maps.google.com/maps?output=dragdir&saddr=41.029598,28.972985&daddr=41.033586,28.984546](http://maps.google.com/maps?output=dragdir&saddr=41.029598,28.972985&daddr=41.033586,28.984546) 或其他。

但现在来自谷歌的路线与 iOS 6（苹果）地图上的道路不匹配。

如何获取 iOS 6（苹果）地图的路线并在 MKMapOverlayView 上绘制它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:28:17.650

Apple 没有路由生成 API。在 Apple 的地图上使用来自 Google 的 javascript API 的数据违反了 Google 的 Ts&Cs :-/

# java - Java：如何创建同步块以及子类使用

> ID：13013395
> 
> 赞同：0
> 
> 时间：2012-10-22T14:20:03.543
> 
> 标签：java, inheritance, synchronization

```
abstract class A {
  protected abstract int isRunning();

  public void concreteMethod() {
    synchroinzed(isRunning()) {
       //do stuff
    }
  }
}

class B extends A {
  int running_ = 0;

  public int isRunning() {
     return running_;
  }
} 
```

我得到的问题： int 不是同步语句的有效类型参数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:27:46.287

如果你想防止同时执行你的 block 和 method `isRunning()`，你不能完全按照你的意愿去做，因为`synchronization`不能被继承（只有一个实现可以证明`synchronization`）。

这是您可以做的最近的事情：

```
class A {
  protected Object lock = new Object();
  protected abstract int isRunning();
  public void concreteMethod() {
    synchronized(lock) {
       //do stuff
    }
  }
}

class B extends A {
  int running_ = 0;    
  public int isRunning() {
    synchronized(lock) {
     return running_;
    }
  }
} 
```

如果您有能力锁定整个`concreteMethod()`块而不仅仅是一个块，您可以使用简单的解决方案将`synchronized`关键字添加到`concreteMethod`and `isRunning()`：

```
class A {
  protected abstract int isRunning();
  public synchronized void concreteMethod() {
       //do stuff
  }
}

class B extends A {
  int running_ = 0;    
  public synchronized int isRunning() {
     return running_;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:29:23.187

您不能锁定原始值（`int`在您的情况下，因为`isRunning()`返回 a `int`）。

尝试替换`int`为`Integer`例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:34:05.097

这是[官方文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)所说的

```
Another way to create synchronized code is with synchronized statements. Unlike synchronized methods, synchronized statements must specify the object that provides the intrinsic lock 
```

这意味着，对于同步，您首先需要一个对象来锁定。由于`int`不是对象，因此您会收到错误。`Integer`对象不会给出此错误，但仅使用 an而`Integer`不是`int`不能保证正确性。

这是一个关于java并发的非常好的教程

[http://tutorials.jenkov.com/java-concurrency/index.html](http://tutorials.jenkov.com/java-concurrency/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:39:29.127

我认为您混淆了两个概念。同步块总是要求引用作为它的参数时间，但你传递的是 int （原始数据类型）作为它的参数。您可以尝试使用 'this' 关键字（代替 isRunning() 方法）作为同步块参数。您还需要将 A 类声明为抽象类。您的代码中也存在拼写错误。您还可以考虑 @dystroy 的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T14:28:01.130

我猜你正在寻找这个：

```
class A
{
  protected abstract int isRunning();

  public synchronized void concreteMethod()
  {
       //do stuff
  }
}

class B extends A
{
  int running_ = 0;

  public synchronized int isRunning()
  {
   return running_;
  }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T14:29:49.897

**-** `sychronized`块伴随着一个**需要获得**`Object`其锁的执行线程访问该块的锁。

 ****-** `int`是`primitive`类型而**不是**对象。

**-**与超类的对象一起创建一个同步块很容易被其子类访问。

**例如：**

```
public void concreteMethod()
  {
    synchroinzed(A.class) // or synchroinzed(A.class)
    {
       //do stuff
    }
  } 
```**

# joomla - 如何在 Joomla 中强制对非 sef url 进行 301 重定向？

> ID：13013399
> 
> 赞同：2
> 
> 时间：2012-10-22T14:20:25.007
> 
> 标签：joomla, url-rewriting, seo, sef

Google 无缘无故地为我的非 SEF 网址和 SEF 网址编制了索引。该站点始终将 SEF url 设置为 ON。

如何在非 SEF url 上强制进行 301 重定向，因此它永远不会显示，而实际上我没有在 .htaccess 中为我创建的每个新页面写入 301？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:38:46.453

我不确定该模块的确切工作原理，但无论哪种方式，我都会建议规范标签。如果你有这样的页面：

```
www.example.com/category/sef-url-1 
```

并且谷歌也在索引（同一页面，但使用非 SEF URL）：

```
www.example.com?=adfgdfsg 
```

（或任何您的非 SEF 结构），然后在每个违规页面中放置一个带有干净 URL 的规范标签。

所以在上面的例子中，如果你将以下内容放到 www.example.com?=adfgdfsg 的模板中，并且这也出现在“干净”的 URL 中，那么谷歌（和其他主要引擎）会意识到一个是重复的另一个。

有关规范标签的更多信息在这里：

```
http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394 
```

这最终将（约 2 个月）将所有非 SEF 网址从索引中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T16:12:48.707

Google 在我的 joomla 网站上对我做了同样的事情！

它**总是有 sef ON**，但**它索引了非 sef url**，给我留下了很大的麻烦，因为我的数据库结构和我的 ID 发生了变化，谷歌现在正在调用不再引用任何东西的非 sef url，生成吨和吨500 个错误。

只要结构相同，谷歌调用非 sef url 就不理想（重复内容很多）；但至少它有效并且有一个正确的页面显示。

但是现在结构发生了变化（ID 发生了变化），非 sef url 不再指代任何东西，它所显示的只是 500 个错误。疯狂的。

这就像在重写 url 之前 google 正在索引我的网站一样！

我或多或少设法重新站起来。我回到了我的旧身份（令人难以置信的工作）。

但恐怕你必须手动重定向，因为：

-SH404sef 不能重定向非 sef url

- 谷歌似乎在他们的网址是 sef 之前抓取了 joomla 网站

我建议你看看**php redirect**。这就是我们摆脱大约 500 个错误的方法。我相信你可以做同样的事情来重定向你的页面，因为 php 重定向似乎更强大，可以管理大量带有条件的 url。

# c# - XPath 表达式求值错误

> ID：13013401
> 
> 赞同：5
> 
> 时间：2012-10-22T14:20:37.923
> 
> 标签：c#, .net, xml

我尝试解析一个大型 XML 文件，并且我使用了很多 XPath 表达式的相对路径。

现在我遇到了 .net XPath 评估的问题。

这是一个解释我的问题的小例子：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>

<book category="CHILDREN">
  <title lang="en">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
</book> 
</bookstore> 
```

这是代码：

```
static void Main(string[] args)
{
    System.Xml.XmlDocument d = new System.Xml.XmlDocument();
    d.Load(@"D:\simpleXml.xml");

    System.Diagnostics.Trace.WriteLine(d.SelectSingleNode("//price/..[year=\'2005\']").Name);
} 
```

我收到以下错误消息：附加信息：'//price/..[year='2005']' has an invalid token。

对我来说，这似乎是一个有效的 XPath 表达式，因为 XMLSpy 等其他工具成功地评估了该表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:53:34.597

为什么不使用**linq2xml**

```
XDocument doc=XDocument.Load("yourXML");

var bookPrice=doc.Descendants("book")
.Where(x=>x.Element("year").Value=="2005")
.Select(y=>y.Element("price").Value);
//gets the price of the books published in 2005 
```

如果你想要 xpath 版本，这里是

```
"bookstore/book[year='2005']/*/../price"
//gets the price of the books published in 2005 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:47:41.940

如果您查看[http://www.w3.org/TR/xpath/#NT-Step](http://www.w3.org/TR/xpath/#NT-Step)上的 XPath 规范，我们可以看到 Step 生成定义为：

```
Step  ::=  AxisSpecifier NodeTest Predicate*    
         | AbbreviatedStep 
```

换句话说，谓词不能跟在缩略步骤之后，例如 . 或..我会假设实施是（严格）正确的。也许 XMLSpy 在其解释上更自由一些，并且总是将 .. 扩展为 parent:node()？

# email - 如何为网站创建电子邮件地址

> ID：13013404
> 
> 赞同：0
> 
> 时间：2012-10-22T14:20:44.927
> 
> 标签：email, web, dns, email-address

我最近为客户创建了一个网站。他一再询问我是否可以获得该网站的电子邮件地址，即 help@mywebsite.com。

我不知道从哪里开始。

我发现我创建的网站是基于 linode 的。任何人都知道如何从该平台派生电子邮件帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:23:48.557

您将不得不查看您的网站托管服务提供商/服务器。在控制/网络面板（文件管理工具）中，应该有如何实现它的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:24:43.163

您需要通过他/您使用的任何托管服务。如果是共享主机，管理控制面板（通常是 CPanel）中应该有一个位置来添加电子邮件地址。如果您在专用主机上，则要复杂一些。去谷歌上查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:24:59.820

请咨询您的虚拟主机提供商。

即使是最小的包裹，您也可以选择拥有至少 1 个电子邮件地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:27:55.617

*   登录您的托管服务提供商的网站。

*   在您注册的域/服务器下的网络面板中，应该有一个选项来创建邮箱/电子邮件/电子邮件地址。

*   如果您找不到它 - 确保您可以使用当前托管包创建电子邮件地址（通常情况下，在“邮箱”下进行描述）/电子邮件或联系您的托管服务提供商寻求帮助。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T00:28:36.987

感谢所有建议，但我已经使用谷歌应用程序为我的网站创建了一些电子邮件。谷歌应用程序提供了一个很好的可靠界面，您可以在其中免费创建多个电子邮件帐户，只要您证明该域是您的。

谷歌应用程序网站的链接：

您可以获得升级版或免费版。

[谷歌应用](http://www.google.com/enterprise/apps/business/pricing.html)

# ruby-on-rails - 在视图中添加一个按钮以更新 Rails 中的模型

> ID：13013408
> 
> 赞同：0
> 
> 时间：2012-10-22T14:20:55.167
> 
> 标签：ruby-on-rails, resources, rails-activerecord, relationship

我有两个资源，A 和 B，它们之间存在多对多关系。当按下 A 的显示视图上的按钮时，我希望建立 A 对象和 B 对象之间的关系，我也可以从视图中访问该关系。

你怎么能在rails3中做到这一点？

编辑：关系的相关片段。其他一切都是使用标准生成的`rails generate scaffold`

```
class Course < ActiveRecord::Base
  ...
  has_many :course_auth_users
  has_many :students, :through => :course_auth_users, :source => :user
  ...
end

class User < ActiveRecord::Base
  ...
  has_many :course_auth_users
  has_many :enrolled_on_courses, :through => :course_auth_users, :source => :course
  ...
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:25:42.933

我假设你有这样的模型

```
class CourseAuthUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :course
end 
```

我还假设您的意思是对象 A 和 B 已经创建。您的用户控制器应该有一个将课程添加到其列表中的操作，如下所示：

```
class UsersController < ApplicationController
  def enroll_course
    @student = User.find(params[:id])
    @course = Course.find(params[:course])  

    @student.enrolled_on_courses << @course

    @student.save!
  end
end 
```

请注意，控制器部分假设您在请求参数中传递了一个 user_id 和一个课程。

让我知道这是否有帮助。我不太确定你的要求是什么。

# joomla - Joomla！2.5 不显示我的模板中的模块

> ID：13013409
> 
> 赞同：0
> 
> 时间：2012-10-22T14:20:56.087
> 
> 标签：joomla, joomla2.5

我正在做一个 Joomla！2.5 项目

我把这个放了`<jdoc:include type="modules" name="izquierdo" style="none"/>`，什么也没给我看。

我模板中的职位是这样的

```
<positions>
    <position>izquierdo</position>
    <position>extranet</position>
    <position>menuPrincipal</position> 
```

这个模块的状态是公开的。

任何想法，我错过了什么？

嗨，我尝试显示模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:44:48.970

[模块位置](http://docs.joomla.org/Module_positions)

[如何添加新的模块位置](http://docs.joomla.org/How_do_you_add_a_new_module_position?)

[在任何给定页面上查找模块位置](http://docs.joomla.org/Finding_module_positions_on_any_given_page)

如果您按照步骤进行操作，应该没问题。如果您遇到任何问题，请在这里问他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:34:39.983

请参考创建模块位置的链接。在这里简要说明：[http ://www.zootemplate.com/joomla-tutorials/how-to-make-position-in-joomla.html](http://www.zootemplate.com/joomla-tutorials/how-to-make-position-in-joomla.html)

# javascript - 加载所有图像后如何加载 HTML 的正文

> ID：13013412
> 
> 赞同：1
> 
> 时间：2012-10-22T14:21:06.767
> 
> 标签：javascript, html

我正在尝试为网页的 onload() 事件编写一些代码，**我想在该事件上等待网页出现，直到所有图像都加载到网页上**。我找到了这个：

[onLoad 事件用于加载所有图像](http://fragged.org/preloading-images-using-javascript-the-right-way-and-without-frameworks_744.html)

但是它并没有完全按预期工作，或者是我不知道如何使用它....

那么，这是使用 onload 事件等待所有图像加载的最佳方式还是您推荐另一个？

我希望在此网站上预加载图像：[链接](http://www.mariscosdelmediterraneo.com)。地图图像更大，因此它比正确的图像更持久。但它不能小，因为它是一个透明的图像......所以我决定在显示完整的网页后预加载所有图像。但还是不能……知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:16:16.410

如果我理解正确，我会这样做：

1）首先，我将添加一个“加载 div”，以隐藏 html 内容，并在加载所有图像后删除该 div。显示加载消息和/或加载指示器不仅更优雅，而且比在图像之后实际加载页面更容易。这意味着您在图像完成后动态创建和加载内容，您需要做更多的工作。

2) 然后我会选择所有图像并向它们的 onload 事件添加一个简单的函数，该函数将增加加载图像的数量并调用一个函数来检查是否所有图像都已加载。如果所有图像都已加载，我将删除加载 div，仅此而已。

这是下面的一些工作代码（减去图像，您需要自己添加它们）。基本上，而不是带有图像的 div 你应该有自己的 html 代码和之前或之后（虽然之前更好），添加“加载 div”（请记住我的 css 样式它不是一个好习惯）

```
<!doctype html>
<html>
<head>
<script>
window.onload = function() {

    var images = document.getElementsByTagName('img'),
        totalImages = images.length,
        imagesLoaded = 0,
        img;

    function checkForLoaded() {

        if(imagesLoaded === totalImages) {
            var loadingDiv = document.getElementById('loadingDiv');
            loadingDiv.parentNode.removeChild(loadingDiv);
        }
    }

    for (var i = 0; i < totalImages; i++) {
        img = new Image();

        img.onload = function () {

            imagesLoaded++;
            checkForLoaded();
        }

        img.src = images[i].src;

    }
}

</script>
</head>
<body>

    <div id="content">
        <img src="0001.jpg">
        <img src="0002.jpg">
        <img src="0003.jpg">
        <img src="0004.jpg">
        <img src="0005.jpg">
        <img src="0006.jpg">
        <img src="0007.jpg">
        <img src="0008.jpg">
        <img src="0009.jpg">
        <img src="0010.jpg">
    </div>

    <div id="loadingDiv" style="height:2000px; width: 2000px; position: absolute; top: 0px; left: 0px; background-color: #FFFFFF">
        loading
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:34:50.783

我不明白你想要什么结果，但如果你想在加载`<body>`标签之前加载某些图像，你可以使用 JavaScript：

```
<script type="text/javascript">
var image1=new Image()
image1.src="pathway to image"
var image2=new Image()
image2.src="pathway to image"
</script> 
```

如果你把这个JS放在`<head>`标签里，那么那些图片会在body之前加载。只需使用变量（在本例中为`image1`和`image2`）而不是普通的 HTML`<img>`标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:35:03.257

我会尝试设置添加特定的类，例如`loading`html 或 body 元素，将函数连接到`onload`事件/使用加载所有图像的 jQuery，一旦加载图像，`loading`从 html/body 中删除类元素。

然后添加一些 CSS 来隐藏整个页面内容，并在存在加载类的情况下显示一些加载占位符。仅当用户启用了 javascript 时才应注意添加此类。[Modernizr](http://modernizr.com)添加的`js`和`no-js`类可以帮助执行此操作，或者自然而然地使用 javascript 添加类。`loading`

至于实际的预加载，[this](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)和[this](https://stackoverflow.com/questions/901677/the-definitive-best-way-to-preload-images-using-javascript-jquery)是处理预加载图像的两个相当广泛的线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:39:11.667

您应该使用 $(window).load() 而不是 $(document).ready()

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-22T14:27:28.190

考虑将 Jquery 与文档上的**加载**事件一起使用。此处有更多信息[文档加载事件与准备就绪](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

# java - 重新部署 EJB-jar 导致依赖的战争文件停止工作

> ID：13013415
> 
> 赞同：2
> 
> 时间：2012-10-22T14:21:12.553
> 
> 标签：java, ejb

我有几个战争文件取决于`ejb-jar`我重新部署的文件。这会导致所有相关的战争应用程序停止工作，并且我收到此错误：“ `javax.servlet.ServletException: $Proxy451 cannot be cast to com.posten.ejb.SessionHome`”。

war-files 包含一个`client-jar`用于访问的`EJB`，仅包含 Home- 和 RemoteInterfaces。

我正在运行我的应用程序`JBoss 4.2.3.`

问候垫

# .net - CIL 中的 .assembly 和 .module

> ID：13013418
> 
> 赞同：1
> 
> 时间：2012-10-22T14:21:20.903
> 
> 标签：.net, cil

> **可能重复：**
> [.NET 模块与程序集](https://stackoverflow.com/questions/9271805/net-module-vs-assembly)

我刚开始学习 CIL，我看到了一些让我感到困惑的东西：`.assembly`和`.module`. 它们之间有什么区别？在哪里可以读到它？

# python - Flask + WTForms + SelectMultipleField 和动态选择

> ID：13013419
> 
> 赞同：11
> 
> 时间：2012-10-22T14:21:23.717
> 
> 标签：python, flask, wtforms

我正在尝试使用 WTForms.SelectMultipleField 来管理表单上的一些动态选择，但在提交验证之前我遇到了一些困难，因为它在客户端被修改。

基本上我有两个 SelectMultipleField 选项：

```
class MyForm(Form):
    assigned = SelectMultipleField('Assigned', choices=[])
    available = SelectMultipleField('Available', choices=[('1','1'),('2','2')]) 
```

我正在使用 Flask 来渲染 Jinja2 模板，如下所示：

```
@app.view("/myview", methods=['GET','POST'])
def myview():
    form = MyForm(request.form)
    if request.method == 'POST' and form.validate():
        return render_template("success.html")
    else:
        return render_template("index.html", form=form) 
```

在我的模板中，我有这个：

```
<script type="text/javascript">
    function assign_object() {
        return !$('#available option:selected').remove().appendTo('#assigned');
    };

    function unassign_object() {
        return !$('#assigned option:selected').remove().appendTo('#available');
    }

    $(document).ready( function() {
        $('#available').dblclick( assign_object );
        $('#assigned').dblclick( unassign_object );
    });
</script>

<form action="/myview" method="post" name="assign_objects">
    {{ render_field(form.a) }}
    {{ render_field(form.b) }}
    <input type="submit" value="Assign" name="assign_button"/>
</form> 
```

基本上所有这些都按预期工作；双击未分配列表中的项目将其移至已分配列表。问题是提交表单进行验证时，因为“已分配”字段上的 .choices 属性最初是“[]”，但仍应为“[]”，而不是我们给它的新选项列表.

有谁知道这样做的好方法？我在想我可以覆盖表单 pre_validate() 函数并更新assigned.choices以包含“可用”列表中的所有值，但这感觉不“正确”，可以用来从客户端提交随机值-一边提交。

干杯，大卫。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T22:01:03.920

请求`choices`中的更新：`POST`

```
AVAILABLE_CHOICES = [('1','1'),('2','2')]
DEFAULT_CHOICES = []

class MyForm(Form):
    assigned = SelectMultipleField('Assigned', choices=DEFAULT_CHOICES)
    available = SelectMultipleField('Available', choices=AVAILABLE_CHOICES)

@app.view("/myview", methods=['GET','POST'])
def myview():
    form = MyForm(request.form)
    if request.method == 'POST':
        form.assigned.choices = AVAILABLE_CHOICES
        if form.validate():
            return render_template("success.html")
        else:
            form.assigned.choices = DEFAULT_CHOICES

    return render_template("index.html", form=form) 
```

# javascript - 为什么警报功能不显示每个索引

> ID：13013423
> 
> 赞同：1
> 
> 时间：2012-10-22T14:21:29.910
> 
> 标签：javascript, jquery

我创建了一个名为“Ball”的对象。文档加载后，脚本将创建 12 个对象实例并插入这么多元素 li

```
<ul></ul> 
```

我的目的是当点击球时，它显示球的索引。例如：单击第 3 个球，它显示 3。但是当我单击每个球时，它总是显示 12。

抱歉，我无法上传 html 文档的快照，因为我是这里的新人。

```
function Ball(idx, parent, libra) {
    this.idx = idx;
    this.parent = parent;
    this.libra = libra;
    this.init();
}

Ball.r = 30;

Ball.prototype = {
    init: function() {
        var _html = $("<li><div class='ball'><span>" + this.idx + "</span></div></li>"),
        pos
        _this = this;
        this.parent.append(_html);
        this.html = _html.find(".ball");
        this.html.css({
            height: Ball.r * 2 + "px",
            width: Ball.r * 2 + "px",
            lineHeight: Ball.r * 2 + "px"
        });
        pos = this.html.position()
        this.html.css({
            left: pos.left + "px",
            top: pos.top + "px",
            position: "absolute"
         });
         this.html.mousedown(function() {alert(_this.idx)});
    }
};

$("document").ready(function() {
    var parent = $("#balls ul"),
    libra = 1;
    for (var i = 1; i < 13; i++) {
        new Ball(i, parent, libra)
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:25:31.970

您缺少逗号，因此`_this`是全局的。

```
 var _html = $("<li><div class='ball'><span>" + this.idx + "</span></div></li>"),
    pos  <--- missing comma here
    _this = this; 
```

由于它是全局的，因此您将获得最后一个 Ball 创建的值。

解决方案：

添加缺少的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:37:48.013

您需要捕获用户单击的元素。这意味着您需要在输出的 Ball html 上监听点击事件。您的 Ball 对象应如下所示：

```
Ball.prototype = {
init: function() {
    var _html = $("<li><div class='ball'><span>" + this.idx + "</span></div></li>"),
    pos;
    _this = this;
    this.parent.append(_html);
    this.html = _html.find(".ball");
    this.html.css({
        height: Ball.r * 2 + "px",
        width: Ball.r * 2 + "px",
        lineHeight: Ball.r * 2 + "px"
    });
    pos = this.html.position()
    this.html.css({
        left: pos.left + "px",
        top: pos.top + "px",
        position: "absolute"
     });

     $(_html).on("click", function(e) {
         alert(e.currentTarget.textContent);
     });

     //this.html.mousedown(function() {alert(_this.idx)});
} 
```

};

请注意我注释的行和我附加到您的 Ball li 的 html 的单击事件函数。

[在此处](http://www.w3schools.com/jsref/dom_obj_event.asp)阅读有关事件和事件传播的更多信息

# javascript - 为什么jQuery .animate 回调发生在动画之前？

> ID：13013435
> 
> 赞同：3
> 
> 时间：2012-10-22T14:22:14.397
> 
> 标签：javascript, jquery, jquery-animate

为什么这个`.animate`函数的回调发生在动画之前？

参考：http: [//jsfiddle.net/93Qyq/7/](http://jsfiddle.net/93Qyq/7/)

这是 Javascript 部分：

```
$('#clickButton').click(function() {
  $('.spanClass').animate({
    left: '+=200'
  }, 500, positionReset());
});

function positionReset(){
    alert('complete!');
   $('.spanClass').animate({'left':'-=200'})
} 
```

这是 HTML：

```
<div class="divClass">
<span id="a" class="spanClass">A</span>
<span id="b" class="spanClass">B</span>
<span id="c" class="spanClass">C</span>
</div>
<br>
<div id="clickButton">CLICK BUTTON</div><br>​ 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:25:49.077

那是因为您没有将函数传递给`animate()`- 您正在*调用它*，并传递*它返回的值*（这不是函数，随后被框架忽略）。

您必须在函数后删除括号：

```
$('.spanClass').animate({
    left: '+=200'
}, 500, positionReset);  // No parentheses. 
```

代替：

```
$('.spanClass').animate({
    left: '+=200'
}, 500, positionReset()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:25:56.953

应该：

```
$('#clickButton').click(function() {
  $('.spanClass').animate({
    left: '+=200'
  }, 500, positionReset); //not positionReset() or you will autocall callback function
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:28:22.090

因为您通过在函数后面加上括号来调用函数。要传递对函数的引用，您只需使用它的名称，不带括号。例如

```
$('#clickButton').click(function() {
  $('.spanClass').animate({
    left: '+=200'
  }, 500, positionReset);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:30:56.540

`positionReset()`将调用该函数作为其函数调用。您需要将函数对象传递给**动画回调**`positionReset`

看[演示](http://jsbin.com/adesew/4/edit)

```
$('#clickButton').click(function() {
  $('.spanClass').animate({
    left: '+=200'
  }, 500, positionReset);
}); 
```

# windows-7 - Windows 7 中的 Windows XP 兼容软件

> ID：13013436
> 
> 赞同：0
> 
> 时间：2012-10-22T14:22:28.857
> 
> 标签：windows-7, window, windows-xp, registry, registrykey

我需要对 Windows 中的软件安装进行澄清。我在 windows 7 终极版（64 位）中安装了 windows XP 兼容软件（牛津词典 - iFinger）。一旦我安装它，它就可以正常工作，没有任何问题。但是在我重新启动计算机后，该应用程序将不再工作。它给出了以下错误。

```
Application Error - Exception in module iFinger.exe . Error creating registry entry. 
```

因此，似乎软件在安装时未能创建注册表项。我的问题是，如果它无法在设置时创建注册表项，在我重新启动计算机之前它是如何运行的？由于它运行错误，因此有办法解决此问题，以便在重新启动计算机后运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:35:18.770

我已经通过使用 SLaks 的指导解决了这个问题。我将兼容模式更改为 windows vista service pack 2 并将权限级别设置为管理员。现在它工作正常

# ios - 从各种乐器的 MIDI 音符生成音频文件

> ID：13013438
> 
> 赞同：0
> 
> 时间：2012-10-22T14:22:32.633
> 
> 标签：ios, audio, core-audio, coremidi

我有一个要求，我需要在用户操作上播放连续的 MIDI 声音。我只需要使用 midi，因为我有大量需要演奏的乐器/声音。这是我能够实现的应用程序的一部分。我使用音频图等来实现这一点。现在的问题是记录这些笔记。正如我提到的，我有很多乐器，我需要分别录制每个乐器的声音。因此，我尝试将 midi 音符编号保存到每个乐器的数组中。现在的问题是我必须混合所有这些声音（最好不要通过混音器重放它们）并用它们创建一个音乐文件。我能想到的一种乏味的方法是在播放 MIDI 音调时将每个乐器单独录制到一个音乐文件中，最后通过加起来混合所有乐器音乐文件。但是用户可能会延迟一些乐器曲调等，然后我发现它很难混合。此外，我无法找到一种合适的方法来混合各种长度的音频文件，以及它们之前的延迟。谁能告诉我是否有一种方法可以从各种乐器的 MIDI 音符编号生成音频文件，而无需通过多通道混音器播放它们，然后等到所有声音都通过混音器播放完成后再录制他们？如果您有其他似乎可行的方法，请您也告诉我吗？谁能告诉我是否有一种方法可以从各种乐器的 MIDI 音符编号生成音频文件，而无需通过多通道混音器播放它们，然后等到所有声音都通过混音器播放完成后再录制他们？如果您有其他似乎可行的方法，请您也告诉我吗？谁能告诉我是否有一种方法可以从各种乐器的 MIDI 音符编号生成音频文件，而无需通过多通道混音器播放它们，然后等到所有声音都通过混音器播放完成后再录制他们？如果您有其他似乎可行的方法，请您也告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:33:02.030

我不完全理解你想要达到的目标，但我会试一试。

如果您要在 Core Audio 中使用音乐播放器 API，您可以设置一个包含任意数量轨道的音乐序列，每个音乐轨道一个乐器，然后在每个轨道发生时将 midi 数据写入每个轨道。这将为您提供所有已播放内容的同步记录。同步取决于您：实时添加音符（同步所有曲目）或在每个曲目的开头添加音符。

音乐播放器可以让你导出一个 .midi 文件，但你没有得到自定义的 AUSampler 声音字体——所以这对你来说并不是很有用。我不知道在不实际渲染（播放）的情况下生成音频文件的方法。可能是混音器输出上的渲染回调 - 并且混音器未连接到 remoteIO（不知道这是否可能）。

# java - Java 中使用二进制 I/O 拆分和连接回文件的机制

> ID：13013439
> 
> 赞同：2
> 
> 时间：2012-10-22T14:22:33.037
> 
> 标签：java, io, binary

我遇到了连接回 .dat 文件的问题，这些文件是通过使用二进制 I/O 拆分某些文件而产生的。

某些类型的文件会出现问题，例如 .avi 文件（不超过 2GB）。连接回来后，输出文件似乎与拆分的文件完全相同，但对于 .avi 文件，会出现“无法渲染文件”错误。（如果您使用二进制 I/O 制作文件的副本，也会发生同样的事情）。但是，例如，.mp4 文件已正确连接回来。

我的问题是为什么会这样？因为正如我所学的那样——任何文件都只是 0 和 1 的序列。所以如果你只是重写文件的二进制序列并设置相同的文件格式——一切都应该正常。

以防万一，这是我用于拆分和连接文件的代码（它工作正常）：

--- 分离器 ---

```
public static void main(String[] args) throws IOException {

    String sourceFile = "Movie2.mp4";
    int parts = 5;

    BufferedInputStream in = new BufferedInputStream(new FileInputStream(sourceFile));
    BufferedOutputStream out;

    int partSize = in.available() / parts;
    byte[] b;       

    for (int i = 0; i < parts; i++) {
        if (i == parts - 1) {                
            b = new byte[in.available()];
            in.read(b);
            out = new BufferedOutputStream(new FileOutputStream(sourceFile + "_" + i + ".dat"));
            out.write(b);
            out.close();
        } else {
            b = new byte[partSize];
            in.read(b);
            out = new BufferedOutputStream(new FileOutputStream(sourceFile + "_" + i + ".dat"));
            out.write(b);
            out.close();
        }
    }

    in.close();
} 
```

- - 连接器 - -

```
public static void main(String[] args) throws IOException {

    String sourceFile;
    BufferedInputStream in;
    byte[] b;
    BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream("Movie2RESTORED.mp4", true));

    for (int i = 0; i < 5; i++) {
        sourceFile = "Movie2.mp4_" + i + ".dat";
        in = new BufferedInputStream(new FileInputStream(sourceFile));
        b = new byte[in.available()];
        in.read(b);
        out.write(b);
        in.close();
    }

    out.close();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:55:17.420

你需要一个循环`in.read(b)`。

即使`available`应该返回可以在没有阻塞的情况下读取的字节数，您也可能需要`read`多次调用才能获取所有字节数。使用固定大小的缓冲区会更容易，但如果您坚持读取可用的字节数：

```
int toBeRead = in.available();
byte[] b = new byte[toBeRead];
int totalRead = 0;
int read;
while ((read = in.read(b, totalRead, toBeRead-totalRead)) != -1) {
    totalRead += read;
} 
```

此外，就像 aetheria 提到的，您应该调用`close`以关闭各种输出流。否则，保存在 JVM 和 OS 缓冲区中的数据可能不会进入文件，尽管目前看起来确实如此。

# c++ - 简单的字符串连接

> ID：13013442
> 
> 赞同：-4
> 
> 时间：2012-10-22T14:22:38.233
> 
> 标签：c++

如果我在 Python 中有一个字符串，我可以使用该函数`x='wow'`将这个字符串与其自身连接起来，如下所示：`__add__`

```
x='wow'  
x.__add__(x)  
'wowwow' 
```

我怎样才能在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:23:55.160

从语义上讲，您的 python 代码的等价物类似于

```
std::string x = "wow";
x + x; 
```

即创建一个临时字符串，它是`x`with的连接`x`并丢弃结果。要附加到`x`您身上，请执行以下操作：

```
std::string x = "wow";
x += x; 
```

注意双引号`"`。与 python 不同，在 C++ 中，单引号用于单个字符，双引号用于以空字符结尾的字符串文字。

请参阅此[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)参考。

顺便说一句，在 Python 中，您通常不会调用该`__add__()`方法。您将使用与第一个 C++ 示例等效的语法：

```
x = 'wow'
x + x 
```

该`__add__()`方法只是为类提供“加号”运算符的python方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T14:23:26.987

您可以使用`std::string`and`operator+`或`operator+=`or or a `std::stringstream`with `operator <<`。

```
std::string x("wow");
x = x + x;
//or
x += x; 
```

还有`std::string::append`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T15:27:28.663

您可以使用`+`运算符在 C++ 中连接字符串：

```
std::string x = "wow";
x + x; // == "wowwow" 
```

* * *

在 Python 中，您也可以使用`+`代替`__add__`（并且`+`被认为比 更 Pythonic `.__add__`）：

```
x = 'wow'  
x + x # == 'wowwow' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:23:42.457

```
std::string x = "wow"
x = x + x; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-22T15:38:23.797

通常，当连接两个不同的字符串时，您可以简单地`operator+=`在要附加到的字符串上使用：

```
string a = "test1";
string b = "test2";

a += b; 
```

将正确产生`a=="test1test2"`

但是，在这种情况下，您不能简单地将字符串附加到自身，因为附加操作会同时更改源和目​​标。换句话说，这是不正确的：

```
string x="wow";
x += x; 
```

相反，一个简单的解决方案是创建一个临时的（为了清楚起见详细说明）：

```
string x = "wow";
string y = x;
y += x; 
```

...然后将其交换回来：

```
x = y; 
```

# c# - 将 VBS 从本地复制到远程计算机并执行它

> ID：13013449
> 
> 赞同：0
> 
> 时间：2012-10-22T14:23:00.037
> 
> 标签：c#, vbscript

我需要将`.vbs`脚本从本地计算机复制并执行到`C#`程序中的远程计算机。
我尝试使用`psexec`，但似乎无法将`vbs`文件复制到远程机器。
我宁愿不使用复制文件`net use`（然后使用 执行它`psexec`）。
远程机器受用户名和密码保护。

你能想出一个优雅的解决方案来复制和执行脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:48:50.993

我与 psexec 斗争了很长时间，但我无法让它 100% 工作。有时它会弹出一条 EULA 消息（您应该能够使用命令行选项摆脱它），有时它根本不起作用。我最终创建了一个 WCF Web 服务，我在远程机器上安装并运行它；Web 服务将执行我发送给它的命令行，例如运行批处理/脚本文件的命令。

当然，这样的服务很容易遭到黑客攻击和滥用，因此您要确保仅在安全和受保护的环境中使用它，或者在 Web 服务上使用适当的身份验证。

# php - PHP 更新：检查 serialnr 是否已存在于数据库中返回 Yes > Can't update

> ID：13013450
> 
> 赞同：0
> 
> 时间：2012-10-22T14:23:03.717
> 
> 标签：php, for-loop, sql-update, exists

我只是写了这段代码，直到我意识到如果不将 serialnr 更改为不存在的东西，我将无法更新字段。

```
if (isset($_POST['update']))
{
    $errormsg = "";
    $errorcontrol = "
                SELECT serialnr
                FROM item
                WHERE serialnr='$_POST[serialnr]'
                ";
    $result=mysql_query($errorcontrol);
    if (mysql_num_rows($result) == 1)
    {
        $errormsg= "<p id='notification'>Duplicate entry set.</p>";
    }
    else
    {
        $UpdateQuery = "
                    UPDATE item SET 
                    itembrand='$_POST[itembrand]', serialnr='$_POST[serialnr]', itemname='$_POST[itemname]', itemgroupid='$_POST[itemgroupid]', addinfo='$_POST[addinfo]'
                    WHERE itemid='$_POST[itemid]'
                    ";
        mysql_query ($UpdateQuery)  ;
    }
} 
```

如果我将此代码用于“添加新”部分，它会正常工作：当它已经存在时不要添加。

但是当 serialnr 已经存在时，我该如何进行更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:29:04.140

以下行的语法必须是，您错过了`$_POST`键中的引号，

```
 1\.    $errorcontrol = "
            SELECT serialnr
            FROM item
            WHERE serialnr='$_POST['serialnr']'
            ";

2\.     $UpdateQuery = "
                UPDATE item SET 
                itembrand='$_POST['itembrand']', serialnr='$_POST'[serialnr']', itemname='$_POST[itemname]', itemgroupid='$_POST['itemgroupid']', addinfo='$_POST['addinfo']'
                WHERE itemid='$_POST['itemid']' 
```

# nginx - 如何在 nginx 中重定向到索引文件

> ID：13013458
> 
> 赞同：0
> 
> 时间：2012-10-22T14:23:18.873
> 
> 标签：nginx

我有一个简单的例子：

```
 location / {
        rewrite  ^/$  /index.html  last;
        root /test/;
        fastcgi_pass 127.0.0.1:7777;
        include fastcgi_params;
    } 
```

如何将“/”重定向到 /index.html ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:02:38.447

将以下指令添加到您的配置中（并删除重写）

```
index index.html; 
```

将告诉 nginx 对任何目录使用 index.html，有关详细信息，请参阅[http://nginx.org/en/docs/http/ngx_http_index_module.html#index](http://nginx.org/en/docs/http/ngx_http_index_module.html#index)

尽管考虑到 fastcgi 位，您可能想要 index.php 代替？

通常您还希望将根移动到您的服务器块而不是位置块中（以免在每个位置块中重复自己）

# c# - 如何将数据分配给asp.net中的控件

> ID：13013461
> 
> 赞同：2
> 
> 时间：2012-10-22T14:23:26.750
> 
> 标签：c#, asp.net

我有转发器控件，它将显示 100000 条消息，我不想使用不同的页面向用户显示所有消息。相反，我想在用户向下滚动时加载，而不是在一个中加载所有消息时间。

例如：Facebook 时间线。

谢谢

编辑：我尝试了什么：

```
<script type="text/javascript">
        $(document).ready(function e() {
            $(window).scroll(function () {
                if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                    GetRecords();
                }
            });

            function GetRecords() {
                $("#loader").show();
                $.ajax({
                    type: "POST",
                    url: "Demo.aspx/GetList",
                    data: {},
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: OnSuccess,
                    failure: function (response) {
                        alert("Failure");
                    },
                    error: function (response) {
                        alert("Error");
                    }
                });
            }

            function OnSuccess(response) {
                $.map(response.d, function (item) {
                    $('#division').append("<div style='line-height:25px;'>" + item + "</div>");
                });
                $("#loader").hide();
            }
        });
    </script> 
```

**后面的代码**

```
public partial class Demo : System.Web.UI.Page
    {                     
        static List<string> list = new List<string>();
        static int n=0;

        protected void Page_Load(object sender, EventArgs e)
        {
            n = 0;
        }

        public Demo()
        {
            for (int i = 1; i <= 1000; i++)
            {
                list.Add("List Item : " + i);
            }
        }

        [WebMethod]
        public static List<string> GetList()
        {
            var fiftyItems = list.Skip(n).Take(50);
            n = n + 50;
            return fiftyItems.ToList();  
        }
    } 
```

但我想使用更复杂的控制，就像你在 facebook、评论、图片等中看到的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:30:41.430

这将是一个相当大的挑战，因为您需要重新绑定转发器控件以显示其他消息。

您可以将转发器嵌入到 UpdatePanel 中，并在用户到达消息末尾时重新绑定。但是您想要显示的消息越多，您需要检索的信息就越多，重新呈现所需的时间就越长。所以可能会有明显的滞后。

相反，您可能希望使用 jQuery 或其他支持 Ajax 的框架在每次您想要添加更多消息时从服务器获取另一块消息，并将这些消息添加到您的页面，而无需重新渲染整个转发器的消息。

# sql - 如何获得每天的最后一次读数

> ID：13013463
> 
> 赞同：0
> 
> 时间：2012-10-22T14:23:37.390
> 
> 标签：sql, sql-server

我有这个数据库表，其中不断添加数据。添加的数据是传感器数据，因此每个传感器每小时有两个读数。我想知道一种方法来获取整个月当天的最后一次读数。例如，

```
select * from dbo.NewLogTable
where Sensor_ID= '12345'and Date_Reading between '2012-08-01' and '2012-08-31' 
and DateTimeStamp between '23:30:00'and '23:59:00'
order by DateTimeStamp asc 
```

我知道这不起作用，但它是我想要的伪代码。同样，这里的目标是每天只获得一个特定传感器的读数（最新）。我已经看到很多例子，其中显示了一个月的第一天和最后一天，显示过去 x 天等。不太像我的应用程序。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:27:07.177

```
WITH
  sequenced AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY sensor_id, Date_Reading ORDER BY DateTimeStamp DESC) AS daily_sequence_id,
    *
  FROM
    dbo.NewLogTable
)
SELECT
  *
FROM
  sequenced
WHERE
  sensor_id = '12345'
  AND Date_Reading BETWEEN '2012-08-01' AND '2012-08-31'
  AND daily_sequence_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:25:24.573

您可以使用聚合，即`MAX()`处理此问题。这是 MSDN：

[http://msdn.microsoft.com/en-us/library/ms187751.aspx](http://msdn.microsoft.com/en-us/library/ms187751.aspx)

> 返回表达式中的最大值。后面可以跟 OVER 子句。

您的查询将导致：

```
SELECT SensorID, MAX(Date_reading) FROM NewLogTable GROUP BY Sensor_ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:26:33.190

您可以使用`row_number()`窗口功能来实现这一点

```
select * from
(
    select 
        *, 
        row_number() over (partition by date_reading order by datetimestamp desc) rn 
    from yourtable
) v
where rn = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:27:59.250

您可以`DATEPART`结合使用该函数`MAX`来获取整个月的日期读数：

```
SELECT DATEPART(d, Date_Reading) AS day, MAX(value) AS value FROM table
WHERE Sensor_ID = '12345' 
    AND Date_Reading BETWEEN '2012-08-01' AND '2012-08-31 23:59:59'
GROUP BY DATEPART(d, Date_Reading) 
```

只要确保你的最终价值`BETWEEN`有一个时间部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T14:29:15.637

```
SELECT TOP  1 * 
FROM dbo.NewLogTable
WHERE Sensor_ID = '12345'
AND Date_Reading <= '2012-08-01'
ORDER BY DateTimeSTap DESC 
```

# oracle - Windows 服务器日志位置上的 Oracle 客户端？

> ID：13013466
> 
> 赞同：2
> 
> 时间：2012-10-22T14:23:45.293
> 
> 标签：oracle, logging, location

相当简单的问题，对于标准 Oracle 客户端安装 (10GR2+)

是否有保存在客户端的日志文件？

如果是这样，它住在哪里？

我可以在服务器本身上找到很多关于在哪里找到它们的注释，但不是 Oracle 客户端。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:26:28.263

一般来说，不，客户端不会记录任何内容。

您可以在客户端上启用各种类型的日志——SQL*Net 跟踪的不同级别之一是最常见的——但这些通常只会被启用以追踪某些特定错误的来源。在正常操作期间，它们不会保持启用状态。

# javascript - 替换javascript中的所有出现

> ID：13013474
> 
> 赞同：1
> 
> 时间：2012-10-22T14:24:06.663
> 
> 标签：javascript, replace

我搜索了不同的网站，向我展示了在 js 中替换字符串的方法。但实际上它不起作用！为什么？

我正在使用的代码：

```
var str = "This is html. This is another HTML";
str = str.replace('/html/gi','php'); 
```

**输出：** `This is html. This is another html`

什么都没有改变。令人沮丧！

我用过的参考资料：

*   [如何使用 Javascript 替换函数替换所有出现的字符串](http://www.kodyaz.com/articles/replace-all-occurrences-of-string-using-javascript-replace-function.aspx "如何使用 Javascript 替换函数替换所有出现的字符串")
*   [如何在 JavaScript 中替换字符串中的所有点](https://stackoverflow.com/questions/2390789/how-to-replace-all-points-in-a-string-in-javascript "如何在 JavaScript 中替换字符串中的所有点")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:25:44.907

没有引号：

```
str = str.replace(/html/gi,'php'); 
```

[**RegExp**](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)对象可以用其文字格式表示：

```
/I am an actual object in javascript/gi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:26:22.587

删除引号以使其工作。`//`是一个正则表达式，不能被引用。

```
str = str.replace(/html/gi,'php'); 
```

或者你可以写：

```
str = str.replace(new RegExp('html','gi'),'php'); 
```

非标准的符合方法是这样的（仅在某些浏览器中有效，不推荐！）

```
str.replace("apples", "oranges", "gi"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:27:20.823

从正则表达式中删除单引号，如下所示：

```
var str = "This is html. This is another HTML";
str = str.replace(/html/gi,'php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:28:21.987

```
str = str.replace(/html/, 'php'); 
```

你不应该为第一个参数加上单引号或双引号。

# android - iOS：如何实现类似 Android 的 startActivityForResult 的行为

> ID：13013476
> 
> 赞同：15
> 
> 时间：2012-10-22T14:24:13.430
> 
> 标签：android, iphone, ios

我是一名 Android 开发人员，正在开发我们应用的 iOS 版本。我需要知道如何在 Android 上实现类似于 startActivityForResult 的行为。我需要显示一个新的视图控制器，然后在新的视图控制器关闭时将控制权返回到以前的视图控制器。我当时还需要一个回调方法来触发。

如何在 iOS 中实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T14:42:15.657

有几种方法，所以大多数情况下你自己用各种模式来做这件事。您可以在应用程序委托中设置导航控制器，如下所示：

```
self.viewController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
self.navigationController = [[ UINavigationController alloc ] initWithRootViewController:self.viewController ];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible]; 
```

然后，当你想展示一个新的 vc 时，你可以这样做：

```
OtherViewController *ovc = [[ OtherViewController alloc ] initWithNibName:@"OtherViewController" bundle:nil ];
[ self.navigationController pushViewController:ovc animated:YES ]; 
```

要返回执行此操作：

```
[ self.navigationController popViewControllerAnimated:YES ]; 
```

就回调而言，一种方法是在项目的某处创建这样的协议：

```
@protocol AbstractViewControllerDelegate <NSObject>

@required
- (void)abstractViewControllerDone;

@end 
```

然后让每个视图控制器都希望在委托中触发回调，即：

```
 @interface OtherViewController : UIViewController <AbstractViewControllerDelegate>

 @property (nonatomic, assign) id<AbstractViewControllerDelegate> delegate;

 @end 
```

最后，当您呈现新的 vc 时，将其分配为委托：

```
 OtherViewController *ovc = [[ OtherViewController alloc ] initWithNibName:@"OtherViewController" bundle:nil ];
  ovc.delegate = self;
  [ self.navigationController pushViewController:ovc animated:YES ]; 
```

然后当您关闭 ovc 时，拨打此电话

```
 [self.delegate abstractViewControllerDone];
 [ self.navigationController popViewControllerAnimated:YES ]; 
```

而在rootVC中，符合你制定的协议，你只需填写这个方法：

```
 -(void) abstractViewControllerDone {

 } 
```

你刚刚打过电话。这需要进行大量设置，但其他选项包括查看 NSNotifications 和块，这取决于您的操作可能更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:47:37.067

如果我们假设您想从您自己的应用程序中打开一个活动，那么这很容易。一个 android 活动可以由一个视图控制器 ( `UIViewController`) 来表示。

iOS 和 Android 的架构非常不同。Android 上的活动是独立的，iOS 上的控制器紧密连接在一个应用程序中。您必须决定如何在屏幕上显示控制器（通常使用`UINavigationController`，或以模态方式使用`presentViewController:animated:`）并以某种方式将其连接到父控制器以接收结果。委托模式最适合这一点。

如果您想启动在另一个应用程序中定义的活动或启动系统活动（例如拍摄相机照片），您必须使用预定义的控制器之一（例如 UIImagePickerController）。在 iOS 上，您不能像 Android 那样简单地使用来自不同应用程序的控制器。

And I can recommend you another thing - don't write an iOS app with Android design patterns. Think about what is common on iOS and implement the UI that way. Don't just copy Android code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:37:26.180

通常，您可以使用`UINavigationController`来封装您的`viewControllers`. 然后，您可以在`viewControllers`. 对于回调，您可以`viewWillDissapear:`在第二个视图控制器上使用委托方法并从那里执行一些操作。

# sql-server - SQL 子查询性能问题

> ID：13013477
> 
> 赞同：0
> 
> 时间：2012-10-22T14:24:18.483
> 
> 标签：sql-server

我的 SQL 子查询存在性能问题。

作为硬编码查询，运行大约需要 1 秒：

```
SELECT   ColumnA
        ,ColumnB
        ,ColumnC
FROM    [LinkedServer].[Database].[Schema].[View]
WHERE   ColumnA IN 
    (
        'ABC',
        'DEF',
        'HIJ',
        'KLM'
    ) 
```

但是，以下代码需要一分钟才能运行：

```
SELECT   ColumnA
        ,ColumnB
        ,ColumnC
FROM    [LinkedServer].[Database].[Schema].[View]
WHERE   ColumnA IN 
    (
        SELECT ColumnA FROM #TempTable
    ) 
```

临时表包含与硬编码示例相同的 4 行。链接服务器上的视图包含大约。700,000 行（不幸的是，我无法控制）。ColumnA 数据类型相同，并且两个表都有索引。

有关如何提高此查询性能的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:27:43.150

`JOIN`改为尝试：

```
SELECT   V.ColumnA
        ,V.ColumnB
        ,V.ColumnC
FROM    [LinkedServer].[Database].[Schema].[View] V
INNER JOIN #TempTable T ON V.ColumnA = T.ColumnA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:12:26.013

它可能与查询计划的创建方式有关。在一种情况下，SQL 服务器知道它将在比较中使用什么值，而在第二种情况下，它正在估计。单击“包括实际执行计划”后，在单独的 Management Studio 窗口中运行每个查询。您可能会看到不同的计划。我要检查的第一件事是将鼠标悬停在链接动作的箭头上（从胖的开始）并将估计的行数与实际的行数进行比较。这些值中的较大差异（10 倍？）可能导致 SQL 服务器做出错误的决定（表扫描与索引等）如果您看到这一点，您可能会考虑让 SQL 更改其计划的提示 - 如果您需要使用慢查询！提示的最大问题是，随着数据量的变化，提示很容易成为障碍而不是好处，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:48:12.130

链接服务器供应商为我提供了不同的来源。我现在不是连接到一个视图（它本身分布在多个服务器上），而是连接到一个表。这与 Brian 的 INNER REMOTE JOIN 建议相结合，几乎可以立即返回完整的数据集。

虽然我无法遵循增强的权限/链接服务器选项有点令人沮丧，但至少这个查询运行良好。

非常感谢大家的帮助！

# sql - 获取每组结果的最大元素

> ID：13013478
> 
> 赞同：0
> 
> 时间：2012-10-22T14:24:23.430
> 
> 标签：sql, oracle

我有以下字段：`user_id, app_mod, profile, update_date`. 前三个字段可以重复（即两行可以有`user_id, app_mod and profile`相等，但不同`update_date`）：

```
user_id   app_mod  profile update_date
560047    RI03290   22809   14-GEN-10  
560047    RI03290   22809   18-GEN-10 
```

如何`update_date`在 Oracle 环境中获得更高的一行？

```
560047    RI03290     22809   18-GEN-10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:28:46.417

如果表真的只有 4 列

```
SELECT user_id, app_mod, profile, max(update_date)
  FROM table_name
 GROUP BY user_id, app_mod, profile 
```

如果该表还有其他列您不包括在内并且不会重复您确实希望返回

```
SELECT *
  FROM (SELECT a.*,
               rank() over (partition by user_id, app_mod, profile
                                order by update_date desc) rnk
          FROM table_name a)
 WHERE rnk = 1; 
```

如果存在平局，分析函数`rank`将为多行分配相同的排名（即，两行具有相同`user_id`的 、`app_mod`、`profile`和`update_date`）。你可以使用`row_number`它来任意打破平局。但这通常不是一个可重复的过程——Oracle 可能会在今天选择两行之一，明天再选择另一行。如果您正在查找除最近行之外的行，您可能还会查看，`dense_rank`但这与`rank`您仅查找最近行时的行为相同。

# java - LinkedList checkForComodification错误java

> ID：13013480
> 
> 赞同：9
> 
> 时间：2012-10-22T14:24:26.220
> 
> 标签：java, linked-list, concurrentmodification

好的，所以我在这里尝试做的是让一个方法在给定的“时间”内“运行”一个过程，这一切都在一定程度上起作用，但它不断给出这些感觉。这是它给出的第一个例外

```
 Exception in thread "main" java.util.ConcurrentModificationException 
```

然后在 exicutio 中给出了这个

```
 at java.util.LinkedList$ListItr.checkForComodification(LinkedList.java:761)
at java.util.LinkedList$ListItr.next(LinkedList.java:696)
at parta.PartA.runQueueOne(PartA.java:273) 
```

我不知道我在这里做错了什么，我应该让这个并发还是什么？如果有怎么办？我认为链表本质上是同步的？也许这就是我搞砸的地方。

那么这里的任何方式都是我使用的方法：

```
public static void runQueueOne(LinkedList<MyProcess> q1, LinkedList<MyProcess> q2, LinkedList<MyProcess> q3, LinkedList<MyProcess> q4, int ct) {
    System.out.println("Running Level One Queue");

    for (MyProcess p : q1) {
        if (p.name.equalsIgnoreCase(q1.getFirst().name)) {
            //add 3 millsedonds to the service time
            q1.getFirst().serviceTimeTotal += 3;
            System.out.println(q1.getFirst().name + " is running");

        } else {
            //add 3 millseconds to wait time fr the un busy one
            p.waitTimeTotal += 3;
        }
    }

    for (MyProcess p : q2) {
        p.waitTimeTotal += 3;
    }
    for (MyProcess p : q3) {
        p.waitTimeTotal += 3;
    }
    for (MyProcess p : q4) {
        p.waitTimeTotal += 3;
    }

    //calculate all the priority
    for (MyProcess p : q1) {
        p.calculatePriority();
        switch (p.priority) {
            case 1:
                break;
            case 2:
                q1.remove(p);
                q2.add(p);
                break;
            case 3:
                q1.remove(p);
                q3.add(p);
                break;
            case 4:
                q1.remove(p);
                q4.add(p);
                break;
        }

    }
    ct += 3;
} 
```

这是我在 main 方法中调用它的地方

```
while (!allProcessDone) {
    //arrival queue
    for (MyProcess p : al) {
        addToQueue(qOne, p, currentTime);

        //cheack to see if all the processes are done
        if (p1.isDone == true &
                p2.isDone == true &
                p3.isDone == true &
                p4.isDone == true &
                p5.isDone == true &
                p6.isDone == true &
                p7.isDone == true &
                p8.isDone == true &
                p9.isDone == true &
                p10.isDone == true) {
            //end the loop
            allProcessDone = true;
            System.out.println("All proccess have been completed");
            break;
        }

        switch (robin) {
            case 1:
                runQueueOne(qOne, qTwo, qThree, qFour, currentTime);
                robin = 2;
                break;
            case 2:
                runQueueTwo(qOne, qTwo, qThree, qFour, currentTime);
                robin = 3;
                break;
            case 3:
                runQueueThree(qOne, qTwo, qThree, qFour, currentTime);
                robin = 4;
                break;
            case 4:
                runQueueFour(qOne, qTwo, qThree, qFour, currentTime);
                robin = 1;
                break;

        }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T14:37:54.830

您正在同时访问和修改集合，这不能直接从 for-each 循环中完成。

你必须使用`Iterator`来解决这个问题。

```
LinkedList<MyProcess> q1 = new LinkedList<MyProcess>();

Iterator<MyProcess> iterator = q1.iterator();

while (iterator.hasNext()){
     MyProcess mp = iterator.next();

     if (mp.name.equals("xyz")){
         iterator.remove();    // You can do the modification here.
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T14:33:17.043

ConcurrentModificationException 发生在您尝试从 List 中删除元素时，同时使用 for 循环遍历它。

我猜您的错误来自以下几行：

```
for (MyProcess p : q1) {
    p.calculatePriority();

    switch (p.priority) {
        case 1:
            break;
        case 2:
            q1.remove(p);
            q2.add(p);
            break;
        case 3:
            q1.remove(p);
            q3.add(p);
            break;
        case 4:
            q1.remove(p);
            q4.add(p);
            break;
    }
} 
```

要修复错误，请使用[iterator.remove()](https://stackoverflow.com/questions/1655362/concurrentmodificationexception-java-iterator-next)方法

# sql - SqlParameter 和 ExecuteNonQuery 导致不可重复的超时

> ID：13013486
> 
> 赞同：0
> 
> 时间：2012-10-22T14:24:56.817
> 
> 标签：sql, sql-server, vb.net, sqlparameter, executenonquery

我最近继承了一些偶尔会出现超时问题的代码。我最熟悉 ORM，所以我无法确定这段代码是否有问题。当它没有超时时，它会在几秒钟内工作。超时大约需要一分钟。

这是代码：

```
Dim sql As String = "UPDATE VendorInfo SET " & _
           "AbsInkUpdateStatus=@AbsInkUpdateStatus, AccountingNotes=@AccountingNotes, " & _
           "AccountNumber=@AccountNumber, Address_Ship=@Address_Ship, " & _
           "Address0=@Address0, Address1=@Address1, Address2=@Address2, ArtEmail=@ArtEmail, " & _
           "ArtRequirements=@ArtRequirements, City=@City, " & _
           "City_Ship=@City_Ship, CreditLimit=@CreditLimit, DisplayName=@DisplayName, " & _
           "EarlyBy=@EarlyBy, EarlyConfirm=@EarlyConfirm, " & _
           "EarlyHas=@EarlyHas, EarlyNet=@EarlyNet, " & _
           "EarlyNotes=@EarlyNotes, EarlyOn=@EarlyOn, " & _
           "EarlyPercent=@EarlyPercent, Email=@Email, " & _
           "Fax=@Fax, PContactName=@PContactName, " & _
           "Phone=@Phone, Pricing=@Pricing, " & _
           "PromosBy=@PromosBy, PromosConfirm=@PromosConfirm, " & _
           "PromosHas=@PromosHas, PromosNotes=@PromosNotes, " & _
           "PromosOn=@PromosOn, QBName=@QBName, QBTerms=@QBTerms, RebateBy=@RebateBy, " & _
           "RebateConfirm=@RebateConfirm, RebateHas=@RebateHas, " & _
           "RebateNotes=@RebateNotes, RebateOn=@RebateOn, " & _
           "RushPolicy=@RushPolicy, SampleBy=@SampleBy, " & _
           "SampleConfirm=@SampleConfirm, SampleHas=@SampleHas, " & _
           "SampleNotes=@SampleNotes, SampleOn=@SampleOn, " & _
           "SamplePolicy=@SamplePolicy, ShippingBy=@ShippingBy, " & _
           "ShippingConfirm=@ShippingConfirm, ShippingHas=@ShippingHas, " & _
           "ShippingNotes=@ShippingNotes, ShippingOn=@ShippingOn, " & _
           "ShipTo=@ShipTo, [SMP FAX]=@SMP_FAX, " & _
           "SpecialBy=@SpecialBy, SpecialConfirm=@SpecialConfirm, " & _
           "SpecialHas=@SpecialHas, SpecialInstructions=@SpecialInstructions, " & _
           "SpecialNotes=@SpecialNotes, SpecialOn=@SpecialOn, " & _
           "SpecialPricingShort=@SpecialPricingShort, State=@State, " & _
           "State_Ship=@State_Ship, TermsBy=@TermsBy, " & _
           "TermsConfirm=@TermsConfirm, TermsHas=@TermsHas, " & _
           "TermsNotes=@TermsNotes, TermsOn=@TermsOn, " & _
           "TypicalShippingCost=@TypicalShippingCost, UpdateStatus=@UpdateStatus, " & _
           "VendorName=@VendorName, VendorStrength=@VendorStrength, " & _
           "WebPage=@WebPage, ZipCode=@ZipCode, EmailPO=@EmailPO, SendPO=@SendPO, " & _
           "ZipCode_Ship=@ZipCode_Ship WHERE ID=@ID"
        Dim p() As SqlParameter = New SqlParameter(74) {}
        p(0) = MakeSQLParam("@AbsInkUpdateStatus", SqlDbType.VarChar, 50, SS(ht("AbsInkUpdateStatus")))
        p(1) = MakeSQLParam("@AccountingNotes", SqlDbType.VarChar, 500, SS(ht("AccountingNotes")))
        p(2) = MakeSQLParam("@AccountNumber", SqlDbType.NVarChar, 35, SS(ht("AccountNumber")))
        p(3) = MakeSQLParam("@Address_Ship", SqlDbType.NVarChar, 50, SS(ht("Address_Ship")))
        p(68) = MakeSQLParam("@Address0", SqlDbType.VarChar, 100, SS(ht("Address0")))
        p(4) = MakeSQLParam("@Address1", SqlDbType.NVarChar, 50, SS(ht("Address1")))
        p(69) = MakeSQLParam("@Address2", SqlDbType.VarChar, 50, SS(ht("Address2")))
        p(5) = MakeSQLParam("@ArtEmail", SqlDbType.NVarChar, 100, SS(ht("ArtEmail")))
        p(6) = MakeSQLParam("@ArtRequirements", SqlDbType.NText, SS(ht("ArtRequirements")))
        p(7) = MakeSQLParam("@City", SqlDbType.NVarChar, 50, SS(ht("City")))
        p(8) = MakeSQLParam("@City_Ship", SqlDbType.NVarChar, 50, SS(ht("City_Ship")))
        p(72) = MakeSQLParam("@CreditLimit", SqlDbType.Float, ht("CreditLimit"))
        If ((Not ht.ContainsKey("EmailPO")) OrElse IsDBNull(ht("EmailPO")) OrElse String.IsNullOrEmpty(ht("EmailPO"))) Then
            p(73) = MakeSQLParam("@EmailPO", SqlDbType.Bit, DBNull.Value)
        Else
            p(73) = MakeSQLParam("@EmailPO", SqlDbType.Bit, Convert.ToBoolean(ht("EmailPO")))
        End If
        If ((Not ht.ContainsKey("SendPO")) OrElse IsDBNull(ht("SendPO")) OrElse String.IsNullOrEmpty(ht("SendPO"))) Then
            p(74) = MakeSQLParam("@SendPO", SqlDbType.NVarChar, 255, DBNull.Value)
        Else
            p(74) = MakeSQLParam("@SendPO", SqlDbType.NVarChar, 255, SS(ht("SendPO")))
        End If
        p(9) = MakeSQLParam("@DisplayName", SqlDbType.NVarChar, 255, SS(ht("DisplayName")))
        p(10) = MakeSQLParam("@EarlyBy", SqlDbType.VarChar, 5, SS(ht("EarlyBy")))
        p(11) = MakeSQLParam("@EarlyConfirm", SqlDbType.VarChar, 50, SS(ht("EarlyConfirm")))
        p(12) = MakeSQLParam("@EarlyHas", SqlDbType.VarChar, 10, SS(ht("EarlyHas")))
        p(13) = MakeSQLParam("@EarlyNet", SqlDbType.VarChar, 10, SS(ht("EarlyNet")))
        p(14) = MakeSQLParam("@EarlyNotes", SqlDbType.VarChar, 125, SS(ht("EarlyNotes")))
        p(15) = MakeSQLParam("@EarlyOn", SqlDbType.DateTime, DtoDB(ht("EarlyOn")))
        p(16) = MakeSQLParam("@EarlyPercent", SqlDbType.Decimal, DBS(ht("EarlyPercent"), True))
        p(17) = MakeSQLParam("@Email", SqlDbType.NVarChar, 75, SS(ht("Email")))
        p(18) = MakeSQLParam("@Fax", SqlDbType.NVarChar, 50, SS(ht("Fax")))
        p(19) = MakeSQLParam("@ID", SqlDbType.Int, ht("ID"))
        p(20) = MakeSQLParam("@PContactName", SqlDbType.NVarChar, 50, SS(ht("PContactName")))
        p(21) = MakeSQLParam("@Phone", SqlDbType.NVarChar, 50, SS(ht("Phone")))
        p(22) = MakeSQLParam("@Pricing", SqlDbType.NVarChar, 255, SS(ht("Pricing")))
        p(23) = MakeSQLParam("@PromosBy", SqlDbType.VarChar, 5, SS(ht("PromosBy")))
        p(24) = MakeSQLParam("@PromosConfirm", SqlDbType.VarChar, 50, SS(ht("PromosConfirm")))
        p(25) = MakeSQLParam("@PromosHas", SqlDbType.VarChar, 10, SS(ht("PromosHas")))
        p(26) = MakeSQLParam("@PromosNotes", SqlDbType.VarChar, 125, SS(ht("PromosNotes")))
        p(27) = MakeSQLParam("@PromosOn", SqlDbType.DateTime, DtoDB(ht("PromosOn")))
        p(70) = MakeSQLParam("@QBName", SqlDbType.VarChar, 41, SS(ht("QBName")))
        p(71) = MakeSQLParam("@QBTerms", SqlDbType.VarChar, 31, SS(ht("QBTerms")))
        p(28) = MakeSQLParam("@RebateBy", SqlDbType.VarChar, 5, SS(ht("RebateBy")))
        p(29) = MakeSQLParam("@RebateConfirm", SqlDbType.VarChar, 50, SS(ht("RebateConfirm")))
        p(30) = MakeSQLParam("@RebateHas", SqlDbType.VarChar, 10, SS(ht("RebateHas")))
        p(31) = MakeSQLParam("@RebateNotes", SqlDbType.VarChar, 125, SS(ht("RebateNotes")))
        p(32) = MakeSQLParam("@RebateOn", SqlDbType.DateTime, DtoDB(ht("RebateOn")))
        p(33) = MakeSQLParam("@RushPolicy", SqlDbType.NVarChar, 200, SS(ht("RushPolicy")))
        p(34) = MakeSQLParam("@SampleBy", SqlDbType.VarChar, 5, SS(ht("SampleBy")))
        p(35) = MakeSQLParam("@SampleConfirm", SqlDbType.VarChar, 50, SS(ht("SampleConfirm")))
        p(36) = MakeSQLParam("@SampleHas", SqlDbType.VarChar, 10, SS(ht("SampleHas")))
        p(37) = MakeSQLParam("@SampleNotes", SqlDbType.VarChar, 125, SS(ht("SampleNotes")))
        p(38) = MakeSQLParam("@SampleOn", SqlDbType.DateTime, DtoDB(ht("SampleOn")))
        p(39) = MakeSQLParam("@SamplePolicy", SqlDbType.NVarChar, 255, SS(ht("SamplePolicy")))
        p(40) = MakeSQLParam("@ShippingBy", SqlDbType.VarChar, 5, SS(ht("ShippingBy")))
        p(41) = MakeSQLParam("@ShippingConfirm", SqlDbType.VarChar, 50, SS(ht("ShippingConfirm")))
        p(42) = MakeSQLParam("@ShippingHas", SqlDbType.VarChar, 10, SS(ht("ShippingHas")))
        p(43) = MakeSQLParam("@ShippingNotes", SqlDbType.VarChar, 125, SS(ht("ShippingNotes")))
        p(44) = MakeSQLParam("@ShippingOn", SqlDbType.DateTime, DtoDB(ht("ShippingOn")))
        p(45) = MakeSQLParam("@ShipTo", SqlDbType.NVarChar, 100, SS(ht("ShipTo")))
        p(46) = MakeSQLParam("@SMP_FAX", SqlDbType.NVarChar, 50, SS(ht("SMP FAX")))
        p(47) = MakeSQLParam("@SpecialBy", SqlDbType.VarChar, 5, SS(ht("SpecialBy")))
        p(48) = MakeSQLParam("@SpecialConfirm", SqlDbType.VarChar, 50, SS(ht("SpecialConfirm")))
        p(49) = MakeSQLParam("@SpecialHas", SqlDbType.VarChar, 10, SS(ht("SpecialHas")))
        p(50) = MakeSQLParam("@SpecialInstructions", SqlDbType.Text, SS(ht("SpecialInstructions")))
        p(51) = MakeSQLParam("@SpecialNotes", SqlDbType.VarChar, 255, SS(ht("SpecialNotes")))
        p(52) = MakeSQLParam("@SpecialOn", SqlDbType.DateTime, DtoDB(ht("SpecialOn")))
        p(53) = MakeSQLParam("@SpecialPricingShort", SqlDbType.VarChar, 80, SS(ht("SpecialPricingShort")))
        p(54) = MakeSQLParam("@State", SqlDbType.NVarChar, 25, SS(ht("State")))
        p(55) = MakeSQLParam("@State_Ship", SqlDbType.NVarChar, 25, SS(ht("State_Ship")))
        p(56) = MakeSQLParam("@TermsBy", SqlDbType.VarChar, 5, SS(ht("TermsBy")))
        p(57) = MakeSQLParam("@TermsConfirm", SqlDbType.VarChar, 50, SS(ht("TermsConfirm")))
        p(58) = MakeSQLParam("@TermsHas", SqlDbType.VarChar, 10, SS(ht("TermsHas")))
        p(59) = MakeSQLParam("@TermsNotes", SqlDbType.VarChar, 125, SS(ht("TermsNotes")))
        p(60) = MakeSQLParam("@TermsOn", SqlDbType.DateTime, DtoDB(ht("TermsOn")))
        p(61) = MakeSQLParam("@TypicalShippingCost", SqlDbType.NText, SS(ht("TypicalShippingCost")))
        p(62) = MakeSQLParam("@UpdateStatus", SqlDbType.VarChar, 50, SS(ht("UpdateStatus")))
        p(63) = MakeSQLParam("@VendorName", SqlDbType.NVarChar, 100, SS(ht("VendorName")))
        p(64) = MakeSQLParam("@VendorStrength", SqlDbType.NVarChar, 100, SS(ht("VendorStrength")))
        p(65) = MakeSQLParam("@WebPage", SqlDbType.NVarChar, 100, SS(ht("WebPage")))
        p(66) = MakeSQLParam("@ZipCode", SqlDbType.NVarChar, 15, SS(ht("ZipCode")))
        p(67) = MakeSQLParam("@ZipCode_Ship", SqlDbType.NVarChar, 15, SS(ht("ZipCode_Ship")))

        Dim con As SqlConnection = Nothing
        Try
            con = New SqlConnection(ConfigurationManager.AppSettings("LeadsConnectionString"))
            SqlHelper.ExecuteNonQuery(con, CommandType.Text, sql, p)
        Catch ex As Exception
            Throw New Exception(ex.Message & " UPDATE failed for 'VendorInfo' " & ht.TableAsString, ex)
        Finally
            If (Not con Is Nothing) Then con.Close()
        End Try 
```

SS 是“安全字符串”函数，MakeSQLParam 设置方向`input`并确保不违反大小值。

所以我的问题是：有没有人发现这段代码有什么问题可能会导致反应迟缓？或者有没有人知道我可能想检查的其他任何东西可以帮助解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:28:47.843

很可能是由于参数嗅探，导致缓存了不合适的查询计划。

有这么多参数，您可能每次都必须重新编译查询。

首先尝试重建索引并确保统计信息是最新的：（生产环境中的**注意...）**

```
exec sp_msforeachtable "DBCC DBREINDEX('?')"
go

exec sp_msforeachtable "UPDATE STATISTICS ? WITH FULLSCAN, COLUMNS"
go 
```

然后，检查在 SSMS 中运行 SQL 的快速和慢速情况的查询计划。如果没有确凿证据，那么检查其他可能持有锁的进程。

[在 StackOverflow 上已经回答了许多相关问题。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:29:25.497

这是针对 SQL Server 运行的吗？超时时，您可能会遇到死锁。您可能希望在遇到超时时监控正在运行的事务，和/或尝试在 Management Studio 中手动运行该语句并查看是否遇到死锁。

如果您有任何正在运行的代理作业访问相同的表，或者可能有其他可能访问相同表的进程，那可能是您的问题。

# linux - 为什么内核映射到与进程相同的地址空间？

> ID：13013491
> 
> 赞同：17
> 
> 时间：2012-10-22T14:25:12.420
> 
> 标签：linux, memory-management, operating-system, kernel

这是一个需要详细说明的问题：[为什么说内核在进程地址空间中？](https://stackoverflow.com/questions/7275689/why-is-kernel-said-to-be-in-process-address-space)

> 这可能是一个愚蠢的问题，但它只是突然出现在我的脑海中。所有关于进程地址空间和虚拟内存布局的文本都提到进程地址空间为内核保留了空间。例如，在 32 位系统上，进程地址空间为 4GB，其中 1 GB 为 Linux 中的内核保留（在其他操作系统上可能不同）。
> 
> 我只是想知道当一个进程不能直接寻址内核时，为什么说内核在进程地址空间中。为什么我们不说内核与进程有一个单独的地址空间，为什么我们不能为内核本身提供一个与进程的页表分开的不同页表？

我能得到关于 Linux（Debian 或 Ubuntu）特定操作系统的解释吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-22T14:55:44.520

要回答问题的另一部分 - 出于效率/性能原因，内核部分映射到每个进程地址空间（我敢肯定，还有其他原因）。

在大多数现代硬件上，更改安全级别（从而允许访问受保护的页面，如 Alexey 的回答中所述）以执行系统调用和其他内核提供的功能比更改安全级别更快以及整个虚拟内存映射，以及所有相关的 TLB 缓存刷新以及完整上下文切换中涉及的所有其他内容。

由于系统调用可能是相当频繁的事件，因此在 Linux 和许多其他地方发展的设计试图最大限度地减少利用内核服务的开销，并将内核代码和（至少部分）数据映射到每个进程是其中的一部分那个。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T14:32:14.793

一个进程在这里“拥有”整个虚拟地址空间、内核和它的用户部分。

它无法窥视和戳内核代码和数据不是由于地址空间不同，而是由于页表中设置的访问权限/权限不同。内核页面的设置方式使常规应用程序无法访问它们。

然而，习惯上将一个整体的两个部分称为内核空间和用户空间，这可能会造成混淆。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-27T14:48:16.633

我们说内核在进程地址空间的另一个重要原因是内核可以访问当前进程的用户代码/数据，即虚拟地址空间0~3G。

对不起我的英语不好。我不是以英语为母语的人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-21T18:05:48.763

想象一下，如果内核没有映射到每个进程地址空间会发生什么。它会发生三倍故障，因为说定时器中断发生，然后处理器使用 IDT（中断描述符表）调用 ISR 例程。如果内核没有映射，那么IDT 地址变为无效，因此将导致三重故障。

# iphone - 减少线宽 CGContextSetLineWidth(context, 1.0);

> ID：13013492
> 
> 赞同：1
> 
> 时间：2012-10-22T14:25:14.850
> 
> 标签：iphone, width, line

我正在画一条线

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextSetLineWidth(context, 1.0);

CGContextMoveToPoint(context, 0.0, 100.0);
CGContextAddLineToPoint(context, 310.0, 100.0);
CGContextStrokePath(context); 
```

怎样才能使线宽0.25？如果我正在制作 CGContextSetLineWidth(context, 0.25); 那么宽度也没有重新使用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:07:22.883

尝试将视图的 contentScaleFactor 设置为 4

# gwt - GWT - 不使用 FileUpload 对话框将文件上传到服务器

> ID：13013497
> 
> 赞同：7
> 
> 时间：2012-10-22T14:25:33.780
> 
> 标签：gwt

我需要从用 GWT 编写的 Web 应用程序将文件上传到服务器。复杂的部分是无法显示 FileUpload 对话框（由于 TabPanel 上的空间紧缩问题）。所以点击一个按钮，我需要：

*   直接打开文件选择，无需使用包含要单击的 UploadItem 的附加表单来打扰用户
*   选择文件后立即开始上传

我在 GWT 中编写了以下代码，以在单击按钮时打开文件选择对话框：

```
final FileUpload upload = new FileUpload(); 

upload.setVisible(false);
upload.setName("uploadFormElement"); 
panel.add(upload);

panel.add(new Button("Select File", new ClickListener() { 
    public void onClick(Widget pSender) { 
         jsClickUpload( upload.getElement() );
         MessageBox.showMessage("selected filename: " + upload.getFilename());
    } 
}));

native void jsClickUpload(Element pElement) /*-{ pElement.click(); }-*/; 
```

虽然这确实会在单击按钮时打开文件选择对话框，但它同时也会显示带有空白文件名值的消息框。

所以我需要的是只有在选择文件后，才会显示消息框。我怎样才能做到这一点？另外，在此之后如何将实际文件上传到服务器（M

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:54:21.467

这是一个工作示例：

```
public void onModuleLoad() {
    final FileUpload upload = new FileUpload();

    upload.setVisible(false);
    upload.setName("uploadFormElement");
    RootPanel.get().add(upload);

    Button b = new Button("Select File");
    b.addClickHandler(new ClickHandler() {
        @Override
        public void onClick(ClickEvent event) {
            jsClickUpload(upload.getElement());
        }
    });

    upload.addChangeHandler(new ChangeHandler() {
       @Override
        public void onChange(ChangeEvent event) {
            Window.alert(upload.getFilename());
        }
    });

    RootPanel.get().add(b);
}

native void jsClickUpload(Element pElement) /*-{
    pElement.click();
}-*/; 
```

要上传它，您需要一个接收上传的 Servlet。我使用这个附加库：[http](http://code.google.com/p/gwtupload/) ://code.google.com/p/gwtupload/您可以在他们的网站上找到所需的所有代码。

# java - JSON - 如何对请求和响应进行常用操作

> ID：13013503
> 
> 赞同：0
> 
> 时间：2012-10-22T14:25:45.007
> 
> 标签：java, json, web-services, rest, jackson

代码 #1 的示例：

```
@POST
@Path("/foo")
@Consumes({ MediaType.APPLICATION_JSON })
public SomeClassA foo(SomeOtherClassB input, @Context HttpServletResponse response, @Context HttpServletRequest request) {

    takeSomethingFromRequestAndPutOnResponseHeader(response, request);

    //... do more logic actions

    return x;
}

@POST
@Path("/bar")
@Consumes({ MediaType.APPLICATION_JSON })
public SomeClassC bar(SomeOtherClassD input, @Context HttpServletResponse response, @Context HttpServletRequest request) {

    takeSomethingFromRequestAndPutOnResponseHeader(response, request);

    //... do more logic actions

    return y;
} 
```

如您所见，我们有许多不同的 API 方法，并且在每个 API 中，我们需要注入请求和响应，以便我们能够对它们执行**相同**的操作。

所以，问题是：我们怎样才能让这段代码只写一次？
* 所以，我们不需要在每个方法上写 * 所以，我们不需要每次执行该方法
*`@Context HttpServletResponse response, @Context HttpServletRequest request`*

*`takeSomethingFromRequestAndPutOnResponseHeader(response, request);`*

这主要是为了以防有人忘记这样做......

原因是我们的 API 在多个服务器上运行，我们希望将服务器 url（来自请求）添加到响应头中，以便于不同环境的调试。

非常感谢，
乌里。

我们想要的是：

```
@POST
@Path("/foo")
@Consumes({ MediaType.APPLICATION_JSON })
public SomeClassA foo(SomeOtherClassB input) {
    //... do more logic actions
    return x;
}

@POST
@Path("/bar")
@Consumes({ MediaType.APPLICATION_JSON })
public SomeClassC bar(SomeOtherClassD input) {
    //... do more logic actions
    return y;
} 
```

虽然这是在其他地方写过**一次**。

```
@Context HttpServletResponse response, @Context HttpServletRequest request
takeSomethingFromRequestAndPutOnResponseHeader(response, request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:45:20.863

如果您希望所有 API 方法都使用此功能，为什么不使用[http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)呢？

这不会注入请求和响应，但是在调用 takeSomethingFromRequestAndPutOnResponseHeader(response, request) 之后，您可能不需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:16:16.083

通过公开和注释 HttpServletResponse/HttpServletRequest 字段，您可以在类级别注入 HttpServletResponse 和 HttpServletRequest。例如：

```
class MyResource {
@Context 
private HttpServletResponse response;
@Context
private HttpServletRequest request;
.....
//API methods below.....

} 
```

这样您就不需要将请求和响应作为参数显式传递给您的 API 方法。

# iphone - Adwhirl 在导航控制器内部给出错误

> ID：13013505
> 
> 赞同：1
> 
> 时间：2012-10-22T14:25:48.827
> 
> 标签：iphone, xcode, adwhirl

我在“第二页”的导航控制器中有一个 adwhirlview，所以它是 root -> adwhirlpage。

横幅的显示效果很好，但是如果我将导航控制器弹出回根目录，大约 20 秒后，调试器会给我一个错误：

```
 -[__NSCFTimer viewControllerForPresentingModalView]: unrecognized selector sent to instance 0xa8a5cc0
2012-10-22 16:22:49.173 Tap Chap backup[1376:1be03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFTimer viewControllerForPresentingModalView]: unrecognized selector sent to instance 0xa8a5cc0'
*** First throw call stack:
(0x1ddb022 0x2e4ccd6 0x1ddccbd 0x1d41ed0 0x1d41cb2 0xe806 0x1d172 0x1c63e 0x1d331 0x1731eb6 0x1daf936 0x1daf3d7 0x1d12790 0x1d11d84 0x1d11c9b 0x23947d8 0x239488a 0xdf5626 0x2dea 0x2d35)
terminate called throwing an exception(lldb) 
```

我的代码如下：

```
-(IBAction)backMainMenu
{
    [self.navigationController popViewControllerAnimated:YES];
    [self.adwhirlView1 removeFromSuperview];
}

- (void)viewDidLoad
{
    [self showBanner];
}

-(UIViewController *)viewControllerForPresentingModalView
{
    return self.navigationController;
}

-(NSString *)adWhirlApplicationKey 
{
    return @"my key";
}

-(void)showBanner
{
    self.adwhirlView1  = [AdWhirlView requestAdWhirlViewWithDelegate:self];

    //  adwhirlView1.bounds = CGRectMake(0.0, 0.0, 480, 50);

    [self.navigationController.view addSubview:self.adwhirlView1];

}

-(void)adWhirlDidReceiveAd:(AdWhirlView *) adWhirlView 
{
    [UIView beginAnimations:@"AdWhirlDelegate.adWhirlDidReceiveAd:" context:nil];

    [UIView setAnimationDuration:0.7];
    CGSize adSize = [adwhirlView1 actualAdSize];
    CGRect newFrame = adwhirlView1.frame;
    newFrame.size = adSize;
    newFrame.origin.x = (self.view.bounds.size.width - adSize.width)/ 2;
    adwhirlView1.frame = newFrame;

    CGAffineTransform makeLandscape = CGAffineTransformMakeRotation(degreesToRadians(0));
    makeLandscape = CGAffineTransformTranslate(makeLandscape, -480/2 + 48/2, 320/2 - 48/2 - 12);
    makeLandscape = CGAffineTransformScale(makeLandscape, 480.0/320, 480.0/320);
    adwhirlView1.transform = makeLandscape;

    adwhirlView1.frame = CGRectMake(0, 250, 480, 100);

    [UIView commitAnimations];
} 
```

我希望你们能帮助我消除这个错误，从而给出已经放置的错误。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:50:25.663

如果您在从超级视图中删除它之前 nil out 是否仍然收到错误`self.adwhirlView1`消息`delegate`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:02:10.913

您在 NSTimer 上调用 UINavigationController 方法。那不管用。

> -[__NSCFTimer viewControllerForPresentingModalView]：无法识别的选择器发送到实例 0xa8a5cc0

# javascript - 带视口的 HTML5 等距画布 - 性能非常差

> ID：13013511
> 
> 赞同：1
> 
> 时间：2012-10-22T14:26:07.873
> 
> 标签：javascript, html, css, canvas, kineticjs

我已经修改`kinetic-viewport`了库来制作`scrollable`地图，但我遇到了与性能相关的问题。我制作了`30x20`矩形，它们被旋转了`120*`. 正如你所看到的，这非常简单，但它滞后很多，我想知道如果我把图像放在它们上面然后制作一些精灵和动画会发生什么？游戏估计不能玩了。

我做错了什么？我以前从未写过游戏，仅限商业网站。也许我在写游戏时应该换个思路？

演示 - 按 RMB 滚动。使用 Mousewhell 进行缩放 - [http://godlike.hekko.pl/kinetic-viewport/demo.html](http://godlike.hekko.pl/kinetic-viewport/demo.html)

来源 - [http://godlike.hekko.pl/inne/kinetic-viewport.7z](http://godlike.hekko.pl/inne/kinetic-viewport.7z)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:03:48.527

我看到您正在使用 setInterval：您最好在可用的情况下使用[requestAnimationFrame](http://www.w3.org/TR/animation-timing/#requestAnimationFrame "requestAnimationFrame") API，因为它专门用于动画，并且可以为您提供更好的帧速率和更少的 CPU 使用率（因此，如果您还针对移动设备）。

如果您打算创建一个滚动游戏，您也可以尝试一些专门为游戏设计的东西；我推荐[Canvace](http://canvace.com/ "坎维斯")，我也参与其中。:)

# opencv - OpenCV中的鱼眼/广角镜头校准

> ID：13013513
> 
> 赞同：11
> 
> 时间：2012-10-22T14:26:10.970
> 
> 标签：opencv, camera-calibration, distortion, calibration

我知道默认的 OpenCV 校准系统为针孔相机建模，但我正在使用一个使用极宽 FOV 镜头（187 度）的系统。如果在 OpenCV 中有任何现有的方法可以做到这一点，或者只使用广角镜头？或者我是否必须为我的系统重写所有校准/不失真？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T13:27:09.003

似乎没有好的 OpenCV 方法可以做到这一点。

我最终使用 OCamLib 进行实际校准，然后编写我自己的“undistortPoints”函数（使用 Scaramuzza 的算法）将 2D 图像点不失真为 3D 单位向量（而不是 2D 点）。不幸的是，这也破坏了 OpenCV 中的许多其他内容，因为大多数 OpenCV 图像处理函数都需要 2D 点和它们自己的针孔校准模型，因此我不得不为此重建代码的重要部分。

我欢迎对此有任何其他见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T07:52:28.297

人们不经常使用广角镜头有一个很好的理由——当图像不失真时，生成的图像是高度非矩形的，并且边缘的质量非常糟糕，以至于需要将图像裁剪回...... 90 度视场。所以问题是，为什么不首先使用 90 度 FOV 镜头呢？立体摄像头和图像校正使情况变得更糟。

如果您确实需要宽 FOV，请使用多个相机或旋转相机。以下是一些示例：[PointGrey Inc.](http://ww2.ptgrey.com/spherical-vision)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-09T20:03:37.697

为了校准具有极宽 FOV 镜头的相机，您可以使用OpenCV [Contrib的](https://github.com/opencv/opencv_contrib)[全向相机模块](http://docs.opencv.org/trunk/dd/d12/tutorial_omnidir_calib_main.html)。重要的是要注意您必须使用 OpenCV 贡献重建您的 OpenCV 才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-07T07:15:29.593

OpenCV 鱼眼相机标定模块采用基于针孔相机模型的方法。在这个模型中，我们在相机的光轴和来自相机前面的某个物体的光线之间有一个角度。我们在光轴和方向之间也有一个角度来指向未失真的图像（对应于对象）。如果校准正确，这两个角度将相等。这意味着如果您的相机的FOV约为180度，则从未失真图像的中心到未失真图像边缘的距离将等于无穷大。因此，OpenCV 鱼眼校正模块 (cv::fisheye) 仅对图像的中心部分进行不失真。[我在此处](https://stackoverflow.com/questions/48990136/opencv-undistorts-only-a-central-part-of-fisheye-image?noredirect=1&lq=1)放置的此限制的更详细说明.在我自己的结果中，我在未失真的图像中获得了 140-150 度的 FOV。如果 FOV 大约 140-150 度适合您，您可以使用 cv::fisheye 无需任何修改

# jsf-2 - javax.faces。上下文参数

> ID：13013525
> 
> 赞同：-3
> 
> 时间：2012-10-22T14:26:52.177
> 
> 标签：jsf-2, web.xml

请告诉我，我可以使用以下设置在“javax.faces.”（web.xml）中设置所有参数：

```
<context-param>
    <param-name>javax.faces.</param-name>
    <param-value>true</param-value>
</context-param> 
```

这个设置是否意味着什么？我只是在一个地方看到它，当我开始应用程序时我也不例外，但我不明白它的意思。试图浏览互联网寻求答案，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:42:50.733

不，它不是那样工作的。你*真的*需要**单独**设置它们。请注意，还有一些上下文参数根本不接受布尔值。因此，无论如何，您的理论方法对他们来说都是失败的。

有关所有可用标准 JSF 上下文参数的概述，请阅读[JSF 规范的第 11.1.3 章“应用程序配置参数”（用于评估）](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)。对于 HTML 页面风格的在线副本，请查看[JBoss AS 6 手册第 5.1 章](http://docs.jboss.org/jbossas/6/JSF_Guide/en-US/html/jsf.reference.html)。

请注意，JSF 实现也有自己特定的上下文参数集，例如[`com.sun.faces`用于 Mojarra](https://wikis.oracle.com/display/GlassFish/JavaServerFacesRI#JavaServerFacesRI-Whatcontextparametersareavailableandwhatdotheydo%3F)的参数和[`org.apache.myfaces`用于 MyFaces](http://myfaces.apache.org/core20/myfaces-impl/webconfig.html)的参数。

# java - iBatis 3、JAVA、ORACLE 和函数

> ID：13013531
> 
> 赞同：2
> 
> 时间：2012-10-22T14:27:02.900
> 
> 标签：java, oracle, ibatis

我在 ORACLE 中有一个需要很长时间并返回一个字符串的函数。

```
FUNCTION "GEN_NEXT_COD_NRE" (AN_ID_MEDIC IN NUMBER)
RETURN VARCHAR2 
```

正如我所读到的，在 iBatis 3 中没有标签，也没有要设置的 IN 或 OUT 映射。

所以在我的 DAO 中，我有这样的东西：

```
public String createNextNre(MedicContract contract); 
```

我的地图是：

```
<select id="createNextNre" statementType="CALLABLE" resultType="string" parameterType="MedicContract">
{? = call GEN_NEXT_COD_NRE(#{idMedic})}
</select> 
```

不幸的是，这种方式行不通。这是错误：

```
SQLException: Missing IN or OUT parameter at index:: 2 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:38:23.857

看看[如何用 mybatis 调用存储的函数](https://stackoverflow.com/questions/9901608/how-to-call-stored-function-with-mybatis)并搞砸，我通过简单地做一些类似于工作的东西

```
<select id="getTestFunction"
    statementType="CALLABLE"
    resultType="String">
    select TEST_PKG.test_function() from dual
</select> 
```

这是可行的，因为在 Oracle 中，函数可以在 select 语句中调用。如果您将参数类设置为保存 OUT 参数，则调用语法也可以使用：

```
<select id="getTestFunction2"
    statementType="CALLABLE"
    parameterType="com.somecom.test.model.TestBean">
    {
    #{value,mode=OUT,jdbcType=VARCHAR} = call SYS.UTL_RAW.CAST_TO_VARCHAR2(TEST_PKG.test_function())
    }
</select> 
```

TestBean.java 是：

```
public class TestBean {
    String value;

    public String getValue() { return value;}
    public void setValue(String value) { this.value = value;}
} 
```

请注意，OUT 参数是在您的参数类上设置的，而不是结果，因此您需要在 DAO 方法中对此进行处理：

```
public TestBean getTestFunction2() {
    TestBean param = new TestBean();
    getSqlSession().selectOne("getTestFunction2",param);
    return param;
} 
```

自从您发布以来已经有一段时间了，所以您可能已经弄清楚了，但是我发现这是自己在寻找答案，所以我想我应该做出回应。

# javascript - Google chrome 扩展：是否可以获得控制台输出（js 错误、console.log 等）

> ID：13013535
> 
> 赞同：11
> 
> 时间：2012-10-22T14:27:08.613
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools, google-chrome-app

我正在开发 chrome 扩展，我真正需要的是将控制台输出作为对象。

是否有可能在 chrome 扩展 popup.html/popup.js 或某处获得任何这些？

我有选项卡对象，我能以某种方式获得特定的选项卡控制台，或者 chrome 控制台中的检查器/开发工具的错误输出作为代码中的对象吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T15:42:53.173

Google Chrome 控制台（目前）不可能获得控制台的输出/内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:18:29.253

在您的 popup.js 文件中，您可以使用`console.log("stuff")`然后右键单击您的扩展并转到调试器或 inspect_element -> 控制台，以查看输出。

从您的背景文件中，您需要执行以下操作：

```
popup = chrome.extension.getViews('popup'); // this returns an array

popup[0].console.log("stuff"); 
```

然后只需执行与上述相同的步骤。

请参阅：[api get views](http://developer.chrome.com/extensions/extension.html#method-getViews)以了解有关视图之间交互的更多信息，并在此处了解：[另一种在页面之间进行交互的方式。](http://developer.chrome.com/extensions/event_pages.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-27T20:16:40.820

似乎有一种方法可以在扩展程序中获取控制台输出，尽管它需要使用特殊标志启动 Chrome 并为扩展程序提供额外的文件读取权限。

1.  这个[SO Answer](https://stackoverflow.com/questions/7627113/save-the-console-log-in-chrome-to-a-file/10068090#10068090)显示了如何`console.log()`通过启动 Chrome 来将 Chrome 的所有操作（包括字符串）保存在本地文件中`--enable-logging --v=1`
2.  然后这个[SO Answer](https://stackoverflow.com/a/28858129/59913)显示了扩展如何读取该本地文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-03T11:18:53.980

Chrome Extemsion 中有三个 JavaScript 上下文：Content Script、Backgrond Script 和 Popup。在每个代码上下文中，您都可以使用 console.log()。即 `console.log("I am here")`；

```
var tempObject = {'one': 'v_one', 'two', 'v_two'};

console.log(tempObject); 
```

注意：输出仅在您提到的代码上下文中可用`console.log('Hello');`

# regex - 如何仅使用 f:validateRegex 允许数字

> ID：13013539
> 
> 赞同：9
> 
> 时间：2012-10-22T14:27:21.777
> 
> 标签：regex, validation, jsf

我有一个只允许数字的输入。我尝试添加`<f:validateRegex>`如下：

```
<f:validateRegex pattern="[0-9]" /> 
```

但我仍然收到错误消息，

> 验证错误：值不符合模式“[0-9]”

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-22T14:29:48.177

该模式只`[0-9]`允许输入**单个**数字。也许您想要输入多个数字？在这种情况下，您应该使用`[0-9]+`. `+`修饰语即表示“一个或多个” 。

```
<f:validateRegex pattern="[0-9]+" /> 
```

如果您允许空输入，则使用`*`修饰符代替，这意味着“零或更多”。

```
<f:validateRegex pattern="[0-9]*" /> 
```

### 也可以看看：

*   [regular-expressions.info](http://www.regular-expressions.info/) - 关于正则表达式的首要网站

# javascript - Ember 关联和嵌套 URL

> ID：13013544
> 
> 赞同：5
> 
> 时间：2012-10-22T14:27:36.793
> 
> 标签：javascript, ruby-on-rails, ember.js, ember-data

我们正在使用 Ember 数据和 Rails 实现一项功能，但一直遇到困难。我们不确定这是我们的代码有问题，是 Ember 或 Ember 数据的错误，还是只是因为缺乏文档而没有得到它。

任何帮助将非常感激。

**导轨**

我们有一个待办事项列表，其中包含多个条目。在 Rails 中，它们的设置如下：

```
class ToDo < ActiveRecord::Base
   has_many :to_do_entries, dependent: :destroy
   alias_method :entries, :to_do_entries
   validates_presence_of :title
end

class ToDoEntry < ActiveRecord::Base
  attr_accessible :completed_at, :is_deleted, :priority, :title

  belongs_to :to_do
  alias_method :parent, :to_do

  validates_presence_of :to_do, :title     
end 
```

路由设置为嵌套：

```
resources :to_dos do 
   resources :to_do_entries do
   end
end 
```

所以最终的 URL 最终是**/to_do/:to_do_id/to_do_entry/:to_do_entry_id**。

我们正在使用 active_model_serializers gem 并设置了以下序列化程序：

```
class ToDoSerializer < ActiveModel::Serializer
  attributes :id,
             :title

  has_many :to_do_entries, embed: :objects
end

class ToDoEntrySerializer < ActiveModel::Serializer
  attributes :id,
             :to_do_id,
             :title,
             :priority

  has_one :to_do
end 
```

**余烬**

我们使用 Ember 数据和 REST 适配器，等效模型设置如下：

```
App.ToDo = DS.Model.extend({
  title: DS.attr('string'),
  entries: DS.hasMany('App.ToDoEntry', { embedded: true })
});

App.ToDoEntry = DS.Model.extend({
  title: DS.attr('string'),
  to_do_id: DS.attr('number'),
  priority: DS.attr('number'),
  todo: DS.belongsTo('App.ToDo')
}); 
```

**问题**

我的理解是，我们应该能够通过在控制台中使用以下命令直接从 ToDo 访问条目列表：

```
> t = App.ToDo.find(21)
> e = t.get("entries") 
```

这似乎确实有效，但只是返回一个类，我不知道如何调试它并查看它是否有效。

我有两个具体问题：

1.  我们如何使用控制台调试关联并确保它们正常工作。

2.  如果我们单独加载条目（而不是将它们嵌入到父级中），我们如何使它使用像上面那样的嵌套路由？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:43:52.407

首先，从模型中获取关联会返回 a `DS.ManyArray`，其中包含您假设的对象。
有几种调试方法，首先它响应普通的数组方法，例如`length`, `firstObject`, `lastObject`, `objectAt`。
如果这还不够有用，它还会响应`toArray`which 将其转换为 vanilla JS 数组。

不幸的是，最新的 ember-data 迭代实际上删除了嵌入的记录（我认为这可能是暂时的）。当前默认 RESTAdapter 不支持嵌套资源 URL，但您始终可以对其进行自定义以满足您的需求

然而，在将嵌套资源放入核心方面正在进行工作，请参阅 PR 的[#367](https://github.com/emberjs/data/pull/367)和[#257](https://github.com/emberjs/data/pull/257)

# jquery - 将控制权传递给新页面的“正确”方式？

> ID：13013552
> 
> 赞同：2
> 
> 时间：2012-10-22T14:27:49.380
> 
> 标签：jquery, asp.net-mvc-3

我认为这更像是一个“风格”问题。

我有一个 MVC 应用程序，它由一个主页（用户在其中输入搜索条件）和一个列表页（显示与条件匹配的项目列表）组成。

当用户在主页面请求搜索时，MainPage.cshtml 中有这段代码调用 ListPageController 来生成新页面：

```
var ParamString = 
  "Param1=" + Param1
  + "+Param2=" + Param2
  + "+Param3=" + Param3
  + "+Param4=" + Param4
  + "+Param5=" + Param5;
window.open(encodeURI("/ListPage/ShowList?" + ParamString), "_self"); 
```

下面是 ListPageController.cs 中 ShowList 的代码：

```
public ActionResult ShowList
(
  String p_Param1
, String p_Param2
, String p_Param3
, String p_Param4
, String p_Param5
)
{
    ListPageModel M = new ListPageModel;
    M.Param1 = p_Param1;
    M.Param1 = p_Param2;
    M.Param1 = p_Param3;
    M.Param1 = p_Param4;
    M.Param1 = p_Param5;
    return View("ListPage", M);
} 
```

ListPage.cshtml 然后使用指定参数通过 jQuery Ajax 调用获取数据。

使用带有参数字符串的 window.open 是“正确”的方法吗？如果有大量参数而不是五个参数，这会不会使 URL 变得相当大？

或者，例如，窗口打开调用是否应该在 ListPageController 中，例如 jQuery .post 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:54:22.487

我认为您根本不需要使用 jQuery。毕竟，当前实现的最终结果是完全从服务器重新加载页面。

最简单且在我看来最简洁的方法是让搜索字段位于带有方法“POST”和操作“/ListPage/ShowList”的老式表单内。不需要javascript！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:05:20.933

在这种情况下不需要使用 JQuery。`ShowList`您可以通过使用[HtmlHelper.Action](http://msdn.microsoft.com/en-us/library/ee703457%28v=vs.108%29.aspx)并在此处传递输入的参数来简单地调用该操作。这也应该让你的事情变得更容易。

# c# - Interlocked.Exchange 澄清

> ID：13013555
> 
> 赞同：3
> 
> 时间：2012-10-22T14:27:55.587
> 
> 标签：c#, multithreading, .net-4.0, interlocked

我有一些简单的（希望是）问题，我一直无法找到答案 -

假设我有多个线程可以访问的对象 a、b。

```
Interlocked.Exchange(ref a, b) 
```

如果 'b' 不是 volatile，这个操作会这样对待它吗？即它会从内存中获取这个变量的最新值吗？如果是这样，那是写的“原子”读吗？我知道 Interlocked.Exchange 的主要目的是您将获得以前的“a”值作为新写入的原子操作。但我的主要困惑是“b”的实际值被写入“a”。

我的第二个问题与本文中的一句话有关：

[http://igoro.com/archive/volatile-keyword-in-c-memory-model-explained/](http://igoro.com/archive/volatile-keyword-in-c-memory-model-explained/)

“一个有趣的点是，根据此处和此处记录的内存模型，C# 中的所有写入都是易失性的，并且可能也是这样实现的。C# 语言的 ECMA 规范实际上定义了一个较弱的模型，其中默认情况下写入不是易失性的。”

这是真的？如果是这样，如果不关心“a”的先前值，是否有 Interlocked.Exchange 的目的？（关于我的第一个例子）。我没有看到关于 StackOverflow 的任何其他文章或评论，因为每次写入都是易失性的。但是，我知道写入是原子的。

编辑：如果我的第一个问题的答案是“b”不被视为易失性，而我的第二个问题的答案是写入确实是易失性的，那么跟进是，如果我们不这样做，什么时候 interlocked.exhange 有用'不在乎'a'的先前值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:46:56.857

传递给的变量`Exchange`（或传递给任何方法的任何 volatile 变量）在传递时不会保留“波动性”......实际上不需要它`volatile`（在方法调用期间），因为唯一要做的`volatile`就是确保编译器不优化变量的使用（这通常意味着优化写入寄存器，因此该值只能被单个处理器“看到”）。在 x86/x64 以外的处理器上，这有时意味着保证获取或释放语义的指令。.NET 不使用寄存器来传递参数，因此 volatile 不会影响传递的参数的“波动性”。由于内存模型的可见性保证，它必须始终从内存中获取最新值

RE问题2：报价是“有点”真实的，取决于字段的声明，字段有可见性保证；但如果没有“易失性”字段访问，则可以在某些使用阶段将其优化为寄存器，从而可能隐藏其他处理器的某些写入。

`Interlocked`交换使非原子的操作看起来是原子的。交换性质类似于：

```
var x = someVariable;
someVariable = y; 
```

无论`someVariable`. `Exchange`使这个操作原子化。这也是原子的，具有非原子类型，如`double`, `long`（32 位）等。

使这个原子化的部分原因`Exchange`是使用内存栅栏——它使写入可见，并且在内存栅栏之后的指令序列中读取相同内存地址时不会重新排序。

`Exchange`如果您不关心“a”的先前值，为什么要使用？如果您不关心实际的“交换”，那么`VolatileWrite`似乎更合适。

或者，如果不需要“交换”，您可以编写线程安全代码来模拟“A = B”，如下所示：

```
Thread.MemoryBarrier();
A=B; 
```

FWIW`Interlocked`部分围绕某些处理器中的比较和交换 (CAS) 指令建模。这些指令允许您在一条指令中执行这两个操作（使其成为原子）。如果没有类似的东西`Interlocked`，编译器可能很难推断出应该使用这些 CAS 指令之一。此外，`Interlocked`在不支持这些 CAS 指令的处理器上提供原子使用（以及其他潜在的非原子指令，如 inc 和 dec——可能并非在所有处理器上都可用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:36:07.990

> 如果 'b' 不是 volatile，这个操作会这样对待它吗？

我认为您不应该在`b`共享变量时使用它。这样就消除了整个问题。但 Exchange 将始终使用 Memorybarrier，因此答案可能是肯定的。

> 如果我们不关心“a”的先前值，interlocked.exhange 什么时候有用？

for 的重载`double`非常有用，因为写入操作`double`不是原子的。32 位系统上的 Int64 相同。

但是对于`Exchange()`原子类型的重载，用例不太清楚。我认为大多数算法都会支持`CompareExcange()`.

所以认为它是原子的 Write()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:37:58.187

> 如果 'b' 不是 volatile，这个操作会这样对待它吗？

是的，因为根据[这个来源](http://www.albahari.com/threading/part4.aspx)，`Interlocked`类的所有方法都会生成隐式内存栅栏。

# c - 包含 scanf 和 printf 的复杂声明

> ID：13013557
> 
> 赞同：-2
> 
> 时间：2012-10-22T14:27:58.563
> 
> 标签：c, for-loop

```
int i;
main()
{
    int t;
    for ( t=4;scanf("%d",&i)-t;printf("%d\n",i))
        printf("%d--",t--);
} 
```

如果输入为 0、1、2、3，则输出为：

```
4--0 
3--1
2--2 
```

请解释程序的输出。我无法弄清楚为什么输出是这样的。循环在这个程序中是如何工作的？为什么不先打印for循环中的printf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:31:12.783

将`for`循环转换为等效`while`循环。表单的`for`循环

```
for (initialize; condition; increment)
{
    body;
} 
```

可以等效地写为：

```
initialize;
while (condition)
{
    body;
    increment;
} 
```

注意`increment`语句是如何在循环底部结束的。它在循环体*之后执行，就在开始循环的下一次迭代之前。*

所以你的循环变成了这样：

```
int i;
main()
{
    int t;
    t = 4;
    while (scanf("%d",&i) - t)
    {
        printf("%d--", t--);
        printf("%d\n", i));
    }
} 
```

这有帮助吗？

最棘手的部分是循环条件。循环将在其条件变为 0 时退出。返回读入的项目数，这里每次读`scanf`入的项目数为 1 。`%d`如果`scanf`每次都返回 1，则循环在`t`命中 1 时退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:46:54.923

`for`执行完循环体后调用第三步操作符。

说到你的例子，这...

```
for ( t=4;              // initialization statement
      scanf("%d",&i)-t; // check statement; if `false`, the loop is finished
      printf("%d\n",i)) // step statement, usually advances an iteration one step

  printf("%d--",t--); 
```

...像这样走过：

1.  FOR 初始化：将 4 赋值给`t`.
2.  FOR检查：做`scanf`，将结果（0）赋值给`i`，检查1（的结果`scanf`）是否等于`t`；现在不是。
3.  FOR 循环：`printf`为 postdecremented做`t`（它打印`4--`）
4.  FOR 步骤：在子句`printf`中提到，打印`for``0\n`
5.  FOR check: do `scanf`，将结果 (1) 分配给`i`，检查 1 是否等于`t`（现在是 3，因为它是递减的）。
6.  FOR 循环：`printf`为 postdecremented做`t`（它打印`3--`）
7.  FOR 步骤：在子句`printf`中提到，打印`for``1\n`
8.  FOR check: do `scanf`，将结果 (2) 分配给`i`，检查 1 是否等于`t`（现在是 2，因为它是递减的）。
9.  FOR 循环：`printf`为 postdecremented做`t`（它打印`2--`）。
10.  FOR 步骤：在子句`printf`中提到，打印`for``2\n`
11.  FOR check: do `scanf`，将结果（3）赋值给`i`，检查 1 是否等于`t`（现在是 1）。
12.  FOR 检查失败 => 循环结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:27:02.027

'scanf' 返回分配的项目数。对于您的输入，scanf 为每个输入返回 1（因为您想一次读取一个 '%d' 的项目）。变量 t 从 4 开始。现在，每次迭代的“for”条件变为：1-4、1-3、1-2 和 1-1 (=0)，因此在“1-1”的情况下没有进入循环体（因为条件结果为0，表示为假）并终止循环。希望它能解释你的程序的结果。

# objective-c - 使用 [nsarray arrayWithObjects:]

> ID：13013561
> 
> 赞同：0
> 
> 时间：2012-10-22T14:28:03.387
> 
> 标签：objective-c, nsarray

我用这个来返回

```
 return [NSArray arrayWithObjects:message, previousNum, nil]; 
```

当它输出时，它总是输出像

```
 (
     Hello 22
 ) 
```

我想知道如何从输出中删除圆括号

如果有人可以提供帮助，我将不胜感激

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:48:06.007

我假设您的输出是使用`NSLog(@"%@", theArray)`或类似生成的。在这种情况下，`NSLog()`调用 的`description`方法`NSArray`，该方法返回一个表示数组内容的字符串，格式为*属性列表*。

所以括号不是数组的一部分，而是描述输出的一部分。

如果你想要一个不同的输出，你必须自己生成它，例如

```
 NSString *str = [theArray componentsJoinedByString:@"\n"]; 
```

创建一个所有数组元素由换行符分隔的字符串。

**添加：**属性列表是 Cocoa 和 Core Foundation 使用的结构化数据表示，作为一种方便的方式来存储、组织和访问标准类型的数据。的`description`方法`NSArray`将数组括在括号中，所有元素用逗号（和换行符）分隔。[旧式 ASCII 属性列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/OldStylePlists/OldStylePLists.html#//apple_ref/doc/uid/20001012-BBCBDBJE)中描述了这种格式。

有关属性列表的更多信息，请参阅[属性列表编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048-CJBGDEGD)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:51:35.300

我不能确定，但​​看起来您需要帮助将 NSArray 转换为 NSString。

`NSLog(@"%@", array)`这种从 NSArray 到 NSString 的转换是在使用（或其他此类格式化方法）输出 NSArray 时隐式完成的。`NSLog`调用`[array description]`转换`array`为 NSString。

您可以创建自己的方法来将 NSArray 转换为 NSString，或者您可以使用类似`-componentsJoinedByString:`. 在变量中使用您的数组`array`：

```
NSLog(@"%@", [array componentsJoinedByString:@", "]; 
```

将打印`Hello, 22`。

```
NSLog(@"%@", [array componentsJoinedByString:@" "]; 
```

将打印`Hello 22`。

```
NSLog(@"%@", [array componentsJoinedByString:@""]; 
```

将打印`Hello22`。

# javascript - 当检索到包含转义 (!) & 符号的 XML 时，jQuery `ajax` 调用会引发错误

> ID：13013563
> 
> 赞同：0
> 
> 时间：2012-10-22T14:28:06.993
> 
> 标签：javascript, xml, ajax

客户端脚本获取文本输入中的文本，将其“包装”在 XML 块中，然后将其发送到将信息存储在 MySQL 数据库中的服务器。

作为包装输入值之前的第一步，我像这样转义“&”字符：

```
var copyright = copyright.replace(/&/g,"&amp;"); 
```

生成的 XML 数据块使用 jquery 的方法发送到服务器`ajax`：

```
var copyright = copyright.replace(/&/g,"&amp;"),
    xml = "<request><session>"+session+"</session><space>"+space_id+"</space><view>"+view_id+"</view><copyright>"+copyright+"</copyright></request>",
    url = "hidden URL";

    $.ajax({ 
        type: "POST", 
        url: url,
        contentType: "text/xml; charset=UTF-8", 
        dataType: "xml;charset=UTF-8",
        data: xml
    }); 
```

稍后在此操作之后，需要检索先前保存在数据库中的内容并在网页中显示：

```
$.ajax({ 
    type: "POST", 
    url: url,
    dataType: 'xml',
    data: xmlString, 
    success: function(xml) { 
          var XML = $(xml);
            // Process the data retrieved
    },
    error: function(jqXHR, textStatus, errorThrown) {
        var XML = $(jqXHR.responseText);
            console.log("error: "+textStatus+"\n"+errorThrown);
    }
}); 
```

如果在输入字段中键入 & 符号然后保存，当尝试加载显示相同先前保存的内容的页面时，ajax 调用中断并运行`error`事件处理程序，并出现以下错误：

```
error: parsererror
Error: Invalid XML: <?xml version="1.0" encoding="UTF-8"?><response><target>    
<target_id>2095466</target_id>    
<plot>20029/13</plot>    
<builder>Lemminkäinen</builder>    
<housing_form>vm</housing_form>    
<block_name></block_name>    
<finnish_year>2013</finnish_year>    
<target_name>As Oy Helsingin Saukonranta</target_name>    
<target_address>Saukonpaadenranta 8</target_address>    
<office_space></office_space>    
<purpose></purpose>    
<reservations></reservations>    
<contacts></contacts>    
<infoflag>2</infoflag>    
<views>    
<view>    
<view_id>2095468</view_id>    
<copyright>B&M</copyright>    
</view>    
</views>    
</target>    
<status>OK</status><errormsg></errormsg></response> 
```

我做错了什么？我是在错误地转义字符，还是其他原因？

这个问题似乎是重复的，但对我来说似乎不是这样，因为与号字符在存储之前已经被转义。我什至尝试在转义字符串中添加额外的 (1, then two) `amp;`，但结果完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:02:31.133

事实证明，问题实际上来自服务器（我无权访问），处理请求的脚本没有正确转义 & 字符，即使它们在客户端。Bellow 是一个 JavaScript 函数，它可以转义与 XML 一起使用的所有 (?) 特殊字符，以防万一有人需要它：

```
function escapeXML(string){

    var str = string;
    str = str.replace(/\&/g,"&amp;");
    str = str.replace(/\>/g,"&gt;");
    str = str.replace(/\</g,"&lt;");
    str = str.replace(/\"/g,"&quot;");
    str = str.replace(/\'/g,"&apos;");

    return str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:36:38.373

问题是节点中的`ä`字符，正如*Shahid*所指出的那样。当文本被 UTF-8 解码时，它将成为两个字符的 UTF-8 编码的一部分。所以 UTF-8 解码器会尝试解码，这不是一个有效的字符序列。正确的 UTF-8 编码字符是，或二进制。因此，完整的 UTF-8 编码文本应该是.`Lemminkäinen``builder`*`Lemminkäinen``ä``äi``ä``Ã¤``0xC3, 0xA4``LemminkÃ¤inen`*

 *当报告的 XML 数据保存在 XML 文件中，然后使用 Web 浏览器打开时，它将在所有主要 Web 浏览器上失败：Chrome（*“编码错误”*）、Firefox（*“格式不正确”*）、Safari（*“编码错误”）错误”*），MSIE（*“在文本内容中发现无效字符。”*）和 Opera（*“编码中的非法字节序列”*）。

由于 XML 数据来自服务器，因此发布*构建器*数据的脚本很可能没有指定 UTF-8 字符集（没有迹象表明提供的代码就是执行此操作的代码）。它可能是由现在已经修复的旧脚本引起的，但损坏已经造成。即：不正确的数据格式被添加到数据库中。在服务器维护期间，手动输入数据库也是一个可能的原因。*

# c# - 动态对象未显示其方法

> ID：13013564
> 
> 赞同：5
> 
> 时间：2012-10-22T14:28:09.243
> 
> 标签：c#, winforms, dynamic

我正在尝试转换 ffg:,

**这个作品**

```
IResultSEt rs =    db.SELECT.COLUMNS(db.GetTable(data.ToString()).ColumnNames).FROM(data.ToString()).Execute(); 
```

进入这个，这是行不通的，

```
dynamic rs = db.SELECT.COLUMNS(db.GetTable(data.ToString()).ColumnNames);
           rs = rs.FROM(data.ToString());
           rs = rs.Execute(); 
```

它给了我一个错误，它找不到“COLUMNS”。

在调试时，似乎***rs***正在获取 SELECT 类中的所有**返回方法**和**私有变量**，它只是没有在运行时获取 SELECT 类中的 COLUMNS 之类的方法。这很奇怪，我以为它也能拿起方法，我做错了什么？？？

**更新**

**db**中 **db**的定义.SELECT.COLUMNS(db.GetTable(data.ToString()).ColumnNames); 是

```
 public class Database
{
    private Dictionary<string, ITable> _tables = new Dictionary<string, ITable>();

    public ITable AddTable(string tableName, string[]columnNames, Type[] columnTypes)
    {
        ITable tbl = new Table(tableName);
        tbl.SetColumns(columnNames, columnTypes);
        _tables.Add(tableName.ToUpper(), tbl);

        return tbl;
    }

    public ITable GetTable(string tableName)
    {
        return _tables[tableName.ToUpper()];
    }

    public ISELECT SELECT
    {
        get
        {
            ISELECT select = new SELECT(this);
            return select;
        }
    }

    public Dictionary<string,ITable> getTables()
    {
        return _tables;
    }
} 
```

db中**SELECT**的定义。**SELECT** .COLUMNS(db.GetTable(data.ToString()).ColumnNames); 这是我的**SELECT**类的接口；

```
public interface ISELECT
{
    ISELECT TOP(Int32 N);
    ISELECT DISTINCT { get; }
    ISELECTCOLUMN COLUMN(string columnName);
    ISELECTTABLECOLUMN COLUMN(string tableName, string columnName);
    ISELECTCOLUMNS COLUMNS(params string[] columnNames);
    ISELECTSUMCOLUMN SUM(string columnName);
    ISELECTSUMCOLUMN SUM(string tableName, string columnName);
} 
```

这就是问题所在，动态对象没有拾取接口中的方法，它拾取所有私有变量，它拾取的唯一方法是**"DISTINCT"**。

下面是 SELECT 类的部分定义，里面有很多代码，我就放一点；

```
internal class SELECT : ISELECT, ISELECTInternals
{
    private Database _dw;
    private bool _DISTINCT;
    private Int32 _TOPN = -1;
    private List<Int32> _JOINNumbers = new List<Int32>();
    private string[] _selectJOINLHScolumnTableNames;
    private string[] _selectJOINLHScolumnNames;
    private string[] _selectJOINRHScolumnTableNames;
    private string[] _selectJOINRHScolumnNames;
    private string[] _selectcolumnTableNames;
    private string[] _selectcolumnNames;
    private string[] _selectcolumnAliases;
    private object[] _selectcolumnLiterals;
    private string[] _selectcolumnStringTemplates;
    private AggregateTypes[] _selectcolumnAggregates;
    private string[] _queryTableNames;
    private string _SUMcolumnName;
    private string _FROMTableName;
    private List<string> _INNERJOINTableNames = new List<string>();
    private List<string> _JOINTableNames = new List<string>();
    private List<JoinTypes> _TableJoinTypes = new List<JoinTypes>();
    private bool _takeANDFlag = true;
    private List<string> _filterColumnTableNames = new List<string>();
    private List<string> _filterColumnNames = new List<string>();
    private List<object[]> _filterColumnValues = new List<object[]>();
    private List<string> _GROUPBYcolumnTableNames = new List<string>();
    private List<string> _GROUPBYcolumnNames = new List<string>(); 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:12:48.860

其他的东西必须改变。更改捕获特定表达式的位置或是否捕获不会导致它在存储值/引用之前引发异常。

也许使用语句或其他类型发生了变化而你没有意识到成功之间的行

```
IResultSEt rs =    db.SELECT.COLUMNS(db.GetTable(data.ToString()).ColumnNames) 
```

和线路的故障

```
dynamic rs = db.SELECT.COLUMNS(db.GetTable(data.ToString()).ColumnNames); 
```

但它在 db 上定位方法失败意味着 db 的类型已更改或将导入扩展方法的 usings 已更改。

让我试着重申一下。在整个右侧完成评估之前，存储的左侧对右侧的评估方式没有影响。（不考虑左边的说法`Expression<Func<>>`vs. `Func<>`）

我认为自从您将问题中未考虑的问题或问题中发布的源代码放在一起以来，发生了更多变化。

# c# - 尝试 Convert.ToInt32(value) 时指定的转换无效

> ID：13013565
> 
> 赞同：2
> 
> 时间：2012-10-22T14:28:19.467
> 
> 标签：c#, sql-server, tsql, stored-procedures, exception-handling

我正在尝试运行一个存储过程，但由于某种原因它一直在告诉我`"Specified cast is not valid"`。“ `hidSelectedExpenseIDs`”是一个隐藏字段，填充了一个 id 的 javascript 数组。

示例：`"hidSelectedExpenseIDs.Value"`看起来像“123,124,125,126”。因此，为什么我`.Split(',')`在那里。

这是我的代码：

```
public void hasExhistingExpenseInvoice()
{
    string[] Expenses = hidSelectedExpenseIDs.Value.Split(',');

    //check if there is an existing invoice. Then report back to the user so the
    //user knows if he/she has to check overwrite option.
    bool invoiceExists = false;

    foreach (var expense in Expenses)
    {
        var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
        var command = new SqlCommand("p_CaseFiles_Expenses_InvoiceExhists", connection);
        command.Parameters.Add(new SqlParameter("@ExpenseID", SqlDbType.Int));
        command.Parameters["@ExpenseID"].Value = Convert.ToInt32(expense);
        command.CommandType = CommandType.StoredProcedure;
        try
        {
            connection.Open();
            invoiceExists = (bool)command.ExecuteScalar();
            if (invoiceExists)
            {
                //previous invoice exhists
                Warning1.Visible = true;
                Warning1.Text = "There is an exhisting Invoice.";
            }
        }
        catch (SqlException sql)
        {
            lblStatus.Text = "Couldn't connect to the Database - Error";
            lblStatus.ForeColor = System.Drawing.Color.Red;
        }
        catch (Exception ex)//catches exception here
        {
            lblStatus.Text = "An error occured";
            lblStatus.ForeColor = System.Drawing.Color.Red;
        }
        finally
        {
            if (connection.State == ConnectionState.Open)
                connection.Close();
        }
    }
} 
```

这是我的存储过程：

```
ALTER PROCEDURE dbo.[InvoiceExhists]
@ExpenseID int
AS
BEGIN
    SELECT InvNumber FROM dbo.Expenses from ExpID = @ExpenseID
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:33:47.703

逻辑有问题。

您的查询返回一个数字，并且您尝试将其直接转换为布尔值，这在 C# 中无法完成。

某些语言会将任何非零解释为 true，但 C# 并非如此，它会引发异常。

您将需要比较返回的值。

在这种情况下，您应该只检查是否有值，因为如果发票不存在，将返回 NULL。

这看起来像这样：

```
invoiceExists = command.ExecuteScalar() != null ; 
```

此外，我建议阅读此[线程](https://stackoverflow.com/questions/6932199/executescalar-always-returns-null-when-calling-a-scalar-valued-function)并考虑使用 UDF 而不是标量存储过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:46:46.233

更改您的存储过程。这符合您的要求

```
ALTER PROCEDURE [dbo].[InvoiceExhists]
@ExpenseID int
AS
BEGIN
if exists(select * Expenses where ExpID = @ExpenseID)
select 1
else
select 0
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:33:42.357

该异常可能是由于`invoiceExists = (bool)command.ExecuteScalar();`考虑到它是在 try 语句中发生的唯一转换。您需要查看的返回结果`ExecuteScalar()`来解决您的问题。

# google-analytics - 如何使用 Javascript 查询 Google Analytics

> ID：13013570
> 
> 赞同：0
> 
> 时间：2012-10-22T14:28:21.963
> 
> 标签：google-analytics

我们希望远程查询 Google Analytics，以检索（并显示）网站上（在特定时期内）最受欢迎的页面列表。我看过的示例，用于使用 Javascript 查询分析，似乎需要用户/个人登录。这个对吗？有没有办法跳过这一步，在无人看管的情况下查询 Analtyics？

谢谢，

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:06:14.003

不会。Google Analytics 中的数据具有潜在的战略意义，而且该工具在任何时候都不会提供非登录访问。

为了做你想做的事，最好的方法可能是在服务器端使用你的凭据查询数据并将数据存储在数据库中。每晚左右再运行一次。

然后您只需查询数据库并生成要在前端显示的计数。

您不想在 javascript 上执行此操作，因为您会将您的凭据暴露给访问您网站的任何人以查询您的所有 Google Analytics 数据。

# ubuntu - RabbitMQ 没有 PID

> ID：13013573
> 
> 赞同：1
> 
> 时间：2012-10-22T14:28:28.437
> 
> 标签：ubuntu, rabbitmq

我正在运行 Ubuntu 10.04，并且刚刚使用 apt 安装了 RabbitMQ。

当我运行 init 脚本（以 root 身份）时，我看到：

```
Starting rabbitmq-server: FAILED - check /var/log/rabbitmq/startup_log, _err
rabbitmq-server. 
```

但是，如果我检查正在运行的进程，rabbit 就是其中之一，并且 startup_log 看起来不错。但是在startup_err中：

```
Error: cannot_get_pid 
```

自然，在初始化脚本上执行“状态”和“停止”命令也不起作用。顺便说一句，所有这些都是作为 root 的。并且正在运行的进程以 rabbitmq 用户身份运行。

所以，不知何故，PID 没有被存储在任何地方。我对此相当陌生，所以我很难说 - PID 应该存储在哪里，为什么不存储在那里？初始化脚本并没有向我透露很多信息！

任何帮助都会很棒 - 我不想每次我想关掉兔子时都执行 5 个 kill 命令 :) 谢谢！！担

PS这是startup_log中的日志。在我看来没问题...

```
node          : rabbit@www
app descriptor: /usr/lib/rabbitmq/lib/rabbitmq_server-1.7.2/sbin/../ebin/rabbit.app
home dir      : /var/lib/rabbitmq
cookie hash   : KZGa065/Ct5qV2zMWGnEhA==
log           : /var/log/rabbitmq/rabbit.log
sasl log      : /var/log/rabbitmq/rabbit-sasl.log
database dir  : /var/lib/rabbitmq/mnesia/rabbit

starting internal event notification system                           ...done
starting logging server                                               ...done
starting database                                                     ...done
-- kernel ready
starting alarm handler                                                ...done
starting queue supervisor                                             ...done
starting node monitor                                                 ...done
starting cluster router                                               ...done
-- core initialized
starting empty DB check                                               ...done
starting codec correctness check                                      ...done
starting exchange recovery                                            ...done
starting queue recovery                                               ...done
starting persister                                                    ...done
starting guid generator                                               ...done
-- message delivery logic ready
starting error log relay                                              ...done
starting networking                                                   ...done
-- network listeners available

broker running
dan@lennon:/etc 
```

# ios - 在 IOS 运行时将字体添加到 textarea 或 webview？

> ID：13013580
> 
> 赞同：0
> 
> 时间：2012-10-22T14:28:50.387
> 
> 标签：ios, uiwebview, fonts

我想在运行时将自定义字体添加到 IOS 应用程序，并在可编辑的文本区域或 contentEditable="on" 的 UIWebView 中使用它。

我知道您如何在编译时捆绑自定义字体，但我需要在运行时执行此操作。

这些替代方案是否可能：

*   通过 Internet 下载字体并存储在应用程序文档文件夹中？
*   使用 http 地址引用外部字体？
*   通过 iTunes 传输字体？

iOS6 中的标签和富文本编辑有很多改进，我希望自定义字体支持也得到改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:18:43.453

回答我自己的问题。

我还没有找到一种方法来使用 iOS 中的本机 textarea 而不在 plist 文件中注册字体。

然而，UIWebView 确实支持 @font-face 声明和 .ttf 文件。诀窍是创建一个指向存储在 Documents 文件夹中的字体的 NSURL，然后使用 [webView stringByEvaluatingJavaScriptFromString] 告诉 Web 视图使用它。

在我的第一次测试中，我做了这样的事情：

我的视图控制器：

```
- (NSString *)documentsDirectory {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    return [paths objectAtIndex:0];
}

- (void) setFont {
    NSString *urlPath = [[self documentsDirectory]
                         stringByAppendingPathComponent:@"myfont.ttf"];
    NSURL *url = [NSURL fileURLWithPath:urlPath];
    [self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"setFont('%@');", url]];
} 
```

在我的网页中：

```
<style>       
    body {
        font-family: customfont;
        font-size: 40px;
    }        
</style>
<script>
    function setFont(font) {
        var id = 'customfont',
            head = document.getElementsByTagName("head")[0],
        style;

        style = document.getElementById(id);
        if(style) {
            head.removeChild(style);
        }

        style = document.createElement("style");
        style.setAttribute("id", id);
        style.textContent = "@font-face { font-family: '" + id + "'; src: url('" + font + "'); font-weight: normal; font-style: normal; }"
        head.appendChild(style);
    }
</script> 
```

# java - Android中的内部布局类

> ID：13013589
> 
> 赞同：4
> 
> 时间：2012-10-22T14:29:06.133
> 
> 标签：java, android

可能这是一个非常愚蠢的问题，但我创建了这样的结构，但我确实遇到了性能问题。

```
public class OuterClass extends LinearLayout {

private LinearLayout viewPort;

public OuterClass(Context context) {
    super(context);     
    initComponents(context);
    addInnerClass();
}

private void initComponents(Context context){

    LayoutInflater inflater = (LayoutInflater) getContext().
        getSystemService(Context.LAYOUT_INFLATER_SERVICE);      
    inflater.inflate(R.layout.view_port, this);     
    viewPort = (LinearLayout) findViewById(R.id.view_port);     
}

private void addInnerClass(){

    for ( int i = 0; i < k; i++ ){
        InnerClass functio = this.new InnerClass();
        viewPort.addView(functio);
    }

}
    private class InnerClass extends RelativeLayout{

    private LineraLayout newLines; 

    public InnerClass() {
        super(OuterClass.this.context);     
        initComponents(OuterClass.this.context);
        addNLines();
    }

    private void initComponents(Context context){

        LayoutInflater inflater = (LayoutInflater) getContext().
            getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        inflater.inflate(R.layout.job_function_container, this);

        newLines = (LinearLayout) findViewById(R.id.newLines);          

    }

    private void addInnerOfInner(View view){
        newLines.addView(view);
    }

    private void addNLines(){

        for ( int i = 0; i < k1; i++ ){
            InnerOfInnerClass line = this.new InnerOfInnerClass();
            addInnerOfInner(line);
        }

    }

        public class InnerOfInnerClass extends RelativeLayout{

            private InnerOfInnerClass(){
                super(OuterClass.this.context);             
                initComponents(OuterClass.this.context);
            }

            private void initComponents(Context context){

                LayoutInflater inflater = (LayoutInflater) getContext().
                    getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                inflater.inflate(R.layout.new_line, this);

                // Setting some fields.
            }               

        }   

    } 
```

}

更具体地说，如果我尝试在每个 InnerClass 中创建 5 个 InnerClass 对象和 5 个 InnerOfInner Class 对象，那真的很慢。如果有人能解释一下原因，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:43:33.420

似乎没有任何东西可以从您的代码中脱颖而出，成为一个巨大的危险信号。至于为什么它在创建部分真的很慢可能有多种原因。需要考虑的事项：

1.  OuterClass 如何从活动中实例化？它是只被调用一次还是你创建了几个实例。你拥有的越多，它就会越慢。

2.  R.layout.new_line、R.layout.job_function_container、R.layout.view_port 上有多少其他小部件？只有一个小部件与每个小部件 50 个可能会导致一些明显的延迟。

3.  你用什么设备测试？在旧 Droid 上运行会比在 Nexus 7 上测试要慢得多。如果您使用模拟器......好吧，总是希望一切运行缓慢。

4.  最后（可能也是最相关的），我认为最大的放缓是嵌套布局的复杂性或深度。正如 Ancantus 所提到的，尽量避免使用较深的布局层。走得太深，奇怪的事情可能会开始发生。主要是由于这种层次结构消耗的内存量。

如果您需要添加视图的动态方法，我建议您查看 ListView、GridView 甚至是 GridLayout（如果您的目标平台允许）。在我的脑海中，我想不出你为什么需要如此复杂的设计。尽管有特殊情况需要，但通常总有一种更简单、更正确的方法。

以下是一些有关布局优化的有用链接，它们可能对您有帮助，也可能对您没有帮助：

*   [布局技巧 1](http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html)
*   [布局技巧 2](http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html)
*   [布局技巧 3](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)
*   [布局技巧 4](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-with.html)

# objective-c - Objective-c 差异

> ID：13013596
> 
> 赞同：0
> 
> 时间：2012-10-22T14:29:23.857
> 
> 标签：objective-c, ios, syntax

在 .h 或 .m 文件中声明 @property 有什么区别

```
@property (nonatomic, readwrite, assign) BOOL notificationDidLaunch; 
```

它与变量的范围有关吗？

同样在 .h 文件中，像这样用括号声明字符串有什么区别

```
@interface AppDelegate : NSObject < UIApplicationDelegate > {
    NSString *hat;
} 
```

并像下面那样在他们之外做

```
@property (nonatomic, strong) NSString *hat; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:33:30.107

**总结说明**

`@property`.m 中的A对类是私有的，而 .h 中的 A 是公共的。

声明在括号内或不带括号之间的区别在于变量的含义。

在括号内，您声明了一个**实例变量**（或 ivar），该变量**只能**由您的类的实例访问。属性（在 .h 中声明）意味着**任何**类都可以访问。

**特性**

A`@property`本质上定义了可以覆盖的集合和获取。当你这样做时：

```
AppDelegate myAppDelegate;
myAppDelegate.hat = @"A hat": 
```

你本质上是在做：

```
[myAppDelegate setHat:@"A hat"] 
```

当你这样做时

```
myAppDelegate.hat //so you can get the property's value 
```

你本质上是在做

```
[myAppDelegate hat] 
```

**覆盖集和获取**

当您这样做时，`@synthesize hat = _hat`您实际上是在创建一个 get 和一个`_hat`关联了实例变量的 set。这个实例变量只能在你的gets/sets中访问，甚至在你的类中你应该使用你的sets/gets（使用`self.property`）

您可以覆盖集合并通过`@synthesize`覆盖以下方法创建：

```
- (void) setHat:(NSString*) aHat
- (NSString *) hat 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:43:01.867

正如 Tiago 所说，将 @property 声明放在 .m（实现）文件的类扩展中是一种使属性私有的方法，因此只有类本身才能访问它。当在 .h（公共接口文件）中声明时，所有导入该 .h 文件的代码都可以看到它。请记住，@properties 实际上只是为了方便声明和合成访问器方法，并且与 Objective-C 中的所有方法一样，它们从来都不是*真正*的私有方法。您得到的最好的结果是编译器警告，如果您尝试在另一个类中使用非公共方法，则没有公共接口声明有问题的方法。

对于您问题的第二部分，这声明了一个名为 myString 的实例变量（“ivar”）：

```
@interface MyClass : NSObject
{
    NSString *myString;
} 
```

虽然这声明了一个名为 myString 的属性：

```
@property NSString *myString; 
```

实例变量和 @property 之间的区别比仅仅说 ivar 只能由您的类的实例访问更重要。声明 ivar 会将变量添加到内存中的类结构中。相反，@properties 在类上声明/定义*方法*。默认情况下，这些方法设置/获取关联的且名称相似的 ivar 的值，但这不是必需的，并且具有不直接访问 ivar 的 @property 的方法是完全可以接受的并且很常见。比如说一个类，它的 firstName 和 lastName 属性由`_firstName`and支持`_lastName`ivars 以及第三个 fullName 属性，它简单地将 firstName 和 lastName getter 方法返回的值连接在一起（和/或在其 set 方法中拆分两个部分的名称）。

# html - Symfony2：取决于用户的菜单

> ID：13013605
> 
> 赞同：0
> 
> 时间：2012-10-22T14:29:39.573
> 
> 标签：html, session, symfony, twig

当用户登录并在网站导航期间，导航栏包含他的菜单（每个用户都有自己的菜单）。为此，我以这种方式进行：首先我在数据库的表中放入一个包含属于每个用户的 html 代码的字段，然后当用户连接时，将该字段放入会话中并显示在名为 admin.html 的树枝文件中。像这样的树枝：

```
{{ app.session.get('menu')}} 
```

并且用户访问的每个页面都自动继承自该页面 Admin。好吧，我的解决方案似乎不起作用，有人告诉我我必须考虑这样的过滤器，但我并没有真正了解这个解决方案。我知道我的逻辑有问题，有什么提示吗？想法？提前致谢。

菜单包含的示例：

```
<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Menu1</a>
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="{{ path('graphe'|url_encode())}}">Graphe</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" >Administration <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="gest_utilisateur">Gestion des utilisateurs</a></li>
                    <li><a href="#">Gestion des Menus</a></li>
                    <li><a href="gest_domaine">Gestion des Domaines</a></li>
                    <li><a href="gest_equipe">Gestion des Equipes</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:39:51.587

我会这样做：

1.  将菜单字段添加到用户实体
2.  在模板中，我将通过以下方式获得：

    ```
    {{ app.user.getMenu() }} 
    ```

    因为用户也存储在会话中。

# ruby-on-rails - 如何编写一个检查 div 是否为空的水豚匹配器？

> ID：13013607
> 
> 赞同：3
> 
> 时间：2012-10-22T14:29:46.660
> 
> 标签：ruby-on-rails, capybara

我正在查看水豚匹配器文档：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)

我似乎无法找到检查 a`div`是否为空白的方法。即我想验证类似的东西的存在

```
<div class="test"></div> 
```

我想过`assert_no_selector`，但我不认为`div`显示中的文本节点。`has_no_content`似乎没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:37:20.900

您可以访问 div 内容`find("#test").text`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T03:11:54.097

以下将与 a 一起使用`test` **`class`**：

```
assert_selector('div.test', text: '') 
```

相反，如果您正在寻找一个`test` **`id`**，那么使用这个：

```
assert_selector('div#test', text: '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T18:04:41.127

像 assert_selector('div.test', text: /\A\Z/) 这样的东西应该做你想做的事。将正则表达式传递给 :text 选项允许您对元素的内容进行全文匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T14:51:31.397

我使用 CSS`:empty`选择器：

```
expect(page).to have_selector('#my_element:empty') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-11T18:35:00.830

```
expect(page).to have_selector(:xpath, "//div[contains(@class, 'test') and normalize-space(string(.)) = '']") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-28T10:31:51.007

还

```
expect(page).to have_css('.test', exact_text: '') 
```

会为你工作

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-22T14:36:37.477

你可以试试这个：

```
assert_selector('div', class: 'test', text: '') 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-11-05T03:36:50.543

还：

```
page.find('.test').has_content?('') 
```

或者

```
expect(page.find('.test')).to have_content('') 
```

# jquery - 元素 100% 的窗口大小

> ID：13013612
> 
> 赞同：1
> 
> 时间：2012-10-22T14:29:57.027
> 
> 标签：jquery, wordpress

我有一系列带有 .box 类的元素，我希望它们中的每一个都与窗口的高度相同。

我在静态 html 文档上使用了这个

```
 !function($, undefined) {
            var $win = $(window), 
                $body = $('html,body'), 
                $box = $('.box'), 
                $head = $('#head');

            function refresh() {
                var h = $win.height() - $head.height();

                if(Modernizr.touch) return;

                $box.css('min-height', h);
                $box.each(function() {
                    var $this = $(this);

                    $this.find('section').css('height', $this.outerHeight())
                })
            }

            $win.resize(function(e) {
                refresh()
            }).resize();

        }(jQuery) 
```

然而，我试图让这个在 wordpress 中工作并且它不起作用，我无法为我的生活找出原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:50:00.667

尝试将您的 $ 更改为 jQuery。根据我的经验，Wordpress 不喜欢 $ 符号。IE

```
jQuery('#head'); 
```

# android - 我的位图未显示所有像素

> ID：13013614
> 
> 赞同：1
> 
> 时间：2012-10-22T14:30:08.500
> 
> 标签：android, bitmap, android-canvas, android-imageview

我的问题是，我无法查看所有图像或某些像素。

我有一个图像视图和位图。并且使用画布库，我绘制了图像视图限制。但结果是错误的。为什么不对图像的左下边界进行采样呢？如果我增加画笔大小，如果是的话。

图片：http: [//i.stack.imgur.com/R3Byw.jpg](http://i.stack.imgur.com/R3Byw.jpg)

我将只显示我的应用程序这部分的代码

```
//Init imagebitmap
largeBitmap = Bitmap.createBitmap(200,200, Bitmap.Config.ARGB_8888);

//Init canvas
canvas = new Canvas(largeBitmap);
canvas.drawColor(0xffffffff);

//Set largeBitmap on Image
as.setImageBitmap(largeBitmap);

//Init Pincel
pincel1 = new Paint();
pincel1.setARGB(255, 0, 0, 0);

//Draw Limits
int ancho = canvas.getWidth();
int alto = canvas.getHeight();

canvas.drawLine(0, 0, ancho, 0, pincel1); // Superior
canvas.drawLine(0, alto, ancho, alto, pincel1); // Inferior
canvas.drawLine(0, 0, 0, alto, pincel1); // Izq
canvas.drawLine(ancho, 0, ancho, alto, pincel1); // Drch 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/sv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center_horizontal" >

    <HorizontalScrollView
        android:id="@+id/hsv"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical|center_horizontal" >

        <LinearLayout
            android:id="@+id/ll"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:contentDescription="@string/app_name"
                android:scaleType="center"
                tools:context=".SIDetailFragment" />
        </LinearLayout>
    </HorizontalScrollView>

</ScrollView> 
```

我设置滚动视图仅用于在简单的表单上使用滚动视图测试位图图像

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:45:15.250

那是因为你“走得太远了”。与（几乎）编程中的所有内容一样，画布索引是基于 0 的。所以你需要使用`ancho -1`and `alto - 1`。

```
 canvas.drawLine(0, 0, ancho - 1, 0, pincel1); // Superior 
```

# css - CSS Helvetica Neue 不工作

> ID：13013616
> 
> 赞同：0
> 
> 时间：2012-10-22T14:30:18.560
> 
> 标签：css, font-face

我正在尝试使用 Helvetica Neue 作为我网站的字体，所以我像这样应用于身体

```
body {
    background-image: url("http://inauguralseason.com/wp-content/themes/twentyeleven/images/background.jpg");
    font-family: "Helvetica Neue" !important;
} 
```

但我的字体没有出现，它在某一时刻工作，但现在它在 Firefox、Chrome、Safari 或 IE 中不工作

你可以在这里看到我在说什么

[http://inauguralseason.com/](http://inauguralseason.com/)

任何帮助，将不胜感激，

谢谢，J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:42:43.850

您的@font-face 似乎将字体系列命名为“helvetica_neueregular”，我没有看到为您的导航设置的字体，但如果您添加“helvetica_neueregular”，它会在其他任何地方加载字体。至于浏览器一致性在 Chrome 开发工具中，您似乎缺少一些字体浏览器类型来提供完整的浏览器支持。

[http://inauguralseason.com/wp-content/themes/twentyeleven/style.css](http://inauguralseason.com/wp-content/themes/twentyeleven/style.css)

```
@font-face {
font-family: 'helvetica_neueregular';
src: url('helveticaneue-medium-webfont.eot');
src: url('helveticaneue-medium-webfont.eot?#iefix') format('embedded-opentype'),
     url('helveticaneue-medium-webfont.woff') format('woff'),
     url('helveticaneue-medium-webfont.ttf') format('truetype'),
     url('helveticaneue-medium-webfont.svg#helvetica_neueregular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

编辑：这是加载中等字体，但它称为常规只是更改为 'helvetica_neuemedium'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:39:07.017

您需要将字体上传到您的网站并声明字体

```
@font-face
{
font-family: 'Helvetica Neue';
src: url('HelveticaNeue.ttf'),
     url('HelveticaNeue.eot'); /* IE9 */
} 
```

只有这样你才能在你的网页上使用它。

# python - Python - 在 xlsx 中阅读评论

> ID：13013618
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:30:24.350
> 
> 标签：python, xlsx

有没有办法使用 python 读取 xlsx 文件中的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:44:26.287

[openpyxl](http://packages.python.org/openpyxl/)支持 xlsx 文件的操作，这里讨论了添加访问评论的能力。如果这不起作用，则可以通过重命名和解压缩 xlsx 文件以 xml 格式访问给定 xlsx 文件的注释，如此处[所述](https://groups.google.com/forum/?fromgroups=#!topic/openpyxl-users/QkpSSL8yrcQ)。这个 xml 文件可以被 python 读取。

# cocoa-touch - ADBannerView 完整的广告方向没有改变

> ID：13013619
> 
> 赞同：0
> 
> 时间：2012-10-22T14:30:26.457
> 
> 标签：cocoa-touch, iad

我使用 Apple iAd Suite 演示代码中的代码来实现带有标签栏控制器的横幅广告。它一直运行良好，直到最近，当我注意到测试广告变得更加丰富多彩，而不仅仅是带有“测试广告”字样的黑色矩形。

但是，我现在看到，虽然横幅视图旋转正常，但完整的广告仅以横向显示。应用程序的其余部分可以正常旋转，但无论设备处于什么方向，完整的添加只会以横向显示。

我不明白如何控制这个。

这是代码：

```
#import "BannerViewController.h"

NSString * const BannerViewActionWillBegin = @"BannerViewActionWillBegin";
NSString * const BannerViewActionDidFinish = @"BannerViewActionDidFinish";

@implementation BannerViewController
{
    ADBannerView *_bannerView;
    UIViewController *_contentController;
}

- (id)initWithContentViewController:(UIViewController *)contentController
{
    self = [super init];
    if (self != nil) {
        _bannerView = [[ADBannerView alloc] init];
        _bannerView.delegate = self;
        _contentController = contentController;
    }
    return self;
}

- (void)loadView
{
    UIView *contentView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [contentView addSubview:_bannerView];
    [self addChildViewController:_contentController];
    [contentView addSubview:_contentController.view];
    [_contentController didMoveToParentViewController:self];
    self.view = contentView;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [_contentController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

- (void)viewDidLayoutSubviews
{
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        _bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }
    CGRect contentFrame = self.view.bounds;
    CGRect bannerFrame = _bannerView.frame;
    if (_bannerView.bannerLoaded) {
        contentFrame.size.height -= _bannerView.frame.size.height;
        bannerFrame.origin.y = contentFrame.size.height;
    } else {
        bannerFrame.origin.y = contentFrame.size.height;
    }
    _contentController.view.frame = contentFrame;
    _bannerView.frame = bannerFrame;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    [UIView animateWithDuration:0.25 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    [UIView animateWithDuration:0.25 animations:^{
        [self.view setNeedsLayout];
        [self.view layoutIfNeeded];
    }];
}

- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    [[NSNotificationCenter defaultCenter] postNotificationName:BannerViewActionWillBegin object:self];
    return YES;
}

- (void)bannerViewActionDidFinish:(ADBannerView *)banner
{
    [[NSNotificationCenter defaultCenter] postNotificationName:BannerViewActionDidFinish object:self];
}

@end 
```

在该`shouldAutorotateToInterfaceOrientation:`方法中，interfaceOrientation 是纵向的，并且评估为真。完整的广告仍以横向显示。

是什么原因造成的，我该如何控制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:25:10.407

沙盒模式似乎只支持一种方向。

# javascript - 用于范围关闭的 Javascript 自调用匿名函数

> ID：13013621
> 
> 赞同：4
> 
> 时间：2012-10-22T14:30:29.310
> 
> 标签：javascript

> **可能重复：**
> [使用 (function(window, document, undefined) { ... })(window, document) 有什么好处？](https://stackoverflow.com/questions/5020479/what-advantages-does-using-functionwindow-document-undefined-windo)

我越来越多地在我一直使用的库中看到这样的代码：

```
(function (window) {
    var Foo = function () {
    }

    window.Foo = Foo;
})(window); 
```

我看到的这样做的论点是在创建（伪）类时避免在全局范围内工作。但是，如果我错了，请纠正我，我一直认为 window 是全局范围。我相信，当你创建一个全局变量时，你实际上只是在向窗口添加一个属性......除非这对 ES5 严格来说有所改变？

那么，基本上，有什么意义呢？我可以看到像这样组织的代码的唯一好处是，如果您想在以后通过传入除 window.xml 之外的参数轻松更改类的命名空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:36:20.683

事实上，如果您忘记使用任何变量声明，*严格模式*会引发异常。`var`但即使不使用*外部封闭*也可以。

使用这种模式更多地是为了保护自己免受*外部 javascript 世界*的影响。例如，一些其他脚本覆盖*了 window.undefined*或任何其他变量，您可以获取该闭包中的值以便从内部访问它。

例如

```
(function _myApp( win, doc, undef ) {
    // app code
}( this, this.document )); 
```

此外，当使用*var*声明变量或创建*函数声明*时，它们始终分别存储在当前的*激活对象*中，即*词法环境记录*。这意味着，在不使用*Function context*的情况下，您可以轻松地从其他点覆盖方法和变量，因为所有这些都将存储在当前*Context*中（这将是全局的）

所以：

```
(function _myApp( win, doc, undef ) {
    var myVar = 42;

    function myFunc() {
    }
}( this, this.document ));

(function _myModule( win, doc, undef ) {
    var myVar = 42;

    function myFunc() {
    }
}( this, this.document )); 
```

这是因为*闭包*和*Context*起作用的，但是如果你使用相同的代码，没有*Function Context*，我们显然会覆盖我们的`myVar`and `myFunc`。这可能发生在任何地方，在同一个文件中或在另一个加载的脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:36:35.237

与全局变量一样邪恶，您至少需要一个，否则无法访问您的脚本。您提供的代码是创建该全局变量的一种方法。我更喜欢这种方式：

```
window.Foo = (function () {
    var func = function () {
        //  ...
    };

    return {
        func: func
    };
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:37:16.487

你是对的，但不同之处在于函数内部的代码就像一个自动`init`函数。

```
(function (window) {
    var Foo = function () {
    }

    var Bar = 69; // not in global scope

    window.Foo = Foo; // in global scope
})(window); 
```

相对于

```
var Foo = function () { // in global scope
}

var Bar = 69; // in global scope 
```

和

```
var Foo = function () { // in global scope
}

function init () {
    var Bar = 69; // not in global scope
}
init(); 
```

# java - Java 的 getClass().getResource() 的最佳国际替代方案

> ID：13013629
> 
> 赞同：7
> 
> 时间：2012-10-22T14:30:59.770
> 
> 标签：java

我的 Java 应用程序捆绑了很多资源文件。这些文件的文件名包含国际字符，如 ü 或 æ。我想使用 getClass().getResource() 加载这些文件，但显然这不受支持，因为对于这些特定的文件名，getResource 方法总是返回 null。

这让我尝试使用国际字符的 URL 编码，但正如[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4968789](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4968789)所述，这也不支持。

所以，我的问题是：加载名称包含国际字符的资源的推荐方法是什么？例如，我需要加载名为 Sjælland.txt 的文件的 UTF-8 内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:18:47.870

不确定是否有`best`（它可能是一个候选者，`worst`因为它是一个相当黑客），但这似乎是一个有能力的机制。`getResource`它通过直接读取 jar来回避使用的需要。

```
public class NavelGazing {
  public static void main(String[] args) throws Throwable {
    // Do a little navel gazing.
    java.net.URL codeBase = NavelGazing.class.getProtectionDomain().getCodeSource().getLocation();
    // Must be a jar.
    if (codeBase.getPath().endsWith(".jar")) {
      // Open it.
      java.util.jar.JarInputStream jin = new java.util.jar.JarInputStream(codeBase.openStream());
      // Walk the entries.
      ZipEntry entry;
      while ((entry = jin.getNextEntry()) != null ) {
        System.out.println("Entry: "+entry.getName());
      }
    }

  }
} 
```

我添加了一个名为的文件`Sjælland.txt`，这确实成功获取了条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:12:12.877

我不确定我是否正确理解你，但如果我尝试

```
URL url = Test.class.getResource("/Sjælland.txt");
Object o = url.getContent(); 
```

然后`o`是一个`sun.net.www.content.text.PlainTextInputStream`。

我在 Windows 机器上使用[JDK](http://en.wikipedia.org/wiki/Java_Development_Kit) 1.6。我已经（默认？） System.property sun.jnu.encoding 设置为 Cp1252。所以这一切似乎都很好。您发布的错误似乎是 JDK 1.4。这可能是你正在使用的。

# svn - 使用 Netbeans 通过 sftp 上传时的目录结构

> ID：13013630
> 
> 赞同：1
> 
> 时间：2012-10-22T14:31:01.923
> 
> 标签：svn, netbeans, sftp

当我与 SVN 同步时，我的本地目录结构如下所示：

```
.../branches/codeigniter/code.php 
```

然后，我需要能够将我通过 sftp 所做的任何更改上传到我的网络服务器进行测试，然后再提交

```
.../web/code.php 
```

我不希望保留文件路径的 /branches/codeigniter 部分。我只想将 codeigniter 目录中的文件上传到我在网络服务器上指定为上传目录的目录。

但是，Netbeans 在我的网络服务器上创建了一个 /branches/codeigniter 目录（因为这是我的本地目录的样子）。所以我上传时得到的是：

```
.../web/branches/codeigniter/code.php 
```

有什么方法可以告诉 netbeans 将 codeigniter 目录视为根目录并且不在网络服务器上创建任何目录？

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:34:38.027

我不知道是否有办法做你所要求的，但是你不应该这样做，因为你不应该这样做:-)

您不应该将整个 SVN 结构检出到项目中。您将可能正在使用的每个分支签出到一个单独的项目。我认为这将解决您的问题，因为您项目的根是您签出的分支。

# python - 如何在 Python 中使用 TKinter 在计算器中显示数字？

> ID：13013632
> 
> 赞同：3
> 
> 时间：2012-10-22T14:31:09.363
> 
> 标签：python, math, tkinter, calculator

这是我的代码：

```
from Tkinter import*

calculator = Tk()
calculator.title('Calcualtor')
calculator.geometry('300x325')

screen = Frame(calculator, bd=2, width=250, height=25, relief=SUNKEN)
buttons = Frame(calculator, bd=2, width=250, height=200)
screen.grid(column=0, row=0, padx=25, pady=25)
buttons.grid(column=0, row=1, padx=25)

def appear():
    results.insert(0, "0")
    return

numbers=["7", "4", "1", "8", "5", "2", "9", "6", "3"]
for index in range(9):
   Button(buttons, bg="White", text=numbers[index], width=5, height=2, command=appear).grid(padx=5, pady=5, row=index%3, column=index/3) 

zero= Button(buttons, bg="White", text="0", width=5, height=2)
zero.grid(padx=5, pady=5, column=1, row=3)

functions=["-", "+", "*", "/"]
for index in range(4):
    Button(buttons, bg="White", text=functions[index], width=5, height=2).grid(padx=5, pady=5, row=index%4, column=3) 

equals= Button(buttons, bg="White", text="=", width=5, height=2)
equals.grid(ipadx=10, pady=5, row=5, column=1)

numbers = StringVar()
results = Entry(screen, textvariable=numbers, width=30)
results.pack()

calculator.mainloop() 
```

* * *

计算器看起来不错，但我需要帮助让它在按下按钮时显示一个数字。正如您在我的函数中看到的那样，现在每次按下按钮时它都会显示“0”，而不是相应的数字。请帮忙。我还没有开始弄清楚如何让它做实际的数学，但如果你也能帮忙，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:46:09.967

您需要创建一个闭包，该闭包返回按钮的相关编号。将您的功能更改`appear`为：

```
def appear(x):
    #return an anonymous function which appends x to the "result" textentry
    return lambda: results.insert(END, x) 
```

然后像这样更改按钮的定义：

```
numbers = ["7", "4", "1", "8", "5", "2", "9", "6", "3"]
for index in range(9):
    n = numbers[index]
    Button(buttons, text=n, command=appear(n), ...).grid(...) 
```

这样，每个 Button 都会获得自己的函数，该函数会附加正确的数字。

在 Python 中，函数只是另一个对象。类的`command`参数`Button`将函数（或任何其他可调用的东西，如类）作为参数，在按下按钮时调用。关键字创建了一个我们传递给类的`lambda`匿名函数。上面定义的出现方法与此类似：

```
def appear(x):
    #create a new function that displays x in the text entry and return it
    def show_x():
        results.insert(END, x)
    return show_x 
```

在这种情况下，我们不能内联 lambda：

```
#THIS DOESN'T WORK AS EXPECTED:
for index in range(9):
    n = numbers[index]
    f = lambda: results.insert(END, n)
    Button(..., command = f, ...) 
```

这是行不通的，因为`n`它是一个局部变量，它随着循环的每次迭代而变化，并在函数执行期间被查找`f`——这意味着在这种情况下它将始终保存最后一个值。我们需要为该值创建一个[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)，我们在`appear`函数中执行此操作。

# javascript - 如何对 Google Fusion Tables 进行分页？特别是，我如何获得总行数？

> ID：13013635
> 
> 赞同：0
> 
> 时间：2012-10-22T14:31:14.863
> 
> 标签：javascript, google-fusion-tables

我正在构建一个表格 javascript 前端来浏览我的融合表。一些视图有过滤器和分组，我希望能够对结果进行分页。对于 CouchDB 和 CloudMine 等其他云数据库，我可以将 &count=true 放在我的请求 URL 中以获取超出我的 LIMIT 的总行数。我需要一种通过融合表获得该数字的方法。

我只能想到两种选择，都比较贵：

1) 做两个查询——我的主查询带有 LIMIT/OFFSET，同一个查询没有 LIMIT/OFFSET，并得到第二个查询的 .length 作为我的计数

2) 做一个没有 LIMIT/OFFSET 的查询，只使用数据子集

这两个选项都违背了使用 LIMIT/OFFSET 来提高网络性能的目的。有没有其他方法可以得到计数？因为我使用 GROUP BY，所以我什至无法使用 COUNT() 进行第二次查询。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:17:13.847

我不知道将计数作为某种特殊参数接收的方法。所以你只能做一个 seocond 查询，但不需要传输相同的数据，只是为了获取计数。

我会使用具有相同`WHERE`and`GROUP BY`子句的查询，但只请求`ROWID`. 这样，只需传输少量数据。或者，您也可以使用该`COUNT()`函数并简单地总结返回值。

如果您想进一步减少网络负载，您只需执行一次此附加查询并在客户端进行所有进一步计算（例如当您在第 3 页时`<count> - 3 * <no of rows per page>`，或者`<count> + 1`如果用户添加一行）。

如果您的数据没有快速更改（甚至仅通过您的用户界面），这应该是可能的。我认为每个表运行一个额外的查询并不是那么糟糕。

# jquery - JQuery Carousel 图像未对齐

> ID：13013636
> 
> 赞同：0
> 
> 时间：2012-10-22T14:31:19.590
> 
> 标签：jquery, css, image, alignment, carousel

我正在尝试将 JQuery Carousel 安装到客户网站中，我尝试了几个不同的，它们都给出了相同的问题，图像看起来向右对齐并稍微向上一点。我想知道是否有人可以快速寻找我？该网站正在这里建设：[www.samskirrow.com/client-hope](http://www.samskirrow.com/client-hope)

谢谢，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:37:47.210

问题是您的菜单和标语块向左浮动。

一个快速的解决方法是添加`clear: both`到您的`mask`课程中。

我建议阅读[`clearfix`](http://themergency.com/css-clearfix-demystified/)解决方案以获得更好的解决方案。这需要将以下 CSS 添加到您的样式表并将该类应用于浮动元素。

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

# python - Python 无法处理以 0 开头的数字字符串。为什么？

> ID：13013638
> 
> 赞同：22
> 
> 时间：2012-10-22T14:31:29.830
> 
> 标签：python, python-3.x, syntax-error

我刚刚在我的 python 解释器上执行了以下程序：

```
>>> def mylife(x):
...     if x>0:
...             print(x)
...     else:
...             print(-x)
... 
>>> mylife(01)
File "<stdin>", line 1
mylife(01)
        ^
SyntaxError: invalid token
>>> mylife(1)
1
>>> mylife(-1)
1
>>> mylife(0)
0 
```

现在，我已经看到[了这一点](https://stackoverflow.com/questions/11620151/what-do-numbers-starting-with-0-mean-in-python)，但正如链接所说，八进制的 0 在 python 中不再起作用（即在 python3 中不起作用）。但这是否意味着应该正确解释以 0 开头的数字的行为？以 2 为基数还是以正常的以 10 为基数表示？既然不是这样，为什么python会这样呢？是执行问题吗？还是语义问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-22T14:33:39.980

我的猜测是，由于`012`在 python3.x 中不再是八进制常量，他们不允许使用`012`语法以避免奇怪的向后兼容性错误。考虑使用八进制文字常量的 python2.x 脚本：

```
a = 012 + 013 
```

然后你将它移植到 python 3，它仍然可以工作——它只是给你`a = 25`而不是`a = 21`你以前期望的（十进制）。玩得开心追踪那个错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-09T18:17:09.367

来自 Python 3 发行说明[http://docs.python.org/3.0/whatsnew/3.0.html#integers](http://docs.python.org/3.0/whatsnew/3.0.html#integers)

> 八进制文字不再是`0720`; 改为使用`0o720`。

Python 2.x 中八进制文字的“前导零”语法是一个常见的陷阱：

```
Python 2.7.3
>>> 010
8 
```

正如您所发现的，在 Python 3.x 中这是一个语法错误：

```
Python 3.3.0
>>> 010
  File "<stdin>", line 1
    010
      ^
SyntaxError: invalid token 
```

您仍然可以像以往一样从带有前导零的字符串转换：

```
>>> int("010")
10 
```

# google-chrome - Chrome“在调试器中暂停”问题

> ID：13013639
> 
> 赞同：35
> 
> 时间：2012-10-22T14:31:32.030
> 
> 标签：google-chrome, google-chrome-devtools

我不知道我打开了什么（偶然）但每次我打开检查元素区域然后尝试单击网页上不在检查元素区域内的任何内容（尤其是与 jQuery 相关的内容，例如幻灯片) 它使页面变灰，显示一条消息“在调试器中暂停”，然后在 Inspect Element 的 Sources 部分中打开一个 jQuery 文件。

在“调用堆栈”区域内，它会显示一条消息“在“单击”事件侦听器上暂停”。

我不记得打开这个功能，但我很想把它关掉。

我知道以前有人问过这个问题 - 当每个人都建议我们看看“暂停”选项是否打开（蓝色）时，我想我已经找到了答案。但是，它没有打开，它是灰色而不是蓝色或任何其他颜色，当我将鼠标悬停在它上面时，它会显示“不要暂停例外。单击以暂停所有例外”。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-23T07:09:08.763

您还可以检查 Source 选项卡，检查 Event Listener Breakpoints 面板下是否在“Mouse”下设置了任何断点。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-10T18:33:13.760

这也可能导致问题

左上角的断点图标应该是这样的蓝色（用于停用断点）

![在此处输入图像描述](../Images/e5ff77860e1462e65659c0aea599b7f9.png)

不应该这样灰

![在此处输入图像描述](../Images/377046b90e9c2fd38980218fcd9a8587.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-02T18:51:16.787

[在这里](https://stackoverflow.com/a/5174978/733034)找到解决方案，如果小八角形停止/暂停标志（在 Chrome “Sources”的左下方）是彩色的（蓝色或紫色），您需要单击它直到它再次变为黑色。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-09T21:31:21.157

它确实让我发疯了一会儿......一直滚动到[![在此处输入图像描述](../Images/52d2fedb3fb5fe2f0a9d178db9a17590.png)](https://i.stack.imgur.com/AG0VZ.jpg)断点窗口的底部，你会发现`XHR Breakpoints`＆在它下面有`Any XHR`复选框......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T12:30:20.163

转到源选项卡并检查所有断点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T22:46:21.630

转到**元素选项卡并从****DOM 断点**下的右窗格中删除所有断点

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-22T14:49:49.010

一个可能的原因是，您启用了“异常暂停”（窗口左下方带有暂停 (||) 符号的小停止符号形图标）。尝试单击它回到关闭/灰色状态（不是红色或蓝色状态）并重新加载页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-06T17:31:24.693

对我来说，我通过暂时禁用 Chrome Bitwarden 扩展解决了这个问题。

您可以`Sources`在 devtools 面板的选项卡中查看，看看是什么导致了这个错误，它可能是一个扩展。

要在 Chrome 上打开 devtools 面板，请按`F12`键。**

# ios - 如何抑制 Xcode 4.5 中缺少默认启动图像警告？

> ID：13013640
> 
> 赞同：6
> 
> 时间：2012-10-22T14:31:33.927
> 
> 标签：ios, retina-display, xcode4.5

如果您没有在项目中包含“宽屏”默认启动图像，Xcode 4.5 会给出“Retina 4 support”警告。

我的问题是，如果我不添加图像，我的应用程序在 iPhone 5 上运行良好，操作系统添加了一些信箱来填充未使用的房地产，但我有一个警告，我无法摆脱。如果我确实添加了图像，则应用程序使用全屏，这是一个问题（播放或开始和停止部分离屏的动画现在在屏幕上，等等）

所以我的问题是：

*   有没有办法抑制“Retina 4 support”警告？
*   如果没有，是否有办法在将应用程序保持在非宽屏“信箱”模式的同时添加默认图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:52:36.090

这有助于回答您的问题吗？它看起来很相似：

[缺少 Retina 4 启动图像。如何忽略此错误？](https://stackoverflow.com/questions/12596991/missing-retina-4-launch-image-how-to-ignore-this-error)

# c# - 从经典 ASP 将 HTML 解析为 Web 服务

> ID：13013649
> 
> 赞同：2
> 
> 时间：2012-10-22T14:32:18.030
> 
> 标签：c#, .net, asp-classic

我正在尝试构建一个网络服务，用户在其中输入 HTML，然后通过网络服务验证它是否是有效的 HTML。

我的示例（仅基本）是：

```
Set objXML = CreateObject("Msxml2.ServerXMLHTTP.6.0")         
Dim strEnvelope 
strEnvelope = "input=" & Server.HTMLEncode("<b>") 
Call objXML.Open("POST", "http://[DOMAIN]/WebServices/HTMLWebService.asmx/ValidateHTML", false) 
Call objXML.SetRequestHeader("Content-Type","application/x-www-form-urlencoded") 
Call objXML.Send(strEnvelope) 

Response.Write(strEnvelope & "##" & objXML.responseText & "##") 
```

我的 ASPX 页面验证输入，然后返回是否为真或假（在字符串数组 XML 中）。目前它总是返回假。经过一番调查，由于某种原因，ASMX 接收到的输入似乎是空的，这与 HTML 标记有关——要么它没有被 HTML 编码，要么不被 asmx 脚本接受。它返回以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<string />
<string>false</string>
</ArrayOfString> 
```

<string /> 是我将输入直接放回返回的 xml 字符串数组的地方。如果我将“<b>”硬编码到该值中，xml 会将其返回为“<b>”，这是我所期望的。

如果我只是输入“b”，那么它会返回 false，但在字符串数组的第一项中确实给了我一个“b”的值 - 所以它肯定会获取该值。

之前有没有人将 html 解析为 ASP.NET (c#) Web 服务或有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:57:15.113

不是 100% 确定，但是由于您在请求标头中指定内容类型为 ***“application/x-www-form-urlencoded”***，因此您可能需要使用 URLEncode 而不是 HTMLEncode。因此，尝试使用：

```
strEnvelope = "input=" & Server.URLEncode("<b>") 
```

# android - Android CountDownLatch.await() 过早冻结 UI

> ID：13013651
> 
> 赞同：2
> 
> 时间：2012-10-22T14:32:20.527
> 
> 标签：android, countdownlatch

所以我正在运行一些带有 CountDownLatch 的线程。

我的问题是，当我调用latch.await() 时，用户界面似乎挂起，甚至事先调用的用户界面命令也没有效果。例如

```
btnShare.setVisibility(View.INVISIBLE);
prgSharing.setVisibility(View.VISIBILE);

latch.await() 
```

前两行对 UI 没有影响。

知道为什么这是并且可能是解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:46:46.363

这很可能是因为您`UI-Thread`在它可以再次渲染之前阻止了它`Views`。我认为您应该查看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)并可能将您的`wait`逻辑放入`doInBackground()`方法中，或者以某种方式重新考虑您的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:47:11.847

如果 UI 挂起，那是因为您调用：

```
latch.await() 
```

`UI Thread.`你必须避免在 UI 线程上阻塞调用，因为这些是导致`ANR`

# uitableview - 故事板：将表格视图推入标签栏视图

> ID：13013654
> 
> 赞同：0
> 
> 时间：2012-10-22T14:32:23.433
> 
> 标签：uitableview, uitabbarcontroller, storyboard

我是故事板的新手，我试图在没有太大进展的情况下实现这一目标。

我有一个表格视图控制器，其中包含当前推入详细视图控制器的单元格。我想要做的是创建一个标签栏，但仅适用于这个详细视图控制器（它将有 3 个可以使用这个标签栏导航的视图）。

我找不到实现这一目标的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:57:53.620

好的，我发现我正在使用 [segue destinationViewController] 设置一个属性，但是在流程中间使用新的 tabbarcontroller 现在我必须这样做：

```
 UITabBarController *tabBarViewController = (UITabBarController *) [segue destinationViewController];
    HotelDetailViewController *hotelController = [[tabBarViewController viewControllers] objectAtIndex:0];
    hotelController.hotel = hotel; 
```

# java - java中的水平和垂直滚动条

> ID：13013656
> 
> 赞同：1
> 
> 时间：2012-10-22T14:32:26.500
> 
> 标签：java, swing, grouplayout, jscrollbar

我有一个文档比较程序，它使用 XWPFDocument APACHE POI 将 .docx 文件显示到文本区域。我需要在 textarea 中附加一个滚动条，因为我创建了具有固定高度和宽度的 textarea。因此，超出文本高度和宽度的文件无法在文本区域中看到。我研究了一些代码并想出了这些代码。

```
 JTextArea textAreaFile1 = new JTextArea();
    textAreaFile1.setEditable(false);
    JScrollPane scroll = new JScrollPane ( textAreaFile1 );
    scroll.setViewportView(textAreaFile1);
    scroll.setVerticalScrollBarPolicy ( ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS ); 
```

我不知道如何将它呈现到我的组布局中。我在创建 GUI 时使用了窗口生成器，因为代码是自动生成的，我不知道如何将它添加到自动生成的代码中。这是布局的代码。

```
GroupLayout groupLayout = new GroupLayout(frmOverallResults.getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addComponent(textAreaFile1, GroupLayout.PREFERRED_SIZE, 371, GroupLayout.PREFERRED_SIZE)
                        .addGap(18))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                            .addGroup(groupLayout.createSequentialGroup()
                                .addComponent(lblNumberOfWords)
                                .addPreferredGap(ComponentPlacement.UNRELATED)
                                .addComponent(wordsFile1)
                                .addPreferredGap(ComponentPlacement.RELATED, 20, Short.MAX_VALUE))
                            .addGroup(groupLayout.createSequentialGroup()
                                .addGroup(groupLayout.createParallelGroup(Alignment.TRAILING, false)
                                    .addComponent(lblNumberOfWords_1, Alignment.LEADING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(lblNumberOfSentences, Alignment.LEADING, GroupLayout.PREFERRED_SIZE, 122, Short.MAX_VALUE))
                                .addPreferredGap(ComponentPlacement.RELATED)
                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                                    .addComponent(charactersFile1)
                                    .addComponent(paragraphsFile1)))
                            .addGroup(groupLayout.createSequentialGroup()
                                .addComponent(Fil, GroupLayout.PREFERRED_SIZE, 91, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(ComponentPlacement.RELATED, 97, Short.MAX_VALUE)))
                        .addPreferredGap(ComponentPlacement.RELATED)))
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.TRAILING)
                            .addComponent(textAreaFile2, Alignment.LEADING, GroupLayout.PREFERRED_SIZE, 395, GroupLayout.PREFERRED_SIZE)
                            .addGroup(Alignment.LEADING, groupLayout.createSequentialGroup()
                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                                    .addComponent(label_3, GroupLayout.PREFERRED_SIZE, 130, GroupLayout.PREFERRED_SIZE)
                                    .addComponent(label_4, GroupLayout.PREFERRED_SIZE, 130, GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(ComponentPlacement.RELATED)
                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                                    .addComponent(paragraphsFile2, GroupLayout.PREFERRED_SIZE, 52, GroupLayout.PREFERRED_SIZE)
                                    .addComponent(charactersFile2, GroupLayout.PREFERRED_SIZE, 52, GroupLayout.PREFERRED_SIZE)))
                            .addGroup(Alignment.LEADING, groupLayout.createSequentialGroup()
                                .addComponent(label, GroupLayout.PREFERRED_SIZE, 106, GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(ComponentPlacement.UNRELATED)
                                .addComponent(wordsFile2, GroupLayout.PREFERRED_SIZE, 52, GroupLayout.PREFERRED_SIZE)))
                        .addContainerGap())
                    .addGroup(groupLayout.createSequentialGroup()
                        .addComponent(lblDocument, GroupLayout.PREFERRED_SIZE, 91, GroupLayout.PREFERRED_SIZE)
                        .addContainerGap())))
            .addGroup(groupLayout.createSequentialGroup()
                .addGap(310)
                .addComponent(btnNewButton)
                .addContainerGap(356, Short.MAX_VALUE))
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblNumberOfWords)
                            .addComponent(wordsFile1))
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblNumberOfSentences)
                            .addComponent(charactersFile1))
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblNumberOfWords_1)
                            .addComponent(paragraphsFile1))
                        .addGap(18)
                        .addComponent(Fil))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(label)
                            .addComponent(wordsFile2))
                        .addGap(6)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(label_3)
                            .addComponent(charactersFile2))
                        .addGap(6)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(label_4)
                            .addComponent(paragraphsFile2))
                        .addGap(18)
                        .addComponent(lblDocument)))
                .addPreferredGap(ComponentPlacement.RELATED)
                .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(textAreaFile2, GroupLayout.PREFERRED_SIZE, 448, GroupLayout.PREFERRED_SIZE)
                    .addComponent(textAreaFile1, GroupLayout.PREFERRED_SIZE, 448, GroupLayout.PREFERRED_SIZE))
                .addGap(18)
                .addComponent(btnNewButton)
                .addGap(24))
    ); 
```

我知道我不应该使用窗口生成器并手动创建它。有任何想法吗？

# objective-c - 如何在 mac os 视图或它的子视图中处理事件？

> ID：13013657
> 
> 赞同：1
> 
> 时间：2012-10-22T14:32:27.413
> 
> 标签：objective-c, xcode, macos, cocoa

我创建一个 windows 有一个`NSSplitview`. 它有两个子视图，视图A 和视图B，它们有一些子视图。如果 viewA 或其子视图获得焦点，则将窗口的标题设置为 viewA 的 stringValue，并将 viewB 设置为依此类推。

我该怎么做？我尝试重写视图的

> 成为/访问/reignFirstResponser

对于 viewA/B 或它们的 subView (a `NSTableView`) 但失败了。

e，我再次尝试将 tablview 上的 becomeFirstresponse 覆盖为

```
BOOL ret = [super becomeFirstResponder];
[NSApp sendAction:@selector(requestString:) to:Nil from:self.window.windowController];
return ret; 
```

有用！但是通过编码，附加了新的子视图。所以我需要一些更聪明更清晰的方法。

我知道了！在窗口委托中，我将 windowDidUpdate 实现为：

```
- (void)windowDidUpdate:(NSNotification *)notification {
[NSApp sendAction:@selector(requestString:) to:Nil from:self.window.windowController]; 
```

}

-(IBAction)requestString:(id)sender 方法是 viewA/B 的 Controller 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:13:52.473

尝试在 NSView 类中覆盖 canBecomeKeyView

```
-(BOOL) canBecomeKeyView
{
    return YES;
} 
```

# javascript - Three.js 自定义着色器

> ID：13013658
> 
> 赞同：3
> 
> 时间：2012-10-22T14:32:30.560
> 
> 标签：javascript, shader, webgl, three.js

> 请注意，在下面的编辑 3 中，此代码的大部分内容已更改。

所以我真的很喜欢 Brandon Jones 的一篇博文（[在这里找到](http://blog.tojicode.com/2012/08/more-gpu-tile-map-demos-zelda.html)）。我想将他的代码转换为 Three.js，但我遇到了一些问题。[你可以在这里](http://media.tojicode.com/zelda/lttp.html)找到他的完整代码。到目前为止，这是我的尝试，对我的问题有一些评论：

```
// Shader
var tilemapVS = [
    "attribute vec2 pos;",
    "attribute vec2 texture;",

    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform vec2 viewOffset;",
    "uniform vec2 viewportSize;",
    "uniform vec2 inverseTileTextureSize;",
    "uniform float inverseTileSize;",

    "void main(void) {",
    "   pixelCoord = (texture * viewportSize) + viewOffset;",
    "   texCoord = pixelCoord * inverseTileTextureSize * inverseTileSize;",
    "   gl_Position = vec4(pos, 0.0, 1.0);",
    "}"
].join("\n");

var tilemapFS = [
    "precision highp float;",

    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform sampler2D tiles;",
    "uniform sampler2D sprites;",

    "uniform vec2 inverseTileTextureSize;",
    "uniform vec2 inverseSpriteTextureSize;",
    "uniform float tileSize;",
    "uniform int repeatTiles;",

    "void main(void) {",
    "   if(repeatTiles == 0 && (texCoord.x < 0.0 || texCoord.x > 1.0 || texCoord.y < 0.0 || texCoord.y > 1.0)) { discard; }",
    "   vec4 tile = texture2D(tiles, texCoord);",
    "   if(tile.x == 1.0 && tile.y == 1.0) { discard; }",
    "   vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;",
    "   vec2 spriteCoord = mod(pixelCoord, tileSize);",
    "   gl_FragColor = texture2D(sprites, (spriteOffset + spriteCoord) * inverseSpriteTextureSize);",
    //"   gl_FragColor = tile;",
    "}"
].join("\n");

this.material = new THREE.ShaderMaterial({
    attributes: {
        //not really sure what to use here, he uses some quadVertBuffer
        //for these values, but not sure how to translate.
        pos: { type: 'v2', value: new THREE.Vector2(0, 0) },
        texture: { type: 'v2', value: new THREE.Vector2(0, 0) }
    },
    uniforms: {
        viewportSize: { type: 'v2', value: new THREE.Vector2(viewport.width() / this.tileScale, viewport.height() / this.tileScale) },
        inverseSpriteTextureSize: { type: 'v2', value: new THREE.Vector2(1/tileset.image.width, 1/tileset.image.height) },
        tileSize: { type: 'f', value: this.tileSize },
        inverseTileSize: { type: 'f', value: 1/this.tileSize },

        tiles: { type: 't', value: tilemap },
        sprites: { type: 't', value: tileset },

        viewOffset: { type: 'v2', value: new THREE.Vector2(Math.floor(0), Math.floor(0)) },
        inverseTileTextureSize: { type: 'v2', value: new THREE.Vector2(1/tilemap.image.width, 1/tilemap.image.height) },
        //is 'i' the correct type for an int?
        repeatTiles: { type: 'i', value: 1 }
    },
    vertexShader: tilemapVS,
    fragmentShader: tilemapFS,
    transparent: false
});

/*this.material = new THREE.MeshBasicMaterial({
    color: 0xCC0000
})*/

this.plane = new THREE.PlaneGeometry(
    tilemap.image.width * this.tileSize * this.tileScale, //width
    tilemap.image.height * this.tileSize * this.tileScale//, //height
    //tilemap.image.width * this.tileScale, //width-segments
    //tilemap.image.height * this.tileScale //height-segments
);

this.plane.dynamic = true;

this.mesh = new THREE.Mesh(this.plane, this.material); 
```

加载页面后，我收到以下错误：

```
TypeError: v1 is undefined
    customAttribute.array[ offset_custom ] = v1.x; 
```

我确定这与我如何设置属性有关，但我不确定它们应该是什么。感谢任何帮助，因为在 Three.js 中几乎没有关于自定义着色器的文档。

**编辑**：这是博客文章中用于填充顶点着色器（`pos`和`texture`）的 2 个属性的代码：

```
//in ctor
var quadVerts = [
    //x  y  u  v
    -1, -1, 0, 1,
     1, -1, 1, 1,
     1,  1, 1, 0,

    -1, -1, 0, 1,
     1,  1, 1, 0,
    -1,  1, 0, 0
];

this.quadVertBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, this.quadVertBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(quadVerts), gl.STATIC_DRAW);

this.tilemapShader = GLUtil.createProgram(gl, tilemapVS, tilemapFS);

//...

//then on the draw method
gl.bindBuffer(gl.ARRAY_BUFFER, this.quadVertBuffer);

gl.enableVertexAttribArray(shader.attribute.position);
gl.enableVertexAttribArray(shader.attribute.texture);
gl.vertexAttribPointer(shader.attribute.position, 2, gl.FLOAT, false, 16, 0);
gl.vertexAttribPointer(shader.attribute.texture, 2, gl.FLOAT, false, 16, 8); 
```

我真的不完全理解这里发生了什么，但如果我是正确的，我认为它会用每个`Float32Array`中一半的数据填充 2 秒`quadVertBuffer`。我不仅不确定为什么，我不确定我是否正确，也不知道如何将其转换为 Three.js 方法。

* * *

**EDIT2**：现在我正在使用平面来显示（2D）背景，我应该使用精灵来代替吗？

* * *

**编辑3**：

因此，当我意识到 Three.js 将为我设置位置和 uv 向量时，我走得更远了（如果与上面示例中的位置/纹理不同，这似乎是相似的）。我还注意到我可能有一些类型错误，因为`'v2'`我拥有的许多类型（调用`uniform2f`）实际上是通过 加载的`uniform2fv`，所以我将它们更改为`'v2v'`并更新了值。现在我没有得到错误，它确实绘制*了一些东西*，只是不完全是 tilemap。

这是更新的顶点着色器：

```
var tilemapVS = [
    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform vec2 viewOffset;",
    "uniform vec2 viewportSize;",
    "uniform vec2 inverseTileTextureSize;",
    "uniform float inverseTileSize;",

    "void main(void) {",
    "   pixelCoord = (uv * viewportSize) + viewOffset;",
    "   texCoord = pixelCoord * inverseTileTextureSize * inverseTileSize;",
    "   gl_Position = vec4(position.x, position.y, 0.0, 1.0);",
    "}"
].join("\n"); 
```

和更新的着色器材质：

```
this._material = new THREE.ShaderMaterial({
    uniforms: {
        viewportSize: { type: 'v2v', value: [new THREE.Vector2(viewport.width() / this.tileScale, viewport.height() / this.tileScale)] },
        inverseSpriteTextureSize: { type: 'v2v', value: [new THREE.Vector2(1/tileset.image.width, 1/tileset.image.height)] },
        tileSize: { type: 'f', value: this.tileSize },
        inverseTileSize: { type: 'f', value: 1/this.tileSize },

        tiles: { type: 't', value: tilemap },
        sprites: { type: 't', value: tileset },

        viewOffset: { type: 'v2', value: new THREE.Vector2(0, 0) },
        inverseTileTextureSize: { type: 'v2v', value: [new THREE.Vector2(1/tilemap.image.width, 1/tilemap.image.height)] },
        repeatTiles: { type: 'i', value: 1 }
    },
    vertexShader: tilemapVS,
    fragmentShader: tilemapFS,
    transparent: false
}); 
```

这是我得到的结果：

![在此处输入图像描述](../Images/948aeb6e26318e6769ca5b935f5a1be6.png)

欢迎任何想法！

* * *

**编辑 4**：

如果我更改顶点着色器以使用我发现的设置的“Three.js 方法”，`gl_Position`我可以更接近，但精灵表中的偏移量是错误的。我认为`pixelCoord`变量设置错误（因为`uv`值与我认为的略有不同`texture`）。

我将顶点着色器的主要功能更改为：

```
void main(void) {
   pixelCoord = (uv * viewportSize) + viewOffset;
   texCoord = pixelCoord * inverseTileTextureSize * inverseTileSize;
   gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
} 
```

现在我从纹理表中得到实际的瓷砖，但它选择的实际瓷砖是错误的：

![在此处输入图像描述](../Images/f7ab7bd5988586409b8bca4790805963.png)

越来越近，仍然感谢任何帮助。

* * *

**编辑 5**：

我怀疑这将是我的最后一次更新，因为我即将得到答案。设置后`tileset.flipY = false;`，其中的tileset是实际的纹理图块，而不是红色贴图。我将所有正确的瓷砖放在正确的位置；除了它们都是颠倒的！

这是更改后的样子：

![在此处输入图像描述](../Images/62fc6173ec86a62800ca90f6d1e0c19e.png)

有没有办法在 Y 轴上翻转每个单独的纹理（不编辑图块集图像）？我觉得有一些简单的矢量数学可以添加到我的着色器中来翻转它绘制的每个纹理并最终确定它。

我确实注意到，如果我不同时翻转 (`tilemap.flipY = false;`和`tileset.flipY = false;`)，我会得到正确的纹理，在正确的位置，正确地组合在一起。但是**整个地图是颠倒的！**很近...

![在此处输入图像描述](../Images/3a96759f71e567d4a7c57c81b4c81c74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:00:30.777

我设法让这个“工作”，虽然我不认为它“固定”。

我翻转了 tilemap ( `tilemap.flipY = true`)，取消了 tileset ( `tileset.flipY = false`)，然后修改了`mapmaker.html`（Toji 编写的将创建这些 tilemaps 的）以*在 sprite 表 (tileset) 上将每个 tile 倒置*绘制。

我更喜欢一个不同的答案来实际解决问题，而不是像这样解决问题，但现在这是我的解决方案。

以下是完整的相关代码。

着色器：

```
var tilemapVS = [
    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform vec2 viewOffset;",
    "uniform vec2 viewportSize;",
    "uniform vec2 inverseTileTextureSize;",
    "uniform float inverseTileSize;",

    "void main(void) {",
    "    pixelCoord = (uv * viewportSize) + viewOffset;",
    "    texCoord = pixelCoord * inverseTileTextureSize * inverseTileSize;",
    "    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);",
    "}"
].join("\n");

var tilemapFS = [
    //"precision highp float;",

    "varying vec2 pixelCoord;",
    "varying vec2 texCoord;",

    "uniform sampler2D tiles;",
    "uniform sampler2D sprites;",

    "uniform vec2 inverseTileTextureSize;",
    "uniform vec2 inverseSpriteTextureSize;",
    "uniform float tileSize;",
    "uniform int repeatTiles;",

    "void main(void) {",
    "    vec4 tile = texture2D(tiles, texCoord);", //load this pixel of the tilemap
    "    if(tile.x == 1.0 && tile.y == 1.0) { discard; }", //discard if R is 255 and G is 255
    "    vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;", //generate the offset in the tileset this pixel represents
    "    vec2 spriteCoord = mod(pixelCoord, tileSize);",
    "    vec4 texture = texture2D(sprites, (spriteOffset + spriteCoord) * inverseSpriteTextureSize);",
    "    gl_FragColor = texture;",
    "}"
].join("\n"); 
```

着色器材质（where`tilemap`和`tileset`are `THREE.Texture`s）：

```
//Setup Tilemap
tilemap.magFilter = THREE.NearestFilter;
tilemap.minFilter = THREE.NearestMipMapNearestFilter;
if(this.repeat) {
    tilemap.wrapS = tilemap.wrapT = THREE.RepeatWrapping;
} else {
    tilemap.wrapS = tilemap.wrapT = THREE.ClampToEdgeWrapping;
}

//Setup Tileset
tileset.wrapS = tileset.wrapT = THREE.ClampToEdgeWrapping;
tileset.flipY = false;
if(this.filtered) {
    tileset.magFilter = THREE.LinearFilter;
    tileset.minFilter = THREE.LinearMipMapLinearFilter;
} else {
    tileset.magFilter = THREE.NearestFilter;
    tileset.minFilter = THREE.NearestMipMapNearestFilter;
}

//setup shader uniforms
this.offset = new THREE.Vector2(0, 0);
this._uniforms = {
    viewportSize: { type: 'v2', value: new THREE.Vector2(viewport.width / this.tileScale, viewport.height / this.tileScale) },
    inverseSpriteTextureSize: { type: 'v2', value: new THREE.Vector2(1/tileset.image.width, 1/tileset.image.height) },
    tileSize: { type: 'f', value: this.tileSize },
    inverseTileSize: { type: 'f', value: 1/this.tileSize },

    tiles: { type: 't', value: tilemap },
    sprites: { type: 't', value: tileset },

    viewOffset: { type: 'v2', value: this.offset },
    inverseTileTextureSize: { type: 'v2', value: new THREE.Vector2(1/tilemap.image.width, 1/tilemap.image.height) },
    repeatTiles: { type: 'i', value: this.repeat ? 1 : 0 }
};

//create the shader material
this._material = new THREE.ShaderMaterial({
    uniforms: this._uniforms,
    vertexShader: tilemapVS,
    fragmentShader: tilemapFS,
    transparent: false
});

this._plane = new THREE.PlaneGeometry(viewport.width, viewport.height, this.tileSize, this.tileSize);

this._mesh = new THREE.Mesh(this._plane, this._material); 
```

修改后的地图制作部分：

```
MapMaker.prototype.processTile = function(x, y) {
    //rotate upside down, and draw
    this.tileCtx.save();
    this.tileCtx.translate(0, this.tileSize);
    this.tileCtx.scale(1, -1);
    this.tileCtx.drawImage(this.srcImage, 
        x * this.tileSize, y * this.tileSize, this.tileSize, this.tileSize, 
        0, 0, this.tileSize, this.tileSize);

    var sprite = this.cacheSprite();

    this.tileCtx.restore();

    this.mapCtx.fillStyle="rgb(" + sprite.x + "," + sprite.y + ", 0)";
    this.mapCtx.fillRect(x,y,1,1);

    /* Why was this thing drawing 2 times?
    this.tileCtx.drawImage(this.srcImage, 
        x * this.tileSize, y * this.tileSize, this.tileSize, this.tileSize, 
        0, 0, this.tileSize, this.tileSize);*/
}; 
```

如果有人有不同的答案，请不要害羞地发布它。

# objective-c - 目标不支持构建所选软件的体系结构

> ID：13013660
> 
> 赞同：0
> 
> 时间：2012-10-22T14:32:31.123
> 
> 标签：objective-c, xcode, ios-simulator, shared-libraries, target

今天，我在一个包含多个目标的项目中创建了一个共享库，而我最初只有一个（并且没有共享库），但突然我的项目在尝试运行时产生了以下错误。

“目的地不支持构建所选软件的体系结构。切换到支持该体系结构的目的地以运行所选软件。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:30:50.440

不要更改包名称和`info.plist`. 我改变了它们并得到了这个错误。在我将它们更改为默认值后，错误就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:32:31.123

在通过 Stackoverflow 上的所有建议步骤无济于事后，我发现答案非常简单......

我忘记将 main.m 包含在目标中，因此不会构建可执行文件。将适当的主文件添加到他们的目标解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T19:54:41.013

在项目导航树中选择 Info.plist 并确保它没有分配给目标。我已经确认这是正确的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:13:37.853

[选择的目的地不支持架构](http://blog.csdn.net/sniffer12345/article/details/8016153)，也许可以帮助你。顺便说一句，我已经发布了这个问题。

# facebook-graph-api - 将照片发布到用户时间轴时如何创建 Instagram 类型的消息？

> ID：13013662
> 
> 赞同：1
> 
> 时间：2012-10-22T14:32:36.150
> 
> 标签：facebook-graph-api, facebook-opengraph

如果您在 Instagram 上分享照片，您会在时间线上的照片上方看到以下消息。

*“FB 用户与 Instagram 合影。”*

我目前的测试只是显示：

*“FB 用户 3 秒前通过 AppName”*

我的图片邮政编码是：

```
$args = Array(
    'url'           => 'http://www.mySiteName.com/imageName.png',
    'message'       => 'Made on SiteName http://www.mySiteName.com',
);
$post_id = $this->facebook->api("/me/photos", "post", $args); 
```

我想我需要设置 OpenGraph 操作和对象，我已经完成了，但我不确定我是否已正确设置它们或如何测试它们。

我创建了一个动作“Make”和一个对象“Collection”并尝试了以下操作：

```
$post_id = $this->facebook->api("/me/Namespace:make", "post", $args); 
```

但得到错误：

*“您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：集合。”*

集合获取代码给出：

```
 <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# collection: http://ogp.me/ns/collection#">
  <meta property="fb:app_id" content="appId" /> 
  <meta property="og:type"   content="collection" /> 
  <meta property="og:url"    content="Put your own URL to the object here" /> 
  <meta property="og:title"  content="Sample Collection" /> 
  <meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
```

操作获取代码提供：

```
curl 'https://graph.facebook.com/me/nameSpace:make?access_token=TOKEN' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:00:49.063

我已经设法让它工作，并在生成的帖子、参考 URL 和 Codeigniter 代码的图像下方发布。

Make 是我的 OpenGraph 动作，Collection 是我的 OpenGraph 对象。

![结果在 Facebook 上的帖子](../Images/e3672e55d03746a16939d6a7c35fcbe7.png)

**参考：**

[http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/) [http://developers.facebook.com/docs/opengraph/usergeneratedphotos/](http://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

```
$userId = $this->facebook->getUser();

// If user is not yet authenticated, the id will be zero
if($userId == 0){
    // Generate a login url
    $url = $this->facebook->getLoginUrl(array('scope'=>'email,user_photos,friends_photos,publish_stream')); 
    echo "<h2><a href='" . $url . "'>Login</a></h2>";
} else {

    // Make Logout URL
    $logoutUrl = $this->facebook->getLogoutUrl(array(
        'next'  => 'http://www.myUrl.com/logout/',
        // URL to which to redirect the user after logging out
    ));
    echo "<h2><a href='" . $logoutUrl . "'>Logout</a></h2>";

    // Get User's data
    $user = $this->facebook->api('/me');
    echo "<p>Welcome <b>" . $user["name"] . '</b></p>';
    echo("<p><b>User Details: </b>");
    print_r($user);
    echo("</p>");

    // Get user's Permissions 
    $permissions = $this->facebook->api('/me/permissions');
    echo("<p><b>User Permissions: </b>");
    print_r($permissions);
    echo("</p>");

    if (isset($permissions['data'][0]['publish_stream'])) {
        echo "<h3>Permission to Post</h3>";
    } else {
        $url = $this->facebook->getLoginUrl(array('scope'=>'email,user_photos,friends_photos,publish_stream')); 
        echo "<h3>NO Permission to Post: ";
        echo "<a href='" . $url . "'>Get extra permissions</a></h3>";
    }

    // Upload an via OpenGraph Collection Object
    $og_type = 'collection'; // Your Opengraph Object
    $og_title = urlencode('This is my Title');
    $og_description = urlencode('This is my Description');
    $og_image = 'http://www.myUrl.com/big.png'; // At least 480px by 480px 

    $object_url = 'http://www.myUrl.com/fb_object_meta.php?fb:app_id=398917983475605&og:type='.$og_type.'&og:title='.$og_title.'&og:description='.$og_description.'&og:image='.urlencode($og_image);
    // See this URL if you need the code for the dynamic meta data page
    // http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/publish-open-graph-story/

    $args = Array(
        'collection'                => $object_url,
        'image[0][url]'             => $og_image, // Possible to upload more than one user gen image e.g. image[1][url]
        'image[0][user_generated]'  => 'true',
        //'message'                 => 'Made on myUrl http://www.myUrl.com', // This shows above the large pic
    );

    try {
        $post_id = $this->facebook->api("/me/myUrl:make", "post", $args);
        print_r($post_id);
    }
    catch (Exception $e)
    {
        print_r($e);
    }   

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:52:06.673

在您在应用程序控制台中添加 OG 操作的位置的右​​侧会有一个链接，上面写着“获取代码”。这将显示您需要包含的信息。

在您的情况下，您的 args 中应该有一个参数，该参数`collection`包含包含您照片的 OG 标记的页面的 URL。

`collection`您可以通过单击您在应用程序控制台中创建的对象旁边的“获取代码”链接来找到此标记。

**更新**

开放图通过将元标记添加到可访问网页的头部来工作。您需要将`colleation`元数据添加到某个页面，然后在`collection`您发出的请求的参数中，添加页面的 URL。

# java - 使 JSONObject 可序列化

> ID：13013663
> 
> 赞同：4
> 
> 时间：2012-10-22T14:32:38.773
> 
> 标签：java, session, grails, serialization, deserialization

`JSONObject`类包`org.codehaus.groovy.grails.web.json`没有实现`Serializable`。

我想让这个对象可序列化，因为我在应用程序服务器之间使用会话复制并`JSONObject`保存在会话中。

我有两种选择来实现这一目标：

1.  实现的子类`JSONObject`s `Serializable`。
2.  在会话中保存此对象时对对象使用`toString()`方法。`JSONObject`

谁能建议我应该使用两个选项中的哪一个，原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:36:28.113

我认为该[`toString`](http://grails.org/doc/2.1.0/api/org/codehaus/groovy/grails/web/json/JSONObject.html#toString%28%29)方法是打算在这里使用的。该方法已经返回对象的 JSON 文本，适合传输或存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:14:01.770

您不需要序列化 ​​JSON，它已经是可存储的形式（类似于 JSON 的全部内容）。Grails 具有 JSON 解析器和“slurpers”，所有这些都可以供您使用。因此，只需将 JSON 数据存储为字符串并使用解析器将其从文件中读回即可。

# java - Grails - 从groovy中的默认json转换器中排除类名的更好方法？

> ID：13013666
> 
> 赞同：3
> 
> 时间：2012-10-22T14:32:51.563
> 
> 标签：java, json, rest, grails, groovy

我一直在 grails 项目中编写自定义编组器，以便能够从 json 模型中排除某些字段，例如类名。我正在通过引导程序中调用的 spring bean 注册编组器。

尽管我发现大部分编组代码都非常重复，并且这些技术导致编组器过多。

我想知道是否有更通用的方法是始终忽略 JSON 转换中的某些字段，因此我不必总是为所有内容编写自定义编组器。

如何覆盖默认的 groovy JSON 转换器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:21:29.517

如果您使用 InstanceMethodBasedMarshaller，您将能够简单地在每个域类上定义一个 toJSON 方法。这克服了必须注册许多自定义编组器的问题；相反，您将有一个编组员来统治他们。

但是，它只是将创建自定义编组器的负担转移到在每个域类中编写自定义 toJSON() 实现。为了解决这个问题，您可以利用 groovy 类别，这些类别旨在提供跨不相关类的常见行为，即策略模式。就像是：

```
//Category
class JSONOutputCategory {
    static customizeJSON(Object self) {
        // do whatever standard thing here
    }
}

//Domain
class MyDomain {
...
    public void toJSON(JSON json) {
        use(JSONOutputCategory){
            json.build {
               customizeJSON(this)
            }
        }
    }
} 
```

CAVEAT EMPTOR：我根本没有测试过这个，它更像是一个概念而不是一个实现。

# php - 如何使用下拉列表和输入框从数据库中自动获取数据？

> ID：13013679
> 
> 赞同：2
> 
> 时间：2012-10-22T14:33:38.667
> 
> 标签：php, mysql, drop-down-menu, inputbox

> **可能重复：**
> [下拉框中更改输入框的选项](https://stackoverflow.com/questions/5629263/option-in-dropdown-box-that-changes-an-input-box)

我正在使用 php-mysql 构建调度程序。我有一个课程代码下拉列表和一个输入框，该输入框自动显示下拉列表中所选课程代码的主题名称。任何人都可以帮助我吗？

这个下拉列表应该动态地从数据库中获取数据，我在这个列表中选择的任何课程代码都应该出现在输入框中。

我如何在 php 中编写代码？

```
<select name="cCode">
    <option>Subject Code 1</option>
    <option>Subject Code 2</option>
</select> 
```

我在列表中选择的课程代码的主题名称应出现在输入框中。

```
<input type="text" name="sSubject" disabled value="Subject Name"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:07:32.973

假设您的课程列表不是那么长，您可以避免 Ajax 调用。如果是这种情况，您可以这样做：

.1。调整您的 PHP 以生成选择标记，如下所示：

```
<select name="cCode" id="cCode" onchange="javascript:selectChanged();">
<option courseTitle="Course Title 1">Subject Code 1</option>
<option courseTitle="Course Title 2">Subject Code 2</option>
</select> 
```

请注意`ID="cCode"`；自定义标签属性`courseTitle`和事件`onchange="javascript:selectChanged()"`。

.2\. 更改输入标签如下：

```
<input id="courseTitle" type="text" name="sSubject" disabled value="Subject Name"/> 
```

请注意`ID="courseTitle"`。

.3\. 使用下面的 Javascript 函数更新输入字段：

`function selectChanged () { var obj = document.getElementById("cCode"); var courseTitle = document.getElementById("courseTitle"); courseTitle.value = obj.options[obj.selectedIndex].getAttribute('courseTitle', 2); }`

你可以在这里看到现场演示：http: [//jsfiddle.net/salih0vicX/Ptk2M/](http://jsfiddle.net/salih0vicX/Ptk2M/)

# php - 删除黑块（css，php）

> ID：13013683
> 
> 赞同：1
> 
> 时间：2012-10-22T14:33:50.267
> 
> 标签：php, css

我有结果页面的代码：http:
[//pastebin.com/XK3hdNYY](http://pastebin.com/XK3hdNYY)

这个**css**
[http://pastebin.com/rs22p4px](http://pastebin.com/rs22p4px)

但我有一个与 css 无关的黑色块。例如，当代码是这样的

```
echo "<tr>";
echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
echo "<td width='auto'>". $row[2] . "</td>";
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div><td>';
echo "</tr>"; 
```

![表格1](../Images/7abf1cb13888754506bebb147f688ce4.png)
当我像这样更改代码时，我有这个表输出

```
echo "<tr>";
echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
echo "<td width='auto'>". $row[2] . "</td>";
echo "<td width='auto'>". $row[3] . "</td>";
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div><td>';
echo "</tr>"; 
```

我有这个输出：
![表2](../Images/76242d8364b5ca01bf4d34dc04e0971b.png)
当我这样改变时

```
echo "<tr>";
echo "<td width='auto' bgcolor=”#FF0000 &#8243;>" . "&nbsp;". "<b>"  . $i . "&nbsp;". "<b/>". "</td>";
echo "<td width='auto'>" . "&nbsp;" . $row[1] . "&nbsp;" . "</td>";
echo "<td width='auto'>". $row[2] . "</td>";
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div><td>';
echo "<td width='auto'>". $row[3] . "</td>";
echo "</tr>"; 
```

我的输出：
![表3](../Images/8c89641d447eaffc2ec830d875f72a9c.png)

**我也想删除这些黑色块和列**。在第三种情况下，似乎该列失去了边界和线条？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:39:00.360

看起来你有一个 HTML 语法错误：

```
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div><td>'; 
```

应该：

```
echo '<td><span class="spoiler-label">'.$row[1].'</span><div class="spoiler-content" style="display: none"><br>'.$row[3].'</div></td>'; 
```

请参阅`</td>`每行末尾的结尾。您错误地打开了一个新列。

没有 a`<th>`来表示它的新列将默认为这样的空白列。

# php - 使用 mcrypt 或 GnuPG 存储信用卡详细信息

> ID：13013686
> 
> 赞同：5
> 
> 时间：2012-10-22T14:33:58.217
> 
> 标签：php, encryption, mcrypt

我需要存储信用卡详细信息（不存储不是一种选择）。

使用 mcrypt 和 mcrypt_dev_random 生成 init_vector 需要不同的时间来加密/解密，但似乎是最“安全”的选项。mcrypt_dev_urandom 更快，但不适合长期存储 - 正如我所读到的。

将 GnuPG 视为一种可能的替代方案，如果可能的话，希望得到一些意见/建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:39:12.857

如果你*真的*想安全地存储信用卡信息，有一个标准：[支付卡行业数据安全标准](http://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard)。而且它比使用一种特定的加密算法***要复杂得多。***~~它要求您将部分卡详细信息存储在两台物理上独立的机器上，~~等等。即使您严格遵守 PCI 标准，专家仍认为您仍然没有完全安全。任何低于此的内容都几乎不值得详细讨论，因为整体安全级别非常低，几乎没有什么区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:55:10.097

请记住：密码学的第一条规则是“不要自己动手”。

`MCRYPT_DEV_URANDOM` **对于强大的加密来说已经足够了**，但是“管理信用卡信息”比简单地“*加密它们并让上帝自己整理”要复杂**得多*。

 *“不存储不是一种选择”对我来说听起来好像你（或者更好的*是，你上面的人*）做错了。**您**不应该*对此*进行研究，也不应该成为提出解决方案的人。不要成为秋天的家伙。

[https://www.pcisecuritystandards.org/merchants/how_to_be_compliant.php](https://www.pcisecuritystandards.org/merchants/how_to_be_compliant.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T14:39:00.167

对您而言，最重要的问题是，您需要什么才能实现 PCI 合规性。不要产生一些自制加密。阅读它需要什么，最好将信用卡的东西委托给专门的支付处理器。

> 使用 mcrypt 和 mcrypt_dev_random 生成 init_vector 需要不同的时间来加密/解密，但似乎是最“安全”的选项。mcrypt_dev_urandom 更快，但不适合长期存储 - 正如我所读到的。

这说明了一些误解。一方面，静脉注射不需要保密。随机数的质量不太重要。

但即使对于密钥，`/dev/urandom`也足够好，只要它最初具有足够的熵。*

# java - 面试：可以创建一个没有名字的类吗？

> ID：13013692
> 
> 赞同：6
> 
> 时间：2012-10-22T14:34:31.073
> 
> 标签：java, c++, class, oop

面试的时候，面试官问我

*我们可以创建没有名字的类吗？*

因为，我不确定是否真的可以创建一个没有名字的类。所以，我**说不**。

后来，我尝试谷歌搜索，发现，其他人也在寻找相同问题的答案，但我没有找到明确的答案。

如果有人清楚地解释这门课，我将不胜感激。我的意思是，那个类在技术上被称为什么，我们如何实例化这个类？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T14:35:09.887

是的，它被称为匿名类/结构。

在 C++ 中：

```
class {
} x; 
```

`x`是该类型的对象，你不能再创建了，因为，好吧，你会怎么做，因为这个类没有名字和所有......

> 如何调用构造函数和析构函数

你没有。在 Java 和 C++ 中，构造函数和析构函数与类具有相同的名称（它们不是 PHP -`__construct`或其他），并且缺少名称会妨碍。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T14:37:10.980

它在 Java 中也称为匿名类。

```
// create a new instance of an anonymous class.
Serializable s = new Serializable() {
}; 
```

注意：在 JVM 中，所有类都有一个名称，它是由编译器为您生成的。

你不能定义构造函数，但它可以有一个实例初始化块来做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:38:47.037

在 java 中，您可以创建“匿名内部类”，有关详细答案，请参阅[How are Anonymous (inner) classes used in Java?](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)

# makefile - 目标的可选风味

> ID：13013694
> 
> 赞同：0
> 
> 时间：2012-10-22T14:34:40.933
> 
> 标签：makefile

我想在编译时管理一些功能并设置特定的怪癖。因此，我必须能够修改必须编译的对象列表以生成最终目标、编译命令和链接命令。到目前为止，我只需要使用两种风格的程序，另一种（比如说`special`）一种只是添加了一些`CXXFLAGS`和一个目标文件：

```
specialclient: CXXFLAGS+=-DSPECIALBUILD
specialclient: LDFLAGS+=-lanotherlib
specialclient: libanotherlib client 
```

哪里`client`是正常目标。但是现在我需要另一个可选特征（比如`peculiar`），事情开始变得复杂，因为我希望能够选择特征的任意组合；但我不想为`peculiarclient`and指定目标`specialpeculiarclient`。我希望能够在命令行中指定每个功能，例如`make [special] [peculiar] client`.

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:18:26.733

一些[条件](http://www.gnu.org/software/make/manual/make.html#Conditionals)应该可以解决问题：

```
ifdef SPECIAL
CXXFLAGS+=-DSPECIALBUILD
LDFLAGS+=-lanotherlib
client: libanotherlib
endif

ifdef PECULIAR
CXXFLAGS+=-DPECULIARBUILD
LDFLAGS+=-lyetanotherlib
client: libyetanotherlib
endif 
```

现在你可以`make client`, `make client SPECIAL=1`, `make client PECULIAR=yes`, `make client SPECIAL=TRUE PECULIAR=very`, 或其他任何东西。

# java - Preg_match PHP 到 java 的翻译

> ID：13013695
> 
> 赞同：4
> 
> 时间：2012-10-22T14:34:41.163
> 
> 标签：java, php, preg-match

我在将 php pregmatch 转换为 java 时遇到了一些问题。我以为我做的一切都是正确的，但它似乎没有工作。这是代码：

原始PHP：

```
/* Pattern for 44 Character UUID */
$pattern = "([0-9A-F\-]{44})";
if (preg_match($pattern,$content)){
                /*DO ACTION*/
            } 
```

我的Java代码：

```
final String pattern = "([0-9A-F\\-]{44})";
    public static boolean pregMatch(String pattern, String content) {
            Pattern p = Pattern.compile(pattern);
            Matcher m = p.matcher(content);
            boolean b = m.matches();
            return b;
        }
if (pregMatch(pattern, line)) {
                        //DO ACTION
                    } 
```

所以我的测试输入是：DBA40365-7346-4DB4-A2CF-52ECA8C64091-0

使用一系列 System.outs 我得到 b = false。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:39:39.627

要像在代码中那样实现一个函数：

```
final String pattern = "[0-9A-F\\-]{44}";
public static boolean pregMatch(String pattern, String content) {
    return content.matches(pattern);
} 
```

然后您可以将其称为：

```
if (pregMatch(pattern, line)) {
    //DO ACTION
} 
```

您不需要括号，`pattern`因为这只会创建一个您没有使用的匹配组。如果您需要访问反向引用，则需要括号和使用`Pattern`和`Matcher`类的更高级的正则表达式代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T14:39:58.637

你可以使用`String.matches()`

```
if (line.matches("[0-9A-F-]{44}")) {
  // do action
} 
```

# xpath - 在 XPath 中是否可以将 OR 运算符与节点名称一起使用？

> ID：13013696
> 
> 赞同：13
> 
> 时间：2012-10-22T14:34:44.760
> 
> 标签：xpath

使用 XPath，我知道您可以通过以下方式使用联合运算符：

```
//*[@id="Catalog"]/thead | //*[@id="Catalog"]/tbody 
```

不过，这对我来说似乎有点尴尬。有没有办法做类似于其中之一的事情？

```
//*[@id="Catalog"]/(thead|tbody)
//*[@id="Catalog"]/(thead or tbody)
//*[@id="Catalog"]/*[nodename="thead" or nodename="tbody"] 
```

这对我来说似乎更具可读性和直观性......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T04:14:28.623

而表达式：

> ```
> //*[@id="Catalog"]/*[name()="thead" or name()="tbody"] 
> ```

是正确的

**这个表达式更有效**：

```
//*[@id="Catalog"]/*[self::thead or self::tbody] 
```

**还有第三种方法可以检查元素的名称是否是指定的字符串序列之一**：

```
//*[@id="Catalog"]/*[contains('|thead|tbody|',concat('|',name(),'|'))] 
```

**如果可能的名称数量非常长（无限且未知长度），**则使用最后一种技术可能特别实用。**管道分隔的可能名称字符串甚至可以作为外部参数传递给转换，这大大提高了它的通用性、可重用性和“干性”。**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:46:11.000

您正在寻找`name()`功能：

```
//*[@id="Catalog"]/*[name()="thead" or name()="tbody"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T15:39:28.087

请注意，对于 XPath 2.0，您的尝试`//*[@id="Catalog"]/(thead|tbody)`是正确的。但是，这种方法不适用于 XPath 1.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:37:44.653

是的，您可以使用：

```
//*[@id="Catalog"]/[nodename='thead' or nodename='tbody'] 
```

编辑：

只需重新阅读您的原始帖子并意识到您在问什么。上述语法不适用于这种情况。不确定如何获取要使用的节点名称，但节点名称不正确...**

# ios - 如何使用触摸滚动平铺列表（iOS 版 Adob e Air）

> ID：13013699
> 
> 赞同：0
> 
> 时间：2012-10-22T14:34:57.033
> 
> 标签：ios, actionscript-3, air, adobe

我正在使用 Adob​​e Flash 开发一个 iOS 应用程序。它工作正常，除了一个显示滚动条的磁贴列表，需要拖动它来滚动磁贴列表并显示其所有内容。

有没有办法通过触摸并拖动它来让它滚动到任何地方？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:30:17.620

如果您使用的是 Flex，这将起作用。

不要设置高度（或宽度，取决于您的需要）并将其包裹在`**Scroller**`对象中。我不确定 a`**TileList**`是否是有效的 ViewPort，因此您可能需要进行更深一层的抽象并将其包装`**TileList**`在一个通用`**Group**`对象中。这将为 Scroller 中的对象提供接近原生的滚动功能。

例子：

```
<s:Scroller width="100%" height="100%">
    <s:TileList>
    </s:TileList>
</s:Scroller> 
```

# c# - 获取数字的百分比

> ID：13013707
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:35:21.193
> 
> 标签：c#, math, percentage

我有一个与百分比计算有关的问题：

下图中是两个段的示例： ![在此处输入图像描述](../Images/e2d93d326db1568d3fe85c649812bce1.png)

第一段 X 有最小值 2,5 和最大值 12,7 第二段 Y 有最小值 0,75 和最大值 5,4

我需要在 C# 中计算 X min 和 X max 中 Y 最大值 (5,4) 的百分比是多少？

我需要这样的东西：在 0 到 49 的范围内 -> 值 10 是 (10 / 49) * 100 = 20,40816326530612。

我如何在 C# 中计算 5,4 在 2,5 - 12,7 范围内的百分比是多少？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:44:34.243

这与 C# 无关，但与数学无关；）

如果将比例更改为从 0 而不是 2.5 开始会怎样：

12.7-2.5 = 10.2 5.4-2.5 = 2.9

(2.9/10.2)*100 是你的答案。

完整的计算将是：

(值 - minY)/(maxX - minY) * 100。

# python - 如果发生任何异常并针对特定异常运行一些代码

> ID：13013708
> 
> 赞同：0
> 
> 时间：2012-10-22T14:35:24.200
> 
> 标签：python, exception, exception-handling, python-2.7, pygame

我有这个功能。我的 pygame 的文本到矩形转换器。

```
def text_to_rect(text, name='default'):
    try:
        font  = load.text_style[name]['font']
        aa    = load.text_style[name]['aa']
        color = load.text_style[name]['color']
    except NameError:
        font_path = pygame.font.get_default_font()
        font = pygame.font.Font(font_path, 24)
        aa = 1
        color = (0,0,0)
        if not name=='default':
            text = text+'(ERROR: Global load object not defined.)'
    except KeyError:
        font_path = pygame.font.get_default_font()
        font = pygame.font.Font(font_path, 24)
        aa = 1
        color = (0,0,0)
        if not name=='default':
            text = text+'(ERROR: '+name+' text style does not exist.)'
    return font.render(text,aa,color) 
```

在两个**except**块中有 4 行相同的代码。如果发生任何异常，我想运行这 4 行，然后休息到特定的异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:39:22.123

您实际上可以将异常合并到一个语句中：

```
try:
    #code that you expect errors from

except KeyError, NameError:
    #exception code

except:
    #Of course, you can also do a naked except to catch all
    #exceptions,
    #But if you're forced to do this, you're probably
    #doing something wrong. This is bad coding style. 
```

*编辑* 对于您的情况，如果您希望代码执行依赖于捕获的错误，请执行以下操作：

```
try:
    #Code to try
except (KeyError, NameError) as e:
    #Code to execute in either case
    if isinstance(e, KeyError):
        #code to execute if error is KeyError
    else:
        #code to execute if error is NameError 
```

# java - 在 LAN 中保持客户端更新的最佳方法 - Java 网络

> ID：13013709
> 
> 赞同：0
> 
> 时间：2012-10-22T14:35:32.663
> 
> 标签：java, networking, udp, multicast, lan

我正在开发一个将与 LAN 中的服务器连接的多客户端应用程序。

每个客户端都可以发送一个更改服务器状态的命令。我将称之为“ServerStatus”，它是一个具有一些值的对象。

现在，如果 ServerStatus 发生变化，所有客户端都应该立即知道它。我的想法是这样工作：

服务器每秒向所有侦听客户端发送一个多播，其版本号为 ServerStatus。所以如果一个新的客户端加入了组播组，他会看他的versionNumber是否相同。如果没有，客户端将通过 UDP 询问当前版本的 ServerStatus。

当客户端发送一个改变 ServerStatus 的命令时，服务器会将他当前的（和新的）ServerStatus 发送到同一个多播组，而在另一个线程中，ServerStatus 的版本号仍然是每秒共享的。

各位小伙伴觉得这样处理好不好？或者这会导致太多问题，......等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:10:00.260

如果新的 ServerStatus 无法到达客户端会怎样？在我看来，向客户端发送新状态时不应使用 UDP，而应使用可靠的协议。因此，如果您打算在此使用多播，则必须获得[可靠的多播协议](https://stackoverflow.com/questions/5861518/reliable-multicasting-in-java)。

* * *

另一方面，您可能更喜欢客户端与服务器同步：

*   每次客户端进入网络时，它都会向服务器询问其*statusid*（如果不相同，服务器会向他发送 ServerStatus），并且客户端还会注册新的状态更改事件。(TCP)

*   离开时，客户端可以发送 UNREGISTER 消息 (UDP)。

*   每次 ServerStatus 更改时，服务器都会将新的 ServerStatus 发送给每个注册的客户端。在接收到新的 Serverstatus 时，客户端会向服务器发送一个 ack-like。（TCP）

*   如果服务器没有收到确认，则相关客户端将被取消注册（因为这意味着客户端在没有取消注册的情况下离开了网络 - 错误）。

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:40:45.057

基本上，您的想法对我来说听起来不错，我
建议您深入研究“[组通信](http://en.wikipedia.org/wiki/Group_communication_system)”的原理，并查看诸如[jGroups 之](http://www.jgroups.org/)类的框架，我知道 JBoss Cache 使用它在其节点之间分配数据。
也许为了可靠性，客户端还应该在 X 秒内查询一次服务器，以查看它们是否具有正确的版本号，
或者至少在它们启动/从崩溃中恢复时执行此操作。

# java - 创建交互式地图

> ID：13013710
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:35:41.013
> 
> 标签：java, android, opengl-es, map, android-canvas

我正处于创建我学校的交互式地图的研究阶段，其中有一个地图，每个房间都被标记，当用户点击房间时，会给出关于老师、班级信息和会议时间的信息。地图本身必须有限制地放大和缩小并四处移动。

地图的最终外观将与[此处中间图片的线条相似。](https://play.google.com/store/apps/details?id=com.yc360.college.ucauraria#?t=W251bGwsMSwxLDIxMiwiY29tLnljMzYwLmNvbGxlZ2UudWNhdXJhcmlhIl0.)

创建地图的方法各不相同：

***画布绘图***

可以使用`onDraw()`绘制代表每个房间的矩形的方法来创建地图。缺点包括绘制的矩形数量以及可能的电池消耗。我也不知道如何使地图整体移动，所以每个矩形一起移动。实际上，将所有矩形绘制到一个图像上，然后移动图像。

***OpenGL***

与上述方法相同，但在 OpenGL 中这样做是为了消除部分电池消耗。同样的缺点也适用。

我面临的主要问题是找到和使用最有效的方法以及能够实现缩放和平移功能。

还有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:06:15.967

我没有其他选择可以建议，但由于我或多或少在我的应用程序中实现了相同的功能，我建议使用 OpenGL（通过[JOGL](http://jogamp.org/jogl/www/)）。在从多个图块渲染单个地图的情况下，您绘制一个图块，glTranslate 到相邻图块所在的位置并绘制下一个图块，等等。

滚动地图是通过在开始绘制图块之前将 glTranslate 放置在适当的偏移量来实现的。缩放是通过在 glTranslate 之后以适当的速率放置 glScale 来实现的。

当然，有等效的画布绘制命令，但我总是发现自己使用 OpenGL 实现这样的功能要容易一些。

# codeigniter - 如何在带有codeigniter的url中使用问号和冒号？

> ID：13013712
> 
> 赞同：0
> 
> 时间：2012-10-22T14:35:46.900
> 
> 标签：codeigniter

我正在尝试使用 codeigniter 打开该网址：

[http://example.com/controller/function/land-for-sale-6350-m2-40k-euro-is-that-too-much-?-ad-code:608/54990](http://example.com/controller/function/land-for-sale-6350-m2-40k-euro-is-that-too-much-?-ad-code:608/54990)

这是我遇到的错误：

不允许的关键字符：-ad-code:608/54990

$config['permitted_uri_chars'] = 'a-üöçşığzA-ÜÖÇŞİĞZ\', :/?0-9~%._+&*!-';

该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:37:01.193

查看您的配置文件（应用程序 > 配置 > config.php）

```
Line 129 - $config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

您可以在其中添加您需要的任何字符....但请谨慎操作

# iphone - 如何在 UITableView 后面添加 MKMapKit？就像 svpply 一样

> ID：13013716
> 
> 赞同：3
> 
> 时间：2012-10-22T14:36:07.610
> 
> 标签：iphone

![在此处输入图像描述](../Images/f3ca7c36575441a33017307cc643c243.png)

![在此处输入图像描述](../Images/400274d40887c93d04053b7e84ec6f74.png)

就像这样，cell 可以覆盖 MKMapView。当表格向下滚动时，可以触摸 MKMapView。

如何？特别感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:02:45.397

1.为表格视图添加标题视图，高度为320px，背景颜色清晰。

2.将MKMapView放在UITableView下。

3.覆盖表视图的hitTest:withEvent:

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    UIView *view = [super hitTest:point withEvent:event];
    if (view == self.tableHeaderView) {
        return nil;
    }
    return view;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:45:13.943

将您的图像放在背景中或至少在您的表格视图后面。然后将第一行的大小（或您喜欢的标题）设置为大的：可能是 350 像素。将 tableview 的 backgroundColor 设置为 [UIColor clearColor] 并将第一个单元格的 backgroundColor 设置为 [UIColor clearColor] 。您可能需要特别注意视图的 opaque 属性：tableView 和单元格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T21:56:32.087

这是 OpenThread 答案的 Swift 3 版本，但它不需要您向您的文件中添加标头`UITableView`- 只需对其进行子类化并添加以下内容：

```
class YourTableView: UITableView {

    override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
        let view = super.hitTest(point, with: event)

        if view is YourTableView {
            return nil
        }

        return view
    }

} 
```

# c++ - 数组错误 - 访问冲突读取位置 0xffffffff

> ID：13013717
> 
> 赞同：4
> 
> 时间：2012-10-22T14:36:15.737
> 
> 标签：c++, sse, simd

我以前使用 SIMD 运算符来提高我的代码效率，但是我现在面临一个我无法解决的新错误。对于这项任务，速度至关重要。

在导入数据之前，数组的大小是未知的，可能非常小（100 个值）或巨大（1000 万个值）。对于后一种情况，代码可以正常工作，但是当我使用少于 130036 个数组值时遇到错误。

有谁知道是什么导致了这个问题以及如何解决它？

我附上了所涉及的（经过测试的）代码，稍后将在更复杂的功能中使用。错误发生在“arg1List[i] = ...”

```
#include <iostream>
#include <xmmintrin.h>
#include <emmintrin.h>

void main()
{
    int j;
    const int loop = 130036;
    const int SIMDloop = (int)(loop/4);
    __m128 *arg1List = new __m128[SIMDloop];

    printf("sizeof(arg1List)= %d, alignof(Arg1List)= %d, pointer= %p", sizeof(arg1List), __alignof(arg1List), arg1List);
    std::cout << std::endl;

    for (int i = 0; i < SIMDloop; i++)
    {
        j = 4*i;
        arg1List[i] = _mm_set_ps((j+1)/100.0f, (j+2)/100.0f, (j+3)/100.0f, (j+4)/100.0f);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T14:56:59.760

对齐是原因。

> MOVAPS——移动对齐的压缩单精度浮点值
> 
> [...] 操作数必须在 16 字节边界上对齐，否则将生成通用保护异常 (#GP)。

对齐指针后，您可以看到问题消失了：

```
__m128 *arg1List = new __m128[SIMDloop + 1];
arg1List = (__m128*) (((int) arg1List + 15) & ~15); 
```

# java - 将单独类中的非静态方法调用到主程序

> ID：13013719
> 
> 赞同：-1
> 
> 时间：2012-10-22T14:36:21.890
> 
> 标签：java, methods, non-static

我有一个 Java 程序，其中有一个主类和另一个名为 Person 的类（它是一个“人”类），有 2 个方法。这些方法是非静态的，称为 getName 和 getAge，它们将这些信息存储在 ArrayList 的 person 元素中。
我如何在主程序中调用这些？我知道我必须声明该类的一个实例，但我仍然不确定如何实际执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:47:30.933

**将 Person 视为具有 2 种方法的类：**

```
 public class Person{

 private String mName;
 private int mAge;

 public Person(String name, String age){

     this.mName = name;
     this.mAge  = age;

  }

 //If you want this class to be Immutable please remove the setter methods()//

 public void setName(String name){

    this.mName = name;

 }

 public void setAge(String age){

    this.mAge = age;

 }

 public String getName(){

    return this.mName ;

 }

 public String getAge(){

    return this.mAge ;

 }

} 
```

**包含 main() 方法的类：**

```
 public class TestMain{

     public static ArrayList<Person> aList = new ArrayList<Person>();

       public static void main(String[] args){

           Person person1 = new Person("Vivek",26);
           Person person2 = new Person("Vicky",27);

           aList.add(person1);
           aList.add(person2);

       }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:37:28.343

在您的主代码中，您可以执行以下操作：

```
Person p = new Person();
p.setName("Jericho Jones");
p.setAge(153); 
```

当然，如果没有看到 Person 类，就无法准确判断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:38:07.630

您需要为此类实例化一个对象。

```
Person p = new Person();
p.getName().... 
```

# java - 如何在执行过程中清除取消执行繁重的 SQL？

> ID：13013725
> 
> 赞同：0
> 
> 时间：2012-10-22T14:36:43.513
> 
> 标签：java, sql, multithreading, jdbc

有两个执行线程，一个是通过 JDBC 连接并执行繁重查询的线程，如下所示：

```
Statement stmtData = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
ResultSet rsData = stmtData.executeQuery("SELECT * from hugeTable"); 
```

第二个是启动第一个提到的线程并且如果用户请求当然取消它，假设在 DBMS 执行查询的过程中可能需要很长时间。

我尝试在第二个线程中调用第一个线程的 interrupt() 方法，希望它会在第一个线程中抛出 InterruptedException，但它没有。

那么如何**快速干净**地取消查询的执行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:05:07.087

有几种方法可以做到这一点。我会使用连接池并让我的应用程序服务器来管理它，尽管 DataSource y 认为这是最常见的方法。

如果您仍想对其进行硬编码，您可以使用 apache BasicDataSource 和 . setMaxWait();

如果您仍然想快速而肮脏地尝试使用（不推荐，除了不推荐使用的方法）threadQuery.Stop();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:42:57.610

如果您的 jdbc 驱动程序支持取消，那么您可以使用 java.sql.Statement.cancel() 方法。线程需要捕获 InterruptedException，然后在正在执行的语句上调用 cancel()。

# javascript - 用于对 javascript 对象进行安全属性引用的库函数

> ID：13013726
> 
> 赞同：6
> 
> 时间：2012-10-22T14:36:59.627
> 
> 标签：javascript

考虑以下代码：

```
function foo(handlers) {
  callSomeFunction(handlers.onSuccess, handlers.onFailure);
} 
```

调用者可能会这样做：

```
foo({onSuccess: doSomething, onFailure: doSomethingElse }); 
```

或者只是

```
foo() 
```

如果她/他没有什么特别的事情要做。

上面代码的问题是，如果“处理程序”未定义，就像上面简单的 foo() 调用一样，那么在执行 callSomeFunction(handlers.onSuccess, handlers.onFailure) 期间将引发运行时异常。

为了处理这种情况，可以将 foo 函数重写为：

```
function foo(handlers) {
  var _handlers = handlers || {};
  callSomeFunction(_handlers.onSuccess, _handlers.onFailure);
} 
```

或更结构化

```
function safe(o) {
  return o === Object(o) ? o : {};
}

function foo(handlers) {
  callSomeFunction(safe(handlers).onSuccess, safe(handlers).onFailure);
} 
```

我试图在 sugarjs 和 underscore 等库中找到类似 safe() 函数的东西，但什么也没找到。我错过了什么？是否有任何其他具有类似功能的实用程序库？

只是尽量不重新发明轮子......;）

BR，阿德里安。

PS我没有测试上面的代码，所以它可能有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:26:47.817

jQuery 中有一些非常相似的东西，在处理插件开发时经常使用[jQuery.extend](http://api.jquery.com/jQuery.extend/)：

```
function foo(options){
    var defaults = {onSuccess: someFunction, onFailure: someOtherStuff}
    var options = $.extend({}, defaults, options); 
} 
```

在这种情况下，这是有意义的，因为用户可以提供任意选项子集，并且该函数会为函数调用中未提供的选项添加默认值。

# php - 添加 Zend_Controller_Router_Route 替换默认路由

> ID：13013727
> 
> 赞同：0
> 
> 时间：2012-10-22T14:37:05.753
> 
> 标签：php, zend-framework, zend-route

当我添加这条路线时

```
$classes_router = new Zend_Controller_Router_Route(
    '/:filter1/:filter2/*',
    array(
        'module'     => 'course',
        'controller' => $filter_controller,
        'action'     => 'index',
        'filter1'    => '',
        'filter2'    => ''
    )
); 
```

默认路由`:module/:controller/:action`不再起作用。请告诉我是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:16:25.287

问题是请求`somemodule/somecontroller/someaction`将与您添加的路由匹配（将在默认路由之前检查）。您需要在路由中提供一些限制来确定它匹配的内容，也许是通过限制`:filter1`变量的可能匹配：

```
$classes_router = new Zend_Controller_Router_Route(
    '/:filter1/:filter2/*',
    array(
        'module'     => 'course',
        'controller' => $filter_controller,
        'action'     => 'index',
        'filter1'    => '',
        'filter2'    => ''
    ), array(
        'filter1' => '(value1|foo|somethingelse)'
    )
); 
```

或添加静态前缀：

```
$classes_router = new Zend_Controller_Router_Route(
    '/filter/:filter1/:filter2/*',
    array(
        'module'     => 'course',
        'controller' => $filter_controller,
        'action'     => 'index',
        'filter1'    => '',
        'filter2'    => ''
    )
); 
```

# ios - 如何计算标签第二行的字符数？

> ID：13013731
> 
> 赞同：1
> 
> 时间：2012-10-22T14:37:10.760
> 
> 标签：ios, xcode

我之前问过[如何将整个单词放在第二行](https://stackoverflow.com/questions/13002134/label-in-two-rows)（自动换行）。现在我对以下事情感兴趣。例如，我有这个字符串：“Lorem ipsummmmmm long title”并且我为标签设置了“setLineBreakMode”，除了一件事之外一切都很好。有些词很长，让我们假设我的字符串“ipsummmmmm”中的那个词不能在第一行，它在第二行。现在我遇到了问题，因为我为整个标签设置了长度超过 27 个字符的字符串，问题是第一行中只有“Lorem”，而其他三个单词将在第二行中。

我的子字符串代码：

mainArticleTitleLabel.text = [finalMainArticleTitle stringByAppendingString:@"..."];

有没有办法计算和解决这个问题，因为我在某个地方得到了 @"..." 而在某个地方只有删减词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:11:14.637

我对如何做到这一点有一个想法，但这可能不是解决它的最快方法。

我的建议是将原始字符串分成一个单词数组。然后，您开始逐字重建字符串。添加一个词后，可以使用[sizeWithFont: constrainedToSize:] 方法，给标签宽度和一个很大的数字，即高度为10,000。一旦高度从 1 行跳到 2 行，那么您就知道第一行是什么。继续添加单词，直到你用完单词，或者打到第 3 行，然后你可以计算第 2 行的字符数。

我希望这可以解决您的问题，或者至少让您走上正轨。

# python - Python 中的 String.strip()

> ID：13013734
> 
> 赞同：47
> 
> 时间：2012-10-22T14:37:21.430
> 
> 标签：python, string, strip

在学习 python 时，我遇到了这段代码，它接受一个文本文件，将每一行拆分为一个数组，并将其插入到自定义字典中，其中 array[0] 是键，array[1] 是值：

```
my_dict = {}

infile = open("file.txt")
for line in infile:
    #line = line.strip() 
    #parts = [p.strip() for p in line.split("\t")]
    parts = [p for p in line.split("\t")]
    my_dict[parts[0]] = parts[1]
    print line

for key in my_dict:
    print "key: " + key + "\t" + "value " + my_dict[key] 
```

我在注释行时断时续地运行程序，得到了相同的结果。（当然用它下面的行替换第二个注释行）。在我看来，做一个 strip() 是可选的。把它留在里面是更好的做法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-22T14:40:31.477

如果您可以注释掉代码并且您的程序仍然有效，那么是的，该代码是可选的。

`.strip()`没有参数（或`None`作为第一个参数）删除开头和结尾的*所有*空格，包括空格、制表符、换行符和回车符。保留它不会造成任何伤害，并允许您的程序处理插入到文件中的意外额外空白。

例如，通过使用`.strip()`，文件中的以下两行将导致相同的最终结果：

```
 foo\tbar \n
foo\tbar\n 
```

我会说把它留在里面。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-22T14:40:44.207

在这种情况下，您可能会遇到一些差异。考虑如下一行：

```
"foo\tbar " 
```

在这种情况下，如果你`strip`，那么你会得到`{"foo":"bar"}`作为字典条目。如果你不剥离，你会得到`{"foo":"bar "}`（注意最后的额外空间）

请注意，如果您使用`line.split()`而不是`line.split('\t')`，您将在每个空白字符上进行拆分，并且“ `strip`ing”将在拆分过程中自动完成。换句话说：

```
line.strip().split() 
```

总是*等同*于：

```
line.split() 
```

但：

```
line.strip().split(delimiter) 
```

不一定等同于：

```
line.split(delimiter) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-22T14:43:05.730

`strip`什么都不做，只是删除字符串中的空格。如果要删除字符串前后多余的空白，可以使用条带。

可以说明这一点的示例字符串是：

```
In [2]: x = "something \t like     \t this"
In [4]: x.split('\t')
Out[4]: ['something ', ' like     ', ' this'] 
```

看，即使在拆分后`\t`，第一个和第二个项目中也有额外的空格，可以在代码中使用 strip 删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:41:17.893

不，最好将它们排除在外。

没有 strip()，你可以有空的键和值：

```
apples<tab>round, fruity things
oranges<tab>round, fruity things
bananas<tab> 
```

如果没有 strip()，bananas 会出现在字典中，但值是空字符串。使用 strip()，此代码将抛出异常，因为它剥离了香蕉线的制表符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T14:40:46.030

`strip`从字符串的开头和结尾删除空格。如果您想要空格，请不要调用 strip。

# c++ - C++字符串substr函数的索引问题

> ID：13013735
> 
> 赞同：0
> 
> 时间：2012-10-22T14:37:24.760
> 
> 标签：c++, string

> **可能重复：**
> [C++ string.substr() 函数问题](https://stackoverflow.com/questions/2477850/c-string-substr-function-problem)

```
string s = "0123456789";

cout<<s.substr(0,4)<<endl;

cout<<s.substr(4,7)<<endl; 
```

上述代码行的输出非常出乎意料，s.substr(0,4) 给了我“0123”，s.substr(4,7) 给了我“456789”。它只期望 "456" 。我在这里遗漏了什么吗，是否有任何替代 C++ 中的 substr 函数的方法，这在第二次调用时只会给我“456”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T14:38:34.427

的第二个参数`substr`是所需子字符串的长度，而不是结束索引。所以不是`s.substr(4,7)`，你想要`s.substr(4,3)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:39:12.367

`substr`采用初始位置和所需长度 - 请参见[此处](http://www.cplusplus.com/reference/string/string/substr/)。

试试`substr(4,3)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T14:39:16.693

的第二个参数`substr`是符号数，而不是您假设的结束索引。你应该使用`substr(4,3)`.

# jquery - 在 jQuery 中解析 CSV 选项值？

> ID：13013738
> 
> 赞同：0
> 
> 时间：2012-10-22T14:37:40.167
> 
> 标签：jquery, asp.net

我在字符串中有一个列表框选项的 CSV 值，我如何分别解析值和文本？

这是我的字符串：

```
[<option value=​"Employee_OID">​Portal EID​&lt;/option>​, <option value=​"EmpID">​Emp ID</option>​, <option value=​"Employee_Name">​Name​&lt;/option>​] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:48:15.910

如果这是您的整个字符串，您可以删除外部括号，然后在逗号上拆分以获取元素数组。然后，您可以将它们循环转换为 jQuery 对象并获取值/文本（您也可以使用常规 JS 来完成）

```
var data = '[<option value="Employee_OID">Portal EID</option>, <option value="EmpID">Emp ID</option>, <option value="Employee_Name">Name</option>]';​​​​​

data = data.replace('[','').replace(']','').split(',');

$.each(data,function(i,v){ // loop through each option
   console.log("Value = " + $(v).val()); // gets option value
   console.log("Text = " + $(v).text()); // gets option text
}); 
```

[http://jsfiddle.net/wirey00/W2dUb/](http://jsfiddle.net/wirey00/W2dUb/)

正如@Kevin 所说，您也可以使用正则表达式

```
data = data.replace(/(\[|\])/g,'').split(','); 
```

# php - Codeigniter - 会话数据库或会话 cookie 基准测试

> ID：13013744
> 
> 赞同：1
> 
> 时间：2012-10-22T14:37:53.833
> 
> 标签：php, database, codeigniter, session

您好，我想知道使用 db 的 codeigniter 会话是否比使用简单的 cookie 会话慢。

具体来说，我希望你们中的一些人指定使用 db 的会话的工作流程和使用 cookie 的会话的工作流程。

细节很重要，真的谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:45:54.613

使用数据库会话具有更好的安全性。但如果你愿意，你可以使用正常的会话..

# types - 获取 OCaml 类型的内部值

> ID：13013746
> 
> 赞同：3
> 
> 时间：2012-10-22T14:37:55.323
> 
> 标签：types, ocaml

我最近才开始编写 OCaml 代码，因此这可能是一个幼稚的问题。但我自己无法弄清楚。

我在 OCaml 中有以下类型声明。

```
type myType =
| Int of int 
```

现在我有一个 myType 类型的对象。

有没有办法访问这个对象持有的 int 值？如果是，如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T15:35:38.243

您想要的是`int`从联合类型的值中获取值。在 OCaml 中，我们经常使用模式匹配来分解和转换值：

```
let get_int v = 
    match v with 
    | Int i -> i 
```

当您在 OCaml 顶层尝试该功能时，您会得到如下信息：

```
# let v = Int 3;;
val v : myType = Int 3
# get_int v;;
- : int = 3 
```

如果您的联合类型有更多案例，您只需向`get_int`函数添加更多模式并以适当的方式处理它们。

对于像您的示例这样的单例联合，您可以直接对其值进行模式匹配：

```
# let (Int i) = v in i;;
- : int = 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:45:31.250

您可以使用模式匹配访问该值：

```
match value_of_my_type with
| Int i -> do_something_with i 
```

# ruby - 如何使用 Ruby（无 RoR）保持 mysql 连接（mysql2 gem）

> ID：13013748
> 
> 赞同：3
> 
> 时间：2012-10-22T14:37:56.553
> 
> 标签：ruby, rack, mysql2

我有一个使用 Rack 的非常简单的 Web 服务，没有 Rails，我将在每个有效连接上联系 MySQL。我想保持连接（例如在构造函数中），以便在每次请求时我都重用它。让我们这样说：

```
 class Service

    def initialize(dbhost, dbport, dbname, dbuser, dbpass)
      @client = Mysql2::Client.new(
          :host => dbhost, 
          :port => dbport, 
          :database => dbname,
          :username => dbuser, 
          :password => dbpass)
    end

    def call(env)
       # some logic that will call:
       results = _query(sql)
    end

    def _query(sql)
      results = @client.query(sql)
    end

  end

  Rack::Handler::Mongrel.run Service.new(DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASS), :Port => 8123 
```

使用上面的代码，该服务将获得一个 MySQL 连接，并在每个请求上进行查询。但是我如何确保如果连接断开，该`_query`方法将重新连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:36:55.060

好吧，`:reconnect => true`似乎可以确保连接保持不变。

```
 @client = Mysql2::Client.new(
      :host => dbhost, 
      :port => dbport, 
      :database => dbname,
      :username => dbuser, 
      :password => dbpass,
      :reconnect => true
      ) 
```

# algorithm - 如何重新索引稀疏关联数组

> ID：13013750
> 
> 赞同：0
> 
> 时间：2012-10-22T14:38:03.433
> 
> 标签：algorithm, pseudocode, sparse-matrix, reindex

首先，这个问题与特定语言无关——我使用 Haxe 来定位多个平台——所以伪代码就足够了。

这是我的问题：我有这种形式的[稀疏矩阵](http://www.cise.ufl.edu/research/sparse/matrices/)描述：

```
edges = 
[
1,1,2,1,3,1,4,1,
2,2,3,2,
3,3,4,3,5,3,
4,4,5,4,6,4,
5,5,6,5,7,5,25,5,27,5,28,5,29,5,30,5
]; 
```

这描述了边缘关联：

*   点 1 与点 1、2、3 和 4 相关联
*   第 2 点与第 2 点和第 3 点相关联
*   第 3 点与第 3、4 和 5 点相关联
*   第 4 点与第 4、5 和 6 点相关联
*   第 5 点与第 5、6、7、25、27、28、29 和 30 点相关联

现在我需要在 3D 中渲染它，为此，我需要将数据“压缩”到没有“间隙”的索引缓冲区中。用上面的例子说，我需要得到：

```
newEdges = 
[ 
1,2, 1, 3, 1, 4,
2,3,
3,4, 3,5,
4,5, 4,6,
5,6, 5,7, 5,8, 5,9, 5,10, 5,11, 5,12
] 
```

因此，必须删除连接自身的边缘（边缘 1-1、2-2、3-3 等）（简单）。

由于点顺序并不重要（边缘 1-2 = 边缘 2-1），我们还将删除重复的边缘（很容易）。

现在棘手的部分是消除“差距”：因为 7 是最高连续值，而 25 是紧随其后的值，所以 25 必须变为 8，27 必须变为 9，28 必须变为 10，依此类推。

现在我使用的是 BitmapData，在其中我将所有值绘制为 XY 坐标。然后我递归地将这个位图的非空垂直条纹（1像素宽的矩形）复制到一个临时位图中。然后我对水平条纹做同样的事情，最后扫描我的位图并将像素的 X 和 Y 值存储为边缘的 ID。

并且它有效！（至少它似乎是:)）但是开销很糟糕，并且取决于输入矩阵，我可能无法生成位图（例如，flash 限制为最大 4092 像素，JS 不很好地支持copyPixels）。

所以问题是你将如何在没有位图和语言特定方法的情况下进行这种“间隙消除”？

希望这足够明确，感谢您的关注。

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:11:37.410

由于您的矩阵是稀疏的，我建议您使用排序列表数据结构从边缘列表构建稀疏结构。对于每一行，您需要创建一个动态排序列表（升序），向其中添加边。例如，对于边，`(1,2)`您将`2`在排序列表中插入列`sorted_lists{1}`。对于每行的少量条目（几百个），最好使用排序列表中的**线性搜索**来完成，然后将较大的元素移动到列表的末尾。对于每行更多的条目，您可以使用二分法来找到正确的位置。我经常将这种方法用于*有限元方法*中出现的稀疏矩阵。根据我的经验，这是最快的方法，*并且*它可以简单地并行化！（在线程之间拆分行范围）

下面是一个实现排序列表的示例 MATLAB 代码：

```
function list = sorted_list_insert(list, col)

% special case for empty list
if isempty(list)
    list = col;
    return;
end

% search for col position in the row
% can be done with bisection,
% but linear search is much faster for small number of entries per row
it = 1;
while it<length(list) && list(it)<col
    it = it+1;
end

% duplicate entry - do not add
if list(it)==col
    return;
end

% insert col in proper position, move other elements in the list
list = [list(1:it) col list(it+1:end)];
end 
```

将一行中的所有条目添加到此排序列表的复杂度为`O(number of entries per row ^ 2)`.

接下来你要做的是检查你的边缘列表并添加列以正确的行排序列表（`sorted_lists{row}`）。在下面，`edges`假设是一个 2D 数组，其中`edges(1,i)`是列，并且`edges(2,i)`是行：

```
% find maximum row id
max_row = number of rows in the matrix

% initialize sorted list structures for all rows - max_row empty lists
sorted_lists = cell(max_row, 1);

% create sorted rows
nedges = total number of edges
for it=1:nedges
    row = edges(2,it);
    col = edges(1,it);
    sorted_lists{row} = sorted_list_insert(sorted_lists{row}, col);
end 
```

上述步骤的复杂度为`O(number of rows * number of entries per row ^ 2)`。

最后一件事是消除差距。对于已排序的列表，只需在已排序列表中查找 的位置即可轻松完成`col`。您还必须添加偏移量。从您的数据看来，您处理的是矩阵的上三角部分（您说边缘中节点的顺序无关紧要）。所以偏移量只是行号（在 MATLAB 中为-1，因为它具有基于 1 的编号）

```
% the positions of col in every row (plus offset)
% are the new col id with removed gaps
for it=1:nedges
    offset = edges(2,it)-1;
    edges(1,it) = offset + find(sorted_lists{edges(2,it)}==edges(1,it));
end 
```

这是`edges`使用上述代码进行处理后的样子：

```
edges =

Columns 1 through 13

 1     2     3     4     2     3     3     4     5     4     5     6     5
 1     1     1     1     2     2     3     3     3     4     4     4     5

Columns 14 through 20

 6     7     8     9    10    11    12
 5     5     5     5     5     5     5 
```

该过程适用于已排序和未排序的边缘。它只假设`col >= row`. 您可以轻松实现。您还可以轻松添加对角`(i,i)`边缘的删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:07:03.063

让`E[m+1][m+1]`是对应于 的二维邻接矩阵`edges`，其中点索引的范围是 [0..m]。

让是 中访问的点`f[n]`的排序数组。通过创建数组，我们在 [0..m] 范围内的非连续点索引和 [0..n-1] 范围内的连续点索引之间创建映射。`n``edges``f[n]`

创建一个新的邻接矩阵`G`如下：

```
for i = 0..(n-1)
    for j = 0..(n-1)    // or, j = (i+1)..(n-1) for upper triangular portion
        G[i][j] = E[f[i]][f[j]]
    end
end 
```

这只需要 O(n^2) 而不是 O(m^2) 时间。

编辑：删除`if`声明。如果 E 和 G 都初始化为全 0，则没有必要。

# visual-studio - Metro Icon - 如何服从用户主题？

> ID：13013753
> 
> 赞同：0
> 
> 时间：2012-10-22T14:38:08.780
> 
> 标签：visual-studio, microsoft-metro

我尝试将我的应用程序图标设置为具有透明背景（png），但是当它出现在开始屏幕上时，透明度现在是白色的。

我怎样才能使图标背景服从用户对平铺颜色的偏好？

# c++ - 为什么带有switch语句的函数不需要return

> ID：13013754
> 
> 赞同：2
> 
> 时间：2012-10-22T14:38:10.097
> 
> 标签：c++, visual-studio-2010, return, switch-statement

```
enum MyEnum
{
    A,
    B,
}

MyEnum Foo(int i)
{
    MyEnum mx;
    switch(i)
    {
    case 1:
        {
            mx = A;
        }break;
    case 2:
        {
            mx = B;
        }break;
    default:
        {
            throw std::exception("ERROR");
        }
    }
}

int Main()
{
    MyEnum myEnum = Foo(1);
    return 0;
} 
```

在 Foo() 中没有“return”，这段代码可以在 VS2010 中编译和运行。是编译器错误吗？

[VS2010截图](https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-snc6/281556_503323443019436_839943479_n.jpg "vs2010截图")确认可以运行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:39:34.597

这不是编译器错误。缺少的返回不需要编译器的诊断（但编译器可能会发出一个），它会导致**未定义的行为**- 任何事情都可能发生。

# javascript - 如何隐藏（和淡入）选定的选择？

> ID：13013756
> 
> 赞同：5
> 
> 时间：2012-10-22T14:38:12.053
> 
> 标签：javascript, jquery, jquery-chosen

我使用 Chosen 库 (http://harvesthq.github.com/chosen/) 作为 JQuery 插件来增强选择元素。我需要最初隐藏（然后淡入）选择，但下面的方法似乎不起作用。

```
<!doctype html> 
<html lang="en"> 
<head>
   <link rel="stylesheet" href="chosen/chosen.css" />
</head>
<body>
   <select id="firstChosenSelect" data-placeholder="Choose a Country..." style="width:350px;" tabindex="2">
      <option value=""></option> 
      <option value="United States">United States</option> 
      <option value="United Kingdom">United Kingdom</option> 
      <option value="Afghanistan">Afghanistan</option>
   </select>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
   <script src="chosen/chosen.jquery.js" type="text/javascript"></script>
   <script type="text/javascript">
     $('#firstChosenSelect').chosen();
     $('#firstChosenSelect').hide();
   </script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:41:03.677

将选择放入跨度并隐藏/显示跨度

**在 html 中**

```
<span id="spanForfirstChosenSelect" >
  <select id="firstChosenSelect" data-placeholder="Choose a Country..." style="width:350px;" tabindex="2">
      <option value=""></option> 
      <option value="United States">United States</option> 
      <option value="United Kingdom">United Kingdom</option> 
      <option value="Afghanistan">Afghanistan</option>
  </select>
</span> 
```

**在 JavaScript 中**

```
<scirpt type="text/javascript>    
     document.getElementById('spanForfirstChosenSelect').display = 'none';
</script> 
```

**在 jQuery 中**

```
<scirpt type="text/javascript>    
     $('spanForfirstChosenSelect').hide();
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T01:26:09.927

只需用 div 包装您的选择：

```
<div id="wrapper"><select id="firstChosenSelect">...</select></div> 
```

然后隐藏它一旦*选择*已完全实例化（使用`chosen:ready`）：

```
$('#firstChosenSelect').chosen();
$('#firstChosenSelect').on("chosen:ready", function(){
      $('#wrapper').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:47:08.640

首先用“display: none;”隐藏你的选择框 或“可见性：隐藏”

```
<select id="firstChosenSelect" data-placeholder="Choose a Country..." style="width:350px; display: none;" tabindex="2"> 
```

然后在加载内容时在选择框上使用 selected() 和 fadeIn() 函数。我会使用 jQuery 的 ondocument 就绪功能。

```
<script type="text/javascript">
  $(function(){ //run when content is loaded..
    $('#firstChosenSelect').chosen();
    $('#firstChosenSelect').fadeIn(400);
  });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:34:53.117

你可以意识到选择的插件在选择标签旁边创建。所以这应该足够了：

```
$('#firstChosenSelect').next().hide();
$('#firstChosenSelect').next().fadeIn(); 
```

再见;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:57:41.633

有很多未记录的选项和事件可供[选择](https://github.com/harvesthq/chosen)，因此必须阅读源代码才能找到它们。在这种情况下，问题是我们不知道选择何时完成构建样式选择框，因此我们需要利用自定义`liszt:ready`事件并使用一些 css 不透明度。

## css

```
<style>
    #firstChosenSelect,  /* the un-styled select box */
    .chzn-container      /* the styled chosen container that gets created later */
    {
      opacity:0
    }
</style> 
```

## javascript

我们绑定一个在事件发生时触发的函数。该函数将在 1000 毫秒内将不透明度设置为 1。然后使用 jquery 链接，只需`.chosen()`在之后立即调用元素。

```
<script>
  $('#firstChosenSelect').bind('liszt:ready', function(){
    $('.chzn-container').animate({
      opacity:1
    }, 1000);
  }).chosen(); 
</script> 
```

在 jQuery v1.7+ 中，我们也可以使用`.on()`

## [演示](http://jsbin.com/azapap/1/edit)

# php - 在 php 表中显示数据库中的图像

> ID：13013758
> 
> 赞同：2
> 
> 时间：2012-10-22T14:38:14.963
> 
> 标签：php, mysql

我有一个简单的表格，有人填写，然后是另一个表格，它运行查询以检索数据。

一直在玩弄在表单中包含图像上传的想法，然后让表格显示包含此图像的表单数据。

这是我的一些代码

```
 if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    $uname = $_POST['username'];
    $password = $_POST['password'];

    $uname = htmlspecialchars($uname);
    $password = htmlspecialchars($password);

    //==========================================
    //  CONNECT TO THE LOCAL DATABASE
    //==========================================
    $user_name = "xxxxxx";
    $pass_word = "xxxxxx";
    $database = "xxxxx";
    $server = "xxxxxx";

    $db_handle = mysql_connect($server, $user_name, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $SQL = "SELECT * FROM students WHERE L1 = '$uname' AND L2 = '" .md5 ($_POST['password'])."'";
        $result = mysql_query($SQL);
        $num_rows = mysql_num_rows($result);

    //====================================================
    //  CHECK TO SEE IF THE $result VARIABLE IS TRUE
    //====================================================

        if ($result) {
            if ($num_rows > 0) {
                $color="1";

$result = mysql_query("SELECT * FROM entry, students   WHERE entry.studentName = students.studentName AND students.L1='$uname' ") 
or die(mysql_error());  

echo "<p>You records as of ";
echo date('l jS \of F Y h:i:s A');
echo "<table border='1' cellpadding='2' cellspacing='0'>";
echo "<tr> <th>Date</th><th>Student Name</th> <th>Tutor name</th> <th>Procedure name</th> <th>Grade</th><th>Student Reflection</th><th>Tutor Comments</th><th>Professionalism</th> <th>Communication</th> <th>Alert</th> <th>Dispute</th><th>Username</th> <th>Image</th></tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {

if($color==1){
echo "<tr bgcolor= >
<td>".$row['date']."</td><td>".$row['studentName']."</td><td>".$row['tutorName']."</td><td>".$row['procedureName']."</td><td>".$row['grade']."</td><td>".$row['studentReflection']."</td><td>".$row['tutorComments']."</td><td>".$row['professionalism']."</td><td>".$row['communication']."</td><td>".$row['alert']."</td><td>".$row['dispute']."<td>".$row['L1']."</td></td>
<td><img src='images/".$row['studentImage']."'></td>;

</tr>";

// Set $color==2, for switching to other color
$color="2";
}

// When $color not equal 1, use this table row color
else {
echo "<tr bgcolor='#4eb557'>
<td>".$row['date']."</td><td>".$row['studentName']."</td><td>".$row['tutorName']."</td><td>".$row['procedureName']."</td><td>".$row['grade']."</td><td>".$row['studentReflection']."</td><td>".$row['tutorComments']."</td><td>".$row['professionalism']."</td><td>".$row['communication']."</td><td>".$row['alert']."</td><td>".$row['dispute']."<td>".$row['L1']."</td></td>
<td><img src='images/".$row['studentImage']."'></td>;
</tr>";
// Set $color back to 1
$color="1";
}

}
echo '</table>'; 
```

当结果回来时，我已经获取了除了图像之外的所有数据，图像只是显示为大量字符。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:48:34.193

你的表格有这个吗？

```
enctype=multipart/form-data 
```

在里面？如果不是，您将无法将图像作为文件上传。
确保您的表单至少看起来像这样：

```
<form method="post" action="URL_THINGY" enctype=multipart/form-data>
     (The rest of your form here)
<form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:51:37.690

如果您将图像内容存储在数据库中，然后使用 PHP 显示，您应该做两件事：

1.  在将其存储到数据库之前进行 base64 编码，因此数据不包含奇怪/错误的字符
2.  显示图像时，在您的 php 中回显它们并将文件头设置为图像：

```
header('Content-Type: image/png');

```

但正如一些人已经说过的，最好`generate`为您的图像随机命名，将其存储在一个文件夹中，并**仅**将图像的路径存储在您的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:52:45.710

由于您*需要*将图像存储在数据库中，因此这里有一个指向有同样问题的人的 SO[链接。](https://stackoverflow.com/questions/8758548/how-to-display-all-the-images-stored-inside-a-database)

# java - 从 Java/Android 中的字符串中删除下划线

> ID：13013759
> 
> 赞同：3
> 
> 时间：2012-10-22T14:38:19.643
> 
> 标签：java, android, string, underline, charsequence

我从editText获取文本输入并将其设置为通知.setTitle，但是当它显示在通知中时，它会在某些单词上显示有下划线。我不知道为什么，但是当我去测试它时，android键盘在它已经自动完成的单词下面加上了下划线。那么，删除它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:40:31.047

采用 ：

```
getText().toString() 
```

[如此处](https://stackoverflow.com/questions/5504433/how-to-remove-the-underline-from-the-edittext-field-in-android)所述

# javascript - 识别 KnockoutJS 中的属性更改事件？

> ID：13013761
> 
> 赞同：1
> 
> 时间：2012-10-22T14:38:26.407
> 
> 标签：javascript, knockout.js, dom-events, custom-attributes, knockout-2.0

有什么方法可以识别 KnockoutJS 中的属性更改事件吗？

我在 jQuery 中找到了解决方案： [Firing event on DOM attribute change](https://stackoverflow.com/questions/4561845/firing-event-on-dom-attribute-change) 。

但如果我能用 KO 就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:40:36.913

如果属性更改绑定到视图模型中的属性，那么您只需订阅该属性即可获得更改通知。

```
myViewModel.myProperty.subscribe(function(newValue) {
    alert("This property changed!!");
}); 
```

# image-processing - 视频中的对象分类（人类、动物、其他（汽车等））

> ID：13013764
> 
> 赞同：5
> 
> 时间：2012-10-22T14:38:34.033
> 
> 标签：image-processing, machine-learning, artificial-intelligence, computer-vision, object-detection

嗨，我是图像处理领域的新手。我的项目是对图像/视频中的对象进行分类。输入是来自监控摄像头的图像/视频。我应该将对象分为三类。1) 人类 2) 动物 3) 其他（汽车）。我们可以考虑一个固定的背景。

任何人都可以为此目的提出任何经过验证的算法或论文或开源代码吗？谷歌搜索是显而易见的解决方案，但经验丰富的眼睛总是有帮助的！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T14:45:56.063

出于您的目的，我认为最好的选择是[*LatSVM*](http://people.cs.uchicago.edu/~rbg/latent/)，因为作者将 MATLAB 中的实现和已经训练的检测器模型分开。已经训练好的模型包括：

*   飞机, 船, 巴士, 汽车, 自行车
*   奶瓶、电视、沙发
*   鸟, 猫, 马, 羊, 狗
*   *等等*

如果您需要，OpenCV 中也有一个实现（在这个[问题](https://stackoverflow.com/q/11832447/957997)中找到）。

**其他检测器实现**

*   [极速探测器](http://rodrigob.github.com/)
*   [偏最小二乘法](http://homepages.dcc.ufmg.br/~william/softwares.html)
*   [FPDW](http://vision.ucsd.edu/~pdollar/research.html)

* * *

看看行人检测中的以下调查：

1.  行人检测：最新技术评估（2012 年）。
2.  高级驾驶辅助系统行人检测调查 (2010)。

**最先进的**

*   *每秒 100 帧的行人检测*。这项工作由 [Benenson*等人提出。*, 2012] 以最先进的精度实现了高检测速度[[网页](http://rodrigob.github.com/)]。
*   *使用基于判别训练的基于部件的模型进行目标检测（*又名*LatSVM）*在 PASCAL 2006、2007 和 2008 上取得了良好的效果。这项工作不仅适用于行人检测，还适用于汽车、猫、马、沙发*等*。你真的应该看看这个[[网页](http://people.cs.uchicago.edu/~rbg/latent/)]
*   *使用偏最小二乘分析的人体检测*。[Schwartz *et al., 2009]*提出使用偏最小二乘分析，它允许处理高维空间特征。

**古典作品**

以下工作具有重要贡献，是行人检测每项工作的参考。HOG 特征、积分图像和拒绝级联被几部作品使用，包括 [Benenson*等人的作品。*, 2012]。

*   *用于人体检测的定向梯度直方图*
*   *使用方向梯度直方图的级联快速人体检测*

# android - 奇怪的 SQLiteException 并非在所有设备中

> ID：13013769
> 
> 赞同：6
> 
> 时间：2012-10-22T14:38:47.927
> 
> 标签：android, sqlite, exception, twitter4j

我有一个按钮，按下时会在 web 视图中打开 twitter 登录页面（作为活动）。我正在使用*twitter4j 版本 2.2.6*。问题是这样的——当我点击模拟器或我的三星 glaxy 2 时，它完全没有任何错误，但是当我点击我的*三星 Galaxy 3 GT-I9300*（和我朋友的同一部手机）上的按钮时，我得到以下异常：

> android.database.sqlite.SQLiteException: no such table: password: , while compile: SELECT username, password FROM password WHERE (host == ?) at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) at android.database。 sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:68) 位于 android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143) 位于 android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361) 位于 android.database。 sqlite.SQLiteProgram.(SQLiteProgram.java:127) 在 android.database.sqliteProgram.(SQLiteProgram.java:94) 在 android.database.sqlite.SQLiteQuery.(SQLiteQuery.java:53) 在 android.database.sqlite。 android.database 上的 SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)。sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1684) 在 android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1569) 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1525) 在 android.database .sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1605) 在 android.webkit.WebViewDatabase.getUsernamePassword(WebViewDatabase.java:990) 在 android.webkit.BrowserFrame.handleMessage(BrowserFrame.java:589) 在 android.os.Handler。 dispatchMessage(Handler.java:99) at android.os.Looper.loop(Looper.java:137) at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:950) at java.lang.Thread.run(Thread .java:856)SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1569) 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1525) 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1605) 在 android.webkit.WebViewDatabase .getUsernamePassword(WebViewDatabase.java:990) at android.webkit.BrowserFrame.handleMessage(BrowserFrame.java:589) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loop(Looper. java:137) 在 android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:950) 在 java.lang.Thread.run(Thread.java:856)SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1569) 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1525) 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1605) 在 android.webkit.WebViewDatabase .getUsernamePassword(WebViewDatabase.java:990) at android.webkit.BrowserFrame.handleMessage(BrowserFrame.java:589) at android.os.Handler.dispatchMessage(Handler.java:99) at android.os.Looper.loop(Looper. java:137) 在 android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:950) 在 java.lang.Thread.run(Thread.java:856)1605) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.webkit.BrowserFrame.handleMessage(BrowserFrame.java:589) 在 android.webkit.WebViewDatabase.getUsernamePassword(WebViewDatabase.java:990) 在 android. os.Looper.loop(Looper.java:137) 在 android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:950) 在 java.lang.Thread.run(Thread.java:856)1605) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.webkit.BrowserFrame.handleMessage(BrowserFrame.java:589) 在 android.webkit.WebViewDatabase.getUsernamePassword(WebViewDatabase.java:990) 在 android. os.Looper.loop(Looper.java:137) 在 android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:950) 在 java.lang.Thread.run(Thread.java:856)

webview 是一个活动（扩展活动）我在崩溃点有足够的可用空间：

> 总计- 12187213824 免费- 4315947008

我在崩溃时的配置：

```
FlipFont=0
compatScreenHeightDp=546
compatScreenWidthDp=320
compatSmallestScreenWidthDp=320
fontScale=0.93
hardKeyboardHidden=HARDKEYBOARDHIDDEN_YES
keyboard=KEYBOARD_NOKEYS
keyboardHidden=KEYBOARDHIDDEN_NO
locale=en_US
mcc=425
mnc=1
navigation=NAVIGATION_NONAV
navigationHidden=NAVIGATIONHIDDEN_YES
orientation=ORIENTATION_PORTRAIT
screenHeightDp=615
screenLayout=SCREENLAYOUT_SIZE_NORMAL+SCREENLAYOUT_LONG_YES
screenWidthDp=360
seq=46
smallestScreenWidthDp=360
textLayoutDirection=0
touchscreen=TOUCHSCREEN_FINGER
uiMode=UI_MODE_TYPE_NORMAL+UI_MODE_NIGHT_NO
userSetLocale=false 
```

设备特点：

```
android.hardware.wifi
android.hardware.location.network
android.hardware.nfc
android.hardware.location
android.hardware.sensor.gyroscope
android.hardware.screen.landscape
android.hardware.screen.portrait
android.hardware.wifi.direct
android.hardware.usb.accessory
android.hardware.bluetooth
android.hardware.touchscreen.multitouch.distinct
android.hardware.microphone
android.hardware.sensor.light
android.hardware.camera.autofocus
android.software.live_wallpaper
android.hardware.camera.flash
android.hardware.telephony
android.software.sip
android.hardware.touchscreen.multitouch.jazzhand
android.hardware.sensor.barometer
android.hardware.usb.host
android.hardware.touchscreen.multitouch
android.hardware.sensor.compass
android.hardware.faketouch
android.hardware.camera
com.sec.feature.minimode
android.software.sip.voip
android.hardware.sensor.proximity
android.hardware.location.gps
android.hardware.telephony.gsm
android.hardware.camera.front
com.nxp.mifare
android.hardware.touchscreen
android.hardware.sensor.accelerometer
glEsVersion = 2.0 
```

环境：

```
getAndroidSecureContainerDirectory=/mnt/asec
getCloudStorageDirectory=/mnt/sdcard/cloud
getCloudStorageDirectoryPath=/mnt/sdcard/cloud
getDataDirectory=/data
getDownloadCacheDirectory=/cache
getExternalStorageAndroidDataDir=/mnt/sdcard/Android/data
getExternalStorageDirectory=/mnt/sdcard
getExternalStorageDirectoryUsbHost=/mnt/sdcard/Storages/usb
getExternalStorageState=mounted
getRootDirectory=/system
getSecureDataDirectory=/data
getSystemSecureDirectory=/data/system
isEncryptedFilesystemEnabled=false
isExternalStorageEmulated=true
isExternalStorageRemovable=false 
```

权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.GET_TASKS"/> 
```

**在 webview 中，我没有进行任何 sqllite 事务或不涉及任何内容。**

**看我关于这条线的回答**↑

我不是*root*用户（意味着我有写权限）

涉及 webview 的代码是：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    try{
                    requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.twitter);
        mIntent = getIntent();
        String url = (String)mIntent.getExtras().get("URL");
        WebView webView = (WebView) findViewById(R.id.webview);

        WebSettings settings = webView.getSettings();

        settings.setDatabaseEnabled(true);
        settings.setDatabasePath("/data/data/"+getPackageName()+"/databases");
        settings.setDomStorageEnabled(true);

        settings.setJavaScriptEnabled(true);
        settings.setAllowFileAccess(true);
        settings.setSaveFormData(true);
        settings.setSavePassword(true);
            webView.setWebViewClient( new WebViewClient()
            {
                @Override
                public boolean shouldOverrideUrlLoading(WebView view, String url)
                {
                    ...
                    return false;
                }
            });
            webView.loadUrl(url);
         }catch(Exception e){
            e.printStackTrace();
         }

    }
    public void onExceededDatabaseQuota(String url, String 
            databaseIdentifier, long currentQuota, long estimatedSize, long 
            totalUsedQuota, WebStorage.QuotaUpdater quotaUpdater) { 

         quotaUpdater.updateQuota(204801); 
    } 
```

我发现这个链接有一些相似之处：

*   [SQLiteException：仅在 Motorola Plus 上没有这样的表？](https://stackoverflow.com/questions/12841537/sqliteexception-no-such-table-only-on-motorola-plus)
*   [Android WebView 抛出 SQLiteException](https://stackoverflow.com/questions/8663227/android-webview-throws-sqliteexception)
*   [SQLiteException - 仅在某些设备上发生](https://stackoverflow.com/questions/7196600/sqliteexception-only-happens-on-some-devices)
*   [http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html](http://www.anddev.org/networking-database-problems-f29/missing-table-in-sqlite-with-specific-version-of-desire-hd-t50364.html)

一个星期以来，我查看了太多线程，对此我感到非常沮丧

有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:13:55.527

事实证明，我在代码的其他地方有这两行：

```
context.deleteDatabase("webview.db");
context.deleteDatabase("webviewCache.db"); 
```

这条线应该清除我的 webview 的缓存，但是这条线只适用于以前的设备，在银河 3 和其他设备上，事实证明，webview 在启动时不会再次创建这个数据库，所以 sqlite 异常是因为它真的没有桌子......

需要小心-我写的那行是误导性的：

> “在 webview 中，我没有进行任何 sqllite 事务或不涉及任何内容”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:28:43.627

这种崩溃很难重现，但我得到了完全相同的异常（甚至提到“没有这样的表：密码”），我可以通过转到一个活动，然后到第二个活动，然后在一个 WebView 中打开一个 WebView 来重现它对话框，显示包含以下表单元素的 HTML：

```
<input type="password" name="pword" id="pword"> 
```

从该表单元素中删除它`type="password"`可以防止它崩溃。

WebView 尝试在 sqlite db 中保存密码以供以后使用。我不能肯定地说，但我想这对大多数开发人员来说是不可取的行为，所以如果你愿意，你可以通过在 WebView 的 WebSettings 实例上调用以下命令来关闭此功能：

```
myWebView.getSettings().setSavePassword(false); 
```

这个答案也可能对这个问题有所启发： [WebView 中的内存泄漏](https://stackoverflow.com/questions/3130654/memory-leak-in-webview/12614168#12614168)

他们指出了另一种解决方案，即：

```
webView = new WebView(getApplicationContext()); 
```

# angularjs - 如何使用 Jasmine 测试 AngularJS 服务？

> ID：13013772
> 
> 赞同：108
> 
> 时间：2012-10-22T14:38:49.153
> 
> 标签：angularjs, jasmine

（这里有一个相关的问题：[Jasmine test does not see AngularJS module](https://stackoverflow.com/questions/12938388/jasmine-test-does-not-see-angularjs-module)）

我只想在不引导 Angular 的情况下测试服务。

我看过一些示例和教程，但我不会去任何地方。

我只有三个文件：

*   myService.js：我在其中定义了一个 AngularJS 服务

*   test_myService.js：我在其中为服务定义了 Jasmine 测试。

*   specRunner.html：一个具有正常 jasmine 配置的 HTML 文件，我在其中导入了前两个其他文件以及 Jasmine、Angularjs 和 angular-mocks.js。

这是服务的代码（在我不测试时按预期工作）：

```
var myModule = angular.module('myModule', []);

myModule.factory('myService', function(){

    var serviceImplementation   = {};
    serviceImplementation.one   = 1;
    serviceImplementation.two   = 2;
    serviceImplementation.three = 3;

    return serviceImplementation

}); 
```

当我试图单独测试服务时，我应该能够访问它并检查他们的方法。我的问题是：如何在不引导 AngularJS 的情况下在我的测试中注入服务？

例如，如何使用 Jasmine 测试服务方法返回的值，如下所示：

```
describe('myService test', function(){
    describe('when I call myService.one', function(){
        it('returns 1', function(){
            myModule = angular.module('myModule');
                    //something is missing here..
            expect( myService.one ).toEqual(1);
        })

    })

}); 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-10-23T14:36:53.073

问题是在上面的示例中没有调用实例化服务的工厂方法（仅创建模块不会实例化服务）。

为了实例化服务，必须使用定义我们服务的模块调用[angular.injector 。](http://docs.angularjs.org/api/AUTO.$injector)然后，我们可以向服务的新注入器对象询问，并且只有在服务最终实例化时才需要它。

像这样的工作：

```
describe('myService test', function(){
    describe('when I call myService.one', function(){
        it('returns 1', function(){
            var $injector = angular.injector([ 'myModule' ]);
            var myService = $injector.get( 'myService' );
            expect( myService.one ).toEqual(1);
        })

    })

}); 
```

[另一种方法是使用“ invoke](http://docs.angularjs.org/api/angular.injector) ”将服务传递给函数：

```
describe('myService test', function(){
    describe('when I call myService.one', function(){
        it('returns 1', function(){

            myTestFunction = function(aService){
                expect( aService.one ).toEqual(1);
            }

            //we only need the following line if the name of the 
            //parameter in myTestFunction is not 'myService' or if
            //the code is going to be minify.
            myTestFunction.$inject = [ 'myService' ];

            var myInjector = angular.injector([ 'myModule' ]);
            myInjector.invoke( myTestFunction );
        })

    })

}); 
```

最后，“正确”的做法是在“ [beforeEach](http://pivotal.github.com/jasmine/) ”茉莉花块中使用“ [inject](http://docs.angularjs.org/api/ngMock/function/angular.mock.inject) ”和“ [module ”。](http://docs.angularjs.org/api/ngMock/function/angular.mock.module)这样做时，我们必须意识到“注入”函数不在标准的 angularjs 包中，而是在 ngMock 模块中，并且它仅适用于 jasmine。

```
describe('myService test', function(){
    describe('when I call myService.one', function(){
        beforeEach(module('myModule'));
        it('returns 1', inject(function(myService){ //parameter name = service name

            expect( myService.one ).toEqual(1);

        }))

    })

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-29T23:35:58.220

虽然上面的答案可能工作得很好（我还没有尝试过:)），但我经常有更多的测试要运行，所以我不会自己注入测试。我将 it() 案例分组到描述块中，并在每个描述块中的 beforeEach() 或 beforeAll() 中运行我的注入。

Robert 也是正确的，他说您必须使用 Angular $injector 来使测试了解服务或工厂。Angular 在你的应用程序中也使用这个注入器来告诉应用程序什么是可用的。但是，它可以在多个地方调用，也可以*隐式*调用而不是显式调用。您会在下面的示例规范测试文件中注意到，beforeEach() 块*隐式调用注入器*以使事物可以在测试内部分配。

回到对事物进行分组并使用前块，这里有一个小例子。我正在制作一个 Cat 服务并且我想对其进行测试，所以我编写和测试服务的简单设置如下所示：

**应用程序.js**

```
var catsApp = angular.module('catsApp', ['ngMockE2E']);

angular.module('catsApp.mocks', [])
.value('StaticCatsData', function() {
  return [{
    id: 1,
    title: "Commando",
    name: "Kitty MeowMeow",
    score: 123
  }, {
    id: 2,
    title: "Raw Deal",
    name: "Basketpaws",
    score: 17
  }, {
    id: 3,
    title: "Predator",
    name: "Noseboops",
    score: 184
  }];
});

catsApp.factory('LoggingService', ['$log', function($log) {

  // Private Helper: Object or String or what passed
    // for logging? Let's make it String-readable...
  function _parseStuffIntoMessage(stuff) {
    var message = "";
    if (typeof stuff !== "string") {
      message = JSON.stringify(stuff)
    } else {
      message = stuff;
    }

    return message;
  }

  /**
   * @summary
   * Write a log statement for debug or informational purposes.
   */
  var write = function(stuff) {
    var log_msg = _parseStuffIntoMessage(stuff);
    $log.log(log_msg);
  }

  /**
   * @summary
   * Write's an error out to the console.
   */
  var error = function(stuff) {
    var err_msg = _parseStuffIntoMessage(stuff);
    $log.error(err_msg);
  }

  return {
    error: error,
    write: write
  };

}])

catsApp.factory('CatsService', ['$http', 'LoggingService', function($http, Logging) {

  /*
    response:
      data, status, headers, config, statusText
  */
  var Success_Callback = function(response) {
    Logging.write("CatsService::getAllCats()::Success!");
    return {"status": status, "data": data};
  }

  var Error_Callback = function(response) {
    Logging.error("CatsService::getAllCats()::Error!");
    return {"status": status, "data": data};
  }

  var allCats = function() {
    console.log('# Cats.allCats()');
    return $http.get('/cats')
      .then(Success_Callback, Error_Callback);
  }

  return {
    getAllCats: allCats
  };

}]);

var CatsController = function(Cats, $scope) {

  var vm = this;

  vm.cats = [];

  // ========================

  /**
   * @summary
   * Initializes the controller.
   */
  vm.activate = function() {
    console.log('* CatsCtrl.activate()!');

    // Get ALL the cats!
    Cats.getAllCats().then(
      function(litter) {
        console.log('> ', litter);
        vm.cats = litter;
        console.log('>>> ', vm.cats);
      }  
    );
  }

  vm.activate();

}
CatsController.$inject = ['CatsService', '$scope'];
catsApp.controller('CatsCtrl', CatsController); 
```

**规格：猫控制器**

```
'use strict';

describe('Unit Tests: Cats Controller', function() {

    var $scope, $q, deferred, $controller, $rootScope, catsCtrl, mockCatsData, createCatsCtrl;

    beforeEach(module('catsApp'));
    beforeEach(module('catsApp.mocks'));

    var catsServiceMock;

    beforeEach(inject(function(_$q_, _$controller_, $injector, StaticCatsData) {
      $q = _$q_;
      $controller = _$controller_;

      deferred = $q.defer();

      mockCatsData = StaticCatsData();

      // ToDo:
        // Put catsServiceMock inside of module "catsApp.mocks" ?
      catsServiceMock = {
        getAllCats: function() {
          // Just give back the data we expect.
          deferred.resolve(mockCatsData);
          // Mock the Promise, too, so it can run
            // and call .then() as expected
          return deferred.promise;
        }
      };
    }));

    // Controller MOCK
    var createCatsController;
    // beforeEach(inject(function (_$rootScope_, $controller, FakeCatsService) {
    beforeEach(inject(function (_$rootScope_, $controller, CatsService) {

      $rootScope = _$rootScope_;

      $scope = $rootScope.$new();
      createCatsController = function() {
          return $controller('CatsCtrl', {
              '$scope': $scope,
              CatsService: catsServiceMock
          });    
      };
    }));

    // ==========================

    it('should have NO cats loaded at first', function() {
      catsCtrl = createCatsController();

      expect(catsCtrl.cats).toBeDefined();
      expect(catsCtrl.cats.length).toEqual(0);
    });

    it('should call "activate()" on load, but only once', function() {
      catsCtrl = createCatsController();
      spyOn(catsCtrl, 'activate').and.returnValue(mockCatsData);

      // *** For some reason, Auto-Executing init functions
      // aren't working for me in Plunkr?
      // I have to call it once manually instead of relying on
      // $scope creation to do it... Sorry, not sure why.
      catsCtrl.activate();
      $rootScope.$digest();   // ELSE ...then() does NOT resolve.

      expect(catsCtrl.activate).toBeDefined();
      expect(catsCtrl.activate).toHaveBeenCalled();
      expect(catsCtrl.activate.calls.count()).toEqual(1);

      // Test/Expect additional  conditions for 
        // "Yes, the controller was activated right!"
      // (A) - there is be cats
      expect(catsCtrl.cats.length).toBeGreaterThan(0);
    });

    // (B) - there is be cats SUCH THAT
      // can haz these properties...
    it('each cat will have a NAME, TITLE and SCORE', function() {
      catsCtrl = createCatsController();
      spyOn(catsCtrl, 'activate').and.returnValue(mockCatsData);

      // *** and again...
      catsCtrl.activate();
      $rootScope.$digest();   // ELSE ...then() does NOT resolve.

      var names = _.map(catsCtrl.cats, function(cat) { return cat.name; })
      var titles = _.map(catsCtrl.cats, function(cat) { return cat.title; })
      var scores = _.map(catsCtrl.cats, function(cat) { return cat.score; })

      expect(names.length).toEqual(3);
      expect(titles.length).toEqual(3);
      expect(scores.length).toEqual(3); 
    });

}); 
```

**规格：猫服务**

```
'use strict';

describe('Unit Tests: Cats Service', function() {

  var $scope, $rootScope, $log, cats, logging, $httpBackend, mockCatsData;

  beforeEach(module('catsApp'));
  beforeEach(module('catsApp.mocks'));

  describe('has a method: getAllCats() that', function() {

    beforeEach(inject(function($q, _$rootScope_, _$httpBackend_, _$log_, $injector, StaticCatsData) {
      cats = $injector.get('CatsService');
      $rootScope = _$rootScope_;
      $httpBackend = _$httpBackend_;

      // We don't want to test the resolving of *actual data*
      // in a unit test.
      // The "proper" place for that is in Integration Test, which
      // is basically a unit test that is less mocked - you test
      // the endpoints and responses and APIs instead of the
      // specific service behaviors.
      mockCatsData = StaticCatsData();

      // For handling Promises and deferrals in our Service calls...
      var deferred = $q.defer();
      deferred.resolve(mockCatsData); //  always resolved, you can do it from your spec

      // jasmine 2.0
        // Spy + Promise Mocking
        // spyOn(obj, 'method'), (assumes obj.method is a function)
      spyOn(cats, 'getAllCats').and.returnValue(deferred.promise);

      /*
        To mock $http as a dependency, use $httpBackend to
        setup HTTP calls and expectations.
      */
      $httpBackend.whenGET('/cats').respond(200, mockCatsData);
    }));

    afterEach(function() {
      $httpBackend.verifyNoOutstandingExpectation();
      $httpBackend.verifyNoOutstandingRequest();
    })

    it(' exists/is defined', function() {
      expect( cats.getAllCats ).toBeDefined();
      expect( typeof cats.getAllCats ).toEqual("function");
    });

    it(' returns an array of Cats, where each cat has a NAME, TITLE and SCORE', function() {
      cats.getAllCats().then(function(data) {
        var names = _.map(data, function(cat) { return cat.name; })
        var titles = _.map(data, function(cat) { return cat.title; })
        var scores = _.map(data, function(cat) { return cat.score; })

        expect(names.length).toEqual(3);
        expect(titles.length).toEqual(3);
        expect(scores.length).toEqual(3);
      })
    });

  })

  describe('has a method: getAllCats() that also logs', function() {

      var cats, $log, logging;

      beforeEach(inject(
        function(_$log_, $injector) {
          cats = $injector.get('CatsService');
          $log = _$log_;
          logging = $injector.get('LoggingService');

          spyOn(cats, 'getAllCats').and.callThrough();
        }
      ))

      it('that on SUCCESS, $logs to the console a success message', function() {
        cats.getAllCats().then(function(data) {
          expect(logging.write).toHaveBeenCalled();
          expect( $log.log.logs ).toContain(["CatsService::getAllCats()::Success!"]);
        })
      });

    })

}); 
```

**编辑** 根据一些评论，我已经将我的答案更新为稍微复杂一些，并且我还制作了一个 Plunkr 演示单元测试。具体来说，其中一条评论提到了“如果控制器的服务本身有一个简单的依赖项，例如 $log，该怎么办？” - 包含在测试用例的示例中。希望能帮助到你！测试或破解地球！！！

[https://embed.plnkr.co/aSPHnr/](https://embed.plnkr.co/aSPHnr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-22T18:55:09.407

我需要测试一个需要另一个指令[Google Places Autocomplete](https://github.com/kuhnza/angular-google-places-autocomplete)的指令，我正在讨论是否应该模拟它......无论如何，这不会为需要 gPlacesAutocomplete 的指令抛出任何错误。

```
describe('Test directives:', function() {
    beforeEach(module(...));
    beforeEach(module(...));
    beforeEach(function() {
        angular.module('google.places', [])
        .directive('gPlacesAutocomplete',function() {
            return {
                require: ['ngModel'],
                restrict: 'A',
                scope:{},
                controller: function() { return {}; }
             };
        });
     });
     beforeEach(module('google.places'));
}); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-03-11T01:36:37.477

如果你想测试一个控制器，你可以注入并测试它，如下所示。

```
describe('When access Controller', function () {
    beforeEach(module('app'));

    var $controller;

    beforeEach(inject(function (_$controller_) {
        // The injector unwraps the underscores (_) from around the parameter names when matching
        $controller = _$controller_;
    }));

    describe('$scope.objectState', function () {
        it('is saying hello', function () {
            var $scope = {};
            var controller = $controller('yourController', { $scope: $scope });
            expect($scope.objectState).toEqual('hello');
        });
    });
}); 
```

# asp.net - CSS 剪裁页面使页眉变小而页脚变大

> ID：13013773
> 
> 赞同：0
> 
> 时间：2012-10-22T14:38:52.163
> 
> 标签：asp.net, css

我最近更改了页面上的一些 CSS，它使主体变小而页脚变大，所以我试图删除布局中的页脚和 CSS，但没有运气。我已经经历了几次，似乎无法弄清楚。任何建议让我知道。

_Layout.cshtml

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.7.1.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")"></script>
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("ARPP Razor", "Index", "Home")</p>
            </div>
            <div class="float-right">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
            </div>
                <nav>

                   <ul>
                        @*<li>@Html.ActionLink("Home", "Index", "Home")</li>*@
                        <li><a href="#">ARPP</a>
                            <ul>
                                <li>@Html.ActionLink("Genes", "Genes", "Home")</li>
                                <li>@Html.ActionLink("Clones","Clones","Home")</li>
                            </ul>
                        </li>
                        <li><a href="#">File Management</a>
                            <ul>
                            <li>@Html.ActionLink("Upload", "Upload", "FileManagement")</li>
                            <li>@Html.ActionLink("Create File", "CreateFile", "FileManagement")</li>
                            <li>@Html.ActionLink("File to Fasta", "FileToFasta", "FileManagement")</li>
                            </ul>
                        </li>
                    </ul>
                </nav>

        </div>
    </header>
    <div id="body">

        <section class="content-wrapper main-content clear-fix">
            @RenderBody()
        </section>
    </div>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

和 site.css

```
nav {
margin: 20px auto; 
text-align: center;
}

nav ul ul {
display: none;
}

nav ul li:hover > ul {
    display: block;
}

nav ul {
background: #efefef; 
background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
padding: 0 0px;
border-radius: 100px;  
list-style: none;
position: relative;
display: inline-table;
}
nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul li {
    float: left;
}
    nav ul li:hover {
        background: #4b545f;
        background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
    }
        nav ul li:hover a {
            color: #fff;
        }

    nav ul li a {
        display: block; padding: 25px 40px;
        color: #757575; text-decoration: none;
    }

nav ul ul {
    background: #5f6975; border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}
    nav ul ul li {
        float: none; 
        border-top: 1px solid #6b727c;
        border-bottom: 1px solid #575f6a; position: relative;
    }
        nav ul ul li a {
            padding: 15px 40px;
            color: #fff;
        }   
            nav ul ul li a:hover {
                background: #4b545f;
            }

nav ul ul ul {
    position: absolute; left: 100%; top:0;
}

/* tables
----------------------------------------------------------*/
table {
border-collapse: collapse;
border-spacing: 0;
margin-top: 0.75em;
border: 0 none;
}

th {
font-size: 1.2em;
text-align: left;
border: none 0px;
padding-left: 0;
}

th a {
    display: block;
    position: relative;
}

th a:link, th a:visited, th a:active, th a:hover {
    color: #333;
    font-weight: 600;
    text-decoration: none;
    padding: 0;
}

th a:hover {
    color: #000;
}

th.asc a, th.desc a {
    margin-right: .75em;
}

th.asc a:after, th.desc a:after {
    display: block;
    position: absolute;
    right: 0em;
    top: 0;
    font-size: 0.75em;
}

th.asc a:after {
    content: '▲';
}

th.desc a:after {
    content: '▼';
}

td {
padding: 0.25em 2em 0.25em 0em;
border: 0 none;
}

tr.pager td {
padding: 0 0.25em 0 0;
}

aside {
float: right;
width: 25%;
}

aside ul {
    list-style: none;
    padding: 0;
}

    aside ul li {
        background: url("../Images/bullet.png") no-repeat 0 50%;
        padding: 2px 0 2px 20px;
    }

.label {
font-weight: 700;
}

/* login page */
#loginForm {
border-right: solid 2px #c8c8c8;
float: left;
width: 55%;
}

#loginForm .validation-error {
    display: block;
    margin-left: 15px;
}

#loginForm .validation-summary-errors ul {
    margin: 0;
    padding: 0;
}

#loginForm .validation-summary-errors li {
    display: inline;
    list-style: none;
    margin: 0;
}

#loginForm input {
    width: 250px;
}

#loginForm input[type="checkbox"],
#loginForm input[type="submit"],
#loginForm input[type="button"],
#loginForm button {
    width: auto;
}

#socialLoginForm {
margin-left: 40px;
float: left;
width: 40%;
}

#socialLoginForm h2 {
    margin-bottom:  5px;
}

#socialLoginList button {
margin-bottom: 12px;
}

#logoutForm {
display: inline;
}

/* contact */
.contact h3 {
font-size: 1.2em;
}

.contact p {
margin: 5px 0 0 10px;
}

.contact iframe {
border: 1px solid #333;
margin: 5px 0 0 10px;
}

/* forms */
fieldset {
border: none;
margin: 0;
padding: 0;
}

fieldset legend {
    display: none;
}

fieldset ol {
    padding: 0;
    list-style: none;
}

    fieldset ol li {
        padding-bottom: 5px;
    }

label {
display: block;
font-size: 1.2em;
font-weight: 600;
}

label.checkbox {
display: inline;
}

input, textarea {
border: 1px solid #e2e2e2;
background: #fff;
color: #333;
font-size: 1.2em;
margin: 5px 0 6px 0;
padding: 5px;
width: 300px;
}

textarea {
font-family: inherit;
width: 500px;
}

input:focus, textarea:focus {
    border: 1px solid #7ac0da;
}

input[type="checkbox"] {
    background: transparent;
    border: inherit;
    width: auto;
}

input[type="submit"],
input[type="button"],
button {
    background-color: #d3dce0;
    border: 1px solid #787878;
    cursor: pointer;
    font-size: 1.2em;
    font-weight: 600;
    padding: 7px;
    margin-right: 8px;
    width: auto;
}

td input[type="submit"],
td input[type="button"],
td button {
    font-size: 1em;
    padding: 4px;
    margin-right: 4px;
}

/* info and errors */
.message-info {
border: 1px solid;
clear: both;
padding: 10px 20px;
}

.message-error {
clear: both;
color: #e80c4d;
font-size: 1.1em;
font-weight: bold;
margin: 20px 0 10px 0;
}

.message-success {
color: #7ac0da;
font-size: 1.3em;
font-weight: bold;
margin: 20px 0 10px 0;
}

.error {
color: #e80c4d;
}

/* styles for validation helpers */
.field-validation-error {
color: #e80c4d;
font-weight: bold;
}

.field-validation-valid {
display: none;
}

input.input-validation-error {
border: 1px solid #e80c4d;
}

input[type="checkbox"].input-validation-error {
border: 0 none;
}

.validation-summary-errors {
color: #e80c4d;
font-weight: bold;
font-size: 1.1em;
}

.validation-summary-valid {
display: none;
}

/* content */
article {
float: left;
width: 70%;
}

/* page elements
----------------------------------------------------------*/
/* featured 
.featured {
background-color: #fff;
}

.featured .content-wrapper {
    background-color: #7ac0da;
    background-image: -ms-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
    background-image: -o-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
    background-image: -webkit-gradient(linear, left top, right top, color-stop(0,    #7ac0da), color-stop(1, #a4d4e6));
    background-image: -webkit-linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
    background-image: linear-gradient(left, #7ac0da 0%, #a4d4e6 100%);
    color: #3e5667;
    padding: 20px 40px 30px 40px;
}

    .featured hgroup.title h1, .featured hgroup.title h2 {
        color: #fff;
    }

    .featured p {
        font-size: 1.1em;
    }

 /* page titles */
hgroup.title {
margin-bottom: 10px;
}

hgroup.title h1, hgroup.title h2 {
display: inline;
}

hgroup.title h2 {
font-weight: normal;
margin-left: 3px;
}

/* features 
section.feature {
width: 300px;
float: left;
padding: 10px;
}

/* login
----------------------------------------------------------*/
#login {
display: block;
font-size: .85em;
margin: 0 0 10px;
text-align: right;
}

#login a {
    background-color: #d3dce0;
    margin-left: 10px;
    margin-right: 3px;
    padding: 2px 3px;
    text-decoration: none;
}

#login a.username {
    background: none;
    margin: 0;
    padding: 0;
    text-decoration: underline;
}

#login ul {
    margin: 0;
}

#login li {
    display: inline;
    list-style: none;
}
/* main layout
----------------------------------------------------------*/
.content-wrapper {
margin: 0 auto;
max-width: 960px;
}

#body {
background-color: #efeeef;
clear: both;
padding-bottom: 0px;
}

.main-content {
    background: url("../Images/accent.png") no-repeat;
    padding-left: 10px;
    padding-top: 30px;
}

.featured + .main-content {
    background: url("../Images/heroAccent.png") no-repeat;
}

footer {
clear: both;
background-color: #e2e2e2;
font-size: .8em;
height: 100px;
}

/* site title
----------------------------------------------------------*/
.site-title {
color: #c8c8c8;
font-family: Rockwell, Consolas, "Courier New", Courier, monospace;
font-size: 2.3em;
margin: 0;
}

.site-title a, .site-title a:hover, .site-title a:active {
background: none;
color: #c8c8c8;
outline: none;
text-decoration: none;
}

.webGrid {margin: 4px; border-collapse: collapse; width: 300px;}
.header {background-color: #E8E8E8; font-weight: bold; color: #FFF;}
.webGrid th. .webGrid td {border: 1px solid #C0C0C0; padding: 5px;}
.alt{background-color: #E8E8E8; color: #000;}
.person{ width:200px; font-weight:bold;} 

html {
background-color: #e2e2e2;
margin: 0;
padding: 0;
}

.spacing{
height: 20px;
}

body {
background-color: #fff;
border-top: solid 10px #000;
color: #333;
font-size: .85em;
font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
margin: 0;
padding: 0;
}

a {
color: #333;
outline: none;
padding-left: 3px;
padding-right: 3px;
text-decoration: underline;
}

a:link, a:visited,
a:active, a:hover {
    color: #333;
}

a:hover {
    background-color: #c7d1d6;
}

header, footer, hgroup,
nav, section {
display: block;
}

mark {
background-color: #a6dbed;
padding-left: 5px;
padding-right: 5px;
}

.float-left {
float: left;
}

.float-right {
float: right;
}

.clear-fix:after {
content: ".";
clear: both;
display: block;
height: 0;
visibility: hidden;
}

h1, h2, h3,
h4, h5, h6 {
color: #000;
margin-bottom: 0;
padding-bottom: 0;
}

h1 {
font-size: 2em;
}

h2 {
font-size: 1.75em;
}

h3 {
font-size: 1.2em;
}

h4 {
font-size: 1.1em;
}

h5, h6 {
font-size: 1em;
}

h5 a:link, h5 a:visited, h5 a:active {
    padding: 0;
    text-decoration: none;
} 
```

非常感谢对我的 CSS 文件进行任何更改以使正文大小正常且页脚变小。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:17:16.420

看起来您没有使用`<footer>`元素来分隔您网站的页脚。如果你这样做了，定义专门应用于页脚内容的新 CSS 样式将是微不足道的。

# qt - PyQt 更新 QLabel

> ID：13013775
> 
> 赞同：2
> 
> 时间：2012-10-22T14:38:56.850
> 
> 标签：qt, pyqt

我有一个 QLabel，我用这样的新 .text 动态更新

```
self.ui.mylabel.text = 'foobar' 
```

问题是之后它不会更新窗口上的新值。

我尝试调用`self.app.processEvents()`甚至更新标签本身`self.ui.mylabel.update()`，`self.ui.mylabel.repaint()`但无济于事。

如何让 QLabel 小部件反映更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:52:28.683

我做错了。调用`self.ui.mylabel.setText('foobar')`而不是直接访问该属性完成了这项工作。

# spring - 将 webapp 内部的 Spring 上下文连接到外部

> ID：13013776
> 
> 赞同：0
> 
> 时间：2012-10-22T14:38:56.597
> 
> 标签：spring

我有一个嵌入 tomcat 的应用程序，在嵌入式 tomcat 中，启动一个 webapp，在 webapp 中，有一个 spring 上下文。

我想将 bean 的配置从应用程序传递到 webapp 内的代码，并且，如果可能的话，我想避免 JNDI 陷入困境。所以，我想知道，有没有办法让 ContextLoaderListener 连接到“外部”上下文？如果做不到这一点，我可以通过在应用程序的类加载器中加载的类中的静态字段来传递引用，然后继承到 webapp 的类加载器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:38:34.887

如果它只是来自外部 bean 的配置，您可能可以注册一个新的[PropertySource](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)，它将拉入配置，Spring 提供了一个很好的[Resource](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/resources.html) 抽象，您也可以使用它来拉入配置甚至拉入整个上下文信息。

# c#-4.0 - 静态字典如何具有圈复杂度？

> ID：13013780
> 
> 赞同：4
> 
> 时间：2012-10-22T14:39:00.523
> 
> 标签：c#-4.0, cyclomatic-complexity

我有以下课程：

```
public static class MyClass
{
    private static readonly Dictionary<Type, Func<string, object>> valueTypes;

    static MyClass()
    {
        var dictionary = new Dictionary<Type, Func<string, object>>();
        dictionary.Add(typeof(bool), x => bool.Parse(x));
        dictionary.Add(typeof(byte), x => byte.Parse(x));
        dictionary.Add(typeof(char), x => char.Parse(x));
        dictionary.Add(typeof(decimal), x => decimal.Parse(x));
        dictionary.Add(typeof(double), x => double.Parse(x));
        dictionary.Add(typeof(float), x => float.Parse(x));
        dictionary.Add(typeof(int), x => int.Parse(x));
        dictionary.Add(typeof(long), x => long.Parse(x));
        dictionary.Add(typeof(sbyte), x => sbyte.Parse(x));
        dictionary.Add(typeof(short), x => short.Parse(x));
        dictionary.Add(typeof(uint), x => uint.Parse(x));
        dictionary.Add(typeof(ulong), x => ulong.Parse(x));
        dictionary.Add(typeof(ushort), x => ushort.Parse(x));
        MyClass.valueTypes = dictionary;
    }
} 
```

但是，Microsoft 代码分析将此标记为具有 27 的圈复杂度。我不明白为什么一系列带有委托的 Add 调用会导致如此高的圈复杂度。

我能做些什么来降低圈复杂度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:51:40.463

我喜欢 CC 的这个定义—— `the amount of decision logic in a source code function`（参见“[代码度量 – 圈复杂度](http://blogs.msdn.com/b/zainnab/archive/2011/05/17/code-metrics-cyclomatic-complexity.aspx)”的更多信息，还有一个很好的例子，CC 是如何计算的）。

因此，由于每个`Add()`都有两个不同的代码路径 -`Add()`自身和`Value`函数，所以`CC+=2`. 既然你放了`Add()`13 次——`CC ==`至少`26`。而关于 MSDN 最小 CC 是`2`，当它增加时，它从 1 开始增加，所以你最终得到 27 :) 在字典值中有一个匿名方法会增加复杂性，因为它可能会引发异常，因此应该通过测试作为好。

[代码度量值，MSDN](http://msdn.microsoft.com/en-us/library/bb385914.aspx)：

> 圈复杂度——衡量代码的结构复杂度。它是通过计算程序流中不同代码路径的数量来创建的。具有复杂控制流的程序将需要更多测试才能实现良好的代码覆盖率，并且可维护性较差。

* * *

感兴趣的是检查这些示例的 CC 是什么：

```
private static readonly Dictionary<Type, Func<string, object>> valueTypes
static MyClass()     
{         
    var dictionary = new Dictionary<Type, Func<string, object>>();         
    dictionary.Add(typeof(bool), x => bool.Parse(x)); 
}

static MyClass()     
{         
    var dictionary = new Dictionary<Type, Func<string, object>>();         
    Func<string, object> func = (x) => bool.Parse(x)
    dictionary.Add(typeof(bool), func); 
}

static MyClass()     
{         
    var dictionary = new Dictionary<Type, Func<string, object>>();         
    dictionary.Add(typeof(bool), null); 
} 
```

# python - 如何在 matplotlib 图中的特定区域上绘制矩形

> ID：13013781
> 
> 赞同：42
> 
> 时间：2012-10-22T14:39:00.767
> 
> 标签：python, matplotlib

我有一个图表，根据一些数据计算，在 matplotlib 中绘制。我想在该图的全局最大值周围绘制一个矩形区域。我试过`plt.axhspan,`了，但是当我打电话时矩形似乎没有出现`plt.show()`

那么，如何将矩形区域绘制到 matplotlib 图上呢？谢谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-22T15:32:12.377

最可能的原因是您在调用 axhspan 时为 x 参数使用了数据单位。从[函数的文档](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.axhspan.html)（我的重点）：

> y 坐标以数据单位为单位，*x 坐标以轴（相对 0-1）单位为单位*。

因此，任何从 0 向左或从 1 向右拉伸的矩形都只是在绘图之外绘制。

一个简单的替代方法可能是将 a 添加[`Rectangle`](http://matplotlib.org/api/artist_api.html#matplotlib.patches.Rectangle)到您的轴（例如，通过[`plt.gca`](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.gca.html)和 [`add_patch`](http://matplotlib.org/api/axes_api.html)）；`Rectangle`对两个维度都使用数据单元。以下将添加一个以 (2,3) 为中心的宽度和高度为 1 的灰色矩形：

```
from matplotlib.patches import Rectangle
import matplotlib.pyplot as plt

fig = plt.figure()
plt.xlim(0, 10)
plt.ylim(0, 12)

someX, someY = 2, 5
currentAxis = plt.gca()
currentAxis.add_patch(Rectangle((someX - .5, someY - .5), 4, 6, facecolor="grey")) 
```

[![在此处输入图像描述](../Images/e11125176220029f93a795e9b444816e.png)](https://i.stack.imgur.com/TAf4C.png)

*   没有`facecolor`

```
currentAxis.add_patch(Rectangle((someX - .5, someY - .5), 4, 6, facecolor="none", ec='k', lw=2)) 
```

[![在此处输入图像描述](../Images/1fcea37bcb3227fc3ecf49036848d888.png)](https://i.stack.imgur.com/vAOkh.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-11-09T09:09:12.557

这是一个演示在散点图上绘制矩形边界框的示例：

```
import matplotlib.pyplot as plt
import matplotlib.patches as patches
import numpy as np

data = np.array([
    [.9, .9], [.85, 2.1], [1.2, 1.], [2.1, .95], [3., 1.1],
    [3.9, .7], [4., 1.4], [4.2, 1.8], [2., 2.3], [3., 2.3],
    [1.5, 1.8], [2., 1.5], [2.2, 2.], [2.6, 1.7], [2.7, 1.85]
])
categories = np.array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1])
color1 = (0.69, 0.34, 0.15, 1.0)
color2 = (0.65, 0.80, 0.89, 1.0)
colormap = np.array([color1, color2])
fig = plt.figure()
ax = fig.add_subplot(111)
ax.scatter(
    x=[data[:, 0]],
    y=[data[:, 1]],
    c=colormap[categories],
    marker='o', alpha=0.9)

margin = .1
min_f0, max_f0 = min(data[10:, 0]) - margin, max(data[10:, 0]) + margin
min_f1, max_f1 = min(data[10:, 1]) - margin, max(data[10:, 1]) + margin
width = max_f0 - min_f0
height = max_f1 - min_f1

ax.add_patch(
    patches.Rectangle(
        xy=(min_f0, min_f1),  # point of origin.
        width=width, height=height, linewidth=1,
        color='red', fill=False))
plt.show() 
```

出去：

[![在散点图上添加边界框](../Images/cad10a9c324603d5b347d003e5fdda6b.png)](https://i.stack.imgur.com/mWow9.png)

# splunk - 向下钻取表格 - 用于显示的字段

> ID：13013782
> 
> 赞同：0
> 
> 时间：2012-10-22T14:39:03.740
> 
> 标签：splunk

我创建了一个仪表板，其中包含一个汇总表，我希望对其进行深入研究，以深入显示与该汇总记录相关的事件的第二个表。

我有向下钻取工作并显示所需的行，但是它显示的是该事件的所有字段，而不是我设置的特定字段。如果我通过搜索应用程序自行运行搜索查询，或者在仪表板上单独运行搜索查询，它会显示相应的字段。

这是宏搜索代码

```
source="MySource" EventClass="MyStep" $Transaction$ | dedup StepName | convert ctime(_time) as Date| table StepName, Date, EventStatus, Timing. 
```

这是仪表板的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<view refresh="900" template="dashboard.html">
    <label>Synthetics Dashboard</label>
    <module name="AccountBar" layoutPanel="appHeader" />
    <module name="AppBar" layoutPanel="navigationHeader" />
    <module name="Message" layoutPanel="messaging">
        <param name="filter">*</param>
        <param name="clearOnJobDispatch">False</param>
        <param name="maxSize">1</param>
    </module>
    <module name="HiddenSearch" layoutPanel="panel_row1_col1" group="Sythetic Transaction Recent Status" autoRun="True">
        <param name="search">
            synthetics_transactionStatus(SyntheticTransaction)</param>
        <module name="SimpleResultsTable">
            <param name="displayRowNumbers">off</param>
            <param name="drilldown">row</param>
            <module name="HiddenSearch" layoutPanel="panel_row2_col1" group="Login Timing Last 4hrs">
                <param name="search">synthetics_transactionSteps($Transaction$)</param>
                <module name="ConvertToIntention">
                    <param name="intention">
                        <param name="name">stringreplace</param>
                        <param name="arg">
                            <param name="Transaction">
                                <param name="value">$click.value$</param>
                            </param>
                        </param>
                    </param>
                    <module name="ConvertToDrilldownSearch">
                        <module name="SimpleResultsTable">
                            <param name="displayRowNumbers">off</param>
                            <param name="drilldown">row</param>
                        </module>
                    </module>
                </module>
            </module>
        </module>
    </module>
</view> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:28:45.037

我终于找到了解决这个问题的方法，我必须在第二个 SimpleResultsTable 模块中明确指定字段，例如

```
<module name="SimpleResultsTable">
<param name="fields">StepName, Date, EventSeverity, Timing</param>
<param name="displayRowNumbers">off</param>
<param name="drilldown">row</param>... 
```

# css - 使用 Twitter Bootstrap 将右侧内容移至左侧

> ID：13013789
> 
> 赞同：2
> 
> 时间：2012-10-22T14:39:16.833
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 框架来布局我的页面。我有这个内容：

```
<div class="clearfix row">
   <div class="span4">..</div>
   <div class="span4">..</div>
   <div class="span4">Right Content</div>
</div> 
```

我要做的是在电话视图中将标记为“正确内容”的内容移动到其他内容之上。我知道不使用 JavaScript 的复杂性，但有没有办法在 Twitter Bootstrap 中通过 CSS 或 JS 做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:59:45.997

这就是您想要做的，假设您在一行 div 中只有三列。

```
<div class="container">
    <div class="row">
        <div class="span4 pull-right">Right Content</div>
        <div class="span4">..</div>
        <div class="span4">..</div>
    </div>
</div> 
```

[在此处](http://codepen.io/peiche/pen/Dmfsx)查看我的示例。

# django - Django paypal ipn 标准付款人地址

> ID：13013791
> 
> 赞同：1
> 
> 时间：2012-10-22T14:39:25.663
> 
> 标签：django, django-paypal

我正在使用 django-paypal 的 DCramer 分支：[https ://github.com/dcramer/django-paypal](https://github.com/dcramer/django-paypal)

我正在使用 IPN 标准

我想做的是从 IPN 获取付款人（客户）地址。我可以从 paypal 文档中看到此信息是通过 IPN 发送的，并且通过查看 django-paypal，数据库中有用于存储此数据的字段。但是，此数据并未存储在 django-paypal 提供的 paypal_ipn 模型中。我还检查了信号中的 ipn_obj 并且该数据的所有字段也都是空白的。

任何人都可以阐明我如何能够获得付款人地址吗？

如果有帮助，我将使用示例中的信号：

```
 #Paypal signals
    from paypal.standard.ipn.signals import payment_was_successful
    import datetime

    #Signal for paypal confirmation
    def show_me_the_money(sender, **kwargs):
        ipn_obj = sender

        # Undertake some action depending upon `ipn_obj`.

    payment_was_successful.connect(show_me_the_money) 
```

编辑：

下面 scytale 建议的 ipn_obj 转储会为相关字段生成：

```
 address_city\t(<type 'unicode'>)\t: 
    address_country\t(<type 'unicode'>)\t: 
    address_country_code\t(<type 'unicode'>)\t: 
    address_name\t(<type 'unicode'>)\t: 
    address_state\t(<type 'unicode'>)\t: 
    address_status\t(<type 'unicode'>)\t: 
    address_street\t(<type 'unicode'>)\t: 
    address_zip\t(<type 'unicode'>)\t: 
```

还有很多其他字段，如果您需要这些字段的数据，请告诉我，我将它们粘贴在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:38:47.980

听起来您一开始就没有获得地址信息。您可以要求贝宝从他们的贝宝帐户发送客户的地址，或者您可以在您的网站上从客户那里获取地址并将数据包含在贝宝按钮 HTML 中 - 贝宝然后在 IPN 数据中将此信息发送回您。有关更多详细信息，请参阅[表单基础指南](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics#id08A6F0SJ04Y)。

由于您使用的是 django-paypal（对吗？），您可以将这些数据包含在 paypal 按钮中，只需将字段添加到您传递给的初始值的字典中，`PayPalPaymentsForm`如 django-paypal[文档](https://github.com/tomscytale/django-paypal#using-paypal-payments-standard-ipn)中所述。

# sql - Oracle 作业调度程序创建程序以创建/删除物化视图

> ID：13013792
> 
> 赞同：0
> 
> 时间：2012-10-22T14:39:26.680
> 
> 标签：sql, oracle, plsql, scheduled-tasks

我正在尝试实现一个程序，该程序将调用运行以下代码块的 Oracle 作业调度程序：

```
create materialized view foo  
parallel  
nologging  
never refresh  
as  
select * from long_running_query; 
```

随后

```
drop materialized view foo; 
```

现在我正在查看的逻辑流程如下：

1) Oracle 调度程序每三十 (30) 分钟触发一次。
2) 以任意名称生成新的物化视图 (bar)
3) 将 Bar 传递给上述创建函数（创建 mat 视图 bar...）
4) 视图（常规未物化） outside_view 被删除
5) outside_view 被重新创建指向在步骤 3 中创建的物化视图

我的问题是我无法让它在 PL/SQL 中运行或作为可执行文件运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:06:18.673

A procedure with regular use of dynamic SQL should work:

```
CREATE OR REPLACE PROCEDURE refresh_mv(p_mv_name VARCHAR2) AS
BEGIN
   EXECUTE IMMEDIATE '
      CREATE MATERIALIZED VIEW ' || dbms_assert.simple_sql_name(p_mv_name) || '
      PARALLEL
      NOLOGGING
      NEVER REFRESH
      AS
      SELECT * FROM <biq_query>';
   EXECUTE IMMEDIATE 
      'CREATE OR REPLACE VIEW outside_view AS SELECT * FROM '||p_mv_name;
   -- DROP old mv?
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:17:59.650

应该可以使用如下的普通刷新路径：

```
create materialized view foo
parallel
nologging
refresh complete
as  
select /*+ append */ * from long_running_query; 
```

然后在需要刷新的时候：

1.  禁用 foo 上的所有索引
2.  刷新 foo
3.  重建索引，最好不要记录。

# php - Codeigniter validation_errors() 总是返回空

> ID：13013794
> 
> 赞同：4
> 
> 时间：2012-10-22T14:39:30.547
> 
> 标签：php, validation, codeigniter

我有一个简单的表单，它使用以下验证规则添加到我的数据库中。“表单”在 autoload.php 中。

每当任何验证规则被破坏时，页面都不会显示错误输出，当没有任何验证规则被破坏时，表单会按预期通过。

这是我的控制器功能

```
 public function add()
{

    $this->load->library('form_validation');
    $this->load->library('layout');
    // field name, error message, validation rules
    $this->form_validation->set_rules('type', 'Type', 'required|xss_clean');
    $this->form_validation->set_rules('title_type', 'Title type', 'required|xss_clean');
    $this->form_validation->set_rules('first_name', 'First name', 'trim|required|min_length[1]|max_length[150]|xss_clean');
    $this->form_validation->set_rules('surname', 'Surname', 'trim|required|min_length[1]|max_length[150]|xss_clean');
    $this->form_validation->set_rules('job_title', 'Job title', 'trim|min_length[5]|max_length[300]required|xss_clean');
    $this->form_validation->set_rules('office_number', 'Office number', 'trim|min_length[2]|max_length[11]|xss_clean');
    $this->form_validation->set_rules('telephone', 'Telephone', 'trim|numeric|xss_clean');
    $this->form_validation->set_rules('email', 'Email', 'trim|valid_email|xss_clean');
    $this->form_validation->set_rules('website', 'Website', 'trim|prep_url|xss_clean');
    $this->form_validation->set_rules('background', 'Background', 'trim|xss_clean');

    $data = array(
        'title' => 'Add staff member'
    );

    if ($this->form_validation->run() == FALSE) { //Was errors

        $this->session->set_flashdata('message','You missed some details, please try again.');

        $this->layout->load('default', 'add_person', $data);
    } else {
        $this->people_model->add_person();
        $this->layout->load('default', 'added_person', $data);
    }

} //add 
```

在我的表单视图中，我有

```
 <?php echo validation_errors('<p class="msg msg-error">') ?> 
```

谁能看到我做错了什么，我已经尝试了我能想到的一切。

validation_errors() 的 var_dump 给出

```
string '' (length=0) 
```

编辑：奇怪的是，如果我交换这两行，我得到：

```
 $this->load->library('form_validation');
    $this->load->library('layout'); //lib code http://pastebin.com/K1rBV512

Message: Undefined property: People::$form_validation

Filename: controllers/people.php

Line Number: 27 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:31:04.797

您需要将`$data`数组传递给您的模型。所有输入都需要`POST`从`VIEW`页面获取。您没有显示任何特定错误，因此很难诊断您的问题。

确保您`POST`的所有输入都像这样`MODEL`：

```
`'first_name' => $this->input->post('first_name'),` 
```

在你的`view`：

```
<?php echo validation_errors('<p class="msg msg-error">') ?> 
```

在您`view`将其更改为：

```
<p class="msg msg-error"><?php echo validation_errors(); ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:30:53.223

该错误似乎与会话无关，但我没有看到您加载**会话**库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T19:38:35.533

我相信问题在你看来，而不是在控制器中。问题似乎是你的 $_POST 是空的，没有什么可以验证的。

这似乎没有答案，希望它会帮助其他人。

如果发生这种情况，请在 $_POST 上尝试 var_dump。如果为空，请确保您有

然后在里面确保你的输入带有“name”属性，而不是“id”

希望这对任何人都有帮助

# javascript - 在 Chrome 中， 触发 $(document).ready() 时不会加载资源。为什么？

> ID：13013795
> 
> 赞同：3
> 
> 时间：2012-10-22T14:39:31.820
> 
> 标签：javascript, jquery, javascript-events

在 FF 和 IE 中，调用时会检索 SVG (SVG) 文档`$(document ).ready()`。

在 Chrome 中，调用`getSVGDocument`时返回 null 而不是。`$(document ).ready()`（虽然它似乎在大约 7 毫秒后找到它，如 所示`setTimeout`。）

为什么 Chrome`<embed>`在 的那一刻找不到加载的 SVG 文档`$(document ).ready()`，而 FF 和 IE 可以？

（我不想使用 a`setTimeout(7ms)`只是为了等待 Chrome 赶上来！！！因为那是……蹩脚的。）

下面的代码简单代码显示了场景： FF 中的**RETURNS SVGDocument** + Chrome 中的 IE **RETURNS NULL**（除非调用`getSVG()`延迟 7 毫秒！！！）。

注意：此代码需要`localhost`使用 Chrome 在服务器上运行；这是一个单独的 Chrome 问题。

* * *

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>

    getSVG = function () {

        var el = document.getElementById("embedId");

        SVGDoc = el.getSVGDocument();

        console.log(SVGDoc);                           // returns null in Chrome

    }

    $(document).ready(function () {

        getSVG();                        

        //setTimeout("getSVG()", 7);      // this works, showing that Chrome is NOT "ready"

    });

</script>

</head>

<body>

<embed id="embedId" src="man.svg" type="image/svg+xml" width="50" height="50"/> 

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:46:54.240

您应该使用 $(window).load() 而不是 $(document).ready() 来等待加载的嵌入、iframe 和图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:47:22.853

尝试这个

```
$(window).load(function(){
    console.log($('#embedId')[0].getSVGDocument());
}); 
```

另一种可能的解决方案：

```
$(function(){
    var a = $('#embedId')[0];

    a.addEventListener("load",function(){

        //do stuff with 'a'

    },false);
}); 
```

# c++ - 在 C++ 迭代器问题中使用带有对的映射作为键

> ID：13013799
> 
> 赞同：1
> 
> 时间：2012-10-22T14:39:43.087
> 
> 标签：c++, c++11

我有一对和一张这样声明的地图

```
typedef pair<string,string> Key;
typedef map< Key, double> Map; 
```

我通过 for 循环将对象插入其中

```
Key p (string1, string2 );
pair_map.insert(make_pair( p, double1 ) ); 
```

如何在地图中找到元素？我在使用 find 设置迭代器时遇到问题。

假设我正在使用`it = pair_map.find(make_pair(string1,string2))`;

我尝试过声明`pair_map<Key, double>::iterator it;`，或者`map<Key, double>::iterator it;`都没有为我工作。我怎样才能解决这个问题？

由于 typedef 的错误，我得到的错误都是长的无效转换错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T14:42:00.917

```
Map::iterator it = pair_map.find(make_pair(string1, string2)); 
```

当然你可以使用

```
auto it = ...; 
```

或者

```
decltype(pair_map.begin()) it = ...; 
```

在 C++11 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T14:42:01.307

你需要

```
Map::iterator it = .... 
```

或者，在 C++11 中，

```
auto it = pair_map.find(make_pair(string1, string2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T14:44:06.413

`pair_map`是*变量*的名称，而不是*类型*。

```
Map::iterator it = pair_map.find(make_pair(string1,string2)); 
```

（正如 juanchopanza 所说）会起作用，也会起作用

```
std::map<Key, double>::iterator it = pair_map.find(make_pair(string1,string2)); 
```

或者

```
auto it = pair_map.find(make_pair(string1,string2)); 
```

如果你有 C++11。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T14:42:58.263

不要为迭代器类型使用变量名，而是使用类型名，例如，而不是：

```
pair_map<Key, double>::iterator it; 
```

利用

```
Map::iterator it; 
```

或者

```
map<Key, double>::iterator it; 
```

实际上，您不应该 typedef you `map`，因为它令人困惑。只需在任何地方使用模板。

# jquery-templates - jQuery模板，在每个内部调用owne函数

> ID：13013801
> 
> 赞同：0
> 
> 时间：2012-10-22T14:39:53.993
> 
> 标签：jquery-templates

这是否可以在每个内部调用函数。

我有对象数组：

```
 Object { 
    array = new Array(), //{ true, true, false }
    areAllTrue = function(){
    //check if true code
    }
 } 
```

我需要在以下位置调用它：

```
{{each Array}}
  ${$value.areAllTrue()} 
{{/each}} 
```

它仅适用于最后一个对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:39:55.103

由于没有任何代码在语法上是正确的，因此您实际尝试执行的操作有点模糊。我只能猜测您使用以下代码的意思。

```
//you have an array of objects, where each has a function
var objArray = [
  {
    objFunc: function(){
      return 'objArray #0 objFunc';
    }
  },
  {
    objFunc: function(){
      return 'objArray #1 objFunc';
    }
  },
  {
    objFunc: function(){
      return 'objArray #2 objFunc';
    }
  }
];

//you need to call each function of all objects
//in the array via jQuery "each" method.
$.each(objArray,
  function(idx, itm){
    //"itm" is the array item, which is the object
    var a = itm.objFunc(); //call it
    //log the result. see web browser Console
    console.log(a);
  }
); 
```

# javascript - 计算随机放置在定义区域中的图像的可用空间的最佳方法

> ID：13013804
> 
> 赞同：1
> 
> 时间：2012-10-22T14:39:59.060
> 
> 标签：javascript, html, canvas

我正在使用 HTML 的 Canvas 标签来创建一个随机生成的词云。我正在寻找最好的（也是最有效的）方法来计算在定义的区域中哪里有足够的空格来容纳一个单词。我现在能想到的唯一方法是拥有一个存储空闲空间块的空闲列表，并在页面上放置新图像时对其进行调整。

我在这里有一个示例生成器：http: [//pathrazor.com/wordcloud/](http://pathrazor.com/wordcloud/)。但是，这个例子还没有随机旋转单词，这会增加我所问的复杂性。稍后将添加碰撞检测，如果它不是可用空间问题的解决方案的一部分。

有没有人有任何有趣的想法或以前做过这个？任何输入都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:04:49.893

我建议这样的算法：

*   假设你有一个空的矩形。
*   将一个单词随机（或伪随机，或随你喜欢）放入该矩形。
*   想象一下，这个词被包裹在它自己的小矩形中。延长该矩形的线条，直到它们到达较大容器的边界。
*   您剩余的可用空间现在被分成四个重叠的矩形：单词前后两个垂直的矩形，上下两个水平的矩形。
*   将这些矩形存储在内存中。
*   您放置的下一个单词将与这些矩形中的一个或两个重叠。当它发生时，将它们进一步划分并重复该过程。

您还可以[在 SE 的游戏开发网站上发现这个问题](https://gamedev.stackexchange.com/q/16054/22147)很有用。

# java - 检查事件发生的时间容器

> ID：13013806
> 
> 赞同：1
> 
> 时间：2012-10-22T14:39:59.853
> 
> 标签：java, time, calendar, jodatime

我想实现一个包含 2 次的小时间容器，一个开始和一个结束，我想用它在多天的事件中迭代它，以检查在特定时间范围内是否发生了事件，我将不得不仅在一分钟/范围内工作，因此对象看起来像这样

时间范围通常是几分钟，比如下午 13:00 到下午 13:10 我遇到的问题是毫秒，因为它们代表静态的最后时刻，它们不能用于多天的迭代，我会将其用作伪代码：

```
select events that has happened in the timeframe specified in the constructor  regardless of the day and month, 
```

事件包含一个日历实例，我想对小时和分钟进行匹配，有什么建议吗？我正在尝试用 joda-time 来恢复，但到目前为止还没有找到方法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:17:27.793

如果您想以毫秒为单位，只需使用带有一天中毫秒数的 mod (%)。如果您想使用 Joda-time，您可能会得到更具可读性的内容。请参阅下面的示例。

```
public class Test {

    static class TimeContainer {
        private static final long second = 1000;
        private static final long minute = 60 * second;
        private static final long hour = 60 * minute;
        private static final long day = 24 * hour;

        private final long starttime;
        private final long endtime;

        public TimeContainer(long startHour, long startMinutes, long endHour, long endMinutes) {
            starttime = startHour * hour + startMinutes * minute;
            endtime = endHour * hour + endMinutes * minute + minute; 
        }

        public boolean test(long timeToTest) {
            long hoursInDay = timeToTest % day;
            return hoursInDay >= starttime && hoursInDay <= endtime;
        }
    }

    static class JodaContainer {
        private final LocalTime starttime;
        private final LocalTime endtime;

        public JodaContainer (LocalTime start, LocalTime end) {
            starttime = start;
            endtime = end;
        }

        public boolean test(long timeToTest) {
            LocalTime lt = new LocalTime(timeToTest);
            return lt.equals(starttime) || lt.equals(endtime) || (lt.isAfter(starttime) && lt.isBefore(endtime));
        }
    }

    public static void main(String[] args) {

        long[] testTimes1 = new long[5];
        long[] testTimes2 = new long[5];

        Calendar test1 = Calendar.getInstance(TimeZone.getTimeZone("Etc/Zulu"));
        Calendar test2 = Calendar.getInstance();

        TimeContainer timeContainer = new TimeContainer(13, 0, 13, 10);
        JodaContainer jodaContainer = new JodaContainer(new LocalTime(13,0), new LocalTime(13,10));

        test1.set(2010, 10, 5, 13, 6, 20);
        test2.set(2010, 10, 5, 13, 6, 20);
        testTimes1[0] = test1.getTimeInMillis();
        testTimes2[0] = test2.getTimeInMillis();

        test1.set(2012, 9, 6, 13, 1, 24);
        testTimes1[1] = test1.getTimeInMillis();
        test2.set(2012, 9, 6, 13, 1, 24);
        testTimes2[1] = test2.getTimeInMillis();

        test1.set(2010, 11, 22, 13, 9, 1);
        testTimes1[2] = test1.getTimeInMillis();
        test2.set(2010, 11, 22, 13, 9, 1);
        testTimes2[2] = test2.getTimeInMillis();

        test1.set(2012, 10, 5, 13, 26, 20);
        testTimes1[3] = test1.getTimeInMillis();
        test2.set(2012, 10, 5, 13, 26, 20);
        testTimes2[3] = test2.getTimeInMillis();

        test1.set(2010, 10, 5, 14, 6, 20);
        testTimes1[4] = test1.getTimeInMillis();
        test2.set(2010, 10, 5, 14, 6, 20);
        testTimes2[4] = test2.getTimeInMillis();

        for (long t : testTimes1) {
            System.out.println(t + "=" + timeContainer.test(t));
        }
        System.out.println();
        for (long t : testTimes2) {
            System.out.println(t + "=" + jodaContainer.test(t));
        }

    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:42:56.953

听起来您真的很想使用 Joda Time 的[`LocalTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalTime.html)课程：

```
timeContainer(LocalTime startTime, LocalTime endTime) 
```

然后在您的代码中，您只需要提取`LocalTime`每个事件的 full `DateTime`，并检查它是否在 after 或等于`startTime`and before `endTime`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:57:28.113

您可以调用 Date.before() 或 Date.after() 来检查时间是否在范围内。

```
boolean isTimeInRange(Calendar startTime, Calendar endTime, Date date ){

            if (date.before(endTime.getTime())
                    && date.after(startTime.getTime())) {

                // time in range
                return true;

            } else {

                return false;

            }

} 
```

# html - inline-block 之后的块元素

> ID：13013807
> 
> 赞同：1
> 
> 时间：2012-10-22T14:40:00.593
> 
> 标签：html, css

我有以下html：

```
<div id="wrapper">
    <div class="inline-block"></div>
    <div class="inline-block"></div>
    <div class="inline-block"></div>
    <div class="block"></div>
</div> 
```

现在，内联元素有`display: inline-block`. 我需要它来垂直对齐它们。块元素是`display: block`。

这给出了以下结果（第一张图片）：

![在此处输入图像描述](../Images/d0b1c62cb06a4dea3642e83df9e21b9a.png)

由于我希望粉红色元素（块）位于右侧，因此如果我尝试将其设置为`float: right`，则会将其他元素错放在左侧，从而在右侧留下与块元素宽度相对应的边距。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:43:53.333

您应该将粉红色块包裹在 a 中`div`并将粉红色块设置在`float:right`那里。

```
<div id="wrapper">
    <div class="inline-block"></div>
    <div class="inline-block"></div>
    <div class="inline-block"></div>
    <div class="wrapper-inner clearfix">
        <div class="block" style="float:right"></div>
    </div>
</div> 
```

如果有内容 aber 这个内部包装你可以添加一个 clearfix 类 - 因为浮动元素不会给它们的父元素一个高度：

```
 .clearfix:after {
        content:"";
        display:table;
        clear:both;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:59:27.997

**HTML**

```
<div id="wrapper">
    <div class="inline-block"></div><!-- remove the whitespace
 --><div class="inline-block"></div><!-- because inline-blocks
 --><div class="inline-block"></div><!-- dont fully collapse whitespace
 --><div class="block"></div>
</div> 
```

**CSS**

```
#wrapper {
  text-align: right; /* moves inline-blocks to the right */
  position: relative; /* to give context for absolute positioning of .block */
}

.inline-block {
  display: inline-block;
  width: 30px;
  height: 30px;
  background: #f40;
}

.block {
  display: block;
  width: 30px;
  height: 30px;
  background: blue;
  position: absolute;
  right: 0; /* move the block to the far right of #wrapper */
} 
```

例如：http: [//jsbin.com/etuxab/2/edit](http://jsbin.com/etuxab/2/edit)

# ruby-on-rails - rails 自定义搜索页面

> ID：13013809
> 
> 赞同：0
> 
> 时间：2012-10-22T14:40:19.607
> 
> 标签：ruby-on-rails, rest, search, action, controllers

我是 Rails 新手，正在尝试创建一个简单的信用卡管理应用程序。我想要一个基本的身份验证，用户会看到一个简单的表单：

*   4个输入字段，每个输入4个信用卡号码
*   1 个输入字段，用于输入引脚号。

此搜索表单应位于单独的页面中（根据应用程序规范），然后应重定向到包含卡详细信息的页面（如果找到）。

我仍然掌握控制器及其操作的窍门，并且不确定是否在cards_controller 及其各自的视图中创建新操作，只是为了显示表单，然后在显示操作中管理搜索。我不想像一些作者建议的那样创建一个完整的搜索控制器，而是保持简单。在这种情况下，什么是一个好的休息方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:20:36.113

这是关于 RESTful 路由和搜索的一个很好的答案：[https ://stackoverflow.com/a/1081720/648392](https://stackoverflow.com/a/1081720/648392)

关于搜索表单，您可以这样做：

*   在`search`_`cards_controller`
*   `search`为动作添加一个路由到`routes.rb`.

路线可能看起来像这样：

```
resources :cards do 
  # This will create a route that looks like this: /cards/search
  collection do 
    get "search"
  end
end 
```

*   在某些现有视图中创建所需的表单，或在`cards_controller`其对应的视图中创建新操作。使用表单在`GET`请求中发送搜索参数。
*   `params`在操作中使用您需要的任何内容`search`来填充卡片列表。
*   在`search`视图中渲染结果

# xcode - Xcode：将情节提要导出到图像

> ID：13013810
> 
> 赞同：7
> 
> 时间：2012-10-22T14:40:22.430
> 
> 标签：xcode, printing, storyboard

我需要一个巨大的图像格式的 Xcode 故事板，这样我们就可以在绘图仪上绘制它并将它安装在办公室的一面墙上。我试过导出它，但这只允许你使用故事板格式。只是尝试打印它也不起作用，因为 Xcode 无法打印故事板文件。

任何没有采取几个截图并将它们播种在一起的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T21:16:09.937

这是我发现的最好的黑客：

使用 applescript 可以将 Xcode 的大小调整为超出屏幕大小（甚至可以手动调整）：

```
set front_app to "Xcode"

tell application front_app
    activate
    set bounds of front window to {0, 0, 5000, 1000}
end tell 
```

最大高度似乎是屏幕高度，但宽度可能比屏幕宽度大得多。

之后使用屏幕捕获软件可以捕获整个 Xcode 窗口（超出屏幕边界）。

在我的测试中，我为 5000px x 5000px 的图像制作了 5 个文件。这不是最好的选择，但它有效。希望 Apple 会添加打印功能，或者有人可以自动执行屏幕捕获/缝合部分。

# vim - vim 滚动延迟一秒 ; 禁用插件的映射

> ID：13013815
> 
> 赞同：3
> 
> 时间：2012-10-22T14:40:36.990
> 
> 标签：vim, vim-plugin

在过去的几个月里，当我尝试使用 向上滚动一行时，我遇到了奇怪的一秒钟延迟`<C-Y>`。没有这样的延迟`<C-U>`or `<C-B>`。

我扫描了所有的映射，我相信我已经把它缩小到[ZenCoding](https://github.com/mattn/zencoding-vim)插件，它有几个正常模式映射，`<C-Y>`后面跟着一个字母。显然按下一个字母的等待时间是一秒，如果没有按下一个字母，它会继续默认`<C-Y>`行为。

在我的 vimrc 中，有没有办法禁用特定插件的所有正常模式映射，或者将特定映射重置为其默认状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T15:17:34.180

通常，插件会定义以 开头的映射`<Plug>`，并检查用户是否已经自定义了它。在这种情况下，您可以像这样重新映射：

```
:nmap <F11> <Plug>MappingNameHere 
```

然而，ZenCoding 插件似乎定义了很多映射，这样的方案会很乏味。相反，它有一个定义开始键的配置变量。例如，要将其更改`F11`为 ，请将以下内容放入您的`~/.vimrc`（或之前`plugin/zencoding.vim`来源的任何其他地方）：

```
:let g:user_zen_leader_key = '<F11>' 
```

# jquery - 如何使用 Asp.net 在 JQuery/Javascript 中实现带有 If 条件的确认对话框

> ID：13013823
> 
> 赞同：1
> 
> 时间：2012-10-22T14:41:01.967
> 
> 标签：jquery, asp.net, javascript

我有一点 Jquery（与传统的 javascript 混合）来检查一个文本框。在我的示例 asp 页面上，有一个按钮、一个文本框，并且在代码后面有一个 button_click 事件。我想要得到的是，当有人点击按钮时，如果文本框为空，他们会看到一个警告框。当有一个值时，他们会看到一个确认对话框。我的代码完成了大部分工作，但是当用户看到确认对话框并取消时，服务器端代码被执行。

我在这里想念什么？

提前致谢。

```
$(document).ready(function () {
    $("#Button1").click(function (e) {

        var a = $("#TextBox1").val();

        if (jQuery.trim(a).length > 0) {
            confirm('To confirm  click OK ');
        }
        else {
            alert("Empty");
            e.preventDefault(); 
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:48:33.693

对按钮的 OnClientClick 属性使用以下函数：

```
 function checkClick() {
      var result = $.trim($("#<%= TextBox1.ClientID %>").val()).length > 0;
      if (result === true) {
           result = confirm("To confirm  click OK");
      }
      else {
           alert("oops!");
      }
      return result;
 }

 <asp:Button runat="server" Text="Click Me" OnClientClick="return checkClick()" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:43:22.647

如果他们在`confirm`. `confirm`返回一个允许您执行此操作的布尔值。

```
if (jQuery.trim(a).length > 0) {
    var answer = confirm('To confirm  click OK ');

    if (!answer) {
        e.preventDefault(); 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:43:38.970

`Confirm`: *result 是一个布尔值，表示选择了 OK 还是 Cancel （true 表示 OK）。*

```
 if (!confirm('To confirm  click OK ')) return false; //don't do anything 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T01:42:18.350

使用下面的函数作为按钮或在 onclick 时定义类的 href

```
$("body").on("click",".yourclassname",function(){
    var delet = confirm('Are you sure want to delete?');
    if(delet){
        // Some function when true
    }else{
        // Some function when false
    }
}); 
```

# asp.net - HttpModule 和 Structuremap 初始化

> ID：13013825
> 
> 赞同：2
> 
> 时间：2012-10-22T14:41:07.420
> 
> 标签：asp.net, structuremap, global-asax

我有一个自定义 HttpModule 可以使用内置的 VS 服务器正常工作，但不会从我设置的 IIS 7.5 服务器运行。c# 文件甚至没有被调用。该模块包含在 system.web 中，但是当我在 中添加对该模块的另一个引用时`system.webserver`，该项目将无法加载，并且出现结构映射 202 异常代码的错误。

我怀疑这个错误的原因与什么时候`Structuremap`被初始化有关，但我似乎无法弄清楚。我从文件中的`ObjectFactor`y初始化，它工作正常，直到我尝试加载这个模块。`Application_Start``global.asax`

任何帮助将不胜感激。

错误是：

```
 StructureMap Exception Code:  202
No Default Instance defined for PluginFamily testproject.test.Core.DataAccess.IAccountRepository, testproject.test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +1136
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +111
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture) +23
   System.Web.HttpRuntime.CreateNonPublicInstance(Type type, Object[] args) +60
   System.Web.HttpApplication.BuildIntegratedModuleCollection(List`1 moduleList) +231
   System.Web.HttpApplication.GetModuleCollection(IntPtr appContext) +1365
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +95
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Exception has been thrown by the target of an invocation.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

更新 - 如果我在我试图调用的模块中初始化对象工厂，站点将再次加载并且处理程序工作。然后在每个加载的页面上调用以下内容时似乎效率低下且不必要。之前，我可以在全局文件的 application_start 中加载一次。

```
 ObjectFactory.Initialize(x =>
        {
            x.UseDefaultStructureMapConfigFile = true;
        }); 
```

# python - 如何从概念上处理python中的异常？

> ID：13013826
> 
> 赞同：4
> 
> 时间：2012-10-22T14:41:06.423
> 
> 标签：python, exception, exception-handling

在 python 中，定义用户定义的异常是很常见的，因此它们可以返回一些用户定义的测试/输出/无论何时在用户定义的类中发生错误。但我想知道，是否有一种好的做法来处理 python 中给定类的异常？详细来说，我有以下问题：

1.  所有与类相关的异常都应该放入定义 python 类的文件中，还是应该放入特定文件中？

2.  是否应该为应该引发异常的任何可能的情况定义异常，或者只为一个类定义一个一般异常并通过提供一些附加文本打印出以错误方式发生的位置和事件的详细信息是否“可以” ?

3.  如果有人可以发布一个用户定义的异常可能/应该是什么样子的示例，我将不胜感激，以便了解定义您自己的特定异常类是一件好事的原因。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:02:50.243

1.  Python 程序的文件级组织并不是特别有趣，除非您在进行维护。模块级组织更为重要，因为它决定了 API（至少在某个`import`时间），因此请确保您的异常在使用它们的模块中。

    一个常见的设置是从包的根目录导出包的所有异常，所以你可以说`from foo import Foo, FooError, BarError`. 模块系统可以隐藏定义是否存在于同一文件中。

2.  完全取决于您希望捕获异常的细粒度。不过，我经常发现内置异常（`ValueError`、`TypeError`等）足够细粒度。对于您的包中可能出现问题的特定内容，您可以添加一个或多个例外。

3.  怎么样...

    ```
    class ParseError(Exception):
        def __init__(self, parser_input, line, column):
            self.input = parse_input
            self.line = line
            self.column = column

        def __str__(self):
            # format the exception message, showing the offending part of
            # self.input and what the parser was expecting. 
    ```

# button - Qt3 到 Qt4 更新后的 QMouseEvent 不再正确响应

> ID：13013832
> 
> 赞同：0
> 
> 时间：2012-10-22T14:41:33.350
> 
> 标签：button, qt4, mouseevent, qt3

我正在使用一个大型的多文件 Qt 界面，并且一直在将多个部分从 Qt3 更新到 Qt4。不幸的是，在某个地方，我删除了通过按下不同的鼠标按钮组合来移动（平移、旋转等）中央 QGLWidget 场景的能力。我对原始鼠标事件所做的更改类似于

老的：

```
 if(e->state() & Qt::ControlButton){ /*... do things  */ } 
```

新的：

```
if(e->buttons() & Qt::ControlModifier){ /*... do things  */ } 
```

我也尝试`e->button()`在新版本中简单使用，但无济于事；原本应该用鼠标发生的事情不再发生。从用户指南中，我看到旧函数在事件生成*之前*`state()`立即返回按钮状态，而在*之后*立即返回状态，然而，这是推荐的替换（我不太了解这些事情的时间，所以我不知道它会有多大的不同）。*`buttons()`*

 **无论如何，我注意到当我运行程序时我收到了消息`QWidget::insert action: Attempt to insert null action`。这是否可能与鼠标事件有关（这是我的第一直觉）？

如果是这样，我该怎么处理鼠标？如果没有，无论如何都必须修复它，所以我想知道：有没有办法追溯到导致问题的小部件/操作？**

# xaml - gridviewitem 中的嵌套滚动查看器

> ID：13013833
> 
> 赞同：1
> 
> 时间：2012-10-22T14:41:39.230
> 
> 标签：xaml, listview, gridview, windows-runtime, controltemplate

我在 WinRT 中有一个场景，我有一个标准的网格视图，它以水平方式显示内容 - 通常的 WinRT 滚动查看器会在此处用于出现在屏幕右侧的内容，因此我们可以“向左滑动”很多WinRT 应用程序。

我在 XAML 中的 gridviewitems 数据模板如下：

```
 <DataTemplate>
                <Grid Background="White" Margin="0,0,1,1">
                    <ScrollViewer Grid.Column="3" Width="200">
                        <ListView Width="600" Height="170" Margin="0" Padding="10" ItemsSource="{Binding Path=ProductListItems}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Image Source="{Binding Path=LargeImage}" Width="200" Height="150" Stretch="UniformToFill"/>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </ScrollViewer>
                </Grid>
            </DataTemplate> 
```

正如我希望您从源代码中看到的那样，模板项正在尝试显示存储在列表查看器中的图像，该图像包裹在滚动查看器中（随时显示大​​约 3 个），任何溢出的图像都可以在滚动查看器中滑动。

问题是主父 gridview 窃取了所有输入，并且任何滑动（即使放置在模板化的 listview 滚动查看器中）都没有注册。

任何人都知道如何覆盖此默认行为并在我的控制范围内进行 2 种类型的滚动？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:33:19.330

我认为 ScrollViewer 的[IsHorizo​​ntalScrollChainingEnabled](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.ishorizontalscrollchainingenabled.aspx)属性可能会帮助你做你想做的事，但就是说 - 你永远不应该做你想做的事，因为这是一个非常糟糕的设计。永远不要将 GridViews 或 ListViews 放在 ScrollViewer 中，也不要将它们中的任何一个嵌套在一起。如果您想提供一种方法来查看比 GridView 更多的内容 - 您应该允许导航到允许您查看它的另一个页面。在您的情况下-您试图将 ListView 嵌套在 GridView 内的 ScrollViewer 内，这基本上意味着您在可视化树中嵌套了 3 个 ScrollViewers，这是双重错误。

# android - SurfaceView 动画的选项

> ID：13013837
> 
> 赞同：1
> 
> 时间：2012-10-22T14:41:41.353
> 
> 标签：android, animation, surfaceview

我正在为 Android 2.2 构建一个应用程序，它将是一种“假”相机。我正在使用 SurfaceView 播放视频并向用户公开控件以拍照并在前后“相机”之间翻转。

我想为这两种动画添加与股票 android 所经历的一致的动画。也就是说，当用户拍摄照片时，框架会冻结，向右滑动，实时相机图像从左侧滑入。当用户在相机之间切换时，会出现一个 3d 翻转动画。

我遇到的问题是 SurfaceView。我已经阅读了许多帖子，指出无法从 SurfaceView 获取位图，因为它与操作系统和硬件相关联。

我也尝试过获取一帧视频并使用 ImageView，但似乎直到 API 级别 10 才支持 MediaMetadataRetriever。我看到一些帖子说它之前可用（回到级别 5），但我没有想法如何使用它，或者我是否应该使用它，因为它不受官方支持。

我最后的想法是覆盖 SurfaceView 的绘图，或者应用某种矩阵来影响输出，或者将像素数据导出到外部图像视图，尽管我不确定后面的选项是否可行。

谁能给我一些关于可以在这里做什么的指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:33:00.090

最后，我找不到任何有用的东西。

我结束了：

*   隐藏 SurfaceView 并显示 ImageView
*   将 ImageView 内容设置为（大致）在 SurfaceView 上显示的内容。这可能是最难的部分，因为您通常无法获取 SurfaceView 的内容。
*   动画 ImageView
*   在播放恢复之前隐藏 ImageView 并再次显示 SurfaceView。

# jquery - 将通过 ajax 上传的文件保存到 Django 模型 ImageField

> ID：13013838
> 
> 赞同：4
> 
> 时间：2012-10-22T14:41:45.153
> 
> 标签：jquery, python, ajax, django, django-models

该文件在请求中作为原始数据提供。我应该如何将其转换为保存在由`ImageField`内部 a表示的磁盘上`model`。

试过的东西：

```
file_ = File(request)
modelinstance.picture.save(filename, file_, save=False)
modelinstance.save() 
```

以及上述的一些变体。关于如何在 django 视图中执行此操作的示例将有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:56:03.933

如果您使用[ModelForm](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)，您将没有什么特别的事情要做。ModelForm 自动处理 FileField/ImageField。

如果你真的想手动做，django[有文档](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/?from=olddocs#handling-uploaded-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:37:26.017

像这样解决了

```
filename = request.GET[ 'yourfilename' ]

from django.core.files.uploadedfile import SimpleUploadedFile
file_contents = SimpleUploadedFile("%s" %(filename), request.raw_post_data)

modelinstance.picture.save(filename, file_contents, True) 
```

# ios - iOS 模拟器：哪些文件夹可以安全删除？

> ID：13013840
> 
> 赞同：0
> 
> 时间：2012-10-22T14:41:52.620
> 
> 标签：ios, iphone, macos, ios-simulator

我的**iOS 模拟器文件夹**有一些与旧 iOS 版本相关的文件夹（请参阅下面的屏幕截图）。

我可以安全地删除 iOS 版本 < 6 的所有文件夹吗？

在用户文件夹中还有文件夹`Media.previousInstall`和`Library.previousInstall`. 文件夹也可以`*.previousInstall`安全删除吗？

![iOS 模拟器文件夹](../Images/6a3ad136e74182c49ea20a05cba1b0a8.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:20:54.983

我不是这个主题的专家，但删除这两个文件夹似乎对我的 iOS 模拟器没有任何影响（在 OS X 10.8.2 下使用 Xcode 4.5.1）。

但是，这两个文件夹在我的磁盘上加起来只有 22MB，所以删除它们并没有真正获得那么多。;)

# ruby - 在 Rails 中创建通用表单

> ID：13013846
> 
> 赞同：1
> 
> 时间：2012-10-22T14:42:04.350
> 
> 标签：ruby, ruby-on-rails-3, forms, generics, ruby-on-rails-3.2

我有一个带有属性的用户模型（不是所有必需的）first_name、last_name、birthday、professional、pet_name。

注册用户需要输入名字和生日。

我想以某种方式获取 nil 的属性（在这种情况下 - 姓氏和职业）并随机选择其中一个并制作一个表格，要求用户填写。

如果我这样做，`@user.attributes.map{|k,v| v==nil ? k : nil}.compact`我可以获得零的属性。

如何使表单足够通用，以便可以在任何属性上使用此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:53:44.280

您可以在控制器操作中填写 @field 以显示附加字段的表单，然后显示该字段的表单：

```
# controller action
def additional_form
  @field = @user.attributes.select{|k,v| v.nil?}.keys.sample

  if request.post?
    @user.update_attributes(params[:user]) and redirect_to root_path
  end
end

# view for this action (additional_form.html.erb)
<%= form_for @user do |f| %>
  <%= f.text_field @field %>
  <%= f.submit %>
<% end %> 
```

# mysql - 如何将mysql EER图上的更改与表同步

> ID：13013850
> 
> 赞同：0
> 
> 时间：2012-10-22T14:42:24.747
> 
> 标签：mysql, database-design, mysql-workbench, eer-model

我在 EER 图中创建了我的关系，我想在我的桌子上看到外键。我读[了这篇文章](https://stackoverflow.com/questions/2410164/mysql-workbench-how-to-synchronize-the-eer-diagram)

但是当我这样做时，会出现这样的错误：

```
 Executing SQL script in server

ERROR: Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(11) NOT NULL  AFTER `UserId` 

, DROP PRIMARY KEY 

, ADD PRIMARY KEY (`AddressId' at line 1

ALTER TABLE `kobiakinlar`.`address` ADD COLUMN `user_UserId` (11) NOT NULL  AFTER `UserId` 

, DROP PRIMARY KEY 

, ADD PRIMARY KEY (`AddressId`, `user_UserId`) 

, ADD INDEX `fk_address_user_idx` (`user_UserId` ASC) 

SQL script execution finished: statements: 3 succeeded, 1 failed 
```

如何将我的表与 EER 图同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:31:27.933

我注意到我需要将 MySql 存储引擎设置为 InnoDB。正如您在 MySQL WorkBench 外键选项卡中看到的那样，服务器接受其他存储引擎的外键定义，但默默地忽略它们。您可以在此处阅读有关存储引擎的[信息。](http://dev.mysql.com/doc/refman/5.6/en/storage-engines.html)

# javascript - 向 SOAP WSDL 发送请求

> ID：13013860
> 
> 赞同：1
> 
> 时间：2012-10-22T14:42:54.757
> 
> 标签：javascript, soap, wsdl, sap

我想用 SAP 的函数创建一个 RFC。我从这个函数生成了一个 SAP 数据源。当我去这个地址： http: [//xxx.xxx.com](http://xxx.xxx.com:8000/sap/bc/soap/wsdl11?sap-client=200&services=ZTEST) :8000/sap/bc/soap/wsdl11?sap-client=200&services=ZTEST我有这个页面：

```
<?xml version="1.0" encoding="UTF-8"?>  
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:s0="urn:sap-com:document:sap:rfc:functions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="urn:sap-com:document:sap:rfc:functions">  

  <types>  

    <xsd:schema targetNamespace="urn:sap-com:document:sap:rfc:functions">  
      <xsd:element name="ZTEST">  
        <xsd:complexType>  
          <xsd:all>  
            <xsd:element name="RESULT">  
              <xsd:complexType>  
                <xsd:sequence>  
                  <xsd:element name="item" minOccurs="0" maxOccurs="unbounded" type="s0:PA0105">  
                  </xsd:element>  
                </xsd:sequence>  
              </xsd:complexType>  
            </xsd:element>  
          </xsd:all>  
        </xsd:complexType>  
      </xsd:element>  
      <xsd:element name="ZTEST.Response">  
        <xsd:complexType>  
          <xsd:all>  
            <xsd:element name="RESULT">  
              <xsd:complexType>  
                <xsd:sequence>  
                  <xsd:element name="item" minOccurs="0" maxOccurs="unbounded" type="s0:PA0105">  
                  </xsd:element>  
                </xsd:sequence>  
              </xsd:complexType>  
            </xsd:element>  
          </xsd:all>  
        </xsd:complexType>  
      </xsd:element>  
      <xsd:complexType name="PA0105">  
        <xsd:sequence>  
          <xsd:element name="MANDT" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="3">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="PERNR" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="8">  
                </xsd:maxLength>  
                <xsd:pattern value="\d*">  
                </xsd:pattern>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="SUBTY" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="4">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="OBJPS" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="2">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="SPRPS" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="ENDDA" minOccurs="0" type="s0:date">  
          </xsd:element>  
          <xsd:element name="BEGDA" minOccurs="0" type="s0:date">  
          </xsd:element>  
          <xsd:element name="SEQNR" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="3">  
                </xsd:maxLength>  
                <xsd:pattern value="\d*">  
                </xsd:pattern>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="AEDTM" minOccurs="0" type="s0:date">  
          </xsd:element>  
          <xsd:element name="UNAME" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="12">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="HISTO" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="ITXEX" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="REFEX" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="ORDEX" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="ITBLD" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="2">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="PREAS" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="2">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="FLAG1" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="FLAG2" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="FLAG3" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="FLAG4" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="1">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="RESE1" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="2">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="RESE2" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="2">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="GRPVL" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="4">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="USRTY" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="4">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="USRID" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="30">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
          <xsd:element name="USRID_LONG" minOccurs="0">  
            <xsd:simpleType>  
              <xsd:restriction base="xsd:string">  
                <xsd:maxLength value="241">  
                </xsd:maxLength>  
              </xsd:restriction>  
            </xsd:simpleType>  
          </xsd:element>  
        </xsd:sequence>  
      </xsd:complexType>  
      <xsd:simpleType name="date">  
        <xsd:restriction base="xsd:string">  
          <xsd:maxLength value="10">  
          </xsd:maxLength>  
          <xsd:pattern value="....-..-..">  
          </xsd:pattern>  
        </xsd:restriction>  
      </xsd:simpleType>  
    </xsd:schema>  
  </types>  
  <message name="ZTESTInput">  
    <part name="parameters" element="s0:ZTEST">  
    </part>  
  </message>  
  <message name="ZTESTOutput">  
    <part name="parameters" element="s0:ZTEST.Response">  
    </part>  
  </message>  
  <portType name="ZTESTPortType">  
    <operation name="ZTEST">  
      <input message="s0:ZTESTInput">  
      </input>  
      <output message="s0:ZTESTOutput">  
      </output>  
    </operation>  
  </portType>  
  <binding name="ZTESTBinding" type="s0:ZTESTPortType">  
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http">  
    </soap:binding>  
    <operation name="ZTEST">  
      <soap:operation soapAction="http://www.sap.com/ZTEST">  
      </soap:operation>  
      <input>  
        <soap:body use="literal">  
        </soap:body>  
      </input>  
      <output>  
        <soap:body use="literal">  
        </soap:body>  
      </output>  
    </operation>  
  </binding>  
  <service name="ZTESTService">  
    <documentation>  
      SAP Service ZTEST via SOAP</documentation>  
    <port name="ZTESTPortType" binding="s0:ZTESTBinding">  
      <soap:address location="http://***.***.com:8000/sap/bc/soap/rfc">  
      </soap:address>  
    </port>  
  </service>  
</definitions> 
```

我创建了一个 Javascript 函数，它发送这样的 post 请求：

```
var webServiceURL = 'http://xxx.xxx.com:8000/sap/bc/soap/wsdl11?sap-client=200&services=ZTEST';  
function createSoapEnvelope(contents) {  
    return '<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" ' +  
      'SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">' +  
      '<SOAP-ENV:Body>' + contents + '</SOAP-ENV:Body></SOAP-ENV:Envelope>';  
}  

function HelloWorld() {  
    var message = createSoapEnvelope("<ZTEST/>");  
    $.ajax({  
        url: webServiceURL,   
        type: "POST",  
        dataType: "xml",   
        data: message,   
        async: false,  
        contentType: "text/xml; charset=\"utf-8\"",  
        success: OnSuccess,   
        processData: false,  
        error: OnError  
    });  

    return false;  
}  

function OnSuccess(data, status) {  
    alert(data.d);  
}  

function OnError(request, status, error) {  
    alert('error');  
}  

HelloWorld(); 
```

当我运行代码时，我停留在描述上。我应该有一个用户列表。

你有解决办法吗？

谢谢！

**编辑 1**

当我去[http://xxx.xxx.com:8000/sap/bc/srt/wsdl/srvc_%5Bguid%5D/wsdl11/allinone/ws_policy/document?sap-client=200](http://xxx.xxx.com:8000/sap/bc/srt/wsdl/srvc_%5Bguid%5D/wsdl11/allinone/ws_policy/document?sap-client=200)

我有这个 ：

```
<soap:Envelope>
  <soap:Body>
    <soap:Fault>
      <faultcode>
        soap:Server</faultcode>
      <faultstring>
        No service definition, interface name, or binding specified</faultstring>
      <detail>
        <slibfault:timestamp>
          Tue, 23 Oct 2012 12:06:02 GMT</slibfault:timestamp>
        <slibfault:exception>
          <slibfault:text>
            No service definition, interface name, or binding specified</slibfault:text>
          <slibfault:position program="CL_SRT_WSP_WSDL_HANDLER_HTTP==CP" include="CL_SRT_WSP_WSDL_HANDLER_HTTP==CM002" line="353 "/>
        </slibfault:exception>
      </detail>
    </soap:Fault>
  </soap:Body>
</soap:Envelope> 
```

当我去这里时：http: [//xxx.xxx.com](http://xxx.xxx.com:8000/sap/bc/srt/rfc/sap/ZTEST/200/ztest/binding) :8000/sap/bc/srt/rfc/sap/ZTEST/200/ztest/binding我有空白页。

在 soamanager 中，当我选择我的 web 服务时，我在配置中有一行：

*   服务：中测
*   端点：ZTEST
*   状态 : 活跃
*   创建类型：手动创建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:58:58.503

看起来您发布到错误的 URI，而且我认为正文也不正确。
由于我无法确定适合您的正确值，因此我创建了一个类似的测试服务。一旦您看到我在工作服务上使用的 URI 和消息，也许您就能找到错误。
我创建了一个`ZTEST`RFC，它只返回一个`message`包含 string 的参数，从中`Hello, World!`生成一个 SOAP 服务，并为它创建一个与`soamanager`事务的绑定（也许您忘记了最后一步？）。结果如下：

WSDL URI：`http://sapserver/sap/bc/srt/wsdl/srvc_[guid]/wsdl11/allinone/ws_policy/document?sap-client=200`

WSDL 指定以下绑定 URI：`http://sapserver/sap/bc/srt/rfc/sap/ztest/200/ztest/binding`
`http://sapserver/sap/bc/srt/rfc/sap/ztest/200/ztest/binding`

向具有以下正文的任一绑定 URI发送 POST 请求（Content-Type `text/xml`）会返回预期结果：

```
<?xml version="1.0" encoding="UTF-8" ?>
<SOAP-ENV:Envelope
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <SOAP-ENV:Header>
        <sapsess:Session xmlns:sapsess="http://www.sap.com/webas/630/soap/features/session/">
            <enableSession>true</enableSession>
        </sapsess:Session>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <ns1:Ztest xmlns:ns1='urn:sap-com:document:sap:soap:functions:mc-style'></ns1:Ztest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# objective-c - 在 cocos2d 中创建我自己的自定义按钮选择器

> ID：13013862
> 
> 赞同：0
> 
> 时间：2012-10-22T14:42:56.630
> 
> 标签：objective-c, cocos2d-iphone

我想做的是创建自己的按钮类，但我需要为开发人员提供拥有自己的按钮回调的能力。

例如，我可以这样声明一个新按钮：

```
Button* myButton = [[Button alloc] init];
// What I want is something like this
[myButton setSelector: @selector(callMe)];

// and I have this method implemented
- (void)callMe
{
    NSLog("I'm being called");
} 
```

在我的按钮类中，我需要一个变量来存储它将调用的函数。例如，在我的 Button 类中：

```
if (onButtonClick)
   [self callSelector]; 
```

我怎样才能做到这一点？

编辑：我在这里找到了一个解决方案： [How to perform Callbacks in Objective-C](https://stackoverflow.com/questions/1015608/how-to-perform-callbacks-in-objective-c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:56:30.383

Simple:

```
if (onButtonClick)
   [self performSelector:callSelector]; 
```

Good time to [read up on the base class of all Objective-C classes (NSObject)](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html) because you'll need stuff like that quite regularly.

# scilab - 如何在 Scilab 中画一条线

> ID：13013869
> 
> 赞同：3
> 
> 时间：2012-10-22T14:43:06.757
> 
> 标签：scilab

我正在尝试在两点之间绘制一条线：a(xa,ya) 和 b(xb,yb)。我怎样才能在 Scilab 中做到这一点？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:28:16.250

我发现使用命令执行此操作很方便`plot`。将顶点组装为 [x0 x1 x2 x3 ...] 和 [y0 y1 y2 y3 ...] 的数组，然后将它们输入`plot`.

因此，要从 (0,0) 到 (30,40) 画一条线，您可以使用：

```
xpts = [0 30];
ypts = [0 40];

plot(xpts, ypts); 
```

您可以给它矩阵，让它在一个命令中绘制多行 -`help plot`在控制台中键入以获取行/列约定的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:16:51.823

您可以使用 `xpoly(x,y)`命令：

**x** :点的**xi**向量

**y** :点**yi**的向量

# css - ie9 间距 - css 无法正常工作

> ID：13013871
> 
> 赞同：0
> 
> 时间：2012-10-22T14:43:11.727
> 
> 标签：css, internet-explorer, internet-explorer-9, font-face

嗨，对某人来说可能很简单。

我已经完成了这个网站的工作，在 ie9 中存在很多行高问题——我什至不知道行高是否是正确的词——间距似乎意味着字母间距。

解释我的问题的最简单方法是使用屏幕截图。

![铬合金](../Images/0a37ff21dd6f358a42d93147652dbda8.png)

![火狐](../Images/090eff718eeb19ab9238806c30cbe8a6.png)

![在此处输入图像描述](../Images/4fa6c19fec7a0509dfe7a3fba1e1d85c.png)

为什么第三个（ie9）如此出局？

该网站的网址是[http://www.geckowebsolutions.co.uk](http://www.geckowebsolutions.co.uk)

可能是字体 .eot 与 otf 的呈现方式不同吗？

如果是这样，我该如何解决这个问题？

丹西奥普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:44:19.090

更改标题以告诉 IE9 遵循现代规范：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

进行 3 项更改：文档类型、html 元素*和*元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:40:50.830

I am not sure why it's happening (trouble shooting in IE sucks) but it's your.breadcrumbs CSS that is being affected. Quick and dirty solution is to add an IE conditional.

```
<!--[if IE]>
<style>
    .breadcrumbs{top:11px;}
</style>
<![endif]--> 
```

# list - 方案列表计数功能

> ID：13013872
> 
> 赞同：1
> 
> 时间：2012-10-22T14:43:19.377
> 
> 标签：list, recursion, count, scheme

我正在尝试编写一个计算列表中所有项目的 Scheme 函数，但与可用的长度函数不同，它也会计算内部列表，因此 countAll '(a (ab)) 将返回 3 而不是 2。

第一个检查是空列表，第二个应该检查列表的头部当前是否是一个列表本身，然后它应该将该列表的长度添加到总数中并调用下一个递归调用，如果它不是' t，它应该简单地跳到第三部分，这将对总数加一并递归调用该函数。

我遇到了语法错误，我不确定我的方法。我会以正确的方式解决这个问题吗？有没有更好/更简单的方法来做到这一点？

```
(define countAll 
  (lambda (list)

    (if (null? list)
        0

        ((if (list? (car list)
                    (+ length (car list)
                       (countAll (cdr list))))))

        (+ 1
           (countAll (cdr list))))))     
  (+ 1
   (countAll(cdr list)
  ))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:21:52.790

你把括号弄得一团糟。我强烈建议使用**cond**重写它，如

```
(cond
  ((null? lst) 0)
  ((list? (car lst)) (???))
  (else (???))) 
```

这将使您更容易看到您在做什么，并且不太可能弄乱括号。除非在最简单的情况下，否则嵌套 if 确实是要避免的。

你的方法*几乎*是正确的，但你错过了一些东西。您对评估为真时会发生什么做出了*很大的假设。*`(list? (car lst))`你能想到它是什么吗？如果你足够认真地考虑它，你会意识到你不能在这里使用**长度**函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:32:06.123

此类问题的解决方案遵循一个众所周知的结构，如果您愿意，可以使用配方，用于遍历列表列表。这看起来像家庭作业，所以我将帮助您了解总体思路，然后您继续填写空白：

```
(define (countAll lst)
  (cond ((null? lst)               ; if the list is empty.
         <???>)                    ; then it doesn't have any elements
        ((not (list? (car lst)))   ; if the first element in the list is not a list
         (<???> (countAll <???>))) ; add one and advance the recursion over the `cdr`
        (else                      ; otherwise
         (+ (countAll <???>)       ; add the result of the recursion over the `car`
            (countAll <???>)))))   ; with the result of the recursion over the `cdr` 
```

如果您需要更多帮助来理解如何为此类处理列表的问题构建解决方案，我建议您查看[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)或[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/)，这两本书都将教您如何深入了解递归一般的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T03:37:02.140

如果你想计算嵌套列表的元素，你可以使用深度递归函数，正如一些人在这里回答的那样。或者我所做的是使用球拍功能（展平）使嵌套列表变平，然后在 1 级列表上使用递归，如下面的代码

```
 (define (howMany ls)
  (if (null? ls)
  0
  (+ 1 (howMany (cdr ( flatten ls  )))))) ; flat the nested list and deal with it as a level 1 list. 
```

# iphone - MapKit - 地图放大时使路线跟随街道

> ID：13013873
> 
> 赞同：5
> 
> 时间：2012-10-22T14:43:20.823
> 
> 标签：iphone, objective-c, ios, google-maps-api-3, mapkit

我编写了一个简单的应用程序，它在 MapKit 上的两个位置之间绘制路线。我正在使用谷歌地图 API。我使用了在网上找到的资源，这是我用来向 Google 发出请求的代码：

```
_httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://maps.googleapis.com/"]];
    [_httpClient registerHTTPOperationClass: [AFJSONRequestOperation class]];
    [_httpClient setDefaultHeader:@"Accept" value:@"application/json"];

    NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];
    [parameters setObject:[NSString stringWithFormat:@"%f,%f", coordinate.latitude, coordinate.longitude] forKey:@"origin"];
    [parameters setObject:[NSString stringWithFormat:@"%f,%f", endCoordinate.latitude, endCoordinate.longitude] forKey:@"destination"];
    [parameters setObject:@"true" forKey:@"sensor"];

    NSMutableURLRequest *request = [_httpClient requestWithMethod:@"GET" path: @"maps/api/directions/json" parameters:parameters];
    request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];    
    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        NSInteger statusCode = operation.response.statusCode;

        if (statusCode == 200)
        {
            NSLog(@"Success: %@", operation.responseString);
        }
        else
        {
            NSLog(@"Status code = %d", statusCode);
        }
    }
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Error: %@",  operation.responseString);

                                      }
     ];

    [_httpClient enqueueHTTPRequestOperation:operation]; 
```

这完美无缺。当我运行它并尝试显示洛杉矶和芝加哥之间的路线时，它是这样的：

![洛杉矶 - 芝加哥路线缩小](../Images/a887f80110ca6839410e348f3ff80b9f.png)

但。当我将地图缩放到街道级别时，路线如下所示：

![洛杉矶 - 芝加哥路线放大](../Images/0aa0b5c24c8e7147df25c5997dfc38ce.png)

有谁知道我怎样才能在地图放大时实现我正在绘制的沿着街道的路线？我想路线显示穿过街道的确切路径。我不知道是否需要在我对 Google 的请求中添加一些额外的参数。

任何帮助或建议都会很棒。提前谢谢了！

* * *

**[编辑#1：添加请求 URL 和来自 Google 的响应]**

从上面的代码创建操作对象后，我的请求 URL 如下所示：

```
http://maps.googleapis.com/maps/api/directions/json?sensor=true&destination=34%2E052360,-118%2E243560&origin=41%2E903630,-87%2E629790 
```

只需将该 URL 粘贴到您的浏览器，您就会看到 Google 发送的 JSON 数据作为我在代码中得到的响应。

* * *

**[编辑#2：解析来自谷歌的答案并构建路径]**

```
- (void)parseResponse:(NSData *)response
{
    NSDictionary *dictResponse = [NSJSONSerialization JSONObjectWithData:response options:NSJSONReadingMutableContainers error:nil];
    NSArray *routes = [dictResponse objectForKey:@"routes"];
    NSDictionary *route = [routes lastObject];

    if (route)
    {
        NSString *overviewPolyline = [[route objectForKey: @"overview_polyline"] objectForKey:@"points"];
        _path = [self decodePolyLine:overviewPolyline];
    }
}

- (NSMutableArray *)decodePolyLine:(NSString *)encodedStr
{
    NSMutableString *encoded = [[NSMutableString alloc] initWithCapacity:[encodedStr length]];
    [encoded appendString:encodedStr];
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSInteger lat=0;
    NSInteger lng=0;

    while (index < len)
    {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;

        do
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);

        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;

        do
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);

        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
        NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];

        CLLocation *location = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:location];
    }

    return array;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:39:30.683

看起来谷歌没有给你所有的分数，或者你没有看到所有的分数。实际上，我希望地标之间有折线，而不仅仅是像您似乎有的地标（带有直线）。

*   检查响应中的 DirectionsStatus 以查看您是否受到限制
*   提供 Google 发回的 json 数据。

我不太确定他们使用的墨卡托投影与谷歌使用的完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:03:08.930

我相信 MapKit 使用的投影与 Google Maps 使用的投影不同。 [**MapKit 使用 Cylindrical Mercator**](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html)，而[**Google 使用 Mercator Projection 的变体**](http://en.wikipedia.org/wiki/Google_Maps#Map_projection)。

> **在坐标系之间转换** 尽管您通常使用纬度和经度值指定地图上的点，但有时您可能需要在其他坐标系之间进行转换。例如，您通常在指定叠加层的形状时使用地图点。

引用[**苹果**](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html)：

# c++ - C++ 文件未读取？

> ID：13013877
> 
> 赞同：1
> 
> 时间：2012-10-22T14:43:40.633
> 
> 标签：c++, io

我想逐行读取文件。做了类似的事情

```
void Parse (string filepath) {
    ifstream sourceFile;
    sourceFile.open(filepath);
    for (string line; getline(sourceFile, line);) {
        cout << "1" << endl;
        cout << line << endl;
    }
}

int main() {
    Parse("C:\\test.txt");

    getchar();
    return 0;
} 
```

然后将一些文本放入`C:\test.txt`，但是当我运行时，我什么也没有得到。为什么？甚至不是“1”。如果文件也不存在，我注意到没有例外。我想这是一个问题的迹象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:46:22.443

您必须手动检查成功/错误。尝试[`ifstream::good()`](http://www.cplusplus.com/reference/iostream/ios/good/)：

```
sourceFile.open(filepath);
if(!sourceFile.good()) {
  // do something 
```

如果您不想手动检查，可以启用[异常](http://www.cplusplus.com/reference/iostream/ios/exceptions/)：

```
// call that before open()
sourceFile.exceptions ( ifstream::failbit | ifstream::badbit ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:48:33.820

我认为您在打开文件时遇到问题。我建议两件事：

*   检查 sourceFile 是否打开成功( `if (sourceFile)`)
*   调试代码并查看代码遵循的代码路径。

编辑：在我的答案中添加问题的实际解决方案（而不仅仅是评论），这样人们就不会错过它：

这里还有一个想法 - 检查其属性中的文件名。发生在我身上，如果windows隐藏文件的扩展名实际上是test.txt.txt，而我看到的只是test.txt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:48:05.567

将您的 for 循环更改为

```
for (string line; sourceFile.good();) {
    getline(sourceFile, line);

} 
```

这样，您在 for 的条件部分检查流的有效性，并在流良好时获取该行。

# database - 如何在 MVC Web 应用程序中使用 FileUpload 类

> ID：13013884
> 
> 赞同：0
> 
> 时间：2012-10-22T14:43:57.410
> 
> 标签：database, asp.net-mvc-3, file-upload

我正在使用[这篇文章](https://stackoverflow.com/questions/10447015/uploading-an-excel-sheet-and-importing-the-data-into-sql-server-database)作为我想做的事情的参考。我正在尝试在我的网络应用程序上添加一个按钮，该按钮允许用户单击按钮将 Excel 文档直接上传到数据库。在我引用的示例中，他们使用 FileUpload 类，但似乎我不知道如何在 Web 应用程序中使用它。

我尝试将其放入服务文件中：

```
 FileUpload fileUpload1 = new FileUpload(); 
```

但我无法在该上下文中引用 fileUpload1 变量。在这一点上，我最好的猜测是这是一个 Web 应用程序，我正在尝试使用 Windows 窗体类。我得到了对 System.Web.UI.WebControls 的引用；当我使用它时。

有什么建议么？

# jquery - Jquery CSSlider loading gif freeze....不加载插件幻灯片？

> ID：13013888
> 
> 赞同：0
> 
> 时间：2012-10-22T14:44:08.640
> 
> 标签：jquery

我最近在我的网络服务器上安装了一个购买的 Jquery 插件，但是当我尝试在我的页面上运行该插件时，它只会在加载 gif 图像时冻结.....我检查了所有指向 css、Jquery、图像等的路径。 ..而且似乎无法找到我在敲打我的大脑大约 4 小时后决定的问题，我需要帮助，所以我希望这里有人可以解决我的问题。指向我的网站的链接 -[请在此处查看代码](http://www.eco-fireplaces.co.uk/index2.html)

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:59:41.587

在控制台中它正在查看错误

“$ 未定义”

这意味着没有或没有正确包含 jQuery 库。

希望有帮助。

# jquery - 使用 jQuery 读取不显眼的数据

> ID：13013894
> 
> 赞同：1
> 
> 时间：2012-10-22T14:44:34.677
> 
> 标签：jquery, unobtrusive

我没有找到任何示例如何使用 jQuery 读取不显眼的数据。例如下面

```
<a id="deleteFile" href="" data="123">Delete file</a> 
```

我想`data`从元素中读取属性。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:47:49.633

您应该使用`data-*`where`*`是您想要使用的密钥：

```
<a id="deleteFile" href="" data-file-id="123">Delete file</a> 
```

然后你可以阅读：

```
$('#deleteFile').data('fileId'); 
```

您会注意到该属性已自动转换为该属性`file-id`以`fileId`符合规范。还应注意，jquery 将尝试将值转换为其 javascript 本机类型。这意味着该访问的值将是一个 javascript`Number`而不是 s 字符串。如果您有前导`0`，这可能会产生影响，因为`01`将转换为`1`. 如果您明确需要将值作为字符串，请使用`attr`：

```
$('#deleteFile').attr('data-file-id'); 
```

您还应该注意，在使用时，`attr`您按原样提供完整的属性名称，而不仅仅是 camelCase 中的数据属性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:46:42.303

最好的方法是只获取元素属性

```
$('#deleteFile').attr('data'); 
```

如果您使用新的 jquery 库版本（我相信高于 1.6），您还可以使用带有 jQ​​uery 的 HTML5 数据属性`data()`。将您的锚链接更改为类似

```
<a id="deleteFile" href="" data-fileid="123">Delete file</a> 
```

那么你可以使用

```
$('#deleteFile').data('fileid'); 
```

但是不要互换使用它们，只使用一种方法，否则您以后可能会遇到问题，因为 jQuerys`data()`只会读取数据属性然后将它们存储在内部缓存中。如果您通过 更改任何内容`data()`，则不会更改实际的标签属性含义`data()`，并且`attr()`此后将返回不同的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T14:47:22.757

最好像这样定义数据属性：

```
<a id="deleteFile" href="" data-id="123">Delete file</a> 
```

然后你可以阅读它：

```
var id = $('#deleteFile').data('id'); 
```

在这种情况下使用这并不是一个好主意`attr`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:52:07.157

如果你想坚持你的编码，那么你可以试试这个

```
var a = $("#deleteFile").attr("data"); 
```

这是一个演示[http://jsfiddle.net/Ht7Eg/3/](http://jsfiddle.net/Ht7Eg/3/)

# audio - 计算 A 加权（或 B 或 C）声压级分贝 iOS

> ID：13013895
> 
> 赞同：2
> 
> 时间：2012-10-22T14:44:42.663
> 
> 标签：audio

**如何计算 iOS 上麦克风的 A 加权和 C 加权 dB 声级？**

这是我尝试过的，但我得到的读数远低于我 iPhone 旁边的声级计：

1.  使用 Novocain 库，我稍作修改，将音频会话模式设置为测量。
2.  使用 Maximilian 音频库通过 FFT 运行传入的音频帧并将幅度转换为 dB。
3.  使用 Maximilian 音频库的 Octave Analyzer 将 FFT 输出放入 10hz 到 20480hz 的倍频程箱中。
4.  对于每个倍频程箱，我应用相关 dB 加权的 db 增益（例如，将`-70.f`db 增益应用于存储在 10hz 箱中的 db 值以获得 A 加权 dB 增益）。
5.  通过将每个 dB bin 减小为幅度，将增益减小为幅度，将每个 bin 的 db 值相加，进行加法，然后再次转换回 dB 值。

这是在正确的轨道上，我有疑问吗？有人可以概述一种方法吗？建议一个图书馆和/或其他例子（我看过）。

*注意——我想要近似的 dB(A) 和 dB(C) 值，这不需要科学。不确定如何补偿麦克风的频率响应，如果补偿麦克风的响应，上述技术是否正确？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T14:43:31.713

我认为您无法通过设备测量物理声压级。在第 2 步中，您“将幅度转换为 dB”。但是，您从设备记录的幅度具​​有任意单位。录制[16 位音频](http://en.wikipedia.org/wiki/Audio_bit_depth)时，音频表示为 -32768 到 +32767 范围内的数字。如果您使用的是浮点数据，那么它会被 32768 归一化，因此它的范围是（大约）-1 到 +1。

该设备的麦克风必须应对各种声级。通常，设备将具有某种形式的[自动增益控制](http://en.wikipedia.org/wiki/Automatic_gain_control)，以适应当前的平均声级。这意味着如果您测量 1.0 的峰值，那么您无法知道它对应的实际 SPL。您可以将录音转换为一系列 dB，但这使用了不同的 dB 定义：作为[功率比](http://en.wikipedia.org/wiki/Decibel)。这与 SPL 测量值（例如 dB(A)）没有相关性。

如果您能够关闭 AGC 并根据您的声级计校准您的设备，则可能会产生一个近似的 dB(A) 测量*值*

编辑：JASA 发表了一篇论文，详细比较了现有 SPL 测量应用程序与统计数据，用于比较不同代 iPhone：[智能手机声音测量应用程序的评估](http://scitation.aip.org/content/asa/journal/jasa/135/4/10.1121/1.4865269)

# jquery - jQuery 插件：嵌套的可排序组件

> ID：13013896
> 
> 赞同：0
> 
> 时间：2012-10-22T14:44:52.210
> 
> 标签：jquery, jquery-ui-sortable

我正在尝试从旧的 Scriptaculous 代码迁移到 jQuery。

这是一个 jsFiddle：http: [//jsfiddle.net/jpencausse/ZmQV6/](http://jsfiddle.net/jpencausse/ZmQV6/)

```
 <div class='column'>
    <div class='box'>...</div>
    <div class='box'>
      <div class='handle'><h3>Box Title</h3></div>
      <div class='box-body'>

        <ul>
          <li>Item 1</li>    
          <li>Item 2
            <ul>
              <li>Item 2-1</li>
              <li>Item 2-2</li>
              <li>Item 2-3</li>
            </ul>
          </li>
          <li>Item 3</li>
        </ul>

      </div>
    </div> 
  </div>
  <div class='column'>...</div> 
```

**我正在寻找一个 jQuery 插件：**

1.  在列中的 .box 之间排序或与其他列连接
2.  在 UL/LI 之间排序（如果箱子有把手）
3.  UL/LI 的嵌套排序
4.  兼容 IE7+、FF、Chrome（可能是 IE9+）
5.  没有 jQuery UI 的重量

**已知图书馆：**

*   html5sortable => 不能做 2\. 和 3.
*   nestedSortable => 不能做 5\. 不确定 2\. + 3.
*   jquery.nestable.js => 不确定 2。

有任何想法吗 ？

至少一种将 html5sortable (clean API) 与 .box 和嵌套 UL 一起使用的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:55:02.070

像这样？它利用 jQuery UI 可排序/拖放

[http://imstillreallybored.com/music/widgets/](http://imstillreallybored.com/music/widgets/)

# python - Sphinx 和 Python，多语言搜索

> ID：13013898
> 
> 赞同：3
> 
> 时间：2012-10-22T14:44:57.990
> 
> 标签：python, full-text-search, search-engine, sphinx

我有一张 UTF-8 格式的表格，名为`tr_transcriptions`. 它以不同语言存储数十条带有“文本”字段的记录。目前支持 34 种语言：南非荷兰语、韩语、阿拉伯语、马拉雅拉姆语、巴哈萨语、普通话、巴哈萨马语、挪威语、克罗地亚语、波兰语、捷克语、葡萄牙语、丹麦语、罗马尼亚语、荷兰语、俄语、英语、斯洛伐克语、佛兰德西班牙语、法语, 瑞典语, 德语, 他加禄语, 希腊语, 泰米尔语, 印地语, 泰卢固语, 匈牙利语, 泰语, 意大利语, 土耳其语, 卡纳达语, 越南语

我想给用户一个搜索这个表的机会。我有几个问题。我无法让它与 Sphinx 一起使用。这是我的配置文件：

```
source transcriptions
{
    type            = mysql
    sql_host        = localhost
    sql_user        = root
    sql_pass        = pass
    sql_db          = transcriptions
    sql_port        = 3306  # optional, default is 3306
    sql_query_pre       = SET NAMES utf8
    sql_query_pre = SET CHARACTER_SET_RESULTS=utf8
    sql_query       = \
        SELECT * \
        FROM tr_transcriptions
}
index tr_transcriptions
{
    source          = transcriptions
    charset_type        = utf-8
charset_table = U+00C0->a, U+00C1->a, U+00C2->a, U+00C3->a, U+00C4->a, U+00C5->a, U+00E0->a, U+00E1->a,\
        U+00E2->a, U+00E3->a, U+00E4->a, U+00E5->a, U+0100->a, U+0101->a, U+0102->a, U+0103->a,\
        U+010300->a, U+0104->a, U+0105->a, U+01CD->a, U+01CE->a, U+01DE->a, U+01DF->a, U+01E0->a,\
        U+01E1->a, U+01FA->a, U+01FB->a, U+0200->a, U+0201->a, U+0202->a, U+0203->a, U+0226->a,\
        U+0227->a, U+023A->a, U+0250->a, U+04D0->a, U+04D1->a, U+1D2C->a, U+1D43->a, U+1D44->a,\
        U+1D8F->a, U+1E00->a, U+1E01->a, U+1E9A->a, U+1EA0->a, U+1EA1->a, U+1EA2->a, U+1EA3->a,\
        U+1EA4->a, U+1EA5->a, U+1EA6->a, U+1EA7->a, U+1EA8->a, U+1EA9->a, U+1EAA->a, U+1EAB->a,\
        U+1EAC->a, U+1EAD->a, U+1EAE->a, U+1EAF->a, U+1EB0->a, U+1EB1->a, U+1EB2->a, U+1EB3->a,\
        U+1EB4->a, U+1EB5->a, U+1EB6->a, U+1EB7->a, U+2090->a, U+2C65->a, U+0180->b, U+0181->b,\
        U+0182->b, U+0183->b, U+0243->b, U+0253->b, U+0299->b, U+16D2->b, U+1D03->b, U+1D2E->b,\
        U+1D2F->b, U+1D47->b, U+1D6C->b, U+1D80->b, U+1E02->b, U+1E03->b, U+1E04->b, U+1E05->b,\
        U+1E06->b, U+1E07->b, U+00C7->c, U+00E7->c, U+0106->c, U+0107->c, U+0108->c, U+0109->c,\
        U+010A->c, U+010B->c, U+010C->c, U+010D->c, U+0187->c, U+0188->c, U+023B->c, U+023C->c,\
        U+0255->c, U+0297->c, U+1D9C->c, U+1D9D->c, U+1E08->c, U+1E09->c, U+212D->c, U+2184->c,\
        U+010E->d, U+010F->d, U+0110->d, U+0111->d, U+0189->d, U+018A->d, U+018B->d, U+018C->d,\
        U+01C5->d, U+01F2->d, U+0221->d, U+0256->d, U+0257->d, U+1D05->d, U+1D30->d, U+1D48->d,\
        U+1D6D->d, U+1D81->d, U+1D91->d, U+1E0A->d, U+1E0B->d, U+1E0C->d, U+1E0D->d, U+1E0E->d,\
        U+1E0F->d, U+1E10->d, U+1E11->d, U+1E12->d, U+1E13->d, U+00C8->e, U+00C9->e, U+00CA->e,\
        U+00CB->e, U+00E8->e, U+00E9->e, U+00EA->e, U+00EB->e, U+0112->e, U+0113->e, U+0114->e,\
        U+0115->e, U+0116->e, U+0117->e, U+0118->e, U+0119->e, U+011A->e, U+011B->e, U+018E->e,\
        U+0190->e, U+01DD->e, U+0204->e, U+0205->e, U+0206->e, U+0207->e, U+0228->e, U+0229->e,\
        U+0246->e, U+0247->e, U+0258->e, U+025B->e, U+025C->e, U+025D->e, U+025E->e, U+029A->e,\
        U+1D07->e, U+1D08->e, U+1D31->e, U+1D32->e, U+1D49->e, U+1D4B->e, U+1D4C->e, U+1D92->e,\
        U+1D93->e, U+1D94->e, U+1D9F->e, U+1E14->e, U+1E15->e, U+1E16->e, U+1E17->e, U+1E18->e,\
        U+1E19->e, U+1E1A->e, U+1E1B->e, U+1E1C->e, U+1E1D->e, U+1EB8->e, U+1EB9->e, U+1EBA->e,\
        U+1EBB->e, U+1EBC->e, U+1EBD->e, U+1EBE->e, U+1EBF->e, U+1EC0->e, U+1EC1->e, U+1EC2->e,\
        U+1EC3->e, U+1EC4->e, U+1EC5->e, U+1EC6->e, U+1EC7->e, U+2091->e, U+0191->f, U+0192->f,\
        U+1D6E->f, U+1D82->f, U+1DA0->f, U+1E1E->f, U+1E1F->f, U+011C->g, U+011D->g, U+011E->g,\
        U+011F->g, U+0120->g, U+0121->g, U+0122->g, U+0123->g, U+0193->g, U+01E4->g, U+01E5->g,\
        U+01E6->g, U+01E7->g, U+01F4->g, U+01F5->g, U+0260->g, U+0261->g, U+0262->g, U+029B->g,\
        U+1D33->g, U+1D4D->g, U+1D77->g, U+1D79->g, U+1D83->g, U+1DA2->g, U+1E20->g, U+1E21->g,\
        U+0124->h, U+0125->h, U+0126->h, U+0127->h, U+021E->h, U+021F->h, U+0265->h, U+0266->h,\
        U+029C->h, U+02AE->h, U+02AF->h, U+02B0->h, U+02B1->h, U+1D34->h, U+1DA3->h, U+1E22->h,\
        U+1E23->h, U+1E24->h, U+1E25->h, U+1E26->h, U+1E27->h, U+1E28->h, U+1E29->h, U+1E2A->h,\
        U+1E2B->h, U+1E96->h, U+210C->h, U+2C67->h, U+2C68->h, U+2C75->h, U+2C76->h, U+00CC->i,\
        U+00CD->i, U+00CE->i, U+00CF->i, U+00EC->i, U+00ED->i, U+00EE->i, U+00EF->i, U+010309->i,\
        U+0128->i, U+0129->i, U+012A->i, U+012B->i, U+012C->i, U+012D->i, U+012E->i, U+012F->i,\
        U+0130->i, U+0131->i, U+0197->i, U+01CF->i, U+01D0->i, U+0208->i, U+0209->i, U+020A->i,\
        U+020B->i, U+0268->i, U+026A->i, U+040D->i, U+0418->i, U+0419->i, U+0438->i, U+0439->i,\
        U+0456->i, U+1D09->i, U+1D35->i, U+1D4E->i, U+1D62->i, U+1D7B->i, U+1D96->i, U+1DA4->i,\
        U+1DA6->i, U+1DA7->i, U+1E2C->i, U+1E2D->i, U+1E2E->i, U+1E2F->i, U+1EC8->i, U+1EC9->i,\
        U+1ECA->i, U+1ECB->i, U+2071->i, U+2111->i, U+0134->j, U+0135->j, U+01C8->j, U+01CB->j,\
        U+01F0->j, U+0237->j, U+0248->j, U+0249->j, U+025F->j, U+0284->j, U+029D->j, U+02B2->j,\
        U+1D0A->j, U+1D36->j, U+1DA1->j, U+1DA8->j, U+0136->k, U+0137->k, U+0198->k, U+0199->k,\
        U+01E8->k, U+01E9->k, U+029E->k, U+1D0B->k, U+1D37->k, U+1D4F->k, U+1D84->k, U+1E30->k,\
        U+1E31->k, U+1E32->k, U+1E33->k, U+1E34->k, U+1E35->k, U+2C69->k, U+2C6A->k, U+0139->l,\
        U+013A->l, U+013B->l, U+013C->l, U+013D->l, U+013E->l, U+013F->l, U+0140->l, U+0141->l,\
        U+0142->l, U+019A->l, U+01C8->l, U+0234->l, U+023D->l, U+026B->l, U+026C->l, U+026D->l,\
        U+029F->l, U+02E1->l, U+1D0C->l, U+1D38->l, U+1D85->l, U+1DA9->l, U+1DAA->l, U+1DAB->l,\
        U+1E36->l, U+1E37->l, U+1E38->l, U+1E39->l, U+1E3A->l, U+1E3B->l, U+1E3C->l, U+1E3D->l,\
        U+2C60->l, U+2C61->l, U+2C62->l, U+019C->m, U+026F->m, U+0270->m, U+0271->m, U+1D0D->m,\
        U+1D1F->m, U+1D39->m, U+1D50->m, U+1D5A->m, U+1D6F->m, U+1D86->m, U+1DAC->m, U+1DAD->m,\
        U+1E3E->m, U+1E3F->m, U+1E40->m, U+1E41->m, U+1E42->m, U+1E43->m, U+00D1->n, U+00F1->n,\
        U+0143->n, U+0144->n, U+0145->n, U+0146->n, U+0147->n, U+0148->n, U+0149->n, U+019D->n,\
        U+019E->n, U+01CB->n, U+01F8->n, U+01F9->n, U+0220->n, U+0235->n, U+0272->n, U+0273->n,\
        U+0274->n, U+1D0E->n, U+1D3A->n, U+1D3B->n, U+1D70->n, U+1D87->n, U+1DAE->n, U+1DAF->n,\
        U+1DB0->n, U+1E44->n, U+1E45->n, U+1E46->n, U+1E47->n, U+1E48->n, U+1E49->n, U+1E4A->n,\
        U+1E4B->n, U+207F->n, U+00D2->o, U+00D3->o, U+00D4->o, U+00D5->o, U+00D6->o, U+00D8->o,\
        U+00F2->o, U+00F3->o, U+00F4->o, U+00F5->o, U+00F6->o, U+00F8->o, U+01030F->o, U+014C->o,\
        U+014D->o, U+014E->o, U+014F->o, U+0150->o, U+0151->o, U+0186->o, U+019F->o, U+01A0->o,\
        U+01A1->o, U+01D1->o, U+01D2->o, U+01EA->o, U+01EB->o, U+01EC->o, U+01ED->o, U+01FE->o,\
        U+01FF->o, U+020C->o, U+020D->o, U+020E->o, U+020F->o, U+022A->o, U+022B->o, U+022C->o,\
        U+022D->o, U+022E->o, U+022F->o, U+0230->o, U+0231->o, U+0254->o, U+0275->o, U+043E->o,\
        U+04E6->o, U+04E7->o, U+04E8->o, U+04E9->o, U+04EA->o, U+04EB->o, U+1D0F->o, U+1D10->o,\
        U+1D11->o, U+1D12->o, U+1D13->o, U+1D16->o, U+1D17->o, U+1D3C->o, U+1D52->o, U+1D53->o,\
        U+1D54->o, U+1D55->o, U+1D97->o, U+1DB1->o, U+1E4C->o, U+1E4D->o, U+1E4E->o, U+1E4F->o,\
        U+1E50->o, U+1E51->o, U+1E52->o, U+1E53->o, U+1ECC->o, U+1ECD->o, U+1ECE->o, U+1ECF->o,\
        U+1ED0->o, U+1ED1->o, U+1ED2->o, U+1ED3->o, U+1ED4->o, U+1ED5->o, U+1ED6->o, U+1ED7->o,\
        U+1ED8->o, U+1ED9->o, U+1EDA->o, U+1EDB->o, U+1EDC->o, U+1EDD->o, U+1EDE->o, U+1EDF->o,\
        U+1EE0->o, U+1EE1->o, U+1EE2->o, U+1EE3->o, U+2092->o, U+2C9E->o, U+2C9F->o, U+01A4->p,\
        U+01A5->p, U+1D18->p, U+1D3E->p, U+1D56->p, U+1D71->p, U+1D7D->p, U+1D88->p, U+1E54->p,\
        U+1E55->p, U+1E56->p, U+1E57->p, U+2C63->p, U+024A->q, U+024B->q, U+02A0->q, U+0154->r,\
        U+0155->r, U+0156->r, U+0157->r, U+0158->r, U+0159->r, U+0210->r, U+0211->r, U+0212->r,\
        U+0213->r, U+024C->r, U+024D->r, U+0279->r, U+027A->r, U+027B->r, U+027C->r, U+027D->r,\
        U+027E->r, U+027F->r, U+0280->r, U+0281->r, U+02B3->r, U+02B4->r, U+02B5->r, U+02B6->r,\
        U+1D19->r, U+1D1A->r, U+1D3F->r, U+1D63->r, U+1D72->r, U+1D73->r, U+1D89->r, U+1DCA->r,\
        U+1E58->r, U+1E59->r, U+1E5A->r, U+1E5B->r, U+1E5C->r, U+1E5D->r, U+1E5E->r, U+1E5F->r,\
        U+211C->r, U+2C64->r, U+00DF->s, U+015A->s, U+015B->s, U+015C->s, U+015D->s, U+015E->s,\
        U+015F->s, U+0160->s, U+0161->s, U+017F->s, U+0218->s, U+0219->s, U+023F->s, U+0282->s,\
        U+02E2->s, U+1D74->s, U+1D8A->s, U+1DB3->s, U+1E60->s, U+1E61->s, U+1E62->s, U+1E63->s,\
        U+1E64->s, U+1E65->s, U+1E66->s, U+1E67->s, U+1E68->s, U+1E69->s, U+1E9B->s, U+0162->t,\
        U+0163->t, U+0164->t, U+0165->t, U+0166->t, U+0167->t, U+01AB->t, U+01AC->t, U+01AD->t,\
        U+01AE->t, U+021A->t, U+021B->t, U+0236->t, U+023E->t, U+0287->t, U+0288->t, U+1D1B->t,\
        U+1D40->t, U+1D57->t, U+1D75->t, U+1DB5->t, U+1E6A->t, U+1E6B->t, U+1E6C->t, U+1E6D->t,\
        U+1E6E->t, U+1E6F->t, U+1E70->t, U+1E71->t, U+1E97->t, U+2C66->t, U+00D9->u, U+00DA->u,\
        U+00DB->u, U+00DC->u, U+00F9->u, U+00FA->u, U+00FB->u, U+00FC->u, U+010316->u, U+0168->u,\
        U+0169->u, U+016A->u, U+016B->u, U+016C->u, U+016D->u, U+016E->u, U+016F->u, U+0170->u,\
        U+0171->u, U+0172->u, U+0173->u, U+01AF->u, U+01B0->u, U+01D3->u, U+01D4->u, U+01D5->u,\
        U+01D6->u, U+01D7->u, U+01D8->u, U+01D9->u, U+01DA->u, U+01DB->u, U+01DC->u, U+0214->u,\
        U+0215->u, U+0216->u, U+0217->u, U+0244->u, U+0289->u, U+1D1C->u, U+1D1D->u, U+1D1E->u,\
        U+1D41->u, U+1D58->u, U+1D59->u, U+1D64->u, U+1D7E->u, U+1D99->u, U+1DB6->u, U+1DB8->u,\
        U+1E72->u, U+1E73->u, U+1E74->u, U+1E75->u, U+1E76->u, U+1E77->u, U+1E78->u, U+1E79->u,\
        U+1E7A->u, U+1E7B->u, U+1EE4->u, U+1EE5->u, U+1EE6->u, U+1EE7->u, U+1EE8->u, U+1EE9->u,\
        U+1EEA->u, U+1EEB->u, U+1EEC->u, U+1EED->u, U+1EEE->u, U+1EEF->u, U+1EF0->u, U+1EF1->u,\
        U+01B2->v, U+0245->v, U+028B->v, U+028C->v, U+1D20->v, U+1D5B->v, U+1D65->v, U+1D8C->v,\
        U+1DB9->v, U+1DBA->v, U+1E7C->v, U+1E7D->v, U+1E7E->v, U+1E7F->v, U+2C74->v, U+0174->w,\
        U+0175->w, U+028D->w, U+02B7->w, U+1D21->w, U+1D42->w, U+1E80->w, U+1E81->w, U+1E82->w,\
        U+1E83->w, U+1E84->w, U+1E85->w, U+1E86->w, U+1E87->w, U+1E88->w, U+1E89->w, U+1E98->w,\
        U+02E3->x, U+1D8D->x, U+1E8A->x, U+1E8B->x, U+1E8C->x, U+1E8D->x, U+2093->x, U+00DD->y,\
        U+00FD->y, U+00FF->y, U+0176->y, U+0177->y, U+0178->y, U+01B3->y, U+01B4->y, U+0232->y,\
        U+0233->y, U+024E->y, U+024F->y, U+028E->y, U+028F->y, U+02B8->y, U+1E8E->y, U+1E8F->y,\
        U+1E99->y, U+1EF2->y, U+1EF3->y, U+1EF4->y, U+1EF5->y, U+1EF6->y, U+1EF7->y, U+1EF8->y,\
        U+1EF9->y, U+0179->z, U+017A->z, U+017B->z, U+017C->z, U+017D->z, U+017E->z, U+01B5->z,\
        U+01B6->z, U+0224->z, U+0225->z, U+0240->z, U+0290->z, U+0291->z, U+1D22->z, U+1D76->z,\
        U+1D8E->z, U+1DBB->z, U+1DBC->z, U+1DBD->z, U+1E90->z, U+1E91->z, U+1E92->z, U+1E93->z,\
        U+1E94->z, U+1E95->z, U+2128->z, U+2C6B->z, U+2C6C->z, U+00C6->U+00E6, U+01E2->U+00E6,\
        U+01E3->U+00E6, U+01FC->U+00E6, U+01FD->U+00E6, U+1D01->U+00E6, U+1D02->U+00E6,\
        U+1D2D->U+00E6, U+1D46->U+00E6, U+00E6, U+0400->U+0435, U+0401->U+0435, U+0402->U+0452,\
        U+0452, U+0403->U+0433, U+0404->U+0454, U+0454, U+0405->U+0455, U+0455, U+0406->U+0456,\
        U+0407->U+0456, U+0457->U+0456, U+0456, U+0408..U+040B->U+0458..U+045B, U+0458..U+045B,\
        U+040C->U+043A, U+040D->U+0438, U+040E->U+0443, U+040F->U+045F, U+045F, U+0450->U+0435,\
        U+0451->U+0435, U+0453->U+0433, U+045C->U+043A, U+045D->U+0438, U+045E->U+0443,\
        U+0460->U+0461, U+0461, U+0462->U+0463, U+0463, U+0464->U+0465, U+0465, U+0466->U+0467,\
        U+0467, U+0468->U+0469, U+0469, U+046A->U+046B, U+046B, U+046C->U+046D, U+046D,\
        U+046E->U+046F, U+046F, U+0470->U+0471, U+0471, U+0472->U+0473, U+0473, U+0474->U+0475,\
        U+0476->U+0475, U+0477->U+0475, U+0475, U+0478->U+0479, U+0479, U+047A->U+047B, U+047B,\
        U+047C->U+047D, U+047D, U+047E->U+047F, U+047F, U+0480->U+0481, U+0481, U+048A->U+0438,\
        U+048B->U+0438, U+048C->U+044C, U+048D->U+044C, U+048E->U+0440, U+048F->U+0440,\
        U+0490->U+0433, U+0491->U+0433, U+0490->U+0433, U+0491->U+0433, U+0492->U+0433,\
        U+0493->U+0433, U+0494->U+0433, U+0495->U+0433, U+0496->U+0436, U+0497->U+0436,\
        U+0498->U+0437, U+0499->U+0437, U+049A->U+043A, U+049B->U+043A, U+049C->U+043A,\
        U+049D->U+043A, U+049E->U+043A, U+049F->U+043A, U+04A0->U+043A, U+04A1->U+043A,\
        U+04A2->U+043D, U+04A3->U+043D, U+04A4->U+043D, U+04A5->U+043D, U+04A6->U+043F,\
        U+04A7->U+043F, U+04A8->U+04A9, U+04A9, U+04AA->U+0441, U+04AB->U+0441, U+04AC->U+0442,\
        U+04AD->U+0442, U+04AE->U+0443, U+04AF->U+0443, U+04B0->U+0443, U+04B1->U+0443,\
        U+04B2->U+0445, U+04B3->U+0445, U+04B4->U+04B5, U+04B5, U+04B6->U+0447, U+04B7->U+0447,\
        U+04B8->U+0447, U+04B9->U+0447, U+04BA->U+04BB, U+04BB, U+04BC->U+04BD, U+04BE->U+04BD,\
        U+04BF->U+04BD, U+04BD, U+04C0->U+04CF, U+04CF, U+04C1->U+0436, U+04C2->U+0436,\
        U+04C3->U+043A, U+04C4->U+043A, U+04C5->U+043B, U+04C6->U+043B, U+04C7->U+043D,\
        U+04C8->U+043D, U+04C9->U+043D, U+04CA->U+043D, U+04CB->U+0447, U+04CC->U+0447,\
        U+04CD->U+043C, U+04CE->U+043C, U+04D0->U+0430, U+04D1->U+0430, U+04D2->U+0430,\
        U+04D3->U+0430, U+04D4->U+00E6, U+04D5->U+00E6, U+04D6->U+0435, U+04D7->U+0435,\
        U+04D8->U+04D9, U+04DA->U+04D9, U+04DB->U+04D9, U+04D9, U+04DC->U+0436, U+04DD->U+0436,\
        U+04DE->U+0437, U+04DF->U+0437, U+04E0->U+04E1, U+04E1, U+04E2->U+0438, U+04E3->U+0438,\
        U+04E4->U+0438, U+04E5->U+0438, U+04E6->U+043E, U+04E7->U+043E, U+04E8->U+043E,\
        U+04E9->U+043E, U+04EA->U+043E, U+04EB->U+043E, U+04EC->U+044D, U+04ED->U+044D,\
        U+04EE->U+0443, U+04EF->U+0443, U+04F0->U+0443, U+04F1->U+0443, U+04F2->U+0443,\
        U+04F3->U+0443, U+04F4->U+0447, U+04F5->U+0447, U+04F6->U+0433, U+04F7->U+0433,\
        U+04F8->U+044B, U+04F9->U+044B, U+04FA->U+0433, U+04FB->U+0433, U+04FC->U+0445,\
        U+04FD->U+0445, U+04FE->U+0445, U+04FF->U+0445, U+0410..U+0418->U+0430..U+0438,\
        U+0419->U+0438, U+0430..U+0438, U+041A..U+042F->U+043A..U+044F, U+043A..U+044F,\
        U+FF10..U+FF19->0..9, U+FF21..U+FF3A->a..z, U+FF41..U+FF5A->a..z, 0..9, A..Z->a..z, a..z\ 
```

但是当我搜索例如阿拉伯语文本时，它没有给我任何结果..但是mysql的LIKE可以。

另外我想问一下，有没有比 Sphinx 更好的搜索服务器？

非常感谢

# mysql - 如何在Ruby（mysql2 gem）中以哈希数组的形式获取结果

> ID：13013899
> 
> 赞同：4
> 
> 时间：2012-10-22T14:45:00.110
> 
> 标签：mysql, ruby, mysql2

我正在使用在这里找到的 Ruby 的 mysql2 gem： [https ://github.com/brianmario/mysql2](https://github.com/brianmario/mysql2)

我有以下代码：

```
client = Mysql2::Client.new(
  :host => dbhost, 
  :port => dbport, :database => dbname,
  :username => dbuser, 
  :password => dbpass)
sql = "SELECT column1, column2, column3 FROM table WHERE id=#{id}"
res = client.query(sql, :as => :array)
p res # prints #<Mysql2::Result:0x007fa8e514b7d0> 
```

上述`.query`调用是否有可能返回哈希数组，数组中的每个哈希都采用`res`format `column => value`。我可以手动执行此操作，但从文档中我留下的印象是我可以将结果以上述格式直接加载到内存中。我需要这个，因为在那之后我无论如何都必须将结果编码为 json，所以我没有优势一一获取行。而且数据量总是很小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T15:08:55.030

改变

```
res = client.query(sql, :as => :array) 
```

至：

```
res = client.query(sql, :as => :hash) 
```

正如@Tadman 所说，`:as => :hash`是默认设置，因此实际上您不必指定任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T14:49:41.483

您始终可以直接以 JSON 格式获取结果：

```
res = client.query(sql, :as => :json) 
```

据我所知，默认格式是哈希数组。如果您想要符号键，则需要询问这些键。其中很多都[记录](https://github.com/brianmario/mysql2)在 gem 本身中。

您还应该*非常*谨慎地使用字符串替换将内容插入查询中。尽可能使用占位符。驱动程序不直接支持这些`mysql2`，因此您应该使用 ActiveRecord 或[Sequel](http://sequel.rubyforge.org/)之类的适配器层。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-28T15:06:09.373

mysql2的[源代码](https://github.com/brianmario/mysql2/blob/0.3.16/lib/mysql2/result.rb)简单地实现了 MySql2::Result `include Enumerable`，因此访问数据的明显方法是使用`Enumerable`[doc here](http://ruby-doc.org/core-1.9.3/Enumerable.html)中实现的任何方法。

例如，#each、#each_with_index、#collect 和 #to_a 都是访问`Result`'s 元素的有用方法。

```
puts res.collect{ |row| "Then the next result was #{row}" }.join("\t") 
```

# ajax - 使用 ajax 更新巨大的 HTML 表格

> ID：13013900
> 
> 赞同：0
> 
> 时间：2012-10-22T14:45:02.087
> 
> 标签：ajax, optimization, prototypejs, updates

有一个包含 2000 多行的表，我需要在每行上定期更新一个 div。我希望每 10 秒更新一次，但页面变得非常缓慢。

服务器有 32gb 内存，我的笔记本电脑有 8gb 内存，两者都至少有两个四核。

这是 div & update 调用：

```
<div id='div_$id' name='div_$id'></div>

<script language='javascript'>
    new Ajax.PeriodicalUpdater('div_$id', 'upd.php',{ 
       method: 'post', 
       frequency: 10, 
       decay: 1, 
       parameters: {id:'$id'}}
    );
</script> 
```

我正在使用最新版本的 Prototype (1.7.0.0)。有没有更快、更好的方法来做到这一点，还是我会被迫将频率回滚到一分钟或更长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:47:23.787

有两种可能的解决方案：

1.  不要使用批量更新。检索更新的 HTML 内容，并比较两个 DOM 子树：当前的和更新的。只有在发现差异时才进行尽可能小的更改 - 文本节点更改，元素插入/删除。查看代码[http://javascripts.svn.sourceforge.net/viewvc/javascripts/javascripts/js.prototype-extensions/js/extensions/element.js?view=markup](http://javascripts.svn.sourceforge.net/viewvc/javascripts/javascripts/js.prototype-extensions/js/extensions/element.js?view=markup) - 文件末尾的函数 updateSmoothly。每个元素都会有新的方法`Element#updateSmoothly(content)`，然后您可以将附加`insertion`选项传递给更新程序：

    ```
    new Ajax.PeriodicalUpdater('div_$id', 'upd.php', { 
      method: 'post', 
      frequency: 10, 
      decay: 1, 
      parameters: {id:'$id'},
      insertion: function(receiver, responseText) {
        receiver.updateSmoothly(responseText);
      }
    }); 
    ```

    此代码在 IE8 更新表中工作约 1300 行，并且 UI 或多或少响应（CPU Core 2 Duo，RAM 3Gb，OS Vista Home）。

2.  使用类似于无限滚动技术的东西可以进行重大优化。UI 用户无论如何*都无法*在屏幕上同时看到所有 2000 多行 - 表格的最大部分不在屏幕上。为什么你需要下载和更新一些甚至不可见的东西？为什么你需要在 DOM 中有一些不可见的东西？只需跟踪表的哪个部分当前可见，并请求服务器更新这部分。当它们离开屏幕时删除行并在它们应该可见时加载新行。

# memory - XNA 使用索引 PNG 8 时是否使用更少的内存

> ID：13013903
> 
> 赞同：1
> 
> 时间：2012-10-22T14:45:06.893
> 
> 标签：memory, xna, png

我正在做一个 XNA 项目，遇到了涉及内存使用的问题。我很好奇对某些纹理使用索引颜色 PNG 8s 与 PNG 24s 或 PNG 32s 是否会释放任何内存。它确实使应用程序更小，但我很好奇当 XNA 的内容管理器加载它们时，它们是否会以某种方式变得未压缩或充当无损图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:50:35.253

我最近[回答](https://stackoverflow.com/a/12995323/165500)了一个类似的问题。

如果您想在分发游戏时节省空间，您可以分发您的 PNG 文件（也可以使用 jpeg）并使用`Texture2D.FromStream`. 请注意，您必须自己处理诸如预乘 alpha 之类的事情。

如果您想节省 GPU 上的空间（这也改进了纹理提取，因为传输的数据量较小），您可以使用较小的纹理格式。[此表](http://blogs.msdn.com/b/shawnhar/archive/2010/03/12/reach-vs-hidef.aspx)中提供了支持的纹理格式列表。

虽然根本不支持托盘化图像（如 PNG8）或 8 位彩色图像，但有几种 16 位格式（`Bgr565`、`Bgra5551`、`Bgra4444`）。[DXT 压缩格式](http://en.wikipedia.org/wiki/S3_Texture_Compression)也可用。它们以 4:1 的比例压缩，不透明的 DXT1 除外，它是 6:1。

您可以同时使用这两种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:47:59.310

在我发布这个问题后，有人刚刚指向我在 Facebook 上的这个链接。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh855082%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh855082%28v=vs.92%29.aspx)

显然，在 XNA 中，任何类型的 PNG 在内存中都是未压缩的，我应该考虑使用 DXT。

# matlab - 在matlab中平均一个向量的每n个元素

> ID：13013911
> 
> 赞同：4
> 
> 时间：2012-10-22T14:45:27.843
> 
> 标签：matlab, vector, average

我想在 Matlab 中平均一个向量的每 3 个值，然后将平均值分配给产生它的元素。

例子：

```
x=[1:12];
y=%The averaging operation; 
```

手术后，

```
y=
[2 2 2 5 5 5 8 8 8 11 11 11] 
```

因此生成的向量大小相同，每 3 个值的跳跃平均值替换用于生成平均值的值（即`1 2 3`替换为三个值的平均值，`2 2 2`）。有没有办法在没有循环的情况下做到这一点？

我希望这是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T14:51:49.707

我会这样：

重塑向量，使其成为一个 3×x 矩阵：

```
x=[1:12];
xx=reshape(x,3,[]);
% xx is now [1 4 7 10; 2 5 8 11; 3 6 9 12] 
```

之后

```
yy = sum(xx,1)./size(xx,1) 
```

现在

```
y = reshape(repmat(yy, size(xx,1),1),1,[]) 
```

产生你想要的结果。

您的参数`3`，表示值的数量，仅在一个地方使用，并且可以在需要时轻松修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T00:57:20.493

您可以使用以下方法找到每个三重奏的平均值：

`x = 1:12;
m = mean(reshape(x, 3, []));`

要复制平均值并重塑以匹配原始向量大小，请使用：

`y = m(ones(3,1), :) % duplicates row vector 3 times
y = y(:)'; % vector representation of array using linear indices`

# quartz-scheduler - Quartz调度程序cron表达式不起作用

> ID：13013912
> 
> 赞同：2
> 
> 时间：2012-10-22T14:45:29.563
> 
> 标签：quartz-scheduler, cronexpression

我想知道为什么这个 Quartz cron 表达式不起作用：

```
<trigger>
         <cron>
            <name>jobtriggername</name>
            <group>groupname</group>
            <job-name>jobname</job-name>
            <job-group>jobgroup</job-group>
            <misfire-instruction>MISFIRE_INSTRUCTION_DO_NOTHING</misfire-instruction>
            <cron-expression>0 0/30 0-6,12,19-23 * * ?</cron-expression>
          </cron>
      </trigger> 
```

当我启动应用程序服务器时，会引发以下异常：

```
ERROR [org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin] (MSC service thread 1-8 ) [] Error scheduling jobs: Encountered 2 validation exceptions.: org.quartz.xml.Vali
dationException: Encountered 2 validation exceptions.
        at org.quartz.xml.XMLSchedulingDataProcessor.maybeThrowValidationException(XMLSchedulingDataProcessor.java:1256)
        at org.quartz.xml.XMLSchedulingDataProcessor.processFile(XMLSchedulingDataProcessor.java:505)
        at org.quartz.xml.XMLSchedulingDataProcessor.processFileAndScheduleJobs(XMLSchedulingDataProcessor.java:886)
        at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.processFile(XMLSchedulingDataProcessorPlugin.java:330)
        at org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin.start(XMLSchedulingDataProcessorPlugin.java:257)
        at org.quartz.plugins.SchedulerPluginWithUserTransactionSupport.start(SchedulerPluginWithUserTransactionSupport.java:144)
        at org.quartz.core.QuartzScheduler.startPlugins(QuartzScheduler.java:2343)
        at org.quartz.core.QuartzScheduler.start(QuartzScheduler.java:527)
        at org.quartz.impl.StdScheduler.start(StdScheduler.java:143)
        at org.quartz.ee.servlet.QuartzInitializerServlet.init(QuartzInitializerServlet.java:211)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873)
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXParseException: cvc-pattern-valid: Value '0 0/30 0-6,12,19-23 * * ?' is not facet-valid with respect to pattern '(((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0
-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-5][0-9]),)*([0-9]|[0-5][0-9]))|(([\*]|[0-9]|[0-5][0-9])(/|-)([0-9]|[0-5][0-9]))|([\?])|([\*]))[\s](((([0-9]|[0-1][0-9]|[2][0-3]),)*([0-9]
|[0-1][0-9]|[2][0-3]))|(([\*]|[0-9]|[0-1][0-9]|[2][0-3])(/|-)([0-9]|[0-1][0-9]|[2][0-3]))|([\?])|([\*]))[\s](((([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1]),)*([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(([1-
9]|[0][1-9]|[1-2][0-9]|[3][0-1])(/|-)([1-9]|[0][1-9]|[1-2][0-9]|[3][0-1])(C)?)|(L(-[0-9])?)|(L(-[1-2][0-9])?)|(L(-[3][0-1])?)|(LW)|([1-9]W)|([1-3][0-9]W)|([\?])|([\*]))[\s](((([1-9]|0[1-9]|1[0-2]),
)*([1-9]|0[1-9]|1[0-2]))|(([1-9]|0[1-9]|1[0-2])(/|-)([1-9]|0[1-9]|1[0-2]))|(((JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC),)*(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|((JAN|FEB|MAR|APR
|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(-|/)(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))|([\?])|([\*]))[\s]((([1-7],)*([1-7]))|([1-7](/|-)([1-7]))|(((MON|TUE|WED|THU|FRI|SAT|SUN),)*(MON|TUE|WED|THU
|FRI|SAT|SUN)(C)?)|((MON|TUE|WED|THU|FRI|SAT|SUN)(-|/)(MON|TUE|WED|THU|FRI|SAT|SUN)(C)?)|(([1-7]|(MON|TUE|WED|THU|FRI|SAT|SUN))?(L|LW)?)|(([1-7]|MON|TUE|WED|THU|FRI|SAT|SUN)#([1-7])?)|([\?])|([\*])
)([\s]?(([\*])?|(19[7-9][0-9])|(20[0-9][0-9]))?| (((19[7-9][0-9])|(20[0-9][0-9]))(-|/)((19[7-9][0-9])|(20[0-9][0-9])))?| ((((19[7-9][0-9])|(20[0-9][0-9])),)*((19[7-9][0-9])|(20[0-9][0-9])))?)' for
type 'cron-expressionType'.
        at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
        at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) 
```

我不认为这是一些深奥的 cron 表达吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T10:09:07.997

请[在此处查看](http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)一些示例。

```
0 0/30 0-6,12,19-23 * * ? 
```

这里`0-6,12,19-23`的部分似乎是问题所在。尝试将其替换为

```
0,1,2,3,4,5,6,12,19,20,21,22,23 
```

尽管其他一些供应商支持复杂的 cron 表达式`0 0/5 14,18,3-39,52 ? JAN,MAR,SEP MON-FRI 2002-2010`，但我认为 Quartz 不支持。如果这不起作用，请提供您的 cron 要求。

# iphone - 如何从应用程序的 plist 中读取 plist

> ID：13013915
> 
> 赞同：-3
> 
> 时间：2012-10-22T14:45:46.580
> 
> 标签：iphone, sdk

任何人都可以建议我如何从应用程序的 plist 文件中读取 plist 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:24:47.960

可以通过`arrayWithContentsOfFile:`方法获取。你需要一个`filePath`你的`.plist`文件。见下面的例子： -

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"PlistFileName" ofType:@"plist"];
NSArray *array = [NSArray arrayWithContentsOfFile:plistPath]; 
```

# windows - 无法在 IE10 浏览器中模拟为 IE7

> ID：13013916
> 
> 赞同：5
> 
> 时间：2012-10-22T14:45:51.460
> 
> 标签：windows, html, browser, internet-explorer-10, emulation

我使用以下行在 Windows 8 专业机中将 IE10 模拟为 IE7。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

如果我在示例 html 中使用这段代码，它可以正常工作并模拟为 IE7。我观察到值 7 使用警告框打印：“ **document.documentMode** ”。

但是，如果我在我的项目中使用相同的代码，它只模拟为 IE10。值 10 已显示在警告框中。

除了这个，没有更多的元标记。此代码适用于仅模拟为 IE7 的 IE7、IE8、IE9。谁能告诉我在哪种情况下它无法效仿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:23:44.557

我经常需要在 IE 7-10 中测试项目，并且发现仿真元标记非常不一致。

我建议从 Microsoft 的新modern.IE 网站为每个版本的 IE（7、8、9 和 10）下载免费 VM。您只需在 Parallels、VMware 或 VirtualBox 中打开每个 VM，您将立即进入一个干净的 Windows 7 版本，并为您安装了适当的 IE 版本。

**在此处为您需要的任何 IE 版本下载 VM：[http ://www.modern.ie/en-us/virtualization-tools#downloads](http://www.modern.ie/en-us/virtualization-tools#downloads)**

**奖励：**他们甚至为您提供了一个简单的 cURL 命令来下载每个 VM。在您的情况下，您可以使用以下命令下载安装了 IE 7 的 Windows Vista 虚拟机：

```
curl -O "https://az412801.vo.msecnd.net/vhd/IEKitV1_Final/VMWare_Fusion/IE7_Vista/IE7.Vista.For.MacVMware.part0{1.sfx,2.rar,3.rar,4.rar}" 
```

# c - 通用添加剂合成程序

> ID：13013918
> 
> 赞同：2
> 
> 时间：2012-10-22T14:45:55.473
> 
> 标签：c, audio, synthesis

我正在尝试编写一个通用的加法合成 c 程序，该程序将生成一个复杂的正弦曲线，该正弦曲线由一系列任意频率的纯正弦波跟随单个包络创建。输入文件将具有这种性质

```
F0     P0                   // a list of up to 100 floats indicating frequencies and 
F1     P1                   // % contribution of this frequency to the sound
F2     P2
....
-1                          // sentinal value to indicate end of frequency list 
B0     A0                   //  first breakpoint
B1     A1
...                         // There can be an arbitary number of breakpoints 
```

我希望我的程序生成一个 WAV 文件，直到最后一个断点，在该断点处，所有正弦波都将以给定的频率生成，缩放到列出的贡献百分比，并加在一起以产生最终的声音

我试图尝试一些 c 编程，但我不是天生的 C 编程，所以这是我到目前为止所做的：

```
#include <stdio.h>
#include <stdlib.h>
#include <portsf.h>
#include <math.h>
#ifndef M_PI
#define M_PI (3.141592654)
#endif

// Additive Synthesis

PSF_PROPS props;
props.srate = 44100;
props.chans = 2;
props.samptype = PSF_SAMP_IEEE_FLOAT;
props.format = PSF_STDWAVE;
props.chformat = STDWAVE;

float* frame;

int sampleNumber;
double angleIncrement;
double frequency;
double sampleRate;
int i;
int twopi = 2.0 * M_PI;

ofd = psf_sndCreate(argv[2],&props,0,0,PSF_CREATE_RDWR);

int main (int argc, char* argv[]) {

sampleNumber = 0;
angleIncrement = twopi * frequency/sampleRate;
while (i < sampleNumber) {
    frame[0] = frame[1] = sin(sampleNumber * angleIncrement);
    sampleNumber++;
    if (fwrite(&sampleout,sizeof(float),1,rawfile) !=1) {
        printf("Error writing to output file.\n");
        return 1;
    }
    if (i <=1000) 
        fprintf(bpfile, "%ld\t%f\n", i, frame);
    phase += angleIncrement;
    if (phase >= twopi)
        phase -= twopi;
}

phase_offset = -1 * PI / 2;
sample_buffer = (float*) malloc(samples * sizeof(float));
// sample_buffer set back to 0
memset(sample_buffer, 0, sizeof(float)*sampleNumber);

// go through the number of harmonics
for (i = 1; i <= NHARMS; i++) {
    amp = 1.0 / i;
    // go through number of sinusoid components
    for (n = 0; n < sampleNumber; n++) { 
        sample_buffer[n] += amp * cos(i * angleIncrement * n + phase_offset);
    }
}       
} 
```

但是，我不确定我是否做对了。关于如何解决此问题并继续进行的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:36:02.940

随着我开始注意到越来越多的小细节，这些评论开始读起来很烦人（但请确保你仍然回答我编译的 Hello World 问题），所以我将它们合并到这个答案中，并会在我看到更多时更新它：

1.  截至目前，`frequency`仅使用一次，并且当时仅使用`0.0`一次。那是你要的吗？
2.  `i`初始化为`0`，`sampleNumber`也开始于`0`。因此`while`条件`(i < sampleNumber)`永远不会执行
3.  `i`永远不会增加但您有一个`if ( i <= 1000 )`条件，因此将始终评估`true`
4.  `sampleRate`被初始化为`0.0`，对它的第一个操作就是除以它，这显然不是快乐时光
5.  显然是迂腐的，但`n`最底层的`for`循环从未被声明过（`int n; for (n = ....)`例如。
6.  在你的`sample_buffer = (float*) malloc(samples * sizeof(float));`行中，`samples`很可能应该是`sampleNumber`，对吧？`samples`从未定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:48:19.823

我同意 AKA4749，并且您还应该做一件事：在添加样本时剪辑样本，否则会出现失真：

```
if ( sample[i] > 1 ) sample[i] = 1;
else if ( sample[i] < -1 ) sample[i] = -1; 
```

# html - 保存为 PDF 时的“奇怪”字符

> ID：13013921
> 
> 赞同：0
> 
> 时间：2012-10-22T14:46:07.403
> 
> 标签：html, character

我有这个pdf文件：

SA Pias - Margaça Branco.pdf

我用它来访问它：

href="SA Pias - Marga%E7a Branco.pdf"

它在浏览器中打开正常，但是当用户要保存它时，会出现那些“奇怪”的字符。

当用户要保存 pdf 时，有什么方法可以显示真实姓名（SA Pias - Margaça Branco.pdf）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:24:05.753

你能用 PHP 吗？

如果是，

您只需要将链接更改为以下内容：

```
href="file.php?strName=Branco" 
```

然后在 file.php 你将不得不添加：

```
header('Content-Disposition: attachment; filename="SA Pias - Margaça Branco.pdf"'); 
```

# javascript - 使用 UTF-16 字符编码编写 Javascript

> ID：13013926
> 
> 赞同：-3
> 
> 时间：2012-10-22T14:46:13.007
> 
> 标签：javascript, web-applications, character-encoding, utf-16

这是我正在尝试的，但不确定如何使其正常工作，或者是否有可能-

1.  我有一个 HTML 页面`MyHTMLPage.htm`，我想 `src`从这个 HTML 文件中获取 Javascript。这很简单。我计划`<script src = "MyJavascript.js"></script>`在我的 HTML 文件中包含一个标签，这应该会处理好它。

2.  但是，我想使用 UTF-16 编码创建我的 Javascript 文件。所以，我打算`<script charset="UTF-16" src="MyJavascript.js"></script>`在我的 HTML 文件中使用以下标签来处理这个问题

3.  现在我真正遇到的问题是如何使用 UTF-16 编码创建 Javascript - 例如，假设我的 Javascript 代码是`alert(1);`我创建的 Javascript 文件，内容为 as`\u0061\u006c\u0065\u0072\u0074\u0028\u0031\u0029\u003b`但在运行时似乎没有作为有效的 Javascript 执行。

总而言之，这就是我所拥有的 -

## MyHTMLPage.html

```
...
...
...
<script charset="UTF-16" src="MyJavascript.js"></script>
...
...
... 
```

## MyJavascript.js

```
\u0061\u006c\u0065\u0072\u0074\u0028\u0031\u0029\u003b 
```

当我在 Firefox 中打开 HTML 页面时，我`Syntax error - Illegal character`在文件的开头收到错误 - “” `MyJavascript.js`。我还尝试`\ufeff`在上述 Javascript 的开头添加 BOM 字符“”，但仍然出现相同的错误。

我知道我可以将我的 Javascript 文件创建为 -“ `alert(1);`”，然后使用文本编辑器使用 UTF-16 编码将其保存，然后浏览器运行良好但是有没有办法可以使用“ `\u`”符号（或替代转义字符）并且仍然可以正常执行 Javascript？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:20:59.793

您误解了字符编码。字符编码是一种在幕后将字符表示为位的方案。

您不会`\u004a`在文件中写入“使其为 utf-16”，因为这实际上是 6 个字符的序列：

`\`, `u`, `0`, `0`, `4`,`a`

如果您将上述内容保存为 utf-16，它将表示为以下位：

```
005C0075
00300030
00340061 
```

如果您将其保存为 utf-8，它将是：

```
5C753030
3461 
```

它占用了 50% 的空间和带宽。从字面上写该字符 ( ) 所需的时间更少`"J"`：只需 utf-8 中的一个字节 ( `4A`)。

-notation`"\u"`是一种仅使用一小组 ascii 字符来引用任何 BMP 字符的方法。如果您使用的是不支持 unicode 的文本编辑器，则可以编写`"\u2665"`，而不是字面编写`"♥"`，浏览器会正确显示它。

如果您出于某种奇怪的原因仍想使用 utf-16，只需正常编写代码，将文件保存为 utf-16 并使用正确的字符集标头提供它。

# java - jboss url表单servlet

> ID：13013928
> 
> 赞同：2
> 
> 时间：2012-10-22T14:46:16.037
> 
> 标签：java, servlets, jboss, jboss6.x

我试图在war文件中创建一个简单的servlet，并将其部署到所有配置中的jboss 6。我的问题是我得到了一个测试jsp文件来使用url“localhost:8080/workbox/”，但我不能在“localhost:8080/workbox/TestServlet/”中调用servlet。servlet 返回“404 不可用”。任何帮助，将不胜感激：

小服务程序源代码：

```
package se.marthin.web;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/TestServlet")
public class TestServlet extends HttpServlet {

       @Override
       protected void doGet(HttpServletRequest req,
                            HttpServletResponse resp)
                            throws ServletException, IOException {
          resp.setContentType("text/html");
          PrintWriter writer = resp.getWriter();
          writer.println("<h1> asdasdadsadsasddas" +
                         "</h1>");
          writer.close();
       }
} 
```

编译后的 .war 文件中的包结构：

```
META-INF/
    MANIFEST.MF
WEB-INF/
    web.xml
    classes/
        se/marthin/web/TestServlet.class
    lib/
index.jsp 
```

web.xml 的源代码：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
  <display-name>Archetype Created Web Application</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:01:03.407

您必须将 servlet 的配置添加到 web.xml。

喜欢：

```
 <servlet>
    <servlet-name>TestServlet</servlet-name>
    <servlet-class>se.marthin.web.TestServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>TestServlet</servlet-name>
    <url-pattern>TestServlet</url-pattern>
  </servlet-mapping> 
```

# python - 你如何在 Django 中使用 rauth？

> ID：13013931
> 
> 赞同：3
> 
> 时间：2012-10-22T14:46:27.210
> 
> 标签：python, django, oauth, oauth-2.0, rauth

OAuth 网站[rauth](https://rauth.readthedocs.org/en/latest/)中提到的 python 库似乎很简单，最好用。所以，我想在 Django 中使用它并且无法实际实现它。

这是我的问题。

```
# I do something like this initially
from rauth.service import OAuth2Service
from django.shortcuts import render_to_response
def page(request):
    service = OAuth2Service(
                           consumer_key = "..",
                           consumer_secret = "...",
                           .. )
    url = service.get_authorize_url(redirect_uri="http://mysite.com/redired-url")
    # this url is where the user accepts or not.
    # which redirects with authorization code.
    return HttpResponseRedirect(url) 
```

现在，当用户打开页面时，它直接重定向并要求用户允许或拒绝。如果用户允许，我们在 redirect-url 获得授权码

要从授权令牌中获取访问令牌，

rauth lib 提到要这样做，我必须将其放在与 redirect-url 对应的不同视图下

```
data = dict(code='foobar',
            grant_type='authorization_code',
            redirect_uri='http://example.com/')
token = service.get_access_token('POST', data=data) 
```

问题出在`service`对象上。我`service`在一个视图中创建了实例，我需要在另一个视图中使用它来获取访问令牌..

我哪里错了..？如何完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:51:25.357

好的，有多种方法可以在 Web 应用程序的上下文中处理此问题。我强烈建议您查看示例目录中的[Facebook Flask 示例](https://github.com/litl/rauth/tree/c6447ddb5427246d58e6c2077bdc71404b4d1def/examples/facebook)。

基本思想是提供授权视图和重定向视图。您希望提供者重定向到重定向视图，并且假设您已获得用户授权，您应该在其中执行您希望能够执行的所有操作。否则，您应该退出并可能告知用户原因。

现在我通常做的是将服务包装器保存在一个单独的模块中，而不是在视图中，然后将它们导入到我需要它们的上下文中。你可以做一些事情来动态初始化它们等等。但是请参考我发布的链接以获得简单的实现。我认为这应该做你想要的。我意识到这不是 Django，但是这些习语与这种简单的视图案例非常接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:29:36.380

**更新**- 经过进一步审查，我发现需要澄清。直到用户在 reddit 身份验证页面上单击“是”之后，您才会获得 access_token。然后，它将使用查询中的代码和状态信息重定向到您在流程开始时提供的 URI。

要接收在 redirect_uri 的视图中发回的 OAuth2 令牌，您需要从视图类/方法中获取 URL 参数：

```
code = request.GET.get('code', '') 
```

这将为您提供一个变量，其中包含从第一个请求生成的代码（它在 URI 中作为参数）。

确保你也检查了你的“状态”变量，以同样的方式检索它，否则你的安全性就会消失。

您从那里做什么取决于您使用的是 rauth 还是 praw，但您可以使用上面收集的信息来生成适当的请求以获取所述访问令牌。

基本上，您的回调视图 (redirect_uri) 处理所有 reddit 验证和处理。大多数情况下，您的初始视图是生成的链接或指向 reddit.com 的重定向。

# php - Why am I getting a dictionary as a result when the result should be an array?

> ID：13013942
> 
> 赞同：0
> 
> 时间：2012-10-22T14:47:00.060
> 
> 标签：php, mongodb, doctrine-orm, doctrine-odm

I am using Doctrine in my PHP app to return a result set using the following code

```
 $dm = $this->get('doctrine.odm.mongodb.document_manager');

        $query = $dm->createQueryBuilder('SomeBundle:Listing')
        ->select('title')
        ->field('userId')->equals(1);

        $listings = $query->getQuery()->execute();
        $listings_array = $listings->toArray(); <--- WHY NOT RETURNING AN ARRAY?????

            $data = array('success'=>true,'listings' => $listings_array, 'displaymessage' => $classifieds->count(). " Listings Found"); 
```

What gets out out is the following:

```
{"success":true,"listings":{"50831582253b4acf09000000":{"id":"50831582253b4acf09000000","title":"fddfds","assets":[],"discussions":[]}},"displaymessage":"1 Listings Found"} 
```

I am wanting an array and not a dictionary.

Any help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:00:45.543

I havent messed with the ODM much but i suspect Doctrine always uses the `key` for the record as the key in the array when calling `toArray` on a collection, it makes it easier for most of the cases when you would want to do this, especially since there is no distinction in php between a `dict`/`hash` and an `array`.

Call `array_values` on it if you want a numerically indexed array.

```
$data = array(
  'success'=>true,
  'listings' => array_values($listings_array), 
  'displaymessage' => $classifieds->count(). " Listings Found"
); 
```

# scala - 如何在 GET 请求 Play 2.0 + Scala 中处理 json 有效负载

> ID：13013943
> 
> 赞同：1
> 
> 时间：2012-10-22T14:47:05.597
> 
> 标签：scala, playframework-2.0

我想为 GET 请求创建一个处理程序/控制器，例如 ElasticSearch ：

```
$ curl -XGET 'http://localhost:9200/twitter/tweet/_search?routing=kimchy' -d '{
"query": {
    "filtered" : {
        "query" : {
            "query_string" : {
                "query" : "some query string here"
            }
        },
        "filter" : {
            "term" : { "user" : "kimchy" }
        }
    }
}} 
```

[我从http://www.playframework.org/documentation/2.0.4/ScalaJsonRequests](http://www.playframework.org/documentation/2.0.4/ScalaJsonRequests)阅读了文档，但该示例基于 POST 请求。我自己尝试过，看来我可以使用 POST 请求访问正文请求。但是，当我尝试使用 GET 请求时，我的 request.body 是 AnyContentAsEmpty。

有没有办法在 Play 2.0 中处理来自这个请求的 json？

* * *

我看到 GET 没有正文语义：[HTTP 请求方法的有效负载](https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods)。所以也许通过Play 2.0没有机制来处理它是正常的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:39:14.223

我相信您对每种类型的请求的期望感到困惑。把它们加起来：

1.  **GET**请求在 URL 中包含有效负载，不添加请求正文
2.  **POST**请求将有效负载添加到请求正文

从您发布的示例中，您似乎希望从 GET 请求中返回 Json 答案，这将更有意义。

这可以通过制作 Json 字符串并使用`Ok(result).as("application/json")`设置响应的 MIME 类型来轻松实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T06:09:34.877

[这是一个示例问题](https://github.com/playframework/playframework/issues/4606)

*Play 的默认正文解析器遵循 HTTP 规范，并忽略 GET、DELETE、HEAD 和 OPTIONS 方法的消息正文。如果要强制它解析主体，可以通过显式传递主体解析器来实现，例如：*

```
 def delete = Action(parse.json) { implicit request =>
   val json = request.body
   val someProp = (json \ "someprop").as[String]
   Ok(s"Prop is: $someProp")
 } 
```

# ios - Xcode 中的帧捕获失败

> ID：13013946
> 
> 赞同：6
> 
> 时间：2012-10-22T14:47:12.010
> 
> 标签：ios, xcode, opengl-es-2.0

我正在使用 Xcode 4.5.1 并在带有 iOS6 的 iPhone5 上进行测试。

我正在使用帧捕获功能没有问题，但它突然停止工作。当我按下抓帧按钮时，似乎抓帧，手机切换到黑屏，只是突然切换回应用程序屏幕，应用程序继续运行。我仍然可以调试和暂停应用程序，但无法获取帧捕获。我也没有在控制台中看到任何错误。

它停止工作的原因是这段代码。此代码应该将某些内容渲染到渲染纹理，但渲染纹理似乎是空白的。我想使用帧捕获功能找出问题所在，但代码本身不会让我捕获...... :(

知道为什么吗？

```
// ------------- init function -----------------
// Create the framebuffer and bind it
glGenFramebuffers(1, &g_framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, g_framebuffer);
//Create the destination texture, and attach it to the framebuffer’s color attachment point.
glGenTextures(1, &g_texture);
glBindTexture(GL_TEXTURE_2D, g_texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,  w, h, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, g_texture, 0);    
//Test the framebuffer for completeness
GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER) ;
if(status != GL_FRAMEBUFFER_COMPLETE) {
    NSLog(@"failed to make complete framebuffer object %x", status);
} else {
    NSLog(@"SkyPlugin initialized");
}

// ----------------- on update  ------------------
glGetIntegerv(GL_FRAMEBUFFER_BINDING, &oldFBO);
glGetIntegerv(GL_VIEWPORT, oldViewPort);
// set the framebuffer and clear
glBindTexture(GL_TEXTURE_2D, 0);
glBindFramebuffer(GL_FRAMEBUFFER, g_framebuffer);
glViewport(0, 0, 32, 32);
//glClearColor(0.9f, 0.1f, 0.1f, 1.0f);
glDisable(GL_DEPTH_TEST);
glClear(GL_COLOR_BUFFER_BIT);
// Set shader   
glUseProgram(m_program);
// do some glEnableVertexAttribArray
// ...
// texture setting
glActiveTexture(GL_TEXTURE0);
glUniform1i(m_uniform, 0);
ResourceManager* resourceManager = ResourceManager::GetInstance();
glBindTexture(GL_TEXTURE_2D, m_texture[0]);
// ----------- Draw -----------
// Draws a full-screen quad to copy textures
static const vertexDataUV quad[] = {
    {/*v:*/{-1.f,-1.f,0}, /*t:*/{0,0}},
    {/*v:*/{-1.f,1,0}, /*t:*/{0,1}},
    {/*v:*/{1,-1.f,0}, /*t:*/{1,0}},
    {/*v:*/{1,1,0}, /*t:*/{1,1}}
};
static const GLubyte indeces[] = {0,2,1,3};
glVertexAttribPointer(m_posAttrib, 3, GL_FLOAT, 0, sizeof(vertexDataUV), &quad[0].vertex);
glVertexAttribPointer(m_texCoordAttrib, 2, GL_FLOAT, 0, sizeof(vertexDataUV), &quad[0].uv);
glDrawElements(GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_BYTE, indeces);
// ------------ End
// go back to the main framebuffer!
glBindFramebuffer(GL_FRAMEBUFFER, oldFBO);
glViewport(oldViewPort[0], oldViewPort[1], oldViewPort[2], oldViewPort[3]);
glEnable(GL_DEPTH_TEST);
//glClearColor(0.1f, 0.1f, 0.1f, 1.0f); 
```

**编辑：（2012 年 10 月 28 日）**

我发现了为什么上面的代码不起作用。我忘了绑定渲染缓冲区！下面的代码有效，但是当此代码处于活动状态时，帧捕获仍然失败......

在初始化时，

// 创建渲染缓冲区并绑定它 glGenRenderbuffers(1, &g_renderbuffer); glBindRenderbuffer(GL_RENDERBUFFER, g_renderbuffer); glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8_OES, w, h);

```
// Create the framebuffer and bind it
glGenFramebuffers(1, &g_framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, g_framebuffer);
glFramebufferRenderbuffer(GL_FRAMEBUFFER,
                          GL_COLOR_ATTACHMENT0,
                          GL_RENDERBUFFER, g_renderbuffer);
//Create the destination texture, and attach it to the framebuffer’s color attachment point.
glGenTextures(1, &g_texture);
glBindTexture(GL_TEXTURE_2D, g_texture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,  w, h, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, g_texture, 0); 
```

更新时，

```
glGetIntegerv(GL_RENDERBUFFER_BINDING, &oldRBO);
glGetIntegerv(GL_FRAMEBUFFER_BINDING, &oldFBO);
glGetIntegerv(GL_VIEWPORT, oldViewPort);

// set the framebuffer and clear
glBindTexture(GL_TEXTURE_2D, 0);
glBindFramebuffer(GL_FRAMEBUFFER, g_framebuffer);
glBindRenderbuffer(GL_RENDERBUFFER, g_renderbuffer);
glViewport(0, 0, 32, 32);

// ... draw stuff ... 
```

更新结束，

```
// go back to the main framebuffer!
glBindFramebuffer(GL_FRAMEBUFFER, oldFBO);
glBindRenderbuffer(GL_RENDERBUFFER, oldRBO); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:36:16.093

这似乎是Xcode的一个错误。最新版本，Xcode 4.5.2 让我捕获帧:)

捕获帧后，这部分代码出现错误：

```
// ... draw stuff ...
glActiveTexture(GL_TEXTURE0);
glUniform1i(MY_TEXTURE, 0); 
```

在 glUniform1i 上，我收到此错误：“指定的操作对当前的 OpenGL 状态无效”。

不知道为什么我会收到这个错误（渲染它正在工作），但我怀疑这个错误可能是我无法在以前版本的 Xcode 中捕获帧的原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T22:38:04.567

我见过非常相似的行为，虽然有点不稳定，但似乎确实与内存使用有关。通常当它失败时，重播应用程序似乎内存不足（失败时我会在控制台中看到内存警告）。

切换到具有更多内存的设备修复了它（iPad 4 从 iPad 3），但我也偶尔可以通过减少使用的纹理内存量来解决它——跳过为我的所有纹理设置顶部 mipmap 通常会释放足够。

# machine-learning - 非线性支持向量机内核维度

> ID：13013948
> 
> 赞同：2
> 
> 时间：2012-10-22T14:47:13.907
> 
> 标签：machine-learning, computer-vision, svm, libsvm, pattern-recognition

我在理解非线性 SVM 的内核方面遇到了一些问题。首先，我对非线性 SVM 的理解是：使用内核将输入转换为一个非常高维度的空间，其中转换后的输入可以由线性超平面分隔。

内核例如：RBF：

```
 K(x_i, x_j) = exp(-||x_i - x_j||^2/(2*sigma^2)); 
```

其中 x_i 和 x_j 是两个输入。在这里，我们需要更改 sigma 以适应我们的问题。

```
 (1) Say if my input dimension is d, what will be the dimension of the 
           transformed space?

       (2) If the transformed space has a dimension of more than 10000 is it 
           effective to use a linear SVM there to separate the inputs? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:24:20.080

转换通常会增加数据的维数，不一定非常高。这取决于。RBF 内核是最流行的内核函数之一。它在每个数据点周围添加了一个“凹凸”。对应的特征空间是一个**无限**维的希尔伯特空间。

在不了解数据的具体背景的情况下，很难判断转换为 10000 维是否对分类有效。但是，为您的问题选择一个好的映射（编码先验知识 + 获得函数类的正确复杂性）可以改善结果。

例如，[MNIST 手写数字数据库](http://yann.lecun.com/exdb/mnist/)包含 60K 训练示例和 10K 测试示例以及 28x28 二进制图像。

*   线性 SVM 的测试误差约为 8.5%。
*   多项式 SVM 的测试误差约为 1%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:38:59.347

好吧，这不仅仅是增加维度的问题。这是一般机制，但不是全部想法，如果内核映射的唯一目标是增加维度是真的，那么可以得出结论，所有内核函数都是等价的，而它们不是。

映射的方式将使新空间中的线性分离成为可能。谈到你的例子，只是为了扩展 greeness 所说的，RBF 内核将根据超球体对特征空间进行排序，其中输入向量需要接近现有球体才能产生激活。

所以直接回答你的问题：

1）请注意，您不直接在特征空间上工作。相反，优化问题是使用特征空间中向量的内积来解决的，因此在计算上您不会增加向量的维度。

2）这将取决于您的数据的性质，具有高维模式会以某种方式帮助您防止过度拟合，但不一定是线性可分的。同样，新空间中的线性可分离性将因为地图的制作方式而实现，而不仅仅是因为它在更高的维度中。从这个意义上说，RBF 会有所帮助，但请记住，如果您的数据不是本地封闭的，它可能无法很好地进行泛化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:51:09.357

您的问题是一个非常自然的问题，几乎每个了解内核方法的人都问过一些变体。但是，我不会尝试根据线性超平面运行的隐含特征空间来理解非线性内核发生了什么，因为大多数非平凡内核具有很难可视化的特征空间。

相反，专注于理解[内核技巧](http://en.wikipedia.org/wiki/Kernel_trick)，并将内核视为在输入空间中引入一种特定形式的非线性决策边界。由于内核技巧，以及如果您不熟悉它的一些相当令人生畏的数学，任何满足某些属性的内核函数都可以被视为在某些特征空间中运行，*但永远不会执行到该空间的映射*。如果您有兴趣，可以阅读以下（相当）可访问的教程：[从零到在十二页或更少的时间内再现内核希尔伯特空间](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.184.3451)。

还要注意，由于根据松弛变量的公式，超平面不必精确地分离点：有一个目标函数被最大化，其中包含对错误分类实例的惩罚，但如果结果分类器的边距可以容忍一些错误分类在大多数情况下更好。基本上，我们正在根据以下标准优化分类规则：

1.  保证金有多大
2.  训练集上的误差

支持向量机公式使我们能够有效地解决这个问题。一个内核或另一个内核是否更好取决于应用程序（例如，文本分类和其他语言处理问题通常使用线性内核显示最佳性能，这可能是由于输入数据的极端维度）。没有真正的替代品可以尝试一堆并查看哪个效果最好（并确保正确设置 SVM 超参数[——LibSVM 作者之一的这篇演讲有血淋淋的细节](http://www.csie.ntu.edu.tw/~cjlin/talks/freiburg.pdf)）。

# sas - 如何以SAS保持格式合并两列

> ID：13013950
> 
> 赞同：3
> 
> 时间：2012-10-22T14:47:18.037
> 
> 标签：sas

我有两列。第一列包含值（计数），第二列包含百分比（来自总人口）。所以我有：

计数百分比

12 (48%)

14 (29%)

89 (50%)

我想要一个包含两个部分的列：

数数

12(48%)

14(29%)

89(50%)

我试过了：

```
data mydata1;
  set mydata;
  countper=catx(' ',count, percent);
run; 
```

和

```
data mydata1;
  set mydata;
  counter=count || percent;
run; 
```

这两种组合，“catx”更成功，但我丢失了括号和百分比以及最初使用的百分比中的小数位数。

我怎样才能按照我的意愿组合这些列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:01:00.733

`countper=catx(' ',vvalue(count), vvalue(percent));`无需重新格式化即可为您完成。

# java - 为什么我不能在我的 servlet 代码中使用 doGet 方法？

> ID：13013951
> 
> 赞同：0
> 
> 时间：2012-10-22T14:47:19.027
> 
> 标签：java, servlets

我是 servlet 的新手，我开发了一个 html 页面，它有一个触发我的 servlet 的提交按钮。一切正常。但现在我想使用 GET 方法，因为我的 html 页面没有发布任何内容。因此我做了以下更改: 1) 在我的 page.html 文件中，我将 method="POST" 替换为 method="GET"。2）我在我的servlet 中用doGet 改变了doPost。但我收到“此处不允许获取”的错误消息。为什么会这样？以下是正常工作的原始文件（在进行更改之前）：

我的 page.html 页面：

```
<html>
<head>
<title>A simple revision of servlets</title>
</head>
<body>
<form method="POST" action="Idiot">
    <input type="SUBMIT">
</form>
</body>
</html> 
```

我的部署描述符：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
<servlet>
<servlet-name>TangoCharlie</servlet-name>
<servlet-class>Revise</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>TangoCharlie</servlet-name>
<url-pattern>/Idiot</url-pattern>
</servlet-mapping>
</web-app> 
```

最后是我的名为 Revise.java 的 servlet 文件

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class Revise extends HttpServlet
{
public void doPost(HttpServletRequest request,HttpServletResponse response) throws IOException,ServletException
{
    response.setContentType("text/html");
    PrintWriter out=response.getWriter();
    out.println("<html><body><h3>Hello India</h3></body></html>");
    out.println("Hello");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:05:04.460

> *我不想添加任何输入字段。我的目标只是在没有使用“POST”方法调用的 html 页面上的单个按钮的情况下运行 servlet。*

只需在`doGet()`方法中完成工作（不要忘记在编辑 servlet 代码后正确重建/重新部署/重新启动项目，否则您仍然会遇到“HTTP 405：不允许方法”错误）并直接调用 servlet 的 URL浏览器地址栏中 JSP 的 URL。

因此，浏览器地址栏中的 URL 应该是

> [http://example.com/contextname/白痴](http://example.com/contextname/Idiot)

代替

> [http://example.com/contextname/page.html](http://example.com/contextname/page.html)

* * *

**与具体问题无关**，在 servlet 中发出 HTML 是糟糕的设计。它应该由 JSP 完成。完成业务逻辑后，您可以使用`RequestDispatcher#forward()`将请求转发到 JSP 。`doGet()`此外，无包类也是一个糟糕的设计。您应该始终将可公开重用的 Java 类放在一个包中。无包 servlet 仅适用于 Tomcat + JVM 版本的某些组合。

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含具体（且设计合理）的 Hello World 示例

# git - 如何将 svn dcommit 用于 svn-all-fast-export Qt 脚本

> ID：13013966
> 
> 赞同：0
> 
> 时间：2012-10-22T14:48:21.857
> 
> 标签：git, svn, git-svn

[我已通过svn-all-fast-export](http://gitorious.org/svn2git)将 subversion 存储库导入到 Git 存储库。

但是，在导入项目后，我不知道如何保持与仍然有一些用户使用的 SVN 的存储库同步。

我找不到使用方法`git svn fetch`或`git svn dcommit`完成导入后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T11:06:18.890

SVN2Git 用于 1-shot 转换。对于服务器上的 SVN <-> Git 同步，您需要设置任何 SVN-Git 网关，例如[SubGit](http://subgit.com)。为此在服务器上运行

```
$ subgit install path/to/svn/repository 
```

并设置 Git 访问在创建的 Git 存储库`path/to/svn/repository/.git`

或者，您可以在本地使用[git-svn ，而在服务器上只使用 SVN。](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)要开始使用 SVN 存储库，请先克隆它：

```
$ git svn clone <URL> --stdlayout path/for/local/git/repository 
```

从 SVN 运行中获取更改`git svn rebase`并推送当前分支 ---`git svn dcommit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T17:14:46.113

`svn-all-fast-export`是增量的，如果您小心不要删除标记和日志文件。因此，您可以定期在您的 SVN 存储库上运行它，它会更新 git 存储库。

# c# - 我应该序列化哪些字段和属性？

> ID：13013967
> 
> 赞同：4
> 
> 时间：2012-10-22T14:48:25.460
> 
> 标签：c#, serialization, protobuf-net

我不认为这是重复的。我已经阅读了一些内容，但没有找到与此相同的内容。似乎字段可以在二进制格式化程序和 protobuf 中序列化，但不能在 XML 中序列化。我不知道JSON。

我正在考虑用 protobuf-net 替换标准的 .NET 二进制序列化程序。原因是为了提高速度并获得更小的持久文件大小。

在 NET Binary 中，我只是将这些类标记为可序列化并保留它。我怀疑不好。

使用 protobuf-net，我需要使用 [ProtoMember()] 属性指定要序列化的内容。我的新手测试表明，如果标记为自动属性，则私有字段会被序列化。

我根本不想更改类代码定义，因为我仍然需要能够反序列化由 NET 序列化程序创建的旧持久数据。我混合了：

1.  在类中使用的私有字段
2.  其值在构造函数中设置的私有字段
3.  作为非自动属性的支持字段的私有字段
4.  具有上述支持字段的属性
5.  自动属性
6.  没有设置器的属性返回一些内部确定的计算或值

可能还有其他一些。换句话说，几乎所有类型的字段和属性。

我想我需要保留任何表示从文件反序列化后无法构造的对象状态的值。

我想保留每个字段和属性不会有什么害处，但这只会使工作变慢并且文件比它需要的大。

我想我可以忽略只在类内部使用而不是从外部设置的私有字段。我想我应该坚持那些在构造函数中设置的字段。我不确定支持字段 - 保留它们还是保留它们的公共财产更好？我必须坚持自动属性我不能坚持没有设置器的属性，所以我需要坚持在他们的计算中使用的任何字段/属性。

我是在正确的轨道上还是错过了重点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:36:00.477

我们不能说什么需要序列化。`BinaryFormatter`在“所有字段”的基础上工作（除非它们被明确标记为不用于序列化）。您*可以*使用相同的方法，但如果您使用自动实现的属性（这很好），请注意您*不能*将属性添加到支持字段 - 与类似字段的事件不同，以下***内容无效 c#***：

```
[field:ProtoMember(1)] // not valid
public int X { get; set; } 
```

这意味着您唯一明智的选择是装饰房产：

```
[ProtoMember(1)]
public int X { get; set; } 
```

因为，如果您将自动实现的属性更改为常规属性，您将破坏`BinaryFormatter`'s 的反序列化，因为字段名称将已更改。*不过这很好 - 将字段或*属性（或两者都标记为同一类型）以进行序列化并没有错。某些平台上的另一个考虑因素是可访问性：私有字段可能无法访问，而公共字段可以正常工作。显然，公共领域非常少见。

所以：

*   决定什么需要序列化（我不能告诉你这个）
*   将其标记为序列化
*   如果您需要继续工作，请不要将任何东西从自动实现的属性更改为常规属性`BinaryFormatter`（protobuf-net 不在乎您是否更改它）

# html - 运行到每个 otehr 的 twitter 引导文本

> ID：13013968
> 
> 赞同：0
> 
> 时间：2012-10-22T14:48:30.607
> 
> 标签：html, css, twitter-bootstrap

我正在尝试在我的网页上创建一个大文本标题。我正在使用 Twitter Bootstrap，看起来 span12 没有调整到文本大小。

当我缩小浏览器屏幕时，而不是文本换行到另一行，字母基本上相互挤压。我想让 row / span12 列调整为文本的大小，而不是保持高度固定。有谁知道我该怎么做？

这是代码：

```
#meettheteam {
        border: 1px solid red;
        font-weight: bold;
        font-family: garamond, 'times new roman',serif;
        font-size: 96px;

    } 
```

这是HTML：

```
 <div class='container-fluid'>
    <div class='row-fluid' style='border: 1px solid red;'>
    <div id='meettheteam' class='span12 pagination-centered' style='border: 1px solid yellow;'>
MEET THE TEAM
</div>
</div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:52:45.030

`border`我已经看到当你有一个周围的`div`时候，引导程序在调整大小时会遇到问题`span`。这可能是问题的一部分。跨度设计为具有特定的宽度，当您添加边框时，它会引发计算。如果你想有一个边框，把它放在一个带有跨度的 div 内的 div 上。如果您删除它并且它仍然不起作用，请发布更多信息。例如，你的`pagination-centered`班级在做什么？

# php - php文本文件解析

> ID：13013969
> 
> 赞同：0
> 
> 时间：2012-10-22T14:48:29.670
> 
> 标签：php, parsing, text

我有一个名为 file.txt 的文本文件。file.txt 的内容如下：

```
tarek
shourav 
```

当我运行以下代码时

```
<?

$a=file('file.txt');

foreach ($a as $b) {
echo $b;
echo "<br>";
echo strlen($b);
echo "<br>";
}

?> 
```

它给出了输出

```
tarek 
7
shourav
7 
```

但它应该给出输出

```
tarek
5
shourav
7 
```

谁能告诉我，我在哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:51:19.980

猜测你的第一行末尾有 CR/LF

```
$a=file('file.txt', FILE_IGNORE_NEW_LINES); 
```

# rest - asp.net Web Api - 默认错误消息

> ID：13013973
> 
> 赞同：8
> 
> 时间：2012-10-22T14:48:42.820
> 
> 标签：rest, error-handling, asp.net-web-api

有没有办法改变 Web Api 对错误消息的默认行为，例如：

```
GET /trips/abc 
```

回应（转述）：

```
HTTP 500 Bad Request

{
    "Message": "The request is invalid.",
    "MessageDetail": "The parameters dictionary contains a null entry for parameter 'tripId' of non-nullable type 'System.Guid' for method 'System.Net.Http.HttpResponseMessage GetTrip(System.Guid)' in 'Controllers.TripController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter."
} 
```

我想避免给出关于我的代码的这个相当详细的信息，而是用类似的东西替换它：

```
HTTP 500 Bad Request
{
    error: true,
    error_message: "invalid parameter"
} 
```

我可以在 UserController 中做到这一点，但代码执行甚至没有那么远。

编辑：

我找到了一种从输出中删除详细错误消息的方法，使用 Global.asax.cs 中的这行代码：

```
GlobalConfiguration.Configuration.IncludeErrorDetailPolicy =
IncludeErrorDetailPolicy.LocalOnly; 
```

这会产生如下消息：

```
{
    "Message": "The request is invalid."
} 
```

哪个更好，但不完全是我想要的 - 我们指定了许多数字错误代码，这些代码映射到客户端的详细错误消息。我只想输出适当的错误代码（我可以在输出之前选择，最好通过查看发生的异常类型），例如：

```
{ error: true, error_code: 51 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:37:24.263

即使您想隐藏有关实际异常的详细信息，您也可能希望将数据的形状保持为 HttpError 类型。为此，您可以添加自定义 DelegatingHandler 来修改服务抛出的 HttpError。

下面是 DelegatingHandler 的样例：

```
public class CustomModifyingErrorMessageDelegatingHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        return base.SendAsync(request, cancellationToken).ContinueWith<HttpResponseMessage>((responseToCompleteTask) =>
        {
            HttpResponseMessage response = responseToCompleteTask.Result;

            HttpError error = null;
            if (response.TryGetContentValue<HttpError>(out error))
            {
                error.Message = "Your Customized Error Message";
                // etc...
            }

            return response;
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T20:33:49.720

Maggie 的回答也对我有用。感谢您的发布！

只是想对她的代码做一些补充说明：

```
HttpResponseMessage response = responseToCompleteTask.Result;
HttpError error = null;

if ((!response.IsSuccessStatusCode) && (response.TryGetContentValue(out error)))
{
    // Build new custom from underlying HttpError object.
    var errorResp = new MyErrorResponse();

    // Replace outgoing response's content with our custom response
    // while keeping the requested MediaType [formatter].
    var content = (ObjectContent)response.Content;
    response.Content = new ObjectContent(typeof (MyErrorResponse), errorResp, content.Formatter);
}

return response; 
```

在哪里：

```
 public class MyErrorResponse
   {
       public MyErrorResponse()
       { 
          Error = true; 
          Code = 0; 
       }

       public bool Error { get; set; }
       public int Code { get; set; }
   } 
```

# gwt - 切换 UI:Binder Widgets 在运行时

> ID：13013975
> 
> 赞同：1
> 
> 时间：2012-10-22T14:48:51.093
> 
> 标签：gwt, uibinder

我想要一个 UI:Binder 生成的页面，我可以在运行时切换部分 UI。这是一个例子：

```
//...More UI Binder stuff
<g:Widget ui:field="generalWidget" />
//...More UI Binder stuff 
```

现在在我的视图实现中，我想更改 generalWidget 显示的确切小部件类型。例如，我希望能够做这样的事情：

```
@UiBinder Widget generalWidget;
...
if (<condition>) 
   generalWidget = new TabLayoutPanel(...);
else
   generalWidget = new FlowPanel(...); 
```

但是，这对我不起作用。当我点击页面时，我得到：

```
java.lang.AssertionError: This UIObject's element is not set; you may be missing a call to either Composite.initWidget() or UIObject.setElement() 
```

在开发日志中。据我所知，这是因为我使用了 g:widget，因为如果我直接使用面板，它就可以工作。

解决此问题并获得我想要的切换小部件行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:53:38.700

你错过`provided = true`了`@UiField`：

```
@UiField(provided = true) Widget generalWidget; 
```

当然，请确保在调用之前分配该字段`createAndBindUi`！

# titanium - 将使用 Titanium 开发的 Android 应用程序部署到 Google Play 商店的步骤

> ID：13013976
> 
> 赞同：1
> 
> 时间：2012-10-22T14:48:57.437
> 
> 标签：titanium, google-play

我正在使用 Titanium Studio 来构建我的应用程序，我已经在 iPhone 的应用商店中发布了它。

但现在我正在尝试将其发布到 Google Play 商店。以下是我正在遵循的步骤，如果我做错了请告诉我

**1) 创建了一个 Google Publisher 帐户（以访问 Google Play 控制台）**

**2) 在 Titanium Studio 中构建我的应用程序，并`app.apk`从`/build/android/bin`目录中复制文件**

**3) 将此文件上传`app.apk`到 Google Play 商店**

我知道我应该在发布之前向应用添加更多详细信息，例如 appicon、屏幕截图。

但这是正确的程序吗？因为我可以在一些文章中看到建议创建私钥来打包 app.apk 文件。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:33:41.817

balanv 这里是我为统一签署 APK 的链接：http: [//answers.unity3d.com/questions/149094/android-apk-signing.html](http://answers.unity3d.com/questions/149094/android-apk-signing.html)

或者更接近您的问题：

[https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market](https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market)

另请查看[https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market](https://wiki.appcelerator.org/display/guides/Packaging+for+the+Android+Market)

# django - 仅使用 pip 和虚拟环境（而不是使用 zc.buildout）安装 django-lfs（闪电快店）

> ID：13013979
> 
> 赞同：0
> 
> 时间：2012-10-22T14:49:10.480
> 
> 标签：django, web-applications, installation, django-lfs

[这里](http://docs.getlfs.com/en/latest/introduction/installation.html)是`django-lfs`using的安装`zc.buildout`。

有谁知道你最好如何在没有`zc.buildout`和使用`pip`and a 的情况下安装它`virtual evnvironment`？

```
$ mkvirtualenv shop_project
(shop_project)$ pip install django-lfs
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:03:17.147

[django-lfs-bootstrap](https://github.com/MrTango/django-lfs-bootstrap)是我一直在寻找的。

# objective-c - 为什么当我触摸 UITableView 时它会显示数据？

> ID：13013980
> 
> 赞同：0
> 
> 时间：2012-10-22T14:49:12.903
> 
> 标签：objective-c, ios, uitableview

我有一个 UITableView 加载一些推文，一切都很好，但是当我填充表格时，它不会进入 CellForRow 方法，直到我触摸表格视图....有人知道如何解决这个问题吗？

```
 tab = [[UITableView alloc] initWithFrame:CGRectMake(10, 300, 400, 200) style:UITableViewStylePlain];
 tab.dataSource = self;
 tab.delegate = self; 
```

然后...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"entra a cellula");
    Tweet *t = [tweets objectAtIndex:indexPath.row];

    static NSString *MyIdentifier = @"MyIdentifier";

    // Try to retrieve from the table view a now-unused cell with the given identifier.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    // If no cell is available, create a new one using the given identifier.
    if (cell == nil) {
        // Use the default cell style.
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MyIdentifier];
    }

    cell.textLabel.text = t.screenName;
    cell.detailTextLabel.text = t.text;
    cell.imageView.image = t.profileImage;
return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:40:52.080

根据我们所知道的最好的猜测是，您没有将表格添加为主线程上的子视图。这意味着在滚动之前不会发生重绘。尝试将 addsubview 调用包装在 GCD 调用中，如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^() {
    [self addSubview:tab];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:22:26.957

加载完推文后，调用此方法：

```
[tab reloadData]; 
```

重新加载您的 tableView 数据源。

# android - Drawable.getIntrinsicWidth() 的尺寸错误

> ID：13013986
> 
> 赞同：3
> 
> 时间：2012-10-22T14:49:22.117
> 
> 标签：android, image

我使用以下代码下载图像：

```
ImageGetter imageGetter = new ImageGetter() {
    @Override
    public Drawable getDrawable(String source) {
        Drawable drawable = null;
        try {
            URL url = new URL(source);
            String path = Environment.getExternalStorageDirectory().getPath()+"/Android/data/com.my.pkg/"+url.getFile();
            File f=new File(path);
            if(!f.exists()) {
                URLConnection connection = url.openConnection();
                InputStream is = connection.getInputStream();

                f=new File(f.getParent());
                f.mkdirs();                 

                FileOutputStream os = new FileOutputStream(path);
                byte[] buffer = new byte[4096];
                int length;
                while ((length = is.read(buffer)) > 0) {
                    os.write(buffer, 0, length);
                }
                os.close();
                is.close();
            }
            drawable = Drawable.createFromPath(path);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (Throwable t) {
            t.printStackTrace();
        }
        if(drawable != null) {
            drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());
        }
        return drawable;
    }
}; 
```

此图像的尺寸为 20x20。但是 drawable.getIntrinsicWidth() 和 drawable.getIntrinsicHeight() 返回 27。而且图像看起来更大。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T18:01:55.113

我尝试了答案中的代码，但没有奏效。因此，我使用了下面的代码，它运行良好。

```
 DisplayMetrics dm = context.getResources().getDisplayMetrics();

     Options options=new Options();
     options.inDensity=dm.densityDpi;
     options.inScreenDensity=dm.densityDpi;
     options.inTargetDensity=dm.densityDpi;      

     Bitmap bmp = BitmapFactory.decodeFile(path,options);
     drawable = new BitmapDrawable(bmp, context.getResources()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T15:45:07.433

BitmapDrawable 必须缩放位图以补偿不同的屏幕密度。

如果您需要它逐像素绘制，请尝试将 Drawable 的源密度和目标密度设置为相同的值。为此，您需要使用稍微不同的对象。

代替

```
drawable = Drawable.createFromPath(path); 
```

采用

```
Bitmap bmp = BitmapFactory.decodeFile(path);
DisplayMetrics dm = context.getResources().getDisplayMetrics();
bmp.setDensity(dm.densityDpi);
drawable = new BitmapDrawable(bmp, context.getResources()); 
```

如果您没有上下文（您应该），您可以使用应用程序上下文，请参阅例如[在任何地方使用应用程序上下文？](https://stackoverflow.com/questions/987072/using-application-context-everywhere)

由于位图的密度设置为资源的密度，这是实际设备屏幕的密度，所以它应该在没有缩放的情况下绘制。

# ruby - Ruby：如何使用方括号 [ 和 ] 转义 url？

> ID：13013987
> 
> 赞同：12
> 
> 时间：2012-10-22T14:49:24.660
> 
> 标签：ruby, url, escaping

这个网址：

```
http://gawker.com/5953728/if-alison-brie-and-gillian-jacobs-pin-up-special-doesnt-get-community-back-on-the-air-nothing-will-[nsfw] 
```

应该：

```
http://gawker.com/5953728/if-alison-brie-and-gillian-jacobs-pin-up-special-doesnt-get-community-back-on-the-air-nothing-will-%5Bnsfw%5D 
```

但是当我将第一个传递给 时`URI.encode`，它不会转义方括号。我也试过`CGI.escape`了，但这也逃脱了所有的“/”。

我应该使用什么来正确转义 URL？为什么不`URI.encode`转义方括号？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-27T19:06:59.740

您可以`[`使用`%5B`和逃脱`]`。`%5D`

您的网址将是：

```
URL.gsub("[","%5B").gsub("]","%5D") 
```

我不喜欢那个解决方案，但它正在工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T15:02:54.217

`encode`不会转义括号，因为它们并不特殊——它们在 URI 的路径部分没有特殊含义，因此它们实际上不需要转义。

如果您想转义除“不安全”字符之外的字符，请将第二个 arg 传递给 encode 方法。该 arg 应该是一个正则表达式匹配，或者一个包含您想要编码的每个字符的字符串（*包括*函数本来已经匹配的字符！）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-04T09:23:31.340

如果可以选择使用第三方 gem，请尝试[addressable](https://github.com/sporkmonger/addressable)。

```
require "addressable/uri"

url = Addressable::URI.parse("http://[::1]/path[]").normalize!.to_s
#=> "http://[::1]/path%5B%5D" 
```

注意规范化！方法不仅会转义无效字符，还会对主机名部分执行大小写折叠，对不必要的转义字符等进行取消转义：

```
uri = Addressable::URI.parse("http://Example.ORG/path[]?query[]=%2F").normalize!
url = uri.to_s #=> "http://example.org/path%5B%5D?query%5B%5D=/" 
```

因此，如果您只想规范化路径部分，请执行以下操作：

```
uri = Addressable::URI.parse("http://Example.ORG/path[]?query[]=%2F")
uri.path = uri.normalized_path
url = uri.to_s #=> "http://Example.ORG/path%5B%5D?query[]=%2F" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-17T15:12:11.407

根据[新的 IP-v6 语法](http://www.ietf.org/rfc/rfc2732.txt)，可能会有这样的 url：

```
http://[1080:0:0:0:8:800:200C:417A]/index.html 
```

因此，我们应该只在 url 的 host 部分之后转义 [] ：

```
if url =~ %r{\[|\]}
  protocol, host, path = url.split(%r{/+}, 3)
  path = path.gsub('[', '%5B').gsub(']', '%5D') # Or URI.escape(path, /[^\-_.!~*'()a-zA-Z\d;\/?:@&%=+$,]/)
  url = "#{protocol}//#{host}/#{path}"
end 
```

# php - 如何获取 Facebook 上一张图片的点赞数？

> ID：13013988
> 
> 赞同：0
> 
> 时间：2012-10-22T14:49:36.173
> 
> 标签：php, facebook, facebook-like

我想在 Facebook 中获取一张图片的点赞数，并将其显示在我的网站上。

我设法找到了它的 FQL 查询：

```
SELECT like_info FROM photo WHERE object_id=10152003701188306 
```

[当我在http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)尝试该查询时，我得到了`like_count = 792`.

我有每个 Facebook 连接设置和工作（应用程序 ID + 密钥）。我检查了我的 URL 的调试器，它有所有需要的元标记。

我设法编写了这段代码，但它给了我一个空的结果而不是一个数字。

```
$result = $facebook->api(array(         
          'method' => 'fql.query',   
          'query' => 'SELECT like_info FROM photo WHERE object_id=10152003701188306'  
      ));  
echo $result['like_count']; 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:15:15.673

FQL 返回的数组很大很复杂。你需要：

```
echo $result['data']['like_info']['like_count']; 
```

要查看查询中返回的所有内容，请使用以下代码：

```
printf('<pre>%s</pre', print_r($result,TRUE) ); 
```

# java - 如何调整 JTable 列以适应列单元格中最长的内容

> ID：13013989
> 
> 赞同：11
> 
> 时间：2012-10-22T14:49:37.290
> 
> 标签：java, swing, jtable, jgoodies, tablecolumn

我正在使用答案[https://stackoverflow.com/a/5820366](https://stackoverflow.com/a/5820366)和[http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)它可以工作，但通常列的大小太大宽或太窄。

无论用 HTML 或文本填充我的表格。

使用`TableModel`oracle 文档中的标准。

调整大小模式 = JTable.AUTO_RESIZE_OFF

我的表的容器是 jGoodies：

```
FormLayout currentEventLayout = new FormLayout(
            "fill:p",
            "pref, pref");
PanelBuilder currentEventBuilder = new PanelBuilder(currentEventLayout);
currentEventBuilder.add(mainQuotesTable.getTableHeader(), constraints.xy(1, 1));
currentEventBuilder.add(mainQuotesTable, constraints.xy(1, 2)); 
```

HTML 示例：

```
"<html><pre><font size=+1 face='Arial'>" + firstValue + "\n" + secondValue + "</font></pre></html>" 
```

简单的行：

```
firstValue + " - " + secondValue 
```

这是示例：

```
public class TableAdjustExample {
private static JTable mainTable;
private static Random random = new Random();

private static List<Data> data;

private static class Data {
    String name;
    String surname;

    private Data(String name, String surname) {
        this.name = name;
        this.surname = surname;
    }
}

public static void main(String[] args) {
    data = stubProvider();

    final JFrame frame = new JFrame("table adjust example");
    frame.add(createUI());
    frame.pack();
    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setSize(350, 400);
    frame.setVisible(true);

    update();
    java.util.Timer timer = new java.util.Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            update();
        }
    }, 3000, 3000);
}

private static JPanel createUI() {
    JPanel jPanel = new JPanel();
    mainTable = new JTable(2, 3);
    mainTable.setModel(new AbstractTableModel() {
        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Data dataItem = data.get(rowIndex);
            if (columnIndex == 0) {
                return dataItem.name;
            }
            if (columnIndex == 1) {
                return dataItem.surname;
            }
            throw new IllegalStateException();
        }
    });
    mainTable.setGridColor(Color.black);
    mainTable.setShowHorizontalLines(false);
    mainTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

    final TableCellRenderer defaultRenderer = mainTable.getTableHeader().getDefaultRenderer();
    mainTable.getTableHeader().setDefaultRenderer(new TableCellRenderer() {
        @Override
        public Component getTableCellRendererComponent(JTable jTable, Object o, boolean b, boolean b1, int row, int column) {
            JLabel parent = (JLabel) defaultRenderer.getTableCellRendererComponent(jTable, o, b, b1, row, column);
            if (column == 0) {
                parent.setText("name");
            } else {
                parent.setText("surname");
            }
            return parent;
        }
    });

    jPanel.add(mainTable.getTableHeader());
    jPanel.add(mainTable);

    return jPanel;
}

private static void update() {
    System.out.println("updating");
    data = stubProvider();

    adjustJTableRowSizes(mainTable);
    for (int i = 0; i < mainTable.getColumnCount(); i++) {
        adjustColumnSizes(mainTable, i, 2);
    }
}

private static void adjustJTableRowSizes(JTable jTable) {
    for (int row = 0; row < jTable.getRowCount(); row++) {
        int maxHeight = 0;
        for (int column = 0; column < jTable.getColumnCount(); column++) {
            TableCellRenderer cellRenderer = jTable.getCellRenderer(row, column);
            Object valueAt = jTable.getValueAt(row, column);
            Component tableCellRendererComponent = cellRenderer.getTableCellRendererComponent(jTable, valueAt, false, false, row, column);
            int heightPreferable = tableCellRendererComponent.getPreferredSize().height;
            maxHeight = Math.max(heightPreferable, maxHeight);
        }
        jTable.setRowHeight(row, maxHeight);
    }

}

public static void adjustColumnSizes(JTable table, int column, int margin) {
    DefaultTableColumnModel colModel = (DefaultTableColumnModel) table.getColumnModel();
    TableColumn col = colModel.getColumn(column);
    int width;

    TableCellRenderer renderer = col.getHeaderRenderer();
    if (renderer == null) {
        renderer = table.getTableHeader().getDefaultRenderer();
    }
    JLabel comp = (JLabel) renderer.getTableCellRendererComponent(
            table, col.getHeaderValue(), false, false, 0, 0);
    width = comp.getPreferredSize().width;

    for (int r = 0; r < table.getRowCount(); r++) {
        renderer = table.getCellRenderer(r, column);
        comp = (JLabel) renderer.getTableCellRendererComponent(
                table, table.getValueAt(r, column), false, false, r, column);
        int currentWidth = comp.getPreferredSize().width;
        width = Math.max(width, currentWidth);
    }

    width += 2 * margin;

    col.setPreferredWidth(width);
}

private static List<Data> stubProvider() {
    List<Data> data = new ArrayList<Data>();
    for (int i = 0; i < 4; i++) {
        data.add(new Data(
                "<html>" +
                        "<div style='font-size: 15px'>Jason</div>" +
                        "<div style='font-size: 15px'>" + random.nextInt() + "</div>" +
                        "</html>",
                "Statham " + random.nextInt()));
    }
    return data;
}
} 
```

* * *

我对行高调整有这样的问题。使用 of`<pre>\n</pre>`代替`<br>`固定行调整。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T19:29:04.410

对我来说似乎工作正常...

![在此处输入图像描述](../Images/58bc6e3d70ab9d1b64778b8094ab71d7.png)

```
public class TestTable01 extends JPanel {

    private JTable mainTable;

    public TestTable01() {
        super(new GridLayout(1, 0));

        String[] columnNames = {"First Name",
                                "Last Name",
                                "Sport",
                                "# of Years",
                                "Vegetarian"};

        Object[][] data = {
            {"Kathy", "Smith",
             "Snowboarding", new Integer(5), new Boolean(false)},
            {"John", "Doe",
             "Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black",
             "Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White",
             "Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown",
             "Pool", new Integer(10), new Boolean(false)}
        };

        mainTable = new JTable(data, columnNames);
        mainTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        mainTable.setPreferredScrollableViewportSize(new Dimension(500, 70));
        mainTable.setFillsViewportHeight(true);

        update();

        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(mainTable);

        //Add the scroll pane to this panel.
        add(scrollPane);
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        TestTable01 newContentPane = new TestTable01();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    private void update() {
        System.out.println("updating");

        adjustJTableRowSizes(mainTable);
        for (int i = 0; i < mainTable.getColumnCount(); i++) {
            adjustColumnSizes(mainTable, i, 2);
        }
    }

    private void adjustJTableRowSizes(JTable jTable) {
        for (int row = 0; row < jTable.getRowCount(); row++) {
            int maxHeight = 0;
            for (int column = 0; column < jTable.getColumnCount(); column++) {
                TableCellRenderer cellRenderer = jTable.getCellRenderer(row, column);
                Object valueAt = jTable.getValueAt(row, column);
                Component tableCellRendererComponent = cellRenderer.getTableCellRendererComponent(jTable, valueAt, false, false, row, column);
                int heightPreferable = tableCellRendererComponent.getPreferredSize().height;
                maxHeight = Math.max(heightPreferable, maxHeight);
            }
            jTable.setRowHeight(row, maxHeight);
        }

    }

    public void adjustColumnSizes(JTable table, int column, int margin) {
        DefaultTableColumnModel colModel = (DefaultTableColumnModel) table.getColumnModel();
        TableColumn col = colModel.getColumn(column);
        int width;

        TableCellRenderer renderer = col.getHeaderRenderer();
        if (renderer == null) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }
        Component comp = renderer.getTableCellRendererComponent(table, col.getHeaderValue(), false, false, 0, 0);
        width = comp.getPreferredSize().width;

        for (int r = 0; r < table.getRowCount(); r++) {
            renderer = table.getCellRenderer(r, column);
            comp = renderer.getTableCellRendererComponent(table, table.getValueAt(r, column), false, false, r, column);
            int currentWidth = comp.getPreferredSize().width;
            width = Math.max(width, currentWidth);
        }

        width += 2 * margin;

        col.setPreferredWidth(width);
        col.setWidth(width);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }

        });
    }

} 
```

**更新**

您的示例存在许多问题。

*   表确实应该添加到 a`JScrollPane`中，这将负责添加标题...
*   a 的默认布局管理器`JPanel`是`FlowLayout`，在这种情况下，它可能不是您想要的，您可能想要使用 a`BorderLayout`
*   Swing 不是线程安全的。的用户`java.util.Timer`将违反此政策，这可能会导致模型和视图不同步。改用 a `javax.swing.Timer`。
*   `<div>`在每个旁边渲染两个将导致 html 布局引擎在元素之间放置一个弱中断。也就是说，如果引擎认为没有足够的可用空间将两个元素一起渲染，它将拆分它们。`<div>`最好使用带有两个`<span>`标签的单个...

我会读一读

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

![在此处输入图像描述](../Images/910ad56a1ce9bdd4230aa6d20b0819a9.png)

```
public class TestColumnWidths {

    private static JTable mainTable;
    private static Random random = new Random();
    private static List<Data> data;

    private static class Data {

        String name;
        String surname;

        private Data(String name, String surname) {
            this.name = name;
            this.surname = surname;
        }
    }

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                data = stubProvider();

                final JFrame frame = new JFrame("table adjust example");
                frame.add(createUI());
                frame.pack();
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                update();
//                    java.util.Timer timer = new java.util.Timer();
//                    timer.schedule(new TimerTask() {
//                        @Override
//                        public void run() {
//                            update();
//                        }
//                    }, 3000, 3000);

                javax.swing.Timer timer = new javax.swing.Timer(3000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        update();
                    }
                });
                timer.setRepeats(true);
                timer.setCoalesce(true);
                timer.start();

            }
        });
    }

    private static JPanel createUI() {
        JPanel jPanel = new JPanel();
        mainTable = new JTable(2, 3);
        mainTable.setModel(new AbstractTableModel() {
            @Override
            public int getRowCount() {
                return data.size();
            }

            @Override
            public int getColumnCount() {
                return 2;
            }

            @Override
            public Object getValueAt(int rowIndex, int columnIndex) {
                Data dataItem = data.get(rowIndex);
                if (columnIndex == 0) {
                    return dataItem.name;
                }
                if (columnIndex == 1) {
                    return dataItem.surname;
                }
                throw new IllegalStateException();
            }
        });
        mainTable.setGridColor(Color.black);
        mainTable.setShowHorizontalLines(false);
        mainTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

        final TableCellRenderer defaultRenderer = mainTable.getTableHeader().getDefaultRenderer();
        mainTable.getTableHeader().setDefaultRenderer(new TableCellRenderer() {
            @Override
            public Component getTableCellRendererComponent(JTable jTable, Object o, boolean b, boolean b1, int row, int column) {
                JLabel parent = (JLabel) defaultRenderer.getTableCellRendererComponent(jTable, o, b, b1, row, column);
                if (column == 0) {
                    parent.setText("name");
                } else {
                    parent.setText("surname");
                }
                return parent;
            }
        });

//            jPanel.add(mainTable.getTableHeader());
//            jPanel.add(mainTable);

        jPanel.setLayout(new BorderLayout());
        jPanel.add(new JScrollPane(mainTable));

        return jPanel;
    }

    private static void update() {
        System.out.println("updating");
        data = stubProvider();

        adjustJTableRowSizes(mainTable);
        for (int i = 0; i < mainTable.getColumnCount(); i++) {
            adjustColumnSizes(mainTable, i, 2);
        }
    }

    private static void adjustJTableRowSizes(JTable jTable) {
        for (int row = 0; row < jTable.getRowCount(); row++) {
            int maxHeight = 0;
            for (int column = 0; column < jTable.getColumnCount(); column++) {
                TableCellRenderer cellRenderer = jTable.getCellRenderer(row, column);
                Object valueAt = jTable.getValueAt(row, column);
                Component tableCellRendererComponent = cellRenderer.getTableCellRendererComponent(jTable, valueAt, false, false, row, column);
                int heightPreferable = tableCellRendererComponent.getPreferredSize().height;
                maxHeight = Math.max(heightPreferable, maxHeight);
            }
            jTable.setRowHeight(row, maxHeight);
        }

    }

    public static void adjustColumnSizes(JTable table, int column, int margin) {
        DefaultTableColumnModel colModel = (DefaultTableColumnModel) table.getColumnModel();
        TableColumn col = colModel.getColumn(column);
        int width;

        TableCellRenderer renderer = col.getHeaderRenderer();
        if (renderer == null) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }
        Component comp = renderer.getTableCellRendererComponent(
                table, col.getHeaderValue(), false, false, 0, 0);
        width = comp.getPreferredSize().width;

        for (int r = 0; r < table.getRowCount(); r++) {
            renderer = table.getCellRenderer(r, column);
            comp = renderer.getTableCellRendererComponent(
                    table, table.getValueAt(r, column), false, false, r, column);
            int currentWidth = comp.getPreferredSize().width;
            width = Math.max(width, currentWidth);
        }

        width += 2 * margin;

        col.setPreferredWidth(width);
    }

    private static List<Data> stubProvider() {
        List<Data> data = new ArrayList<Data>();
        for (int i = 0; i < 4; i++) {
            data.add(new Data(
                    "<html>"
                    + "<div>"
                    + "<span style='font-size: 15px'>Jason</span>"
                    + "<span style='font-size: 15px'>" + random.nextInt() + "</span>"
                    + "</div>"
                    + "</html>",
                    "Statham " + random.nextInt()));
        }
        return data;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:50:20.377

为太窄的列设置合理的最小宽度。然后根据列的内容计算宽度并设置它们。

# mysql - 动态选择字段以从中选择数据

> ID：13013990
> 
> 赞同：1
> 
> 时间：2012-10-22T14:49:37.407
> 
> 标签：mysql

假设我有一个包含三列primaryNum、secondaryNum、selectedNum 的表。primarynum 和 secondaryNum 都是数值，但 selectedNum 的值可以是“primaryNum”、“secondaryNum”或“both”。

selectedNum 字段是一个列，可让我选择在特定字段中搜索数字。

例如：我可能想尝试在 selectedNum 中存储的列中查找值为 10 的所有行。如果 selectedNum 的值为“both”，则如果任一列（primaryNum，secondaryNum）的值为 10，则将返回该行。

我的 select 语句可能是什么样的？

* * *

* * *

如果我说我想做一个 select 语句，这可能是一个更好的场景：

SELECT * FROM aTable WHERE (SELECT bVal 从 bTable WHERE aVal = @varField ) = 0;

其中@varField 是字段中的值的值，其标签存储在 selectedNum 或任一字段中，如果 selectedNum = "both"

这将导致我返回 id 为 1,2,3,4,6,7,14,15,16,19,20,21,23,24,27 的行

表 A：创建

```
CREATE  TABLE `test`.`aTable` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `primaryNum` INT NULL ,
  `secondaryNum` INT NULL ,
  `chosenNum` CHAR(12) NULL ,
  PRIMARY KEY (`id`) ); 
```

表 B：创建

```
CREATE  TABLE `test`.`bTable` (
  `aVal` INT NULL ,
  `bVal` INT NULL ); 
```

表 A：数据

```
INSERT INTO test.aTable VALUES (1,8,7,'secondaryNum'),(2,2,9,'secondaryNum'),(3,7,9,'both'),(4,5,1,'both'),(5,10,3,'secondaryNum'),(6,10,6,'both'),(7,7,8,'both'),(8,10,2,'primaryNum'),(9,2,1,'secondaryNum'),(10,7,2,'secondaryNum'),(11,2,2,'secondaryNum'),(12,5,1,'secondaryNum'),(13,1,6,'primaryNum'),(14,6,6,'both'),(15,4,9,'both'),(16,9,7,'primaryNum'),(17,8,3,'secondaryNum'),(18,10,7,'primaryNum'),(19,8,5,'secondaryNum'),(20,1,7,'both'),(21,7,9,'both'),(22,8,3,'primaryNum'),(23,6,2,'primaryNum'),(24,5,7,'both'),(25,2,1,'both'),(26,5,2,'secondaryNum'),(27,7,8,'primaryNum'); 
```

表 B：数据

```
INSERT INTO test.bTable VALUES (1,1),(2,1),(3,1),(4,1),(5,0),(6,0),(7,0),(8,1),(9,0),(10,1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:52:53.833

你可以这样做：

```
select * 
from MyTable
where (chosenNum in ('both', 'primaryNum') and primaryNum = 10)
    or (chosenNum in ('both', 'secondaryNum') and secondaryNum = 10) 
```

# java - Mysql 触发故障 IF ELSE UPDATE

> ID：13013994
> 
> 赞同：2
> 
> 时间：2012-10-22T14:49:54.723
> 
> 标签：java, mysql, if-statement, triggers, delimiter

```
delimiter //
CREATE TRIGGER agregarMateriaCurso AFTER INSERT ON MateriasDoctorado
   FOR EACH ROW
BEGIN
   IF (SELECT troncal FROM Materias WHERE codigo=NEW.codigoMateria)=1
        THEN
            UPDATE CursoDoctorado SET cantidadMateriasTroncales=cantidadMateriasTroncales+1 WHERE codigo=NEW.codigoDoctorado;
   ELSE
         UPDATE CursoDoctorado SET cantidadMateriasEspecificas=cantidadMateriasEspecificas+1 WHERE codigo=NEW.codigoDoctorado;
        END IF;
END;//
delimiter ;

public class Consulta {

    public static String[] triggers = {
         "delimiter // CREATE TRIGGER agregarMateriaCurso AFTER INSERT ON MateriasDoctorado    FOR EACH ROW  BEGIN  IF (SELECT troncal FROM Materias WHERE codigo=NEW.codigoMateria)=1         THEN            UPDATE CursoDoctorado SET cantidadMateriasTroncales=cantidadMateriasTroncales+1 WHERE codigo=NEW.codigoDoctorado;   ELSE         UPDATE CursoDoctorado SET cantidadMateriasEspecificas=cantidadMateriasEspecificas+1 WHERE codigo=NEW.codigoDoctorado;        END IF; END;// delimiter ;", "delimiter // CREATE TRIGGER eliminarMateriaCurso AFTER DELETE ON MateriasDoctorado   FOR EACH ROW BEGIN   IF (SELECT troncal FROM Materias WHERE codigo=OLD.codigoMateria)=1        THEN            UPDATE CursoDoctorado SET cantidadMateriasTroncales=cantidadMateriasTroncales-1 WHERE codigo=OLD.codigoDoctorado;    ELSE            UPDATE CursoDoctorado SET cantidadMateriasEspecificas=cantidadMateriasEspecificas-1 WHERE codigo=OLD.codigoDoctorado;        END IF; END;// delimiter ; "
    };
}

 for(String sentencia:Consulta.triggers){
                System.out.println(mysqli.update(sentencia));
            } 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“分隔符 // CREATE TRIGGER agregarMateriaCurso AFTER INSERT ON MateriasDoctorad”附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:01:23.310

第一个问题是缺少单词 begin，第二个问题是从 java 中插入触发器，并解决了删除“分隔符 //”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:53:49.980

缺少 BEGIN 关键字，试试这个查询 -

```
DELIMITER //
CREATE TRIGGER agregarMateriaCurso AFTER INSERT ON MateriasDoctorado FOR EACH ROW
BEGIN
  IF (SELECT troncal FROM Materias WHERE codigo = NEW.codigoMateria) = 1 THEN
    UPDATE CursoDoctorado SET cantidadMateriasTroncales = cantidadMateriasTroncales + 1 WHERE codigo = NEW.codigoDoctorado;
  ELSE
    UPDATE CursoDoctorado SET cantidadMateriasEspecificas = cantidadMateriasEspecificas + 1 WHERE codigo = NEW.codigoDoctorado;
  END IF;
END;//
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T14:56:15.360

我认为您的 for 循环中缺少 BEGIN ：

```
->    FOR EACH ROW BEGIN
->    IF (SELECT troncal FROM Materias WHERE codigo=NEW.codigoMateria)=1
->         THEN
->             UPDATE CursoDoctorado SET cantidadMateriasTroncales=cantidadMateriasTroncales+1 WHERE codigo=NEW.codigoDoctorado;
->    ELSE
->          UPDATE CursoDoctorado SET cantidadMateriasEspecificas=cantidadMateriasEspecificas+1 WHERE codigo=NEW.codigoDoctorado;
->         END IF;
-> END;// 
```

# cocoa - 沙盒可可应用程序中捆绑的 NPAPI 插件

> ID：13013997
> 
> 赞同：4
> 
> 时间：2012-10-22T14:50:08.970
> 
> 标签：cocoa, webview, npapi, browser-plugin, appstore-sandbox

我正在使用 Xcode 4.5.1 开发可可应用程序。我的应用程序使用 webview 并捆绑了一个插件以与该 webview 一起使用。

当我编译我的代码并运行我的应用程序时，它工作正常，并且插件被加载并在 webview 中使用。

但是，如果我为我的应用启用沙盒环境，它就会停止工作。插件未加载。

当沙箱用完时，我从我的插件中获取此日志：

```
10/22/12 4:40:54.041 PM WebKitPluginHost[43018]: Instantiating Plugin 
```

在沙箱中运行时，我没有从我的插件中得到任何东西，但是 web 视图确实显示了一个空白框，我的插件视图应该在哪里。如果插件不在这里，它不会显示缺少插件消息。

我尝试将此添加到我的应用程序的权利中：

```
com.apple.WebKit.PluginAgent 
```

作为一个字符串

```
com.apple.security.temporary-exception.mach-lookup.global-name array 
```

但没有运气。

你知道我怎么调试这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:33:11.750

See my response to [How do I add a Webkit plugin to my sandboxed OS X app WebView?](https://stackoverflow.com/questions/13591456/how-do-i-add-a-webkit-plugin-to-my-sandboxed-os-x-app-webview/14466399#14466399)

In summary: running in 32-bit mode will work, because plugins run in the same process as the host application. In 64-bit mode, it appears the plugin agent lacks permission to launch the plugin process, causing the load to fail silently.