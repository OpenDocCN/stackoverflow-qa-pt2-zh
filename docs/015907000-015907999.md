# StackOverflow 问答 15907000-15907999

# c# - 可观察集合 .Distinct() 不起作用

> ID：15907001
> 
> 赞同：0
> 
> 时间：2013-04-09T16:06:58.113
> 
> 标签：c#, .net, observablecollection, iequalitycomparer

我有下一节课：

```
public class MapsDescModel : NotificationObject, IEqualityComparer<MapsDescModel>
{
    public MapsDescModel(ObservableCollection<MainCategories> mainCategoty)
    {
        MainCategories = mainCategoty;
    }

    private MainCategories _mainCategorySelectedItem;
    public MainCategories MainCategorySelectedItem
    {
        get { return _mainCategorySelectedItem; }
        set
        {
            if (Equals(value, _mainCategorySelectedItem)) return;
            _mainCategorySelectedItem = value;
            RaisePropertyChanged("MainCategorySelectedItem");
            RaisePropertyChanged("SubCategories");
        }
    }

    private SubCategories _subCategorySelectedItem;
    public SubCategories SubCategorySelectedItem
    {
        get { return _subCategorySelectedItem; }
        set
        {
            if (Equals(value, _subCategorySelectedItem)) return;
            _subCategorySelectedItem = value;
            RaisePropertyChanged("SubCategorySelectedItem");
        }
    }

    private ObservableCollection<MainCategories> _mainCategories;
    public ObservableCollection<MainCategories> MainCategories
    {
        get { return _mainCategories; }
        set
        {
            if (Equals(value, _mainCategories)) return;
            _mainCategories = value;
            RaisePropertyChanged("MainCategories");
        }
    }

    public ObservableCollection<SubCategories> SubCategories
    {
        get
        {
            if (MainCategorySelectedItem != null)
                return
                    Infrastructure.Helpers.ExtensionMethods.ToObservableCollection(
                        MainCategorySelectedItem.SubCategory.AsEnumerable());
            else return new ObservableCollection<SubCategories>();
        }
    }

    public bool Equals(MapsDescModel x, MapsDescModel y)
    {
        return
            x.MainCategorySelectedItem.MainCatID == y.MainCategorySelectedItem.MainCatID &&
            x.SubCategorySelectedItem.SubCatID == y.SubCategorySelectedItem.SubCatID;
    }

    public int GetHashCode(MapsDescModel obj)
    {
        if (Object.ReferenceEquals(obj, null)) return 0;

        if (obj.MainCategorySelectedItem == null || obj.SubCategorySelectedItem == null) 
            return 0;
        else  return obj.MainCategorySelectedItem.Category.GetHashCode() + obj.SubCategorySelectedItem.Category.GetHashCode();
    }
} 
```

我在其他班级有下一个收藏：

```
MapsGrid = new ObservableCollection<MapsDescModel>() 
```

我正在尝试使用`MapGrid.Distinct()`方法，但它不能正常工作。

属性`MainCatID`和`SubCatID`是`Integer`s。当我将 2 个具有相同属性值的对象插入到集合和使用`Distinct`方法中时，没有任何反应。我通过代码 ( `Console.WriteLine(MapsGrid[0].Equals(MapsGrid[1]));`) 检查比较返回的内容，即使属性相等，它也会返回 false。我的错误在哪里？

* * *

更新：

我编辑了 MapsDescModel 类：

```
 public class MapsDescModel : NotificationObject, IEqualityComparer<MapsDescModel>, IEquatable<MapsDescModel>
    {
        public MapsDescModel(ObservableCollection<MainCategories> mainCategoty)
        {
            MainCategories = mainCategoty;

        }

        private MainCategories _mainCategorySelectedItem;
        public MainCategories MainCategorySelectedItem
        {
            get { return _mainCategorySelectedItem; }
            set
            {
                if (Equals(value, _mainCategorySelectedItem)) return;
                _mainCategorySelectedItem = value;
                RaisePropertyChanged("MainCategorySelectedItem");
                RaisePropertyChanged("SubCategories");
            }
        }

        private SubCategories _subCategorySelectedItem;
        public SubCategories SubCategorySelectedItem
        {
            get { return _subCategorySelectedItem; }
            set
            {
                if (Equals(value, _subCategorySelectedItem)) return;
                _subCategorySelectedItem = value;
                RaisePropertyChanged("SubCategorySelectedItem");
            }
        }

        private ObservableCollection<MainCategories> _mainCategories;
        public ObservableCollection<MainCategories> MainCategories
        {
            get { return _mainCategories; }
            set
            {
                if (Equals(value, _mainCategories)) return;
                _mainCategories = value;
                RaisePropertyChanged("MainCategories");
            }
        }

        public ObservableCollection<SubCategories> SubCategories
        {
            get
            {
                if (MainCategorySelectedItem != null)
                    return
                        Infrastructure.Helpers.ExtensionMethods.ToObservableCollection(
                            MainCategorySelectedItem.SubCategory.AsEnumerable());
                else return new ObservableCollection<SubCategories>();
            }
        }

        public bool Equals(MapsDescModel x, MapsDescModel y)
        {
            if (x.MainCategorySelectedItem == null || x.SubCategorySelectedItem == null ||
                y.MainCategorySelectedItem == null || y.SubCategorySelectedItem == null)
                return false;

            return
                x.MainCategorySelectedItem.MainCatID == y.MainCategorySelectedItem.MainCatID &&
                x.SubCategorySelectedItem.SubCatID == y.SubCategorySelectedItem.SubCatID;
        }

        public int GetHashCode(MapsDescModel obj)
        {
            if (Object.ReferenceEquals(obj, null)) return 0;

            if (obj.MainCategorySelectedItem == null || obj.SubCategorySelectedItem == null)
                return 0;
            else return obj.MainCategorySelectedItem.Category.GetHashCode() + obj.SubCategorySelectedItem.Category.GetHashCode();
        }

        public bool Equals(MapsDescModel other)
        {
            return
            this.Equals(this, other);  // use definition from IEqualityComparer<T>
        }

        public override bool Equals(object obj)
        {
            MapsDescModel other = obj as MapsDescModel;
            if (other == null)
                return base.Equals(obj);
            else
                return this.Equals(other);
        }

        public override int GetHashCode()
        {
            MapsDescModel other = this as MapsDescModel;
            if (other == null)
                return base.GetHashCode();
            else
                return this.GetHashCode(other);
        } 
```

现在当我执行 Distinct 方法时它仍然无法正常工作。我知道我的 Equality 方法有效，因为 'Console.WriteLine(MapsGrid[0].Equals(MapsGrid[1]));' 返回真。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:16:12.937

你已经实现`IEqualityComparer<T>`了，如果你想将你的类的实例传递给`Distinct`：

```
var distinctList = MapGrid.Distinct(new MapsDescModel()); 
```

然而，一个更简洁的方法是实现`IEquatable<T>`，因为`Distinct`如果你不传入一个，默认情况下会使用它`IEqualityComparer<T>`：

```
public class MapsDescModel : NotificationObject, IEqualityComparer<MapsDescModel>, IEquatable<MapsDescModel>
{
...
    public bool Equals(MapsDescModel y)
    {
        return
            this.Equals(this,y);  // use definition from IEqualityComparer<T>
    }  
} 
```

我还建议覆盖`object.Equals`和`object.GetHashCode`保持一致性，如果您愿意，可以再次利用这些方法（或者如果您决定不再需要它们，`IEqualityComparer`只需将方法转换为覆盖）。`IEqualityComparer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:18:53.783

如果您需要帮助，请回答提出的问题。

是否会调用 override bool Equals(object obj) 并返回什么？
你的回答未能回答这个非常关键的问题。

由于您没有实现 Object 我怀疑那些 OverRides 没有被调用

[实现 Equals 方法](http://msdn.microsoft.com/en-us/library/336aedhh%28v=vs.100%29.aspx)

您正在将 IEqualityComparer 应用于一个类（MapsDescModel），它适用于一个集合

[IEqualityComparer 接口](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

我认为您需要做（或打算做）是在 MainCategories 类上 OverRide GetHashCode 和 Equals
但是您没有发布 MainCategories 的定义
而且我发现 plur (s) 很有趣 - 是

```
public ObservableCollection<MainCategories> MainCategories 
```

一个集合一个集合？
为了清楚起见，考虑不要将属性命名为类的名称

# kendo-ui - 如何在悬停功能上关闭剑道菜单

> ID：15907007
> 
> 赞同：0
> 
> 时间：2013-04-09T16:07:24.903
> 
> 标签：kendo-ui, kendo-asp.net-mvc

我有一个图像。用户将鼠标悬停在图像上，就会出现剑道菜单。我想关闭悬停功能。我希望用户单击图像以打开菜单。

我正在使用 MVC，代码开始是这样的：

`@(Html.Kendo().Menu() .Name("MyMenu") .HoverDelay(500) .Items(parentMenu => parentMenu.Add().ImageUrl("www.someplace.com/someimage.jpg") .Items(items => {`

这样做的主要原因是我最近升级到最新的剑道，现在悬停延迟完全搞砸了。有时即使用户在菜单上，菜单也会关闭。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:50:33.783

您需要使用[OpenOnClick](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/MenuBuilder#methods-OpenOnClick%28System.Boolean%29)设置：

```
@(Html.Kendo().Menu()
      .Name("menu")
      .OpenOnClick(true)
) 
```

# windows - 我写了一个java项目Java SE，我想在windows启动时启动它

> ID：15907011
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:07:28.877
> 
> 标签：windows

我使用 Java SE 编写了一个 Java 项目。

我希望程序在 Windows 启动时启动，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:18:37.313

将您的 java 程序的可执行文件添加到 Windows Startup From a run box 类型`msconfig`并选择 Startup 选项卡。然后您的程序将在 Windows 启动时自动运行。您还可以使用诸如`Autoruns`管理启动时执行的程序之类的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:21:24.557

根据您的程序是什么，您有几个选择。

最简单的方法是在开始菜单的 Startup 文件夹中创建一个快捷方式，指向 javaw.exe，传递运行程序所需的参数。这通常涉及将您的程序打包在一个[可执行的 jar](http://docs.oracle.com/javase/tutorial/deployment/jar/run.html)和类似`javax.exe -jar [your jar]`快捷方式目标的东西中。此方法只会在用户登录时启动程序。

如果您需要一些更高级的东西，例如如果您的程序要在 Windows 服务器上运行，那么您将需要在该服务器上注册一个 Windows 服务。据我所知，您不能仅使用 Java 来做到这一点，因此需要一个可以充当服务并相应地启动您的 Java 程序的第三方应用程序。为此，请查看[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)。

# css - 动态宽度的 div 加起来是相同的固定宽度？

> ID：15907013
> 
> 赞同：0
> 
> 时间：2013-04-09T16:07:33.233
> 
> 标签：css

我有两个 div，并排向左浮动。两者都必须具有动态宽度。两个 div 必须始终相加为相同的固定宽度。由于某些原因，我不会进入，我不能将它们包装在包含 div 中。

所以，如果fixed with是150px，而Div1恰好是20px，那么Div2必须扩展为130px。

这可以做到吗？谢谢。

# java - 二进制递归搜索

> ID：15907014
> 
> 赞同：0
> 
> 时间：2013-04-09T16:07:33.493
> 
> 标签：java, recursion

JAVA 作业

有人可以给我一些关于我在这里做错了什么的指示吗？谢谢。

16\. 为练习 11(f) 编写递归解决方案，对数组进行二分搜索以定位 Key 的值。

```
public class BinarySearch {
    public static void main(String[] args) {
        public static int BinarySearch(int[] sorted, int first, int upto, int key) {
            if (first < upto) {
                int mid = first + (upto - first) / 2;  // Compute mid point.
                if (key < sorted[mid]) {
                    return BinarySearch(sorted, first, mid, key);
                } else if (key > sorted[mid]) {
                    return BinarySearch(sorted, mid+1, upto , key);
                } else {
                    return mid;   // Found it.
                }
            }
            return -(first + 1);  // Failed to find key
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:11:35.153

问题是您在另一个方法中定义了一个方法：

```
public static void main(String[] args) {
    public static int BinarySearch(int[] sorted, int first, int upto, int key) { 
```

只需将方法移到`BinarySearch`方法之外`main`：

```
public static void main(String[] args) {
    //content of this method
}

public static int BinarySearch(int[] sorted, int first, int upto, int key) {
    //content of this other method
} 
```

# sql - 如何在 oracle sql developer 中使用 spool 将 select 语句的结果正确导出到 Csv 文件中

> ID：15907015
> 
> 赞同：2
> 
> 时间：2013-04-09T16:07:35.167
> 
> 标签：sql, oracle, oracle11g

代码：

```
set heading off
  set arraysize 1
  set newpage 0
  set pages 0
  set feedback off
  set echo off
  set verify off

spool 'c:\farmerList.csv'
/

select FIRSTNAME','LASTNAME','TRN','CELL','PARISH

spool off 
```

该文件正在保存到目录中，但是它保存的是“select FIRSTNAME”、“LASTNAME”、“TRN”、“CELL”、“PARISH”，而不是 csv 格式的查询结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:27:52.490

您的选择不完整，因为您没有`from`子句，但不确定您是否在复制和粘贴中丢失了该子句。因为它没有任何东西可以运行，因为部分语句永远不会执行（没有终止`;`或`/`在下一行）。如果您确实有一个`from farmers;`子句，那么它可能会显示命令加上 ORA-00923 错误。

您不能只在字段之间加上引号逗号，您需要使用`||`连接符号将字段与该字符连接起来：

```
spool 'c:\farmerList.csv'

select FIRSTNAME
    ||','|| LASTNAME
    ||','|| TRN
    ||','|| CELL
    ||','|| PARISH
from farmers; 
```

给出一个包含

```
Joe,Grundy,X,Y,Ambridge 
```

这些字段不必在单独的行上，我只是发现更容易阅读和跟踪逗号。

您不需要`/`在 spool 命令之后 - 如果有，它将重新执行 之前的最后一条语句`spool`- 并且您不需要在 spool 文件名周围加上引号，除非它包含空格，但它们不需要伤害。

还有一个[`set colsep`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#i2698758)命令可用于将列分隔符设置为逗号，但您必须担心填充，因此我发现像您（几乎）那样将列连接在一起更容易。

* * *

除了 SQL*Plus，因为我没有注意到标题中的 SQL Developer 参考。假脱机在 Developer 中有点奇怪，因为它似乎捕获和回显您可能不想要的东西，并且并非所有`set`命令都有效（哪些命令取决于版本）。

我认为，更安全和首选的方法是运行没有连接逗号的普通查询：

```
select FIRSTNAME, LASTNAME, TRN, CELL, PARISH
from farmers; 
```

并使用“运行”而不是“运行脚本”，以便结果出现在查询结果窗口的网格视图中。右键单击网格并选择“导出”。然后，您可以另存为 CSV，甚至是 XLS，如果您愿意，可以选择不包含标题行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-14T18:02:54.507

这是正确的解决方案，请通过这个

```
import java.sql.*;
import java.io.*;
import au.com.bytecode.opencsv.CSVWriter;

public class TableExport {
public static void main(String[] args) {

try{
DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","name","password");
conn.setAutoCommit(false);
Statement statement = conn.createStatement();
ResultSet resultData = statement.executeQuery("select * from your_table");

            CSVWriter writer = new CSVWriter(new FileWriter(new File("D:/Uploads/Output5.csv")), '|');
            writer.writeAll(resultData, true);
            writer.close();

}catch (Exception e){
    System.out.println("Error" +e);
    }
  }
} 
```

如果有人喜欢这个，请注意您需要库文件夹中的 oracle-jdbc.jar 和 opencsv1.7.jar 才能正确执行此代码。

# asp.net - 为什么我的会话变量在 asp.net 应用程序中被多个用户共享

> ID：15907021
> 
> 赞同：1
> 
> 时间：2013-04-09T16:07:52.253
> 
> 标签：asp.net, visual-studio-2010, web-applications

我有一个会话变量，其中分配了一个数据表。出于某种原因，数据表的结果（在 GridView 中显示给用户）正在登录的多个用户之间共享。我认为每个会话都是独立的？因此，当一个用户进行更改时，其他用户会看到这些结果添加到他们的结果中。不知道为什么。我没有使用应用程序变量。

我在 Global_asax 中初始化 Session 变量，然后在用户填写完所需的条目后在按钮命令上填充它。

```
Imports System.Web.SessionState

Public Class Global_asax
  Inherits System.Web.HttpApplication

  Sub Session_Start(ByVal sender As Object, ByVal e As EventArgs)
    Session("RDDT") = New DataTable
  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T15:07:27.213

就目前而言，我确实忽略了一些事情。有一个其他人创建的具有公共变量的用户控件。该应用程序将它们视为静态的。我所做的只是删除它们并将使用的位置更改为 Session 变量。该应用程序现在按预期工作。

# perl - 使用 Spreadsheet::ParseExcel 在 XLS 文件中获取零单元格

> ID：15907022
> 
> 赞同：1
> 
> 时间：2013-04-09T16:07:54.323
> 
> 标签：perl, parsing, xls

首先参考 Stack Overflow 问题*[Using Spreadsheet::WriteExcel](https://stackoverflow.com/questions/15835021)*。

数据结构如下所示：

```
 col1      col2    col3   col4   col5
row1  School    1
row2  Dean      John
row3  No.stu.   55
row4  some irrelevant stuff
row5  School2   2
row6  Dean      Tony
row7  No. stu.  60
row8  some irrelevant stuff
row9  School    3
row10 Dean      James
row11 No.stu.   56
row12 No. teacher 20
row13 School    4
row14 Dean      Tom
row15 No.stu.   79
row16 No. teacher 21
row17 course
row18           math    2
row19           eng     4
row20 teacher   name    age   gender   race
row21           Jane    20    female   white
row22 student   name    Lee
row23           SAT     1434
row24           gender  male 
```

我想要实现的输出是：

```
 col1  col2  col3     col4          col5         col6          col7        col8       col9
row1 School Dean No.stu.  No. teacher  course_math  course_eng  teacher_name  teacher_age  teacher_gender    teacher_race    student_name   student_SAT   student_gender
row2 1      John  55
row3 2      Tony  60
row4 3      James 56       20
row5 4      Tome  79       21              2           4            Jane        20          female                white         Lee         1434          male 
```

多亏了gangabas，我得到的代码是：

```
use strict;
use warnings;

use Spreadsheet::ParseExcel;
use FindBin qw($Bin);

my ($infile) = @ARGV;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse("$Bin/Test.xls");
die $parser->error unless defined $workbook;
my ($worksheet) = $workbook->worksheets();

my %data;
my $row    = 0;
my $school = "";
while (1) {
    my $cell = $worksheet->get_cell($row, 0);
    last unless defined($cell);

    my $key = $cell->value();
    my $value = $worksheet->get_cell($row++, 1)->value();

    if ($key eq "School") {

        $school = $value;
        next;
    }

    $data{$school}->{$key} = $value;
}
sleep 1; 
```

我从解析row17-row19开始。我遇到的第一个问题是 (row17, col3) 中的空单元格。代码到达这里时出错。知道 Excel 单元格区分“空”和“空白”，我可以通过将原始 XLS 文件的单元格格式设置为“常规”以外的其他格式来玩弄它。但是，这只是一个临时解决方案。我想知道是否有任何命令可以用来获取空单元格。我已经尝试`unformatted()`添加：

```
my $unformattedvalue = $worksheet->get_cell( $row++, 1 )->unformatted(); 
```

然而，它行不通。

然后我尝试使用以下代码指定“课程”状态下的数据结构：

```
my %data;
my $row    = 0;
my $school = "";
my $course = ""; #Initial value for the state of course
while (1) {
    my $cell = $worksheet->get_cell($row, 0);
    last unless defined($cell);

    my $key = $cell->value();
    my $value  = $worksheet->get_cell( $row++, 1 )->value();
    my $value1 = $worksheet->get_cell( $row++, 2 )->value(); #Fetching the value in column 3

    if ($key eq "School") {

        $school = $value;
        next;
    }

    if ($key eq "course") { #Just mimicking the how we construct the structure of 'School'

         $course = $value1;
         next;
    }

    $data{$school}->{$key} = $value;  #Must be something wrong here, but can not figure out
} 
```

代码没有通过并给出`Can't call method "value" on an undefined value at xxx line of 'my $value1 = $worksheet->get_cell( $row++, 2 )->value()';`

简而言之，我的问题是：

1.  一般来说，如何在不干预过程的情况下获取 XLS 中的空单元格？
2.  如何使用 Spreadsheet::ParseExcel 解析如下结构

    ```
    row17 course
    row18           math    2
    row19           eng     4 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:49:09.267

你正在做一个`$row++`你不应该做的事情。

试试这个代码作为你的起点：

```
my %data;
my $state = "";
my $school = "";
my $student = "";
my ( $row_min, $row_max ) = $worksheet->row_range();
my $row = $row_min;
while ($row <= $row_max) {
    my $cell0 = $worksheet->get_cell( $row, 0 );
    my $cell1 = $worksheet->get_cell( $row, 1 );

    if (defined($cell0)) {
        my $key = $cell0->value();
        if ($key eq 'School') {
            $state = 'school';
            $school = $cell1->value();
        } elsif ($key eq 'course') {
            $state = 'course';
        } elsif ($key eq 'teacher') {
            $state = 'teacher';
        } elsif ($key eq 'student') {
            $state = 'student');
            $student = $worksheet->get_cell( $row, 2 )->value();
        } else {
            $data{$school}{$key} = $cell1->value();
        }
    } elsif ($state eq 'course') {
        # process columns for course
    } elsif ($state eq 'teacher') {
        # process columns for teacher
    } elsif ($state eq 'student') {
        # process columns for student
    }
    $row++;
}
use Data::Dumper;
print Dumper(\%data); 
```

**更新：**

要处理教师行，我将首先在第一个 while 循环之外声明一个 %teacher_columns 散列，并使用 col_range() 方法声明 $col_min 和 $col_max。然后在`$key eq 'teacher'`elsif 子句中，我会做这样的事情：

```
%teacher_columns = (); # clear it out in case column names are different for this school
for my $col (2 .. $col_max) {
    my $cell = $worksheet->get_cell( $row, $col );
    $teacher_columns{$cell->value()} = $col if defined($cell) and $cell->value();
} 
```

然后在`state eq 'teacher'`elsif 子句中，我会做这样的事情：

```
foreach my $key (keys %teacher_columns) {
    my $cell = $worksheet->get_cell($row, $teacher_columns{$key});
    if (defined($cell)) {
      # store cell data into proper location of your data hash
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:44:12.573

这是我的作业：

我只是添加列的过程。

```
elsif ($state eq 'student') {
        my $key = $cell1->value();
        $data{$school}{$student}{$key} =$cell2->value();
}  elsif ($state eq 'course') {
       my $key = $cell1->value();
        $data{$school}{$course}{$key} =$cell2->value(); 
```

其中`$cell2`定义为：

```
my $cell2 = $worksheet->get_cell( $row, 2 ); 
```

它给了我：

```
$VAR1 = {
          '4' => {
                   'course' => {
                                 'math' => '2',
                                 'eng' => '4'
                               },
                   'No.Stu' => '79',
                   'No.Teacher' => '21',
                   'Lee' => {
                              'SAT' => '1434',
                              'gender' => 'male'
                            },
                   'Dean' => 'Tom'
                 },
          '1' => {
                   'No.Stu' => '55',
                   'Dean' => 'John'
                 },
          '3' => {
                   'No.Stu' => '56',
                   'No.Teacher' => '20',
                   'Dean' => 'James'
                 },
          '2' => {
                   'No.Stu' => '60',
                   'Dean' => 'Tony'
                 }
        }; 
```

看起来不错。

但我不知道如何处理教师的专栏，因为它有一些不同的结构：

```
 col1      col2    col3   col4   col5
  row20 teacher   name    age   gender   race
  rwo21           Jane    20    female   white 
```

我试图遍历列以获取单元格值作为键但没有成功：

```
my ( $col_min, $col_max ) = $worksheet->col_range();
my $col = $col_min;
my $cell3 = $worksheet->get_cell(++$row, $col );

elsif ($state eq 'teacher') {
        while ($col <= $col_max) {
            my $key = $worksheet->get_cell($row, $col++ );
        }
           $data{$school}{$teacher}{$key} =$cell3->value();
    } 
```

有什么建议么？

更新：我遵循@imran 的建议，它工作得很好，然后我只是使用以下代码将我解析的内容重写为一个新的 XLS 文件：

```
use Spreadsheet::WriteExcel;

$workbook = Spreadsheet::WriteExcel->new('Result.xls');
$worksheet = $workbook->add_worksheet();

$col = 0;
$row = 0;

$worksheet->write( $row++, $col,
    ["School", "No.Stu", "No.Teacher", "Dean","Course_math", "Course_eng", "student_SAT", "student_name", "student_gender", "teacher_race", "teacher_name", "teacher_age", "teacher_gender"] );

foreach my $school( sort keys %data ) {

     $worksheet->write( $row++, $col,
        [ $school, @{$data{$school}}{ "No.Stu", "No.Teacher", "Dean"}, @{$data{$school}{course}}{ "math", "eng"}, @{$data{$school}{student}}{ "SAT", "name", "gender"}, @{$data{$school}{teacher}}{ "race", "name", "age", "gender"} ]) ;
}

$workbook->close(); 
```

除了一件小事，一切都很好。的单元格`teacher_age`是空的，但它在哈希表中显示它已经被解析。我想不通...

散列的教师部分如下：

```
 'teacher' => {
                          'race' => 'white',
                          'name' => 'Jane',
                          'age ' => '25',
                          'gender' => ' female'
                        }, 
```

我使用的代码正是您建议的，但是重新格式化 xls 中的“teacher_age”单元格。文件为空。

更新 2：回到关于“状态”的问题，它是否总是从后续行开始解析？如果我有以下数据结构怎么办：

```
 School    1
 course    math
           eng
 ...
 School     2
 course    phy
 ...
 School     3
 course    chem
           gym
           music 
```

如果我使用旧代码并定义课程状态，我只能解析`eng`from `school 1`，`gym and music`course from `school 2`。好吧，我正在考虑提前一排定义课程状态，但没有得到任何运气。有什么建议么？

更新：

我遵循@imran 的建议，将课程代码更改为：

```
} elsif ($key eq 'course') {
            $state = 'course';
            $course = $worksheet->get_cell( $row, 1 )->value();
} 
```

相应的哈希表为：

```
} elsif ($state eq 'course') {
            my $key = $cell1->value();
            $data{$school}{$course}{$key} =$cell1->value();
} 
```

但是，它只能解析

```
 '1' => {
                   'math' => {
                               'eng' => 'eng'
                             },
       }
 '3' => {
   'chem' => {
                               'gym' => 'gym',
                               'music' => 'music
                             },
      } 
```

并且没有解析`school2`.

该问题已通过`course`在到达密钥后立即使用简单的继续来解决。即，而不是有单独的块来定义`course keys`和处理课程表。我现在有：

```
 } elsif ($key eq 'course') {
            $state = 'course';
            $course = $state;
            my $key = $cell1->value();
            $data{$school}{$course}{$key} = $key;
} 
```

它做到了这一点。但我仍然很好奇它是如何工作的。

# javascript - Backbone JS：自我填充集合

> ID：15907026
> 
> 赞同：2
> 
> 时间：2013-04-09T16:07:59.657
> 
> 标签：javascript, backbone.js

我有一个这样的 Backbone 集合

```
var ContactsCollection = Backbone.Collection.extend({
    model: Contact,

    initialize: function () {
            //retrieves contacts from web service
            //contactsLoaded: is the callback that gets called after 
            //the contacts get received
            loadContacts(this.contactsLoaded);
    },

    contactsLoaded: function (contacts) {
            for (var i = 0; i < contacts.length; i++) {
              //TODO populate the collection [models][1]
            }
    }
}); 
```

换句话说，我想自己填充集合的[模型](http://backbonejs.org/#Collection-models)，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:38:47.357

考虑使用 REST API 作为[Collection#fetch](http://backbonejs.org/#Collection-fetch)应该完全符合您的要求。

```
var ContactsCollection = Backbone.Collection.extend({
model: Contact,
url: '', // set the URL
initialize: function () {
  this.fetch();
}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:11:51.190

对于 Backbone 集合，您无需逐个添加模型，框架将完成这项工作。简单地

```
var ContactsCollection = Backbone.Collection.extend({
  model: Contact,
  url: '/contacts' // whatever web service url you are using

  initialize: function () {
    this.fetch();
  }

}); 
```

如果您从服务器返回的不是 JSON 数组，或者它被某个节点包裹，您可以覆盖 parse 方法。

```
parse: function(response) {
  // if it's like {data: [model1, model2, model3...]}
  return response.data
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:15:09.653

假设您要传入联系人模型列表，请执行以下操作（您不需要`for`循环）：

```
this.add(contacts); 
```

[`The docs`](http://backbonejs.org/#Collection-add)提到你可以一个一个地添加模型，或者作为一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:04:38.233

同意@Loamhoof。您应该使用主干获取来完成此操作。

我建议您将调用移到集合初始化方法之外。将它与您的其他应用程序控制流/路由器逻辑放在一起会更清晰，更方便。Fetch 将返回一个 jqXHR 对象实现了一个 promise 接口。允许您执行以下操作：

```
var contactsCollection = new ContactsCollection({});
var p = contactsCollection.fetch();

p.done(function() { ... });
p.error(function() { ... });
p.always(function() { ... }); 
```

# dom - 在angularjs中通过$scope获取html属性

> ID：15907027
> 
> 赞同：0
> 
> 时间：2013-04-09T16:08:06.453
> 
> 标签：dom, recursion, angularjs, ng-repeat

好的，所以我正在使用 ng-include 和 ng-repeat 在 AngularJS 中创建一个递归列表，如下所示：

```
<div id="wrapper">
<div id="text" ng-click="DivClick()">
    <ul>
        <li id="{{$index}}" ng-repeat="data in layer" ng-include="'recursion.html'"></li>
    </ul>
</div> 
```

```
<script type="text/ng-template"  id="recursion.html">
<textarea myd-keypress cols="63" rows="1">{{data.content}}</textarea>
<input type="text" myd-numbers value="{{data.price}}"></input>
<ul>
    <li ng-repeat="data in data.layer" ng-include="'recursion.html'" id="{{$parent.$attr('id') + '-' + $index}}"></li>
</ul> 
```

但是，当然，它不起作用。所以基本上我需要的是 dom 中的每个 <li> 元素都有对应的 id，如下所示：

```
 0
 1
   1-0
   1-1
     1-1-0
   1-2
   1-3
 2
   2-0 
```

这样每个新的 <li> 的 id 都等于“其父级的 id”+“-$index”。我知道这将起作用的是 scope.layer[] 及其图层后代包含一个字段，该字段将保存 < li> 的 ID 并显示它，但我想避免在数据库中保存该额外字段，因为解决方案是非常简单（如示例所示），但我无法克服语法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:13:13.990

在将数据传递给`$scope.label`您之前，您可以使用递归循环分支并添加`id`属性的函数对其进行循环

```
var data = [{
    name: 'foo',
    children: [{
        name: 'foo child',
        children: [{
            name: 'foo child grandchild'
        }, {
            name: 'foo child grandchild2'
        }]
    }, {
        name: 'foo child2'
    }]
}, {
    name: 'bar'
}]

function createID(arr, parentID) {
   for (var i = 0; i < arr.length; i++) {
        var id = (i + 1).toString();
        var thisID = parentID ? parentID + '-' + id : id;
        arr[i].id = thisID;
        if (arr[i].children) {
             createID(arr[i].children, thisID)
         }
    }
 }
createID(data, null) 
```

演示[http://jsfiddle.net/z4RPz/](http://jsfiddle.net/z4RPz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:37:14.413

我认为您想要做的是伸手`$index`从父元素中获取。

您可以使用`$parent.$index`- 或者在这种情况下，它可能是`$parent.$parent.$index`，因为您正在使用`ng-repeat -> ng-include -> ng-repeat`

有关类似情况的更多信息，请参阅此答案： [https ://stackoverflow.com/a/15257501/317180](https://stackoverflow.com/a/15257501/317180)

# ember.js - 使用 EmberData 手动加载模型

> ID：15907029
> 
> 赞同：8
> 
> 时间：2013-04-09T16:08:09.893
> 
> 标签：ember.js, ember-data

我有一个带有登录表单的 Ember 应用程序，它在成功登录后以 JSON 格式返回当前用户。

Using`createRecord`直接在模型上设置返回的 JSON 属性。例如，`is_private`变成`user.is_private`，不是`user.get('isPrivate')`？

如何加载用户模型以便正确设置属性并且不必使用 id 重新获取它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-22T19:55:16.063

截至几天前，在 ember data 1.0 beta 中，您可以使用`pushPayload`将数据直接加载到存储中。例如，如果您通过 WebSockets 将数据推送到您的应用程序（我们使用 Heroku 插件[Pusher](https://addons.heroku.com/pusher)）。您可以直接在商店（[源）](https://github.com/emberjs/data/blob/a58ec28c927bcb246344be818ee0214a6dfe6aef/packages/ember-data/lib/system/store.js#L1140)上调用它，它将通过适当的序列化程序传递它：

```
var postsJSON = {
  posts: [
    {id: 1, post_title: "Great post"}
  ]
}

this.store.pushPayload('post',postsJSON) 
```

请注意，它当前不会加载单数对象（即`post: {id: 1, post_title:"First!"}`） - 您需要使用数组将其格式化为复数。

`DS.RESTSerializer`也有`pushPayload`（[source](https://github.com/emberjs/data/blob/2287353bbcac132307ca72b128988fcbca79eab0/packages/ember-data/lib/serializers/rest_serializer.js#L507)），在这种情况下，您需要将其传递给商店。

我强烈建议在使用之前阅读源代码，因为看起来它的实现将被重新审视。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T16:30:08.737

据说，执行此操作的官方方法是使用`adapter.load`，如[该线程](http://discuss.emberjs.com/t/loading-sideloaded-data-received-through-a-websocket/905/2)中所述：

> **加载数据中**
> 
> 以前，商店的某些功能，例如`load()`，假定使用单个适配器。
> 
> 如果您想在应用程序不要求的情况下从后端加载数据（例如，通过 WebSockets 流），请使用此 API：
> 
> `store.adapterForType(App.Person).load(store, App.Person, payload);`
> 
> 此 API 还将处理侧载和嵌入数据。我们计划在未来添加这个 API 的更方便的版本。

但不幸的是，尽管文档声称它不处理侧载数据。我个人使用类似以下的东西，这是基于如何`find(ID)`实现的：

```
var id = json["person"]["id"];
var store = DS.get("defaultStore");
var adapter = store.adapterForType(App.Person);
adapter.didFindRecord(store, App.Person, json, id);
var person = App.Person.find(id); 
```

请注意，此代码假定 JSON 格式与`find(ID)`预期从服务器接收的格式相同，如[RESTAdapter 指南中所述](http://emberjs.com/guides/models/the-rest-adapter/)：

```
{
  person: {
    id: 1,
    is_private: false,
    projects: [3]
  },
  projects: [
    { id: 3, name: "FooReader" }
  ]
} 
```

这将应用您使用配置的任何转换`keyForAttributeName`（例如映射`is_private`到`isPrivate`），并将处理旁加载的记录。我不确定这是否是最佳做法，但效果很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-04T15:57:30.660

怎么样`store.push('user', userJSON)`？

[http://emberjs.com/guides/models/pushing-records-into-the-store/#toc_pushing-records](http://emberjs.com/guides/models/pushing-records-into-the-store/#toc_pushing-records)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-03T09:02:09.367

上面的所有答案都对我不起作用。只对我有用的是：

```
this.store.buildRecord(this.store.modelFor('person'), data.id, data) 
```

# java - 当两个类实现相同的接口时

> ID：15907040
> 
> 赞同：5
> 
> 时间：2013-04-09T16:08:43.927
> 
> 标签：java, interface

假设有 2 个类实现了相同的接口以及来自该接口的方法。如果我直接从接口调用一个方法，是什么决定将返回哪个实现（从第一类或第二类）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:25:18.967

```
package test;
    public interface InterfaceX {
    int doubleInt(int i);
}

package test;
public class ClassA implements InterfaceX{
    @Override
    public int doubleInt(int i) {
        return i+i;
    }
}

package test;
public class ClassB implements InterfaceX{
    @Override
    public int doubleInt(int i) {
        return 2*i;
    }
}

package test;
public class TestInterface {
    public static void main(String... args) {
        new TestInterface();
    }
    public TestInterface() {
        InterfaceX i1 = new ClassA();
        InterfaceX i2 = new ClassB();
        System.out.println("i1 is class "+i1.getClass().getName());
        System.out.println("i2 is class "+i2.getClass().getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T16:10:48.187

您不会直接从接口调用方法，而是在指向类实例的引用上调用它。无论哪个类确定调用哪个方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T16:13:03.590

您可以通过执行实现接口的具体类的构造函数来定义接口的实例。

```
Interface interface = new ConcreteClass(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:11:14.253

接口不能有方法的主体/定义。所有的方法都是抽象的。你不能定义方法体，因此你不能从接口调用任何方法。

# php - PHP 从 XML 中删除元素

> ID：15907041
> 
> 赞同：1
> 
> 时间：2013-04-09T16:08:48.613
> 
> 标签：php, xml, simplexml

我想删除比今天更早的任务，但我还不太清楚如何从 XML 文件中删除元素。

```
$xml_file = simplexml_load_file('file.xml');    
foreach ($xml_file->task as $aTask) {
        if ($aTask->date < $today) {
            //$xml_file->removeChild($aTask); //doesnt work
        }
} 
```

下面是我的 XML 文件：

```
<?xml version="1.0"?>
<calender>
<task><date>00/00/0000</date><title>My Birthday</title><description>Today is my birthday!</description></task><task><date>04/01/2013</date><title>ghh</title><description>jfhjhj</description></task><task><date>04/01/2013</date><title>egfwe</title><description>wefwef</description></task><task><date>04/01/2013</date><title>cvbhm</title><description>dhmdh</description></task><task><date>04/02/2013</date><title>gg</title><description>gg</description></task><task><date>04/02/2013</date><title>test</title><description>test</description></task><task><date>04/03/2013</date><title>ggg</title><description>ggg</description></task><task><date>04/03/2013</date><title>ssdv</title><description>ssdvs</description></task><task><date>04/03/2013</date><title>test</title><description>testtest</description></task><task><date>04/04/2013</date><title>tttt</title><description>ttttttttt</description></task><task><date>04/05/2013</date><title>qewerbqwer</title><description>bwerbwerbwebr</description></task><task><date>04/07/2013</date><title>fgj</title><description>fghj f</description></task><task><date>04/08/2013</date><title>test</title><description>swdefswde</description></task><task><date>04/09/2013</date><title>hj,h</title><description>hj,gh</description></task><task><date>04/16/2013</date><title>dfbd</title><description>dfbdfb</description></task><task><date>04/17/2013</date><title>dfb</title><description>dfb</description></task>
</calender> 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:27:52.477

使用`simplexml`：--> 现场演示@http [://codepad.viper-7.com/Jl16Oh](http://codepad.viper-7.com/Jl16Oh)

```
$xml = simplexml_load_string($x); // XML is in $x

$today = date("m/d/Y");
$max = $xml->task->count()-1;

for ($i = $max; $i >=0; $i--) {

   if ($xml->task[$i]->date < $today) unset($xml->task[$i]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:13:26.363

我认为比较日期就像它是一种已实现的数据类型是有问题的。

使用您的算法，您正在比较字符串，这不是您想要的。您可以使用 preg_match 获取日、月和年，然后使用 mktime 来比较时间戳：

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

**编辑：**你甚至可以在没有 preg_match 的情况下做到这一点，这很耗时。这是一个将对象转换为数组的示例（您必须以一种或另一种方式进行转换，也可以选择使用 DOM，请参阅：[Remove a child with a specific attribute, in SimpleXML for PHP](https://stackoverflow.com/questions/262351/remove-a-child-with-a-specific-attribute-in-simplexml-for-php)）

```
<?
$xml_file = (array)simplexml_load_file("file.xml")or die('Error reading XML file');
print_r($xml_file);

$today=array(
    'day'   => intval(date('d')),
    'month' => intval(date('m')),
    'year'  => intval(date('Y')),
    );
//print_r($today);

foreach($xml_file['task'] as $key=>$aTask) {
        $date  = (string)$aTask->date;
        $month = intval($date[0].$date[1]);
        $day   = intval($date[3].$date[4]);
        $year  = intval($date[6].$date[7].$date[8].$date[9]);
        //echo $aTask->title.': '.$month.'/'.$day.'/'.$year."\n";
        if ( ($year < $today['year']) || ($year==$today['year'] && $month < $today['month']) || ($year==$today['year'] && $month == $today['month'] && $day < $today['day']) ) {
            //echo 'Deleting '.$aTask->title."\n";
            unset($xml_file['task'][$key]);
        }
}

// Inspired from: https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml 
$xml  = '<?xml version="1.0"?>'."\n".'<calendar>';
function addChild($item) { global $xml; $xml.=$item->asXML(); }
array_walk_recursive($xml_file['task'], 'addChild');
$xml .= '</calendar>';
//echo $xml;
file_put_contents('out.xml', $xml);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:32:15.353

这实际上非常棘手。您必须`unset()`使用适当的变量，但它需要是对父节点的引用（即，`unset($aTask)`将不起作用）。此外，如果您确实`foreach ($xml_file->task as $index => $aTask)`跟踪子位置，您将`task`参与每次迭代！

你需要一些像这样丑陋的代码：

```
$index = 0;
$remove = array();
foreach ($xml_file->task as $aTask) {
    if ($aTask->date < $today) {
        $remove[] = $index;
    }
    $index++;
}

foreach($remove as $index){
    unset($xml_file->task[0]);
} 
```

*PS 如前所述，您的日期处理程序不起作用。*

**编辑：**我实际上已经*尝试过*我自己的代码并且[它有效](http://codepad.viper-7.com/o9dXux)，所以downvoter应该解释自己。

# java - Android Widget检测点击和双击

> ID：15907046
> 
> 赞同：0
> 
> 时间：2013-04-09T16:09:00.273
> 
> 标签：java, android, widget, gesture, tap

好的，问题来了。我制作了一个小部件，现在需要检测点击并双击它，触发时应该显示不同的视图。出于测试目的，我使用了日志记录，以查看它是否正常工作。下面是我的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.widget.Toast;

/**
 * @Author Jan Zivkovic
 * 
 * NE DELA, OVERRIDA AMPAK NE DELA!
 */

public class UpdateWidget extends Activity implements OnGestureListener{

    private GestureDetector gesture;

    public void onCreate(Bundle savedInstanceState)  
    {  
        super.onCreate(savedInstanceState);  
        //setContentView(R.layout.main);  
        Log.w("TEST", "started");

        gesture = new GestureDetector(this);  

        //set the on Double tap listener  
        gesture.setOnDoubleTapListener(new OnDoubleTapListener()  
        {  
            @Override  
            public boolean onDoubleTap(MotionEvent e)  
            {  
                //set text color to green  
                //tvTap.setTextColor(0xff00ff00);  
                //print a confirmation message  
                //tvTap.setText("The screen has been double tapped.");  
                Log.w("TEST", "Double tap");
                return false;  
            }  

            @Override  
            public boolean onDoubleTapEvent(MotionEvent e)  
            {  
                //if the second tap hadn't been released and it's being moved  
                if(e.getAction() == MotionEvent.ACTION_MOVE)  
                {  
                    //set text to blue  
                    //tvTapEvent.setTextColor(0xff0000ff);  
                    //print a confirmation message and the position  
                    //tvTapEvent.setText("Double tap with movement. Position:\n"  
                    //        + "X:" + Float.toString(e.getRawX()) +  
                    //        "\nY: " + Float.toString(e.getRawY()));  
                }  
                else if(e.getAction() == MotionEvent.ACTION_UP)//user released the screen  
                {  
                    //setContentView();  
                }  
                return false;  
            }  

            @Override  
            public boolean onSingleTapConfirmed(MotionEvent e)  
            {  
                //set text color to red  
                //tvTap.setTextColor(0xffff0000);  
                //print a confirmation message and the tap position  
                //tvTap.setText("Double tap failed. Please try again.");  
                Log.w("TEST", "Single tap");
                return false;  
            }  
        });  
    }

    @Override
    public boolean onDown(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

Widget Provider 类，onUpdate 方法（每 5 分钟触发一次）

```
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        for (int i = 0; i < appWidgetIds.length; i++) {
            int appWidgetId = appWidgetIds[i];
            Intent updateIntent = new Intent(context, UpdateWidget.class);
            // Identifies the particular widget...
            updateIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
            updateIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            // Make the pending intent unique...
            updateIntent.setData(Uri.parse(updateIntent.toUri(Intent.URI_INTENT_SCHEME)));
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, updateIntent, 0);

            //context.startActivity(updateIntent);

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);//R.layout.widget_layout
            views.setTextViewText(R.id.subject1, "subject1 test");
            views.setOnClickPendingIntent(R.id.widget_layout, pendingIntent);
            appWidgetManager.updateAppWidget(appWidgetId, views);
            Log.w("Schedule", "Widget Updated = " + appWidgetId);
        }
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    } 
```

但这是迄今为止的结果。通常，当您点击或双击小部件时，手机会振动。使用它，手机在点击时不再振动，也不会在 logcat 中打印任何内容。在过去的几天里，这个问题让我很烦恼。希望其他人会知道我做错了什么。

编辑：忘记了最重要的事情。我使用 Android 2.2 api level 8 (Froyo) 并在三星 Galaxy Ace VE 上使用 Android 2.3.6 进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:22:52.767

> 我做了一个小部件

鉴于您的代码，我将假设您的意思是其他 Android 开发人员所说的“应用小部件”。

> 现在需要检测点击并双击它

双击将很难被发现。

> 下面是我的代码

您的第一个代码块用于活动，它不是应用小部件。

当用户点击应用小部件时，您的第二个代码块会调用一个活动。这很好，但这无助于您检测双击。事实上，它通常会阻止用户首先双击，因为活动将在第一次点击后接管屏幕。

我建议您避免尝试对应用小部件使用双击。在应用程序小部件中有两个不同的项目来区分不同的事件（您想要单击执行的操作与您想要执行的双击执行的操作）。

# nsdictionary - 我如何循环浏览这本词典？

> ID：15907047
> 
> 赞同：1
> 
> 时间：2013-04-09T16:09:04.050
> 
> 标签：nsdictionary, paypal-adaptive-payments

这是 NSDictionary 的输出：

```
{
    client =     {
        environment = mock;
        "paypal_sdk_version" = "1.0.3";
        platform = iOS;
        "product_name" = "PayPal iOS SDK";
    };
    payment =     {
        amount = "39.95";
        "currency_code" = USD;
        "short_description" = "Awesome saws";
    };
    "proof_of_payment" =     {
        "adaptive_payment" =         {
            "app_id" = "APP-1245783590";
            "pay_key" = "AP-70M62356425642W";
            "payment_exec_status" = COMPLETED;
            timestamp = "2012-03-03T15:53:55Z";
        };
    }; 
```

它来自贝宝自适应支付。我最终这样做了：

```
- (void)verifyCompletedPayment:(PayPalPayment *)completedPayment {

    NSDictionary *pOPDictionary = [NSDictionary dictionaryWithDictionary:completedPayment.confirmation];
    NSLog(@"pOPDictionary: %@",pOPDictionary);

    NSDictionary *subDictionary = [pOPDictionary objectForKey:@"proof_of_payment"];
    NSDictionary *sub2Dictionary = [subDictionary objectForKey:@"adaptive_payment"];
    NSString *proofString = [sub2Dictionary objectForKey:@"payment_exec_status"];

    if ([proofString isEqualToString:@"COMPLETED"]) {
        NSLog(@"Payment Completed Successfully");
    } else {
        NSLog(@"Payment Error");
    }

    NSData *confirmation = [NSJSONSerialization dataWithJSONObject:completedPayment.confirmation options:0 error:nil];

} 
```

有没有更有效的方法从字典字典中获取该键？我只需要那把钥匙。所以我不认为我应该循环或循环通过其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:23:16.907

如何简化代码有两种不同的可能性。您可以使用“现代 Objective-C 下标语法”（有关更多信息，请参阅[http://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)）：

```
NSDictionary *pOPDictionary = completedPayment.confirmation;
NSString *proofString = pOPDictionary[@"proof_of_payment"][@"proof_of_payment"][@"payment_exec_status"]; 
```

或键值编码：

```
NSDictionary *pOPDictionary = completedPayment.confirmation;
NSString *proofString = [pOPDictionary valueForKeyPath:@"proof_of_payment.proof_of_payment.payment_exec_status"]; 
```

我不认为一个比另一个有优势，这只是你选择哪一个的品味问题。

# javascript - 尝试使用循环向 Javascript 对象添加多个属性

> ID：15907052
> 
> 赞同：16
> 
> 时间：2013-04-09T16:09:18.147
> 
> 标签：javascript, object, loops, properties

我希望这一天能找到你。

所以我有一个没有属性的对象。我正在尝试使用循环向该对象添加多个属性。添加到循环中的每个属性将根据循环运行的次数多次出现在对象中，每个新属性递增 1。

所以我有这样的事情：

```
myObject = {  };

for(i = 0; i < 2; i++){
    myObject.propA + i = foo;
    myObject.propB + i = bar;
}; 
```

我想产生这样的东西：

```
myObject.propA0 = foo;
myObject.propB0 = bar;
myObject.propA1 = foo;
myObject.propB2 = bar; 
```

根据循环运行的次数，动态生成一堆漂亮的对象。但我似乎没有得到这个。那么，在创建和分配变量时，我究竟如何将循环中的变量提供给属性呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T16:10:48.683

尝试对名称使用方括号表示法

```
 myObject['propa' + i] = foo; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-09T16:21:37.357

正如其他用户所说，您必须使用括号表示法通过名称字符串引用属性：

```
myObject['propA' + i] = 'foo'; 
```

但是为什么不使用对象数组，而不是使用具有相似编号属性名称的单个对象呢？像这样的东西：

```
var myArray = [];
for(i = 0; i < 2; i++){
    myArray.push({
        propA: 'foo',
        propB: 'bar'
    });
}; 
```

这应该产生：

```
[
    { propA: 'foo', propB: 'bar'},
    { propA: 'foo', propB: 'bar'}
] 
```

在我看来，它看起来更干净。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-09T16:11:21.183

使用数组访问方法设置属性。

```
myObject = {  };

for(i = 0; i < 2; i++){
    myObject['propA' + i] = foo;
    myObject['propB' + i] = bar;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:14:31.007

你可能会使用

```
object['popA'+i]=... 
```

创建标准属性或使用 getter/setter 属性，在这种情况下，您需要使用

```
Object.defineProperty(object, *propertyname*, *propertyDescriptor*). 
```

后者为您提供了有关已创建属性的更多选项。

这里的所有细节：
[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

# eclipse - EMF 命名空间 URI/前缀为空

> ID：15907054
> 
> 赞同：0
> 
> 时间：2013-04-09T16:09:22.947
> 
> 标签：eclipse, eclipse-emf-ecore, emf

我必须使用 EMF 从现有的 ecore 图创建 EMF 生成器模型，但是在尝试这样做时它会给我带来命名空间错误。

这是两个错误的屏幕截图。

![错误](https://i.stack.imgur.com/1JNIi.png)

我认为错误可能在ecore文件（XML）中，但我不知道该写什么，因为我只使用GUI工具来创建ecore模型......

我的 ecorediag 文件在[这里](https://gist.github.com/whirlwin/5347021)，我的 ecore 文件在[这里](https://gist.github.com/whirlwin/5347275)。

我对 EMF 的体验很糟糕，因为它从来没有顺利运行而没有任何问题，这是另一个问题，但是，我不得不使用它。

我尝试用谷歌搜索错误，但只返回了 9 个和 8 个匹配项，其中大部分都无助于解决问题。

我需要在 ecorediag 或 ecore 文件中编辑什么才能生成我的 EMF 发生器模型？

作为记录，我使用的是 Eclipse 4.2.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T17:01:50.287

将 nsURI 更改为“http:///ecore_file_name.ecore”，将 nsPrefix 更改为“ecore_file_name”，效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:19:24.703

我找到的解决方案是从头开始重写整个项目。

方法是为我对 ecore 文件所做的每一次更改（添加/重命名/删除属性/类）仔细生成 genmodel，以确保在对模型的任何更改之间没有发生任何不好的事情。通过遵循这种方法，如果出现问题，您将能够隔离问题。

但是，除了重写所有内容之外，我仍在寻找另一种解决方案/答案。

# gcc - Ubuntu (12.10) 和 GCC 4.7/4.8 有什么问题？

> ID：15907055
> 
> 赞同：3
> 
> 时间：2013-04-09T16:09:23.677
> 
> 标签：gcc, ubuntu, compilation, ubuntu-12.04, gcc4.7

由于 GCC 和 Ubuntu 的多个版本，我遇到了安装 GCC 所必需的几个头文件和目标文件的路径和命名问题。

描述：在安装 ubuntu（例如在我的情况下为 12.04）并安装 gcc 的所有先决条件后，我运行以下命令：

```
sudo mkdir /usr/local/stow/gcc-4.8.0
./configure --prefix /usr/local/stow/gcc-4.8.0
make
sudo make install 
```

为了完整起见，安装过程的其余部分：

```
cd /usr/local/stow
sudo stow -t /usr/local/ gcc-4.8.0
gcc -v 
```

但是，这种简单而正确的安装 gcc 的方法在“制作”步骤中存在一些问题，并显示以下错误消息：

1.) 'stubs.h' 的问题

```
/usr/include/gnu/stubs.h:7:27: fatal error: gnu/stubs-32.h: No such file or directory 
```

这可以通过添加到 ~/.bashrc 的以下命令来修复：

```
if [ -z "$CPATH"]; then
        export CPATH="/usr/include/i386-linux-gnu"
else
        export CPATH=$CPATH:"/usr/include/i386-linux-gnu"
fi 
```

2.) 'crti.o'、'crtn.o' 和 'crt1.o' 的问题

```
/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: cannot find crtn.o: No such file or directory
/usr/bin/ld: cannot find crt1.o: No such file or directory 
```

这可以用非常丑陋的解决方案来解决：

```
sudo ln -s /usr/lib/i386-linux-gnu/crti.o /usr/lib/i386-linux-gnu/crtn.o /usr/lib/i386-linux-gnu/crt1.o /usr/lib 
```

因为 - 我不知道为什么 - 以下命令在“sudo make install”的链接步骤中不能解决问题

```
if [ -z "$LIBRARY_PATH"]; then
    export LIBRARY_PATH="/usr/lib/${multiarch}"
else
    export LIBRARY_PATH=$LIBRARY_PATH:"/usr/lib/${multiarch}"
fi

if [ -z "$LD_LIBRARY_PATH"]; then
    export LD_LIBRARY_PATH="/usr/lib/${multiarch}"
else
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:"/usr/lib/${multiarch}"
fi 
```

（使用这些解决方案，我可以在 Ubuntu 12.04 上编译 GCC-4.7.2。 - 我在 Ubuntu 12.04 上编译 GCC-4.8.0 时仍然遇到问题，但这是不同的主题。）

我的问题是：有人知道我们遇到这些问题的原因/背景吗？有人知道合适的解决方案吗？（对于“适当的解决方案”，我的意思是一种不需要设置环境变量或将符号链接库链接到不同目录的解决方案。对我来说，这些更改很难看，因为它们需要对系统进行更改，而这些更改可能无法追溯或重做。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T02:57:14.550

在 GCC 源代码的根文件夹中执行`./contrib/download_prerequisites`脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:28:43.167

这些是我在 Ubuntu 12.04 上使用解决方案编译 GCC 4.8.0 时遇到的问题。

这可能会帮助你。

## 在 ubuntu 12.04 上编译 GCC 4.8 的编译指南

## 错误 1

```
configure: error: Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+.
Try the --with-gmp, --with-mpfr and/or --with-mpc options to specify
their locations.  Source code for these libraries can be found at
their respective hosting sites as well as at
ftp://gcc.gnu.org/pub/gcc/infrastructure/.  See also
http://gcc.gnu.org/install/prerequisites.html for additional info.  If
you obtained GMP, MPFR and/or MPC from a vendor distribution package,
make sure that you have installed both the libraries and the header
files.  They may be located in separate packages. 
```

## 解决方案

1.  下载并安装 gmp version >=4.3.2 包，因为 mpc 需要更高版本
    *   从 gmplib.org 下载源代码
    *   编译源代码并安装
    *   在编译 gmp 时，请参阅 ERROR 2 以获得帮助
    *   安装 gmp 版本 5.1.1
2.  下载并安装 mpfr 包
    *   已安装 mpfr 版本 3.1.2
3.  下载并安装mpc包
    *   安装mpc 1.0版

[从http://ftp.gnu.org](http://ftp.gnu.org)下载软件包

* * *

## 错误 2

```
Error while compiling gmp library

checking for suitable m4... configure: error: No usable m4 in $PATH or /usr/5bin 
```

## 解决方案

```
sudo apt-get install m4 
```

[http://ubuntuforums.org/showthread.php?t=850491](http://ubuntuforums.org/showthread.php?t=850491)

* * *

## 错误 3

```
Cannot find g++ compiler 
```

我收到此错误是因为我最近安装了操作系统并且没有安装编译器。

## 解决方案

```
sudo apt-get install build-essential 
```

这将安装所有标准构建必备软件

* * *

## 错误 4

```
checking for i686-pc-linux-gnu-gcc... /home/suhastheju/projects/gcc/gcc-4.8.0/host-i686-pc-linux-gnu/gcc/xgcc -B/home/suhastheju/projects/gcc/gcc-4.8.0/host-i686-pc-linux-gnu/gcc/ -B/usr/local/i686-pc-linux-gnu/bin/ -B/usr/local/i686-pc-linux-gnu/lib/ -isystem /usr/local/i686-pc-linux-gnu/include -isystem /usr/local/i686-pc-linux-gnu/sys-include   
checking for suffix of object files... configure: error: in `/home/suhastheju/projects/gcc/gcc-4.8.0/i686-pc-linux-gnu/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make[2]: *** [configure-stage1-target-libgcc] Error 1
make[2]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0'
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0'
make: *** [all] Error 2 
```

## 解决方案

虽然 gcc 文档指定，我们可以通过 –with-gmp 和 –with-mpfr 标志提供 gmp 和 mpfr 安装的路径，但不幸的是，我试图给出路径但它不起作用。

我无法就此说定论，无论是构建脚本中的错误还是其他问题，但下面是问题的解决方案。

在构建时，在 LD_LIBRARY_PATH 环境变量中添加 gmp 和 mpfr 安装路径。执行以下操作 export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH

如果您有不同路径中的库，请添加库所在的路径

* * *

## 错误 5

```
libbackend.a(tree-vect-data-refs.o):tree-vect-data-refs.c:(.text+0x87da): more undefined references to `vector_type_mode(tree_node const*)' follow
collect2: error: ld returned 1 exit status
make[3]: *** [cc1] Error 1
make[3]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0/host-i686-pc-linux-gnu/gcc'
make[2]: *** [all-stage2-gcc] Error 2
make[2]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0'
make[1]: *** [stage2-bubble] Error 2
make[1]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0'
make: *** [all] Error 2 
```

## 解决方案

从头开始重新编译源代码，它神奇地工作

```
make clean all 
```

* * *

## 错误 6

```
/home/suhastheju/projects/gcc/gcc-4.8.0/host-i686-pc-linux-gnu/gcc/../.././gcc/gcov.c:416: undefined reference to `gcc_init_libintl()'
collect2: ld returned 1 exit status
make[3]: *** [gcov] Error 1
make[3]: Leaving directory `/home/suhastheju/projects/gcc/gcc-4.8.0/host-i686-pc-linux-gnu/gcc' 
```

## 解决方案

添加 -I/usr/include

# windows-phone-7 - Windows Phone 上的 PhoneGap 2.5 InAppBrowser NullReferenceException

> ID：15907056
> 
> 赞同：0
> 
> 时间：2013-04-09T16:09:27.600
> 
> 标签：windows-phone-7, cordova

当尝试在 Windows Phone 上使用 PhoneGap 2.5 启动 InAppBrowser 时，如下所示：

```
window.open(url, '_blank', 'location=yes'); 
```

发生 NullReferenceException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:09:27.600

根据[Rohit 在 Google Groups 讨论](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/9Zpayg_L8f8)中的解决方案，解决方案是在 InAppBrowser.cs 文件中注释掉导致 NullReferenceException 的代码行，这个：

```
WebBrowser br = (page.FindName("CordovaView") as CordovaView).Browser; 
```

# csv - 导入 au.com.bytecode.opencsv.CSVReader 额外步骤？

> ID：15907072
> 
> 赞同：0
> 
> 时间：2013-04-09T16:10:45.993
> 
> 标签：csv, import

我试着输入我自己的代码。但是当我打字时

```
import org.apache.commons.lang.StringUtils;    
import au.com.bytecode.opencsv.CSVReader; 
```

它总是在eclipse中显示错误。

我下载了java项目，它工作正常。

来源在这里 [http://viralpatel.net/blogs/java-load-csv-file-to-database/comment-page-1/#comment-41747](http://viralpatel.net/blogs/java-load-csv-file-to-database/comment-page-1/#comment-41747)

我想知道我需要做任何额外的步骤来完成这项工作吗？

# c# - 不在服务器上运行的按钮会触发页面上的所有验证器

> ID：15907073
> 
> 赞同：0
> 
> 时间：2013-04-09T16:10:47.027
> 
> 标签：c#, asp.net, .net, webforms

首先，在我们去任何地方之前，请不要担心答案中的 javascript。客户端验证按预期工作，我已关闭浏览器中的 javascript 以专注于测试服务器端验证。好的！

我有一个具有输入字段和验证器的网络表单用户控件。但是由于给我的特定 HTML 和 CSS 设计，我不能使用 <asp:Button> 控件，我必须使用 html <button type="submit"> 来提交表单。这与呈现为 <input type="submit"> 的 <asp:Button>*不同*

我已经在我需要支持的所有浏览器中测试了我的 html <button> 标签并且它们正在工作。在我的 Page_Load 中，我可以确定单击了哪个按钮并触发了正确的验证组，然后如果验证通过，则运行正确的方法。

不幸的是，当我单击一个按钮时，*所有*验证组中的所有用户控件中的所有验证器都会在服务器端触发！我期望不会触发任何验证器，以便我可以使用 Page.Validate 服务器端。有没有人见过这种行为？有已知的解决方案吗？

谢谢 ：-）

# box-api - 使用 box.com 的基于控制台的应用程序，无需要求用户登录并允许该应用程序

> ID：15907076
> 
> 赞同：2
> 
> 时间：2013-04-09T16:10:50.767
> 
> 标签：box-api

这是我的情况。我正在使用 c# 开发基于控制台的应用程序。这里我们不能有用户登录。只有我能做的是使用 api 我需要获取 auth_code 然后访问令牌并刷新令牌。如果有人能回答，我很高兴如何在我的控制台应用程序中实现这一点。我的意思是如何在不要求用户登录并允许应用程序的情况下获取 auth_code。

在这里，如果我运行 cURL 命令，我会得到 html 响应，这是用于框登录页面的完整 html。

问候， Pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:20:44.857

当前的 OAuth 2 流程要求用户通过浏览器并且不能以编程方式完成。

# css - CSS3 过渡 - 淡出效果

> ID：15907079
> 
> 赞同：123
> 
> 时间：2013-04-09T16:10:52.480
> 
> 标签：css, css-transitions

我正在尝试在纯 CSS 中实现“淡出”效果。这是[小提琴](http://jsfiddle.net/dYBD2/)。我确实在网上查看了几个解决方案，但是，在阅读了[在线文档](http://www.w3schools.com/css3/css3_animations.asp)后，我试图弄清楚为什么幻灯片动画不起作用。任何指针？

```
.dummy-wrap {
  animation: slideup 2s;
  -moz-animation: slideup 2s;
  -webkit-animation: slideup 2s;
  -o-animation: slideup 2s;
}

.success-wrap {
  width: 75px;
  min-height: 20px;
  clear: both;
  margin-top: 10px;
}

.successfully-saved {
  color: #FFFFFF;
  font-size: 20px;
  padding: 15px 40px;
  margin-bottom: 20px;
  text-align: center;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  background-color: #00b953;
}

@keyframes slideup {
  0% {top: 0px;}
  75% {top: 0px;}
  100% {top: -20px;}
}

@-moz-keyframes slideup {
  0% {top: 0px;}
  75% {top: 0px;}
  100% {top: -20px;}
}

@-webkit-keyframes slideup {
  0% {top: 0px;}
  75% {top: 0px;}
  100% {top: -20px;}
}

@-o-keyframes slideup {
  0% {top: 0px;}
  75% {top: 0px;}
  100% {top: -20px;}
}
```

```
<div class="dummy-wrap">
  <div class="success-wrap successfully-saved">Saved</div>
</div>
```

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2014-01-03T18:07:03.120

这是另一种方法。

**淡入效果**

```
.visible {
  visibility: visible;
  opacity: 1;
  transition: opacity 2s linear;
} 
```

**淡出效果**

```
.hidden {
  visibility: hidden;
  opacity: 0;
  transition: visibility 0s 2s, opacity 2s linear;
} 
```

`UPDATE 1:` 我找到了更多最新的教程[CSS3 过渡：fadeIn 和 fadeOut 类似效果来隐藏显示元素](https://www.aspneto.com/fade-in-and-fade-out-effect-using-css3-transition.html)和[工具提示示例：使用 CSS3 过渡显示隐藏提示或帮助文本](https://www.aspneto.com/tooltip-example-show-hide-hint-help-text-using-css3-transition.html)此处带有示例代码。

`UPDATE 2:`（添加了@big-money 要求的详细信息）

当显示元素时（通过切换到可见类），我们希望`visibility:visible`立即启动，所以只转换 opacity 属性是可以的。而在隐藏元素的时候（通过切换到隐藏类），我们要延迟`visibility:hidden`声明，这样我们就可以先看到淡出过渡。我们通过在可见性属性上声明一个过渡来做到这一点，持续时间为 0 并有延迟。[您可以在此处](https://fvsch.com/code/transition-fade/test5.html)查看详细文章。

我知道我来不及回答，但发布此答案以节省其他人的时间。希望对你有帮助！！

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2013-05-17T14:38:13.127

您可以改用转换：

```
.successfully-saved.hide-opacity{
    opacity: 0;
}

.successfully-saved {
    color: #FFFFFF;
    text-align: center;

    -webkit-transition: opacity 3s ease-in-out;
    -moz-transition: opacity 3s ease-in-out;
    -ms-transition: opacity 3s ease-in-out;
    -o-transition: opacity 3s ease-in-out;
     opacity: 1;
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-11-26T03:35:39.317

因为`display`不是可动画的 CSS 属性之一。一个`display:none`用纯 CSS3 动画替换的淡出动画，只需在最后一帧设置，并用于`width:0`保留和属性。`height:0``animation-fill-mode: forwards``width:0``height:0`

```
@-webkit-keyframes fadeOut {
    0% { opacity: 1;}
    99% { opacity: 0.01;width: 100%; height: 100%;}
    100% { opacity: 0;width: 0; height: 0;}
}  
@keyframes fadeOut {
    0% { opacity: 1;}
    99% { opacity: 0.01;width: 100%; height: 100%;}
    100% { opacity: 0;width: 0; height: 0;}
}

.display-none.on{
    display: block;
    -webkit-animation: fadeOut 1s;
    animation: fadeOut 1s;
    animation-fill-mode: forwards;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-28T05:54:56.980

这是您问题的工作代码。
享受编码......

```
<html>
   <head>

      <style>

         .animated {
            background-color: green;
            background-position: left top;
            padding-top:95px;
            margin-bottom:60px;
            -webkit-animation-duration: 10s;animation-duration: 10s;
            -webkit-animation-fill-mode: both;animation-fill-mode: both;
         }

         @-webkit-keyframes fadeOut {
            0% {opacity: 1;}
            100% {opacity: 0;}
         }

         @keyframes fadeOut {
            0% {opacity: 1;}
            100% {opacity: 0;}
         }

         .fadeOut {
            -webkit-animation-name: fadeOut;
            animation-name: fadeOut;
         }
      </style>

   </head>
   <body>

      <div id="animated-example" class="animated fadeOut"></div>

   </body>
</html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-09T16:13:46.367

您忘记向`.dummy-wrap`类添加位置属性，并且上/左/下/右值不适用于静态定位的元素（默认值）

[http://jsfiddle.net/dYBD2/2/](http://jsfiddle.net/dYBD2/2/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-01T13:55:29.353

```
.fadeOut{
    background-color: rgba(255, 0, 0, 0.83);
    border-radius: 8px;
    box-shadow: silver 3px 3px 5px 0px;
    border: 2px dashed yellow;
    padding: 3px;
}
.fadeOut.end{
    transition: all 1s ease-in-out;
    background-color: rgba(255, 0, 0, 0.0);
    box-shadow: none;
    border: 0px dashed yellow;
    border-radius: 0px;
} 
```

[演示在这里。](http://jsbin.com/cosige/2/edit)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-02T07:58:49.637

使用`forwards`CSS 中的填充模式使其保留在动画的最后部分。

我建议使用`transform: tranlsateY(-20px);`而不是使用 css 位置，但如果你坚持使用它，那么将`.dummy-wrap`位置设置为`absolute`

```
.dummy-wrap {
  animation: slideup 2s forwards;
  -moz-animation: slideup 2s forwards;
  -webkit-animation: slideup 2s forwards;
  -o-animation: slideup 2s forwards;
  position: absolute;
}

@keyframes slideup {
    0% {
        top: 0px;
    }
    75% {
        top: 0px;
    }
    100% {
        top: -20px;
    }
} 
```

```
<div class="dummy-wrap">
  <div class="success-wrap successfully-saved">Saved</div>
</div> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-08-18T06:40:18.023

这可能会有所帮助：-

```
<!DOCTYPE html>
<html>
<head>
<style>

.cardiv{
    height:200px;
    width:100px;
    background-color:red;
    position:relative;
    text-align:center;
    overflow:hidden;
}
.moreinfo{
    height:0%;
    transition: height 0.5s;
    opacity:1;
    position: absolute;
    bottom:0px;
    background-color:blue;
}

.cardiv:hover .moreinfo{

    opacity: 1;
    height:100px;
}
</style>
</head>
<body>

<div class="cardiv">
    <div class="moreinfo">Hello I am inside div</div>
</div>

</body>
</html> 
```

# google-chrome - Mac OS X - 接受自签名多域 SSL 证书

> ID：15907081
> 
> 赞同：2
> 
> 时间：2013-04-09T16:10:57.887
> 
> 标签：google-chrome, ssl, certificate, self-signed

我已经使用 Keychain Access 导入了多个域的自签名证书（比如说 my.foo.bar.com 和 yours.foo.bar.com），但 Chrome 仍然不接受它，提示我在**每个域**的每个浏览会话开始时进行验证。

证书是使用 x509v3*主题备用名称*扩展生成的，以验证多个域。*如果我在导入证书之前*导航到该站点，我会收到与导入*后*不同的警告消息。下面附上两个错误的图像（顶部是导入前的错误）

![在此处输入图像描述](https://i.stack.imgur.com/aA9G9.png)

有没有办法接受自签名的多域证书？顺便说一句，我只在 Chrome 中收到警告。FF 和 Safari 工作得很好（除了那些浏览器很烂；））

更新：我尝试使用 openssl cli 和[xca](http://sourceforge.net/projects/xca/) GUI生成证书

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:20:33.197

问题是您尝试使用过于宽泛的通配符（`*`或`*.com`）。

规范（[RFC 6125](https://www.rfc-editor.org/rfc/rfc6125#section-6.4.3)和[RFC 2818 第 3.1 节](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)）谈论“*最左边*”标签，这意味着应该有多个标签：

> ```
>  1\.  The client SHOULD NOT attempt to match a presented identifier in
>      which the wildcard character comprises a label other than the
>      left-most label (e.g., do not match bar.*.example.net).
> 
>  2\.  If the wildcard character is the only character of the left-most
>      label in the presented identifier, the client SHOULD NOT compare
>      against anything but the left-most label of the reference
>      identifier (e.g., *.example.com would match foo.example.com but
>      not bar.foo.example.com or example.com). 
> ```

我不确定是否有规范说明应该有多少个最小标签，但[Chromium 代码](http://src.chromium.org/viewvc/chrome/trunk/src/net/cert/x509_certificate.cc?revision=191450#l555)表明必须至少有 2 个点：

> 我们需要至少 3 个组件（即 2 个点）作为防止过于宽泛的通配符的基本保护。

这确实是为了防止像`*.com`. 这可能看起来不方便，但 CA 偶尔会犯错误，并且采取措施防止潜在的流氓证书颁发`*.com`给工作并不一定是坏事。如果我没记错的话，一些实现比这更进一步，并且有一个列表域，对于二级域来说也太宽泛了（例如`.co.uk`）。

关于您的第二个示例：“ *CN:bar.com, SANs: DNS:my.foo.bar.com, DNS:yours.foo.bar.com* ”。此证书应有效`my.foo.bar.com`，`yours.foo.bar.com`但无效`bar.com`。当没有 SAN 时，CN 只是一种备用解决方案。如果有任何 SAN，则应忽略 CN（尽管某些实现会更宽容）。

# php - 使用php POST变量命名mysql表列

> ID：15907082
> 
> 赞同：1
> 
> 时间：2013-04-09T16:11:00.310
> 
> 标签：php, mysql

我正在构建一个 Web 应用程序，其中用户填写一个 html 表单，捕获的信息用于创建一个包含相应列的表。但是，mysql 返回一个错误，其中 POST 变量用于命名列。这是代码示例：

```
$questionnaire = mysql_real_escape_string(htmlentities($_POST['questionnaire']));
$question = mysql_real_escape_string(htmlentities($_POST['question']));
$answer1 = mysql_real_escape_string(htmlentities($_POST['answer1']));
$answer2 = mysql_real_escape_string(htmlentities($_POST['answer2']));

mysql_query = "CREATE TABLE $questionnaire
               (id int(5) NOT NULL AUTO INCREMENT,
                PRIMARY KEY(id),
                question varchar(200),
                '$answer1' varchar(200),
                '$answer2' varchar(200) )"; 
```

如何使值`$answer1`用于给列命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:18:23.537

将其更改`AUTO INCREMENT`为`AUTO_INCREMENT`

[http://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:12:31.453

使用`BACKTICK`not`SINGLE QUOTES`作为列名是标识符，

```
mysql_query = "CREATE TABLE $questionnaire
               (id int(5) NOT NULL AUTO INCREMENT,
                PRIMARY KEY(id),
                question varchar(200),
                `$answer1` varchar(200),
                `$answer2` varchar(200) )"; 
```

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:13:17.067

请勿将其放在括号 ( `'`) 中。如果您转义列名，则需要使用反引号。

但是，您应该重新考虑您的表格布局。如果您必须即时生成表和/或列，那么您的设计肯定有问题。

# php - 无法从 javascript 生成的数据中获取 php 中的 post 数据

> ID：15907083
> 
> 赞同：0
> 
> 时间：2013-04-09T16:11:04.433
> 
> 标签：php, javascript, mysql

```
<script>
function funcGet(val)
{
  if(val=="Create new category")
  {
     var element = document.createElement("input");
     element.setAttribute("type", "input");
     element.setAttribute("name", "new_cat");
     element.setAttribute("placeholder", "Enter a new category name");
     var foo = document.getElementById("cat");
     foo.appendChild(element);

   }
 }

</script>
<div id="cat">
<form method="post" action="">
<input type="text" placeholder="Enter a topic name" name="word"><br/><br/><br/>
<input type="input" name="link" placeholder="Enter a link here"><br/><br/><br/>
<select name ="category" onchange="funcGet(this.value);">
<?php
 displayCat();
 ?>
</select>
<br/><br/>
</div>
<select name="site_type">
<?php
  displaySitetype();
?>
</select><br/><br/><br/>
<input type="submit" value="Submit data">
</form>

<?php
if($_POST['category']=="Create new category") {
  if($_POST['new_cat'])
  {
      $new_cat=mysql_real_escape_string($_POST['new_cat']);
      create_new_catentry($new_cat);
      $catname=$new_cat;
  }
  ?> 
```

我无法在同一页面中使用 $_POST 获取 new_cat 的值。我究竟做错了什么？我无法解决它。我可以毫无问题地从页面获取所有其他帖子数据，是否有任何命名错误？我不确定问题是什么，我的 Javascript 错了吗？

更新：请注意，底部的 php 脚本只是系统的一小部分，而不是整个部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:20:12.387

在您的 JS 代码中，您将`<input>`在div 中附加新的`cat`，但这样它将*位于*`<form>`. 将您的字段附加到表单，为其分配一个 id，如下所示：

HTML：

```
<form method="post" action="" id="catform"> 
```

JS：

```
var foo = document.getElementById("catform");
foo.appendChild(element); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:19:07.417

在您的 javascript 添加新属性：

```
 element.setAttribute("id", "new_cat"); 
```

# php - Wordpress 中的页面特定菜单

> ID：15907087
> 
> 赞同：2
> 
> 时间：2013-04-09T16:11:16.403
> 
> 标签：php, wordpress, plugins

我正在尝试在 Wordpress 中创建一个特定于页面的菜单，其中每个页面都有自己的选项...链接是[http://dev.activenation.co.uk/leisure-centre/southampton-water-activities-centre/](http://dev.activenation.co.uk/leisure-centre/southampton-water-activities-centre/)

当您浏览“您的中心”页面时，灰色菜单会发生变化。目前，我们正在使用条件 if 语句来加载特定的菜单，但是，客户端将需要添加更多的休闲中心。

只是想知道是否有一种更节省时间的方法来制作特定于页面的菜单，而不是编写条件 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:27:31.840

如果这些中心是“您的中心”的子页面，您可以尝试使用[此插件](http://wordpress.org/extend/plugins/hierarchical-pages/)创建分层页面/类别/分类列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:31:12.753

将自定义元框添加到“页面”内容类型，这是`<SELECT>`所有自定义 WordPress 菜单的简单列表。保存时，从列表中拉取选定的菜单 ID`SELECT`并将其保存到数据库中。在页面模板上，检查保存的值是否存在，如果存在，请拉入具有保存 ID 的 WordPress 菜单。

这将允许编辑器创建任意数量的菜单，为每个页面选择一个特定的菜单，并在页面之间共享类似的菜单。

有很多关于创建自定义元框和显示简单`select`可用菜单的教程和代码片段。如果您以前没有做过自定义元框，这是一个很好的介绍项目，因为它只有一个表单字段并且很容易验证数据。

Smashing Magazine 对自定义元框有很好的介绍：[http ://wp.smashingmagazine.com/2011/10/04/create-custom-post-meta-boxes-wordpress/](http://wp.smashingmagazine.com/2011/10/04/create-custom-post-meta-boxes-wordpress/)

# python - 克隆一个继承的 django 模型实例

> ID：15907091
> 
> 赞同：11
> 
> 时间：2013-04-09T16:11:26.017
> 
> 标签：python, django, django-models

当我克隆一个 django 模型实例时，我曾经清理“pk”字段。这似乎不适用于继承的模型：

拿着这个 ：

```
class ModelA(models.Model):
    info1 = models.CharField(max_length=64)

class ModelB(ModelA):
    info2 = models.CharField(max_length=64)

class ModelC(ModelB):
    info3 = models.CharField(max_length=64) 
```

现在让我们创建一个实例并以“通常”的方式克隆它（我使用的是 django shell）：

```
In [1]: c=ModelC(info1="aaa",info2="bbb",info3="ccc")

In [2]: c.save()

In [3]: c.pk
Out[3]: 1L

In [4]: c.pk=None  <------ to clone

In [5]: c.save()   <------ should generate a new instance with a new index key

In [6]: c.pk       
Out[6]: 1L         <------ but don't

In [7]: ModelC.objects.all()
Out[7]: [<ModelC: ModelC object>]   (only one instance !) 
```

我发现的唯一方法是：

```
In [16]: c.pk =None

In [17]: c.id=None

In [21]: c.modela_ptr_id=None

In [22]: c.modelb_ptr_id=None

In [23]: c.save()

In [24]: c.pk
Out[24]: 2L    <---- successful clone containing info1,info2,info3 from original instance

In [25]: ModelC.objects.all()
Out[25]: [<ModelC: ModelC object>, <ModelC: ModelC object>] 
```

我觉得这很丑，有没有更好的方法从继承的模型中克隆一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-09T08:27:19.133

```
c=ModelC(info1="aaa",info2="bbb",info3="ccc")
# creates an instance

c.save()
# writes instance to db

c.pk=None
# I doubt u can nullify the auto-generated pk of an existing object, because a pk is not nullable
c.save()
# if I'm right nothing will happen here. 
```

所以 c 将永远是同一个对象。如果要克隆它，则需要生成一个新对象。在 ModelC 中使用构造函数：

```
def __init__(another_modelC_obj=null, self):
   if another_modelC_obj:
      # for every field in another_modelC_obj: do self.field = another_modelC_obj.field
   super().__init__() 
```

所以你可以去

```
c2=ModelC(c) 
```

或者直接调用它：

```
c2=ModelC(c.info1, c.info2, c.info3) 
```

然后 c2 和 c 将是相同的，尽管它们的 pk

# android - Android 上的 HTTP 请求崩溃

> ID：15907093
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:11:33.470
> 
> 标签：android

我正在制作一个从网页获取文本并显示它的 Android 应用程序。当我试图从页面中获取文本时，我的应用程序总是崩溃。这是我的代码：

```
HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet("http://www.midstatexc.org/uploads/8/9/5/4/8954191/hampshire_2012_invitational.txt"); //URL!
        HttpResponse response = httpClient.execute(httpGet, localContext);
        String result = "";

        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = null;
        while ((line = reader.readLine()) != null) {
            result += line + "\n";
            htmlText = result;
        } 
```

我的清单中确实有互联网许可。它与此消息一起崩溃：

```
04-09 10:07:30.517: E/AndroidRuntime(26588): FATAL EXCEPTION: main
04-09 10:07:30.517: E/AndroidRuntime(26588): java.lang.IllegalStateException: Could not execute method of the activity
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.view.View$1.onClick(View.java:3044)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.view.View.performClick(View.java:3511)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.view.View$PerformClick.run(View.java:14105)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.os.Handler.handleCallback(Handler.java:605)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.os.Looper.loop(Looper.java:137)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at dalvik.system.NativeStart.main(Native Method)
04-09 10:07:30.517: E/AndroidRuntime(26588): Caused by: java.lang.reflect.InvocationTargetException
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.view.View$1.onClick(View.java:3039)
04-09 10:07:30.517: E/AndroidRuntime(26588):    ... 11 more
04-09 10:07:30.517: E/AndroidRuntime(26588): Caused by: android.os.NetworkOnMainThreadException
04-09 10:07:30.517: E/AndroidRuntime(26588):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at com.CarbonDev.codecabana.MainMenu.getHTML(MainMenu.java:55)
04-09 10:07:30.517: E/AndroidRuntime(26588):    at com.CarbonDev.codecabana.MainMenu.compile(MainMenu.java:39)
04-09 10:07:30.517: E/AndroidRuntime(26588):    ... 14 more 
```

谢谢。我是一个真正的 Android 新手，我需要我能得到的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:13:35.303

您不能在 gui 线程中执行网络操作，而是在 seperart 线程或 AscyTask 中执行[它们](http://developer.android.com/reference/android/os/AsyncTask.html)。

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
} 
```

# sql - sql如何垂直转换数据

> ID：15907095
> 
> 赞同：0
> 
> 时间：2013-04-09T16:11:36.013
> 
> 标签：sql, oracle, plsql

我有 3 个 datbles Dealer、payment_type 和 Dealer_payment_type

```
 Dealer : dealer_id , dealer_name, dealer_address
              1      | test      |  123 test lane
              2      | abc       |  abc lane  
              3      | def       |  def lane

 Payment_type : paymenttype_id , paytype 
                   1           | CHECK
                   2           | WIRE
                   3           | CREDIT

  Dealer_Payment_type : DPT_id , dealer_id , payment_type_id
                         1     |   1       | 1
                         2     |   1       | 2
                         3     |   1       | 3
                         4     |   2       | 2
                         5     |   2       | 3
                         6     |   3       | 1
                         7     |   3       | 2 
```

我必须编写一个查询来获取每个经销商的付款类型信息，查询需要返回如下数据：

```
 dealer_id , dealer_name , paytype           
           1       |  test       | check,wire,credit
           2       |  abc        | wire,credit
           3       |  def        | check,wire

                    OR

      dealer_id , dealer_name  , check , wire , credit
       1        | test         | true  | true  | true 
       2        | abc          | false | true  | true 
       3        | def          | true  | false | true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:24:40.617

您没有指定您使用的 Oracle 版本。

如果您使用的是 Oracle 11g，那么您可以使用以下内容。

要将值放入单个列中，您可以使用`LISTAGG`：

```
select d.dealer_id,
  d.dealer_name,
  listagg(p.paytype, ',') within group (order by d.dealer_id) as paytype
from dealer d
left join Dealer_Payment_type dp
  on d.dealer_id = dp.dealer_id
left join payment_type p
  on dp.payment_type_id = p.paymenttype_id
group by d.dealer_id, d.dealer_name; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/4cd3b/11)

要获取单独列中的值，您可以使用 PIVOT：

```
select dealer_id, dealer_name,
  coalesce("Check", 'false') "Check",
  coalesce("Wire", 'false') "Wire",
  coalesce("Credit", 'false') "Credit"
from
(
  select d.dealer_id,
    d.dealer_name,
    p.paytype, 
    'true' flag
  from dealer d
  left join Dealer_Payment_type dp
    on d.dealer_id = dp.dealer_id
  left join payment_type p
    on dp.payment_type_id = p.paymenttype_id
)
pivot
(
  max(flag)
  for paytype in ('CHECK' as "Check", 'WIRE' as "Wire", 'CREDIT' as "Credit")
) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/4cd3b/12)。

如果您不使用 Oracle 11g，则可以使用`wm_concat()`将这些值连接到一行中：

```
select d.dealer_id,
  d.dealer_name,
  wm_concat(p.paytype) as paytype
from dealer d
left join Dealer_Payment_type dp
  on d.dealer_id = dp.dealer_id
left join payment_type p
  on dp.payment_type_id = p.paymenttype_id
group by d.dealer_id, d.dealer_name; 
```

要创建单独的列，您可以使用带有 的聚合函数`CASE`：

```
select dealer_id, dealer_name,
  max(case when paytype = 'CHECK' then flag else 'false' end) "Check",
  max(case when paytype = 'WIRE' then flag else 'false' end) "Wire",
  max(case when paytype = 'CREDIT' then flag else 'false' end) "Credit"
from
(
  select d.dealer_id,
    d.dealer_name,
    p.paytype, 
    'true' flag
  from dealer d
  left join Dealer_Payment_type dp
    on d.dealer_id = dp.dealer_id
  left join payment_type p
    on dp.payment_type_id = p.paymenttype_id
)
group by dealer_id, dealer_name; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/4cd3b/14)

# c++ - SQLite 和 QSqlQuery：引用有界值

> ID：15907097
> 
> 赞同：0
> 
> 时间：2013-04-09T16:11:40.730
> 
> 标签：c++, sqlite, qt4, qsqlquery

我想获取给定月份和年份的条目日期，因为我在*SQliteman*中成功执行了下一个查询：

```
SELECT date FROM Entries WHERE strftime('%Y-%m',date) = '2013-04' 
```

要将此查询与 QSqlQuery 一起使用，我使用以下代码

```
query.prepare("SELECT date FROM Entries WHERE strftime('%Y-%m',date) = ':year-:month'");
query.bindValue(":month", QString().sprintf("%02d", month));
query.bindValue(":year", QString::number(year)); 
```

但是会引发错误*“参数计数不匹配” 。*那是**:year**和**:month**中的引号，但我必须使用它，否则查询不会返回任何结果。

如果不能使用引号，必须如何构建查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:04:21.517

您不能替换字符串中的参数；参数本身是整个字符串。

连接 SQL 中的字符串：

```
query.prepare("SELECT ... WHERE strftime(...) = :year || '-' || :month"); 
```

您还可以事先构造整个字符串：

```
query.prepare("SELECT ... WHERE strftime(...) = :yyyymm");
query.bindValue(":yyyymm", month + "-" + year); 
```

# cocos2d-iphone - cocos2dx ccDrawLine 渐变色？

> ID：15907098
> 
> 赞同：1
> 
> 时间：2013-04-09T16:11:49.717
> 
> 标签：cocos2d-iphone, opengl-es-2.0, cocos2d-x

我正在制作一个绘图应用程序，我希望用户在绘制线条时允许渐变颜色.. ccDraw 允许颜色但如何获得渐变颜色？

# php - PHP/MYSQL 时间表计算进出时间

> ID：15907099
> 
> 赞同：0
> 
> 时间：2013-04-09T16:11:58.593
> 
> 标签：php, mysql

我到处搜索，找到了很多答案，但没有什么适合我的情况。我正在为几个员工制作一个非常简单的时间表（PHP/MYSQL）。只有几个字段可以输入“位置”“描述”“时间”“超时”。我需要做的是花时间和超时，找出多少小时。出于显示目的，我使用了一个下拉列表来显示时间/超时，这些值是从 strtotime() 函数创建的，每半小时递增一次。

```
echo '<select name="timein">';
$start=strtotime('7:00am');
$end=strtotime('8:00pm');
for ($i=$start;$i<=$end;$i+=1800)
{echo '<option value="'.date('g:i a',$i).'">'.date('g:i a',$i).'</option>';}
echo '</select>'; 
```

当我尝试将它们插入我的数据库时，我得到一个不正确的时间值错误（我应该将 timein 作为 varchar 吗？）但我只需要一种方法来获取 timein（上午 9 点）超时（下午 2 点）并获得 5 小时从中。

```
mysql_query("INSERT INTO sheet(employee, date, location, description, timein, timeout)
VALUES('$employee', NOW(), '$location', '$description', '$timein', '$timeout')")or die(mysql_error()); 
```

*   员工 varchar(30)
*   日期日期
*   位置文字
*   及时
*   超时时间
*   时间 int(10)
*   总小时数（10）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:56:15.983

您的日期列期待类似的东西，`'0000-00-00'` 但 mysql 函数`now()`返回 Timestamp，如`'0000-00-00 00:00:00'`try`CURDATE()`而不是。

此外，您的日期格式对于 mysql 对时间的期望也不正确。`'00:00:00'` 您应该`date("H:i:s", $i)`在为每个选项创建值时尝试。您仍然可以使用文本部分的日期格式。（用户将看到的文本。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:15:56.303

你失踪了`</option>`，你的选择没有价值，只是一个标签。

`<select>`应该是这样的：

```
<select name="timein">
    <option value="0">8:00am</option>
    <option value="1">9:00am</option>
    <option value="2">10:00am</option>
    <option value="3">11:00am</option>
    <!-- etc -->
</select> 
```

# c# - Xamarin.iOS 在将 C# 编译为本机代码时对内存管理做了什么？

> ID：15907100
> 
> 赞同：6
> 
> 时间：2013-04-09T16:11:58.787
> 
> 标签：c#, xamarin.ios, garbage-collection

Xamarin.iOS 对内存管理有什么作用？使用通常的 IL，我们有垃圾收集器，它负责处理未使用的对象并让程序员免于调用 delete。当 Xamarin 将代码编译为本机时，这是如何工作的？谁清理不再使用的物品？

这个问题回答了编译的工作原理，但没有解释内存管理部分：[MonoTouch 如何工作？](https://stackoverflow.com/questions/1453355/how-monotouch-works)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:15:32.020

[您寻求](https://stackoverflow.com/a/1461900/501250)的答案是在您链接的问题上给出的。

总而言之，IL 到本机的翻译过程是提前完成的，但 Mono 运行时的其他部分仍然是必需的。JIT 编译只是运行时执行的任务之一，这个特定的部分与 iOS 的内存限制不兼容（可写内存页也不能​​执行，这是 JIT 运行所必需的）。这是，AFAIK，完全需要提前（AOT）编译的唯一原因。

Mono 垃圾收集器确实在 iOS 上运行，它只是嵌入到 Monotouch 编译器生成的二进制文件中。生成的二进制文件包含您的 AOT 编译的应用程序代码以及您使用的库的 AOT 编译版本，*以及 Mono 运行时的精简版本。*

# ruby - Ruby 找不到新版本的 OpenSSL

> ID：15907103
> 
> 赞同：17
> 
> 时间：2013-04-09T16:12:02.977
> 
> 标签：ruby, macos, openssl, activesupport

何时何`OpenSSL::OPENSSL_VERSION_NUMBER`地设置？为什么不设置为我刚刚安装的最新 OpenSSL？

首先是错误：

```
$ gem install activesupport -v '3.2.13'
Error while executing gem ... (RuntimeError)
Unsupported digest algorithm (SHA512) 
```

如果我直接进入 irb，我可以看到 Ruby 正在使用“旧”的 openssl：

```
$ irb
>> require 'openssl'
=> true
>> OpenSSL::Digest.new('sha512')
RuntimeError: Unsupported digest algorithm (sha512)
>> OpenSSL::OPENSSL_VERSION_NUMBER.to_s(16)
"9070cf" 
```

这告诉我 Ruby 没有找到我刚刚构建的本地版本的 OpenSSL，它至少应该是 0x908000。相关代码：

```
# file: usr/lib/ruby/2.0.0/openssl/digest.rb
...
alg = %w(DSS DSS1 MD2 MD4 MD5 MDC2 RIPEMD160 SHA SHA1)
if OPENSSL_VERSION_NUMBER > 0x00908000
  alg += %w(SHA224 SHA256 SHA384 SHA512)
end 
```

解释了为什么它没有找到 SHA512。

但我不知道为什么 Ruby 使用的是旧版本的 OpenSSL。我使用新资源构建了 OpenSSL 和 Ruby

```
SANDBOX=/Users/me/sandboxes/ruby2
PATH=$(SANDBOX)/usr/bin:$(PATH)

# Create a fresh OpenSSL from sources
(downloaded and unpacked http://www.openssl.org/source/openssl-1.0.1e.tar.gz)
$ ./config --prefix=$(SANDBOX)/usr --openssldir=$(SANDBOX)/usr/openssl
$ make ; make install ; make clean
# verify openssl
$ which openssl
/Users/me/sandboxes/ruby2/usr/bin/openssl
$ openssl version
OpenSSL 1.0.1e 11 Feb 2013

# Create a fresh Ruby from sources
(download and unpack http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz)
$ ./configure --prefix=$(SANDBOX)/usr --with-open-ssl-dir=$(SANDBOX)/usr/openssl
$ make ; make intalll ; make clean
# verify ruby
$ which ruby
/Users/me/sandboxes/ruby2/usr/bin/ruby 
```

但是这个 ruby​​ 似乎没有找到我刚刚构建的 openssl 1.0.1e。

我的理解是，`--with-open-ssl-dir`参数 to`./configure`是必要且足以告诉 ruby​​ 使用新的 OpenSSL，但这似乎不起作用。

关于如何让 Ruby 识别我构建的新 OpenSSL 的任何想法？

我已经尝试`ruby extconf.rb ; make ; make install`按照@Gaurish（下）的建议运行，但是仍然发现 OpenSSL 安装在系统中，而不是在我的项目根目录中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-25T14:45:48.070

**TL;博士**

当 OpenSSL 更改时，请始终重新编译 Ruby 或 openssl 本机扩展。

### 为什么

Ruby 将 OpenSSL 版本编译为 openssl 本机扩展，即使它链接到共享的 OpenSSL 库也是如此。重新安装 Ruby 或重新编译 openssl 扩展来修复它。

```
$ ruby -ropenssl -e'puts OpenSSL::OPENSSL_VERSION'
OpenSSL 1.0.2e 3 Dec 2015
$ /usr/local/opt/openssl/bin/openssl version
OpenSSL 1.0.2g  1 Mar 2016
$ strings {{redacted}/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/openssl.bundle | grep '1.0.2'
OpenSSL 1.0.2e 3 Dec 2015
$ otool -L {{redacted}}/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/openssl.bundle
{{redacted}}/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/openssl.bundle:
        {{redacted}}/ruby-2.3.0/lib/libruby.2.3.0.dylib (compatibility version 2.3.0, current version 2.3.0)
        /usr/local/opt/openssl/lib/libssl.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)
        /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)
        /usr/local/opt/gmp/lib/libgmp.10.dylib (compatibility version 14.0.0, current version 14.0.0)
        /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0) 
```

我们使用[ruby](https://github.com/postmodern/ruby-install) ​​-install和[chruby](https://github.com/postmodern/chruby)。取而代之的是`/opt/rubies`，我们使用`/usr/local/rubies`避免`sudo`。`sudo ln -s /usr/local/rubies /opt/rubies`如果你不想麻烦设置`RUBIES`chruby ，你也可以。

```
brew install openssl && \
ruby-install ruby-2.3.0 \
  --no-install-deps \
  -- \
  --without-X11 \
  --without-tk \
  --enable-shared \
  --disable-install-doc \
  --with-openssl-dir="$(brew --prefix openssl)" 
```

### 更新

**还有**另一个常量来自实际加载的 OpenSSL 库。

`OpenSSL::OPENSSL_LIBRARY_VERSION`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:22:15.297

事实证明，要让 OpenSSL 在 Ubuntu 上使用 Ruby 编译和安装，您需要*在安装 ruby​​ 后*执行以下步骤：

```
cd ruby_src_dir/ext/openssl
ruby extconf.rb
make
make install 
```

让我知道它是否有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T19:03:28.473

我认为传递给的正确标志`./configure`是`--with-openssl-dir`，不是`--with-open-ssl-dir`。

`--with-openssl-dir`此外，在这种情况下传递给的正确值是`$SANDBOX/usr`, not `$SANDBOX/usr/openssl`。

此外，您可能需要为 64 位架构编译 OpenSSL。

这个过程对我有用（OS X 10.8）：

```
$ export SANDBOX=/Users/me/sandboxes/ruby2
$ mkdir -p $SANDBOX/usr/bin

# Install OpenSSL 1.0.1e
$ curl -O http://www.openssl.org/source/openssl-1.0.1e.tar.gz
$ tar -xzvf openssl-1.0.1e.tar.gz
$ cd openssl-1.0.1e
# Copied from the Homebrew recipe for OpenSSL
$ perl ./Configure --prefix=$SANDBOX/usr --openssldir=$SANDBOX/usr/openssl zlib-dynamic shared darwin64-x86_64-cc enable-ec_nistp_64_gcc_128
$ make depend
$ make
$ make install

# Install Ruby 2.0.0-p0
$ curl -O http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz
$ tar -xzvf ruby-2.0.0-p0.tar.gz
$ cd ruby-2.0.0-p0
$ ./configure --prefix=$SANDBOX/usr --with-openssl-dir=$SANDBOX/usr
$ make
$ make install

# Setting PATH before compiling Ruby can can cause the compilation to fail
$ export PATH=$SANDBOX/usr/bin:$PATH
$ which ruby #=>/Users/me/sandboxes/ruby2/usr/bin/ruby
$ which openssl #=> /Users/me/sandboxes/ruby2/usr/bin/openssl
$ openssl version #=> OpenSSL 1.0.1e 11 Feb 2013

$ irb
>> require "openssl"
=> true
>> OpenSSL::Digest.new("sha512")
=> #<OpenSSL::Digest: cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e> 
```

您还可以安装[Homebrew](http://brew.sh/)和[chruby](https://github.com/postmodern/chruby)（或[rbenv](https://github.com/sstephenson/rbenv/)）并按照[说明为 chruby 安装 Ruby 2.0.0](https://github.com/postmodern/chruby/wiki/MRI)：

```
brew install openssl readline libyaml gdbm libffi
wget http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz
tar -xzvf ruby-2.0.0-p0.tar.gz
cd ruby-2.0.0-p0
./configure --prefix=/opt/rubies/ruby-2.0.0-p0 --with-openssl-dir=$(brew --prefix openssl)
make
sudo make install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-18T12:50:49.907

老问题，但如果您必须处理旧设置，仍然相关：

就我而言，问题在于 OpenSSL 安装。如[本博客所述，](https://tekhne.wordpress.com/2008/03/04/compiling-ruby-with-openssl-support/)您必须**确保**使用 OpenSSL 安装共享库：

```
$ ./config --prefix=/path/to/openssl-0.9.8g shared
$ make depend
$ make
$ make install 
```

然后像往常一样安装 OpenSSL。

对于 ruby​​，我使用了这个配置行：

```
$ ./configure --prefix=/path/to/ruby-2.2.2/ --with-openssl-dir=/path/to/openssl-0.9.8g
$ make
$ make install 
```

结果：

```
$ /path/to/ruby-2.2.2/bin/irb
irb(main):001:0> require "openssl"
=> true
irb(main):002:0> OpenSSL::Digest.new('sha512')
=> #<OpenSSL::Digest: cf83e13000efb8bd00042850d66d8007d620e4050b0005dc83f4a921d36ce00047d0d13c5d85f2b0ff8318d2877eec2f000931bd47417a81a538327af927da3e> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-04T15:30:11.653

对于苹果

sudo gem install openssl --install-dir vendor/bundle -- --with-openssl-dir=/usr/local/Cellar/openssl@1.1/1.1.1k

# java - 将 ObjectOutputStream 写入单个 ZipOutputStream 中的多个 ZipEntrys

> ID：15907105
> 
> 赞同：5
> 
> 时间：2013-04-09T16:12:03.923
> 
> 标签：java, serialization, io

我想在 Java 中创建一个 zip 存档，其中每个包含的文件都是通过序列化一些对象来生成的。我在正确关闭流时遇到问题。

代码如下所示：

```
try (OutputStream os = new FileOutputStream(file);
     ZipOutputStream zos = new ZipOutputStream(os);) {

  ZipEntry ze;
  ObjectOutputStream oos;

  ze = new ZipEntry("file1");
  zos.putNextEntry(ze); // start first file in zip archive
  oos = new ObjectOutputStream(zos);
  oos.writeObject(obj1a);
  oos.writeObject(obj1b);
  // I want to close oos here without closing zos
  zos.closeEntry(); // end first file in zip archive

  ze = new ZipEntry("file2");
  zos.putNextEntry(ze); // start second file in zip archive
  oos = new ObjectOutputStream(zos);
  oos.writeObject(obj2a);
  oos.writeObject(obj2b);
  // And here again
  zos.closeEntry(); // end second file in zip archive
} 
```

我当然知道我应该在使用完每个流后关闭它，所以我应该关闭`ObjectOutputStream`指定位置的 s。但是，关闭`ObjectOutputStream`s 也会关闭`ZipOutputStream`我仍然需要的。

我不想省略对的调用，`ObjectOutputStream.close()`因为我不想依赖它目前不超过`flush()`and的事实`reset()`。

我也不能使用单个`ObjectOutputStream`实例，因为我错过了构造函数写入的流标头（zip 存档中的每个单个文件都不是完整的对象序列化文件，我无法独立反序列化它们）。

再次读取文件时会出现同样的问题。

我看到的唯一方法是将其包装`ZipOutputStream`在某种“CloseProtectionOutputStream”中，它将转发所有方法，除非`close()`在将其提供给`ObjectOutputStream`. 但是，这似乎相当 hacky，我想知道我是否错过了 API 中更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:07:43.180

在这种情况下，出于您提到的所有原因，我根本不会将 my`ObjectOutputStream`传输到`ZipOutputStream`. 相反，序列化为 a`byte[]`然后将其直接写入`ZipOutputStream`. 这样，您可以自由关闭，`ObjectOutputStream`并且您生成的每个`byte[]`都将具有来自序列化程序的正确标头。不利的一面是，您最终会得到一个`byte[]`以前没有的内存，但是如果您立即摆脱它，假设我们不是在谈论数百万个对象，那么垃圾收集器应该不会很难清理向上。

就我的两分钱...

它至少听起来不像改变`close()`行为的流子类那么难懂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:35:21.267

如果您无论如何都打算丢弃 ObjectOutputStream ，那么调用`flush()`而不是应该就足够了`close()`，但是正如您在问题中所说，最安全的方法可能是在底层 ZipOutputStream 周围使用包装器来阻止`close()`调用。Apache commons-io 有[CloseShieldOutputStream](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/CloseShieldOutputStream.html)用于此目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T12:38:27.467

如果您的`OutputStream`包装器在多次关闭时引发异常，则它不是 hack。您可以为每个 zip 条目创建一个包装器。

从架构的角度来看，我认为`ObjectOutputStream`作者应该提供一个禁用`close()`级联的选项。您只是在解决他缺少的 API。

# java - ZeroMQ PUB/SUB 不能在不同 JVM 上的同一台机器上工作

> ID：15907108
> 
> 赞同：2
> 
> 时间：2013-04-09T16:12:21.930
> 
> 标签：java, zeromq

我正在使用零 MQ PUB/SUB 模型，其中 PUB 和 SUB 是部署在 webpshere 6.1 上同一台机器上的两个不同应用程序。这个模型在我的本地机器上运行良好，但是当我将它部署到远程 unix box 服务器上时它不起作用。我的 SUB 从未收到来自 PUB 的消息。我尝试了所有可以在网上找到的建议选项（本地主机，127.0.0.1），但没有运气。感谢您对此的任何帮助。我正在使用 jeroMq 3.2.2。

谢谢阿卡什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T08:01:09.740

我们也遇到了同样的问题，并通过使用以下设置修复：

发布者端使用 * (star) : tcp:// *.port number

订阅方使用机器名：tcp://publisher.port 的机器名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:50:08.570

如果您使用多播，则需要在套接字上启用环回。因此，如果发送方应用程序正在侦听数据，它也会获取数据。

# html - Css居中框百分比工作原理

> ID：15907110
> 
> 赞同：1
> 
> 时间：2013-04-09T16:12:22.577
> 
> 标签：html, css

如何删除右侧的剩余空间： HTML 代码：

```
 <div class="wrapper">
        <a href="#"><h1>Title 1</h1></a>
        <a href="#"><h1>Title 1</h1></a>
        <a href="#"><h1>Title 1</h1></a>
    </div> 
```

CSS 代码：

```
.wrapper {
height:                                                         450px;
margin:                                                         50px;
border-radius:                                                  30px;
overflow:                                                       hidden;
background-color:                                               #F00;
border:                                                         1px solid #000;
display:block;
}
.wrapper a {
    width:                                                      33.3%;
    height:                                                     100%;
    background-color:                                           #444;
    margin:0 auto;
    float:                                                      left;
    color:                                                      #fff;
    text-decoration:                                            none;
    display:inline-block;
}
.wrapper a:nth-child(2) {
    background-color:                                           #333;
}
.wrapper a h1 {
    width:                                                      100%;
    height:                                                     70px;
    text-align:                                                 center;
    position:                                                   relative;
    bottom:                                                     0;
    text-shadow:                                                1px 1px #000;
} 
```

[http://jsfiddle.net/6bXQ9/](http://jsfiddle.net/6bXQ9/)

3 个块必须是 33,3 %，但其余 (0,1%) 不会被填充，我使用 33,4% 当页面较小时会丢失 1 个块

我应该用什么？谢谢！对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:16:04.453

`width: 33.33%`做魔术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:16:35.750

这是你想要的吗？[http://jsfiddle.net/6bXQ9/5/](http://jsfiddle.net/6bXQ9/5/)

```
width: 33.33%; 
```

制作宽度：33.33% 解决您的问题。

# web-services - 与 SOAP 不同，为什么 REST 不使用 WSDL？

> ID：15907114
> 
> 赞同：20
> 
> 时间：2013-04-09T16:12:38.703
> 
> 标签：web-services, rest, soap, wsdl

对于 SOAP Web 服务，有一个所有请求/响应都必须遵循的规范。该规范采用 WSDL 文档的形式。但是对于 REST Web 服务，为什么没有这样的规范或 WSDL？这是否会使 REST 更容易受到运行时异常的影响，因为我们没有遵循任何规范？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-26T04:44:13.020

有很多方法可以定义 RESTful API，就像 SOAP 的 WSDL：

*   [谷歌发现服务格式](https://developers.google.com/discovery/)。
*   [捣碎 IODocs](http://www.mashery.com/product/io-docs)。
*   [WADL](http://wadl.java.net/)。
*   [大摇大摆](http://swagger.io/)。
*   [养蜂场](http://apiary.io/)。

[您可以在我的博客文章](http://whyidentity.blogspot.com/2012/07/dynamic-api-reference-generators-aka.html)中找到更多信息。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-09T16:15:23.730

REST 实际上只在资源上使用 HTTP 动词 ( `GET`, `PUT`, `POST`, `DELETE`, ...)。对资源的所有操作都应该以这种方式表示。`POST`当您无法以适合其他三种方式表达您的业务逻辑时，它被用作全部。这就是为什么 REST 服务没有真正的 WSDL 的原因，因为您在资源上只有 4 个方法。

但是您仍然可以[使用 WSDL 2.0 描述 REST Web 服务](http://www.ibm.com/developerworks/webservices/library/ws-restwsdl/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-12T20:26:49.173

`SOAP`是一个协议。
`REST`是一种架构。

> 在许多参考资料中，您会看到 REST 和 SOAP 都被视为竞争对手。那不是真的。SOAP 实际上是一种协议，而不是一种架构风格。REST 可以与之比较的是 SOA 和 RPC。这三个都是 Web 服务样式的示例，每个都有自己的概念重点。RPC 侧重于操作，SOA 侧重于消息，REST 侧重于资源。（[参考](https://www.sitepoint.com/rest-can-you-do-more-than-spell-it-1/)）

所以对于 SOAP，编写了[WSDL 文档标准](https://www.w3.org/TR/wsdl)。但是对于 REST 没有标准文档，但是有很多最佳实践，例如[http://jsonapi.org](http://jsonapi.org)

# perl - Perl 创建哈希引用并一次遍历每个分支中的一个元素

> ID：15907125
> 
> 赞同：3
> 
> 时间：2013-04-09T16:13:16.260
> 
> 标签：perl, loops, hash, for-loop, hash-reference

作为初学者，我有一个我认为相当复杂的问题，希望有人能提供帮助。

我有以下文本文件（标签分层）...

**文件1.txt**

```
Dog     Big     
Dog     Medium     
Dog     Small     
Rabbit     Huge     
Rabbit     Tiny     
Rabbit     Middle    
Donkey     Massive    
Donkey     Little   
Donkey     Gigantic 
```

我需要将 FILE1.txt 读入哈希引用以获得类似以下内容...（使用 Data::Dumper）

```
$VAR1 = {
        'Dog' => {
                 'Big',
                 'Medium',
                 'Small'
                 },
        'Rabbit  => {
                    'Huge',
                    'Tiny',
                    'Middle'
                    },
        'Donkey  => {
                    'Massive',
                    'Little',
                    'Gigantic'
                    },                               
        }; 
```

**我遇到的问题：**

然后我需要一次循环遍历哈希引用的每个分支，我将使用哈希引用中的值来检查它是否与我的关键字匹配，如果是，它将返回它对应的键....例如。 ..

**我需要它做什么：**

```
my $keyword == "Little";

Dog->Big 
if 'Big' matches my keyword then return $found = Dog
else go to the next branch
Rabbit->Huge
if 'Huge' matches my keyword then return $found = Rabbit
else go to the next branch
Donkey->Massive
if 'Massive' matches my keyword then return $found = Donkey
else go to the next branch (which is Dog again, but the second element this time)
Dog->Medium
if 'Medium' matches my keyword then return $found = Dog
else go to the next branch
Rabbit->Tiny
if 'Tiny' matches my keyword then return $found = Rabbit
else go the the next branch
Donkey->Little
if 'Little' matches my keyword then return $found = Donkey 
```

.....依此类推，直到找到关键字或我们到达哈希引用的末尾

**这是我想要实现但不知道如何去做的事情，或者哈希引用是否是最好的方法，或者它是否可以通过哈希/哈希引用来完成？**

非常感谢您的帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:32:54.390

批评我自己的答案：搜索部分的结构可能会更好。即使使用有序散列也可能毫无意义，因为搜索是通过线性列表进行的。也许它应该是一个数组数组

```
 use strict;
    use warnings;
    use Tie::IxHash;
    #open file
    open(my $fh,"ani.txt") ||die $!;

    #make an ordered hash
    tie my %sizes, 'Tie::IxHash';

    #read file into hash of arrays
    while(<$fh>) {
       (my $animal,my $size)=split(/\s+/);
       if (!exists($sizes{$animal})) {
           $sizes{$animal} = [$size];
       } else { 
           push @{$sizes{$animal}},$size;
       }
    }

    my $keyword="Little";
    my $running=1;
    my $depth=0;
    while( $running ) {
      $running = 0;
      for my $search (keys %sizes) {
          next if ($depth > @{$sizes{$search}});
          $running = 1;
          if ($keyword eq $sizes{$search}[$depth]) {
              print "FOUND!!!!!! $search $depth";
              exit(0);
          }
      }
      $depth++;
    } 
```

这是所述问题的另一个版本的解决方案。为了解决实际问题，除了散列中每个动物的第一个“大小”键之外，不需要存储任何东西

然后可以使用此散列来查找动物

```
use strict;
use warnings;
open(my $fh,"ani.txt") ||die $!;

my %animals;

#read file into hash
while(<$fh>) {
   (my $animal,my $size)=split(/\s+/);
   #only add the animal the first time the size is found
   if (!exists($animals{$size})) {
       $animals{$size} = $animal;
   } 
}

my $keyword="Little";
print "animal is ", $animals{$keyword}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:39:58.507

选择正确的数据结构通常是解决方案的关键步骤，但首先您应该定义您想要实现的目标。什么是总体目标？例如，我有这个数据文件，在我的应用程序/程序中，我需要经常询问这些信息。提出正确的问题至关重要，因为例如，如果您不需要经常询问关键字，那么创建哈希根本没有意义。

```
 perl -anE'say $F[0] if $F[1] eq "Little"' FILE1.txt 
```

是的，就是这么简单。在`perlrun`手册页中查找开关及其含义以及如何在更大的应用程序中做同样的事情。

如果您需要经常询问这个问题，您应该以对您有帮助的方式排列您的数据，而不是您必须与之抗争的方式。

```
use strict;
use warnings;
use feature qw(say);
use autodie;

open my $f, '<', 'FILE1.txt';
my %h;
while(<$f>) {
    chomp;
    my ($animal, $keyword) = split' ';
    $h{$keyword} = $animal unless exists $h{$keyword};
}

close $f;

for my $keyword (qw(Little Awkward Small Tiny)) {
    say $h{$keyword} ? "$keyword $h{$keyword}" : "keyword $keyword not found";
} 
```

但是，如果您仍然坚持要遍历哈希，则可以这样做，但已被警告。

```
open my $f, '<', 'FILE1.txt';
my %h;
while (<$f>) {
    chomp;
    my ( $animal, $keyword ) = split ' ';
    push @{ $h{$animal} }, $keyword;
}

close $f;

KEYWORD:
for my $keyword (qw(Little Awkward Small Tiny)) {
    for my $animal (keys %h) {
        for my $k (@{$h{$animal}}) {
            if($k eq $keyword) {
                say "$keyword $animal";
                next KEYWORD;
            }
        }
    }
    say "keyword $keyword not found";
} 
```

# java - 如何重置先前单击的按钮的颜色？

> ID：15907133
> 
> 赞同：1
> 
> 时间：2013-04-09T16:13:35.137
> 
> 标签：java, android

我的 onClickListener 中有此代码（我还有其他内容，但与此问题无关：

```
final OnClickListener clickListener = new OnClickListener() {

            public void onClick(View v) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

}
} 
```

当我按下它时，我将按钮颜色设置为绿色（有一些不透明度）。如何清除该颜色，将其重置为我的默认按钮颜色（不是 Android 默认值，我的默认设置颜色），并且只有当前按下的按钮为绿色？

编辑：

这是我的整个 onClickListener 代码：

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;

            public void onClick(View v) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } // only do stuff if buttons are in different layouts
          else if (button.getParent () != buttonClicked.getParent()) {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        Toast.makeText(Spojnice.this, "Tacno", Toast.LENGTH_SHORT).show();
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                    } else {
                        Toast.makeText(Spojnice.this, "Netacno", Toast.LENGTH_SHORT).show();
                        //buttonClicked.setEnabled(false);
                        //buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));
                        //button.getBackground().clearColorFilter();
                    }
                    buttonClicked = null;
                }       
            }
     }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:16:05.053

使用 smth like 作为按钮背景：

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:drawable="@drawable/drawable1" /> -- when button is pressed
     <item android:drawable="@drawable/drawable2" /> -- button isn't pressed
 </selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:17:48.187

利用：

```
button.getBackground().setColorFilter(null); 
```

以移除滤色器。

# maven - 源 1.3 不支持 Netbeans Maven 注释，请使用源 5

> ID：15907136
> 
> 赞同：2
> 
> 时间：2013-04-09T16:13:40.983
> 
> 标签：maven, netbeans, compiler-construction, maven-plugin

在使用 Netbeans 6.7 中的 Maven 构建我的项目时，我收到以下错误消息：

```
Error   annotations are not supported in -source 1.3   (use -source 5 or higher to enable annotations) 
```

我已经在[这个线程](https://stackoverflow.com/questions/6513479/maven-install-annotations-are-not-supported-in-source-1-3)上看到我需要向我的 POM.xml 添加一个 maven-compiler-plugin 配置，但我不想对每个项目都这样做。我可以将它设置在一个会影响我所有 Maven 项目的中心位置吗？在 settings.xml 中以某种方式？

我已经将 Netbeans 配置为使用 Maven 3.0.3，并且我的 JAVA_HOME 指向 JDK 1.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:19:21.133

即使使用 Netbeans 在每个项目中配置它很简单：

*   右键单击您的项目，
*   选择«属性»,
*   在项目属性窗口中选择«sources»，
*   选择 «source/binary/format» 到 1.3
*   单击确定将正确更新您的 pom。

更好的方法是使用（[poms 中的继承](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance)）。

在父 pom.xml 中配置插件：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>
      <groupId>com.mycompany</groupId>
      <artifactId>parent-pom</artifactId>
      <version>1.0-SNAPSHOT</version>
      <packaging>pom</packaging>
      <name>parent-pom</name>
      <build>
          <plugins>
              <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                    <configuration>
                        <source>1.3</source>
                        <target>1.3</target>
                    </configuration>
                </plugin>
          </plugins>
      </build>
    </project> 
```

然后，您的模块可以通过这种方式继承此行为：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>parent-pom</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>
<artifactId>mavenproject1</artifactId>
<packaging>jar</packaging>
<name>mavenproject1</name> 
```

# sockets - UDP 服务器可以同时处理的客户端是否存在实际限制？

> ID：15907140
> 
> 赞同：3
> 
> 时间：2013-04-09T16:13:56.263
> 
> 标签：sockets, udp

我的游戏需要一个玩家聚集的大厅，然后再分配一个专用/单独的服务器，他们将在其中实际玩游戏。这个大厅相当琐碎，唯一的操作是登录、Ping、StartGame。服务器只需要保留有关客户端的基本信息，他是否登录，而不需要保留太多其他资源。

我用一个简单的 TCP 服务器做了一些测试，在开销得到我之前，我最多可以支持大约 10000 个连接。因此，为了支持 100000 名玩家，我需要部署一个服务器场，至少 10 台机器，并在服务器之间添加同步......

我正在研究使用 UDP 做同样的事情的可能性。我不担心 UDP 的无连接或不可靠的性质，我理解这一点，并且有大量的 UDP 与 TCP 文章。我的问题本质上是实用的/建筑的。在上述场景中，实际限制是多少，单个 UDP 服务器每秒可以处理多少个数据包？期望 UDP 服务器每秒可以处理 100000 个数据包是否现实？哪台机器？Amazon EC2 可以提供的任何东西。

任何见解或进一步阅读将不胜感激。

**编辑：**评论表明我可以获得无限（100000+）个 TCP 连接......我一定遗漏了一些东西，但是，任何人都可以让下面的代码达到 100000 个连接。

```
public class Server
{
    public static void main(String[] args)
    {
        System.out.println("Listening...");
        try
        {
            ServerSocket ss = new ServerSocket(22222);

            ArrayList<Socket> sockets = new ArrayList<Socket>();

            while (true)
            {
                sockets.add(ss.accept());
                if (sockets.size() % 100 == 0)
                {
                    System.out.println(String.format("Received %d connections.", sockets.size()));
                }
            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

和

```
public class Client
{
    public static void main(String[] args)
    {
        ArrayList<Socket> sockets = new ArrayList<Socket>();

        try
        {
            while (true)
            {
                sockets.add(new Socket("localhost", 22222));
            }
        }
        catch (UnknownHostException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

# java - 替换java中的字符？

> ID：15907141
> 
> 赞同：0
> 
> 时间：2013-04-09T16:13:56.183
> 
> 标签：java

```
public void sendData(){
         try {
            URL data = new URL("http://mywebsite.net/isvalid.php?username=" + usernameField.getText() + "&password=" + passwordField.getText());
            BufferedReader in = new BufferedReader(
            new InputStreamReader(data.openStream()));

            String inputLine;
            while ((inputLine = in.readLine()) != null)
             if(inputLine.length() > 0)
              inputString = inputLine;
                in.close();
            if(!inputString.equals("Incorrect password.")){
                System.out.println("Correct password");
                run();
                dispose();
            } else 
                if(usernameField.getText().length() > 0 && passwordField.getText().length() > 0) {
                invalidUP();
                System.out.println("Invalid username or password.");
                }  else
                    if(usernameField.getText().length() < 1 || (passwordField.getText().length() < 1)) {
                        System.out.println("No password or username entered.");
                        upLength();
            }
         } catch (IOException e) {
       e.printStackTrace();
         }
     } 
```

如何检查 usernameField 或 passwordField 中是否有空格？如果有，请将其替换为“_”。

另外，如果您认为这种方法发送数据是错误的，或者它可以更容易/更快地完成，请详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:15:16.440

使用[**String#replaceAll()**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String uname ="abc xyz";
uname = uname.replaceAll("\\s+", "_"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:15:28.433

如果您的字符串中只有空格，请尝试以下操作：

```
username = username.replace(" " , "_"); 
```

否则，如果您的用户名中有空格，请尝试以下操作：

```
username = username.replaceAll("\\s+" , "_"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:15:30.480

看`String.replace`：

passwordField = passwordField.replace(' ', '_');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:15:32.973

java.lang.String 有一个名为[replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)的好方法。

# php - 如何在codeigniter中从单个表单上传多个文件

> ID：15907142
> 
> 赞同：1
> 
> 时间：2013-04-09T16:13:57.637
> 
> 标签：php, codeigniter

有人可以帮我从一个表单上传多个文件。如果可能，请举一些例子。我已经通过互联网浏览了几个地方，但没有找到任何解决方案。下面是我在上传功能模型中的代码，它适用于单次上传，但不适用于从单个表单进行多次上传。

```
function upload(){
     $config[$a]=array(
        'allowed_types'=>'xlsx',
        'upload_path'=>  $this->gallery_path,
        'overwrite'=>true,
        'max_size'=>2000,
    );
     $this->load->library('upload',$config);
    $this->upload->do_upload();

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:31:10.527

尝试这个：

```
function do_upload()
{
    foreach ($_FILES as $index => $value)
    {
        if ($value['name'] != '')
        {
            $this->load->library('upload');
            $this->upload->initialize($this->set_upload_options());

            //upload the image
            if ( ! $this->upload->do_upload($index))
            {
                $error['upload_error'] = $this->upload->display_errors("<span class='error'>", "</span>");

                //load the view and the layout
                $this->load->view('pages/uploadform', $error);

                return FALSE;
            }
            else
            {

                 $data[$key] = array('upload_data' => $this->upload->data());

                 $this->load->view('pages/uploadsuccess', $data[$key]);

            }
        }
    }

}

//here put your rules
private function set_upload_options()
{   
    //upload an image options
    $config = array();

    $config['upload_path']   = FCPATH.'public/uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['encrypt_name']  = TRUE;
    $config['max_width']     = '2000';
    $config['max_height']    = '1500';
    $config['max_size']      = '2048';

    return $config;
} 
```

# jsf - 清除对话框 JSF

> ID：15907143
> 
> 赞同：0
> 
> 时间：2013-04-09T16:14:00.383
> 
> 标签：jsf, primefaces

我尝试了很多东西，但它不起作用，我在对话框中有一个向导，当我提交表单并重新打开对话框时，我在最后一个数据中找到了它，这是我的代码：

```
 <p:wizard id="wizForNewIssue" widgetVar="wizNewIsssue"
        flowListener="#{managedBeanProjects.onFlowProcess}"
        style="width:100%;">

        <p:tab id="personal" title="Details">
           <p:panel style="width:800px;height:200px">
              <h:messages errorClass="error" />
              <h:panelGrid id="new0" columns="3">
                                                    ........... 
                   </h:panelGrid>
              <f:facet name="footer">
                 <h:outputText value="Skip to last: " />
                 <h:selectBooleanCheckbox value="#{managedBeanProjects.skip}" />
              </f:facet>
           </p:panel>
        </p:tab>

        <p:tab id="version" title="Version Details">
           <p:panel style="width:800px;height:200px">
              ............
           </p:panel>
        </p:tab>

        <p:tab id="goConfirm" title="Confirmation">
           <p:panel style="width:800px;height:200px">

              <h:panelGrid id="final" columns="4">
                                                 .............                  
              </h:panelGrid>

              <f:facet name="footer">
                 <p:commandButton value="Submit"
                    update=":form1:growl :form1:dialogNewIssue "
                    actionListener="#{managedBeanProjects.newIssue}"
                    oncomplete="newDialog.hide()"  />
              </f:facet>
           </p:panel>
        </p:tab>
     </p:wizard>

  </p:dialog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:29:20.207

Primefaces 向导具有“步骤”属性来设置“流程中当前步骤的 ID”，您可以设置要显示的选项卡的 ID：

```
<p:wizard step="#{managedBeanProjects.tabIndex}" id="wizForNewIssue" widgetVar="wizNewIsssue"
        flowListener="#{managedBeanProjects.onFlowProcess}"
        style="width:100%;"> 
```

豆：

```
if(true){
tabIndex = "personal";
} 
```

# dart - 自动呼叫转移 - 访问啮齿动物的大肠

> ID：15907144
> 
> 赞同：2
> 
> 时间：2013-04-09T16:14:01.803
> 
> 标签：dart

D语言有'别名...'。Go 有嵌入的字段。在下面的代码中，Dart 是否有办法在不经过内脏的情况下到达啮齿动物的大肠？理想情况下，以某种方式公开内部组件的集合，无需在每个动物中使用一些通用的内部组件创建转发呼叫？

```
import 'dart:io';

class Stomach {
  work() { print("stomach"); }
}
class LargeIntestine {
  work() { print("large intestine"); }
}
class SmallIntestine {
  work() { print("small intestine"); }
}

class Guts {
  Stomach stomach = new Stomach();
  LargeIntestine largeIntestine = new LargeIntestine();
  SmallIntestine smallIntestine = new SmallIntestine();
  work() {
    stomach.work(); 
    largeIntestine.work();
    smallIntestine.work();
  }
}

class Rodent {
  Guts guts = new Guts();
  work() => guts.work();
}

main() {
  Rodent rodent = new Rodent();
  rodent.guts.largeIntestine;
  rodent.work();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:33:46.120

感谢您对...生物学的兴趣，并且很高兴地说您正在寻找的构造可能是`get`关键字。

请参阅：[http ://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html#classes-getters-and-setters](http://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html#classes-getters-and-setters)

```
class Rodent {
  Guts guts = new Guts();
  work() => guts.work();

  // Getter for the Rodent's large intestine.
  LargeIntestine get largeIntestine => guts.largeIntestine;
}

main() {
  Rodent rodent = new Rodent();

  // Use the getter.
  rodent.largeIntestine;
  rodent.work();

  rodent.awake();
  rodent.recognizeMaster();
  if (rodent.self.awareness && rodent.self.isMonster) {
    rodent.turn.on(rodent.master);
    print("Oh. Oh, no! NoOooOO! Argghhhhhh...");
    rodent.largeIntestine.work();
  }
} 
```

* * *

或者，如果您希望节省写作工作，您可以拥有一个具有您正在寻找的属性的超类或接口或 mixin（取决于您想要做什么）：

```
class Animal {
  LargeIntestine largeIntestine = new LargeIntestine();
  ...
}

class Rodent extends Animal { ... } 
```

或者

```
class Rodent extends Object with Animal { ... } 
```

见：[http ://www.dartlang.org/articles/mixins/](http://www.dartlang.org/articles/mixins/)

# php - 如何删除数据库中不存在的文件

> ID：15907152
> 
> 赞同：1
> 
> 时间：2013-04-09T16:14:45.883
> 
> 标签：php, mysql, sql

我想在 php 中编写一个代码，该代码转到目录“上传”，看看是否是我的数据库中不存在的文件，如果找到则删除该文件。

```
$like = scandir(upload);
$myFile1 = upload; 
$myFile1 .= '/'; 
$myFile1 .= $like; 

$rs = mysql_query('SELECT url from blog');
while(list($url) = mysql_fetch_row($rs))
{
if($like != $url){
unlink($myFile1);
}

} 
```

它给我写了一个错误警告：unlink(upload/Array) [function.unlink]:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:47:30.503

`scandir`返回一个文件数组；您需要逐步检查该数组，以单独检查每个数组：

```
$like = scandir('upload');

foreach ($like as $thisFile) {
    $rs = mysql_query("SELECT url FROM blog WHERE url='$thisFile'");
    if (! mysql_num_rows($rs)) {
if($thisFile != "." and $thisFile != ".."){
         unlink ('upload/' . $thisFile);
}

    }
} 
```

您正在检查该目录中的每个文件以查看它是否在`blog`表中有条目；如果没有，则将其传递给取消链接。我没有测试过这段代码，但它应该能让你了解它是如何运行的。

几点注意事项：

1.  如果目录中有目录怎么办？您应该添加一些检查以跳过它们。不要忘记你将拥有`./`并`../`在那里。

2.  如果 of 中有一个条目`blog`怎`..\..\..\..\etc\passwd`​​么办？您应该添加一些检查以确保这`$thisFile`不是您不想删除的内容。

3.  这是使用mysql；这已被弃用，您应该考虑迁移到查询`mysqli`或`PDO`查询。然后，您还可以将查询转换为准备好的语句，这将有助于它更有效地运行。

# sql - ORACLE AVG 函数查询

> ID：15907153
> 
> 赞同：0
> 
> 时间：2013-04-09T16:14:47.503
> 
> 标签：sql, oracle, average

我有四个具有以下结构的表：-

我正在尝试构建一个查询，该查询将输出出勤率低于其所属课程的平均出勤率的课程。到目前为止，我已经构建了两个查询

这将输出每个课程的参加者总数

这会输出每门课程的课程总数。

我认为我需要做的是将第一个查询的结果除以第二个查询的结果（这将为我提供每门课程的每个课程的平均出勤率），然后仅输出出勤率低于该结果的课程。我真的很难建立这个查询所以我基本上是在寻找一些帮助

一如既往地感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:00:44.390

一种方法是首先找到每个课程的参加人数，然后从该结果中找到每门课程的平均参加人数，将平均参加人数加入每个相关课程，然后选择实际参加人数为情人的课程。平均值。

这可以使用 CTE 来完成：

```
WITH attendee_counts AS
(SELECT c.course_id, o.offering_id,
        COUNT (Student_id) AS attendees     -- find attendance
 FROM course c
 INNER JOIN offering o 
 ON o.course_id = c.course_id
 LEFT JOIN attendance a
 ON a.offering_id = o.offering_id
 GROUP BY c.course_id, o.offering_id)       -- for each offering 

SELECT ac.course_id, ac.offering_id,
       ac.attendees, avgs.avg_attendees
FROM attendee_counts AS ac
INNER JOIN
 (SELECT course_id, AVG(attendees) AS avg_attendees   -- then average
  FROM attendee_counts
  GROUP BY course_id) AS avgs                         -- by course
ON avgs.course_id = ac.course_id
WHERE ac.attendees < avgs.avg_attendees; 
```

可以在此处测试查询（在 PostgreSQL 中有效）：[http ://www.sqlfiddle.com/#!1/f5b60/20/0](http://www.sqlfiddle.com/#!1/f5b60/20/0)

**编辑：**

Oracle 似乎需要一个稍微不同的解决方案：

```
WITH attendee_counts AS
(SELECT c.course_id, o.offering_id,
        COUNT (Student_id) AS attendees
 FROM course c
 INNER JOIN offering o  ON o.course_id  = c.course_id
 LEFT JOIN attendance a ON a.offering_id = o.offering_id
 GROUP BY c.course_id, o.offering_id)

SELECT o.course_id, o.offering_id, o.attendees,
  avg(c.attendees) AS avg_attendees
  FROM attendee_counts o              -- connect attendance by offering
LEFT JOIN attendee_counts c
ON c.course_id = o.course_id          -- to each offering of the same course
GROUP BY o.course_id, o.offering_id, o.attendees
HAVING o.attendees < avg(c.attendees); 
```

这可以在这里测试[http://www.sqlfiddle.com/#!4/e50e4/4/0](http://www.sqlfiddle.com/#!4/e50e4/4/0)（对于 Oracle 11g R2）

# java - 使用 Jitsi 库在 Java 上捕获和发送视频

> ID：15907159
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:15:15.340
> 
> 标签：java, video-capture

我正在尝试在 java 上开发视频聊天应用程序。我发现`libjitsi`，它使用本机库。有两个示例代码调用`AVTransmit2`和`AVReceive2`（如果您想查看：[https](https://jitsi.org/Projects/LibJitsi) ://jitsi.org/Projects/LibJitsi ）。但我无法运行它们中的任何一个。我想我不知道如何添加本机库。当我将本机库与它链接时：

`System.load("the path of the native library")`

除了一个之外，所有这些似乎都添加了。一个因链接错误而停止运行，一个调用`AWTrenderer`需要更多库的链接。但是`libjitsi`给了我足够的库来运行我认为的代码。但我仍然在输出时遇到链接问题。那么问题出在哪里？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:40:06.710

解决了。我没有使用 system.load 来链接本机库。我的 IDE (eclipse) 有一个配置。您只需选择包含本机库的文件夹。

# asp.net-mvc - 通过 Json 传递 IEnumerable

> ID：15907161
> 
> 赞同：0
> 
> 时间：2013-04-09T16:15:18.113
> 
> 标签：asp.net-mvc, jquery, ienumerable

我在一个简单的评论数据库 MVC 程序中制作了一个“喜欢”按钮。当我将鼠标悬停在“Like”按钮上时，我将评论的 ID 传递给 HomeController 中的 ActionResult。问题（我认为）是我不知道如何将喜欢的 IEnumerable 列表传递给 ajax。

脚本和 HTML 部分：

HTML：

```
<a href="#" class="likes" title="No likes yet." id="@comment.ID">Like this</a> 
```

脚本：

```
$(".likes").hover(function (event) {

    var Liker = { "CID": event.target.id };

    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/Home/ShowLike/",
        data: JSON.stringify(Liker),
        dataType: "json",
        success: function (data) {
            $.each(data.Name, function (value) {
                alert(value);
            });
        },
        error: function (xhr, err) {
            // Note: just for debugging purposes!
            alert("readyState: " + xhr.readyState +
            "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
        }
    });

}); 
```

HomeController -> ShowLike

```
 [HttpPost]
    public ActionResult ShowLike(Liker ids)
    {
        LikesRepository lkrep = new LikesRepository();

        IEnumerable<Like> list = lkrep.GetLikes(ids.CID);

        return Json(list);
    } 
```

喜欢存储库

```
 public class LikesRepository
 {
    CommentDBDataContext m_db = new CommentDBDataContext();

    public IEnumerable<Like> GetLikes(int iden)
    {
        var result = from c in m_db.Likes
                     where c.CID == iden
                     orderby c.Name ascending
                     select c;

        return result;
    }

    public void AddLike(Like c)
    {
        m_db.Likes.InsertOnSubmit(c);
        m_db.SubmitChanges(); //This works
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:42:42.050

在深入研究该问题后，我们发现它实际上触发了内部服务器错误（500）。这是由将 LINQ to SQL 对象序列化为 JSON 的循环引用引起的。这个问题讨论了好几遍...

[如何删除实体框架中的循环引用？](https://stackoverflow.com/questions/2107535/how-to-remove-circular-reference-in-entity-framework)

[我如何解决 Json 序列化循环引用错误？](https://stackoverflow.com/questions/4754375/how-did-i-solve-the-json-serializing-circular-reference-error)

[使用 MVC3 和 EF4 CTP5w 进行 JSON 序列化的循环引用异常](https://stackoverflow.com/questions/4606232/circular-reference-exception-with-json-serialisation-with-mvc3-and-ef4-ctp5w)

另一种解决方案是将数据作为字符串列表返回，因为它们只需要名称。

# vba - 获取昨天的日期，如果星期一获取周末范围

> ID：15907162
> 
> 赞同：2
> 
> 时间：2013-04-09T16:15:20.160
> 
> 标签：vba, ms-access

有没有办法得到昨天的日期。如果当前日期是星期一，我需要返回三个日期 - 星期日、星期六和星期五。有什么方法可以在单个查询中完成此操作。我不太了解 VBA，但如果这是解决问题的唯一方法，我愿意亲自动手。

```
Select * from [Purchase Order] where MyDate = 'Yesterdays date(s)' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:33:50.827

该`WeekDay()`函数将告诉您函数返回的今天的日期是否 `Date()`为星期一。在表达式中使用它，`IIf()`以便`MyDate`在今天不是星期一时匹配昨天的日期，或者在星期一时匹配前 3 个日期`MyDate`。

```
SELECT *
FROM [Purchase Order] AS p
WHERE
    IIf(Weekday(Date()) = 2,
        p.MyDate BETWEEN DateAdd('d',-3,Date())
            AND DateAdd('d',-1,Date()),
        p.MyDate=DateAdd('d',-1,Date())
        ); 
```

# php - 每年使用 cron 作业更新数据库

> ID：15907163
> 
> 赞同：0
> 
> 时间：2013-04-09T16:15:20.347
> 
> 标签：php, mysql

我想在 php 项目中使用**cron 作业更新 mysql 数据库。**下面是我想每年运行的一段代码。我曾尝试在 mysql 中使用事件调度程序，但失败了。

```
$stud="select * from student_class where class<4";
 while ($row=mysql_fetch_array($stud))
 {
  $sql = "INSERT into student class(id,student_id,class,year) values('','{$row  
 ['student_id']}','{$row['class']}','{$row['year']}+1')" ;
  mysql_query($sql);
 } 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:21:12.407

使用本[文档](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)帮助您在服务器上添加 cron 作业

```
crontab -e
1 2 3 4 5 php /path/to/php_file arg1 arg2 
```

在哪里 ：

```
1: Minute (0-59)
2: Hours (0-23)
3: Day (0-31)
4: Month (0-12 [12 == December])
5: Day of the week(0-7 [7 or 0 == sunday])
/path/to/php_file- Script or command name to schedule 
```

因此，您的 cron 作业将如下所示在每年 1 月 1 日的 00:00 执行：

```
0 0 1 1 * php /path/to/php_file arg1 arg2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:22:47.537

安装 php-cli，以便您可以从终端运行脚本。在您的脚本中，php 二进制文件的位置应该在标题中，例如 #/usr/bin/php 让脚本在终端环境中工作。

然后按照 Philippe 的建议编辑 crontab。

# c++ - 如何使用 C++ 在 Mac 中获取键盘布局

> ID：15907164
> 
> 赞同：2
> 
> 时间：2013-04-09T16:15:22.533
> 
> 标签：c++, c, macos

我在下面找到了获取键盘布局但无法将其转换为字符串的代码：

* * *

```
TISInputSourceRef sourceRef = TISCopyCurrentKeyboardLayoutInputSource(); 
```

* * *

如果您使用`CFShow(sourceRef);`，您可以看到键盘布局，但无法转换 sourceRef。

如何在字符串中获取键盘布局？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T17:12:08.427

我使用这个 objc 代码：

```
#import <Carbon/Carbon.h>

TISInputSourceRef source = TISCopyCurrentKeyboardInputSource();
NSString *s = (__bridge NSString *)(TISGetInputSourceProperty(source, kTISPropertyInputSourceID)); 
```

您也可以将其转换`CFStringRef`为 objc 字符串。

# c# - 调试时将字符串添加到字符串集合中？

> ID：15907166
> 
> 赞同：0
> 
> 时间：2013-04-09T16:15:26.723
> 
> 标签：c#, visual-studio-2010

我有一个空的字符串集合，一个列表。我想向它添加一个字符串项，但我无论如何都看不到如何添加。

屏幕上的工具 QuickView 不提供该功能，我尝试使用“即时窗口”手动执行此操作，但没有可以调用的函数来添加新字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:45:22.770

假设你有这样的事情：

```
var stringCol = new Collection<String>(); 
```

或者

```
var stringCol = new List<String>(); 
```

*（您使用的不是 Collection<> 或 List<> 吗？）*

您将能够在此声明之后的行上设置断点，然后键入**stringCol.Add("blahblah");** 在您的即时窗口中，这会将项目添加到集合或列表中。一旦你按下回车，结果会显示类似“表达式已被评估并且没有价值”，但如果你检查你的列表，新项目就会在那里。

您也可以在键入**stringCol 后按 ctrl+space。**拉起智能感知选项。

可能对您有用的另一件事是直接在代码中插入调试符号，如下所示：

```
#if DEBUG

   //manipulate your string collection here, only while in DEBUG mode
   //set breakpoints so you can skip over this code while debugging, if desired

#endif 
```

[http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx)

# canvas - D3 画布地球鼠标事件

> ID：15907171
> 
> 赞同：2
> 
> 时间：2013-04-09T16:15:37.287
> 
> 标签：canvas, d3.js, mouseevent, polygon, shapes

D3 画布地球示例：http: [//bl.ocks.org/mbostock/4183330](http://bl.ocks.org/mbostock/4183330)

我正在尝试做的是单击一个国家并让地球旋转，以便该国家以地球为中心。

如何将事件监听器（D3 的 .on 或 jQuery 的 .bind 或普通的 addEventListener）添加到国家形状，以便确定我点击了哪个国家？

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:23:46.293

您链接到的示例是使用 HTML5 画布渲染器。据我所知，它不支持将点击事件绑定到特定区域。

[此示例使用 SVG](http://bl.ocks.org/dwtkns/4686432)，它的性能不高，但允许您将事件绑定到每个国家/地区。

就像是，

```
svg.selectAll(".countries path")
.on('click', function(d, i) {
   /* perform whatever logic here related to country associated with d */
}); 
```

在这种情况下，要旋转地球，您需要查看设置投影的旋转。

希望这可以帮助。

# 编辑

关于使用画布，如果您的投影支持它，可以使用[d3.mouse](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_mouse)包装器和[d3.geo.projection().invert](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-invert)来计算鼠标指针的投影坐标。

那时，您必须弄清楚您的观点是否在任何国家“内部”。那可能更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T15:24:45.243

感谢 John Ledbetter 的回答，我能够创建一个地球旋转到用户单击点的工作演示。

它没有解决问题的第二部分，突出显示用户点击的国家。但是下面的代码确实暴露了经度/纬度，因此可以从这里构建该解决方案。

### 完整示例

[这是当用户在CodePen](http://codepen.io/chrislaskey/pen/dMZEGw)上单击透明 3d 地球时旋转到某个点的完整示例。

### 重要部分

当用户点击地球上的一个位置时，进行地球旋转的重要部分是：

```
var canvas = d3.select("#map").append("canvas");

canvas.on("mousedown.drag", onMapClick);

function onMapClick() {
  rotateMap(projection.invert(d3.mouse(this)));
}

function rotateMap(p) {
  d3.transition()
    .duration(850)
    .tween("rotate", function() {
        var r = d3.interpolate(projection.rotate(), [-p[0], -p[1]]);

        return function(t) {
          projection.rotate(r(t));
          redrawMap();
        };
      })
    .transition();
} 
```

用户点击使用`projection.invert(d3.mouse(this))`.

旋转计算函数在该`d3.interpolate(projection.rotate(), [-p[0], -p[1]])`行中创建。

最后，地球旋转本身发生在使用`projection.rotate(r(t))`在线的补间中。

### 参考

关于地图导航的主题，Jason Davie 的文章[Rotate the World](https://www.jasondavies.com/maps/rotate/)很好地解释了用 2d 表示导航 3d 空间的困难。

# java - 不可见的列表视图项目行

> ID：15907172
> 
> 赞同：0
> 
> 时间：2013-04-09T16:15:39.257
> 
> 标签：java, android

我想实现一个搜索文本到 listView，

我从服务器加载 listView 项目。

目前，每次用户在 searchText 中输入内容时，我都会删除 listView 中的所有项目并将它们再次添加到 listView（如果它们包含用户输入的字符串）

但是，删除整个 listView 并开始重新加载所有项目以再次列出要花费很多时间

因此，我想遍历整个 listView 并使不匹配的行不可见，这可能吗？（类似于 View.GONE）

例如，我想隐藏 listView 中的第 k 个项目行。

另外，我想再次将此项目行更改为可见。

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:21:15.047

您不需要使视图不可见。在顶部有一个 EdiText。然后过滤您的列表视图并相应地在列表视图中显示项目。调用 notifydatasetchanged 方法刷新 listview。

在 listview 上搜索的示例。 [http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/)

可以在下面的链接中找到带有自定义过滤器的列表视图示例

[使用 EditText 在 ListView 中搜索](https://stackoverflow.com/questions/10816243/search-in-listview-with-edittext/15367403#15367403)

# javascript - data.addRows 在谷歌图表中不起作用

> ID：15907173
> 
> 赞同：2
> 
> 时间：2013-04-09T16:15:41.550
> 
> 标签：javascript, google-visualization

我正在尝试使用 google API 绘制折线图。

但是没有绘制图表，我可以在 data.addRows(rows); 中发现一些错误。因为此 data.addRows 行之后的警报不会弹出。

如果我在 data.addRows(rows) 之前给出警报，则会弹出警报。

我不知道这里出了什么问题。任何帮助深表感谢。

```
<script type="text/javascript">
      google.load('visualization', '1.0', {'packages':['corechart']});

      function drawLineChart() {
          var date = 0;
          var status = 0;
          var rows = new Array();
          var data = new google.visualization.DataTable();
          var $attendance_date =  new Array();
          var $attendance_status = new Array();

          $attendance_date[0] = '2004';
          $attendance_date[1] = '2005';
          $attendance_date[2] = '2006';

          $attendance_status[0] = 1;
          $attendance_status[1] = 3;
          $attendance_status[2] = 5;

          rows.push(['Year', 'Sales']); 
          for(var i = 0; i < 3 ; i++) {
            date = $attendance_date[i];
            status = parseInt($attendance_status[i]);
            rows.push([date, status]);
          }

          data.addColumn('string', 'Subject');
          //  alert(rows);
          data.addRows(rows);
          alert(rows);

          var options = {
          title: 'My Chart',
          'width':900,
           'height':320, 
           'backgroundColor': '#d9d9e4'
          };

          var chart = new google.visualization.LineChart(document.getElementById('chart_attendance_div'));
          chart.draw(data, options);
      }
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T03:56:53.813

您正在做的事情有很多问题，让我们一一解决。

首先，使用`addRow`and时，您可以使用命令`addColumn`定义标题。`addColumn`因此，您可以删除以下行：

```
rows.push(['Year', 'Sales']); 
```

其次，当您确实有两列（“年份”和“销售”）时，您将单列定义为“主题”。您应该定义两列：

```
data.addColumn('string', 'Year');
data.addColumn('number', 'Sales'); 
```

完成此操作后，您可以将 addRows 命令与最终（工作）代码一起使用：

```
function drawVisualization() {
  var date = 0;
  var status = 0;
  var rows = new Array();
  var data = new google.visualization.DataTable();
  var $attendance_date =  new Array();
  var $attendance_status = new Array();

  $attendance_date[0] = '2004';
  $attendance_date[1] = '2005';
  $attendance_date[2] = '2006';

  $attendance_status[0] = 1;
  $attendance_status[1] = 3;
  $attendance_status[2] = 5;

  // This line is commented out because it should be deleted
  // rows.push(['Year', 'Sales']);
  for(var i = 0; i < 3 ; i++) {
    date = $attendance_date[i];
    status = parseInt($attendance_status[i]);
    rows.push([date, status]);
  }
  // This line is commented out because it should be deleted
  // data.addColumn('string', 'Subject');

  // These lines should be added for column headers
  data.addColumn('string', 'Year');
  data.addColumn('number', 'Sales');

  //  alert(rows); 
  data.addRows(rows);
  // alert(rows);

  var options = {
    title: 'My Chart',
    'width':900,
    'height':320,
    'backgroundColor': '#d9d9e4'
  };

  var chart = new google.visualization.LineChart(document.getElementById('visualization'));
  chart.draw(data, options);
} 
```

但如果你要走到这一步，你还不如去下一步。现在您正在创建一个新数组，将其填充到 for 循环中，并将该数组传递给`addRows`命令。为什么不砍掉中间人？

```
 var data = new google.visualization.DataTable();
      var $attendance_date =  new Array();
      var $attendance_status = new Array();

      $attendance_date[0] = '2004';
      $attendance_date[1] = '2005';
      $attendance_date[2] = '2006';

      $attendance_status[0] = 1;
      $attendance_status[1] = 3;
      $attendance_status[2] = 5;

      data.addColumn('string', 'Year');
      data.addColumn('number', 'Sales');

      for(var i = 0; i < 3 ; i++) {
        data.addRow([$attendance_date[i], parseInt($attendance_status[i])])
      } 
```

Presto，您的代码要简单得多，而且您正在跳过一个步骤。

# java - Java 反射 - 获取数组对象的大小

> ID：15907178
> 
> 赞同：8
> 
> 时间：2013-04-09T16:15:59.210
> 
> 标签：java, arrays, reflection, size, illegalargumentexception

我想知道是否有人知道如何使用反射来获取数组对象的大小？

我有一个**Vehicles组件，其中包含一个****Car**类型的数组对象。

**车辆.java**

```
public class Vehicles{

    private Car[] cars;

    // Getter and Setters
} 
```

**汽车.java**

```
public class Car{

    private String type;
    private String make;
    private String model;

    // Getter and Setters
} 
```

我想知道如何使用 Java 反射获得**车辆组件中****汽车**数组的大小？

 ****我目前有以下内容：**

```
final Field[] fields = vehicles.getClass().getDeclaredFields();

if(fields.length != 0){
    for(Field field : fields){
        if(field.getType().isArray()){
            System.out.println("Array of: " + field.getType());
            System.out.println(" Length: " + Array.getLength(field.getType()));
        }
    }
} 
```

这会导致以下错误：

```
java.lang.IllegalArgumentException: Argument is not an array
    at java.lang.reflect.Array.getLength(Native Method) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T16:19:27.567

该方法`Array.getLength(array)`需要一个数组实例。在您的代码示例中，您在该字段的数组类型上调用它。它不起作用，因为数组字段可以接受任何长度的数组！

正确的代码是：

```
Array.getLength(field.get(vehicles)) 
```

或更简单

```
Array.getLength(vehicles.cars); 
```

或最简单的

```
vehicles.cars.length 
```

不过要注意空`vehicles.cars`值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T16:22:08.440

我想你必须将数组对象本身传递给`Array.getLength()`所以尝试

```
Array.getLength(field.get(vehicles)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:21:54.403

尝试

```
System.out.println(" Length: " + Array.getLength(field.get(vehicles))); 
```**

# dom - Extjs 无法读取 null 的属性“dom”

> ID：15907179
> 
> 赞同：0
> 
> 时间：2013-04-09T16:16:00.017
> 
> 标签：dom, extjs, formpanel

简而言之，我有一个登录面板，当 onClick 事件为 true 时会显示该面板，但出现错误`Cannot read property 'dom' of null`。当我第二次单击时 - 显示面板，但未显示其中的某些元素。当我第三次单击时，其他元素显示最后一个错误“无法调用未定义的方法'bringToFront'”。

```
Ext.onReady(function() {

    Ext.QuickTips.init();
    Ext.ns('Site.login');

    var globalKeyMap = new Ext.KeyMap(document);
    globalKeyMap.accessKey = function(key, handler, scope) {
        var h = function(n, e) {
            e.preventDefault();
            handler.call(scope || this, n, e);
        };
        this.on(key, h, scope);
    };

    var trackEnter = function(tf, e) {
        if (e.keyCode == 13) {
            e.stopPropagation();
            doLogin();
        }
    }

    var doLogin = function() {
        var f = loginPanel.getForm();
        if (f.isValid()) {
            f.doAction(new Hypo.form.Action.DwrSubmit(f, {
                waitMsg: 'Authentication is in progress',
                invoker: function(form, cb) {
                    Login.login(form.getValues(), cb);
                },
                success: function(fp, o) {
                    loginForm.hide();
                    Ext.getBody().addClass("x-body-masked");
                    var w = loginForm;
                    w.mask.setSize(Ext.lib.Dom.getViewWidth(true), Ext.lib.Dom.getViewHeight(true));
                    w.mask.show();
                    if(o.result.data[0].authorities[0].authority=='ROLE_SUPERVISOR')
                    {
                        setTimeout('document.location = "AdminUsers.jsp"');
                    }
                    else if(o.result.data[0].authorities[0].authority=='ROLE_ADMIN')
                    {
                        setTimeout('document.location = "AdminUsers.jsp"');
                    }
                    else
                    {
                        setTimeout('document.location = "List.jsp"');
                    }
                }
            }));
        }
    }

    var loginPanel = new Ext.FormPanel({
        id: 'loginPanel',
        labelWidth: 75, // label settings here cascade unless overridden
        frame: false,
        border: false,
        bodyStyle:'padding:5px 5px 0',
        width: 350,
        defaults: {
            width: 230
        },
        defaultType: 'textfield',
        autoHeight: true,
        items: [{
            id: 'idxLogin',
            fieldLabel: 'Login',
            name: 'login',
            allowBlank: false,
            enableKeyEvents: true,
            maxLength: 50,
            listeners: {
                'keypress': trackEnter
            }
        }, new Ext.form.TextField({
            fieldLabel: 'Password',
            name: 'password',
            inputType: 'password',
            enableKeyEvents: true,
            maxLength: 50,
            listeners: {
                'keypress': trackEnter
            }
        })
        ]
    });

    var loginForm = new Ext.Window({
        layout      : 'fit',
        width       : 350,
        closable    : false,
        modal: true,
        plain       : true,
        title: 'User Authentication',
        items: loginPanel,
        autoHeight: true,
        buttons: [{
            text: 'OK',
            handler: doLogin
        },{
            text: 'Cancel',
            handler: function() {
                loginForm.hide();
            }
        }],
        listeners: {
            'activate': function() {
                setTimeout(function() {
                    Ext.getCmp("idxLogin").focus();
                }, 100);
            }
        }
    });
    Site.login.window = loginForm;

    }); 
```

* * *

```
<a href="javascript://" onclick="Site.login.window.show();return false">Login</a> 
```

我尝试添加 renderTo:'someDiv' 并将 ID 为“someDiv”的 div 添加到正文。但我收到了同样的错误信息。

请帮忙。

# java - 在 Java 中读取 XML 时的空指针

> ID：15907184
> 
> 赞同：-3
> 
> 时间：2013-04-09T16:16:11.883
> 
> 标签：java, xml, xml-parsing, w3c

我正在尝试从我在 java 中的 xml 文件中获取所有作者这里是 xml 代码

```
<?xml version="1.0"?>
<map>
<authors>
    <author>testasdas</author>
    <author>Test</author>
</authors>
</map> 
```

这是我在 Java 中使用的代码

```
public static List<String> getAuthors(Document doc) throws Exception {
    List<String> authors = new ArrayList<String>();
    Element ed = doc.getDocumentElement();
    if (notExists(ed, "authors")) throw new Exception("No authors found");
    Node coreNode = doc.getElementsByTagName("authors").item(0);
    if (coreNode.getNodeType() == Node.ELEMENT_NODE) {
        Element coreElement = (Element) coreNode;
        NodeList cores = coreElement.getChildNodes();
        for (int i = 0; i < cores.getLength(); i++) {
            Node node = cores.item(i);
            if (node.getNodeType() == Node.ELEMENT_NODE) {
                Element e = (Element) node;
                String author = e.getElementsByTagName("author").item(i).getTextContent();
                Bukkit.getServer().broadcastMessage("here");
                authors.add(author);
            }
        }
    }
    return authors;
} 
```

当我尝试运行代码时出现`java.lang.NullPointerException`错误，但我不知道为什么。

> 09.04 17:05:24 [服务器] com.dcsoft.arenagames.map.XMLHandler.getMapData(XMLHandler.java:42) 严重
> 09.04 17:05:24 [服务器] com.dcsoft.arenagames.map.XMLHandler 严重。 getAuthors(XMLHandler.java:73)
> 09.04 17:05:24 [服务器] 严重的 java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:30:32.507

问题是您的代码正在`<author>`使用 索引节点列表`i`，它计算`<authors>`标签的所有子节点，其中一些不是`<author>`元素。`item(i)`返回时，当`null`您尝试调用时，您会得到一个 NPE `getTextContent()`。您也不需要进行所有导航（这看起来有点可疑，而且肯定会令人困惑）。试试这个：

```
public static List<String> getAuthors(Document doc) throws Exception {
    List<String> authors = new ArrayList<String>();
    NodeList authorNodes = doc.getElementsByTagName("author");
    for (int i = 0; i < authorNodes.getLength(); i++) {
        String author = authorNodes.item(i).getTextContent();
        Bukkit.getServer().broadcastMessage("here");
        authors.add(author);
    }
    return authors;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:31:31.087

要查找 java.lang.NullPointerException 的原因，请在发生异常的行（在本例中为 73）上放置一个断点，并调查该行上的变量。

我的猜测是在你的代码行中：

```
String author = e.getElementsByTagName("author").item(i).getTextContent() 
```

变量`e`是`author`元素，因此为什么`e.getElementsByTagName("author")`返回 a `null`。

# android - sqlite 时间戳

> ID：15907186
> 
> 赞同：2
> 
> 时间：2013-04-09T16:16:27.113
> 
> 标签：android, sqlite, android-sqlite

我使用以下 sql 语句创建了一个数据库

```
private static final String DATABASE_CREATE = "create table "+ TABLE_USERLOCATION + "("
+ COLUMN_ID+" integer primary key autoincrement, "
+ COLUMN_LONGITUDE +" real not null, "
+ COLUMN_LATITUDE+" real not null, "
+ COLUMN_TIME + " timestamp not null default current_timestamp);"; 
```

当我尝试通过

```
cursor.getColumnIndex(GPSSqliteHelper.COLUMN_TIME) 
```

我得到-1（显然是一个错误）

但是当我 cd 进入模拟器中的数据库目录并查看所有条目时，我看到已添加时间戳：

1|2.71828|3.14159166666667|2013-04-09 00:05:50

2|2.71828|3.14159166666667|2013-04-09 00:35:09

如何访问日期以及为什么 getColumnCount() 返回 3 而不是 4？

我完成了[本](http://androidcookbook.com/Recipe.seam?recipeId=413)教程（我的表创建语句与那里介绍的基本相似）。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T08:02:12.407

当然为时已晚，但万一有人来这里遇到同样的问题......

COLUMN_TIME 没有在 allColumns 中声明，它应该是：

`private String[] allColumns = {GPSSqliteHelper.COLUMN_ID, GPSSqliteHelper.COLUMN_LONGITUDE, GPSSqliteHelper.COLUMN_LATITUDE, GPSSqliteHelper.COLUMN_TIME}`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-09T16:48:31.020

sqlite 不使用时间戳类型。您应该将日期创建为文本。看[这里](http://www.sqlite.org/datatype3.html)

这就是我所做的，然后您可以在代码中随意操作日期字符串。

# c++ - 如何使用 Boost C++ 遍历递归变体向量

> ID：15907187
> 
> 赞同：1
> 
> 时间：2013-04-09T16:16:29.023
> 
> 标签：c++, search, boost, tree

我想构建一个构造如下的向量树

```
struct myStruct {
    int a;
    string b;
};

typedef boost::make_recursive_variant<
      myStruct *
    , std::vector< boost::recursive_variant_ >
    >::type myStruct_tree; 
```

如果我附加多个向量，以及这些向量中的向量，我将如何使用某种位置向量遍历树

```
vector<int> 
```

它定位向量指针树中定义的每个向量/子向量中的对象位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:59:35.160

我不是 100% 确定我理解你的问题，所以如果我有什么问题，请澄清。我假设向量是一条路径，每个元素都给出要移动到的元素的索引。考虑到这一点，我会尝试这样的事情：

```
myStruct_tree t = ...;

myStruct_tree* tit = &t;
for(iterator pit=path.begin(); pit!=path.end(); ++pit)
{
    // retrieve branches at current position
    vector<myStruct_tree>& vec = get<2>(*tit);

    // get next position in tree, will throw on bad index
    tit = &vec.at(*pit);
}
assert(tit);

// retrieve the leaf at the final position
myStruct* res = get<1>(*tit); 
```

笔记：

*   对我来说，使用无符号整数作为索引会更自然一些。
*   vector::at() 在超出范围时抛出异常。
*   我还没有查找如何获取变体元素的确切语法。对于我上面使用的版本`get<1>(*tit);`，我的意思是检索第一个元素的版本（即 myStruct 指针）。此外，它应该是返回引用或抛出以处理错误的那个。
*   考虑用您自己的代码替换范围检查，以提供更好的诊断。我这样做不是为了保持算法的结构清晰。

# javascript - Javascript“动态”表单将字符串连接到表单操作

> ID：15907188
> 
> 赞同：2
> 
> 时间：2013-04-09T16:16:32.877
> 
> 标签：javascript

我有以下脚本构建这样的表单：

```
var sHTML = "";
sHTML += "<form id='formScore' method='post' action='q_process3.aspx’&gt;";
sHTML += " ";
sHTML += "<input type='hidden' id='Title' name='Title' value= " + title + ">";
sHTML += "<input type='hidden' id='Result' name='Result' value= " + resultstatus + ">";
sHTML += "<input type='hidden' id='ScorePctg' name='ScorePctg' value= " + scorepctg + ">";
sHTML += "<input type='hidden' id='ScorePoints' name='ScorePoints' value= " + scorepoints + ">";
sHTML += "<input type='hidden' id='PassingPctg' name='PassingPctg' value= " + passingpctg + ">";
sHTML += "<input type='hidden' id='PassingPoints' name='PassingPoints' value= " + passingpoints + ">";
sHTML += "<br><input type='submit'><br>";
sHTML += "<form>";

document.getElementById("divEmail").innerHTML = sHTML;
document.getElementById("formScore").submit(); 
```

然而，当这个提交时，它指向的动作/url是：
q_process3.aspx'%3E%20%3Cinput%20type=
所以看起来它立即将第一个输入标签连接到表单元素的动作属性上细绳。我究竟做错了什么？还是俯瞰？我知道这很简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:24:09.527

在您的代码拼写错误中

```
sHTML += "<form id='formScore' method='post' action='q_process3.aspx’&gt;";
                                                    ^               ^
sHTML += "<form>"; // ought to be </form> 
```

是否有理由立即提交表格？

```
document.getElementById("formScore").submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:28:10.533

如果我获取您的代码并在 jsFiddle 中运行它，我会得到一个冗长的、损坏的表单操作。

如果我用普通的旧刻度引号替换您操作的结束智能引号（我不确定正确的命名），则表单操作设置正确。

将您的表单标签字符串更改为：

```
sHTML += "<form id='formScore' method='post' action='q_process3.aspx'>"; 
```

那应该这样做。

# php - 存储敏感数据的最佳方法php加密

> ID：15907190
> 
> 赞同：-4
> 
> 时间：2013-04-09T16:16:35.083
> 
> 标签：php, crypt, sensitive-data

您好，显然这不是代码问题，我非常熟悉 php 中的 salt 和 md5 加密。但我需要一种安全的方式将敏感信息存储在 mysql 中。使用 md5 非常简单，但又不是最安全的方法。请问有什么建议或例子吗？它需要存储在db中，当然也有可能被检索和读取。最简单的方法就是我要找的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:24:42.060

```
public static function encrypt($string, $salt = NULL){

     $mcrypt_iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
     $mcrypt_iv = mcrypt_create_iv($mcrypt_iv_size, MCRYPT_RAND);

     $mcrypted = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $salt, $string, MCRYPT_MODE_ECB, $mcrypt_iv);

     $encoded = base64_encode($mcrypted);

     return $encoded;
}

public static function decrypt($hash, $salt = NULL){

    $mcrypt_iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
    $mcrypt_iv = mcrypt_create_iv($mcrypt_iv_size, MCRYPT_RAND);

    $basedecoded = base64_decode($hash);

    $mcrypted = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $salt, $basedecoded, MCRYPT_MODE_ECB, $mcrypt_iv);

    return $mcrypted;
} 
```

以下代码是一个工作示例，并使用 AES-128 模式 ECB。如果您对所使用的加密术语不友好，那也不是什么大问题。只需使用代码。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:38:56.383

如果您将某些内容存储在加密的数据库中，那么您不想解密它。如果你想读回它，为什么要首先加密它呢？

对于加密，确保与未来代码的前向兼容性并使其更安全的最佳方法是使用 crypt()。

[php.net/crypt](http://php.net/crypt)

您可以将多种选项传递给 crypt()，如果您要存储密码，我可能会使用 sha512，其数量足够多，可用于“回合”。查看： [http](http://php.net/crypt#example-4701) ://php.net/crypt#example-4701示例。

本质上，您从数据库中获取散列值，您可以将其用作纯文本的盐，以验证纯文本是否与存储在数据库中的密码相同 - 这是一种加密方式，没有解密（但是，无论如何； )

# jquery - jQuery替换（）不起作用

> ID：15907195
> 
> 赞同：0
> 
> 时间：2013-04-09T16:16:50.087
> 
> 标签：jquery, sqlite, web-sql

我想删除包含用户输入的查询字符串中的单引号字符。因此，我将单引号替换为双引号，例如：

从：`select * from user where name = "Jon'h"` 更改为：`Select * from user where name = "Jon''h"` 在 jquery 中，我曾经`replace("'","''")`这样做，但它不能替换多个单引号字符。例如，`Jon'h`是更改为`Jon''h`成功，但`His's boy's`将更改为`His''s boy's`。后面的单引号不会被替换。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:17:38.813

使用正则表达式和`g`标志：

```
var sql = sql.replace(/'/g,"''") 
```

# javascript - 使用jQuery在URL末尾添加变量

> ID：15907197
> 
> 赞同：1
> 
> 时间：2013-04-09T16:16:58.233
> 
> 标签：javascript, jquery, html, url, variables

到目前为止我已经完成了

jQuery：

```
function addURL(element)
{
var baseZipCode = 48180;
$(element).attr('href', function() {
    return this.href + baseZipCode;
});
} 
```

html:

```
<a onclick="addURL(this)" href="http://www.weather.com/weather/today/" target="_blank">Click this</a> 
```

我的问题是当用户单击链接并且新窗口打开时一切正常，但是当用户再次单击链接而不刷新时，变量被添加到链接中两次。

例如：

第一次： [http ://www.weather.com/weather/today/48180](http://www.weather.com/weather/today/48180)

第二次： [http ://www.weather.com/weather/today/4818048180](http://www.weather.com/weather/today/4818048180)

在您刷新页面之前它不会正确运行，我们将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:24:25.283

将您的`addURL`功能替换为

```
function addURL(element)
{
    var baseZipCode = '48180';
    if (element.href.slice(-baseZipCode.length) !== baseZipCode){
        element.href += baseZipCode;
    }
} 
```

没有涉及 jQuery..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:26:30.533

你可以试试[`jQuery.fn.one`](http://api.jquery.com/one/)

Javascript：

```
 jQuery("a").one("click", function(){ // Set a handler that execute once
        var baseZipCode = 48180;
        this.href += baseZipCode; //same as "this.href = this.href + baseZipCode"
    }); 
```

HTML：

```
<a href="http://www.weather.com/weather/today/" target="_blank">Click this</a> 
```

也许您需要向 <a> 标签添加一些类以将其与其他标签区分开来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:19:08.100

这应该是：

```
function addURL(element)
{
    var baseZipCode = 48180;
    element.href = (element.href + baseZipCode)
        .replace(baseZipCode + baseZipCode, baseZipCode);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:19:47.400

```
return this.href.indexOf(baseZipCode) != -1 ? this.href : this.href + baseZipCode; 
```

# c# - ASP.NET C# 目标空白在 LinkBut ton 上不起作用

> ID：15907198
> 
> 赞同：4
> 
> 时间：2013-04-09T16:17:00.467
> 
> 标签：c#, asp.net, linkbutton

我这里有这个链接按钮...

```
<asp:LinkButton ID="linkButton" CssClass="Button" runat="server" target="_blank">Button Text</asp:LinkButton> 
```

但是目标空白不起作用，它不会在新选项卡中打开页面，而是在同一选项卡中打开它。

我究竟做错了什么？

有一个href，它像这样在后面的代码中分配

```
 linkButton.PostBackUrl = "http://www.nfl.com"; 
```

但目标空白仍然不起作用....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:47:21.523

你可以试试这个。希望能帮助到你：

```
<asp:LinkButton ID="linkButton" OnClientClick="window.document.forms[0].target='_blank';" runat="server">Button Text</asp:LinkButton>

linkButton.PostBackUrl = "http://www.nfl.com"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T09:14:26.987

下面的代码工作正常：

`OnClientClick="window.document.forms[0].target='_blank';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T10:58:15.403

在 ASP.NET Web 表单中，按钮、链接按钮、图像按钮或类似控件实际上只是提交底层表单。为了在新窗口中打开它，您可以使用 JavaScript 修改“表单”的目标属性。我们还需要在单击后撤消修改，否则进一步的按钮单击将无意中以新选项卡为目标，我们可以使用 setTimeout 并再次空白目标来做到这一点。

```
<asp:LinkButton ID="uiNewTabExample" Text="PDF" OnClick="uiNewTabExample_Click" OnClientClick="window.document.forms[0].target = '_blank'; setTimeout(function () { window.document.forms[0].target = '' }, 0);" 
runat="server" /> 
```

# cxf - 使用Axis2 RPC方式的请求服务器，xml包中的参数顺序不正确

> ID：15907199
> 
> 赞同：0
> 
> 时间：2013-04-09T16:17:03.960
> 
> 标签：cxf, axis2, adb, webservice-client

例如，我将向服务器端发送一个对象 Fruits。

像这样的代码：

```
public static <T> T call(String url, String ns, String method, Fruits fruits, Class<T> clz) throws AxisFault
{
  RPCServiceClient client = new RPCServiceClient();
  Options option = client.getOptions();
  EndpointReference erf = new EndpointReference(url);
  option.setTo(erf);
  QName name = new QName(ns, method);
  Object[] object = new Object[]{fruits};
  Class[] returnTypes = new Class[]{clz};
  Object[] reto = client.invokeBlocking(name, object, returnTypes);
  T t = (T)reto[0];
  return t;
} 
```

像这样的对象：

```
public class Fruits implements Serializable
{
  private int pear;
  private int banana;
  private int apple;

  public int setPear(int pear){this.pear=pear;}
  public int getPear(){return this.pear;}
  ...
} 
```

xml 部分应该是这样的：

```
...
<fruits>
  <pear>10</pear>
  <banana>20</banana>
  <apple>60</apple>
</fruits>
... 
```

但实际上是这样的：

```
...
<fruits>
  <apple>60</apple>
  <banana>20</banana>
  <pear>10</pear>
</fruits>
... 
```

Axis2 使对象的属性按字母顺序排列，但服务器不接受。我无法修改服务器端，它是 ESB。

做成功请求的唯一方法是使用Axis2生成的代码，我以前使用WSDL2Java，但是冗余代码太多，难以维护。所以我想要重构。

我也尝试过使用 CXF，但它也使对象的属性按字母顺序排列，不遵循 WSDL/XSD 或 DTO 定义的样式。

我找到了 CXF 进行排序的原因，它使用 java.beans.BeanInfo 来获取对象的属性，例如：

```
...
BeanInfo beanInfo = Introspector.getBeanInfo(Fruits.class);
PropertyDescriptor[] propertyDescriptors = beanInfo.getPropertyDescriptors();
... 
```

数组中的属性已经按字母顺序排列。

谁知道如何让 Axis2 将 Fruits 的属性序列化为正确的排序。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:58:50.973

在 Axis2 上不确定，但如果您将 CXF 与 JAXB 数据绑定一起使用，则可以添加如下注释：

```
@XmlType(name = "fruits", propOrder = { "apple", "banana", "pear" }}) 
```

到 Fruits 类告诉 JAXB 您需要/希望它们输出什么顺序。

# python - 如何在 Python 中向 csv 文件添加标题？

> ID：15907200
> 
> 赞同：12
> 
> 时间：2013-04-09T16:17:05.840
> 
> 标签：python, csv

我尝试了许多解决方案来向我的 csv 文件添加标题，但没有任何工作正常。他们来了 ：

1.  我使用了 writerow 方法，但我的数据覆盖了第一行。

2.  我使用了 DictWriter 方法，但我不知道如何正确填充它。这是我的代码：

    ```
    csv = csv.DictWriter(open(directory +'/csv.csv', 'wt'), fieldnames = ["stuff1", "stuff2", "stuff3"], delimiter = ';')
    csv.writeheader(["stuff1", "stuff2", "stuff3"]) 
    ```

我收到“2 个参数而不是一个”错误，我真的不知道为什么。

有什么建议吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T16:18:52.240

您需要做的就是[`DictWriter.writeheader()`](http://docs.python.org/2/library/csv.html#csv.DictWriter.writeheader)不带参数调用：

```
with open(os.path.join(directory, 'csv.csv'), 'wb') as csvfile:
    writer = csv.DictWriter(csvfile, fieldnames = ["stuff1", "stuff2", "stuff3"], delimiter = ';')
    writer.writeheader() 
```

你*已经*告诉过`DictWriter()`你的标题是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-01T14:35:58.403

我在编写 CSV 文件时遇到了类似的问题。我必须阅读 csv 文件并修改其中的一些字段。要在 CSV 文件中写入标题，我使用了以下代码：

```
reader = csv.DictReader(open(infile))
headers = reader.fieldnames

with open('ChartData.csv', 'wb') as outcsv:
    writer1 = csv.writer(outcsv)
    writer1.writerow(headers) 
```

当您写入数据行时，您可以通过以下方式使用 DictWriter

```
writer = csv.DictWriter(open("ChartData.csv", 'a' ), headers) 
```

在上面的代码中，**“a”**代表**附加**。

总之->在将标头写入同一文件后，使用**a**将数据**附加到 csv**

# alfresco - 如何更改 Alfresco 合并任务表中的值？

> ID：15907201
> 
> 赞同：0
> 
> 时间：2013-04-09T16:17:08.413
> 
> 标签：alfresco

我想更改在“池化任务”列之一中显示的数据。目前尚不清楚这些数据来自哪里。例如，在我的 pooled-tasks-todo-dashlet.jsp 文件中，它有以下部分：

```
<%-- Status column --%>
<a:column id="col6" style="padding:2px;text-align:left">
<f:facet name="header">
<a:sortLink id="col6-sort" label="#{msg.status}" value="bpm:status" styleClass="header"/>
</f:facet>
<h:outputText id="col6-txt" value="#{r['bpm:status']}" />
</a:column> 
```

状态值“#{r['bpm:status']}”存储在哪里？如何添加尚未定义的新值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:37:01.273

[对象 #{r} 是在 Alfresco JSF 组件a:richList](http://wiki.alfresco.com/wiki/RichList)上迭代的当前节点对象 。该组件的值由 JSF Bean 设置，因此，如果您想向 #{r} 添加一个新属性，我认为更好的方法是将其添加到填充 Richlist 的 Java bean 中。

如果您只对修改属性 jbpm:status 的值感兴趣，我猜它是特定于 bpm 引擎的（它可以是 jbpm 或活动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:03:02.983

我已经在我的一个项目中做到了。如果您在富豪列表标签中观察 jsp 页面，您会发现这个

value="#{WorkflowBean.pooledTasks} 填充富人列表的bean是workflowBean，它指向这个类org.alfresco.web.bean.workflow.WorkflowBean，当dashlet打开时调用这个API List getPooledTasks()

它填充 pooledTask 列表，然后就像 for 循环一样，我们一个一个地迭代节点， r 指向当前工作流节点。

# java - 休息服务抛出异常：最好的处理方式

> ID：15907202
> 
> 赞同：4
> 
> 时间：2013-04-09T16:17:18.417
> 
> 标签：java, rest, jakarta-ee, jersey

我有一个会引发异常的休息服务，我想知道处理这个问题的最佳方法是什么。

所以我有一个休息服务，它可以抛出一个用户定义的异常，我在 catch 块中捕获它并再次抛出那个异常！并使用休息框架来捕捉它。对于非用户定义的异常也是如此。我认为这会很好，因为我有许多休息服务，并且所有用户定义的异常代码处理都将在同一个地方。

我想知道这是在休息服务中处理异常的正确方法吗？

我正在使用运动衫。

```
//休息服务
@邮政
公共无效doSomething（）{

尝试 {
// ... 一些可以抛出用户定义异常和运行时异常的代码
} 捕捉（用户定义异常 e）{
抛出新的 UserDefinedException(e)；
} 捕捉（异常 e）{
抛出新的 ServiceException(e)；
}

// 现在我有一个@Provider 来捕获这个抛出的异常

@Provider
公共类 UserDefinedExceptionHandler 实现
        异常映射器 {

    公共响应到响应（UserDefinedException 异常）{
        客户端响应客户端响应 = 新客户端响应（）；
        ResponseStatus 状态 = 新的 ResponseStatus();

        clientResponse = handleUserDefinedException（异常，状态，clientResponse）；

        返回 Response.ok(clientResponse).build();
    }

// 同样对于 ServiceException

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:42:45.993

只是在服务器上引发错误 500 并没有提供有关错误的太多详细信息，一种优雅地处理错误的方法是将响应数据包装在具有状态和数据的结构中，如果状态为错误，则显示正确的消息。

像这样的 json 格式：

```
{
    "status": "error",
    "data": {
        "message": "detailed error message"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:35:57.827

在 REST 服务中处理异常与在任何其他代码段中处理异常没有太大区别。

唯一的“约定”是如果异常是由客户端发送不正确的数据触发的，则返回 HTTP 400，当您的服务意外失败时返回 500。

# multithreading - boost::线程执行

> ID：15907204
> 
> 赞同：1
> 
> 时间：2013-04-09T16:17:32.777
> 
> 标签：multithreading, boost, mutex, halt

我有一个`ChunkManager`有几个（应该是）异步方法的类。这些方法在我的游戏引擎中处理任务，例如在不同的线程上加载地图块（类似于 Minecraft），以免完全停止主线程（它们是冗长的操作）这是其中一种方法：

```
void ChunkManager::asyncRenderChunks(){

    boost::thread loadingThread(&ChunkManager::renderChunks,this);
} 
```

renderChunks 看起来像：

```
void ChunkManager::renderChunks(){
activeChunksMutex->lock();
      for(int z=0; z < CHUNK_MAX; z=z+1)
      {
        for(int y=0; y < CHUNK_MAX; y=y+1)
        {
            for(int x=0; x < CHUNK_MAX; x=x+1)
            {

            activeChunks[x][y][z]->Render(scnMgr);

            }
        }
    }
    activeChunksMutex->unlock();
} 
```

这应该有效，对吧？但是，当它运行时它会崩溃。我有一种感觉，这与我在创建线程后对线程所做的事情有关，因为如果我把

> 加载线程.join();

在上述方法中，它工作正常，但主线程被暂停，因为显然它只是在等待新线程完成，有效地将我带回第一方。有什么建议吗？抱歉，如果这是一个迟钝的问题，我对线程的概念不熟悉。谢谢。

更新（2013 年 4 月 9 日）：我找到了这个宝石：[http](http://threadpool.sourceforge.net/) ://threadpool.sourceforge.net/ ..并 解决了我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:22:16.130

如果你可以加入线程，它必须是可加入的。

[正如文档中](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.destructor2)所说：

> 当`boost::thread`代表执行线程的对象被销毁时，如果线程是可连接的，程序就会**终止**。

您创建了一个本地`thread`对象并*立即*让它超出范围：它在`ChunkManager::asyncRenderChunks`返回时被销毁。

任何一个：

*   使其成为分离的（不可连接的）线程

    ```
    void ChunkManager::asyncRenderChunks() {
        boost::thread loadingThread(&ChunkManager::renderChunks,this);
        loadingThread.detach();
    } 
    ```

*   或在其他地方创建`thread`对象并使其保持活动状态

    ```
    class ChunkManager {
        boost::thread renderingThread;
        bool renderChunkWork;       // work to do flag
        Chunk activeChunks[CHUNK_MAX][CHUNK_MAX][CHUNK_MAX];
        boost::mutex activeChunksMutex;
        boost::condition_variable activeChunksCV;

        bool shutdown;              // shutdown flag

        void renderChunks() {
            for(int z=0; z < CHUNK_MAX; ++z)
                for(int y=0; y < CHUNK_MAX; ++y)
                    for(int x=0; x < CHUNK_MAX; ++x)
                        activeChunks[x][y][z]->Render(scnMgr);
        }

        void renderChunkThread() {
            boost::unique_lock<boost::mutex> guard(activeChunksMutex);
            while (true) {
                while (!(renderChunkWork || shutdown))
                    activeChunksCV.wait(guard);

                if (shutdown)
                    break;
                renderChunks();
                doRenderChunks = false;
            }
        }

    public:
        ChunkManager()
            : loadingThread(&ChunkManager::renderChunkThread, this),
            renderChunkWork(false), shutdown(false)
        {}

        ~ChunkManager() {
            { // tell the rendering thread to quit
                boost::unique_lock<boost::mutex> guard(activeChunksMutex);
                renderChunkShutdown = true;
                activeChunksCV.notify_one();
            }
            renderingThread.join()
        }

        void asyncRenderChunks() {
            boost::unique_lock<boost::mutex> guard(activeChunksMutex);
            if (!renderChunkWork) {
                renderChunkWork = true;
                activeChunksCV.notify_one();
            }
        }
    }; 
    ```

注意。一般来说，动态创建线程不如预先创建线程好，然后在有事可做时唤醒它们。它避免在最后一个调用完成之前弄清楚如何处理第二个调用`asyncRenderChunks`（启动第二个线程？块？），并移动与线程创建相关的延迟。

* * *

## 关于对象生命周期的注意事项

在这段代码中意识到这一点很重要：

```
void ChunkManager::asyncRenderChunks() {
    SomeType myObject;
} 
```

该实例`myObject`将被创建*然后立即销毁*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:40:46.237

它崩溃了，因为在当前版本中`Boost.Thread`，您必须加入（）一个线程或`detach()`它 - 否则`~thread` [会终止程序](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.destructor2)。`~thread`（在用于自动调用的早期版本中`detach()`。）

因此，如果您不想加入线程 - 只需将其分离：

```
boost::thread loadingThread(&ChunkManager::renderChunks,this);
loadingThread.detach(); 
```

# c++ - NetBeans C++ - 检查代码中调试编译的方法？

> ID：15907208
> 
> 赞同：1
> 
> 时间：2013-04-09T16:17:40.197
> 
> 标签：c++, debugging, netbeans

我希望能够在运行 NetBeans（和 GCC）的 C++ 代码中放入一些宏命令，例如。

```
#ifdef DEBUG
std::cout << "DistributionSuper constructor called" << std::endl;
#endif 
```

有谁知道是否有办法在 NetBeans 中使用调试编译标志而不必在 gcc 命令行上定义 -DDEBUG ？检查 g++ 编译行并没有指向我可以使用特定于调试的任何定义，但我希望 NetBeans 可能有一个编译变量可以在某处执行此操作。NetBeans 确实有一些像 ${CND_CONF} 这样的脚本变量可能会有所帮助，但我真的看不到在 C++ 代码中获得这些的方法。谢谢大家皮特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T02:12:52.473

在四处寻找之后，找不到任何可以让您使用 NetBeans 编译检查代码中的调试状态的东西。解决问题的最简单方法似乎是在项目选项中做一个明确的 -DDEBUG ，然后使用：

```
#ifdef DEBUG
    #warning In debug mode
    std::cout << "I was compiled with a DEBUG define in the g++ command line
#endif 
```

# php - 多余的 JSON 响应

> ID：15907213
> 
> 赞同：1
> 
> 时间：2013-04-09T16:17:52.307
> 
> 标签：php, mysql, json

我的 JSON 响应中似乎有多余的键。知道为什么吗？

以下是 JSON 响应的摘录：

```
{
      "0": "1",
      "id": "1",
      "1": "XX University",
      "name": "XX University",
      "2": "http:\/\/ree.com\/images\/xxUniversity.png",
      "backgroundImageUrl": "http:\/\/ree.com\/images\/XXUniversityLogo.png",
      "3": "http:\/\/ree.com\/images\/xxUniversity.png",
      "logoImageUrl": "http:\/\/ree.com\/images\/XXUniversityLogo.png"
    }, 
```

这是我的PHP代码：

```
$query = "SELECT * from $entity"; //Bad security,for a different question
    $results = mysqli_query($con,$query);

    //Parse to JSON
    $json=array();

    while($row=mysqli_fetch_array($results)){
        $json[]=$row;
    }

    //Close connection
    mysqli_close($con);

    //Encode and send response as JSON (using the entity type as a parameter)
    //echo json_encode(array($entity => $json), JSON_FORCE_OBJECT);

    echo json_encode(array ($entity =>$json)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:19:43.713

你的问题是`mysqli_fetch_array`。您想`MYSQLI_ASSOC`作为第二个参数传递。

```
while($row=mysqli_fetch_array($results,MYSQLI_ASSOC)){
    $json[]=$row;
} 
```

[从文档：](http://php.net/manual/en/mysqli-result.fetch-array.php)

> 此可选参数是一个常量，指示应从当前行数据生成哪种类型的数组。此参数的可能值是常量**MYSQLI_ASSOC**、**MYSQLI_NUM**或**MYSQLI_BOTH**。
> 
> 通过使用**MYSQLI_ASSOC**常量，该函数的行为与 mysqli_fetch_assoc() 相同，而**MYSQLI_NUM**的行为与 mysqli_fetch_row() 函数相同。最后一个选项**MYSQLI_BOTH**将创建一个具有两者属性的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:20:08.213

[mysqli_fetch_array](http://php.net/manual/en/mysqli-result.fetch-array.php)默认检索数字和命名索引。

您必须指定其他参数才能仅获取所需的参数。

*   MYSQLI_ASSOC 检索命名数组，
*   MYSQLI_NUM 只检索索引的整数
*   MYSQLI_BOTH 两者都检索:)

# java - Android视图/片段问题

> ID：15907215
> 
> 赞同：1
> 
> 时间：2013-04-09T16:17:58.830
> 
> 标签：java, android, fragment

因此，当我按下特定按钮时，我试图在其中加载不同的内容，`ListView`但它只加载我尝试加载的第一个（并且只有在我按下它两次之后）。我找不到我做错了什么。

这是在我显示内容的女巫中创建视图的代码：

```
public class ContentQuery extends Fragment {
    private List<String> contents_list = new ArrayList<String>();
    public static final String TAG = contentQuery.class.getSimpleName();
    private String uri = "";

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View lv = inflater.inflate(R.layout.contents_list, container, false);
        super.onActivityCreated(savedInstanceState);
        getContent(); // Sets contents_list
        ((ListView) lv).setAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, contents_list));
        return lv;
    }
} 
```

我认为这可能是因为我应该以某种方式摧毁它，但我对 android dev 还是很陌生。

```
tag = ContentQuery.TAG;
ContentQuery contentqueryfragment = null;
final Fragment foundFragment = fm.findFragmentByTag(tag);
if (foundFragment != null && uri != old_uri) {
    fragment = foundFragment;
    contentqueryfragment = (ContentQuery) fragment;
    old_uri = uri;          
} else {
    contentqueryfragment = new ContentQuery();
    contentqueryfragment.setUri(uri.toString());
    fragment = contentqueryfragment;
} 
```

之后：

```
if (fragment.isAdded())
{
    tr.show(fragment);
} else
{
    tr.remove(fragment);
    tr.add(R.id.content, fragment, tag);
    tr.show(fragment);

}
tr.commit();

currentUri = uri;
currentContentFragmentTag = tag; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:55:47.627

如果您需要更新 List 中的内容，一个好的方法是将 List、ListAdapter 和 ListView 分开。当需要更新数据时，更新列表的内容，并通知Adapter列表内容发生了变化。

例如。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, contents_list);
((ListView) lv).setAdapter(adapter);

...

button.onClickListener(...) {
   contents_list.clear();

   ... populate list with new data ...

   adapter.notifyDataSetChanged();
} 
```

# c# - ASP.NET 更改模板字段中 Gridview 单元格中的文本和颜色

> ID：15907217
> 
> 赞同：4
> 
> 时间：2013-04-09T16:18:02.793
> 
> 标签：c#, asp.net, gridview

我在 ASP.net 中有显示数据的 Gridview。根据数据，它会根据单元格的值更改颜色和文本。当列不是模板字段时，这可以正常工作。

```
 //WORKS WHEN IS NOT A TEMPLATE FIELD
 if (e.Row.RowType == DataControlRowType.DataRow)
 {
        if (e.Row.Cells[2].Text == "1")
        {

           e.Row.Cells[2].Text = "IN";
           e.Row.Cells[2].BackColor = Color.Blue;
           e.Row.Cells[2].ForeColor = Color.White;
        }

  } 
```

现在我将 Column 转换为 Template 字段，但没有任何效果。

```
 //DOEST NOT WORK WHEN IS a TEMPLATE FIELD
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
         if (e.Row.Cells[2].Text == "1")
         {

             e.Row.Cells[2].Text = "IN";
             e.Row.Cells[2].BackColor = Color.Blue;
             e.Row.Cells[2].ForeColor = Color.White;
         }

     } 
```

我得到了颜色，但现在我需要将文本更改为以下内容。如果 statusID == 1 则显示 IN，否则如果 statusID == 2 则显示 OUT

```
<asp:TemplateField HeaderText="StatusID" SortExpression="StatusID">
                            <EditItemTemplate>
                                <asp:DropDownList ID="DropDownList1" runat="server" SelectedValue = '<%# Bind("StatusID") %>'>
                                    <asp:ListItem Value="1">IN</asp:ListItem>
                                    <asp:ListItem Value="2">OUT</asp:ListItem>
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblStatus" runat="server" Text='<%# Bind("StatusID") %>' ForeColor='<%# Convert.ToString(Eval("StatusID")) == "1" ? System.Drawing.Color.Green: Convert.ToString(Eval("StatusID")) == "2" ? System.Drawing.Color.Red: System.Drawing.Color.Purple%>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField> 
```

你们中的任何人都知道如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T16:53:29.087

在模板列中不起作用的原因是状态值为空。试试下面的。

```
// In template column,
if (e.Row.RowType == DataControlRowType.DataRow)
{
   var status = (Label)e.Row.FindControl("lblStatus");
   if (status.Text == "1")
   {
      e.Row.Cells[2].Text = "IN";
      e.Row.Cells[2].BackColor = Color.Blue;
      e.Row.Cells[2].ForeColor = Color.White;
   }
} 
```

或者将 DataItem 转换为适当的对象并获取状态值。

[GridViewRow.DataItem 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)

```
// In template column,
if (e.Row.RowType == DataControlRowType.DataRow)
{
   var obj = (MyObject)e.Row.DataItem;
   if (obj.Status == 1)
   {
      e.Row.Cells[2].Text = "IN";
      e.Row.Cells[2].BackColor = Color.Blue;
      e.Row.Cells[2].ForeColor = Color.White;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:59:38.273

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
  Label lbl=(Label)e.Row.FindControl("lblStatus");
   if (lbl.Text == "1")
   {
      lbl.Text = "IN";
      e.Row.Cells[2].BackColor = Color.Blue;
      e.Row.Cells[2].ForeColor = Color.White;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T16:02:12.820

我是一个 vb programmar 这里是一个示例代码。

```
If e.Row.RowType = DataControlRowType.DataRow Then
                Dim abc As Label = TryCast(e.Row.FindControl("label1"), Label)

            If abc.Text = "ADMIN" Then
                e.Row.Cells(7).ForeColor = Drawing.Color.Blue

            End If
        End If 
```

我真的希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-26T21:05:32.087

使用`ItemTemplate`和包围`Eval`您需要的任何 HTML，例如更改颜色。

```
Text='<%# "Your HTML(use FONT COLOR=BLUE)" + Eval("HealthUnit") + "Close your HTML here" %> 
```

如，这里：

```
<asp:TemplateField HeaderText="Health Unit Website">
    <ItemTemplate>
        <asp:HyperLink runat="server" 
                       NavigateUrl='<%# Eval("Website") %>' 
                       tabindex="-1" 
                       Target="_blank" 
                       Text='<%# "<font color=blue><b>" +
                                  Eval("HealthUnit") + 
                                  "</b></font>" %>'>
        </asp:HyperLink>
    </ItemTemplate>
    <ItemStyle HorizontalAlign="Left" VerticalAlign="Top" width="14%"  />
</asp:TemplateField> 
```

# sticky - 按源进行的 HA-Proxy 平衡似乎不一致

> ID：15907219
> 
> 赞同：1
> 
> 时间：2013-04-09T16:18:11.167
> 
> 标签：sticky, haproxy

使用 HA-Proxy 1.4.18 我使用**balance source**作为将 tcp 流平衡到 2 个服务器的选项。然而，从一个公认的非常小的连接示例集来看，它们似乎都只是转到一个服务器 - haproxy 配置中首先列出的服务器。

*   听视频 *:1935
*   平衡源
*   模式 tcp
*   服务器 server1 192.168.0.1:1935
*   服务器 server2 192.168.0.2:1935

我还没有看到它把负载分到 2 个盒子上。当我使用平衡循环时，这确实有效，但是对于这个特定的应用程序，我不能使用这种方法。

对于客户端的这两台机器之间的其他持久会话负载平衡有什么想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:54:50.623

你是如何测试天平的？，医生说：

> 源 IP 地址经过哈希处理并除以正在运行的服务器的总权重，以指定哪个服务器将接收请求。这确保了只要没有服务器关闭或启动，相同的客户端 IP 地址将始终到达同一台服务器。如果由于运行服务器数量的变化而导致哈希结果发生变化，许多客户端将被定向到不同的服务器。该算法一般用于不能插入cookie的TCP模式。它还可以在 Internet 上用于为拒绝会话 cookie 的客户端提供最大努力的粘性。该算法默认是静态的，这意味着动态更改服务器的权重不会产生任何影响，但是可以使用“hash-type”进行更改

如果您仅使用 2 个不同的 IP 源进行测试，您可能会陷入特定情况。

# javascript - Tablesorter 仅过滤条目的第一个单词

> ID：15907220
> 
> 赞同：0
> 
> 时间：2013-04-09T16:18:13.333
> 
> 标签：javascript, tablesorter

我有一个使用 Matt Kruse 的表 javascript 排序器的旧 php 应用程序。几天来，我一直在处理我需要的改变，我想我需要停下来看看这是否可能。

在应用程序中使用他的[table.js](http://www.javascripttoolbox.com/lib/table/)，工作得很好，但是一个客户刚刚让我注意到过滤器只搜索第一个单词，而不是所有文本，例如，如果列中有 Air Plane，Def Jamm、Razor Edge 和 Jamm Drive - 当您在“Air”的顶部排序/过滤框中搜索/过滤时，Air Plane 行将过滤掉，但如果您在“Plane”上搜索，则不会返回任何内容。

有没有人遇到过这个？如果是这样，是否可以修复/调整？如果是这样，如何在 Jamm 上进行搜索并返回所有包含 Jamm 的行。

# java - 一种在 SQL 中存储 java 文件的方法？

> ID：15907222
> 
> 赞同：0
> 
> 时间：2013-04-09T16:18:16.147
> 
> 标签：java, sql, file, webpage

这可能是一个愚蠢的问题，但我有一个类的项目，我必须从连接到网页的 SQL 数据库中存储/检索文件。现在，我可以制作一个网页来存储图片或音乐文件，但我目前正在用 java 创建一些基本游戏。我知道有一些方法可以从网页访问这些文件，但就像我说的，该项目必须包含一个 SQL 数据库。

所以我的问题是，有没有办法从 SQL 数据库中存储和检索这些类型的文件？只要用户能够打开它们，能够下载文件就可以了，尽管我希望用户能够在浏览器中打开它们。

如果有人有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:22:36.880

存储到 SQL 数据库时，您并没有真正存储文件。您存储文件内容。在它最通用的形式中，您可以创建一个包含大二进制字段（blob 或 clob，具体取决于您使用的数据库）或大文本字段（varchar）的表，并将文件的内容放入其中。其他列可以存储文件名等。

要真正利用 SQL 数据库，您需要充分了解文件的内容，以便通过将其分解为更详细的部分来利用索引等。例如，如果您将保存文件放在那里，您可以制作一个包含用户名列的详细表格，以及需要保存的各种游戏特定状态。

# python - 使用 Python 从 excel 文件导入当前范围的单元格到 MySql

> ID：15907225
> 
> 赞同：0
> 
> 时间：2013-04-09T16:18:28.357
> 
> 标签：python, mysql, excel, import

我的项目涉及
1) 从 excel 文件导入数据

```
path="...\dataexample.xls"
databook=xlrd.open_workbook(path)
mydatasheet=databook.sheet_by_index(0) 
```

2）连接到本地主机数据库

```
database = MySQLdb.connect (host=myhost, user = myuser, passwd = mypasswd, db = dbname) 
```

3) 将当前单元格范围导入数据库 `My`。`dataexample.xls`有 12 行和 122 列，对于我的 INSERT QUERY，我只需要 A3:J12 单元格经过一些搜索后，我处于以下位置：

*   准备查询和

    `cursor = database.cursor() query = """INSERT INTO agiosathanasios(record,Stn_Code,Raw_Dist,Snow,Snow_corr,Smp,Raw_Dist_QC,Snow_final,Snow_final_pos) VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s)"""`

*   为查询收集正确的单元格

    ```
    for row in range(3,12):
    values=[]
    for col in range(0,10):
        values.append(mydatasheet.cell(row,col).value)
    print values 
    ```

我试图在 values.append 之后添加以下代码`database, cursor.execute(query,values)`，以便我可以导入我想要的值。

但是……它确实有效……

我怎样才能解决这个问题？如何将当前值放入我的查询中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:33:02.177

因此，根据回溯，您并未向查询提供所有参数，或者将值转换为字符串存在一些问题（值中没有）。在调用 cursor.execute 之前检查值！

尝试从 excel 转换为字符串值：

```
values.append(str(mydatasheet.cell(row,col).value)) 
```

# windows-8 - 构建服务器和 Windows 8 / RT 应用程序

> ID：15907229
> 
> 赞同：0
> 
> 时间：2013-04-09T16:18:45.287
> 
> 标签：windows-8, microsoft-metro, build-process, build-automation, windows-rt

我有一个 Windows 8 应用程序和一个带有 Jenkins 和/或 Finalbulder Contiua 的 Windows 2012 构建服务器。

不，我只能在 Windows 8 或更高版本上安装 Visual Studio for WinRT Apps。

所以这意味着，我的构建服务器必须是 Windows，对吧

有没有办法在非 Windows 8 操作系统上编译 Windows 8 应用程序？

其他操作系统是否有某种“build win 8 sdk”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:35:58.163

简短回答：不，您需要 Windows 8 或 Windows Server 2012。

针对 Jenkins 的提示：我尝试了很多方法，但在 Jenkins 作为服务运行时无法启动应用程序。从登录的用户帐户开始是我可以让它工作的唯一方法。

另外我想推荐我们的[Apprunner 项目](https://github.com/doo/metro-driver)，我们开发该项目是为了在 Jenkins 中安装、运行和卸载包。

最后，如果您正在开发基于 Javascript 的应用程序，您可以查看我们的 SQLite 组件中[与单元测试相关的代码](https://github.com/doo/SQLite3-WinRT/tree/master/SQLite3JS)，该组件使用 Jasmine 并输出与 JUnit/Jenkins 兼容的测试结果文件。

# prestashop - cart.php 查询速度慢，速度波动

> ID：15907230
> 
> 赞同：0
> 
> 时间：2013-04-09T16:18:46.110
> 
> 标签：prestashop

当我在我的网站上分析页面速度时，有时我会为 cart.php 加载相当长的时间。(400ms+) 我没有很多产品或类别。我知道有很多字段被加入/从数据库中提取，但我不知道为什么 cart.php 的加载速度如此可变。如果有人遇到过同样的问题或设法解决了，请告诉我。

我正在使用 Prestashop 1.4.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:39:56.657

原来我的主题安装了第二个购物车模块，这减慢了速度。禁用其中一个，速度要好得多。

# delphi - delphichromium 是用来做什么的？

> ID：15907235
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:18:57.867
> 
> 标签：delphi, browser, tchromium

这是一个互联网浏览器组件吗？这不仅仅是 TwebBrowser 的能力？我正在使用 TWebBrowser，所以如果我登录到一个网站然后我运行我的 Delphi webbrowser 到该站点，我也已经登录了，但是如果我登录到 Mozilla firefox 并运行我的 Delphi webBrowser(TwebBrowser) 它没有知道如果我从 mozilla 登录到网站，TwebBrowser 只集成在 Internet Explorer 中。

这个 Chromiumembedded 是否也可以集成到 mozilla 或 chrome 中？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:24:18.780

它以 Delphi 形式嵌入了 Google Chrome 浏览器控件。

TWebBrowser 是一个嵌入式 Internet Explorer 控件。它可能有权访问 Internet Explorer 设置中的 cookie 和其他数据，但无法访问任何其他浏览器的设置，包括 Firefox 和 Chrome。

嵌入式 Chrome 浏览器将无法访问用户的 Chrome 或 Firefox 设置。这些是完全独立的应用程序，*您的*应用程序不会因为使用嵌入式浏览器控件而获得任何与它们相关的特殊地位。如果您想访问其他应用程序的设置，您必须像其他人一样进行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:23:35.567

`TWebBrowser`使用 Internet Explorer 的渲染引擎，并共享它的一些设置（如 cookie）。

`TChromium`使用 Chromium 的渲染引擎（谷歌浏览器基于的开源部分），独立运行。它无法读取 Firefox 的 cookie，也无法读取 AFAIK、Chrome 的。

# c# - 如何编码日期日历？

> ID：15907242
> 
> 赞同：1
> 
> 时间：2013-04-09T16:19:13.877
> 
> 标签：c#, asp.net

如您所见，我有一个简单的表格，DOB 出生日期，字段，我想用日期选择器拥有它，最好的方法是什么？

```
tr>
            <td>
                    <dx:ASPxLabel ID="ASPxLabel8" runat="server" Text="DOB:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    &nbsp;</td>
            <td>
                    <dx:ASPxTextBox ID="tbDOB" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel9" runat="server" Text="Weight:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    <dx:ASPxTextBox ID="tbWeight" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel10" runat="server" Text="Height:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                    <dx:ASPxTextBox ID="tbHeight" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel11" runat="server" Text="BP:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                     <dx:ASPxTextBox ID="tbBP" runat="server" Width="100px"></dx:ASPxTextBox>
                </td>
            <td align="right">
                    <dx:ASPxLabel ID="ASPxLabel12" runat="server" Text="Pulse:" Width="50px"></dx:ASPxLabel>
                </td>
            <td align="left">
                     <dx:ASPxTextBox ID="tbPulse" runat="server" Width="100px" ></dx:ASPxTextBox>
                </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:42:23.997

非常简单的方法是使用**Jquery 的内置日期选择器**，如下所示：

```
<dx:ASPxTextBox ID="tbDOB" runat="server" Width="100px"></dx:ASPxTextBox> 
```

并在脚本标签中：

```
<script language="javascript" type="text/javascript">
$(document).ready(function(){
$("#tbDOB").datepicker();
});
</script> 
```

**演示：http:** [//jsfiddle.net/WzLc3/3/](http://jsfiddle.net/WzLc3/3/)

**还：**

**如果您的应用程序不能使用 Jquery**，则可以纯粹通过 asp.net 来完成，但使用 calander contorl 会稍微复杂一些。

这是一个很棒的教程，供初学者指导您完成这些步骤，

[http://www.dotnetfunda.com/articles/article746-how-to-create-a-date-picker-in-aspnet.aspx](http://www.dotnetfunda.com/articles/article746-how-to-create-a-date-picker-in-aspnet.aspx)

# sharepoint-2013 - sharepoint 2013 自定义站点模板未显示在子站点上

> ID：15907244
> 
> 赞同：6
> 
> 时间：2013-04-09T16:19:23.477
> 
> 标签：sharepoint-2013

我有一个名为“项目”的 sharepoint 2013 子站点，其中所有项目都是由站点模板创建的子站点。

我想对模板进行更改，因此我使用模板创建了一个新的“项目”子站点，进行了更改并将该子站点保存为新的站点模板。

现在，当我尝试创建新的项目子站点时，我只能看到旧站点模板，但看不到新站点模板。

我检查了解决方案库，它们都以活动状态出现在那里。

我知道这里出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T08:09:21.167

我找到了解决方案：如果我想允许在子网站中使用网站模板，我需要输入他们的网站设置并进入“页面布局和网站模板”，并将请求的网站模板添加到允许的网站模板列表中。

我不敢相信屏幕上的选项就在我面前，我没有看到它......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-06T15:40:59.997

You have to activate the Publishing feature on the root and on the affected site.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T08:19:38.307

该设置的选项不再存在。不知道从什么时候开始，但我遇到了同样的问题，无法为新的网站集使用自定义模板。-解决方案库中存在模板 -当我想为新创建的站点选择模板时，不显示自定义选项卡 -在新创建站点的站点设置中，外观中没有“页面布局和站点模板”选项&感觉部分

# php - 致命错误：调用未定义的方法 - 错误

> ID：15907245
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:19:24.863
> 
> 标签：php, mysqli

这就是我正在处理的那个应该只有你的前面文本的方法，这样我就不会通过数据库：

致命错误：在第 30 行调用 /home/jesperbo/public_html/blabla.dk/admin_forside.php 中未定义的方法 mebe::admin_tekst()

```
function admin_tekst()
     {
             if ($stmt = $this->mysqli->prepare('SELECT `tekst` FROM `forside_tekst`'))
             { 
                 $stmt->execute();
                 $stmt->store_result();

                 $stmt->bind_result($tekst);

                 while ($stmt->fetch()) {
                 ?>
                 <form action="#" method="post">
                     <textarea name="tekst" cols="20" rows="15" class="new" style="width:100%;"><?php echo $tekst;?></textarea>
                     <input type="submit" name="opret" value="Opret Blog" class="new">
                 </form>
                 <?php
                 }
                 $stmt->close();

             } else {
                 echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
             }    

     } 
```

当我得到它时，它是这样的：

```
<?php

                     $admin_tekst = $mebe->admin_tekst();

                     if(isset($_POST["opret"]))
                     {
                         $updater_forside = $mebe->updater_forside();
                     }

                 ?> 
```

updater 现在工作得很好，没有任何问题。

问题是 admin_tekst()

当我获得页面信息时：

```
session_start();
 require_once("indhold/inc/fun_db.php");
 $mebe = new mebe;
 $db = $mebe->db_c(); 
```

所以这里似乎是我的函数文件的开始：

```
if(IN_DEBUG_MODE){
     ini_set("display_startup_errors", "on");
     ini_set("display_errors", "on");
       ini_set("html_errors", "false");
     error_reporting(-1); // -1 viser alle slags fejl beskeder
     ini_set("ignore_repeated_errors", 0);
 }
 else{
     error_reporting(0);
 }

 class mebe
 {

 private $mysqli;
     function db_c()
     {
         $mysqli = new mysqli('localhost', '..', '..', '..');

         if ($mysqli->connect_errno) {
             die('Fejl : ' . $mysqli->connect_errno);
         }
         mysqli_set_charset($mysqli, "utf8");
         $this->mysqli = $mysqli;
     }

     function admin_tekst()
     {
             if ($stmt = $this->mysqli->prepare('SELECT `tekst` FROM `forside_tekst`'))
             { 
                 $stmt->execute();
                 $stmt->store_result();

                 $stmt->bind_result($tekst);

                 while ($stmt->fetch()) {
                 ?>
                 <form action="#" method="post">
                     <textarea name="tekst" cols="20" rows="15" class="new" style="width:100%;"><?php echo $tekst;?></textarea>
                     <input type="submit" name="opret" value="Opret Blog" class="new">
                 </form>
                 <?php
                 }
                 $stmt->close();

             } else {
                 echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
             }    

     }

     }

 } 
```

所有其他功能都很好的*例子*：

```
function updater_forside()
     {
         if ($stmt = $this->mysqli->prepare('UPDATE `forside_tekst` SET `tekst`=? WHERE `id`=?'))
         { 
             $stmt->bind_param('si', $tekst, $id);

             $tekst = $_POST["tekst"]; 
             $id = 1;

             $stmt->execute();

             $stmt->close();

         }
         else
         {
             echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
         }
     } 
```

它还将引入 admin_forside.php 并且可以正常工作。根本不会有任何错！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:35:59.743

尝试在类**mebe**中公开您的函数，如下所示：

```
public function admin_tekst() 
```

在您的代码中：

```
 class mebe
 {

     private $mysqli;

     function db_c()
     {
     ...
     }

     public function admin_tekst()
     { ... 
```

# php - 如何模拟使用 PHPUnit 实现 Iterator 接口的类？

> ID：15907249
> 
> 赞同：23
> 
> 时间：2013-04-09T16:19:41.737
> 
> 标签：php, iterator, mocking, phpunit

如何模拟以[`Iterator`](http://php.net/manual/en/class.iterator.php)稳健方式实现接口的类的依赖项？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T16:19:41.737

网上已经有几个解决这个问题的现有解决方案，但我看到的所有解决方案都有一个类似的弱点：它们依赖于`->expects($this->at(n))`. PHPUnit 中的 'expects at' 函数有一些奇怪的行为，因为计数器是针对模拟的每个方法调用的。这意味着如果您在直接 foreach 之外对迭代器进行方法调用，则必须调整迭代器模拟。

解决方案是创建一个包含基本迭代器数据（源数组和位置）的对象并将其传递给`returnCallback`闭包。因为它是通过引用传递的，所以对象在调用之间保持最新，所以我们可以模拟每个方法来模拟一个简单的迭代器。现在我们可以正常使用迭代器模拟，而不必担心严格的调用顺序。

下面的示例方法可用于设置迭代器模拟：

```
/**
 * Setup methods required to mock an iterator
 *
 * @param PHPUnit_Framework_MockObject_MockObject $iteratorMock The mock to attach the iterator methods to
 * @param array $items The mock data we're going to use with the iterator
 * @return PHPUnit_Framework_MockObject_MockObject The iterator mock
 */
public function mockIterator(PHPUnit_Framework_MockObject_MockObject $iteratorMock, array $items)
{
    $iteratorData = new \stdClass();
    $iteratorData->array = $items;
    $iteratorData->position = 0;

    $iteratorMock->expects($this->any())
                 ->method('rewind')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             $iteratorData->position = 0;
                         }
                     )
                 );

    $iteratorMock->expects($this->any())
                 ->method('current')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             return $iteratorData->array[$iteratorData->position];
                         }
                     )
                 );

    $iteratorMock->expects($this->any())
                 ->method('key')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             return $iteratorData->position;
                         }
                     )
                 );

    $iteratorMock->expects($this->any())
                 ->method('next')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             $iteratorData->position++;
                         }
                     )
                 );

    $iteratorMock->expects($this->any())
                 ->method('valid')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             return isset($iteratorData->array[$iteratorData->position]);
                         }
                     )
                 );

    $iteratorMock->expects($this->any())
                 ->method('count')
                 ->will(
                     $this->returnCallback(
                         function() use ($iteratorData) {
                             return sizeof($iteratorData->array);
                         }
                     )
                 );

    return $iteratorMock;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-07T15:06:32.983

如果您只需要针对通用迭代器进行测试，那么 PHP（在 SPL 扩展中 - 在 PHP > 5.3 中无法关闭）内置了实现 Iterable 的数组包装器：[SPL Iterators](http://php.net/manual/en/spl.iterators.php)。例如

```
$mock_iterator = new \ArrayIterator($items);
$test_class->methodExpectingGenericIterator($mock_iterator);
$resulting_data = $mock_iterator->getArrayCopy(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-06T10:32:32.460

这是一个结合了两全其美的解决方案，在`ArrayIterator`内部使用：

### 带有`phpunit/phpunit`模拟设施

```
/**
 * @return \PHPUnit_Framework_MockObject_MockObject|SomeIterator
 */
private function createSomeIteratorDouble(array $items = []): SomeIterator
{
    $someIterator = $this->createMock(SomeIterator::class);

    $iterator = new \ArrayIterator($items);

    $someIterator
        ->method('rewind')
        ->willReturnCallback(function () use ($iterator): void {
            $iterator->rewind();
        });

    $someIterator
        ->method('current')
        ->willReturnCallback(function () use ($iterator) {
            return $iterator->current();
        });

    $someIterator
        ->method('key')
        ->willReturnCallback(function () use ($iterator) {
            return $iterator->key();
        });

    $someIterator
        ->method('next')
        ->willReturnCallback(function () use ($iterator): void {
            $iterator->next();
        });

    $someIterator
        ->method('valid')
        ->willReturnCallback(function () use ($iterator): bool {
            return $iterator->valid();
        });

    return $someIterator;
} 
```

### 和`phpspec/prophecy`

```
/**
 * @return \PHPUnit_Framework_MockObject_MockObject|SomeIterator
 */
private function createSomeIteratorDouble(array $items = []): SomeIterator
{
    $someIterator = $this->prophesize(\ArrayIterator::class);

    $iterator = new \ArrayIterator($items);

    $someIterator
        ->rewind()
        ->will(function () use ($iterator): void {
            $iterator->rewind();
        });

    $someIterator
        ->current()
        ->will(function () use ($iterator) {
            return $iterator->current();
        });

    $someIterator
        ->key()
        ->will(function () use ($iterator) {
            return $iterator->key();
        });

    $someIterator
        ->next()
        ->will(function () use ($iterator): void {
            $iterator->next();
        });

    $someIterator
        ->valid()
        ->will(function () use ($iterator): bool {
            return $iterator->valid();
        });

    return $someIterator->reveal();
} 
```

# ruby-on-rails - 在 Ruby on Rails 的 IRB 中停止加载脚本执行的最佳方法

> ID：15907252
> 
> 赞同：4
> 
> 时间：2013-04-09T16:19:43.800
> 
> 标签：ruby-on-rails, ruby, exit, irb

在 Ruby on Rails 的 IRB 中寻找退出加载脚本的最佳方式。Kernel.exit & Kernel.abort 会让你完全退出 IRB 会话。理想情况下，这将在某些条件标准下发生。

我的脚本/my_script.rb：

```
puts "My Script is running!"
# if some criteria, stop execution of this script without stoping IRB
puts "This will never happen" 
```

理想结果：

```
$ rails console
irb(main):001:0> load 'script/my_script.rb'
My Script is running!
irb(main):002:0> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:27:39.707

使用`__END__`关键字停止解析器。

```
puts "My Script is running!"
__END__
puts "This will never happen"
... 
```

或者只是注释掉脚本的其余部分（如果您需要在`DATA`之后的格式正确的流`___END__`）

```
puts "My Script is running!"
=begin
puts "This will never happen"
...
=end 
```

如果您需要基于逻辑而不是在固定点提前退出，您可以将脚本的主体放在一个函数中并提前返回。

```
def do_work
  puts "My Script is running!"
  ...
  return if exit_condition?
  puts "This will never happen if exit condition is true"
  ...
end

do_work 
```

或者，将您的脚本放在开始块中并挽救您引发的异常

```
begin
  puts "My Script is running!"
  raise SystemExit if exit_condition?
  puts "This will never happen if exit condition is true"
rescue SystemExit
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:24:06.837

我现在能想到的最佳解决方案是引发脚本未处理的异常。但是，您会得到堆栈跟踪输出，这可能是不可取的。

脚本/my_script.rb

```
puts "My Script is running!"
raise "quiting, but I'm not happy about it"
puts "This will never happen" 
```

结果：

```
irb(main):001:0> load 'script/my_script.rb'
My Script is running!
RuntimeError: quiting, but I'm not happy about it
    from script/my_script.rb:2:in `<top (required)>'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `load'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `block in load'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `load'
    from (irb):1
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rbenv/versions/1.9.3-p374/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
irb(main):002:0> 
```

# actionscript-3 - AS3 - If 语句 - 下一个场景

> ID：15907254
> 
> 赞同：0
> 
> 时间：2013-04-09T16:19:49.197
> 
> 标签：actionscript-3, flash, if-statement, drag-and-drop

我正在创建一个交互式游戏，并希望用户能够将硬币拖放到盒子中。一旦用户完成此操作，他们就可以进入下一个场景，但只有在他们将硬币投入正确的盒子时才能进入下一个场景。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:27:36.413

您想使用 a`MOUSE_DOWN`和一个`MOUSE_UP`事件侦听器`movieclip.startDrag()`来`movieclip.stopDrag()`处理拖放操作，那么您需要做的就是 a`hitTestObject(..)`何时放下硬币。

代码在结构上非常简单：

```
coin.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
coin.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);

function onMouseDown(e:Event):void
{
  // When mouse button is held down, begin dragging coin movieclip
  coin.startDrag();
}

function onMouseUp(e:Event):void
{
  // When mouse button is released, stop dragging
  // the coin and check if is is over the box
  coin.stopDrag();
  if(coin.hitTestObject(box))
  {
    // Go to next scene
  } 
} 
```

# php - 使用包含多个信息的标签解析 xml

> ID：15907257
> 
> 赞同：0
> 
> 时间：2013-04-09T16:19:59.850
> 
> 标签：php, xml-parsing

我有一个这样的xml

```
<catalogo>
<items>
<item>
<ID>1</ID>
<NAME>VA</NAME>
<SIZE>S</SIZE>
<GROUP>1,2,3,4</GROUP>
</item>
<item>
<ID>2</ID>
<NAME>VA</NAME>
<SIZE>M</SIZE>
<GROUP>l,2,3,4</GROUP>
</item>
<item>
<ID>3</ID>
<NAME>VA</NAME>
<SIZE>L</SIZE>
<GROUP>1,2,3,4</GROUP>
</item>
<item>
<ID>2</ID>
<NAME>VA</NAME>
<SIZE>XL</SIZE>
<GROUP>l,2,3,4</GROUP>
</item>
</items>
</catalogo> 
```

TAG GROUP 它是指产品的所有 id 相同但 TAG SIZE 值不同的产品。

我想获得一个这样的sql表

```
 id name size1 size2 size3 size4
   1   va   s      m     l     xl 
```

如何用 php 解析这个 xml 以获得我想要的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:48:44.940

假设您获得 XML 并且无法更改它：

(1)读取XML，构建数组`$c`，假设`<NAME>`为链接`<SIZE>s`.
该代码将生成一个关联数组，其中 key =`<NAME>`和 value =`<SIZE>s`由 | 分隔：`["VA"] => string(9) "|S|M|L|XL"`

```
$xml = simplexml_load_string($x);
$c = array();

foreach ($xml->items->item as $item) {

 $n = (string)$item->NAME;
 if (!isset($c[$n])) $c[$n]='';
 $c[$n] .= "|". (string)$item->SIZE;

} 
```

（2）写入`$c`表（数据库表？HTML表？你决定......）：

```
foreach ($c as $name => $sizes) {

    $size = explode('|', trim($sizes,'|'));
$max = count($size);
// enter code for whatsoever table...
    // echo for demonstration:
    echo "--$name:-----<br />";
for ($i = 0; $i < $max; $i++) echo "size$i: {$size[$i]}<br />";

} 
```

见现场演示：[http ://codepad.viper-7.com/VL1hgw](http://codepad.viper-7.com/VL1hgw)

S如果您自己**制作**XML，请以**不同**的方式制作，例如...

```
<item id="1">
    <name>VA</name>
    <size>S</size>
    <size>M</size>
    <size>L</size>
    <size>XL</size>
</item> 
```

# mysql - Delphi、ADO、MySQL：检查是否返回空集

> ID：15907259
> 
> 赞同：1
> 
> 时间：2013-04-09T16:20:06.227
> 
> 标签：mysql, delphi, ado

Delphi的版本是7。

我正在向 MySQL 数据库发送查询。可以返回的是一组数据行或只是一个空集。没有什么不寻常的。但是我不知道如何建立一个检查机制来检查它是一组数据还是一个空集。

这是一些代码：

```
var
    Q: TADOQuery;
begin
    Q := TADOQuery.Create(self);
    Q.Connection := ADOConnection;

    Q.SQL.Add('CALL get_shopping_cart_list()'); // Call stored procedure
    Q.Open;                                     // Send query and get some
                                                // results back
    // PSEUDOCODE
    // IF get_shopping_cart_list() RETURNS A NON-EMPY SET THEN
    //     SHOW WHAT WE HAVE
    // ELSE
    //     SHOW A MESSAGE THAT SAYS 'EMPTY SET'

    Q.Free;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:22:50.237

根据 Delphi 版本，它可以是

```
 if Q.IsEmpty then ... 
```

或者

```
 if Q.BOF and Q.EOF then ... 
```

您还可以深入了解 Microsoft ADO。只要您的查询中没有多个语句，`Q.RecordSet.EOF`就`Q.RecordSet.BOF`应该这样做。

*   [http://msdn.microsoft.com/library/windows/desktop/ms675787.aspx](http://msdn.microsoft.com/library/windows/desktop/ms675787.aspx)
*   [http://www.w3schools.com/ado/ado_ref_recordset.asp](http://www.w3schools.com/ado/ado_ref_recordset.asp)
*   [http://msdn.microsoft.com/library/windows/desktop/ms677539.aspx](http://msdn.microsoft.com/library/windows/desktop/ms677539.aspx)

* * *

另外请不要忘记保护内存管理的错误。

```
 Q := TADOQuery.Create;
 try
    .... do this or that ....
    .... do this or that ....
    .... do this or that ....
 finally
    Q.free;
 end; 
```

# java - 删除时索引超出范围

> ID：15907266
> 
> 赞同：1
> 
> 时间：2013-04-09T16:20:38.133
> 
> 标签：java, string, compare

你能帮我吗？`Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1`运行此程序时出现错误。如何修复 rhi？StringBuffer 和 StringTokenizer 是必需的。另外，如何才能更简单？

```
import java.util.StringTokenizer;

public class main {
  public static int i, n;
  public static boolean orly = false;
  public static StringBuffer input, tokenStr;
  public static StringTokenizer out;
  public static char aChar;

  public static void main(String[] args) {
    input = new StringBuffer("some text");
    System.out.println("Начальная строка - " + input.toString());
    input = new StringBuffer(input.toString().replaceAll("[^a-z A-Z А-Я а-я]", ""));
    if (input.toString().trim().length() != 0) {
      out = new StringTokenizer(input.toString());
      System.out.println("Форматированая строка - " + input.toString());
      n = (out.countTokens());
      String[] charSet = { "a", "e", "o", "u", "y" };
      for (i = 0; i <= n - 1; i++) {
        tokenStr = new StringBuffer(out.nextToken());
        aChar = (tokenStr.charAt(0));
        String firstchar = tokenStr.toString().substring(0,1);
        if (tokenStr.length() > 1) {
          for (int i = 0; i <= charSet.length-1; i++) {
                if ((!firstchar.equals(charSet[i])) || (!firstchar.toUpperCase().equals(charSet[i]))) {
              input.delete(input.indexOf(tokenStr.toString()),input.indexOf(tokenStr.toString())+ tokenStr.length() + 1);
            }
         }
           } else {
                        input.deleteCharAt(input.indexOf(tokenStr.toString()));
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:25:58.233

```
for (i = 0; i <= n - 1; i++) {
  //stuff
  if (tokenStr.length() > 1) {
    for (int i = 0; i <= charSet.length-1; i++) {
        //stuff
    }
  }
} 
```

在第一个 for 循环中，您有一个临时变量 i 仅存在于那些花括号内。但是，在您的第二个 for 循环中，您正在创建另一个变量 i。这我将覆盖第一个但仍将在两个循环中递增。您最好将第二个重命名为 j 或其他名称。

此外，在：

```
input.delete(input.indexOf(tokenStr.toString()),input.indexOf(tokenStr.toString())+ tokenStr.length() + 1); 
```

如果 tokenStr 不在输入中会发生什么？然后 indexOf 将返回 -1 （预定义的行为），这会导致这个特定的异常。

*   所以..我只需要删除字符串中所有不以“a”、“e”、“o”、“u”、“y”、“i”开头的单词和一个字符的单词（比如 I、a ）。并用留下的词创建字符串

考虑另一种方式。与其从输出 StringBuffer 中删除不需要的单词，不如在找到它们时尝试将想要的单词添加到输出缓冲区。您可以将此逻辑描述为沿着输入字符串行走并在找到它们时写下您想要的单词。

```
StringBuffer outString = new StringBuffer();
StringTokenizer st = new StringTokenizer(input.toString());
while(st.hasMoreTokens()){
  String currentToken = (String)st.nextToken();
  if(currentToken.length() < 2){
    continue;
  }
  for(int i = 0; i < charSet.length; i++){
    if(charSet[i] == currentToken.charAt(0)){
      outString.append(currentToken);
      break;
    }
  }
} 
```

# c++ - 哈希函数不严格依赖于字符串键的大小

> ID：15907267
> 
> 赞同：1
> 
> 时间：2013-04-09T16:20:39.920
> 
> 标签：c++, string, hash, hashtable, hash-function

我正在制作一个哈希表，我需要制作一个不仅取决于字符串键的大小的哈希函数，因为元素周期表元素只有 1 到 3 个字符。如何创建一个散列函数，它可能基于字符串的每个字符的字节数为我提供一个索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:23:49.700

几乎*每个*字符串上的哈希函数都会对字符进行哈希处理。纯粹按长度散列的字符串极为罕见。

一个简单的哈希函数系列是[shift-add-XOR](http://en.literateprograms.org/Hash_function_comparison_%28C,_sh%29#Shift-add-XOR)，顾名思义，它使用位移、加法和 XOR 的组合从字符串中获取哈希函数。它很容易实现，并且提供了相当好的密钥分布。

也就是说，如果你保证你只是使用元素周期表符号，你可能想尝试为元素找到一个完美的散列函数。这是为您正在使用的数据集定制的哈希函数，从不存在任何冲突。类似的工具`gperf`可用于创建此类功能。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:06:52.160

最简单的解决方案是使用现有的解决方案，例如 FNV。但是要小心——一些非常普遍的散列函数在给定大量非常短的字符串（例如 java.lang.String 使用的那个）时表现不佳。对于通用哈希函数，我通常使用类似的东西：

```
size_t
hash( std::string const& value )
{
    size_t result = 2166136261;
    for ( std::string::const_iterator current = value.begin();
            current != value.end();
            ++ current ) {
        result = 127 * result + static_cast< unsigned char >( *current );
    }
    return result;
} 
```

在乘法速度较慢的机器上，这比 FNV 略快，而且我还没有找到分布明显更差的情况。

但是，您提到最大字符串长度为三。在这种情况下，您可能可以使用更简单的技术：

```
size_t
hash( std::string const& value )
{
    union {
        size_t results;
        char input[ sizeof( size_t ) ];
    } working = 0;
    assert( value.size() <= sizeof( size_t ) );
    value.copy( working.input, sizeof( size_t ) );
    return working.results;
} 
```

这两种方法都保证所有长度小于`sizeof( size_t )`.

# css - 文本溢出：换行时第一行的省略号

> ID：15907269
> 
> 赞同：10
> 
> 时间：2013-04-09T16:20:43.573
> 
> 标签：css, html, text

我有一个带有 CSS 的 div：

```
div.c
{
font-size: 18px;
color: #888;
max-width: 300px;
display: inline-block;
overflow: hidden;
line-height: 20px;
text-overflow: ellipsis;
word-break: break-all;
} 
```

`The content in this div is "Abcdef abcdefabcdefabcdefabcdefaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" //for example, given only to show length in div`.

但是如果使用上面`CSS`的， div 内容将被破坏并且没有`three dots //as of text-overflow: ellipsis;`. 如果我删除`word-break: break-all;`，那么将形成两行，第一行是第一个单词，第二行是第二个单词。但`text-overflow: ellipsis;`适用于此。

我该怎么做才能将所有文本保留在一行上并进行`text-overflow: ellpsis;`工作？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:26:52.227

`white-space: nowrap;`是你需要的，我相信。

# html - 输入类型文本高度和填充

> ID：15907270
> 
> 赞同：0
> 
> 时间：2013-04-09T16:20:43.623
> 
> 标签：html, css

我只是遇到了一个非常奇怪的问题。我正在将一些 html 文件（实际上是 ftl）改编为模板。我得到了一个静态的 html 和 css 文件。正确应用一切后，我的输入看起来不像他们应该的那样。我已经非常仔细地检查了计算的样式，它们是正确的，如下图所示。 ![在此处输入图像描述](https://i.stack.imgur.com/Jl4kI.png)

原始输入的高度为 18px，顶部和底部的填充为 6px，因此必须为 18+12=30px 高度。不过，我得到的是一个高度为 6px 的输入加上顶部 6px 的填充和底部 6px 的填充，因此 6+6+6=18px。

有人可以解释这里发生了什么吗？顺便说一句，我在这两种情况下都使用 safari。

提前致谢！

# sql-server - 无法在 Visual Studio 2012 中为 dacpac 添加数据库引用 - OutOfMemoryException

> ID：15907280
> 
> 赞同：2
> 
> 时间：2013-04-09T16:21:17.037
> 
> 标签：sql-server, visual-studio-2012, out-of-memory, data-tier-applications, dacpac

我有一个 12 MB 的 dacpac，在 VisualStudio 2012 中生成需要 45 分钟。它用于生产 Microsoft Dynamics GP（以前称为 Great Plains）客户数据库。我很惊讶我能够首先创建 dacpac，但它似乎在任何开发工具（Visual Studio 2012 或 SSMS 2012）中都没用。现在我看到即使 Windows Azure 也有 5 MB 的限制（[DacPac 错误太大 - 但我的文件只有 406kb](https://stackoverflow.com/questions/12220530/dacpac-is-too-big-error-but-my-file-is-only-406kb)）。

即使在 SSMS 2012 IDE 中，我也会收到 OutOfMemoryException。

![SSMS 2012](https://i.stack.imgur.com/gaOEJ.png)

值得一提的是，.model 临时文件增长到 1.5 GB，而 Visual Studio 2012 创建了 dacpac。

有什么想法可以在 Visual Studio 中添加数据库引用或将 dacpac 导入 SQL Server（可能分阶段）？工具可以使用的内容是否只有硬性限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T17:53:10.803

我一直在尝试从 bacpac 文件导入数据库，并且遇到了类似的 OutOfMemoryException。但是，在我关闭并重新打开管理工作室后，它工作正常。

# java - 如何通过 uuid 获取文档

> ID：15907282
> 
> 赞同：1
> 
> 时间：2013-04-09T16:21:20.533
> 
> 标签：java, jackrabbit, jcr

我正在使用长耳兔（v2.6.0）。

我要做的是从 UUID 获取文档存储库。

我正在阅读jackrabbit api，似乎没有执行此任务的方法。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:31:57.730

[从 JCR 2.0 开始，您可以使用Session.getNodeByIdentifier()](http://www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/Session.html#getNodeByIdentifier%28java.lang.String%29)按标识符获取节点。也可能是 Session.getNodeByUUID，但它已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T00:02:40.343

该文档也是一个节点。所以你可以：

```
String pdfUUID = "put-uuid-here";
Node pdfNode = session.getNodeByIdentifier(pdfUUID);
Node jcrContent = pdfNode.getNode("jcr:content");
Property dataProperty = jcrContent.getProperty("jcr:data");
Binary dataBinary = dataProperty.getBinary();
InputStream dataInputStream = dataBinary.getStream();
//do something
dataInputStream.close();
dataBinary.dispose(); 
```

# c# - RichTextBox 内的自定义控件的绑定问题

> ID：15907286
> 
> 赞同：3
> 
> 时间：2013-04-09T16:21:31.030
> 
> 标签：c#, wpf, serialization, binding, richtextbox

我完全被这个难住了。

这是设置：

具有标准运行和段落的 RichTextBox。当用户选择一些文本，点击热键时，我将所选文本替换为从 InlineUIContainer 派生的自定义控件 - 我们称之为 CustomContainer。

CustomContainer 有一个 TextBlock 类型的子项。TextBlock 的 TextProperty 绑定到属性更改的对象。

这样做是为了无法编辑此属性的文本 - 如果您选择它或尝试删除它，它会删除整个块而不是任何字符。

所有这一切都很好。

这是问题所在：

当您单击保存时，我们会获取整个 RichTextBox 数据，对其进行序列化，然后将其保存到文本文件中。然后，当您重新打开文件时，所有绑定都会根据需要重新连接，并且一切看起来都应该如此。

直到绑定的属性改变。

此时 CustomContainer 没有改变。请记住，CustomContainer 有一个 TextBlock 绑定了 Text 属性。如果我查看有问题的 TextBlock，我可以看到 Text 属性已更改 -*但是，*视觉上没有任何更改。我尝试做各种事情来刷新容器，但似乎没有任何效果。我尝试过 UpdateLayout，我尝试过更改绑定，但没有任何效果。

如果我从 RichTextBox 中删除该 CustomContainer，然后突出显示并点击热键，一切正常。所以代码和绑定有效。在 RichTextBox 的反序列化、重新绑定和更新的某个地方，属性的绘制在其更改时停止工作......

更新：我已经设法让它工作，虽然我认为它有点像黑客。我将保持开放，以防有人可以为我提供真正的解决方案。

我所做的是删除加载时的自定义控件，并从头开始创建一个新控件并插入到同一位置。这就是诀窍，尽管我对为什么感到困惑（它只是调用构造函数，删除旧的并添加新的。具有绑定的其余代码都是一样的，所以我仍然困惑为什么这会起作用 - 或者更确切地说，为什么其他方式不起作用）

# jsf - glassfish 3.1.2.2 上的 Omnifaces EAR 部署问题

> ID：15907290
> 
> 赞同：0
> 
> 时间：2013-04-09T16:21:38.597
> 
> 标签：jsf, glassfish, ear, omnifaces

我有一个带有omnifaces 1.4.1 glassfish 3.1.2.2 primefaces 3.5 primefaces extensions 0.6.3 myfaces extcdi 1.0.5的maven企业项目（瘦）

当我部署耳朵时，错误是：

```
remote failure: Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.omnifaces.component.output.cache.CacheInitializerListener. Please see server.log for more details. 
```

如果我将omniface jar 部署到glassfish lib 目录中，则应用程序部署正常。

如果我进行一场包括所有 ejb、jar 和战争的战争，它也可以加载。

有谁知道从哪里开始调试这个问题？

如果需要，我可以提供堆栈跟踪。

EAR结构：

```
PROJECT-EAR
  |
  -META-INF
  |
  -lib
      |
      - omnifaces-1.4.1.jar
      - myfaces-extcdi-bundle-jsf20-1.0.5.jar
      - primefaces-3.5.jar
      - PROJECT-lib.jar
  |
  - PROJECT-WEB1.war
  - PROJECT-EJB.jar
  - PROJECT-WEB2.war 
```

最好的问候，hw

编辑：一些堆栈信息：

```
SEVERE: ContainerBase.addChild: start: 
    org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException:    javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.omnifaces.component.output.cache.CacheInitializerListener
at org.apache.catalina.core.StandardContext.start(StandardContext.java:5332)
at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.omnifaces.component.output.cache.CacheInitializerListener 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:04:07.987

ear/lib 目录不是共享 Web 工件的理想位置。这在一定程度上取决于您在战争中还拥有什么（例如，您的`beans.xml`Servlet 中是否有`WEB-INF`任何 Servlet？您的`web.xml`文件中究竟有什么等），但在很多情况下，这种方式并不能很好地工作。

参见例如：

*   [http://forum.primefaces.org/viewtopic.php?f=3&t=2332](http://forum.primefaces.org/viewtopic.php?f=3&t=2332)
*   [https://community.jboss.org/message/799262](https://community.jboss.org/message/799262)

我不得不说，在使用两次战争和完全相同的库和相同版本的 ear/lib（primefaces 和 myfaces-extcdi）创建一个耳朵后，我无法重现您的错误，但是像类加载器冲突这样的事情是永远不容易复制。

您可能想尝试将所有 Web 工件（OmniFaces、PrimeFaces 等）放在两场战争的 WEB-INF/lib 中。就我个人而言，我认为这是一个更好的做法，因为 EJB 模块不应该看到 web 类型，并且你放在 ear/lib 中的东西对 EJB 模块中的类是可见的。

目前我认为这主要是一个 EAR/classloader 问题，而不是专门针对 OmniFaces 的问题。如果您有一些证据表明 OmniFaces 确实做错了什么，在[https://github.com/omnifaces/omnifaces/issues](https://github.com/omnifaces/omnifaces/issues)上打开一个问题可能是进一步讨论该问题的更合适的地方。

# javascript - onerror标签属性总是在 IE 中触发，为什么？

> ID：15907292
> 
> 赞同：7
> 
> 时间：2013-04-09T16:21:47.797
> 
> 标签：javascript, image, internet-explorer, onerror

我有这样的代码

```
<a class="img" href="LINK">
  <img src="GOOD_IMG" title="title" onerror="src='ERROR_IMG'">
</a> 
```

在 FireFox 和 chrome 中，它的行为与您期望的一样（如果存在则显示 GOOD_IMG，如果不存在则显示 ERROR_IMG），但在 IE (9) 中，它始终显示 ERROR_IMG。

如果我在 IE 中调试并即时设置`onerror`其他内容，例如

```
onerror="alert('error')" 
```

然后出现警告消息并显示正确的图像。

什么可能导致 IE`onerror`在其他浏览器没有问题的情况下激活？

有什么办法可以找出是什么原因造成的`onerror`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-17T10:06:57.793

我也经历过类似的症状。在我的情况下，通过将 'empty' 值放入`src`at发生了 'onerror' `<img>`。

**问题：**

html

```
<img src="" onerror="this.src='ERROR_IMG'"> 
```

js

```
$('._profile_image:first').attr('src', IMAGE_URL); 
```

**解决方案：**

```
<img onerror="this.src='ERROR_IMG'"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T08:14:01.673

你可以这样试试。首先，您必须编写一个 JS 函数来检查图像是否存在（AJAX 调用返回是否存在）并相应地更改图像。

其次，您在 onerror 事件上调用该函数

```
function imgError(imageControl, path) {        
            $.ajax({
                type: "POST",
                async: true,
                url: "test.aspx/CheckImageExists",
                data: "{'imagePath':" + JSON.stringify(path) + "}",
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    if (response.d == "exists") {
                        imageControl.src = path;
                    }
                    else {
                        imageControl.src = 'img/errorimg.jpg';
                    }
                }
            });
            return true;
        }

<img src="<%# "admin/"+ Eval("imagath") %>" onerror="imgError(this,'<%# "admin/"+ Eval("imagath") %>')">

C#
 [WebMethod]       
        public static string CheckImageExists(string imagePath)
        {
            string fullPath = HttpRuntime.AppDomainAppPath.ToString() + imagePath;
            fullPath=fullPath.Replace('/','\\');
            return File.Exists(fullPath) ? "exists" : "notexists";           
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T13:25:24.850

改成：

```
onerror = function() { 
    alert('error'); 
}; 
```

# javascript - Highcharts：组合双轴与向下钻取

> ID：15907299
> 
> 赞同：0
> 
> 时间：2013-04-09T16:22:12.443
> 
> 标签：javascript, charts, highcharts

我正在尝试使用带有向下钻取的组合双轴，但是当我单击该栏时它不起作用。

另一个问题，第二个数据（样条）是否也需要使用向下钻取？或者我只能将它与第一个数据（列）一起使用。

这是我的 jsfiddle：http: [//jsfiddle.net/QDzpj/](http://jsfiddle.net/QDzpj/)

和代码导致我不能离开没有它的链接。

```
$(function () {
     function setChart(name, categories, data, color) {
            chart.xAxis[0].setCategories(categories, false);
            chart.series[0].remove(false);
            chart.addSeries({
                name: name,
                data: data,
                color: color || 'white'
            },false);
            chart.redraw();
        }

        var colors = Highcharts.getOptions().colors;
    var categories = ['MSIE', 'Firefox', 'Chrome'],
            name = 'Browser brands',
            data = [
                    {
                        y:49.9, 
                        drilldown: {
                            name: 'MSIE versions',
                            categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                            data: [10.85, 7.35, 33.06, 2.81],
                            color: colors[0]
                        }
                    }, 
                    {
                        y:71.5,
                        drilldown: {
                            name: 'Firefox versions',
                            categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                            data: [0.20, 0.83, 1.58, 13.12, 5.43],
                            color: colors[1]
                        }
                    }, {
                        y:106.4,
                        drilldown: {
                            name: 'Chrome versions',
                            categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',
                                'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],
                            data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],
                            color: colors[2]
                        }
                    }];

        $('#container').highcharts({
            chart: {
                zoomType: 'xy'
            },
            title: {
                text: 'Average Monthly Temperature and Rainfall in Tokyo'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: [{
                categories: ['Jan', 'Feb', 'Mar']
            }],
            yAxis: [{ // Primary yAxis
                labels: {
                    format: '{value}°C',
                    style: {
                        color: '#89A54E'
                    }
                },
                title: {
                    text: 'Temperature',
                    style: {
                        color: '#89A54E'
                    }
                }
            }, { // Secondary yAxis
                title: {
                    text: 'Rainfall',
                    style: {
                        color: '#4572A7'
                    }
                },
                labels: {
                    format: '{value} mm',
                    style: {
                        color: '#4572A7'
                    }
                },
                opposite: true
            }],
            plotOptions: {
                column: {
                    cursor: 'pointer',
                    point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) { // drill down
                                    setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);
                                } else { // restore
                                    setChart(name, categories, data);
                                }
                            }
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        color: colors[0],
                        style: {
                            fontWeight: 'bold'
                        },
                        formatter: function() {
                            return this.y +'%';
                        }
                    }
                }
            },
            tooltip: {
                shared: true
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                x: 120,
                verticalAlign: 'top',
                y: 100,
                floating: true,
                backgroundColor: '#FFFFFF'
            },
            series: [{
                name: 'Rainfall',
                //color: '#4572A7',
                type: 'column',
                yAxis: 1,
                data: data,
                tooltip: {
                    valueSuffix: ' mm'
                }
            }, {
                name: 'Temperature',
                color: '#89A54E',
                type: 'spline',
                data: [7.0,6.9, 9.5],
                tooltip: {
                    valueSuffix: '°C'
                }
            }]
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:30:55.940

你的控制台说你做错了什么。

```
"Uncaught ReferenceError: chart is not defined " 
```

所以你只需要定义图表，例如：

```
var chart = $("#container").highcharts(); 
```

见例子：http: [//jsfiddle.net/QDzpj/1/](http://jsfiddle.net/QDzpj/1/)

# websocket - AWS Elastic Beanstalk 上带有 socket.io 的 Websocket

> ID：15907302
> 
> 赞同：30
> 
> 时间：2013-04-09T16:22:20.693
> 
> 标签：websocket, amazon-elastic-beanstalk

我正在尝试在 AWS Elastic Beanstalk 上使用 socket.io 设置 websocket-server。启动并运行了对 /socket.io/1/?t=xxxx 的初始请求，但 websocket 握手失败并出现以下错误：

```
WebSocket connection to 'ws://xxxxxx.elasticbeanstalk.com/socket.io/1/websocket/a4DTCN2BeJZuiSaphVyz' failed: Unexpected response code: 502 
```

从谷歌搜索并查看错误 502 (Bad Gateway) 似乎与 nginx-proxy 有关。那么如何配置 nginx 以使用 websockets 呢？

在 AWS 文档中找不到有关设置 websocket 的任何内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-17T15:37:06.333

您可以尝试通过配置nginx的麻烦，但如果您只使用websockets，关闭所有代理并直接连接会更容易。

这是在弹性 beantalk 仪表板中的应用程序环境下。右侧有一个下拉按钮，标记为“操作”。选择“编辑/加载配置”

![在此处输入图像描述](https://i.stack.imgur.com/my9J9.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-29T02:25:49.623

ditch-nginx 方法有一个明显的缺点。您必须将 https 移至节点以及您的 socket.io 调用。在服务器配置中而不是在节点中管理 https 要容易得多。

如果您不需要 https，我建议转储代理并直接转到节点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-24T20:20:34.603

Socket.io 默认使用端口 8080。通过在 AWS 管理 > EC2 > 安全组中添加“入站 > 自定义 TCP 规则”，确保在您的 EC2 安全组上启用端口 8080。

# jquery - 如何将 iframe 按钮单击关联到带有 jQ uery 的 window.parent？

> ID：15907303
> 
> 赞同：1
> 
> 时间：2013-04-09T16:22:21.627
> 
> 标签：jquery, iframe, click

我知道在 stackoverflow 上有很多类似的主题，但我还没有找到一个特定于我的案例的主题。我在同一个域上有一个 iframe，里面有一个按钮。我可以像这样通过jquery访问它...

```
var mbutton = $('#myframe').contents().find('#login_button'); 
```

我还阅读了几个博客，我可以像这样将点击事件传达给父窗口......

```
$('#button', window.parent.document).click(); 
```

如何组合这两个步骤，这样每当单击（对于我的 iframe 按钮）时，按钮表单都会提交到父窗口？不是 iframe 窗口。

谢谢！

**更新下午 12:36**

这对我来说几乎是有意义的......

```
mbutton.on("click", function() {
$(this, window.parent.document); 
}); 
```

...但它不会更改父 URL...一切仍在 iframe 中发生...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:07:00.913

以下过程对我有用，可以将我的 iframe 源发送到我的父窗口。另外，我添加了一个 setTimeOut() 函数，只是为了确保 iframe 源在转到父窗口之前完全准备好......

```
var mbutton = $('#myframe').contents().find('#mbutton');
mbutton.click(function(e) {
 setTimeout(function() {
  var mnextwindow = document.getElementById("mwindow").contentWindow.location.href; 
  window.parent.location = mnextwindow;
 },5000);
}); 
```

希望这可以帮助某人

# mysql - mysql返回给定条件之外的数据点

> ID：15907306
> 
> 赞同：0
> 
> 时间：2013-04-09T16:22:28.180
> 
> 标签：mysql

我将此查询传递给 mysql 表

```
SELECT metar_id, latitude, longitude
FROM  `metars` 
WHERE  `latitude` >=  '38.996666666667'
AND  `longitude` >=  '103.16666666667'
AND  `latitude` <=  '40.663333333333'
AND  `longitude` <=  '104.83333333333' 
```

它给了我一行以下数据。1）metar_id=997419 纬度=4.53 经度=103.43

为什么我会在边界之外获得一个数据点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:17:14.490

通过简单地将字段的数据类型从 varchar 更改为 float 来解决它。

# javascript - 如何在点击功能中使用 jQuery 改回 innerhtml？

> ID：15907307
> 
> 赞同：2
> 
> 时间：2013-04-09T16:22:29.570
> 
> 标签：javascript, jquery, html, css

我有以下功能：

```
$('#jaTack').click(function() {
        $('#syskon').slideToggle();
        $('#jaTack').html('Hide');
    }); 
```

按钮的 id 也是如此`#jaTack`，按下时会显示 id 的内容`#syskon`。按下按钮时，我将该按钮的内部 html`.html()`从“显示”更改为“隐藏”。这一切都很好，但我不确定再次按下它时我应该怎么做，以便按钮的 innerhtml 再次变为“显示”？

希望有人有时间帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:24:17.823

您需要将状态存储在某个地方，为什么不使用匿名函数呢？

```
$('#jaTack').click((function() {
    var toggle = false;
    return function () {
        if (toggle) {
            $('#jaTack').html('Show');
        } else {
            $('#jaTack').html('Hide');
        }
        $('#syskon').slideToggle();
        toggle = !toggle;       
    };
}());   // immediate invocation because we're awesome 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:29:28.340

您可以像这样使用[三元运算符](http://msdn.microsoft.com/en-us/library/ie/be21c7hw%28v=vs.94%29.aspx) `?:`

```
$('#jaTack').click(function() {
    $('#syskon').slideToggle();
    $('#jaTack').html($('#jaTack').html() == "Show" ? "Hide" : "Show");
}); 
```

# mysql - MySQL 搜索 FTS 与多个查询

> ID：15907312
> 
> 赞同：1
> 
> 时间：2013-04-09T16:22:50.817
> 
> 标签：mysql, search, full-text-search, myisam, relational-division

在一个项目中工作，其中架构是这样的：

`id , key, value`

和列是 varchar，表`key`是.`value``InnoDB`

用户可以根据键值对进行搜索……在 MySQL 中查询的最佳方式是什么？我能想到的选项是：

*   对于每个`key => value`表单，查询并执行`inner join`以`id`匹配所有条件。

*   或者在后台， 使用on和单个查询填充一个`MyISAM`表。如果网站很受欢迎并且表有十万行，那么稍后将有这样的好处，我可以轻松地将代码移植到 Lucene，但现在是 MySQL。`id, info``Full Text index``info``like '%key:value%key2:value2%'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:32:10.270

您正在谈论的模式称为**关系除法**。

如果您有正确的索引，选项 #1（自连接）是一个更快的解决方案。

我在演示 [SQL Query Patterns, Optimized](http://www.slideshare.net/billkarwin/sql-query-patterns-optimized)中比较了几个解决方案与关系划分的性能。自联接解决方案即使针对具有数百万行的表也能在 0.005 秒内工作。

带有全文的选项＃2 无论如何都是不正确的，因为您不会使用`LIKE`全文搜索。你会用`MATCH(info) AGAINST('...' IN BOOLEAN MODE)`. 我不确定您是否可以在`key:value`格式中使用模式。MySQL FTS 更喜欢匹配单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:00:46.120

@比尔卡尔文

如果您要针对 1 个条件执行此操作，则使用这种类似 EAV 的模式会非常快，但如果您针对许多情况执行此操作（尤其是使用混合的 AND 和 OR），它可能会分崩离析。您可以期望的最好的结果是某种超快速的索引合并，这是难以捉摸的。如果您做任何花哨的事情，您将在大多数 DBMS 中获得一个临时表。不过，我想我记得读过你不是 EAV 的粉丝，也许我误解了你。

我记得，DBMS 也可以自由地进行多次扫描，然后使用一次性位图索引来处理。但是全文索引使文档列表保持排序，并使用 FTS 规划器在所有标准上进行低成本合并，该规划器从战略上从稀有关键字开始。这就是他们整天执行“word1 & word2”所做的一切。它们针对这类事情进行了优化。

因此，如果您有很多简单的事实，我认为 FTS 索引是一种不错的方法。我错过了什么吗？您只需将事实更改为可索引的内容，如 COLORID_3，然后搜索“COLORID_3 & SOMETHINGELSEID_5”。

如果查询不涉及合并或排序，我怀疑它几乎是清洗。这里除了我们 BTREEs 什么都没有......

# windows-phone-7 - 为 wp7 保存多个复选框的状态

> ID：15907314
> 
> 赞同：1
> 
> 时间：2013-04-09T16:23:01.630
> 
> 标签：windows-phone-7

我创建了一个按钮来创建多个复选框。wp7 的点击次数。在我用于它的代码下方。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
   <TextBox x:Name="txtNewTask" HorizontalAlignment="Left" Height="72" TextWrapping="Wrap" VerticalAlignment="Top" Width="328"/>
   <Button x:Name="btnAdd" Content="add" HorizontalAlignment="Left" Margin="328,0,0,0" VerticalAlignment="Top" Width="123" Click="btnAdd_Click"/>
   <ListBox x:Name="lbToDoList" Margin="0,72,0,0">
   <ListBox.ItemTemplate>
       <DataTemplate>
         <CheckBox Click="CheckBox_Click" Background="{x:Null}">
           <StackPanel Orientation="Horizontal">
             <TextBlock Text="{Binding}" Name="tbkTextName" VerticalAlignment="Center"     Margin="5,0,5,0" />
           </StackPanel>
         </CheckBox>
       </DataTemplate>
     </ListBox.ItemTemplate>
   </ListBox>
</Grid> 
```

现在，当我退出并重新打开我的应用程序时，我注意到复选框未选中（默认状态）并且其状态未保存。你能帮我保存多个复选框的值或状态吗？

谁能帮我**保存多个复选框的状态**。在此先感谢您的帮助！

![创建的复选框的图像](https://i.stack.imgur.com/AeBHr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:57:12.657

使用[IsolatedStorage.ApplicationSettings](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.applicationsettings%28v=vs.95%29.aspx)

这是访问应用程序设置的两种辅助方法

```
 /// Get the current value of the setting, or if it is not found, set the 
    /// setting to the default setting.
    protected valueType GetValueOrDefault<valueType>(string Key, valueType defaultValue)
    {
        valueType value;
        object storedValue = null;

        try
        {
            if (_isolatedStore.TryGetValue(Key, out storedValue))
            {
                value = (valueType)(_isolatedStore[Key] ?? defaultValue);
            }
            else
            {
                //the key was not found
                value = defaultValue;
            }
        }
        catch (Exception ex)
        {
            value = defaultValue;
            Logger.Error(ex, "Exception while getting IsolatedStorageSettings: ");
        }

        return value;
    }

    protected bool AddOrUpdateValue(string Key, Object value)
    {
        bool valueChanged = false;
        object storedValue = null;

        try
        {
            if (_isolatedStore.TryGetValue(Key, out storedValue))
            {
                if (storedValue != value)
                {
                    _isolatedStore[Key] = value;
                    valueChanged = true;
                }
            }
            else
            {
                //the key was not found
                _isolatedStore.Add(Key, value);
            }
        }
        catch (Exception ex)
        {
            Logger.Error(ex, "Exception while adding IsolatedStorageSettings.");
        }

        return valueChanged;
    } 
```

然后，您可以像这样在由 IsolatedStorage 支持的某些设置类或视图模型上创建一个属性。

```
 string CheckBoxValueKeyName = "checkbox_value";
    bool CheckBoxValueDefault = false;

    public bool CheckBoxValue
    {
        get
        {
            return GetValueOrDefault<bool>(CheckBoxValueKeyName, CheckBoxValueDefault );
        }
        set
        {
            AddOrUpdateValue(CheckBoxValueKeyName, value);
        }
    } 
```

如果您不想立即将选中框的更改应用到隔离存储，[WP7 Tombstone Helper](http://tombstonehelper.codeplex.com/)是一种在应用程序墓碑后保持控件状态的快速方法。所以，是的，对于应用程序关闭后的持久存储，请使用独立存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:17:07.970

您需要将数据保存到应用程序未运行的时间。对于我使用的那个员工`IsolatedStorage`。你可以保存任何你需要的东西。我找到了很棒的[教程](http://www.geekchamp.com/tips/all-about-wp7-isolated-storage-read-and-save-text-files)，它是如何实现的。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:26:00.520

我认为最好的方法是在复选框更改时立即保存它的值。为此，您可以执行以下操作：

假设 myPage.xaml 中的复选框如下所示：

```
<CheckBox Content="{Binding Title}" Name="myAutoSavingCheckBox" Click="myAutoSavingCheckBox_Click"/> 
```

在 myPage.xaml.cs 中，您必须定义以下方法：

```
private void myAutoSavingCheckBox_Click(object sender, RoutedEventArgs e)
    {
        App.ViewModel.MyProperty = myAutoSavingCheckBox.IsChecked;
    } 
```

在`App.ViewModel`App.xaml.cs 中声明：

```
public partial class App : Application
{
...
    public static MainViewModel ViewModel
    {
        get
        {
            // Erstellung des Ansichtsmodells verzögern bis erforderlich
            if (viewModel == null)
                viewModel = new MainViewModel();

            return viewModel;
        }
    }
...
} 
```

现在您在 MainViewModel.cs 中定义您的属性和保存函数，如下所示：

```
public class MainViewModel
{
    private bool? myProperty;
    public bool? MyProperty
    {
        get
        {
            return myProperty;
        }
        set
        {
            if (value != myProperty)
            {
                myProperty = value;
                SaveSetting("MyProperty", myProperty);
            }
        }
    }

    public void SaveSettings(string whatShallBeSavedKey, object whatShallBeSavedValue)
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains("whatShallBeSavedKey"))
            IsolatedStorageSettings.ApplicationSettings["whatShallBeSavedKey"] = whatShallBeSavedValue;
        else
            IsolatedStorageSettings.ApplicationSettings.Add("whatShallBeSavedKey", whatShallBeSavedValue);
    }
} 
```

# javascript - 使用 d3py 使用 Python 生成的冲积图或桑基图？

> ID：15907318
> 
> 赞同：1
> 
> 时间：2013-04-09T16:23:12.167
> 
> 标签：javascript, python, d3.js, sankey-diagram, d3py

我想使用[d3py](https://github.com/mikedewar/d3py)、 d3.js 及其[sankey.js](https://github.com/d3/d3-plugins/tree/master/sankey)插件创建一个 Sankey 或冲积图，但我不知道如何从 d3py 访问这个 JavaScript 库和插件。

有人可以让我从这里开始吗？

# css - 重置计数器重置 CSS 值

> ID：15907322
> 
> 赞同：3
> 
> 时间：2013-04-09T16:23:24.420
> 
> 标签：css, list, inheritance, html-lists, counter

我正在努力进行计数器重置，重置似乎正在应用，但随后的值似乎会根据重置之前的值增加。

```
<head>
<style>
ol.list-number2{
   text-indent:10px;   
}
ol{
    list-style-type: decimal;
}
ol > li{
    display:inline;
}

/* Set the base count at 0 */
body{
   counter-reset:first 1 second 1;
}

/* Reset the count when the start class is available */
ol.list-start-number1:before{ counter-reset: first 0 second 0;}
ol.list-start-number2:before{ counter-reset: second 0; }

/* Prepend the ols with the counter and increment the counter */
.list-number1:before{
    content:counter(first) ". ";
    counter-increment: first 1;
}
.list-number2:before{
    content: "1." counter(second) ". ";
    counter-increment: second 1;
}
</style>
</head>
<body>
    <div id="magicdomid25" class="ace-line">
        <ol class="list-start-number1 list-number1"><li><span class="a9z">test</span></li></ol>
    </div>
    <div id="magicdomid21231236" class="ace-line">
        <ol class="list-start-number2 list-number2"><li><span class="a9z">tesdfsdfsting</span>    </li></ol>
    </div>
    <div id="magicdomid31231230" class="ace-line">
        <ol class="list-number2"><li><span class="a9z">tessdfsdftyy</span></li></ol>
    </div>
    <div id="magicdomid26123" class="ace-line">
        <ol class="list-number2"><li><span class="a9z">tessdfsdfting</span></li></ol>
    </div>
    <div id="magicdomid30" class="ace-line">
        <ol class="list-number1"><li><span class="a9z">testyy should be two!</span></li></ol>
    </div>

    <!-- First list has ended -->

    <div id="magicdomid30" class="ace-line">
        <span>FEAR ME foo I am the resetter of counters</span>
    </div>

    <!-- Second list begins -->

    <div id="magicdomid25" class="ace-line">
        <ol class="list-start-number1 list-number1"><li><span class="a9z">I should be 1</span></li></ol>
    </div>
    <div id="magicdomid25" class="ace-line">
        <ol class="list-start-number2 list-number2"><li><span class="a9z">I should be 1.1</span></li></ol>
    </div>
    <div id="magicdomid25" class="ace-line">
        <ol class="list-number2"><li><span class="a9z"><b>I should be 1.2 but I'm not! :(</b></span></li></ol>
    </div>
    <div id="magicdomid25" class="ace-line">
        <ol class="list-number2"><li><span class="a9z"><b>I should be 1.3 but I'm not! :(</b></span></li></ol>
    </div>
    <div id="magicdomid25" class="ace-line">
         <ol class="list-number1"><li><span class="a9z"><b>I should be 2 but I'm not</b></span></li></ol>
    </div>
</body> 
```

小提琴：http: [//jsfiddle.net/E8XFK/85/](http://jsfiddle.net/E8XFK/85/)

我想我误解了反继承是如何工作的？

在这里修改 DOM 不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:13:31.313

计数器是可继承的，这意味着它们遵循 css 继承样式 - 定义在顶部的计数器将在底部可见。它们在同一文档级别上也是可见的，即所有兄弟节点也将看到先前定义的计数器。Counter-reset 创建一个新的命名计数器。由于您具有 DIV > OL 类型结构，因此在 OL 级别上定义的任何计数器都不会在下一行的 DIV > OL 上可见。你在这里基本上做的是在每一行上定义和使用新的计数器，因此它们不会正确增加。正文样式定义了全局计数器，该计数器用于您不“重置”计数器的行，因此您会看到从“第二个”项目开始的错误编号。

正确的解决方案是在行级别（具有 ace-line 类的 DIV）上创建计数器，以便它们在行内和下一行中可见。

```
<div id="magicdomid25" class="ace-line list-start-number1">
    <ol class="list-number1"><li><span class="a9z">I should be 1</span></li></ol>
</div> 
```

小提琴：http: [//jsfiddle.net/E8XFK/92/](http://jsfiddle.net/E8XFK/92/)

# java - Not doing Animations and Moving to the next screen

> ID：15907327
> 
> 赞同：0
> 
> 时间：2013-04-09T16:23:41.030
> 
> 标签：java, android, eclipse

I'm going through the Sams Android Development book, and I put an animation code and a code to move it to the next screen. I tested it on my phone and the AVD and it's not working. Here's the code:

```
public class QuizSplashActivity extends QuizActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    TextView logo1 = (TextView) findViewById(R.id.TextViewTopTitle);
    Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo1.startAnimation(fade1);

    TextView logo2 = (TextView) findViewById(R.id.BottomView1);
    Animation fade3 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo1.startAnimation(fade3);

    Animation spinin= AnimationUtils.loadAnimation(this, R.anim.custom_anim);
    LayoutAnimationController controller = new LayoutAnimationController(spinin);
    TableLayout table = (TableLayout) findViewById(R.id.TableLayout01); {
    for (int i = 0; i < table.getChildCount(); i++) {
        TableRow row = (TableRow) table.getChildAt(i);
        row.setLayoutAnimation(controller);
    }
    }

Animation fade2 = AnimationUtils.loadAnimation(this,  R.anim.custom_anim);
fade2.setAnimationListener(new AnimationListener() {
    public void onAnimationEnd(Animation animation){
        startActivity(new Intent(QuizSplashActivity.this, QuizMenuActivity.class));
        QuizSplashActivity.this.finish();
    }
    public void onAnimationStart(Animation a) { }
    public void onAnimationRepeat(Animation a) { }
});
}

@Override
protected void onPause() {
    super.onPause();
    TextView logo1= (TextView) findViewById(R.id.TextViewTopTitle);
            logo1.clearAnimation();
    TextView logo2= (TextView) findViewById(R.id.BottomView1);
            logo2.clearAnimation();

}
}
` 
```

Please help, I want to move onto the next chapter.

Again, if I run this code, the animation doesn't run and the app doesn't move onto the next screen.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:32:12.760

First of all, `onAnimationEnd` of `fade2` is where you start your next Activity but I don't see you using it anywhere.

I think you've got confused about which views you want to animate and which animations to use here:

```
 TextView logo1 = (TextView) findViewById(R.id.TextViewTopTitle);
    Animation fade1 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo1.startAnimation(fade1); // <----- is this right?

    TextView logo2 = (TextView) findViewById(R.id.BottomView1);
    Animation fade3 = AnimationUtils.loadAnimation(this, R.anim.fade_in);
    logo1.startAnimation(fade3); // <----- and this one? 
```

Also, `onAnimationEnd` is not reliable. You can take a look at `setRepeatCount()` and `setRepeatMode()` and play around with those but there are multiple bugs with them and worse, those bugs vary between Android version.

Instead, you can use a delayed Runnable to do your "post animation" work:

```
new Handler().postDelayed(new Runnable() {
    public void run() {

        view.clearAnimation();  // <--- whichever view you are animating

        startActivity(new Intent(QuizSplashActivity.this, QuizMenuActivity.class));
        QuizSplashActivity.this.finish();
    }
}, fade2.getDuration()); 
```

This runnable will be delayed for however long `fade2` is set to animate for. When it fires, it clears the current animation and starts the activity.

Good luck!

# java - 在阻止 GUI 时更新 Swing 组件

> ID：15907330
> 
> 赞同：1
> 
> 时间：2013-04-09T16:23:47.013
> 
> 标签：java, swing, swingworker

我今天正在编写一个 GUI，它在按下按钮时会进行更长的计算。在计算运行时，我想使用仍在运行的计算的中间结果并将它们写入 JLabel。然而，在计算完成之前，用户不应操作 GUI。起初我在做这样的事情：

(1)

```
public class GUI extends JFrame {

    JLabel label = new JLabel("Status: ");
    public GUI(){...}

    public void calculate() {
        for(int i = 0; i < 10; i++) {
            String one = calculationPartOne(i);
            label.setText("Status: " + one);
            label.repaint();  //*
            calculationPartTwo(i);
        }
    }
} 
```

这不起作用，JLabel 只会在计算完成后更新。我还尝试 .repaint() 和 .validate() 注释 * 行中涉及的所有组件，但它什么也没做。因此，在尝试和搜索 Google/StackoOverflow 一整天后，我终于有了一个可行的解决方案，但我仍然不明白为什么上面不起作用。我希望 GUI 阻塞，所以我很自然地在同一个线程中运行了计算。但是，调用任何方法来重新绘制 GUI -inbetween-计算（在 GUI 更新时停止计算）不起作用，我不明白为什么。有人可以解释吗？

最后，我使用 SwingWorker 类进行计算，并使用它的函数在计算时更新 JLabel。但是，由于我需要阻止 GUI，我现在在执行 SwingWorker 之前禁用所有组件，并在完成计算后让 SwingWorker 重新启用所有组件。所以，我使用 SwingWorker 来不阻止 EDT，然后“假”通过禁用一切来阻止 EDT？这对我来说似乎真的很矛盾。

这是我现在所拥有的大纲：

```
public class GUI extends JFrame {
    JLabel label = new JLabel("Status: ");
    //I didn't use a list, but it works to illustrate it here
    List<Component> GUIComponents = ...; 
    public GUI() {...}

    public void calculate() {
        SwingWorker<Void, String> worker = new SwingWorker<Void, String>() {
            protected Void doInBackground() throws Exception {
                for(int i = 0; i < 10; i++) {
                    String one = calculationPartOne(i);
                    publish(one);
                    calculationPartTwo(i); //**
                }
            }

            protected void done() {
                setEnableGUI(true);
            }

            protected void process(List<String> chunk) {
                label.setText(chunk.get(chunk.size() - 1));
            }
        };
        setEnableGUI(false);
        worker.execute();
    }

    public void setEnableGUI(boolean e) {
        for(Component c : GUIComponents) {
            c.setEnabled(e);
        }
    }

    //**
    public void calculationPartTwo() {...}
} 
```

这行得通。

我希望有人能澄清一下。这个解决方案感觉不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:28:48.247

为什么错了？gui 线程仅用于响应用户事件 - 因此您应该在后台进行繁重的工作 - 这就是您使用 SwingWorker 所做的事情。

此外，防止用户更改组件的最佳方法就是做到这一点 - 在开始举重之前禁用组件，并在完成后启用。

您可能要考虑的唯一一件事是在模式对话框中显示计算结果 - 一个 JDialog 将弹出父窗口上方并阻止它。您可以在此对话框中显示中间结果和进度，然后一旦计算完成，对话框将关闭并解锁被它遮挡的 UI。这将使您不必在循环中单独禁用所有 gui 组件，并且还可以让您选择“取消”按钮来立即停止工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:35:12.407

> 但是，调用任何方法来重新绘制 GUI -inbetween-计算（在 GUI 更新时停止计算）不起作用，我不明白为什么。有人可以解释吗？

repaint() 请求由 RepaintManager 处理，不会立即完成。RepaintManager 基本上会安排重绘。由于重绘是在 EDT 上完成的，因此在 EDT 空闲之前无法完成。

> 所以，我使用 SwingWorker 来不阻止 EDT，然后“假”通过禁用一切来阻止 EDT？这对我来说似乎真的很矛盾。

您始终可以使用不确定的 JProgressBar。请参阅[如何使用进度条](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)。

或者，您可能更喜欢使用[Disabled Glass Pane](http://tips4java.wordpress.com/2008/11/07/disabled-glass-pane/)方法。

在某些情况下，您可以使用：

```
label.paintImmediately(...); 
```

强制重新绘制组件。但是您仍然遇到禁用 GUI 的问题，因此它可能不是您真正应该使用的解决方案。

# c# - 处理 SqlCeDataReader 是个好主意吗？

> ID：15907333
> 
> 赞同：0
> 
> 时间：2013-04-09T16:24:04.833
> 
> 标签：c#, sql-server-ce, windows-ce, .net-1.0, sqlcedatareader

在试图追踪仅在某些情况下发生的空引用异常的原因时，我遇到了以下代码：

```
SqlCeDataReader IdValsReader = IdValsCMD.ExecuteReader();
if ((IdValsReader.Read()) && (!IdValsReader.IsDBNull(0)))
{
    return string.Format("{0};{1};{2};{3};{4};{5};{6};{7};", 
        IdValsReader.GetValue(DESCRIPTION_INDEX),
        . . .
}
IdValsReader.Close(); 
```

...并想知道我是否应该在 IdValsReader.Close() 之后添加这一行：

```
IdValsReader.Dispose(); 
```

我确实这样做了，但似乎没有什么区别；我应该把它留在里面还是去掉它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:27:12.887

来自 MSDN：[Dispose 方法] 释放 DbDataReader 使用的资源并调用 Close。

因此，一旦您完成了阅读器，调用 dispose 似乎是明智的。更好的是，将它全部包装在一个 Using 块中，然后忘记它。

# c# - 在客户端发出第一个请求后，我无法保持客户端连接到服务器或发送任何内容

> ID：15907334
> 
> 赞同：0
> 
> 时间：2013-04-09T16:24:04.977
> 
> 标签：c#, sockets, asynchronous

在客户端发出第一个请求后，我无法保持客户端连接到服务器或发送任何内容。而且我知道这是因为我在“SendCallback”方法中关闭并关闭了我的套接字，否则它将向客户端发送垃圾邮件，直到客户端拒绝连接。**我能做些什么来解决这个问题？**希望我的解释足够清楚。

```
public class StateObject
{
// Client  socket.
public Socket workSocket = null;
// Size of receive buffer.
public const int BufferSize = 1024;
// Receive buffer.
public byte[] buffer = new byte[BufferSize];
// Received data string.
public StringBuilder sb = new StringBuilder();
}

public class AsynchronousSocketListener
{
// Thread signal.
public static ManualResetEvent allDone = new ManualResetEvent(false);

public static ArrayList terminal = new ArrayList();

private List<StateObject> clients;

public AsynchronousSocketListener()
{
}

public static void StartListening()
{
    // Data buffer for incoming data.
    byte[] bytes = new Byte[1024];

    // Establish the local endpoint for the socket.
    IPHostEntry ipHostInfo = Dns.Resolve("192.168.1.75");
    IPAddress ipAddress = ipHostInfo.AddressList[0];
    IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 10008);

    // Create a TCP/IP socket.
    Socket listener = new Socket(AddressFamily.InterNetwork,
        SocketType.Stream, ProtocolType.Tcp);

    // Bind the socket to the local endpoint and listen for incoming connections.
    try
    {
        listener.Bind(localEndPoint);
        listener.Listen(100);

        while (true)
        {
            // Set the event to nonsignaled state.
            allDone.Reset();

            // Start an asynchronous socket to listen for connections.
            Console.WriteLine("Waiting for a connection...");
            listener.BeginAccept(
                new AsyncCallback(AcceptCallback),
                listener);

            // Wait until a connection is made before continuing.
            allDone.WaitOne();
            Console.WriteLine("Terminal Connected");
        }

    }
    catch (Exception e)
    {
        Console.WriteLine(e.ToString());
    }

    Console.WriteLine("Press ENTER to continue...");
    Console.Read();

}

public static void AcceptCallback(IAsyncResult ar)
{
    // Signal the main thread to continue.
    allDone.Set();

    // Get the socket that handles the client request.
    Socket listener = (Socket)ar.AsyncState;
    Socket handler = listener.EndAccept(ar);

    // Create the state object.
    StateObject state = new StateObject();
    state.workSocket = handler;
    handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReadCallback), state);
}

public static void ReadCallback(IAsyncResult ar)
{
    String content = String.Empty;

    // Retrieve the state object and the handler socket
    // from the asynchronous state object.
    StateObject state = (StateObject)ar.AsyncState;
    Socket handler = state.workSocket;

    // Read data from the client socket. 
    int bytesRead = handler.EndReceive(ar);

    if (bytesRead > 0)
    {
        // There  might be more data, so store the data received so far.
        state.sb.Append(Encoding.ASCII.GetString(
            state.buffer, 0, bytesRead));

        content = state.sb.ToString();
        Console.WriteLine( content );

        Send(handler);
     }
     else
     {
         Console.WriteLine("Failed to collect data.");
            // Not all data received. Get more.
            // Code would loop, leaving the server without answer.
            /*handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReadCallback), state);*/
     }

}

private static void Send(Socket handler)
{
    String data = String.Empty;

    Console.WriteLine("Sent Back:");
    data = ("002BSLL01V01000     DF02V0110");
    Console.WriteLine(data);

    // Convert the string data to byte data using ASCII encoding.
    byte[] byteData = Encoding.ASCII.GetBytes(data);

    // Begin sending the data to the remote device.
    handler.BeginSend(byteData, 0, byteData.Length, 0,
        new AsyncCallback(SendCallback), handler);
}

private static void SendCallback(IAsyncResult ar)
{
    try
    {
        // Retrieve the socket from the state object.
        Socket handler = (Socket)ar.AsyncState;

        // Complete sending the data to the remote device.
        int bytesSent = handler.EndSend(ar);
        Console.WriteLine("Sent {0} bytes to client.", bytesSent);

        Send(handler);

        handler.Shutdown(SocketShutdown.Both);
        handler.Close();

    }
    catch (Exception e)
    {
        Console.WriteLine(e.ToString());
    }
}

public static int Main(String[] args)
{
    StartListening();
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:51:34.427

> 我知道这是因为我在“SendCallback”方法中关闭并关闭了我的套接字

当然是。

> 但否则它将向客户端发送垃圾邮件

定义“发送给客户的垃圾邮件”。

> 直到客户端拒绝连接。

你的意思是客户端*关闭*连接？连接已经存在，不能“拒绝”。

> 我能做些什么来解决这个问题？

不要关闭套接字；不要关闭它；并解决“发送给客户的垃圾邮件”所描述的*问题*，无论这意味着什么。

> 希望我的解释足够清楚。

一点也不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:27:55.353

当您在 ReadCallback 中收到数据时，然后（即使您没有收到您期望的所有数据）调用 Send()，然后执行异步发送，然后在发送回调中再次调用 Send()，我认为，这就是您向客户端发送垃圾邮件的意思，因为这只会循环一遍又一遍地向客户端发送相同的内容。

我建议您首先检查您收到的内容，receive 调用完全有可能不会一次性返回您期望的所有数据。如果您不想再次向客户端发送数据，则不要在 SendCallback 中调用 Send。

哦，删除关闭和关闭套接字的调用......

# ruby-on-rails - 如何模拟我 Rails 应用程序所依赖的 json 服务？

> ID：15907338
> 
> 赞同：0
> 
> 时间：2013-04-09T16:24:08.947
> 
> 标签：ruby-on-rails, rspec, cucumber, integration-testing

如果我的 Rails 应用程序调用不同的 API（基于 json），在为这些创建模拟方面我有哪些选择？

我看到一个视频，其中有人打开了一个终端并实际运行了一个为这些服务创建模拟的脚本，但它正在运行另一个不在您的 rspec 代码等中执行此操作的进程。

有谁知道那可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:34:01.503

您可能需要考虑使用 VCR gem：[https](https://github.com/vcr/vcr) ://github.com/vcr/vcr 。

此 Railscast 中也对此进行了描述：[http ://railscasts.com/episodes/291-testing-with-vcr](http://railscasts.com/episodes/291-testing-with-vcr)

# javascript - Html/Javascript - Onfocus 事件

> ID：15907340
> 
> 赞同：1
> 
> 时间：2013-04-09T16:24:10.350
> 
> 标签：javascript, html

因此，我试图确保我正在处理的页面可以跨浏览器工作，为此我尝试在`<script>`标签中调用“onfocus”事件 - 不幸的是，我尝试过的方法不起作用，目前我不确定为什么。任何建议/反馈将不胜感激。

```
<input name="searchField" placeholder="Search users" type="text" size="60"
    maxlength="150" id="SearchBox" style="margin-top:15px; height:auto;" />

<script type="text/javascript">
    if (!("placeholder" in document.createElement("input"))) {
        document.getElementsByName("searchField")[0].value = 'Search users';
        document.getElementsByName("searchField")[0].onfocus =
            'document.getElementsByName("searchField")[0].value="";';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:27:21.320

添加事件的更好方法是：

```
document.getElementsByName("searchField")[0].onfocus = function () {
    document.getElementsByName("searchField")[0].value = "";
                                // ^ fixed that typo
    this.value = ""; // also works, `this` is a magic variable
}; 
```

您可以继续输入 JavaScript 而不是分配字符串并依赖`eval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:36:36.343

这是工作..

```
<input name="searchField" placeholder="Search users" type="text" size="60" maxlength="150" id="SearchBox" style="margin-top:15px; height:auto;"/>
      <script type="text/javascript">
        if (!("placeholder" in document.createElement("input")))
        {
            document.getElementsByName("searchField")[0].value='Search users';
            document.getElementsByName("searchField")[0].onfocus=function(){
                 document.getElementsByName("searchField")[0].value="";
            };
        }
    </script> 
```

# c# - 找不到命名空间名称“DispatcherTimer”

> ID：15907349
> 
> 赞同：2
> 
> 时间：2013-04-09T16:24:30.283
> 
> 标签：c#, reference, namespaces, .net-assembly, dispatchertimer

我正在尝试使用调度计时器，但我的 c# 应用程序找不到命名空间。这是错误：

> 找不到类型或命名空间名称“DispatcherTimer”（您是否缺少 using 指令或程序集引用？）

这是我正在使用的：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Globalization;
using System.Text;
using System.Threading;
using System.Timers;
using System.Windows.Forms; 
```

这是代码：

```
DispatcherTimer timer1 = new DispatcherTimer(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T16:25:56.610

[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)不是命名空间 - 它是[`System.Windows.Threading`](http://msdn.microsoft.com/en-us/library/ms604616.aspx)命名空间和`WindowsBase`程序集中的一个类。所以你需要

```
using System.Windows.Threading; 
```

通常，搜索缺少的类型名称和“MSDN”就足以找出在哪里可以找到类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-04T11:45:13.010

Dispatcher 类位于 WindowsBase.dll 中。您必须将该引用添加到您的项目中才能使用“使用 System.Windows.Threading;” <>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:26:15.720

使用以下方法添加：

```
using System.Windows.Threading; 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:26:00.797

不在 System.Windows.Threading 命名空间中，也不在 System.Threading 命名空间中？

[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-19T00:34:30.757

您必须在引用中添加 WindowsBase，以便您可以使用 System.Windows.Threading。

# mysql - 根据 sqlserver/ssis 中的非空条件将表拆分为多个表

> ID：15907350
> 
> 赞同：1
> 
> 时间：2013-04-09T16:24:34.697
> 
> 标签：mysql, sql, sql-server, sql-server-2008, ssis

我有一个场景，我有一个输入表表（动态表的列数不固定），如下所示，需要基于非空值获取多个表

输入表

```
ID  Name    Mobile  Year    value
1   john    1238769 2001    35
2   tommy   3423456 2001    56
3   smith   8761934 2007    65
4   NULL    4783921 2005    78
5   robert  8549543 2008    18
6   mary    5648404 2011    40
7   NULL    6729113 2003    59
8   NULL    NULL    2006    10
9   cathy   NULL    2010    35
10  jessi   NULL    2012    45 
```

所以我需要一些基于非空的下表

输出表1

```
ID  Name    Mobile  Year    value
1   john    1238769 2001    35
2   tommy   3423456 2001    56
3   smith   8761934 2007    65
5   robert  8549543 2008    18
6   mary    5648404 2011    40 
```

输出表 2

```
ID  Mobile  Year    value
4   4783921 2005    78
7   6729113 2003    59 
```

输出表3

```
ID  Name    Year    value
9   cathy   2010    3578
10  jessi   2012    45 
```

最后输出表4

```
ID  Year    value
8   2006    10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:39:33.233

```
INSERT INTO OutputTable1
SELECT yourtable.*
FROM yourtable
WHERE Name IS NOT NULL and Mobile IS NOT NULL

INSERT INTO OutputTable2
SELECT yourtable.*
FROM yourtable
WHERE Name IS NULL and Mobile IS NOT NULL

INSERT INTO OutputTable3
SELECT yourtable.*
FROM yourtable
WHERE Name IS NOT NULL and Mobile IS NULL

INSERT INTO OutputTable4
SELECT yourtable.*
FROM yourtable
WHERE Name IS NULL and Mobile IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:58:16.793

由于列数未知（可能还有它们的名称），您将不得不使用动态 SQL。假设输入表有一个 PK 并且 PK 的名称是事先知道的，或者可以很容易地确定，这是解决问题的一种方法：

1.  查询元数据以确定表的列名。

2.  使用名称列表，构建并执行一个查询，该查询将：

    *   unpivot 所有数据（非 PK）列（显然将它们全部转换为字符串）；

    *   将 PK 的未透视结果集和`GROUP_CONCAT`名称分组到两个列表中：

        1) 具有非空值的列，形式为`'name1,name2,...'`, as `SelectList`,

        2) 具有空值的列，如下所示：`'name1 IS NULL AND name2 IS NULL AND ...'`, as `NullCondition`;

3.  使用上一个结果集和以下模板中的 distinct`SelectList`和`NullCondition`值，构建一系列查询以从原始表中检索数据：

    ```
    ' SELECT ' + SelectList +
    ' FROM yourtable' +
    ' WHERE ' + NullCondition 
    ```

我不确定在这两种产品中的哪一种（SQL Server 或 MySQL）中实现上述功能会更方便。确实，SQL Server 没有像 MySQL 那样的专用聚合连接函数`GROUP_CONCAT`。不过，解决方法[并非未知](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005 "在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？")。另一方面，MySQL 不支持`UNPIVOT`SQL Server 拥有的这个非常方便的子句。但同样，也`UNPIVOT` [存在](https://stackoverflow.com/questions/15184381/mysql-turn-table-into-different-table "MySQL - 将表变成不同的表")使用的替代方案。

# c# - 如何使用异步等待模式初始化对象

> ID：15907356
> 
> 赞同：22
> 
> 时间：2013-04-09T16:24:48.533
> 
> 标签：c#, design-patterns, ninject, async-await, raii

我试图在我的服务类中遵循 RAII 模式，这意味着当一个对象被构造时，它会被完全初始化。但是，我在使用异步 API 时遇到了困难。有问题的类的结构如下所示

```
class ServiceProvider : IServiceProvider // Is only used through this interface
{
    public int ImportantValue { get; set; }
    public event EventHandler ImportantValueUpdated;

    public ServiceProvider(IDependency1 dep1, IDependency2 dep2)
    {
        // IDependency1 provide an input value to calculate ImportantValue
        // IDependency2 provide an async algorithm to calculate ImportantValue
    }
} 
```

我的目标还在于消除`ImportantValue`getter 中的副作用，使其成为线程安全的。

现在 的用户`ServiceProvider`将创建它的一个实例，订阅一个`ImportantValue`更改事件，并获取初始的`ImportantValue`. 问题来了，初始值。由于`ImportantValue`是异步计算的，因此无法在构造函数中完全初始化该类。最初将此值设置为 null 可能没问题，但随后我需要有一些地方可以第一次计算它。一个自然的地方可能是`ImportantValue`'getter，但我的目标是使其成为线程安全且没有副作用的。

所以我基本上被这些矛盾所困扰。你能帮助我并提供一些替代方案吗？在构造函数中初始化值虽然 nice 并不是真正必要的，但没有副作用和属性的线程安全是强制性的。

提前致谢。

**编辑：**还要添加一件事。我正在使用 Ninject 进行实例化，据我了解，它不支持异步方法来创建绑定。虽然在构造函数中启动一些基于任务的操作的方法会起作用，但我不能等待它的结果。

即两种下一个方法（到目前为止作为答案提供）将无法编译，因为返回的是 Task，而不是我的对象：

```
Kernel.Bind<IServiceProvider>().ToMethod(async ctx => await ServiceProvider.CreateAsync()) 
```

或者

```
Kernel.Bind<IServiceProvider>().ToMethod(async ctx => 
{
    var sp = new ServiceProvider();
    await sp.InitializeAsync();
}) 
```

简单的绑定将起作用，但我不等待在构造函数中启动的异步初始化的结果，正如 Stephen Cleary 所提出的：

```
Kernel.Bind<IServiceProvider>().To<ServiceProvider>(); 
```

......这对我来说并不好。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-09T16:37:39.137

我有一篇博客文章描述[了几种`async`构造](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)方法。

我推荐 Reed 描述的异步工厂方法，但有时这是不可能的（例如，依赖注入）。在这些情况下，您可以使用这样的异步初始化模式：

```
public sealed class MyType
{
    public MyType()
    {
        Initialization = InitializeAsync();
    }

    public Task Initialization { get; private set; }

    private async Task InitializeAsync()
    {
        // Asynchronously initialize this instance.
        await Task.Delay(100);
    }
} 
```

然后您可以正常构造类型，但请记住，构造仅*启动*异步初始化。当您需要初始化类型时，您的代码可以执行以下操作：

```
await myTypeInstance.Initialization; 
```

请注意，如果`Initialization`已经完成，则执行（同步）继续超过`await`.

* * *

如果您确实想要一个实际的[异步属性，我也有一篇博客文章。](http://blog.stephencleary.com/2013/01/async-oop-3-properties.html)您的情况听起来可能会受益于`AsyncLazy<T>`：

```
public sealed class MyClass
{
    public MyClass()
    {
        MyProperty = new AsyncLazy<int>(async () =>
        {
            await Task.Delay(100);
            return 13;
        });
    }

    public AsyncLazy<int> MyProperty { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T16:29:52.373

一种可能的选择是将其移至工厂方法而不是使用构造函数。

然后，您的工厂方法可以返回 a `Task<ServiceProvider>`，这将允许您异步执行初始化，但在（异步）计算`ServiceProvider`之前不返回构造的。`ImportantValue`

这将允许您的用户编写如下代码：

```
var sp = await ServiceProvider.CreateAsync();
int iv = sp.ImportantValue; // Will be initialized at this point 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-06T21:53:58.103

这是对异步初始化的@StephenCleary 模式的轻微修改。

不同之处在于调用者不需要“记住” `await`，`InitializationTask`甚至不需要知道关于 的任何信息`initializationTask`（实际上它现在已更改为私有）。

它的工作方式是在每个使用初始化数据的方法中都有一个对`await _initializationTask`. 这第二次立即返回 - 因为`_initializationTask`对象本身将有一个布尔集（`IsCompleted`'await' 机制检查） - 所以不要担心它会多次初始化。

我知道的唯一问题是你不能忘记在每个使用数据的方法中调用它。

```
public sealed class MyType
{
    public MyType()
    {
        _initializationTask = InitializeAsync();
    }

    private Task _initializationTask;

    private async Task InitializeAsync()
    {
        // Asynchronously initialize this instance.
        _customers = await LoadCustomersAsync();
    }

    public async Task<Customer> LookupCustomer(string name)
    {
         // Waits to ensure the class has been initialized properly
         // The task will only ever run once, triggered initially by the constructor
         // If the task failed this will raise an exception
         // Note: there are no () since this is not a method call
         await _initializationTask;

         return _customers[name];
    }

    // one way of clearing the cache
    public void ClearCache()
    {
         InitializeAsync();
    }

    // another approach to clearing the cache, will wait until complete
    // I don't really see a benefit to this method since any call using the
    // data (like LookupCustomer) will await the initialization anyway
    public async Task ClearCache2()
    {
         await InitializeAsync();
    }
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-17T01:35:23.107

您可以使用我的[AsyncContainer](https://github.com/RafaelSalguero/AsyncContainer) IoC 容器，它支持与您完全相同的场景。

它还支持其他方便的场景，例如异步初始化器、运行时条件工厂、依赖于异步和同步工厂函数

```
//The email service factory is an async method
public static async Task<EmailService> EmailServiceFactory() 
{
  await Task.Delay(1000);
  return new EmailService();
}

class Service
{
     //Constructor dependencies will be solved asynchronously:
     public Service(IEmailService email)
     {
     }
} 

var container = new Container();
//Register an async factory:
container.Register<IEmailService>(EmailServiceFactory);

//Asynchronous GetInstance:
var service = await container.GetInstanceAsync<Service>();

//Safe synchronous, will fail if the solving path is not fully synchronous:
var service = container.GetInstance<Service>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-02T21:59:28.650

我知道这是一个老问题，但它是第一个出现在 Google 上的问题，坦率地说，接受的答案是一个糟糕的答案。您永远不应该强制延迟，以便您可以使用 await 运算符。

初始化方法的更好方法：

```
private async Task<bool> InitializeAsync()
{
    try{
        // Initialize this instance.
    }

    catch{
        // Handle issues
        return await Task.FromResult(false);
    }

    return await Task.FromResult(true);
} 
```

这将使用异步框架来初始化您的对象，但随后它将返回一个布尔值。

为什么这是一个更好的方法？首先，您不会强制延迟代码，恕我直言，这完全违背了使用异步框架的目的。其次，从异步方法返回一些东西是一个很好的经验法则。这样，您就知道您的异步方法是否真的有效/做了它应该做的事情。仅返回 Task 相当于在非异步方法上返回 void。

# c# - 使用 XmlArray 反序列化 xml 文件？

> ID：15907357
> 
> 赞同：15
> 
> 时间：2013-04-09T16:24:49.110
> 
> 标签：c#, .net, xml, serialization, xml-serialization

我正在尝试反序列化这个 xml 结构。

```
<?xml version="1.0"?>
<DietPlan>
    <Health>
        <Fruit>Test</Fruit>
        <Fruit>Test</Fruit>
        <Veggie>Test</Veggie>
        <Veggie>Test</Veggie>
    </Health>
</DietPlan> 
```

我试过了：

```
[Serializable]
[XmlRoot(ElementName = "DietPlan")]
public class TestSerialization
{
    [XmlArray("Health")]
    [XmlArrayItem("Fruit")]
    public string[] Fruits { get; set; }

    [XmlArray("Health")]
    [XmlArrayItem("Veggie")]
    public string[] Veggie { get; set; }
} 
```

但这会引发异常“XML 元素已存在于当前范围中。使用 XML 属性为元素指定另一个 XML 名称或命名空间。” 谢谢你的建议。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-10T07:01:36.310

您需要一个通用类型才能反序列化您的 XML，并且您可以使用`[XmlElement]`命名空间定义要根据元素名称实例化的类型，如下所示。

```
public class StackOverflow_15907357
{
    const string XML = @"<?xml version=""1.0""?>
                        <DietPlan>
                            <Health>
                                <Fruit>Test</Fruit>
                                <Fruit>Test</Fruit>
                                <Veggie>Test</Veggie>
                                <Veggie>Test</Veggie>
                            </Health>
                        </DietPlan>";

    [XmlRoot(ElementName = "DietPlan")]
    public class TestSerialization
    {
        [XmlArray("Health")]
        [XmlArrayItem("Fruit", Type = typeof(Fruit))]
        [XmlArrayItem("Veggie", Type = typeof(Veggie))]
        public Food[] Foods { get; set; }
    }

    [XmlInclude(typeof(Fruit))]
    [XmlInclude(typeof(Veggie))]
    public class Food
    {
        [XmlText]
        public string Text { get; set; }
    }

    public class Fruit : Food { }
    public class Veggie : Food { }

    public static void Test()
    {
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));
        XmlSerializer xs = new XmlSerializer(typeof(TestSerialization));
        TestSerialization obj = (TestSerialization)xs.Deserialize(ms);
        foreach (var food in obj.Foods)
        {
            Console.WriteLine("{0}: {1}", food.GetType().Name, food.Text);
        }
    }
} 
```

# php - Magento 联系表格重定向

> ID：15907359
> 
> 赞同：1
> 
> 时间：2013-04-09T16:24:51.360
> 
> 标签：php, javascript, forms, magento

我正在构建一个新的站点，该站点有两个联系表单，它们运行在同一个控制器上。目前，联系页面上的表单加载了一条小消息，上面写着“感谢您的询问”等。“图库”页面上的表单一旦提交，就会将用户发送到联系页面并显示相同的消息。

但是我想要的是让用户保持在他们当前所在的页面上，然后显示消息。正是联系页面上当前正在发生的事情。

如果我更改这段代码：

```
$this->_redirect('*/*/'); 
```

在 /code/core/Mage/Contacts/controllers/IndexController.php 我可以让它重定向到主页等，但我只是希望它在我所在的页面上显示消息。

这是我的表单的代码：

```
<form action="<?php echo Mage::getUrl(); ?>contacts/index/post/" id="contactForm" method="post">
<input type='hidden' name='formtype' value='Contact Us Page'/>
        <div class="fieldset">
               <ul class="form-list">
                <li class="fields">
                    <div class="field">
<div class="input-box">
<input onfocus="if(this.value == 'Name'){this.value = '';}"  name="name" id="name" title="<?php echo Mage::helper('contacts')->__('Name') ?>"  class="input-text required-entry" type="text" onblur="if(this.value == ''){this.value='Name';}" value="Name"/>
                        </div>
                    </div>

                     <li>
<div class="input-box">
<input name="company" id="company" onfocus="if(this.value == 'Company'){this.value = '';}" title="<?php echo Mage::helper('contacts')->__('Company') ?>" value="Company" onblur="if(this.value == ''){this.value='Company';}" class="input-text" type="text" />
                    </div>
                </li>
                    <div class="field">
                      <div class="input-box">
<input name="email" id="email" onfocus="if(this.value == 'Email'){this.value = '';}" title="<?php echo Mage::helper('contacts')->__('Email') ?>" value="Email" onblur="if(this.value == ''){this.value='Email';}" class="input-text required-entry validate-email" type="text" />
                        </div>
                    </div>
                </li>

                <li class="wide">
                    <!--<label for="comment" class="required"><em>*</em><?php echo Mage::helper('contacts')->__('Comment') ?></label>-->
                    <div class="input-box">
                        <textarea name="comment" id="comment" onfocus="if(this.value == 'Enquiry details'){this.value = '';}" title="<?php echo Mage::helper('contacts')->__('Comment') ?>" class="required-entry input-text" onblur="if(this.value == ''){this.value='Enquiry details';}" cols="5" value="Enquiry details" rows="3">Enquiry details</textarea>
                    </div>
                </li>
            </ul>
        </div>
        <div class="buttons-set">
<input type="text" name="hideit" id="hideit" value="" style="display:none !important;" />
            <button class="submit" type="submit" title="<?php echo Mage::helper('contacts')->__('Submit') ?>" class="button"><span><span><?php echo Mage::helper('contacts')->__('Submit') ?></span></span></button>
</div>
</form>

<script type="text/javascript">
//<![CDATA[
    var contactForm = new VarienForm('contactForm', true);
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:33:22.250

您可以尝试使用引用 URL

在 /code/core/Mage/Contacts/controllers/IndexController.php

```
 if(Mage::helper('core/http')->getHttpReferer(true)){
    $this->_redirectUrl(Mage::helper('core/http')->getHttpReferer(true)); 
 }
 else{
    $this->_redirect('*/*/');
 } 
```

[Magento 实用功能备忘单](http://www.catgento.com/magento-useful-functions-cheatsheet/)

你也应该避免对核心进行更改，看看@ [Magento：覆盖核心文件（块、模型、资源、控制器）](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)

# java - 无法使用搜索工具在 Liferay Portlet 中搜索期刊文章

> ID：15907360
> 
> 赞同：1
> 
> 时间：2013-04-09T16:24:52.200
> 
> 标签：java, jakarta-ee, liferay, portlet

我正在使用下面的代码，但它无法在 liferay 6.1 中搜索期刊文章/网页内容

```
 package com.abp.portlets;

  import java.io.IOException;

  import javax.portlet.PortletException;
  import javax.portlet.RenderRequest;
  import javax.portlet.RenderResponse;

  import com.liferay.portal.kernel.search.BooleanClauseOccur;
  import com.liferay.portal.kernel.search.BooleanQuery;
  import com.liferay.portal.kernel.search.BooleanQueryFactoryUtil;
  import com.liferay.portal.kernel.search.Field;
  import com.liferay.portal.kernel.search.Hits;
  import com.liferay.portal.kernel.search.ParseException;
  import com.liferay.portal.kernel.search.SearchContext;
  import com.liferay.portal.kernel.search.SearchEngineUtil;
  import com.liferay.portal.kernel.search.SearchException;
  import com.liferay.portal.kernel.util.Validator;
  import com.liferay.portal.kernel.util.WebKeys;
  import com.liferay.portal.theme.ThemeDisplay;
  import com.liferay.util.bridges.mvc.MVCPortlet;

  /**
   * Portlet implementation class Search
   */
  public class Search extends MVCPortlet {

    public void doView(RenderRequest renderRequest, RenderResponse renderResponse)throws IOException, PortletException 
    {
        ThemeDisplay themeDisplay = (ThemeDisplay) 
                renderRequest.getAttribute(WebKeys.THEME_DISPLAY);

        SearchContext searchContext = new SearchContext();
        searchContext.setSearchEngineId(SearchEngineUtil.SYSTEM_ENGINE_ID);
        BooleanQuery contextQuery = BooleanQueryFactoryUtil.create(searchContext);
        contextQuery.addRequiredTerm(Field.COMPANY_ID, themeDisplay.getCompanyId());
        contextQuery.addRequiredTerm(Field.GROUP_ID, themeDisplay.getScopeGroupId());

        BooleanQuery fullQuery = BooleanQueryFactoryUtil.create(searchContext);

        String keywords = "mridul test"; 
         BooleanQuery searchQuery = BooleanQueryFactoryUtil.create(searchContext);

                    if (Validator.isNotNull(keywords)) {
                         keywords = keywords.trim();
                         try {
                            searchQuery.addTerm(Field.TITLE, keywords,true);

                         } catch (ParseException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                    }

                  //  BooleanQuery fullQuery = BooleanQueryFactoryUtil.create(searchContext);

                    //fullQuery.add(contextQuery, BooleanClauseOccur.MUST);

  //                    if (searchQuery.clauses().size() > 0) {
  //                        fullQuery.add(searchQuery, BooleanClauseOccur.MUST);
  //                    }

         System.out.println("fullQuery===============>>"+fullQuery);
        try {
            fullQuery.add(searchQuery, BooleanClauseOccur.MUST);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            Hits hits = SearchEngineUtil.search(searchContext, fullQuery);
            for(int i=0;i<hits.getLength();i++)
            {
            System.out.println(hits.snippet(i).toString());
            }
        } catch (SearchException e) { 
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

  } 
```

我得到的输出是......

**fullQuery===============>>+(+((title:mridul title:test)))**

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:49:42.963

Lucene 使用字段来索引数据。

`searchQuery.addTerm(**Field.CONTENT**, keywords,true);`

或者

`searchQuery.addTerms(new String[]{Field.TITLE,Field.DESCRIPTION,Field.CONTENT}, keywords, true)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T21:05:25.010

看起来您正在搜索确切的短语“mridul test”。我想你可能想搜索“mridul”和“test”。如果是这样，请试一试：

```
String[] terms = keywords.split(" ");
for(String term : terms){
    searchQuery.addTerm(Field.TITLE, term,true);
} 
```

# c# - 在 Windows 窗体中，获取放置另一个控件的控件的最简单方法是什么？

> ID：15907366
> 
> 赞同：0
> 
> 时间：2013-04-09T16:24:56.603
> 
> 标签：c#, winforms, controls

我对找到父控件并不感兴趣。我有兴趣找到对放置给定控件的控件的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:37:52.383

[矩形.包含](http://msdn.microsoft.com/en-us/library/0kh3ee9e.aspx)

```
if (control1.Bounds.Contains(control2.Bounds))
{
    //control1 contains control 2.
} 
```

您可以使用此逻辑来查找控件的引用或放置给定控件的控件的引用。

# c# - 更改命名空间后处理对象反序列化

> ID：15907370
> 
> 赞同：1
> 
> 时间：2013-04-09T16:25:11.607
> 
> 标签：c#, xml-serialization

我想知道在更改类、命名空间后有什么方法可以处理反序列化吗？

目前，我必须对 XML 的文本值进行编辑替换，用新命名空间替换旧命名空间。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:34:20.850

总是一个棘手的问题。除非您可以保证类不会更改，否则最好找到另一种序列化方法。

但是，要回答这个问题，您可以拥有`Version`该类的属性（或者如果您有很多，则将其放入基类中）。每当您更改课程时，您都需要记住增加它。

然后，您可以进行一系列“迁移”，这将知道如何将 XML 从一个版本转换为下一个版本。当您想要反序列化时，首先将文件加载为 XML，依次应用迁移（因为自文件创建以来可能已经发生了几次更改），然后反序列化现在转换的 XML。

# java - 如何在 Java 类中声明 C 嵌套结构

> ID：15907372
> 
> 赞同：1
> 
> 时间：2013-04-09T16:25:26.147
> 
> 标签：java, struct, nested, javolution

我正在尝试将 ac 结构映射到 Java 类。到目前为止一切正常，但我不知道如何映射具有另一个结构作为成员的结构。

在 Struct 类 javadoc 中有一个包含指向同一结构的指针的结构示例（使用类 Reference32），但这不是我需要的。

我找不到有关如何实现此目的的更多文档。

这是一个简化的例子：

```
// c types --------------------------------

enum Enum16{VALUE1, VALUE2, VALUE3};

struct t_composite {
   int number;
   char text[20];
   };

struct t_demo {
   char _char2[2];        
   char _char14[14];      
   int _int;
   float _float;
   double _double;
   enum Enum16 enum16;
   struct t_composite _otherStruct;
   };

// Java class -------------------------

public class Composite extends Struct {

public final Signed32 number = new Signed32();
public final UTF8String text = new UTF8String(20);
// ...
}

public class Demo extends Struct {

public enum EnumValues {
    VALUE1, VALUE2, VALUE3
};

public final UTF8String _char2 = new UTF8String(2);
public final UTF8String _char15 = new UTF8String(14);
public final Signed32 _int = new Signed32();
public final Float32 _float = new Float32();
public final Float64 _double = new Float64();
public final Enum32<EnumValues> _enum32 = new Enum32<EnumValues>(EnumValues.values());
//  public final Reference32<Composite> _otherStruct = new Reference32<Composite>();  // incorrect
public final Composite _otherStruct = new Composite(); // doesn't work

// ....
} 
```

* * *

变量“_otherStruct”永远不会在 Java 中填充。我尝试将 java 变量定义为 Composite 类而不是 Reference32，但它没有成功。

这样做的正确方法是什么？

先感谢您

**更新**

正如主要开发人员 Jean-Marie Dautelle 向我指出的那样，这是通过使用内部方法完全支持的：

```
public final Composite _otherStruct = inner(new Composite()); 
```

这完美地工作

# angularjs - 是否可以在 AngularJS ng-grid 内进行选择下拉菜单？

> ID：15907373
> 
> 赞同：10
> 
> 时间：2013-04-09T16:25:37.340
> 
> 标签：angularjs, ng-grid

我编写了以下代码：

```
$scope.gridOptions = {
    data: 'myData',
    enableCellEdit: true,
    multiSelect: false,
    columnDefs: [
        { field: 'Id', displayName: 'Id' },
        { field: 'Name', displayName: 'Name', enableCellEdit: true, editableCellTemplate: cellEditableTemplate },
        { field: 'Description', displayName: 'Description', enableCellEdit: true, editableCellTemplate: cellEditableTemplate }
    ]
}; 
```

myData 实际上包含四列 Id、Name、Status 和 Description。其中 status 是一个简单的 javascript 数组，其中包含三种名为 myStatus 的状态。

我是否可以以某种方式将 myStatus 中的数据链接到 ng-grid 中的字段，以便我可以从选择下拉列表中选择一个新值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T00:21:37.963

这是一些实验的输出。

[http://plnkr.co/edit/W1TkRgsp0klhqquxaiyc?p=preview](http://plnkr.co/edit/W1TkRgsp0klhqquxaiyc?p=preview)

看来您可以放入`select`单元格模板。您可以使用`row`对象来检索您需要的任何内容。我曾经`row.rowIndex`拥有对原始数据的访问权限。

模板示例：

```
<div>
  <select ng-model="myData[ row.rowIndex ].myStatus">
    <option ng-repeat="st in statuses">{{st}}</option>
  </select>
</div> 
```

（如果我们可以通过对象写入原始数据，那就太好了`row` 。我不知道怎么做。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-01T12:04:24.060

tosh shimayama 这样做的方式不允许以模型数组以外的任何其他顺序对表格进行排序。

这是一种丑陋的做法，但我快速查看了 ng-grid 的源代码，发现他们使用正则表达式插入 ng-model。因此，通过在代码中使用相同的变量 COL_FIELD，您可以使 ng-grid 插入正确的模型。

```
<div>
  <select ng-model="COL_FIELD">
    <option ng-repeat="status in statuses">{{status}}</option>
  </select>
</div> 
```

这是一个带有工作示例的 plunker： [http ://plnkr.co/edit/Yj2qmI?p=preview](http://plnkr.co/edit/Yj2qmI?p=preview)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-06T02:10:15.547

在 ng-grid 2.x 中执行此操作的更完整/更整洁的方法我已包含在此处的 plunker 中：[http](http://plnkr.co/edit/VABAEu?p=preview) ://plnkr.co/edit/VABAEu?p=preview ，利用此处关于 stackoverflow 的另一个类似问题的内容：[AngularJS 和 ng-grid - 单元格更改后自动将数据保存到服务器](https://stackoverflow.com/questions/15647981/angularjs-and-ng-grid-auto-save-data-to-the-server-after-a-cell-was-changed/20414628#20414628)

总之，我的可编辑字段模板格式如下所示：

```
 $scope.statuses = {1: 'active', 2: 'inactive'};
      $scope.cellSelectEditableTemplate = '<select ng-class="\'colt\' + col.index" 
         ng-input="COL_FIELD" ng-model="COL_FIELD" 
         ng-options="id as name for (id, name) in statuses" 
         ng-blur="updateEntity(row)" />'; 
```

我提供了一篇博客文章，其中对端到端代码进行了更彻底的演练：http: [//technpol.wordpress.com/2013/12/06/editable-nggrid-with-both-dropdowns-and-选择/](http://technpol.wordpress.com/2013/12/06/editable-nggrid-with-both-dropdowns-and-selects/)

Ng-grid (ui-grid) 3.0 即将发布，并提供了不同的方法来制作可编辑的网格。我在这里有一个帖子：http: [//technpol.wordpress.com/2014/08/23/upgrading-to-ng-grid-3-0-ui-grid/](http://technpol.wordpress.com/2014/08/23/upgrading-to-ng-grid-3-0-ui-grid/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T18:58:16.147

我不能把整个解决方案归功于自己。我只是把碎片放在一起。我的目标是保留三向绑定。

模板应如下所示：

```
 $scope.cellSelectEditableTemplate = '<select ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" ng-options="value.id as value.label for value in OptionsList}" />';
```

COL_FIELD 当然必不可少，以保持对正确单元格的引用。

您可以本地捕获更改：

```
$scope.$on('ngGridEventEndCellEdit', function (evt) {
            console.log(evt.targetScope.row.entity);
            WaitListArray.$save(evt.targetScope.row.entity)
                .then(function (ref) {
                    console.log('saved');
                });
        });
```

在这种情况下，WaitListArray 是我的表的 Firebase/AngularFire 数组。使用这种方法，我能够保留我的树式绑定。

字段（**ng-options**）：

```
{
  field: 'status',
  displayName: 'Status',
  enableCellEditOnFocus: true,
  editableCellTemplate: $scope.cellSelectEditableTemplate,
  cellFilter: 'mapStatus:OptionsList'
}
```

我添加了过滤器以将**id**替换为我的下拉值的**标签。**

```
.filter('mapStatus', function() {
  return function(input, OptionsList) {
    var _out = 'unknown';
    angular.forEach(OptionsList, function(value, key) {

      if (value && value.id == input) {
        _out = value.label;
      }
    });
    return _out;

  };
})
```

在上面，**OptionsList**是我的下拉值数组示例：**{id:1,label:"label1"}**

我发现这个解决方案高度可重用。希望它可以为某人节省时间。

# html - 为什么 Boostrap 布局无法正确显示容器内的行？

> ID：15907374
> 
> 赞同：0
> 
> 时间：2013-04-09T16:25:37.813
> 
> 标签：html, twitter-bootstrap

我正在使用引导响应较少的文件。我有这样的布局：

```
<body>
<div id="wrapper">
  <div id="container" class="container">
    <div id="header"></div>
    <div id="contentwrap" class="row">
      <div id="content" class="span8">
        <!-- some content -->
      </div>
      <div id="sidebar" class="span4">
        <!-- sidebar content -->
      </div>
    <div>
  </div>
</div>
</body> 
```

如果我对 contentwrap div 使用行类，那么 contentwrap div 会在左侧溢出（宽度为 1200 像素，而容器 div 的宽度为 1170 像素）。如果我对 contentwrap div 使用 row-fluid 类，则侧边栏不会显示在侧面，而是显示在内容 div 下方。

html有什么问题吗？我是否正确使用引导脚手架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:33:31.110

尝试将`row`和`span*`类与其他类和 id 分开。

```
<body>
<div id="wrapper">
  <div id="container" class="container">
    <div id="header"></div>
    <div id="contentwrap">
      <div class="row">
        <div class="span8">
          <div id="content">
             <!-- some content -->
          </div>
        </div>
        <div class="span4">
           <div id="sidebar">
             <!-- sidebar content -->
           </div>
        </div>
      </div>
    <div>
  </div>
</div>
</body> 
```

# android - 如何获取我的应用程序任务列表及其活动堆栈？

> ID：15907376
> 
> 赞同：7
> 
> 时间：2013-04-09T16:25:39.783
> 
> 标签：android

为了更好地理解活动、任务、每个任务的后台堆栈和不同的启动模式之间的关系，我想编写一个包含大约 7 个活动的应用程序，在 3 个任务中运行，其中活动以不同的启动模式启动，并且作为我正在跑步我想显示每个活动的堆栈，并在我浏览我的应用程序并启动或关闭不同的活动时观察它们的变化。

如何获取当前应用程序的所有任务列表，然后获取这些任务堆栈上的活动？[ActivityManager 类](http://developer.android.com/reference/android/app/ActivityManager.html)让我可以根据最近或正在运行的内容查询任务信息，但如何仅为当前应用查询任务信息？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:51:16.397

> 如何获取当前应用程序的所有任务列表

没有这样的概念。任务可以*包含*来自应用程序的活动。打个比方，没有网站拥有浏览器选项卡的后台堆栈，尽管网站的页面可能位于浏览器选项卡的后台堆栈中。

> 然后在这些任务的堆栈上获取活动？

这是不可能的，因为这些活动不一定都来自您的流程。

> ActivityManager 类让我可以根据最近或正在运行的内容查询任务信息，但如何仅为当前应用查询任务信息？

你没有，严格来说。

您可以遍历正在运行的任务，并且您可以找到那些您的活动之一是`baseActivity`基于`topActivity`这些`ComponentName`值的活动。

或者，您的活动知道他们的任务 ID，[通过`getTaskId()`](http://developer.android.com/reference/android/app/Activity.html#getTaskId%28%29). 如果需要，您可以在正在运行的任务中找到这些任务，匹配 ID 值，以查找有关活动任务的任务级详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-17T09:31:36.883

从 sdk 版本 21 开始，您现在可以调用 ActivityManager.getAppTasks() 来获取属于您的应用程序的任务。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-17T09:42:49.643

如果您有权访问 adb，则可以使用以下命令查看所有可用的任务和堆栈。

```
adb shell am stack list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T08:04:05.047

使用以下代码，您可以获得任务编号

```
 if (Build.VERSION.SDK_INT >= 29) {
        val activityManager = getSystemService(ACTIVITY_SERVICE) as ActivityManager
        val tasks = activityManager.appTasks
        tasks.forEach {
            logApp("it.taskInfo.numActivities:${it.taskInfo.numActivities}")
        }
    } 
```

# javascript - Javascript 中 downloadUrl() 的解释？

> ID：15907379
> 
> 赞同：1
> 
> 时间：2013-04-09T16:25:51.250
> 
> 标签：javascript

我已经四处寻找解释，以便我能够理解上述功能。我遇到的情况是在 Google Maps API 文档中：

```
function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

如果有人可以提供一些启示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:32:01.367

```
function downloadUrl(url, callback) { // pass a URL and a function to call on success
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest; // create an xmlhttprequest, native if possible, activeX for older IE - the construct is a ternary conditional statement
  // set up handling of the state change, we only want the 4th
  request.onreadystatechange = function() { // when the request changes state 
                                            // i.e from sending to having received
    if (request.readyState == 4) { // request done
      request.onreadystatechange = doNothing; // removed this anonymous function on 4th state (done)
      callback(request.responseText, request.status); // call the supplied function with result
    }
  };

  request.open('GET', url, true); // now initialize
  request.send(null); // now execute
} 
```

更新：这些天（2018 年 7 月）比 activeX 更有可能找到 XMLHttpRequest，因此建议使用以下任何一种：

*   切换测试，
*   删除对 activeX 的测试，
*   添加一个 try/catch 或
*   使用[Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:28:07.807

此代码使用浏览器中的 AJAX 功能来获取 URL 的内容。

# php - PHP - 正在写入文件吗？

> ID：15907383
> 
> 赞同：2
> 
> 时间：2013-04-09T16:26:04.693
> 
> 标签：php, file

我的邮件服务器每分钟写入一个文件，这很好，我很高兴它这样做。

但是在我的 WebServer 上，我想检查当前是否正在写入该文件，如果没有，则向用户显示下载链接。

有什么办法可以做到这一点。。

例如：运行一个循环，直到文件不再被写入，然后显示文件的下载链接？

我已经阅读过，`flock()`但我认为这不会有帮助，因为另一个进程/操作系统实际上正在创建文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:29:31.780

您的编写脚本/应用程序/进程应该写入锁定文件（就像`filename.lock`在开始写入主文件之前一样的空文件，然后在完成后将其删除。这是常规锁定方法，但您的脚本只需要检查是否`filename.lock`存在。如果是，则正在写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:29:45.860

如果当前没有其他人正在写入，您只能获取读取或写入锁。你不应该这样做。

此外，当用户下载文件时，可能同时文件已更改。你确定你对你想要的东西有正确的心理形象吗？

# c - 如何将数组初始化为非数值

> ID：15907384
> 
> 赞同：2
> 
> 时间：2013-04-09T16:26:05.470
> 
> 标签：c, floating-point

我正在尝试初始化一个数组，以便我可以使用一个简单的 if 语句来检查一个值是否已放入数组中。

这可能吗？

这是我的代码

```
double number[1024] = {non-numeric value}
int i = 0;
while(1){
    if (number[i] != non-numeric value){

    printf ("%f", number[i]);
    i++;
}
    else
        break;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T16:30:35.250

要将数据初始化为 NaN，请使用`NAN`定义在`<math.h>`

```
#include <math.h>

// initialize to all NaNs
for (int i=0; i<1024; ++i) number[i] = NAN; 
```

要检查 NaN，请使用`isnan`来自的宏`<math.h>`

```
if (!isnan(number[i])) {
    // do something if the value isn’t NaN.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:31:29.643

使用`NAN`和`isnan`从`<math.h>`

```
 #include <stdio.h>
    #include <math.h>

    // ...

    #define N 1024

    double number[N];
    int i;

    for (i = 0; i < N; i++)
        number[i] = NAN; // Produce NaN

    //...    

    i = 0;
    while (i < N)
    {
        if (!isnan(number[i]))
        {
            printf("%f\n", number[i]);
            i++;
        }
        else
            break;
    } 
```

[现场代码](http://liveworkspace.org/code/1OfmMT%241)！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:34:53.023

试试这个：

```
double number[1024];
int i = 0;

for(i=0 ; i<1024 ; ++i)
    number[i] = NAN;

// while true is bad programming practice, use a for instead

for(i=0 ; i<1024 ; ++i) {
    if(number[i]!=number[i]) 
        printf("%ld",number[i]);
    else break;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:36:10.327

将 NaN 重新定义为“不由用户提供”可能是一个坏主意——如果用户想要提供 NaN 怎么办？

考虑使用“可选”数据结构来表示每个数组元素。

```
struct optional_double {
    char has_value;
    double value;
};

struct optional_double number[1024];
int i;

memset(number, 0, sizeof(number));

// Populate the array with data here.

for (i = 0; number[i].has_value; ++i) {
    printf("%f", number[i].value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T16:52:22.950

我的回答与 cdhowie 的类似，但有一个关键区别。他是对的-您不应该将 NaN 重新用于表示“未设置”。（事实上​​，设置一些像 -1234.56789 这样的任意数字比这更安全，因为不太可能有任何东西等于它，而且计算更有可能导致 NaN。）显然，所有 math.h 中都没有定义 NAN文件，但如果它在你的文件中，那是最简单的方法。

我建议将 NULL 重新用于您的任务。

您实际上想将您的 double 转换为[Nullable 类型](http://en.wikipedia.org/wiki/Nullable_type)，那么为什么不实际这样做呢？

```
double* numberPointers[1024];
memset(numberPointers, NULL, 1024 * sizeof(double));
int i = 0;
while(1){
    if (numberPointers[i] != NULL){
        printf ("%f", numberPointers[i]);
        i++;
    }
    else {
        break;
    }
} 
```

困难的部分是改变你的计算。而不是像

```
void fillArray(double[] number) {
    int i;
    for (i = 0; i < 1024; ++i) {
        number[i] = someCalculation(i);
    }
} 
```

你需要类似的东西

```
void fillArray(double*[] numberPointers) {
    int i;
    double result;
    double* d; 
    for (i = 0; i < 1024; ++i) {
        result = someCalculation(i);
        d = (double*)malloc(sizeof(double));
        *d = result;
        numberPointers[i] = d;
    }
} 
```

当然，当你完成后，你需要`free`所有的指针`numberPointers`，但这应该很容易：

```
int i;
for (i = 0; i < 1024; ++i) {
    if (numberPointers(i) != NULL) {
        free(numberPointers(i));
    }
} 
```

# bash - 只转发每个 X 参数

> ID：15907388
> 
> 赞同：0
> 
> 时间：2013-04-09T16:26:16.033
> 
> 标签：bash

我正在使用 ImageMagick 的蒙太奇来创建图片预览；例如

```
montage *.jpg output.jpg 
```

但是， *.jpg 是很多文件；很多都是相似的，例如

```
a.jpg b.jpg c.jpg d.jpg 01.jpg 
```

我可以以某种方式仅将每个 Xth 文件传递​​给蒙太奇吗？

例如每隔一个文件：

```
a.jpg c.jpg 01.jpg 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:39:40.470

将所有文件存储在一个数组中。然后遍历数组并选择备用元素，如下所示：

```
all=( *.jpg )
for (( i=0; i<${#all[@]}; i+=2 )); do
    everyOther+=( "${all[$i]}" )
done    
montage "${everyOther[@]}" output.jpg 
```

# c# - 使用访问数据库更新语句不起作用

> ID：15907389
> 
> 赞同：1
> 
> 时间：2013-04-09T16:26:17.470
> 
> 标签：c#, oledb

```
string date=
DateTime.Now.ToString("d.M.yyyy",System.Globalization.DateTimeFormatInfo.InvariantInfo);

String MyString = @"UPDATE cas SET Odhod= '" + label1.Text + "' 
WHERE sifra = " + textBox1.Text + " and Datum = "+date+""; 
```

当我在没有 Datum 的情况下进行此更新时，它可以工作，但使用 Datum 则不起作用。我已连接到 accesss 数据库，表中的基准字段类型是日期/时间，请大家帮忙。

**雇用是程序：** [https ://www.dropbox.com/s/hx4zduvul8mh2uy/8.4.zip](https://www.dropbox.com/s/hx4zduvul8mh2uy/8.4.zip)

**[问题图片： http](http://img43.imageshack.us/img43/5189/errorbh.jpg) **://img43.imageshack.us/img43/5189/errorbh.jpg****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:31:03.993

像往常一样，使用字符串连接会带来很多麻烦。
（Sql注入，解析问题）

只需使用参数化查询

```
string MyString = @"UPDATE cas SET Odhod= ? WHERE sifra = ? and Datum = ?"; 

using(OleDbConnection cn = new OleDbConnection(connectionstring))
using(OleDbCommand cmd = new OleDbCommand(MyString, cn)
{
    cn.Open();
    cmd.Parameters.AddWithValue("@p1", label1.Text);
    cmd.Parameters.AddWithValue("@p2", textbox.Text);
    cmd.Parameters.AddWithValue("@p3", Convert.ToDate(date));
    cmd.ExecuteNonQuery();
} 
```

当然，存储在 Datum 字段中的 Date 值应该与参数@p3 中传递的日期完全相同。有时最好将时间值添加到您的日期

```
string date= DateTime.Now.ToString("d.M.yyyy 00:00:00", ......); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:29:01.013

您的 Datum 列中的值可能与您的日期值不匹配。您的基准列的值是多少？是否有相关的时间（例如：下午 1:32）？

此更新声明还有一些其他问题。您应该使用 ORM 或参数化查询以避免 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:35:41.090

您可以使用参数方法。在这种情况下，您将能够在运行查询之前定义字段类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:56:06.380

原因是 Microsoft Access 实际读取`DateTime`特定方式的方式。当您使用串联时，它可能会引入问题。

*Access*只能以下列方式存储*日期/时间*：

*   有效日期：-657, 434（公元 100 年 1 月 1 日）至 2,958,465（公元 9999 年 12 月 31 日）
*   有效时间：0.0 (00:00:00) 至 0.99999 (23:59:59)

它可以通过以下方式格式化：

*   存储值（双数）= 默认格式（常规日期）= 自定义格式
*   36296.0 = 5/15/99 = 05/15/1999 上午 12:00:00

因此，您必须牢记 Microsoft Access 的局限性；因为 SQL 读取日期的方式略有不同，并且存储它们的方式也略有不同。上下文中最轻微的中断都会对结果产生深远的影响。

最简单的方法是*Query based on Parameters*。这样您就不会连接 Access 的无效语法。这将缓解一些问题。

本机访问利用以下功能：

> 将关联的日期添加到时间比较中：

```
var1 = #1/1/99 2:01:00 PM#
var2 = DateAdd("n", 10, var1)
? var2 = #1/1/99 2:11:00 PM#

Convert the time values to string data types before you compare them:

var1 = #2:01:00 PM#
var2 = DateAdd("n", 10, var1)
? CStr(var2) = CStr(#2:11:00 PM#) 
```

> 使用 DateDiff() 函数比较精确的单位，例如秒：

```
var1 = #2:01:00 PM#
var2 = DateAdd("n", 10, var1)
? DateDiff("s", var2, #2:11:00 PM#) = 0 
```

因此，本机*访问查询*看起来像这样：

```
UPDATE [dbo].[Customer]
SET [dbo].[Customer].[InvoiceDate] = #1/1/99 2:11:00 PM#; 
```

如您所见，它尝试像 SQL 一样工作，但它不是 SQL。因此，通过创建基于**参数的查询，您可以确保在 Access Database 中实现了有效的语法**。史蒂夫发布了一个很好的例子，所以我不会发布代码示例。但希望这可以帮助您了解它们之间的区别。**

# java - 访问请求范围的 bean

> ID：15907391
> 
> 赞同：1
> 
> 时间：2013-04-09T16:26:38.847
> 
> 标签：java, jsp, javabeans

我在 jsp 页面中声明了一个请求范围的 bean，并尝试在另一个页面中访问它。我能够使用`scriptlet`as well访问另一个页面上的 bean `EL`，但是如果使用它会出现异常`jsp;getProperty`。下面是两个页面的代码。

PageScope.jsp（首页）：

```
 <jsp:useBean id="taskBean" class="com.mybean.TaskBean" scope="request" />
    <jsp:setProperty name="taskBean" property="multiplier" value="55" />
    <jsp:setProperty name="taskBean" property="multiplicand" value="<%= dd %>" />

<%
        System.out.println("Forwarding request to other page.");
        RequestDispatcher dispatcher = request.getRequestDispatcher("RequestScope.jsp");
        dispatcher.forward(request, response);
%> 
```

RequestScope.jsp（另一页）：

```
 <%
            out.println("Accessing request scoped bean");
            TaskBean taskBean = (TaskBean) request.getAttribute("taskBean");
            out.println(taskBean.getMultiplier());
        %>

        ${taskBean.multiplier}

        <jsp:getProperty name="taskBean" property="multiplier" />
         //THE ABOVE LINE THROWS EXCEPTION. 
```

是否可以使用 jsp:getProperty 访问 bean。请让我知道我错了。谢谢。

编辑：下面是堆栈跟踪。

```
org.apache.jasper.JasperException: file:/RequestScope.jsp(28,4) jsp:getProperty for bean with name 'taskBean'. Name was not previously introduced as per JSP.5.3
    org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1104)
    org.apache.jasper.compiler.Node$GetProperty.accept(Node.java:1126)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
    org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
    org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    org.apache.jasper.compiler.Generator.generate(Generator.java:3489)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:250)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jsp.PageScope_jsp._jspService(PageScope_jsp.java:109)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:44:38.847

```
Name was not previously introduced" indicates that you haven't told your JSP about this bean as of yet. 
```

您需要添加

```
<jsp:useBean id="taskBean" class="com.mybean.TaskBean" scope="request" /> 
```

在您使用访问属性之前`jsp:getProperty`

还，

的“name”属性`jsp:getProperty`应该与声明的 bean 的“id”属性匹配。

然后访问

```
<jsp:getProperty name="taskBean" property="multiplier" /> 
```

使用 Scriptlet 时

```
TaskBean taskBean = (TaskBean) request.getAttribute("taskBean"); 
```

检查您已经在`<%@page import="com.mybean.TaskBean"%>`J​​SP 中添加了语句。

因此，当 JSP 页面被编译为`RequestScope_jsp.java`.

首先，它有你的 bean 的 import 语句其次，`_jspService`方法有`request`和`response`参数作为参数。

```
_jspService(HttpServletRequest request, HttpServletResponse response) 
```

因此，您可以使用转发的 JSP 页面访问它们`scriptlets`。同样的事情也发生在`EL`.

```
Remember thumb rule 
```

: 当你使用 访问 bean 属性时`jsp:getProperty`，你需要添加`<jsp:useBean>`用于定位和实例化一个 bean 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:52:56.970

我相信标签

```
<jsp:useBean id="taskBean" type="com.mybean.TaskBean" scope="request" /> 
```

RequestScope.jsp 文件中将需要它，因为它已经创建并存在于范围中。可能在 servlet 中创建 takeBean 更好，并且 servlet 创建 taskBean 并设置值，然后执行 dispatch.forward 而不是从另一个 jsp 页面执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T07:57:06.697

1\. 您需要在 jsp:getProperty 中使用它的名称之前声明 bean。

> JSP.5.3
> 
> jsp:setProperty 和 jsp:getProperty 中 name 属性的值将引用一个对象，该对象是通过 pageContext 对象的 findAttribute 方法获取的。
> 
> 以该名称命名的对象必须已使用 jsp:useBean 操作或具有该名称关联的 VariableInfo 条目的自定义操作“引入”到 JSP 处理器。如果对象不是以这种方式引入的，则建议（但不是必需）容器实现来引发翻译错误，因为页面实现违反了规范。

您可以在此处阅读有关 PageContext 的信息：[http](http://docs.oracle.com/javaee/5/api/javax/servlet/jsp/PageContext.html) : //docs.oracle.com/javaee/5/api/javax/servlet/jsp/PageContext.html pageContext 隐式对象的另一个参考在`JSP.2.4 Implicit Objects`部分。

由于您转发到另一个 JSP，因此会有新的 PageContext。

使用相同的指令是安全的，规范说如果存在相同名称（在目标范围内）的 bean，则不会重新创建它：

> JSP.5.1
> 
> jsp:useBean 动作非常灵活；它的确切语义取决于给定的属性。基本语义尝试使用 id 和范围查找现有对象。如果找不到对象，它将尝试使用其他属性创建对象。

因此，将与 PageScope.jsp 中相同的标记添加到第二个 JSP (RequestScope.jsp)：

```
 <jsp:useBean id="taskBean" class="com.mybean.TaskBean" scope="request" /> 
```

2\. 关于为什么它可以通过 EL 访问，JSP 规范在`JSP.2.9 Resolution of Variables and their Properties`. 您最好自己看一下，这是该部分的示例

> ${产品}
> 
> 此表达式将查找名为 product 的属性，搜索页面、请求、会话和应用程序范围，并将返回其值。如果未找到该属性，则返回 null。

3\. 关于为什么它可以通过 scriptlet 访问是显而易见的

jsp 1：

```
<jsp:useBean id="taskBean" class="com.mybean.TaskBean" scope="request" /> 
```

jsp 2：

```
TaskBean taskBean = (TaskBean) request.getAttribute("taskBean"); 
```

`jsp:useBean`您只需从第一次调用放置 bean 的位置（请求属性）获取它。

# java - 我的自定义 TOS 组件如何根据输入架构/元数据将列添加到输出？

> ID：15907392
> 
> 赞同：1
> 
> 时间：2013-04-09T16:26:41.073
> 
> 标签：java, custom-component, etl, talend

我正在使用 Talend Open Studio 进行数据集成，我想创建一个自定义组件，该组件将输出输入数据以及从输入列派生的一些额外列。作为概念证明，在下面的代码中，我尝试为每一列创建一个重复的列，但实际示例将具有更复杂的逻辑。这是我在 .javajet 文件的“开始”部分为组件尝试的内容：

```
<%@ jet
    imports="
        org.talend.core.model.process.INode
        org.talend.core.model.process.ElementParameterParser
        org.talend.core.model.metadata.IMetadataTable
        org.talend.core.model.metadata.IMetadataColumn
        org.talend.core.model.process.IConnection
        org.talend.core.model.process.IConnectionCategory
        org.talend.designer.codegen.config.CodeGeneratorArgument
        org.talend.core.model.metadata.types.JavaTypesManager
        org.talend.core.model.metadata.types.JavaType
        java.util.List
        java.util.Map       
    "
%>
<%
    CodeGeneratorArgument codeGenArgument = (CodeGeneratorArgument) argument;
    INode node = (INode)codeGenArgument.getArgument();
    String cid = node.getUniqueName();   

    IConnection conn = node.getOutgoingConnections().get(0);
    IMetadataTable outputMetadataTable = conn.getMetadataTable();

    List<IMetadataTable> metadatas = node.getMetadataList();
    IMetadataTable metadata = metadatas.get(0);

    List<IMetadataColumn> columnsToAdd = new java.util.ArrayList<IMetadataColumn>();
    for(IMetadataColumn col : outputMetadataTable.getListColumns()){
      IMetadataColumn cloned = col.clone();
      cloned.setLabel("Clone_of_" + cloned.getLabel());
      columnsToAdd.add(cloned);
    }

    List<IMetadataColumn> cols = new java.util.ArrayList<IMetadataColumn>(outputMetadataTable.getListColumns());
    cols.addAll(columnsToAdd);
    outputMetadataTable.setListColumns(cols);

%> 
```

这似乎几乎可以工作，但并不完全。如果我将组件添加为具有单个输入和单个输出的流的一部分，则输出确实会显示所需的额外列。但是，生成的 Java 代码仍然存在编译错误。看起来我的组件输出的“结构”没有表示附加列的字段。也就是说，如果 row1 是输入，row2 是输出，则 row2Struct 类没有由元数据更改表示的额外字段。因此，即使 UI 会显示这些列存在于输出中，但似乎我实际上无法将任何值放入这些列中。

由于我能够更改元数据中的列，因此必须有一种方法可以让我将其反映在行的结构中，对吗？是否有某种“更新”方法或我缺少的东西？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T19:45:51.570

在这种情况下，row2Struct 构造函数需要在您的 _main.javajet 生成的 java 代码中调用，如下所示：

```
<%
String outConnName = conn.getName();
%>
<%=outConnName %> = new <%=outConnName %>Struct(); 
```

然后如果你想在你的输出数据流中复制一些输入数据，你可以生成以下java代码：

```
<%
for ( IMetadataColumn outColumn : outColumns) {
%>
<%=outConnName%>.<%=outColumn.getLabel()%> = <%=inConnName%>.<%=outColumn.getLabel()%>;
<%
}
%> 
```

# c# - 在 Linq 中的 GroupBy DayOfWeek

> ID：15907394
> 
> 赞同：1
> 
> 时间：2013-04-09T16:26:42.127
> 
> 标签：c#, linq, group-by

我有这个运行良好的 Linq 查询

```
var test = (from c in context.ConsumptionSet
            join pi in context.PropertiesInstanceSet on c.PropertiesInstanceID equals pi.PropertiesInstanceID
            join ep in context.EquipmentPropertiesSet on pi.EquipmentPropertiesID equals ep.EquipmentPropertiesID
            where (ep.EquipmentID == equipmentId && pi.ProprietesName == ProprietesName.Energy && c.Date <= DateTime.Today && c.Date >= EntityFunctions.AddDays(DateTime.Today, -7))
            group c by c.Date.Day into grp
            select new
            {
               test = grp.Key,
               value = (from c2 in grp select c2.Value).Max()

            }).ToList(); 
```

但我想按`DayOfWeek`属性对这些结果进行分组，似乎 Linq 不允许这样做，因为当我替换为时出现此`group c by c.Date.Day`错误`group c by c.Date.DayOfWeek`： `The specified type member 'DayOfWeek' is not supported in LINQ to Entities`

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:28:30.870

使用[`SqlFunctions.DatePart`](http://msdn.microsoft.com/pl-pl/library/dd487171.aspx)：

```
var test = (from c in context.ConsumptionSet
            join pi in context.PropertiesInstanceSet on c.PropertiesInstanceID equals pi.PropertiesInstanceID
            join ep in context.EquipmentPropertiesSet on pi.EquipmentPropertiesID equals ep.EquipmentPropertiesID
            where (ep.EquipmentID == equipmentId && pi.ProprietesName == ProprietesName.Energy && c.Date <= DateTime.Today && c.Date >= EntityFunctions.AddDays(DateTime.Today, -7))
            group c by SqlFunctions.DatePart("weekday", c.Date) into grp
            select new
            {
               test = grp.Key,
               value = (from c2 in grp select c2.Value).Max()

            }).ToList(); 
```

# json - 如何在 AJAX 中处理来自 AJAX 请求的空白返回 JSON 数据

> ID：15907399
> 
> 赞同：2
> 
> 时间：2013-04-09T16:26:53.377
> 
> 标签：json, jquery

我有一个`$.ajax`调用 asp.net Webmethod 的函数。

当没有数据返回时，我想用一个窗口提醒用户。

这是我在 FireBug 中看到的返回 JSON 字符串：

```
{"d": "[]"} 
```

以下是该功能的片段 -

```
success: function (msg) {
    var data = eval(msg.d);
    var i = 0;
    var Name;
    for (i = 0; i < data.length; i++) {
        if (data.length == 0) {
            alert('oops no data has been returned sorry.');
        } else {
            //do the good stuff
        }
    }
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:33:12.440

```
function webMethodCall(){
return $.getJSON('myURL',{/*my data*/}).done(function(msg){
 if(!msg || !msg.d.length){
         alert('Emptydata!')
    }
});
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:40:44.917

将`if-else`语句移到循环外`for`，将`for`循环移到`else`分支内：

```
if (data.length == 0) {
    alert('oops no data has been returned sorry.');
} else {
    for (i = 0; i < data.length; i++) {
        //do the good stuff
    }
} 
```

在您的代码中，如果为空，`if`则永远不会执行该语句，因为永远不会执行循环体（is ）。`data``for``0 < 0``false`

* * *

**其他问题：**

我建议修复您的 JSON 生成过程。如果`msg.d`应该包含数组，则不要为其分配字符串。你的 JSON 应该看起来像

```
{"d": []} 
```

似乎您以某种方式对数据进行了双重编码。

如果你不这样做，我至少会使用`JSON.parse`而不是`eval`.

# python - 在 Python 模块中排序

> ID：15907400
> 
> 赞同：3
> 
> 时间：2013-04-09T16:26:54.020
> 
> 标签：python, django

```
 class Images(models.Model):
      job=models.OneToOneField(Jobs)
       image=models.ImageField()
 class Jobs(models.Model):
       picture=models.ForeignKey(Images, null=True) 
```

它给出了一个错误

```
job=models.OneToOneField(Jobs) 
```

这是因为类作业稍后在模块中定义，但是如果我更改这两个类的位置，那么它会给我一个错误

```
 picture=models.ForeignKey(Images, null=True) 
```

在这种情况下我应该怎么做？（不把类放在不同的模块中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T16:39:23.703

您可以使用带有类名的字符串在创建另一个模型之前实例化第一个模型：

```
class Images(models.Model):
    job=models.OneToOneField('Jobs')
    image=models.ImageField()

class Jobs(models.Model):
    picture=models.ForeignKey(Images, null=True) 
```

从[模型文档](https://docs.djangoproject.com/en/dev/ref/models/fields/)：

> 如果您需要在尚未定义的模型上创建关系，您可以使用模型的名称，而不是模型对象本身。

# c# - 运行 SQL 语句然后重定向时出现页面 404

> ID：15907402
> 
> 赞同：2
> 
> 时间：2013-04-09T16:26:56.740
> 
> 标签：c#, asp.net, webforms, single-sign-on, response.redirect

我遇到了一个非常奇怪的错误，我对 ASP.NET 并不擅长，但我正在帮助开发单点登录应用程序，但在重定向用户时遇到了麻烦。我将使其尽可能简单，这就是它的工作原理：

1.) 他们来自另一个网站，它传递了一个单点登录对象，其中包含他们的 ID

2.) 在页面加载时，我们使用该 ID 在我们的数据库中查找并获取他们的信息，如果他们缺少信息，他们必须填写。

3.) 如果他们没有丢失任何信息，它会将他们的 ID 插入到活动会话表中，然后将他们重定向到最终网站

问题是，当页面加载并从 Single Sign-On 对象接收数据时，我可以很好地执行 SQL 插入语句；但是当我运行 SQL 插入语句然后将它们重定向到另一个页面时，页面只有 404s。当重定向被放置在那里时，我们还会收到一个单点登录错误，只是说它无法完成。我们注册了 SQL 语句运行，但它们没有被重定向；就像说的那样，它只是404s。

为什么会发生这种情况？这是代码中的一般流程：

```
protected void Page_Load(object sender, EventArgs e)
{
     SSOObject x = ServiceProvider.RecieveSSO(Request);
     userID = x.ID;

     SqlConnection conn = new SqlConnection(connString);
     conn.Open();
     SqlCommand comm = ("INSERT INTO etc...");

     comm.Parameters.AddWithValue("@ID", userID);

     comm.ExecuteNonQuery();
     conn.Close();
     comm.Dispose();

     // It works fine up to here, but if I add this it 404's:
     Response.Redirect("http://ourwebsite.com/user/etc...");
} 
```

在此先感谢任何尝试过的人，这让我有点困惑。

编辑：遗漏了一条重要信息。如果我注释掉 SSO 代码并仅对 ID 进行硬核化，那么整个过程都可以正常工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:40:43.503

我只需要像这样传递 false （参数是结束页面的执行）：

```
Response.Redirect("http://website.com", false); 
```

# mechanize - 为什么网站知道我正在使用机器人检查我的 ip

> ID：15907403
> 
> 赞同：0
> 
> 时间：2013-04-09T16:27:03.020
> 
> 标签：mechanize

我使用 mechanize 创建虚拟浏览器

```
 br = mechanize.Browser()

        # set cookies
        cookies = cookielib.LWPCookieJar()
        br.set_cookiejar(cookies)

        # browser settings (used to emulate a browser)
        br.set_handle_equiv(True)
        br.set_handle_redirect(True)
        br.set_handle_referer(True)
        br.set_handle_robots(False)
        br.set_debug_http(False)
        br.set_debug_responses(False)
        br.set_debug_redirects(False)
        br.set_handle_refresh(mechanize.HTTPRefreshProcessor(), max_time=1)
        br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
        br.open("http://www.whatsmyip.org/") 
```

虽然网站返回了我的ip，但他们给出了通知

```
Please DO NOT program a bot to use this site to grab your IPs. It kills my server and thats not nice. Just get some cheap or free web hosting and make your own IP-only page to power your bot. Then you won't even have to parse any html, just load the IP directly - better for everyone!! 
```

为什么网站会知道？我错过了代码中的某些内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:15:46.850

我测试了你的代码，一切正常。

你的意思是这部分：

```
<!--
    Please DO NOT program a bot to use this site to grab your IPs. It kills my server and thats not nice.
    Just get some cheap or free web hosting and make your own IP-only page to power your bot.
    Then you won't even have to parse any html, just load the IP directly - better for everyone!!                               
--> 
```

如果是，那么它只是[评论标签](http://www.w3schools.com/tags/tag_comment.asp)，它只是用来提醒用户不要使用带有机器人的网站。

它不会“抓住”你或任何东西。如果您将转到[whatsmyip](http://www.w3schools.com/tags/tag_comment.asp)页面并打开源代码，您将看到它从第 24 行开始（即使您在浏览器中打开它）。

所以总而言之，这只是一个警告，婚礼开发人员在 HTML 中插入

# php - 找不到 OAuth 类！您是否安装并启用了 oauth 扩展？

> ID：15907407
> 
> 赞同：0
> 
> 时间：2013-04-09T16:27:13.237
> 
> 标签：php, oauth

我遇到了这个错误：

> 致命错误：未捕获的异常“Dropbox_Exception？” 带有消息“找不到 OAuth 类！您是否安装并启用了 oauth 扩展？在 C:\xampp\htdocs\xampp\ITamAppServer\dropbox-php-master\src\Dropbox\OAuth\PHP.php:36 堆栈跟踪：#0 C:\path\to\file\sample2.php(12)： Dropbox_OAuth_PHP->construct('xxxxxxxxxxx', 'xxxxxxxxxxxx') #1 {main} 抛出 C:\xampp\htdocs\xampp\ITamAppServer\dropbox-php-master\src\Dropbox\OAuth\PHP.php 上线

我已经下载了 oauth 的扩展并将其包含在 php.ini 中，但仍然找不到该扩展。

# ldap - 识别来自 localhost 的 LDAP (slapd) 流量来源

> ID：15907409
> 
> 赞同：0
> 
> 时间：2013-04-09T16:27:14.860
> 
> 标签：ldap, ldapconnection

我们有一个 slapd 服务器，它已经开始在 /var/log/ldap 中为特定的服务 acc 生成许多 err=49 行。绑定失败时会记录 err=49。通过搜索连接我可以看到源是本地主机。

我已经使用 ldapsearch 检查了 acc 是否处于活动状态。我已尝试通过 /etc 查找服务 acc 名称，以查看可能使用的内容无济于事。

如何识别 ldap 查询的来源以帮助调查问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:35:01.820

我没有尝试从连接的角度工作，而是继续从日志的角度来看：

```
awk '/来自 IP=127.0.0.1/ {print substr($3,1,5)}' /var/log/ldap |sort -n|uniq -c
```

这显示了小时的命中，搜索 cron.hourly 找到了嫌疑人。基于特定 cron.hourly 脚本的工作方式，我对用户名的 grepping 思想存在缺陷。

# solr - Solr 3.6：布尔查询，如何让 solr 在返回结果之前超过阈值

> ID：15907412
> 
> 赞同：2
> 
> 时间：2013-04-09T16:27:36.447
> 
> 标签：solr, lucene

我正在运行一个带有大量 OR 运算符（接近 100 个）的布尔范围查询。我想让 Apache Solr 只有在超过 60% 的匹配后才返回结果，我该怎么做？它是 solrconfig 还是查询参数？

我正在寻找相当于`setMinimumNumberShouldMatch`Lucene 的 Solr。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:43:20.980

我相信[Dismax](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)和[Extended Dismax](http://wiki.apache.org/solr/ExtendedDisMax#mm_.28Minimum_.27Should.27_Match.29)查询解析器插件允许您设置最小匹配值。该文档还讨论了[最小数字应该匹配](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/util/doc-files/min-should-match.html)Solr 4.1 的规范格式

您要查找的查询元素是`mm`，并且可以设置为多个术语或百分比，例如`mm=3`匹配至少三个术语，或`mm=60%`匹配至少 60% 的术语。

因此，您的查询应类似于：

```
(domain)/solr/select/?q=query+incorporating+a+whole+bunch+of+optional+terms&defType=edismax&mm=60% 
```

# csv - 如何将地理数据转换为 CSV

> ID：15907418
> 
> 赞同：1
> 
> 时间：2013-04-09T16:28:01.633
> 
> 标签：csv, gis, type-conversion

我正在尝试获取 Autodesk Revit 中特定位置的准确场地几何图形。该地点位于 19621 Waters Road, Germantown MD 20874-0000 附近。问题是我只能将 CSV 或其他逗号分隔文本或 CAD 格式导入 Revit，但该区域的高度数据只能从 ArcGrid、GeoTIFF、GridFloat 和 BIL_16INT 中的 USGS mational map thingey 获得格式。我正在一台计算机上工作（由于系统管理员的原因）我无法运行任何未经批准的可执行文件或任何东西，而且我的家用计算机没有 Windows，只有 Ubuntu。有谁知道将数据转换为我需要的数据的方法，或者知道更好的方法来获得它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T03:30:16.133

我有一个使用 google earth、VBA 和 excel 进行瘦身的例程……你必须安装 google earth 开发人员包，但它工作得很好——从 GE 抓取图像并将其与 revit VIA CSV 文件协调。

[Revit 技巧博客点](http://revittricks.blogspot.com/2013/05/google-earth-revit-and-csv-for-some.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:32:18.680

如果您的[ARC GRID](http://en.wikipedia.org/wiki/Esri_grid)是 ascii 文件（不是二进制文件），请不要担心 .asc，只需在记事本中打开它即可。您会在其中找到*xllcorner*、*yllcorner*和*cellsize*字样，以及单元格中心的值。关键字*xllcorner*和*yllcorner*是网格左下角的坐标。（并且您需要知道文件的坐标系是什么，以及它是否与您要导入为 csv 的坐标系相同。）

*然后，您可以使用cellsize*计算（例如在 Excel 中）每个单元格中心的坐标。然后将所有这些在三列中`x,y,value`写入文本文件*name.csv*。

# c# - Dynamics AX 2012：动态创建类

> ID：15907422
> 
> 赞同：2
> 
> 时间：2013-04-09T16:28:10.777
> 
> 标签：c#, clr, axapta, x++, dynamics-ax-2012

是否可以编写一个在 AOT 中动态创建新类对象和/或方法的 x++（或 C# CLR）方法？

```
makeCustomClass(string className)
{
    //create new class with name className;
    //populate methods into that class;
} 
```

我什至不确定从哪里开始，所以一些示例代码会很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:26:29.030

这是解决方案：

```
static void MakeClass(Args _args)
{
    ClassBuild  classBuild;
    DictClass   dictClass;
    ;
    classBuild = new ClassBuild("TRN_ClassBuild", false);
    classBuild.addMethod("test",
        @"void test()
        {
            ;
            print 'Hello';
            pause;
        }");

    classBuild.addMethod("test2", 'void test2()\n{\n}');
    classBuild.addSourceToMethod("test2", @"
        str testVar;
        ;
        testVar = 'TRN_ClassBuild';
        info('We created a Class ' + testVar + ' and can use its methods.');
        TreeNode::findNode('Classes\\'+TestVar).AotNewWindow();");

    classBuild.classNode().AOTcompile();

    box::info(strFmt("Creating class %1 with 2 methods. Code of method test2:\n\n%2", classBuild.name(),
        classBuild.getMethodImplementation("test2", false).AOTgetSource()));

    dictClass = new DictClass(className2Id(classBuild.name()));
    dictClass.callObject('test2', dictClass.makeObject());
} 
```

从下面的文章中抄袭，然后被提升到在 AX 2012 R2 中工作。 [http://kashperuk.blogspot.com/2006/11/today-i-want-to-write-about-using-class.html](http://kashperuk.blogspot.com/2006/11/today-i-want-to-write-about-using-class.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:38:44.590

**您在Product Builder**类（*PBA*前缀）上有很好的示例，因为 PB 在编译过程中为模型创建了一些类。

# c# - C# 中的列表中的 ToDictionnary()

> ID：15907425
> 
> 赞同：0
> 
> 时间：2013-04-09T16:28:21.903
> 
> 标签：c#, linq, list, type-conversion

我想使用 linq 从 C# 中的列表中获取字典我使用此代码

```
List<Jointure> lj = table.jointures.GetJointures(Visibilites.Liste, false)
                        .ConvertAll(o => new Jointure(o, table.nom, tabloidConfig.config.tables[o.nomTable].corbeille));

jointures=new Dictionary<string,Jointure>(StringComparer.OrdinalIgnoreCase);

jointures = lj.ToDictionnary(o => o.nom, o => o); 
```

但它会引发以下异常：

> Erreur 109 'System.Collections.Generic.List' ne contient pas une définition pour 'ToDictionnary' et aucune method d'extension 'ToDictionnary' acceptant unprimary argument de type 'System.Collections.Generic.List' n'a été trouvée ( une 指令使用 ou une référence d'assembly est-elle manquante ?) D:\dev\Visual studio\Tanloid\Transport\base.aspx.cs 366 32 Tabloid

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:29:57.473

您拼写错误的方法名称。 `toDictionnary`应该是[`ToDictionary`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)。

# python - 通过 python 添加打印机

> ID：15907428
> 
> 赞同：1
> 
> 时间：2013-04-09T16:28:32.790
> 
> 标签：python, windows, printers

只是想看看是否有人有资源链接，或者可以指导我使用 python 远程安装打印机/驱动程序。我想自动化它，以便它安装本地打印机。

他们是windows电脑，我在windows上。

我想在所有计算机上不安装 python 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:32:27.303

尝试包中[`win32print`](http://timgolden.me.uk/pywin32-docs/win32print.html)的模块[`pywin32`](https://github.com/mhammond/pywin32)。

具体来说，[`win32print.AddPrinter`](http://timgolden.me.uk/pywin32-docs/win32print__AddPrinter_meth.html)并且[`win32print.GetPrinterDriverDirectory`](http://timgolden.me.uk/pywin32-docs/win32print__GetPrinterDriverDirectory_meth.html)看起来相关。

# json - 即使添加了对象映射器，Jackson 也无法检测到 JAXB 注释

> ID：15907430
> 
> 赞同：6
> 
> 时间：2013-04-09T16:28:48.187
> 
> 标签：json, jaxb, jackson

我正在尝试使用带有 JaxB @XmlRootElement 注释的 CXF + Jackson 为 REST 服务配置一个简单的示例。我已经在堆栈溢出以及类似的博客中经历了各种类似的问题，[并](http://it-was-pain.blogspot.in/2012/05/apache-cxf-jackson.html)提出了以下解决方案：

**创建了一个自定义对象映射器，如下所示：**

```
public class CustomObjectMapper extends ObjectMapper{

    public CustomObjectMapper() {
    super();
    super.configure(SerializationConfig.Feature.WRAP_ROOT_VALUE, true);
    super.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
    AnnotationIntrospector primary = new JaxbAnnotationIntrospector();
    AnnotationIntrospector secondary =  new JacksonAnnotationIntrospector();
    AnnotationIntrospector pair = new AnnotationIntrospector.Pair(primary, secondary);
    super.setAnnotationIntrospector(pair);
    }

} 
```

**在spring config中将此传递给Json提供的构造函数**

```
 <bean id="jacksonMapper" class="com.myorg.test.CustomObjectMapper" />

    <jaxrs:providers>
        <bean class="org.codehaus.jackson.jaxrs.JacksonJsonProvider">
            <constructor-arg ref="jacksonMapper" />
        </bean>
    </jaxrs:providers> 
```

**`JsonBean`添加了一个带有 JAXB 根​​元素注释的简单类**

```
@XmlRootElement(name = "JsonBean")
public class JsonBean {
    private String val1;
    private String val2;

    public String getVal1() {
        return val1;
    }

    public void setVal1(String val1) {
        this.val1 = val1;
    }

    public String getVal2() {
        return val2;
    }

    public void setVal2(String val2) {
        this.val2 = val2;
    }

} 
```

当我通过下面的json时，

```
{
    "JsonBean": {
        "val1": "Hello",
        "val2": "Hi"
    }
} 
```

它抛出异常：

```
WARNING: javax.ws.rs.InternalServerErrorException: org.codehaus.jackson.map.exc.UnrecognizedPropertyException: Unrecognized field "JsonBean" (Class com.cognizan
t.poc.connectedcar.JsonBean), not marked as ignorable
 at [Source: org.apache.cxf.transport.http.AbstractHTTPDestination$1@1f2fae4; line: 2, column: 13] (through reference chain: com.myorg.test.Json
Bean["JsonBean"])
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:243)
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:99)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:239)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:223)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:203)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:137)
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:158)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:243)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:163)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:755)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:219)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:457)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:368)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
        at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953) 
```

我在这里错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:08:45.687

我猜对了。

我错过了在自定义映射器中添加解包以进行反序列化：

**在下面添加了以下行`CustomObjectMaller`**

```
super.configure(DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, true); 
```

另外，将spring配置文件修改为：

```
<jaxrs:providers>
    <bean id="jsonProvider" class="org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider">
       <property name="mapper" ref="jacksonMapper" />
   </bean>
</jaxrs:providers> 
```

它开始按预期工作..

# testing - Jasmine/Karma 测试：未定义浏览器

> ID：15907432
> 
> 赞同：4
> 
> 时间：2013-04-09T16:28:57.727
> 
> 标签：testing, jasmine, karma-runner

如果这个测试：

```
'use strict'

describe('application', function() {
    it('should login', function() {
        browser().navigateTo('/');
        expect('111').toBe('111');
    });
}); 
```

包括该`"browser"`行，结果是：

```
Chrome 26.0 (Windows) application should login FAILED
    ReferenceError: browser is not defined
        at null.<anonymous> (...../test/js/e2e/tests/test.js:6:9)
Chrome 26.0 (Windows): Executed 1 of 1 (1 FAILED) (0.359 secs / 0.004 secs) 
```

但如果没有这条线，测试就会成功。

人们建议包括`angular-scenario.js`，但这会破坏测试

```
expect('111').toBe('222'); 
```

被评估为真。

该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T21:17:15.507

您需要让应用程序的服务器与 karma runner 一起运行。所以对于 Node.js：

```
node app.js 
```

另外，请确保您更改了 karma 配置中的 urlRoot 属性，这样它就不会与您的应用程序冲突，是的，您需要 angular-scenario.js

```
files = [
  ANGULAR_SCENARIO,
  ANGULAR_SCENARIO_ADAPTER,
  'test/**/*_spec.js'
];

urlRoot = '/__karma/';

proxies = {
  '/' : 'http://localhost:3000/'
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:49:48.443

我也遇到过这个问题。我相信您只能在 beforeEach(); 中调用 browser()；试试这个：

```
'use strict'

describe('application', function() {

    beforeEach(function(){
        browser().navigateTo('/');
    });

    it('should login', function() {
        expect('111').toBe('111');
    });

}); 
```

# css - 防止在 HTML5 中滚动

> ID：15907436
> 
> 赞同：5
> 
> 时间：2013-04-09T16:29:17.090
> 
> 标签：css, html, scroll, viewport

我想在我的`HTML5`应用程序中防止所有形式的页面滚动。我曾尝试在 SO 和[Google上搜索“](http://www.google.com/search?client=safari&rls=en&q=html5%20prevent%20scrolling&ie=UTF-8&oe=UTF-8)*阻止所有滚动机制*”的一般答案，但一切都非常具体——比如如何通过触摸、[箭头键](https://stackoverflow.com/questions/14901273/javascript-prevent-scrolling)或滚动条本身禁用滚动。

我正在寻找这个的原因是能够`div`在可见屏幕下方创建一个新的，并向上（和向下）动画它。这个[MoonBase](http://moonbase.com/PhDBrown/1)显示了我的意思。我不希望用户能够滚动下来看看。这可能吗？有`meta`我可以设置的标签吗？或者`CSS`？- 或者，我是否对动画采用了错误的方法？也就是说，如果我只是从侧面动画（并包含`meta`标签`width=device-width`），我的所有问题都会得到解决吗？这是我获得所需行为的最接近的方式吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-09T16:30:47.710

您不需要 JavaScript，只需使用 CSS。设置`overflow: hidden;`：

```
body {
    overflow: hidden;
} 
```

# javascript - OpenStreetMap 在地图上添加标签

> ID：15907452
> 
> 赞同：0
> 
> 时间：2013-04-09T16:30:03.160
> 
> 标签：javascript, map, openlayers, openstreetmap

我正在开发一个带有 openstreetmap 和 OpenLayers 的 webapp。我所做的是使用 JavaScript 在地图上渲染一条带有一些给定点的线，如下面的屏幕截图：
![捕获1](https://i.stack.imgur.com/Iwvkl.png)
现在我想做的是在线上方显示一个标签，如下所示：
![在此处输入图像描述](https://i.stack.imgur.com/dVkSQ.png)
我不确定我是如何可以通过 JavaScript 实现这一点，我找不到任何有用的参考文档。以前有人做过，请分享一些经验。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:13:29.037

尝试使用样式标签创建不透明（或零宽度）点。这是我基于[Labeled Features Example](http://openlayers.org/dev/examples/vector-features-with-text.html)的命题。（我现在无法测试它，所以要小心）。

首先：使用不可见点和一些参数创建新的矢量图层（因为样式设置可能会干扰当前图层的线条）：

```
var vectorLayer = new OpenLayers.Layer.Vector("Labeled points", {
    styleMap: new OpenLayers.StyleMap({'default':{
        // should be invisible, if not, set opaque
        strokeWidth: 0,
        pointRadius: 0,
        // label may have \n linebreaks
        label : "${label}",
        fontColor: "${fontColor}",
        fontSize: "12px",
        fontFamily: "Courier New, monospace",
        fontWeight: "bold",
        labelAlign: "${align}",
        labelXOffset: "${xOffset}",
        labelYOffset: "${yOffset}",
        labelOutlineColor: "white",
        labelOutlineWidth: 3
        }})
    }); 
```

第二：这是使用给定参数（${parameter}）创建特征的方法：

```
var newLabeledPoint = new OpenLayers.Geometry.Point(-101.04, 35.68);
var newLabeledFeature = new OpenLayers.Feature.Vector(newLabeledPoint );
    newLabeledFeature .attributes = {
        label: "Line 1",
        fontColor: 'blue',
        align: "cm",
        // positive value moves the label to the right
        xOffset: 50,
        // negative value moves the label down
        yOffset: -15
    }; 
```

最后：`vectorLayer.addFeatures([newLabeledFeature]);`。

# ios - MV-iOS 的任何框架

> ID：15907454
> 
> 赞同：1
> 
> 时间：2013-04-09T16:30:12.567
> 
> 标签：ios, objective-c

是否有任何适用于 iOS 的 MVC/MVVM 框架？我知道 Cocoa 使用（一种形式的）MVC，但我想要更明确的东西，比如`AngularJS`or `Caliburn Micro`。谷歌似乎没有帮助我。或许大家的共识是基础 API 已经足够强大，而只是变得精通的问题？

（*需要明确的是，我对 SSToolkit 和其他以 UI 为中心的项目不感兴趣*）

# c - 指向不透明结构数组的指针

> ID：15907456
> 
> 赞同：1
> 
> 时间：2013-04-09T16:30:16.343
> 
> 标签：c, gcc, gcc4

我对 gcc 4.3 有一个奇怪的问题，我想知道这是编译器的特定问题还是一般的 C 问题。诚然，我使用了一个非常奇怪的结构，但我喜欢它，因为它允许我执行一些原本不可能的规则。该项目分为几个模块，每个模块都有一个不透明的结构。标头中有一个`typedef struct <tag> <type>`声明，在 1 c 文件中，有一个 a`struct tag { ... };`和所有函数通过 a 引用一个元素`<type> *`。

每个模块都知道自己的结构，其他模块的结构是不可见的。在一个模块中，我不使用 1 个元素，而是使用固定的元素数组。这意味着该模块的某些函数使用指向数组的指针。我们称之为模块`wdi`。所以我有例如

```
void write_all(wdi_type (*wdis)[MAX_WDI]); 
```

并用于分配（我知道非常不寻常的语法）直接返回指向数组的右指针。

```
wdi_type (*wdi_alloc(void))[MAX_WDI]; 
```

这在 GNU-C 3.4.6 (Solaris SPARC) 下运行良好，在 cc 下，它也编译了 sun 编译器 v12（但由于应用程序的另一部分中断，无法对其进行测试）。但是在 gcc 4.3.3（也在 4.4.6 x86-64 和 4.6.2 ARM 上测试过）上，它没有。我得到编译错误`array type has incomplete element type`。我不明白为什么编译器在那个阶段需要这些信息。它也不需要其他不透明结构的大小。

它是一个 gcc 错误吗？

标准是怎么说的？

我找不到关于它的东西。我应该向 GNU 提交错误报告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:22:51.170

该标准（嗯，C2011 标准的 N1570 草案）在 6.2.5 (20) 中说

> 数组类型描述了一组连续分配的具有特定成员对象类型的非空对象，称为元素类型。**只要指定了数组类型，元素类型就应该是完整的。**

（我强调）

C99 标准中的相应段落没有那么有力：

> 数组类型描述了一组连续分配的具有特定成员对象类型的非空对象，称为元素类型。^(36))
> 
> ^(36))由于对象类型不包括不完整类型，因此无法构造不完整类型的数组。

它没有明确禁止为不完整的元素类型指定数组类型，仅构造这样的数组。

我无法找出脚注 36 何时以及为何被强调的句子所取代，但那是在[2010 年 11 月](http://compgroups.net/comp.lang.c/questions-on-incomplete-structure-type/147929)之前。

看起来 gcc-4.x 拒绝了基于新版本的代码，而 gcc-3.4.6 接受了基于旧版本的代码，所以我不认为这是一个错误，并且代码根据明确无效以现行标准。

# c++ - DLL export symbol mangling via DEF file seems to get modified

> ID：15907458
> 
> 赞同：3
> 
> 时间：2013-04-09T16:30:23.857
> 
> 标签：c++, dll, visual-studio-2012

I created a wrapper DLL using a DEF file for describing its `EXPORTS`.

From the original DLL's exports (generated using dumpbin):

```
EXPORTS
??0FooBar@@QAE@ABV0@@Z @1 
```

From the created DEF file for my wrapper DLL:

```
EXPORTS
??0FooBar@@QAE@ABV0@@Z=__E__0__ @1 
```

When checking the resulting wrapper DLL using OllyDbg, I can see that the export actually gets changed towards:

```
Names in FooBarDLL, item 0
 Address=0F085685
 Section=.text
 Type=Export
 Name=??0FooBar 
```

As you see, it is missing that additional garbledegock (`@@QAE@ABV0@@Z`) usually generated by Microsoft Visual C++ for this type of a class/function/parameter combination.

To make sure that this is not a user error on the usage of OllyDbg, I checked the original DLL's exports as well and to no surprise those looked just like the stuff I was expecting:

```
Names in FooBarDLLOriginal, item 1
 Address=1003A800
 Section=.text
 Type=Export
 Name=??0FooBar@@QAE@ABV0@@Z 
```

As I need my wrapper DLL to look exactly like the original DLL, this result is obviously no good.

**How can I prevent Visual C++ from ignoring fragments of my DEF exports definitions?**

I have tried to play with many compiler and linker options but utterly failed in getting any closer to my goal.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T01:51:36.807

I finally got it working.

As Hans Passant noted, the linker somehow does handle @-signs within export definitions in a way that I found hard to grasp...

* * *

My observations:

*   Mangled C++ function (`??0FooBar@@QAE@ABV0@@Z`) forwarded to an unmangled (`extern "C"`) function (`__E__0__`)
*   => C++ function mangling gets cropped at the first @-sign (`??0FooBar`)

*   Mangled C++ function (`??0FooBar@@QAE@ABV0@@Z`) forwarded to a mangled (`extern "C" __declspec(dllexport)`) function (`___E__0__@4`)

*   => C++ function mangling stays intact

* * *

This would be my initial test-case, now being close enough to my initial goal.

From the DEF file of the wrapper:

```
EXPORTS
??0FooBar@@QAE@ABV0@@Z=___E__0__@4 @1 
```

From the wrapper DLL's exports (generated using dumpbin):

```
ordinal hint RVA      name

   1    0 00001000 ??0FooBar@@QAE@ABV0@@Z = ___E__0__@4
   2    1 00001000 ___E__0__@4 = ___E__0__@4 
```

What really astonished me is that the export from ordinal 1 remains invisible when using OllyDbg to read the exports table. Still, when loading the DLL (`LoadLibrary`) and resolving the address of that function using `GetProcAddress(hDLL, "??0FooBar@@QAE@ABV0@@Z")`, things work just fine.

* * *

So I now have a DLL that wraps the original one, using a functionally identical exports table. It now shows an additional export of my proxy implementation, but that is no problem for my purposes. That way it is possible to create a proxy DLL that intercepts and, if needed, enhances the original implementation even when C++ mangling is involved. I somehow feel that I overcomplicated things a little but hey, it works.

For functions that I entirely pass through, I simply create a forwarding export in my DEF file, looking like this:

```
??BarFoo@WhoCares@@@Z = OriginalDllName.??BarFoo@WhoCares@@@Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T00:11:27.547

This question (and others like it) relate to creating proxy DLLs automatically using the [Code Project WRAPPIT](http://www.codeproject.com/Articles/16541/Create-your-Proxy-DLLs-automatically) tool. The solution using the observation from Till, is to:

Always declare the wrapper function to be __stdcall so that it gets decorated with a leading _ and trailing @0, and then use that in the .def file so that the original function decoration (if any) is preserved.

(When/if you replace the wrapper with a real function, you need to remember to change the call convention from __stdcall to the one needed, as well as remove __declspec(naked), add argument declarations, change or remove the .def file declaration to match etc.)

Wrapper .cpp snipet:

```
// _OriginalFunction@12
extern "C" __declspec(naked) void __stdcall __E__0__()
    {
    __asm
        {
        jmp p[0*4];
        }
    } 
```

.def file:

```
EXPORTS
_OriginalFunction@12=___E__0__@0 @1
etc. 
```

I modified my version of the WRAPPIT tool to do this automatically:

```
165c165
<                       fprintf(fdef,"%s=%s @%u\r\n",v[i].en,v[i].in,v[i].o);
---
>                       fprintf(fdef,"%s=_%s@0 @%u\r\n",v[i].en,v[i].in,v[i].o);
167c167
<                       fprintf(fdef,"%s=%s @%u NONAME\r\n",v[i].en,v[i].in,v[i].o);
---
>                       fprintf(fdef,"%s=_%s@0 @%u NONAME\r\n",v[i].en,v[i].in,v[i].o);
225c225
<               fprintf(fcpp,"// %s\r\nextern \"C\" __declspec(naked) void %s %s()\r\n",v[i].en,argv[3],v[i].in);
---
>               fprintf(fcpp,"// %s\r\nextern \"C\" __declspec(naked) void %s %s()\r\n",v[i].en,"__stdcall",v[i].in); 
```

# sql - 在 SQL 查询中搜索句子中的单独单词？

> ID：15907466
> 
> 赞同：0
> 
> 时间：2013-04-09T16:30:43.220
> 
> 标签：sql, sql-server-2005, words

如果我有一个“男士白色圆领 T 恤”的数据库条目，如果用户搜索“男士 T 恤”或“白色 T 恤”，我需要运行什么 SQL 查询来返回该条目？

我正在使用 Microsoft SQL Server 9：

使用时：

```
WHERE "Mens T-Shirt" like '%' + @SearchTerm + '%' 
```

它不会带回“男士白色圆领 T 恤”吗？

感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:21:36.697

> 如果我有一个“男士白色圆领 T 恤”的数据库条目，如果用户搜索“男士 T 恤”或“白色 T 恤”，我需要运行什么 SQL 查询来返回该条目？

```
select *
from Products
where Description like '%' + replace(@SearchTerm, ' ', '%') + '%'
-- where 'Mens White Crew T-Shirt' like '%Mens%T-Shirt%' -- Returns true
-- where 'Mens White Crew T-Shirt' like '%White%T-Shirt%' -- Returns true 
```

您可以通过替换（例如，连字符等其他字符）获得您想要的创意，**但这有点像 hack**。它不适用于“男士”或“衬衫白”

真的，这种类型的查询就是[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.90%29.aspx)的全部内容，我赞同 a_horse_with_no_name 的使用建议。

如果这是不可能的，您可能不得不走下清理和拆分搜索词*和*搜索列的路径，并动态创建您的查询。您最终可能会从您的应用程序中得到最终看起来像这样的东西（希望使用参数）：

```
exec sp_executesql N'
        select *
        from Products
        where Description like ''%'' + @SearchTerm1 + ''%''
            and Description like ''%'' + @SearchTerm2 + ''%''
            and Description like ''%'' + @SearchTerm3 + ''%''
            -- etc.',
    N'@SearchTerm1 varchar(100), @SearchTerm2 varchar(100), @SearchTerm3 varchar(100)',
    'Mens', -- What about "men" or "man", and this would still get "womens"
    'T', -- Any "T", yikes...possibly have to sanitize the column and search term to "tshirt"
    'Shirt' 
```

但这仍然不能涵盖 FTS 可以涵盖的所有内容，而且可能不会那么快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:53:12.160

您可以在用户进行搜索时为他们提供“包含精确短语”或“包含所有单词”的选项。确切的短语是您现在正在做的事情。要对所有单词进行匹配，您需要首先将搜索词拆分为单词，如下所示：

[T-SQL 拆分字符串](https://stackoverflow.com/questions/10914576/tsql-split-string)

只需确保在使用该功能时将逗号更改为空格即可。然后，您可以在搜索中添加一个 WHERE 子句，以搜索从您的 split 函数返回的每个术语：

```
WHERE Item LIKE '%Mens%'
AND Item LIKE '%T-Shirt%' 
```

请注意，这与蒂姆的答案相似，只是在他的示例中，单词必须按正确的顺序排列，而在这里它们没有。（实际上——他的编辑也有这个想法。）

但重申一下，请查看全文搜索，因为如果您可以实现它，您可能会比您可以这样做更快乐。

# .net - 在 VS 2010 C# 项目之间共享 .cs 文件

> ID：15907467
> 
> 赞同：1
> 
> 时间：2013-04-09T16:30:47.663
> 
> 标签：.net, visual-studio-2010, c#

我想知道两个单独的 C# Windows 项目（在两个单独的解决方案中）是否可以共享一个具有共享定义的 .cs 文件？如果是这样，那怎么办？

PS。第一个项目是 ASP.NET Web 应用程序，第二个项目是 C# Windows 服务（作为 Windows 控制台项目启动。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:33:06.107

添加现有项目->添加为链接（通过选择添加按钮上的下拉菜单找到）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:32:42.867

将要共享的 cs 文件/代码移动到新的**类库项目**中，并在其他 2 个项目中引用它。

# android - 如果没有该屏幕密度的资源，屏幕上会发生什么？

> ID：15907471
> 
> 赞同：1
> 
> 时间：2013-04-09T16:30:53.930
> 
> 标签：android, android-layout, android-screen-support

我有 3 种不同尺寸的资源。我把其中一个放进去`drawable-hdpi`，一个放进去，一个放进`drawable-mdpi`去`drawable-xhdpi`。现在我想知道如果我在一个设备上运行应用程序会发生什么`ldpi`（`tvdpi`或者`nodpi`如果有可能吗？？）将一个资源也放在`drawable`文件夹中会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:32:38.267

您的系统将选择“最佳”可用资源并相应地调整其大小。使用 ldpi，它可能需要一个 hdpi 并将其切成两半。

使用 tvdpi，可能是我，但我通常对它为我挑选的东西感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:36:30.453

在大多数设备上，Android 将从其他可绘制文件夹中选择最近的可用资源（例如，如果 mdpi 不可用，则从 ldpi 或 hdpi 中选择）。

但是，在某些设备上，由于实现存在错误，系统可能无法从其他文件夹中获取资源。

作为最佳实践，您应该*始终*在完全不合格的文件夹（可绘制、值等）中保留每个资源的副本/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T13:15:53.027

您必须小心将图像放在 Drawable 文件夹中而没有任何限定符。unqualified 文件夹中的图像与 mdpi 中的图像相同，因此如果 unqualified 文件夹中的图像很大，并且您尝试将其分配给 xhdpi 手机中的 ImageView，Android 将尝试放大您的图像，并且可能它将创建“在 XXXXXX 字节分配上内存不足”

# javascript - 从父页面清除子页面中的图形（使用“数据”html标签创建）

> ID：15907472
> 
> 赞同：0
> 
> 时间：2013-04-09T16:30:54.663
> 
> 标签：javascript, jquery, html, window, parent-child

我在 SO::: 看到了与此类似但不完全相同的问题

在我的 webapp 中，通过单击此 html 的按钮从父级创建一个“子”窗口：

```
<div style='width:100%;  height:100%'><object type="text/html" name ="mapPage" style='width:100%;  height:100%' data='mapPage.html'>

            </object></div> 
```

我想通过单击按钮从父页面运行另一个功能，该按钮将从子页面中清除图形。我该怎么做？由于我没有使用“window.open”来创建孩子，我认为我不能以这种方式处理这个问题吗？我也没有使用 iFrame，所以我相信“window.parent”或类似的东西也不是一个选择......想法？谢谢，杰森

# sql - 连接三个表不返回数据

> ID：15907474
> 
> 赞同：2
> 
> 时间：2013-04-09T16:31:04.943
> 
> 标签：sql, jointable

我知道我遗漏了一些东西并且我已经完成了我的研究，但它只是没有来找我，所以我想我会发布我的问题。

我有三个表（`Jobs`、`Persons`和`Orgs`）。Jobs 表有一个`org_surveyed_by_id`和`person_requestor_id`。它们是外键，即它们分别等于 和 的`Orgs.Org_id`值`Persons.Person_id`。

我试图将这三个表链接在一起，并从人员表和组织表中获取信息。我可以加入一个，但是当我加入第二个时，我没有得到任何结果。

我究竟做错了什么？

```
SELECT sj.JOB_NUMBER, sj.TITLe, sj.JOB_CATEGORY, 
       sj.PURPOSE, sj.ORG_SURVEYED_BY_ID, 
       sj.PERSON_REQUESTOR_ID, os.org_full_name
FROM SURVEY_JOBS sj
    JOIN organizations os ON sj.org_surveyed_by_id = os.org_id
    JOIN persons ps ON sj.person_requestor_id = ps.person_id
WHERE SURVEY_JOB_ID = :P30_SURVEY_JOB_ID 
```

第二次加入给我带来了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:40:09.850

你的`JOIN`看起来很好，所以桌子上可能没有数据`persons`，或者桌子`person_requestor_id`上`SURVEY_JOBS`是`NULL`. 尝试使用`LEFT JOIN`s：

```
SELECT  sj.JOB_NUMBER, 
        sj.TITLe, 
        sj.JOB_CATEGORY, 
        sj.PURPOSE, 
        sj.ORG_SURVEYED_BY_ID, 
        sj.PERSON_REQUESTOR_ID, 
        os.org_full_name,
        ps.SomeColumnHere
FROM SURVEY_JOBS sj
LEFT JOIN ORGANIZATIONS os 
    ON sj.org_surveyed_by_id = os.org_id
LEFT JOIN PERSONS ps 
    ON sj.person_requestor_id = ps.person_id
WHERE sj.SURVEY_JOB_ID = :P30_SURVEY_JOB_ID 
```

您仍然应该得到结果，如果不满足表的`JOIN`条件，您将看到该表的列的值。`PERSONS``NULL`

# windows-phone-8 - 什么样的 ID 进入 RequestProductPurchaseAsync？

> ID：15907475
> 
> 赞同：3
> 
> 时间：2013-04-09T16:31:06.430
> 
> 标签：windows-phone-8, in-app-purchase, windows-store-apps, windows-store

请问Windows Phone 8的`ProductID`参数是什么意思？`CurrentApp.RequestProductPurchaseAsync`那是我在开发中心的“属性”页面上注册产品时提供的“产品标识符”吗？还是商店内部使用的应用内产品的 GUID？

我问的原因是，一些与商店相关的 API 确实需要一个 GUID。

我的应用只有一个产品；没有选择过程。我宁愿`RequestProductPurchaseAsync`在不先检索列表的情况下使用硬编码的 productId 进行调用。

编辑：请仅根据经验回答。我读过 MSDN；它允许两种解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:20:27.583

**通过在真实手机上进行测试：**该场景有效。无需拉列表。productId 应该是您在开发中心中作为“产品标识符”键入的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:53:59.093

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh967814.aspx) `productId`参数指定要购买的产品或功能的 id。它是您在商店中注册应用程序时提供的产品标识符。每个应用内商品的 ProductId 必须是唯一的

[适用于 Windows Phone 8 的应用内购买](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949%28v=vs.105%29.aspx)

[Windows Phone 8 的应用内购买测试](http://msdn.microsoft.com/en-in/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx)

[将订阅作为应用内购买添加到 Windows Phone 应用](https://stackoverflow.com/questions/15615697/adding-subscriptions-to-windows-phone-app-as-an-in-app-purchase)

# xslt - 通过 solr 匹配 XSLT

> ID：15907477
> 
> 赞同：0
> 
> 时间：2013-04-09T16:31:21.010
> 
> 标签：xslt

我有一个必须为 solr 形成的 XSL。xslt 应该对我创建的其他 xml 有效。

**XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:cb="http://schema.xslt.com/schema"
  version="1.0">
  <xsl:template match="/">
  <docs>
  <xsl:choose>
    <xsl:when test="cb:products">
        <xsl:apply-templates select="@*|*" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:apply-templates select="cb:tire" />
    </xsl:otherwise>
  </xsl:choose>
  </docs>
  </xsl:template>
  <xsl:template match="cb:tire">
      <doc>
        <xsl:apply-templates select="@*|*"/>
      </doc>
  </xsl:template>
  <xsl:template match="*/*[@name]">
    <xsl:call-template name="field">
      <xsl:with-param name="name" select="concat(name(),'_',@name)"/>
    </xsl:call-template>
  </xsl:template>
  <xsl:template match="*/*[not(@name)]">
    <xsl:call-template name="field"/>
  </xsl:template>
  <xsl:template match="@*">
    <xsl:call-template name="field">
      <xsl:with-param name="value" select="."/>
    </xsl:call-template>
  </xsl:template>
  <xsl:template match="*[parent::cb:tire]">
    <xsl:choose>
      <xsl:when test="not(text())">
        <xsl:apply-templates select="*"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:call-template name="field"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
  <xsl:template name="field">
    <xsl:param name="name" select="name()"/>
    <xsl:param name="value" select="text()"/>
    <doc>
      <field name="{$name}">
        <xsl:value-of select="$value"/>
      </field>
    </doc>
  </xsl:template>
  <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**XML:**

```
<products>
  <tire trademark="1E" model="HP" season="1" product-type="tire"
    id="details/1E-HP" host="fe"
    hostDetailId="details/205" hostDbID="7">
    <price>51.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </tire>
  <tire trademark="FIRNE" model="FHSZ90u*" season="1" product-type="tire"
    id="details/FIRNE-FHSZ90u*" host="fe"
    hostDetailId="details/205" hostDbID="7">
    <price>72.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </tire>
</products> 
```

结果应该是。例子：

```
<docs>
  <doc>
    <field name="hostDbID">15</field>
    ....
  </docs>
  <doc>
    <field name="hostDbID">15</field>
    ....
  </docs>
  <doc>
    <field name="hostDbID">15</field>
    ....
  </docs>
</doc> 
```

问题不在于“math”不同的属性和元素。模板不正确？

```
 <xsl:template name="field">
    <xsl:param name="name" select="name()"/>
    <xsl:param name="value" select="text()"/>
    <doc>
      <field name="{$name}">
        <xsl:value-of select="$value"/>
      </field>
    </doc>
  </xsl:template> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:52:30.347

有很多问题使我无法确定地给出答案：

*   您预期的输出 XML 格式不正确（例如，您没有`<doc>`用一个元素关闭一个`<docs>`元素）。
*   我不明白为什么`15`会成为有效值`<field name="hostDbID">`（基于您的示例源 XML）。
*   最后，将`....`您预期的 XML放入其中*绝不*是一个好主意，因为它迫使我们猜测您想要什么。

也就是说，这是我对所提供信息的最佳尝试。如果我错了，请告诉我，我会尽力提供帮助。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <docs>
      <xsl:apply-templates/>
    </docs>
  </xsl:template>

  <xsl:template match="tire">
    <doc>
      <xsl:apply-templates select="@*|node()"/>
    </doc>
  </xsl:template>

  <xsl:template match="tire/@*">
    <field name="{name()}">
      <xsl:value-of select="."/>
    </field>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<products>
  <tire trademark="1E" model="HP" season="1" product-type="tire"
    id="details/1E-HP" host="fe"
    hostDetailId="details/205" hostDbID="7">
    <price>51.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </tire>
  <tire trademark="FIRNE" model="FHSZ90u*" season="1" product-type="tire"
    id="details/FIRNE-FHSZ90u*" host="fe"
    hostDetailId="details/205" hostDbID="7">
    <price>72.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </tire>
</products> 
```

**...我*假设*产生了正确的输出：**

```
<?xml version="1.0" encoding="UTF-8"?><docs>
  <doc>
    <field name="trademark">1E</field>
    <field name="model">HP</field>
    <field name="season">1</field>
    <field name="product-type">tire</field>
    <field name="id">details/1E-HP</field>
    <field name="host">fe</field>
    <field name="hostDetailId">details/205</field>
    <field name="hostDbID">7</field>
    <price>51.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </doc>
  <doc>
    <field name="trademark">FIRNE</field>
    <field name="model">FHSZ90u*</field>
    <field name="season">1</field>
    <field name="product-type">tire</field>
    <field name="id">details/FIRNE-FHSZ90u*</field>
    <field name="host">fe</field>
    <field name="hostDetailId">details/205</field>
    <field name="hostDbID">7</field>
    <price>72.95</price>
    <currency>€&lt;/currency>
    <vat>true</vat>
    <content>no description</content>
  </doc>
</docs> 
```

# java - 从 JFrame 访问方法

> ID：15907480
> 
> 赞同：0
> 
> 时间：2013-04-09T16:31:34.733
> 
> 标签：java, jframe

我制作了以下课程`StringToolsNS123`，其中包含许多方法

```
public class StringToolsNS123 {

private String str;

public StringToolsNS123(String s) {
    str = s;
}

public String getString() {
    return str;
}

public void setString(String s) {
    str = s;
}

public String toString()    {
    return str;
}

public int countWord()    {

     String st = " " + str;
     char curr, prev ;
     int count =0;
     for (int i = 0; i <= st.length()-2; i++)
     {
        prev = st.charAt(i);
        curr = st.charAt(i+1);
        if (Character.isLetter(prev) == false && Character.isLetter(curr) == true)
         {
             count++;
         }
     }
     return count;
}
public void firstCaps (String str)
{
    String temp = " " + str ;
    temp = temp.toLowerCase();
    String newStr= "";
    char prev , curr ; 
    for (int loop = 1; loop < temp.length()-1; loop++)
    {
        prev = temp.charAt(loop - 1);
        curr = temp.charAt(loop);
        if (Character.isLetter(prev)== false && Character.isLetter(curr)== true )

        {
            newStr = newStr + Character.toUpperCase(curr);

        }
        else
        {
            newStr = newStr + curr ;
        }

    }
}
public void removeVowels(String str)
{
    String temp = " " + str ;
    temp = temp.toLowerCase();
    String newStr = " ";
    char prev , curr ;
    final String VOWELS = "aeiouAEIOU";

    for (int i = 1; i < temp.length()-1; i++)
    {
        prev = temp.charAt(i-1);
        curr = temp.charAt(i);
        if (Character.isLetter(prev)== false && VOWELS.indexOf(temp.charAt(i))>= 0 || VOWELS.indexOf(temp.charAt(i))== - 1 )
        {
            newStr = newStr + temp.charAt(i);
        }
    }
   str = newStr ;

}
private String encodeWord (String w )
{
    final String VOWELS = "aeiouAEIOU";
    if (VOWELS.indexOf(w.charAt(0))== -1 )

    {
        w = w.substring(1) + w.charAt(0);

    }
     w = w + "ay";
     return  w; 
}
public void pigLatin (String str)
{
    String singleWord, temp = " " + str + " ";
    int begin = 0;
    temp = temp.toLowerCase ();
    String pigStr = " ";
    char prev, curr;
    for (int loop = 1; loop < temp.length ()-1; loop++)
    {
        prev = temp.charAt(loop-1);
        curr = temp.charAt(loop);
        if (Character.isLetter(prev) == false && 
                Character.isLetter(curr) == (true))
        {
            begin = loop;
        }
        if (Character.isLetter(prev) == true && 
                Character.isLetter(curr) == (false))
    {
        singleWord = temp.substring (begin,loop);
        pigStr = pigStr + encodeWord (singleWord) + " "; 
    }
    }
}
public String reverse(String str){
    int strLeng = str.length()-1;
    String reverse = "", temp = "";

    for(int i = 0; i <= strLeng; i++){
        temp += str.charAt(i);
        if((str.charAt(i) == ' ') || (i == strLeng)){
            for(int j = temp.length()-1; j >= 0; j--){
                reverse += temp.charAt(j);
                if((j == 0) && (i != strLeng))
                {
                    reverse += " ";
                }
            }
            temp = "";
        }
    }

    return reverse;
}

} 
```

我遇到的问题是从同一个包中的 JFrame 访问这些方法，我试过了

```
 StringToolsNS123 str = new StirngToolsNS123 () ; 
```

但它给出了一个错误，说*找不到类*？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:33:24.973

的构造函数`StringToolsNS123`需要一个`String`

```
StringToolsNS123 str = new StringToolsNS123("some string"); 
```

您需要从 getFirstCaps 返回一个 String 才能从`JFrame`该类获得访问权限：

```
public String firstCaps(String str) {
   ...
   return newStr;
} 
```

* * *

通常，像这样的类被实现为带有`static`方法的实用程序类。在这种情况下，不需要实例，它的用法是：

```
String firstCaps = MyStringUtilities.getFirstCaps("some string"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:52:37.137

除了你的类的唯一构造函数需要一个字符串（参见 Reimeus 的回答）这一事实之外，你的调用中还有一个错字：

```
StringToolsNS123 str = new StirngToolsNS123 () ; 
```

必须

```
StringToolsNS123 str = new StringToolsNS123 ("some text") ; 
```

请注意“StringToolsNS1232”中的错字。我不确定您是否从实际代码中复制了该错误，但调用不存在的构造函数会导致“构造函数 StringToolsNS123() 未定义”而不是“找不到类”。

# mysql - 没有权限的用户的 PDO 错误信息

> ID：15907481
> 
> 赞同：0
> 
> 时间：2013-04-09T16:31:37.410
> 
> 标签：mysql, pdo

我只在 mysql 用户上设置了 SELECT 权限

然后，当我运行`UPDATE ...`查询

```
$sth = $db->prepare( $update_sql );

if (!$sth) {
    echo "fail";
}
else {
    echo "Ok";
} 
```

打印`Ok`，但在表中没有更新。

问题：为什么打印`Ok`而不是打印`fail`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:34:18.027

您可能需要`execute`您准备的查询：

```
$sth->execute(); 
```

准备好的语句本身不对数据库做任何事情。该[文档](http://php.net/manual/en/pdo.prepare.php)提供了更多细节。

请记住，`exceute`调用是您可以绑定[SQL 占位符值](http://bobby-tables.com/php)的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:37:38.427

...因为您没有*执行*该语句 - 您只是*准备*了它。

```
function try_to_run($sql, $db)
{
   $sth = $db->prepare( $update_sql );
   if (false===$sth) return false;
   $r=$sth->execute();
   return $r;
}

if (false===try_to_run($sql, $db)) {
   echo "fail";
} else {
   echo "Ok";
} 
```

# python - numpy 自除的意外行为

> ID：15907484
> 
> 赞同：7
> 
> 时间：2013-04-09T16:31:50.540
> 
> 标签：python, numpy, division

```
def f(x):
    x=x/5.
    return x
def g(x):
    x/=5.
    return x

x_var = np.arange(5,dtype=np.double)
f(x_var)
print x_var
g(x_var)
print x_var

Output:
[ 0\.  1\.  2\.  3\.  4.]
[ 0\.   0.2  0.4  0.6  0.8] 
```

这种行为对我来说有点奇怪，我一直认为 x/=5。相当于 x=x/5。. 但显然 g(x) 函数不会使用 /= 操作创建新引用。任何人都可以为此提供解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T16:36:59.587

> 我一直认为 x/=5。相当于 x=x/5

它是，除非类重写`__idiv__`操作符，就像这样`numpy.ndarray`做。 `numpy.ndarray`覆盖它以就地修改数组，这很好，因为它避免了在不需要复制时创建数组的新副本。您可以猜到，它还覆盖了其余的`__i*__`运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T16:47:38.997

Python 的就地运算符允许操作*修改*等式左侧的对象，而不是创建新对象。您将看到与`list`s 和其他内置可变类型相同的行为：

```
x = []
y = x
x += [1]
print y   # prints [1] because x still refers to the same object as y
x = x + [2]
print x   # prints [1, 2] for obvious reasons
print y   # prints [1] again because x has been rebound to a new list
          # while y still refers to the original one 
```

所以这是预期的行为。

在处理不可变类型时，当然会创建一个新对象，因为无法修改现有对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:17:38.930

> 我一直认为 x/=5。相当于 x=x/5。

它不是。当你这样做时`x=x/5.`，你实际上是在后台执行**两个**单独的操作：

```
temporary = x/5.
x = temporary 
```

而当您使用`/=`运算符时，您明确要求 Python 修改您的对象`x`，而无需创建临时对象。如其他答案中所述，`/`运算符调用`__div__`对象的方法（如果有），同时`/=`调用其`__idiv__`方法。

如果您要修改的对象很大，则就地修改非常有用：无需创建 as-large 临时对象。但是，如果你不小心，它可能会咬你。特别是，让函数在没有警告的情况下修改其输入参数通常不是一个好主意......

# css - div 突破其容器

> ID：15907485
> 
> 赞同：0
> 
> 时间：2013-04-09T16:31:51.717
> 
> 标签：css, html

我相信这个问题有一个简单的答案，但我有一个问题，我的内容 div 容器没有延伸到足以让我滚动浏览我的文本框 div。

似乎在内容 div 下方有一个额外的 200-300 像素，这使我无法看到文本框 div 中的所有内容，即使不需要滚动，我也无法查看页面，因为我的背景颜色覆盖了最后的 200-300 px 的文本数据。我尝试在文本框内和内容 div 的底部放置一个空 div，但没有用...这是我的代码。如果您需要更多信息来帮助我，我可以提供。

相关CSS：

```
#imgscroll{
    height:200px;
    width:100%;
    position:absolute;
    overflow:hidden;
    z-index:998;
}
#content {
    position: absolute;
    left: 254px;
    top: 0px;
    width: *;
    height:auto;
    min-width:500px;
    overflow:hidden;
    background-color: #FFF;
    z-index:1;
}
#textbox{
    position:relative;
    top:210px;
    background-color:#CFF;
    margin:10px;
    overflow:hidden;
    padding:12px;
    min-width:500px;
}
#footer{
    position:relative;
    background-color: #099;
    text-decoration: none;
    color: #FFF;
    height: 30px;
} 
```

相关HTML：

```
<div id="content">
<div id="imgscroll">

<ul id="scroller">

    <li><img src="images/slider/image-1.JPG" width="267" height="200"></li>

    <li><img src="images/slider/image-2.jpg" width="267" height="200"></li>

    <li><img src="images/slider/image-3.JPG" width="267" height="200"></li>

    <li><img src="images/slider/image-4.JPG" width="267" height="200"></li>

    <li><img src="images/slider/image-5.jpg" width="267" height="200"></li>

    <li><img src="images/slider/image-6.JPG" width="267" height="200"></li>

</ul>

</div>

<div id="textbox">
<h1>Home</h1>
<br />
All my text is here empty divs below don't fix it. Usually this text is much longer and 

whether there is scrolling involved or not, it is still an issue.<br />
<br /><br /><br /><br /><br /><br /><br /> I cannot see this text at the bottom.
<div> </div>
</div>
<div id="footer">
(c) My Company Name 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:45:03.643

所有职位怎么了？这就是问题的原因-

```
#imgscroll{
    height:200px;
    width:100%;
    /*position:absolute;*/
    overflow:hidden;
    z-index:998;
} 
```

[http://jsfiddle.net/Riskbreaker/xZXUC/](http://jsfiddle.net/Riskbreaker/xZXUC/)

如果你有一个理由，那么我明白你，但那是万恶之源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:46:07.240

我不知道这段代码在什么上下文中使用，但你可以删除很多`position`定义：

*   `position: absolute;`从中删除`#imgscroll`
*   删除`position: relative;`表格`#textbox`和`#footer`

然后要显示整个文本框内容，您还应该删除`overflow: hidden`form `#textbox`。

我不知道这是否正是你想要的。看看[小提琴](http://jsfiddle.net/DNTBk/1/)。

# c# - 在表单上显示课程内容

> ID：15907488
> 
> 赞同：0
> 
> 时间：2013-04-09T16:31:58.523
> 
> 标签：c#, list, class

我有一个由一个类填充的工作列表（或者我假设），并试图在表单上的一组文本框中显示唯一的记录。

```
public partial class frm_people : Form
{

    public frm_people()
    {
        // Loads the Form
        InitializeComponent();

        LoadData();

        ShowData();

    }

    // Global Variables

    private People peopleClass;
    private ArrayList peopleArrayList;

    private int numberOfPeople;
    private int currentPeopleShown;

    private void ShowData()
    {
        // Add to Text Box based on current Record
        txt_peopleName.Text = ((People)peopleArrayList[currentPeopleshown]).name;**
    }

    private void LoadData()
    {

        List<People> peopleList = new List<People>();

        People data = new People("James Bond", false, "Cardiff");

        peopleList.Add(data);

        numberOfPeople = 1;
        currentPeopleShown = 0;
    }
} 
```

我收到一个错误（由 ** 指出）：

> “你调用的对象是空的。”

我知道类是通过引用使用的，如何尝试这种显示记录的方式？最终目标是能够通过使用`currentPeopleShown`变量在多个记录之间自由滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:35:05.510

试试这个：

```
 private void ShowData()
    {
        // Add to Text Box based on current Record
      if(peopleArrayList[currentPeopleshown]!=null)
        txt_peopleName.Text = ((People)peopleArrayList[currentPeopleshown]).name;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:40:45.640

您的 peopleList 超出范围。

```
List<People> peopleList = new List<People>();

private void LoadData()
{
  //...
} 
```

该数组没有被使用，所以使用 peopleList：

```
txt_peopleName.Text = peopleList[currentPeopleshown].name; 
```

你不需要`numberOfPeople`变量，你可以使用`peopleList.Count`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:41:09.053

你在哪里设置 peopleArrayList？

尝试以下几行：

```
private void LoadData()
{
    peopleArrayList = new ArrayList();
    People data = new People("James Bond", false, "Cardiff");

    peopleArrayList.Add(data);

    numberOfPeople = 1;
    currentPeopleShown = 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T16:42:21.643

或者您可以一起消除 ArrayList 并执行此操作

```
public partial class frm_people : Form
{
   List<People> peopleList;
    public frm_people()
    {
        // Loads the Form
        InitializeComponent();

        peopleList = new List<People>();
        LoadData();

        ShowData();

    }

    // Global Variables

    private People peopleClass;

    private int numberOfPeople;
    private int currentPeopleShown;

    private void ShowData()
    {
        // Add to Text Box based on current Record
        txt_peopleName.Text = (peopleList[0]).name;**
    }

    private void LoadData()
    {

        People data = new People("James Bond", false, "Cardiff");

        peopleList.Add(data);

        numberOfPeople = 1;
        currentPeopleShown = 0;
    }
} 
```

# c# - 字典中对象的默认值

> ID：15907490
> 
> 赞同：1
> 
> 时间：2013-04-09T16:32:06.313
> 
> 标签：c#, .net, dictionary

我有一个像这样设置的字典： `Dictionary <string, ItemProperties>`

ItemProperties 对象如下所示（基类是抽象的）：

```
public class StringProperty : ItemProperty
{
    public string RawProp { get; set; }
    public string RenderedProp { get; set; }
} 
```

有没有办法像这样获取 RenderedProp 值（假设字典变量称为属性）：

```
string value = Properties[keyname]; 
```

相对

```
string value = Properties[keyname].RenderedProp; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:33:37.697

`PropertyDictionary`您可以使用自定义索引器方法创建自己的。

```
public class PropertyDictionary
{
    Dictionary <string, StringProperty> dictionary;

    public PropertyDictionary()
    {
        dictionary = new Dictionary <string, StringProperty>();
    }

    // Indexer; returns RenderedProp instead of Value
    public string this[string key]
    {
        get { return dictionary[key].RenderedProp; }
        set { dictionary[key].RenderedProp = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T16:33:56.137

不，如果您想将`RenderedProp`值存储在字典中，只需将其设为 a`Dictionary<string, string>`并适当添加即可。如果您*确实*需要`ItemProperties`字典中的完整内容，但经常想要获取`RenderedProp`，您总是可以创建一个方法来做到这一点（无论字典所在的位置）。

请注意，如果`RenderedProp`仅在（不在 的其他子类中）*中*指定，那么您需要考虑字典中的非 StringProperty 值会发生什么。`StringProperty``ItemProperties`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T16:34:35.187

有一个解决方案，但我强烈建议不要这样做：定义一个隐式转换运算符 from `StringProperty`to `string`，然后返回`RenderedProp`给调用者：

```
public class StringProperty : ItemProperty
{
    public string RawProp { get; set; }
    public string RenderedProp { get; set; }
    public static implicit operator string(StringProperty p)
    {
        return p.RenderedProp;
    }
} 
```

`Dictionary`需要使用，而`StringProperty`不是`ItemProperty`作为值类型以便操作员应用。您的`Properties[keyname].RenderedProp`代码也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T16:50:30.890

你可以为你的 Dictionary<> 实现一个扩展方法：

```
public static int GetRP(this Dictionary <string, ItemProperties> dict, string key)
{
    return dict[key].RenderedProp;
} 
```

不过，您必须直接调用它，而无需使用索引器表示法。如果您使用短名称，则总体代码也同样短。

# java - 在 Spring MVC 中扩展带注释的控制器

> ID：15907494
> 
> 赞同：12
> 
> 时间：2013-04-09T16:32:14.530
> 
> 标签：java, spring-mvc

我正在做一个小项目，并且有一些现有的代码，我想从我的更改中保持干净，因此我需要扩展一个带注释的控制器，但这不起作用：

```
package a;

@controller
public class BaseController {
    // Autowired fields

    protected x toExtend() {
         // do stuff
    }

    @RequestMapping(value = "/start")
    protected ModelAndView setupForm(...) {
        toExtend();
        // more stuff
    }
}

package b;

@controller
public class NewController extends BaseController {
    // Autowired fields

    @Override
    protected x toExtend() {
         super.toExtend();
         //new stuff
    }
} 
```

扫描包 a 和 b 以查找控制器，我无法更改它。我真的没想到这会起作用，因为 @RequestMapping(value = "/start") 在两个控制器中都是多余的。因此，我得到了一个例外。

所以我的问题是，是否真的可以在不更改 BaseController 的情况下扩展这样的注释驱动控制器？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-11-05T16:05:36.987

您可以通过另一个弹簧控制器扩展一个弹簧控制器。

当一个 Spring MVC 控制器扩展另一个控制器时，基本控制器的功能可以通过子控制器的请求 URL 直接由子控制器使用。您可以在此处获取更多详细信息[扩展 Spring 控制器](http://www.kscodes.com/spring-mvc/spring-mvc-controller-extends-another-controller/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:55:27.563

如果`BaseController`' 的注解不能被移除，那么你可以使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)来获得继承。

```
@Controller
public class NewController {
    // Autowired fields
    BaseController base;

    protected x toExtend() {
         base.toExtend();
         //new stuff
    }
} 
```

在通常情况下，要么`BaseController`没有`@Controller`注释，因此可以将常用的控制器方法放入内部`BaseController`以由**实际控制器扩展**

# highcharts - Highcharts饼图忽略percentageDecimals工具提示设置并存在浮点不准确问题

> ID：15907496
> 
> 赞同：8
> 
> 时间：2013-04-09T16:32:19.247
> 
> 标签：highcharts, decimal, percentage, pie-chart, floating-accuracy

在饼图上显示工具提示时，Highcharts 3.0 似乎存在浮点数准确性问题。通过使用 highcharts 演示饼图之一 - [Pie with Legend](http://www.highcharts.com/demo/pie-legend) ，我能够重新创建确切的错误。单击“在 JsFiddle 中编辑”以编辑 javascript。

在 javascript 面板中，查找系列和数据部分。保留 Firefox 和 IE 数据并丢弃其余数据，因此我们可以只关注 2 块饼图。两个数据卡盘的百分比加起来不是100，所以highcharts会为我们重新计算百分比。单击顶部的“运行”按钮，将鼠标悬停在切片上，百分比非常准确，具有最大小数位数。但是等等，看看 javascript 工具提示选项，highcharts 显然忽略了“percentageDecimals: 1”设置。这是问题#1。

现在让我们手动编辑数据百分比，如下所示： [ 'Firefox', 57.7 ], [ 'IE', 42.3] 所以它们加起来正好是 100.0。再次点击运行按钮，切片工具提示显示“Firefox：57.0000000000001%”和“IE：42.3%”。无论百分比加起来是否为 100，看起来都进行了百分比重新计算，因此在这里引入了一个小的浮点不准确性。这是问题#2。如果“percentageDecimals”四舍五入在这种情况下有效，这个问题可能会被掩盖。

我想知道：*其他人看到同样的问题并有某种解决方法吗？* highcharts 能否回应这些问题并让我们知道它们是否是已知的错误？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-10T02:52:09.313

根据 Billy Reverb 的评论回答这个问题：

只需替换此属性：

```
tooltip: {
    pointFormat: '{series.name}: <b>{point.percentage}%</b>',
    percentageDecimals: 1
} 
```

为了这：

```
tooltip: {
    formatter: function () {
                   return this.point.name + ': <b>' + Highcharts.numberFormat(this.percentage, 1) + '%</b>';
               }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-16T12:37:02.753

一个更简单的解决方案是使用

```
{point.percentage:.1f}% 
```

在 pointFormat 字符串中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T17:00:12.390

对我来说，赞成的解决方案不起作用：

```
tooltip: {
    formatter: function () {
                   return this.point.name + ': <b>' + Highcharts.numberFormat(this.percentage, 1) + '%</b>';
               }
} 
```

但这确实：

```
this.percentage.toFixed(1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-07T15:55:12.487

在你去head-desk-head-desk之前，同时尝试格式化百分比。

以下是一些方法：

1.  `(Math.round(this.point.percentage*100)/100) + ' %'`
2.  `Highcharts.numberFormat(this.percentage, 1) + '%'`
3.  `this.percentage.toFixed(1)`
4.  `{point.percentage}% or {point.percentage:.1f}%`

我经常在工具提示和标签中使用＃4，并且在不使用自定义格式化程序功能时。

# master-pages - 链接 aspx.cs 文件和母版页

> ID：15907497
> 
> 赞同：2
> 
> 时间：2013-04-09T16:32:25.313
> 
> 标签：master-pages

我已经为这个任务苦苦挣扎了很长一段时间。我需要使用母版页并将其链接到两个 ASPX 页面。任何帮助或建议都会很有帮助。我的问题是我正在通过这个母版页运行两个程序，但我无法让它们正常工作。当我单击提交按钮时，它不会发布任何结果，他们都没有母版页。谢谢！

这是我的母版页代码：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
    <link href="Math.css" rel="Stylesheet" type="text/css" /> 
</head>
<body>
    <form id="form1" runat="server">
    <div id="divWrapper">
        <div id="mainContent" > <!-- This div will contain the main content of the page, unique -->
        <asp:ContentPlaceHolder id="contentMain" runat="server">

        </asp:ContentPlaceHolder>
        </div>
        <div id="divLeftContent" > <!-- Contains left content, buttons -->
            <div id="LnkMenuIndividualButtons">

                <!-- #include file="leftcontent.htm" -->
            </div>
        </div>
    </div>
    </form>
</body>
</html> 
```

继承人 triangles.aspx

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/MasterPage.Master" AutoEventWireup="true"
    CodeFile="Triangles.aspx.cs" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
 <% trianglePossible();
    primeNumbers(); %>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="contentMain">

</asp:Content> 
```

这是 Triangles.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public void trianglePossible()
    {
        try
        {
            decimal length1 = decimal.Parse(Request.Form["Text1"]);
            decimal length2 = decimal.Parse(Request.Form["Text2"]);
            decimal length3 = decimal.Parse(Request.Form["Text3"]);
            if ((length1 + length2 > length3) && (length2 + length3 > length1) && (length1 + length3 > length2))
            {
                Response.Write(" This triangle is possible. ");
            }
            else
            {
                Response.Write(" This triangle is not possible. ");
            }
        }
        catch
        {
            Response.Write(" Go back and fix error, must contain all numerics only. ");
        }

    }

   public void primeNumbers()
       {
        int primeNumber1 = int.Parse(Request.Form["Text4"]);

        bool prime = true;
        for (int i = 2; i < primeNumber1 - 1; i++)
        {

            if (primeNumber1 % i == 0)
            {
                prime = false;
            }

        }
        if (prime == true)
        {
            Response.Write(" This is a prime number! ");

        }
        else
        {
            Response.Write(" This is not a prime number! ");
        }
        if (primeNumber1 > 999 || primeNumber1 < 0)
        {
            Response.Write(" Please return and enter a number between the values of 0 and 999\. ");
        }
    }

} 
```

这是 TriangleLength.aspx

```
<%@ Page Language="C#" AutoEventWireup="true"  MasterPageFile="~/MasterPage.master" CodeFile="TriangleLength.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="contentMain" Runat="Server">

    <form action="Triangles.aspx" method="post">
    <p>&nbsp;&nbsp;&nbsp;&nbsp;Triangle Lengths</p>
    <p><input name="Text1" id="Text1" type="text" /></p>
    <p><input name="Text2" id="Text2" type="text" /></p>
    <p><input name="Text3" id="Text3" type="text" /></p>
    <input type="submit" value="Submit" />
    </form>   

</asp:Content> 
```

最后，这里是 Prime NUMbers.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/MasterPage.master" CodeFile="Triangles.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="contentMain" Runat="Server">

<form action="Triangles.aspx" method="post">
  <p>Prime Numbers</p>
    <p><input name="Text4" id="Text4" type="text" /></p>
    <input type="submit" value="Submit" />
     </form>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:38:34.867

尝试`<form>`从您的主页面或 .aspx 页面中删除。

# php - 自动填写带有外部页面链接的表单

> ID：15907507
> 
> 赞同：0
> 
> 时间：2013-04-09T16:32:45.467
> 
> 标签：php, html, forms, hyperlink

我正在寻找一种方法让文本字段和提交按钮将我带到一个新站点，填写文本输入字段并按 Enter。我要链接的页面是[Googles speed test](https://developers.google.com/speed/pagespeed/insights)。我知道我也可以像这样链接到 spped 测试结果： `https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2FYOURDOMAINHERE&mobile=false` 但是我怎样才能让客户在我的网站上填写“测试我的页面”字段，点击提交，然后它会创建一个链接： `https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2FYOURDOMAINHERE&mobile=false` 在他们的字段提交中链接的“YOURDOMAINHERE”区域。这似乎链接不是一项艰巨的任务，但我无法绕过它，php，javascript？没有把握。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:18:16.030

你可以做类似的事情，虽然如果谷歌根据他们的 TOC 抓住你，他们*可以*锁定或禁止你的帐户：

```
<?php
if (!empty($_POST['url'])){
    $url = preg_replace('!http[s]://!','',strip_tags($_POST['url']));
    $url = preg_replace('![%]!','_',urlencode($url));
    $newlink = "https://developers.google.com/speed/pagespeed/insights#url=$url&mobile=false";

    $page = '<!doctype html>
<html lang="en">
<head>';

    $page .= '<script type="text/javascript">
    function replaceDoc()
  {
  window.location.replace("'.$newlink.'")
  }
    </script>';

$page .= '<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Page for testing</title>
</head>
<body onload="replaceDoc()">

    <a href="'.$newlink.'">Test your page.</a>

</body>
</html>
    ';
} else {
 $page = '<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Page Checker</title>
</head>
<body>
<form method="post">
Enter your URL:<br />
<input name="url" type="text" style="width:50em;" />
<input type="submit" name="submit" value="Check your page" />
</form>
</body>
</html>';

}

echo $page;
?> 
```

小心直接注入标头：

```
<?php
if (!empty($_POST['url'])){
    $url = preg_replace('!http[s]://!','',strip_tags($_POST['url']));
    $url = preg_replace('![%]!','_',urlencode($url));
    $newlink = "https://developers.google.com/speed/pagespeed/insights#url=$url&mobile=false";

    header("Content-Type: application/x-www-form-urlencoded");
    header("Referer: https://developers.google.com/speed/pagespeed/insights");
    header("Location: $newlink");

} else {
 $page = '<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Page Checker</title>
</head>
<body>
<form method="post">
Enter your URL:<br />
<input name="url" type="text" style="width:50em;" />
<input type="submit" name="submit" value="Check your page" />
</form>
</body>
</html>';

}

echo $page;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:40:21.770

做一个 submit.php

使用“域名”将表单提交到该脚本

你的 php 应该看起来像这样..

```
$domainName = $_POST["domainname"];
$redirectURL = "https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2F".$domainName."&mobile=false";
header('Location: $redirectURL'); 
```

该脚本应该可以工作并没有对其进行测试，但它会给你一个想法......

确保你也清理你的输入...... :) 祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:42:50.197

简单的`str_replace`怎么样？就像是：

```
<?php

$link = "https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2FYOURDOMAINHERE&mobile=false";
$replace = "YOURDOMAINHERE";

if(isset($_POST['myDomain'])){
  $newHeader = str_replace($replace, $_POST['myDomain'], $link);
  header("Location: ".$newHeader);
}

?>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">       
   <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>googleDomain</title>
    </head>
    <body>
        <form action="domain.php" method="post">
            <input type="text" name="myDomain" />
            <input type="submit" />
        </form>
    </body>
</html> 
```

我根本没有测试过，但应该非常相似

# python - python西里尔文解码

> ID：15907509
> 
> 赞同：1
> 
> 时间：2013-04-09T16:32:51.573
> 
> 标签：python, decode

我正在尝试打印从 mysql 中选择的西里尔字符。这是我的代码：内容 id DB 是 cp1251

```
>>> db = MySQLdb.connect(host="localhost", user="XXX", passwd="XXXX" )
>>> cursor = db.cursor()
>>> cursor.execute("""select id,title,cat,text,tags,date from db1.table1;""")
>>> test=cursor.fetchone()
>>> somevar=test[1]
>>> somevar=somevar.decode('utf8')
>>> print somevar
Result: ?????? ?? ???????? 
```

请指导我如何正确打印。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-22T19:25:27.163

这对我有帮助（从[这里](http://www.dasprids.de/blog/2007/12/17/python-mysqldb-and-utf-8)得到）：

```
db = MySQLdb.connect("localhost", config.db_user, config.db_pwd, config.db_name)

# here's the magic
db.set_character_set("utf8")
dbc = db.cursor()
dbc.execute("SET NAMES utf8;")
dbc.execute("SET CHARACTER SET utf8;")
dbc.execute("SET character_set_connection=utf8;")

# and here goes your SELECT for cyrillic fields
dbc.execute("SELECT id, title, cat, text, tags, date FROM db1.table1;")

# and then you just get the results
test = dbc.fetchone()
somevar = test[1]
print somevar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:36:33.473

尝试这个：

```
somevar = somevar.decode('cp1251') 
```

如果这没有帮助，请尝试在 MySQLdb.connect 中添加 charset='cp1251' 参数并且有 use_unicode 参数，也许你应该使用它来...

* * *

您可以在这里找到所有连接参数[https://github.com/farcepest/MySQLdb1/blob/master/MySQLdb/connections.py](https://github.com/farcepest/MySQLdb1/blob/master/MySQLdb/connections.py)

```
use_unicode 
```

如果为 True，则使用连接的字符集将类似文本的列作为 unicode 对象返回。否则，类似文本的列将作为字符串返回。列作为普通字符串返回。无论此设置如何，Unicode 对象都将始终编码为连接的字符集。

```
charset 
```

如果提供，连接字符集将更改为此字符集（MySQL-4.1 和更新版本）。这意味着 use_unicode=True。

# java - 在多选框中“选中”选项

> ID：15907513
> 
> 赞同：0
> 
> 时间：2013-04-09T16:33:02.353
> 
> 标签：java, jsp, struts, jstl

我有一个多选框，例如，

```
<select name="prGroup" id="prGroup" multiple="true">
    <option value="All">All</option>
    <c:forEach var="item" items="${model.prGrpList}">
            <option value="<c:out value='${item.deptDescTx}'/>" <c:if test="${ViewSummaryForm.prGroup == item.deptDescTx}">SELECTED</c:if>>
                    <c:out value="${item.deptDescTx}"/>     
            </option>
    </c:forEach>
    </select> 
```

其中 prGroup 是一个表单值并且是一个字符串数组。model.prGrpList 是一个请求参数，它给出了列表值，例如：AK、CA、VA、DC、MD、FL、DA...现在我从多选按钮中选择例如 CA 和 VA。它进入动作类并获取相应的值，当显示 UI 时，仍应选择 CA 和 VA。上面它适用于字符串。如何使其适用于字符串数组具有值 CA 和 VA（例如）的字符串数组。

任何 i/p 或建议？

# c++ - 如何在 wxTextctrl 中实现字符限制

> ID：15907518
> 
> 赞同：2
> 
> 时间：2013-04-09T16:33:16.147
> 
> 标签：c++, wxwidgets

全部

我想知道如何以 wxTextCtrl“多行”样式实现文本字符数限制。

我需要：1）在达到限制时阻止用户输入（只保留在限制范围内的字符）。2）当用户输入或粘贴到字符串的任何位置时，将光标保持在正确的位置（就在插入字符串之后），并确保1）

例如，我将数字限制为 10： 当我在 wxtextctrl 中输入时：

1）我可以输入直到字符数达到10，然后我不能做任何插入（但我可以删除一些字符，然后输入）。如：我可以输入1234567890

2）如果字符数未达到限制，我可以在现有文本的任何位置输入或粘贴一些字符，直到达到限制。如：我输入1234，然后我想在现有文本的2和3之间插入34567890，结果是1234567834，光标就在8之后

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:37:54.873

只需使用[wxTextCtrl::SetMaxLength](http://docs.wxwidgets.org/2.8/wx_wxtextctrl.html#wxtextctrlsetmaxlength)方法（仅从版本 2.3.2 开始可用，请注意）

**编辑**：上面的解决方案不适用于 GTK+。如果你在这种情况下，你将不得不编写一个扩展`wxTextCtrl`并做你需要的类。为此，一种可能的方法：

1.  覆盖`SetMaxLength`函数以将最大长度保存在类的属性中
2.  处理`EVT_TEXT(id, func)`事件。在处理程序中，如果达到最大长度，则开始忽略输入（您需要弄清楚如何）；如果您低于最大长度，请再次接受输入。

# ruby-on-rails - 有没有办法通过数组将多个参数输入到方法中

> ID：15907525
> 
> 赞同：1
> 
> 时间：2013-04-09T16:33:42.623
> 
> 标签：ruby-on-rails, ruby, arrays, parameters

假设我有一个需要三个参数的方法：

```
def foo(a, b, c)
end 
```

我已经在数组中说过参数：

```
[a, b, c] 
```

是否有一种使用数组作为参数的简单方法或一种方法，例如：

```
foo(array.some_method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:34:57.177

您可以使用[splat 运算符](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)：

```
foo(*array) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T16:36:04.520

```
def foo(*bar)

end 
```

Foo 现在将数组作为参数。您还可以通过执行使其接受哈希

```
def foo(bar={})

end 
```

# grand-central-dispatch - 将优先级设置为 NSOperationQueue

> ID：15907527
> 
> 赞同：6
> 
> 时间：2013-04-09T16:33:43.913
> 
> 标签：grand-central-dispatch, nsoperationqueue

GCD 允许根据 4 个全局优先级队列（高、默认、低、背景）将块分派到队列。我的应用程序中有几个 NSOperationQueues，但希望以不同的优先级运行每个。据我了解 NSOperationQueue 是对 GCD 的抽象，并且希望为 NSOperationQueue 设置不同的优先级（类似于 GCD 优先级队列）。有没有办法这样做？（发现可以为操作设置优先级，但不能为队列本身设置优先级）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-09T14:41:23.307

从 iOS 8 开始， NSOperationQueue 有一个`qualityOfService`属性，我认为它是 OP 的意思。从[类参考](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CB8QFjAA&url=https%3A%2F%2Fdeveloper.apple.com%2Fdocumentation%2FCocoa%2FReference%2FNSOperationQueue_class%2Findex.html&ei=mHxfVJfKMITLaO-jgbgM&usg=AFQjCNEDhusw8t1CCzDhoyli9qEnkEUZ5A&sig2=A5YEpJdMQIA0ZTAPCrnDkQ&bvm=bv.79189006,d.d2s)：

> 此属性指定应用于添加到队列的操作对象的服务级别。如果操作对象具有明确的服务级别集，则使用该值。[...]
> 
> 服务级别影响操作对象访问系统资源（如 CPU 时间、网络资源、磁盘资源等）的优先级。具有更高服务质量级别的操作被赋予比系统资源更高的优先级，以便它们可以更快地执行其任务。您使用服务级别来确保响应显式用户请求的操作优先于不太重要的工作。

同样在 iOS 8 中，您可以通过该`underlyingQueue`属性更改使用哪个 GCD 队列，从而选择具有所需优先级的全局 GCD 队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:00:14.903

来自[NSOperationQueue 类参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)的引用。

> 队列中的操作（但尚未执行）本身根据优先级和操作对象依赖关系进行组织，并相应地执行。
> 
> 操作间的依赖关系为操作提供了绝对的执行顺序，即使这些操作位于不同的操作队列中。直到其所有相关操作都完成执行后，才认为操作对象已准备好执行。对于准备好执行的操作，操作队列**总是执行相对于其他准备好的操作具有最高优先级的操作**。

这意味着按照设计，您不能为队列设置优先级，但 NSOperationQueue 将根据操作的各个优先级将 GCD 全局队列用于各个操作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-05T22:05:23.487

尝试设置[`threadPriority`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)添加到队列的 NSOperations。

# ruby-on-rails - rails 3 app中未初始化的常量UsersController::PostComment

> ID：15907531
> 
> 赞同：2
> 
> 时间：2013-04-09T16:33:57.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我刚刚尝试重命名我的控制器以及与之关联的所有文件。

但是，我收到此错误：

```
NameError in UsersController#show

uninitialized constant UsersController::PostComment 
```

这是用户控制器

```
def show
@user = User.find(params[:id])
@microposts = @user.microposts.without_review.paginate page: params[:page], :per_page => 15
@comment = PostComment.new
impressionist(@user)
end 
```

这是我的 postcomment.rb

```
class PostComment < ActiveRecord::Base
  attr_accessible :comment_content

  belongs_to :user
  belongs_to :micropost

  validates :comment_content, presence: true
  validates :user_id, presence: true
  validates :micropost_id, presence: true  

  default_scope order: 'postcomments.created_at ASC'
end 
```

routes.rb 有

```
resources :microposts do
  resources :postcomments 
```

最后是完整的痕迹

```
app/controllers/users_controller.rb:17:in `show'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:436:in `_run__602137435__process_action__956769240__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__788066434__call__637757501__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:36:35.037

如果你有一个文件被调用`postcomment.rb`，那么它将映射到 class `Postcomment`。如果你想调用它，`PostComment`你需要命名它`post_comment.rb`。

这是因为自动装载机的工作方式。它具有您需要遵循的约定，否则将无法找到您的模型。

请记住，Ruby 中的所有内容都区分大小写。

# sql - 将 SQL 查询转换为 LINQ - 四个表

> ID：15907532
> 
> 赞同：0
> 
> 时间：2013-04-09T16:34:00.843
> 
> 标签：sql, linq

我通常对 LINQ 并不差，但这个让我很头疼。需要新鲜的头脑来看看。

我有四张桌子

```
Task         Account       AcctUserXref      User
-----        -------       ------------      -----
TaskID       AcctID        UserID (fk)       UserID
AcctNumber   AcctNumber    AcctID (fk)       UserName 
```

我正在尝试根据用户名查找所有任务。这是我要转换的 SQL 语句的片段。

```
SELECT @cntTask = Count(TaskID) 
FROM Task tsk, Account acct, AcctUserXref acx
WHERE tsk.AcctNumber = acct.AcctNumber
AND acct.AcctID = acx.AcctID
AND acx.AcctID IN (SELECT acx2.AcctID
                   FROM AcctUserXref acx2, User usr
                   WHERE acx2.UserID = usr.UserID
                   AND usr.UserName = @UserName) 
```

如何直接将其转换为 LINQ？或者，如果有更好的方法在 LINQ 中实现我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:08:35.557

我不知道为什么您的查询看起来不像：

```
SELECT @cntTask = Count(TaskID) 
FROM Task tsk, Account acct, AcctUserXref acx, User usr
WHERE tsk.AcctNumber = acct.AcctNumber
AND acct.AcctID = acx.AcctID
AND acx.UserID = usr.UserID
AND usr.UserName = @UserName 
```

LINQ 等价物：

```
var numberOfTasks = (from u in Users
                     join au in AccountsToUsers on u.UserId equals au.UserId
                     join a in Accounts on au.AcctID equals a.AcctID
                     join t in Tasks on a.AcctNumber equals t.AcctNumber
                     where u.UserName == "NameYoureLookingFor").Count(); 
```

# r - RShiny：如何将变量从 Server.R 传递到 RMD 脚本

> ID：15907535
> 
> 赞同：1
> 
> 时间：2013-04-09T16:34:15.030
> 
> 标签：r, scope, knitr, shiny

我最近在玩 RShiny，我已经构建了一个工作 Web 界面，它接受两个参数“日期”和“位置”，并从我们的数据库中返回一系列符合标准的图形和表格。

我想做的是让用户能够以 HTML 格式的 RMD 报告的形式下载所有数据和图表。

所以我有 1\. 带有下载按钮的 UI.R 2\. Server.R 的 downloadHandler 启动我的 RMD 脚本 3\. ????

用户界面

```
downloadButton('downloadData','Download') 
```

服务器.R

```
output$downloadData<- downloadHandler(filename ="myData.html", 
                                  content= function(file= NULL){
                                    knit(thread.RMD) 
                                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:01:08.887

> 这是我从 Shiny Google Group 得到的答案：[https ://groups.google.com/forum/?fromgroups=#!topic/shiny-discuss/XmW9V014EtI](https://groups.google.com/forum/?fromgroups=#!topic/shiny-discuss/XmW9V014EtI)

作为 downloadHandler 的“内容”参数给出的函数采用一个选项，“文件”。单击下载按钮时，下载处理程序调用该函数，并使用文件参数告诉它应该将输出文件保存在哪里。

我看不到从 knit2html() 设置输出文件名的方法，但您可以在创建后重命名它：

```
 output$downloadData <- downloadHandler(
    filename ="ShinyData.html", 
    content = function(file) {
      knit2html("myreport.rmd")
      file.rename("myreport.html", file)
    }
  ) 
```

（此外，您在 ui.r 中缺少右括号）

-温斯顿

# elasticsearch - 在elasticsearch中实现收藏夹文档

> ID：15907542
> 
> 赞同：0
> 
> 时间：2013-04-09T16:34:38.273
> 
> 标签：elasticsearch

我的数据模型包含两个对象 - 用户和产品（存储在 mongodb 中）。我已经使用 elasticsearch 构建了一个多面产品搜索。现在我正在努力实现“最喜欢的产品”——用户可以将一些产品标记为*他的*最爱，然后在搜索时它们应该位于列表的顶部。问题是 - 如何建模这个最喜欢的产品标记以使搜索知道它并能够执行正确的排序操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:13:23.323

这是我的猜测 - 没有尝试过。而且您知道弹性搜索查询是多么的挑剔。因此，请随时尝试并让我们获得反馈。

在您的代码中，提取用户收藏的文档 ID（从您的用户数据模型中）。然后使用 elasticsearch constant_score 通过将此子句添加到您现有的 bool 查询中（或者您已经在搜索您的产品）来推广那些标记为收藏的产品。

```
{
  "constant_score" : {
     "ids" : {
        "values" : ["1", "4", "100"]
     }
  }
} 
```

如果这接近正确的轨道，请随时编辑您的问题或此回复，并提供有关您的查询的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T11:22:36.030

[本文](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)描述了另一种方法 parent\child 文档

在研究相同功能的实现时，我发现它非常有帮助。但我不知道它的缺点，因为我还没有实现它。

# c# - 如何在另一个语句中执行 linq to XML 语句？

> ID：15907543
> 
> 赞同：1
> 
> 时间：2013-04-09T16:34:38.850
> 
> 标签：c#, linq-to-xml

我有一个用于设置的 XML 文件。这是一个包含一些元素的示例：

```
<Settings>
    <Templates>
        <Item name="Home" value="{B0BDB6B6-CB6E-464A-A170-6F88E2B3B10F}" />
        <Item name="DevelopmentLanding" value="{3F66C5BA-BE16-4E29-A9D8-0FFBCEA4C791}" />
        <Item name="EventsLanding" value="{A1D51F12-D449-4933-8C0E-B236F291D050}" />
    </Templates>
    <Application>
        <Item name="MemberDomain" value="extranet" />
        <Item name="SearchCacheHours" value="0" />
        <Item name="SearchCacheMinutes" value="10" />
    </Application>
</Settings> 
```

我也有两门课：

```
public class Setting
{
    public string Type { get; set; }
    public IEnumerable<SettingItem> SettingItems { get; set; }
} 
```

和

```
public class SettingItem
{
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

我想获取 XML 文件并使用我的两个类强烈键入它，所以我最终会得到一个`List<Setting>`.

这是我到目前为止的代码：

```
var xml = XDocument.Load(HttpContext.Current.Server.MapPath(AppConfig.SettingsFileLocation));
var root = xml.Root;

var toplevel = root.Elements().AsEnumerable()
                   .Select(item => new Setting
                        {
                            Type = item.Name.ToString(),
                            SettingItems = item.Elements(item.Name.ToString()).AsEnumerable()
                                                        .Select(x => new SettingItem
                                                            {
                                                                Name = x.Attribute("name").ToString(),
                                                                value = x.Attribute("value").ToString()
                                                            }
                                                ).ToList()
                                }); 
```

但是，当我运行它时，我在`Setting.SettingItems`.

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:44:44.483

我不确定为什么您的代码不起作用，但是这样的事情应该可以工作：

```
 var toplevel = doc.Root.Elements().Select(settingElement => new Setting
                {
                    Type = settingElement.Name.LocalName,
                    SettingItems = settingElement.Elements("Item").Select(itemElement => new SettingItem
                        {
                            Name = itemElement.Attribute("name").Value,
                            Value = itemElement.Attribute("value").Value,
                        })
                }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:18:48.290

您是否考虑过另一种 LINQ 方法？例如，您可以使用 生成强类型类`xsd.exe`，如[本答案](https://stackoverflow.com/a/5183586/55487)中所述。从 XML 加载数据可以通过反序列化来完成，例如在[这个答案](https://stackoverflow.com/a/793034/55487)中。

旁注：XML 是格式错误的 XML（最后一行应该是`</Settings>`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:58:51.030

你的问题是这条线：

```
SettingItems = item.Elements(item.Name.ToString()).AsEnumerable() 
```

它应该是：

```
SettingItems = item.Elements() 
```

您想要项目的所有子元素（“模板”或“应用程序”节点），而不是那些也名为“模板”或“应用程序”的子元素。AsEnumerable 是不必要的，因为 Elements() 已经返回一个 IEnumerable。

# javascript - 将模型项 id 从 Html.ActionLink 传递给 jquery 函数

> ID：15907544
> 
> 赞同：0
> 
> 时间：2013-04-09T16:34:42.977
> 
> 标签：javascript, jquery, html, asp.net-mvc, asp.net-mvc-4

我希望能够使用 Html.ActionLink() 将下面代码中每个项目的 id 传递给 jQuery 函数。

```
@foreach (var item in Model)
    {
        if (item.AppointmentStatus == "P")
        {   
        <div class="appointment-main-block" role="menuitem" tabindex="20">
            <div class="appointment-heading">
                @Html.DisplayFor(modelItem => item.Speciality)
            </div>
            <div class="appointmenttitle">
                Date
               <br />
                <br />
                Clinician
               <br />
                <br />
                Location
            </div>
            <div class="appointmentdata">
                @Html.DisplayFor(modelItem => item.AppointmentDate)
                <br />
                <br />
                @Html.DisplayFor(modelItem => item.ClinicianName)
                <br />
                <br />
                @Html.DisplayFor(modelItem => item.Location)
            </div>

            <div class="appointmentbutton appointmentbuttonclickable">
                View @Html.ActionLink(" ", "Details", "MyAppointments",  new { id = item.AppointmentIdentifier.id }, new { onclick = "getAppointmentRef( item.AppointmentIdentifier.id)" })
                <br />
                <img src="/Content/images/icons/view.png" alt="view icon" />
            </div>
        </div>
        }
    }

// jQuery - Very Basic for now also considered
$(".appointmentbutton").click(getAppointmentRef);
    function getAppointmentRef(id) {
                alert(id);
            } 
```

该函数调用正常，但即使我传递一个“你好”，它似乎也传递了一个 JSON 字符串，其参数都不是“id”，即 123456789

如何让 Actionlink 获取该模型项的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:40:20.687

首先你有一个语法错误。我相信，这应该是：

```
onclick = "getAppointmentRef( @item.AppointmentIdentifier.id)" 
```

或者

```
onclick = "getAppointmentRef( " + @item.AppointmentIdentifier.id + ")" 
```

两者之一。

但是，主要是我会采取不同的方法：

```
@Html.ActionLink("Link text", "Details", "MyAppointments",  new { id = item.AppointmentIdentifier.id }, new { @class = "myLink", data_id = item.AppointmentIdentifier.id }) 
```

然后在 jQuery 中：

```
$(".myLink").click(function () {
    alert($(this).data("id"));
}); 
```

这样，您就可以更清晰地分离关注点。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:49:53.037

对于您的按钮，您可以使用类似的东西 -

```
<input type="button" data-apptid="@item.AppointmentIdentifier.id" class="myLink" value="Click me!" /> 
```

你的 jQuery 可能就像 Moby 提到的那样——

```
$(".myLink").click(function () {
    document.location.href = "/MyAppointments/Details/" & $(this).data("apptid");
}); 
```

这样，如果您除了加载新页面之外还需要在 jQuery 中执行某些操作，您可以在那里执行此操作并让函数确定您是否重定向。

# vb.net - 在运行时获取每个项目的结果，而无需等待所有循环

> ID：15907547
> 
> 赞同：0
> 
> 时间：2013-04-09T16:34:48.210
> 
> 标签：vb.net, foreach, listbox

这是我的代码：

```
 For Each itema In ListBox3.Items
        Dim source As String = getsource(itema)
        If source.Contains("blz blz blz")  Then
            ListBox2.Items.Add(itema & "====> here is one")

        Else
            ListBox2.Items.Add(itema)
        End If

    Next 
```

如何在不等待 vb.net 中所有项目的循环的情况下获得每个项目的结果？在 PHP 中有 flush 和 ob_flush 来刷新内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:33:30.463

如果这是 windows 窗体，您可以使用`.Refresh()`方法 ( `Listbox2.Refresh()`)，或者如果您使用 windows 窗体，您可以使用`.InvalidateVisual()`method( `Listbox2.InvalidateVisual()`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T07:27:31.320

如果您希望您的项目一项一项添加，则需要“返回”并让它在每个项目之后处理消息泵，以便 WPF 可以更新 UI。

您可以通过将代码拆分为多个 Invoke() 函数来以艰难的方式编写代码，也可以使用 Async/Await。后者看起来像下面的代码。将`await Task.Yield()`控制权返回给 WPF 消息泵。

```
Async Sub MyFunction()
    For Each itema In ListBox3.Items
        Dim source As String = getsource(itema)
        If source.Contains("blz blz blz")  Then
            ListBox2.Items.Add(itema & "====> here is one")
        Else
            ListBox2.Items.Add(itema)
        Await Task.Yield()
    End If

Next 
```

# python - python re.findall 奇怪的行为

> ID：15907553
> 
> 赞同：1
> 
> 时间：2013-04-09T16:34:59.790
> 
> 标签：python, regex, findall

```
>>> text =\
... """xyxyxy testmatch0
... xyxyxy testmatch1
... xyxyxy
... whyisthismatched1
... xyxyxy testmatch2
...  xyxyxy testmatch3
... xyxyxy
... whyisthismatched2
... """
>>> re.findall("^\s*xyxyxy\s+([a-z0-9]+).*$", text, re.MULTILINE)
[u'testmatch0', u'testmatch1', u'whyisthismatched1', u'testmatch2', u'testmatch3', u'whyisthismatched2'] 
```

所以我的期望是不匹配包含“whyisthismatched”的行。

Python re 文档说明如下：

> （点。）在默认模式下，这匹配除换行符以外的任何字符。如果指定了 DOTALL 标志，则它匹配任何字符，包括换行符。

我的问题是这是否真的是预期的行为或错误。如果预计有人请解释为什么这些行匹配以及我应该如何修改我的模式以获得我期望的行为：

```
[u'testmatch0', u'testmatch1', u'testmatch2', u'testmatch3'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:37:12.287

`\s`就字符类而言，换行符也是空白。如果您只想匹配*空格*，则需要匹配`[ ]`：

```
>>> re.findall("^\s*xyxyxy[ ]+([a-z0-9]+).*$", text, re.MULTILINE)
[u'testmatch0', u'testmatch1', u'testmatch2', u'testmatch3'] 
```

# c# - 如何为 System.Windows.Forms.DataVisualization.Charting 在 X 轴上设置 DateTime 范围？

> ID：15907556
> 
> 赞同：29
> 
> 时间：2013-04-09T16:35:07.873
> 
> 标签：c#, ado.net

目前，我正在尝试使用 Windows 窗体显示图表，该图表在 X 轴上显示月度数据，在 Y 轴上显示整数值；但是，我没有正确设置 X 轴的范围，其中 MonthYear 是 DateTime：

```
var pnChart = new System.Windows.Forms.Panel();
pnChart.Controls.Clear();
DataTable dtChartData = myDatabaseLayer.BuildDataTable("SELECT Added, Modified FROM tblStatistics WHERE ApplicationID = " + intApplicationID + " ORDER BY MonthYear");
Chart chart = GenerateChart(dtChartData, pnChart.Width, pnChart.Height, "ActiveBorder", 6);
chart.Series[0].XValueType = ChartValueType.DateTime;
chart.ChartAreas[0].AxisX.LabelStyle.Format = "yyyy-MM-dd";
chart.ChartAreas[0].AxisX.Interval = 1;
chart.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Months;
chart.ChartAreas[0].AxisX.IntervalOffset = 1;
pnChart.Controls.Add(chart); 
```

问题是，当图表显示时，X 轴的日期时间为“1900-01-01”所以我的问题是，如何将日期范围设置为从 2013-01-01 开始？

请注意，我已经搜索了互联网并尝试了以下设置，但它们没有给我正确的范围：

```
chart.ChartAreas[0].AxisX.Maximum = DateTime.Now.Ticks; 
```

或者，

```
chart.ChartAreas[0].AxisX.Crossing = DateTime.Now.Ticks; 
```

或者，

```
chart.ChartAreas[0].AxisX.Minimum = DateTime.Now.Ticks; 
```

TIA。

**更新：** 请注意，我找到了如何使用这个正确设置范围：

```
 chart.Series[0].XValueType = ChartValueType.DateTime;
            DateTime minDate = new DateTime(2013, 01, 01);
            DateTime maxDate = DateTime.Now;
            chart.ChartAreas[0].AxisX.Minimum = minDate.ToOADate();
            chart.ChartAreas[0].AxisX.Maximum = maxDate.ToOADate(); 
```

上面的代码现在为 X 轴设置了合适的范围；但是，现在图表本身是空白的。

**更新 2：**

是的，谢谢你 DasKrumelmonster——修复了它！我正在使用来自[http://www.codeproject.com/Articles/168056/Windows-Charting-Application](http://www.codeproject.com/Articles/168056/Windows-Charting-Application)的代码，并且应该更仔细地查看作者受保护的内部 Chart GenerateChart(DataTable dtChartDataSource, int width, int height, string bgColor, int intType) 函数。为了纠正这个问题，我改变了这些行：

```
foreach (DataRow dr in dtChartDataSource.Rows)
{
    double dataPoint = 0;
    double.TryParse(dr[dc.ColumnName].ToString(), out dataPoint);
    DataPoint objDataPoint = new DataPoint() { AxisLabel = "series", YValues = new double[] { dataPoint } };
     chart.Series[series].Points.Add(dataPoint);
} 
```

对此：

```
DateTime dtStart = new DateTime(2013, 01, 01);
int intMonthCounter = 0;
//Add data points to the series
foreach (DataRow dr in dtChartDataSource.Rows)
{
    double dataPoint = 0;
    double.TryParse(dr[dc.ColumnName].ToString(), out dataPoint);
    DataPoint objDataPoint = new DataPoint() { AxisLabel = "series", YValues = new double[] { dataPoint } };
    chart.Series[series].Points.AddXY(dtStart.AddMonths(intMonthCounter),  dataPoint);
    intMonthCounter++;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-09T19:51:10.823

无法重现。我试过这段代码：

```
private void button1_Click(object sender, EventArgs e)
{
    var s = new Series();
    s.ChartType = SeriesChartType.Line;

    var d = new DateTime(2013, 04, 01);

    s.Points.AddXY(d, 3);
    s.Points.AddXY(d.AddMonths(-1), 2);
    s.Points.AddXY(d.AddMonths(-2), 1);
    s.Points.AddXY(d.AddMonths(-3), 4);

    chart1.Series.Clear();
    chart1.Series.Add(s);

    chart1.Series[0].XValueType = ChartValueType.DateTime;
    chart1.ChartAreas.Add(new ChartArea()); // In some cases the winforms designer adds this already
    chart1.ChartAreas[0].AxisX.LabelStyle.Format = "yyyy-MM-dd";
    chart1.ChartAreas[0].AxisX.Interval = 1;
    chart1.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Months;
    chart1.ChartAreas[0].AxisX.IntervalOffset = 1;

    chart1.Series[0].XValueType = ChartValueType.DateTime;
    DateTime minDate = new DateTime(2013, 01, 01).AddSeconds(-1);
    DateTime maxDate = new DateTime(2013, 05, 01); // or DateTime.Now;
    chart1.ChartAreas[0].AxisX.Minimum = minDate.ToOADate();
    chart1.ChartAreas[0].AxisX.Maximum = maxDate.ToOADate();
} 
```

也许我在路上修正了你的错误。

它按预期工作：一条线有四个数据点，所有 x 轴标签都是可见的，图形本身也是如此。如果仍然存在问题，请提供完整的测试代码以及​​应该发生的情况与实际发生的情况的描述。

# python - 使用 mongo-hadoop 将 Hadoop 流式传输到 python

> ID：15907560
> 
> 赞同：7
> 
> 时间：2013-04-09T16:35:29.870
> 
> 标签：python, mongodb, hadoop, cloudera

我正在尝试使用 mongo-hadoop 使用 python 获得 map-reduce 功能。Hadoop 正在工作，hadoop 流正在与 python 一起工作，并且 mongo-hadoop 适配器正在工作。但是，使用 python 的 mongo-hadoop 流式传输示例不起作用。尝试在流/示例/金库中运行示例时，出现以下错误：

> $user@host: ~/git/mongo-hadoop/streaming$ hadoop jar 目标/mongo-hadoop-streaming-assembly-1.0.1.jar -mapper 示例/treasury/mapper.py -reducer 示例/treasury/reducer.py -inputformat com.mongodb.hadoop.mapred.MongoInputFormat -outputformat com.mongodb.hadoop.mapred.MongoOutputFormat -inputURI mongodb://127.0.0.1/mongo_hadoop.yield_historical.in -outputURI mongodb://127.0.0.1/mongo_hadoop.yield_historical .streaming.out

```
13/04/09 11:54:34 INFO streaming.MongoStreamJob: Running

13/04/09 11:54:34 INFO streaming.MongoStreamJob: Init

13/04/09 11:54:34 INFO streaming.MongoStreamJob: Process Args

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Setup Options'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: PreProcess Args

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Parse Options

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-mapper'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'examples/treasury/mapper.py'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-reducer'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'examples/treasury/reducer.py'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-inputformat'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'com.mongodb.hadoop.mapred.MongoInputFormat'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-outputformat'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'com.mongodb.hadoop.mapred.MongoOutputFormat'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-inputURI'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'mongodb://127.0.0.1/mongo_hadoop.yield_historical.in'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: '-outputURI'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Arg: 'mongodb://127.0.0.1/mongo_hadoop.yield_historical.streaming.out'

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Add InputSpecs

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Setup output_

13/04/09 11:54:34 INFO streaming.StreamJobPatch: Post Process Args

13/04/09 11:54:34 INFO streaming.MongoStreamJob: Args processed.

13/04/09 11:54:36 INFO io.MongoIdentifierResolver: Resolving: bson

13/04/09 11:54:36 INFO io.MongoIdentifierResolver: Resolving: bson

13/04/09 11:54:36 INFO io.MongoIdentifierResolver: Resolving: bson

13/04/09 11:54:36 INFO io.MongoIdentifierResolver: Resolving: bson

**Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/mapreduce/filecache/DistributedCache**
    at org.apache.hadoop.streaming.StreamJob.setJobConf(StreamJob.java:959)
    at com.mongodb.hadoop.streaming.MongoStreamJob.run(MongoStreamJob.java:36)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
    at com.mongodb.hadoop.streaming.MongoStreamJob.main(MongoStreamJob.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.mapreduce.filecache.DistributedCache
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 10 more 
```

如果有人能提供一些启示，那将是一个很大的帮助。

完整信息：

据我所知，我需要完成以下四件事：

1.  安装和测试hadoop
2.  使用 python 安装和测试 hadoop 流
3.  安装和测试 mongo-hadoop
4.  使用 python 安装和测试 mongo-hadoop 流

因此，短处是我已经完成了第四步的所有工作。使用（[https://github.com/danielpoe/cloudera](https://github.com/danielpoe/cloudera)）我已经安装了cloudera 4

1.  使用 chef recipe cloudera 4 已安装并已启动并运行和测试
2.  使用 michael nolls 博客教程，用 python 测试 hadoop 流式成功
3.  使用 mongodb.org 上的文档能够运行库和 ufo 示例（在 build.sbt 中构建 cdh4）
4.  使用流/示例中的 twitter 示例的自述文件下载了 1.5 小时的 twitter 数据，并尝试了财政部示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:50:39.853

您是否安装了最新的 pymongo_hadoop 连接器？您正在运行什么版本的其他软件？

# ios - iOS 共享实例在哪里释放

> ID：15907562
> 
> 赞同：1
> 
> 时间：2013-04-09T16:35:39.980
> 
> 标签：ios, objective-c, memory-management

我有一个共享实例（一个简单的数据控制器），在我的项目中我不使用 ARC。

```
static ECOMDataController *sharedInstanse;
@implementation ECOMDataController
+(ECOMDataController *)sharedInstance
{
    return sharedInstanse;
}
-(id)init
{
    [self checkAndCreateDataFileIfExist];
    [self readAppFile];
    if (sharedInstanse)
        NSLog(@"The shared instance was created already.");
    sharedInstanse = self;
    return self;
} 
```

我在其他方法中使用它，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    dataController = [ECOMDataController sharedInstance];
    [dataController readAppFile];
    [[self tableView] reloadData];
} 
```

正如我从泄漏工具中看到的那样——我这里有内存泄漏——我应该怎么做才能释放数据控制器？哪里更好呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:04:11.290

Rocky 是对的：你不会释放一个单例。坦率地说，我根本不会使用那种模式——除了像 AppDelegate 或 NSNotificationCenter 这样的系统调用。这种模式有很多陷阱......但这是我的观点（尽管我并不孤单）。

更重要的是，你为什么不使用 ARC？绝对没有理由不这样做，而且有很多原因。特别是对于新开发人员来说，当编译器会为你做这件事时，在内存管理上大惊小怪是没有意义的——而且会做得更好。你有足够的东西来学习，而不用担心保留计数！

# ruby - 安装 caldecott 时出现问题，使命令无法运行

> ID：15907566
> 
> 赞同：1
> 
> 时间：2013-04-09T16:35:48.770
> 
> 标签：ruby, database, windows-7, gem, devkit

这几天我一直在尝试安装它，但没有成功。寻求帮助，我已经通过这个网站六次试图解决这个问题，但我没有任何运气。

```
c:\Ruby193\DevKit>gem install caldecott --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
    ERROR:  Error installing caldecott:
    ERROR: Failed to build gem native extension.

C:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

make
'make' is not recognized as an internal or external command,
operable program or batch file.

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/escape_ut
ils-0.3.2 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/escape_utils-0.3.2/ext/esc
ape_utils/gem_make.out 
```

我试图按照这篇文章中的说明进行操作
- [Make Is Not Recognized as an internal or exernal command](https://stackoverflow.com/questions/13157068/make-is-not-recognized-as-an-internal-or-external-command-qt-sdk-windows)

通过做这个：

```
c:\Ruby193>set make=mingw32-make 
```

不幸的是，我仍然得到：

```
c:\Ruby193>gem install caldecott --platform=ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
    ERROR:  Error installing caldecott:
    ERROR: Failed to build gem native extension.

C:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

mingw32-make
'mingw32-make' is not recognized as an internal or external command,
operable program or batch file.

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/escape_ut
ils-0.3.2 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/escape_utils-0.3.2/ext/esc
ape_utils/gem_make.out 
```

我也做过：

```
c:\Ruby193\DevKit>gem install eventmachine --pre 
```

正如这里所讨论的。
-[安装 Caldecott 时出错](https://stackoverflow.com/questions/10740541/error-installing-caldecott)

哈普！！！我究竟做错了什么？

Windows 7
以管理员身份运行 CMD
Ruby
v1.9.3 DevKit - 安装在 Ruby 文件夹中，并在安装后运行

* * *

***更新：***

我试图在 c:/ruby193/devkit/mingw/bin 中创建自己的 match.bat 文件，该文件应该将 make 命令转发到 mingw32-make，仍然成功，但这是我的批处理代码（match.bat）文件。

```
@echo off
mingw32-make %* 
```

如本论坛所述。
-[制作.bat](http://qt-project.org/forums/viewthread/8475)

仍然没有运气，我可能会继续在键盘上翻脸，直到找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:18:30.640

您可以尝试在没有参数的情况下安装`platform`，只需此命令

```
$ gem install caldecott 
```

你现在得到什么错误？

# jquery - 用于连接选择器 jquery 的 for 循环

> ID：15907567
> 
> 赞同：3
> 
> 时间：2013-04-09T16:35:56.190
> 
> 标签：jquery, loops, for-loop, concatenation, selector

在使用 for 循环连接 jquery 选择器时，我遇到了一小段 jquery 代码的奇怪问题：

不工作：

```
for(j = 1; j <= myHypervisors.length; j++)
{
    $("#status_vm" + j + "_dev").hide();
        $("#title_hypervisor_" + j).toggle(function(){
        $("#status_vm" + j + "_dev").show();
        $("#show_hypervisor_" + j).toggleClass('icon-plus icon-minus');
    },function(){
        $("#status_vm" + j + "_dev").hide();
        $("#show_hypervisor_" + j).toggleClass('icon-minus icon-plus'); 
    });
}//for 
```

myHypervisors.length == 2

在职的：

```
$("#status_vm1_dev").hide();
    $("#title_hypervisor_1").toggle(function(){
    $("#status_vm1_dev").show();
    $("#show_hypervisor_1").toggleClass('icon-plus icon-minus');
 },function(){
    $("#status_vm1_dev").hide();
    $("#show_hypervisor_1").toggleClass('icon-minus icon-plus');    
 });

$("#status_vm2_dev").hide();
    $("#title_hypervisor_2").toggle(function(){
    $("#status_vm2_dev").show();
    $("#show_hypervisor_2").toggleClass('icon-plus icon-minus');
 },function(){
    $("#status_vm2_dev").hide();
    $("#show_hypervisor_2").toggleClass('icon-minus icon-plus');    
 }); 
```

关于 DOM：

```
<h3 id="title_hypervisor_1"><i class="icon-plus" id="show_hypervisor_1"></i> Hypervisor : vm1-dev </h3>

<table class="table table-bordered" id="status_vm1_dev"></table>
... 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:37:21.030

那是因为`j`更改：当回调被执行时，它的值是循环结束的值之一。您可以使用立即调用的函数来保护它：

```
for(j = 1; j <= myHypervisors.length; j++){
   (function(j){
    $("#status_vm" + j + "_dev").hide();
    $("#title_hypervisor_" + j).toggle(function(){
        $("#status_vm" + j + "_dev").show();
        $("#show_hypervisor_" + j).toggleClass('icon-plus icon-minus');
    },function(){
        $("#status_vm" + j + "_dev").hide();
        $("#show_hypervisor_" + j).toggleClass('icon-minus icon-plus'); 
    });
   })(j);
} 
```

对于不喜欢在循环中创建的函数的人，这里有另一个解决方案（作为奖励，它与最新版本的 jQuery 兼容）：

```
for(j = 1; j <= myHypervisors.length; j++) $("#status_vm" + j + "_dev").hide();
$('[id^="title_hypervisor_"]').click(function(){
   var j = this.id.slice('title_hypervisor_'.length);
   $("#status_vm" + j + "_dev").toggle();
   $("#show_hypervisor_" + j).toggleClass('icon-plus icon-minus');
}); 
```

# google-nativeclient - 在 ARM chromebook 上调试本机应用程序？

> ID：15907575
> 
> 赞同：0
> 
> 时间：2013-04-09T16:36:21.290
> 
> 标签：google-nativeclient

调试 Chrome NACL 应用程序 (Samsung Chromebook) 的 ARM 版本的最简单方法是什么？

我们可以看到 printf 的输出吗？Chrome 调试输出呢？

我们可以远程使用 gdb 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:07:30.130

我相信这是可行的，并且是此类信息的规范存储库。（如果没有，页面应该被修复！）

[http://www.chromium.org/nativeclient/how-tos/debugging-documentation/debugging-with-debug-stub-recommended/debugging-nacl-apps-in-chrome-os](http://www.chromium.org/nativeclient/how-tos/debugging-documentation/debugging-with-debug-stub-recommended/debugging-nacl-apps-in-chrome-os)

是的，您可以远程使用 gdb。

要查看 printf 输出，请尝试 chrome:://system 并展开 ui_log。

# ruby-on-rails-3 - Heroku 控制台给出 Encoding::UndefinedConversionError

> ID：15907577
> 
> 赞同：1
> 
> 时间：2013-04-09T16:36:24.473
> 
> 标签：ruby-on-rails-3, heroku, encoding, irb

运行一个heroku控制台

```
heroku run console 
```

所有返回 UTF-8 字符的命令（如德语变音符号）都将导致以下错误：

```
irb(main):004:0> Play.all[-2]
   Play Load (27.5ms)  SELECT "plays".* FROM "plays" ORDER BY name asc 
Encoding::UndefinedConversionError: U+00E4 from UTF-8 to US-ASCII
    from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `write'
    from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `printf'
    from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `output_value'
    from /usr/local/lib/ruby/1.9.1/irb.rb:160:in `block (2 levels) in eval_input'
    from /usr/local/lib/ruby/1.9.1/irb.rb:273:in `signal_status'
    from /usr/local/lib/ruby/1.9.1/irb.rb:156:in `block in eval_input'
    from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:243:in `block (2 levels) in each_top_level_statement'
    from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
    from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement'
    from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
    from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
    from /usr/local/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
    from /usr/local/lib/ruby/1.9.1/irb.rb:70:in `block in start'
    from /usr/local/lib/ruby/1.9.1/irb.rb:69:in `catch'
    from /usr/local/lib/ruby/1.9.1/irb.rb:69:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'Maybe IRB bug!! 
```

我真的不明白这是什么原因。有解决方法吗？

我正在使用设置为“UTF-8 xterm-color”的 iTerm。

# 更新

这个错误在我不知道的原因下完全消失了，我无法在 ruby​​ 1.9.2p320 或 1.9.3p448 下重现它现在在控制台中键入“\u00E4”会产生“ä”，如预期的那样：

```
irb(main):001:0> "\u00E4"
=> "ä" 
```

# sql - 未在查询中获取所有记录

> ID：15907579
> 
> 赞同：2
> 
> 时间：2013-04-09T16:36:27.087
> 
> 标签：sql, sql-server-2005

我正在使用基于 GoDaddy 的 SQL Server 2005 存储来自网站的销售。我有一`datePaid`列格式为`smalldatetime`. 当我查询数据库以显示某个日期的所有订单时，使用此查询：

```
SELECT DISTINCT 
    purchase.orderID, wfRegister.firstName, wfRegister.lastname, 
    storeOrder.subtotal, storeOrder.handling, storeOrder.total, 
    storeOrder.datePaid, storeOrder.dateOrdered, storeOrder.paypalID 
FROM 
    wfRegister 
INNER JOIN 
    (storeOrder INNER JOIN purchase ON storeOrder.orderID = purchase.orderID) ON wfRegister.customerID = storeOrder.customerID 
WHERE 
    storeOrder.deleted = 0 
    AND storeOrder.datePaid BETWEEN '03/21/2013' AND '03/21/2013' 
ORDER BY 
    storeOrder 
```

21 日我只收到一条记录，这是不正确的。如果我将查询更改`storeOrder.datePaid BETWEEN '03/21/2013' AND '03/22/2013`为 21 日返回 7 条记录，这是正确的，但我也会从 22 日获得记录，这是我不想要的。有没有办法查询 21 日的 datePaid 字段并返回所有 7 条记录而不仅仅是 1 条？我的客户将数据导入 Excel，不想删除 22 日的记录来获取 21 日的所有记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:57:16.607

对于 SQL Server 中使用字符串的日期算术，我建议始终使用**ISO-8601**标准格式：`YYYYMMDD`- 这是**唯一**独立于任何区域和/或语言设置的格式。

为了可靠地获得给定日期的所有订单，您应该使用

```
AND storeOrder.datePaid >= '20130321' AND storeOrder.datePaid < '20130322' 
```

这`BETWEEN`似乎很方便 - 但它是*包容性*的，例如，您也可以获得 3 月 22 日的数据。

此处的此条款为您提供了从 3 月 21 日开始的所有记录，无论它们的时间如何 - 但没有从 22 日开始。

# ios - UITableViewCell 水平tableview的重用问题

> ID：15907580
> 
> 赞同：0
> 
> 时间：2013-04-09T16:36:29.687
> 
> 标签：ios, uitableview

我有一个稍微复杂的系统，我遇到了一些重用问题，想得到一些反馈。基本上它是一个垂直的tableview，每个单元格包含另一个旋转90度的tableview，以便每个单元格水平滚动。每个水平单元格还设置为使用来自 API 的分页响应无限滚动。当垂直表向下滚动时，我遇到了单元格相互复制的问题。我已经正确设置了重用标识符，并且在每个水平表视图中我正在运行以下内容：

```
 - (void)prepareForReuse
{
[_horizontalTableView reloadData];
} 
```

如果我关闭重用单元格，则不会发生问题，但垂直滚动性能会受到影响。我想知道是否有可能在这种类型的设置中重复使用单元格是不可能的？任何这方面的经验都是有帮助的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:06:31.177

这不是解决您的问题的直接方法，但我相信如果您在每个垂直单元格内使用水平滚动视图，您会更快地完成此操作并且减少奇怪的行为。我也相信这不是标准的方式，所以会发生奇怪的事情。

您所做的就是连续设置或扩展滚动屏幕的内容大小以创建无限滚动行为。实用地在滚动视图中创建视图以模拟每个单元格。希望这可以帮助。

# php - Symfony 2：在控制器之外获取安全上下文

> ID：15907582
> 
> 赞同：3
> 
> 时间：2013-04-09T16:36:31.587
> 
> 标签：php, symfony

我正在尝试编写一个需要访问用户权限级别的事件侦听器。在控制器中，我使用以下代码

**代码：**

```
$securityContext = $this->container->get('security.context');

if($securityContext->isGranted('ROLE_USER')){
    //Do Something
} 
```

但是在控制器之外，我无法弄清楚如何获取安全上下文。是否可以？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-10T09:52:28.590

最好的方法是通过[Service Container使用（如 phpisuber 所说）](http://symfony.com/doc/current/book/service_container.html)**依赖注入**。但是，不要注入整个容器（这被认为是不好的做法，因为它会使整个类的可测试性降低并破坏松散耦合），您应该像这样注入服务：`security.context`

```
acme_foo.bar_service:
    class: %acme_foo.bar_service.class%
    arguments:
        - @security.context 
```

您的服务可以是这样的：

```
<?php
namespace Acme\FooBundle\Service;

use Symfony\Component\Security\Core\SecurityContext;

class BarService
{
    /**
     * @var SecurityContext
     */
    protected $context;

    /**
     * @param SecurityContext $context
     */
    public function __construct($context)
    {
        $this->context = $context;
    }

    public function doSomething()
    {
        return $this->context->isGranted('ROLE_USER');
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T16:49:36.940

有两种方法可以在控制器之外获取它：

**依赖注入：**

这是正确的方法，您只需要在[此处](http://symfony.com/doc/current/book/service_container.html)的文档中即可。

```
mybundle.model.mymodel:
class: %mybundle.model.myclass%
arguments: [@servicecontainer] 
```

**又快又脏：**

```
global $kernel;
$securityContext = $kernel->getContainer()->get('security.context'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T17:51:56.857

我知道这篇文章有点过时了，但它仍然是谷歌上的第一批结果之一。

这篇文章中的答案引用了`SecurityContext`该类，从 Symfony 2.6 开始不再支持该类。由于类弃用，此帖子的公认答案具有误导性。

[从这个答案](https://stackoverflow.com/a/19578674/3321344)试试这个代码：

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use YourNameSpace\UserBundle\Entity\User;

class LoginController extends Controller{

    public function registerAction()
    {    
        $user = //Handle getting or creating the user entity likely with a posted form
        $token = new UsernamePasswordToken($user, null, 'main', $user->getRoles());
        $this->get('security.token_storage')->setToken($token);
        $this->get('session')->set('_security_main', serialize($token));
    }
} 
```

# javascript - 使用 Javascript 或 jQuery 更改上下文菜单

> ID：15907586
> 
> 赞同：2
> 
> 时间：2013-04-09T16:36:36.040
> 
> 标签：javascript, jquery

我想修改右键单击特定项目 (a `tr`) 的上下文菜单，以显示一些自定义导航选项而不是标准内容。到目前为止，我已经找到了两种方法：将一些新行为绑定到`contextmenu`事件，并根据事件的位置创建一个新的 div/下拉菜单（即从头开始创建我自己的上下文菜单），或者否则使用像[这个 jQuery 插件](https://github.com/joewalnes/jquery-simple-context-menu/blob/master/README.md)这样的插件，它会为我做完全相同的事情。

我想知道是否有一种方法可以使用默认上下文菜单的骨架，只需添加一些绑定到我想要触发的事件的`<a>`s 或s 来代替已经存在的。`div`有没有办法修改现有的上下文菜单，而不是转储它并从头开始或使用插件构建我自己的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T16:38:57.643

> 有没有办法修改现有的上下文菜单，而不是转储它并从头开始或使用插件构建我自己的？

**不**，抱歉，浏览器不公开该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T15:13:33.557

可以修改现有的上下文菜单 - 问题仅在于何时何地。这是[HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus)的一部分，当前版本的 Firefox 支持它。

```
<menu type="context" id="myVeryOwnMenu">
    <menuitem 
        label="Caption for your item" 
        onclick="veryObtrusiveEventHandler()" 
        icon="/path/to/your/icon.gif">
    </menuitem>
</menu> 
```

...甚至支持嵌套。

似乎 Chrome、IE 和其他领先的浏览器决定对这个 HTML5 功能不感兴趣。时间会证明一切。

有关 FF 演示，请参见[http://davidwalsh.name/html5-context-menu](http://davidwalsh.name/html5-context-menu)。

# android - 由于 onMeasure()，子可扩展列表不接受 match_parent

> ID：15907597
> 
> 赞同：1
> 
> 时间：2013-04-09T16:37:18.833
> 
> 标签：android, android-layout, expandablelistview

我正在使用可扩展列表来制作 3 级层次结构，在功能上它可以根据需要工作，但我面临一些与 GUI 相关的问题，即它的 wrap_content 应用于自定义子可扩展列表，我的要求是使其成为 match_parent。

我尝试了几种无法找出解决方案的方法，在一次试验中，我知道如果我删除 onMeasure() 它会根据需要出现（覆盖父列表的整个宽度）但它自己的子组不可见。

为了制作 3 级层次结构，我指的是下面的教程。

[http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c991d70a-4570-4e4b-8378-2191a4247a84](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=c991d70a-4570-4e4b-8378-2191a4247a84)

请建议/使子 ExpandableList 覆盖整个的方法

# sql - 搜索变量并更改它的语句

> ID：15907599
> 
> 赞同：0
> 
> 时间：2013-04-09T16:37:22.567
> 
> 标签：sql

我希望我能得到一些帮助来解决我遇到的问题。现在，在我继续之前，我必须说我对 SQL 或一般编程知识并不多。我只是进入它，我可能不会提供所有必要的信息。

无论如何，我正在尝试在 SQL 中创建一个语句，该语句将允许我将小数点添加到以下数字“775”到“77.5”。

所以我尝试了许多变化，起初我认为这会很简单。

```
IF ? = "775" SELECT "77.5"
SELECT REPLACE ( ?, "775", "77.5") 
```

以及其他一些令人沮丧的情况。

我相信我需要声明我要提取的数据是一个整数，但我不确定如何。我查看了教程并尝试了其中一些，但仍然没有运气。如果有人能给我任何建议，让我走上实现这一目标的轨道。那很好啊。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:42:36.763

嗯..你这样表示SQL：

这将是一个`UPDATE`声明 - 您想要更改数据库中的一些数据。

它是这样的：

```
UPDATE mytable SET myvalue = 77.5 WHERE myvalue = 775; 
```

或者更通用一点，以便同时进行更多更新：

```
UPDATE mytable SET myvalue = myvalue/10 WHERE myvalue > 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:43:02.910

```
UPDATE table_name
SET column1 = 77.5
WHERE column1 = 775; 
```

看一下[UPDATE](http://www.w3schools.com/sql/sql_update.asp)语句：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:50:53.133

声明@int INT

设置@int = 775

SELECT SUBSTRING(CAST(@int AS VARCHAR(4)), 1, 2) + '.' + SUBSTRING(CAST(@int AS VARCHAR(4)), 3, 1)

# asp.net - 如何增加 web.Config 和 App.Config 中的 maxlenght 来上传图片？

> ID：15907601
> 
> 赞同：0
> 
> 时间：2013-04-09T16:37:30.777
> 
> 标签：asp.net, wcf, web-config, app-config

在我的程序中，我试图将图像保存到数据库。我遇到了一个例外

> 协议异常未处理”远程服务器返回意外响应（400）错误请求

我查了一下谷歌，发现在`app.config`. 我试过了，但即使这样也没有用。这是我的`app.config`

```
 <?xml version="1.0" encoding="utf-8" ?>
 <configuration>
     <system.serviceModel>
        <bindings>
         <basicHttpBinding>
           <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
              openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
              allowCookies="false" bypassProxyOnLocal="false"  
              hostNameComparisonMode="StrongWildcard"
              maxBufferSize="524288" maxBufferPoolSize="524288" maxReceivedMessageSize="524288"
              messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
           useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
               maxBytesPerRead="4096" maxNameTableCharCount="16384" />
         <security mode="None">
         <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
         <message clientCredentialType="UserName" algorithmSuite="Default" />
       </security>
      </binding>
    </basicHttpBinding>
    </bindings>
    <client>
       <endpoint address="http://localhost:55750/Service1.svc" binding="basicHttpBinding"
           bindingConfiguration="BasicHttpBinding_IService1" contract="PeerService.IService1"
          name="BasicHttpBinding_IService1" />
      </client>
     </system.serviceModel>
  </configuration> 
```

你能告诉我如何解决吗？我真的陷入了这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:53:47.737

尝试提高所有值：

```
<!-- Used by basic WCF Services -->
<binding maxBufferPoolSize="20000000" maxBufferSize="20000000" maxReceivedMessageSize="20000000">
    <readerQuotas maxDepth="32" maxStringContentLength="20000000" maxArrayLength="20000000" maxBytesPerRead="20000000" maxNameTableCharCount="20000000"/>
</binding> 
```

# css - 添加大内容而不在css中重复图像时如何拉伸背景图像

> ID：15907612
> 
> 赞同：1
> 
> 时间：2013-04-09T16:37:57.130
> 
> 标签：css, image, dynamic

我想在 html 的内容增加时拉伸图像。并且每当内容增加时，就会自动拉伸背景图像，而无需在 css 中重复。在 Html 页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:57:21.637

这是我避免拉伸的建议：

```
div {
background-image: url(http://placekitten.com/200/300);
background-repeat: no-repeat;
height: auto;
width: 100%;
background-position: 50% 0;
background-size: 100%;
} 
```

[http://jsfiddle.net/Riskbreaker/mx8rr/1/](http://jsfiddle.net/Riskbreaker/mx8rr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:44:24.197

[看一下这个！](http://jsfiddle.net/mx8rr/)

这是我的CSS：

```
div {
    background-image: url(http://placekitten.com/200/300);
    background-repeat: no-repeat;
    min-width: 200px;
    min-height: 300px;
    background-size: 100% 100%;
} 
```

`background-size: cover;`也会起作用，但效果略有不同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-09T13:05:33.847

我们可以在添加大内容时拉伸背景图像而无需在 css 中重复图像

请尝试下一个：

```
background-size: cover; 
```

或者

```
background-size: contain; 
```

# tomcat - 如何在嵌入式 tomcat 中压缩响应

> ID：15907617
> 
> 赞同：2
> 
> 时间：2013-04-09T16:38:22.670
> 
> 标签：tomcat, gzip

我怎样才能做到这一点？我阅读了有关压缩的信息，但没有找到有关在嵌入式 tomcat 服务器中做的任何事情。我在本网站上阅读了有关连接器类设置压缩的信息

[http://viralpatel.net/blogs/enable-gzip-compression-in-tomcat/](http://viralpatel.net/blogs/enable-gzip-compression-in-tomcat/)

但不在服务器中。我有启动tomcat服务器的主要方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:53:06.627

您可以通过 XML 执行的任何操作（很可能）也可以通过 Java 通过 API 调用来完成。在这种情况下，如果您可以获得连接器对象的句柄，您可能可以设置任何值等并启用压缩。

你试过吗？这将是一些影响

```
Tomcat server = new Tomcat()
Connector connector = server.getConnector() 
```

现在在压缩中设置您想要的任何值，完成后，确保将连接器对象设置回服务器

```
server.setConnector(connector) 
```

我认为这应该等同于您发布的链接中列出的声明方式。

# c - 函数参数或局部变量

> ID：15907622
> 
> 赞同：11
> 
> 时间：2013-04-09T16:38:36.557
> 
> 标签：c

假设我有一个重复数百万次的循环。在这个循环里面我有一个函数调用。

在这个函数内部，我需要对一开始创建的一些临时变量进行操作。现在，哪个更好：

a) 在代码开头创建临时变量，在循环开始时对其进行初始化，并将其作为函数参数传递

b) 在被调用函数的开头仅创建局部临时变量？

这是可以回答的问题吗？我想知道哪一点被认为是更好的做法，或者哪一点更快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T16:47:56.433

让我们抛出一些可能的定义`some_function()`，您将从循环中调用的函数。

```
// Method 1
void some_function() {
    int temporary;

    // Use temporary
}

// Method 2
void some_function(int temporary) {
    // Use temporary
}

// Method 3
void some_function(int *temporary) {
    // Use *temporary
} 
```

方法 1 可能是这些选项中最易读的，所以除非你有充分的理由去做其他事情，否则*我会更喜欢它。*它也可能比其他任何一个都快，*除非*您的编译器内联函数调用。如果是，那么所有三个可能执行完全相同（如果编译器无法优化指针取消引用，方法 3 可能仍然较慢）。

如果编译器没有内联，那么方法 2 可能比方法 1 慢。这是因为，就堆栈分配的内存而言，它们是相同的——函数参数将以相同的方式存储在堆栈中当地人是。在这种情况下，函数参数和局部变量之间的唯一区别是函数参数可以由调用者赋予一个值。将值从调用者传输到函数的这一步骤（理论上）会减慢调用速度。

方法 3 几乎肯定会更慢，因为对临时内存的访问将包括一定程度的间接性。与访问本地相比，取消引用指针并不是一项廉价的操作。

当然，如果性能绝对至关重要，那么您应该对这些方法进行基准测试。我怀疑方法 1 会是最快的（或者至少不会比其他方法慢），而且对我来说似乎更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:59:17.137

如果该变量在函数外部不需要，那么它应该在函数内部。这允许编译器在优化代码方面做得最好，并使代码最易读和易于使用（这通常适用于“声明具有最小可能范围的变量”，尽管对于小函数，声明少数每次在函数顶部的变量是最好的选择）。

从性能的角度来看，将变量传递给函数要么等效，要么比具有局部变量更差。[当然，编译器可能会内联所有内容，并且在两种情况下您最终都会得到完全相同的代码，但这取决于编译器和您拥有的代码]。

正如其他人所提到的，将指针传递给局部变量将导致访问指针以获取值的“惩罚”。它可能不会产生巨大的差异，但几乎可以肯定会产生一些差异。这绝对应该是最后的手段。[请注意，如果变量是 LARGE，则将副本传递给函数的开销可能仍然比指针的开销更糟。但是如果我们假设它是一个简单的类型，比如`int`or `float`，那么指针就会有明显的开销]。

任何时候有关于性能的问题，你肯定应该对你的代码进行基准测试。如果在排序算法或类似的算法之间有选择，在互联网上询问其他人可能是值得的，但如果在一些更细微的差异中是“这样做或那样做更好”的情况，那么差异通常是小，您的特定编译器所做的将比“理论上更好”产生更大的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:48:12.830

*如果*您将变量作为指针而不是值传递，这两种方法之间存在细微差别。指针将被压入调用堆栈，并且必须被引用才能获取/设置值。

相反，将其设置为本地值，或按值传递，会将值放入堆栈。在这种情况下，它是局部变量还是按值传递并不重要......尽管在按值传递的情况下，根据变量在函数外部的处理方式有一个可能的警告......如果它存储在一个变量（不传递文字值）然后它必须从内存中获取并推送到堆栈上。如果它是从函数内部的文字值设置的，它只是一个压入堆栈的文字并节省了一个内存周期。

您省略的第三个选项是使用全局变量。

如果值始终保持不变，那么最好的答案是使用 #define 并将其作为文字直接编译到代码中。

# android - 谷歌播放崩溃报告报告的Android应用程序崩溃

> ID：15907624
> 
> 赞同：1
> 
> 时间：2013-04-09T16:38:38.313
> 
> 标签：android

我从 google play 在我的 android 应用程序中收到了以下崩溃报告

```
android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
at android.app.ContextImpl.startActivity(ContextImpl.java:625)
at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
at android.webkit.CallbackProxy.uiOverrideUrlLoading(CallbackProxy.java:229)
at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:336)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4633)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

我不确定是我的编码错误还是 Android 错误。你能帮我理解这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:51:49.450

您的意图中缺少一个标志：

```
Intent intent = new Intent(this, SomeActivity.class);
intent.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK)
startActivity(intent); 
```

希望这会有所帮助....干杯！

# javascript - 向 GMaps（谷歌地图）添加标记

> ID：15907626
> 
> 赞同：2
> 
> 时间：2013-04-09T16:38:43.063
> 
> 标签：javascript, google-maps, google-maps-markers, colorize

我正在尝试使用此工具： http: [//software.stadtwerk.org/google_maps_colorizr/](http://software.stadtwerk.org/google_maps_colorizr/)为我的谷歌地图添加颜色，这是我的示例：

[http://jsfiddle.net/xUUxn/851/](http://jsfiddle.net/xUUxn/851/)

颜色效果很好，但现在我似乎无法为其添加任何标记，我尝试将这个示例代码放入：

```
map.addMarker({ 
  lat: -12.043333,
  lng: -77.028333,
  title: 'Lima',
  infoWindow: {
    content: '<p>HTML Content</p>'
  }
 }); 
```

但它似乎不起作用，我不完全确定把它放在哪里，或者即使引用是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T16:49:08.813

为了创建标记，您需要执行以下操作：

演示从您的示例中分叉：http: [//jsfiddle.net/lucuma/xUUxn/852/](http://jsfiddle.net/lucuma/xUUxn/852/)

JS：

```
var marker = new google.maps.Marker({
        position: new google.maps.LatLng( -12.043333,-77.028333),
        map: map,
        title: 'Hello World!'
    }); 
```

添加信息窗口覆盖：

```
var contentString = '<div id="content"><h1>Overlay</h1></div>';
  var infowindow = new google.maps.InfoWindow({
            content: contentString
  });

google.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map,marker);
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:46:42.980

文档说：

```
var marker = new google.maps.Marker({
   position: new google.maps.LatLng(0,0),
   map: map,
   title:"Hello World!"
}); 
```

在你的小提琴中：http: [//jsfiddle.net/xUUxn/854/](http://jsfiddle.net/xUUxn/854/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T16:38:56.530

我能够使用循环，通过使用'this'作为infoWindow.open（）的第二个参数

```
google.maps.event.addListener(marker, 'click', function() {
    infowindow = new ....;
    infowindow.open(map,this);
}); 
```

# asp.net - 下拉列表箭头自定义样式

> ID：15907632
> 
> 赞同：0
> 
> 时间：2013-04-09T16:39:00.233
> 
> 标签：asp.net, css, html, html-select, dropdownbox

![国家下拉菜单](https://i.stack.imgur.com/TNKEB.png)

是否可以使用 css/css3 自定义下拉菜单的箭头背景颜色。

当边框颜色为默认值时，似乎只有黑色箭头可见。

应用边框颜色箭头如图所示

不感兴趣相应地打开/关闭 div。寻找一些造型来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:09:54.323

真正的答案是否定的。浏览器不允许您更改此类元素的外观，例如复选框、单选按钮、下拉菜单等。

然而，有一些 jQuery 插件可以让你假装它认为你看到的是一个真实的下拉列表，但实际上它是别的东西，就像一个带有容器 div 的无序列表，当你点击它时，它会调整大小和收缩。

# java - 如何为文件名制作字符串？

> ID：15907633
> 
> 赞同：0
> 
> 时间：2013-04-09T16:39:11.170
> 
> 标签：java, android, regex, string

我尝试在存储中创建文件，对于文件名我使用`webview.getTitle()`字符串。
当我保存名称为“Google.jpg”或“Foreca.jpg”的文件时，它运行良好，但是......并非所有网页标题都如此清晰。

例如：

> “android - java.io.ioexception：打开失败：einval（无效参数）将图像保存到外部存储时 - 代码日志：”

有很多错误的字符，如果我需要在文件名中输入这个标题。

有没有简单的方法来替换所有这些`:;?!/<>-`字符`""`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:44:04.373

是的，您可以使用`replaceAll()`：

```
String fileName = webview.getTitle();
filename = fileName.replaceAll("(\\p{Punct})","") // fixed \p 
```

查看 Java[文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)了解更多信息。

# asp.net - 如何监听 Web 应用程序中的事件（C# .Net）

> ID：15907643
> 
> 赞同：0
> 
> 时间：2013-04-09T16:39:51.657
> 
> 标签：asp.net

我有一个引发事件并将一些数据作为事件参数发送的第三方应用程序。另一方面，我有一个需要监听这些事件和收集数据的 Web 应用程序。然后是一个 HTML5 页面，它通过一个完整的 Web 请求访问 Web 应用程序并在 UI 上获取填充数据。

Web 应用程序应该如何监听事件并收集数据并为 html5 进行调用做好准备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:41:09.777

您需要研究[WebHooks](http://timothyfitz.com/2009/02/09/what-webhooks-are-and-why-you-should-care/)、[SignalR](http://signalr.net/)以及如何编写不会被 mod 删除的问题。

# twitter-bootstrap - 设置一个带有“row”类的div来显示：-webkit-box; 使内容不可见。为什么？

> ID：15907654
> 
> 赞同：2
> 
> 时间：2013-04-09T16:40:34.267
> 
> 标签：twitter-bootstrap

假设你有一些这样的 HTML：

```
<div class="row">
    <div class="span12">
        Hey there
    </div>
</div> 
```

如果您在 CSS 中执行此操作，该内容将变得不可见，但仍会占用布局中的空间：

```
.row {
    display: -webkit-box;
} 
```

为什么会发生这种情况，如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:53:01.053

我认为 -webkit-box 已被弃用：[http ://dev.w3.org/csswg/css-flexbox/](http://dev.w3.org/csswg/css-flexbox/)

尝试改用“-webkit-flex”。

# wordpress - 来自新手的问题

> ID：15907659
> 
> 赞同：-2
> 
> 时间：2013-04-09T16:41:09.270
> 
> 标签：wordpress, background, header, webpage

这是我的主页：[http](http://www.danmihaila.net/) ://www.danmihaila.net/ 我正在尝试做一些事情，但我不知道怎么做，因为我不仅对 WordPress 和网页设计而且对 CSS 也是新手。我现在想做三件事，但我真的不知道怎么做：

首先，我使用 Clear Retina 主题。

1.  我知道我可以更改背景颜色，但由于某种原因，当我这样做时，标题后面的背景保持不变。
2.  我看不到如何使我的主 URL danmihaila.net 加载我的主页。我应该以不同的方式设置主页吗？
3.  如何将子菜单添加到某个页面？我想要的是当您将鼠标悬停在一个特定页面上时，我希望它显示其他几个子页面。我假设我必须创建某种子菜单，但我不确定。

    第 3 点的解决方案：我在页面菜单中找到了父项。它似乎做我想做的事..

但我越来越困惑，因为在试图弄清楚主页的事情时，我开始不明白什么是页面以及什么是菜单......

抱歉，如果我的问题很琐碎，但我对此真的很陌生。我建立这个网站只是为了托管我的计算机图形产品组合。非常感谢您的时间和耐心！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:47:20.153

1.  更改`#branding`样式表中的背景。( `Appearence > Editor`)

2.  转到`Settings > Reading`。`Front page displays:`将其设置为`A static page`并选择您的主页.. 看起来像 home- 3

3.  对于子菜单，转到`Appearence > Menus`。您可以将左侧面板中的页面添加到导航中。如果拖动导航项，可以重新排列或嵌套它们。嵌套项目将是您的子导航。

我希望这有帮助。

# iphone - 在 iOS 上通过 http 播放/流式传输 mp3 的最佳方式？

> ID：15907662
> 
> 赞同：0
> 
> 时间：2013-04-09T16:41:23.463
> 
> 标签：iphone, ios, core-audio, avaudioplayer, mpmovieplayer

无需预先下载整个 mp3 即可播放/流式传输 mp3 文件的最佳方式是什么 - 只需缓冲 10 秒然后开始播放？

有没有办法在磁盘上缓存 mp3 文件，当它完成下载时，或者它最好缓冲？

AVAudioPlayer 似乎不允许用于 http 流媒体，是否可以改用 MPMoviePlayer - 如果它也仅适用于音频，它的名称会令人困惑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T19:49:52.733

通过 http 流式传输 mp3 的最佳方式是使用 AVPlayer。此[链接](https://stackoverflow.com/questions/13131177/streaming-mp3-audio-with-avplayer)包含有关如何流式传输 mp3 的非常方便的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T11:13:27.683

您可以使用 AVPlayer 流式传输音频或视频。AVPlayer 可以处理 AVAudioPlayer 无法处理的在线流媒体。使用 AVPlayer 试试[这个](https://developer.apple.com/library/ios/samplecode/AVPlayerDemo/Introduction/Intro.html)演示。

# android - 如何为 Android 平板电脑布局实现固定的左窗格？

> ID：15907664
> 
> 赞同：3
> 
> 时间：2013-04-09T16:41:24.447
> 
> 标签：android, android-layout, android-fragments, android-actionbar

我正在将 iPhone+iPad 应用程序移植到 Android。它使用平板电脑的拆分视图控制器，在 Android 术语中允许您同时并排显示两个活动（编辑：Android 只允许屏幕上的一个活动，如下面的@commonsware 所述。下一个最好的方法是使用片段，但是Action Bar 只能存在于 Activity 级别，这意味着它必须扩展整个屏幕的宽度。不知道 Android 平台是否会出现 Split Activity Controller。）

平板电脑横向布局有一个固定的左侧窗格，用于永远不会改变的统计信息。右侧窗格的功能就像应用程序的手机版本一样。转换仅发生在右侧窗格中。即更改活动时，整个屏幕不会滑动，只有右窗格。您如何建议在 Android 中实现此功能？

我应该使用单个活动并在右侧面板中手动执行片段之间的转换吗？这个应用程序有 25 个屏幕，并且会为手机提供另一种布局，所以我正在尝试提前计划并在第一时间做到这一点:) 感谢您的帮助！

![平板电脑布局截图](https://i.stack.imgur.com/yLHPa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:44:42.287

> 它使用平板电脑的拆分视图控制器，用 Android 术语来说，它允许您同时并排显示两个活动。

不可以。在“Android 术语”中，您不能“同时呈现两个活动”。您*可以*同时并排呈现两个片段。

> 您如何建议在 Android 中实现此功能？

使用片段。根据用户输入，根据需要使用 a`FragmentTransaction`替换右侧片段。您的整体活动布局可以是水平的`LinearLayout`（`android:layout_weight`用于控制左侧和右侧的大小），左侧有一个`<fragment>`元素，右侧有一个元素`FrameLayout`。

> 我应该使用单个活动并在右侧面板中手动执行片段之间的转换吗？

是的，实现您的要求。

# jsp - 用法

> ID：15907669
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:41:50.980
> 
> 标签：jsp, servlets, jstl, el

我正在尝试显示我的数据库中的图像。当我想使用......显示我自己的图像时，它工作正常`<b>Image:</b> <img src="images/uploads/${user.getImage()}"` 但是如果我想显示不同的用户或所有用户的图像，则会出现一个空白方块。我认为这可能与`<c:forEach>`标签有关，但不确定。

```
 <c:forEach var="user" items="${UserList}">
      <p><br><b>Name :</b></p> ${user.getUsername()}<a href="ProfilePage2.jsp">View Profile Page</a>
      <div id="img2"><b>Image:</b> <img src="images/uploads/${user.getImage()}"  width="200px" height="150px"/></div>
 </c:forEach> 
```

名称显示正常，但图像不显示！任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:31:36.737

User.getImage() 方法返回什么？

另外，尝试：

```
<img src="images/uploads/${user.image}"  width="200px" height="150px"/> 
```

# php - 多文件上传sql/php

> ID：15907670
> 
> 赞同：2
> 
> 时间：2013-04-09T16:41:54.573
> 
> 标签：php, mysql

我正在尝试上传多个文件，然后在 mysql db 中插入文件名我的问题是插入名称它只存储最后一个文件名

```
for($i=0;$i<count($_FILES['file']['size']);$i++){
    if(strstr($_FILES['file']['type'][$i], 'image')!==false){
        $file = 'uploads/'.time().' - '.$_FILES['file']['name'][$i];
        move_uploaded_file($_FILES['file']['tmp_name'][$i],$file);
        $na=$_FILES['file']['name'][$i];

        $sql="INSERT INTO img (img_name) VALUES ('$na');";
    }
} 
```

注意所有文件都上传成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:18:13.467

```
for($i=0;$i<count($_FILES['file']['size']);$i++){
    if(strstr($_FILES['file']['type'][$i], 'image')!==false){
        $file = 'uploads/'.time().' - '.$_FILES['file']['name'][$i];
        move_uploaded_file($_FILES['file']['tmp_name'][$i],$file);
        $na=$_FILES['file']['name'][$i];

        $sql="INSERT INTO img (img_name) VALUES ('$na');";
    }
} 
```

您只是在创建一个字符串并存储一些值。你还没有执行它..说 $str = "apple"; 它只是一个声明。我想你已经在循环之后执行了查询。假设您有 10 个文件。loop 被执行 10 次，并且 $na 具有插入的最后一个文件名。

Soln：将您的执行查询移到 for 循环中。

```
for($i=0;$i<count($_FILES['file']['size']);$i++){
    if(strstr($_FILES['file']['type'][$i], 'image')!==false){
        $file = 'uploads/'.time().' - '.$_FILES['file']['name'][$i];
        move_uploaded_file($_FILES['file']['tmp_name'][$i],$file);
        $na=$_FILES['file']['name'][$i];

        $sql="INSERT INTO img (img_name) VALUES ('$na');";
        mysql_query($con,$sql); // note: $con is your connection string
    }
} 
```

# asp.net - 在站点之间共享 web.config 文件

> ID：15907671
> 
> 赞同：1
> 
> 时间：2013-04-09T16:42:01.757
> 
> 标签：asp.net, web-config, rsa, shared-hosting

不是服务器管理员我想知道，同一台服务器上的两个 ASP.NET 网站是否可以共享一个公共数据库使用相同的 web.config 文件？我正在为一家拥有多个业务集团的公司开发一个单独品牌的配套网站。两个站点都有自己的 URL，但都托管在同一台服务器上，并且都将与同一个数据库进行通信。由于一个站点已经设置并运行，我希望我可以节省时间并在新站点中重用 web.config。这会导致与 RSA 密钥及其相关密码值发生冲突吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:55:42.403

答案是不。每个网站都必须在根文件夹中有自己的 web.config（至少）。

# c# - 获取蓝牙 Windows Phone 8 上的可用设备列表

> ID：15907672
> 
> 赞同：0
> 
> 时间：2013-04-09T16:42:01.883
> 
> 标签：c#, windows-phone-7, mobile, visual-studio-2012, windows-phone-8

我想知道如何按名称列出所有可用设备以与它们连接。我试图在 MS 网站上找到，但没有解释列出所有设备。我的代码：

```
 PeerFinder.Start();
                PeerFinder.AlternateIdentities["Bluetooth"] = "";
                var peers = await PeerFinder.FindAllPeersAsync();

                if (peers.Count == 0)
                {
                    MessageBox.Show("Peer not found.");
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:30:48.613

我发现无法列出所有蓝牙设备，只能查看所有配对设备。所以我配对了设备，然后打开它的连接，看看设备蓝牙是否打开。如果我无法连接到它，它就会关闭。

# java - Java中的流水线

> ID：15907674
> 
> 赞同：2
> 
> 时间：2013-04-09T16:42:11.463
> 
> 标签：java, pipelining

我有 6 个功能：

*   获取操作
*   解码
*   获取操作数
*   执行
*   回写
*   更新电脑

每个都给另一个输入。我想同时执行它们，即流水线。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:44:20.143

[流水线模式](https://code.google.com/p/pipelinepattern/)

> 流水线模式有助于将问题划分为更小的可重用代码组件。这是一种简单而强大的结构模式，可以将复杂的逻辑组织成更小的可重用组件，这些组件可以独立添加/删除/修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:45:48.587

[为每个实现Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)的管道组件创建一个类。给每个组件一个[ConcurrentLinkedQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)来保存要处理的数据；每个组件将在无限循环中轮询这个队列（在它的 run() 方法中），在它拉出数据时处理数据。每个前面的组件都会将其输出添加到下一个组件的队列中。现在将每个可运行对象分配给一个线程，启动线程，并开始向第一个组件的队列提供数据。

如果一个组件发现它的队列是空的，那么你可能想让它休眠半秒左右。

您可能还想为每个组件添加一个 cancel() 方法，以便在其 run() 方法中跳出无限循环。

```
public class Decode implements Runnable {
   private boolean cancel = false;
   private ConcurrentLinkedQueue<Data> queue = new ConcurrentLinkedQueue<>();
   private FetchOperands nextComponent;

   public void run() {
       while(!cancel) {
           Data data = queue.poll();
           if(data != null) {
               ...
               nextComponent.enqueue(data);
           } else (Thread.sleep(500);
       }
   }

   public void enqueue(Data data) {
       queue.offer(data);
   }

   public void cancel() {
       cancel = true;
   }

   public void setFetchOperands(FetchOperands nextComponent) {
       this.nextComponent = nextComponent;
   }
}

public class Main implements Runnable {
    public void run() {
        Decode decode = new Decode();
        FetchOperands fetchOperands = new FetchOperands();
        decode.setFetchOperands(fetchOperands);
        Thread t1 = new Thread(decode);
        Thread t2 = new Thread(fetchOperands);
        t1.start();
        t2.start();
        t1.join();
        t2.join();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-09T22:19:28.250

为了改进[@Zim-Zam O'Pootertoot 的回答](https://stackoverflow.com/a/15907741/616644)，您可以拥有它，而不是让您的组件在没有什么要处理的情况下休眠一会儿，然后在您传递给它要处理的东西时`wait()`调用它。`notify()`

# c# - 如何通过 ashx 将用户登录到 DotNetNuke？

> ID：15907675
> 
> 赞同：0
> 
> 时间：2013-04-09T16:42:12.830
> 
> 标签：c#, forms-authentication, dotnetnuke

我们有一个页面大量使用 url 中的哈希来表示用户当前正在查看的弹出窗口。我们正在尝试进行设置，因此如果用户单击一个按钮，他们会看到一个登录表单，该表单将使他们登录并重新加载他们所在的确切页面（包括#！）。

我决定通过 ajax 来做到这一点，在登录弹出窗口中有一个标准表单，然后使用以下代码将单击按钮与对 ashx 的 ajax 调用联系起来：

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "application/json";

        var username = context.Request["username"];
        var password = context.Request["password"];
        var portalSettings = PortalSettings.Current;
        var ip = GetIpAddress(context.Request);
        var loginStatus = UserLoginStatus.LOGIN_FAILURE;

        var result = UserController.ValidateUser(portalSettings.PortalId, username, password, string.Empty,
                                    portalSettings.PortalName, ip, ref loginStatus);

        if (loginStatus == UserLoginStatus.LOGIN_SUCCESS || loginStatus == UserLoginStatus.LOGIN_SUPERUSER)
        {
            FormsAuthentication.SetAuthCookie(result.UserID.ToString(), true);
            context.Response.Write(JsonConvert.SerializeObject(new { Result = true}));
        }
        else
        {
            context.Response.Write(JsonConvert.SerializeObject(new { Result = false }));
        }
    } 
```

这似乎有效，事实上，当我传入 portalId、用户名和密码（通过浏览器 url 调用）时，它会返回`LoginStatus.LOGIN_SUPERUSER`. 根据 fiddler 的说法，返回的 JSON 带有以下 cookie 标头：

```
Set-Cookie: .DOTNETNUKE=5E48DC014F447BA2ED6ADFA09138D3E089B52E3A6ECFAD0AE45B7EB94842B48EE84529F92F34B1ABE7D1BBF580F3AF91446ED70177EF967588D0518802C397AD5831CA941CDF15F9C625075E9F2403A743B20AFC380E01DBE6383587E06D85D61A6485FA; expires=Tue 
```

但是，一旦我导航到我的主页，网络服务器似乎就会将我注销并发送回以下 cookie 标头：`Set-Cookie: .DOTNETNUKE=; expires=Tue, 12-Oct-1999 04:00:00 GMT; path=/; HttpOnly`

我已经验证它`PortalSettings.Current`指向正确的门户。

如何保持登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:10:44.087

原来我错误地使用`UserController.ValidateUser()`而不是`UserControll.UserLogin()`.

# java - 将线程值输出到文本框中

> ID：15907676
> 
> 赞同：0
> 
> 时间：2013-04-09T16:42:17.923
> 
> 标签：java, multithreading, user-interface

我正在尝试将银行帐户的值输出到文本框。该程序是一个银行账户模拟，随着模拟的进行，线程会发生变化。目前这些值正在输出到控制台。

这是当前输出的代码：

```
public BankAccount()
{
    accountBalance = 0 ;
}

public synchronized void deposit(int addAmount, String name)
{
    // the 'name' argument holds the name of the source of this credit 

    accountBalance+=addAmount ;
    System.out.println(name + " added " + addAmount) ;
    System.out.println("Account balance is now standing at " + accountBalance);
}

public synchronized void withdraw(int takeAmount, String name)
{
    // the 'name' argument holds the name of the bill being paid

    accountBalance-=takeAmount ;
    System.out.println(name + " took " + takeAmount) ;
    System.out.println("Account balance is now standing at " + accountBalance);
}

public int getBalance()
{
    return accountBalance ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:47:18.370

因为您将生成多个线程，每个线程都具有更新单个[JTextArea](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/JTextArea.html)的能力，您需要注意称为事件队列的概念。 [这](http://www.kauss.org/Stephan/swing/index.html)是一个解释您可以采取的方法的页面。

# ios - 应用程序加载器警告：应用程序引用了 Payload/ 中的非公共选择器 。应用程序/ ： ID

> ID：15907679
> 
> 赞同：0
> 
> 时间：2013-04-09T16:42:22.443
> 
> 标签：ios, facebook, app-store-connect

嗨，我通过 Application Loader 将我的应用程序提交到 iTunes 商店时收到此警告。

`The app references non-public selectors in Payload/<Appname>.app/<App name>: id`

我怎样才能防止警告？

注意：我正在取消最新的 facebook sdk。我在哪里使用 FBGraphUser id 变量作为`user.id`

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:44:51.813

我认为您的代码（或第三方代码）正在使用一些私有 API，而不是文档化/公共 API。

# apache - 如何在 Apache 配置中检索服务器别名？

> ID：15907684
> 
> 赞同：1
> 
> 时间：2013-04-09T16:42:38.280
> 
> 标签：apache, mod-rewrite

我有一个命名的虚拟主机来处理一堆不同主机名的流量。

在 Apache 配置中，我需要根据用户请求的主机名创建 RewriteRules。不幸的是，`%{SERVER_NAME}`变量的内容始终与配置中定义为 ServerName的*主主机名匹配，而不是用户请求的别名。*

例如：我需要服务`site.company.com`，`site2.company.com`并且`site3.company.com`

```
NameVirtualHost *:80
<VirtualHost *:80>
  ServerName site.company.com
  ServerAlias site?.company.com

  RewriteCond %{SERVER_NAME} pattern
  RewriteRule blah_depending_on_hostname_requested_by_user
</VirtualHost> 
```

**问题**：`%{SERVER_NAME}`总是`site.company.com`，即使用户请求别名之一，例如`site2.company.com`.

我该如何解决这个问题？似乎没有可用的`%{SERVER_ALIAS}`变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:48:04.137

你可能的意思是`%{HTTP_HOST}`。这是浏览器提供的确切站点名称。从[手册](http://httpd.apache.org/docs/2.2/en/mod/mod_rewrite.html#rewriterule)：

> 如果您希望匹配主机名、端口或查询字符串，请分别使用带有 %{HTTP_HOST}、%{SERVER_PORT} 或 %{QUERY_STRING} 变量的 RewriteCond。

# wpf - 在 MVVM 中的某处调用 UserControl 的方法

> ID：15907685
> 
> 赞同：0
> 
> 时间：2013-04-09T16:42:38.433
> 
> 标签：wpf, mvvm, user-controls

我有以下情况：

1.  我有一个用户控件，比如说`UserControl.xaml`
2.  在这个控件背后的代码中，我有方法`DoSomething()`
3.  我有这个控件的视图模型`UserControlViewModel.cs`

我需要在`DoSomething()`某处调用 usercontrol 的方法。任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:22:43.797

如果我真的必须这样做，那么使用 DataContextChanged 事件可能会有所帮助。这是一个解决方案，希望视图和视图模型之间的耦合最小。

```
public partial class MainWindow : IMainWindow
{
    public MainWindow()
    {
        this.DataContextChanged += this.MainWindowDataContextChanged;

        this.InitializeComponent();
    }

    private void MainWindowDataContextChanged(object sender, 
                     DependencyPropertyChangedEventArgs e)
    {
        var vm = this.DataContext as IMainWindowViewModel;
        if (vm != null)
        {
            vm.View = this;
        }
    }

    public void DoSomething()
    {
        Debug.WriteLine("Do something in the view");
    }
}

public interface IMainWindow
{
    void DoSomething();
}

public class MainWindowViewModel : IMainWindowViewModel
{
    public MainWindowViewModel()
    {
        this.DoSomethingCommand = new RelayCommand(this.DoSomething);
    }

    public ICommand DoSomethingCommand { get; set; }

    private void DoSomething()
    {
        Debug.WriteLine("Do something in the view model");

        var view = this.View;
        if (view != null)
        {
            view.DoSomething();
        }
    }

    public IMainWindow View { get; set; }
}

public interface IMainWindowViewModel
{
    IMainWindow View { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:38:46.017

[如果你在做 MVVM ，](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)你真的应该使用 MVVM 框架。框架将提供一种机制，您可以通过该机制从视图中调用视图模型上的动词（方法）。[例如， Caliburn.Micro](http://caliburnmicro.codeplex.com/)提供[Actions](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions&referringTitle=Documentation)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:36:57.393

听起来您的应用程序结构不正确。

做什么

```
DoSomething() 
```

做，这对 ViewModel 的绑定属性的变化没有反应？

如果您确实需要从 ViewModel 触发 View 背后的代码中的某些内容，请使用消息处理程序，例如[Galasoft MVVMLight](http://www.galasoft.ch/mvvm/)框架中的处理程序。

# python - Python 在 GAE 上动态生成 HTML 页面

> ID：15907692
> 
> 赞同：2
> 
> 时间：2013-04-09T16:42:57.390
> 
> 标签：python, html, google-app-engine, rest

在 GAE 上，我需要对 PiCloud 服务器进行一些 REST 调用，然后根据 PiCloud 返回值创建一个输出页面。但是，PiCloud 需要几分钟来处理模型。因此我想知道是否可以先创建一个“加载”页面，然后在完成计算后，呈现真正的输出页面。

具体来说，问题是我如何不断检查我的 REST 服务的状态，然后生成不同的 HTML 页面。

我感谢任何建议和意见！

### PS：jQuery BlockUI 似乎是一个很好的例子，但它需要估计超时持续时间，我猜不到......

调用 REST 服务的函数：

```
def get_jid(pdf_t, pdf_nop, pdf_p):
    response = urlfetch.fetch(url=url, payload=data, method=urlfetch.POST, headers=http_headers) 
    jid= json.loads(response.content)['jid']
    output_st = "running"

    while output_st!="done":
        response_st = urlfetch.fetch(url='https://api.picloud.com/job/?jids=%s&field=status' %jid, headers=http_headers)
        output_st = json.loads(response_st.content)['info']['%s' %jid]['status']

    url_val = 'https://api.picloud.com/job/result/?jid='+str(jid)
    response_val = urlfetch.fetch(url=url_val, method=urlfetch.GET, headers=http_headers)
    output_val = json.loads(response_val.content)['result']
    return(jid, output_st, output_val) 
```

生成 HTML 页面：

```
class pdfPage_loading(webapp.RequestHandler):
    def post(self):                              
        final_res=get_jid(pdf_t, pdf_nop, pdf_p)[2]
        html = html + template.render(templatepath + 'popup_pdf_eco.html', {
            'title':'Ubertool',
            'model_page':'',
            'model_attributes':'Please wait','text_paragraph':''})
        self.response.out.write(html)

class pdfPage_done(webapp.RequestHandler):
    def post(self):                              
        final_res=get_jid(pdf_t, pdf_nop, pdf_p)[2]
        html = html + template.render(templatepath + 'popup_pdf_eco.html', {
            'title':'Ubertool',
            'model_page':final_res,
            'model_attributes':'Please download your PDF here','text_paragraph':''})
        self.response.out.write(html)

app_loading = webapp.WSGIApplication([('/.*', pdfPage_loading)], debug=True)
app_done = webapp.WSGIApplication([('/.*', pdfPage_done)], debug=True)

def main():
    ##Here is the problematic part:
    if get_jid(pdf_t, pdf_nop, pdf_p)!='done':
        run_wsgi_app(app_pre)
    else:
        run_wsgi_app(app)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:29:17.703

首先，您不需要多个 WSGIApplication 处理程序。您可以基于 URL 和 GET/POST 参数的请求。

我会混合使用任务和 Channel API：

当用户访问页面时：

1.  创建一个频道令牌供用户使用
2.  进行 REST API 调用
3.  启动一个任务（如下所述），将创建的令牌和 PiCloud 作业的 id 传递给它
4.  显示“加载页面”并让用户使用在步骤 1 中创建的令牌连接到 Channel API

在任务中，让它检查 PiCloud 作业的状态。如果状态未完成，让任务设置一个新任务以再次调用自己，并检查作业的状态。作业完成后，通过 Channel API 将数据传递给用户，以便他们可以加载页面内容或重定向到将为他们准备好内容的页面。

示例状态检查代码（这是使用来自 PiCloud 的示例代码，您可以使用自己的请求来获取状态`urlfetch`- 这仅作为示例，因此您可以根据需要插入代码以工作）：

```
import cloud
from google.appengine.api import taskqueue
from google.appengine.api import channel

#<Your other hanlders here>

class CheckStatus(webapp.RequestHandler):
  def post(self):
    job_id = self.request.get('job_id')
    token = self.request.get('token')
    status = cloud.get('status')
    if status != 'done':
       taskqueue.add(url='/checkstatus', params={'job_id': job_id, 'token': token}, method="POST", countdown=3)
       return
    channel.send_message(token, '<some message here>')

app = webapp.WSGIApplication([('/done', pdfPage_done),
                              ('/checkstatus', CheckStatus),
                              ('/.*', pdfPage_loading)], debug=True)

def main():
  run_wsgi_app(app)

if __name__ == '__main__':
   main() 
```

# ruby-on-rails - 如何在 ActiveRecord 中定义没有外键的关系？

> ID：15907694
> 
> 赞同：0
> 
> 时间：2013-04-09T16:43:06.310
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有三张桌子

```
prices
   timestamp : datetime
   unit_id   : integer
   price     : decimal

sales
   timestamp : datetime
   unit_id   : integer
   price     : decimal

schedules
   timestamp : datetime
   unit_id   : integer
   status    : string 
```

这些表不属于任何东西，因此 schedules_id 或其他键不起作用。我怎样才能利用 ActiveRecords 关系来获得类似的东西：

```
class Schedules
   has_one :sale, 
     joins: "LEFT OUTER JOIN ( sales s ) 
             ON ( s.timestamp = schedules.timestamp AND s.unit_id = schedules.unit_id")

   has_one :price
      ...
 end 
```

那么我可以

```
Schedules.where(timestamp: Time.now).includes([:sales, :prices]).all 
```

实际情况比上面的例子要复杂得多。该应用程序有数百个表。

使用连接有效，但会将属性/值放入计划对象中。

```
class Schedules
  def self.prices
    select("*").joins("LEFT OUTER JOIN ...")
  end
end 
```

以上将在将`prices`字段加入时间表时起作用。

```
s = Schedules.prices.last # will have a price attribute
s.price 
```

但理想的做法是在子对象中加入

```
s.price.price
s.sales.price 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:53:36.660

为什么不直接创建一个 unti 模型，即使它只是一个 ID 号，然后强制它们要么都具有相同的时间戳，要么只具有单元上的时间戳。无论哪种方式，您最终都会得到相同的结果。

```
class Price < ActiveRecord::Base

  belongs_to :unit
  has_one :schedule, :through unit
  has_one :sale, :through unit

end 
```

其他两个也一样，然后。

```
class Unit < ActiveRecord::Base

  has_one :price
  has_one :schedule
  has_one :sale

end 
```

现在使用 Unit 上的时间戳而不是其他时间戳，或自定义验证以确保所有关联的时间戳具有相同的时间戳。

# ios - 我可以将 CGContextRef 传递给从 drawRect 调用的方法吗？

> ID：15907695
> 
> 赞同：0
> 
> 时间：2013-04-09T16:43:07.657
> 
> 标签：ios, objective-c, uigraphicscontext

我在 Quartz 2D Programming Guide 中找到了这个：

> 要在 iOS 应用程序中绘制到屏幕上，您需要设置一个 UIView 对象并实现它的 drawRect: 方法来执行绘制。当视图在屏幕上可见并且其内容需要更新时，将调用视图的 drawRect: 方法。在调用您的自定义 drawRect: 方法之前，视图对象会自动配置其绘图环境，以便您的代码可以立即开始绘图。作为此配置的一部分，UIView 对象为当前绘图环境创建图形上下文（CGContextRef 不透明类型）。您可以通过调用 UIKit 函数 UIGraphicsGetCurrentContext 在 drawRect: 方法中获取此图形上下文。

由于我遇到了无效上下文的问题（因为当我返回重新绘制时它是 0x00），我想知道是否可以在**-drawRect**的开头获取当前上下文并以某种方式将其传递给我从内部调用的方法**-绘制矩形**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:48:49.957

只要这些方法不保存引用以供在调用期间之外使用，您绝对可以传递`CGContextRef`给调用的方法，您的代码应该没问题。但是，您传递的上下文引用将等同于通过 检索的上下文，因此我怀疑通过添加额外的参数可以获得很多好处。`drawRect:``drawRect:``UIGraphicsGetCurrentContext`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:49:38.273

UIGraphicsGetCurrentContext 只能从 drawRect: 方法（或从它调用的方法）中调用，否则它将返回 nil。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T17:03:17.457

您可以使用`UIGraphicsGetCurrentContext`from 调用的任何方法`-drawRect`。值得注意的是，`-drawRect`当需要更新视图时，不应该直接调用；`-setNeedsDisplay`而是打电话。

如果你想在你自己的离屏上下文中使用 UIKit 绘图系统，你可以使用[UIGraphicsPushContext](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsPushContext)来设置当前上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T22:26:34.147

以我的经验，传递`CGContextRef`会产生相当“快”的内存泄漏。

# java - 无法用参数实例化子类

> ID：15907697
> 
> 赞同：2
> 
> 时间：2013-04-09T16:43:12.923
> 
> 标签：java

我不断收到错误：`java.lang.NoSuchMethodException: com.production.workflow.MyWorkflow.<init>(com.production.model.entity.WorkflowEntity)`

我有一个期待的构造函数，`WorkflowEntity`所以我无法弄清楚它为什么这么说`NoSuchMethod`。有没有关于构造函数继承的东西阻止它实例化？

我的实例化工厂：

```
public static Workflow factory(WorkflowEntity workflowEntity) {
    try {
        Class<?> clazz = Class.forName(workflowEntity.getClassName()).asSubclass(Workflow.class);
        Constructor c = clazz.getConstructor(WorkflowEntity.class);
        Object workflowClass = c.newInstance(clazz);
        return (Workflow) workflowClass;
    } catch (Exception e) {
        e.printStackTrace();
        logger.severe("Unable to instantiate "+workflowEntity.getClassName()+" class: " + e.getLocalizedMessage());
    }

    return null;
} 
```

工作流类：

```
public class MyWorkflow extends Workflow {
//no constructors 
```

扩展类：

```
abstract public class Workflow {
    protected static final Logger logger = Logger.getLogger(Workflow.class.getName());

    private WorkflowEntity entity;
    protected WorkflowProcess workflowProcess;

    @Autowired
    private WorkflowProcessService workflowProcessService;

    /* Don't use this one */
    public Workflow() { }

    /* Default constructor */
    public Workflow (WorkflowEntity entity) {
        this.entity = entity;

        //get first workflow process
        //@todo this should factor in rule, for multiple starting points
        for (WorkflowProcessEntity workflowProcessEntity : entity.getWorkflowProcesses()) {
            workflowProcess = WorkflowProcess.factory(workflowProcessEntity);
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:03:35.310

您的代码中有两个问题：

1.  构造函数不会被子类自动继承。您需要将`MyWorkflow(WorkflowEntity)`构造函数添加到`MyWorkflow`类中。
2.  您的新实例调用需要使用`workflowEntity`实例（而不是您现在提供的类实例）

这里：

```
class MyWorkflow extends Workflow {

    public MyWorkflow() {
        super();
    }

    public MyWorkflow(WorkflowEntity entity) {
        super(entity);
    }
}
public static Workflow factory(WorkflowEntity workflowEntity) {
    try {
        Class<?> clazz = Class.forName(workflowEntity.getClassName())
                .asSubclass(Workflow.class);
        Constructor<?> c = clazz.getConstructor(WorkflowEntity.class);
        Object workflowClass = c.newInstance(workflowEntity);
        return (Workflow) workflowClass;
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:27:00.517

考虑建造者模式而不是工厂模式。下面是一个示例，它构建一个采用 WorkflowEntity 构造函数参数的 WorkFlow，并构建一个不采用 WorkFlowEntity 模式的工作流（仅显示通过构建器可用的多个选项）。

```
public class WorkFlowBuilder
{
    private WorkflowEntity constructorParameter;
    private Class workflowClass;

    public WorkFlowBuilder(Class desiredWorkflowClass)
    {
        if (desiredWorkflowClass != null)
        {
            workflowClass = desiredWorkflowClass;
        }
        else
        {
            throw new IllegalArgumentException("blah blah blah");
        }
    }

    public void setConstructorParameter(final WorkflowEntity newValue)
    {
        constructorParameter = newValue;
    }

    public WorkFlow build()
    {
        Object workflowObject;

        if (constructorParameter != null)
        {
            Constructor constructor = workflowClass.getConstructor(WorkflowEntity.class);
            Object workflowObject;

            workflowObject = constructor.newInstance(workflowEntity);
        }
        else
        {
            workflowObject = workflowClass.newInstance();
        }

        return (WorkFlow)workflowObject;
    }
}
```

如下使用它：

```
WorkFlowBuilder builder = new WorkFlowBuilder(MyWorkFlow.class);
WorkflowEntity entity = new WorkFlowEntity();
WorkFlow item;

entity... set stuff.

builder.setConstructerParameter(entity)
item = builder.build();
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T16:59:21.887

我认为您只想在 newInstance 调用上将 workflowEntity 传递给构造函数，而不是类型化的 Class。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:02:16.737

构造函数在继承期间失去了外部可见性。

您需要在 MyWorkflow 中重新定义它。

这样做是因为子类可能不支持超类的创建过程。所以超级对象构造函数对子类没有意义，如果它们在外面可见，它甚至是不安全的。

如果在没有 WorkflowEntity 的情况下实例化您的类可以使用，您还应该删除默认构造函数。只需将其从 Workflow 中删除，不要添加到 MyWorkflow。

**UPD**

您还应该考虑使用泛型来避免类强制转换。

```
public Workflow create(WorkflowEntity workflowEntity) throws 
               ClassNotFoundException, NoSuchMethodException, SecurityException
               , InstantiationException, IllegalAccessException
               , IllegalArgumentException, InvocationTargetException {

    Class<? extends Workflow> clazz = Class.forName(workflowEntity.getClassName()).asSubclass(Workflow.class);
    Constructor<? extends Workflow> c = clazz.getConstructor(WorkflowEntity.class);
    Workflow workflowClass = c.newInstance(clazz);
    return workflowClass;
}

class WorkflowEntity {

    public String getClassName() {
        return "className";
    };
}

class Workflow {

    Workflow(WorkflowEntity entity) {
    };
}

class MyWorkflow extends Workflow {

    MyWorkflow(WorkflowEntity entity) {
        super(entity);
    }
} 
```

# java - getNumberOfInteriorNodes BinaryTree Java

> ID：15907701
> 
> 赞同：0
> 
> 时间：2013-04-09T16:43:27.213
> 
> 标签：java, binary-tree, nodes

在@hyde 告诉我之后，这就是我所做的：

```
Node<E> current = root;
int count = 0;

public int getNumberOfInteriorNodes() {
    if (current == null || (current.left == null && current.right == null)) {
        return count;
    }
    else {
        if (current.right != null) {
            Node<E> tmp = current;
            current = current.right;
            count += getNumberOfInteriorNodes();
            current = tmp;
          }
          if (current.left != null) {
              Node<E> tmp = current;
              current = current.left;
              count += getNumberOfInteriorNodes();
              current = tmp;
          }
          return count + 1;
      }
} 
```

下面是我的测试方法的样子：

```
public static void testGetNumberOfInteriorNodes() {
     BinarySearchTree<Integer> t;
     t = new BinarySearchTree<Integer>();
     Assert.assertEquals(0, t.getNumberOfInteriorNodes());
     t.add(2);
     Assert.assertEquals(0, t.getNumberOfInteriorNodes());
     t.add(1);
     Assert.assertEquals(1, t.getNumberOfInteriorNodes());
     t.add(5);
     Assert.assertEquals(1, t.getNumberOfInteriorNodes());
     t.add(4);
     Assert.assertEquals(2, t.getNumberOfInteriorNodes());
     t.add(3);
     Assert.assertEquals(3, t.getNumberOfInteriorNodes());
     t.add(6);
     Assert.assertEquals(3, t.getNumberOfInteriorNodes());
} 
```

我的测试在第 3 个断言中失败并出现错误。计数永远不会超过零。这是我得到的错误：

```
Failure: junit.framework.AssertionFailedError: expected:<1> but was:<0> 
```

任何进一步的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:19:56.810

`current`您的问题是，当您使用递归时，您只有一个共享变量。它将在递归调用中被覆盖。相反，您必须将其作为参数传递，因此您的递归函数需要：

```
public int getNumberOfInteriorNodes(Node<E> current) 
```

在*第一次*调用时（代码中的其他地方），你传递`root`给它：

```
... = getNumberOfInteriorNodes(root); 
```

然后你需要在递归调用中传递修改后的值，右侧：

```
count += getNumberOfInteriorNodes(current.right); 
```

当然，左侧也是如此。不在`return`这里，否则它会返回而不计算对方！也没有+1，如果右侧和左侧都存在，那么它将是+2。相反，`return count + 1;`在方法结束时（是的，你确实需要它）。

* * *

此外，在您的第一个`if`测试中，没有意义的 if `root == null`，它没有做任何有用的事情（*在这种情况下*也没有任何害处，但它仍然是混乱的，这使得代码更难理解，并且如果您更改代码可能会成为问题）。

* * *

然后你似乎也有这个：`int count==0;;`

这甚至可以编译，还是复制粘贴错误？你应该使用赋值`int count = 0;`

* * *

如果您有方法没有参数的限制，您需要`current`在调用后恢复值。这是右侧的代码，对左侧执行相同的操作：

```
if (current.right!=null) {
    Node<E> tmp = current;
    current = current.right;
    count += getNumberOfInteriorNodes();
    current = tmp;
} 
```

请注意，对于“真实”代码，这将是一种非常愚蠢的递归方式。

如果这个“无参数”只是 API 限制，那么解决这个问题的常用方法是使用私有辅助方法：

```
public int getNumberOfInteriorNodes() {
    return recNumberOfInteriorNodes(root) 
}

private int recNumberOfInteriorNodes(Node<E> current) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:39:52.217

这是一些可以解决问题的代码。顺便说一句：没有孩子的节点是`leaves`.

```
class Node {
    Node left;
    Node right;
}

class Main {
    void test() {
        Node root = new Node();
        Node leftleft = new Node();
        Node left = new Node();
        Node right = new Node();
        Node rightright = new Node();
        Node rightleft = new Node();
        root.left = left;
        root.right = right;
        left.left = leftleft;
        right.left = rightleft;
        right.right = rightright;
        int c = getLeaves(root);
    }

    int getLeaves(Node node) {
        if (node == null)
            return 0;
        if (node.left == null && node.right == null) 
            return 1;
        return getLeaves(node.left) + getLeaves(node.right);
    }
} 
```

# ruby-on-rails - Rails 3.2.12 和 mongoid 3.0.17，不能初始化观察者，

> ID：15907705
> 
> 赞同：1
> 
> 时间：2013-04-09T16:43:45.177
> 
> 标签：ruby-on-rails, mongoid

我试图创建一个观察者在创建更新产品时做某事。

产品模型在命名空间“ecommerce”下，路径为“app/models/ecommerce/product.rb”

```
class Ecommerce::Product
  include Mongoid::Document
  include Mongoid::Timestamps

  field :market_price, type: Float, default: 0.0
  field :price, type: Float
  field :stock, type: Integer, default: 999
  blah...blah...blah

  belongs_to :shop, :class_name => "Ecommerce::Shop"
end 
```

然后我在app下做了一个observers文件夹，为上面的模型做了一个observer类。路径是“app/observers/ecommerce/product_observer.rb”

```
class Ecommerce::ProductObserver < Mongoid::Observer
  observe :ecommerce_product

  def after_create(ecommerce_product)
    # do something
  end
end 
```

在 application.rb 中，我使用循环将观察者加载到 config.mongoid.observers，如下面的代码（已经过测试，在这里工作正常）

```
config.mongoid.observers = Dir["#{config.root}/app/observers/**/*.rb"].collect do |full_name|
  File.basename(full_name,'.rb').to_sym
end 
```

最后我尝试重新启动rails服务器，终端上出现以下错误

```
/Users/Ben/.rvm/gems/ruby-1.9.3-p385@opn/gems/activesupport-3.2.12/lib/active_support/inflector/methods.rb:230:
in `block in constantize': uninitialized constant ProductObserver (NameError) 
```

我只是想知道观察命名空间模型有什么遗漏的吗？有人可以帮忙吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:51:30.483

您的调用`File.basename`正在剥离电子商务目录。所以它只剩下`'product_observer'`which`ProductObserver`没有命名空间。

# hadoop - Hadoop 2.0。它是仅支持新的 MapReduce 2 还是同时支持经典和新的 MapReduce？

> ID：15907706
> 
> 赞同：1
> 
> 时间：2013-04-09T16:43:51.763
> 
> 标签：hadoop, mapreduce

Hadoop 2.0 是仅支持新 MapReduce 2 (YARN) 还是同时支持经典和新 MapReduce？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:21:42.867

它支持两者。不同之处在于，您所谓的经典 mapreduce 现在将作为*应用程序*运行，而不是作为框架的一部分集成。

YARN 允许社区构建其他*类似 mapreduce 的*应用程序以在 Hadoop 平台上运行。

另一个 MR2 应用程序的示例可以在下面的第一个链接中找到，称为 DIstributedShell

[简要说明 MR2 和 YARN](http://blog.cloudera.com/blog/2012/10/mr2-and-yarn-briefly-explained/)

本文的最底部明确说明了这一点。任何更改为 MRv2 的人都必须重新编译他们的源代码，它应该可以运行。

[更详细的解释](http://blog.cloudera.com/blog/2012/02/mapreduce-2-0-in-hadoop-0-23/)

# java - Ant 脚本无法找到明确的类路径

> ID：15907708
> 
> 赞同：1
> 
> 时间：2013-04-09T16:44:04.353
> 
> 标签：java, ant, classpath

我想编译一个Java文件。在控制台上我这样做：

```
javac -cp "/home/user/java/ClickRecommender/build:/home/user/java/ClickRecommender/src/.:/home/user/java/ClickRecommender/libs/*" visualization/VisualizeCorrelationMatrix.java 
```

这工作正常。但我必须改用自建的 ant 脚本。使用“ant -v”执行我的 ant 脚本时，我得到使用以下类路径的信息：

```
init:
    [mkdir] Skipping /home/user/java/ClickRecommender/build because it already exists.

baseclasses:
    [javac] /home/user/java/ClickRecommender/src/visualization/VisualizeCorrelationMatrix.class skipped - don't know how to handle it
    [javac] VisualizeCorrelationMatrix.java added as VisualizeCorrelationMatrix.class doesn't exist.
    [javac] Compiling 1 source file to /home/user/java/ClickRecommender/build
    [javac] Using modern compiler
adding /home/user/java/ClickRecommender/libs/* which contains wildcards and may not do what you intend it to do depending on your OS or version of Java
adding /home/user/java/ClickRecommender/libs/* which contains wildcards and may not do what you intend it to do depending on your OS or version of Java
    [javac] Compilation arguments:
    [javac] '-d'
    [javac] '/home/user/java/ClickRecommender/build'
    [javac] '-classpath'
    [javac] '/home/user/java/ClickRecommender/build:/home/user/java/ClickRecommender/src:/home/user/java/ClickRecommender/libs/*'
    [javac] '-sourcepath'
    [javac] '/home/user/java/ClickRecommender/src/visualization'
    [javac] '-g:none'
    [javac] 
    [javac] The ' characters around the executable and arguments are
    [javac] not part of the command.
    [javac] File to be compiled:
    [javac]     /home/user/java/ClickRecommender/src/visualization/VisualizeCorrelationMatrix.java
    [javac] /home/user/java/ClickRecommender/src/visualization/VisualizeCorrelationMatrix.java:16: cannot find symbol
    [javac] symbol  : method columns()
    [javac] location: class recommender.CorrelationMatrix
    [javac]         int N = cm.columns();
    [javac]                   ^

    [javac] 4 errors

    BUILD FAILED 
```

这就是我的 ant 脚本的样子：

```
<?xml version="1.0"?> 
<project name="ClickRecommender" default="compile" basedir="."> 

     <property name="src" value="."/> 
     <property name="build" value="../build"/>
     <property name="jars" value="../libs/"/>

     <target name="init">  
          <mkdir dir="${build}"/>
     </target>

     <target name="baseclasses" depends="init"> 
          <!-- Compile the java code -->
          <javac includeantruntime="false" srcdir="${src}/visualization" destdir="${build}" classpath="${src}:${jars}*"/>
... 
```

这里出了什么问题？？？

# git - 有更快的 git status -uno 吗？

> ID：15907710
> 
> 赞同：2
> 
> 时间：2013-04-09T16:44:12.867
> 
> 标签：git

`git status -uno`导致它不显示未跟踪的文件。

但是它太慢了，不能在大型 repo 上放入 shell 提示符。有数 GB 的未跟踪文件，以及一些我想用 git 跟踪的选定文件（我正在处理的文件）。

我想避免 ~1s 暂停，`git status -uno`我知道如果我们能让 git 不用担心任何尚未添加的文件，这是可以做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:09:28.167

我还不能完全确定，但我认为我的前提是错误的。

基本上，当使用 oh-my-zsh 的 git lib 时会出现 1 秒的暂停，它倾向于在用于填充提示字段的 shell 函数中自动`git rev-parse`调用类似的东西。`git status --porcelain`

我认为，如果我通过所有这些调用并确保他们不会对未跟踪的文件进行任何解析，并且还将其合并，以便 shell 只真正查询 zsh 一次以获取其所有信息（而不是`git`多次调用以获取不同的数据集0 我应该能够让它运行得更快。

不过现在没有时间这样做，所以我还不能确定。

# jquery - JQuery .Load不加载css

> ID：15907711
> 
> 赞同：1
> 
> 时间：2013-04-09T16:44:15.280
> 
> 标签：jquery, html, ajax, load

我正在开始使用、、、AJAX 和 CSS 开发`PHP`网站[`jQuery EasyUI`](http://www.jeasyui.com/)。

在我第一次尝试使用 jeasyui 的标签时，一切都很好，因为所有内容都包含在主 html 中。

在这里你可以看到从 jQuery EasyUI 教程中提取的代码

```
<body>  
<h2>Nested Tabs</h2>  
<div class="demo-info">  
    <div class="demo-tip icon-tip"></div>  
    <div>The tab panel can contain sub tabs or other components.</div>  
</div>  
<div style="margin:10px 0;"></div>  
<div class="easyui-tabs" data-options="tools:'#tab-tools'" style="width:700px;height:250px">  
    <div title="Sub Tabs" style="padding:10px;">  
        <div class="easyui-tabs" data-options="fit:true,plain:true">  
            <div title="Title1" style="padding:10px;">Content 1</div>  
            <div title="Title2" style="padding:10px;">Content 2</div>  
            <div title="Title3" style="padding:10px;">Content 3</div>  
        </div>  
    </div> 
```

如您所见，一切正常，因为它都包含在同一个html中...

现在我试图把东西分成不同的文件，让一切更有条理......（在这里你可以看到 index.html）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css"  
    ref="http://www.jeasyui.com/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>  
<script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js">  
</script>
    <script type="text/javascript" src="http://www.jeasyui.com/easyui/datagrid-detailview.js"> 
</script>

    <script type="text/javascript" src="connections.js"></script>
    <script type="text/javascript" src="codigo.js"></script>   

    <script language="javascript">

    $(document).ready(function(){

       $("#linkajax").click(function(evento){

          evento.preventDefault();
          //$(document).getElementById('resultado').innerHTML='sales.html'; 

          $("#resultado").load("sales.html");

       });
    })
    </script>   
    </head>

<body >
<div id="main" class="easyui-tabs" style="border:0;width:auto;height:700px;">
    <div title="Tab 1" iconCls="icon-reload" closable="false" onClick="listTab1()" 
style="padding:10px;">
        Tab 1
                    <table id="tab1_table" style="width:900px;height:650px"></table>
    </div>
            <div id="resultado" title="Tickets" iconCls="icon-reload" closable="false" style="  
padding:10px;">
                <a href="#" id="linkajax">Click</a>

    </div>

</div>
</body>
</html> 
```

这里... sales.html

```
<link rel="stylesheet" type="text/css"   
href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
<html>
<head>
            <link rel="stylesheet" type="text/css"
href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="style.css">
            <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js">  
</script>  
<script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js">  
</script>
    <script type="text/javascript" src="http://www.jeasyui.com/easyui/datagrid-detailview.js">
</script>

</head>
<body >

    <div id="main2" class="easyui-tabs" style="border:0;width:auto;height:700px;">
    <div title="Tab 1" iconCls="icon-reload" closable="false" style="padding:10px;">
        Tab 1
    </div>
            <div title="Tickets" iconCls="icon-reload" closable="false" style=" padding:10px;">
                    Tab 2
    </div>

</div>

</body> 
```

这里..结果

[结果](https://www.dropbox.com/s/6lpgnzpodbqj54l/tab.png)

在这里您可以看到嵌套选项卡没有 css ！...

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:31:48.037

将 sales.html 重命名为 sales.php，然后像这样调用 jQuery。

```
<script language="javascript">

$(document).ready(function(){

   $("#linkajax").click(function(evento){

      evento.preventDefault();
      //$(document).getElementById('resultado').innerHTML='sales.html'; 

      $("#resultado").load("sales.php");

   });
})
</script> 
```

您还可以“回显”您在 sales.php 中的所有代码。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T14:13:33.270

我不确定我的经验是否有帮助，但是，我遇到了类似的问题并修复了它。

我使用easyui面板根据用户选择加载不同的内容。一开始我用

```
$('#panel').load('user_selection.html') 
```

加载不同的内容。但是内容显示没有easyui效果。

然后我改为

```
$('#panel').panel('refresh','user_selection.html') 
```

然后它工作正常。

希望这能有所帮助。

恕我直言，原因是easyui的panel->refresh函数可以触发一些easyui脚本来渲染新加载的内容，而jquery的load()函数不能。

# javascript - 将 Piwik 用于单页应用程序

> ID：15907719
> 
> 赞同：7
> 
> 时间：2013-04-09T16:44:39.530
> 
> 标签：javascript, analytics, single-page-application, matomo, fat-client

构建单页/胖客户端应用程序，我想知道使用[http://piwik.org/包含和跟踪的最佳实践是什么](http://piwik.org/)

我想以一种架构合理的方式使用 Piwik，并且将来可以用不同的库替换。

使用 Piwik 进行跟踪似乎有两个基本选项：

1.  用命令填充一个全局`_paq`数组，然后加载脚本（我不清楚如何记录未来的“页面”视图或更改变量）
2.  获取和使用`var myTracker = Piwik.getTracker()`

### `_paq`方法：

```
myApp.loadAnalytics = function() { /* dynamically insert piwik.php script */ }
myApp.track = function(pageName) {
  window._paq = window._paq || [];
  _paq.push(['setDocumentTitle', pageName]);
  _paq.push(["trackPageView"]);
}
myApp.loadAnalytics()

// Then, anywhere in the application, and as many times as I want (I hope :)
myApp.track('reports/eastWing') // Track a "page" change, lightbox event, or anything else 
```

### `.getTracker()`方法：

```
myApp.loadAnalytics = function() { /* dynamically insert piwik.php script */ }
myApp.track = function(pageName) {
  myApp.tracker = myApp.tracker || Piwik.getTracker('https://mysite.com', 1);
  myApp.tracker.trackPageView(pageName);
}
myApp.loadAnalytics()

// Then, anywhere in the application, and as many times as I want (I hope :)
myApp.track('reports/eastWing') // Track a "page" change, lightbox event, or anything else 
```

这些方法在功能上是否相同？对于单页应用程序，一个比另一个更受欢迎吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:11:54.560

使用 .getTracker 的完整解决方案如下所示： [https ://gist.github.com/SimplGy/5349360](https://gist.github.com/SimplGy/5349360)

仍然不确定使用`_paq`数组是否会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:07:43.420

要使用完全独立于您的应用程序的跟踪库（例如 piwik），您需要编写一个将函数代理到 Piwik 跟踪器的小类。稍后，如果您从 Piwik 更改为 XYZ，您可以简单地更新此代理类，而不是更新执行某些跟踪的多个文件。

异步代码对于您的应用来说是必须的（例如，调用任何 'track*' 方法都会发送请求）

# twitter - 从 twitter 中获取包含特定单词的所有推文

> ID：15907727
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:45:05.157
> 
> 标签：twitter, twitter-oauth, twitter4j

我使用了推特 api。我想为我的应用程序获取包含特定单词的推文。就像如果用户键入“iphone”，那么所有包含该关键字的推文都应该从 twitter 中获取。我该怎么做 ？我应该使用流 api 还是 REST api？请帮忙。询问的主要原因是 REST 只提供前 1500 条推文，但我需要更多。流媒体提供实时推文。所以我不知道该使用哪一个。或者有没有办法使用 REST 获得超过 1500 条推文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:32:09.760

Twitter API 支持通过查询`/search/tweets`端点进行搜索。

[参考文档](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

如果您担心遇到 API 限制，请通过 JSONP 进行调用，将调用卸载到您的客户端。

# event-handling - 从事件处理程序中引用对象

> ID：15907728
> 
> 赞同：0
> 
> 时间：2013-04-09T16:45:16.167
> 
> 标签：event-handling

我有一个表单，上面有一个名为 uid_txt 的文本框。这是一个登录表单。在表单的主要部分“公共登录”中，我输入了代码：

```
uid_txt.KeyDown += new KeyEventHandler(tb_KeyDown); 
```

当我在文本框中输入一些值并按 Enter 时，这似乎成功调用了以下代码：

```
static void tb_KeyDown(object sender, KeyEventArgs e)
{
        if (e.KeyCode == Keys.Enter)
        {
            //enter key is down
            //But I can seem to check the length of the textbox field for data
            if (uid_txt.length>0) //uid_txt is not accessible even though I marked it public.
             {
             Do some stuff here.
             }
} 
```

我不知道为什么我无法访问事件处理程序内的文本框字段。

谢谢您的帮助。

# jquery - 更新粘性 toastr 通知并以编程方式关闭

> ID：15907730
> 
> 赞同：1
> 
> 时间：2013-04-09T16:45:20.873
> 
> 标签：jquery, toastr

我想要一个持续的各种通知。我正在查询一堆记录，我希望它相当冗长。我想要的是弹出一个 toastr 通知，上面写着“正在检索 ( of ) 的详细信息”

然后，当它完成全部检索时，我希望通知淡出。

这会有多难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:23:34.523

嗯 .. 可能已经可以不更改代码。也许。您可以在 toast 继续时延长超时，并更新 toast 的内容。我现在不能尝试，但试一试。如果没有，我会在下周重新讨论这个问题。

# bash - 使用 gzip 压缩每个部分的智能拆分文件？

> ID：15907736
> 
> 赞同：1
> 
> 时间：2013-04-09T16:45:32.620
> 
> 标签：bash, awk, split, gzip

我有一个很长的数字文件。类似于这个 perl 程序的输出：

```
perl -le 'print int(rand() * 1000000) for 1..10' 
```

但更长 - 大约数百 GB。

我需要将此文件拆分为许多其他文件。出于测试目的，我们假设有 100 个文件，并且输出文件编号是通过将编号模块取为 100 来获取的。

使用普通文件，我可以简单地使用：

```
perl -le 'print int(rand() * 1000000) for 1..1000' | awk '{z=$1%100; print > z}' 
```

但是当我需要压缩拆分的部分时，我遇到了问题。通常，我可以：

```
... | awk '{z=$1%100; print | "gzip -c - > "z".txt.gz"}' 
```

但是，当 ulimit 配置为允许打开的文件少于“分区”数时，awk 会中断：

```
awk: (FILENAME=- FNR=30) fatal: can't open pipe `gzip -c - > 60.txt.gz' for output (Too many open files) 
```

这不会破坏正常的文件输出，因为 GNU awk 显然足够聪明，可以回收文件句柄。

您是否知道处理这种情况的任何方法（除了编写我自己的流拆分程序、实现缓冲和某种文件句柄池管理） - 即：拆分为多个文件，其中访问输出文件是随机，并即时压缩所有输出分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:35:58.407

我没有写它本身有问题，但由于附加信息与解决方案一起，我将在这里全部写下来。

所以 - 问题出在 Solaris 上。显然有一个限制，在 Solaris 上使用 stdio 的程序不能有超过 256 个打开的文件句柄？！

[这里](http://technopark02.blogspot.com/2007/05/sun-solaris-solution-to-32-bit-stdios.html)有详细描述。重要的一点是，在运行我的有问题的程序之前设置一个环境变量就足够了，问题就消失了：

```
export LD_PRELOAD_32=/usr/lib/extendedFILE.so.1 
```

# sqlite - Monotouch 和 SQLite

> ID：15907739
> 
> 赞同：0
> 
> 时间：2013-04-09T16:45:42.613
> 
> 标签：sqlite, xamarin.ios

我有一个 SQLite 数据库，现在我想将这个数据库包含到我的 monotouch 项目中，连接到这个数据库并选择这个表。但我可以找到任何教程来做到这一点。

我对创建数据库或创建新记录并不陌生。我只需要看表。

谁能解释我如何连接到我的 sqlite 数据库并进行选择。

提前致谢。

* * *

更新

```
using(var connection = new SqliteConnection ("Data Source=zurfers.sqlite"))
            {                       
                using (var cmd = connection.CreateCommand()) {
                    connection.Open ();
                    cmd.CommandText = "SELECT * FROM City";

                    using (var reader = cmd.ExecuteReader()) {

                        while (reader.Read()) {
                            wordCollection = (string[])reader ["Name"];
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:52:55.557

在您的 MonoTouch 项目中包含您的 DB 文件并将其标记为内容。

```
using(var connection = new SqliteConnection ("Data Source=MyDatabase.sqlite"))
{                       
  using (var cmd = connection.CreateCommand()) {
    connection.Open ();
    cmd.CommandText = "this is my query";

    using (var reader = cmd.ExecuteReader()) {

      while (reader.Read()) {
        code = (string)reader ["ColumnName"];
      }
    }
  }
} 
```

# ruby - 请帮我修复错误

> ID：15907742
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:45:50.973
> 
> 标签：ruby

我被困在数十亿美元。错误是： **预期**：“12.34567890亿” **得到：** “12.34亿”（使用==）

这是我的代码：

```
class Fixnum

def in_words
    less_than_13={0 => 'zero', 1 => 'one', 2 => 'two', 3 => 'three', 4 => 'four', 5 => 'five', 6 => 'six', 7=> 'seven', 8 => 'eight', 9 => 'nine', 10 => 'ten', 11 => 'eleven', 12 => 'twelve', 13 => 'thirteen'}
    tens={20 => 'twenty', 30 => 'thirty', 40 => 'forty', 50 => 'fifty', 60 => 'sixty', 70 => 'seventy', 80 => 'eighty', 90 => 'ninety'}
    case self 
    when 0..13
        return less_than_13[self]
    when 14, 16, 17, 19
        return teenify
    when 15
        return 'fifteen'
    when 18
        return 'eighteen'
    when 20, 30, 40, 50 , 60, 70, 80, 90
        return tens[self]
    when (20..99)
        # tens = (self / 10) * 10
        # tens = (77 / 10) * 10
        # tens = (7) * 10
        # tens = 70
        tens = (self / 10) * 10
        # ones = self - tens
        # ones = 77 - 70
        # ones = 7
        ones = self - tens
        return "#{tens.in_words} #{ones.in_words}"
    when (100..999)
        # 100
        hundreds = self / 100
        rest = self - (hundreds * 100)
        if rest > 0
            return "#{hundreds.in_words} hundred #{rest.in_words}"
        else
            return "#{hundreds.in_words} hundred"
        end

        when (999..99999)
        thousend = self / 1000
        rest = self - (thousend * 1000)
            if rest > 0
            return "#{thousend.in_words} thousand #{rest.in_words}"
            else
            return "#{thousend.in_words} thousand"
            end

        when (10000001..999999999)
        million = self / 1000000
        rest = self - (million * 1000000)
            if rest > 0
            return "#{million.in_words} million #{rest.in_words}"
            else
            return "#{million.in_words} million"
            end

        when (1234567890..999999999999)
        billion = self / 1000000000
        rest = self - (billion * 1000000000)
            if rest > 0
            return "#{billion.in_words} billion #{rest.in_words}"
            else
            return "#{billion.in_words} billion"
            end

    end

end
def teenify
    return (self - 10).in_words + 'teen'
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:59:48.630

你的数字范围有一些很大的差距。看看它们，看看数字 567,890 会落入哪一个。答：都没有。就此而言，1,000,000 或 1,000,000,000 也不会。它从 99,999 跳到 10,000,001，然后从 999,999,999 跳到 1,234,567,890。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:05:59.223

在你的范围内达到顶峰，他们似乎在 10,000 之后到处都是。我建议放权力，这样你就可以更容易地看到你期望的范围。例如百万范围是`(10000001..999999999)`并且应该是 `(10**6...10**9)`

# c# - 计算字符串的变化

> ID：15907745
> 
> 赞同：1
> 
> 时间：2013-04-09T16:45:58.607
> 
> 标签：c#, permutation, variations

我有一系列错误编码的 base36 值 - 这些是使用缺少“i”和“o”的字母字符串从整数编码的。现在需要将它们转换回整数（使用 c#）

由于翻转效应，存在多个排列。

“0”可以等于 0 或 34 “1”可以等于 1 或 35。

因此，例如，如果我有一个字符串“a110”，它有六个可能的值。

我很难弄清楚如何为此编写代码。我看过的所有示例都有一组元素的变体：例如。

字符[] = { a, b, c }

int[] = { 1, 2, 3 }

但是在我的情况下，也涉及条件，这让我很头疼。谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:56:04.667

您可以计算所有可能的输入字符串的列表。首先，将输入读入整数列表。现在，您知道其中每一个（如果它的值足够低）可能是两件事之一。因此，您可以创建一个枚举器，通过递归下降返回所有可能的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:04:25.260

我设法用下面的代码做到了。它实际上比我预期的要简单一些，因为我只有两个条件和两个选项。它使用递归并逐步遍历字符串中的每个字符。如果该字符是 0 或 1，则它会发散，并继续构建字符串。

它实际上会生成一些重复项，因此我必须添加一个条件，仅当它不存在时才将其添加到字符串列表中。如果其他人可以指出我稍微更好的逻辑，我将不胜感激

```
public string st = "101"; // hardcoded for now
public char[] cs;
public List<string> variations;

static void Main()
{
    cs = st.ToCharArray();
    variations = new List<string>();
    vary("",0);
}

static void vary(string m, int n)
{     
    for (int i = n; i < cs.Count(); i++)
    {
        if (cs[i] == '0' || cs[i] == '1')
        {
            // recurse
            combo(m + (cs[i] == '0' ? "0" : "1"), i + 1);
            combo(m + (cs[i] == '0' ? "Y" : "Z"), i + 1);
        }
        m += cs[i];
    }
    if(!variations.Contains(m))
        variations.Add(m);
} 
```

对于字符串“101”，我得到以下组合

```
101
10Z
1Y1
1YZ
Z01
Z0Z
ZY1
ZYZ 
```

# nlp - 有开源的自学词干分析器吗？

> ID：15907746
> 
> 赞同：1
> 
> 时间：2013-04-09T16:46:00.253
> 
> 标签：nlp, stemming, morphological-analysis, lemmatization

我需要实现某种词干分析器/词形还原器。我有一些不同形式的单词（几千个）。它不是形态词典，只是其中的一小部分。从文件中自动学习词干分析器是个好主意吗？有没有可以使用的开源实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T12:58:38.603

Nuve 是一个用于突厥语的 NLP 库。一旦准备好语言规则和数据，它就可以分析和生成任何突厥语的单词，如果不是任何粘着语言的话。您可以分叉它并为 azeri 准备新的正字法和形态学文件。

[https://github.com/hrzafer/nuve](https://github.com/hrzafer/nuve)

因为我是作者，我很乐意帮助你完成这个过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-29T21:52:55.703

阿塞拜疆语是一种粘着性语言，类似于土耳其语，这意味着单词经常有一系列后缀（例如，一个后缀表示复数，一个后缀表示宾格）。它还具有元音和谐，这意味着每个后缀都有几个变体，您可以根据根中的元音选择正确的变体。

我会做什么：

*   识别后缀列表。我会尝试两种无监督的方法（？也许试试[Linguistica](http://linguistica.uchicago.edu/index.html "语言学")？），并在谷歌上搜索后缀列表（这些通常只包含一个基本后缀，它会根据元音和谐而变化）。迭代地，您应该到达一些合理的列表。如果怀疑某事是否是后缀，我会把它扔进去。
*   使用列表从单词中去除后缀。

生成的词干分析器会很吵，但根据您的需要，它可能无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-22T06:22:22.923

你应该看看John Goldsmith 和他的团队（@UChicago）为此目的开发的[Linguistica 。](http://linguistica.uchicago.edu/linguistica.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:26:03.340

Are you talking about English? Then please see [English lemmatizer databases?](https://stackoverflow.com/questions/6308185/english-lemmatizer-databases). Considering the significant amount of exceptions, a machine-learning approach without a large dictionary does not seem promising.

# .net - 可以使这个事件变得干燥，重构指导

> ID：15907747
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:02.557
> 
> 标签：.net, refactoring

我有一个 3 个单选按钮来控制几个文本框的状态，我为所有 3 个按钮使用一个事件，但是控制文本框的部分似乎可以流线更...必须有更好的方法处理这个事件然后我有什么

```
Private Sub rdo_SkipBitLockerY_CheckedChanged(sender As RadioButton, e As EventArgs) Handles rdo_SkipBitLockerY.CheckedChanged, rdo_SkipBitLockerN.CheckedChanged, rdo_SkipBitLockerU.CheckedChanged
    Select Case sender.Name
        Case "rdo_SkipBitLockerY"
            txt_BDEDriveLetter.Enabled = True
            txt_BDEDriveSize.Enabled = True
            txt_BDEInstall.Enabled = True
            txt_BDEInstallSuppress.Enabled = True
            txt_BDERecoveryKey.Enabled = True
            txt_TPMOwnerPassword.Enabled = True
            txt_OSDBitLockerStartupKeyDrive.Enabled = True
            txt_OSDBitLockerWaitForEncryption.Enabled = True
            AttributeRDOTable("SkipBitLocker") = "YES"
        Case "rdo_SkipBitLockerN"
            txt_BDEDriveLetter.Enabled = False
            txt_BDEDriveSize.Enabled = False
            txt_BDEInstall.Enabled = False
            txt_BDEInstallSuppress.Enabled = False
            txt_BDERecoveryKey.Enabled = False
            txt_TPMOwnerPassword.Enabled = False
            txt_OSDBitLockerStartupKeyDrive.Enabled = False
            txt_OSDBitLockerWaitForEncryption.Enabled = False
            AttributeRDOTable("SkipBitLocker") = "NO"
        Case Else
            txt_BDEDriveLetter.Enabled = False
            txt_BDEDriveSize.Enabled = False
            txt_BDEInstall.Enabled = False
            txt_BDEInstallSuppress.Enabled = False
            txt_BDERecoveryKey.Enabled = False
            txt_TPMOwnerPassword.Enabled = False
            txt_OSDBitLockerStartupKeyDrive.Enabled = False
            txt_OSDBitLockerWaitForEncryption.Enabled = False
            AttributeRDOTable.Remove("SkipBitLocker")
    End Select 
```

我能做些什么来减少重复性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:57:02.967

抱歉，我不了解 .Net 平台，我只是尝试像在 Java 中那样做，可能你会发现它很有用。

*   您可以为您的参数使用一些默认值。假设您的默认值

> txt_BDEDriveLetter.Enabled
> 
> txt_BDEDriveSize.Enabled
> 
> txt_BDEInstall.Enabled
> 
> txt_BDEInstallSuppress.Enabled
> 
> txt_BDERecoveryKey.Enabled
> 
> txt_TPMOwnerPassword.Enabled
> 
> txt_OSDBitLockerStartupKeyDrive
> 
> txt_OSDBitLockerWaitForEncryption

是**假的**

*   每个案例操作应包含不超过 1-2 条语句。这就是为什么如果你想遵守这条规则，你应该只进行提取方法重构。

*   不要向方法发送比它需要知道的更多的信息。

您的方法不需要了解*发件人*对象。只需发送发件人对象的名称。

我将重构您的代码如下（对不起，我不知道.Net，我会尝试编写每个示例）：

```
Private Sub rdo_SkipBitLockerY_CheckedChanged(Name As String, e As EventArgs) Handles rdo_SkipBitLockerY.CheckedChanged, rdo_SkipBitLockerN.CheckedChanged, rdo_SkipBitLockerU.CheckedChanged
    Select Case Name
        Case "rdo_SkipBitLockerY"
            doRdoSkipBitLockerY();
        Case "rdo_SkipBitLockerN"
            doRdoSkipBitLockerN()
        Case Else
            doElse();
    End Select

Private void doRdoSkipBitLockerY()
    txt_BDEDriveLetter.Enabled = True
    txt_BDEDriveSize.Enabled = True
    txt_BDEInstall.Enabled = True
    txt_BDEInstallSuppress.Enabled = True
    txt_BDERecoveryKey.Enabled = True
    txt_TPMOwnerPassword.Enabled = True
    txt_OSDBitLockerStartupKeyDrive.Enabled = True
    txt_OSDBitLockerWaitForEncryption.Enabled = True
    AttributeRDOTable("SkipBitLocker") = "YES"
Private void doRdoSkipBitLockerN()
    AttributeRDOTable("SkipBitLocker") = "NO"
Private void doElse()
    AttributeRDOTable.Remove("SkipBitLocker"); 
```

* * *

如果我想让它成为 OOP 方式（在 Java 中），我会将所有 3 个案例提取为枚举成员，并将其作为参数发送给一个通用方法 setVariables()

```
enum MY_CASES{
private boolean txt_BDEDriveLetter;
private boolean txt_BDEDriveSize;
...
MY_CASES(boolean txt_BDEDriveLetter, boolean txt_BDEDriveSize , ..){
this.txt_BDEDriveLetter = txt_BDEDriveLetter;
this.txt_BDEDriveSize = txt_BDEDriveSize;
... 
}

CASE1(true, true, ...), CASE2(false, false, ...), CASE3(false, false, ...), ...
}

private Sub rdo_SkipBitLockerY_CheckedChanged(Name String, e EventArgs)
    setVariables(MY_CASES.valueOf(NAME));

private void setVariables(MY_CASES case){
    this.txt_BDEDriveLetter = case.getTxt_BDEDriveLetter;
    this.txt_BDEDriveSize   = case.getTxt_BDEDriveSize;
    ...
} 
```

此版本允许您添加其他案例，而无需重构您的 rdo_SkipBitLockerY_CheckedChanged 方法。

# grails - Grails 中的重音不敏感搜索 - 创建标准

> ID：15907750
> 
> 赞同：1
> 
> 时间：2013-04-09T16:46:08.977
> 
> 标签：grails, grails-orm, grails-2.0

有没有一种简单的方法可以在 Grails 中搜索不区分重音的方法？我有一个带有 ilike 的创建标准构建器（用于不区分大小写的搜索），但我需要不区分重音。就像 á ů ä ü 这样的字符中忽略重音。当用户提示 aua u 时，这些字符应该适合搜索。

谢谢，马特奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:01:07.533

解决方案是在数据库级别：

*   将数据库排序规则设置为`utf8_general_ci`完成这项工作。
*   collat​​ion的`_ci`后缀表示 CASE INSENSITIVE ，它实际上也对重音不敏感。

# sql - 插入和更新时的 ANSI SQL 触发器

> ID：15907751
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:17.337
> 
> 标签：sql, performance, triggers, sybase, ansi-sql

我正在寻找编写一个符合 ANSI 的 SQL 触发器，并且相信我已经完成了 90% 的工作，但缺少一些内容。我也对其性能有一些疑问/担忧（作为 SQL 语句和触发器）。

我有一张桌子叫**`widgets`**：

```
widgets
widget_id   |   widget_name   |   widget_type_id   |   widget_is_fizz
========================================================================
1               Apple               1                   0
2               Kiwi                2                   0
3               Pear                3                   1
...             ...                 ...                 ...
2634            Banana              28                  0 
```

我需要触发器在此表上发生 INSERT 或 UPDATE 时触发：

*   对于`widget_type_id`17 和`widget_is_fizz`1（真）的 INSERT；或者
*   对于更新（出于与上述相同的原因）

当在此表上插入或更新类型 ID 为 17 的“fizz 小部件”时，我想将其更改`widget_name`为“未知”。

到目前为止，我最好的尝试：

```
CREATE TRIGGER widget_name_trigger
    ON
        widgets
    FOR
        INSERT
    AS
        UPDATE
            widgets
        SET
            widget_name = 'UNKNOWN'
        WHERE
            widget_type_id = 17
            AND
            widget_is_fizz = 1 
```

仍然无法弄清楚如何让它对 UPDATE 执行与对 INSERT 相同的操作。也不确定它是否在语法上正确且符合 ANSI。

此外，在性能方面，有传言说我们的 DBA 讨厌触发器，当我在他面前进行代码审查时，可能会与之抗争。触发器本身就很昂贵吗？如果是这样，为什么，我可以在这里做些什么来减轻这种缓慢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:22:29.527

您可以对插入和更新使用相同的触发器。无需更新整个表，只需更新插入/更新的行。

```
CREATE TRIGGER widget_name_trigger
    ON
        widgets
    FOR
        INSERT, UPDATE
    AS
        UPDATE
            widgets
        SET
            widget_name = 'UNKNOWN'
        WHERE
            widget_type_id = 17
            AND
            widget_is_fizz = 1
            AND
            widget_id=inserted.widget_id 
```

在性能方面：只要您不引用其他表，开销就非常低。
来自 Sybase 手册：

> > 在性能方面，触发开销通常非常低。运行触发器所涉及的时间主要用于引用其他表，这些表可能在内存中或数据库设备上。
> > 删除和插入的触发器测试表始终在活动内存中。触发器引用的其他表的位置决定了操作所花费的时间。

# python - python日志记录和处理程序使用

> ID：15907752
> 
> 赞同：1
> 
> 时间：2013-04-09T16:46:19.790
> 
> 标签：python, logging

我试图了解 python 日志记录的工作方式。

我知道它是一个适用于整个正在运行的解释器的单例实例。

我有这个功能：

```
def setup_logging(options=None):
  '''setup the logger and return it'''
  logging.basicConfig(level=logging.WARNING,
                      format='%(levelname)s: %(message)s',
                      filename='/tmp/pluser.log')

  logger =  logging.getLogger('pluser')
  console = logging.StreamHandler()
  console.setLevel(logging.DEBUG)
  print(console.level)
  logger.addHandler(console)
  return logger 
```

我用这个调用：

```
 console = setup_logging(options)

  console.debug('Initializing database')
  connect_to_db()
  console.debug('Database initialized') 
```

（这是为在不同的地方进行更多的日志记录做准备。）

现在，“console”是一个“logging.Logger”实例。它有一个 StreamHandler。该流处理程序的级别为 10（即 logging.DEBUG）。但是，那个 StreamHandler 似乎没有收到消息，因为事情只会在 console.warning、error 或 critical 打印到控制台（上面应该有 stderr 和 stdout）。

因此，我显然遗漏了记录器与系统或 StreamHandler 交互的方式。

我的目标是当 StreamHandler 的级别是调试时，所有内容都打印到控制台，但我也想了解为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:59:54.037

好的，所以这里得到了回答：[记录 setLevel，它是如何工作的](https://stackoverflow.com/questions/6614078/logging-setlevel-how-it-works)

总而言之：您添加处理程序的记录器需要处于您的处理程序级别或更低级别，否则记录器会在消息传递给处理程序之前拒绝消息。

所以我要做的就是将我的 basicConfig 默认设置为 DEBUG，而不是 WARNING。如果我想添加另一个只处理 WARNING 及以上的处理程序，我会这样做，而不是让它保持默认。

# c# - C# ImageList 不会显示图像

> ID：15907754
> 
> 赞同：3
> 
> 时间：2013-04-09T16:46:22.310
> 
> 标签：c#, winforms

我一直在试图弄清楚为什么我的 imageList 在我的表单运行时不会渲染出我的图像，我正在使用以下代码......

```
public void renderImageList()
    {
        int selection = cboSelectedLeague.SelectedIndex;
        League whichLeague = (League)frmMainMenu.allLeagues[selection];

        string index = cboSelectedLeague.SelectedItem.ToString();

        if (whichLeague.getLeagueName() == index)
        {
            foreach (Team t in allTeams)
            {
                Image teamIcon = Image.FromFile(@"../logos/" + t.getTeamLogo());

                imgLstIcons.Images.Add(teamIcon);

            }

        }

        else
        {
            MessageBox.Show("Something went wrong..." + whichLeague.getLeagueName() + " " + index + ".");
        }

    } 
```

当用户更改组合框的索引时会触发该方法，我知道程序获得了正确的路径，因为我使用消息框来显示每个路径返回的路径，如我预期的那样。

我的代码中是否遗漏了一些东西来将图像绘制到盒子上？

亚历克斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:58:39.143

将所有图像添加到 ImageList 后，您还应该将所有项目添加到 ListView：

```
for (int j = 0; j < imgLstIcons.Images.Count; j++)
{
    ListViewItem item = new ListViewItem();
    item.ImageIndex = j;
    lstView.Items.Add(item);
} 
```

*来源*：[http ://social.msdn.microsoft.com/Forums/en-US/winforms/thread/876b6517-7306-44b0-88df-caebf3b1c10f/](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/876b6517-7306-44b0-88df-caebf3b1c10f/)

您还可以使用 FlowLayoutPanel 并动态创建 PictureBox 元素，每个 Image 一个，而根本不使用 ImageLists 和 ListViews。这取决于您想要的 UI 类型。

# javascript - 在 IE10 中使用 Frames 会导致 SCRIPT5002：函数预期错误

> ID：15907755
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:36.500
> 
> 标签：javascript, jquery, compatibility, internet-explorer-10

我一直在互联网上进行了大量搜索，但尚未找到解决此问题的方法。发生的事情是我有一个页面根据导航点击呈现在一个框架中。此功能在 IE10 之前的所有其他浏览器版本中有效并且已经有效多年，并且在兼容模式下继续完美运行，但我不想要兼容模式。基本上当我的函数到达这行代码时；

```
window.parent.frames(1).location='../frmsetPage.aspx?
sFrameScrolling=yes&pageurl=secCreating_Editing/secContent/wfContent.aspx?iPageID=' + 
p_iSitePageID + '&helpurl=secHelp/wfHelp.aspx?iBuilderPageID=29' 
```

我得到了错误；

SCRIPT5002：预期功能

在我所做的所有研究中，唯一有意义的是谈论 window.parents.frames(1) 对象的贬值，但我似乎无法通过微软的任何东西来验证这一点，所以我真的不知道.

任何帮助将不胜感激！非常感谢，尼克G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:57:23.640

尝试：

```
window.parent.frames[1].location='../frmsetPage.aspx?
sFrameScrolling=yes&pageurl=secCreating_Editing/secContent/wfContent.aspx?iPageID=' + 
p_iSitePageID + '&helpurl=secHelp/wfHelp.aspx?iBuilderPageID=29' 
```

代替：

```
window.parent.frames(1).location='../frmsetPage.aspx?
sFrameScrolling=yes&pageurl=secCreating_Editing/secContent/wfContent.aspx?iPageID=' + 
p_iSitePageID + '&helpurl=secHelp/wfHelp.aspx?iBuilderPageID=29' 
```

原因：`frames`集合像数组一样被访问，`[]`而不是`()`.

祝你好运！

# c++ - 正则表达式多行搜索模式

> ID：15907758
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:43.653
> 
> 标签：c++, regex, boost

我一直在努力寻找这个问题的答案。虽然我使用的是 C++ boost 正则表达式，但如果我只有一个工作表达式，我可以调整它（尽管我会很感激地接受一个特定于 boost 的线索）。

我有以下示例文本：

```
----
this is a sample line -> various chars
another sample line (again 'might have different chars]
etc., etc.
----
more data
again anything in here.
more lines of text -> etc
etc. etc.
----
maybe only one line 
```

后面的“----”是可选的。

我试过了：

```
^-{4}\s(.*\s)*?(-{4})+ 
```

和变化，但我只得到第 2 组中的最后一行，而我希望第 2 组中的 4 个“-”字符后面的所有行，除非它是以 4“-”字符开头的另一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:03:12.863

量化捕获组只捕获最后一个实例。使该组不被捕获，并将整个量化表达式包装到一个捕获组中。

```
^-{4}\s((?:.*\s)*?)(-{4})+
       ^ ^^       ^ 
```

另外，我不确定目的`(-{4})+`是什么。你可能是这个意思：

```
^-{4}\s((?:.*\s)*?)(?=-{4}|\s*$)
                   ^^^^^^^^^^^^^ 
```

这`(?= ... )`是一个前瞻断言。它断言紧跟在当前位置`-{4}`之后的是文本的 a 或结尾（在可能的空格之后）。

最后，你可能想做一个调整......

```
^-{4}\s+((?:.*\s+)*?)(?=-{4}|\s*$)
     ^          ^ 
```

...如果您的文本之间有空行。

# vb.net - 跨行添加单元格值并在另一个单元格中显示结果

> ID：15907760
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:49.830
> 
> 标签：vb.net

是否可以沿一行添加所有单元格值并将结果放在 Datagridview 或 listview 的另一列中？如果是，请问我该如何在 VB.net 中进行处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:47:42.503

这是相当直截了当的。如果总和列是最后一列，则代码：

```
 Dim sumRowIndex As Integer = DataGridView1.ColumnCount - 1
    Dim sum As Double = 0

    For Each row In DataGridView1.Rows
        For collumn = 0 To DataGridView1.ColumnCount - 2
            'check if cell value is a number
            If Double.TryParse(row.Cells(collumn).Value, Nothing) Then
                sum = sum + row.Cells(collumn).Value
            End If
        Next
        row.Cells(sumRowIndex).Value = sum
        sum = 0
    Next 
```

# javascript - Jquery粘性导航问题

> ID：15907761
> 
> 赞同：0
> 
> 时间：2013-04-09T16:46:51.630
> 
> 标签：javascript, jquery, css, ajax, jquery-plugins

我一直在努力解决问题，但似乎找不到一些帮助。

[http://fiddle.jshell.net/DQgkE/7/show/](http://fiddle.jshell.net/DQgkE/7/show/)

现在的体验有点跳跃和错误 - 但我想要的是

1) 当您向下滚动页面时。我希望 Sticky Nav 在页面上的特定位置（第 3 章）（禁用、丢弃、停止），并且用户应该能够继续向下滚动。

2）当用户向上滚动时，代码会将nav向后粘并向上携带，直到nav到达顶部的原始位置。

下面是一个起点。

3）目前有点这样做，但是向上滚动时会有一些巨大的跳跃

[http://imakewebthings.com/jquery-waypoints/#doc-disable](http://imakewebthings.com/jquery-waypoints/#doc-disable)

使用禁用、销毁、启用选项会很好。

这是清理的原始体验：http: [//fiddle.jshell.net/DQgkE/1/show/](http://fiddle.jshell.net/DQgkE/1/show/)

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:01:39.893

我不确定你使用的这个插件是如何工作的，但我有一个解决方案，我在不久前用 jquery 写过。它在顶部几乎没有变量，您想要粘性的项目，您希望它停止的项目，以及当它变得粘性时要添加的类和顶部和底部的填充。我只修改了这个 fork 中的 javascript 部分。

**编辑** 我继续并修复了原始代码。没有航点插件的解决方案在评论中。

结果如下：http: [//fiddle.jshell.net/Taks7/show/](http://fiddle.jshell.net/Taks7/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T21:27:30.470

我会推荐使用 jQuery（这是一个惊喜，对吧？！：P）

```
 $(document).ready(function() {        //when document is ready
      var topDist = $("nav").position();  //save the position of your navbar !Don't create that variable inside the scroll function!
      $(document).scroll(function () {    //every time users scrolls the page
        var scroll = $(this).scrollTop(); //get the distance of the current scroll from the top of the window
        if (scroll > topDist.top - *distance_nav_from_top*) { //user goes to the trigger position
          $('nav').css({position:"fixed", width: "100%", top:"*distance_nav_from_top*"}); //set the effect
          } else {                          //window is on top position, reaches trigger position from bottom-to-top scrolling
              $('nav').css({position:"static", width:"initial", top:"initial"}); //set them with the values you used before scrolling
          }
      });
    }); 
```

我真的希望我能帮上忙！

# c++ - 使用 C++ 时命令提示符中最快的文本渲染方法是什么

> ID：15907762
> 
> 赞同：-4
> 
> 时间：2013-04-09T16:47:03.143
> 
> 标签：c++, command-prompt, cout

ATM 我正在​​开发一款游戏，所以我正在寻找一种方法来在眨眼之间渲染整个字符区域。现在我遇到了渲染速度慢的问题（或者更确切地说是打印速度在这里具体，我知道 cout 一个缓慢的方法，但这就像我现在使用的第一个选项）

那么是否有某种方法可以足够快地显示文本，这样我就不会遇到字符闪烁或简单地一个接一个地绘制字符的问题，因为我正在使用循环来绘制它们。

任何建议都值得赞赏

编辑：即使每个人都对此表示反对，我认为这是一个体面的问题，对初学者很有用。我现在对如何解决这个问题有了一个实际的想法，而不是无休止地在互联网上搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:44:28.953

C++ 标准输入/输出库对于传统终端支持可以完成的操作非常有限。

摆脱这种情况的唯一方法是使用专门的库。正如我在评论中提到的那样，`ncurses`或者`pdcurses`应该足够了，具体取决于您所在的平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:43:30.390

只是一个快速的比较表明，`cout`在 Visual Studio 中比`printf`（显着的差异）慢很多 - 我将返回并编辑确切的差异有多大。

显然，用于 UI 操作的库可能要好得多，因为它能够移动光标，并且只重绘实际更改的屏幕部分等。

编辑：我使用以下代码来测量两种输出方法的速度：

```
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <ctime>

int main(int argc, char **)
{
    clock_t t = clock();
    for(int i = 0; i < 40; i++)
    {
        if (argc == 1)
        {
            std::cout << "0123456789012345678901234567890123456789012345678901234567890123456789\n";
        }
        else
        {
            printf("0123456789012345678901234567890123456789012345678901234567890123456789\n");
        }
    }
    std::cout.flush();
    t = clock()-t;
    std::cout << "Time = " << std::setprecision(3) << t / (double)CLOCKS_PER_SEC;
    return 0;
} 
```

`printf`在我的机器上，使用（'mytest x'）大约需要 0.1 秒（0.098-0.113 秒），使用（'mytest'）大约需要 0.8 秒（0.776-0.860 `cout`）。

# c# - 为什么我的类型转换器不工作

> ID：15907767
> 
> 赞同：0
> 
> 时间：2013-04-09T16:47:19.247
> 
> 标签：c#, wpf, xaml, type-conversion

在这里扯我的头发！我有这个类型转换器：

```
class CouponBarcodeToVisibilityConverterColumn : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (DesignerProperties.IsInDesignMode)
        {
            if ((string)parameter == "123456")
            {
                return Visibility.Visible;
            }
            return Visibility.Hidden;
        }

        if (value == null)
        {
            return Visibility.Visible;
        }

        var barcodesWanted = ((string)parameter).Split(System.Convert.ToChar("_"));
        var actualBarcode = (string)value;

        return barcodesWanted.Any(barcodeWanted => barcodeWanted == actualBarcode) ? Visibility.Visible : Visibility.Hidden;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }
} 
```

我有一个带有以下资源部分的用户控件：

```
<UserControl.Resources>
        <converters:CouponBarcodeToVisibilityConverterColumn x:Key="CouponBarcodeToVisibilityConverter1"/>
</UserControl.Resources> 
```

我有一个名为 Bet 的模型，它看起来像这样：

```
public class Bet : INotifyPropertyChanged
{
    //Lots of other stuff

    private string _barcode;

    public string Barcode
    {
        get { return _barcode; }
        set
        {
            if (value == _barcode) return;
            _barcode = value;
            OnPropertyChanged("Barcode");
        }
    }

    //Lots of other stuff
} 
```

在作为我的用户控件的 DataContext 的 ViewModel 中，我有一个可观察的 Bet 集合。回到我的用户控件，我有一个堆栈面板，它的数据上下文是前面提到的 Observable Collection。

在堆栈面板中，我有一个 DataGrid，ItemsSource 属性只是**{Binding}**，将绑定推迟到树上。

在我的 DataGrid 中，我有这个专栏：

```
<DataGridCheckBoxColumn x:Name="IsEwColumn" Binding="{Binding Wagers[0].IsEw,UpdateSourceTrigger=PropertyChanged}" Header="Each Way" Visibility="{Binding Path=Barcode, Converter={StaticResource CouponBarcodeToVisibilityConverter1}, ConverterParameter=123456}" Width="Auto"/> 
```

绑定的另一个元素完美地工作（只要它应该是勾选复选框），但我的类型转换器不是。断点甚至没有被击中。**Bet**中的 Barcode 属性绝对等于 123456。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:12:35.683

您在这里拥有的是数据网格项目源的投注列表。如果你考虑一下

当通过类型转换器传递时，Bet1 可以评估为可见。当通过类型转换器传递时，Bet2 可以评估为可见。当通过类型转换器传递时，Bet3 可以评估为折叠。

数据列如何同时可见和折叠。

你不能像这样绑定到可见性，除非你在列表中有一个整体变量或者它可以绑定到的东西。

# jquery - 无法读取未定义的属性“顶部”

> ID：15907770
> 
> 赞同：12
> 
> 时间：2013-04-09T16:47:23.830
> 
> 标签：jquery, scroll

试图让页面滚动到一个锚点，我收到了这个错误。

无法读取未定义的属性“顶部”

现在我有我的JS，如下所示......

```
//scroll to section process page
function scrollToAnchor(aid){
    var aTag = $("div[name='"+ aid +"']");
    $('html,body').animate({scrollTop: aTag.offset().top},'slow');
}

$("li.menu-item-141 a").click(function() {
   scrollToAnchor('#philosophy-page');
}); 
```

这是我的HTML...

```
<div class="container">
<div name="philosophy-page" id="philosophy-page">
    <div class="philosophy-heading">
        <h1>Philosophy</h1>
    </div><!-- /.philosophy-heading -->
</div><!-- /#philosophy-page -->
</div><!-- /.container --> 
```

任何帮助都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:48:40.907

代替

```
scrollToAnchor('#philosophy-page'); 
```

经过

```
scrollToAnchor('philosophy-page'); 
```

请记住，您使用`name`来查找`a`元素：

```
var aTag = $("div[name='"+ aid +"']"); 
```

jQuery 找不到名为的元素`#philosophy-page`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-18T10:59:00.150

```
$(function() {
  $('a[href*="#"]:not([href="#"])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
}); 
```

我找到的最好的滚动条。在 CSS 技巧上找到它： [https ://css-tricks.com/snippets/jquery/smooth-scrolling/](https://css-tricks.com/snippets/jquery/smooth-scrolling/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:48:36.107

传递没有`#`名称的 id 不在`#`其中。

*改变*

```
 scrollToAnchor('#philosophy-page'); 
```

*到*

```
 scrollToAnchor('philosophy-page'); 
```

# android - 滚动视图，顶部有不滚动的广告

> ID：15907773
> 
> 赞同：0
> 
> 时间：2013-04-09T16:47:30.643
> 
> 标签：android, xml, layout, scrollview, admob

我收到一条错误消息，说 Scrollview 只能托管一个孩子。我想要做的是让整个界面滚动减去顶部的广告。所以就目前而言，我已经让广告以线性布局显示，其中包含滚动视图。滚动视图内部是另一个线性布局，其他所有内容都在该布局内。我不知道该怎么做。我真的需要广告不滚动，但如果我必须将广告代码放在滚动视图中，我会的。我很确定有一种方法可以做我想做的事，尽管我找不到。

这是我的xml布局...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/AdLinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Ad Placeholder -->

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a15138b1a7adad2"
    ads:loadAdOnCreate="true" />

<ScrollView
    android:id="@+id/BaseScrollView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/baseVerticalLinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/LinearLayoutH1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Sad" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Happy" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/happinessBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Tired" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Awake" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/energyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Calm" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Anxious" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/anxietyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView7"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/No_Pain" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Max_Pain" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/painBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <DatePicker
            android:id="@+id/datePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TimePicker
            android:id="@+id/timePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <EditText
            android:id="@+id/noteTextFieldID"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/Note_Hint"
            android:inputType="textMultiLine"
            android:maxLength="@integer/NoteLimit" />

        <Button
            android:id="@+id/enterButtonID"
            android:layout_width="132dp"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:onClick="dialogPop"
            android:text="@string/EnterButtonText" />
    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:50:57.743

[这是来自 AdMob 的广告目录](https://code.google.com/p/google-mobile-dev/source/browse/adcatalog/res/layout/scrollviewexample.xml?repo=ad-catalog-android)项目的示例 ScrollView 布局的略微修改版本：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        ads:adUnitId="@string/admob_id"
        ads:adSize="BANNER"/>
    <ScrollView android:id="@+id/scrollLayout"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_below="@id/adView">
        <LinearLayout android:layout_height="fill_parent"
            android:layout_width="fill_parent">
            <TextView android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:text="@string/advancedLayouts_scroll_view_lorem_ipsum"/>
        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

您不希望广告位于您的上方`ScrollView`，因此您想明确告诉它位于下方`com.google.ads.AdView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:22:19.527

这对我来说非常有用，如果需要更多帮助，请告诉我。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxxx" />

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/scrollView"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="@drawable/back3" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="center_horizontal"
                android:orientation="vertical" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top|center_horizontal"
                    android:layout_marginTop="5dp"
                    android:text="Text" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|center_horizontal"
                    android:layout_marginBottom="20dp"
                    android:text="Text2" />
            </LinearLayout>
        </ScrollView>
    </RelativeLayout>

</LinearLayout> 
```

# javascript - 我可以在 mustache.js 模板中调用全局函数吗？

> ID：15907776
> 
> 赞同：2
> 
> 时间：2013-04-09T16:47:41.700
> 
> 标签：javascript, templates, mustache

```
 <script>
        function fun() {
          console.log("fun was called");
          return "fun result";
        }
    </script>

    <script id="template" type="text/template">            
         test: {{window.fun()}}            
    </script> 
```

在这个例子中， fun() 永远不会被调用。是否可以调用**全局**函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T09:47:23.933

Handlebars.js 是解决方案。

# awk - 如何使用 awk 追加数据列

> ID：15907777
> 
> 赞同：2
> 
> 时间：2013-04-09T16:47:47.810
> 
> 标签：awk

我有一个这种格式的文件：-

```
1   2   3   4
5   6   7   8
9   10  11  12 
```

我需要帮助才能在这样的循环中附加列

```
1
5
9

2
6
10

... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:53:35.987

此行应与动态行和列一起使用

```
 awk '{for(i=1;i<=NF;i++)a[NR][i]=$i}END{for(i=1;i<=NF;i++){for(j=1;j<=NR;j++)print a[j][i]; print ""}}' file 
```

这种格式看起来更好：

```
awk '{for(i=1;i<=NF;i++)a[NR][i]=$i}
    END{
            for(i=1;i<=NF;i++){
                for(j=1;j<=NR;j++)
                    print a[j][i]
                print ""
            }
        }' file 
```

用你的例子：

```
kent$  awk '{for(i=1;i<=NF;i++)a[NR][i]=$i}END{for(i=1;i<=NF;i++){for(j=1;j<=NR;j++)print a[j][i]; print ""}}' file
1
5
9

2
6
10

3
7
11

4
8
12 
```

# ruby - 红宝石，宝石 - 开始

> ID：15907780
> 
> 赞同：0
> 
> 时间：2013-04-09T16:47:55.490
> 
> 标签：ruby, rubygems

我刚刚开始学习 ruby​​ 。在我以前使用 Perl 和 C 工作时，我对 ruby​​ 中的一些事情感到非常困惑。

1) 如何添加像“Mechanize”这样的外部库来与你的脚本一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:01:28.013

Ruby 实际上已经标准化了使用[捆绑](http://gembundler.com/)程序来管理依赖项。对于您创建的任何项目`Gemfile`，大致如下：

```
source 'https://rubygems.org/'

gem 'mechanize' 
```

然后您将运行`bundle install`以确保您的 gem 已正确加载。

在您的应用程序中，您将拥有：

```
require 'rubygems'
require 'bundler/setup'

require 'mechanize'

# ... 
```

如果您想构建自己的 gem，最好的办法是[阅读文档](http://docs.rubygems.org/read/chapter/5)并查看其他 gem 的源代码，看看他们是如何做到的。每个 gem 都必须遵循某些约定才能正常工作，但是如果您查看其中的多个，这些约定是非常明显的。

你甚至可以使用 bundler 来帮助[构建一个](http://asciicasts.com/episodes/245-new-gem-with-bundler)可以大大简化过程的新 gem。

# asp.net - 使用什么控件来显示数据库中的一行

> ID：15907781
> 
> 赞同：0
> 
> 时间：2013-04-09T16:47:56.250
> 
> 标签：asp.net

我有这样的东西

```
select  sum(value) from database.table 
```

这将只显示一个数字，例如：6546.00 我应该使用什么来将所选数据显示到我不想使用 DatagridView 的 .aspx 页面的最佳控件是什么。我想：`label , textbox(onlyRead) , ListVIew`还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:55:08.423

*   如果您**只想显示**信息，那么只需使用`Label`

*   如果您想**编辑和更新**信息，那么只需使用..`Text
    box`

*   如果您有**多个信息**要显示，那么只需使用`Listview`..

*选择取决于您的需要..*

但是对于在屏幕上显示单个值`Label`是最好的

# javascript - HTML 这份声明

> ID：15907786
> 
> 赞同：0
> 
> 时间：2013-04-09T16:48:05.203
> 
> 标签：javascript, html

```
<head>
<script>
function copyText(str1, str2){
    document.getElementById(str2).innerHTML = document.getElementById(str1).innerHTML
}
</script>
</head>
<body id="main">
    <H2 id="text1">Hello World</H2>
    <H2 id="text2" >No change so far</H2>
    <button onclick="copyText(document.main.text1.id, document.main.text2.id)">Change</button>
</body> 
```

我希望能够将元素 ID 作为参数传递给 javascript 函数。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:57:16.323

通过 ID 获取元素的不错的跨浏览器方法是`document.getElementById()`您已经知道的功能。所以而不是这个：

```
document.main 
```

... 你应该做这个：

```
document.getElementById("main") 
```

... 等等。但当然你在做一些多余的事情：通过 ID 获取元素以获取其 ID。这就像拨打电话询问接收者的电话号码。所有你需要的是：

```
copyText('text1', 'text2') 
```

ID 只是字符串。

# c++ - 如何在 solaris 中使用 mkdtemp

> ID：15907790
> 
> 赞同：0
> 
> 时间：2013-04-09T16:48:23.647
> 
> 标签：c++, qt5, std, solaris

我目前正在尝试为 Solaris 构建第 3 方项目（qt 5.0.1），目前遇到以下错误：

```
io/qtemporarydir.cpp: In member function 'void QTemporaryDirPrivate::create(const QString&)':
io/qtemporarydir.cpp:150:30: error: 'mkdtemp' was not declared in this scope
gmake[3]: *** [.obj/release-shared/qtemporarydir.o] Error 1 
```

根据我的发现，mkdtemp 应该在 /usr/include 中的 stdlib.h 中找到。但是，在我的 solaris 系统上查看 stdlib.h 时，它没有定义 mkdtemp 方法。

有谁知道这个的解决方法？（或者我如何为 Solaris 编译 Qt ......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:07:20.733

从那以后，我发现 Qt 源代码中有一个附加函数，它取代了 mkdtemp 用于没有自己定义它的系统。然而，它被包裹在一个不考虑 Solaris 构建的 #ifdef 语句中。取消注释 #ifdef 包装器修复了该构建

# regex - 访问阅读备忘录字段

> ID：15907793
> 
> 赞同：1
> 
> 时间：2013-04-09T16:48:38.220
> 
> 标签：regex, ms-access

我有一个访问数据库，其中有一个带有备注字段的表。已以这种格式插入字段。

4 月 2 日 - 一些文字
2 月 20 日 - 一些文字

我想颠倒插入的顺序，所以上面是：

2 月 20 日 - 一些文字
4 月 2 日 - 一些文字

我正在考虑使用正则表达式逐行阅读，任何人都有更好的途径来实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:17:20.177

您的备注字段包含 2 行文本，您想颠倒它们的顺序。您可以使用不需要正则表达式的简单 VBA 过程来做到这一点。

这是一个示例即时窗口会话，它演示了您可以在 VBA 过程中使用的技术。

```
MyText = "Apr 02 - some text" & vbcrlf & "Feb 20 - some text"
? MyText
Apr 02 - some text
Feb 20 - some text
? Split(MyText, vbcrlf)(1)
Feb 20 - some text
? Split(MyText, vbcrlf)(0)
Apr 02 - some text 
```

如果备注字段可以包含两行以上的文本，您可以加载一个包含结果的数组`Split()`，然后以相反的顺序循环遍历该数组。

# node.js - 如何在不同的 casperjs 进程之间持久化 cookie

> ID：15907800
> 
> 赞同：28
> 
> 时间：2013-04-09T16:48:46.893
> 
> 标签：node.js, session, cookies, phantomjs, casperjs

这是一个关于如何将 cookie 从一个 casperjs 页面持久保存到另一个页面的问题。

所以基本上我得到了一个 nodejs 文件，它生成 casperjs 作为工作人员来执行某些任务。一个是登录，一旦登录，我将 cookie 存储在一个文件中。

当我产生下一个 casper worker 时..我希望它使用 cookie 而不必再次登录..这两种方法都**失败了**：

**首先：**当我生成worker capserjs时，我添加了--cookies-file=./cookiefilename ie `var child = spawn('casperjs',['scrape.js','--cookies-file=./'+cookieFileName]);`

**第二：**在casperjs工作文件中..我让它从一个文件中读取并设置cookie，即

```
var casper = require('casper').create();
var cookieFileName = 'monsterCookie.txt';

// grab cookies from file 
var fs = require('fs');
var utils = require('utils');
var cookies = fs.read(cookieFileName);

casper.page.setCookies(cookies); 

casper.start('domain/page.html', function() {
    //FAIL! cookies aren't used here
    this.debugHTML();
});

casper.run(); 
```

**笔记：**

1.  前面[提到](https://github.com/n1k0/casperjs/issues/39)从页面中`start`删除cookie？如果是这样，我该如何防止？

2.  我知道会话在同一个 phantomjs 页面对象中持续存在（参见此处[https://gist.github.com/abbood/5347252](https://gist.github.com/abbood/5347252)），并且在同一个 casperjs 页面对象中发生同样的情况（参见此处[https://gist.github.com/阿布德/5347287](https://gist.github.com/abbood/5347287) )
3.  请记住，我将 cookie 按原样存储在文件中（即根本没有任何 json/cookie 解析）.. 所以我的 cookie 文件看起来完全像这样

> 路径=/\0\0\0\xc4\x41\x43OOKIE=C8ctADE3OC4xMzUuMTQ3LjM5LTI4NzQ5NzQ0LjMwMjkxMjYxAAAAAAAAAAAAAAAAmyoBAMo+ZFHhPWRRAQAAAAJWAADKPmRR4T1kUQAAAAAA-; 到期=格林威治标准时间 2015 年 4 月 9 日星期四 16:16:10；域=statse.domain.com；路径=/\0\0\0Yv1st=CE061E87215F2D73；到期=格林威治标准时间 2020 年 2 月 19 日星期三 14:28:00；域=.domain.com；路径=/\0\0\0\x84\x43OOKIE_ID=178.135.147.39-2368749744.30291261；过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:11；域=cookie.domain.com；路径=/DCS000065_7K5I\0\0\0\xbe\x41\x43OOKIE=C8ctADE3OC4xMzUuMTQ3LjM5LTIzNjg3NDk3NDQuMzAyOTEyNjEAAAAAAAABAAAAQQAAAM0+ZFHNPmRAQAAAAAEAAADNPmRRzT5kUQAAAAAA-; 过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:13；域=cookie.domain.com；路径=/)" 到期=格林威治标准时间 2020 年 2 月 19 日星期三 14:28:00；域=.domain.com；路径=/\0\0\0\x84\x43OOKIE_ID=178.135.147.39-2368749744.30291261；过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:11；域=cookie.domain.com；路径=/DCS000065_7K5I\0\0\0\xbe\x41\x43OOKIE=C8ctADE3OC4xMzUuMTQ3LjM5LTIzNjg3NDk3NDQuMzAyOTEyNjEAAAAAAAABAAAAQQAAAM0+ZFHNPmRAQAAAAAEAAADNPmRRzT5kUQAAAAAA-; 过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:13；域=cookie.domain.com；路径=/)" 到期=格林威治标准时间 2020 年 2 月 19 日星期三 14:28:00；域=.domain.com；路径=/\0\0\0\x84\x43OOKIE_ID=178.135.147.39-2368749744.30291261；过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:11；域=cookie.domain.com；路径=/DCS000065_7K5I\0\0\0\xbe\x41\x43OOKIE=C8ctADE3OC4xMzUuMTQ3LjM5LTIzNjg3NDk3NDQuMzAyOTEyNjEAAAAAAAABAAAAQQAAAM0+ZFHNPmRAQAAAAAEAAADNPmRRzT5kUQAAAAAA-; 过期=格林威治标准时间 2023 年 4 月 7 日星期五 16:16:13；域=cookie.domain.com；路径=/)"

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-06-06T05:20:19.233

**保存 cookie：**

```
var fs = require('fs');
var cookies = JSON.stringify(phantom.cookies);
fs.write(cookieFilename, cookies, 644); 
```

**恢复 cookie：**

```
var fs = require('fs');
var data = fs.read(cookieFilename);
phantom.cookies = JSON.parse(data); 
```

`phantom`是 PhantomJS 中的全局变量。您可以在[wiki中获得更多信息](http://phantomjs.org/api/phantom/property/cookies.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-17T23:07:54.887

@imos 很好的答案！它只是帮助了我，我希望我可以添加更多。

您还可以使用以下方法将单个 cookie 添加到页面：

```
var fs = require('fs')
var data = fs.read(file)
var cookies = JSON.parse(data)

for(var i = 0; i < cookies.length; i++) {
    phantom.addCookie(cookies[i]);
} 
```

如果有多个 cookie 文件，这可能会有所帮助。

# html - 我的 html 中的按钮看起来很奇怪

> ID：15907804
> 
> 赞同：-2
> 
> 时间：2013-04-09T16:49:06.637
> 
> 标签：html, button, tags

![在此处输入图像描述](https://i.stack.imgur.com/zcfiq.png)

为什么按钮名称出现在它的左侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:02:16.470

尝试这个，

```
<input type="button" value="Query"  onclick="query()"/> 
```

代替标签，因为不同的浏览器对元素使用不同的默认类型。

如果您在 HTML 表单中使用该元素，不同的浏览器可能会提交不同的值。用于在 HTML 表单中创建按钮。

# linux - linux RSS 来自 ps RES 来自 TOP

> ID：15907807
> 
> 赞同：9
> 
> 时间：2013-04-09T16:49:17.267
> 
> 标签：linux, memory, command, redhat, ps

Linux：红帽/Fedora

这些内存值有什么区别：

*   来自顶级命令的 RES
*   来自 ps 命令的 RSS

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T12:02:10.810

如果您在谈论`RES`列 in`top -p $(pidof process)`和命令中的`RSS`列之间的区别，**则没有区别**，因为这两个工具都从文件中获取此值。`ps aux | grep $(pidof process)`**`/proc/$(pidof process)/stat`**

 **您总是可以 cat`/proc/$(pidof process)/status`寻找人类可读的格式。**

# scala - 示例使用 scalaz.Lens 的 modf、modp 和 xmap

> ID：15907808
> 
> 赞同：7
> 
> 时间：2013-04-09T16:49:25.023
> 
> 标签：scala, haskell, functional-programming, functor, scalaz

那里有许多很棒的教程和帖子，涵盖了 Lens 更直接的方法，例如[更新嵌套结构的更清洁方法](https://stackoverflow.com/questions/3900307/cleaner-way-to-update-nested-structures)；任何人都可以提供这三种其他方法的示例用途吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:44:35.433

不幸的是，Scalaz7 镜头示例是 WIP。您需要向[Scalaz Google Group](https://groups.google.com/forum/?fromgroups#!forum/scalaz)提出这个问题。在您提问之前，请在此处尝试这些示例并观看 Emmett 的视频。

*   [在 Scalaz 7 中使用镜头](http://www.monadzoo.com/blog/2012/11/18/using-lenses-with-scalaz-7/)
*   [Emmett 在镜头上的视频](https://www.youtube.com/watch?v=efv0SQNde5Q&feature=relmfu)

再次查看源代码。你能从中解出什么？

```
 def xmapbA[X, A >: A2 <: A1](b: Bijection[A, X]): LensFamily[X, X, B1, B2] =
    xmapA(b to _)(b from _)

  def xmapB[X1, X2](f: B1 => X1)(g: X2 => B2): LensFamily[A1, A2, X1, X2] =
    lensFamily(a => run(a).xmap(f)(g))

  def xmapbB[X, B >: B1 <: B2](b: Bijection[B, X]): LensFamily[A1, A2, X, X] =
    xmapB(b to _)(b from _)

  /** Modify the value viewed through the lens, returning a functor `X` full of results. */
  def modf[X[+_]](f: B1 => X[B2], a: A1)(implicit XF: Functor[X]): X[A2] = {
    val c = run(a)
    XF.map(f(c.pos))(c put _)
  } 
```

抱歉，帮助很小。我可以指出要问谁以及在你问之前你需要知道什么。

# c# - 关闭表单时可能导致 NRE 的原因是什么？

> ID：15907809
> 
> 赞同：1
> 
> 时间：2013-04-09T16:49:25.090
> 
> 标签：c#, compact-framework, windows-ce, nullreferenceexception, .net-1.0

在某些情况下，当使用其关闭按钮关闭表单时，我会得到一个 NRE，该按钮仅调用本机 (WinForms) Close() 方法。

通过代码的某些路径可以正常工作，但一个特定路径会导致空引用异常。由于名义上这是一个引用了 null 的东西的场景，所以当表单只是被关闭时怎么会发生这种情况呢？我可以想象可能存在内存泄漏，但是我不理解引用了 null 的东西。

代码中可能存在哪些潜在原因？

## 更新

对乔恩斯基特的回答：

由于无聊和费力的原因（再次），我无法以正常方式调试它，但我能做的是：

```
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
    MessageBox.Show(ex.InnerException.ToString());
    SSCS.ExceptionHandler(ex, "frmEntry.saveDSD");
} 
```

最后一种是内部/自定义异常处理方法。

我从这些行中得到的只是：

```
"Null Reference Exception"
Nothing (empty string)
"Exception: NullReferenceException Location: frmEntry.btnSave.click 
```

请注意，现在显示的最后一个异常暗示 btnSave.click 是罪魁祸首，而它以前将矛头指向 saveDSD。越来越好奇。这是霍桑效应* 的一个案例吗（嗯，修改后的霍桑效应，从某种意义上说，添加此调试代码可能会改变一些事情）。

*   典型的霍桑效应更像是这样的场景：一群猫在打篮球。一些女孩走上前来观看。猫开始炫耀和热狗，其中一只摔断了腿。是女生的错吗？不。如果他们没有观看，会发生这种情况吗？不。

## 更新 2

谈谈霍桑效应：当我将两个 MessageBox.Show() 调用复制到 frmEntry.btnSave.click 的 catch 块时，我得到：

```
"Null Reference Exception"
"Null Reference Exception"
"Exception: NullReferenceException Location: frmEntry.Closing" 
```

IOW，当 [h,sh]e 遇到两辆相反方向的汽车时，NRE 的位置一直在移动，就像乡村道路上的松鼠一样。

## 更新 3

它又发生了一次：将那些 MessageBox.Show() 添加到表单的 Closing 事件中会导致 NRE 从另一个洞中弹出并声明自己。这个近交代码正在通过分数产生（或克隆）半智障，或者看起来如此。

## 更新 4

如果编写糟糕的代码是一种犯罪行为，那么编写这些东西的猫应该被单独监禁在 SuperMax 中。

这是最新的令人震惊的头条新闻/咆哮者：

```
int cancelled = ListRecords.cancelled;
if (cancelled == 0)
. . . 
```

ListRecords 的公共“已取消”成员（在另一个类中）只分配了 0 和 1 的值。因此，取消不仅*听起来*像一个布尔值，它也像一个布尔值。为什么它没有被*声明*为布尔值？！？！？

这个代码库的官方形象应该是 Edvard Munch 的《呐喊》

## 更新 5

也许我是在发泄，但最近的经历使我为某些类型的代码想出了一个新名称，并为许多项目提供了一个插图。不会去任何地方，但只是占用空间的代码（进行了分配，但随后不采取行动，或调用空方法/处理程序）我现在称之为“温彻斯特神秘屋代码”。

而对于典型的项目（我现在已经是许多项目的“被俘”员工和承包商，拥有近 20 年的编程经验），我现在将这种情况比作一群人在流沙中打滚。当他们雇用新人“上船”时，他们真的希望他们与他们一起跳入流沙。这对事情有什么帮助？这只是“苦爱相伴”的案例吗？他们应该做的是说“给我们一根绳子！” 不是“进来吧，流沙没事！”

很多时候，它可能只是熵和“工作保障”在起作用；如果他们继续与他们选择或创造的怪物搏斗，那么他们来之不易的知识如何或多或少地让野兽远离，这将使他们保持半舒适的工作。如果他们做出任何根本性的改变（大多数团队*都会*需要做出一些根本性的改进，IMO），这可能会危及他们的就业状况。也许答案是雇用/签约“过渡团队”，将团队/公司从史前恐龙俱乐部时代转移到 21 世纪，培训“老守卫”，以便他们能够保住工作。毕竟，无论如何，这些“救世主”都不足以抢走老手的工作——训练他们，让他们加快速度，然后继续前进。所有人都会受益。但许多人似乎更愿意继续在泥潭或流沙中打滚。

在任何人雇用程序员之前，他们至少应该给他们一个测试，通过测试将证明他们至少熟悉史蒂夫麦康奈尔的“代码完成”中描述的基本原则。

好吧，回到与流沙的战斗……

## 更新 6

或者：“重构 Spo-dee-o-dee”：

重构的“陷阱”是如果您更改变量的名称，例如：

```
ChangeListType chgLst; // ChangeListType is an enum 
```

...对此：

```
ChangeListType changeListType; 
```

...如果有一个包含名为“chgLst”的列的数据表，SQL 语句也可能会被更改，如果不是你的一天，这可能会毁掉至少一部分。

另一个潜在的问题是当你得到“[var name] 仅被分配但它的值从未使用”提示时。您可能认为您可以随便 86 条所有这些，但请注意，您可能注释掉的任何相关代码以及对这些死变量的赋值都不会产生可靠的副作用。诚然，这将是一种糟糕的编码方式（副作用方法将它们的返回值存储在被忽略的 vars 中），但是......它会发生，尤其是当原始编码器是一个螺旋桨头的疯狂科学家牛仔时。

这段代码充满了反模式，如果 Butterick 和/或 Simplicity 与这个人签订合同，我不会感到惊讶。

再想一想，除了这个项目的架构、设计、编码和格式之外，它并不是真的*那么*糟糕......

玛丽雪莱的“科学怪人”确实很有先见之明，但不是大多数人想象的那样。它不是对技术失控的普遍预感，而是比这更具体：它是大多数现代软件项目的前瞻，从这里和那里的“部分”随意地挤在一起，几乎不考虑“髋骨与大腿骨相连”（或应该如此）以及这些部分是否匹配或会相互排斥；左手不知道右手在做什么，魔鬼在最后！等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:16:45.753

在以下任何一种情况下都可能发生这种情况：

*   **对象 obj**是`null`并且您的代码具有`obj.ToString()`
*   **字符串项**是`null`并且您的代码有`item.Trim()`
*   **设置 mySettings**是`null`，你的代码有`mySettings.Path`

`SerialDataReceivedEventHandler`不太常见的事情是运行发布信息的线程或在删除后尝试接收数据的串行端口。

查看可疑表单的代码和父表单的代码在关闭此可疑表单的时间以及可能在可疑表单上运行的其他进程的情况。

# mysql - 我只能在 JOIN 失败的地方选择 MySQL 行吗？

> ID：15907810
> 
> 赞同：4
> 
> 时间：2013-04-09T16:49:31.577
> 
> 标签：mysql, join

我想执行一个 MySQL 查询，这样：

`SELECT * FROM table_A JOIN table_B on table_A.id = table_B.foreign_key`

…但我想返回table_B 中与 table_A**不匹配的行。**这可能吗？我怎样才能实现它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T16:50:55.790

您想使用 a [`LEFT OUTER JOIN`](http://dev.mysql.com/doc/refman/5.5/en/join.html)and then a`WHERE`子句来只允许连接表上的 NULL。

```
SELECT * FROM table_A 
LEFT OUTER JOIN table_B ON table_A.id = table_B.foreign_key
WHERE table_B.foreign_key IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T16:51:54.657

试试这个：

```
SELECT *
FROM table_A
LEFT JOIN table_B on table_A.id = table_B.foreign_key
WHERE table_B.foreign_key IS NULL 
```

# c - Eclipse 在使用标志时无法编译 C 项目

> ID：15907816
> 
> 赞同：0
> 
> 时间：2013-04-09T16:49:43.447
> 
> 标签：c, eclipse, gcc

我正在尝试使用 GCC 在 Ubuntu 12.10 下使用 Eclipse 编译 C 项目。

当我使用这些标志时：

[http://i.stack.imgur.com/FTxkG.jpg](http://i.stack.imgur.com/FTxkG.jpg)

[http://i.stack.imgur.com/MVA2k.jpg](http://i.stack.imgur.com/MVA2k.jpg)

eclipse 无法编译。

编译错误如下：

```
error: ISO C forbids an empty translation unit [-pedantic]
make: *** [.metadata/.plugins/org.eclipse.cdt.make.core/specs.o] Error 1 
```

为什么会出现这些问题，我应该如何使用选中的标志使用 eclipse 进行编译？

当尝试`Terminal`使用这些标志手动编译时，它编译成功。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:58:05.263

您的 C 项目有一个空的源文件。

您可以：

1）删除该文件。如果它是空的，为什么需要它？

2）用你的编译标志更放松，`-pedantic`而不是`-pedantic-errors`例如

3）添加一些愚蠢`gcc`的代码以使文件不为空，例如 add `#include <stdio.h>`.

# playframework-2.0 - 带有抽象 @Embedded 类的 Morphia InstantiationException

> ID：15907817
> 
> 赞同：2
> 
> 时间：2013-04-09T16:49:46.383
> 
> 标签：playframework-2.0, abstract, morphia

我将 Morphia 与 Play Framework 2.1 项目和 MongoDB 数据库一起使用，但在检索某些数据时遇到了问题。

我有一个 A 类，它和 @Entity 存储在一个集合中。但是那个类 A 有一个 @Embedded List 属性，这个类 B 是抽象的并且有多个实现。

但是这个 Class B 也有一个 @Embedded ClassC 属性，这个 Class C 也是抽象的，也可以有多个实现。

我认为这种结构不能“按原样”使用，而 Morphia 可以处理它。在我的数据库中，对象存储正确，没有错误。

```
{
    "_id" : ObjectId("5163c9131a887c8e5aea8d5f"),
    "className" : "package.to.ClassA",
    "list" : [
        {
            "propClassB" : [
                {
                    "className" : "package.to.an.ImplementationOfClassB",
                    "propClassC" : {
                        "className" : "package.to.an.ImplementationOfClassC"
                    }
                }
            ]
        }
    ]
} 
```

A类被标记为@Entity，
B类被标记为@Embedded（和@Polymorphic，但我不认为它被使用）
C类被标记为@Embedded（和@Polymorphic）

难道我做错了什么 ？谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:36:56.260

好的，伙计们，我知道我的问题是什么，而且我从没想过会是这样。我在 Google 小组上找到了 Morphia 的解决方案。

这是一个类加载器问题！我能够将我的实体保存到数据库中，但第二次之后，我无法检索任何实体，到处抛出 ClassNotFoundException ......

解决方案是在 Global 类中“覆盖”Morphia 的 DefaultCreator 以提供 Play 应用程序类加载器（它允许自定义应用程序启动时的行为（onStart() 和 onBeforeStart() 方法）。

```
Morphia morphia = applicationContext.getBean(Morphia.class);

// Configuring class loader.
morphia.getMapper().getOptions().objectFactory = new DefaultCreator() {
    @Override
    protected ClassLoader getClassLoaderForClass(String clazz, DBObject object) {
        return app.classloader();
    }
}; 
```

请注意，我正在使用 Spring Framework 加载 Morphia 实例，但我看到有人在做 new Morphia()，我认为它也可以工作（不是专家；））

瞧！希望有一天它可以帮助某人！

# backbone.js - 未填充主干 JS 集合

> ID：15907829
> 
> 赞同：0
> 
> 时间：2013-04-09T16:50:52.097
> 
> 标签：backbone.js, backbone-views

刚开始使用骨干网，一切都很顺利，直到我尝试加载一些 Json 数据。

```
// Category Model
var Category = Backbone.Model.extend({
    defaults: {
        title: "Not specfied",
        paramName: "not_specified",
        filter: false
    },
    initialize: function(){
        console.log("Cateogory Model Initialized");
    }
});

// Category Collection
var CategoryList = Backbone.Collection.extend({
    url: '/assets/js/libs/items.json',
    parse: function(resp, xhr) {
        return resp.facets;
    },
    model: Category,
    initialize : function() {
        console.log('This Collection has been called');
    }
});

var categories = new CategoryList();
categories.fetch(); 
```

如果我尝试查看集合中的任何项目，它是空的！

我的 json 文件如下所示

```
 {
"facets": [
  {
"title": "Military Service & Conflict",
"searchParam": "Military"
  },  
 {
"title":"Census, land & substitutes",
"searchParam":"Census"   
 },
 {
"title":"Education & work",
"searchParam":"Education"   
}
]
} 
```

如果我能做到这一点，我只需要整理一下我的观点

抢

# vb.net - 数据字符串中的特殊字符 (@) 在数据视图行过滤器中产生错误

> ID：15907830
> 
> 赞同：0
> 
> 时间：2013-04-09T16:50:52.603
> 
> 标签：vb.net

我有一个加载了数据的数据表。一列包含字符串值“Insurance @ 4_25%”。

创建数据视图行过滤器为：

```
 Property Expense as string = "Insurance @ 4_25%"        
    dv.rowfilter = "Expense = " & Expense 
```

我收到错误“未处理 SyntaxErrorException。无法解释位置 21 处的令牌'@'。”

当我将数据值应用于属性时，我使用 .toString。此列也不包含任何字符串分隔符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:57:53.577

如[文档](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)所述，您使用单引号作为字符串分隔符。

```
dv.RowFilter = "Expense = '" & Expense & "'" 
```

# xcode4.2 - 在 .xib 文件中工作未保存

> ID：15907832
> 
> 赞同：1
> 
> 时间：2013-04-09T16:50:53.040
> 
> 标签：xcode4.2

![在此处输入图像描述](https://i.stack.imgur.com/qVRw9.png)

当我在 .xib 文件中工作时，完成后我尝试保存它，但它不断显示无法保存文档的消息。请帮助解决这个问题

# svn - svn如何删除我在svn中忘记的文件

> ID：15907833
> 
> 赞同：1
> 
> 时间：2013-04-09T16:50:54.320
> 
> 标签：svn

想象一下我有以下回购历史

1000 -- 1001 -- 1002

在修订号 1001 中，我在子目录中添加了一些文件并将其提交到 1002。但实际上我必须做的是从其中一些子目录中删除所有文件，然后添加新文件，然后将其提交到修订号 1002。

因为人类会犯错误:) 所以我也不例外。现在 1002 拥有所有新文件和旧文件，如果我必须从 1002 中删除文件将非常非常困难，因为它将是所有文件的混合。有没有办法在svn中轻松做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:38:45.240

从一个干净的工作目录开始，然后在添加新文件之前返回修订：

```
svn up -r 1001 . 
```

现在，您可以从子目录中删除所有文件。rev 1002 中添加的文件不受影响，因为它们不存在于工作副本的修订版中。

```
svn rm foo/* bar/* 
```

用于`svn up`将工作副本更新到最新版本。出现在 rev 1002 中添加的文件。用于`svn commit`提交之前已标记为删除的文件：

```
svn up
svn commit 
```

# .net - 哪些应用程序使用 MEF

> ID：15907837
> 
> 赞同：0
> 
> 时间：2013-04-09T16:51:00.370
> 
> 标签：.net, mef

有谁知道目前正在使用 MEF 的任何应用程序？我正在寻找一个好的程序来获得一些关于使用 MEF 的想法，看看其他人如何使用它会对我有很大帮助——显然这意味着开源程序会受到青睐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:56:00.097

[Visual Studio 本身将 MEF 用于编辑器扩展](http://msdn.microsoft.com/en-us/library/dd885122.aspx)，您可以查看其中一些是如何编写的。

还有一个由[Microsoft Patterns and Practices](http://msdn.microsoft.com/en-us/library/ff921345.aspx)开发的名为[Prism](https://compositewpf.codeplex.com/)的项目，它可以将[MEF 用于其 DI](http://archfirst.org/books/getting-started-prism-and-mef)。它设置为与 WPF 一起使用，但正如 Glenn Block[在这里](http://codebetter.com/glennblock/2008/10/20/bringing-prism-to-winforms/)显示的那样，它也可以与 WinForms 一起使用。

我之前在我的项目中使用了带有 MEF 的 Prism 变体，并且对结果感到满意。

# opencart - 使用 VQmod 向 OpenCart 管理员添加自定义字段

> ID：15907843
> 
> 赞同：1
> 
> 时间：2013-04-09T16:51:30.217
> 
> 标签：opencart, vqmod

试图在 OpenCart 后台的类别页面中添加一个简短的描述字段。让多个 VQmod XML 实例在控制器和模型中正常工作，但尝试使用以下内容将字段添加到类别页面似乎根本没有做任何事情。category_form.tpl 中根本没有添加/替换任何内容。

```
<!-- This adds the short description field to the admin category page -->
<file name="admin/view/template/catalog/category_form.tpl">
    <operation>
        <search position="replace"><![CDATA[              <tr>
                <td><?php echo $entry_description; ?></td>
                <td><textarea name="category_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea></td>
              </tr>]]></search>
        <add><![CDATA[              <tr>
                <td><?php echo $entry_short_description; ?></td>
                <td><textarea name="category_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea></td>
              </tr>           
              <tr>
                <td><?php echo $entry_description; ?></td>
                <td><textarea name="category_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea></td>
              </tr>]]></add>
    </operation>
</file> 
```

显然有更好的方法，因为我认为我不应该尝试在这里替换所有这些代码，但是如果我有人可以检查该代码并指出我哪里出错了，那就太好了。谢谢。

# 更新

顺便说一句，我的 XML 代码被包装`<modification>` `</modification>`了......

我曾尝试使用偏移量并参考了 VQmod 文档，但仍然无法正确处理...

我努力了：-

```
<file name="admin/view/template/catalog/category_form.tpl">
    <operation>
        <search position="replace" offset="1"><![CDATA[<td><?php echo $entry_description; ?></td>]]></search>
        <add><![CDATA[              <tr>
                <td><?php echo $entry_short_description; ?></td>
                <td><textarea name="category_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea></td>
              </tr>
              <tr>
                <td><?php echo $entry_description; ?></td>
                <td><textarea name="category_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea></td>
              </tr>]]></add>  
    </operation>
</file> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:33:32.867

首先整个代码应该被包裹在

```
<modification>
    <file ...>
        ....
    </file>
</modification> 
```

其次你不能搜索多行你可以搜索特定的行然后使用`offset`属性

供您使用

```
<search position="replace" offset="1"><![CDATA[ <td><?php echo $entry_description; ?></td>]]></search> 
```

请参阅[vQmod 文档](http://vqmod.com)。

# .htaccess - htaccess 重定向异常文件夹

> ID：15907845
> 
> 赞同：1
> 
> 时间：2013-04-09T16:51:41.840
> 
> 标签：.htaccess, mod-rewrite

我需要转发整个域减去一个文件夹及其内容。

[http://www.domain.com/folder_I_need/content_I_need.stuff](http://www.domain.com/folder_I_need/content_I_need.stuff)

网站的其余部分需要转发。

这是我尝试过的：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !^/folder_I_need/$
Redirect 301 / http://www.new_domain.org/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:10:59.167

该`RewriteCond`指令是 mod_rewrite 的`Redirect`一部分，也是 mod_alias 的指令部分，它们不能相互结合使用。您也可能不希望`$`在您的条件模式结束时出现。尝试：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !^/folder_I_need/
RewriteRule ^(.*)$ http://www.new_domain.org/$1 [L,R=301] 
```

# java - 使用 JDBCRealm 保护 REST Web 服务？

> ID：15907853
> 
> 赞同：0
> 
> 时间：2013-04-09T16:51:59.407
> 
> 标签：java, web-services, rest, authentication, jdbcrealm

我在这里阅读了如何保护 REST 服务的非常好的答案，但所有这些都只是纯粹的理论，并没有太大帮助。使用 REST 时如何实现 JDBCRealm-FORM 身份验证？

**登录表单**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Login Form</title>
</head>

<body>
<form method="post" action="j_security_check">
<p>You need to log in to access protected information.</p>
<table>
   <tr>
      <td>User name:</td>
      <td><input type="text" name="j_username" /></td>
   </tr>
   <tr>
      <td>Password:</td>
      <td><input type="password" name="j_password" /></td>
   </tr>
</table>
<p><input type="submit" value="Login" /></p>
</form>
</body>
</html> 
```

**web.xml**

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>How to protect REST</web-resource-name>
        <url-pattern>/protected/*</url-pattern>----> What is that in case of rest?
        <http-method>GET</http-method>
        <http-method>POST</http-method>
        <http-method>HEAD</http-method>
        <http-method>PUT</http-method>
        <http-method>OPTIONS</http-method>
        <http-method>TRACE</http-method>
        <http-method>DELETE</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
        <role-name>customer</role-name>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>jdbcRealm</realm-name>

</login-config>
<security-role>
    <role-name>admin</role-name>
</security-role>
<security-role>
    <role-name>user</role-name>
</security-role>
<security-role>
    <description/>
    <role-name>customer</role-name>
</security-role> 
```

**问题：**

1) 我在 Glassfish 中创建了 JDBCRealm，它正在工作。我用另一个 jsf-app 测试了它。在 clien-REST-service 的情况下，例如：`<url-pattern>/protected/*</url-pattern>`在正常情况下，它指的是受保护的 jsp/jsf/xhtml 等页面所在的“文件夹”，但现在在哪里？

2）会话呢？我认为在无状态上下文中使用会话是不可能的

3) 甚至可以在 REST 中使用基于 FORM 的身份验证吗？

4）任何比我聪明的人解释如何保护客户端 - 服务器休息应用程序的教程链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:18:13.773

> 1) 我在 Glassfish 中创建了 JDBCRealm，它正在工作。我用另一个 jsf-app 测试了它。在 clien-REST-service 的情况下，例如：/protected/* 在正常情况下，它指的是受保护的 jsp/jsf/xhtml 等页面所在的“文件夹”，但现在在哪里？

您可以选择保护整个 REST 服务子域或其中的一部分。假设您将 root 配置为`/rest`，这就是您将在 url-pattern 中放入的内容。

> 2）会话呢？我认为在无状态上下文中使用会话是不可能的

取决于您的 REST 实现。对于 JAX-RS (Jersey)，答案是肯定的，您可以使用 HTTP 会话。`@Context`你通过注解将它注入到你的资源类中：

```
@Path("/echo")
public class EchoServiceImpl {
    @Context
    private HttpSession session;
} 
```

确认您*可以*使用会话后，我强烈建议您不要这样做，因为 RESTful 调用应该是无状态的。

> 3) 甚至可以在 REST 中使用基于 FORM 的身份验证吗？

对 REST 使用基于表单的身份验证是没有意义的，不。您正在设计服务以供其他计算机系统使用，而不是由人类使用。该过程不应涉及交互式 UI。

> 4）任何比我聪明的人解释如何保护客户端 - 服务器休息应用程序的教程链接。

这是一个艰难的指南，那里有很多指南，但其中很多都非常特定于 REST 实现中使用的特定技术堆栈。首先，我建议您将当前配置从 FORM 更改为 BASIC，并考虑使用 SSL 保护您的端点。请记住，当您使用基本身份验证时，您需要在 Authorization 标头中包含用户凭据：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

[您可以在此处](http://en.wikipedia.org/wiki/Basic_access_authentication)阅读有关如何计算标头的信息

一旦熟悉了基本/摘要式身份验证，您就可以开始查看更高级的安全选项，例如 OAuth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:23:35.310

您**不能**使用 REST 进行 FORM 身份验证，因为每个请求本身都必须是完整的并且是无状态的。带有重定向的表单不是。您需要使用标准的基于 HTTP 标头的机制，例如 Basic、Digest 等。

# php - PHP 从复选框数组中获取值

> ID：15907854
> 
> 赞同：0
> 
> 时间：2013-04-09T16:52:09.530
> 
> 标签：php, arrays, explode, implode

我试图弄清楚如何从复选框数组中获取值。复选框数组 var_dump 如下所示：

```
array (size=50)
0 => string '104702|0' (length=8)
1 => string '52278|1' (length=7)
2 => string '69891|1' (length=7)
3 => string '153335|1' (length=8)
4 => string '131140|1' (length=8)
. . . 
```

我在每个数组值中发送两个不同的 ID，由管道分隔，并希望将每个部分分配给不同的变量 $variable1、$variable2，以便我可以在数据库查询中使用它们。我怎样才能做到这一点？

谢谢你的帮助。

编辑：即使我已经接受了下面的答案，这里是我正在寻找的完整答案：

为了从上面的数组中获取值以便我可以在我的数据库查询中使用它们，我做了以下操作来首先将它们分开：

```
foreach ($input as $key => $value) {
    $this->combinedIds[] = explode('|', $value);
} 
```

然后，为了将这些值放入单独的变量中，我执行了以下操作：

```
foreach ($this->combinedIds as $key => $value) {
    $firstId = $value[0];
    $secondId = $value[1]

    // do something with the values ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:55:13.977

在数组上使用 foreach 循环并用管道符号分解每个值。像这样的东西：

```
foreach ($arr as $val) 
{
    $newData = explode("|", $val);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:02:51.797

不同的变体（使用匿名函数）将类似于：

`$values = array_map(function ($input) { $tmp = explode("|", $input); return ["id1" => current($tmp), "id2" => end($tmp)]; }, $array);`.

这是为 PHP 5.4+ 编写的。如果您需要与 PHP 5.3 及以下兼容的版本，只需将括号替换为相应的`array(...)`等效版本。

# c# - 尝试使用自动映射器和城堡温莎注入进行映射时抛出异常

> ID：15907863
> 
> 赞同：1
> 
> 时间：2013-04-09T16:52:37.363
> 
> 标签：c#, inversion-of-control, castle-windsor, automapper

我收到以下错误

```
Missing type map configuration or unsupported mapping.

Mapping types:
RegistrationViewModel -> Member 
```

这是我的模型

```
public class Member
{
    public int ID { get; set; }
    public string EmailAddress { get; set; }
    public string Password { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Gender Gender { get; set; }
    public int AddressId { get; set; }
    public virtual Address Address { get; set; }
    public DateTime DateCreated { get; set; }
}

public class RegistrationViewModel
{
    public string EmailAddress { get; set; }
    public string Password { get; set; }
    public string ConfirmPassword { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Postcode { get; set; }
    public Title Title { get; set; }
} 
```

这是我的映射器

```
public class MemberMapper : Profile
{
    protected override void Configure()
    {
        Mapper.CreateMap<RegistrationViewModel, Member>()
            .ForMember(x => x.Address, y => y.Ignore())
            .ForMember(x => x.Gender, y => y.Ignore());
    }
} 
```

这是我的[windsor安装程序（我从](http://docs.castleproject.org/)[github](https://gist.github.com/jochenjonc/1852705)复制的）

```
public class AutoMapperInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(
            Component.For<ConfigurationStore>()
                .OnlyNewServices()
                .ImplementedBy<ConfigurationStore>()
                // .Properties(PropertyFilter.IgnoreAll) // Uncomment this line to fix the problem (https://groups.google.com/d/msg/castle-project-users/FotV-tBtGiQ/id31pps10EsJ)
                .DependsOn(
                    Property.ForKey<ITypeMapFactory>().Eq(new TypeMapFactory()),
                    Property.ForKey<IEnumerable<IObjectMapper>>().Eq(MapperRegistry.AllMappers())
                ),
            Component.For<IConfigurationProvider>()
                .OnlyNewServices()
                .UsingFactoryMethod(kernel => kernel.Resolve<ConfigurationStore>())
                .LifeStyle.Singleton,
            Component.For<IConfiguration>()
                .OnlyNewServices()
                .UsingFactoryMethod(kernel => kernel.Resolve<ConfigurationStore>())
                .LifeStyle.Singleton,
            Component.For<IMappingEngine>()
                .OnlyNewServices()
                .ImplementedBy<MappingEngine>()
                .LifeStyle.Singleton,
            Classes.FromAssemblyContaining<MemberMapper>()
                .BasedOn<Profile>().WithServiceBase()
            );

        var profiles = container.ResolveAll<Profile>();
        var config = container.Resolve<IConfiguration>();

        foreach (var profile in profiles)
        {
            config.AddProfile(profile);
        }
    } 
```

我正在努力找出这里出了什么问题，在我称之为`IMappingEngine`看起来不错的方法中，并且通过调试对象资源管理器查看并没有遗漏任何明显的东西。

```
public MemberService(IGenericRepository<Member> repository, IMappingEngine mapper) :
        base(repository)
{
    this.mapper = mapper;
}

public void SaveNewUser(RegistrationViewModel registrationViewModel)
{
    var newMember = mapper.Map<Member>(registrationViewModel);

    ...
} 
```

我觉得我可能过于复杂了，但我真的希望能够注入`IMapperEngine`，以便我可以在我的单元测试中模拟它。没有它，我将不得不 bin [automapper](http://automapper.org/)。

# iphone - 如何在应用购买订阅模型中实现 ios？

> ID：15907866
> 
> 赞同：-2
> 
> 时间：2013-04-09T16:52:46.373
> 
> 标签：iphone, xcode, in-app-purchase, subscription

我找不到任何描述应用内购买**订阅**模型实现的教程。如果有人知道，请发帖。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T16:56:08.303

考虑苹果官方的应用内购买指南。有一个部分专门处理自动更新订阅。

[应用内购买编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)

# c# - winform在悬停时更改按钮的BackgroundImage属性

> ID：15907868
> 
> 赞同：4
> 
> 时间：2013-04-09T16:52:51.117
> 
> 标签：c#, winforms, button, background-image

我想更改`backgroundImage`悬停按钮的属性，如下所示：

```
 private void btnGetHardwareID_MouseEnter(object sender, EventArgs e)
    {
        btnGetHardwareID.BackgroundImage = (System.Drawing.Image)(Properties.Resources._11949847771696668271pill_button_green_benji__01_svg_med);
        btnGetHardwareID.Refresh();
    }

    private void btnGetHardwareID_MouseLeave(object sender, EventArgs e)
    {
        btnGetHardwareID.BackgroundImage = (System.Drawing.Image)(Properties.Resources._11949847771793996117pill_button_purple_benji_01_svg_med);
        btnGetHardwareID.Refresh();
    } 
```

btnGetHardwareID 的属性如下：

```
 // btnGetHardwareID
    // 
    this.btnGetHardwareID.BackColor = System.Drawing.Color.Transparent;
    this.btnGetHardwareID.BackgroundImage = global::Travian.Properties.Resources._11949847771793996117pill_button_purple_benji_01_svg_med;
    this.btnGetHardwareID.BackgroundImageLayout = System.Windows.Forms.ImageLayout.Stretch;
    this.btnGetHardwareID.FlatAppearance.BorderSize = 0;
    this.btnGetHardwareID.FlatStyle = System.Windows.Forms.FlatStyle.Flat;
    this.btnGetHardwareID.Font = new System.Drawing.Font("Cambria", 10F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
    this.btnGetHardwareID.ForeColor = System.Drawing.Color.White;
    this.btnGetHardwareID.Location = new System.Drawing.Point(31, 53);
    this.btnGetHardwareID.Name = "btnGetHardwareID";
    this.btnGetHardwareID.Size = new System.Drawing.Size(160, 40);
    this.btnGetHardwareID.TabIndex = 25;
    this.btnGetHardwareID.Text = "Get My Hardware-ID";
    this.btnGetHardwareID.UseVisualStyleBackColor = false;
    this.btnGetHardwareID.Click += new System.EventHandler(this.btnGetHardwareID_Click);
    this.btnGetHardwareID.MouseDown += new System.Windows.Forms.MouseEventHandler(this.btnGetHardwareID_MouseDown);
    this.btnGetHardwareID.MouseEnter += new System.EventHandler(this.btnGetHardwareID_MouseEnter);
    this.btnGetHardwareID.MouseLeave += new System.EventHandler(this.btnGetHardwareID_MouseLeave);
    this.btnGetHardwareID.MouseUp += new System.Windows.Forms.MouseEventHandler(this.btnGetHardwareID_MouseUp); 
```

现在的问题是 MouseEnter 上的 backgroundImage 是这样的：
![鼠标输入](https://i.stack.imgur.com/Ok8iU.png)

在 MouseLeave 上是这样的：

![鼠标离开](https://i.stack.imgur.com/K53aq.png)

绿色按钮周围的灰色背景色是什么，我该如何删除它？

**编辑**
原始图像如下：

![红色按钮 - 原始 - png 格式](https://i.stack.imgur.com/LxpnJ.png)

![绿色按钮 - 原始 - png 格式](https://i.stack.imgur.com/os8fo.png)

以及 MainForm 的背景：

![主要形式 - 背景图像](https://i.stack.imgur.com/azd0G.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T19:07:56.717

您正在寻找的解决方案如下。将 FlatAppearance.MouseOverBackColor 设置为透明。

```
this.btnGetHardwareID.FlatAppearance.MouseOverBackColor = System.Drawing.Color.Transparent; 
```

# python - 将键值对读入 Pandas

> ID：15907869
> 
> 赞同：2
> 
> 时间：2013-04-09T16:52:54.700
> 
> 标签：python, pandas

Pandas 让读取 CSV 文件变得非常容易：

```
pd.read_table('data.txt', sep=',') 
```

Pandas 是否对具有键值对的文件有类似的东西？我想出了这个：

```
pd.DataFrame([dict([p.split('=') for p in l.split(',')]) for l in open('data.txt')]) 
```

如果不是内置的，那么也许更惯用的东西？

感兴趣的文件如下所示：

```
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525690751,price=1548.00,quantity=551
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525697183,price=1548.00,quantity=551
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525714498,price=1548.00,quantity=551
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525734967,price=1548.00,quantity=551
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525735567,price=1548.00,quantity=555
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525735585,price=1548.00,quantity=556
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525736116,price=1548.00,quantity=556
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525740757,price=1548.00,quantity=556
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525748502,price=1548.00,quantity=556
symbol=ESM3,exchange=GLOBEX,timestamp=1365428525748952,price=1548.00,quantity=557 
```

它在每一行都有完全相同的键，并且顺序相同。没有空值。要生成的表是：

```
 exchange    price quantity symbol         timestamp
0   GLOBEX  1548.00    551\n   ESM3  1365428525690751
1   GLOBEX  1548.00    551\n   ESM3  1365428525697183
2   GLOBEX  1548.00    551\n   ESM3  1365428525714498
3   GLOBEX  1548.00    551\n   ESM3  1365428525734967
4   GLOBEX  1548.00    555\n   ESM3  1365428525735567
5   GLOBEX  1548.00    556\n   ESM3  1365428525735585
6   GLOBEX  1548.00    556\n   ESM3  1365428525736116
7   GLOBEX  1548.00    556\n   ESM3  1365428525740757
8   GLOBEX  1548.00    556\n   ESM3  1365428525748502
9   GLOBEX  1548.00    557\n   ESM3  1365428525748952 
```

（在我把它带进来之后，我可以用 a`\n`删除它。）`quantity``rstrip()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:14:39.913

如果您事先知道键名并且名称总是以相同的顺序出现，那么您可以使用转换器来切断键名，然后使用`names`参数命名列：

```
import pandas as pd

def value(item):
    return item[item.find('=')+1:]

df = pd.read_table('data.txt', header=None, delimiter=',',
                   converters={i:value for i in range(5)},
                   names='symbol exchange timestamp price quantity'.split())
print(df) 
```

在您发布的数据上产生

```
 symbol exchange         timestamp    price quantity
0   ESM3   GLOBEX  1365428525690751  1548.00      551
1   ESM3   GLOBEX  1365428525697183  1548.00      551
2   ESM3   GLOBEX  1365428525714498  1548.00      551
3   ESM3   GLOBEX  1365428525734967  1548.00      551
4   ESM3   GLOBEX  1365428525735567  1548.00      555
5   ESM3   GLOBEX  1365428525735585  1548.00      556
6   ESM3   GLOBEX  1365428525736116  1548.00      556
7   ESM3   GLOBEX  1365428525740757  1548.00      556
8   ESM3   GLOBEX  1365428525748502  1548.00      556
9   ESM3   GLOBEX  1365428525748952  1548.00      557 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:23:42.380

我不确定最好的方法是什么，但假设在值中找不到分隔符——想到极端情况会伤到我的大脑——那么这样的事情就不是超级优雅了但很简单：

```
>>> df = pd.read_csv("esm.csv", sep=",|=", header=None)
>>> df2 = df.ix[:,1::2]
>>> df2.columns = list(df.ix[0,0::2])
>>> df2
  symbol exchange         timestamp  price  quantity
0   ESM3   GLOBEX  1365428525690751   1548       551
1   ESM3   GLOBEX  1365428525697183   1548       551
2   ESM3   GLOBEX  1365428525714498   1548       551
3   ESM3   GLOBEX  1365428525734967   1548       551
4   ESM3   GLOBEX  1365428525735567   1548       555
5   ESM3   GLOBEX  1365428525735585   1548       556
6   ESM3   GLOBEX  1365428525736116   1548       556
7   ESM3   GLOBEX  1365428525740757   1548       556
8   ESM3   GLOBEX  1365428525748502   1548       556
9   ESM3   GLOBEX  1365428525748952   1548       557 
```

基本上，读入它，然后自己进行数据透视，保留所有其他元素，然后修复列名。

# java - 使用 C++ 中的库为 PhoneGap 创建插件

> ID：15907872
> 
> 赞同：1
> 
> 时间：2013-04-09T16:53:04.063
> 
> 标签：java, c++, objective-c, cordova, plugins

我需要为 phonegap 应用程序开发一个插件，它将通过 PhoneGap 用于 iOS、BlackBerry、Android 和 WindowsPhone 应用程序。

我有一组函数（库）`C++`允许对图像进行应用操作，我想知道我是否可以使用这个`C++`库在本机代码中为 PhoneGAP 构建不同的插件，使用类似包装器或类似的东西`JAVA`，`Objective-C`等等。

或者是否存在其他方法`C++`在多个移动平台中使用该库，例如使用 JNI 调用 C 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T16:54:58.453

不

无法提交您的答案。请看上面的错误。

# matlab - 改进 CUDA GPU 上 A*x=B 的 Matlab + CUSP MEX 解决方案

> ID：15907874
> 
> 赞同：1
> 
> 时间：2013-04-09T16:53:08.203
> 
> 标签：matlab, gpu, mex, sparse-matrix, cula

Matlab 仍然无法在 CUDA GPU 上计算稀疏矩阵。也没有这样的工具箱（夹克已停产）。这就是为什么我使用通过 MEX 文件集成到 Matlab 的 CUSP。但是，我开发的工具有两个问题：

*   对于大型方程系统（实际上仅从 100 个元素开始），它非常不稳定，
*   它比 Matlab CPU 替代品慢几十或几百倍。

我正在求解 A*x=b，其中 A 是稀疏的对称矩阵，b 是向量。

硬件规格：英特尔 i7 3630QM、GT640M 2G、8 GB DDR3。软件：Windows 8 64 位、Matlab R2012b 64 位、CUDA 5.0 64 位、CUSP 0.3.1、Windows SDK v7.0、VS2010 编译器。

墨西哥代码：

```
#include<cusp/csr_matrix.h>
#include <cusp/krylov/bicgstab.h>
#include <matrix.h>
#include <mex.h> 
#include <time.h>

void mexFunction(int nlhs,mxArray *plhs[],int nrhs,const mxArray *prhs[])
{
        double t1 =  clock();
          // data from Matlab       
        double *b = mxGetPr(prhs[1]);
        double *A = mxGetPr(prhs[0]);
        int n = mxGetM(prhs[0]);
        mwIndex *ir = mxGetIr(prhs[0]);
        mwIndex *jc = mxGetJc(prhs[0]);
        int N = jc[n];
        t1 = clock() - t1;

        double t2 =  clock();
          // initialization of matrix A in CSR format (jc and ir are exchanged, because Matlab uses CSC format
        cusp::csr_matrix<int,float,cusp::device_memory> Ag(n,n,3*n-2);
        thrust::copy(jc, jc + n + 1, Ag.row_offsets.begin());
        thrust::copy(ir, ir + N,     Ag.column_indices.begin());
        thrust::copy(A,  A  + N,     Ag.values.begin()); 
          // initialization of vector b
        cusp::array1d<float, cusp::device_memory> bg (b, b+n);
        cusp::array1d<float, cusp::device_memory> xg (n, 0);
        t2 = clock() - t2;

        double t3 =  clock();
          // bicgstab algorithm solution for vector x, when using 0.001 accuracy and precondition M
          // this is the slowest part, much slower than others
        cusp::verbose_monitor<float> monitor(bg, 5000, 1e-3);
        cusp::identity_operator<float, cusp::device_memory> M(n, n);
        cusp::krylov::bicgstab(Ag, xg, bg, monitor, M);        
        t3 = clock() - t3;

        double t4 =  clock();     
          // gathering solution vector bact on host to Matlab array T
        mxArray *T = mxCreateDoubleMatrix(n, 1, mxREAL);
        double *x  = mxGetPr(T);
        thrust::copy(xg.begin(), xg.end(), x);
        t4 = clock() - t4;

          // gathering execution times to Matlab array times
        mxArray *times=mxCreateDoubleMatrix(5, 1, mxREAL);
        double *timesb=mxGetPr(times);
        timesb[0]=t1; timesb[1]=t2; timesb[2]=t3; timesb[3]=t4; timesb[4]=monitor.iteration_count();

          // sending data back to Matlab
        plhs[0] = times; 
        plhs[1] = T;
} 
```

使用以下命令在 Matlab 上的 MEX 文件（ex.cu）中编译此代码（如有必要，将第二个命令更改为 32 位）：

```
>> !nvcc -c -arch sm_20 ex.cu -Xcompiler -fPIC -I "C:\Program Files\MATLAB\R2012b\extern\include" -I "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include
>> mex ex.obj -L"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\lib\x64" -lcudart 
```

样本矩阵、向量和编译的 64 位 MEX 函数： http: [//www.failai.lt/3fqkhvoslxyt/sampleData.7z.htm](http://www.failai.lt/3fqkhvoslxyt/sampleData.7z.htm)

利用：

```
tic; [times,x]=ex(K',F); toc;   %K has to be transposed for CSR 
```

其中时间 - 单独的执行时间，最后一个元素 - 用于解决方案的迭代计数（bicgstab 监视器），结果 - K*x=F 的解决方案。

结果（[http://www.failai.lt/rupaliln7kfb/results.7z.htm](http://www.failai.lt/rupaliln7kfb/results.7z.htm)）：

*   K_int_6，F_int_6 - 好的
*   K_11, F_11 - x(1) 错误，其他正常
*   K_100000, F_100000 - x(1) 错误，其他从一开始还可以，但后来与正确结果相比正在减少。
*   K_100000, F_100000 - 在 GPU (MEX) 上执行持续 0.6 秒，而在 CPU ( *tic;xcpu=K\F;toc;* ) 上持续 0.014 秒。

你能看看那个代码，也许试试 MEX 函数，报告你的结果，建议如何改进这个函数？也许您知道任何可以在 GPU 上进行稀疏计算的替代方案？我希望，在 Matlab 发布对 GPU 上稀疏矩阵的兼容性之前，它对每个人都有用 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T19:08:04.303

看看 Matlab 文件交换，gpus 的尖点稀疏类，支持单精度，实数/复数： http: [//www.mathworks.com/matlabcentral/fileexchange/44423-gpu-sparse-accumarray-non-uniform-grid](http://www.mathworks.com/matlabcentral/fileexchange/44423-gpu-sparse-accumarray-non-uniform-grid)

稀疏矩阵向量乘法被 CUSP 重载。

# c# - 通知客户表记录更改

> ID：15907877
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:21.643
> 
> 标签：c#, asp.net, sql-server-2008-r2

我有一个不使用任何`ORM`. 这是一个`Webforms`项目，大部分业务逻辑都驻留在`stored procedures`数据库端。

以下是工作流程的工作方式：
用户转到页面 ->
选择必要的参数 ->
从存储过程中检索数据集。->
然后我们将该数据集存储在 ViewState 中以便更快地访问，这意味着记录可能在其他用户编辑它们后变得陈旧。如果我们不将这些记录存储在 Viewstate 中，那么应用程序使用起来会变得非常缓慢。

**问题：** 自动更新记录状态的最佳方法是什么，正确的缓存方法是什么？如何查看记录是否是最新的？你认为这有`SignalR`帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:21:36.963

无论您使用什么缓存模型或库，如果您的数据填充速度很慢，您在尝试验证缓存数据集的状态时仍然会遇到明显的延迟。您可以使用 SignalR 管理与服务器的连接，但这仍然意味着您的用户可能正在使用过期的 DataSet 并在确定缓存数据的“当前性”时产生所有后果。

我和@MichaelPerrenoud 在一起，会仔细查看返回DataSet 的存储过程的执行计划。比较您的应用程序和在查询窗口中运行过程之间的执行时间 - 这可能是参数嗅探问题导致使用效率低下的执行计划。

# matlab - matlab 的 im2bw 结果为深/浅蓝色

> ID：15907878
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:25.117
> 
> 标签：matlab

当我从网络摄像头中抓取一张图片并使用 im2bw 功能时，它会生成浅蓝色和深蓝色图像，而不是黑白图像。这是什么原因造成的？

我在 R2011a for Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:02:06.877

您可能正在转换索引图像。尝试使用 map 参数运行 im2bw。

```
BW = im2bw(X, map, level) 
```

当您将图像读取为时，您会得到地图

```
[X, map] = imread(file); 
```

* * *

**编辑**

根据 OP，答案实际上在我对问题的评论中，而不是在这里。为了显示图像，使用了[IMAGE](http://www.mathworks.com/help/matlab/ref/image.html)功能。此功能使用 JET 颜色图并且不缩放图像，这就是为什么它通常以蓝色显示图像的原因。显示图像 最好使用Image Processing Toolbox 中的[IMSHOW](http://www.mathworks.com/help/images/ref/imshow.html)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:36:55.533

顺便说一句：如果没有图像处理工具箱：

```
image(uint8(repmat(picture, [1,1,3])));
axis image 
```

应该有帮助。

# php - 数据库的安全用户密码散列

> ID：15907879
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:28.063
> 
> 标签：php, crypt

我正忙于为我的框架设计一个用户身份验证类，我目前使用的是前段时间从教程中获得的代码。与大多数程序员一样，我觉得我需要了解代码的作用并希望对其进行修改以使其更安全。我发现下面的版本在 Mac 上失败了，所以我需要重写它。这是我以前在身份验证类中的方法（用于注册帐户：

```
 // security is a config file with a global salt in $security->security_salt
 public function generate_crypt($password) {
    $security = new security();
    $crypt_salt = '$6$rounds=5000$' . uniqid() . "$";
    $password = $password . $security->security_salt;
    return crypt($password, $crypt_salt);
} 
```

现在上面的例子只使用了 1 个全局盐，我觉得如果我为每个用户有一个单独的盐会更好，所以我正在考虑将其更改为：

```
/*
 * properties below are from methods, I am just putting it as
 * seperate variables to be understood a little better:
 *
 */

 private function generate_user_salt() {
       return hash('sha512',uniqid());
 }

 private function generate_crypt($password, $user_salt) {
    $security = new security_config();
    $password = $password . $security->security_salt;
    return crypt($password, $user_salt);
}

private register() {
      $user_salt = $this->generate_user_salt();
      $password = $this->generate_crypt($_POST['password'],$user_salt);
      // Write user to database where `salt`=>$user_salt and `password`=>$password;
} 
```

要进行身份验证，我会这样做：

```
 // Data is retrieved from database and stored in a $this->credentials array property:
 private function validate_password() {
    $security = new security_config();
    $salted_password = $_POST['password'] . $security->security_salt;
    if (crypt($salted_password, $this->credentials['salt']) == $this->credentials['password']) {
        return true;
    }
} 
```

我已经测试了上述内容，它似乎可以正常工作，但是，这是使用 crypt() 的正确方法吗？它是否安全？我正在尝试使用 2 个盐字符串，这样即使有一个安全桥并且有人获得了用户盐，他们仍然需要位于文件中的盐。

我希望在不支持某些功能或算法的不同平台出现问题的情况下，最大限度地利用现实的安全性。

这是安全的和/或我应该使用不同的方法吗？

# javascript - 使用播放和暂停视频

> ID：15907881
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:30.760
> 
> 标签：javascript, button, video, playback

我希望你能帮助我。我有一个播放和其他暂停按钮，但不起作用。谢谢。这是我的代码示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>Video.js | HTML5 Video Player</title>
    <link href="http://vjs.zencdn.net/3.2/video-js.css" rel="stylesheet" type="text/css">
    <script src="http://vjs.zencdn.net/3.2/video.js"></script>
    <script>
        _V_.options.flash.swf = "video-js.swf";
    </script>
    <script>    
        _V_("example_video_1").ready(function(){   
            var myPlayer = this;
        }); 
    </script>
</head>
<body>
    <video id="example_video_1" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264" poster="http://video-js.zencoder.com/oceans-clip.png" data-setup="{}">
        <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />
        <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm' />
        <source src="http://video-js.zencoder.com/oceans-clip.ogv" type='video/ogg' />
    </video>
    <input type="button" value="Pause" onClick="myPlayer.pause();">
    <input type="button" value="Play" onClick="myPlayer.play();">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:12:56.200

视频设置必须在文档加载后进行。因此，您必须将其包含在“onload”函数中。如果你使用 jQuery，你可以把它放在`$(document).ready()`. 否则你可以使用`window.onload`. 此外，您必须删除“var”关键字，因为它在函数内部创建了一个局部变量，您无法从外部访问该变量。

所以安装脚本会变成：

```
<script>  
    window.onload = function(){
       _V_("example_video_1").ready(function(){ 
          myPlayer = this; 
       });
   };
</script> 
```

# android - 我需要这个项目的建议

> ID：15907884
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:35.947
> 
> 标签：android, wallpaper

1.  显示 JPEG 图像。
2.  在图像上显示一个按钮，允许用户将图像设置为他们的墙纸。
3.  自动将图像调整为用户特定的 Android 手机显示尺寸。
4.  如果应用程序被卸载，则删除壁纸。

我可以很容易地完成第 1 步和第 2 步，我只是坚持其他两个步骤，谁能指出我正确的方向。这是到目前为止的代码

```
public class MainActivity extends Activity implements OnClickListener {

    ImageView iv;
    Button b;
    Intent i;
    Bitmap bmp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initialize();
        InputStream is = getResources().openRawResource(R.drawable.image);
        bmp = BitmapFactory.decodeStream(is);
    }
    private void initialize(){
        iv = (ImageView) findViewById(R.id.ivReturnedPic);
        b = (Button) findViewById(R.id.bSetWallpaper);
        b.setOnClickListener(this);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.bSetWallpaper:
            try {
                getApplicationContext().setWallpaper(bmp);
            } catch (IOException e) {

                e.printStackTrace();
            }
            break;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:10:33.357

在所需的屏幕尺寸上设置壁纸

```
WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplication());
int height = myWallpaperManager.getDesiredMinimumHeight();
int width = myWallpaperManager.getDesiredMinimumWidth();

try {
    myWallpaperManager.setBitmap(Bitmap.createScaledBitmap(setAs, width , height , true));   
} catch (final IOException e) {
    Toast.makeText(getApplication(), "Error setting wallpaper", Toast.LENGTH_SHORT).show();
} 
```

对于第四个问题，请参考[这个](https://stackoverflow.com/a/8687069/1627904)

# uiscrollview - UIScroll View 不显示 UIImageView

> ID：15907886
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:36.323
> 
> 标签：uiscrollview, uiimageview

好的，所以我已经在这个错误上工作了 2 个小时，并查看了我能找到的所有链接，这些链接也有我的问题。我试图将 UIImageView 放在 UIScrollView 中，然后在屏幕上显示滚动视图。当我尝试这样做时，什么都没有显示。所以首先我认为 imageview 没有要显示的图像，所以我通过将 imageView 添加到屏幕来测试这个

```
[self.view addSubview:mapDisplay]; 
```

并且显示了图像，但是当我将图像放在滚动视图中时，我仍然无法显示图像。

任何帮助都将得到应用。

.h 文件

```
#import <UIKit/UIKit.h>
#import "FloorsContainer.h"
@interface FloorMapViewController : UIViewController {
    UIImage* mapToShow;
    IBOutlet UIImageView *mapDisplay;
    IBOutlet UIScrollView *mapScrollView;
}
@property(nonatomic, retain) UIImageView *mapDisplay;
@property(nonatomic, retain) UIScrollView *mapScrollView;
-(void)setMapImage:(UIImage *) newMap;
@end 
```

.m 文件

```
@interface FloorMapViewController ()
@end
@implementation FloorMapViewController
@synthesize mapDisplay, mapScrollView;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initializatio
    }
    return self;
}
-(void)setMapImage:(UIImage *) newMap {
    if (newMap != NULL) {
        mapToShow = newMap;
    }
}           
- (void)viewDidLoad {
    [super viewDidLoad];
    [super viewDidLoad];
    if (mapToShow != NULL) {
      //declare both scrollview and image view
        mapDisplay =[[UIImageView alloc] init];
        mapScrollView = [[UIScrollView alloc] init];
        //set size of both
        mapDisplay.frame = CGRectMake(0, 0, 320, 480);
        [mapScrollView setContentSize:CGSizeMake(mapDisplay.frame.size.width, mapDisplay.frame.size.height)];
        mapScrollView.contentMode = (UIViewContentModeScaleAspectFit);
        mapScrollView.clipsToBounds = YES;
        //set the picture
        [mapDisplay setImage:[UIImage imageNamed:@"Sci.jpg"]];
        //set zoom
        [mapScrollView setMinimumZoomScale:1.0];
        [mapScrollView setMaximumZoomScale:2.0];
        //combine the two
        [mapScrollView addSubview:mapDisplay];
        //set scroll pane to main window
        [self.view addSubview:mapScrollView];
    }
} 
```

它确实进入了 if 语句。我相信这与我如何连接图像视图和滚动视图有关。（我对 iOS 开发人员还有些陌生，但我学得很快）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T14:59:28.137

如果您认为它与您的连接方式有关，那么问题可能出在您的故事板或 nib 文件中。确保您只有一个插座连接到每个属性，并且不要超载您的插座。尝试删除它们并再次将您的插座重新连接到各个属性。

@properties 也应该是

```
@property(nonatomic, retain) IBOutlet UIImageView *mapDisplay;
@property(nonatomic, retain) IBOutlet UIScrollView *mapScrollView; 
```

# vba - 单击图形时，完美放大，然后单击按钮退出？

> ID：15907889
> 
> 赞同：0
> 
> 时间：2013-04-09T16:53:41.557
> 
> 标签：vba, excel, excel-2010

有没有办法通过单击形状来修复缩放。我很擅长 excel，但是我没有要显示的代码。

请帮忙，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:43:00.410

你可以使用这样的东西来缩放和移动：

```
Sub zoom_shift()

Dim SHP As Shape
Set SHP = ActiveSheet.Shapes(1)
Dim siLeft As Single
Dim siTop As Single

siLeft = SHP.Left
siTop = SHP.Top

    ActiveWindow.Zoom = 200

Application.Goto SHP.TopLeftCell, True

End Sub 
```

但是，您可以根据需要进行一些调整。

# sql-server-2008 - 隐藏不包含值的行

> ID：15907891
> 
> 赞同：5
> 
> 时间：2013-04-09T16:54:03.337
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我想在我的报告中隐藏特定字段集中不包含值的行。

这个问题很有帮助

[如何在 SSRS 的任何列中过滤具有空值的行](https://stackoverflow.com/questions/12814117/how-to-filter-rows-with-null-values-in-any-of-its-columns-in-ssrs)

我不明白如何检查多个字段是否为空。

目前，我正在这样做：

![在此处输入图像描述](https://i.stack.imgur.com/e4rY2.png)

在**能见度**下：

![在此处输入图像描述](https://i.stack.imgur.com/xeTqN.png)

我输入了这个表达式：

```
=iif(fields!Jan.Value
+fields!Feb.Value
+fields!Mar.Value
+fields!April.Value
+fields!May.Value
+fields!June.Value
+fields!July.Value
+Fields!Aug.Value
+Fields!Sept.Value
+Fields!Oct.Value
+Fields!Nov.Value
+Fields!Dec.Value="",TRUE,FALSE) 
```

但我收到此错误：

![在此处输入图像描述](https://i.stack.imgur.com/X2FWZ.png)

**如果值为空或空白，我如何隐藏一行？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:39:25.463

您需要使用 AND （​​如果所有值都需要为 0 以隐藏该行），并尝试使用 LEN()

```
=iif(len(Fields!Jan.Value) = 0 AND len(Fields!Feb.Value) = 0 AND len(Fields!Mar.Value) = 0,True,False) 
```

我还将使用通过突出显示该行并使用“属性”窗口而不是通过右键单击菜单访问的 Visibility 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:31:05.840

我知道这个解决方案可能不是最好的，但它有效：

```
=iif(fields!Jan.Value
    +fields!Feb.Value
    +fields!Mar.Value
    +fields!April.Value
    +fields!May.Value
    +fields!June.Value
    +fields!July.Value
    +Fields!Aug.Value
    +Fields!Sept.Value
    +Fields!Oct.Value
    +Fields!Nov.Value
    +Fields!Dec.Value=0,TRUE,FALSE) 
```

我意识到，由于字段都是`int`，我可以将它们加在一起并检查它们是否加起来为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:38:54.663

限定符必须是任何行吗？如果这些都是 OR 语句并更改 ISNOTHING()，我将使用“Switch”语句。“”是根据 SSRS 的东西。看起来你得到了你需要的答案，但如果将来出现这种情况，我通常会这样做：

```
=switch(
 Isnothing(Fields!Jan.Value), TRUE
 Isnothing(Fields!Feb.Value, TRUE
 etc.
 , FALSE) 
```

切换的关键是列必须不同，不能是同一列上面有不同的表达式。

# ember.js - 在 Ember 中使用条件

> ID：15907893
> 
> 赞同：0
> 
> 时间：2013-04-09T16:54:07.747
> 
> 标签：ember.js, handlebars.js, ember-router

Here is my jsfiddle link and I am trying to print below DropDown a message - "Select option B" when any option other than B is selected.

选择选项 B 时，我必须打印 Id 和选项名称

[http://jsfiddle.net/fortm/MGX9k/1/](http://jsfiddle.net/fortm/MGX9k/1/)

发生的事情是“选择选项 B”消息永远不会被打印出来。总是显示 ID 和名称。

因此，Handlebar 条件存在一些问题 -

```
{{#if App.SearchController.selectedB}} 
```

其中，selectedB 是一个函数，当 Option 为 B 时返回 true，但这似乎不起作用..

```
 selectedB: function() {
    return this.get('selectedName.id') == 2 ;
  } 
```

作为一个附带问题，我需要设置 Select Dropdown 的样式，因此我添加了“class”属性。它具有自定义样式，但仍然具有 ember-select 作为样式之一。我们可以在添加新样式时删除 ember CSS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:37:47.163

我在这里看到的问题与条件本身无关，而与您如何使用数据有关。一些东西：

（你可以在这里看到更多：http: [//jsfiddle.net/schawaska/enRhT/](http://jsfiddle.net/schawaska/enRhT/)）

如果你想让你的模板对 做出反应`selectedB`，你必须把它变成一个[计算属性](http://emberjs.com/api/classes/Ember.ComputedProperty.html)，同时指定它的依赖关系，在你的例子中是`selectedName`属性：

```
selectedB: function() {
    return this.get('selectedName.id') == 2;
}.property('selectedName') // This is important 
```

另外，我注意到在您的模板中，您将绑定分配给控制器类而不是实例。考虑更改您的应用程序以包含`Router`，这将允许您以不同的方式设置模型数据。

`App.SearchController.property`使用路由机制，控制器将被分配给您的路由并自动绑定到视图/模板，因此您可以使用`controller`or来代替绑定到`controller.property`：

```
{{view Ember.Select class="my_custom_class"
    contentBinding="controller.content"
    optionValuePath="content.id"
    optionLabelPath="content.firstName"
    selectionBinding="controller.selectedName"}} 
```

这将需要更多的更改。

**设置路由器**

```
App.Router.map(function() {
    this.route('search');
});
// this would require that you either create an IndexRoute 
// to redirect from the root to the SearchRoute, or
// change the route path: this.route('search', { path: '/' }); 
```

**从路由的模型函数而不是控制器返回数据**

```
App.SearchRoute = Em.Route.extend({
    model: function() {
        return [
            {firstName: "Any",  id: 0},
            {firstName: "A",    id: 1},
            {firstName: "B",    id: 2},
            {firstName: "C",    id: 3},
            {firstName: "D",    id: 4},
            {firstName: "E",    id: 5}
        ];
    }
}); 
```

**`{{outlet}}`向应用程序模板添加**

```
<script type="text/x-handlebars">
{{outlet}}
</script> 
```

**使用正确的将模板正文移动到特定模板`controller`**

现在，因为路由提供了控制器和它的数据，你应该能够`controller`在你的 Handlebars 模板中使用这个键，它将引用 SearchController（见下文）。

```
<script type="text/x-handlebars" data-template-name="search">
    {{view Ember.Select class="my_custom_class"
       contentBinding="controller.content"
       optionValuePath="content.id"
       optionLabelPath="content.firstName"
       selectionBinding="controller.selectedName"}}

    {{#if selectedB}}
      <p>Selected: {{controller.selectedName.firstName}}
      (ID: {{controller.selectedName.id}})</p>
    {{else}}
    <p>Select option B</p>
    {{/if}}    
</script> 
```

**固定控制器**

```
App.SearchController = Ember.ArrayController.extend({
  selectedName: null,
  selectedB: function() {
    return this.get('selectedName.id') == 2 ;
  }.property('selectedName')
}); 
```

由于[命名约定](http://emberjs.com/guides/concepts/naming-conventions/#toc_nesting)，您的路线希望您的应用程序有一个`SearchController`（这个确切的名称），这就是它将所有东西连接在一起的方式。如果你的控制器没有实现 a `ArrayController`，它会爆炸，因为你的模型函数现在返回 a`ModelArray`并且它不会绑定到 a `ObjectController`（默认）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:36:35.997

这是一个[工作版本](http://jsfiddle.net/ekidd/MGX9k/11/)。以下是我更改的一些最重要的内容：

1.  我将您的内容设置移到了`SearchRoute`它所属的位置：

    ```
    App.SearchRoute = Ember.Route.extend({
      model: function () {
        return [
          Ember.Object.create({firstName: "Any", id: 0}), 
    ```

2.  我将您的搜索控制器修复为使用`extend`而不是`create`，并创建了`selectedB`一个计算属性：

    ```
    App.SearchController = Ember.ArrayController.extend({
      selectedName: null,

      selectedB: function() {
        // Be careful! If you use Ember Data, the key will be '2', not 2.
        return this.get('selectedName.id') === 2;
      }.property("selectedName.id")
    }); 
    ```

3.  我提供了`SearchController`它自己的模板，并修改了代码以使用相对属性，而不是尝试将控制器作为全局访问。我还连接`contentBinding`到您的搜索控制器，它充当您实际内容的代理。

    ```
    <script type="text/x-handlebars" data-template-name="search">

      {{view Ember.Select class="my_custom_class"
             contentBinding="this"
             optionValuePath="content.id"
             optionLabelPath="content.firstName"
             selectionBinding="selectedName"}} 
    ```

还有其他一些小的变化。

# c# - 二进制流“0”在反序列化时不包含有效的 BinaryHeader 错误

> ID：15907894
> 
> 赞同：5
> 
> 时间：2013-04-09T16:54:11.537
> 
> 标签：c#, deserialization, binaryformatter

在过去两天搜索此问题的答案后，我希望这里有人可以提供帮助。

我使用 VS2012 在 c# 中编写了一个程序，该程序使用 BinaryFormatter 将用户的项目数据保存到 Stream 中，然后再将其保存到文件中。该程序已经使用了一段时间，但是最近用户无法打开他前一天保存的文件。他给我发了文件，我在调试器中得到的错误是：

“二进制流 '0' 不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。”

鉴于用户在前一天保存了数据，序列化和反序列化之间的底层对象结构或格式没有变化。

这个问题之前没有出现过，让我相信它一定是非常间歇性的，因此对象被序列化和反序列化没有明显的问题。

我的问题是：

我对这个错误的理解是序列化数据的格式与反序列化成的对象的格式不匹配。它是否正确？还有其他原因吗？

如果是这样，什么会导致这种间歇性错误？

有没有办法从这个文件中检索数据，即使 BinaryFormatter 认为它的格式不正确？

有没有更安全的方法来保存和加载数据？我已经看到 XmlFormatter 似乎是一个更好的选择，但这将如何帮助确保保存和调用的数据的完整性？

如果有帮助，我用来序列化/反序列化的代码如下：

```
//serialize

SEProjectData serializedProject = serializeProjectData();

Stream stream = File.Open(saveFileDialog1.FileName, FileMode.Create);
BinaryFormatter bFormatter = new BinaryFormatter();
bFormatter.Serialize(stream, serializedProject);
stream.Close();

//deserialize

Stream stream = File.Open(path, FileMode.Open);
BinaryFormatter bFormatter = new BinaryFormatter();

stream.Seek(0, SeekOrigin.Begin);

SEProjectData projectData = (SEProjectData)bFormatter.Deserialize(stream);
stream.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:04:33.093

是的，BinaryFormatter 可能是版本不兼容的（特别是如果您更改字段），但这通常会引发不同的错误。您显示的代码或多或少都很好（我会使用“使用”来确保在异常中迅速关闭）。没有复制就很难评论 - 我在想“损坏的文件”。你有文件吗？它可能是零长度吗？它是否曾在文件系统以外的地方传输或存储过？有多种方法可以弄乱文件内容（请参阅[http://marcgravell.blogspot.com/2013/02/how-many-ways-can-you-mess-up-io.html](http://marcgravell.blogspot.com/2013/02/how-many-ways-can-you-mess-up-io.html)）。

如果要解决版本控制问题，我偏爱protobuf-net，但我很偏颇。不过，它对我们来说非常有效。但这听起来不像通常的版本控制问题。

# regex - 带有特殊字符的正则表达式单词边界

> ID：15907896
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:54:23.077
> 
> 标签：regex

我需要替换带有特殊字符的单词。例子：

```
Regex.Replace("Cap' sa* zeesa*total", @"\bsa*\b", "----") is not working. 
```

输出：

```
"Cap' ---- zeesatotal" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:57:41.907

`*`在正则表达式中具有特殊含义，用于替换`*`您需要`\*`在正则表达式中使用的文字字符或将其放入字符类中。

您还需要`\b`在末尾删除，因为它只会在单词字符和非单词字符之间匹配。这意味着它不会`*`在字符串中的 和 空格之间匹配。`\B`如果您不想匹配紧接在后面的字符`*`是单词字符，您也可以将其更改为。

尝试将您的正则表达式更改为以下内容：

```
@"\bsa\*" 
```

或者：

```
@"\bsa[*]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:32:37.503

应该是这样的：

```
/(?:(?<!\w)([*]\w*+|\w+[*]\w*+))/ 
```

# java - 使用带有spring mvc + hibernate的for循环插入记录

> ID：15907898
> 
> 赞同：1
> 
> 时间：2013-04-09T16:54:34.477
> 
> 标签：java, spring, hibernate, loops, spring-mvc

**[Spring MVC + 休眠]**

**@控制器**

```
@Controller
public class COAMaintenanceController {

protected static Logger log = Logger
        .getLogger(COAMaintenanceController.class);

@Resource(name = "COAMaintenanceService")
private COAMaintenanceService coaMaintenanceService;

@RequestMapping(value = "/addCoaMaintenance", method = RequestMethod.POST)
public @ResponseBody
JsonResponse addCoaCategory(@RequestParam("mainAccount") long mainAccount,
        @RequestParam("subAccount") long subAccount,
        @RequestParam("accountName") String accountName,
        @RequestParam("coaCategoryId") long coaCategoryId,
        @RequestParam("postingType") int postingType,
        @RequestParam("typicalBalance") int typicalBalance,
        @RequestParam("isActive") int isActive) {

    Date sysdate = null;
    JsonResponse response = null;

    try {

        sysdate = new Date();
        response = new JsonResponse();

        COAMaintenanceModel coaMaintenanceModel = new COAMaintenanceModel(
                mainAccount, subAccount, accountName, coaCategoryId,
                postingType, typicalBalance, isActive,
                GetSessionValue.getSysUserId(),
                GetSessionValue.getSysUserIp(), sysdate, 0);

        coaMaintenanceService.AddCOAMaintenance(coaMaintenanceModel);

        response.setStatus("Success");

    } catch (Exception ex) {
        log.error("Exception.." + ex);
        response.setStatus("Fail");

    }

    return response;

}

} 
```

**@服务**

```
@Service("COAMaintenanceService")
@Transactional
public class COAMaintenanceService {

@Resource(name="sessionFactory")
private SessionFactory sessionFactory;

public void AddCOAMaintenance(COAMaintenanceModel obj) {

Session session = sessionFactory.getCurrentSession();
session.save(obj);

}

} 
```

在**控制器**中，我编写循环多次输入记录，但以下不起作用，它只插入一条记录。

```
for(int i=0; i<50; i++){
   coaMaintenanceService.AddCOAMaintenance(coaMaintenanceModel);
} 
```

上述场景中的多条记录如何输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:24:40.920

此时只有一个coaMaintenanceModel，你应该把它放在一个数组中，并按array.length循环。顺便说一句，您不需要用一个成员循环数组

# c# - 在 C# 中打印 Winforms 面板和 gridview

> ID：15907900
> 
> 赞同：0
> 
> 时间：2013-04-09T16:54:38.903
> 
> 标签：c#, winforms

印刷新手，我有一个包含 2 个块的表格。第一个是带有标签和文本框的面板，按 5 行和 2 列排列。下面是一个显示项目的网格视图。我喜欢表格的当前外观并想打印它，只是网格列表也可以转到第二页。请告诉我开始/打印它的最佳方法。

1.  需要从网格中删除第一列，即删除按钮。
2.  如果列表很长，第二页应该有 col.headers

谢谢你。

（我的声望是10，但仍然无法添加img。为什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:30:30.203

我之前写了一个打印数据网格视图内容的类

将此类添加到您的项目中：[打印数据网格视图](https://stackoverflow.com/questions/15879880/show-data-in-report-rdlc/15880192#15880192)

# extjs - 修改 Gridpanel 列

> ID：15907901
> 
> 赞同：0
> 
> 时间：2013-04-09T16:54:40.710
> 
> 标签：extjs, extjs4.1

如何修改网格面板中的列？

最初，我使用空列创建网格面板，因为稍后将动态添加它们。

```
Ext.define( 'My.grid.Panel', {
  extend    : 'Ext.grid.Panel',
  columns: []
  ... 
```

创建和渲染之后`My.grid.Panel`，我现在想在这个面板中添加列。

```
var arGridColumns = [
        Ext.create( 'Ext.grid.column.Column', {
           text: 'A', 
           dataIndex: 'name'
        } ),
        Ext.create( 'Ext.grid.column.Column', {
           text: 'B', 
           dataIndex: 'value', 
           flex: 1
        } )
     ];

myGridPanel.columns = arGridColumns;
myGridPanel..doLayout(); 
```

但这并没有改变任何事情。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:31:16.107

您需要按照您想要的列的顺序创建一个 Columns 数组，然后调用 Grid 的 reconfigure 方法。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure)

# json - 使用经典 asp 连接到 Web 服务

> ID：15907902
> 
> 赞同：1
> 
> 时间：2013-04-09T16:54:43.547
> 
> 标签：json, web-services, asp-classic

我得到了一个从 Classic ASP 编写 JSON 并将信息上传到第三方提供的 Web 服务的项目。

第三方：

连接到 Web 服务：Web 服务通过 HTTP 协议工作。建议此 Web 服务在投入生产后使用安全套接字层 (HTTPS)。Web 服务旨在使用以下 URL：[http ://domainname.com/api/push](http://domainname.com/api/push)

该站点在标头中使用身份验证令牌来防止爬虫干扰 Web 服务。发送数据时，添加一个名为 HTTP_TOKENKEY 的标头，其值为 ABCDEFGHIJK。这是推荐使用 HTTPS 的原因之一。Web 服务将在请求的 POST 中查找 JSON 数据并将 JSON 响应发送回客户端。

我能够毫不费力地生成 JSON，但无法通过经典 ASP 连接到他们的 Web 服务。我必须使用经典的 asp :(

请帮助...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:59:41.223

您可以使用 MSXML.XMLHTTPRequest 通过经典 ASP 发送 SOAP 消息。几年前我就这样做了（我想是 2004 年）。这是一篇文章，展示了如何做到这一点：

[http://www.devarticles.com/c/a/ASP/An-Introduction-To-XML-SOAP-Using-ASP-and-VB6/](http://www.devarticles.com/c/a/ASP/An-Introduction-To-XML-SOAP-Using-ASP-and-VB6/)

皮特

# c# - 当任何 TextBox 的文本发生更改时触发事件处理程序

> ID：15907903
> 
> 赞同：1
> 
> 时间：2013-04-09T16:54:45.927
> 
> 标签：c#, c, winforms, visual-studio-2012, event-handling

我正在构建一个格式非常不同的消息，每次创建或更新一个人的帐户信息时都会发送该消息。我正在从多个选项卡的表单中的许多文本框中生成消息。

计划是在每次打开帐户时将帐户中的所有当前信息加载到新消息中，然后更改已更改的任何文本框的值。

为每个文本框单独执行此操作会很容易但很耗时。

这行得通吗？

```
person_last_name.TextChanged += new EventHandler(AllTextBoxes_TextChanged);
person_first_name.TextChanged += new EventHandler(AllTextBoxes_TextChanged);

private void AllTextBoxes_TextChanged(object sender, EventArgs e) 
```

如果是这样，您如何使用 sender 对象参数来检测哪个 TextBox 触发了消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:14:12.507

如果您的`Xmal`代码如下：

```
<TextBox Name="person_last_name" TextChanged="AllTextBoxes_TextChanged"></TextBox>
<TextBox Name="person_first_name" TextChanged="AllTextBoxes_TextChanged"></TextBox> 
```

您可以像这样检测触发的文本框：

```
 private void AllTextBoxes_TextChanged(object sender, TextChangedEventArgs e)
        {
            string triggered = (e as TextBox).Name;
            if (triggered == "yourtarget")
            {
                //Do some thing with selected
                //(e as TextBox).
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:33:05.530

是的，这应该有效

如果你想对所有文本框做一些不同的事情，你可以使用 switch 语句

```
private void AllTextBoxes_TextChanged(object sender, TextChangedEventArgs e)
{
    string triggered = (e as TextBox).Name;
    switch (triggered)
    { 
    case "name1":
        //somecode
    case "name2":
        //somecode
    //etc
    } 
} 
```

# filter - 使用 awk / grep 从数据库中提取#s，过滤

> ID：15907913
> 
> 赞同：0
> 
> 时间：2013-04-09T16:55:15.663
> 
> 标签：filter, awk, grep

我有一个大型的制表符分隔数据库，如下所示：

```
1       14933   14933   G       A       ID=COSN404397;OCCURENCE=1(lung)  
1       14948   14948   G       A       ID=COSN415697,COSN415698;OCCURENCE=2(urinary_tract)  
1       69537   69537   G       T       ID=COSM536198;OCCURENCE=1(lung)  
1       69538   69538   G       A       ID=COSM75742;OCCURENCE=1(ovary)  
... 
```

我正在尝试使用 awk 或 grep 仅保留 OCCURENCE >= 3 的行（是的，它在整个数据库中拼写错误！），但我似乎无法弄清楚如何最好地拆分/扫描第 6 列...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:04:50.807

这个简短的单线应该适合你。顺便说一句，您当前的示例没有任何行`OCCURENCE>=3`:)

```
 awk -F'OCCURENCE=|\\(' '$2>=3' file 
```

好吧......如果打高尔夫球......`(=`是关键......：D

```
awk -F'[(=]' '$3>2' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:03:30.027

试试这个：

```
$ awk -F\; '{ if (substr($2,11,index($2,")")) >= 3) print $0; }' x.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:05:55.077

一个仍然保持`FS`可用的短衬里：

```
$ awk -F'[(=\t;]' '$9>2' file 
```

# bash - 测试来自给定模式的文件是否存在于 bash 中

> ID：15907914
> 
> 赞同：2
> 
> 时间：2013-04-09T16:55:21.323
> 
> 标签：bash, scripting

如何测试是否存在以给定模式命名的文件（或多个）并根据该测试执行操作？

这是我失败的尝试：

```
[[ { ls ../outputListWorkerPid_* |  wc -l } -ge "1" ]] && echo "ARRRRRR" || && echo "FAIL" 
```

但我收到以下错误：

```
bash: conditional binary operator expected
bash: syntax error near `ls' 
```

另外最好避免`No such file or directory`from`ls`以防不存在。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T17:29:37.617

使用 if 语句：

```
if [ "$(ls *.txt | wc -l)" -ge "1" ];
then
  echo "Yes";
else
  echo "No";
fi; 
```

这是否回答你的问题？

# c# - 将 EF ObjectContext 的更改克隆到另一个新上下文以安全地异步保存更改

> ID：15907915
> 
> 赞同：0
> 
> 时间：2013-04-09T16:55:21.643
> 
> 标签：c#, .net, multithreading, visual-studio-2010, entity-framework

我首先使用没有代码的 EF 4.0，我需要使保存操作异步，问题是 ObjectContext 不是线程安全的，而且我的上下文有很多对象绑定到 WPF UI，我正在考虑克隆的更改我的实体进入另一个上下文并将该上下文安全地保存在另一个线程中，

有没有简单的方法来克隆更改？我知道关键字是 ObjectStateManager，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:02:30.620

我很确定这是不可能的。`ObjectStateManager`是跟踪和存储变化的核心和灵魂，并且与`ObjectContext`上下文密切相关。移植一个只需要手术。从技术上讲，如果不应用大量反射，您将无法克隆一个，因为它的大部分状态都是在内部管理的。然后，`ObjectContext.ObjectStateManager`没有二传手。

您的问题的根源是每个视图都有一个上下文（至少，甚至可能是一个全局上下文？）。每个视图的上下文是富客户端应用程序的可行选项，但需要异步处理会更改参数。较长的上下文生命周期不再是一种选择。

一种解决方案可能是将（断开连接的）视图模型绑定到 UI，而不是实体对象，并在单独的线程（嗯，`Task`）中实例化上下文以保存更改。

EF 6（现在处于 alpha 版本）中的另一个新功能可能会让您感兴趣：[内置 async](http://odetocode.com/blogs/scott/archive/2012/08/28/async-in-entity-framework-6-0.aspx)。我还没有尝试过它，但它看起来很有希望。

# java - OSGi 服务的 unbind 方法中的全局变量为 null

> ID：15907918
> 
> 赞同：0
> 
> 时间：2013-04-09T16:55:31.627
> 
> 标签：java, service, osgi, equinox, declarative

我的应用程序基于 OSGi (Equinox)。OSGi 服务通过在适当的类中定义组件 XML 和绑定/取消绑定方法来绑定另一个服务。

在 unbind 方法中，应该检索全局 String 变量（与 unbind 方法相同的类）的值。

奇怪的是，那里的 String 属性为 null，尽管该属性之前肯定是设置过的。这是什么原因？我怎样才能得到我设置的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:05:15.330

可能的原因是您的实例或类与您想象的不同。只需在写入和读取该变量时设置一个断点，或者使用一些调试信息将其打印出来的 set/get 方法。

问之前你真的调试过这个问题吗？

# html - 垂直居中 动态基于行数？ 我创建了一个 JS Fiddle 来演示我的问题：http: //jsfiddle.net/pqTqH/ 如何更新我的 CSS 以使表格垂直居中而不设置height表格或 a top-margin？即使只有 1 行，我也希望表 问问题 问问题 2013-04-09T16:55:49.277 9553 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我创建了一个 JS Fiddle 来演示我的问题：http: //jsfiddle.net/pqTqH/ 如何更新我的 CSS 以使表格垂直居中而不设置height表格或 a top-margin？即使只有 1 行，我也希望表格保持居中。最终，我只需要它是动态的，这样我就可以通过 Jquery 将行添加到我的表中，并且该表将保持居中（垂直和水平）在<div>. 注意：总是至少有一行，但不超过 15 行，因此表格应始终放在<div>. 将您的表放在另一个表中，如以下代码示例中所示： <div id="right"> <table style="vertical-align: middle; height: 100%; width: 100%;"> <tr> <td> // your table </td> </tr> </table> </div> htmlcsshtml-tablevertical-alignment 4 3 回答 3 This answer is useful 7 有一个简单的修复 using table-cell，您在小提琴中暗示过： #right { height: 450px; width: 50%; background-color: #CCCCFF; font-family:"Trebuchet MS", Arial, Helvetica, sans-serif; font-size: 12px; line-height: 14px; color: #333; display: table-cell; vertical-align: middle; } 在您的原始示例中，您声明float: leftand 因此div#right不会像 a 那样表现，table-cell因为它的display值被计算为 be block，因此您失去了垂直对齐控制。 参考：要了解更多关于计算机价值的信息display，请参见： http ://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo 于 2013-04-09T18:04:22.303 回答 This answer is useful 3 将您的表放在另一个表中，如以下代码示例中所示： <div id="right"> <table style="vertical-align: middle; height: 100%; width: 100%;"> <tr> <td> // your table </td> </tr> </table> </div> 于 2013-04-09T17:00:24.903 回答 This answer is useful 1 我通常通过 jQuery 中的 onload/window.resize 事件来执行此操作，因为我不必更改 DOM 的布局方式或与 CSS 对抗。 JSFiddle $(function() { centerTable(); $(window).resize(centerTable); }); function centerTable() { var right = $('#right'); var table = $('#right table'); $('#right table').css('margin-top', ((right.height() - table.height()) / 2) + 'px'); } 我已经使用 jquery onload 事件更新了您的 jsFiddle 示例。如果您不关心窗口调整大小，您可以在 onload 事件中运行一次代码。通过不使用 2 个变量，这也可以缩短为 1 个衬里。 于 2013-04-09T17:05:14.967 回答 Related 1 macos - Lazarus OsX 中的 Flash 3 javascript - 函数内的 JavaScript 嵌入函数 1 c# - C++ NamedPipeClientStream 发送数据 1 c++ - ZMQ 轮询不起作用 2 python - 不一致的 cPickle 3 c# - 我可以清除 using 块内的外部变量吗？ 3 javascript - 过滤地址 url 2 html - 浮动 ::before 内容而不换行 3 php - 无法在 html/php 中放置我想要的表格 1 asp.net-mvc-4 - 在 mvc 4 对象列表中进行“内联”编辑 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15907922
> 
> 赞同：3
> 
> 时间：
> 
> 标签：html, css, html-table, vertical-alignment

我创建了一个 JS Fiddle 来演示我的问题：http: [//jsfiddle.net/pqTqH/](http://jsfiddle.net/pqTqH/)

如何更新我的 CSS 以使表格垂直居中**而不**设置`height`表格或 a `top-margin`？即使只有 1 行，我也希望表格保持居中。最终，我只需要它是动态的，这样我就可以通过 Jquery 将行添加到我的表中，并且该表将保持居中（垂直和水平）在`<div>`.

**注意：**总是至少有一行，但不超过 15 行，因此表格应始终放在`<div>`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T18:04:22.303

有一个简单的修复 using `table-cell`，您在小提琴中暗示过：

```
#right {
    height: 450px;
    width: 50%;
    background-color: #CCCCFF;
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 12px;
    line-height: 14px;
    color: #333;
    display: table-cell;
    vertical-align: middle;
} 
```

在您的原始示例中，您声明`float: left`and 因此`div#right`不会像 a 那样表现，`table-cell`因为它的`display`值被计算为 be `block`，因此您失去了垂直对齐控制。

参考：要了解更多关于计算机价值的信息`display`，请参见：
[http ://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo](http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:00:24.903

将您的表*放在*另一个表中，如以下代码示例中所示：

```
<div id="right">
    <table style="vertical-align: middle; height: 100%; width: 100%;">
        <tr>
            <td>
               // your table
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:05:14.967

我通常通过 jQuery 中的 onload/window.resize 事件来执行此操作，因为我不必更改 DOM 的布局方式或与 CSS 对抗。

[JSFiddle](http://jsfiddle.net/pqTqH/4/)

```
$(function() {
    centerTable();
    $(window).resize(centerTable);
});

function centerTable()
{
    var right = $('#right');
    var table = $('#right table');
    $('#right table').css('margin-top', ((right.height() - table.height()) / 2) + 'px');
} 
```

我已经使用 jquery onload 事件更新了您的 jsFiddle 示例。如果您不关心窗口调整大小，您可以在 onload 事件中运行一次代码。通过不使用 2 个变量，这也可以缩短为 1 个衬里。

# php - 试图弄清楚如何在 Redis 中计算日期范围

> ID：15907932
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:56:27.037
> 
> 标签：php, database-design, redis

我正在尝试存储类似以下内容...

我有一个有关键字的系统，这些关键字可以是对的，也可以是错的。我想存储每次有人输入错误的关键字（以及他们所在的特定应用程序和时间戳）。

`timestamp - application#1`我希望它在它自己的钥匙里面。

然后我需要能够去“好吧，有多少人在尝试使用应用程序 #1 的 TIMESTAMP1 和 TIMESTAMP2 之间弄错了关键字”

有没有其他方法可以做到这一点？如果最后一部分（尝试使用应用程序#1）不起作用，我怀疑这不是 SQL。然后它是否可以返回应用程序#1 的值，以便我可以在 PHP 中完成最后一部分。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:59:00.653

Redis 不支持密钥通配符，因此您必须选择密钥客户端。

这意味着您必须获得成批的密钥并将结果组合在一起；如果这并不总是可能的（例如，大范围，ms 键命名解析......）你应该考虑保持聚合（每小时关键字/每天关键字......）

如果您使用集合/排序集合来存储关键字，请查看集合特定命令（特别是 UNION / UNIONSTORE），因为它们可能会派上用场:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T23:03:07.803

我知道这是一个老问题，但我有一个解决问题的方法`sorted sets`。

*   您将有不同`sorted sets`的组合`appName`和，`wrong keyword`例如`myapp1:wrongword`, `myapp2:anotherwrongword`, `myanotherapp:yetanotherwrongword`... 将是键。
*   每当用户在应用程序中输入错误的关键字时，您将使用`ZADD`with `unique identifier`（在应用程序层中创建，例如 UUID）作为值，使用 a `timestamp`（输入时间）作为`score`排序集。标识符必须是唯一的，因为如果您输入用户 ID，那么每当同一用户在不同时间在同一应用程序中输入错误的关键字时，它将覆盖`score`已排序集的。
*   然后你可以`ZCOUNT`用来计算

> 有多少人在尝试使用应用程序 #1之间`TIMESTAMP1`的关键字错误”`TIMESTAMP2`

为简单起见；我使用小数字作为时间戳（`score`），您的应用名称是`myapp`，错误的关键字是`wrong1`。任意字母是在您的应用程序层生成的唯一 ID。

```
127.0.0.1:6379> ZADD myapp:wrong1 123 abcdef 123 defg 126 xyz 132 qpr 145 ypz
(integer) 5
127.0.0.1:6379> ZRANGE myapp:wrong1 0 -1 WITHSCORES
 1) "abcdef"
 2) "123"
 3) "defg"
 4) "123"
 5) "xyz"
 6) "126"
 7) "qpr"
 8) "132"
 9) "ypz"
10) "145"
127.0.0.1:6379> ZRANGEBYSCORE myapp:wrong1 123 127
1) "abcdef"
2) "defg"
3) "xyz"
127.0.0.1:6379> ZCOUNT myapp:wrong1 123 127
(integer) 3
127.0.0.1:6379> ZCOUNT myapp:wrong1 123 126
(integer) 3
127.0.0.1:6379> ZCOUNT myapp:wrong1 123 125
(integer) 2 
```

在使用`ZCOUNT`时，您可以使用时间戳间隔来获取用户总数，如此处[所述](https://redis.io/commands/zcount)。

# file - 批处理脚本（如果存在） xcopy

> ID：15907933
> 
> 赞同：1
> 
> 时间：2013-04-09T16:56:28.757
> 
> 标签：file, batch-file, xcopy

我需要一个批处理脚本和`xcopy`. 我有一个文件夹，里面有很多不同的文件夹。例如：“测试”是主目录，在里面我有`New folder 1`, `New folder 2`, `New folder 3`... 每周这些文件夹都必须复制到不同的服务器。

我的脚本是：

```
if exist "%dir%\New folder 1" (
  xcopy %dir%\New folder 1 C:\Users\user1\New folder1 /i /q /s /y /z
  echo New folder 1 copied successfully
) 
if exist "%dir%\New folder 2" (
  xcopy %dir%\New folder 2 C:\Users\user1\New folder2 /i /q /s /y /z
  echo New folder 2 copied successfully
) 
```

我需要更新我的脚本以向我显示`cmd`何时`xcopy`无法复制某些文件的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:02:55.740

我希望我理解正确，如果我错了，请告诉我。

如果存在与权限等有关的问题，XCopy 应该自己抛出错误。如果只是某些东西不存在，只需在`ELSE`您的`IF`语句中添加一个并回显您想要的任何错误。

旁注：您的脚本中有错字，您正在检查是否存在`New Folder 1`两次，而不是`New Folder 1`和`New Folder 2`. 不确定这是否只是在 SO，但我想我会告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:34:21.477

Xcopy 返回最后一个操作的错误代码，您可以使用`&&`and`||`运算符检查：

```
@echo off &setlocal
if exist "%dir%\New folder 1" xcopy "%dir%\New folder 1" "C:\Users\user1\New folder1" /i /q /s /y /z && echo New folder 1 copied successfully || echo copied NOT successfully
if exist "%dir%\New folder 2" xcopy "%dir%\New folder 2" "C:\Users\user1\New folder2" /i /q /s /y /z && echo New folder 2 copied successfully || echo copied NOT successfully 
```

注意：始终用双引号将路径名与空格放在一起。

# c# - 如何在 C# 中使数据读取和预处理更快

> ID：15907934
> 
> 赞同：0
> 
> 时间：2013-04-09T16:56:36.070
> 
> 标签：c#, multithreading

我有一个预处理数据的算法。它适用于 *.arff 格式。[arff 填充](http://repository.seasr.org/Datasets/UCI/arff/)。我有一个类属性，其中有 arff 文件的结构。在一个字符串中，我记录了属性的名称、它可以采用的值以及它们的出现。用数值记录最小最大平均值和标准偏差。对于小文件，它工作得很好，但对于大文件，它非常非常慢。该文件可以超过 10 GB。

我尝试了很多选项 - MemoryMapped Filles、BufferedStream。我认为问题在于长时间的预处理，但我不知道如何让它更快。我尝试了线程，但我不知道如何。

```
private void readDataArff()
{
   string line = "";
   using (StreamReader file = new StreamReader(openFileDialog1.FileName))
   {
      string[] data;
      while ((line = file.ReadLine()) != null)
      {
         if ((line.Contains('%')) || (line.Contains('@')) || (line.Contains("") && (!line.Contains(','))))
         continue; //skip header

         data = line.Split(',');

         for (int j = 0; j < attrList.Count; j++)// 
         {
            attrList[j].FilePath = openFileDialog1.FileName;
            attrList[j].Index = j;
            if (attrList[j].Type1 == "STRING")
            {
               foreach (var item in attrList[j].Values)
               {
                  if (item.Name == data[j])
                  {
                     item.Count += 1;
                     break;
                  }
               }
            }
            else if ((attrList[j].Type1 == "REAL" && (line != "") && (!line.Contains('@'))) ||
              (attrList[j].Type1 == "REAL" && (line != "") && (!line.Contains('@'))))
            {
               if ((data[j] == "?") || (data[j] == "") || (data[j] == " "))
               continue;
               attrList[j].Count += 1;
               attrList[j].Sum = double.Parse(data[j]) + attrList[j].Sum;
               double tmp = double.Parse(data[j]);
               if (attrList[j].Max < tmp)
                  attrList[j].Max = tmp;
               if (attrList[j].Min > tmp)
                  attrList[j].Min = tmp;
             }
          }
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:18:09.473

1.  你可以试试 BufferedStream 类，它是 IStream 的缓冲实现。

2.  您可以优化一些代码。预先评估一些值，即`double.Parse(data[j])`

3.  您也可以编写手动方法 string.Contains(char[] chrToSeek) 将只扫描一次字符串。

# mysql - 太多 DrupalDatabaseCache::set

> ID：15907936
> 
> 赞同：0
> 
> 时间：2013-04-09T16:56:41.693
> 
> 标签：mysql, caching, drupal, drupal-7

我用 drupal 7 和几个模块、块和视图制作的网站今天开始变得非常慢。

我正在检查开发，我看到 600 个空页面查询（这意味着没有块、视图或内容）。许多这样的查询是由“DrupalDatabaseCache::set”进行的，我启用了缓存并且有 30 分钟的生命周期，所以我第二次加载空页面时我必须看到缓存获取但未设置。

任何人都可以帮助我理解为什么这个网站有这么多查询以及为什么它不断设置缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:02:22.487

我发现那是视图，一个块生成 100 个查询...

我在这里寻求解决方案：[https ://stackoverflow.com/questions/15944407/simple-drupal-view-generate-up-to-100-queries](https://stackoverflow.com/questions/15944407/simple-drupal-view-generate-up-to-100-queries)

# .htaccess - 虚拟目录重定向

> ID：15907937
> 
> 赞同：0
> 
> 时间：2013-04-09T16:56:42.483
> 
> 标签：.htaccess, mod-rewrite

我正在开发一个需要使用虚拟目录的链接系统。我设法设置了一个允许用户访问 domain.com/SjkpP/ 的系统，这与 domain.com/link.php?link=SjkpP 的效果相同，尽管尾部斜杠是必要的，并且当访问 domain.com 时/SjkpP 发生 404 错误。对于编辑和添加到 htaccess 文件，我非常糟糕，所以我想知道我可以添加什么来允许访问链接而不使用尾部斜杠？

当前的 .htaccess

```
RewriteEngine on
RewriteRule ([A-Za-z0-9]+)/ link.php?link=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:23:15.477

如果你想让尾部斜杠可选，你可以使用它来代替：

```
RewriteRule ^([A-Za-z0-9]+)/?$ link.php?link=$1 
```

这使得最后的斜线是可选的（使用正则表达式`?`零或一匹配量词），但如果斜线出现，则不会捕获斜线（因为斜线出现在捕获虚拟目录名称的括号之外）。

请注意，由于您使用的是静默重定向，因此访问者的 Web 浏览器会认为它位于不是公共根目录的目录中。因此，任何指向页面装饰（例如图像、CSS 或 JavaScript 文件）的相对路径（不以正斜杠开头）都会导致浏览器尝试不存在的子目录，但什么也得不到。但是，您当前的修复导致浏览器认为它位于子目录中，因此如果到目前为止您没有遇到任何问题，那么用这个替换您的规则应该不会导致新问题。

# python - 如何有两个事件循环？

> ID：15907941
> 
> 赞同：3
> 
> 时间：2013-04-09T16:56:51.047
> 
> 标签：python, pyside

我正在使用 PySide 和这个 IRC 库（[https://bitbucket.org/jaraco/irc](https://bitbucket.org/jaraco/irc)）在 Python 中制作一个 GUI IRC 客户端。PySide 有一个处理 GUI 事件的主循环。IRC 库也有一个循环来处理 IRC 事件。两个循环在调用后都会阻塞。我该怎么办？它只是在不同的线程中运行它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:11:45.830

客户端类通过,和参数`IRC`支持外部主循环集成。在 PySide 中，您将使用这些来创建 a 、销毁它并分别设置 a ：`on_connect``on_disconnect``on_schedule``QSocketNotifier``QTimer`

```
class PySideIRCClient(IRC):
    def __init__(self):
        self.socket_notifiers = {}
        return IRC(self.on_connect, self.on_disconnect, self.on_schedule)

    def on_connect(self, socket):
        notifier = QtCore.QSocketNotifier(socket, QtCore.QSocketNotifier.Read)
        notifier.activated.connect(self.socket_activated)
        self.socket_notifiers[socket] = notifier

    def socket_activated(self, socket):
        self.process_data([socket])

    def on_disconnect(self, socket):
        self.socket_notifiers[socket].setEnabled(False)
        del self.socket_notifiers[socket]

    def on_schedule(self, seconds):
        QtCore.QTimer.singleShot(seconds * 1000, self.process_timeout) 
```

然后`PySideIRCClient`将其与 PySide Qt 事件循环集成，因此您只需使用`QtGui.QApplication.exec_()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:28:35.260

from that client 是 from的`IRCServer`派生类`TCPServer`，它提供`serve_forever`启动循环的方法。有一种替代方法，`handle_request`它将处理单个请求（如果有的话）。

`serve_forever`基本上这样做，在一个循环中（它实际上调用了一个较低级别的方法）。您可以设置`QTimer`轮询 IRCserver，例如。每 0.5 秒（默认为`serve_forever`）。还将服务器的超时设置为 0，以避免最终锁定并完成。

# javascript - 单页应用程序的问题

> ID：15907949
> 
> 赞同：2
> 
> 时间：2013-04-09T16:57:08.563
> 
> 标签：javascript, single-page-application

我发现单页应用程序 (SPA) 存在一些问题。我想知道这些案件是如何处理的。问题：

1.  当用户的浏览器**禁用 JavaScript**时，他将无法使用该应用程序。
2.  由于所有/大部分内容都是由 JavaScript 呈现的，**搜索引擎无法索引**我们应用程序的内容，因此带有 SPA 的网站的排名会低得多。
3.  我们只有一个页面，因此**可以在同一页面上定义元数据，**但是根据不同的路由（谈论主干），我们可能希望将**不同的元数据与不同的路由相关联，**以便搜索引擎可以在用户搜索某个关键字时将我的网站放在与我的应用程序有关。

我缺少任何细节吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T15:29:46.983

我正在打电话，所以我会在短时间内保留我的两美分。

1.  没有 JavaScript，没有适合您的 SPA。如果用户想要网络所能提供的最好的，你需要一些 JavaScript 来做到这一点。

2.  3\. 我将 SPA 视为站点内的应用程序。如果您想要您的 SEO，请将其放在欢迎页面和产品描述页面中。SPA 是应用程序。此外，减少对 SEO 的担忧。如果你做出了好的事情，那就大声说出来，不要再担心搜索引擎的诡计了。

# java - 在 JSP 上显示 JSON 信封

> ID：15907953
> 
> 赞同：0
> 
> 时间：2013-04-09T16:57:18.167
> 
> 标签：java, javascript, json

我有一个 Spring`@Controller`正在使用现有的`ArrayList`并创建一个 JSON 信封。当我在 Spring 控制台中显示 JSON 信封时，我看到我想要的数据在那里。当我在 Firefox 的 FireBug 中查看相同的 JSON 信封时，我也看到了我想要的数据。

我正在尝试使用 JavaScript 在 jsp 页面上显示信封，但我真的不知道如何开始。

在代码的其他模块中，有一些区域是从数据库中获取信息，使用 YUI2 将其与 DataTable 一起显示。它还使用 JSON 信封，并且可以正常工作。我正在尝试复制它以在 JSP 页面上仅显示 JSON 文本字符串。我不知道我是否需要使用 YUI2，或者我是否可以使用 JavaScript 来访问 JSON 信封。

我是 Java 和 JSON 以及 Spring 环境的新手，所以我什至不知道使用哪种 JavaScript 语法来访问 JSON 信封，更不用说显示它了。我一直在谷歌搜索以找到答案，但到目前为止，大部分都在我的脑海中。

我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:27:57.157

你的问题很不清楚。

如果您只是想显示 JSON 的文本，那么您根本不需要使用 javascript。只需用于`<c:out>`将 JSON 字符串输出到纯 HTML 页面的相关部分。

如果您想在客户端生成动态 HTML，您将使用 Javascript。那时您可能希望 Javascript 使用 XMLHttpRequest 对象来调用服务器以请求 JSON。然后，Javascript 将负责动态地将 JSON 响应转换为可以显示的内容……您肯定需要一个客户端 JS 框架来帮助解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:03:27.613

要解析检索到的 JSON，您可以使用jQuery 的[$each方法](http://api.jquery.com/jQuery.each/)

```
var obj = {
 "Name": "Robert",
 "Counrty": "USA",
 "Address" : {"Apartment":"111","City":"Atlanta","State":"GA","Zip":"30005" }
 };

$.each( obj, function( key, value ) {
 alert( key + ": " + value );

if(typeof(value)=="object")
{
    $.each( value, function( key, value ) {
          alert( key + ": " + value );
        });
 }
}); 
```

如果您有更复杂的 JSON，那么您必须为每个复杂类型重复 $each，就像我为 Address 所做的那样。

然后您可以使用 Key 值从 JSON 对象中获取数据。

工作[示例](http://jsfiddle.net/H9e7P/)

# c# - 自动完成：使用线程的 WCF 异步填充

> ID：15907963
> 
> 赞同：3
> 
> 时间：2013-04-09T16:57:57.937
> 
> 标签：c#, .net, wcf

我有一个“自动完成”文本框，每次按下一个键时都会调用一个 WCF 方法。反过来，WCF 服务器将运行 SQL 查询，返回前 15 个结果并发送它们。但是，这会导致在框中键入时出现明显的延迟。

我要做的是：

*   当触发 text_changed 事件时创建一个新线程，使用 Stopwatch.ElapsedMilliseconds 使该线程等待 1000 毫秒。在这段等待时间内，线程可以永久停止。
*   如果没有停止，线程会将请求发送到服务器（并重新填充自动完成框）。
*   一旦触发了新的“text_changed”事件，我将停止当前线程并启动一个新线程。

有没有更好的方法或者这是要走的路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:10:04.123

所以基本上在请求结果之前等待 1 秒让用户停止输入。

这是节省服务器资源的一个很好的解决方案，但您实际上是通过让用户等待至少 1000 毫秒来增加延迟。

我的猜测是，您最初的问题是这是一个 winforms 应用程序，并且您发出的请求默认是同步的。结果，当应用程序等待响应时，文本框不接受用户输入。只需使调用异步就可以解决该问题，而不会使输入速度变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:05:58.457

另一种方法是使用 Rx (Reactive Extensions) 框架来封装具有一些非常有趣的特性的 automplete。

使用 Rx，您可以编写（多个事件源），限制用户输入，以免淹没源，此外，如果用户在搜索框中键入更多内容（TakeUntil），您可以忽略旧结果。

更多信息：

[Rx：治愈你的异步编程忧郁症](http://channel9.msdn.com/Blogs/codefest/DC2010T0100-Keynote-Rx-curing-your-asynchronous-programming-blues)

[使用 Reactive Extensions for .NET 治愈异步忧郁症](http://download.microsoft.com/download/C/5/D/C5D669F9-01DF-4FAF-BBA9-29C096C462DB/Rx%20HOL%20.NET.pdf)

例子：

[SO：RX 自动完成框](https://stackoverflow.com/questions/5438639/rx-autocompletebox)

```
RxProperty = Observable.FromEvent<TextChangedEventHandler, TextChangedEventArgs>(
        h => new TextChangedEventHandler(h),
        h => AssociatedObject.TextChanged += h,
        h => AssociatedObject.TextChanged -= h)

        .Select(t => ((TextBox)t.Sender).Text)

        .Throttle(TimeSpan.FromMilliseconds(400))

        .SubscribeOnDispatcher()
        .Take(10)
        .TakeUntil(AssociatedObject.TextChanged ); 
```

代替 FromEvent，您可以使用 FromAsync 并使用代理 Beginxxx Endxxx 方法。

# php - 允许用户使用插入查询将信息添加到他们的个人资料中

> ID：15907966
> 
> 赞同：0
> 
> 时间：2013-04-09T16:58:18.907
> 
> 标签：php, sql, phpmyadmin, user-profile, insert-query

我使用以下功能：

```
function Add_Oddjob ($Add_Oddjob){
            global $MemberID;
            $update = array();
            array_walk($Add_Oddjob, 'array_sanitize');

            foreach($Add_Oddjob as $field=>$data){ //loop through update data in Add_Oddjob.php
                $update[] = '`' . $field . '` = \'' . $data . '\''; 
            }
            mysql_query("INSERT INTO `oddjob`($field) VALUES ($data)"); 
```

Add_Oddjob.php

```
if (isset($_POST['OddJobName']) && isset($_POST['Description']) && isset($_POST['DaysAvailable']) && empty($errors) === true){//if (empty($_POST) === false && empty($errors) === true) { //if (isset(empty($_POST['OddJobName'])) && isset(empty($_POST['Description'])) && isset(empty($_POST['DaysAvailable'])) === false && empty($errors) === true)
            $daysavailable='';
            foreach ($_POST['DaysAvailable'] as $value)
            {

            $daysavailable .=$value." ";
            }

            $Add_Oddjob = array (
                'MemberID'      => $MemberID,
                'OddJobName'    => $_POST['OddJobName'],
                'Description'   => $_POST['Description'],
                'DaysAvailable' => $daysavailable, 

                );

                Add_Oddjob ($Add_Oddjob);

                if(success){
                 header('Location: member.php?username='.$username);
                 exit ();
                }
            } else if (empty($errors) === false){
                //otherwise output errors
                echo output_errors($errors);
            } 
```

但是当我以用户身份登录并输入数据时，我收到以下错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`MemberID`在第 1 行的“WHERE =”附近使用正确的语法

表`MemberID`中`Oddjob`的 是成员表中的主键。这个想法是每个成员可以在零工表中拥有多个零工。我可能需要做某种加入吗？

另外，如果我尝试在 phpmyadmin 中插入查询：

```
 INSERT INTO `oddjob`(`OddJobName`, `Description`, `DaysAvailable`) VALUES (painter,test,Friday) WHERE `MemberID` = 35 
```

我收到此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `MemberID` = 35' at line 1 
```

任何帮助都会很棒！

编辑

所以我从查询中删除了 WHERE 子句，因为我没有意识到我不能在插入查询中使用它。现在，如果我回显我看到的查询：`INSERT INTO`oddjob`(DaysAvailable) VALUES (Wednesday )`出于某种原因它没有拾取任何其他字段。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:02:20.440

我认为你错过了引号..试试这个

```
 INSERT INTO `oddjob`(`OddJobName`, `Description`, `DaysAvailable`) VALUES (painter,test,Friday) WHERE `MemberID` = 35 
```

您可以使用更新语句而不是插入 .. 请查看此链接

[如何在 MySQL Insert 语句中添加 where 子句？](https://stackoverflow.com/questions/2349993/how-to-add-a-where-clause-in-a-mysql-insert-statement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:41:36.483

我无法理解 Insert 语句中 where 子句的用途。您是否尝试在成员 ID 35 之后插入记录？您不能将条件语句与插入查询一起使用。

只需删除 where 子句，我想它应该对你有用

```
INSERT INTO `oddjob`(`OddJobName`, `Description`, `DaysAvailable`) VALUES (painter,test,Friday) 
```

# soap - 如何在 jax-ws 客户端中删除自动生成的类

> ID：15907973
> 
> 赞同：0
> 
> 时间：2013-04-09T16:58:42.733
> 
> 标签：soap, netbeans, jax-ws, webservice-client

我有一个在 NetBeans 中使用 jax-ws 创建的 Web 服务。当我从 wsdl 文件创建soap 客户端时，Netbeans 会生成用于序列化的映射类。

我的问题是我不想要它们。我自己编写了它们，它们用于应用程序的其他部分。我尝试了一切来使用我的类而不是自动生成的类来发送 SOAP 消息，但没有成功。繁琐的解决方案是将数据从一个类复制到另一个类，然后发送消息，但我的类有大约 20 个子类，所以我非常想跳过这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:32:40.307

使用 JAXB[`episode`](http://blog.bdoughan.com/2011/12/reusing-generated-jaxb-classes.html)选项，它基本上允许您指示 JAXB 重用包中的类。*您在剧集*文件中指定所需的包。“episode”只是 jaxb 绑定文件的一个花哨的名称，它与您的常规 jaxb 配置文件并没有太大区别。你的剧集文件看起来像这样（绑定文件摘自 Blaise Doughan 的博客）

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <bindings version="2.1" xmlns="http://java.sun.com/xml/ns/jaxb">
   <bindings scd="x-schema::tns"
    xmlns:tns="http://www.example.org/Product">
    <schemaBindings map="false"/>
    <bindings scd="tns:product">
      <class ref="com.you.yourclass"/>
    </bindings>
   </bindings>
</bindings> 
```

将文件另存为`.episode`文件并像这样在您的 Netbeans 项目中进行配置。我在这里假设您已经在 Netbeans 中运行了**从 WSDL**向导创建 Web 服务

1.  右键单击项目中的**Webservice**节点。导航到**WSimport 选项选项**卡

2.  在**Jaxb(xjc) 选项**框架下，添加以下内容

![自定义 WSImport](https://i.stack.imgur.com/Qw23t.png)

（其中`myepisodefile.episode`指的是您之前创建的剧集文件。确保该文件在您的项目中可用）

# javascript - 在 Twitter Bootstrap 中处理选项卡激活事件

> ID：15907974
> 
> 赞同：1
> 
> 时间：2013-04-09T16:58:46.273
> 
> 标签：javascript, twitter-bootstrap

我在 HAML 中有这段代码：

```
%ul.nav.nav-tabs
  %li.active
    first tab
%ul.nav.nav-tabs
  %li.active
    second tab 
```

我该如何做我在 jQuery 中做的这样的事情：

```
$('ul.nav.nav-tabs').on('tabsactivate', myFunction); 
```

我应该使用哪个选择器？或者我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T17:06:00.813

我不记得我自己的问题了，呵呵。

但我想我指的是：

```
$('a[data-toggle=tab]').on('shown', myFunction) 
```

# delphi - 如何通过指定用户会话从服务运行 ocx

> ID：15907977
> 
> 赞同：0
> 
> 时间：2013-04-09T16:58:50.127
> 
> 标签：delphi, delphi-xe2

我想创建运行一个 delphi 服务，该服务创建一个带有 wordOcx 的 Tform 来编写一个文档，到目前为止，我没有任何问题，但我希望该服务在特定用户会话中运行 (word.exe) 进程.

谢谢科尔基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:17:10.033

服务无法直接指定进程外 COM 对象在哪个用户会话下运行。您必须为服务运行创建一个单独的 .exe 文件，并让该 .exe 根据需要访问 WordOcx，而不是直接在服务内部访问它。然后，该服务可用于`CreateProcessAsUser()`在特定用户会话中运行 .exe。

# javascript - 为什么使用 $.deferred 和 $.ajax 时 jQuery.then() 的行为不同

> ID：15907980
> 
> 赞同：5
> 
> 时间：2013-04-09T16:58:55.067
> 
> 标签：javascript, jquery, jquery-deferred

我一直试图了解 jQuery Deferred 对象。我的目的是检查每个 ajax 响应（成功/失败）。我想在不干扰其他声明典型 $.ajax().done().fail() 请求的代码的情况下做到这一点。

我已经使用 $.ajaxPrefilter() 在执行之前获取每个 ajax 请求。使用 jqXHR 对象上的 .then() 方法，我设法添加了一个函数，该函数将在原始 $.ajax() 调用上的 .done() 方法之前调用

下面的代码将打印出以下内容：

> def 完成
> def 然后
> 第二个 ajax 预过滤器 然后
> 第二个 ajax 完成
> 第二个 ajax 然后
> ajax 完成
> ajax 然后

我不明白为什么先执行预过滤步骤。我原以为它会最后执行，或者根本不执行。

这种行为是我想要的，但我不明白为什么。

```
// this is a typical usage of deferred with two done functions added, the second via .then()
var def = $.Deferred();
def.done(function(){
    document.write("def done<br>");
});
def.then(function(){
    document.write("def then<br>");
});
def.resolve();

// this is a typical ajax request with a done function added, followed by another using .then()
$.ajax("/echo/json/").done(function(){
    document.write("ajax done<br>");
}).then(function(){
    document.write("ajax then<br>");
});

// for the third request i intercept and call the .then() method 
$.ajaxPrefilter( 
    function( options, originalOptions, jqXHR ) {
                jqXHR.then(function(data, textStatus, jqXHR){
                     document.write("2nd ajax prefilter then<br>");
                    });
            });

// create a typical ajax request. these will be executed after the prefilter .then()
$.ajax("/echo/json/").done(function(){
    document.write("2nd ajax done<br>");
}).then(function(){
    document.write("2nd ajax then<br>");
}); 
```

提前感谢您的帮助

更新： - - - - - -

从@Bergi 响应中，下面的代码演示了如何在 done() 之前调用 $.ajaxPrefilter()。

```
$.ajaxPrefilter( 
    function( options, originalOptions, jqXHR ) {
            document.write("prefilter function within $.ajax call<br>");
                jqXHR.then(function(data, textStatus, jqXHR){
                     document.write("2nd ajax prefilter then<br>");
                    });
            });

var functionToRunWhenDoneIsCalled = function() {
    document.write("done is called function<br>");
    return function(){
       document.write("2nd ajax done<br>");
    }
}

$.ajax("/echo/json/").done(
    (functionToRunWhenDoneIsCalled)()
).then(function(){
    document.write("2nd ajax then<br>");
}); 
```

这输出：

> $.ajax 调用中的预过滤器函数
> done 称为函数
> 2nd ajax prefilter then
> 2nd ajax done
> 2nd ajax then

这回答了我关于 .then() 方法如何在 .done() 方法之前附加到延迟的 jqXHR 对象的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:38:33.780

`.done()`在您的情况下，使用或 with添加回调没有区别`.then()`。仅使用`.done()`就足够了。

> 我不明白为什么先执行预过滤步骤。我原以为它会最后执行，或者根本不执行。

回调按照它们添加到延迟对象的顺序执行。并且预过滤器在 内部执行`$.ajax`，即甚至在`$.ajax`调用返回之前附加回调并且可以附加您的`done`和处理程序。`then`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:27:07.337

`.then`如果您不返回延迟对象，那么所有的做法都是向延迟对象添加另一个完成失败和/或进度处理程序。`.then`考虑到这一点，在预过滤器中添加的内容在添加之后的内容之前执行是完全有意义的，`$.ajax()`因为预过滤器回调中的代码首先发生。回调被触发先入先出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:42:34.367

> 我不明白为什么先执行预过滤步骤。我原以为它会最后执行，或者根本不执行。

您已将另一个“要做的事情”附加到与 ajax 请求关联的 jqXHR。由于它是一个*预*过滤器，因此在 ajax 请求使用的标准完成/失败之前附加。处理程序按照它们附加的顺序运行，因此预过滤器是第一个。

请注意，由于预过滤器仅在`.then()`方法中附加了一个函数，因此如果由于某种原因请求失败，则不会运行任何内容。听起来您也想要第二个（故障处理程序）arg。

至于两个不同的ajax请求的完成顺序，那是不可预测的。这将取决于哪个先返回。

# bash - 从文件列表中删除匹配的行

> ID：15907981
> 
> 赞同：0
> 
> 时间：2013-04-09T16:58:59.673
> 
> 标签：bash, sed

我刚刚编写了一些代码，这使得语言环境属性变得多余。正因为如此，我希望它能够从项目的每个语言环境文件中删除该属性，但我根本找不到这样做的方法，我最终在 vim 中手动完成。

现在，我不是 UNIX 黑带，但我知道对于这样一个可能隐藏在`sed`或`awk`. 所以我设法匹配了属性（属性是`no_outline`）：

```
sed -e '/no_outline=/d' l10n/*/viewer.properties 
```

但这只会打印出每个文件的内容，没有`no_outline`行。是否可以将命令的“结果”写入与执行`sed`命令相同的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:08:28.553

你可以：

```
sed -i '/no_outline=/d' l10n/*/viewer.properties 
```

从手册页：

```
 -i[SUFFIX], --in-place[=SUFFIX]

              edit files in place (makes backup if SUFFIX supplied) 
```

# javascript - 如何从角度服务工厂创建动态文件资源？

> ID：15907983
> 
> 赞同：0
> 
> 时间：2013-04-09T16:59:08.050
> 
> 标签：javascript, angularjs

可以有动态文件资源吗？

这是我的工厂

```
factory('fileResourcedc', function ($resource) {
    var FileResourcedc = $resource(
                'xml/file.json',{},
                {
                    get:{method:'GET', isArray:false}
                }
            );
    return FileResourcedc;
}) 
```

我从这里调用它：

```
 var deferred = $q.defer();
    var successFn = function (result) {
        if (angular.equals(result, [])) {
            deferred.reject("Failed  because empty : " + result.message);
        }
        else {
            deferred.resolve(result);
        }
    };
    var failFn = function (result) {
       deferred.reject("Failed dataconfResponse");
    };
    fileResourcedc.get(successFn, failFn);
    return deferred.promise; 
```

请注意，在我的工厂中，文件名是硬编码的：

```
'xml/file.json' 
```

我需要的是创建一个文件名参数并将其传递给工厂服务。是否可以？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:46:42.920

这是我的解决方案：

```
factory('fileResourcedc', function ($resource) {
    var FileResourcedc = $resource(
                'xml/:myFile',
                {},
                {
                    get:{method:'GET', params:{myFile:""}, isArray:false}
                }
            );
    FileResourcedc.prototype.getCatalogue = function (fileName, successCat, failCat) {
        return FileResourcedc.get({myFile:fileName}, successCat, failCat);

    };
    return new FileResourcedc;
}) 
```

称呼：

```
 var deferred = $q.defer();
        var successFn = function (result) {
            if (angular.equals(result, {})) {
                deferred.reject("No catalogue");
            }
            else {
                deferred.resolve(result);
            }
        };
        var failFn = function (result) {
           deferred.reject("Failed catalogue");
        };
        fileResourcedc.getCatalogue("catalogues.json",successFn, failFn);
        return deferred.promise; 
```

谢谢！

# php - HTML/PHP 表单疑难解答

> ID：15907985
> 
> 赞同：-1
> 
> 时间：2013-04-09T16:59:13.393
> 
> 标签：php, html, forms, feedburner

我正在将 feedburner 用于我的 rss 提要，目前正在尝试创建一个小部件，该小部件显示通用的 feedburner 电子邮件订阅表单，并稍作修改。我试图在我的表单中包含一个文本框，供用户输入关键字，然后当他们输入电子邮件并点击订阅时，他们会被带到 feedburner 确认页面。

除了检索我为“关键字”文本框设置的变量外，一切都运行良好。从技术上讲，在填写表格后，确认 url 应该类似于： **feedburner.google.com/fb/a/mailverify ?=MYFEED&s =用户-关键字**

但它目前只显示： **feedburner.google.com/fb/a/mailverify** ?=MYFEED&s= - 最后一点是空白的，所以我正在找人告诉我在获取关键字文本字段时哪里出错了在搜索参数中填充 url..

这是我的表格（带有mod）：

```
 public function widget( $args, $instance ) {
        extract( $args );
        $title = apply_filters( 'widget_title', $instance['title'] );

        $user_value = $_POST['keyword'];

        echo $before_widget;
        if ( ! empty( $title ) )
            echo $before_title . $title . $after_title; ?>

            <form style="border:1px solid #ccc;padding:3px;text-align:center;" action="http://feedburner.google.com/fb/a/mailverify?uri=MYFEED&s=<?php echo $user_value ?>" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=MYFEED&s=<?php echo $user_value ?>', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">

<p>Enter a keyword:</p><p><input type="text" style="width:140px" name="keyword" value="<?php echo $user_value ?>" /></p>

<p>Enter your email address:</p><p><input type="text" style="width:140px" name="email"/></p>

<input type="hidden" value="MYFEED" name="uri"/>

<input type="hidden" name="loc" value="en_US"/><input type="submit" value="Subscribe" />

<p>Delivered by <a href="http://feedburner.google.com" target="_blank">FeedBurner</a></p></form>

        <?php echo $after_widget;
    } 
```

**编辑** 最新版本（使用 var_dump）：

```
 public function widget( $args, $instance ) {
            var_dump($_POST);
            extract( $args );
            $title = apply_filters( 'widget_title', $instance['title'] );

              $user_value = $_POST['keyword'];

            echo $before_widget;
            if ( ! empty( $title ) )
                echo $before_title . $title . $after_title; ?>

                <form style="border:1px solid #ccc;padding:3px;text-align:center;" action="http://feedburner.google.com/fb/a/mailverify?uri=MYFEED&s=<?php echo $user_value ?>" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=MYFEED&s=<?php echo $user_value ?>', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">

<p>Enter a keyword:</p><p><input type="text" style="width:140px" name="keyword" value="<?php echo $user_value ?>" /></p>

<p>Enter your email address:</p><p><input type="text" style="width:140px" name="email"/></p>

<input type="hidden" value="MYFEED" name="uri"/>

<input type="hidden" name="loc" value="en_US"/><input type="submit" value="Subscribe" />

<p>Delivered by <a href="http://feedburner.google.com" target="_blank">FeedBurner</a></p></form>

            <?php echo $after_widget;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:09:23.583

应该是

```
<?php echo $user_value ?>
      ^^^^--- 
```

或者

```
<?= $user_value ?>
 ^^-- 
```

# android - android应用翻译不起作用

> ID：15907989
> 
> 赞同：1
> 
> 时间：2013-04-09T16:59:19.337
> 
> 标签：android, string, resources, translation

这真的很奇怪，因为我已经制作了一些具有相同结构的应用程序并且它以前一直有效。

问题是我有一些语言、西班牙语、英语等的应用程序，具有适当的 res/values-es 、 res/values 等

google play 应用部分的默认语言是英语，而 res/values 是英语，但我收到用户的抱怨，他们说他们正在用西班牙语查看应用程序，手机是英语的，并且在美国。

而且更奇怪的是，我在西班牙，用英文配置手机，可以用英文查看app……

太奇怪了。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:27:59.350

# ruby - Ruby中非贪婪匹配的正则表达式否定

> ID：15907992
> 
> 赞同：1
> 
> 时间：2013-04-09T16:59:22.283
> 
> 标签：ruby, regex

我有这个字符串：

`ibeu`

我正在尝试使用一个正则表达式来执行以下操作：（其中大部分都有效）

查找单词中的音节，并在音节的第一个元音之前插入一些字母。由于这带来了挑战，上面的字符串在通过我为它编写的 lex 的 hack 运行之前已经被修改过。

我有这个正则表达式，我试图在上面的字符串上使用：

`word.match(/(.*?)([^aeo]?u)(.*?)/)`

鉴于正则表达式的约束（主要是`u`前面`a, e, or o`没有 ，我不希望与该正则表达式匹配，但我最终得到以下结果：

`#<MatchData "ibeu" 1:"ibe" 2:"u">`

我确定这很愚蠢，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:01:20.567

你可能想要消极的回顾：

```
(.*?)(?<![aeo])u 
```

它匹配任何`u`前面没有的`aeo`。我不确定你真正想要做什么，所以我只是`(.*?)`像你当前的正则表达式一样包括前面。后面的`(.*?)`总是会匹配一个空字符串，所以是多余的，可以去掉。

您当前的解决方案失败，因为`[^aeo]`它是可选的。它不能简单地通过删除来修复，因为当它位于字符串的开头或连续有多个时`?`，您似乎也想匹配。`u``u`

# c++ - 如何并行启动几个 QProcess 并阻塞直到它们都退出？

> ID：15907994
> 
> 赞同：1
> 
> 时间：2013-04-09T16:59:23.683
> 
> 标签：c++, qt

我想`QProcess`并行启动一些，并阻塞直到它们都退出。

我正在考虑将每个`QProcess*`放在一个向量中，并将`finished()`信号连接到一个计数器。主线程忙等待，直到计数器达到向量的大小。

但是，我担心计数器可能不是线程安全的，而且效率不是很高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:12:34.003

如果将所有finished() 信号连接到主线程中的单个对象，则无需担心保护计数器。每个信号将在主线程中依次排队和处理。只要确保在连接时使用[Qt::QueuedConnection 即可](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)。

Amartel 在让它们运行之前检查以确保它们启动是正确的。

**编辑：** 正如这里提到的（[当 Qt 中的进程崩溃时 QProcess::finished 发出了吗？](https://stackoverflow.com/questions/12991509/is-qprocessfinished-emitted-when-process-crashes-in-qt)），您也可以考虑连接到 error() 信号。

另外，考虑[QtConcurrent](http://doc.qt.io/qt-4.8/qtconcurrent.html)。它是为这个明确的目的而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:56:30.630

你绝对应该用 保护柜台`QMutex`。

而且我认为效率没有任何问题。你有什么好怕的呢？

尽管存在一个隐藏的潜在问题 - 进程可能不会发出`finished()`信号。例如，如果它无法启动——它会发出代码`QProcess::error()`，`QProcess::FailedToStart`如果它崩溃——它会发出`QProcess::Crashed`代码错误。在这两种情况下，您的线程都将等待永恒。

# python - 在大学计算机上安装 python 模块

> ID：15907995
> 
> 赞同：1
> 
> 时间：2013-04-09T16:59:32.880
> 
> 标签：python, module, installation, local

我正在尝试在我的大学主机上安装 Dropbox，这需要 python 模块`docutils`。因此，下载模块并运行后，`python install.py`我得到以下输出：

```
running install
running build
running build_py
running build_scripts
running build_data
running install_lib
creating /usr/local/lib/python2.7/dist-packages/docutils
error: could not create '/usr/local/lib/python2.7/dist-packages/docutils': Read-only file system 
```

这并不奇怪，我不能在我的主目录之外进行任何写作。我的问题是 - 有没有办法将它安装在我的主文件夹中？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:01:19.933

使用最新版本的 pip，一种方法是：

```
pip install --user project 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:26:00.080

在获取 python 模块时规避系统级修改/添加的最佳方法是使用[virtualenv](https://pypi.python.org/pypi/virtualenv)及其包装器，以使其更容易，[virtualenvwrapper](http://virtualenvwrapper.readthedocs.org/en/latest/)以及 pip。也许这些已经安装？尝试

```
$ mkvirtualenv dropboxEnv # or whatever you want to call it
$ workon dropboxEnv       # to activate the virtual environment 
```

和/或

```
$ pip install docutils 
```

如果你没有 pip 你可以先试试

```
$ easy_install pip 
```

AFAIK，virtualenv 是将模块“安装”到您的主文件夹中的唯一方法。尝试安装 virtualenv/virtualenvwrapper 可能是一个不错的选择。如果尚未安装这些，您可能会尝试找人在您的计算机系统范围内安装它们，然后您将能够创建任何 virtualenvs 并将所需的任何模块安装到您的主文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T13:43:42.743

如果你有下载版本试试这个

```
python setup.py install --user 
```

# java - java play框架中如何获取查询字符串参数？

> ID：15907996
> 
> 赞同：25
> 
> 时间：2013-04-09T16:59:34.913
> 
> 标签：java, playframework, playframework-2.0, request.querystring

我对 java play 框架很陌生。我已经设置了所有正常路线，例如 /something/:somthingValue 和所有其他路线。现在我想创建接受查询参数的路由，例如

/某事？x=10&y=20&z=30

在这里，我想获取“？”之后的所有参数。作为键==>值对。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-09T18:04:06.953

您可以将查询参数连接到路由文件中：

[http://www.playframework.com/documentation/2.0.4/JavaRouting](http://www.playframework.com/documentation/2.0.4/JavaRouting)在“具有默认值的参数”部分

或者您可以在您的操作中请求它们：

```
public class Application extends Controller {

    public static Result index() {
        final Set<Map.Entry<String,String[]>> entries = request().queryString().entrySet();
        for (Map.Entry<String,String[]> entry : entries) {
            final String key = entry.getKey();
            final String value = Arrays.toString(entry.getValue());
            Logger.debug(key + " " + value);
        }
        Logger.debug(request().getQueryString("a"));
        Logger.debug(request().getQueryString("b"));
        Logger.debug(request().getQueryString("c"));
        return ok(index.render("Your new application is ready."));
    }
} 
```

例如`http://localhost:9000/?a=1&b=2&c=3&c=4`控制台上的打印：

```
[debug] application - a [1]
[debug] application - b [2]
[debug] application - c [3, 4]
[debug] application - 1
[debug] application - 2
[debug] application - 3 
```

请注意，这`c`是 url 中的两次。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-08-07T23:00:58.807

在 Play 2.5.x 中，它是直接在 中制作的`conf/routes`，可以在其中放置默认值：

```
# Pagination links, like /clients?page=3
GET   /clients              controllers.Clients.list(page: Int ?= 1) 
```

在您的情况下（使用字符串时）

```
GET   /something            controllers.Somethings.show(x ?= "0", y ?= "0", z ?= "0") 
```

使用强类型时：

```
GET   /something            controllers.Somethings.show(x: Int ?= 0, y: Int ?= 0, z: Int ?= 0) 
```

有关详细说明，请参阅：[https](https://www.playframework.com/documentation/2.5.x/JavaRouting#Parameters-with-default-values) ://www.playframework.com/documentation/2.5.x/JavaRouting#Parameters-with-default-values 。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-01T12:10:26.897

您可以将所有查询字符串参数作为 Map：

```
Controller.request().queryString() 
```

此方法返回一个`Map<String, String[]>`对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T15:29:25.240

在`Java/Play 1.x`你得到他们：

```
 Request request = Request.current();
    String arg1 = request.params.get("arg1");

    if (arg1 != null) {
        System.out.println("-----> arg1: " + arg1);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T21:20:53.963

您可以使用[FormFactory](https://www.playframework.com/documentation/2.6.x/JavaForms#Handling-a-form-that-is-not-related-to-a-Model)：

```
DynamicForm requestData = formFactory.form().bindFromRequest();
String firstname = requestData.get("firstname"); 
```