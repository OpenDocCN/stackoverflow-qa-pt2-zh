# StackOverflow 问答 13709000-13709999

# wpf - WPF 命令绑定不起作用

> ID：13709001
> 
> 赞同：0
> 
> 时间：2012-12-04T17:57:16.707
> 
> 标签：wpf, commandbinding

我在 WPF 窗口中有一个按钮。我想通过按下鼠标左键和单击 Ctrl+F 来显示一条消息。我想要 XAML 中的大部分代码。代码如下所示。我的问题是鼠标点击对我有用，但不是按键。任何人都可以帮助我。提前致谢。

```
MyWindow.xaml

<Window x:Class="Commands_Xaml.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="164,88,0,0" Name="button1" VerticalAlignment="Top" Width="75">
            <Button.CommandBindings>
                <CommandBinding Command="ApplicationCommands.Find" Executed="CommandBinding_Executed"/> 
            </Button.CommandBindings>
            <Button.InputBindings>
                <KeyBinding Key="F" Modifiers="Control" Command="ApplicationCommands.Find"/>
                <MouseBinding MouseAction="LeftClick" Command="ApplicationCommands.Find"/>
            </Button.InputBindings>
        </Button>
    </Grid>
</Window>

MainWindow.xaml.cs

namespace Commands_Xaml
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();            
            //ApplicationCommands.Find.InputGestures.Add(new KeyGesture(Key.F,ModifierKeys.Control));
            //ApplicationCommands.Find.InputGestures.Add(new MouseGesture(MouseAction.LeftClick));

            //CommandBinding bindingObject = new CommandBinding();
            //bindingObject.Command = ApplicationCommands.Find;
            //bindingObject.Executed += new ExecutedRoutedEventHandler(CommandBinding_Executed);
            //this.CommandBindings.Add(bindingObject);
        }

        private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
        {
            MessageBox.Show("Button clicked");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:36:57.957

将命令绑定/输入绑定移动到窗口级别并使用按钮的 Command 属性，而不是尝试使用 MouseBinding。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Find" Executed="CommandBinding_Executed" />
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Command="ApplicationCommands.Find" Key="F" Modifiers="Control" />
    </Window.InputBindings>

    <Grid>
        <Button Command="ApplicationCommands.Find" Content="Button" HorizontalAlignment="Left" Margin="206,152,0,0" VerticalAlignment="Top" Width="75"/>
    </Grid>
</Window> 
```

**更新**

要根据不同的按钮点击有不同的行为，可以通过几种方式来实现。这里有两个：

对每个按钮使用不同的命令：

```
<Button Command="ApplicationCommands.Find" Content="Button1" />
<Button Command="ApplicationCommands.Print" Content="Button2" /> 
```

使用[命令参数](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.commandparameter.aspx?ppud=4)：

```
<Button Command="ApplicationCommands.Find" CommandParameter="Find1" Content="Button1" />
<Button Command="ApplicationCommands.Find" CommandParameter="Find2" Content="Button2" /> 
```

对于 KeyBinding：

```
<KeyBinding Command="ApplicationCommands.Find" CommandParameter="Find3" /> 
```

您可以在 CommandBinding.Executed 处理程序中访问此属性：

```
private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
{
    if (e.Parameter as string == "Find1")
    {
        //Find1
    }
    else if (e.Parameter as string == "Find2")
    {
        //Find2
    }    
    else if (e.Parameter as string == "Find3")
    {
        //Find3
    }
} 
```

# c++ - 打印用“,”连接的向量/集合值

> ID：13709008
> 
> 赞同：2
> 
> 时间：2012-12-04T17:57:59.637
> 
> 标签：c++, collections

> **可能重复：**
> [用逗号 C++ 打印列表](https://stackoverflow.com/questions/3496982/printing-lists-with-commas-c)

有没有一种很好的方法来打印用“，”连接的向量的元素？我希望有一个简单而干净的单线，或类似的。到目前为止，我不会将其归因于我提出的版本的品质：

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <vector>

int main()
{
  std::vector<double> v{0, 1, 1, 2, 3, 5, 8, 13};

  if (v.size() > 1) {
    std::copy(v.begin(), v.end() - 1, std::ostream_iterator<int>(std::cout, ", "));
  }

  if (v.size() > 0) {
    std::cout << *(v.end() - 1) << "\n";
  }
} 
```

输出

```
0, 1, 1, 2, 3, 5, 8, 13 
```

# python - 为什么 Python 文档测试要求 isinstance 使用匹配的合格/不合格命名？

> ID：13709011
> 
> 赞同：2
> 
> 时间：2012-12-04T17:58:05.053
> 
> 标签：python, python-3.x, namespaces, doctest, fully-qualified-naming

> **可能重复：**
> [导入模块：__main__ vs import as module](https://stackoverflow.com/questions/13181559/importing-modules-main-vs-import-as-module)

我知道在大多数情况下`isinstance`不需要或应该避免（例如，[Isinstance pythonic/"good" 的使用吗？](https://stackoverflow.com/questions/3111611/is-this-use-of-isinstance-pythonic-good)）。但是，有时这正是我所需要的。

然而，在 Python 2.6、2.7 和 3.2 中，我注意到 `isinstance`在 doctest 中的执行和正常执行之间的工作方式存在以下不规则性。

例如，我希望出现以下行为，这`isinstance`与我使用的是限定名称还是非限定名称是矛盾的：

```
import collections
from collections import OrderedDict
assert isinstance(collections.OrderedDict(), collections.OrderedDict) == True
assert isinstance(collections.OrderedDict(), OrderedDict) == True 
```

在 Doctest 中执行的相同代码的工作方式相同。

但是，如果我在名为“isinstanceTest.py”的模块中定义一个类，并在`isinstance`用于匹配该类的同一模块中定义一个函数，事情会变得更有趣。以下 doctest 是为了通过而编写的。我正在使用，`unittest.TextTestRunner`因为我经常收集并在一个套件中跨多个模块运行我的文档测试和单元测试。

```
import unittest, doctest
import collections

class A: pass

def isinstance_A(arg):
    '''
    >>> import isinstanceTest
    >>> isinstanceTest.isinstance_A(isinstanceTest.A())
    True
    >>> isinstance_A(A())
    True
    >>> isinstanceTest.isinstance_A(A())
    False
    >>> isinstance_A(isinstanceTest.A())
    False
    '''
    return isinstance(arg, A)

if __name__ == '__main__':
    l = doctest.DocTestSuite(__name__)
    runner = unittest.TextTestRunner()
    runner.run(l) 
```

请注意，最后两个 doctest 语句同时使用了限定名称和非限定名称，会产生意想不到的结果。

如果在“isinstanceTest.py”所在的目录中，我打开一个解释器并执行等效命令，结果如预期：

```
Python 3.2.3 (default, May  3 2012, 15:51:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import isinstanceTest
>>> from isinstanceTest import *
>>> isinstanceTest.isinstance_A(isinstanceTest.A())
True
>>> isinstance_A(A())
True
>>> isinstanceTest.isinstance_A(A())
True
>>> isinstance_A(isinstanceTest.A())
True 
```

因此，虽然这种行为是一致的并且本地化为在测试套件中运行 doctest（并且我已经根据需要对其进行了编码，并且通常只在 doctests 中使用限定名称），但更大的问题是：这是 doctests 的记录限制吗（我有还没有找到任何提到这一点的文档），或者这是一个错误？

# actionscript-3 - 如何以编程方式更改火花组合框中突出显示的项目

> ID：13709013
> 
> 赞同：0
> 
> 时间：2012-12-04T17:58:20.310
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我想以编程方式更改火花组合框中突出显示的项目。当带有所选项目的组合框弹出窗口打开时，它在弹出窗口中显示为突出显示的颜色。现在打开弹出窗口后，我通过设置 selectedIndex 和 selectedItem 属性以编程方式更改了所选项目。文本输入随着给定的所选项目而更改，但突出显示的颜色仍然显示之前的值。如何将该突出显示的项目更改为选定项目。任何人都可以为此提供解决方案。

```
public class AutoSortComboBox extends ComboBox{

    public function AutoSortComboBox ():void    {   
                super();   
    }
    protected function sortDataProvider(descending:Boolean):void{

                var arrColl:ArrayCollection = this.dataProvider as ArrayCollection;
                var selectedItem:Object = this.selectedItem as Object;
                this.selectedIndex = -1;
                var dataSortField:SortField = new SortField();
                dataSortField.name = "label";
                dataSortField.numeric = false;
                dataSortField.descending = descending;
                /* Create the Sort object and add the SortField object created earlier to the array of fields to sort on. */
                var numericDataSort:Sort = new Sort();
                numericDataSort.fields = [dataSortField];
                arrColl.sort = numericDataSort;
                arrColl.refresh();
                if(selectedItem != null)
                {
                    for(var i:int=0;i<arrColl.length;i++)
                    {
                        if(selectedItem.label == arrColl[i].label)
                            this.selectedIndex = i;
                    }
                    this.selectedItem = selectedItem;
                }
     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:53:08.960

这两个之一应该工作：

```
FocusManager.SetFocus(DisplayObject) 
```

或者

```
 Combobox.selectedItem = ItemFromCombobox 
```

# c# - PostBack Events Not Firing form 控制来自 Visual Studio 的错误？

> ID：13709014
> 
> 赞同：0
> 
> 时间：2012-12-04T17:58:22.343
> 
> 标签：c#, event-handling, asp.net-4.0, web-controls, autopostback

我想我错过了一些东西。显示 html div 的正确方法是什么，例如，如果使用 Page_Onload + isPostBack + asp:button 作为事件的触发器满足实际条件，如下所示：

Page_Load -> 点击事件触发

页面加载 - 元素（在这种情况下为多个表行动态生成的字符串）状态隐藏

客户端点击提交按钮：

元素切换为可见。

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if (!Page.IsPostBack)
    {
      nothing yet
    }
    else 
    {
      suppose to check on client event handle by asp button
    }
 } 
```

// 所以这里是客户端触发的事件

```
protected void imgButSbmt_Click(object sender, ImageClickEventArgs e)
{
    initializeReportTable();
} 
```

突然在试图确保我对这个论点正确时，

我可以看到这`imgButSbmt_Click`不是“命中”（在调试模式下附加断点）。

所以首先......我现在可以注意到这是一种不寻常的行为（虽然我正在写这个问题可能与我的所有项目有关，但这个问题根本没有触发，所以我通过删除解决方案文件来解决它我正在写这篇文章）。

所以现在，它确实有效。

**但是**...这次（虽然尚未创建解决方案）我通过`File-Open-Website`.

命中`F5`...断点在红色中工作正常.. 这次没有解释标记。但是，按钮和下拉列表中配置为 AutoPostBack 的所有事件

```
protected void DDL_Month(object sender, EventArgs e)
{
    initializeReportTable();
} 
```

没有开火。现在除此之外的所有事件都`Page_Load`在触发。再次检查后，它确实会触发，但仅在第二次触发！

这里发生了什么？

我记得我不久前遇到的一些读数说我应该检查 autoeventwireup 并确保它设置为`true`（我认为这是默认设置）。

所以这些是页面指令：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

下面是一个表格中的控件 DropDownList + imgButton 的示例：

```
 <td>
                    <asp:DropDownList ID="DDL_Month" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DDL_Month"></asp:DropDownList>
                    </td>

                    <td>
                    <asp:ImageButton ID="imgButSbmt" ImageUrl="images/sendreq.png" 
                        runat="server" Height="25px"  OnClick="imgButSbmt_Click"
                        style="margin-right: 0px; border-width:" />
                        </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:57:05.583

正如@JonH 所建议的那样，作为一种解决方案，如果您遇到任何 UCB（未识别的代码行为），我已经不得不在其他一些更错误的场景中使用......只需按照以下操作

1）打开一个新文件夹作为项目工作文件夹的新家

2) 从 The Buggy 项目中复制所有子文件夹，例如`images`, `js`etc'

3）创建一个新的`webSite`/任何其他`application`你有不寻常的问题

然后只需应用应用程序所需的所有引用，将代码复制到新创建的 .cs/vb/aspx 相应地，使用现有项目（您在单独文件中的其他类）

现在你准备好继续工作了...

虫子现在应该在你身后

只是不要忘记删除旧项目以及与之关联的任何解决方案文件。

希望对其他也遇到UCB现象的新开发者有所帮助

# r - 将变量输入 R 以进行说明的最简单和最快的方法？

> ID：13709015
> 
> 赞同：-2
> 
> 时间：2012-12-04T17:58:30.513
> 
> 标签：r

我想问一个初学者的问题，因为我在任何地方都找不到答案。所以请多多包涵！
我有三个复杂的数据结构（“JAMES”、“CHARLES”和“RICHARD”）并从中计算出某些值。现在我想说明其中的一些值。尝试直接使用它们会给出我不理解的错误消息。这就是为什么并且由于数据集的结构，我宁愿将我感兴趣的值复制到一个新的简单数据集。但不幸的是，我不知道该怎么做。我什至不确定如何为您提供正确的机器可读示例，因为它太复杂了。因此，我想知道以下内容，而不是：

将这些值输入 R 以便将它们说明为图表中的表格或图形的最快和最简单的方法是什么？

这是我提到的值的一个示例：

年份 - “詹姆斯” - “查尔斯” - “理查德”

```
2001 14 10 5  
2002 15 14 7  
2003 16 16 9  
2004 17 18 11  
2005 18 20 13 
```

如何创建上述示例的机器可读版本？

非常感谢您的考虑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:11:14.880

最方便的方法是使用 read.table() 构造数据框

```
 datfrm <- read.table(text=" Year JAMES CHARLES RICHARD
     2001 14 10 5  
     2002 15 14 7  
     2003 16 16 9  
     2004 17 18 11  
     2005 18 20 13", header=TRUE)
 datfrm
#---console output----
  Year JAMES CHARLES RICHARD
1 2001    14      10       5
2 2002    15      14       7
3 2003    16      16       9
4 2004    17      18      11
5 2005    18      20      13 
```

您可以从计算机上的文件中读取，而不是文本参数。这是相当基本的内容，建议您阅读“R 简介”中的示例，或者可能是价格方便的“R for Dummies”文本。第二种情况是给我们的两个常规 SO 贡献者投信任票。非常好（尽管我觉得系列标题令人反感。）

如果它们在单独的文件中并且很长，您可以使用不同的分隔符读取标题文本，并使用 read.table 读取带有空格分隔的数据

```
headerLine <- read.table(file="hdrfil.txt", sep="-")
dfrm <- read.table(file="dat.fil", header=FALSE)
# ...and then do:

names(dfrm) <- headerLine[1,] 
```

# python - 是否可以在 Tornado 中为处理程序捕获可选参数

> ID：13709016
> 
> 赞同：1
> 
> 时间：2012-12-04T17:58:34.087
> 
> 标签：python, regex, tornado

我有一个绑定到 Tornado 处理程序的 URL。例如

```
(r'/browse/article/([a-zA-Z0-9_-]+)/([0-9]*)', ArticleHandler), 
```

但是，参数的数量不是固定的，有些是`/browse/article/blah`，有些是`/browse/article/blah/2`。换句话说，最后一个参数可能存在也可能不存在。

是否仍然可以使用单个处理程序来处理这种情况？如果是这样，我应该如何制定正则表达式字符串以匹配所有可能的情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T18:39:24.137

尝试这个：

```
(r'/browse/article/([a-zA-Z0-9_-]+)(?:/([0-9]*))?', ArticleHandler), 
```

这使得最后一段是可选的，同时保持捕获括号完整，以防它们稍后用于某些事情。

# php - PHP Codeigniter，我应该设置数组默认值还是简单地重复使用 if.. else 语句

> ID：13709019
> 
> 赞同：1
> 
> 时间：2012-12-04T17:58:37.750
> 
> 标签：php, codeigniter

所以我正在使用codeigniter。

为了允许代码的可重用性，我的模型中有许多功能可以得到不同的东西。

例如 get_details、get_features、get_products

然后我有一个名为 get_all 的函数，它调用所有这些方法，所以如果我想要我可以全部获取它们，否则我可以单独使用它们。

所以我有我的数据，我把它传递给我的视图。我的视图循环遍历每个机构并在表格行中显示各种数据。

目前我使用 if.. else 语句来辨别一个值是否为空。因此，如果一个机构尚未添加其功能，我会使用：

```
if(!empty($features['feature1'])){//DO STUFF e.g output 'YES'} 
```

无论如何，我的视图代码并没有变得相当长和复杂，因为基本上对于使用 get_all 返回的每个数组的每个键，如果未设置，我使用 if..else 语句输出“-”。

它有效，只是看起来重复。

我想到的解决方法是简单地设置一个默认数组，默认情况下所有内容都设置为“-”，然后如果数据确实存在，它会被覆盖，但是我只需要编写/启动一个大的默认数组..

所以我的问题不是危及生命的问题，也不是特别难。我只是好奇如何在没有丑陋代码的情况下实现这样的功能。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:34:15.050

也许您可以通过将其空值设置为来“调整”控制器中的数组`-`：

```
$features = array_map(function($value) {
    return empty($value) ? '-' : $value;
}, $features); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:01:35.193

如果没有您发布您的实际代码，我只能提供一些一般性建议。为了通常处理这个问题，并合并您的代码以删除所有条件，请将键放在一个数组中。

```
$keys_to_check = array('feature1', 'feature2', 'etc.....');

foreach ($keys_to_check as $key) {
  if (!empty($features[$key])) {
   // do something
  }    
} 
```

这会将所有这些条件语句重构为更易于维护的东西。

同样在您的模型代码中，当您提供`get_all`调用 3 个子函数的通用函数时，确保不执行不必要的查询非常重要。似乎最好的软件设计是不要重复自己，并将 3 个函数分组为 1 个，但如果这三个函数都执行相似的查询，那么性能会很糟糕。

# javascript - jQuery 动画禁用 Internet Explorer 7 和 8 中的表单元素

> ID：13709022
> 
> 赞同：0
> 
> 时间：2012-12-04T17:58:50.713
> 
> 标签：javascript, jquery, internet-explorer, jquery-animate

我们有一个正在生产中的 Web 应用程序，它使用 jQuery 通过 AJAX 传输数据以及一些基本的动画方法（例如，fadeIn、fadeOut、hide、show、slideUp、slideDown）。

该软件的框架调用动态加载的 PHP 文件作为主界面上的面板。在长时间使用我们的软件后，文本字段、文本区域和选择框等表单元素变得无法点击，但仅在 Internet Explorer 7 和 8 中（Firefox、Chrome、Opera 和 Internet Explorer 9/10 都可以正常工作）。表单元素绝对不会被禁用，因为我们的验证系统从不需要禁用元素。我们也没有使用任何带有 z-index 的分层 HTML 元素，因此在元素顶部没有任何可能“隐藏”或“透明”会干扰 onclick 事件的元素。也没有脚本错误，而且问题是如此断断续续，几乎不可能使用断点来追踪。

我们不想强迫我们的客户使用 IE9+。

据我所知，这只发生在使用带有动画效果的 jQuery 动态转换的表单元素上。有没有其他人经历过这个？

# html - Dojo 内容窗格拆分器未显示

> ID：13709025
> 
> 赞同：1
> 
> 时间：2012-12-04T17:59:06.127
> 
> 标签：html, dojo

我正在尝试使用 dojo 组件布局 JavaScript Web 地图，并希望将拆分器添加到我的 dojo 内容窗格中。我的左窗格和中间窗格之间的那个可以工作，但我的中间窗格和页脚之间的那个无法显示。下面的代码是我尝试添加拆分器的内容窗格页脚。我确定我错过了一些简单的东西，有人有什么建议吗？提前致谢！！

```
 <div data-dojo-type="dojox.layout.ContentPane" splitter="true" region="bottom" id="footerAll"   style="height:60%; width:100%">
    <div id="footerDocNum" class="roundedCorners" dojotype="dojox.layout.ContentPane"  region="bottom"  style="height:90%; width:96%;display:none;">  

      <table dojotype="dojox.grid.DataGrid" data-dojo-id="grid1" id="grid1" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">

            <thead>
                <tr>
                <th field='DOCUMENT_N' width='150px'>Document Number</th>
                <th field='SURVEYOR' width='150px'>Surveyor</th>
                <th field='TOWNSHIP_R' width='150px'>Township/Range</th>
                <th field='SECTION' width='100px'>Section</th>
                <th fields="page_id" formatter="makeLink3"width="100px" > 
              PDF
            </th>

            </thead>
      </table>
    </div>
    <div id="footerCity" class="roundedCorners" dojotype="dijit.layout.ContentPane"  region="bottom"  style="height:90%; width:96%; display:none"> 

      <table dojotype="dojox.grid.DataGrid" data-dojo-id="grid2" id="grid2" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">

        <thead>
          <tr>          
           <th field="CITY"  width="200px"  > 
            City  
           </th> 
            <th field="Square_Mil" width="150px"  > 
              Square Miles
            </th> 
            </tr> 
        </thead>
      </table>
    </div>  

    <div id="footerPoints" class="roundedCorners" dojotype="dijit.layout.ContentPane"  region="bottom"  style="height:90%; width:96%; display:none;"> 

      <table dojotype="dojox.grid.DataGrid" data-dojo-id="grid4" id="grid4" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'"> 
   <td>  <tr>    
     <form name="griddataControl" id="gridDataFormControl" action="resultsControl.cfm" target="_blank" method="post" style="display:none"><input id="gridDataTextControl" name="gridDataTextControl" type="hidden"><input type="hidden"></form>
      <button dojoType="dijit.form.Button" value="Export Results" onclick="document.forms['gridDataFormControl'].submit();">Export To Excel</button><b>Monument Results</b></tr></td>

        <thead>
          <tr>  

           <th field="POINT_NAME"  width="150px"  > 
            Point Name 
           </th> 
            <th field="GRID_ADDRE" width="150px"  > 
              Address
            </th> 
            <th field='TOWNSHIP_R' width='150px'>Township/Range</th>
            <th field="SECTION" width="100px" > 
             Section 
            </th> 
            <th fields="POINT_NAME,LONGITUDE,LATITUDE" formatter="makeLink1" width="150px" > 
              Mon. Ref. Sheet
            </th>
            <th field="MON_NOTES" width="150px" > 
              Monument Notes
            </th> 
            </tr>
        </thead>
      </table>
    </div>  
    <div id="footersurvName" class="roundedCorners" dojotype="dijit.layout.ContentPane"  region="bottom"  style="height:90%; width:96%; display:none;"> 

      <table dojotype="dojox.grid.DataGrid" data-dojo-id="grid5" id="grid5" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'"> 

    <form name="griddata" id="gridDataForm" action="results.cfm" target="_blank" method="post" style="display:none"><input id="gridDataText" name="gridDataText" type="hidden"><input type="hidden"></form>
       <tr><button dojoType="dijit.form.Button" value="Export Results" onclick="document.forms['gridDataForm'].submit();">Export To Excel</button><b>Survey Results</b></tr>
        <thead>
            <tr>
            <th field="page_description"  width="150px" > 
              Survey Number
            </th> 

           <th field="SURVEYOR"  width="150px"  > 
            Surveyor 
           </th> 
            <th field="ADDRESS_OF_SURVEY" width="200px"  > 
              Address
            </th> 
            <th field='TOWNSHIP_RANGE' width='150px'>
            Township/Range
            </th>
            <th field="SECTION" width="100px" > 
             Section 
            </th> 
            <th fields="subdir,page_id" formatter="makeLink" width="75px" > 
              PDF
            </th>

          </tr> 
        </thead>
      </table>
    </div>  
    <div id="footerSection" class="roundedCorners" dojotype="dijit.layout.ContentPane"  region="bottom"  style=" height:90%; width:96%; display:none;"> 

      <table dojotype="dojox.grid.DataGrid" data-dojo-id="grid7" id="grid7" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'"> 

        <thead>
          <tr>          

            <th field='TOWN_RANGE' width='150px'>
            Township/Range</th>
            <th field="Section_Nu" width="150px" > 
             Section 
            </th> 

          </tr> 
        </thead>
      </table>
    </div>  
     </div> 
```

# java - 导入 java.awt.xxxxx 和 javax.imageio.imageIO？

> ID：13709030
> 
> 赞同：0
> 
> 时间：2012-12-04T17:59:21.477
> 
> 标签：java, android, import, javax.imageio

我一直在开发一个程序，在该程序中我使用来自此 API (musicg) 的代码：[http ://code.google.com/p/musicg/](http://code.google.com/p/musicg/)

但是，我仍然有一部分代码给我带来了麻烦（GraphicRender.java）。在导入部分，碰巧有些行仍然带有红色下划线，这意味着缺少一些数据。你知道我在哪里可以找到这些缺失的部分吗？

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO; 
```

在此先感谢您可以给我的任何线索，我非常感谢您为这项工作提供的帮助！

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:00:53.037

java.awt.* 无法在 android 中解析，因为 java.awt.* 包含本机代码。这些原生代码需要android单独支持。到目前为止，它还没有完成。

但是，您可以使用android 的图形库android.graphics。

更多信息请访问：http: [//developer.android.com/reference/android/graphics/package-summary.html](http://developer.android.com/reference/android/graphics/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:12:30.240

这些导入无法在 Android 上解析。

虽然 Android 有很多标准 Java 开发工具包所具有的类，但它实现了自己的 UI 系统。因此，awt 不包含在 Android 中。

但是，已经[尝试](http://code.google.com/p/awt-android-compat/)将部分 awt 移植到 Android。我没有亲自尝试过这个项目，所以我不能说它是否符合您的要求。

您还可以查看 JavaCV 和 OpenCV 在 Android 上进行图像处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T22:33:04.023

对于 java.awt，我找到了这个 android 端口 - [https://bitbucket.org/mkmatlock/android-pdfbox/downloads/](https://bitbucket.org/mkmatlock/android-pdfbox/downloads/)（查找 android-awt-*.jar 并将其作为库依赖项放入您的项目中） . 当我发现它时，我正在寻找一个 pdfbox 端口（在内部使用 awt）。我还没有彻底测试它，但它似乎抑制了我的编译错误。

我仍在寻找 javax.imageio 端口，当我找到时会更新。

# c# - 简单的 If Else C# 语句

> ID：13709034
> 
> 赞同：0
> 
> 时间：2012-12-04T17:59:29.437
> 
> 标签：c#, if-statement

```
 private void ProcessFrame(object sender, EventArgs arg)
    {
        Wrapper cam = new Wrapper();

        //show the image in the EmguCV ImageBox
        WebcamPictureBox.Image = cam.start_cam(capture).Resize(390, 243, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC).ToBitmap();
        FaceDetectedLabel.Text = "Faces Detected : " + cam.facesdetected.ToString();
    } 
```

我正在开发一个 C# Windows 应用程序。我被一个简单的问题困住了：

我怎么能在条件下做一个 if else：如果“ **cam.facesdetected.ToString()** ”如果等于或大于 2 做某事，否则什么也不做。

我试过这个，但它似乎不起作用。谁能帮我？

```
 cam.facesdetected = abc;
        MessageBox.Show("The detected faces is:" + abc);

        if (abc >= 2)
        {
            //Do action 
        }

        else
        {
            //Do nothing
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:02:09.810

你可以：

```
if (Convert.ToInt32(abc) > 2)
   DoWork() 
```

尽管将 ABC 声明为整数可能是明智的，但如果它始终是整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:02:27.690

我相信您的 if 语句倒置了。

```
abc = cam.facesdetected; 
```

现在您可以对 进行操作`abc`，如您所列出的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:08:50.420

我认为您应该在不分配任何新变量的情况下使用它。没有必要使用`abc`变量。您可以`cam.facesdetected`像这样直接使用（我想它是一个数字）：

```
 MessageBox.Show("The detected faces is:" + cam.facesdetected.ToString());

    if (cam.facesdetected >= 2)
    {
        //Do action 
    }

    else
    {
        //Do nothing
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:02:58.017

您只能通过右侧变量分配左侧变量

```
LHS=RHS 
```

你分配错了它一定是`abc = cam.facesdetected;`

`TryParse`您可以使用Method检查它是否大于 & 等于 2

```
 bool result = Int32.TryParse(abc, out number);
      if (result)
      {
         if(number>=2)
        {
          //dowork;   
         }   
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:10:56.040

使用数字时不要使用`.ToString()`。

您以错误的方式分配变量，这应该是

```
var abc = cam.facesdetected; 
```

如果 cam.facesdetected 不是数字，则使用

```
var abc = Convert.ToInt32(cam.facesdetected); 
```

接着

```
if (Convert.ToInt32(abc) >= 2)
{
   //Do action 
} 
```

# linux - 在字符串中替换空格并转换为小写

> ID：13709035
> 
> 赞同：-1
> 
> 时间：2012-12-04T17:59:37.767
> 
> 标签：linux, sed, awk

我有多个 html 文件，我需要在字符串中替换空格并使字符串小写。（全部在linux中）

```
Exaple:
<html> ....
<a href="bla.com/CCC C C">ddd ddd ddd</a>
<a href="bla.com/CCC C">ddd ddd ddd</a>
...
</html>

Should result in:
<html> ....
<a href="bla.com/ccc_c_c">ddd ddd ddd</a>
<a href="bla.com/ccc_c">ddd ddd ddd</a>
...
</html> 
```

页面上还有其他类似的链接，但它们不是 bla.com，它们是其他东西，所以如果使用常规 exp（bla.com 需要在那里）。CCC 部分不是静态的，可以是任何单词！

任何可以做到这一点的单行线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:22:29.020

> 我需要替换**一个**空格并使字符串中的字符串小写

只需一个**空格**中断，那么这个衬里就可以做到：

```
sed -E 's/(bla.com\/)(\w*)\s*(.*?")/\1\L\2_\L\3/g' file 
```

* * *

```
$ echo '<a href="bla.com/CCC C">ddd ddd ddd</a>' | sed -E 's/(bla.com\/)(\w*)\s*(.*?")/\1\L\2_\L\3/g'
<a href="bla.com/ccc_c">ddd ddd ddd</a> 
```

解释：

```
s/            # Substitution
(bla.com\/)   # Match the domain (captured)
(\w*)         # Match the following word (captured) 
\s*           # Followed by whitespace
(.*?")        # Capture everything left upto the closing "
/             # Replace with 
\1            # The captured domain
\L\2          # Lowercase first captured word
_             # Replace the whitespace with an underscore 
\L\3          # Lowercase rest of the match
/g            # Global 
```

*如果像您的示例中那样可能有多个空格，我很难想出一个衬里。*

# android - 带有标题的 ListView 不起作用

> ID：13709036
> 
> 赞同：0
> 
> 时间：2012-12-04T17:59:38.797
> 
> 标签：android, android-listview

我得到了一个`ListView`工作正常但我希望我的标题在顶部所以我做了一个新的布局，我把标题和`ListView`. 现在我正在接近一个力量，我真的不知道它有什么问题。

```
public class AndroidListViewActivity extends ListActivity {

    String value;
    // Places Listview
        ListView lv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.list_item3);

        String[] restaurant = getResources().getStringArray(R.array.restaurant);
        String[] bar = getResources().getStringArray(R.array.bar);
        String[] gas = getResources().getStringArray(R.array.gas);
        String[] help = getResources().getStringArray(R.array.help);
        String[] hotel = getResources().getStringArray(R.array.hotel);
        String[] shopping = getResources().getStringArray(R.array.shopping);
        String[] bank = getResources().getStringArray(R.array.bank);
        String[] bus = getResources().getStringArray(R.array.bus);
        String[] film = getResources().getStringArray(R.array.film);

        Bundle extras = getIntent().getExtras();
        if (extras != null) {
         value = extras.getString("categoriename");
        }

        // storing string resources into Array
        if(value.equals("restaurant")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, restaurant));
        }if(value.equals("bar")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, bar));
        }if(value.equals("gas")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, gas));
        }if(value.equals("film")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, film));
        }if(value.equals("help")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, help));
        }if(value.equals("bus")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, bus));
        }if(value.equals("bank")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, bank));
        }if(value.equals("shopping")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, shopping));
        }if(value.equals("hotel")){
             // Binding resources Array to ListAdapter
            this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item2, R.id.label, hotel));
        }

        lv = (ListView) findViewById(R.id.list3);

        // listening to single list item on click
        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              // selected item
              String product = ((TextView) view).getText().toString();

              // Launching new Activity on selecting single List Item
              Intent i = new Intent(getApplicationContext(), MainActivity.class);
              // sending data to new activity
              i.putExtra("thetext", product);
              startActivity(i);

          }
        });
    } 
```

这是我的 list_item2：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/label"
    android:layout_width="fill_parent"
    android:layout_height="30dp"
    android:background="@drawable/list_selector"
    android:padding="10dip"
    android:textSize="16dip"
     android:layout_below="@+id/imageButton2" 
    android:textStyle="bold" >
    </TextView> 
```

这是我的 list_item3：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFF"
    android:id="@+id/mainLayout"
    > 
     <ImageView
        android:id="@+id/imageButton2"
        android:layout_width="fill_parent"
        android:layout_height="52dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/header"
        android:src="@drawable/list_header" />
    <ImageButton
        android:id="@+id/imageButtonSearch"
        android:layout_width="60dip"
        android:layout_height="45dip"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/header"
        android:src="@drawable/search" 
        android:background="@android:color/transparent" 
        />
    <ImageView
        android:id="@+id/imageButton3"
        android:layout_width="150dip"
        android:layout_height="50dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/titel" />

    <ListView
        android:id="@+id/list3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageButton2" />

    </RelativeLayout> 
```

这是日志猫：

```
 12-04 18:29:49.886: E/AndroidRuntime(371): FATAL EXCEPTION: main
12-04 18:29:49.886: E/AndroidRuntime(371): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.laurenswuyts.find.it/com.laurenswuyts.find.it.AndroidListViewActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.os.Looper.loop(Looper.java:130)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-04 18:29:49.886: E/AndroidRuntime(371):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 18:29:49.886: E/AndroidRuntime(371):  at java.lang.reflect.Method.invoke(Method.java:507)
12-04 18:29:49.886: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-04 18:29:49.886: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-04 18:29:49.886: E/AndroidRuntime(371):  at dalvik.system.NativeStart.main(Native Method)
12-04 18:29:49.886: E/AndroidRuntime(371): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
12-04 18:29:49.886: E/AndroidRuntime(371):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:210)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.Activity.setContentView(Activity.java:1657)
12-04 18:29:49.886: E/AndroidRuntime(371):  at com.laurenswuyts.find.it.AndroidListViewActivity.onCreate(AndroidListViewActivity.java:23)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-04 18:29:49.886: E/AndroidRuntime(371):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-04 18:29:49.886: E/AndroidRuntime(371):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:09:29.783

`ListActivity`具有您在代码中未考虑的特殊行为。如果您将`R.layout.list_item3`布局文件用作 a 的内容视图`ListActivity`，则该`ListView`布局文件中的 id**必须**具有 id `android:id="@android:id/list"`（因此`ListActivity`将知道`ListView`要从自定义布局中使用哪个小部件）。所以像这样`R.layout.list_item3`修改`ListView`项目：

```
//....
 <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageButton2" />
// ... 
```

在您的代码中，您无需寻找`ListView`正当用途：

```
lv = getListView(); 
```

# scala - 在辅助构造函数中传递可变参数

> ID：13709038
> 
> 赞同：6
> 
> 时间：2012-12-04T17:59:43.630
> 
> 标签：scala, constructor, variadic-functions

我有一个带有构造函数的类，它由一个字符集和一个字符串类型的可变参数组成。我想要一个仅带有 vararg 的便捷构造函数，它将使用 defaultCharset 和 vararg 调用主构造函数。

```
class StringMessage(charset: Charset, frames: String*) {
  def this(frames: String*) = this(Charset.defaultCharset, frames)
} 
```

不幸的是，我展示的课程给出了两个错误：

```
called constructor's definition must precede calling constructor's definition 
```

和

```
overloaded method constructor StringMessage with alternatives:
  (frames: String*)mypackage.StringMessage <and>
  (charset: java.nio.charset.Charset,frames: String*)mypackage.StringMessage
 cannot be applied to (java.nio.charset.Charset, String*)
  def this(frames: String*) = this(Charset.defaultCharset, frames)
                              ^ 
```

模拟这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T18:05:03.487

我相信这`:_*`会奏效

```
class StringMessage(charset: Charset, frames: String*) {
  def this(frames: String*) = this(Charset.defaultCharset, frames: _*)
} 
```

它指示编译器扩展 Seq，所以看起来像你写的：

```
this(Charset.defaultCharset, frames(0), frames(1), .... 
```

# mysql - 在排序的 MySql 连接查询中仅返回第一个不同的值

> ID：13709041
> 
> 赞同：2
> 
> 时间：2012-12-04T17:59:53.587
> 
> 标签：mysql, distinct

我有两个 MySql 表，一个用于“位置”，一个用于“图像”。**我需要获取在一组**特定位置拍摄的最新图像的列表（这是一个以逗号分隔的列表），但我只想返回最新图像的记录，而且我一直在努力获取到目前为止的正确结果。

所以我有：

```
Locations:
+---------------------------------------------+
| ID | Name                                   |
|----|----------------------------------------|
|  1 | Indiana                                |
|  2 | Ohio                                   |
|  3 | Illinois                               |
+---------------------------------------------+

Images:
+---------------------------------------------+
| ID | User  | Location  |  Date              |
|----|-------|-----------|--------------------|
|  1 | Ray   | 1         | 2012-06-22         |
|  2 | Robert| 3         | 2011-09-18         |
|  3 | Marie | 1         | 2012-10-01         |
|  4 | Frank | 2         | 2010-12-11         |
|  5 | Debra | 1         | 2008-02-02         |
+---------------------------------------------+ 
```

所以，现在我有以下内容：

```
SELECT Locations.Name, Images.Date, Images.User
FROM Locations INNER JOIN Images ON Locations.ID = Images.Location
WHERE Locations.ID IN ('1','3')
ORDER BY Images.Date DESC 
```

返回：

```
+---------------------------------------------+
| Name        | Date        |  User           |
|-------------|-------------|-----------------|
| Indiana     | 2012-10-01  | Marie           |
| Indiana     | 2012-06-22  | Ray             |
| Illinois    | 2011-09-18  | Robert          |
| Indiana     | 2008-02-02  | Debra           |
+---------------------------------------------+ 
```

我的问题是，我怎样才能得到它，以便结果只返回具有不同 Location.Name 值的第一条记录？所以最终的正确结果表如下所示：

```
+---------------------------------------------+
| Name        | Date        |  User           |
|-------------|-------------|-----------------|
| Indiana     | 2012-10-01  | Marie           |
| Illinois    | 2011-09-18  | Robert          |
+---------------------------------------------+ 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:01:49.213

只需使用`group by`::

```
Select tempTable.Name, tempTable.Date, tempTable.User from
(
    SELECT Locations.Name, Images.Date, Images.User, Locations.ID as locationID
    FROM Locations 
    INNER JOIN Images ON Locations.ID = Images.Location
    WHERE Locations.ID IN ('1','3')

    ORDER BY Images.Date DESC

) as tempTable GROUP BY  tempTable.locationID 
```

# javascript - Twitter API 返回时间线的未命名数组

> ID：13709043
> 
> 赞同：0
> 
> 时间：2012-12-04T17:59:59.593
> 
> 标签：javascript, arrays, api, twitter, tumblr

我正在构建一个应用程序，它使用许多不同的源（和 API）来构建一个自动更新的博客聚合。我可以使用 Tumblr 的 API 访问我想要的所有数据，并且可以使用 Twitter 的 API 查看我想要的数据，但是我将所有数据存储到我自己的对象中，以便我可以更轻松地引用它。

问题是 Twitter 返回一个看似未命名的数组，而 Tumblr 返回一个静态对象，其中包含我可以通过的部分。这是一个屏幕截图： ![在此处输入图像描述](../Images/6334fcc16760ffb69503a81454d20464.png)

如您所见，索引为 1 的对象似乎是一个未命名的数组（这是我从 Twitter 获得的数据）。现在，问题在于当我提取所有信息以提取显示顺序的相关时间戳时。这是我的代码：

```
for(var i=0;i<blogs.content.length;i++){
        if(!blogs.content[i].length){
            for(var e=0; e<blogs.content[i].response.posts.length; e++){
                blogs.dates.push(blogs.content[i].response.posts[e].timestamp);
            }
        } else {
            for (var e = 0; e<blogs.content[i].length; e++){
                //console.log( blogs.content[i].e.text );
            }
        }
    } 
```

在 else 语句中有一个 For 循环，我*试图*从中提取从 Twitter 收到的数据。但是，由于我正在查看一个未命名的数组，因此我终生无法弄清楚如何访问数据。

关于如何正确访问信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:20:11.563

我发现了这个问题，这是一个简单的语法问题，我不得不解决这个问题。这是我用来修复它的代码：

```
for(var i=0;i<blogs.content.length;i++){
        if(!blogs.content[i].length){
            for(var e=0; e<blogs.content[i].response.posts.length; e++){
                blogs.dates.push(blogs.content[i].response.posts[e].timestamp);
            }
        } else {
            for (var e = 0; e<blogs.content[i].length; e++){
                console.log( blogs.content[i][e].text );
            }
        }
    } 
```

# c# - 数据库设计删除嵌套父子情况下的父子关系

> ID：13709045
> 
> 赞同：0
> 
> 时间：2012-12-04T18:00:07.857
> 
> 标签：c#, sql, database, oracle, parent-child

在 Oracle 中，我有一个名为 Category 的表，由三列组成：
ID = 是系统生成的唯一键，
Catgeory_name = 是 300 char 和 parent_id = 可以是 -1，这意味着该类别没有父级，也可以是前面描述为 parent_id 的 ID 列中的值。

问题是当我删除一个作为父类的类别时，我还需要自动删除所有子类。我的问题是：SQL 是否提供了自动执行此操作的任何方法，或者我应该在我的上层语言（即 C#）中处理它。

例如，如果两个表之间存在外键情况，我知道 SQL 提供 ON DELETE CASCADE 以在删除原始记录请求时删除依赖记录以及父记录。

但是，我不知道 SQL 中有什么方法可以自动处理上述情况，这意味着当在上表中删除父级时，所有子级也会被删除。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:04:31.407

如果`parent_id`设置为`NULL`如果没有父项，则可以在`category`引用的主键上定义一个外键`category`

```
SQL> create table category (
  2    id number primary key,
  3    category_name varchar2(300),
  4    parent_id number references category( id )
  5  );

Table created. 
```

然后，您可以声明该外键约束以在删除父行时自动删除子行。

如果您真的想使用 -1 的魔法值来指示不存在父级而不是使用适当的`NULL`，您可能会使用 -1 将一行插入到`category`表`id`中，然后创建外键约束。但这远不如使用`NULL`.

# c# - ASP.NET Page_Load 未触发

> ID：13709048
> 
> 赞同：0
> 
> 时间：2012-12-04T18:00:13.293
> 
> 标签：c#, asp.net, events, pageload, page-init

我创建了一个 2D 数组`Board`，其中包含`GameCell`.

**默认.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link rel="stylesheet" href="includes/css/style.css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h1>ארבע בשורה</h1>
        <div id="Board">
            <asp:Label ID="Label1" runat="server"></asp:Label>
            <asp:PlaceHolder ID="MyBoard" runat="server" />
        </div>
    </div>
    </form>
</body>
</html> 
```

**默认.aspx.cs：**

```
protected void Page_Load(object sender, EventArgs e)
{
    Game.CreateControls();
}

protected void Page_Init(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        Game.Set(MyBoard, Label1);
        Game.Reset();
    }
} 
```

**游戏单元.cs：**

```
public class GameCell : ImageButton
{
    public Position Position; // Justs holds the properties of Row and Col
    public CellType Type;

    public GameCell(Position Pos)
    {
        this.Position = new Position(Pos);
        this.Type = CellType.Empty;
    }
} 
```

**游戏.cs：**

```
public class Game
{
    public const int R = 6;
    public const int C = 9;

    public static GameCell[,] Board;
    public static PlaceHolder Holder;
    public static Label Log;

    public static CellType CurrentType;

    public static string[] Images = new string[] { "red", "empty", "blue" };

    public static void Set(PlaceHolder Holder, Label Log)
    {
        Game.Reset();
        Game.Holder = Holder;
        Game.Log = Log;
    }

    public static void CreateControls()
    {
        for (int i = 0; i < Game.R; i++)
        {
            for (int j = 0; j < Game.C; j++)
            {
                Game.Board[i, j].ImageUrl = Game.ImageUrlByType(Game.Board[i, j].Type);
                Game.Board[i, j].ID = i + "_" + j;
                Game.Board[i, j].Click += new ImageClickEventHandler(Image_Click);

                Game.Holder.Controls.Add(Game.Board[i, j]);
            }
        }
    }

    public static void Image_Click(object sender, EventArgs e)
    {
        int row = 0;
        int col = int.Parse(((GameCell)sender).ID[2].ToString());

        if (Game.Board[row, col].Type == CellType.Empty)
        {
            while (row < Game.R - 1 && Game.Board[row, col].Type == CellType.Empty)
            {
                row++;
            }

            Game.SetImage(row, col);
            Game.CurrentType = (CellType)(-(int)Game.CurrentType);
            Log.Text = col + " " + row + " " + Game.CurrentType;

            Game.Board[row, col].Enabled = false;
        }
    }

    public static void SetImage(int r, int c)
    {
        Game.Board[r, c].Type = Game.CurrentType;
        Game.Board[r, c].ImageUrl = Game.ImageUrlByType(Game.CurrentType);
    }

    public static void Reset()
    {
        Game.Board = new GameCell[R, C];
        Game.CurrentType = CellType.Blue;

        for (int i = 0; i < Game.R; i++)
        {
            for (int j = 0; j < Game.C; j++)
            {
                Game.Board[i, j] = new GameCell(new Position(i, j));
            }
        }
    }

    public static string ImageUrlByType(CellType t)
    {
        return "includes/images/" + Game.Images[(int)t + 1] + ".png";
    }
} 
```

控件被渲染，并且在第一次启动项目时是可点击的，但是在我点击其中一个之后，没有控件被添加到我的 Holder ( `MyBoard`) 中。

为什么会这样？

**编辑：**

我找到了解决方案。`MyBoard`作为参数传递来`CreateControls`做到这一点。也许在 page_load 之后引用不再可靠（我将它保存在一个对象中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:10:37.433

每次`Page_Load`调用 your 时，都会重新创建控件。它们存储在静态成员中，这意味着该网站的所有用户共享一个公共板。这真的是你想要的吗？将游戏存储在 Session 中不是更好吗？（当然我不知道你的要求，但我总是尽量避免在 Web 应用程序中使用静态成员）。

一个可能的解决方案是在重新创建控件之前检查它是否不是回发。

```
if (!IsPostback)
{

} 
```

# .net - System.ExecutionEngineException：尝试 JIT 编译方法 System.Threading.Interlocked:Exchange

> ID：13709052
> 
> 赞同：4
> 
> 时间：2012-12-04T18:00:30.917
> 
> 标签：.net, mono, xamarin.ios

我知道，如果编译器认为没有使用方法，有时可以省略方法，并且您可以通过直接在代码中引用该方法来强制编译器包含它来解决此问题。但是，在这种情况下，它似乎不起作用。

这是异常和调用堆栈：

```
System.ExecutionEngineException: Attempting to JIT compile method '(wrapper managed-to-native) System.Threading.Interlocked:Exchange (System.Threading.Tasks.IContinuation&,System.Threading.Tasks.IContinuation)' while running with --aot-only. See http://docs.xamarin.com/ios/about/limitations for more information.

at System.Threading.Tasks.TaskCompletionQueue`1[System.Threading.Tasks.IContinuation].TryGetNextCompletion (IContinuation& continuation) [0x00000] in <filename unknown>:0
at System.Threading.Tasks.Task.ProcessCompleteDelegates () [0x0001b] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Threading.Tasks/Task.cs:521
at System.Threading.Tasks.Task.HandleGenericException (System.AggregateException e) [0x0001a] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Threading.Tasks/Task.cs:563
at System.Threading.Tasks.Task.TrySetException (System.AggregateException aggregate) [0x0003e] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Threading.Tasks/Task.cs:440
at System.Threading.Tasks.TaskCompletionSource`1[System.Net.WebResponse].TrySetException (IEnumerable`1 exceptions) [0x00000] in <filename unknown>:0
at System.Threading.Tasks.TaskCompletionSource`1[System.Net.WebResponse].SetException (IEnumerable`1 exceptions) [0x00000] in <filename unknown>:0
at System.Threading.Tasks.TaskCompletionSource`1[System.Net.WebResponse].SetException (System.Exception exception) [0x00000] in <filename unknown>:0
at System.Threading.Tasks.TaskFactory`1[System.Net.WebResponse].InnerInvoke (System.Threading.Tasks.TaskCompletionSource`1 tcs, System.Func`2 endMethod, IAsyncResult l) [0x00000] in <filename unknown>:0
at System.Threading.Tasks.TaskFactory`1+<FromAsyncBeginEnd>c__AnonStorey21[System.Net.WebResponse].<>m__15 (IAsyncResult l) [0x00000] in <filename unknown>:0
at Vistian.Net.Http.HttpRequestProcessor+<BeginGetResponse>c__AnonStorey3.<>m__5 (IAsyncResult result) [0x00082] in /Users/martinstafford/Projects/Vistian/vistian/common/Vistian.Net/trunk/Vistian.Net.Portable/Http/HttpRequestProcessor.cs:441
at System.Net.WebAsyncResult.CB (System.Object unused) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebAsyncResult.cs:148 
```

我尝试在有问题的类的构造函数中包含这一行，但错误仍然存​​在：

```
object dummy = System.Threading.Interlocked.Exchange( ref dummyLock, new object()); 
```

这是围绕错误的代码。抱歉有这么多，但它在上下文中得到它。调用“回调”时抛出异常 - 其中任何一个。如您所见，我正在尝试为包含 GetRequestStream 和 GetResponse 的两个异步操作的类实现异步编程模型：

```
 public static IAsyncResult BeginGetResponse(AsyncCallback callback, object state)
    {
        var requestProcessor = state as HttpRequestProcessor;

        // create the Uri of the Host and Path in the request
        // and use it to create a HttpWebRequest
        Uri u = new Uri(new Uri(requestProcessor.Request.Host), requestProcessor.Request.Path);
        requestProcessor.HttpWebRequest = WebRequest.Create(u) as HttpWebRequest;

        // set up the header of the HttpWebRequest
        requestProcessor.SetupHeader(requestProcessor.HttpWebRequest, requestProcessor.Request);

        requestProcessor.WebResponse = null;
        requestProcessor.RaisedException = null;

        // set up an event to be used to 'timeout' the forthcoming async process
        var syncRef = new System.Threading.AutoResetEvent(false);

        System.Diagnostics.Debug.WriteLine(string.Format("HttpRequestProcessor.BeginGetResponse: started method={0}", requestProcessor.Request.Method));

        // perform the request using the Async method
        // GET and POST requests are processed differently
        if (requestProcessor.Request.Method == HttpMethod.POST)
        {
            // create the request content using the serialiser
            var bytes = requestProcessor.Encoder.Encode(requestProcessor.Request.Data, requestProcessor.Request.ContentType);

            System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: BeginGetRequestStream started");

            // start the async process by adding the content to the request
            requestProcessor.HttpWebRequest.BeginGetRequestStream((IAsyncResult result) =>
            {
                // the asyncronous Get RequestStream has finished in some way
                // complete the Get RequestStream process by calling EndGetRequestStream

                // get the HttpWebRequest provided in the 'state' parameter and
                // use it to call EndGetRequestStream
                var request = result.AsyncState as HttpWebRequest;
                try
                {
                    // fill the request stream with the content
                    using (Stream requestStream = request.EndGetRequestStream(result))
                    {
                        requestStream.Write(bytes, 0, bytes.Length);
                    }

                    System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: EndGetRequestStream");
                }
                catch (Exception e)
                {
                    // if the filling of the request stream fails, finish the Async process here
                    System.Diagnostics.Debug.WriteLine(string.Format("HttpRequestProcessor.BeginGetResponse: EndGetRequestSteam failed. Uri={0}", request.RequestUri));

                    // remember the exception, to be picked up by the subsequent call in to EndGetResponse
                    requestProcessor.RaisedException = e;

                    // clear the timeout event to indicate the async process has finished
                    syncRef.Set();

                    // call the callback as the async process is finished
                    callback(new AsyncResult(requestProcessor, true));

                    return;
                }

                System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: BeginGetResponse started");

                // the HttpWebRequest has the request content in it
                // send the request and get the response
                request.BeginGetResponse((IAsyncResult responseResult) =>
                {
                    // the Async process GetResponse has finished in some way
                    // get the HttpWebRequest provided as a parameter and use it
                    // to complete the GetRespone process

                    HttpWebRequest req = responseResult.AsyncState as HttpWebRequest;
                    try
                    {
                        requestProcessor.WebResponse = req.EndGetResponse(responseResult);
                        System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: EndGetResponse");
                    }
                    catch (Exception e)
                    {
                        // if getting the response fails, catch and remember the exception
                        // for the subsequent call in to EndGetResponse
                        System.Diagnostics.Debug.WriteLine(string.Format("HttpRequestProcessor.BeginGetResponse: EndGetResponse failed. Uri={0}", req.RequestUri));
                        requestProcessor.RaisedException = e;
                    }

                    // clear the timeout timer event
                    syncRef.Set();

                    // call the async callback 
                    callback(new AsyncResult(requestProcessor, true));

                    System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: POST callback complete");

                }, request);

            }, requestProcessor.HttpWebRequest);
        }
        else
        {
            requestProcessor.HttpWebRequest.BeginGetResponse((IAsyncResult responseResult) =>
            {
                HttpWebRequest req = responseResult.AsyncState as HttpWebRequest;

                try
                {
                    requestProcessor.WebResponse = req.EndGetResponse(responseResult);
                    System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: EndGetResponse");
                }
                catch (Exception e)
                {
                    System.Diagnostics.Debug.WriteLine(string.Format("HttpRequestProcessor.BeginGetResponse: EndGetResponse failed. Uri={0}", req.RequestUri));
                    requestProcessor.RaisedException = e;
                }

                syncRef.Set();

                callback(new AsyncResult(requestProcessor, true));

                System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: GET callback complete");

            }, requestProcessor.HttpWebRequest);
        }

        // wait for the async process to finish or timeout
        if (!syncRef.WaitOne(requestProcessor.Request.Timeout))
        {
            // async process has time out
            System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.BeginGetResponse: BeginGetStreamRequest timed out");

            // abort the async process and create and remember an exception
            // to be picked up by the call in the EndGetResponse
            requestProcessor.HttpWebRequest.Abort();
            requestProcessor.RaisedException = new TimeoutException("loading request stream timed out");
        }

        return new AsyncResult(requestProcessor, false);
    }

    public static WebResponse EndGetResponse(IAsyncResult result)
    {
        System.Diagnostics.Debug.WriteLine("HttpRequestProcessor.EndGetResponse:");

        var requestProcessor = result.AsyncState as HttpRequestProcessor;

        if (requestProcessor.RaisedException != null)
        {
            throw requestProcessor.RaisedException;
        }
        return requestProcessor.WebResponse;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:01:15.077

将此添加到构造函数中即可：

var dummy = System.Threading.Interlocked.Exchange( ref dummyTask, System.Threading.Tasks.Task.Factory.StartNew (() =>{}));

# xcode - XCode 的构建缓存在哪里？- 正在存储旧数据，这会干扰我的构建过程

> ID：13709058
> 
> 赞同：0
> 
> 时间：2012-12-04T18:00:41.303
> 
> 标签：xcode

过去，我经常遇到 Xcode 想要查找不再存在并从 XCode 中删除的文件的情况；并且得出的结论是，XCode 正在某个构建目录中的某处缓存某些数据，并且至少查询其中的一部分而不是 XCode 工作区本身。

这是我现在遇到的情况的一个示例，表明情况确实如此：

```
I had a workspace W, containing projects M and N, in directory D.
- To this workspace I added a new project O.
- I then deleted the entire contents of directory D.
- From a backup I copied an older copy of the workspace W into directory D (this older copy only contains projects M and N).
- If I launch the workspace from the backup location it builds cleanly.
- But if I launch the workspace from the directory D, then when building it complains that project O is missing. Yet I deleted the entire contents of directory D and copied the workspace which didn't contain project O into that location. 
```

因此，Xcode 必须在构建过程中的某个地方缓存一些数据，这就是为什么它正在寻找项目 0，即使它不再存在于工作空间中。

这个位置在哪里，以便我可以删除它的内容？

（它不是管理器/项目/派生数据，因为它已被删除。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:40:06.967

除了派生数据之外，一些数据位于

/var/folder/%RANDOM%/%RANDOM%/%RANDOM%/com.apple.DeveloperTools /var/folder/%RANDOM%/%RANDOM%/%RANDOM%/com.apple.dt.Xcode

# java - 在服务器上运行的 jvm 中反射真的很慢吗

> ID：13709061
> 
> 赞同：0
> 
> 时间：2012-12-04T18:00:44.060
> 
> 标签：java, jvm

我知道反射有点慢，因为所有检查/验证都是在运行时执行的。

假设我正在使用反射和调用方法来实例化一个类。**所以我的问题是调用会总是很慢**（即使它比正常情况慢 1%）还是第一次？假设这个类是我的 Web 应用程序的一部分，它被多次调用。

我困惑的另一个角度是，现在大多数现代 JVM 都使用 JIT 编译器。所以 JVM 不会尝试优化后续调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:05:00.117

是的，即使在连续调用时也慢得多。它很慢，因为必须有调用设置和拆卸行为，否则编译器会在字节码中硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:06:07.280

是的，调用总是很慢。JIT 编译器优化 Java 字节码并将其编译为本机代码；它不会记忆或以其他方式缓存方法的结果，调用反射 API 意味着调用方法。编译后的本机代码仍然会在每次调用时调用运行时的反射工具，*这*就是慢的原因。

使用反射调用方法总是比直接调用要慢得多。但是，请注意，方法的主体将以正常速度执行——只有调用方法的过程会很慢。

与往常一样，分析您的代码。如果通过反射进行的实例化和方法调用成为瓶颈，则进行相应的优化。（例如，如果调用的方法正在查询数据库，那么该操作很可能是您的瓶颈，反射引入的开销不太可能成为问题。）

# asp.net - 添加 1-1 关系表的挑战（用户和用户设置）

> ID：13709062
> 
> 赞同：1
> 
> 时间：2012-12-04T18:00:52.430
> 
> 标签：asp.net, .net, sql, sql-server, entity-framework

我的问题与这个问题有关：[实体框架一对一映射问题](https://stackoverflow.com/questions/1761362/entity-framework-one-to-one-mapping-issues)

我有一个已经有一堆记录的用户表。

```
Users (Id, UserName, Password, FullName, Gender) 
```

我需要为每个用户添加一堆通知选项：

```
NotifyForNewComment
NotifyForNewPost
NotifyWhenFriendSignsUp 
```

稍后我可能需要添加更多选项，但总会有 1-1 的关系，所以我的问题是是否将它们存储在单独的表中，比如 UserSettings，或者只是将它们作为列添加到 Users 表中。

在链接的问题（上面）中，建议是创建一个新表并将 UserSettings 表中的 UserId 作为主键（否则，Entity Framework 不喜欢它）。如果这是我必须做的，那么我有几个问题：

1.  我所有的表都有一个 Id 列。那么 UserSettings 将没有 Id 列，因为 UserId 将是主键？

2.  我必须为 UserSettings 表打开 Identity Insert，这样当我插入新的用户记录时，我还可以插入带有 UserId 的 UserSettings 记录？

3.  鉴于我在 Users 表中已经有一堆记录，如果我现在要引入与 Users 表具有 1-1 关系的新 UserSettings 表，我该怎么办？我是否只运行一个脚本来为用户表中的每个用户添加一些默认值的记录？还是我让它变成0-1的关系？

4.  既然是 1-1 关系，我是否应该不用担心新表，而只需将它们作为列添加到现有的用户表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:55:49.707

我认为您错过了 UserSettings 表的要点。它会有如下列：

*   用户设置 ID
*   用户身份
*   通知

它还可能包含通知的创建时间、当前是否启用以及其他信息。

如果您确切知道通知是什么，并且它们不会更改，那么您可以考虑将它们作为单独的列添加到用户表中。

另一方面，这是一个自然的 1-N 关系，您可能应该这样实现它。

# jquery - 奇怪的悬停错误

> ID：13709067
> 
> 赞同：0
> 
> 时间：2012-12-04T18:01:04.163
> 
> 标签：jquery, html, css

我有一个带有图像的响应式模态框。

```
Code: 
```

[http://jsfiddle.net/YCcNY/34/](http://jsfiddle.net/YCcNY/34/)

在其中，当您将鼠标悬停时，图像会变大。有时，将鼠标悬停在第一行的最后一张图片上时，格式会中断。如果它不适合您调整窗口大小。

有谁知道如何解决这一问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:08:31.930

这是没有高度的浮动元素的正常行为。修复它给你的`li`物品一个固定的高度 -[**演示**](http://jsfiddle.net/YCcNY/38/)

```
.PhotoContent li {
    width: 20%; 
    height: 100px; /* THIS */
    float: left;
    font-weight: 200;
    clear:none;
    color: rgb(150,150,150);
    cursor: pointer;
    outline: 0px solid green;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:53:17.300

佐尔坦的回答非常好。您还可以考虑使用 CSS 转换进行缩放。图像会稍微模糊，但好处是变换不会影响图像的实际大小，只会影响渲染的方式。

```
li:hover img {
    -moz-transform: scale(1.1);
} 
```

# java - 如何在 JBoss 6 中使用 slf4j 1.7.2？

> ID：13709070
> 
> 赞同：4
> 
> 时间：2012-12-04T18:01:18.153
> 
> 标签：java, logging, jboss, slf4j, jboss6.x

在服务器端，我的代码中的日志记录语句目前从 SLF4J 1.7.2 API 通过 slf4j-log4j12 绑定，通过 JBoss 6 的 log4j logmanager 进入 JBoss-logging。

我正在消除对 log4j 的依赖。客户端，这意味着切换到 logback。服务器端，我想拉出 slf4j-log4j12 绑定，但这似乎会引起问题。JBoss 6 捆绑了它自己陈旧的 slf4j API 和绑定，但它们似乎来自 slf4j 1.5.5 左右。

从以下备选方案中，我最好的选择是什么？

*   我可以继续让服务器端日志通过 slf4j-log4j12 绑定流入 jboss-logging。这似乎是最好的，但我希望完全抛弃 slf4j-log4j12 绑定作为摆脱 log4j 的一部分。另外，这不会消除使用新版本 SLF4J 的许多优势吗？
*   在 JBoss 6 中升级 slf4j API、slf4j-jboss-logmanager 和/或 jboss-logging，以便我可以让日志语句直接从 slf4j 1.7.2 API 流入 jboss-logging。这可能吗？如果是这样，我如何找到这些组件的新版本？
*   在服务器端切换到 logback，这使我完全脱离了 JBoss 日志记录，可能意味着我必须管理一个单独的日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T14:22:25.813

您可以使用 slf4j-jboss-logmanager 将 slf4j-api 连接到 jboss-logging，就像 Jan 的这两个问题一样？

[如何在 JBoss6 AS 中“激活”SLF4J 登录](https://stackoverflow.com/questions/3414689/how-to-activate-slf4j-logging-in-jboss6-as)

[SLF4J logger.debug() 未登录 JBoss 6](https://stackoverflow.com/questions/3419394/slf4j-logger-debug-does-not-get-logged-in-jboss-6)

# wordpress - 谷歌日历 - 删除私人链接 - 任何替代方案？

> ID：13709073
> 
> 赞同：1
> 
> 时间：2012-12-04T18:01:27.783
> 
> 标签：wordpress, google-calendar-api

我需要将谷歌日历嵌入到受密码保护的（wordpress）网站上。然而，谷歌最近似乎取消了获取“私人链接”的能力，而使日历可嵌入的唯一方法是：

*   完全公开，包括搜索引擎等（不可能）
*   为每个我们想要读取日历的用户创建一个谷歌帐户，并强制他们再次登录以查看日历（也不是特别合理的可能性）

有没有办法嵌入一个设置为私人的日历？还是有可行的替代方案？我们需要在多个管理员之间进行协作和同步的日历访问，并且能够将这些数据以只读方式嵌入到网站中，并且仍然保持日历对公众的隐私。

# asp.net-mvc-3 - 客户端验证不使用外键

> ID：13709078
> 
> 赞同：0
> 
> 时间：2012-12-04T18:01:38.503
> 
> 标签：asp.net-mvc-3

客户端验证仅适用于外键。

我有

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

包括以及

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

在我的 web.config 文件中设置。

没有自定义属性或任何东西。这很简单

```
[Required(ErrorMessage = "Fiscal year is required")]
[Display(Name = "Fiscal Year")]
public int FiscalYearId { get; set; } 
```

对此有什么想法吗？我已经搜索了一个解决方案，但我发现的只是它根本不起作用的情况，并且大多数解决方案都说要确保上述两个脚本的来源并将上述两个键添加到 web.conifg 文件中。

我没有收到任何 js 错误，并且我使用 firebug 进行了监控。一切似乎都完美无缺，但显然并非如此。

一旦我更正了非外键字段并重新提交，数据验证就会在服务器端工作。这是一个问题，因为它创建了双重验证并且惹恼了用户。

非常感谢您的帮助。

下面是 Html 部分。它包含在 using 块中。它是标准的 MVC3 生成的 CRUD 代码。

```
<div class="editor-label">
    <label for="FiscalYearId">Fiscal Year</label>
</div>
<div class="editor-field">
    <select id="FiscalYearId" name="FiscalYearId">
        <option value="">---Select Fiscal Year---</option>
        <option value="1">FY2013</option>
    </select>
    <span class="field-validation-valid" data-valmsg-for="FiscalYearId" data-valmsg-replace="true"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:43:32.763

我认为 html 中没有呈现元数据属性。在你看来试试这个：

```
if (this.ViewContext.FormContext == null) 
{
    this.ViewContext.FormContext = new FormContext(); 
} 
```

# jquery - Firefox 扩展中的 jQuery，在全局命名空间中没有冲突

> ID：13709079
> 
> 赞同：2
> 
> 时间：2012-12-04T18:01:38.430
> 
> 标签：jquery, firefox, firefox-addon, add-on, browser-extension

我已经阅读了很多关于这个问题的帖子，并尝试了所有包含 jQuery 的方法。

如果我在 xul 文件中加载 jQuery 并将其存储在一个变量中，它就可以工作。（如[如何在 Firefox 扩展中使用 jQuery](https://stackoverflow.com/questions/491490/how-to-use-jquery-in-firefox-extension)）

```
jQuery.noConflict();
sbsh.safeWalletUtils.$ = function (selector, context) {
    return new jQuery.fn.init(selector, context || doc);
};
sbsh.safeWalletUtils.$.fn = sbsh.safeWalletUtils.$.prototype = jQuery.fn; 
```

但是，我怀疑这里的建议解决方案要好得多： http://forums.mozillazine.org/viewtopic.php?f=19& [t=2105087](http://forums.mozillazine.org/viewtopic.php?f=19&t=2105087)

```
loadjQuery: function(wnd){
  var loader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"]
 .getService(Components.interfaces.mozIJSSubScriptLoader);
  loader.loadSubScript("chrome://clhelper/content/jquery/jquery-1.5.js",wnd);
  var jQuery = wnd.jQuery.noConflict(true);
  loader.loadSubScript("chrome://clhelper/content/jquery/jquery.hoverIntent.js", jQuery);
  return jQuery;
 }, 
```

在页面加载事件处理程序中：

```
var doc = event.originalTarget;
var wnd = doc.defaultView;
// load jQuery and save it as a property of the window
myprivatejQuery = loadjQuery(wnd) 
```

但是我不断收到 wnd.jQuery undefined ..（链接中很少有人说这是问题所在）

我该怎么办？如何使用 jQuery 而不必担心 Firefox 扩展中的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:21:33.653

经过更多调查，感谢 Omri Baumer 的不懈努力。

我们现在明白了为什么会出现错误。

正确的方法不是在 xul 文件中作为包含（我怀疑），而是通过调用解包的 js 对象：

```
// correct function to load jQuery
var loadjQuery = function(wnd){
  var loader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"]
   .getService(Components.interfaces.mozIJSSubScriptLoader);
   loader.loadSubScript("chrome://sbshsafewallet/content/jquery-1.8.3.js", wnd);
   var jQuery = XPCNativeWrapper.unwrap(wnd).$;
   jQuery.noConflict(true);
  return jQuery;
};

// field to store the jQuery for the current document window (as there can be multiple tabs)
var jQueryForWindow = null;

// event to call on window load (didn't include the code, left for reader to do)
windowLoad = function (event)
{
    var appcontent = document.getElementById("appcontent"); // browser  
    appcontent.addEventListener("DOMContentLoaded", pageLoadedInit, false);
}

// load jQuery on DOMContentLoaded event
pageLoad = function (event) {
      var doc = event.originalTarget;
      var wnd = doc.defaultView;
      jQueryForWindow = loadjQuery(wnd);
}

//example of function using the jQuery
function usesjQuery()
{
   var $ = jQueryForWindow;
   //do something with jquery here
} 
```

希望这可以帮助所有被卡住的人！

再次感谢 Omri Baumer！

# wsdl - `Java2WSDL` 中的 `extra classes` 参数有什么作用？

> ID：13709081
> 
> 赞同：0
> 
> 时间：2012-12-04T18:01:43.880
> 
> 标签：wsdl, axis2, java2wsdl

有谁知道工具中的`extra classes`参数是什么`Java2WSDL`意思？

[Java2DSDL 参考](http://axis.apache.org/axis2/java/core/docs/reference.html)

我想回答[这个问题](https://stackoverflow.com/questions/13644630/could-the-web-service-generated-with-java2wsdl-include-api-from-more-than-one)，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:28:28.800

它用于在 WSDL 定义中包含那些其父级显示为返回类型或参数的类型。考虑一个非常简单的例子：

```
public class DemoService {
    public Animal pickRandomAnimal() {
        return new Dog(); // or any other animal
    }
} 
```

.. Animal 是一个接口。在 WSDL 生成时，Axis2 将无法自动跟踪您可能期望返回的所有可能的 Animal 实现。没有 extraClasses 你会得到这样的东西：

```
 <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://demo.com/xsd">
        <xs:complexType name="Animal">
            <xs:sequence>
                <xs:element minOccurs="0" name="animalName" nillable="true" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
    </xs:schema> 
```

.. 如果您添加 extraClasses="com.demo.Dog"，您将涵盖 WSDL 模式部分中所需的所有类型：

```
 <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://demo.com/xsd">
        <xs:complexType name="Animal">
            <xs:sequence>
                <xs:element minOccurs="0" name="animalName" nillable="true" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
        <xs:complexType name="Dog">
            <xs:sequence>
                <xs:element minOccurs="0" name="animalName" nillable="true" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
    </xs:schema> 
```

# iphone - 在 iPhone 和 iPad 上使用动态创建的缩略图滚动视图

> ID：13709082
> 
> 赞同：0
> 
> 时间：2012-12-04T18:01:46.500
> 
> 标签：iphone, ios, ipad, uiscrollview, thumbnails

我需要一个长的可滚动视图，每行有 2 个缩略图（壁纸）。

每个缩略图都有一个分享和下载照片的按钮，当您单击缩略图时，它会显示全尺寸壁纸。所以我正在考虑制作一个包含缩略图和两个按钮的自定义视图（200x200），并根据服务器上有多少壁纸动态地将它们添加到滚动视图中。

像这样的东西：

```
NSUInteger i;
int xCoord=0;
int yCoord=0;
int thumbnailWidth=200;
int thumbnailHeight=200;
int buffer = 10;
for (i = 1; i <= [items count]; i++)
{
    UIView *aView = [[ThumbnailView alloc] initWithThumnailAtIndex: i ];
    aView.frame     = CGRectMake(xCoord, yCoord, thumbnailWidth, thumbnailHeight );
    [scrollView addSubview:aView];

    xCoord += thumbnailWidth + buffer;
    yCoord += thumbnailHeight + buffer;
}
[scrollView setContentSize:CGSizeMake(700, yCoord)]; 
```

你认为这是一个好方法吗？另外，如果滚动视图中有很多缩略图，我将如何处理缩略图的延迟加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:08:11.180

我建议您将 UITableView 与自定义 UITableViewCell 实现一起使用。tableview 将自动处理单元格的回收，因此您无需担心性能。

您可以在视图初始化期间预加载所有资产，然后在 tableview 的数据源中简单地使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:13:21.083

我会使用 UITableView 并且每个单元格都包含两个图像。看看[这个答案。](https://stackoverflow.com/a/8141179/545599)

关于加载图片，尝试使用EGOImageLoader，非常简单有效。这是[Github 项目](https://github.com/enormego/EGOImageLoading)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:18:05.053

正如这里的其他人所说，使用 UITableView。我将补充一点，您应该使用自定义 UITableViewCell 子类。创建类，然后使用 Storyboards 制作带有原型单元格的表格视图场景。将原型单元的类设置为您的单元子类。在情节提要的原型单元格中添加尽可能多的图像视图、标签、按钮以及任何您想要的废话，然后使用 IBOutlets 将它们连接到您的自定义类。现在，当需要在单元格中显示某些内容时，只需将包含所有所需信息的对象或字典传递给自定义单元格子类，并让它通过插座填充各种视图。这是一个教程：[http ://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)

# pls-00103 - “PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：;” 谁能发现我的代码中的错误？

> ID：13709084
> 
> 赞同：1
> 
> 时间：2012-12-04T18:01:49.207
> 
> 标签：pls-00103

我正在关注一个名为“Adventure Travel”的 Oracle 指南，在指南中它说要创建这个过程：

```
CREATE OR REPLACE PROCEDURE
add_country_for_activity(p_activity_num AT_COUNTRY_ACTIVITIES.activity_num%TYPE,p_country_id AT_COUNTRY_ACTIVITIES.country_id%TYPE)
IS
BEGIN
INSERT INTO AT_COUNTRY_ACTIVITIES (country_id,activity_num) VALUES (p_country_id,p_activity_num);
END; 
```

但是当我在 Apex 对象浏览器中查看此过程时，它说它有“预期；...”错误。谁能看到这段代码中的错误在哪里？提前致谢。

# c# - 如何在 C# 中显示动画文本

> ID：13709088
> 
> 赞同：0
> 
> 时间：2012-12-04T18:01:58.777
> 
> 标签：c#, forms, animation, text

我有一个四连冠的比赛。有没有一种方法可以以动画方式显示文本？我的意思是，在每一轮显示第一轮写在屏幕上之后..第一轮结束后显示第二轮。

我的意思是显示文本不是以标签的形式显示，而是像在线游戏中显示的文本只是出现在屏幕上并在几秒钟后消失......不知道这是否可能！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:21:49.520

您需要在游戏获胜时通过获取表单 Graphics 对象在表单上手动绘制它。

```
Graphics g = this.CreateGraphics();
g.DrawString("Game Won!", DefaultFont, Brushes.Red, x,y); 
```

这是上下文中的形式，x,y 是绘制文本的坐标

当然，正如其他人所提到的，您必须做一个计时器来更改 x、y 或其他属性，例如每个动画帧的字体大小。您需要在单独的线程上执行此操作并双缓冲结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:05:10.467

我不知道你所说的动画到底是什么意思，但总的来说，你可以创建一个计时器，以你希望它动画的方式“动画”你的文本，比如每 20 毫秒左右。因此，例如，如果您只想将文本从右向左移动，您可以`myText.X += 5`在计时器经过处理程序中设置或类似的东西。

# sql - sql查询在表中查找第二个非空值（oracle）

> ID：13709091
> 
> 赞同：3
> 
> 时间：2012-12-04T18:02:24.550
> 
> 标签：sql, oracle

我有一个表，其中有 n 列和 n 列。一些列名如下

```
c, c2,c3,c4,c5  , c25

sample data
c1    c2     c3   c4  c5  (consider only 5 in this case)
x     y      z    z  y
x     y
x
a     b     j     k
a     c      g    h  i
k     l      m    n  o 
```

现在 op = 第二个非空值来自上述数据的右侧样本 op

```
z
x
x  (special case as no data left of x)
j
h
n 
```

不能使用 COALESCE 广告我需要第二个不是 null 不是第一个

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:48:51.283

您可以使用更复杂的`case`语句来做到这一点：

```
select (case when c5 is not null
             then coalesce(c4, c3, c2, c1)
             when c4 is not null
             then coalesce(c3, c2, c1)
             when c3 is not null
             then coalesce(c2, c1)
             else c1
        end)
. . . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:27:16.640

就像是：

```
 select nvl2(c5,c4,nvl2(c4,c3,nvl2(c3,c2,c1))) result
 from   my_table 
```

未测试。

# bash - 使用 bash 循环并向所有文件添加扩展名

> ID：13709095
> 
> 赞同：1
> 
> 时间：2012-12-04T18:02:32.573
> 
> 标签：bash

我有一堆电子邮件文件在文件夹和子文件夹中递归传播，我需要将扩展​​名 .eml 添加到除目录之外的所有文件，所以现在我拥有的是以下内容

这会递归遍历目录并仅列出文件名

```
find a/ -name "*" -type f 
```

如何使用 .eml 扩展名重命名文件名？

我有这个脚本可以做我想做的事，但它不能递归工作

```
#!/bin/bash

for i in * do 
e=`echo $i.eml`
echo $e
mv $i $e
done 
```

我如何结合2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:04:26.200

对于许多版本`find`，您可以编写：

```
find a/ -type f -exec mv '{}' '{}.eml' \; 
```

# c# - 调用自定义会员提供者的自定义函数

> ID：13709096
> 
> 赞同：0
> 
> 时间：2012-12-04T18:02:38.297
> 
> 标签：c#, .net, asp.net-mvc, asp.net-membership

我有一个自定义会员提供程序，如下所示：

```
public class PMembershipProvider : MembershipProvider
{
    public IMembershipService Account { get; set; }

    public PMembershipProvider()
    {
        this.Account = new UserModel();

    }

    public override bool ValidateUser(string username, string password)
    {
        return Account.Login(username, password);
    }

    public void DisposeContext()
    {
        Account.Dispose();
    }
} 
```

会员服务界面如下：

```
public interface IMembershipService
{
    bool Login(string userName, string password);
    void Dispose();
} 
```

因此，当我登录用户时，我可以像这样调用我的用户模型的登录方法：

```
public class UserController : Controller
{
    public ActionResult Login(UserModel model)
    {
        if (Membership.ValidateUser(model.name, model.password)) {
            FormsAuthentication.SetAuthCookie(model.name, false, MvcApplication.BASE_URL);
            return RedirectToAction("Index", "Home");
    }
} 
```

我遇到了一些奇怪的用户问题，我认为这些问题与未处理的 EF 对象上下文有关。基于[这个答案](https://stackoverflow.com/a/6237398/1324019)，我想尝试手动处理成员提供者使用的对象上下文。我希望这发生在请求结束时，为此我想覆盖`Dispose`我的用户控制器上的方法：

```
protected override void Dispose(bool disposing)
{
    base.Dispose(disposing);
    Membership.DisposeContext(); //this is what I want to do, but it doesn't work
} 
```

当我尝试调用`DisposeContext`自定义成员资格提供程序的方法时，它找不到该方法。（“System.Web.Security.Membership”不包含“DisposeContext”的定义）

如何在Membership 使用**的同一对象上**`DisposeContext`调用我的方法？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:06:30.357

该类仅提供静态方法来调用默认成员资格提供程序上的已知方法[`Membership`。](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)要调用自定义方法，您需要访问[`Membership.Provider`属性](http://msdn.microsoft.com/en-us/library/system.web.security.membership.provider.aspx)，将其强制转换为您的自定义提供程序，然后调用该方法：

```
((PMembershipProvider)Membership.Provider).DisposeContext(); 
```**

# ruby - 这个救援示例有什么问题？

> ID：13709100
> 
> 赞同：5
> 
> 时间：2012-12-04T18:02:47.480
> 
> 标签：ruby, exception, rescue

```
x = StandardError.new(:hello)
y = StandardError.new(:hello)
x == y # => true
x === y # => true

begin
  raise x
rescue x
  puts "ok" # gets printed
end

begin
  raise x
rescue y
  puts "ok" # doesn't get printed
end 
```

为什么不打印第二个“ok”？我想不通。我在[这里](http://www.amp.carboni.ca/blog/p/Ruby-Did-You-Know-That-2-Exception-Handling)读到ruby​​ 使用`===`运算符将​​异常与救援子句匹配，但表面上并非如此。

我正在使用 Ruby 1.9.3

编辑：所以似乎在做之后，`raise x`不再持有。似乎因为和[不再有相同的回溯](http://www.ruby-doc.org/core-1.9.3/Exception.html#method-i-3D-3D)。`x == y``x === y``x``y`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T20:07:16.737

我认为这是一个错误，或者说是 Ruby 1.9 的规格不足。请注意，Ruby 2.0 提出了一个

```
TypeError: class or module required for rescue clause 
```

在第 8 行和第 14 行。

请注意，`raise`也不一定会像您认为的那样做。当你`raise`是一个对象时，你实际上并没有提出*那个*对象，你提出了一个*新*对象，它是根据这些简单的规则从你传递的对象构造的：

*   如果对象响应`exception`，则调用`exception`对象并提高返回值
*   如果对象是 的子类`Exception`，则调用`new`并提高返回值
*   否则失败
*   如果上述任何方法的返回值不是`Exception`

所以，你实际上*不是*在加注`x`，而是在加注`x.exception`。但是，根据`Exception#exception` `x.exception`is的文档`x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:04:24.393

我只想在表格中添加一些内容：OP 代码表明这两个异常是相同的，但它们不是 - 此外，我想说明 OP 的含义：

> 所以看起来在做 raise x 之后，x == y 和 x === y 不再成立。似乎是因为 x 和 y 不再具有相同的回溯。

```
 x = StandardError.new(:hello)
 y = StandardError.new(:hello)
 class Object
   def all_equals(o)
     ops = [:==, :===, :eql?, :equal?]
     Hash[ops.map(&:to_s).zip(ops.map {|s| send(s, o) })]
   end
 end

 puts x.all_equals y # => {"=="=>true, "==="=>true, "eql?"=>false, "equal?"=>false}

 begin
   raise x
 rescue
   puts "ok" # gets printed
 end

 puts x.all_equals y # => {"=="=>false, "==="=>false, "eql?"=>false, "equal?"=>false} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:13:01.557

**编辑**：为了澄清未来回复的问题，因为我认为我的回复不正确，这里的微妙之处在于`x`and`y`是*instances*而不是*classes*，通常你会在`raise`声明中使用 classes。

* * *

如果预期的行为是在第二次救援时打印，`y`则不会成功。您正在引发 class 异常`x`，并且您没有可以处理的救援子句`x`。如果你抓住`StandardError`了通用基类，你会看到第二个块打印了“ok”，但是：

```
begin
  raise x
rescue StandardError
  puts "ok"
end 
```

关于#===，我认为问题在于当你提出时，你处理的是一个*实例*而`x`不是`x`一个类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:25:01.563

看来救援的定义是：

```
[rescue [error_type [=> var],..] 
```

严格来说也不`x`是. 它们是错误类型的实例。我认为您并没有真正按照您在那里的方式运行有效代码。`y``error_type`

如果你运行：

```
begin
  raise x
rescue y.class
  puts "ok"
end 
```

然后它将按预期工作。

另请注意，在 Ruby 1.8 上既不`x == y`也不`x === y`返回`true`。

# java - 用另一个字符串拆分一个字符串

> ID：13709101
> 
> 赞同：1
> 
> 时间：2012-12-04T18:02:51.710
> 
> 标签：java, string, split, emoticons

我想知道如何做这样的事情：

```
String[] emoticon;
emoticon=e.split(":)"); 
```

是否可以使用 split() 来完成；还是有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:04:43.860

假设您尝试使用笑脸`:)`作为分隔符，您必须考虑：`split()`接受正则表达式，因此您必须转义（使用`\\`）您使用的任何[特殊字符](http://www.regular-expressions.info/characters.html)（包括但不限于`()[]+*`）：

```
emoticon=e.split(":\\)"); 
```

[**IDEOne 上的概念验证**](http://ideone.com/Oc8M87)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T18:05:14.133

使用`Pattern.quote`：

```
emoticon = e.split(Pattern.quote(":)")); 
```

它将围绕您`String`的`\Q`并`\E`转义`\E`您的模式中的任何子字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T18:04:46.027

你需要避开大括号：

```
emoticon=e.split(":\\)"); 
```

但是你知道，这会去掉表情符号，对吧？

要从一些文本中检索它，你需要这样的东西：

```
List<String> emoticons = new ArrayList<String>();
// adjust regex to find more emoticons
Pattern pattern = Pattern.compile(":\\)");
Matcher matcher = pattern.matcher(input);
while (matcher.find()) {
    emoticons.add(matcher.group());
} 
```

# silverstripe - 使用 RenderWith 方法将表单传递给模板

> ID：13709102
> 
> 赞同：0
> 
> 时间：2012-12-04T18:02:52.230
> 
> 标签：silverstripe

我正在使用 Willr 的 Silverstripe 评论模块以及 DataObjects as Pages 的实现。

评论模块允许您将评论附加到数据对象 - 我已经这样做了。我遇到的问题是，当我尝试使用 renderwith 将自定义字段从 Datobject 传递到模板时，传递的 CommentsForm 会呈现表单，但不会将通过传递的表单所做的任何评论与 DataObject 关联。

这是我的 PostsPageHolder 上的操作和 renderWith 方法：

```
 public function view($request) {
    $segment = $request->param('ID');

    if ($obj = Post::get()->filter('URLSegment', $segment)->First()) :
        switch ($obj->Type) {
            case 'News-Post' :
                return $this->renderWith(
                    array('PostsPage_view_news', 'Page'),
                    array(
                        'Object'        => $obj,
                        'Type'          => $obj->Type,
                        'Title'         => $obj->Title,
                        'Entry'         => $obj->Entry,
                        'CommentsForm'  => $obj->CommentsForm
                    )
                );
                break;
    ...
} 
```

有谁知道我如何使用 RenderWith() 数组通过表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:20:39.177

尝试`customise(array)`如下所示[https://docs.silverstripe.org/en/3/tutorials/site_search/#showing-the-results](https://docs.silverstripe.org/en/3/tutorials/site_search/#showing-the-results)

```
return $this->customise(array(
    'Object'        => $obj,
    'Type'          => $obj->Type,
    'Title'         => $obj->Title,
    'Entry'         => $obj->Entry,
    'CommentsForm'  => $obj->CommentsForm
))->renderWith(
    array('PostsPage_view_news', 'Page')
); 
```

# sharepoint - Visual Studio 部署未激活 SharePoint 功能

> ID：13709103
> 
> 赞同：4
> 
> 时间：2012-12-04T18:02:53.793
> 
> 标签：sharepoint, deployment, claims-based-identity, sharepoint-feature

我有一个简单的 SharePoint 项目，其中包含一个场范围的功能。该功能不包含任何模块；它只是`SPClaimProviderFeatureReceiver`指派生类，而派生类又指向`SPClaimProvider`派生类。

当我告诉项目进行部署时，它确实成功地将程序集添加到 GAC，并在 中的文件夹中成功创建 Feature.xml `C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\FEATURES`，并提供以下输出：

```
------ Build started: Project: xxx, Configuration: Debug Any CPU ------
  xxx -> E:\xxx\bin\AnyCPU\Debug\xxx.dll
  Successfully created package at: E:\xxx\xxx.wsp
------ Deploy started: Project: xxx, Configuration: Debug Any CPU ------
Active Deployment Configuration: Default
Run Pre-Deployment Command:
  Skipping deployment step because a pre-deployment command is not specified.
Recycle IIS Application Pool:
  Skipping application pool recycle because no matching package on the server was found.
Retract Solution:
  Skipping package retraction because no matching package on the server was found.
Add Solution:
  Adding solution 'xxx.wsp'...
  Deploying solution 'xxx.wsp'...
Activate Features:
  No features in this solution were activated.
Run Post-Deployment Command:
  Skipping deployment step because a post-deployment command is not specified.
========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Deploy: 1 succeeded, 0 failed, 0 skipped ========== 
```

部署的`Feature.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<Feature xmlns="http://schemas.microsoft.com/sharepoint/"
   Title="xxx"
   AutoActivateInCentralAdmin="TRUE"
   Description="xxx" 
   Id="063aae98-029f-4c01-a20e-15b6c8576bc8"
   ReceiverAssembly="xxx, Version=0.1.0.0, Culture=neutral, PublicKeyToken=6e7f8ba8e1265a7f"
   ReceiverClass="xxx" Scope="Farm" /> 
```

我担心它说没有激活任何功能。WSP 确实出现在中央管理解决方案管理中，但表示它“未部署”，并且该功能未出现在管理场功能中。当我在 Web 界面中单击部署时，它显示“解决方案已成功部署”（为什么 VS 不这样做？？）。但在那之后，该功能仍然没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:47:24.943

在 VS 解决方案资源管理器中，右键单击项目 >> 选择属性 >> 选择共享点选项卡这里您有不同的“活动部署配置”。确保您从下拉列表中选择了适当的配置。您可以修改和查看每个配置的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T08:12:16.183

如果您在将解决方案部署到共享点环境时遇到此类错误，请确保您的项目不是沙盒解决方案。

单击您的项目，转到 Visual Studio 中的属性窗口，并将 Sandboxed Solution 的值从 true 更改为 false。重建您的项目并进行部署。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-22T10:43:45.920

跳过部署前和部署后命令只是一个警告，因为您没有为这些步骤指定任何命令。在 VS SharePoint 选项卡中（有关如何到达那里，请参阅 Rahil 答案），您有 2 个文本框用于编写您的前置和后置命令

# python - 更新子文档的更快方法

> ID：13709105
> 
> 赞同：0
> 
> 时间：2012-12-04T18:03:00.470
> 
> 标签：python, mongodb

我的 JSON 文档（称为“i”）有子文档（称为“元素”）。我正在循环浏览这些子文档并一次更新它们。但是，要这样做（一旦计算出我需要的值），我让 mongo 扫描数据库中的所有文档，然后扫描所有子文档，然后找到它需要更新的子文档。

我遇到了重大的时间问题，因为我有大约 3000 个文档，这大约需要 4 分钟。我想知道是否有更快的方法来做到这一点，而 mongo 不必扫描所有文档，而是在循环中进行。

这是代码：

```
for i in db.stuff.find():

    for element in i['counts']:

        computed_value = element[a] + element[b]
        db.stuff.update({'id':i['id'], 'counts.timestamp':element['timestamp']}, 
                        {'$set': {'counts.$.total':computed_value}}) 
```

我通过“id”标识整个文档，然后通过时间戳标识子文档（每个子文档都是唯一的）。我需要找到比这更快的方法。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:09:49.450

您的收藏有哪些索引？这可以通过在嵌入文档上创建索引来加快速度。您可以使用点符号来做到这一点——这里有一个很好的解释和[示例](http://docs.mongodb.org/manual/core/indexes/#indexes-on-embedded-fields)。

在你的情况下，你会做类似的事情

```
db.stuff.ensureIndex( { "i.elements.timestamp" : 1 }); 
```

这将使您通过嵌入式文档的搜索运行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:31:14.020

1.  您的更新基于 id （我假设它与 mongo 的默认 _id 不同）将索引放在您的 id 字段上

2.  You want to set new field for all documents within collection or want to do it only for some matching collection to given criteria? if only for matching collections, use query operator (with index if possible)

3.  dont fetch full document, fetch only those fields which are being used.

4.  What is your avg document size? Use explain and mongostat to understand what is actual bottleneck.

# android - 尝试启动手电筒时出现 NullpointerException

> ID：13709112
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:03:23.160
> 
> 标签：android, camera, flashlight

我正在开发一个程序，您可以在其中启动手机中的手电筒。我已经搜索了很多，并且对如何做得到了相同的答案。但是当我尝试做同样的事情时，我得到了一个 nullpointerException

所以我的 XML 看起来像`

```
<Button
    android:id="@+id/StrongFlashlight"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="143dp"
    android:onClick="StrongFlashlight"
    android:text="@string/flashlightMax" />` 
```

我的代码看起来像

```
 public void StrongFlashlight(View view){
    Button strongFlashlightButton = (Button)findViewById(R.id.StrongFlashlight);
    camera = Camera.open();
    Parameters params = camera.getParameters();

    params.setFlashMode(Parameters.FLASH_MODE_ON);
    camera.setParameters(params);
    camera.startPreview();
    newPhoneImage = getResources().getDrawable(R.drawable.flashlight_on);
    imageView.setImageDrawable(newPhoneImage);
    strongFlashlightButton.setText("Strong Light");

} 
```

我已经`Camera camera; Drawable newPhoneImage;` 在 onCreate 上面声明了。

当我按下“强光”按钮时，我得到一个 nullpointerException`Parameters params = camera.getParameters();`

那么我能做些什么来解决这个问题呢？我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:04:58.120

这意味着`Camera.open()`返回null。分配相机变量后，您必须检查 null ：

```
camera = Camera.open();
if ( camera == null )
    return;
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:21:14.013

您收到此错误是因为您调用`Camera.open()`返回`null`。当设备没有后置摄像头时会发生这种情况，如[Camera.open()](http://developer.android.com/reference/android/hardware/Camera.html#open%28%29)的文档中所述。

> 创建一个新的 Camera 对象以访问设备上的第一个后置摄像头。如果设备没有后置摄像头，则返回 null。

但是，您可以使用以下方法解决此问题：

```
 camera = Camera.open(int); 
```

其中 int 是由[getNumberOfCameras()](http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras%28%29)返回的相机 ID 。[您可以使用getCameraInfo()](http://developer.android.com/reference/android/hardware/Camera.html#getCameraInfo%28int,%20android.hardware.Camera.CameraInfo%29)从其 ID 中找到相机的详细信息。

但是，在大多数情况下，您可以使用摄像头 ID 0 访问前置摄像头：

```
 camera = Camera.open(0); 
```

此外，如果设备没有后置摄像头，则不太可能安装闪光灯。

您可以使用以下方法检查闪存的可用性：

```
boolean hasFlashLight = context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH); 
```

# wcf - WCF 为专家避免过多的端点

> ID：13709113
> 
> 赞同：1
> 
> 时间：2012-12-04T18:03:36.887
> 
> 标签：wcf

我已经实现了很多业务服务，并且我将它们公开为 WCF 的服务。

我不喜欢每个服务都有一个端点的想法……随着我的存储库的增长，将来维护可能会成为问题……

如果下面的代码是一个好方法，我想知道 wcf 专家的意见，我可以继续使用这个解决方案。

**商务服务A：**

```
[ServiceContract]
public interface IServiceA
{
    [OperationContract]
    object AddA(object a);
    [OperationContract]
    object Update();
} 
```

**商务服务乙：**

```
[ServiceContract]
public interface IServiceB
{
    [OperationContract]
    object AddB(object b);
    [OperationContract]
    object Update();
} 
```

**服务 A 的具体实现**

```
public class ConcreteServiceA : IServiceA
{
    public object AddA(object a)
    {
        Console.WriteLine("ConcreateServiceA::AddA");
        return null;
    }

    public object Update()
    {
        Console.WriteLine("ConcreateServiceA::Update");
        return null;
    }
} 
```

**服务 B 的具体实现**

```
public class ConcreteServiceB : IServiceB
{
    public object AddB(object b)
    {
        Console.WriteLine("ConcreateServiceB::AddB");
        return null;
    }

    public object Update()
    {
        Console.WriteLine("ConcreateServiceB::Update");
        return null;
    }
} 
```

我的单一服务偏向于将每个服务的关注点分开。请注意，它的构造函数依赖于上述两个业务服务，将使用 IoC 进行注入

**部分用于构造函数**

```
public partial class WCFService
{
    IServiceA _a;
    IServiceB _b;
    public WCFService()
        : this(new ConcreteServiceA(), new ConcreteServiceB())
    {

    }
    public WCFService(IServiceA serviceA, IServiceB serviceB)
    {
        _a = serviceA;
        _b = serviceB;
    }
} 
```

**仅实现 IServiveA 的部分类**

```
public partial class WCFService : IServiceA
{
    object IServiceB.AddB(object b)
    {
        return _b.AddB(b);
    }

    object IServiceB.Update()
    {
        return _b.Update();
    }

} 
```

**仅实现 IServiceB 的部分类**

```
public partial class WCFService : IServiceB
{
    object IServiceA.AddA(object a)
    {
        return _a.AddA(a);
    }

    object IServiceA.Update()
    {
        return _a.Update();
    }
} 
```

在客户端，我这样使用：

```
 var endPoint = new EndpointAddress("http://localhost/teste");
        ChannelFactory<IServiceA> _factoryA = new ChannelFactory<IServiceA>(new BasicHttpBinding(), endPoint);
        IServiceA serviceA = _factoryA.CreateChannel();
        serviceA.Update();

        var netTcpEndPoint = new EndpointAddress("net.tcp://localhost:9000/teste");
        ChannelFactory<IServiceB> _factoryB = new ChannelFactory<IServiceB>(new NetTcpBinding(), netTcpEndPoint);
        IServiceB serviceB = _factoryB.CreateChannel();
        serviceB.Update(); 
```

我非常感谢任何意见或其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:59:38.637

多个端点没有什么问题——它是过程的一部分。然而，错误在于在多个端点上复制功能。需要多少“UpdateThis's”或“AddThat's”开发人员？这可能会失控并导致维护头痛。看看你的构造函数，它会随着你添加新服务并将它们整合到一个服务中而不断增长。

考虑粗粒度而不是细粒度。

作为替代方案，也许您可​​以尝试将请求对象作为参数传递并返回响应对象。这种方法可以简化您的代码并帮助您避免您在帖子中提到的维护问题并为您提供建议。

所以，它看起来像这样：

```
// Your service will return a very generic Response object
public interface IService
    {
        Response YourRequest(Request request);
    }

// Your service implementation
public partial class WCFService : IService
    {
         Response IService.YourRequest(Request request)
         {
            //inspect the Request, do your work based on the values 
            //and return a response object               
         }
    }

// Your request object
public class Request()
    {
       object YourClass{get;set;}
       DoWhat Action{get;set;} //enum, constants, string etc.
       int ID {get; set;}
    }

 // Your response object
    public class Response()
        {
          bool Success {get; set;}
        }

// Create Request object
var request = new Request(){YourClass = YourClassName , Action DoWhat.Update(), ID=1};

// Your service call
var endPoint = new EndpointAddress("http://localhost/teste");
                ChannelFactory<IService> _factory = new ChannelFactory<IService>(new BasicHttpBinding(), endPoint);
                IService service = _factory.CreateChannel();
var response = service.YourRequest(request); 
```

所以，现在您已经删除了细粒度的方法，并用粗粒度的方法取而代之。如果您想了解更多详情，请告诉我。

# php - 脚本运行多次，而它应该只运行一次

> ID：13709116
> 
> 赞同：0
> 
> 时间：2012-12-04T18:03:41.083
> 
> 标签：php, javascript, ajax

我有一个烦人的问题，我花了很多时间试图解决，但没有成功。我有一个用于从我们的数据库中删除项目的表单。这是表格： **编辑：**我已经将代码更新为更合理的东西，但是我仍然有我的问题。

```
 <div id="tabs-3">
            <p>Select Replenish for Books that will be for sale again.<br/>Select Remove for Books that will NOT be for sale again.</p>
            <br/>
            <table>
            <tr>
                <td><input type="radio" name="returnType" value="replenish" checked>Replenish<br></td>
                <td><input type="radio" name="returnType" value="remove">Remove<br></td>
            </tr>
            <tr>
                <td>&nbsp</th>
                <td>&nbsp</th>
            </tr>
            <tr>
                <th>SKU</th>
                <th>Order ID</th>
                <th>Quantity</th>
                <th>Location</th>
            </tr>
            <?php $numberofrow = 10;?>
<!--create the for loop-->
<?php for($counter = 1;$counter<=$numberofrow;$counter++){ ?>
<!--create 1 row for repeating-->
            <tr>
                <td><input type="text" id="sku<?php echo   $counter;?>"/></td>
                <td><input type="text" id="order<?php echo $counter;?>"/></td>
                <td><input type="text" id="reEnterQty<?php echo $counter;?>"/></td>
                <td>
                    <select id="reEnterLocation<?php echo $counter;?>" name="reEnterLocation" class="Location">
                        <option value="">--Select Location--</option>
                        <?php
                        $query = "SELECT location_id, location FROM location ORDER BY location";
                        $result = $conn->query($query);
                        while ($row = $result->fetch_assoc()) {
                            echo '<option value="' . $row['location_id'] . '" >' . $row['location'] . '</option>';
                        }
                        ?>
                    </select>
                </td>
            </tr>
            <?php }?>
            </table>
            <br/>

            <br/>
            <input type="button" id="reEnterSKU" value="Process Returns" /> <br/>

            <div id="returnsNotice"></div>
        </div> 
```

处理这个的js是：

```
 $("#reEnterSKU").on('click', function() {

    if($("input[name=returnType]:checked").val() == "remove"){ //executes when Remove radio button is checked
        var arr = {};
        var counter = 0;

        for(var x=1;x<11;x++)
        {
            if($("#sku"+x).val() != "" && $("#order"+x).val() != ""){
            arr[x] ={sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: $("#reEnterQty"+x).val()};   
            }
        }   
                $.ajax({
                    type: "POST",
                    async:false,
                    url: "invReturnsRemove.php",
                    dataType: "json",
                    data: {data: JSON.stringify(arr)},//({sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: quantity}),
                    success: function(data){

                    }
                });

        $("#returnsNotice").html("<h3>" + x + " return(s) removed.</h3>"); 
```

invReturnsRemove.php 是：

```
 <?php
require_once ('../db.php');
$conn = db_connect();
$n=0;

$data =json_decode($_POST['data'], true); 

foreach($data as $value){

$conn->query("UPDATE order_sold SET quantity = (quantity - {$data[$n]['quantity']}) WHERE sku = {$data[$n]['sku']} AND order_id = {$data[$n]['order']}");
$n++;}

$conn->close();
?> 
```

问题是当我尝试运行它时，即使只删除一条记录，它也会运行数百次。知道我可能做错了什么，以及如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:12:59.573

[您发表的评论](https://stackoverflow.com/questions/13709116/script-runs-many-times-when-it-should-only-run-once#comment18926028_13709116)表明，至少部分问题出在客户端。

您可能已多次添加`'click'`事件侦听器。如果您添加事件侦听器的代码在循环中，那么您几乎可以肯定已经添加了多次。例如，如果您在页面上有多个表单并以以下方式附加侦听器，则每次按下提交按钮时都会触发多次。

```
// THIS IS BAD
$('form').each(function() {
    $("#reEnterSKU").on('click', function(e) {
         // details of listener for form1
    });
    $("#reEnterSKU2").on('click', function(e) {
         // details of listener for form2
    });
    $("#reEnterSKU3").on('click', function(e) {
         // details of listener for form3
    });
}); 
```

当您使用与`button`on直接关联的事件侦听器时`form`，您可能应该`return false;`从事件侦听器函数或调用`e.preventDefault();`（您必须将`e`参数添加到单击侦听器函数）以避免按钮提交`form`. （也许您已经在做类似的事情但没有包含代码？）我假设您不打算重定向页面，否则您不会更新元素的内容`<div id="returnsNotice"></div>`。

可能导致问题的另一件事是，如果您用于查找和添加单击侦听器到按钮的选择器不够具体。如果是这种情况，您可能一次将事件侦听器添加到多个按钮，因此一个按钮最终可能会包含多个事件侦听器。

此外，在使用表单时，我认为通常最好避免将事件侦听器附加到特定的表单元素，例如按钮，以触发提交，因为在各种提交场景中事情可能会变得复杂，例如当用户`enter`按下键时而文本输入字段具有焦点。作为替代方案，您可以使用附加到元素的[jQuery.submit()](http://api.jquery.com/submit/)`form`方法，并且应该由任何会导致表单提交的情况触发。这将允许您执行一个函数（提交侦听器）并以更高的可靠性停止自动提交。`required`当您将属性应用于表单元素时，这也将允许您利用内置的浏览器表单验证功能（[细节](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#client-side-form-validation)和[兼容性](http://www.quirksmode.org/html5/inputs.html#t15)）。

```
$("#your-form-id").submit(function() {

    if($("input[name=returnType]:checked").val() === "remove") { //executes when Remove radio button is checked
        var arr = [];
        var counter = 0;

        for(var x = 1; x < 11; x++)
        {
            if( $("#sku"+x).val() !== "" && $("#order"+x).val() !== ""){
                arr[x] = {
                    sku: $("#sku"+x).val(), 
                    order: $("#order"+x).val(), 
                    quantity: $("#reEnterQty"+x).val()
                };   
            }
        }
        console.log('FORM SUBMIT');

        $.ajax({
            type: "POST",
            async:false,
            url: "invReturnsRemove.php",
            dataType: "json",
            data: {data: JSON.stringify(arr)},//({sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: quantity}),
            success: function(data){
                console.log('SUCCESS'); // how many times do you see this per button click?
            }
        });

        $("#returnsNotice").html("<h3>" + x + " return(s) removed.</h3>");

        // ... anything that remains in your function
        return false; 
```

关于如何解决这个问题，我要做的第一件事是注释掉表单提交语句，以便将其排除在等式之外。然后，在其位置添加一条`console.log()`语句以查看 a) 如果它被多次调用，并且 b) 尝试弄清楚如果它被多次调用，如何让它只执行一次。您还可以添加*在添加单击事件侦听器时*`console.log()`执行的语句，以确保您只添加一个单击事件侦听器。我在下面包含了这些更改。

 *```
console.log('ADDING FORM SUBMISSION click listener -- you should only see this once.');

$("#reEnterSKU").on('click', function(e) {

    e.preventDefault();

    if($("input[name=returnType]:checked").val() === "remove") { //executes when Remove radio button is checked
        var arr = [];
        var counter = 0;

        for(var x = 1; x < 11; x++)
        {
            if( $("#sku"+x).val() !== "" && $("#order"+x).val() !== ""){
                arr[x] = {
                    sku: $("#sku"+x).val(), 
                    order: $("#order"+x).val(), 
                    quantity: $("#reEnterQty"+x).val()
                };   
            }
        }
        console.log('FORM SUBMIT');
        /* 
        $.ajax({
            type: "POST",
            async:false,
            url: "invReturnsRemove.php",
            dataType: "json",
            data: {data: JSON.stringify(arr)},//({sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: quantity}),
            success: function(data){
                console.log('SUCCESS');
            }
        }).fail(function(data) {
            console.log('FAIL');
        });
        */
        $("#returnsNotice").html("<h3>" + x + " return(s) removed.</h3>"); 
```

我刚刚注意到的另一件事是`arr`变量实际上是一个`Object`，而不是一个`Array`。不确定这是否会影响 PHP 中的内容。而且，我注意到您`x`的起始值为`1`. 这也意味着，在`arr`创建为的情况下`Array`，您将拥有`undefined`第一个元素。

还有，什么是`counter`？如果您基于此循环，则可能需要查看。

作为故障排除的中间步骤，以下版本的 JavaScript 代码将取消在最近一次未被阻止的提交后 1.2 秒内进行的任何提交调用。我**不**建议将此作为解决方案（它非常糟糕），但它可能有助于解决存在问题的问题。

```
(function(undefined) { 
    if (window.blockSubmission === undefined) {
        window.blockSubmission = false;
    }
})();

$("#reEnterSKU").on('click', function() {

    // this will make sure your listener only gets called at most once every 1.2 seconds
    if (window.blockSubmission) {
        return false;
    } else {
        window.blockSubmission = true;
        setTimeout(function() { 
            window.blockSubmission = false;
        }, 1200);
    }

    if($("input[name=returnType]:checked").val() == "remove") { //executes when Remove radio button is checked
        var arr = [];
        var counter = 0;

        for(var x = 1; x < 11; x++)
        {
            if( $("#sku"+x).val() != "" && $("#order"+x).val() != ""){
                arr[x] = {
                    sku: $("#sku"+x).val(), 
                    order: $("#order"+x).val(), 
                    quantity: $("#reEnterQty"+x).val()
                };   
            }
        }
        console.log('FORM SUBMIT');

        $.ajax({
            type: "POST",
            async:false,
            url: "invReturnsRemove.php",
            dataType: "json",
            data: {data: JSON.stringify(arr)},//({sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: quantity}),
            success: function(data){
                console.log('SUCCESS'); // how many times do you see this per button click?
            }
        });

        $("#returnsNotice").html("<h3>" + x + " return(s) removed.</h3>"); 
```

如果这不能让您获得任何帮助，您可能想在您的问题中详细说明一下。包括额外的代码会很有帮助。也许更长的 PHP / HTML 摘录将至少显示整个`form`元素。此外，包含更全面的 JavaScript 摘录也可能会有所帮助。例如，表单提交按钮的单击事件侦听器永远不会在您帖子中提供的摘录中关闭。这使得很难看到真正发生了什么。

如果你打算做很多 JS，那么这可能值得一读。它有点过时了，但它是浏览器调试工具的精彩介绍：

[http://jtaby.com/2012/04/23/modern-web-development-part-1.html](http://jtaby.com/2012/04/23/modern-web-development-part-1.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:15:16.280

在没有看到完整上下文的情况下，我猜测点击是由一些重复触发的。这个小技巧可能会解决它：

```
var e = false;
$("#reEnterSKU").on('click', function() {
    if (e) return;

    if ($("input[name=returnType]:checked").val() == "remove") { //executes when Remove radio button is checked
        e = true;
        var arr = {};
        var counter = 0;

        for(var x=1;x<11;x++)
        {
            if ($("#sku"+x).val() != "" && $("#order"+x).val() != "") {
                arr[x] ={sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: $("#reEnterQty"+x).val()};   
            }
        }  

        $.ajax({
            type: "POST",
            async:false,
            url: "invReturnsRemove.php",
            dataType: "json",
            data: {data: JSON.stringify(arr)},//({sku: $("#sku"+x).val(), order: $("#order"+x).val(), quantity: quantity}),
            success: function(data) {}
        });

        $("#returnsNotice").html("<h3>" + x + " return(s) removed.</h3>");
        e = false;
    }
}); 
```*

# mysql - Qt 的 odbc 驱动程序不支持 mysql 的 LastInsertId，有什么解决方法？

> ID：13709117
> 
> 赞同：0
> 
> 时间：2012-12-04T18:03:49.227
> 
> 标签：mysql, qt, odbc, last-insert-id

我使用 Qt 4.8.3 和 MySQL ODBC 3.51 驱动程序。驱动程序似乎不支持我这样测试的 LastInsertId：

```
db.driver()->hasFeature(QSqlDriver::LastInsertId) 
```

我需要它来找到我刚刚插入的自动增量 ID

```
query.exec("INSERT INTO myTable (MyVal, Created) VALUES ('1', NOW())");
auto insertId = query.lastInsertId().toString(); 
```

最好的解决方法是什么？

编辑：多个客户端将同时访问此表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:22:04.390

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/connector-odbc-usagenotes-functionality.html#connector-odbc-usagenotes-functionality-last-insert-id)，您可以调用：

```
SELECT LAST_INSERT_ID(); 
```

在插入查询之后获取为当前连接插入的最新 id，即使在使用 ODBC 时也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:12:00.587

您可以执行以下操作：

```
query.exec("SELECT id FROM myTable ORDER BY id DESC LIMIT 1"); 
```

获得表中最大的 id - 这应该是您刚刚插入的那个。

如果您正在编写一个可以有多个并发用户的应用程序，您将不得不考虑在您的表上创建一个锁，然后在运行第二个查询后释放该锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T07:24:10.153

使用 OUTPUT INSERTED.[Field Name]，如下面的代码所示。使用 next() 函数读取返回的 ID。

```
bool RepeatsRecognizer::InsertEvent(RepEvent* event){
QSqlDatabase db = AppManager::DB_Output()->ThreadDatabase();
QSqlQuery query(db);
query.prepare("INSERT INTO RepEvents (ChannelID, StatsRangeUID, MinStartDateTime, MaxDuration, Fixed) OUTPUT INSERTED.ID"
              " VALUES (?, ?, ?, ?, ?)");
query.bindValue(0, event->ChannelID);
query.bindValue(1, event->StatsRangeUID.toString());
query.bindValue(2, event->MinStartDateTime);
query.bindValue(3, event->MaxDuration);
query.bindValue(4, false);

if (!query.exec())
    return false;

if (!query.next())
    return false;

event->ID = query.value(0).toLongLong();
qDebug() << __FUNCTION__ << "Event ID:" << event->ID; 
```

}

# java - Java：有没有办法在上传带有帖子的文件时计算下载吞吐量（在特定时间间隔内）？

> ID：13709118
> 
> 赞同：1
> 
> 时间：2012-12-04T18:03:57.583
> 
> 标签：java, android, http, upload

我真的对在我的 android 应用程序中使用 http-post 计算上传（二进制/jpg）的移动平均值感到绝望。

我使用 DataOutputStream 作为 ouputStream：

```
while (true) {
    while(bufferSize > 0) {
        int transferedBytes = Math.min(bufferSize, packetSize);
        outputStream.write(buffer, offset, transferedBytes);
        outputStream.flush();
        // save transferedBytes as throughput
        offset += transferedBytes;
        bufferSize -= transferedBytes;
    }

    if ((available = inputStream.available()) <= 0) {
        break;
    }
    int nBytes = Math.min(avail, bufferSize);
    bufferSize = inputStream.read(buffer, 0, nBytes);
    offset = 0;
} 
```

使用此实现上传工作正常，但上述行执行时间不到 500 毫秒（文件为 1MB）。真正的上传似乎在以下行中执行（大约需要 11000 毫秒）：

```
int responseCode = connection.getResponseCode(); 
```

看来，我无法用上面的代码解决我的问题。有什么方法可以做我想做的吗？我听说 Apaches HttpCore 有能力做这样的事情，但我找不到任何似乎有帮助的方法或文档。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:54:26.343

请确保您使用`setChunkedStreamingMode(int)`，否则响应正文将被缓冲在内存中，直到您尝试关闭连接并获取响应代码，这看起来就像您正在经历的那样。

[关于 setChunkedStreamingMode 的 Android 文档](http://developer.android.com/reference/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29)

# java - 为什么 MIDI 音符计时不起作用？

> ID：13709123
> 
> 赞同：1
> 
> 时间：2012-12-04T18:04:24.467
> 
> 标签：java, midi, javax.sound.midi

我正在创建一个 midi 钢琴卷帘编辑器。Note 类创建并包含一个 NOTE_ON 对象和一个关联的 NOTE_OFF 对象以及一个矩形，用户在屏幕上操纵它来操纵音符的音高、时间和持续时间。下面是这个类的代码减去矩形的代码。我不知道为什么它不能正常工作。测试程序会创建五个这样的 Note 对象并将它们显示在钢琴卷帘网格上，并且它们可以正常播放。当向上或向下拖动矩形时，更改音高的方法也可以正常工作。但是当我调用更改时间或持续时间的方法时，笔记开始出现异常。首先，当它们移动时，它们不会在被告知的地方演奏，然后如果音符被拖到顶部或相互延伸，移动的音符将阻止其下方的音符播放。我作为 arg 发送到这些方法的移动单位设置为 16，因此音符将始终捕捉到第 16 拍位置。谁能发现我的代码有什么问题？

```
public class Note {
MidiEvent noteOn;
MidiEvent noteOff;

private int channel;
private int pitch;
private int vel;

// Constructor calls methods to create NOTE_ON, NOTE_OFF, and graphical rectangle
public Note(MidiMessage on, long tickPos) {
    noteOn = createNoteOn(on, tickPos);
    ShortMessage shortMessage = (ShortMessage) on;
    noteOff = createNoteOff(shortMessage.getChannel(), shortMessage.getData1(), tickPos);
}

public MidiEvent createNoteOn(MidiMessage on, long tickPos) {
    noteOn = new MidiEvent(on, tickPos);
    return noteOn;
}

public MidiEvent createNoteOff(int chan, int pitch, long tickPos) {
    try {
        noteOff = new MidiEvent(new ShortMessage(ShortMessage.NOTE_OFF, chan, pitch, 0), tickPos + 2);
    } catch (InvalidMidiDataException e) {
            e.printStackTrace();
    }
    return noteOff;
}

// Method for moving musical pitch of this note up or down for both NOTE_ON and NOTE_OFF
public void setPitch(int pitchUpOrDown) {
    MidiMessage message = noteOn.getMessage();
    ShortMessage shortMessage = (ShortMessage) message;
        channel = shortMessage.getChannel();
        pitch = shortMessage.getData1();
        vel = shortMessage.getData2();
        try {
            shortMessage.setMessage(ShortMessage.NOTE_ON, channel, pitch + pitchUpOrDown, vel);
        } catch (InvalidMidiDataException e) {
            e.printStackTrace();
        }
        message = noteOff.getMessage();
        shortMessage = (ShortMessage) message;
        try {
            shortMessage.setMessage(ShortMessage.NOTE_OFF, channel, pitch + pitchUpOrDown, 0);
        } catch (InvalidMidiDataException e) {
            e.printStackTrace();
        }
}

// Moves entire note without changing duration of note
public void shiftLocation(int diff) {
    noteOn.setTick(noteOn.getTick() + diff);
    noteOff.setTick(noteOff.getTick() + diff);
}

// Moves start time of note while leaving end time in place, changes duration of note
public void setStartTime(long start) {
    noteOn.setTick(start);
}

// Moves end time of note while leaving start time in place, changes duration of note
public void setDuration(int duration) {
    noteOff.setTick(noteOff.getTick() + duration);
} 
```

MIDI 音序器和合成器：

```
import javax.sound.midi.*;

public class MusicEngine {
Sequencer sequencer;
Sequence sequence;
Synthesizer synthesizer;
Track track;
MidiEvent event;
// PPQ, or ticks per beat
int ticksPerBeat = 16;
int tempoBPM = 120;

// Constructor
public MusicEngine() {      
    createMidi();
}

// Get sequencer and sequence and track
public void createMidi() {
    try {
        sequencer =  MidiSystem.getSequencer();
        if (sequencer == null) {
            System.out.println("Cannot get a sequencer");
            System.exit(0);
        }
        sequencer.open();

        // If sequencer is not the same as synthesizer, link the two 
        // (required in J2SE 5.0)
        if (!(sequencer instanceof Synthesizer)) {
            System.out.println("Linking the sequencer to the synthesizer");
            synthesizer = MidiSystem.getSynthesizer();
            synthesizer.open();
            Receiver synthReceiver = synthesizer.getReceiver();
            Transmitter seqTransmitter = sequencer.getTransmitter();
            seqTransmitter.setReceiver(synthReceiver);
        } else 
            synthesizer = (Synthesizer)sequencer;
        sequence = new Sequence(Sequence.PPQ, ticksPerBeat);
        track = sequence.createTrack();
        sequencer.setTempoInBPM(tempoBPM);
    } catch(MidiUnavailableException e) {
        System.out.println("No sequencer available");
        System.exit(0);
    } catch(Exception e) {
        e.printStackTrace();
        System.exit(0);
    }

}

// Create an individual MIDI event
public MidiEvent createEvent(int command, int channel, int one, int two, int tick) {
    event = null;
    try {
        ShortMessage a = new ShortMessage();
        a.setMessage(command, channel, one, two);
        event = new MidiEvent(a, tick);
    } catch(InvalidMidiDataException e) {
        e.printStackTrace();
    }
    return event;
}

public void add(MidiEvent event) {
    track.add(event);
}

public void playSong(int tempo) {
    try {
        sequencer.setSequence(sequence);
    }
    catch (InvalidMidiDataException e) {
        e.printStackTrace();
    }

    sequencer.start();
}

public void stopSong() {
    sequencer.stop();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:35:47.547

我可能在这里误解了您的代码，但您似乎只是在增加`setDuration()`方法中注释的长度。它不应该看起来像这样吗？

```
public void setDuration(int duration) {
    noteOff.setTick(noteOn.getTick() + duration);
} 
```

# actionscript-3 - CS5 IDE 中的覆盖函数 -> 时间轴 -> Framescript

> ID：13709127
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:04:37.947
> 
> 标签：actionscript-3, function, overriding

我有一个实现接口的基类。我使用这个基类作为我的“模板”（阅读：语义，我不是在谈论 Java/C++ 模板）。

在我的 Flash CS5 IDE 中，我想覆盖这些接口方法。是的，它们是在基类中实现的，但是试图在框架脚本中覆盖它们会抛出我（是的，这可能不是一个干净的设计）：

```
Symbol 'GameTest', Layer 'Layer 1', Frame 1, Line 1 1024:
        Overriding a function that is not marked for override. 
```

我不完全知道框架脚本在什么范围内工作。我所说的框架脚本只是指在时间轴框架 1 中。

在我的基类中：

```
public class MiniGameTemplate extends MovieClip implements IMiniGame
{ 
   public function MiniGameTemplate()
   {

   }

   public function update():void 
   {

   }
} 
```

在我的 Library 对象的第一帧中：

```
 override function update():void
{

} 
```

我正在使用 actionscript 链接从基类继承我的库对象。如果我清除框架脚本，它运行良好。没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:04:52.617

重写方法时，必须***完全***按照原始方法构造重写方法。在这种情况下，您错过了`public`访问修饰符语句。

解决方案：

```
override public function update():void {

} 
```

# notepad++ - 如何在默认应用程序中从 Notepad++ 运行当前打开的文件？

> ID：13709128
> 
> 赞同：4
> 
> 时间：2012-12-04T18:04:36.417
> 
> 标签：notepad++, default

我正在编辑 JSFL 文件，我想在保存它们后快速运行它们。

是否可以将 Notepad++ 配置为使用键盘快捷键在其默认应用程序中打开当前文件（正在编辑）？（在本例中为 Adob​​e Flash Pro CS6）。

如果有可能有一个足够通用的运行命令来作为“在默认应用程序中运行”操作，而不是必须将每个单独的文件类型配置到它们各自的默认应用程序，那将是最好的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:20:41.843

实际上，找到了我自己的解决方案。

添加一个新的“**运行...** ”命令就可以了！

指示：

*   单击菜单“**运行**->**运行**...”（或按 F5）
*   在字段中输入“ **$(FULL_CURRENT_PATH)** ”（不带引号）
*   点击“**保存...** ”
*   给它一个名字（例如：“**在默认应用程序中运行**”）
*   **可选**：为其分配*键盘快捷键*（例如：**CTRL+SHIFT+F5**）

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-29T01:55:21.410

菜单 -> 运行（或 F5 快捷键）

`cmd /k cd "$(CURRENT_DIRECTORY)" && "$(FULL_CURRENT_PATH)"`

单击“保存...”按钮

如果脚本失败，这将允许您查看调试信息（此处考虑 python 脚本）。/k 开关防止 cmd 退出。更改为当前路径很重要，否则 os.path.exist('./somefile') 将不起作用。

# java - Java - 从目录中读取 jar 文件

> ID：13709130
> 
> 赞同：0
> 
> 时间：2012-12-04T18:04:40.957
> 
> 标签：java, file, file-io, jar

我有一个应用程序，它创建一个临时 mp3 文件并将其放在一个目录中，如`C:\`

```
File tempfile = File.createTempFile("something", ".mp3", new File("C:\\)); 
```

我可以通过`tempfile`再次使用它来阅读它。在 Eclipse IDE 中一切正常。

但是，当我将项目导出为 时`Runnable jar`，我的文件仍然可以正确制作（我可以使用 iTunes 等普通音乐播放器播放它们），但我似乎无法在我的应用程序中读取它们。

我发现我需要使用类似的东西`getClass().getResource("/relative/path/in/jar.mp3")`来使用资源文件，`jar.`但如果我想从文件系统中的某个位置选择一个文件，这似乎不起作用`C:\something.mp3`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:46:51.797

看来您没有临时文件的文件名。当您在 Eclipse 中运行程序时，该实例正在创建处理文件，但是在您制作可运行文件后，您无法读取 Eclipse 中的实例创建的那些文件，您的可运行文件可以创建自己的临时文件并可以处理它们，为了使临时文件地球放在那里（路径+名称）一些数据库或属性文件中的条目

例如，您将从打击代码创建一个临时文件

```
File tempfile = File.createTempFile("out", ".txt", new File("D:\\"));           
FileWriter fstream = new FileWriter(tempfile);//write in file
out = new BufferedWriter(fstream); 
```

out 不会是 out.txt 文件，它将是

```
out6654748541383250156.txt // it mean a randum number will be append with file 
```

并且您在可运行 jar 中的代码无法找到这些临时文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:14:17.600

`getClass().getResource()`只读取类路径上的资源。`getResource()`实际上，传递给的路径是相对于当前类路径上的任何路径的路径。这听起来有点混乱，所以我举个例子：

如果您的类路径包含一个目录`C:\development\resources`，您将能够使用`getResource()`. 例如，有一个文件 `C:\development\resources\mp3\song.mp3`. 您可以通过调用加载此文件

```
getClass().getResource("mp3/song.mp3"); 
```

底线：如果您想使用 读取文件`getResource()`，则需要将这些文件放在您的类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:22:03.587

为了从特权 JAR 和文件系统加载，我不得不使用两种不同的机制：

*   `getClass().getClassLoader().getResource(path)`, 如果返回 null,
*   `new File(path).toURI().toURL();`

您可以将其转换为使用类路径方法和一个或多个文件方法（可能使用不同的基本路径）的 ResourceResolver 策略。

# ruby-on-rails - 如何测试对 Sinatra 应用程序的 Rails HTTP 请求？

> ID：13709141
> 
> 赞同：0
> 
> 时间：2012-12-04T18:05:29.447
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, sinatra

考虑一个 Rails 应用程序，它使用与 Rails 应用程序分开开发的（Sinatra 应用程序）API。我想从 Rails 测试中测试 API 调用。

API 代码：

```
post '/foo/create' do
  ... 
```

我创建了一个模拟，但这没有意义，因为它只是 API 文件的副本。臭死了。

可以在测试中要求 API 文件。但是如何从 RSpec 中调用它呢？Rails 应用程序中没有针对它的路线。

一种选择是启动 API 并从 Rails 测试中进行 HTTP 调用，但这很糟糕，因为：

1.  您必须启动 API 服务器才能运行 Rails 测试
2.  为什么 Rails 测试应该发出 HTTP 请求？Rack::Test 模拟了这一点。
3.  我认为这不会起作用，因为这些应用程序具有不同的测试数据库，但共享相同的生产数据库。

编辑：测试的重点是 API 调用会创建 Rails 应用程序所期望的记录。所以 Rails 应用需要在 API 调用后测试数据库的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:15:39.830

好。对您来说，完美的答案是像[webmock](https://github.com/bblimke/webmock)这样模拟答案的宝石。它会在访问该 url 时伪造响应，因此在测试中，您的应用程序将按照真实情况进行请求，只是在它进入网络之前，它会命中您的模拟并以所需的答案进行响应。

# php - 至少选择一个复选框，PHP

> ID：13709142
> 
> 赞同：1
> 
> 时间：2012-12-04T18:05:31.440
> 
> 标签：php, javascript, forms, validation, checkbox

我正在尝试设置一个带有验证的表单。设置要求用户至少选择一个框的复选框变得相当痛苦。我已经尝试过大多数在这个论坛和其他论坛上看起来很有希望的解决方案，但无济于事。

所以我们有两个不同的复选框，它们会根据用户的选择发送到不同的电子邮件。现在，如果您在未选中复选框的情况下提交此表单，则表单只会刷新，您不会收到错误消息。所以我想从技术上讲它正在验证但用户没有收到错误消息？

代码有点乱，这是我们设置的一个测试表格，用于试验，看看我们是否可以在为客户构建真实的东西之前让它发挥作用。

顺便说一句，对 PHP 和 Javascript 非常陌生。提前致谢！

这是PHP代码...

```
if(isset($_POST['submit'])) {

//Check to make sure that the name field is not empty
if(trim($_POST['contactname']) == '') {
    $hasError = true;
} else {
    $name = trim($_POST['contactname']);
}

//Check to make sure that the subject field is not empty
if(trim($_POST['subject']) == '') {
    $hasError = true;
} else {
    $subject = trim($_POST['subject']);
}

//Check to make sure sure that a valid email address is submitted
if(trim($_POST['email']) == '')  {
    $hasError = true;
} else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
    $hasError = true;
} else {
    $email = trim($_POST['email']);
}

//Check to make sure comments were entered
if(trim($_POST['message']) == '') {
    $hasError = true;
} else {
    if(function_exists('stripslashes')) {
        $comments = stripslashes(trim($_POST['message']));
    } else {
        $comments = trim($_POST['message']);
    }
}

if(trim($_POST['checkbox']) == '') {
$agree = filter_input(INPUT_POST, 'checkbox');
$checked = '';

if( empty($agree) )
$errors['checkbox'] = true;
else{
$checked = 'checkbox';
}
}
//If there is no error, send the email
if(!isset($hasError) && $_POST['Charlotte']) {
    $emailTo = 'Charlotte@email.com'; //Put your own email address here
    $body = "Name: $name \n\nEmail: $email \n\nSubject: $subject \n\nComments:\n $comments";
    $headers = 'From: My Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);
    $emailSent = true;
}

//If there is no error, send the email
if(!isset($hasError) && $_POST['Mary']) {
    $emailTo = 'Mary@email.com'; //Put your own email address here
    $body = "Name: $name \n\nEmail: $email \n\nSubject: $subject \n\nComments:\n       $comments";
    $headers = 'From: My Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);
    $emailSent = true;
}

}

?> 
```

这是Javascript...

```
<script type="text/javascript">
$(document).ready(function(){
// validate signup form on keyup and submit
var validator = $("#contactform").validate({
    rules: {
        contactname: {
            required: true,
            minlength: 2
        },
        email: {
            required: true,
            email: true
        },
        checkbox: {
            required: true,
        },
        subject: {

            minlength: 2
        },
        message: {

            minlength: 10
        }

    },
    messages: {
        contactname: {
            required: "Please enter your name",
            minlength: jQuery.format("Your name needs to be at least {0} characters")
        },
        email: {
            required: "Please enter a valid email address",
            minlength: "Please enter a valid email address"
        },
        checkbox: {
            required: "Please select at least one location"
        },
        subject: {
            minlength: jQuery.format("Enter at least {0} characters")
        },
        message: {
            minlength: jQuery.format("Enter at least {0} characters")
        }
    },
    // set this class to error-labels to indicate valid fields
    success: function(label) {
        label.addClass("checked");
    }
});
});
</script> 
```

这是 HTML 格式的表单...

```
<div class="wrapper">
  <div id="contactWrapper" role="form">
  <h1 role="heading">Send a message</h1>
  <?php if(isset($hasError)) { //If errors are found ?>
  <p class="error">Please check if you've filled all the fields with valid information and try again. Thank you.</p>
    <?php } ?>
<?php if(isset($emailSent) && $emailSent == true) { //If email is sent ?>
  <div class="success">
  <p><strong>Email Successfully Sent!</strong></p>
  <p>Thank you for contacting us <strong><?php echo $name;?></strong>! Your email was successfully sent and we'll be in touch with you soon.</p>
</div>
<?php } ?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" id="contactform">
  <div class="stage clear">
    <label for="name">&nbsp;&nbsp;Name:<em>*</em></label>
    <input type="text" name="contactname" id="contactname" value="" class="required" role="input" aria-required="true" />
  </div>
  <div class="stage clear">
    <label for="email">Email:<em>*</em></label>
    <input type="text" name="email" id="email" value="" class="required email" role="input" aria-required="true" />
  </div>
  <div class="stage clear">
  <ul>
  <p>Please select a box*</p>
  <li><input type='checkbox' name='Charlotte' value='1' id='checkbox' /><label for="Charlotte">Charlotte</label></li>
  <li><input type='checkbox' name='Mary' value='2' id='checkbox' /><label for="Mary">Mary</label></li>
  </ul>
  </div>
  <div class="stage clear">
    <label for="subject">Subject:</label>
    <input type="text" name="subject" id="subject" value="" class="required" role="input" aria-required="true" />
  </div>
  <div class="stage clear">
    <label for="message">Message:</label>
    <textarea rows="8" name="message" id="message" class="required" role="textbox" aria-required="true"></textarea>
  </div>
  <p class="requiredNote"><em>*</em>Denotes a required field.</p>
  <input type="submit" value="Send Message" name="submit" id="submitButton" title="Click here to submit your message!" />
</form>

</div>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T05:01:01.770

```
<script language="javascript">
function Validate()
{
if (document.getElementById("check").checked == false )

                {
                    alert("please select one checkbox");
                            return false;
                }
}

</script>

<input type="checkbox" class="case" name="c[]" id="check">
<-----submit the code----->
 <input name="one" onclick="Validate()" value="send" type="submit"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:29:06.613

```
if(trim($_POST['Charlotte']) != 1 and trim($_POST['Mary']) != 2){
$hasError = true;
} 
```

# internet-explorer - Div 不在 Internet Explorer 中显示，但在 chrome、firefox、opera 等中显示

> ID：13709144
> 
> 赞同：0
> 
> 时间：2012-12-04T18:05:45.553
> 
> 标签：internet-explorer, html

Internet Explorer 隐藏了我的一些 div。它们出现在所有其他浏览器中（甚至在移动设备上），但不在 Internet Explorer 中。我的网站： http: [//www.colinch.com/media](http://www.colinch.com/media)

我知道 :hover 等 div 有点复杂，但它应该可以工作：s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:19:09.573

快速查看似乎所有内容都在 H1 标签中

```
<div id="logo-bg">
<h1>
<a href="#">....etc 
```

# asp.net - ASP .net 应用程序中的丰富 UI

> ID：13709145
> 
> 赞同：0
> 
> 时间：2012-12-04T18:05:53.290
> 
> 标签：asp.net, jquery-ui

我正在尝试探索可用于在 ASP .net 应用程序中开发丰富流畅的 UI 的选项。感兴趣的是页面加载旋转条、进度指示器、扩展器、弹出窗口、图表等，请问是否有可用的开源组件。截至目前，我有基础设施控制，但没有充分利用。任何帮助或参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:23:35.493

我会推荐 JQuery 来满足您的 UI 需求。还有很多可用的插件。

# jquery - Jquery Sticky div在IE中很紧张

> ID：13709147
> 
> 赞同：0
> 
> 时间：2012-12-04T18:06:00.653
> 
> 标签：jquery, html, css, sticky

我的页面上有 3 个 DIV 元素，当垂直滚动时我需要在页面顶部“粘贴”。这些元素在除 IE 系列之外的所有浏览器中都可以正常工作；您可以明显看到粘性动画，并且非常紧张。

我有以下 javascript 来制作我的 div 粘性元素：

```
var name = "#webcto_menu";
var name2 = "#webcto_pane";
var name3 = "#webcto_pane_menu";
$(document).ready(function() {
    menuYloc = parseInt($(name).css("top").substring(0,$(name).css("top").indexOf("px")))
    $(window).scroll(function () {
        offset = menuYloc+$(document).scrollTop()+"px";
        $(name).animate({top:offset},{duration:0,queue:false});
    });
    menuYloc2 = parseInt($(name2).css("top").substring(0,$(name2).css("top").indexOf("px")))
    $(window).scroll(function () {
        offset = menuYloc2+$(document).scrollTop()+"px";
        $(name2).animate({top:offset},{duration:0,queue:false});
    });
    menuYloc3 = parseInt($(name3).css("top").substring(0,$(name3).css("top").indexOf("px")))
    $(window).scroll(function () {
        offset = menuYloc3+$(document).scrollTop()+"px";
        $(name3).animate({top:offset},{duration:0,queue:false});
    });
}); 
```

如您所见，每个粘性动画都在 0 毫秒（持续时间：0）。是否可以使用此方法来表现得更像“css：fixed”元素而不为回滚设置动画？我最初确实修复了我的元素，但是当浏览器窗口太窄时出现了问题（没有固定元素的水平滚动。）

# java - Java 同步块和匿名类

> ID：13709149
> 
> 赞同：2
> 
> 时间：2012-12-04T18:06:06.787
> 
> 标签：java, multithreading, synchronization

用代码如

```
synchronized (this)
{
    mTimeOutRunnable = new Runnable()
    {
        @Override
        public void run()
        {
            ..some code
        }
    };
} 
```

新类的引用分配`Runnable`被块覆盖，但是 run() 内的代码（在块外被*异步*调用）也会进入`synchronized`块吗？

我首先包装了同步块，因为它是从工作线程调用的，我想确保调用（主）线程也可以访问该`mTimeOutRunnable`对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:09:14.643

不，该块仅涵盖您的`Runnable`to分配，而不是对该方法的后续调用。 `mTimeOutRunnable``synchronized``run()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:14:04.690

```
mTimeOutRunnable = new Runnable()
    {
        @Override
        public void run()
        {
            ..some code
        }
    }; 
```

和

```
synchronized(this){
     obj = new SomeClass();
} 
```

所以只有引用分配被`synchronized`块覆盖

# php - 对目录元素进行排序

> ID：13709153
> 
> 赞同：0
> 
> 时间：2012-12-04T18:06:14.357
> 
> 标签：php, sorting

我使用该功能`readdir`并选择目录中的文件。我轮流读取文件并将它们写入数据库。但是文件随机旋转，之前创建的文件可以写在后来创建的文件之后。我如何阅读文件，按创建日期对它们进行排序？我可以轻松做到这一点吗？不使用数组和排序文件，等等......

```
if ($dir_handle = opendir ($dir)) {
    while (false !== ($file_name = readdir($dir_handle))) {
        if (is_file($dir.$file_name)){
                        ............... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:20:48.950

如果不使用数组和其他调用来获取创建日期并对它们进行排序，您将无法轻松地读取按创建日期排序的文件......好吧，我想你可以打个`exec()`电话，但这是不受欢迎的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:16:20.030

您可以将每个文件的创建日期输入到数据库中，然后在 SELECT 时对其进行排序：

`SELECT * FROM files ORDER BY create_date DESC`

# ruby-on-rails - Rails 设计：user_signed_in？和 current_account

> ID：13709155
> 
> 赞同：0
> 
> 时间：2012-12-04T18:06:37.677
> 
> 标签：ruby-on-rails, devise, sessionid

我在我的 Rails 应用程序中使用设计进行身份验证。目前我有两个模型：

```
Users
Accounts 
```

账户属于用户，用户拥有一个账户。

我的帐户模型包括一个名称和一个子域。我的用户模型有电子邮件和密码

在 account.rb 我有：

```
class Account < ActiveRecord::Base
  attr_accessible :name, :subdomain

  belongs_to :user

end 
```

在 user.rb 中：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :Trackable
  attr_accessible :email, :password, :password_confirmation, :account_attributes, :account
  has_one :account
end 
```

用户登录后，我需要从 Account 中获取名称和 sudbomain 等。

在我的 application_controller.rb 我有：

```
def after_sign_in_path_for(resource)
  if resource.is_a?(User)
    user_path  
  else
    super
  end
 end

  def current_account
    @iduser = session[:user_id]
    @current_account ||= Account.find(@iduser) if @iduser
  end
  helper_method :current_account 
```

在 layout.html.erb 中

```
<% if current_account %>
  <%= current_account.name %> <%= current_account.subdomain %>
<% end %>
<% if user_signed_in? %>
  |
  <%= link_to destroy_user_session_path, :class => "btn btn-mini btn-danger", :method => :delete do %>
  <i class="icon-off icon-white"></i> logout
<% end %>
<% end %> 
```

但是，名称和子域不显示。我怎样才能让它们显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:11:00.330

您是否在您的观点中尝试过：

```
 <%= current_user.account.name %>
 <%= current_user.account.subdomain %> 
```

您是否正确地将 user_id 包含在帐户模型中？

不确定您是否真的需要特别担心那个助手。在深入研究辅助方法之前，先了解基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:32:24.010

我认为如果用户有一个帐户，则应在模型中提及，例如（在用户模型中）：

```
has_one :account 
```

在 Accounts 模型中：

```
belongs_to :user 
```

这会在数据库帐户中创建一个名为 user_id 的列（但如果您正在编辑现有模型，则应通过迁移添加它，然后 rake db:migrate）。然后在帮助程序中，您可以在其中提取名称和子域，您可以调用：

```
@current_account = current_user.account 
```

如果您通过用户界面分配 user_id 时要小心，您应该在您的 Account 模型中包含：

```
attr_accessible :user_id 
```

编辑： 事实上，为模型创建记录，包含 has_one 和 belongs_to，需要关联。有关通过关联创建记录的更多信息，您可以[在此处阅读](https://stackoverflow.com/questions/13431465/how-to-use-nested-attributes-with-belongs-to-association-on-new-action/13431671#13431671)。您可以考虑阅读有关[Rails 中的嵌套资源的](http://guides.rubyonrails.org/routing.html#nested-resources)文章，这是一篇非常有用的文章。这是关于 topic 的另一个[有趣的讨论](https://stackoverflow.com/questions/5207038/the-better-way-to-pass-the-foreign-key-value-to-the-rails-controller)。

# azure - 识别 Web 角色实例的关联 w3wp 进程

> ID：13709158
> 
> 赞同：6
> 
> 时间：2012-12-04T18:06:42.863
> 
> 标签：azure, azure-web-roles, multiple-instances, w3wp, performance-monitor

我正在监视 Azure 服务的性能。

当前有两个 Web 角色实例（用于同一网站）正在运行 - 每个都有自己的 W3WP.exe（w3wp 和 w3wp#1）

如何找出哪个 w3wp 进程属于哪个角色实例？

有了这些信息，我想为 azure.diagnostics.monitor 提供一些性能计数器 - 即 Process(w3wp)\ProcessorTime (%) 和线程计数。但为了获得任何有意义的数据，我必须将 w3wp 进程的进程 ID 附加到性能计数器（例如 Process(w3wp_PID)\processorTime(%)） - 不知道语法是否正确，但有一种方法可以附加PID）

因此 AzureStorage 表 WADPerformanceCounters 中的最终结果只有以下条目：

```
WebRoleInstance_n_0 | process(w3wp_1033)\processorTime (%) |  12.4
WebRoleInstance_n_1 | process(w3wp_1055)\processorTime (%) |  48.4 
```

自动取款机

```
WebRoleInstance_n_0 | process(w3wp)\processorTime (%) |  12.4
WebRoleInstance_n_1 | process(w3wp)\processorTime (%) |  12.4 
```

我想：如果我为每个角色启动了一个 DiagnosticsMonitor，那么监视器将使用正确的进程——属于启动监视器的角色实例。但实际上这不起作用 - 或者我认为它不起作用 - 至少在查看结果值之后。

//更新：在 manage.windowsazure 门户上，您可以为性能监控定义自定义指标。此处可以选择要独占监控的 webrole 实例。这也是我想做的。了解此页面的实际作用也可能有所帮助。

比较： http: [//puu.sh/1xp7q](http://puu.sh/1xp7q)

我能想到的获取此信息的唯一愚蠢方法是：在每个 w3wp 启动之前和之后获取所有进程的列表 - 确定添加了哪个进程，然后根据代码库上下文决定哪个角色实例刚刚启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:19:30.270

我让它工作了——尽管它并不是很直接。

首先，我必须对我之前的陈述进行一些更正——只是为了保持在同一水平上。

在云服务中有多个虚拟机，每个虚拟机托管一个 WebRole 实例或一个 WorkerRole 实例。因此，在单个 VM 上，只有一个 w3wp 运行，或者根本没有 w3wp，只有一个 waworkerhost 进程。

在我的特殊情况下，可以在单个 VM 上运行两个 w3wp。所以我需要区分这两者 - 因此要求我进行某种流程实例关联。

我想记录的是：单个 VM 的总 CPU 负载，在 VM 上运行的实例进程的 CPU 负载（w3wp，waworkerhost）。

每个 VM 的总 CPU 负载的 PerformanceCounter 很简单且相等： \Processor(_Total)\% Processortime for the webrole VM 我不能只使用 \process(w3wp)\% processortime 计数器，因为我不能确定它是否正确w3wp（见上文）

现在这是我所做的：由于您必须为 WebRole.cs 或 WorkerRole.cs 中的每个角色实例 OnStart() 启动性能计数器监视器，我认为这是我可以以某种方式收集所需信息的唯一地方。

在 WorkerRole.cs 我做了：

```
int pc = Environment.ProcessorCount;
        string instance = RoleEnvironment.CurrentRoleInstance.Id;

        SomeOtherManagementClass.StartDiagnosticMonitorService(pc, instance, Process.GetCurrentProcess()); 
```

在 WebRole.cs 中 CurrentProcess 也返回 WaWorkerHost，所以我不得不将上面的代码行移动到 WebRole 的 global.asax 中。这里有正确的过程可用。

在 SomeOtherManagementClass 我放了 StartDiagnosticsMonitorService ，它现在接收调用 StartDiagnosticsMonitorService 的 CurrentProcess。（从 workerrole.cs 它将接收 WaWorkerHost 进程并从 WebRoles 接收 w3wp 进程 - 包括 PID）

```
public static void StartDiagnosticMonitorService(int coreCount, string currentRole, Process process)
    {
        string processName = GetProcessInstanceName(process.Id);
        SetCPUCoreData(coreCount, currentRole, processName, process.Id);
         ...
    instanceProcessLoadCounterName = String.Format(@"\Process({0})\% Processor Time", processName);
    } 
```

现在在每个 VM 上调用 GetProcessInstanceName(process.Id) 并将 processName 获取到提供的 process.Id - 这允许您区分单个 VM 上的多个 w3wps，因为返回的 instanceNames 是 w3wp、w3wp#1、w3wp# 2等与GetCurrentProcess提供的processName相反，它总是w3wp。为此，我修改了我在 stackoverflow 上找到的代码示例 - 你可以在下面找到它：

```
private static string GetProcessInstanceName(int pid)
    {
        PerformanceCounterCategory cat = new PerformanceCounterCategory("Process");

        string[] instances = cat.GetInstanceNames();
        foreach (string instance in instances)
        {
            try
            {
                using (PerformanceCounter cnt = new PerformanceCounter("Process",
                 "ID Process", instance, true))
                {
                    int val = (int)cnt.RawValue;
                    if (val == pid)
                    {
                        return instance;
                    }
                }
            }
            catch (InvalidOperationException)
            {
                //this point is reached when a process terminates while iterating the processlist- this it cannot be found
            }
        }
        return "";
    } 
```

最后但同样重要的是：SetCPUCoreData(coreCount, currentRole, processName, process.Id) 将进程的所有相关数据保存到 azure 存储中，以便在应用程序的任何地方都可以使用它：

```
private static void SetCPUCoreData(int count, string roleinstance, string processName, int processID)
    {
        string[] instances = roleinstance.Split('.');
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(GetSettingValue("LoadMonitor.Connection.String"));
        CloudTableClient cloudTableClient = storageAccount.CreateCloudTableClient();
        const string tableName = "PerformanceMonitorCoreCount";
        cloudTableClient.CreateTableIfNotExist(tableName);
        TableServiceContext serviceContext = cloudTableClient.GetDataServiceContext();

        PerformanceCounterCPUCoreEntity ent = new PerformanceCounterCPUCoreEntity(count, instances[instances.Count() - 1],processName, processID);
        serviceContext.AttachTo(tableName, ent);
        serviceContext.UpdateObject(ent);
        serviceContext.SaveChangesWithRetries(SaveChangesOptions.ReplaceOnUpdate);
    } 
```

PerformanceCounterCPUCoreEntity 是 StorageTable 的模板 - 如果您对此部分有任何疑问，或者只是询问，请查看 azure Storage API。

# html - Twitter BootStrap 背景图片

> ID：13709161
> 
> 赞同：2
> 
> 时间：2012-12-04T18:06:53.017
> 
> 标签：html, css, twitter-bootstrap, background-image

我在顶部有一个固定的导航栏和一个全宽背景跨越 span12 的容器。但由于背景图像的内容对于视觉提示的布局至关重要。无论窗口大小如何，我都希望始终显示整个图像。

这是构建图像或图像集以实现相同目的的最佳方法。

**大显示器**

![在此处输入图像描述](../Images/ade7e64b80d419e247c34e13dc482caa.png)

**中型显示器**

![在此处输入图像描述](../Images/be2e9997bed7b25508b13e4485f2d039.png)

**小尺寸**

![在此处输入图像描述](../Images/4b28578a099ca44a87300192b6c33f95.png)

我有一个将显示在图像右侧的表格。因此，让图像正常工作对我来说有点棘手。

链接：[play.mink7.com/minkstock/](http://play.mink7.com/minkstock/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:24:43.170

如果我理解正确，您只想拥有图像可以达到的最大尺寸（或百分比）。`<img>`尝试使用这样的元素，而不是背景图像：

```
img{
   max-width: 100%; /* or any other value */
   height: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:21:13.677

您选择使用 css 设置背景图像有什么原因吗？

如果我将#landing-page-bg div 更改为

```
<div id="landing-page-bg" style="background-image: none; width: auto; text-align: center;">
    <img src="http://play.mink7.com/minkstock/images/landing_page_bg.jpg">
</div> 
```

它会产生您想要的效果（减去您设置的一些红色背景）。

如果您想在图像上叠加项目，您可以使用相对 div 定位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:24:59.030

`background: url(images/landing_page_bg.jpg) 77% 0 fixed no-repeat;`为您的小型媒体查询做一些事情。

# sql - 从 oracle 中的另一个模式中选择数据

> ID：13709164
> 
> 赞同：13
> 
> 时间：2012-12-04T18:07:00.180
> 
> 标签：sql, oracle, cx-oracle

我想执行一个查询，该查询从与数据库连接中指定的模式不同的模式中选择数据（相同的 Oracle 服务器、相同的数据库、不同的模式）

我有一个与 Oracle 服务器通信的 python 应用程序。它打开到数据库（服务器/模式）A 的连接，并对该数据库内的表执行选择查询。

我尝试了以下方法：

```
select .... 
from pct.pi_int, pct.pi_ma, pct.pi_es
where ... 
```

但我得到：

```
ORA-00942: table or view does not exist 
```

我也试过用括号括起来架构名称：

```
from [PCT].pi_int, [PCT].pi_ma, [PCAT].pi_es 
```

我得到：

```
ORA-00903: invalid table name 
```

查询是使用 Django 应用程序内部的 cx_Oracle python 模块执行的。

可以这样做还是应该建立一个新的数据库连接？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-04T18:15:15.007

您用来连接数据库的用户`A`（本例中的用户）是否有权`SELECT`访问`PCT`架构中的对象？假设`A`没有此访问权限，您将收到“表或视图不存在”错误。

最有可能的是，您需要您的 DBA 授予用户`A`访问`PCT`您需要的架构中任何表的权限。就像是

```
GRANT SELECT ON pct.pi_int
   TO a; 
```

完成后，您应该能够使用您最初在问题中演示`PCT`的语法来引用架构中的对象。`pct.pi_int`括号语法方法将不起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T03:50:09.297

除了授予之外，您还可以尝试创建同义词。它将避免每次都指定表所有者模式的需要。

从连接模式：

```
CREATE SYNONYM pi_int FOR pct.pi_int; 
```

然后你可以查询`pi_int`为：

```
SELECT * FROM pi_int; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:16:16.350

根据您用于连接数据库的架构/帐户，我怀疑您缺少对用于连接数据库的帐户的授权。

在数据库中连接为 PCT 帐户，然后授予您正在使用的帐户对表的选择访问权限。

```
grant select on pi_int to Account_used_to_connect 
```

# plone - 在 Plone 中自定义 queryCatalog 脚本或默认使用相反的时间顺序

> ID：13709172
> 
> 赞同：0
> 
> 时间：2012-12-04T18:07:33.700
> 
> 标签：plone

我被要求帮助调整使用 Plone 4.0.5 完成的 Intranet；要求之一是始终（默认情况下）在文件夹列表中使用相反的时间顺序。

自从 Plone 是 2.5 版以来，我就没有碰过它；所以很多东西都变了。

有没有简单的参数/配置来完成这个？

失败了。我已经跟踪了将显示的项目提取到 portal_skins/plone_scripts 中的 queryCatalog 脚本。

我已经定制了这个脚本 TTW。稍后我计划通过您推荐的任何方式（适配器？，ZCML？我还没有研究过那些东西）来定制它。这些天的最佳做法是什么？

如果我手动设置了`'sort_on'`and`'sort_order'`键，那么一切似乎都按照我的意愿行事。但是如果我使用`setdefault`dicts的方法，那么什么都没有发生，所以似乎已经请求了一个命令。

如何登录脚本自定义 TTW？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:40:12.643

对于日志记录：

```
context.plone_log('My script', 'My message') 
```

否则，您似乎走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:49:39.317

而不是修补目录（这可能会更改导航或其他您不想要/不需要的地方的排序顺序），您可以

*   自定义您正在使用的文件夹视图（例如 folder_summary_view）这可能会有所帮助：[http ://keeshink.blogspot.co.at/2009/06/how-to-change-plones-default-folder.html](http://keeshink.blogspot.co.at/2009/06/how-to-change-plones-default-folder.html)

*   使用集合来显示文件夹中包含的项目（如果您只在某些文件夹中需要相反的顺序，这是一个好主意）

*   或使用这些插件之一[http://plone.org/products/collective.sortmyfolder](http://plone.org/products/collective.sortmyfolder) 或[http://pypi.python.org/pypi/wildcard.foldercontents](http://pypi.python.org/pypi/wildcard.foldercontents)

# wpf - 从左侧以外的点开始动画

> ID：13709174
> 
> 赞同：0
> 
> 时间：2012-12-04T18:07:50.613
> 
> 标签：wpf, animation

我有一个动画问题，我不确定如何通过 Google 搜索或找到解决方案。我试图基本上创建一个包装选框。我通过在画布中包含以下内容来做到这一点：

|---A部分---|---B部分---|C部分---|

动画从 B 部分的左侧在屏幕右侧开始，并在 B 部分的右侧碰到屏幕左侧时结束。A 部分和 C 部分是 B 部分的镜像，可产生“环绕”效果。当动画结束时，我将所有内容向右移动到 B 部分的确切宽度。对于用户来说，似乎什么都没发生......这一切都只是环绕。

问题是......选框中的某些项目可以隐藏，或者可以更改大小。因此，如果您隐藏一个项目，该项目将从所有三个部分中隐藏。由于东西被隐藏在 A 部分中，并且所有部分的大小都是动态的，因此整个选取框向左移动。

有没有办法将动画“锚定”在某个位置，比如在 B 部分的中间，这样当项目隐藏在 A 部分时，它不会将 B 和 C 部分滑过？相反，我希望 A 部分向右移动以填充空间。

编辑：让我改述一下......因为这很令人困惑。

我有一个画布，其中包含一个堆栈面板，其中包含另外三个堆栈面板。这三个堆栈面板实际上是相同信息的副本，这给人一种在我制作动画时环绕的选框的错觉。当在选取框中添加/删除项目时，堆栈面板中的这些项目会发生变化，从而调整堆栈面板的整体大小，从而调整画布的大小。我想知道的是，我是否可以“锚定”堆栈面板中的特定位置。我可以在第二个堆栈面板副本中的第一个项目上“锚定”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:58:41.820

当您详细说明您想要的行为时，我的另一个答案已经过时了，所以请原谅我发布第二个答案。根据我对上述答案的后面评论，请考虑以下示例：

```
<Canvas x:Name="LayoutRoot">

    <Grid x:Name="MarqueePanels">

        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Rectangle Grid.Column="0" Height="{Binding ElementName=PrimaryMarquee, Path=ActualHeight}" Width="{Binding ElementName=PrimaryMarquee, Path=ActualWidth}">
            <Rectangle.Fill>
                <VisualBrush Visual="{Binding ElementName=PrimaryMarquee}"/>
            </Rectangle.Fill>
        </Rectangle>

        <StackPanel Grid.Column="1" x:Name="PrimaryMarquee">
            <TextBlock Text="Marquee Item 1"/>
            <TextBlock Text="Marquee Item 2"/>
            <TextBlock Text="Marquee Item 3"/>
        </StackPanel>

        <Rectangle Grid.Column="2" Height="{Binding ElementName=PrimaryMarquee, Path=ActualHeight}" Width="{Binding ElementName=PrimaryMarquee, Path=ActualWidth}">
            <Rectangle.Fill>
                <VisualBrush Visual="{Binding ElementName=PrimaryMarquee}"/>
            </Rectangle.Fill>
        </Rectangle>

    </Grid>

</Canvas> 
```

正如我上面提到的，将`Visibility`任何`TextBox`元素的 因此，如果您确实需要使用 a来包含视觉元素，那么我建议根据您上面的评论使用代替.`Hidden``StackPanel``Visibility.Collapsed``Arrange``StackPanel``Visibility.Hidden``Visibility.Collapsed`

还要注意`VisualBrush`复制选取框内容的使用。这将简化代码，并确保所有 3 种视觉效果始终匹配（您应用到包含 的`Rectangle`对象的任何定位或转换除外`VisualBrush`）。

此外，我应该说我个人会使用 a`Canvas`代替`StackPanel`，因为`Canvas`它更适合子元素的绝对定位，因此是您提出问题的原因。

克雷格，我真的希望这会有所帮助。我（像这里的大多数人一样）会尽我所能提供帮助。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:53:30.603

要回答什么似乎是主要问题：

> 有没有办法使用 Canvas.Left 属性以外的东西来动画画布的位置

将 的`RenderTransform`属性设置`Canvas`为 a`TranslateTransform`并对属性进行动画处理`TranslateTransform.X`：

```
<Canvas x:Name="myCanvas" RenderTransformOrigin="0.5,0.5">
    <Canvas.RenderTransform>
        <TranslateTransform X="0"/>
    </Canvas.RenderTransform>  
</Canvas> 
```

然后在代码中：

编辑：此方法调用的第二个参数应该是 type `DoubleAnimation`，而不是`Duration`。当我打字的时候，我一定是在办公桌前睡觉。对不起。

```
(TranslateTransform)MyCanvas.RenderTransform.BeginAnimation(TranslateTransform.XProperty, new Duration(TimeSpan.FromSeconds(3))); 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:43:02.473

知道了。

我将边距设置为 -(theControl.ActualWidth / 2)。我所有的代码都将所有内容都移回相同的数量以进行补偿。

然后我在控件上有一个 SizeChanged 的​​事件处理程序，我在其中设置了这个值。如果控件的大小发生变化，则边距会更新，并且所有内容都集中在控件的中间。如果您想要在控件中设置动画中心的特定点，则使用该点而不是上述中点。

# linux - 在 Linux 中打开 GPIO 有线 LED

> ID：13709175
> 
> 赞同：0
> 
> 时间：2012-12-04T18:07:54.607
> 
> 标签：linux, embedded, linux-device-driver, gpio

我希望在 Linux 中找到一种通用机制来切换连接到嵌入式应用程序中 GPIO 控制器的 LED。

我可以使用 JTAG 或我的引导加载程序（直接设置寄存器）。但是，从用户模式切换一些灯会很棒

我在 Linux 上对此并不精通，是否有可以从我的用户模式应用程序调用的标准内核驱动程序？还是我需要为我的应用程序编写驱动程序？

我进行了一次网络搜索，发现了从编写自己的驱动程序到感觉即席的库的各种想法。我希望找到最“标准”的方式，认为 stackoverflow 人群会有很好的意见

任何提示都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:54:57.187

您想使用 sysfs 接口连接 GPIO

[http://www.kernel.org/doc/Documentation/gpio.txt](http://www.kernel.org/doc/Documentation/gpio.txt)

在该链接中搜索“用户空间的 Sysfs 接口”

我不知道您使用的是哪种类型的系统，或者您的内核中是否已经启用了对此的支持，但这就是您想要查看的地方。

# entity-framework - 基于通用接口从查询中过滤 EF 对象图

> ID：13709176
> 
> 赞同：0
> 
> 时间：2012-12-04T18:07:59.510
> 
> 标签：entity-framework

如果我有一个由所有实体实现的通用接口，例如：

```
public interface IEntity {
    int Id { get; set; }
    DateTime ValidFrom { get; set; }
    DateTime? ValidTo { get; set; }
} 
```

如果 ValidTo 为空，是否可以过滤掉作为查询的一部分返回的对象 - 只返回仍然有效的对象。

我得到这个想法的地方是 Julia Lerman 和 Rowan Miller 在 PEF:DbContext 中使用类似的东西来设置断开连接的实体的状态，但是他们通过状态管理器来做到这一点，这允许他们遍历实现特定接口的所有实体 - 我想做类似的事情，但是在涉及子实体的查询上。

我正在使用 SQL Server 2012、EF5 和 .Net 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:03:41.687

您引用的示例依赖于`ChangeTracker.Entries<T>()`接受接口作为泛型类型参数的方法。当然，这一切都发生在内存中，不涉及到 SQL 的转换。

在将 linq 转换为 SQL 时，实体框架（还）不支持接口，主要是因为`DbSet<T>`必须基于一个具体的类。

您唯一的机会是创建一个基本类型而不是一个接口，并让您的实体从中派生。

# python - 已在 /appname/ 注册：模型用户已注册

> ID：13709177
> 
> 赞同：30
> 
> 时间：2012-12-04T18:08:00.673
> 
> 标签：python, django, django-registration

我正在尝试将 django.contrib.auth 用户与我自己的 UserProfile 连接，当我访问该站点时出现“已注册”错误。

这是回溯：

```
Environment:

Request Method: GET
Request URL: myurl.com/django/appname/

Django Version: 1.4.2
Python Version: 2.6.8
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'polls',
 'appname',
 'registration',
 'django.contrib.humanize')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/lib/python2.6/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/var/www/mysite/mysite/urls.py" in <module>
  3\. admin.autodiscover()
File "/usr/lib/python2.6/site-packages/django/contrib/admin/__init__.py" in autodiscover
  29\.             import_module('%s.admin' % app)
File "/usr/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/var/www/mysite/appname/admin.py" in <module>
  4\. admin.site.register(User)
File "/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py" in register
  80\.                 raise AlreadyRegistered('The model %s is already registered' % model.__name__)

Exception Type: AlreadyRegistered at /appname/
Exception Value: The model User is already registered 
```

我很确定这源于我的应用程序的models.py，我相信这就是我所做的主要改变。

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class Tag(models.Model):
        pics = models.ManyToManyField('Picture', blank=True)
        name = models.CharField(max_length=30)

        def __unicode__(self):
                return self.name

class UserProfile(models.Model):
        name = models.CharField(max_length=20)
        date_joined = models.DateTimeField('date joined')
        auth_user = models.OneToOneField(User)

        def __unicode__(self):
                return self.name

def create_user_profile(sender, instance, created, **kwargs):
        if created:
                UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User)

class Picture(models.Model):
        name = models.CharField(max_length=100)
        pub_date = models.DateTimeField('date published')
        tags = models.ManyToManyField('Tag', blank=True)
        owner = models.ForeignKey('UserProfile')
        content = models.ImageField(upload_to='instaton')

        def __unicode__(self):
                return self.name

class Comment(models.Model):
        content = models.CharField(max_length=500)
        date = models.DateTimeField('date commented')
        commenter = models.ForeignKey('UserProfile')
        pic = models.ForeignKey('Picture')

        def __unicode__(self):
                return self.content 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-04T18:12:37.947

当您在应用程序中定义自定义用户管理员时`admin.py`，您必须先取消注册默认`User`模型管理员，然后再注册您自己的管理员。

```
admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

# css - 递归 LESS：“预期表达式”

> ID：13709179
> 
> 赞同：0
> 
> 时间：2012-12-04T18:08:25.460
> 
> 标签：css, recursion, less

我正在尝试在 LESS 1.3.1 中实现递归循环。不管你最后应该做什么混入（它与颜色有关），但要注意为什么递归循环会失败。

```
@iter: 4;

.loop(@index, @n) when (@index <= @n) { // throws "expected expression"?
    .foo@{index} { color: black; }
    .loop(@index + 1, @n);
}

.loop(@index, @n) when (@index > @n) {
    .terminated { color: white; }
}

.loop(1, @iter); 
```

混入`.loop`应该进行 4 次迭代，然后终止，做 a`.terminated {}`或某事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:01:18.257

你有你的 = 和 > 错误的方式

[更少的 Mixin Guards 文档](http://lesscss.org/#-mixins)

“可用于警卫的比较运算符的完整列表是：> >= = =< <。此外，关键字 true 是唯一的真值，使这两个 mixin 等效：”

```
.loop(@index, @n) when (@index <= @n) 
```

应该

```
.loop(@index, @n) when (@index =< @n) 
```

# java - KolmogorovSmirnov分布正态性检验

> ID：13709180
> 
> 赞同：1
> 
> 时间：2012-12-04T18:08:27.670
> 
> 标签：java, statistics

有人知道如何实现或使用 KolmogorovSmirnovDistribution (org.apache.commons.math3.distribution) 来测试一个特定分布的正态性吗？

# php - 带有会话的 Android 登录身份验证

> ID：13709181
> 
> 赞同：2
> 
> 时间：2012-12-04T18:08:30.067
> 
> 标签：php, android, authentication, login, session-cookies

我知道之前已经介绍过登录身份验证。但是，我在实施它时遇到了一些麻烦。到目前为止，我在 android 应用程序中有一个基本表单，它将登录凭据发送到我的服务器。验证凭据后，如何在 php api 中创建令牌会话？

我只是使用：

```
session_start();
$_SESSION['username'] = $user;
$_SESSION['auth'] = "true"; 
```

如果是这样，我如何将此会话传递给 android 应用程序？

Android App中的登录验证：

```
HttpClient client = new DefaultHttpClient();
String url = "http://www.somewebsite.com/login.php?username="+username+"&password="+password;
HttpGet request = new HttpGet(url);
// Get the response
ResponseHandler<String> responseHandler = new BasicResponseHandler();
response_str = client.execute(request, responseHandler); 
```

# c++ - C ++ builder更改主菜单背景颜色

> ID：13709185
> 
> 赞同：0
> 
> 时间：2012-12-04T18:08:47.140
> 
> 标签：c++, menu, background-color, c++builder

这是演示如何更改主菜单项的背景颜色的脚本，而菜单的其余部分仍保持灰色

```
 void __fastcall TForm1::AdvancedDrawNewItemMain(TObject *Sender, TCanvas *ACanvas,    const TRect &ARect,
      TOwnerDrawState State)
{

    TMenuItem *MenuItem = ((TMenuItem*)Sender);
    TRect  TempRctN = ARect;
    TempRectN.top=TempRctN.top+2;
    ACanvas->Brush->Color =clRed;
    ACanvas->FillRect(ARect);

    DrawTextW(ACanvas->Handle,MenuItem->Caption.w_str(),MenuItem->Caption.Length(),&TempRctN, DT_CENTER);

  if((State.Contains(odSelected) || State.Contains(odHotLight) ) && !State.Contains(odDisabled) )
  {
   ACanvas->Brush->Color =static_cast<TColor>RGB(49,106,197);
   ACanvas->FillRect(ARect);
   ACanvas->Font->Color=clWhite;
   DrawTextW(ACanvas->Handle,MenuItem->Caption.w_str(),MenuItem->Caption.Length(),&TempRctN, DT_CENTER);
  }

} 
```

有人知道如何更改整个主菜单背景颜色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:41:42.257

操作系统不支持您的要求。标准`TMainMenu`只能所有者绘制单个项目，而不是整个菜单。如果要自定义整个菜单，则必须使用不同的组件，例如找到支持所需内容的第三方自定义菜单实现。

# javascript - 推特小工具不工作

> ID：13709186
> 
> 赞同：0
> 
> 时间：2012-12-04T18:08:47.960
> 
> 标签：javascript, twitter

我创建了一个 twitter 小部件并将其插入到一个页面中。它在我的计算机上运行良好，但在其他任何计算机上都运行良好。我什至不知道从哪里开始调试这个。

这是 twitter 生成的代码：

```
<a class="twitter-timeline" href="https://twitter.com/NavigatorPG" data-widget-id="256786483787218945">Tweets by @NavigatorPG</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

这是带有小部件[http://navigatorplanninggroup.org/的页面](http://navigatorplanninggroup.org/)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:49:46.623

我遇到了同样的问题。您的问题涉及多个问题。要调试 JS，您需要切换浏览器中的 JavaScript 和诸如“firebug”之类的调试器 - 一个适用于众多浏览器的插件。由于许多问题，这对这个错误的小部件没有帮助：来自 Twitter 的`<script>`src 属性中的断开链接，它引用了没有协议的无效链接。请注意缺少的 `http:! 以供将来参考，您可以访问有效链接并将其复制并粘贴到您自己的 .js 中（JavaScript 文件并通过绝对或相对路径引用它，**这不适用于此小部件。**打开 JavaScript即可将按预期看到小部件。要么是小部件代码有问题，要么是 twitter 我错误地声明他们的小部件不需要 JavaScript。

# jodatime - 确定任何星期三下午 3 点是否包含在区间中？

> ID：13709189
> 
> 赞同：0
> 
> 时间：2012-12-04T18:08:59.770
> 
> 标签：jodatime

这个问题是不言自明的。我想创建一个新的时间间隔（当时，现在），看看是否有任何星期三下午 3 点（或一周中的任何其他日期/时间组合）包含在该时间间隔内。需要明确的是，我对特定的 DateTime 是否包含在 Interval 中不感兴趣，而只是一个通用的星期几/时间组合。

在 Joda 中是否有一种优雅/干净的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:33:00.130

```
 DateTime fromDate = new DateTime(); // begin interval
   DateTime toDate = fromDate.plusMinutes(999999); // end inteval
   Interval interval = new Interval(fromDate, toDate); // interval
   DateTime anchor = fromDate.minusWeeks(1).withDayOfWeek(DateTimeConstants.WEDNESDAY).withMillisOfDay(
      0).withHourOfDay(15); // Wednesday 3pm from previous week

   while (anchor.isBefore(toDate))
   {
      if (interval.contains(anchor))
      {
         return anchor; // if interval contains Wednesday 3pm - > return it
      }
      else
      {
         anchor = anchor.plusWeeks(1); // else get next Wednesday 3pm from next week  
      }
   }
   return null; // Wednesday 3pm isn't in interval 
```

# spring - Spring JSP - 一个视图返回 404

> ID：13709190
> 
> 赞同：0
> 
> 时间：2012-12-04T18:09:12.833
> 
> 标签：spring, model-view-controller, jsp, controller

我有一个带有 RequestMapping 方法的控制器类。此方法未呈现。我在控制台中看不到任何错误。我确信我的请求正在使用一些打印语句正确映射。但是视图没有呈现，日志中也没有错误。我只是在浏览器中得到一个 HTTP 404。不确定其他视图正确呈现时出了什么问题。我已阅读以下问题[SpringMVC 给出 404 返回视图](https://stackoverflow.com/questions/11421239/springmvc-giving-404-returning-a-view) 但无济于事。

这是请求映射方法。不知道出了什么问题或如何调试它？我所有的 jsp 文件都在一个目录中。我的控制器中还有一个公共默认构造函数。但是我的控制器可能还有其他问题，我还没有看到。如果您需要更多详细信息，这里是更详细代码的链接。 [https://github.com/C4G/V2V/blob/cbc4a8d9e904ab1f5bf47b9550a0879ccff33b01/src/controller/TestResultsController.java](https://github.com/C4G/V2V/blob/cbc4a8d9e904ab1f5bf47b9550a0879ccff33b01/src/controller/TestResultsController.java)

```
 @RequestMapping(value = "/editTestResultFormGenerator", method = RequestMethod.GET)
  public ModelAndView editTestResultFormGenerator(HttpServletRequest request,
      Model model,
      @RequestParam(value="collectionNumber", required=false) Long collectionNumber,
      @RequestParam(value="collectionId", required=false) Long collectionId) {

    TestResultBackingForm form = new TestResultBackingForm();

    ModelAndView mv = new ModelAndView("editTestResultForm");
    Map<String, Object> m = model.asMap();
    m.put("refreshUrl", getUrl(request));
    m.put("existingTestResult", false);
    if (collectionId != null) {
      form.setId(collectionId);
      TestResult testResult = testResultRepository.findTestResultByCollectionId(collectionId);
      if (testResult != null) {
        form = new TestResultBackingForm(testResult);
        m.put("existingTestResult", true);
      }
      else {
        form = new TestResultBackingForm();
      }
    }

    addEditSelectorOptions(m);
    m.put("editTestResultForm", form);
    m.put("refreshUrl", getUrl(request));
    // to ensure custom field names are displayed in the form
    m.put("testResultFields", utilController.getFormFieldsForForm("TestResult"));
    System.out.println(m);
    mv.addObject("model", m);
    return mv;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:57:24.980

发现了问题。使用 Eclipse 自动完成，我选择了错误的 ModelAndView 类。

我应该选择的。

```
import org.springframework.web.servlet.ModelAndView; 
```

而我选择

```
import org.springframework.web.portlet.ModelAndView; 
```

这就解释了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:12:08.697

您需要`return mv;`在请求处理程序方法的末尾添加。

^（显然错了。不够清醒，呵呵。）

讨论后编辑：该特定控制器不太正确，但与方法的代码无关。查看 git 存储库中的代码后，我看不到任何明显的东西，因此建议进行大量日志记录/调试以准确找出问题所在。或者干脆不使用那个控制器。:)

# jquery - 在 JSP 中使用 jQuery Datepicker

> ID：13709197
> 
> 赞同：2
> 
> 时间：2012-12-04T18:09:42.740
> 
> 标签：jquery, jsp

下面是jsp代码。

```
<head>
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/style_sheet/page_header.css" >
    <link href="<%=contextPath %>/scripts/jQuery/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script  src="<%=contextPath %>/scripts/jQuery/jquery.min.js" ></script>
    <script  src="<%=contextPath %>/scripts/jQuery/jquery-ui.min.js"></script>
    <script src="jscript.js" ></script>

    <style>
        .pageWidth
        {
            width: 800px;
        }
    </style>

    <script>
        $(document).ready(function(){
            $("#startDatePicker").datepicker();
        });
    </script>

    <title>GFW Voice OUT Files Trend</title>

</head>
<body>

      <table width="800x" border="0" align="center">
         <tr>
            <td>Start Date: <input type="text" id="startDatePicker" /></td>
         </tr>
      </table>

</body> 
```

我在语法上遇到错误

```
$(document).ready(function(){
   $("#startDatePicker").datepicker();
}); 
```

*错误*

```
The function $(HTMLDocument) is undefined. 
```

我虽然 Eclipse 在 EL 和 jQuery 语法之间感到困惑，但使用 \$ 并没有帮助。我究竟做错了什么？我想做的就是使用jQuery datepicker。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:22:01.413

jquery 文件未正确安装。使用该代码其工作。

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"      "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

 <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <script>
$(function() {
    $( "#datepicker" ).datepicker();
});
</script>
 <title>Test</title>
</head>
<body>

Date: <input type="text" id="datepicker" />
</body>
  </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:22:13.443

尝试其中一些：

```
<table width="800x" border="0" align="center">
           //----^-----------------remove the x here no need of it 
```

和

```
jQuery(document).ready(function($){
   $("#startDatePicker").datepicker();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:19:19.227

使用[noConflict](http://api.jquery.com/jQuery.noConflict/)来解决冲突。

# java - 从 JAVA 中的 JSON 字符串获取图像

> ID：13709199
> 
> 赞同：-5
> 
> 时间：2012-12-04T18:09:45.123
> 
> 标签：java, android

我从 php 向 Java 发送 JSON 字符串，它由一些字符串类型数据和编码图像组成。在 jJva 中，inputStream 被转换为 BufferedReader 和 String。现在字符串看起来像`{"name": "xxx", "image":agrewfefe...}` 有没有任何可能的方法来将表示图像的字符串解码为位图，或者我必须在其他流中发送图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:07:33.940

如前所述，Base64 编码是可行的方法。但不要手动执行此操作，只需使用[Jackson JSON 库](http://jackson.codehaus.org)，它会自动 Base64 编码/解码二进制数据（任何声明为 的内容`byte[]`）。所以像

```
public class Request {
  public String name;
  public byte[] image;
}

Request req = new ObjectMapper().readValue(new URL("http://my.service.com/getImage?id=123"),
  Request.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:06:35.327

是的; 您需要对图像进行[Base64 编码](http://en.wikipedia.org/wiki/Base64)。

因为你不能保证你生成的字符是可打印的，或者它们不会破坏 JSON 格式。

有许多 Base64 编码/解码库。[Apache commons（编解码器）库](http://commons.apache.org/codec/)中包含一个常用的

[这是来自http://www.kodejava.org/examples/375.html](http://www.kodejava.org/examples/375.html)的简单用法示例

```
import org.apache.commons.codec.binary.Base64;
import java.util.Arrays;

public class Base64Encode {
    public static void main(String[] args) {
        String hello = "Hello World";

        //
        // The encodeBase64 method take a byte[] as the paramater. The byte[] 
        // can be from a simple string like in this example or it can be from
        // an image file data.
        //
        byte[] encoded = Base64.encodeBase64(hello.getBytes());

        //
        // Print the encoded byte array
        //
        System.out.println(Arrays.toString(encoded));

        //
        // Print the encoded string
        //
        String encodedString = new String(encoded);
        System.out.println(hello + " = " + encodedString);
    }
} 
```

在发送端，您将为 JSON“图像”字段使用该编码字符串。另一方面，您将解析 JSON，然后将 Base64 字符串解码回图像。

**编辑添加：**只需重新阅读您的问题（我最初只注意到标签并错过了 PHP 部分） - 在 PHP 方面您需要使用`base64_encode`

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

# visual-studio-2010 - 带有 SSDT 的 Visual Studio 2010 无法识别某些对象

> ID：13709200
> 
> 赞同：0
> 
> 时间：2012-12-04T18:09:51.133
> 
> 标签：visual-studio-2010, stored-procedures, sql-server-data-tools

我在现有解决方案中有几个不同的数据库项目，并且遇到了一些奇怪的行为。我在项目中定义的 99% 的数据库对象工作得很好，但是当模式比较完成时，少数没有被识别为项目的一部分。就好像他们根本不存在一样。到目前为止，它们似乎都是被跳过的存储过程。

我像其他所有对象一样创建它们。

您可能需要什么信息来调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:35:27.893

我找到了没有创建对象的一个​​原因。一些文件最初是作为脚本文件而不是存储过程文件创建的。似乎数据库项目跟踪哪些文件代表需要同步的对象。

打勾是知道您是否有数据库对象 sql 文件或脚本 sql 文件。了解您在脚本文件中的一种简单方法是，它们将在内容区域（选项卡下方）中有一个菜单栏，而作为函数或存储过程创建的文件则没有。菜单栏有执行、解析、连接设置、SQLCMD 模式等内容。

* * *

正如一位同事所指出的，不同之处似乎在于 Build Action 属性。同步的文件似乎都将 Build Action 设置为 Build

# python - Z3可以用来预处理问题吗？

> ID：13709201
> 
> 赞同：5
> 
> 时间：2012-12-04T18:09:53.580
> 
> 标签：python, z3

对 SMT 求解器进行新的研究多次受到以下事实的阻碍：可用问题需要大量与决策过程没有直接关系的技巧和预处理技术。这些通常未发布或需要时间来正确实施和优化，此外还使得对不同求解器的比较和理解非常困难。

是否可以使用 Z3 作为预处理器来处理问题并将其以预处理形式（z3 本身用于解决问题的形式）转储出来？

我没有看到任何命令行选项，但我猜测可能有某种方法可以通过策略、通过 python 接口甚至编写一些额外的代码来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:50:01.353

是的，Z3 可以用作预处理器。该命令`apply`允许用户应用策略并将其转储为 SMT 2.0 基准。这是一个示例（也可在[http://rise4fun.com/Z3/eutO](http://rise4fun.com/Z3/eutO)在线获得）：

```
(declare-const x Real)
(declare-const y Real)

(assert (forall ((n Real)) (or (< x n) (< n y))))
(assert (= (< x y) (< x 100.0)))

(apply (then qe nnf) :print false :print-benchmark true) 
```

在上面的示例中，qe（量词消除）和 nnf（否定-范式）策略应用于输入问题。

一些额外的点：

*   几种策略只能产生令人满意的结果。因此，结果基准的模型不一定是原始公式的模型。我们可以要求 Z3 转储相关的“模型转换器”（选项`:print-model-converter true`）。模型转换器对 Z3 用于将结果公式的模型转换为原始公式的模型的步骤进行编码。但是，没有打印模型转换器的标准，Z3 无法阅读这些描述。当然，我们可以使用编程 API 将所有内容粘合在一起。

*   一小部分策略会产生低于（只有饱和结果可以信任）或高于（只有未饱和结果可以信任）的近似值。它们通常用于模型或证明查找。当 Z3 显示结果目标时，它会告知结果是精确的（sat 和 unsat 可以信任）。

# c# - Linq to Entities 中的 Expression.Coalesce

> ID：13709208
> 
> 赞同：2
> 
> 时间：2012-12-04T18:10:06.500
> 
> 标签：c#, linq, linq-expressions

是否可以在 Linq to Entities中使用该`Expression.Coalesce`方法（[http://msdn.microsoft.com/en-us/library/bb302730.aspx ）？](http://msdn.microsoft.com/en-us/library/bb302730.aspx)如何？有什么可用的例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:32:35.940

您可以`??`在 linq 到实体查询中使用运算符，如下所示：

```
var query = from x in context.Table
            select x.Property1 ?? "Test"; 
```

`Expression.Coalesce`当您想要动态构造查询时使用该方法。

# ruby-on-rails - Rails ActiveRecord 告诉不要问

> ID：13709209
> 
> 赞同：0
> 
> 时间：2012-12-04T18:10:08.887
> 
> 标签：ruby-on-rails, activerecord, tdd, tell-dont-ask

有两个这样的类：

```
class Site < ActiveRecord::Base
  has_one :subscription, dependent: :destroy

  def self.hostname_active?(hostname)
    site = where(hostname: hostname)
    site.exists? && site.first.active?
  end

  def active?
    subscription.active?
  end
end

class Subscription < ActiveRecord::Base
  belongs_to :site

  def active?
    (starts_at..ends_at).cover?(Date.current)
  end
end

describe Site do
  let(:site) { Fabricate.build(:site) }

  describe "#hostname_active?" do
    it "Returns true if site with hostname exists & is active" do
      described_class.stub_chain(:where, :exists?).and_return(true)
      described_class.stub_chain(:where, :first) { site }
      site.stub(:active?).and_return(true)
      described_class.hostname_active?('www.example.com').should be_true
    end

    it "Returns false if site with hostname doesn't exist" do
      described_class.stub_chain(:where, :exists?).and_return(false)
      described_class.stub_chain(:where, :first) { site }
      site.stub(:active?).and_return(false)
      described_class.hostname_active?('www.example.com').should be_false
    end

    it "Returns false if site is not active" do
      described_class.stub_chain(:where, :exists?).and_return(true)
      described_class.stub_chain(:where, :first) { site }
      site.stub(:active?).and_return(false)
      described_class.hostname_active?('www.example.com').should be_false
    end
  end
end 
```

在相关订阅确定站点是否处于活动状态的情况下，我使用该方法`hostname_active?`作为路由中的约束以及在需要确定它是否 a) 存在和 b) 处于活动状态的其他类中。

取自关于 SO 的另一个问题：

> Tell-don't-ask 基本上意味着你不应该查询一个对象的状态，根据它的状态做出决定，然后告诉同一个对象要做什么。如果对象拥有它需要的所有信息，它应该自己决定。

虽然我不这样做，但我的代码确实感觉非常耦合，无论是在站点和订阅之间的耦合方面，还是在与 ActiveRecord 的耦合方面，这使得在不接触数据库的情况下很难进行测试。

您将如何构建它以避免询问相关订阅以确定站点的状态？而且，你会认为这违反了“不问不问”的规定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:15:05.017

使用 ActiveRecord，你会有一些耦合，这没关系，你正在做的事情不会违反 LOD。您可以对该字段进行非规范化`active`以将其保留在站点本身上，但我不会这样做。

我要改变的一件事是急切地加载订阅。

```
#Just showing changes

class Site < ActiveRecord::Base
  scope :active, includes(:subscription).merge(Subscription.active)
  has_one :subscription, dependent: :destroy

  def self.hostname_active?(hostname)
    active.where(hostname: hostname).exists?
  end
end

class Subscription < ActiveRecord::Base
  scope :active, where(arel_table[:starts_at].lteq(Date.current), arel_table[:ends_at].gteq(Date.current))
end 
```

至少，这将使您不必执行两次查询来确定主机名是否处于活动状态。

至于存根 ActiveRecord，我通常不会看到这种情况发生。普遍接受的做法是使用夹具或工厂来构建您的测试对象。就个人而言，我使用 FactoryGirl：[https](https://github.com/thoughtbot/factory_girl_rails) ://github.com/thoughtbot/factory_girl_rails 。

在你的情况下，我会有这样的工厂：

```
FactoryGirl.define do
  factory :subscription do
    site
    factory :active_subscription do
      starts_at { Date.today.beginning_of_month }
      ends_at { Date.today.end_of_month }
    end

    factory :inactive_subscription do
      starts_at { Date.today.beginning_of_month - 3.months }
      ends_at { Date.today.end_of_month - 3.months }
    end
  end
end

FactoryGirl.define do
  factory :site do
    sequence(:hostname, 1000) {|h| "site#{h}.example.com" }
    factory :active_site do
      after(:create) do |site|
        FactoryGirl.create(:active_subscription, site: site)
      end
    end
    factory :inactive_site do
      after(:create) do |site|
        FactoryGirl.create(:inactive_subscription, site: site)
      end
    end
  end
end 
```

这将使我的规格看起来像：

```
describe Site do 
  describe "Active site" do
    subject(:site) { FactoryGirl.create :active_site }
    its(:active?) { should eq(true) }
  end

  #etc...
end 
```

# windows-phone-7 - 如何等到所有异步调用完成

> ID：13709214
> 
> 赞同：0
> 
> 时间：2012-12-04T18:10:39.653
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-8

我有一个 ScheduledTaskAgent 项目，ScheduledAgent.cs 中的 oninvoke() 方法调用自定义类库项目中的 fetchcurrentdetails() 方法。

在这个公共字符串 fetchcurrentdetails() 方法中，它有以下一系列事件。

```
 //class variables
            string strAddress = string.empty;
             public string fetchcurrentdetails()
              {
                GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
                if (watcher.Permission == GeoPositionPermission.Granted)
                 {
                  watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);    
                 }
                 return strAddress ;
              }

           private void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
             {
            WebClient bWC = new WebClient();                
            System.Uri buri = new Uri("http://dev.virtual//...");
            bWC.DownloadStringAsync(new Uri(buri.ToString()));
            bWC.DownloadStringCompleted += new                    DownloadStringCompletedEventHandler(bHttpsCompleted);
           }

          private void bHttpsCompleted(object sender, DownloadStringCompletedEventArgs bResponse)
              {
             //do some data extraction and return the string
             strAddress = "This is extracted data";
             } 
```

return 语句总是将空字符串返回给调用语句。知道如何确保执行保留在类库中，直到方法/事件 bHttpsCompleted() 完成？或者当事件/方法 bHttpsCompleted() 被触发时返回值的方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:22:26.050

你可以这样修改

```
public Task<string> fetchcurrentdetails()
    {

        var tcs = new TaskCompletionSource<string>();

        GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
        if (watcher.Permission == GeoPositionPermission.Granted)
        {
            watcher.PositionChanged += (s, e) =>
                {
                    WebClient bWC = new WebClient();
                    System.Uri buri = new Uri("http://dev.virtual//...");
                    bWC.DownloadStringAsync(new Uri(buri.ToString()));
                    bWC.DownloadStringCompleted += (s1, e1) =>
                    {

                        if (e1.Error != null) tcs.TrySetException(e1.Error);
                        else if (e1.Cancelled) tcs.TrySetCanceled();
                        else
                            tcs.TrySetResult(e1.Result);
                        //do some data extraction and return the string                          
                    };
                };
        }
        return tcs.Task;
    } 
```

称呼 ：`await fetchcurrentdetails()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T13:38:28.927

您应该从 bHttpsCompleted 函数返回。

# android - 应用内计费实施：确认购买

> ID：13709219
> 
> 赞同：1
> 
> 时间：2012-12-04T18:11:04.840
> 
> 标签：android, in-app-purchase, in-app-billing, billing, android-billing

这是实现应用内计费的代码的一部分。我有两个疑问。

```
@Override
    public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
           int quantity, long purchaseTime, String developerPayload) {
        if (Consts.DEBUG) {
            Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
        }

        if (developerPayload == null) {
            logProductActivity(itemId, purchaseState.toString());
        } else {
            logProductActivity(itemId, purchaseState + "\n\t" + developerPayload);
        }

        if (purchaseState == PurchaseState.PURCHASED) {
            mOwnedItems.add(itemId);

            // At this point I have to put Premium changes
        }
    } 
```

我的问题：

1.  在我说“此时我必须进行高级更改”时，我如何向您保证该应用程序已被购买？

2.  据我了解，一旦购买，可能需要几个小时才能生效。如何确保我的应用程序将执行正确的代码：“此时我必须进行高级更改”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:03:08.837

如果你到达这个街区

```
if (purchaseState == PurchaseState.PURCHASED) {
    ...
} 
```

然后你就知道购买成功了。根据我的经验，购买后的延迟不会超过几秒钟。但是用户可以在确认之前关闭应用程序。

这就是为什么你也应该实施`restoreTransactions()`。每次您的活动打开时，它都会与服务器检查该应用程序是否已被购买。

```
/**
 * A {@link PurchaseObserver} is used to get callbacks when Android Market sends
 * messages to this application so that we can update the UI.
 */
private class MyPurchaseObserver extends PurchaseObserver {
    public DownloaderPurchaseObserver(Handler handler) {
        super(home, handler);
    }

    @Override
    public void onBillingSupported(boolean supported) {
        ...
        yourBillingService.restoreTransactions();
        ...
    }

    @Override
    public void onRestoreTransactionsResponse(RestoreTransactions request,
            ResponseCode responseCode) {
        if (responseCode == ResponseCode.RESULT_OK) {
            // repeat your premium validation here
        } else {
            if (Consts.DEBUG) {
                Log.e(TAG, "RestoreTransactions error: " + responseCode);
            }
        }
    }

} 
```

# python - 在 python 中使用 exec 与 import

> ID：13709220
> 
> 赞同：0
> 
> 时间：2012-12-04T18:11:07.540
> 
> 标签：python, django, settings

在django中很常见的是用一个`local_settings.py`文件来补充`settings.py`，这样每台机器可以有不同的设置。通常人们会做这样的事情。

```
try:
    from local_settings import *
except ImportError:
    print "No local settings found!" 
```

但设置文件通常包含大型列表，例如`INSTALLED_APPS`. 如果我想添加一个应用程序，我宁愿不将整个列表复制到`local_settings.py`并修改它（使代码可读性降低，并且更新`settings.py`不再影响任何重写的机器`INSTALLED_APPS`）。所以我想我可以做这样的事情：

```
try:
    f = open('local_settings.py','r')
    exec f.read()
except IOError:
    print "No local settings found!" 
```

现在`local_settings.py`不再需要重写整个`INSTALLED_APPS`变量：

```
INSTALLED_APPS.append('debug_toolbar') 
```

我的印象是，无论您何时使用`exec`，或者`eval`您可能做错了什么。所以我的问题是，这有什么问题吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:14:02.833

有一个更好的方法：导入`INSTALLED_APPS`，`local_settings.py`复制它，然后添加到副本中：

```
import settings

INSTALLED_APPS = settings.INSTALLED_APPS[:] + ['debug_toolbar'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:16:12.940

这是我的技术：

**设置.py**：

```
try:
    from local_settings import *
except ImportError:
    sys.exit("FATAL: No local settings file found.") 
```

* * *

**local_settings.py**

```
import settings

settings.INSTALLED_APPS += ('django_extensions',) 
```

# java - 来自 jar 文件的 Java 背景音乐

> ID：13709226
> 
> 赞同：0
> 
> 时间：2012-12-04T18:11:37.377
> 
> 标签：java, jar, wav

我正在尝试实现当我成为我的程序时开始的背景音乐并继续循环当我从 netbeans 运行程序时它工作得很好，但是当我运行 jar 文件时我无法让它工作。任何想法如何使它与我当前的实现一起工作？谢谢

在主要方法中，我称之为：

```
Sound sound = new Sound(); 
if (sound.setSong("resources\\music.wav")) { sound.start(); } 
```

这是声音类：

```
public class Sound extends Thread {

private AudioStream as; 
private AudioPlayer p; 
private boolean playback;

public void run() { startPlayback(); }

public boolean setSong(String b) {
    try { 
        File a = new File(System.getProperty("user. dir") + "\\src\\" + b);
        if (a.exists()) { 
        // HERE THERE IS THE IMPLEMENTATION WHEN RUN FROM NETBEANS
            as = new AudioStream(new FileInputStream(a));
            return true; 
            } else { // HERE SHOULD BE THE JAR FILE IMPLEMENTATION
            as = new AudioStream(this.getClass().ge tResourceAsStream(b));
            return true;
            }
     } catch (Exception ex) { 
        JOptionPane.showMessageDialog(null, "Error in loading\n" + ex.getMessage());
        } 
        return false; }

public void startPlayback() { 
    playback = true; 
    p.player.start(as); 
    try { 
        do { } while (as.available() > 0 && playback);
        if (playback) { startPlayback(); } 
    } catch (IOException ex) {
         Logger.getLogger(Sound.class.g etName()).log(Level.SEVERE, null, ex);
    }    
}

public void stopPlayback() { playback = false; p.player.stop(as); } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:31:44.527

当应用程序打包为 jar 时，声音文件可能不在“资源”文件夹中 - 它可能在类路径的根目录中。所以，你可能应该这样做`sound.setSong("music.wav")`。

除非您特别想首先尝试从文件系统加载文件，否则您可能不需要这样做 - NetBeans 应该将它添加到类路径中。

另外，请注意 Java 字符串中的反斜杠是转义序列，而不是路径分隔符。所以，如果你想指定一个路径，它是“/a/b”，***而不是***“\a\b”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:52:17.923

在这两种情况下（netbeans 和 jar），您应该可以调用

```
as = new AudioStream(this.getClass().getResourceAsStream("/resources/" + b)); 
```

# android - 如何将android layout_height参数动态设置为0

> ID：13709228
> 
> 赞同：1
> 
> 时间：2012-12-04T18:11:58.463
> 
> 标签：android, android-layout

我正在动态创建 Framelayout。
我动态设置布局参数如下：

```
 float  weights[] = {80,20} <br>
   FrameLayout flayout = new FrameLayout(context); 
   LayoutParams  lp = new LinearLayout.LayoutParams
                         (LayoutParams.MATCH_PARENT,0,weights[i]; 
   flayout.setLayoutParams(lp); 
```

这里的问题是我试图在 LayoutParams 中将 height 参数设置为 0，但它仍然采用 match_parent 并以这样的方式显示，即第一个 framelayout 占据屏幕高度的 20%（实际上应该是 80%），第二个 Framelayout 为 80%这反过来发生。
谁能帮我解决这个问题。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:02:19.433

试试这个代码。

```
 FrameLayout flayout = new FrameLayout(contex); 
  LayoutParams  lp = (LayoutParams) flayout.getLayoutParams();
  lp.height = 0;
  lp.width = LayoutParams.MATCH_PARENT;
  flayout.setLayoutParams(lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:20:50.567

我自己找到了解决方案。包含这 2 个框架布局的 viewGroup(LinearLayout) 的高度应设置为 match_parent。以前它设置为 wrap_Content 这是不正确的。

# java - 在 JTree 上设置 SUID？

> ID：13709230
> 
> 赞同：1
> 
> 时间：2012-12-04T18:12:03.707
> 
> 标签：java, swing, jtree

这是我的问题：我一直在研究一个复杂的产品（100k+ 行代码），它本质上将多达 8 个不同的类附加到一个`JTree`结构并将整个实体序列化到磁盘。我在我自己的每个类中设置 SUID 以促进版本管理，这一切都很好。我一直在`JDK1.7` 通过 textPad 开发工具进行所有测试。到目前为止，一切都很好。

`JRE(1.7)`我使用（上周第一次）启动了我的应用程序，它因反序列化版本错误而崩溃。该错误来自 JTree 的反序列化，而不是我的类。

这引发了两个问题：

1.  `JTree`为什么在同一个 JAVA 版本中不能普遍反序列化的核心数据结构？在 1.7 版本中，JRE Swing 和 JDK Swing 之间肯定没有版本变化吗？
2.  我可以在`JTree`（或其他）Swing 组件中设置 SUID 吗？

请问有人可以看到解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:49:35.070

来自[J2SE 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPanel.html)：“警告：此类的序列化对象将与未来的 Swing 版本不兼容。当前的序列化支持适用于运行相同版本 Swing 的应用程序之间的短期存储或 RMI。从 1.4 开始，支持长期所有 JavaBeansTM 的术语存储已添加到 java.beans 包中。请参阅 XMLEncoder。

# python - 从 SVG 文件创建 cairo 路径

> ID：13709243
> 
> 赞同：4
> 
> 时间：2012-12-04T18:12:48.323
> 
> 标签：python, windows, svg, cairo, pycairo

一定有什么我错过了。

我在 Windows 上，想使用 python 从 SVG 文件中获取路径，将它们缩放到一个新的表面（或全部在一个，这并不重要）。

[我在这里](http://cairographics.org/tutorial/)和[stackoverflow 上](https://stackoverflow.com/questions/6589358/convert-svg-to-png-in-python)阅读了有关 cairo的信息，在我看来，它可以满足我的需求，但我找不到从 svg 文件生成路径的简单方法。没有比手动解析 SVG 更简单的解决方案吗？用xml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:03:49.250

CairoSVG 解析 SVG 文件并将它们呈现给 cairo：[http ://cairosvg.org/](http://cairosvg.org/)

如果您只想要一条路径，则应该可以使用 CairoSVG 中的正确功能。随时在[跟踪器上询问](https://github.com/Kozea/CairoSVG/issues)

# java - 我如何显示 Photo Spheres（使用简单的 Intent）？

> ID：13709245
> 
> 赞同：0
> 
> 时间：2012-12-04T18:13:00.130
> 
> 标签：java, android, eclipse

我将显示 Photo Spheres（Android 4.2 中的 3D 图像）！

我已阅读[http://android-developers.blogspot.de/2012/12/new-google-maps-android-api-now-part-of.html](http://android-developers.blogspot.de/2012/12/new-google-maps-android-api-now-part-of.html)。但我无法使用它。我的应用程序中有以下意图：

```
if (url.contains(".jpg")) {
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(url), "image/*");
startActivity(intent);
} else { ... 
```

因此，图像也显示在 Android <4.2 的设备上。但在 Android >=4.2 上显示图像但我无法激活 Photo Sphere 视图！

我该如何修改意图？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T17:26:52.420

要在 Android 上显示 Photo Sphere，您可以使用 Google Play 服务中的 PanoramaClient API。文档在这里：http: [//developer.android.com/reference/com/google/android/gms/panorama/PanoramaClient.html](http://developer.android.com/reference/com/google/android/gms/panorama/PanoramaClient.html)

您可以查看我们去年的博文，了解如何使用它的示例： [http ://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part-of .html](http://android-developers.blogspot.com/2012/12/new-google-maps-android-api-now-part-of.html)

# c++ - 在链接规范（extern "C"、extern "C++"）中包含标准 C 标头、在 C++ 代码中的指定行为是什么？

> ID：13709248
> 
> 赞同：5
> 
> 时间：2012-12-04T18:13:04.413
> 
> 标签：c++, c, header-files, linkage

`extern`通常，在任何s之外的全局命名空间中包含 C++ 中的标准库头文件，如下所示：

```
#include <stdint.h>

int main() { } 
```

但是，如果您在其中包含一个标准库头文件，会发生什么？例如：

```
extern "C" {
#include <stdint.h>
}
int main() { } 
```

或者

```
extern "C++" {
#include <stdint.h>
}
int main() { } 
```

它是否指定了在这两种情况下应该发生的事情，或者它是实现定义的，甚至是未定义的？

C++11 17.6.2.3p1 说 C++ 标准库头文件放入`extern "C++"`了`<stdint.h>`. C++11 17.6.2.2p3 说标头只能在`#include`任何“外部声明”之外；这个短语在 C++11 中只出现在这个地方，所以我不确定它是否适用于这里。（我假设 C99 对此无话可说。）

（对于我的特殊情况，不能选择使用 C++ 的`<c*>`标准头文件，所以我真的只需要知道老式 C 头文件的语义。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:37:02.277

该标准没有说明不属于 C++ 的 C 头文件。在 C++-11 之前，`stdint.h`/`cstdint`不是 C++ 的一部分。当包含在 C++ 代码中时，它的行为方式取决于该标头。

如果您询问作为 C++ 一部分的 C 标头，*则*`*.h`和之间的唯一区别`c*`是前者不需要将其标识符添加到`std`命名空间（无论是否这样做都是可选的），而后者是*必需*的这样做（它还可以选择将它们添加到全局命名空间中。）没有其他区别。您不应该在块中包含标准`*.h`标题`extern "C"`，因为标题本身会在需要时使用 C 链接。

如果您有想要从 C++ 代码中包含的非标准 C 头文件，那么您必须检查这些头文件以确定是否需要`extern "C"`逐个包含它们。

# ruby-on-rails - Rails：当我创建一个新对象 1 时，让第三个对象保存来自对象 1 和 2 的信息

> ID：13709249
> 
> 赞同：1
> 
> 时间：2012-12-04T18:13:06.250
> 
> 标签：ruby-on-rails, ruby, forms, nested

我有三个模型，分别称为 Product、Category 和 Categorization。

产品型号：

```
 attr_accessible :title, :description, :price, :image_url
    has_many :categorizations
    has_many :categories, :through => :categorizations 
```

类别型号：

```
 attr_accessible :name
    has_many :categorizations
    as_many :products, :through => :categorizations 
```

分类模型：

```
 attr_accessible :category_id, :product_id
    belongs_to :category
    belongs_to :product 
```

创建产品模型时如何创建分类对象？我在新产品表单中添加了类别选择。

基本上，当它创建新产品对象时，我想推入 product_id 和选定的 category_id 并创建一个新的分类对象，以便我可以将产品与类别相关联。

_form.html 用于新产品：

```
 <div>
        <%= f.label :title %>:<br />
        <%= f.text_field :title %><br />
      </div>
      <div>
        <%= f.label :description %>:<br />
        <%= f.text_area :description, :rows => 6 %>
      </div>
      <div>
        <%= f.label :price %>:<br />
        <%= f.text_field :price %><br />
      </div>
      <div>
        <%= f.label :image_url %>:<br />
        <%= f.text_field :image_url %><br />
      </div>

      <% @categories.each do |category| %>

      <div>
        <% f.fields_for :categorization do |builder| %>
        <%= render 'categorization_fields', :f => builder, :product => @product,         :category => category %>
      </div>
      <% end %>
      <% end %> 
```

产品控制器：

```
 def index
        @products = Product.all
      end

      def new
        @category = Category.all
        @product = Product.new
        @categories = @category.find(params[:category])
        categorization = @product.categorizations.build
      end

      def create
        @product = Product.new(params[:product])
        if @product.save
          redirect_to products_path
        else
          render :new
        end
      end

      def edit
        @product = Product.find(params[:id])
      end

      def update
        @product = Product.find(params[:id])
        if @product.update_attributes(params[:product])
          redirect_to @product
        else
          render :edit
        end
      end

      def show
        @product = Product.find(params[:id])
      end

      def destroy
        @product = Product.find(params[:id])
        @product.destroy
        redirect_to products_path
      end

    end 
```

我无法在产品模型中使用 Accepts_nested_attributes_for 像这样工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:21:40.790

也许您需要为`autosave`所需的关系添加选项，例如：

```
has_many :categorizations, :autosave => true
accepts_nested_attributes_for :categorizations 
```

这应该`autosave`在保存您声明关系的模型时保存 'd 关系。

# sql - 具有可变数量表连接的动态 SQL

> ID：13709250
> 
> 赞同：0
> 
> 时间：2012-12-04T18:13:10.357
> 
> 标签：sql, sql-server, sql-server-2008, tsql, dynamic

我的表`icdClm`是一个包含人员人口统计数据的表和另一个列出与该人相关的各种兴趣代码的表之间的连接表。我希望能够多次加入这些表格。由于此时简单起见，我对关系中涉及的其他表不感兴趣。我想要一个`while loop`帮助生成查询（如果有更好的方法我对不同的实现持开放态度。）

如果查询运行两次（两个派生表运行两次），以下是所需的输出。

```
select distinct x1.patid
from
(
select ic.patid
    from icdClm as ic
    where ic.icd like '123%'
) x1 inner join 
(
select ic.patid
    from icdClm as ic
    where ic.icd like '456%'
)x2 on x1.patid=x2.patid
inner join 
(
select ic.patid
    from icdClm as ic
    where ic.icd like '789%'

) x3 on x1.patid=x3.patid 
```

请注意，它们对派生表的别名每次都增加 1。现在我的代码。这段代码不会产生错误，但我让它运行了 10 多分钟，还没有返回任何结果。最终，我想创建另一个依赖于这个的存储过程，它询问您想要的派生表的数量，然后用`where ic.icd like '123%'`用户输入的参数填充，但首先要做的事情是：下面的查询有什么问题？

```
declare 
@x int
,@y int
,@sql nvarchar(1000)

select 
@x=1
,@y=3
,@sql =
'select distinct x1.patid
from
(
select ic.patid
    from icdClm as ic
    where ic.icd like ''123%''
) x1'
while @x < @y
begin;
set @sql=@sql+ 
'inner join 
(
    select ic.pati
    from icdClm as ic
    where ic.icd like ''456%''
) x1 on x'+CAST(@y as CHAR(10))+'.patid=x1.patid'
set @y=@y+1
end;
print @sql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:18:06.687

```
while @x < @y
begin;

set @y=@y+1
end; 
```

`@y`是递增的，所以这个循环要么永远不会执行（因为 y 小于 x），要么它将是一个无限循环*，因为`@y`总是大于`@x`

也许你的意思是`@x=@x+1`

*你最终可能会得到整数溢出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:29:45.957

看起来你正在做一个和多个条款的条件。
如果您使用相交，那么您不需要唯一的名称。
我这样做，但我用 C# 构建它。
抱歉缺少 SP 示例。

```
select patid
    from icdClm 
    where icd like '123%'
Intersect
select patid
    from icdClm 
    where icd like '456%' 
```

[EXCEPT 和 INTERSECT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188055%28v=SQL.105%29.aspx)

我发现相交是有效的。
超过 5 个连接时，查询优化器遇到了我所谓的防御性问题，并且对我的数据产生了较差的响应时间。
Intersect 以蛮力的方式一次执行一次，这可能对您的数据有利也可能不利。
由于您喜欢的开头没有通配符，因此它可能使用索引。

# jquery - 使用 jquery .html() 时防止 HTML 注释被剥离

> ID：13709255
> 
> 赞同：1
> 
> 时间：2012-12-04T18:13:28.703
> 
> 标签：jquery, comments, html

> **可能的重复：使用**[.load() 等](https://stackoverflow.com/questions/5231351/ajax-functions-like-load-strip-out-comments-from-the-html-how-can-i-keep-th)
> [jQuery Ajax 函数选择 HTML注释会从 HTML 中删除注释。](https://stackoverflow.com/questions/1623734/selecting-html-comments-with-jquery)
> [我怎样才能保留评论？](https://stackoverflow.com/questions/5231351/ajax-functions-like-load-strip-out-comments-from-the-html-how-can-i-keep-th)

我们正在做一个 AJAX 调用，结果是通过

```
$('#page_section').html(result); 
```

问题是结果被从我们那里的所有 HTML 注释中剥离。我们需要将 HTML 注释保留在那里，因为它们包含我们稍后需要 CMS 的 JSON 对象。任何防止 HTML 注释被使用`.html()`.

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:22:05.760

该`html()`方法不剥离评论：http: [//jsfiddle.net/WEQW9/](http://jsfiddle.net/WEQW9/)

这是 ajax 方法，检查[Ajax 函数，如 .load() 从 HTML 中删除注释。我怎样才能保留评论？](https://stackoverflow.com/questions/5231351/ajax-functions-like-load-strip-out-comments-from-the-html-how-can-i-keep-th)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:21:45.557

你不能使用 .append() 或 .prepend() 吗？

例子：

```
$('#page_section').append(result);
$('#page_section').prepend(result); 
```

这会将结果附加或添加到匹配的元素。

[http://api.jquery.com/append/](http://api.jquery.com/append/) [http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:22:02.607

一种方法是使用纯 Javascript：

```
$(selector)[0].innerHTML = 'String with comments JSON and BlackJack'; 
```

第二个也是最好的一个 - 您可以使用元素属性进行 json 传递（甚至是类属性）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:22:33.700

如果您使用的是 ID（您有问题），您可以使用 vanilla javascript：

```
document.getElementById("page_section").innerHTML = result; 
```

正如[这个](https://stackoverflow.com/a/13707312/1087848)答案（含蓄地）所述，`.innerHTML()`确实创建了评论节点。

我必须说我同意 Michael C Schuller 的观点，为此使用`data`属性，它是为这类事情而制作的。

# java - Struts2拦截器——如何读取动作参数

> ID：13709257
> 
> 赞同：0
> 
> 时间：2012-12-04T18:13:36.543
> 
> 标签：java, jsp, tomcat, struts2

我的操作类中有一个 ID 请求参数，当它被拦截时，拦截器如何读取此 ID 参数进行检查以验证用户身份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:01:22.363

用于`ActionContext`获取参数映射：

```
Map<String, Object> parameters = ActionContext.getContext().getParameters(); 
```

# php - 使用函数验证电子邮件地址

> ID：13709260
> 
> 赞同：0
> 
> 时间：2012-12-04T18:13:42.583
> 
> 标签：php

我是 PHP 中自定义函数的新手。我正在使用书中的以下功能来验证电子邮件地址：

```
<?php

$email = $_POST['email'];

function is_email($email) {
// Checks for proper email format
    if (!preg_match('/^[A-Za-z0-9!#$%&\'*+-/=?ˆ_`{|}~]+@[A-Za-z0-9]+(\.[A-Za-z0-9]+)+[A-Za-z]%/', $email)) 
    {
        return false;
    } 
    else 
    {
       return true;
    }
}

?>

<!DOCTYPE html>
<html>
<head>
<title>Validate Email</title>
</head>
<body>

    <form method="post" action="<?php echo $_SERVER['PHP_SELF'] ?>">
    Email<input type="text" name="email"></input>
    <input type="submit" value="Send">
    </form>

</body>
</html> 
```

现在，如果电子邮件正确，我想显示一条消息，如果它不正确，我想显示一条消息。我真的不知道下一步该做什么。在 ?> 结束标记之前，我已经尝试过以下操作：

```
if (is_email($email) == true) {
    echo "Right";
}
elseif (is_email($email) == false) {
    echo "Wrong";
} 
```

但这无济于事。解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:27:29.133

我们不能 100% 确定究竟是什么导致了您的问题，但请允许我提供另一种在自定义函数中验证电子邮件的方法。你真的不必重新发明轮子，因为已经有一个原生的 PHP 方法来验证电子邮件。

```
function validateEmail($email){
  return filter_var($email, FILTER_VALIDATE_EMAIL);
}

$email = $_POST['email'];
if (validateEmail($email)){
  echo 'Valid email!';
}else{
  echo 'Email NOT valid!';
} 
```

我在[`filter_var()`](http://php.net/manual/en/function.filter-var.php)这里使用带有[`FILTER_VALIDATE_EMAIL`](http://php.net/manual/en/filter.filters.validate.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:25:25.430

你确定你的正则表达式是正确的吗？我对其进行了修改，并且能够使代码正常工作。

```
<?php

function is_email($email) {
    // Checks for proper email format

    if (!preg_match("/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/", $email)) {
        return false;
    } else {
        return true;
    }
}

if (isset($_POST['email'])) {
    $email = $_POST['email'];
    if (is_email($email) == true) {
        echo "Right";
    } elseif (is_email($email) == false) {
        echo "Wrong";
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:20:05.580

...

```
if (is_email($email)) {
    $valid="Right";
} else {
    $valid="Wrong";
}
?> 
```

...

```
<body><?php echo($valid); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:28:18.053

我推荐[filter_var](http://php.net/manual/en/function.filter-var.php)，内置 php。所以我认为这个函数将来会保留，而 regexp 函数可以改变例如。

此外，您可以说“假设此功能运行良好是语言的角色，而不是我的”。

```
<?php
var_dump(filter_var('bob@example.com', FILTER_VALIDATE_EMAIL)); 
```

# nhibernate - nHibernate Profiler 2 错误

> ID：13709261
> 
> 赞同：1
> 
> 时间：2012-12-04T18:13:48.243
> 
> 标签：nhibernate, nhibernate-profiler

我刚刚获取了 nHibernate Profiler 2 的更新以用于开发（通过 Nuget 安装），但是当我`NHibernateProfiler.Initialize()`调用该方法时，`WebActivator`我会收到如下所示的错误。知道为什么它试图在 IIS Express 文件夹的根目录中创建调试符号以及如何阻止此错误的发生吗？

```
[InvalidOperationException: Unexpected error creating debug information file 'c:\Program Files (x86)\IIS Express\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.PDB' -- 'c:\Program Files (x86)\IIS Express\HibernatingRhinos.Profiler.Appender.NHibernate3Logger.pdb: Access is denied.]
   HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.Compile(String fileName, String[] sources, List`1 assembliesToReference) +1139
   HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(IEnumerable`1 sourcesResources, IEnumerable`1 assembliesToReference, String assemblyName) +105
   HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.RegisterAppenderUsingNHibernateLogger() +318
   HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.WrapLogger() +54
   HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.StartNHibernateProfiling() +129
   HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.Initialize(NHibernateAppenderConfiguration configuration) +45
   HibernatingRhinos.Profiler.Appender.NHibernate.NHibernateProfiler.Initialize() +53
   Data.NHibernateProfilerBootstrapper.PreStart() in c:\Development\[Project]\Data\App_Start\NHibernateProfilerBootstrapper.cs:13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:34:20.747

看起来像 NHProfiler NuGet 的 v2.0.2072.0 已于周日发布。我刚刚为我的一个项目获得了该版本，并且遇到了同样的问题。

不过，我使用的是完整的 IIS 7，而不是 express，它尝试写入的目录是 C:/Windows/System32/inetsrv/。

现在，也许手动获取 1.0.0.955 - 看起来 AppPool Identity 可能有一个新的要求来拥有对该文件夹的写入权限？（总猜测）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:39:16.567

它似乎已在最新版本中修复。更新 nHibernate Profiler，问题将得到解决。（在撰写本文时为 2.0.2077.0）

# python - 在 python 中使用 os.walk 更改目录

> ID：13709268
> 
> 赞同：1
> 
> 时间：2012-12-04T18:14:11.777
> 
> 标签：python, recursion, ioerror, os.walk

我正在尝试编写一些东西，递归地搜索路径和子目录以查找以“FFD8”的十六进制值开头的文件。我已经让它在运行脚本时使用参数参数中指定的位置，但是当它需要移动到子目录时问题就来了。

```
import string, sys, os
 os.chdir(sys.argv[1])
 for root, dir, files in os.walk(str(sys.argv[1])):
         for fp in files:
             f = open(fp, 'rb')
             data = f.read(2)
             if "ffd8" in data.encode('hex'):
                 print "%s starts with the offset %s" % (fp, data.encode('hex'))
             else:
                 print "%s starts wit ha different offset" % (fp) 
```

我不知道为什么我需要使用 os.chdir 命令，但由于某种原因没有它，当脚本从我的桌面运行时，它会忽略参数并总是尝试从桌面目录运行搜索，无论我是什么路径指定。

这个的输出是`autodl2.cfg starts wit ha different offset DATASS.jpg starts with the offset ffd8 IMG_0958.JPG starts with the offset ffd8 IMG_0963.JPG starts with the offset ffd8 IMG_0963_COPY.jpg starts with the offset ffd8 project.py starts wit ha different offset Uplay.lnk starts wit ha different offset Traceback (most recent call last): File "C:\Users\Frosty\Desktop\EXIF PROJECT\project2.py", line 15, in <module> f = open(fp, 'rb') IOError: [Errno 2] No such file or directory: 'doc.kml'`

现在我知道*为什么*它在这里出错了，这是因为文件 doc.kml 位于桌面上的子文件夹中。任何人都可以了解更改目录的最简单方法，以便它可以继续扫描子目录而不会出现问题吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:18:58.777

您需要使用绝对文件路径来打开它们，但`files`只列出没有路径的文件名。但是，该`root`变量确实包含当前目录的路径。

用于`os.path.join`加入两者：

```
for root, dir, files in os.walk(str(sys.argv[1])):
    for fp in files:
        f = open(os.path.join(root, fp), 'rb') 
```

# transactions - 文件系统的模式和事务

> ID：13709269
> 
> 赞同：1
> 
> 时间：2012-12-04T18:14:16.147
> 
> 标签：transactions, filesystems, schema, acid

有两种存储数据的标准方法：数据库或文件系统。在这些之间，数据库在维护数据完整性方面至少有两个优点：

*   Schemas：我们可以声明数据的预期结构并保证数据满足该结构
*   具有完整 ACID 属性的事务性

是否有任何文件系统或文件系统之上的文件系统管理器提供这些关键特性？

例如，我想象一个程序，它管理一个目录中的数据，我提供的模式，并通过它发出 CRUD 指令来更新这个目录，使用事务来确保原子性。

例如，可以归纳定义模式，例如

```
root ::= { pdfcontainer }
pdfcontainer ::= { pdf }
pdf(f) ::= isfile && suffix == 'pdf' 
```

之后，指令`CREATE /container1/image.jpg <contents>`将失败，因为`/container1`不再满足`pdfcontainer`，这意味着`/`不再满足`root`。

# python - 获取 python 控制台脚本的运行路径

> ID：13709270
> 
> 赞同：0
> 
> 时间：2012-12-04T18:14:15.647
> 
> 标签：python, runtime, setup.py

缺少它 - 我需要一个 console_script 来返回它当前的运行路径，以便我可以覆盖它在运行时使用的模块。

这是我的基本设置（尽我所能总结）：

```
 package_1:
      caller_module.py

    console_script_module:
      main.py
      dir_of_modules_to_use/
        a.py
        b.py
        c.py
      setup.py

    setup.py contents:
      setup(
        entry_points = {
          'console_scripts': [
            'console-script-module = console_script_module.main:main'
           ]
         }
        ) 
```

更长的细节：所以**caller_module.py**通过发出子进程调用来调用**控制台脚本模块。**依次运行**dir_of_modules_to_use**中看到的模块。我想通过单独的脚本在发生这种情况之前通过覆盖它们来提供我自己的这些模块版本。为了做到这一点，我需要知道*控制台脚本模块*安装位置的运行路径，因为它不一致（例如，virtualenv 的变化）。

我尝试将其添加到**main.py**并使用单独的命令行参数来调用它：

```
 def print_absoulute_dir():    
      print os.path.abspath('dir_of_modules_to_use') 
```

不幸的是，这只返回了我调用控制台脚本的路径。

免责声明 - 我知道这很糟糕而且很糟糕，它来自我继承的代码，我只需要在短期内工作。不幸的是，我目前无法更改**caller_module.py**中的代码，否则我只会更改它调用**console_script_module:main.py**的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:55:30.370

我不确定我是否真的明白你想要什么，但每个 python 模块都有`__file__` 属性，它包含它在文件系统中的位置，你可以使用 sys.path 来修改 python 模块搜索路径

```
import urllib
import sys

print urllib.__file__
print sys.path 
```

# c++ - 从文件opencv读取视频

> ID：13709274
> 
> 赞同：6
> 
> 时间：2012-12-04T18:14:22.727
> 
> 标签：c++, c, opencv

嗨所以我写了这段代码来从文件中捕获视频

```
#include <stdio.h>
#include <cv.h>
#include "highgui.h"
#include <iostream>

//using namespace cv

int main(int argc, char** argv)
{
    CvCapture* capture=0;
    IplImage* frame=0;
    capture = cvCaptureFromAVI(char const* filename); // read AVI video    
    if( !capture )
        throw "Error when reading steam_avi";

    cvNamedWindow( "w", 1);
    for( ; ; )
    {
        frame = cvQueryFrame( capture );
        if(!frame)
            break;
        cvShowImage("w", frame);
    }
    cvWaitKey(0); // key press to close window
    cvDestroyWindow("w");
    cvReleaseImage(&frame);
} 
```

每次我运行它，我都会收到以下错误：

> CaptureVideo.cpp：在函数'int main（int，char**）'中：
> 
> CaptureVideo.cpp:13:28：错误：“char”之前的预期主表达式</p>

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T23:28:19.487

这是 C++ 问题，所以你应该使用 C++ 接口。

原始代码中的错误：

*   你忘记删除`char const*`了`cvCaptureFromAVI`。
*   您无需等待显示框架。`ShowImage`仅当它后面跟着 WaitKey 时才有效。
*   我不确定 capture=NULL 是否意味着您的文件未打开。改为使用`isOpened`。

我已经更正了您的代码并将其放入 C++ 接口，因此它现在是正确的 C++ 代码。我的重写与您的程序一样逐行进行。

```
//#include <stdio.h>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
//#include <iostream>

using namespace cv;
using std::string;

int main(int argc, char** argv)
{
    string filename = "yourfile.avi";
    VideoCapture capture(filename);
    Mat frame;

    if( !capture.isOpened() )
        throw "Error when reading steam_avi";

    namedWindow( "w", 1);
    for( ; ; )
    {
        capture >> frame;
        if(frame.empty())
            break;
        imshow("w", frame);
        waitKey(20); // waits to display frame
    }
    waitKey(0); // key press to close window
    // releases and window destroy are automatic in C++ interface
} 
```

# c++ - 构建 Windows 7 驱动程序时出错

> ID：13709275
> 
> 赞同：2
> 
> 时间：2012-12-04T18:14:24.027
> 
> 标签：c++, c, debugging, windows-7, driver

我有这个无法编译的驱动程序。我一直在网上搜索错误，并没有提出任何解决方案。有什么想法吗？

```
#include <wdm.h>

VOID Unload(IN PDRIVER_OBJECT pDriverObject)
{
    DbgPrint("Received signal to unload the driver");
    return;
}

NTSTATUS DriverEntry(IN PDRIVER_OBJECT pDriverObject, IN PUNICODE_STRING regPath)
{
    DbgPrint("Driver has been loaded");
    (*pDriverObject).DriverUnload = Unload;
    return(STATUS_SUCCESS);
} 
```

以下错误：

```
1>------ Build started: Project: KMDF Test, Configuration: Win7 Debug Win32 ------
1>  Stamping Win7Debug\KMDFTest.inf [Version] section with DriverVer=12/04/2012,10.12.25.726
1>  cl wpp
1>wpp : error : (WppCreateFile)Cannot open file trace.h, error 2
2>------ Build started: Project: KMDF Test Package, Configuration: Win7 Debug Win32 ------
2>C:\Program Files\Windows Kits\8.0\build\WindowsDriver8.0.common.targets(1347,5): error MSB3030: Could not copy the file "C:\Users\Administrator\documents\visual studio 2012\Projects\KMDF Test\Win7Debug\KMDFTest.sys" because it was not found.
========== Build: 0 succeeded, 2 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-03T08:11:02.773

这是我解决此问题的方法：

在解决方案资源管理器窗口中，右键单击您的驱动程序项目并选择属性。在 Wpp Tracing > All Options 中，将 Run Wpp tracking 设置为 No。单击 OK。

萨米人

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T18:27:50.610

你最终解决了这个问题吗？您的项目很可能根本无法找到您的 `trace.h`文件。如果您使用的是 Visual Studio，请检查以下项目设置：

配置属性 -> Wpp 跟踪 -> 文件选项 -> 扫描配置数据

确保文件的路径正确。如果它只是说`trace.h`，那么请确保 trace.h 与项目文件位于同一文件夹中。

如果您不需要进行跟踪，那么 Sami 的答案也一样好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:07:01.810

也许您没有选择正确的驱动程序模板？

当我同时使用 KDM 和 KDMF 模板来创建驱动程序项目时，我遇到了和你一样的错误......所以......

*您可以创建一个新项目，并选择**“Empty WDM Driver”**模板，然后一切都会好起来的。*

如果您真的想使用 WPP，以下链接可能会有所帮助。 [支持 WPP 跟踪（Windows 驱动程序）](http://msdn.microsoft.com/en-us/library/windows/hardware/ff597683%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T04:48:11.270

解决问题的步骤：

1.  搜索并获取trace.h并放入项目文件的文件夹或提供路径。
2.  将 KmdfSmallEvtDeviceAdd 替换为 KmdfHelloWorldEvtDeviceAdd

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-23T04:06:58.787

在记事本中打开 *.vcxproj 文件并注释以下行。

```
<!--      <WppEnabled>true</WppEnabled>
      <WppScanConfigurationData Condition="'%(ClCompile. ScanConfigurationData)'  == ''">trace.h</WppScanConfigurationData>
      <WppKernelMode>true</WppKernelMode> --> 
```

然后我确实建立了。它工作..希望它可以帮助你。

# database - 在 Visual Basic 中计算时差

> ID：13709278
> 
> 赞同：0
> 
> 时间：2012-12-04T18:14:45.727
> 
> 标签：database, vb.net

我在数据库表中有一个日期/时间字段，我想计算表中的日期/时间与当前日期/时间之间的时间差

例如：我想在 vb 论坛显示 2 Days 10 Hours Remaining

如果它不适用于时间和日期，如何仅用于日期？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:47:26.440

如果您加载已经将数据加载到`Date`( `DateTime`) 对象中，那么您可以这样做：

```
Dim loadedDate As Date = ...
Dim span As TimeSpan = Date.Now - loadedDate
Console.WriteLine("{0} Days {1} Hours Remaining", span.Days, span.Hours) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:32:18.523

您也可以在数据库中执行此操作，

```
SELECT (CURRENT_TIMESTAMP - '2012-12-04T20:00:00') 
```

您可以用日期时间列替换硬编码的日期和时间。

# javascript - 用于更新图表的 getJSON 数据

> ID：13709282
> 
> 赞同：1
> 
> 时间：2012-12-04T18:14:54.483
> 
> 标签：javascript, json, dom-events, jsonp, getjson

> 工作聊天示例： [http ://www.highcharts.com/demo/dynamic-update/gray](http://www.highcharts.com/demo/dynamic-update/gray)

我试图让上述工作，除了上面的图表填充了随机数据的修改；我希望使用`$.getJSON`命令从非域数据库中提取数据并将其插入聊天。

到目前为止，我能够加载初始数据，以便它可以创建一个静态图表。为了使其静态，我不得不注释掉`setInterval()`.

当我包含一些静态数据时，我在 Google Chrome ( ++ )`setInterval()`中的 JavaScript 控制台上收到错误消息。`Ctrl``Shift``J`

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="date.js"></script>
        <script type="text/javascript">

$(function () {
    $(document).ready(function() {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

                    var jsonUrl = "http://www.somewebsite.co.uk/jsonusv.php?callback=?";                    
                    $.getJSON(jsonUrl,{lastdatetime: "",},function(zippy){                  
                        for (i=0; i<zippy.cpmdata.length; i++){
                                console.log("TIMESTAMP: "+zippy.cpmdata[i].timestamp+" AFTER: ");
                                zippy.cpmdata[i].timestamp =  Date.parse(zippy.cpmdata[i].timestamp).getTime(); 

                                //var unixtime  Date.parse(temptime).getTime()/1000
                                console.log(" TESST "+zippy.cpmdata[i].timestamp+" \r\n");                              
                                console.log(" TESST zippy "+zippy.cpmdata[i].timestamp+" \r\n");

        var chart;
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'spline',
                marginRight: 10,
                events: {
                    load: function() {

                        // set up the updating of the chart each second

                        var series = this.series[0];
                        var tttt = "2012-11-13 17:17:00";
                        setInterval(function() { var x = Date.parse(tttt).getTime(),y = 8;
                        series.addPoint([x, y], true, true);
                        }, 5000);
                    }
                }
            },
            title: {
                text: 'Online Counter'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'units/h'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+
                        Highcharts.numberFormat(this.y, 2)+" uSv/h";
                }
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'units/h ',
                data: (function() {
                    // generate an array of random data
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    console.log(" =============== \r\n");
                    console.log(" FINAL "+zippy.cpmdata[5].timestamp+" \r\n");

                    for (i=0; i<zippy.cpmdata.length; i++){
                            data.push({
                            x: zippy.cpmdata[i].timestamp,
                            y: parseInt(zippy.cpmdata[i].cpm,10)
                            });
                        }

                    return data;
                })()
            }]
        });                             

                            }  });
                    console.log("==END==");                     
    });

});

        </script>

    </head>
    <body>
<script src="./js/highcharts.js"></script>
<script src="./js/modules/exporting.js"></script>
<script src="gray.js"></script> 

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

我不断收到错误：

> **未捕获的错误：NOT_FOUND_ERR：DOM 异常 8 highcharts.js:167**

我不知道为什么？

第二个问题是由于异步性质，`$.getJSON`我可以使用与原始方法相同的方法获取数据，`$.getJSON`但在调用中调用它以`setInterval()`动态更新数据。

# c++ - 如果我没有为它分配一个新值，我是否需要删除它？

> ID：13709284
> 
> 赞同：9
> 
> 时间：2012-12-04T18:15:03.013
> 
> 标签：c++, pointers, delete-operator

只是一个简单的问题：

如果我实际上没有为其分配新值，是否需要删除指针？

如果创建了一个指针，然后将它的引用传递给这样的东西，我会做什么：

```
Planet *planetPointer;

planetPointer = &earth; 
```

我需要删除此指针还是可以将其设置为空？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T18:15:49.937

你不需要删除它，而且，**你不应该删除它**。如果`earth`是一个自动对象，它将被自动释放。因此，通过手动删除指向它的指针，您将进入未定义的行为。

只有`delete`你分配的`new`。

# ios - 如何创建和使用我自己的 .plist 文件

> ID：13709286
> 
> 赞同：2
> 
> 时间：2012-12-04T18:15:09.670
> 
> 标签：ios, xcode, plist

我必须在 Xcode 中手动创建一个 .plist 文件，然后向其中添加一些常量数据（一种小型数据库）、几个对象，每个对象都有一个字符串和一个数字。然后每次程序启动时将它在我的程序中读入一个数组。.plist 文件不会改变。我找不到创建 .plist 并手动填充数据的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T18:23:13.930

那么它很容易。由于您不会更改它，您可以将其添加为 file->new->resource->plist.. 然后以您喜欢的方式手动输入数据。

阅读 plist 可以这样完成：

```
NSURL *file = [[NSBundle mainBundle] URLForResource:@"myplist" withExtension:@"plist"]; //Lets get the file location

 NSDictionary *plistContent = [NSDictionary dictionaryWithContentsOfURL:file]; 
```

访问 plist 中的内容就像：

```
NSString *playerName = [plistContent objectForKey@"player"]; 
```

在 xcode plist 编辑器中设置键名。请注意，这仅适用于阅读。要写入 plist，您必须将其复制到应用程序的文档目录中。如果您需要，我也可以为您发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:28:13.067

你使用一个 NSMutableDictionary，给它一个 NSMutableArray 作为一个孩子，然后调用 writeToFile

工作示例代码：

```
 NSMutableArray *myArrayToWrite = [NSMutableArray array];
    [myArrayToWrite addObject:@"blablub"];
    [myArrayToWrite addObject:[NSNumber numberWithInt:123]];

    NSMutableDictionary *plistToWrite = [NSMutableDictionary dictionary];
    [plistToWrite setObject:myArrayToWrite forKey:@"data"]; 

    [plistToWrite writeToFile:@"/Users/Shared/TEMP.plist" atomically:NO];

    //---
    NSDictionary *plistRead = [NSDictionary dictionaryWithContentsOfFile:@"/Users/Shared/TEMP.plist"];

    NSArray *arrayRead = [plistRead objectForKey:@"data"];
    NSLog(@"%@", arrayRead); 
```

# c# - 使用 App.xaml.cs 创建类库的静态实例

> ID：13709287
> 
> 赞同：0
> 
> 时间：2012-12-04T18:15:11.993
> 
> 标签：c#, wpf

我有一个`SGDataLibrary`用一个类调用的类库，该类`SGMemberDataOp.cs`包含所有数据操作并通过`app.config`.

这是连接字符串

```
 <add name="SimpleGym.Properties.Settings.SGYMConnectionString"
        connectionString="Data Source=owner\sqlexpress;Initial Catalog=SGYM;Integrated Security=True"
        providerName="System.Data.SqlClient" /> 
```

这是`SGMemberDataOp.cs`课

```
namespace SGDataLibrary
{
   public class SGMemberDataOp
   {
      private string connectionString = Properties.Settings.Default.SGYMConnectionString; 
```

这是我在`App.xaml.cs`文件中编写的代码

```
 public partial class App : Application
 {
     ---->private static SGMemberDataOp sgMemberDataOp = new SGMemberDataOp();
     public static SGMemberDataOp SGMemberDataOp
     {
        get { return sgMemberDataOp; }
     }
 } 
```

带箭头的线抛出异常

> *你调用的对象是空的*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:09:07.680

我只是查看了一些执行此操作的代码，但是

```
private static SGMemberDataOp sgMemberDataOp;

 public static SGMemberDataOp SGMemberDataOp
 {
    get { return sgMemberDataOp; }
 }

public App()
{
    try
    {
        sgMemberDataOp = new SGMemberDataOp();
    }
    catch (Exception Ex)
    {
        MessageBox.Show(Ex.Message, "Startup failed", MessageBoxButton.OK);
    }
} 
```

将其作为私人更新不起作用，也不知道为什么。

# php - 如何按日期对数组进行排序？

> ID：13709290
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:15:25.507
> 
> 标签：php

我有一个包含这些日期的数组。

```
.array(34) {
  [0]=>
  string(24) "Wed Nov 14 2012 09:27:49"
  [1]=>
  string(24) "Tue Nov 13 2012 15:49:06"
  [2]=>
  string(24) "Wed Nov 14 2012 09:27:49"
  [3]=>
  string(24) "Mon Dec 03 2012 13:58:16"
  [4]=>
  string(24) "Tue Nov 13 2012 14:20:16"
  [5]=>
  string(24) "Mon Dec 03 2012 16:13:38"
  [6]=>
  string(24) "Thu Aug 30 2012 15:05:56"
  [7]=>
  string(24) "Thu Aug 30 2012 15:11:32"
  [8]=>
  string(24) "Thu Aug 30 2012 15:21:12"
  [9]=>
  string(24) "Fri Oct 05 2012 10:11:28"
  [10]=>
  string(24) "Thu Aug 30 2012 15:22:58"
  [11]=>
  string(24) "Thu Aug 30 2012 14:38:13"
  [12]=>
  string(24) "Thu Aug 30 2012 15:22:00"
  [13]=>
  string(24) "Thu Aug 30 2012 15:03:15"
  [14]=>
  string(24) "Thu Aug 30 2012 15:00:11"
  [15]=>
  string(24) "Thu Aug 30 2012 15:01:25"
  [16]=>
  string(24) "Thu Aug 30 2012 15:20:26"
  [17]=>
  string(24) "Thu Aug 30 2012 14:59:21"
  [18]=>
  string(24) "Thu Aug 30 2012 15:26:48"
  [19]=>
  string(24) "Thu Aug 30 2012 14:58:34"
  [20]=>
  string(24) "Wed Sep 19 2012 09:42:57"
  [21]=>
  string(24) "Thu Aug 30 2012 15:24:34"
  [22]=>
  string(24) "Thu Aug 30 2012 15:06:50"
  [23]=>
  string(24) "Thu Aug 30 2012 14:57:42"
  [24]=>
  string(24) "Thu Aug 30 2012 15:09:06"
  [25]=>
  string(24) "Thu Aug 30 2012 14:53:13"
  [26]=>
  string(24) "Thu Aug 30 2012 15:25:35"
  [27]=>
  string(24) "Thu Oct 11 2012 15:19:10"
  [28]=>
  string(24) "Wed Oct 10 2012 11:27:15"
  [29]=>
  string(24) "Mon Dec 03 2012 16:24:06"
  [30]=>
  string(24) "Thu Nov 01 2012 10:00:42"
  [31]=>
  string(24) "Wed Nov 21 2012 11:08:36"
  [32]=>
  string(24) "Mon Dec 03 2012 16:14:29"
  [33]=>
  string(24) "Mon Dec 03 2012 16:30:31"
} 
```

如何按日期和时间对该数组进行排序？例如，“Mon Jan 01 2012 01:01:01”将是数组中的第一个元素，而“Mon Jan 01 2012 01:01:03”将是数组中的第二个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:37:37.163

这是一个代码，它不是最好的解决方案，但它应该可以工作

```
function sort_date($arr) {
  $size = count($arr);
  for ($i=0; $i<$size; $i++) {
      for ($j=0; $j<$size-1-$i; $j++) {
          if (strtotime($arr[$j+1]) < strtotime($arr[$j])) {
              swap($arr, $j, $j+1);
          }
      }
  }
  return $arr;
}

function swap(&$arr, $a, $b) {
  $tmp = $arr[$a];
  $arr[$a] = $arr[$b];
  $arr[$b] = $tmp;
}

//your first array
var_dump($arr);
//your sorted array
var_dump(sort_date($arr)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:22:02.380

你可以使用`usort`这个（[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)）

```
function comparison($a, $b)
{
    return strtotime($a) > strtotime($b);
}

usort($input, 'comparison') 
```

这会调用两个字符串之间的“比较”函数，该函数将其转换为时间并返回更大的时间。

这段代码是我头顶写的，但`usort`它是前进的方向。

# php - 通过表单提交指导 codeigniter 程序流程

> ID：13709291
> 
> 赞同：0
> 
> 时间：2012-12-04T18:15:30.720
> 
> 标签：php, codeigniter

我正在尝试使用[https://github.com/jackilyn/bootstrap-contact/](https://github.com/jackilyn/bootstrap-contact/)将引导联系表添加到我的 codeigniter 项目中。

表格提交如下：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" id="contactform"> 
```

提交和验证后，以下代码用于通过电子邮件发送联系信息：

```
//If there is no error, send the email
    if(!isset($hasError)) {
    $emailTo = 'you@yourwebsite.com'; // Put your own email address here
    $body = "Name: $name \n\nEmail: $email \n\nPhone Number: $phone \n\nSubject: $subject \n\nComments:\n $comments";
    $headers = 'From: My Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);
    $emailSent = true;
} 
```

我不喜欢 php 代码包含在页面本身中的方式，并希望将其移动到单独的控制器以确保安全。如何管理程序流程，以便在提交表单后没有错误，流程被定向到控制器，以便我可以在那里执行电子邮件代码，同时保持表单指向自身？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:51:17.357

嗨，请检查我已经创建了联系我们控制器并为您查看非常简单

控制器 [http://scrp.at/bYk](http://scrp.at/bYk)

```
class contact extends CI_Controller{

    function index(){

        $this->validation->rules('name','Name', 'required|trim');
        $this->validation->rules('email','Email', 'required|trim|vaild_email');
        $this->validation->rules('message','Message', 'required|trim');

        if(!$this->validation->run()){
            $this->load->view('form_view');
        }
        else{
            $this->send();  
        }

    }

    function send(){
        $this->load->library('email');

        $input = $this->input->post();

        // will extract all variables from post array
        extract($input);

        $this->email->from($email, $name);
        $this->email->to('admin@example.com');
        //$this->email->cc('another@another-example.com');
        //$this->email->bcc('them@their-example.com');

        $this->email->subject('Email Test');
        $this->email->message($message);

        $this->email->send();

        //echo $this->email->print_debugger();

        redirect('redirect-to-thank-you');
    }

} 
```

查看 [http://scrp.at/bYl](http://scrp.at/bYl)

```
<?
echo form_open(uri_string());
echo form_label('Name','name').form_input('name',set_value('name')).form_error('name').br();
echo form_label('Email','email').form_input('email',set_value('email')).form_error('email').br();
echo form_label('Message','message').form_textarea('message',set_value('message')).form_error('message').br();
echo form_close();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:33:05.473

您知道`<form>`带空的 a`action=""`会将表单提交到同一页面吗？所以如果是同一个页面，你可以简单地让属性为空。

**编辑**：规范不允许将操作留空（如此处所示[）](https://stackoverflow.com/q/1131781/1478467)，但您可以将[`uri_string()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)其用于当前 url。

* * *

您还可以键入一个您知道将根据您的[路由重定向到同一页面的 URL (doc)](http://ellislab.com/codeigniter/user-guide/general/routing.html)。

* * *

如果您对路由感觉良好，可以试试这个[反向路由类](http://codefury.net/2010/09/easy-reverse-routing-with-codeigniter/)，它可以帮助您使用视图中的路由。

# python - 如何在 3.23 中制作难度级别的随机数生成器

> ID：13709294
> 
> 赞同：0
> 
> 时间：2012-12-04T18:15:41.287
> 
> 标签：python, random, integer, generator

```
#Guess the number game by Johnathan Millsap
import random

guessesTaken = 0

print('Hello! What is your name?')
myName = input()

number = random.randint(1, 100)
print('Well, ' + myName + ', I am thinking of a number between 1 and 100.')
print('Try to guess it!.')

while guessesTaken <= 3:
    print('Take a guess.')
    guesesTaken = guessesTaken + 1
    guess = input()
    guess = int(guess)

if guess < number:
    print('Your guess is too low.')     
if guess > number:
    print('Your guess is too high.')
if guess == number:

if guess == number:
    guesesTaken = str(guessesTaken)
    print('Good job, ' + myName + '! You guessed my number ' + guessesTaken + ' guesses!')

if guess != number:
    number = str(number)
    print('Nope. The number I was thinking of was ' + number) 
```

我遇到的主要问题是它一直告诉我我的 int 不会隐式转换为字符串......我也试图在 1-100 和 1-1000 和 1-10000 等三个不同的困难中做到这一点。对此的任何帮助将不胜感激。

```
Traceback (most recent call last):
  File "Lab4.py", line 28, in <module>
    print('Good job, ' + myName + '! You guessed my number ' + guessesTaken + ' guesses!')
TypeError: Can't convert 'int' object to str implicitly
Terminated with exit code 1. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:23:51.250

您的代码中存在印刷错误

```
guesesTaken = str(guessesTaken) 
```

应该

```
guessesTaken = str(guessesTaken) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:23:34.557

假设问题中的缩进搞砸了，并且在您的作业文件（Lab4.py）中是正确的尝试：

```
print('Good job, ' + myName + '! You guessed my number ' + str(guessesTaken) + ' guesses!') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:26:11.077

使用 str()L 将 int 转换为字符串

```
print('Good job, ' + myName + '! You guessed my number ' + str(guessesTaken) + ' guesses!') 
```

# c# - 获取定时事件

> ID：13709296
> 
> 赞同：-3
> 
> 时间：2012-12-04T18:15:48.423
> 
> 标签：c#, timer

在我的 C# 应用程序中，我需要基于计时器调用方法。当我启动程序时，我希望计时器开始 - 然后每 10 秒调用一次方法。

第二 - 如果我在 10 秒跨度到期之前手动调用该方法，我希望计时器重置 - 并在执行后等待 10 秒（不会触发）。换句话说 - 如果计时器还剩 6 秒，并且我手动触发 - 我希望计时器等待 10 秒 - 而不是在 6 秒时触发。

1.  创建这样的计时器的最佳方法是什么？
2.  有了计时器后，如何有效控制它的手动到期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:11:36.903

[System.Timer.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)类适合您的所有需求。

> 我希望计时器开始 - 然后每 10 秒调用一次方法。

第一部分很简单，您需要将[interval](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)属性设置为 10000，将[AutoReset](http://msdn.microsoft.com/en-us/library/system.timers.timer.autoreset.aspx)属性设置为 true 并处理[Elapsed](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)事件。

> 第二 - 如果我在 10 秒跨度到期之前手动调用该方法，我希望计时器重置 - 并在执行后等待 10 秒

手动触发其实没那么容易。最好的方法是停止它，在经过的事件中执行它要执行的任何操作，然后重新启动它。

然而，有一个重要的注意事项。您需要确保处理方法是可重入的，因为计时器在另一个线程上执行，而不是手动触发的线程。如果您的方法可能需要 10 秒才能执行，这也是一个问题。使用[锁](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)是最简单的方法。

为了演示计时器，这里有一个小程序，当您按下回车键时将手动触发，然后等待两秒钟再次触发。

```
class Program
{
    static void Main(string[] args)
    {

        var timer = new System.Timers.Timer();
        timer.Interval = 2000; // 2 seconds here
        timer.AutoReset = true; //Restart 

        Action<object, EventArgs> Elapsed = (object o, EventArgs e) => Console.WriteLine(DateTime.Now);

        timer.Elapsed += new System.Timers.ElapsedEventHandler(Elapsed);
        timer.Start();
        while (Console.ReadLine() != "quit")
        {
            timer.Stop();
            Elapsed.Invoke(new object(), EventArgs.Empty);
            timer.Start();

        }
    }
} 
```

# php - $query 不在 PHP 中执行，而是在 phpMyAdmin 中执行

> ID：13709299
> 
> 赞同：1
> 
> 时间：2012-12-04T18:15:54.647
> 
> 标签：php, mysql

所以，这是我的代码：

```
$query = "SELECT `id` FROM `users` WHERE `username`='$username' AND `password`='$password_hash'";
echo $query;
echo mysql_result(mysql_query($query), 0); 
```

当我在 PHP 中运行此代码时，我执行了查询，并在 phpMyAdmin 中运行它，它显示 id 1。但它不输出任何内容，当运行完整代码时，我收到此错误：

```
Warning: mysql_result() expects parameter 1 to be resource 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:21:42.263

从 php 手册：

`mysql_query() will also fail and return FALSE if the user does not have permission to access the table(s) referenced by the query.`

您确定您已连接到数据库并且拥有良好的权限吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:12:50.850

确保您正确设置连接和查询

```
 $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
 if (!$link) {
     die('Could not connect: ' . mysql_error());
 }
 if (!mysql_select_db('database_name')) {
    die('Could not select database: ' . mysql_error());
 }
 $result = mysql_query('SELECT * FROM MyTable');
 if (!$result) {
    die('Could not query:' . mysql_error());
}
echo mysql_result($result, 0); // outputs first row

mysql_close($link); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:23:54.087

```
 $query = "SELECT `id` FROM `users`
                  WHERE `username`='$username'
                  AND `password`='$password_hash'";
        echo $query;
        $sql_result=mysql_query($query) or die(mysql_error());
        echo mysql_result($sql_result, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-05T14:06:34.017

使用此代码并根据要求对其进行编辑，并检查数据库与 utf8_general_ci 的联合，并将表保存为一种 innodB ...

```
 <?php
   $mysqli_hostname = "localhost";
   $mysqli_user = "root";
   $mysqli_password = "krunal";
   $mysqli_database = "krunal";
   $bd = mysqli_connect($mysqli_hostname, $mysqli_user,$mysqli_password,$mysqli_database);  
   if(mysqli_connect_errno()){die("database connection  failed");}
   ?>

   <?php 
   $sql= "SELECT * FROM `done`;";
   $result=mysqli_query($bd,$sql);
   if(!$result){
   die("database query failed". mysqli_connect_error()."(".mysqli_connect_errno().")");}?>

   <?php while($row=mysqli_fetch_row($result)){
   var_dump($row); }?>

   <?php mysqli_close($bd);?> 
```

# mysql - 在mysql的程序中插入不会锁定表

> ID：13709300
> 
> 赞同：0
> 
> 时间：2012-12-04T18:15:55.460
> 
> 标签：mysql, insert, locking

我有一个mysql的程序：

```
START TRANSACTION;

insert into table1(id, name) values(1, 'a'); -- id is a primary key.
...
delete from table1 where id = 1;
COMMIT; 
```

并且对该过程的多线程调用将在 jdbc
Duplicate entry '1' for key table1_UNIQUE_key'中显示错误

为什么其他线程不会等待这个线程结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:17:06.707

这是因为如果你检查，你已经将表声明为`INODB`引擎，它允许行级锁，如果是`MYSAM`这个问题就不会发生

# iis-7 - 自定义错误处理未使用经典 asp 处理 iis 7.5 中的所有运行时错误

> ID：13709302
> 
> 赞同：1
> 
> 时间：2012-12-04T18:16:05.643
> 
> 标签：iis-7, asp-classic

我已将一个经典的 asp 站点从 IIS 6 移动到 Windows 2008 Server IIS 7.5 上的新服务器。

虽然自定义 404 处理和 500 错误处理有效，但由于 URL 错误导致的运行时错误不会得到处理。

例如，点击这个：www.mysitename.com/<

会给出运行时错误；在旧服务器上，IIS 6 会将其视为 404。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:42:16.177

问题解决了。在这种情况下，该站点最终将迁移到 .NET，并且在转换过程中将混合使用经典的 asp 和 C#.NET 代码，因此该站点设置为在 IIS 中处理这两种代码。

在 IIS 中有两个错误页面配置部分用于自定义错误处理（在 ASP.NET 区域和 IIS 区域中）。经典的 asp 运行时错误（例如，数组下标错误）将由 IIS 部分中的错误页面设置处理。但糟糕的 URL 处理仍然由 .NET 引擎处理，因此 www.mysitename.com/< 的示例由 ASP.NET 错误页面配置处理。

所以修复是在 ASP.NET 区域，错误页面 - > 编辑功能设置并将默认页面设置为自定义页面就可以了（或者通过错误类型变得更细化），并将模式设置为仅远程（或如果需要，只需打开）。

# winforms - 从网络共享运行 .NET 程序

> ID：13709312
> 
> 赞同：0
> 
> 时间：2012-12-04T18:16:37.190
> 
> 标签：winforms

我有一个我开发并部署到网络共享的 Windows 窗体应用程序。我的程序的用户在他们的桌面上有 exe 文件的快捷方式。如果我需要升级程序（部署新位），当用户打开文件（exe 在他们的机器上运行）时，我不能这样做。我有哪些选择？我想从维护的角度最小化对快捷方式的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:21:51.900

在我们的工作场所，我们有一个包装应用程序，它检查服务器，然后将服务器上较新的文件复制到本地计算机，然后从本地计算机启动应用程序。然后我们在桌面上创建了这个包装器的快捷方式，让它看起来就像是实际的应用程序。

这将需要对每台机器进行一次更改来设置，但您可能会根据在启动可执行文件时检查可执行文件的路径来编写一些东西来自动化它。

# arrays - Excel公式填充数组

> ID：13709313
> 
> 赞同：4
> 
> 时间：2012-12-04T18:16:40.297
> 
> 标签：arrays, excel, insert, excel-formula, pad

**示例：** 假设我有几个一维数组，例如 A、B 和 C：

```
 A    B    C
---  ---  ---
 2    4    99
 3    5    37
 4    6    42
      7 
```

我想使用一个公式来填充这些数组中的每一个（称为范围），以便它们具有相同的行数。 *（已编辑，以提供更完整的解释：）* 我还希望能够将每个数组的起始位置移动指定的行数。这是一个示例输出，其中我将 A 移动 2，B 移动 3，C 移动一个位置：

```
 A'   B'   C'
---  ---  ---
 0    0    0
 0    0    99
 2    0    37
 3    0    42
 4    4    0
 0    5    0
 0    6    0
 0    7    0 
```

因此，填充其中一个数组的“公式”（实际上是多个现有标准公式的组合）将有效地具有四个输入：原始数组名称/范围、要在原始数组开头填充的值的数量、数量最后填充，以及填充值（即 0、NA() 等）。

**初始方法：** 我的第一次尝试是将三个数组部分（开始填充数组、原始数组和结束填充数组）连接到一个数组中，如下所示：

`=INDIRECT("{" & IF(_NPadBegin>0, REPT(_PadVal&",", _NPadBegin-1) & _PadVal&",", "") & _ArrayName & IF(_NPadEnd>0, "," & REPT(_PadVal&",", _NPadEnd-1) & _PadVal, "") &"}")`

（其中带下划线的变量是四个输入的命名范围）

但是，似乎不可能构建这样的数组。我已经搜索了使用公式组合一维数组的其他方法，但结果为空。

另一种方法可能是创建一个具有最终所需长度的数组，并最初用填充值填充它。例如，创建一个包含 8 行 0 的 A' 数组。（我可以在动态公式中执行此步骤。）然后您可以用原始数组覆盖这个初始化数组中的值，确保将原始数组转移到正确的位置。例如，用 A 的值覆盖 A' 的第 2 行到第 4 行中的 0 值。（我不知道如何执行第二步...）

**背景：** 我有多个一维数据数组（使用动态命名范围生成），我想将它们一起绘制在一个折线图上。然而，数组有不同的长度，所以我需要在数组的开头/结尾用一定数量的 NA() 值填充每个数组。它们还需要根据索引“排列”。

在 VBA 中实现这一点可能不会太难，但我更喜欢（非用户定义的）基于公式的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:37:46.943

如果您在 A2:A4 中有值 2、3 和 4，请尝试使用此公式

`=IF(COUNTIF(A2:A4,ROW(INDIRECT("1:"&D2))-1),ROW(INDIRECT("1:"&D2))-1,0)`

其中 D2 包含值的数量（在您的示例中为 8）。

这将返回这个数组

`{0;0;2;3;4;0;0;0}`

假设数字系列从零开始 - 公式末尾的零是“填充值”，根据需要更改

好的，根据评论，你可以用这个数组公式做到这一点

`=IF((ROW(INDIRECT("1:"&NPadBegin+NPadEnd+ROWS(_ArrayName)))>NPadBegin)*(ROW(INDIRECT("1:"&NPadBegin+NPadEnd+ROWS(_ArrayName)))<=ROWS(_ArrayName)+NPadBegin),N(OFFSET(_ArrayName,ROW(INDIRECT("1:"&NPadBegin+NPadEnd+ROWS(_ArrayName)))-1-NPadBegin,0,1)),PadVal)`

假设 _ArrayName 是一个**垂直**的一维数组

# reporting-services - 在 Reporting Services 报表上使用多个数据源？

> ID：13709314
> 
> 赞同：0
> 
> 时间：2012-12-04T18:16:41.743
> 
> 标签：reporting-services, report, database-connection, datasource, error-reporting

我有一个包含两个数据集的报告。每个数据集都连接到两个不同的数据源。数据库位于同一台服务器上。

我可以在 Visual Studio 2008 的预览版中毫无问题地运行报表，并毫无问题地从两个数据集中提取数据。

但是，当我在您发布时尝试从系统运行报告时出现错误。

它会生成以下异常：

```
System.ServiceModel.FaultException: An error has occurred during report processing.
---> Microsoft.ReportingServices.ReportProcessing.ProcessingAbortedException: An error has occurred during report processing.
---> Microsoft.ReportingServices.ReportProcessing.DataSetExecutionException: The execution failed for the shared data set 'DATASET_NAME'.
---> Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Query execution failed for dataset ''.
---> System.Exception: For more information about this error navigate to the report server on the local server machine, or enable remote errors
Server stack trace:
  en System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
  en System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
  en System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
  en System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)    Exception rethrown at [0]:
  en System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
  en System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
  en ReportServices.ReportExecutionServiceReference.ReportExecutionServiceSoap.Render(RenderRequest request)
  en ReportServices. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:55:13.333

问题可能出在很多地方。

根据错误，该报告正在使用一个共享数据集，称为`DATASET_NAME`该数据集有问题。

检查以下内容： - 验证数据集是否设置为使用有效的数据源。- 检查数据源凭据。- 尝试在 BIDS (Visual Studio) 中使用与服务器上数据源中使用的相同凭据执行报表。- 创建仅使用这一个数据集的测试报告，并将数据作为简单表格返回。

# linux - sh脚本找不到变量

> ID：13709315
> 
> 赞同：3
> 
> 时间：2012-12-04T18:16:47.937
> 
> 标签：linux, sh

我正在关注有关如何运行反向 ssh 隧道的教程，该教程位于[http://wiki.fabelier.org/index.php?title=Permanent_Reverse_SSH_Tunneling](http://wiki.fabelier.org/index.php?title=Permanent_Reverse_SSH_Tunneling)我遇到的问题是运行 tunneling.sh 脚本时：

```
#!/bin/sh
a=`ps -ef | grep 19999 | grep -v grep`
if [ ! "$a" ]; then
    ssh -fN -R 19999:localhost:22 <middle-usename>@<middle-hostname>
fi 
```

我收到此错误：

```
tunnel2.sh: 2: tunnel2.sh: a: not found 
```

编辑：

我将 shebang 更改为 #!/bin/bash

现在我得到这个错误：

```
tunnel2.sh: 2: tunnel2.sh: pi: not found 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:43:40.550

`#!/bin/sh`如果您要使用 bash 功能，请不要在“shebang”行中指定。如果您想要 bash，请请求 bash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:01:29.093

如果您需要 sh ，请`!`移出`test [`

```
if ! [ "$a" ]; then 
```

# c# - C# 来自长字符串的多个子字符串

> ID：13709319
> 
> 赞同：0
> 
> 时间：2012-12-04T18:17:18.140
> 
> 标签：c#, xml-parsing, substring

我正在尝试解析一个长字符串（它实际上是一个 xml 文件）。

我熟悉子字符串，但我不知道如何遍历这个长字符串（xml 文件）并将它的子字符串分配到一个数组中。

我完全确定这是一个简单的问题，但我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:18:41.243

好吧，如果您想解析对象列表，我建议您使用[LINQ TO XML](http://msdn.microsoft.com/en-us/library/bb308960.aspx)。

这是这个小样本：

首先是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<People>
  <Person>
    <Name>Luis</Name>
    <LastName>Laurent</LastName>
    <Age>24</Age>
  </Person>
  <Person>
    <Name>Juan</Name>
    <LastName>Perez</LastName>
    <Age>24</Age>
  </Person>
  <Person>
    <Name>Karla</Name>
    <LastName>Gutierrez</LastName>
    <Age>24</Age>
  </Person>
</People> 
```

然后是我的 .Net C# 代码

```
namespace Demo.Stackoverflow
{
    using System;
    using System.Linq;
    using System.Xml.Linq;

    public class Person
    {
        public string Name { get; set; }  
        public string LastName { get; set; }
        public int Age { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            ReadXML();
            Console.ReadLine();
        }

        private static void ReadXML()
        {
            string path = AppDomain.CurrentDomain.BaseDirectory + "..\\..\\Resources\\File.xml";
            XDocument doc = XDocument.Load(path);

            var People = (from people in doc.Descendants("Person")
                            select new Person()
                            {
                                Name = null != people.Descendants("Name").FirstOrDefault() ?
                                         people.Descendants("Name").First().Value : string.Empty,

                                LastName = null != people.Descendants("LastName").FirstOrDefault() ?
                                         people.Descendants("LastName").First().Value : string.Empty,

                                Age = null != people.Descendants("Age").FirstOrDefault() ?
                                         Convert.ToInt32(people.Descendants("Age").First().Value) : 0
                            }).ToList();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:21:48.317

另一种选择是将 XML 反序列化为一个类。然后，您可以制作方法和属性来处理各种逻辑需求。

# objective-c - 核心数据版本控制 - 需要多个映射模型

> ID：13709322
> 
> 赞同：5
> 
> 时间：2012-12-04T18:17:47.697
> 
> 标签：objective-c, ios, core-data, core-data-migration

我有一个使用 Core Data 的现有项目，我的`xcdatamodeld`包中有 3 个版本。到目前为止，我只使用了轻量级迁移，因为我主要添加了新参数和实体，但是我现在希望将现有参数移动到新实体中。我意识到我必须创建一个`mapping model`来执行此操作，以便在参数之间迁移数据。

我想有些用户使用版本 1 的应用程序版本非常旧，而其他用户则使用版本 2 和 3。

问题：

1.  我需要创建从所有现有版本到新版本的映射模型，还是仅从最新版本
2.  我是否需要更改/禁用我的轻量级迁移选项`NSPersistentStoreCoordinator`？目前我启用了以下选项：

    `NSMigratePersistentStoresAutomaticallyOption`
    `NSInferMappingModelAutomaticallyOption`

我认为从 v1 到 v2 到 v3 仍然需要轻量级迁移，但是从 v3 到 v4 需要新的映射模型。我环顾四周，但找不到任何有关这一切如何发生的信息，因为大多数教程仅涵盖 2 个版本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:00:27.987

1.  只是从最新版本。
2.  不。

迁移是按顺序进行的（这就是您需要保留所有模型版本的原因，即使预计不会从第一个版本迁移。

只有在`NSMigratePersistentStoresAutomaticallyOption`不存在映射模型时才会进行自动迁移。

# internet-explorer-8 - IE 7,8 在每个标签后自动添加换行符

ID：13709329

赞同：1

时间：2012-12-04T18:18:16.650

标签：internet-explorer-8, hyperlink, internet-explorer-7, line-breaks

# mysql - 使用 Access 构建 MySQL 查询

> ID：13709332
> 
> 赞同：1
> 
> 时间：2012-12-04T18:18:48.083
> 
> 标签：mysql

我有以下查询，它出现了一个错误

```
SELECT CRM_PRESUPUESTOS.Fecha_Alta, CRM_PRESUPUESTOS.ID_VendedorAsignado, Sum([Precio]*(100-[CRM_PresupuestosDetalles].[Bonif])/100*[CRM_PresupuestosDetalles].[Cantidad]) AS LineaNeto
FROM CRM_PRESUPUESTOS RIGHT JOIN CRM_PresupuestosDetalles ON CRM_PRESUPUESTOS.ID_Presupuesto = CRM_PresupuestosDetalles.ID_Presupuesto
GROUP BY CRM_PRESUPUESTOS.Fecha_Alta, CRM_PRESUPUESTOS.ID_VendedorAsignado
HAVING ((DATE((CRM_PRESUPUESTOS.Fecha_Alta))=CurDate())); 
```

错误是

> [Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '[Precio] *(100-[CRM_PresupuestosDetalles].[Bonif])/100* [CRM_PresupuestosDetalles‌​]'附近使用正确的语法

我怎样才能解决这个问题？问题可能是我正在使用 Access 构建它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:22:42.167

方括号 ,`[` `]`是 t-sql 特定的。它们告诉解析器包含的文本是一个字符串，并且可以防止您可能错误地使用 t-sql 保留字。MySql 类似的做法是使用反引号：`

```
SELECT CRM_PRESUPUESTOS.Fecha_Alta, 
CRM_PRESUPUESTOS.ID_VendedorAsignado, 
Sum(`Precio`*(100-`CRM_PresupuestosDetalles`.`Bonif`)/100*`CRM_PresupuestosDetalles`.`Cantidad`) AS LineaNeto
FROM CRM_PRESUPUESTOS RIGHT JOIN CRM_PresupuestosDetalles ON CRM_PRESUPUESTOS.ID_Presupuesto = CRM_PresupuestosDetalles.ID_Presupuesto
GROUP BY CRM_PRESUPUESTOS.Fecha_Alta, CRM_PRESUPUESTOS.ID_VendedorAsignado
HAVING ((DATE((CRM_PRESUPUESTOS.Fecha_Alta))=CurDate())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:21:28.553

试试这个：：

```
SELECT 
CRM_PRESUPUESTOS.Fecha_Alta, 
CRM_PRESUPUESTOS.ID_VendedorAsignado, 
Sum(Precio*(100-CRM_PresupuestosDetalles.Bonif/100*CRM_PresupuestosDetalles.Cantidad) AS LineaNeto

FROM CRM_PRESUPUESTOS RIGHT 
JOIN CRM_PresupuestosDetalles ON CRM_PRESUPUESTOS.ID_Presupuesto = CRM_PresupuestosDetalles.ID_Presupuesto

GROUP BY CRM_PRESUPUESTOS.Fecha_Alta, CRM_PRESUPUESTOS.ID_VendedorAsignado
HAVING DATEDIFF(CRM_PRESUPUESTOS.Fecha_Alta, CurDate)=0 
```

# php - 链路保护

> ID：13709333
> 
> 赞同：0
> 
> 时间：2012-12-04T18:18:49.350
> 
> 标签：php, wordpress, plugins, hyperlink, protection

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:11:38.087

你要找的是一个 URL cloaking 插件。 [http://wordpress.org/extend/plugins/url-cloak-encrypt/](http://wordpress.org/extend/plugins/url-cloak-encrypt/)应该这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:34:48.267

将链接隐藏在某些生成的 cod 中的好处是**链接（网站）将不受其他站点复制者或机器人**的影响。
逻辑是将所有链接保存在数据库中，一旦需要查看它就会将原始链接生成一些隐藏代码。

# java - eclipse 运行时内核或 vanilla eclipse 的编译

> ID：13709334
> 
> 赞同：1
> 
> 时间：2012-12-04T18:18:51.860
> 
> 标签：java, eclipse, build

我正在尝试从头开始构建 Eclipse。我可以从 CVS 下载 eclipse e4，它有 426 个项目。自动构建后，我得到了数十个损坏的项目构建。我试图[修复其中的一些](http://prosseek.blogspot.com/2012/11/building-eclipse-source-base-and.html)，但其中大多数仍然坏掉，包括 swt 和 jface。

谷歌搜索 Eclipse 架构，我发现[维基百科](http://en.wikipedia.org/wiki/Eclipse_(software))指出 `With the exception of a small run-time kernel, everything in Eclipse is a plug-in.`

CVS 中的哪些项目是运行时内核？我需要构建多少个项目`successfully`才能获得不是插件而是核心 eclipse 的 vanilla eclipse？我的意思是在构建之后`eclipse.exe`即使没有插件我也可以执行的项目是什么？

构建它们的任何提示也会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:47:30.310

我向 eclipse 论坛问了同样的问题以获得[一些答案](http://www.eclipse.org/forums/index.php/m/989154/)。

简而言之，就是这个想法。

1.  您需要一个依赖于平台的启动器：

    *   [http://eclipse.org/equinox/framework/](http://eclipse.org/equinox/framework/)
    *   [http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)
2.  然后，您需要编译 OSGi/Equinox
    *   [http://www.eclipse.org/equinox/documents/quickstart-framework.php](http://www.eclipse.org/equinox/documents/quickstart-framework.php)

一旦你有了启动器和 OSGi，一切都是它之上的一个模块。

# php - 跨表单处理程序和标题调用保存表单 POST 数据

> ID：13709336
> 
> 赞同：0
> 
> 时间：2012-12-04T18:18:52.983
> 
> 标签：php, html, post

我已经被这个问题困扰了一段时间并寻求帮助。提前致谢。我在页面（guest/build.php）上有一个带有一堆单选按钮的表单：

```
<form action="../php/build.php" method="POST">
<table class="table">
    <caption>Your Computer Parts</caption>
    <tr><th>General Component</th><th>Specific Component</th><th>Cost</th></tr>
    <?php include('buildFunction.php');?>   
</table>
<input id="buyMe" type="submit" value="BUY ME NOW!!!"> 
</form> 
```

这会将数据从单选按钮发送到我的表单处理程序（php/build.php），以确保已选择所有内容：

```
<?php
include('manageUser.php');
$mainCheck = isset($_POST["chasis"]) && isset($_POST["cpu"]) && isset($_POST["mobo"]) && isset($_POST["ram"]) && isset($_POST["gpu"]) && isset($_POST["psu"]) && isset($_POST["hdd"]) && isset($_POST["monitor"]) && isset($_POST["keyboard"]) && isset($_POST["mouse"]);
if(!$mainCheck){
    redirect("../guest/build.php","Please select 1 of each
    component");
} else {
    redirect("../user/purchase.php","Items Successfully Added");
}
?> 
```

还有我的重定向功能（php/manageUser.php）：

```
function redirect($url, $message){
session_start();
$_SESSION["message"] = $message;
    //var_dump($_POST);
    //exit;
header("Location: $url");
die; 
```

好的，所以评论 var_dump 的结果正是我想要的：

```
array(10) { ["chasis"]=> string(1) "3" ["cpu"]=> string(1) "9" ["mobo"]=> string(2) "13" ["ram"]=> string(2) "18" ["gpu"]=> string(2) "22" ["psu"]=> string(2) "27" ["hdd"]=> string(2) "31" ["monitor"]=> string(2) "38" ["keyboard"]=> string(2) "42" ["mouse"]=> string(2) "47" } 
 } 
```

但是，一旦我调用了标头函数，我就会丢失 POST 数组中的数据。我尝试将它保存到一个全局变量中，但它总是注册为 NULL，而且看起来也不合适。

我的目标是每个项目的 ID 在重定向后保留在 POST 数组中，然后我可以使用它来填写下一页上的价格表（user/purchase.php）。

我会以错误的方式解决这个问题吗？如果是这样，正确的方法是什么？我试图在这个阶段坚持使用 PHP，而不是在这里使用 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:44:58.877

如果您不想修改代码流，我可以提出两种解决方案：

1.  将所有选择的值存储在会话中

2.  像 build.php?chasis=bla&cpu=blabla 一样附加您的 build.php，即将之前的选择存储在 $_GET 中。如果 uri 太长，你可以决定你想怎么做，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:45:27.830

您可以使用 $_SESSION 变量来保留数据直到会话结束（它可能在客户端关闭浏览器时发生）。

如果您希望数据是持久的，您应该使用数据库。

还有另一种选择，本地存储（您可以存储大约 5 MB），但这是 HTML5 标准，因此较旧的浏览器将不支持它。为此，您不必提交任何表单，但您必须使用 javascript 从一个页面到另一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:58:24.973

从函数中取出 session_start() 并将其放在您使用 $_SESSION 的每个页面的开头。

# nhibernate - 用于查询的 Nhibernate 添加选项

> ID：13709340
> 
> 赞同：1
> 
> 时间：2012-12-04T18:19:06.343
> 
> 标签：nhibernate

我最近遇到了 Nhibernate 生成的 SQL 的性能问题，如中所述

[Nhibernate 生成纯 sql 查询而不是执行语句](https://stackoverflow.com/questions/13636197/nhibernate-generate-plain-sql-query-instead-of-execution-statement)

我还找到了一个链接，描述了来自唯一的 Jeff Atwood 的类似经历

[http://legeronline.blogspot.ca/2009/03/evils-of-slow-paramaterized-query-plans.html](http://legeronline.blogspot.ca/2009/03/evils-of-slow-paramaterized-query-plans.html)

有谁知道是否有向 Nhibernate 添加“优化未知”选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-01T00:07:10.137

This example is a little more verbose:

```
public class OptionInterceptor: EmptyInterceptor
{
    public override SqlString OnPrepareStatement(SqlString sql)
    {
        var parameters = sql.GetParameters();
        var paramCount = parameters.Count();

        if (paramCount == 0)
            return sql;

        string optionString = " OPTION (OPTIMIZE FOR (";

        for (var i = 0; i < paramCount; i++)
        {
            var comma = i > 0 ? "," : string.Empty;
            optionString = optionString + comma + "@p" + i + " UNKNOWN";
        }

        optionString = optionString + "))";

        var builder = new SqlStringBuilder(sql);

        builder.Add(optionString);

        return builder.ToSqlString();
    }
} 
```

Then in your sessionfactory/initializer:

```
configuration.ExposeConfiguration(x =>
    {
        x.SetInterceptor(new OptionInterceptor());
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:58:51.713

*   您可以考虑扩展 MsSqlDialect 或
*   实现 IConnectionProvider 以注入您自己的命令包装器，该命令包装器在`ExecuteReader()`调用时添加提示

# asp.net - CheckBoxList OnSelectedChange 事件未触发

> ID：13709344
> 
> 赞同：1
> 
> 时间：2012-12-04T18:19:21.320
> 
> 标签：asp.net, .net, webforms

我有这种类型的代码`Gridview`..`UpdatePanel`现在当我检查时`CheckBox`它会触发它的`OnSelectedIndexChanged`事件但是当我选择两个或三个`CheckBox`然后取消选中选中的任何复选框时它的 `OnSelectedIndexChanged`事件不会被触发..为什么会发生这种情况

```
 <asp:Label ID="lbltempCity" runat="server" Text="City"></asp:Label>
      <asp:CheckBoxList ID="lst" AutoPostBack="true" runat="server" Width="100px" Height="100px" BorderWidth="1px" BackColor="White" OnSelectedIndexChanged="hello">
                                    <asp:ListItem>Test1</asp:ListItem>
                                    <asp:ListItem>Test2</asp:ListItem>
                                     <asp:ListItem>Test1</asp:ListItem>
                                    <asp:ListItem>Test2</asp:ListItem>
                                    </asp:CheckBoxList>
 <asp:DropDownExtender ID="DropDownExtender1" runat="server" DropArrowWidth="300px" TargetControlID="lbltempCity" DropDownControlID="lst">
                                    </asp:DropDownExtender>
                                </HeaderTemplate>
            <ItemTemplate>
    <asp:Label ID="lblCity" runat="server" Text='<%# Eval("tempCity") %>'></asp:Label>
            </ItemTemplate>
                            <ItemStyle Width="15%" />
                            </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:18:42.103

我测试了它工作正常的代码。问题的原因可能是网格或页面中的任何其他控件。发布完整的代码，以便我们提供帮助。

# ruby-on-rails - Ruby：mnitest-rails + mocha

> ID：13709347
> 
> 赞同：0
> 
> 时间：2012-12-04T18:19:39.043
> 
> 标签：ruby-on-rails, ruby, unit-testing, minitest

使用带有 minitest 的 mocha 模拟库的说明不起作用，我不知道为什么...... minitest 4.2.0，minitest-rails 0.3，mocha 0.12.4。根据说明，在 Gemfile 的底部我有

`group :test, :development do gem 'mocha', :require => false end`

这应该关闭自动要求。然后在测试帮助文件的底部，我有`require 'mocha'`- 说明说`require 'mocha/setup'`，它甚至不存在。有了这两段代码，在 gemfile 中没有 mocha 的情况下，所有运行良好的测试都会失败，并出现“未定义的方法 'run' blah blah blah”。有人看到我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:42:01.103

叹息，显然这些消息表明未能安装 mocha rails 插件。这就是这里的问题。

# javascript - 非主干模板中的视图和重新渲染

> ID：13709359
> 
> 赞同：3
> 
> 时间：2012-12-04T18:20:21.820
> 
> 标签：javascript, backbone.js, backbone-views

我有一个应用程序，它有一个单页 main.html，以及一些主要的模板 admin.html、user.html 等。这个应用程序目前不是主干，只是它的一些部分（迁移缓慢）。

在管理页面中，我有用户的 BB 视图等。当用户选择 /admin/users 的路径时，例如，主模板加载器（非 BB）将 admin.html 加载到 main.html 中的标准位置，然后在 usersView 上运行 reset：

```
// pseudocode
function() {
  master.loadTemplate("admin.html").then(function(){usersView.reset();});
} 
```

admin.html 包含几个元素，其中只有一个是 usersView 的模板。所以它可能看起来像：

```
<div id="admin-fragment">
  <div id="admin-users">
    <!-- template for usersView -->
  </div>
  <div id="admin-something else">
  </div>
</div> 
```

所以当我加载包含 usersView 的脚本时，它看起来像：

```
UsersView = Backbone.View.extend({
  el: "#admin-users"
}); 
```

都还不错。这是问题所在。

有时，用户可能会在这个单页应用程序中转到其他地方，然后返回到 /admin/users。所以主模板加载器加载（有时会重新加载，取决于）整个 admin.html。但是 usersView*已经*附加到现有的（现在是孤立的）#admin-users。

我该如何解决这个问题？我看到两种方法，可以使用一些想法：

*   当我选择 /admin/users 时，而不是 usersView.reset()，创建一个新的 usersView：

    // 伪代码 function() { master.loadTemplate("admin.html").then(function(){usersView = new UsersView();}); }

我担心的是绩效和管理受到打击。

*   以某种方式告诉现有的 usersView “reparent”/“reconnect”，即重新找到元素。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:06:37.487

请参阅以下有关在 Backbone 中呈现嵌套视图的良好模式的帖子：

*   [分配主干子视图变得更加干净](http://ianstormtaylor.com/assigning-backbone-subviews-made-even-cleaner/)
*   [在 Backbone.js 中渲染视图并不总是那么简单](http://ianstormtaylor.com/rendering-views-in-backbonejs-isnt-always-simple/)

# jquery - Auto width with the help of CSS (or JQuery?)

> ID：13709360
> 
> 赞同：0
> 
> 时间：2012-12-04T18:20:25.143
> 
> 标签：jquery, css

I have a bunch of `<li>` nodes that need to float left. The total sum of the width of these nodes when float left are larger than their parent container. Instead of the width of the parent node increasing, the `<li>` expand the height of the parent and essentially flow down to the next line.

Is there a CSS solution to this issue or will I need a jQuery script to alter the size of the parent node based on how many children are in it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:22:14.180

There is not a CSS solution. You can accomplish it with jQuery as you suggest though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:28:32.043

I'm not sure I'm 100% clear on what the issue is and what problem you would like to solve, but with only CSS:

You can keep the li's from stretching the height of the parent if you set a height on the parent equal to the height of the li's.

An overflow:hidden; on the parent might also be desired, unless you want scrollbars.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:28:56.840

I think I understand what you're asking, but maybe not. Check this out. I went overboard on the CSS, but it just illustrates the point. [**Here's a Fiddle.**](http://jsfiddle.net/JonMoore/Cb8jR/2/)

```
<div class="navItems">
    <div class="navOutline">
        <ul>
            <li><a href="#">Item 1</a></li>
            <li><a href="#">Item 2</a></li>
            <li><a href="#">Item 3</a></li>
            <li><a href="#">Item 4</a></li>
            <!-- Add more items and it'll expand -->
            <li><a href="#">Item 5</a></li>
        </ul>
    </div>
</div> 
```

* * *

```
.navItems ul { list-style:none; margin:0; padding:0; }
.navItems li { display:inline; }
.navItems li:not(:last-child) { margin-right:10px }
.navItems .bumper { margin-right:15px; }
.navItems {
    float:left;
    font-size:14px;    
    padding:5px;
    background:#FFF;
    box-shadow:0px 0px 20px rgba(0,0,0,0.25);
    -o-box-shadow:0px 0px 20px rgba(0,0,0,0.25);
    -ms-box-shadow:0px 0px 20px rgba(0,0,0,0.25);
    -moz-box-shadow:0px 0px 20px rgba(0,0,0,0.25);
    -webkit-box-shadow:0px 0px 20px rgba(0,0,0,0.25);
}
.navOutline {
    margin:auto auto;
    padding:10px;
    background:#FFF;
    border:1px dashed #CCC;
}
.navItems a { text-decoration:none; color:#000; }​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:32:55.493

The immediate parent of the floated elements should have `display:inline-block` property.

# java - 通过意图传递对象的ArrayList - Java（Android）

> ID：13709362
> 
> 赞同：13
> 
> 时间：2012-12-04T18:20:37.157
> 
> 标签：java, android, android-intent, arraylist

我正在尝试通过意图传递对象的 ArrayList 但无法使其正常工作。这是我所拥有的：

```
public class QuestionView extends Activity {

    //variables and other methods...

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putParcelableArrayListExtra("queries", queries);
        startActivity(intent);
    }
} 
```

此处收到意向：

```
public class Results extends Activity {

    int cAnswers;
    int wAnswers;
    ArrayList<Question> qs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.resultsmain);

        cAnswers = getIntent().getIntExtra("correctAnswers", -1);
        wAnswers = getIntent().getIntExtra("wrongAnswers", -1);

        qs = getIntent().getParcelableArrayListExtra("queries");

                    //more code...
    }
} 
```

正在接收两个整数，correctAnswer 和 wrongAnswers，我可以使用它们。ArrayList 没有通过。endQuiz() 方法中没有错误，但 'qs = getIntent().getParcelableArrayListExtra("queries");' 抛出错误并说“绑定不匹配”。

对此的任何帮助表示赞赏！

问题类：

```
public class Question {
    String a1;
    String a2;
    String a3;
    String a4;
    int correctAnswer;
    String query;
    int selectedAnswer;
    boolean correctness;

    public Question() {
    }

    public Question(String a1, String a2, String a3, String a4, int correctAnswer, String query, int selectedAnswer, boolean correctness) {
        this.a1 = a1;
        this.a2 = a2;
        this.a3 = a3;
        this.a4 = a4;
        this.correctAnswer = correctAnswer;
        this.query = query;
        this.selectedAnswer = selectedAnswer;
        this.correctness = correctness;
    }
    } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-04T18:46:59.207

您必须更改您的`Question`类以实际实现 Parcelable。Parcelable 界面一开始可能会令人困惑……但请坚持下去。

您应该关注两种 Parcelable 方法：

*   `writeToParcel()`它将您的类转换为 Parcel 对象。
*   `Question(Parcel in)`它将 Parcel 对象转换回您的类的可用实例。

您可以安全地剪切和粘贴我标记的其他 Parcelable 信息。

为简单起见，我将只使用您的问题类的一部分：

```
public class Question implements Parcelable {
    String a1;
    String a2;
    ...

    public Question(String a1, String a1) {
        this.a1 = a1;
        this.a2 = a2;
    }

    // Your existing methods go here. (There is no need for me to re-write them.) 

    // The following methods that are required for using Parcelable
    private Question(Parcel in) {
        // This order must match the order in writeToParcel()
        a1 = in.readString();
        a2 = in.readString();
        // Continue doing this for the rest of your member data
    }

    public void writeToParcel(Parcel out, int flags) {
        // Again this order must match the Question(Parcel) constructor
        out.writeString(a1);
        out.writeString(a2);
        // Again continue doing this for the rest of your member data
    }

    // Just cut and paste this for now
    public int describeContents() {
        return 0;
    }

    // Just cut and paste this for now
    public static final Parcelable.Creator<Question> CREATOR = new Parcelable.Creator<Question>() {
        public Question createFromParcel(Parcel in) {
            return new Question(in);
        }

        public Question[] newArray(int size) {
            return new Question[size];
        }
    };
} 
```

现在改变你放入`queries`Intent 附加内容的方式。

```
intent.putParcelableArrayListExtra("queries", queries); 
```

您读取 Parcelable 数组的方式非常完美。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T18:30:10.043

为了能够将 ArrayList 作为 Intent 的一部分提供，您的类型必须实现 Parcelable。从您必须将 List 转换为 的事实来看`(ArrayList<? extends Parcelable>)`，您没有这样做。如果你有，你可以简单地拥有：

```
class Foo implements Parcelable {
//implementation here
}
ArrayList<Foo> foos = new ArrayList<Foo>();
new Intent().putParcelableArrayListExtra("foos", foos); //no need to cast 
```

# javascript - Javascript，简单的扩展方法，允许扩展对象的多个版本

> ID：13709372
> 
> 赞同：1
> 
> 时间：2012-12-04T18:21:12.110
> 
> 标签：javascript, extend

我有一个简单的“扩展”方法，如下所示：

```
extend: function(source) {
    for (var k in source) {
        if (source.hasOwnProperty(k)) {
            myThing[k] = source[k];
        }
    }
    return myThing;
} 
```

你像这样使用它

```
myThing.extend({ 
    newObj: { 
        myFunc: function () { console.log('things'); }
    }
}); 
```

而且效果很好。
但是，我很想添加让其他一些代码稍后调用的功能：

```
myThing.extend({ 
        newObj: { 
            mySecondFunc: function () { console.log('things'); }
        }
    }); 
```

我应该可以同时调用`myThing.newObj.myFunc()`AND `myThing.newObj.mySecondFunc()`。

我尝试将其更改为：

```
for (var k in source) {
            if (source.hasOwnProperty(k)) {
                if (mtUtils.hasOwnProperty(k)) {
                    for (var t in k) {
                        mtUtils[k][t] = source[k][t];
                    }
                } else {
                    mtUtils[k] = source[k];
                }
            }
        } 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:29:42.400

```
function extend(dest, source) {
    for (var k in source) {
        if (source.hasOwnProperty(k)) {
            var value = source[k];
            if (dest.hasOwnProperty(k) && typeof dest[k] === "object" && typeof value === "object") {
                extend(dest[k], value);
            } else {
                dest[k] = value;
            }
        }
    }
    return dest;
}
var myThing = {};
extend(myThing, {
    newObj: {
        myFunc: function() {
            console.log('things');
        }
    }
});
extend(myThing, {
    newObj: {
        mySecondFunc: function() {
            console.log('things');
        }
    }
});

myThing;
/*
Object
   newObj: Object
      myFunc: function () { console.log('things'); }
      mySecondFunc: function () { console.log('things'); }
      __proto__: Object
   __proto__: Object
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:28:29.220

这应该可以解决您的问题，但为什么不实现的递归版本`extend`？

```
 for (var k in source) {
        if (source.hasOwnProperty(k)) {
            if (mtUtils.hasOwnProperty(k)) {
                for (var t in source[k]) {
                    mtUtils[k][t] = source[k][t];
                }
            } else {
                mtUtils[k] = source[k];
            }
        }
    } 
```

# user-interface - AutoIT GUI 和文本输出

> ID：13709378
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:21:26.133
> 
> 标签：user-interface, autoit

我的 GUI 和程序可以正常工作，但不如预期，所以请听我说。

我编写了这个程序，以 3 个类别的 1-10 个示例词的形式获取用户输入。

它的目的是输出一个包含每个三元组排列的文本文件。

不幸的是，它输出的排列不是三元组。

它不是很多代码，为什么会发生这种情况？

前任。

图形用户界面：

颜色数字希腊字母

红一阿尔法蓝二贝塔

输出：

红色一阿尔法 红色一贝塔 红色二阿尔法 红色二贝塔 蓝色一阿尔法 蓝色一贝塔 蓝色二阿尔法 蓝色二贝塔

///////////////////////////////////////// //////////////////////////////

```
#include <GUIConstantsEx.au3>

$windowWidth = 600
$windowHeight = 430

$textFieldVertSpacing = 30

GUICreate("Semantic Intuition/Idea Naming Tool", $windowWidth, $windowHeight) 

GUISetBkColor (0xB0E2FF)

GUICtrlCreateLabel("Category A", 80, 10)
GUICtrlCreateLabel("Category B", 260, 10)
GUICtrlCreateLabel("Category C", 450, 10)

$categoryA = GUICtrlCreateInput("", (150*0)+(150/4)*1, 40, 150)
$categoryB = GUICtrlCreateInput("", (150*1)+(150/4)*2, 40)
$categoryC = GUICtrlCreateInput("", (150*2)+(150/4)*3, 40)

$example0 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80)
$example1 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*1)
$example2 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*2)
$example3 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*3)
$example4 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*4)
$example5 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*5)
$example6 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*6)
$example7 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*7)
$example8 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*8)
$example9 = GUICtrlCreateInput("", (150*0)+(150/4)*1, 80+$textFieldVertSpacing*9)

$example10 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80)
$example11 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*1)
$example12 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*2)
$example13 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*3)
$example14 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*4)
$example15 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*5)
$example16 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*6)
$example17 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*7)
$example18 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*8)
$example19 = GUICtrlCreateInput("", (150*1)+(150/4)*2, 80+$textFieldVertSpacing*9)

$example20 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80)
$example21 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*1)
$example22 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*2)
$example23 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*3)
$example24 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*4)
$example25 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*5)
$example26 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*6)
$example27 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*7)
$example28 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*8)
$example29 = GUICtrlCreateInput("", (150*2)+(150/4)*3, 80+$textFieldVertSpacing*9)

$generateTriadButton = GUICtrlCreateButton("Generate", ($windowWidth-100)/2, $windowHeight-40, 100)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Global $examplesA[10] = [$example0, $example1, $example2, $example3, $example4, $example5, $example6, $example7, $example8, $example9]
Global $examplesB[10] = [$example10, $example11, $example12, $example13, $example14, $example15, $example16, $example17, $example18, $example19]
Global $examplesC[10] = [$example20, $example21, $example22, $example22, $example24, $example25, $example26, $example27, $example28, $example29]

GUISetState(@SW_SHOW)                     

While 1

    Switch GUIGetMsg()
        Case $GUI_EVENT_CLOSE
            Exit
         Case $generateTriadButton
            permutate()

            Exit
    EndSwitch

WEnd

Func permutate()

    $a = 0
    $b = 0
    $c = 0
    $x = 1

    $empty = ""

    $output = FileOpen(@ScriptDir & "\TriadOutput.txt", 2)

    While $a < 10
       while $b < 10
          while $c < 10

               ;MsgBox(0, "String length is:", StringLen($examplesA[$a]))
               If (StringStripWS(GUICtrlRead($examplesA[$a]), 8) <> "") AND (StringStripWS(GUICtrlRead($examplesB[$b]), 8) <> "") AND (StringStripWS(GUICtrlRead($examplesA[$a]), 8) <> "") Then

               FileWrite($output, $x)
               FileWrite($output, ")")
               FileWrite($output, " ")
               FileWrite($output, GUICtrlRead($examplesA[$a]))
               FileWrite($output, " ")
               FileWrite($output, GUICtrlRead($examplesB[$b]))
               FileWrite($output, " ")
               FileWrite($output, GUICtrlRead($examplesC[$c]))
               FileWrite($output, " ")
               FileWrite($output, @CRLF)

               $x = $x + 1

               EndIf

             $c = $c + 1
          WEnd
          $c = 0
          $b = $b + 1
       WEnd
       $b = 0
       $a = $a + 1
    WEnd

    FileClose($output)
EndFunc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:25:03.707

典型的复制粘贴错误。

只需将最后一个 If 语句（第 94 行）中的第二个 $a 替换为 $c ，它就会按预期工作......

您可以通过验证输出来发现这一点。问题是，每三个文本字段都被考虑在内，但其他两个词工作得很好。所以错误必须在负责第三个字段的表达式（条件）中。这只是在第 94 行...

# php - 未加载 Firebird 扩展

> ID：13709380
> 
> 赞同：4
> 
> 时间：2012-12-04T18:21:32.867
> 
> 标签：php, apache, firebird

我正在尝试在 PHP 中使用 Firebird 扩展。我的文件夹`php_pdo_firebird.dll, php_interbase.dll`中有扩展文件 ( ) 。`ext`我`php.ini`像这样将它们添加到我的文件中

```
...
[PHP_PDO_FIREBIRD]
extension=php_pdo_firebird.dll
[PHP_INTERBASE]
extension=php_interbase.dll
... 
```

没有错误提示无法加载扩展，但每当我打印我的时，`phpinfo`我都没有看到它们中的任何一个。我在这里想念什么？

对于它的价值，我在 Windows 7 上使用 Apache 2.2 运行 PHP 版本 5.3.14 TS。

**编辑：**似乎记录了一些错误，只是我的`error_log`设置被覆盖了（对于那些看到这个的人，请仔细检查 C:\Windows\Temp\php-errors.log）。现在它告诉我，只要文件明确存在，就找不到指定的模块。

```
PHP Warning:  PHP Startup: Unable to load dynamic library 
    'C:\Program Files (x86)\PHP\ext\php_pdo_firebird.dll' - 
    The specified module could not be found.
    in Unknown on line 0

PHP Warning:  PHP Startup: Unable to load dynamic library 
    'C:\Program Files (x86)\PHP\ext\php_interbase.dll' - 
    The specified module could not be found.
    in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:38:34.010

弄清楚了！好的，首先要了解基础知识：

*   确保 DLL 的版本与您的 PHP 版本相匹配。
*   对于那些使用 Windows 安装程序的人，由于某种原因，它没有提供包含 Interbase 和 Firebird 模块的选项，因此您必须下载匹配的 .zip 文件并从其中的`ext`文件夹中复制它们。
*   仔细检查您的设置中是否存在任何拼写错误，例如未转义的反斜杠`extension_dir`。这仅适用于值不是“用引号括起来”的情况。

现在是致命一击。该错误消息极具误导性。此时它应该可以找到您的 DLL，但它缺少一个完整的部分：`fbclient.dll`可以在`bin`您的 Firebird 安装文件夹中找到。我之前读到的所有地方都说放在`fbclient.dll`文件`ext`夹中，但*只有*将它放在`PHP`文件夹的根目录中才有效。

希望这有助于未来任性的灵魂:)

# sql - 如何获得 Oracle 中不同记录的最高计数？

> ID：13709382
> 
> 赞同：4
> 
> 时间：2012-12-04T18:21:38.937
> 
> 标签：sql, oracle, count, distinct

我有一个包含很多记录的表，其中一些字段重复。我想要每个重复中最常见的。

所以，如果我的表有如下数据：

```
 ID     Field1     Field2  
  1      A          10  
  2      A          12 
  3      B          5  
  4      A          10  
  5      B          5  
  6      A          10  
  7      B          8
  8      B          5
  9      A          10 
```

我可以选择不同的并获得计数：

```
select distinct Field1, Field2, count(Field1)
from Table
group by Field1, Field2
order by Field1, count(Field1) desc 
```

那会给我

```
Field1    Field2     Count
A         10         4
A         12         1
B          5         3
B          8         1 
```

但是，我只想要每个 Field1 中计数最多的记录。我一直在与 rank() 就分区和子查询进行斗争，但还没有找到正确的语法来使用两个字段来实现唯一性并按计数选择最高记录。我一直在寻找，我确定有人问过这个问题，但我找不到。

我想得到以下

```
Field1     Field2       (optional) Count 
 A          10           4
 B           5           3 
```

目标是查看只有一点点不正确数据的表（字段 1 和字段 2 之间的链接错误），并根据通常的情况确定它应该是什么。我不知道有多少不良记录，因此消除低于某个阈值的 Count 会起作用，但似乎有点笨拙。

如果更好，我可以制作一个临时表来将我的不同值放入其中，然后从中进行选择，但似乎没有必要这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:41:05.533

我想这就是你要找的：

```
select field1, field2, cnt from 
(select field1, field2, cnt, rank() over (partition by field1 order by cnt desc) rnk
from (select distinct Field1, Field2, count(Field1) cnt
            from Table1
            group by Field1, Field2
            order by Field1, count(Field1) desc) 
)
where rnk = 1; 
```

SQL小提琴：[http ://sqlfiddle.com/#!4/fe96d/3](http://sqlfiddle.com/#!4/fe96d/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:30:50.060

由于多层嵌套子查询，这有点不雅。但是，它应该是相当有效的。遵循 SQL 中的步骤应该相当容易

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 1 id, 'A' field1, 10 field2 from dual union all
  3    select 2, 'A', 12 from dual union all
  4    select 3, 'B', 5 from dual union all
  5    select 4, 'A', 10 from dual union all
  6    select 5, 'B', 5 from dual union all
  7    select 6, 'A', 10 from dual union all
  8    select 7, 'B', 8 from dual union all
  9    select 8, 'B', 5 from dual union all
 10    select 9, 'A', 10 from dual
 11  )
 12  select field1,
 13         field2,
 14         cnt
 15    from (select field1,
 16                 field2,
 17                 cnt,
 18                 rank() over (partition by field1
 19                                  order by cnt desc) rnk
 20           from (select field1, field2, count(*) cnt
 21                   from x
 22                  group by field1, field2))
 23*  where rnk = 1
SQL> /

F     FIELD2        CNT
- ---------- ----------
A         10          4
B          5          3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T18:44:47.487

第三种方法；）

```
select field1,
       field2,
       max_cnt
from (
  select field1, 
         field2, 
         cnt,
         max(cnt) over (partition by field1, field2) as max_cnt,
         row_number() over (partition by field1 order by cnt desc) as rn
  from (
      select field1, 
             field2, 
             count(*) over (partition by Field1, Field2) as cnt
      from idlist
  ) t1 
) t2
where max_cnt = cnt 
and rn = 1 
```

SQLFiddle：[http ://sqlfiddle.com/#!4/8461f/1](http://sqlfiddle.com/#!4/8461f/1)

# user-interface - CloverETL / 热情 / GEF

> ID：13709385
> 
> 赞同：3
> 
> 时间：2012-12-04T18:21:43.607
> 
> 标签：user-interface, eclipse-gef, clover, zest

哪个组件用于创建[CLOVER ETL](http://www.cloveretl.com/) GUI？我有一些可能性：

*   热情
*   二维绘图
*   全球环境基金

我需要创建一个用户可以创建图表的工具。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-15T12:20:38.903

我是 CloverETL 的开发负责人。CloverETL Designer 的图形编辑器是用 GEF 构建的，它在下面使用 Draw2D。所以我们接触了这两种技术——GEF 用于大部分功能，Draw2D 用于更底层的绘图内容。

对于一个新项目，您可能会考虑使用 GMF（图形建模框架），它是 GEF 和 EMF 之上的更高级别的抽象。但根据我的经验，即使使用 GMF，您也需要接触低级位（GEF、Draw2D）。我们不在 Designer 中使用 GMF，因为 Designer 早在 GMF 准备好之前就开始了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T10:33:23.300

我不详细了解 Clover ETL，而且开源代码似乎不包含图形编辑器，所以我无法确定图形编辑器使用的技术，但看截图似乎是 GEF 或转基因食品对我来说。

GEF 是标准的图形编辑器库，但由于它非常通用，因此通常使用更高级别的库来代替它，例如 GMF 或 Graphiti（[图形建模项目](http://www.eclipse.org/projects/project.php?id=modeling.gmp)的两个子项目）。这三个工具都不是特别容易使用 - 如果您以前没有此类技术的知识，也许 Graphiti 是最容易开始的，但我不太确定。

另一方面，Draw2D 是 GEF 中使用的矢量图形库，而 Zest 是在 Draw2D 之上创建的图形布局（和可视化）库。就其本身而言，它们都无法创建成熟的图形编辑器，但是，Zest 对于创建具有自动布局的某些图形模型的只读视图很有用。

# java - 反映泛型类

> ID：13709387
> 
> 赞同：1
> 
> 时间：2012-12-04T18:21:47.803
> 
> 标签：java, generics, reflection

我认为这是不可能的，但让我们试试：

是否可以编写例程analyzeArrayList() 以打印ArrayList 的维度和列表的底部类型。

示例代码应打印：

> 维度 = 2 和底部类型 = 类 java.lang.Float
> 维度 = 3 和底部类型 = 类 java.lang.Integer

我们假设参数 s 始终是 ArrayList 的实例，而不是其他类型的实例。请注意，列表可能为空但不为空。

```
 void analyzeArrayList(Object s)
  {
    int dimension;
    String typeString;

    //<Some code here!>

    System.out.println("Dimension = "+dimension+" and Bottom type = "+typeString);
  }

  Object s = new ArrayList<ArrayList<Float>>();
  Object t = new ArrayList<ArrayList<ArrayList<Integer>>>();

  .
  . 
  analyzeArrayList(s);
  analyzeArrayList(t); 
```

对此发表评论：

有趣的是，如果您有一个带有字段的对象

```
 ArrayList<ArrayList<Float>> 
```

然后你可以写方法

```
 void analyzeArrayList(Field s) 
```

如果您知道 Field s 代表 ArrayList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:56:56.993

[由于类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这是不可能的。

Java 只在编译时考虑泛型。如果你有一个`List<String>`and `List<Integer>`，编译器知道这些列表来自不同的类型，这使得它能够在每个实例的基础上创建某种类型的类型安全环境。由于类型擦除，在运行时就像两个列表都包含对象并且彼此等价。

# javascript - 合并多个音频缓冲源

> ID：13709391
> 
> 赞同：3
> 
> 时间：2012-12-04T18:21:54.863
> 
> 标签：javascript, html, audio, web-audio-api

关于html5 webaudio的问题：是否可以将多首歌曲合并在一起？

我有不同的轨道，它们都使用 webaudio 同时播放，但我需要处理音频，所以我需要一个缓冲区内的所有音频，而不是每个轨道都有自己的缓冲区。

我尝试通过添加它们的通道数据来合并它们，但我总是得到“未捕获的 RangeError：索引超出范围。”

```
function mergeBuffers(recBuffers, recLength){

  var result = new Float32Array(recLength*2);
  var offset = 0;
  for (var i = 0; i < recBuffers.length; i++){
    result.set(recBuffers[0], offset);
    offset += recBuffers[0].length;
  }
  return result;
}

var recBuffersL = [];
for (var i=0;i<audioTracks.length; i++)
{
    recBuffersL[i] = audioTracks[i].currentBuffer.getChannelData(0);

}

var recBuffersR = [];
for (var i=0;i<audioTracks.length; i++)
{
    recBuffersR[i] = audioTracks[i].currentBuffer.getChannelData(1);

}

var buffers = [];
buffers.push( mergeBuffers(recBuffersL, recBuffersL.length) );
buffers.push( mergeBuffers(recBuffersR, recBuffersR.length) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T20:38:47.757

事实证明这是可能的：我不得不对 Float32Array 求和

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:17:33.413

您可以使用 OfflineAudioContext 并获取结果缓冲区。这将使您比实时更快地处理+合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:51:31.800

我会将两个源的输出连接到[ScriptProcessorNode](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#ScriptProcessorNode)并实时处理它们。

# facebook - 发布状态更新时保留 HTML 格式

> ID：13709392
> 
> 赞同：0
> 
> 时间：2012-12-04T18:21:55.090
> 
> 标签：facebook, facebook-graph-api, coldfusion, coldfusion-9

我正在向我们的内部 CMS 添加功能，其中一项要求是能够同时将内容发布到 CMS 和我们的 Facebook 页面。我有实际的发布部分工作，但是，嵌入在内容中的 HTML 标签不会在 Facebook 状态中呈现。

我得到类似： <p>hello world</p> 而不是呈现的文本。

是否有一种格式可以将 html 标记转换为至少保留换行符和分段符的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:56:35.227

API 在渲染它们之前从状态更新中去除所有 HTML。如果要保留换行符，请在传递它们时对其进行编码，例如`%0A`换行符

`https://graph.facebook.com/me/feed?access_token=<ACCESS_TOKEN>&message=Hello%0AWorld!!!`

# c# - MVC3 数据不是从局部视图中收集的

> ID：13709394
> 
> 赞同：2
> 
> 时间：2012-12-04T18:21:56.080
> 
> 标签：c#, asp.net-mvc-3, partial-views

我正在 MVC3 中编写一个调查应用程序。我有这个类（简化）：

```
public class Survey
{
    public Respondent Respondent { get; set; }
} 
```

在我看来：

```
@model Survey

// bla bla bla

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    @Html.Partial("_Respondent", Model.Respondent) 
} 
```

当我将其发回时，survey.Respondent = null :(

```
[HttpPost]
public ActionResult Survey(Survey survey)
{
    return RedirectToAction("Index");
} 
```

_Respondednt 部分视图的简化代码：

```
@model Mercer.FITT.Respondent
<fieldset>
    <legend>Respondent Information</legend>
        <table>
            <tr>
                <td>
                    @Html.LabelFor(model => model.Name)
                </td>
                <td>
                    @Html.EditorFor(model => model.Name)
                    @Html.ValidationMessageFor(model => model.Name)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.LabelFor(model => model.JobTitle)
                </td>
                <td>
                    @Html.EditorFor(model => model.JobTitle)
                    @Html.ValidationMessageFor(model => model.JobTitle)
                </td>
            </tr>
        </table>
</fieldset> 
```

如果我摆脱部分视图并将部分视图内容复制到主视图中，一切都很好。知道为什么不从局部视图中收集数据吗？也许我应该以不同的方式调用局部视图？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:30:00.700

使用 EditorTemplate 而不是局部视图

```
@model Survey  

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    @Html.EditorFor(m=>m.Respondent) 
} 
```

并且不要忘记在文件夹中创建`Respondent.cshtml`文件`EditorTemplates`并将其放入 Respondent 字段以进行编辑。

# maven - 如何从源根目录下排除源？

> ID：13709400
> 
> 赞同：3
> 
> 时间：2012-12-04T18:22:10.267
> 
> 标签：maven, maven-2, maven-plugin, m2e, pom.xml

在我的项目的[pom.xml](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)中，我有负责生成源的部分：

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.3.0</version>
            <executions>
                             ...
                <execution>
                    <id>generate-sources-myownp</id>
                    <phase>generate-sources</phase>
                    <configuration>
                        <sourceRoot>${basedir}/target/generated-sources/cxf</sourceRoot>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>${basedir}/src/main/wsdl/MyOwnProj.wsdl</wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
                 ... 
```

它运行良好，除了一个“ *sourceRoot* ”恰好是重复的，因为它包含在两个不同的包中。

[有没有办法在pom.xml](http://maven.apache.org/pom.html)中为该源包指定一个明确的“排除” ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:31:02.753

根据文档，您通常不需要指定 sourceRoot。[文档](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)摘录：

> 默认情况下，codegen 插件遵循 Maven 约定“target/generated-sources/cxf”作为生成类的输出文件夹。您可以使用如下所示覆盖此值，但请注意，这通常不是必需的

也许我误解了你的问题。

# android - 来自 Uniqush 的重复 GCM 消息

> ID：13709401
> 
> 赞同：0
> 
> 时间：2012-12-04T18:22:12.187
> 
> 标签：android, google-cloud-messaging, unsubscribe

我正在使用 Uniqush 将 GCM 消息发送到我正在开发的应用程序，到目前为止这运行良好。但是，由于显而易见的原因，我在开发时卸载并重新安装了该应用程序，并且每次新安装时它都会重新注册 GCM。

我知道 GCM 应该自动处理这个问题：

[http://developer.android.com/guide/google/gcm/adv.html#unreg](http://developer.android.com/guide/google/gcm/adv.html#unreg)

如果无法将消息传递到设备，则会将错误发送到处理它的服务器。不幸的是（即使在未安装应用程序的情况下发送了测试推送消息之后）我的设备收到了重复的消息。

这是 Uniqush、我的程序、GCM 还是这三者的某种组合中的失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T00:33:55.470

根据您的描述，我无法重现您的情况。以下是尝试重现它的步骤：

*   在我的手机上安装测试应用程序并使用 uniqush 向它推送通知。正确的。Uniqush 的日志显示它已成功交付，我的手机显示正确的结果。
*   卸载测试应用。
*   使用 uniqush 再次推送另一个通知。Uniqush 的日志显示用户取消订阅服务的消息：`[Unsubscribe][Info] 2012/12/21 19:18:08 [UnsubscribeRequest] RequestId=3992a14e4987e94e3ce16bb7394ee06d2d9e7231 Success DeliveryPoint=gcm:47e6551857be173b1418e56b63dbdb8cd58c94a2`
*   然后再向设备推送一个通知，uniqush 说它找不到设备（因为它已经被删除了。）
*   使用 查询数据库`redis-cli`，不再存储设备信息。已成功退订。

但是，我确实发现了一些问题：如果您检查从 HTTP 的 uniqush 返回的错误消息，那么您将`Success`在第二个通知中看到。我已经在下一个版本中修复了这个错误。它很快就会上线了。（如果您对此感兴趣，请查看[.deb 包](http://uniqush.org/downloads/uniqush-push_1.4.0_amd64.deb)）

事实上，uniqush 就是为了能够处理这种情况而设计的，这样用户就不需要关心取消订阅、设备令牌/注册 id 更新等。

如果您有任何未来的问题，请随时发表评论或与我联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:29:02.777

如果在卸载应用程序时将通知发送到设备，*最终会*清除重复项。

# php - 如何在php中动态分配颜色选择器十六进制值作为html属性？

> ID：13709404
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:22:12.527
> 
> 标签：php, html

如何创建一个颜色选择器，用户可以选择所需的十六进制值并将其作为属性动态放置在 html 标记中，如下例所示。

```
<p style="background-color: #FCF8C0;">TEXT GOES HERE</p> 
```

在上面的示例代码中，我希望它`#FCF8C0`是动态的，基于用户动态选择颜色并且一旦选择了十六进制值，背景会在鼠标移出时动态变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:24:56.893

你不是用 PHP 来做的，你用 JavaScript 来做类似的事情。
PHP 是一种服务器端语言，您想做一些发生在客户端的事情，因此您应该使用 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:31:28.050

好吧，你可以用 PHP 来做，但用 JS 做会更有效率。对于 PHP，一种方法是使用新的 $_GET 值刷新页面。然后你可以使用：

```
<?php echo("<p style='background-color:".$_GET['colorHex']."'>paragraph here</p>");?> 
```

前提是 URL 类似于：`Test.com/page.php?colorHex=#094037`

# java - 如何计算 Eclipse 工作区中的项目数量？

> ID：13709406
> 
> 赞同：3
> 
> 时间：2012-12-04T18:22:18.957
> 
> 标签：java, eclipse, statistics

我有一个工作区，里面有很多项目。eclipse 是否提供有关工作区项目的统计信息？我可以只计算目录的数量，但我认为这并不准确，因为只有一些目录可能会作为 Eclipse 中的项目导入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:37:27.310

单击*Package Explorer* Eclipse 视图中的第一个项目，然后按 shift 并单击最后一个项目。您将在窗口底部看到项目计数。

![在此处输入图像描述](../Images/814d15d9809c1fb8ed90bb1b893a02f6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:25:25.673

如果您在 Linux/Unix 环境中，请 cd 到您的工作区并使用：

```
 find . -name ".project" 
```

# python - 无法在 WebPy 中添加映射到子应用程序

> ID：13709407
> 
> 赞同：0
> 
> 时间：2012-12-04T18:22:20.220
> 
> 标签：python, django, web.py, uwsgi

我只是想明确一点，在 Windows 中，工作正常，但是当我尝试在我的 VPS 中部署这个脚本时它失败了。

这有点奇怪，因为如果我将映射添加到“mainwebapp”的主 Web 应用程序实例，它就可以工作，但是每当我将它添加到任何子应用程序时，它都会显示为 webpy“Not Found”，我正在用头撞墙因为这个。

在 Windows 中，我有 Wamp 2.2。在我的 Vps 中，我有 CentOS 5、带有 uWsgi 的 nginx 以及来自我的 Windows 的相同 Python(2.7) 和 Webpy 版本。

我几乎可以肯定这是 nginx/uwsgi 的问题，因为当我在我的 Vps 中切换到 apache/mod_wsgi 时，它也可以像在我的 Wamp 本地服务器中一样工作。

到目前为止，这是我一直在测试的代码，非常简单：

```
class subappcls:
     def GET(self):
          return "This will also be shown fine"

sub_mappings = (
     "/subpath", subappcls
)

#subclass web app
subwebapp = web.application( sub_mappings, globals() )

#mapped clas
class mapped_cls:
def GET(self):
     return "this mapped sub app will not be found"

#Here I add mappings:
subwebapp.add_mapping("/mapped_sub_path", mapped_cls

class appcls:
def GET(self):
     return "main app"

main_mappings = (
     "/subapp", subwebapp,
     "/app", appcls
)

mainwebapp = web.application( main_mappings, fvars=globals() )

class indexcls:
def GET(self):
     return "this will be shown just fine"

mainwebapp.add_mapping("/another",indexcls)

application = mainwebapp.wsgifunc() 
```

当我访问：

/subapp/subpath #会起作用

/subapp/mapped_sub_path #将不起作用

这将工作得很好：

/应用程序

/其他

这是 uwsgi 日志： *** 在 [Tue Dec 4 18:41:52 2012] 开始 uWSGI 1.3 (64bit)** **使用版本编译：4.1.2 20080704 (Red Hat 4.1.2-52) 于 2012 年 11 月 24 日 02:21:31 操作系统：Linux-2.6.18-194.17.4.el5xen #1 SMP Mon Oct 25 16:36:31美国东部时间 2010* ****警告：您正在以 root 身份运行 uWSGI ！！！（使用 --uid 标志）** **您的进程数限制为 32832 您的内存页面大小为 4096 字节检测到最大文件描述符数：1024 锁定引擎：pthread 强大的互斥锁 uwsgi 套接字 0 绑定到 UNIX 地址 /tmp/app.sock fd 3 Python 版本：2.7.3（默认， 2012 年 10 月 30 日，06:37:20) [GCC 4.1.2 20080704 (Red Hat 4.1.2-52)]* ****Python 线程支持被禁用。您可以使用 --enable-threads * 启用它********

 ******编辑：我使用 --enable-threads 参数启用了线程，但也没有工作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:14:26.453

问题似乎与重新加载器有关。如果在集成开发服务器中运行以下代码（使用命令`python code.py`），则以下代码有效：

```
import web

web.config.debug = False  # turns off the reloader

class subappcls:
    def GET(self):
        return "This will also be shown fine"

sub_mappings = (
    "/subpath", subappcls
)

#subclass web app
subwebapp = web.application(sub_mappings, globals())

#mapped class
class mapped_cls:
    def GET(self):
        return "this mapped sub app will not be found"

#Here I add mappings:
subwebapp.add_mapping("/mapped_sub_path", mapped_cls)

class appcls:
    def GET(self):
        return "main app"

main_mappings = (
    "/subapp", subwebapp,
    "/app", appcls,
)

mainwebapp = web.application(main_mappings, globals())

class indexcls:
    def GET(self):
        return "this will be shown just fine"

mainwebapp.add_mapping("/another", indexcls)

if __name__ == "__main__":
    mainwebapp.run()
else:
    application = mainwebapp.wsgifunc() 
```

运行卷曲：

```
curl http://localhost:8080/subapp/mapped_sub_path
this mapped sub app will not be found 
```******

# google-chrome - chrome.extension.onRequest 是否已弃用？

> ID：13709409
> 
> 赞同：6
> 
> 时间：2012-12-04T18:22:32.870
> 
> 标签：google-chrome, google-chrome-extension

我正在构建一个 chrome 扩展并尝试将事件侦听器附加到此，但我在后台页面的控制台中没有看到任何内容。

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
          console.log('REFERRER', request.ref);
        }); 
```

这段代码在我的 main.js 后台页面中，我所有的其他事件监听器（chrome.tabs.onUpdated、chrome.extension.onMessage 等）都可以正常工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T19:01:39.753

是的，`Request`不赞成使用“消息”。因此，`onRequest`您应该使用[`onMessage`](http://developer.chrome.com/extensions/extension.html#event-onMessage),而[`sendMessage`](http://developer.chrome.com/extensions/extension.html#method-sendMessage)不是`sendRequest`.

# magento - 在 Magento 中加载客户购物车

> ID：13709411
> 
> 赞同：4
> 
> 时间：2012-12-04T18:22:33.650
> 
> 标签：magento, shopping-cart

我正在尝试加载客户购物车，以便添加产品然后保存购物车。
我试过这个，但加载购物车没有运气：

```
 $customerCart = Mage::getModel('checkout/cart')->loadByCustomer($idUser);

    $customerCart->addProduct($idProduct,$quantity);
    $customerCart->save(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:54:42.370

这取决于您要完成的工作。如果您在管理员中，并且需要将商品添加到购物车中（即使管理员已经具有此功能），您的操作方式与您在前端时的方式不同。在 Magento 中有点令人困惑的一个关键点是，购物车并不是真正用来存储物品的东西——它`quote`确实是。购物车是报价的包装。如果你稍微考虑一下，这真的很有意义。

因此，要从管理员那里访问客户的报价，您可以这样做：

```
$quote = Mage::getModel('sales/quote')->loadByCustomer($customer);
$quote->addProduct($product, $qty);

$quote->collectTotals()->save(); 
```

如果您想从前端访问客户的报价，您可以这样做：

```
$quote = Mage::getSingleton('checkout/session');
$quote->addProduct($product, $qty);

$quote->collectTotals()->save(); 
```

# svg - 使用 SVG 曲线模拟圆角

> ID：13709413
> 
> 赞同：2
> 
> 时间：2012-12-04T18:22:40.700
> 
> 标签：svg, raphael, rounded-corners

我在拉斐尔中以 SVG 路径表示法绘制了一系列向后的“L”形——只是一组数据点，每个数据点由一条水平线表示，然后是一条垂直线，长度不一。

```
<div id="canvas"></div>​
<script>
    var data = [
        [{x: 32, y: 207}, {x: 50, y: 371}],
        [{x: 34, y: 209}, {x: 39, y: 34}],
        [{x: 32, y: 216}, {x: 58, y: 38}],
        [{x: 70, y: 221}, {x: 93, y: 40}],
        [{x: 89, y: 223}, {x: 105, y: 41}],
        [{x: 113, y: 225}, {x: 150, y: 42}],
        [{x: 132, y: 228}, {x: 173, y: 43}],
        [{x: 305, y: 230}, {x: 354, y: 45}]
    ],
        paper = Raphael("canvas", 400, 300),
        path;

    for (var c = 0; c < data.length; c += 1) {
        path = "M" + data[c][0].x + "," + data[c][0].y;
        path += "H" + data[c][1].x;
        path += "V" + data[c][2].y;
        paper.path(path).attr({"stroke": "#900", "stroke-width": 2})
    }
</script> 
```

[jsFiddle](http://jsfiddle.net/chriswilsondc/jYGrq/1/)

我想给这些形状半径为 5 左右的圆角。我是否必须手动将水平线绘制到距离其目的地 5px 处，编程一条向上 PI/2 弧度的曲线，然后绘制其余的垂直线？

我希望有一种方法可以用一条小半径的 SVG 曲线来做到这一点，这样形状就会一直直线前进，直到它结束前不久然后向上弯曲——这正是 Raphael 中圆角矩形的行为或CSS3。

我已经检查了[SVG 路径指南](http://www.w3.org/TR/SVG/paths.html#PathDataCurveCommands)，但在处理细节时遇到了困难。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:26:02.003

这应该可以解决问题（至少在示例中）：

[http://jsfiddle.net/jYGrq/3/](http://jsfiddle.net/jYGrq/3/)

改变这个

```
path += "H" + (data[c][1].x) 
```

对此： `path += "H" + (data[c][1].x-5)`;

并在其后添加这些行：

```
if (data[c][0].y > data[c][1].y) path += "s 5 0 5 -5";
else if (data[c][0].y < data[c][1].y) path += "s 5 0 5 5"; 
```

这涵盖了示例中的所有情况，但是如果您想在不考虑方向的情况下圆角，请制作更多 ifs。希望这有所帮助。

顺便说一句，我假设速记相对三次（s）是最适合您的情况的曲线类型。

# javascript - 如何从用户与之交互的表单的输入值创建 Javascript 警报？

> ID：13709414
> 
> 赞同：1
> 
> 时间：2012-12-04T18:22:39.987
> 
> 标签：javascript, jquery, this, alert

我想从每个表单中的特定输入值创建动态警报。我在一个页面上有很多表格。每个警报都需要略有不同。我正在使用其中两个表单输入值来生成自定义消息。`<input type="hidden" name="on0" value="Size">`& `<input type="hidden" name="on1" value="Color">`. 我的警报适用于页面上的第一个表单，但在第二个表单之后，我的警报与该表单的选定输入值不匹配。如何在用户与之交互的表单中定位这些输入值的特定实例？

这是我的代码的简化版本，仅显示两种形式： [example on - jsfiddle](http://jsfiddle.net/rdesigns/7YJ63/4/)

```
<form method="post" class="list1">
<input type="hidden" name="on0" value="Size">
<select name="os0">
<option value="">-- Choose a Size --</option>
<option value="Short">Short</option>
<option value=" Medium">Medium</option>
<option value=" Long">Long</option>                             
</select>
<input type="hidden" name="on1" value="Color">
<select name="os1">
<option value="">
-- Choose a Color --
</option>
<option value="ivory">ivory</option> <option value=" black"> black</option> 
</select> 
<input type="button" value="Add to Cart" class="catalog">                    
</form>
<!-- seconed form start --> 
<hr />
<form method="post" class="list2">
<input type="hidden" name="on0" value="Option">
<select name="os0">
<option value="">-- Choose a Option --</option>
<option value="Option 1">Option 1</option>
<option value="Option 2">Option 2</option>
<option value="Option 3">Option 3</option>                             
</select>
<input type="hidden" name="on1" value="Accent Color">
<select name="os1">
<option value="">
-- Choose a Choose a Accent Color --
</option>
<option value="red">Red</option>
<option value="yellow">yellow</option> 
<option value="orange">orange</option>   
</select> 
<input type="button" value="Add to Cart" class="catalog">                    
</form> 
```

​​还有我的js

```
$(document).ready(function(){

    var size_x = $("input[name='on0']").val();
    var color_x = $("input[name='on1']").val();

    function popWarning() {
        if ($("select[name='os0']").val() === "") {
            alert('Please choose a ' + size_x);
            return false;
        }   
        if ($("select[name='os1']").val() === "") {
            alert('Please choose a ' + color_x);
            return false;
        }
    }
    $("input.catalog").click(function() {
        popWarning();
    });​
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:30:41.593

引用表单并将其用作上下文。

```
function popWarning(form) {

    var size_x = form.find("input[name='on0']").val();
    var color_x = form.find("input[name='on1']").val();
    var size = form.find("input[name='os0']").val();
    var color = form.find("input[name='os1']").val();

    if (size  === "") {
        alert('Please choose a ' + size_x);
        return false;
    }

    if (color === "") {
        alert('Please choose a ' + color_x);
        return false;
    }
}
$("input.catalog").click(function() {
    popWarning( $(this.form) );
});​ 
```

让我们传入对按钮的引用，因为这似乎是断点。

```
function popWarning(button) {

    var form = button.get(0).form;
    var size_x = form.find("input[name='on0']").val();
    var color_x = form.find("input[name='on1']").val();
    var size = form.find("input[name='os0']").val();
    var color = form.find("input[name='os1']").val();

    if (size  === "") {
        alert('Please choose a ' + size_x);
        return false;
    }

    if (color === "") {
        alert('Please choose a ' + color_x);
        return false;
    }
}
$("input.catalog").click(function() {
    popWarning( $(this) );
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:28:40.140

您有两个带有名称的选择`os0`和两个带有名称的选择`os1`。那是你问题的根源。

一旦第`if`一个表单完成，语句就不会通过，因为具有名称的第一个 DOM 元素`os0`已经完成。将名称更改为`os2`或类似的名称并执行独特的`if`条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:30:36.643

您如何期望脚本知道`name`您正在谈论的表单（以及具有相同属性的元素）而不指定它？尝试这样的事情：

```
$(document).ready(function(){
    function popWarning(obj) {
        var $form = $(obj).closest("form");
        var size_x = $form.find("input[name='on0']").val();
        var color_x = $form.find("input[name='on1']").val();
        var sel_os0 = $form.find("select[name='os0']");
        var sel_os1 = $form.find("select[name='os1']");
        if (sel_os0.val() === "") {
            alert('Please choose a ' + size_x);
            return false;
        }   
        if (sel_os1.val() === "") {
            alert('Please choose a ' + color_x);
            return false;
        }
    }
    $("input.catalog").click(function() {
        popWarning(this);
    });
}); 
```

工作示例：

[http://jsfiddle.net/7YJ63/6/](http://jsfiddle.net/7YJ63/6/)

这样，就可以通过单击（通过）从触发它`popWarning`的父表单中获取父表单。然后，找到所有元素/值，因为您知道要查找的元素是表单的后代。`input.catalog``obj``this``find`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:32:24.713

> 我的警报适用于页面上的第一个表单，但在第二个表单之后，我的警报与该表单的选定输入值不匹配。

这不是问题，真的。试试你的 JSFiddle，选择一个尺寸，然后单击颜色“添加到购物车”按钮。您将看到正确的消息。问题是您的点击处理程序说“如果大小为空，则说大小，否则如果颜色为空，则说颜色”。

我会重写您的`click`事件侦听器并按其形式限定它，例如：

```
$('#sizeForm input.catalog').click(function(){
    var form = $(this).parents('form');
    ...
}); 
```

...ETC。这应该可以很容易地确定单击了哪个表单。或者可能更简单：

```
<input class="catalog size" ... />

$('input.catalog.size').click(function(){popWarning('size');}); 
```

...这可能会更加流畅/动态，以便您可以在单个处理程序中处理所有表单...但这可能是对您问题性质的答案的过度杀伤。

反正。祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:32:40.747

`this`我认为如果您使用关键字来迭代带有 JQuery 的选择列表，您可以更加坚持 DRY 和优雅`each()`。这些方面的东西：

```
 $("input.catalog").click(function() {
      form = $(this).parent();
    select = form.find("select");
      message = '';
      select.each(
          function(){
              if ($(this).val()=='') {
          number = $(this).attr("name").substr(-1);
          message+= $("input[name=on" + number + "]").val() + " ";
            }
          }
      );
      if (message!='') {
      console.log("Please select the following: " + message);
          return false;
      }
});​ 
```

# c# - 将 GeocodeQuery 与加拿大邮政编码结合使用

> ID：13709416
> 
> 赞同：3
> 
> 时间：2012-12-04T18:22:47.053
> 
> 标签：c#, geocoding, windows-phone, windows-phone-8

我在使用 Windows Phone 8 地理编码时遇到问题。使用[Microsoft.Phone.Maps.Services.QuerycodeQuery](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj208581%28v=vs.105%29.aspx)，如果我使用完整的加拿大邮政编码 (M5G 1Z4)，我不会得到任何结果。如果我只使用前 3 个字符（M5G），我会得到预期的结果。

我没有对数据做任何具体的事情，只是将其传递给 Microsoft 进行地理编码。这背后是否有特定原因，或者是否有另一种查找位置的方法？

代码：

```
Geocode = new GeocodeQuery()
    {
        SearchTerm = LocationString,
        GeoCoordinate = UserCoordinates ?? new GeoCoordinate(),
        MaxResultCount = 1
    };

Geocode.QueryCompleted += GetStringLocation_QueryCompleted;
Geocode.QueryCompleted += CleanupGeocode;
Geocode.QueryAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:22:47.053

虽然这并没有解决地图服务地理编码功能中似乎存在的限制，但它是一个对我有用的解决方法......

当`GetStringLocation_QueryCompleted`函数返回 0 结果时，我运行一个正则表达式来检查搜索是否是有效的邮政编码。如果是一个，那么我抓取前 3 个字符并重新运行地理编码。

使用这种方法要确保的一件事是，在调用辅助处置函数时检查以确保地理编码未运行 (IsBusy)（如果您在单独的函数中执行此操作）

**正则表达式（Utility.IsPostalCode）**：

```
Regex reg = new Regex("^[ABCEGHJ-NPRSTVXY]{1}[0-9]{1}[ABCEGHJ-NPRSTV-Z]{1}[ ]?[0-9]{1}[ABCEGHJ-NPRSTV-Z]{1}[0-9]{1}$",
    RegexOptions.IgnoreCase | RegexOptions.Compiled);

return reg.IsMatch(Input); 
```

**在 GetStringLocation_QueryCompleted 内**

```
if (e.Result.Count == 0 && Utility.IsPostalCode(((GeocodeQuery)e.UserState).SearchTerm))
{
    if (Geocode != null && Geocode.IsBusy)
        Geocode.CancelAsync();

    GetStringLocation(((GeocodeQuery)e.UserState).SearchTerm.Substring(0, 3));
} 
```

`GetStringLocation`将是包含问题中接受字符串的代码的函数。

# ios6 - 为可变大小的 UICollectionViewCells 提供更好的单元格包装？

> ID：13709417
> 
> 赞同：1
> 
> 时间：2012-12-04T18:22:47.647
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我创建了一个 UICollectionView 并且想知道是否有更好的方法来为视图中的单个单元格创建紧密包装。现在，如果一列中有一个较大的单元格，则该列中的其余单元格将居中，如下所示：

![在此处输入图像描述](../Images/a46af3009def27dcc6dd276557064863.png)

是否有可能实现这样的目标？：

![在此处输入图像描述](../Images/016a18ffb7d3f87da774efecc429c31a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:56:15.677

这是可能的，但不会使用默认布局。您需要编写一个自定义布局子类。

# c - c: valgrind“条件跳转或移动取决于未初始化的值”

> ID：13709419
> 
> 赞同：0
> 
> 时间：2012-12-04T18:22:52.820
> 
> 标签：c, valgrind

我在 valgrind 中遇到错误，不知道出了什么问题。错误是：valgrind 输出：

> ```
> ==1112== Conditional jump or move depends on uninitialised value(s)
> ==1112==    at 0x402BF0D: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so) 
> ```

它指出问题发生在第 226 行：

```
if(reallocate ==TRUE)
{
    char** temp_values = NULL;

    temp_values = (char**) realloc(theBoard->_values, theBoard->_size_r*sizeof(char*) );

    if(temp_values!=NULL)
    {
        theBoard->_values = temp_values;
    } else
    {
        reportError(MEM_OUT);
        return FALSE;
    }

    int i = 0;
    for (i=0; i<theBoard->_size_r; i++)
    {
        char* temp_values_c = NULL;
HERE( line 226)->   temp_values_c = realloc(theBoard->_values[i], theBoard->_size_c*sizeof(char) );

        if(temp_values_c != NULL)
        {
            theBoard->_values[i] = temp_values_c;
        } else
        {
            reportError(MEM_OUT);
            return FALSE;
        }
    }

    // initialize extra memory
    if(row_out_bound)
    {
        init(theBoard,prev_size_r,0);
    }

    if(col_out_bound)
    {
        init(theBoard,0, prev_size_c);
    }

} 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T18:25:09.017

问题`theBoard->_values[i]`未初始化，因为它直接来自`realloc`( `temp_values = ...`)。

### 编辑

> 你能详细说明一下吗？

我以为你永远不会问。该函数`realloc`返回一块指定大小的内存，但**不保证其内容**。因此，出于所有实际目的，您应该假设任何`realloc`返回的东西都包含垃圾。在您的代码中，您使用该（潜在的）垃圾并在线`226`告诉 realloc：

*这是一个完全有效的指针。它是`NULL`或者我之前从`malloc`. 你能把它重新分配到这个大小吗？*这不是真的！包含的实际值`theBoard->_values[i]`可以是任何东西。

你想要的是一个循环`theBoard->_values[i] = NULL`，或者可能使用`malloc`而不是`realloc`第 226 行。

# file-upload - 一旦达到 multipartFormData maxlength，Play framework 2.04 浏览器请求就会挂起。如何解决？

> ID：13709432
> 
> 赞同：0
> 
> 时间：2012-12-04T18:23:55.103
> 
> 标签：file-upload, playframework

我的服务器端代码如下（只是为了测试它）：

```
def upload = Action(parse.maxLength(maxLength = 10*1024, parser.multipartFormData)) {
    implicit request =>
      Logger.info("data: " + request.body.dataParts)
      Logger.info("file: " + request.body.file("picture"))
      Logger.info("req: " + request.contentType)
      Logger.info("req body: " + request.body)
      Ok("File has been uploaded")
} 
```

我的客户端代码是一个简单的表单，具有文件类型的输入。

```
 @helper.form(action = routes.Application.upload, 'enctype -> "multipart/form-data") {
    <p>
      <input type="text" name="name" />
    </p>
    <p>
      <input id="imageFile" type="file" name="picture" accept="image/*" />
    </p>
    <p>
      <input type="submit" value="Save" />
    </p>
  } 
```

问题是，如果您尝试上传大于 10KB 的文件，浏览器将挂起等待服务器完成，即使服务器似乎已经完成了对请求的处理。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:23:55.103

不幸的是，在 Play 2.0.4 中似乎存在与此相关的问题，即使请求正文已在服务器端消耗，浏览器也会挂起等待文件完成上传。可以在[此处](https://groups.google.com/forum/?fromgroups=#!msg/play-framework/hDHfuMtCoAU/aGEtubrbLmwJ)找到有关该问题的讨论，并在此处报告[（如果达到 maxlength，则播放不会完成消费请求）](https://play.lighthouseapp.com/projects/82401/tickets/802-play-doesnt-finish-consuming-request-if-maxlength-defined-causing-browser-hang)。

幸运的是，这已经在 Play 2.1 中得到解决，并且第[一个候选版本已经可用](http://www.playframework.org/)。因此，最好的办法是将您的应用迁移到 Play 2.1。

# batch-file - 在 FOR 循环中使用参数时如何转义百分比 (%)？

> ID：13709434
> 
> 赞同：12
> 
> 时间：2012-12-04T18:23:59.233
> 
> 标签：batch-file

dos 批处理文件中通常的转义字符是插入符号，`^`. 但是对于百分比，`%`变量的分隔符，转义是加倍百分比：`%%cd%%`。在循环中使用[参数扩展时情况会发生变化。](http://ss64.com/nt/syntax-args.html)`for`它不是像在循环外那样`%%~dpnx0`发出`%~dpnx0`，而是执行替换，发出`D:\Scripts\foo.py`。

这是一个批处理文件演示：

```
@echo off
echo This is a pipe: ^|
echo Use this var for the current directory: %%cd%%
echo Use this to echo full path of running batch file: %%~dpnx0

for %%a in (foo.py baz.py) do (
  echo @python %%~dpnxa ^> %%~na.bat
  ) 
```

这些是我得到的结果：

```
This is a pipe: |
Use this var for the current directory: %cd%
Use this to echo full path of running batch file: %~dpnx0
@python d:\Scripts\foo.py > foo.bat
@python d:\Scripts\baz.py > baz.bat 
```

但这就是我想要的：

```
This is a pipe: |
Use this var for the current directory: %cd%
Use this to echo full path of running batch file: %~dpnx0
@python %~dpnxa > foo.bat
@python %~dpnxa > baz.bat 
```

我尝试过将百分比加倍、三倍和四倍，以及在整个过程中穿插插入符号，但均未成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T19:46:17.427

阻止 FOR 变量表达式的扩展是不可能的。如果 FOR 在定义变量 X 的情况下生效，则 FOR 扩展阶段将始终扩展`%X`。

但是您可以将百分比隐藏在另一个 FOR 变量后面:)

以下给出了您正在寻找的结果：

```
@echo off
echo This is a pipe: ^|
echo Use this var for the current directory: %%cd%%
echo Use this to echo full path of running batch file: %%~dpnx0

for %%P in (%%) do for %%A in (foo.py baz.py) do (
  echo @python %%P~dpnxA ^> %%~nA.bat
) 
```

FOR 变量具有全局范围（尽管它们只能在 DO 子句中访问）。这可能会导致一个潜在的问题。任何时候，只要您有一个在 FOR 循环中使用百分比文字的子例程，您就会面临意外结果的风险！在 CALL 之前发出的 FOR 语句会影响 CALL 例程中 FOR DO 子句的结果。

```
@echo off
for %%) in (Yikes!) do call :test
exit /b

:test
echo This works outside loop (confidence = 100%%)
for %%A in (1) do echo This does not work inside loop (confidence = 100%%)
for %%P in (%%) do for %%A in (1) do echo This works inside loop (confidence = 100%%P)
exit /b 
```

这是输出

```
This works outside loop (confidence = 100%)
This does not work inside loop (confidence = 100Yikes
This works inside loop (confidence = 100%) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T21:54:58.863

您可以使用延迟扩展或呼叫百分比扩展，或者像 dbenham 显示扩展另一个 FOR 变量。

```
setlocal EnableDelayedExpansion
set percent=%%
set "line=%%~dpnxa ^>"
for %%a in (foo.py baz.py) do (
  echo @python !percent!~dpnxa ^> %%~na.bat
  call echo @python %%line%% %%~nxa.bat
) 
```

# jquery - 自定义函数初始化中对自身的 jQuery 引用

> ID：13709436
> 
> 赞同：0
> 
> 时间：2012-12-04T18:24:26.037
> 
> 标签：jquery, function, reference, this, self

另一个挑战 - 这更多是为了让代码看起来更干净，而不是“我该怎么做”。这是想法。

```
<section id="projector" data-start-at="7">....</section> 
```

在 JS 中

```
$('#projector').projector_slider({'startFrom' : parseInt( REF TO DATA-START-AT )}); 
```

我在 HTML 元素上调用自定义函数。简单的。该函数有一个名为“startFrom”的选项，由 INT 指示。INT 存储在附加到 HTML 元素的属性中。我想要的是不必`$('#projector')`再次在 DOM 中查找。

有没有一种方法可以在函数调用中获得对投影仪的引用——比如`$(this).attr('data-start-at)`？

Obv 我可以通过再次查找元素并直接访问它来解决这个问题，我提出这个问题是希望在清理我的 JS 时学习一个新的“this”参考技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:29:11.800

不，你不能。您应该保存`$('#projector')`在 var 中并使用它：

```
var projector = $('#projector');

projector.projector_slider({
    startFrom: parseInt(projector.data('start-at')),
}); 
```

请注意，我使用 [ `.data()`][data] 而不是`.attr('data-*')`. 该`data()`函数由 jQuery 创建，是一种与`data-*`属性交互的智能方式。例如，如果您拥有`data-first=true`并使用`.data('first')`，您将获得一个布尔值“真”，如果您拥有`data-children="['foo', 'bar']"`，您将获得一个对象，如果您使用`.data('children')`.

# inheritance - 在 Symfony2 中覆盖捆绑包

> ID：13709445
> 
> 赞同：1
> 
> 时间：2012-12-04T18:24:58.800
> 
> 标签：inheritance, symfony, bundle

我正在为我的登录页面使用 FOSUserBundle。我覆盖了它的模板、控制器、路由……使用这里描述的 getParent() 方法[http://symfony.com/doc/2.0/cookbook/bundles/override.html](http://symfony.com/doc/2.0/cookbook/bundles/override.html)

现在我想要 2 个不同的登录页面，使用不同的控制器、模板和路由。正如您在文档中看到的那样，每个捆绑包只能有一个父级，那么制作捆绑包的 2 个衍生品的最佳方法是什么？

谢谢

# java - 如何比较两个枚举？

> ID：13709454
> 
> 赞同：0
> 
> 时间：2012-12-04T18:25:21.400
> 
> 标签：java, enums

我有一个名为 PawnColor 的枚举，它只包含以下内容：

```
public enum PawnColor {
    black, white, none, illegal
} 
```

如果我有以下方法，如何检查当前 PawnColor 实例的颜色？

```
public double ratePosition (PawnColor ratingFor)  {
    // ...
} 
```

所以如果`ratingFor`有颜色：`illegal`，我怎么能去检查呢？我以前从未使用过枚举，我无力地尝试这样做：

```
if(ratingFor.equals(illegal)) {
    System.out.println("Something has gone wrong.");
} 
```

它显然不起作用，当 PawnColor ratingFor 非法时，我如何确保收到错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:26:34.710

我在本地对此进行了测试，并正确打印了错误消息。

```
PawnColor ratingFor = PawnColor.illegal;
if(ratingFor == PawnColor.illegal)
{
    System.out.println("Something has gone wrong.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:27:15.547

它应该是：

```
if (ratingFor == illegal) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:53:30.613

```
if(ratingFor.equals(illegal)) {
    System.out.println("Something has gone wrong.");
} 
```

这里不能引用“非法”，ratingFor 只能比作PawnColor.class 类型。

```
ratingFor == PawnColor.illegal 
```

或者

```
ratingFor.equals(PawnColor.illegal) 
```

会给你想要的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:31:00.620

对于枚举常量，equals 和 == 表示相同的内容，并且可以**互换使用**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:27:44.470

您需要引用`illegal`为`PawnColor.illegal`.

只需`==`用作：

```
 if(ratingFor == PawnColor.illegal) 
```

您还可以`equals`用作：

```
 if(PawnColor.illegal.equals(ratingFor)) 
```

# c# - 创建表时创建具有特定名称的主键

> ID：13709455
> 
> 赞同：-4
> 
> 时间：2012-12-04T18:25:24.117
> 
> 标签：c#, sql, sql-server, database

创建表本身时如何创建具有特定名称的主键。

我想知道我们是否可以创建主键作为表名的一部分，同时也给它一个名字。尽管对于所有有经验的开发人员来说这看起来很正常，但对许多人来说仍然会感到困惑。

我究竟做错了什么？

`CREATE TABLE [dbo].[TestTable]( [ID] [int] IDENTITY(1,1) NOT NULL, [FirstName] [varchar](100) NULL) GO ALTER TABLE [dbo].[TestTable] ADD CONSTRAINT [PK_TestTable] PRIMARY KEY CLUSTERED ([ID] ASC) GO`

谢谢，马亨德拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:33:30.713

`foreach`枚举任何实现`IEnumerable`、`IEnumerable<T>`、`IEnumerator`或`IEnumerator<T>`的对象（或实际上任何其类实现兼容`Current`属性和`MoveNext()`方法的对象）。的语法`foreach`是：

```
foreach (type variable in enumerable) { ... } 
```

`type`是新`variable`变量的类型。（如果您已经有一个现有的变量要使用，则省略类型。）

循环体将为可枚举中的每个对象执行，迭代变量（此处`variable`）将包含每次迭代的对象。

`for`更通用，并遵循以下模式：

```
for (initial-statements; loop-condition; post-iteration-actions) {
    body
} 
```

这几乎完全等同于：

```
initial-statements
while (loop-condition) {
    body
    post-iteration-actions
} 
```

`for`在处理数组时，您可能会看到一个循环，例如：

```
for (int index = 0; index < array.Length; index++) {
    Console.WriteLine(array[index]);
} 
```

这与以下内容相同：

```
{
    int index = 0;
    while (index < array.Length) {
        Console.WriteLine(array[index]);
        index++;
    }
} 
```

（请注意，`foreach`编译器对使用 over 数组进行了优化，以使用类似的基于索引的迭代，因为这样更快。因此，在枚举数组时，所有三种方法都应该具有等效的性能和运行时语义。）

* * *

更多信息，如果你想要的话：

`foreach`实际上只是语法糖，可以很容易地翻译成`while`循环。

```
foreach (object x in y) {
    Console.WriteLine(x);
} 
```

这实际上意味着：

```
var enumerator = y.GetEnumerator();
try {
    object x; // See footnote 1
    while (enumerator.MoveNext()) {
        x = enumerator.Current;
        Console.WriteLine(x);
    }
} finally {
    ((IDisposable)enumerator).Dispose();
} 
```

除了`enumerator`变量没有名称并且对您隐藏。

存在的原因很明显`foreach`。你今天在任何地方使用它，否则你将不得不编写这个非常冗长的样板代码。 `foreach`为您处理所有事情——获取枚举器，`MoveNext()`在每次迭代中进行测试，提取枚举器的当前值，并在迭代完成后处理枚举器。

¹这个变量实际上[是在循环内部进行语义声明的，从 C# 5 开始](https://stackoverflow.com/a/8899347/501250)。此示例适用于 C# 4 和更早版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:27:29.790

`foreach`用于在集合之上进行遍历，而`for`可以用于任何相同目的的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:05:01.183

Foreach 使用迭代器，for 使用索引

所以

```
foreach(var item in myCollection)
{
   Console.WriteLine(item);
} 
```

相对

```
for(int i = 0; i< myCollection.Count; i++)
{
    Console.WriteLine(myCollection[i]);
} 
```

因此，如果这些是名为 PrintContent 的函数的核心，那么将采用实现 IEnumerable 的任何内容，而另一个参数必须具有 count 属性并实现整数类型的索引器。当您将排序和过滤器混入其中时，它变得更不有趣了，这都是关于抽象的，PrintContent 不需要知道 myCollection 是如何实现的，只是 myCollection 实现了 IEnumerable。

# c# - 无法打开 .xsn 文件

> ID：13709459
> 
> 赞同：1
> 
> 时间：2012-12-04T18:25:32.577
> 
> 标签：c#, asp.net, sharepoint, infopath

当我尝试打开附件 .xsn 文件时收到以下错误消息。

“Infopath 无法创建新的空白表单。该文件不是有效的 XML 文件。”

我用过

```
Response.ContentType = "application/x-microsoft-InfoPathFormTemplate";
Response.AppendHeader("Content-Disposition", string.Format("attachment; filename=filenam1.xsn"); 
```

你能告诉我这里有什么问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:34:46.337

这就是问题所在。

当您使用 IE（在我的情况下为 IE 10）时，该文件从未真正下载过。相反，IE 将 InfoPath 作为子进程生成，提供主机页面的 URL 作为参数。

![在此处输入图像描述](../Images/cbcfe819acf80ad05c530966c90f62c5.png)

因为您使用的是 Response.TransmitFile（或类似文件），所以主机页面的 URL 将与表单模板的 URL 不匹配。您收到无效的 xml 错误，因为 InfoPath 正在尝试将网页的 HTML 解析为表单模板。

![InfoPath 很糟糕](../Images/322d27990640415e693ee2ea24a4ab88.png)

[从 IE 的角度来看，您对此无能为力](http://social.msdn.microsoft.com/forums/en-us/iewebdevelopment/thread/751F4958-2A97-4911-9718-CE2FDF1407AB)。从链接：

> 3) 在 IE 中，决定如何显示内容的方法取决于 mime 类型、文件的第一个字节、扩展名和注册表设置。如果您的内容看起来像 HTML，那就是它的显示方式。
> 
> 5）这个问题没有已知的解决方法，所以你必须忍受它。
> 
> 6) Content-Disposition 对问题没有影响。

如果可能的话，我的建议是通过 HTTP 处理程序或其他机制向表单模板公开一个实际的 URL，除非这里有人知道更好的解决方案。

# jquery - 双页展开循环幻灯片

> ID：13709467
> 
> 赞同：2
> 
> 时间：2012-12-04T18:26:06.777
> 
> 标签：jquery, wordpress, slideshow, jquery-cycle

以下代码是 wordpress 幻灯片 jQuery 脚本的一部分。其目的是在幻灯片中实现特定逻辑，其中所有垂直图像都成对显示（如杂志的双页）。

```
function initSlideShow() {

//some stuff to append images in $hidden_ic (temp image container far far away - not hidden so the script can measure their dimensions)

//Step 3\. Loop and transform
$hidden_ic.find('img').each(function(i, o){
var $img = $(this),
h = $img.height(), //current image height
w = $img.width(), //current image width
v = (h > w ? true : false), //current image vertical flag
nv = null, //next image vertical flag
$prev = $hidden_ic.find('img:eq(' + (i - 1) + ')'), //next image object
$next = $hidden_ic.find('img:eq(' + (i + 1) + ')'); //prev image object

if(typeof($img.attr('data-or')) === 'undefined' || $img.attr('data-or') === false)
{
//Save orientation
$img.attr('data-or', (v ? 1 : 0));

//Create new slide
var $slide = $('<div class="slide" />');

//Append a clone of current image
$slide.append($img.clone());

//If its not last
if($next.size()>0)
{
var nh = $next.height(), //next image height
nw = $next.width(), //next image height
nv = (nh>nw ? true : false); //next image vertical flag

if(v && nv) //if current and next one are both vertical
{
$next.attr('data-or', (nv ? 1 : 0)); //Save orientation
$next.addClass('right'); //Apply right floating

$slide.append($next.clone()); //Append a clone of the next image to the same slide
$slide.find('img').first().addClass('left');
}

if(v && !nv) //if current vertical and next one horizontal
{
$slide.find('img').first().addClass('left');
}

}

$main_ic.append($slide); //Append slide to main container
}
}); 
```

创建 's后，`$slide`我将它们传递给 jQuery Cycle 以创建幻灯片。

我的问题是我找不到寻呼机显示双页幻灯片的两个图像的方法（它只显示第一个 img）。这是我的循环代码：

```
$main_ic.cycle({
        fx:     'fade', 
        speed:   300, 
        timeout: 0, 
        next:   '.nextnav', 
        prev:   '.prevnav', 
        pause:   1,
        pager: '#pager',
        after: onAfter,
        pagerAnchorBuilder: function(idx, slide) { 
            return '<a href="#"><img src="' + jQuery(slide).find('img').first().attr('src') + '" height="100" /></a>';
                } 
}).fadeIn('slow'); 
```

我真的很感激任何帮助。谢谢你的时间。

# ruby - Rspec：避免消息期望的不同步问题

> ID：13709472
> 
> 赞同：1
> 
> 时间：2012-12-04T18:26:22.750
> 
> 标签：ruby, rspec, mocking

消息期望允许您检查被测对象是否正在发送正确的消息，但不能检查目标对象是否可以实际响应此调用。另一方面，集成测试检查一切是否实际工作，即调用是否正确进行、理解和执行。

是否有中间立场，例如检查被测对象是否发送正确的消息**以及**接收对象是否可以响应这些消息？这将确保在接收对象更改时测试中断，而无需运行完整的集成测试。在本质上：

```
target.should_receive(:my_method) && target.should respond_to(:my_method) 
```

使用自定义匹配器，例如

```
target.should_get_message(:my_method) 
```

这对于我认为只协调不同动作的粘合类可能很有用。

您对此有何看法？这是一种可行的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:35:38.127

Checkout [rspec-fire](https://github.com/xaviershay/rspec-fire)它解决了这个确切的问题。我一直在很多项目中使用它。

# knockout.js - 自定义 ko.mapping.toJS 的输出

> ID：13709473
> 
> 赞同：1
> 
> 时间：2012-12-04T18:26:24.297
> 
> 标签：knockout.js, knockout-mapping-plugin

是否可以自定义 ko.mapping.toJS 的输出 Javascript？

IE-

只返回 observableArray 的一些 observable / 一些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:52:36.517

您在问是否可以自定义调用 .toJS 输出的 JS？

没有任何内置功能，但您当然可以自己修改输出的 JS 对象：

```
var myViewModel = ...;
var jsViewModel = ko.mapping.toJS(myViewModel);

// Customize the result
jsViewModel.Foo = "bar"; 
```

# python - Unicode编码错误

> ID：13709474
> 
> 赞同：0
> 
> 时间：2012-12-04T18:26:26.710
> 
> 标签：python

我正在使用`xlrd`和`cx_freeze`。

现在，当我尝试从 excel 文件中读取数据时，它会在“，”标记处显示错误：

```
UnicodeEncodeError: 'charmap' codec can't encode character "\u2019" in position 12: character maps to <undefined> 
```

* * *

```
from xlrd3 import *
book= open_workbook('s1.xls')
sheet=book.sheet_by_index(0)
import sys
from encodings import *
from codecs import *
def pr():
    global row,col
    if isinstance((sheet.cell(row,col).value), float):
        cell = sheet.cell(row,col)
        cell_value = cell.value
        cell_value1= int(cell.value)
        s=[]
        s.append(cell_value1)
        print (s)
        s=[]
    else:
        cell = sheet.cell(row,col)
        cell_value = cell.value
        s=[]
        s.append(cell_value)
        print (s)
        s=[]

def co():
    x=input("'S'earch again or 'Q'uite?: ")
    if x == 'S' or x=='s':
        search()
    elif x == 'Q'or x == 'q':
        sys.exit(0)
    else:
        print ('Please enter a Vailed answer: ')
        co()

def search():
    global row,col
    s=[]
    a=(input("Enter Search : "))
    for row in range(sheet.nrows):
        for col in range(sheet.ncols):
            s.append(str(sheet.cell(row,col).value))
            if a in (str(sheet.cell(row,col).value)):
                for col in range(sheet.ncols):
                    pr()    
            else:
                s=[]
    co()

search() 
```

这是代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:01:00.030

您没有显示错误来自哪一行代码。完整的回溯比仅显示错误消息提供的信息要多得多。

当你有一个 Unicode 字符串并且你将它传递给支持未知编码方法的东西时，通常会出现 UnicodeEncodeError（注意：不是你给这个线程命名的“UnicodeEncodingError”）。这里最有可能的情况是在您的印刷品中。追溯会告诉我们这是否是问题的根源。

问题是 Python 不知道如何将非 ASCII Unicode 字符打印到终端。在这种情况下，这是因为您有字符 '\u2019'，它是正确的单引号。（而不是“，”标记，它是一个逗号。）

您必须告诉它如何将 Unicode 编码为适合您终端的一组字节；具体来说，是一个 Windows 终端。这将您的问题减少到在[防止 Python 中的编码错误](https://stackoverflow.com/questions/11050292/prevent-encoding-errors-in-python)和您在此处搜索[错误消息时获得的几十个其他帖子中讨论的问题。](https://stackoverflow.com/search?q=codec%20can%27t%20encode%20character%20%22%5Cu2019%22%20in%20position%2012:%20character%20maps%20to%20%3Cundefined%3E)

由于您使用的是 Windows，因此请从“Prevent encoding errors in Python”链接中获取建议并执行以下操作：

```
print(s.encode('cp850', errors='replace')) 
```

# java - 如何在android 4中将日历事件添加到默认日历，无需Intent，静默？

> ID：13709477
> 
> 赞同：28
> 
> 时间：2012-12-04T18:26:51.913
> 
> 标签：java, android, android-calendar

我想在 android 4+ 中以编程方式（直接）添加日历事件。这可以在模拟器上测试吗？我没有安卓手机。一些示例代码将不胜感激。我阅读了 android 开发人员的日历提供程序，但我很困惑。如何将事件添加到用户的默认日历？我不需要同步。

编辑：我不想启动添加 Intent 的事件。相反，我想完全从代码中添加它们，而不是启动另一个活动。我需要能够在模拟器上测试事件将被添加到设备默认用户的主日历中。如何设置模拟器来查看用户的默认日历？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-27T14:15:09.637

[这](https://stackoverflow.com/questions/13652168/how-to-add-calendar-event-with-reminder-repeated-every-day-until-specific-day)是我最终做到的一个工作示例：

```
ContentResolver cr = ctx.getContentResolver();
ContentValues values = new ContentValues();

values.put(CalendarContract.Events.DTSTART, dtstart);
values.put(CalendarContract.Events.TITLE, title);
values.put(CalendarContract.Events.DESCRIPTION, comment);

TimeZone timeZone = TimeZone.getDefault();
values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());

// Default calendar
values.put(CalendarContract.Events.CALENDAR_ID, 1);

values.put(CalendarContract.Events.RRULE, "FREQ=DAILY;UNTIL="
        + dtUntill);
// Set Period for 1 Hour
values.put(CalendarContract.Events.DURATION, "+P1H");

values.put(CalendarContract.Events.HAS_ALARM, 1);

// Insert event to calendar
Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values); 
```

`dtuntil`在哪里

```
SimpleDateFormat yyyyMMdd = new SimpleDateFormat("yyyyMMdd");
Calendar dt = Calendar.getInstance();

// Where untilDate is a date instance of your choice, for example 30/01/2012
dt.setTime(untilDate);

// If you want the event until 30/01/2012, you must add one day from our day because UNTIL in RRule sets events before the last day
dt.add(Calendar.DATE, 1);
String dtUntill = yyyyMMdd.format(dt.getTime()); 
```

参考：[`Recurrence Rule`](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-04T18:34:25.207

我相信您正在寻找的部分是[使用意图插入事件](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert)。在本节中，它描述了如何为要添加的事件创建一个意图，然后模拟器上的默认日历程序将响应并添加它。您可能必须设置一个虚拟配置文件，以便日历程序在您确实希望看到它接收到正确信息时启动。

* * *

**来自[Android 开发网站](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert)的代码：**

```
Calendar beginTime = Calendar.getInstance();
beginTime.set(2012, 0, 19, 7, 30);
Calendar endTime = Calendar.getInstance();
endTime.set(2012, 0, 19, 8, 30);
Intent intent = new Intent(Intent.ACTION_INSERT)
    .setData(Events.CONTENT_URI)
    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())
    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())
    .putExtra(Events.TITLE, "Yoga")
    .putExtra(Events.DESCRIPTION, "Group class")
    .putExtra(Events.EVENT_LOCATION, "The gym")
    .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
    .putExtra(Intent.EXTRA_EMAIL, "rowan@example.com,trevor@example.com");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-04T06:31:18.297

**不要忘记向清单添加权限**

```
<uses-permission android:name="android.permission.READ_CALENDAR"/>
<uses-permission android:name="android.permission.WRITE_CALENDAR"/> 
```

**代码来自:-> [Android Dev Site](https://developer.android.com/guide/topics/providers/calendar-provider#add-event)**

```
long calID = 3; // Make sure to which calender you want to add event 
long startMillis = 0;
long endMillis = 0;
Calendar beginTime = Calendar.getInstance();
beginTime.set(2012, 9, 14, 7, 30);
startMillis = beginTime.getTimeInMillis();
Calendar endTime = Calendar.getInstance();
endTime.set(2012, 9, 14, 8, 45);
endMillis = endTime.getTimeInMillis();

ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startMillis);
values.put(Events.DTEND, endMillis);
values.put(Events.TITLE, "Hackathon");
values.put(Events.DESCRIPTION, "do some code");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());
Uri uri = cr.insert(Events.CONTENT_URI, values);

// get the event ID that is the last element in the Uri
long eventID = Long.parseLong(uri.getLastPathSegment()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-12T05:18:15.337

使用此代码，您可以以编程方式将事件添加到设备日历。我已经在 Marshmallow 中进行了测试，它对我来说效果很好。

```
private void addToDeviceCalendar(String startDate,String endDate, String title,String description, String location) {

        String stDate = startDate;
        String enDate = endDate;

        GregorianCalendar calDate = new GregorianCalendar();
        //GregorianCalendar calEndDate = new GregorianCalendar();

        SimpleDateFormat originalFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
        SimpleDateFormat targetFormat = new SimpleDateFormat("yyyy,MM,dd,HH,mm");
        Date date,edate;
        try {
            date = originalFormat.parse(startDate);
            stDate=targetFormat.format(date);

        } catch (ParseException ex) {}

        long startMillis = 0;
        long endMillis = 0;
        String dates[] = stDate.split(",");

        SD_YeaR = dates[0];
        SD_MontH = dates[1];
        SD_DaY = dates[2];
        SD_HouR = dates[3];
        SD_MinutE = dates[4];

        /*Log.e("YeaR ", SD_YeaR);
        Log.e("MontH ",SD_MontH );
        Log.e("DaY ", SD_DaY);
        Log.e(" HouR", SD_HouR);
        Log.e("MinutE ", SD_MinutE);*/

        calDate.set(Integer.parseInt(SD_YeaR), Integer.parseInt(SD_MontH)-1, Integer.parseInt(SD_DaY), Integer.parseInt(SD_HouR), Integer.parseInt(SD_MinutE));
        startMillis = calDate.getTimeInMillis();
/*
        try {
            edate = originalFormat.parse(endDate);
            enDate=targetFormat.format(edate);

        } catch (ParseException ex) {}

        String end_dates[] = endDate.split(",");

        String ED_YeaR = end_dates[0];
        String ED_MontH = end_dates[1];
        String ED_DaY = end_dates[2];

        String ED_HouR = end_dates[3];
        String ED_MinutE = end_dates[4];

        calEndDate.set(Integer.parseInt(ED_YeaR), Integer.parseInt(ED_MontH)-1, Integer.parseInt(ED_DaY), Integer.parseInt(ED_HouR), Integer.parseInt(ED_MinutE));
        endMillis = calEndDate.getTimeInMillis();*/

        try {
            ContentResolver cr = getActivity().getContentResolver();
            ContentValues values = new ContentValues();
            values.put(CalendarContract.Events.DTSTART, startMillis);
            values.put(CalendarContract.Events.DTEND, calDate.getTimeInMillis() + 60 * 60 * 1000);
            values.put(CalendarContract.Events.TITLE, title);
            values.put(CalendarContract.Events.DESCRIPTION, description);
            values.put(CalendarContract.Events.EVENT_LOCATION,location);
            values.put(CalendarContract.Events.HAS_ALARM,1);
            values.put(CalendarContract.Events.CALENDAR_ID, 1);
            values.put(CalendarContract.Events.EVENT_TIMEZONE, Calendar.getInstance()
                    .getTimeZone().getID());
            System.out.println(Calendar.getInstance().getTimeZone().getID());
            if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_CALENDAR) != PackageManager.PERMISSION_GRANTED) {

                return;
            }
            Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);

            long eventId = Long.parseLong(uri.getLastPathSegment());
            Log.d("Ketan_Event_Id", String.valueOf(eventId));

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-31T10:37:40.900

这是询问用户必须将事件添加到哪个日历的方法。因为我的要求是这样，并没有在一个地方找到解决方案。我已经总结并提出了这个解决方案，希望它可以帮助某人:)

```
final ContentResolver cr = this.getContentResolver();
        Cursor cursor ;
        if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
            cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), new String[]{ "_id", "calendar_displayName" }, null, null, null);
        else
            cursor = cr.query(Uri.parse("content://calendar/calendars"), new String[]{ "_id", "displayname" }, null, null, null);
        if (cursor != null && cursor.moveToFirst() ) {
            final String[] calNames = new String[cursor.getCount()];
            final int[] calIds = new int[cursor.getCount()];
            for (int i = 0; i < calNames.length; i++) {
                calIds[i] = cursor.getInt(0);
                calNames[i] = cursor.getString(1);
                cursor.moveToNext();
            }

            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            final long startDate = sdf.parse(slotData.getSlot_date() + " " + slotData.getSlot_from()).getTime();
            final long endDate = sdf.parse(slotData.getSlot_date() + " " + slotData.getSlot_to()).getTime();

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Select any one");
            builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    ContentValues cv = new ContentValues();
                    cv.put("calendar_id", calIds[which]);
                    cv.put("title", title);
                    cv.put("dtstart", startDate);
                    cv.put("hasAlarm", 1);
                    cv.put("dtend", endDate);
                    cv.put("eventTimezone", TimeZone.getDefault().getID());

                    Uri newEvent ;
                    if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                        newEvent = cr.insert(Uri.parse("content://com.android.calendar/events"), cv);
                    else
                        newEvent = cr.insert(Uri.parse("content://calendar/events"), cv);

                    if (newEvent != null) {
                        long id = Long.parseLong( newEvent.getLastPathSegment() );
                        ContentValues values = new ContentValues();
                        values.put( "event_id", id );
                        values.put( "method", 1 );
                        values.put( "minutes", 15 ); // 15 minutes
                        if (Integer.parseInt(Build.VERSION.SDK) >= 8 )
                            cr.insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                        else
                            cr.insert( Uri.parse( "content://calendar/reminders" ), values );

                    }
                    dialog.cancel();
                }

            });

            builder.create().show();
        }
        if (cursor != null) {
            cursor.close();
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-02T10:34:55.753

同意以上所有答案，但导入的是日历 ID。您不能使用 1，因为三星手机使用 1 作为他们的日历（S Planner）。所以日历 ID 是您想要事件的电子邮件的 ID。您可以通过以下特定事件的代码获取日历 ID

```
int calenderId=-1;
        String calenderEmaillAddress="xxx@gmail.com";
        String[] projection = new String[]{
                CalendarContract.Calendars._ID,
                CalendarContract.Calendars.ACCOUNT_NAME};
        ContentResolver cr = activity.getContentResolver();
        Cursor cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), projection,
                CalendarContract.Calendars.ACCOUNT_NAME + "=? and (" +
                        CalendarContract.Calendars.NAME + "=? or " +
                        CalendarContract.Calendars.CALENDAR_DISPLAY_NAME + "=?)",
                new String[]{calenderEmaillAddress, calenderEmaillAddress,
                        calenderEmaillAddress}, null);

        if (cursor.moveToFirst()) {

            if (cursor.getString(1).equals(calenderEmaillAddress))
                 calenderId=cursor.getInt(0); //youre calender id to be insered in above 2 answer

        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-18T14:34:26.680

在阅读了几篇文章并尝试了几次之后。我终于发现这种方法在 Android 8 和 10 上运行良好。

我的代码：

```
 public void addEventToCalendar() {
    Context myContext = getContext();
    String[] projection = {"_id", "calendar_displayName"};
    Cursor calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + " = 1 AND "  + CalendarContract.Calendars.IS_PRIMARY + "=1", null, CalendarContract.Calendars._ID + " ASC");
    if(calCursor.getCount() <= 0){
        calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + " = 1", null, CalendarContract.Calendars._ID + " ASC");
    }

    while (calCursor.moveToNext()) {
        long id = calCursor.getLong(calCursor.getColumnIndexOrThrow(CalendarContract.Calendars._ID));
        long startMillis;
        long endMillis;
        Calendar beginTime = Calendar.getInstance();
        beginTime.set(2021, 9, 22, 15, 30);
        startMillis = beginTime.getTimeInMillis();
        Calendar endTime = Calendar.getInstance();
        endTime.set(2021, 9, 22, 16, 45);
        endMillis = endTime.getTimeInMillis();

        ContentResolver cr = Objects.requireNonNull(getActivity()).getContentResolver();
        ContentValues values = new ContentValues();
        values.put(CalendarContract.Events.DTSTART, startMillis);
        values.put(CalendarContract.Events.DTEND, endMillis);
        values.put(CalendarContract.Events.TITLE, "My event");
        values.put(CalendarContract.Events.DESCRIPTION, "Nice description");
        values.put(CalendarContract.Events.CALENDAR_ID, id);
        Log.i("ID","my Id"+ id);
        values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());
        Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);

        long eventID = Long.parseLong(uri.getLastPathSegment());
    }

} 
```

我能够在不同的手机上进行测试，并且插入是在谷歌日历以及基本的安卓日历上完成的。

通常，此方法确保将事件插入设备上所有可用的日历中。我无法测试它，但我寄予厚望。

# javascript - 如何在 JavaScript 中读取文本文件

> ID：13709482
> 
> 赞同：59
> 
> 时间：2012-12-04T18:27:13.760
> 
> 标签：javascript, html, text

我正在尝试将文本文件加载到我的 JavaScript 文件中，然后从该文件中读取行以获取信息，我尝试了 FileReader，但它似乎不起作用。任何人都可以帮忙吗？

```
function analyze(){
   var f = new FileReader();

   f.onloadend = function(){
       console.log("success");
   }
   f.readAsText("cities.txt");
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-04T18:38:05.600

是的，使用 FileReader 是可能的，我已经做了一个例子，下面是代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Read File (via User Input selection)</title>
    <script type="text/javascript">
    var reader; //GLOBAL File Reader object for demo purpose only

    /**
     * Check for the various File API support.
     */
    function checkFileAPI() {
        if (window.File && window.FileReader && window.FileList && window.Blob) {
            reader = new FileReader();
            return true; 
        } else {
            alert('The File APIs are not fully supported by your browser. Fallback required.');
            return false;
        }
    }

    /**
     * read text input
     */
    function readText(filePath) {
        var output = ""; //placeholder for text output
        if(filePath.files && filePath.files[0]) {           
            reader.onload = function (e) {
                output = e.target.result;
                displayContents(output);
            };//end onload()
            reader.readAsText(filePath.files[0]);
        }//end if html5 filelist support
        else if(ActiveXObject && filePath) { //fallback to IE 6-8 support via ActiveX
            try {
                reader = new ActiveXObject("Scripting.FileSystemObject");
                var file = reader.OpenTextFile(filePath, 1); //ActiveX File Object
                output = file.ReadAll(); //text contents of file
                file.Close(); //close file "input stream"
                displayContents(output);
            } catch (e) {
                if (e.number == -2146827859) {
                    alert('Unable to access local files due to browser security settings. ' + 
                     'To overcome this, go to Tools->Internet Options->Security->Custom Level. ' + 
                     'Find the setting for "Initialize and script ActiveX controls not marked as safe" and change it to "Enable" or "Prompt"'); 
                }
            }       
        }
        else { //this is where you could fallback to Java Applet, Flash or similar
            return false;
        }       
        return true;
    }   

    /**
     * display content using a basic HTML replacement
     */
    function displayContents(txt) {
        var el = document.getElementById('main'); 
        el.innerHTML = txt; //display output in DOM
    }   
</script>
</head>
<body onload="checkFileAPI();">
    <div id="container">    
        <input type="file" onchange='readText(this)' />
        <br/>
        <hr/>   
        <h3>Contents of the Text file:</h3>
        <div id="main">
            ...
        </div>
    </div>
</body>
</html> 
```

也可以使用 ActiveX 对象做同样的事情来支持一些旧版本的 IE（我认为是 6-8），我有一些旧代码也可以做到这一点，但~~已经有一段时间了，所以我必须挖掘它~~我找到了一个类似于我在[Jacky Cui 的博客](http://jackycui.blogspot.ca/2011/06/read-and-write-local-files-in-ie.html)中使用的解决方案并编辑了这个答案（也稍微清理了代码）。希望能帮助到你。

最后，我刚刚阅读了一些其他让我脱颖而出的答案，但正如他们所建议的那样，您可能正在寻找可让您从 JavaScript 文件所在的服务器（或设备）加载文本文件的代码。如果是这种情况，那么您希望 AJAX 代码动态加载文档，如下所示：

```
<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>Read File (via AJAX)</title>
<script type="text/javascript">
var reader = new XMLHttpRequest() || new ActiveXObject('MSXML2.XMLHTTP');

function loadFile() {
    reader.open('get', 'test.txt', true); 
    reader.onreadystatechange = displayContents;
    reader.send(null);
}

function displayContents() {
    if(reader.readyState==4) {
        var el = document.getElementById('main');
        el.innerHTML = reader.responseText;
    }
}

</script>
</head>
<body>
<div id="container">
    <input type="button" value="test.txt"  onclick="loadFile()" />
    <div id="main">
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-03T16:05:19.747

这可以使用 javascript XMLHttpRequest() 类 (AJAX) 轻松完成：

```
function FileHelper()

{
    FileHelper.readStringFromFileAtPath = function(pathOfFileToReadFrom)
    {
        var request = new XMLHttpRequest();
        request.open("GET", pathOfFileToReadFrom, false);
        request.send(null);
        var returnValue = request.responseText;

        return returnValue;
    }
}

...

var text = FileHelper.readStringFromFileAtPath ( "mytext.txt" ); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-04T18:31:47.293

出于安全原因，Javascript 无法访问用户的文件系统。`FileReader`仅适用于用户手动选择的文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-19T11:15:20.753

我的例子

```
<html>

<head>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
</head>

<body>
  <script>
    function PreviewText() {
      var oFReader = new FileReader();
      oFReader.readAsDataURL(document.getElementById("uploadText").files[0]);
      oFReader.onload = function(oFREvent) {
        document.getElementById("uploadTextValue").value = oFREvent.target.result;
        document.getElementById("obj").data = oFREvent.target.result;
      };
    };
    jQuery(document).ready(function() {
      $('#viewSource').click(function() {
        var text = $('#uploadTextValue').val();
        alert(text);
        //here ajax
      });
    });
  </script>
  <object width="100%" height="400" data="" id="obj"></object>
  <div>
    <input type="hidden" id="uploadTextValue" name="uploadTextValue" value="" />
    <input id="uploadText" style="width:120px" type="file" size="10" onchange="PreviewText();" />
  </div>
  <a href="#" id="viewSource">Source file</a>
</body>

</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-10T15:07:52.830

（小提琴： [https](https://jsfiddle.net/ya3ya6/7hfkdnrg/2/) ://jsfiddle.net/ya3ya6/7hfkdnrg/2/ ）

1.  用法

html:

```
<textarea id='tbMain' ></textarea>
<a id='btnOpen' href='#' >Open</a> 
```

JS：

```
document.getElementById('btnOpen').onclick = function(){
    openFile(function(txt){
        document.getElementById('tbMain').value = txt; 
    });
} 
```

2.  Js 助手函数

```
function openFile(callBack){
  var element = document.createElement('input');
  element.setAttribute('type', "file");
  element.setAttribute('id', "btnOpenFile");
  element.onchange = function(){
      readText(this,callBack);
      document.body.removeChild(this);
      }

  element.style.display = 'none';
  document.body.appendChild(element);

  element.click();
}

function readText(filePath,callBack) {
    var reader;
    if (window.File && window.FileReader && window.FileList && window.Blob) {
        reader = new FileReader();
    } else {
        alert('The File APIs are not fully supported by your browser. Fallback required.');
        return false;
    }
    var output = ""; //placeholder for text output
    if(filePath.files && filePath.files[0]) {           
        reader.onload = function (e) {
            output = e.target.result;
            callBack(output);
        };//end onload()
        reader.readAsText(filePath.files[0]);
    }//end if html5 filelist support
    else { //this is where you could fallback to Java Applet, Flash or similar
        return false;
    }       
    return true;
} 
```

# c# - Windows Server 2012 中的 Fiddler4 将 RestSharp 请求设为空

> ID：13709484
> 
> 赞同：0
> 
> 时间：2012-12-04T18:27:19.903
> 
> 标签：c#, neo4j, fiddler, restsharp, windows-server-2012

所以我在纯 REST（没有 Neo4JClient）中测试 Neo4J，我有这个代码：

```
 var client = new RestClient("http://url");

        string requestText = "{  \"query\" : \"start x  = node(1) match path = (x--IsFriendOf) return path, IsFriendOf.name\",  \"params\" : {  }}";

        var request = new RestRequest();

        request.Method = Method.POST;
        request.RequestFormat = DataFormat.Json;
        request.Resource = "/foo/bar";
        request.AddHeader("Content-Length", requestText.Length.ToString());
        request.AddHeader("Host", "ip:port");
        request.AddHeader("Accept", "application/json");
        request.AddHeader("Content-Type", "application/json");

        request.AddHeader("Authorization", "Basic encoded64credentials");

        request.AddBody(requestText);

        IRestResponse response = client.Execute(request); 
```

如果我在 Fiddler 本身中执行 RAW 请求，我会得到想要的结果，

但是，如果我在 .Net 4.5 的控制台应用程序中执行此操作，我会看到：

![在此处输入图像描述](../Images/8bd5da0b6caa23eea0fe2b375bd8a6dc.png)

我在防火墙中创建了一条规则，以允许控制台可执行文件的传入/传出请求，并且我停用了 IE 保护模式，但仍然没有运气。

有人对这个问题有一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:28:46.330

这里有很多问题。

首先要了解的是，您实际上根本没有看到请求——您在此屏幕截图中显示的请求是 IE 下载兼容性视图列表信息，而不是您自己提出的任何请求。

您可能应该先阅读[http://blogs.msdn.com/b/fiddler/archive/2011/09/14/fiddler-and-windows-8-metro-style-applications-https-and-private-network- capabilities.aspx](http://blogs.msdn.com/b/fiddler/archive/2011/09/14/fiddler-and-windows-8-metro-style-applications-https-and-private-network-capabilities.aspx)以了解 Windows 8 / Windows Server 2012 发生了怎样的变化，以及您需要做什么才能在本地环回代理中捕获它们的流量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T00:36:50.813

我不敢相信我在写什么，但显然错误是由 Fiddler 本身产生的，我会找出 Fiddler 的内部机制来中断我的调用。

因此，如果您向不在端口 80 上的 REST API 发出 http 请求，并且您使用的是 WireShark 或 Fiddler，例如，该请求永远不会到达端点。

我不知道如何解决，但我知道如何避免它，即关闭服务器上的所有流量监视器。在我的情况下，我打开了 Wireshark 和 Fiddler4 来帮助我调试 http 请求内容，但我当然无法意识到发生了什么，因为我正在使用引发错误的工具进行调试。

我在 Windows Server 2012 中使用 Fiddler4、VS2012 和 .Net Framework 4.5，如果这对任何暗示为什么会发生这种情况的人有用的话。

# java - 使用 SQLOpenHelper 获取 ArrayList 不起作用

> ID：13709493
> 
> 赞同：3
> 
> 时间：2012-12-04T18:27:55.680
> 
> 标签：java, android, sqliteopenhelper

我的`SQLiteOpenHelper`课有问题。我有一个包含打印机制造商和任何类型打印机详细信息的数据库。我尝试使用此代码从我的数据库中获取所有制造商并将它们返回到数组列表中。

```
// Read database for All printer manufacturers and return a list
public ArrayList<String> getPrManufacturer(){
    ArrayList<String> manufacturerList = new ArrayList<String>();
    SQLiteDatabase db = getReadableDatabase();
    Cursor cursor = db.query(CoDeskContract.Printer.TABLE_NAME,
                             printerManuProjection, null, null, null, null, null,null);

    // If cursor is not null and manufacturer List 
    // does not contains Manufacturer in the list then add it!
    if ((cursor != null) && (cursor.getCount()>0)){
        cursor.moveToFirst();
        do {
            String cursorManufacturer = cursor.getString(0);
            //Checking for manufacturer in the list
            for(String manufacturerInList:manufacturerList){
                if (!manufacturerInList.equals(cursorManufacturer))
                    manufacturerList.add(cursorManufacturer);               
            }                   
        }while(cursor.moveToNext());
    }

    // Return list of manufacturers from database
    return manufacturerList;
} 
```

我希望每个制造商都出现在列表中。不知何故，我不能让它工作。我还是个新手。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:43:41.793

您还可以在 SQLite ( [http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html) ) 中使用 distinct 关键字。使用 SQLiteDatabase.rawQuery(String query, String[] args) 。

`db.rawQuery("SELECT DISTINCT name FROM " + CoDeskContract.Printer.TABLE_NAME,null);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:45:13.157

有两个问题：

1.  一开始，当您的列表`manufacturerInList`为空时，它不会进入`for(String manufacturerInList:manufacturerList){`循环，因此它永远不会在列表中添加任何条目。

2.  解决问题 1 后，它仍然无法`if (!manufacturerInList.equals(cursorManufacturer))`检查列表中的每个条目，并且可能会多次在列表中添加不匹配的条目。

要解决此问题，您有两种选择。

**选项1**：`contains`用作：

```
 if (!manufacturerList.contains(cursorManufacturer)) {
                 manufacturerList.add(cursorManufacturer); 
            } 
```

**选项 2**：使用`matchFound`布尔标志作为：

```
 String cursorManufacturer = cursor.getString(0);
        boolean matchFound = false;

        //Checking for manufacturer in the list
        for(String manufacturerInList:manufacturerList){
            if (manufacturerInList.equals(cursorManufacturer)){
                 matchFound = true;
                 break;
            }
        }                   
        if(!matchFound){ // <- doesn't exit in the list
            manufacturerList.add(cursorManufacturer); 
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:32:50.607

使用[ArrayList.contains(Object elem)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html) 检查 ArrayList 中是否存在项目 将代码更改为：

```
 // does not contains Manufacturer in the list then add it!
    if ((cursor != null) && (cursor.getCount()>0)){
        cursor.moveToFirst();
        do {
            String cursorManufacturer = cursor.getString(0);
            //Checking for manufacturer in the list
           if (!manufacturerList.contains(cursorManufacturer)) {
                     manufacturerList.add(cursorManufacturer); 
                } else {
                    System.out.println("cursorManufacturernot found");
                }              
        }while(cursor.moveToNext());
    } 
```

# c# - 通过代码进行智能 DLL 选择

> ID：13709495
> 
> 赞同：0
> 
> 时间：2012-12-04T18:28:12.890
> 
> 标签：c#, asp.net, architecture

我目前正在开发一个项目，该项目具有运行良好的应用程序层和类库。
但是我对同一个应用程序的另一个客户端提出了新的要求，除了类库中的逻辑之外，一切都保持不变。
所以，我想知道我们是否可以有一些解决方案，让每个应用程序有两个不同的类库，并且基于 web.config 中的 appsetting，我们可以选择要加载的库。
非常感谢任何帮助和想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:31:47.017

您是否尝试过查看 Microsoft 的 MEF？[http://en.wikipedia.org/wiki/Managed_Extensibility_Framework](http://en.wikipedia.org/wiki/Managed_Extensibility_Framework)它允许您在运行时添加插件，这意味着您可以选择要加载的 dll。

# html - 选项元素中的多种样式

> ID：13709497
> 
> 赞同：2
> 
> 时间：2012-12-04T18:28:18.587
> 
> 标签：html, css

> **可能重复：**
> [样式选择选项](https://stackoverflow.com/questions/4789295/styling-select-options)

我想知道是否可以在一个`option`元素中应用两种样式？例如，在下面的代码中，我希望我的产品名称是 style`color:black;`而价格是另一种 style `color:red; font-weight:bold;`。我试过把我的价格包装起来`span.price`，但没有奏效。

```
<select>
  <option>Apple  <span class="price">$1.00</span></option>
  <option>Banana <span class="price">$2.50</span></option>
  <option>Cherry <span class="price">$1.50</span></option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:36:35.767

`option`样式以平台原生的方式设置样式。如果不更改标记（和/或使用 JavaScript），您将无法做您想做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:35:44.740

在您的 HTML 文档或外部样式表中尝试此 CSS（`<style>`如果您将其放在外部样式表中，请去掉标签）：

```
<style type="text/css">
select option { color: black; }
select option span.price { color: red; font-weight:bold; }
</style> 
```

通过这样做，您基本上是在说“我的选择中的所有选项都应该具有黑色文本颜色”。然后，您通过说“在我的选择中的选项内具有“价格”类的任何跨度都应该具有红色文本颜色，从而覆盖这一点。

# ssis - SSIS > 变量 > 值 = 列表源属性之一

> ID：13709508
> 
> 赞同：0
> 
> 时间：2012-12-04T18:28:57.493
> 
> 标签：ssis

我有一个变量“vSourceName”，我希望将此变量的值设置为“数据流的源”属性。

我该怎么做？我做了一些谷歌，不确定使用什么关键字。如果看起来我没有做作业，我很抱歉。SSIS 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:30:42.757

如果您使用的是 OLE DB 源，只需将源上的数据访问模式下拉列表更改为：表名称或变量中的视图名称。然后从变量名称下拉列表中选择您的变量。

# mysql - MySQL - 通过返回 nil 从 GROUP 中排名 COUNT

> ID：13709513
> 
> 赞同：0
> 
> 时间：2012-12-04T18:29:25.537
> 
> 标签：mysql, count, group-by, rank

我正在尝试遵循以下示例：[MySQL - 按 count() 和 GROUP BY 排名，](https://stackoverflow.com/questions/10286418/mysql-ranking-by-count-and-group-by)但我的`rank`列一直返回 nil。

这是我的查询：

```
SELECT 
  @rownum := @rownum+1 AS rank,
  q.id, 
  q.Name, 
  q.count 
FROM
(SELECT
    Accounts.id,
    Accounts.Name,
    COUNT(Accounts.Name) AS count
FROM
    player_to_team_histories
        INNER JOIN
    team_histories ON team_histories.id = player_to_team_histories.team_history_id
        INNER JOIN
    teams ON teams.id = team_histories.team_id
        INNER JOIN
    accounts ON accounts.id = teams.account_id
WHERE
    accounts.AccountTypeId = 1 AND player_id IN (SELECT 
        player_id
    FROM
        player_to_team_histories
    WHERE
        player_to_team_histories.not_valid IS NULL AND team_history_id = (SELECT 
            team_history_id
        FROM
            player_to_team_histories
                INNER JOIN
            team_histories ON team_histories.id = player_to_team_histories.team_history_id
        WHERE
            player_to_team_histories.id = 574651))
GROUP BY Accounts.Name
ORDER BY count DESC)q 
```

除了`rank`按预期返回之外的每一列，并且每行都`rank`返回`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:39:27.310

在开始增加它之前，您必须将 rownum 初始化为 0，或者通过

```
SET @rownum := 0; 
```

在查询之前，或者在您的第一个之后的单独`SELECT`子句`FROM`：

```
SELECT ...
FROM
(SELECT @rownum := 0 ) counter, 
(SELECT
 ... ) 
```

# bash - 运行 matlab 命令行并自动运行 unix 服务器 bjob s

> ID：13709516
> 
> 赞同：3
> 
> 时间：2012-12-04T18:29:36.573
> 
> 标签：bash, matlab, lsf

我正在以这种方式运行一段名为**fit.m的 matlab 代码，**

```
clear all;
load('/pathtomatfile/alldata.mat')
count = rxw1;
count = double(count);
x_cov = ltgbd; 
```

alldata.mat 有几个感兴趣的数据，即

```
rxw1
rbg2
rfd1
wop3, 
ltgbd,
etc. 
```

我可以从命令行为给定的感兴趣数据运行这样的脚本（在我的示例中为 count=rxw1），

```
matlab -nodisplay -nojvm -nosplash -r ${pathtoscript}fit -logfile lfile.txt 
```

但是，我需要自动化运行，以便我可以告诉 matlab 使 count = mat 文件中的任何其他数据集。即，我想为不同的数据集并行编写脚本，但我需要类似的东西：

```
matlab -nodisplay -nojvm -nosplash -r ${pathtoscript}fit -logfile lfile.txt DATAOFINTERESTHERE (i.e., rxw1 count will equal rxw1, etc.) 
```

可以按照我的建议去做吗？我如何通过在调用脚本时将数据集的名称作为输入参数来自动运行脚本以针对我选择的任何数据集运行？

一旦我有了它，我计划通过 LSF 提交作业来实际并行运行它们，但将感兴趣的数据的名称作为输入，请记住这样的事情：

```
bsub -q week -R'rusage[mem=8000]' \
"matlab -nodisplay -nojvm -nosplash -r ${pathtoscript}fit -logfile lfile.txt DATAOFINTEREST" 
```

对不起，如果它太基本的 Q 但我不熟悉运行 matlab 命令行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:59:31.377

您可以创建`fit`一个函数，而不是脚本。该`fit` **函数**可以有一个指向正确数据文件的输入变量。然后你可以运行

```
matlab -nodisplay -nojvm -nosplash -r "cd ${pathtoscript}; fit('${dataofinterest}');exit;" 
```

**编辑：**添加了这个详细`fit`的乐趣。

你的`fit`函数应该看起来像

```
function fit( variableName )
%
% run fit for a specific variable from the mat file
% variableName is a string, e.g. variableName = 'rgb1';
%

ld = load('/pathtomatfile/alldata.mat');
count = ld.(variableName); % access variables in mat file as struct fields
count = double( count );
% and I believe you can take it from here... 
```

**编辑：** 类似的解决方案将 mat 文件加载到结构中以处理加载的变量可以在[这里](https://stackoverflow.com/questions/13545688/how-to-traverse-over-multiple-matrices-in-matlab)找到更多详细信息。

# php - 从 PHP 变量中转义换行符（endline）以供 Javascript 使用

> ID：13709517
> 
> 赞同：3
> 
> 时间：2012-12-04T18:29:36.410
> 
> 标签：php, javascript

这是我的代码：

```
<td onclick="openFile('<?php echo htmlentities ($row['name'])?>','
                      <?php echo htmlentities ($row['content'])?>')">
    <a href="#nf" data-toggle="tab"><?php echo $row['name']?></a></td> 
```

因为 $row['content'] 中有一个 endline char：

> openFile('哇','哇哇哇
> 
> 哇 '）;

并且当浏览器在同一行中找不到结尾 qoutes 时，它会抛出一个

错误（SyntaxError：未终止的字符串文字 [Break On This Error]）。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T18:33:42.760

您可以通过将其替换为空来删除它，

```
str_replace("\n","",$row['name']); 
```

如果你需要你的换行符在你的 JS 字符串中，你可以双重转义它，

```
str_replace("\n","\\n",$row['name']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T12:29:03.280

我以前有同样的问题。PHP 中的**json_encode和 JS 中的****JSON.parse()**帮助我解决了这个问题。在您的情况下，我将使用以下代码：

```
<td onclick="openFile('<?php echo htmlentities ($row['name'])?>','
                  <?php echo json_encode($row['content'])?>')">
<a href="#nf" data-toggle="tab"><?php echo $row['name']?></a></td> 
```

然后在您的 openFile() 函数上，我将使用 JSON.parse()解析***内容参数，如下所示：***

```
function openFile(name, content){
     content = JSON.parse(content);

     ....
     // your codes here

} 
```

# ruby-on-rails - 自定义命令行选项 rails 3 Ruby

> ID：13709521
> 
> 赞同：1
> 
> 时间：2012-12-04T18:29:50.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发一个需要 ruby​​ 1.8.7 并且当前使用的是 rails 3.2 的网站项目。这是一个研究项目，因此可能有点“非常规”。

我有一个 Rails 服务器，即管理器，它生成其他成为 P2P 网络中的对等点的 rails 服务器。

我想将自定义选项传递给我生成的服务器来配置它们。我想过做这样的事情，但在 Rails 中似乎不可能。有人对如何做类似的事情有建议吗？

```
rails server --custom_option="CUSTOM_VALUE" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:52:01.010

环境变量会起作用吗？

```
CUSTOM_OPTION=CUSTOM_VALUE rails s 
```

这应该使您可以访问它：

```
`$CUSTOM_OPTION` 
```

# php - 使用变量访问定义内容

> ID：13709527
> 
> 赞同：0
> 
> 时间：2012-12-04T18:30:06.977
> 
> 标签：php, variables

这可能是不可能的，但我想知道是否可以使用变量的值输出定义的内容。

像这样：

```
define("SEO_HOME", "Home name");
$var="SEO_HOME";
echo $var 
```

这将打印课程“SEO_HOME”。如何让它打印“家庭名称”（使用变量 $var）？

编辑：更正定义。

编辑：我的所有问题，我将编辑的网站使用定义来识别所有页面，例如：

```
define("CONTACT_PAGE","Please contact us");
define("INFO_PAGE","Some information about us"); 
```

而且我需要在这些页面上添加自定义 html 标题，该所有者将能够进行编辑。所以我想我会创建一个带有 (id, page, title) 的数据库表，其中页面将包含 CONTACT_PAGE、INFO_PAGE 等，而标题将是标题本身。

现在要为网站所有者制作一个编辑页面，我将拥有这个：

```
//This would be an while mysql_fetch_assoc and not a multidimentional array, but for example this will work
$titleArray=array(array("CONTACT_PAGE", "my title for contact page"),array("INFO_PAGE", "my title for info page"));
?>
<tr>
    <td>Set title for: <?php echo $titleArray[0][0];?></td> 
    <td><input type="text" name="name" value="<?php echo $titleArray[0][1];?>" /></td>
</tr>
<tr>
    <td>Set title for: <?php echo $titleArray[1][0];?></td> 
    <td><input type="text" name="name" value="<?php echo $titleArray[1][1];?>" /></td>
</tr> 
```

这显示在第一个 td -> 为：CONTACT_PAGE 设置标题

我希望它显示 -> 设置标题：请联系我们

希望这能澄清我的疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:30:21.720

你可以使用[常量函数](http://php.net/manual/en/function.constant.php)：

```
 mixed constant ( string $name ) 
```

> ***返回由name***指示的常量的值。
> 
> **如果您需要检索常量的值，但不知道其名称，则**constant()很有用。**即它存储在变量中或由函数返回。**
> 
>  **此函数也适用于类常量。**

 **```
<?php
define("SEO_HOME", "Home name");
$var="SEO_HOME";
echo constant($var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:34:49.507

您的代码的错误是您交换了引号..

```
 define(seo_home, "Home name")
        ^------------- Quotes Missing 

 $var="seo_home";
      ^---------------  There should be no quotes 
```

并且还倾向于通过对常量使用大写来创建更具可读性的代码，因为它们区分大小写，除非您启用 case_insensitive 选项..[查看更多详细信息](http://php.net/manual/en/function.define.php)

例子 ：

```
define("SEO_HOME", "Home name");
$var = SEO_HOME;
echo $var; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:35:29.373

如果你这样做

```
$var=seo_home; 
```

你什么时候做`echo $var;`会显示它，但是......你可以做`echo seo_home;`并且它会显示，你不需要变量。**

# javascript - jQuery Javascript 在继续执行代码之前等待 iframe 加载

> ID：13709532
> 
> 赞同：1
> 
> 时间：2012-12-04T18:30:32.000
> 
> 标签：javascript, jquery, iframe, browser-automation

我正在开发一个使用 javascript/jQuery 和 iFrames的网络**浏览器自动化项目。**问题是代码必须等待 iframe 加载才能继续执行。

```
 // set value on iframe input on page 1
        $('#csi').contents().find('#inputonpage1').val('hello world');
        // click the send button
        $('#csi').contents().find('#sendbuttononpage1').trigger('click');

        // here must wait until the iframe loads it's 'new' page
        ?

        // set value on another field on page 2
        $('#csi').contents().find('#inputonpage2').val('hello world again');
        // click a button...
        $('#csi').contents().find('#sendbuttononpage2').trigger('click');
        // wait to load... and continue on page 3... 4... 5... etc...
        . 
```

等等...

我已经阅读了有关 $().load 函数回调以及所有这些内容的信息，但我需要一些东西来防止在 iframe 准备好之前执行下一行代码。正如我在所有其他帖子中看到的那样，不仅仅是一次。

我正在尝试使用全局来标记 iframe 状态...类似于：

```
var isready = false;

$(document).ready(function(){        

    $("#csi").load(function(){
        isready=true;
    });

    $("#buttonstart").click(function(){
        // fill fields and click button...
        // start wait function
        // fill fields and click button...
    });
});

function wait(){
    while(!isready){
        // thread hangs here....
    }
    isready=false;   // disarms
} 
```

谢谢，

# cocos2d-iphone - 是否可以“重置”任何现有的触摸？

> ID：13709535
> 
> 赞同：3
> 
> 时间：2012-12-04T18:30:41.370
> 
> 标签：cocos2d-iphone

```
Cocos2d-iphone 1.0.1. 
```

*   我的主要游戏场景要求玩家用手指按住屏幕让角色移动。
    *   **当**角色移动时（因此手指按下屏幕），可能会发生战斗。这样的战斗触发了一个新`CCScene`的**被推**入的`CCDirector`（所以主要的游戏场景仍然存在于记忆中）。
    *   在战斗中，玩家自然会在某个时候松开手指。
    *   当战斗结束时，这`CCScene`是**pop**。因此，主游戏场景返回。
*   现在这里有一个问题：主游戏场景**仍然认为战斗前最初按下屏幕的手指*仍然*在同一点按下，因此操纵杆仍然“起作用”并且玩家**尽管事实上仍然在移动手指不再按压屏幕。

有没有办法“重置”屏幕触摸？我想`onEnter`在主游戏场景的方法中这样做。我尝试了类似的东西

```
self.isTouchEnabled = NO;
self.isTouchEnabled = YES; 
```

希望这样会重新注册触摸调度程序，从而导致某种重置。它不起作用。

基本上，我需要一种方法来告诉主要游戏场景“伙计，不管你怎么想，没人会触摸屏幕”。

**编辑**

请注意，如果您再次按屏幕，它是固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:39:53.770

为了确保我理解问题：

弹出战斗场景后，角色继续四处移动，就好像用户从未从操纵杆上松开手指一样？

我最初的想法是你在代码的某个地方有更深层次的潜在设计缺陷。据我了解，您希望至少使用一层来处理输入。尝试将“游戏”CCScene 中的所有内容转换为“游戏”CCLayer 并将图层添加为场景的子层。然后注册图层以接收触摸输入。

如果这不起作用，您可以随时使用标志。将您所处的场景与您想要进入的场景进行比较，如果不是，请不要激活操纵杆控制器。有点hack-y，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:22:31.713

我自己也遇到过这种问题。

我是如何解决的：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
for (UITouch *touch in touches){
[touchesOnScreen addObject:touch];
}
}

- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
for (UITouch *touch in touches){
[touchesOnScreen removeObject:touch];
}}

- (void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{

[touchesOnScreen removeAllObjects];
} 
```

所以基本上iOS会为屏幕上的每一次触摸保留一个指针。你所做的就是使用 NSSet 自己管理这些接触。当你推送场景时，只需将每个 UITouch 从集合设置为 nil。这相当于`UITouchPhaseCancelled`。这将取消您在屏幕上的所有触摸。如果用户仍然将手指放在屏幕上，则不会再注册触摸......即使他移动它或其他什么。

注意：您需要删除其中`ccTouchesCancelled`的所有对象（当用户在屏幕上触摸 6 次或更多时调用），否则当他再次触摸应用程序崩溃时。如果您的应用需要超过 5 次触摸，您需要找到解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T07:36:43.273

可能最简单的解决方案是让您的 CCDirector 在完成战斗场景弹出后，首先调用`resignFirstResponder`违规视图上的“becomeFirstResponder”；无论如何，在我的脑海中似乎应该将触球转发给另一个响应者，希望在没有其他人处理它时让它消失。

更复杂的 UIView 方法提供了这个私有调用`cancelTouchTracking`。它很可能会做一些类似于@skytz 放在一起的事情。***警告：最后一个很可能会让你在应用商店过程中被拒绝，但为了你的信息，它在那里。***

我会选择更简单的解决方案，并希望它有效。o_o

# c++ - Xcode 中 C++ 中 Boost 线程的链接器错误

> ID：13709538
> 
> 赞同：1
> 
> 时间：2012-12-04T18:30:51.153
> 
> 标签：c++, xcode, multithreading, boost

我一直在尝试运行一个简单的 c++ 程序，该程序作为多线程编程的示例提供给我。我知道它在另一台安装了 boost 的机器上运行，但我试图在 Xcode 中运行它，这给我带来了一些问题。

首先，我尝试使用我现有的 boost 版本来运行它。但是我遇到了很多错误，在进行了一些研究之后，我发现我需要将我的 boost 版本从 1.47 更新到 1.52，以修复 1.47 中包含的一些已知线程错误。

这解决了我的许多错误，但仍然抛出了一些错误。所以我发现我必须使用此处找到的补丁来修补 1.52：[https ://svn.boost.org/trac/boost/attachment/ticket/7671/libcpp_c11_numeric_limits.patch](https://svn.boost.org/trac/boost/attachment/ticket/7671/libcpp_c11_numeric_limits.patch)

毕竟，我仍然收到一个链接器错误，提示“找不到 -lboost_thread 的库”

现在在 Xcode 中，我有以下项目设置： 在搜索路径下，我将头文件和库搜索路径设置为“usr/local/include/” - - 在链接下，我将其他链接器标志设置为“-lboost_thread”

我在 usr/local/lib/ 中有一个 lboost_thread.a 和一个 lboost_thread.dylib。我如何让 xCode 找到这个，因为它似乎应该解决我的问题。

此外，如果它在这里有帮助是我正在运行的代码：

```
#include <iostream>
#include <boost/thread.hpp>

using namespace std;

void printNum(char c, int num)
{
    for(int i = 0; i < num; i++)
    {
        cout << c << i << endl;
    }
}

int main()
{
    cout << "Boost threads!" << endl;
    boost::thread t(printNum, 'b', 100);
    printNum('a', 100);
    cout << "Good bye!" << endl;
} 
```

错误图片： ![错误](../Images/2c318c9ba8f814dd8b77349bf24d0380.png)

显示文件所在位置的图像： ![libboost_thread.a](../Images/0c16b7780440e5a734bcde9ca300ddcb.png)

显示我的构建设置的图像： ![xCode 构建设置](../Images/69070ff9c95d0f84a699ee60f10d6806.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:33:36.953

我不知道为什么链接器没有找到库，但我可以告诉你如何规避库搜索问题：将完整路径添加`/usr/local/lib/libboost_thread.a`到其他链接器标志构建设置，不带 -l 或 -L。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T16:14:53.173

你的截图说`/usr/local/lib/libboost_thread.a`建议是使用`-I/usr/local/lib/libboost_thread.a`也许就是这样。

# postgresql - 如何在 PostgreSQL 中使用文字百分比文字 (%) 更新记录而不将其保存为“\%”

> ID：13709541
> 
> 赞同：2
> 
> 时间：2012-12-04T18:31:00.577
> 
> 标签：postgresql, coldfusion, escaping, railo, cfml

我需要在 Railo 中使用 PostgreSQL 更新一条包含文字百分号的记录。查询看起来像

```
<cfquery>
update foo set bar = 'string with % in it %'
</cfQuery> 
```

它会抛出错误，因为 ColdFusion 通常将其解释为通配符。我可以使用以下查询对其进行转义。

```
<cfquery>
update foo set bar = 'string with escaped \% in it \%'
</cfQuery> 
```

但是，该记录现在在数据库中包含“\%”，并将在页面上显示为“\%”。

我找到了一个[文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html)，其中包含在 SELECT 中转义百分号的示例。但这对我不起作用：“ESCAPE”处或附近的语法错误。

```
SELECT emp_discount 
FROM Benefits 
WHERE emp_discount LIKE '10\%'  
ESCAPE '\'; 
```

有没有更好的方法来实现相同的目标？下划线数据库是 PostgreSQL。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:30:01.527

查询参数转义特殊字符。使用它们的另一个原因。

# c# - 使用纬度、经度和距离创建边界框

> ID：13709542
> 
> 赞同：2
> 
> 时间：2012-12-04T18:31:02.760
> 
> 标签：c#, sql-server

我已经浏览了链接 [给定纬度和经度以及距离，我想找到一个边界框，](https://stackoverflow.com/questions/1648917/given-a-latitude-and-longitude-and-distance-i-want-to-find-a-bounding-box?rq=1) 这个链接提供了创建边界框的解决方案，但我无法理解的事情很少。

```
def boundingBox(latitudeInDegrees, longitudeInDegrees, halfSideInKm):
lat = math.radians(latitudeInDegrees)
lon = math.radians(longitudeInDegrees)
halfSide = 1000*halfSideInKm

RADIUS_OF_EARTH  = 6371
# Radius of the parallel at given latitude
pradius = radius*math.cos(lat)

latMin = lat - halfSide/radius
latMax = lat + halfSide/radius
lonMin = lon - halfSide/pradius
lonMax = lon + halfSide/pradius
rad2deg = math.degrees
return (rad2deg(latMin), rad2deg(lonMin), rad2deg(latMax), rad2deg(lonMax)) 
```

在上面的代码中，半径的值是什么，6371 代表什么`RADIUS_OF_EARTH`？

任何人都可以解释吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:37:35.807

根据[维基百科](http://en.wikipedia.org/wiki/Earth_radius)， 6371km 是地球的平均半径。我在您显示的代码段中看不到定义`radius`，但它应该设置为`RADIUS_OF_EARTH`，因为`pradius`是半径的水平投影（根据评论）。

# c# - 在 WCF 中，操作是否总是在与消息检查器相同的线程上调用？

> ID：13709545
> 
> 赞同：2
> 
> 时间：2012-12-04T18:31:13.813
> 
> 标签：c#, .net, multithreading, wcf

我有一个 WCF 线程问题，我无法找到一个好的答案。我有一个实现，`IDispatchMessageInspector`它具有以下`AfterReceiveRequest`实现：

```
public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
{
   return new SessionScope();
} 
```

for 的构造函数`SessionScope`将当前范围注册到一个字典，该字典基本上通过其线程跟踪它。然后我有以下操作：

```
[MyServiceBehavior]
public class Service1 : IService1
{
   public string GetData(int value)
   {
      // Uses SessionScope.Current object for various things
   }
} 
```

将`GetData`保证与之前检查 WCF 消息的消息检查器在同一线程上运行吗*？*同样，也会`BeforeSendReply`在同一个线程上运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:15:34.627

您不能保证请求将保留在同一个线程上。IIS 可以（并且将）在线程之间传递它。

要实现您的目标，您可以将对象加载到 OperationContext.Current（或 HttpContext.Current，如果您打开了 aspCompatibilityMode）。我通过将对象添加到 OperationContext.Extensions 列表来完成它：

首先，你的类必须实现 IExtension

```
public sealed class SessionScope : IExtension<OperationContext> {
  // your class details here
} 
```

然后，您需要将对象添加到 OperationContext：

```
public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
{
   SessionScope scope = new SessionScope();
   OperationContext.Current.Extensions.Add( scope );
} 
```

之后，无论线程切换如何，您都可以使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T22:05:12.310

假设您在 IIS 下运行，答案是否定的。

IIS有个东西叫“线程敏捷”，意思是单个请求可以跳转线程。我们有几个问题，在一种情况下，我们通过使用 http 上下文解决了这个问题。

看看这个问题的答案：[IIS 中的请求会在单个线程上运行吗？](https://stackoverflow.com/questions/1643987/will-a-request-in-iis-run-on-a-single-thread)

# canvas - 点到图像边缘的最短距离

> ID：13709548
> 
> 赞同：2
> 
> 时间：2012-12-04T18:31:28.273
> 
> 标签：canvas, shortest-path

这可能在其他地方得到解决，但我在上面找不到任何东西。我试图找到图像上任意点与最近的透明像素之间的最短距离，更强调速度而不是准确性。

目前我正在做的是每 0.1 弧度检查一行中的每个像素，当它到达透明像素时停止并跟踪最短的。不过，这并不是特别快或准确。有没有更好的办法？也许人们用于这种事情的算法？

我正在使用 javascript/canvas 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:11:57.457

一种方法是计算所有像素到最近的透明像素的[距离（距离变换）](http://en.wikipedia.org/wiki/Distance_transform)，这可以在原始图像的两遍中执行。计算完距离变换后，可以在常数时间 O(1) 内找到最近的透明像素。如果透明区域随时间缓慢变化，则此方法更为优越。

在透明区域快速变化的情况下，您可能会做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:48:16.517

最快的准确算法是简单地围绕该点做圆圈。检查每个相邻像素，然后检查下一层，本质上是广度优先搜索，这将在 O(n) 时间内运行，其中 n 是像素数。现在你正在做的是一种更快的概率方法。

我认为使算法比您的算法更快的唯一方法是选择一个圆大小，例如 3 像素直径，并检查（例如）该圆上像素的 75%（最佳百分比取决于您对准确性的期望） . 如果找不到透明像素，则将圆圈的大小加倍。但是，根据图像的外观，这可能非常不准确，但它更喜欢速度而不是准确性。

否则，除非您可以根据周围的像素收集有关透明像素所在位置的数据，否则我并没有真正看到您的算法有所改进。然后，您可以更聪明地进行搜索。否则，您通过测试像素所学到的只是一个且唯一的像素是（或不）透明的。

如果您可以说您只是在寻找大于 x 像素的透明区域，并且想要准确地找到任何直径为 x 像素的区域，那么您可以调整圆圈的大小以增加 x-1，然后提高准确性您可以沿着透明像素朝向您的原点，直到找到最近的像素。

# iphone - 允许选择 3 个 UIButtons 中的 1 个

> ID：13709550
> 
> 赞同：1
> 
> 时间：2012-12-04T18:31:44.243
> 
> 标签：iphone, objective-c, ios

我正在制作一个应用程序，屏幕上有三个按钮。必须始终选择其中一个按钮。当应用程序加载时，第一个按钮被设置为选中，并执行其操作。当用户按下另一个按钮时，当前按钮被取消选择并选择新按钮。

我对Objective-C有点陌生。这是我想出的，但我所期望的都没有。我已经在标题中设置了按钮插座。

```
 - (IBAction)buttonSelector:(id)sender
    {
        firstButton.selected = YES;
        secondButton.selected = NO;
        thirdButton.selected = NO;

        if (firstButton.selected = YES)
        {
            [firstbutton setBackgroundImage:[UIImage imageNamed:"selected.png"]];
            secondButton.selected = NO;
            [secondButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
            thirdButton.selected = YES;
            [thirdButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
        } else if (secondButton.selected = YES)
        {
            [secondButton setBackgroundImage:[UIImage imageNamed:"selected.png"]];
            firstButton.selected = NO;
            [firstButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
            thirdButton.selected = NO;
            [firstButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
        } else if (thirdButton.selected = YES)
        {
            [thirdButton setBackgroundImage:[UIImage imageNamed:"selected.png"]];
            firstButton.selected = NO;
            [firstButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
            secondButton.selected = NO;
            [secondButton setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
        } else {
            [sender setBackgroundImage:[UIImage imageNamed:"un_selected.png"]];
        }

    } 
```

**编辑1：**

我尝试了 UISegmentedControl，但它似乎无法针对我正在寻找的内容进行足够的定制。理想情况下，按钮将更多地遵循以下原则：http: [//i.stack.imgur.com/LPwoR.jpg](http://i.stack.imgur.com/LPwoR.jpg)

按钮将有一个会改变的背景图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:34:16.877

你应该使用`UISegmentControl`这个。这正是您正在寻找的功能。这是[关于此的苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

[这是 Ray wenderlich](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)关于如何自定义 UI 元素的教程，其中包括`UISegmentControl`.

例如：-

```
NSArray *itemArray = [NSArray arrayWithObjects: @"One", @"Two", @"Three", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
segmentedControl.frame = CGRectMake(35, 200, 250, 50);
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:07:39.693

只需使用 for 循环执行此任务，首先只需将图像设置为所有按钮，然后更改所选图像的图像。

# asp.net-mvc - 从命令行部署 Elastic Beanstalk - ASP.NET

> ID：13709556
> 
> 赞同：2
> 
> 时间：2012-12-04T18:32:01.310
> 
> 标签：asp.net-mvc, amazon-web-services, webdeploy, amazon-elastic-beanstalk

我正在尝试将我的 MVC4 应用程序部署到 ELB。该项目有几个构建后步骤，它们将依赖项组合在一起。然后，AWS 开发工具包发布向导并不能解决问题 - 它会在后台构建一个 Web 部署包，它不会执行那些构建后的步骤或保留生成的目录结构。

所以，我下载了命令行 EB 工具，让一个 git 存储库工作，但无法完成下一步：我应该使用什么推送到服务器`git aws.push`：因为如果它只是生成的文件，那么我无法指定“启用 32 位应用程序”标志（必需）等。然后我是否从我的存储库推送 Web 部署包？

我想是这样，但如果是这样，我如何通过构建后步骤将在“正常”构建期间复制到输出文件夹中的文件包含在内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:27:24.313

开始了。这似乎与 Jim Flanagan 所说的相冲突 - 下面是一个 zip 文件，但 Jim 说这是其中的内容。

@Jim Flanagan - 如果你有时间，也许你可以发表评论。谢谢。

您好，感谢您联系 AWS 高级支持

来自 Elastic Beanstalk 工程团队的沟通。

当您 aws.push 一个 ASP.NET/MVC 应用程序时，您不会推送 Web 部署存档，而是推送您希望它们部署在机器上的工件。从客户堆栈溢出问题来看，他们似乎已经找到了 VS 部署向导创建的本地 git 存储库，并且查看它们应该可以很好地指示 git 存储库中需要什么。

没有通过 aws.push 指定“启用 32 位应用程序”应用程序池设置（或任何其他配置设置）的好方法。如果您需要特定的配置设置集，我建议创建允许您指定配置的环境（通过控制台或使用 eb 命令行工具）。然后使用 git aws.push 部署到该环境， git aws.push 将只使用环境中已经存在的配置。

最后一个关于仍然是增量的问题并不是真的有效，因为您不只是推送一个大的 zip 文件。但如果你是，它仍然可能是增量的，具体取决于 zip 文件中的更改，它可能只是发送两个版本的 zip 文件之间的差异。正如问题所暗示的那样，尽管该用例并不是增量部署旨在提供帮助的真正目的。

# php - 创建横幅交换算法以轮播广告

> ID：13709558
> 
> 赞同：2
> 
> 时间：2012-12-04T18:32:20.543
> 
> 标签：php, algorithm, ads, banner

我正在构建一个*基于展示次数*的广告横幅轮换脚本，该脚本在整个月内均匀地展示广告。每次请求显示广告时都会进行计算。所以这将在飞行中完成。广告应该一个接一个地轮播，而不是只展示一个广告 1000 次展示，然后另一个广告展示 1000 次展示。它在大多数情况下应该显示 1 次展示，然后切换广告（当然，除非一个广告的展示次数比另一个要多得多）。

假设我有 5 个广告，每个广告的购买次数都不同，**那么公式是什么/您如何投放广告？**我正在寻找在 PHP 中执行此操作。

广告 #1：1,000 次购买的展示次数

广告 #2：购买了 12,000 次展示

广告 #3：购买了 3,000 次展示

广告 #4：购买了 20,000 次展示

广告 #5：10,000 次购买的展示次数

如果有多个广告在同一时间范围内购买了 1000 次展示，则应该一个接一个地展示，直到展示次数用完为止。不过，我认为如果一个人在短时间内购买 1000 次展示可能会很好，我应该考虑到这一点并以更快的速度展示它们。我愿意接受建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T20:40:52.083

我认为你应该为最好的工作使用最好的算法类型我只会向你展示一些关于如何实现这样的可能性

我当前的示例将显示使用

*   [洗牌](http://php.net/manual/en/function.shuffle.php)
*   [费希尔耶茨洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)
*   知更鸟洗牌
*   ratioShuffle

你也可以实现

*   基于修道院的洗牌
*   时基随机播放
*   百分比
*   单击随机播放
*   ETC

**简单的概念证明**

```
// Create Add Infroamtion
$ads = array();
$ads[] = new Ad(10, "A.jpg", 2);
$ads[] = new Ad(12, "B.gif", 3);
$ads[] = new Ad(30, "C.png", 7);
$ads[] = new Ad(20, "D.swf", 5);

// Add ads to banner
$banner = new Banner($ads);

// You can also add addional ads
$banner->add(new Ad(10, "E.swf"));

echo "<pre>";

//Lets Emulate first 100 rotations 
for($i = 0; $i < 1000; $i ++) {
    // Select Algorithm
    $banner->randomise("ratioShuffle");

    // Display Add
    echo $banner->getDisplay(), PHP_EOL;
} 
```

**可以使用的简单随机播放功能**

```
function fisherYatesShuffle(array &$items) {
    for($i = count($items) - 1; $i > 0; $i --) {
        $j = @mt_rand(0, $i);
        $tmp = $items[$i];
        $items[$i] = $items[$j];
        $items[$j] = $tmp;
    }
}

function robinShuffle(array &$items) {
    usort($items, function ($a, $b) {
        $a = $a->getDisplay();
        $b = $b->getDisplay();
        return $a == $b ? 0 : ($a < $b ? - 1 : 1);
    });
}

function ratioShuffle(array &$items) {
    static $called = false;
    if ($called === false) {
        $ads = array();
        foreach ( $items as &$ad ) {
            for($i = 0; $i < $ad->getRatio(); $i ++) {
                $ads[] = $ad;
            }
        }
        $called = true;
        $items = $ads;
    }
    shuffle($items);
} 
```

**使用的类**

```
class Ad implements JsonSerializable {
    private $impressions;
    private $media;
    private $ratio = 1;
    private $display = 0;

    function __construct($impressions, $media = null, $ratio = 1) {
        $this->impressions = $impressions;
        $this->media = $media;
        $this->ratio = $ratio;
    }

    function torch() {
        $this->impressions --;
        $this->display ++;
    }

    public function getImpression() {
        return $this->impressions;
    }

    public function getDisplay() {
        return $this->display;
    }

    public function getRatio() {
        return $this->ratio;
    }

    public function getMeadia() {
        return $this->media;
    }

    public function __toString() {
        return json_encode($this->jsonSerialize());
    }

    public function jsonSerialize() {
        return get_object_vars($this);
    }
}

class Banner implements Countable, JsonSerializable {
    private $totalImpressions;
    private $ads = array();

    function __construct(array $ads) {
        foreach ( $ads as $ad )
            $this->add($ad);
    }

    public function add(Ad $ad) {
        $this->ads[] = $ad;
        $this->totalImpressions += $ad->getImpression();
    }

    public function randomise($function = null) {
        if (is_callable($function, false, $callable_name)) {
            return $callable_name($this->ads);
        } else {
            return shuffle($this->ads);
        }
    }

    public function getDisplay() {
        foreach ( $this->ads as &$ad ) {
            if ($ad->getImpression() < 1) {
                unset($ad);
                continue;
            }
            $ad->torch();
            break;
        }
        return isset($ad) ? $ad : null;
    }

    public function jsonSerialize() {
        $array = $this->ads;
        foreach ( $array as &$ad ) {
            $ad = $ad->jsonSerialize();
        }
        return $array;
    }

    public function __toString() {
        return json_encode($this->jsonSerialize());
    }

    function count() {
        return count($this->ads);
    }
} 
```

如您所见，这是一个示例....尝试使您的解决方案灵活

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:42:52.987

就个人而言，我会计算出每个广告获得的展示次数与付费次数的百分比，并将其用作它*不会*出现的机会。像这样的东西：

```
$show = Array();
foreach($ads as $id=>$ad) {
    $show[$id] = ceil((1-$ad['impressions']/$ad['paid'])*100);
}
$total = array_sum($show);
$rand = rand(1,$total);
$winner = -1;
do {$rand -= array_shift($show); $winner++;} while($rand && $show);
$ad_to_display = $ads[$winner]; 
```

例如，考虑四个广告，A、B、C 和 D。它们都支付了 1,000 次展示，但到目前为止 A 运气不佳并获得了 0 次展示，而 B 和 C 都获得了 500 次展示，而 D 获得了 999 次展示.

这意味着`$show`广告具有以下值：

```
A: ceil((1-0/1000)*100) = 100
B: ceil((1-500/1000)*100) = 50
C: ceil((1-500/1000)*100) = 50
D: ceil((1-999/1000)*100) = 1 
```

`$total`因此等于 201。

`$rand`可以是 1 到 201 之间的任何数字（包括 1 到 201）。比如说141。

在这种情况下，我们开始我们的循环：

*   `$rand -= 100`，现在是 41。41 是真实的，我们还有广告。
*   `$rand -= 50`，现在是-9。它已经达到零，所以结束循环。

是`$winner`1，即广告 B。

# wpf - WPF - 可以列出 用作dependencyProperty

> ID：13709562
> 
> 赞同：7
> 
> 时间：2012-12-04T18:32:31.123
> 
> 标签：wpf, generics, reflection, collections, dependency-properties

我有一个简单的搜索文本框。此文本框充当过滤器。我现在已经第五次复制/粘贴代码了，足够了。是时候自定义控件了。

左右括号已替换为 ()

我的自定义控件将很简单。我的问题是我想在这个控件上拥有一个 List(T) 类型的 dependencyProperty。

我创建了一个测试项目来证明它并确保它有效。它运作良好。忽略列表。

下面是全班。问题是唯一让我受不了的就是用 List(T) 替换 List (Person)。类似于 List 的东西，其中：T 是对象

typeof(List(T) where: T is Object) <= 显然我不能这样做，但可以说明我要完成的工作。

```
public class SearchTextBox : TextBox
{
    public static readonly DependencyProperty SourceProperty =
        DependencyProperty.Register("FilterSource", typeof(List<Person>), typeof(SearchTextBox), new UIPropertyMetadata(null)); //I WANT THIS TO BE LIST<T>

    public List<Person> FilterSource
    {
        get
        {
            return (List<Person>)GetValue(SourceProperty);
        }
        set
        {
            SetValue(SourceProperty, value);
        }
    }

    public static readonly DependencyProperty FilterPropertyNameProperty =
        DependencyProperty.Register("FilterPropertyName", typeof(String), typeof(SearchTextBox), new UIPropertyMetadata());

    public String FilterPropertyName
    {
        get
        {
            return (String)GetValue(FilterPropertyNameProperty);
        }
        set
        {
            SetValue(FilterPropertyNameProperty, value);
        }
    }

    public SearchTextBox()
    {
        this.KeyUp += new System.Windows.Input.KeyEventHandler(SearchBox_KeyUp);
    }

    void SearchBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
    {
        ICollectionView view = CollectionViewSource.GetDefaultView(FilterSource);

        view.Filter = null;
        view.Filter = new Predicate<object>(FilterTheSource);
    }

    bool FilterTheSource(object obj)
    {
        if (obj == null) return false;

        Type t = obj.GetType();

        PropertyInfo pi = t.GetProperty(FilterPropertyName);

        //object o = obj.GetType().GetProperty(FilterPropertyName);

        String propertyValue = obj.GetType().GetProperty(FilterPropertyName).GetValue(obj, null).ToString().ToLower();

        if (propertyValue.Contains(this.Text.ToLower()))
        {
            return true;
        }

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T18:35:03.650

不; 那是不可能的。
相反，只需使用非通用`typeof(IList)`.

# properties - 用于设置目录的 Wix 自定义操作使用默认值而不是在之前的自定义操作中设置的值

> ID：13709567
> 
> 赞同：1
> 
> 时间：2012-12-04T18:32:46.490
> 
> 标签：properties, directory, wix, custom-action

我想使用自定义操作来设置属性，然后立即使用新设置的属性值来更新目录。到目前为止，我有一个自定义操作，它使用 WMI 查找单独产品的安装路径并将属性设置为该值。当我转身使用该属性来设置目录时，我得到的是旧的/默认值而不是新的属性值。

对于上下文：

我有一个这样的目录结构：

```
<Directory Id="TARGETDIR" Name="SourceDir">
   <Directory Id="ProgramFilesFolder" Name="pf">
     <Directory Id="CompanyName" Name="$(var.companyName)">
       <Directory Id="FooProductName" Name="$(var.prodName)">
         <Directory Id="INSTALL_DIR">
           <Directory Id="PRODUCT_ROOT">
         </Directory>
         <Directory Id="FOO_DIR" Name="NotInstalled">
           <Directory Id="FOO_BINDIR" Name="bin" />
         </Directory>
       </Directory>
     </Directory>
   </Directory>
</Directory> 
```

我有这样声明的属性：

```
<Property Id="FOO_INSTALLLOCATION_CHECK_0" Value="AProductName" />
<Property Id="FOO_INSTALLLOCATION_DIR_0" Value="NotInstalledHere" /> 
```

我有这样声明的自定义操作：

```
<CustomAction Id="FooMoveFooDir" Directory="FOO_DIR" Value="[FOO_INSTALLLOCATION_DIR_0]" />
<CustomAction Id="GetInstallLocation" Return="check" BinaryKey="FooCAInstallLoc" DllEntry="GetInstallLocation" Execute="immediate" /> 
```

GetInstallLocation 使用 WMI 搜索包含 FOO_INSTALLLOCATION_CHECK_0 值的已安装产品，并将 FOO_INSTALLLOCATION_DIR_0 设置为该值。它实现了这一点在下面的日志片段中得到了证实。

我在 <InstallExecuteSequence> 中有以下内容

```
<Custom Action="FooMoveFooDir" After="CostFinalize">1</Custom>
<Custom Action="GetInstallLocation" Before="FooMoveFooDir">1</Custom> 
```

日志记录看起来像这样（来自 WiLogUtil）：

```
(UNKNOWN)     Action ended 11:59:35: CostFinalize. Return value 1.
(SERVER)     MSI (s) (20:4C) [11:59:35:643]: Doing action: GetInstallLocation
(UNKNOWN)     Action 11:59:35: GetInstallLocation.
(UNKNOWN)     Action start 11:59:35: GetInstallLocation.
(SERVER)     MSI (s) (20:98) [11:59:35:665]: Invoking remote custom action. DLL: C:\Windows\Installer\MSI2105.tmp, Entrypoint: GetInstallLocation
(SERVER)     MSI (s) (20:E4) [11:59:35:666]: Generating random cookie.
(SERVER)     MSI (s) (20:E4) [11:59:35:667]: Created Custom Action Server with PID 8872 (0x22A8).
(SERVER)     MSI (s) (20:34) [11:59:35:685]: Running as a service.
(SERVER)     MSI (s) (20:34) [11:59:35:687]: Hello, I'm your 32bit Impersonated custom action server.
(UNKNOWN)     SFXCA: Extracting custom action to temporary directory: C:\Windows\Installer\MSI2105.tmp-\
(UNKNOWN)     SFXCA: Binding to CLR version v4.0.30319
(UNKNOWN)     Calling custom action FOO.BAR.Installer.CustomActions.InstallLocation!FOO.BAR.Installer.CustomActions.InstallLocation.CustomActions.GetInstallLocation
(UNKNOWN)     Starting GetInstallLocation
(SERVER)     MSI (s) (20:34) [11:59:35:813]: Running as a service.
[ ... snip ... ]
(SERVER)     MSI (s) (20:A8) [11:59:40:635]: Running as a service.
(UNKNOWN)     Changing FOO_INSTALLLOCATION_DIR_0's value to 'C:\Program Files (x86)\FOO Company\AProductName\
(UNKNOWN)     FOO_INSTALLLOCATION_DIR_0 = 'C:\Program Files (x86)\FOO Company\AProductName\'
(SERVER)     MSI (s) (20:24) [11:59:40:664]: Running as a service.
[ ... snip ... ]
(SERVER)     MSI (s) (20:24) [11:59:44:420]: Running as a service.
(UNKNOWN)     Action ended 11:59:44: GetInstallLocation. Return value 1.
(SERVER)     MSI (s) (20:4C) [11:59:44:465]: Doing action: FooMoveFooDir
(UNKNOWN)     Action 11:59:44: FooMoveFooDir.
(UNKNOWN)     Action start 11:59:44: FooMoveFooDir.
(SERVER)     MSI (s) (20:4C) [11:59:44:467]: Note: 1: 1314 2: NotInstalledHere
(SERVER)     MSI (s) (20:4C) [11:59:44:467]: Note: 1: 1606 2: NotInstalledHere
(UNKNOWN)     Error 1606\. Could not access network location NotInstalledHere. 
```

它将目录 FOO_DIR 设置为 FOO_INSTALLLOCATION_DIR_0 的默认值，而不是在上一步中由自定义操作设置的值。搜索指示如何将目录设置为属性值以及如何使用 c# 中的自定义操作设置属性，但没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:53:45.397

可能你已经尝试过了，但无论如何。与其使用自定义操作直接设置 DIrectory Id，不如通过属性设置值。

```
<Property Id="Foo_INSTALLDIR" /> 

<Directory Id="TARGETDIR" Name="SourceDir"> 

          <Directory Id="[Foo_INSTALLDIR]" Name="[Foo_INSTALLDIR]"> 

          </Directory>

</Directory> 
```

看看我是如何使用目录***Id="[Foo_INSTALLDIR]"***

检查并告诉我！

# javascript - 通过Javascript在谷歌地图中重置地图中心

> ID：13709570
> 
> 赞同：1
> 
> 时间：2012-12-04T18:32:52.467
> 
> 标签：javascript, google-maps

我有一个在整个应用程序中使用 Google 地图的 MVC 应用程序。为简单起见，我创建了一个 JavaScript 文件来初始化地图并设置地图显示。

在我的应用程序中，我想让前端开发人员通过一个简单的 JavaScript 调用来更改地图位置的中心。不幸的是，在声明地图并加载应用程序之后，如果您尝试对地图变量进行 JavaScript 回调，则地图 JS 变量（以及所有变量）为空。这会将实例放到地图上，并且不允许我更改位置（我相信）。

在下面的 JS 代码中，我试图从 HTML 页面调用 setLocation 来重置位置。这是代码的失败部分。帮助表示赞赏。

```
var map;
var geocoder;
var marker;

$(document).ready(function () {
    initialize();
    $(function () {
        $("#address").autocomplete({
            //This bit uses the geocoder to fetch address values
            source: function (request, response) {
                geocoder.geocode({ 'address': request.term }, function (results, status) {
                    response($.map(results, function (item) {
                        return {
                            label: item.formatted_address,
                            value: item.formatted_address,
                            latitude: item.geometry.location.lat(),
                            longitude: item.geometry.location.lng()
                        }
                    }));
                })
            },

            select: function (event, ui) {
                $("#Place_Latitude").val(ui.item.latitude);
                $("#Place_Longitude").val(ui.item.longitude);
                var location = new google.maps.LatLng(ui.item.latitude, ui.item.longitude);
                marker.setPosition(location);
                map.setCenter(location);
            }
        });
    });
});

function setLocation(lat, lon) {
    var location = new google.maps.LatLng(lat, lon);
    marker.setPosition(location);
    map.setCenter(location);
}
function initialize() {
    var location = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
        center: location, zoom: 8, mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    marker = new google.maps.Marker({
        map: map,
        draggable: true
    });
    marker.setPosition(location);

    geocoder = new google.maps.Geocoder();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:02:59.310

有一个你在[这里](https://developers.google.com/maps/documentation/javascript/events#EventArguments)尝试做的例子......

看看他们的[placeMarker](https://developers.google.com/maps/documentation/javascript/events#EventArguments)函数以及他们如何初始化地图......

我的建议是从这个例子开始，并确保它有效。如果是这样，那么确定实施中的不同之处应该相对简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:12:16.123

这看起来很糟糕：

```
return {
       label: item.formatted_address,
       value: item.formatted_address,
       latitude: item.geometry.location.lat(),
       longitude: item.geometry.location.lng()
       } 
```

地理编码器是异步的，不能从回调例程返回任何内容。您需要在回调中使用变量。

# fpdf - 在 fpdf 中重复图像而不创建另一个实例

> ID：13709571
> 
> 赞同：1
> 
> 时间：2012-12-04T18:32:54.443
> 
> 标签：fpdf

我知道在 PDF 中，可以重复图像（在 PDF 中出现多次）而没有图像的多个实例（即图像数据仅在文件中出现一次）。

有没有办法用 fPDF 做到这一点？我正在生成一个包含卡片的 PDF；每个都有艺术品。可以是 300dpi 的艺术品可能会在文件中出现数千次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T01:28:17.880

FPDF 只会嵌入图像一次。

来自[http://www.fpdf.org/en/doc/image.htm](http://www.fpdf.org/en/doc/image.htm)

> 备注：如果一个图像被多次使用，文件中只嵌入一个副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:21:16.470

fPDF 总是这样做。它会检查文件名是否已添加，并创建对原始文件的引用，而不是重新添加图像数据。

我使用了一个报表设计器，必须明确地进行这种引用，我错误地期望 fPDF 会以类似的方式工作。

# behat - output_path 在 behat 2.4.0 中不起作用？

> ID：13709575
> 
> 赞同：0
> 
> 时间：2012-12-04T18:33:05.737
> 
> 标签：behat, mink

我在使用 HTML 格式化程序和输出路径时遇到问题。我正在使用cmd：

`behat --format=html --out=output.html --config /www/config/behat.yml test.feature`

简化的配置 ( **behat.yml** ) 如下所示：

```
default:
  formatter:
    name:                   html
    parameters:
      output_path:          /www/features/output 
```

问题是无论我设置什么 output_path，**output.html**总是放在同一个目录中，**behat.yml** (/www/config) 在哪里。谁能看到我做错了什么？非常感谢您的帮助！

**更新**Behat v 2.4.3 使用与当前目录相同的输出目录（与配置不同），但`output_path`behat.yml 中的参数似乎仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T00:59:16.470

我在 behat 2.4.0 上遇到了同样的问题，这是一个在 2.4.3 版上修复的已知错误。[不幸的是，指南](http://docs.behat.org/cookbook/behat_and_mink.html#installing-mink)中的安装方法 #2 (PHAR) 在撰写本文时只为您提供了 2.4.0 版本......因此，为了解决这个问题，您必须使用 composer 方法 #1。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:26:47.773

考虑使用命令行参数，看看问题是否仍然存在

例如：

/bin/behat --config=/pathToYML -f pretty,progress,junit --out path/to/output/file/for/pretty,,path/to/junit/output/file /path/to/behat/features /文件夹

如果您不指定将输出到控制台的内容，命令行的东西似乎都需要这三个东西，这就是为什么在 pretty 和 path 之间有 , , 的原因

如果默认情况下命令行需要多个选项，这可能会为您提供问题的原因提供线索，您可能还需要为此配置 yaml。

我们的 shell 脚本只是动态地向命令行提供我们想要的东西，而不是使用 yaml 配置进行猜测工作。祝你好运

# html - 在 ie 中显示的新闻提要文本区域

> ID：13709579
> 
> 赞同：1
> 
> 时间：2012-12-04T18:33:17.220
> 
> 标签：html, textarea

滚动的新闻提要（如应该显示在 textarea 中的文本）没有显示在 ie 中，尽管它在 chrome 中有效。当我在 ie 中运行它时，它显示 textarea 但不显示文本。我正在纠正的实际网站是：wirqfm.org

```
<textarea style="text-align: center; font-size: 18px; border-color: rgb(16, 91, 99); resize: none; background-color: rgb(16, 91, 99); color: rgb(255, 211, 78); background-position: initial initial; background-repeat: initial initial;" name="news2" cols="50" rows="3" wrap="virtual" readonly=""></textarea>
</form>
<script language="javascript" type="text/javascript"> 

document.news.news2.style.background = '105b63';
document.news.news2.style.color = 'FFD34E';

var newsText = new Array();
//initializes the text to be printed
//this is all of the banner text the scrolls across the index.html page
newsText[0] = "Welcome to the WIRQ";
newsText[1] = "The longest running high school radio station in the country providing quality alternative music for over 50 years";
newsText[2] = "Our phone number is now (585) 336-0740\.  Give us a call if you have ";

var ttloop = 0;    // Repeat forever? (1 = True; 0 = False)
var tspeed = 75;   // Typing speed in milliseconds (larger number = slower)
var tdelay = 2500; // Time delay between newsTexts in milliseconds

var dwAText, cnews=0, eline=0, cchar=0, mxText;

function doNews() {

 mxText = newsText.length - 1;  //maximum text length
 dwAText = newsText[cnews];  //value of the current news

 setTimeout("addChar()",1000)
}

function addNews() {

 cnews += 1; //increment current news

 if (cnews <= mxText) {  //if current news hasn't surpassed the maximum news array length
     dwAText = newsText[cnews];
     if (dwAText.length != 0) {
     document.news.news2.value = "";  //reset text value of the box
     eline = 0;  //start new line
     setTimeout("addChar()",tspeed)
     }
  }
}

function addChar() {

  if (eline!=1) { //if the line isn't finished
     if (cchar != dwAText.length) {
     nmttxt = "";
     for (var k=0; k<=cchar;k++)
           nmttxt += dwAText.charAt(k);  //put desired amount of characters in the current news

     document.news.news2.value = nmttxt;
     cchar += 1;  //increment the current character
     if (cchar != dwAText.length)  //if it hasn't reached the message end, append typing symbol
           document.news.news2.value += "_";
     } else {  //if the line has finished, reset the current character and mark that the line is finished
     cchar = 0;
     eline = 1;
     }
     if (mxText==cnews && eline!=0 && ttloop!=0) {  //if all the news is over, the endline is reached, and looping is on, repeat
     cnews = -1; setTimeout("addNews()",tdelay*4);
     } else setTimeout("addChar()",tspeed);
  } else {  //if the line has been MARKED as being finished, show the next news segment
     setTimeout("addNews()",tdelay)
  }
}

doNews()

  </script> 
```

# performance - 如何分析特定函数在 R 中运行的时间长度

> ID：13709583
> 
> 赞同：1
> 
> 时间：2012-12-04T18:33:34.727
> 
> 标签：performance, r, profiling, benchmarking, bioinformatics

我刚刚得到了一份工作，通过提高用于计算数据的算法的效率来帮助加速 R 中的程序。有许多循环进行不同的计算，我想知道哪些循环最终使用最多的资源。我想知道如何计算循环完全完成所需的时间。我可以使用这些信息来确定要优化哪些算法，甚至可以编写一个 C 扩展来处理计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:39:12.420

您可以使用：

*   `Sys.time()`或者`system.time()`
*   `rbenchmark`包裹_
*   `microbenchmark`包裹_
*   或分析器（例如`?RProf`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:44:21.447

我`Rprof`用来告诉在哪里看。它会生成一个堆栈样本文件，我只查看随机选择的一小部分，比如 10 个。或者我只是让样本之间的时间足够大，这样我就不会得到太多的样本。

这有两个原因。

1）通过实际检查单个堆栈样本，用你自己的眼睛，你可以看到简单统计没有暴露的问题，因为通过查看堆栈，你可以看到事情发生的原因。这告诉你是否可以摆脱它，这是基本信息。

2) 如果您看到这样一种可以改进的活动模式，您只需在*多个样本*上看到它就知道它值得修复。所有额外的样本，如果它们意味着你不能做（1），实际上是有害的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:41:38.973

这是使用[另一个 SO 问题](https://stackoverflow.com/questions/13705533/does-the-by-function-make-growing-list/13707163#13707163)中的基准的示例，该示例使用`tapply`vs `by`vs进行了比较`data.table`：*根据评论进行编辑*

```
library(rbenchmark)  

           # Different tests being compared
benchmark( using.tapply = tapply(x[, 1], x[, "f"], mean),
           using.by = by(x[, 1], x[, "f"], mean), 
           using.dtable = dt[,mean(col1),by=key(dt)]), 

           # Number of reps. How results are.
           replications = 250, order = "relative"
          )   

#------------------------#
#         RESULTS        # 
#------------------------#

#   COMPARING data.table VS tapply VS by   #
#------------------------------------------#
#             test elapsed relative
#   2  using.dtable   0.168    1.000
#   1  using.tapply   2.396   14.262
#   3      using.by   8.566   50.988 
```

# api - 来自 Shopify api 的自动电子邮件回复

> ID：13709586
> 
> 赞同：0
> 
> 时间：2012-12-04T18:33:47.250
> 
> 标签：api, passwords

我已经成功创建了一个脚本，将用户名/密码等导入 Shopify（使用 api）。

但是，当我这样做时，会自动向客户发送一封电子邮件。我不需要这个，也找不到修改或关闭它的方法。api文档中没有提到电子邮件，这意味着我很难找到方法（一些客户抱怨！）

电子邮件与设置新帐户时发送给客户的电子邮件不同。那么它是从哪里来的呢？如何关闭它/修改它的内容？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:51:49.903

好吧，经过一番挖掘，我找到了生成电子邮件的位置。这是已在 Shopify（客户帐户确认）中“电子邮件和通知”下设置的默认消息之一。

只需确保在开始运营商店之前更改此设置，因为默认消息有点“干”。

谢谢你们的帮助。

# c# - 使 C# ParallelEnumerable.OrderBy 稳定排序

> ID：13709592
> 
> 赞同：4
> 
> 时间：2012-12-04T18:34:05.557
> 
> 标签：c#, linq, sorting, parallel-processing, plinq

我正在使用它们的整数 id 并行排序对象列表`OrderBy`。我有一些具有相同 id 的对象，需要排序稳定。

根据[微软的文档](http://msdn.microsoft.com/en-us/library/dd383824.aspx)，并行化`OrderBy`并不稳定，但有一种实现方法可以使其稳定。但是，我找不到这样的例子。

```
var list = new List<pair>() { new pair("a", 1), new pair("b", 1), new pair("c", 2), new pair("d", 3), new pair("e", 4) };
var newList = list.AsParallel().WithDegreeOfParallelism(4).OrderBy<pair, int>(p => p.order);

private class pair {
  private String name;
  public int order;

  public pair (String name, int order) {
    this.name = name;
    this.order = order;
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T18:59:12.973

[另`OrderBy`一种方法](http://msdn.microsoft.com/en-us/library/dd383662.aspx)的注释建议了这种方法：

```
var newList = list
   .Select((pair, index) => new { pair, index })
   .AsParallel().WithDegreeOfParallelism(4)
   .OrderBy(p => p.pair.order)
   .ThenBy(p => p.index)
   .Select(p => p.pair); 
```

# c++ - 交叉编译时GL_GENERATE_MIPMAP不存在

> ID：13709593
> 
> 赞同：0
> 
> 时间：2012-12-04T18:34:08.000
> 
> 标签：c++, opengl, cross-compiling, codeblocks, mingw32

我在 Linux 上进行交叉编译，想使用 Code::Blocks 为带有 MingW32 的 Windows 编译，按照此页面上的说明进行操作： [链接](http://wiki.codeblocks.org/index.php?title=Code%3a%3aBlocks_and_Cross_Compilers)，它似乎有效，但问题只是一个 OpenGL 指令：

`glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE);`。

编译器告诉“GL_GENERATE_MIPMAP 没有在这个范围内声明”。
我做错了什么？
当我使用默认的 GNU GCC 编译器为 Linux 做同样的事情时，一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:33:16.940

Windows OpenGL ABI 仅涵盖 OpenGL-1.1，这意味着任何超出该版本的 OpenGL 功能只能通过*扩展机制*来实现。

在您的情况下，您只需要一个额外的令牌。您的 MinGW 交叉编译器应该有一组额外的包含目录。至少一进`/usr`一进`/usr/local`（我不是指通常的`/usr/include`目录`/usr/local/include`）。

前往[http://opengl.org/registry](http://opengl.org/registry)获取`glext.h`那里提供的标题并将其放入目录`/usr/local/$MINGW_INCLUDE/GL`中。然后将此文件添加到程序源代码中包含的标头中。那应该给你令牌。

# powershell - Windows 7 凭据提供程序或登录解决方案

> ID：13709599
> 
> 赞同：0
> 
> 时间：2012-12-04T18:34:21.300
> 
> 标签：powershell, windows-7, credentials, logoff, credential-providers

我是stackoverflow的新用户，所以提前感谢您的帮助！这是我的场景：

*   Windows 7 企业版 (x64)
*   多个用户登录和退出
*   需要在新用户登录时注销以前的用户

在我们当前的 Windows XP 环境中，我们有一个自定义的 Gina.dll，它会提示非管理员用户登录将引导前一个用户。这可以通过 Windows 7 中的“快速用户切换”来实现，但这会使应用程序的多个实例处于打开状态，这会导致问题。我们还担心多个用户会导致性能下降。在我的研究中，我发现很可能需要一个凭证提供者，但由于时间限制，我认为我们不能及时建立一个。

我已经成功创建了一个 powershell 脚本（在 stackoverflow 的帮助下！），它将注销以前的用户，它看起来像这样：

```
$pc = qwinsta | select-string "Disc" | select-string -notmatch "services"

$pc = $pc -replace "[^\d]",""

logoff $pc 
```

这样做的问题是，如果用户名包含一个数字，例如 username1 或 user2，此脚本会连接这些数字，然后它会失败。你能帮我编辑这个小的 powershell 脚本，以便它选择“光盘”会话的会话 ID 并注销吗？

进一步的测试结果：

*   如果没有“光盘”用户，它会注销当前登录的用户。这不好，还有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:29:00.337

你可以试试这个：

```
$pc = qwinsta | select-string "Disc" | select-string -notmatch "services"

if ($pc)
{
  $pc = ($pc.tostring() -split ' +')[2]    
  logoff $pc
} 
```

通过这种方式，您可以注销每个断开连接的会话：

```
$pc = qwinsta | select-string "Disc" | select-string -notmatch "services"

if ($pc)
{
  $pc| % { 

  logoff ($_.tostring() -split ' +')[2]

  }
} 
```

# java - Java JsonMappingException 错误

> ID：13709602
> 
> 赞同：2
> 
> 时间：2012-12-04T18:34:27.207
> 
> 标签：java, json, rest, jaxb, jersey

我使用 jersey 在 java 中编写了一个 REST API。当我使用 XML 请求时，一切正常，但是当我使用 JSON 请求时，我总是得到 JsonMappingException。

这些对象是使用 Jaxb 从 xsd 文件生成的。由于 XML 请求有效，我假设这些生成的对象是正确的。

谁能告诉我我错过了什么？

（在底部您可以找到错误消息、WS、对象和 xsd 示例）

提前致谢。

错误：

```
[#|2012-12-04T18:55:56.599+0100|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=29;_ThreadName=Thread-2;|StandardWrapperValve[ServletAdaptor]: PWC1406: Servlet.service() for servlet ServletAdaptor threw exception
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class javax.xml.bind.JAXBElement<be.api.schema.sensorrequest.SensorCreateRequest>]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: org.apache.catalina.connector.CoyoteInputStream@20a49a63; line: 2, column: 1]
        at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
        at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:740)
        at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:683)
        at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
        at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2695)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
        at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
        at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
        at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:474)
        at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
        at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:183)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ajp.AjpProcessorTask.invokeAdapter(AjpProcessorTask.java:135)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:662)
|#] 
```

WS 实现：

```
@POST
    @Consumes(
    {
        MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON
    })
    @Produces(
    {
        MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON
    })
    @Validation(requestObject = SensorCreateRequest.class, xsd = "SensorRequest.xsd")
    public SensorCreateResponse post(@TypeHint(SensorCreateRequest.class) JAXBElement<SensorCreateRequest> JAXBSensorCreateRequest,
                                     @HeaderParam(value = "client") String clientName,
                                     @HeaderParam(value = "session") String sessionToken) throws WebApplicationException
    {

    } 
```

请求对象 (SensorCreateRequest)

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SensorCreateRequestType", propOrder = {

})
@XmlRootElement(name = "sensorCreateRequest")
public class SensorCreateRequest implements Serializable, Equals, HashCode, ToString
{

    @XmlElement(namespace = "http://www.api.be/schema/Sensor", required = true)
    protected Sensors sensors;

    /**
     * Default no-arg constructor
     * 
     */
    public SensorCreateRequest() {
        super();
    }

    /**
     * Fully-initialising value constructor
     * 
     */
    public SensorCreateRequest(final Sensors sensors) {
        this.sensors = sensors;
    }

    //Getters, Setters, toString, hash & equals

} 
```

传感器对象：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SensorsType", propOrder = {
    "sensors"
})
@XmlRootElement(name = "sensors")
public class Sensors implements Serializable, Equals, HashCode, ToString
{

    @XmlElement(name = "sensor")
    protected List<Sensor> sensors;

    /**
     * Default no-arg constructor
     * 
     */
    public Sensors() {
        super();
    }

    /**
     * Fully-initialising value constructor
     * 
     */
    public Sensors(final List<Sensor> sensors) {
        this.sensors = sensors;
    }

    //Getters, Setters, toString, hash & equals

} 
```

传感器对象：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "SensorType", propOrder = {
    "sensorId",
    "name",
    "token",
    "groups",
    "locations",
    "dataProfile",
    "status",
    "first",
    "last",
    "lastValue",
    "longName",
    "circles"
})
@XmlRootElement(name = "sensor")
public class Sensor implements Serializable, Equals, HashCode, ToString
{

    protected int sensorId;
    @XmlElement(required = true)
    protected String name;

    /**
     * Default no-arg constructor
     * 
     */
    public Sensor() {
        super();
    }

    /**
     * Fully-initialising value constructor
     * 
     */
    public Sensor(final int sensorId, final String name) {
        this.sensorId = sensorId;
        this.name = name;
    }

    //Getters, Setters, toString, hash & equals

} 
```

SensorRequest xsd：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        targetNamespace="http://www.api.be/schema/SensorRequest"
        xmlns:tns="http://www.api.be/schema/SensorRequest"
        xmlns:s="http://www.api.be/schema/Sensor"
        elementFormDefault="qualified">

    <xsd:import namespace="http://www.api.be/schema/Sensor" schemaLocation="Sensor.xsd"/>

    <xsd:element name="sensorCreateRequest" type="tns:SensorCreateRequestType"/>

    <xsd:complexType name="SensorCreateRequestType">
        <xsd:all>
            <xsd:element ref="s:sensors" minOccurs="1" maxOccurs="1" />
        </xsd:all>
    </xsd:complexType>

</xsd:schema> 
```

传感器 xsd：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://www.api.be/schema/Sensor"
            xmlns:tns="http://www.api.be/schema/Sensor"
            elementFormDefault="qualified">

    <!-- Sensor -->
    <xsd:element name="sensors" type="tns:SensorsType"/>

    <xsd:complexType name="SensorsType">
        <xsd:sequence>
            <xsd:element name="sensor" type="tns:SensorType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:element name="sensor" type="tns:SensorType" />

    <!-- Sensors -->
    <xsd:complexType name="SensorType">
        <xsd:sequence>
            <xsd:element name="sensorId" type="xsd:int" minOccurs="1" maxOccurs="1"/>
            <xsd:element name="name" type="xsd:string" minOccurs="1" maxOccurs="1"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:30:31.067

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JAXB (JSR-222) 规范没有说明 JSON 绑定。JAX-RS 提供程序利用的几个 JSON 绑定实现能够从 JAXB 注释派生 JSON 表示。在您的环境中，您正在使用[**Jackson**](http://jackson.codehaus.org/)。Jackson 支持 JAXB 元数据的子集，目前不支持`JAXBElement`该类。请参阅杰克逊领导的以下答案：

*   [JACKSON 支持 Java 泛型？](https://stackoverflow.com/questions/13591952/jackson-support-for-java-generics/13597475#13597475)

EclipseLink JAXB (MOXy) 为我们的 JSON 绑定实现中的所有 JAXB 构造提供支持，它可能更适合您的用例：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

下面是一些使用 MOXy 作为 JSON 提供者的官方 Jersey 示例的链接：

*   [https://github.com/jersey/jersey/blob/master/examples/json-moxy/README.html](https://github.com/jersey/jersey/blob/master/examples/json-moxy/README.html)

# java - 为什么通用数组代码可以干净地编译？

> ID：13709605
> 
> 赞同：4
> 
> 时间：2012-12-04T18:34:47.687
> 
> 标签：java, generics

在重构遗留代码并开始使用泛型之后，我发现函数看起来像这样：

```
T[] splitXXX() {
   //blah blah
} 
```

产生大量的类转换异常，因为 jdk 并不真正支持泛型类型的数组。我想知道 - 为什么这段代码可以在 java 中干净地编译？它与向后兼容性有关吗？（如果我能在编译时而不是在运行时发现这个错误，它会为我节省很多调查时间）。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:49:32.393

如果类型变量只出现在返回类型中，那是非常危险的。例如

```
public static <T> T foo(){ ... }

// usage
String s = foo();
Integer i = foo(); 
```

编译器认为，如果程序员分配`T`给`String`，他可能知道他在做什么，所以推断 是很安全的`T=String`。哎呀，真的没有任何限制，`foo()`可以将结果分配给任何类型。

但是程序员可能并不总是知道他在做什么。他依靠强类型编译器来捕捉一些他可能无意中犯的打字错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:51:02.890

仅仅因为你不能做`new T[...]`并不意味着你不能有一个带有类型的变量`T[]`，就像仅仅因为你不能做`new T()`并不意味着你不能有一个带有类型的变量`T`。

完全有可能拥有具有返回方法的正确代码`T[]`：

```
class Something<T> {
    T[] foo;
    Something(T[] in) { foo = in; }
    T[] splitXXX() { return foo; }
} 
```

> 产生大量的类演员表，

好吧，如果它产生异常，这意味着你做错了什么。您没有向我们展示什么代码正在产生异常或任何东西，但您可能正在执行代码中无效的强制转换。

# .net - 指定授予 SQL CLR 用户定义函数的权限以进行部署

> ID：13709609
> 
> 赞同：2
> 
> 时间：2012-12-04T18:34:55.113
> 
> 标签：.net, sqlclr, database-permissions

我在 .NET 2.0 中创建了一个用户定义的函数，并且能够成功地将它部署到我的本地 SQL Server 实例。但是，我需要授予`EXECUTE`该功能的特定用户权限。我希望这在 CLR 方法本身中完成，这样我就不必在每次重新部署 UDF 时手动重新授予权限。从 Visual Studio 部署 CLR 函数会在数据库中生成此函数：

```
ALTER FUNCTION [dbo].[MyFunction](@input [nvarchar](max))
RETURNS [nvarchar](max) WITH EXECUTE AS CALLER
AS 
EXTERNAL NAME [LibName].[UserDefinedFunctions].[MyFunction]
GO 
```

有没有办法让它解决这个问题：

```
GRANT EXECUTE ON [dbo].[MyFunction] TO [wwwUser] AS [dbo] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:11:53.923

是的 - 请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms345099.aspx) - 您只需在项目的根目录中创建一个名为 PostDeployScript.sql 的脚本，它就会自动附加到构建输出中。

请注意，在 VS2012 中，“添加...”对话框有一个选项可以添加“脚本（PostDeployment）”或类似类型的脚本 - 但它会在文件名中添加惯用的“1”，然后就不起作用了。[尽管在MSDN](http://msdn.microsoft.com/en-us/library/aa833410%28v=vs.100%29.aspx)中也提到了它，但我并没有费心去寻找，因为第一种方法很有效。

# java - 创建 JAXBElement 从字符串

> ID：13709611
> 
> 赞同：2
> 
> 时间：2012-12-04T18:34:56.230
> 
> 标签：java, xml, jaxb, jax-rs

我定义了一个类 Book 并且我想创建一个 JAXBElement 对象，该对象将包含与来自 String 对象的 XML 对应的信息。

例如，我可以有类似的东西：

```
String code = "<book><title>Harry Potter</title></book>"; 
```

现在，我想从该字符串开始创建一个 JAXBElement。我需要该字符串来执行一些使用 JAXBElement 无法执行的验证。

那么，我可以做我想做的事吗？如果是，如何？

谢谢！

索林

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:48:39.837

如果您使用其中一种`unmarshal`带有参数的方法，`Class`您将收到一个`JAXBElement`.

**演示**

```
package forum13709611;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Book.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        String code = "<book><title>Harry Potter</title></book>";
        StreamSource source = new StreamSource(new StringReader(code));
        JAXBElement<Book> jaxbElement = unmarshaller.unmarshal(source, Book.class);
    }

} 
```

**书**

```
package forum13709611;

public class Book {

    private String title;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

} 
```

# c# - 将总和网格值绑定到文本框

> ID：13709612
> 
> 赞同：0
> 
> 时间：2012-12-04T18:34:59.420
> 
> 标签：c#, asp.net

`enter code here`我有以下函数可以将网格中特定列的总数相加。如何通过asp访问独立文本框中的最高GB？我试过这个，但没有成功。 **Discovery Jobs** ' > 谁能解释一下，谢谢。

```
double highestGB = 0;

protected void grd_JobTypeJT_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridFooterItem)
    {
        footerItem["GB"].Controls.Add(new LiteralControl("Total: <br/>" + highestGB));
    }
    else if (e.Item is GridDataItem)
    {
        GridDataItem dataItem = e.Item as GridDataItem;

    string GB = dataItem.OwnerTableView.DataKeyValues[dataItem.ItemIndex]["GB"].ToString();
    double gbValue = Double.Parse(GB);
    totalPrice += gbValue;

    if (highestGB == 0 || highestGB < gbValue)
    {
        highestGB = gbValue;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:51:20.047

你有一个看起来像页面级别的变量`highestGB`，所以将它分配给事件处理程序中的`Text`属性'`TextBox``Page_Load`

```
txtHighestGB.Text = highestGB.ToString(); 
```

# java - FileInputStream 错误 Java

> ID：13709616
> 
> 赞同：1
> 
> 时间：2012-12-04T18:35:06.543
> 
> 标签：java, fileinputstream

我正在尝试用 Java 读取一个名为“KFormLList.txt”的文件。它与该程序一起保存在默认包中，但是当我尝试运行它时，我收到以下错误消息：“错误：KFormLList.txt（系统找不到指定的文件）”

我究竟做错了什么？谢谢你的帮助。

```
import java.io.*;

public class VLOCGenerater {

/**
 * @param args
 */
public static void main(String[] args) {
    try {
        //Read the text file "KFormLList.txt"
        FileInputStream fis = new FileInputStream("KFormLList.txt");

        DataInputStream dis = new DataInputStream(fis);
        BufferedReader br = new BufferedReader(new InputStreamReader(dis));
        String strLine;
        int V = 0;
        int LOC = 0;

        while((strLine = br.readLine())!= null ){
            if (strLine.trim().length() != 0){
                System.out.println(strLine);
                V++;
                }
            else {
                LOC++;
            }
        }
        System.out.println("V = " + V);
        System.out.println("LOC = " + LOC);
        dis.close();
     }
     catch (Exception e){
     System.err.println("Error: " + e.getMessage());
    }

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:37:13.100

尝试将文本文件放在项目的根目录中。

传入`FileInputStream`构造函数的name参数是文件系统中文件的路径名。

> 路径名，无论是抽象的还是字符串形式的，都可以是绝对的或相对的。绝对路径名是完整的，因为不需要其他信息来定位它表示的文件。相反，相对路径名必须根据从其他路径名获取的信息来解释。默认情况下，java.io 包中的类总是根据当前用户目录解析相对路径名。此目录由系统属性 user.dir 命名，通常是调用 Java 虚拟机的目录。

我假设您使用的是 Eclipse，默认情况下 Eclipse 将 设置`user.dir`为您项目的根目录。通过阅读其他材料，Netbeans 遵循相同的约定。

这可以使用以下代码进行测试，该代码应输出项目的路径：

```
System.out.println(System.getProperty("user.dir")); 
```

将文件放在目录的根目录中可以让`FileInputStream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:39:21.710

如果您使用的是 NetBeans（可能与 Eclipse 类似），请确保您的文件位于 NetbeansProjects/YourProject/

如果您已将程序编译为 .jar 文件，请将 txt 放在与 .jar 相同的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:42:31.153

要么将文件放在项目的“根目录”中，要么将文件的“绝对路径”作为参数提供给 FileInputStream。

希望有帮助。:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:39:10.000

这样，程序需要工作文件夹中的文件。即你执行java的地方。要从类路径（默认包）加载，请尝试 getResourceAsStream。

# jquery - 在onclick内触发fancybox功能？模拟正常火灾

> ID：13709617
> 
> 赞同：0
> 
> 时间：2012-12-04T18:35:10.230
> 
> 标签：jquery

这对我来说是一个巨大的难题。我会详细解释。

我通常只是像这样触发fancyapps fancybox插件......

```
$("a.gallery-thumb").fancybox({

    afterLoad   : function() {

        /* shtuff */

    }

}); 
```

但是我需要在`a.gallery-thumb`单击时传递一个独特的变量。这个独特的变量是使用这个生成的......

```
FB.Canvas.getPageInfo(function(info) {

    var scrollPosition = info.scrollTop;

}; 
```

这个`scrollPosition`唯一的变量是单击 my 时的当前滚动位置`a.gallery-thumb`。

所以我需要将`scrollPosition`变量传递给下面的fancybox函数。

```
$("a.gallery-thumb").fancybox({

    afterLoad   : function() {

        $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');   

    }

}); 
```

现在你可能在想我为什么不这样做...

```
$("a.gallery-thumb").fancybox({

    afterLoad   : function() {

        FB.Canvas.getPageInfo(function(info) {

            var scrollPosition = info.scrollTop;

            $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');   

        };            

    }

    afterShow    : function() { },
    onUpdate     : function() { }

}); 
```

好的 - 这工作正常，但我需要`scrollPosition`其他花式回调中的变量，比如`afterShow`and `onUpdate`。但可以肯定的是，我可以重复`FB.Canvas.getPageInfo`功能......不完全是，我需要在进行图库初始点击时生成的原始值。

所以也许我必须做这样的事情，但我似乎无法让它工作，关于如何让下面的脚本工作的任何想法？

```
$("a.gallery-thumb").on('click', function (){

    event.preventDefault(); /* I'm trying to stop the image opening by default before my fancybox function runs */

    FB.Canvas.getPageInfo(function(info) {

        var scrollPosition = info.scrollTop;

        $(this).attr('rel','fancybox-thumb').fancybox({

            onUpdate   : function() {

                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');

            },

            afterLoad   : function() {

                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');

            },

            afterShow    : function() {

                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');

            },

            onUpdate     : function() {

                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');

            }

        });

    });

}); 
```

请参阅此处的 js fiddle 模拟我的 fancybox 函数未触发的问题...

```
[http://jsfiddle.net/svsdx/1631/][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:44:41.950

为什么不将变量声明上移一个级别，使其在整个函数的范围内？像：

```
var scrollPosition = 0;
$("a.gallery-thumb").on('click', function (event){

    event.preventDefault(); /* I'm trying to stop the image opening by default before my fancybox function runs */
    FB.Canvas.getPageInfo(function(info) {

        scrollPosition = info.scrollTop;
    });
    return false;
    }).each(function(){

        $(this).attr('rel','fancybox-thumb').fancybox({             
            onUpdate   : function() {   
                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');           
            },                          
            afterLoad   : function() {              
                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');            
        },
            afterShow    : function() {
                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');
            },
            onUpdate     : function() {
                $('.fancybox-wrap').css('top', '+=' + scrollPosition + 'px');
            }
        });
}); 
```

# android - 本机 .so 库中的函数，SIGSEGV 错误 [Android]

> ID：13709620
> 
> 赞同：0
> 
> 时间：2012-12-04T18:35:30.870
> 
> 标签：android, android-ndk, java-native-interface

当我从我的 Java 代码调用 .so 库的本机方法时，我收到致命信号 11 SIGSEGV 错误，并且我的应用程序崩溃。

这个功能可能有什么问题？提前致谢

# ruby-on-rails-3 - Rails：如何以事务方式将 has_many 关联添加到现有模型？

> ID：13709624
> 
> 赞同：2
> 
> 时间：2012-12-04T18:35:46.363
> 
> 标签：ruby-on-rails-3, associations, has-many, belongs-to

让我们想象一下，我经营一家假想的艺术商店，里面有几个模特（模特我指的是 Rails 术语，而不是裸体模特中的艺术术语），看起来像这样：

```
class Artwork < ActiveRecord::Base
  belongs_to :purchase
  belongs_to :artist
end

class Purchase < ActiveRecord::Base
  has_many :artworks
  belongs_to :customer
end 
```

被`Artwork`创建，稍后它被包含在`Purchase`. 在我的`create`或`update`控制器方法中，`Purchase`我想将新`Purchase`的与现有的`Artwork`.

如果`Artwork`不存在，我可以做`@purchase.artworks.build`or `@purchase.artworks.create`，但这些都假设我正在创建一个`Artwork`我不是的新的。我可以用这样的东西添加现有的艺术品：

```
params[:artwork_ids].each do |artwork|
  @purchase.artworks << Artwork.find(artwork)
end 
```

但是，这不是事务性的。数据库立即更新。（当然，除非我在`create`控制器中，在这种情况下，我认为它可以“事务性”完成，因为`@purchase`直到我调用它才存在`save`，但这对我没有帮助`update`。）还有`@purchase.artwork_ids=`方法，但是也是即时的。

我认为这样的事情将适用于该`update`动作，但它非常不雅。

```
@purchase = Purchase.find(params[:id])
result = @purchase.transaction do
  @purchase.update_attributes(params[:purchase])
  params[:artwork_ids].each do |artwork|
    artwork.purchase = @purchase
    artwork.save!
  end
end 
```

接下来是常规的：

```
if result 
  redirect_to purchase_url(@purchase), notice: 'Purchase was successfully updated.' }
else
  render action: "edit"
end 
```

我正在寻找的是它从另一个方向工作的方式，我可以放入`accepts_nested_attributes_for`我的模型然后调用`result = @artwork.save`，一切都像魔术一样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:16:05.357

我已经想出了一种方法来做我想做的事情，而且相当优雅。我需要对`Product`MVC 的每个部分进行更新。

模型：

```
attr_accessible: artwork_ids 
```

我不得不将artifact_ids 添加到attr_accessible，因为它之前没有包含在内。

看法：

```
= check_box_tag "purchase[artwork_ids][]", artwork.id, artwork.purchase == @purchase 
```

在我看来，我为每件艺术品都有一个数组，带有`check_box_tag`. 我无法使用`check_box`，因为不选中该框会导致发送隐藏值“true”而不是艺术品ID。但是，这给我留下了从购买中删除所有艺术品的问题。这样做时`update`，如果我取消选中每个复选框，则`params[:purchase]`哈希将没有`:artwork_ids`条目。

控制器：

```
params[:purchase][:artwork_ids] ||= [] 
```

添加此项可确保设置该值，并将具有删除所有现有关联的预期效果。但是，这会导致讨厌的 rspec `Purchase.any_instance.should_receive(:update_attributes).with({'these' => 'params'})`失败，因为`:update_attributes`实际收到了`{"these"=>"params", "artwork_ids"=>[]})`. 我尝试`hidden_value_tag`在视图中设置 a ，但无法使其正常工作。我认为这个 nit 值得提出一个新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:08:51.703

最好使用使购买模型成为连接表并具有多对多关联。

这是您的用例的示例。

客户模型

```
 has_many :purchases

    has_many :artwork, :through => :purchase 
```

艺术品模型

```
 has_many :purchases

    has_many :customers, :through => :purchase 
```

购买型号

```
 belongs_to :customer
    belongs_to :artwork 
```

购买模型应包含customer_id 和artwork_id。

您还需要创建一个购买控制器，允许您创建一个新的购买对象。

当客户按下购买按钮时，它将创建一个新的购买对象，其中包括 customer_id 和artwork_id。这使您可以在客户和他们购买的艺术品之间建立关联。您还可以有一个 price_paid 列来保存客户在购买时支付的价格。

如果您需要更多帮助，您可以使用 :through 研究加入多对多的协会。

希望能帮助到你

# c# - 拆分一个 IEnumerable 成固定大小的块（返回一个 IEnumerable > 其中内部序列是固定长度的）

> ID：13709626
> 
> 赞同：55
> 
> 时间：2012-12-04T18:35:50.167
> 
> 标签：c#, linq, ienumerable

我想把`IEnumerable<T>`它分成固定大小的块。

我有这个，但由于所有列表创建/复制，它似乎不优雅：

```
private static IEnumerable<IEnumerable<T>> Partition<T>(this IEnumerable<T> items, int partitionSize)
{
    List<T> partition = new List<T>(partitionSize);
    foreach (T item in items)
    {
        partition.Add(item);
        if (partition.Count == partitionSize)
        {
            yield return partition;
            partition = new List<T>(partitionSize);
        }
    }
    // Cope with items.Count % partitionSize != 0
    if (partition.Count > 0) yield return partition;
} 
```

还有更惯用的吗？

编辑：虽然这已被标记为[Divide array into an array of subsequence array](https://stackoverflow.com/questions/3210824/divide-array-into-an-array-of-subsequence-array)的副本，但它不是 - 该问题涉及拆分数组，而这是关于`IEnumerable<T>`. 此外，该问题要求填充最后一个子序列。这两个问题密切相关，但并不相同。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-04T19:00:01.980

您可以尝试自己实现上述批处理方法，如下所示：

```
 static class MyLinqExtensions 
    { 
        public static IEnumerable<IEnumerable<T>> Batch<T>( 
            this IEnumerable<T> source, int batchSize) 
        { 
            using (var enumerator = source.GetEnumerator()) 
                while (enumerator.MoveNext()) 
                    yield return YieldBatchElements(enumerator, batchSize - 1); 
        } 

        private static IEnumerable<T> YieldBatchElements<T>( 
            IEnumerator<T> source, int batchSize) 
        { 
            yield return source.Current; 
            for (int i = 0; i < batchSize && source.MoveNext(); i++) 
                yield return source.Current; 
        } 
    } 
```

我从[http://blogs.msdn.com/b/pfxteam/archive/2012/11/16/plinq-and-int32-maxvalue.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/11/16/plinq-and-int32-maxvalue.aspx)获取了这段代码。

**更新**：请注意，此实现不仅懒惰地评估批次，而且还评估批次内的项目，这意味着只有在枚举所有先前的批次之后才枚举批次时，它才会产生正确的结果。例如：

```
public static void Main(string[] args)
{
    var xs = Enumerable.Range(1, 20);
    Print(xs.Batch(5).Skip(1)); // should skip first batch with 5 elements
}

public static void Print<T>(IEnumerable<IEnumerable<T>> batches)
{
    foreach (var batch in batches)
    {
        Console.WriteLine($"[{string.Join(", ", batch)}]");
    }
} 
```

将输出：

```
[2, 3, 4, 5, 6] //only first element is skipped.
[7, 8, 9, 10, 11]
[12, 13, 14, 15, 16]
[17, 18, 19, 20] 
```

因此，如果您的用例在按顺序评估批次时假设批处理，那么上面的惰性解决方案将起作用，否则如果您不能保证严格的顺序批处理（例如，当您想要并行处理批次时），您可能需要一个解决方案它急切地枚举批处理内容，类似于上面的问题或[MoreLINQ中提到的内容](https://github.com/morelinq/MoreLINQ/blob/dbad4803bedfef69f6a27cd897d0a4b2a66ce491/MoreLinq/Batch.cs#L65-L102)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-04T18:45:55.840

也许？

```
public static IEnumerable<IEnumerable<T>> Partition<T>(this IEnumerable<T> items, int partitionSize)
{
    return items.Select((item, inx) => new { item, inx })
                .GroupBy(x => x.inx / partitionSize)
                .Select(g => g.Select(x => x.item));
} 
```

也有一个已经实现的：morelinq's **[Batch](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)**。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-04T20:41:24.203

感觉就像您想要*两个*迭代器块（“`yield return`方法”）。我写了这个扩展方法：

```
static class Extensions
{
  public static IEnumerable<IEnumerable<T>> Partition<T>(this IEnumerable<T> items, int partitionSize)
  {
    return new PartitionHelper<T>(items, partitionSize);
  }

  private sealed class PartitionHelper<T> : IEnumerable<IEnumerable<T>>
  {
    readonly IEnumerable<T> items;
    readonly int partitionSize;
    bool hasMoreItems;

    internal PartitionHelper(IEnumerable<T> i, int ps)
    {
      items = i;
      partitionSize = ps;
    }

    public IEnumerator<IEnumerable<T>> GetEnumerator()
    {
      using (var enumerator = items.GetEnumerator())
      {
        hasMoreItems = enumerator.MoveNext();
        while (hasMoreItems)
          yield return GetNextBatch(enumerator).ToList();
      }
    }

    IEnumerable<T> GetNextBatch(IEnumerator<T> enumerator)
    {
      for (int i = 0; i < partitionSize; ++i)
      {
        yield return enumerator.Current;
        hasMoreItems = enumerator.MoveNext();
        if (!hasMoreItems)
          yield break;
      }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
      return GetEnumerator();      
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-04T19:24:05.330

最疯狂的解决方案（使用[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)）：

```
public static IEnumerable<IList<T>> Partition<T>(this IEnumerable<T> items, int partitionSize)
{
    return items
            .ToObservable() // Converting sequence to observable sequence
            .Buffer(partitionSize) // Splitting it on spececified "partitions"
            .ToEnumerable(); // Converting it back to ordinary sequence
} 
```

我知道我改变了签名，但无论如何我们都知道我们会有一些固定大小的集合作为一个块。

顺便说一句，如果您将使用迭代器块，请不要忘记将您的实现拆分为两种方法来热切地验证参数！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-04T18:51:06.923

对于优雅的解决方案，您还可以查看[MoreLinq.Batch。](https://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs)

它将源序列分批成大小合适的桶。

例子：

```
int[] ints = new int[] {1,2,3,4,5,6};
var batches = ints.Batch(2); // batches -> [0] : 1,2 ; [1]:3,4 ; [2] :5,6 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T18:43:21.230

```
public static IEnumerable<IEnumerable<T>> Partition<T>(this IEnumerable<T> items, 
                                                       int partitionSize)
{
    int i = 0;
    return items.GroupBy(x => i++ / partitionSize).ToArray();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T18:42:06.317

[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)命名空间中的分区器类怎么样？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T18:46:51.023

您可以使用整数除法的[重载`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb549393.aspx)和利用整数除法来做到这一点。

```
return items.Select((element, index) => new { Element = element, Index = index })
    .GroupBy(obj => obj.Index / partitionSize, (_, partition) => partition); 
```

# php - 如何使用magento在自定义模块中缓存模型

> ID：13709628
> 
> 赞同：0
> 
> 时间：2012-12-04T18:35:56.707
> 
> 标签：php, magento, caching

我有自定义模块。在模型中，我有一个类 XXX 和方法 YYY。在这种方法中，我使用 cURL 向远程服务器发出请求。我想使用 magento 缓存来缓存这个结果。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:04:54.400

你可以做这样的事情，只需用你的 cUrl 调用替换 rss

```
$url = 'http://www.site.com';
$cache = Mage::getSingleton('core/cache');
$key = md5($url);

if(! $rss = $cache->load($key)){
    $objDOM = new DOMDocument();
    $objDOM->load($url);
    $rssXml = $objDOM->getElementsByTagName("item");

    $rss = array();
    foreach( $rssXml as $value ){
        $data['title'] = $value->getElementsByTagName("title")->item(0)->nodeValue;
        $data['description'] = $value->getElementsByTagName("description")->item(0)->nodeValue;

        $rss[] = $data;
    }

    $cache->save(urlencode(serialize($rss)), $key, array("homepage_cache"), 60*60);
}
else{
  $rss = unserialize(urldecode($rss)); 
}

print_r($rss); 
```

阅读更多@ [http://www.nicksays.co.uk/2010/07/developers-guide-magento-cache/](http://www.nicksays.co.uk/2010/07/developers-guide-magento-cache/)

# asp.net-mvc-3 - 在部分视图中获取 viewdatadictionary 值

> ID：13709631
> 
> 赞同：15
> 
> 时间：2012-12-04T18:36:18.620
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, partial-views

我有一个部分视图，我试图从父视图中获取值。这就是我正在尝试的：

```
 @Html.Partial("Shared", "Home", new ViewDataDictionary { { "9595959", "8sd8sds8das8d" } }) 
```

这是部分观点：

```
 <!-- Google Code for apply Conversion Page --> <script type="text/javascript">
   /* <![CDATA[ */
   var google_conversion_id = "viewdata-number1";
   var google_conversion_language = "en";
   var google_conversion_format = "2";
   var google_conversion_color = "ffffff";
   var google_conversion_label = "viewdata-number2"; var google_conversion_value = 0;
   /* ]]> */
   </script>
   <script type="text/javascript"  
   src="https://www.googleadservices.com/pagead/conversion.js">
   </script>
   <noscript>
   <div style="display:inline;">
   <img height="1" width="1" style="border-style:none;" alt=""  
   src="https://www.googleadservices.com/pagead/conversion/viewdata-number1/?value=0&amp;label=viewdata-number2&amp;guid=ON&amp;script=0"/>
   </div>
   </noscript> 
```

是否可以立即获得价值？我没有为局部视图分配任何模型或控制器。提前谢谢，Laziale

更新代码：

```
@{
    var variable = ViewData["First"];
        <!-- Google Code for apply Conversion Page --> <script type="text/javascript">
   /* <![CDATA[ */
   var google_conversion_id = variable;
   var google_conversion_language = "en";
   var google_conversion_format = "2";
   var google_conversion_color = "ffffff";
   var google_conversion_label = "f6vICKTT6gMQzNOf3gM"; var google_conversion_value = 0;
   /* ]]> */
   </script>
   <script type="text/javascript"  
   src="https://www.googleadservices.com/pagead/conversion.js">
   </script>
   <noscript>
   <div style="display:inline;">
   <img height="1" width="1" style="border-style:none;" alt=""  
   src="https://www.googleadservices.com/pagead/conversion/1002957260/?value=0&amp;label=f6vICKTT6gMQzNOf3gM&amp;guid=ON&amp;script=0"/>
   </div>
   </noscript> 
} 
```

你认为这会奏效吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T18:47:26.410

对不起，我不太明白你的问题。您可以像这样获取部分 ViewData 值：

```
var a = (int)ViewData["9595959"]; // variable a will get value "8sd8sds8das8d" 
```

您还可以像这样创建扩展当前视图 ViewDataDictionary 的新 ViewDataDictionary：

```
 @Html.Partial("Shared", "Home", new ViewDataDictionary(ViewData) { { "9595959", "8sd8sds8das8d" } }) 
```

它会像这样工作：

```
 @{
     var variable = (int)ViewData["First"];
 }
    <!-- Google Code for apply Conversion Page --> <script type="text/javascript">
 /* <![CDATA[ */
 var google_conversion_id = @variable;
 var google_conversion_language = "en";
 var google_conversion_format = "2";
 var google_conversion_color = "ffffff";
 var google_conversion_label = "f6vICKTT6gMQzNOf3gM"; var google_conversion_value = 0;
 /* ]]> */
 </script>
 <script type="text/javascript" src="https://www.googleadservices.com/pagead/conversion.js">
 </script>
 <noscript>
 <div style="display:inline;">
 <img height="1" width="1" style="border-style:none;" alt=""  
 src="https://www.googleadservices.com/pagead/conversion/1002957260/?value=0&amp;label=f6vICKTT6gMQzNOf3gM&amp;guid=ON&amp;script=0"/>
 </div>
 </noscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:48:24.043

[关联](https://stackoverflow.com/questions/4865162/asp-mvc-partial-with-model-and-viewdatadictionary-how-do-i-access-the-viewdata)

这是一个人在做我认为你想做的事情的例子。

此外，在您的部分中，只需执行 ViewData["9595959"] 即可挂钩该特定数据。

# html - 没有空格的 HTML 表格

> ID：13709632
> 
> 赞同：5
> 
> 时间：2012-12-04T18:36:19.183
> 
> 标签：html, css, html-table

我有以下 CSS 代码：

```
 tr.uprightTr
    {
        padding: 0px;
        margin: 0px;
        height: 10px;
        border: none;
        border-spacing: 0px;
    }
    td.uprightTd
    {
        padding: 0px;
        margin: 0px;
        height: 10px;
        border: none;
        border-spacing: 0px;
    }
    table.uprightTbl
    {
        padding: 0px;
        margin: 0px;
        border: none;
        border-collapse: collapse;
        border-spacing: 0px;
    } 
```

以及以下 HTML：

```
<table class="uprightTbl" cellpadding="0" cellspacing="0">
    <tr class="uprightTr">
         <td class="uprightTd"><input type="checkbox" /></td>
... 
```

无论我尝试什么，它都会在元素之间保留一些空间。关于我可以尝试或可能做错的任何想法？

PS：我还检查了 Chrome 上的元素，元素成功到达了相关的 css 行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T18:39:31.847

您是否尝试为所有元素添加 CSS 规则，例如：

```
.uprightTbl * {
    border: none;
    border-collapse: collapse;
    padding: 0;
    margin: 0;
} 
```

它可能会解决您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T18:42:36.663

应用以下样式：

```
border-spacing:0;
border-collapse:collapse; 
```

此查询已存在：[Set cellpadding and cellspacing in CSS?](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T18:41:19.903

添加以下CSS代码：

```
input[type=checkbox] { margin:0 } 
```

默认情况下，浏览器会设置一些边距。

希望这可以帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T19:09:46.833

检查任何 display:inline-block... 并更改为 display:block。inline-block 在元素后添加 3-4px 的空间...

如果您使用任何图像，请确保它们显示为块。

# android - 如何使用 jquery mobile 构建一个 android 样式的操作栏溢出

> ID：13709633
> 
> 赞同：0
> 
> 时间：2012-12-04T18:36:28.050
> 
> 标签：android, jquery-mobile, android-actionbar, styles

我正在尝试使用 jQuery mobile 将 Andriod 样式的操作栏添加到我的应用程序中。具体来说，我想模拟此[页面](http://developer.android.com/design/patterns/actionbar.html)上标记为 #4 的“动作溢出” 。我很难相信以前没有这样做过，所以我不想重新发明轮子。如果还没有完成，我怀疑有一个很好的理由。目前我在我的应用程序中使用这些[指南](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)。但我想让它看起来更像动作栏（显然）。

它是由其他概念所知道的吗？还是 Jquery Mobile 没有真正的概念？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:29:34.787

我不知道有这样的事情。我建议从标题中的[布局网格开始。](http://jquerymobile.com/test/docs/content/content-grids.html)这是一个简单的例子：http: [//jsfiddle.net/Twisty/YTGKs/4/](http://jsfiddle.net/Twisty/YTGKs/4/)

```
<div data-role="page" id="index">
    <div data-role="header" data-theme="d">
        <div class="ui-grid-c">
            <div class="ui-block-a" style="width: 40px;">
                <a href="#back" data-rel="back"><img src="" style="display: block; width: 40px; height: 40px;"></a>
            </div>
            <div class="ui-block-b"  style="width: 75%">Action Bar</div>
            <div class="ui-block-c" style="width: 40px;">
                <span class="ui-btn-inner">
                    <a href="#search"><span class="ui-icon ui-icon-search"></span></a>
                </span>
            </div>
            <div class="ui-block-d" style="width: 40px;"></div>
        </div>
    </div>
    <div data-role="content">
        <p>Hello JQuery Mobile</p>
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div> 
```

这将帮助您创建一个您想要的操作栏，并且您可以将其设置为执行您需要的操作、使用您自己的图像并适合您自己的样式。

*编辑：*更新为更清洁的示例：http: [//jsfiddle.net/Twisty/YTGKs/4/](http://jsfiddle.net/Twisty/YTGKs/4/)

# iphone - 在没有动画的情况下调整 UIView 的大小

> ID：13709634
> 
> 赞同：2
> 
> 时间：2012-12-04T18:36:32.887
> 
> 标签：iphone, objective-c, uiview

我正在尝试将 UIView 从一个父视图移动到另一个父视图并调整它的大小，现在我得到了它，但是动画，我怎么能在没有动画的情况下做到这一点？videoMover 是根据其新父级移动和调整大小的视图。

这是我正在调整大小的代码，在此之前更改了视图的父级。

```
CGRect fsRect = CGRectMake(0,0,videoMover.superview.bounds.size.width, videoMover.superview.bounds.size.height);
CGSize presentationSize = CGSizeMake(1280,720);
CGSize viewSize = fsRect.size;
CGFloat scale = fmin(viewSize.width/presentationSize.width, viewSize.height/presentationSize.height);
CGRect videoRect = AVMakeRectWithAspectRatioInsideRect(presentationSize,fsRect);
videoMover.autoresizesSubviews = NO;
videoMover.frame = fsRect;
videoMaster.frame = fsRect;
((CALayer*)[videoMaster.layer.sublayers objectAtIndex:0]).frame = fsRect; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:12:07.687

很简单，首先移动你的视图并设置它隐藏，移动完成后，让你的视图可见。

```
 [yourView setHidden:YES/NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:45:49.087

好的，想通了。当我在我的 CALayer 上设置框架时，动画正在发生。我用这个修复了它：

```
[CATransaction begin];
[CATransaction setValue: (id) kCFBooleanTrue forKey: kCATransactionDisableActions];
((CALayer*)[videoMaster.layer.sublayers objectAtIndex:0]).frame = fsRect;
[CATransaction commit]; 
```

# c# - 异步客户端服务器通信问题

> ID：13709639
> 
> 赞同：1
> 
> 时间：2012-12-04T18:36:39.653
> 
> 标签：c#, asynchronous, client-server

我是编程新手，我正在开发一个异步客户端服务器应用程序。我可以从客户端向服务器发送消息，但是当我将数据接收到服务器（OnDataReceived 方法）并尝试将相同的数据发送回客户端（出于测试目的）时，我不能。不知道我需要提供哪些其他信息，所以请告诉我，我并不是要含糊其辞。

服务器代码

```
public void OnDataReceived(IAsyncResult asyncResult)
    {
        try
        {
            SocketPacket socketData = (SocketPacket)asyncResult.AsyncState;
            int iRx = 0;
            iRx = socketData.currentSocket.EndReceive(asyncResult);
            char[] chars = new char[iRx];
            Decoder decoder = Encoding.UTF8.GetDecoder();
            int charLen = decoder.GetChars(socketData.dataBuffer, 0, iRx, chars, 0);
            String receivedData = new String(chars);

            //BroadCast(receivedData);

            this.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)(() => lbxMessages.Items.Add(receivedData)));

            //Updated Code
            this.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)(() => broadcast(receivedData)));

            WaitForData(socketData.currentSocket);

        }
        catch (ObjectDisposedException)
        {
            System.Diagnostics.Debugger.Log(0, "1", "\n OnDataRecieved: Socket has been closed\n");
        }
        catch (SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

public class SocketPacket
    {
        public Socket currentSocket;
        public byte[] dataBuffer = new byte[50];//allowing the 50 digist to be sent at once
    }

    private void WaitForData(Socket socket)
    {
        try
        {
            if (workerCallBack == null)
            {
                workerCallBack = OnDataReceived;
            }
            SocketPacket sckPack = new SocketPacket();
            sckPack.currentSocket = socket;
            socket.BeginReceive(sckPack.dataBuffer, 0, sckPack.dataBuffer.Length, SocketFlags.None, workerCallBack, sckPack);
        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    } 
```

更新以回应安德鲁的回复

我有一个连接客户端时将调用的方法

```
private void OnClientConnect(IAsyncResult asyncResult)
    {
        try
        {
            //Here we complete/end the Beginaccept() asynchronous call by
            //calling EndAccept() - which returns the reference to a new socket object
            workerSocket[clientCount] = listenSocket.EndAccept(asyncResult);

            //Let the worker socket do the further processing for the just connected client
            WaitForData(workerSocket[clientCount]);

            //Now increment the client count
            ++clientCount;

            if (clientCount<4)//allow max 3 clients
            {
                //Adds the connected client to the list
                connectedClients.Add(listenSocket);
                String str = String.Format("Client # {0} connected", clientCount);                   

                this.Dispatcher.Invoke((Action)(() =>
                {
                    //Display this client connection as a status message on the GUI
                    lbxMessages.Items.Add(str);
                    lblConnectionStatus.Content =clientCount + " Connected";
                }));

                //Since the main Socket is now free, it can go back and wait for
                //other clients who are attempting to connect
                listenSocket.BeginAccept(OnClientConnect, null);
            }
        }
        catch (ObjectDisposedException)
        {
            System.Diagnostics.Debugger.Log(0, "1", "\n OnClientConnection: Socket has been closed\n");
        }
        catch (SocketException)
        {
            HandleClientDisconnect(listenSocket);
        }
    } 
```

（更新）服务器收到的广播消息的添加方法返回给客户端

```
public void broadcast(string msg)
    {
        //foreach (Socket item in connectedClients)
        //{
        Socket broadcastSocket;
        broadcastSocket = workerSocket[0]; //sends message to first client connected
        byte[] broadcastBytes = null;
        broadcastBytes = Encoding.ASCII.GetBytes(msg);
        broadcastSocket.Send(broadcastBytes);
        //}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:21:26.983

谢尔盖说得对。如果您希望一台服务器处理多个客户端，那么您将需要某种可以侦听新连接的 ServerTerminal 类，然后设置某种“connectedclient”类来处理该套接字的 IO。您的“OnDataReceived”方法将在 connectedclient 类中。

在您的套接字接受例程中，它应该类似于：

```
private void OnClientConnection(IAsyncResult asyn)
    {
        if (socketClosed)
        {
            return;
        }

        try
        {
            Socket clientSocket = listenSocket.EndAccept(asyn);

            ConnectedClient connectedClient = new ConnectedClient(clientSocket, this, _ServerTerminalReceiveMode);

            connectedClient.StartListening(); 
```

在接受例程中，您传递了一个套接字 - 我将其命名为“clientSocket”。这是您要写入的套接字，而不是侦听套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:56:16.570

服务器端 TCP 通信涉及两个套接字。第一个套接字是一个监听套接字，您应该只将它用于接受新请求。然后，每次您接受来自客户端的新请求时，您都会为每个连接获得另一个套接字。

您试图通过**侦听套接字**发回数据，而不是通过您接受的套接字。

# coldfusion - Coldfusion 为 web.config 生成 rewritemap

> ID：13709641
> 
> 赞同：0
> 
> 时间：2012-12-04T18:36:46.233
> 
> 标签：coldfusion, web-config, coldfusion-10

我的 web.config 中有一个重写 url 的重写映射。

```
<rewriteMap name="Products"> 
<add key="Ipad_3" value="4399" />
<add key="Ipad_Mini" value="4399" />
</rewriteMap> 
```

我不想手动插入新`<add>`标签，而是希望coldfusion脚本`<add>`使用从数据库中获取的数据生成标签并将其插入web.config。请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:59:44.013

这不会像你想要的那样工作。

在回收 IIS 应用程序池之前，无法识别对 web.config 的更改。每次添加或删除产品时回收应用程序池似乎是个坏主意。更不用说如果出现任何问题，您的整个网站都会因为 web.config 文件错误而瘫痪。

您应该考虑使用像[ISAPI Rewrite](http://www.isapirewrite.com/)这样的动态重写工具。

# c++ - 在 STL 列表 C++ 中使用结构

> ID：13709645
> 
> 赞同：1
> 
> 时间：2012-12-04T18:36:53.090
> 
> 标签：c++, list, stl

我是使用 c++ 的新手，我真的不知道如何使用 STL 列表。我正在制作城市街道交叉口的图表。这是我的结构/头文件：

全局标头

```
#ifndef GLOBAL_H
#define GLOBAL_H

typedef struct Vertex_ vertex;
typedef struct Edge_ ege;

#endif 
```

顶点标头

```
#ifndef VERTEX_H
#define VERTEX_H
 #include<list>
#include "global.h"
#include "edgelist.h"
struct Vertex_{
    int xsect;
    int danger;
    char xstreet[25];

    list<Edge_> EdgeList;
    struct Vertex_ *next;
    struct Vertex_ *prev;
};   

 #endif 
```

边缘标头

```
#ifndef EDGE_H
#define EDGE_H

#include "global.h"
#include "vertex.h"
struct Edge_{
    Vertex_ *adjvertex;
    int distance;

    struct Edge_ *next;
    struct Edge_ *prev;
};  

#endif 
```

我的导师没有给我们任何关于 c++ 的注释，所以真的不知道如何开始图表。以下是我想开始我的主要工作的方式：

```
#include<iostream>
#include<list>
#include "vertex.h"
#include "edge.h"
#include "global.h"
int main(){
   list<Vertex_> xsection;
   list<Edge_> EdgeList;
} 
```

我必须从另一个文件中扫描数据，所以我真的不知道列表的大小。问题是我是否需要初始化列表的大小，或者我是否可以使用迭代器添加内容。另一个问题是如何访问此列表元素中的数据。我会只使用迭代器并拥有：

```
*iter->EdgeList.begin(); 
```

如果有人拥有一个包含 STL 列表的所有命令和功能以及如何使用它的网站，那将是非常棒的，因为我目前打开了 10 个网站，只是为了看看这些列表是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:48:26.983

您不需要初始化列表的大小，只需使用`std::list.push_back()`或添加新元素即可`std::list.push_front()`

我喜欢这个列表链接： [http ://www.cplusplus.com/reference/list/list/](http://www.cplusplus.com/reference/list/list/)

这适用于一切： [http ://www.cplusplus.com/reference/](http://www.cplusplus.com/reference/)

cplusplus.com 的一个好处是它们指定了函数调用的复杂性（如果这是由标准定义的）。

关于您在评论中的问题，std 是一个命名空间，您可以通过添加来导入它，`using namespace std;`因此您不需要编写`std::list`. 在 C++ 中，您可以有多个命名空间，每个命名空间都实现自己的`list`.

`list`表示包含类型元素的模板列表`X`。`std::list`是一个 STL 列表。

这是一个简单的例子：

```
int main(void) {
    std::list<std::string> l;
    l.push_back("overflow");
    l.push_back("test");

    /* Access it through iterators */
    /* iterators are kinda like pointers, but each ++ moves to the next item */
    std::list<std::string>::iterator it;
    for(it = l.begin(); it != l.end(); it++) {
        std::cout << "item: " << *it << std::endl;
    }

    l.push_front("stack");
    std::cout << *l.begin() << std::endl;

} 
```

这是工作代码：http: [//ideone.com/R8sQhH](http://ideone.com/R8sQhH)

如果您使用的是 struct ：

```
struct test {
    string tmp;
};

void somefunction() {
    std::list<test> l;
    /* code */
    std::cout << (l.begin())->tmp << std::endl;
} 
```

完整的结构示例： http: [//pastebin.com/YETUq1xT](http://pastebin.com/YETUq1xT)

# c - 在不使用除法或模运算符的情况下找到两个数字的 GCD？

> ID：13709651
> 
> 赞同：2
> 
> 时间：2012-12-04T18:37:14.963
> 
> 标签：c, algorithm, numbers

我想找到两个数字的 GCD，但不使用除法或 mod 运算符。一种明显的方法是编写自己的 mod 函数，如下所示：

```
enter code here
int mod(int a, int b)
{
   while(a>b)
       a-=b;

return a;
} 
```

然后在euclid算法中使用这个函数。还有什么办法吗？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T18:43:09.160

您可以预先使用基于减法的[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations)版本：

```
function gcd(a, b)
    if a = 0
       return b
    while b ≠ 0
        if a > b
           a := a − b
        else
           b := b − a
    return a 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T18:39:33.117

您正在寻找的是二进制 GCD 算法：

```
public class BinaryGCD {

    public static int gcd(int p, int q) {
        if (q == 0) return p;
        if (p == 0) return q;

        // p and q even
        if ((p & 1) == 0 && (q & 1) == 0) return gcd(p >> 1, q >> 1) << 1;

        // p is even, q is odd
        else if ((p & 1) == 0) return gcd(p >> 1, q);

        // p is odd, q is even
        else if ((q & 1) == 0) return gcd(p, q >> 1);

        // p and q odd, p >= q
        else if (p >= q) return gcd((p-q) >> 1, q);

        // p and q odd, p < q
        else return gcd(p, (q-p) >> 1);
    }

    public static void main(String[] args) {
        int p = Integer.parseInt(args[0]);
        int q = Integer.parseInt(args[1]);
        System.out.println("gcd(" + p + ", " + q + ") = " + gcd(p, q));
    }
} 
```

来源：[http ://en.wikipedia.org/wiki/Binary_GCD_algorithm](http://en.wikipedia.org/wiki/Binary_GCD_algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:47:37.830

使用减法的递归 GCD 计算：

```
int GCD(int a, int b)
{
    int gcd = 0;
    if(a < 0)
    {
        a = -a;
    }
    if(b < 0)
    {
        b = -b;
    }
    if (a == b)
    {
        gcd = a;
        return gcd;
    }
    else if (a > b)
    {
        return GCD(a-b,b);
    }
    else
    {
        return GCD(a,b-a);
    }
} 
```

来源：[链接](http://i-nfiniteloop.blogspot.ro/2012/10/finding-greatest-common-divisor-of-two.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-30T16:10:53.757

一个或多或少直接的方法是下面的代码，它源自 Pick 定理：

```
int gcd(int a, int b)
{

     if( a < 0)
     {
         a = -a;
     }

     if( b < 0)
     {
         b = -b;
     }

     if( a == b)
     {
          return a;
     }

     //swap the values to make the upper bound in the next loop minimal
     if( a > b)
     {
        int swap = a;
        a = b;
        b = swap;
     }

     int temp=0;

     for(int i=1; i<=a; i++)
     {
          temp += math.floor(b*i/a);
     }

     return (a*b + b - a + temp)/2;
} 
```

# xcode - 有没有办法滚动到xcode中的最后一行？

> ID：13709652
> 
> 赞同：25
> 
> 时间：2012-12-04T18:37:18.363
> 
> 标签：xcode

我问是否有任何方法可以滚动到 xcode 中的最后一行之外，因为我总是在文件末尾按很多回车键，这样我就不必总是在我的底部键入我的代码窗户。

我浏览了 XCode 的属性面板，并查看了[这个论坛](http://www.cocoabuilder.com/archive/xcode/253478-scrolling-in-xcode-editor.html)。到目前为止，答案看起来是否定的，但我仍然抱有希望。:)

有什么想法可以欺骗 XCode 滚动到最后一行之外吗？（我有 XCode 4.5.2）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-06-12T07:14:40.300

现在有一个插件！

看看[SCXcodeEditorInset](https://libraries.io/alcatraz/SCXcodeEditorInset)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T04:27:04.330

不要认为有办法做到这一点，但如果您试图在靠近显示器顶部的同时编辑代码的按钮，您可以单击 xcode 中的中间视图按钮以调出控制台/观察器，然后拖动直到理想的位置。这确实会减少编辑器的整体空间，但如果您喜欢这样做或只是暂时需要这样做，有时会很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T05:43:44.930

我所做的是，当您在底部完成输入后，在转到顶部之前，输入一些不必要的代码“asdf”作为错误，然后转到您想要的位置。你可以回来点击右上角的红色错误面板。

# ruby-on-rails - Ruby .each 效率

> ID：13709655
> 
> 赞同：5
> 
> 时间：2012-12-04T18:37:36.420
> 
> 标签：ruby-on-rails, ruby, performance, activerecord

我这样做（在我看来）：

```
# myUser is a User in ActiveRecord with :has_many :posts
myUser.posts.each do |post|
end 
```

如果用户有十个帖子，这是否会进行十次数据库调用？这些循环应该像（不那么漂亮）吗？：

```
myPosts = myUser.posts
myPosts.each do |post|
end 
```

[这](http://pastebin.com/KEv77yzX)是我用来测试的 ruby​​ 文件的粘贴箱。**编辑**修改了粘贴箱。

这让我想起了Java中的代码

```
for (int i = 0; i < someExpensiveFunction(); i++) 
```

那应该是（除非数组被修改）

```
for (int i = 0, len=someExpensiveFunction(); i < len; i++) 
```

我错过了什么吗？我看到一堆 Rails 示例，其中人们循环遍历`has_many`对象的某个字段。这对我很重要，因为我正在尝试优化我的应用程序的性能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T18:41:50.077

> 如果用户有 10 个帖子，这在技术上会进行 10 次数据库调用？

没有。

```
myUser = User.find 123
myUser.posts.each do |post|
  puts post.title
end 
```

此处的代码将运行 2 个查询。第一个将通过 id 找到用户，返回一行。第二个将运行一个查询，询问所有用户 id 匹配的帖子`myUser`。然后`each`将使用该结果进行迭代。

* * *

如果您在开发模式下查看日志，它会告诉您它正在运行的查询，您应该会看到一个查询返回所有这些帖子。

Rails 使用关联代理对象来保存您的查询，当您需要记录时执行查询，然后*缓存结果*。这是一段非常有用的代码，并且在大多数情况下，它会为您处理类似的事情。

这是*Rails*的一个特性，而不是 ruby​​。

* * *

在 ruby​​ 级别，`each`只需作用于集合。

```
def get_letters
  puts 'executing "query"'
  sleep(3)
  ["a","b","c"]
end

get_letters.each do |item|
  puts item
end 
```

这应该打印出来。

```
executing "query"
a
b
c 
```

该`get_letters`方法执行后，它返回一个数组，一个已经充满数据的数组就是我们调用该`each`方法的对象，因此我们可以处理每个项目。获取集合并遍历它是 2 个完全独立的步骤。

* * *

从您的粘贴箱：

```
# will this run forever?
myArr = ["a","b","c"]
myArr.each do |item|
  myArr.push("x")
end 
```

是的，它会，但不是因为数组被“获取”了一遍。

这相当于像这样的javascript，它更好地说明了它。

```
myArr = ["a","b","c"];
for (var i = 0; i < myArr.length; i++) {
  myArr.push('x');
} 
```

原始数组，在循环的*每次迭代*中检查它是否已经完成。但是因为每次我们前进一个项目时数组都会变长，这`i < myArr.length`将始终是`true`因为它们在每次迭代中都增加了一个。`each`出于同样的原因，你的循环在 ruby​​ 中也会发生同样的事情。

它永远运行，而不是因为您不断运行一些代码来重新生成数组。它永远运行，因为您正在人为地改变结果数组。

# struct - 如何从 Coldfusion 中的结构中删除键/值对？

> ID：13709660
> 
> 赞同：4
> 
> 时间：2012-12-04T18:37:49.783
> 
> 标签：struct, coldfusion, key-value

（使用Coldfusion8/MySQL5.0.88）

我将 JSON 字符串存储在数据库中。字符串由一个`id`（键）和`items`一个列表中的数字（值）组成。

值如下所示：

```
LOCAL.dropRecall = {"994323":"596895,596871,596864,596888,596840abc,596833,596826","991234":"9999,8888,abced"} 
```

我的问题是尝试删除一`key/value`对。我正在尝试这样：

```
<cfif  StructKeyExists(LOCAL.dropRecall,"#Session.id#")>
   <cfdump output="e:\dump.txt" label="catch" var="detected">
   <cfset StructDelete( LOCAL.dropRecall,"#Session.id#", "true")>
</cfif> 
```

正确检测到键/值对（`detected`报告），但删除它不起作用。

**问题：**
我做错了什么？为什么没有删除键/值对？

**编辑**：
好的。找到了。我在数据库中查询 field `items`，将其设置为`LOCAL.dropRecall`并写`items`回数据库......所以`structDelete`工作正常，但我没有将空结构写回数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T18:59:53.687

检查 的值`session.id`是否是您认为的值（没有额外的空格或类似的东西）。如果您的代码在 CF8 上，我尝试了修改，它对我来说效果很好：

```
<cfset variables.id = 991234>
<cfset LOCAL.dropRecall = deserializeJson('{"994323":"596895,596871,596864,596888,596840abc,596833,596826","991234":"9999,8888,abced"}')>
<cfset LOCAL.safeCopy = duplicate(LOCAL.dropRecall)> 

<cfif  StructKeyExists(LOCAL.dropRecall,"#variables.id#")>
    <cfset StructDelete( LOCAL.dropRecall,"#variables.id#", "true")>
</cfif>
<cfdump var="#LOCAL#"> 
```

该代码对您*不起作用*吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:48:37.533

我想知道问题是不是你里面的变量名`LOCAL.dropRecall`以数字开头？ColdFusion 变量应始终以字母、下划线或 Unicode 货币符号开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-22T02:39:12.533

亚当的 ColdFusion 2016 解决方案的更新版本

```
<cfscript>
   variables.id = 991234;
   LOCAL.dropRecall = deserializeJson('{"994323":"596895,596871,596864,596888,596840abc,596833,596826","991234":"9999,8888,abced"}');
   LOCAL.safeCopy = duplicate(LOCAL.dropRecall);

   LOCAL.dropRecall.delete(variables.id); // you don't have to test if it is there

   writedump(LOCAL);
</cfscript> 
```

# django - 验证 Django 中的动态选择字段

> ID：13709662
> 
> 赞同：0
> 
> 时间：2012-12-04T18:37:55.593
> 
> 标签：django, django-forms, form-fields

我在 Ubuntu 12.10 上使用 Django 1.4 和 Python 2.7。

我有一个表单，我需要动态地填充一些下拉列表（使用 jQuery），但需要其中 2 个是必需的，而第 3 个是可选的。

我正在使用 Tastypie 来帮助 API 获取选项。基本上，第一个下拉列表中填充了学校的行业级代码。选择代码后，将为该代码的所有类别填充类别下拉列表。选择类别后，将为该代码和类别组合的所有子类别填充子类别下拉列表。

我可以要求下拉代码（它不是动态填充的）。但是，我很难让类别下拉列表成为必需。基本上我可以采取 2 条路线 - 前端验证或后端验证。我正在尝试进行后端验证，以便在需要时轻松创建进一步的验证。

这是表格：

```
class SchoolProductForm(forms.ModelForm):
    cip_category = forms.ChoiceField(required=True,
                                     choices=(('', '----------'),))

    def __init__(self, *args, **kwargs):
        super(SchoolProductForm, self).__init__(*args, **kwargs)

        self.fields['short_description'].widget = TA_WIDGET
        self.fields['salary_info'].widget = TA_WIDGET
        self.fields['job_opportunities'].widget = TA_WIDGET
        self.fields['related_careers'].widget = TA_WIDGET
        self.fields['meta_keywords'].widget = TI_WIDGET
        self.fields['meta_description'].widget = TI_WIDGET
        self.fields['cip'].queryset = models.CIP.objects.filter(
            parent_id__isnull=True)

    class Meta:
        model = models.SchoolProduct
        exclude = ('campus',) 
```

我试图覆盖该`clean`方法。我试图创建一个特定于字段的`clean`方法。两者似乎都不起作用。

以下变体：

```
def clean(self):
    super(SchoolProductForm, self).clean()
    if cip_category in self._errors:
        del self._errors['cip_category']
    if self.cleaned_data['cip_category'] == '----------':
        self._errors['cip_category'] = 'This field is required.'

    return self.cleaned_data 
```

这给出了一个没有`cip_category`in的错误，`cleaned_data`这是有道理的，因为它没有验证。

我已经尝试了特定领域清洁的变体：

```
def clean_cip_category(self):
    data = self.cleaned_data['cip_category']
    self.fields['cip_category'].choices = data

    return data 
```

但是在页面上出现验证错误，说明我的选择不是可用的选择之一。

我试图创建一个动态字段类型（几种变体）：

```
class DynamicChoiceField(forms.ChoiceField):
    def valid_value(self, value):
        return True

class SchoolProductForm(forms.ModelForm):
    cip_category = DynamicChoiceField(required=True,
                                      choices=(('', '----------'),)) 
```

但它接受`----------`为有效选项（我不想要）并导致错误，因为 ORM 尝试匹配`----------`数据库中的值（它不会找到）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:15:26.280

我能够通过稍微覆盖`ChoiceField`.

我将该字段添加到表单并使用以下方法处理预填充`self.initial`：

```
class SchoolProductForm(forms.ModelForm):
    cip_category = common_forms.DynamicChoiceField(
        required=True, choices=(('', '----------'),))

    def __init__(self, *args, **kwargs):
        super(SchoolProductForm, self).__init__(*args, **kwargs)

        self.fields['short_description'].widget = TA_WIDGET
        self.fields['salary_info'].widget = TA_WIDGET
        self.fields['job_opportunities'].widget = TA_WIDGET
        self.fields['related_careers'].widget = TA_WIDGET
        self.fields['meta_keywords'].widget = TI_WIDGET
        self.fields['meta_description'].widget = TI_WIDGET
        self.fields['cip'].queryset = models.CIP.objects.filter(
            parent_id__isnull=True)

        # Get the top parent and pre-populate
        if 'cip' in self.initial:
            self.initial['cip'] = models.CIP.objects.get(
                pk=self.initial['cip']).top_parent()

    class Meta:
        model = models.SchoolProduct
        exclude = ('campus',) 
```

在哪里`DynamicChoiceField`：

```
class DynamicChoiceField(forms.ChoiceField):
    def valid_value(self, value):
        return True 
```

然后，在视图中，我在`form_valid`覆盖中添加了处理：

```
def form_valid(self, form):
    self.object = form.save(commit=False)

    # Handle the CIP code
    self.object.cip_id = self.request.POST.get('cip_subcategory')
    if self.object.cip_id == '':
        self.object.cip_id = self.request.POST.get('cip_category')

    self.object.save() 
```

# html - 关于 Html 电子邮件时事通讯的 css 编码标准的困惑

> ID：13709664
> 
> 赞同：0
> 
> 时间：2012-12-04T18:38:08.097
> 
> 标签：html, css, newsletter, email-templates

我正在编写电子邮件通讯。我已经看到了一些关于良好电子邮件编码的指导方针。我想询问电子邮件通讯的 css 代码，例如它更倾向于编码内联 css，但对于一些免费模板，我发现了这样的代码

```
 <style type="text/css">

       body { color:#000; background-color:#fff; font-family:Arial, Helvetica, sansserif; text-align:center; }
       h2 { color:#2255DB; font-size:16px; margin-top:15px; margin-bottom:0px; }        
       h2 a:link { text-decoration:none; }
      .footer { fontsize:11px; text-align:center; color:#2255DB; }// and son on 

       </style> 
```

fotter 的正文代码就像

```
 <p class="footer" style="color:#2255DB;"> footer...</footer>//again style  tag 
```

有时我发现像这种完全内联样式..

```
 <span style="font-weight: bold; width: 525px;">
    Lorem ipsum dolo
    </span><br><br>// and son on  ,, 
```

上面提到的两个代码在电子邮件客户端中都可以正常工作我也看到了来自 Campaign 监视器等的标准，所以我很困惑哪种样式更好.. 我们应该在上面提到的代码中使用样式还是完全内联编码，请如果有人可以让我明白这一点..这将是很大的帮助

**编辑** ：一旦编码，是否有任何免费服务可以帮助检查邮件客户端的有效代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:42:48.030

许多邮件客户端将删除嵌入的样式表。最好对所有内容使用内联样式。

在您的示例中，您正在设置 BODY 标签的样式 - 但如果我在 Gmail 中阅读您的电子邮件 - 该页面已经有其 OWN 正文标签 - 所以您的标签将被删除。

我发现活动监控指南是一个很好的参考资源。

这是一个很好的测试：将您的电子邮件保存在静态 HTML 页面中，然后在 MS Word 上打开它。这是一个非常好的“最坏情况”。

如果您要进行任何严肃的电子邮件营销工作，[Exact Target](http://www.exacttarget.com/)有一个出色的工具，它实际上会在不同的客户中呈现您的电子邮件，并为您提供来自这些平台的屏幕截图 PDF 以供查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:43:33.570

根据我完成的 HTML 电子邮件，以及来自[http://24ways.org/2009/rock-solid-html-emails/](http://24ways.org/2009/rock-solid-html-emails/)的建议，我建议始终将样式内联。

您提到了[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)，这确实表明 Gmail 将成为样式不会内联问题的客户端。

编辑：如果对为什么 Gmail 在这种情况下是害群之马有任何兴趣，请查看第 1194.22 节， http: [//mail.google.com/mail/help/accessibility.html](http://mail.google.com/mail/help/accessibility.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T18:45:15.817

为了确保 HTML 时事通讯看起来与设计一样接近，我肯定会使用内联样式。

不幸的是，您的样式必须非常具体，否则某些软件（例如 Gmail）会覆盖您的样式声明。有时这是一种真正的痛苦，但以 IMO 的方式这样做是值得的。

HTML 电子邮件签名也是如此。

**所以绝对要选择内联样式:)**

哦，还有一件事。我知道现在是 2012 年，大量设计师/前端人员建议在 HTML 电子邮件和签名中使用 html 标签（甚至是 html5 元素），但我会尝试坚持老式的方式并使用表格来确保有代码中没有不必要的人工制品。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T18:55:23.630

为电子邮件创建 HTML 模板确实很麻烦。测试通常也非常困难和不可靠，即使是从声称他们测试所有内容的服务中也是如此。众所周知，较旧的邮件客户端会忽略 CSS 和较新的 HTML 元素。此外，邮件客户端可能会用自己的 CSS 覆盖您的一些 CSS，从而破坏布局。

我的建议：

1）使用内联样式，正如其他人提到的那样。将它们应用于一切。例如，不要期望将字体大小添加到 div 以应用于`<p>`div 内部（应该如此！）。将样式添加到两者，或者至少是直接父级。

2) 对任何布局使用表格（啊！），而不是边距和填充。一些较老的邮件客户端可能不太关心 CSS，可能会删除所有的 CSS，或者只应用它的片段。

3) 以即使电子邮件客户端丢弃您的所有 CSS 的方式仍然可读的方式设计电子邮件（这是一种明显的可能性）。这就是为什么您经常收到以图片为主的电子邮件通讯。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T18:49:54.100

对于电子邮件通讯格式，由于不同的电子邮件客户端呈现不同的布局，我强烈建议您使用**内联 css**并主要使用**字体标签及其属性**来设置文本样式。还使用表格结构而不是 div 布局来保持大多数电子邮件客户端的布局一致。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T18:48:26.203

**对所有内容使用内联样式，**以确保您的 HTML 电子邮件在所有客户端上显示相同。

有一个很好的工具可用于内联 HTML 内容。它由 mail-chimp 提供（我猜他对电子邮件了解一两件事）[http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-17T07:10:44.047

使用内联样式总是比嵌入 CSS 更好，因为一些主要的电子邮件客户端（例如 Outlook 2007）不支持电子邮件中的 CSS。

Gmail 不支持嵌入式 CSS。

解决此问题的一种方法是使用每个测试结果中“开发人员工具”下拉菜单中的 CSS 转换工具将您的嵌入式 CSS 转换为内联 CSS。

对于字体、字体颜色和字体大小等问题，还有另一种解决方法：Gmail 将您的 Body 标签转换为 DIV。这实际上对您有利，因为您可以在 BODY 中使用 DIV 支持的任何内联 CSS 属性。然而，重要的是要知道，有些客户端不支持 BODY 标签，因此您还应该在嵌入的 CSS 中包含相同的声明。另外，请记住，您不能依赖像“bgcolor”这样的 BODY 属性，因为 DIV 不支持它

# ajax - 我无法使用 Codeigniter 获得 AJAx 调用

> ID：13709667
> 
> 赞同：0
> 
> 时间：2012-12-04T18:38:25.220
> 
> 标签：ajax, codeigniter

我有下面的代码，我看不到输出，但是当我在萤火虫中看到时，我可以看到输出……但在 html 表中看不到。

```
 [View]
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <script type="text/javascript" src="<?php echo base_url();?>js/jquery-1.3.2.js"></script>
  <script type="text/javascript" src="<?php echo base_url();?>js/general.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Untitled Document</title>
  </head>
  <body>
  <input type="submit" name="getdata" id="getdata" value="Submit"/>

  <div id="result_table">

  </div>
  </body>
  </html> 
```

控制器

```
 class Ajax1 extends CI_Controller {
      private $limit = 30;
      private $offset = 4;
  function __construct()
      {
          parent::__construct();
          $this->load->model('User_model','',TRUE);
          $this->load->model('Person_model','',TRUE);

      }
  public function index()
  {
      $this->load->view('ajax1');
  }
  public function get_all_users() {
      $this->output->set_content_type('text/javascript; charset=UTF-8');
      $query = $this->Person_model->get_paged_list(10, 0)->result();
      $text = "Hi,testing";
          $this->load->view('ajax1');
      echo json_encode($query);

  }
  }
  ?> 
```

AJax // JavaScript 文档

```
 $(document).ready(function(){
        $('#getdata').click(function(){

        $.ajax({
                url: "http://localhost/wizaptech/index.php/ajax1/get_all_users",
                type:'POST',
                dataType: 'json',
                success: function(output_string){
                        $("#result_table").append(output_string);
                    } // End of success function of ajax form
                }); // End of ajax call
         });
    }); 
```

所以任何人都可以告诉我我错过了什么......

我已经包含了ajax代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:42:28.943

嗨，现在您的输出返回为 javascript，您已经将内容类型设置为 javascript，您也在您的方法中加载视图，这不是必需的

```
public function get_all_users() {
      $query = $this->Person_model->get_paged_list(10, 0)->result();
      $text = "Hi,testing";
      $this->output ->set_content_type('application/json') 
      ->set_output(json_encode($query));
  } 
```

# java - Java - 如何使用 string.format() 替换 Sql 语句创建中的任何字符串连接？

> ID：13709668
> 
> 赞同：0
> 
> 时间：2012-12-04T18:38:38.777
> 
> 标签：java, sql

我将如何使用 string.format() 在此 Java/SQL 代码中省略 + 字符串连接 + 。

```
String sql = "SELECT * FROM "+p_tableName+" WHERE 1 = 0"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:41:08.123

```
String sql = String.format("SELECT * FROM %s WHERE 1 = 0", p_tableName); 
```

以这种方式创建 SQL 语句时请务必小心，因为它们很容易被用于 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:41:18.383

您可以使用`String.format("SELECT * FROM %s WHERE 1 = 0", table_name)`. 但是，我强烈建议您[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)改用（请参阅[如何制作准备好的声明？](https://stackoverflow.com/q/3700495/130224)、[https](https://stackoverflow.com/a/396765/130224) : [//stackoverflow.com/a/396765/130224、PreparedStatements 和性能](https://stackoverflow.com/q/687550/130224)以及[使用准备好的声明](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)）。[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)产生更高的性能和安全性。

# mysql - 使用 Navicat 时出现 MySQL 错误 2003

> ID：13709670
> 
> 赞同：0
> 
> 时间：2012-12-04T18:38:52.107
> 
> 标签：mysql, navicat

我使用 Navicat 连接到我的 MySQL 数据库。我刚刚有一个错误

```
[Err] 2003 - Can't connect to MySQL server on 'www.website.com' (10061) 
```

我使用端口 3306 连接到数据库。我无法编辑任何管理设置，因为它托管在共享服务器 inmotion.com 上

这发生在查询出错后。可能的最大连接错误？它设置为 10，但由于共享服务器，我无法对其进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:44:49.953

是的，这意味着数据库没有响应。重启`mysqld`过程应该可以解决这个问题。

# php - 业余尝试拍卖脚本

> ID：13709671
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:38:52.780
> 
> 标签：php

我有以下代码，我暂时不认为它对于拍卖的目的是完整的，但它应该在这个阶段工作，尽管如此，据我所知。但我没有。只是想知道是否有人可以指出我的错误。broswer 说 php 脚本中的 else 是出乎意料的。删除它会使浏览器不期望最后的结束 html 标记。非常感谢您的任何建议。干杯

```
<?php

$hostuser = $_GET['user'];

$auc = $_GET['auc'];

//Connect to database

$con = mysql_connect('localhost', 'root', 'password');
$db = mysql_select_db("users");

$auction = mysql_query("

SELECT * FROM auction WHERE host = '$hostuser'

");

$row = mysql_fetch_array ($auction);

$current_bid = $row['current_bid'];
$current_bid_user = $row['current_bid_user'];
$time_started = $row['time_started'];

if ($current_bid == 0) {

$current_bid = "No bids have yet been submitted.  Be the first to make a bid.";

}

include ('auction_1.php');

if ($bid > $current_bid) {

$current_bid = $bid;
$bidsubmitted = "";

{
else

$bidsubmitted = "Your bid must exceed the current bid";

}

 ?>

<html>

<form action = 'auction_1.php' method ='POST'>

<br>
Current bid: <?php echo $current_bid; ?>
<br>
<br>
Time Left:

<table>
            <br>
            <br>
            <tr>
            <td>
            Your bid:
            </td>
            <td>
            <input type = 'text' name = 'userbid'>
            </td>
            </tr>
</table>
<p>
<input type='submit' name='bid' value='Bid'>

<?php echo $bidsubmitted; ?>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:41:48.063

你错过了一个花括号：

```
if ($bid > $current_bid) {
    $current_bid = $bid;
    $bidsubmitted = "";

} else {
    $bidsubmitted = "Your bid must exceed the current bid";
} 
```

另外，（而且**非常重要**）您的代码不安全。使用`PDO`或`MySQLi`将用户数据插入数据库。

```
$con = mysql_connect('localhost', 'root', 'password');
$db = mysql_select_db("users");

$auction = mysql_query("

SELECT * FROM auction WHERE host = '$hostuser' //This is bad.

"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:47:45.073

你只是没有关闭括号

```
 } // instead of '{'
else{

$bidsubmitted = "Your bid must exceed the current bid";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T07:17:19.703

你之前错过了`}`，否则应该是这样的

```
if ($bid > $current_bid) {

$current_bid = $bid;
$bidsubmitted = "";

}
else{

$bidsubmitted = "Your bid must exceed the current bid";

} 
```

# c++ - 使用 auto 公开私有类型：它在哪里有用？

> ID：13709681
> 
> 赞同：17
> 
> 时间：2012-12-04T18:39:22.280
> 
> 标签：c++, c++11, auto

在这个[问题](https://stackoverflow.com/q/13532784/771663)中，讨论了为什么公开私有类型`auto`：

```
#include <iostream>

using namespace std;

class Base {

  class PrivateClass {    
  public: 
    void bar() { cout << "PrivateClass" << endl; }
  };

public:

  PrivateClass foo() {
    PrivateClass a;
    return a;
  }

};

int main() {

  Base b;
  auto p = b.foo();
  p.bar();
  return 0;
} 
```

完全符合 C++11 标准。我仍然不明白这个习语在实际应用程序中如何有用。 **是否存在可以有效使用此成语的问题，或者应该将其视为关键字的“好奇”副作用？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T18:45:53.773

如果未指定返回类型，它会很有用。例如，从调用返回的对象`std::bind`，或以前`boost::bind`，没有指定。它是一些实现定义的仿函数，但如果不查看实现细节，您实际上无法知道它的类型。在 C++11 的`auto`关键字之前，您可以`boost::function`用作存储结果的变量类型`bind`，或者您可以将结果传递`bind`给接受模板参数的函数。使用 C++11，您可以使用`auto`.

So, if a class has some internal type, it is not necessary to expose the actual type to a public API. A user of the class can simply use the `auto` keyword, and the API documentation can say the type is "unspecified". This keeps the actual internal type a private implementation detail, which can often improve encapsulation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:02:21.540

Wheter the "auto" keyword & subclasing provides such feature, the concept of "private types" seems unpractical.

Before O.O.P., some developers hide some type using a (void*) pointer, to a "struct". Another more updated cases allowed an object of a given class, been exposed only by a superclass.

# python - 关于python的模块导入系统

> ID：13709682
> 
> 赞同：1
> 
> 时间：2012-12-04T18:39:23.120
> 
> 标签：python

我对 python 的模块系统和导入它们有一些疑问。我的应用程序具有以下结构：

```
preloader/   
    preload.py
    Core/
        Generator.py
        Logger.py
        ErrorHandling.py
    Libraries/
        MySQLi.py
        memcached.py 
```

`__init__.py`文件甚至在根级别都存在于每个文件夹中，从结构中省略以提高可读性。

在里面`preload.py`我想导入`memcached`模块。所以我写`from Libraries import memcached`。在里面`memcached.py`我有一个名为`Memcached`. 所以当我必须实例化它时，我必须写这样的东西`mem = memcached.Memcached()`。我怎样才能避免写作`modulename.classname()`而只做`classname()`？

我也在 preload.py 里面试过这个`from preloader.Libraries.memcached import Memcached`。那没有给我这样的模块错误！

另一个问题。有人请对相对进口有所了解。`preload.py`里面有一个名为`ThreadManager`I want this class inside的类`ErrorHandling.py`。我怎样才能做到这一点？我尝试使用相对导入`from .. import preload`。然后当我运行时`preload.py`出现错误`ValueError: Attempted relative import beyond toplevel package`。然后我尝试了`from preload import ThreadManager`。但是后来它采用循环导入，所以我无法导入它。如何解决这个问题呢？

蟒蛇版本2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:44:08.190

您可以`from package.module import names`为您的课程使用以下语法`Memcached`：

```
from Libraries.memcached import Memcached 
```

然后在您的代码中使用`Memcached`而不是。`memcached.Memcached`

如果您需要`ThreadManager`从另一个模块使用，并且遇到循环导入，那么您应该重新组织您的模块。移动到一个新模块，并从和 from`ThreadManager`导入该类。`preload``Core.ErrorHandling`

# include - 服务器端包括不使用 Google Drive 网络托管

> ID：13709684
> 
> 赞同：0
> 
> 时间：2012-12-04T18:39:24.740
> 
> 标签：include, server-side, google-drive-api, ssi

我最近开始使用 Google Drive 来托管我的小网站 ( [www.warriner.info](http://www.warriner.info) )

到目前为止，我一直在使用 javascript 和 document.write() 来生成在许多页面上重复的 html（即：导航菜单栏）。我正在尝试切换到使用服务器端包含，但 Google Drive 似乎不支持它。

我所说的不支持是指我将#include 行放在我的html 代码中，但它们只是作为注释出现，实际上并不包含任何内容。

如果您访问上面的 URL 并查看我的主页的来源，您就会明白我的意思。

其他人有使用 SSI 和 Google Drive 的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:31:11.087

SSI 是 Apache -webservers [mod_include 模块](http://httpd.apache.org/docs/current/mod/mod_include.html)的一个特性。

# asp.net-mvc - 获取按钮点击值时遇到问题

> ID：13709690
> 
> 赞同：1
> 
> 时间：2012-12-04T18:39:57.977
> 
> 标签：asp.net-mvc, razor

我有以下看法：

```
@using SuburbanCustPortal.SuburbanService

<br />
<br />
<table>

      @if (ViewData["CustomerData"] != null)
       {
         foreach (var usr in (IEnumerable<CustomerData>) ViewData["CustomerData"])
         {

           using (Html.BeginForm("ShowCustomer2", "Customer", FormMethod.Post))
           {
             <tr>              
               @Html.HiddenFor(model => @usr.AccountId)

               <td>
                 <input id="btn" type="submit" value="View"/>               
               </td>

               <td>
                 @usr.Branch-@usr.AccountNumber
               </td>

               <td>
                 @usr.Name
               </td>

               <td>
                 @usr.DeliveryStreet
               </td>

             </tr>            

           }
         }
       }

</table>
<br /> 
```

我想获得单击按钮的 AccountId。它列出了该登录名上的所有帐户。

无论我如何引用它，我都会得到 null：

```
[HttpPost]
public ActionResult ShowCustomer2(FormCollection formCollection)
{

  var corpid = MiscClasses.GetCookieInfo.TokenId;
  var acctid = formCollection.Get("AccountId");
  MiscClasses.GetCookieInfo.CurrentAccountGuid = acctid;

  var sb = new StringBuilder();
  sb.AppendLine("SuburbanCustPortal,Controllers.CustomerController.ExistingAccounts");
  sb.AppendLine(string.Format("corpid: {0}", corpid));
  sb.AppendLine(string.Format("acctid: {0}", acctid));
  Logging.LogInfo(sb.ToString(), _asName);

  var cr = new CustomerRequest();
  cr.CompanyId = corpid;
  cr.Account = acctid;

  return View("AccountScreen", _client.GetCustomerByGuid(cr));
} 
```

有人告诉我我做错了什么吗？

**更新**

我在视图中进行了以下更改：

```
@Html.Hidden(@usr.AccountId) 
```

并作为：

```
@Html.Hidden(usr.AccountId) 
```

我添加这些行只是为了验证控制器代码：

```
var acctid = formCollection["AccountId"];
acctid = formCollection.Get("AccountId"); 
```

两者仍然为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:08:37.033

您正在使用一个名为`CustomerData`.it 的类的属性，它将`CustomerData.AccountId`为您的隐藏字段`name`属性生成。尝试像这样手动呈现隐藏标签：

```
<input type="hidden" name="AccountId" value="@usr.AccountId"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:42:26.237

您绑定错误的隐藏字段名称

尝试：

```
@Html.Hidden("AccountId") 
```

同样在服务器的方法帖子中，您可以尝试

```
[HttpPost]
public ActionResult ShowCustomer2(int accountId, FormCollection formCollection) 
```

# php - 确定二进制文件 id 的变量名 - 使用 PHP 的 POST 请求

> ID：13709691
> 
> 赞同：2
> 
> 时间：2012-12-04T18:40:06.277
> 
> 标签：php, mysql, post, serialization, binary

这开始是一个简单的问题，现在已经成为一个个人挑战而不是一个问题。开始！

**背景**

我有一个移动应用程序，它通过标准表收集用户指定的数据，还收集一张存储为二进制文件的照片。该应用程序允许您指定服务器端脚本的位置以处理它收集的数据 - 二进制对象的脚本与字母数字数据的脚本不同（应用程序要求它们分开，而不是我）。该应用程序上的文档/支持很少（部分原因这已成为个人挑战而不是问题）。我正在使用 PHP 处理数据并将其放入 MySQL 数据库。

**简单部分：字母数字数据**

应用程序中预定义了一些字段，例如纬度/经度。我使用 serialize($_POST) 将结果插入临时 MySQL 数据库以获取特定于数据库的名称，以便我的 PHP 代码可以将它们永久放入 MySQL 数据库。例如，纬度被提交为 ecLatitude - 谁会猜到。一旦我知道它是 ecLatitude，我就可以处理它并将它放在我想要的方式/位置。当然，我定义的字段没有问题。

**困难部分：二进制对象**

所以现在我的问题是二进制对象（照片）。与某些数据库字段一样，我无法控制文件的名称。似乎标准做法是调用文件“文件”，或者如果我使用的是 HTML 界面，我会随意调用它，因为我可以使用 $_FILES 并查找我指定的名称。所以似乎我需要以某种方式序列化二进制对象以确定实际文件的 id，而不是文件名。我的意思是，如果文件名为picture.jpg 并作为照片提交，我需要知道“照片”而不是“图片.jpg”。

**我在哪里**

我看到的每个示例都是从知道二进制对象 id 的名称（在本例中为“照片”）开始的，因为您会认为这是一个相当明显的变量。我尝试在序列化对象之前对其进行编码，但这似乎仍然返回 MySQL 数据库中的非唯一名称（picture.jpg），而不是 id。

***编辑 - 我为特定于 blob 的脚本尝试了以下代码。

```
$outputfields= serialize(base64_encode($_POST));
$query="INSERT INTO varnames (data) values ('".$outputfields."')"; 
```

这在 PHP 中是否可行，还是我需要进行网络监控？

抱歉，如果我没有使用正确的术语 - 我试图用我简单的示例术语来表达这一点。

# javascript - javascript基本语法

> ID：13709692
> 
> 赞同：-4
> 
> 时间：2012-12-04T18:40:10.377
> 
> 标签：javascript

你能告诉我如何使用javascript传递变量吗？我收到两个参数（tid，uid），然后我需要将它们连接成变量（turl，turl2），以便它们成为“http://www.site.com/t/t.php?testid=5”和“ http://www.site.com/t/t.php?testid=5&uid=12"。Window.open 需要打开这两个变量（turl、turl2），但它加载的是 var 名称而不是它们的值。

```
function open_win(tid,uid) {
var turl = "http://www.site.com/t/t.php?testid="+tid;
var turl2 = 'http://www.site.com/t/i.php?testid= +tid+ &uid=+uid +';
window.open('+ turl + ', '');
window.open('+ turl2 +', '');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:43:26.643

构建字符串 101

```
function open_win(tid,uid) {
    var turl = "http://www.site.com/t/t.php?testid="+ encodeURIComponent(tid);
    var turl2 = 'http://www.site.com/t/i.php?testid=' + encodeURIComponent(tid) + '&uid=' + encodeURIComponent(uid);
    window.open(turl, '');
    window.open(turl2, '');
} 
```

# silverlight - 在 C# 中使用按钮以编程方式添加 BottomAppBar

> ID：13709693
> 
> 赞同：0
> 
> 时间：2012-12-04T18:40:23.710
> 
> 标签：silverlight, xaml, windows-8, winrt-xaml

我想从 C# 的代码隐藏中以编程方式添加 BottomAppBar。我是这样完成的：

1：添加了一个具有 DataTemplate 的资源文件，其中包含一个 Grid、一个 StackPanel 和两个按钮。

2：在我的 BasePage.cs（派生自 Page 类）中，我定义了一个新的 AppBar 并将其 ContentTemplate 设置为在步骤 1 中创建的资源。

3：我从第 2 步设置了 this.BottomAppBar= AppBar。

现在，这会将 AppBar 添加到我从 BasePage 派生的所有页面中。这工作正常。

问题：

我无法从 AppBar 中的两个元素中获取 PointerPressed 或任何其他事件。

我确信这是我所缺少的非常基本的东西。任何想法，任何人？

**更新：**下面添加了示例下载链接，我想要的是当单击 BottomAppBar（Page1 和 2）中的图像时，它应该带我到 MainPage。

[下载样本](https://skydrive.live.com/redir?resid=F0F619FD01FE8C33!274)

**应用条码**

```
AppBar appbar = new AppBar();
appbar.Name = "BottomBar";
DataTemplate dt = Application.Current.Resources["BottomAppBarDT"] as DataTemplate;
appbar.ContentTemplate = dt;
this.BottomAppBar = appbar; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:48:29.127

在数据模板中，最好实现命令而不是事件处理程序。您要做的是确保创建一个与您尝试触发的按钮单击事件具有相同方法的 DelegateCommand。DelegateCommand 的代码应放置在视图模型中，该模型用作此特定控件（应用程序栏）的父级的 DataContext，或者如果您使用的是具有命令聚合器的 MVVM 结构，则它应该放在那里。

```
public class DelegateCommand : ICommand
  {
    private Action _action;

    public DelegateCommand(Action action)
    {
      _action = action;
    }

    public bool CanExecute(object parameter)
    {
      return true;
    }

    public event Windows.UI.Xaml.EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
      _action();
    }
  }

  /// <summary>
  /// Gets a command that executes a search
  /// </summary>
  public ICommand ExecuteSearchCommand
  {
    get
    {
      return new DelegateCommand(() => ExecuteSearch());
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:12:46.530

您是否实际上将`Click`事件处理程序添加到按钮上`AppBar`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T02:17:22.037

这是最终的代码。

**BaseView.cs**

```
public partial class BaseView: Page
    {
        public BaseView()
        {
            GoHomeCommand = new MyCommand<object>(OnGoHome);
            this.DataContext = this;
        }
        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            AddAppBar();
        }
        private void AddAppBar()
        {
            AppBar appbar = new AppBar();
            appbar.Name = "BottomBar";
            DataTemplate dt = Application.Current.Resources["BottomAppBarDT"] as DataTemplate;
            appbar.ContentTemplate = dt;
            this.BottomAppBar = appbar;
        }

        public MyCommand<object> GoHomeCommand { get; set; }
        void OnGoHome(object obj)
        {
            Debug.WriteLine("Go Home2");
            Frame.Navigate(typeof(MainPage));
        }
    }

    public class DelegateCommand : ICommand
    {
        private Action _action;

        public DelegateCommand(Action action)
        {
            _action = action;
        }

        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;

        public void Execute(object parameter)
        {
            _action();
        }
    } 
```

**资源**

```
<DataTemplate x:Key="BottomAppBarDT" >
        <Grid x:Name="AppBarGrid" Background="SlateGray">
            <StackPanel x:Name="AppBarRightStack" Orientation="Horizontal" HorizontalAlignment="Left">
                <Button Command="{Binding GoHomeCommand}" FontSize="24">
                    <Image Source="Assets/Logo.png" Height="100" Width="100"/>
                </Button>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

# delphi - Delphi：WSDL 导入无法处理对象

> ID：13709697
> 
> 赞同：2
> 
> 时间：2012-12-04T18:40:39.130
> 
> 标签：delphi, wsdl, delphi-xe

[在下面的地址http://webservice.magfa.com/services/urn:SOAPSmsQueue?wsdl](http://webservice.magfa.com/services/urn:SOAPSmsQueue?wsdl)上有一个第三方 Web 服务应用程序
我想使用方法“getAllMessages”返回名为“CustomerReturnIncomingFormat”的对象数组，但 delphi wsdl 导入器未能正确导入。
并生成为“ArrayOf_xsd_anyType：变体数组”！！！
看来delphi不能从wsdl导入对象！？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:57:34.940

问题在于程序员一直很懒惰，并且为实际上返回对象数组的所有调用声明了一个 ArrayOf_xsd_anyType 声明。WSDL 导入器尝试将这种类型尽可能好地映射到变体数组。由于您拥有文档，因此您确切地知道每个服务调用返回的内容。最简单的方法是修复 WSDL：

```
<?xml version="1.0" encoding="utf-8"?>
<definitions targetNamespace="http://magfa.com/soap/SOAPSmsQueue" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:impl="http://magfa.com/soap/SOAPSmsQueue" xmlns:intf="http://magfa.com/soap/SOAPSmsQueue" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns1="urn:SOAPSmsQueue" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <schema targetNamespace="urn:SOAPSmsQueue" xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
      <complexType name="CustomerReturnIncomingFormat">
        <sequence>
          <element name="body" nillable="true" type="xsd:string" />
          <element name="errorResult" nillable="true" type="xsd:string" />
          <element name="recipientNumber" nillable="true" type="xsd:string" />
          <element name="senderNumber" nillable="true" type="xsd:string" />
        </sequence>
      </complexType>
      <complexType name="DatedCustomerReturnIncomingFormat">
        <complexContent>
          <extension base="tns1:CustomerReturnIncomingFormat">
            <sequence>
              <element name="date" nillable="true" type="xsd:string" />
            </sequence>
          </extension>
        </complexContent>
      </complexType>
    </schema>
    <schema targetNamespace="http://magfa.com/soap/SOAPSmsQueue" xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
      <complexType name="ArrayOf_xsd_string">
        <complexContent>
          <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:string[]" />
          </restriction>
        </complexContent>
      </complexType>
      <complexType name="ArrayOf_xsd_int">
        <complexContent>
          <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:int[]" />
          </restriction>
        </complexContent>
      </complexType>
      <complexType name="ArrayOf_xsd_long">
        <complexContent>
          <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:long[]" />
          </restriction>
        </complexContent>
      </complexType>
      <complexType name="ArrayOf_xsd_anyType">
        <complexContent>
          <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:anyType[]" />
          </restriction>
        </complexContent>
      </complexType>
      <complexType name="ArrayOf_CustomerReturnIncomingFormat">
        <complexContent>
          <restriction base="soapenc:Array">
            <attribute ref="soapenc:arrayType" wsdl:arrayType="xsd:CustomerReturnIncomingFormat[]" />
          </restriction>
        </complexContent>
      </complexType>
    </schema>
  </wsdl:types>
  <message name="getAllMessagesRequest">
    <part name="domain" type="xsd:string" />
    <part name="numberOfMessages" type="xsd:int" />
  </message>
  <message name="getCreditResponse">
    <part name="getCreditReturn" type="xsd:float" />
  </message>
  <message name="getMessageIdRequest">
    <part name="domain" type="xsd:string" />
    <part name="checkingMessageId" type="xsd:long" />
  </message>
  <message name="getMessagesWithNumberResponse">
    <part name="getMessagesWithNumberReturn" type="impl:ArrayOf_xsd_anyType" />
  </message>
  <message name="getMessageStatusesRequest">
    <part name="messagesId" type="impl:ArrayOf_xsd_long" />
  </message>
  <message name="getRealMessageStatusesRequest">
    <part name="messagesId" type="impl:ArrayOf_xsd_long" />
  </message>
  <message name="enqueueWithGatewayRequest">
    <part name="domain" type="xsd:string" />
    <part name="messageBodies" type="impl:ArrayOf_xsd_string" />
    <part name="recipientNumbers" type="impl:ArrayOf_xsd_string" />
    <part name="senderNumbers" type="impl:ArrayOf_xsd_string" />
    <part name="encodings" type="impl:ArrayOf_xsd_int" />
    <part name="udhs" type="impl:ArrayOf_xsd_string" />
    <part name="messageClasses" type="impl:ArrayOf_xsd_int" />
    <part name="priorities" type="impl:ArrayOf_xsd_int" />
    <part name="checkingMessageIds" type="impl:ArrayOf_xsd_long" />
    <part name="gateway" type="xsd:string" />
  </message>
  <message name="getAllMessagesResponse">
    <part name="getAllMessagesReturn" type="impl:ArrayOf_CustomerReturnIncomingFormat" />
  </message>
  <message name="getAllMessagesWithNumberResponse">
    <part name="getAllMessagesWithNumberReturn" type="impl:ArrayOf_xsd_anyType" />
  </message>
  <message name="enqueueResponse">
    <part name="enqueueReturn" type="impl:ArrayOf_xsd_long" />
  </message>
  <message name="getMessageStatusesResponse">
    <part name="getMessageStatusesReturn" type="impl:ArrayOf_xsd_int" />
  </message>
  <message name="getMessageStatusRequest">
    <part name="messageId" type="xsd:long" />
  </message>
  <message name="getMessagesResponse">
    <part name="getMessagesReturn" type="impl:ArrayOf_xsd_anyType" />
  </message>
  <message name="getMessagesRequest">
    <part name="domain" type="xsd:string" />
    <part name="numberOfMessages" type="xsd:int" />
  </message>
  <message name="getAllMessagesWithNumberRequest">
    <part name="domain" type="xsd:string" />
    <part name="numberOfMessages" type="xsd:int" />
    <part name="destNumber" type="xsd:string" />
  </message>
  <message name="enqueueRequest">
    <part name="domain" type="xsd:string" />
    <part name="messageBodies" type="impl:ArrayOf_xsd_string" />
    <part name="recipientNumbers" type="impl:ArrayOf_xsd_string" />
    <part name="senderNumbers" type="impl:ArrayOf_xsd_string" />
    <part name="encodings" type="impl:ArrayOf_xsd_int" />
    <part name="udhs" type="impl:ArrayOf_xsd_string" />
    <part name="messageClasses" type="impl:ArrayOf_xsd_int" />
    <part name="priorities" type="impl:ArrayOf_xsd_int" />
    <part name="checkingMessageIds" type="impl:ArrayOf_xsd_long" />
  </message>
  <message name="getRealMessageStatusesResponse">
    <part name="getRealMessageStatusesReturn" type="impl:ArrayOf_xsd_int" />
  </message>
  <message name="getMessagesWithNumberRequest">
    <part name="domain" type="xsd:string" />
    <part name="numberOfMessages" type="xsd:int" />
    <part name="destNumber" type="xsd:string" />
  </message>
  <message name="getMessageIdResponse">
    <part name="getMessageIdReturn" type="xsd:long" />
  </message>
  <message name="getCreditRequest">
    <part name="domain" type="xsd:string" />
  </message>
  <message name="getMessageStatusResponse">
    <part name="getMessageStatusReturn" type="xsd:int" />
  </message>
  <message name="enqueueWithGatewayResponse">
    <part name="enqueueWithGatewayReturn" type="impl:ArrayOf_xsd_long" />
  </message>
  <portType name="SoapSmsQueuableImplementation">
    <operation name="enqueue" parameterOrder="domain messageBodies recipientNumbers senderNumbers encodings udhs messageClasses priorities checkingMessageIds">
      <input message="impl:enqueueRequest" name="enqueueRequest" />
      <output message="impl:enqueueResponse" name="enqueueResponse" />
    </operation>
    <operation name="getMessages" parameterOrder="domain numberOfMessages">
      <input message="impl:getMessagesRequest" name="getMessagesRequest" />
      <output message="impl:getMessagesResponse" name="getMessagesResponse" />
    </operation>
    <operation name="getMessageId" parameterOrder="domain checkingMessageId">
      <input message="impl:getMessageIdRequest" name="getMessageIdRequest" />
      <output message="impl:getMessageIdResponse" name="getMessageIdResponse" />
    </operation>
    <operation name="getRealMessageStatuses" parameterOrder="messagesId">
      <input message="impl:getRealMessageStatusesRequest" name="getRealMessageStatusesRequest" />
      <output message="impl:getRealMessageStatusesResponse" name="getRealMessageStatusesResponse" />
    </operation>
    <operation name="getAllMessagesWithNumber" parameterOrder="domain numberOfMessages destNumber">
      <input message="impl:getAllMessagesWithNumberRequest" name="getAllMessagesWithNumberRequest" />
      <output message="impl:getAllMessagesWithNumberResponse" name="getAllMessagesWithNumberResponse" />
    </operation>
    <operation name="getMessagesWithNumber" parameterOrder="domain numberOfMessages destNumber">
      <input message="impl:getMessagesWithNumberRequest" name="getMessagesWithNumberRequest" />
      <output message="impl:getMessagesWithNumberResponse" name="getMessagesWithNumberResponse" />
    </operation>
    <operation name="getCredit" parameterOrder="domain">
      <input message="impl:getCreditRequest" name="getCreditRequest" />
      <output message="impl:getCreditResponse" name="getCreditResponse" />
    </operation>
    <operation name="getAllMessages" parameterOrder="domain numberOfMessages">
      <input message="impl:getAllMessagesRequest" name="getAllMessagesRequest" />
      <output message="impl:getAllMessagesResponse" name="getAllMessagesResponse" />
    </operation>
    <operation name="enqueueWithGateway" parameterOrder="domain messageBodies recipientNumbers senderNumbers encodings udhs messageClasses priorities checkingMessageIds gateway">
      <input message="impl:enqueueWithGatewayRequest" name="enqueueWithGatewayRequest" />
      <output message="impl:enqueueWithGatewayResponse" name="enqueueWithGatewayResponse" />
    </operation>
    <operation name="getMessageStatuses" parameterOrder="messagesId">
      <input message="impl:getMessageStatusesRequest" name="getMessageStatusesRequest" />
      <output message="impl:getMessageStatusesResponse" name="getMessageStatusesResponse" />
    </operation>
    <operation name="getMessageStatus" parameterOrder="messageId">
      <input message="impl:getMessageStatusRequest" name="getMessageStatusRequest" />
      <output message="impl:getMessageStatusResponse" name="getMessageStatusResponse" />
    </operation>
  </portType>
  <binding name="TSOAPSoapBinding" type="impl:SoapSmsQueuableImplementation">
    <wsdlsoap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="enqueue">
      <wsdlsoap:operation soapAction="" />
      <input name="enqueueRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="enqueueResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getMessages">
      <wsdlsoap:operation soapAction="" />
      <input name="getMessagesRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getMessagesResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getMessageId">
      <wsdlsoap:operation soapAction="" />
      <input name="getMessageIdRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getMessageIdResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getRealMessageStatuses">
      <wsdlsoap:operation soapAction="" />
      <input name="getRealMessageStatusesRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getRealMessageStatusesResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getAllMessagesWithNumber">
      <wsdlsoap:operation soapAction="" />
      <input name="getAllMessagesWithNumberRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getAllMessagesWithNumberResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getMessagesWithNumber">
      <wsdlsoap:operation soapAction="" />
      <input name="getMessagesWithNumberRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getMessagesWithNumberResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getCredit">
      <wsdlsoap:operation soapAction="" />
      <input name="getCreditRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getCreditResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getAllMessages">
      <wsdlsoap:operation soapAction="" />
      <input name="getAllMessagesRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getAllMessagesResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="enqueueWithGateway">
      <wsdlsoap:operation soapAction="" />
      <input name="enqueueWithGatewayRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="enqueueWithGatewayResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getMessageStatuses">
      <wsdlsoap:operation soapAction="" />
      <input name="getMessageStatusesRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getMessageStatusesResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
    <operation name="getMessageStatus">
      <wsdlsoap:operation soapAction="" />
      <input name="getMessageStatusRequest">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </input>
      <output name="getMessageStatusResponse">
        <wsdlsoap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://magfa.com/soap/SOAPSmsQueue" use="encoded" />
      </output>
    </operation>
  </binding>
  <service name="SoapSmsQueuableImplementationService">
    <port binding="impl:TSOAPSoapBinding" name="TSOAP">
      <wsdlsoap:address location="http://webservice.magfa.com/services/urn:SOAPSmsQueue" />
    </port>
  </service>
</definitions> 
```

我刚刚为 ArrayOf_CustomerReturnIncomingFormat 添加了一个定义，并将返回值类型从 getAllMessagesReturn 部分更改为此定义。

确保在导入此 wsdl 文件时关闭“不发出未使用的类型 (-Ot)”选项。这是使用 delphi XE 导入固定 WSDL 文件时的结果单元：

```
unit SOAPSmsQueue;

interface

uses InvokeRegistry, SOAPHTTPClient, Types, XSBuiltIns;

type

  // ************************************************************************ //
  // The following types, referred to in the WSDL document are not being represented
  // in this file. They are either aliases[@] of other types represented or were referred
  // to but never[!] declared in the document. The types from the latter category
  // typically map to predefined/known XML or Embarcadero types; however, they could also
  // indicate incorrect WSDL documents that failed to declare or import a schema type.
  // ************************************************************************ //
  // !:anyType         - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:float           - "http://www.w3.org/2001/XMLSchema"[]
  // !:CustomerReturnIncomingFormat - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:long            - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:string          - "http://www.w3.org/2001/XMLSchema"[Gbl]
  // !:int             - "http://www.w3.org/2001/XMLSchema"[Gbl]

  CustomerReturnIncomingFormat = class;         { "urn:SOAPSmsQueue"[!U][GblCplx] }
  DatedCustomerReturnIncomingFormat = class;    { "urn:SOAPSmsQueue"[!U][GblCplx] }

  ArrayOf_xsd_anyType = array of Variant;       { "http://magfa.com/soap/SOAPSmsQueue"[GblCplx] }
  ArrayOf_CustomerReturnIncomingFormat = array of CustomerReturnIncomingFormat;   { "http://magfa.com/soap/SOAPSmsQueue"[GblCplx] }
  ArrayOf_xsd_string = array of string;         { "http://magfa.com/soap/SOAPSmsQueue"[GblCplx] }

  // ************************************************************************ //
  // XML       : CustomerReturnIncomingFormat, global, <complexType>
  // Namespace : urn:SOAPSmsQueue
  // ************************************************************************ //
  CustomerReturnIncomingFormat = class(TRemotable)
  private
    Fbody: string;
    FerrorResult: string;
    FrecipientNumber: string;
    FsenderNumber: string;
  published
    property body:            string  read Fbody write Fbody;
    property errorResult:     string  read FerrorResult write FerrorResult;
    property recipientNumber: string  read FrecipientNumber write FrecipientNumber;
    property senderNumber:    string  read FsenderNumber write FsenderNumber;
  end;

  // ************************************************************************ //
  // XML       : DatedCustomerReturnIncomingFormat, global, <complexType>
  // Namespace : urn:SOAPSmsQueue
  // ************************************************************************ //
  DatedCustomerReturnIncomingFormat = class(CustomerReturnIncomingFormat)
  private
    Fdate: string;
  published
    property date: string  read Fdate write Fdate;
  end;

  ArrayOf_xsd_long = array of Int64;            { "http://magfa.com/soap/SOAPSmsQueue"[GblCplx] }
  ArrayOf_xsd_int = array of Integer;           { "http://magfa.com/soap/SOAPSmsQueue"[GblCplx] }

  // ************************************************************************ //
  // Namespace : http://magfa.com/soap/SOAPSmsQueue
  // transport : http://schemas.xmlsoap.org/soap/http
  // style     : rpc
  // use       : encoded
  // binding   : TSOAPSoapBinding
  // service   : SoapSmsQueuableImplementationService
  // port      : TSOAP
  // URL       : http://webservice.magfa.com/services/urn:SOAPSmsQueue
  // ************************************************************************ //
  SoapSmsQueuableImplementation = interface(IInvokable)
  ['{9DBBFB75-511D-1D3D-5200-4133705D96F5}']
    function  enqueue(const domain: string; const messageBodies: ArrayOf_xsd_string; const recipientNumbers: ArrayOf_xsd_string; const senderNumbers: ArrayOf_xsd_string; const encodings: ArrayOf_xsd_int; const udhs: ArrayOf_xsd_string;
                      const messageClasses: ArrayOf_xsd_int; const priorities: ArrayOf_xsd_int; const checkingMessageIds: ArrayOf_xsd_long): ArrayOf_xsd_long; stdcall;
    function  getMessages(const domain: string; const numberOfMessages: Integer): ArrayOf_xsd_anyType; stdcall;
    function  getMessageId(const domain: string; const checkingMessageId: Int64): Int64; stdcall;
    function  getRealMessageStatuses(const messagesId: ArrayOf_xsd_long): ArrayOf_xsd_int; stdcall;
    function  getAllMessagesWithNumber(const domain: string; const numberOfMessages: Integer; const destNumber: string): ArrayOf_xsd_anyType; stdcall;
    function  getMessagesWithNumber(const domain: string; const numberOfMessages: Integer; const destNumber: string): ArrayOf_xsd_anyType; stdcall;
    function  getCredit(const domain: string): Single; stdcall;
    function  getAllMessages(const domain: string; const numberOfMessages: Integer): ArrayOf_CustomerReturnIncomingFormat; stdcall;
    function  enqueueWithGateway(const domain: string; const messageBodies: ArrayOf_xsd_string; const recipientNumbers: ArrayOf_xsd_string; const senderNumbers: ArrayOf_xsd_string; const encodings: ArrayOf_xsd_int; const udhs: ArrayOf_xsd_string;
                                 const messageClasses: ArrayOf_xsd_int; const priorities: ArrayOf_xsd_int; const checkingMessageIds: ArrayOf_xsd_long; const gateway: string): ArrayOf_xsd_long; stdcall;
    function  getMessageStatuses(const messagesId: ArrayOf_xsd_long): ArrayOf_xsd_int; stdcall;
    function  getMessageStatus(const messageId: Int64): Integer; stdcall;
  end;

function GetSoapSmsQueuableImplementation(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): SoapSmsQueuableImplementation;

implementation
  uses SysUtils;

function GetSoapSmsQueuableImplementation(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): SoapSmsQueuableImplementation;
const
  defWSDL = 'C:\Temp\SOAPSmsQueue.xml';
  defURL  = 'http://webservice.magfa.com/services/urn:SOAPSmsQueue';
  defSvc  = 'SoapSmsQueuableImplementationService';
  defPrt  = 'TSOAP';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as SoapSmsQueuableImplementation);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

initialization
  { SoapSmsQueuableImplementation }
  InvRegistry.RegisterInterface(TypeInfo(SoapSmsQueuableImplementation), 'http://magfa.com/soap/SOAPSmsQueue', 'utf-8');
  InvRegistry.RegisterDefaultSOAPAction(TypeInfo(SoapSmsQueuableImplementation), '');
  RemClassRegistry.RegisterXSInfo(TypeInfo(ArrayOf_xsd_anyType), 'http://magfa.com/soap/SOAPSmsQueue', 'ArrayOf_xsd_anyType');
  RemClassRegistry.RegisterXSInfo(TypeInfo(ArrayOf_CustomerReturnIncomingFormat), 'http://magfa.com/soap/SOAPSmsQueue', 'ArrayOf_CustomerReturnIncomingFormat');
  RemClassRegistry.RegisterXSInfo(TypeInfo(ArrayOf_xsd_string), 'http://magfa.com/soap/SOAPSmsQueue', 'ArrayOf_xsd_string');
  RemClassRegistry.RegisterXSClass(CustomerReturnIncomingFormat, 'urn:SOAPSmsQueue', 'CustomerReturnIncomingFormat');
  RemClassRegistry.RegisterXSClass(DatedCustomerReturnIncomingFormat, 'urn:SOAPSmsQueue', 'DatedCustomerReturnIncomingFormat');
  RemClassRegistry.RegisterXSInfo(TypeInfo(ArrayOf_xsd_long), 'http://magfa.com/soap/SOAPSmsQueue', 'ArrayOf_xsd_long');
  RemClassRegistry.RegisterXSInfo(TypeInfo(ArrayOf_xsd_int), 'http://magfa.com/soap/SOAPSmsQueue', 'ArrayOf_xsd_int');

end. 
```

# sparql - 对本地文件的 SPARQL 更新查询

> ID：13709698
> 
> 赞同：1
> 
> 时间：2012-12-04T18:40:39.313
> 
> 标签：sparql, jena, arq

我正在尝试使用 jena arq 使用 SPARQL 更新查询来更新本地 rdf 文件。以下是代码

```
GraphStore graphstore = GraphStoreFactory.create();
UpdateRequest req = UpdateFactory.create();
req.add("  PREFIX : myprefixuri  INSERT DATA { GRAPH file:///path-to-file/file.n3 { :person :name 'xyz'. } } ");
UpdateAction.execute(req, graphstore); 
```

执行代码后，它表明查询已成功执行，但本地文件未更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:22:15.943

我认为您的困惑源于使用文件名作为图形名称：

```
INSERT DATA { GRAPH file:///path-to-file/file.n3 
```

这不会将数据插入到名为的*文件*`file.n3`中，而是将其插入到*名为* `file:///path-to-file/file.n3`的图中。该图形将位于图形存储创建它的任何位置，正如您设置的那样，它将是一个内存对象。为了使您的更新持续存在，您需要使用管理持久图的图形存储，例如使用[TDB](http://jena.apache.org/documentation/tdb/index.html)，或者您需要在更新后将您的图写入磁盘。我猜你想要后者。

写出 RDF 目前在 a 上使用 API 方法`Model`，这是底层 Jena`Graph`对象的外观，但具有额外的便利功能，包括 I/O。因此，您需要从图形存储中获取对图形的引用，将其包装为模型，然后将其写出。警告 - 未经测试的代码：

```
Node graphName = Node.createURI( "file:///path-to-file/file.n3" );
Graph g = graphstore.getGraph( graphName );
Model m = ModelFactory.createModelForGraph( g );
g.write( new FileWriter("/path-to-file/file.n3"), "Turtle" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:50:58.523

您已经创建了一个商店并将您的文件上传到其中，然后在您的商店中执行了更新。因此，您的商店已成功更新，但您尚未将商店内容导出回文件。

# java - 拖动 ImageView 而不是附加到 ImageView 的图像

> ID：13709703
> 
> 赞同：1
> 
> 时间：2012-12-04T18:41:05.797
> 
> 标签：java, android, android-fragments

> **可能的重复：**
> [Android 拖动/视图动画](https://stackoverflow.com/questions/2363666/android-drag-animation-of-views)

我正在尝试制作一个包含可拖动的片段`ImageView`。我创建了一个片段，其中`ImageView`（即图像）的源可以被拖动、缩放和旋转。但我需要能够触摸图像未覆盖的元素，但这是不可能的，因为我的解决方案仅在`ImageView`. 所以我需要移动整个`ImageView`.

**片段 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout"
        android:gravity="top"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <ImageView
            android:id="@+id/cardImage"
            android:contentDescription="@string/cardDescription"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="matrix"/>

    </LinearLayout> 
```

**片段java：**

```
public class BusinessCardFragment extends Fragment
{   
    private ImageView myImage = null;
    private float oldDist = 1;
    private File _imageFile = null;

    public BusinessCardFragment()
    { }

    public BusinessCardFragment(File image)
    {
        _imageFile = image;
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View v = inflater.inflate(R.layout.business_card_fragment, container, false);
        ImageView bcImg = (ImageView)v.findViewById(R.id.cardImage);
        bcImg.setOnTouchListener(onTableTouched);

        Bitmap cardBitmap = BitmapFactory.decodeFile(_imageFile.getAbsolutePath());
        bcImg.setImageBitmap(cardBitmap);

        return v;
    }

    public OnTouchListener onTableTouched = new OnTouchListener()
    {
        Matrix matrix = new Matrix();
        Matrix savedMatrix = new Matrix();

        static final int NONE = 0;
        static final int DRAG = 1;
        static final int ZOOM = 2;
        int mode = NONE;

        int currentXDirection = 0;
        int currentYDirection = 0;
        PointF start = new PointF();
        PointF mid = new PointF();
        PointF lastPoint = new PointF();
        float oldDist = 1f;
        final String TAG = "BusinessCardFragment, OnClick";

        public boolean onTouch(View v, MotionEvent event)
        {           
            final ImageView view = (ImageView) v;
            handleTouchEvents(event, view);

            return true;
        }

        private void handleTouchEvents(MotionEvent event, ImageView view)
        {
            switch (event.getAction() & MotionEvent.ACTION_MASK)
            {
                case MotionEvent.ACTION_DOWN:
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG");
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 10f)
                    {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM");
                    }
                    break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:                     
                    mode = NONE;
                    Log.d(TAG, "mode=NONE");
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG)
                    {
                        Log.i(TAG, "Current X: " + event.getX() + " Start X: " + start.x + " Last X: " + lastPoint.x + " Translate X: " + (event.getX() - start.x));

                        float translateX = (event.getX() - start.x);
                        float translateY = (event.getY() - start.y);

                        currentXDirection = (int) (translateX - lastPoint.x);
                        currentYDirection = (int)(translateY - lastPoint.y);

                        matrix.set(savedMatrix);
                        matrix.postTranslate(translateX, translateY);

                        lastPoint.set(translateX, translateY);
                    }
                    else if (mode == ZOOM)
                    {                       
                        float newDist = spacing(event);
                        Log.d(TAG, "newDist=" + newDist);
                        if (newDist > 10f)
                        {
                            matrix.set(savedMatrix);
                            float scale = newDist / oldDist;
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }

                        if((oldDist - newDist) < 5 && (newDist - oldDist) > -5)
                        {
                            matrix.postRotate(fingersAngle(event), mid.x, mid.y);
                        }
                    }
                    break;
            }

            view.setImageMatrix(matrix);
        }

        private float spacing(MotionEvent event)
        {
            float x = event.getX(0) - event.getX(1);
            float y = event.getY(0) - event.getY(1);
            return (float)Math.sqrt(x * x + y * y);
        }

        private void midPoint(PointF point, MotionEvent event) {
            float x = event.getX(0) + event.getX(1);
            float y = event.getY(0) + event.getY(1);
            point.set(x / 2, y / 2);
        }

        private float fingersAngle(MotionEvent event)
        {       
            double delta_x = (event.getX(0) - event.getX(1));
            double delta_y = (event.getY(0) - event.getY(1));
            double radians = Math.atan2(delta_y, delta_x);       

            float angle = (float)Math.toDegrees(radians);
            Log.i("FingerAngle", "Angle: " + angle);

            return angle;
        }
    };

} 
```

我怎样才能移动`ImageView`和图像而不只是图像？

# android - Android：物理后退按钮返回受限活动

> ID：13709706
> 
> 赞同：0
> 
> 时间：2012-12-04T18:41:14.457
> 
> 标签：android, security

我在一个应用程序中有一个管理活动，允许他或她对某些事情进行更改。如何防止普通用户按“返回”按钮进入此活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:44:44.000

您可以`Activity`使用[`FLAG_ACTIVITY_NO_HISTORY`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)标志启动，并且应该将其排除在后台堆栈之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:44:24.307

我建议在管理活动中放置某种用户验证，这将禁用正常布局并显示某种消息，告诉用户他们不允许进行更改。

# java - 面向平面文件处理的代理开源框架

> ID：13709710
> 
> 赞同：0
> 
> 时间：2012-12-04T18:41:22.967
> 
> 标签：java, python

有没有人推荐一个好的框架来处理面向文件的事务的处理阶段。我们的场景很简单——我们接收文件，验证它，如果有问题我们中止并生成报告。如果文件好，进入下一阶段。在某些阶段，可以提取并进一步处理一些有效数据，而保留一些无效数据并报告错误。

有人可能会争辩说 ESB 可以用来做到这一点，但我真的在寻找一种比拥有 shell 脚本和 cron 作业更自动化的东西。

有没有人为这些文件监视、移动和工作触发任务推荐一个好的开源框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:09:02.907

**非常小规模**

[incron](http://freecode.com/projects/incron)（基于inotify的cron）和每个作业作为一个脚本。

非常简单，允许您将文件放到指定的目录中，并且作业将自动提交给脚本。

但是，这确实需要您自己实现日志记录和文件改组。它还要求您实现一个（简单的）框架来识别在记录/提交成功或错误时所需的作业。

```
/var/processing/incoming/job1/ IN_CLOSE_WRITE /usr/local/bin/job1.bin $@/$# 
```

**中小规模**

[芹菜](http://pypi.python.org/pypi/celery)和共享存储*。

设置 celery 的初始投资是值得的，您可以获得错误报告和可靠的处理框架。

**中小规模**

[延迟作业](https://github.com/collectiveidea/delayed_job)和共享存储*。

像芹菜，但特定于红宝石。有一个[整洁的 gui](https://github.com/ejschmitt/delayed_job_web)。

**大规模（只是为了踢）**

[路易吉](https://github.com/spotify/luigi)和[Hadoop](http://hadoop.apache.org/)

Luigi 用于处理，Hadoop 用于存储和提供您的工作数据。

*共享存储**：NFS 将是跨节点共享文件的绝对最简单的方式，您将文件提交到存储解决方案，并在提交到相关框架的作业中引用该文件。

全面披露：我为 Spotify 工作。

# java - 休眠中的多对多关系查询（本机）

> ID：13709711
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:41:23.650
> 
> 标签：java, hibernate, jakarta-ee, hql

我有3个表如下

```
Post
    pid pname 

TagPost
    tagid postId postTime

Tag
    tagid tagNam 
```

一个帖子可以有多个标签，一个标签可以有多个帖子。基本上是一个* n 映射。

现在我如何使用`session.createQuery()`

1.  通过帖子的创建时间选择给定标签顺序的所有挑战我可以做 post.getTagSet()，但我只想要 n 个最新帖子。
2.  选择所有`java`标签之一的帖子？按 postTime 排序。
3.  这是在性能方面对这种情况进行建模的正确方法吗？或者我应该有以下结构？

    postid pname postTime 的标签

在这种情况下，标签列的值可以用逗号分隔。标签列的示例值 = java,hibernate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:31:28.953

考虑到所有情况，三张桌子的拳头设计是更好的设计。您可以有效地运行查询。这些类型的查询在 HQL 中很常见。

1.  要获得 n 个最新帖子，您可以进行如下查询：

    ```
    Query query = session.createQuery("select tagPost.tag from TagPost as tagPost where tagPost.post = :post ORDER by tagPost.postTime");
    query.setMaxResults(n); // n is your expect newest number 
    ```

2.  这也很简单：

    ```
    Query query = session.createQuery("select tagPost.post from TagPost as tagPost where tagPost.tag = :tag ORDER by tagPost.postTime");
    query.setMaxResults(n); // n is your expect newest number 
    ```

在这两种情况下，您都需要在调用之前将对象参数传递给查询`query.list();`（第一种情况`post`，第二种情况`tag`）。

感谢和快乐的编码！

# python - 使用 Python 多处理进程/队列的奇怪错误

> ID：13709713
> 
> 赞同：3
> 
> 时间：2012-12-04T18:41:28.587
> 
> 标签：python, parallel-processing, queue, multiprocessing

很抱歉这个问题很长，但我找不到更好的方法来总结它。

我有一个程序，它使用 Python[`multiprocessing`](http://docs.python.org/2/library/multiprocessing.html)并行运行一些计算。进程之间的通信是使用两个[`Queue`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Queue)对象 a`work_queue`和 a完成的`result_queue`。主进程填充`work_queue`用于计算的数据，然后启动几个子进程，这些子进程将使用该队列并将结果存储到`result_queue`.

一切似乎都很好，但是当我对样本数据量（即进入 的数据量`work_queue`）和子进程的数量进行了一些尝试时，我开始遇到一个让我感到困惑的错误小时。

下面的代码说明了这个问题：

```
# -- queue_bug.py --

import sys
import time
import random
import datetime
import traceback
# Need this to catch the Queue.Empty exception
import Queue
import multiprocessing
from multiprocessing import Process
from multiprocessing import Queue as MultiprocessingQueue

# -------------------------------------------------------------------
# do_calculation
# -------------------------------------------------------------------
def do_calculation(p_name, work_queue, result_queue):
    def log(msg):
        print '%s [%s] %s' % (datetime.datetime.now(), p_name, msg)
    log('Starting up...')
    while True:
        # Get work from queue
        try:
            work = work_queue.get(timeout = 0.1)
            test_id   = work[0]
            test_data = work[1]
        except Queue.Empty:
            break
        # this is just a dummy loop
        for i in range(100):
            test_result = [x * random.random() for x in test_data]
        result_queue.put((test_id, test_data, test_result))
    log('Finished')

# -------------------------------------------------------------------
# main
# -------------------------------------------------------------------
def main():
    def log(msg):
        print '%s [main   ] %s' % (datetime.datetime.now(), msg)
    try:
        num_tests = int(sys.argv[1])
        num_procs = int(sys.argv[2])
    except Exception:
        print 'usage: <prog> number-of-tests number-of-subprocesses'
        sys.exit()

    log('Initializing queues...')
    work_queue   = MultiprocessingQueue()
    result_queue = MultiprocessingQueue()
    log('Creating subprocesses...')
    process_list = []
    for i in range(num_procs):
        p_name = 'PROC_%02d' % (i+1)
        log('    Initializing %s' % p_name)
        p = Process(
            target = do_calculation,
            args   = (p_name, work_queue, result_queue),
            name   = p_name)
        p.daemon = True
        process_list.append(p)
    log('Populating the work_queue...')
    for test_id in range(num_tests):
        work_queue.put((test_id, [test_id]*20))
    log('Work_queue size is %d' % work_queue.qsize())
    log('Starting the subprocesses...')
    for p in process_list:
        p.start()
    log('Waiting until the work_queue is empty...')
    while True:
        log('    Work_queue size is %d' % work_queue.qsize())
        if work_queue.qsize() > 0:
            time.sleep(0.5)
        else:
            break
    log('Waiting until the result_queue is completely filled...')
    while True:
        log('    Result_queue size is %d' % result_queue.qsize())
        if result_queue.qsize() < num_tests:
            time.sleep(0.5)
        else:
            break
    log('Getting results...')
    result_dict = {}
    while True:
        try:
            queue_data           = result_queue.get_nowait()
            test_id              = queue_data[0]
            test_data            = queue_data[1]
            test_result          = queue_data[2]
            result_dict[test_id] = test_result
        except Queue.Empty:
            log('    All results loaded from result_queue')
            break
    log('Storing test results in result_summary...')
    result_summary = []
    for test_id in range(num_tests):
        try:
            test_result = result_dict[test_id]
            result_summary.append((test_id, test_result))
        except KeyError:
            ex = traceback.format_exc()
            log('ERROR: Exception found: %s' % ex)
            sys.exit()
    log('Success.')
    return result_summary

if __name__ == '__main__':
    main() 
```

现在，当我尝试运行它时：

## 尝试 1：10.000 次计算，10 个子流程 - OK

```
$ python queue_bug.py 10000 10
2012-12-04 19:24:25.430667 [main   ] Initializing queues...
2012-12-04 19:24:25.440521 [main   ] Creating subprocesses...
2012-12-04 19:24:25.440550 [main   ]     Initializing PROC_01
2012-12-04 19:24:25.440576 [main   ]     Initializing PROC_02
2012-12-04 19:24:25.440597 [main   ]     Initializing PROC_03
2012-12-04 19:24:25.440617 [main   ]     Initializing PROC_04
2012-12-04 19:24:25.440637 [main   ]     Initializing PROC_05
2012-12-04 19:24:25.440656 [main   ]     Initializing PROC_06
2012-12-04 19:24:25.440679 [main   ]     Initializing PROC_07
2012-12-04 19:24:25.440699 [main   ]     Initializing PROC_08
2012-12-04 19:24:25.440721 [main   ]     Initializing PROC_09
2012-12-04 19:24:25.440741 [main   ]     Initializing PROC_10
2012-12-04 19:24:25.440759 [main   ] Populating the work_queue...
2012-12-04 19:24:25.494263 [main   ] Work_queue size is 10000
2012-12-04 19:24:25.494301 [main   ] Starting the subprocesses...
2012-12-04 19:24:25.495515 [PROC_01] Starting up...
2012-12-04 19:24:25.495802 [PROC_02] Starting up...
2012-12-04 19:24:25.496212 [PROC_03] Starting up...
2012-12-04 19:24:25.496557 [PROC_04] Starting up...
2012-12-04 19:24:25.496896 [PROC_05] Starting up...
2012-12-04 19:24:25.497300 [PROC_06] Starting up...
2012-12-04 19:24:25.497705 [PROC_07] Starting up...
2012-12-04 19:24:25.498074 [PROC_08] Starting up...
2012-12-04 19:24:25.498258 [main   ] Waiting until the work_queue is empty...
2012-12-04 19:24:25.498349 [main   ]     Work_queue size is 9974
2012-12-04 19:24:25.498661 [PROC_09] Starting up...
2012-12-04 19:24:25.499765 [PROC_10] Starting up...
2012-12-04 19:24:25.998914 [main   ]     Work_queue size is 0
2012-12-04 19:24:25.998954 [main   ] Waiting until the result_queue is completely filled...
2012-12-04 19:24:25.998976 [main   ]     Result_queue size is 10000
2012-12-04 19:24:25.998993 [main   ] Getting results...
2012-12-04 19:24:26.029774 [PROC_06] Finished
2012-12-04 19:24:26.029798 [PROC_03] Finished
2012-12-04 19:24:26.029824 [PROC_08] Finished
2012-12-04 19:24:26.029853 [PROC_02] Finished
2012-12-04 19:24:26.029868 [PROC_01] Finished
2012-12-04 19:24:26.029898 [PROC_07] Finished
2012-12-04 19:24:26.029921 [PROC_09] Finished
2012-12-04 19:24:26.029942 [PROC_10] Finished
2012-12-04 19:24:26.031040 [PROC_04] Finished
2012-12-04 19:24:26.031057 [PROC_05] Finished
2012-12-04 19:24:26.087804 [main   ]     All results loaded from result_queue
2012-12-04 19:24:26.087844 [main   ] Storing test results in result_summary...
2012-12-04 19:24:26.092477 [main   ] Success. 
```

## 尝试 2：70.000 次计算，10 个子进程 - 错误

```
$ python queue_bug.py 70000 10
2012-12-04 19:25:01.083092 [main   ] Initializing queues...
2012-12-04 19:25:01.093483 [main   ] Creating subprocesses...
2012-12-04 19:25:01.093520 [main   ]     Initializing PROC_01
2012-12-04 19:25:01.093548 [main   ]     Initializing PROC_02
2012-12-04 19:25:01.093570 [main   ]     Initializing PROC_03
2012-12-04 19:25:01.093591 [main   ]     Initializing PROC_04
2012-12-04 19:25:01.093612 [main   ]     Initializing PROC_05
2012-12-04 19:25:01.093632 [main   ]     Initializing PROC_06
2012-12-04 19:25:01.093656 [main   ]     Initializing PROC_07
2012-12-04 19:25:01.093676 [main   ]     Initializing PROC_08
2012-12-04 19:25:01.093699 [main   ]     Initializing PROC_09
2012-12-04 19:25:01.093720 [main   ]     Initializing PROC_10
2012-12-04 19:25:01.093738 [main   ] Populating the work_queue...
2012-12-04 19:25:01.395974 [main   ] Work_queue size is 70000
2012-12-04 19:25:01.396012 [main   ] Starting the subprocesses...
2012-12-04 19:25:01.397601 [PROC_01] Starting up...
2012-12-04 19:25:01.398183 [PROC_02] Starting up...
2012-12-04 19:25:01.398545 [PROC_03] Starting up...
2012-12-04 19:25:01.399021 [PROC_04] Starting up...
2012-12-04 19:25:01.399621 [PROC_05] Starting up...
2012-12-04 19:25:01.400137 [PROC_06] Starting up...
2012-12-04 19:25:01.400675 [PROC_07] Starting up...
2012-12-04 19:25:01.401200 [PROC_08] Starting up...
2012-12-04 19:25:01.401645 [main   ] Waiting until the work_queue is empty...
2012-12-04 19:25:01.401691 [PROC_09] Starting up...
2012-12-04 19:25:01.401738 [main   ]     Work_queue size is 69959
2012-12-04 19:25:01.402387 [PROC_10] Starting up...
2012-12-04 19:25:01.902063 [main   ]     Work_queue size is 58415
2012-12-04 19:25:02.402640 [main   ]     Work_queue size is 47302
2012-12-04 19:25:02.903067 [main   ]     Work_queue size is 36145
2012-12-04 19:25:03.403650 [main   ]     Work_queue size is 24992
2012-12-04 19:25:03.904065 [main   ]     Work_queue size is 13481
2012-12-04 19:25:04.404643 [main   ]     Work_queue size is 1951
2012-12-04 19:25:04.588562 [PROC_02] Finished
2012-12-04 19:25:04.588580 [PROC_06] Finished
2012-12-04 19:25:04.588611 [PROC_10] Finished
2012-12-04 19:25:04.588631 [PROC_03] Finished
2012-12-04 19:25:04.589705 [PROC_04] Finished
2012-12-04 19:25:04.589741 [PROC_09] Finished
2012-12-04 19:25:04.589764 [PROC_05] Finished
2012-12-04 19:25:04.589791 [PROC_08] Finished
2012-12-04 19:25:04.589814 [PROC_01] Finished
2012-12-04 19:25:04.589844 [PROC_07] Finished
2012-12-04 19:25:04.905065 [main   ]     Work_queue size is 0
2012-12-04 19:25:04.905098 [main   ] Waiting until the result_queue is completely filled...
2012-12-04 19:25:04.905121 [main   ]     Result_queue size is 70000
2012-12-04 19:25:04.905140 [main   ] Getting results...
2012-12-04 19:25:05.012083 [main   ]     All results loaded from result_queue
2012-12-04 19:25:05.012140 [main   ] Storing test results in result_summary...
2012-12-04 19:25:05.020498 [main   ] ERROR: Exception found: Traceback (most recent call last):
  File "queue_bug.py", line 95, in main
    test_result = result_dict[test_id]
KeyError: 10647 
```

在第二次尝试时，我在**尝试**从`result_dict`. 这本字典充满了从 中获取的数据`result_queue`，因此我怀疑它一定与它有关。

我还注意到，每次我使用失败的参数组合（例如 70000 / 10）运行它时，都会`KeyError`在不同的键上引发 ，这似乎表明存在一些并发/同步问题。

最后但并非最不重要的一点是，如果样本数据的大小或子进程的数量增加，重现它的可能性也会增加。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:11:56.157

我在您的示例代码中添加了一些额外的调试，我想我找到了问题所在。除了现有的关于 using 的评论之外`JoinableQueue`，主要问题是最后当您处理结果时，您会执行以下操作：

```
try:
    queue_data = result_queue.get_nowait()
except Queue.Empty:
    break 
```

但是`Queue.Empty`即使队列实际上不是空的，也可以引发，只是因为`get_nowait()`超时太快。相反，您应该尝试：

```
try:
    queue_data = result_queue.get_nowait()
except Queue.Empty:
    if result_queue.qsize() < 1:
        break 
```

换句话说，在跳出循环之前确保队列实际上是空的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T19:12:39.400

您的错误在从结果队列中获取数据的循环中

```
 while result_queue.qsize() > 0:
        try:
            queue_data           = result_queue.get()
            test_id              = queue_data[0]
            test_data            = queue_data[1]
            test_result          = queue_data[2]
            result_dict[test_id] = test_result
        except Queue.Empty:
            log('    All results loaded from result_queue')
            break 
```

当仍然有结果时，你`get_nowait`的返回是空的。我怀疑在幕后有一些开销随着在它放弃之前没有完成的线程数量而增加。

# java - 使用 Spring 和 GsonHttpMessageConverter 进行嵌套 JSON 解析？

> ID：13709714
> 
> 赞同：1
> 
> 时间：2012-12-04T18:41:30.843
> 
> 标签：java, android, spring, gson

我使用 Spring 和 GsonHttpMessageConverter 将我的 JSON 对象自动解析为它们各自的模型。我已经让它与以下 JSON 一起工作：

```
 {
    "site_id" : "1234567",
    "address" : "123 FAKE ST., City, State Zip",
    "phone_number" : "5555555555"
    } 
```

我的问题是我遇到的关于这样的网站数组的 api：

```
 {
    "results" : [
            {
            "site_id" : "1234567",
            "address" : "123 FAKE ST., City, State Zip",
            "phone_number" : "5555555555"
            }
    ]
    } 
```

我想从该响应中解析的只是站点对象的数组，但是由于该数组嵌套在“结果”对象中，所以我不确定如何执行此操作。有没有办法使用带有 Spring 的 GsonHttpMessageConverter 来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:01:46.407

我找到了我正在寻找的答案。为了完成嵌套 json 列表的自动解析，我必须将我的对象嵌套在另一个对象中并将其传递给 Spring 网络库。这是所需的顶级模型：

```
public class SiteList {

    private List<Site> results = new ArrayList<Site>();

    public List<Site> getResults() {
        return results;
    }

    public void setResults(List<Site> results) {
        this.results = results;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:50:20.290

这应该有效：

```
JSONArray array = jsonObject.getJSONArray("results");
//do whatever you would normally do with a JSON object here but with the array 
```

我不认为它比这更复杂。我在一个（非 Android）项目中使用了很多 Gson，这样做对我来说非常有效。

# php - 从组合框 onclick 事件中为所选选项打开一个新网页

> ID：13709716
> 
> 赞同：0
> 
> 时间：2012-12-04T18:41:40.967
> 
> 标签：php, javascript, html, combobox, onclick

我有几个组合框的页面。组合框选项使用此 PHP 代码填充。（$id 和 $label 是从 ini 文件中收集的。）

```
<?echo'<select id="wbox" name="MPR">';
foreach($config[MPR] as $id=>$label){
    switch ($id)
    {
    case ($id==select):
    echo'<option value="0" selected="selected"></option>';
    break;
    case ($id>0 && $id<=10):
    echo'<optgroup label="'.$label.'">';
    break;
    case ($id>10 && $id<=20):
    echo'</optgroup>';
    break;
    default:
    echo'<option value="'.$id.'">'.$label.'</option>';
    }
}
echo'</select>';?> 
```

最后单击提交按钮，并将值传递给另一个 php 脚本，该脚本将用户重定向到特定网页。

我希望能够在带有组合框的 onclick 事件中将用户引导到所选页面。（每个选项都是一个新页面，对应于选项中分配的值。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:16:22.327

> 你说，“每个选项都是一个新页面，对应于选项中分配的值。”

所以，我假设你有类似的东西

## HTML

```
<select id="wbox" name="MPR">
    <option value="0" selected="selected"></option>
    <option value="http://yahoo.com">Yahoo</option>
    <option value="http://stackoverflow.com">Stackoverflow/</option>
</select> 
```

## JS代码应为

```
window.onload=function(){
    var combo=document.getElementById('wbox');
    combo.onchange=function(){
        if(this.value!='0') window.open(this.value, '_blank');
    };
}; 
```

只需将上面的代码放在`head`用标签包裹的`script`标签中

```
<head>
    <script type="text/javascript">
        // above code goes here
    </script>
</head> 
```

[**例子**](http://jsfiddle.net/6Az2C/1/)。

# c# - 在 MVC（httpmodule）中将英文数字更改为波斯语，反之亦然？

> ID：13709718
> 
> 赞同：0
> 
> 时间：2012-12-04T18:41:43.393
> 
> 标签：c#, asp.net, asp.net-mvc-3, httpmodule

我想将所有英文数字更改为波斯语以显示给用户。并再次将它们更改为英文数字以提供所有请求（回发），

**例如：**
我们有这样的想法`IRQ170`，我想 `IRQ۱۷۰`向用户展示并`IRQ170`从用户那里获得。

我知道，我必须使用`Httpmodule`，但我不知道如何？
你能指导我吗？

**编辑 ：**

让我描述更多：

我编写了以下 http 模块：

```
using System;
using System.Collections.Specialized;
using System.Diagnostics;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Web;
using System.Web.UI;
using Smartiz.Common;

namespace Smartiz.UI.Classes
{
    public class PersianNumberModule : IHttpModule
    {
        private StreamWatcher _watcher;

        #region Implementation of IHttpModule

        /// <summary>
        /// Initializes a module and prepares it to handle requests.
        /// </summary>
        /// <param name="context">An <see cref="T:System.Web.HttpApplication"/> that provides access to the methods, properties, and events common to all application objects within an ASP.NET application </param>
        public void Init(HttpApplication context)
        {
            context.BeginRequest += ContextBeginRequest;
            context.EndRequest += ContextEndRequest;
        }

        /// <summary>
        /// Disposes of the resources (other than memory) used by the module that implements <see cref="T:System.Web.IHttpModule"/>.
        /// </summary>
        public void Dispose()
        {
        }

        #endregion

        private void ContextBeginRequest(object sender, EventArgs e)
        {
            HttpApplication context = sender as HttpApplication;
            if (context == null) return;
            _watcher = new StreamWatcher(context.Response.Filter);
            context.Response.Filter = _watcher;
        }

        private void ContextEndRequest(object sender, EventArgs e)
        {
            HttpApplication context = sender as HttpApplication;
            if (context == null) return;
            _watcher = new StreamWatcher(context.Response.Filter);
            context.Response.Filter = _watcher;
        }

    }

    public class StreamWatcher : Stream
    {
        private readonly Stream _stream;
        private readonly MemoryStream _memoryStream = new MemoryStream();

        public StreamWatcher(Stream stream)
        {
            _stream = stream;
        }

        public override void Flush()
        {
            _stream.Flush();
        }

        public override int Read(byte[] buffer, int offset, int count)
        {
            int bytesRead = _stream.Read(buffer, offset, count);

            string orgContent = Encoding.UTF8.GetString(buffer, offset, bytesRead);
            string newContent = orgContent.ToEnglishNumber();
            int newByteCountLength = Encoding.UTF8.GetByteCount(newContent);
            Encoding.UTF8.GetBytes(newContent, 0, Encoding.UTF8.GetByteCount(newContent), buffer, 0);

            return newByteCountLength;
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            string strBuffer = Encoding.UTF8.GetString(buffer, offset, count);

            MatchCollection htmlAttributes = Regex.Matches(strBuffer, @"(\S+)=[""']?((?:.(?![""']?\s+(?:\S+)=|[>""']))+.)[""']?", RegexOptions.IgnoreCase | RegexOptions.Multiline);
            foreach (Match match in htmlAttributes)
            {
                strBuffer = strBuffer.Replace(match.Value, match.Value.ToEnglishNumber());
            }

            MatchCollection scripts = Regex.Matches(strBuffer, "<script[^>]*>(.*?)</script>", RegexOptions.Singleline | RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
            foreach (Match match in scripts)
            {
                MatchCollection values = Regex.Matches(match.Value, @"([""'])(?:(?=(\\?))\2.)*?\1", RegexOptions.Singleline | RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
                foreach (Match stringValue in values)
                {
                    strBuffer = strBuffer.Replace(stringValue.Value, stringValue.Value.ToEnglishNumber());
                }
            }

            MatchCollection styles = Regex.Matches(strBuffer, "<style[^>]*>(.*?)</style>", RegexOptions.Singleline | RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
            foreach (Match match in styles)
            {
                strBuffer = strBuffer.Replace(match.Value, match.Value.ToEnglishNumber());
            }

            byte[] data = Encoding.UTF8.GetBytes(strBuffer);

            _memoryStream.Write(data, offset, count);
            _stream.Write(data, offset, count);
        }

        public override string ToString()
        {
            return Encoding.UTF8.GetString(_memoryStream.ToArray());
        }

        #region Rest of the overrides
        public override bool CanRead
        {
            get { throw new NotImplementedException(); }
        }

        public override bool CanSeek
        {
            get { throw new NotImplementedException(); }
        }

        public override bool CanWrite
        {
            get { throw new NotImplementedException(); }
        }

        public override long Seek(long offset, SeekOrigin origin)
        {
            throw new NotImplementedException();
        }

        public override void SetLength(long value)
        {
            throw new NotImplementedException();
        }

        public override long Length
        {
            get { throw new NotImplementedException(); }
        }

        public override long Position
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }
        #endregion
    }
} 
```

它运行良好，但它将 css 和脚本文件中的所有数字转换为波斯语并导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:57:48.600

我相信在这里使用 HttpModules 是没有用的。可以在[MSDN](http://msdn.microsoft.com/en-us/library/zec9k340%28v=vs.71%29.aspx)中找到 HttpModules 的一般用法。相反，建议您使用全球化、国际化和本地化方法。解决问题会更加简单高效。请注意，您必须使用波斯编码字体来显示预期结果。

# javascript - 如何在 jqgrid 中同步内联和工具栏编辑按钮

> ID：13709721
> 
> 赞同：1
> 
> 时间：2012-12-04T18:41:49.157
> 
> 标签：javascript, jquery-ui, jqgrid

如何同步 jqgrid 格式化程序动作和工具栏按钮：

1.  如果从格式化程序编辑按钮或工具栏添加或编辑按钮开始内联编辑或添加，则其他编辑和添加按钮应禁用并启用保存和取消。

2.  可以从工具栏或格式化程序操作或使用 esc/enter 选择保存和取消

之后按钮应该正确启用/禁用。

演示

[http://www.ok-soft-gmbh.com/jqGrid/SendDataFromInlineNav.htm](http://www.ok-soft-gmbh.com/jqGrid/SendDataFromInlineNav.htm)

从答案

[jqgrid，如何在使用添加导航器按钮添加行时传递数据](https://stackoverflow.com/questions/8548328/jqgrid-how-to-pass-data-when-adding-row-using-add-navigator-button)

不能正常工作：

单击它编辑操作按钮不会启用工具栏取消按钮。

单击添加或编辑工具栏按钮不会禁用编辑操作按钮。

如何正确同步这些按钮？

# javascript - GET、PUT 和 DELETE 请求在带有主干.js 的外部 api 上

> ID：13709723
> 
> 赞同：1
> 
> 时间：2012-12-04T18:41:57.783
> 
> 标签：javascript, backbone.js, backbone-model, backbone.js-collections

我有一个名为的模型`TodoModel`和一个名为`Todos`. 我用来获取数据的 url 是一个外部 api，因此我将我的集合的 url 函数覆盖为

```
url:function(){
    return "http://abc.com/data"
} 
```

`Todos.fetch()`当我从我的角度写作时，这很好用。

现在，我想传递一些参数，例如`http://abc.com/data/[id]`.

单击每个元素时，都会有不同的 api 调用，具有不同的 id。例如：

*   `http://abc.com/data/123`
*   `http://abc.com/data/234`

我如何实现这一目标？

我应该将模型的 url 设置为此外部 url 吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:44:52.063

如果您在集合中的模型上设置 id，同步将自动进行。例如，如果您有`Todo`一个 id 为 的模型`123`，[`save()`](http://backbonejs.org/#Model-save)它会`POST`变为`http://abc.com/data/123`.

来自[Collection.url 文档](http://backbonejs.org/#Collection-url)：

> 集合中的模型将使用 url 来构造它们自己的 URL。

来自[Model.url 文档](http://backbonejs.org/#Model-url)：

> 生成表单的 URL: ，如果模型不是集合的一部分，则`"/[collection.url]/[id]"`回退到。`"/[urlRoot]/id"`

请参阅[Backbone 的同步文档](http://backbonejs.org/#Sync)以了解 HTTP 方法如何映射到集合中模型上的各种 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:45:30.060

是的，我会在模型和集合上设置 url。

```
Todo = Backbone.Model.extend({
  url : function () {
    var base =  "http://abc.com/data/";
    if (this.isNew()) {
      return base;
    } else {
      return base + this.get("id");
    }
  }
}); 
```

# sql - 在 Oracle 中舍入到特定数量的有效数字

> ID：13709728
> 
> 赞同：3
> 
> 时间：2012-12-04T18:42:31.260
> 
> 标签：sql, oracle

是否有舍入函数 oracle 可以舍入到特定数量的有效数字？

例如，将 1278 舍入到 1300，舍入到两位有效数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:55:44.257

就在我的脑海中，可能是进一步优化的主题:)

```
16:54:16 SYSTEM@dwal> select to_number(to_char(1278, '9.9EEEE'))  t from dual;

         T
----------
      1300

Elapsed: 00:00:00.01
16:54:34 SYSTEM@dwal> select to_number(to_char(.1234, '9.9EEEE'))  t from dual;

         T
----------
       .12

Elapsed: 00:00:00.01 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-06T14:11:21.943

试试`ROUND(x, d - FLOOR(LOG(10, x)) - 1)`where`d`是有效位数，`x`是要四舍五入的值。

例子：

```
SELECT
  ROUND(x, d - FLOOR(LOG(10, x)) - 1) 
FROM (SELECT 1278 x, 2 d FROM DUAL UNION ALL 
      SELECT 0.1234 x, 2 d FROM DUAL  ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:44:33.523

```
select round(1348,-2) from dual; 
```

# java - 与 xlsx 包和 choose.files 冲突

> ID：13709735
> 
> 赞同：45
> 
> 时间：2012-12-04T18:42:58.127
> 
> 标签：java, r, xlsx, rstudio

我在加载 xlsx 包和使用 choose.files 时遇到了一个奇怪的问题。

当我将 RStudio 更新到最新版本 (v0.97.237) 后，这个问题就开始了。如果我启动 RStudio 然后加载 xlsx （即`library(xlsx)`）包加载就好了。但是，如果我然后尝试使用`choose.files()`，RStudio 会冻结（实际上它会持续运行，并且如果不使用 Win7 任务管理器结束它就无法关闭）。如果我启动 RStudio 并首先使用 choose.files，它工作得很好。如果我然后运行该`library(xlsx)`行，则不会加载 xlsx 包。它给出了下面的错误。

我尝试重新安装 xlsx 包（连同 xlsxjars 和 rJava），但没有成功。也没有重新安装 Java。

有什么建议么？我正在使用 R v2.15.2。

```
library(xlsx)  
Loading required package: xlsxjars  
Loading required package: rJava  
Error occurred during initialization of VM  
Could not reserve enough space for object heap  
Error : .onLoad failed in loadNamespace() for 'xlsxjars', details:  
  call: .jinit()  
  error: Cannot create Java virtual machine (-4)  
Error: package ‘xlsxjars’ could not be loaded 
```

编辑：这是问题所在。很抱歉有任何混淆。当我输入这个：

```
filename<-file.choose() #select file
library(xlsx)
mydata<-read.xlsx(filename,1) #load datafile 
```

我可以成功选择文件名，但是xlsx包无法加载所以我无法打开数据文件。我得到上面的错误。但是，如果我改为运行它（在我关闭并重新启动 RStudio 之后）：

```
library(xlsx)
filename<-file.choose() #select file
mydata<-read.xlsx(filename,1) #load datafile 
```

xlsx 包正确加载，但`file.choose`导致 R 无限期运行，因此脚本冻结并且我无法加载我的文件。使用`choose.files()`. 我不知道为什么这两个东西（xlsx 和`file.choose`/ `choose.files`）会发生冲突，但似乎它们是因为我只能使用一个或另一个，这取决于我首先使用哪一个。

编辑 2：我在另一台计算机（相同的操作系统，相同版本的 R、RStudio 和 Java）上尝试过这个，我遇到了同样的问题。

编辑 3：我转换回 RStudio v0.97.90，问题就消失了。我想这是一个 RStudio 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T12:54:01.977

我总是在顶部使用这些行：

```
options(java.parameters="-Xmx4000m")
options(java.home="C:/Program Files/Java/jre7/") 
```

看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T20:33:16.410

尝试清除您的临时文件

控制面板 > 程序 > Java

看看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T16:42:55.063

我最近在新机器上安装 R 时遇到了这个问题。确保您使用的是正确版本的 Java（32 位与 64 位）以匹配您的 R 版本。请注意，Java 的 64 位版本不在他们的主下载页面上，而是在他们的“手册”d /l 页面[在这里](http://www.java.com/en/download/manual.jsp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T12:12:40.153

我推荐 Hadley 的`readxl`包，它从[CRAN](https://cran.r-project.org/web/packages/readxl/)安装，没有 Java 依赖项。

```
library("readxl")
my_data <- read_excel(filename, sheet = 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T11:59:00.413

较新的软件包之一是 rio 软件包。它解决了我遇到的许多导入和导出问题，并且具有仅需要一个库来导入/导出许多不同格式的额外好处。它根据文件名的扩展名确定格式。即使它使用基本相同的功能，它似乎也比其他一些软件包运行得更干净、更快。例如，对于 Excel 文件，它使用该`write.xlsx`函数，但在大型数据集上对我有用，但实际上`write.xlsx`并没有。包文档可以在[这里](https://cran.r-project.org/web/packages/rio/rio.pdf)找到。

```
install.packages("rio")    
library(rio)

import("myfile.xlsx")
export(df, "myfile.xlsx") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-30T17:31:31.523

尝试其中一些软件包：

```
install.packages("XLConnect")
install.packages("xlsxjars")
install.packages("xlsx") 
```

然后加载`library()`

利用`read.xlsx2("blah.xlsx",sheetIndex=NULL)`

不要使用`file.choose`，只需将文件直接插入`read.xlsx2`函数中

或者

```
read.xlsx2("blah.xlsx",sheetName=NULL") 
```

# asp.net - 是否可以在常规 Javascript 函数中添加 jQuery 功能？

> ID：13709737
> 
> 赞同：0
> 
> 时间：2012-12-04T18:43:16.850
> 
> 标签：asp.net, jquery-ui

我有一个显示每个产品摘要的网格视图。当用户单击一行时，我希望他看到一个 jQuery 对话框，该对话框显示有关单击该行的产品的详细信息。

Web 框架是 ASP.NET，所以下面是`<td>`元素在浏览器源代码中的样子

```
<td id="_ctl0_contentMain_gvListOfProducts__ctl13_cRef" align="left"
onclick="getProductInfo(10244);" style="width:10%;cursor:pointer;">Sneakers</td> 
```

我还有一个应该用于对话框的 div

```
<script type = "text/javascript">
    function getProductInfo(id) {
       //TO DO: Add jQuery functionality here to display dialog
    }
</script> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:46:34.387

是的当然。jQuery*是*JavaScript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:50:58.207

您唯一需要做的就是为每一行提供一个唯一的 id 和一个类，然后调用一个 jquery 函数来加载产品详细信息....

```
 $('.row').live('click', function (e) {
                    e.preventDefault();
                    var id = this.id;

                return false;
            }); 
```

上面的代码用“row”类为每一行绑定一个点击事件，然后如你所见，你可以抓住它的 id 并做你想做的事......

# winjs - 链式承诺并在错误 WinJS 上爆发

> ID：13709739
> 
> 赞同：1
> 
> 时间：2012-12-04T18:43:19.653
> 
> 标签：winjs, promise

在 WinJS 中，如果您需要“突破”链，链式 Promise 的正确方法是什么？例如，如果您有 .then() 函数和最终的 .done()。从之后有其他人的 then 返回错误的正确方法是什么？

考虑以下伪代码示例

```
 function doSomething(){
  return new WinJS.Promise(function(comp,err,prog){

  filePicker.pickSingleFileAsync().then(function(file){
         if(file){ // have a valid file
              return  readTextAsync(File);
         }else{ //else user clicked cancel
              return err('No file');
         }
  }).then(function(text){
              if(text){
                   return comp(text);
              }else{
                  return err('No text');
              }
  }).done(null, function(error){ //final done to catch errors
      return err(error);
  });

  });// end return promise
} //end doSomething();

 doSomething().done(function(text){
        console.log(text);
 }, function(err){
        console.log(err);
 }); 
```

现在在这个简化的例子中，如果用户取消 filePicker，他们应该点击第一个 err("No File"); 然而，这仍然会继续调用下一个 .then(text)，它也会返回一个错误（'no text'），因为 text 是未定义的。整体 doSomething().done() 错误处理程序在此处返回“No File”，这是我所期望的，但调试显示代码仍然调用 promise 的“err('No Text')”部分。此时是否有可能真正退出承诺链？我应该看看如何在这里使用[任何](http://msdn.microsoft.com/en-gb/library/windows/apps/br229660.aspx)方法吗？

谢谢

* *** *编辑。如果其他人想根据下面接受的答案知道我的解决方案是什么样的，如下所示：

```
 filePicker.pickSingleFileAsync().then(function (file) {
            if (file) {
                return Windows.Storage.FileIO.readTextAsync(file);
            }               
            return WinJS.Promise.wrapError("No File");
        }).then(function (text) {
            if (text) {
                return complete(text);
            }
            return error("no text");
        }).done(null, function (err) {
            return error(err);
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:31:09.937

用于`WinJS.Promise.wrapError`向承诺链返回错误。

在您的示例中，如果中途出现真正的“错误”，您可以选择仅在最后处理错误。

这也使您有机会“纠正”错误，并允许“成功案例”继续进行——如果您从错误处理程序中返回一个值，该值将沿着成功链传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:33:13.510

我不完全确定，但尝试只调用 err('No text') 而不是“return err('...')”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-07T09:30:32.377

如果你要使用 winjs.promise.wraperror，你应该像这样提供错误处理程序

```
somepromise()
.then(
        function(){ return someAsyncop()},
        function(error){
         somelogfunction("somepromise failed");
         return WinJS.Promise.wrapError(error);
        })
.then(
        function(){ somelogfunction("someAsyncop done ok"); return WinJS.Prmoise.wrap();},
        function(error){
         somelogfunction("someAsyncop failed"); return WinJS.Promise.wrap();
        })
.done(function(){ //dosomtehing }); 
```

或使用`try catch`构造

```
try{
somepromise()
.then(  function(){ return someAsyncop()})
.then(  function(){
         somelogfunction("someAsyncop done ok");
         return WinJS.Prmoise.wrap();}
     )
.done( function(){ //dosomtehing});
}
catch(e){
        somelogfunction(e.message);
} 
```

# java - 在弹出窗口中单击微调器会导致 WindowManager$BadTokenException

> ID：13709741
> 
> 赞同：4
> 
> 时间：2012-12-04T18:43:21.463
> 
> 标签：java, android, select, spinner

我已经针对相同的问题查找了几个帖子，但似乎无法解决我的问题。我在整个应用程序中都使用了微调器，它们工作正常。当我尝试在弹出窗口中使用微调器时，选择它时出现错误。弹出窗口用于添加引用，我声明了一个全局 ViewGroup 变量（即 vg_references），可用于检索弹出窗口上的组件。弹出窗口的代码如下。

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
vg_references = (ViewGroup)inflater.inflate(R.layout.reference, null, false);

pw_references = new PopupWindow(vg_references, 
    this.getWindowManager().getDefaultDisplay().getWidth()/100 * 75,
    this.getWindowManager().getDefaultDisplay().getHeight()/100 * 50,
    true);
pw_references.setFocusable(true);
pw_references.showAtLocation((View)view.getParent(), Gravity.CENTER, 0, 0);

this.populateReferenceView(); 
```

然后这会调用一个函数来填充弹出窗口中的组件（例如文本字段、微调器、布局等......）。此功能的一部分是使用数据库中的字符串列表填充微调器。

```
// Find the spinner
Spinner spinReferenceSourceTypes = (Spinner) vg_references.findViewById(R.id.spin_referencesSourceTypes);          

// Retrieve the list of reference source types and create an array adapter to attach to the list 
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(
    this, android.R.layout.simple_spinner_item, databaseHelper.getReferenceSourceTypes());
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinReferenceSourceTypes.setAdapter(dataAdapter);

// If there's only 1 item in the dropdown list, disable the dropdown list
if(spinReferenceSourceTypes.getCount() < 2) {
    spinReferenceSourceTypes.setEnabled(false);
}
else {
    spinReferenceSourceTypes.setEnabled(true);
} 
```

当我单击此微调器时，程序崩溃并出现以下错误。谁能帮我解决这个问题。谢谢你们

```
12-04 18:43:41.507: E/AndroidRuntime(30504): FATAL EXCEPTION: main
12-04 18:43:41.507: E/AndroidRuntime(30504): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@414c67c8 is not valid; is your activity running?
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:520)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:313)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.widget.PopupWindow.invokePopup(PopupWindow.java:992)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:901)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.widget.ListPopupWindow.show(ListPopupWindow.java:595)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.widget.Spinner$DropdownPopup.show(Spinner.java:764)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.widget.Spinner.performClick(Spinner.java:457)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.view.View$PerformClick.run(View.java:14152)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.os.Handler.handleCallback(Handler.java:605)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.os.Looper.loop(Looper.java:137)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at android.app.ActivityThread.main(ActivityThread.java:4514)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at java.lang.reflect.Method.invokeNative(Native Method)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at java.lang.reflect.Method.invoke(Method.java:511)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-04 18:43:41.507: E/AndroidRuntime(30504):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T08:37:03.117

我在工作中遇到了这个问题，并浪费了大约 2 天的时间试图找到解决方案。但是，我没有从网上找到解决方案。

解决方案是将`Spinner`模式指定为`dialog`.

从 XML 布局：

```
android:spinnerMode="dialog" 
```

或来自java代码：

```
Spinner(Context context, int mode) 
```

希望我的回答对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:42:01.970

我可以让它工作的唯一方法是使用 Dialog 而不是 PopupWindow。这样工作得很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:20:18.367

您可以尝试替换以下行：

```
pw_references = new PopupWindow(vg_references, 
    this.getWindowManager().getDefaultDisplay().getWidth()/100 * 75,
    this.getWindowManager().getDefaultDisplay().getHeight()/100 * 50,
    true); 
```

和

```
pw_references = new PopupWindow(this);
pw_references.setWidth(this.getWindowManager().getDefaultDisplay().getWidth()/100 * 75);
pw_references.setHeight(this.getWindowManager().getDefaultDisplay().getHeight()/100 * 50);
pw_references.setContentView(vg_references); 
```

在哪里`this`参考当前`activity`参考。只是看看这有什么不同......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T09:24:12.180

以下是弹出代码的调用方式。我已经为 PopupWindow 和 ViewGroup 声明了变量，因此它可以在整个班级中使用

```
private PopupWindow pw_references;
private vg_references; 
```

调用 PopupWindow 的代码在按钮的事件处理程序中被调用。

```
public void ibtn_references_Click(View view) {
    ...
    // 1st section of code in the original post
} 
```

此按钮位于一个线性布局（单独的布局文件）中，然后包含在当前屏幕上的框架布局中。包括如下内容。

```
 <FrameLayout
    android:id="@+id/lay_rowButtons"
    android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:background="@drawable/backgroud_border"
    android:padding="10dp" >

    <include android:id="@+id/buttons" layout="@layout/buttons" />

</FrameLayout> 
```

# mysql - MySQL 的 ISDATE() 等效项

> ID：13709744
> 
> 赞同：11
> 
> 时间：2012-12-04T18:43:29.127
> 
> 标签：mysql, sql, mysql-workbench

我有一行代码用于 SQL 服务器，它采用列为“YYYYMMDD”的日期，其中 DD 为 00，并将 00 转换为 01，以便它与日期时间一起使用。我希望能够使用 MySQL

适用于 SQL Server 的当前代码：

```
INSERT patentdb.Citation(PatentNo, Citation, CitedBy, CitationDate)
SELECT PatentNo, citation, WhoCitedThis, dt 
FROM 
(
  SELECT PatentNo, Citation, WhoCitedThis, dt = CASE
    WHEN CitationDate LIKE '%00' THEN INSERT (CitationDate, 8, 1, '1') 
    ELSE CitationDate 
  END 
  FROM patentdb.CitationSource
) AS x
WHERE ISDATE(dt) = 1; 
```

但是 isdate 在 MySQL 中无效，我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T18:47:49.300

您可以尝试使用[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)函数。`null`如果表达式不是日期、时间或日期时间，则返回。

```
WHERE STR_TO_DATE(dt, '%d,%m,%Y') IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-09-20T07:03:53.277

一种可能性，允许参数为字符串、整数或日期：

```
WHERE DAYNAME(dt) IS NOT NULL 
```

这些有效日期返回“星期二”：

```
SELECT IFNULL(DAYNAME('2016-06-21 18:17:47') , '');
SELECT IFNULL(DAYNAME('2016-06-21') , ''); 
```

这些无效日期返回 ''（空字符串）：

```
SELECT IFNULL(DAYNAME('0000-00-00 00:00:00') , '');
SELECT IFNULL(DAYNAME('2016-06-32 18:17:47') , '');
SELECT IFNULL(DAYNAME(NULL) , '');
SELECT IFNULL(DAYNAME(10) , ''); 
```

在 mysql 5.6 中，DAYNAME 似乎比 STR_TO_DATE 快 2 倍：

```
SELECT benchmark(10000000, DAYNAME('2016-06-21 18:17:47'))
1 row(s) returned   3.215 sec / 0.0000072 sec

SELECT benchmark(10000000, STR_TO_DATE('2016-06-21 18:17:47', '%d,%m,%Y'))
1 row(s) returned   7.905 sec / 0.0000081 sec 
```

我想如果参数是日期（而不是字符串），性能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-14T19:04:24.070

与 Timo Kähkönen 的回答类似，我使用 TIMESTAMPDIFF 来确定日期是否像 ISDATE 一样有效。我在两个日期参数中使用相同的日期。如果是日期，则返回零，否则返回 NULL。

我用 BENCHMARK 运行了所有三个示例，其中包含有效和无效日期。我在 ISP JustHost 的共享服务器上运行了这个，MYSQL 版本 5.6.32-78.1：

```
SELECT benchmark(10000000, DAYNAME('2016-06-21 18:17:47'));
-- 1 row(s) returned   3.215 sec / 0.0000072 sec

Mine:  Query took 3.5333 seconds.

SELECT benchmark(10000000, STR_TO_DATE('2016-06-21 18:17:47', '%d,%m,%Y'));
-- 1 row(s) returned   7.905 sec / 0.0000081 sec

Mine: Query took 7.9635 seconds.

SELECT benchmark(10000000, TIMESTAMPDIFF(DAY,'2016-06-21 18:17:47','2016-06-21 18:17:47'));

Mine:  Query took 5.1373 seconds.

...........................

With bad date (June 41st?)

SELECT benchmark(10000000, DAYNAME('2016-06-41 18:17:47'));

Mine: Query took 7.3872 seconds.

SELECT benchmark(10000000, STR_TO_DATE('2016-06-41 18:17:47', '%d,%m,%Y'));

Mine: Query took 7.9919 seconds.

SELECT benchmark(10000000, TIMESTAMPDIFF(DAY,'2016-06-41 18:17:47','2016-06-41 18:17:47'));

Mine:  Query took 7.3792 seconds. 
```

STR_TO_DATE 比其他两个稍慢。如果您主要使用有效日期，则 DAYNAME 方法似乎最快。但没有一个是真正糟糕的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:58:28.497

您还可以使用以下

用一个`REGEXP` `'^([1-9]|0[1-9]|1[012])/([1-9]|0[1-9]|[12][0-9]|3[01])/(19|20)[0-9][0-9]'`

但是正则表达式在这里可能会很棘手，因为日期有太多不同的格式，

或者

投射日期，然后检查结果的长度，发现为空，然后不是日期。 `length(DATE(mydate))`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-05-08T19:49:00.913

好吧，虽然我很欣赏所有的陈述，但我总是喜欢简单的方法。

所有日期戳都包含“-”或“/”字符，所以为什么不使用 LIKE 参数检查所有包含此类字符的日期列。

```
SELECT * FROM TABLE WHERE DATE_COLUMN LIKE '%/%';
SELECT * FROM TABLE WHERE DATE_COLUMN LIKE '%-%'; 
```

# merge - Rhino.ETL - 联合操作

> ID：13709750
> 
> 赞同：2
> 
> 时间：2012-12-04T18:43:50.327
> 
> 标签：merge, union, rhino-etl

我有一个 excel 工作簿，其中包含多个具有相同数据模式的工作表。我有工作实现从单张加载数据。

有没有办法使用 JoinOperation 或任何此类操作将相似的记录（模式）合并到一个集合（行）中？

我的理解是 JoinOperation 可用于左、右、外和内连接，但不能用于联合，因为 MergeRows 的返回类型是 Row。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:50:44.490

您可以实现`AbstractOperation`组合多个输入操作，如下所示：

```
public class UnionAllOperation : AbstractOperation     {
    private readonly List<IOperation> _operations = new List<IOperation>(); 

    public override IEnumerable<Row> Execute(IEnumerable<Row> rows)
    {
        foreach (var operation in _operations)
            foreach (var row in operation.Execute(null))
                yield return row;
    }

    public UnionAllOperation Add(IOperation operation) {
        _operations.Add(operation);
        return this;
    }
} 
```

**更新**：请参阅[此处](https://gist.github.com/v2m/4969559)的并行版本。

在这样的过程中使用它：

```
public class Process : EtlProcess {
    protected override void Initialize() {

        Register(
            new UnionAllOperation()
                .Add(new ExtractFromExcel("WorkBook1.xls"))
                .Add(new ExtractFromExcel("WorkBook2.xls"))
        );
    }
} 
```

这将执行*联合所有*操作。如果您需要一个返回不同行的*联合*`AbstractAggregationOperation`，请在所有列上实现一个和组。

# android - 如何将按钮添加到标记的信息窗口？

> ID：13709752
> 
> 赞同：7
> 
> 时间：2012-12-04T18:44:06.127
> 
> 标签：android, google-maps, google-maps-android-api-2

我想在我的应用程序中实现这个，但我不知道如何让标记有一个按钮，或者如何让 OnMarkerClickListener 告诉我它点击了哪个部分。

例如，这里是官方地图应用程序，其中方向图标是一个单独的部分/按钮，右侧显示评论。

![例子](../Images/ec84dadea1a304e265b18a01743adbf6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:53:29.407

我假设您使用的是新版本的[Google Maps Android API](https://developers.google.com/maps/documentation/android/)

虽然您可以使用 将信息窗口设置为任意视图[`GoogleMap.setInfoWindowAdapter()`](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setInfoWindowAdapter%28com.google.android.gms.maps.GoogleMap.InfoWindowAdapter%29)，但在地图上呈现的信息窗口不是实时视图。相反，它是适配器返回视图时的视图快照。因此，不幸的是，目前无法区分信息窗口上的点击事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T00:41:46.683

[刚才在这里](https://stackoverflow.com/a/13714352/1664556)查看我的答案：相反，使用 OnMarkerClickListener 侦听标记单击事件并直接显示您自己的完整视图。但是，将其锚定到标记的位置可能需要更多的工作。尝试带有 showAtLocation 的 PopupWindow（查看父级，int 重力，int x，int y）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:42:12.060

您基本上可以将所需的 html 代码推送到 InfoWindow 的 content 属性中。

作为参考：[https ://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:47:25.530

“气泡”只是放置在地图顶部的另一个视图。所以你`OnMarkerClickedListener`会告诉你点击了哪个图钉。从那里你可以得到 pin 在屏幕上的实际位置，并使用它来定位将只包含普通 Android 小部件的气泡视图。

# google-api - Google Drive Api - 获取文件夹路径

> ID：13709755
> 
> 赞同：7
> 
> 时间：2012-12-04T18:44:18.323
> 
> 标签：google-api, google-drive-api

我目前正在使用 Google Drive API 来获取文件夹（或子文件夹）列表。为此，我使用以下 URL：

```
https://www.googleapis.com/drive/v2/files/1234folderid1234/children?key=1234APIKEY1234&q=mimeType='application/vnd.google-apps.folder'; 
```

这会按预期返回文件夹列表，但是，我还需要文件夹名称或完整文件夹路径。此调用不返回此信息。有没有办法在一次调用中获取具有相关文件夹名称或路径的文件夹列表？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T01:42:40.850

你需要做两件事：

1.  使用[files.list](https://developers.google.com/drive/v2/reference/files/list)（提供完整的文件资源）
2.  修改您的查询以添加您要搜索的父 ID。

    `mimeType = 'application/vnd.google-apps.folder' and 'folderId' in parents`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-02T13:25:03.943

我知道已经很晚了，但解决这个问题的最佳解决方案是使用递归函数来搜索最后一个文件夹父级。GD API v3 有一个 NodeJS 解决方案，但每个语言和 GD API 版本的推理都是相同的。

```
const drive = google.drive({version: 'v3', auth});
const rootFolderID = 'TheHighestFolderIDOfYourGoogleDriveAccount';
function getFileOrFolderCompletePath(fileOrFolderID, pathList = [], callback){
    let pathList = [];

    if (fileOrFolderID !== rootFolderID){
        drive.files.get({
            fileId: fileID,
            fields: 'id, parents',
        }, (error, response) => {
            if (!error){
                pathList.push(response.data.parents[0])
                pathList = pathList.reverse();
                getFileOrFolderCompletePath(response.data.parents[0], pathList, callback);
            }
        });
    }else{
        callback(pathList.join('/'))
    }
} 
```

您应该致电：

```
getFileOrFolderCompletePath('fileIDtoGetThePath', [], (path) => {
    console.log(path); //It will log: 'path/to/your/file'
}) 
```

# solaris - 在 Solaris 上编译 LAPACK

> ID：13709759
> 
> 赞同：0
> 
> 时间：2012-12-04T18:44:26.317
> 
> 标签：solaris, lapack, sunos

我正在遵循[Python SciPy 需要 BLAS 的建议吗？](https://stackoverflow.com/questions/7496547/python-scipy-needs-blas)将 scipy 本地安装到我在 SunOS 上的主目录（5.10 Generic_147440-12 sun4u sparc SUNW，Sun-Fire-V440）。但是，尽管我有 Python 2.7 工作，安装了 numpy，并且（我认为）编译了 BLAS 库，但我无法让 LAPACK 玩得很好。我的 make.inc 是 make.inc.SUN4SOL2 （这是对的吗？），我已经将 f77 替换为 f95 的 FORTRAN 和 LOADER 变量，但后来我得到：

```
We are about to check whether infinity arithmetic
 can be trusted.  If this test hangs, set
 ILAENV = 0 for ISPEC = 10 in LAPACK/SRC/ilaenv.f
*** Error code 136
make: Fatal error: Command failed for target `lapack_install' 
```

即使我已编辑 ilaenv.f 为 ISPEC=10（和 ISPEC=11）设置 ILAENV = 0。现在我被困住了——如果有帮助，我的编译器会将自己标识为：

```
file `which f95`
/usr/local/rlib/SunStudio11/SUNWspro/bin/f95:   ELF 32-bit MSB executable SPARC32PLUS Version 1, V8+ Required, dynamically linked, stripped 
```

在此先感谢，克里斯

好的 - 一些进展：我已经在我的 make.inc 中添加了 -ftrap=%none 标志，并安装了 GNU make 来使用，而不是使用 solaris 为我提供的任何东西，我们已经解决了最后一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:49:13.850

好吧，我现在似乎在系统上安装了 scipy 和 LAPACK / BLAS。因此，如果它对任何人有帮助，秘密似乎是将 -ftrap=%none 添加到从 INSTALL/make.inc.SUN4SOL 复制的 make.inc 中的标志中，并（在构建 scipy 时）将环境变量 LAPACK 和 BLAS 设置为编译后指向相应的库。

# javascript - 从 Obj C 调用 JavaScript - 没有 WebView

> ID：13709767
> 
> 赞同：1
> 
> 时间：2012-12-04T18:44:48.443
> 
> 标签：javascript, objective-c, macos, cocoa

有没有办法在不使用 Web 视图的情况下从 Objective-C 方法调用 JavaScript 函数？我想要做的是模拟按下网页上的链接（比如添加），每当按下 NSButton 时。每当按下“添加”时，我都知道调用了哪个 JavaScript 函数。

我在应用程序中没有网络视图，这不是 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:46:51.283

> 这不是 iPhone 应用程序。

在这种情况下，您很幸运 - 您可以使用[JavaScriptCore 框架](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/WebKit_JavaScriptCore_Ref/_index.html)从 C 程序调用 JavaScript。

（供将来参考：此框架也可在 iOS 上使用，但它是私有的 - 您可以将其用于内部和越狱开发，但不能在 AppStore 应用程序中使用。Apple 的 JavaScriptCore 的[开源端口](https://github.com/phoboslab/JavaScriptCore-iOS)也存在，正如 @ 指出的那样贾斯汀。）

# javascript - 如何在 Django 模板中连接内容块？

> ID：13709770
> 
> 赞同：1
> 
> 时间：2012-12-04T18:44:56.073
> 
> 标签：javascript, jquery, django, django-templates

> **可能重复：**
> [我们可以追加到 {% block %} 而不是覆盖吗？](https://stackoverflow.com/questions/1724466/can-we-append-to-a-block-rather-than-overwrite)

简单地说，我有一个依赖大量 jQuery 的 Django 应用程序。在单个页面中有多个 $(document).ready 函数存在许多问题（例如，多次触发单击事件）。我相信解决这个问题的方法是连接一个显示在页脚中的内容块，但我似乎找不到任何如何实现这一点的例子。

社区如何建议在 Django 模板中动态创建/扩展单个 $(document).ready 函数的内容？

**更新**

第一条评论中提出的 {{ block.super }} 在从模板调用时有效，但我还使用了各种模板标签，这些标签需要能够添加到 $(document).ready( ）。当从包含标签中调用时，Django 返回一个 AttributeError 异常，说明：'BlockNode' 对象没有属性'context'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:53:01.013

有许多选项，您选择使用的选项取决于您选择所需代码的逻辑有多复杂、代码块相互依赖的程度以及它们与页面标记的关系。您可以简单地将代码块存储为[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)，然后在页脚脚本部分或单个`$(document).ready`部分中调用这些标签。或者你可以使用类似[Require.js](http://requirejs.org/docs/start.html)的东西。

# c# - Access 中的查询表达式中缺少运算符

> ID：13709776
> 
> 赞同：2
> 
> 时间：2012-12-04T18:45:15.750
> 
> 标签：c#, ms-access

我在 Ms-Access 中有一个返回布尔值的查询。但执行时显示“查询表达式中缺少运算符”

```
SELECT case when exists(select due_amt from PaymentDetails where iss_id=20 and user_id=1 and ten_no=1) then cast(1 as bit) else cast(2 as bit) end 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:12:45.250

您需要在 IIf 语句中编写*Case When*语句。此查询返回一个布尔值。

```
SELECT IIf(Nz(due_amt,0) <> 0,True,False) as blndue from PaymentDetails where iss_id=20 and user_id=1 and ten_no=1 
```

编辑：
我认为**Is Null**函数可能比 Nz 更强大。这里是重写

```
SELECT IIf(IIf(due_amt Is Null,0,due_amt) <> 0,True,False) as blndue from PaymentDetails where iss_id=20 and user_id=1 and ten_no=1 
```

编辑 2：ADO 有一个空值的特殊情况。您可以使用“= Null”条件测试 Null 值。我从这个链接得到了这个信息。
[http://www.techrepublic.com/article/10-tricks-for-handling-null-values-in-microsoft-access/6125114](http://www.techrepublic.com/article/10-tricks-for-handling-null-values-in-microsoft-access/6125114)
这里应该是最后的重写...

```
SELECT IIf(IIf(due_amt = Null,0,due_amt) <> 0,True,False) as blndue from PaymentDetails where iss_id=20 and user_id=1 and ten_no=1 
```

# php - 如何在此 SQL SELECT 中添加 WHERE LIKE？

> ID：13709779
> 
> 赞同：-2
> 
> 时间：2012-12-04T18:45:23.723
> 
> 标签：php, mysql, sql, sql-like

我有这个 SQL 和 PHP：

```
$articles = returndata("
     SELECT 
         (SELECT COUNT(*) from blog_posts) as totalcount,
         (SELECT COUNT(*) from comments where assetid = d.assetid) as replies,
         c.name as categoryname,
         d.category as categoryid,
         d.assetid, 
         d.title,
         d.postdate,
         d.articlecontent
     FROM blog_categories c 
         INNER JOIN 
         blog_posts d 
     GROUP BY d.assetid 
     ORDER BY postdate DESC 
         LIMIT " . (($page - 1) * $size) . ", " . $size
, $database); 
```

我还有一个变量 $query，它包含一个多词查询（如“hello world”），我想用它来搜索我的数据库。我已经尝试了正确的事情（我认为），但它一直返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:47:55.623

试试这个 ：：

```
SELECT 
(SELECT COUNT(*) from blog_posts) as totalcount, 
(SELECT COUNT(*) from comments where assetid = d.assetid) as replies, 
c.name as categoryname, 
d.category as categoryid, 
d.assetid, 
d.title, 
d.postdate, 
d.articlecontent 
FROM blog_categories c 
INNER JOIN blog_posts d on // join condition
// THE WHERE CLAUSE SHOULD BE HERE LIKE column like '%sample word%'

GROUP BY d.assetid ORDER BY postdate DESC LIMIT 
```

# proxy - 码头代理 ClassNotFoundException

> ID：13709780
> 
> 赞同：1
> 
> 时间：2012-12-04T18:45:26.070
> 
> 标签：proxy, jetty

我正在尝试将 Jetty 配置为 http 和 https 的代理。我已经下载了两个不同版本的码头，但我都遇到了同样的问题。

我目前使用的版本是：jetty-distribution-8.1.8.v20121106 在 CentOs 6.2 上运行。

解压 tar.gz 后，我修改了 start.ini 文件，将 etc/jetty-proxy.xml 添加到配置文件列表中：

```
#etc/jetty-jmx.xml
etc/jetty.xml
<b>etc/jetty-proxy.xml</b>
etc/jetty-annotations.xml
etc/jetty-ssl.xml
# etc/jetty-requestlog.xml
etc/jetty-deploy.xml
#etc/jetty-overlay.xml
etc/jetty-webapps.xml
etc/jetty-contexts.xml
etc/jetty-testrealm.xml 
```

码头定期启动。我可以通过以下方式访问它：

```
http://localhost:8080/
https://localhost:8443/ 
```

阅读日志文件，似乎已经在端口 8080、8443 和 8888 上启动了三个抽象连接器：

```
2012-12-04 12:40:03.400:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0: 8080
2012-12-04 12:40:03.666:INFO:oejus.SslContextFactory:Enabled 协议 [SSLv2Hello, SSLv3, TLSv1] of [SSLv2Hello, SSLv3, TLSv1]
2012-12-04 12:40:03.668:INFO:oejs.AbstractConnector:Started SslSelectChannelConnector@0.0.0.0: 8443
2012-12-04 12:40:03.668:INFO:oejs.Server:jetty-8.1.8.v20121106
2012-12-04 12:40:03.732:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0: 8888

```

当我将浏览器配置为访问端口 8888 上的代理时，码头失败并出现以下异常：

```
2012-12-04 12:40:13.463:WARN:oejs.ServletHandler:Error for /search
java.lang.NoClassDefFoundError: org/eclipse/jetty/client/HttpExchange
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at org.eclipse.jetty.servlet.ServletHolder.newInstance(ServletHolder.java:941)
    at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:501)
    at org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:402)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:642)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:662)
Caused by: 
java.lang.ClassNotFoundException: org.eclipse.jetty.client.HttpExchange
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
... 
```

我已验证文件夹 $JETTY_HOME/lib 包含 jar 文件：

```
jetty-client-8.1.8.v20121106.jar 
```

包含类 org.eclipse.jetty.client.HttpExchange。要执行码头，我使用命令：bin/jetty.sh start

命令 bin/jetty.sh 检查返回以下信息：

```
Checking arguments to Jetty: 
JETTY_HOME     =  /home/dude/Downloads/jetty-distribution-8.1.8.v20121106
JETTY_CONF     =  /home/dude/Downloads/jetty-distribution-8.1.8.v20121106/etc/jetty.conf
JETTY_RUN      =  /tmp
JETTY_PID      =  /tmp/jetty.pid
JETTY_PORT     =  
JETTY_LOGS     =  
START_INI      =  /home/dude/Downloads/jetty-distribution-8.1.8.v20121106/start.ini
CONFIGS        =  --pre=etc/jetty-logging.xml
JAVA_OPTIONS   =   -Djetty.home=/home/dude/Downloads/jetty-distribution-8.1.8.v20121106-Djava.io.tmpdir=/tmp
JAVA           =  /data/dude/java/bin/java
CLASSPATH      =  
RUN_CMD        =  /data/dude/java/bin/java -Djetty.home=/home/dude/Downloads/jetty-distribution-8.1.8.v20121106 -Djava.io.tmpdir=/tmp -jar /home/dude/Downloads/jetty-distribution-8.1.8.v20121106/start.jar --pre=etc/jetty-logging.xml

Jetty running pid=15498 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:57:03.630

在 start.ini 添加客户端的 OPTIONS 中，代理环境要求客户端工件可用。就像您使用 ProxyServlet 一样，您需要在您的 servlets web-inf/lib 目录中拥有 jetty-client 及其依赖项。

无论如何，这将向您展示可能的选项以及在您运行它时将其置于类路径中的原因。start.jar 真的只是帮助构建了码头运行的环境。

> java -jar start.jar --list-options

这将通过为您提供给定配置的示例命令行，向您展示当前的设置方式：

> java -jar start.jar --dry-run

有关它的更多帮助，请查看：

> java -jar start.jar --help

或看这里：

[http://wiki.eclipse.org/Jetty/Feature/Start.jar](http://wiki.eclipse.org/Jetty/Feature/Start.jar)

# java - 如何将加速度计传感器的数据写入文件并在matlab上写入？

> ID：13709782
> 
> 赞同：1
> 
> 时间：2012-12-04T18:45:28.363
> 
> 标签：java, android, matlab, io, text-files

我想从 Android 加速度计收集数据并将其写入文件。该文件存储在 SDCard 上，然后我通过 adbpull 命令手动复制到计算机。然后我想分析Matlab上的值。

最好的方法是什么？我尝试将参数写为字符串，但我不知道如何在 Matlab 上阅读。

```
 WriteOnFile(FdataAcc, String.valueOf(event.timestamp) 
                                + " " + mAcceleration[0] 
                                + " " + mAcceleration[1]
                                + " " + mAcceleration[2] + "\n");  

    public void WriteOnFile(File filename, String data){
    try{
        DataOutputStream dos = new DataOutputStream( new FileOutputStream(filename,true));
        //new appended stream
        dos.writeChars(data);
        dos.close();
        }
        catch(Exception e){;}

} 
```

我也尝试将值写为浮点数，但我仍然无法在 Matlab 上阅读。

```
 public void WriteOnFile(File filename, long data){
    try{
        DataOutputStream dos = new DataOutputStream( new FileOutputStream(filename,true));
        dos.writeFloat((float)data);
        dos.writeChars(" ");
        dos.writeFloat((float) mAcceleration[0]);
        dos.writeChars(" ");
        dos.writeFloat((float) mAcceleration[1]);
        dos.writeChars(" ");
        dos.writeFloat((float) mAcceleration[2]);
        dos.writeChars("\n");
        dos.close();
        }
        catch(Exception e){;}

} 
```

最好的方法是什么？我应该使用 Dataoutputstream 写入文件吗？传感器值是浮点数。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:56:33.097

您应该使用您展示的第二个示例，但不要在浮点数之间写入字符。

当您在 matlab 上执行 fopen 时，请确保输入机器格式参数。您可能需要对其进行试验，直到获得正确的格式，但它会起作用。做`help fopen`看看选项。

那么你所要做的就是读入所有数据

```
fid = fopen(filename,'r',MACHINEFORMAT);
data = fread(fid,inf,'float32');  %float32 is for single precision float 
```

或者，如果你想读入一个数组：

```
data = fread(fid,[M,inf],'float32'); 
```

其中 M 是数组中每一列的元素数。

# android - Android socket.io 切换活动而不丢失连接

> ID：13709783
> 
> 赞同：1
> 
> 时间：2012-12-04T18:45:28.700
> 
> 标签：android, socket.io

我开发了一个游戏，它将使用 socket.io 连接，我的服务器使用 node js 编写，我的 android 客户端使用 socket.io，现在，我的问题是：

如何在不丢失与服务器连接的情况下切换活动，我至少有 4 个活动、聊天、游戏视图、在线玩家列表等等。

当我打开我的应用程序时，我创建了连接，当我登录到服务器时，我想将活动切换到另一个。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T02:52:45.323

尝试制作单例类 SocketIO 服务

在第一个活动中初始化 socketio 连接以建立与服务器的连接，这里是我的示例服务类

```
 public class SocketIOClient {
    private static final String serverUrl = "http://example-socket-server.jit.su";
    private static SocketIO socket;
    private static SocketIOClient instance;
    private static Activity act;
    private static String id;

    public SocketIOClient() {
    }

    public static void initInstance(String uid) throws MalformedURLException {
        if (instance == null) {
            instance = new SocketIOClient();
            instance.initID(uid);
            if (SocketIOClient.getSocket() == null) {
                SocketIOClient.setSocket(new SocketIO());
            }
            SocketIOClient.connectIO();
        }
    }

    public static void setActivity(Activity a) {
        SocketIOClient.act = a;
    }

    public static SocketIO getSocket() {
        return socket;
    }

    public static void setSocket(SocketIO socket) {
        SocketIOClient.socket = socket;
    }

    public String getId() {
        return id;
    }

    private void initID(String uid) {
        if (SocketIOClient.id == null) {
            SocketIOClient.id = uid;
        }
    }

    public static void connectIO() throws MalformedURLException {
        try {
            SocketIO.setDefaultSSLSocketFactory(SSLContext.getDefault());
        } catch (NoSuchAlgorithmException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        SocketIOClient.getSocket().connect(serverUrl, new IOCallback() {
            @Override
            public void onMessage(JSONObject json, IOAcknowledge ack) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onMessage(String data, IOAcknowledge ack) {

            }

            @Override
            public void onError(SocketIOException socketIOException) {
            }

            @Override
            public void onDisconnect() {
                // TODO Auto-generated method stub

            }

            @Override
            public void onConnect() {

            }

            @Override
            public void on(String event, IOAcknowledge ack, Object... args) {

            }
        });
    }

    public static void emit(String event, Object args)
            throws MalformedURLException {
        if (SocketIOClient.getSocket().isConnected() == false) {
            SocketIOClient.getSocket().reconnect();
        }
        SocketIOClient.getSocket().emit(event, args);
    }

    public static void emitWithAcknowledge(String event, Object args)
            throws MalformedURLException {
        if (SocketIOClient.getSocket().isConnected() == false) {
            SocketIOClient.getSocket().reconnect();
        }
        SocketIOClient.getSocket().emit(event, new IOAcknowledge() {

            @Override
            public void ack(Object... args) {
                // TODO Auto-generated method stub

            }
        }, args);
    }

} 
```

在第一个活动中，我输入了以下代码：

```
SocketIOClient.initInstance(android_id); 
```

它是创建对象并尝试连接到服务器，如果你想要事件或其他东西，你可以在 onConnect 或 onDisconnect 处理它

当您切换活动时，您仍然连接到服务器，如果您想关闭连接，请使用：

```
SocketIOClient.getSocket().disconnect(); 
```

# javascript - 随时间重复功能

> ID：13709789
> 
> 赞同：0
> 
> 时间：2012-12-04T18:45:43.550
> 
> 标签：javascript

我试图在 iframe 中每 90 秒显示一次运动成绩。除了一部分，我什么都可以工作。我遇到的问题是，一旦时间从 90 变为 0，它会将 html 页面加载到 iframe 中，并继续永远重新加载相同的 html 页面。如何让它加载一次，然后重新开始 90 秒倒计时？

```
// variables
var timeCountdown = 90,
  minutesCountdown,
  secondsCountdown,
  mainCountdown;
// main script countdown
mainCountdown = setInterval(function() {
  // display countdown time
  document.getElementById("countdown").innerText = mainCountdown + " seconds remaining!";
  // if time is 0 or smaller
  if (timeCountdown <= 0) {
        // load sports scores
        document.getElementById("iframe").src = "sports/nba/feed.html";
  } else {
        // convert random time to minutes
        minutesCountdown= Math.floor(timeCountdown / 60);
        //  convert random time to seconds
        secondsCountdown = (timeCountdown % 60);
        // add leading zero to seconds if less than ten
        if (secondsCountdown < 10) {
        secondsCountdown = "0" + secondsCountdown;
        }
        // add leading zero to minutes if less than ten
        if (minutesCountdown <= 10) {
        minutesCountdown = "0" + minutesCountdown;
        }
        // display countdown until next search
        document.getElementById("countdown").innerHTML = "Loading NBA scores in " + minutesCountdown + ':' + secondsCountdown;
        // reduce countdown time
        timeCountdown--;
  }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:49:51.190

~~[clearInterval(intervalId)](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)是你需要的。~~

在你的情况下，它会是

```
if (timeCountdown <= 0) {
    window.clearInterval(mainCountdown); 
```

 ~~哦，你想重置计时器吗？将变量 timeCountdown 设置回 90！

```
if (timeCountdown <= 0) {
    timeCountdown = 90; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:51:29.167

当`timeCountdown`达到 0 并且您加载 iFrame 时，您需要设置`timeCountdown`回 90。~~

# c# - autofac 打开通用 iRepository xml配置

> ID：13709791
> 
> 赞同：0
> 
> 时间：2012-12-04T18:45:52.317
> 
> 标签：c#, autofac, xml-configuration, open-generics

我想使用 autofac 和存储库模式 (iRepository)，但似乎看不到使用 XML 配置配置 autofac 的方法。

正如其他人遇到这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:09:21.860

Autofac 目前不支持通过 XML 配置注册开放的泛型。XML 配置机制很方便，但不是 Autofac 的完整 1:1 功能集（可能永远不会）。

处理更复杂配置的推荐方法是将[XML 配置](https://code.google.com/p/autofac/wiki/XmlConfiguration)与[Autofac 模块](https://code.google.com/p/autofac/wiki/StructuringWithModules)结合使用。

# java - 声明List有什么区别 与数组列表 ?

> ID：13709795
> 
> 赞同：10
> 
> 时间：2012-12-04T18:46:11.917
> 
> 标签：java, collections

```
List<Integer> mylist = new ArrayList<Integer>();

ArrayList<Integer> mylist2 = new ArrayList<Integer>(); 
```

我想知道Java集合API中上述两者之间的实际区别是什么。我是 Java 集合 API 的新手。我知道 List 是 ArrayList 类实现的接口。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T18:50:52.493

`List<Integer>`版本是接口类型——它只允许你执行接口声明的方法，而类型`ArrayList<Interger>`化变量允许你做任何在 the`ArrayList<Interger>`和它的 supers 中声明的事情。（`List`当然包括）。

然而，尽管选择第一个似乎“没用”——**它实际上让你有更大的灵活性**`LinkedList<Interger>`——如果你以后决定你想要一个（例如）而不是一个`ArrayList<Interger>`作为动态类型，它将帮助你更容易地改变你的设计。

* * *

**补充：**
当然不代表你需要*自动*选择`List<Integer>`版本。如果您确实需要使用确切的类型`ArrayList`- 您应该选择它。一个好的经验法则是从接口版本开始，然后将其更改为`ArrayList<Integer>`仅当您发现自己在努力获得使用类型很容易完成的事情时`ArrayList`（或者如果您发现自己转换为`ArrayList`...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:51:03.147

在您的声明 1 中，由于您指`mylist`的是`List<Integer>`while it is still `ArrayList<Integer>`，因此您只能使用**接口****中可用的方法。`List`**如果您使用的是 cross class.method 功能，这是更好的说法。

此外，任何接受的方法`List<Integer>`都可以接受`List`例如`LinkedList<Integer>`或您的自定义实现类的任何实现类。

您的第二条语句仅创建和引用该对象`ArrayList<Integer>`。有些人更喜欢`mylist`在方法中本地使用它时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T19:07:29.907

**始终**对接口进行编码。

（汽车类比警报）

你走进赫兹租车公司。你说，我想要一个`IVehicle`。他们说，“嗯，什么*样*的`IVehicle`？” 你不在乎。所以他们给你一个`DumpTruck`. 但是你不想要一辆自卸卡车，你想要一些紧凑的东西。你想要一个`ICompact`可以扩展的`IVehicle`. 所以他们给你一辆摩托车。“不！” 你惊呼，“我想要一个`ICar`！” “什么样的`ICar`？” 他们问。“我不在乎！” 你惊呼。所以他们给你一个`FordCar`，你从此过上幸福的生活。

这样就清楚了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T18:50:06.263

第一个称为接口编码。

在整个代码中使用`List`引用，您可以将具体实现更新为其他内容，例如 a`LinkedList`而不会破坏您的客户端代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T18:51:28.793

您可以将其视为多态性。

`List<Integer> mylist`声明它是一个 List，但它不必是一个 ArrayList - JVM 只知道它实现了 List 接口。

`ArrayList<Integer> mylist2`声明它是一个 ArrayList，所以 JVM 知道它不仅是一个 List，而且特别是一个 ArrayList。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T18:51:11.153

> 我知道 List 是 ArrayList 类实现的接口。

这正是区别:)

当您在代码中使用两个变量 (mylist) 和 (mylist2) 时，您将可以访问 ArrayList 定义的任何方法，这些方法不属于 mylist2 上的基本 List 接口的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T18:51:22.617

对于`myList`，您将只能调用`List`接口的方法。

例如，您不能调用`ensureCapacity`myList 上的方法。

# gridview - 可以通过 ViewHolder 更改 GridView 中的视图吗？

> ID：13709797
> 
> 赞同：1
> 
> 时间：2012-12-04T18:46:14.047
> 
> 标签：gridview

我已经阅读了很多关于 GridViews 和 ViewHolders 的内容，但没有什么能帮助我。不知道它是否可能，或者我只是无法管理它。问题： GridView 表示一个数独字段，如果用户输入一个数字，它可以包含一个 TextView 或另一个用于显示可能数字的铅笔标记的 GridView。想法：一个持有 GridView 和一个 TextView 的 ViewHolder。如果 TextView 的文本为空，则应显示铅笔标记（在 GridView 中），否则应看到带有数字的 TextView。这是我的适配器代码：（也许布局有一些问题？它完全不直观-.-）

编辑：单元格是一个视图数组，它定义了每个字段中的起始视图。因此，如果在字段 x 中已经是数字 y，则单元格 [x] 包含带有文本集 y 的文本视图。（我想它有点难看，但我不熟悉gridviews并且有很多问题：（）

```
public class ViewAdapter extends BaseAdapter{
Context context;
View[] cells;
int size;

public ViewAdapter(Context context, View[] cells, int size) {
    this.context = context;
    this.cells = cells;
    this.size = size;
}

public int getCount() {
    return 81;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View target, ViewGroup parent) {
    ViewHolder holder;
    if (target == null) {
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        target = inflater.inflate(R.layout.activity_game, parent, false);
        holder = new ViewHolder();
        if (cells[position] instanceof GridView) {
            holder.gv = (GridView)cells[position];
            holder.tv = new TextView(context);
            holder.tv.setText("");
        } else if (cells[position] instanceof TextView){
            holder.gv = new GridView(context);
            holder.gv.setNumColumns(3);
            holder.gv.setClickable(false);
            holder.tv = (TextView)cells[position];
        }
        target.setTag(holder);
    } else {
        holder = (ViewHolder)target.getTag();
    }

    GridView gv = holder.gv;
    gv.setBackgroundColor(Color.WHITE);
    gv.setLayoutParams(new GridView.LayoutParams(20, 20));      

    TextView tv = holder.tv;
    tv.setGravity(Gravity.CENTER);
    tv.setLayoutParams(new GridView.LayoutParams(LayoutParams.MATCH_PARENT, size));     
    tv.setBackgroundColor(Color.WHITE);
    tv.setTextAppearance(context, android.R.style.TextAppearance_Large);

    return target;
}

class ViewHolder {
    GridView gv;
    TextView tv;
}
} 
```

问候 jan 并感谢您的任何回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:14:59.863

好的，我自己找到了解决方案。我只使用 TextView 并在 3 行文本中做铅笔标记。这是我找到的最简单的方法。但我仍然想知道视图之间的切换是否可行。

# c# - 导致连接的套接字在 .BeginReceive 之后立即接受新消息？

> ID：13709801
> 
> 赞同：2
> 
> 时间：2012-12-04T18:46:44.537
> 
> 标签：c#, vb.net, multithreading, visual-studio-2010, sockets

基本上我已经建立了一个套接字连接。这是我的 WaitData 方法：

```
 public void WaitForData()
    {
        State state = new State();
        state.Client = socket;
        //issue first receive
        state.Client.BeginReceive(state.Buffer, 0, state.Buffer.Length, SocketFlags.None, new AsyncCallback(ServerReadCallback), state);
    } 
```

每当我的套接字等待数据时都会调用它（我希望它一直等待数据）。因此，每当开始接收新消息（调用 .BeginReceive）时，我希望我的主线程再次调用 WaitForData 以便它继续接受消息。这将如何完成？

（顺便说一句，我不能在 ServerReadCallback 中调用 WaitForData ，因为它会阻止实际接收消息）。

对不起，如果我的描述很混乱；我发现它很难描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:53:38.747

在您的 ServerReadCallBack 例程中，一旦您完成处理消息，发出另一个 BeginReceive 即：

```
 State state = new State();
    state.Client = socket;
    //issue first receive
    state.Client.BeginReceive(state.Buffer, 0, state.Buffer.Length, SocketFlags.None, new AsyncCallback(ServerReadCallback), state); 
```

但是请记住，如果您的消息是可变长度的，那么在缓冲区中读取的数据可能是消息的一部分；整个消息；或整个消息加上另一条消息的部分/全部。因此，您的 ServerReadCallback 需要能够处理这个问题 - 类似于：

```
 private void OnDataReceived(IAsyncResult asyn)
    {
        ReceiveState rState = (ReceiveState)asyn.AsyncState;
        Socket client = rState.Client;
        SocketError socketError = SocketError.TypeNotFound;

        if (!client.Connected)
        {
            // Not Connected anymore ?
            return;
        }

        _LastComms = DateTime.Now;
        _LastIn = _LastComms;

        int dataOffset = 0; 
        int restOfData = 0;
        int dataRead = 0;
        Boolean StreamClosed = false;
        long rStateDataLength = 0;
        long LastrStateDataLength = 0;

        try
        {

            dataRead = client.EndReceive(asyn, out socketError);
        }
        catch (Exception excpt)
        {
           // Your code goes here..
        }

        if (socketError != SocketError.Success)
        {
            // Has Connection been lost ?
            OnConnectionDropped(client);
            return;
        }

        if (dataRead <= 0)
        {
            // Has connection been lost ?
            OnConnectionDropped(client);
            return;
        }

        while (dataRead > 0)
        {
            //check to determine what income data contain: size prefix or message
            if (!rState.DataSizeReceived)
            {
                //there is already some data in the buffer
                if (rState.Data.Length > 0)
                {
                    restOfData = PrefixSize - (int)rState.Data.Length;
                    rState.Data.Write(rState.Buffer, dataOffset, restOfData);
                    dataRead -= restOfData;
                    dataOffset += restOfData;
                }
                else if (dataRead >= PrefixSize)
                {  //store whole data size prefix
                    rState.Data.Write(rState.Buffer, dataOffset, PrefixSize);
                    dataRead -= PrefixSize;
                    dataOffset += PrefixSize;
                }
                else
                {  // store only part of the size prefix
                    rState.Data.Write(rState.Buffer, dataOffset, dataRead);
                    dataOffset += dataRead;
                    dataRead = 0;
                }

                if (rState.Data.Length == PrefixSize)
                {  //we received data size prefix 
                    rState.DataSize = BitConverter.ToInt32(rState.Data.GetBuffer(), 0);
                    rState.DataSizeReceived = true;
                    //reset internal data stream             
                    rState.Data.Position = 0;
                    rState.Data.SetLength(0);
                }
                else
                {  //we received just part of the prefix information 
                    //issue another read
                    client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                       SocketFlags.None, new AsyncCallback(socketReadCallBack),
                          rState);
                    return;
                }
            }

            //at this point we know the size of the pending data

            // Object disposed exception may raise here
            try
            {
                rStateDataLength = rState.Data.Length;
                LastrStateDataLength = rStateDataLength;
            }
            catch (ObjectDisposedException Ode)
            {
                StreamClosed = true;
            }
            if (!StreamClosed)
            {

                if ((rStateDataLength + dataRead) >= rState.DataSize)
                {   //we have all the data for this message

                    restOfData = rState.DataSize - (int)rState.Data.Length;

                    rState.Data.Write(rState.Buffer, dataOffset, restOfData);
                    //Console.WriteLine("Data message received. Size: {0}",
                    //   rState.DataSize);

                    // Is this a heartbeat message ?
                    // This is my own thing - you may not need this..
                    if (rState.Data.Length == 2)
                    {
                        // Yes
                        HeartBeatReceived();
                    }
                    else

                    {
                       // Handle the received messsage

                        DecodeMessageReceived(GetStringFromStream(rState.Data));
                    }

                    dataOffset += restOfData;
                    dataRead -= restOfData;

                    //message received - cleanup internal memory stream
                    rState.Data = new MemoryStream();
                    rState.Data.Position = 0;
                    rState.DataSizeReceived = false;
                    rState.DataSize = 0;

                    if (dataRead == 0)
                    {  
                        //no more data remaining to process - issue another receive
                        if (_IsConnected)
                        {
                            client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                               SocketFlags.None, new AsyncCallback(socketReadCallBack),
                                  rState);
                            return;
                        }
                    }
                    else
                        continue; //there's still some data to process in the buffers
                }
                else
                {  //there is still data pending, store what we've 
                    //received and issue another BeginReceive
                    if (_IsConnected)
                    {
                        rState.Data.Write(rState.Buffer, dataOffset, dataRead);

                        client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                           SocketFlags.None, new AsyncCallback(socketReadCallBack), rState);

                        dataRead = 0;
                    }
                }
            }
            else
            {
                // Stream closed, but have we read everything ?
                if (LastrStateDataLength + dataRead == rState.DataSize)
                {
                    // We're equal, get ready for more
                    //no more data remaining to process - issue another receive
                    if (_IsConnected)
                    {
                        client.BeginReceive(rState.Buffer, 0, rState.Buffer.Length,
                           SocketFlags.None, new AsyncCallback(socketReadCallBack),
                              rState);
                    }
                    return;
                }
                else
                {
                    // We should have more..
                    // report error ?
                }
            }

            // If we've been disconnected, provide a graceful exit
            if (!_IsConnected)
                dataRead = -1;

        }
     } 
```

在这段代码中，我的 rstate 是：

```
public class ReceiveState
{
    public byte[] Buffer = new byte[1024]; //buffer for network i/o
    public int DataSize = 0; //data size to be received by the server
    public bool DataSizeReceived = false; //whether prefix was received
    public MemoryStream Data = new MemoryStream(); //place where data is stored
    public Socket Client;   //client socket
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:40:05.933

你想做这样的事情：

```
private ManualResetEvent _connectionAccepted;

public void WaitForData()
{
    while (true)
    {
        _connectionAccepted.Reset();

        socket.BeginAccept(new AsyncCallback(AcceptCallback), state);

        _connectionAccepted.WaitOne();
    }
}

private void Acceptcallback(IAsyncResult ar)
{
     _connectionAccepted.Set();

     Socket socket = (Socket)ar.AsyncState;
     Socket handler = socket.EndAccept(ar);

     State state = new State();
     state.Client = handler;

     handler.BeginReceive(state.Buffer, 0, state.Buffer.Length, SocketFlags.None, new AsyncCallback(ServerReadCallback), handler);
} 
```

所以，基本上，你无限循环。当你得到一个连接时，你开始接受它；当您在处理接受连接的代码中时，您向主循环发出信号，表明它可以继续进行。然后你 EndAccept，它为你提供了第二个套接字 - 该套接字用于与客户端通信，从而允许初始套接字继续接受新连接。

只需要一次调用 WaitForData() - 这就是循环所在的位置 - 所以您可能希望将其提升到命名或诸如此类的级别。但这是一般的想法。

# asp.net - 为什么我无法获取数据列表中复选框的值？

> ID：13709805
> 
> 赞同：0
> 
> 时间：2012-12-04T18:46:50.983
> 
> 标签：asp.net, webforms, datalist

我在从查询填充的数据列表中有一组复选框。选中后，我希望将这些值（字符串）从另一个文本框添加到字符串中。（基本上只是注释，复选框使输入经常重复的评论变得很短。）

但由于某种原因，我无法在我的代码隐藏中获得选中的复选框。复选框呈现在表单中，在提琴手中，我可以看到一些复选框具有“on”值，但我无法将值放入插入字符串中。

现在，我只是将它包含在按钮的单击事件中。我需要对数据列表进行单独的数据绑定吗？如果我需要这样做，我如何将其余的值放入点击事件中？我尝试单独进行数据绑定，然后从单击事件中调用数据绑定函数，但是在同一上下文中找不到我创建的变量。

这是cs代码：

```
 foreach (DataListItem item in StatusCheckboxDataList.Items)
            if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
            {
                {

                    CheckBox StatusProblemDescriptionCheckbox= (CheckBox)item.FindControl("StatusProblemDescriptionCheckbox");
                    HiddenField StatusProblemDescriptionHidden= (HiddenField)item.FindControl("StatusProblemDescriptionHidden");
                    if (StatusProblemDescriptionCheckbox != null)
                    {
                        if (StatusProblemDescriptionCheckbox.Checked == true)
                        {
                            string StatusProblemString = StatusProblemDescriptionHidden.Value;
                            StatusProblemString = "Errors Found: " + StatusProblemString + ", " + Status_notes.Text; //this is coming from the textbox... it's finding this just fine.
                            newstatusentry.s_notes = StatusProblemString;

                        }
                        else
                        {
                            string StatusProblemString = Status_notes.Text;
                            newstatusentry.s_notes = StatusProblemString;

                        }
                    }
                }
            } 
```

它恰好位于 AjaxControlToolkit Accordion 中，但我移除了手风琴，但还是不行。

这是aspx代码

```
<asp:DataList ID="StatusCheckboxDataList" runat="server">
 <ItemTemplate>
    <asp:CheckBox ID="StatusProblemDescriptionCheckbox" runat="server" Text='<%#Eval ("statusprobDesc") %>' /><br />
     <asp:HiddenField ID="StatusProblemDescriptionHidden" runat="server" Value='<%#Eval ("statusprobDesc") %>' />
    </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:36:26.297

确保每次循环时都不会过度写入测试框值：使用

```
 newstatusentry.s_notes = newstatusentry.s_notes+ StatusProblemString; 
```

而不是：

```
 newstatusentry.s_notes = StatusProblemString 
```

# ruby-on-rails - application.css 资产管道

> ID：13709807
> 
> 赞同：5
> 
> 时间：2012-12-04T18:47:02.240
> 
> 标签：ruby-on-rails, asset-pipeline

我在 Rails 3.2.8 上，我想切换到使用资产管道。

我在我的开发机器上，并且我的资产设置如下 `app/assets/stylesheets/application.css`：

```
 ...    
  *= require_directory ../public/javascripts/jquery/themes/base
  *= require_directory ../public/prototype/stylesheets/css
*/ 
```

我所有的样式表、js 和图像都在 public 文件夹中，现在是一个包罗万象的文件夹。文件夹结构：

```
app/assets
  /stylesheets
    /application.css
  /javascripts
  /images
  /public
    /stylesheets
    /javascripts
    /prototype
    /images 
```

目前该`public/assets/application.css`文件为空。如何在开发环境中编译这个文件？

当我`Rails.application.config.assets.paths`在 rails 控制台中运行时，我得到`app/assets/public`的不是资产的完整目录路径。

在视图中，我将资产管道样式表称为： `<%= stylesheet_link_tag 'application.css' %>`

编辑 1：我尝试将所有样式表移动到，`app/assets/stylesheets/`但它没有在视图中正确编译 application.css。它编译为：

`<link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css" />`

当我查看链接时， localhost:3000/assets/application.css 它是一个空白文件。

编辑 2：我使用单引号而不是双引号并修复了语法错误。我想我已经掌握了它，因为我已经弄清楚了路径。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T19:53:59.840

只需保留 application.css 的原始设置，让资产管道完成工作：

```
*= require_self
*= require_tree . 
```

在您的布局中，您应该能够加载已编译的 application.css 文件：

```
<%= stylesheet_link_tag "application", :media => "all" %> 
```

我不同意谭的回答。您不必将文件放在开发中的默认位置以外的任何地方。您可以轻松搞砸您的东西，除非您需要类似 requireJS 的资产管理，否则您可以从资产管道中受益匪浅。

以下是您需要了解的有关资产管道的所有信息：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:48:50.933

将您的 CSS 文件移动到

```
 app/assets/ 
```

并从那里要求他们。

# less - 使用 LESS CSS 创建跨浏览器渐变的问题

> ID：13709808
> 
> 赞同：1
> 
> 时间：2012-12-04T18:47:04.393
> 
> 标签：less

这是我的 LESS Mixin：

```
.gradient (@start, @stop) {
    background: ~"#@{start}";
    background: ~"-moz-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-webkit-gradient(linear, left top, left bottom, color-stop(0%,#@{start}), color-stop(100%,#@{stop}))";
    background: ~"-webkit-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-o-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-ms-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"linear-gradient(to bottom, #@{start} 0%, #@{stop} 100%)";
    filter: ~"progid:DXImageTransform.Microsoft.gradient( startColorstr='#00@{start}', endColorstr='#00@{stop}', GradientType=0 )";
}; 
```

这就是我所说的：

```
.multi-button {
    .gradient (ffffff, ededed);
} 
```

编译后我得到这个（这是正确的）：

```
.multi-button {
  background: #ffffff;
  background: -moz-linear-gradient(top, #ffffff 0%, #ededed 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#ededed));
  background: -webkit-linear-gradient(top, #ffffff 0%, #ededed 100%);
  background: -o-linear-gradient(top, #ffffff 0%, #ededed 100%);
  background: -ms-linear-gradient(top, #ffffff 0%, #ededed 100%);
  background: linear-gradient(to bottom, #ffffff 0%, #ededed 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ededed', GradientType=0 );
} 
```

我在调用 Mixin 时删除了“#”，因为我希望能够将额外的 alpha 信息添加到 MS 过滤器中，而无需获得以下信息：

```
#00#ffffff 
```

但是，这并不适用于所有情况，我不知道为什么？上述工作，但在另一个梯度我得到不同的结果。这就是我调用 Mixin 的方式：

```
.quick-button.blue {
    .gradient (67c2ef, 00a2ed);
} 
```

编译后，我得到这个：

```
.quick-button.blue {
  background: #[object Object],[object Object];
  background: -moz-linear-gradient(top, #[object Object],[object Object] 0%, #[object Object],[object Object] 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#[object Object],[object Object]), color-stop(100%,#[object Object],[object Object]));
  background: -webkit-linear-gradient(top, #[object Object],[object Object] 0%, #[object Object],[object Object] 100%);
  background: -o-linear-gradient(top, #[object Object],[object Object] 0%, #[object Object],[object Object] 100%);
  background: -ms-linear-gradient(top, #[object Object],[object Object] 0%, #[object Object],[object Object] 100%);
  background: linear-gradient(to bottom, #[object Object],[object Object] 0%, #[object Object],[object Object] 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00[object Object],[object Object]', endColorstr='#00[object Object],[object Object]', GradientType=0 );
} 
```

我正在使用 CodeKit 1.3.5 进行编译。我没有收到任何编译错误，但显然出了点问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T23:10:35.497

更新 - 问题已解决

这是我的混音：

```
.gradient (@start, @stop) {
    background: ~"#@{start}";
    background: ~"-moz-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-webkit-gradient(linear, left top, left bottom, color-stop(0%,#@{start}), color-stop(100%,#@{stop}))";
    background: ~"-webkit-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-o-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"-ms-linear-gradient(top, #@{start} 0%, #@{stop} 100%)";
    background: ~"linear-gradient(to bottom, #@{start} 0%, #@{stop} 100%)";
    filter: ~"progid:DXImageTransform.Microsoft.gradient( startColorstr='#00@{start}', endColorstr='#00@{stop}', GradientType=0 )";
}; 
```

这就是我所说的：

```
.gradient ('eeeeee', 'f9f9f9'); 
```

关键是将 HEX 值用单引号括起来。我不是 100% 确定为什么它有时能正确解析而不是其他的，但这解决了这个问题。

# selenium-rc - 在 Selenium 中键入 Enter 键

> ID：13709809
> 
> 赞同：2
> 
> 时间：2012-12-04T18:47:15.283
> 
> 标签：selenium-rc, selenium-ide

我正在尝试在 selenium 中自动化该站点。我想在搜索栏上搜索一个项目，但没有按钮可以单击“搜索”或“开始”。有没有一种在 Selenium 中快速输入回车键或回车键的方法。不幸的是，我正在尝试测试的表单（不是我自己的代码，所以我无法修改）没有提交按钮。手动使用它时，我只需输入 enter 或 return，并且只需要知道如何使用 Selenium “type” 命令执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:07:27.157

您可以使用`keydown`带有代码的命令`\13`来执行输入操作

```
 keyDown  | id=search(locator of your search field)  |  \13 
```

# php - PHP 生成的 json 变量未显示在 D3.js 中

> ID：13709812
> 
> 赞同：0
> 
> 时间：2012-12-04T18:47:25.437
> 
> 标签：php, html, json, d3.js

我已经尝试了此代码的一些变体，但我在控制台中没有错误消息而停滞不前。现在，它应该非常简单，主要来自 Mike Dewar 的 D3.js 入门。我做了一些改变，我认为这让它爆炸了（对不起，迈克，我敢肯定这是我的错）。

首先，我有一个打开它时可以使用的 php 文件： {"name":1,"status":2,"url":3,"time":4,"day":5}

与它相呼应的代码称为“jsonphp.php”：

```
<?php
    $arr = array('name' => 1, 'status' => 2, 'url' => 3, 'time' => 4, 'day' => 5);
    echo json_encode($arr);
?> 
```

然后我只想引用它并（作为测试）在表格中显示它。这是一个名为“d3test.htm”的文件

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset = 'utf-8'>
        <script src='d3.v2.min.js'></script>
        <script>
        function draw(data){
            'use strict';
            d3.select('body')
                .append('ul')
                .selectAll('li')
                .data(data)
                .enter()
                .append('li')
                .text(function(data){
                    return data.name + ': '+ data.status;
                });
        }
        </script>
    </head>
    <body>
        <script>
            d3.json('jsonphp.php', draw);
        </script>
    </body>
</html> 
```

我尝试了一些变体，例如重命名 json 标头，尝试沿变量获取“绘制”函数（是的，我有点知道这行不通），我认为 D3.js 可能不喜欢这样的事实文件以“php”结尾？没有返回错误告诉我它认为它正在工作，所以也许不是这样。这应该很简单，我知道如果我能做到这一点，我可以执行更复杂的输出，但这只是一千英里旅程的第一步。顺便说一句，尝试在 IE 9 和 Safari 5.1.7 中运行它，结果相同。提前致谢！

**附录 12 月 5 日**：我尝试在我的 html 文档中提醒 jsonphp.php 文件的长度并得到“未定义”。但是，我尝试使用另一个带有 js 扩展名的测试文件，但其中没有任何内容，但`([{"a":"-1.14","b":"4.14"},{"a":"-0.13","b":"1.38"},{"a":"-4.19","b":"1.43"},{"a":"-0.21","b":"3.34"}])`它提醒了正确的数字 (4)。同样使用测试我得到了可视化工作正常。所以问题是 D3.js 不喜欢 php 文件，或者 php 文件有问题，即使它*看起来*没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:17:12.697

尝试在 PHP 中设置 Content-Type 标头：

```
header("Content-Type: application/json"); 
```

在你打电话之前`json_encode`

# ruby-on-rails-3 - 使用 capistrano 在 EC2 上安装和部署 Apache/passenger 应用程序

> ID：13709815
> 
> 赞同：0
> 
> 时间：2012-12-04T18:47:27.247
> 
> 标签：ruby-on-rails-3, apache, amazon-ec2, capistrano, passenger

任何人都知道 (AZ) 一步一步流行的说明/指导/教程/博客在 Amazon EC2 上使用 MySQL DB 安装和部署 rails 3 应用程序，包括设置 Apache 和 Phusion Passanger 服务器？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:56:23.693

Linode 有一些教程。例如，这似乎非常有用。

[http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-lucid](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-lucid)

# binding - 列表选择器不可点击

> ID：13709818
> 
> 赞同：1
> 
> 时间：2012-12-04T18:47:42.093
> 
> 标签：binding, listpicker

我编写了一个列表框来显示 XML 表中一组数据的“引擎大小”，项目绑定似乎有效，并且列表框对于前两个选项非常有效，但其余选项完全不可点击。

我已经尝试过中断代码，它表明单击其中一个不起作用的值甚至不会触发我拥有的“ListPicker_ChangedSelection”程序。

我的代码如下。

```
 private void Choose_Engine_Size_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        String carenginesize=((enginesize)Choose_Engine_Size.SelectedItem).Esize.ToString();
        List<enginesize> enginesize =GetCarData();
        foreach (enginesize c in enginesize)
        {
            if(c.Esize==carenginesize)
            {
                ConsumptionBox.Text=c.Consumption;
                EmmissionsBox.Text=c.Emissions;

        }
    } 
```

然后从这里使用填充的值进行一些计算。

我的 Listpicker 代码如下：

```
 <toolkit:ListPicker HorizontalAlignment="Left" Margin="287,22,0,0" x:Name="Choose_Engine_Size" VerticalAlignment="Top" Width="72" SelectionChanged="Choose_Engine_Size_SelectionChanged" Height="Auto" Opacity="1">
            <toolkit:ListPicker.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Border>
                            <TextBlock Text="{Binding Esize}" FontSize="20" Width="Auto" HorizontalAlignment="Center"/>
                        </Border>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
        </toolkit:ListPicker> 
```

# asp.net - ASP.NET MVC3 与 Microsoft Office (Word) 的集成

> ID：13709824
> 
> 赞同：0
> 
> 时间：2012-12-04T18:48:21.313
> 
> 标签：asp.net, asp.net-mvc-3, ms-word

我有一个 ASP.NET MVC3 应用程序，并且我有一个生成输出表单的表单。目前我在 html 文件中生成输出表单，但我想将其切换为将其生成为 Microsoft Word 文档，或者本质上填充一个 word 模板。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:54:19.720

有几个组件允许您以编程方式生成 Word 文档。我最成功的一个是[Syncfusion DocIO](http://mvc.syncfusion.com/demos/reporting/docio)，它是一种付费实用程序，但如果您需要以编程方式操作 Word 文档，则物有所值。如果成本是一个问题，这里有关于如何[使用 Open XML 构建服务器端文档生成实用程序的教程](http://msdn.microsoft.com/en-us/library/office/bb735940%28v=office.12%29.aspx)

# c - C 自由函数（不使用 malloc）

> ID：13709829
> 
> 赞同：3
> 
> 时间：2012-12-04T18:48:37.983
> 
> 标签：c, memory-management, struct, linked-list, free

我正在编写自己的内存分配程序（不使用 malloc），现在我被 free 函数（我的代码中的 asfree）困住了。我相信分配的功能都在那里，唯一的问题在于免费功能。因此，通过运行下面的代码，我可以分配 32 个块：每个块的大小为 48 + 16（标题大小）。那么如何在分配它们之后立即释放/释放它们呢？你能看看我的免费功能并指出正确的方向吗？

PS：这是为了学习。我试图了解结构、链表、内存分配。提前致谢。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define BUFFER_SIZE 2048

typedef struct blk_struct
{
    size_t  size_blk;
    struct  blk_struct *next;
    char    data[0];
}blk_struct;

struct blk_struct *first = NULL;
static char buffer[BUFFER_SIZE];

void *asalloc(size_t size)
{
    int nunits = (size + sizeof(blk_struct));
    static int val = 1;

    blk_struct *block, *current;

    //locate position for block
    if(first == NULL)
    {
        block = (blk_struct *)&buffer[0];

        // Sanity check size.
        if(nunits > BUFFER_SIZE)
            return NULL;

        // Initialise structure contents.
        block->size_blk = size;
        block->next     = NULL;

        // Add to linked list.
        first = block;

        // Give user their pointer.
        return block->data;
    }
    //create a free list and search for a free block
    for(current = first; current != NULL; current = current->next)
    {
        // If this element is the last element.
        if(current->next == NULL)
        {
            block = (blk_struct *) (current->data + current->size_blk);

            // Check we have space left to do this allocation
             if((blk_struct *) &block->data[size] >
                     (blk_struct *) &buffer[BUFFER_SIZE])
             {
                 printf("No more space\n");
                 return NULL;
             }

            // Initialise structure contents.
            block->size_blk = size;
            block->next     = NULL;

            // Add to linked list.
            current->next   = block;
            // Give user their pointer.
            return block->data;
        }
    }
    printf("List Error\n");
    return NULL;
}

// 'Free' function. blk_ptr = pointer to the block of memory to be released
void asfree(void *blk_ptr)
{
    struct blk_struct *ptr = first;
    struct blk_struct *tmp = NULL;

    while(ptr != NULL)
    {
        if(ptr == blk_ptr)
        {
            printf("Found your block\n");
            free(blk_ptr);
            break;
        }
        tmp = ptr;
        ptr = ptr->next;
    }
}

// Requests fixed size pointers
int test_asalloc(void)
{
    void *ptr = NULL;
    int size = 48;
    int i = 1;
    int total = 0;

    do
    {
        ptr = asalloc(size);

        if(ptr != NULL)
        {
            memset(ptr, 0xff, size);
            printf("Pointer %d = %p%s", i, ptr, (i % 4 != 0) ? ", " : "\n");
            // each header needs 16 bytes: (sizeof(blk_struct))
            total += (size + sizeof(blk_struct));
            i++;
        }
        asfree(ptr); // *** <--- Calls the 'free' function ***
    }
    while(ptr != NULL);
    printf("%d expected %zu\nTotal size: %d\n", i - 1,
            BUFFER_SIZE / (size + sizeof(blk_struct)), total);
}

int main(void)
{
    test_asalloc();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:15:49.857

我可以看到您的 asfree 存在一些问题。

`sizeof(blk_struct)`寻找块头时需要减去。由于用户想要释放的已分配数据就在标题后面，并且您有指向该数据的指针，而不是标题。

第二个问题是当你得到标题时要做什么。您不能只是免费调用数据。您需要在标题中有一些标志并将该块标记为空闲。下次您尝试分配一个块时，您需要能够重用空闲块，而不仅仅是在最后创建新块。能够将一个大的空闲块分成两个较小的块也很好。为了避免碎片，需要将相邻的空闲块合并到一个更大的块中。

目前我正在编写一个操作系统作为学校项目。我建议您使用像这样工作的简单分配器：

*   内存块的标题包含指向相邻块的链接和空闲标志。
*   一开始有一个大块，带有覆盖整个内存的空闲标志。
*   调用 malloc 时，从第一个到最后一个搜索块。当找到足够大的块时，它被分成两部分（分配一个和免费提醒）。返回指向已分配块数据的指针。
*   当调用 free 时，匹配块被标记为空闲。如果相邻块也是空闲的，它们将被合并。

我认为这是能够在没有碎片和丢失内存的情况下进行 malloc 和 free 的基础。

这是页眉和页脚结构的样子：

```
// Header of a heap block
typedef struct {
    // Size of the block including header and footer
    size_t size;

    // Indication of a free block
    bool free;

    // A magic value to detect overwrite of heap header.
    uint32_t magic;

} heap_block_head_t;

// Footer of a heap block
typedef struct {
    // A magic value to detect overwrite of heap footer.
    uint32_t magic;

    // Size of the block
    size_t size;

} heap_block_foot_t; 
```

上面堆满了带有页眉和页脚的块，很像一个链表。块并没有明确地描述它们的邻居，但只要你现在它们在那里，你就可以很容易地找到它们。如果您有一个标题的位置，那么您可以将块大小添加到该位置，并且您有下一个块的标题的位置。

```
// Get next block
heap_block_head_t *current = ....
heap_block_head_t *next = (heap_block_head_t*)(((void*) current) + current->size);

// Get previous block
heap_block_head_t *current = ....
heap_block_foot_t *prev_foot = (heap_block_foot_t*)(((void*) current) - sizeof(heap_block_foot_t));
heap_block_head_t *prev = (heap_block_head_t*)(((void*) prev_foot) + sizeof(heap_block_foot_t) - prev_foot->size);

// Not sure if this is correct. I just wanted to illustrate the idea behind.
// Some extra check for heap start and end are needed 
```

希望这可以帮助。

# sql-server - 备份数据库时覆盖文件

> ID：13709830
> 
> 赞同：47
> 
> 时间：2012-12-04T18:48:41.430
> 
> 标签：sql-server, database, backup, database-backups

我想使用此代码备份数据库

```
sqlcmd -S servername -Q "BACKUP DATABASE [DBName] TO DISK = 'C:\backup.bak'" 
```

有用。但如果备份文件已经存在，则数据会附加到文件中，而不是替换文件。每次我调用`BACKUP DATABASE`文件都会变大。

有没有`BACKUP DATABASE`强制更换的选项？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-04T18:54:45.160

```
sqlcmd -S servername -Q "BACKUP DATABASE [DBName] TO DISK = 'C:\backup.bak' WITH INIT" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-04T18:54:23.260

`INIT`成功了。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms186865.aspx)：

> INIT 指定应覆盖所有备份集

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-18T22:29:09.403

`WITH INIT`是不足够的。应该是`WITH INIT, SKIP`这几天。[文档](https://docs.microsoft.com/en-us/sql/t-sql/statements/backup-transact-sql?view=sql-server-ver15#Additional_Considerations)

说明：`INIT`仅在满足某些条件时才覆盖。`SKIP`指示忽略这些条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T18:59:25.937

BACKUP DATABASE SQ_P TO DISK='D:\Data Backup\SQ_P.bak' with init;

其中 SQ_P 是数据库名称

# php - time() 是否独立于时区设置？

> ID：13709834
> 
> 赞同：3
> 
> 时间：2012-12-04T18:49:02.397
> 
> 标签：php, time, timezone

我知道可以通过以下方法（也许更多）更改时区：

1.  在每个 php 文件中设置`putenv()`时区。
2.  在 php.ini 中设置`date.timezone`时区。
3.  在根 .htaccess 文件中设置`php_value date.timezone`时区。

我的问题是，设置时区是只影响`date()`功能，还是也影响`time()`功能？

我阅读了文档，但我仍然有点困惑。我*认为*答案是前者，但我需要确定，所以如果有人能证实这一点，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:55:48.463

time() 不受时区影响。日期等函数，将生成的日期转换为时区而不影响时间戳。

```
<?php
var_dump(date_default_timezone_get());

$time1 = time();
var_dump($time1);
var_dump(date("r", $time1));

date_default_timezone_set("America/Los_Angeles");
var_dump(date_default_timezone_get());

$time2 = time();
var_dump($time2);
var_dump(date("r", $time1));

var_dump($time1 === $time2); 
```

输出：

```
string(16) "Europe/Amsterdam"
int(1571676424)
string(31) "Mon, 21 Oct 2019 18:47:04 +0200"
string(19) "America/Los_Angeles"
int(1571676424)
string(31) "Mon, 21 Oct 2019 09:47:04 -0700"
bool(true) 
```

演示：[https ://3v4l.org/Cggc3](https://3v4l.org/Cggc3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T18:55:27.357

试试下面的例子：

```
date_default_timezone_set("Europe/Paris");
echo gmdate("H:i:s");
echo "<br/>";
echo date("H:i:s");
echo "<br/>";
echo time();

echo "<br/>";
echo "<br/>";

date_default_timezone_set("Asia/Chungking");
echo gmdate("H:i:s");
echo "<br/>";
echo date("H:i:s");
echo "<br/>";
echo time();

echo "<br/>";
echo "<br/>"; 
```

显示：

```
18:52:38
19:52:38
1354647158

18:52:38
02:52:38
1354647159 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T18:57:22.267

> 返回自 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）以来以秒数测量的当前时间。

由于这是一个绝对时间点，从那时起经过的秒数（相对论目的除外）是明确的。无论任何时区设置如何，您都将获得相同的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T18:55:14.550

php time() 使用 GMT 计算时间，因此它与您设置的时区无关

# c++ - c ++计数器类型，不需要锁定增量

> ID：13709839
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:49:39.687
> 
> 标签：c++, multithreading

我需要一个小柜台（最多 10 个）。

我不想使用原子（因为原子的开销）。

我可以使用哪种类型？

我可能会进行过早优化，但不幸的是我现在无法模拟完整的生产环境（多线程环境）。

在 Ubuntu x86 上运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T19:01:19.700

Atomic 是正确的使用方法，也是最快的方法。如果您的架构可以在一条指令中进行原子更新，那么这就是原子类型的实现方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:52:09.203

如果您只从一个线程写入计数器，而所有其他线程只读取计数器，那么在大多数平台上您可以使用`int`，因为大多数 CPU 都有原子增量指令，并且将新值写回内存也将是原子的。

但是，该标准并不能保证这一点。如果要保证原子性，则需要使用原子。这样做并没有太多开销，因为编译器足够聪明，可以知道增量操作是否需要显式锁定，从而避免开销。

# algorithm - 2-3-4 树的上下界

> ID：13709841
> 
> 赞同：0
> 
> 时间：2012-12-04T18:49:47.210
> 
> 标签：algorithm, binary-search-tree

我要找到具有 n 个节点的 2-3-4 树的高度的上限和下限。坦率地说，我不知道如何开始。有这个公式吗？我将不胜感激任何帮助和感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:54:24.430

最坏的情况，每个节点正好有 2 个儿子，因此您需要解决：

```
2^0 + 2^1 + 2^2 + ... + 2^h >= n 
```

找到满足条件的最小值`h`为您提供“最坏情况”2-3-4 树的高度。

重复这个过程，每个节点有 4 个儿子，以获得最佳案例高度。

# objective-c - Objective-C 中的动态分配，返回指针

> ID：13709844
> 
> 赞同：1
> 
> 时间：2012-12-04T18:49:51.790
> 
> 标签：objective-c, cocoa, dynamic, allocation

当它不是 Obj-C 对象时，我想确保指针 myFunction() 返回的值可用。

```
double * vectorComponents ();   //Just an example

double * vectorComponents ()
{
    double componentSet[] = {1, 2, 3};
    return componentSet;
} 
```

如何动态分配这些变量，然后如何释放它们。如果我不做任何事情，它就不会起作用。感谢大家。

```
NSLog(@":)"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T18:58:07.980

您可以使用 C 标准库函数`malloc()`和`free()`：

```
double *vectorComponents()
{
    double *componentSet = malloc(sizeof(*componentSet) * 3);
    componentSet[0] = 1;
    componentSet[1] = 2;
    componentSet[2] = 3;
    return componentSet;
}

double *comps = vectorComponents();

// do something with them, then
free(comps); 
```

[（文档](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)）

还：

> 如果我不做任何事情，它就不会起作用。

也许值得一提的是它没有工作，因为它调用了未定义的行为。`componentSet`在您的代码中是一个本地自动数组 - 它在其范围结束时无效（即它在函数返回时被释放 - 正是您不想*发生的事情。*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:59:57.737

如果您返回一个在函数中动态分配的指针，那么调用者将拥有该对象的所有权，并且需要释放该值。

```
/**
* Returns ownership, use free to release the value when done.
*/
double * vectorComponents()
{
    double *componentSet = malloc(sizeof(double) * 3);

    componentSet[0] = 1.0;
    componentSet[1] = 2.0;
    componentSet[2] = 3.0;

    return componentSet;
}

void example()
{
    double *components = vectorComponents();

    //use components

    free(components);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T23:05:37.877

鉴于您的示例，第一个问题是您真的需要*动态*分配吗？如果您只想返回在函数内部初始化的数组的地址，您可以使用`static`变量：

```
double * vectorComponents ()
{
   static double componentSet[] = {1, 2, 3};
   return componentSet;
} 
```

如果您确实需要一个动态数组，那么有很多方法可以做到这一点。如果您计算数组，您可以稍后`malloc()`存储。`free()`如果您希望初始化一个动态数组，则可以更改值并返回它，您可以使用静态数组来执行此操作。例如：

```
double * vectorComponents2 ()
{
   static double componentSet[] = {1, 2, 3};
   double *dynamic = malloc(sizeof(componentSet));
   memcpy(dynamic, componentSet, sizeof(componentSet)); // copy values
   // modify contents of dynamic here if needed
   return dynamic;
} 
```

使用`memcpy`静态数组比设置单个值要短，并且可以轻松更改数组的内容和大小。

# php - 来自慢速临时表的复杂会计计算

> ID：13709848
> 
> 赞同：0
> 
> 时间：2012-12-04T18:50:05.113
> 
> 标签：php, mysql

我的任务是编写一个带有报告的复杂发票和计费系统。数据库的结构使得返回发票的总数和数字需要一连串复杂的连接和计算，这些连接和计算很麻烦，而且对错误高度敏感。

我没有在整个报告系统中生成一个冗长而复杂的查询库，而是选择使用一个临时表来执行必要的计算，并将数据保存在记录 ID 号旁边，以便我可以在需要的时间和地点加入。这使系统编码变得更加容易，但也使数据库明显变慢，因为需要使用此临时表的每个页面访问都必须首先填充它。

总而言之，我有一个报告系统，它必须能够显示从一系列发票表中计算得出的数字。任何人都可以就可以简化此过程而不会降低服务器速度的方法或解决方案提供建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:12:24.057

很难判断，因为你的描述太笼统了。

一种可能的解决方案：如果您生成的报告允许有点过时，那么您可以创建一个常规表而不是临时表，并根据需要使用*事件调度程序*经常使用所有信息填充它（例如，一次一天或每小时一次）。

# search - 谷歌搜索是否有能力进行“notinurl”搜索？

> ID：13709851
> 
> 赞同：0
> 
> 时间：2012-12-04T18:50:24.650
> 
> 标签：search

我试图在我的网站中找到所有被谷歌索引的页面，所以我搜索了`site:mysite.com`. 我的产品页面出现在大量这些结果中，所以我试图将它们从结果中排除，`site:mysite.com notinurl:product`但我似乎找不到任何有用的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:00:30.700

尝试在您的任期前使用减号：

```
site:mysite.com -product 
```

这应该排除包含您的产品的所有结果 - 请注意，它不仅仅是 url。

# javascript - 动态事件？

> ID：13709852
> 
> 赞同：0
> 
> 时间：2012-12-04T18:50:37.880
> 
> 标签：javascript, backbone.js, coffeescript, marionette

[这张票](https://stackoverflow.com/questions/6987386/how-to-bind-events-on-dynamic-generated-buttons-in-backbone)没有帮助，那里的样本对我不起作用。我似乎无法让 jQuery`delegate`正常工作。

[这](http://jsfiddle.net/LFFrX/2/)是没有正确动态声明事件的 JSFiddle。我该怎么做呢？

小提琴中发生了什么？

动态事件的覆盖：

```
Backbone.View::addEvents = (events) ->
  @delegateEvents _.extend(_.clone(@events), events) 
```

一个聚合 DOM 选择器/事件的类，所以我们只声明它们的 HTML 对应项一次：

```
class Els
  constructor: () ->
    @signupButton = 'button#signup'
  events: () ->
    events = { }
    events['click ' + @signupButton] =  'clickSignup'
    events 
```

处理 DOM 操作的类：

```
class UI extends Backbone.Model
  disableButton: () ->
    $(els.signupButton).addClass('disabled') 
```

木偶观点：

```
class MyRegion extends Backbone.Marionette.Region
  el: '#default-region'

class MyLayout extends Backbone.Marionette.Layout
  template: '#template-layout'
  regions:
    content: '#region-content'
  #events:
    #'click button#signup': 'clickSignup'
  initialize: (options) ->
    # This seems correct
    alert JSON.stringify(options.dynamicEvents)
    # FAIL!
    @addEvents options.dynamicEvents
  close: () ->
    @remove()
    @unbind()  
  clickSignup: (event) ->
    ui.disableButton() 
```

应用启动：

```
els = new Els()
ui = new UI()

app = new Backbone.Marionette.Application()
app.start { }   

region = new MyRegion()

region.show new MyLayout(
  dynamicEvents: els.events()
) 
```

如果我还可以在 中声明事件绑定，那就太好了`Els`，例如：

```
class Els
  constructor: () ->
    @signupButton = 'button#signup'
  events: () ->
    events = { }
    events['click ' + @signupButton] =  (event) ->
      ui.disableButton()
    events 
```

我真的应该使用 EventEmitter，但这些示例假定所有内容都已实例化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:24:46.020

这按预期工作

```
Backbone.View::addEvents = (events) ->
  @events = _.extend @events or {}, events
  @delegateEvents() 
```

# android - 如何在特定条件下处理 dialog.dismiss？

> ID：13709857
> 
> 赞同：-1
> 
> 时间：2012-12-04T18:50:59.407
> 
> 标签：android, android-activity, dialog

这是我的问题，

我的应用程序中有一个主菜单，该菜单启动一个名为farm1 的活动。当这个farm1 启动时，我会显示一个对话框，它解释了如何在当前活动（farm1）和第二个活动之间导航，这实际上是我的farm1 活动的第二部分（称为farm2）。

我正在使用滑动和

```
StartActivity(farm1);
finish(); 
```

和

```
StartActivity(farm2);
finish(); 
```

如您所见，当我从农场 2 导航到农场 1 时，我开始了此活动，因此，我的对话框再次出现！

而且我不希望这种情况发生，我只想在主菜单活动调用farm1活动时出现我的对话框。

考虑到我的对话创建是在 onCreate 中，这是我的问题：

*   我可以在农场 1 和农场 2 活动之间导航而不必再次启动它们，这样我的对话框就不会再次出现。
*   我可以仅在从我的主菜单活动启动 farm1 时显示此对话框吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:14:26.800

启动 Activity farm1 时，[`Intent`](http://developer.android.com/reference/android/content/Intent.html)使用额外的参数创建一个：

```
//Put this where you return to Farm1:
Intent intent = new Intent(Farm2.this, Farm1.class);
intent.putExtra("ignoredialog", true);
startActivity(intent);

//And this in the onCreate() of Farm1:
Intent intent = getIntent();
Bundle extras = intent.getExtras();
if( extras != null && extras.containsKey("ignoredialog") && 
    extras.getBoolean("ignoredialog") ){
    //Do not show dialog
}else{
    //Show dialog
} 
```

但是，更好的解决方案是`finish()`在打开 Farm2 时不调用，这将使 Farm1 在后台可用，并且在您关闭 Farm2 时从当前状态恢复。这通常是活动的预期行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:14:43.400

您可以使用 Intent 发送您从中启动 farm1 Activity 的标志：

**第 1**步：当您启动 farm1 Activity 时，从主菜单 Activity 发送带有标志的 Intent：

```
Intent intent = new Intent(mainmenu.this, farm1.class);
intent.putExtra("flag_from", "mainmenu");
startActivity(intent); 
```

**第 2 步：**在 farm1 Activity onCreate 方法中接收意图，如下所示：

```
public class farm1 extends Activity {
    String flag="";
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            // Recive Intent here
            Bundle extras = getIntent().getExtras();
            if(extras !=null)
              flag  = extras.getString("flag_from");
            else
              flag="";
        }
        @Override
        protected void onResume() {
            super.onResume();
            // Check here flag before showing Alert dialog
             if(flag=="mainmenu"){
                  // show alert here
               }
              else{
                // do some code here
              }
        } 
```

You can also do this by using [SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

# java - Java 6 线程 - “实现可运行”和“扩展线程”的不同行为

> ID：13709863
> 
> 赞同：2
> 
> 时间：2012-12-04T18:51:12.950
> 
> 标签：java, multithreading, runnable, java-6

有人可以解释一下为什么执行此程序后的输出如此不同吗？

首先，类：Thread扩展java.lang.Thread

```
public class UsingThreadExtension extends Thread {

    public UsingThreadExtension(String s) {
        super(s);
    }

    @Override
    public void run() {
        for (int i=0; i<5; i++) {
            System.out.println(i + " " + Thread.currentThread().getName());

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

java.lang.Runnable的实现：

```
public class UsingRunnableImplementation implements Runnable {

    @Override
    public void run() {
        for (int i=0; i<5; i++) {
            System.out.println(i + " " + Thread.currentThread().getName());
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
     }
} 
```

主要课程：

```
public class ThreadsExample {

    public static void main(String[] args) {
        UsingThreadExtension threadA = new UsingThreadExtension("Thread A");
        UsingRunnableImplementation runnableImplementation = new UsingRunnableImplementation();
        Thread threadB = new Thread(runnableImplementation, "Thread B");

        //threadA.start();
        threadB.start();

        try {
            //threadA.join();
            threadB.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        //threadA.run();
        threadB.run();

        System.out.println("Main thread says hello!");
    }
} 
```

在这种组合中，输出是这样的：

```
0 Thread B

1 Thread B

2 Thread B

3 Thread B

4 Thread B

Main thread says hello! 
```

在注释了threadB部分并取消注释threadA之后，有这样的事情：

```
0 Thread A

1 Thread A

2 Thread A

3 Thread A

4 Thread A

0 main

1 main

2 main

3 main

4 main

Main thread says hello! 
```

有人可以告诉我，究竟是什么导致了这种差异？任何提示表示赞赏。我想，它与 threadA 中的覆盖 java.lang.Thread.run() 方法有关，但为什么 threadB 在第二种情况下不能运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:03:51.167

**第二种情况 ( `threadA.run()`) : -**

由于`threadA`是类型的引用`UsingThreadExtension`：-

```
UsingThreadExtension threadA = new UsingThreadExtension("Thread A"); 
```

所以像这样调用`run`threadA上的方法： -

```
threadA.run(); 
```

只会在*主*线程中执行*run*方法。因此，*线程*的名称在第二个输出中是*main* in 。`UsingThreadExtension`***`0 main, 1 main, etc.`***

 **** * *

**第一种情况 ( `threadB.run()`) : -**

因为`threadB`是类型的*引用*，只`Thread`指向一个*实例*`Thread`。

```
Thread threadB = new Thread(runnableImplementation, "Thread B"); 
```

因此，在其上调用*run*方法，如下所示： -

```
threadB.run(); 
```

将仅在线程中再次执行*Thread 类*中覆盖的*run()*方法。但是由于*Thread 类的**run()*方法实际上并没有打印任何东西。因此你没有得到任何输出。*`main`**`threadB.run()`***

 **** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T18:56:34.353

`Runnable.run()`不会启动新线程，它只是运行该方法——就像任何其他方法一样。如果你想分拆一个新线程，你总是必须使用`Thread.start()`（或提交`Runnable`给执行者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:03:24.830

当您构造一个`Thread`传递给它的`Runnable`实例时，它将该实例存储在一个私有字段中。的默认`run()`方法`java.lang.Thread`本质上是

```
if(target != null) target.run(); 
```

所以大概在你的线程 B 情况下发生的事情是你`start()`的线程，当它在内部完成它时`target = null`。然后，当您稍后调用线程的`run()`方法时，它不再具有对目标的引用，`Runnable`因此不会运行它。

如果你反过来做，首先调用`run()`主线程，然后调用`start()`你会看到大量的日志记录。

在方法被直接覆盖的`extends Thread`情况下，这个空检查被绕过了。`run()`******

# asp.net - Escape Nullable 对象必须有值？

> ID：13709870
> 
> 赞同：0
> 
> 时间：2012-12-04T18:51:24.570
> 
> 标签：asp.net, vb.net, entity-framework, entity-framework-4

我的代码如下所示：

```
 Using dbContext as IRFEntities = New IRFEntities
 Dim getProspect = (From p in dbContext.IRF_Prospects _
                     where p.url = prospect_url _
                     Select p).FirstOrDefault
 If getProspect.user_id Is Nothing Then
                    ' Prepopulate the form with their information.
                    ' These must have a value, so we need to make sure that no column is null in the database.
                    ddlProgram.SelectedValue = getProspect.program
                    txtFirst.Text = getProspect.first_name
                    txtLast.Text = getProspect.last_name
                    txtAddress.Text = getProspect.address
                    txtCity.Text = getProspect.city
                    ddlState.SelectedValue = getProspect.state
                    txtZip.Text = getProspect.zip
                    txtPhone.Text = getProspect.phone
                    txtEmail.Text = getProspect.email_address
                    txtYearEnrolling.Text = getProspect.enrolling_in
                Else
                    ' Redirect them to login.
                    Response.Redirect("login.aspx")
                End If
   End Using 
```

我收到以下错误：

> System.InvalidOperationException 未被用户代码处理
> 
> H结果=-2146233079
> 
> Message=Nullable 对象必须有一个值。

在以下代码行：

```
txtYearEnrolling.Text = getProspect.enrolling_in 
```

我知道为什么我会收到错误 - 数据库中的值为空。我想要做的是提取该值（如果存在），但如果不存在，我希望它采用默认值或将该字段留空。实现这一目标的最佳方法是什么？

# ruby-on-rails - 使用 time_zone_select 保存一个整数

> ID：13709873
> 
> 赞同：0
> 
> 时间：2012-12-04T18:51:26.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, timezone, railscasts

我正在关注时区的 railscast - [http://railscasts.com/episodes/106-time-zones-revised](http://railscasts.com/episodes/106-time-zones-revised)

以下是我用于时区选择输入的内容。目前，表单在数据库中保存一个字符串值（即“阿拉斯加”）。相反，我想将 UTC 偏移量保存为整数。我该怎么做呢？

```
<%= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:09:25.987

您有两个选择，可以使用 select 或创建虚拟属性。我可能更喜欢后一种选择。

由于 TimeZone 不会直接以小时为单位（仅以秒为单位或作为字符串）为您提供偏移量，因此您不能直接使用 collection_select，但可以像这样使用 select（utc_offset 以秒为单位）：

```
f.select :time_zone, ActiveSupport::TimeZone.us_zones.map { |z| [z.name, z.utc_offset / 1.hour] } 
```

如果您使用虚拟属性，请使用您已经在使用的代码，但使用 :time_zone_name 而不是 :time_zone ，然后像这样更新您的模型：

```
def time_zone_name=(value)
  time_zone = ActiveSupport::TimeZone.new(value).utc_offset / 1.hour
end

def time_zone_name
  # time_zone is a number like -9
  ActiveSupport::TimeZone.new(time_zone).name
end 
```

我更喜欢最后一个选项，因为它使您可以通过偏移量或名称设置时区，甚至可以从 rails 控制台或您希望设置的任何地方。

# ios - 在 OpenGL ES Analyzer 中，“未初始化的缓冲区数据”会是误报吗？

> ID：13709879
> 
> 赞同：3
> 
> 时间：2012-12-04T18:51:40.313
> 
> 标签：ios, opengl-es, opengl-es-2.0, instruments

仅渲染索引缓冲区的子集时，如果缓冲区的其余部分包含未初始化顶点的索引，则 Instruments 的“OpenGL ES Analyzer”似乎会报告“未初始化缓冲区数据”警告。

忽略它是否安全？有没有办法摆脱它？它会隐藏一个真正的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:14:52.827

`contains indices of uninitialized vertices`->`"Uninitialized Buffer Data"`

*忽略它是否安全？*

不可以。因为您可能为子集设置了不正确的值，并且可能会发生非法内存访问。

*有没有办法摆脱它？*

是的。初始化你的顶点。或者如果您使用顶点缓冲区对象（VBO）。

*它会隐藏一个真正的问题吗？*

不，它清楚地说明了你的问题是什么。

这是我的应用程序中的片段，仅呈现缓冲区的一个子集：

```
glBindVertexArrayOES(_vertexArrays[currentObjectIndex]);
glUseProgram(_program);
glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _mvpMatrices[currentObjectIndex].m);
ObjectGL* object = [self.graphicsDataSource.arrayOfObjects objectAtIndex:currentObjectIndex];
// first part of buffer
glDrawArrays(GL_TRIANGLES, 0, section_object.sglSize);
// second part of buffer, accessed with offset given by second parameter
glDrawArrays(GL_LINE_LOOP, section_object.sglSize, section_object.sglSizeBounds); 
```

# jquery - jQuery防止多次点击，直到动画完成

> ID：13709880
> 
> 赞同：5
> 
> 时间：2012-12-04T18:51:52.993
> 
> 标签：jquery

目前我有一些设置，用户单击图像并基于该图像，div 将淡入/淡出。

如果用户发疯并同时单击一堆图像，则会加载多个 div，而不仅仅是最后一个请求的。

我试图在这里说明我的问题。 [http://jsfiddle.net/BBgsf/](http://jsfiddle.net/BBgsf/)

单击这些图像中的任何一个都将加载带有数字的相应 div。但是，如果您在动画完成之前单击不同的图像，它也会加载其他 div。

jQuery

```
$(".flow-chart img").click(function () {

    var div_class = $(this).data("class");

    $(".hide_show:visible").fadeOut('slow', function() {
        $("."+div_class).fadeIn("slow");
    });

}); 
```

HTML

```
<div class="1 hide_show">1</div>
<div class="2 hide_show" style="display: none">2</div>
<div class="3 hide_show" style="display: none">3</div> 
```

如何防止加载多个 div 而不是一次加载一个？

​</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T19:50:20.293

虽然您已经得到了答案.. 您可以检查是否有使用**[:animated](http://api.jquery.com/animated-selector/)**选择器进行动画处理的任何元素.. 以及是否有返回 false

```
$(".flow-chart img").click(function() {
    if ($(".hide_show").filter(':animated').length > 0) {
        return false;
    }
    var div_class = $(this).data("class");    
    $(".hide_show:visible").fadeOut('slow', function() {
        $("." + div_class).fadeIn("slow");
    });

});​ 
```

[http://jsfiddle.net/FaKBs/](http://jsfiddle.net/FaKBs/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T18:56:14.933

一种方法是跟踪动画当前是否处于活动状态。这是一个简单的方法：http: [//jsfiddle.net/QCWgR/](http://jsfiddle.net/QCWgR/)

```
var active = false;

$(".flow-chart img").click(function () {
    if (active) {
        return;
    }
    active = true;        
    var div_class = $(this).data("class");

    $(".hide_show:visible").fadeOut('slow', function() {
        // note the callback that sets active to false at end of animation
        $("."+div_class).fadeIn("slow", function() { active = false; });
    });

}); 
```

使用这种方法，第一次点击必须在下一次发生之前完成动画循环。

# 使用闭包使活动远离全局命名空间

为了使全局命名空间保持活动状态，您可以在匿名闭包内运行整个块，如下所示：

[http://jsfiddle.net/QCWgR/2/](http://jsfiddle.net/QCWgR/2/)

```
(function () {
    var active = false;

    $(".flow-chart img").click(function () {
        if (active) {
            return;
        }
        active = true;        
        var div_class = $(this).data("class");

        $(".hide_show:visible").fadeOut('slow', function() {
            $("."+div_class).fadeIn("slow", function() { active = false; });
        });

    });
})();​ 
```

# java - 如何从 textarea 读取流？

> ID：13709882
> 
> 赞同：0
> 
> 时间：2012-12-04T18:52:03.663
> 
> 标签：java, awt

嗨，我有这个从控制台读取一行的简单代码，现在我想从文本区域读取这一行，就像控制台一样（按 Enter 应该读取该行）我该怎么办？

```
 private DataInputStream  co   = null;
   private DataOutputStream streamOut = null;

 public void run()
   {  while (thread != null)
      {  try
         {   
             streamOut.writeUTF(co.readLine());

            streamOut.flush();
         }
         catch(IOException ioe)
         {  System.out.println("Sending error: " + ioe.getMessage());
            stop();
         }
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:00:05.197

将 KeyListener 附加到您的 textarea，等到按下 enter 然后获取 textarea 的文本，将其拆分为换行符并获取最后一行。

或者，您可以让 KeyListener 将按下的每个键附加到 StringBuilder 中，并在每次用户按 Enter 时重置构建器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T19:35:54.617

```
 String[] data = txtarea.getText().split("\\n");

            for(int i = 0 ; i< data.length; i++)
                System.out.println(data[i]); 
```

以上从 Jtextarea 读取的给定行并将这些内容写入控制台...

# html - 调整大小时如何让 div 水平滚动。

> ID：13709887
> 
> 赞同：1
> 
> 时间：2012-12-04T18:52:11.667
> 
> 标签：html, css, css-float

一旦页面对于内容 div 内的内容变得太窄，我试图让内容 div 显示一个水平滚动条。目前，我的设置如下：

![当前显示](../Images/f26521434150c29f0923490a5ca86330.png)

HTML：

```
<div id="LeftNavigation">
    <div id="TopNav">Menu1</div>
    <div id="BottomNav">Menu2</div>
</div>
<div id="ContentContainer">
    <div style="float: left; width: 500px">Content1</div>
    <div style="float: left;">Content2</div>
<div> 
```

CSS：

```
#LeftNavigation {
    float: left;
}

#TopNav,
#BottomNav {
    width: 165px;
}

#ContentContainer {
    margin-left: 180px;
    min-height: 150px;
    padding: 10px;
} 
```

我想让我的页面像下图一样工作。我的内容容器的最小宽度为 ...600 像素，然后当页面宽度低于菜单和内容的组合宽度（包括边距）时，会出现一个滚动条。不过，我不知道如何让它正常工作。每当页面变得太窄时，我的 ContentContainer div 就会一直包裹在我的 LeftNavigation div 下方。提前致谢。 ![所需的显示](../Images/29afc445567c912932bfc35c2bb5ed9a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:56:57.753

您需要添加尺寸`ContentContainer`并添加`overflow-x:auto`. 滚动条将显示在 ContentContainer 上，而不是您所说明的整个页面。

如果您希望它显示在图表中，您需要制作一个假滚动条并使用 JavaScript 使其工作。

# jquery - jQuery UI 自动完成小部件返回使用 ui-helper-hidden-accessible 类填充跨度的值

> ID：13709890
> 
> 赞同：0
> 
> 时间：2012-12-04T18:52:17.797
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我有一个自动完成搜索字段，它返回正在搜索的城市的纬度和经度。

出于某种原因，在建议结果的“选择”中，有一个跨度为“ui-helper-hidden-accessible”，角色为“状态”，从隐藏变为可见，并显示结果的选定值.

这很奇怪，因为即使我注释掉告诉“选择”事件使用自动完成返回值填充另一个隐藏文本字段的最后一行代码，这个“隐藏”跨度仍然会随着返回的自动完成值变得可见。

到底是怎么回事？？？

这是我的 Coffeescript 供参考

```
 myGeocodeAutocomplete = ->   
  $('[type="text"][name*="[geocode_location]"]').autocomplete
    source: (request, response) ->
      $.ajax 
        url: "http://ws.geonames.org/searchJSON"
        dataType: "jsonp"
        data: 
          featureClass: "P"
          style: "full"
          maxRows: 12
          name_startsWith: request.term

        success: (data) ->
          response $.map(data.geonames, (item) ->
            label: item.name + ((if item.adminName1 then ", " + item.adminName1 else "")) + ", " + item.countryName
            value: item.lat + ", " + item.lng
          )
    minLength: 2

    open: ->
      $(this).removeClass("ui-corner-all").addClass "ui-corner-top"
    close: ->
      $(this).removeClass("ui-corner-top").addClass "ui-corner-all"
    focus: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label      
    select: (event, ui) ->
      event.preventDefault()
      $(this).val ui.item.label
      $(this).siblings('[name*="[geocode_ll]"]').val ui.item.value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:56:19.673

刚刚在这里找到了答案：[jquery ui autocomplete added a span](https://stackoverflow.com/questions/12791984/jquery-ui-autocomplete-adding-a-span)

我很抱歉再次询问，但当时这是一个很难寻找的问题。

# php - 应用程序突然停止 POST 到 DB，返回状态码 406

> ID：13709892
> 
> 赞同：0
> 
> 时间：2012-12-04T18:52:24.930
> 
> 标签：php, android, arrays

我的应用程序通过几个不同的调用我们的服务器`Asynctask`，它两次提取数据，最后`JSONArray`通过 POST 发送一个。

它一直正常工作，但最近停止了，没有进行任何更改。这是我`AsyncTask`的`POST`一个`JSONArray`只有必要的信息：

**更新的 Java**

```
String inString;
JSONObject realjObject;
JSONArray compJArray;
int completeCount = 0;
URL url;
@Override
protected Void doInBackground(JSONArray... jsonArray) {
    if(jsonArray.length > 0) {
        compJArray = jsonArray[0];
    }
    completeCount = compJArray.length();

    //String url_select = "http://www.myDomain.com/db/completedSurvey.php";
    HttpResponse response;

    for (int i = 0; i < completeCount; i++) {
        try {
            realjObject = compJArray.getJSONObject(i);
            Log.i("realjObject", realjObject.toString());
            try {

                url = new URL("http://www.myDomain.com/db/completedSurvey.php");
                HttpPost httpPost = new HttpPost(url.toURI());
                HttpClient httpClient = new DefaultHttpClient();
                httpPost.setEntity(new StringEntity(realjObject.toString(), "UTF-8"));
                httpPost.setHeader(HTTP.DEFAULT_CONTENT_TYPE, "application/json");
                response = (HttpResponse) httpClient.execute(httpPost);

                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                StringBuilder builder = new StringBuilder();
                for (String line = null; (line = reader.readLine()) != null;) {
                    builder.append(line).append("\n");
                }

                inString = builder.toString();
                Log.w("RESPONSE", inString);

            } catch (UnsupportedEncodingException e1) { Log.e("UnsupportedEncodingException", e1.toString());
            } catch (ClientProtocolException e2) { Log.e("ClientProtocolException", e2.toString());
            } catch (IllegalStateException e3) { Log.e("IllegalStateException", e3.toString());
            } catch (IOException e4) { Log.e("IOException", e4.toString());
            } catch (URISyntaxException e) {Log.e("URISyntaxException", "" + e.getMessage());
            }

        } catch (JSONException e) { Log.e("doInBackground", "JSONException: " + e.getMessage());
        }
    }
    return null;
} 
```

* * *

这是我接收代码的方式，PHP-Server 端：

```
require("../logger/logging.class.php");

$genLog->lwrite("Is Android accessing this url?");
$json = file_get_contents('php://input');

$genLog->lwrite($json);

if ($json) {
    // Parse JSONArray, was working properly
} 
```

如果我通过浏览器访问 url，我的日志写得很好，但是在运行应用程序时没有写入任何内容。我已经测试了所有输出，`AsyncTask`一切似乎都正常工作。

* * *

`LogCat``realjObject` *（在 www.jsonlint.com 上验证）*的输出：

```
{
    "Notes": "null",
    "SurveyPhoto": "null",
    "id": 2,
    "siteNotes": "",
    "loc_id": 1,
    "sign_type": "FREESTANDING SIGN",
    "Lighting": 0,
    "AdditionalService": 0,
    "view_id": 2,
    "survey_order": 1
} 
```

* * *

**编辑**

我刚开始认为我`require("../logger/logging.class.php");`可能会与 冲突`$json = file_get_contents('php://input');`，但我只是注释掉了我所有的日志记录和要求行，它仍然没有做任何事情。

设备具有 Internet 连接并且已与此 MySQL 数据库建立连接，否则我将无法提交`JSONArray`.

测试设备：运行 Android 4.0.1 的三星 Galaxy Tab 10.1 Gen 1

**编辑 2**

我修复了`InputStream`给我一个响应并得到以下 404 和 406 响应：

```
12-05 09:31:39.345: W/RESPONSE(19023): <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
12-05 09:31:39.345: W/RESPONSE(19023): <html><head>
12-05 09:31:39.345: W/RESPONSE(19023): <title>406 Not Acceptable</title>
12-05 09:31:39.345: W/RESPONSE(19023): </head><body>
12-05 09:31:39.345: W/RESPONSE(19023): <h1>Not Acceptable</h1>
12-05 09:31:39.345: W/RESPONSE(19023): <p>An appropriate representation of the requested resource /db/completeSurvey.php could not be found on this server.</p>
12-05 09:31:39.345: W/RESPONSE(19023): <p>Additionally, a 404 Not Found
12-05 09:31:39.345: W/RESPONSE(19023): error was encountered while trying to use an ErrorDocument to handle the request.</p>
12-05 09:31:39.345: W/RESPONSE(19023): <hr>
12-05 09:31:39.345: W/RESPONSE(19023): <address>Apache Server at www.myDomain.com Port 80</address>
12-05 09:31:39.345: W/RESPONSE(19023): </body></html> 
```

什么会突然导致这种情况？

**编辑 3** - 我最近采取的故障排除步骤：

1.  我已经联系了我们的网络主机，他们告诉我他们的一切都很好。服务器日志 (error_log) 不显示任何错误
2.  我稍微更改了上面的 Java 以显示我的响应返回以及更改为使用`URL`类而`String`不是`new HttpPost(url.toURI());`. LogCat 显示正确的域，复制并粘贴到浏览器中，工作正常。
3.  我已将 URL 更改为另一个文件，并将`/db/completeSurvey.php`内容放入新文件中，与上述相同的 404/406 响应。
4.  我创建了另一个新的 php 文件，只包含一个`fwrite`日志页面调用，与上面相同的 404/406 响应。
5.  我定向到我们的根域“http://www.myDomain.com”，与上述相同的 404/406 响应

我开始认为它必须是设备或我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:58:36.920

你想用这条线做`inString = in.toString();`什么？您正在调用`toString()`它`InputStream`不会返回响应数据。

尝试以下代码来读取 json：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
StringBuilder builder = new StringBuilder();
for (String line = null; (line = reader.readLine()) != null;) {
    builder.append(line).append("\n");
}

inString = builder.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:28:18.943

我联系了我们的虚拟主机（Surpass Hosting）并给了他们以下信息：

> 406 不可接受
> 
> 在此服务器上找不到请求资源 /db/completedSurvey.php 的适当表示。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。
> 
> Apache 服务器位于 www.myDomain.com 端口 80

起初他们说我需要编写更多的日志记录代码来确定原因是什么，因为这不是他们的结果。

最终我终于被送到了二级技术支持，那里的人立即给了我答案：

* * *

**解决方案：**

> 超越技术：
> “这是由于脚本匹配 mod_security 中的规则。我只为该文件禁用了此规则。”

# gradle - 使用 gradle 创建类似 Maven 的项目文档网站

> ID：13709894
> 
> 赞同：4
> 
> 时间：2012-12-04T18:52:27.283
> 
> 标签：gradle

Maven 提供了一种生成项目文档站点的方法。Gradle 是否提供类似的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:45:21.157

我知道的唯一站点插件是[这个](https://github.com/breskeby/GradleSite)。我个人没有尝试过，所以我不能告诉你它的功能集或质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T05:33:59.057

发表评论后，我不得不很快转向其他内容，然后忘记查看本杰明提到的插件。我今晚有一点时间，所以我看了看。该插件已经 3 年没有更新了，所以它似乎被遗弃/死了。我找不到下载工件的地方，所以我克隆了 Git 存储库并构建了它。

我花了一点时间试图让它工作，但放弃了。我环顾四周，看看外面还有什么。Gradle 的 TestReport 任务有几个看起来很有希望的选项：

[http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.testing.TestReport.html](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.testing.TestReport.html)

和 Gradle 站点插件：

[https://bitbucket.org/davidmc24/gradle-site-plugin](https://bitbucket.org/davidmc24/gradle-site-plugin)

但我只玩了一个小时，并没有在实际项目中使用它们。

# c# - 实体框架将一个表的ID添加到另一个导致乐观并发异常

> ID：13709895
> 
> 赞同：0
> 
> 时间：2012-12-04T18:52:27.673
> 
> 标签：c#, entity-framework

我有两张桌子，客户和订单。当我创建一个新订单时，我必须创建一个新客户并将新创建的订单 ID 放入客户表中。我正在使用 EF4。在我的方法中，我创建了一个新订单，然后调用 _context.SaveChanged()，并获取新的 order.ID。以相同的方法，使用相同的上下文，然后我创建了一个客户。我把 customer.OrderID = order.ID;

现在，当我保存更改以保存新客户（使用 _context.SaveChanged()）时，我得到 OptimisticConcurrencyException：存储更新、插入或删除语句影响了意外的行数 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

在订单和客户中，我都有一个带有 ConcurrencyMode=Fixed 的 DateTime 字段。

如果我只单独保存订单或客户，我不会得到这个例外。

请就我做错的事情提出任何建议。

谢谢

# math - 从轴和原点导出刚性变换矩阵

> ID：13709898
> 
> 赞同：0
> 
> 时间：2012-12-04T18:52:51.637
> 
> 标签：math, matrix, transformation

我正在尝试导出刚性变换的矩阵以在两个坐标空间之间进行映射。就已知坐标空间而言，我有目标坐标空间的原点和轴方向；有谁知道我如何解决给定这些的 4x4 刚性变换矩阵？

所以，换句话说，我有两个坐标空间，A 和 B，我知道

```
Point3D originOfBInA;
Vector3D xAxisOfBInA; // Unit vector
Vector3D yAxisOfBInA; // Unit vector
Vector3D yAxisOfBInA; // Unit vector 
```

我正在尝试找到 4x4 矩阵

```
Matrix4x4 AtoB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:52:53.053

首先使用单位向量 (Ax, Ay, Az) 和原点 (T) 作为列向量，构造 4x4 矩阵以改变基（称为 M）：

```
M = 
   [Ax Ay Az T]    <-- 3x4
   [0  0  0  1] 
```

要将点 p（相对于框架 A）的坐标转换为 q（相对于框架 B），只需乘以 M 的倒数：

q = M ^(-1) p

# .htaccess - 使用 .htaccess 更正 URL 中的多余空格

> ID：13709900
> 
> 赞同：2
> 
> 时间：2012-12-04T18:52:52.353
> 
> 标签：.htaccess

.htaccess 可以用来纠正 URL 编码链接中的额外空间错误吗？

例如：

> 不正确：**http://%20www.google.com/**
> 
> 正确：**http ://www.google.com/**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:58:43.027

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\%20$ $1 [NC] 
```

这种效果应该有效，不要指望我。

正则表达式会帮助你。 [http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

如果您已经捕获了所有错误页面，您可以用错误页面的服务器语言编写一些东西，例如 error.php 并让它为您进行字符串编辑，而不是依赖 htaccess，因为您可能不想真正替换所有没有任何内容的空格作为文件可以在其名称中包含空格。字符串比较很昂贵，因此最好只在出现错误时才这样做，这取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:15:51.280

我得出的结论是，通过 .htaccess 或错误页面无法删除前导空格。尝试访问该页面将返回错误 105（无法解析服务器的 DNS 地址）。因此，.htaccess 或服务器错误页面将不起作用，因为客户端无法访问服务器。

# javascript - 带有字符串标签的谷歌柱形图

> ID：13709903
> 
> 赞同：3
> 
> 时间：2012-12-04T18:53:09.093
> 
> 标签：javascript, google-visualization

我用 Adob​​e Flex 做了这个图表，我必须用 Javascript 重做它：

![在此处输入图像描述](../Images/7fd5df078785d6f2a08d0be73d809461.png)

我找到了谷歌图表工具，但经过一番调查，我不知道我是否可以在垂直列有字符串标签。

你知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:30:29.017

不确定您是想要 Y 轴上的标签还是列本身上的标签，尽管**Highcharts.js**可以做到这一点并且几乎可以满足您的任何需求，请查看此演示：[http ://www.highcharts.com/demo/column-rotated-标签](http://www.highcharts.com/demo/column-rotated-labels)

# javascript - 使用 Backbone Layoutmanager 为 Jasmine 测试预编译 Handlebar 模板

> ID：13709904
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:11.153
> 
> 标签：javascript, unit-testing, templates, backbone.js, jasmine

**伙计们**，

我们的项目规模迅速扩大，我想成为一名优秀的 JS 公民，并在为时已晚之前实施测试。我们正在使用带有 Backbone Layoutmanager 和 Handlebars 模板的 Backbone 创建我们的前端，我已经阅读[了一些](http://open.bekk.no/integration-testing-backbone-js/) 关于如何使用[Jasmine](http://pivotal.github.com/jasmine/)和 Jasmine-Jquery 和[Sinon测试 Backbone 驱动的应用程序的](http://sinonjs.org/)[优秀](http://kilon.org/blog/2012/08/testing-backbone-requirejs-applications-with-jasmine/)博客文章，所以我决定去吧。

但是，我们的设置有点不典型，因为我们使用 RequireJS 模块，使用 Layoutmanager 增强 Backbone，以及预编译 Handlebars 模板。我们正在按照这些库的创建者的[建议](https://github.com/tbranyen/boilerplate-handlebars-layoutmanager/blob/master/app/app.js)异步预编译模板，在我意识到任何类型的异步 jQuery/Ajax 调用都不起作用之前，我花了一整天的大部分时间敲打我的脑袋使用 Jasmine 运行应用程序。试图使`$.ajax(...)`调用同步`async: false`并没有这样做，并深入研究 Layoutmanager JS 源代码，我发现这一切都意味着异步发生。

所以无论如何，这就是我最终使预编译工作的方式：

```
Backbone.LayoutManager.configure({
    manage: false,

    prefix: "app/templates/",

    fetch: function(path) {
        var done;
        var that = this;

        // Concatenate the file extension.
        path = path + ".html";

        runs(function() {
            if (!JST[path]) {
                done = that.async()

                return $.ajax({ url: app.root + path, async: false }).then(
                    //Successhandler
                    function(contents) {
                        JST[path] = Handlebars.compile(contents);
                        JST[path].__compiled__ = true;
                        done(JST[path]);
                    },
                    //Errorhandler
                    function(jqXHR, textStatus, errorThrown) {
                        //Feil ved lasting av template
                        //TODO logg feil på en eller annen måte
                    }
                );
            }
            // If the template hasn't been compiled yet, then compile.
            if (!JST[path].__compiled__) {
                JST[path] = Handlebars.compile(JST[path]);
                JST[path].__compiled__ = true;
            }
        });

        waitsFor(function() {
            return done;
        }, "loading template", 500);
        return JST[path];
    },

    // Override render to use Handlebars
    render: function(template, context) {
        return template(context);
    }

}); 
```

解决方案是将异步逻辑包装在`runs`其中`waitFor`。

**现在的问题**是：我认为这不是一个最佳解决方案，因为它迫使我复制 app.js 只是为了包装异步调用。有没有更好的方法来解决这个问题？

如果还不够公平，希望其他人从这篇文章中学到东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:51:34.453

不幸的是，我还没有找到避免重复 app.js 的解决方案。但是该文件很少更改，因此这不是真正的问题。然而，我对上面的异步处理做了一些改进，使其更加健壮：

```
 waitsFor(function() {
        return JST[path] && JST[path].__compiled__;
    }, "loading template", 1000);
    return JST[path]; 
```

`done(JST[path]);`然后可以删除该行。

测试现在运行更稳定，以前它们有时会由于模板未正确加载而失败。

接受这个作为答案。

# asp.net - asp.net中的sql存储过程未运行

> ID：13709905
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:11.213
> 
> 标签：asp.net, sql, stored-procedures

关于我在做什么的一点背景。我有一个带有点击调用的按钮，可以将我带到这段代码。

```
 static public DataSet shareFiles(TransitoryRegObj argTransRegObj)
{
    string sqlString = "do_share_files"; // it's a stored procedure
    SqlConnection cnn = new SqlConnection(masterConn);
    SqlCommand comm = new SqlCommand(sqlString, cnn);
    DataSet ds = new DataSet();

    try
    {
        cnn.Open();
        SqlCommand Comm = new SqlCommand(sqlString, cnn);
        Comm.CommandType = CommandType.StoredProcedure;

        comm.Dispose();
        cnn.Close();

        return ds;
    }
    catch (Exception ex)
    {
        // log here should anything go wrong with anything
        //  lblmessage.Text = "Error: " + ex.Message;

        if (comm != null)
            comm.Dispose();

        if (cnn != null)
            cnn.Close();

        DataTable dt = new DataTable("ExceptionTable");
        dt.Columns.Add("ExceptionMessage");
        dt.Rows.Add(ex.Message);
        ds = new DataSet();
        ds.Tables.Add(dt);
        return ds;
    }
} 
```

代码运行良好，但没有任何内容写入数据库。这是 do_share_files 存储过程。

```
 ALTER PROCEDURE [dbo].[do_share_files] 
   --@device_id bigint, @user_id bigint, @file_name varchar(50),@full_up_path varchar(50), @upLength varchar(30)
    --,@mime_type varchar(20), @filedate varchar(30)

    AS
    BEGIN
        insert into [user_files] (device_id, user_id, original_name, original_path, up_path, content_type, up_dt)
        values (17, 30, 'test.pg', 'test.pg', 'test.pg','test.pg', '2012-11-15 03:58:06.043')

    END 
```

我现在有静态值，因为我只是想让它运行到存储过程。我是 asp.net 的新手，不知道我做错了什么。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:07:28.843

你可以从这个开始：

```
static public DataSet shareFiles(TransitoryRegObj argTransRegObj)
{
    string sqlString = "do_share_files"; // it's a stored procedure
    DataSet ds = new DataSet();

    try
    {
        using (var cnn = new SqlConnection(masterConn))
        { 
            SqlCommand comm = new SqlCommand(sqlString, cnn);
            comm.CommandType = CommandType.StoredProcedure;
            cnn.Open();
            comm.ExecuteNonQuery (); 
```

总结一下：

1.  `Comm`并且`comm`是不同的命令；
2.  要运行 proc，您需要调用`ExecuteNonQuery`或其他`Execute`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:10:21.247

您的代码几乎没有错误 1\. 我不明白您为什么要使用此行两次

```
SqlCommand comm = new SqlCommand(sqlString, cnn); 
```

2.您没有执行程序，这是主要问题

```
static public DataSet shareFiles(TransitoryRegObj argTransRegObj)
{
try
{
string sqlString = "do_share_files"; // it's a stored procedure
SqlConnection cnn = new SqlConnection(masterConn);
SqlCommand comm = new SqlCommand(sqlString, cnn);
DataSet ds = new DataSet();  
    cnn.Open();
    Comm.CommandType = CommandType.StoredProcedure;
    comm.ExecuteNonQuery();
    comm.Dispose();
    cnn.Close();

    return ds;
}
catch (Exception ex)
{
   //something here
} 
```

}

# facebook - Facebook 分享以将流量引回 iframe 页面选项卡

> ID：13709907
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:20.997
> 
> 标签：facebook, url, share

所以这就是我所追求的。我有一个运行网站内容的 FB 页面选项卡***https://site.com/***

我设置了一个 FB 分享链接来分享一个***aboutus.html***页面。当我分享它时，FB 允许我分享这个 URL ***https://site.com/aboutus.html***，但我怎样才能将流量直接发送到页面选项卡上的 iFrame？例如[https://www.facebook.com/fan_page/app_331267943480920398/whatever_aboutus.html](https://www.facebook.com/fan_page/app_331267943480920398/whatever_aboutus.html)

我知道这是可能的，因为我有一天看到它——现在不记得在哪里了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:56:02.610

您不能以这种方式传递文件名，这仅在 Canvas 应用程序上受支持。

复制此问题的最佳解决方法是使用该`app_data`参数。基本上，让您的登录页面（在您的应用程序设置中定义）是某种侦听[Signed Request](https://developers.facebook.com/docs/howtos/login/signed-request/)的服务器端脚本，特别是 app_data 参数。然后，您让该脚本根据其内容加载内容。

例如，假设我想加载**http://mybasedomain.com/foo.php**或**http://mybasedomain.com/bar.php**。我将用户定向到**https://www.facebook.com/ *PAGENAME* /app_ *APPID* ?app_data= *foo***或**https://www.facebook.com/ *PAGENAME* /app_ *APPID* ?app_data= *bar***，然后在我的登录页面上，我有一个简单的`if/else`语句来解析并呈现相关内容 -

```
<?php

// Assumes you have this parse_signed_request function - https://gist.github.com/872837
// And a $config array, which contains your app_secret

$signed_request = parse_signed_request($_REQUEST['signed_request'], $config['AppSecret']);

if ($signed_request['app_data'] === 'foo') {
    include('foo.html');
} else if ($signed_request['app_data'] === 'bar') {
    include('bar.html');
} else {
    include('index.html');
} 
```

# c# - 使用 CSV 解析器选择值

> ID：13709908
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:28.250
> 
> 标签：c#, parsing, csv

我一次抓取一个值并将其动态加载到网格中。

有没有办法索引 csv 文件以仅查找特定行和列的值？我无法读取所有行，因为这会破坏动态加载的目的。

CSV 解析器，在我的例子中是[Fast CSV Parser](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)，可以获取这样的值`csv[row][column]`。查看源代码时，我注意到它会遍历文件中的所有内容，直到到达正确的索引列对。要获取第 100,000 行第 80 列的值，可能需要相当长的时间。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:55:38.130

CSV 文件不支持对特定行可能存在的位置进行索引，不。

我认为你能做的最好的事情就是阅读每一行，直到找到你想要的那一行。因此，在扫描一行时，您将平均读取一半文件，这比读取整个文件要好。

如果您使用我在[用 C# 读取和写入 CSV 文件](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)一文中介绍的 CSV 解析器，您一次只能读取一行。

另一种选择是，如果您要从同一个文件访问多行。在这种情况下，您可以遍历文件并构建索引列表。但这只有在您要在单个会话中查找多行时才会得到回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:55:49.737

好吧，你可以做一个快速的第一遍并存储每一行​​的偏移量。这将使随后定位一行更快。如果您有 80 列但 100K 行，我会专注于快速查找行而不是快速查找列。

ETA：好的，我假设您的 CSV 文件在磁​​盘上，并且您可以获得对它的独占访问权限。其中一些代码基于[此](https://stackoverflow.com/questions/5201414/using-filestream-seek)。

```
 List<int> offsets = new List<int>();
   using (StreamReader reader = new StreamReader("myfile.csv"))
   {
        int offset = 0;
        string line;
        while ((line = reader.ReadLine()) != null)
        {   
            offsets.Add(offset);             
            offset += (line.Length + 2);   // The 2 is for NewLine(\r\n)
        }
        offsets.Add(offset);  // pick up the last one
    } 
```

最后，您将拥有 List 变量`offsets`，该变量由行号索引并包含每行的偏移量。然后，您可以在读取文件时（在进行网格构建时）使用`offsets[n]`获取到的偏移量`Seek`（我假设您使用的是 FileStream 或 StreamReader）并`offsets[n+1] - offsets[n]`获取长度。

就解析返回的文本行而言，我认为您正在适应的 CSV 库对此具有良好的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:28:16.677

如果您被允许使用 3rd 方库，我会看看其中的一些。MySQL 支持 CSV 引擎，因此您似乎可以使用它们提供的库来执行此操作。

然而，C# 并没有提供处理 CSV 文件的好方法。

[http://dev.mysql.com/doc/refman/5.0/en/csv-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/csv-storage-engine.html)

# jquery - jquery 正则表达式无法匹配我的数值

> ID：13709909
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:37.377
> 
> 标签：jquery, regex

我将一些行从一个表移动到另一个，我需要在操作过程中修改内容。匹配的选择应该只包含一个索引（数字）。通常是在开头，但我添加了类以确保匹配整行中的好类。

```
$linehtml.replace('/<td class="index">[0-9]+</td>/', '<td>foo</td>'); 
```

我试过：

```
'/<td class="index">[0-9]+</td>/'

'<td class="index">/[0-9]+/</td>' 
```

[根据http://regexpal.com/](http://regexpal.com/)我应该没问题，但是 jquery 正则表达式看起来有问题。

这是一个例子：

```
<td class="index">5</td> <td>11</td> <td>History</td> <td id="description_5">here is the description</td> 
```

最后应该是这样的：

```
<td>foo</td> <td>11</td> <td>History</td> <td id="description_5">here is the description</td> 
```

编辑：

我的目标是将一行从第二个表移动到第一个表：http: [//jsfiddle.net/k53Pz/2/](http://jsfiddle.net/k53Pz/2/)

单击“单击以添加”单元格（对不起，它是法语，我快速创建了 Fiddle，因为我刚刚开始了这个工作流程。也许这不是一个好方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:05:09.750

如果您使用的是 jQuery，为什么还要使用正则表达式？

```
$('.index').html('foo').removeAttr('class'); 
```

见[http://jsfiddle.net/k53Pz/](http://jsfiddle.net/k53Pz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:37:49.330

JavaScript 支持正则表达式作为文字，所以不要引用它们。例如

```
s.replace(/<td class="index">[0-9]+<\/td>/, '<td>foo</td>'); 
```

请记住，您需要避开正斜杠等。

通过引用它们，您是说将其视为普通字符串，而不是正则表达式。

# java - Java：如何将类型化数组类作为参数传递？

> ID：13709913
> 
> 赞同：0
> 
> 时间：2012-12-04T18:53:56.330
> 
> 标签：java

我有一些带有 method 的 3rd-party API `someFn(int code, int[] data)`。

如何在 API 容器（接口类）之外表达类型（特别是数组类型的参数）以供在中使用`Class.getMethod(name, Integer.class, ???.class);`？如何正确描述数组类型的参数？

据我所知，我可能会使用类似的解决方法，但是有没有更好的方法呢？

```
class C { void f(int[] a) {} } }

C.class.getDeclaredMethods()[0].getParameterTypes()[0] 
```

[提前致谢]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:55:39.907

您可以使用`int[].class`来获取类文字`int []`并将其传递给[`Class.getMethod`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)：

```
Class.getMethod(name, Integer.class, int[].class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:56:48.040

```
 Class.getMethod(name, Integer.class, int[].class); 
```

`int[]`是类，因此`int[].class`是引用 int 数组类的有效语句。

# iframe - youtube iframe api - 徽标中的频道链接

> ID：13709916
> 
> 赞同：1
> 
> 时间：2012-12-04T18:54:07.360
> 
> 标签：iframe, hyperlink, youtube, channel

我正在使用 Youtube Iframe API 在网站上嵌入 Youtube 视频。客户要求使用视频频道的 URL（发布视频的 Youtube 频道）而不是视频 URL 作为 Youtube 徽标的 href（在右下角看到的那个）。

客户声称以前在其他网站上见过这个，但它无法提供一个例子。我的猜测是尝试寻找一些播放器参数（https://developers.google.com/youtube/player_parameters）但有没有这样的参数。

我通读了 API Docs 的其余部分并用谷歌搜索了这个问题，但到目前为止还没有运气。

以前有人设法做到这一点吗？有可能吗？

# sql - 电话数据库 SQL 查询

> ID：13709918
> 
> 赞同：1
> 
> 时间：2012-12-04T18:54:14.337
> 
> 标签：sql, recursive-query, recursive-datastructures

我一直在为电话做一个数据库项目，这是图表的快速视图，callid 在 call 表中自动递增，sessionid 在 session 表中自动递增，这种方式在三向呼叫中调用有同一张图。除了 sessionstarttime 和 sessionend time，我在每个字段中都输入了虚构数据

使用 phpmyadmin，

我的问题：我需要进行一次查询，以便为客户提供计费时间，也就是电话号码。

示例电话

A -> B 从中午 12:00 到下午 1:00

B -> C 从中午 12:30 到下午 1:30

A 应按 1 小时计费

B 应按 1 1/2 小时（1:30 小时）计费

C 应按 1 小时计费

另一个示例 A -> B 12:00PM 到 1:00PM A -> C 12:30PM 到 1:30PM

A 应按 1 1/2 小时（1:30 小时）计费

B 应按 1 小时计费

C 应按 1 小时计费

这是给定的数据格式

```
 - <table name="Account">
      <column name="AccountID">1</column> 
      <column name="AcctHolderNum">617-100-5001</column> 
      <column name="ProviderID">1</column> 
      </table>

    <table name="call">
      <column name="callID">4</column> 
      <column name="callSender">617-719-9000</column> 
      <column name="callReceiver">617-730-8100</column> 
      <column name="callStartTime">2012-11-06 06:44:50</column> 
      <column name="callEndTime">2012-11-06 06:55:50</column> 
      <column name="sessionID">1</column> 

    - <table name="phoneNum">
      <column name="phoneNum">617-300-2000</column> 
      <column name="phoneNumFN">Nigel</column> 
      <column name="phoneNumLN">Thornberry</column> 
      <column name="PhoneAccountID">2</column> 

    - <table name="Provider">
      <column name="ProviderID">1</column> 
      <column name="ProviderName">T-Mobile</column> 
      </table>

    - <table name="session">
      <column name="sessionID">1</column> 
      <column name="sessionStartTime">2012-11-06 06:44:50</column> 
      <column name="sessionEndTime">2012-11-06 06:55:50</column> 
```

这是ER图

[http://i.stack.imgur.com/rrh4B.jpg](http://i.stack.imgur.com/rrh4B.jpg)

这是我开始思考的内容，但在试图使一个查询适合调用表中的所有可能输入时让自己陷入混乱

```
 FROM `call` as `call1`, `call` as `call2`, `call` as `call3`
    WHERE `call1.sessionid` = `call2.sessionid` = `call3.sessionid`
    AND <REST OF STUFF>
    UNION /* not union all, but union*/
    SELECT same as above but for three way calls
    FROM `call` as `call1`, `call` as `call2`,
    WHERE `call1.sessionid` = `call2.sessionid`
    AND <REST OF STUFF>
    UNION
    SELECT same as above but for two way calls
    FROM `call`
    WHERE <REST OF STUFF> 
```

这里还有几个简单的查询供参考

计算每次通话的长度

```
 SELECT TIMEDIFF(MIN(`callStartTime`), MAX(`callEndTime`)) 
    FROM `call` GROUP BY `callID` 
```

计算每个会话的长度

```
 SELECT TIMEDIFF(MIN(`callStartTime`), MAX(`callEndTime`)) 
    FROM `call` GROUP BY `sessionID` 
```

按帐户拨打电话的分钟数（注意呼叫者）

```
 SELECT SUM(TIMEDIFF(`callStartTime`, `callEndTime`)) 
    FROM `call`, `Phonenum` 
    WHERE `phoneNum.phoneNum` = `call.callSender`  
    GROUP BY `phoneAccountID` 
```

按帐户接听电话的分钟数（注意 callreciever）

```
 SELECT SUM(TIMEDIFF(`callStartTime`, `callEndTime`)) 
    FROM `call`, `Phonenum` 
    WHERE `phoneNum.phoneNum` = `call.callReciever` GROUP BY `phoneAccountID` 
```

这是架构的 xml 输出

```
 - <pma:structure_schemas>
    - <pma:database name="jr_Team5" collation="utf8_general_ci" charset="utf8">
      <pma:table name="Account">CREATE TABLE `Account` ( `AccountID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'AI Primary Key', `AcctHolderNum` varchar(50) NOT NULL COMMENT 'Account Holder''s Phone Number i.e. "617-100-5001"', `ProviderID` int(11) DEFAULT NULL COMMENT 'Foreign Key from "ProviderID"', PRIMARY KEY (`AccountID`), KEY `AcctHolderNum` (`AcctHolderNum`), KEY `ProviderID` (`ProviderID`), CONSTRAINT `Account_ibfk_1` FOREIGN KEY (`ProviderID`) REFERENCES `Provider` (`ProviderID`) ) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;</pma:table> 
      <pma:table name="call">CREATE TABLE `call` ( `callID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'AI Primary Key', `callSender` varchar(50) NOT NULL COMMENT 'Phone Number of Caller', `callReceiver` varchar(50) NOT NULL COMMENT 'Phone Number of Reciever', `callStartTime` datetime NOT NULL COMMENT 'Time Call Begins', `callEndTime` datetime NOT NULL COMMENT 'Time Call Ends', `sessionID` int(11) NOT NULL COMMENT 'Foreign Key from "SessionID"', PRIMARY KEY (`callID`), KEY `callSender` (`callSender`), KEY `callReceiver` (`callReceiver`), KEY `sessionID` (`sessionID`), CONSTRAINT `call_ibfk_1` FOREIGN KEY (`callSender`) REFERENCES `phoneNum` (`phoneNum`), CONSTRAINT `call_ibfk_2` FOREIGN KEY (`callReceiver`) REFERENCES `phoneNum` (`phoneNum`), CONSTRAINT `call_ibfk_3` FOREIGN KEY (`sessionID`) REFERENCES `session` (`sessionID`) ) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8;</pma:table> 
      <pma:table name="phoneNum">CREATE TABLE `phoneNum` ( `phoneNum` varchar(50) NOT NULL COMMENT 'Phone Number on Record', `phoneNumFN` varchar(50) DEFAULT NULL COMMENT 'First Name of Phone User', `phoneNumLN` varchar(100) DEFAULT NULL COMMENT 'Last Name of Phone User', `PhoneAccountID` int(11) DEFAULT NULL COMMENT 'Foreign Key from "AccountID"', PRIMARY KEY (`phoneNum`), KEY `PhoneAccountID` (`PhoneAccountID`), CONSTRAINT `phoneNum_ibfk_1` FOREIGN KEY (`PhoneAccountID`) REFERENCES `Account` (`AccountID`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</pma:table> 
      <pma:table name="Provider">CREATE TABLE `Provider` ( `ProviderID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'AI Primary Key', `ProviderName` varchar(50) NOT NULL COMMENT 'Network Provider i.e. "Verizon" or "Sprint"', PRIMARY KEY (`ProviderID`) ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;</pma:table> 
      <pma:table name="session">CREATE TABLE `session` ( `sessionID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'AI Primary Key', `sessionStartTime` datetime DEFAULT NULL COMMENT 'Session Begin Time', `sessionEndTime` datetime DEFAULT NULL COMMENT 'Session End Time', PRIMARY KEY (`sessionID`) ) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8;</pma:table> 
      </pma:database>
      </pma:structure_schemas> 
```

提前感谢您的帮助，如果您想到此数据库可能的任何其他复杂查询，任何帮助/输入/方向将不胜感激

xml 中的 Fourway 调用数据示例

```
 - <table name="call">
      <column name="callID">40</column> 
      <column name="callSender">617-292-1309</column> 
      <column name="callReceiver">617-300-2000</column> 
      <column name="callStartTime">2012-10-31 09:07:35</column> 
      <column name="callEndTime">2012-10-31 11:07:35</column> 
      <column name="sessionID">7</column> 
      </table>
    - <table name="call">
      <column name="callID">41</column> 
      <column name="callSender">617-300-2000</column> 
      <column name="callReceiver">617-234-1234</column> 
      <column name="callStartTime">2012-10-31 09:37:35</column> 
      <column name="callEndTime">2012-10-31 12:37:35</column> 
      <column name="sessionID">7</column> 
      </table>
    - <table name="call">
      <column name="callID">42</column> 
      <column name="callSender">617-234-1234</column> 
      <column name="callReceiver">617-200-4000</column> 
      <column name="callStartTime">2012-10-31 10:37:35</column> 
      <column name="callEndTime">2012-10-31 11:37:35</column> 
      <column name="sessionID">7</column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:15:33.683

我认为你在这里有两个问题。首先是确定在会话中分配给每个呼叫者的时间。二是汇总这些信息。

让我假设会话中给定电话号码的所有时间都是连续的。也就是说，从 12:00 到 12:15 没有来自 B--> 的呼叫（因为 C 不会是连续的）。然后您可以获取会话中每个用户的时间：

```
select c.sessionid, c.caller,
       (max(c.EndTime) - min(c.StartTime)) as dur
from ((select c.sessionid, c.callSender as caller, c.StartTime, c.EndTime
       from call c
      ) union all
      (select c.sessionid, c.callReceiver, c.StartTime, c.EndTime
       from call c
      )
     ) c
     on s.sessionid = c.sessionid
group by c.sessionid, c.caller 
```

由此，您可以聚合所有会话。

如果会话中的呼叫周期不连续，则问题更具挑战性。解决此问题的最佳方法取决于数据库和数据库中可用的功能。

# c# - Windows 商店应用程序中从右到左语言的本地化 (8 Mero)

> ID：13709919
> 
> 赞同：0
> 
> 时间：2012-12-04T18:54:15.503
> 
> 标签：c#, silverlight, windows-store-apps

首先我必须提到，我搜索了很多，但没有针对 Windows 8 Metro 风格应用程序的解决方案。我设计了一个应用程序，它应该在 Windows RT 中支持波斯语。字符串没问题，但问题是如何改变 UI 元素的方向。请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:31:47.670

[如何调整各种语言的布局和字体，并支持 RTL 布局](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh967760%28v=win.10%29.aspx)

# jquery - jquery标签旋转不起作用

> ID：13709922
> 
> 赞同：0
> 
> 时间：2012-12-04T18:54:22.043
> 
> 标签：jquery, html, css

我有标签的标准设置，但似乎不支持旋转方法，这是我的代码。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script>
    $(function() {
        $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
        $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
        $("#tabs").tabs().tabs('rotate',500,false);
    });
    </script>
    <style>
    .ui-tabs-vertical { width: 55em; }
    .ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
    .ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
    .ui-tabs-vertical .ui-tabs-nav li a { display:block; }
    .ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
    .ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}
    </style>

<div id="tabs">
            <ul>
                <li><a href="#tabs-1">Nunc tincidunt</a></li>
                <li><a href="#tabs-2">Proin dolor</a></li>
                <li><a href="#tabs-3">Aenean lacinia</a></li>
            </ul>
            <div id="tabs-1">
                <h2>Content heading 1</h2>
                <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
            </div>
            <div id="tabs-2">
                <h2>Content heading 2</h2>
                <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
            </div>
            <div id="tabs-3">
                <h2>Content heading 3</h2>
                <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
                <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
            </div>
        </div> 
```

该方法是否仍受支持？还是我引用了错误的 jquery-ui 版本/jquery 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:29:46.000

它在 jquery UI 的 1.9.0 中被删除。

请参阅更改日志搜索轮换。

[http://jqueryui.com/changelog/1.9.0/](http://jqueryui.com/changelog/1.9.0/)

显然，如果你想使用你需要使用这个扩展的功能：

[https://github.com/cmcculloh/jQuery-UI-Tabs-Rotate](https://github.com/cmcculloh/jQuery-UI-Tabs-Rotate)

看到这个`fiddle:`

[http://jsfiddle.net/uvfcf/](http://jsfiddle.net/uvfcf/)

# javascript - 表单提交jQuery函数在js文件中不起作用

> ID：13709925
> 
> 赞同：1
> 
> 时间：2012-12-04T18:54:24.337
> 
> 标签：javascript, jquery, model-view-controller

当我在视图中使用表单 sumbit 函数时，我有一个 MVC 视图，它工作正常。但是当我将我的代码放入 js 文件时它停止工作

这是为什么？有解决办法吗？

```
<script type="text/javascript" src="@Url.Content( "~/Scripts/site/js.js" )" ></script>
@using( Html.BeginForm( "Index" , "Sample" , FormMethod.Post , new { id = "frm" } ) )
{
    <div>
        <p>
            <input type="text" id="username" name="username" />
        </p>
        <input type="submit" value="Save" />
    </div>
    <script type="text/javascript">
        $('form').submit(function ()  // or $('#frm').submit
        {
            alert('1');
            return false;
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:58:06.530

在您的外部文件中，尝试将其包装在`$(document).ready();`调用中。所以

```
$(document).ready(function() {
    $('#frm').submit(function ()
        {
            alert('1');
            return false;
        });
    }); 
```

另外，我认为这很明显，但是在使用外部 js 时也要删除内联 JS。:-)

# ajax - Greasemonkey/Chrome 扩展跨域登录或会话

> ID：13709928
> 
> 赞同：0
> 
> 时间：2012-12-04T18:54:34.867
> 
> 标签：ajax, google-chrome, authentication, cross-domain, greasemonkey

我编写了一组 API，如果您登录网站，它们将认为您已通过身份验证（因此您*设置了 cookie*）。

然后我写了一个 Greasemonkey 和一个谷歌浏览器插件，可以对我的电话进行不同的`api/*`调用。但是，Ajax 不会*跨域发送**cookie 标头*（请记住，它是在您使用 facebook 时启用的插件）。

 ***验证**我的用户并**授权**他的 api 调用的最佳策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:51:52.907

```
GM_xmlhttpRequest 
```

确实进行了 AJAX 调用并发送了 cookie 标头。因此，您可以简单地调用一个根据访问者 cookie 返回身份验证状态的网站，返回一个简单的结果并使用它。

**例子**

```
GM_xmlhttpRequest({ 
method: "GET",  
     url: "http://yourwebsite/loggedin.php",    
     onload: function(resp) {
     var conti=resp.responseText;
     loggedin = parseInt(conti); //let the webpage return 1 or 0 
```*

# glsl - 从 webgl 着色器损坏 ANGLE 生成的 HLSL

> ID：13709931
> 
> 赞同：0
> 
> 时间：2012-12-04T18:54:39.127
> 
> 标签：glsl, webgl, three.js, hlsl

我有一个 webgl 着色器的问题，我确定它与 ANGLE 相关，因为它只发生在 Firefox 或 Chrome 的 Windows 上，如果我强制使用 opengl (chrome --use-gl=desktop)，它就不会发生。

我[创建了一个 jsfiddle](http://jsfiddle.net/QPaRF/4/)，它显示了我的自定义着色器的 ANGLE 生成的 HLSL。（要让 hlsl 转换在这个 jsfiddle 中工作，您必须使用 --enable-privileged-webgl-extensions 运行 chrome，或者[只查看我的输出要点](https://gist.github.com/4201220)）

所以我有工作 glsl 和生成的 hlsl 编译但不做同样的事情。症状是在 Windows 上，顶点出现在正确的初始位置，但是虽然我更改了 uniform ，但不要移动`jed`。我在生成的代码中找不到错误。

调试此类问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:16:58.677

根据您的信息很难说（包括没有原始 GLSL）。然而，不难想象这会在 7 月 4 日对 ANGLE 的修订中得到解决。我会先说更新。

# jquery - ajax 表单提交在 iPhone Safari 上不起作用

> ID：13709939
> 
> 赞同：1
> 
> 时间：2012-12-04T18:55:04.150
> 
> 标签：jquery, iphone, ajax, forms, safari

我创建了一个允许用户选择照片的表单。选择后，表单会通过 ajax 自动提交（而不是标准的提交按钮）。它适用于所有浏览器，但不适用于移动版 safari。

我的 HTML：

```
<form id="myForm" action="php/upload.php" method="post">
<input name="uploadedfile" type="file" id="uploadPhotoButton"/>
</form> 
```

我的JavaScript：

```
$(':file').change(function(){
    var formData = new FormData($('form')[0]);
    $.ajax({
        url: 'php/upload.php',  //server script to process data
        type: 'POST',
        success: uploadComplete,
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

在 iPhone Safari 上，更改处理函数调用正常，但 ajax 调用失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:17:38.760

所以看起来在 iOS6 中，safari 缓存了 post 调用......解决方案在这里：[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

# linux - 在 Fedora Linux 中双击可执行 .sh 文件后，终端窗口关闭

> ID：13709940
> 
> 赞同：0
> 
> 时间：2012-12-04T18:55:04.830
> 
> 标签：linux, terminal, fedora, sh

我必须在 Fedora Linux 中处理一个项目，并且必须经常输入以下内容：

`player map1.cfg &`

我发现我可以创建一个可执行的 .sh 文件，它包含以下内容：

```
#!/bin/bash
player *.cfg & 
```

但是，当双击 runmap.sh 文件时，它会显示“在终端中运行”、“显示”、“取消”和“运行”，当我单击“在终端中运行”时，终端窗口会立即打开和关闭。如果我只是点击“运行”，那么 .cfg 会打开，但我需要终端窗口来运行其他 (Java) 文件。

我该如何解决这个问题？

其他信息：

*   我之所以使用`*.cfg`，是因为我想将 .sh 文件复制并粘贴到也包含 .cfg 文件（例如 map2.cfg、map3.cfg 等）的其他文件夹中。

*   它适用于播放器/舞台项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:11:20.233

当您从文件管理器运行脚本时，启动的 shell 不是交互式的。shell 只能读取脚本文件。

除了文件之外，要打开交互式 shell，您可以`exec`在脚本末尾打开新 shell，并使用“在终端中运行”：

```
#!/bin/bash
player *.cfg &
exec /bin/bash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:02:00.533

好吧，让我们这样看。

当您在终端中运行该命令时，该命令作为子进程启动，然后被发送到后台。一旦命令完成，它就会终止。在后台运行期间，您仍然可以发出命令，因为您的父进程就是终端窗口本身。

当您编写一个发出命令以在后台运行的脚本时，它会启动，将该命令作为子命令生成，然后由于脚本完成而关闭。

这些是操作系统的行为，并且确实不应该改变。因此，本质上您所要求的是一种为您自己快速运行命令但仍然留下命令终端供您使用的方法？

1) 为什么输入命令这么麻烦？出于这个原因，Bash 和其他终端具有历史功能。

2) 当您需要调用命令时，为什么不直接从终端窗口调用您编写的迷你脚本。如果您将脚本放在 $PATH 变量上的文件夹中，您可以在终端的任何位置使用它。

# c# - 具有异步/等待和处理高负载的简单任务返回异步 HtppListener

> ID：13709946
> 
> 赞同：7
> 
> 时间：2012-12-04T18:55:29.127
> 
> 标签：c#, .net, http, httplistener, system.net

我创建了以下简单`HttpListener`的同时服务多个请求（在 .NET 4.5 上）：

```
class Program {

    static void Main(string[] args) {

        HttpListener listener = new HttpListener();
        listener.Prefixes.Add("http://+:8088/");
        listener.Start();
        ProcessAsync(listener).ContinueWith(task => { });
        Console.ReadLine();
    }

    static async Task ProcessAsync(HttpListener listener) {

        HttpListenerContext ctx = await listener.GetContextAsync();

        // spin up another listener
        Task.Factory.StartNew(() => ProcessAsync(listener));

        // Simulate long running operation
        Thread.Sleep(1000);

        // Perform
        Perform(ctx);

        await ProcessAsync(listener);
    }

    static void Perform(HttpListenerContext ctx) {

        HttpListenerResponse response = ctx.Response;
        string responseString = "<HTML><BODY> Hello world!</BODY></HTML>";
        byte[] buffer = Encoding.UTF8.GetBytes(responseString);

        // Get a response stream and write the response to it.
        response.ContentLength64 = buffer.Length;
        Stream output = response.OutputStream;
        output.Write(buffer, 0, buffer.Length);

        // You must close the output stream.
        output.Close();
    }
} 
```

我使用 Apache Benchmark Tool 对此进行负载测试。当我发出 1 个请求时，我得到一个请求的最大等待时间为 1 秒。例如，如果我发出 10 个请求，响应的最大等待时间会上升到 2 秒。

您将如何更改我上面的代码以使其尽可能高效？

**编辑**

在@JonSkeet 的回答之后，我将代码更改如下。最初，我试图模拟一个阻塞调用，但我想这是核心问题。所以，我接受了@JonSkeet 的建议并将其更改为 Task.Delay(1000)。现在，下面的代码给出了最大值。等待时间约为。10 个并发请求需要 1 秒：

```
class Program {

    static bool KeepGoing = true;
    static List<Task> OngoingTasks = new List<Task>();

    static void Main(string[] args) {

        HttpListener listener = new HttpListener();
        listener.Prefixes.Add("http://+:8088/");
        listener.Start();
        ProcessAsync(listener).ContinueWith(async task => {

            await Task.WhenAll(OngoingTasks.ToArray());
        });

        var cmd = Console.ReadLine();

        if (cmd.Equals("q", StringComparison.OrdinalIgnoreCase)) {
            KeepGoing = false;
        }

        Console.ReadLine();
    }

    static async Task ProcessAsync(HttpListener listener) {

        while (KeepGoing) {
            HttpListenerContext context = await listener.GetContextAsync();
            HandleRequestAsync(context);

            // TODO: figure out the best way add ongoing tasks to OngoingTasks.
        }
    }

    static async Task HandleRequestAsync(HttpListenerContext context) {

        // Do processing here, possibly affecting KeepGoing to make the 
        // server shut down.

        await Task.Delay(1000);
        Perform(context);
    }

    static void Perform(HttpListenerContext ctx) {

        HttpListenerResponse response = ctx.Response;
        string responseString = "<HTML><BODY> Hello world!</BODY></HTML>";
        byte[] buffer = Encoding.UTF8.GetBytes(responseString);

        // Get a response stream and write the response to it.
        response.ContentLength64 = buffer.Length;
        Stream output = response.OutputStream;
        output.Write(buffer, 0, buffer.Length);

        // You must close the output stream.
        output.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T19:04:35.660

在我看来，您最终会得到听众的分歧。在`ProcessAsync`中，您启动一​​个新任务来监听（通过 Task.Factory.StartNew），然后在方法结束时`ProcessAsync` *再次调用。*那怎么可能结束？目前尚不清楚这是否是您的性能问题的原因，但它看起来肯定是一个普遍的问题。

我建议将您的代码更改为一个简单的循环：

```
static async Task ProcessAsync(HttpListener listener) {
    while (KeepGoing) {
        var context = await listener.GetContextAsync();
        HandleRequestAsync(context);         
    }
}

static async Task HandleRequestAsync(HttpListenerContext context) {
    // Do processing here, possibly affecting KeepGoing to make the 
    // server shut down.
} 
```

现在，上面的代码目前忽略了`HandleRequestAsync`. 您*可能*想要保留“当前运行中”任务的列表，并且当您被要求关闭时，使用它`await Task.WhenAll(inFlightTasks)`来避免过快地关闭服务器。

另请注意，这`Thread.Sleep`是一个*阻塞*延迟。异步延迟将是`await Task.Delay(1000)`.

# ruby-on-rails - 数字字段 Simple_form_for

> ID：13709950
> 
> 赞同：7
> 
> 时间：2012-12-04T18:55:41.203
> 
> 标签：ruby-on-rails, simple-form

在我使用 Simple_form_for 时的数字字段中，使用 Google Chrome 时，滚动条会显示在字段的一侧。

我怎样才能阻止他们显示？

![显示带有 Scroll Simple_form_for 的数字字段的图像](../Images/b7571ea0e211c5f1fa2fd7269a88d421.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T19:15:05.253

**看一些代码会很有帮助**，但是

它们不是滚动条；它们是向上和向下箭头按钮，用于增加/减少`number`指定的输入字段`step`（默认为`1`）。**[了解有关`number`输入类型的更多信息](http://www.html5tutorial.info/html5-number.php)**

默认情况下，模型的整数属性将`type="number"`使用[`simple_form`](https://github.com/plataformatec/simple_form).

`:as`要覆盖此行为，请使用选项指定字段的输入类型。

```
<%= f.input :your_field_name, as: :string %> 
```

（这在 中记录**[`README.md`](https://github.com/plataformatec/simple_form/blob/master/README.md)**）

# java - 为什么我在运行以下代码时收到“无法找到或加载主类”？

> ID：13709952
> 
> 赞同：1
> 
> 时间：2012-12-04T18:55:47.840
> 
> 标签：java, classpath

我有以下目录结构：

```
C:\CheckinProject\sources\main\EmailProcessor.java<br/>
                         \compile-and-run.bat<br/>
                 \classes\main\EmailProcessor.class 
```

文件 EmailProcessor.java 包含以下内容：

```
package main;

public class EmailProcessor {
    public static void main(String args[]) {
        System.out.println();
    }
} 
```

文件 compile-and-run.bat 包含以下内容：

```
javac -d ..\classes main\EmailProcessor.java 
java -cp ..\classes ..\classes\main\EmailProcessor 
```

当我运行 compile-and-run.bat 我得到这个错误：

```
Error: Could not find or load main class ..\classes\main\EmailProcessor 
```

为什么它找不到或加载我的主类？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:57:47.383

您指定`..\classes\EmailProcessor`的好像 Java 想要文件名的词干。它没有——它想要一个完全限定的*类*名。所以这应该工作：

```
java -cp ..\classes main.EmailProcessor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:58:35.390

`..\classes\EmailProcessor`不是你班级的名字。您的班级名称是`main.EmailProcessor`。`java`可执行文件接受合格的类名作为其参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:59:17.930

您需要指定要使用其 Java 名称而不是其文件系统名称运行的类。IE，`java -cp ..\classes main.EmailProcessor`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-04T19:00:48.590

它是**String[] args**而不是 String args[]

# sql - Oracle CTE 查询：数据类型错误 ORA-00932

> ID：13709955
> 
> 赞同：1
> 
> 时间：2012-12-04T18:55:56.577
> 
> 标签：sql, oracle, oracle11g, recursive-query

我正在 Oralce 11g 中尝试以下 CTE 查询，但我收到一条错误消息

> ORA-00932: 不一致的数据类型: 预期 NUMBER 得到 CHAR。

任何想法这是什么根本原因？

```
create table PC (
EMP_ID NUMBER NULL,
MGR_ID NUMBER NULL
);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (1.0, NULL);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (2.0, 1.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (3.0, 1.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (4.0, 2.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (5.0, 2.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (6.0, 2.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (7.0, 3.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (8.0, 5.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (9.0, 7.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (10.0, 5.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (11.0, 7.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (12.0, 9.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (13.0, 9.0);

INSERT INTO PC (EMP_ID, MGR_ID) 
VALUES (14.0, 9.0);

SELECT * FROM pc;

with  Tree (EMP_ID, MGR_ID, lv, level1, level2, level3, level4, level5) as
        (
        SELECT  EMP_ID
        ,       MGR_ID
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        FROM    PC
        WHERE   MGR_ID IS NULL
        UNION ALL
        SELECT  E.EMP_ID
        ,       E.MGR_ID
        ,       T.lv + 1
        ,       case when T.lv + 1 = 1 then E.EMP_ID else T.level1 end
        ,       case when T.lv + 1 = 2 then E.EMP_ID else T.level2 end
        ,       case when T.lv + 1 = 3 then E.EMP_ID else T.level3 end
        ,       case when T.lv + 1 = 4 then E.EMP_ID else T.level4 end
        ,       case when T.lv + 1 = 5 then E.EMP_ID else T.level5 end
        FROM    Tree T inner join PC E
                ON      (T.EMP_ID = E.MGR_ID)
        )
select  *
from    Tree 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:12:18.853

如果您将查询的第一部分更改为使用零作为`level1`, etc 的值，而不是`null`查询将起作用：

```
with  Tree (EMP_ID, MGR_ID, lv, level1, level2, level3, level4, level5) as
        (
        SELECT  EMP_ID
        ,       MGR_ID
        ,       1 as lv
        ,       1 as level1
        ,       0 as level2
        ,       0 as level3
        ,       0 as level4
        ,       0 as level5
        FROM    PC
        WHERE   MGR_ID IS NULL
        UNION ALL
        SELECT  E.EMP_ID
        ,       E.MGR_ID
        ,       T.lv + 1
        ,       case when T.lv + 1 = 1 then E.EMP_ID else T.level1 end
        ,       case when T.lv + 1 = 2 then E.EMP_ID else T.level2 end
        ,       case when T.lv + 1 = 3 then E.EMP_ID else T.level3 end
        ,       case when T.lv + 1 = 4 then E.EMP_ID else T.level4 end
        ,       case when T.lv + 1 = 5 then E.EMP_ID else T.level5 end
        FROM    Tree T inner join PC E
                ON      (T.EMP_ID = E.MGR_ID)
        )
select  *
from    Tree 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/dac35/1)

结果：

```
| EMP_ID | MGR_ID | LV | LEVEL1 | LEVEL2 | LEVEL3 | LEVEL4 | LEVEL5 |
---------------------------------------------------------------------
|      1 | (null) |  1 |      1 |      0 |      0 |      0 |      0 |
|      2 |      1 |  2 |      1 |      2 |      0 |      0 |      0 |
|      3 |      1 |  2 |      1 |      3 |      0 |      0 |      0 |
|      4 |      2 |  3 |      1 |      2 |      4 |      0 |      0 |
|      5 |      2 |  3 |      1 |      2 |      5 |      0 |      0 |
|      6 |      2 |  3 |      1 |      2 |      6 |      0 |      0 |
|      7 |      3 |  3 |      1 |      3 |      7 |      0 |      0 |
|      8 |      5 |  4 |      1 |      2 |      5 |      8 |      0 |
|      9 |      7 |  4 |      1 |      3 |      7 |      9 |      0 |
|     10 |      5 |  4 |      1 |      2 |      5 |     10 |      0 |
|     11 |      7 |  4 |      1 |      3 |      7 |     11 |      0 |
|     12 |      9 |  5 |      1 |      3 |      7 |      9 |     12 |
|     13 |      9 |  5 |      1 |      3 |      7 |      9 |     13 |
|     14 |      9 |  5 |      1 |      3 |      7 |      9 |     14 | 
```

或者您可以`cast(null as number)`并且查询将起作用：

```
with  Tree (EMP_ID, MGR_ID, lv, level1, level2, level3, level4, level5) as
        (
        SELECT  EMP_ID
        ,       MGR_ID
        ,       1 as lv
        ,       1 as level1
        ,       cast(null as number) as level2
        ,       cast(null as number) as level3
        ,       cast(null as number) as level4
        ,       cast(null as number) as level5
        FROM    PC
        WHERE   MGR_ID IS NULL
        UNION ALL
        SELECT  E.EMP_ID
        ,       E.MGR_ID
        ,       T.lv + 1
        ,       case when T.lv + 1 = 1 then E.EMP_ID else T.level1 end
        ,       case when T.lv + 1 = 2 then E.EMP_ID else T.level2 end
        ,       case when T.lv + 1 = 3 then E.EMP_ID else T.level3 end
        ,       case when T.lv + 1 = 4 then E.EMP_ID else T.level4 end
        ,       case when T.lv + 1 = 5 then E.EMP_ID else T.level5 end
        FROM    Tree T inner join PC E
                ON      (T.EMP_ID = E.MGR_ID)
        )
select  *
from    Tree 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/dac35/3)

# .net - (T)Activator.CreateInstance(typeof(T), new[] { parms }); 抛出 MissingMethodException

> ID：13709956
> 
> 赞同：0
> 
> 时间：2012-12-04T18:55:58.737
> 
> 标签：.net, generics, reflection, c#-3.0

我有一个非常简单的通用构造方法：

```
public T Instance<T, TT>(TT parms) where T : class
{
    return (T)Activator.CreateInstance(typeof(T), new[] { parms });
} 
```

当我调用这样的方法时：

```
Instance<MyClass, string>("SomeStringValue").Customers.Where(x => x.Id == Id).Select(p => blah..blah...blah; 
```

我得到一个'System.MissingMethodException：找不到'MyClass'类型的构造函数。在 System.RuntimeType.CreateInstanceImpl（BindingFlags bindingAttr，Binder binder，Object [] args，CultureInfo 文化...'

我试过添加绑定标志等，但没有任何运气。

我基本上是在尝试用参数实例化一个对象。我可以毫无问题地明确声明对象：

```
var myObj = new MyClass("SomeStringValue"); 
```

但我需要使用我的通用构造函数。

谁能澄清我错过了什么？

*编辑* 一个完整的程序（简化）。

```
public abstract class A 
{
    public T Instance<T, TT>(TT parms) where T : class
    {
       return (T)Activator.CreateInstance(typeof(T), new[] { parms });
    }
}

public class B 
{
    public B(string someValue)
    {
        var myValue = someValue;
    }
}

public class C
{
  public void DoStuff()
  {
     var x = Instance<B, string>("SomeStringValue");
  }
} 
```

是我想要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:41:05.963

`Activator<T>.CreateInstance()`您尝试调用的重载需要 type 的第二个参数`Object[]`。您正在创建的新数组是一个`TT[]`. 如果`TT`被限制为类类型，则 a`TT[]`可能满足`Object[]`参数。但是，不受约束的泛型`TT[]`不能用作`Object[]`. 一旦编译器确定`TT[]`不能作为. 因为所有数组都派生自，所以它会。编译器将因此创建一个类型的单元素数组，其中包含`Object[]``params``Object``Object``Object``TT[]`你试图传入。由于没有构造函数需要一个`Object[]`，所以调用将失败。

如果要防止此问题，请创建一个`Object[]`包含适当参数的新文件，而不是创建一个新的`TT[]`. 那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T20:38:18.093

改变B类的构造函数如下图：

```
public B(object someValue)
    {
        var myValue = someValue;
    } 
```

并且您的代码将开始正常工作。

# perl - Perl - 包括来自相对路径的包，其中包括来自相对路径的另一个包？

> ID：13709957
> 
> 赞同：2
> 
> 时间：2012-12-04T18:55:59.203
> 
> 标签：perl

我有三个文件：

~/multiFindBinTest.pl：

```
use FindBin;
use lib "$FindBin::Bin/mod2";
use pack2; 
```

~/mod1/pack1.pm

```
package pack1;
1; 
```

~/mod2/pack2.pm

```
use FindBin;
use lib "$FindBin::Bin/../mod1";
use pack1;
package pack2;
1; 
```

如您所见，base.pl 使用 pack2，而后者又使用 pack1。然而，这是一个如何不使用 FindBin 模块的演示：当执行 base.pl 时，pack2 将无法定位 pack1，因为它将保留从 base 获取的 "$FindBin::Bin" 的值.pl。

**所以我的问题很简单**：perl 中是否有一种方法可以“使用”一个“使用”另一个模块的模块，所有这些都基于相对于执行“使用”的文件的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:12:54.397

如果你知道所有可能的库根，你可以在命令行中添加它们：

```
perl -I~/mod1 -I~/mod2 myscript.pl 
```

你可以将它们添加到 PERL5LIB 环境变量中：

```
export PERL5LIB=~/mod1:~/mod2 
```

任何一种方法都将目录放在 libaray 搜索路径上。

* * *

附加信息：

如果您希望各个包“声明”它们的依赖项所在的位置，Perl 提供了 'lib' pragma：

```
use lib '/path/to/lib/directory'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:01:55.180

模块的位置必须在编译语句`@INC`的那一刻。最简单的方法是像这样`use`将它们全部添加到调用程序中`Test.pl`

```
use lib "$FindBin::Bin/../mod1", "$FindBin::Bin/../mod2"; 
```

那么所有模块的编译都会顺利进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T22:33:44.277

*查找模块*文件位置的唯一方法是使用`__FILE__`. 两者`FindBin`并`$0`始终引用主脚本文件。

对于模块，这是我能想到的最整洁的。您的主代码解决方案很好，但您也可以在那里使用这个替代方案。

```
use strict;
use warnings;

use File::Basename 'fileparse';
use File::Spec;

my $dir;
BEGIN {
  $dir = (fileparse(File::Spec->rel2abs(__FILE__)))[1];
}
use lib $dir.'../mod1';

use pack1;

package pack2;

1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T23:59:40.923

你没有那个，但你可以自己做。

```
package libr;

use strict;
use warnings;

use File::Spec;

sub import { 
    shift; # invoker
    my ( @cands, @missed );

    ARGS:
    while ( @_ ) { 

        # Get the next argument from the queued candidates or from the 
        # arguments
        my $raw_path 
            = my $path 
            = @cands ? shift @cands : shift
            ;

        # We don't need to worry about this argument unless it has relative 
        # notation in it. 
        if ( index( $path, '::' ) > -1 ) { 

            # split it into parts
            my ( $mod, $rest ) = split qr{(?:/(?:\.(?=/))?)+}, $path, 2;
            $mod =~ s/^:://; # Allow for one-word relative nodes: 'Word::/';

            # Move it from mod notation to file...
            my ( $mod_path ) = map { s|::|/|g; $_ } $mod;

            my %set;
            while ( my $len = length $mod_path ) { 

                # Remember the more specific path first
                $set{ $_ } ||= $mod_path
                    foreach 
                        # for each key that qualifies, subtract the same
                        # number of characters from the end of the value
                        map  { substr( $INC{ $_ }, 0, $len - length ) . $rest }

                        # test each key that it starts with our string
                        grep { substr( $_, 0, $len ) eq $mod_path } 

                        keys %INC
                    ;
            }
            continue { 
                # Check if our separator is in the mod path.
                my $mark = rindex( $mod_path, '/' );
                last if $mark == -1;

                # move the unmatched part of the substring to the 
                # ending
                substr( $rest, 0, 0, substr( $mod_path, $mark ));
                # delete it from the path
                substr( $mod_path, $mark ) = '';
            }
            my @sort_order 
                  # We only want the first value...
                = map  { shift @$_ }
                  # sort by length of matching path first, then alphabetically
                  sort { $b->[2] <=> $a->[2] or $a->[1] cmp $b->[1] }
                  # store a collection of values for sorting: 
                  # lowercase string and length of matching string
                  map  { [ $_ => lc $_ => length $set{ $_ } ] } 
                  keys %set
                ;
            ### Assemble list of candidates
            @cands = ( @sort_order, map { "$_/$mod_path$rest" } @INC );
            next ARGS;
        }

        # If the path exists
        if ( -e $path ) {
            # Store the canonical path
            push @INC, File::Spec->canonpath( $path );
            # And reset tracking arrays
            @cands  = () if @cands;
            @missed = () if @missed;
        }
        elsif ( @cands ) { 
            # If we're trying out values, just remember the missed ones.
            push @missed, $path;
        }
        else { 
            # Else, we're going to tell you we couldn't match the directory
            # either to one or to all candidates we tried.
            Carp::carp( 
                  "A valid path cannot be determined from '$raw_path': "
                . ( @missed > 1  ? do { 
                      local $LIST_SEPARATOR = "\n    - ";
                      push @missed, '', $path;
                      "\n No paths:@missed\n do not exist!";
                    }
                  : "$path does not exist!"
                  ));
            @missed = () if @missed;
        } # end else
    } # end while @_
} 
```

然后你像这样使用：

```
package main;

use A::Long::Package::Name;
use Smart::Comments;

use libr 'A::Long::Package::Name/../Foo', 'Figgy::Puddin'; 
```

试着在说完`@INC`话后转出，看看发生了什么。

# c# - 会话变量内容未更新

> ID：13709960
> 
> 赞同：0
> 
> 时间：2012-12-04T18:56:06.760
> 
> 标签：c#, asp.net, session, datagrid, datatable

考虑下面的代码：

```
\DataTable dt =(DataTable) Session["dfdtemptable"];
    // Remove all
            int i = dt.Rows.Count;
        while(i> 0)
        {
        dt.Rows[i-1].Delete();
        dt.Rows[i - 1].AcceptChanges();
        i--;
        }
        Session["dfdtemptable"] = dt;
        this.BindItems(); 
```

单击 addnew 按钮时，将执行上述代码。但是 Session 变量仍然包含旧值该变量没有被清除..但是需要清除 session 变量，以便在 Session 中没有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:51:25.273

如果您只需要删除所有行，我认为您不需要循环。尝试这个

```
DataTable dt =(DataTable) Session["dfdtemptable"];
dt.Clear();

Session["dfdtemptable"] = dt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:23:52.533

根据您的代码，它可能会发生。B'cos**当 i < = 0 时将存在与之前相同的值**。B'cos 你的**Session 在外循环**中。检查一下。

```
 while(i> 0)
    {
    dt.Rows[i-1].Delete();
    dt.Rows[i - 1].AcceptChanges();
    i--;
    }
    Session["dfdtemptable"] = dt; 
```

检查您`Session["dfdtemptable"];`分配的位置（**原点 - 未为我们显示-****可以为 i 生成 0 的**b'cos ）。

# mysql - Mysql：可以在更新第一列后强制更新第二列吗？

> ID：13709963
> 
> 赞同：2
> 
> 时间：2012-12-04T18:56:08.403
> 
> 标签：mysql, security

我有一个存储登录数据的 Mysql 数据库。密码和盐保存为 sha512 哈希。现在，如果更改密码列中的值，我想实现一个条件，即盐必须更改，否则 mysql 命令无效。

```
CREATE TABLE loginData(
id int UNSIGNED SERIAL DEFAULT VALUE,
email varchar(64) NOT NULL,
password binary(64) NOT NULL,
salt binary(64) NOT NULL,
PRIMARY KEY(id))
ENGINE=InnoDB; 
```

现在，我在考虑类似外键的完整性约束，但显然我不应该将密码和盐列连接为外键。有什么方法可以防止在*Mysql端**只*更新密码列 - 所以必须提供新的盐？仅在访问代码的一侧阻止它感觉不完整。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:33:33.820

除非您有多个系统访问数据库，否则我不会说仅在访问代码上阻止它是不完整的。您可以通过不授予管理员对表的适当写入权限来阻止管理员手动更新数据。

但是如果你必须在 MySQL 中强制执行，你可以考虑添加一个触发器（更新记录后运行的代码），但如果盐来自你的应用程序，这可能是不可行的。那么最好的选择是只通过存储过程（驻留在数据库中的代码）提供对表的访问，这会强制表的完整性。

见[http://dev.mysql.com/doc/refman/5.6/en/stored-programs-views.html](http://dev.mysql.com/doc/refman/5.6/en/stored-programs-views.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:09:10.247

您可以做到的一种方法是不实际更新您的登录记录以更改密码，而是插入新记录。您需要更改架构以添加名为`active`或类似名称的 tinyint 字段名，以存储指示哪个是活动登录的标志。

然后，您可以在电子邮件/盐和电子邮件/密码上添加唯一索引，以强制这些组合具有唯一性，这意味着您永远不会输入相同盐的相同电子邮件，也永远不会输入相同的电子邮件/密码组合。任何具有相同电子邮件/盐或电子邮件/密码的插入都会失败。如果您不需要密码唯一性（您显然可以不添加电子邮件/密码唯一索引）。

当您查找登录以实际执行凭据检查时，您只需添加`WHERE active = 1`到查询过滤器中。

您可能还希望将插入新盐和密码记录并将旧行更新到`active = 0`事务中的操作包装起来，以便整个事务成功或失败，从而防止用户在没有登录的情况下卡住的情况。*

# iphone - Apple 的 AurioTouch2 示例代码中的“静音”按钮有什么作用？

> ID：13709964
> 
> 赞同：0
> 
> 时间：2012-12-04T18:56:09.977
> 
> 标签：iphone, audio, buffer, core-audio

我正在修改 Apple 开发人员网站上的 AurioTouch2 示例中的代码。目前我正在尝试完全了解该应用程序的功能。我看到应用程序在静音打开时使用静音数据方法将 0 写入缓冲区。然而，在我看来，数据已经被处理过了，当使用应用程序时，我看不出静音是打开还是关闭没有区别。我错过了什么 - 静音的目的是什么？

从 performThu 方法结束（输入回调）

```
if (THIS->mute == YES) { SilenceData(ioData); } 
```

来自 aurioHelper.ccp

```
void SilenceData(AudioBufferList *inData)
{
    for (UInt32 i=0; i < inData->mNumberBuffers; i++)
        memset(inData->mBuffers[i].mData, 0, inData->mBuffers[i].mDataByteSize);
} 
```

[AurioTouch2 示例代码](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40011369-ReadMe_txt-DontLinkElementID_9)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:11:55.327

你是对的，所做的就是将缓冲区归零。这很重要的原因是，`mData`成员可能未初始化（即随机），如果不理会它会导致可怕的嗡嗡声。它可能没有任何区别，但你不应该真的把它留给机会。

如果您曾经处于想要产生静音的情况，请确保您的缓冲区为 0（而不是仅仅离开它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:58:11.970

首先，我发现静音按钮确实有效。当我将手机举到耳边时，我可以听到麦克风的声音正在通过接收器播放。关闭静音没有声音。以前，我期待扬声器（而不是接收器）发出声音。那部分问题解决了。

其次，远程 io 单元将麦克风输入数据放入 ioData 缓冲区。在我期待扬声器的输出会有另一个回调之前，但我认为因为没有一个远程 io 单元只是使用相同的 ioData 并将其播放到接收器（扬声器）。因此，将 ioData 清零（在处理麦克风输入数据以供应用程序使用之后）会导致接收方静音（即静音功能）。任何确认或澄清表示赞赏。

# c# - 将 MSComm VB6 转换为 C#

> ID：13709967
> 
> 赞同：0
> 
> 时间：2012-12-04T18:56:26.787
> 
> 标签：c#, vb6

我正在尝试将一些数据发送到通过串行端口工作的 LCD 显示器。这段代码在 VB6 上完成了这项工作，但我需要将它转换为 C#。可悲的是它不起作用。有任何想法吗？

VB6（示例）

```
MSComm1.CommPort = 1
MSComm1.Settings = "9600,N,8,1"
MSComm1.PortOpen = True
MSComm1.Output = Chr(2)
MSComm1.Output = Trim(Text1.Text) 
```

C#（示例）

```
var serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
serialPort1.Open();
serialPort1.Write(((char)2).ToString());
serialPort1.Write(textbox1.Text);
serialPort1.Close(); 
```

我认为问题出在 serialPort1.Write 函数上，但我想不通。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:06:25.100

> 可悲的是它不起作用

鉴于这个广泛的陈述，我将假设它是数据类型之间的差异，因为`Chr`返回一个介于 0 和 255 之间的值，即一个字节。

```
serialPort1.Write(new byte[]{2}, 0, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:55:59.863

首先，试试这个辅助扩展方法，让编写单字节控制代码更容易

```
public static void Write(this SerialPort sp, byte b)
{
   sp.Write(new byte[]{b}, 0, 1);
} 
```

然后将您的代码更改为：

```
var serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
serialPort1.Encodeing = System.Text.Encoding.Default;
serialPort1.Open();
serialPort1.Write(2);
serialPort1.Write(textbox1.Text.Trim());
serialPort1.Close(); 
```

请注意，我没有对此进行语法检查，而是随意进行了检查，因此您可能需要对其进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:07:21.473

我做一个字节数组

```
byte[] bytSend; 
```

我用要发送的数据填充字节数组然后我用以下命令发送数据

```
sp.Write(bytSend, 0,bytSend.GetUpperBound(0) + 1); 
```

从我的头顶，所以没有真正的测试项目给你，对不起

# objective-c - Shell 脚本语法高亮库

> ID：13709977
> 
> 赞同：0
> 
> 时间：2012-12-04T18:56:56.763
> 
> 标签：objective-c, c, shell, syntax-highlighting

C/C++ 或 Objective-C 中是否有任何（开源）shell 脚本语法高亮库？

我搜索了 google 和 SO，但所有点击都引用了一些特定应用程序的语法突出显示支持，而不是通用库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:00:33.880

当然有。[RegexHighlightView](https://github.com/KayK/RegexHighlightView)是一个相当不错的库。它支持 Windows shell 风格和 Unix SH 风格的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:03:09.073

[source-highlight](http://www.gnu.org/software/src-highlite/source-highlight.html)怎么样？它是 GNU 项目下的一个库和命令行实用程序。

它的语言比 shell 脚本多得多，但越多越好……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:43:47.027

我终于也为 OS X 找到了一个。看起来不错：[草莓](https://github.com/mugginsoft/Fragaria)。

# javascript - 如何将 div 保持在视口的中心

> ID：13709979
> 
> 赞同：0
> 
> 时间：2012-12-04T18:57:00.743
> 
> 标签：javascript, jquery, ipad, viewport

我正在为我的一个项目创建一个反馈系统。我的目标设备是 iPad。基本上发生的是通过 ajax 调用页面的 div，它应该覆盖下面的内容。我有那部分工作。

我想要做的是将 div 锁定在视口的中间。我已经尝试过`position:fixed`我的元素，它可以工作，但它会锁定到错误的位置。它似乎以视口的初始位置为中心。如果我向下滚动到较长页面的底部并调用我的反馈窗口，它仍然会在顶部附近。

## Ajax 页面（在调用页面时运行）

```
$(document).ready(function(){
  $(".popup").css({
    top: "50%",
    left: "50%",
    marginLeft: -$(".popup").width() / 2,
    marginTop: -$(".popup").height() / 2
  });
}); 
```

如果我能找到视口的顶部，我想我就能让它正常工作。

我调查过：http: [//www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)但它并没有真正解决我的问题。

任何帮助、建议或正确方向的指示将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:02:54.760

*无论您向下滚动多远*（我认为这是您想要的） ，都会相对于窗口的左上角应用固定定位。

所以：

```
.popup {
   position:fixed;
   top:20px;
   left:40px;
   right:40px;
} 
```

首先，将您的弹出窗口从地址栏放置 20 像素（意思是，即使您滚动到底部）。

接下来，设置两个`left`AND`right`将“拉伸”固定元素以从窗口两侧开始和结束 40 像素（或任何你给它的）。这是使弹出 div 居中的一种便捷方式。

如果您的弹出窗口需要固定大小 - 不根据窗口的宽度拉伸 - 您可以设置左右（可能为零），然后在这个 div 内，有另一个 div `margin:0 auto`，这将使内部 div 居中在固定的外部 div 内。

PS 就像你可以同时设置`left`and一样`right`，你也可以同时设置`top`and `bottom`，会有对应的结果。但是，如果您需要固定高度，则无法使用该`margin:auto`技巧将其垂直居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:10:15.443

不知道是不是这样，但如果`$(".popup")`它最初被 隐藏`display:none`，那么它的宽度和高度在页面加载时将为零。

# ruby-on-rails-3 - rails 提供与预编译清单不匹配的静态资产路径

> ID：13709980
> 
> 赞同：0
> 
> 时间：2012-12-04T18:57:03.000
> 
> 标签：ruby-on-rails-3, nginx, unicorn

我已经尝试阅读许多其他关于如何正确配置 nginx 为 rails 3.2 提供静态资产的问题，但无论我尝试什么，浏览器加载的资产路径与预编译后 manifest.yml 中指定的资产版本不匹配，并且结果我的所有资产都没有找到。

我的 nginx 配置如下：

```
location ~ ^/assets/ {    

    # Per RFC2616 - 1 year maximum expiry
    # http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html
    expires 1y;
    add_header Cache-Control public;

    gzip_static on;

    # Some browsers still send conditional-GET requests if there's a
    # Last-Modified header or an ETag header even if they haven't
    # reached the expiry date sent in the Expires header.
    add_header Last-Modified "";
    add_header ETag "";
    break;
} 
```

我还检查了 nginx 中的根路径是否正确。我通过 Unix 域套接字将 nginx 与 unicorn 一起使用。

我第一次设置这个，一切都很好。然后我修改了一个资产并重新部署。该资产随后被破坏。然后我撞了资产版本，现在所有资产都坏了。我已尝试清除本地缓存以防万一导致问题，但没有帮助。

我现在开始扯头发，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:03:06.257

经过更多调查，我发现独角兽进程在更新时没有正确重启。

# c# - ASP.NET MVC - 自定义成员

> ID：13709986
> 
> 赞同：0
> 
> 时间：2012-12-04T18:57:30.070
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, asp.net-membership

> **可能重复：**
> [如何在我的 ASP.NET MVC 应用程序中附加自定义成员资格提供程序？](https://stackoverflow.com/questions/1655383/how-can-i-attach-a-custom-membership-provider-in-my-asp-net-mvc-application)

在 ASP.NET MVC4 中，您可以向控制器/操作添加属性，以限制对经过身份验证的用户或属于某些角色的用户的访问。

我想利用这个我正在处理的项目，但我宁愿不必使用 .NET Membership Provider。我更愿意创建自己的数据库结构来跟踪用户和角色等。

为了将身份验证属性与我自己的自定义成员身份实现一起使用，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:06:52.473

你看过这个吗？它提供了一种方法：[http ://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:13:47.937

> 我需要做什么才能将身份验证属性与我自己的自定义成员身份实现一起使用

它们不是*身份验证*属性，而是*授权*属性。

要将它们与您自己的角色一起使用，最简单的解决方案是实现[自定义 RoleProvider](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)，在这种情况下，`Authorize`属性应该自动工作。

# java - Play 2.0 框架 - 自定义表单字段

> ID：13709987
> 
> 赞同：5
> 
> 时间：2012-12-04T18:57:32.060
> 
> 标签：java, scala, playframework, playframework-2.0, custom-fields

提前感谢您的时间和帮助！

我正在尝试在 Play 2.0.4 中构建一个自定义表单字段，该字段使用[此处](http://www.eyecon.ro/bootstrap-datepicker/)找到的 twitter bootstrap datepicker 。

基本上，我正在尝试创建一个输出以下内容的自定义字段构造函数：

```
<div class="input-append date error" id="expires_field" data-date="" data-date-format="mm/dd/yyyy">
    <label for="expires_field">Expiration Date</label>
    <div class="input">
        <input class="span2" size="16" type="text" name="expires" id="expires" value="mm/dd/yyyy">
        <span class="add-on"><i class="icon-th"></i></span>
        <span class="help-inline"></span>
    </div>
</div> 
```

但是，尽管在互联网上浏览了很多 - 我一直无法在 Play 2.0 中创建自定义表单字段，我仍然可以在其中验证和显示错误。

我认为，大多数情况下，我对文件需要在应用程序结构中的位置感到有些困惑。

任何帮助将不胜感激！

像素世界

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T15:10:59.827

我也一直在为此苦苦挣扎，这就是我想出的：

```
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit lang: play.api.i18n.Lang)

@import play.api.i18n._
@import views.html.helper._

@elements = @{ new FieldElements(field.id, field, null, args.toMap, lang) }

<div class="control-group">
  <label class="control-label" for="@field.name">@elements.args.get('_label)</label>
  <div class="controls">
    <div class="input-append date" id="@field.id-picker" data-date="@field.value" data-date-format="@elements.args.get('format).getOrElse("mm/dd/yyyy")">
      <input type="text" name="@field.name" id="@field.id">
      <span class="add-on"><i class="icon-calendar"></i></span>
      <span class="help-inline">@elements.errors(elements.lang).mkString(", ")</span>
      <span class="help-block">@elements.infos(elements.lang).mkString(", ")</span> 
    </div>
  </div>
</div> 
```

将其保存在文件 calendar.scala.html 中并像这样使用它：

```
@views.html.forms.calendar(
  myform("end"),
  '_showConstraints -> false,
  '_label -> Messages("label.end.date"),
  'format -> "dd/mm/yyyy"
) 
```

然后在你的 JS 中：

```
$('#end-picker').datepicker({
  weekStart: 1
}).on('changeDate', function(ev){
  $('#end-picker').datepicker('hide');
}); 
```

id 的名称是用 field.name + "-picker" 生成的

此外，您可以使用 inputText：

```
@inputText(
  myform("start"),
  '_showConstraints -> false,
  '_label -> Messages("label.start.date"),
  'class -> "date-picker",
  Symbol("data-date-format") -> "mm/dd/yyyy"
) 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T20:04:40.260

我解决这个问题的最简单方法是在我的 bean 级别定义一个注释（play.data.format.Formats）：

@Formats.DateTime(pattern = "mm/dd/yyyy") 公共日期开始；

该框架负责在 HTML 中呈现。

# python - 在通过 ctypes 调用的 ac 函数中实例化 python 对象

> ID：13709988
> 
> 赞同：3
> 
> 时间：2012-12-04T18:57:32.747
> 
> 标签：python, ctypes

当我从 ctypes 调用的 ac 函数实例化 python 对象时，我的嵌入式 Python 3.3 程序会出现段错误。

设置解释器后，我可以成功地从 c main 实例化一个 python Int（以及自定义 c 扩展类型）：

```
#import <Python/Python.h>  

#define LOGPY(x) \
{ fprintf(stderr, "%s: ", #x); PyObject_Print((PyObject*)(x), stderr, 0); fputc('\n', stderr); }

// c function to be called from python script via ctypes.
void instantiate() {
  PyObject* instance = PyObject_CallObject((PyObject*)&PyLong_Type, NULL);
  LOGPY(instance);
}

int main(int argc, char* argv[]) {
  Py_Initialize();
  instantiate(); // works fine

  // run a script that calls instantiate() via ctypes.
  FILE* scriptFile = fopen("emb.py", "r");
  if (!scriptFile) {
    fprintf(stderr, "ERROR: cannot open script file\n");
    return 1;
  }

  PyRun_SimpleFileEx(scriptFile, scriptPath, 1); // close on completion
  return 0;
} 
```

然后我使用 PyRun_SimpleFileEx 运行 python 脚本。它似乎运行得很好，但是当它通过 ctypes 调用 instantiate() 时，PyObject_CallObject 中的程序段错误：

```
import ctypes as ct
dy = ct.CDLL('./emb')
dy.instantiate() # segfaults 
```

lldb 输出：

```
instance: 0
Process 52068 stopped
* thread #1: tid = 0x1c03, 0x000000010000d3f5 Python`PyObject_Call + 69, stop reason = EXC_BAD_ACCESS (code=1, address=0x18)
    frame #0: 0x000000010000d3f5 Python`PyObject_Call + 69
Python`PyObject_Call + 69:
-> 0x10000d3f5:  movl   24(%rax), %edx
   0x10000d3f8:  incl   %edx
   0x10000d3fa:  movl   %edx, 24(%rax)
   0x10000d3fd:  leaq   2069148(%rip), %rax       ; _Py_CheckRecursionLimit
(lldb) bt
* thread #1: tid = 0x1c03, 0x000000010000d3f5 Python`PyObject_Call + 69, stop reason = EXC_BAD_ACCESS (code=1, address=0x18)
    frame #0: 0x000000010000d3f5 Python`PyObject_Call + 69
    frame #1: 0x00000001000d5197 Python`PyEval_CallObjectWithKeywords + 87
    frame #2: 0x0000000201100d8e emb`instantiate + 30 at emb.c:9 
```

为什么对实例化（）的调用仅从 ctypes 失败？该函数仅在调用 python 库时才会崩溃，所以也许某些解释器状态被 ctypes FFI 调用破坏了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:40:01.427

感谢 Armin Rigo 的提示。问题是通过 ctypes.CDLL() 加载的库会创建在调用本机代码时释放 GIL 的函数。据我所知，这意味着为了让本机函数回调 python 代码，它需要首先使用 python C API 获取 GIL。

更简单的替代方法是使用[ctypes.PyDLL()](http://docs.python.org/3.3/library/ctypes.html#ctypes.PyDLL)，它不会释放 GIL（它还会检查 python 错误标志）。文档说：“因此，这仅对直接调用 Python C API 函数有用。” 我的代码更间接，因为我有 python 代码调用我自己的 C 函数，然后调用 python C API，但问题是一样的。

# exec - 演示论坛的自动恢复文件和数据库

> ID：13709991
> 
> 赞同：0
> 
> 时间：2012-12-04T18:57:49.847
> 
> 标签：exec

我想建立一个演示论坛，用户可以在其中尝试所有功能（包括管理功能）。因为用户可以很容易地以管理员权限“破坏”演示论坛，所以我必须每 24 小时恢复一次数据库和所有文件。我的文件结构如下所示：

```
/demo
    /restore.phpx
    /backup
        /wcf
        /sqlBackup.sql
        /acp
        /cache
        /icon
        /..further directions 
```

“演示”的绝对路径：/www/htdocs/XXXXX/demo/

我尝试了这样的脚本（restore.phpx）：

```
<?php
// delete all files in /demo
exec('rm  /www/htdocs/XXXXX/demo/');
// copy all files from the backup direction
exec('cp -r /www/htdocs/XXXXX/demo/backup/ .');
// restore database
exec('mysql -u USER -p PASSWORD DATABASE < /www/htdocs/XXXXX/demo/backup/sqlBackup.sql');
// chmod 
exec('chmod -R 0777 /www/htdocs/XXXXX/demo/');
?> 
```

但是什么也没有发生（没有恢复）。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:21:25.883

1.- 要删除演示中的所有文件，命令是 rm -r /www/htdocs/XXXXX/demo/

2.- 您正在尝试从之前删除的目录中复制

我会使用您最喜欢的第三方工具进行备份，以便更好地控制备份并使用 cron.daily 脚本进行恢复。

# android - 做一些工作时如何在视图上显示进度条？

> ID：13709992
> 
> 赞同：6
> 
> 时间：2012-12-04T18:57:57.943
> 
> 标签：android, android-listview, progress-bar

`EditText`我对,`Button`和有一个看法`ListView`。Button`onClick()`解析了一些站点（这部分工作正常），但是在 中显示解析的信息需要一些时间`ListView`，所以我想`ProgressBar`在这个地方显示小的，`ListView`一段时间后应该发生的地方。

所以，我把它添加到我的布局中（我在这里写了重要的部分）：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/layout1"
        android:weightSum="1.0">

        <EditText
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight=".86" />

        <ImageButton
            android:layout_height="match_parent"
            android:layout_width="0px"
            android:layout_weight=".14" />

    </LinearLayout>

    <RelativeLayout 
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:layout_below="@id/layout1"
        android:gravity="center"
        android:layout_centerInParent="true"
        android:id="@+id/progressbar" >

        <ProgressBar 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            style="@android:style/Widget.ProgressBar.Small" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/layout1">

        <ListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

    </RelativeLayout>

</RelativeLayout> 
```

在源代码中：

```
progressBar = (RelativeLayout) findViewById(R.id.progressbar); 
```

每次我想展示 时`ProgressBar`，我都会这样做：

```
progressBar.setVisibility(View.VISIBLE); 
```

禁用：

```
progressBar.setVisibility(View.INVISIBLE); 
```

但这不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:32:03.267

无需操纵您`ProgressBar`的可见性。`ListView`有一个称为“空视图”的功能，仅当您`ListView`为空时才会显示。以下是您需要执行的操作：

1.  如果您的活动扩展`ListActivity`，请使用 `android:id="@android:id/list"`for your`ListView`和 `android:id="@android:id/empty"`for your `ProgressBar`。
2.  如果你不扩展`ListActivity`，你的有一个`setEmptyView()` 方法`ListView`，它可以让你做同样的事情。

如果您不需要清空您的`ListView`（例如数据仅加载一次，在活动启动时），上述方法最适合。如果之后需要设置数据，最好使用`ViewSwitcher`，它还有一个很大的优势——它可以让你应用过渡动画。有关详细信息`ViewSwitcher`，请查看[此](http://developer.android.com/reference/android/widget/ViewSwitcher.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:17:40.653

您无需将您的嵌套`ProgressBar`在另一个`RelativeLayout`. 只需将它放在您的主布局中并将其放在最后，使其保持在顶部。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

   // the rest  

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_centerInParent="true"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content" />   

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T19:17:12.850

尝试使用上面提到的异步任务。

```
/**
 * this class performs all the work, shows dialog before the work and dismiss it after
 */
 public class ProgressTask extends AsyncTask<String, Void, Boolean> {

public ProgressTask(ListActivity activity) {
    this.activity = activity;
    dialog = new ProgressDialog(context);
}

/** progress dialog to show user that the backup is processing. */
private ProgressDialog dialog;
/** application context. */
private ListActivity activity;

protected void onPreExecute() {
    this.dialog.setMessage("Progress start");
    this.dialog.show();
}

    @Override
protected void onPostExecute(final Boolean success) {
    if (dialog.isShowing()) {
        dialog.dismiss();
    }

    //do whatever with your data
}

protected Boolean doInBackground(final String... args) {
   try{    
      //parsing of your website here...

      return true;
   } catch (Exception e)
      Log.e("tag", "error", e);
      return false;
   }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T19:17:23.943

与隐藏你的`RelativeLayout`.Modify这样的布局，看看它是怎么回事：`ListView``ProgressBar`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/layout1"
        android:weightSum="1.0">

        <EditText
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight=".86" />

        <ImageButton
            android:layout_height="match_parent"
            android:layout_width="0px"
            android:layout_weight=".14" />

    </LinearLayout>

    <ListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:layout_below="@id/layout1"/>

    <RelativeLayout 
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:gravity="center"
        android:layout_centerInParent="true"
        android:id="@+id/progressbar" >

        <ProgressBar 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            style="@android:style/Widget.ProgressBar.Small" />

    </RelativeLayout>   

</RelativeLayout> 
```

也看看[我的一个答案](https://stackoverflow.com/questions/11556492/android-progress-dialog-within-listview)，对于一个有点类似的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:09:12.513

对于那些对答案感兴趣的人。

仅写入主要标签。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/layout1"
        android:weightSum="1.0" >

        <EditText
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight=".86" />

        <ImageButton
            android:layout_height="match_parent"
            android:layout_width="0px"
            android:layout_weight=".14" />

    </LinearLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/layout1" >

        <ListView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/layout1" />

    </RelativeLayout>

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/layout1"
        android:gravity="center"
        android:visibility="gone"
        android:background="#DDE7E7E8"
        android:id="@+id/pBar" >

        <ProgressBar
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@android:style/Widget.ProgressBar.Small"  />

    </LinearLayout>

</RelativeLayout> 
```

和`AsyncTask`：

```
private class Parsing extends AsyncTask<Void, Void, Void>
{
    private LinearLayout pBar; 

    private Parsing()
    {
        pBar = (LinearLayout) findViewById(R.id.pBar);
    }

    @Override
    protected Void doInBackground(Void... params) 
    {
        parsingHere();
        return null;
    }

    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        pBar.setVisibility(View.VISIBLE);
    }

    @Override
    protected void onPostExecute(Void result) 
    {
        super.onPostExecute(result);
        pBar.setVisibility(View.INVISIBLE);
    }

} 
```

# autocomplete - PyCharm：从自动完成中排除单个文件

> ID：13709995
> 
> 赞同：1
> 
> 时间：2012-12-04T18:58:14.403
> 
> 标签：autocomplete, pycharm, gruntjs

所以，在我的工作中，我们运行 grunt.js 将我们所有的 js 编译到一个文件中。这是 grunt.js 的一个很棒的小功能（带有 grunt:requirejs/growl），但它会导致问题。PyCharm 会经常冻结 3 - 10 秒。

如果我禁用 grunt，则不会发生冻结（因为没有 65 KLOC js 文件）。正在解析组合的文件（这是我将其缩小到的范围）以进行自动完成。我将如何删除单个文件？我可以，可能为组合文件创建一个文件夹，但我真的不想...

* * *

编辑：更好的engrish ...
不是“删除”单个文件，而是“排除”单个文件（对不起，brain.speed > finger.speed）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:31:54.263

因此，显而易见的答案是，文件系统需要 grunts 将自动组合文件放在自己的目录中。然后可以排除该目录。（右键单击，朝向底部）。

自从我这样做了，我的 pycharm 还没有冻结。